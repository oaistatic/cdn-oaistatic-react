import{eq as R,cP as g,fN as E,cY as M,aL as F,bD as y,et as B,bL as D}from"./nqrmgk5te3uzwsyz.js";import{D as L,p as N,d as O,r as s,a as A,j as e}from"./n3epq09dut36rmi2.js";import{r as H,t as T,a as l,u as _,s as k,C as b,b as q,g as j,P as Q,T as $,c as K,d as V}from"./uox23aig6gp6se2y.js";import{C as G}from"./kph6x8ukuagieza9.js";import{T as W,C as Y}from"./ob7ipwckh0wrznae.js";import{g as z}from"./lplxjn5phekt2gia.js";import{C as P,T as J}from"./lbge85qd7znz0laj.js";import{C as U}from"./dnyjnsewv99rujtf.js";import"./jy1u8exw8iz2slve.js";import"./gy64pge8qevmvg7e.js";import"./juhgpsl7u72fbr55.js";import"./ets1agouwvjdf3pn.js";import"./gbfmb6n7vmtt0mld.js";import"./izzltcwrbklvvt51.js";import"./np05s3lkl6u1coe1.js";import"./e4sjbad9hyqt73xe.js";import"./dkr8jkx9n88ez7ho.js";import"./nnldvg4yjd3ynnqu.js";import"./gexkii4rc9qoeezs.js";import"./o1zu0t2rzad6c81z.js";import"./lz1vmotuvwwmb129.js";import"./iwi9e9tak1je4ys9.js";import"./dss9cgi0qcblcwju.js";import"./ms88w7omyr5fyl5m.js";import"./bk8slwxjkdlmxjxm.js";import"./hywf39bgiuru57vx.js";import"./dplssc7283prca44.js";import"./gfex7240qlmgxew5.js";import"./jsnptf63edu6k32a.js";import"./h446s733avqwi4v2.js";import"./hk3emygtpn0flzgl.js";import"./nm5ivxaismwgb6gf.js";import"./jit20xrzecwhc2dk.js";import"./hi5bz78ars1jrvhf.js";import"./xdtirbwvvk4sqc30.js";const Le=()=>(H(),null),Ne=R(function(){const r=L(),[o]=N(),u=O(),p=T(r.conversationId),i=l(o.get("readonly"),!1),c=l(o.get("isFullScreen"),!1),d=l(o.get("header"),!0),m=l(o.get("appPreview"),!1),a=g(()=>E()),C=g(()=>M()),w=l(o.get("hideBottomComposer"),!!i),n=T(r.canmoreId),t=p,f=_();s.useEffect(()=>{k({type:b.Textdoc,textdocId:n})},[n]),q(t,{kind:F.PrimaryAssistant});const h=A();if(s.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),s.useEffect(()=>{n||u("/")},[n,u]),s.useEffect(()=>{j().sendMessage({type:P.Loaded})},[n]),!n||f?.type!==b.Textdoc)return null;const S=()=>{j().sendMessage({type:P.Close})},I=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(Q,{clientThreadId:t,children:e.jsx(U,{clientThreadId:t,children:e.jsx($,{clientThreadId:t,children:m?e.jsx(B,{children:e.jsx(X,{textdocId:f.textdocId})}):I?e.jsxs(e.Fragment,{children:[e.jsx(W,{clientThreadId:t,disableScroll:!a,textdocId:f.textdocId}),e.jsx(Y,{})]}):e.jsx(J,{isEmbedded:!0,hideRunCode:!a,isFullScreen:c,hideHeader:!d,hideBottomComposer:w,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:S},"textdocContent")})})})]})}),X=({textdocId:x})=>{const r=s.useRef(null),o=K(x),[u,p]=s.useState(!1),i=o?.versions??[],c=D(i),d=s.useCallback(V(async m=>{const a=z(m.type,m.content);if(r.current&&(a==="react"||a==="html")){p(!0);const v=r.current.evalAsync({language:a,code:m.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return s.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(G,{visuallyHidden:!u,ref:r,enableTransition:!0,title:""})};export{Le as clientLoader,Ne as default};
//# sourceMappingURL=csv2a4o6zyqi53fa.js.map
