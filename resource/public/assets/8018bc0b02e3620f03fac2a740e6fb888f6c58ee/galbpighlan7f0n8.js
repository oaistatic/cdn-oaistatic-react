import{m as E,k as D,l as x,c as y,g3 as N,b3 as P,W as k,B as f,eq as S}from"./nqrmgk5te3uzwsyz.js";import{f as v,a as C,d as M,b as _,j as e,M as i,D as W,a9 as F,r as B,ad as O}from"./n3epq09dut36rmi2.js";import{dG as A,e as R,aG as p,hU as T}from"./uox23aig6gp6se2y.js";import{R as q,I as h,S as I}from"./jfn2xbz0e4yb37ob.js";import{u as L}from"./l7z05d7dm3lw55zz.js";import{W as V,r as $,i as G,u as U}from"./azqvry2z7sssyjfm.js";import{E as Y}from"./k8b2c4k97fha705a.js";import{W as z}from"./kil09ef9w65kh1p8.js";import"./eirgecln9yzcy5p4.js";import"./izzltcwrbklvvt51.js";import"./gfex7240qlmgxew5.js";import"./jsnptf63edu6k32a.js";import"./dnyjnsewv99rujtf.js";import"./e4sjbad9hyqt73xe.js";import"./dkr8jkx9n88ez7ho.js";import"./nnldvg4yjd3ynnqu.js";import"./h446s733avqwi4v2.js";import"./hk3emygtpn0flzgl.js";import"./nm5ivxaismwgb6gf.js";import"./jit20xrzecwhc2dk.js";import"./hi5bz78ars1jrvhf.js";import"./k9dqus9crie9cyow.js";import"./b99rlgw1hhu0zh6m.js";import"./mgq4dy5xj5doeoq7.js";function Q({environmentId:s,onClose:t}){const r=v(),l=E(),o=C(),a=M(),{mutate:d,isPending:c}=_({mutationFn:()=>V.deleteEnvironment(s),onSuccess:async()=>{$(o,s),await G(o,s),l.success(r.formatMessage({id:"wham.deleteEnvironmentModal.environmentDeletedSuccessfully",defaultMessage:"Environment deleted successfully"})),t(),a("/codex/settings/environments")},onError:()=>{l.danger(r.formatMessage({id:"wham.deleteEnvironmentModal.failedToDeleteEnvironment",defaultMessage:"Failed to delete environment"}))}});return e.jsx(D,{testId:"modal-wham-delete-environment",isOpen:!0,type:"danger",title:e.jsx(i,{id:"wham.deleteEnvironmentModal.title",defaultMessage:"Delete environment"}),onClose:t,primaryButton:e.jsx(x.Button,{title:r.formatMessage({id:"wham.deleteEnvironmentModal.delete",defaultMessage:"Delete"}),color:"danger",loading:c,onClick:()=>{d()}}),secondaryButton:e.jsx(x.Button,{title:r.formatMessage({id:"wham.deleteEnvironmentModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:t}),children:e.jsx("div",{className:"text-sm",children:e.jsx(i,{id:"wham.deleteEnvironmentModal.message",defaultMessage:"Tasks that use it will remain, but users wonâ€™t be able to create follow-up tasks."})})})}function n({label:s,children:t,className:r}){return e.jsxs("div",{className:y("flex flex-col gap-1",r),children:[e.jsx("dt",{className:"text-token-text-primary text-sm font-medium",children:s}),e.jsx("dd",{className:"text-token-text-primary text-sm font-normal",children:t})]})}function X(){const{environmentId:s}=W(),{eligible:t}=A();return t?e.jsx(F,{to:"/codex/onboarding"}):s?e.jsx(Z,{environmentId:s}):e.jsx(N,{})}function Z({environmentId:s}){const t=v(),r=M(),[l,o]=B.useState(!1),{data:a,isLoading:d,isError:c}=U(s),u=R(),m=u&&a&&a.creator.email===u.email,j=P(),w=L(),b=j?.name??t.formatMessage({id:"wham.environmentDetailsPage.workspace",defaultMessage:"Workspace"});return e.jsxs(z,{topPadding:!0,showSidebar:!1,children:[e.jsx("div",{className:"flex flex-col px-8 md:px-16",children:d?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(k,{})}):c?e.jsx(Y,{title:t.formatMessage({id:"wham.environmentDetailsPage.errorLoadingEnvironment",defaultMessage:"Error loading environment"}),description:t.formatMessage({id:"wham.environmentDetailsPage.errorLoadingEnvironmentDescription",defaultMessage:"Error loading environment description"})}):a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-token-border-default flex flex-col justify-between gap-2 border-b pb-4",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs(q,{children:[e.jsx(h,{label:t.formatMessage({id:"wham.environmentDetailsPage.environments",defaultMessage:"Environments"}),url:"/codex/settings/environments",className:"text-token-text-tertiary"}),e.jsx(I,{}),e.jsx(h,{label:a.label,url:`/codex/settings/environment/${s}`,className:"text-token-text-primary font-medium"})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(p,{label:m?void 0:t.formatMessage({id:"wham.environmentDetailsPage.deleteEnvironmentTooltip",defaultMessage:"You cannot delete an environment that you did not create"}),children:e.jsx(f,{color:"danger-outline",onClick:()=>o(!0),disabled:!m,children:e.jsx(i,{id:"wham.environmentDetailsPage.deleteEnvironment",defaultMessage:"Delete"})})}),e.jsx(p,{label:m?void 0:t.formatMessage({id:"wham.environmentDetailsPage.editEnvironmentTooltip",defaultMessage:"You cannot edit an environment that you did not create"}),children:e.jsx(f,{icon:T,onClick:()=>{r(`/codex/settings/environment/${s}/edit`)},disabled:!m,children:e.jsx(i,{id:"wham.environmentDetailsPage.editEnvironment",defaultMessage:"Edit"})})})]})]})}),e.jsx("div",{className:"text-token-text-primary py-8 text-xl",children:a.label}),e.jsxs("div",{className:"grid gap-x-12 gap-y-6 md:grid-cols-2",children:[e.jsx(n,{label:t.formatMessage({id:"wham.environmentDetailsPage.creator",defaultMessage:"Creator"}),children:a.creator.email}),e.jsx(n,{label:t.formatMessage({id:"wham.environmentDetailsPage.image",defaultMessage:"Image"}),children:a.machine.label||e.jsx(i,{id:"wham.environmentDetailsPage.noImage",defaultMessage:"No image"})}),e.jsx(n,{label:t.formatMessage({id:"wham.environmentDetailsPage.description",defaultMessage:"Description"}),children:a.description??e.jsx(i,{id:"wham.environmentDetailsPage.noDescription",defaultMessage:"N/A"})}),e.jsx(n,{label:t.formatMessage({id:"wham.environmentDetailsPage.environmentVariables",defaultMessage:"Environment variables"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:Object.keys(a.env_vars??{}).filter(g=>!g.startsWith("CODEX_ENV_")).join(`
`)})}),e.jsx(n,{label:t.formatMessage({id:"wham.environmentDetailsPage.secrets",defaultMessage:"Secrets"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:Object.keys(a.secrets??{}).join(`
`)})}),e.jsx(n,{label:t.formatMessage({id:"wham.environmentDetailsPage.createdAt",defaultMessage:"Created at"}),children:a.created_at?e.jsx(O,{value:new Date(a.created_at*1e3),year:"numeric",month:"long",day:"numeric"}):e.jsx(i,{id:"wham.environmentDetailsPage.noCreationDate",defaultMessage:"No creation date"})}),e.jsx(n,{label:t.formatMessage({id:"wham.environmentDetailsPage.setupScript",defaultMessage:"Setup script"}),children:e.jsx("pre",{className:"mono text-xs leading-5 break-all whitespace-pre-wrap",children:(Array.isArray(a.setup)?a.setup:[a.setup]).filter(Boolean).join(`
`)})}),e.jsx(n,{label:t.formatMessage({id:"wham.environmentDetailsPage.repository",defaultMessage:"Repository"}),children:a.repo_map?Object.values(a.repo_map).map(g=>g.repository_full_name):e.jsx(i,{id:"wham.environmentDetailsPage.noRepository",defaultMessage:"No repository"})}),e.jsx(n,{label:t.formatMessage({id:"wham.environmentDetailsPage.numTasks",defaultMessage:"No. of tasks"}),children:a.task_count??0}),w&&e.jsx(n,{label:t.formatMessage({id:"94ZVks",defaultMessage:"Share"}),children:a.share_settings==="workspace"?t.formatMessage({id:"wham.environmentDetailsPage.sharedWithWorkspace",defaultMessage:"Shared with {workspaceName}"},{workspaceName:b}):t.formatMessage({id:"wham.environmentDetailsPage.private",defaultMessage:"Private"})})]})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(i,{id:"wham.environmentDetailsPage.environmentNotFound",defaultMessage:"Environment not found"})})}),l&&e.jsx(Q,{environmentId:s,onClose:()=>o(!1)})]})}const be=()=>[{title:"Codex"}],Ee=S(function(){return e.jsx(X,{})});export{Ee as default,be as meta};
//# sourceMappingURL=galbpighlan7f0n8.js.map
