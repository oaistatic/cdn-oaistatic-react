const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gs8kbr9bfiwsxmyq.js","assets/noppaak77yhwzd3y.js","assets/nqrmgk5te3uzwsyz.js","assets/n3epq09dut36rmi2.js","assets/root-nu0t8wee.css","assets/uox23aig6gp6se2y.js","assets/conversation-small-cqkvcue6.css","assets/hk3emygtpn0flzgl.js","assets/nm5ivxaismwgb6gf.js","assets/dnyjnsewv99rujtf.js","assets/e4sjbad9hyqt73xe.js","assets/dkr8jkx9n88ez7ho.js","assets/nnldvg4yjd3ynnqu.js"])))=>i.map(i=>d[i]);
import{R as ae,c as R,a as at,r as h,j as t,M as S,g as nt,f as K,d as it,a6 as ne,a5 as P}from"./n3epq09dut36rmi2.js";import{lY as rt,lZ as ot,s3 as lt,jd as M,k1 as ct,mp as dt,s4 as ut,s5 as mt,s6 as Se,z as xe,s7 as ft,gd as xt,s8 as me,m1 as fe,U as Y,a9 as Le,bJ as ht,bI as gt,s9 as pt,v as Oe,sa as jt,sb as bt,sc as vt,aA as we,sd as St,a1 as yt,hU as wt,A as Nt,se as Ct,f as Pe,eF as kt,q5 as It,cz as _t,m4 as Mt,m5 as ye,sf as Tt,sg as Et,kX as Ae,sh as zt,aG as Ne,fX as Rt,si as Bt,sj as Lt,kY as Ot,sk as Pt,k9 as At,my as Ft,bL as Fe,eR as Dt,sl as Ht,sm as ee,sn as Gt,i2 as Ut,qX as Wt,so as $t,sp as Ce,sq as Vt,sr as Xt,ss as qt,st as Qt,su as Kt,sv as Yt,sw as _e,sx as Jt,sy as Zt,sz as De,I as es,B as He,h as ts,mX as ss,sA as as,mS as ns,mY as is,sB as Ge,sC as rs,sD as os,nh as ls,dt as cs,du as ds,sE as us,c6 as Ue,aK as ms,fH as fs,fx as xs,aJ as hs,aR as gs,dA as ps,sF as We,sG as js,sH as bs,sI as vs,sJ as Ss,hC as ys,sK as ws,sL as Ns,oy as Cs}from"./uox23aig6gp6se2y.js";import{gB as ks,ao as he,c as C,B as J,cn as Is,et as F,W as _s,g as ge,v as $e,at as Ms,_ as Me,aj as O,cP as Ts,t as Es,dk as zs,dh as Ve,bE as Rs,dR as Bs,dd as Ls,dn as Os,dp as Ps,dq as As,ds as Fs,dN as Ds,du as Hs,dv as Gs,as as ke,af as Ie,E as Us,cR as Ws,ag as Xe,ai as qe,e1 as $s,dX as Qe,s as Vs,c0 as Xs,ew as qs,k as Qs,cQ as Ks,fA as Ke,gv as A,ev as Ys}from"./nqrmgk5te3uzwsyz.js";import{u as Js,H as Zs}from"./e3jbhlk6nvddhkdz.js";import{h as pe,S as ea,i as ta,j as sa,e as aa,k as Ye}from"./gfex7240qlmgxew5.js";import{i as na}from"./hk3emygtpn0flzgl.js";import{W as Te}from"./kvhuqs0v8em60vy1.js";import{P as ia}from"./iiunoc4k1n6g4a9l.js";const Ee=nt({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function ra(s){const e=JSON.stringify(s.map(n=>[n.id,n.title,n.update_time]));return h.useMemo(()=>s,[e])}function oa(s){"use forget";const e=R.c(57),{activeId:a,hideOverflowMenu:n}=s,i=at(),[c,u]=h.useState(!1),[o,f]=h.useState(0),r=ks(),[m,d]=h.useState(!1),l=rt(),x=ot();let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g={},e[0]=g):g=e[0];const{conversations:y,hasNextPage:v,fetchNextPage:b,isLoading:j,isFetchingNextPage:k,isError:w}=lt(g),N=ra(y),I=h.useRef(null);let p;e[1]!==v||e[2]!==j||e[3]!==b?(p=_=>{j||_==null||(I.current?.disconnect(),I.current=new IntersectionObserver(st=>{st[0].isIntersecting&&v&&b()}),I.current.observe(_))},e[1]=v,e[2]=j,e[3]=b,e[4]=p):p=e[4];const B=p;let T,ie;e[5]===Symbol.for("react.memo_cache_sentinel")?(T=()=>()=>{I.current?.disconnect()},ie=[],e[5]=T,e[6]=ie):(T=e[5],ie=e[6]),h.useEffect(T,ie);let re,oe;e[7]!==N?(re=()=>{Is.publish({kind:"refreshHistory",conversations:N})},oe=[N],e[7]=N,e[8]=re,e[9]=oe):(re=e[8],oe=e[9]),h.useEffect(re,oe);const Z=N;let le,ce;e[10]!==o||e[11]!==r?(le=()=>{const _=ut(mt(),Date.now());r(()=>{f(o+1)},_+1e3)},ce=[o,r],e[10]=o,e[11]=r,e[12]=le,e[13]=ce):(le=e[12],ce=e[13]),h.useEffect(le,ce);const E=Z.length===0;M.markStart("History",M.NS_SIDEBAR),he()!=null&&!j&&M.markRendered("History",M.NS_SIDEBAR);const je=Js(Z,o);let de;e[14]!==l?(de=l!=null&&l.kind==="conversation"&&l.gizmoId!=null&&ct(l.gizmoId),e[14]=l,e[15]=de):de=e[15];const z=de,tt=j||w||E,D=h.useRef(0),be=tt&&"h-full items-center justify-center empty:hidden",ve=m&&"opacity-50";let H;e[16]!==be||e[17]!==ve?(H=C(be,ve),e[16]=be,e[17]=ve,e[18]=H):H=e[18];let G;e[19]!==z?(G=_=>{_.preventDefault(),z&&d(!0)},e[19]=z,e[20]=G):G=e[20];let U;e[21]!==z||e[22]!==l||e[23]!==x?(U=_=>{_.preventDefault(),z&&(D.current=0,d(!1),x({newGizmoId:null,conversation:l.conversation,previousGizmoId:l.gizmoId??null}))},e[21]=z,e[22]=l,e[23]=x,e[24]=U):U=e[24];let W,$;e[25]!==z?(W=_=>{_.preventDefault(),z&&(D.current=D.current+1)},$=_=>{_.preventDefault(),z&&(D.current=D.current-1,D.current===0&&d(!1))},e[25]=z,e[26]=W,e[27]=$):(W=e[26],$=e[27]);let V;e[28]!==E||e[29]!==j?(V=E&&j&&t.jsx(F,{children:t.jsx(_s,{className:"m-auto"})}),e[28]=E,e[29]=j,e[30]=V):V=e[30];let X;e[31]!==c||e[32]!==E||e[33]!==w||e[34]!==i?(X=E&&w&&t.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[t.jsx(S,{...Ee.unableToLoadHistory}),!c&&t.jsx("div",{className:"mt-1",children:t.jsx(J,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{u(!0),dt(i)},children:t.jsx(S,{...Ee.retryButton})})})]}),e[31]=c,e[32]=E,e[33]=w,e[34]=i,e[35]=X):X=e[35];let q;e[36]!==a||e[37]!==je||e[38]!==v||e[39]!==n||e[40]!==B||e[41]!==E||e[42]!==j||e[43]!==Z?(q=!j&&!E&&t.jsx(Zs,{activeId:a,bucketedItems:je,hasNextPage:v,items:Z,infiniteScrollTriggerElementRef:B,hideOverflowMenu:n}),e[36]=a,e[37]=je,e[38]=v,e[39]=n,e[40]=B,e[41]=E,e[42]=j,e[43]=Z,e[44]=q):q=e[44];let Q;e[45]!==k?(Q=k&&t.jsxs("div",{className:"mb-5",children:[t.jsx(Se,{}),t.jsx(Se,{}),t.jsx(Se,{})]}),e[45]=k,e[46]=Q):Q=e[46];let ue;return e[47]!==H||e[48]!==G||e[49]!==U||e[50]!==W||e[51]!==$||e[52]!==V||e[53]!==X||e[54]!==q||e[55]!==Q?(ue=t.jsxs("div",{id:"history",className:H,onDragOver:G,onDrop:U,onDragEnter:W,onDragLeave:$,children:[V,X,q,Q]}),e[47]=H,e[48]=G,e[49]=U,e[50]=W,e[51]=$,e[52]=V,e[53]=X,e[54]=q,e[55]=Q,e[56]=ue):ue=e[56],ue}const la=ae.memo(oa),ca=2;function da({gizmos:s,maxToShowOnLoad:e=4,showAllSidebarItems:a}){const n=xt(s,l=>l.flair.kind),i=[...(n[me.Workspace]?.map(({resource:l})=>({gizmo:l,section:fe.Workspace}))??[]).slice(0,3),...n[me.FirstParty]?.map(({resource:l})=>({gizmo:l,section:fe.Keep}))??[],...n[me.SidebarKeep]?.map(({resource:l})=>({gizmo:l,section:fe.Keep}))??[]],c=n[me.Recent]??[],o=(a?c:c.slice(0,ca)).map(({resource:l})=>({gizmo:l,section:fe.Recents})),f=i.length;let r=[];r=[...i,...o],a||(r.length>e&&f>e?r=r.slice(0,f):r.length>e&&(r=r.slice(0,e)));const d=s.length>r.length;return{listItems:r,itemsLeft:s.length-r.length,needsToCollapseItems:d,total:s.length}}function ua(s){"use forget";const e=R.c(19),{gizmo:a,currentGizmoId:n,maxToShowOnLoad:i,hideOverflowMenu:c}=s,u=c===void 0?!1:c,o=xe(ma);let f,r,m;if(e[0]!==n||e[1]!==a||e[2]!==u||e[3]!==i||e[4]!==o){const{listItems:g,needsToCollapseItems:y,itemsLeft:v}=da({gizmos:a,maxToShowOnLoad:i,showAllSidebarItems:o});r=y,f=v;let b;e[8]!==n||e[9]!==u?(b=function(w,N){return t.jsx(pe,{gizmo:w,isActive:w.gizmo.id===n,section:N,hideOverflowMenu:u},w.gizmo.id)},e[8]=n,e[9]=u,e[10]=b):b=e[10];const j=b;m=g.map((k,w)=>{const{gizmo:N,section:I}=k;return t.jsxs(h.Fragment,{children:[w>1&&I!==g[w-1].section&&t.jsx("div",{className:"bg-token-border-default my-2 ms-2 h-px w-7"}),j(N,I)]},w)}),e[0]=n,e[1]=a,e[2]=u,e[3]=i,e[4]=o,e[5]=f,e[6]=r,e[7]=m}else f=e[5],r=e[6],m=e[7];let d;e[11]!==f||e[12]!==r||e[13]!==o?(d=r?t.jsxs("button",{onClick:Y.toggleGptListCollapsed,className:"text-token-text-primary hover:bg-token-sidebar-surface-secondary flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm",children:[t.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:t.jsx(Le,{className:"icon-md text-token-text-primary"})}),t.jsx("div",{className:"flex grow items-center gap-1",children:o?t.jsxs(t.Fragment,{children:[t.jsx(S,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),t.jsx(ht,{className:"icon-xs"})]}):t.jsxs(t.Fragment,{children:[t.jsx(S,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:f}}),t.jsx(gt,{className:"icon-xs"})]})})]}):null,e[11]=f,e[12]=r,e[13]=o,e[14]=d):d=e[14];let l;e[15]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(pt,{}),e[15]=l):l=e[15];let x;return e[16]!==m||e[17]!==d?(x=t.jsxs(t.Fragment,{children:[m,d,l]}),e[16]=m,e[17]=d,e[18]=x):x=e[18],x}function ma(s){return!ft.isGptListCollapsed(s)}function fa(){"use forget";const s=R.c(1);if(!he())return null;let a;return s[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(pa,{}),s[0]=a):a=s[0],a}function xa(s){"use forget";const e=R.c(2),{currentGizmoId:a}=s,n=he();if(!n||n.isQuorum())return null;let i;return e[0]!==a?(i=t.jsx(ha,{currentGizmoId:a}),e[0]=a,e[1]=i):i=e[1],i}function ha(s){"use forget";const e=R.c(13),{currentGizmoId:a}=s,n=ge();let i;e[0]!==n?(i=$e(n,"2152104812").get("hide_gpts_if_none",!1),e[0]=n,e[1]=i):i=e[1];const c=i,u=Oe(),{data:o}=jt();let f;e[2]!==o?(f=o===void 0?{}:o,e[2]=o,e[3]=f):f=e[3];const{gizmos:r}=f;let m;e[4]!==r?(m=r??[],e[4]=r,e[5]=m):m=e[5];let d=m;if(u){let x;e[6]!==d?(x=d.filter(ga)??[],e[6]=d,e[7]=x):x=e[7],d=x}let l;return e[8]!==a||e[9]!==d||e[10]!==r?.length||e[11]!==c?(l=(!c||r?.length!==0)&&t.jsx(ua,{gizmo:d,currentGizmoId:a,maxToShowOnLoad:7}),e[8]=a,e[9]=d,e[10]=r?.length,e[11]=c,e[12]=l):l=e[12],l}function ga(s){return!bt(s.resource)}function pa(){"use forget";const s=R.c(4),e=ge();let a;s[0]!==e?(a=$e(e,"2152104812").get("hide_default_gpts",!1),s[0]=e,s[1]=a):a=s[1];const n=a;let i;return s[2]!==n?(i=!n&&t.jsx(vt,{}),s[2]=n,s[3]=i):i=s[3],i}function ja(){return(na()?"âŒ˜":"Ctrl")+" K"}const ba=({onNewThread:s})=>t.jsxs(we,{first:!0,children:[t.jsx(va,{onNewThread:s}),t.jsx(Sa,{}),t.jsx(St,{}),!1]}),va=({onNewThread:s})=>{const e=K(),a=n=>{O.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:"primary"}),O.logEvent("Sidebar Click Gizmo",{gizmo_id:"primary"}),n.metaKey||n.ctrlKey?O.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab"):(Y.setPopoverSidebarOpen(!1),n.preventDefault(),s())};return t.jsx(yt,{"data-testid":"create-new-chat-button",to:"/",onClick:a,icon:wt,label:e.formatMessage({id:"6Abeg/",defaultMessage:"New chat"})})},Sa=()=>{const s=K(),{isFannyPackEnabled:e}=Nt();return h.useEffect(()=>{e&&(Ms.addAction("fannypack.web.action_seen"),Me(()=>import("./gs8kbr9bfiwsxmyq.js").then(a=>a.d),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])))},[e]),e?t.jsx(Ct,{onClick:()=>{Me(()=>import("./gs8kbr9bfiwsxmyq.js").then(a=>a.d),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(a=>a.openFannyPackSearch())},icon:Pe,label:s.formatMessage({id:"bDEsvT",defaultMessage:"Search chats"}),highlightTrailing:t.jsx("div",{className:"touch:hidden",children:ja()})}):null};function ya({currentGizmoId:s}){return t.jsx(kt,{side:"right",sideOffset:-4,alignOffset:-7,size:"auto",triggerButton:t.jsx(It,{as:"div",icon:Le,label:t.jsx(S,{..._t.seeMoreProjectItems})}),children:t.jsx("div",{className:"max-h-[50dvh] max-w-(--sidebar-width) overflow-x-auto [scrollbar-gutter:stable]",children:t.jsx(F,{children:t.jsx(ea,{currentGizmoId:s,inSidebarFlyout:!0,customListItem:pe})})})})}function wa({snorlaxes:s,currentGizmoId:e}){return t.jsx(t.Fragment,{children:s.map(a=>t.jsx(pe,{gizmo:a.gizmo,isActive:a.gizmo.gizmo.id===e},a.gizmo.gizmo.id))})}function Na({currentGizmoId:s}){const{snorlaxes:e,data:a,isLoading:n,isError:i,refetch:c,hasNextPage:u}=Mt(),o=e.slice(0,ye),f=h.useRef(!1),[r,m]=h.useState(!0),d=h.useCallback(function(j){j&&m(!1),c()},[c,m]),l=i||a===void 0&&!n&&f.current;M.markStart("SnorlaxSidebarList",M.NS_SIDEBAR),a!=null&&!n&&M.markRendered("SnorlaxSidebarList",M.NS_SIDEBAR),a===void 0&&!n&&!f.current&&(f.current=!0,d(!1));const g=e?.find(b=>b.gizmo.gizmo.id===s),y=o.some(b=>b.gizmo.gizmo.id===s),v=e&&(e?.length>(!s||y?ye:ye+1)||u);return t.jsxs(t.Fragment,{children:[l&&t.jsx(Tt,{showRetry:r,refetch:d}),!l&&t.jsx(we,{id:"snorlax-heading",children:!n&&t.jsxs(t.Fragment,{children:[t.jsx(Et,{}),t.jsx(wa,{snorlaxes:o,currentGizmoId:s}),g&&!y&&t.jsx(pe,{gizmo:g.gizmo,isActive:!0}),v&&t.jsx(ya,{currentGizmoId:s})]})})]})}function Ca(s){"use forget";const e=R.c(5),{clientThreadId:a,onNewThread:n}=s,i=zs(a),c=Ve(a),u=Rs(),o=Oe(),f=u?void 0:i;let r;return e[0]!==c||e[1]!==o||e[2]!==n||e[3]!==f?(r=t.jsx(ka,{currentGizmoId:c,activeId:f,isSnorlaxEnabled:o,onNewThread:n}),e[0]=c,e[1]=o,e[2]=n,e[3]=f,e[4]=r):r=e[4],r}function ka(s){"use forget";const e=R.c(19),{currentGizmoId:a,activeId:n,isSnorlaxEnabled:i,onNewThread:c}=s,u=he();let o;e[0]!==u?(o=u?.isQuorum(),e[0]=u,e[1]=o):o=e[1];const f=o;let r;e[2]!==c?(r=t.jsx(ba,{onNewThread:c}),e[2]=c,e[3]=r):r=e[3];let m;e[4]!==a||e[5]!==f||e[6]!==i?(m=!f&&t.jsxs(t.Fragment,{children:[t.jsxs(we,{children:[t.jsx(Bs,{name:"GizmoSidebarList",children:t.jsx(xa,{currentGizmoId:a})}),t.jsx(fa,{})]}),i&&t.jsx(Na,{currentGizmoId:a})]}),e[4]=a,e[5]=f,e[6]=i,e[7]=m):m=e[7];let d;e[8]!==f?(d=null,e[8]=f,e[9]=d):d=e[9];let l;e[10]!==n?(l=t.jsx(la,{activeId:n}),e[10]=n,e[11]=l):l=e[11];let x;e[12]!==m||e[13]!==d||e[14]!==l?(x=t.jsx(F,{fallback:null,children:t.jsxs(h.Suspense,{children:[m,d,l]})}),e[12]=m,e[13]=d,e[14]=l,e[15]=x):x=e[15];let g;return e[16]!==r||e[17]!==x?(g=t.jsxs(t.Fragment,{children:[r,x]}),e[16]=r,e[17]=x,e[18]=g):g=e[18],g}function hn(s){"use forget";const e=R.c(4),{clientThreadId:a,onNewThread:n}=s,i=ge();let c;return e[0]!==a||e[1]!==i||e[2]!==n?(c=Es(i)?t.jsx(Ca,{clientThreadId:a,onNewThread:n}):null,e[0]=a,e[1]=i,e[2]=n,e[3]=c):c=e[3],c}function Ia(s){"use forget";const e=R.c(20),{onNewThread:a}=s,n=K(),i=Ts(Ma),c=ta();let u;e[0]!==n?(u=n.formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"}),e[0]=n,e[1]=u):u=e[1];const o=u,f=i?.visible&&i.getTitlebarAreaRect().left>0?"justify-end":"justify-between";let r;e[2]!==f?(r=C("h-header-height flex items-center",f),e[2]=f,e[3]=r):r=e[3];let m;e[4]!==a?(m=t.jsx(Ta,{onNewThread:a}),e[4]=a,e[5]=m):m=e[5];let d;e[6]!==c?(d=c&&t.jsx(sa,{}),e[6]=c,e[7]=d):d=e[7];let l;e[8]!==o?(l=t.jsx(Ae,{className:"no-draggable",color:"tertiary",iconClassName:"icon-lg-heavy","aria-label":o,onClick:_a,icon:zt,mobileIcon:Ls,"data-testid":"close-sidebar-button"}),e[8]=o,e[9]=l):l=e[9];let x;e[10]!==o||e[11]!==l?(x=t.jsx(Ne,{label:o,triggerAs:null,children:l}),e[10]=o,e[11]=l,e[12]=x):x=e[12];let g;e[13]!==d||e[14]!==x?(g=t.jsxs("div",{className:"flex",children:[d,x]}),e[13]=d,e[14]=x,e[15]=g):g=e[15];let y;return e[16]!==r||e[17]!==m||e[18]!==g?(y=t.jsxs("div",{id:"sidebar-header",className:r,children:[m,g]}),e[16]=r,e[17]=m,e[18]=g,e[19]=y):y=e[19],y}function _a(){Y.setSidebarOpen(!1)}function Ma(){return navigator.windowControlsOverlay}function Ta({onNewThread:s,testId:e}){const a=K();return t.jsx(Ae,{onClick:n=>{const i=n.currentTarget.closest("nav");if(i&&i.scrollTop>0){i.scrollTo({top:0,behavior:"smooth"}),n.preventDefault();return}Y.setPopoverSidebarOpen(!1),s()},icon:Rt,color:"primary","aria-label":a.formatMessage({id:"H6SRdK",defaultMessage:"Home"}),"data-testid":e,as:"link"})}const Ea=()=>{const s=it();return t.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[t.jsx(Ia,{onNewThread:()=>{Bt(s)}}),t.jsx(za,{}),t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(Lt,{})})]})},Je="border border-token-border-xlight bg-token-sidebar-surface-secondary";function L({className:s,width:e}){return t.jsx("div",{className:C("h-2.5 grow rounded-sm",Je,s),style:{maxWidth:e+"px"}})}function za(){const s=t.jsx("div",{className:C("h-4 w-4 shrink-0 grow-0 rounded-full",Je)});return t.jsxs("div",{className:"mt-2 flex w-full grow flex-col gap-4 overflow-hidden px-2",style:{maskImage:"linear-gradient(to bottom, black 50%, transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, black 50%, transparent 100%)"},children:[t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(L,{width:80})]}),t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(L,{width:120})]}),t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(L,{width:100})]}),t.jsx("div",{className:"mt-5 flex flex-row items-center justify-start gap-3",children:t.jsx(L,{width:150})}),t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(L,{width:50})]}),t.jsxs("div",{className:"flex flex-row items-center justify-start gap-3",children:[s,t.jsx(L,{width:100})]}),t.jsxs("div",{className:"mb-5 flex flex-row items-center justify-start gap-3",children:[s,t.jsx(L,{width:80})]}),[120,180,160,100,90,190,140,120,180,170,100,120,180,150].map((e,a)=>t.jsx("div",{className:"flex flex-row items-center justify-start py-1",children:t.jsx(L,{width:e})},a))]})}function gn({onClick:s,className:e,...a}){return t.jsx(Ht,{onClick:s,className:C(e,"grow overflow-hidden"),...a})}function pn({onNewChatButtonClick:s}){const{isUnauthenticated:e,isLoading:a}=ke();return a||!e?null:t.jsx(Ye,{className:"me-3",onClick:()=>{O.logNewChatButtonClicked({location:"Mobile header"}),s()}})}function jn({onNewChatButtonClick:s,clientThreadId:e}){const{isUnauthenticated:a,isLoading:n}=ke(),i=At(),c=Ve(e),u=Ie(e,Xe.getIsNewConversation),o=Us(),f=u&&o&&!a&&!c;if(n)return null;if(a)return i?t.jsx(Ba,{}):t.jsx(Ra,{});const r=t.jsx(Ye,{onClick:()=>{O.logNewChatButtonClicked({location:"Mobile header"}),s()}});return f?t.jsx(Ft,{variant:"secondary",clientThreadId:e}):r}function Ra(){const s=Fe(),e=Dt({id:"navigation.signUpButtonText",defaultMessage:"Sign up",description:"Button text for Sign up button"});return t.jsx(J,{as:"button",size:"small",color:"primary",onClick:()=>{s({authType:"signup",callback:a=>{O.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:a})}})},children:t.jsx(S,{...e})})}function Ba(){const s=Fe();return t.jsx(J,{as:"button",size:"small",color:"primary",onClick:()=>{s({authType:"login",callback:e=>{O.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:e})}})},"data-testid":"mobile-login-button",children:t.jsx(S,{...Ws.logInButtonText})})}function La({onClick:s}){const e=aa(Pt,Ot,!0,!0);return t.jsxs("button",{type:"button",className:"hover:text-token-text-primary inline-flex rounded-md focus:ring-2 focus:ring-white focus:outline-hidden focus:ring-inset active:opacity-50",onClick:s,"data-testid":"open-sidebar-button",children:[t.jsx("span",{className:"sr-only",children:t.jsx(S,{id:"navigation.openSidebar",defaultMessage:"Open sidebar"})}),t.jsx(e,{className:"icon-lg text-token-text-secondary mx-2"})]})}const Oa=({rightContentExpanded:s,onOpenSidebar:e,children:a,showNavSidebar:n,leftContent:i,rightContent:c,bottomContent:u})=>{const o=xe(f=>f.isConversationScrolledFromTop);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:C("draggable h-header-height bg-token-main-surface-primary sticky top-0 z-10 flex items-center justify-center border-transparent ps-0 md:hidden",o?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]"),children:[(n||i)&&t.jsxs("div",{className:"no-draggable absolute start-0 top-0 bottom-0 ms-3 inline-flex items-center justify-center",children:[n&&t.jsx(La,{onClick:e}),i]}),t.jsx("div",{className:"no-draggable",children:a}),c&&t.jsx("div",{className:C("no-draggable absolute end-0 top-0 bottom-0 me-3 inline-flex items-center justify-center",s&&"start-10"),children:c})]}),u&&t.jsx("div",{className:"no-draggable bg-token-main-surface-primary flex w-full items-center justify-center md:hidden",children:u})]})};function Pa({isPopover:s=!1,children:e}){return M.markStart("StageNavigationSidebar"),M.markRendered("StageNavigationSidebar"),s?t.jsx(Fa,{children:e}):t.jsx(Aa,{children:e})}const Ze={type:"spring",bounce:.12,duration:.64},ze={...Ze,duration:.4},Aa=({style:s,children:e})=>(M.trackNamespace(M.NS_SIDEBAR),t.jsx(P.div,{className:C("bg-token-sidebar-surface-primary border-token-border-light z-21 h-full w-[var(--sidebar-width)] shrink-0 overflow-x-hidden border-e [view-transition-name:var(--sidebar-slideover)] dark:border-[#00000030]"),initial:{width:0},transition:Ze,animate:{width:260},exit:{width:0},style:s,children:t.jsx("div",{className:"flex h-full min-h-0 w-[var(--sidebar-width)] flex-col",children:e})})),Fa=({children:s})=>{const e=xe(a=>a.isPopoverSidebarOpen);return t.jsx(Os,{open:e,onOpenChange:a=>{Y.setPopoverSidebarOpen(a)},children:t.jsx(Ps,{forceMount:!0,children:t.jsxs(ne,{children:[e&&t.jsx(As,{asChild:!0,children:t.jsx(P.div,{className:"fixed inset-0 z-10 bg-gray-50/50 dark:bg-black/50",transition:ze,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.12}}})}),e&&t.jsx(Fs,{asChild:!0,onOpenAutoFocus:a=>{a.preventDefault()},children:t.jsxs(P.div,{className:"bg-token-sidebar-surface-primary top-banner-visible:bottom-0 top-banner-visible:top-(--top-banner-height,0px) top-banner-visible:h-auto fixed start-0 top-0 z-50 h-full w-[var(--sidebar-width)] max-w-xs border-e border-gray-200 shadow-[0_0_64px_0_rgba(0,0,0,0.07)] [view-transition-name:var(--sidebar-popover)] focus:outline-hidden dark:border-gray-800",transition:ze,initial:{translateX:"-100%"},animate:{translateX:"0"},exit:{translateX:"-100%",transition:{duration:.12}},children:[t.jsx(Ds,{asChild:!0,children:t.jsxs(Hs,{children:[t.jsx(S,{id:"navigation.sidebarTitle",defaultMessage:"Sidebar"}),t.jsx(Gs,{})]})}),s]})})]})})})};function Da({children:s}){return t.jsx("div",{className:"bg-token-main-surface-primary h-full w-full px-[22px] py-4",children:s})}function Ha(){return t.jsxs("div",{className:"flex w-full gap-2",children:[t.jsx("div",{className:"h-6 w-6",children:t.jsx(ee,{className:"h-full w-full rounded-full!"})}),t.jsxs("div",{className:"flex w-full flex-col gap-2",children:[t.jsx(ee,{}),t.jsx(ee,{}),t.jsx(ee,{}),t.jsx(ee,{})]})]})}function te({icon:s,message:e,iconClassName:a}){return t.jsx("div",{className:"loading-shimmer-pure-text flex h-8 gap-1 overflow-hidden",children:t.jsx(Ce,{fillIcon:!1,icon:s,className:a,children:t.jsx("div",{className:"mt-[.5px] flex h-10",children:e})})})}const Ga=({finalRow:s})=>{const e=K(),a=s.type==="fileOpen"?Gt[s.iconType]??Ut:null;return t.jsx(ne,{children:t.jsx(P.div,{layout:!0,transition:{type:"spring",stiffness:300,damping:30},className:"flex flex-col items-start justify-start gap-4",children:s.type==="search"?t.jsx(te,{icon:t.jsx(Pe,{className:"text-token-text-primary relative h-5 w-5 opacity-50"}),message:e.formatMessage({id:"f9wsyE",defaultMessage:"Searchingâ€¦"})}):s.type==="websiteOpen"?t.jsx(te,{icon:t.jsx(Wt,{className:"inline-flex h-5 w-5 items-center justify-center opacity-50"}),message:e.formatMessage({id:"8L6BBp",defaultMessage:"Readingâ€¦"})}):s.type==="fileOpen"?t.jsx(te,{icon:t.jsx(a,{className:"inline-flex h-5 w-5 items-center justify-center opacity-50"}),message:e.formatMessage({id:"h5M4/O",defaultMessage:"Reading fileâ€¦"})}):s.type==="pythonAnalysis"?t.jsx(te,{icon:t.jsx($t,{className:"inline-flex h-5 w-5 items-center justify-center opacity-50"}),message:e.formatMessage({id:"jZ7gNw",defaultMessage:"Analyzingâ€¦"})}):t.jsx(te,{icon:t.jsx(qe,{className:"inline-flex h-5 w-5 items-center justify-center opacity-50"}),message:e.formatMessage({id:"bSPYmC",defaultMessage:"Thinkingâ€¦"})})})})};function se({children:s}){return t.jsx(P.div,{className:"w-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:s})}const Ua=({previousRow:s,currentRow:e})=>t.jsx("div",{className:"flex flex-col items-start justify-start gap-4",children:e.type==="search"?t.jsx(se,{children:t.jsx(Vt,{row:e,showIcon:!s||s.type!=="search"})},`search_${e.id}`):e.type==="summary"?t.jsx(se,{children:t.jsx(Xt,{row:e,showIcon:!s||s.type!=="summary"})},`summary_${e.id}`):e.type==="websiteOpen"?t.jsx(se,{children:t.jsx(qt,{website:e})},`website_${e.id}`):e.type==="fileOpen"?t.jsx(se,{children:t.jsx(Qt,{row:e})},`file_${e.id}`):e.type==="pythonAnalysis"?t.jsx(se,{children:t.jsx(Kt,{row:e})},`python_${e.id}`):null}),Wa=120,$a=1e3*60*2;function Re(s){s?.scrollIntoView({block:"center",behavior:"smooth"})}function Va({caterpillarStatusMessageTexts:s}){return t.jsx("div",{className:"p-4",children:t.jsx(He,{type:"error",title:s.failureMessage,content:s.failureBannerContentMessage})})}function Xa({caterpillarStatusMessageTexts:s}){return t.jsx("div",{className:"p-4",children:t.jsx(He,{title:s.cancelledMessage,content:""})})}function qa({interruptPrompt:s,setInterruptPrompt:e,handleInterruptCaterpillar:a}){const n=K();return t.jsxs("div",{className:"flex w-full flex-col justify-center gap-4 p-4",children:[t.jsx(es,{ariaLabel:n.formatMessage({id:"aYWRtV",defaultMessage:"Press enter to interrupt task"}),name:"interrupt-caterpillar-prompt",value:s,onChange:i=>e(i.target.value),color:"search",onPressEnter:a}),t.jsx(J,{onClick:a,children:t.jsx(S,{id:"h73FdF",defaultMessage:"Interrupt task"})})]})}function Qa({sourcesCount:s,taskInfo:e}){const a=Ie(e.originalConversationId,i=>Xe.findNode(i,c=>c.message.metadata?.b1de6e2_s===!0&&c.message.metadata?.async_task_id===e.taskId)?.message.metadata?.async_task_status_messages),n=h.useMemo(()=>a?.completed_no_time?t.jsxs(t.Fragment,{children:[a?.completed_with_time??a?.completed_no_time,t.jsx(S,{id:"zxfmo/",defaultMessage:" Â· {sourcesCount} sources",values:{sourcesCount:s}})]}):t.jsx(S,{id:"YG7a0T",defaultMessage:"Completed Â· {sourcesCount} sources",values:{sourcesCount:s}}),[s,a]);return!e.updatedAt&&!a?.completed?null:t.jsx(Ce,{icon:t.jsx(ts,{className:"text-token-text-secondary"}),fillIcon:!1,children:t.jsx("div",{className:"text-token-text-tertiary",children:n})})}function Ka({taskInfo:s,caterpillarStatusMessageTexts:e,sourcesCount:a,caterpillarHeaderRef:n}){const[i,c]=h.useState(""),[u,o]=h.useState(!1),f=$s("caterpillar-interrupts"),r=h.useRef(!1),m=h.useRef(null),d=h.useMemo(()=>(r.current=!!m.current&&Yt(m.current,Wa),s.rows??[]),[s.rows]);h.useEffect(()=>{if(d.length===0){const v=new Date(s.createdAt).getTime(),b=Date.now()-v,j=$a-b;if(j>0){const k=setTimeout(()=>{o(!0)},j);return()=>clearTimeout(k)}else o(!0)}else o(!1)},[d,s.createdAt]),h.useEffect(()=>{r.current&&Re(m.current)},[d]),h.useEffect(()=>{_e(s)||setTimeout(()=>{m.current&&Re(m.current)},100)},[]);const l=Jt({taskId:s.taskId,prompt:i}),x=_e(s)||Zt(s),g=h.useCallback(async()=>{await l.mutateAsync(),c("")},[l,c]),y=h.useMemo(()=>d.length?x?d:d.slice(0,d.length-1):d,[d,x]);return t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{ref:n},"task-header"),t.jsxs("div",{className:"flex w-full flex-col gap-4",children:[t.jsx("div",{className:"text-base font-medium",children:s.title}),d.length?t.jsxs(ne,{initial:!1,children:[y.map((v,b)=>t.jsx(Ua,{previousRow:b>0?d[b-1]:null,currentRow:v},v.id)),!x&&t.jsx(Ga,{finalRow:d[d.length-1]})]}):u?t.jsx(Ce,{fillIcon:!1,icon:t.jsx(qe,{className:"text-token-text-primary inline-flex h-5 w-5 items-center justify-center"}),children:e.waitingInQueueMessage}):t.jsx(Ha,{}),De(s)&&f&&t.jsx(qa,{interruptPrompt:i,setInterruptPrompt:c,handleInterruptCaterpillar:g}),s.status==="failed"?t.jsx(Va,{caterpillarStatusMessageTexts:e}):s.status==="cancelled"?t.jsx(Xa,{caterpillarStatusMessageTexts:e}):s.status==="completed"?t.jsx(Qa,{caterpillarStatusMessageTexts:e,taskInfo:s,sourcesCount:a}):null]}),t.jsx("div",{ref:m},"task-footer")]})}function Ya({taskId:s,setWidth:e=void 0,initialTab:a}){const n=ss(l=>as.getTask(s,l)),{closeThreadSidebar:i}=Qe(),[c,u]=h.useState(a),o=ns(),f=h.useRef(null),r=!1;h.useEffect(()=>{u(a)},[a]),h.useEffect(()=>{},[n?.taskId,n?.status,r]),h.useEffect(()=>{},[n?.taskId,n?.status,c]),h.useEffect(()=>{},[e,n,r]);const{uniqueSources:m,totalSources:d}=h.useMemo(()=>{if(!n?.rows)return{uniqueSources:[],totalSources:0};const l=is(n.rows),x=l.reduce((g,y)=>g+y.count,0);return{uniqueSources:l,totalSources:x}},[n?.rows]);return t.jsx(Ge,{handleClose:i,leading:t.jsx("div",{className:"flex w-full justify-center",children:t.jsx(os,{activeTab:c,setActiveTab:u,showAuxTab:r,sourcesCount:d,caterpillarHeaderRef:f})}),children:n&&t.jsxs(Da,{children:[!1,c==="activity"&&t.jsx(Ka,{taskInfo:n,caterpillarStatusMessageTexts:o,sourcesCount:d,caterpillarHeaderRef:f}),c==="sources"&&t.jsx(rs,{taskIsPending:De(n),finalMessage:n.finalMessage,sources:m,caterpillarHeaderRef:f})]})})}const Be=3;function Ja({product:s,descriptionCitation:e,clientThreadId:a,messageId:n,contentReferenceStartIndex:i,productIndex:c,analyticsMetadata:u,offsetTopMargin:o=!1}){const f=ge(),r=Vs(f,"3381490948"),[m,d]=h.useState(void 0),l=h.useRef([]),x=h.useRef([]),g=m?.product.offers??s.offers??[];for(const p of g)l.current.some(B=>B.merchant_name===p.merchant_name)||l.current.push(p);const y=m?.product.image_urls??s.image_urls??[];for(const p of y)x.current.includes(p)||x.current.push(p);const[v,b]=h.useState(!1);h.useEffect(()=>b(!1),[s]);const j=ls(u),k=cs.useStore(),{numReviews:w,rating:N,ratingGroupedCitation:I}=h.useMemo(()=>{const p=m?.product??s;return{numReviews:p.num_reviews,rating:p.rating,ratingGroupedCitation:p.rating_grouped_citation}},[s,m]);return t.jsxs("div",{className:C("bg-token-bg-primary flex w-full flex-col",o?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)] min-h-screen":"mt-0"),children:[t.jsx(Za,{imageUrls:x.current,title:s.title,onImageClick:p=>{k.setCurrentImage({image:{url:p,content_url:p,thumbnail_url:p,title:s.title,content_size:{width:0,height:0},thumbnail_size:{width:0,height:0}},source:ds.ProductDetails,analyticsMetadata:u,contentReferenceStartIndex:i,productIndex:c})}}),t.jsxs("div",{className:"border-token-border-light flex flex-col border-t px-6 py-4",children:[t.jsx("div",{className:"text-token-text-primary text-xl font-semibold",children:s.title}),w&&w>0&&t.jsxs("div",{className:"flex flex-col gap-1 pt-1",children:[t.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-1 text-sm text-nowrap text-ellipsis",children:[t.jsx(us,{rating:N??0}),t.jsx(S,{id:"Tj10jZ",defaultMessage:"{rating} ({num_reviews})",values:{rating:(N??0).toFixed(1),num_reviews:new Intl.NumberFormat().format(w)}}),t.jsx(Ne,{label:t.jsx(S,{id:"zngDZ6",defaultMessage:"Ratings and pricing are sourced from third parties which may update over time"}),children:t.jsx(Ue,{className:"h-4 w-4"})})]}),I&&t.jsx(Te,{webpageItem:I,trackContentReferenceEvent:j,analyticsMetadata:{...u,section:"products",section_location:"sidebar"},isLastHovered:!0,noMarginStart:!0})]}),s.description&&t.jsxs("div",{className:"pt-3 text-sm",children:[s.description,e&&t.jsx(Te,{webpageItem:e,trackContentReferenceEvent:j,analyticsMetadata:{section:"products",section_location:"sidebar"}})]})]}),t.jsx(ms,{title:t.jsx(S,{id:"ITQW8G",defaultMessage:"Purchasing Options"}),children:t.jsxs("div",{className:"-mx-3 flex flex-col",children:[l.current.slice(0,v?l.current.length:Be).map((p,B)=>t.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:t.jsx(en,{offer:p,onClick:()=>{O.logEventWithStatsig("Product Offer Clicked","product_offer_clicked",{...Xs(u),content_reference_start_index:i,product_index:c,offer_index:B,product_id:s.id,offer_url:p.url,checkout_url:p.checkout_url,offers_count:l.current.length}),window.open(p.checkout_url||p.url,"_blank")}},p.url)},p.url)),l.current.length>Be&&t.jsxs(J,{className:"w-fit px-3",size:"small",color:"ghost",onClick:()=>b(!v),children:[v?t.jsx(S,{id:"Gl3oLS",defaultMessage:"See less"}):t.jsx(S,{id:"f9tOaY",defaultMessage:"See more"}),v?t.jsx(fs,{}):t.jsx(xs,{})]})]})}),r&&t.jsx(ia,{clientThreadId:a,messageId:n,product:s,trackContentReferenceEvent:j,onProductEntityUpdated:p=>{d(p)}})]})}function Za({imageUrls:s,title:e,onImageClick:a}){const[n,i]=h.useState(0),c=h.useRef(null);return s?t.jsxs("div",{className:"flex flex-col",children:[s[n]&&t.jsx(P.div,{className:"bg-token-main-surface-secondary dark:bg-token-main-surface-primary-inverse",drag:"x",dragConstraints:{left:0,right:0},dragElastic:0,onDragEnd:(u,{offset:o,velocity:f})=>{const r=Math.abs(o.x)*f.x;r<-1e3?n<s.length-1&&i(n+1):r>1e3&&n>0&&i(n-1)},onClick:()=>a(s[n]),children:t.jsx("img",{className:"m-0 aspect-square w-full object-contain mix-blend-darken",src:s[n],alt:e,draggable:!1})}),s.length>1&&t.jsx("div",{ref:c,className:"no-scrollbar flex flex-row gap-2.5 overflow-x-scroll px-6 py-3",children:s.map((u,o)=>t.jsx("div",{className:C("flex-none cursor-pointer overflow-hidden rounded-md border-2 p-0.5",n===o?"border-token-text-primary":"border-transparent"),onMouseEnter:()=>i(o),onClick:()=>a(u),children:t.jsx("div",{className:"bg-token-main-surface-secondary dark:bg-token-main-surface-primary-inverse",children:t.jsx("img",{className:"h-10 w-10 rounded-xs object-cover mix-blend-darken",src:u,alt:e})})},`${o}-${u}`))})]}):null}function en({offer:s,onClick:e}){const a=s.price_details,n=a?.base&&(a.shipping??a.tax)&&a.total,i=a?.display_price==="total_price"||n,c=a?.display_price==="total_price";let u=null;n&&a?u=t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsx("div",{children:t.jsx(S,{id:"offer.breakdown.base",defaultMessage:"Base price: {amount}",values:{amount:a.base}})}),a.shipping&&t.jsx("div",{children:t.jsx(S,{id:"offer.breakdown.shipping",defaultMessage:"Shipping: {amount}",values:{amount:a.shipping}})}),a.tax&&t.jsx("div",{children:t.jsx(S,{id:"offer.breakdown.tax",defaultMessage:"Tax: {amount}",values:{amount:a.tax}})})]}):c&&(u=t.jsx(S,{id:"ur3//V",defaultMessage:"Prices shown include estimated tax and shipping."}));const o=!!s.checkout_url;return t.jsxs("div",{className:C("flex cursor-pointer flex-col rounded-xl p-3","hover:bg-token-bg-tertiary"),onClick:e,children:[t.jsxs("div",{className:"flex flex-row items-center gap-2 text-sm font-semibold",children:[t.jsx(hs,{className:"h-5 w-5 rounded-full",url:s.url,size:128,minSize:16,fallback:t.jsx(gs,{className:"text-token-text-tertiary"})}),t.jsx("div",{className:"min-w-0 flex-1 truncate",children:s.merchant_name}),i&&u?t.jsx(Ne,{label:u,children:t.jsxs("span",{className:"flex items-baseline",children:[t.jsx(Ue,{className:"text-token-text-secondary h-3 w-3"}),t.jsx("span",{children:s.price})]})}):t.jsx("span",{children:s.price}),t.jsx(J,{className:"w-fit min-w-20 truncate",size:"small",color:o?"primary":"secondary",children:o?t.jsx(S,{id:"LlDx51",defaultMessage:"Buy now"}):t.jsx(S,{id:"sTpOJt",defaultMessage:"Buy"})})]}),t.jsx("div",{className:"text-token-text-secondary pt-2.5 text-xs",children:s.product_name}),t.jsx("div",{className:"text-token-text-secondary text-xs",children:s.details})]})}function tn({clientThreadId:s,type:e="sidebar"}){const{closeThreadSidebar:a}=Qe(),{clientThreadId:n,messageId:i,turnIndex:c,contentReferenceStartIndex:u,productIndex:o}=qs("product")??{},f=Ie(n,g=>g),r=h.useMemo(()=>({clientThreadId:s,messageId:i,turnIndex:c}),[s,i,c]);if(n!==s||u===void 0||o===void 0||!i)return null;const{product:m,descriptionCitation:d}=ps({thread:f,messageId:i,contentReferenceStartIndex:u,productIndex:o});if(!m)return null;const l=`${i}-${u}-${o}`,x=t.jsx(Ja,{product:m,descriptionCitation:d,clientThreadId:s,messageId:i,contentReferenceStartIndex:u,productIndex:o,analyticsMetadata:r,offsetTopMargin:e==="sidebar"});switch(e){case"sidebar":return t.jsx(Ge,{handleClose:a,children:x},l);case"modal":return t.jsxs(Qs,{testId:"modal-chat-screen-product-flyout",className:"relative max-w-md",size:"custom",type:"success",noPadding:!0,title:m.title,visuallyHiddenHeader:!0,isOpen:!0,onClose:a,children:[x,t.jsx(Ks,{className:"absolute end-2.5 top-2.5 z-10",onClick:a})]},l)}}function sn({isExpanded:s,children:e}){const a=h.useRef(null),[n,i]=h.useState("400px"),c=ae.isValidElement(e)?ae.cloneElement(e,{setWidth:i}):e;return t.jsx(ne,{children:t.jsx(P.div,{className:"bg-token-sidebar-surface-primary relative z-1 shrink-0 overflow-x-hidden max-lg:w-0!",ref:a,initial:!1,animate:{width:s?n:0,transition:{type:"spring",bounce:.12,duration:.3}},onAnimationStart:()=>{a.current&&(a.current.style.visibility="visible")},onAnimationComplete:()=>{a.current&&(s||(a.current.style.visibility="hidden"))},children:t.jsx("div",{className:C("absolute h-full",!s&&"pointer-events-none"),style:{width:n},children:t.jsx("div",{className:"flex h-full flex-col",children:c})})})})}const bn=({setWidth:s,clientThreadId:e})=>{const a=Ke(),n=We();return a?t.jsxs(t.Fragment,{children:[A(a,"searchSources")&&t.jsx(js,{clientThreadId:e}),A(a,"retrievalResults")&&t.jsx(bs,{clientThreadId:e}),n&&A(a,"summarizer")&&t.jsx(vs,{clientThreadId:e}),A(a,"caterpillar")&&t.jsx(Ya,{taskId:a.caterpillarId,initialTab:a.initialTab,setWidth:s}),A(a,"product")&&t.jsx(tn,{clientThreadId:e})]}):null};function et({children:s,hideNavigation:e=!1,mobileHeaderContent:a,mobileHeaderRightContentExpanded:n,mobileHeaderLeftContent:i,mobileHeaderRightContent:c,mobileHeaderBottomContent:u,renderNavSidebar:o,threadFlyout:f,forceOpenDesktopSidebar:r=!1}){const{isUnauthenticated:m}=ke(),d=xe(T=>T.activeSidebar),l=Ys(),x=Ss(),g=Ke(),y=ys(),v=[];let b=null;ae.Children.forEach(s,T=>{ae.isValidElement(T)&&(T.type===et.Sidebars?b=T:v.push(T))});const j=!m&&!e&&o!=null,k=!e&&(j||m),w=We(),N=g?A(g,"summarizer")&&w:!1,I=g?!A(g,"summarizer"):!1,p=l&&(N||I),B=j&&(x||r||y);return t.jsxs("div",{className:"flex h-full w-full flex-col",children:[t.jsx(F,{children:t.jsx(ws,{})}),t.jsxs("div",{className:C("relative flex h-full w-full flex-1 transition-colors",d!=="popover-nav"&&"z-0"),children:[t.jsxs("div",{className:"relative flex h-full w-full flex-row",children:[t.jsx(ne,{initial:!1,children:B&&t.jsx(Pa,{isPopover:x,children:m?t.jsx(Ea,{}):o?.()})}),t.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col",children:[k&&t.jsxs(F,{children:[t.jsx(Ns,{}),t.jsx(Oa,{rightContentExpanded:n,onOpenSidebar:()=>Y.setSidebarOpen(!0),showNavSidebar:j,leftContent:i,rightContent:c,bottomContent:u,children:a})]}),t.jsx("main",{className:"transition-width relative h-full w-full flex-1 overflow-auto",id:"main","z-index":"-1",children:v})]})]}),t.jsx(F,{children:t.jsx(sn,{isExpanded:p,children:f})}),b]}),t.jsx(F,{children:t.jsx(Cs,{useManuallyControlledVisibility:!0})})]})}function an({children:s}){return t.jsx(t.Fragment,{children:s})}et.Sidebars=an;export{hn as C,bn as F,ka as S,Ia as a,et as b,jn as c,pn as d,gn as e};
//# sourceMappingURL=izxna8u6mo9guqnq.js.map
