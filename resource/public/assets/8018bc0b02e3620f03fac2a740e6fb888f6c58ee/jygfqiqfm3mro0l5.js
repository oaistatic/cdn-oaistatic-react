import{g3 as y,m as w,W as b,eq as M}from"./nqrmgk5te3uzwsyz.js";import{D as _,j as e,a9 as C,f as N,d as k,a as F,b as W,M as l}from"./n3epq09dut36rmi2.js";import{dG as P}from"./uox23aig6gp6se2y.js";import{R,I as a,S as p}from"./jfn2xbz0e4yb37ob.js";import{E as A,R as U,g as D}from"./kueghnulpptrp5b2.js";import{u as T}from"./l7z05d7dm3lw55zz.js";import{u as O,W as q,i as B,a as I}from"./azqvry2z7sssyjfm.js";import{W as L}from"./kil09ef9w65kh1p8.js";import"./mju7kizfx6z8lxtd.js";import"./174fvluhmzu5w4r1.js";import"./bns64zud9fwchaft.js";import"./nbk4rss8dpmhnkwu.js";import"./loybro28dk8o1rh8.js";import"./np05s3lkl6u1coe1.js";import"./k9dqus9crie9cyow.js";import"./b99rlgw1hhu0zh6m.js";import"./mgq4dy5xj5doeoq7.js";import"./fc9seyy3gmyyaxsm.js";import"./eirgecln9yzcy5p4.js";import"./izzltcwrbklvvt51.js";import"./gfex7240qlmgxew5.js";import"./jsnptf63edu6k32a.js";import"./dnyjnsewv99rujtf.js";import"./e4sjbad9hyqt73xe.js";import"./dkr8jkx9n88ez7ho.js";import"./nnldvg4yjd3ynnqu.js";import"./h446s733avqwi4v2.js";import"./hk3emygtpn0flzgl.js";import"./nm5ivxaismwgb6gf.js";import"./jit20xrzecwhc2dk.js";import"./hi5bz78ars1jrvhf.js";function $(){const{environmentId:s}=_(),{eligible:i}=P();return i?e.jsx(C,{to:"/codex/onboarding"}):s?e.jsx(z,{environmentId:s}):e.jsx(y,{})}function z({environmentId:s}){const i=N(),o=w(),v=k(),m=F(),{data:n,isLoading:g,isError:h}=O(s),d=n?.secrets??{},x=T()?"workspace":"private",{mutate:f,isPending:E}=W({mutationFn:t=>q.updateEnvironment(s,t),onSuccess:async t=>{await B(m,s),I(m,s,t),o.success(i.formatMessage({id:"wham.editEnvironment.environmentUpdatedSuccessfully",defaultMessage:"Environment updated successfully"})),v(`/codex/settings/environment/${s}`)},onError:()=>{o.danger(i.formatMessage({id:"wham.editEnvironment.failedToUpdateEnvironment",defaultMessage:"Failed to update environment"}))}});function j(t){const r=D(t.secrets,d),S=t.envVars.reduce((c,u)=>(c[u.key]=u.value,c),{});f({label:t.label,repos:[t.repositoryId],machine_id:t.machine,setup:t.setupCommands,workspace_dir:t.workspaceDirectory,description:t.description,share_settings:t.share_settings,secrets:r,env_vars:S})}return e.jsx(L,{flex:!0,hideBorder:!0,showSidebar:!1,maxWidth:"w-full",children:g?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(b,{})}):h?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(l,{id:"wham.editEnvironment.errorLoadingEnvironment",defaultMessage:"Error loading environment"})}):n?e.jsxs(e.Fragment,{children:[e.jsxs(R,{className:"sticky top-0 px-4",children:[e.jsx(a,{label:i.formatMessage({id:"wham.editEnvironment.environments",defaultMessage:"Environments"}),url:"/codex/settings/environments",className:"text-token-text-tertiary"}),e.jsx(p,{}),e.jsx(a,{label:n.label,url:`/codex/settings/environment/${s}`,className:"font-medium"}),e.jsx(p,{}),e.jsx(a,{label:i.formatMessage({id:"wham.editEnvironment.edit",defaultMessage:"edit"}),className:"text-token-text-tertiary"})]}),e.jsx(A,{initialEnvironmentId:s,existingEnvironment:n,initialValues:{label:n?.label,description:n?.description??"",share_settings:n?.share_settings??x,machine:n?.machine_id,repositoryId:n?.repos[0],workspaceDirectory:n?.workspace_dir??"",setupCommands:n?.setup?Array.isArray(n?.setup)?n.setup.join(`
`):n.setup:"",envVars:Object.entries(n?.env_vars??{}).map(([t,r])=>({key:t,value:r})),secrets:Object.keys(d).map(t=>({key:t,value:U,isEditing:!1}))},primaryButtonText:i.formatMessage({id:"wham.editEnvironment.saveEnvironment",defaultMessage:"Save environment"}),onSubmit:j,isPending:E})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(l,{id:"wham.editEnvironment.environmentNotFound",defaultMessage:"Environment not found"})})})}const we=()=>[{title:"Codex"}],be=M(function(){return e.jsx($,{})});export{be as default,we as meta};
//# sourceMappingURL=jygfqiqfm3mro0l5.js.map
