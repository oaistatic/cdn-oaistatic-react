import{q9 as Q,qa as _e,hL as we,db as xe,jR as Se,fm as ye,E as Me,hP as be,e3 as Ee,op as Te,qb as Le,qc as Pe,n3 as Z,ki as Ie,qd as Re,U as Ne,qe as Oe,i5 as De,i4 as Ue,qf as Fe,kp as je,fB as He,G as qe,a_ as ee,qg as Ae,qh as Ke,qi as Ge,qj as te,df as We,qk as Be,ql as Ve,qm as ne,qn as ze,qo as Xe,qp as Ye,qq as $e,qr as Je,qs as Qe,cR as E,qt as Ze,qu as R,qv as se,qw as et,qx as tt,qy as nt,oq as st,aF as rt}from"./uox23aig6gp6se2y.js";import{dK as at,dL as ot,z as it,g as U,hd as lt,bc as ct,bQ as pt,af as ut,as as dt,c0 as F,aj as _,k as mt,l as ft,B as gt,at as ht,dk as vt,ad as kt,c as Ct,o as _t,ae as re,aJ as L,aX as wt,fd as ae,ag as xt,c4 as j,c5 as H,s as St,aL as yt,d3 as oe,he as Mt}from"./nqrmgk5te3uzwsyz.js";import{r as v,j as g,f as bt,M as G,R as q}from"./n3epq09dut36rmi2.js";import{s as Et,a as Tt,t as Lt,m as Pt,p as It,b as Rt,k as Nt,c as Ot,d as Dt,g as Ut,P as Ft,u as ie}from"./e4sjbad9hyqt73xe.js";import{P as jt,a as le,M as Ht,k as N,d as W,S as qt,E as At,e as Kt,n as Gt,i as Wt,g as Bt,h as Vt,j as B,r as zt}from"./dkr8jkx9n88ez7ho.js";const Xt=500;class w{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let a=this.items.length;for(;;a--)if(this.items.get(a-1).selection){--a;break}let s,r;t&&(s=this.remapping(a,this.items.length),r=s.maps.length);let o=e.tr,i,l,c=[],m=[];return this.items.forEach((p,u)=>{if(!p.step){s||(s=this.remapping(a,u+1),r=s.maps.length),r--,m.push(p);return}if(s){m.push(new S(p.map));let d=p.step.map(s.slice(r)),f;d&&o.maybeStep(d).doc&&(f=o.mapping.maps[o.mapping.maps.length-1],c.push(new S(f,void 0,void 0,c.length+m.length))),r--,f&&s.appendMap(f,r)}else o.maybeStep(p.step);if(p.selection)return i=s?p.selection.map(s.slice(r)):p.selection,l=new w(this.items.slice(0,a).append(m.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:i}}addTransform(e,t,a,s){let r=[],o=this.eventCount,i=this.items,l=!s&&i.length?i.get(i.length-1):null;for(let m=0;m<e.steps.length;m++){let p=e.steps[m].invert(e.docs[m]),u=new S(e.mapping.maps[m],p,t),d;(d=l&&l.merge(u))&&(u=d,m?r.pop():i=i.slice(0,i.length-1)),r.push(u),t&&(o++,t=void 0),s||(l=u)}let c=o-a.depth;return c>$t&&(i=Yt(i,c),o-=c),new w(i.append(r),o)}remapping(e,t){let a=new Ht;return this.items.forEach((s,r)=>{let o=s.mirrorOffset!=null&&r-s.mirrorOffset>=e?a.maps.length-s.mirrorOffset:void 0;a.appendMap(s.map,o)},e,t),a}addMaps(e){return this.eventCount==0?this:new w(this.items.append(e.map(t=>new S(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let a=[],s=Math.max(0,this.items.length-t),r=e.mapping,o=e.steps.length,i=this.eventCount;this.items.forEach(u=>{u.selection&&i--},s);let l=t;this.items.forEach(u=>{let d=r.getMirror(--l);if(d==null)return;o=Math.min(o,d);let f=r.maps[d];if(u.step){let k=e.steps[d].invert(e.docs[d]),h=u.selection&&u.selection.map(r.slice(l+1,d));h&&i++,a.push(new S(f,k,h))}else a.push(new S(f))},s);let c=[];for(let u=t;u<o;u++)c.push(new S(r.maps[u]));let m=this.items.slice(0,s).append(c).append(a),p=new w(m,i);return p.emptyItemCount()>Xt&&(p=p.compress(this.items.length-a.length)),p}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),a=t.maps.length,s=[],r=0;return this.items.forEach((o,i)=>{if(i>=e)s.push(o),o.selection&&r++;else if(o.step){let l=o.step.map(t.slice(a)),c=l&&l.getMap();if(a--,c&&t.appendMap(c,a),l){let m=o.selection&&o.selection.map(t.slice(a));m&&r++;let p=new S(c.invert(),l,m),u,d=s.length-1;(u=s.length&&s[d].merge(p))?s[d]=u:s.push(p)}}else o.map&&a--},this.items.length,0),new w(Q.from(s.reverse()),r)}}w.empty=new w(Q.empty,0);function Yt(n,e){let t;return n.forEach((a,s)=>{if(a.selection&&e--==0)return t=s,!1}),n.slice(t)}class S{constructor(e,t,a,s){this.map=e,this.step=t,this.selection=a,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new S(t.getMap().invert(),t,this.selection)}}}class y{constructor(e,t,a,s,r){this.done=e,this.undone=t,this.prevRanges=a,this.prevTime=s,this.prevComposition=r}}const $t=20;function Jt(n,e,t,a){let s=t.getMeta(M),r;if(s)return s.historyState;t.getMeta(en)&&(n=new y(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(M))return o.getMeta(M).redo?new y(n.done.addTransform(t,void 0,a,T(e)),n.undone,V(t.mapping.maps),n.prevTime,n.prevComposition):new y(n.done,n.undone.addTransform(t,void 0,a,T(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let i=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=i&&(n.prevTime<(t.time||0)-a.newGroupDelay||!Qt(t,n.prevRanges)),c=o?P(n.prevRanges,t.mapping):V(t.mapping.maps);return new y(n.done.addTransform(t,l?e.selection.getBookmark():void 0,a,T(e)),w.empty,c,t.time,i??n.prevComposition)}else return(r=t.getMeta("rebased"))?new y(n.done.rebased(t,r),n.undone.rebased(t,r),P(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new y(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),P(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function Qt(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((a,s)=>{for(let r=0;r<e.length;r+=2)a<=e[r+1]&&s>=e[r]&&(t=!0)}),t}function V(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((a,s,r,o)=>e.push(r,o));return e}function P(n,e){if(!n)return null;let t=[];for(let a=0;a<n.length;a+=2){let s=e.map(n[a],1),r=e.map(n[a+1],-1);s<=r&&t.push(s,r)}return t}function Zt(n,e,t){let a=T(e),s=M.get(e).spec.config,r=(t?n.undone:n.done).popEvent(e,a);if(!r)return null;let o=r.selection.resolve(r.transform.doc),i=(t?n.done:n.undone).addTransform(r.transform,e.selection.getBookmark(),s,a),l=new y(t?i:r.remaining,t?r.remaining:i,null,0,-1);return r.transform.setSelection(o).setMeta(M,{redo:t,historyState:l})}let I=!1,z=null;function T(n){let e=n.plugins;if(z!=e){I=!1,z=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){I=!0;break}}return I}const M=new le("history"),en=new le("closeHistory");function tn(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new jt({key:M,state:{init(){return new y(w.empty,w.empty,null,0,-1)},apply(e,t,a){return Jt(t,a,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let a=t.inputType,s=a=="historyUndo"?pe:a=="historyRedo"?O:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function ce(n,e){return(t,a)=>{let s=M.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(a){let r=Zt(s,t,n);r&&a(e?r.scrollIntoView():r)}return!0}}const pe=ce(!1,!0),O=ce(!0,!0);function nn(){return N({"Shift-Enter":(n,e)=>W(n,e),Enter:(n,e)=>window.innerWidth>_e[we.Medium]||at||ot()?!1:W(n,e)})}const sn=["p",0],rn=["br"],an=new qt({nodes:{paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p",preserveWhitespace:"full"}],toDOM(){return sn}},text:{group:"inline"},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return rn}},[Tt]:Et,doc:{content:"block+"}},marks:{}});function on(n=null,e){const t=new EventTarget,a=Ut(e),s=new At(null,{state:Kt.create({schema:an,plugins:[tn(),Pt(),It(""),Rt(),...a.enabled&&a.trackingKeywords.length>0?[Nt(a.trackingKeywords)]:[],nn(),N({"Mod-z":pe,"Mod-y":O,"Mod-Shift-z":O}),Ot(),N(Vt),Dt(t),Bt()]}),dispatchTransaction(r){const o=s.state.apply(r);s.updateState(o),r.docChanged&&t.dispatchEvent(new Event(Lt))},handlePaste(r,o){const i=o.clipboardData?.getData("text/plain");return i===void 0?!1:(o.defaultPrevented||Wt(r,i),!0)},clipboardTextSerializer(r){return Gt(r.content).content}});return n!=null&&s.state.doc.textContent.trim().length===0&&s.dispatch(s.state.tr.insertText(n)),s}const D=v.createContext(null),ln=({children:n,clientThreadId:e,ignoreParentComposerController:t=!1})=>{const a=v.useContext(D),s=U(),r=v.useMemo(()=>a&&!t?a:new Ft(on(e?lt(ct(e))?.content??null:null,s)),[a,e]);return g.jsx(D.Provider,{value:r,children:n})},Un=()=>it(v.useContext(D));function ue(){return{clientThreadId:"",isLoggedInUser:!1,focusedObject:null,currentModelId:"",isModelLoaded:!1,isEmbeddedInFocusedView:!1,isInstalledApp:!1,onNewThread:()=>{throw new Error("onNewThread not implemented")},onRequestCompletion:()=>{throw new Error("onRequestCompletion not implemented")},resetThread:()=>{throw new Error("resetThread not implemented")}}}const de=v.createContext(ue());function me(){try{return v.use(de)}catch{return ue()}}function Fn({children:n,clientThreadId:e,setClientThreadId:t,routeType:a,prefetchSearchPromises:s}){const{createNewThread:r,resetThread:o}=xe({clientThreadId:e,setClientThreadId:t}),{data:i}=pt(),l=Se(i),c=ut(e,b=>b?.modelId),m=ye(),p=l.id,u=c??p,d=Me(),f=be(),{isUnauthenticated:k}=dt(),h=!k,C=ie(e),x=v.useMemo(()=>({clientThreadId:e,currentModelId:u,isModelLoaded:!!c,isEmbeddedInFocusedView:m,isInstalledApp:d,isLoggedInUser:h,focusedObject:f,onNewThread:r,onRequestCompletion:C,resetThread:o,prefetchSearchPromises:s,routeType:a}),[e,u,c,m,d,h,f,r,C,o,s,a]);return g.jsx(de.Provider,{value:x,children:g.jsx(ln,{clientThreadId:e,children:n})})}function cn({closeModal:n,url:e,onAction:t,onActionAborted:a}){const s=v.useRef(!1),r=bt(),{clientThreadId:o}=me(),l={...F({clientThreadId:o}),url:e,link_type:"text",section:"safe-link-modal"};v.useEffect(()=>{_.logEventWithStatsig("Safe Link Warning Modal Shown","chatgpt_safe_link_warning_modal_shown")},[]);const c=async()=>{s.current=!0;try{await navigator.clipboard.writeText(e),_.logEventWithStatsig("Safe Link Warning Modal Copy Clicked","chatgpt_safe_link_warning_modal_copy_clicked"),_.logEventWithStatsig("link_action","link_action",{...l,action:"copy"})}catch(k){ht.addError(k)}t?.("copy"),n()},m=()=>{s.current=!0,_.logEventWithStatsig("Safe Link Warning Modal Open Clicked","chatgpt_safe_link_warning_modal_open_clicked"),_.logEventWithStatsig("link_action","link_action",{...l,action:"click"}),t?.("open"),n()},p=()=>{s.current||(_.logEventWithStatsig("Safe Link Warning Modal Canceled","chatgpt_safe_link_warning_modal_canceled"),a?.()),s.current=!1,n()};let u="",d=e,f="";try{d=new URL(e).hostname;const h=e.indexOf(d);h!==-1&&(u=e.substring(0,h),f=e.substring(h+d.length))}catch{}return g.jsxs(mt,{testId:"modal-safe-link-warning",isOpen:!0,hideSeparator:!0,onClose:p,showCloseButton:!0,type:"warning",title:g.jsx("div",{className:"flex items-center gap-2",children:r.formatMessage({id:"KXMlta",defaultMessage:"This link isn't verified"})}),primaryButton:g.jsx(gt,{as:"link",openNewTab:!0,rel:"noopener noreferer",color:"primary",onClick:m,to:e,children:r.formatMessage({id:"gMzmDW",defaultMessage:"Open link"})}),secondaryButton:g.jsx(ft.Button,{title:r.formatMessage({id:"YGLt71",defaultMessage:"Copy link"}),color:"secondary",onClick:c}),children:[g.jsxs("p",{className:"text-token-text-secondary -mt-4 mb-6 text-sm text-pretty sm:-mt-7",children:[g.jsx(G,{defaultMessage:"Make sure you trust this link before proceeding. If you don't recognize the URL, don't open the link to access the site.",id:"safe-link-warning-modal-description"}),g.jsx("a",{className:"can-hover:hover:text-token-link-hover ps-1 underline underline-offset-1",href:"https://help.openai.com/en/articles/10984597-chatgpt-generated-links",target:"_blank",rel:"noopener noreferrer",children:g.jsx(G,{id:"xNvPsR",defaultMessage:"Learn more"})})]}),g.jsxs("div",{className:"mb-2 text-sm break-all",children:[g.jsx("span",{className:"text-token-text-secondary",children:u}),g.jsx("span",{className:"text-token-text-primary font-medium",children:d}),g.jsx("span",{className:"text-token-text-secondary",children:f})]})]})}const X={},Y={},$={};function J(n,e){return`${n}::${e}`}function fe({node:n,onClick:e,children:t,clientThreadId:a,messageId:s,href:r,disableSafeURLs:o,...i}){let l=e;const c=n?.properties?.href,m=Ee(),p=v.useContext(Te),u=U(),d=vt(a),f=Le(d,r,p?.useSafeUrls&&!o),k=kt(u,"387775177"),h=!o&&f===void 0&&k.get("enable-copy-and-open",!1);return s!=null&&typeof c=="string"&&c.includes("/bing/redirect")&&(X[s]||(_.logEvent("Browsing Show Bing Link",{id:s,content:c}),X[s]=!0),l=C=>{Y[s]||(_.logEvent("Browsing Click Bing Link",{id:s,content:c}),Y[s]=!0),e?.(C)}),l=C=>{const x=""+c;if(s&&!$[J(s,x)]){const b=f||h?"URL Clicked Allowed":"URL Clicked Blocked";_.logEvent(b,{id:s,content:x}),$[J(s,x)]=!0}e?.(C),h&&r&&_t(u,cn,{url:r})},g.jsx(g.Fragment,{children:g.jsx("a",{onClick:l,...i,className:Ct(i.className,h&&"cursor-pointer"),href:f,rel:m?"noopener noreferrer":"noopener",children:t})})}function pn(){const{store:n}=Pe(),e=Z(),{clearSystemHintModeTrigger:t,getSystemHintModeTrigger:a}=Ie(),{value:s}=re("1988730211"),r=!Re.useDisabledGlobally(),{onRequestCompletion:o}=me();return v.useCallback((i,l,c,m)=>{const p=n.getSharedProps();if(!p)return;const{clientThreadId:u,onResetState:d,conversationMode:f}=p;Ne.hideThreadHeader();const k=e.has(L.Search),h=k?a(L.Search):void 0,C=wt(u),{systemHints:x,extraStreamParams:b}=Oe(l)?{systemHints:[l.categoryId],extraStreamParams:l.modelOverride?{model:l.modelOverride}:{}}:s?De(Array.from(e)):{systemHints:Array.from(e),extraStreamParams:{}};r&&(b.enableMessageFollowups=!0);const A=Ue(),K={is_starter_prompt:!0,suggestion_type:l.type,starter_prompt_id:"id"in l?l.id:void 0};A&&(K.__internal={search_settings:A});const ke=ae(Fe(l),K);o({promptMessage:ke,sourceEvent:i,extraStreamParams:b,completionMetadata:{suggestions:c,suggestion:l,suggestionIndex:m,conversationMode:f??C?.mode,systemHints:x,searchSource:h}});const Ce=xt.getCurrentNode(C).message.id;d(),je(l,m,u,Ce),He()||qe(),h&&k&&t(L.Search)},[n,e,a,s,r,o,t])}const jn="w";function un({messageId:n,clientThreadId:e,text:t,children:a,...s}){const o=`${window.location.origin}?q=${encodeURIComponent(t)}`,i=pn(),l=v.useCallback(async c=>{c.preventDefault(),j.count(H.DEFAULT,"instant_follow_up_anchor_clicked"),_.logEventWithStatsig("Instant Follow Up Anchor Clicked","chatgpt_instant_follow_up_anchor_clicked",{clientThreadId:e,messageId:n}),i(c,{text:t,type:ee.Reply},[],0)},[e,n,t,i]);return g.jsx(fe,{...s,href:o,disableSafeURLs:!0,clientThreadId:e,messageId:n,className:"cursor-pointer",onClick:l,children:a})}const dn=q.memo(un);function mn({messageId:n,clientThreadId:e,text:t,children:a,...s}){const{value:r}=re("374768818");return r?g.jsx(dn,{messageId:n,clientThreadId:e,text:t,children:a,...s}):g.jsx(fe,{messageId:n,clientThreadId:e,children:a,...s})}const Hn=q.memo(mn),fn={},gn=[];function ge(n){const e=n||fn;return function(t,a){Ae(t,"element",function(s,r){const o=Array.isArray(s.properties.className)?s.properties.className:gn,i=o.includes("language-math"),l=o.includes("math-display"),c=o.includes("math-inline");let m=l;if(!i&&!l&&!c)return;let p=r[r.length-1],u=s;if(s.tagName==="code"&&i&&p&&p.type==="element"&&p.tagName==="pre"&&(u=p,p=r[r.length-2],m=!0),!p)return;const d=Ke(u,{whitespace:"pre"});let f;try{f=B.renderToString(d,{...e,displayMode:m,throwOnError:!0})}catch(h){const C=h,x=C.name.toLowerCase();a.message("Could not render math with KaTeX",{ancestors:[...r,s],cause:C,place:s.position,ruleId:x,source:"rehype-katex"}),x==="parseerror"?f=B.renderToString(d,{...e,displayMode:m,strict:"ignore",throwOnError:!1}):f=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(e.errorColor||"#cc0000"),title:String(h)},children:[{type:"text",value:d}]}]}typeof f=="string"&&(f=Ge(f).children);const k=p.children.indexOf(u);return p.children.splice(k,1,...f),te})}}const qn="f",hn=(n,e)=>{const t=v.useRef(!1);v.useEffect(()=>{t.current||(t.current=!0,j.count(H.DEFAULT,"clickable_follow_up_text_shown"),_.logEventWithStatsig("Clickable Follow Up Text Shown","chatgpt_clickable_follow_up_text_shown",{...F({clientThreadId:n,messageId:e})}))},[n,e])},vn=({messageId:n,clientThreadId:e,text:t})=>{const a=ie(e),s=Z(),r=We(e);hn(e,n);const o=v.useCallback(i=>{i.preventDefault(),j.count(H.DEFAULT,"clickable_follow_up_text_clicked"),_.logEventWithStatsig("Clickable Follow Up Text Clicked","chatgpt_clickable_follow_up_text_clicked",F({clientThreadId:e,messageId:n})),a({sourceEvent:i,promptMessage:ae(t.toLowerCase(),{suggestion_type:ee.Reply}),completionMetadata:{systemHints:[...s],conversationMode:r??{kind:yt.PrimaryAssistant}}})},[e,r,n,s,a,t]);return g.jsx("span",{className:"decoration-token-text-secondary hover:text-token-text-secondary cursor-pointer underline decoration-dotted decoration-[12%] underline-offset-4 transition-colors duration-200 ease-in-out",onClick:o,children:t})},kn=({messageId:n,clientThreadId:e,text:t})=>{const a=U();return St(a,"2723331665")?g.jsx(vn,{messageId:n,clientThreadId:e,text:t}):g.jsx("span",{children:t})},An=q.memo(kn),Kn=n=>(n.startsWith(Ze),n);function Cn(){return n=>{E(n,"list",e=>{for(const t of e.children)t.spread=!0})}}function Gn(n){return e=>{E(e,t=>{Object.defineProperties(t,{markdownSource:{get(){return n.slice(this.position.start.offset,this.position.end.offset)}}})})}}const he=[ze,Xe,Cn,[Ye,{singleDollarTextMath:!1}],$e,Je,zt,Qe,_n,xn];function _n(){return n=>{E(n,"textDirective",e=>{e.name!==oe&&(e.type="text",e.value=`:${e.name}`)})}}const wn=/\u200b/g;function xn(){return n=>{E(n,"text",e=>{e.value=e.value.replace(wn,"")})}}function Sn(){return n=>{const e=n.position?.end.offset;E(n,"element",(t,a)=>{const{position:s}=t;if(!s)return;const{start:r,end:o}=s,i=r.offset,l=o.offset;t.properties??={},i!=null&&(t.properties["data-start"]=i),l!=null&&(t.properties["data-end"]=l,e===l&&(t.properties["data-is-last-node"]=""),a===n.children.length-1&&(t.properties["data-is-only-node"]=""))})}}const Wn=[ge,Sn,Be,[Ve,{target:"_new",rel:"noopener noreferrer"}],ne],yn=[[ge,{output:"mathml"}],ne];function Mn(n,e){const t=Mt(n,e);return ve(t,e)}function ve(n,e){const t=R().use(se).use(he).use([[Tn,e??[]]]).use(et,{rule:"-",tightDefinitions:!0,handlers:{break:()=>`
`,link:bn}}),a=R().use(tt).use(yn).use(nt),s=t.runSync(t.parse(n)),r=t.stringify(s),o=a.stringify(a.runSync(s));return{"text/plain":r,"text/html":o}}const bn=(n,e,t,a)=>{const s=t.createTracker(a),r=t.enter("link"),o=t.enter("label");let i=s.move("[");return i+=s.move(t.containerPhrasing(n,{before:i,after:"](",...s.current()})),i+=s.move("]("),o(),i+=s.move(n.url.replace(/[\x00-\x1F\x7F-\x9F()"]/g,En)),n.title&&(i+=s.move(" "+JSON.stringify(n.title))),i+=s.move(")"),r(),i};function En(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0")}function Tn(n){return e=>{const t={},a=(s,r)=>{switch(r.type){case"grouped_webpages":{const o=[];for(const i of r.items)if(i.url&&i.title){let l=t[i.url];l||(l=t[i.url]={type:"definition",identifier:String(Object.keys(t).length+1),url:i.url,title:i.title}),o.push({type:"linkReference",referenceType:"shortcut",identifier:l.identifier,children:[{type:"text",value:i.attribution??rt(i.url)}]})}return o.length===0?[]:[{type:"text",value:"("},...o.flatMap((i,l,c)=>l<c.length-1?[i,{type:"text",value:", "}]:[i]),{type:"text",value:")"}]}case"title_citation":case"location_search":case"time":case"image_v2":case"nav_list":case"file_navlist":case"file":case"grouped_webpages_model_predicted_fallback":case"tldr":case"navigation":case"stock":case"calculator":case"code_execution":case"forecast":case"businesses_map":case"video":case"sources_footnote":case"sports_standings":case"sports_schedule":case"attribution":case"webpage_extended":case"image_inline":case"product_entity":case"products":case"alt_text":case"product_reviews":case"product_rationale":if(r.alt){const o=R().use(se).use(he).parse(r.alt);if(s.type!=="textDirective")return o.children;const i=o.children[0];if(i.type==="paragraph")return i.children}return[];case"hidden":case"status":case"optimistic_image_citation":case"webpage":case"optimistic_image_inline":case"invalid":case"attribution_footer":case"sports":case"grouped_webpages_v2":return[]}};E(e,st,(s,r,o)=>{if(o==null||r==null)return;const i=Ln(s,n),l=i?a(s,i)??[s]:[];return o.children.splice(r,1,...l),[te,r+l.length]}),e.children.push(...Object.values(t))}}function Ln(n,e){if(n.name===oe){const t=n.attributes?.index;if(t)return e[parseInt(t,10)]}}const Bn=Object.freeze(Object.defineProperty({__proto__:null,markdownToClipboardContent:ve,messageTextToClipboardContent:Mn},Symbol.toStringTag,{value:"Module"}));export{ln as C,jn as I,fe as M,he as R,Hn as S,Fn as a,on as b,D as c,pn as d,me as e,Kn as f,Wn as g,ve as h,qn as i,An as j,Bn as k,Mn as m,Gn as r,Un as u};
//# sourceMappingURL=dnyjnsewv99rujtf.js.map
