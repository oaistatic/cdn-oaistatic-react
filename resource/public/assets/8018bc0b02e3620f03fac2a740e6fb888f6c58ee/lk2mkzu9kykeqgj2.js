import{eq as f,g as P,o as _,aj as T,cS as x,bD as y,aL as k}from"./nqrmgk5te3uzwsyz.js";import{r as c,j as i,C as w}from"./n3epq09dut36rmi2.js";import{m as u}from"./nc6572sivljsjb83.js";import{R as C}from"./732ktrbtyfqle46e.js";import{C as l}from"./koqafwtam8w6m5t5.js";import{P as W,a as b}from"./hi5bz78ars1jrvhf.js";import{u as S,W as v}from"./es8ut1140mmjn9bb.js";import{c as g}from"./azqvry2z7sssyjfm.js";import"./uox23aig6gp6se2y.js";import"./dnyjnsewv99rujtf.js";import"./e4sjbad9hyqt73xe.js";import"./dkr8jkx9n88ez7ho.js";import"./nnldvg4yjd3ynnqu.js";import"./loybro28dk8o1rh8.js";import"./mwmzy5d3s65b6nqi.js";import"./eirgecln9yzcy5p4.js";import"./izzltcwrbklvvt51.js";import"./oshe56yhea4czc03.js";import"./ipklaqcgu1ejshk6.js";import"./bns64zud9fwchaft.js";import"./lw3nae8q1eor1tu0.js";import"./kth8b95xbvmuu5bx.js";import"./iwi9e9tak1je4ys9.js";import"./xdtirbwvvk4sqc30.js";import"./iiunoc4k1n6g4a9l.js";import"./kvhuqs0v8em60vy1.js";import"./mmgogcu21wjwfuju.js";import"./oco3z5r1wfatkk2z.js";import"./i29w7batiy3i4iov.js";import"./he8nwqvd8i1qrsxh.js";import"./dga4w4fj85z63yhg.js";import"./jit20xrzecwhc2dk.js";import"./gfex7240qlmgxew5.js";import"./jsnptf63edu6k32a.js";import"./h446s733avqwi4v2.js";import"./hk3emygtpn0flzgl.js";import"./nm5ivxaismwgb6gf.js";import"./fqlc6cxqy4xl9ika.js";import"./hg9sd8r31mlqtsqh.js";import"./7h5hwpux622xuq2c.js";import"./mdvozkxry38nfk32.js";import"./izxna8u6mo9guqnq.js";import"./e3jbhlk6nvddhkdz.js";import"./ljuezj190v37napq.js";import"./jvs80tn6co0ttzp0.js";import"./ga29rzv9pwswyv07.js";import"./d588ndwa76k83w2v.js";import"./c1itczlqrzelhws9.js";import"./i1gy5x3o7l2ezmdz.js";import"./m142gq95svb5klgv.js";import"./nonl1vc40q9bndh8.js";import"./ex4mh6ngabphh37h.js";import"./gbfmb6n7vmtt0mld.js";import"./esr5i8s9ua5dxz6k.js";import"./esvlql2z91zwym50.js";import"./k9dqus9crie9cyow.js";import"./b99rlgw1hhu0zh6m.js";import"./mgq4dy5xj5doeoq7.js";import"./ms88w7omyr5fyl5m.js";import"./gt0o8gecgu18rlu9.js";import"./hywf39bgiuru57vx.js";import"./dplssc7283prca44.js";import"./h0v70jeb8vuswv8x.js";import"./bqizorod7tt9c8xq.js";import"./e3g5ffsb6g0bu7pn.js";import"./ge980eja361ie3ca.js";function I(e){if(e.post.attachments[0].kind!=="codex")return{task:void 0,turns:void 0};const r=e.post.attachments[0];return{task:r.task,fetchedTurns:r.turns,current_user_turn:r.current_user_turn,current_assistant_turn:r.current_assistant_turn,current_diff_task_turn:r.current_diff_task_turn}}function j({postWithProfile:e}){const r=g(m=>m.addTurnToTaskMap),{task:t,fetchedTurns:o,current_user_turn:n,current_assistant_turn:s,current_diff_task_turn:a}=I(e),{focusedAssistantTurn:d,setFocusedAssistantTurnId:h}=S({taskId:t?.id,task:t,currentDiffTaskTurn:a??null,currentUserTurn:n??null,currentAssistantTurn:s??null});c.useEffect(()=>{Object.values(o?.turn_mapping??{}).forEach(m=>{r(t?.id??"",m.turn)})},[o,r,t]);const p=g(({getTurnsForTask:m})=>t?m(t.id):[]);return!t||!p?null:i.jsx(v,{permissions:"read",taskId:t.id,turnId:s?.id??"",task:t,focusedAssistantTurn:d,pastTurns:p,setFocusedAssistantTurnId:h,canFollowUp:!1,lastTurnWithDiffId:a?.id??"",onEscape:()=>{}})}const Qt=f(function(){const r=w();return r.kind==="forbidden"?i.jsx(O,{chatPageProps:r.chatPageProps,reason:"workspace"}):i.jsx(E,{loaderData:r})});function E({loaderData:e}){c.useEffect(()=>{T.logEventWithStatsig("Share Post: Shared Post Page Viewed","chatgpt_share_post_page_viewed",{post_id:e.postWithProfile.post.id,primary_attachment_type:e.postWithProfile.post.attachments?.[0]?.kind,referrer:e.referrer})},[e]);const r=c.useMemo(()=>{const t=x();return y.initThread(t,{kind:k.PrimaryAssistant}),t},[]);return e.postWithProfile.post.attachments?.[0]?.kind==="deep_research"&&e.postWithProfile.post.attachments[0].tags?.includes("deep_research")?i.jsx(C,{postWithProfile:e.postWithProfile,threadId:r}):e.postWithProfile.post.attachments?.[0]?.kind==="codex"?i.jsx(j,{postWithProfile:e.postWithProfile}):i.jsx(z,{postWithProfile:e.postWithProfile,chatPageProps:e.chatPageProps})}function R(e){return{url:`https://ogimg.chatgpt.com/?postId=${e}`,size:[1200,630]}}function A(e,r){if(!e.attachments||e.attachments.length===0)return{url:u.src};const t=e.attachments[0];switch(t.kind){case"media_generation":{const o=t.encodings?.md?.path?{url:t.encodings.md.path,size:[t.width,t.height]}:void 0,n=t.encodings?.unfurl?.path?{url:t.encodings.unfurl.path,size:[1200,630]}:void 0,s=t.encodings?.thumbnail?.path?{url:t.encodings.thumbnail.path}:void 0,a={url:t.url,size:[t.width,t.height]};return r&&o!=null?o:n??s??a}default:return{url:u.src}}}function G(e){const r=e.text?.trim();if(r)return r;const t=e.attachments?.[0];return t?.kind==="media_generation"&&t.title?.trim()?t.title.trim():"Shared Content"}const Xt=({data:e})=>{const r=e,t={name:"robots",content:"noindex,nofollow"};if(!r||r.kind==="forbidden"){const p="Privately Shared Content";return[{title:`ChatGPT - ${p}`},t,{property:"og:site_name",content:"ChatGPT"},{property:"og:title",content:p},{property:"og:type",content:"website"},{property:"og:image",content:u.src},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:image",content:u.src},{name:"twitter:site",content:"@ChatGPTapp"},{name:"twitter:title",content:p}]}const{post:o}=r.postWithProfile,n=r.enforceRenderedOgImg?R(o.id):A(o,r.preferIntrinsicAspectRatioForOgImage),s=G(o),a=o.permalink,d=new Date(o.posted_at*1e3).toISOString();return[{title:`ChatGPT - ${s}`},t,{property:"og:site_name",content:"ChatGPT"},{property:"og:type",content:"article"},{property:"og:url",content:a},{property:"og:title",content:s},{property:"og:locale",content:"en_US"},{property:"og:image",content:n.url},{property:"og:image:secure_url",content:n.url},...n.size?[{property:"og:image:width",content:n.size[0]},{property:"og:image:height",content:n.size[1]}]:[],{property:"og:image:alt",content:"Preview of shared ChatGPT content"},{property:"article:published_time",content:d},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"@ChatGPTapp"},{name:"twitter:title",content:s},{name:"twitter:image",content:n.url},{name:"twitter:image:alt",content:"Preview of shared ChatGPT content"}]};function O({chatPageProps:e,reason:r}){const t=P();return c.useEffect(()=>{_(t,W,{reason:r})},[]),i.jsx(l,{...e})}function z({postWithProfile:e,chatPageProps:r}){return i.jsx(b.Provider,{value:{postWithProfile:e},children:i.jsx(l,{...r})})}export{Qt as default,Xt as meta};
//# sourceMappingURL=lk2mkzu9kykeqgj2.js.map
