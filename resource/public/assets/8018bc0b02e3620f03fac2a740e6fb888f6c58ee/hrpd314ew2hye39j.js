import{r as d,j as e,a6 as B,M as y,g as ie,u as re,f as k,a5 as S}from"./n3epq09dut36rmi2.js";import{af as le,aI as G,aO as _,aj as w,c_ as ce,dR as de,k as ue,m as pe,ga as $,B as j,p as me,b as ge,d as fe,ag as xe}from"./nqrmgk5te3uzwsyz.js";import{a as he,C as ye}from"./dnyjnsewv99rujtf.js";import{e as K,db as be,dc as P,U as Q,dd as V,de as _e,df as we,dg as je,dh as ke,di as J,dj as ve,dk as Se,dl as Me,h as Ne,dm as Ce,dn as Ee,dp as Te}from"./uox23aig6gp6se2y.js";import{b as Pe,a as Oe,m as De}from"./he8nwqvd8i1qrsxh.js";import{M as Ue}from"./ljuezj190v37napq.js";import{H as Fe}from"./g4tl5lt9yqf20m4s.js";import"./e4sjbad9hyqt73xe.js";import"./dkr8jkx9n88ez7ho.js";import"./nnldvg4yjd3ynnqu.js";import"./gfex7240qlmgxew5.js";import"./jsnptf63edu6k32a.js";import"./h446s733avqwi4v2.js";import"./hk3emygtpn0flzgl.js";import"./nm5ivxaismwgb6gf.js";import"./jit20xrzecwhc2dk.js";import"./hi5bz78ars1jrvhf.js";import"./jvs80tn6co0ttzp0.js";import"./ga29rzv9pwswyv07.js";import"./d588ndwa76k83w2v.js";import"./c1itczlqrzelhws9.js";import"./eirgecln9yzcy5p4.js";import"./izzltcwrbklvvt51.js";import"./i1gy5x3o7l2ezmdz.js";import"./m142gq95svb5klgv.js";import"./nonl1vc40q9bndh8.js";import"./oshe56yhea4czc03.js";import"./ex4mh6ngabphh37h.js";import"./gbfmb6n7vmtt0mld.js";import"./iwi9e9tak1je4ys9.js";function qe(t,s,n){const{data:i,isLoading:r,isSuccess:c,isError:p}=re({queryKey:["onboardingSteps",s,n,t],queryFn:()=>ge.safePost("/onboarding/steps",{requestBody:{main_usage:void 0,main_usages:s,user_description:n,exclude_feature_steps:t},authOption:fe.SendIfAvailable})});return{steps:i?.steps??[],isLoading:r,isSuccess:c,isError:p}}function v({children:t,className:s}){return e.jsx(S.div,{className:s,initial:{opacity:0,y:7},animate:{opacity:1,y:0},transition:{duration:.2},exit:{opacity:0,y:-7},children:t})}function Ie({isFirstStep:t,userName:s}){return e.jsx(v,{className:"max-sm:px-5 max-sm:py-4",children:!t&&e.jsx("h1",{className:"text-token-text-primary mb-2 text-center text-3xl leading-9 font-medium",children:e.jsx(y,{...s?l.niceToMeetYouQuickTourWithName:l.niceToMeetYouQuickTour,values:{name:s,nextLine:n=>e.jsx("span",{className:"block",children:n})}})})})}function Le({clientThreadId:t,createNewThread:s,endOnboarding:n}){return d.useEffect(()=>{s()},[s]),e.jsxs(v,{className:"flex flex-col items-center justify-between max-sm:h-full max-sm:w-full max-sm:py-4 sm:justify-center sm:gap-y-12",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-y-4 text-center max-sm:flex-1",children:[e.jsx(Ne,{className:"text-token-text-primary text-4xl"}),e.jsx("p",{className:"text-token-text-primary text-center text-3xl",children:e.jsx(y,{...l.allDone})})]}),e.jsxs("div",{className:"mt-12 flex flex-col gap-y-4 px-6 max-sm:w-full",children:[e.jsx(j,{size:"giant",color:"primary",onClick:()=>{n(!0)},fullWidth:!0,children:e.jsx(y,{...l.gotIt})}),e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex w-full items-center justify-center p-2 text-center text-xs",children:e.jsx(Ce,{clientThreadId:t})})]})]})}function Ae({setIsInWelcomePage:t}){const s=K();return d.useEffect(()=>{s&&setTimeout(()=>{t(!1)},2500)},[s,t]),s?e.jsx(v,{className:"max-sm:px-5 max-sm:py-4",children:e.jsx("h1",{className:"text-token-text-primary mb-2 text-3xl leading-9 font-medium max-sm:text-center",children:e.jsx(y,{...l.imChaggptNiceToMeetYou})})}):null}function We(t){const s=V(),n=k(),i=pe(),r=_e(t),c=we(t),p=je(r,c),o=ke(r,c);return d.useCallback(async a=>{const f="text/plain",g=new Blob([a],{type:f}),x=new File([g],"My_File.txt",{type:f});return J.uploadFile(s,ve(x),x,Se.Retrieval,o,n,i,void 0,p?.attachments)},[s,n,i,o,p?.attachments])}function He({step:t,steps:s,stepIndex:n,handleGoBack:i,wrapUp:r}){const c=k();return e.jsxs("div",{className:"absolute start-0 top-0 z-10 flex w-full items-center justify-between bg-none px-4",style:{minHeight:"var(--screen-thread-header-min-height,60px)"},children:[s&&s.length>0&&e.jsx("div",{className:"absolute start-0 top-0 h-2 w-full",children:e.jsx(S.div,{className:"bg-token-main-surface-primary-inverse h-1.5",initial:{width:"0%",opacity:0},animate:{width:`${(n+1)/s.length*100}%`,opacity:1},transition:{duration:.3}})}),n>0?e.jsx(j,{onClick:i,color:"ghost",className:"border-none",icon:Me}):e.jsx("div",{}),t?.step_type!=="usage_question"&&t?.step_type!=="self_description"&&e.jsx(j,{onClick:()=>r(),color:"ghost",size:"large",children:c.formatMessage(l.skipTour)})]})}function Re({step:t,steps:s,stepIndex:n,wrapUp:i,gotoStep:r,isInWelcomePage:c,isLoading:p,clientThreadId:o}){const a=k(),f=$({clientThreadId:o}),g=X(t,n,s.length,i,r);return c||p||t?.step_type==="usage_question"||t?.step_type==="self_description"?null:e.jsx("div",{className:"absolute start-0 bottom-0 z-30 w-full px-4 pb-8",children:e.jsxs("div",{className:"bg-token-main-surface-primary shadow-token-border-default flex w-full flex-col gap-y-2 rounded-3xl px-6 py-5 text-center shadow-[0px_10px_30px_0px]",children:[t&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-3xl leading-9 font-bold",children:t.title?t.title:E[t.step_type]?a.formatMessage(E[t.step_type]):null}),e.jsx("p",{className:"text-token-text-secondary text-base leading-normal font-normal",children:t.subtitle?t.subtitle:T[t.step_type]?a.formatMessage(T[t.step_type]):null})]}),e.jsx(j,{onClick:g,color:"primary",size:"giant",className:"mt-4",disabled:n!==s.length-1&&f,children:n===s.length-1?a.formatMessage(l.done):a.formatMessage(l.next)}),n!==s.length-1&&e.jsx(j,{onClick:()=>i(),color:"ghost",children:a.formatMessage(l.skipTour)})]})})}function jt({clientThreadId:t,setClientThreadId:s}){const[n,i]=d.useState(!1),{isOpen:r,setIsOpen:c,markAsViewed:p}=Pe(),[o,a]=d.useState(0),[f,g]=d.useState(new Set(["usage_question"])),[x,Z]=d.useState([]),[q,ee]=d.useState(),[O,I]=d.useState(!1),[L,A]=d.useState(!1),{steps:h,isLoading:M,isError:D}=qe(!O,O?x:[],O?q:void 0),W=K(),H=Oe({clientThreadId:t}),R=We(t),{createNewThread:N}=be({clientThreadId:t,setClientThreadId:s}),Y=le(t,xe.hasUserMessage),{layer:z}=G("109457",{shouldLogExposure:!1}),te=z.get("keep_onboarding_after_dismiss",!1),se=P();d.useEffect(()=>{r?(_.logEvent("chatgpt_onboarding_flow_shown"),w.logEvent("Onboarding Shown")):Q.setOnboardingConvoState(null)},[r]),d.useEffect(()=>{D&&(p(),_.logEvent("chatgpt_onboarding_flow_error"),w.logEvent("Onboarding Error"))},[D,p]),d.useEffect(()=>{const u=h[o];if(!(M||!u)&&!f.has(u.step_type)){g(C=>new Set([...C,u.step_type]));const b=u.step_prompt;b&&(Q.setOnboardingConvoState({onboardingConvoClientThreadId:t}),H({eventSource:"url",stepPrompt:b,messageMetadata:u.step_metadata,authorMetadata:{real_author:ce.Onboarding}}),h[o].step_type==="file_upload"&&h[o].additional_info&&R(h[o].additional_info))}},[o,M,f,H,h,R,t]);const m=h[o];if(d.useEffect(()=>{const u=m?.step_type;(u==="usage_question"||u==="self_description")&&Y&&r&&(N(),g(b=>new Set(Array.from(b).filter(C=>C==="usage_question"||C==="self_description"))))},[m?.step_type,N,Y,r]),d.useEffect(()=>{m?.step_type&&(_.logEvent("chatgpt_onboarding_step_shown",null,{step_type:m?.step_type,step_index:o.toString()}),w.logEvent("Onboarding Step Shown",{step_type:m?.step_type,step_index:o.toString()}))},[o,m?.step_type]),D)return null;const U=()=>{A(!0)},F=u=>{z.get("new_thread_after_onboarding",!1)&&N(),A(!1),o===h.length-1?(_.logEvent("chatgpt_onboarding_flow_finished"),w.logEvent("Onboarding Finished")):(_.logEvent("chatgpt_onboarding_flow_dismissed",null,{step_type:m?.step_type,step_index:o.toString()}),w.logEvent("Onboarding Dismissed",{step_type:m?.step_type,step_index:o.toString()})),u&&!te&&p(),c(!1)},ne=u=>{Z(u),h.find(b=>b.step_type==="self_description")||I(!0),a(b=>b+1),_.logEvent("chatgpt_onboarding_usage_question_selected",null,{main_usages:u.join(", ")}),w.logEvent("Onboarding Usage Question Selected",{main_usages:u.join(", ")})},oe=u=>{ee(u),I(!0),a(b=>b+1),_.logEvent("chatgpt_onboarding_self_description_entered",null,{main_usages:x.join(", ")}),w.logEvent("Onboarding Self Description Entered",{main_usages:x.join(", ")})},ae=()=>{_.logEvent("chatgpt_onboarding_go_back",null,{step_type:m?.step_type,step_index:o.toString()}),w.logEvent("Onboarding Go Back",{step_type:m?.step_type,step_index:o.toString()}),a(u=>u-1)};return e.jsx(de,{fallback:()=>(F(!0),e.jsx(e.Fragment,{})),name:"NewUserOnboardingFlowModal",children:e.jsx(ue,{testId:"modal-new-user-onboarding-flow",isOpen:r,onClose:()=>F(!1),type:"success",size:"fullscreen",noPadding:!0,className:"w-full",children:e.jsx(he,{clientThreadId:t,children:e.jsxs("div",{className:"bg-token-main-surface-primary flex h-full max-h-full flex-col",children:[!L&&(se?e.jsx(Re,{step:m,steps:h,stepIndex:o,wrapUp:U,gotoStep:a,isInWelcomePage:n,isLoading:M,clientThreadId:t}):e.jsx(He,{step:m,steps:h,stepIndex:o,handleGoBack:ae,wrapUp:U})),e.jsx("div",{className:"flex min-h-0 flex-1 flex-col items-center justify-center overflow-hidden",children:e.jsx(B,{mode:"wait",children:n?e.jsx(Ae,{setIsInWelcomePage:i},"welcome"):M?e.jsx(Ie,{isFirstStep:o<1,userName:W?.first_name??W?.name??void 0},"loading"):L?e.jsx(Le,{clientThreadId:t,createNewThread:N,endOnboarding:F},"wrapping-up"):m?.step_type==="usage_question"?e.jsx(Ye,{mainUsagesProp:x,onSelectMainUsages:ne},"usage-question"):m?.step_type==="self_description"?e.jsx(ze,{mainUsages:x,selfDescriptionProp:q,onEnterSelfDescription:oe},"self-description"):["dalle","file_upload","canvas","voice","ask_any_question"].includes(m?.step_type)?e.jsx(Qe,{step:m,gotoStep:a,stepIndex:o,totalSteps:h.length,wrapUp:U,clientThreadId:t},"tools-onboarding"):null})})]})})})})}function Ye({mainUsagesProp:t,onSelectMainUsages:s}){const[n,i]=d.useState(new Set(t)),r=k(),c=P(),p=()=>{s(Array.from(n))},o=["school","work","personalTasks","funAndEntertainment","other"];return e.jsxs(v,{className:"flex flex-col justify-between max-sm:h-full max-sm:overflow-y-auto max-sm:px-6 max-sm:pt-10 max-sm:pb-5 sm:w-[320px]",children:[e.jsxs("div",{className:"min-h-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-token-text-primary mb-4 text-center text-3xl leading-9 font-medium",children:e.jsx(y,{...l.whatDoYouUseChatGPTFor})}),e.jsx("p",{className:"text-token-text-secondary mb-7 text-center text-base",children:e.jsx(y,{...l.suggestUsefulIdeas})})]}),e.jsx("div",{className:"flex flex-col items-start justify-start ps-2.5",children:o.map(a=>e.jsx("div",{onClick:()=>{i(f=>{const g=new Set(f);return g.has(a)?g.delete(a):g.add(a),g})},className:"hover:bg-token-bg-elevated-secondary w-full cursor-pointer rounded-lg p-3.5",children:e.jsx(Ee,{id:`main-usage-${a}`,checked:n.has(a),label:e.jsx("span",{className:"cursor-pointer",children:r.formatMessage(De[a])}),className:"rounded-full!",containerClassName:"pointer-events-none"})},a))})]}),e.jsx(j,{size:c?"large":"giant",color:"primary",onClick:p,className:"mt-10",fullWidth:!0,children:e.jsx(y,{...l.next})})]})}function ze({mainUsages:t,selfDescriptionProp:s,onEnterSelfDescription:n}){const[i,r]=d.useState(s),c=k(),p=P(),o=d.useMemo(()=>t.includes("school")?l.exampleSchoolSelfDescription:t.includes("work")?l.exampleWorkSelfDescription:t.includes("funAndEntertainment")?l.exampleFunAndEntertainmentSelfDescription:l.examplePersonalTasksSelfDescription,[t]),{layer:a}=G("109457",{shouldLogExposure:!1}),f=a.get("write_custom_instructions_in_onboarding",!1),g=async()=>{n(i),f&&i&&me.createOrUpdateUserSystemMessage({aboutUserMessage:i,aboutModelMessage:"",disabledTools:[],enabled:!0}).catch(()=>{})};return e.jsxs(v,{className:"flex w-[640px] flex-col items-start max-sm:w-full max-sm:overflow-y-auto max-sm:px-5 max-sm:py-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-token-text-primary mb-4 text-3xl leading-9 font-medium",children:e.jsx(y,{...l.anythingElseYouWantMeToKnow})}),e.jsx("p",{className:"text-token-text-secondary text-base",children:e.jsx(y,{...f?l.selfDescriptionReasonSaveToCustomInstructions:l.selfDescriptionReason,values:{customInstructions:x=>e.jsx("a",{href:Fe,className:"underline",target:"_blank",rel:"noreferrer",children:x})}})})]}),e.jsx(Te,{className:"!dark:bg-white/5 border-token-border-default placeholder-token-text-tertiary mt-10 rounded-sm border bg-black/5! p-5 text-base!",placeholder:c.formatMessage(o),rows:4,value:i,onChange:x=>r(x.target.value),autoFocus:!0}),e.jsx(j,{size:p?"large":"medium",color:"primary",onClick:g,className:"mt-10",fullWidth:p,children:e.jsx(y,{...l.next})})]})}function X(t,s,n,i,r){const c=V();return d.useCallback(()=>{s<n-1?(_.logEvent("chatgpt_onboarding_flow_next_clicked",null,{source_step_type:t?.step_type,source_step_index:s.toString()}),w.logEvent("Onboarding Next",{source_step_type:t?.step_type,source_step_index:s.toString()}),t?.step_type==="file_upload"&&J.reset(c),r(s+1)):i(),document.body.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},[t,s,n,c,i,r])}function Qe({step:t,gotoStep:s,stepIndex:n,totalSteps:i,wrapUp:r,clientThreadId:c}){const p=$({clientThreadId:c}),o=k(),a=n===i-1,f=P(),g=X(t,n,i,r,s);return e.jsxs(v,{className:"flex h-full w-full flex-row sm:px-8 md:px-12 lg:px-16 xl:px-24",children:[!f&&e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center",children:e.jsxs(S.div,{className:"flex w-[90%] flex-1 flex-col items-center justify-center gap-2 text-center sm:w-[320px]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs(B,{mode:"wait",children:[e.jsx(S.h1,{className:"text-token-text-primary mb-2 text-3xl font-medium",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.title?t.title:E[t.step_type]?o.formatMessage(E[t.step_type]):null},`title-${n}`),e.jsx(S.p,{className:"text-token-text-secondary mb-6 text-base",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.subtitle?t.subtitle:T[t.step_type]?o.formatMessage(T[t.step_type]):null},`subtitle-${n}`)]}),e.jsx(j,{size:"giant",color:"primary",onClick:g,fullWidth:!0,disabled:p&&!a,children:e.jsx(y,{...l.next})})]})}),e.jsx("div",{className:"relative flex h-full flex-1 flex-col sm:min-w-[360px] sm:pt-20 sm:pb-20",children:e.jsx("div",{className:"bg-token-main-surface-primary shadow-token-border-default h-full w-full overflow-auto shadow-[0_0_50px] max-sm:pb-[280px] sm:rounded-[30px]",children:e.jsx(ye,{clientThreadId:c,ignoreParentComposerController:!0,children:e.jsx("div",{className:"pointer-events-none min-h-full w-full",children:e.jsx(Ue,{hideHeader:!0,hideDisclaimer:!0,clientThreadId:c})})})})})]})}const l=ie({skip:{defaultMessage:"Skip",id:"chatgpt.new-onboarding.skip"},close:{defaultMessage:"Close",id:"chatgpt.new-onboarding.close"},done:{defaultMessage:"Done",id:"chatgpt.new-onboarding.done"},submit:{defaultMessage:"Submit",id:"chatgpt.new-onboarding.submit"},next:{defaultMessage:"Next",id:"chatgpt.new-onboarding.next"},finish:{defaultMessage:"Finish",id:"chatgpt.new-onboarding.finish"},tellMeWhyHere:{defaultMessage:"Tell me about why youâ€™re here.",id:"chatgpt.new-onboarding.tell-me-why-here"},whatDoYouUseChatGPTFor:{defaultMessage:"What do you want to use ChatGPT for?",id:"chatgpt.new-onboarding.what-do-you-use-chatgpt-for"},suggestUsefulIdeas:{defaultMessage:"Weâ€™ll use this information to suggest ideas you might find useful.",id:"chatgpt.new-onboarding.suggest-useful-ideas-2"},imChaggptNiceToMeetYou:{defaultMessage:"ðŸ‘‹ Hi, Iâ€™m ChatGPT. Itâ€™s nice to meet you!",id:"chatgpt.new-onboarding.im-chatgpt-nice-to-meet-you"},preparingOnboardingExperience:{defaultMessage:"Preparing your onboarding experience...",id:"chatgpt.new-onboarding.preparing-onboarding-experience"},niceToMeetYouQuickTourWithName:{defaultMessage:"Nice to meet you, {name}.<nextLine></nextLine>Hereâ€™s a quick tour...",id:"chatgpt.new-onboarding.nice-to-meet-you-quick-tour-with-name"},niceToMeetYouQuickTour:{defaultMessage:"Nice to meet you.<nextLine></nextLine>Hereâ€™s a quick tour...",id:"chatgpt.new-onboarding.nice-to-meet-you-quick-tour"},allDone:{defaultMessage:"You're all set",id:"chatgpt.new-onboarding.all-done-2"},oneLastQuestion:{defaultMessage:"One last question:",id:"chatgpt.new-onboarding.one-last-question-2"},anythingElseYouWantMeToKnow:{defaultMessage:"Is there anything else youâ€™d like me to know?",id:"chatgpt.new-onboarding.anything-else-you-want-me-to-know-2"},oneQuestionAnythingElse:{defaultMessage:"One last question: Is there anything else youâ€™d like me to know?",id:"chatgpt.new-onboarding.one-more-question"},selfDescriptionReason:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant.",id:"chatgpt.new-onboarding.self-description-reason"},allSetLetMeShowYouAroundWithoutName:{defaultMessage:"All set!<nextLine></nextLine>Now, let me show you around...",id:"chatgpt.new-onboarding.all-set-let-me-show-you-around-without-name"},selfDescriptionReasonSaveToCustomInstructions:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant. Iâ€™ll save this information as <customInstructions>Custom Instructions</customInstructions>, which you can update any time.",id:"chatgpt.new-onboarding.self-description-reason-save-to-custom-instructions"},exampleSchoolSelfDescription:{defaultMessage:"I'm a college student studying computer science, and I love to play the guitar.",id:"chatgpt.new-onboarding.example-school-self-description"},exampleWorkSelfDescription:{defaultMessage:"I'm a graphic designer based in Berlin, and I enjoy painting and attending art exhibitions.",id:"chatgpt.new-onboarding.example-work-self-description"},examplePersonalTasksSelfDescription:{defaultMessage:"I live in Sydney and love cooking new recipes and planning travel itineraries.",id:"chatgpt.new-onboarding.example-personal-tasks-self-description"},exampleFunAndEntertainmentSelfDescription:{defaultMessage:"I'm a music enthusiast based in Nashville, and I can talk for hours about guitar techniques and songwriting.",id:"chatgpt.new-onboarding.example-fun-and-entertainment-self-description"},tryChatGPT:{defaultMessage:"Try ChatGPT",id:"chatgpt.new-onboarding.try-chatgpt"},skipTour:{defaultMessage:"Skip Tour",id:"chatgpt.new-onboarding.skip-tour"},gotIt:{defaultMessage:"Got it",id:"chatgpt.new-onboarding.got-it"}}),E={usage_question:l.tellMeWhyHere},T={usage_question:l.suggestUsefulIdeas};export{Ie as LoadingState,jt as default};
//# sourceMappingURL=hrpd314ew2hye39j.js.map
