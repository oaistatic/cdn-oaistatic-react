import{r as g,j as s,L as De,c as Y,f as Z,d as ne,g as ve,M as z,v as me,ac as Ie}from"./n3epq09dut36rmi2.js";import{g as be,s as Se,c as U,ao as je,ae as Ue,W as ke,aj as B,dl as $,B as q,F as Be,aH as ue,aE as fe,b3 as we,ap as Fe,ar as He,gb as Ve,gB as Qe}from"./nqrmgk5te3uzwsyz.js";import{b_ as ie,f as $e,hr as Re,hs as Ke,ht as qe,hu as ze,hv as Ye,hw as Je,R as J,eE as Ne,e_ as Ge,hx as Xe,dB as Ze,ee as ae,hy as ge,aH as es,aI as ss,hz as ts,aG as Ce,fN as rs,hA as X,eY as os,hB as as,aq as K,hC as is,eT as ls,c0 as cs}from"./uox23aig6gp6se2y.js";import{S as Me}from"./lth5uuz88qwgi4it.js";import{A as he}from"./ofg6pv1c2un8jq6p.js";import{G as Pe}from"./jsnptf63edu6k32a.js";import{G as Le,a as Ee,c as ns,E as ds}from"./gfex7240qlmgxew5.js";import{G as de}from"./c28qyodqgdwibcia.js";import{C as ms}from"./b2dwdp2zgpewduyl.js";function Te({gizmo:t,children:e,onClick:r,onModalOpen:o,onModalClose:a,selectOnly:l,className:d}){const f=be(),h=Se(f,"1825130190"),[n,p]=g.useState(!1);return l?s.jsx("a",{className:U("gizmo-link cursor-pointer",d),href:"#",onClick:y=>{y.preventDefault(),r?.(y)},children:e}):h?s.jsxs(s.Fragment,{children:[n&&s.jsx(Le,{gizmoId:t.gizmo.id,creatorId:t.gizmo.author.user_id,onClose:()=>{p(!1),a?.()},children:s.jsx(Ee,{as:"link",to:ie(f,t)})}),s.jsx("a",{className:U("gizmo-link cursor-pointer",d),href:"#",onClick:y=>{y.preventDefault(),r?.(y),p(!0),o?.()},children:e})]}):s.jsx(De,{to:ie(f,t),className:U("gizmo-link",d),target:"_blank",onClick:r,children:e})}function us(t){"use forget";const e=Y.c(27),{placeholder:r,effectiveRole:o,onSelect:a,popoverClassName:l}=t,d=Z(),[f,h]=g.useState("ALL"),[n,p]=g.useState(""),[y,v]=g.useState(""),[i,m]=g.useState(null),x=je()?.isWorkspaceAccount();let j;e[0]===Symbol.for("react.memo_cache_sentinel")?(j="3054422710",e[0]=j):j=e[0];const u=Ue(j).value,P=x!==void 0&&x&&u;let k,R;e[1]!==n?(k=()=>{const E=setTimeout(()=>{v(n)},250);return()=>{clearTimeout(E)}},R=[n],e[1]=n,e[2]=k,e[3]=R):(k=e[2],R=e[3]),g.useEffect(k,R);const w=be(),C=ne();let T;e[4]!==a||e[5]!==C||e[6]!==w?(T=E=>{if(a){a(E);return}if(!Se(w,"1825130190")){const _=ie(w,E);C(_);return}m(E)},e[4]=a,e[5]=C,e[6]=w,e[7]=T):T=e[7];const S=T;let G;e[8]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx($e,{className:"text-token-text-tertiary icon-md absolute start-5 top-1/2 z-30 -translate-y-1/2"}),e[8]=G):G=e[8];let M;e[9]!==d||e[10]!==r||e[11]!==l||e[12]!==n?(M=(E,W)=>s.jsxs(ms,{label:r??d.formatMessage(I.discoverySearch),inputClassName:"bg-token-main-surface-primary! py-4 px-3 rounded-xl font-normal text-base! ps-12",popoverClassName:U("-top-3! border-token-border-default! rounded-xl",l??"bg-token-main-surface-primary!"),className:"border-token-border-default! rounded-xl! p-0! ring-0!",name:"search",inputValue:n,onInputChange:p,onTabChange:_=>h(_==="WORKSPACE"?"WORKSPACE":"ALL"),suggestions:E,RenderTab:gs,children:[W,W==null&&s.jsx("div",{className:"w-full py-4",children:s.jsx(hs,{})})]}),e[9]=d,e[10]=r,e[11]=l,e[12]=n,e[13]=M):M=e[13];let O;e[14]!==f||e[15]!==y||e[16]!==o||e[17]!==S||e[18]!==P||e[19]!==M?(O=s.jsx(ps,{activeTab:f,query:y,effectiveRole:o,setPopoverForceOpen:fs,onSelect:S,showWorkspaceResults:P,renderCombobox:M}),e[14]=f,e[15]=y,e[16]=o,e[17]=S,e[18]=P,e[19]=M,e[20]=O):O=e[20];let N;e[21]!==i||e[22]!==w?(N=i&&s.jsx(Le,{gizmoId:i.gizmo.id,creatorId:i.gizmo.author.user_id,onClose:()=>{m(null)},children:s.jsx(Ee,{as:"link",to:ie(w,i)})}),e[21]=i,e[22]=w,e[23]=N):N=e[23];let F;return e[24]!==O||e[25]!==N?(F=s.jsxs("div",{className:"relative z-0",children:[G,O,N]}),e[24]=O,e[25]=N,e[26]=F):F=e[26],F}function fs(){}function gs(t){"use forget";const e=Y.c(4),{tab:r}=t,o=Re();if(r==="ALL"){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(z,{...I.discoveryAllResultsHeader}),e[0]=a):a=e[0],a}if(r==="WORKSPACE"){let a;return e[1]!==o?(a=s.jsx(z,{...I.discoveryWorkspaceResultsHeader,values:{workspaceName:o}}),e[1]=o,e[2]=a):a=e[2],a}if(r==="discoverySearchRecentlyUsed"){let a;return e[3]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(z,{...I.discoverySearchRecentlyUsed}),e[3]=a):a=e[3],a}return r}function hs(){return s.jsx("div",{className:"flex items-center justify-center py-1",children:s.jsx(ke,{})})}function ps(t){"use forget";const e=Y.c(20),{activeTab:r,query:o,effectiveRole:a,setPopoverForceOpen:l,showWorkspaceResults:d,onSelect:f,renderCombobox:h}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],e[0]=n):n=e[0],g.useEffect(vs,n);const{data:p,isLoading:y}=Ke(o),{data:v,isLoading:i}=qe(o,d);let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m={cutId:"recent",limit:3},e[1]=m):m=e[1];const{data:x,isLoading:j}=ze(m),u=p?.items,P=p?.cursor,k=v?.items,R=v?.cursor;let w;e[2]!==x?.pages?(w=x?.pages.flatMap(ys)??[],e[2]=x?.pages,e[3]=w):w=e[3];let C;return e[4]!==r||e[5]!==a||e[6]!==j||e[7]!==y||e[8]!==i||e[9]!==f||e[10]!==o||e[11]!==h||e[12]!==l||e[13]!==d||e[14]!==u||e[15]!==P||e[16]!==k||e[17]!==R||e[18]!==w?(C=s.jsx(bs,{debouncedQuery:o,searchResults:u,isLoadingSearch:y,searchResultsCursor:P,showWorkspaceResults:d,workspaceSearchResults:k,workspaceSearchResultsCursor:R,isLoadingWorkspaceSearch:i,isLoadingRecent:j,recent:w,effectiveRole:a,setPopoverForceOpen:l,onSelect:f,activeTab:r,renderCombobox:h}),e[4]=r,e[5]=a,e[6]=j,e[7]=y,e[8]=i,e[9]=f,e[10]=o,e[11]=h,e[12]=l,e[13]=d,e[14]=u,e[15]=P,e[16]=k,e[17]=R,e[18]=w,e[19]=C):C=e[19],C}function ys(t){return t.list.items.map(xs)}function xs(t){return t.resource}function vs(){B.logEvent("Search Start")}function bs(t){"use forget";const e=Y.c(25),{activeTab:r,debouncedQuery:o,searchResults:a,isLoadingSearch:l,searchResultsCursor:d,showWorkspaceResults:f,workspaceSearchResults:h,workspaceSearchResultsCursor:n,isLoadingWorkspaceSearch:p,recent:y,isLoadingRecent:v,effectiveRole:i,setPopoverForceOpen:m,onSelect:x,renderCombobox:j}=t;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=me(),e[0]=u):u=e[0];const P=g.useRef(u);let k;e[1]===Symbol.for("react.memo_cache_sentinel")?(k=[],e[1]=k):k=e[1],g.useEffect(Ss,k);let R,w;e[2]!==o||e[3]!==l||e[4]!==a?(R=()=>{!l&&a&&(P.current=me(),a.length>0?Promise.all(a.map((S,G)=>{B.logEvent("Search Display Result",{search_id:P.current,gizmo_id:S.gizmo.id,position:G,query:o})})):B.logEvent("Search No Results",{query:o}))},w=[a,l,o],e[2]=o,e[3]=l,e[4]=a,e[5]=R,e[6]=w):(R=e[5],w=e[6]),g.useEffect(R,w);let C;e[7]!==y?(C=y??[],e[7]=y,e[8]=C):C=e[8];let T;return e[9]!==r||e[10]!==o||e[11]!==i||e[12]!==v||e[13]!==l||e[14]!==p||e[15]!==x||e[16]!==j||e[17]!==a||e[18]!==d||e[19]!==m||e[20]!==f||e[21]!==C||e[22]!==h||e[23]!==n?(T=s.jsx(js,{query:o,activeTab:r,searchIdRef:P,searchResults:a,searchResultsCursor:d,isLoadingSearch:l,showWorkspaceResults:f,workspaceSearchResults:h,workspaceSearchResultsCursor:n,isLoadingWorkspaceSearch:p,isLoadingRecent:v,recentSearchResults:C,setPopoverForceOpen:m,effectiveRole:i,onSelect:x,renderCombobox:j}),e[9]=r,e[10]=o,e[11]=i,e[12]=v,e[13]=l,e[14]=p,e[15]=x,e[16]=j,e[17]=a,e[18]=d,e[19]=m,e[20]=f,e[21]=C,e[22]=h,e[23]=n,e[24]=T):T=e[24],T}function Ss(){B.logEvent("Search Start")}function ce(t){"use forget";const e=Y.c(6),{children:r,onClick:o,isSelected:a,isClickable:l}=t,d=`text-token-text-tertiary px-3 pb-2 text-xs ${a?"border-b-2 font-bold":"font-semibold"} ${l?"cursor-pointer":""}`;let f;e[0]!==o?(f=()=>{o?.()},e[0]=o,e[1]=f):f=e[1];let h;return e[2]!==r||e[3]!==d||e[4]!==f?(h=s.jsx("div",{className:d,onClick:f,children:r}),e[2]=r,e[3]=d,e[4]=f,e[5]=h):h=e[5],h}function js(t){"use forget";const e=Y.c(74),{query:r,searchIdRef:o,isLoadingRecent:a,searchResults:l,searchResultsCursor:d,isLoadingSearch:f,showWorkspaceResults:h,workspaceSearchResults:n,workspaceSearchResultsCursor:p,isLoadingWorkspaceSearch:y,recentSearchResults:v,setPopoverForceOpen:i,activeTab:m,effectiveRole:x,onSelect:j,renderCombobox:u}=t;let P;e[0]!==l?(P=l===void 0?[]:l,e[0]=l,e[1]=P):P=e[1];const k=P;let R;e[2]!==n?(R=n===void 0?[]:n,e[2]=n,e[3]=R):R=e[3];const w=R,C=Ye(),[T,S]=g.useState(!1),G=Je(r,T,m==="WORKSPACE",m==="WORKSPACE"?p:d);let M;e[4]!==G.data?.pages?(M=G.data?.pages.flatMap(Rs)??[],e[4]=G.data?.pages,e[5]=M):M=e[5];let O;e[6]!==G||e[7]!==M?(O={...G,data:M},e[6]=G,e[7]=M,e[8]=O):O=e[8];const{data:N,hasNextPage:F,fetchNextPage:E,isFetchingNextPage:W,isError:_}=O,[ee,Oe]=g.useState(N.length),We=g.useRef(null);let se,te;e[9]!==ee||e[10]!==N.length?(se=()=>{N.length>ee&&(Oe(N.length),We.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},te=[N.length,ee],e[9]=ee,e[10]=N.length,e[11]=se,e[12]=te):(se=e[11],te=e[12]),g.useEffect(se,te);let re;e[13]!==x||e[14]!==C||e[15]!==j||e[16]!==r||e[17]!==o?(re=(c,b)=>{const L=c.gizmo.vanity_metrics?.num_conversations_str,H=c.gizmo.tags?.includes(J.WorkspaceDisabled)&&x!==$.OWNER;return{id:c.gizmo.id,className:U("group flex items-center gap-3 rounded-lg px-3 py-2 hover:bg-gray-50 dark:hover:bg-white/10",H&&"opacity-50 hover:opacity-100"),focusedClassName:"bg-gray-50 dark:bg-white/10",onClick:()=>{j?j(c):B.logEvent("Store Click Gizmo",{search_id:o.current,gizmo_id:c.gizmo.id,position:b,query:r,section:"search"})},children:s.jsx(Ns,{resource:c,grayedOut:H??!1,isScreenSm:C,numConvos:L})}},e[13]=x,e[14]=C,e[15]=j,e[16]=r,e[17]=o,e[18]=re):re=e[18];const V=re;if(r===""&&v&&v.length>0){let c;return e[19]!==V||e[20]!==v||e[21]!==u?(c=u({discoverySearchRecentlyUsed:v.map(V)},null),e[19]=V,e[20]=v,e[21]=u,e[22]=c):c=e[22],c}if(r===""&&a){let c;return e[23]!==u?(c=u([],null),e[23]=u,e[24]=c):c=e[24],c}if(r===""){let c;if(e[25]!==u){let b;e[27]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(ce,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(z,{...I.discoverySearchRecentlyUsedEmpty})}),e[27]=b):b=e[27],c=u([],b),e[25]=u,e[26]=c}else c=e[26];return c}if(r!==""&&!f&&m==="ALL"&&(k==null||k.length===0)){let c;if(e[28]!==u){let b;e[30]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(z,{...I.discoveryNoResultsSearch})}),e[30]=b):b=e[30],c=u([],b),e[28]=u,e[29]=c}else c=e[29];return c}if(r!==""&&!y&&m==="WORKSPACE"&&(w==null||w.length===0)){let c;if(e[31]!==u){let b;e[33]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"text-token-text-tertiary mt-4 px-3 pb-2 text-xs font-semibold",children:s.jsx(z,{...I.discoveryNoResultsSearch})}),e[33]=b):b=e[33],c=u([],b),e[31]=u,e[32]=c}else c=e[32];return c}if(h){if(r!==""&&!f&&!y&&(!k||k.length===0)&&(!w||w.length===0)){let c;if(e[34]!==u){let b;e[36]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"mx-2",children:s.jsx(ce,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(z,{...I.discoveryNoResultsSearch})})}),e[36]=b):b=e[36],c=u([],b),e[34]=u,e[35]=c}else c=e[35];return c}}else{if(f){let c;return e[37]!==u?(c=u([],null),e[37]=u,e[38]=c):c=e[38],c}if(r!==""&&!f&&(!k||k.length===0)){let c;if(e[39]!==u){let b;e[41]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx("div",{className:"mx-2",children:s.jsx(ce,{onClick:void 0,isSelected:void 0,isClickable:!1,children:s.jsx(z,{...I.discoveryNoResultsSearch})})}),e[41]=b):b=e[41],c=u([],b),e[39]=u,e[40]=c}else c=e[40];return c}}let oe;if(e[42]!==E||e[43]!==F||e[44]!==_||e[45]!==W||e[46]!==T||e[47]!==N||e[48]!==V||e[49]!==u||e[50]!==k||e[51]!==d||e[52]!==i||e[53]!==w||e[54]!==p){let c=[];if(k){const L=k.map(V);c=[...c,...L]}if(k&&N){const L=N.map(V);c=[...c,...L]}if((!T&&N.length===0||F||W||_)&&d!=null){let L;e[56]!==E||e[57]!==i?(L=()=>{S(!0),E(),i?.(!0)},e[56]=E,e[57]=i,e[58]=L):L=e[58];const H=_?"danger-outline":"secondary";let D;e[59]!==_?(D=_?s.jsx(z,{...I.discoveryLoadMoreError}):s.jsx(z,{...I.discoveryLoadMore}),e[59]=_,e[60]=D):D=e[60];let Q;e[61]!==W||e[62]!==H||e[63]!==D?(Q=s.jsx(q,{color:H,onClick:ws,loading:W,fullWidth:!0,className:"mt-2 md:mt-3",children:D}),e[61]=W,e[62]=H,e[63]=D,e[64]=Q):Q=e[64];const le={id:"all-load-more-button",className:"",onClick:L,children:Q};c=[...c,le]}const b={ALL:c};if(w){const L=w.map(V);b.WORKSPACE=L}if(w&&N){const L=N.map(V);b.WORKSPACE=[...b.WORKSPACE,...L]}if((!T&&N.length===0||F||W||_)&&p!=null){let L;e[65]!==E||e[66]!==i?(L=()=>{S(!0),E(),i?.(!0)},e[65]=E,e[66]=i,e[67]=L):L=e[67];const H=_?"danger-outline":"secondary";let D;e[68]!==_?(D=_?s.jsx(z,{...I.discoveryLoadMoreError}):s.jsx(z,{...I.discoveryLoadMore}),e[68]=_,e[69]=D):D=e[69];let Q;e[70]!==W||e[71]!==H||e[72]!==D?(Q=s.jsx(q,{color:H,onClick:ks,fullWidth:!0,className:"mt-2 md:mt-3",loading:W,children:D}),e[70]=W,e[71]=H,e[72]=D,e[73]=Q):Q=e[73];const le={id:"workspace-load-more-button",className:"",onClick:L,children:Q};b.WORKSPACE=[...b.WORKSPACE,le]}oe=u(b,null),e[42]=E,e[43]=F,e[44]=_,e[45]=W,e[46]=T,e[47]=N,e[48]=V,e[49]=u,e[50]=k,e[51]=d,e[52]=i,e[53]=w,e[54]=p,e[55]=oe}else oe=e[55];return oe}function ks(){}function ws(){}function Rs(t){return t.items.map(zs)}function zs(t){return t}function Ns(t){"use forget";const e=Y.c(25),{resource:r,grayedOut:o,isScreenSm:a,numConvos:l}=t,d=!!r.gizmo.tags?.includes(J.FirstParty),f=r.gizmo.display.profile_picture_url??void 0,h=o&&"grayscale group-hover:grayscale-0";let n;e[0]!==h?(n=U("h-8 w-8 shrink-0",h),e[0]=h,e[1]=n):n=e[1];let p;e[2]!==d||e[3]!==f||e[4]!==n?(p=s.jsx(Pe,{isFirstParty:d,src:f,className:n}),e[2]=d,e[3]=f,e[4]=n,e[5]=p):p=e[5];let y;e[6]!==r.gizmo.display.name?(y=s.jsx("div",{className:"flex flex-row items-end space-x-2",children:s.jsx("span",{className:"shrink-0 truncate text-sm font-semibold",children:r.gizmo.display.name})}),e[6]=r.gizmo.display.name,e[7]=y):y=e[7];let v;e[8]!==a||e[9]!==r.gizmo.display.description?(v=a&&s.jsx("span",{className:"text-token-text-tertiary max-w-md truncate text-xs",children:r.gizmo.display.description}),e[8]=a,e[9]=r.gizmo.display.description,e[10]=v):v=e[10];let i;e[11]!==r?(i=s.jsx("div",{className:"-mt-1",children:s.jsx(Ne,{gizmo:r,className:"text-token-text-tertiary truncate text-xs",hideLink:!0})}),e[11]=r,e[12]=i):i=e[12];let m;e[13]!==l?(m=l&&s.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 font-semibold",style:{marginTop:"-2px"},children:[s.jsx(Ge,{className:"icon-xs"}),s.jsx("span",{className:"line-clamp-1 text-xs",children:l})]}),e[13]=l,e[14]=m):m=e[14];let x;e[15]!==i||e[16]!==m?(x=s.jsxs("div",{className:"flex items-center gap-2",children:[i,m]}),e[15]=i,e[16]=m,e[17]=x):x=e[17];let j;e[18]!==x||e[19]!==y||e[20]!==v?(j=s.jsxs("div",{className:"flex flex-col space-y-1 truncate",children:[y,v,x]}),e[18]=x,e[19]=y,e[20]=v,e[21]=j):j=e[21];let u;return e[22]!==j||e[23]!==p?(u=s.jsxs(s.Fragment,{children:[p,j]}),e[22]=j,e[23]=p,e[24]=u):u=e[24],u}const I=ve({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"}}),_e=Be.div`grid grid-cols-1 gap-x-1.5 gap-y-1 md:gap-x-2 md:gap-y-1.5 lg:grid-cols-2 lg:gap-x-3 lg:gap-y-2.5`,pe="gpt_store";function Gs(t,e){e.scrollLeft>t.offsetLeft?e.scrollBy({left:t.offsetLeft-e.scrollLeft-20,behavior:"smooth"}):e.scrollLeft+e.clientWidth<t.offsetLeft+t.clientWidth&&e.scrollBy({left:t.offsetLeft+t.clientWidth-e.clientWidth-e.scrollLeft+20,behavior:"smooth"})}function qs({anon:t}){const[e,r]=g.useState(()=>ue.getItem(fe.GizmoDiscoveryLocale)),o=h=>{r(h),ue.setItem(fe.GizmoDiscoveryLocale,h)},a=we(),[l,d]=g.useState(!1),f=a?.isOwnerOfAccount()&&!l?$.OWNER:$.STANDARD;return s.jsx(Cs,{anon:t,currAccount:a,requestedLocale:e,effectiveRole:f,setPretendStandardUser:d,setLocale:o})}function Cs({anon:t,currAccount:e,requestedLocale:r,effectiveRole:o,setPretendStandardUser:a,setLocale:l}){const[d,f]=g.useState(void 0),h=!!t||e?.isPersonalAccount()&&!0,{data:n,isLoading:p,isError:y}=Xe(r,h);g.useEffect(()=>{n&&f({locale:n.locale,workspace_filtered:n.workspace_filtered,cuts:n.cuts.map(i=>({info:i.info,list:{items:i.list.items.map(m=>m.resource),cursor:i.list.cursor}}))})},[n]);const v=(...i)=>{const m=ze(...i);return{...m,data:m.data?.pages.flatMap(x=>x.list.items.map(j=>j.resource))??[]}};return s.jsx(Ps,{anon:t,discoveryLanding:d,isLoading:p,isError:y,effectiveRole:o,setPretendStandardUser:a,requestedLocale:r,setLocale:l,useFetchMoreQuery:v})}function Ms(t,e){if(t)return s.jsx(ae,{type:"info",children:s.jsx(z,{...A.discoveryResidencyRestriction})});switch(e){case"allow_none":return s.jsx(ae,{type:"info",children:s.jsx(z,{...A.discoveryThirdPartyDisabled})});case"allow_specific":return s.jsx(ae,{type:"info",children:s.jsx(z,{...A.discoveryThirdPartySpecific})});default:return null}}function Ps({anon:t,discoveryLanding:e,isLoading:r,isError:o,effectiveRole:a,setPretendStandardUser:l,requestedLocale:d,setLocale:f,useFetchMoreQuery:h}){const n=we(),p=Fe(n?.getWorkspaceId()),y=e?.locale??d,v=g.useRef({}),[i,m]=g.useState({}),x=g.useMemo(()=>Ze(He(e?.cuts.map(S=>({id:S.info.id,name:S.info.display_group}))),"name"),[e]),j=g.useRef(null),u=x.find(S=>i[S.id])??x[0];g.useEffect(()=>{const S=v.current,G=new IntersectionObserver(M=>{M.forEach(O=>{for(const N of x){const F=S[N.id];F!=null&&O.target===F&&m(E=>({...E,[N.id]:O.isIntersecting}))}})},{root:null,rootMargin:"-96px",threshold:.1});return Object.values(S).forEach(M=>{M!=null&&G.observe(M)}),()=>{Object.values(S).forEach(M=>{M!=null&&G.unobserve(M)})}},[v,x]);const P=g.useRef(null),k=s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:o?s.jsx(ae,{type:"danger",children:s.jsx(z,{...A.discoveryError})}):s.jsx(ke,{})}),R=n?.data.residencyRegion!=null&&n.data.residencyRegion!=="no_constraint"&&n.data.residencyRegion!=="us",w=p.data?.allow_third_party_gpts,C=Ms(R,w),T=s.jsxs("div",{className:"screen-arch:w-full mx-auto max-w-3xl overflow-x-clip px-4",children:[s.jsx(Ls,{}),s.jsxs("div",{className:"bg-token-bg-primary sticky top-14 z-30 -mt-2 mb-12 flex flex-col gap-6 pt-2 [@media(min-width:1560px)]:top-0",children:[!t&&s.jsx(us,{}),s.jsx("div",{ref:j,className:"scroll-mt-28"}),C,x.length>0&&s.jsx(Es,{displayGroups:x,currentDisplayGroup:u,scrollToDisplayGroup:S=>{(v.current[S.id]??j.current).scrollIntoView({behavior:"smooth",block:"start"})}})]}),e?.cuts.map(S=>S.info.display_type==="featured"?s.jsx(Os,{info:S.info,items:S.list.items,ref:G=>{G!=null&&(v.current[S.info.id]=G)},effectiveRole:a},S.info.id):s.jsx(Ds,{info:S.info,items:S.list.items,cursor:S.list.cursor??void 0,ref:G=>{G!=null&&(v.current[S.info.id]=G)},anon:t,effectiveRole:a,useFetchMoreQuery:h},S.info.id))??[]]});return r||o?s.jsxs(s.Fragment,{children:[t?s.jsx(he,{redirectUrl:ge(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsx(ye,{locale:y,setLocale:f,currAccount:n}),k]}):s.jsxs("div",{ref:P,className:"h-full overflow-y-auto",children:[t?s.jsx(he,{redirectUrl:ge(),className:"bg-token-main-surface-primary sticky top-0 z-30 h-14"}):s.jsxs(s.Fragment,{children:[n?.isWorkspaceAccount()&&s.jsx(_s,{role:a,onPretendStandardUser:S=>{l(S)}}),s.jsx(ye,{locale:y,setLocale:f,currAccount:n})]}),T,e?.workspace_filtered&&!n?.isOwnerOfAccount()&&s.jsx(Ts,{})]})}function Ls(){return s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"my-2 text-center text-3xl font-bold md:my-4 md:text-5xl",children:s.jsx(z,{...A.discoverySplashHeader})}),s.jsx("div",{className:"text-token-text-secondary mx-auto w-full text-center text-sm md:text-lg md:leading-tight",children:s.jsx(z,{...A.discoverySplashDescription})})]})}function Es({displayGroups:t,currentDisplayGroup:e,scrollToDisplayGroup:r}){const o=g.useRef(null),a=Z(),l=(...i)=>a.formatMessage(...i),d=g.useRef({}),[f,h]=g.useState(!1);g.useEffect(()=>{if(f||e==null)return;const m=d.current[e.id];if(m==null)return;const x=o.current;x!=null&&Gs(m,x)},[e,f]);const[n,p]=g.useState(!1),[y,v]=g.useState(!1);return g.useEffect(()=>{const i=o.current,m=()=>{i!=null&&(p(i.scrollLeft>0),v(i.scrollLeft+i.clientWidth<i.scrollWidth))};return i?.addEventListener("scroll",m),window.addEventListener("resize",m),m(),()=>{i?.removeEventListener("scroll",m),window.removeEventListener("resize",m)}},[o]),s.jsxs("div",{className:"bg-token-main-surface-primary sticky top-14 z-10 -ms-4 w-screen py-2 text-sm md:ms-0 md:w-full md:pb-0",children:[n&&s.jsx("div",{className:"absolute start-0 top-2 hidden h-full items-end bg-linear-to-r from-white from-50% to-transparent pe-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/20",onClick:()=>{o.current!=null&&o.current.scrollBy({left:-400,behavior:"smooth"})},children:s.jsx(es,{className:"icon-sm"})})}),s.jsx("div",{className:"no-scrollbar flex scroll-m-5 gap-1.5 overflow-x-auto md:overflow-hidden",ref:o,children:t.map(i=>s.jsx("div",{className:U("md:text-token-text-primary cursor-pointer scroll-mx-5 rounded-3xl px-3 py-2 whitespace-nowrap select-none first:ms-4 last:me-4 md:bg-transparent md:px-2 md:first:ms-0 md:last:me-0",i.id===e?.id?"border-token-text-primary text-token-main-surface-primary bg-black md:rounded-none md:border-b-2 dark:bg-gray-100 dark:md:bg-transparent":"bg-token-main-surface-secondary hover:text-token-text-primary md:text-token-text-tertiary hover:bg-gray-100 md:rounded-lg md:hover:bg-gray-50 dark:hover:bg-white/20 dark:md:bg-transparent dark:md:hover:bg-gray-700"),onClick:()=>{h(!0),r(i),setTimeout(()=>{h(!1)},1e3),B.logEvent("Store Click Category",{category:i.id})},ref:m=>{m!=null&&(d.current[i.id]=m)},children:l({id:`gizmo.categoryName.${i.name}`,defaultMessage:i.name,description:"store category"})},i.id))}),y&&s.jsx("div",{className:"absolute end-0 top-2 hidden h-full bg-linear-to-l from-white from-50% to-transparent ps-8 md:block dark:from-gray-800",children:s.jsx("button",{className:"mt-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-white/10",onClick:()=>{o.current!=null&&o.current.scrollBy({left:400,behavior:"smooth"})},children:s.jsx(ss,{className:"icon-sm"})})})]})}function Ts(){const t=Z(),e=Re(),r=is();return s.jsxs("div",{className:U("bg-token-main-surface-secondary text-token-text-secondary screen-arch:static fixed bottom-0 flex w-full items-center justify-center gap-2 p-3 text-sm",r&&"md:w-[calc(100%-16rem)]"),children:[s.jsx(Me,{className:"icon-sm"}),t.formatMessage(A.discoveryThirdPartyGPTsDisabled,{workspaceName:e})]})}function _s({role:t,onPretendStandardUser:e}){const r=Z();return Ve()?s.jsxs("div",{className:"h-52px flex w-full items-center justify-center gap-2 bg-gray-100 p-3 text-sm dark:bg-gray-700",children:[s.jsx(Me,{className:"icon-sm"}),s.jsx(z,{id:"gizmo.discovery.browsingAsOwner",defaultMessage:"You're viewing as a <b>workspace member</b>",values:{b:a=>s.jsxs(K.Root,{defaultValue:t,onValueChange:l=>{e(l===$.STANDARD)},children:[s.jsxs(K.Trigger,{className:"-mx-2 -my-2 bg-transparent px-1 font-semibold",children:[s.jsx(Ce,{disabled:t!==$.OWNER,label:r.formatMessage({id:"gizmo.discovery.browsingAsOwnerTooltip",defaultMessage:"Owners can access all third-party GPTs, even if they haven’t been approved."}),side:"bottom",triggerAs:null,children:s.jsx(K.Value,{})}),s.jsx(K.Icon,{})]}),s.jsx(K.Portal,{children:s.jsxs(K.Content,{children:[s.jsx(K.Item,{value:$.OWNER,children:s.jsx(z,{id:"gizmo.discovery.browsingOwnerRole",defaultMessage:"workspace owner"})}),s.jsx(K.Item,{value:$.STANDARD,children:s.jsx(z,{id:"gizmo.discovery.browsingMemberRole",defaultMessage:"workspace member"})})]})})]})}})]}):null}function ye({locale:t,setLocale:e,currAccount:r}){const o=os(),a=ne(),l=Z(),d=r?.hasPlusFeatures();return s.jsx(s.Fragment,{children:s.jsxs(ts,{className:"z-30 mx-auto flex w-full justify-center gap-2 whitespace-nowrap",children:[s.jsxs("div",{className:"w-[calc((100%-768px)/2)] min-w-fit items-center",children:[s.jsx(ds,{}),s.jsx(Ce,{side:"right",label:t===X.GLOBAL?l.formatMessage(A.discoveryGlobalViewOn):l.formatMessage(A.discoveryGlobalViewOff),children:s.jsx(q,{color:"ghost",onClick:()=>{t===X.GLOBAL?e(X.ENGLISH):e(X.GLOBAL)},children:s.jsx(rs,{className:U("icon-sm",t===X.GLOBAL?"text-token-text-primary":"text-token-text-tertiary")})})})]}),s.jsx("div",{className:"grow"}),s.jsxs("div",{className:"flex w-[calc((100%-768px)/2)] min-w-fit justify-end gap-2",children:[d&&s.jsx(q,{color:"ghost",onClick:()=>{a("/gpts/mine"),B.logEvent("Store My Gizmos")},children:s.jsx(z,{...A.discoveryMyGPTs})}),s.jsx(As,{canCreateGPTs:d,createUrl:o})]}),s.jsx("div",{className:"pe-1",children:s.jsx(as,{})})]})})}const As=({canCreateGPTs:t,createUrl:e})=>{const[r,o]=g.useState(!1),a=g.useRef(void 0),l=Qe(),f=je()?.planType??"unknown",h="create_gpt",n=()=>{t||(B.logPopoverHover({location:pe,type:h,plan_type:f}),clearTimeout(a.current),o(!0))},p=()=>{t||(a.current=l(function(){o(!1)},300))},y=ne(),v=()=>{B.logUpsellGetPlusButtonClicked({location:pe,type:h,plan_type:f}),cs(y,"Gizmo Discovery page upsell")},i=t?()=>B.logEvent("Store Create Gizmo"):m=>m.preventDefault();return s.jsxs("div",{onMouseEnter:n,onMouseLeave:p,className:"screen-arch:flex screen-arch:items-center relative",children:[s.jsx(q,{color:"primary",disabled:!t,visuallyDisabled:!t,onClick:i,as:"link",to:e,icon:ls,"data-testid":"create-gpt-discovery-button",children:s.jsx(z,{...A.discoveryCreateGPT})}),!t&&r&&s.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary screen-arch:top-12 absolute end-0 z-10 mt-2 w-64 rounded-lg border p-3 text-sm shadow-lg",children:[s.jsx("p",{className:"from-token-text-tertiary mb-2 text-start font-normal break-words whitespace-normal",children:s.jsx(z,{...A.createGPTUpsell})}),s.jsx(q,{color:"secondary",onClick:v,size:"small",children:s.jsx(z,{...A.createGPTUpsellButtonLabel})})]})]})},Os=g.forwardRef(function({info:e,items:r,effectiveRole:o},a){return s.jsx(Ae,{title:e.title,description:e.description,ref:a,children:s.jsx(_e,{children:r.map((l,d)=>s.jsx(Ws,{resource:l,effectiveRole:o},`${d}-${l.gizmo.id}`))})})});function Ws({resource:t,effectiveRole:e}){const r=t.gizmo.vanity_metrics?.num_conversations_str,o=t.gizmo.tags?.includes(J.WorkspaceDisabled)&&e!==$.OWNER;return s.jsx(de,{children:s.jsxs(Te,{gizmo:t,className:U("group flex h-24 items-center gap-5 overflow-hidden rounded-xl bg-gray-50 px-7 py-8 hover:bg-gray-100 md:h-32 lg:h-36 dark:bg-gray-700 dark:hover:bg-white/10",o&&"opacity-50 hover:opacity-100"),onClick:()=>{B.logEvent("Store Click Gizmo",{gizmo_id:t.gizmo.id,section:"featured"})},children:[s.jsx(Pe,{isFirstParty:!!t.gizmo.tags?.includes(J.FirstParty),src:t.gizmo.display.profile_picture_url??void 0,className:U("h-16 w-16 shrink-0 md:h-24 md:w-24",o&&"grayscale group-hover:grayscale-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"line-clamp-2 font-semibold md:text-lg",children:t.gizmo.display.name}),s.jsx("span",{className:"line-clamp-2 text-xs md:line-clamp-3",children:t.gizmo.display.description}),s.jsxs("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 flex justify-start gap-1 text-xs",children:[s.jsx(Ne,{gizmo:t,className:"text-xs",hideLink:!0}),r&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-[10px]",children:"•"}),s.jsx(Ge,{className:"mt-0.5 h-3 w-3"}),r]})]})]})]})})}const Ds=g.forwardRef(function({info:e,items:r,cursor:o,anon:a,effectiveRole:l,useFetchMoreQuery:d},f){const[h,n]=g.useState(r.length===0),{data:p,hasNextPage:y,fetchNextPage:v,isFetchingNextPage:i,isError:m}=d({cutId:e.id,locale:e.locale,limit:6,cursor:o,enabled:h});g.useEffect(()=>{r.length===0&&v()},[v,r.length]);const[x,j]=g.useState(p.length),u=g.useRef(null),P=Ie(.1);return g.useEffect(()=>{p.length>x&&(j(p.length),u.current?.scrollIntoView({behavior:"smooth",block:"nearest"}))},[p.length,x]),s.jsxs(Ae,{title:e.title,description:e.description,ref:f,children:[s.jsxs(_e,{children:[r.map((k,R)=>s.jsx(xe,{resource:k,rank:R+1,cutId:e.id,effectiveRole:l},R)),p.map((k,R)=>s.jsx(xe,{resource:k,rank:r.length+R+1,cutId:e.id,delay:P(R-x,p.length-x),effectiveRole:l},R))]}),(!h||y||i||m)&&!a&&o!=null&&s.jsx(q,{color:m?"danger-outline":"secondary",onClick:()=>{n(!0),B.logEvent("Store Load More",{section:e.id}),v()},fullWidth:!0,className:"mt-2 md:mt-3",loading:i,children:m?s.jsx(z,{...A.discoveryLoadMoreError}):s.jsx(z,{...A.discoveryLoadMore})}),s.jsx("div",{ref:u})]})});function xe({resource:t,rank:e,cutId:r,delay:o,effectiveRole:a}){const l=t.gizmo.tags?.includes(J.WorkspaceDisabled)&&a!==$.OWNER,d=t.gizmo.tags?.includes(J.FirstParty);return s.jsx(de,{delay:o,children:s.jsxs(Te,{gizmo:t,className:U("group hover:bg-token-main-surface-secondary flex h-[104px] items-center gap-2.5 overflow-hidden rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",l&&"opacity-50 hover:opacity-100"),onClick:()=>{B.logEvent("Store Click Gizmo",{gizmo_id:t.gizmo.id,position:e,section:d?"first_party":r})},children:[s.jsx("div",{className:"text-md flex w-8 shrink-0 items-center justify-center font-semibold",children:e}),s.jsx(ns,{resource:t,grayedOut:l})]},t.gizmo.id)})}const Ae=g.forwardRef(function({title:e,description:r,className:o,children:a},l){return s.jsxs("div",{ref:l,className:"h-fit scroll-mt-28 last:min-h-[calc(100vh-8rem)]",children:[s.jsxs(de,{animateTap:!1,children:[s.jsx("div",{className:"text-xl font-semibold md:text-2xl",children:e}),r&&s.jsx("div",{className:"text-token-text-tertiary text-sm md:text-base",children:r})]}),s.jsx("div",{className:U("mt-4 mb-10",o),children:a})]})}),A=ve({discoveryAllResultsHeader:{id:"gizmo.discovery.AllResultsHeader",defaultMessage:"All"},discoveryWorkspaceResultsHeader:{id:"gizmo.discovery.workspaceResultsHeaderName",defaultMessage:"{workspaceName} workspace"},discoveryEmpty:{id:"gizmo.discovery.empty",defaultMessage:"Nothing to discover"},discoveryNoResultsSearch:{id:"gizmo.discovery.search.empty",defaultMessage:"No results found"},discoveryError:{id:"gizmo.discovery.error",defaultMessage:"Error loading GPTs"},discoverySearch:{id:"gizmo.discovery.search",defaultMessage:"Search GPTs"},discoverySearchSmall:{id:"gizmo.discovery.searchSmall",defaultMessage:"Search"},discoverySearchRecentlyUsed:{id:"gizmo.discovery.search.recentlyUsed",defaultMessage:"Recently Used"},discoverySearchRecentlyUsedEmpty:{id:"gizmo.discovery.search.recentlyUsedEmpty",defaultMessage:"No recently used GPTs"},discoverySearchResults:{id:"gizmo.discovery.search.results",defaultMessage:"Search Results"},discoveryLoadMore:{id:"gizmo.discovery.loadMore",defaultMessage:"See more"},discoveryLoadMoreError:{id:"gizmo.discovery.loadMoreError",defaultMessage:"Error loading more"},discoveryMyGPTs:{id:"gizmo.discovery.myGPTs",defaultMessage:"My GPTs"},discoveryCreateGPT:{id:"gizmo.discovery.createGPT",defaultMessage:"Create"},discoveryThirdPartyGPTsDisabled:{id:"gizmo.discovery.thirdPartyGPTsDisabled",defaultMessage:"Your admin has blocked GPTs created outside {workspaceName}."},discoverySplashHeader:{id:"gizmo.discovery.splashHeader",defaultMessage:"GPTs"},discoverySplashDescription:{id:"gizmo.discovery.splashDescription",defaultMessage:"Discover and create custom versions of ChatGPT that combine instructions, extra knowledge, and any combination of skills."},discoveryGlobalViewOn:{id:"gizmo.discovery.globalViewOn",defaultMessage:"Global View On"},discoveryGlobalViewOff:{id:"gizmo.discovery.globalViewOff",defaultMessage:"Global View Off"},createdAgoLabel:{id:"gizmo.discovery.createdAgoLabel",defaultMessage:"Created {createdAgo}"},createGPTUpsell:{id:"gizmo.discovery.createGPTUpsell",defaultMessage:"Get ChatGPT Plus to create and share your own GPTs"},createGPTUpsellButtonLabel:{id:"gizmo.discovery.createGPTUpsellButtonLabel",defaultMessage:"Get Plus"},discoveryResidencyRestriction:{id:"gizmo.discovery.residencyRestriction",defaultMessage:"To comply with data residency requirements, only GPTs created within your workspace are accessible. All third-party GPTs are not available."},discoveryThirdPartyDisabled:{id:"gizmo.discovery.thirdPartyDisabled",defaultMessage:"Your admin has disabled all third-party GPTs. Only workspace GPTs are available."},discoveryThirdPartySpecific:{id:"gizmo.discovery.thirdPartySpecific",defaultMessage:"Your admin has disabled most third-party GPTs, except for specific ones that have been explicitly approved. Workspace GPTs are available."}});export{us as G,qs as a};
//# sourceMappingURL=gfoysyc34lqmw43c.js.map
