import{f as v,r as g,j as r,M as c,g as B,c as Y}from"./n3epq09dut36rmi2.js";import{H as j}from"./h446s733avqwi4v2.js";import{aw as S,ax as E,ay as b,az as N,aA as D}from"./uox23aig6gp6se2y.js";const u=B({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"}}),L=5;function $(d,t){"use forget";const o=v();return g.useMemo(()=>d.reduce((e,s)=>{const a=new Date(s.update_time??s.create_time??0),n=S(new Date,a);if(n===0)e.recent.today.items.push(s);else if(n<=1)e.recent.yesterday.items.push(s);else if(n<=7)e.recent.lastSeven.items.push(s);else if(n<=30)e.recent.lastThirty.items.push(s);else if(E(a)){const y=b(a),i=N(a),m=`${y}-${i}`;e.dynamicMonths[m]?e.dynamicMonths[m].items.push(s):e.dynamicMonths[m]={label:o.formatDate(a,{month:"long"}),items:[s]}}else{const i=`${b(a)}-`;e.dynamicYears[i]?e.dynamicYears[i].items.push(s):e.dynamicYears[i]={label:o.formatDate(a,{year:"numeric"}),items:[s]}}return e},{recent:{today:{label:r.jsx(c,{...u.historyBucketToday}),items:[]},yesterday:{label:r.jsx(c,{...u.historyBucketYesterday}),items:[]},lastSeven:{label:r.jsx(c,{...u.historyBucketLastSeven}),items:[]},lastThirty:{label:r.jsx(c,{...u.historyBucketLastThirty}),items:[]}},dynamicMonths:{},dynamicYears:{}}),[t,d])}function R(d){"use forget";const t=Y.c(9),{activeId:o,bucketedItems:e,items:s,hasNextPage:a,infiniteScrollTriggerElementRef:n,hideOverflowMenu:y}=d;let i;return t[0]!==o||t[1]!==e.dynamicMonths||t[2]!==e.dynamicYears||t[3]!==e.recent||t[4]!==a||t[5]!==y||t[6]!==n||t[7]!==s?(i=r.jsx(r.Fragment,{children:[e.recent,e.dynamicMonths,e.dynamicYears].flatMap((m,M)=>r.jsx(g.Fragment,{children:Object.entries(m).map(k=>{const[f,p]=k,{items:h,label:T}=p;return f!=="today"&&!h.length?null:h.length>0&&r.jsx(D,{label:T,children:h.map((l,x)=>{const I=a&&s[s.length-L-1]?.id===l.id?n:void 0;return r.jsx(j,{conversation:l,hideOverflowMenu:y,isActive:o===l.id,elementRef:I,testId:`history-item-${x}`},l.id)})},f)})},`category-${M}`))}),t[0]=o,t[1]=e.dynamicMonths,t[2]=e.dynamicYears,t[3]=e.recent,t[4]=a,t[5]=y,t[6]=n,t[7]=s,t[8]=i):i=t[8],i}export{R as H,$ as u};
//# sourceMappingURL=e3jbhlk6nvddhkdz.js.map
