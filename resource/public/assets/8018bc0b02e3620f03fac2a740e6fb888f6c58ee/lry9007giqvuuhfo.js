import{gw as f,m as We,c as Y,W as Ye,at as oe,cR as $e,eq as De}from"./nqrmgk5te3uzwsyz.js";import{f as ee,r as k,j as n,g as Ie,R as u,l as ge,M as V,d as Je,C as Ke}from"./n3epq09dut36rmi2.js";import{ok as Ge,fK as He,ol as ve,dn as xe,kZ as ze}from"./uox23aig6gp6se2y.js";import{S as Xe}from"./l7r1befgsneboeic.js";import{u as Ze}from"./fc9seyy3gmyyaxsm.js";import{i as ye}from"./fskf2ponl42ye67s.js";import"./lz1vmotuvwwmb129.js";const Qe=r=>{switch(r){case"ca_gst_hst":return"CA GST/HST";case"ca_pst_bc":return"CA PST-BC";case"ca_pst_mb":return"CA PST-MB";case"ca_pst_sk":return"CA PST-SK";default:return r.replace("_"," ").toUpperCase()}},et=({country:r,type:e,description:t})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1.5 pe-1 font-serif font-medium",children:[n.jsx("img",{src:`https://cdn.openai.com/API/images/flags/png/${r}@2x.png`,alt:e,className:"h-4 w-4"}),Qe(e)]}),n.jsx("span",{className:"block text-sm text-gray-500",children:t})]}),tt=({businessName:r,taxIdType:e,taxIdValue:t,onBusinessNameChange:s,onTaxIdTypeChange:a,onTaxIdValueChange:o})=>{const c=ee(),p=k.useMemo(()=>Object.values(Ge).map(l=>({label:et(l),value:l})),[]);return n.jsxs("div",{className:"tax-id-form flex flex-col gap-2",children:[n.jsx("div",{className:"form-row",children:n.jsx("input",{type:"text",id:"businessName",style:{width:"100%",borderRadius:"0.5rem",border:"1px solid #e0e0e0",padding:"0.5rem"},value:r,onChange:l=>s(l.target.value),placeholder:c.formatMessage(ae.businessNamePlaceholder)})}),n.jsx("div",{className:"form-row",children:n.jsx(Xe,{placeholder:c.formatMessage(ae.taxIdTypePlaceholder),options:p,value:p.find(l=>l.value.type===e?.type),onChange:l=>{a(l?.value)},isSearchable:!1})}),n.jsx("div",{className:"form-row",children:n.jsx("input",{type:"text",id:"taxId",style:{width:"100%",borderRadius:"0.5rem",border:"1px solid #e0e0e0",padding:"0.5rem"},value:t,onChange:l=>o(l.target.value),placeholder:e?p.find(l=>l.value.type===e.type)?.value.placeholder:c.formatMessage(ae.taxIdPlaceholder)})})]})},ae=Ie({taxIdPlaceholder:{id:"CheckoutTaxIdCollectionForm.taxIdPlaceholder",defaultMessage:"Tax ID"},taxIdTypePlaceholder:{id:"CheckoutTaxIdCollectionForm.taxIdTypePlaceholder",defaultMessage:"Tax type"},businessNamePlaceholder:{id:"CheckoutTaxIdCollectionForm.businessNamePlaceholder",defaultMessage:"Business name"}});function be(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function Se(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?be(Object(t),!0).forEach(function(s){Ne(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function z(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?z=function(e){return typeof e}:z=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(r)}function Ne(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rt(r,e){if(r==null)return{};var t={},s=Object.keys(r),a,o;for(o=0;o<s.length;o++)a=s[o],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}function Ae(r,e){if(r==null)return{};var t=rt(r,e),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(a=0;a<o.length;a++)s=o[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function ie(r,e){return nt(r)||st(r,e)||at(r,e)||ot()}function nt(r){if(Array.isArray(r))return r}function st(r,e){var t=r&&(typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"]);if(t!=null){var s=[],a=!0,o=!1,c,p;try{for(t=t.call(r);!(a=(c=t.next()).done)&&(s.push(c.value),!(e&&s.length===e));a=!0);}catch(l){o=!0,p=l}finally{try{!a&&t.return!=null&&t.return()}finally{if(o)throw p}}return s}}function at(r,e){if(r){if(typeof r=="string")return Ce(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ce(r,e)}}function Ce(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=r[t];return s}function ot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P=function(e,t,s){var a=!!s,o=u.useRef(s);u.useEffect(function(){o.current=s},[s]),u.useEffect(function(){if(!a||!e)return function(){};var c=function(){o.current&&o.current.apply(o,arguments)};return e.on(t,c),function(){e.off(t,c)}},[a,t,e,o])},X=function(e){var t=u.useRef(e);return u.useEffect(function(){t.current=e},[e]),t.current},$=function(e){return e!==null&&z(e)==="object"},it=function(e){return $(e)&&typeof e.then=="function"},lt=function(e){return $(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},ke="[object Object]",Te=function r(e,t){if(!$(e)||!$(t))return e===t;var s=Array.isArray(e),a=Array.isArray(t);if(s!==a)return!1;var o=Object.prototype.toString.call(e)===ke,c=Object.prototype.toString.call(t)===ke;if(o!==c)return!1;if(!o&&!s)return e===t;var p=Object.keys(e),l=Object.keys(t);if(p.length!==l.length)return!1;for(var x={},_=0;_<p.length;_+=1)x[p[_]]=!0;for(var j=0;j<l.length;j+=1)x[l[j]]=!0;var d=Object.keys(x);if(d.length!==p.length)return!1;var R=e,L=t,E=function(I){return r(R[I],L[I])};return d.every(E)},ct=function(e,t,s){return $(e)?Object.keys(e).reduce(function(a,o){var c=!$(t)||!Te(e[o],t[o]);return s.includes(o)?(c&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),a):c?Se(Se({},a||{}),{},Ne({},o,e[o])):a},null):null},Oe="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",je=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Oe;if(e===null||lt(e))return e;throw new Error(t)},ut=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Oe;if(it(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(a){return je(a,t)})};var s=je(e,t);return s===null?{tag:"empty"}:{tag:"sync",stripe:s}},dt=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},Re=u.createContext(null);Re.displayName="ElementsContext";var mt=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};f.any,f.object;f.func.isRequired;var pt=["on","session"],te=u.createContext(null);te.displayName="CheckoutSdkContext";var Le=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},ue=u.createContext(null);ue.displayName="CheckoutContext";var ft=function(e,t){if(!e)return null;e.on,e.session;var s=Ae(e,pt);return Object.assign(t||e.session(),s)},ht="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Fe=function(e){var t=e.stripe,s=e.options,a=e.children,o=u.useMemo(function(){return ut(t,ht)},[t]),c=u.useState(null),p=ie(c,2),l=p[0],x=p[1],_=u.useState(function(){return{stripe:o.tag==="sync"?o.stripe:null,checkoutSdk:null}}),j=ie(_,2),d=j[0],R=j[1],L=function(y,w){R(function(A){return A.stripe&&A.checkoutSdk?A:{stripe:y,checkoutSdk:w}})},E=u.useRef(!1);u.useEffect(function(){var N=!0;return o.tag==="async"&&!d.stripe?o.stripePromise.then(function(y){y&&N&&!E.current&&(E.current=!0,y.initCheckout(s).then(function(w){w&&(L(y,w),w.on("change",x))}))}):o.tag==="sync"&&o.stripe&&!E.current&&(E.current=!0,o.stripe.initCheckout(s).then(function(y){y&&(L(o.stripe,y),y.on("change",x))})),function(){N=!1}},[o,d,s,x]);var M=X(t);u.useEffect(function(){M!==null&&M!==t&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[M,t]);var I=X(s),B=X(d.checkoutSdk);u.useEffect(function(){var N,y;if(d.checkoutSdk){var w=I==null||(N=I.elementsOptions)===null||N===void 0?void 0:N.appearance,A=s==null||(y=s.elementsOptions)===null||y===void 0?void 0:y.appearance,O=!Te(A,w),i=!B&&d.checkoutSdk;A&&(O||i)&&d.checkoutSdk.changeAppearance(A)}},[s,I,d.checkoutSdk,B]),u.useEffect(function(){dt(d.stripe)},[d.stripe]);var q=u.useMemo(function(){return ft(d.checkoutSdk,l)},[d.checkoutSdk,l]);return d.checkoutSdk?u.createElement(te.Provider,{value:d},u.createElement(ue.Provider,{value:q},a)):null};Fe.propTypes={stripe:f.any,options:f.shape({fetchClientSecret:f.func.isRequired,elementsOptions:f.object}).isRequired};var gt=function(e){var t=u.useContext(te);return Le(t,e)},le=function(e){var t=u.useContext(te),s=u.useContext(Re);if(t&&s)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?Le(t,e):mt(s,e)},de=function(){gt("calls useCheckout()");var e=u.useContext(ue);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},vt=["mode"],xt=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},g=function(e,t){var s="".concat(xt(e),"Element"),a=function(l){var x=l.id,_=l.className,j=l.options,d=j===void 0?{}:j,R=l.onBlur,L=l.onFocus,E=l.onReady,M=l.onChange,I=l.onEscape,B=l.onClick,q=l.onLoadError,N=l.onLoaderStart,y=l.onNetworksChange,w=l.onConfirm,A=l.onCancel,O=l.onShippingAddressChange,i=l.onShippingRateChange,m=le("mounts <".concat(s,">")),h="elements"in m?m.elements:null,b="checkoutSdk"in m?m.checkoutSdk:null,U=u.useState(null),re=ie(U,2),S=re[0],me=re[1],T=u.useRef(null),ne=u.useRef(null);P(S,"blur",R),P(S,"focus",L),P(S,"escape",I),P(S,"click",B),P(S,"loaderror",q),P(S,"loaderstart",N),P(S,"networkschange",y),P(S,"confirm",w),P(S,"cancel",A),P(S,"shippingaddresschange",O),P(S,"shippingratechange",i),P(S,"change",M);var se;E&&(e==="expressCheckout"?se=E:se=function(){E(S)}),P(S,"ready",se),u.useLayoutEffect(function(){if(T.current===null&&ne.current!==null&&(h||b)){var C=null;if(b)switch(e){case"payment":C=b.createPaymentElement(d);break;case"address":if("mode"in d){var fe=d.mode,he=Ae(d,vt);if(fe==="shipping")C=b.createShippingAddressElement(he);else if(fe==="billing")C=b.createBillingAddressElement(he);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":C=b.createExpressCheckoutElement(d);break;case"currencySelector":C=b.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else h&&(C=h.create(e,d));T.current=C,me(C),C&&C.mount(ne.current)}},[h,b,d]);var pe=X(d);return u.useEffect(function(){if(T.current){var C=ct(d,pe,["paymentRequest"]);C&&"update"in T.current&&T.current.update(C)}},[d,pe]),u.useLayoutEffect(function(){return function(){if(T.current&&typeof T.current.destroy=="function")try{T.current.destroy(),T.current=null}catch{}}},[]),u.createElement("div",{id:x,className:_,ref:ne})},o=function(l){le("mounts <".concat(s,">"));var x=l.id,_=l.className;return u.createElement("div",{id:x,className:_})},c=t?o:a;return c.propTypes={id:f.string,className:f.string,onChange:f.func,onBlur:f.func,onFocus:f.func,onReady:f.func,onEscape:f.func,onClick:f.func,onLoadError:f.func,onLoaderStart:f.func,onNetworksChange:f.func,onConfirm:f.func,onCancel:f.func,onShippingAddressChange:f.func,onShippingRateChange:f.func,options:f.object},c.displayName=s,c.__elementType=e,c},v=typeof window>"u",yt=u.createContext(null);yt.displayName="EmbeddedCheckoutProviderContext";var bt=function(){var e=le("calls useStripe()"),t=e.stripe;return t};g("auBankAccount",v);g("card",v);g("cardNumber",v);g("cardExpiry",v);g("cardCvc",v);g("fpxBank",v);g("iban",v);g("idealBank",v);g("p24Bank",v);g("epsBank",v);var St=g("payment",v);g("expressCheckout",v);g("currencySelector",v);g("paymentRequestButton",v);g("linkAuthentication",v);var Ct=g("address",v);g("shippingAddress",v);g("paymentMethodMessaging",v);g("affirmMessage",v);g("afterpayClearpayMessage",v);function kt({className:r}){const e=de(),t=ee(),s=He(),a=We(),[o,c]=k.useState(null),[p,l]=k.useState(!1),[x,_]=k.useState(""),[j,d]=k.useState(null),[R,L]=k.useState(""),[E,M]=k.useState(null),I=k.useRef(null),B=k.useRef(null),q=k.useRef(null),N=k.useRef(null),y=k.useRef(null),[w]=k.useState(!!e?.email);async function A(){if(p){if(!x.trim())return M(t.formatMessage({id:"CheckoutForm.errorMessageBusinessNameRequired",defaultMessage:"Business name is required"})),!1;if(!j)return M(t.formatMessage({id:"CheckoutForm.errorMessageTaxIdTypeRequired",defaultMessage:"Please select a tax ID type"})),!1;if(!R.trim())return M(t.formatMessage({id:"CheckoutForm.errorMessageTaxIdValueRequired",defaultMessage:"Tax ID is required"})),!1;const i=await e.updateTaxIdInfo({taxId:{value:R.trim(),type:j.stripe_type},businessName:x.trim()});return i.type==="error"?(M(i.error.message),!1):(M(null),!0)}else return await e.updateTaxIdInfo(null),_(""),d(null),L(""),!0}const O=Ze({defaultValues:{email:e?.email??"",hasAcceptedTermsOfService:!1,hasCompletePaymentElement:!1,hasCompleteBillingAddress:!1},validators:{onChange:({value:i})=>{const m={},{hasAcceptedTermsOfService:h,hasCompleteBillingAddress:b,hasCompletePaymentElement:U}=i;return h||(m.hasAcceptedTermsOfService=t.formatMessage({id:"CheckoutForm.inputLabelTermsOfServiceRequired",defaultMessage:"Agree to OpenAI, LLC's terms to complete your transaction."})),b||(m.hasCompleteBillingAddress=t.formatMessage({id:"CheckoutForm.inputLabelBillingAddressRequired",defaultMessage:"Your billing address is required."})),U||(m.hasCompletePaymentElement=t.formatMessage({id:"UBzTsj",defaultMessage:"Your payment method is required."})),{fields:m}},onBlur:({value:i})=>{const m={},{email:h}=i;return h||(m.email=t.formatMessage({id:"CheckoutForm.inputLabelEmailRequired",defaultMessage:"Your email is required."})),{fields:m}},onBlurAsync:async({value:i})=>{const m={},{email:h}=i;if(e.email!==h){const b=await e.updateEmail(h);if(b.type==="error")switch(b.error.code){case"incompleteEmail":m.email=t.formatMessage({id:"CheckoutForm.inputLabelEmailIncomplete",defaultMessage:"Your email is incomplete."});break;case"invalidEmail":m.email=t.formatMessage({id:"CheckoutForm.inputLabelEmailInvalid",defaultMessage:"Your email is invalid."});break}}return{fields:m}}},canSubmitWhenInvalid:!0,onSubmitInvalid:async({formApi:i})=>{e?.canConfirm||await e.confirm();const h=(i.getFieldMeta("email")?.errors??[]).length>0,U=(i.getFieldMeta("hasAcceptedTermsOfService")?.errors??[]).length>0,S=(i.getFieldMeta("hasCompletePaymentElement")?.errors??[]).length>0,T=(i.getFieldMeta("hasCompleteBillingAddress")?.errors??[]).length>0;h?(I.current?.scrollIntoView({behavior:"smooth",block:"center"}),B.current?.focus({preventScroll:!0})):S?N.current?.scrollIntoView({behavior:"smooth",block:"center"}):T?y.current?.scrollIntoView({behavior:"smooth",block:"center"}):U&&q.current?.scrollIntoView({behavior:"smooth",block:"center"})},onSubmit:async()=>{try{if(!await A())return;const m=await e.confirm({redirect:"always"});switch(m.type){case"success":a.success(t.formatMessage({id:"CheckoutForm.bannerMessagePaymentSuccess",defaultMessage:"Payment successfully processed"}));break;case"error":oe.addError("Failed to process Stripe checkout",{error:m.error}),c(m.error.message??t.formatMessage({id:"CheckoutForm.bannerMessagePaymentFailure",defaultMessage:"Failed to process payment"}));break}}catch(i){a.danger(t.formatMessage($e.somethingWentWrong)),oe.addError(i)}}});return n.jsx("form",{className:Y(r),onSubmit:i=>{i.preventDefault(),O.handleSubmit()},children:n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsxs(W,{ref:I,children:[s?n.jsx(K,{title:ge({id:"CheckoutForm.headingContactInformation",defaultMessage:"Contact information"})}):null,n.jsx(O.Field,{name:"email",children:i=>{const h=i.getMeta().errors.length>0&&(i.getMeta().isBlurred||i.getMeta().isPristine);return n.jsxs("div",{children:[n.jsxs("label",{htmlFor:i.name,className:"flex flex-col",children:[n.jsx("span",{className:"color-[rgb(48, 49, 61)] mb-[0.25rem] text-[0.93rem]",children:n.jsx(V,{id:"CheckoutForm.inputLabelEmail",defaultMessage:"Email"})}),n.jsx("input",{ref:B,id:i.name,disabled:w,name:i.name,onBlur:i.handleBlur,onChange:b=>{i.setMeta(U=>({...U,isBlurred:!1})),i.handleChange(b.target.value)},type:"email",value:i.state.value,className:Y("color-[rgb(48, 49, 61)] animate-stripeInputShow rounded-[5px] p-3 outline-none focus:border-white",{"bg-[rgb(247,247,247)]":w,"border-[#df1b41] shadow-none focus:border-[#0570de] focus:shadow-[0px_1px_1px_rgba(0,0,0,0.03),0px_3px_6px_rgba(0,0,0,0.02),0_0_0_3px_hsla(210,96%,45%,0.25),0_1px_1px_0_rgba(0,0,0,0.08)]":h,"border-[#e6e6e6] shadow-[0px_1px_1px_rgba(0,0,0,0.03),_0px_3px_6px_rgba(0,0,0,0.02)] focus:border-[#0570de] focus:shadow-[0px_1px_1px_rgba(0,0,0,0.03),0px_3px_6px_rgba(0,0,0,0.02),0_0_0_3px_hsla(210,96%,45%,0.25),0_1px_1px_0_rgba(0,0,0,0.08)]":!h}),style:{transition:"background 0.15s ease, border 0.15s ease, box-shadow 0.15s ease, color 0.15s ease",backgroundColor:w?"rgb(247,247,247)":""}})]}),n.jsx(Ee,{errors:i.state.meta.errors.filter(b=>!ve(b)),shouldShowErrors:h})]})}})]}),n.jsxs(W,{ref:N,children:[n.jsx(K,{title:ge({id:"CheckoutForm.headingPaymentMethod",defaultMessage:"Payment method"})}),n.jsx(O.Field,{name:"hasCompletePaymentElement",children:i=>n.jsx(St,{options:{layout:"tabs"},onChange:({complete:m})=>i.handleChange(m)})})]}),n.jsxs(W,{ref:y,children:[n.jsx(K,{title:{id:"CheckoutForm.headingBillingAddress",defaultMessage:"Billing address",description:"Heading for the section of the checkout where we collect contact information"}}),n.jsx(O.Field,{name:"hasCompleteBillingAddress",children:i=>n.jsx(Ct,{options:{mode:"billing"},onChange:({complete:m})=>i.handleChange(m)})})]}),n.jsx("div",{children:n.jsx(xe,{id:"subscription-tax-id",label:n.jsx("div",{className:"Text-color--gray600 text-[13px]",children:n.jsx(V,{id:"CheckoutForm.purchaseAsBusinessLabel",defaultMessage:"Purchase as business"})}),onChange:()=>{l(!p)}})}),p&&n.jsxs(W,{children:[n.jsx(K,{title:{id:"CheckoutForm.headingVATInformation",description:"Heading for the section of the checkout where we collect VAT information",defaultMessage:"VAT information"}}),n.jsx(tt,{businessName:x,taxIdType:j,taxIdValue:R,onBusinessNameChange:_,onTaxIdTypeChange:d,onTaxIdValueChange:L}),E&&n.jsx("div",{className:"mt-1 text-[0.93rem] text-[#df1b41]",style:{transition:"height 0.35s ease 0s"},children:E})]}),n.jsx(W,{ref:q,children:n.jsx(O.Field,{name:"hasAcceptedTermsOfService",children:i=>{const m=i.state.meta.isTouched&&i.state.meta.errors.length>0;return n.jsxs("div",{children:[n.jsx(xe,{id:"subscription-tos",className:"self-start",style:{borderColor:m?"#df1b41":void 0},checked:i.state.value,onChange:h=>i.handleChange(h.currentTarget.checked),label:n.jsx(jt,{})}),n.jsx(Ee,{errors:i.state.meta.errors.filter(h=>!ve(h)),shouldShowErrors:m})]})}})}),o&&n.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-[13px] text-red-700",children:o}),n.jsx(O.Subscribe,{children:i=>n.jsx("button",{disabled:i.isSubmitting,type:"submit",className:Y("flex h-[44px] items-center justify-center rounded-md border-none bg-[rgb(16,163,117)] p-0 font-medium shadow-[inset_0_0_0_1px_rgba(50,50,93,0.1),0_2px_5px_0_rgba(50,50,93,0.1),0_1px_1px_0_rgba(0,0,0,0.07)] outline-none",{"text-[rgba(255,255,255,1)]":i.isValid,"text-[rgba(255,255,255,0.6)]":!i.isValid}),children:i.isSubmitting?n.jsx(Ye,{}):n.jsx(V,{id:"CheckoutForm.buttonSubscribe",defaultMessage:"Subscribe"})})})]})})}const W=u.forwardRef(({children:r},e)=>n.jsx("div",{ref:e,className:"flex flex-col gap-4",children:r}));W.displayName="CheckoutFormSection";function K({className:r,title:e}){return n.jsx("div",{className:Y("font-medium",r),children:n.jsx(V,{...e})})}function Ee({errors:r,shouldShowErrors:e}){return n.jsx("div",{className:"mt-1 text-[0.93rem] text-[#df1b41]",style:{transition:"height 0.35s ease 0s"},children:e&&r.map(t=>n.jsx("p",{children:t},t))})}function jt(){return n.jsx("div",{className:"Text-color--gray600 text-[13px]",children:n.jsx(V,{id:"CheckoutForm.termsLabel",defaultMessage:"You'll be charged the amount and at the frequency listed above until you cancel. We may change our prices as described in our <termsOfUseLink>Terms of Use</termsOfUseLink>. You can <cancelAnytimeLink>cancel any time</cancelAnytimeLink>. By subscribing, you agree to OpenAI's <termsOfUseLink>Terms of Use</termsOfUseLink> and <privacyPolicyLink>Privacy Policy</privacyPolicyLink>, and you authorize us to store your payment method for renewals and other purchases.",values:{termsOfUseLink:r=>n.jsx("a",{className:"Terms-link",href:"https://openai.com/terms/",rel:"noopener noreferrer",target:"_blank",children:r}),cancelAnytimeLink:r=>n.jsx("a",{className:"Terms-link",href:"https://help.openai.com/en/articles/7232927-how-do-i-cancel-my-chatgpt-plus-subscription",rel:"noopener noreferrer",target:"_blank",children:r}),privacyPolicyLink:r=>n.jsx("a",{className:"Terms-link",href:"https://openai.com/privacy/",rel:"noopener noreferrer",target:"_blank",children:r})}})})}const Et="{{.assetPrefix}}/assets/logo-c8firrye.webp",wt={src:Et};function Pt({className:r}){const e=Je();return n.jsxs("button",{type:"button",onClick:()=>e("/"),className:Y("group relative flex w-[100px] items-center focus:outline-none",r),children:[n.jsx("div",{className:"flex items-center text-[hsla(0,0%,10%,0.4)] group-hover:text-[hsla(0,0%,10%,0.8)] lg:absolute lg:-start-5 lg:top-1",children:n.jsx(ze,{className:"icon-sm me-2 transition-colors duration-100 ease-in-out"})}),n.jsx("img",{src:wt.src,alt:"",className:"w-full"})]})}function Be({amountMinorUnits:r,currency:e}){const t=r/100;return new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(t)}function _t({className:r}){return n.jsxs("div",{className:r,children:[n.jsx(Pt,{className:"mb-5 lg:mb-8"}),n.jsx(Mt,{className:"mb-7"}),n.jsx(It,{})]})}function Mt({className:r}){const e=de(),t=e.lineItems[0].name,s=Be({amountMinorUnits:e.total.total.minorUnitsAmount,currency:e.currency}),a=e.recurring?.interval==="month"?F.periodPricePerMonth:F.periodPricePerYear;return n.jsxs("div",{className:Y("text-center lg:text-start",r),children:[n.jsx("div",{className:"Text-color--gray500 font-medium",children:n.jsx(V,{...F.checkoutHeadingForSubscription,values:{lineItem:t}})}),n.jsxs("div",{className:"font-semibold",children:[n.jsx("span",{className:"me-2 text-[28px] lg:text-[36px]",children:s}),n.jsx("span",{className:"Text-color--gray500 text-[14px]",children:n.jsx(V,{...a})})]})]})}function It(){const r=de(),e=ee(),t=r.currency,s=r.total.subtotal.minorUnitsAmount-r.total.taxInclusive.minorUnitsAmount,a=r.lineItems.map(o=>{const c=At(o);return n.jsx(J,{amountMinorUnits:o.subtotal.minorUnitsAmount,currency:t,subtitle:c?e.formatMessage(c):"",title:o.name},o.id)});return n.jsxs("div",{className:"flex flex-col gap-[16px]",children:[a,n.jsx(we,{}),n.jsx(J,{amountClassName:"font-semibold",amountMinorUnits:r.total.subtotal.minorUnitsAmount,currency:t,title:e.formatMessage(F.subtotal)}),n.jsx(Nt,{currency:t,taxAmounts:r.taxAmounts??[],taxExclusiveAmount:s}),n.jsx(we,{}),n.jsx(J,{amountClassName:"text-base font-semibold",amountMinorUnits:r.total.total.minorUnitsAmount,currency:t,title:e.formatMessage(F.totalDueToday)})]})}function Nt({taxAmounts:r,currency:e,taxExclusiveAmount:t}){const s=ee();return ye(r)?n.jsx(J,{amountMinorUnits:0,currency:e,title:s.formatMessage(F.tax)}):r.map(a=>{const o=ye(a.displayName)?s.formatMessage(F.tax):a.displayName,l=(a.minorUnitsAmount/t*100).toFixed(1).replace(/\.?0+$/,""),x=`${o} (${l}%)`;return n.jsx(J,{amountMinorUnits:a.minorUnitsAmount,currency:e,title:x},x)})}function J({amountClassName:r,amountMinorUnits:e,currency:t,subtitle:s,title:a}){return n.jsxs("div",{className:"flex justify-between text-[14px]",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:a}),s?n.jsx("span",{className:"Text-color--gray400 text-[12px]",children:s}):null]}),n.jsx("span",{className:r,children:Be({amountMinorUnits:e,currency:t})})]})}function we(){return n.jsx("div",{className:"Border-top-gray50"})}function At(r){if(r.recurring)switch(r.recurring.interval){case"month":return F.billingPeriodMonthly;case"year":return F.billingPeriodYearly;default:return oe.addError("unexpected_interval_for_line_item",{interval:r.recurring.interval}),null}return null}const F=Ie({checkoutHeadingForSubscription:{id:"InvoiceSummary.checkoutHeadingForSubscription",defaultMessage:"Subscribe to {lineItem}"},periodPricePerMonth:{id:"InvoiceSummary.periodPricePerMonth",defaultMessage:"per month"},periodPricePerYear:{id:"InvoiceSummary.periodPricePerYear",defaultMessage:"per year"},billingPeriodMonthly:{id:"InvoiceSummary.billingPeriodMonthly",defaultMessage:"Billed monthly"},billingPeriodYearly:{id:"InvoiceSummary.billingPeriodYearly",defaultMessage:"Billed yearly"},subtotal:{id:"InvoiceSummary.subtotal",defaultMessage:"Subtotal"},totalDueToday:{id:"InvoiceSummary.totalDueToday",defaultMessage:"Total due today"},tax:{id:"InvoiceSummary.tax",defaultMessage:"Tax"}}),Tt=()=>bt()?n.jsxs("div",{className:"checkout-page flex h-full flex-col items-center gap-12 overflow-y-auto bg-white px-4 lg:flex-row lg:items-start lg:justify-center lg:gap-0 lg:px-0",children:[n.jsx("div",{className:"flex w-full justify-center pt-4 lg:min-h-full lg:flex-1 lg:justify-end lg:pe-20 lg:pt-12 lg:pb-12",children:n.jsx(_t,{className:"w-full max-w-[380px]"})}),n.jsx("div",{className:"pb-12 lg:min-h-full lg:flex-1 lg:ps-20 lg:pt-12 lg:shadow-[15px_0_30px_0_rgba(0,0,0,0.18)]",children:n.jsx(kt,{className:"w-full max-w-[380px]"})})]}):null;function Z(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Z=function(e){return typeof e}:Z=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(r)}var Ue="basil",Ot=function(e){return e===3?"v3":e},Ve="https://js.stripe.com",Rt="".concat(Ve,"/").concat(Ue,"/stripe.js"),Lt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ft=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Pe="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Bt=function(e){return Lt.test(e)||Ft.test(e)},Ut=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Ve,'"]')),t=0;t<e.length;t++){var s=e[t];if(Bt(s.src))return s}return null},_e=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(Rt).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(s),s},Vt=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.0",startTime:t})},D=null,G=null,H=null,qt=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Wt=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Yt=function(e){return D!==null?D:(D=new Promise(function(t,s){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn(Pe),window.Stripe){t(window.Stripe);return}try{var a=Ut();if(a&&e)console.warn(Pe);else if(!a)a=_e(e);else if(a&&H!==null&&G!==null){var o;a.removeEventListener("load",H),a.removeEventListener("error",G),(o=a.parentNode)===null||o===void 0||o.removeChild(a),a=_e(e)}H=Wt(t,s),G=qt(s),a.addEventListener("load",H),a.addEventListener("error",G)}catch(c){s(c);return}}),D.catch(function(t){return D=null,Promise.reject(t)}))},$t=function(e,t,s){if(e===null)return null;var a=t[0],o=a.match(/^pk_test/),c=Ot(e.version),p=Ue;o&&c!==p&&console.warn("Stripe.js@".concat(c," was loaded on the page, but @stripe/stripe-js@").concat("7.3.0"," expected Stripe.js@").concat(p,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=e.apply(void 0,t);return Vt(l,s),l},Me=function(e){var t=`invalid load parameters; expected object of shape

    {advancedFraudSignals: boolean}

but received

    `.concat(JSON.stringify(e),`
`);if(e===null||Z(e)!=="object")throw new Error(t);if(Object.keys(e).length===1&&typeof e.advancedFraudSignals=="boolean")return e;throw new Error(t)},Q,ce=!1,qe=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];ce=!0;var a=Date.now();return Yt(Q).then(function(o){return $t(o,t,a)})};qe.setLoadParameters=function(r){if(ce&&Q){var e=Me(r),t=Object.keys(e),s=t.reduce(function(a,o){var c;return a&&r[o]===((c=Q)===null||c===void 0?void 0:c[o])},!0);if(s)return}if(ce)throw new Error("You cannot change load parameters after calling loadStripe");Q=Me(r)};const Zt=De(function(){const e=Ke(),t=e.publishable_key,s=k.useMemo(()=>qe(t,{betas:["custom_checkout_beta_6"],locale:"auto"}),[t]);switch(e.tag){case"hosted_checkout_session":return window.location.href=e.url,null;case"custom_checkout_session":{const a=e.client_secret;return n.jsx(Fe,{stripe:s,options:{fetchClientSecret:()=>Promise.resolve(a),elementsOptions:{appearance:{rules:{".Input--invalid":{boxShadow:"none"}}}}},children:n.jsx(Tt,{})})}}});export{Zt as default};
//# sourceMappingURL=lry9007giqvuuhfo.js.map
