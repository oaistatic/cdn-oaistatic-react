const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dkuu01dkkv9xyabr.js","assets/n3epq09dut36rmi2.js","assets/nqrmgk5te3uzwsyz.js","assets/root-nu0t8wee.css","assets/c8luebb1ao3w0kvy.js","assets/m5vm8n291yphqt2r.js","assets/uox23aig6gp6se2y.js","assets/conversation-small-cqkvcue6.css","assets/gfoysyc34lqmw43c.js","assets/lth5uuz88qwgi4it.js","assets/ofg6pv1c2un8jq6p.js","assets/gfex7240qlmgxew5.js","assets/jsnptf63edu6k32a.js","assets/dnyjnsewv99rujtf.js","assets/e4sjbad9hyqt73xe.js","assets/dkr8jkx9n88ez7ho.js","assets/nnldvg4yjd3ynnqu.js","assets/h446s733avqwi4v2.js","assets/hk3emygtpn0flzgl.js","assets/nm5ivxaismwgb6gf.js","assets/jit20xrzecwhc2dk.js","assets/hi5bz78ars1jrvhf.js","assets/kvu2figoephb8btv.js","assets/c28qyodqgdwibcia.js","assets/m20879eh9weiczmj.js","assets/b2dwdp2zgpewduyl.js","assets/c5dp8ki3tm96qea2.js","assets/euq7ybw4dhrsufo2.js"])))=>i.map(i=>d[i]);
import{af as $e,f8 as aa,c as A,aj as U,aX as sa,B as Ae,W as qe,g as Re,j as oa,aG as na,o as ia,as as ve,gQ as ra,aI as B,aJ as G,ai as bt,bE as St,u as la,aV as wt,c2 as xe,gp as ca,c6 as ee,c7 as te,c4 as ct,c5 as dt,ae as pe,ao as Ke,ca as da,b as Ct,d as ua,p as Ee,dk as Je,cU as ha,dh as jt,s as Mt,X as _t,_ as kt,bd as Ye,ec as ga,e as ma,bQ as pa,bU as fa,at as ut,h9 as xa,ah as ya,gu as va,eJ as ba,aL as Sa,ad as wa,eU as Ca,et as ja,aY as Ma,ag as ae,gH as _a}from"./nqrmgk5te3uzwsyz.js";import{r,d as Ze,a as Xe,j as e,a5 as Be,M as L,f as q,g as Nt,l as ka,L as Na,u as Ta,v as Aa,R as Ea,p as Pa}from"./n3epq09dut36rmi2.js";import{u as Tt,P as Ia}from"./e4sjbad9hyqt73xe.js";import{C as et,e as tt,u as be}from"./dnyjnsewv99rujtf.js";import{fY as At,oI as Se,jO as Ra,dc as La,nT as Et,jQ as Wa,jR as Pt,jT as Oa,j as ht,jS as Ga,oJ as Ha,kt as Da,by as gt,oK as Ua,bo as Fa,gP as It,dw as za,dx as Va,oL as qa,oM as Te,aG as fe,kX as Fe,eJ as Ya,e$ as Ba,fa as Qa,bx as $a,bm as Ka,dy as Ja,t as Qe,oN as Za,dz as Xa,P as Rt,F as es,gR as Lt,oO as Wt,oP as mt,oQ as ts,oR as as,oS as at,n3 as Ot,oT as ss,c1 as os,oU as ye,e as Gt,fG as ns,fs as is,U as Pe,J as rs,oV as ls,oW as cs,gM as ds,gO as us,gQ as hs,oX as pt,oY as gs,as as Ht,oZ as ms,ki as ps,o_ as fs,o$ as xs,p0 as ys,p1 as vs,l2 as bs,fv as Ss,dk as ws,it as Dt,p2 as Cs,kd as N,a_ as R,iA as js,p3 as Ms,iz as _s,cs as Ut,cY as ks,p4 as Ns,ko as ft,d as Ts,p5 as As,p6 as Es,p7 as Ps,p8 as Is,z as Ft,eK as Rs,N as st,u as Ls,p9 as zt,e3 as Ws,pa as Os,Q as Gs,pb as Hs,gW as Ds,m3 as Us,fN as Fs,pc as zs,h_ as Vs,g_ as qs,g$ as xt,hz as Ys,R as Bs,gZ as Qs,pd as $s,df as Ks,lo as Js,gV as Zs,pe as Xs,pf as yt,pg as eo,ph as to,fm as ao,pi as so,mp as Vt,pj as oo,pk as no,pl as io,n7 as ro,jg as lo,pm as co,pn as uo,dm as ho,po as go,pp as mo,pq as po,pr as fo,ps as xo,pt as yo,pu as vo,pv as bo,pw as So,px as wo}from"./uox23aig6gp6se2y.js";import{C as Co,N as jo,g as Mo}from"./gfex7240qlmgxew5.js";import{b as _o}from"./he8nwqvd8i1qrsxh.js";import{u as ko,b as No}from"./hi5bz78ars1jrvhf.js";import{I as To,P as Ao,M as Eo,F as Po,T as Io}from"./jvs80tn6co0ttzp0.js";import{b as Ro}from"./jit20xrzecwhc2dk.js";import{T as Lo}from"./ex4mh6ngabphh37h.js";import"./gbfmb6n7vmtt0mld.js";const Wo=({assetPointer:t,isInFocusMode$:a,serverThreadId:s,transformationId:i,width:o,height:n,onEdit:c})=>{const d=At(),[u,v]=r.useState(!1),[S]=$e(s,m=>[m?.modelId]),g=Tt(s),w=Se(),p=Ze(),h=Xe(),l=r.useRef(null);r.useEffect(()=>{To.prefetch()},[]),r.useEffect(()=>{v(!1),a?.set(!1)},[t,a]),r.useEffect(()=>aa(()=>{a&&!a()&&v(!1)}),[a]),Ra(r.useMemo(()=>({image:{asset_pointer:t,metadata:{dalle:{gen_id:i},generation:{gen_id:i}},height:n,width:o},currentDrawnShape:null,onCleared:()=>{},getImageData:()=>{}}),[i,t,n,o]));const b=m=>{w.transitionToPage({type:"conversation",value:void 0},()=>{c?.(),Da(p,h,s,void 0,!0),g(m)})},x=La();return e.jsx(Et,{children:e.jsx(Be.div,{layout:!d,transition:{type:"spring",duration:.2},className:A(u?"w-full rounded-3xl":"mx-auto rounded-full"),children:u?e.jsx(Wa,{value:{isImageGenEditor:!0,isInpainting:!1,onCancelInpaint:()=>{}},children:e.jsx(et,{clientThreadId:s,children:e.jsx(Ao,{clientThreadId:s,currentModelId:S??Pt(void 0).id,disableDraftPersistence:!0,onRequestCompletion:async m=>{a?.set(!1),U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_edit_submitted","chatgpt_web_image_library_lightbox_image_edit_submitted"),sa(s)==null&&await(l.current??ht(s)),b(await Ga(m))},onContinueGenerating:m=>b(Oa(m)),hideHeader:!0,isNewThread:!1})})}):e.jsx(Ae,{color:"secondary",size:x?"large":void 0,className:"px-4 max-md:min-w-[50vw]",onClick:()=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_composer_opened","chatgpt_web_image_library_lightbox_image_composer_opened"),v(!0),a?.set(!0),l.current=ht(s).finally(()=>{l.current=null})},icon:x?void 0:Ha,children:e.jsx(Be.div,{initial:d?!1:{opacity:0},animate:{opacity:1},children:e.jsx(L,{id:"BD4ZLh",defaultMessage:"Edit image"})})})})})},Oo=({assetPointer:t,serverThreadId:a,messageId:s})=>{const i=q(),[o,n]=r.useState(!1),c=ko({assetPointer:t,clientThreadId:a,imageGenMessageId:s}),d=r.useCallback(async()=>{n(!0);try{await c()}finally{n(!1)}U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_share_clicked","chatgpt_web_image_library_lightbox_image_share_clicked")},[c]),u=i.formatMessage({id:"lqgWN2",defaultMessage:"Share"});return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"max-md:hidden",color:"secondary",icon:o?qe:gt,onClick:d,disabled:o,children:u}),e.jsx(Ae,{color:"ghost",className:"text-token-text-secondary w-10 md:hidden",icon:o?qe:gt,size:"xl",onClick:d,label:u,disabled:o})]})},Go=({initialIndex:t,includeArchived:a,onScrollToEnd:s,onClose:i})=>{const o=q(),n=Re(),c=oa(n).checkGate("1520205231"),{archiveMutation:d}=Ua(a),u=Fa(),[v]=r.useState(()=>na(!1)),S=Se(),g=Ze(),{images:w}=It(a);return e.jsxs(za,{imageList:w,initialIndex:t??0,onClose:i,isInFocusMode$:v,onScrollToEnd:s,children:[e.jsx(Va,{children:({title:p,createdAt:h})=>e.jsxs("div",{className:"flex min-h-12 min-w-0 flex-col items-center max-md:h-full",children:[e.jsx("h2",{className:"text-token-text-primary max-w-full min-w-0 grow justify-center self-start truncate text-base text-balance max-md:flex max-md:items-center max-md:ps-2",children:e.jsx("span",{className:"line-clamp-2",children:p??e.jsx(L,{id:"OIDfvR",defaultMessage:"Image Generation"})})}),h&&e.jsx("span",{className:"text-token-text-secondary text-sm max-md:hidden",children:h.toDateString()})]})}),e.jsxs(qa,{children:[e.jsx(Te,{children:({conversationId:p,messageId:h})=>e.jsx(fe,{label:o.formatMessage(V.openInChat),triggerAs:null,children:e.jsx(Fe,{className:"aspect-square",icon:Ya,onClick:l=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),l.preventDefault(),S.addClassToCurrentTransition(["from-lightbox","to-conversation"]),S.transitionToPage({type:"conversation",value:void 0},async()=>{i(null),await g(`/c/${p}?message=${h}`,{preventScrollReset:!0})})},"aria-label":o.formatMessage(V.openInChat)})})}),c&&e.jsx(Te,{children:({id:p,archived:h})=>e.jsx(fe,{label:o.formatMessage(h?V.unarchive:V.archive),triggerAs:null,children:e.jsx(Fe,{className:"aspect-square",icon:h?Qa:Ba,onClick:()=>{U.logEventWithStatsig(h?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked",h?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked"),d.mutate({imageId:p,operation:h?"unarchive":"archive"})},"aria-label":o.formatMessage(h?V.unarchive:V.archive)})})}),e.jsx(Te,{children:({url:p,title:h})=>e.jsx(fe,{label:o.formatMessage(V.download),triggerAs:null,children:e.jsx(Fe,{className:"aspect-square",icon:$a,onClick:()=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),Ka({url:p,fileName:`${h??o.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"})}.png`})},"aria-label":o.formatMessage(V.download)})})}),u()&&e.jsx(Te,{children:({assetPointer:p,conversationId:h,messageId:l})=>!h||!l?null:e.jsx(Oo,{assetPointer:p,serverThreadId:h,messageId:l})})]}),e.jsx(Ja,{children:({url:p,width:h,height:l,title:b,position:x})=>e.jsx("img",{className:Za("bg-tertiary block h-fit max-h-full w-auto rounded-lg object-contain shadow-xl max-md:rounded-none max-md:shadow-none",x==="current"&&"[view-transition-name:var(--vt-active-image)]"),style:x&&x!=="current"?{viewTransitionName:`var(--vt-image-${x})`}:void 0,src:Qe(p),width:h,tabIndex:0,height:l,alt:b??""})}),e.jsx(Xa,{children:({width:p,height:h,assetPointer:l,conversationId:b,transformationId:x})=>b&&l&&e.jsx(Wo,{isInFocusMode$:v,onEdit:()=>i(null),width:p,height:h,assetPointer:l,serverThreadId:b,transformationId:x})})]})},V=Nt({download:{id:"Z23tMl",defaultMessage:"Download image"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"},archive:{id:"yOqxdz",defaultMessage:"Hide image"},unarchive:{id:"yEUKZl",defaultMessage:"Show image"}}),Ho=({hasMoreImages:t,count:a,images:s,includeArchived:i,isFetchingMore:o,onScrollToEnd:n})=>{const c=t?Math.max((a??0)-(s.length??0),0):0,[d,u]=r.useState(!1),[v,S]=r.useState(null),g=Se(),w=Re(),{clientThreadId:p}=tt(),h=r.useCallback(l=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened"),u(!0),S(l),g.transitionToPage({type:"lightbox",value:void 0},()=>{ia(w,({closeModal:b})=>e.jsx(Rt,{clientThreadId:p,children:e.jsx(es,{children:e.jsx(Lt,{children:e.jsx(Go,{includeArchived:i,onClose:x=>{if(x==null){b();return}Wt({update:()=>{b(),S(x),u(!0)},className:"from-lightbox",forceFlushSync:!0}).finished.then(()=>u(!1))},initialIndex:l,onScrollToEnd:n})})})})),u(!1)})},[p,w,i,n,g]);return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-1 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:s.map(({url:l,thumbnail:b,width:x,height:m,title:_=null},C)=>e.jsx(mt,{index:C,active:d&&v===C,src:Qe(l),onClick:h,thumbnail:Qe(b),width:x,height:m,alt:_,children:C===s.length-1&&e.jsx(ts,{onScrollToEnd:n})},C)).concat(new Array(c).fill(null).map((l,b)=>{const x=s.length+b;return e.jsx(mt,{index:x,isPlaceholder:!0,active:!1},x)}))}),e.jsx("div",{className:"flex h-8 items-center justify-center",children:t&&o&&e.jsx(qe,{})})]})};function Do(t){const{clientThreadId:a}=t;return e.jsx(et,{clientThreadId:a,children:e.jsx(Fo,{...t})})}function Uo({clientThreadId:t,headlineOption:a,currentModelId:s,isModelLoaded:i}){const o=at(),n=os(),c=be(),{isFocused:d,autocompletions:u}=wt(c.store),v=d&&u.length>0,S=ye(),g=xe(S.isImageGenLandingPageEnabled$);return e.jsxs(Be.div,{initial:{opacity:0},animate:{opacity:v?0:1},exit:{opacity:0},transition:{duration:.1},className:A("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden",n?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",v?"pointer-events-none":"",o?"@lg/thread:hidden":"lg:hidden"),children:[a==="CHATGPT_LOGO"?e.jsx(bt,{className:"inline-block h-12 w-12"}):e.jsx(qt,{headlineOption:a}),!g&&e.jsx(Eo,{isModelLoaded:i,currentModelId:s,clientThreadId:t})]})}function Fo({clientThreadId:t,currentModelId:a,isModelLoaded:s}){const i=be(),{isUnauthenticated:o}=ve();ra(),as(i);const{layer:n}=B("4031588851"),{layer:c}=B("3533083032",{shouldLogExposure:!1}),d=o?c:n,u=at(),v=d.get("headline_option","HELP_WITH"),w=Ot().has(G.Research)?k.deepResearchPlaceholder:void 0;return e.jsxs("div",{className:A("flex items-center justify-center",u?"@lg/thread:items-end":"lg:items-end"),children:[e.jsx("div",{className:A("mb-7 hidden text-center @lg/thread:block",u?"@lg/thread:block":"lg:block"),children:v==="CHATGPT_LOGO"?e.jsx(bt,{className:"inline-block h-12 w-12"}):e.jsx(qt,{headlineOption:v,overrideMessage:w})}),e.jsx(Uo,{headlineOption:v,clientThreadId:t,isModelLoaded:s,currentModelId:a})]})}function zo({headlineOption:t,overrideMessage:a}){function s({name:m}){return e.jsx(fe,{label:n.formatMessage(k.editNicknameTooltip),delayDuration:300,side:"top",children:e.jsx("button",{onClick:()=>{Pe.setAutoHighlightNicknameInput(!0),Pe.openModal(rs.UserContext)},style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:_=>{_.currentTarget.className="text-token-text-secondary"},onMouseLeave:_=>{_.currentTarget.className="text-inherit"},children:m})})}function i(){const m=[],_=[];m.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),_.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...m);const C=_[Math.floor(Math.random()*_.length)],T=`${m[Math.floor(Math.random()*m.length)]} | ${C}`;ee.setCookie(te.headlineMessage,T)}function o(){const m=ee.getCookie(te.GreetingName),C=ee.getCookie(te.headlineMessage)?.split("|"),E=C?.[0]?.trim(),T=C?.[1]?.trim();return{cookieName:m,isReadyForPersonalized:!!m&&m.length<=d,headline:E,namedHeadline:T}}const n=q(),{layer:c}=B("1704793646"),d=c.get("name_char_limit",20),[u,v]=r.useState(o),{isUnauthenticated:S}=ve(),g=Gt(),p=ns(!S&&!!g)?.data,h=is(),l=c.get("greeting_web",!1),b=c.get("full_name_llm",!1);r.useEffect(()=>{if(l&&h){if(g&&p){const m=ca(p,g,b);ee.setCookie(te.GreetingName,m),ct.count(dt.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}i()}else ee.deleteCookie(te.GreetingName),ee.deleteCookie(te.headlineMessage)},[p,g,l,b,h]),r.useEffect(()=>{const m=()=>{if(l&&h){const{cookieName:_,isReadyForPersonalized:C}=o();v(E=>({...E,cookieName:_,isReadyForPersonalized:C}))}};return window.addEventListener("refreshGreeting",m),()=>window.removeEventListener("refreshGreeting",m)}),r.useEffect(()=>{l&&h&&ct.count(dt.MOONSHINE,"splashScreenV2.greeting_shown_web")},[l,h]);let x;return a?x=n.formatMessage(a):u.isReadyForPersonalized&&l?x=e.jsx(e.Fragment,{children:e.jsx(L,{...ze[u.namedHeadline??t].withName,values:{name:e.jsx(s,{name:u.cookieName??""},"name")}})}):l?x=n.formatMessage(ze[u.headline??t].original):x=n.formatMessage(ze[t].original),x}function qt({headlineOption:t,overrideMessage:a}){const s=St(),i=r.useRef(null),[o,n]=r.useState({isTempChatVisible:s,titleTranslate:0});return la(()=>{n({isTempChatVisible:s,titleTranslate:s?-((i.current?.offsetHeight??0)-40):0})},[s]),e.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:e.jsx("div",{children:e.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:{viewTransitionName:"var(--vt-splash-screen-headline)"},children:[e.jsx("h1",{className:A("inline-flex min-h-10.5 items-baseline text-[28px] leading-[34px] font-normal tracking-[0.38px] whitespace-pre-wrap motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",o.isTempChatVisible?"invisible opacity-0":"opacity-100"),"aria-hidden":s,style:{transform:`translateY(${o.titleTranslate}px)`},children:e.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:e.jsx(zo,{headlineOption:t,overrideMessage:a})})}),e.jsx("div",{className:A("absolute bottom-0 motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",o.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-10 opacity-0"),"aria-hidden":!s,ref:i,children:e.jsx(ss,{})})]})})})}const k=Nt({whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"}}),ze={HELP_WITH:{original:k.whatCanIHelpWith,withName:k.whatCanIHelpWithWithName},WHERE_TO_START:{original:k.whereShouldWeStart,withName:k.whereShouldWeStartWithName},ASK_CHATGPT:{original:k.askChatgptAnything,withName:k.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:k.howCanIHelp,withName:k.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:k.goodToSeeYouWithName,withName:k.goodToSeeYouWithName},DIVE_IN:{original:k.diveInWithName,withName:k.diveInWithName},READY_WHEN_YOU_ARE:{original:k.readyWhenYouAre,withName:k.readyWhenYouAre},ON_YOUR_MIND:{original:k.onYourMind,withName:k.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:k.whatAreYouWorkingOn,withName:k.whatAreYouWorkingOn},AGENDA_TODAY:{original:k.agendaToday,withName:k.agendaToday},SHOULD_WE_BEGIN:{original:k.shouldWeBegin,withName:k.shouldWeBegin}};function Vo({onClick:t}){return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("button",{onClick:t,"aria-labelledby":"upload-image-label",className:"relative",id:"upload-image-button",type:"button",children:e.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-main-surface-secondary border-token-border-default z-1 flex aspect-square items-center justify-center overflow-hidden rounded-2xl border p-5 text-xs transition-[transform_box-shadow] duration-[0.24s] select-none hover:motion-safe:scale-105",children:e.jsxs("div",{className:"text-token-text-tertiary inline-flex items-center justify-center",children:[e.jsx(gs,{"aria-label":"",className:"h-12 w-12"}),e.jsx(Ht,{"aria-label":"",className:"absolute start-1/2 top-1/2 ms-1 mt-1 h-8 w-8"})]})})}),e.jsx("div",{id:"upload-image-label",className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:e.jsx(L,{id:"DJ+4dI",defaultMessage:"Upload an image"})})]})}function vt({card:t,className:a,label:s}){const{formatMessage:i}=q();return typeof t.url=="string"?e.jsx("img",{src:t.url,alt:i(t.prompt),className:a}):e.jsxs("picture",{className:a,children:[t.url.map(({type:o,url:n})=>o==="jpg"?null:e.jsx("source",{srcSet:n,type:`image/${o}`},n)),e.jsx("img",{"aria-label":s,src:t.url[0].url,alt:i(t.prompt),className:A(a,"h-full w-full object-cover")})]})}function qo({type:t,images:a,onClick:s}){const[i,o]=r.useState(0),{formatMessage:n}=q(),c=i+1>=a.length?0:i+1,d=a[i].prompt;return e.jsxs("div",{children:[e.jsxs("div",{className:"group/stack relative flex justify-center",children:[e.jsx("div",{onClick:()=>{const u=i+1>=a.length?0:i+1;o(u)},className:A("bg-token-bg-primary relative z-2 grid aspect-square h-full overflow-clip rounded-xl text-xs shadow-lg transition-transform duration-[0.24s]","group-hover/stack:-translate-x-2 group-hover/stack:rotate-[-3deg] group-hover/stack:shadow-md",a.length>1&&"cursor-pointer"),children:e.jsx(vt,{card:a[i],label:n(d)})},i),e.jsx("div",{className:A("ease-in-expo ease-spring-standard absolute top-0 left-0! flex aspect-square w-full translate-y-2 rotate-[2deg] opacity-40 transition-transform duration-[0.24s]","group-hover/stack:translate-x-2 group-hover/stack:translate-y-[0px] group-hover/stack:rotate-[4deg]"),children:e.jsx(vt,{card:a[c],label:n(d),className:A(ms.fadeScale,"aspect-square w-full overflow-hidden rounded-xl shadow-xl")})},c),e.jsx("button",{id:n(d),onClick:()=>s(n(d)),tabIndex:0,className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-tertiary can-hover:z-0 absolute bottom-6 flex w-fit items-center justify-center rounded-full border px-3 py-1 text-sm shadow-md duration-[0.24s] group-hover/stack:z-11 focus-visible:z-11 active:scale-98 motion-safe:transition-[background-color,transform]",children:e.jsx(L,{id:"wk6Ayk",defaultMessage:"Try this prompt"})})]}),t&&e.jsx("div",{className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:n(t)})]})}function Yo({onCardClick:t,onUploadCardClick:a}){const{value:s}=pe("2640502720"),i=q(),n=Ke()?.isWorkspacePlan()?ls:cs,c=ye(),[d,u]=r.useState(!1),{images:v,hasNextPage:S,isLoading:g,isFetchingNextPage:w,fetchNextPage:p}=It(d),{data:h,isLoading:l}=ds(),b=be(),x=h?.images_count,m=!!x,_=!!h?.archived_images_count,E=!l&&!m,T=ka({id:"Gd9T7H",defaultMessage:"My Library"});return e.jsxs("div",{className:"mx-auto flex w-full flex-col items-center",children:[e.jsxs("div",{className:"my-6 grid w-full grid-cols-2 gap-4 gap-y-10 max-md:px-4 sm:grid-cols-3 md:grid-cols-4",children:[e.jsx(Vo,{onClick:a}),n.map(f=>e.jsx(qo,{type:f.type,images:f.images,onClick:H=>{t(H),f.needsUpload&&c.showUploadSuggestion$.set(!0)}},String(f.type.defaultMessage)))]}),e.jsx("div",{className:A("z-50 mt-4 flex w-full items-center justify-between max-md:px-4",s&&"sticky top-[9px]"),children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex text-lg font-medium",children:e.jsx(L,{...T})}),m&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-token-text-tertiary flex gap-6 text-sm",children:e.jsx(L,{id:"Grwczz",defaultMessage:"{count, plural, =0 {No images} one {# image} other {# images}}",values:{count:x}})}),_&&e.jsx(us,{includeArchived:d,setIncludeArchived:u})]})]})}),!E&&e.jsx("div",{className:"mt-4 mb-6 w-full border-t max-md:mb-6 max-md:hidden"}),E&&e.jsx(hs,{onClick:()=>{const f=pt(n),H=pt(f?.images??[]);H&&t(i.formatMessage(H.prompt)),b.focus()}}),!E&&e.jsx("div",{className:"min-h-svh w-full max-md:px-4",children:e.jsx(Ho,{count:x??0,images:v??[],includeArchived:d,hasMoreImages:S,isFetchingMore:w||g,onScrollToEnd:p})})]})}const Bo=({systemHint:t})=>{const{updateSystemHint:a}=ps(),s=Se(),{transitionToNextPage:i}=fs(),{clientThreadId:o}=tt();r.useEffect(()=>{s.activeViewTransition&&s.signalTransitionReady()},[s]),r.useEffect(()=>{a(t,{clientThreadId:o})},[t,o,a]);let n=null;switch(t){case G.Canvas:n=e.jsx(L,{id:"4+tS2L",defaultMessage:"Write with canvas"});break;case G.PictureV2:n=e.jsx(L,{id:"QtMyOg",defaultMessage:"Make an image"});break;case G.Research:n=e.jsx(L,{id:"Rdax1G",defaultMessage:"Deep research"});break;default:n=e.jsx(L,{id:"UrTsbY",defaultMessage:"Unknown landing page"});break}return e.jsx(xs,{children:e.jsxs(ys,{className:"mt-[100px] flex flex-col items-center gap-6",children:[e.jsx(vs,{isBadge:!0,isLauncher:!1,systemHint:t,label:null}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{"data-landing-page-load-target":!0,className:"text-token-text-primary text-4xl font-medium tracking-tight [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:text-5xl",children:n}),e.jsxs(Na,{to:"/",viewTransition:!0,onClick:c=>{c.preventDefault(),i({path:"/",nextPageType:{type:"home",value:void 0},update:()=>{a(null,{clientThreadId:o})}})},className:"group text-token-text-tertiary flex items-center gap-1 text-sm",children:[e.jsx(bs,{className:"h-4 w-4",style:{display:"var(--is-ltr, block) var(--is-rtl, none)"}}),e.jsx(Ss,{className:"h-4 w-4",style:{display:"var(--is-ltr, none) var(--is-rtl, block)"}}),e.jsx("div",{className:"group-hover:underline",children:e.jsx(L,{id:"gdbtML",defaultMessage:"Back to ChatGPT home"})})]})]})]})})},Qo=({systemHint:t})=>{const a=be(),s=ye(),i=r.useCallback(w=>{a.setText(w),a.focus()},[a]);r.useEffect(()=>()=>{s.reset()},[s]);const o=r.useCallback(()=>{U.logEvent("Open File Viewer",{intent:ws.Multimodal.toString()}),a.openFileDialog()},[a]),{isImageGenLandingPageEnabled$:n,isAllPagesEnabled$:c}=ye(),d=xe(n),u=xe(c),S=t===G.PictureV2&&d;if(!u&&!S)return null;let g=null;switch(t){case G.Canvas:g=!1;break;case G.PictureV2:g=e.jsx(Yo,{onCardClick:i,onUploadCardClick:o});break;case G.Research:g=!1;break;default:g=e.jsx(L,{id:"JEsPH+",defaultMessage:"Unknown landing page {systemHint}",values:{systemHint:t}})}return g},$o=4,Ko=async({text:t,numCompletions:a,isUnauthenticated:s,isThreadUsingSearchMode:i=!1,autocompleteMode:o,activeSystemHint:n})=>{try{return(s?await Ee.generateAutocompletionsAnon(t,a,i,n):await Ee.generateAutocompletions(t,a,i,n)).completions.map(d=>({id:Aa(),type:R.Autocomplete,title:d.slice(0,t.length),body:d.slice(t.length),oneliner:d,prompt:d,source:o}))}catch{return[]}},Jo=()=>!1,Zo=({clientThreadId:t,composerController:a,isGizmoThread:s})=>{const i=wt(a.store,y=>y.showTaggingDropdown),o=Ot(),n=Array.from(o)[0],[c,d]=r.useState([]),[u,v]=r.useState([]);r.useRef(0);const{configurationMenuType:S}=Dt(),g=$o,[w,p]=r.useState(),h=S!=="none",l=r.useCallback(y=>{d(j=>{const I=typeof y=="function"?y(j):y;return da(I,j)?j:I})},[]),{trendingSuggestions:b,fetchTrendingSuggestions:x}=Xo(g),{isUnauthenticated:m}=ve(),_=Cs(),C=r.useCallback(y=>{const j=a.getCurrentText();return j&&Ve(y).startsWith(j.toLocaleLowerCase())},[a]),E=r.useCallback(y=>{const j=a.getCurrentText(),I=y.title+y.body;return C(y)?{...y,title:j,body:I.slice(j.length)}:{...y,title:I,body:""}},[a,C]),T=r.useCallback((y=!1)=>{l(j=>!j.some(C)&&j.length>0?[]:y?j:j.map(E))},[C,E,l]),f=q(),H=r.useMemo(()=>({[N.Canvas]:[{type:R.Starter,title:f.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:f.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:N.Canvas},{type:R.Starter,title:f.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:f.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:N.Canvas},{type:R.Starter,title:f.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:f.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:N.Canvas},{type:R.Starter,title:f.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:f.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:N.Canvas}],[N.Image]:[{type:R.Starter,title:f.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:f.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:N.Image},{type:R.Starter,title:f.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:f.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:N.Image},{type:R.Starter,title:f.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:f.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:N.Image},{type:R.Starter,title:f.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:f.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:N.Image}],[N.ContextualAnswers]:[{type:R.Starter,title:f.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:f.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:e.jsx(js,{className:"h-full w-full"}),body:"",theme:N.ContextualAnswers},{type:R.Starter,title:f.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:f.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:e.jsx(Ms,{className:"h-full w-full"}),body:"",theme:N.ContextualAnswers},{type:R.Starter,title:f.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:f.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:e.jsx(_s,{className:"h-full w-full"}),body:"",theme:N.ContextualAnswers},{type:R.Starter,title:f.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:f.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:e.jsx(Ut,{className:"h-full w-full"}),body:"",theme:N.ContextualAnswers}]}),[f]),D=!!ks(),Le=Ns({exposed:D})==="autocomplete",Q=!(!D||!a.isEmpty()||!Le||s||![G.ContextualAnswers].includes(n)),{caSuggestions:se}=tn({skip:!Q});r.useEffect(()=>{Q&&l(y=>se.length>0?y.length>0&&!y.some(j=>j.theme===N.ContextualAnswers)?y:se:y.length>0?y:H[N.ContextualAnswers].slice(0,g))},[H,se,g,l,Q]),r.useEffect(()=>{const y=()=>{l(j=>j.filter(I=>I.theme!==N.Search&&I.theme!==N.Image))};if(a.getCurrentText()==="")if(_)b.length>0?l(b):x();else if(h&&n===G.PictureV2){const j=Ro(f);l(j)}else y();else y()},[c,a,x,_,l,b,n,f,h]),r.useEffect(()=>{_&&a.getCurrentText()===""&&b.length>0&&ft(b,t)},[_,a,b,t]);const oe=g-c.filter(C).length,F=sn(_),{layer:z}=B("4031588851"),ne=z.get("autocomplete_min_char",4),ie=z.get("autocomplete_fetch_interval",200),re=r.useRef(null),we=r.useCallback(Ts(async y=>{const j=a.getCurrentText();if(!j||j.length<ne||j.length>80||a.hasMultipleLines()){l([]);return}if(!i&&!(re.current&&re.current.length>ne&&j.startsWith(re.current)))try{const I=(await Ko({text:j,numCompletions:y,isUnauthenticated:m,isThreadUsingSearchMode:_,autocompleteMode:F,activeSystemHint:n})).filter(C).map(E);l($=>{const K=$.filter(C),We=I.filter(J=>{const Z=Ve(J);return!K.some(je=>{const Y=Ve(je);if(Z===Y)return!0;const X=/[\p{P}\p{S}]$/u,Me=Z.replace(X,""),_e=Y.replace(X,"");return Me===Y||Z===_e||Me===_e})}).slice(0,g-K.length);return[...K,...We]}),I.length>0&&ft(I,t)}catch{}},F==="BING"?150:ie),[a,F,E,ie,n]);As(y=>y.files);const le=n===G.Research,ce=Jo(),de=le&&ce,ue=r.useCallback(()=>{T(),oe>0&&we(oe)},[we,T,oe]);r.useEffect(()=>{i&&l([])},[i,l]);const Ce=r.useMemo(()=>F==="HARDCODED"?T:ue,[F,ue,T]),O=!1,P=r.useCallback(()=>{Ce()},[Ce,O,de,l]),W=r.useCallback(()=>{a instanceof Ia&&T(!0),a.getCurrentText().indexOf(`
`)>0&&(l([]),p(void 0))},[a,l,T,O,de]);return r.useEffect(()=>a.subscribe("input",()=>{P()}),[a,P]),r.useEffect(()=>a.subscribe("change",()=>{W()}),[a,W]),{autocompletions:c,matchaData:w}},Xo=t=>{const[a,s]=r.useState([]),i=r.useCallback(async()=>{const n=(await Ct.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:t},authOption:ua.SendIfAvailable})).suggestions.map((c,d)=>({type:R.Trending,title:Ie(c),body:"",icon:e.jsx(Es,{className:"h-full w-full"}),prompt:Ie(c),id:`search-trending-${d}`,theme:N.Search}));return s(n),n},[t]);return{trendingSuggestions:a,fetchTrendingSuggestions:i}},en=t=>{const a=/(["'])(?:(?=(\\?))\2.)*?\1/g,s=t.match(a),i=[];let o=0;return s&&s.forEach(n=>{const c=t.indexOf(n,o);c>o&&i.push({text:t.slice(o,c),isMatched:!1}),i.push({text:n,isMatched:!0,className:"font-medium"}),o=c+n.length}),o<t.length&&i.push({text:t.slice(o),isMatched:!1}),i},tn=({skip:t})=>{const{data:a=[],refetch:s}=Ta({queryKey:["caSuggestions"],queryFn:async()=>(await Ct.safeGet("/ca/v2/user/suggested_starter_prompts")).suggestions.map((o,n)=>{const c=Is(o.related_file_type)??Ut,d=e.jsx(c,{className:"h-full w-full"}),u=en(o.prompt);return{type:R.Autocomplete,title:Ie(o.prompt),body:"",icon:d,prompt:Ie(o.prompt),id:`ca-suggestions-${n}`,theme:N.ContextualAnswers,autocompletionChunks:u}}),enabled:!t});return{caSuggestions:a,fetchCaSuggestions:s}};function Ie(t){return t.split(" ").map(Ps).join(" ")}const Ve=t=>`${t.title}${t.body}`.toLocaleLowerCase();function an(){const{layer:t}=B("4031588851",{shouldLogExposure:!1}),a=t.get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),s=Gt();return!!s&&s.created*1e3>=new Date(a).getTime()}function sn(t){const{isUnauthenticated:a}=ve(),s=pe("1468311859").value,i=pe("2053937752").value,o=pe("3664702598").value,n=pe("471233253").value,{layer:c}=B("4031588851"),{layer:d}=B("3533083032"),u=an(),v=!a&&s||a&&i,S=(!a&&o||a&&n)&&u;let g="HARDCODED";{const w=a?d:c;if(t){const p=w.get("search_autocomplete_mode","");v&&p&&(g=p)}else S&&(g=w.get("autocomplete_mode","HARDCODED"))}return g}const on=({clientThreadId:t,isGizmoThread:a})=>{const s=be(),{autocompletions:i,matchaData:o}=Zo({clientThreadId:t,composerController:s,isGizmoThread:a});return r.useEffect(()=>(s.store.setState({autocompletions:i,matchaData:o}),()=>{s.store.setState({autocompletions:[],matchaData:void 0})}),[i,s,o]),null},nn=({clientThreadId:t})=>{const a=Re(),s=Ft(p=>p.activeStageSidebar),i=Je(t),o=Rs(ha.WorkspaceShareLinks),{isUnauthenticated:n}=ve(),c=St(),d=jt(t),u=st(d),v=Mt(a,"16480203"),S=Ls(),g=o&&i&&!n&&!c&&(!u||v)&&!S,w=!s;return e.jsx("div",{className:"flex items-center gap-2 pe-1 leading-[0]",id:"conversation-header-actions",children:e.jsx(Co,{showShareButton:g,showProfileDropdown:w,clientThreadId:t})})},rn=_t(()=>kt(()=>import("./dkuu01dkkv9xyabr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25])).then(t=>t.GizmoUsingAsOwnerNotice));function ln({clientThreadId:t,transparentBackground:a,isEmptyState:s}){const{isNewScrollEnabled:i}=zt(),o=jt(t),n=st(o),c=Ws(),d=Os(),{data:u}=Gs(o),v=Ke(),S=Hs(),g=Ds(),w=q(),{showLegacyReasoningSlider:p,showReasoningSliderNux:h}=Dt(),l=Ye(t),b=Ft(C=>C.isConversationScrolledFromTop),x=ga(),m=!p||!!o&&(!n||!l)||S;if(c)return null;const _=m?e.jsx(e.Fragment,{children:g&&(n||!o)?e.jsx(qs,{children:e.jsx(xt,{clientThreadId:t})}):e.jsx(xt,{clientThreadId:t})}):e.jsx(fe,{side:"bottom",theme:x?"default":"white",label:p&&!h?null:e.jsxs("div",{className:"flex h-full w-full flex-col overflow-hidden px-4 py-3",children:[e.jsx("div",{className:"flex w-full justify-center py-2",children:e.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary flex w-56 flex-col gap-2 rounded-xl border p-2 pt-1.5 shadow-lg",children:[e.jsx("div",{className:"text-token-text-tertiary flex w-full text-start text-[11px] font-normal tracking-tight",children:w.formatMessage({id:"kvZYws",defaultMessage:"Ask anything"})}),e.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[e.jsx(Ht,{className:"text-token-text-primary h-3 w-3 opacity-40"}),e.jsx(Fs,{className:"text-token-text-primary h-3 w-3 opacity-40"}),e.jsxs("div",{className:"relative h-3 w-3",children:[e.jsx(zs,{className:"text-token-text-primary h-3 w-3"}),e.jsx("div",{className:"absolute start-0 top-0 h-full w-full scale-200 animate-ping rounded-full bg-blue-400/50 duration-1000"})]}),e.jsx("div",{className:"flex-auto"}),e.jsx("div",{className:"bg-token-main-surface-primary rounded-full p-[1px] opacity-20 invert",children:e.jsx(Vs,{className:"text-token-text-primary h-3 w-3"})})]})]})}),e.jsxs("div",{className:"text-token-text-primary mt-4 flex max-w-80 flex-col gap-1",children:[e.jsx("div",{className:"font-semibold",children:w.formatMessage({id:"ZQnsFt",defaultMessage:"The model picker has moved"})}),e.jsx("div",{className:"text-xs font-normal opacity-75",children:w.formatMessage({id:"EyZkkB",defaultMessage:"Adjust thinking or choose a model here"})})]})]}),onOpenChange:C=>{C&&U.logEvent("Model Switcher Moved Tooltip Hover",{location:"thread_header"})},ignoreTriggerOnOutsideClick:!0,interactive:!0,children:e.jsx("div",{className:"text-token-text-secondary px-0.5 text-xl",children:Us})});return e.jsxs(e.Fragment,{children:[e.jsxs(Ys,{id:"page-header",className:A("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition max-md:hidden",s&&"absolute start-0 end-0",!o&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:bg-transparent @[84rem]/thread:shadow-none!",a&&"bg-transparent",!i&&b?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",i&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]"),children:[e.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[u!=null&&v?.isWorkspaceAccount()&&u.gizmo.tags?.includes(Bs.WorkspaceDisabled)&&e.jsx(rn,{gizmo:u}),e.jsx(Qs,{gizmoId:o,clientThreadId:t})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(jo,{clientThreadId:t}),_]}),e.jsx(nn,{clientThreadId:t})]}),d&&e.jsx($s,{})]})}const cn=_t(()=>kt(()=>import("./c5dp8ki3tm96qea2.js"),__vite__mapDeps([26,1,6,2,3,7,27])));function dn({clientThreadId:t}){const a=Xe(),s=Je(t),i=$e(t,ae.getGizmoId),o=async()=>{s&&(await Ee.patchConversation(s,{is_archived:!1}),a.invalidateQueries({queryKey:["conversation",t]}),Ma(s,n=>{n.isArchived=!1}),Vt(a,i))};return e.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:e.jsx(L,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),e.jsx("div",{children:e.jsx(Ae,{disabled:!s,onClick:o,icon:wo,children:e.jsx(L,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const un=function({clientThreadId:t,getGizmosCompletionParams:a,hideDisclaimer:s,hideHeader:i,messagesVerticalAlign:o="top",renderEmptyState:n}){const c=ma(),{isNewScrollEnabled:d,autoPinningEnabled:u}=zt(),{data:v}=pa(),S=Ks(t),g=fa(),[w,p,h,l,b,x,m,_]=$e(t,M=>[M?.isLoading,ae.getCurrentLeafId(M),ae.hasUserMessage(M),ae.getConversationTurns(M).length,ae.isArchived(M),M?.modelId,M?ae.getGizmoId(M):g,M?.conversationOrigin===_a.APPLE]),C=Je(t),E=Xe(),{prefetchSearchPromises:T}=tt(),[f]=Pa(),H=!!f.get("message"),[D,Le]=r.useState(T?.navlink);r.useEffect(()=>{w||(Ye(t)?ut.addTiming("chatgpt.web.chatPage.renderNewConversation"):ut.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t,w]);const{setTargetedContent:Q}=Js(),se=c?.includes(xa),oe=null,F=l>=2,{pageType:z}=Zs(),ne=Re(),ie=ye(),re=xe(ie.isImageGenLandingPageEnabled$),we=xe(ie.isAllPagesEnabled$),le=r.useContext(ya),ce=va(le),de=ba(le),ue=Xs(),{isOpen:Ce}=_o(),O=!!m,P=Ye(t)&&!F&&(yt(S)||S?.kind===Sa.GizmoTest)&&!ue&&T==null&&(!ce||O),W=z?.type==="landing-page"&&(we||z.value===G.PictureV2&&re);Mt(ne,"733205176");const y=P&&!h&&T==null&&(!ce||O),I=Pt(v).id,$=x??I,K=!!x,We=eo(v?.models,$),J=to(t,S),Z=ao();so(l,t),r.useEffect(()=>{Z||Q(void 0)},[t,Q,Z,p]),r.useEffect(()=>{Pe.setIsConversationScrolledFromTop(!1)},[t]),r.useEffect(()=>{const M=new URLSearchParams(window.location.search),me=M.get("src");if(me==="history_search"){M.delete("src");const Ne=M.toString(),ta=`${window.location.pathname}${Ne?`?${Ne}`:""}${window.location.hash}`;window.history.replaceState({},document.title,ta)}C&&me==="history_search"&&Ee.patchConversation(C,{touch:!0}).then(()=>{Vt(E,m)})},[C,m,E]);const je=Tt(t),Y=r.useCallback(M=>{je(a?a(M):M)},[je,a]),X=Se(),Me=At(),_e=Ze(),Oe=r.useRef(null);Oe.current=M=>{W?X.transitionToPage({type:"home",value:void 0},()=>{_e("/",{preventScrollReset:!0}),Y(M)}):P&&!Me&&wa(ne,"3253785454").get("should_animate_composer",!1)?Wt({className:oo["composer-slide"],update:()=>Y(M)}):Y(M)};const he=r.useCallback(M=>Oe.current?.(M),[Oe]);r.useEffect(()=>{X.signalTransitionReady()},[X,W,t]);const Yt=no({clientThreadId:t,handleRequestCompletion:he,prefetchSearchThreadIdPromise:T?.threadId})&&D==null,Ge=r.useRef(null),Bt=M=>{if(d&&!W)return e.jsx(vo,{allowScrollToEnd:!de,allowScrollToTop:!de&&_,clientThreadId:t,enableAutoScrollPinning:u,initScrolledToEnd:D==null&&!H,threadFooterRef:Ue,threadRootRef:nt,children:M});{const me=e.jsx("div",{className:"relative h-full",children:e.jsxs("div",{className:A("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges] @[84rem]/thread:pt-(--header-height)"),ref:Ge,children:[e.jsx(bo,{setIsScrolledToEdge:Ne=>{Pe.setIsConversationScrolledFromTop(Ne)},options:{root:Ge?.current}}),M]})});return D!=null?me:e.jsx(ja,{children:e.jsxs(r.Suspense,{fallback:null,children:[e.jsx(So,{}),me]})})}},He=No();r.useEffect(()=>{He||(document.title=J??"ChatGPT")},[J,oe,He]);const Qt=Ca(le),De=Ke(),$t=De&&!De.isTeam()&&!De.isEnterprisey(),ot=!s&&!Qt&&!ce&&!(P&&$t)&&yt(S),nt=r.useRef(null),it=r.useRef(null),Ue=r.useRef(null),rt=io(M=>M.composerHeight),Kt=r.useMemo(()=>({threadContentScrollContainerElementRef:it,footerRootContainerElementRef:Ue}),[]),Jt=!P&&!W,Zt=at(),Xt=st(m),ge=O&&Xt,ke=!ge,ea=P&&!W,lt=W&&z?.type==="landing-page";return e.jsx(ro.Provider,{value:D,children:e.jsx(Rt,{clientThreadId:t,children:e.jsxs(et,{clientThreadId:t,children:[se&&e.jsx(cn,{}),!He&&e.jsx(lo,{children:J!=null&&e.jsx("title",{children:J})}),e.jsx(co.Provider,{value:he,children:e.jsxs(Lt,{children:[e.jsxs("div",{id:"thread",ref:nt,className:A("group/thread @container/thread h-full w-full",d&&!W&&go.threadRoot,W&&"overflow-y-auto"),children:[e.jsxs(Po,{noKeyboard:!0,clientThreadId:t,currentModelConfig:We,className:A("composer-parent flex flex-col focus-visible:outline-0",!W&&"h-full"),children:[e.jsxs(uo,{value:Kt,children:[!i&&e.jsx(ln,{clientThreadId:t,isEmptyState:y}),e.jsxs("div",{ref:it,className:A("flex basis-auto flex-col",Jt&&"-mb-(--composer-overlap-px) [--composer-overlap-px:24px]",ge||O||!P?"grow":"shrink",!P&&"overflow-hidden",P&&!ge&&!O&&"min-[510px]:max-[768px]:mt-[25dvh]! @max-[31.9rem]/thread:grow @max-[31.9rem]/thread:justify-center @lg/thread:mt-[calc(30dvh+25px)]"),style:{"--composer-height":rt?`${rt}px`:void 0},children:[lt&&e.jsx(Bo,{systemHint:z.value}),!W&&e.jsx(e.Fragment,{children:!w&&!Yt?y?n??e.jsx(e.Fragment,{children:O?e.jsx(Mo,{clientThreadId:t,gizmoId:m,onRequestCompletion:he,currentModelId:$}):e.jsx(Do,{clientThreadId:t,currentModelId:$,isModelLoaded:K})}):F||D!=null?Bt(e.jsx(Lo,{onRequestCompletion:he,clientThreadId:t,scrollContainerRef:Ge,prefetchNavlink:D,setPrefetchNavlink:Le},t)):null:null})]})]}),e.jsxs("div",{id:"thread-bottom-container",className:A("isolate z-3 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!W&&!ot&&"mb-4",O||ge||!P?"":ke&&P&&Zt?"@lg/thread:grow":"lg:grow",ke&&"flex flex-col"),ref:Ue,children:[b?e.jsx(dn,{clientThreadId:t}):e.jsxs(e.Fragment,{children:[(!P||ke)&&!Ce&&e.jsx(Io,{isGizmoThread:O,isProjectThread:ge,clientThreadId:t,isNewThread:P,currentModelId:$,onRequestCompletion:he,shouldUseUnifiedComposer:ke,isModelLoaded:K}),ea&&e.jsx(on,{clientThreadId:t,isGizmoThread:O})]}),ot?e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:e.jsx(ho,{clientThreadId:t})}):null]})]}),lt&&e.jsx(Et,{children:e.jsx(Qo,{systemHint:z.value})})]}),e.jsx(mo,{clientThreadId:t,isStaticSharedThread:!1,isDynamicSharedThread:ue}),e.jsx(po,{}),e.jsx(fo,{conversationId:t}),e.jsx(xo,{}),e.jsx(yo,{conversationId:t}),!1]})})]})})})},jn=Ea.memo(un);export{nn as C,Ho as I,jn as M};
//# sourceMappingURL=ljuezj190v37napq.js.map
