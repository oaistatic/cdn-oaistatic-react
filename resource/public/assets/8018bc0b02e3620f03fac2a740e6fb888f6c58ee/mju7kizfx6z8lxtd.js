import{f as g,u as h,r as m,j as e,M as r}from"./n3epq09dut36rmi2.js";import{L as f,aq as t,ar as p,as as b}from"./uox23aig6gp6se2y.js";import{c as j,W as y,g as N}from"./nqrmgk5te3uzwsyz.js";import{W as k}from"./azqvry2z7sssyjfm.js";function w(c,{forceRedirect:a}={}){{const n=encodeURIComponent(JSON.stringify({client_redirect_to:location.pathname}));window.open(`https://github.com/apps/chatgpt-connector/installations/select_target?state=${n}`,"_blank")}}function S(){return N(),e.jsx("div",{className:"flex items-center justify-center px-2",children:e.jsxs("button",{className:"text-token-text-primary bg-token-bg-primary hover:bg-token-bg-secondary dark:bg-token-bg-secondary dark:hover:bg-token-bg-primary flex w-full items-center rounded-lg px-2 py-3 text-center text-sm",onClick:()=>w(),children:[e.jsx(b,{"aria-hidden":!0,className:"icon-md me-1"}),e.jsx(r,{id:"wham.accountSelect.addGitHubAccount",defaultMessage:"Add a GitHub account"})]})})}function C({className:c,selectedInstallationId:a,setSelectedInstallationId:n}){const l=g(),{data:u,isLoading:o}=h({queryKey:["githubInstallations"],queryFn:()=>k.getGithubInstallations(),staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0}),i=m.useMemo(()=>u?.installations??[],[u]),d=i?.find(s=>s.id===a);m.useEffect(()=>{a&&!d?n(null):!a&&i?.length&&n(i[0].id)},[a,d,i,n]);const x=s=>{n(parseInt(s))};return e.jsxs("div",{className:j("flex flex-col gap-2",c),children:[e.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:e.jsx(r,{id:"wham.accountSelect.githubOrganization",defaultMessage:"GitHub organization"})}),o?e.jsx(f,{className:"h-9 w-52"}):e.jsxs(t.Root,{value:o?"":a?.toString()??"",onValueChange:x,disabled:o,children:[e.jsx(t.Trigger,{className:"border-token-border-heavy bg-token-bg-primary flex w-52 rounded-md border","aria-label":l.formatMessage({id:"wham.accountSelect.openOrganizationMenu",defaultMessage:"Open organization menu"}),children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex w-0 flex-1 items-center",children:[e.jsx(p,{"aria-hidden":!0,className:"icon-sm me-1.5"}),e.jsx("div",{className:"truncate",children:e.jsx(t.Value,{placeholder:l.formatMessage({id:"wham.accountSelect.selectOrganization",defaultMessage:"Select organization"})})})]}),e.jsx(t.Icon,{})]})}),e.jsx(t.Portal,{children:e.jsxs(t.Content,{align:"start",children:[i.length>0?i.map(s=>e.jsx(t.Item,{value:s.id.toString(),children:s.account_login},s.id)):e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("p",{className:"text-token-text-primary text-sm",children:e.jsx(r,{id:"wham.accountSelect.noGitHubAccounts",defaultMessage:"No GitHub accounts"})}),e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(r,{id:"wham.accountSelect.noGitHubAccountsDescription",defaultMessage:"Codex requires a GitHub account to work"})})]}),e.jsx(t.Separator,{}),e.jsx(S,{}),o&&e.jsx("div",{className:"flex justify-center p-2",children:e.jsx(y,{})})]})})]})]})}export{C as A,w as h};
//# sourceMappingURL=mju7kizfx6z8lxtd.js.map
