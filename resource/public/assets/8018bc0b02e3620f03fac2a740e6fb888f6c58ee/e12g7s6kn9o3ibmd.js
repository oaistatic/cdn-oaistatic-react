import{j as e,r as i,f as L,a5 as E,M as g,d as F,h as O,a6 as V,L as U,a9 as T}from"./n3epq09dut36rmi2.js";import{B as $}from"./dga4w4fj85z63yhg.js";import{b as z,c as q}from"./dnyjnsewv99rujtf.js";import{P as Z}from"./e4sjbad9hyqt73xe.js";import{bg as N,c0 as Q,or as B,os as X,fY as Y,h as J,ot as K,bc as ee,bd as te,dG as se,fZ as ae,fV as ne,is as W}from"./uox23aig6gp6se2y.js";import{g as C,t as re,B as M,f7 as ie,s as S,W as oe,c as le,et as ce,E as de,aV as me,u as I}from"./nqrmgk5te3uzwsyz.js";import{b as ue}from"./izxna8u6mo9guqnq.js";import{W as fe}from"./mwmzy5d3s65b6nqi.js";import{a as xe,b as he,h as ge}from"./kil09ef9w65kh1p8.js";import{W as pe}from"./gt0o8gecgu18rlu9.js";import{T as ve}from"./esvlql2z91zwym50.js";import{c as y,d as H,j as ye}from"./azqvry2z7sssyjfm.js";import{S as je}from"./k7u5jgad3qccdmw2.js";import{I as ke}from"./bns64zud9fwchaft.js";import{a as be,b as Pe}from"./k9dqus9crie9cyow.js";import{u as Ce}from"./geq0szxpp44x56uy.js";function we({disabled:t,children:s}){return t?e.jsx("div",{className:"pointer-events-none opacity-50 select-none","aria-hidden":"true",tabIndex:-1,inert:!0,children:s}):s}function A(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Te(...t){return s=>{let n=!1;const o=t.map(a=>{const l=A(a,s);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let a=0;a<o.length;a++){const l=o[a];typeof l=="function"?l():A(t[a],null)}}}}function Ne(...t){return i.useCallback(Te(...t),t)}function Se(t){const s=Ee(t),n=i.forwardRef((o,a)=>{const{children:l,...f}=o,m=i.Children.toArray(l),d=m.find(Le);if(d){const x=d.props.children,h=m.map(p=>p===d?i.Children.count(x)>1?i.Children.only(null):i.isValidElement(x)?x.props.children:null:p);return e.jsx(s,{...f,ref:a,children:i.isValidElement(x)?i.cloneElement(x,void 0,h):null})}return e.jsx(s,{...f,ref:a,children:l})});return n.displayName=`${t}.Slot`,n}function Ee(t){const s=i.forwardRef((n,o)=>{const{children:a,...l}=n,f=i.isValidElement(a)?We(a):void 0,m=Ne(f,o);if(i.isValidElement(a)){const d=Re(l,a.props);return a.type!==i.Fragment&&(d.ref=m),i.cloneElement(a,d)}return i.Children.count(a)>1?i.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Me=Symbol("radix.slottable");function Le(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Me}function Re(t,s){const n={...s};for(const o in s){const a=t[o],l=s[o];/^on[A-Z]/.test(o)?a&&l?n[o]=(...m)=>{const d=l(...m);return a(...m),d}:a&&(n[o]=a):o==="style"?n[o]={...a,...l}:o==="className"&&(n[o]=[a,l].filter(Boolean).join(" "))}return{...t,...n}}function We(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ie=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ae=Ie.reduce((t,s)=>{const n=Se(`Primitive.${s}`),o=i.forwardRef((a,l)=>{const{asChild:f,...m}=a,d=f?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...m,ref:l})});return o.displayName=`Primitive.${s}`,{...t,[s]:o}},{}),_e="AspectRatio",D=i.forwardRef((t,s)=>{const{ratio:n=1/1,style:o,...a}=t;return e.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/n}%`},"data-radix-aspect-ratio-wrapper":"",children:e.jsx(Ae.div,{...a,ref:s,style:{...o,position:"absolute",top:0,right:0,bottom:0,left:0}})})});D.displayName=_e;const Fe="https://openai.com/index/introducing-codex/";function Oe(){const t=L(),s=Be();return i.useEffect(()=>{N.recordLandingPageShown()},[]),e.jsxs(E.div,{className:"bg-token-bg-primary flex min-h-screen w-full flex-col items-center justify-center gap-8 overflow-scroll px-8 py-20 sm:gap-12 sm:px-24 sm:py-28",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[e.jsxs("div",{className:"flex max-w-lg flex-col items-center gap-4",children:[e.jsx("div",{className:"text-5xl font-semibold",children:"Codex"}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:e.jsx(g,{id:"wham.landing.researchPreview",defaultMessage:"Research Preview"})}),e.jsx("p",{className:"text-center text-lg",children:e.jsx(g,{id:"WhamLandingPage.subtitle",defaultMessage:"A cloud-based software engineering agent that answers codebase questions, executes code, and drafts pull requests."})}),e.jsx(_,{}),e.jsx("p",{className:"text-token-text-tertiary text-center text-sm",children:e.jsx(g,{...s})})]}),e.jsx(E.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex w-full max-w-5xl items-center justify-center",children:e.jsx(D,{className:"flex w-full items-center justify-center",ratio:1.5,children:e.jsx("img",{className:"absolute w-full max-w-5xl rounded-xl",src:"https://persistent.oaistatic.com/chatgpt/landing-e8737b0.jpg",alt:t.formatMessage({id:"WhamLandingPage.imageAltText",defaultMessage:"Creating a new task with Codex"})})})}),e.jsxs("div",{className:"bg-token-bg-secondary flex w-full max-w-5xl flex-col items-center gap-8 rounded-xl px-4 py-12 sm:py-24",children:[e.jsx("div",{className:"text-xl font-medium sm:text-2xl",children:e.jsx(g,{id:"WhamLandingPage.tryTheCodexResearchPreview",defaultMessage:"Try the Codex research preview"})}),e.jsx(_,{})]})]})}function _(){const t=C(),s=re(t),n=F(),o=He();return e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:flex-row",children:[s?e.jsx(M,{size:"large",onClick:()=>{N.recordUpgradeToTryItButtonClicked(),Q(n,"WhamLandingPage")},children:e.jsx(g,{...o})}):e.jsx(M,{size:"large",onClick:()=>{n("/auth/login?next=/codex"),N.recordLogInButtonClicked()},children:e.jsx(g,{id:"WhamLandingPage.logInToTryIt",defaultMessage:"Log in to try it"})}),e.jsxs("a",{href:Fe,target:"_blank",rel:"noreferrer",className:"text-token-text-tertiary flex items-center gap-1 text-sm",onClick:()=>{N.recordLearnMoreLinkClicked()},children:[e.jsx(g,{id:"WhamLandingPage.learnMore",defaultMessage:"Learn more"}),e.jsx(B,{className:"icon-xs"})]})]})}function G(){const t=C();return ie(t,"349697204")}function Be(){switch(G().get("availability_message_type")){case"rolling_out_pro_today":return{id:"WhamLandingPage.rollingOutProToday",defaultMessage:"Rolling out to users on the ChatGPT Pro Plan today",description:"Text explaining that Codex is rolling out to users on the ChatGPT Pro Plan today"};case"available_to_pro_and_team":return{id:"WhamLandingPage.availableToProAndTeam",defaultMessage:"Available to users on the ChatGPT Pro Plan and ChatGPT Team Plan",description:"Text explaining that Codex is available to users on the ChatGPT Pro Plan and ChatGPT Team Plan"};default:return{id:"WhamLandingPage.availableToPro",defaultMessage:"Available to users on the ChatGPT Pro Plan",description:"Text explaining that Codex is available to users on the ChatGPT Pro Plan"}}}function He(){switch(G().get("upgrade_button_message_type")){case"try_with_pro":return{id:"WhamLandingPage.tryWithPro",defaultMessage:"Try it with ChatGPT Pro",description:"Text inviting user to try Codex with ChatGPT Pro"};default:return{id:"WhamLandingPage.upgradeToTryIt",defaultMessage:"Upgrade to try it",description:"Text inviting user to upgrade to try Codex"}}}function De(){const t=L(),s=y(({tasksFilter:d})=>d),n=y(({setTasksFilter:d})=>d),o=C(),a=O(),l=F(),f=S(o,"2665240312"),m=i.useCallback(d=>{n(d);const x=new URLSearchParams(a.search);x.set("tab",d==="archived"?"archived":"all"),l({pathname:a.pathname,search:x.toString()},{replace:!0})},[n,a,l]);return e.jsx("div",{className:"border-token-border-primary mt-4 flex w-full items-center border-b align-middle md:mt-6",children:f&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ve,{currentTab:s,onChange:m,withUnderline:!0,tabs:[{label:t.formatMessage({id:"wham.whamTasksHeader.all",defaultMessage:"Tasks"}),key:"current"},{label:t.formatMessage({id:"wham.whamTasksHeader.archived",defaultMessage:"Archive"}),key:"archived"}]})})})}function Ge(){const t=L(),s=y(({tasksFilter:u})=>u),{data:n,isLoading:o,error:a,fetchNextPage:l,hasNextPage:f,isFetchingNextPage:m,refetch:d,isPending:x}=H({refetchOnMount:!0}),h=n?.pages.flatMap(u=>u.items??[])??[],p=y(u=>u.pendingTaskIds),j=h.length>0,[r,k]=i.useState(null),v=s==="archived"?[]:Array.from(Object.entries(p)).filter(([u,c])=>!h.some(P=>P.id===c)).map(([u])=>u).reverse(),b=h.length===0&&v.length===0;return e.jsx("div",{className:"flex flex-col justify-center pt-2",children:o&&!j?e.jsx("div",{className:"mt-4 flex h-full w-full items-center justify-center",children:e.jsx(oe,{})}):e.jsxs(e.Fragment,{children:[b&&e.jsx(e.Fragment,{children:a?e.jsxs("div",{className:"mt-6 flex w-full flex-col items-center justify-center gap-2 text-sm",children:[e.jsx("div",{className:"text-token-text-error",children:e.jsx(g,{id:"wham.whamTasksSection.errorLoadingTasks",defaultMessage:"Error loading tasks"})}),e.jsx(M,{color:"secondary",onClick:()=>d(),children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{id:"wham.whamTasksSection.retry",defaultMessage:"Retry"}),e.jsx(je,{className:"icon-xs"})]})})]}):e.jsx("div",{className:"mt-6 flex h-full w-full items-center justify-center",children:e.jsx("div",{className:"text-token-text-secondary text-sm",children:s==="current"?t.formatMessage({id:"wham.whamTasksSection.noActiveTasks",defaultMessage:"No active tasks"}):t.formatMessage({id:"wham.whamTasksSection.noArchivedTasks",defaultMessage:"No archived tasks"})})})}),s!=="archived"&&v.map(u=>e.jsx(be,{},u)),h.map((u,c)=>e.jsx(Pe,{index:c,taskListItem:u,hoveredIndex:r,onMouseEnter:()=>{k(c)},onMouseLeave:()=>k(null)},u.id)),e.jsx(ke,{isFetchingNextPage:m||x,hasNextPage:f??!1,fetchNextPage:l})]})})}const Ve=i.memo(Ge);function Ue(){const t=C();return S(t,"3984934927")}function $e(){const{eligible:t,markAsViewed:s}=X(),n=y().environmentId,{data:o,isLoading:a}=ye(),l=o?.find(r=>r.id===n),f=o?.some(r=>r.setup.length>0)??!1,{data:m,isLoading:d}=H(),x=(m?.pages?.[0]?.items?.length??0)>0,h=Y(),p=i.useMemo(()=>[{id:"step-1",link:"/codex/settings/environment/create",checked:!0,label:e.jsx(g,{id:"codex.onboarding.step-1",defaultMessage:"Set up your first environment"})},{id:"step-2",checked:x,label:e.jsx(g,{id:"codex.onboarding.step-2",defaultMessage:"Create your first task"})},{id:"step-3",checked:f,link:`/codex/settings/environment/${l?.id}/edit#setup-script`,label:e.jsx(g,{id:"codex.onboarding.step-3",defaultMessage:"Install dependencies for the ‘{environmentName}’ environment",values:{environmentName:l?.label}})}],[f,l,x]),j=p.every(r=>r.checked);return i.useEffect(()=>{j&&s()},[j,s]),e.jsx(V,{children:!t||a||d||!l||j?null:e.jsx(E.div,{className:"fixed end-6 bottom-6 z-50",initial:{opacity:0},animate:{opacity:1},transition:{duration:h?1e-5:.5},children:e.jsxs("div",{className:"bg-token-bg-primary border-token-border-default flex w-[272px] flex-col gap-4 rounded-xl border p-4 shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:e.jsx(g,{id:"k3HHpd",defaultMessage:"Finish setting up Codex"})})}),e.jsx("div",{className:"flex flex-col gap-3",children:p.map((r,k)=>{const v=!r.checked&&p.filter(u=>!u.checked).length===1&&p.findIndex(u=>!u.checked)===k,b=e.jsxs("div",{className:"flex items-start gap-3 select-none",children:[e.jsx("div",{className:"mt-0.5",children:r.checked?e.jsx(J,{className:"icon-md text-token-text-tertiary"}):e.jsx("span",{className:"icon-md border-token-text-secondary inline-block h-4 w-4 rounded-full border bg-transparent"})}),e.jsx("span",{className:le("text-sm",r.checked?"text-token-text-tertiary line-through":"text-token-text-primary"),children:r.label}),r.link&&!r.checked&&e.jsx(B,{className:"icon-md text-token-text-primary"})]},r.id);return r.link&&!r.checked?e.jsx(U,{to:r.link,onClick:()=>{v&&s()},children:b},r.id):b})})]})})})}function ct(){const t=C(),s=K(),n=Ue(),o=ee(te.workspaceId),{eligible:a}=se(),l=ae();Ce();const f=S(t,"547652119");return y(m=>m.showReactQueryDevtools),s?f?e.jsx(T,{to:"/codex/failwhale"}):l==="DISABLED"?e.jsx(T,{to:"/",replace:!0}):a?e.jsx(T,{to:"/codex/onboarding"}):e.jsxs(e.Fragment,{children:[e.jsx($,{},o),!1,e.jsx(ue,{mobileHeaderRightContent:null,children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx(xe,{children:e.jsx(he,{hideNotificationBell:!0})}),e.jsx(ce,{children:e.jsx(ze,{})})]})})]}):n?e.jsx(Oe,{}):e.jsx(T,{to:"/"})}const ze=()=>{const t=y(({setPromptDraft:c})=>c),s=y(({setTasksFilter:c})=>c),n=O(),o=y(c=>c.lastViewedTaskId),[a]=i.useState(!!o),[l,f]=i.useState(!1),m=i.useRef(a),d=i.useRef(null),x=C(),h=S(x,"1406552515"),p=y(({promptDraft:c})=>c),j=de(),r=i.useMemo(()=>j?new Z(z()):new ne,[j]);i.useEffect(()=>{r.setText(h?"":p)},[r,h]);const k=i.useRef(null),v=W(({setIsExpanded:c})=>c),b=W(c=>c.isExpanded),u=me(r.store,({isFocused:c})=>c);return I(()=>{a&&v(!1)},[a]),I(()=>{const c=d.current;if(!c)return;const P=()=>{const w=c.scrollTop>0;if(f(w),m.current)return;const R=r.isEmpty()&&!u&&b&&w;m.current=R,v(!R)};return c.addEventListener("scroll",P),()=>c.removeEventListener("scroll",P)},[b,u,v,r]),i.useEffect(()=>r.subscribe("focus",()=>{m.current=!1}),[r]),i.useEffect(()=>r.subscribe("blur",c=>{c.relatedTarget instanceof HTMLElement&&k.current?.contains(c.relatedTarget)||l&&(m.current=!0,v(!1))}),[r,l,v]),i.useEffect(()=>r.subscribe("change",()=>{t(r.getCurrentText())}),[r,t]),i.useEffect(()=>{const c=new URLSearchParams(n.search),P=c.get("prompt");P&&r.setText(P);const w=c.get("tab");w==="archived"?s("archived"):w==="all"&&s("current")},[n.search,r,s]),e.jsxs(q.Provider,{value:r,children:[e.jsx("div",{className:"h-full w-full overflow-y-auto",ref:d,style:{scrollbarGutter:"stable"},children:e.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[e.jsx(pe,{}),e.jsxs("div",{className:"bg-token-bg-primary sticky top-[1px] z-50 flex flex-col items-center",children:[e.jsx("h1",{className:"mb-8 pt-8 [@media(max-height:550px)]:hidden",children:e.jsx(g,{id:"wham.home.title",defaultMessage:"What are we coding next?"})}),e.jsx("div",{ref:k,className:"w-full max-md:px-3",children:e.jsx(we,{disabled:h,children:e.jsx(fe,{disableAutoFocus:a||h,isExpandedByDefault:!h,isBigBoxMode:!h,onSubmit:()=>{r.eraseContent(),t("")},onSuccess:()=>{ge.set(c=>c+1)}})})}),e.jsx(De,{})]}),e.jsx(Ve,{})]})}),e.jsx($e,{})]})};export{ct as W};
//# sourceMappingURL=e12g7s6kn9o3ibmd.js.map
