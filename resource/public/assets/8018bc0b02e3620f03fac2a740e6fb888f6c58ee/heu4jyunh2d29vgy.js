import{j as e,M as B,r,a6 as L}from"./n3epq09dut36rmi2.js";import{bv as O,fz as R,fA as W,fB as G,fC as P,eF as V,fD as z,fE as K,fF as X}from"./uox23aig6gp6se2y.js";import{u as q,R as H}from"./oshe56yhea4czc03.js";import{b as J}from"./hi5bz78ars1jrvhf.js";import{c as I,dd as Q,as as Y,ba as Z,aV as $}from"./nqrmgk5te3uzwsyz.js";import"./dnyjnsewv99rujtf.js";import"./e4sjbad9hyqt73xe.js";import"./dkr8jkx9n88ez7ho.js";import"./nnldvg4yjd3ynnqu.js";const ee=({pressed:a,onClick:n})=>{const o=e.jsx("div",{className:"[display:var(--force-hide-label)] ps-1 pe-1 whitespace-nowrap",children:e.jsx(B,{id:"0MS4cd",defaultMessage:"Selection"})});return e.jsxs("div",{className:I("radix-state-open:bg-black/10 inline-flex max-h-9 min-h-9 rounded-full border text-[13px] font-medium",{"text-token-text-secondary":!a,"can-hover:hover:bg-[#BDDCF4] dark:can-hover:hover:bg-[#1A416A] border-transparent bg-[#DAEEFF] text-blue-400 dark:bg-[#2A4A6D] dark:text-[#48AAFF]":a,"border-token-border-default can-hover:hover:bg-token-main-surface-secondary dark:can-hover:hover:bg-gray-700 focus-visible:outline-black dark:focus-visible:outline-white":!a}),children:[e.jsxs("div",{className:"flex h-full min-w-8 cursor-default flex-row items-center justify-center p-2 select-none","aria-pressed":a,children:[e.jsx(O,{className:"h-5 w-5 pe-1"}),o]}),e.jsx("button",{className:"flex h-full min-w-8 flex-row items-center justify-center border-s border-blue-400/10 p-2","aria-pressed":a,onClick:n,children:e.jsx(Q,{className:"h-4 w-4"})})]})},se=.0025,me=r.forwardRef(function({type:n,placeholder:o,state:s,renderFiles:y,leftSideActions:A,onSubmit:m,inputState:u,composerController:t,clientThreadId:f,gizmoId:p,disableReason:g},E){const{isInpainting:l,onCancelInpaint:U}=R(),{isUnauthenticated:i}=Y(),h=W(),b=J(),[v,_]=r.useState(!1);let w=null;const{isLoading:c}=h;c||(w=h.modelId),r.useEffect(()=>{c||G()||t.focus()},[w,t,c]);const S=x=>{ae({target:x.target,rootId:"composer-background",additonalInteractiveIds:["reply-regions"]})||t.focus()};r.useEffect(()=>Z(document,{keydown:x=>{x.key==="Enter"&&b&&i&&_(!0)}}),[b,i]);const d=r.useMemo(()=>e.jsx(P,{inputState:u,state:s,onSubmit:m,composerController:t,clientThreadId:f,gizmoId:p,disableReason:g}),[u,s,m,t,f,p,g]),C=r.useCallback(()=>i?e.jsx(V,{triggerButton:e.jsx("div",{children:d}),sideOffset:0,alignOffset:0,open:v,onOpenChange:_,children:e.jsx(z,{location:"chatgpt-imagen-composer",statsig_login_event:"chatgpt_imagen_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_imagen_composer_upsell_signup_button_clicked"})}):d,[i,v,d]),{whisperControls:T,waveContainerRef:D}=q({composerController:t,renderInComposer:C,composerType:"imagegen"}),{controlsDisabled:j,waveformData:k,waveWidth:F}=$(t.store),N=e.jsx(H,{composerController:t,placeholder:o},"userInput"),M=l||j;return e.jsx(K,{id:"composer-background",ref:E,className:I("border-token-border-xlight flex w-full cursor-text flex-col rounded-3xl border-s border-e border-t duration-150 ease-in-out contain-inline-size motion-safe:transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow,bottom] dark:border-none dark:shadow-none",n!=="temporary"&&"shadow-[0_9px_9px_0px_rgba(0,0,0,0.01),_0_2px_5px_0px_rgba(0,0,0,0.06)] has-focus:shadow-[0_2px_12px_0px_rgba(0,0,0,0.04),0_9px_9px_0px_rgba(0,0,0,0.01),0_2px_5px_0px_rgba(0,0,0,0.06)]",n!=="temporary"&&"bg-token-main-surface-primary dark:bg-[#303030]",n==="temporary"&&"dark bg-[#303030]"),onClick:S,style:{viewTransitionName:"var(--vt-composer)"},children:e.jsx("div",{className:"px-1 py-1",children:e.jsxs(e.Fragment,{children:[y,e.jsx(L,{initial:!1,children:e.jsxs("div",{className:"flex flex-col justify-start",children:[M&&e.jsx("div",{className:"mx-1 flex flex-row pt-1",children:j?k&&e.jsx(X,{waveform:k,containerWidth:F,scaleFactor:10,initialValue:se}):e.jsx("div",{className:"mx-2 max-h-12 grow overflow-x-auto",children:N})}),e.jsx("div",{className:"flex min-h-[44px] items-center ps-1",ref:D,children:e.jsx("div",{className:"max-w-full min-w-0 flex-1",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-x-1.5",children:[e.jsxs("div",{className:"text-token-text-primary me-3 flex shrink gap-x-1.5",id:"imagegen-left-actions",children:[A,l&&e.jsx(ee,{pressed:!0,onClick:()=>U()})]}),!l&&e.jsx("div",{className:"mx-2 max-h-16 grow overflow-x-auto",children:N}),e.jsx("div",{className:"flex shrink gap-x-1.5 justify-self-end pe-2",id:"imagegen-voice-controls",children:T})]})})})]})})]})})})});function ae({target:a,rootId:n,additonalInteractiveIds:o}){let s=a;for(;s&&s!=null;){if(s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable||o.includes(s.id))return!0;if(s.id===n)return!1;s=s.parentElement}return!1}export{me as ImageGenComposer};
//# sourceMappingURL=heu4jyunh2d29vgy.js.map
