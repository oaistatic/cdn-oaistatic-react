const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blgb4cx1t3za2wz8.js","assets/jfjoua4700kji9z3.js","assets/ls1hkjm4csy89kc5.js","assets/root-g83krhyb.css","assets/hj6jep7mk4776vwc.js","assets/conversation-small-hvit8l60.css","assets/jl416oerpm5p44nd.js","assets/c166njesc8ruqs2t.js","assets/f35srtyza27o1d4v.js","assets/b8nw7o07u9fxmapm.js","assets/ltik0hzezyevzkdj.js","assets/c5hp2e6cf62lum4k.js","assets/oe4qwwp6lvtt8c1x.js","assets/frnfux3hbefwtfkz.js","assets/exdc9xpq8ubwzri2.js","assets/nn74387gyac7v6x1.js","assets/g3dajzb0qfwp9r26.js","assets/o9jgqf882rhql3wk.js","assets/pclmdskc3z69urs2.js","assets/m9dr8qz6tq7kspod.js","assets/ekgxdfqrb84ds7yx.js","assets/k8kf7qgmfsqvpagr.js","assets/ht69l5cqsqb2usac.js","assets/l54ge405za799dc0.js","assets/mbpp0embmbt5iptr.js","assets/nh14du86kynnf5fc.js","assets/dt7ksh4fvumz5f8p.js","assets/e65eph5k56t09h70.js","assets/enfrb2yfoh52zdmb.js","assets/kxop6zvaqduak0b6.js","assets/f06euqb6n9n90ph6.js","assets/lqfx7r9jl2q1tbdy.js","assets/oe00rdumq6mwsc0z.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{am as B,P as T,dN as tt,I as st,cW as $,di as at,a as ot,cH as U,aA as nt,l as Re,dJ as Be,eL as it,eK as rt,eI as lt,aj as dt,e7 as ct,aR as ut,aG as mt,fK as gt,gW as ve,fL as ft,co as G,cp as H,N as je,o as J,V as pt,M as K,R as Fe,cX as ht,fR as Ne,gN as xt,ag as Mt,gX as kt,dU as we,bP as bt,bQ as Ct,eQ as St,m as yt,J as vt,fG as jt,E as Nt,aH as wt,b9 as At}from"./jfjoua4700kji9z3.js";import{r as i,j as e,a9 as We,f as Ue,b as ze,e as D,a8 as F,M as w,d as Ve,h as z,k as It}from"./ls1hkjm4csy89kc5.js";import{kw as Pt,kx as Ge,ky as Ot,kz as Et,kA as _t,aF as He,a6 as Ke,c3 as Tt,kB as Dt,kC as Lt,kD as Rt,kE as Bt,kF as Ae,kG as Ft,kH as Wt,kI as Ut,o as qe,fN as zt,cZ as Vt,kJ as Gt,kK as Ht,cW as V,kL as Kt,kM as qt,kN as Qt,eJ as Jt,kO as Xt,kP as Yt,kQ as $t,kR as Zt,kS as es,kT as ts,kU as ss,kV as as,kW as os,kX as ns,kY as is,kZ as rs,k_ as ls,k$ as ds,l0 as cs,l1 as us,l2 as ms,l3 as gs,l4 as fs,l5 as ps,l6 as hs,l7 as xs,l8 as Ms,l9 as ks,la as bs,lb as Cs,lc as Ss,ld as ys,le as vs,lf as js,lg as Ns,lh as ws,li as As,lj as Is,lk as Ps,ll as Os,lm as Es,e$ as _s,aG as q,a5 as Ie,dc as Pe,cX as Z,ln as Ts,lo as Ds,lp as Oe,cc as Ls,ci as Rs,ch as Ee,cj as Bs,ds as Fs,at as X,lq as Ws,dK as Us,lr as zs,b5 as Vs,b6 as Gs,b7 as Hs,P as Qe,ls as Ks,g9 as qs,cr as Y,cs as _e,lt as Qs,lu as Js,lv as Xs,lw as Ys,lx as $s,ly as Zs,lz as ea,lA as ta,lB as sa,lC as aa,lD as oa,F as na,lE as ia,K as ra,lF as la,lG as da,T as Te,lH as ca,lI as ua,lJ as ma,lK as ga,eu as fa,ca as pa}from"./hj6jep7mk4776vwc.js";import{b as ha}from"./oe4qwwp6lvtt8c1x.js";import{b as xa,I as Ma}from"./f35srtyza27o1d4v.js";import{b as ka,P as ba}from"./exdc9xpq8ubwzri2.js";import{u as Ca,N as Sa}from"./ht69l5cqsqb2usac.js";import{a as ya,b as va,c as ja}from"./frnfux3hbefwtfkz.js";import{e as Na,C as wa,a as Aa}from"./jl416oerpm5p44nd.js";import{C as Ia}from"./l54ge405za799dc0.js";import{M as Pa}from"./e65eph5k56t09h70.js";function Oa({clientThreadId:s}){const t=Pt(n=>n.notifications),a=i.useRef(new Set);return i.useEffect(()=>{t.filter(o=>o.clientThreadId===void 0||s===o.clientThreadId).map(o=>o.id).filter(o=>o!==void 0).forEach(o=>Ge(o)),t.forEach(o=>{o.id&&!a.current.has(o.id)&&(B.logEvent("chatgpt_notification_shown"),T.logEvent("Notifications: Notification Shown to User"),a.current.add(o.id))})},[s,t]),t.length===0||tt?null:e.jsx("div",{className:"pointer-events-auto fixed end-4 top-8 z-100 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(We,{children:t.map(n=>e.jsx(_a,{...n},n.id))})})}function Ea({notification:s}){return s.icon?e.jsx(Ot,{size:"medium",className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border",IconComponent:s.icon}):e.jsx(Et,{iconName:"openai",size:"medium",className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border"})}function _a({...s}){const t=Ue(),a=ze(),n=D(),o=st(s.clientThreadId),l=()=>{B.logEvent("chatgpt_notification_clicked"),T.logEvent("Notifications: User Clicked Notification"),s.onClick!=null?s.onClick():o&&_t(t,a,o),s.id&&Ge(s.id)};return e.jsxs(F.div,{onClick:l,className:"border-token-border-default bg-token-main-surface-primary z-100 inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(Ea,{notification:s}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"text-token-text-primary w-full truncate text-sm font-medium",children:s.title??n.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),s.subtitle&&e.jsx("div",{className:"text-token-text-tertiary w-full truncate text-sm",children:s.subtitle}),s.payload?.display_image_url&&e.jsx("img",{className:"mt-2 h-12 w-12 rounded-xs",src:s.payload.display_image_url,alt:s.payload.image_alt})]})]})}const Ta=()=>{const{isLoading:s,eligible:t}=He(Ke.hasSeenContextualAnswerGoogleSyncFinished),a=Tt(),{connectionInstanceData:n,isLoading:o}=Dt({skip:!a}),l=Lt(n?.connection_statuses??[]),p=Rt({exposed:t&&a&&l})==="modal";return s||o?"loading":t&&a&&l&&p?"show":"hide"},Da=({onClose:s})=>{const t=D(),{markAsViewed:a}=He(Ke.hasSeenContextualAnswerGoogleSyncFinished);i.useEffect(()=>{T.logEvent("Contextual Answers User Fully Synced Modal")},[]);const n=()=>{a(),s(),Ft()},o=()=>{a(),s()},l=e.jsx(U,{color:"secondary",onClick:o,children:e.jsx(w,{id:"341zvt",defaultMessage:"Maybe later"})}),p=e.jsx(U,{color:"primary",onClick:()=>n(),children:e.jsx(w,{id:"N6nDT7",defaultMessage:"Try an example"})});return e.jsx($,{isOpen:!0,noPadding:!0,onClose:s,shouldIgnoreClickOutside:!0,size:"xlarge",type:"success",testId:"modal-ca-synced-nux",children:e.jsxs("div",{className:"relative px-2 py-8",children:[e.jsx(at,{onClick:s,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"}),e.jsx("div",{className:"text-heading-3 text-center",children:e.jsx(w,{id:"cB19NT",defaultMessage:"Ask ChatGPT anything,{br}even about information in your Google Drive.",values:{br:e.jsx("br",{})}})}),e.jsx("div",{className:"border-token-border-light text-token-text-tertiary text-body-small-regular mx-auto mt-5 mb-5 w-max rounded-4xl border px-6 py-3 text-center italic",children:e.jsx(w,{id:"6cGGS5",defaultMessage:"What's the latest status on project widgets?"})}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx(Q,{Logo:Bt,title:t.formatMessage({id:"E7Iqah",defaultMessage:"Project Widgets Budget"}),className:"z-10 translate-x-[2.5rem] translate-y-[2rem] rotate-[-4deg]"}),e.jsx(Q,{Logo:Ae,title:t.formatMessage({id:"cVbcSP",defaultMessage:"Project Widgets PRD"}),className:"z-20"}),e.jsx(Q,{Logo:Ae,title:t.formatMessage({id:"QbnI4s",defaultMessage:"Project Widgets Presentation"}),className:"z-10 translate-x-[-2.5rem] translate-y-[2rem] rotate-[4deg]"})]}),e.jsxs("div",{className:"mt-12 flex justify-center gap-3",children:[l,p]})]})})},Q=({Logo:s,title:t,className:a})=>e.jsxs("div",{className:ot("border-token-border-light bg-token-bg-primary w-[14rem] rounded-2xl border p-3 shadow-sm",a),children:[e.jsxs("div",{className:"mb-3 flex items-center",children:[e.jsx(s,{}),e.jsx("span",{className:"text-body-small-regular text-token-interactive-label-accent-default ms-2",children:t})]}),e.jsx("div",{children:e.jsx(ha,{lines:5,size:"sm"})})]}),De="has-dismissed-welcome-back-modal",Je=()=>{const[s,t]=i.useState(()=>sessionStorage.getItem(De)!=null),{layer:a}=nt("3637408529"),n=a.get("is_no_auth_welcome_back_modal_enabled",!1),o=Wt(),{isUnauthenticated:l,isLoading:p}=Re(),r=Ut(),m=ka(),g=()=>{t(!0),sessionStorage.setItem(De,"true")};return p?{isLoading:!0,isOpen:null,onClose:null}:{isLoading:!1,isOpen:l&&n&&!s&&r&&!o&&!m,onClose:g}},La=({onClose:s})=>{const t=qe(),a=zt(),n=Vt(R.signUpCta),o=a?"center":"bottom",{isOpen:l,onClose:p}=Je();return i.useEffect(()=>{l&&(T.logEvent("No Auth Welcome Back Modal Shown"),B.logEvent("chatgpt_no_auth_welcome_back_modal_shown"))},[l]),l?e.jsx($,{testId:"modal-no-auth-welcome-back",isOpen:!0,onClose:Be,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:o,children:e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[e.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:e.jsx(w,{...R.title})}),e.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-lg",children:e.jsx(w,{...R.subtitle})}),e.jsx(U,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"welcome-login-button",onClick:()=>{t({authType:"login",callback:r=>{T.logLogInButtonClicked({provider:r,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(w,{...R.logInCta})}),e.jsx(U,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{t({authType:"signup",callback:r=>{T.logSignUpButtonClicked({provider:r,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(w,{...n})}),e.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:r=>{r.preventDefault(),T.logEvent("No Auth Welcome Modal Stay Logged Out Link Clicked"),B.logEvent("chatgpt_no_auth_welcome_back_modal_stay_logged_out_link_clicked"),s(),p()},"data-testid":"dismiss-welcome",children:e.jsx(w,{...R.stayLoggedOutLink})})]})}):null},R=Ve({title:{id:"NoAuthWelcomeBackModal.title",defaultMessage:"Welcome back"},subtitle:{id:"7WQi5y",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},signUpCta:{id:"NoAuthWelcomeBackModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthWelcomeBackModal.logInCta",defaultMessage:"Log in"},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),Ra=({onClose:s})=>{const t=D(),a=V(Z.isBusinessWorkspace),n=V(l=>l.currentWorkspace),o=a?t.formatMessage(Le.workspaceWelcome,{workspaceName:n?.name}):"ChatGPT";return e.jsx($,{testId:"modal-onboarding",isOpen:!0,onClose:Be,type:"success",title:o,size:"custom",noPadding:!0,className:"max-w-3xl",description:t.formatMessage(Le.personalOnboardingSubheading),children:e.jsx(Ts,{onClose:s,scope:Ds.Personal})})},Ba=({onClose:s})=>{const t=ft.useStore();return i.useEffect(()=>(t.setOnCloseSideEffect(s),t.setManualVisibility(!0),()=>{t.setManualVisibility(!1)}),[s,t]),null};function Fa({clientThreadId:s}){const[t,a]=i.useState(0),{hasSeenOnboardingDate:n}=Gt(),{hasSeenTeamOwnerOnboardingDate:o}=Ht(),l=V(Z.isBusinessWorkspace),[p,r]=i.useState(!1),m=z(),g=Kt(m),{data:h,isPending:I,isEnabled:M}=qt(),k=Qt(h,I&&M),P=it(),b=rt(),v=lt(),[j,N]=dt(s,x=>[!x||x.isLoading,x?.conversationOrigin]),{data:f,isError:S}=ct(),A=ut(f),C=f!=null,O=f&&f?.accountItems.length>1&&f.currentAccountId==null,u=f?.accountItems.some(x=>x.isPersonalAccount()),c=!!f?.accountItems&&f.accountItems.length>0&&f.accountItems.every(({canAccessWithCurrentSession:x})=>!x),{eligible:d,isLoading:y}=Jt(),{value:E}=mt("1542198993"),{punchOutRequireLoginInfo:ee}=Xt(),{state:te}=Yt(),{isOpen:se,isLoading:ae}=$t(),{isOpen:oe,isLoading:ne}=Zt(),{isOpen:ie,isLoading:re}=es(),{isOpen:le,isLoading:de}=Je(),{state:ce}=ts(),ue=ss(),me=xa(),ge=as(),fe=os(),pe=ns(),he=Ta(),xe=is(),Xe="hide",Me=rs(),{isOpen:ke,isLoading:be}=ls(),Ye=ds(s),{shouldShowCookieBanner:Ce,isCookieConsentBannerLoading:Se}=gt(),L=i.useMemo(()=>[{Component:cs,getModalState:()=>ee?"show":"hide",isDeferrable:!1},{Component:us,getModalState:()=>te,isDeferrable:!1},{Component:ms,getModalState:()=>ce,isDeferrable:!1},{Component:gs,getModalState:()=>be?"loading":ke?"show":"hide",isDeferrable:!1},{Component:fs,getModalState:()=>ge,isDeferrable:!0},{Component:ps,getModalState:()=>ae||j?"loading":N===ve.APPLE?"hide":se?"show":"hide",isDeferrable:!0},{Component:La,getModalState:()=>de||j?"loading":N===ve.APPLE?"hide":le?"show":"hide",isDeferrable:!0},{Component:Ba,getModalState:()=>Se?"loading":Ce?"show":"hide",isDeferrable:!1},{Component:Ra,getModalState:()=>l||g?"hide":n===null?"loading":n===!1?"show":"hide",isDeferrable:!0},{Component:hs,getModalState:()=>S?"hide":O?"show":C?"hide":"loading",isDeferrable:!1},{Component:xs,getModalState:()=>P!==null?"show":S||C?"hide":"loading",isDeferrable:!1},{Component:Ms,getModalState:()=>b!==null?"show":S||C?"hide":"loading",isDeferrable:!1},{Component:ks,getModalState:()=>v!=null?"show":S||C?"hide":"loading",isDeferrable:!1},{Component:bs,getModalState:()=>C?c?"show":"hide":"loading",isDeferrable:!1},{Component:Cs,getModalState:()=>ne?"loading":oe?"show":"hide",isDeferrable:!1},{Component:Ss,getModalState:()=>re?"loading":ie?"show":"hide",isDeferrable:!1},{Component:ys,getModalState:()=>"hide",isDeferrable:!1},{Component:vs,getModalState:()=>!A?.isTeam()||!A?.isOwnerOfAccount()||!u?"hide":!C||o===null?"loading":o===!1?"show":"hide",isDeferrable:!1},{Component:js,getModalState:()=>l?n===null?"loading":n===!1?"show":"hide":"hide",isDeferrable:!0},{Component:Ns,getModalState:()=>y?"loading":d&&E?"show":"hide",isDeferrable:!1},{Component:ws,getModalState:()=>k,isDeferrable:!1},{Component:As,getModalState:()=>ue,isDeferrable:!1},{Component:x=>e.jsx(Ma,{clientThreadId:s,...x}),getModalState:()=>me,isDeferrable:!1},{Component:Da,getModalState:()=>he,isDeferrable:!1},{Component:Is,getModalState:()=>fe,isDeferrable:!1},{Component:Ps,getModalState:()=>pe,isDeferrable:!1},{Component:Os,getModalState:()=>xe,isDeferrable:!0},{Component:Es,getModalState:()=>Me,isDeferrable:!1}],[ee,te,ce,be,ke,ge,ae,j,N,se,de,le,Se,Ce,l,g,n,S,O,C,P,b,v,c,ne,oe,re,ie,A,u,o,y,d,E,k,ue,s,me,he,fe,pe,xe,Xe,Me])[t],$e=p||Ye;let _;L&&(L.isDeferrable&&$e?_="hide":_=L.getModalState()),i.useEffect(()=>{_==="hide"&&a(t+1)},[t,_]);const{pathname:W}=z(),ye=i.useRef(W);if(i.useEffect(()=>{ye.current!==W&&(ye.current=W,a(0))},[W]),i.useEffect(()=>{const x=_==="show",et=_s.getState().activeModals.has(q.BlockingInitialComponent);x!==et&&(x?Ie.openModal(q.BlockingInitialComponent):Ie.closeModal(q.BlockingInitialComponent))},[_]),L==null)return Pe.trackNamespace(Pe.NS_COMPOSER),e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(_!=="show")return null;const Ze=L.Component;return e.jsx(Ze,{onClose:()=>{r(!0),a(x=>x+1)}})}const Le=Ve({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Wa=G(async()=>H(()=>import("./blgb4cx1t3za2wz8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then(s=>s.ImageGenNewEditor));function Ua({postWithProfile:s,clientThreadId:t,closeModal:a}){const n=i.useRef(null),[o,l]=i.useState(!1),[p,r]=i.useState(!1),m=Ue(),{post:g}=s,h=g.attachments[g.attachments.length-1],I={url:h.url,content_type:je.ImageAssetPointer,asset_pointer:h.asset_pointer??Oe(h.id),size_bytes:0,width:h.width,height:h.height},M=D(),k=Ls(),P=J(t),b=pt(),v=i.useCallback(u=>k.getState().files.find(c=>c.tempId===u),[k]),j=h.url,N=i.useCallback(async u=>{if(n.current){const c=await n.current,d=c?v(c?.tempId):null;if(d)return d}return n.current=fetch(u).then(c=>c.blob()).then(c=>{const d=new File([c],"image.png",{type:"image/png"}),y=Rs(d);return Ee.uploadFile(k,y,d,Bs.Multimodal,[d.type],M,b).then(()=>{const E=v(y);return E&&E.status===Fs.Ready&&E.fileId?E:null})}),n.current},[k,M,b,v]),{onRequestCompletion:f}=Na(),{isUnauthenticated:S}=Re(),A=i.useCallback(async u=>{if(!(!u.promptMessage||S)){r(!0);try{const c=await N(j);if(!c||!c.fileId||!c.fileSpec)return;const d=[{content_type:je.ImageAssetPointer,asset_pointer:Oe(c.fileId),size_bytes:c.fileSpec.size,width:h.width,height:h.height},...u.promptMessage.content.content_type===K.MultimodalText||u.promptMessage.content.content_type===K.Text?u.promptMessage.content.parts:[]],y={...u,promptMessage:{...u.promptMessage,content:{content_type:K.MultimodalText,parts:d}}};f(y),a(),Ee.reset(k)}catch{b.danger(M.formatMessage({id:"postReceiverModal.editImageError",defaultMessage:"Failed to edit the image"}))}finally{r(!1)}}},[h.height,h.width,N,f,k,j,a,S,M,b]),C=i.useCallback(async()=>{if(window.confirm(M.formatMessage({id:"postReceiverModal.deletePostConfirmation",defaultMessage:"Are you sure you want to delete this post?"})))try{await Fe.safeDelete("/share/post/{post_id}",{parameters:{path:{post_id:g.id}}}),m("/",{replace:!0})}catch{b.danger(M.formatMessage({id:"postReceiverModal.deletePostError",defaultMessage:"Failed to delete the post"}))}},[g.id,M,b,m]),O=e.jsx(e.Fragment,{children:e.jsxs(F.div,{className:"flex h-16 w-full px-2 sm:px-4",...X,children:[e.jsx("div",{className:"flex items-center justify-self-start text-start",children:e.jsx(ya,{onClose:()=>{a(),m("/",{replace:!0})}})}),e.jsx("div",{className:"flex w-full flex-1 flex-col items-center justify-center justify-self-stretch",children:e.jsx(Ws,{areButtonsFullWidth:!0,post:g,setIsReportModalOpen:()=>{l(!0)}})}),e.jsxs("div",{className:"flex items-center justify-self-end text-end",children:[g.permissions.can_delete&&e.jsx(va,{tooltip:M.formatMessage({id:"postReceiverModal.deletePost",defaultMessage:"Delete"}),onClick:C,children:e.jsx(Us,{})}),e.jsx(ja,{imageAsset:I,serverThreadId:P})]})]})});return e.jsxs("div",{className:"bg-token-main-surface-primary absolute start-0 end-0 top-0 bottom-0 h-full w-full",children:[e.jsx(zs,{children:e.jsx(Wa,{image:I,isLoadingNewImage:!1,clientThreadId:t,onClose:()=>{a(),m("/",{replace:!0})},onRequestCompletion:A,editorControls:O,messageId:g.id,footer:p?e.jsx(za,{}):null})}),o&&e.jsx(Va,{post:g,onClose:()=>l(!1)})]})}function za(){const s=D();return e.jsxs(F.div,{className:"shadow-token-border-default pointer-events-none inline-flex items-center justify-center gap-1.5 self-center rounded-[16px] px-3.5 py-2 text-sm shadow-lg",transition:{duration:.3,ease:"easeInOut"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(ht,{}),e.jsx("span",{children:s.formatMessage({id:"postReceiverModal.preparingImage",defaultMessage:"Preparing image..."})})]})}function Va({post:s,onClose:t}){const{data:a}=Vs(Ne.Post),n=D(),o=Gs(n,s.id,Ne.Post);if(a==null)return null;const l=`Report ${s.text??"Post"}`;return e.jsx(Hs,{reasons:a.reasons,submitReport:o,title:l,onClose:t,header:a.header,subHeader:a.header_explanation})}function Ga({clientThreadId:s}){const t=Ca();return e.jsxs(e.Fragment,{children:[t&&e.jsx(Sa,{}),e.jsx(Ha,{clientThreadId:s})]})}function Ha({clientThreadId:s}){const t=i.useContext(ba),[a,n]=i.useState(!!t?.postWithProfile);return!t?.postWithProfile||!a?null:e.jsx(Qe,{clientThreadId:s,children:e.jsx(Ua,{clientThreadId:s,postWithProfile:t.postWithProfile,closeModal:()=>n(!1)})})}const Ka=450;function qa({children:s,clientThreadId:t,isOpen:a,onClose:n,type:o}){return e.jsx(We,{children:a&&e.jsx(xt,{children:e.jsx(Ks.Provider,{value:{isEmbeddedInFocusedView:!0,type:o},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(F.div,{className:"bg-token-main-surface-secondary h-full w-full",...X}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"grow overflow-auto",children:s}),e.jsx(F.div,{className:"border-token-border-medium bg-token-main-surface-primary relative shrink-0 border-s",style:{width:Ka},...X,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Pa,{clientThreadId:t,hideHeader:!0,hideToolsOverlay:!0,hideDisclaimer:!0,messagesVerticalAlign:"bottom"},t)})})]})]})})})})}const Qa=G(()=>H(()=>import("./o9jgqf882rhql3wk.js"),__vite__mapDeps([17,1,2,3,4,5,18,19,20]))),Ja=G(()=>H(()=>import("./k8kf7qgmfsqvpagr.js"),__vite__mapDeps([21,1,2,3,4,5,12,8,6,7,9,10,11,14,22,13,15,16,23,24,25,26,27,28,29,30,31])).then(s=>s.ImageEditor));function Xa({clientThreadId:s}){const t=qs();i.useEffect(()=>{Y.close()},[s]);let a;return t?.type===_e.ADAVisualization?a=e.jsx(Qa,{clientThreadId:s,visualization:t.visualization}):t?.type===_e.Image&&(a=e.jsx(Ja,{clientThreadId:s,messageId:t.messageId,image:t.image,allImages:t.allImages},t.image.asset_pointer)),e.jsx(qa,{clientThreadId:s,isOpen:t!=null,onClose:Y.close,type:t?.type,children:a})}var Ya={};const $a=G(()=>H(()=>import("./oe00rdumq6mwsc0z.js"),__vite__mapDeps([32,2,1,3,6,4,5,7,27,22,10,9,14,8,11,12,28,29,30,31,33])));function go(s){const{urlThreadId:t,clientThreadId:a,prefetchSearch:n}=s,o=Mt(),l=z(),[p]=It(),[r,m]=i.useState(()=>{if(t!==void 0){const d=t;return kt(d)??d}return a!==void 0?a:we()});t!==void 0&&r!==t&&(J(r)===t||m(t));const g=Qs(z());i.useEffect(()=>{t===void 0&&J(r)!==void 0&&m(we())},[t,r,g]);const h=V(Z.workspaceId),{eligible:I,isLoading:M,markAsViewed:k}=Js(),P=Xs(),{eligible:b,isLoading:v,markAsViewed:j}=Ys(),N=$s(),{eligible:f,isLoading:S,markAsViewed:A}=Zs(),C=ea(),O=qe();i.useEffect(()=>{bt(!0).then(d=>{d.force_login&&O({authType:"login"}),ta.initializeAndGatherData(d),Ct.initializeAndGatherData(d)})},[O]),i.useEffect(()=>{const d=p.get(sa)==="true";o!==d&&St.setIsTemporaryChatEnabled(d)},[o,p]),i.useEffect(()=>{l.state?.focusObject&&Y.setFocusedObject(l.state.focusObject)},[l.state?.focusObject]),i.useEffect(()=>{!M&&I&&(k(),P())},[I,M,k,P]),i.useEffect(()=>{!v&&b&&(j(),N())},[b,v,j,N]),i.useEffect(()=>{!S&&f&&(A(),C())},[f,S,A,C]),aa(r);const u=ze(),c=yt();return i.useEffect(()=>{vt(c)&&B.checkGate("1661641186")&&u.fetchQuery({queryKey:["recent","images","bootstrap"],queryFn:()=>Fe.safeGet("/images/bootstrap",{})})},[u,c]),i.useEffect(()=>jt(At,{completionFinished:d=>{if(d.serverThreadId!=null&&!o){const y=Nt(d.serverThreadId)?.mode;y?.kind===wt.GizmoInteraction&&fa.handleGizmoInteracted(u,y.gizmo_id)}}}),[o,u]),e.jsx(oa.Provider,{value:null,children:e.jsx(na,{children:e.jsxs(ia,{clientThreadId:r,children:[e.jsxs(wa,{clientThreadId:r,children:[e.jsx(Qe,{clientThreadId:r,children:e.jsx(Fa,{clientThreadId:r},h)}),e.jsx(Za,{clientThreadId:r,setClientThreadId:m}),e.jsx(ra,{}),e.jsx(la,{}),e.jsx(da,{}),e.jsx(Aa,{clientThreadId:r,setClientThreadId:m,prefetchSearchPromises:n,children:e.jsxs(Te,{clientThreadId:r,children:[e.jsx(ca,{}),e.jsx(Ia,{urlThreadId:t,clientThreadId:r,setClientThreadId:m}),e.jsx(Ga,{clientThreadId:r})]})})]}),e.jsx(Te,{clientThreadId:r,children:e.jsx(Xa,{clientThreadId:r})}),e.jsx(ua,{clientThreadId:r}),e.jsx(ma,{}),e.jsx(Oa,{clientThreadId:r}),e.jsx(ga,{})]})})})}function Za({clientThreadId:s,setClientThreadId:t}){const{isOpen:a,isLoading:n}=pa();return!n&&a?e.jsx($a,{clientThreadId:s,setClientThreadId:t}):null}typeof window<"u"&&(window._g=Ya.GOKU_SERVICE);export{go as C,Ka as F};
//# sourceMappingURL=y3btu25tgs4khvwj.js.map
