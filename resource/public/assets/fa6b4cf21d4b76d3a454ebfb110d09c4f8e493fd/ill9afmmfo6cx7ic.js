import{fE as E,dk as g,dO as R,dW as M,aH as F,af as y,dD as B,B as O}from"./jfjoua4700kji9z3.js";import{C as H,k as N,f as k,r as s,b as A,j as e}from"./ls1hkjm4csy89kc5.js";import{r as D,t as T,a as m,u as _,s as L,C as j,b as Q,g as b,P as $,T as q,c as K,d as V}from"./hj6jep7mk4776vwc.js";import{C as W}from"./n3zdfvn2wsqd8rrk.js";import{T as G,C as z}from"./d8ytzgf8v2rctay1.js";import{g as J}from"./lup3lhp4jup8hwgh.js";import{C as w,T as U}from"./ko48v43v67hat5pb.js";import{C as X}from"./jl416oerpm5p44nd.js";import"./jy1u8exw8iz2slve.js";import"./gy64pge8qevmvg7e.js";import"./ekgxdfqrb84ds7yx.js";import"./m6d28lwoyiuxtlg3.js";import"./f06euqb6n9n90ph6.js";import"./oe4qwwp6lvtt8c1x.js";import"./maaa59io6z1tsugr.js";import"./eznezzwnoh2bc43l.js";import"./c166njesc8ruqs2t.js";import"./op6u27mntqa8at4f.js";import"./fzrn137102spawew.js";import"./fbs9v8bh3wllita3.js";import"./lqfx7r9jl2q1tbdy.js";import"./gnihsipfzowq5klb.js";import"./gm98iwmt6t0m5rzt.js";import"./f9d7padxd97mxih2.js";import"./bjbryornudc3ovxe.js";import"./ht69l5cqsqb2usac.js";import"./ltik0hzezyevzkdj.js";import"./b8nw7o07u9fxmapm.js";import"./epe2ts57f6uih0zz.js";const Ee=()=>(D(),null),Re=E(function(){const a=H(),[o]=N(),u=k(),p=T(a.conversationId),i=m(o.get("readonly"),!1),c=m(o.get("isFullScreen"),!1),d=m(o.get("header"),!0),l=m(o.get("appPreview"),!1),r=g(()=>R()),C=g(()=>M()),P=m(o.get("hideBottomComposer"),!!i),n=T(a.canmoreId),t=p,f=_();s.useEffect(()=>{L({type:j.Textdoc,textdocId:n})},[n]),Q(t,{kind:F.PrimaryAssistant});const h=A();if(s.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),s.useEffect(()=>{n||u("/")},[n,u]),s.useEffect(()=>{b().sendMessage({type:w.Loaded})},[n]),!n||f?.type!==j.Textdoc)return null;const I=()=>{b().sendMessage({type:w.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx($,{clientThreadId:t,children:e.jsx(X,{clientThreadId:t,children:e.jsx(q,{clientThreadId:t,children:l?e.jsx(B,{children:e.jsx(Y,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(G,{clientThreadId:t,disableScroll:!r,textdocId:f.textdocId}),e.jsx(z,{})]}):e.jsx(U,{isEmbedded:!0,hideRunCode:!r,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:I},"textdocContent")})})})]})}),Y=({textdocId:x})=>{const a=s.useRef(null),o=K(x),[u,p]=s.useState(!1),i=o?.versions??[],c=O(i),d=s.useCallback(V(async l=>{const r=J(l.type,l.content);if(a.current&&(r==="react"||r==="html")){p(!0);const v=a.current.evalAsync({language:r,code:l.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return s.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(W,{visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Ee as clientLoader,Re as default};
//# sourceMappingURL=ill9afmmfo6cx7ic.js.map
