const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pfcp9jpwj20rwczo.js","assets/ls1hkjm4csy89kc5.js","assets/jfjoua4700kji9z3.js","assets/root-g83krhyb.css","assets/j0ktnodk3otj1rlg.js","assets/cmtje5sf6w4ozgy9.js","assets/hj6jep7mk4776vwc.js","assets/conversation-small-hvit8l60.css","assets/keturmxd6ej4338l.js","assets/np3k8d7kul7llit2.js","assets/f7qe60j8ccrq3x4n.js","assets/ht69l5cqsqb2usac.js","assets/ltik0hzezyevzkdj.js","assets/jl416oerpm5p44nd.js","assets/c166njesc8ruqs2t.js","assets/b8nw7o07u9fxmapm.js","assets/i400nui35nebq1nk.js","assets/l79zzb39cu0ju7b8.js","assets/hs1cxbaatjjjvt15.js","assets/etwkfz2vgi16v29o.js","assets/n0n44ckj174gd2eb.js","assets/euq7ybw4dhrsufo2.js"])))=>i.map(i=>d[i]);
import{aj as ze,h5 as ga,a as E,P as U,E as ha,cH as ge,cX as Oe,f1 as pa,m as qe,d7 as fa,h6 as xa,j as ya,fH as Y,l as he,aA as $,bD as pe,bZ as jt,ag as Mt,dH as va,aD as Nt,gy as ba,C as J,h as ee,as as ct,at as dt,cr as _t,aG as me,aL as Be,cm as Sa,dC as wa,R as Ca,aP as ja,ae as je,I as Ye,bW as Ma,fe as kt,co as Tt,cp as Et,ab as Ue,bL as Na,b5 as _a,a_ as ka,bw as Ta,D as ut,h7 as Ea,ah as Aa,aH as Pa,dc as Ia,ec as La,F as te,gW as Ra,fP as Ha,dD as Wa,b8 as Da}from"./jfjoua4700kji9z3.js";import{r as i,f as $e,b as Qe,j as e,a8 as Fe,M as L,e as F,d as At,p as Re,L as Ga,v as Oa,R as Ua,k as Fa}from"./ls1hkjm4csy89kc5.js";import{nN as Pt,gv as It,nO as fe,gR as Va,cb as Lt,kk as Rt,gT as za,gU as Ht,f as mt,gW as qa,gV as Ba,nP as Ya,kA as $a,aD as gt,as as Qa,cw as Ka,cx as Xa,nQ as Za,nR as He,ip as ht,dU as Ja,aE as es,aq as ts,cy as as,nS as ss,t as Ve,cz as ns,P as Wt,F as os,lr as Ke,nT as Dt,nU as pt,nV as is,nW as Xe,nX as Gt,f5 as Ze,nY as Ot,nZ as Ut,n_ as Ft,mD as Vt,n$ as zt,o0 as ae,o1 as ft,o2 as rs,my as A,o3 as xt,kj as ls,o4 as qt,o5 as cs,o6 as ds,o7 as us,o8 as ms,o9 as gs,oa as hs,ob as Je,mC as Bt,oc as ps,od as fs,bb as xs,bm as Yt,f0 as ys,eK as vs,a5 as Me,aG as bs,oe as Ss,of as ws,og as Cs,oh as yt,oi as js,oj as Ms,ok as Ns,ol as _s,hJ as ks,cj as Ts,om as Es,on as _,W,kF as As,oo as Ps,kE as Is,bN as Ls,c4 as Rs,op as Hs,df as vt,d as Ws,mc as Ds,oq as Gs,or as Os,e$ as $t,dX as Us,G as et,u as Fs,ni as Qt,ac as Vs,os as zs,x as qs,ot as Bs,af as Ys,ou as $s,f8 as Qs,ov as Ks,gw as Xs,ow as Zs,ak as Js,al as bt,fS as en,I as tn,ah as an,ox as sn,ce as nn,ht as on,ae as rn,nE as ln,oy as We,oz as cn,oA as dn,eE as un,oB as mn,i6 as Kt,oC as gn,oD as hn,ja as pn,eg as fn,oE as xn,oF as yn,oG as vn,oH as bn,oI as Sn,aj as wn,oJ as Cn,oK as jn,oL as Mn,oM as Nn,oN as _n,oO as kn,oP as Tn}from"./hj6jep7mk4776vwc.js";import{C as tt,e as at,b as se,P as En}from"./jl416oerpm5p44nd.js";import{d as Xt,L as An,C as Pn,e as In}from"./ht69l5cqsqb2usac.js";import{u as Ln,b as Rn}from"./exdc9xpq8ubwzri2.js";import{c as Hn,a as Wn,M as Dn,F as Gn,T as On}from"./f35srtyza27o1d4v.js";import{S as Un}from"./enfrb2yfoh52zdmb.js";import{T as Fn}from"./kxop6zvaqduak0b6.js";import"./f06euqb6n9n90ph6.js";const Vn=({assetPointer:t,isInFocusMode$:a,serverThreadId:s,transformationId:o,width:r,height:n,onEdit:u})=>{const m=Pt(),[h,g]=i.useState(!1),[c]=ze(s,p=>[p?.modelId]),d=It(s),b=fe(),l=$e(),S=Qe(),C=i.useRef(null);i.useEffect(()=>{Hn.prefetch()},[]),i.useEffect(()=>{g(!1),a?.set(!1)},[t,a]),i.useEffect(()=>ga(()=>{a&&!a()&&g(!1)}),[a]),Va(i.useMemo(()=>({image:{asset_pointer:t,metadata:{dalle:{gen_id:o},generation:{gen_id:o}},height:n,width:r},currentDrawnShape:null,onCleared:()=>{},getImageData:()=>{}}),[o,t,n,r]));const k=p=>{b.transitionToPage({type:"conversation",value:void 0},()=>{u?.(),$a(l,S,s,void 0,!0),d(p)})},x=Lt();return e.jsx(Rt,{children:e.jsx(Fe.div,{layout:!m,transition:{type:"spring",duration:.2},className:E(h?"w-full rounded-3xl":"mx-auto rounded-full"),children:h?e.jsx(za,{value:{isImageGenEditor:!0,isInpainting:!1,onCancelInpaint:()=>{}},children:e.jsx(tt,{clientThreadId:s,children:e.jsx(Wn,{clientThreadId:s,currentModelId:c??Ht(void 0).id,disableDraftPersistence:!0,onRequestCompletion:async p=>{a?.set(!1),U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_edit_submitted","chatgpt_web_image_library_lightbox_image_edit_submitted"),ha(s)==null&&await(C.current??mt(s,!0)),k(await qa(p))},onContinueGenerating:p=>k(Ba(p)),hideHeader:!0,isNewThread:!1})})}):e.jsx(ge,{color:"secondary",size:x?"large":void 0,className:"px-4 max-md:min-w-[50vw]",onClick:()=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_composer_opened","chatgpt_web_image_library_lightbox_image_composer_opened"),g(!0),a?.set(!0),C.current=mt(s,!0).finally(()=>{C.current=null})},icon:x?void 0:Ya,children:e.jsx(Fe.div,{initial:m?!1:{opacity:0},animate:{opacity:1},children:e.jsx(L,{id:"BD4ZLh",defaultMessage:"Edit image"})})})})})},zn=({assetPointer:t,serverThreadId:a,messageId:s})=>{const o=F(),[r,n]=i.useState(!1),u=Ln({assetPointer:t,clientThreadId:a,messageId:s}),m=i.useCallback(async()=>{n(!0);try{await u()}finally{n(!1)}U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_share_clicked","chatgpt_web_image_library_lightbox_image_share_clicked")},[u]),h=o.formatMessage({id:"lqgWN2",defaultMessage:"Share"});return e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"max-md:hidden",color:"secondary",icon:r?Oe:gt,onClick:m,disabled:r,children:h}),e.jsx(ge,{color:"ghost",className:"text-token-text-secondary w-10 md:hidden",icon:r?Oe:gt,size:"xl",onClick:m,label:h,disabled:r})]})},qn=({images:t,initialIndex:a,onScrollToEnd:s,onClose:o})=>{const r=F(),n=Qa(),[u]=i.useState(()=>pa(!1)),m=fe(),h=$e();return e.jsxs(Ka,{imageList:t,initialIndex:a??0,onClose:o,isInFocusMode$:u,onScrollToEnd:s,children:[e.jsx(Xa,{children:({title:g,createdAt:c})=>e.jsxs("div",{className:"flex min-h-12 min-w-0 flex-col items-center max-md:h-full",children:[e.jsx("h2",{className:"text-token-text-primary max-w-full min-w-0 grow justify-center self-start truncate text-base text-balance max-md:flex max-md:items-center max-md:ps-2",children:e.jsx("span",{className:"line-clamp-2",children:g??e.jsx(L,{id:"OIDfvR",defaultMessage:"Image Generation"})})}),c&&e.jsx("span",{className:"text-token-text-secondary text-sm max-md:hidden",children:c.toDateString()})]})}),e.jsxs(Za,{children:[e.jsx(He,{children:({conversationId:g,messageId:c})=>e.jsx(ht,{className:"aspect-square",icon:Ja,onClick:d=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),d.preventDefault(),m.addClassToCurrentTransition(["from-lightbox","to-conversation"]),m.transitionToPage({type:"conversation",value:void 0},async()=>{o(null),await h(`/c/${g}?message=${c}`,{preventScrollReset:!0})})},"aria-label":r.formatMessage(St.openInChat)})}),e.jsx(He,{children:({url:g,title:c})=>e.jsx(ht,{className:"aspect-square",icon:es,onClick:()=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),ts({url:g,fileName:`${c??r.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"})}.png`})},"aria-label":r.formatMessage(St.download)})}),n()&&e.jsx(He,{children:({assetPointer:g,conversationId:c,messageId:d})=>!c||!d?null:e.jsx(zn,{assetPointer:g,serverThreadId:c,messageId:d})})]}),e.jsx(as,{children:({url:g,width:c,height:d,title:b,position:l})=>e.jsx("img",{className:ss("bg-tertiary block h-fit max-h-full w-auto rounded-lg object-contain shadow-xl max-md:rounded-none max-md:shadow-none",l==="current"&&"[view-transition-name:var(--vt-active-image)]"),style:l&&l!=="current"?{viewTransitionName:`var(--vt-image-${l})`}:void 0,src:Ve(g),width:c,tabIndex:0,height:d,alt:b??""})}),e.jsx(ns,{children:({width:g,height:c,assetPointer:d,conversationId:b,transformationId:l})=>b&&d&&e.jsx(Vn,{isInFocusMode$:u,onEdit:()=>o(null),width:g,height:c,assetPointer:d,serverThreadId:b,transformationId:l})})]})},St=At({download:{id:"1EzE2f",defaultMessage:"Save"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"}}),Zt=({disableEntryAnimation:t=!1,hasMoreImages:a,count:s,images:o,isFetchingMore:r,onScrollToEnd:n})=>{const u=a?Math.max((s??0)-(o.length??0),0):0,[m,h]=i.useState(!1),[g,c]=i.useState(null),d=fe(),b=qe(),{clientThreadId:l}=at(),S=i.useCallback(C=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened"),h(!0),c(C),d.transitionToPage({type:"lightbox",value:void 0},()=>{fa(b,({closeModal:k})=>e.jsx(Wt,{clientThreadId:l,children:e.jsx(os,{children:e.jsx(Ke,{children:e.jsx(qn,{onClose:x=>{if(x==null){k();return}Dt({update:()=>{k(),c(x),h(!0)},className:"from-lightbox",forceFlushSync:!0}).finished.then(()=>h(!1))},images:o,initialIndex:C,onScrollToEnd:n})})})})),h(!1)})},[l,b,o,n,d]);return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-4 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4",children:o.map(({url:C,thumbnail:k,width:x,height:p,title:y=null},N)=>e.jsx(pt,{disableEntryAnimation:t,index:N,active:m&&g===N,src:Ve(C),onClick:S,thumbnail:Ve(k),width:x,height:p,alt:y,children:N===o.length-1&&e.jsx(is,{onScrollToEnd:n})},N)).concat(new Array(u).fill(null).map((C,k)=>{const x=o.length+k;return e.jsx(pt,{index:x,disableEntryAnimation:t,isPlaceholder:!0,active:!1},x)}))}),e.jsx("div",{className:"flex h-8 items-center justify-center",children:a&&r&&e.jsx(Oe,{})})]})};function Bn({isMobile:t=!1,includeArchived:a,setIncludeArchived:s}){const{data:o}=Xe(),r=!!o?.archived_images_count,u=F().formatMessage({id:"vMAtK7",defaultMessage:"Create image"}),m=Gt();return e.jsxs("header",{"data-landing-page-load-target":!0,className:E("flex w-full items-center justify-between",t&&"px-2",!t&&"h-header-height bg-token-main-surface-primary sticky top-0 z-20 px-3 py-3 max-md:hidden"),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Xt,{clientThreadId:xa}),e.jsx("h1",{className:"text-token-text-secondary text-lg font-semibold tracking-[-0.28px] [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:px-3.5",children:e.jsx(L,{id:"Az9rja",defaultMessage:"My Library"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ge,{type:"button",color:"ghost",className:"border-token-border-default border max-md:aspect-square max-md:w-10",onClick:m,children:[e.jsx(Ze,{"aria-label":"",className:"icon-md max-md:icon-sm"}),e.jsx("span",{className:"max-md:sr-only",children:u})]}),r&&e.jsx(Ot,{includeArchived:a,setIncludeArchived:s}),e.jsx(An,{})]})]})}function ko({includeArchived:t,setIncludeArchived:a}){const{images:s,hasNextPage:o,isLoading:r,isFetchingNextPage:n,fetchNextPage:u}=Ut(t),{data:m,isLoading:h}=Xe(),g=qe(),c=ya(g).checkGate("2980121290"),d=Gt();if(i.useEffect(()=>{U.logEventWithStatsig("chatgpt_web_image_library_page_viewed","chatgpt_web_image_library_page_viewed")},[]),!c)return null;const b=m?.images_count??0,l=!h&&!b;return e.jsxs("div",{className:"flex w-full flex-1 flex-col items-center gap-4 justify-self-center",children:[e.jsx(Bn,{includeArchived:t,setIncludeArchived:a}),e.jsxs("div",{className:E("w-full max-w-3xl px-8 max-md:px-0 md:mt-10",l?"pt-8":"max-md:pt-0"),children:[l&&e.jsx(Ft,{borderless:!0,onClick:d}),!l&&e.jsx(Ke,{children:e.jsx(Jt,{images:s,hasMoreImages:o,isLoading:r,isFetching:n,fetchNextPage:u,imageCount:b,disableEntryAnimation:!0})})]})]})}function Jt({images:t,disableEntryAnimation:a=!1,hasMoreImages:s,isLoading:o,isFetching:r,fetchNextPage:n,imageCount:u}){return e.jsx(Zt,{disableEntryAnimation:a,count:u,images:t,hasMoreImages:s,isFetchingMore:r||o,onScrollToEnd:n})}function Yn({clientThreadId:t,mobile:a}){const s=se(),[o,r]=i.useState(),n=Lt(),{updateSystemHint:u}=Vt(),{transitionToNextPage:m}=zt(),h=ae(),g=Y(h.isImageGenLandingPageEnabled$),c=Y(h.isAllPagesEnabled$),d=ft.useState(({persistedSystemHints:x})=>x),b=ft.useState(({availableHints:x})=>x);if(n&&!a)return null;const l=Array.from(d)[0],S=[],C=a?ms:gs;g&&!c?S.push(rs[A.PictureV2]):c&&S.push(...C);const k=x=>{u(x,{clientThreadId:t}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{s?.focus()})})};return e.jsx("div",{className:xt.vanguardAppLaunchersContainer,children:e.jsx(ls,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:e.jsx("ol",{className:E("start-0 end-0 flex w-full justify-center gap-10 select-none md:absolute md:mt-12",xt.vanguardAppLaunchers),children:S.map(x=>{const p=b.find(N=>N.systemHint===x.systemHint),y=p?.systemHint||x.systemHint;return e.jsxs("li",{children:[e.jsx(qt,{className:"py-4",systemHint:y,onClick:()=>{if(p?.isPopulatedByDefault){r(y);return}l===y?k(null):cs(y)?(s.setAutocompletions([]),m({path:ds(y),nextPageType:{type:"landing-page",value:y}})):k(y)},isSelected:l===y}),y===o&&e.jsx(us,{open:!0,systemHint:y,onOpenChange:()=>r(void 0)})]},y)})})})})}function $n(t){const{clientThreadId:a}=t;return e.jsx(tt,{clientThreadId:a,children:e.jsx(Kn,{...t})})}function Qn({clientThreadId:t,headlineOption:a,currentModelId:s,isModelLoaded:o,overrideMessage:r}){const n=Je(),{getAndroidKeyboardLayout:u}=xs(),m=se(),{isFocused:h,autocompletions:g}=Nt(m.store),c=h&&g.length>0,d=ae(),b=Y(d.isImageGenLandingPageEnabled$);return e.jsxs(Fe.div,{initial:{opacity:0},animate:{opacity:c?0:1},exit:{opacity:0},transition:{duration:.1},className:E("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden",u()?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",c?"pointer-events-none":"",n?"@lg/thread:hidden":"lg:hidden"),children:[a==="CHATGPT_LOGO"?e.jsx(jt,{className:"inline-block h-12 w-12"}):e.jsx(ea,{headlineOption:a,overrideMessage:r}),!b&&e.jsx(Dn,{isModelLoaded:o,currentModelId:s,clientThreadId:t}),e.jsx(Yn,{clientThreadId:t,mobile:!0})]})}function Kn({clientThreadId:t,currentModelId:a,isModelLoaded:s}){const o=se(),{isUnauthenticated:r}=he();hs(o);const{layer:n}=$("4031588851"),{layer:u}=$("3533083032",{shouldLogExposure:!1}),m=r?u:n,h=Je(),{isUXUpdatesEnabled:g}=pe(),c=g?"HOW_CAN_I_HELP":m.get("headline_option","HELP_WITH"),d=Bt(),b=d.has(A.Research),l=ps(Array.from(d)[0]),S=g&&l?l:b?T.deepResearchPlaceholder:void 0;return e.jsxs("div",{className:E("flex grow items-center justify-center",h?"@lg/thread:items-end":"lg:items-end"),children:[e.jsx("div",{className:E("hidden text-center @lg/thread:block","mb-5",g&&"max-md:mt-[-80px] md:-mt-48",h?"@lg/thread:block":"lg:block"),children:c==="CHATGPT_LOGO"?e.jsx(jt,{className:"inline-block h-12 w-12"}):e.jsx(ea,{headlineOption:c,overrideMessage:S})}),e.jsx(Qn,{headlineOption:c,overrideMessage:g?S:void 0,clientThreadId:t,isModelLoaded:s,currentModelId:a})]})}function Xn({headlineOption:t,overrideMessage:a}){function s({name:p}){return e.jsx(_t,{label:n.formatMessage(T.editNicknameTooltip),delayDuration:300,side:"top",sideOffset:0,children:e.jsx("button",{onClick:()=>{Me.setAutoHighlightNicknameInput(!0),Me.openModal(bs.UserContext)},style:{textDecoration:"none",transition:"color 0.2s",lineHeight:"42px"},onMouseEnter:y=>{y.currentTarget.className="text-token-text-secondary"},onMouseLeave:y=>{y.currentTarget.className="text-inherit"},children:p})})}function o(){const p=[],y=[];p.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),y.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...p);const N=y[Math.floor(Math.random()*y.length)],P=`${p[Math.floor(Math.random()*p.length)]} | ${N}`;J.setCookie(ee.headlineMessage,P)}function r(){const p=J.getCookie(ee.GreetingName),N=J.getCookie(ee.headlineMessage)?.split("|"),f=N?.[0]?.trim(),P=N?.[1]?.trim();return{cookieName:p,isReadyForPersonalized:!!p&&p.length<=m,headline:f,namedHeadline:P}}const n=F(),{layer:u}=$("1704793646"),m=u.get("name_char_limit",20),[h,g]=i.useState(r),{isUnauthenticated:c}=he(),d=Yt(),l=ys(!c&&!!d)?.data,S=vs(),C=u.get("greeting_web",!1),k=u.get("full_name_llm",!1);i.useEffect(()=>{if(C&&S){if(d&&l){const p=ba(l,d,k);J.setCookie(ee.GreetingName,p),ct.count(dt.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}o()}else J.deleteCookie(ee.GreetingName),J.deleteCookie(ee.headlineMessage)},[l,d,C,k,S]),i.useEffect(()=>{const p=()=>{if(C&&S){const{cookieName:y,isReadyForPersonalized:N}=r();g(f=>({...f,cookieName:y,isReadyForPersonalized:N}))}};return window.addEventListener("refreshGreeting",p),()=>window.removeEventListener("refreshGreeting",p)}),i.useEffect(()=>{C&&S&&ct.count(dt.MOONSHINE,"splashScreenV2.greeting_shown_web")},[C,S]);let x;return a?x=n.formatMessage(a):h.isReadyForPersonalized&&C?x=e.jsx(e.Fragment,{children:e.jsx(L,{...De[h.namedHeadline??t].withName,values:{name:e.jsx(s,{name:h.cookieName??""},"name")}})}):C?x=n.formatMessage(De[h.headline??t].original):x=n.formatMessage(De[t].original),x}function ea({headlineOption:t,overrideMessage:a}){const s=Mt(),o=i.useRef(null),[r,n]=i.useState({isTempChatVisible:s,titleTranslate:0});va(()=>{n({isTempChatVisible:s,titleTranslate:s?-((o.current?.offsetHeight??0)+20):0})},[s]);const{isUXUpdatesEnabled:u}=pe();return e.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:e.jsx("div",{children:e.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:{viewTransitionName:"var(--vt-splash-screen-headline)"},children:[e.jsx("h1",{className:E("motion-safe:[transition:0.3s_transform_var(--spring-standard),0.5s_opacity_var(--spring-standard),0.5s_visibility_var(--spring-standard)]",!u&&"text-[28px] leading-[34px] font-semibold tracking-[0.38px]",r.isTempChatVisible?"invisible opacity-0":"opacity-100",u&&"text-[28px] leading-[50px] font-medium tracking-[-0.42px] sm:text-[40px] md:-mt-16"),"aria-hidden":s,style:{transform:`translateY(${r.titleTranslate}px)`},children:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsx(Xn,{headlineOption:t,overrideMessage:a})})}),e.jsx("div",{className:E("absolute bottom-0 motion-safe:[transition:0.3s_transform_var(--spring-standard),0.5s_opacity_var(--spring-standard),0.5s_visibility_var(--spring-standard)]",r.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-full opacity-0"),"aria-hidden":!s,ref:o,children:e.jsx(fs,{})})]})})})}const T=At({whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"}}),De={HELP_WITH:{original:T.whatCanIHelpWith,withName:T.whatCanIHelpWithWithName},WHERE_TO_START:{original:T.whereShouldWeStart,withName:T.whereShouldWeStartWithName},ASK_CHATGPT:{original:T.askChatgptAnything,withName:T.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:T.howCanIHelp,withName:T.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:T.goodToSeeYouWithName,withName:T.goodToSeeYouWithName},DIVE_IN:{original:T.diveInWithName,withName:T.diveInWithName},READY_WHEN_YOU_ARE:{original:T.readyWhenYouAre,withName:T.readyWhenYouAre},ON_YOUR_MIND:{original:T.onYourMind,withName:T.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:T.whatAreYouWorkingOn,withName:T.whatAreYouWorkingOn},AGENDA_TODAY:{original:T.agendaToday,withName:T.agendaToday},SHOULD_WE_BEGIN:{original:T.shouldWeBegin,withName:T.shouldWeBegin}};function Zn({onClick:t}){return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("button",{onClick:t,"aria-labelledby":"upload-image-label",className:"relative",id:"upload-image-button",type:"button",children:e.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-main-surface-secondary border-token-border-default z-1 flex aspect-square items-center justify-center overflow-hidden rounded-2xl border p-5 text-xs transition-[transform_box-shadow] duration-[0.24s] select-none hover:motion-safe:scale-105",children:e.jsxs("div",{className:"text-token-text-tertiary inline-flex items-center justify-center",children:[e.jsx(js,{"aria-label":"",className:"h-12 w-12"}),e.jsx(Ze,{"aria-label":"",className:"absolute start-1/2 top-1/2 ms-1 mt-1 h-8 w-8"})]})})}),e.jsx("div",{id:"upload-image-label",className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:e.jsx(L,{id:"DJ+4dI",defaultMessage:"Upload an image"})})]})}function wt({card:t,className:a,label:s}){const{formatMessage:o}=F();return typeof t.url=="string"?e.jsx("img",{src:t.url,alt:o(t.prompt),className:a}):e.jsxs("picture",{className:a,children:[t.url.map(({type:r,url:n})=>r==="jpg"?null:e.jsx("source",{srcSet:n,type:`image/${r}`},n)),e.jsx("img",{"aria-label":s,src:t.url[0].url,alt:o(t.prompt),className:E(a,"h-full w-full object-cover")})]})}function Jn({type:t,images:a,onClick:s}){const[o,r]=i.useState(0),{formatMessage:n}=F(),u=o+1>=a.length?0:o+1,m=a[o].prompt;return e.jsxs("div",{children:[e.jsxs("div",{className:"group/stack relative flex justify-center",children:[e.jsx("div",{onClick:()=>{const h=o+1>=a.length?0:o+1;r(h)},className:E("bg-token-bg-primary relative z-2 grid aspect-square h-full overflow-clip rounded-xl text-xs shadow-lg transition-transform duration-[0.24s]","group-hover/stack:-translate-x-2 group-hover/stack:rotate-[-3deg] group-hover/stack:shadow-md",a.length>1&&"cursor-pointer"),children:e.jsx(wt,{card:a[o],label:n(m)})},o),e.jsx("div",{className:E("ease-in-expo ease-spring-standard absolute top-0 left-0! flex aspect-square w-full translate-y-2 rotate-[2deg] opacity-40 transition-transform duration-[0.24s]","group-hover/stack:translate-x-2 group-hover/stack:translate-y-[0px] group-hover/stack:rotate-[4deg]"),children:e.jsx(wt,{card:a[u],label:n(m),className:E(Ms.fadeScale,"aspect-square w-full overflow-hidden rounded-xl shadow-xl")})},u),e.jsx("button",{id:n(m),onClick:()=>s(n(m)),tabIndex:0,className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-tertiary can-hover:z-0 absolute bottom-6 flex w-fit items-center justify-center rounded-full border px-3 py-1 text-sm shadow-md duration-[0.24s] group-hover/stack:z-11 focus-visible:z-11 active:scale-98 motion-safe:transition-[background-color,transform]",children:e.jsx(L,{id:"wk6Ayk",defaultMessage:"Try this prompt"})})]}),t&&e.jsx("div",{className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:n(t)})]})}function eo({onCardClick:t,onUploadCardClick:a}){const{value:s}=me("2640502720"),o=F(),n=Be()?.isWorkspacePlan()?Ss:ws,u=ae(),[m,h]=i.useState(!1),{images:g,hasNextPage:c,isLoading:d,isFetchingNextPage:b,fetchNextPage:l}=Ut(m),{data:S,isLoading:C}=Xe(),{data:k,hasNextPage:x,isFetchingNextPage:p,fetchNextPage:y}=Cs({isEnabled:s}),N=se(),[f,P]=i.useState("recents"),R=S?.images_count,D=!!R,z=!!S?.archived_images_count,I=!R&&!C;i.useEffect(()=>{!D&&!d&&s&&P("gallery")},[D,d,s]);const q=Re({id:"Gd9T7H",defaultMessage:"My Library"});return e.jsxs("div",{className:"mx-auto flex w-full flex-col items-center",children:[e.jsxs("div",{className:"my-6 grid w-full grid-cols-2 gap-4 gap-y-10 max-md:px-4 sm:grid-cols-3 md:grid-cols-4",children:[e.jsx(Zn,{onClick:a}),n.map(H=>e.jsx(Jn,{type:H.type,images:H.images,onClick:O=>{t(O),H.needsUpload&&u.showUploadSuggestion$.set(!0)}},String(H.type.defaultMessage)))]}),e.jsx("div",{className:E("z-50 mt-4 flex w-full items-center justify-between max-md:px-4",s&&"sticky top-[9px]"),children:s?e.jsx(Un,{className:"mx-auto",ariaLabel:Re({id:"p5qePD",defaultMessage:"Image gallery mode"}),leftItem:{label:q,value:"recents"},rightItem:{label:Re({id:"36pX0T",defaultMessage:"Explore"}),value:"gallery"},value:f,onChange:P}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex text-lg font-medium",children:e.jsx(L,{...q})}),D&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-token-text-tertiary flex gap-6 text-sm",children:e.jsx(L,{id:"Grwczz",defaultMessage:"{count, plural, =0 {No images} one {# image} other {# images}}",values:{count:R}})}),z&&e.jsx(Ot,{includeArchived:m,setIncludeArchived:h})]})]})}),!I&&e.jsx("div",{className:"mt-4 mb-6 w-full border-t max-md:mb-6 max-md:hidden"}),I&&e.jsx(Ft,{onClick:()=>{const H=yt(n),O=yt(H?.images??[]);O&&t(o.formatMessage(O.prompt)),N.focus()}}),!I&&e.jsxs("div",{className:"min-h-svh w-full max-md:px-4",children:[f==="gallery"&&s&&e.jsx(Zt,{count:null,images:k??[],hasMoreImages:x,isFetchingMore:p,onScrollToEnd:y}),f==="recents"&&e.jsx(Jt,{images:g??[],hasMoreImages:c,isLoading:d,isFetching:b,fetchNextPage:l,imageCount:R??0})]})]})}const to=({systemHint:t})=>{const{updateSystemHint:a}=Vt(),s=fe(),{transitionToNextPage:o}=zt(),{clientThreadId:r}=at();i.useEffect(()=>{s.activeViewTransition&&s.signalTransitionReady()},[s]),i.useEffect(()=>{a(t,{clientThreadId:r})},[t,r,a]);let n=null;switch(t){case A.Canvas:n=e.jsx(L,{id:"4+tS2L",defaultMessage:"Write with canvas"});break;case A.PictureV2:n=e.jsx(L,{id:"QtMyOg",defaultMessage:"Make an image"});break;case A.Research:n=e.jsx(L,{id:"Rdax1G",defaultMessage:"Deep research"});break;default:n=e.jsx(L,{id:"UrTsbY",defaultMessage:"Unknown landing page"});break}return e.jsx(Ns,{children:e.jsxs(_s,{className:"mt-[100px] flex flex-col items-center gap-6",children:[e.jsx(qt,{isBadge:!0,isLauncher:!1,systemHint:t,label:null}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{"data-landing-page-load-target":!0,className:"text-token-text-primary text-4xl font-medium tracking-tight [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:text-5xl",children:n}),e.jsxs(Ga,{to:"/",viewTransition:!0,onClick:u=>{u.preventDefault(),o({path:"/",nextPageType:{type:"home",value:void 0},update:()=>{a(null,{clientThreadId:r})}})},className:"group text-token-text-tertiary flex items-center gap-1 text-sm",children:[e.jsx(ks,{className:"h-4 w-4",style:{display:"var(--is-ltr, block) var(--is-rtl, none)"}}),e.jsx(Sa,{className:"h-4 w-4",style:{display:"var(--is-ltr, none) var(--is-rtl, block)"}}),e.jsx("div",{className:"group-hover:underline",children:e.jsx(L,{id:"gdbtML",defaultMessage:"Back to ChatGPT home"})})]})]})]})})},ao=({systemHint:t})=>{const a=se(),s=ae(),o=i.useCallback(b=>{a.setText(b),a.focus()},[a]);i.useEffect(()=>()=>{s.reset()},[s]);const r=i.useCallback(()=>{U.logEvent("Open File Viewer",{intent:Ts.Multimodal.toString()}),a.openFileDialog()},[a]),{isImageGenLandingPageEnabled$:n,isAllPagesEnabled$:u}=ae(),m=Y(n),h=Y(u),c=t===A.PictureV2&&m;if(!h&&!c)return null;let d=null;switch(t){case A.Canvas:d=!1;break;case A.PictureV2:d=e.jsx(eo,{onCardClick:o,onUploadCardClick:r});break;case A.Research:d=!1;break;default:d=e.jsx(L,{id:"JEsPH+",defaultMessage:"Unknown landing page {systemHint}",values:{systemHint:t}})}return d},so=4,no=3,oo=async({text:t,numCompletions:a,isUnauthenticated:s,isThreadUsingSearchMode:o=!1,autocompleteMode:r,activeSystemHint:n})=>{try{return(s?await je.generateAutocompletionsAnon(t,a,o,n):await je.generateAutocompletions(t,a,o,n)).completions.map(m=>({id:Oa(),type:W.Autocomplete,title:m.slice(0,t.length),body:m.slice(t.length),oneliner:m,prompt:m,source:r}))}catch{return[]}},io=({clientThreadId:t,composerController:a,isGizmoThread:s})=>{const o=Nt(a.store,v=>v.showTaggingDropdown),r=Bt(),n=Array.from(r)[0],u=i.useRef(void 0),[m,h]=i.useState([]);i.useState([]),i.useRef(0);const{isUXUpdatesEnabled:g}=pe(),c=g?no:so,[d,b]=i.useState(),l=i.useCallback(v=>{h(j=>{const w=typeof v=="function"?v(j):v;return wa(w,j)?j:w})},[]),{trendingSuggestions:S,fetchTrendingSuggestions:C}=ro(c),{isUnauthenticated:k}=he(),x=Es(),p=i.useCallback(v=>{const j=a.getCurrentText();return j&&Ge(v).startsWith(j.toLocaleLowerCase())},[a]),y=i.useCallback(v=>{const j=a.getCurrentText(),w=v.title+v.body;return p(v)?{...v,title:j,body:w.slice(j.length)}:{...v,title:w,body:""}},[a,p]),N=i.useCallback((v=!1)=>{l(j=>!j.some(p)&&j.length>0?[]:v?j:j.map(y))},[p,y,l]),f=F(),P=i.useMemo(()=>({[_.Canvas]:[{type:W.Starter,title:f.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:f.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:_.Canvas},{type:W.Starter,title:f.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:f.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:_.Canvas},{type:W.Starter,title:f.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:f.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:_.Canvas},{type:W.Starter,title:f.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:f.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:_.Canvas}],[_.Image]:[{type:W.Starter,title:f.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:f.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:_.Image},{type:W.Starter,title:f.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:f.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:_.Image},{type:W.Starter,title:f.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:f.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:_.Image},{type:W.Starter,title:f.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:f.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:_.Image}],[_.ContextualAnswers]:[{type:W.Starter,title:f.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:f.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:e.jsx(As,{className:"h-full w-full"}),body:"",theme:_.ContextualAnswers},{type:W.Starter,title:f.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:f.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:e.jsx(Ps,{className:"h-full w-full"}),body:"",theme:_.ContextualAnswers},{type:W.Starter,title:f.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:f.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:e.jsx(Is,{className:"h-full w-full"}),body:"",theme:_.ContextualAnswers},{type:W.Starter,title:f.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:f.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:e.jsx(Ls,{className:"h-full w-full"}),body:"",theme:_.ContextualAnswers}]}),[f]),R=!!Rs(),D=Hs({exposed:R})==="autocomplete";i.useEffect(()=>{g||!R||!a.isEmpty()||!D||s||![void 0,A.ContextualAnswers].includes(n)||l(v=>v.length>0?v:P[_.ContextualAnswers].slice(0,c))},[P,a,R,g,c,l,D,n,s]),i.useEffect(()=>{if(g)return;const v=m.some(j=>j.theme===_.Search);x&&a.getCurrentText()===""?S.length>0?l(S):C():v&&!x&&l(j=>j.filter(w=>w.theme!==_.Search))},[m,a,C,x,l,S,g]),i.useEffect(()=>{x&&a.getCurrentText()===""&&S.length>0&&vt(S,t)},[x,a,S,t]);const z=c-m.filter(p).length,I=co(x),{layer:q}=$("4031588851"),H=q.get("autocomplete_min_char",4),O=q.get("autocomplete_fetch_interval",200),ne=i.useRef(null),B=i.useCallback(Ws(async v=>{const j=a.getCurrentText();if(!j||j.length<H||j.length>80||a.hasMultipleLines()){l([]);return}if(!o&&!(ne.current&&ne.current.length>H&&j.startsWith(ne.current)))try{const w=(await oo({text:j,numCompletions:v,isUnauthenticated:k,isThreadUsingSearchMode:x,autocompleteMode:I,activeSystemHint:n})).filter(p).map(y);l(G=>{const Se=G.filter(p),Ne=w.filter(K=>{const X=Ge(K);return!Se.some(_e=>{const V=Ge(_e);if(X===V)return!0;const re=/[\p{P}\p{S}]$/u,le=X.replace(re,""),Z=V.replace(re,"");return le===V||X===Z||le===Z})}).slice(0,c-Se.length);return[...Se,...Ne]}),w.length>0&&vt(w,t)}catch{}},I==="BING"?150:O),[a,I,y,O,n]);i.useEffect(()=>{const v=u.current!==n;if(!g||!v)return;u.current=n;let j;if(a.getCurrentText()==="")if(l(w=>w.filter(G=>G.theme!==_.Search&&G.theme!==_.Canvas&&G.theme!==_.Image)),n===A.Search)if(S.length>0)l(S);else{j=new AbortController;const{signal:w}=j;C().then(G=>{w.aborted||l(G)})}else n===A.Canvas?l(P[_.Canvas].slice(0,c)):n===A.Picture||n===A.PictureV2?l(P[_.Image].slice(0,c)):n===A.ContextualAnswers&&R&&D&&l(P[_.ContextualAnswers].slice(0,c));else l([]),a.getCurrentText().length>H&&B(c);return()=>{j?.abort()}},[S,C,a,l,n,c,g,P,H,B,R,D]),Ds(v=>v.files);const xe=n===A.Research&&!1,oe=i.useCallback(()=>{N(),z>0&&B(z)},[B,N,z]);i.useEffect(()=>{o&&l([])},[o,l]);const ye=i.useMemo(()=>I==="HARDCODED"?N:oe,[I,oe,N]),ve=!1,be=i.useCallback(()=>{ye()},[ye,ve,xe,l]),ie=i.useCallback(()=>{a instanceof En&&N(!0),a.getCurrentText().indexOf(`
`)>0&&(l([]),b(void 0))},[a,l,N,ve,xe]);return i.useEffect(()=>a.subscribe("input",()=>{be()}),[a,be]),i.useEffect(()=>a.subscribe("change",()=>{ie()}),[a,ie]),{autocompletions:m,matchaData:d}},ro=t=>{const[a,s]=i.useState([]),o=i.useCallback(async()=>{const n=(await Ca.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:t},authOption:ja.SendIfAvailable})).suggestions.map((u,m)=>({type:W.Trending,title:Ct(u),body:"",icon:e.jsx(Gs,{className:"h-full w-full"}),prompt:Ct(u),id:`search-trending-${m}`,theme:_.Search}));return s(n),n},[t]);return{trendingSuggestions:a,fetchTrendingSuggestions:o}};function Ct(t){return t.split(" ").map(Os).join(" ")}const Ge=t=>`${t.title}${t.body}`.toLocaleLowerCase();function lo(){const{layer:t}=$("4031588851",{shouldLogExposure:!1}),a=t.get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),s=Yt();return!!s&&s.created*1e3>=new Date(a).getTime()}function co(t){const{isUnauthenticated:a}=he(),s=me("1468311859").value,o=me("2053937752").value,r=me("3664702598").value,n=me("471233253").value,{layer:u}=$("4031588851"),{layer:m}=$("3533083032"),h=lo(),g=!a&&s||a&&o,c=(!a&&r||a&&n)&&h;let d="HARDCODED";{const b=a?m:u;if(t){const l=b.get("search_autocomplete_mode","");g&&l&&(d=l)}else c&&(d=b.get("autocomplete_mode","HARDCODED"))}return d}const uo=({clientThreadId:t,isGizmoThread:a})=>{const s=se(),{autocompletions:o,matchaData:r}=io({clientThreadId:t,composerController:s,isGizmoThread:a});return i.useEffect(()=>(s.store.setState({autocompletions:o,matchaData:r}),()=>{s.store.setState({autocompletions:[],matchaData:void 0})}),[o,s,r]),null},mo=({clientThreadId:t})=>{const a=$t(d=>d.activeStageSidebar),s=Ye(t),o=Us(Ma.WorkspaceShareLinks),{isUnauthenticated:r}=he(),n=Mt(),u=kt(t),m=et(u),h=Fs(),g=o&&s&&!r&&!n&&!m&&!h,c=!a;return e.jsx("div",{className:"flex items-center gap-2 pe-1 leading-[0]",id:"conversation-header-actions",children:e.jsx(Pn,{showShareButton:g,showProfileDropdown:c,clientThreadId:t})})},go=Tt(()=>Et(()=>import("./pfcp9jpwj20rwczo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(t=>t.GizmoUsingAsOwnerNotice));function ho({clientThreadId:t,transparentBackground:a,isEmptyState:s}){const{isNewScrollEnabled:o}=Qt(),r=kt(t),n=et(r),u=Vs(),m=zs(),{data:h}=qs(r),g=Be(),c=Bs(),d=Ys(),b=F(),{isUXUpdatesEnabled:l,showLegacyReasoningSlider:S,showReasoningSliderNux:C}=pe(),k=Ue(t),x=$t(f=>f.isConversationScrolledFromTop),p=Na(),y=!l&&!S||!!r&&(!n||!k)||c;if(u)return null;const N=y?e.jsx(e.Fragment,{children:d&&(n||!r)?e.jsx(Js,{children:e.jsx(bt,{clientThreadId:t})}):e.jsx(bt,{clientThreadId:t})}):e.jsx(_t,{side:"bottom",theme:p?"default":"white",label:S&&!C?null:e.jsxs("div",{className:"flex h-full w-full flex-col overflow-hidden px-4 py-3",children:[e.jsx("div",{className:"flex w-full justify-center py-2",children:e.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary flex w-56 flex-col gap-2 rounded-xl border p-2 pt-1.5 shadow-lg",children:[e.jsx("div",{className:"text-token-text-tertiary flex w-full text-start text-[11px] font-normal tracking-tight",children:b.formatMessage({id:"kvZYws",defaultMessage:"Ask anything"})}),e.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[l?e.jsx($s,{className:"text-token-text-primary h-3 w-3 opacity-40"}):e.jsx(Ze,{className:"text-token-text-primary h-3 w-3 opacity-40"}),l?null:e.jsx(Qs,{className:"text-token-text-primary h-3 w-3 opacity-40"}),e.jsxs("div",{className:"relative h-3 w-3",children:[e.jsx(Ks,{className:"text-token-text-primary h-3 w-3"}),e.jsx("div",{className:"absolute start-0 top-0 h-full w-full scale-200 animate-ping rounded-full bg-blue-400/50 duration-1000"})]}),e.jsx("div",{className:"flex-auto"}),e.jsx("div",{className:"bg-token-main-surface-primary rounded-full p-[1px] opacity-20 invert",children:e.jsx(Xs,{className:"text-token-text-primary h-3 w-3"})})]})]})}),e.jsxs("div",{className:"text-token-text-primary mt-4 flex max-w-80 flex-col gap-1",children:[e.jsx("div",{className:"font-semibold",children:b.formatMessage({id:"ZQnsFt",defaultMessage:"The model picker has moved"})}),e.jsx("div",{className:"text-xs font-normal opacity-75",children:b.formatMessage({id:"EyZkkB",defaultMessage:"Adjust thinking or choose a model here"})})]})]}),onOpenChange:f=>{f&&U.logEvent("Model Switcher Moved Tooltip Hover",{location:"thread_header"})},delayDuration:0,ignoreTriggerOnOutsideClick:!0,interactive:!0,children:e.jsx("div",{className:"text-token-text-secondary px-0.5 text-xl",children:Zs})});return e.jsxs(e.Fragment,{children:[e.jsxs(en,{id:"page-header",className:E("pointer-events-none [view-transition-name:var(--vt-page-header)] select-none *:pointer-events-auto motion-safe:transition max-md:hidden",s&&"absolute start-0 end-0",!r&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:bg-transparent @[84rem]/thread:shadow-none!",a&&"bg-transparent",!o&&x?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",o&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]"),children:[e.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[h!=null&&g?.isWorkspaceAccount()&&h.gizmo.tags?.includes(tn.WorkspaceDisabled)&&e.jsx(go,{gizmo:h}),e.jsx(an,{gizmoId:r,clientThreadId:t})]}),e.jsxs("div",{className:"flex items-center gap-0 overflow-hidden",children:[e.jsx(Xt,{clientThreadId:t}),N]}),e.jsx(mo,{clientThreadId:t})]}),m&&e.jsx(sn,{})]})}const po=Tt(()=>Et(()=>import("./n0n44ckj174gd2eb.js"),__vite__mapDeps([20,1,6,2,3,7,21])));function fo({clientThreadId:t}){const a=Qe(),s=Ye(t),o=ze(t,te.getGizmoId),r=async()=>{s&&(await je.patchConversation(s,{is_archived:!1}),a.invalidateQueries({queryKey:["conversation",t]}),Da(s,n=>{n.initialThreadData.isArchived=!1}),Kt(a,o))};return e.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:e.jsx(L,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),e.jsx("div",{children:e.jsx(ge,{disabled:!s,onClick:r,icon:Nn,children:e.jsx(L,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const xo=function({clientThreadId:t,getGizmosCompletionParams:a,hideDisclaimer:s,hideHeader:o,hideToolsOverlay:r,messagesVerticalAlign:n="top",renderEmptyState:u}){const m=_a(),{isNewScrollEnabled:h,autoPinningEnabled:g}=Qt(),{data:c}=ka(),d=nn(t),b=Ta(),[l,S,C,k,x,p,y,N]=ze(t,M=>[M?.isLoading,te.getCurrentLeafId(M),te.hasUserMessage(M),te.getConversationTurns(M).length,te.getThreadData(M).isArchived,M?.modelId,M?te.getGizmoId(M):b,M?.conversationOrigin===Ra.APPLE]),f=Ye(t),P=Qe(),{prefetchSearchPromises:R}=at(),[D]=Fa(),z=!!D.get("message"),[I,q]=i.useState(R?.navlink);i.useEffect(()=>{l||(Ue(t)?ut.addTiming("chatgpt.web.chatPage.renderNewConversation"):ut.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t,l]);const{setTargetedContent:H}=on(),O=m?.includes(Ea),ne=null,B=k>=2,{pageType:Q}=rn(),{isUXUpdatesEnabled:st}=pe(),xe=qe(),oe=ae(),ye=Y(oe.isImageGenLandingPageEnabled$),ve=Y(oe.isAllPagesEnabled$),be=i.useContext(Aa),ie=ln(),v=Ue(t)&&!B&&We(d)&&!ie&&R==null,j=!1,w=Q?.type==="landing-page"&&(ve||Q.value===A.PictureV2&&ye),G=v&&!C&&(We(d)||d?.kind===Pa.GizmoTest)&&R==null,Ne=Ht(c).id,K=p??Ne,X=!!p,_e=cn(c?.models,K),V=dn(t,d),re=un();mn(k,t),i.useEffect(()=>{re||H(void 0)},[t,H,re,S]),i.useEffect(()=>{Me.setIsConversationScrolledFromTop(!1)},[t]),i.useEffect(()=>{const M=new URLSearchParams(window.location.search),ue=M.get("src");if(ue==="history_search"){M.delete("src");const Ce=M.toString(),ma=`${window.location.pathname}${Ce?`?${Ce}`:""}${window.location.hash}`;window.history.replaceState({},document.title,ma)}f&&ue==="history_search"&&je.patchConversation(f,{touch:!0}).then(()=>{Kt(P,y)})},[f,y,P]);const le=It(t),Z=i.useCallback(M=>{le(a?a(M):M)},[le,a]),ke=fe(),ta=Pt(),aa=$e(),Te=i.useRef(null);Te.current=M=>{w?ke.transitionToPage({type:"home",value:void 0},()=>{aa("/",{preventScrollReset:!0}),Z(M)}):v&&!ta&&Ia(xe,"3253785454").get("should_animate_composer",!1)?Dt({className:_n["composer-slide"],update:()=>Z(M)}):Z(M)};const ce=i.useCallback(M=>Te.current?.(M),[Te]);i.useEffect(()=>{ke.signalTransitionReady()},[ke,w,t]);const sa=gn({clientThreadId:t,handleRequestCompletion:ce,prefetchSearchThreadIdPromise:R?.threadId})&&I==null,Ee=i.useRef(null),na=M=>{if(h&&!w)return e.jsx(kn,{allowScrollToEnd:!0,allowScrollToTop:N,clientThreadId:t,enableAutoScrollPinning:g,initScrolledToEnd:I==null&&!z,threadFooterRef:Le,threadRootRef:nt,children:M});{const ue=e.jsx("div",{className:"relative h-full",children:e.jsxs("div",{className:E("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable] @[84rem]/thread:pt-(--header-height)"),ref:Ee,children:[e.jsx(Ha,{setIsScrolledToEdge:Ce=>{Me.setIsConversationScrolledFromTop(Ce)},options:{root:Ee?.current}}),M]})});return I!=null?ue:e.jsx(Wa,{children:e.jsxs(i.Suspense,{fallback:null,children:[e.jsx(Tn,{}),ue]})})}},Ae=Rn();i.useEffect(()=>{Ae||(document.title=V??"ChatGPT")},[V,ne,Ae]);const oa=La(be),Pe=Be(),ia=Pe&&!Pe.isTeam()&&!Pe.isEnterprisey(),Ie=!s&&!oa&&!j&&!(v&&ia)&&We(d),nt=i.useRef(null),ot=i.useRef(null),Le=i.useRef(null),it=hn(M=>M.composerHeight),ra=i.useMemo(()=>({threadContentScrollContainerElementRef:ot,footerRootContainerElementRef:Le}),[]),la=!v&&!w,ca=Je(),da=et(y),de=!!y,rt=de&&da,we=!rt,ua=v&&!w,lt=w&&Q?.type==="landing-page";return e.jsx(pn.Provider,{value:I,children:e.jsx(Wt,{clientThreadId:t,children:e.jsxs(tt,{clientThreadId:t,children:[O&&e.jsx(po,{}),!Ae&&e.jsx(fn,{children:V!=null&&e.jsx("title",{children:V})}),e.jsx(xn.Provider,{value:ce,children:e.jsxs(Ke,{children:[e.jsxs("div",{id:"thread",ref:nt,className:E("group/thread @container/thread h-full w-full",h&&!w&&yn.threadRoot,w&&"overflow-y-auto"),children:[e.jsxs(Gn,{noKeyboard:!0,clientThreadId:t,currentModelConfig:_e,className:E("composer-parent flex flex-col focus-visible:outline-0",!w&&"h-full"),children:[e.jsxs(vn,{value:ra,children:[!o&&e.jsx(ho,{clientThreadId:t,isEmptyState:G}),e.jsxs("div",{ref:ot,className:E("flex shrink basis-auto flex-col overflow-hidden",la&&"-mb-(--composer-overlap-px) [--composer-overlap-px:24px]",!w&&"grow"),style:{"--composer-height":it?`${it}px`:void 0},children:[lt&&e.jsx(to,{systemHint:Q.value}),!w&&e.jsx(e.Fragment,{children:!l&&!sa?G?u??e.jsx(e.Fragment,{children:de?e.jsx(In,{clientThreadId:t,gizmoId:y,onRequestCompletion:ce,currentModelId:K}):e.jsx($n,{clientThreadId:t,currentModelId:K,isModelLoaded:X})}):B||I!=null?na(e.jsx(Fn,{onRequestCompletion:ce,clientThreadId:t,scrollContainerRef:Ee,prefetchNavlink:I,setPrefetchNavlink:q},t)):null:null})]})]}),e.jsxs("div",{id:"thread-bottom-container",className:E("isolate z-3 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!w&&!Ie&&"mb-4",!w&&we&&v&&(ca?"@lg/thread:grow":"lg:grow"),we&&"flex flex-col"),ref:Le,children:[x?e.jsx(fo,{clientThreadId:t}):e.jsxs(e.Fragment,{children:[(!v||we)&&e.jsx(On,{isGizmoThread:de,isProjectThread:rt,clientThreadId:t,isNewThread:v,currentModelId:K,onRequestCompletion:ce,shouldUseUnifiedComposer:we,isModelLoaded:X,isVanguardUxEnabled:st}),ua&&e.jsx(uo,{clientThreadId:t,isGizmoThread:de})]}),Ie?e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:e.jsx(bn,{clientThreadId:t})}):null,v&&!w&&!de&&e.jsx(Sn,{showDisclaimer:Ie})]})]}),lt&&e.jsx(Rt,{children:e.jsx(ao,{systemHint:Q.value})})]}),!r&&e.jsx(wn,{clientThreadId:t}),e.jsx(Cn,{clientThreadId:t,isStaticSharedThread:!1,isDynamicSharedThread:ie}),e.jsx(jn,{}),e.jsx(Mn,{conversationId:t})]})})]})})})},To=Ua.memo(xo);export{mo as C,Bn as L,To as M,ko as a};
//# sourceMappingURL=e65eph5k56t09h70.js.map
