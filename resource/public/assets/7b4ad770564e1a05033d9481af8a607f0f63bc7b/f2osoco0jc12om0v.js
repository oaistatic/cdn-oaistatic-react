const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/okzlvevr93wa1zvp.js","assets/kfrdmkli83ureki3.js","assets/dch45l9yrtbjo93p.js","assets/iwr3smf9emayvqcc.js","assets/2vdgthgbz8ldn3en.js","assets/kk30v9ixm0zhzjf4.js","assets/fyw02vlaiv2vq6cj.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css","assets/mk4l60okxks92sdf.js","assets/f1g778pkk2fhpy9x.js","assets/m3joncw451cqbul2.js","assets/gy1lpvuoewmzh42c.js","assets/ipjj058rvhjq2uu2.js","assets/h1em0bjkpkjv8ykw.js","assets/kbj1b07s2z6vxqkg.js","assets/hu1bt0oauegdhua6.js","assets/i7t1qh3u8s8bvtb8.js","assets/dm8z7bzkrzic0zmg.js","assets/i8e4tsbcdrbcc668.js","assets/hoo89wr86agqpm13.js","assets/ffn9wc6lj27bri6y.js","assets/byis8e009cwknczn.js","assets/jzzsz31csz3jhlrp.js","assets/me479l0dlgxhtxr0.js","assets/ce3hgmw4iyyhicud.js","assets/drmwaklva7v056il.js","assets/ns51nblw8ziscsgd.js","assets/l44if3t09c665h4q.js","assets/ngxz0v4ua9dalu3e.js","assets/p1oh54il7vkjezez.js","assets/jai7jq7nlrd6uzzm.js","assets/cxxo9kqd4cvmuss7.js","assets/dpf52wv18uwxh9t9.js","assets/lu73hcy0eyoge4v0.js","assets/oqjz9ej6if9r4gpd.js","assets/c22gt92phjno04jd.js","assets/iy3hffl27zzfdsej.js","assets/nlj7ey81i8rm36n9.js","assets/dr1v3i80rkhviakg.js","assets/bonby2i4xf93dev1.js","assets/nc3t1yc5ebfd395z.js"])))=>i.map(i=>d[i]);
var mn=Object.freeze,pn=Object.defineProperty,Ao=Object.defineProperties;var $o=Object.getOwnPropertyDescriptors;var fn=Object.getOwnPropertySymbols;var Io=Object.prototype.hasOwnProperty,Ro=Object.prototype.propertyIsEnumerable;var as=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Lo=t=>{throw TypeError(t)};var Ds=(t,e,s)=>e in t?pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,pe=(t,e)=>{for(var s in e||(e={}))Io.call(e,s)&&Ds(t,s,e[s]);if(fn)for(var s of fn(e))Ro.call(e,s)&&Ds(t,s,e[s]);return t},at=(t,e)=>Ao(t,$o(e));var te=(t,e,s)=>Ds(t,typeof e!="symbol"?e+"":e,s);var St=(t,e)=>mn(pn(t,"raw",{value:mn(e||t.slice())}));var js=function(t,e){this[0]=t,this[1]=e},Bs=(t,e,s)=>{var o=(i,r,c,f)=>{try{var m=s[i](r),h=(r=m.value)instanceof js,x=m.done;Promise.resolve(h?r[0]:r).then(d=>h?o(i==="return"?i:"next",r[1]?{done:d.done,value:d.value}:d,c,f):c({value:d,done:x})).catch(d=>o("throw",d,c,f))}catch(d){f(d)}},a=i=>l[i]=r=>new Promise((c,f)=>o(i,r,c,f)),l={};return s=s.apply(t,e),l[as("asyncIterator")]=()=>l,a("next"),a("throw"),a("return"),l},Fs=t=>{var e=t[as("asyncIterator")],s=!1,o,a={};return e==null?(e=t[as("iterator")](),o=l=>a[l]=i=>e[l](i)):(e=e.call(t),o=l=>a[l]=i=>{if(s){if(s=!1,l==="throw")throw i;return i}return s=!0,{done:!1,value:new js(new Promise(r=>{var c=e[l](i);c instanceof Object||Lo("Object expected"),r(c)}),1)}}),a[as("iterator")]=()=>a,o("next"),"throw"in e?o("throw"):a.throw=l=>{throw l},"return"in e&&o("return"),a},gn=(t,e,s)=>(e=t[as("asyncIterator")])?e.call(t):(t=t[as("iterator")](),e={},s=(o,a)=>(a=t[o])&&(e[o]=l=>new Promise((i,r,c)=>(l=a.call(t,l),c=l.done,Promise.resolve(l.value).then(f=>i({value:f,done:c}),r)))),s("next"),s("return"),e);import{h as It,j as n,e as Ts,r as D,_ as K,c as $e,M as se,v as Oo,l as is,o as Po}from"./kfrdmkli83ureki3.js";import{az as ne,aB as ct,cv as ls,aA as de,c7 as Do,fw as Un,fv as tn,cq as Ws,db as $t,dQ as Vn,ck as dt,ch as Ae,h$ as Ge,hZ as De,ci as W,h_ as Kn,jn as zn,cn as Gn,cj as qn,aE as Bo,aF as Pe,aH as Ns,eU as Us,br as ms,R as Hn,bl as fs,J as As,g as ps,V as Js,O as hn,a1 as Fo,D as Wo,ku as Uo,u9 as Vo,aw as Ko,ay as zo,ca as Go,be as qo,lv as Ho,rj as _n,pQ as xn,cy as et,dR as Ys,ek as sn,w9 as Jo,wa as Yo,Q as yn,lB as Zo,hz as Qo,gO as rt,eW as Xo,fM as ea,u as gs,ib as Jn,ef as ta,P as nn,dt as sa,dv as na,fd as oa,eG as Vs,f9 as aa,d as Te,jq as ia,bh as la,ba as ra,jm as bn,eJ as Yn,c9 as ca,cm as da,d_ as ua,fL as vn,wb as ma,hl as fa,co as pa,g2 as ga,M as ha,H as _a,oP as kn,i1 as xa,kt as ya,jE as wn,gX as Cn,jF as jn,as as ba,dX as va,hD as ka,aa as Nn,l as wa,dN as Ca}from"./kw08ajijqinojrwh.js";import{br as Zs,ak as ja,al as Na,h3 as Zn,aH as Ea,dU as Ks,mn as Sa,aZ as Ma,hK as on,df as Ta,x0 as En,x1 as Aa,x2 as $a,nV as Ia,nS as Ra,nU as rs,gW as Qn,c8 as La,iq as Oa,c1 as Mt,x3 as Es,w as Pa,c2 as Sn,x4 as Da,ey as Ba}from"./fyw02vlaiv2vq6cj.js";import{g as Fa}from"./ffn9wc6lj27bri6y.js";import{L as Qs}from"./byis8e009cwknczn.js";import{p as Xn,h as At,g as an,a as eo,b as to,J as O,c as so,i as Ye,d as Wa,e as Ua,f as Va,j as Ka,k as za,l as Ga,m as Mn}from"./jzzsz31csz3jhlrp.js";import{a as zs}from"./me479l0dlgxhtxr0.js";import{a as Tn,b as qa,i as Ha}from"./drmwaklva7v056il.js";import{M as Gs,E as Ja}from"./ns51nblw8ziscsgd.js";import{A as no,C as Ya}from"./l44if3t09c665h4q.js";const Za=ne(()=>K(()=>import("./okzlvevr93wa1zvp.js"),__vite__mapDeps([0,1])),{loading:t=>de(t)});var On;const Qa=ls.div(On||(On=St(["h-px bg-token-border-default"])));var Pn;const it=ls.div(Pn||(Pn=St(["text-sm font-medium py-3 leading-6"])));var Dn;const Xa=ls.div(Dn||(Dn=St(["my-4 p-5 w-full rounded-2xl popover bg-token-main-surface-primary shadow-lg border border-token-border-default"]))),qs=":",ei=({to:t,cc:e,bcc:s,subject:o,body:a,onClick:l,isDraft:i=!0,isCanceled:r=!1})=>{const c=It(),f=[];return t&&f.push(n.jsx("div",{children:n.jsxs("div",{className:"flex",children:[n.jsxs(it,{className:"text-token-text-tertiary me-1",children:[c.formatMessage(Tt.draftToFieldLabel),qs]}),n.jsx(it,{children:t})]})},"to")),e&&f.push(n.jsx("div",{children:n.jsxs("div",{className:"flex",children:[n.jsxs(it,{className:"text-token-text-tertiary me-1",children:[c.formatMessage(Tt.draftCcFieldLabel),qs]}),n.jsx(it,{children:e})]})},"cc")),s&&f.push(n.jsx("div",{children:n.jsxs("div",{className:"flex",children:[n.jsxs(it,{className:"text-token-text-tertiary me-1",children:[c.formatMessage(Tt.draftBccFieldLabel),qs]}),n.jsx(it,{children:s})]})},"bcc")),o&&f.push(n.jsx(it,{children:o},"subject")),a&&f.push(n.jsx(it,{className:"whitespace-pre-line",children:a},"body")),n.jsxs(Xa,{children:[n.jsxs("div",{className:"mb-4 flex items-center",children:[n.jsx(Za,{className:"icon-sm me-4"}),n.jsx("div",{className:"font-semibold",children:i?c.formatMessage(Tt.draftMessageLabel):c.formatMessage(Tt.sentMessageLabel)})]}),f.map((m,h)=>n.jsxs(D.Fragment,{children:[n.jsx(Qa,{}),m]},h)),i&&!r&&n.jsx("div",{className:"mt-2 flex justify-end gap-4",children:n.jsx(ct,{color:"primary",className:"py-2",onClick:l,children:c.formatMessage(Tt.sendButton)})}),r&&n.jsx("div",{className:"mt-2 flex justify-end gap-4",children:n.jsx(ct,{color:"primary",className:"py-2",disabled:!0,children:c.formatMessage(Tt.canceledButton)})})]})},Tt=Ts({draftMessageLabel:{id:"emailView.draftMessageLabel",defaultMessage:"Draft Message"},sentMessageLabel:{id:"emailView.sentMessageLabel",defaultMessage:"Sent Message"},sendButton:{id:"emailView.sendButton",defaultMessage:"Send"},draftToFieldLabel:{id:"emailView.draftToLabel",defaultMessage:"To"},draftCcFieldLabel:{id:"emailView.draftCcLabel",defaultMessage:"Cc"},draftBccFieldLabel:{id:"emailView.draftBccLabel",defaultMessage:"Bcc"},canceledButton:{id:"emailView.canceledButton",defaultMessage:"Canceled"}}),ti=t=>{"use forget";const e=$e.c(19),{clientThreadId:s,action:o,messages:a,onRequestCompletion:l,handleUserAction:i,rememberAnswer:r,toolCallSafetySummary:c}=t;let f;e[0]!==a?(f=Xn(a),e[0]=a,e[1]=f):f=e[1];const{assistantMessage:m}=f,h=Do();let x;e[2]!==c?(x=c!=null&&c.sensitive_data?Object.keys(c.sensitive_data).some(si):!1,e[2]=c,e[3]=x):x=e[3];const d=x,y=(c==null?void 0:c.danger_level)==="HIGH"||d;let k;return e[4]!==o.allow||e[5]!==o.always_allow||e[6]!==o.deny||e[7]!==o.name||e[8]!==o.type||e[9]!==h||e[10]!==m||e[11]!==s||e[12]!==i||e[13]!==y||e[14]!==a||e[15]!==l||e[16]!==r||e[17]!==c?(k=o.type==="deny"?n.jsx(ct,{className:"flex-1",color:y?"primary":"secondary",size:"medium",onClick:g=>{i({clientThreadId:s,sourceEvent:g,onRequestCompletion:l,assistantMessage:m,allMessages:a,actionData:at(pe({type:"deny"},o.deny),{remember_answer:r}),activeSystemHint:h})},children:n.jsx(se,pe({},o.name==="decline"?cs.decline:cs.deny))}):o.type==="allow"?n.jsx(ct,{className:"flex-1",color:y?"secondary":"primary",size:"medium",onClick:g=>{i({clientThreadId:s,sourceEvent:g,onRequestCompletion:l,assistantMessage:m,allMessages:a,actionData:at(pe({type:"allow"},o.allow),{remember_answer:r}),activeSystemHint:h})},children:c!=null&&c.action_name?c.action_name:n.jsx(se,pe({},o.name==="allow"?cs.allow:cs.confirm))}):o.type==="always_allow"?n.jsx(ct,{className:"flex-1",color:"secondary",size:"medium",onClick:g=>{i({clientThreadId:s,sourceEvent:g,onRequestCompletion:l,assistantMessage:m,allMessages:a,actionData:pe({type:"always_allow"},o.always_allow),activeSystemHint:h})},children:n.jsx(se,pe({},cs.alwaysAllow))}):null,e[4]=o.allow,e[5]=o.always_allow,e[6]=o.deny,e[7]=o.name,e[8]=o.type,e[9]=h,e[10]=m,e[11]=s,e[12]=i,e[13]=y,e[14]=a,e[15]=l,e[16]=r,e[17]=c,e[18]=k):k=e[18],k},cs=Ts({alwaysAllow:{id:"jitPluginMessage.alwaysAllow",defaultMessage:"Always Allow"},allow:{id:"jitPluginMessage.allow",defaultMessage:"Allow"},decline:{id:"jitPluginMessage.decline",defaultMessage:"Decline"},confirm:{id:"jitPluginMessage.confirm",defaultMessage:"Confirm"},deny:{id:"jitPluginMessage.deny",defaultMessage:"Deny"}});function si(t){return t==="Suspicious Content"}const ni=ne(()=>K(()=>import("./dch45l9yrtbjo93p.js"),__vite__mapDeps([2,1])),{loading:t=>de(t)}),oi=ne(()=>K(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([3,1])),{loading:t=>de(t)});function ai({functionName:t,params:e,toolCallSafetySummary:s,result:o,isWrite:a,messages:l,clientThreadId:i,jitPluginData:r,onRequestCompletion:c,rememberForThisConversation:f}){var k,g,u,v;const m=Un(),h=tn(),{namespace:x,actionName:d}=ii(t),y=((k=r==null?void 0:r.from_server)==null?void 0:k.type)!=="denied_by_user"?(g=r==null?void 0:r.from_server)==null?void 0:g.body.actions.map((_,j)=>n.jsx(ti,{clientThreadId:i,messages:l,onRequestCompletion:c,action:_,handleUserAction:At,rememberAnswer:f,toolCallSafetySummary:s},j)):null;if(x==="api_tool"&&d==="call_tool"&&e&&"path"in e&&"args"in e&&typeof e.path=="string"&&(typeof e.args=="object"||typeof e.args=="string")&&e.args!=null){const[_,j,N]=e.path.split("/").filter(Boolean);if(_&&j&&N){const M=[...m.connectorLinks.values()].flat().find(T=>T.id===j),w=M&&h.platformConnectors.get(M.connector_id);return n.jsx(An,{connector:{name:(u=w==null?void 0:w.name)!=null?u:_,logo_url:(v=w==null?void 0:w.logo_url)!=null?v:null},actionName:N,isWrite:a,params:typeof e.args=="object"?e.args:JSON.parse(e.args),toolCallSafetySummary:s,result:o,actionButtons:y})}}return n.jsx(An,{connector:{name:x,logo_url:null},actionName:d,isWrite:a,params:e,result:o,actionButtons:y})}function ii(t){const e=t.indexOf("."),s=e===-1?t:t.slice(0,e),o=e===-1?"":t.slice(e+1);return{namespace:s,actionName:o}}function An({connector:t,actionName:e,params:s,result:o,isWrite:a,toolCallSafetySummary:l,actionButtons:i}){var L,F,B,z;const r=It(),[c,f]=D.useState(!1),[,m]=D.useState("request"),h=D.useId(),x=D.useId(),d=(L=l==null?void 0:l.title)!=null?L:"",y=(F=l==null?void 0:l.description)!=null?F:"",k=e,g=Object.entries((B=l==null?void 0:l.sensitive_data)!=null?B:{}).filter(([,b])=>b==null?!1:Array.isArray(b)),u=Object.entries((z=l==null?void 0:l.suspicious_data)!=null?z:{}).filter(([,b])=>b==null?!1:Array.isArray(b)),v=g.length>0||u.length>0,_=b=>b.join(", "),j=b=>{const A=_(b);return A.length<20?A:A.slice(0,20)+"..."},N=s!=null,M=o!=null,w=N||M,T=()=>{m(N?"request":"response"),f(!0)};return l?n.jsxs("div",{className:"mt-1 mb-4 w-full max-w-md",children:[n.jsxs("div",{className:"border-token-border-medium bg-token-bg-tertiary/20 flex flex-col gap-3 rounded-3xl border px-5 py-5 text-start",children:[n.jsx("div",{className:"flex items-center justify-between gap-2",children:n.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[n.jsx(Zs,{connector:t,size:"xsmall"}),n.jsx("div",{className:"flex flex-1 flex-col gap-2",children:n.jsx("div",{className:"text-token-text-secondary text-sm tracking-wide",children:t.name})})]})}),n.jsxs("div",{className:"flex flex-col gap-2 px-1",children:[n.jsx("h2",{className:"text-token-text-primary text-lg font-semibold",children:d}),y&&n.jsxs("p",{className:"text-token-text-secondary text-sm",children:[y,w&&n.jsxs(n.Fragment,{children:[" ",n.jsx("button",{type:"button",onClick:T,className:"text-token-text-secondary font-regular underline",children:n.jsx(se,pe({},lt.details))})]})]})]}),v&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-col gap-2 px-1 py-2",children:[n.jsx("div",{className:"text-token-text-tertiary font-regular text-sm",children:r.formatMessage(lt.dataShared)}),n.jsxs("dl",{className:"",children:[g.map(([b,A])=>{const p=_(A),S=j(A);return n.jsxs("div",{className:"flex flex-col gap-1 py-1 sm:flex-row sm:items-center sm:gap-4",children:[n.jsx("dt",{className:"font-regular text-token-text-tertiary text-start text-sm",children:b}),n.jsx("dd",{className:"text-token-text-primary text-sm font-normal sm:ms-auto sm:max-w-xs sm:truncate sm:text-end",children:n.jsx(Ws,{side:"top",align:"end",label:p?n.jsx("div",{className:"text-token-text-primary max-w-xs text-start text-sm break-words",children:p}):void 0,children:n.jsx("span",{className:"block truncate",children:S})})})]},b)}),u.map(([b,A])=>{const p=_(A),S=j(A);return n.jsxs("div",{className:"flex flex-col gap-1 py-1 sm:flex-row sm:items-center sm:gap-4",children:[n.jsx("dt",{className:"font-regular text-interactive-label-warning-secondary text-start text-sm",children:n.jsx(Ws,{side:"top",align:"start",label:r.formatMessage(lt.suspiciousContentTooltip),children:n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx("span",{className:"text-token-text-error",children:b}),n.jsx(ni,{"aria-hidden":"true",className:"interactive-label-warning-secondary icon-xs text-token-text-error"})]})})}),n.jsx("dd",{className:"text-token-text-primary text-sm font-normal sm:ms-auto sm:max-w-xs sm:truncate sm:text-end",children:n.jsx(Ws,{side:"top",align:"end",label:p?n.jsx("div",{className:"text-token-text-primary max-w-xs text-start text-sm break-words",children:p}):void 0,children:n.jsx("span",{className:"block truncate",children:S})})})]},b)})]})]}),n.jsx("div",{className:"token-border-subtle mx-1 mt-1 h-0 border-t"})]}),i&&Array.isArray(i)&&i.length>0&&n.jsx("div",{className:"mt-3 mb-1 flex flex-wrap justify-end gap-3",children:i})]}),n.jsx("div",{className:"text-token-text-tertiary mt-3 text-center text-sm",children:n.jsx(se,{id:"APIToolCallCard.toolCallSafetyWarning",defaultMessage:"Using tools comes with risks. <link>Learn more</link>",values:{link:b=>n.jsx("a",{href:"https://platform.openai.com/docs/mcp#risks-and-safety",className:"underline underline-offset-2",target:"_blank",rel:"noopener noreferrer",children:b},"link")}})}),w&&n.jsx($t.Root,{testId:"modal-api-tool-call-details",isOpen:c,onClose:f,children:n.jsx($t.Overlay,{children:n.jsx($t.Content,{size:"large",className:"max-w-2xl",ariaLabelledBy:h,ariaDescribedBy:y?x:void 0,children:n.jsxs("div",{className:"flex flex-col py-2",children:[n.jsx($t.Header,{hasSeparator:!0,title:n.jsx("span",{id:h,className:"px-2",children:n.jsx(se,pe({},lt.details))}),closeButton:n.jsx(Vn,{className:"me-2",onClick:()=>f(!1)})}),n.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[y&&n.jsx("p",{id:x,className:"text-token-text-secondary text-sm",children:y}),n.jsx("div",{className:"border-token-border-subtle bg-token-bg-secondary/40 flex flex-col overflow-hidden rounded-2xl border",children:n.jsxs("div",{className:"border-token-border-subtle flex flex-wrap items-center justify-between gap-3 py-1",children:[n.jsxs("div",{className:"border-token-border-subtle flex w-full items-center justify-between border-b px-4 py-3",children:[n.jsx("span",{className:"text-token-text-primary text-sm font-semibold",children:k}),a&&n.jsx("div",{className:"bg-token-bg-status-error/10 text-token-text-error inline-flex min-w-[60px] items-center justify-center rounded-full px-2 text-[10px] font-semibold tracking-wide uppercase",children:n.jsx(se,{id:"APIToolCallCard.write",defaultMessage:"Write"})})]}),n.jsxs("div",{className:"mb-4 grid w-full gap-4 px-1",children:[s!=null&&n.jsx(us,{isInitialLevelExpanded:a,name:lt.request,params:s}),o!=null&&n.jsx(us,{name:lt.response,params:o})]})]})})]})]})})})})]}):n.jsxs("div",{className:"bg-token-bg-default mt-1 mb-4 grid max-w-xl gap-4 rounded-xl p-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zs,{connector:{name:t.name,logo_url:t.logo_url,logo_url_dark:void 0},size:"large"}),n.jsxs("div",{className:"flex flex-1 flex-col",children:[n.jsx("div",{className:"text-token-text-secondary text-xs",children:t.name}),n.jsx("div",{className:"text-token-text-primary text-sm",children:e})]}),a&&n.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:n.jsx(se,{id:"APIToolCallCard.write",defaultMessage:"Write"})})]}),s!=null&&n.jsx(us,{isInitialLevelExpanded:a,name:lt.request,params:s}),o!=null&&n.jsx(us,{name:lt.response,params:o}),a&&n.jsxs("div",{className:"text-token-text-secondary text-sm",children:[n.jsx(oi,{className:"icon-sm me-1 mb-0.5 inline-block"}),n.jsx(se,{id:"APIToolCallCard.writeWarning",defaultMessage:"Write actions come with risks. <link>Learn more</link>",values:{link:b=>n.jsx("a",{href:"https://platform.openai.com/docs/mcp#risks-and-safety",className:"underline underline-offset-2",target:"_blank",rel:"noopener noreferrer",children:b},"link")}})]})]})}function us({name:t,afterName:e,params:s,isInitialLevelExpanded:o=!1}){const a=It();return n.jsxs("div",{className:"bg-token-bg-secondary/30 max-w-full min-w-0 space-y-3 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"text-token-text-secondary text-xs",children:typeof t=="string"?t:a.formatMessage(t)}),e]}),n.jsx(ja,{buttonText:!0,className:"text-token-text-secondary text-xs",onCopy:()=>Na(typeof s=="string"?s:JSON.stringify(s))})]}),typeof s=="string"?n.jsx("div",{className:"text-token-text-primary line-clamp-3 font-mono text-sm",children:s}):n.jsx(Qs,{isInitialLevelExpanded:o,value:s})]})}const lt=Ts({request:{id:"APIToolCallCard.request",defaultMessage:"Request"},response:{id:"APIToolCallCard.response",defaultMessage:"Response"},details:{id:"APIToolCallCard.details",defaultMessage:"Details"},noDetails:{id:"APIToolCallCard.noDetails",defaultMessage:"No additional details available."},dataShared:{id:"APIToolCallCard.dataShared",defaultMessage:"Sharing data includes:"},functionLabel:{id:"APIToolCallCard.function",defaultMessage:"Function"},allowForConversation:{id:"APIToolCallCard.allowForConversation",defaultMessage:"Allow for conversation"},suspiciousContentTooltip:{id:"APIToolCallCard.suspiciousContentTooltip",defaultMessage:"There is a suspicious piece of text being shared that looks like random or encrypted data. It could be risky, for example it could contain your personal information encrypted in some way. It may not be harmful though, for example if it is part of a legitimate link being shared. It is safe to deny the action."}}),li=["AF","AL","DZ","AS","AD","AO","AI","AQ","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BQ","BA","BW","BV","BR","IO","BN","BG","BF","BI","CV","KH","CM","CA","KY","CF","TD","CL","CN","CX","CC","CO","KM","CD","CG","CK","CR","HR","CU","CW","CY","CZ","CI","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","SZ","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","VA","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KP","KR","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","NC","NZ","NI","NE","NG","NU","NF","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","MK","RO","RU","RW","RE","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","GS","SS","ES","LK","SD","SR","SJ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","UG","UA","AE","GB","UM","US","UY","UZ","VU","VE","VN","VG","VI","WF","EH","YE","ZM","ZW","AX","XK"],ri=dt(li,null),ci=["stripe"],di=["card"],ui=["terms_of_use","privacy_policy","seller_shop_policies"],mi=["missing","invalid","out_of_stock","payment_declined","requires_sign_in","requires_3ds"],fi=["items_base_amount","items_discount","subtotal","discount","fulfillment","tax","fee","tip","total"],oo=["not_ready_for_payment","ready_for_payment","completed","canceled"],ao=Ae({id:W,item:Ae({id:W,quantity:De}),base_amount:De,discount:De,subtotal:De,tax:De,total:De}),io=Ae({type:dt(fi),display_text:W,amount:De}),pi=Ae({id:W,type:()=>"shipping",title:W,subtitle:W,subtotal:De,tax:De,total:De,carrier_info:W,earliest_delivery_time:W,latest_delivery_time:W}),gi=Ae({id:W,type:()=>"digital",title:W,subtitle:W,subtotal:De,tax:De,total:De}),lo=t=>{var s;switch(Gn((s=qn(t))==null?void 0:s.type,["shipping","digital"])){case"shipping":return pi(t);case"digital":return gi(t)}},hi=Ae({type:()=>"info",param:W,content_type:W,content:W}),ro=Ae({type:()=>"error",code:dt(mi),param:W,content_type:W,content:W}),co=t=>{var s;switch(Gn((s=qn(t))==null?void 0:s.type,["info","error"])){case"info":return hi(t);case"error":return ro(t)}},uo=Ae({type:dt(ui),value:W}),mo=Ae({name:W,line_one:W,line_two:W,city:W,state:W,country:t=>{var e;return(e=ri(t))!=null?e:"US"},postal_code:W}),_i=Ae({id:W,checkout_session_id:W,permalink_url:W}),fo=Ae({merchant_id:W,provider:dt(ci),supported_payment_methods:Ge(dt(di))}),po=t=>W(t).toUpperCase(),xi=Ae({id:W,payment_provider:fo,status:dt(oo),currency:po,line_items:Ge(ao),totals:Ge(io),fulfillment_options:Ge(lo),fulfillment_address:zn(mo),fulfillment_option_id:Kn(W),messages:Ge(co),links:Ge(uo)}),lr=Ae({id:W,buyer:Ae({email:W,phone_number:W}),status:dt(oo),currency:po,line_items:Ge(ao),totals:Ge(io),fulfillment_options:Ge(lo),fulfillment_address:zn(mo),fulfillment_option_id:Kn(W),messages:Ge(co),links:Ge(uo),order:_i}),yi=ne(()=>K(()=>import("./2vdgthgbz8ldn3en.js"),__vite__mapDeps([4,1,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29])).then(t=>t.EcosystemCheckoutModal));class bi{constructor(e){te(this,"checkoutPromise$",Pe(null));te(this,"chatSDK$",Pe(null));te(this,"isCheckoutOpen$",Ns(()=>!!this.chatSDK$()));te(this,"isLoadingPayment$",Pe(!0));te(this,"checkoutSession$",Pe(null));te(this,"grandTotal$",Ns(()=>{var e;return(e=this.checkoutSession$())==null?void 0:e.totals.find(s=>s.type==="total")}));te(this,"status$",Pe("idle"));te(this,"messages$",Pe([]));te(this,"errorMessages$",Ns(()=>this.messages$().filter(e=>e.type==="error")));te(this,"paymentDetails$",Pe(null));te(this,"paymentTypes$",Pe([]));te(this,"allowedCountries$",Pe([]));te(this,"publishableKey$",Pe(null));te(this,"customerId$",Pe(null));te(this,"billingAddress$",Pe(null));te(this,"billingAddressComplete$",Ns(()=>{var e,s,o,a,l,i;return this.billingAddress$()?!!((e=this.billingAddress$())!=null&&e.name)&&!!((s=this.billingAddress$())!=null&&s.line_one)&&!!((o=this.billingAddress$())!=null&&o.city)&&!!((a=this.billingAddress$())!=null&&a.state)&&!!((l=this.billingAddress$())!=null&&l.country)&&!!((i=this.billingAddress$())!=null&&i.postal_code):!1}));te(this,"openCheckout",(e,s)=>new Promise((o,a)=>{Us(()=>{var l;this.checkoutPromise$.set({resolve:o,reject:a}),this.chatSDK$.set(e),this.checkoutSession$.set(s),this.billingAddress$.set((l=s.fulfillment_address)!=null?l:null),ms(this.conversation.ctx,yi,{conversation:this.conversation})})}));te(this,"closeCheckout",()=>Us(()=>{this.chatSDK$.set(null),this.checkoutSession$.set(null),this.billingAddress$.set(null),this.checkoutPromise$.set(null),this.status$.set("idle")}));te(this,"cancelCheckout$",()=>{var e;(e=this.checkoutPromise$())==null||e.reject(),this.closeCheckout()});te(this,"completeCheckout$",e=>{var s,o;this.status$.set("complete"),(o=(s=this.checkoutPromise$())==null?void 0:s.resolve)==null||o.call(s,e)});te(this,"addErrorMessage$",e=>{this.messages$.set([...this.messages$(),ro({code:"invalid",content:e})])});te(this,"fetchStripeSession$",async()=>{var m,h,x,d,y,k;const e=window.location.href,s=e.includes("/share/"),o=this.conversation.serverId$(),a=fo((h=(m=this.checkoutSession$())==null?void 0:m.payment_provider)!=null?h:{}),{customer_id:l,customer_session_client_secret:i,publishable_key:r,payment_types:c,allowed_countries:f}=await Hn.safePost("/shopping/ecosystem/checkout/{checkout_session_id}",{parameters:{path:{checkout_session_id:(d=(x=this.checkoutSession$())==null?void 0:x.id)!=null?d:""}},requestBody:pe({payment_provider:a,ecosystem_app_uri:(k=(y=this.chatSDK$())==null?void 0:y.widgetParent)!=null?k:""},s?{sharedConversationUrl:e}:{conversationId:o})});return Us(()=>{this.publishableKey$.set(r),this.customerId$.set(l),this.paymentTypes$.set(c),this.allowedCountries$.set(f)}),{client_secret:i,publishable_key:r}});this.conversation=e}}const vi=Bo(t=>new bi(t)),ki=/^[A-Z]{3}$/,wi=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|[+-]\d{2}:\d{2})$/i,Ci=/^\+[1-9]\d{1,14}$/,ji=["fee","tax","fulfillment","discount","items_discount","tip"];function G(t,e,s){if(!t){if(s)throw new Error("Invalid checkout session: ".concat(e));console.warn("Invalid checkout session: ".concat(e))}}const ve=(t,e,s)=>{G(t.trim().length>0,"".concat(e," must be a non-empty string"),s)},ds=(t,e,s,o)=>{G(t.length<=e,"".concat(s," must be ").concat(e," characters or fewer"),o)},tt=(t,e,s)=>{G(Number.isInteger(t),"".concat(e," must be provided in integer minor currency units"),s),G(t>=0,"".concat(e," must be greater than or equal to 0"),s)},Ni=(t,e,s)=>{G(Number.isInteger(t)&&t>0,"".concat(e," must be a positive integer"),s)},$n=t=>wi.test(t)&&!Number.isNaN(Date.parse(t)),Ei=(t,e)=>{G(t.length>0,"links must include at least one entry (e.g. terms of use or privacy policy)",e),t.forEach((s,o)=>{ve(s.value,"links[".concat(o,"].value"),e);try{new URL(s.value)}catch(a){throw new Error("Invalid checkout session: links[".concat(o,"].value must be an absolute URL"))}})},Si=(t,e)=>{var s;ve(t.name,"fulfillment_address.name",e),ds(t.name,256,"fulfillment_address.name",e),ve(t.line_one,"fulfillment_address.line_one",e),ds(t.line_one,60,"fulfillment_address.line_one",e),(s=t.line_two)!=null&&s.trim()&&ds(t.line_two,60,"fulfillment_address.line_two",e),ve(t.city,"fulfillment_address.city",e),ds(t.city,60,"fulfillment_address.city",e),ve(t.state,"fulfillment_address.state",e),ve(t.country,"fulfillment_address.country",e),ve(t.postal_code,"fulfillment_address.postal_code",e),ds(t.postal_code,20,"fulfillment_address.postal_code",e),t.phone_number&&G(Ci.test(t.phone_number),"fulfillment_address.phone_number must follow the E.164 format (example: +15551234567)",e)},Mi=(t,e)=>{const s={baseAmount:0,discount:0,subtotal:0,tax:0,total:0};for(const[o,a]of t.entries()){ve(a.id,"line_items[".concat(o,"].id"),e),ve(a.item.id,"line_items[".concat(o,"].item.id"),e),Ni(a.item.quantity,"line_items[".concat(o,"].item.quantity"),e),tt(a.base_amount,"line_items[".concat(o,"].base_amount"),e),tt(a.discount,"line_items[".concat(o,"].discount"),e),tt(a.subtotal,"line_items[".concat(o,"].subtotal"),e),tt(a.tax,"line_items[".concat(o,"].tax"),e),tt(a.total,"line_items[".concat(o,"].total"),e);const l=a.base_amount-a.discount;G(a.subtotal===l,"line_items[".concat(o,"].subtotal must equal base_amount - discount (").concat(l,")"),e);const i=a.subtotal+a.tax;G(a.total===i,"line_items[".concat(o,"].total must equal subtotal + tax (").concat(i,")"),e),s.baseAmount+=a.base_amount,s.discount+=a.discount,s.subtotal+=a.subtotal,s.tax+=a.tax,s.total+=a.total}return s},Ti=(t,e,s)=>{var d,y,k,g,u,v;G(t.length>0,"totals must contain at least one entry",s);const o={};for(const[_,j]of t.entries()){tt(j.amount,"totals[".concat(_,"].amount"),s);const N=o[j.type];N!=null&&G(ji.includes(j.type),'totals contains duplicate total type "'.concat(j.type,'"'),s),o[j.type]=(N!=null?N:0)+j.amount}G(o.items_base_amount!==void 0,"totals must include an items_base_amount entry",s),G(o.subtotal!==void 0,"totals must include a subtotal entry",s),G(o.total!==void 0,"totals must include a total entry",s);const a=o;G(a.items_base_amount===e.baseAmount,"totals.items_base_amount (".concat(a.items_base_amount,") must equal the sum of line item base_amounts (").concat(e.baseAmount,")"),s),a.items_discount!==void 0&&G(a.items_discount===e.discount,"totals.items_discount (".concat(a.items_discount,") must equal the sum of line item discounts (").concat(e.discount,")"),s);const l=(d=a.items_discount)!=null?d:e.discount,i=e.baseAmount-l;G(a.subtotal===i,"subtotal must equal items_base_amount - items_discount (".concat(i,")"),s);const r=(y=a.discount)!=null?y:0,c=(k=a.fulfillment)!=null?k:0,f=(g=a.tax)!=null?g:e.tax,m=(u=a.fee)!=null?u:0,h=(v=a.tip)!=null?v:0,x=e.baseAmount-l-r+c+f+m+h;return G(a.total===x,"total must equal items_base_amount - items_discount - discount + fulfillment + tax + fee (".concat(x,")"),s),a},Ai=(t,e)=>{const s=new Map;for(const[o,a]of t.entries()){if(ve(a.id,"fulfillment_options[".concat(o,"].id"),e),ve(a.title,"fulfillment_options[".concat(o,"].title"),e),a.type==="shipping"&&ve(a.subtitle,"fulfillment_options[".concat(o,"].subtitle"),e),tt(a.subtotal,"fulfillment_options[".concat(o,"].subtotal"),e),tt(a.tax,"fulfillment_options[".concat(o,"].tax"),e),tt(a.total,"fulfillment_options[".concat(o,"].total"),e),G(a.total===a.subtotal+a.tax,"fulfillment_options[".concat(o,"].total must equal subtotal + tax"),e),G(!s.has(a.id),'fulfillment option ids must be unique; duplicate id "'.concat(a.id,'"'),e),a.type==="shipping"){ve(a.carrier_info,"fulfillment_options[".concat(o,"].carrier_info"),e),G($n(a.earliest_delivery_time),"fulfillment_options[".concat(o,"].earliest_delivery_time must be an RFC 3339 timestamp"),e),G($n(a.latest_delivery_time),"fulfillment_options[".concat(o,"].latest_delivery_time must be an RFC 3339 timestamp"),e);const l=Date.parse(a.earliest_delivery_time),i=Date.parse(a.latest_delivery_time);G(l<=i,"fulfillment_options[".concat(o,"].earliest_delivery_time must be before or equal to latest_delivery_time"),e)}s.set(a.id,a)}return s},$i=(t,e=!1)=>{ve(t.id,"id",e),G(ki.test(t.currency),'currency "'.concat(t.currency,'" must be a lower-case ISO 4217 code'),e),G(t.payment_provider.supported_payment_methods.length>0,"payment_provider.supported_payment_methods must include at least one entry",e),ve(t.payment_provider.merchant_id,"payment_provider.merchant_id",e),G(t.line_items.length>0,"line_items must contain at least one entry",e),G(t.totals.length>0,"totals must contain at least one entry",e),Ei(t.links,e),t.fulfillment_address&&Si(t.fulfillment_address,e);const s=Mi(t.line_items,e),o=Ti(t.totals,s,e),a=Ai(t.fulfillment_options,e);if(t.fulfillment_option_id){const l=fs(a.get(t.fulfillment_option_id),'fulfillment_option_id "'.concat(t.fulfillment_option_id,'" must match an available fulfillment option'));G(o.fulfillment!==void 0,"totals must include a fulfillment entry when a fulfillment option is selected",e),G(o.fulfillment===l.total,"fulfillment total (".concat(o.fulfillment,") must equal the selected fulfillment option total (").concat(l.total,")"),e)}},go=async({ctx:t,chatSDK:e,clientThreadId:s,checkoutSession:o})=>{if(!As(t,"2563418478"))return;const l=xi(o);return $i(l),vi(ps(t,s)).openCheckout(e,l)},Ii=(t,{csp:e,domain:s,subdomain:o})=>"".concat(t.metadata.html_asset_pointer,"-").concat(JSON.stringify(e),"-").concat(s,"-").concat(o),Ri=({chatSDK:t,prompt:e,persistedSystemHintsStore:s,clientThreadId:o,systemPrompt:a,isVisible:l=!1})=>{var c;const i=Js.getRequestId(hn(o));if(Fo(i))return null;if(!e)return Wo.addError("No prompt provided to sendFollowUpMessage"),null;const r=Js.getBranch(hn(o)).findLast(({message:f})=>Uo(f));return{completionType:qo.Next,appendMessages:a?[Go(['The user is referring to the "'.concat(t.widgetType,'" tool with additional instructions:\n').concat(a)],{exclude_after_next_user_message:!0})]:[],promptMessage:{id:Oo(),author:{role:zo.Tool,name:t.widgetType},content:{content_type:Ko.Text,parts:[e]},recipient:"all",metadata:{system_hints:Vo(s),developer_mode_connector_ids:(c=r==null?void 0:r.message.metadata)==null?void 0:c.developer_mode_connector_ids,chatgpt_sdk_attribution:t.metadata.attribution_id,is_visually_hidden_from_conversation:!l}},eventSource:"mouse"}},ho=new Set(["http:","https:"]),In={"http:":80,"https:":443,"ws:":80,"wss:":443};function _o(t){if(!t)return null;const e=t.trim();if(!e||e.includes("\\"))return null;try{return{url:new URL(e)}}catch(s){if(!/^[a-z][a-z0-9+.-]*:/.test(e))try{const o=e.startsWith("//")?"https:".concat(e):"https://".concat(e);return{url:new URL(o)}}catch(o){return null}return null}}function xo(t){var x,d;const e=t.trim();if(!e)return null;const s=/^([a-z][a-z0-9+.-]*):$/i.exec(e);if(s)return{kind:"scheme",scheme:"".concat(s[1].toLowerCase(),":")};const o=/^(?:([a-z][a-z0-9+.+-]*):\/\/)?(\*|\*\.[^/:]+|[^/:]+)(?::(\*|\d+))?(\/.*)?$/i.exec(e);if(!o)return null;const a=o[1]?"".concat(o[1].toLowerCase(),":"):void 0,l=o[2],i=(x=o[3])!=null?x:null,r=(d=o[4])!=null?d:null,c=l.startsWith("*."),f=(c?l.slice(2):l).toLowerCase().replace(/\.$/,"");let m=null,h=!1;return i!==null&&(h=!0,m=i==="*"?"*":Number(i),m!=="*"&&(!Number.isFinite(m)||m<0))?null:{kind:"host",scheme:a,host:f,wildcard:c,portExplicit:h,port:m,path:r}}function Ss(t){return t.toLowerCase().replace(/\.$/,"")}function yo(t,e){const s=Ss(t),o=Ss(e);return s===o||s.endsWith("."+o)}function Li(t,e,s){return s?yo(t,e):Ss(t)===Ss(e)}function Oi(t,e){var o,a;if(e.port==="*")return!0;const s=t.port?Number(t.port):(o=In[t.protocol])!=null?o:null;if(!e.portExplicit){const l=(a=In[t.protocol])!=null?a:null;return s===l}return typeof e.port=="number"&&s===e.port}function Pi(t){var a,l;const e=(a=t.scheme)!=null?a:"https:";if(!ho.has(e)||!t.host)return null;const s=typeof t.port=="number"?":".concat(t.port):"",o=(l=t.path)!=null?l:"";try{return new URL("".concat(e,"//").concat(t.host).concat(s).concat(o))}catch(i){return null}}function Di(t){var o,a;const e=_o(t!=null?t:void 0);if(e&&ho.has(e.url.protocol)&&!e.url.hostname.includes("*"))return e.url.toString();if(!t)return null;const s=xo(t);return!s||s.kind==="scheme"?null:(a=(o=Pi(s))==null?void 0:o.toString())!=null?a:null}function Bi(t,e,s){var r;if(!t)return!1;const o=_o(t);if(!o)return!1;const a=o.url;if(a.username||a.password)return!1;const l=[];(r=e==null?void 0:e.connectDomains)!=null&&r.length&&l.push(...e.connectDomains);const i=s==null?void 0:s.trim();return i&&l.push(i),l.length?l.some(c=>{const f=xo(c);if(!f)return!1;if(f.kind==="scheme")return a.protocol===f.scheme;if(f.scheme)return!(a.protocol!==f.scheme||!Li(a.hostname,f.host,f.wildcard)||!Oi(a,f));{const m=f.host;return!!yo(a.hostname,m)}}):!1}const Fi=ne(()=>K(()=>import("./ngxz0v4ua9dalu3e.js"),__vite__mapDeps([30,1,7,8])).then(t=>t.ConfirmExternalLinkModal)),Wi=ne(()=>K(()=>import("./p1oh54il7vkjezez.js"),__vite__mapDeps([31,1,7,8])).then(t=>t.SafeLinkWarningModal)),bo=({ctx:t,href:e,csp:s,domain:o})=>{if(e){if(Bi(e,s,o)){Ho()?ms(t,Fi,{url:e}):window.open(e,"_blank","noopener,noreferrer");return}ms(t,Wi,{urls:e})}},Ui=ne(()=>K(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.ze),__vite__mapDeps([6,1,7,8,9])),{loading:t=>de(t)}),Rn=t=>{"use forget";const e=$e.c(6),{onClose:s,onSubmit:o,clientX:a,clientY:l,placeholder:i}=t;let r;return e[0]!==a||e[1]!==l||e[2]!==s||e[3]!==o||e[4]!==i?(r=n.jsx("div",{className:"pointer-events-none fixed inset-0 z-[1000]",children:n.jsx(Vi,{clientX:a,clientY:l,placeholder:i,onSubmit:o,onBlur:s})}),e[0]=a,e[1]=l,e[2]=s,e[3]=o,e[4]=i,e[5]=r):r=e[5],r},Vi=t=>{"use forget";const e=$e.c(43),{placeholder:s,clientX:o,clientY:a,onBlur:l,onSubmit:i}=t,r=It(),[c,f]=D.useState("");let m;e[0]!==c?(m=c.trim(),e[0]=c,e[1]=m):m=e[1];const h=!!m;let x;e[2]!==i||e[3]!==c?(x=E=>{const{metaKey:Z,shiftKey:le,key:ke}=E;ke==="Enter"&&!E.nativeEvent.isComposing&&c.trim()&&!(le||Z)?(i==null||i(E,c),E.preventDefault()):ke==="Escape"&&f("")},e[2]=i,e[3]=c,e[4]=x):x=e[4];const d=x,y=_n(0),k=_n(0);let g;e[5]!==a?(g=E=>a-8<=E?a+E+E:a-8,e[5]=a,e[6]=g):g=e[6];const u=xn(y,g);let v;e[7]!==o?(v=E=>o+E>window.innerWidth?o-E:o,e[7]=o,e[8]=v):v=e[8];const _=xn(k,v);let j;e[9]!==y||e[10]!==k?(j=Zn({axis:"both",onChange:E=>{y.set(E.height),k.set(E.width)}}),e[9]=y,e[10]=k,e[11]=j):j=e[11];let N,M;e[12]===Symbol.for("react.memo_cache_sentinel")?(N={opacity:0,scale:.95},M={opacity:1,scale:1},e[12]=N,e[13]=M):(N=e[12],M=e[13]);let w;e[14]!==_||e[15]!==u?(w={top:u,left:_},e[14]=_,e[15]=u,e[16]=w):w=e[16];let T,L,F;e[17]===Symbol.for("react.memo_cache_sentinel")?(F={opacity:0,scale:.95},T={type:"spring",bounce:.1,duration:.1},L=et("pointer-events-auto absolute z-[1000] -translate-y-full"),e[17]=T,e[18]=L,e[19]=F):(T=e[17],L=e[18],F=e[19]);let B;e[20]===Symbol.for("react.memo_cache_sentinel")?(B=E=>f(E.target.value),e[20]=B):B=e[20];let z;e[21]!==d||e[22]!==l||e[23]!==s?(z=n.jsx("div",{children:n.jsx("input",{autoFocus:!0,className:"border-none text-sm shadow-[none] outline-none focus:border-none focus:outline-none",placeholder:s,onBlur:l,onChange:B,onKeyDown:d})}),e[21]=d,e[22]=l,e[23]=s,e[24]=z):z=e[24];let b;e[25]===Symbol.for("react.memo_cache_sentinel")?(b=n.jsx(zs.Separator,{}),e[25]=b):b=e[25];const A=!h;let p;e[26]!==r?(p=r.formatMessage({id:"iIqOqN",defaultMessage:"Submit"}),e[26]=r,e[27]=p):p=e[27];let S;e[28]!==i||e[29]!==c?(S=E=>i==null?void 0:i(E,c),e[28]=i,e[29]=c,e[30]=S):S=e[30];let Y;e[31]===Symbol.for("react.memo_cache_sentinel")?(Y=n.jsx(Ui,{className:"h-4 w-4 text-white dark:text-black"}),e[31]=Y):Y=e[31];let I;e[32]!==A||e[33]!==p||e[34]!==S?(I=n.jsx(zs.Button,{disabled:A,"aria-label":p,className:"ms-2 me-1 flex h-6 w-6 items-center justify-center rounded-full bg-black dark:bg-white",onClick:S,children:Y}),e[32]=A,e[33]=p,e[34]=S,e[35]=I):I=e[35];let P;e[36]!==z||e[37]!==I?(P=n.jsxs(zs,{children:[z,b,I]}),e[36]=z,e[37]=I,e[38]=P):P=e[38];let C;return e[39]!==P||e[40]!==j||e[41]!==w?(C=n.jsx(Ys.div,{ref:j,initial:N,animate:M,style:w,exit:F,transition:T,className:L,children:P}),e[39]=P,e[40]=j,e[41]=w,e[42]=C):C=e[42],C},Ki=ne(()=>K(()=>import("./jai7jq7nlrd6uzzm.js"),__vite__mapDeps([32,1,7,8,6,9,33])).then(t=>t.KanziWidgetFeedback)),zi=t=>{"use forget";const e=$e.c(20),{logoUrl:s,name:o,isLoading:a,onClick:l,conversationId:i,chatSDK:r,withGutter:c,withMarginBottom:f}=t,m=c===void 0?!1:c,x=(f===void 0?!1:f)&&"mb-4",d=m&&"px-4";let y;e[0]!==x||e[1]!==d?(y=et("text-token-text-secondary dark:text-token-text-tertiary flex w-full items-center gap-2 max-sm:mt-1",x,d),e[0]=x,e[1]=d,e[2]=y):y=e[2];let k;e[3]!==a||e[4]!==s||e[5]!==o?(k=!s||a?n.jsx("div",{className:"loading-results-shimmer h-5 w-5 rounded-lg"}):s&&o&&n.jsx("img",{className:"h-5 w-5 rounded-lg",src:s,alt:o}),e[3]=a,e[4]=s,e[5]=o,e[6]=k):k=e[6];let g;e[7]!==o?(g=o?n.jsx("button",{className:"hover:text-token-text-primary group-hover:text-token-text-primary",children:o}):n.jsx("div",{className:"loading-results-shimmer h-5 w-16 rounded-md"}),e[7]=o,e[8]=g):g=e[8];let u;e[9]!==l||e[10]!==k||e[11]!==g?(u=n.jsxs("span",{className:"group inline-flex items-center gap-2",onClick:l,role:"button",children:[k,g]}),e[9]=l,e[10]=k,e[11]=g,e[12]=u):u=e[12];let v;e[13]!==r||e[14]!==i?(v=n.jsx("span",{className:"ms-auto",children:n.jsx(Ki,{chatSDK:r,conversationId:i})}),e[13]=r,e[14]=i,e[15]=v):v=e[15];let _;return e[16]!==y||e[17]!==u||e[18]!==v?(_=n.jsxs("div",{className:y,children:[u,v]}),e[16]=y,e[17]=u,e[18]=v,e[19]=_):_=e[19],_},Gi=({title:t,logoUrl:e})=>n.jsxs("div",{className:"bg-token-bg-primary dark:bg-token-bg-elevated-secondary border-token-border-default dark:border-token-border-light my-2 flex w-fit items-center gap-2 rounded-xl px-4 py-2 pe-6",children:[e?n.jsx("img",{className:"h-5 w-5 rounded-md",src:e,alt:t!=null?t:""}):n.jsx("div",{className:"loading-results-shimmer h-5 w-5 rounded-md"}),n.jsx("div",{className:"text-token-text-primary text-base font-medium",children:t})]}),qi=ne(()=>K(()=>import("./dpf52wv18uwxh9t9.js"),__vite__mapDeps([34,1])),{loading:t=>de(t)}),Hi=t=>{"use forget";const e=$e.c(6),{errorMessage:s,onClickRetry:o}=t;let a,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=n.jsx(qi,{className:"icon"}),l=n.jsx(se,{id:"DTbTrQ",defaultMessage:"Error loading app"}),e[0]=a,e[1]=l):(a=e[0],l=e[1]);let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=n.jsx(se,{id:"thEh3U",defaultMessage:"Retry"}),e[2]=i):i=e[2];let r;return e[3]!==s||e[4]!==o?(r=n.jsx(Ea,{type:"error",icon:a,title:l,content:s,primaryCtaText:i,primaryCtaColor:"secondary",onPrimaryCtaClick:o}),e[3]=s,e[4]=o,e[5]=r):r=e[5],r},Ji=ne(()=>K(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([7,1,8])),{loading:t=>de(t)}),Xs=44,Yi=t=>{"use forget";const e=$e.c(7),{safeAreaInsetTop:s,safeAreaInsetLeft:o,onClick:a}=t;let l;e[0]!==o||e[1]!==s?(l={height:Xs,width:Xs,marginTop:s,marginLeft:o},e[0]=o,e[1]=s,e[2]=l):l=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=n.jsx(Ji,{}),e[3]=i):i=e[3];let r;return e[4]!==a||e[5]!==l?(r=n.jsx("button",{className:"bg-token-bg-primary text-token-text-primary shadow-short dark:shadow-long fixed start-4 top-0 z-10 aspect-square rounded-full p-3 transition-transform active:scale-115 active:opacity-75",onClick:a,style:l,children:i}),e[4]=a,e[5]=l,e[6]=r):r=e[6],r},Zi=ne(()=>K(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([35,1])),{loading:t=>de(t)}),Qi=ne(()=>K(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([7,1,8])),{loading:t=>de(t)}),Xi=ne(()=>K(()=>import("./oqjz9ej6if9r4gpd.js"),__vite__mapDeps([36,1])),{loading:t=>de(t)}),el=ne(()=>K(()=>import("./c22gt92phjno04jd.js"),__vite__mapDeps([37,1])),{loading:t=>de(t)}),vo=8,tl=t=>{"use forget";const e=$e.c(34),{title:s,widgetDisplayName:o,widgetDomain:a,onClickBack:l,onClickClose:i,onClickForward:r,onClickOpenInApp:c,canGoBack:f,canGoForward:m,logo:h}=t,x=It();if(sn()){let L;return e[0]!==i?(L=n.jsx(Yi,{safeAreaInsetTop:vo,safeAreaInsetLeft:0,onClick:i}),e[0]=i,e[1]=L):L=e[1],L}let d;e[2]!==x?(d=x.formatMessage({id:"H0F9KU",defaultMessage:"Close"}),e[2]=x,e[3]=d):d=e[3];let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=n.jsx(Qi,{className:"icon"}),e[4]=y):y=e[4];let k;e[5]!==i||e[6]!==d?(k=n.jsx(Ks,{label:d,className:"h-7! w-7!",onClick:i,icon:y}),e[5]=i,e[6]=d,e[7]=k):k=e[7];let g;e[8]!==f||e[9]!==m||e[10]!==x||e[11]!==l||e[12]!==r?(g=(f||m)&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ks,{label:x.formatMessage({id:"y0H9Ps",defaultMessage:"Back"}),className:"h-7! w-7!",onClick:l,disabled:!f,icon:n.jsx(el,{className:"icon"})}),n.jsx(Ks,{label:x.formatMessage({id:"4zGgS+",defaultMessage:"Forward"}),className:"h-7! w-7!",onClick:r,disabled:!m,icon:n.jsx(Xi,{className:"icon"})})]}),e[8]=f,e[9]=m,e[10]=x,e[11]=l,e[12]=r,e[13]=g):g=e[13];let u;e[14]!==k||e[15]!==g?(u=n.jsxs("div",{className:"flex items-center justify-start gap-3",children:[k,g]}),e[14]=k,e[15]=g,e[16]=u):u=e[16];let v;e[17]!==s?(v=n.jsx("div",{className:"text-token-text-secondary flex items-center justify-center text-base",children:s}),e[17]=s,e[18]=v):v=e[18];const _=h?void 0:Zi,j=!a;let N;e[19]!==h||e[20]!==o?(N=h&&n.jsx("img",{src:h,alt:o,className:"me-2 h-4 w-4"}),e[19]=h,e[20]=o,e[21]=N):N=e[21];let M;e[22]!==o?(M=n.jsx(se,{id:"JvQEOX",defaultMessage:"Open in {app}",values:{app:o}}),e[22]=o,e[23]=M):M=e[23];let w;e[24]!==c||e[25]!==M||e[26]!==_||e[27]!==j||e[28]!==N?(w=n.jsx("div",{className:"flex items-center justify-end",children:n.jsxs(ct,{icon:_,disabled:j,onClick:c,color:"secondary",children:[N,M]})}),e[24]=c,e[25]=M,e[26]=_,e[27]=j,e[28]=N,e[29]=w):w=e[29];let T;return e[30]!==w||e[31]!==u||e[32]!==v?(T=n.jsxs("div",{className:"border-token-border-secondary bg-token-bg-primary sm:bg-token-bg-primary z-10 grid h-(--header-height) grid-cols-[1fr_auto_1fr] border-b px-2",children:[u,v,w]}),e[30]=w,e[31]=u,e[32]=v,e[33]=T):T=e[33],T},ko=t=>{let e="unknown";sn()?e="mobile":Jo()?e="tablet":Yo()&&(e="desktop");let s="web";return t==="skybridge"&&(s="native"),{device:{type:e,platform:s},capabilities:{hover:yn(Qo),touch:yn(Zo)}}},sl=t=>t.concat().sort().map(e=>"".concat(e," *")).join("; "),nl=(t,e,s)=>"?"+["","app=".concat(t),"locale=".concat(e),"deviceType=".concat(ko(t).device.type),""].filter(Boolean).join("&"),ol=t=>{if(t){const e=new URL(Tn);return e.hostname="".concat(t,".").concat(e.hostname),e.protocol=qa,e.origin}return Tn},al=t=>function(...s){return Bs(this,null,function*(){yield*Fs(t("streamCompletion",...s))})},il=t=>{"use forget";const e=$e.c(24),{host:s,features:o,isInert:a,title:l,ref:i,subdomain:r,iframeRef:c,api:f,locale:m}=t,h=s===void 0?"chatgpt":s,x=a===void 0?!1:a,[d]=D.useState(ll);let y;e[0]!==d?(y=async(A,...p)=>{var I;const S=p;return await Xo(()=>!!d()),fs((I=d())==null?void 0:I[A],"Method ".concat(String(A)," not found"))(...S)},e[0]=d,e[1]=y):y=e[1];const k=rt(y);let g,u;e[2]!==k?(g=()=>new Proxy({},{get:(A,p)=>(...S)=>k(p,...S)}),u=[k],e[2]=k,e[3]=g,e[4]=u):(g=e[3],u=e[4]),D.useImperativeHandle(i,g,u);let v;e[5]!==f?(v=(A,...p)=>{const S=p,Y=f[A];if(!Y){console.warn("HostAPI method not found",A);return}return Y(...S)},e[5]=f,e[6]=v):v=e[6];const _=rt(v);let j;e[7]!==_||e[8]!==d?(j=A=>A?(Ha(A,{drawBoundingBoxes:(...p)=>_("drawBoundingBoxes",...p),notifyBackgroundColor:(...p)=>_("notifyBackgroundColor",...p),notifyIntrinsicHeight:(...p)=>_("notifyIntrinsicHeight",...p),sendInstrument:(...p)=>_("sendInstrument",...p),getDownloadURL:(...p)=>_("getDownloadURL",...p),callTool:(...p)=>_("callTool",...p),streamCompletion:al(_),callCompletion:(...p)=>_("callCompletion",...p),notifySecurityPolicyViolation:(...p)=>_("notifySecurityPolicyViolation",...p),notifyEnvironmentError:(...p)=>_("notifyEnvironmentError",...p),updateWidgetState:(...p)=>_("updateWidgetState",...p),sendFollowUpMessage:(...p)=>_("sendFollowUpMessage",...p),notifyNavigation:(...p)=>_("notifyNavigation",...p),notifyEscapeKey:(...p)=>_("notifyEscapeKey",...p),openExternal:(...p)=>_("openExternal",...p),requestModal:(...p)=>_("requestModal",...p),requestClose:(...p)=>_("requestClose",...p),requestPrompt:(...p)=>_("requestPrompt",...p),openPromptInput:(...p)=>_("openPromptInput",...p),requestDisplayMode:(...p)=>_("requestDisplayMode",...p),requestCheckout:(...p)=>_("requestCheckout",...p)},["runUserCode","runWidgetCode"]).then(p=>{d.set(p)}),()=>{d.set(null)}):d.set(null),e[7]=_,e[8]=d,e[9]=j):j=e[9];const N=rt(j);let M;e[10]!==r?(M=ol(r),e[10]=r,e[11]=M):M=e[11];const w=M,T="sandbox-".concat(w);let L;e[12]!==h||e[13]!==m?(L=nl(h,m),e[12]=h,e[13]=m,e[14]=L):L=e[14];const F="".concat(w).concat(L),B=Sa(N,c);let z;e[15]!==o?(z=o!=null&&o.length?sl(o):void 0,e[15]=o,e[16]=z):z=e[16];let b;return e[17]!==x||e[18]!==F||e[19]!==B||e[20]!==z||e[21]!==T||e[22]!==l?(b=n.jsx(ea,{children:n.jsx("iframe",{title:l,inert:x,src:F,ref:B,sandbox:"allow-scripts allow-same-origin allow-forms",allow:z,className:"h-full w-full max-w-full"},T)}),e[17]=x,e[18]=F,e[19]=B,e[20]=z,e[21]=T,e[22]=l,e[23]=b):b=e[23],b};function ll(){return Pe(null)}const rl=async(t,e)=>{const{trackFatalWidgetError:s}=await K(async()=>{const{trackFatalWidgetError:o}=await import("./cxxo9kqd4cvmuss7.js");return{trackFatalWidgetError:o}},__vite__mapDeps([33,7,1,8]));s(t,e)},cl=async(t,e)=>{const{trackWidgetError:s}=await K(async()=>{const{trackWidgetError:o}=await import("./cxxo9kqd4cvmuss7.js");return{trackWidgetError:o}},__vite__mapDeps([33,7,1,8]));s(t,e)},dl=async t=>{const{trackWidgetLinkOut:e}=await K(async()=>{const{trackWidgetLinkOut:s}=await import("./cxxo9kqd4cvmuss7.js");return{trackWidgetLinkOut:s}},__vite__mapDeps([33,7,1,8]));e(t)},ul=async(t,e)=>{const{trackSandboxInstrument:s}=await K(async()=>{const{trackSandboxInstrument:o}=await import("./cxxo9kqd4cvmuss7.js");return{trackSandboxInstrument:o}},__vite__mapDeps([33,7,1,8]));s(t,e)},ml=async t=>{const{trackSecurityPolicyViolation:e}=await K(async()=>{const{trackSecurityPolicyViolation:s}=await import("./cxxo9kqd4cvmuss7.js");return{trackSecurityPolicyViolation:s}},__vite__mapDeps([33,7,1,8]));e(t)},fl=async(t,e)=>{const{trackWidgetDisplayMode:s}=await K(async()=>{const{trackWidgetDisplayMode:o}=await import("./cxxo9kqd4cvmuss7.js");return{trackWidgetDisplayMode:o}},__vite__mapDeps([33,7,1,8]));s(t,e)},pl=async(t,e)=>{const{trackWidgetNavigation:s}=await K(async()=>{const{trackWidgetNavigation:o}=await import("./cxxo9kqd4cvmuss7.js");return{trackWidgetNavigation:o}},__vite__mapDeps([33,7,1,8]));s(t,e)},gl={insets:{top:0,bottom:0,left:0,right:0}};function hl(){let t,e;return{promise:new Promise((o,a)=>{t=o,e=a}),resolve:t,reject:e}}const wo=({host:t,ref:e,iframeRef:s,html:o,accessToken:a,features:l,safeArea:i=gl,attributionId:r,conversationId:c,widgetId:f,widgetParent:m,suggestionMessageId:h,widgetType:x,csp:d,subdomain:y,viewParams:k,widgetState:g=null,toolInput:u=null,toolOutput:v=null,toolResponseMetadata:_=null,maxHeight:j,theme:N,title:M,api:w,locale:T,displayMode:L="inline",onReady:F,onError:B})=>{"use no forget";const z=D.useMemo(()=>{var C;return{attribution_id:(C=r!=null?r:m)!=null?C:"",name:x,conversation_id:c!=null?c:null,message_id:f||null,suggestion_message_id:h!=null?h:null}},[r,m,x,c,f,h]),b=D.useRef(null),A=D.useRef(null),p=D.useRef(null),S=rt(()=>{B==null||B()}),Y=rt(()=>{F==null||F()}),I=rt(async C=>{var Z,le;A.current=hl();const E=(Z=b.current)==null?void 0:Z.runWidgetCode({html:C,widgetId:f,viewParams:k,widgetState:g,toolInput:u,toolOutput:v,toolResponseMetadata:_,features:l,maxHeight:j,theme:N,displayMode:L,safeArea:i,userAgent:ko(t),csp:d});if(E)try{for(var ke=gn(await E),we,ie,ae;we=!(ie=await ke.next()).done;we=!1){const J=ie.value;J.type===Gs.ENVIRONMENT_STATUS&&J.status===Ja.RUNNING_CODE?(Y(),(le=A.current)==null||le.resolve()):J.type===Gs.ERROR?(cl(z,J.error),p.current=J.error):J.type===Gs.RUN_COMPLETE&&J.wasFatalError&&(rl(z,p.current),S())}}catch(ie){ae=[ie]}finally{try{we&&(ie=ke.return)&&await ie.call(ke)}finally{if(ae)throw ae[0]}}});D.useEffect(()=>{o&&I(o)},[o,I]);const P=rt(async C=>{var E;await((E=A.current)==null?void 0:E.promise),C()});return D.useEffect(()=>{P(()=>{var C;(C=b.current)==null||C.setWidgetProps({widgetId:f,widgetState:g,toolInput:u,toolOutput:v,toolResponseMetadata:_})})},[f,g,u,v,_,P]),D.useEffect(()=>{P(()=>{var C;(C=b.current)==null||C.setAdditionalGlobals({additionalGlobals:{maxHeight:j}})})},[j,P]),D.useEffect(()=>{P(()=>{var C;(C=b.current)==null||C.setAdditionalGlobals({additionalGlobals:{displayMode:L,view:{params:k,mode:L}}})})},[L,k,P]),D.useEffect(()=>{P(()=>{var C;(C=b.current)==null||C.setTheme({theme:N})})},[N,P]),D.useEffect(()=>{P(()=>{var C;(C=b.current)==null||C.setSafeArea({safeArea:i})})},[i,P]),n.jsx(il,{title:M,host:t,subdomain:y,features:l,api:at(pe({},w),{notifyNavigation:C=>{var E;pl(z,C),(E=w.notifyNavigation)==null||E.call(w,C)},requestDisplayMode:C=>{var Z,le;const{mode:E}=C;return E!==L&&fl(z,E),(le=(Z=w.requestDisplayMode)==null?void 0:Z.call(w,C))!=null?le:{mode:E}},openExternal:C=>{var E;dl(z),(E=w.openExternal)==null||E.call(w,C)},sendInstrument:C=>{ul(C,z)},notifySecurityPolicyViolation:C=>{var E;ml({attribution_id:(E=r!=null?r:m)!=null?E:"",name:x,conversation_id:c!=null?c:null,message_id:f||null,suggestion_message_id:void 0,violation:C})},streamCompletion:function(C){return Bs(this,null,function*(){const{completionStream:E}=yield new js(K(async()=>{const{completionStream:Z}=await import("./iy3hffl27zzfdsej.js");return{completionStream:Z}},__vite__mapDeps([38,7,1,8,6,9])));yield*Fs(E(C,fs(m),a))})},callCompletion:async function(C){const{callCompletion:E}=await K(async()=>{const{callCompletion:Z}=await import("./iy3hffl27zzfdsej.js");return{callCompletion:Z}},__vite__mapDeps([38,7,1,8,6,9]));return await E(C,fs(m),a)}}),iframeRef:s,ref:Ma(b,e),locale:T})},_l=ne(()=>K(()=>import("./nlj7ey81i8rm36n9.js"),__vite__mapDeps([39,1])),{loading:t=>de(t)}),Hs=t=>{"use forget";const e=$e.c(84),{heightHint:s,title:o,sendFollowUpMessage:a,conversation:l,chatSDK:i,clientThreadId:r,onClose:c,domain:f,html:m,attributionId:h,widgetId:x,widgetParent:d,suggestionMessageId:y,widgetType:k,features:g,subdomain:u,csp:v,locale:_,params:j}=t,N=s===void 0?null:s,M=gs();let w;e[0]!==l?(w=on(l),e[0]=l,e[1]=w):w=e[1];const T=w,[L,F]=D.useState(N),[B,z]=D.useState(!1),b=D.useRef(null),A=Jn(),[p,S]=D.useState(!1),[Y,I]=D.useState(null);let P;e[2]!==i||e[3]!==T?(P=()=>T.getWidgetStateAndProps$(i),e[2]=i,e[3]=T,e[4]=P):P=e[4];const{toolInput:C,toolOutput:E,widgetState:Z,toolResponseMetadata:le}=ta(P),ke=Y!=null?Y:0;let we;e[5]!==ke?(we={insets:{top:ke,bottom:0,left:0,right:0}},e[5]=ke,e[6]=we):we=e[6];const ie=we,ae=!p,J=p?"opacity-100":"opacity-0";let Q;e[7]!==J?(Q=et(J),e[7]=J,e[8]=Q):Q=e[8];const re=!p,U=p?"opacity-100":"opacity-0";let Ce;e[9]!==U?(Ce=et("relative flex min-h-0 max-w-xl flex-col overflow-hidden",U),e[9]=U,e[10]=Ce):Ce=e[10];let Ie;e[11]!==o?(Ie=n.jsx(sa,{asChild:!0,className:"sr-only",children:n.jsx("span",{children:o})}),e[11]=o,e[12]=Ie):Ie=e[12];let oe;e[13]===Symbol.for("react.memo_cache_sentinel")?(oe=Zn({axis:"height",onChange:ce=>{const{height:Fe}=ce;return I(Fe)}}),e[13]=oe):oe=e[13];let ue;e[14]!==B?(ue=B&&n.jsx(Ta,{onClick:()=>{var ce;return(ce=b.current)==null?void 0:ce.navigate({delta:-1})},className:"mix-blend-difference grayscale",children:n.jsx(_l,{})}),e[14]=B,e[15]=ue):ue=e[15];let Re;e[16]!==c?(Re=n.jsx(na,{asChild:!0,children:n.jsx(Vn,{onClick:c,iconSize:"lg",className:"ms-auto mix-blend-difference grayscale"})}),e[16]=c,e[17]=Re):Re=e[17];let je;e[18]!==ue||e[19]!==Re?(je=n.jsxs("header",{className:"absolute start-0 end-0 top-0 flex items-center p-2",ref:oe,children:[ue,Re]}),e[18]=ue,e[19]=Re,e[20]=je):je=e[20];const st=Math.max(L!=null?L:0,N!=null?N:0);let ge;e[21]!==st?(ge={height:st},e[21]=st,e[22]=ge):ge=e[22];const _e=A!=null?A:"light";let Ve;e[23]===Symbol.for("react.memo_cache_sentinel")?(Ve=()=>S(!0),e[23]=Ve):Ve=e[23];let Ne;e[24]!==r?(Ne=nn(r),e[24]=r,e[25]=Ne):Ne=e[25];let qe;e[26]===Symbol.for("react.memo_cache_sentinel")?(qe=ce=>{F(ce)},e[26]=qe):qe=e[26];let Be;if(e[27]!==i||e[28]!==r||e[29]!==v||e[30]!==M||e[31]!==f||e[32]!==T||e[33]!==c||e[34]!==a||e[35]!==d){let ce;e[37]!==i||e[38]!==r||e[39]!==M?(ce=he=>go({ctx:M,chatSDK:i,clientThreadId:r,checkoutSession:he}),e[37]=i,e[38]=r,e[39]=M,e[40]=ce):ce=e[40];let Fe;e[41]===Symbol.for("react.memo_cache_sentinel")?(Fe=he=>{const{canGoBack:Ue}=he;z(Ue)},e[41]=Fe):Fe=e[41];let We;e[42]!==T||e[43]!==d?(We=(he,Ue)=>T.callTool$(fs(d),he,Ue),e[42]=T,e[43]=d,e[44]=We):We=e[44];let He;e[45]!==T?(He=(he,Ue)=>T.setWidgetState$(he,Ue),e[45]=T,e[46]=He):He=e[46],Be={notifyIntrinsicHeight:qe,openExternal(he){const{href:Ue}=he;bo({ctx:M,href:Ue,csp:v,domain:f})},sendFollowUpMessage:a,requestClose:c,notifyEscapeKey:c,requestCheckout:ce,notifyNavigation:Fe,callTool:We,updateWidgetState:He},e[27]=i,e[28]=r,e[29]=v,e[30]=M,e[31]=f,e[32]=T,e[33]=c,e[34]=a,e[35]=d,e[36]=Be}else Be=e[36];let Ee;e[47]!==h||e[48]!==v||e[49]!==g||e[50]!==m||e[51]!==_||e[52]!==j||e[53]!==ie||e[54]!==u||e[55]!==y||e[56]!==_e||e[57]!==Ne||e[58]!==Be||e[59]!==C||e[60]!==E||e[61]!==le||e[62]!==x||e[63]!==d||e[64]!==Z||e[65]!==k?(Ee=n.jsx(wo,{host:"chatgpt",html:m,ref:b,theme:_e,attributionId:h,onReady:Ve,conversationId:Ne,widgetId:x,widgetParent:d,suggestionMessageId:y,widgetType:k,subdomain:u,widgetState:Z,toolInput:C,toolOutput:E,toolResponseMetadata:le,features:g,viewParams:j,safeArea:ie,displayMode:"modal",api:Be,csp:v,locale:_}),e[47]=h,e[48]=v,e[49]=g,e[50]=m,e[51]=_,e[52]=j,e[53]=ie,e[54]=u,e[55]=y,e[56]=_e,e[57]=Ne,e[58]=Be,e[59]=C,e[60]=E,e[61]=le,e[62]=x,e[63]=d,e[64]=Z,e[65]=k,e[66]=Ee):Ee=e[66];let ee;e[67]!==ge||e[68]!==Ee?(ee=n.jsx("div",{className:"max-h-full flex-shrink overflow-y-auto",style:ge,children:Ee}),e[67]=ge,e[68]=Ee,e[69]=ee):ee=e[69];let fe;e[70]!==Ce||e[71]!==Ie||e[72]!==je||e[73]!==ee||e[74]!==re?(fe=n.jsxs($t.Content,{"aria-hidden":re,className:Ce,children:[Ie,je,ee]}),e[70]=Ce,e[71]=Ie,e[72]=je,e[73]=ee,e[74]=re,e[75]=fe):fe=e[75];let me;e[76]!==p||e[77]!==fe?(me=n.jsx($t.Overlay,{showBackground:p,children:fe}),e[76]=p,e[77]=fe,e[78]=me):me=e[78];let Se;return e[79]!==c||e[80]!==me||e[81]!==ae||e[82]!==Q?(Se=n.jsx($t.Root,{"aria-hidden":ae,className:Q,isOpen:!0,onClose:c,testId:"modal-kanzi-widget",children:me}),e[79]=c,e[80]=me,e[81]=ae,e[82]=Q,e[83]=Se):Se=e[83],Se},xl=t=>{"use forget";var f;const e=$e.c(7),{clientThreadId:s,messages:o,isLastMessageInTurn:a,rememberForThisConversation:l,onRequestCompletion:i}=t;let r,c;if(e[0]!==s||e[1]!==a||e[2]!==o||e[3]!==i||e[4]!==l){c=Symbol.for("react.early_return_sentinel");e:{const{jitPluginData:m}=an(o,a);if(!(m!=null&&m.from_server)||((f=m.from_server)==null?void 0:f.type)==="denied_by_user"){c=null;break e}const{from_server:h}=m,{body:x}=h,{domain:d,actions:y}=x;r=y.map((k,g)=>n.jsx(no,{clientThreadId:s,messages:o,onRequestCompletion:i,action:k,domain:d,handleUserAction:At,rememberAnswer:l},g))}e[0]=s,e[1]=a,e[2]=o,e[3]=i,e[4]=l,e[5]=r,e[6]=c}else r=e[5],c=e[6];return c!==Symbol.for("react.early_return_sentinel")?c:r},yl=ne(()=>K(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([3,1])),{loading:t=>de(t)}),bl=ne(()=>K(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zE),__vite__mapDeps([6,1,7,8,9])),{loading:t=>de(t)});function vl(t){"use forget";var T,L;const e=$e.c(40),{messages:s,isLastMessageInTurn:o,clientThreadId:a,onRequestCompletion:l}=t,[i,r]=D.useState(!1);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=n.jsx(se,{id:"WidgetOverlay.alwaysAsk",defaultMessage:"Always ask"}),e[0]=c):c=e[0];const f=c;let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=n.jsx(se,{id:"WidgetOverlay.allowThisConversation",defaultMessage:"Allow for this conversation"}),e[1]=m):m=e[1];const h=m,x=Un(),d=tn();let y;e[2]!==o||e[3]!==s?(y=an(s,o),e[2]=o,e[3]=s,e[4]=y):y=e[4];const{uiState:k}=y;let g;e[5]!==o||e[6]!==s?(g=eo(s,o),e[5]=o,e[6]=s,e[7]=g):g=e[7];const u=g;let v,_,j,N;if(e[8]!==a||e[9]!==d||e[10]!==o||e[11]!==x.connectorLinks||e[12]!==s||e[13]!==u||e[14]!==l||e[15]!==i||e[16]!==k){const F=to(s,o),[B,z,b]=(T=F==null?void 0:F.path.split("/").filter(Boolean))!=null?T:[],A=[...x.connectorLinks.values()].flat().find(C=>C.id===z),p=A&&d.platformConnectors.get(A.connector_id);v=k===O.UserConfirmation,_="bg-token-bg-primary text-token-text-primary shadow-long pointer-events-auto grid w-[min(90%,40rem)] max-w-[min(100%,600px)] gap-4 rounded-2xl p-4 sm:rounded-3xl";const S=n.jsx("div",{className:"text-token-text-primary ms-3 font-medium",children:n.jsx(se,{id:"VHhzt6",defaultMessage:"{connectorName} wants to perform an action",values:{connectorName:B}})});let Y;e[21]!==u||e[22]!==i?(Y=u?n.jsx("div",{className:"-mt-0.5 flex justify-start text-sm",children:n.jsx(oa,{size:"small",triggerButton:n.jsxs("button",{className:"bg-token-bg-primary hover:bg-token-bg-tertiary text-token-text-primary inline-flex items-center gap-1 rounded-lg px-2 py-1 ps-3 transition-colors",children:[i?h:f,n.jsx(bl,{strokeWidth:1,className:"icon-sm opacity-30","aria-hidden":!0})]}),children:n.jsxs(Vs.RadioGroup,{value:i?"allow":"ask",onValueChange:C=>r(C==="allow"),children:[n.jsx(Vs.RadioItem,{value:"ask",children:f}),n.jsx(Vs.RadioItem,{value:"allow",children:h})]})})}):null,e[21]=u,e[22]=i,e[23]=Y):Y=e[23];let I;e[24]!==S||e[25]!==Y?(I=n.jsxs("div",{className:"flex flex-1 flex-col",children:[S,Y]}),e[24]=S,e[25]=Y,e[26]=I):I=e[26];let P;e[27]!==a||e[28]!==o||e[29]!==s||e[30]!==l||e[31]!==i?(P=n.jsx("div",{className:"flex items-center justify-center gap-2",children:n.jsx(xl,{clientThreadId:a,messages:s,isLastMessageInTurn:o,rememberForThisConversation:i,onRequestCompletion:l})}),e[27]=a,e[28]=o,e[29]=s,e[30]=l,e[31]=i,e[32]=P):P=e[32],j=n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Zs,{connector:{name:B,logo_url:(L=p==null?void 0:p.logo_url)!=null?L:null},size:"medium",className:"bg-primary shadow-xxs max-h-fit rounded-2xl border bg-clip-padding p-2"}),I,P]}),N=F!=null&&n.jsx(us,{name:b,afterName:v&&n.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:n.jsx(se,{id:"APIToolCallCard.write",defaultMessage:"Write"})}),params:typeof F.args=="object"?F.args:JSON.parse(F.args)}),e[8]=a,e[9]=d,e[10]=o,e[11]=x.connectorLinks,e[12]=s,e[13]=u,e[14]=l,e[15]=i,e[16]=k,e[17]=v,e[18]=_,e[19]=j,e[20]=N}else v=e[17],_=e[18],j=e[19],N=e[20];let M;e[33]!==v?(M=v&&n.jsxs("div",{className:"text-token-text-secondary text-xs",children:[n.jsx(yl,{className:"icon-sm me-2 mb-0.5 inline-block"}),n.jsx(se,{id:"APIToolCallCard.writeWarning",defaultMessage:"Write actions come with risks. <link>Learn more</link>",values:{link:kl}})]}),e[33]=v,e[34]=M):M=e[34];let w;return e[35]!==_||e[36]!==j||e[37]!==N||e[38]!==M?(w=n.jsxs("div",{className:_,children:[j,N,M]}),e[35]=_,e[36]=j,e[37]=N,e[38]=M,e[39]=w):w=e[39],w}function kl(t){return n.jsx("a",{href:"https://platform.openai.com/docs/mcp#risks-and-safety",className:"underline underline-offset-2",target:"_blank",rel:"noopener noreferrer",children:t},"link")}const wl=ne(()=>K(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([7,1,8])),{loading:t=>de(t)}),Cl=["midi","microphone"],jl=t=>{"use forget";var ln,rn;const e=$e.c(241),{chatSDK:s,clientThreadId:o,onRequestCompletion:a,isLastMessageInTurn:l}=t,i=gs();let r;e[0]!==i?(r=()=>Yn(i),e[0]=i,e[1]=r):r=e[1];const c=Te(r);let f;e[2]!==i?(f=la(i),e[2]=i,e[3]=f):f=e[3];const{locale:m}=f;let h,x;e[4]!==o||e[5]!==i?(h=ps(i,o),x=on(h),e[4]=o,e[5]=i,e[6]=h,e[7]=x):(h=e[6],x=e[7]);const d=x,y=Aa(),[k,g]=D.useState(null),u=$a(s),{refetch:v,isLoading:_,isError:j,html:N,domain:M,subdomain:w,name:T,logoUrl:L,csp:F,prefersBorder:B,hideWidgetActions:z}=u,{widgetParent:b,widgetType:A,metadata:p}=s,[S,Y]=D.useState(null),I=D.useRef(null),P=D.useRef(null),C=ra.useStore();let E;e[8]!==s||e[9]!==o||e[10]!==a||e[11]!==C?(E=V=>{const ye=Ri(at(pe({},V),{chatSDK:s,persistedSystemHintsStore:C,clientThreadId:o}));ye!=null&&a(ye)},e[8]=s,e[9]=o,e[10]=a,e[11]=C,e[12]=E):E=e[12];const Z=E;let le;e[13]!==d?(le=()=>d.title$(),e[13]=d,e[14]=le):le=e[14];const ke=Te(le);let we;e[15]!==s||e[16]!==d?(we=()=>d.isPinned$(s),e[15]=s,e[16]=d,e[17]=we):we=e[17];const ie=Te(we);let ae;e[18]!==s||e[19]!==d?(ae=()=>d.isPinOrigin$(s),e[18]=s,e[19]=d,e[20]=ae):ae=e[20];const J=Te(ae);let Q;e[21]!==s||e[22]!==d?(Q=()=>d.isPinOrigin$(s)?d.displayMode$():"inline",e[21]=s,e[22]=d,e[23]=Q):Q=e[23];const re=Te(Q),U=re==="fullscreen",Ce=re==="pip";let Ie;e[24]!==d?(Ie=()=>d.maxWidgetHeight$(),e[24]=d,e[25]=Ie):Ie=e[25];const oe=Te(Ie);let ue;e[26]!==s.widgetId||e[27]!==d?(ue=()=>d.transitioningId$()===s.widgetId,e[26]=s.widgetId,e[27]=d,e[28]=ue):ue=e[28];const Re=Te(ue);let je;e[29]!==s||e[30]!==d?(je=()=>d.getLatestChatSDK$(s),e[29]=s,e[30]=d,e[31]=je):je=e[31];const st=Te(je),ge=k!=null?k:s;let _e;e[32]!==ge||e[33]!==d?(_e=()=>d.getWidgetStateAndProps$(ge),e[32]=ge,e[33]=d,e[34]=_e):_e=e[34];const{toolInput:Ve,toolOutput:Ne,widgetState:qe,toolResponseMetadata:Be}=Te(_e),Ee=st.messages,ee=ge.widgetId,fe=(ln=p==null?void 0:p.attribution_id)!=null?ln:b,[me,Se]=D.useState(0),[ce,Fe]=D.useState(!1),[We,He]=D.useState(!1),[he,Ue]=D.useState(!1),[Rt,hs]=D.useState(!1),Lt=Jn(),Ot=s.distributionChannel===bn.OPENAI&&z;let ut;e[35]!==ee||e[36]!==s||e[37]!==re||e[38]!==S||e[39]!==J||e[40]!==d||e[41]!==C||e[42]!==B?(ut=(V,ye)=>{if(V===re)return{mode:V};V==="fullscreen"&&(ca.setSidebarOpen(!1),C.setActiveSystemHint(null)),J?d.transitioningId$.set(ee):d.transitioningId$.set(s.widgetId),V!=="inline"&&d.subscribeToNewMessages$(s,g);const Ct=()=>{var jt,Nt;(jt=P.current)==null||jt.focus(),V==="inline"?(Nt=I.current)==null||Nt.navigate({popToRoot:!0}):d.setPinnedWidgetHeight(S!=null?S:0),g(null),d.setDisplayMode$(s,V,ye)};return B?(Ra({forceFlushSync:!0,className:V==="inline"?[rs["pinned-widget"],rs["becoming-inline"]]:re==="inline"?[rs["pinned-widget"],rs["becoming-pinned"]]:rs["pinned-widget"],update:Ct}).finished.then(()=>{d.transitioningId$.set(null)}),{mode:V}):(Ct(),d.transitioningId$.set(null),{mode:V})},e[35]=ee,e[36]=s,e[37]=re,e[38]=S,e[39]=J,e[40]=d,e[41]=C,e[42]=B,e[43]=ut):ut=e[43];const X=rt(ut);let mt,ft;e[44]!==ie||e[45]!==X?(mt=()=>{if(ie)return da(window,{keydown:V=>{V.key==="Escape"&&X("inline")}})},ft=[ie,X],e[44]=ie,e[45]=X,e[46]=mt,e[47]=ft):(mt=e[46],ft=e[47]),D.useEffect(mt,ft);let pt;e[48]!==v||e[49]!==me?(pt=()=>{v(),Fe(!1),He(!1),Se(me+1)},e[48]=v,e[49]=me,e[50]=pt):pt=e[50];const Pt=pt;let gt;e[51]!==X?(gt=()=>{Fe(!0),X("inline")},e[51]=X,e[52]=gt):gt=e[52];const Dt=gt;let ht;e[53]!==o||e[54]!==i?(ht=Ia(ps(i,o)),e[53]=o,e[54]=i,e[55]=ht):ht=e[55];const{height$:Bt,marginBottom$:Ft}=ht;let _t;e[56]!==Bt||e[57]!==J||e[58]!==U||e[59]!==Ft?(_t=()=>{var V,ye;return U&&J?16+((V=Bt())!=null?V:0)+((ye=Ft())!=null?ye:0):0},e[56]=Bt,e[57]=J,e[58]=U,e[59]=Ft,e[60]=_t):_t=e[60];const Wt=Te(_t);let xt;e[61]!==U?(xt=()=>U&&sn()?Xs+vo:0,e[61]=U,e[62]=xt):xt=e[62];const Ut=Te(xt);let yt;e[63]!==Ut||e[64]!==Wt?(yt={insets:{top:Ut,bottom:Wt,left:0,right:0}},e[63]=Ut,e[64]=Wt,e[65]=yt):yt=e[65];const Vt=yt;if(y){let V;return e[66]!==L||e[67]!==T?(V=n.jsx(Gi,{title:T,logoUrl:L}),e[66]=L,e[67]=T,e[68]=V):V=e[68],V}else if(ie&&!J&&!Re)return null;const _s=U?void 0:S?"".concat(Math.min(S,oe!=null?oe:1/0),"px"):"auto";let bt;e[69]!==o||e[70]!==J||e[71]!==l||e[72]!==Ee||e[73]!==a?(bt=so(Ee,l||J)&&n.jsx(vl,{messages:Ee,isLastMessageInTurn:l||J,clientThreadId:o,onRequestCompletion:a}),e[69]=o,e[70]=J,e[71]=l,e[72]=Ee,e[73]=a,e[74]=bt):bt=e[74];const Je=bt,vt=_||!We||S==null;let kt;e[75]!==M?(kt=Di(M),e[75]=M,e[76]=kt):kt=e[76];const Me=kt;let wt;e[77]!==o?(wt=nn(o),e[77]=o,e[78]=wt):wt=e[78];const Ze=wt,Ke=c?Cl:void 0,R=Re&&B&&"[view-transition-name:pinned-kanzi-widget]",q=!J&&"relative mb-2";let H;e[79]!==re||e[80]!==U||e[81]!==Ce||e[82]!==ie||e[83]!==B||e[84]!==R||e[85]!==q?(H=et("no-scrollbar",R,q,re==="inline"&&et("thread-sm:w-full",!ie&&"mx-0 max-sm:-mx-(--thread-content-margin) max-sm:w-[100cqw] max-sm:overflow-hidden",B&&!ie&&!U&&"max-sm:overflow-visible max-sm:px-4"),Ce&&"thread-xl:top-4 fixed start-4 end-4 top-4 z-50 mx-auto max-w-(--thread-content-max-width) sm:start-0 sm:end-0 sm:top-(--header-height) sm:w-full",U?"fixed start-0 end-0 top-0 bottom-0 z-50 mx-auto flex w-auto flex-col overflow-hidden":"overflow-visible"),e[79]=re,e[80]=U,e[81]=Ce,e[82]=ie,e[83]=B,e[84]=R,e[85]=q,e[86]=H):H=e[86];let $;e[87]!==oe?($={maxHeight:oe},e[87]=oe,e[88]=$):$=e[88];let xe;e[89]!==U||e[90]!==ie||e[91]!==X?(xe=ie&&!U&&n.jsx("button",{className:"absolute -start-2 -top-1.5 z-10 rounded-full bg-[#3a3a3a] p-1.25 text-white shadow-[0px_0px_0px_1px_var(--border-heavy),0px_4px_12px_rgba(0,0,0,0.12)] hover:bg-[#6a6a6a] md:-start-6",onClick:()=>X("inline"),children:n.jsx(wl,{className:"h-4.5 w-4.5"})}),e[89]=U,e[90]=ie,e[91]=X,e[92]=xe):xe=e[92];let Le;e[93]!==he||e[94]!==Rt||e[95]!==ke||e[96]!==U||e[97]!==L||e[98]!==T||e[99]!==X||e[100]!==Me?(Le=U&&n.jsx(tl,{logo:L,onClickBack:()=>{var V;return(V=I.current)==null?void 0:V.navigate({delta:-1})},onClickClose:()=>X("inline"),onClickForward:()=>{var V;return(V=I.current)==null?void 0:V.navigate({delta:1})},canGoBack:he,canGoForward:Rt,title:(rn=ke!=null?ke:T)!=null?rn:"",widgetDisplayName:T!=null?T:"",widgetDomain:Me!=null?Me:null,onClickOpenInApp:()=>{var V;(V=I.current)==null||V.getCurrentPath().then(ye=>{ye==null||!Me||window.open(new URL(ye.replace(/^\/+/,""),Me),"_blank")})}}),e[93]=he,e[94]=Rt,e[95]=ke,e[96]=U,e[97]=L,e[98]=T,e[99]=X,e[100]=Me,e[101]=Le):Le=e[101];const ze=U?"flex-1":"h-full",nt=!ie&&B&&"border-token-border-light shadow-short rounded-2xl sm:rounded-3xl dark:shadow-[0px_0px_0px_1px_#414141,0px_4px_14px_rgba(0,0,0,0.24)]",Kt=!U&&(B||Ce)&&"rounded-2xl sm:rounded-3xl",zt=Ce&&"shadow-[0px_0px_0px_1px_var(--border-heavy),0px_6px_20px_rgba(0,0,0,0.1)] md:-mx-4";let Qe;e[102]!==ze||e[103]!==nt||e[104]!==Kt||e[105]!==zt?(Qe=et("relative overflow-hidden",ze,nt,Kt,zt),e[102]=ze,e[103]=nt,e[104]=Kt,e[105]=zt,e[106]=Qe):Qe=e[106];const Gt=vt?406:_s;let Xe;e[107]!==Gt?(Xe={height:Gt},e[107]=Gt,e[108]=Xe):Xe=e[108];let ot;e[109]!==vt?(ot=vt&&n.jsx(Ys.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeOut"},className:"loading-results-shimmer absolute inset-0 sm:rounded-3xl"},"loading-results-shimmer"),e[109]=vt,e[110]=ot):ot=e[110];let qt;e[111]!==ot?(qt=n.jsx(ua,{initial:!1,children:ot}),e[111]=ot,e[112]=qt):qt=e[112];let Ht;e[113]!==ge||e[114]!==me||e[115]!==u?(Ht=me||Ii(ge,u),e[113]=ge,e[114]=me,e[115]=u,e[116]=Ht):Ht=e[116];const $s=Lt!=null?Lt:"light",Is=re!=null?re:"inline";let xs;e[117]===Symbol.for("react.memo_cache_sentinel")?(xs=()=>He(!0),e[117]=xs):xs=e[117];let Jt;if(e[118]!==ee||e[119]!==fe||e[120]!==s||e[121]!==o||e[122]!==h||e[123]!==F||e[124]!==i||e[125]!==M||e[126]!==Ke||e[127]!==N||e[128]!==d||e[129]!==m||e[130]!==p.suggestion_message_id||e[131]!==Z||e[132]!==X||e[133]!==w||e[134]!==b||e[135]!==A){let V;e[137]!==i?(V=be=>{const{clientX:Oe,clientY:Et,placeholder:Ps}=be;return new Promise((So,Mo)=>{var cn,dn,un;const os=(cn=P.current)==null?void 0:cn.getBoundingClientRect();ms(i,Rn,{placeholder:Ps,clientX:Oe+((dn=os==null?void 0:os.left)!=null?dn:0),clientY:Et+((un=os==null?void 0:os.top)!=null?un:0),onSubmit:(Jl,To)=>{So({prompt:To}),vn(i,Rn)},onClose:Mo})})},e[137]=i,e[138]=V):V=e[138];let ye;e[139]!==ee||e[140]!==fe||e[141]!==s||e[142]!==o||e[143]!==h||e[144]!==F||e[145]!==i||e[146]!==M||e[147]!==Ke||e[148]!==N||e[149]!==m||e[150]!==p.suggestion_message_id||e[151]!==Z||e[152]!==w||e[153]!==b||e[154]!==A?(ye=be=>{const{title:Oe,params:Et,heightHint:Ps}=be;As(i,"4226530095")&&ms(i,Hs,{conversation:h,sendFollowUpMessage:Z,chatSDK:s,features:Ke,clientThreadId:o,title:Oe,params:Et,html:N,attributionId:fe,widgetId:ee,widgetParent:b,suggestionMessageId:p==null?void 0:p.suggestion_message_id,widgetType:A,subdomain:w,domain:M,csp:F,locale:m,heightHint:Ps})},e[139]=ee,e[140]=fe,e[141]=s,e[142]=o,e[143]=h,e[144]=F,e[145]=i,e[146]=M,e[147]=Ke,e[148]=N,e[149]=m,e[150]=p.suggestion_message_id,e[151]=Z,e[152]=w,e[153]=b,e[154]=A,e[155]=ye):ye=e[155];let Ct;e[156]!==ee||e[157]!==i||e[158]!==d?(Ct=()=>{if(ma(i,Hs))return vn(i,Hs);d.closeWidget$(ee,"request_close")},e[156]=ee,e[157]=i,e[158]=d,e[159]=Ct):Ct=e[159];let jt;e[160]!==s||e[161]!==o||e[162]!==i?(jt=be=>go({ctx:i,chatSDK:s,clientThreadId:o,checkoutSession:be}),e[160]=s,e[161]=o,e[162]=i,e[163]=jt):jt=e[163];let Nt;e[164]!==X?(Nt=()=>X("inline"),e[164]=X,e[165]=Nt):Nt=e[165];let vs;e[166]===Symbol.for("react.memo_cache_sentinel")?(vs=be=>{const{canGoBack:Oe,canGoForward:Et}=be;Ue(Oe),hs(Et)},e[166]=vs):vs=e[166];let ks;e[167]!==d?(ks=(be,Oe)=>d.setWidgetState$(be,Oe),e[167]=d,e[168]=ks):ks=e[168];let ws;e[169]!==X?(ws=be=>{const{mode:Oe,title:Et}=be;return X(Oe,Et)},e[169]=X,e[170]=ws):ws=e[170];let Cs;e[171]!==d||e[172]!==b?(Cs=(be,Oe)=>d.callTool$(b,be,Oe),e[171]=d,e[172]=b,e[173]=Cs):Cs=e[173],Jt={openExternal(be){const{href:Oe}=be;bo({ctx:i,href:Oe,csp:F,domain:M})},openPromptInput:V,requestModal:ye,requestClose:Ct,requestCheckout:jt,notifyEscapeKey:Nt,notifyNavigation:vs,notifyIntrinsicHeight:Y,sendFollowUpMessage:Z,updateWidgetState:ks,requestDisplayMode:ws,callTool:Cs},e[118]=ee,e[119]=fe,e[120]=s,e[121]=o,e[122]=h,e[123]=F,e[124]=i,e[125]=M,e[126]=Ke,e[127]=N,e[128]=d,e[129]=m,e[130]=p.suggestion_message_id,e[131]=Z,e[132]=X,e[133]=w,e[134]=b,e[135]=A,e[136]=Jt}else Jt=e[136];let Yt;e[174]!==ee||e[175]!==fe||e[176]!==Ze||e[177]!==F||e[178]!==Ke||e[179]!==Dt||e[180]!==N||e[181]!==m||e[182]!==oe||e[183]!==p.suggestion_message_id||e[184]!==Vt||e[185]!==w||e[186]!==Ht||e[187]!==$s||e[188]!==Is||e[189]!==Jt||e[190]!==Ve||e[191]!==Ne||e[192]!==Be||e[193]!==b||e[194]!==qe||e[195]!==A?(Yt=n.jsx(wo,{iframeRef:P,ref:I,host:"chatgpt",title:A,locale:m,html:N,csp:F,features:Ke,subdomain:w,attributionId:fe,conversationId:Ze,widgetId:ee,suggestionMessageId:p.suggestion_message_id,widgetType:A,widgetParent:b,widgetState:qe,toolInput:Ve,toolOutput:Ne,toolResponseMetadata:Be,maxHeight:oe,theme:$s,displayMode:Is,safeArea:Vt,onReady:xs,onError:Dt,api:Jt},Ht),e[174]=ee,e[175]=fe,e[176]=Ze,e[177]=F,e[178]=Ke,e[179]=Dt,e[180]=N,e[181]=m,e[182]=oe,e[183]=p.suggestion_message_id,e[184]=Vt,e[185]=w,e[186]=Ht,e[187]=$s,e[188]=Is,e[189]=Jt,e[190]=Ve,e[191]=Ne,e[192]=Be,e[193]=b,e[194]=qe,e[195]=A,e[196]=Yt):Yt=e[196];let Zt;e[197]!==Je?(Zt=!!Je&&n.jsx("div",{className:"bg-token-bg-secondary/50 pointer-events-auto absolute inset-0 z-0 flex items-center justify-center rounded-none sm:rounded-3xl"}),e[197]=Je,e[198]=Zt):Zt=e[198];let Qt;e[199]!==Qe||e[200]!==Xe||e[201]!==qt||e[202]!==Yt||e[203]!==Zt?(Qt=n.jsxs("div",{className:Qe,style:Xe,children:[qt,Yt,Zt]}),e[199]=Qe,e[200]=Xe,e[201]=qt,e[202]=Yt,e[203]=Zt,e[204]=Qt):Qt=e[204];let Xt;e[205]!==Je||e[206]!==U||e[207]!==We?(Xt=We&&Je&&n.jsx(Ys.div,{className:et("pointer-events-none absolute inset-0 z-10 flex justify-center",U?"top-(--header-height) items-center":"items-start pt-10"),initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{type:"spring",bounce:.1,duration:.24},children:Je}),e[205]=Je,e[206]=U,e[207]=We,e[208]=Xt):Xt=e[208];let ys;e[209]!==H||e[210]!==$||e[211]!==xe||e[212]!==Le||e[213]!==Qt||e[214]!==Xt?(ys=n.jsxs("div",{className:H,style:$,children:[xe,Le,Qt,Xt]}),e[209]=H,e[210]=$,e[211]=xe,e[212]=Le,e[213]=Qt,e[214]=Xt,e[215]=ys):ys=e[215];const Rs=ys,Ls=j||ce,Os=!ie&&!j&&s.distributionChannel!==bn.OPENAI;let es;e[216]!==U?(es=U&&n.jsx("div",{className:"bg-token-bg-primary fixed start-0 end-0 top-0 bottom-0 z-10"}),e[216]=U,e[217]=es):es=e[217];let ts;e[218]!==s||e[219]!==Ze||e[220]!==_||e[221]!==L||e[222]!==T||e[223]!==Os||e[224]!==Me?(ts=Os&&n.jsx("div",{className:"mt-2 sm:mt-4",children:n.jsx(zi,{withMarginBottom:!0,onClick:Me?()=>window.open(Me,"_blank","noopener,noreferrer"):void 0,isLoading:_,logoUrl:L,name:T,conversationId:Ze,chatSDK:s})}),e[218]=s,e[219]=Ze,e[220]=_,e[221]=L,e[222]=T,e[223]=Os,e[224]=Me,e[225]=ts):ts=e[225];let ss;e[226]!==Pt||e[227]!==Ls||e[228]!==j||e[229]!==ce||e[230]!==Rs?(ss=Ls?n.jsx("div",{className:et(j&&"mt-2"),children:n.jsx(Hi,{onClickRetry:Pt,errorMessage:j?"Failed to fetch template":ce?"Runtime error":void 0})}):Rs,e[226]=Pt,e[227]=Ls,e[228]=j,e[229]=ce,e[230]=Rs,e[231]=ss):ss=e[231];let ns;e[232]!==Ot||e[233]!==U||e[234]!==B?(ns=!U&&!B&&!Ot&&n.jsx("div",{className:"bg-token-border-default my-3 h-px w-full"}),e[232]=Ot,e[233]=U,e[234]=B,e[235]=ns):ns=e[235];let bs;return e[236]!==es||e[237]!==ts||e[238]!==ss||e[239]!==ns?(bs=n.jsxs(n.Fragment,{children:[es,ts,ss,ns]}),e[236]=es,e[237]=ts,e[238]=ss,e[239]=ns,e[240]=bs):bs=e[240],bs},Nl=t=>{"use forget";const e=$e.c(18),{messages:s,clientThreadId:o,onRequestCompletion:a,isLastMessageInTurn:l}=t;let i;e[0]!==s?(i=En(s),e[0]=s,e[1]=i):i=e[1];const r=i,c=gs();let f,m;e[2]!==o||e[3]!==c?(f=ps(c,o),m=on(f),e[2]=o,e[3]=c,e[4]=f,e[5]=m):(f=e[4],m=e[5]);const h=m;let x;e[6]!==r.widgetId||e[7]!==h?(x=()=>h.closedWidgetIds$().has(r.widgetId),e[6]=r.widgetId,e[7]=h,e[8]=x):x=e[8];const d=Te(x);let y;e[9]!==r||e[10]!==f||e[11]!==h?(y=()=>{if(!r.sessionId||h.isPinned$(r))return!0;const u=ia(f);for(let v=u.length-1;v>=0;v--){const{messages:_}=u[v];let j;try{j=En(_)}catch(w){continue}if(j==null)continue;const{sessionId:N,invocationUuid:M}=j;if(N&&N===r.sessionId)return M===r.invocationUuid}return!0},e[9]=r,e[10]=f,e[11]=h,e[12]=y):y=e[12];const k=Te(y);if(r.metadata.is_widget_closed||d||r.isError||!k)return null;let g;return e[13]!==r||e[14]!==o||e[15]!==l||e[16]!==a?(g=n.jsx(jl,{clientThreadId:o,onRequestCompletion:a,isLastMessageInTurn:l,chatSDK:r}),e[13]=r,e[14]=o,e[15]=l,e[16]=a,e[17]=g):g=e[17],g},El=t=>{"use forget";const e=$e.c(5),{messages:s,clientThreadId:o,onRequestCompletion:a,isLastMessageInTurn:l}=t,i=gs();if(As(i,"1037317296"))return null;let r;return e[0]!==o||e[1]!==l||e[2]!==s||e[3]!==a?(r=n.jsx(aa,{name:"ChatSDKContent",children:n.jsx(Nl,{messages:s,clientThreadId:o,onRequestCompletion:a,isLastMessageInTurn:l})}),e[0]=o,e[1]=l,e[2]=s,e[3]=a,e[4]=r):r=e[4],r},Sl=ne(()=>K(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([40,1])),{loading:t=>de(t)}),Ml=ne(()=>K(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zE),__vite__mapDeps([6,1,7,8,9])),{loading:t=>de(t)});function Tl({messageMetadata:t}){const[e,s]=D.useState(!1);return n.jsxs("div",{className:"my-2 flex flex-col text-sm",children:[n.jsxs("div",{className:"flex flex-row items-center hover:cursor-pointer",onClick:()=>{s(!e)},children:[e?n.jsx(Ml,{className:"icon-sm"}):n.jsx(Sl,{className:"icon-sm"}),n.jsx("div",{className:"font-semibold",children:t.display_message})]}),e&&n.jsx("pre",{children:JSON.stringify(t.data,null,2)})]})}function Al({debugMessages:t}){return t.length===0?null:n.jsx("div",{children:t.map((e,s)=>{var a,l;const o=(l=(a=e.metadata)==null?void 0:a.jit_plugin_data)==null?void 0:l.from_server;return o&&o.type==="debug"?n.jsx(Tl,{messageMetadata:o.body},s):null})})}const Co="openaiFileIdRefs",$l=["send_email","batch_modify_email","create_event","update_event","delete_event"];function Il({name:t,params:e,result:s,privacyPolicyUrl:o,isPromptingForPermission:a}){var r;const i=((r=e==null?void 0:e[Co])!=null?r:[]).map((c,f)=>{const m=c.name.startsWith("dalle-");let h=c.name;return m&&(h="".concat(h,".webp")),n.jsx(Qn,{file:h,fileId:c.id},f)});return n.jsxs("div",{className:"divide-token-border-default border-token-border-default mt-1 mb-4 divide-y overflow-hidden rounded-xl border",children:[t&&n.jsx("div",{className:"bg-token-bg-tertiary text-token-text-secondary px-4 py-2 text-sm",children:n.jsx(se,{id:"JITPluginMessage.params.toolCall",defaultMessage:"Tool call: {name}",values:{name:n.jsx("span",{className:"text-token-text-primary",children:t})}})}),e&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-token-bg-tertiary text-token-text-secondary flex justify-between px-4 py-2 text-sm",children:[a?n.jsx(se,{id:"JITPluginMessage.params.sharing.present",defaultMessage:"The following will be shared:"}):n.jsx(se,{id:"JITPluginMessage.params.sharing.past",defaultMessage:"The following was shared:"}),o&&n.jsx("a",{href:fa(o),className:"text-token-text-primary",target:"_blank",rel:"noreferrer",children:n.jsx(se,pe({},Ye.privacyPolicyLink))})]}),n.jsx("div",{className:"px-4 py-2",children:n.jsx(Qs,{value:e})}),i.length>0&&n.jsx("div",{className:"px-4 py-2",children:i})]}),s&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-token-bg-tertiary text-token-text-secondary flex justify-between px-4 py-2 text-sm",children:n.jsx(se,{id:"JITPluginMessage.params.result",defaultMessage:"Result:"})}),n.jsx("div",{className:"px-4 py-2",children:n.jsx(Qs,{value:s})})]})]})}var Bn;const Rl=ls.div(Bn||(Bn=St(["h-px bg-token-border-default"])));var Fn;const Ln=ls.div(Fn||(Fn=St(["text-sm font-medium py-3 leading-6"])));var Wn;const Ll=ls.div(Wn||(Wn=St(["my-4 p-5 w-full rounded-2xl popover bg-token-main-surface-primary shadow-lg border border-token-border-default"]))),Ol=":",Pl=({functionName:t,parameters:e,onClick:s,isDraft:o=!0,isCanceled:a=!1})=>{const l=It(),i=Object.entries(e).filter(([r,c])=>!c||r==="timezone_str"&&c===Intl.DateTimeFormat().resolvedOptions().timeZone?!1:c.length>0);return n.jsxs(Ll,{children:[n.jsx("div",{className:"mb-4 flex items-center font-semibold",children:n.jsx("div",{children:o?en(t):Dl(t,l)})}),i.map(([r,c])=>n.jsxs("div",{children:[n.jsx(Rl,{}),n.jsxs("div",{className:"flex",children:[n.jsxs(Ln,{className:"text-token-text-tertiary me-1",children:[en(r),Ol]}),n.jsx(Ln,{className:"whitespace-pre-line",children:jo(c,l)})]})]},r)),o&&!a&&n.jsx("div",{className:"mt-2 flex justify-end gap-4",children:n.jsx(ct,{color:"primary",className:"py-2",onClick:s,children:l.formatMessage(Ms.approveButton)})}),a&&n.jsx("div",{className:"mt-2 flex justify-end gap-4",children:n.jsx(ct,{color:"primary",className:"py-2",disabled:!0,children:l.formatMessage(Ms.canceledButton)})})]})},Dl=(t,e)=>{switch(t){case"create_event":return"Created Event ✅";default:return"".concat(en(t)," ").concat(e.formatMessage(Ms.completedAction)," ✅")}},en=t=>{switch(t){case"timezone_str":return"Timezone";default:return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}},jo=(t,e)=>{if(Array.isArray(t))return t.map(a=>jo(a,e)).join(e.formatMessage(Ms.valueSeparator));if(typeof t=="object")return JSON.stringify(t);if(t.match(/^\s*\d{4}-\d{2}-\d{2}/)==null)return t;const o=new Date(t);return Number.isNaN(o.getTime())?t:e.formatDate(o,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},Ms=Ts({approveButton:{id:"ParametersView.approveButton",defaultMessage:"Approve"},completedAction:{id:"ParametersView.completedAction",defaultMessage:"Completed"},canceledButton:{id:"ParametersView.canceledButton",defaultMessage:"Canceled"},valueSeparator:{id:"ParametersView.valueSeparator",defaultMessage:","}}),No="api_tool.list_resources",Eo="api_tool.search_tools",Bl="api_tool",Fl=new Set([No,Eo,Bl]),Wl=t=>Fl.has(t);function Ul(t,e,s,o,a,l=null){const i=Vl(e,o,a,l);return i?typeof i=="string"?i:t.formatMessage(i,s):null}function Vl(t,e,s,o=null){if(![O.Finished,O.Running,O.Stopped].includes(s)||!e)return t;switch(e){case No:{const a=o==null?void 0:o[s];return a!=null?a:s===O.Finished||s===O.Stopped?is({id:"OdEouq",defaultMessage:"Looked for available tools"}):is({id:"hSyoq0",defaultMessage:"Looking for available tools"})}case Eo:{const a=o==null?void 0:o[s];return a!=null?a:s===O.Finished||s===O.Stopped?is({id:"4et5qC",defaultMessage:"Searched tools"}):is({id:"V0IDh0",defaultMessage:"Searching tools"})}case"api_tool.call_tool":{const a=o==null?void 0:o[s];return a!=null?a:s===O.Finished||s===O.Stopped?is({id:"NTASw4",defaultMessage:"Called tool"}):is({id:"gc64KQ",defaultMessage:"Calling tool"})}}return t}const Kl=ne(()=>K(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([41,1])),{loading:t=>de(t)}),zl=ne(()=>K(()=>import("./nc3t1yc5ebfd395z.js"),__vite__mapDeps([42,1])),{loading:t=>de(t)}),Gl=ne(()=>K(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zE),__vite__mapDeps([6,1,7,8,9])),{loading:t=>de(t)}),ql=(t,e)=>{const s=t.recipient==="api_tool.call_tool",o=["mcp://komi","mcp://kakao"],a=Nn(t).toLowerCase(),l=s&&o.some(r=>a.includes(r));let i=!1;if(l&&e){const r=Nn(e);if(r){let c;try{c=JSON.parse(r)}catch(f){}i=typeof c=="object"&&c!==null&&"widget"in c}}return{calledKakoMCP:l,displayedWidget:i}};function Hl({messages:t,nextMessage:e,clientThreadId:s,isLastMessageInTurn:o,isLastTurnInConversation:a,connectorFixture:l,onRequestCompletion:i}){var ce,Fe,We,He,he,Ue,Rt,hs,Lt,Ot,ut,X,mt,ft,pt,Pt,gt,Dt,ht,Bt,Ft,_t,Wt,xt,Ut,yt,Vt,_s,bt,Je,vt,kt,Me,wt,Ze,Ke;const r=gs(),[c,f]=Po(),{assistantMessage:m,toolMessages:h,debugMessages:x}=Xn(t),d=(ce=m.recipient)!=null?ce:"",y=pa(s),{addSource:k}=La(s),{uiState:g,jitPluginData:u,fileAttachments:v,invokedPlugin:_,lastConfirmActionJitPluginData:j}=an(t,o),N=It(),M=ga(),[w,T,L]=ha(s,R=>{var H,$,xe;const q=($=(H=m.metadata)==null?void 0:H.gizmo_id)!=null?$:R?Js.getGizmoId(R):M;return[q,Ba(R==null?void 0:R.mode,q),(xe=R==null?void 0:R.conversationOrigin)!=null?xe:null]}),F=h.length>0?h[h.length-1]:void 0,B=ql(m,F),z=Oa(T)&&T.gizmo_id===w,b=(Fe=_a(w,z))==null?void 0:Fe.data,[A,p]=D.useState(!1),[S,Y]=D.useState(!1),I=kn(m.recipient);let P;if((I==null?void 0:I.functionName)!=null&&(b==null?void 0:b.tools)!=null){for(const R of b.tools)if(Wa(R,I.functionName)){P=R;break}}const C=(We=kn(e==null?void 0:e.recipient))==null?void 0:We.namespace,{connectorId:E,connectorToolStatus:Z,connectorStatusMessage:le,showConnectorConnect:ke}=Ua(I==null?void 0:I.namespace,C,h,a),we=Te(()=>Yn(r)),ie=tn(!0,xa.JIT_PLUGIN),ae=l!=null?l:ie.platformConnectors.get(E!=null?E:""),J=ya();let Q=((He=u==null?void 0:u.from_server)==null?void 0:He.type)!=="denied_by_user"?(he=u==null?void 0:u.from_server)==null?void 0:he.body.domain:(Ue=P==null?void 0:P.metadata)==null?void 0:Ue.domain,re=null,U=null;if(!Q&&(I!=null&&I.functionName)&&I.namespace==="kanzi_app"){const[R,q]=I.functionName.split("/");Q=R.replace(/_/g," "),re=n.jsx(Ca,{openNewTab:!0,className:"text-token-text-secondary pt-1 opacity-0 transition-opacity duration-200 group-hover/tool-message:opacity-100",href:"/kanzi/studio/c/".concat(q),children:n.jsx(Kl,{})})}we&&d==="api_tool.call_tool"&&(U=n.jsx("button",{onClick:()=>Fa(ps(r,s)).focusMessage$(m.id),className:"text-token-text-secondary",children:n.jsx(zl,{})})),Q?Q.endsWith("__jit_plugin")&&(Q=Q.slice(0,-12)):Q="connector";const Ce=(Rt=P==null?void 0:P.metadata)==null?void 0:Rt.privacy_policy_url;D.useEffect(()=>{var q,H;if(((q=Va(u==null?void 0:u.from_client))==null?void 0:q.type)==="oauth_success")return;const R=c.get("oauth_success");if(((H=u==null?void 0:u.from_server)==null?void 0:H.type)==="oauth_required"&&R){f($=>($.delete("oauth_success"),$),{replace:!0});for(const $ of u.from_server.body.actions)if($.type==="oauth_redirect"){At({eventSource:"url",assistantMessage:m,onRequestCompletion:i,actionData:{type:"oauth_success",target_message_id:$.oauth_redirect.target_message_id},clientThreadId:s});return}}},[T,m,t,s,i,u,a,c,f,k]),D.useEffect(()=>{var H;const R=c.get("link_success"),q=c.get("oauth_success");if((R||q)&&((H=u==null?void 0:u.from_server)==null?void 0:H.type)==="link_required"){f($=>($.delete("link_success"),$.delete("oauth_success"),$),{replace:!0});for(const $ of u.from_server.body.actions)if($.type==="link_created"){At({eventSource:"url",assistantMessage:m,onRequestCompletion:i,actionData:{type:"link_success",target_message_id:$.link_created.target_message_id},clientThreadId:s});return}}},[c,f,m,s,i,u]);const Ie=r&&As(r,"2792858552");let oe=Mt.Running,ue=Q?Ye.running:Ye.starting,Re={domain:Q};if(g===O.Hidden)return null;if(g===O.OauthLogin||g===O.UserConfirmation||g===O.NoAuthLink){oe=Mt.Paused,ue=Ye.confirmingSimple;const R={gizmoName:(hs=b==null?void 0:b.gizmo.display.name)!=null?hs:"ChatGPT",domain:Q};Re=at(pe({},R),{title:q=>n.jsxs("div",{className:"inline-flex items-center gap-1 text-sm",children:[q,n.jsx(Gl,{className:"icon-sm"})]}),subtitle:q=>n.jsx("div",{className:"text-xs",children:q})})}else g===O.Finished?(oe=Mt.Finished,ue=Ye.finished,Re={domain:Q}):g===O.Error?(oe=Mt.Error,ue=Ye.error):g===O.Stopped||g===O.Denied?(oe=Mt.Stopped,ue=g===O.Denied?Ye.declined:Ye.stopped):g===O.Allowed&&(oe=Mt.Stopped,ue=Ye.allowed);const je=((Lt=u==null?void 0:u.from_server)==null?void 0:Lt.type)!=="denied_by_user"?(Ot=u==null?void 0:u.from_server)==null?void 0:Ot.body.actions.map((R,q)=>n.jsx(no,{clientThreadId:s,messages:t,onRequestCompletion:i,action:R,domain:Q,handleUserAction:At,rememberAnswer:A},q)):null;let st=null;((ut=m.metadata)!=null&&ut.tool_invoking_message||(X=m.metadata)!=null&&X.tool_invoked_message||(ft=(mt=m.metadata)==null?void 0:mt.chatgpt_sdk)!=null&&ft.tool_invoking_message||(Pt=(pt=m.metadata)==null?void 0:pt.chatgpt_sdk)!=null&&Pt.tool_invoked_message)&&(st={[O.Running]:(Ft=(Bt=(Dt=(gt=m.metadata)==null?void 0:gt.chatgpt_sdk)==null?void 0:Dt.tool_invoking_message)!=null?Bt:(ht=m.metadata)==null?void 0:ht.tool_invoking_message)!=null?Ft:void 0,[O.Finished]:(yt=(Ut=(Wt=(_t=m.metadata)==null?void 0:_t.chatgpt_sdk)==null?void 0:Wt.tool_invoked_message)!=null?Ut:(xt=m.metadata)==null?void 0:xt.tool_invoked_message)!=null?yt:void 0,[O.Stopped]:(vt=(Je=(_s=(Vt=m.metadata)==null?void 0:Vt.chatgpt_sdk)==null?void 0:_s.tool_invoked_message)!=null?Je:(bt=m.metadata)==null?void 0:bt.tool_invoked_message)!=null?vt:void 0});const ge=Ul(N,ue,Re,d,g,st);if(B.calledKakoMCP&&!B.displayedWidget||Wl(d)&&!o&&!we)return null;const _e=to(t,o),Ve=Ka(t,o),Ne=za(t),qe=(kt=_e==null?void 0:_e[Co])!=null?kt:[],Be=(!Es(t)||we)&&(!!_e||!!Ne||qe.length>0)&&(I==null?void 0:I.functionName)!=="list_resources"&&g!==O.Running,Ee=so(t,o),ee=eo(t,o),fe=Es(t)&&g!==O.Denied&&!we;let me=n.jsx(n.Fragment,{});const Se=Ga(t,o);if($l.includes(Se)&&(g===O.UserConfirmation||g===O.Finished||g===O.Stopped||g===O.Denied)){const R=g!==O.Finished,q=(g===O.Stopped||g===O.Denied)&&!a,H=(Me=Mn(u,_))!=null?Me:Mn(j,void 0),$=H&&typeof H=="object"?Object.fromEntries(Object.entries(H).map(([Le,ze])=>[Le,String(ze)])):{},xe=Le=>{var ze,nt,Kt,zt,Qe,Gt,Xe;((ze=u==null?void 0:u.from_server)==null?void 0:ze.type)==="confirm_action"&&((zt=(Kt=(nt=u==null?void 0:u.from_server)==null?void 0:nt.body)==null?void 0:Kt.actions)==null?void 0:zt[0].type)==="allow"&&(At({clientThreadId:s,assistantMessage:m,onRequestCompletion:i,sourceEvent:Le,actionData:at(pe({type:"allow"},(Xe=(Gt=(Qe=u==null?void 0:u.from_server)==null?void 0:Qe.body)==null?void 0:Gt.actions)==null?void 0:Xe[0].allow),{remember_answer:A})}),wa(s,ot=>{ot.scrollToMessageId=s}))};switch(Se){case"send_email":me=n.jsx(ei,{to:$==null?void 0:$.to,cc:$==null?void 0:$.cc,bcc:$==null?void 0:$.bcc,subject:$==null?void 0:$.subject,body:$==null?void 0:$.body,onClick:g===O.UserConfirmation?xe:()=>{},isDraft:R,isCanceled:q});break;default:me=n.jsx(Pl,{functionName:Se!=null?Se:"",parameters:$,onClick:g===O.UserConfirmation?xe:()=>{},isDraft:R,isCanceled:q});break}}else(g===O.UserConfirmation||g===O.NoAuthLink||g===O.OauthLogin)&&je&&!Ve&&(me=n.jsx(n.Fragment,{children:n.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[je,((wt=u==null?void 0:u.from_server)==null?void 0:wt.type)==="confirm_action"&&ee?n.jsx("div",{className:"flex gap-2 text-sm",children:n.jsx(Pa,{id:"dont-ask-again",label:n.jsx(se,pe({},Ye.rememberForThisConversation)),checked:A,onChange:R=>p(R.target.checked)})}):null]})}));return u==null||u.from_server,E?n.jsxs(n.Fragment,{children:[le&&n.jsx(Sn,{highlightedCommand:ae?N.formatMessage(le,{domain:ae.name}):n.jsx("br",{}),status:Z,showWorkUserSetting:!1}),ke&&ae&&n.jsx("div",{className:"mb-2 flex gap-2",children:n.jsx(Ya,{connector:ae,clientThreadId:s,hasWidget:Es(t),onConnect:()=>{var $;const R=nn(s),q=R?new URL(ba(R),window.location.origin):new URL(window.location.href);q.searchParams.set("oauth_success","true");const H=(($=u==null?void 0:u.from_server)==null?void 0:$.type)==="oauth_required"?"OAUTH":Ie?void 0:"NONE";J({connectorId:ae.id,redirectAfter:q.toString(),referrer:va.JitPluginMessage,authTypeOverride:H}),wn(ae.id,jn.ConnectorPromptAccept,at(pe({},Cn({clientThreadId:R!=null?R:s})),{auth_type_override:H!=null?H:"",supports_mixed_auth:ae.supported_auth.length>1?"true":"false"}))},onProceedWithoutConnecting:R=>{var H,$,xe,Le;const q=(H=u==null?void 0:u.from_server)==null?void 0:H.type;if(q==="oauth_required"||q==="link_required"){for(const ze of(xe=($=u==null?void 0:u.from_server)==null?void 0:$.body.actions)!=null?xe:[])if(ze.type==="deny"){const nt=ze.deny.target_message_id;At({eventSource:Da(R),assistantMessage:m,onRequestCompletion:i,actionData:{type:"deny",target_message_id:nt},clientThreadId:s}),wn(ae.id,jn.ConnectorPromptReject,Cn({clientThreadId:y!=null?y:s})),(Le=ae==null?void 0:ae.branding)!=null&&Le.is_discoverable_app&&Hn.safePost("/system_hints/suggestion_cooldown",{requestBody:{system_hint:"connector:".concat(ae.id)}});return}}}})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Al,{debugMessages:x}),!fe&&!0&&n.jsx("span",{className:"group/tool-message",children:n.jsx(Sn,{highlightedCommand:ge,status:oe,showWorkUserSetting:!1,accessory:re,labelPrefix:U,forceExpanded:g===O.UserConfirmation,children:Be?(I==null?void 0:I.namespace)==="api_tool"?Ee?null:n.jsx(ai,{isWrite:g===O.UserConfirmation,functionName:(Ze=m.recipient)!=null?Ze:Se,params:_e,result:Ne,toolCallSafetySummary:Ve,messages:t,clientThreadId:s,jitPluginData:u!=null?u:{},onRequestCompletion:i,rememberForThisConversation:A,conversationOrigin:L}):n.jsx(Il,{privacyPolicyUrl:Ce,name:(Ke=m.recipient)!=null?Ke:Se,params:_e,result:Ne,isPromptingForPermission:oe===Mt.Paused}):null})}),n.jsx("div",{className:"mt-1 flex flex-wrap gap-2 empty:hidden",children:v==null?void 0:v.map(R=>n.jsx(Qn,{file:R.name,fileId:R.id,width:"wide",alwaysShowData:!0,showDownloadButton:!0,downloadLink:R.download_url,contextConnectorInfo:ka(R.context_connector_info)},R.id))}),Es(t)&&g!==O.Denied&&n.jsx(El,{clientThreadId:s,messages:t,isLastMessageInTurn:o,onRequestCompletion:i}),!Ee&&me]})}const rr=Object.freeze(Object.defineProperty({__proto__:null,JITPluginMessage:Hl},Symbol.toStringTag,{value:"Module"}));export{co as a,ri as b,vi as g,rr as i,lr as t};
//# sourceMappingURL=f2osoco0jc12om0v.js.map
