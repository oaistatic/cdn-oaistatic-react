const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nz44s7ebe5b6pll5.js","assets/kfrdmkli83ureki3.js"])))=>i.map(i=>d[i]);
var K=Object.defineProperty,Q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var z=(e,s,t)=>s in e?K(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,A=(e,s)=>{for(var t in s||(s={}))G.call(s,t)&&z(e,t,s[t]);if(P)for(var t of P(s))Z.call(s,t)&&z(e,t,s[t]);return e},B=(e,s)=>Q(e,Y(s));import{c as J,h as V,r as D,e as X,j as o,M as L,_ as ee}from"./kfrdmkli83ureki3.js";import{oZ as te,dT as se,u as oe,ow as ae,d as ne,o_ as T,o$ as ce,D as ie,aS as re,db as F,aC as le,az as ue,da as de,_ as he,dc as me,dd as Se,aA as fe}from"./kw08ajijqinojrwh.js";import{d as ge}from"./lg0oi3tmjv8kv2p4.js";import"./fyw02vlaiv2vq6cj.js";import"./b3ungmqo5x8kj4fh.js";const pe=ue(()=>ee(()=>import("./nz44s7ebe5b6pll5.js"),__vite__mapDeps([0,1])),{loading:e=>fe(e)});function Oe(e){switch(e){case T.SSOMismatch:return{title:n.cannotAccessWorkspace,description:n.ssoMismatchDescription};case T.RequireSSOLogin:return{title:n.cannotAccessWorkspace,description:n.requireSSODescription};case T.UnexpectedSSOLogin:return{title:n.cannotAccessWorkspace,description:n.unexpectedSSODescription}}}const xe=2e3;function Ee(){"use forget";var I,b;const e=J.c(33),s=te(),t=se(),E=V(),i=oe(),R=ae();let S;e[0]!==i?(S=()=>ce(i).isFetched,e[0]=i,e[1]=S):S=e[1];const q=ne(S),c=s==null?void 0:s.errorCode,h=s!=null&&q&&R==null&&!!t,[H,W]=D.useState(!1);let f,g;e[2]!==h?(f=()=>{h&&setTimeout(()=>{W(!0)},xe)},g=[h],e[2]=h,e[3]=f,e[4]=g):(f=e[3],g=e[4]),D.useEffect(f,g);const $=c===T.UnexpectedSSOLogin,m=h&&($?H:!0),a=ge();let p,O;if(e[5]!==a||e[6]!==c||e[7]!==m?(p=()=>{var U;if(!c||!m)return;const v=(U=a==null?void 0:a.split("@"))==null?void 0:U[1];ie.addError("SSO Catch All Modal: ".concat(c," for ").concat(a!=null?a:"unknown user"),{sso_error:c,email:a,email_hostname:v})},O=[c,m,a],e[5]=a,e[6]=c,e[7]=m,e[8]=p,e[9]=O):(p=e[8],O=e[9]),D.useEffect(p,O),!m)return null;let x;e[10]!==E||e[11]!==s.accountName||e[12]!==(t==null?void 0:t.name)?(x=(b=(I=s==null?void 0:s.accountName)!=null?I:t==null?void 0:t.name)!=null?b:E.formatMessage(n.workspacePlaceholder),e[10]=E,e[11]=s.accountName,e[12]=t==null?void 0:t.name,e[13]=x):x=e[13];const N=x;let M;e[14]!==i||e[15]!==t?(M=()=>{const v=t!=null&&t.ssoConnectionName?{connection:t.ssoConnectionName}:void 0;re(i,{fallbackScreenHint:"login",additionalAuthParams:v})},e[14]=i,e[15]=t,e[16]=M):M=e[16];const k=M;let _;e[17]!==s.errorCode?(_=Oe(s.errorCode),e[17]=s.errorCode,e[18]=_):_=e[18];const{title:w,description:j}=_;let r;e[19]!==w?(r=o.jsx("div",{className:"flex flex-col",children:o.jsx("div",{className:"text-lg",children:o.jsx(L,A({},w))})}),e[19]=w,e[20]=r):r=e[20];let l;e[21]!==N?(l=o.jsx(L,B(A({},n.authenticateNotice),{values:{workspaceName:N}})),e[21]=N,e[22]=l):l=e[22];let u;e[23]!==k||e[24]!==l?(u=o.jsx(F.Button,{onClick:k,color:"primary",children:l}),e[23]=k,e[24]=l,e[25]=u):u=e[25];let C;e[26]===Symbol.for("react.memo_cache_sentinel")?(C=o.jsx(F.Button,{onClick:Me,children:o.jsx(L,{id:"KlMYRb",defaultMessage:"Log out"})}),e[26]=C):C=e[26];let d;e[27]!==j?(d=o.jsx("div",{className:"flex flex-col space-y-4",children:o.jsx("div",{children:o.jsx(L,A({},j))})}),e[27]=j,e[28]=d):d=e[28];let y;return e[29]!==u||e[30]!==d||e[31]!==r?(y=o.jsx(le,{testId:"modal-sso-catch-all",isOpen:!0,onClose:de,type:"warning",size:"custom",className:"max-w-3xl",title:r,icon:pe,primaryButton:u,secondaryButton:C,children:d}),e[29]=u,e[30]=d,e[31]=r,e[32]=y):y=e[32],y}function Me(){he.logLogOutButtonClicked({location:"sso_catch_all_modal"},me.ACCESS_LOGOUT_ACTION_LOCATION_SSO_CATCH_ALL_MODAL),Se()}const n=X({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{Ee as default};
//# sourceMappingURL=mzfvs4galmoyidwq.js.map
