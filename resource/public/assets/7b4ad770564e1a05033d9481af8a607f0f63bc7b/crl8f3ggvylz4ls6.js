import{r as E,j as d,h as S,e as U}from"./kfrdmkli83ureki3.js";import{u as j,J as w,M as A,co as D,aT as y,o9 as R,al as V,i as H,V as F}from"./kw08ajijqinojrwh.js";import{S as L,ba as k,bb as B,bc as J}from"./fyw02vlaiv2vq6cj.js";const N=U({reportConversationTitle:{id:"gizmo.report.conversationModal.title",defaultMessage:"Report a conversation"},reportMessageTitle:{id:"gizmo.report.messageModal.title",defaultMessage:"Report a message"}});function Q(l,t,c,e){var a,p,g;const r=V(l),o=t&&H(t)?t:null,n=e!=null&&e.projectId&&H(e.projectId)?e.projectId:null,s=(a=o!=null?o:n)!=null?a:null,i=(p=c!=null?c:e==null?void 0:e.conversationOwnerId)!=null?p:null,u=s!=null?(g=i!=null?i:r==null?void 0:r.normalizedAccountUserId)!=null?g:null:i;return{resolvedProjectId:s,resolvedConversationOwnerId:u}}function Z({serverThreadId:l,clientThreadId:t,onClose:c,isStaticSharedThread:e,isSharedConversation:r,projectId:o,conversationOwnerId:n}){var _,m;const s=j(),i=w(s,"2935021756"),u=w(s,"3376455464")||e||r,a=E.useContext(L),p=(_=t!=null?t:l)!=null?_:a==null?void 0:a.serverSharedThreadId,g=A(p,v=>{var x,z,G;return{projectId:(x=F.getGizmoId(v))!=null?x:null,conversationOwnerId:(G=(z=v==null?void 0:v.sharedProjectConversationOwner)==null?void 0:z.id)!=null?G:null}},{disablePerfDetector:!0}),M=D(t);let f=l!=null?l:M;f==null&&a!=null&&(f=(m=a.serverSharedThreadId)!=null?m:void 0);const{resolvedProjectId:b,resolvedConversationOwnerId:C}=Q(s,o!=null?o:null,n!=null?n:null,g);return i&&typeof window<"u"&&(window._convo_share_debug={isOpen:!0,canReport:u,serverThreadIdIsNull:f==null,isStaticSharedThread:e,isSharedConversation:r}),E.useEffect(()=>{!u||f==null||y(s,"chatgpt_conversation_share_report_modal_not_shown",u?"serverThreadId":"canReport")},[u,s,f]),!u||f==null?null:d.jsx(q,{serverThreadId:f,onClose:c,isStaticSharedThread:e,projectId:b,conversationOwnerId:C,isSharedConversation:r})}function $({serverThreadId:l,clientThreadId:t,messageId:c,onClose:e,projectId:r,conversationOwnerId:o}){var b,C;const n=j(),s=w(n,"3376455464"),i=D(t);let u=l!=null?l:i;const a=E.useContext(L);u==null&&a!=null&&(u=(b=a.serverSharedThreadId)!=null?b:void 0);const p=(C=t!=null?t:l)!=null?C:a==null?void 0:a.serverSharedThreadId,g=A(p,_=>{var m,v,x;return{projectId:(m=F.getGizmoId(_))!=null?m:null,conversationOwnerId:(x=(v=_==null?void 0:_.sharedProjectConversationOwner)==null?void 0:v.id)!=null?x:null}},{disablePerfDetector:!0}),{resolvedProjectId:M,resolvedConversationOwnerId:f}=Q(n,r!=null?r:null,o!=null?o:null,g);return!s||u==null||c==null?null:d.jsx(K,{serverThreadId:u,messageId:c,onClose:e,projectId:M,conversationOwnerId:f})}function q({serverThreadId:l,onClose:t,isStaticSharedThread:c,projectId:e,conversationOwnerId:r,isSharedConversation:o}){const n=j(),{data:s}=k(n,c||o?R.ShareableConversation:R.Conversation),i=S(),u=B(n,i,l,c||o?R.ShareableConversation:R.Conversation,void 0,e,r);return s==null||l==null?(y(n,"chatgpt_conversation_share_report_modal_not_shown",s==null?"report_reasons":"thread_id"),null):d.jsx(J,{reasons:s.reasons,submitReport:u,title:i.formatMessage(N.reportConversationTitle),onClose:t,header:s.header,subHeader:s.header_explanation})}function K({serverThreadId:l,messageId:t,onClose:c,projectId:e,conversationOwnerId:r}){const o=j(),{data:n}=k(o,R.Message),s=S(),i=B(o,s,l,R.Conversation,void 0,e,r,t);return n==null?(y(o,"chatgpt_conversation_share_report_modal_not_shown","report_reasons"),null):d.jsx(J,{reasons:n.reasons,submitReport:i,title:s.formatMessage(N.reportMessageTitle),onClose:c,header:n.header,subHeader:n.header_explanation})}export{q as ReportConversationModal,K as ReportMessageModal,Z as ThreadReportConversationModal,$ as ThreadReportMessageModal};
//# sourceMappingURL=crl8f3ggvylz4ls6.js.map
