const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bm7tipcy0vs6d5ar.js","assets/kfrdmkli83ureki3.js"])))=>i.map(i=>d[i]);
var re=Object.freeze,ue=Object.defineProperty,_e=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var ie=(t,e,a)=>e in t?ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,F=(t,e)=>{for(var a in e||(e={}))Ce.call(e,a)&&ie(t,a,e[a]);if(ce)for(var a of ce(e))we.call(e,a)&&ie(t,a,e[a]);return t},de=(t,e)=>_e(t,Se(e));var O=(t,e)=>re(ue(t,"raw",{value:re(e||t.slice())}));import{e as ve,r as g,i as ye,_ as je,c as U,j as o,M as Y,h as J,d as be,a as Ne,y as Te}from"./kfrdmkli83ureki3.js";import{R as Ee,u as pe,N as he,az as Me,cv as X,aA as Le,cy as Pe,aB as Z,n7 as Ae,dT as Re,dk as We,_ as Ie,am as Be,nQ as De,D as Fe}from"./kw08ajijqinojrwh.js";import{T as Ke}from"./d926frjkxobgocsd.js";import{w as $e}from"./fyw02vlaiv2vq6cj.js";const K=ve({optionalField:{id:"IJLQx/",defaultMessage:"(optional)"},teachersCreateWorkspacePageTitle:{id:"PGheU7",defaultMessage:"Set up your ChatGPT workspace"},workspaceNameLabel:{id:"BiwR3m",defaultMessage:"Workspace name"},workspaceNamePlaceholder:{id:"06SA34",defaultMessage:"Enter your workspace name"},purchaseStepTitle:{id:"Q/T+NA",defaultMessage:"Set up your ChatGPT workspace"},purchaseStepSubtitle:{id:"/VsLeB",defaultMessage:"You can get started on your own or add your teaching team"},continueButton:{id:"fsy6oV",defaultMessage:"Continue"}}),qe=t=>Ee.safePost("/accounts/create_workspace_without_subscription",{requestBody:t});function Ue(){const t=pe(),e=!he(t),[a,l]=g.useState(null),[n,s]=g.useState(!1),r=g.useRef(!0),c=ye({mutationFn:()=>Ke.refreshEnrollmentStatus(),onSuccess:m=>{m.metadata&&l(m.metadata),s(!0)}}),[i,u]=g.useState(e?{name:"logged-out"}:{name:"loading"});return g.useEffect(()=>{!e&&r.current&&(r.current=!1,c.mutate())},[e,c]),g.useEffect(()=>{if(!e&&n){if(a){const m=a.verification_status;u(m==="verified"?{name:"verified"}:m==="error"?{name:"error"}:m==="linked"?{name:"linked"}:{name:"needs-verification",verificationId:a==null?void 0:a.verification_id});return}u({name:"needs-verification"})}},[e,n,a]),i}const Ve=Me(()=>je(()=>import("./bm7tipcy0vs6d5ar.js"),__vite__mapDeps([0,1])),{loading:t=>Le(t)}),ze=t=>{"use forget";const e=U.c(10),{content:a,onPrevious:l,headerPaddingClassName:n}=t,s=n!=null?n:"pt-16 [@media(min-width:450px)]:pt-[12vh]";let r;e[0]!==s?(r=Pe("relative flex min-h-[100dvh] w-screen justify-center overflow-y-auto",s),e[0]=s,e[1]=r):r=e[1];let c;e[2]!==l?(c=l&&o.jsx("div",{className:"absolute start-4 top-4",children:o.jsx(Z,{onClick:l,icon:Ve,color:"ghost"})}),e[2]=l,e[3]=c):c=e[3];let i;e[4]!==a?(i=o.jsx("div",{className:"flex max-w-full flex-none items-center justify-center [@media(min-width:450px)]:w-[380px]",children:a}),e[4]=a,e[5]=i):i=e[5];let u;return e[6]!==r||e[7]!==c||e[8]!==i?(u=o.jsxs("div",{className:r,children:[c,i]}),e[6]=r,e[7]=c,e[8]=i,e[9]=u):u=e[9],u},Qe=t=>{"use forget";const e=U.c(10),{title:a,subTitle:l,children:n}=t;let s;e[0]!==a?(s=o.jsx("div",{className:"text-3xl font-normal",children:a}),e[0]=a,e[1]=s):s=e[1];let r;e[2]!==l?(r=l&&o.jsx("div",{className:"text-token-text-secondary",children:l}),e[2]=l,e[3]=r):r=e[3];let c;e[4]!==s||e[5]!==r?(c=o.jsxs("div",{className:"flex flex-col gap-4 text-center",children:[s,r]}),e[4]=s,e[5]=r,e[6]=c):c=e[6];let i;return e[7]!==n||e[8]!==c?(i=o.jsxs("div",{className:"box-content flex w-full flex-col gap-6 px-4",children:[c,n]}),e[7]=n,e[8]=c,e[9]=i):i=e[9],i},Ge=t=>{"use forget";const e=U.c(9),{onClick:a,disabled:l}=t,[n,s]=g.useState(!1),r=J();let c;e[0]!==a?(c=async()=>{s(!0),await a(),s(!1)},e[0]=a,e[1]=c):c=e[1];let i;e[2]!==r?(i=r.formatMessage(K.continueButton),e[2]=r,e[3]=i):i=e[3];let u;return e[4]!==l||e[5]!==n||e[6]!==c||e[7]!==i?(u=o.jsx(Z,{size:"large",loading:n,disabled:l,onClick:c,children:i}),e[4]=l,e[5]=n,e[6]=c,e[7]=i,e[8]=u):u=e[8],u};var fe;const He=X.label(fe||(fe=O(["font-medium"])));var me;X.div(me||(me=O(["text-red-500 text-sm mb-2"])));var ge;const Oe=X.input(ge||(ge=O(["rounded-full border border-token-border-default bg-token-bg-primary placeholder:text-token-text-tertiary px-5 py-3 focus:border-token-icon-accent focus:ring-token-icon-accent focus:ring-0"]))),Ye=t=>{"use forget";const e=U.c(5),{children:a,required:l}=t;let n;e[0]!==l?(n=!l&&o.jsxs("span",{className:"text-token-text-secondary text-xs",children:["Â ",o.jsx(Y,F({},K.optionalField))]}),e[0]=l,e[1]=n):n=e[1];let s;return e[2]!==a||e[3]!==n?(s=o.jsxs(He,{children:[a,n]}),e[2]=a,e[3]=n,e[4]=s):s=e[4],s},Je=t=>{"use forget";const e=U.c(47),{disableContinueButton:a,onNext:l,onCancel:n}=t,s=J(),r=be(),c=K.purchaseStepTitle,i=K.purchaseStepSubtitle,[u,m]=g.useState(""),[p,Q]=g.useState(!1);let R;e[0]!==u?(R=u.trim(),e[0]=u,e[1]=R):R=e[1];const L=R,$=p&&L.length>0&&!a;let v;e[2]!==p||e[3]!==L?(v={workspaceName:L,agreedToDPA:p},e[2]=p,e[3]=L,e[4]=v):v=e[4];const B=v;let h;e[5]!==s?(h=s.formatMessage(c),e[5]=s,e[6]=h):h=e[6];let y;e[7]!==s?(y=i&&s.formatMessage(i),e[7]=s,e[8]=y):y=e[8];let j;e[9]!==s?(j=s.formatMessage(K.workspaceNameLabel),e[9]=s,e[10]=j):j=e[10];let b;e[11]!==j?(b=o.jsx(Ye,{required:!0,children:j}),e[11]=j,e[12]=b):b=e[12];let P;e[13]===Symbol.for("react.memo_cache_sentinel")?(P=E=>m(E.target.value),e[13]=P):P=e[13];let N;e[14]!==s?(N=s.formatMessage(K.workspaceNamePlaceholder),e[14]=s,e[15]=N):N=e[15];let x;e[16]!==N||e[17]!==u?(x=o.jsx(Oe,{id:"workspace-name",name:"workspace-name",value:u,onChange:P,placeholder:N}),e[16]=N,e[17]=u,e[18]=x):x=e[18];let d;e[19]!==b||e[20]!==x?(d=o.jsxs("div",{className:"flex flex-col gap-1.5",children:[b,x]}),e[19]=b,e[20]=x,e[21]=d):d=e[21];let D;e[22]===Symbol.for("react.memo_cache_sentinel")?(D=E=>Q(E.target.checked),e[22]=D):D=e[22];let A;e[23]===Symbol.for("react.memo_cache_sentinel")?(A=o.jsx(Y,{id:"teachersCreateWorkspace.dpaAgreement",defaultMessage:"I agree to the DPA, and its {dpaLink}.",values:{dpaLink:o.jsx("a",{href:"https://openai.com/policies/services-agreement/",className:"underline",target:"_blank",rel:"noreferrer",children:o.jsx(Y,{id:"teachersCreateWorkspace.dpaAgreement.dpaLink",defaultMessage:"Terms and Conditions"})})}}),e[23]=A):A=e[23];let k;e[24]!==p?(k=o.jsx("div",{className:"flex flex-col gap-1.5",children:o.jsx($e,{id:"dpa-agree",checked:p,onChange:D,containerClassName:"mt-3 flex items-start gap-2",label:A})}),e[24]=p,e[25]=k):k=e[25];let _;e[26]!==d||e[27]!==k?(_=o.jsxs("div",{className:"flex flex-col gap-6",children:[d,k]}),e[26]=d,e[27]=k,e[28]=_):_=e[28];const W=!$;let S;e[29]!==l||e[30]!==B?(S=()=>l(F({},B)),e[29]=l,e[30]=B,e[31]=S):S=e[31];let T;e[32]!==W||e[33]!==S?(T=o.jsx(Ge,{disabled:W,onClick:S}),e[32]=W,e[33]=S,e[34]=T):T=e[34];let C;e[35]!==r||e[36]!==n?(C=()=>{n==null||n(),r("/")},e[35]=r,e[36]=n,e[37]=C):C=e[37];let I;e[38]===Symbol.for("react.memo_cache_sentinel")?(I=o.jsx(Y,{id:"TjfExQ",defaultMessage:"Cancel"}),e[38]=I):I=e[38];let f;e[39]!==C?(f=o.jsx(Z,{color:"ghost",onClick:C,children:I}),e[39]=C,e[40]=f):f=e[40];let w;return e[41]!==_||e[42]!==T||e[43]!==f||e[44]!==h||e[45]!==y?(w=o.jsx(ze,{content:o.jsxs(Qe,{title:h,subTitle:y,children:[_,T,f]})}),e[41]=_,e[42]=T,e[43]=f,e[44]=h,e[45]=y,e[46]=w):w=e[46],w},M={impression:{segment:"K12 Create Workspace: Shown",statsig:"chatgpt_k12_create_workspace_shown"},continue:{segment:"K12 Create Workspace: Continue Clicked",statsig:"chatgpt_k12_create_workspace_continue_clicked"},cancel:{segment:"K12 Create Workspace: Cancel Clicked",statsig:"chatgpt_k12_create_workspace_cancel_clicked"},result:{segment:"K12 Create Workspace: Result",statsig:"chatgpt_k12_create_workspace_result"}},Xe=()=>{"use forget";var ee,te,se,ae,ne;const t=U.c(39),e=J(),a=pe(),l=Ue();let n;t[0]!==a?(n=he(a),t[0]=a,t[1]=n):n=t[1];const s=n;let r;t[2]!==a?(r=Ae(a),t[2]=a,t[3]=r):r=t[3];const c=r,i=Re(),u=We(),m=Ne(),[p,Q]=g.useState(!1),R=(se=(te=i==null?void 0:i.planType)!=null?te:(ee=c==null?void 0:c.account)==null?void 0:ee.planType)!=null?se:null,L=(ae=u==null?void 0:u.email_domain_type)!=null?ae:null;let $;t[4]!==m.search?($=new URLSearchParams(m.search).get("referer"),t[4]=m.search,t[5]=$):$=t[5];const v=$,B="verificationId"in l&&(ne=l.verificationId)!=null?ne:null;let h;t[6]!==l.name||t[7]!==B?(h={enrollmentState:l.name,enrollmentVerificationId:B},t[6]=l.name,t[7]=B,t[8]=h):h=t[8];const y=h,j=s?"logged_in":"logged_out",b=s?R!=null?R:"unknown":null;let P;t[9]!==L||t[10]!==y||t[11]!==s||t[12]!==j||t[13]!==b?(P=F({isLoggedIn:s,loggedInStatus:j,accountPlanType:b,emailDomainType:L},y),t[9]=L,t[10]=y,t[11]=s,t[12]=j,t[13]=b,t[14]=P):P=t[14];const N=P;let x;t[15]!==N||t[16]!==v?(x=(V,z,H)=>{Ie.logEventWithStatsig(V,z,F(de(F({},N),{referer:v!=null?v:null}),H))},t[15]=N,t[16]=v,t[17]=x):x=t[17];const d=x,D=g.useRef(!1),A=L!=null,k=l.name!=="loading";let _,W;t[18]!==A||t[19]!==k||t[20]!==s||t[21]!==d?(W=()=>{!s||!A||!k||D.current||(d(M.impression.segment,M.impression.statsig),D.current=!0)},_=[A,k,s,d],t[18]=A,t[19]=k,t[20]=s,t[21]=d,t[22]=_,t[23]=W):(_=t[22],W=t[23]),g.useEffect(W,_);let S;t[24]!==d?(S=async V=>{var oe,le;Q(!0);const z=(oe=V.workspaceName)!=null?oe:"",H=(le=V.agreedToDPA)!=null?le:!1;d(M.continue.segment,M.continue.statsig,{workspaceNameLength:z.length,agreedToDpa:H});try{await qe({workspace_name:z,agreed_to_dpa:H,plan_type:Be.K12}),d(M.result.segment,M.result.statsig,{status:"success",workspaceNameLength:z.length}),await new Promise(Ze),De()}catch(xe){const q=xe,ke=q instanceof Error?{errorName:q.name,errorMessage:q.message}:{errorName:typeof q,errorMessage:String(q)};d(M.result.segment,M.result.statsig,F({status:"error"},ke)),Q(!1),Fe.addError(q)}},t[24]=d,t[25]=S):S=t[25];const T=S;let C;t[26]!==d?(C=()=>{d(M.cancel.segment,M.cancel.statsig)},t[26]=d,t[27]=C):C=t[27];const I=C;let f;t[28]!==e?(f=e.formatMessage(K.teachersCreateWorkspacePageTitle),t[28]=e,t[29]=f):f=t[29];let w;t[30]!==f?(w=o.jsx("title",{children:f}),t[30]=f,t[31]=w):w=t[31];let E;t[32]!==p||t[33]!==I||t[34]!==T?(E=o.jsx(Je,{disableContinueButton:p,onNext:T,onCancel:I}),t[32]=p,t[33]=I,t[34]=T,t[35]=E):E=t[35];let G;return t[36]!==w||t[37]!==E?(G=o.jsxs(o.Fragment,{children:[w,E]}),t[36]=w,t[37]=E,t[38]=G):G=t[38],G};function Ze(t){return setTimeout(t,3e3)}const ot="/k12-create-workspace",lt=Te(function(){return o.jsx(Xe,{})});export{ot as T,lt as k,Ue as u};
//# sourceMappingURL=f5d59trw06j4gf52.js.map
