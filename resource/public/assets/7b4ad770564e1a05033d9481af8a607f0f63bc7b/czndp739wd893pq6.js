const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jqy8zfwhk6ptqvmj.js","assets/kfrdmkli83ureki3.js","assets/m6idklazvjc7d344.js","assets/lu73hcy0eyoge4v0.js","assets/fysy27fszuc0vj47.js","assets/g4sz9o46wpmsris2.js","assets/f7s65jnu4pmacl71.js","assets/lh493ui1ulngkb9y.js","assets/iwr3smf9emayvqcc.js","assets/luhdaml0ts1hcscs.js","assets/bya0tgas2bybcf45.js","assets/mv59uia51hlqeiwb.js","assets/dt7r1tuc81rn6vox.js","assets/dr1v3i80rkhviakg.js","assets/fyw02vlaiv2vq6cj.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css","assets/mglbdo8rbc3kx8jc.js","assets/hnx3m6kxd7qfeifg.js","assets/hdkg0cys1b7b4f0v.js","assets/ia54sddtrl9qa2wj.js","assets/dvfjdfwc50k8htst.js","assets/idxkrx2slxhzm8qh.js","assets/e2n6syult3e6hs2j.js","assets/kuui3eekaq585ekz.js","assets/iz9ybw36zj0rjajq.js","assets/oydzwmbjqxhwp1ek.js","assets/1z12ka0sjzwi5bk4.js","assets/nlj7ey81i8rm36n9.js","assets/jgtgxlzsiw2y9b3q.js","assets/0cct8y3c72h08jxe.js","assets/ezd0hym0jr36348y.js","assets/ffrotvb922yxp30i.js","assets/mtkzc0bar32cfrm8.js","assets/eun1zfbuzay3hdi2.js","assets/hn0hl0c8spo9mfdq.js","assets/ea3j10kjv7ntyk1b.js","assets/foakg84w5wpjdwdx.js","assets/omh7pce8seqk5731.js","assets/mstl8wgfzorpgdoe.js","assets/h6futagqzt0rqhdy.js","assets/c0ls495fz2t1hbyy.js","assets/lcx1qzdvrvh4xmnf.js","assets/lrftmyomhnslqldf.js","assets/ch25v6qwrkxmelev.js","assets/bonby2i4xf93dev1.js","assets/jmj4kur2ey6a14ct.js","assets/b7yxnd6iunaqip5a.js","assets/iz35nlf95x4k1pcg.js","assets/o8zk6g99n3l7p810.js","assets/o7xta115di9htf6k.js","assets/5bcdej51598lc3xr.js","assets/iyn42bfr1ydmech0.js","assets/kyyxlt80a527gl6x.js","assets/dch45l9yrtbjo93p.js","assets/jdb91cydeg9pgy1w.js","assets/nwibjndtxi61x1ys.js","assets/kxbocgn3s27tp480.js","assets/he1xnididjbc7s63.js","assets/i85urdvpkzpdgj3s.js","assets/dd8hh2tmra1psngf.js","assets/eix6aku103dkp2pu.js","assets/kl7c6054usfnqmd4.js","assets/k97n0y6ba9c9h39c.js","assets/fbdmxe5ygbrc3wdb.js","assets/evkgh503atu6x10z.js","assets/ej5er9569li42hai.js","assets/di3v2n4zwp3e4rpb.js","assets/oze22otsepdfaut5.js","assets/ds50f4rqnruk5v5l.js","assets/lbp124td1jxnga57.js","assets/o5h7u1aikohecbkt.js","assets/w4rmhhxvug61xnae.js","assets/batn8nst470a68ib.js","assets/h9s5uo8l29l5vali.js","assets/l3foo5601l7fb51e.js","assets/ite26mmpefwubzx4.js","assets/m9gq49u2vlb0cjyx.js","assets/lg0oi3tmjv8kv2p4.js","assets/b3ungmqo5x8kj4fh.js","assets/iej0cupg2dqkmejt.js","assets/m0t07ixd92668z9e.js","assets/chg5zn7ivsidhse5.js","assets/kime2kclye4c7vau.js","assets/fwbhrttgqnv5nm9m.js","assets/je694u6n7mxuffnb.js","assets/n2s0r84m09p3py2c.js","assets/n922q9or6yevfxth.js","assets/bw2hxknbjlgs6x5v.js","assets/m8odo3cter5gjanw.js","assets/g8cpkydknwwj989v.js","assets/c7lf6x6u521mpx19.js","assets/oi4hajb4q474so2h.js","assets/c80q12olrn2ogvv0.js","assets/jzy8ngygygw4toi1.js","assets/k9adsjcuzq0lnday.js","assets/ntv4kfm86o2gt0x7.js","assets/hoo89wr86agqpm13.js","assets/m3joncw451cqbul2.js","assets/gy1lpvuoewmzh42c.js","assets/ipjj058rvhjq2uu2.js","assets/h1em0bjkpkjv8ykw.js","assets/kbj1b07s2z6vxqkg.js","assets/hu1bt0oauegdhua6.js","assets/i7t1qh3u8s8bvtb8.js","assets/dm8z7bzkrzic0zmg.js","assets/omiotqovl1sezy3l.js","assets/jytll2j00h0ccmpk.js","assets/f9iz92mggx1znv92.js","assets/lfpgz10qy2vdux3v.js","assets/i5i93v71imxwxy0p.js","assets/f5eqpw3ad13u4igj.js","assets/i1ra53nm6ph961wx.js","assets/fvx0c589t5tar1s6.js","assets/f57a0ks1c1m6smzf.js","assets/bx1w0y3fzlo97jzb.js","assets/laacu28tqafsw8cp.js","assets/ld3p92an6gaqvnu0.js","assets/hmqienma2a871fjd.js","assets/f4q8qg8290sri8nw.js","assets/bcb2bekoxbjy6is0.js","assets/v4c8tb5m1p99v94r.js","assets/bc1m2j307f5bar77.js","assets/k0cn8gs14rhe3hip.js","assets/glgf3sl2j4mvtn59.js","assets/n70q0rscelh7atg0.js","assets/jh022kjl1g1bb86v.js","assets/bwbxwr01lw4jlfcq.js","assets/omdbfy4vvhu56dri.js","assets/gosr9rxp0v3e8kw5.js","assets/nk9us3c8gmndoxfz.js","assets/mxxk8a6tsnqbiapb.js","assets/kw03hsqv96j7mp48.js","assets/bzr9wyyo1msigqkj.js","assets/esswtmzkysxthgv2.js","assets/g842wk722jj3m7vq.js","assets/decxj0nfuivtbs7k.js","assets/cklkb8csuv59azob.js","assets/h1kcrvxc0en5lwjt.js","assets/a5n6sfzu00phm32i.js","assets/cl2tf2fdudyyttjl.js","assets/netr1bp4j8j7hw8s.js","assets/n1gcl1h3ubxs0ecs.js","assets/gfqslfb8a7sfzqji.js","assets/lzqsuxas5lacfmcs.js","assets/dzj5ft8tapep7o7g.js","assets/irqko7c1s7qpl41n.js","assets/cc03anyjknq05li0.js","assets/pa9agtilwl49n8ny.js","assets/h60kw9fd5jcuxve4.js","assets/gzk9gjcdng26l0p1.js","assets/cgydvuzo0i70jh2j.js","assets/nymwwtsb8uxucri0.js","assets/brfwhj2ts3oswpej.js","assets/e3dkkco0b3958icx.js","assets/b9tsn3f51rdwvzaj.js","assets/ft9rfvh12efhjjba.js"])))=>i.map(i=>d[i]);
var Oo=Object.freeze,Ro=Object.defineProperty,Hl=Object.defineProperties;var Wl=Object.getOwnPropertyDescriptors;var $n=Object.getOwnPropertySymbols;var Bo=Object.prototype.hasOwnProperty,Fo=Object.prototype.propertyIsEnumerable;var Lo=(t,e,n)=>e in t?Ro(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v=(t,e)=>{for(var n in e||(e={}))Bo.call(e,n)&&Lo(t,n,e[n]);if($n)for(var n of $n(e))Fo.call(e,n)&&Lo(t,n,e[n]);return t},pe=(t,e)=>Hl(t,Wl(e));var qn=(t,e)=>{var n={};for(var a in t)Bo.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&$n)for(var a of $n(t))e.indexOf(a)<0&&Fo.call(t,a)&&(n[a]=t[a]);return n};var ps=(t,e)=>Oo(Ro(t,"raw",{value:Oo(e||t.slice())}));import{h as Y,r as S,j as s,M as p,b as ds,u as Et,_ as L,i as lt,c as _e,e as Be,a as Cs,d as Pt,q as Ji,o as fn,R as Ss,ai as Zi,L as ga,a9 as Kl}from"./kfrdmkli83ureki3.js";import{p as gt,dk as us,d9 as In,db as es,c9 as cs,aC as pt,df as $l,R as Xe,u as ce,d4 as Es,e6 as Ut,nP as ql,nQ as Uo,kg as Yl,ag as kn,ah as Nn,dT as kt,fO as Ql,P as Jl,vN as Zl,cu as Xi,cq as Wt,az as R,aB as te,d_ as Ka,aA as K,co as Xl,eZ as ec,g as er,J as Oe,eE as tc,dR as tr,dQ as $a,eG as Re,r6 as sc,f4 as nc,_ as Ge,aa as ac,D as ts,eA as dn,da as oc,cv as Ps,dI as Ts,dd as Ra,N as Ys,gF as qa,kQ as ic,aS as on,ml as ma,tR as rc,wJ as lc,tS as sr,dM as He,ew as cc,lV as aa,aP as nr,au as ar,a7 as pn,gd as dc,eD as uc,lw as gc,dj as ja,aT as mc,cy as Ms,am as ut,bd as or,e5 as fc,al as hn,wK as pc,wL as hc,wM as fa,pT as Ze,hI as pa,gy as ir,d1 as xc,wN as rr,iE as ft,gO as Rs,iD as le,wO as yc,wP as zt,wQ as Go,br as nt,wR as Vo,wS as ks,jV as wt,wT as lr,k0 as Ya,rD as Qa,wU as bc,d as ot,cz as Bt,dN as wn,aW as ke,eJ as Ns,fT as cr,fU as Mc,fg as Ja,q3 as Cc,oy as ws,fe as ra,uQ as _c,wV as Dn,dg as Za,fk as dr,o9 as Xa,wW as Pn,q4 as vc,sN as Qs,kS as rs,fp as On,Q as jc,lf as ur,dY as Te,dZ as O,fr as gr,sD as eo,l8 as mr,jE as Sc,jF as Ec,rg as fr,wX as Tc,wY as kc,wZ as Nc,oA as is,fm as Js,fw as Bs,i1 as rt,w_ as As,rQ as pr,mm as Ln,w$ as hr,x0 as wc,wy as Pc,rm as Ac,x1 as Ic,oh as Ba,x2 as zo,aX as Ho,x3 as Dc,x4 as Oc,nH as Rn,tP as Lc,x5 as Rc,x6 as Bc,aU as Fc,aH as Uc,wu as Gc,fv as to,x7 as Vc,rv as Fa,rs as zc,sc as Wo,x8 as xr,x9 as yr,xa as ge,lb as Sa,xb as En,nG as br,wq as ha,xc as Mr,xd as Cr,xe as _r,xf as vr,xg as jr,xh as Sr,xi as Er,xj as Tr,xk as Hc,xl as xn,so as Wc,xm as Kc,rK as $c,pi as qc,mD as kr,xn as Ko,xo as Yc,dW as Qc,dX as rn,xp as Jc,q5 as xa,xq as Nr,tX as wr,xr as Pr,xs as Ar,xt as Ir,xu as bs,xv as Dr,xw as Zc,rW as Xc,xx as ed,kv as so,xy as td,xz as sd,rt as nd,rX as ad,xA as od,xB as id,$ as rd,a0 as ld,p8 as no,xC as cd,cB as dd,gG as un,xD as ys,pe as $o,kr as ud,ak as Ks,w5 as gd,xE as md,jr as ln,oj as qo,fX as fd,fW as pd,fY as hd,oI as xd,dL as ao,cA as Ft,fb as yd,M as bd,sE as Md,d5 as $s,ev as Cd,xF as _d,xG as Yo,sS as vd,km as jd,xH as Sd,V as Ed,xI as Td,xJ as kd,no as Qo,ej as Nd,xK as wd,xL as Pd,xM as Ad,xN as Id,kt as Dd,xO as Od,mh as Or,xP as Lr,mF as Ld,mG as Rd,xQ as hs,hX as Jo,hY as Zo,y as Bd,xR as Fd,Y as Rr,v as Ud,e8 as ya,eh as Gd,I as Vd,dS as zd,dc as Hd,xS as Wd,bn as Xo,bh as Kd,hK as ei,xT as $d,po as qd,xU as Yd,qx as ti,xV as si,fL as ni,aV as Qd,eO as Jd,dJ as Zd,f1 as Xd}from"./kw08ajijqinojrwh.js";import{x as oo,df as eu,hb as tu,hc as su,B as nu,E as au,al as io,K as Ea,F as ou,vC as iu,uP as ru,bf as Br,aB as ro,aC as lo,aE as Fr,aJ as Ur,aK as Ua,aM as ai,tK as Gr,g8 as oi,bF as Zs,aN as lu,y7 as Vr,y8 as cu,bg as du,b7 as ba,tX as uu,y9 as Fs,qT as St,aH as gu,ya as mu,yb as zr,qA as Hr,qV as fu,yc as co,yd as Ga,ye as pu,bp as Wr,yf as uo,yg as hu,mT as xu,gv as yu,yh as bu,gu as jn,sh as yn,br as Xs,w as Kr,ba as Mu,bb as Cu,bc as _u,si as $r,l_ as la,ai as An,dD as vu,dB as ju,dC as Su,sl as qr,qu as Yr,xk as go,J as dt,bB as Eu,g5 as Tu,yi as ku,yj as ii,yk as oa,gs as Nu,co as wu,be as Va,uf as ri,tN as Pu,tU as Au,tV as Iu,tQ as Du,dS as Ta,tM as Ou,tL as Lu,yl as Ru,bA as Bu,aW as ie,fu as Fu,ym as Qr,yn as We,bw as Uu,dR as Gu,yo as mo,bx as Vu,yp as Jr,yq as Zr,u3 as zu,gJ as Hu,yr as Wu,ys as Xr,yt as el,gG as Ku,u6 as $u,yu as tl,yv as li,yw as sl,yx as qu,yy as nl,yz as Yu,yA as Qu,yB as Ju,yC as Ls,yD as Zu,yE as Xu,yF as eg,yG as za,yH as tg,yI as sg,yJ as ng,bQ as Yn,yK as Qn,mW as al,eP as ag,yL as og,yM as ig,g3 as rg,yN as lg,yO as cg,bj as dg,aD as ug,yP as gg,us as mg,yQ as fg,kP as pg}from"./fyw02vlaiv2vq6cj.js";import{R as hg}from"./kxbocgn3s27tp480.js";import{s as ci,B as xg}from"./eix6aku103dkp2pu.js";import{d as yg}from"./kl7c6054usfnqmd4.js";import{g as bg}from"./k97n0y6ba9c9h39c.js";import{u as Mg}from"./fbdmxe5ygbrc3wdb.js";import{G as Cg,P as _g,A as vg}from"./ej5er9569li42hai.js";import{T as jg}from"./kime2kclye4c7vau.js";import{a as fo,e as Sg,g as ol,c as Eg}from"./o5h7u1aikohecbkt.js";import{P as il}from"./chg5zn7ivsidhse5.js";import{g as Tg,h as kg}from"./m9gq49u2vlb0cjyx.js";import{a as Ng}from"./fwbhrttgqnv5nm9m.js";import{d as wg,r as po,b as rl,s as Pg,h as Ag}from"./lbp124td1jxnga57.js";import{F as ll,a as cl,b as dl}from"./je694u6n7mxuffnb.js";import{u as ul}from"./n2s0r84m09p3py2c.js";import{c as gn}from"./n922q9or6yevfxth.js";import{i as Ig,a as Dg}from"./bw2hxknbjlgs6x5v.js";import{m as ze,a as gl,M as Og,u as Lg,C as Rg}from"./m8odo3cter5gjanw.js";import{a as ml}from"./oi4hajb4q474so2h.js";import{a as Bg}from"./c80q12olrn2ogvv0.js";import{G as Fg}from"./0cct8y3c72h08jxe.js";import{C as Ug}from"./jzy8ngygygw4toi1.js";import{s as Ma}from"./k9adsjcuzq0lnday.js";import{l as Gg}from"./ntv4kfm86o2gt0x7.js";import{s as Vg,a as zg}from"./h6futagqzt0rqhdy.js";import{I as fl}from"./l3foo5601l7fb51e.js";import{O as Hg}from"./hoo89wr86agqpm13.js";import{C as Wg}from"./omiotqovl1sezy3l.js";import{a as Kg}from"./jytll2j00h0ccmpk.js";import{r as $g,c as qg}from"./f9iz92mggx1znv92.js";import{u as pl,M as di,a as ka}from"./lrftmyomhnslqldf.js";import{a as Yg,G as Qg,E as Jg,b as Zg}from"./i5i93v71imxwxy0p.js";import{u as Xg}from"./oze22otsepdfaut5.js";import em from"./f5eqpw3ad13u4igj.js";import{s as tm}from"./i1ra53nm6ph961wx.js";import{u as sm}from"./fvx0c589t5tar1s6.js";import{u as nm}from"./f57a0ks1c1m6smzf.js";function am(t){return ds({queryKey:["workspace",t,"owner_count"],queryFn:async()=>await Xe.safeGet("/accounts/{account_id}/users/owner_count",{parameters:{path:{account_id:t}}})})}function om({workspace:t}){var E;const e=Y(),n=gt(),a=us(),[o,i]=S.useState(""),l=t.isOwnerOfAccount(),d=am(t.id),{data:c}=In(),[r,m]=S.useState(!1),[g,u]=S.useState(!1);if(!c)return null;const h=c.accountItems.find(w=>w.id!==t.id),_=()=>{cs.setLeaveWorkspaceData(null)},b=async()=>{if(a!==void 0){u(!0);try{await Xe.safeDelete("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:t.id,user_id:a.id}}}),m(!0)}catch(w){n.danger(e.formatMessage({id:"leaveWorkspaceModal.leaveFailed",defaultMessage:"Failed to leave workspace"}),{toastId:"leave_workspace_modal",loggingTitle:"Failed to leave workspace",loggingDescription:"Error message when user fails to leave workspace"})}u(!1)}};if(r)return s.jsx(lm,{workspace:t,fallbackWorkspace:h,onClose:_});if(!d.data)return s.jsx(im,{onClose:_});const j=d.data.total_count,y=d.data.owner_count;if(l&&y<2)return s.jsx(rm,{workspace:t,onClose:_});const M=s.jsx(es.Button,{onClick:()=>{cs.setLeaveWorkspaceData(null)},title:e.formatMessage({id:"leaveWorkspaceModal.cancel",defaultMessage:"Cancel"})}),C=s.jsx(es.Button,{color:"danger",disabled:a===void 0||g||o===""||o.toLowerCase()!==((E=a==null?void 0:a.email)==null?void 0:E.toLowerCase()),title:e.formatMessage({id:"leaveWorkspaceModal.leaveButton",defaultMessage:"Leave workspace"}),onClick:()=>b()}),k=e.formatMessage({id:"leaveWorkspaceModal.enterEmailToConfirm",defaultMessage:"Leave Workspace - Enter your email to confirm"});return s.jsx(pt,{testId:"modal-leave-workspace",isOpen:!0,onClose:_,showCloseButton:!0,type:"danger",title:e.formatMessage({id:"leaveWorkspaceModal.leaveWorkspace",defaultMessage:"Leave the {workspaceName} workspace"},{workspaceName:t.data.name}),primaryButton:C,secondaryButton:M,children:s.jsxs("div",{className:"flex flex-col gap-5",children:[s.jsxs("div",{className:"flex flex-row gap-3",children:[s.jsx($l,{size:"large",src:t.data.profilePictureUrl}),s.jsxs("div",{className:"flex flex-col justify-around",children:[s.jsx("div",{className:"text-base font-semibold",children:t.data.name}),s.jsx("div",{className:"text-token-text-tertiary text-sm",children:s.jsx(p,{id:"leaveWorkspaceModal.memberCount",defaultMessage:"{memberCount, plural,\n                  one {1 member}\n                  other {{memberCount} members}\n                }",values:{memberCount:j}})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 text-base font-semibold",children:s.jsx(p,{id:"leaveWorkspaceModal.leaveAreYouSure",defaultMessage:"Are you sure?"})}),s.jsxs("ul",{className:"text-token-text-secondary ms-3 list-disc text-sm",children:[s.jsx("li",{className:"mb-2",children:s.jsx(p,{id:"leaveWorkspaceModal.leaveWorkspaceWarning1",defaultMessage:"This will remove you from your workspace and you won't be able to access all data, including profile, settings, and chat history."})}),s.jsx("li",{children:s.jsx(p,{id:"leaveWorkspaceModal.leaveWorkspaceWarning2",defaultMessage:"You will lose access to all channels and messages in this workspace."})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"mb-2 text-base font-semibold",children:k}),s.jsx(oo,{ariaLabel:k,name:"typeEmailConfirm",placeholder:"abcd@acme.com",value:o,onChange:w=>{i(w.target.value)}})]})]})})}function im({onClose:t}){return s.jsx(pt,{testId:"modal-empty-loading",isOpen:!0,onClose:t,showCloseButton:!0,type:"warning",children:s.jsx("div",{className:"flex flex-row justify-center",children:s.jsx(Ut,{})})})}function rm({workspace:t,onClose:e}){const n=Y(),a=s.jsx(es.Button,{onClick:()=>{cs.setLeaveWorkspaceData(null)},title:n.formatMessage({id:"leaveWorkspaceModal.ok",defaultMessage:"OK"})});return s.jsx(pt,{testId:"modal-cant-leave-workspace",isOpen:!0,onClose:e,showCloseButton:!0,type:"danger",title:n.formatMessage({id:"leaveWorkspaceModal.cantLeaveWorkspace",defaultMessage:"Couldn't leave the {workspaceName} workspace"},{workspaceName:t.data.name}),secondaryButton:a,children:s.jsx(p,{id:"leaveWorkspaceModal.lastOwnerWarning",defaultMessage:"Because you're the only owner in the {workspaceName} workspace, assign the owner role to another member before leaving.",values:{workspaceName:t.data.name}})})}function lm({workspace:t,fallbackWorkspace:e,onClose:n}){const a=Et(),o=Y(),i=gt(),l=ce(),d=Es(m=>m.currentWorkspace),c=()=>{if(e!==void 0&&d)if(cs.setLeaveWorkspaceData(null),d.id===t.id){const{willRedirect:m}=ql(a,e.id,l,o,i);m||Uo()}else a.invalidateQueries(Yl());else cs.setLeaveWorkspaceData(null),kn.deleteCookie(Nn.Workspace),kn.deleteCookie(Nn.WorkspaceResidencyRegion),Uo();n()},r=e!==void 0?s.jsx(es.Button,{color:"primary",onClick:c,title:o.formatMessage({id:"leaveWorkspaceModal.done",defaultMessage:"Done"})}):s.jsx(es.Button,{color:"primary",onClick:c,title:o.formatMessage({id:"leaveWorkspaceModal.startPersonalAccount",defaultMessage:"Start using ChatGPT for free"})});return s.jsx(pt,{testId:"modal-left-workspace",isOpen:!0,onClose:c,primaryButton:r,type:"success",title:o.formatMessage({id:"leaveWorkspaceModal.leftWorkspaceTitle",defaultMessage:"Successfully left the {workspaceName} workspace"},{workspaceName:t.data.name}),children:s.jsx("div",{className:"flex flex-col gap-5",children:s.jsx("p",{children:e!==void 0?s.jsx(p,{id:"leaveWorkspaceModal.leftWorkspaceDescription",defaultMessage:"You have successfully left the {workspaceName} workspace.",values:{workspaceName:t.data.name}}):s.jsx(p,{id:"leaveWorkspaceModal.leftWorkspaceDescriptionNoOtherWorkspaces",defaultMessage:"You have successfully left the {workspaceName} workspace. This will create your personal workspace automatically.",values:{workspaceName:t.data.name}})})})})}function hl(t){var e;return!t||!t.attachments||t.attachments.length===0||t.attachments[0].kind!=="deep_research"?null:{permissions:(e=t.permissions.share_setting)!=null?e:"public",postId:t.id,messages:t.attachments[0].messages}}const cm=window.location.origin+"/s/";function Na(t){return"".concat(cm).concat(t)}const ui=R(()=>L(()=>import("./jqy8zfwhk6ptqvmj.js"),__vite__mapDeps([0,1])),{loading:t=>K(t)});function Sn(t){return["research","result","share",t]}const dm=window.location.origin+"/post/...";function um({taskId:t,isLoading:e,sharedResearchResult:n,title:a,serverThreadId:o}){var y;const[i,l]=S.useState(!1),d=(M,C)=>{M&&io(M,void 0,C).then(()=>{l(!0),setTimeout(()=>{l(!1)},1500)}).catch(()=>{})},c=Et(),r=gt(),{mutate:m,isPending:g}=lt({scope:{id:t},mutationFn:async M=>{const C=await Xe.safePost("/share/post",{requestBody:{attachments_to_create:[{kind:"deep_research",conversation_id:o,task_id:M}]}});return hl(C.post)},onSuccess:M=>{if(!M){r.danger("Failed to create share link");return}c.setQueryData(Sn(t),M),d(Na(M.postId))}}),{mutate:u}=lt({scope:{id:(y=n==null?void 0:n.postId)!=null?y:""},mutationFn:async({sharedResearchResultId:M,access:C})=>(await Xe.safePost("/share/post/update_access",{requestBody:{post_id:M,share_settings:C}})).share_setting,onMutate:({access:M})=>{const C=Sn(t),k=c.getQueryData(C);return c.setQueryData(C,k&&pe(v({},k),{permissions:M})),{previousAccess:k==null?void 0:k.permissions}},onSuccess:M=>{const C=Sn(t),k=c.getQueryData(C);k&&c.setQueryData(C,pe(v({},k),{permissions:M}))},onError:(M,C,k)=>{var x;const E=Sn(t),w=c.getQueryData(E);c.setQueryData(E,w&&pe(v({},w),{permissions:(x=k==null?void 0:k.previousAccess)!=null?x:"public"}))}}),f=S.useRef(null),h=M=>{var C;(C=f.current)==null||C.focus(),n?d(Na(n.postId),M):m(t)},_=M=>{n&&u({sharedResearchResultId:n.postId,access:M})},b=n?Na(n.postId):void 0,j=M=>{switch(M){case"public":return Ea.PUBLIC;case"private":return Ea.PRIVATE;case"workspace":return Ea.WORKSPACE}};return s.jsx(xg,{inputRef:f,isLoading:e,isPublishedVersionLatest:!0,sharedObject:n&&{id:n.postId,title:a,access:j(n.permissions)},title:a,shareTextPlaceholder:dm,shareUrl:b,isCopySuccessful:i,isCreateLinkRequestInProgress:g,handlePrivacyChange:_,handlePrimaryButtonClick:h})}function gm({taskId:t,isDisabled:e,title:n,threadId:a}){const o=kt(),i=Ql(),l=Y(),d=Jl(a),{data:c,isLoading:r}=ds({enabled:!!t&&!e,queryKey:Sn(t),queryFn:async()=>{if(!d)return null;const b=await Xe.safeGet("/share/post/by_research_task/{task_id}",{parameters:{path:{task_id:t}}});return b.post?hl(b.post):null}}),[m,g]=S.useState(!1),{triggerRef:u,container:f}=Zl({isOpen:m,onClose:()=>g(!1)}),h=(o==null?void 0:o.isWorkspaceAccount())&&!(o!=null&&o.features.includes(Xi.WorkspaceShareLinks));if(e||h||!d||i)return s.jsx(Wt,{label:h?l.formatMessage(ci.workspaceSharingDisabled):l.formatMessage(ci.share),children:s.jsx(eu,{disabled:!0,icon:ui})});const _=({className:b})=>s.jsxs("div",{className:"relative h-fit w-fit",children:[s.jsx(ui,{className:b}),c&&s.jsx("div",{className:"absolute end-0 top-[1px] flex items-center gap-1.5",children:s.jsx("div",{className:"h-1.5 w-1.5 rounded-full"})})]});return s.jsxs(tu,{open:m,onOpenChange:g,children:[s.jsx(su,{ref:u,asChild:!0,children:s.jsxs(te,{children:[s.jsx(_,{className:"me-1 h-4 w-4"}),s.jsx(p,{id:"vaZOk/",defaultMessage:"Share Link"})]})}),s.jsx(Ka,{children:m&&s.jsx(nu,{forceMount:!0,container:f,children:s.jsx(au,{align:"end",className:"z-50",sideOffset:8,collisionPadding:8,children:s.jsx(um,{title:n,taskId:t,sharedResearchResult:c,isLoading:r,serverThreadId:d})})})})]})}const mm=R(()=>L(()=>import("./m6idklazvjc7d344.js"),__vite__mapDeps([2,1])),{loading:t=>K(t)}),fm=({messages:t,threadId:e,taskId:n})=>{var k;const a=Y(),[o,i]=S.useState(!0),l=S.useRef(null),d=Xl(e),c=ec(t),[r,m]=S.useState(!1),g=gt(),u=ce(),f=er(u,e),h=Oe(u,"3930843960"),_=Oe(u,"1596731578"),b=a.formatMessage({id:"deepresearch.downloadFileError",defaultMessage:"Failed to download file. Please try again later."}),j=async E=>{var w;if(c){if(!d){g.warning("Failed to download file. Please try refreshing the page."),Ge.logEventWithStatsig("Deep Research Export Missing serverThreadId","deep_research_export_missing_serverthreadid");return}m(!0);try{const x=ac(c),T=await Xe.safePost("/export_doc/deep_research",{requestBody:{conversation_id:d,message_id:c.id,export_type:E},skipJsonTransform:!0});if(!T.ok)throw T.status>=400&&T.status<600&&g.danger(b,{toastId:"deep_research_share_modal",loggingTitle:b,loggingDescription:"Error message when a file download fails"}),new Error("Failed to download file");const N=await T.blob(),A=T.headers.get("Content-Disposition"),P=(w=bg(A))!=null?w:"ChatGPT Deep Research.".concat(E);yg(N,P),ru(u,{source:"mouse",type:"download",selectedText:x,location:"research-report",contentType:"text",messageId:c.id,serverThreadId:d,productLogOnly:!0})}catch(x){ts.addError(x)}finally{m(!1)}}},y=()=>{i(!1),l.current=setTimeout(()=>{nc.setResearchShareIntent(null)},400)},M=(k=c==null?void 0:c.metadata)==null?void 0:k.async_task_title,C=tc();return M?s.jsx(Ka,{children:s.jsx(es.Root,{isOpen:o,onClose:y,className:"container",testId:"modal-deep-research-share",children:s.jsx(es.Overlay,{showBackground:!0,children:s.jsx(es.Content,{size:"normal",className:"flex max-w-4xl flex-col bg-transparent focus:outline-hidden",children:s.jsxs(tr.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:C?ou:iu,className:"bg-token-bg-primary flex max-w-4xl flex-col overflow-x-scroll rounded-2xl focus:outline-hidden",children:[s.jsx(es.Header,{type:"success",title:s.jsx("p",{className:"text-token-text-primary ps-2",children:s.jsx(p,{id:"pV8JSS",defaultMessage:"Preview"})}),closeButtonSide:"left",accessory:s.jsxs(s.Fragment,{children:[h&&d!==void 0&&s.jsxs(Re.Root,{open:r?!1:void 0,children:[s.jsx(Re.BasicTrigger,{asChild:!0,children:s.jsx(te,{disabled:r,loading:r,color:"secondary",icon:mm,children:a.formatMessage({id:"deepresearch.download-button",defaultMessage:"Download"})})}),s.jsx(Re.Portal,{children:s.jsxs(Re.Content,{align:"end",children:[s.jsx(Re.Item,{onClick:E=>{E.preventDefault(),j("pdf")},children:a.formatMessage({id:"deepresearch.download-pdf-button.menu",defaultMessage:"PDF Document (.pdf)"})}),_&&s.jsx(Re.Item,{onClick:E=>{E.preventDefault(),j("docx")},children:a.formatMessage({id:"deepresearch.download-docx-button.menu",defaultMessage:"Microsoft Word Document (.docx)"})})]})})]}),s.jsx(gm,{taskId:n,isDisabled:!1,title:M,threadId:e})]}),closeButton:s.jsx($a,{onClick:y,iconSize:"lg"})}),s.jsx("div",{className:"@container/thread flex min-w-0 flex-col gap-4 px-12 py-8",children:s.jsx(sc,{children:s.jsx(hg,{messages:t,conversation:f})})})]})})})})}):null},pm=R(()=>L(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>K(t)});function hm(){"use forget";const t=_e.c(13),e=Y(),n=dn(bm),a="https://platform.openai.com/verify-age";let o;t[0]!==e?(o=e.formatMessage(xs.title),t[0]=e,t[1]=o):o=t[1];let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx("p",{className:"mb-4",children:s.jsx(p,v({},xs.description0))}),t[2]=i):i=t[2];let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(gi,{children:s.jsx(p,v({},xs.subtitle1))}),t[3]=l):l=t[3];let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsxs("ol",{className:"ms-4 mb-4 list-decimal",children:[s.jsx("li",{className:"",children:s.jsx(p,v({},xs.description1Bullet1))}),s.jsx("li",{children:s.jsx(p,v({},xs.description1Bullet2))})]}),t[4]=d):d=t[4];let c;t[5]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx("p",{className:"mb-4 font-semibold",children:s.jsx(p,v({},xs.description1a))}),t[5]=c):c=t[5];let r;t[6]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("p",{className:"mb-4",children:s.jsx(p,v({},xs.description1b))}),t[6]=r):r=t[6];let m;t[7]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(gi,{children:s.jsx(p,v({},xs.subtitle2))}),t[7]=m):m=t[7];let g;t[8]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsxs("div",{className:"text-token-text-secondary",children:[i,l,d,c,r,m,s.jsx("p",{className:"mb-4",children:s.jsx(p,pe(v({},xs.description2),{values:{learnMoreLink:ym}}))})]}),t[8]=g):g=t[8];let u;t[9]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx("div",{className:"mt-4 flex justify-center",children:s.jsx(te,{color:"primary",as:"link",to:a,openNewTab:!0,onClick:xm,icon:pm,children:s.jsx(p,v({},xs.redirect))})}),t[9]=u):u=t[9];let f;return t[10]!==n||t[11]!==o?(f=s.jsxs(pt,{testId:"modal-age-verification-interstitial",type:"success",isOpen:n,onClose:oc,title:o,children:[g,u]}),t[10]=n,t[11]=o,t[12]=f):f=t[12],f}function xm(){return cs.closeModal(Ts.AgeVerificationInterstitial)}function ym(t){return s.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:t})}function bm(t){return t.activeModals.has(Ts.AgeVerificationInterstitial)}var Vi;const gi=Ps.h3(Vi||(Vi=ps(["text-token-text-primary text-base mb-1"]))),xs=Be({title:{id:"AgeVerificationInterstitial.title",defaultMessage:"Please verify your age"},redirect:{id:"AgeVerificationInterstitial.redirect",defaultMessage:"Sign in on platform.openai.com"},description0:{id:"AgeVerificationInterstitial.description0",defaultMessage:"To continue using ChatGPT, you need to complete a brief age verification check"},subtitle1:{id:"AgeVerificationInterstitial.title1",defaultMessage:"What will happen next?"},description1Bullet1:{id:"AgeVerificationInterstitial.description1",defaultMessage:"You will be redirected to platform.openai.com where you will need to sign in."},description1Bullet2:{id:"AgeVerificationInterstitial.description2",defaultMessage:"You will then be redirected to Yoti, our age verification provider, to verify your age."},description1a:{id:"AgeVerificationInterstitial.description1a",defaultMessage:"If you are between the ages of 13 and 17, your parent or guardian must complete the age verification check on your behalf."},description1b:{id:"AgeVerificationInterstitial.description1b",defaultMessage:"The process is quick and secure."},subtitle2:{id:"AgeVerificationInterstitial.title2",defaultMessage:"Why do I need to do this?"},description2:{id:"AgeVerificationInterstitial.description2-v3",defaultMessage:"We are required to verify that our users in Italy are old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."}}),Mm=()=>{var o;const t=us(),e=(o=t==null?void 0:t.email)!=null?o:t==null?void 0:t.phone_number,n=dn(i=>i.activeModals.has(Ts.LogoutConfirm)),a=()=>{cs.closeModal(Ts.LogoutConfirm)};return s.jsx(pt,{testId:"modal-logout-confirm",isOpen:n,onClose:a,showCloseButton:!1,type:"warning",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:"center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[s.jsx("p",{className:"text-center text-2xl font-semibold text-balance",children:s.jsx(p,v({},Jn.logoutTitle))}),s.jsx("p",{className:"text-token-text-secondary mt-4 mb-6 text-center text-lg",children:e&&s.jsx(p,pe(v({},Jn.logoutConfirm),{values:{emailOrPhone:e}}))}),s.jsx(te,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"logout-confirm-button",onClick:Ra,children:s.jsx(p,v({},Jn.logoutConfirmButton))}),s.jsx(te,{as:"button",size:"large",color:"secondary",fullWidth:!0,onClick:a,children:s.jsx(p,v({},Jn.cancel))})]})})},Jn=Be({logoutTitle:{id:"biVnvR",defaultMessage:"Are you sure you want to log out?"},logoutConfirm:{id:"2aSIBu",defaultMessage:"Log out of ChatGPT as {emailOrPhone}?"},logoutConfirmButton:{id:"NeO/CC",defaultMessage:"Log out"},cancel:{id:"EORcAJ",defaultMessage:"Cancel"}}),Cm=R(()=>L(()=>import("./fysy27fszuc0vj47.js"),__vite__mapDeps([4,1])),{loading:t=>K(t)}),_m=R(()=>L(()=>import("./g4sz9o46wpmsris2.js"),__vite__mapDeps([5,1])),{loading:t=>K(t)}),vm=R(()=>L(()=>import("./f7s65jnu4pmacl71.js"),__vite__mapDeps([6,1])),{loading:t=>K(t)}),jm=R(()=>L(()=>import("./lh493ui1ulngkb9y.js"),__vite__mapDeps([7,1])),{loading:t=>K(t)});var zi;const Zn=Ps.button(zi||(zi=ps(["text-base rounded-xl justify-center gap-1 flex items-center bg-token-main-surface-primary border w-full p-3"])));var Hi;const Sm=Ps.div(Hi||(Hi=ps(["flex h-[1px] w-full border-b border-token-surface-tertiary"])));var Wi;const Em=Ps.div(Wi||(Wi=ps(["relative z-10 max-w-[465px] w-full flex flex-col items-start px-10 py-8 border-box bg-token-main-surface-primary border border-token-surface-tertiary shadow-elevation-01 rounded-[40px]"])));var Ki;const Tm=Ps.div(Ki||(Ki=ps(["text-token-text-secondary flex flex-col self-end text-xs"])));var $i;const mi=Ps.div($i||($i=ps(["text-token-text-secondary me-0.5 flex self-start text-xl"])));var qi;const fi=Ps.div(qi||(qi=ps(["me-2 leading-none"]))),km=()=>{const t=Cs(),e=Br(t),n=sessionStorage.getItem("poijcwa")==="jwoid",a=ce();return!Ys(a)&&e&&n},Nm=()=>{const t=Y(),e=Pt(),n=ce(),{country:a}=ro(),o=lo({country:a,currentAccount:null,location:"PlusPurchaseInterstitialModal",shouldUsePaidSubscriptionBillingCurrency:!1}),{data:i,isLoading:l}=Fr({ctx:n,countryCode:o==null?void 0:o.country,currency:o==null?void 0:o.currency,enabled:o!=null});let d=fo({ctx:n});if(o&&!l&&i){const u=Ur(i,ai,Ua.Month);d=pe(v({},d),{cost:{costValue:u.amount,costTitle:Gr(u.amount,ai,o.currency)}})}S.useEffect(()=>{const f=new URLSearchParams(window.location.search).get("referrer")||document.referrer;Ge.logEvent("Account Pay: Interstitial Page Impression",{referrer:f})},[]);const c=window.location.href,r=u=>{if(!c.includes(oi)){ts.addError("PlusPurchaseInterstitialModal: Missing pricing hash.");return}if(u==="email"){on(n,{fallbackScreenHint:"signup",callbackUrl:c});return}on(n,{fallbackScreenHint:"login",callbackUrl:c})},m=()=>{if(!c.includes(oi)){ts.addError("PlusPurchaseInterstitialModal: Missing pricing hash.");return}on(n,{fallbackScreenHint:"login",callbackUrl:c})};if(!o)return null;const g=qa(o.currency);return s.jsx(pt,{testId:"modal-team-purchase-interstitial",size:"fullscreen",isOpen:!0,onClose:()=>{},type:"success",className:"flex flex-col",removePopoverStyling:!0,children:s.jsxs("div",{className:"flex h-full w-full gap-8",children:[s.jsx("div",{className:"flex min-w-[320px] flex-1 flex-col items-center p-9 px-4",children:s.jsxs("div",{className:"flex w-full max-w-[360px] grow flex-col items-center justify-center gap-3",children:[s.jsx("button",{onClick:()=>e("/"),className:"mb-6 cursor-pointer p-0 md:fixed md:start-4 md:top-4 md:h-6 md:w-6","aria-label":t.formatMessage({id:"createAccount.plusHomeButtonAriaLabel",defaultMessage:"Click here to go to the home page"}),children:s.jsx(ic,{className:"h-8 w-8"})}),s.jsxs("span",{className:"text-[28px] font-normal",children:[s.jsx(p,{id:"createAccount.plusFormattedTitle",defaultMessage:"ChatGPT"}),s.jsx("span",{className:"ms-1.5 text-[28px] font-normal text-[#615EEB]",children:t.formatMessage(Is.plus)})]}),s.jsx("span",{className:"text-[22px] font-normal",children:s.jsx(p,{id:"createAccount.plusSubTitle",defaultMessage:"Start your trial for free"})}),s.jsxs(Zn,{onClick:()=>r("email"),children:[s.jsx(jm,{className:"h-6 w-6"}),t.formatMessage(Is.email)]}),s.jsxs("div",{className:"relative my-12 w-full",children:[s.jsx(Sm,{}),s.jsx("span",{className:"bg-token-bg-primary text-token-text-secondary absolute start-1/2 -top-2 -translate-x-1/2 transform px-2 text-xs font-medium",children:t.formatMessage({id:"plusPurchaseInterstitialModal.or",defaultMessage:"OR"})})]}),s.jsxs(Zn,{onClick:()=>r("google-oauth2"),children:[s.jsx(_m,{className:"h-6 w-6"}),s.jsx("div",{children:t.formatMessage(Is.google)})]}),s.jsxs(Zn,{onClick:()=>r("windowslive"),children:[s.jsx(Cm,{className:"h-6 w-6"}),s.jsx("div",{children:t.formatMessage(Is.microsoft)})]}),s.jsxs(Zn,{onClick:()=>r("apple"),children:[s.jsx(vm,{className:"h-6 w-6"}),s.jsx("div",{children:t.formatMessage(Is.apple)})]}),s.jsx("div",{className:"flex items-center gap-1 py-1.5 text-sm font-medium",children:s.jsx("div",{className:"text-token-text-secondary",children:t.formatMessage(Is.alreadyHaveAccount,{login:u=>s.jsx("span",{className:"cursor-pointer text-green-600",onClick:m,children:u})})})})]})}),s.jsxs("div",{className:"hidden min-h-[560px] overflow-y-auto md:relative md:flex md:h-full md:flex-1 md:items-center md:justify-center md:p-4",children:[s.jsxs(Em,{children:[s.jsxs("div",{className:"mb-5 flex flex-col",children:[s.jsx("div",{className:"mb-2 flex items-center gap-2 text-[28px] font-normal",children:t.formatMessage(Is.valueTitle)}),s.jsx("div",{className:"flex h-10 flex-col items-center",children:s.jsxs("div",{className:"mb-2 flex items-center text-[34px]",children:[s.jsx(mi,{className:"text-token-text-tertiary",children:t.formatMessage(g.sign)}),s.jsx(fi,{className:"text-token-text-tertiary","data-testid":"base-monthly-cost",children:s.jsx("s",{children:!l&&d.cost?t.formatMessage(d.cost.costTitle):null})}),s.jsx(mi,{children:t.formatMessage(g.sign)}),s.jsx(fi,{"data-testid":"promo-monthly-cost",children:t.formatNumber(0)}),s.jsxs(Tm,{children:[s.jsx("p",{className:"m-0",children:s.jsx(p,{id:"PlusPricingModalColumn.currencyCodeWithSlash",defaultMessage:"{currencyCode} / ",values:{currencyCode:t.formatMessage(g.code)}})}),s.jsx(p,v({},Is.billedFirst30))]})]})})]}),s.jsx(il,{advertisedFeatures:d.advertisedFeatures})]}),s.jsx("img",{alt:"",src:jg.src,className:"absolute inset-0 z-0 h-full w-full object-cover"})]})]})})},Is=Be({email:{id:"PlusPurchaseInterstitialModal.email",defaultMessage:"Continue with Email"},google:{id:"PlusPurchaseInterstitialModal.google",defaultMessage:"Continue with Google"},microsoft:{id:"PlusPurchaseInterstitialModal.microsoft",defaultMessage:"Continue with Microsoft"},apple:{id:"PlusPurchaseInterstitialModal.apple",defaultMessage:"Continue with Apple"},alreadyHaveAccount:{id:"PlusPurchaseInterstitialModal.alreadyHaveAccount",defaultMessage:"Already have an account? <login>Login</login>"},valueTitle:{id:"PlusPurchaseInterstitialModal.valueTitle",defaultMessage:"Plus"},billedFirst30:{id:"PlusPurchaseInterstitialModal.billedFirst30",defaultMessage:"month for first 30 days"},plus:{id:"PlusPurchaseInterstitialModal.plus",defaultMessage:"Plus"}}),wm=()=>{const t=ma(),e=kt(),{hash:n}=Cs(),a=ce();return rc(a)||!(n==="#ca-google-drive-oauth")||!e||(e==null?void 0:e.isPersonalAccount())||!t?null:s.jsx(Pm,{})},Pm=()=>{const{openSettings:t}=Zs(),{gDriveOAuthConnectionId:e,isLoading:n,refetch:a}=lc();return S.useEffect(()=>{!e&&!n&&window.history.replaceState(null,"",window.location.pathname+window.location.search)},[e,n]),e?s.jsx(sr,{connectionId:e,isAdminFlow:!1,location:"url_hash",onClose:()=>{t(He.Connectors)},onSuccess:a}):null};function ho({testId:t="modal-generic-ineligible",title:e,message:n,buttonTitle:a,isOpen:o,onClose:i}){return s.jsx(pt,{testId:t,type:"success",isOpen:o,onClose:i,showCloseButton:!0,title:e,children:s.jsxs("div",{className:"",children:[s.jsx("p",{children:n}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx(cc,{title:a,color:"secondary",onClick:i,size:"large"})})]})})}const Am=t=>{"use forget";const e=_e.c(46),{currentAccount:n,promotionData:a}=t,o=ce();let i;e[0]!==o?(i=Oe(o,"2255682732"),e[0]=o,e[1]=i):i=e[1];const l=i,{eligible:d,isLoading:c}=lu(Ng),r=d&&!l,m=Pt(),g=Cs(),{isEligible:u,isPromoLoading:f,promoCode:h,promoError:_,promoMetadata:b}=a;let j;e[2]!==g.hash||e[3]!==g.pathname||e[4]!==g.search||e[5]!==m?(j=()=>{const T=new URLSearchParams(g.search);T.delete(Vr);const N=T.toString();m({pathname:g.pathname,search:N?"?".concat(N):"",hash:g.hash})},e[2]=g.hash,e[3]=g.pathname,e[4]=g.search,e[5]=m,e[6]=j):j=e[6];const y=j;let M;e[7]!==y||e[8]!==r||e[9]!==h||e[10]!==_||e[11]!==b?(M=()=>{r&&b&&!b.schedule&&!_&&b.plan_name!==aa.SELF_SERVE_BUSINESS&&(nr.setItem(ar.PromoCode,h),y())},e[7]=y,e[8]=r,e[9]=h,e[10]=_,e[11]=b,e[12]=M):M=e[12];let C;e[13]!==y||e[14]!==r||e[15]!==c||e[16]!==h||e[17]!==_||e[18]!==b?(C=[c,b,r,h,y,_],e[13]=y,e[14]=r,e[15]=c,e[16]=h,e[17]=_,e[18]=b,e[19]=C):C=e[19],S.useEffect(M,C);let k,E;e[20]!==u||e[21]!==f||e[22]!==h||e[23]!==b?(k=()=>{f||u&&b==null&&ts.addError("User is eligible for promo but metadata is missing",{promoCode:h})},E=[h,u,b,f],e[20]=u,e[21]=f,e[22]=h,e[23]=b,e[24]=k,e[25]=E):(k=e[24],E=e[25]),S.useEffect(k,E);let w,x;if(e[26]!==u||e[27]!==b?(w=()=>{if(!(!u||b==null))try{sessionStorage.setItem(cu,"true")}catch(T){const N=T;ts.addError(N)}},x=[u,b],e[26]=u,e[27]=b,e[28]=w,e[29]=x):(w=e[28],x=e[29]),S.useEffect(w,x),c&&!l||r&&!(b!=null&&b.schedule)&&!_&&(b==null?void 0:b.plan_name)!==aa.SELF_SERVE_BUSINESS)return null;if(f){let T;return e[30]!==y?(T=s.jsx(xl,{onClose:y}),e[30]=y,e[31]=T):T=e[31],T}if(u&&b!=null){if(b.plan_name===aa.SELF_SERVE_BUSINESS){let N;return e[32]!==n||e[33]!==y||e[34]!==h||e[35]!==b?(N=s.jsx(Im,{currentAccount:n,onClose:y,promoCode:h,promoMetadata:b}),e[32]=n,e[33]=y,e[34]=h,e[35]=b,e[36]=N):N=e[36],N}let T;return e[37]!==n||e[38]!==y||e[39]!==h||e[40]!==b?(T=s.jsx(Dm,{currentAccount:n,onClose:y,promoCode:h,promoMetadata:b}),e[37]=n,e[38]=y,e[39]=h,e[40]=b,e[41]=T):T=e[41],T}if(!u&&_){let T;return e[42]!==y||e[43]!==h||e[44]!==_?(T=s.jsx(Om,{onClose:y,promoCode:h,promoError:_}),e[42]=y,e[43]=h,e[44]=_,e[45]=T):T=e[45],T}return null},Im=t=>{"use forget";const e=_e.c(16),{currentAccount:n,onClose:a,promoCode:o,promoMetadata:i}=t,{country:l}=ro();let d;e[0]!==l||e[1]!==n?(d={country:l,currentAccount:n,location:"TeamPromoEligibleModal"},e[0]=l,e[1]=n,e[2]=d):d=e[2];const c=lo(d);let r,m;if(e[3]!==o||e[4]!==i?(r=()=>{Ge.logEvent("Promo Eligible Modal Shown",{promoCode:o,promoMetadata:i}),pn.logEvent("chatgpt_promo_eligible_modal_shown")},m=[o,i],e[3]=o,e[4]=i,e[5]=r,e[6]=m):(r=e[5],m=e[6]),S.useEffect(r,m),!c)return null;let g;e[7]!==c||e[8]!==n||e[9]!==a||e[10]!==o||e[11]!==i?(g=s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-6 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:s.jsx(wg,{analyticsParams:n.subscriptionAnalyticsParams,className:"bg-token-bg-primary",billingDetails:c,currentAccount:n,planLoading:null,type:po.promo,promoCode:o,promoMetadata:i,onProceed:a,setShouldShowCheckoutLoadingOverlay:Lm})})}),e[7]=c,e[8]=n,e[9]=a,e[10]=o,e[11]=i,e[12]=g):g=e[12];let u;return e[13]!==a||e[14]!==g?(u=s.jsx(pt,{testId:"modal-team-promo-eligible",size:"fullscreen",isOpen:!0,onClose:a,type:"success",className:"flex h-full flex-col items-center justify-center bg-white/70 dark:bg-gray-800/70",removePopoverStyling:!0,showOverlayBackground:!1,children:g}),e[13]=a,e[14]=g,e[15]=u):u=e[15],u},xl=t=>{"use forget";const e=_e.c(3),{onClose:n}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-6 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:s.jsx(_g,{className:"border-token-border-light bg-token-bg-primary relative flex flex-1 flex-col justify-center gap-4 rounded-xl border-[#CFCEFC] bg-[#F5F5FF] text-sm shadow-lg md:mt-0 md:mb-0 md:min-h-[30rem] md:rounded-2xl! md:border-s-1 md:border-e-1 md:border-t-1 md:border-b-1 md:p-13.5 dark:border-[#484777] dark:bg-[#282841]"})})}),e[0]=a):a=e[0];let o;return e[1]!==n?(o=s.jsx(pt,{testId:"modal-promo-loading",size:"fullscreen",isOpen:!0,onClose:n,type:"success",className:"flex h-full flex-col items-center justify-center bg-white/70 dark:bg-gray-800/70",removePopoverStyling:!0,showOverlayBackground:!1,children:a}),e[1]=n,e[2]=o):o=e[2],o},Dm=t=>{"use forget";const e=_e.c(23),{currentAccount:n,onClose:a,promoCode:o,promoMetadata:i}=t,[l,d]=S.useState(null),{country:c}=ro();let r;e[0]!==c||e[1]!==n?(r={country:c,currentAccount:n,location:"PromoEligibleModal"},e[0]=c,e[1]=n,e[2]=r):r=e[2];const m=lo(r),g=i.plan_name===aa.GO?Cg:rl;let u;e[3]!==n.subscriptionAnalyticsParams?(u=pe(v({},n.subscriptionAnalyticsParams),{referrer:document.referrer,parentComponent:"PromoRedemptionModal"}),e[3]=n.subscriptionAnalyticsParams,e[4]=u):u=e[4];const f=u;let h,_;if(e[5]!==o||e[6]!==i?(h=()=>{Ge.logEvent("Promo Eligible Modal Shown",{promoCode:o,promoMetadata:i}),pn.logEvent("chatgpt_promo_eligible_modal_shown")},_=[o,i],e[5]=o,e[6]=i,e[7]=h,e[8]=_):(h=e[7],_=e[8]),S.useEffect(h,_),!m){let y;return e[9]!==a?(y=s.jsx(xl,{onClose:a}),e[9]=a,e[10]=y):y=e[10],y}let b;e[11]!==g||e[12]!==f||e[13]!==m||e[14]!==n||e[15]!==a||e[16]!==l||e[17]!==o||e[18]!==i?(b=s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-6 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:s.jsx(g,{analyticsParams:f,className:"bg-token-bg-primary",billingDetails:m,currentAccount:n,onClose:a,isPromoLoading:!1,planLoading:l,promoCode:o,promoMetadata:i,setPlanLoading:d,type:po.promo,setShouldShowCheckoutLoadingOverlay:Rm})})}),e[11]=g,e[12]=f,e[13]=m,e[14]=n,e[15]=a,e[16]=l,e[17]=o,e[18]=i,e[19]=b):b=e[19];let j;return e[20]!==a||e[21]!==b?(j=s.jsx(pt,{testId:"modal-promo-eligible",size:"fullscreen",isOpen:!0,onClose:a,type:"success",className:"flex h-full flex-col items-center justify-center bg-white/70 dark:bg-gray-800/70",removePopoverStyling:!0,showOverlayBackground:!1,children:b}),e[20]=a,e[21]=b,e[22]=j):j=e[22],j},Om=t=>{"use forget";const e=_e.c(11),{onClose:n,promoError:a,promoCode:o}=t,i=Y();let l,d;e[0]!==o||e[1]!==a.code?(l=()=>{Ge.logEvent("Promo Ineligible Modal Shown",{promoCode:o,ineligibleReason:a.code}),pn.logEvent("chatgpt_promo_ineligible_modal_shown")},d=[o,a.code],e[0]=o,e[1]=a.code,e[2]=l,e[3]=d):(l=e[2],d=e[3]),S.useEffect(l,d);const c=a.title,r=a.message;let m;e[4]!==i?(m=i.formatMessage({id:"promoIneligibleModal.close",defaultMessage:"Close"}),e[4]=i,e[5]=m):m=e[5];let g;return e[6]!==n||e[7]!==a.message||e[8]!==a.title||e[9]!==m?(g=s.jsx(ho,{testId:"modal-promo-ineligible",title:c,message:r,buttonTitle:m,isOpen:!0,onClose:n}),e[6]=n,e[7]=a.message,e[8]=a.title,e[9]=m,e[10]=g):g=e[10],g};function Lm(){}function Rm(){}const Bm=2e3,Fm=Ji({queryKey:["user_segments"],queryFn:async()=>{const t=new Promise(e=>{setTimeout(()=>e({segments:{}}),Bm)});try{return await Promise.race([Xe.safeGet("/user_segments"),t])}catch(e){return{segments:{}}}},staleTime:0,gcTime:0,refetchOnMount:"always"});function Um(){const t=ce(),e=Ys(t),n=Cs(),a=Pt(),o=Br(n),i=du(n),d=!!((o||i)&&e),{data:c,status:r,isFetching:m}=ds(pe(v({},Fm),{enabled:d})),g=d&&(r==="pending"||m),u=Gm({isModalOpen:d,isTeamPricingRoute:i,segmentsData:c});return S.useEffect(()=>{e&&kn.getBooleanCookie(Nn.ShowPaymentModal)&&(kn.deleteCookie(Nn.ShowPaymentModal),ba(a,"Show payment modal cookie"))},[e,a]),S.useEffect(()=>{d?(cs.closeAllActiveModals(),cs.openModal(Ts.AccountPayment)):cs.closeModal(Ts.AccountPayment)},[d]),{isOpen:d,defaultTab:u,defaultTabLoading:g}}function Gm({isModalOpen:t,isTeamPricingRoute:e,segmentsData:n}){var h;const a=kt(),o=us(),i=ce(),[l]=fn(),d=l.get("default_tab"),c=l.get(uu),r=((h=n==null?void 0:n.segments)==null?void 0:h.professional_user)===!0;return!a||!o||!t?"personal":d&&["personal","business"].includes(d)?d:c==="business"?"business":c==="plus"?"personal":e||a.isWorkspaceAccount()||o!=null&&dc(o)||uc&&gc()&&ja(i,"647109062").get("enabled",!1)||a.isPlus()&&ja(i,"3480162268").get("enabled",!1)||(mc(i,"chatgpt_teams_check_for_professional_user",void 0,{isProfessionalUser:r?"true":"false"}),r&&ja(i,"422096659").get("enabled",!1))?"business":"personal"}function Tn({className:t}){return s.jsx("div",{className:Ms("flex h-full w-full items-center justify-center",t),children:s.jsx(Ut,{})})}var Yi;const yl=Ps.div(Yi||(Yi=ps(["p-6"])));function Vm({emailAddress:t,setEmailAddress:e,emailTemplate:n,validateEmailPending:a,errorMessage:o,onClickValidateEmail:i,onClickCancel:l,title:d,description:c}){return s.jsx(yl,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"text-center text-2xl font-medium",children:d!=null?d:s.jsx(p,{id:"XSITb5",defaultMessage:"Verify you are a student"})}),s.jsx("div",{className:"text-token-text-tertiary mt-2 text-center text-base",children:c!=null?c:s.jsx(p,{id:"x1DjYV",defaultMessage:"To claim the student discount, verify your university email address. This email will not be linked to your ChatGPT account."})}),s.jsxs("form",{className:"mt-8 flex flex-col",onSubmit:r=>{r.preventDefault(),i()},children:[s.jsxs(ll,{className:"mb-8",children:[s.jsx(cl,{label:s.jsx(p,{id:"jqIBGr",defaultMessage:"University email address"})}),s.jsx(dl,{className:Ms(o&&"border-red-500"),placeholder:n,onChange:r=>{e(r.target.value)}}),o?s.jsx("div",{className:"text-danger mt-2 text-sm",children:o}):null]}),s.jsx(te,{type:"submit",disabled:t.length===0,loading:a,children:s.jsx(p,{id:"aDh6He",defaultMessage:"Send verification code"})}),s.jsx(te,{type:"button",color:"secondary",className:"mt-3",onClick:l,children:s.jsx(p,{id:"/7nqLd",defaultMessage:"Cancel"})})]})]})})}function bl({programName:t,onContinue:e,onCancel:n,validDomain:a,description:o}){const i=Y(),[l,d]=S.useState(""),[c,r]=S.useState(null),{mutate:m,isPending:g}=lt({mutationFn:()=>Fs.validateEmail(l,t),onSuccess:u=>{r(null),St.logValidateEmailSuccess(),e(u.transaction_id)},onError:u=>{var h,_;const f=(_=(h=u.detail)==null?void 0:h.user_error_message)!=null?_:i.formatMessage({id:"9wITlN",defaultMessage:"Something went wrong"});St.logValidateEmailFailure(),r(f)}});return s.jsx(Vm,{emailAddress:l,setEmailAddress:d,emailTemplate:a?"name@university.".concat(a):"",validateEmailPending:g,errorMessage:c,onClickValidateEmail:()=>{m(),St.logClickValidateEmail()},onClickCancel:()=>{St.logClose("add-email"),n()},title:a?s.jsx(p,{id:"referral.addEmail.title",defaultMessage:"Verify {domain} email address",values:{domain:a}}):void 0,description:o})}function zm(t){"use forget";const e=_e.c(31),{currentAccount:n,hasPaidSubscription:a,referralMetadata:o,checkoutDetails:i,onContinue:l,onClose:d}=t,c=a===void 0?!1:a,r=ce(),[m,g]=S.useState(null);let u;e[0]!==o.program_name?(u=()=>{St.logShowReferralDiscount(o.program_name,!1)},e[0]=o.program_name,e[1]=u):u=e[1];let f;e[2]!==o?(f=[o],e[2]=o,e[3]=f):f=e[3],S.useEffect(u,f);const h=Wm(o);if(!n)return null;let _;e[4]!==r?(_=Sg({ctx:r}),e[4]=r,e[5]=_):_=e[5];const b=_,j=h?"overflow-auto":"overflow-hidden";let y;e[6]!==j?(y=Ms("relative flex h-full items-center justify-center",j),e[6]=j,e[7]=y):y=e[7];let M;e[8]!==i.plusAnalyticsParams?(M=pe(v({},i.plusAnalyticsParams),{referrer:document.referrer}),e[8]=i.plusAnalyticsParams,e[9]=M):M=e[9];let C;e[10]!==c||e[11]!==l?(C=()=>{St.logClickUpgradeButton(c),g(ut.PLUS),l()},e[10]=c,e[11]=l,e[12]=C):C=e[12];let k;e[13]!==i.billingDetails||e[14]!==n||e[15]!==h||e[16]!==d||e[17]!==m||e[18]!==b||e[19]!==M||e[20]!==C?(k=s.jsx(rl,{className:"bg-token-bg-primary",analyticsParams:M,plusPricingPlan:b,currentAccount:n,setPlanLoading:g,planLoading:m,onUpgradeButtonClick:C,billingDetails:i.billingDetails,promoMetadata:h,onClose:d,disableForMobile:!0,type:po.promo,setShouldShowCheckoutLoadingOverlay:Hm}),e[13]=i.billingDetails,e[14]=n,e[15]=h,e[16]=d,e[17]=m,e[18]=b,e[19]=M,e[20]=C,e[21]=k):k=e[21];const E=h?"invisible":"visible";let w;e[22]!==E?(w=Ms("absolute inset-0 flex items-center justify-center",E),e[22]=E,e[23]=w):w=e[23];let x;e[24]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(Tn,{}),e[24]=x):x=e[24];let T;e[25]!==w?(T=s.jsx("div",{className:w,children:x}),e[25]=w,e[26]=T):T=e[26];let N;return e[27]!==T||e[28]!==y||e[29]!==k?(N=s.jsxs("div",{className:y,children:[k,T]}),e[27]=T,e[28]=y,e[29]=k,e[30]=N):N=e[30],N}function Hm(){}function Wm(t){var d,c;const e=Y();if(!t)return;const n=((d=t==null?void 0:t.duration)==null?void 0:d.period)==="month"?(c=t==null?void 0:t.duration)==null?void 0:c.num_periods:void 0,a=e.formatMessage({id:"ofib91",defaultMessage:"Sign up for ChatGPT, and get your {months, plural, one {first month} other {first # months}} of Plus for free. Offer valid for new users after verifying you are a student."},{months:n}),o={value:t.discount.value,currency_code:t.discount.currency_code},i={num_periods:t.duration.num_periods,period:t.duration.period},l=e.formatMessage({id:"referral.promotionTypeLabel",defaultMessage:"STUDENT DISCOUNT"});return{plan_name:t.plan_names[0],summary:a,discount:o,duration:i,promotion_type:"student_discount",promotion_type_label:l,referrer_name:t.referrer_name}}const Km=R(()=>L(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([8,1])),{loading:t=>K(t)});function $m({emailAddress:t,verificationCode:e,errorMessage:n,sendErrorMessage:a,validateVerificationCodeIsPending:o,isSendingVerificationCode:i,setVerificationCode:l,onValidateVerificationCode:d,onResendVerificationCode:c,onChangeEmailAddress:r,onCancel:m}){return s.jsx(yl,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"text-center text-2xl font-medium",children:s.jsx(p,{id:"PjHZX7",defaultMessage:"Check your email"})}),s.jsx("div",{className:"text-token-text-tertiary mt-2 text-center text-base",children:s.jsx(p,{id:"AoOIN/",defaultMessage:"Enter the verification code we just sent to {emailAddress}",values:{emailAddress:s.jsx("span",{className:"font-medium",children:t})}})}),a?s.jsx("div",{className:"mt-8",children:s.jsx(gu,{type:"error",icon:s.jsx(Km,{}),content:a})}):null,s.jsxs("form",{className:"mt-8 flex flex-col",onSubmit:g=>{g.preventDefault(),d()},children:[s.jsxs(ll,{className:"mb-8",children:[s.jsx(cl,{label:s.jsx(p,{id:"kLJAa+",defaultMessage:"Verification code"})}),s.jsx(dl,{placeholder:"XXXXXX",value:e,onChange:g=>{l(g.target.value)}}),n?s.jsx("div",{className:"text-danger mt-2 text-sm",children:n}):null]}),s.jsx(te,{type:"submit",disabled:e.length===0,loading:o,children:s.jsx(p,{id:"NRkiYA",defaultMessage:"Continue"})}),s.jsx(te,{type:"button",className:"mt-3",color:"secondary",onClick:m,children:s.jsx(p,{id:"vyz3Kz",defaultMessage:"Cancel"})})]}),s.jsx("div",{className:"mt-8 text-center text-sm",children:s.jsx(p,{id:"2NzblW",defaultMessage:"Didn't receive the code?"})}),s.jsxs("div",{className:"mt-4 flex gap-3",children:[s.jsx(te,{loading:i,className:"flex-1",color:"secondary",onClick:c,children:s.jsx(p,{id:"L6pEyt",defaultMessage:"Resend code"})}),s.jsx(te,{className:"flex-1",color:"secondary",onClick:r,children:s.jsx(p,{id:"V8M7cm",defaultMessage:"Change email"})})]})]})})}function Ml({transactionId:t,onChangeEmailAddress:e,onContinue:n,onCancel:a}){const o=Y(),[i,l]=S.useState(""),[d,c]=S.useState(null),[r,m]=S.useState(null),[g,u]=S.useState(!1),f=o.formatMessage({id:"9wITlN",defaultMessage:"Something went wrong"}),{mutate:h,isPending:_}=lt({mutationFn:()=>Fs.sendVerificationCode(t),onError:M=>{var k,E;const C=(E=(k=M.detail)==null?void 0:k.user_error_message)!=null?E:f;m(C)}}),{mutate:b,isPending:j}=lt({mutationFn:()=>Fs.validateVerificationCode(t,i),onSuccess:()=>{c(null),m(null),St.logValidateVerificationCodeSuccess();try{u(!0),n()}catch(M){u(!1),c(f)}},onError:M=>{var k,E;const C=(E=(k=M.detail)==null?void 0:k.user_error_message)!=null?E:o.formatMessage({id:"9wITlN",defaultMessage:"Something went wrong"});St.logValidateVerificationCodeFailure(),c(C)}}),y=S.useRef(!1);return S.useEffect(()=>{y.current||(h(),St.logSendVerificationCode(),y.current=!0)},[h]),s.jsx($m,{emailAddress:"",verificationCode:i,errorMessage:d,sendErrorMessage:r,validateVerificationCodeIsPending:j||g,isSendingVerificationCode:_,setVerificationCode:l,onChangeEmailAddress:()=>{St.logClickChangeEmailButton(),e()},onValidateVerificationCode:()=>{St.logClickValidateVerificationCode(),b()},onResendVerificationCode:()=>{St.logClickResendVerificationCodeButton(),h()},onCancel:()=>{St.logClose("verify-email"),a()}})}function Cl(t,e){const n=or(t,"1682643554").value;if(!e||typeof n!="object"||!n)return;const a=n.school_configurations;if(!a)return;const o=a[e];if(!o)return;const l=o.domains[0];return{programConfiguration:o,validDomain:l}}function qm({referralCode:t,onClose:e}){var j;const n=ce(),a=Pt(),o=!Ys(n),[i,l]=S.useState({name:"loading"}),{shouldForwardToCheckout:d,isReferrer:c,referralMetadata:r,programName:m,isReferralLoading:g}=mu(t),{programConfiguration:u,validDomain:f}=(j=Cl(n,m))!=null?j:{},h=Oe(n,"550432558"),_=Oe(n,"3406933735"),b=Qm(u,r,g);return S.useEffect(()=>{h||e(),b&&e()},[b,e,h]),S.useEffect(()=>{c&&m&&a(zr(m)),o&&_&&Fs.trackReferralSignup(t)},[c,m,a,o,t,_]),h?s.jsx(pt,{testId:"modal-referee",type:"success",isOpen:!0,onClose:e,className:"w-full max-w-[360px] ".concat(i.name==="discount-intro"?"bg-transparent shadow-none!":""),shouldIgnoreClickOutside:!0,removePopoverStyling:!0,noPadding:!0,children:s.jsx(Ym,{rootState:i,setRootState:l,referralCode:t,validDomain:f,shouldForwardToCheckout:d,referralMetadata:r,isReferralLoading:g,onClose:e})}):null}function Ym({rootState:t,setRootState:e,referralCode:n,validDomain:a,shouldForwardToCheckout:o,referralMetadata:i,isReferralLoading:l,onClose:d}){var j;const c=ce(),r=ul(),m=kt(),g=Y(),u=!Ys(c),f=(j=m==null?void 0:m.hasPaidSubscription())!=null?j:!1,h=lt({mutationFn:()=>{if(t.name==="verify-email")return Fs.redeemReferral(n,t.transactionId);throw new Error("Invalid state for redeeming referral")}}),_=S.useCallback(async y=>{try{await Hr(y.billingDetails,y.plusAnalyticsParams)}catch(M){}},[]);S.useEffect(()=>{if(!(l||t.name!=="loading")){if(i){e({name:"discount-intro",referralMetadata:i});return}e({name:"error"})}},[l,o,i,r,_,t.name,e]);const b=fu(n);switch(t.name){case"loading":return s.jsx(Tn,{className:"min-h-96"});case"discount-intro":return r?s.jsx(zm,{currentAccount:m,hasPaidSubscription:f,referralMetadata:t.referralMetadata,checkoutDetails:r,onContinue:()=>{St.logReferralDiscountContinue(),u?on(c,{fallbackScreenHint:"signup",callback:y=>{Ge.logSignUpButtonClicked({provider:y,location:"Referral Discount Modal"},fc.ACCESS_FLOW_ENTRY_POINT_REFERRAL_DISCOUNT_MODAL)},callbackUrl:b}):o?_(r):e(pi(t.referralMetadata))},onClose:()=>{St.logClose("discount"),t.referralMetadata.discount&&t.referralMetadata.duration&&nr.setItem(ar.ReferralCode,n),d()}}):s.jsx(Tn,{className:"min-h-96"});case"add-email":return s.jsx(bl,{programName:t.referralMetadata.program_name,onContinue:y=>{e(Jm(t.referralMetadata,y))},onCancel:d,validDomain:a,description:a?s.jsx(p,{id:"referee.addEmail.description",defaultMessage:"To claim the student discount, you must have a valid {domain} email address. This email will not be linked to your ChatGPT account.",values:{domain:a}}):void 0});case"verify-email":return r?s.jsx(Ml,{transactionId:t.transactionId,onChangeEmailAddress:()=>{e(pi(t.referralMetadata))},onContinue:async()=>{await h.mutateAsync(),_(r)},onCancel:d}):s.jsx(Tn,{className:"min-h-96"});case"error":return s.jsx(ho,{title:g.formatMessage({id:"referee.genericIneligibleModal.title",defaultMessage:"Promo Unavailable"}),message:s.jsx(p,{id:"referee.genericIneligibleModal.message",defaultMessage:"Looks like you dont meet the eligibility criteria for this promotion. Learn more about <link>ChatGPT plans.</link>",values:{link:y=>s.jsx("a",{href:"https://openai.com/chatgpt/pricing/",className:"underline",children:y})}}),buttonTitle:g.formatMessage({id:"referee.genericIneligibleModal.buttonTitle",defaultMessage:"Close"}),isOpen:!0,onClose:d})}}function Qm(t,e,n){return n?!1:e&&!t?!0:e?!(e==null?void 0:e.program_name):!1}function pi(t){return{name:"add-email",referralMetadata:t}}function Jm(t,e){return{name:"verify-email",referralMetadata:t,transactionId:e}}const qs=Be({referralLinkModalTitle:{id:"referralLinkModal.title",defaultMessage:"Refer classmates, earn rewards"},referralLinkModalMessage:{id:"referralLinkModal.message",defaultMessage:"Get a friend to sign up for ChatGPT, and youll both get a free month of Plus."},referralLinkModalDisclaimer:{id:"referralLinkModal.disclaimer",defaultMessage:"For every ChatGPT user with a valid university email address you refer, you get {discount} your next billing cycle. You can refer up to 12 people, and discounts are automatically applied."}});function _l({referralMetadata:t,referralCode:e,onClose:n}){const a=Y(),o=gt(),{discount:i}=t,l=qa(i.currency_code),d=co(a,i.value||0,i.currency_code);return s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-token-sidebar-surface mx-auto flex h-[64px] w-[104px] items-center justify-center rounded-md bg-[#AF52DE] px-4 py-2 text-[40px]",children:[s.jsx("span",{className:"text-[20px]",children:s.jsx(p,v({},l.sign))}),i.value]}),s.jsx("p",{className:"text-token-text-primary mt-6 text-2xl font-semibold",children:s.jsx(p,v({},qs.referralLinkModalTitle))}),s.jsx("p",{className:"text-token-text-primary mt-2 text-base",children:s.jsx(p,v({},qs.referralLinkModalMessage))}),s.jsx("div",{className:"mt-6 flex w-full items-center justify-center rounded-md border-[1px] border-[#AF52DE] bg-[#8C43A00D] py-4 text-center",children:s.jsx("span",{className:"text-[15px] text-[#AF52DE]",children:e?Ga(e):s.jsx(Ut,{})})}),s.jsxs("div",{className:"mt-6 flex w-full flex-col items-center space-y-3",children:[s.jsx(te,{color:"primary",onClick:()=>{e&&io(Ga(e),o).then(()=>{St.logCopyReferralLink(),o.success(a.formatMessage({id:"1TiBkD",defaultMessage:"Copied referral link to clipboard"}))})},size:"large",className:"w-full",children:s.jsx(p,{id:"1HBlf+",defaultMessage:"Copy referral link"})}),s.jsx(te,{color:"secondary",onClick:n,size:"large",className:"w-full",children:s.jsx(p,{id:"6NQvfv",defaultMessage:"Close"})})]}),s.jsx("p",{className:"text-token-text-tertiary mt-6 text-start text-xs",children:s.jsx(p,pe(v({},qs.referralLinkModalDisclaimer),{values:{discount:d}}))})]})}function Zm({referralMetadata:t,referralCode:e,onClose:n}){return s.jsx(_l,{referralMetadata:t,referralCode:e,onClose:n})}function Xm({referralMetadata:t,transactionId:e,onClose:n}){const a=ce(),o=hn(a),[i,l]=S.useState(null),{mutate:d}=lt({mutationFn:()=>Fs.createReferralCode(e),onSuccess:m=>{l(m.referral_code)},onError:m=>{}}),c=S.useRef(!1);S.useEffect(()=>{c.current||(c.current=!0,d(),St.logShowReferrerConclusion())},[d]);const{program_name:r}=t;return!o||!r?null:s.jsx(_l,{referralMetadata:t,referralCode:i,onClose:()=>{St.logClose("referrer-conclusion"),n()}})}function ef({referralMetadata:t,onContinue:e,onClose:n}){const a=Y(),o=ce(),i=hn(o);S.useEffect(()=>{St.logShowReferralLinkGenerationModal(t.program_name)},[t]);const{discount:l,program_name:d}=t;if(!i||!d)return null;const c=qa(l.currency_code),r=co(a,l.value||0,l.currency_code);return s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-token-sidebar-surface mx-auto flex h-[64px] w-[104px] items-center justify-center rounded-md bg-[#AF52DE] px-4 py-2 text-[40px]",children:[s.jsx("span",{className:"text-[20px]",children:s.jsx(p,v({},c.sign))}),l.value]}),s.jsx("p",{className:"text-token-text-primary mt-6 text-2xl font-semibold",children:s.jsx(p,v({},qs.referralLinkModalTitle))}),s.jsx("p",{className:"text-token-text-primary mt-2 text-base",children:s.jsx(p,v({},qs.referralLinkModalMessage))}),s.jsxs("div",{className:"mt-6 flex w-full flex-col items-center space-y-3",children:[s.jsx(te,{color:"primary",onClick:e,size:"large",className:"w-full",children:s.jsx(p,{id:"aESB6r",defaultMessage:"Get my referral link"})}),s.jsx(te,{color:"secondary",onClick:()=>{St.logClickReferrerIntroNotNowButton(),n()},size:"large",className:"w-full",children:s.jsx(p,{id:"i1qUk7",defaultMessage:"Not Now"})})]}),s.jsx("p",{className:"text-token-text-tertiary mt-6 text-start text-xs",children:s.jsx(p,pe(v({},qs.referralLinkModalDisclaimer),{values:{discount:r}}))})]})}function tf({program:t,onClose:e}){var f;const n=ce(),{referralMetadata:a,referralCode:o,transactionId:i,programName:l,isReferralLoading:d,referralError:c}=pu(t),{programConfiguration:r,validDomain:m}=(f=Cl(n,l))!=null?f:{},g=nf(r,a,d),u=Oe(n,"550432558");return S.useEffect(()=>{u||e(),g&&e()},[g,e,u]),u?s.jsx(pt,{testId:"modal-referrer",type:"success",isOpen:!0,onClose:e,showCloseButton:!0,className:"w-full max-w-[390px] pt-2",removePopoverStyling:!0,children:s.jsx(sf,{referralMetadata:a,referralCode:o,transactionId:i,referralError:c,validDomain:m,isReferralLoading:d,shouldRedirect:g,onClose:e})}):null}function sf({referralMetadata:t,referralCode:e,transactionId:n,referralError:a,validDomain:o,shouldRedirect:i,isReferralLoading:l,onClose:d}){const c=ce(),r=Y(),m=!Ys(c),[g,u]=S.useState({name:"loading"});switch(S.useEffect(()=>{if(!l){if(i){d();return}if(a){u({name:"error",title:a.title,message:a.message});return}if(t){u(e?af(t,e):n?xi(t,n):{name:"intro",referralMetadata:t});return}u({name:"error"})}},[l,a,t,e,n,i,d]),g.name){case"loading":return s.jsx(Tn,{className:"min-h-96"});case"already-enrolled":return s.jsx(Zm,{referralMetadata:g.referralMetadata,referralCode:g.referralCode,onClose:d});case"intro":return s.jsx(ef,{referralMetadata:g.referralMetadata,onClose:d,onContinue:()=>{m?on(c,{fallbackScreenHint:"signup",callbackUrl:zr(g.referralMetadata.program_name)}):u(hi(g.referralMetadata))}});case"add-email":return s.jsx(bl,{programName:g.referralMetadata.program_name,onContinue:f=>{u(of(g.referralMetadata,f))},onCancel:d,validDomain:o,description:o?s.jsx(p,{id:"referrer.addEmail.description",defaultMessage:"To generate a referral code, you must have a valid {domain} email address. This email will not be linked to your ChatGPT account.",values:{domain:o}}):void 0});case"verify-email":return s.jsx(Ml,{transactionId:g.transactionId,onChangeEmailAddress:()=>{u(hi(g.referralMetadata))},onContinue:()=>{u(xi(g.referralMetadata,g.transactionId))},onCancel:d});case"conclusion":return s.jsx(Xm,{referralMetadata:g.referralMetadata,transactionId:g.transactionId,onClose:d});case"error":return s.jsx(ho,{title:r.formatMessage({id:"referrer.genericIneligibleModal.title",defaultMessage:"Promo Unavailable"}),message:s.jsx(p,{id:"referrer.genericIneligibleModal.message",defaultMessage:"Looks like you don't meet the eligibility criteria for this promotion. Learn more about <link>ChatGPT plans.</link>",values:{link:f=>s.jsx("a",{href:"https://openai.com/chatgpt/pricing/",className:"underline",children:f})}}),buttonTitle:r.formatMessage({id:"referrer.genericIneligibleModal.buttonTitle",defaultMessage:"Close"}),isOpen:!0,onClose:d})}}function nf(t,e,n){return n?!1:t?e?!(e==null?void 0:e.program_name):!1:!0}function af(t,e){return{name:"already-enrolled",referralMetadata:t,referralCode:e}}function hi(t){return{name:"add-email",referralMetadata:t}}function of(t,e){return{name:"verify-email",referralMetadata:t,transactionId:e}}function xi(t,e){return{name:"conclusion",referralMetadata:t,transactionId:e}}function rf(){"use forget";const t=_e.c(6),e=Pt(),{isOpen:n,program:a}=pc(),{isOpen:o,referralCode:i}=hc();let l;return t[0]!==o||t[1]!==n||t[2]!==e||t[3]!==a||t[4]!==i?(l=n&&a?s.jsx(tf,{program:a,onClose:()=>e({hash:""})}):o&&i?s.jsx(qm,{referralCode:i,onClose:()=>e({hash:""})}):null,t[0]=o,t[1]=n,t[2]=e,t[3]=a,t[4]=i,t[5]=l):l=t[5],l}function ca(){"use forget";const t=_e.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-full px-2.5 py-1.5 text-xs text-blue-400",children:s.jsx(p,{id:"GRxNeD",defaultMessage:"Parent"})}),t[0]=e):e=t[0],e}const lf=R(()=>L(()=>import("./luhdaml0ts1hcscs.js"),__vite__mapDeps([9,1])),{loading:t=>K(t)}),cf=R(()=>L(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([10,1])),{loading:t=>K(t)});function df({amphoraId:t,invite:e,onBack:n}){var h,_;const a=Y(),o=gt(),i=Et(),[l,d]=S.useState(!1),[c,r]=S.useState(!1),m=lt({mutationFn:async()=>{const b=e.account_identifier,j=e.email?{email:e.email}:b?{account_identifier:b}:null;if(!j)throw new Error("Missing invite identifier");await Xe.safePost("/amphora/{amphora_id}/remove",{parameters:{path:{amphora_id:t}},requestBody:j})},onSuccess:async()=>{await fa(i),n()},onError:b=>{const j=b instanceof Error?b.message:String(b);o.danger(a.formatMessage(Nt.cancelInviteError,{error:j}),{toastId:"amphora_invite_cancel"})}}),g=lt({mutationFn:async()=>{var j;const b=(j=e.email)!=null?j:e.account_identifier;if(!b)throw new Error("Missing invite identifier");await Xe.safePost("/amphora/{amphora_id}/members/resend",{parameters:{path:{amphora_id:t}},requestBody:{account_identifier:b}})},onSuccess:async()=>{d(!1),r(!0),o.success(a.formatMessage(Nt.resendInviteSuccess)),await i.invalidateQueries({queryKey:["amphora",t]})},onError:b=>{const j=b instanceof Error?b.message:String(b);o.danger(a.formatMessage(Nt.resendInviteError,{error:j}),{toastId:"amphora_invite_resend"})}}),u=(_=(h=e.email)!=null?h:e.account_identifier)!=null?_:"",f=u||a.formatMessage(Nt.missingIdentifier);return s.jsxs(Ze,{title:s.jsxs("button",{"aria-label":a.formatMessage(Nt.back),onClick:n,className:"hover:bg-token-bg-tertiary -ms-3 flex items-center gap-2 rounded-full px-3 py-1",children:[s.jsx(cf,{className:"icon-sm"}),s.jsx("span",{children:s.jsx(p,v({},Nt.back))})]}),noBorder:!0,headerInteractable:!0,children:[s.jsx("div",{className:"border-token-border-light my-3 rounded-xl border p-4",children:s.jsxs("div",{className:"flex w-full items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-token-bg-tertiary text-token-text-tertiary flex h-12 w-12 shrink-0 items-center justify-center rounded-full",children:s.jsx(lf,{className:"icon-lg"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"text-sm",children:f}),s.jsx("div",{className:"text-token-text-secondary mt-0.5 flex items-center gap-1 text-sm",children:s.jsx("span",{children:s.jsx(p,v({},Nt.invitationSent))})})]})]}),e.role==="owner"&&s.jsx(ca,{})]})}),s.jsxs("div",{className:"flex flex-col items-start py-6",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx(te,{color:"secondary",onClick:()=>d(!0),disabled:g.isPending||m.isPending,children:s.jsx(p,v({},Nt.resendInvite))}),s.jsx(te,{color:"danger-outline",onClick:()=>m.mutate(),disabled:m.isPending,children:s.jsx(p,v({},Nt.cancelInvite))})]}),s.jsx("p",{className:"text-token-text-tertiary mt-6 text-sm",children:e.role==="owner"?s.jsx(p,v({},Nt.childLinkParentInviteDescription)):s.jsx(p,pe(v({},Nt.learnMoreVesselControls),{values:{LearnMoreLink:s.jsx(pa,{href:"https://help.openai.com/en/articles/12315553-parental-controls-faq",className:"underline",children:s.jsx(p,{id:"LGjcbz",defaultMessage:"Learn more"})})}}))})]}),s.jsx(pt,{testId:"modal-amphora-resend-invite",isOpen:l,onClose:()=>d(!1),size:"custom",showCloseButton:!0,className:"max-w-md text-sm",title:a.formatMessage(Nt.resendConfirmTitle),description:s.jsx("p",{children:a.formatMessage(Nt.resendConfirmDesc)}),primaryButton:s.jsx(te,{onClick:()=>g.mutate(),disabled:g.isPending,children:a.formatMessage(Nt.resendSendButton)}),secondaryButton:s.jsx(te,{color:"secondary",onClick:()=>d(!1),children:a.formatMessage(Nt.resendCancelButton)}),children:s.jsx("div",{className:"mt-4",children:s.jsx(oo,{name:"identifier",ariaLabel:!1,className:"",type:"text",value:u,disabled:!0,placeholder:""})})}),s.jsx(pt,{testId:"modal-amphora-resend-invite-success",isOpen:c,onClose:()=>r(!1),size:"custom",showCloseButton:!0,className:"max-w-md text-sm",title:a.formatMessage(Nt.resendSentTitle),description:s.jsx("p",{children:a.formatMessage(Nt.resendSentDesc,{identifier:u})}),primaryButton:s.jsx(te,{onClick:()=>r(!1),children:a.formatMessage(Nt.doneButton)})})]})}const Nt=Be({back:{id:"amphora.invited.back",defaultMessage:"Back"},invitationSent:{id:"amphora.invited.status.sent",defaultMessage:"Invitation sent"},cancelInvite:{id:"amphora.invited.cancel",defaultMessage:"Cancel invitation"},cancelInviteError:{id:"amphora.invited.cancel.error",defaultMessage:"Unable to cancel invite: {error}"},resendInvite:{id:"amphora.invited.resend",defaultMessage:"Resend invitation"},resendInviteError:{id:"amphora.invited.resend.error",defaultMessage:"Unable to resend invite: {error}"},resendInviteSuccess:{id:"amphora.invited.resend.success",defaultMessage:"Invitation sent"},resendConfirmTitle:{id:"amphora.invited.resend.confirmTitle",defaultMessage:"Resend invitation"},resendConfirmDesc:{id:"amphora.invited.resend.confirmDesc",defaultMessage:"Well send another invite to your family member. If theyre new to ChatGPT, theyll be asked to create an account."},resendCancelButton:{id:"amphora.invited.resend.cancel",defaultMessage:"Cancel"},resendSendButton:{id:"amphora.invited.resend.send",defaultMessage:"Send"},resendSentTitle:{id:"amphora.invited.resend.sentTitle",defaultMessage:"Sent!"},resendSentDesc:{id:"amphora.invited.resend.sentDesc",defaultMessage:"We sent {identifier} a new invite. If theyre new to ChatGPT, theyll be asked to create a new account."},doneButton:{id:"amphora.invited.done",defaultMessage:"Done"},missingIdentifier:{id:"amphora.invited.missingIdentifier",defaultMessage:"[missing]"},learnMoreVesselControls:{id:"amphora.invited.learnMoreVesselControls2",defaultMessage:"{LearnMoreLink} about parental controls"},childLinkParentInviteDescription:{id:"amphora.invited.childLinkParentInviteDescription",defaultMessage:"You can link to one parent at a time."}});function xo(t){"use forget";var h;const e=_e.c(22),{user:n}=t,a=Y();let o;e[0]!==a||e[1]!==n.email||e[2]!==n.name?(o=n.name||n.email||a.formatMessage({id:"VB4+Q+",defaultMessage:"Member"}),e[0]=a,e[1]=n.email,e[2]=n.name,e[3]=o):o=e[3];const i=o,l=(h=n.profile_picture_url)!=null?h:void 0;let d;e[4]!==i||e[5]!==l?(d=s.jsx(ir,{user:{picture:l,name:i},size:"large"}),e[4]=i,e[5]=l,e[6]=d):d=e[6];let c;e[7]!==i?(c=s.jsx("div",{className:"text-token-text-primary",children:i}),e[7]=i,e[8]=c):c=e[8];let r;e[9]!==n.email?(r=n.email?s.jsx("div",{className:"text-token-text-secondary",children:n.email}):null,e[9]=n.email,e[10]=r):r=e[10];let m;e[11]!==c||e[12]!==r?(m=s.jsxs("div",{className:"flex flex-col truncate text-sm",children:[c,r]}),e[11]=c,e[12]=r,e[13]=m):m=e[13];let g;e[14]!==d||e[15]!==m?(g=s.jsxs("div",{className:"flex items-center gap-3",children:[d,m]}),e[14]=d,e[15]=m,e[16]=g):g=e[16];let u;e[17]!==n.role?(u=n.role==="owner"&&s.jsx(ca,{}),e[17]=n.role,e[18]=u):u=e[18];let f;return e[19]!==g||e[20]!==u?(f=s.jsx("div",{className:"border-token-border-light my-3 rounded-xl border p-4",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g,u]})}),e[19]=g,e[20]=u,e[21]=f):f=e[21],f}function uf(t,e=void 0,n=void 0){return ds({queryKey:["amphora",t,n?n.join(","):void 0],queryFn:async()=>await Xe.safeGet("/amphora/{amphora_id}/members",{parameters:{path:{amphora_id:t}}}),placeholderData:e,enabled:!!t})}const wa={U18_MODEL_INSTRUCTIONS_ENABLED:["3VyEPC5dTP_model_instructions_enabled"],TRAINING_ALLOWED:["training_allowed"],MEMORY:["sunshine","moonshine"]},yo=t=>Array.isArray(t);function gf(t,e,n){var a;if(yo(e)){for(const o of e)if((n==null?void 0:n[o])===!0)return!0;return!1}return(a=t==null?void 0:t.includes(e))!=null?a:!1}function mf(t,e){var a;const n=(a=t==null?void 0:t.amphora_locks)!=null?a:void 0;if(!n)return!1;if(yo(e)){for(const o of e)if(n[o]===!0)return!0;return!1}return n[e]===!0}var vl=(t=>(t.Toggle="toggle",t.Blackout="blackout",t))(vl||{});function ff(t){if(typeof t!="object"||t===null)return!1;const e=t,{pages:n,root_page_id:a}=e;return!(!Array.isArray(n)||typeof a!="string")}function pf(t){if(!ff(t))throw new Error("Invalid amphora settings layout response");return t}const hf=Xe.safeGet.bind(Xe),os=Be({modelPolicyLabel:{id:"amphora.permissions.modelPolicyLabel",defaultMessage:"Model policy"},personalizationLabel:{id:"amphora.permissions.personalizationLabel",defaultMessage:"Memory"},dataControlsLabel:{id:"amphora.permissions.dataControlsLabel",defaultMessage:"Training"},VyEPC5dTPModelPolicyLabel:{id:"amphora.permissions.VyEPC5dTPModelPolicyLabel3",defaultMessage:"Reduce sensitive content"},u18Explainer:{id:"amphora.permissions.u18Explainer3",defaultMessage:"Add extra safeguards to help protect teens. {LearnMoreLink}"},VyEPC5dTPModelPolicyAria:{id:"amphora.permissions.VyEPC5dTPModelPolicyAria2",defaultMessage:"Enable teen-safe model policy for {email}"},referenceMemoriesLabel:{id:"amphora.permissions.referenceMemoriesLabel",defaultMessage:"Reference saved memories"},referenceMemoriesAria:{id:"amphora.permissions.referenceMemoriesAria",defaultMessage:"Allow referencing saved memories for {email}"},improveModelLabel:{id:"amphora.permissions.improveModelLabel",defaultMessage:"Improve the model for everyone"},improveModelAria:{id:"amphora.permissions.improveModelAria",defaultMessage:"Allow improving the model for everyone for {email}"},parentalControlsTab:{id:"settingsModal.parentalControlsTab",defaultMessage:"Parental controls"},removeMemberError:{id:"amphora.members.removeMemberError",defaultMessage:"Unable to remove member: {error}"}});os.modelPolicyLabel,wa.U18_MODEL_INSTRUCTIONS_ENABLED,os.VyEPC5dTPModelPolicyLabel,os.VyEPC5dTPModelPolicyAria,os.u18Explainer,os.personalizationLabel,wa.MEMORY,os.referenceMemoriesLabel,os.referenceMemoriesAria,os.dataControlsLabel,wa.TRAINING_ALLOWED,os.improveModelLabel,os.improveModelAria;function xf(t){const e=Y(),n=gt(),a=Et();return lt({mutationFn:({userId:o,permissions:i})=>Xe.safePost("/amphora/{amphora_id}/members/{user_id}/permissions",{parameters:{path:{amphora_id:t,user_id:o}},requestBody:{permissions:i}}),onMutate:async({userId:o,permissions:i})=>{const l=["amphora",t,o,"permissions"];await a.cancelQueries({queryKey:l});const d=a.getQueryData(l);return a.setQueryData(l,c=>pe(v({},c),{permissions:i})),{queryKey:l,previous:d}},onError:o=>{n.danger(e.formatMessage({id:"amphora.permissions.updatePermissionError",defaultMessage:"Unable to update permissions: {error}"},{error:o.message}))},onSettled:(o,i,l,d)=>{const c=l==null?void 0:l.userId,r=d==null?void 0:d.queryKey,m=Array.isArray(r)?r:c?["amphora",t,c,"permissions"]:void 0;i&&d&&d.previous&&Array.isArray(m)&&a.setQueryData(m,d.previous),c&&a.invalidateQueries({queryKey:["amphora",t,c,"permissions"]})}})}function jl(t){const e=Y(),n=gt(),a=Et(),o=us();return lt({mutationFn:({userId:i,feature:l,value:d})=>Xe.safePatch("/amphora/{amphora_id}/members/{user_id}/settings",{parameters:{path:{amphora_id:t,user_id:i}},requestBody:{feature:l,value:d}}),onMutate:async({userId:i,feature:l,value:d})=>{const c=["amphora",t,i,"permissions"];await a.cancelQueries({queryKey:c});const r=a.getQueryData(c);return a.setQueryData(c,m=>{var u;const g=(u=m==null?void 0:m.settings)!=null?u:{};return pe(v({},m),{settings:pe(v({},g),{[l]:d})})}),{queryKey:c,previous:r}},onError:i=>{n.danger(e.formatMessage({id:"amphora.permissions.updatePermissionError",defaultMessage:"Unable to update permissions: {error}"},{error:i.message}))},onSettled:(i,l,d)=>{const c=d==null?void 0:d.userId;c&&a.invalidateQueries({queryKey:["amphora",t,c,"permissions"]}),c&&(o!=null&&o.id)&&c===o.id&&a.invalidateQueries(xc())}})}function yf(t,e,n){const a=Array.isArray(t)?t:[];return n?Array.from(new Set([...a,e])):a.filter(o=>o!==e)}function bf(t,e,n){const a=[];for(const o of e)(t==null?void 0:t[o])===!0!==n&&a.push({feature:o,value:n});return a}function Mf(t){const{memberId:e,currentPerms:n,currentSettings:a,toggleKey:o,enabled:i,updatePermission:l,patchSetting:d}=t;if(yo(o)){const r=bf(a,o,i);for(const m of r)d({userId:e,feature:m.feature,value:m.value});return}const c=yf(n,o,i);l({userId:e,permissions:c})}function Cf(t){const e=xf(t),n=jl(t);return{triggerToggle:a=>Mf(pe(v({},a),{updatePermission:e.mutate,patchSetting:n.mutate}))}}function bo(t){const e=Y(),n=gt(),a=Et();return lt({mutationFn:({userId:o})=>Xe.safePost("/amphora/{amphora_id}/remove",{parameters:{path:{amphora_id:t}},requestBody:{user_id:o}}).catch(i=>{n.danger(e.formatMessage(os.removeMemberError,{error:i.message}),{toastId:"amphora_member_remove"})}),onSuccess:(o,{userId:i})=>{a.removeQueries({predicate:({queryKey:l})=>!Array.isArray(l)||l[0]!=="amphora"||l[1]!==t||l.length!==4||l[3]!=="permissions"?!1:l[2]===i})}})}function _f(t){const{data:e,isLoading:n,error:a}=uf(t);return{members:S.useMemo(()=>{var l;const i=(l=e==null?void 0:e.items)!=null?l:[];return Array.isArray(i)?i.filter(d=>typeof d=="object"&&d!=null&&"status"in d).filter(d=>d.status==="accepted").filter(d=>typeof d.user_id=="string"):[]},[e]),isLoading:n,error:a,raw:e}}function vf(t,e){return ds({queryKey:["amphora",t,e,"permissions"],queryFn:()=>Xe.safeGet("/amphora/{amphora_id}/members/{user_id}/settings",{parameters:{path:{amphora_id:t,user_id:e}}}),enabled:!!(t&&e)})}function jf(){return ds({queryKey:["amphora","settings_layout"],queryFn:async()=>{const t=await hf("/amphora/settings_layout");return pf(t)}})}const Sf=R(()=>L(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([10,1])),{loading:t=>K(t)});function Ef({amphoraId:t,member:e,onBack:n}){const a=Y(),o=us(),i=rr(),l=bo(t),d=Et(),c=(i==null?void 0:i.role)==="member_role",r=e.role==="member_role",m=!(c&&r),g=m?"text-token-text-secondary pt-6 text-sm":"text-token-text-secondary text-sm",u=async()=>{if(!(!(o!=null&&o.id)||!window.confirm(a.formatMessage(_n.unlinkConfirm))))try{await l.mutateAsync({userId:o.id}),await fa(d),n()}catch(h){}};return s.jsxs(Ze,{title:s.jsxs("button",{"aria-label":a.formatMessage(_n.back),onClick:n,className:"hover:bg-token-bg-tertiary -ms-3 flex items-center gap-2 rounded-full px-3 py-1",children:[s.jsx(Sf,{className:"icon-sm"}),s.jsx("span",{children:s.jsx(p,v({},_n.back))})]}),noBorder:!0,headerInteractable:!0,children:[s.jsx(xo,{user:e}),s.jsxs("div",{className:"flex flex-col items-start py-3",children:[m?s.jsx(te,{color:"danger-outline",disabled:l.isPending||!(o!=null&&o.id),onClick:u,children:s.jsx(p,v({},_n.unlinkButton))}):null,s.jsx("p",{className:g,children:a.formatMessage(_n.helpCenterParagraph)})]})]})}const _n=Be({back:{id:"amphora.relationship.back",defaultMessage:"Back"},relationshipDescription:{id:"amphora.relationship.description",defaultMessage:"When your account is linked to a guardian, they can manage certain privacy and content settings for you. They won't have access to your chats, but they'll be notified if we detect conversations with ChatGPT that may put your safety at risk."},unlinkButton:{id:"amphora.relationship.unlinkButton",defaultMessage:"Unlink accounts"},unlinkConfirm:{id:"amphora.relationship.unlinkConfirm",defaultMessage:"Are you sure you want to unlink your accounts?"},unknownMember:{id:"amphora.relationship.unknownMember",defaultMessage:"Member"},helpCenterParagraph:{id:"amphora.relationship.helpCenterParagraph2",defaultMessage:"You can link one parent at a time."}});function yi(t){"use forget";const e=_e.c(12),{valueMinutes:n,disabled:a,onChange:o}=t,i=Y();let l;e[0]!==i?(l=h=>{const _=Math.max(0,Math.min(1439,h|0)),b=new Date;return b.setHours(Math.floor(_/60),_%60,0,0),i.formatDate(b,{hour:"numeric",minute:"2-digit"})},e[0]=i,e[1]=l):l=e[1];const d=l;let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=Array.from({length:48}),e[2]=c):c=e[2];let r;e[3]!==d?(r=c.map((h,_)=>{const b=_*30;return{label:d(b),value:String(b)}}),e[3]=d,e[4]=r):r=e[4];const m=r,g=String(Math.max(0,Math.min(1439,n|0)));let u;e[5]!==o?(u=h=>o(Number(h)),e[5]=o,e[6]=u):u=e[6];let f;return e[7]!==a||e[8]!==m||e[9]!==g||e[10]!==u?(f=s.jsx(Wr,{options:m,value:g,disabled:a,onValueChange:u,triggerClassName:"text-token-text-primary",contentClassName:"min-w-[var(--radix-select-trigger-width)]!",triggerId:"time-picker"}),e[7]=a,e[8]=m,e[9]=g,e[10]=u,e[11]=f):f=e[11],f}const Tf=R(()=>L(()=>import("./mv59uia51hlqeiwb.js"),__vite__mapDeps([11,1])),{loading:t=>K(t)}),kf=R(()=>L(()=>import("./dt7r1tuc81rn6vox.js"),__vite__mapDeps([12,1])),{loading:t=>K(t)});function Nf({enabled:t,disabled:e,startMinutes:n,endMinutes:a,onToggle:o,onStartChange:i,onEndChange:l}){const d=Y();return s.jsxs(s.Fragment,{children:[s.jsx(ft,{label:d.formatMessage(Ws.blackoutHoursLabel),description:d.formatMessage(Ws.blackoutHoursDescription),enabled:t,disabled:e,onChange:o,ariaLabel:d.formatMessage(Ws.blackoutHoursLabelAria)}),t?s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex w-full items-center justify-between",children:[s.jsxs("span",{className:"text-token-text-primary inline-flex items-center gap-1.5 text-sm",children:[s.jsx(kf,{className:"icon-sm"}),d.formatMessage(Ws.startLabel)]}),s.jsx(yi,{label:s.jsx("span",{className:"sr-only",children:d.formatMessage(Ws.startLabel)}),valueMinutes:n,disabled:e,onChange:i})]}),s.jsxs("div",{className:"flex w-full items-center justify-between",children:[s.jsxs("span",{className:"text-token-text-primary inline-flex items-center gap-1.5 text-sm",children:[s.jsx(Tf,{className:"icon-sm"}),d.formatMessage(Ws.endLabel)]}),s.jsx(yi,{label:s.jsx("span",{className:"sr-only",children:d.formatMessage(Ws.endLabel)}),valueMinutes:a,disabled:e,onChange:l})]})]}):null]})}const Ws=Be({blackoutHoursLabel:{id:"amphora.permissions.blackoutHoursLabel",defaultMessage:"Quiet hours"},blackoutHoursDescription:{id:"amphora.permissions.blackoutHoursDescription",defaultMessage:"Schedule hours when ChatGPT can't be used."},blackoutHoursLabelAria:{id:"amphora.permissions.blackoutHoursLabelAria",defaultMessage:"Quiet hours"},startLabel:{id:"amphora.permissions.blackout.start",defaultMessage:"Start time"},endLabel:{id:"amphora.permissions.blackout.end",defaultMessage:"End time"}}),bi=1320,Mi=360,da=(t,e,n)=>Math.min(n,Math.max(e,t|0)),Xn=(t,e=0)=>{if(!t)return e;const[n,a]=t.split(":").map(o=>parseInt(o,10)||0);return da(n,0,23)*60+da(a,0,59)},Ci=t=>{const e=da(Math.floor(t/60),0,23),n=da(t%60,0,59);return"".concat(String(e).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))};function wf(t){"use forget";var P,U;const e=_e.c(28),{disabled:n,userId:a,currentBlackout:o,featureKey:i,onPatch:l}=t,[d,c]=Ss.useState(typeof(o==null?void 0:o.enabled)=="boolean"?o.enabled:!1),r=o==null?void 0:o.start_time;let m;e[0]!==r?(m=Xn(r,bi),e[0]=r,e[1]=m):m=e[1];const[g,u]=Ss.useState(m),f=o==null?void 0:o.end_time;let h;e[2]!==f?(h=Xn(f,Mi),e[2]=f,e[3]=h):h=e[3];const[_,b]=Ss.useState(h),j=o==null?void 0:o.enabled,y=(P=o==null?void 0:o.start_time)!=null?P:null,M=(U=o==null?void 0:o.end_time)!=null?U:null;let C,k;e[4]!==j||e[5]!==M||e[6]!==y?(C=()=>{c(!!j),u(Xn(y,bi)),b(Xn(M,Mi))},k=[j,y,M],e[4]=j,e[5]=M,e[6]=y,e[7]=C,e[8]=k):(C=e[7],k=e[8]),Ss.useEffect(C,k);let E;e[9]!==_||e[10]!==i||e[11]!==l||e[12]!==g||e[13]!==a?(E=I=>{const{nextEnabled:q,nextStartMinutes:Q,nextEndMinutes:D}=I,F=Q===void 0?g:Q,G=D===void 0?_:D,X=Ci(F),B=Ci(G);l({userId:a,feature:i,value:{enabled:q,start_time:q?X:null,end_time:q?B:null}})},e[9]=_,e[10]=i,e[11]=l,e[12]=g,e[13]=a,e[14]=E):E=e[14];const w=Rs(E);let x,T,N;e[15]!==n||e[16]!==w?(T=I=>{c(I),n||w({nextEnabled:I})},N=I=>{u(I),n||w({nextEnabled:!0,nextStartMinutes:I})},x=I=>{b(I),n||w({nextEnabled:!0,nextEndMinutes:I})},e[15]=n,e[16]=w,e[17]=x,e[18]=T,e[19]=N):(x=e[17],T=e[18],N=e[19]);let A;return e[20]!==n||e[21]!==d||e[22]!==_||e[23]!==g||e[24]!==x||e[25]!==T||e[26]!==N?(A=s.jsx(Nf,{enabled:d,disabled:n,startMinutes:g,endMinutes:_,onToggle:T,onStartChange:N,onEndChange:x}),e[20]=n,e[21]=d,e[22]=_,e[23]=g,e[24]=x,e[25]=T,e[26]=N,e[27]=A):A=e[27],A}const Pf=R(()=>L(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([13,1])),{loading:t=>K(t)}),Af=R(()=>L(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([10,1])),{loading:t=>K(t)});function Sl(t,e){const n=typeof t=="string"?t.trim():"";if(n)return e?s.jsxs(s.Fragment,{children:[n," ",s.jsx(pa,{href:e.href,className:"underline",children:e.label})]}):n}function If(t){return t.kind==="setting"?t.settings:t.permission}function Df(t){return t.toggle_type===vl.Blackout&&t.kind==="setting"}function Of({pages:t,rootPageId:e,onBack:n}){const a=S.useMemo(()=>{const u=new Map;for(const f of t)u.set(f.id,f);return u},[t]),o=S.useMemo(()=>{var u;if(t.length)return e&&a.has(e)?e:(u=t[0])==null?void 0:u.id},[a,t,e]),[i,l]=S.useState(()=>o?[o]:[]);S.useEffect(()=>{if(!o){l([]);return}l(u=>{if(!u.length)return[o];const f=new Set(t.map(b=>b.id));if(f.size===0)return[];const h=[o];for(const b of u.slice(1))f.has(b)&&h.push(b);return h.length===u.length&&h.every((b,j)=>b===u[j])?u:h})},[o,t]);const d=i.length>0?i[i.length-1]:o,c=d?a.get(d):void 0,r=i.length>1,m=S.useCallback(()=>{l(u=>u.length>1?u.slice(0,-1):(n(),u))},[n]),g=S.useCallback(u=>{!u||!a.has(u)||l(f=>f[f.length-1]===u?f:[...f,u])},[a]);return{activePageId:d,activePage:c,isSubPageActive:r,goBack:m,goToPage:g}}function Lf(t,e){return t.type==="toggle"?"".concat(e!=null?e:"member","-").concat(t.id):"nav-item-".concat(t.id)}function Rf(t,e,n){var r,m;if(t.kind==="setting"&&t.settings.length===0)return null;const{memberId:a,isPermissionsLoading:o}=e,i=If(t),l=mf(e.currentSettings,i),d=e.isSelf&&l,c=o||!a||d;if(Df(t)){const g=t.settings[0];if(!g||!a)return null;const u=(m=(r=e.currentSettings)==null?void 0:r[g])!=null?m:{};return s.jsx(le,{children:s.jsx(wf,{disabled:c,userId:a,currentBlackout:u,featureKey:g,onPatch:e.onPatchSetting})},n)}return s.jsx(le,{children:s.jsx(ft,{label:t.label,description:Sl(t.description,t.learn_more),enabled:gf(e.currentPerms,i,e.currentSettings),disabled:c,onChange:g=>{!a||d||e.onToggle({memberId:a,currentPerms:e.currentPerms,currentSettings:e.currentSettings,toggleKey:i,enabled:g})}})},n)}function Bf(t,e,n){return s.jsx(le,{children:s.jsxs("button",{type:"button",onClick:()=>e(t.target_page_id),className:"hover:bg-token-bg-tertiary flex w-full items-center justify-between rounded-lg py-2 ps-0 pe-0 text-start transition",children:[s.jsxs("span",{children:[s.jsx("div",{className:"text-base font-medium",children:t.label}),t.description&&s.jsx("div",{className:"text-token-text-tertiary text-xs",children:t.description})]}),s.jsx(Pf,{className:"icon-sm shrink-0"})]})},n)}function Ff({amphoraId:t,member:e,onBack:n}){var N,A;const a=Y(),o=e.name||e.email||"",i=(N=e.user_id)!=null?N:void 0,l=us(),{data:d,isLoading:c}=vf(t,i),r=d==null?void 0:d.permissions,m=d==null?void 0:d.settings,{data:g}=jf(),u=(A=g==null?void 0:g.pages)!=null?A:[],{activePageId:f,activePage:h,isSubPageActive:_,goBack:b,goToPage:j}=Of({pages:u,rootPageId:g==null?void 0:g.root_page_id,onBack:n}),{triggerToggle:y}=Cf(t),{mutate:M}=jl(t),C=bo(t),k=Et(),E=!!(i&&(l!=null&&l.id)&&i===l.id),w=S.useMemo(()=>({memberId:i,isSelf:E,isPermissionsLoading:c,currentPerms:r,currentSettings:m,onToggle:y,onPatchSetting:M,onNavigate:j}),[r,m,j,c,E,i,M,y]),x=C.isPending,T=S.useCallback(async()=>{if(!i)return;const P=o||a.formatMessage(cn.unlinkFallbackName);if(window.confirm(a.formatMessage(cn.unlinkConfirm,{name:P})))try{await C.mutateAsync({userId:i}),n(),await fa(k)}catch(I){}},[o,a,i,n,k,C]);return{backLabel:a.formatMessage(cn.back),onBackClick:b,activePage:h,activePageId:f,sectionItemContext:w,isSubPageActive:_,isViewingSelf:E,isRemoving:x,handleUnlink:T}}function Uf({page:t,isSubPageActive:e}){const n=typeof(t==null?void 0:t.heading)=="string"?t.heading.trim():"",a=Sl(t==null?void 0:t.description,t==null?void 0:t.description_learn_more),o=n.length>0,i=!!a;return!o&&!i?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pt-3",children:s.jsx(le,{children:s.jsxs("div",{className:"py-2",children:[o&&s.jsx("div",{className:"text-base font-medium",children:n}),i&&s.jsx("div",{className:"text-token-text-tertiary text-xs",children:a})]})})}),e&&s.jsx("hr",{className:"border-token-border-light"})]})}function Gf({page:t,context:e,fallbackPageId:n}){var i,l,d;const a=(i=t==null?void 0:t.sections)!=null?i:[],o=(d=(l=t==null?void 0:t.id)!=null?l:n)!=null?d:"page";return s.jsx(s.Fragment,{children:a.map((c,r)=>{var m;return s.jsxs("div",{className:Ms({"pt-6":c.extra_top_padding,"pt-3":!c.extra_top_padding&&r===0}),children:[c.label&&s.jsx(le,{children:s.jsx("div",{className:"mb-1 text-base",children:c.label})}),c.items.map(g=>{const u=Lf(g,e.memberId);return g.type==="toggle"?Rf(g,e,u):g.type==="navigation"?Bf(g,e.onNavigate,u):null}),s.jsx("hr",{className:"border-token-border-light"})]},"".concat(o,"-").concat((m=c.id)!=null?m:r))})})}function Vf({amphoraId:t,member:e,onBack:n}){const{backLabel:a,onBackClick:o,activePage:i,activePageId:l,sectionItemContext:d,isSubPageActive:c,isViewingSelf:r,isRemoving:m,handleUnlink:g}=Ff({amphoraId:t,member:e,onBack:n}),u=!c,f=u&&r&&e.role==="member_role";return s.jsxs(Ze,{title:s.jsxs("button",{"aria-label":a,onClick:o,className:"hover:bg-token-bg-tertiary -ms-3 flex items-center gap-2 rounded-full px-3 py-1",children:[s.jsx(Af,{className:"icon-sm"}),s.jsx("span",{children:s.jsx(p,v({},cn.back))})]}),noBorder:!0,headerInteractable:!0,children:[u&&s.jsxs(s.Fragment,{children:[s.jsx(xo,{user:e}),f&&s.jsx(zf,{})]}),s.jsx(Uf,{page:i,isSubPageActive:c}),s.jsx(Gf,{page:i,context:d,fallbackPageId:l}),u&&s.jsx(te,{color:"danger-outline",disabled:m,onClick:()=>{g()},className:"mt-6",children:s.jsx(p,v({},cn.unlinkButton))})]})}function zf(){"use forget";const t=_e.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx("div",{className:"bg-token-bg-tertiary text-token-text-secondary mt-6 mb-3 flex items-center rounded-xl border-none p-3 text-xs",children:s.jsx(p,v({},cn.childInformationalBanner))}),t[0]=e):e=t[0],e}const cn=Be({back:{id:"settingsModal.back",defaultMessage:"Back"},unlinkButton:{id:"amphora.memberSettings.unlinkButton",defaultMessage:"Unlink accounts"},unlinkConfirm:{id:"amphora.memberSettings.unlinkConfirm",defaultMessage:"Remove {name} from this family group?"},unlinkFallbackName:{id:"amphora.memberSettings.unlinkFallbackName",defaultMessage:"this member"},childInformationalBanner:{id:"amphora.memberSettings.childInformationalBanner",defaultMessage:"Your parent or guardian can adjust these settings to help guide how you use ChatGPT and Sora."}}),Hf=R(()=>L(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([10,1])),{loading:t=>K(t)});function Wf({amphoraId:t,selectedParent:e,onBack:n}){const a=Y(),o=us(),i=bo(t),l=Et(),d=i.isPending,c=async()=>{const r=o==null?void 0:o.id;if(!(!r||!window.confirm(a.formatMessage(ea.leaveConfirm))))try{await i.mutateAsync({userId:r}),await fa(l),n()}catch(g){}};return s.jsxs(Ze,{title:s.jsxs("button",{"aria-label":a.formatMessage(ea.back),onClick:n,className:"hover:bg-token-bg-tertiary -ms-3 flex items-center gap-2 rounded-full px-3 py-1",children:[s.jsx(Hf,{className:"icon-sm"}),s.jsx("span",{children:s.jsx(p,v({},ea.back))})]}),noBorder:!0,headerInteractable:!0,children:[s.jsx(xo,{user:e}),s.jsxs("div",{className:"flex w-full flex-col items-start gap-3 py-3",children:[s.jsx(te,{color:"danger-outline",disabled:d,onClick:c,children:s.jsx(p,v({},ea.removeFromFamilyButton))}),s.jsx("p",{className:"text-token-text-secondary py-3 text-xs",children:s.jsx(p,{id:"jNO9yz",defaultMessage:"{LearnMoreLink} about parental controls",values:{LearnMoreLink:s.jsx(pa,{href:"https://help.openai.com/en/articles/12315553-parental-controls-faq",className:"underline",children:s.jsx(p,{id:"0M5wS5",defaultMessage:"Learn more"})})}})})]})]})}const ea=Be({back:{id:"amphora.parent.back",defaultMessage:"Back"},parentBadge:{id:"amphora.parent.badge",defaultMessage:"Parent"},removeFromFamilyButton:{id:"amphora.parent.removeFromFamily",defaultMessage:"Remove from family"},leaveConfirm:{id:"amphora.parent.leaveConfirm",defaultMessage:"Are you sure you want to leave this family group?"},unknownMember:{id:"amphora.parent.unknownMember",defaultMessage:"Member"}}),Kf=R(()=>L(()=>import("./luhdaml0ts1hcscs.js"),__vite__mapDeps([9,1])),{loading:t=>K(t)}),$f=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zy),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)}),_i=R(()=>L(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([13,1])),{loading:t=>K(t)}),qf=R(()=>L(()=>import("./mglbdo8rbc3kx8jc.js"),__vite__mapDeps([18,1,15,16,19,20,14,17,21])).then(t=>t.AmphoraInviteModal));function Yf(){"use forget";var et,tt;const t=_e.c(81),e=Y(),n=ce(),a=rr(),o=yc(),{openSettings:i}=Zs(),l=Cs(),d=a==null?void 0:a.id;let c;e:{let z;if(t[0]!==l.hash){const[he]=l.hash.split("?");z=he.split("/"),t[0]=l.hash,t[1]=z}else z=t[1];const[,ue,Ie,me]=z;if(ue===He.ParentalControls&&Ie==="member"&&typeof me=="string"&&me.length>0)try{c=decodeURIComponent(me);break e}catch(he){c=me;break e}c=null}const r=c;let m;t[2]!==o?(m=o.find(Jf),t[2]=o,t[3]=m):m=t[3];const g=m;let u;e:{const z=g==null?void 0:g.payload;if(!(z!=null&&z.family_group_id)){u=null;break e}u=z}const f=u,h=(et=g==null?void 0:g.id)!=null?et:null,[_,b]=S.useState(!1),j=us(),[y,M]=S.useState(null);let C;t[4]!==i||t[5]!==r?(C=()=>{r&&i(He.ParentalControls)},t[4]=i,t[5]=r,t[6]=C):C=t[6];const k=C;let E;t[7]!==k?(E=()=>{M(null),k()},t[7]=k,t[8]=E):E=t[8];const w=E;let x,T;t[9]!==a||t[10]!==n||t[11]!==_||t[12]!==h||t[13]!==f?(x=()=>{a!==void 0&&!(a!=null&&a.id)&&f&&!_&&(b(!0),Go(n,f,h!=null?h:void 0))},T=[n,a,f,h,_],t[9]=a,t[10]=n,t[11]=_,t[12]=h,t[13]=f,t[14]=x,t[15]=T):(x=t[14],T=t[15]),S.useEffect(x,T);const{members:N,raw:A,isLoading:P}=_f(d);let U;t[16]!==N?(U=N!=null?N:[],t[16]=N,t[17]=U):U=t[17];const I=U,Q=((tt=A==null?void 0:A.items)!=null?tt:[]).filter(Qf),D=(a==null?void 0:a.role)==="owner",F=(a==null?void 0:a.role)==="member_role";let G;e:{if(D){let ue;t[18]!==e?(ue=e.formatMessage(Zt.addChildCTA),t[18]=e,t[19]=ue):ue=t[19],G=ue;break e}let z;t[20]!==e?(z=e.formatMessage(Zt.addFamilyMemberCTA),t[20]=e,t[21]=z):z=t[21],G=z}const X=G,B=D&&(a!=null&&a.id)?"member_role":void 0;let $;t[22]!==(a==null?void 0:a.id)||t[23]!==n||t[24]!==B?($=()=>{var z;nt(n,qf,{amphora_id:(z=a==null?void 0:a.id)!=null?z:null,forceInviteeRole:B})},t[22]=a==null?void 0:a.id,t[23]=n,t[24]=B,t[25]=$):$=t[25],a==null||a.id;const H=$;let J,W;t[26]!==d||t[27]!==I||t[28]!==r?(J=()=>{if(!r||!d)return;const z=I.find(ue=>ue.user_id===r);z&&M(ue=>(ue==null?void 0:ue.type)==="member"&&ue.member.user_id===z.user_id?ue:{type:"member",member:z})},W=[d,I,r],t[26]=d,t[27]=I,t[28]=r,t[29]=J,t[30]=W):(J=t[29],W=t[30]),S.useEffect(J,W);let de,V;if(t[31]!==d||t[32]!==k||t[33]!==P||t[34]!==I||t[35]!==r?(de=()=>{if(!r||P||!d)return;I.some(ue=>ue.user_id===r)||k()},V=[k,P,I,r,d],t[31]=d,t[32]=k,t[33]=P,t[34]=I,t[35]=r,t[36]=de,t[37]=V):(de=t[36],V=t[37]),S.useEffect(de,V),a!=null&&a.id&&y){if(y.type==="parent"){let z;return t[38]!==a.id||t[39]!==w||t[40]!==y.member?(z=s.jsx(Wf,{amphoraId:a.id,selectedParent:y.member,onBack:w}),t[38]=a.id,t[39]=w,t[40]=y.member,t[41]=z):z=t[41],z}if(y.type==="member"){let z;return t[42]!==a.id||t[43]!==w||t[44]!==y.member?(z=s.jsx(Vf,{amphoraId:a.id,member:y.member,onBack:w}),t[42]=a.id,t[43]=w,t[44]=y.member,t[45]=z):z=t[45],z}if(y.type==="relationship"){let z;return t[46]!==a.id||t[47]!==w||t[48]!==y.member?(z=s.jsx(Ef,{amphoraId:a.id,member:y.member,onBack:w}),t[46]=a.id,t[47]=w,t[48]=y.member,t[49]=z):z=t[49],z}if(y.type==="invite"){let z;return t[50]!==a.id||t[51]!==w||t[52]!==y.invite?(z=s.jsx(df,{amphoraId:a.id,invite:y.invite,onBack:w}),t[50]=a.id,t[51]=w,t[52]=y.invite,t[53]=z):z=t[53],z}}const se=Ze;let ae;t[54]!==e?(ae=e.formatMessage(Zt.amphoraControlsTab),t[54]=e,t[55]=ae):ae=t[55];const Ne="https://help.openai.com/en/articles/12315553-parental-controls-faq";let Me;t[56]!==a||t[57]!==n||t[58]!==e||t[59]!==h||t[60]!==f?(Me=a!==void 0&&!(a!=null&&a.id)&&f&&s.jsx(le,{children:s.jsx(zt,{label:e.formatMessage(Zt.pendingAmphoraInvite),buttonLabel:e.formatMessage(Zt.inviteButton),onClick:()=>Go(n,f,h!=null?h:void 0)})}),t[56]=a,t[57]=n,t[58]=e,t[59]=h,t[60]=f,t[61]=Me):Me=t[61];let Ae;t[62]===Symbol.for("react.memo_cache_sentinel")?(Ae=s.jsx("div",{className:"flex min-h-15 items-center pt-4",children:s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"flex flex-col items-start gap-8 pt-1 pb-3",children:s.jsx("p",{className:"text-sm",children:s.jsx(p,v({},Zt.inviteAmphoraMembersParagraph))})})})}),t[62]=Ae):Ae=t[62];const ve=(a==null?void 0:a.id)&&(I.length>0||Q.length>0)&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"mb-2 text-base font-medium",children:s.jsx(p,v({},Zt.amphoraMembersTitle))}),s.jsxs("div",{children:[I.map(z=>{var he,xe,we,$e,ye;const ue=z.user_id,Ie=z.user_id===(j==null?void 0:j.id),me=z.role==="owner";return s.jsx("div",{className:"border-token-border-default hover:bg-token-interactive-bg-secondary-hover active:bg-token-interactive-bg-secondary-press border-t last:border-b",children:s.jsxs("button",{className:"flex w-full items-center justify-between py-4 pe-4",onClick:()=>{if(ue){if(me){k(),M(D?{type:"parent",member:z}:{type:"relationship",member:z});return}(a==null?void 0:a.role)==="member_role"&&!Ie?(k(),M({type:"relationship",member:z})):(i(He.ParentalControls,{parentalControlsMemberId:ue}),M({type:"member",member:z}))}},children:[s.jsxs("div",{className:"flex items-center gap-3 text-start",children:[s.jsx(ir,{user:{picture:(he=z.profile_picture_url)!=null?he:void 0,name:(we=(xe=z.name)!=null?xe:z.email)!=null?we:""},size:"large"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("div",{className:"text-[15px] leading-5",children:(ye=($e=z.name)!=null?$e:z.email)!=null?ye:s.jsx(p,v({},Zt.amphoraMemberFallback))})})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[me&&s.jsx(ca,{}),s.jsx(_i,{className:"icon-sm opacity-60"})]})]})},ue)}),Q.map(z=>{var Ie,me;const ue=(Ie=z.user_id)!=null?Ie:z.email;return s.jsx("div",{className:"border-token-border-default hover:bg-token-interactive-bg-secondary-hover active:bg-token-interactive-bg-secondary-press border-t last:border-b",children:s.jsxs("button",{className:"flex w-full items-center justify-between py-4 pe-4",onClick:()=>{k(),M({type:"invite",invite:z})},children:[s.jsxs("div",{className:"flex items-center gap-3 text-start",children:[s.jsx("div",{className:"bg-token-bg-tertiary text-token-text-tertiary flex h-12 w-12 shrink-0 items-center justify-center rounded-full",children:s.jsx(Kf,{className:"icon-lg"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm",children:(me=z.email)!=null?me:s.jsx(p,v({},Zt.missingMember))}),s.jsx("div",{className:"text-token-text-secondary mt-0.5 text-sm",children:s.jsx("span",{children:e.formatMessage(Zt.invitationSent)})})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[z.role==="owner"&&s.jsx(ca,{}),s.jsx(_i,{className:"icon-sm opacity-60"})]})]})},"pending-".concat(ue))})]})]});let Le;t[63]!==H||t[64]!==X||t[65]!==F?(Le=!F&&s.jsx(le,{children:s.jsx("div",{className:"flex flex-col items-start gap-8 py-1",children:s.jsx(te,{color:"secondary",icon:$f,onClick:H,children:X})})}),t[63]=H,t[64]=X,t[65]=F,t[66]=Le):Le=t[66];let je;t[67]!==se||t[68]!==ae||t[69]!==Me||t[70]!==Ae||t[71]!==ve||t[72]!==Le?(je=s.jsxs(se,{title:ae,learnMoreHref:Ne,children:[Me,Ae,ve,Le]}),t[67]=se,t[68]=ae,t[69]=Me,t[70]=Ae,t[71]=ve,t[72]=Le,t[73]=je):je=t[73];let Ke;t[74]!==e||t[75]!==D||t[76]!==i?(Ke=D&&s.jsx(Ze,{title:e.formatMessage(Zt.safetyNotifications),noBorder:!0,learnMoreHref:"https://help.openai.com/en/articles/12315553-parental-controls-faq",children:s.jsxs("div",{className:"flex flex-col items-start gap-3",children:[s.jsx("p",{className:"text-sm",children:s.jsx(p,v({},Zt.safetyNotificationsDescription))}),s.jsx(te,{color:"secondary",onClick:()=>i(He.Notifications),children:s.jsx(p,v({},Zt.safetyNotificationsButton))})]})}),t[74]=e,t[75]=D,t[76]=i,t[77]=Ke):Ke=t[77];let Je;return t[78]!==je||t[79]!==Ke?(Je=s.jsxs(s.Fragment,{children:[je,Ke]}),t[78]=je,t[79]=Ke,t[80]=Je):Je=t[80],Je}function Qf(t){return t.status==="invited"}function Jf(t){return t.notification_type==="family-invite"&&!t.reacted_to_at}const Zt=Be({amphoraControlsTab:{id:"settingsModal.amphoraControlsTab",defaultMessage:"Parental controls"},pendingAmphoraInvite:{id:"settingsModal.pendingAmphoraInvite",defaultMessage:"You have a pending family invite"},inviteAmphoraMembers:{id:"settingsModal.inviteAmphoraMembers",defaultMessage:"Invite family members"},inviteButton:{id:"settingsModal.inviteButton",defaultMessage:"Invite"},inviteAmphoraMembersParagraph:{id:"settingsModal.inviteAmphoraMembersParagraph3",defaultMessage:"Parents and teens can link accounts, giving parents tools to adjust certain features, set limits, and add safeguards that work for their family."},addFamilyMemberCTA:{id:"settingsModal.addFamilyMemberCTA",defaultMessage:"Add family member"},addChildCTA:{id:"settingsModal.addChildCTA",defaultMessage:"Add child"},amphoraMembersTitle:{id:"settingsModal.amphoraMembersTitle",defaultMessage:"Family members"},amphoraMembersRoleLabel:{id:"settingsModal.amphoraMembersRoleLabel",defaultMessage:"Role"},amphoraMembersStatusLabel:{id:"settingsModal.amphoraMembersStatusLabel",defaultMessage:"Status"},amphoraMemberFallback:{id:"settingsModal.amphoraMemberFallback",defaultMessage:"Family member"},removeMember:{id:"amphora.members.removeMember",defaultMessage:"Remove"},leaveAmphora:{id:"amphora.members.leaveAmphora",defaultMessage:"Leave family group"},invitedStatus:{id:"amphora.members.status.invited",defaultMessage:"Invited"},invitationSent:{id:"amphora.members.status.invitationSent",defaultMessage:"Invitation sent"},cancelInvite:{id:"amphora.invites.cancelInvite",defaultMessage:"Cancel"},cancelInviteError:{id:"amphora.invites.cancelInviteError",defaultMessage:"Unable to cancel invite: {error}"},missingMember:{id:"amphora.members.missingMember",defaultMessage:"[missing]"},selfLabel:{id:"amphora.members.self",defaultMessage:"You"},safetyNotifications:{id:"amphora.settings.safetyNotifications",defaultMessage:"Safety notifications"},safetyNotificationsDescription:{id:"amphora.settings.safetyNotificationsDescription",defaultMessage:"We care about your teen's safety. If we detect certain serious safety concerns, we will notify youthough no system is perfect. You can choose how you'd like to be contacted."},safetyNotificationsButton:{id:"amphora.settings.safetyNotificationsButton",defaultMessage:"Manage notifications"}});function Zf(t){return t.type===Vo.GDRIVE_SYNC_CONNECTOR||t.type===Vo.SLACK_SYNC_CONNECTOR?"".concat(window.location.origin,"/ca/").concat(t.id,"/oauth/callback"):"".concat(window.location.origin,"/ccc/").concat(t.id,"/oauth/callback")}const Xf=({entry:t,isConnected:e,onDisconnect:n,onConnect:a,redirectUri:o})=>s.jsx(ep,{isConnected:e,onConnect:()=>a({id:t.id},"settings_connected_apps",Zf(t),o),onDisconnect:()=>n(t==null?void 0:t.type)}),ep=({isConnected:t,isDisabledByAdmin:e,onDisconnect:n,onConnect:a})=>{const o=Y();return e?s.jsx(Wt,{label:o.formatMessage(ta.disabledByAdmin),children:s.jsx(te,{onClick:n,color:"secondary",size:"small",disabled:e,children:s.jsx(p,v({},ta.connect))})}):t?s.jsx(te,{onClick:n,color:"danger-outline",size:"small",children:s.jsx(p,v({},ta.disconnect))}):s.jsx(te,{onClick:a,color:"secondary",size:"small",children:s.jsx(p,v({},ta.connect))})},ta=Be({connect:{id:"connectorSettings.connect",defaultMessage:"Connect"},disconnect:{id:"connectorSettings.disconnect",defaultMessage:"Disconnect"},disabledByAdmin:{id:"connectorSettings.disabledByAdmin",defaultMessage:"Disabled by workspace admin"}}),tp=R(()=>L(()=>import("./dvfjdfwc50k8htst.js"),__vite__mapDeps([22,1])),{loading:t=>K(t)}),sp=R(()=>L(()=>import("./idxkrx2slxhzm8qh.js"),__vite__mapDeps([23,1])),{loading:t=>K(t)}),np=R(()=>L(()=>import("./e2n6syult3e6hs2j.js"),__vite__mapDeps([24,1])),{loading:t=>K(t)}),ap=R(()=>L(()=>import("./kuui3eekaq585ekz.js"),__vite__mapDeps([25,1])),{loading:t=>K(t)}),op=R(()=>L(()=>import("./iz9ybw36zj0rjajq.js"),__vite__mapDeps([26,1])),{loading:t=>K(t)}),ip=R(()=>L(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([27,1])),{loading:t=>K(t)}),rp=R(()=>L(()=>import("./1z12ka0sjzwi5bk4.js"),__vite__mapDeps([28,1])),{loading:t=>K(t)}),lp=R(()=>L(()=>import("./f7s65jnu4pmacl71.js"),__vite__mapDeps([6,1])),{loading:t=>K(t)}),cp=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zx),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)});function dp(t){switch(t){case wt.CONFLUENCE:return rp;case wt.GDRIVE:return ip;case wt.JIRA:return op;case wt.NOTION_OPEN_CONNECTOR:return sp;case wt.O365:case wt.O365_PERSONAL:case wt.O365_BUSINESS:return np;case wt.SLACK_OPEN_CONNECTOR:return tp}}function up({clientApplications:t}){const{mutate:e,isPending:n}=uo();return s.jsx(s.Fragment,{children:t.map(a=>s.jsx(gp,{clientApplication:a,disabled:n,onDisconnect:()=>{Ge.logEventWithStatsig("Connector Settings: Client Application Disconnect Button Clicked","chatgpt_connector_settings_client_application_disconnect_button_clicked",{id:a.id,name:a.name,type:a.type}),e(a.id)}},a.id))})}function gp({clientApplication:t,disabled:e,onDisconnect:n}){return s.jsx(le,{children:s.jsx(ks,{icon:s.jsx(lp,{className:"icon-lg"}),title:t.name,description:s.jsx(p,v({},mn.appleDesc)),statusIndicator:s.jsx(te,{onClick:n,color:"danger-outline",size:"small",disabled:e,children:s.jsx(p,v({},mn.disconnect))})})})}function mp({clientApplications:t}){const{mutate:e,isPending:n}=uo();return s.jsx(s.Fragment,{children:t.map(a=>s.jsx(fp,{clientApplication:a,disabled:n,onDisconnect:()=>{Ge.logEventWithStatsig("Connector Settings: Kakao Client Application Disconnect Button Clicked","chatgpt_connector_settings_client_application_disconnect_button_clicked",{id:a.id,name:a.name,type:a.type}),e(a.id)}},a.id))})}function fp({clientApplication:t,disabled:e,onDisconnect:n}){return s.jsx(le,{children:s.jsx(ks,{icon:s.jsx(ap,{className:"icon-lg"}),title:t.name,description:s.jsx(p,v({},mn.kakaoDesc)),statusIndicator:s.jsx(te,{onClick:n,color:"danger-outline",size:"small",disabled:e,children:s.jsx(p,v({},mn.disconnect))})})})}function pp({clientApplications:t}){const{mutate:e,isPending:n}=uo();return s.jsx(s.Fragment,{children:t.map(a=>s.jsx(hp,{clientApplication:a,disabled:n,onDisconnect:()=>{Ge.logEventWithStatsig("Connector Settings: Codex CLI Client Application Disconnect Button Clicked","chatgpt_connector_settings_client_application_disconnect_button_clicked",{id:a.id,name:a.name,type:a.type}),e(a.id)}},a.id))})}function hp({clientApplication:t,disabled:e,onDisconnect:n}){return s.jsx(le,{children:s.jsx(ks,{icon:s.jsx(cp,{className:"icon-lg"}),title:t.name,description:s.jsx(p,v({},mn.codexCLIDesc)),statusIndicator:s.jsx(te,{onClick:n,color:"danger-outline",size:"small",disabled:e,children:s.jsx(p,v({},mn.disconnect))})})})}const mn=Be({appleDesc:{id:"P5OVxG",defaultMessage:"Get personalized ChatGPT responses and Plus benefits when using Siri and Writing Tools."},kakaoDesc:{id:"IKXNCX",defaultMessage:"ChatGPT in KakaoTalk."},disconnect:{id:"connectorSettings.disconnectButton",defaultMessage:"Disconnect"},codexCLIDesc:{id:"DWVivD",defaultMessage:"Allow Codex CLI to use models from the API."}});function xp(){const{data:t}=ds(hu),e=t==null?void 0:t.items,n=e==null?void 0:e.filter(({type:c})=>c==="apple"),a=!!(n!=null&&n.length),o=e==null?void 0:e.filter(({type:c})=>c==="kakao_talk"),i=!!(o!=null&&o.length),l=e==null?void 0:e.filter(({type:c})=>c==="codex_cli"),d=!!(l!=null&&l.length);return s.jsxs(Ze,{title:s.jsx(p,v({},vi.secureSigninTitle)),description:s.jsx(p,pe(v({},vi.secureSigninDescription),{values:{learn_more_link:s.jsx("a",{href:"https://help.openai.com/en/collections/13193904-secure-sign-in",className:"underline",target:"_blank",rel:"noopener noreferrer",children:s.jsx(p,{id:"G/jd2T",defaultMessage:"Learn more"})})}})),children:[!a&&!i&&!d&&s.jsx("div",{className:"text-token-text-secondary bg-token-bg-tertiary my-4 rounded-xl p-4",children:s.jsx(p,{id:"5VTvRh",defaultMessage:"You havent used ChatGPT to sign into any websites or apps yet. Once you do, theyll show up here."})}),a&&s.jsx(up,{clientApplications:n}),i&&s.jsx(mp,{clientApplications:o}),d&&s.jsx(pp,{clientApplications:l})]})}const vi=Be({secureSigninTitle:{id:"wGZ2DC",defaultMessage:"Secure sign in with ChatGPT"},secureSigninDescription:{id:"mq87/x",defaultMessage:"Sign in to websites and apps across the internet with the trusted security of ChatGPT. {learn_more_link}"}}),yp=()=>{"use forget";const t=_e.c(20),{connectorConfig:e,isLoading:n}=lr();let a;t[0]!==e?(a=e.get(wt.GDRIVE),t[0]=e,t[1]=a):a=t[1];const o=a;let i;t[2]!==e?(i=e.get(wt.O365_PERSONAL),t[2]=e,t[3]=i):i=t[3];const l=i;let d;t[4]!==e?(d=e.get(wt.O365_BUSINESS),t[4]=e,t[5]=d):d=t[5];const c=d,r=!!(o!=null&&o.access_token),m=!!(l!=null&&l.access_token),g=!!(c!=null&&c.access_token);if(n||!(r||m||g))return null;let f;t[6]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(p,v({},sa.fileUploadsTitle)),t[6]=f):f=t[6];let h;t[7]!==o||t[8]!==r?(h=o&&r&&s.jsx(Pa,{entry:o,description:sa.googleDriveDesc}),t[7]=o,t[8]=r,t[9]=h):h=t[9];let _;t[10]!==m||t[11]!==l?(_=l&&m&&s.jsx(Pa,{entry:l,description:sa.o365Desc}),t[10]=m,t[11]=l,t[12]=_):_=t[12];let b;t[13]!==g||t[14]!==c?(b=c&&g&&s.jsx(Pa,{entry:c,description:sa.o365BusinessDesc}),t[13]=g,t[14]=c,t[15]=b):b=t[15];let j;return t[16]!==h||t[17]!==_||t[18]!==b?(j=s.jsx(Ze,{title:f,children:s.jsxs(s.Fragment,{children:[h,_,b]})}),t[16]=h,t[17]=_,t[18]=b,t[19]=j):j=t[19],j};function Pa(t){"use forget";const e=_e.c(18),{entry:n,description:a}=t,o=n.type;let i;e[0]!==o?(i=dp(o),e[0]=o,e[1]=i):i=e[1];const l=i,d=Y();let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=Ms("border-token-border-default bg-token-bg-primary shadow-xxs h-fit rounded-[10px] border-[0.5px] p-2"),e[2]=c):c=e[2];let r;e[3]!==l?(r=s.jsx("div",{className:c,children:s.jsx(l,{className:"icon-lg"})}),e[3]=l,e[4]=r):r=e[4];const m=n.type;let g;e[5]!==d||e[6]!==m?(g=Ya(m,d),e[5]=d,e[6]=m,e[7]=g):g=e[7];let u;e[8]!==a?(u=s.jsx(p,v({},a)),e[8]=a,e[9]=u):u=e[9];const f=!!n.access_token;let h;e[10]!==n||e[11]!==f?(h=s.jsx(Xf,{entry:n,isConnected:f,onDisconnect:bc,onConnect:bp,redirectUri:Qa}),e[10]=n,e[11]=f,e[12]=h):h=e[12];let _;return e[13]!==r||e[14]!==g||e[15]!==u||e[16]!==h?(_=s.jsx("div",{className:"border-token-border-light items-center border-b px-0.5 py-3 last-of-type:border-none",children:s.jsx(ks,{icon:r,title:g,description:u,statusIndicator:h})}),e[13]=r,e[14]=g,e[15]=u,e[16]=h,e[17]=_):_=e[17],_}function bp(){}const sa=Be({fileUploadsTitle:{id:"connectorSettings.fileUploadsTitle",defaultMessage:"File uploads"},googleDriveDesc:{id:"connectorSettings.googleDriveDesc.1",defaultMessage:"Upload Google Docs, Sheets, Slides and other files."},o365Desc:{id:"connectorSettings.o365Desc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint and other files."},o365BusinessDesc:{id:"connectorSettings.o365BusinessDesc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint, and other files, including those from SharePoint sites."}}),Mp=R(()=>L(()=>import("./nlj7ey81i8rm36n9.js"),__vite__mapDeps([29,1])),{loading:t=>K(t)}),Cp="https://platform.openai.com/docs/mcp#risks-and-safety",vn=Be({title:{id:"QvgpB4",defaultMessage:"Advanced settings"},developerModeTitle:{id:"4DDtEK",defaultMessage:"Developer mode"},developerModeDescription:{id:"Uo45Zz",defaultMessage:"Allows you to add unverified connectors that could modify or erase data permanently. Memory is disabled. Use at your own risk. <link>Learn more</link>"},developerModeDisabledByAdmin:{id:"1dOaHH",defaultMessage:"Your admin has not enabled developer mode."},backButton:{id:"2XH9oW",defaultMessage:"Back"}});function _p({onBack:t}){const e=ce(),n=Y(),a=ot(()=>Ns(e)),o=Bt(!0),i=ot(()=>cr(e)),l=ot(()=>Mc(e));return!i&&!a?null:s.jsx(Ze,{title:s.jsxs(te,{color:"ghost",size:"small",onClick:t,contentWrapperClassName:"gap-[6px]",className:"rounded-lg ps-0.5 pe-1.5",children:[s.jsx(Mp,{className:"icon icon-sm"}),s.jsx(p,v({},vn.backButton))]}),children:s.jsx(le,{children:s.jsx(ft,{label:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(p,v({},vn.developerModeTitle)),s.jsx(xu,{})]}),ariaLabel:n.formatMessage(vn.developerModeTitle),disabled:!l||o.isPending,toggleTooltip:l?void 0:n.formatMessage(vn.developerModeDisabledByAdmin),enabled:a,onChange:d=>{o.mutate({setting:ke.DeveloperMode,value:d})},description:s.jsx(p,pe(v({},vn.developerModeDescription),{values:{link:d=>s.jsx(wn,{href:Cp,openNewTab:!0,children:d})}}))})})})}const vp=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zu),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)}),jp=R(()=>L(()=>import("./jgtgxlzsiw2y9b3q.js"),__vite__mapDeps([30,1,15,16,14,17,31])).then(t=>t.GithubOnboardingModal)),Sp=({link:t,onDisableSync:e})=>{var q,Q,D;const n=ce(),a=Y(),o=Ja(),i=Cc(n),[l,d]=S.useState(""),[c,r]=S.useState(new Map),[m]=Bg(l,500),{data:g,isLoading:u}=ot(()=>dr.if$(n,o)),f=S.useMemo(()=>g==null?void 0:g.connection_statuses.find(F=>{var G,X;return((G=F==null?void 0:F.user_connection_details)==null?void 0:G.knowledge_connector_type)==="github"&&((X=F==null?void 0:F.user_connection_details)==null?void 0:X.backing_link_id)===t.id}),[g,t.id]),{data:h,isLoading:_,isFetchingNextPage:b,hasNextPage:j,fetchNextPage:y}=yu({enabled:!!(t&&f),debouncedSearchTerm:m,linkId:t.id}),{data:M,isLoading:C,refetch:k}=bu({enabled:!!((q=f==null?void 0:f.user_connection_details)!=null&&q.connection_instance_id),connectionInstanceId:(D=(Q=f==null?void 0:f.user_connection_details)==null?void 0:Q.connection_instance_id)!=null?D:""});S.useEffect(()=>{var F,G,X;if((F=M==null?void 0:M.sync_enabled_objects)!=null&&F.length){const B=(G=M==null?void 0:M.sync_enabled_objects)==null?void 0:G.filter($=>$.object_type==="repository");B!=null&&B.length&&r(new Map((X=B==null?void 0:B.map($=>{var H,J;return[Number($.object_id),{id:Number($.object_id),repository_full_name:(H=$.object_name)!=null?H:"",description:(J=$.object_description)!=null?J:"",is_code_search_indexed:!0}]}))!=null?X:[]))}},[M]);const{mutate:E,isPending:w}=lt({mutationFn:async()=>{var G;const F=(G=f==null?void 0:f.user_connection_details)==null?void 0:G.connection_instance_id;F&&await ra.user_connection_update_sync_configuration(F,{type:"GithubUserApiExtension",opted_in_repository_ids:Array.from(c.keys())})},onSuccess:()=>{k(),ws(n)}}),x=S.useCallback(()=>{var F;r(new Map(((F=M==null?void 0:M.sync_enabled_objects)!=null?F:[]).filter(G=>G.object_type==="repository").map(G=>{var X,B;return[Number(G.object_id),{id:Number(G.object_id),repository_full_name:(X=G.object_name)!=null?X:"",description:(B=G.object_description)!=null?B:"",is_code_search_indexed:!0}]})))},[M]),T=S.useMemo(()=>{var X,B;const F=(X=h==null?void 0:h.pages.flatMap($=>$.repos))!=null?X:[],G=(B=M==null?void 0:M.sync_enabled_objects)==null?void 0:B.filter($=>$.object_type==="repository");if(!m&&(G!=null&&G.length)){const $=new Map(F.map(V=>[Number(V.id),V])),H=new Set(F.map(V=>Number(V.id))),J=G.filter(V=>H.has(Number(V.object_id))).map(V=>$.get(Number(V.object_id))),W=G.filter(V=>!H.has(Number(V.object_id))).map(V=>{var se;return{id:Number(V.object_id),repository_full_name:(se=V.object_name)!=null?se:"",description:"",is_code_search_indexed:!0}}),de=F.filter(V=>!G.some(se=>Number(se.object_id)===Number(V.id)));return[...J,...W,...de]}return F},[h,m,M]),N=!!f&&(T.length>5||!!m),A=S.useCallback(F=>{r(F)},[]),P=S.useMemo(()=>{if(!f)return!1;if(!(M!=null&&M.sync_enabled_objects))return c.size>0;const F=new Set(M.sync_enabled_objects.filter(G=>G.object_type==="repository").map(G=>Number(G.object_id)));if(F.size!==c.size)return!0;for(const G of c.keys())if(!F.has(G))return!0;for(const G of F)if(!c.has(G))return!0;return!1},[c,M,f]),U=u||_||C;if(!o)return null;const I=s.jsx(te,{color:"secondary",disabled:i,onClick:()=>{nt(n,jp,{initialState:jn.SyncRepos,onClose:()=>{ws(n)}})},children:s.jsx(p,{id:"Dnyhgs",defaultMessage:"Choose repositories"})});return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-2 pt-5",children:s.jsx(Ze,{description:s.jsx(p,{id:"+8dStU",defaultMessage:"Syncing improves speed and quality, so select the repositories you use most. ChatGPT can still access repositories that arent synced."}),noBorder:!0,title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(p,{id:"JQCZHf",defaultMessage:"Synced repositories"}),f&&s.jsx(Dn,{connection:f,location:"user_settings"})]}),children:s.jsxs("div",{className:"mt-2 flex flex-col",children:[N&&s.jsx(oo,{ariaLabel:a.formatMessage({id:"D2Xhv1",defaultMessage:"Search repositories"}),autoComplete:"off",className:"mb-2",icon:vp,iconPosition:"left",name:"search-repos",onChange:F=>{d(F.target.value)},placeholder:a.formatMessage({id:"jYgjAb",defaultMessage:"Search repositories"})}),U||f?s.jsx(Fg,{allRepos:T,enableScroll:!1,fetchNextPage:y,hasNextPage:j,isFetchingNextPage:b,isLoading:U,searchTerm:l,onChange:A,selectedRepos:c}):s.jsxs("div",{className:"border-token-border-default flex items-center justify-between rounded-xl border-1 p-4",children:[s.jsx("div",{className:"text-token-text-tertiary text-xs",children:s.jsx(p,{id:"fwutvn",defaultMessage:"No repositories synced"})}),i?s.jsx(_c,{children:I}):I]})]})})}),P&&s.jsx("div",{className:"bg-token-bg-primary border-token-border-default sticky end-0 bottom-0 z-10 -mx-4 border-t-1 px-4 py-6",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(te,{color:"secondary",onClick:x,children:s.jsx(p,v({},Za.cancelButtonText))}),s.jsx(te,{color:"primary",loading:w,onClick:()=>{c.size===0?e():E()},children:s.jsx(p,{id:"4e7T8Q",defaultMessage:"Save"})})]})})]})},Ep=R(()=>L(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>K(t)}),Tp=R(()=>L(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([8,1])),{loading:t=>K(t)}),kp=R(()=>L(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([32,1])),{loading:t=>K(t)}),Np=R(()=>L(()=>import("./nlj7ey81i8rm36n9.js"),__vite__mapDeps([29,1])),{loading:t=>K(t)}),ia=Te[O.GITHUB_CONNECTOR],El=t=>{"use forget";var Us,Vs,gs,zs,Hs;const e=_e.c(131),{badge:n,connector:a,connectorId:o,connectorDisabled:i,connectorDisabledTooltip:l,link:d,icon:c,name:r,description:m,onBackClick:g,details:u,onConnectClick:f,onDisconnectClick:h,isConnecting:_,isDisconnecting:b,isDeleting:j,onBlockItems:y,onDelete:M,onDeleteSyncClick:C,onEnableSyncClick:k,reportEntity:E,onEditDescription:w,onEditLogo:x,syncProgress:T}=t,N=i===void 0?!1:i,A=u===void 0?[]:u,P=b===void 0?!1:b,U=j===void 0?!1:j,I=Y(),q=ce();let Q;e[0]!==q?(Q=rs(q),e[0]=q,e[1]=Q):Q=e[1];const D=Q,F=ce(),[G,X]=S.useState(!1);let B;e[2]!==F?(B=Oe(F,"4202324921"),e[2]=F,e[3]=B):B=e[3];const $=B,H=o===Te[O.SHAREPOINT_CONNECTOR];let J;e[4]!==H?(J={enabled:H},e[4]=H,e[5]=J):J=e[5];const{data:W}=On(J);let de;e[6]!==H||e[7]!==(W==null?void 0:W.connection_statuses)?(de=H&&!!(W!=null&&W.connection_statuses.some(Rp)),e[6]=H,e[7]=W==null?void 0:W.connection_statuses,e[8]=de):de=e[8];const V=de;let se,ae,Ne;if(e[9]!==a||e[10]!==d||e[11]!==f||e[12]!==h||e[13]!==F){let Tt;e[17]!==F?(Tt=()=>gr(F),e[17]=F,e[18]=Tt):Tt=e[18];const qt=jc(Tt),Ot=!!(d!=null?d:h);se=!!(f&&!Ot),ae=!!(h&&Ot),Ne=Pp({connector:a,account:qt}),e[9]=a,e[10]=d,e[11]=f,e[12]=h,e[13]=F,e[14]=se,e[15]=ae,e[16]=Ne}else se=e[14],ae=e[15],Ne=e[16];const Me=Ne;a==null||a.id;let Ae;e:{const Tt=(Us=a==null?void 0:a.id)!=null?Us:o;if(!Tt){Ae=null;break e}Ae="/admin/ca#drafts?publish=".concat(encodeURIComponent(Tt))}const ve=Ae,Le=!!h&&!ae||!!M||!!y||!!C||!!k||!!f&&!se||!!E&&$||!!w||!!x||o===ia;let je;e[19]!==F?(je=Oe(F,"2571214709"),e[19]=F,e[20]=je):je=e[20];const Ke=je;let Je;e[21]!==q?(Je=()=>eo(q),e[21]=q,e[22]=Je):Je=e[22];const{isLoading:et,data:tt}=ot(Je),Gs=tt!=null?tt:{},{disabledTools:z}=Gs,ue=qn(Gs,["disabledTools"]),Ie=z===void 0?[]:z,me=Et();let he;e[23]!==me?(he=async Tt=>{const{data:qt}=Tt;await me.cancelQueries({queryKey:["userContext"]});const Ot=me.getQueryData(["userContext"]);return me.setQueryData(["userContext"],ns=>v(v({},ns!=null?ns:{}),qt)),{prevData:Ot}},e[23]=me,e[24]=he):he=e[24];let xe;e[25]!==I||e[26]!==me||e[27]!==D?(xe=(Tt,qt,Ot)=>{Ot!=null&&Ot.prevData&&me.setQueryData(["userContext"],Ot.prevData),D.danger(I.formatMessage(ze.settingError),{toastId:"connector_details_listing_setting_error"})},e[25]=I,e[26]=me,e[27]=D,e[28]=xe):xe=e[28];let we;e[29]!==me?(we=()=>{me.invalidateQueries({queryKey:["userContext"]})},e[29]=me,e[30]=we):we=e[30];let $e;e[31]!==he||e[32]!==xe||e[33]!==we?($e={mutationFn:Bp,onMutate:he,onError:xe,onSettled:we},e[31]=he,e[32]=xe,e[33]=we,e[34]=$e):$e=e[34];const{isPending:ye,mutate:Fe}=lt($e),Z=Ap(o);let Ce;e[35]===Symbol.for("react.memo_cache_sentinel")?(Ce=mr("installations/select_target"),e[35]=Ce):Ce=e[35];const oe=Ce,ne=()=>{if(!Z)return;const Tt=Ie.includes(Z)?Ie.filter(qt=>qt!==Z):Array.from(new Set([...Ie,Z]));Fe({data:v({disabledTools:Tt},ue)})};let be;e[36]!==((Vs=a==null?void 0:a.supported_auth)==null?void 0:Vs.length)||e[37]!==o||e[38]!==f?(be=Tt=>{var qt,Ot;if(o){const ns={};(qt=a==null?void 0:a.supported_auth)!=null&&qt.length&&(ns.supports_mixed_auth=((Ot=a==null?void 0:a.supported_auth)==null?void 0:Ot.length)>1?"true":"false"),Sc(o,Ec.ConnectorSettingsConnectClick,ns)}return f==null?void 0:f(Tt)},e[36]=(gs=a==null?void 0:a.supported_auth)==null?void 0:gs.length,e[37]=o,e[38]=f,e[39]=be):be=e[39];const fe=be,Ue=!!(Ke&&Z);let Pe;e[40]!==o||e[41]!==q?(Pe=Ig(q,o),e[40]=o,e[41]=q,e[42]=Pe):Pe=e[42];const Se=Pe;let De;e[43]!==o||e[44]!==q?(De=!1,e[43]=o,e[44]=q,e[45]=De):De=e[45];const qe=De,Ye=T==null?void 0:T.is_syncing,ee=T==null?void 0:T.last_updated_at;let Qe,it;e[46]===Symbol.for("react.memo_cache_sentinel")?(Qe=s.jsx(Np,{className:"icon icon-sm"}),it=s.jsx(p,v({},ze.backButton)),e[46]=Qe,e[47]=it):(Qe=e[46],it=e[47]);let ht;e[48]!==g?(ht=s.jsx("div",{className:"h-header-height flex flex-shrink-0 items-center",children:s.jsxs(te,{color:"ghost",size:"small",onClick:g,contentWrapperClassName:"gap-[6px]",className:"rounded-lg ps-0.5 pe-1.5",children:[Qe,it]})}),e[48]=g,e[49]=ht):ht=e[49];let yt;e[50]!==r?(yt=s.jsx("div",{className:"text-lg font-semibold",children:r}),e[50]=r,e[51]=yt):yt=e[51];let bt;e[52]!==n||e[53]!==yt?(bt=s.jsxs("div",{className:"flex items-center gap-2",children:[yt,n]}),e[52]=n,e[53]=yt,e[54]=bt):bt=e[54];let Ct;e[55]!==m||e[56]!==I||e[57]!==Ye||e[58]!==ee||e[59]!==ae||e[60]!==(T==null?void 0:T.sync_progress)?(Ct=Ye&&ae?s.jsx(Wt,{label:I.formatMessage(ze.syncingTooltip,{syncProgress:Math.round(((zs=T==null?void 0:T.sync_progress)!=null?zs:0)*1e4)/100}),secondaryLabel:I.formatMessage(ze.syncingSecondaryTooltip),triggerAs:"div",children:s.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-2 font-medium",children:[s.jsx(p,v({},ze.syncingButton)),s.jsx(ur,{sizeOverride:18,percentage:((Hs=T==null?void 0:T.sync_progress)!=null?Hs:0)*100,className:"text-blue-400"})]})}):ee?s.jsx("span",{className:"text-token-text-tertiary",children:I.formatMessage(ze.lastSynced,{lastUpdatedAt:ee.toLocaleDateString()})}):s.jsx("span",{className:"text-token-text-tertiary",children:m}),e[55]=m,e[56]=I,e[57]=Ye,e[58]=ee,e[59]=ae,e[60]=T==null?void 0:T.sync_progress,e[61]=Ct):Ct=e[61];let _t;e[62]!==bt||e[63]!==Ct?(_t=s.jsxs("div",{className:"flex-1",children:[bt,Ct]}),e[62]=bt,e[63]=Ct,e[64]=_t):_t=e[64];let vt;e[65]!==l||e[66]!==I?(vt=l!=null?l:I.formatMessage(ze.connectorDisabled),e[65]=l,e[66]=I,e[67]=vt):vt=e[67];const At=!N||ae;let Rt;e[68]!==N||e[69]!==I||e[70]!==V||e[71]!==_||e[72]!==fe||e[73]!==se?(Rt=se&&(V?s.jsx(Wt,{label:I.formatMessage(ze.adminConnectedDescription),triggerAs:"div",children:s.jsx("div",{className:"text-token-text-secondary font-medium",children:s.jsx(p,v({},ze.connected))})}):s.jsx("div",{children:s.jsx(te,{onClick:fe,loading:_,disabled:N,children:s.jsx(p,v({},ze.connectButton))})})),e[68]=N,e[69]=I,e[70]=V,e[71]=_,e[72]=fe,e[73]=se,e[74]=Rt):Rt=e[74];let Yt;e[75]!==U||e[76]!==P||e[77]!==h||e[78]!==ae?(Yt=ae&&s.jsx("div",{children:s.jsx(te,{onClick:h,loading:P,color:"danger",disabled:U||P,children:s.jsx(p,v({},ze.disconnectButton))})}),e[75]=U,e[76]=P,e[77]=h,e[78]=ae,e[79]=Yt):Yt=e[79];let Gt;e[80]!==N||e[81]!==o||e[82]!==U||e[83]!==y||e[84]!==f||e[85]!==fe||e[86]!==M||e[87]!==C||e[88]!==h||e[89]!==w||e[90]!==x||e[91]!==k||e[92]!==ve||e[93]!==E||e[94]!==X||e[95]!==se||e[96]!==ae||e[97]!==Le||e[98]!==Me||e[99]!==$?(Gt=Le&&s.jsx("div",{children:s.jsxs(Re.Root,{children:[s.jsx(Re.BasicTrigger,{disabled:N,asChild:!0,children:se||ae?s.jsx(te,{color:"ghost",icon:kp}):s.jsx(te,{color:"secondary",disabled:N,children:s.jsx(p,v({},ze.manageDropdown))})}),s.jsx(Re.Portal,{children:s.jsxs(Re.Content,{size:"small",align:"end",children:[E&&$&&s.jsx(Re.Item,{onClick:()=>X(!0),children:s.jsx(p,v({},ze.reportButton))}),o===ia&&s.jsx(wn,{href:oe,openNewTab:!0,underline:!1,children:s.jsx(Re.Item,{children:s.jsx(p,v({},ze.settingsButton))})}),Me&&ve&&s.jsx(wn,{href:ve,openNewTab:!0,underline:!1,children:s.jsx(Re.Item,{children:s.jsx(p,v({},ze.publishButton))})}),!1,!1,!se&&f&&s.jsx(Re.Item,{onClick:fe,children:s.jsx(p,v({},ze.connectButton))}),k&&s.jsx(Re.Item,{onClick:k,children:s.jsx(p,v({},ze.enableSync))}),y&&s.jsx(Re.Item,{onClick:y,children:s.jsx(p,v({},ze.blockItems))}),C&&s.jsx(Re.Item,{onClick:C,children:s.jsx(p,v({},ze.disableSync))}),!ae&&h&&s.jsx(Re.Item,{onClick:h,color:"danger",children:s.jsx(p,v({},ze.disconnectButton))}),M&&s.jsx(Re.Item,{onClick:M,color:"danger",disabled:U,children:s.jsx(p,v({},ze.deleteButton))})]})})]})}),e[80]=N,e[81]=o,e[82]=U,e[83]=y,e[84]=f,e[85]=fe,e[86]=M,e[87]=C,e[88]=h,e[89]=w,e[90]=x,e[91]=k,e[92]=ve,e[93]=E,e[94]=X,e[95]=se,e[96]=ae,e[97]=Le,e[98]=Me,e[99]=$,e[100]=Gt):Gt=e[100];let It;e[101]!==Rt||e[102]!==Yt||e[103]!==Gt?(It=s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[Rt,Yt,Gt]}),e[101]=Rt,e[102]=Yt,e[103]=Gt,e[104]=It):It=e[104];let Kt;e[105]!==vt||e[106]!==At||e[107]!==It?(Kt=s.jsx(Wt,{label:vt,disabled:At,children:It}),e[105]=vt,e[106]=At,e[107]=It,e[108]=Kt):Kt=e[108];let Qt;e[109]!==c||e[110]!==_t||e[111]!==Kt?(Qt=s.jsxs("div",{className:"flex items-center gap-3 px-2 pt-2",children:[c,_t,Kt]}),e[109]=c,e[110]=_t,e[111]=Kt,e[112]=Qt):Qt=e[112];let Dt;e[113]!==o||e[114]!==d?(Dt=o===ia&&d&&s.jsx(Dp,{link:d}),e[113]=o,e[114]=d,e[115]=Dt):Dt=e[115];let $t;e[116]!==V?($t=V&&s.jsx(Ip,{}),e[116]=V,e[117]=$t):$t=e[117];const Ve=A.length>0&&s.jsx("div",{className:"px-2 pt-6",children:s.jsx(Ze,{title:s.jsx(p,v({},ze.information)),noBorder:!0,children:s.jsx("div",{className:"border-token-border-default flex flex-col gap-2 rounded-2xl border p-3",children:A.filter(Fp).map(Up)})})}),ct=(Ue||Se||qe)&&s.jsx("div",{className:"px-2 pt-6",children:s.jsxs(Ze,{title:s.jsx(p,v({},ze.preferences)),children:[Ue&&Z&&s.jsx(le,{children:s.jsx(ft,{label:d!=null?I.formatMessage(ze.allowUsingAutomatically):I.formatMessage(ze.recommendConnection),description:d!=null?I.formatMessage(ze.allowUsingAutomaticallyDescription,{connectorName:r}):I.formatMessage(ze.recommendConnectionDescription,{connectorName:r}),enabled:!Ie.includes(Z),isLoading:et||ye,onChange:ne})}),Se&&s.jsx(Dg,{connectorId:o,connectorName:r}),!1]})});let jt;e[118]!==E||e[119]!==X||e[120]!==$||e[121]!==G?(jt=G&&E&&$&&s.jsx(wp,{reportEntity:E,onClose:()=>X(!1)}),e[118]=E,e[119]=X,e[120]=$,e[121]=G,e[122]=jt):jt=e[122];let vs;return e[123]!==ht||e[124]!==Qt||e[125]!==Dt||e[126]!==$t||e[127]!==Ve||e[128]!==ct||e[129]!==jt?(vs=s.jsxs(s.Fragment,{children:[ht,Qt,Dt,$t,Ve,ct,jt]}),e[123]=ht,e[124]=Qt,e[125]=Dt,e[126]=$t,e[127]=Ve,e[128]=ct,e[129]=jt,e[130]=vs):vs=e[130],vs};function wp({reportEntity:t,onClose:e}){var d;const n=ce(),a=Y(),{data:o}=Mu(n,t.entityType),i=Cu(n,a,t.id,t.entityType);if(o==null)return null;const l=(d=t.title)!=null?d:a.formatMessage(ze.reportModalTitle);return s.jsx(_u,{reasons:o.reasons,submitReport:i,title:l,onClose:e,header:o.header,subHeader:o.header_explanation})}function Pp({connector:t,account:e}){const n=(e==null?void 0:e.isAdminOfAccount())||(e==null?void 0:e.isOwnerOfAccount());return!!(t&&t.connector_type!=="SERVICE"&&t.status==="ONLY_ME"&&n&&!(e!=null&&e.isPersonalAccount()))}function Ap(t){switch(t){case Te[O.GMAIL_CONNECTOR]:return"gmail";case Te[O.GCAL_CONNECTOR]:return"gcal";case Te[O.GOOGLE_CONTACTS_CONNECTOR]:return"gcontacts";default:return null}}const Ip=()=>{"use forget";const t=_e.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx("div",{className:"px-2 pt-6",children:s.jsxs("div",{className:"border-token-border-default flex flex-row gap-2 rounded-2xl border p-3",children:[s.jsx(Tp,{className:"icon-md"}),s.jsx(p,v({},ze.adminConnectedDescription))]})}),t[0]=e):e=t[0],e},Dp=({link:t})=>{var i;const e=mr("installations/select_target"),{data:n,isLoading:a}=$r({linkId:(i=t==null?void 0:t.id)!=null?i:""}),o=!n;return a||!o?null:s.jsx("div",{className:"px-2 pt-6",children:s.jsx("div",{className:"border-token-border-default flex flex-col gap-2 rounded-2xl border p-3",children:s.jsxs("div",{className:"flex justify-between gap-3",children:[s.jsx(p,v({},ze.githubInstallationAlert)),s.jsxs(te,{color:"primary",contentWrapperClassName:"gap-1.5",onClick:()=>{window.open(e,"_blank")},children:[s.jsx(p,v({},ze.chooseRepos)),s.jsx(Ep,{className:"icon"})]})]})})})};function Op(t,e){return null}const Ca=i=>{var l=i,{connector:t,onEditDescription:e,onEditLogo:n,syncProgress:a}=l,o=qn(l,["connector","onEditDescription","onEditLogo","syncProgress"]);var m;const d=Y(),c=(m=Op())!=null?m:void 0,r=t.status==="DISABLED_BY_ADMIN"||!!c;return S.useEffect(()=>{Ge.logEventWithStatsig("Ecosystem app: Connector settings opened","chatgpt_web_ecosystem_connector_settings_opened",{connector_id:t.id})},[t.id]),s.jsx(El,v({connectorId:t.id,connector:t,icon:s.jsx(Xs,{connector:t,size:"large",className:"border-token-border-default bg-token-bg-primary shadow-xxs max-h-fit rounded-2xl border-[.5px] bg-clip-padding p-2"}),name:Qs(t.name,d),badge:s.jsx(yn,{connector:t}),description:t.description,connectorDisabled:r,connectorDisabledTooltip:c,onEditDescription:e,onEditLogo:n,syncProgress:a},o))},Tl=({connector:t,link:e,onBackClick:n,onDisconnectClick:a,onConnectClick:o,isConnecting:i,isDisconnecting:l,isDeleting:d,isRefreshingActions:c,isTogglingAction:r,onDelete:m,onRefreshActions:g,onToggleAction:u,onEditDescription:f,onEditLogo:h,syncProgress:_})=>{const b=ce(),j=b&&Oe(b,"4026425501"),y=ml(b),M=kt(),C=Y(),k=Ja(),E=ot(()=>Ns(b)),w=Pn(e),x=S.useMemo(()=>w?[...gn(t,C,{isDeveloperMode:E,linkAuthType:e.auth_type,ecosystemDebugShowAppUrlsInSettings:j,debugShowLandingPage:y})]:[{title:C.formatMessage(ze.connectedOn),value:new Date(e.created_at).toLocaleString([],{year:"numeric",month:"short",day:"numeric"})},...gn(t,C,{isDeveloperMode:E,linkAuthType:e.auth_type,ecosystemDebugShowAppUrlsInSettings:j,debugShowLandingPage:y})],[t,e.created_at,e.auth_type,C,E,j,w,y]),[T,N]=S.useState(!1),{isLoading:A,isEnabled:P}=vc(),I=!(M!=null&&M.isPersonalAccount())&&(M==null?void 0:M.planType)!==ut.SELF_SERVE_BUSINESS&&(!P||A),q=t.id===ia&&k,Q=ot(()=>dr(b).data),D=S.useMemo(()=>{var G;return!((G=Q==null?void 0:Q.connection_statuses)!=null&&G.length)||!(e!=null&&e.id)?null:Q.connection_statuses.find(X=>(e==null?void 0:e.id)===X.user_connection_details.backing_link_id)},[Q,e==null?void 0:e.id]),F=S.useCallback(async()=>{var G;(G=D==null?void 0:D.user_connection_details)!=null&&G.connection_instance_id&&(M!=null&&M.isPersonalAccount()?await ra.user_delete_sync(e.id):await ra.user_disconnect(D.user_connection_details.connection_instance_id),globalThis.setTimeout(()=>{ws(b)},500))},[b,M,D==null?void 0:D.user_connection_details.connection_instance_id,e.id]);return s.jsxs(s.Fragment,{children:[s.jsx(Ca,{connector:t,badge:s.jsx(yn,{connector:t}),link:e,onBackClick:n,details:x,onEditDescription:f,reportEntity:{id:t.id,entityType:Xa.Connector},onDeleteSyncClick:D?()=>N(!0):void 0,onDisconnectClick:Pn(e)?void 0:a,onConnectClick:o,isConnecting:i,isDisconnecting:l,isDeleting:d,onDelete:m,onEditLogo:h,syncProgress:_}),q&&!I&&s.jsx(Sp,{link:e,onDisableSync:()=>N(!0)}),s.jsx(gl,{connector:t,link:e,isRefreshingActions:c,onRefreshActions:g,onToggleAction:u,isTogglingAction:r}),s.jsx(kl,{connector:t,onDisableSync:F,isOpen:T,onClose:()=>N(!1)})]})},kl=({connector:t,onDisableSync:e,isOpen:n,onClose:a})=>{const o=Y(),i=gt(),[l,d]=S.useState(!1),[c,r]=S.useState(!1),m=S.useCallback(async()=>{try{d(!0),await e(),a(),d(!1),i.success(o.formatMessage({id:"OgQmj5",defaultMessage:"Sync disabled"}))}catch(g){i.danger(o.formatMessage({id:"pg29j7",defaultMessage:"Failed to disable sync"}))}finally{d(!1)}},[e,a,o,i]);return s.jsxs(pt,{className:"w-[400px] p-2",isOpen:n,onClose:a,testId:"modal-disable-sync",children:[s.jsx("div",{className:"flex justify-end pb-6",children:s.jsx($a,{onClick:a})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"flex items-center gap-2.5",children:s.jsx(Xs,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"})}),s.jsx("div",{className:"pt-4 text-center text-2xl font-semibold",children:s.jsx(p,pe(v({},ze.disableSyncModalTitle),{values:{connector:t.name}}))}),s.jsx("div",{className:"text-md text-token-text-secondary pt-2 text-center text-sm",children:s.jsx(p,v({},ze.disableSyncModalDescription))}),s.jsx(Kr,{id:"disable-segment-replacement",className:"rounded-xl",label:o.formatMessage(ze.disableSyncModalCheckboxLabel),labelClassName:"font-medium",checked:c,onChange:()=>r(!c),containerClassName:"col-span-3 w-full p-4 border border-gray-300 rounded-xl mt-5 gap-4 text-sm"}),s.jsxs("div",{className:"flex w-full flex-row justify-evenly gap-2 pt-6",children:[s.jsx(te,{onClick:a,color:"secondary",size:"large",className:"flex-1",children:s.jsx(p,v({},Za.cancelButtonText))}),s.jsx(te,{disabled:!c||l,loading:l,onClick:m,color:"danger",size:"large",className:"flex-1",children:s.jsx(p,v({},ze.disableSync))})]})]})]})},Lp=({connector:t,onBackClick:e,onDisconnectClick:n,internalKnowledgeConfig:a,onConnectClick:o})=>{const i=ce(),l=i&&Oe(i,"4026425501"),d=Y(),c=ot(()=>Ns(i)),r=S.useMemo(()=>gn(t,d,{isDeveloperMode:c,ecosystemDebugShowAppUrlsInSettings:l}),[t,d,c,l]),m=a.user_connection_details.knowledge_connector_type!=="google_drive_dwd";return s.jsx(Ca,{connector:t,badge:s.jsx(yn,{connector:t}),onBackClick:e,details:r,onDisconnectClick:m?n:void 0,onConnectClick:o})},Nl=({connector:t,onBackClick:e,onConnectClick:n,isConnecting:a,isDisconnecting:o,isDeleting:i,onDelete:l,onEditDescription:d,onEditLogo:c})=>{const r=Y(),m=ce(),g=ot(()=>Ns(m)),u=m&&Oe(m,"4026425501"),f=ml(m),h=S.useMemo(()=>[...t.created_at?[{title:r.formatMessage(ze.createdAt),value:new Date(t.created_at).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}]:[],...gn(t,r,{isDeveloperMode:g,ecosystemDebugShowAppUrlsInSettings:u,debugShowLandingPage:f})],[t,r,g,u,f]);return s.jsxs(s.Fragment,{children:[s.jsx(Ca,{connector:t,badge:s.jsx(yn,{connector:t}),onBackClick:e,details:h,onConnectClick:n,isConnecting:a,isDisconnecting:o,isDeleting:i,onDelete:l,reportEntity:{id:t.id,entityType:Xa.Connector},onEditDescription:d,onEditLogo:c}),s.jsx(gl,{connector:t})]})};function Rp(t){return t.user_connection_details.connection_type==="sharepoint_admin_sync_connector"&&t.user_connection_details.auth_status==="admin_connected"}async function Bp(t){const{data:e}=t;return await fr(e)}function Fp(t){return t.value!=null}function Up(t){return s.jsxs("div",{className:"flex justify-between gap-3",children:[s.jsx("span",{className:"text-token-text-tertiary text-nowrap",children:t.title}),typeof t.value=="string"?s.jsx("span",{className:"no-scrollbar overflow-x-scroll whitespace-nowrap",children:t.value}):s.jsx("span",{className:"truncate",children:t.value})]},t.title)}const Gp=t=>{"use forget";var de,V;const e=_e.c(49),{canEditDescription:n,connector:a,refetchConnectors:o}=t,i=Y(),l=gt(),[d,c]=S.useState(!1),[r,m]=S.useState(""),[g,u]=S.useState("");let f,h;e[0]!==a||e[1]!==d?(f=()=>{var se,ae;if(!a){m(""),u("");return}if(!d){const Ne=a;m((se=a.description)!=null?se:""),u((ae=Ne.model_description)!=null?ae:"")}},h=[a,d],e[0]=a,e[1]=d,e[2]=f,e[3]=h):(f=e[2],h=e[3]),S.useEffect(f,h);let _;e[4]!==r?(_=r.trim(),e[4]=r,e[5]=_):_=e[5];const b=_;let j;e[6]!==g?(j=g.trim(),e[6]=g,e[7]=j):j=e[7];const y=j,M=(de=a==null?void 0:a.description)!=null?de:"";let C;e[8]!==M?(C=M.trim(),e[8]=M,e[9]=C):C=e[9];const k=C,E=(V=a==null?void 0:a.model_description)!=null?V:"";let w;e[10]!==E?(w=E.trim(),e[10]=E,e[11]=w):w=e[11];const x=w,T=b!==k,N=y!==x,A=T||N;let P;e[12]!==i||e[13]!==o||e[14]!==l?(P=async()=>{await o(),l.success(i.formatMessage(ji.updateDescriptionSuccess)),c(!1)},e[12]=i,e[13]=o,e[14]=l,e[15]=P):P=e[15];let U;e[16]!==l?(U=se=>{l.danger(ji.updateDescriptionError,{error:se})},e[16]=l,e[17]=U):U=e[17];let I;e[18]!==U||e[19]!==P?(I={mutationFn:Vp,onSuccess:P,onError:U},e[18]=U,e[19]=P,e[20]=I):I=e[20];const q=lt(I),Q=q.isPending;let D;e[21]!==n||e[22]!==a?(D=()=>{var ae,Ne;if(!n||!a)return;const se=a;m((ae=a.description)!=null?ae:""),u((Ne=se.model_description)!=null?Ne:""),c(!0)},e[21]=n,e[22]=a,e[23]=D):D=e[23];const F=D;let G;e[24]!==a?(G=()=>{var se,ae;if(c(!1),a){const Ne=a;m((se=a.description)!=null?se:""),u((ae=Ne.model_description)!=null?ae:"")}else m(""),u("")},e[24]=a,e[25]=G):G=e[25];const X=G;let B;e[26]!==a||e[27]!==A||e[28]!==T||e[29]!==N||e[30]!==Q||e[31]!==b||e[32]!==y||e[33]!==q?(B=()=>{!a||!A||Q||q.mutate({connectorId:a.id,description:b,modelDescription:y,updateDescription:T,updateModelDescription:N})},e[26]=a,e[27]=A,e[28]=T,e[29]=N,e[30]=Q,e[31]=b,e[32]=y,e[33]=q,e[34]=B):B=e[34];const $=B;let H;e[35]!==n||e[36]!==a||e[37]!==r||e[38]!==X||e[39]!==$||e[40]!==A||e[41]!==i||e[42]!==d||e[43]!==Q||e[44]!==g?(H=null,e[35]=n,e[36]=a,e[37]=r,e[38]=X,e[39]=$,e[40]=A,e[41]=i,e[42]=d,e[43]=Q,e[44]=g,e[45]=H):H=e[45];const J=H;let W;return e[46]!==J||e[47]!==F?(W={descriptionModal:J,openDescriptionModal:F},e[46]=J,e[47]=F,e[48]=W):W=e[48],W},ji=Be({editDescription:{id:"8KkNYS",defaultMessage:"Edit connector descriptions"},saveDescription:{id:"b728ms",defaultMessage:"Save"},descriptionFieldLabel:{id:"G4TQb4",defaultMessage:"Connector description"},descriptionPlaceholder:{id:"ju5+Yf",defaultMessage:"Describe what this connector does"},modelDescriptionFieldLabel:{id:"5YP4M7",defaultMessage:"Model description"},updateDescriptionSuccess:{id:"4TAQ6T",defaultMessage:"Descriptions saved"},updateDescriptionError:{id:"AUTu7I",defaultMessage:"Error saving descriptions"}});async function Vp(t){const{connectorId:e,description:n,modelDescription:a,updateDescription:o,updateModelDescription:i}=t,l=[];o&&l.push(Tc(e,n)),i&&l.push(kc(e,a)),l.length!==0&&await Promise.all(l)}const zp=t=>new Promise((e,n)=>{const a=new FileReader;a.onloadend=()=>{const o=a.result;if(typeof o!="string"){n(new Error("Failed to read file as data URL"));return}e(o)},a.onerror=n,a.readAsDataURL(t)}),Hp=t=>{"use forget";var X;const e=_e.c(46),{canEditLogo:n,connector:a,refetchConnectors:o,refetchLinks:i}=t,l=Y(),d=gt(),[c,r]=S.useState(!1),[m,g]=S.useState(null),[u,f]=S.useState(null),h=S.useRef(null);let _,b;e[0]!==u?(_=()=>()=>{u&&URL.revokeObjectURL(u)},b=[u],e[0]=u,e[1]=_,e[2]=b):(_=e[1],b=e[2]),S.useEffect(_,b);let j;e[3]!==u?(j=()=>{u&&URL.revokeObjectURL(u),f(null),g(null)},e[3]=u,e[4]=j):j=e[4];const y=j;let M;e[5]!==n||e[6]!==y||e[7]!==a?(M=()=>{!n||!a||(y(),r(!0))},e[5]=n,e[6]=y,e[7]=a,e[8]=M):M=e[8];const C=M;let k;e[9]!==y?(k=()=>{y(),r(!1)},e[9]=y,e[10]=k):k=e[10];const E=k;let w;if(e[11]!==u||e[12]!==d){const B=$=>{if($.size>Og){d.danger(js.logoTooLarge);return}u&&URL.revokeObjectURL(u),g($),f(URL.createObjectURL($))};w=$=>{var J;const H=(J=$.target.files)==null?void 0:J[0];H&&B(H),h.current&&(h.current.value="")},e[11]=u,e[12]=d,e[13]=w}else w=e[13];const x=w;let T;e[14]!==a||e[15]!==o||e[16]!==i?(T=async B=>{const{logoData:$}=B;if(!a)throw new Error("Connector not found");await Nc(a.id,$),await Promise.all([o(),i()])},e[14]=a,e[15]=o,e[16]=i,e[17]=T):T=e[17];let N;e[18]!==E||e[19]!==l||e[20]!==d?(N=()=>{d.success(l.formatMessage(js.updateLogoSuccess)),E()},e[18]=E,e[19]=l,e[20]=d,e[21]=N):N=e[21];let A;e[22]!==d?(A=B=>{d.danger(js.updateLogoError,{error:B})},e[22]=d,e[23]=A):A=e[23];let P;e[24]!==T||e[25]!==N||e[26]!==A?(P={mutationFn:T,onSuccess:N,onError:A},e[24]=T,e[25]=N,e[26]=A,e[27]=P):P=e[27];const U=lt(P);let I;e[28]!==m||e[29]!==d||e[30]!==U?(I=async()=>{if(!(!m||U.isPending))try{const B=await zp(m);await U.mutateAsync({logoData:B})}catch(B){const $=B;d.danger(js.updateLogoError,{error:$})}},e[28]=m,e[29]=d,e[30]=U,e[31]=I):I=e[31];const q=I,Q=(X=u!=null?u:a==null?void 0:a.logo_url)!=null?X:void 0;let D;e[32]!==n||e[33]!==a||e[34]!==E||e[35]!==x||e[36]!==q||e[37]!==l||e[38]!==c||e[39]!==m||e[40]!==Q||e[41]!==U?(D=n&&a?s.jsx(pt,{isOpen:c,onClose:E,showCloseButton:!0,type:"success",className:"max-w-[360px]",testId:"modal-update-connector-logo",title:s.jsx(p,v({},js.editLogoModalTitle)),children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"border-token-border-default bg-token-bg-primary flex h-20 w-20 items-center justify-center overflow-hidden rounded-2xl border p-2",children:Q?s.jsx("img",{src:Q,alt:l.formatMessage(js.logoPreviewAlt),className:"h-full w-full object-cover"}):s.jsx(Xs,{connector:a,size:"large",className:"h-full w-full"})}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[s.jsx(p,v({},js.editLogoModalDescription)),s.jsxs("div",{children:[s.jsx("input",{ref:h,type:"file",accept:"image/*",className:"hidden",onChange:x,disabled:U.isPending}),s.jsx(te,{color:"secondary",size:"small",onClick:()=>{var B;return(B=h.current)==null?void 0:B.click()},disabled:U.isPending,children:s.jsx(p,v({},js.logoUploadCta))})]}),m&&s.jsx("span",{className:"text-token-text-secondary text-xs",children:m.name})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(te,{color:"ghost",onClick:E,disabled:U.isPending,children:s.jsx(p,v({},Za.cancelButtonText))}),s.jsx(te,{onClick:q,loading:U.isPending,disabled:!m||U.isPending,children:s.jsx(p,v({},js.saveLogo))})]})]})}):null,e[32]=n,e[33]=a,e[34]=E,e[35]=x,e[36]=q,e[37]=l,e[38]=c,e[39]=m,e[40]=Q,e[41]=U,e[42]=D):D=e[42];const F=D;let G;return e[43]!==C||e[44]!==F?(G={logoModal:F,openLogoModal:C},e[43]=C,e[44]=F,e[45]=G):G=e[45],G},js=Be({logoTooLarge:{id:"32+ZLw",defaultMessage:"Logo is too large"},editLogoModalTitle:{id:"6wYY0P",defaultMessage:"Update connector logo"},editLogoModalDescription:{id:"diNS5p",defaultMessage:"Upload a JPG or PNG under 5MB."},logoUploadCta:{id:"msWUua",defaultMessage:"Choose image"},logoPreviewAlt:{id:"w8X79n",defaultMessage:"Selected connector logo preview"},saveLogo:{id:"RQ6oQW",defaultMessage:"Save"},updateLogoSuccess:{id:"tkukWJ",defaultMessage:"Connector logo updated"},updateLogoError:{id:"ywBEC5",defaultMessage:"Couldn't update connector logo"}}),Si=R(()=>L(()=>import("./e2n6syult3e6hs2j.js"),__vite__mapDeps([24,1])),{loading:t=>K(t)}),Wp=R(()=>L(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([27,1])),{loading:t=>K(t)}),wl=({onBackClick:t,onDisconnectClick:e,fileUploadConfig:n,onConnectClick:a,connector:o})=>{const i=Y(),l=Ya(n.type,i),{description:d,Icon:c}=Kp[n.type],r=ce(),m=ot(()=>Ns(r)),g=r&&Oe(r,"4026425501"),u=o?gn(o,i,{isDeveloperMode:m,ecosystemDebugShowAppUrlsInSettings:g}):void 0;return s.jsx(El,{icon:s.jsx("span",{className:"border-token-border-default bg-token-bg-primary shadow-xxs max-h-fit rounded-2xl border-[0.5px] bg-clip-padding p-2",children:s.jsx(c,{className:"h-10 w-10"})}),name:l,description:i.formatMessage(d),onBackClick:t,details:u,onDisconnectClick:e,onConnectClick:a})},Aa=Be({o365Desc:{id:"connectorSettings.o365Desc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint and other files."},o365BusinessDesc:{id:"connectorSettings.o365BusinessDesc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint, and other files, including those from SharePoint sites."},gdriveDesc:{id:"HIdrop",defaultMessage:"Search and reference files from your Drive."}}),Kp={[wt.O365_PERSONAL]:{description:Aa.o365Desc,Icon:Si},[wt.O365_BUSINESS]:{description:Aa.o365BusinessDesc,Icon:Si},[wt.GDRIVE]:{description:Aa.gdriveDesc,Icon:Wp}},Ha=R(()=>L(()=>import("./ffrotvb922yxp30i.js"),__vite__mapDeps([33,1])),{loading:t=>K(t)}),$p=R(()=>L(()=>import("./nlj7ey81i8rm36n9.js"),__vite__mapDeps([29,1])),{loading:t=>K(t)}),Pl=t=>{"use forget";const e=_e.c(2),{children:n}=t;let a;return e[0]!==n?(a=s.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary my-0.5 inline-block rounded-md px-1.5 py-0.5 text-xs",children:n}),e[0]=n,e[1]=a):a=e[1],a},qp=t=>{"use forget";const e=_e.c(9),{internalKnowledgeConfig:n}=t,a=Y();let o;e[0]!==a?(o=a.formatMessage(Ht.sync),e[0]=a,e[1]=o):o=e[1];let i;e[2]!==o?(i=s.jsx(Pl,{children:o}),e[2]=o,e[3]=i):i=e[3];let l;e[4]!==n?(l=s.jsx(Dn,{connection:n,location:"user_settings"}),e[4]=n,e[5]=l):l=e[5];let d;return e[6]!==i||e[7]!==l?(d=s.jsxs("div",{className:"flex items-center gap-1",children:[i,l]}),e[6]=i,e[7]=l,e[8]=d):d=e[8],d},Al=(t,e)=>{const n=ce(),{refetch:a}=lr();return async()=>{try{await Xe.safeDelete("/connectors/user_setting/{connector_name}",{parameters:{path:{connector_name:t}}}),e==null||e()}catch(o){rs(n).danger(Ht.disconnectError,{error:o})}finally{a()}}},Yp=()=>{const t=ce(),{refetch:e}=On();return async n=>{try{await ra.user_disconnect(n)}catch(a){rs(t).danger(Ht.disconnectError,{error:a})}finally{e()}}},Qp=({connector:t,links:e,removeConnectorId:n,onLinkClick:a,onAddClick:o,additionalLinks:i})=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"min-h-header-height flex items-center justify-between",children:[s.jsx(te,{color:"ghost",onClick:n,icon:$p,children:s.jsx(p,v({},Ht.backButton))}),o&&s.jsx(te,{color:"secondary",onClick:o,children:s.jsx(p,v({},Ht.addButton))})]}),s.jsxs("div",{className:"pt-2",children:[e.map(l=>s.jsx(Jp,{link:l,onLinkClick:a,connector:t},l.id)),i]})]}),Jp=({link:t,onLinkClick:e,connector:n})=>{var a,o,i,l;return s.jsx(le,{children:s.jsx("button",{className:"w-full",onClick:()=>e(t.id),children:s.jsx("div",{className:"px-3 pt-3 pb-1",children:s.jsx(ks,{icon:s.jsx(la,{connector:n}),title:(l=(i=(a=t.owner_profile)==null?void 0:a.email)!=null?i:(o=t.owner_profile)==null?void 0:o.name)!=null?l:t.name,statusIndicator:s.jsx(Ha,{className:"icon"})})})})},t.id)},Zp=({connector:t,platformLink:e})=>{var x,T,N;const n=ce(),a=Y(),o=kt(),i=Js(),l=As(),d=pr(),c=ot(()=>Ns(n)),r=Oc(),{mutateAsync:m}=Rn(),g=gt(),[u,f]=S.useState(!1),[h,_]=S.useState(!1),{internalKnowledgeConfigs:b}=Ln(),y=Pn(e)?void 0:()=>{d(e.id,()=>{g.success(a.formatMessage(Ht.disconnectSuccess,{connector:Qs(t.name,a)})),l(),ws(n)},rt.CONNECTOR_SETTING)},M=S.useMemo(()=>!(b!=null&&b.length)||!(e!=null&&e.id)?null:b.find(A=>(e==null?void 0:e.id)===A.user_connection_details.backing_link_id),[b,e==null?void 0:e.id]),C=async()=>{await r(e.id)},k=n&&Oe(n,"4026425501"),E=S.useMemo(()=>e?[{title:a.formatMessage(Ht.connectedOn),value:new Date(e.created_at).toLocaleString([],{year:"numeric",month:"short",day:"numeric"})},...gn(t,a,{isDeveloperMode:c,linkAuthType:e.auth_type,ecosystemDebugShowAppUrlsInSettings:k})]:[],[e,a,t,c,k]),w=S.useMemo(()=>{if(!M)return;const A=M.user_connection_details.knowledge_connector_type;if(A)return A==="slack"?"synced_channel":"synced_object"},[M]);return s.jsxs(s.Fragment,{children:[s.jsx(Ca,{badge:M?s.jsx(Dn,{connection:M,location:"user_settings"}):void 0,connector:t,onBackClick:()=>l(),details:E,reportEntity:{id:t.id,entityType:Xa.Connector},onBlockItems:M&&i?()=>f(!0):void 0,onDisconnectClick:y,onDeleteSyncClick:M?()=>_(!0):void 0,onEnableSyncClick:M||!i?void 0:()=>{Ge.logEventWithStatsig("Connectors - Upgrade Personal Google Drive","chatgpt_connectors_upgrade_personal_google_drive_clicked"),m({link:e})}}),s.jsx(kl,{connector:t,onDisableSync:C,isOpen:h,onClose:()=>_(!1)}),w&&s.jsx(Ug,{accountId:(x=o==null?void 0:o.id)!=null?x:"",connectionId:(N=(T=M==null?void 0:M.user_connection_details)==null?void 0:T.connection_instance_id)!=null?N:"",isOpen:u,objectType:w,onClose:()=>f(!1)})]})},Xp=({onAddClick:t})=>{var T;const e=ce(),n=Y(),a=kt(),o=Js(),i=!!(a!=null&&a.isPersonalAccount()&&o),l=ot(()=>Ba(e,{productSku:rt.CONNECTOR_SETTING})),d=Bs({fetchValidLinksOnly:!0,productSku:rt.CONNECTOR_SETTING}),c=(T=l.data)==null?void 0:T.find(N=>N.id===is),r=S.useMemo(()=>{var N;return(N=d.connectorLinks.get(is))!=null?N:[]},[d.connectorLinks]),m=As(),g=pr(),u=Yp(),f=Al(wt.GDRIVE),{internalKnowledgeConfigs:h,fileUploadConfig:_,isLoading:b}=Ln(),j=S.useMemo(()=>{var N;return(N=h==null?void 0:h.filter(A=>A.user_connection_details.auth_status!=="not_connected"))!=null?N:[]},[h]),[y,M]=S.useState(null),C=(_!=null&&_.access_token?1:0)+(a!=null&&a.isPersonalAccount()?0:j.length)+r.length,[k]=S.useState(C),E=S.useMemo(()=>!!h&&!i&&h.length-j.length>0||r.length===0,[h,i,j.length,r.length]),w=S.useMemo(()=>k>1?y:_!=null&&_.access_token?{type:"file_uploads"}:a!=null&&a.isPersonalAccount()&&r.length>0?{type:"upgradable_platform_connector",link:r[0]}:j.length>0?{type:"internal_knowledge",config:j[0]}:r.length>0?{type:"platform_connector",link:r[0]}:null,[k,_==null?void 0:_.access_token,a,r,j,y]);if(l.isFetching||d.isLoading||b)return s.jsx("div",{className:"flex justify-center",children:s.jsx(Ut,{})});if(l.error||d.error||!c)return m(),null;if(C===0)return s.jsx(Nl,{connector:c,onBackClick:()=>m(),onConnectClick:t});if(!w){const N=A=>{const P=r.find(U=>U.id===A);P&&(a!=null&&a.isPersonalAccount()?M({type:"upgradable_platform_connector",link:P}):M({type:"platform_connector",link:P}))};return s.jsx(Qp,{connector:c,links:r,removeConnectorId:()=>m(),onLinkClick:N,onAddClick:E?t:void 0,additionalLinks:s.jsxs(s.Fragment,{children:[!(a!=null&&a.isPersonalAccount())&&j.map(A=>s.jsx(le,{children:s.jsx("button",{className:"w-full",onClick:()=>M({type:"internal_knowledge",config:A}),children:s.jsx("div",{className:"px-3 pt-3 pb-1",children:s.jsx(ks,{icon:s.jsx(la,{connector:c}),title:A.connection_display_info.display_name,description:s.jsx(qp,{internalKnowledgeConfig:A}),statusIndicator:s.jsx(Ha,{className:"icon"})})})})},A.user_connection_details.connection_instance_id)),!!(_!=null&&_.access_token)&&s.jsx(le,{children:s.jsx("button",{className:"w-full",onClick:()=>M({type:"file_uploads"}),children:s.jsx("div",{className:"px-3 pt-3 pb-1",children:s.jsx(ks,{icon:s.jsx(la,{connector:c}),title:_.name,description:s.jsx(Pl,{children:n.formatMessage(Ht.fileUploads)}),statusIndicator:s.jsx(Ha,{className:"icon"})})})})})]})})}const x=()=>{y?M(null):m()};switch(w.type){case"platform_connector":{const A=Pn(w.link)?void 0:()=>{g(w.link.id,()=>{rs(e).success(n.formatMessage(Ht.disconnectSuccess,{connector:Qs(c.name,n)})),M(null)},rt.CONNECTOR_SETTING)};return s.jsx(Tl,{connector:c,onBackClick:x,link:w.link,onDisconnectClick:A,onConnectClick:E?t:void 0})}case"upgradable_platform_connector":return s.jsx(Zp,{connector:c,platformLink:w.link});case"internal_knowledge":{const N=async()=>{await u(w.config.user_connection_details.connection_instance_id),M(null)};return s.jsx(Lp,{connector:c,onBackClick:x,onDisconnectClick:N,internalKnowledgeConfig:w.config,onConnectClick:E?t:void 0})}case"file_uploads":{if(!_)return null;const N=async()=>{await f(),M(null)};return s.jsx(wl,{onBackClick:x,onDisconnectClick:N,fileUploadConfig:_,connector:c,onConnectClick:E?t:void 0})}}},Ei=({type:t})=>{const{personalConfig:e,businessConfig:n,isLoading:a}=hr(),o=t===wt.O365_PERSONAL?e:n,i=As(),l=Al(t,()=>{i()});return a?s.jsx("div",{className:"flex justify-center",children:s.jsx(Ut,{})}):o?s.jsx(wl,{onBackClick:()=>i(),onDisconnectClick:l,fileUploadConfig:o}):(i(),null)},eh=({connectorId:t,onAddLinkClick:e})=>{var Q;const n=ce(),a=Y(),o=ot(()=>Ba(n,{productSku:rt.CONNECTOR_SETTING})),i=()=>Ba.refetch(n,{productSku:rt.CONNECTOR_SETTING}),l=Bs({fetchValidLinksOnly:!0,productSku:rt.CONNECTOR_SETTING}),d=ot(()=>({data:void 0,isLoading:!1,isSuccess:!1,error:void 0})),c=(Q=o.data)==null?void 0:Q.find(D=>D.id===t),r=l.connectorLinks.get(t),m=r&&r.length>0,g=!!c&&c.connector_type==="MCP",u=As(),f=wc(),h=Lg(c),_=g&&h,j=!!(Oe(n,"3870713715")&&g&&h),{logoModal:y,openLogoModal:M}=Hp({canEditLogo:j,connector:c,refetchConnectors:i,refetchLinks:()=>l.refetch()}),{descriptionModal:C,openDescriptionModal:k}=Gp({canEditDescription:h,connector:c,refetchConnectors:i}),E=o.isLoading||l.isLoading||d.isLoading,w=lt({mutationFn:async()=>{if(!c)throw new Error("Connector not found");e()},onError:D=>{rs(n).danger(Ht.connectError,{error:D})}}),x=lt({mutationFn:async()=>{await f(t,()=>{rs(n).success(c?a.formatMessage(Ht.disconnectSuccess,{connector:Qs(c.name,a)}):a.formatMessage(Ht.disconnectGenericSuccess))},rt.CONNECTOR_SETTING)}}),T=lt({mutationFn:async D=>{await Ac(D)},onSuccess:()=>{A.refetchQueries({queryKey:["connector-actions",t]}),A.refetchQueries({queryKey:Pc()})},onError:D=>{rs(n).danger(Ht.refreshActionsError,{error:D})}}),N=lt({mutationFn:async()=>{await Ic(t),await Promise.all([i(),l.refetch()])},onError:D=>{rs(n).danger(Ht.deleteError,{error:D})},onSuccess:()=>{u()}}),A=Et(),P=lt({mutationFn:async({linkId:D,action:F,enabled:G})=>{A.setQueryData(zo(!0),H=>Ho(H,J=>{var de;const W=(de=J[t])==null?void 0:de.find(V=>V.id===D);if(G)W!=null&&W.actions.includes(F)||W==null||W.actions.push(F);else{const V=W==null?void 0:W.actions.indexOf(F);V!==void 0&&V!==-1&&(W==null||W.actions.splice(V,1))}}));const X=r==null?void 0:r.find(H=>H.id===D);if(!X)return;const B=G?[...X.actions,F]:X.actions.filter(H=>H!==F),$=await Dc(D,B);A.setQueryData(zo(!0),H=>Ho(H,J=>{const W=J[t],de=W==null?void 0:W.findIndex(V=>V.id===D);de!==void 0&&de!==-1&&(W[de]=$.link)}))},onError:D=>{rs(n).danger(Ht.toggleActionError,{error:D})}});if(E)return s.jsx("div",{className:"flex justify-center p-10",children:s.jsx(Ut,{})});if(o.error||l.error||!c||d.error)return u(),null;const U=d.isSuccess?d.data:void 0;if(!m)return s.jsxs(s.Fragment,{children:[s.jsx(Nl,{connector:c,onBackClick:()=>u(),onConnectClick:()=>w.mutate(),isConnecting:w.isPending,isDisconnecting:x.isPending,isDeleting:N.isPending,onDelete:_?()=>N.mutate():void 0,onEditDescription:h?k:void 0,onEditLogo:j?M:void 0}),C,y]});const q=(r!=null&&r[0]?Pn(r[0]):!1)?void 0:()=>x.mutate();return s.jsxs(s.Fragment,{children:[s.jsx(Tl,{connector:c,onBackClick:()=>u(),link:r[0],onDisconnectClick:q,isDisconnecting:x.isPending,isDeleting:N.isPending,onDelete:_?()=>N.mutate():void 0,onRefreshActions:()=>T.mutate(r[0].id),isRefreshingActions:T.isPending,onToggleAction:(D,F)=>P.mutate({linkId:r[0].id,action:D,enabled:F}),isTogglingAction:P.isPending,onEditDescription:h?k:void 0,onEditLogo:j?M:void 0,syncProgress:U}),C,y]})},th=({connectorId:t,onAddClick:e})=>t===is?s.jsx(Xp,{onAddClick:e}):t==="onedrive-personal"?s.jsx(Ei,{type:wt.O365_PERSONAL}):t==="onedrive-business"?s.jsx(Ei,{type:wt.O365_BUSINESS}):s.jsx(eh,{connectorId:t,onAddLinkClick:e}),Ht=Be({backButton:{id:"2XH9oW",defaultMessage:"Back"},addButton:{id:"lkrz+6",defaultMessage:"Add"},connectedOn:{id:"b1ykGv",defaultMessage:"Connected on"},sync:{id:"W4yI4C",defaultMessage:"Chat"},disableSync:{id:"LM6oW1",defaultMessage:"Disable sync"},fileUploads:{id:"gFheug",defaultMessage:"File uploads"},deepResearch:{id:"EnDZig",defaultMessage:"Deep Research"},connectError:{id:"9/ATb1",defaultMessage:"Error connecting your account."},refreshActionsError:{id:"j+WGY0",defaultMessage:"Error refreshing actions."},disconnectError:{id:"DqZbNO",defaultMessage:"Error disconnecting your account."},disconnectSuccess:{id:"CoyFU4",defaultMessage:"{connector} disconnected"},disconnectGenericSuccess:{id:"Yh+piF",defaultMessage:"Connector disconnected"},deleteError:{id:"ZeAn4n",defaultMessage:"Error deleting your connector."},toggleActionError:{id:"DofG17",defaultMessage:"Error toggling action."},mcpServerConformError:{id:"igeVCu",defaultMessage:"This MCP server can't be used by ChatGPT to search information because it doesn't implement <link>our specification</link>."},mcpServerConformErrorWithReason:{id:"g1U6+s",defaultMessage:"This MCP server can't be used by ChatGPT to search information because it doesn't implement <link>our specification</link>: {reason}"}}),sh=({connector:t})=>{const e=Y(),n=As(),a=t.status==="DISABLED_BY_ADMIN";return s.jsx(Wt,{label:a?e.formatMessage(Lc.disabledByAdmin):void 0,triggerAs:"div",children:s.jsxs(te,{color:"secondary",className:"disabled:hover:bg-token-bg-primary border-token-border-default hover:bg-token-interactive-bg-secondary-hover w-full rounded-[10px] border p-3 pb-[10px] disabled:opacity-25",contentWrapperClassName:"flex-col gap-2 truncate items-start flex-1",onClick:()=>n(t.id),disabled:a,children:[s.jsxs("div",{className:"flex w-full items-center justify-between",children:[s.jsx(la,{connector:t}),s.jsx(yn,{connector:t})]}),s.jsx("span",{className:"max-w-full truncate text-sm font-normal",children:Qs(t.name,e)})]})})},Ti=({connectors:t})=>{const e=S.useMemo(()=>[...t].sort((n,a)=>{const o=(a.status!=="DISABLED_BY_ADMIN"?1:0)-(n.status!=="DISABLED_BY_ADMIN"?1:0),i=a.owners.length-n.owners.length,l=n.name.localeCompare(a.name);return 100*o+10*i+l}),[t]);return s.jsx("div",{className:"my-2 grid grid-cols-2 gap-2 sm:grid-cols-3",children:e.map(n=>s.jsx(sh,{connector:n},n.id))})},nh=R(()=>L(()=>import("./ffrotvb922yxp30i.js"),__vite__mapDeps([33,1])),{loading:t=>K(t)}),Il=({onClick:t,children:e,disabled:n})=>s.jsx("button",{className:"border-token-border-light items-center border-b px-0.5 py-3 last-of-type:border-none",onClick:t,disabled:n,children:e}),_a=({connector:t,trailingButton:e,description:n,disabled:a})=>{const o=Y(),i=As();return s.jsx(Il,{onClick:()=>i(t.id),disabled:a,children:s.jsx(ks,{icon:s.jsx(Xs,{connector:t,size:"small",className:"border-token-border-default bg-token-bg-primary shadow-xxs h-fit rounded-[10px] border-[0.5px] p-2"}),title:Qs(t.name,o),badge:s.jsx(yn,{connector:t}),description:n,statusIndicator:s.jsxs("div",{className:"flex flex-shrink-0 items-center gap-4",children:[e,s.jsx(nh,{className:"icon"})]})})})},ah=({connectorLinks:t,platformConnectors:e,gdriveRow:n,onedrivePersonalRow:a,onedriveBusinessRow:o,githubRow:i,genericSyncableRows:l})=>{const d=Y(),c=S.useMemo(()=>[...Array.from(t.keys()).map(g=>e.find(u=>u.id===g)).filter(g=>!!g).map(g=>({type:"platform_connector",name:g.name,connector:g})),...a?[{type:"onedrive_personal",name:d.formatMessage(Rc)}]:[],...o?[{type:"onedrive_business",name:d.formatMessage(Bc)}]:[],...n?[{type:"gdrive",name:"Google Drive"}]:[],...i?[{type:"github",name:"GitHub"}]:[],...(l!=null?l:[]).map(g=>v({type:"syncable_platform_connector",name:g.connector.name},g))].sort((g,u)=>g.name.localeCompare(u.name)),[t,a,d,o,n,i,l,e]);return s.jsx("div",{className:"flex flex-col",children:c.map(r=>r.type==="platform_connector"?s.jsx(_a,{connector:r.connector},r.connector.id):r.type==="onedrive_personal"?s.jsx(Ss.Fragment,{children:a},r.type):r.type==="onedrive_business"?s.jsx(Ss.Fragment,{children:o},r.type):r.type==="gdrive"?s.jsx(Ss.Fragment,{children:n},r.type):r.type==="github"?s.jsx(Ss.Fragment,{children:i},r.type):r.type==="syncable_platform_connector"?s.jsx(Ss.Fragment,{children:r.row},r.connector.id):void 0)})},oh=R(()=>L(()=>import("./e2n6syult3e6hs2j.js"),__vite__mapDeps([24,1])),{loading:t=>K(t)}),ih=R(()=>L(()=>import("./ffrotvb922yxp30i.js"),__vite__mapDeps([33,1])),{loading:t=>K(t)}),rh=R(()=>L(()=>import("./mtkzc0bar32cfrm8.js"),__vite__mapDeps([34,1])),{loading:t=>K(t)});function ki(t){return Wc(t)?Kc(t,qc.CreateMcpConnector,$c(t)):!0}const lh=Fc(t=>Uc(()=>{const e=gr(t);if(!e)return{shouldRenderButton:!1,isDisabledByAdmin:!1};if(e.isSelfServeBusiness()&&e.isStandardUserOfAccount())return{shouldRenderButton:!1,isDisabledByAdmin:!1};if(Oe(t,"3927245414"))return Ns(t)?{shouldRenderButton:!0,isDisabledByAdmin:e.isWorkspaceAccount()?!ki(t):!1}:{shouldRenderButton:!1,isDisabledByAdmin:!1};if(!Oe(t,"3828441000")&&!Ns(t))return{shouldRenderButton:!1,isDisabledByAdmin:!1};if(!e.isWorkspaceAccount())return{shouldRenderButton:!0,isDisabledByAdmin:!1};const o=ki(t);return o===void 0?{shouldRenderButton:!1,isDisabledByAdmin:!1}:{shouldRenderButton:!0,isDisabledByAdmin:!o}})),Wa=({disabled:t,message:e,onAddClick:n,tooltip:a,side:o="right"})=>{const i=s.jsx(te,{color:"secondary",disabled:t,onClick:l=>{l.preventDefault(),n()},size:"small",children:s.jsx(p,v({},e))});return a?s.jsx(Wt,{label:s.jsx("div",{className:"max-w-50",children:a}),side:o,children:i}):i},an=({disabled:t,loading:e,onClick:n,tooltip:a})=>{if(e)return s.jsx(ur,{sizeOverride:18,percentage:0});const o=s.jsx(te,{color:"secondary",disabled:t,onClick:i=>{i.preventDefault(),i.stopPropagation(),n==null||n(i)},size:"small",children:s.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[s.jsx(rh,{className:"icon-xs text-[#007AFF]"}),s.jsx(p,v({},st.syncForBetterAnswers))]})});return a?s.jsx(Wt,{label:s.jsx("div",{className:"max-w-50",children:a}),side:"right",children:o}):o},ch=({gdrivePlatformConnector:t,isFileUploadsEnabled:e,numPlatformLinks:n,platformLinks:a,numInternalKnowledgeLinks:o,numInternalKnowledgeConfigs:i,onAddClick:l})=>{const d=ce(),c=Y(),r=kt(),m=r==null?void 0:r.isPersonalAccount(),g=r==null?void 0:r.isWorkspaceAccount(),u=Js(),f=!!g||u&&!!m,h=Zi({filters:{mutationKey:["upgradeConnectorToSync"]},select:N=>N.state}),{mutateAsync:_}=Rn(),{internalKnowledgeEnabled:b,internalKnowledgeConfigs:j,isLoading:y}=Ln(),M=i-o,C=S.useMemo(()=>{var N;return f?(N=a.get(is))==null?void 0:N.find(A=>A.connector_id===t.id):null},[a,t.id,f]),k=S.useMemo(()=>!(j!=null&&j.length)||!(C!=null&&C.id)||!f?null:j.find(N=>(C==null?void 0:C.id)===N.user_connection_details.backing_link_id),[j,C==null?void 0:C.id,f]),E=h.some(N=>{var A,P;return N.status==="success"&&((P=(A=N.variables)==null?void 0:A.link)==null?void 0:P.id)===(C==null?void 0:C.id)&&!k}),w=h.some(N=>{var A,P;return N.status==="pending"&&((P=(A=N.variables)==null?void 0:A.link)==null?void 0:P.id)===(C==null?void 0:C.id)});S.useEffect(()=>{E&&setTimeout(()=>{ws(d)},1e3)},[d,E]);const x=S.useMemo(()=>{const N=t.status!=="DISABLED_BY_ADMIN",A=n>0;if(r!=null&&r.isPersonalAccount()){if(C&&!k&&f){const P=()=>{Ge.logEventWithStatsig("Connectors - Upgrade Personal Google Drive","chatgpt_connectors_upgrade_personal_google_drive_clicked"),_({link:C})};return s.jsx(an,{onClick:P,loading:w||y||E,tooltip:c.formatMessage(st.syncForBetterAnswersTooltip)})}return C&&k?s.jsx(Dn,{connection:k,location:"user_settings"}):e&&!C?s.jsx(te,{size:"small",color:"secondary",onClick:l,children:s.jsx(p,v({},st.addChatAndOrDeepResearch))}):null}if(A){if(M>0&&o===0){if(C&&f){const P=()=>{Ge.logEventWithStatsig("Connectors - Upgrade Workspace Google Drive","chatgpt_contextual_answers_user_upgrade_to_sync_initiated"),_({link:C})};return s.jsx(an,{onClick:P,loading:w||y||E,tooltip:c.formatMessage(st.syncForBetterAnswersTooltip)})}return s.jsx(an,{onClick:l,tooltip:c.formatMessage(st.syncForBetterAnswersTooltip)})}if(b&&i===0)return s.jsx(an,{disabled:!0,onClick:l,tooltip:c.formatMessage(st.contactAdminTooltip)})}else{if(e&&(o>0||M===0))return s.jsx(Wa,{disabled:!N,message:st.addDeepResearch,onAddClick:l,tooltip:N?void 0:c.formatMessage(st.deepResearchDisabledByAdmin)});if(N&&e&&o===0)return s.jsx(Wa,{message:st.addChatAndOrDeepResearch,onAddClick:l});if(e&&!N&&o===0&&M>0)return s.jsx(an,{onClick:l,tooltip:c.formatMessage(st.syncForBetterAnswersTooltip)})}return null},[t.status,n,f,C,k,l,w,y,E,c,_,M,o,b,i,r,e]),T=S.useMemo(()=>{const N=[];return e&&N.push("fileUploads"),Gg(N,c)},[e,c]);return s.jsx(_a,{connector:t,description:T,trailingButton:x})},Ni=({config:t,onClick:e})=>{const n=Y();return s.jsx(Il,{onClick:e,children:s.jsx(ks,{icon:s.jsx("span",{className:"border-token-border-default bg-token-bg-primary shadow-xxs h-fit rounded-[10px] border-[0.5px] p-2",children:s.jsx(oh,{className:"icon-lg"})}),title:Ya(t.type,n),statusIndicator:s.jsx(ih,{className:"icon"})})})},dh=({githubLink:t,githubPlatformConnector:e})=>{var l;const n=Y(),{data:a,isLoading:o}=$r({linkId:(l=t==null?void 0:t.id)!=null?l:""}),i=!a;return s.jsx(_a,{connector:e,disabled:o,description:i?n.formatMessage(st.setupIncompleteGithub):void 0})},uh=({link:t,connector:e,syncConnectorId:n,refetchLinks:a})=>{var C,k;const o=ce(),i=Y(),l=gt(),d=br(),c=ma(),{data:r,refetch:m}=On(),g=c?r==null?void 0:r.connection_statuses.find(E=>E.user_connection_details.backing_link_id===(t==null?void 0:t.id)||e.id===En&&E.user_connection_details.connection_type==="sharepoint_admin_sync_connector"&&E.user_connection_details.auth_status==="admin_connected"):void 0,u=Zi({filters:{mutationKey:["upgradeConnectorToSync"]},select:E=>E.state});let f="no-sync";if(g)f="upgraded-to-sync";else for(const E of u)if(((k=(C=E.variables)==null?void 0:C.link)==null?void 0:k.id)===(t==null?void 0:t.id))if(E.status==="success"&&!g){f="upgrade-succeeded-updating-status";break}else E.status==="pending"&&(f="upgrade-pending");S.useEffect(()=>{f==="upgrade-succeeded-updating-status"&&setTimeout(()=>{m()},1e3)},[f,m]);const{mutateAsync:h}=Rn(),[_,b]=S.useState(!1),j=!!n,y=async()=>{var E;if(n)try{b(!0),Ma("popup");const w=await ha({connector:e,redirectAfter:Qa,openPopup:d,intl:i,toaster:l,productSku:rt.CONNECTOR_SETTING,connectorIdOverride:n}),x=n!=null?n:e.id,{data:T}=await a(),N=w&&typeof w=="object"?w.linkId:void 0,A=(E=T==null?void 0:T.get(x))==null?void 0:E[0];let P=null;typeof N=="string"?P={id:N,name:e.name,connector_id:x}:A&&typeof A.id=="string"&&(P={id:A.id,name:e.name,connector_id:x}),P&&(await h({link:P,isConnectingAndUpgrading:!0}),await ws(o)),l.success(i.formatMessage(st.syncConnectorSuccess,{connector:e.name}))}catch(w){const x=w instanceof Error?w.message:void 0;l.danger(x!=null?x:i.formatMessage(st.syncConnectorError,{connector:e.name}),{toastId:"connector_oauth_connect"})}finally{b(!1)}},M=g?s.jsx(Dn,{connection:g,location:"user_settings"}):t&&s.jsx(an,{onClick:()=>{if(j){y();return}h({link:t})},loading:_||f==="upgrade-succeeded-updating-status"||f==="upgrade-pending",tooltip:i.formatMessage(st.syncFilesForBetterAnswersTooltip,{connector:e.name})});return s.jsx(_a,{connector:e,trailingButton:M})},gh=t=>{"use forget";var vo,jo,So,Eo,To,ko,No,wo,Po;const e=_e.c(185),{onCreateCustomConnectorClick:n,onAddClick:a}=t,o=ce(),i=Y(),l=ma(),d=Gc(),c=to(!0,rt.CONNECTOR_SETTING);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={fetchValidLinksOnly:!0,productSku:rt.CONNECTOR_SETTING},e[0]=r):r=e[0];const m=Bs(r),{data:g}=On(),u=As(),f=kt(),h=!(f!=null&&f.isPersonalAccount())&&(f==null?void 0:f.planType)!==ut.SELF_SERVE_BUSINESS;let _;e[1]!==o?(_=()=>lh(o),e[1]=o,e[2]=_):_=e[2];const{shouldRenderButton:b,isDisabledByAdmin:j}=ot(_);let y;e[3]!==d.availableConnectors?(y=new Set(d.availableConnectors.map(fh)),e[3]=d.availableConnectors,e[4]=y):y=e[4];const M=y;let C;e[5]!==c.platformConnectors?(C=Array.from(c.platformConnectors.values()),e[5]=c.platformConnectors,e[6]=C):C=e[6];let k;e[7]!==M||e[8]!==l||e[9]!==C?(k=C.filter(Ee=>{if(Ee.id===Vc||Ee.id===Fa||Ee.id===zc)return!1;const at=M.has(Ee.id),xt=Object.values(Wo).some(Vt=>{const{access:fs,sync:Cn}=Vt;return fs===Ee.id&&M.has(Cn)});return Ee.connector_type==="MCP"||Ee.connector_type==="FIRST_PARTY_ECOSYSTEM"||at||xt||Ee.id===is&&l}),e[7]=M,e[8]=l,e[9]=C,e[10]=k):k=e[10];const E=k,w=E.some(ph),x=xr(),{isLoading:T,isEnabled:N}=yr(),A=h?N&&!T:!0,P=ge("linear"),U=ge("dropbox"),I=ge("box"),q=ge("notion"),Q=ge("hubspot"),D=ge("confluence"),F=ge("jira"),G=ge("jira_servicemanagement"),X=ge("intercom"),B=ge("aha"),$=ge("asana"),H=ge("azure_devops"),J=ge("basecamp"),W=ge("clickup"),de=ge("freshdesk"),V=ge("freshservice"),se=ge("front"),ae=ge("gitlab"),Ne=ge("gorgias"),Me=ge("help_scout"),Ae=ge("ironclad"),ve=ge("pipedrive"),Le=ge("salesforce_service_cloud"),je=ge("shortcut"),Ke=ge("teamwork"),Je=ge("zendesk"),et=ge("zoho"),tt=ge("zoho_desk");let z;e[11]!==(g==null?void 0:g.connection_statuses)?(z=g==null?void 0:g.connection_statuses.some(hh),e[11]=g==null?void 0:g.connection_statuses,e[12]=z):z=e[12];const ue=!!z,Ie=x&&A||ue;let me;e[13]!==Ie?(me={connectorId:En,shouldRenderRow:Ie},e[13]=Ie,e[14]=me):me=e[14];let he;e[15]!==P?(he={connectorId:Mr,shouldRenderRow:P},e[15]=P,e[16]=he):he=e[16];let xe;e[17]!==U?(xe={connectorId:Cr,shouldRenderRow:U},e[17]=U,e[18]=xe):xe=e[18];let we;e[19]!==I?(we={connectorId:_r,shouldRenderRow:I},e[19]=I,e[20]=we):we=e[20];let $e;e[21]!==D?($e={connectorId:Te[O.CONFLUENCE_CONNECTOR],shouldRenderRow:D},e[21]=D,e[22]=$e):$e=e[22];let ye;e[23]!==F?(ye={connectorId:Te[O.JIRA_CONNECTOR],shouldRenderRow:F},e[23]=F,e[24]=ye):ye=e[24];let Fe;e[25]!==G?(Fe={connectorId:Te[O.JIRA_SERVICEMANAGEMENT_CONNECTOR],shouldRenderRow:G},e[25]=G,e[26]=Fe):Fe=e[26];let Z;e[27]!==q?(Z={connectorId:jr,shouldRenderRow:q,syncConnectorId:vr},e[27]=q,e[28]=Z):Z=e[28];let Ce;e[29]!==Q?(Ce={connectorId:Er,shouldRenderRow:Q,syncConnectorId:Sr},e[29]=Q,e[30]=Ce):Ce=e[30];let oe;e[31]!==X?(oe={connectorId:Hc,shouldRenderRow:X,syncConnectorId:Tr},e[31]=X,e[32]=oe):oe=e[32];let ne;e[33]!==B?(ne={connectorId:Te[O.AHA_CONNECTOR],shouldRenderRow:B},e[33]=B,e[34]=ne):ne=e[34];let be;e[35]!==$?(be={connectorId:Te[O.ASANA_CONNECTOR],shouldRenderRow:$},e[35]=$,e[36]=be):be=e[36];let fe;e[37]!==H?(fe={connectorId:Te[O.AZURE_DEVOPS_CONNECTOR],shouldRenderRow:H},e[37]=H,e[38]=fe):fe=e[38];let Ue;e[39]!==J?(Ue={connectorId:Te[O.BASECAMP_CONNECTOR],shouldRenderRow:J},e[39]=J,e[40]=Ue):Ue=e[40];let Pe;e[41]!==W?(Pe={connectorId:Te[O.CLICKUP_CONNECTOR],shouldRenderRow:W},e[41]=W,e[42]=Pe):Pe=e[42];let Se;e[43]!==de?(Se={connectorId:Te[O.FRESHDESK_CONNECTOR],shouldRenderRow:de},e[43]=de,e[44]=Se):Se=e[44];let De;e[45]!==V?(De={connectorId:Te[O.FRESHSERVICE_CONNECTOR],shouldRenderRow:V},e[45]=V,e[46]=De):De=e[46];let qe;e[47]!==se?(qe={connectorId:Te[O.FRONT_CONNECTOR],shouldRenderRow:se},e[47]=se,e[48]=qe):qe=e[48];let Ye;e[49]!==ae?(Ye={connectorId:Te[O.GITLAB_CONNECTOR],shouldRenderRow:ae},e[49]=ae,e[50]=Ye):Ye=e[50];let ee;e[51]!==Ne?(ee={connectorId:Te[O.GORGIAS_CONNECTOR],shouldRenderRow:Ne},e[51]=Ne,e[52]=ee):ee=e[52];let Qe;e[53]!==Me?(Qe={connectorId:Te[O.HELP_SCOUT_CONNECTOR],shouldRenderRow:Me},e[53]=Me,e[54]=Qe):Qe=e[54];let it;e[55]!==Ae?(it={connectorId:Te[O.IRONCLAD_CONNECTOR],shouldRenderRow:Ae},e[55]=Ae,e[56]=it):it=e[56];let ht;e[57]!==ve?(ht={connectorId:Te[O.PIPEDRIVE_CONNECTOR],shouldRenderRow:ve},e[57]=ve,e[58]=ht):ht=e[58];let yt;e[59]!==Le?(yt={connectorId:Te[O.SALESFORCE_SERVICE_CLOUD_CONNECTOR],shouldRenderRow:Le},e[59]=Le,e[60]=yt):yt=e[60];let bt;e[61]!==je?(bt={connectorId:Te[O.SHORTCUT_CONNECTOR],shouldRenderRow:je},e[61]=je,e[62]=bt):bt=e[62];let Ct;e[63]!==Ke?(Ct={connectorId:Te[O.TEAMWORK_CONNECTOR],shouldRenderRow:Ke},e[63]=Ke,e[64]=Ct):Ct=e[64];let _t;e[65]!==Je?(_t={connectorId:Te[O.ZENDESK_CONNECTOR],shouldRenderRow:Je},e[65]=Je,e[66]=_t):_t=e[66];let vt;e[67]!==et?(vt={connectorId:Te[O.ZOHO_CONNECTOR],shouldRenderRow:et},e[67]=et,e[68]=vt):vt=e[68];let At;e[69]!==tt?(At={connectorId:Te[O.ZOHO_DESK_CONNECTOR],shouldRenderRow:tt},e[69]=tt,e[70]=At):At=e[70];let Rt;e[71]!==xe||e[72]!==we||e[73]!==$e||e[74]!==ye||e[75]!==Fe||e[76]!==Z||e[77]!==Ce||e[78]!==oe||e[79]!==ne||e[80]!==be||e[81]!==fe||e[82]!==Ue||e[83]!==Pe||e[84]!==Se||e[85]!==De||e[86]!==qe||e[87]!==Ye||e[88]!==ee||e[89]!==Qe||e[90]!==it||e[91]!==ht||e[92]!==yt||e[93]!==bt||e[94]!==Ct||e[95]!==_t||e[96]!==vt||e[97]!==At||e[98]!==me||e[99]!==he?(Rt=[me,he,xe,we,$e,ye,Fe,Z,Ce,oe,ne,be,fe,Ue,Pe,Se,De,qe,Ye,ee,Qe,it,ht,yt,bt,Ct,_t,vt,At],e[71]=xe,e[72]=we,e[73]=$e,e[74]=ye,e[75]=Fe,e[76]=Z,e[77]=Ce,e[78]=oe,e[79]=ne,e[80]=be,e[81]=fe,e[82]=Ue,e[83]=Pe,e[84]=Se,e[85]=De,e[86]=qe,e[87]=Ye,e[88]=ee,e[89]=Qe,e[90]=it,e[91]=ht,e[92]=yt,e[93]=bt,e[94]=Ct,e[95]=_t,e[96]=vt,e[97]=At,e[98]=me,e[99]=he,e[100]=Rt):Rt=e[100];const Yt=Rt;let Gt;if(e[101]!==c.platformConnectors||e[102]!==ue||e[103]!==m.connectorLinks||e[104]!==m.refetch||e[105]!==Yt){Gt=[];for(const{connectorId:Ee,shouldRenderRow:at,syncConnectorId:xt}of Yt){if(!at)continue;const Vt=c.platformConnectors.has(Ee),fs=Vt?Ee:xt,Cn=fs?c.platformConnectors.get(fs):void 0,Kn=(vo=m.connectorLinks.get(Ee))==null?void 0:vo[0],Ao=xt?(jo=m.connectorLinks.get(xt))==null?void 0:jo[0]:void 0,Io=Kn!=null?Kn:Ao;if(!Cn)continue;const Do=Ee===En&&ue;(Do||Io)&&(Ao&&Vt&&Kn||Gt.push({connector:Cn,row:s.jsx(uh,{link:Io,isAdminSyncConnected:Do,connector:Cn,syncConnectorId:xt,refetchLinks:m.refetch})}))}e[101]=c.platformConnectors,e[102]=ue,e[103]=m.connectorLinks,e[104]=m.refetch,e[105]=Yt,e[106]=Gt}else Gt=e[106];const It=Gt;let Kt;e[107]!==It?(Kt=It.map(xh),e[107]=It,e[108]=Kt):Kt=e[108];const Qt=Kt;let Dt;e[109]!==Qt||e[110]!==m.connectorLinks?(Dt=new Map(m.connectorLinks),Dt.delete(is),Dt.delete(Sa),Qt.forEach(Ee=>{Dt.delete(Ee)}),e[109]=Qt,e[110]=m.connectorLinks,e[111]=Dt):Dt=e[111];const $t=Dt,{fileUploadConfig:Ve,internalKnowledgeConfigs:ct}=Ln(),jt=hr();let vs;e[112]!==ct?(vs=(So=ct==null?void 0:ct.filter(yh).length)!=null?So:0,e[112]=ct,e[113]=vs):vs=e[113];const Us=vs;let Gs;e[114]!==m.connectorLinks?(Gs=(To=(Eo=m.connectorLinks.get(is))==null?void 0:Eo.length)!=null?To:0,e[114]=m.connectorLinks,e[115]=Gs):Gs=e[115];const Vs=Gs,gs=!!(Ve!=null&&Ve.access_token)||Vs>0||Us>0,zs=!!((ko=jt.personalConfig)!=null&&ko.access_token),Hs=!!((No=jt.businessConfig)!=null&&No.access_token);let Tt;e[116]!==c.platformConnectors?(Tt=c.platformConnectors.get(is),e[116]=c.platformConnectors,e[117]=Tt):Tt=e[117];const qt=Tt;let Ot;e[118]!==m.connectorLinks?(Ot=(wo=m.connectorLinks.get(Sa))==null?void 0:wo[0],e[118]=m.connectorLinks,e[119]=Ot):Ot=e[119];const ns=Ot;let Bn;e[120]!==c.platformConnectors?(Bn=c.platformConnectors.get(Sa),e[120]=c.platformConnectors,e[121]=Bn):Bn=e[121];const Fn=Bn;let Un;e[122]!==E||e[123]!==M||e[124]!==gs||e[125]!==ue||e[126]!==m.connectorLinks?(Un=E.filter(Ee=>{const at=Object.values(Wo).find(xt=>xt.access===Ee.id||xt.sync===Ee.id);if(Ee.id===is)return!gs;if(m.connectorLinks.has(Ee.id))return!1;if(Ee.id===En)return!ue;if(at){const xt=m.connectorLinks.has(at.access),Vt=m.connectorLinks.has(at.sync);if(at.access===Ee.id)return!xt&&!Vt;if(at.sync===Ee.id)return M.has(at.access)?!1:!Vt}return!0}),e[122]=E,e[123]=M,e[124]=gs,e[125]=ue,e[126]=m.connectorLinks,e[127]=Un):Un=e[127];const va=Un;let Gn;if(e[128]!==va){const Ee=[],at=[];va.forEach(xt=>{var Vt;(Vt=xt.branding)!=null&&Vt.is_discoverable_app?Ee.push(xt):at.push(xt)}),Gn=[Ee,at],e[128]=va,e[129]=Gn}else Gn=e[129];const[bn,Mn]=Gn;if(c.isLoading||d.isLoading||m.isLoading){let Ee;e[130]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx(p,v({},st.connectorsTitle)),e[130]=Ee):Ee=e[130];let at;return e[131]===Symbol.for("react.memo_cache_sentinel")?(at=s.jsx(Ze,{title:Ee,children:s.jsx("div",{className:"flex justify-center p-6",children:s.jsx(Ut,{})})}),e[131]=at):at=e[131],at}const Co=d.enabled,Vn=Co&&b,zl=!Co||!E.length;let zn;e[132]!==i||e[133]!==j||e[134]!==n||e[135]!==Vn?(zn=Vn?s.jsx(Wa,{disabled:j,message:st.createCustomConnectorButton,onAddClick:n,tooltip:j?i.formatMessage(st.createCustomConnectorDisabledByAdmin):void 0,side:"bottom"}):null,e[132]=i,e[133]=j,e[134]=n,e[135]=Vn,e[136]=zn):zn=e[136];const Jt=zn;if(zl){let Ee;e[137]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx(p,v({},st.connectorsTitle)),e[137]=Ee):Ee=e[137];let at;e[138]!==Jt?(at=Jt&&s.jsx(s.Fragment,{children:Jt}),e[138]=Jt,e[139]=at):at=e[139];let xt;e[140]!==at?(xt=s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[Ee,at]}),e[140]=at,e[141]=xt):xt=e[141];let Vt;e[142]===Symbol.for("react.memo_cache_sentinel")?(Vt=s.jsx(An,{type:"info",className:"mt-4",children:s.jsx(p,v({},st.noConnectorsAvailable))}),e[142]=Vt):Vt=e[142];let fs;return e[143]!==xt?(fs=s.jsx(Ze,{title:xt,children:Vt}),e[143]=xt,e[144]=fs):fs=e[144],fs}if(c.error||m.error){let Ee;e[145]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx(p,v({},st.connectorsTitle)),e[145]=Ee):Ee=e[145];let at;return e[146]===Symbol.for("react.memo_cache_sentinel")?(at=s.jsx(Ze,{title:Ee,children:s.jsx(An,{type:"danger",children:s.jsx(p,v({},st.error))})}),e[146]=at):at=e[146],at}const ms=$t.size>0||gs||zs||Hs||!!ns||It.length>0;let _o;(Ee=>{Ee.INSTALLED="INSTALLED",Ee.UNLINKED_APPS="UNLINKED_APPS",Ee.UNLINKED_NON_APP_CONNECTORS="UNLINKED_NON_APP_CONNECTORS"})(_o||(_o={}));let as=null;Vn&&(ms?as="INSTALLED":bn.length>0?as="UNLINKED_APPS":Mn.length>0&&(as="UNLINKED_NON_APP_CONNECTORS"));let en;e[147]!==Jt||e[148]!==as||e[149]!==E||e[150]!==$t||e[151]!==(Ve==null?void 0:Ve.access_token)||e[152]!==qt||e[153]!==It||e[154]!==ns||e[155]!==Fn||e[156]!==w||e[157]!==ms||e[158]!==(ct==null?void 0:ct.length)||e[159]!==gs||e[160]!==Hs||e[161]!==zs||e[162]!==m.connectorLinks||e[163]!==Vs||e[164]!==Us||e[165]!==a||e[166]!==jt.businessConfig||e[167]!==jt.personalConfig||e[168]!==u?(en=ms&&s.jsx(Ze,{headerInteractable:!0,title:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"select-none",children:w?s.jsx(p,v({},st.enabledAppsAndConnectorsTitle)):s.jsx(p,v({},st.enabledConnectorsTitle))}),as==="INSTALLED"&&Jt]}),description:s.jsx(p,v({},st.enabledConnectorsDescription)),children:s.jsx(ah,{connectorLinks:$t,platformConnectors:E,gdriveRow:gs&&qt?s.jsx(ch,{gdrivePlatformConnector:qt,isFileUploadsEnabled:!!(Ve!=null&&Ve.access_token),numPlatformLinks:Vs,platformLinks:m.connectorLinks,numInternalKnowledgeLinks:Us,numInternalKnowledgeConfigs:(Po=ct==null?void 0:ct.length)!=null?Po:0,onAddClick:()=>{u(is),a()}}):null,onedrivePersonalRow:zs&&jt.personalConfig?s.jsx(Ni,{config:jt.personalConfig,onClick:()=>u("onedrive-personal")}):null,onedriveBusinessRow:Hs&&jt.businessConfig?s.jsx(Ni,{config:jt.businessConfig,onClick:()=>u("onedrive-business")}):null,githubRow:ns&&Fn?s.jsx(dh,{githubLink:ns,githubPlatformConnector:Fn}):null,genericSyncableRows:It})}),e[147]=Jt,e[148]=as,e[149]=E,e[150]=$t,e[151]=Ve==null?void 0:Ve.access_token,e[152]=qt,e[153]=It,e[154]=ns,e[155]=Fn,e[156]=w,e[157]=ms,e[158]=ct==null?void 0:ct.length,e[159]=gs,e[160]=Hs,e[161]=zs,e[162]=m.connectorLinks,e[163]=Vs,e[164]=Us,e[165]=a,e[166]=jt.businessConfig,e[167]=jt.personalConfig,e[168]=u,e[169]=en):en=e[169];let tn;e[170]!==Jt||e[171]!==as||e[172]!==ms||e[173]!==bn?(tn=bn.length>0&&s.jsx(Ze,{noBorder:!0,headerInteractable:!0,title:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"select-none",children:ms?s.jsx(p,v({},st.allAppsTitle)):s.jsx(p,v({},st.appsTitle))}),as==="UNLINKED_APPS"&&Jt]}),description:s.jsx(p,pe(v({},st.appsDescription),{values:{link:bh}})),children:s.jsx(Ti,{connectors:bn})}),e[170]=Jt,e[171]=as,e[172]=ms,e[173]=bn,e[174]=tn):tn=e[174];let sn;e[175]!==Jt||e[176]!==as||e[177]!==ms||e[178]!==Mn?(sn=Mn.length>0&&s.jsx(Ze,{noBorder:!0,headerInteractable:!0,title:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"select-none",children:ms?s.jsx(p,v({},st.allConnectorsTitle)):s.jsx(p,v({},st.connectorsTitle))}),as==="UNLINKED_NON_APP_CONNECTORS"&&Jt]}),description:s.jsx(p,pe(v({},st.connectorsDescription),{values:{link:Mh}})),children:s.jsx(Ti,{connectors:Mn})}),e[175]=Jt,e[176]=as,e[177]=ms,e[178]=Mn,e[179]=sn):sn=e[179];let Hn;e[180]===Symbol.for("react.memo_cache_sentinel")?(Hn=s.jsxs(Ze,{children:[s.jsx("span",{id:"developer-mode-settings"}),s.jsx(mh,{})]}),e[180]=Hn):Hn=e[180];let Wn;return e[181]!==en||e[182]!==tn||e[183]!==sn?(Wn=s.jsxs(s.Fragment,{children:[en,tn,sn,Hn]}),e[181]=en,e[182]=tn,e[183]=sn,e[184]=Wn):Wn=e[184],Wn};function mh(){const t=ce(),e=Pt(),n=ot(()=>Ns(t));return!ot(()=>cr(t))&&!n?null:s.jsxs(s.Fragment,{children:[s.jsx("hr",{className:"border-token-border-default mt-8"}),s.jsx(le,{children:s.jsx(xn,{label:s.jsx(p,v({},st.advancedSettings)),onClick:()=>e("#settings/Connectors/Advanced")})})]})}const st=Be({deepResearchDisabledByAdmin:{id:"uYQCnH",defaultMessage:"Your admin has not enabled deep research for Google Drive."},appsTitle:{id:"0bv3My",defaultMessage:"Apps"},connectorsTitle:{id:"CRwNSN",defaultMessage:"Connectors"},appsDescription:{id:"cg5JvO",defaultMessage:"Connect apps so you can talk to them with visual and interactive experiences in ChatGPT. <link>Learn more</link>."},connectorsDescription:{id:"qKGquG",defaultMessage:"ChatGPT can access information from your connected tools to give you more useful answers. Your permissions are always respected. <link>Learn more</link>."},secureSigninTitle:{id:"wGZ2DC",defaultMessage:"Secure sign in with ChatGPT"},secureSigninDescription:{id:"5XRQKi",defaultMessage:"Sign in to websites and apps across the internet with the trusted security of ChatGPT. <link>Learn more</link>"},enabledAppsAndConnectorsTitle:{id:"CUe6tM",defaultMessage:"Enabled apps & connectors"},enabledConnectorsTitle:{id:"Ew4Xpl",defaultMessage:"Enabled connectors"},enabledConnectorsDescription:{id:"OEoK2K",defaultMessage:"The apps and connectors youve enabled appear here. ChatGPT can use them in your conversations, based on the permissions youve granted."},allAppsTitle:{id:"h1RBCc",defaultMessage:"Browse apps"},allConnectorsTitle:{id:"cL3AUC",defaultMessage:"Browse connectors"},contactAdminTooltip:{id:"q5N+up",defaultMessage:"Contact your admin to enable Google Drive for chat."},error:{id:"F+mY2E",defaultMessage:"Error fetching connectors"},createCustomConnectorButton:{id:"jeLjEI",defaultMessage:"Create"},createCustomConnectorDisabledByAdmin:{id:"createCustomConnectorDisabledByAdmin",defaultMessage:"Your admin has not enabled access to Developer Mode."},syncForBetterAnswers:{id:"6wQ3rX",defaultMessage:"Enable sync"},syncForBetterAnswersTooltip:{id:"zhVkue",defaultMessage:"Sync Google Drive files to ChatGPT for faster, more relevant answers."},syncFilesForBetterAnswersTooltip:{id:"+u4cD2",defaultMessage:"Sync {connector} files to ChatGPT for faster, more relevant answers."},syncConnectorSuccess:{id:"oyKGlh",defaultMessage:"{connector} is now connected and syncing."},syncConnectorError:{id:"P7CgsH",defaultMessage:"Failed to connect and start syncing {connector}."},addChatAndOrDeepResearch:{id:"4/yhnQ",defaultMessage:"Add chat, deep research"},addDeepResearch:{id:"PT3yzw",defaultMessage:"Add deep research"},deepResearchDescription:{id:"1POyn5",defaultMessage:"Deep research"},fileUploadsDescription:{id:"mYsWe4",defaultMessage:"File uploads"},advancedSettings:{id:"6qpafZ",defaultMessage:"Advanced settings"},setupIncompleteGithub:{id:"WPhFYm",defaultMessage:"Setup incomplete"},noConnectorsAvailable:{id:"rOddez",defaultMessage:"No connectors available"}});function fh(t){return t.id}function ph(t){var e;return(e=t.branding)==null?void 0:e.is_discoverable_app}function hh(t){return t.user_connection_details.connection_type==="sharepoint_admin_sync_connector"&&t.user_connection_details.auth_status==="admin_connected"}function xh(t){return t.connector.id}function yh(t){return t.user_connection_details.auth_status!=="not_connected"}function bh(t){return s.jsx(wn,{href:"https://help.openai.com/en/articles/12503483-apps-in-chatgpt-and-the-apps-sdk",openNewTab:!0,children:t})}function Mh(t){return s.jsx(wn,{href:"https://help.openai.com/en/collections/12923329-connected-apps",openNewTab:!0,children:t})}const Ch=R(()=>L(()=>import("./jgtgxlzsiw2y9b3q.js"),__vite__mapDeps([30,1,15,16,14,17,31])).then(t=>t.GithubOnboardingModal)),_h=R(()=>L(()=>import("./eun1zfbuzay3hdi2.js"),__vite__mapDeps([35,1,15,16])).then(t=>t.ConnectorsUpgradeModal)),vh=t=>{"use forget";const e=_e.c(34),{onAddLinkClick:n,onCreateCustomConnectorClick:a}=t,o=ce(),i=Pt(),l=Cs(),d=kr(),c=As(),r=kt(),m=to(!0,rt.CONNECTOR_SETTING);let g;e[0]!==m.platformConnectors?(g=m.platformConnectors.has(Ko),e[0]=m.platformConnectors,e[1]=g):g=e[1];const u=g,f=S.useRef(!1),h=Yc(),_=l.hash.startsWith("#settings/Connectors/Advanced");let b;e[2]!==o?(b=Oe(o,"2050949565"),e[2]=o,e[3]=b):b=e[3];const j=b;let y,M;e[4]!==r||e[5]!==d||e[6]!==m.isLoading||e[7]!==o||e[8]!==u||e[9]!==j||e[10]!==c?(y=()=>{!d||d!==Ko||!j||!r||!r.isFree()||m.isLoading||u||f.current||(f.current=!0,c(),nt(o,_h))},M=[r,d,m.isLoading,o,u,j,c],e[4]=r,e[5]=d,e[6]=m.isLoading,e[7]=o,e[8]=u,e[9]=j,e[10]=c,e[11]=y,e[12]=M):(y=e[11],M=e[12]),S.useEffect(y,M);let C,k;e[13]!==o||e[14]!==i?(C=()=>{const P=window.location.hash,U=P.indexOf("?");if(U===-1)return;const I=new URLSearchParams(P.substring(U+1));if(I.has("github_onboarding")){const q=I.get("github_onboarding");let Q=jn.ConfigureRepos;q&&[jn.ConfigureRepos,jn.SyncRepos,jn.IndexRepos].includes(q)&&(Q=q),nt(o,Ch,{initialState:Q}),I.delete("github_onboarding");const D=P.substring(0,U),F=I.toString()?"".concat(D,"?").concat(I.toString()):D;i({hash:F},{replace:!0})}},k=[o,i],e[13]=o,e[14]=i,e[15]=C,e[16]=k):(C=e[15],k=e[16]),S.useEffect(C,k);let E,w;if(e[17]!==d?(E=()=>{Qc.logEntryPointShown({referrer:rn.SettingsConnectorsTab}),d?Ge.logEventWithStatsig("Connectors Details Settings Modal Shown","chatgpt_connectors_details_settings_modal_shown",{type:d}):Ge.logEventWithStatsig("Connectors Settings Modal Shown","chatgpt_connectors_settings_modal_shown")},w=[d],e[17]=d,e[18]=E,e[19]=w):(E=e[18],w=e[19]),S.useEffect(E,w),d){let P;return e[20]!==d||e[21]!==n?(P=s.jsx(th,{connectorId:d,onAddClick:n}),e[20]=d,e[21]=n,e[22]=P):P=e[22],P}if(_){let P;return e[23]!==i?(P=s.jsx(_p,{onBack:()=>i("#settings/Connectors",{replace:!0})}),e[23]=i,e[24]=P):P=e[24],P}let x;e[25]!==n||e[26]!==a?(x=s.jsx(gh,{onCreateCustomConnectorClick:a,onAddClick:n}),e[25]=n,e[26]=a,e[27]=x):x=e[27];let T;e[28]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(yp,{}),e[28]=T):T=e[28];let N;e[29]!==h?(N=h&&s.jsx(Jc,{}),e[29]=h,e[30]=N):N=e[30];let A;return e[31]!==N||e[32]!==x?(A=s.jsxs(s.Fragment,{children:[x,T,N]}),e[31]=N,e[32]=x,e[33]=A):A=e[33],A},Mo=({defaultValue:t,onContinue:e,options:n})=>{const[a,o]=S.useState(t);return s.jsxs(s.Fragment,{children:[s.jsx(vu,{value:a,onValueChange:i=>o(i),className:"flex flex-col gap-2 pt-8 pb-6",children:n.map(({value:i,label:l,description:d,Icon:c,Badge:r,disabled:m,tooltip:g})=>{const u=s.jsxs(ju,{value:i,className:Ms("border-token-border-default flex items-center gap-4 rounded-2xl border p-4 text-sm",m&&"cursor-not-allowed opacity-60"),disabled:m,children:[c&&s.jsx("span",{children:s.jsx(c,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex-1 text-start",children:[s.jsxs("div",{className:"flex items-center gap-1.5 pb-0.5",children:[typeof l=="string"?l:s.jsx(p,v({},l)),r&&s.jsx(r,{})]}),s.jsx("div",{className:"text-token-text-secondary",children:typeof d=="string"?d:s.jsx(p,v({},d))})]}),a===i?s.jsx(Su,{className:"flex h-5 w-5 items-center justify-center rounded-full bg-gray-950 p-0.5 dark:bg-white",children:s.jsx("div",{className:"h-2 w-2 rounded-full bg-white dark:bg-gray-950"})}):s.jsx("div",{className:"border-token-border-default h-5 w-5 rounded-full border"})]},i);return g?s.jsx(Wt,{label:s.jsx("div",{className:"max-w-50",children:typeof g=="string"?g:s.jsx(p,v({},g))}),side:"right",children:u},i):u})}),s.jsx(te,{className:"w-full",size:"large",disabled:!a,onClick:()=>{a&&e(a)},children:s.jsx(p,v({},jh.nextStepButton))})]})},jh=Be({nextStepButton:{id:"addConnectorLinkModal.nextStepButton",defaultMessage:"Continue"}}),wi=R(()=>L(()=>import("./hn0hl0c8spo9mfdq.js"),__vite__mapDeps([36,1])),{loading:t=>K(t)}),Sh=R(()=>L(()=>import("./ea3j10kjv7ntyk1b.js"),__vite__mapDeps([37,1])),{loading:t=>K(t)}),Eh=R(()=>L(()=>import("./mtkzc0bar32cfrm8.js"),__vite__mapDeps([34,1])),{loading:t=>K(t)}),Th=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zm),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)}),kh=R(()=>L(()=>import("./foakg84w5wpjdwdx.js"),__vite__mapDeps([38,1])),{loading:t=>K(t)}),Nh=t=>{"use forget";var de,V;const e=_e.c(49),{connector:n,onClose:a,onContinue:o,canAddDeepResearch:i,canAddInternalKnowledge:l,canAddOdyssey:d,messages:c}=t,r=kt(),m=Js(),g=!!(r!=null&&r.isPersonalAccount()&&m);let u;e[0]!==c.syncBadge?(u=()=>{"use forget";return s.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[s.jsx(Eh,{}),s.jsx(p,v({},c.syncBadge))]})},e[0]=c.syncBadge,e[1]=u):u=e[1];const f=u;let h;e[2]!==c.recommendedBadge?(h=()=>{"use forget";return s.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:s.jsx(p,v({},c.recommendedBadge))})},e[2]=c.recommendedBadge,e[3]=h):h=e[3];const _=h;let b;e[4]!==f||e[5]!==c.internalKnowledgeDescription||e[6]!==c.internalKnowledgeTitle?(b={value:"internalKnowledge",label:c.internalKnowledgeTitle,description:c.internalKnowledgeDescription,Icon:kh,Badge:f},e[4]=f,e[5]=c.internalKnowledgeDescription,e[6]=c.internalKnowledgeTitle,e[7]=b):b=e[7];const j=b;let y;e[8]!==_||e[9]!==c.syncDescription||e[10]!==c.syncTitle?(y={value:"internalKnowledge",label:c.syncTitle,description:c.syncDescription,Icon:Sh,Badge:_},e[8]=_,e[9]=c.syncDescription,e[10]=c.syncTitle,e[11]=y):y=e[11];const M=y;let C;e[12]!==c.deepResearchDescription||e[13]!==c.deepResearchTitle?(C={value:"deepResearch",label:c.deepResearchTitle,description:c.deepResearchDescription,Icon:wi},e[12]=c.deepResearchDescription,e[13]=c.deepResearchTitle,e[14]=C):C=e[14];const k=C;let E;e[15]!==c.deepResearchAndOdysseyDescription||e[16]!==c.deepResearchAndOdysseyTitle?(E={value:"deepResearchAndOdyssey",label:c.deepResearchAndOdysseyTitle,description:c.deepResearchAndOdysseyDescription,Icon:wi},e[15]=c.deepResearchAndOdysseyDescription,e[16]=c.deepResearchAndOdysseyTitle,e[17]=E):E=e[17];const w=E;let x;e[18]!==c.dontSyncDescription||e[19]!==c.dontSyncTitle?(x={value:"deepResearch",label:c.dontSyncTitle,description:c.dontSyncDescription,Icon:Th},e[18]=c.dontSyncDescription,e[19]=c.dontSyncTitle,e[20]=x):x=e[20];const T=x,N=g?M:j;let A;e[21]!==l||e[22]!==c.internalKnowledgeTooltip?(A=l?{}:v({disabled:!0},c.internalKnowledgeTooltip?{tooltip:c.internalKnowledgeTooltip}:{}),e[21]=l,e[22]=c.internalKnowledgeTooltip,e[23]=A):A=e[23];let P;e[24]!==N||e[25]!==A?(P=v(v({},N),A),e[24]=N,e[25]=A,e[26]=P):P=e[26];const U=P,I=d?w:g?T:k;let q;e[27]!==i||e[28]!==I?(q=i?I:pe(v({},I),{disabled:!0}),e[27]=i,e[28]=I,e[29]=q):q=e[29];const Q=q;let D;e[30]!==U||e[31]!==Q?(D=[U,Q],e[30]=U,e[31]=Q,e[32]=D):D=e[32];const F=D;let G;e[33]!==c.selectProductTitle?(G=s.jsx(p,v({},c.selectProductTitle)),e[33]=c.selectProductTitle,e[34]=G):G=e[34];let X;e[35]!==n?(X=s.jsx(Xs,{connector:n,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),e[35]=n,e[36]=X):X=e[36];const B=(V=(de=n.branding)==null?void 0:de.developer)!=null?V:void 0;let $;e[37]!==a||e[38]!==G||e[39]!==X||e[40]!==B?($=s.jsx(xa,{title:G,connectorIcon:X,connectorDeveloper:B,onClose:a}),e[37]=a,e[38]=G,e[39]=X,e[40]=B,e[41]=$):$=e[41];const H=g?"internalKnowledge":void 0;let J;e[42]!==F||e[43]!==o||e[44]!==H?(J=s.jsx(Mo,{defaultValue:H,onContinue:o,options:F}),e[42]=F,e[43]=o,e[44]=H,e[45]=J):J=e[45];let W;return e[46]!==$||e[47]!==J?(W=s.jsxs(s.Fragment,{children:[$,J]}),e[46]=$,e[47]=J,e[48]=W):W=e[48],W},_s=({messages:t})=>n=>s.jsx(Nh,pe(v({},n),{messages:t})),wh=Be({selectProductTitle:{id:"r2npOY",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"ZQSdTY",defaultMessage:"Chat, deep research, agent"},deepResearchAndOdysseyDescription:{id:"gzPmCe",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},deepResearchDescription:{id:"L+S/jI",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},dontSyncTitle:{id:"YcPoIP",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uO+gdP",defaultMessage:"ChatGPT will read your Google Drive files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"t5mu4H",defaultMessage:"Chat, deep research, agent"},internalKnowledgeDescription:{id:"0xFkEA",defaultMessage:"Sync Drive files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"yMY2Ng",defaultMessage:"Sync"},syncDescription:{id:"fcoBBw",defaultMessage:"Sync Google Drive files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"AEBXx0",defaultMessage:"Contact your admin to enable Google Drive for chat"}}),Ph=_s({messages:wh}),Ah=({connector:t,internalKnowledgeConfigs:e,onClose:n,onContinue:a})=>{var i,l;const o=S.useMemo(()=>e.filter(d=>d.user_connection_details.auth_status==="not_connected").map(d=>({value:d.user_connection_details.connection_instance_id,label:d.connection_display_info.display_name,description:d.connection_display_info.description})),[e]);return s.jsxs(s.Fragment,{children:[s.jsx(xa,{title:s.jsx(p,v({},Ih.selectConnectionTitle)),connectorIcon:s.jsx(Xs,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(l=(i=t.branding)==null?void 0:i.developer)!=null?l:void 0,onClose:n}),s.jsx(Mo,{onContinue:a,options:o})]})},Ih=Be({selectConnectionTitle:{id:"2rQetR",defaultMessage:"Select a connection"}}),Dh=R(()=>L(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([8,1])),{loading:t=>K(t)}),Oh=R(()=>L(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([27,1])),{loading:t=>K(t)}),Lh=R(()=>L(()=>import("./omh7pce8seqk5731.js"),__vite__mapDeps([39,1,15,16,40,41,14,17,42,43,44])).then(t=>t.RedirectContent)),Rh=({onClose:t,connector:e,noRedirect:n})=>{const a=ce(),o=Y(),i=Pt(),l=gt(),d=Js(),c=!!Nr(),r=kt(),m=!!(r!=null&&r.isPersonalAccount()&&d),{isLoading:g,internalKnowledgeConfigs:u,internalKnowledgeEnabled:f}=Ln(),{mutateAsync:h}=Rn(),{availableConnectors:_}=wr(),{availableConnectors:b}=qr(),[j,y]=S.useMemo(()=>Yr(u!=null?u:[],V=>V.user_connection_details.auth_status==="not_connected"),[u]),M=go(),C=j.length,k=y.length,[E,w]=S.useState(!1),[x,T]=S.useState(c?"internalKnowledge":null),[N,A]=S.useState(null),P=S.useMemo(()=>C===1?u==null?void 0:u[0]:N?u==null?void 0:u.find(V=>V.user_connection_details.connection_instance_id===N):void 0,[C,u,N]),[U,I]=S.useState(!1),{connectorLinks:q,refetch:Q}=Bs({productSku:rt.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:D}=Bs({productSku:rt.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),F=S.useMemo(()=>{var V;return!!((V=q.get(is))!=null&&V.length)},[q]),G=!F&&_.some(V=>V.type===O.GDRIVE_ACTION_CONNECTOR),X=!F&&b.some(V=>V.type===O.GDRIVE_ACTION_CONNECTOR),B=C>0||m,$=(G||X)&&(B||!(r!=null&&r.isPersonalAccount())&&f&&k<1&&!m),H=x==="deepResearch"||x==="deepResearchAndOdyssey"||!$&&(G||X),J=x==="internalKnowledge"||!$&&B,W=m&&x==="internalKnowledge",de=S.useCallback(async()=>{try{I(!0),Ma("popup"),Ge.logEventWithStatsig("Connectors - Connect Personal Google Drive","chatgpt_connectors_connect_personal_google_drive_clicked",{sync:W?"true":"false"});const V=await ha({connector:e,openPopup:!0,toaster:W?void 0:l,intl:o,productSku:rt.CONNECTOR_SETTING});if(Q(),D(),(V==null?void 0:V.errorType)==="oauth_failed_scope_mismatch"){I(!1),w(!0);return}V!=null&&V.linkId&&W&&h({link:{id:V.linkId,name:e.name,connector_id:Te[O.GDRIVE_ACTION_CONNECTOR]},isConnectingAndUpgrading:!0}).then(()=>{ws(a)});const se=M(e);n?t():se?window.location.href=se:(t(),setTimeout(()=>{i(Qa,{replace:!0})},500)),w(!1)}catch(V){I(!1)}},[a,W,e,l,o,Q,D,M,n,h,t,i]);return g?s.jsx("div",{className:"flex justify-center",children:s.jsx(Ut,{})}):E?s.jsxs(s.Fragment,{children:[s.jsx(xa,{onClose:t,connectorIcon:s.jsx("div",{className:"rounded-xl border-[0.5px] bg-white p-2 shadow-sm",children:s.jsx(Oh,{height:32,width:32})}),title:o.formatMessage({id:"LrBpzI",defaultMessage:"Permissions required"})}),s.jsxs("div",{className:"border-token-border-default text-token-text-secondary mt-8 mb-6 flex items-center gap-4 rounded-xl border p-4 text-sm",children:[s.jsx(Dh,{className:"icon-lg"}),s.jsx(p,{id:"googleDriveLinkingModalDescription",defaultMessage:"In the next step, make sure to check all boxes. ChatGPT requires the full list of Google permissions."})]}),s.jsx(te,{className:"w-full",onClick:de,loading:U,size:"large",children:s.jsx(p,{id:"reconnect",defaultMessage:"Reconnect"})})]}):s.jsxs(s.Fragment,{children:[$&&!x&&s.jsx(Ph,{onClose:t,connector:e,onContinue:T,canAddDeepResearch:G,canAddOdyssey:X,canAddInternalKnowledge:B}),(H||W)&&s.jsx(Lh,{connector:e,onClose:t,isConnecting:U,onContinue:de,productSku:rt.CONNECTOR_SETTING}),J&&C>1&&!N&&s.jsx(Ah,{internalKnowledgeConfigs:u!=null?u:[],onClose:t,connector:e,onContinue:A}),J&&P&&!W&&s.jsx(sr,{isAdminFlow:!1,onClose:()=>{T(null),A(null),$||t()},connectionId:P.user_connection_details.connection_instance_id,location:"user_settings",onSuccess:()=>{setTimeout(()=>{ws(a)},1e3),t()},excludeModalWrapper:!0})]})},Bh=Be({selectProductTitle:{id:"uecmFA",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"ZQSdTY",defaultMessage:"Chat, deep research, agent"},deepResearchAndOdysseyDescription:{id:"plFxz/",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},deepResearchDescription:{id:"D9wqqk",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},dontSyncTitle:{id:"FNGsn2",defaultMessage:"Don't sync"},dontSyncDescription:{id:"ol0mde",defaultMessage:"ChatGPT will read your SharePoint files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"9IqPsM",defaultMessage:"Chat, deep research, agent"},internalKnowledgeDescription:{id:"Mkivbe",defaultMessage:"Sync SharePoint files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"w0EP7L",defaultMessage:"Sync"},syncDescription:{id:"WmlsRw",defaultMessage:"Sync SharePoint files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"g8mQKA",defaultMessage:"Contact your admin to enable SharePoint for chat"}}),Fh=_s({messages:Bh}),Uh=Be({selectProductTitle:{id:"EcfaIh",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"7f5MJU",defaultMessage:"Find, analyze, and synthesize your HubSpot data to create comprehensive reports"},deepResearchDescription:{id:"52mZY5",defaultMessage:"Find, analyze, and synthesize your HubSpot data to create comprehensive reports"},dontSyncTitle:{id:"bIOtPo",defaultMessage:"Don't sync"},dontSyncDescription:{id:"R5dVLr",defaultMessage:"ChatGPT will read your HubSpot data as needed, so replies may be slower."},internalKnowledgeTitle:{id:"R09hUc",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"Gf7d++",defaultMessage:"Sync HubSpot data to ChatGPT for more relevant, up-to-date answers"},internalKnowledgeTooltip:{id:"uCYMoO",defaultMessage:"Contact your admin to enable HubSpot for chat"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"9Au+em",defaultMessage:"Sync"},syncDescription:{id:"BYPzIj",defaultMessage:"Sync HubSpot data to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Gh=_s({messages:Uh}),Vh=Be({selectProductTitle:{id:"bpaehG",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"2EXqDU",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},deepResearchDescription:{id:"pNQbc3",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},dontSyncTitle:{id:"pFj6Xq",defaultMessage:"Don't sync"},dontSyncDescription:{id:"QX+ada",defaultMessage:"ChatGPT will read your Jira issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iK7v/r",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"RBzElS",defaultMessage:"Sync Jira issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"2NrkD8",defaultMessage:"Sync"},syncDescription:{id:"l4VShM",defaultMessage:"Sync Jira issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"vM2Wdq",defaultMessage:"Contact your admin to enable Jira for chat"}}),zh=_s({messages:Vh}),Hh=Be({selectProductTitle:{id:"0hzRKh",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"hVvY37",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},deepResearchDescription:{id:"hbh71y",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},dontSyncTitle:{id:"9CKUT3",defaultMessage:"Don't sync"},dontSyncDescription:{id:"yeSkeT",defaultMessage:"ChatGPT will read your Jira Service Management tickets as needed, so replies may be slower."},internalKnowledgeTitle:{id:"jvk58G",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"qv1dVO",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"dk0bHH",defaultMessage:"Sync"},syncDescription:{id:"pgpt5C",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"arahcS",defaultMessage:"Contact your admin to enable Jira Service Management for chat"}}),Wh=_s({messages:Hh}),Dl=R(()=>L(()=>import("./hn0hl0c8spo9mfdq.js"),__vite__mapDeps([36,1])),{loading:t=>K(t)}),Kh=R(()=>L(()=>import("./ea3j10kjv7ntyk1b.js"),__vite__mapDeps([37,1])),{loading:t=>K(t)}),$h=R(()=>L(()=>import("./mtkzc0bar32cfrm8.js"),__vite__mapDeps([34,1])),{loading:t=>K(t)}),qh=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zm),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)}),Yh=R(()=>L(()=>import("./foakg84w5wpjdwdx.js"),__vite__mapDeps([38,1])),{loading:t=>K(t)}),Qh=()=>s.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[s.jsx($h,{}),s.jsx(p,v({},ss.syncBadge))]}),Jh=()=>s.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:s.jsx(p,v({},ss.recommendedBadge))}),Zh=({connector:t,onClose:e,onContinue:n,canAddDeepResearch:a,canAddInternalKnowledge:o,canAddOdyssey:i})=>{var g,u;const l=kt(),d=Js(),c=!!(l!=null&&l.isPersonalAccount()&&d),r=Y(),m=S.useMemo(()=>[v(v({},c?sx:tx),o?{}:{disabled:!0,tooltip:r.formatMessage({id:"GbkN+V",defaultMessage:"Contact your admin to enable Notion for chat"})}),...a?[i?ex:c?nx:Xh]:[]],[c,o,r,a,i]);return s.jsxs(s.Fragment,{children:[s.jsx(xa,{title:s.jsx(p,v({},ss.selectProductTitle)),connectorIcon:s.jsx(Xs,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(u=(g=t.branding)==null?void 0:g.developer)!=null?u:void 0,onClose:e}),s.jsx(Mo,{defaultValue:c?"internalKnowledge":void 0,onContinue:n,options:m})]})},ss=Be({selectProductTitle:{id:"DAwG09",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"KXsRFb",defaultMessage:"Find, analyze, and synthesize your team's Notion pages and databases to create comprehensive reports"},deepResearchDescription:{id:"gZpO3N",defaultMessage:"Find, analyze, and synthesize Notion pages and databases for richer reports"},dontSyncTitle:{id:"GMrSDT",defaultMessage:"Don't sync"},dontSyncDescription:{id:"y/IdPs",defaultMessage:"ChatGPT will read your Notion content as needed, so replies may be slower."},internalKnowledgeTitle:{id:"QJf1Sc",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"lJilfk",defaultMessage:"Sync Notion pages and databases to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"7Ar/Ej",defaultMessage:"Sync"},syncDescription:{id:"6WCZbJ",defaultMessage:"Sync Notion content to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Xh={value:"deepResearch",label:ss.deepResearchTitle,description:ss.deepResearchDescription,Icon:Dl},ex={value:"deepResearchAndOdyssey",label:ss.deepResearchAndOdysseyTitle,description:ss.deepResearchAndOdysseyDescription,Icon:Dl},tx={value:"internalKnowledge",label:ss.internalKnowledgeTitle,description:ss.internalKnowledgeDescription,Icon:Yh,Badge:Qh},sx={value:"internalKnowledge",label:ss.syncTitle,description:ss.syncDescription,Icon:Kh,Badge:Jh},nx={value:"deepResearch",label:ss.dontSyncTitle,description:ss.dontSyncDescription,Icon:qh},ax=Be({selectProductTitle:{id:"tiiSob",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"E2YSMq",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},deepResearchDescription:{id:"sQ+00J",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},dontSyncTitle:{id:"M9p5Sr",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uJTHjO",defaultMessage:"ChatGPT will read your Box files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8z2iu4",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"xK+380",defaultMessage:"Sync Box files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"nbQOhy",defaultMessage:"Sync"},syncDescription:{id:"QVxBJI",defaultMessage:"Sync Box files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"4Gp6+x",defaultMessage:"Contact your admin to enable Box for chat"}}),ox=_s({messages:ax}),ix=Be({selectProductTitle:{id:"Kc1KGe",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"YxjjQU",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},deepResearchDescription:{id:"SmRTX8",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},dontSyncTitle:{id:"B1m/Ur",defaultMessage:"Don't sync"},dontSyncDescription:{id:"nDBuCO",defaultMessage:"ChatGPT will read your Confluence pages as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8ckwHH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"CkaEi7",defaultMessage:"Sync Confluence pages to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"tJk3ba",defaultMessage:"Sync"},syncDescription:{id:"di8xMd",defaultMessage:"Sync Confluence pages to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"dKvJHF",defaultMessage:"Contact your admin to enable Confluence for chat"}}),rx=_s({messages:ix}),lx=Be({selectProductTitle:{id:"5spMkf",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"U0acJQ",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},deepResearchDescription:{id:"jIJEzP",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},dontSyncTitle:{id:"8B2iTh",defaultMessage:"Don't sync"},dontSyncDescription:{id:"MWu53i",defaultMessage:"ChatGPT will read your Dropbox files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iUMNhW",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"73blMa",defaultMessage:"Sync Dropbox files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"aRVh2X",defaultMessage:"Sync"},syncDescription:{id:"uTHxb2",defaultMessage:"Sync Dropbox files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"/uVHMl",defaultMessage:"Contact your admin to enable Dropbox for chat"}}),cx=_s({messages:lx}),dx=Be({selectProductTitle:{id:"vNGjSS",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"1X1JDE",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},deepResearchDescription:{id:"0ExpFM",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},dontSyncTitle:{id:"4WufmE",defaultMessage:"Don't sync"},dontSyncDescription:{id:"0BFTy+",defaultMessage:"ChatGPT will read your Intercom conversations as needed, so replies may be slower."},internalKnowledgeTitle:{id:"m/G/ff",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"4gC4/b",defaultMessage:"Sync Intercom conversations to ChatGPT for more relevant, up-to-date answers"},internalKnowledgeTooltip:{id:"YxCdN8",defaultMessage:"Contact your admin to enable Intercom for chat"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"jafwiu",defaultMessage:"Sync"},syncDescription:{id:"ISqAI/",defaultMessage:"Sync Intercom conversations to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),ux=_s({messages:dx}),gx=Be({selectProductTitle:{id:"kU51Yz",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"5P9nHy",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},deepResearchDescription:{id:"7qO5UY",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},dontSyncTitle:{id:"s+7AVU",defaultMessage:"Don't sync"},dontSyncDescription:{id:"qQEaBe",defaultMessage:"ChatGPT will read your Linear issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"CZbTgH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"S+Hglq",defaultMessage:"Sync Linear issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"XI3bjb",defaultMessage:"Sync"},syncDescription:{id:"3e8sdS",defaultMessage:"Sync Linear issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"lxy6iQ",defaultMessage:"Contact your admin to enable Linear for chat"}}),mx=_s({messages:gx}),fx=R(()=>L(()=>import("./ch25v6qwrkxmelev.js"),__vite__mapDeps([45,1])),{loading:t=>K(t)}),Pi=R(()=>L(()=>import("./omh7pce8seqk5731.js"),__vite__mapDeps([39,1,15,16,40,41,14,17,42,43,44])).then(t=>t.RedirectContent));function mt({platformConnectorType:t,knowledgeConnectorType:e,connectorId:n,ProductSelectComponent:a,syncConnectorId:o,showProductSelectWithoutDeepResearch:i}){return function({onClose:d,connector:c}){const r=Y(),m=r.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),g=Pr(),u=!!Nr(),[f,h]=S.useState(!1),_=kt(),b=Js(),j=ce(),y=rs(j),M=S.useMemo(()=>Ar(c.link_params_schema),[c.link_params_schema]),[C,k]=S.useState({}),E=S.useMemo(()=>Ir(M,C),[M,C]),[w,x]=S.useState({}),T=S.useMemo(()=>{const Z=new Set(M.map(oe=>oe.name)),Ce={};for(const[oe,ne]of Object.entries(w))Z.has(oe)&&(Ce[oe]=ne);return Ce},[w,M]),N=S.useCallback((Z,Ce)=>{k(oe=>pe(v({},oe),{[Z]:Ce})),x(oe=>{if(!oe[Z])return oe;const ne=v({},oe);return delete ne[Z],ne})},[]),A=(_==null?void 0:_.planType)===ut.SELF_SERVE_BUSINESS?!0:!!(_!=null&&_.isPersonalAccount()&&b),{availableConnectors:P,isLoading:U}=wr(),{availableConnectors:I,isLoading:q}=qr(),{isLoading:Q,internalKnowledgeConfigs:D,internalKnowledgeEnabled:F}=Fx(e),[G,X]=S.useMemo(()=>Yr(D!=null?D:[],Z=>Z.user_connection_details.auth_status==="not_connected"),[D]),B=G.length,$=X.length,H=B>0||A,{connectorLinks:J,refetch:W,isLoading:de}=Bs({productSku:rt.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:V}=Bs({productSku:rt.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),se=go(),{mutateAsync:ae}=Rn(),Ne=S.useMemo(()=>{var Z;return!!((Z=J.get(n))!=null&&Z.length)},[J]),Me=!Ne&&P.some(Z=>Z.type===t),Ae=!Ne&&I.some(Z=>Z.type===t),ve=Me||Ae,Le=!!(a&&i&&H),je=!!a&&g!==rt.DEEP_RESEARCH&&(ve||Le)&&(H||!(_!=null&&_.isPersonalAccount())&&F&&$<1&&!A),Ke=ve?Ae?"deepResearchAndOdyssey":"deepResearch":null,Je=H&&ve,et=g!==rt.DEEP_RESEARCH&&Je&&Oe(j,"3495630358"),tt=o==null,[z,ue]=S.useState(()=>u||H&&!ve?"internalKnowledge":g===rt.DEEP_RESEARCH?"deepResearch":et?tt?"internalKnowledge":Ke:null),Ie=g===rt.DEEP_RESEARCH||z==="deepResearch"||z==="deepResearchAndOdyssey"||!je&&ve,me=z==="internalKnowledge"||!je&&g!==rt.DEEP_RESEARCH&&H,he=Ie?rt.DEEP_RESEARCH:rt.CONNECTOR_SETTING,xe=me&&H,we=xe&&o!=null,$e=g!==rt.DEEP_RESEARCH&&(Q||je&&(U||q))||je&&de,ye=M.length>0?s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:s.jsx(p,v({},bs.sectionTitle))}),s.jsx("div",{className:"text-token-text-secondary text-xs",children:s.jsx(p,v({},bs.sectionDescription))})]}),s.jsx("div",{className:"flex flex-col gap-3",children:M.map(Z=>{var fe,Ue,Pe;const Ce=Z.required?r.formatMessage(bs.fieldLabelRequired,{label:Z.title}):Z.title,oe=r.formatMessage(bs.fieldPlaceholder,{label:Z.title}),ne=T[Z.name];if(Z.enumValues&&Z.enumValues.length>0){const Se="link_param_".concat(Z.name),De="".concat(Se,"_label"),qe=ne?"".concat(Se,"_error"):void 0,Ye=(fe=E[Z.name])!=null?fe:"";return s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{id:De,className:"text-token-text-primary text-xs font-semibold",htmlFor:Se,children:Ce}),s.jsxs(dt.Root,{value:Ye===""?void 0:Ye,onValueChange:ee=>N(Z.name,ee),children:[s.jsxs(dt.Trigger,{id:Se,"aria-labelledby":De,"aria-describedby":qe,"aria-invalid":ne?!0:void 0,className:"border-token-border-heavy bg-token-bg-primary w-full justify-between rounded-md text-start",children:[s.jsx("div",{className:"flex-1 truncate text-sm",children:s.jsx(dt.Value,{placeholder:oe})}),s.jsx(dt.Icon,{})]}),s.jsx(dt.Portal,{children:s.jsx(dt.Content,{className:"border-token-border-heavy border",children:(Ue=Z.enumValues)==null?void 0:Ue.map(ee=>s.jsx(dt.Item,{value:ee,children:ee},ee))})})]}),ne?s.jsxs("div",{id:qe,className:"flex items-center gap-1 text-xs text-red-500",children:[s.jsx(fx,{title:m}),ne]}):null,Z.description?s.jsx("div",{className:"text-token-text-secondary text-xs",children:Z.description}):null]},Z.name)}return s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx(fl,{name:"link_param_".concat(Z.name),displayName:Ce,value:(Pe=E[Z.name])!=null?Pe:"",onChange:Se=>N(Z.name,Se.target.value),placeholder:oe,error:ne,showErrorIcon:!0}),Z.description?s.jsx("div",{className:"text-token-text-secondary text-xs",children:Z.description}):null]},Z.name)})})]}):void 0,Fe=S.useCallback(async()=>{var Ce;let Z;if(M.length>0){const{sanitizedLinkParams:oe,errors:ne}=Dr(M,E,r);if(Object.keys(ne).length>0){x(ne),y.danger(r.formatMessage(bs.requiredFieldsToast));return}x({}),Z=oe}try{h(!0),Ma("popup");const oe=se(c),ne=we&&o!=null?o:c.id,be=await ha({connector:c,redirectAfter:oe||void 0,toaster:y,openPopup:!0,intl:r,productSku:he,connectorIdOverride:we?o:void 0,linkParams:Z});if(await W(),xe)try{const{data:fe}=await V(),Ue=be&&typeof be=="object"?be.linkId:void 0,Pe=(Ce=fe==null?void 0:fe.get(ne))==null?void 0:Ce[0];let Se=null;typeof Ue=="string"?Se={id:Ue,name:c.name,connector_id:ne}:Pe&&typeof Pe.id=="string"&&(Se={id:Pe.id,name:c.name,connector_id:ne}),Se&&(await ae({link:Se,isConnectingAndUpgrading:!0}),setTimeout(()=>{ws(j)},1e3))}catch(fe){}d()}catch(oe){h(!1)}},[j,c,r,M,E,se,d,he,W,V,we,xe,y,ae]);return $e?s.jsx("div",{className:"flex justify-center",children:s.jsx(Ut,{})}):s.jsxs(s.Fragment,{children:[a&&je&&!z&&s.jsx(a,{onClose:d,connector:c,onContinue:ue,canAddDeepResearch:Me,canAddOdyssey:Ae,canAddInternalKnowledge:H}),(Ie||xe)&&s.jsx(Pi,{connector:c,onClose:d,isConnecting:f,onContinue:Fe,productSku:he,canSync:et,isRequestingSync:z==="internalKnowledge",setIsRequestingSync:Z=>ue(Z?"internalKnowledge":Ke),additionalContent:ye}),me&&!xe&&s.jsx(Pi,{connector:c,onClose:()=>{ue(null),je||d()},isConnecting:f,onContinue:Fe,productSku:he,canSync:et,isRequestingSync:z==="internalKnowledge",setIsRequestingSync:Z=>ue(Z?"internalKnowledge":Ke),additionalContent:ye})]})}}const px=mt({platformConnectorType:O.SHAREPOINT_CONNECTOR,knowledgeConnectorType:"sharepoint",connectorId:En,ProductSelectComponent:Fh}),hx=mt({platformConnectorType:O.DROPBOX_CONNECTOR,knowledgeConnectorType:"dropbox",connectorId:Cr,ProductSelectComponent:cx}),xx=mt({platformConnectorType:O.BOX_CONNECTOR,knowledgeConnectorType:"box",connectorId:_r,ProductSelectComponent:ox}),yx=mt({platformConnectorType:O.LINEAR_CONNECTOR,knowledgeConnectorType:"linear",connectorId:Mr,ProductSelectComponent:mx}),bx=mt({platformConnectorType:O.JIRA_CONNECTOR,knowledgeConnectorType:"jira",connectorId:Te[O.JIRA_CONNECTOR],ProductSelectComponent:zh}),Mx=mt({platformConnectorType:O.JIRA_SERVICEMANAGEMENT_CONNECTOR,knowledgeConnectorType:"jira_servicemanagement",connectorId:Te[O.JIRA_SERVICEMANAGEMENT_CONNECTOR],ProductSelectComponent:Wh}),Cx=mt({platformConnectorType:O.CONFLUENCE_CONNECTOR,knowledgeConnectorType:"confluence",connectorId:Te[O.CONFLUENCE_CONNECTOR],ProductSelectComponent:rx}),_x=mt({platformConnectorType:O.NOTION_CONNECTOR,knowledgeConnectorType:"notion",connectorId:jr,syncConnectorId:vr,ProductSelectComponent:Zh}),vx=mt({platformConnectorType:O.HUBSPOT_CONNECTOR,knowledgeConnectorType:"hubspot",connectorId:Er,syncConnectorId:Sr,ProductSelectComponent:Gh}),jx=mt({platformConnectorType:O.INTERCOM_CONNECTOR,knowledgeConnectorType:"intercom",connectorId:Tr,ProductSelectComponent:ux,showProductSelectWithoutDeepResearch:!0}),Sx=mt({platformConnectorType:O.AHA_CONNECTOR,knowledgeConnectorType:"aha",connectorId:Te[O.AHA_CONNECTOR]}),Ex=mt({platformConnectorType:O.ASANA_CONNECTOR,knowledgeConnectorType:"asana",connectorId:Te[O.ASANA_CONNECTOR]}),Tx=mt({platformConnectorType:O.AZURE_DEVOPS_CONNECTOR,knowledgeConnectorType:"azure_devops",connectorId:Te[O.AZURE_DEVOPS_CONNECTOR]}),kx=mt({platformConnectorType:O.CLICKUP_CONNECTOR,knowledgeConnectorType:"clickup",connectorId:Te[O.CLICKUP_CONNECTOR]}),Nx=mt({platformConnectorType:O.BASECAMP_CONNECTOR,knowledgeConnectorType:"basecamp",connectorId:Te[O.BASECAMP_CONNECTOR]}),wx=mt({platformConnectorType:O.GITLAB_CONNECTOR,knowledgeConnectorType:"gitlab",connectorId:Te[O.GITLAB_CONNECTOR]}),Px=mt({platformConnectorType:O.GORGIAS_CONNECTOR,knowledgeConnectorType:"gorgias",connectorId:Te[O.GORGIAS_CONNECTOR]}),Ax=mt({platformConnectorType:O.HELP_SCOUT_CONNECTOR,knowledgeConnectorType:"help_scout",connectorId:Te[O.HELP_SCOUT_CONNECTOR]}),Ix=mt({platformConnectorType:O.IRONCLAD_CONNECTOR,knowledgeConnectorType:"ironclad",connectorId:Te[O.IRONCLAD_CONNECTOR]}),Dx=mt({platformConnectorType:O.TEAMWORK_CONNECTOR,knowledgeConnectorType:"teamwork",connectorId:Te[O.TEAMWORK_CONNECTOR]}),Ox=mt({platformConnectorType:O.PIPEDRIVE_CONNECTOR,knowledgeConnectorType:"pipedrive",connectorId:Te[O.PIPEDRIVE_CONNECTOR]}),Lx=mt({platformConnectorType:O.ZOHO_CONNECTOR,knowledgeConnectorType:"zoho",connectorId:Te[O.ZOHO_CONNECTOR]}),Rx=mt({platformConnectorType:O.ZOHO_DESK_CONNECTOR,knowledgeConnectorType:"zoho_desk",connectorId:Te[O.ZOHO_DESK_CONNECTOR]}),Bx=mt({platformConnectorType:O.ZENDESK_CONNECTOR,knowledgeConnectorType:"zendesk",connectorId:Te[O.ZENDESK_CONNECTOR]});function Fx(t){const e=ma(),n=On(),a=S.useMemo(()=>{var o;return(o=n.data)==null?void 0:o.connection_statuses.filter(i=>i.user_connection_details.knowledge_connector_type===t)},[n.data,t]);return{isLoading:n.isLoading,internalKnowledgeEnabled:e,internalKnowledgeConfigs:e&&(a!=null&&a.length)?a:null}}const Ux=R(()=>L(()=>import("./ch25v6qwrkxmelev.js"),__vite__mapDeps([45,1])),{loading:t=>K(t)}),Gx=R(()=>L(()=>import("./omh7pce8seqk5731.js"),__vite__mapDeps([39,1,15,16,40,41,14,17,42,43,44])).then(t=>t.RedirectContent)),Vx=({connector:t,onClose:e,productSku:n,redirectAfter:a,authTypeOverride:o,noRedirect:i=!1})=>{"use no forget";const l=ce(),d=Y(),c=gt(),r=d.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),[m,g]=S.useState(!1),[u,f]=S.useState(void 0),{refetch:h}=Bs({productSku:n,fetchValidLinksOnly:!0}),_=Ja(),b=br(),j=go(),y=td(),[M,C]=fn(),k=sd(),E=nd(),w=t.id===Fa&&k,x=so[t.id]===O.GITHUB_CONNECTOR,T=S.useMemo(()=>Ar(t.link_params_schema),[t.link_params_schema]),[N,A]=S.useState({}),P=S.useMemo(()=>Ir(T,N),[T,N]),[U,I]=S.useState({}),q=S.useMemo(()=>{const B=new Set(T.map(H=>H.name)),$={};for(const[H,J]of Object.entries(U))B.has(H)&&($[H]=J);return $},[U,T]),Q=(B,$)=>{A(H=>pe(v({},H),{[B]:$})),I(H=>{if(!H[B])return H;const J=v({},H);return delete J[B],J})};let D=a;if(x){const B=new URL(a!=null?a:"/",window.location.origin);_&&(B.searchParams.append("github_onboarding","sync-repos"),D=B.pathname+B.search)}const F=async B=>{const $=ad(t,o!=null?o:B);let H;if($==="OAUTH"&&T.length>0){const{sanitizedLinkParams:J,errors:W}=Dr(T,P,d);if(Object.keys(W).length>0){I(W),c.danger(d.formatMessage(bs.requiredFieldsToast));return}I({}),H=J}try{switch(g(!0),f($),$){case"OAUTH":{i&&Ma("popup");const J=j(t);await ha({connector:t,redirectAfter:i?void 0:J||D,toaster:c,openPopup:i?!0:b,intl:d,productSku:n,slackTeamIdOverride:t.id===Fa&&E!=null?E:void 0,linkParams:H}),await h(),e();break}case"NONE":{await od(t),await Promise.all([h(),id.refetch(l)]),e(),c.success(d.formatMessage({id:"cb/7hh",defaultMessage:"{connector} is now connected"},{connector:Qs(t.name,d)})),(y===rn.JitPluginMessage||y===rn.MessageSuggestion||y===rn.SourcePills)&&C(J=>(J.set("link_success","true"),J),{replace:!0});break}}}catch(J){g(!1),f(void 0),J instanceof Error&&c.danger(d.formatMessage({id:"wham.connectorSettings.addConnectorLinkModal.error",defaultMessage:"Failed to add connector link"}))}},G=T.length>0?s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:s.jsx(p,v({},bs.sectionTitle))}),s.jsx("div",{className:"text-token-text-secondary text-xs",children:s.jsx(p,v({},bs.sectionDescription))})]}),s.jsx("div",{className:"flex flex-col gap-3",children:T.map(B=>{var de,V,se;const $=B.required?d.formatMessage(bs.fieldLabelRequired,{label:B.title}):B.title,H=d.formatMessage(bs.fieldPlaceholder,{label:B.title}),J=q[B.name];if(B.enumValues&&B.enumValues.length>0){const ae="link_param_".concat(B.name),Ne="".concat(ae,"_label"),Me=J?"".concat(ae,"_error"):void 0,Ae=(de=P[B.name])!=null?de:"";return s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{id:Ne,className:"text-token-text-primary text-xs font-semibold",htmlFor:ae,children:$}),s.jsxs(dt.Root,{value:Ae===""?void 0:Ae,onValueChange:ve=>Q(B.name,ve),children:[s.jsxs(dt.Trigger,{id:ae,"aria-labelledby":Ne,"aria-describedby":Me,"aria-invalid":J?!0:void 0,className:"border-token-border-heavy bg-token-bg-primary w-full justify-between rounded-md text-start",children:[s.jsx("div",{className:"flex-1 truncate text-sm",children:s.jsx(dt.Value,{placeholder:H})}),s.jsx(dt.Icon,{})]}),s.jsx(dt.Portal,{children:s.jsx(dt.Content,{className:"border-token-border-heavy border",children:(V=B.enumValues)==null?void 0:V.map(ve=>s.jsx(dt.Item,{value:ve,children:ve},ve))})})]}),J?s.jsxs("div",{id:Me,className:"flex items-center gap-1 text-xs text-red-500",children:[s.jsx(Ux,{title:r}),J]}):null,B.description?s.jsx("div",{className:"text-token-text-secondary text-xs",children:B.description}):null]},B.name)}return s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx(fl,{name:"link_param_".concat(B.name),displayName:$,value:(se=P[B.name])!=null?se:"",onChange:ae=>Q(B.name,ae.target.value),placeholder:H,error:J,showErrorIcon:!0}),B.description?s.jsx("div",{className:"text-token-text-secondary text-xs",children:B.description}):null]},B.name)})})]}):void 0,X=()=>{var B;rd.count(ld.ECOSYSTEM,"connector_link_modal_dismissed"),Ge.logEventWithStatsig("Connector Link Modal Dismissed","chatgpt_web_connector_link_modal_dismissed",{referrer:y,connector_id:t.id,connector_name:t.name,connector_distribution_channel:(B=t.distribution_channel)!=null?B:null,product_sku:n}),e()};return s.jsx(Gx,{connector:t,onClose:X,isConnecting:m,isConnectingAuthType:u,onContinue:F,productSku:n,showExternalIcon:!0,additionalContent:G,additionalMessageThatDoesNotContainLegalClaims:w?s.jsx(p,{id:"addConnectorLinkModal.slackWorkspaceReminder",defaultMessage:"In the next step, choose the {workspace} Slack workspace before approving access.",values:{workspace:s.jsx("span",{className:"font-semibold",children:k})}}):void 0})},zx=t=>{"use forget";const e=kt(),n=!(e!=null&&e.isPersonalAccount())&&(e==null?void 0:e.planType)!==ut.SELF_SERVE_BUSINESS,a=xr(),{isEnabled:o,isLoading:i}=yr(),l=n?o&&!i:!0,d=ge("linear"),c=ge("dropbox"),r=ge("box"),m=ge("notion"),g=ge("hubspot"),u=ge("confluence"),f=ge("jira"),h=ge("jira_servicemanagement"),_=ge("intercom"),b=ge("aha"),j=ge("asana"),y=ge("azure_devops"),M=ge("basecamp"),C=ge("clickup"),k=ge("freshdesk"),E=ge("freshservice"),w=ge("front"),x=ge("gitlab"),T=ge("gorgias"),N=ge("help_scout"),A=ge("ironclad"),P=ge("pipedrive"),U=ge("salesforce_service_cloud"),I=ge("shortcut"),q=ge("teamwork"),Q=ge("zendesk"),D=ge("zoho"),F=ge("zoho_desk");if(!t)return!1;switch(so[t.id]){case O.SHAREPOINT_CONNECTOR:return!!(a&&l);case O.LINEAR_CONNECTOR:return d;case O.DROPBOX_CONNECTOR:return c;case O.BOX_CONNECTOR:return r;case O.NOTION_CONNECTOR:return m;case O.HUBSPOT_CONNECTOR:return g;case O.CONFLUENCE_CONNECTOR:return u;case O.JIRA_CONNECTOR:return f;case O.JIRA_SERVICEMANAGEMENT_CONNECTOR:return h;case O.INTERCOM_CONNECTOR:return _;case O.AHA_CONNECTOR:return b;case O.ASANA_CONNECTOR:return j;case O.AZURE_DEVOPS_CONNECTOR:return y;case O.BASECAMP_CONNECTOR:return M;case O.CLICKUP_CONNECTOR:return C;case O.FRESHDESK_CONNECTOR:return k;case O.FRESHSERVICE_CONNECTOR:return E;case O.FRONT_CONNECTOR:return w;case O.GITLAB_CONNECTOR:return x;case O.GORGIAS_CONNECTOR:return T;case O.HELP_SCOUT_CONNECTOR:return N;case O.IRONCLAD_CONNECTOR:return A;case O.PIPEDRIVE_CONNECTOR:return P;case O.SALESFORCE_SERVICE_CLOUD_CONNECTOR:return U;case O.SHORTCUT_CONNECTOR:return I;case O.TEAMWORK_CONNECTOR:return q;case O.ZENDESK_CONNECTOR:return Q;case O.ZOHO_CONNECTOR:return D;case O.ZOHO_DESK_CONNECTOR:return F;default:return!1}},Hx=t=>{"use forget";const e=_e.c(101),{onClose:n}=t,a=ce(),o=kr(),i=Pr(),{platformConnectors:l,isLoading:d}=to(!0,i);let c;e[0]!==o||e[1]!==l?(c=o?l.get(o):void 0,e[0]=o,e[1]=l,e[2]=c):c=e[2];const r=c,m=Zc(),g=Xc(),u=!!ed(),f=zx(r);if(d){let x;return e[3]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("div",{className:"flex justify-center",children:s.jsx(Ut,{})}),e[3]=x):x=e[3],x}const h=(r==null?void 0:r.id)===is;if(!r){let x;e[4]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(es.Overlay,{}),e[4]=x):x=e[4];let T;return e[5]!==n?(T=s.jsx(es.Root,{isOpen:!0,onClose:n,testId:"modal-add-connector-link",children:x}),e[5]=n,e[6]=T):T=e[6],T}const _=so[r.id];let b;e[7]!==g||e[8]!==r||e[9]!==u||e[10]!==n||e[11]!==i||e[12]!==m?(b=s.jsx(Vx,{connector:r,onClose:n,productSku:i,redirectAfter:m,authTypeOverride:g,noRedirect:u}),e[7]=g,e[8]=r,e[9]=u,e[10]=n,e[11]=i,e[12]=m,e[13]=b):b=e[13];const j=b;let y;e:switch(_){case O.SHAREPOINT_CONNECTOR:{let x;e[14]!==r||e[15]!==n?(x=s.jsx(px,{onClose:n,connector:r}),e[14]=r,e[15]=n,e[16]=x):x=e[16],y=x;break e}case O.DROPBOX_CONNECTOR:{let x;e[17]!==r||e[18]!==n?(x=s.jsx(hx,{onClose:n,connector:r}),e[17]=r,e[18]=n,e[19]=x):x=e[19],y=x;break e}case O.BOX_CONNECTOR:{let x;e[20]!==r||e[21]!==n?(x=s.jsx(xx,{onClose:n,connector:r}),e[20]=r,e[21]=n,e[22]=x):x=e[22],y=x;break e}case O.LINEAR_CONNECTOR:{let x;e[23]!==r||e[24]!==n?(x=s.jsx(yx,{onClose:n,connector:r}),e[23]=r,e[24]=n,e[25]=x):x=e[25],y=x;break e}case O.NOTION_CONNECTOR:{let x;e[26]!==r||e[27]!==n?(x=s.jsx(_x,{onClose:n,connector:r}),e[26]=r,e[27]=n,e[28]=x):x=e[28],y=x;break e}case O.HUBSPOT_CONNECTOR:{let x;e[29]!==r||e[30]!==n?(x=s.jsx(vx,{onClose:n,connector:r}),e[29]=r,e[30]=n,e[31]=x):x=e[31],y=x;break e}case O.CONFLUENCE_CONNECTOR:{let x;e[32]!==r||e[33]!==n?(x=s.jsx(Cx,{onClose:n,connector:r}),e[32]=r,e[33]=n,e[34]=x):x=e[34],y=x;break e}case O.JIRA_CONNECTOR:{let x;e[35]!==r||e[36]!==n?(x=s.jsx(bx,{onClose:n,connector:r}),e[35]=r,e[36]=n,e[37]=x):x=e[37],y=x;break e}case O.JIRA_SERVICEMANAGEMENT_CONNECTOR:{let x;e[38]!==r||e[39]!==n?(x=s.jsx(Mx,{onClose:n,connector:r}),e[38]=r,e[39]=n,e[40]=x):x=e[40],y=x;break e}case O.INTERCOM_CONNECTOR:{let x;e[41]!==r||e[42]!==n?(x=s.jsx(jx,{onClose:n,connector:r}),e[41]=r,e[42]=n,e[43]=x):x=e[43],y=x;break e}case O.AHA_CONNECTOR:{let x;e[44]!==r||e[45]!==n?(x=s.jsx(Sx,{onClose:n,connector:r}),e[44]=r,e[45]=n,e[46]=x):x=e[46],y=x;break e}case O.ASANA_CONNECTOR:{let x;e[47]!==r||e[48]!==n?(x=s.jsx(Ex,{onClose:n,connector:r}),e[47]=r,e[48]=n,e[49]=x):x=e[49],y=x;break e}case O.AZURE_DEVOPS_CONNECTOR:{let x;e[50]!==r||e[51]!==n?(x=s.jsx(Tx,{onClose:n,connector:r}),e[50]=r,e[51]=n,e[52]=x):x=e[52],y=x;break e}case O.BASECAMP_CONNECTOR:{let x;e[53]!==r||e[54]!==n?(x=s.jsx(Nx,{onClose:n,connector:r}),e[53]=r,e[54]=n,e[55]=x):x=e[55],y=x;break e}case O.CLICKUP_CONNECTOR:{let x;e[56]!==r||e[57]!==n?(x=s.jsx(kx,{onClose:n,connector:r}),e[56]=r,e[57]=n,e[58]=x):x=e[58],y=x;break e}case O.GITLAB_CONNECTOR:{let x;e[59]!==r||e[60]!==n?(x=s.jsx(wx,{onClose:n,connector:r}),e[59]=r,e[60]=n,e[61]=x):x=e[61],y=x;break e}case O.GORGIAS_CONNECTOR:{let x;e[62]!==r||e[63]!==n?(x=s.jsx(Px,{onClose:n,connector:r}),e[62]=r,e[63]=n,e[64]=x):x=e[64],y=x;break e}case O.HELP_SCOUT_CONNECTOR:{let x;e[65]!==r||e[66]!==n?(x=s.jsx(Ax,{onClose:n,connector:r}),e[65]=r,e[66]=n,e[67]=x):x=e[67],y=x;break e}case O.IRONCLAD_CONNECTOR:{let x;e[68]!==r||e[69]!==n?(x=s.jsx(Ix,{onClose:n,connector:r}),e[68]=r,e[69]=n,e[70]=x):x=e[70],y=x;break e}case O.TEAMWORK_CONNECTOR:{let x;e[71]!==r||e[72]!==n?(x=s.jsx(Dx,{onClose:n,connector:r}),e[71]=r,e[72]=n,e[73]=x):x=e[73],y=x;break e}case O.ZENDESK_CONNECTOR:{let x;e[74]!==r||e[75]!==n?(x=s.jsx(Bx,{onClose:n,connector:r}),e[74]=r,e[75]=n,e[76]=x):x=e[76],y=x;break e}case O.PIPEDRIVE_CONNECTOR:{let x;e[77]!==r||e[78]!==n?(x=s.jsx(Ox,{onClose:n,connector:r}),e[77]=r,e[78]=n,e[79]=x):x=e[79],y=x;break e}case O.ZOHO_CONNECTOR:{let x;e[80]!==r||e[81]!==n?(x=s.jsx(Lx,{onClose:n,connector:r}),e[80]=r,e[81]=n,e[82]=x):x=e[82],y=x;break e}case O.ZOHO_DESK_CONNECTOR:{let x;e[83]!==r||e[84]!==n?(x=s.jsx(Rx,{onClose:n,connector:r}),e[83]=r,e[84]=n,e[85]=x):x=e[85],y=x;break e}default:y=null}const M=y,C=Vg(a,r),k=zg(a,r);if(C){const x=k?"max-w-[660px]":"max-w-[580px]";let T;return e[86]!==j||e[87]!==n||e[88]!==x?(T=s.jsx(pt,{testId:"modal-add-connector-link",type:"success",isOpen:!0,onClose:n,size:"custom",noPadding:!0,className:x,children:j}),e[86]=j,e[87]=n,e[88]=x,e[89]=T):T=e[89],T}let E;e[90]!==r||e[91]!==j||e[92]!==h||e[93]!==f||e[94]!==M||e[95]!==u||e[96]!==n?(E=h?s.jsx(Rh,{onClose:n,connector:r,noRedirect:u}):f&&M!=null?M:j,e[90]=r,e[91]=j,e[92]=h,e[93]=f,e[94]=M,e[95]=u,e[96]=n,e[97]=E):E=e[97];let w;return e[98]!==n||e[99]!==E?(w=s.jsx(pt,{testId:"modal-add-connector-link",type:"success",isOpen:!0,onClose:n,size:"custom",className:"max-w-[400px]",children:E}),e[98]=n,e[99]=E,e[100]=w):w=e[100],w},Wx=R(()=>L(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([46,1])),{loading:t=>K(t)}),Kx=()=>{const{openSettings:t}=Zs();return s.jsx("button",{onClick:()=>t(He.Account),children:s.jsx(Wx,{className:"icon-sm"})})};function $x({gizmoId:t,gizmoName:e,gizmoAvatar:n,canEdit:a,socials:o}){const{data:i,isLoading:l}=no();return l?null:i?s.jsxs(s.Fragment,{children:[a&&t&&s.jsx("span",{className:"absolute end-2 top-2",children:s.jsx(Kx,{})}),s.jsx(Eu,{src:n,isFirstParty:!1,className:"h-8 w-8"}),s.jsx("div",{className:"text-token-text-primary mt-1 text-center text-sm font-semibold",children:e}),s.jsx(Tu,{builderName:i.display_name,builderUrl:i.website_url,socials:o,className:"text-xs"})]}):s.jsx(An,{type:"info",children:s.jsx(p,{id:"gizmo.builderProfile.unableToLoadProfile",defaultMessage:"Unable to load your builder profile"})})}const qx=R(()=>L(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([46,1])),{loading:t=>K(t)}),Yx=R(()=>L(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([8,1])),{loading:t=>K(t)}),Qx=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zz),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)}),Jx=R(()=>L(()=>import("./jmj4kur2ey6a14ct.js"),__vite__mapDeps([47,1])),{loading:t=>K(t)}),Zx=R(()=>L(()=>import("./b7yxnd6iunaqip5a.js"),__vite__mapDeps([48,1])),{loading:t=>K(t)}),Xx=R(()=>L(()=>import("./lh493ui1ulngkb9y.js"),__vite__mapDeps([7,1])),{loading:t=>K(t)});function ey(){const t=Y(),{data:e,isLoading:n}=no(),a=ce(),o=hn(a);return s.jsx(Ze,{title:t.formatMessage(Lt.gizmoTab),children:n?s.jsx("div",{className:"flex justify-center p-6",children:s.jsx(Ut,{})}):e===void 0||o==null?s.jsx(An,{type:"info",children:s.jsx(p,v({},Lt.noCreatorProfile))}):s.jsx(ny,{data:e})})}function ty({gizmoName:t,canEdit:e,gizmoAvatar:n}){const a=Y(),{openSettings:o}=Zs(),{data:i}=no();return i?s.jsxs("div",{className:"bg-token-main-surface-primary relative flex w-full flex-col items-center justify-stretch rounded-lg p-4",children:[s.jsx($x,{gizmoAvatar:n,gizmoName:t!=null?t:a.formatMessage(Lt.placeholderGPT),canEdit:e,socials:[i.socials.linkedin,i.socials.github]}),s.jsx("div",{className:"text-token-text-tertiary absolute end-4 top-3 text-xs",children:e?s.jsx("button",{onClick:()=>{o(He.Account)},children:s.jsx(qx,{className:"icon-sm"})}):s.jsx(p,v({},Lt.preview))})]}):null}function sy(t,e){if(t.website_url&&e.length>0){const n=e.find(a=>a.url===t.website_url);return n?n.hostname:e[0].hostname}else{if(e.length>0)return e[0].hostname;if(t.website_url)return}}function ny({data:t}){const e=Y(),n=cd(),a=ce(),o=hn(a),i=o==null?void 0:o.isEnterprisey(),l=o==null?void 0:o.isWorkspaceAccount(),d=us(),c=t.domains.reduce((f,h)=>h.status==="verified"?[...f,{id:h.id,hostname:h.hostname,url:h.hostname}]:f,[]),r=sy(t,c),m=Oe(a,"2256850471"),g=t.name==null||n.isPending,u=s.jsx(dd,{size:"small",onCheckedChange:f=>{n.mutateAsync({hideName:!f})},disabled:g,checked:!t.hide_name,"aria-label":t.hide_name?e.formatMessage(Lt.showNameToggle):e.formatMessage(Lt.hideNameToggle)});return s.jsxs("div",{className:"flex flex-col items-stretch pt-3",children:[s.jsx("div",{className:"mb-2",children:s.jsx(p,v({},Lt.creatorProfileDescription))}),s.jsx(ty,{canEdit:!1}),s.jsx(le,{children:s.jsxs("div",{className:"flex flex-col",children:[!t.is_verified&&s.jsxs(An,{type:"info",children:[s.jsx("div",{children:s.jsx(p,v({},Lt.creatorProfileUnverifiedDisclaimer))}),s.jsx("div",{children:l?s.jsx(p,v({},Lt.creatorProfileBusinessUnverifiedDisclaimer)):s.jsx(p,v({},Lt.creatorProfilePersonalUnverifiedDisclaimer))})]}),t.name&&s.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex flex-row justify-between",children:[s.jsx("b",{children:s.jsx(p,v({},Lt.creatorProfileNameLabel))}),g?s.jsx(Wt,{side:"left",label:e.formatMessage(Lt.linkDisabledTooltip),children:u}):u]}),s.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[s.jsx("span",{children:t.name}),s.jsx(Wt,{side:"top",className:"ms-auto",label:e.formatMessage(Lt.nameSourceReason),children:s.jsx(Yx,{className:"icon-sm text-token-text-tertiary"})})]})]}),!i&&s.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[s.jsx("hr",{className:"border-token-border-default my-3"}),s.jsx("div",{className:"flex flex-row justify-between",children:s.jsx("b",{children:s.jsx(p,v({},Lt.creatorProfileLinkHeader))})}),s.jsxs("div",{className:"flex flex-row items-center justify-between space-x-2",children:[s.jsx(Qx,{className:"icon-sm"}),s.jsx("div",{children:s.jsx(ku,{selectedDomain:r,domains:t.domains,verifiedDomains:c,onChangeDomain:f=>{n.mutateAsync({websiteUrl:f})}})})]}),m&&s.jsxs(s.Fragment,{children:[s.jsx(ii,{socialData:t.socials.linkedin,icon:Jx}),s.jsx(ii,{socialData:t.socials.github,icon:Zx})]})]}),!i&&d&&d.email&&s.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[s.jsx("hr",{className:"border-token-border-default my-3"}),s.jsx("div",{className:"flex flex-row justify-between",children:s.jsx("b",{children:s.jsx(p,v({},Lt.creatorProfileEmailHeader))})}),s.jsxs("div",{className:"my-1 flex flex-row items-center space-x-2",children:[s.jsx(Xx,{className:"icon-sm"}),s.jsx("span",{children:d.email})]}),s.jsx(Wt,{label:e.formatMessage(Lt.feedbackEmailTooltip),children:s.jsx(Kr,{className:"rounded-xl",id:"receive-support-emails",onChange:f=>{n.mutateAsync({willReceiveSupportEmails:f.currentTarget.checked})},checked:t.will_receive_support_emails,label:e.formatMessage(Lt.receiveFeedbackEmails)})})]})]})})]})}const Lt=Be({gizmoTab:{id:"settingsModal.gizmoTab",defaultMessage:"GPT builder profile"},creatorProfileDescription:{id:"settingsModal.creatorProfileDescription",defaultMessage:"Personalize your builder profile to connect with users of your GPTs. These settings apply to publicly shared GPTs."},creatorProfileUnverifiedDisclaimer:{id:"settingsModal.createrProfileUnverifiedDisclaimer",defaultMessage:"Complete verification to publish GPTs to everyone."},creatorProfilePersonalUnverifiedDisclaimer:{id:"settingsModal.creatorProfilePersonalUnverifiedDisclaimer",defaultMessage:"Verify your identity by adding billing details or verifying ownership of a public domain name."},creatorProfileBusinessUnverifiedDisclaimer:{id:"settingsModal.creatorProfileBusinessUnverifiedDisclaimer",defaultMessage:"Contact your workspace administrator to set up a builder profile"},creatorProfileNameLabel:{id:"settingsModal.creatorProfileNameLabel",defaultMessage:"Name"},placeholderGPT:{id:"settingsModal.placeholderGPT",defaultMessage:"PlaceholderGPT"},byName:{id:"settingsModal.byName",defaultMessage:"by {name}"},preview:{id:"settingsModal.preview",defaultMessage:"Preview"},noCreatorProfile:{id:"settingsModal.noCreatorProfile",defaultMessage:"Unable to retrieve builder profile"},creatorProfileLinkHeader:{id:"settingsModal.creatorProfileLinkHeader.1",defaultMessage:"Links"},creatorProfileEmailHeader:{id:"settingsModal.creatorProfileEmailHeader.0",defaultMessage:"Email"},nameDisabledTooltip:{id:"settingsModal.nameDisabledTooltip",defaultMessage:"You must have a verified name to enable displaying a name"},linkDisabledTooltip:{id:"settingsModal.linkDisabledTooltip",defaultMessage:"You must have a verified domain to enable displaying a link"},addDomain:{id:"settingsModal.addDomain",defaultMessage:"Verify new domain"},nameSourceReason:{id:"settingsModal.nameSourceReason",defaultMessage:"Name is populated from your billing details"},hideNameToggle:{id:"settingsModal.hideNameToggle",defaultMessage:"Hide your name in your builder profile"},showNameToggle:{id:"settingsModal.showNameToggle",defaultMessage:"Show your name in your builder profile"},hideWebsiteToggle:{id:"settingsModal.hideWebsiteToggle",defaultMessage:"Hide your website in your builder profile"},showWebsiteToggle:{id:"settingsModal.showWebsiteToggle",defaultMessage:"Show your website in your builder profile"},feedbackEmailTooltip:{id:"settingsModal.feedbackEmailTooltip",defaultMessage:"Allow users of your GPTs to send feedback to your ChatGPT login email. Your email will never be shared publicly."},receiveFeedbackEmails:{id:"settingsModal.receiveFeedbackEmails.1",defaultMessage:"Receive feedback emails"}}),ay=R(()=>L(()=>import("./iz35nlf95x4k1pcg.js"),__vite__mapDeps([49,1])),{loading:t=>K(t)});let Ia=0;var Qi;const oy=Ps(Re.CheckboxItem)(Qi||(Qi=ps(["flex flex-row justify-between h-10 mx-2 items-center"])));function iy(t,e,n,a){const o={category:t.category,[n]:e};a(o)}function ry(){const t=Y(),n=Et().getQueryData([oa]),[a,o]=S.useState(n),i=uy(o);return Nu({onSuccess:l=>{o(l)},alwaysRefetchOnMount:!0}),s.jsx(Ze,{title:t.formatMessage({id:"settingsModal.notifications",defaultMessage:"Notifications"}),children:a?a.map(l=>s.jsx(le,{children:s.jsx(ly,{settings:l,updateSettings:i.mutate})},l.category)):s.jsx("div",{className:"flex justify-center p-6",children:s.jsx(Ut,{})})})}function ly({settings:t,updateSettings:e}){const n=Y(),a=us(),i=t.category==="teen_safety"?dy(t.options,!!(a!=null&&a.email),!!(a!=null&&a.phone_number)):t.options;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:t.name}),s.jsxs(Re.Root,{children:[s.jsxs(Re.Trigger,{children:[s.jsx("div",{children:cy(i,n)}),s.jsx(ay,{className:"icon-sm"})]}),s.jsx(Re.Portal,{children:s.jsx(Re.Content,{size:"small",align:"end",children:i.map((l,d)=>s.jsx(oy,{checked:l.enabled,onCheckedChange:c=>iy(t,c,l.channel,e),children:l.name},d))})})]})]}),s.jsxs(un,{children:[t.description,t.category==="tasks"&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsx(ga,{className:"underline",to:"/tasks",children:s.jsx(p,{id:"notificationSettings.manageTasks",defaultMessage:"Manage tasks"})})]})]})]})}function cy(t,e){const n=t.some(i=>i.channel==="email"&&i.enabled),a=t.some(i=>i.channel==="sms"&&i.enabled),o=t.some(i=>i.channel==="push"&&i.enabled);return o&&n&&a||o&&n?e.formatMessage(Ds.pushAndEmailEnabled):o&&a?e.formatMessage(Ds.pushAndSmsEnabled):n&&a?e.formatMessage(Ds.emailAndSmsEnabled):a?e.formatMessage(Ds.smsEnabled):o?e.formatMessage(Ds.pushEnabled):n?e.formatMessage(Ds.emailEnabled):e.formatMessage(Ds.notificationsOff)}function dy(t,e,n){return t.filter(a=>a.channel==="email"?e:a.channel==="sms"?n:!0)}function uy(t){const e=Et();return lt({mutationFn:async n=>(await wu.updateSettings(n)).settings,onMutate:async n=>{Ia+=1;const a=Ia;await e.cancelQueries({queryKey:oa});const o=e.getQueryData(oa);return t(i=>{if(!i)return i;const c=n,{category:l}=c,d=qn(c,["category"]);return i.map(r=>{if(r.category!==l)return r;const m=r.options.map(g=>{const u=d[g.channel];return typeof u=="boolean"?pe(v({},g),{enabled:u}):g});return pe(v({},r),{options:m})})}),{previousSettingsList:o,mutationId:a}},onError:(n,a,o)=>{o!=null&&o.previousSettingsList&&t(o.previousSettingsList)},onSuccess:(n,a,o)=>{(o==null?void 0:o.mutationId)===Ia&&(e.setQueryData(oa,n),t(n))}})}const Ds=Be({pushEnabled:{id:"notificationSettings.pushEnabled",defaultMessage:"Push"},emailEnabled:{id:"notificationSettings.emailEnabled",defaultMessage:"Email"},smsEnabled:{id:"notificationSettings.smsEnabled",defaultMessage:"SMS"},pushAndEmailEnabled:{id:"notificationSettings.pushAndEmailEnabled",defaultMessage:"Push, Email"},pushAndSmsEnabled:{id:"notificationSettings.pushAndSmsEnabled",defaultMessage:"Push, SMS"},emailAndSmsEnabled:{id:"notificationSettings.emailAndSmsEnabled",defaultMessage:"Email, SMS"},pushAndEmailAndSmsEnabled:{id:"notificationSettings.pushAndEmailAndSmsEnabled",defaultMessage:"Push, Email, SMS"},notificationsOff:{id:"notificationSettings.notificationsOff",defaultMessage:"Off"}}),gy=R(()=>L(()=>import("./o8zk6g99n3l7p810.js"),__vite__mapDeps([50,1])),{loading:t=>K(t)});function my(){const t=Y();return s.jsx(ys,{value:He.Notifications,icon:gy,label:t.formatMessage({id:"settingsModal.notifications",defaultMessage:"Notifications"})})}const fy=R(()=>L(()=>import("./o7xta115di9htf6k.js"),__vite__mapDeps([51,1])),{loading:t=>K(t)}),py=R(()=>L(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([15,1,16])),{loading:t=>K(t)}),hy=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zE),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)}),xy=R(()=>L(()=>import("./5bcdej51598lc3xr.js"),__vite__mapDeps([52,1])),{loading:t=>K(t)});function yy(t){"use forget";const e=_e.c(10),{currentAccount:n}=t,a=Pt(),o=n.data.subscriptionStatus.planType;let i;e[0]!==n?(i=n.willRenewSubscription(),e[0]=n,e[1]=i):i=e[1];const l=i;let d;e[2]!==o||e[3]!==l?(d=o===ut.PLUS?s.jsx(p,{id:"hLd2Ar",defaultMessage:"Upgrade plan"}):o===ut.PRO&&l?s.jsx(p,{id:"/4GuNx",defaultMessage:"Change plan"}):s.jsx(p,{id:"4Bc5M+",defaultMessage:"View plans"}),e[2]=o,e[3]=l,e[4]=d):d=e[4];const c=d;let r;e[5]!==a?(r=()=>{Ge.logEventWithStatsig("Subscription Settings Change Plan Button Clicked","chatgpt_subscription_settings_change_plan_button_clicked"),ba(a,"Subscription settings manage button")},e[5]=a,e[6]=r):r=e[6];const m=r;let g;return e[7]!==m||e[8]!==c?(g=s.jsx(Re.Item,{icon:fy,onClick:m,children:c}),e[7]=m,e[8]=c,e[9]=g):g=e[9],g}function by(t){"use forget";const e=_e.c(9),{currentAccount:n,onCancelSubscriptionClick:a}=t,o=ce(),i=n.willRenewSubscription(),l=n.getDaysUntilSubscriptionCancelAt(),d=n.willPlanChange(),c=Ks(o,"468168202"),r=Y(),m=gt();if(!i||l!=null||d)return null;const g=c.get("should_cancel_button_take_user_to_stripe",!1);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=s.jsx(Re.Separator,{}),e[0]=u):u=e[0];let f;e[1]!==r||e[2]!==a||e[3]!==g||e[4]!==m?(f=async()=>{if(Ge.logEventWithStatsig("Subscription Settings Cancel Subscription Button Clicked","chatgpt_subscription_settings_cancel_subscription_button_clicked"),g)try{const b=await Xe.safeGet("/payments/customer_portal",{intercomEventOnError:"fetch-error:customer_portal:get"});location.href=b.url}catch(b){m.warning(r.formatMessage(Mt.accountErrorWarning),{hasCloseButton:!0})}else a()},e[1]=r,e[2]=a,e[3]=g,e[4]=m,e[5]=f):f=e[5];let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(p,{id:"icBiUI",defaultMessage:"Cancel Subscription"}),e[6]=h):h=e[6];let _;return e[7]!==f?(_=s.jsxs(s.Fragment,{children:[u,s.jsx(Re.Item,{color:"danger",icon:py,onClick:f,children:h})]}),e[7]=f,e[8]=_):_=e[8],_}function My(t,e){return t===ut.FREE||t===ut.PLUS&&e===ut.PRO||t===ut.GO&&[ut.PRO,ut.PLUS].includes(e)}function Cy(t){"use forget";const e=_e.c(9),{currentAccount:n,onRenewSubscriptionClick:a}=t,o=n.data.subscriptionStatus.planType;let i;e[0]!==o?(i=Va(o.toLowerCase()),e[0]=o,e[1]=i):i=e[1];const l=i,d=n.willRenewSubscription(),c=n.getDaysUntilSubscriptionCancelAt(),r=n.getNextPlanType();if(!(!d||c!=null||r&&My(r,o)))return null;let g;e[2]!==a?(g=()=>{Ge.logEventWithStatsig("Subscription Settings Renew Plan Button Clicked","chatgpt_subscription_settings_renew_plan_button_clicked"),a()},e[2]=a,e[3]=g):g=e[3];const u=g;let f;e[4]!==l?(f=s.jsx(p,{id:"L6UCRY",defaultMessage:"Renew {planName} Plan",values:{planName:l}}),e[4]=l,e[5]=f):f=e[5];let h;return e[6]!==u||e[7]!==f?(h=s.jsx(Re.Item,{icon:xy,onClick:u,children:f}),e[6]=u,e[7]=f,e[8]=h):h=e[8],h}function _y(t){"use forget";const e=_e.c(13),{currentAccount:n,onCancelSubscriptionClick:a,onRenewSubscriptionClick:o}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(Re.Trigger,{children:s.jsxs(te,{color:"secondary",children:[s.jsx(p,{id:"g3k4Zt",defaultMessage:"Manage"}),s.jsx(hy,{className:"ms-1 -me-1 h-4 w-4"})]})}),e[0]=i):i=e[0];let l;e[1]!==n?(l=s.jsx(yy,{currentAccount:n}),e[1]=n,e[2]=l):l=e[2];let d;e[3]!==n||e[4]!==o?(d=s.jsx(Cy,{currentAccount:n,onRenewSubscriptionClick:o}),e[3]=n,e[4]=o,e[5]=d):d=e[5];let c;e[6]!==n||e[7]!==a?(c=s.jsx(by,{currentAccount:n,onCancelSubscriptionClick:a}),e[6]=n,e[7]=a,e[8]=c):c=e[8];let r;return e[9]!==l||e[10]!==d||e[11]!==c?(r=s.jsxs(Re.Root,{children:[i,s.jsx(Re.Portal,{children:s.jsxs(Re.Content,{align:"end",size:"auto",sideOffset:2,children:[l,d,c]})})]}),e[9]=l,e[10]=d,e[11]=c,e[12]=r):r=e[12],r}function vy({currentAccount:t}){const e=t.subscriptionAnalyticsParams,a=t.getLastActiveSubscription().purchase_origin_platform,o=gt(),i=Y(),l=async()=>{Ge.logEvent("Account Portal: Click Manage My Subscription",e);try{const c=await Xe.safeGet("/payments/customer_portal",{intercomEventOnError:"fetch-error:customer_portal:get"});Ge.logEvent("Account Portal: Navigating to Account Portal",e),location.href=c.url}catch(c){o.warning(i.formatMessage(Mt.accountErrorWarning),{hasCloseButton:!0})}},d=(c,r)=>s.jsx(ga,{to:c,target:"_blank",className:"inline-block",children:s.jsx(te,{onClick:()=>Ge.logEvent(r,e),color:"secondary",children:s.jsx(p,{id:"eQL80k",defaultMessage:"Manage"})})});switch(a){case Ta.CHATGPT_IOS:case Ta.SORA_IOS:return d(Lu,"Account Portal: Click iOS Manage Subscription");case Ta.MOBILE_ANDROID:return d(Ou,"Account Portal: Click Android Manage Subscription");default:if(t.hasCustomerObject())return s.jsx(te,{onClick:l,color:"secondary",children:s.jsx(p,{id:"eQL80k",defaultMessage:"Manage"})});break}}function Ai(t,e){return t==null||e==null?!1:Math.abs(t-e)<=1}function Ol(t){"use forget";const e=_e.c(29),{title:n,subtitle:a,features:o,ctaButton:i,planChangeMessage:l,planCanceledMessage:d,scheduledCancelMessage:c,discountMessage:r,renewMessage:m,manageButton:g,paymentSection:u}=t;let f;e[0]!==n?(f=s.jsx("div",{className:"",children:n}),e[0]=n,e[1]=f):f=e[1];let h;e[2]!==r||e[3]!==d||e[4]!==l||e[5]!==m?(h=s.jsxs("div",{className:"text-token-text-secondary",children:[l,r,m,d]}),e[2]=r,e[3]=d,e[4]=l,e[5]=m,e[6]=h):h=e[6];let _;e[7]!==f||e[8]!==h?(_=s.jsxs("div",{children:[f,h]}),e[7]=f,e[8]=h,e[9]=_):_=e[9];const b=i||g;let j;e[10]!==_||e[11]!==b?(j=s.jsxs("div",{className:"flex items-center justify-between",children:[_,b]}),e[10]=_,e[11]=b,e[12]=j):j=e[12];let y;e[13]!==c?(y=c&&s.jsx("div",{className:"mt-3 rounded-md border border-yellow-200 bg-yellow-50 px-3 py-2 text-sm text-yellow-800 dark:border-yellow-800 dark:bg-yellow-950 dark:text-yellow-200",children:c}),e[13]=c,e[14]=y):y=e[14];let M;e[15]!==a?(M=s.jsx("span",{className:"inline-block pb-4 text-sm font-semibold",children:a}),e[15]=a,e[16]=M):M=e[16];let C;e[17]!==o?(C=s.jsx(il,{advertisedFeatures:o}),e[17]=o,e[18]=C):C=e[18];let k;e[19]!==M||e[20]!==C?(k=s.jsxs("div",{className:"mt-2 rounded-lg bg-transparent p-4 px-0 dark:bg-transparent",children:[M,C]}),e[19]=M,e[20]=C,e[21]=k):k=e[21];let E;e[22]!==j||e[23]!==y||e[24]!==k?(E=s.jsxs(le,{children:[j,y,k]}),e[22]=j,e[23]=y,e[24]=k,e[25]=E):E=e[25];let w;return e[26]!==u||e[27]!==E?(w=s.jsxs(s.Fragment,{children:[E,u]}),e[26]=u,e[27]=E,e[28]=w):w=e[28],w}function jy(){"use forget";const t=_e.c(31);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0],S.useEffect(Sy,e);const n=ce();let a;t[1]!==n?(a=ol({ctx:n}),t[1]=n,t[2]=a):a=t[2];const o=a;let i;t[3]!==n?(i=fo({ctx:n}),t[3]=n,t[4]=i):i=t[4];const l=i,d=Au(),c=Iu(),r=Pt();let m;t[5]!==n?(m=Du(n),t[5]=n,t[6]=m):m=t[6];const g=m;let u;t[7]!==o||t[8]!==g||t[9]!==d||t[10]!==c||t[11]!==l?(u=g?{planName:"Go",advertisedFeatures:o.advertisedFeatures,isTrialEligible:d}:{planName:"Plus",advertisedFeatures:l.advertisedFeatures,isTrialEligible:c},t[7]=o,t[8]=g,t[9]=d,t[10]=c,t[11]=l,t[12]=u):u=t[12];const f=u,{planName:h,advertisedFeatures:_,isTrialEligible:b}=f,j=b?Mt.upgradeFromFreeTrialTitle:Mt.upgradeFromFreeTitle,y=b?Mt.upgradeTrialButton:Mt.upgradeButton;let M;t[13]!==h?(M={planName:h},t[13]=h,t[14]=M):M=t[14];let C;t[15]!==M||t[16]!==j?(C=s.jsx(p,pe(v({},j),{values:M})),t[15]=M,t[16]=j,t[17]=C):C=t[17];let k;t[18]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(p,v({},Mt.upgradeFromFreeDescription)),t[18]=k):k=t[18];let E;t[19]!==r||t[20]!==h?(E=()=>{Ge.logEventWithStatsig("Subscription Settings Free to Paid Upgrade Button Clicked","chatgpt_subscription_settings_free_to_paid_upgrade_button_clicked"),ba(r,"Subscription settings manage button Free to ".concat(h))},t[19]=r,t[20]=h,t[21]=E):E=t[21];let w;t[22]!==y?(w=s.jsx(p,v({},y)),t[22]=y,t[23]=w):w=t[23];let x;t[24]!==E||t[25]!==w?(x=s.jsx(te,{onClick:E,color:"primary",children:w}),t[24]=E,t[25]=w,t[26]=x):x=t[26];let T;return t[27]!==_||t[28]!==x||t[29]!==C?(T=s.jsx(Ol,{title:C,subtitle:k,features:_,ctaButton:x}),t[27]=_,t[28]=x,t[29]=C,t[30]=T):T=t[30],T}function Sy(){Ge.logEventWithStatsig("Subscription Settings Shown: Free","chatgpt_subscription_settings_shown_free")}function Da(t){"use forget";var Ne,Me,Ae,ve,Le,je,Ke,Je,et,tt,z;const e=_e.c(39);let{currentAccount:n,onCancelSubscriptionClick:a,onRenewSubscriptionClick:o,pricingPlan:i}=t,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0],S.useEffect(Ey,l);const d=(Ne=n.data.subscriptionStatus.billingCurrency)!=null?Ne:"USD",c=Y(),r=ce();let m;e[1]!==r||e[2]!==d?(m={currency:d,ctx:r},e[1]=r,e[2]=d,e[3]=m):m=e[3];const{data:g,isLoading:u}=Fr(m),f=n.planType;let h;e[4]!==n?(h=n.willRenewSubscription(),e[4]=n,e[5]=h):h=e[5];const _=h;let b;e[6]!==n?(b=n.willPlanChange(),e[6]=n,e[7]=b):b=e[7];const j=b,y=n.getDaysUntilSubscriptionCancelAt(),M=n.getDaysUntilPlanChanges(),C=n.getDaysUntilPlanRenews(),k=n.getDaysUntilPlanDiscountExpires(),E=n.getNextPlanType(),w=n.data.subscriptionStatus.discount,x=(Ae=(Me=n.data.subscriptionStatus.discount)==null?void 0:Me.discount_start_in_num_periods)!=null?Ae:0,T=Va(f.toLowerCase()),N=E?Va(E.toLowerCase()):null;if(!u&&g){const ue=Ur(g,ri(f),f===ut.SELF_SERVE_BUSINESS?Ua.Year:Ua.Month);i=pe(v({},i),{cost:{costValue:ue.amount,costTitle:Gr(ue.amount,ri(f),d)}})}const{advertisedFeatures:A}=i,{costTitle:P,currencySymbol:U}=Pg(i,d),I=j&&M&&N?s.jsx("span",{children:s.jsx(p,pe(v({},Mt.planChangeMessage),{values:{planName:N,date:Os(M,c)}}))}):null,q=_&&!j&&w&&x>0?((ve=n.data.subscriptionStatus.discount)==null?void 0:ve.discount_type)===$o.PERCENTAGE?s.jsx("span",{children:s.jsx(p,pe(v({},Mt.discountPercentFutureMessage),{values:{discountPercent:n.data.subscriptionStatus.discount.amount,planName:T,numPeriods:x}}))}):U.sign.defaultMessage&&s.jsx("span",{children:s.jsx(p,pe(v({},Mt.discountFixedFutureMessage),{values:{discountFixed:(Le=n.data.subscriptionStatus.discount)==null?void 0:Le.amount,planName:T,numPeriods:x,currencySymbol:U.sign.defaultMessage.toString()}}))}):_&&!j&&C&&w&&(((je=n.data.subscriptionStatus.discount)==null?void 0:je.discount_type)===$o.PERCENTAGE?Ai(k,C)&&(P!=null&&P.defaultMessage)&&((Ke=U==null?void 0:U.sign)!=null&&Ke.defaultMessage)?s.jsx("span",{children:s.jsx(p,pe(v({},Mt.discountPercentMessageWithNewPrice),{values:{discountPercent:n.data.subscriptionStatus.discount.amount,planName:T,date:Os(C,c),newPrice:P.defaultMessage.toString(),currencySymbol:U.sign.defaultMessage.toString()}}))}):s.jsx("span",{children:s.jsx(p,pe(v({},Mt.discountPercentMessage),{values:{discountPercent:n.data.subscriptionStatus.discount.amount,planName:T,date:Os(C,c)}}))}):Ai(k,C)&&(P!=null&&P.defaultMessage)&&((Je=U==null?void 0:U.sign)!=null&&Je.defaultMessage)?s.jsx("span",{children:s.jsx(p,pe(v({},Mt.discountFixedMessageWithNewPrice),{values:{discountFixed:(et=n.data.subscriptionStatus.discount)==null?void 0:et.amount,planName:T,date:Os(C,c),newPrice:P.defaultMessage.toString(),currencySymbol:U.sign.defaultMessage.toString()}}))}):((tt=U==null?void 0:U.sign)==null?void 0:tt.defaultMessage)&&s.jsx("span",{children:s.jsx(p,pe(v({},Mt.discountFixedMessage),{values:{discountFixed:(z=n.data.subscriptionStatus.discount)==null?void 0:z.amount,planName:T,date:Os(C,c),currencySymbol:U.sign.defaultMessage.toString()}}))})),Q=_&&!j&&C&&!w?s.jsx("span",{children:s.jsx(p,pe(v({},Mt.renewMessage),{values:{date:Os(C,c)}}))}):null,D=!_&&!j&&C?s.jsx("span",{children:s.jsx(p,pe(v({},Mt.planCanceledMessage),{values:{date:Os(C,c)}}))}):null,F=y&&y!==C?s.jsx("span",{children:s.jsx(p,pe(v({},Mt.scheduledCancelMessage),{values:{date:Os(y,c)}}))}):null;let G;e[8]!==T?(G=s.jsx(p,pe(v({},Mt.managePaymentTitle),{values:{planName:T}})),e[8]=T,e[9]=G):G=e[9];let X;e[10]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(ga,{target:"_blank",to:Pu,onClick:Ag,className:"text-token-link text-xs",children:s.jsx(p,v({},Mt.billingHelp))},"row-plus-plan-help-link"),e[10]=X):X=e[10];let B;e[11]!==G?(B=s.jsxs("div",{className:"flex flex-col gap-1",children:[G,X]}),e[11]=G,e[12]=B):B=e[12];let $;e[13]!==n?($=s.jsx(vy,{currentAccount:n}),e[13]=n,e[14]=$):$=e[14];let H;e[15]!==B||e[16]!==$?(H=s.jsx(le,{children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[B,$]})}),e[15]=B,e[16]=$,e[17]=H):H=e[17];const J=H;let W;e[18]!==T?(W=s.jsx(p,pe(v({},Mt.subscriptionTitle),{values:{planName:T}})),e[18]=T,e[19]=W):W=e[19];let de;e[20]!==T?(de=s.jsx(p,pe(v({},Mt.thanksMessage),{values:{planName:T}})),e[20]=T,e[21]=de):de=e[21];let V;e[22]!==A?(V=A!=null?A:[],e[22]=A,e[23]=V):V=e[23];let se;e[24]!==n||e[25]!==a||e[26]!==o?(se=s.jsx(_y,{currentAccount:n,onCancelSubscriptionClick:a,onRenewSubscriptionClick:o}),e[24]=n,e[25]=a,e[26]=o,e[27]=se):se=e[27];let ae;return e[28]!==q||e[29]!==J||e[30]!==D||e[31]!==I||e[32]!==Q||e[33]!==F||e[34]!==W||e[35]!==de||e[36]!==V||e[37]!==se?(ae=s.jsx(Ol,{title:W,subtitle:de,features:V,manageButton:se,planChangeMessage:I,discountMessage:q,renewMessage:Q,planCanceledMessage:D,scheduledCancelMessage:F,paymentSection:J}),e[28]=q,e[29]=J,e[30]=D,e[31]=I,e[32]=Q,e[33]=F,e[34]=W,e[35]=de,e[36]=V,e[37]=se,e[38]=ae):ae=e[38],ae}function Ey(){Ge.logEventWithStatsig("Subscription Settings Shown","chatgpt_subscription_settings_shown")}function Os(t,e){const n=ud(new Date,t);return new Intl.DateTimeFormat(e.locale,{year:"numeric",month:"short",day:"numeric"}).format(n)}const Mt=Be({subscriptionTitle:{id:"settingsModal.subscriptionTitle",defaultMessage:"ChatGPT {planName}"},managePaymentTitle:{id:"settingsModal.managePaymentTitle",defaultMessage:"Payment"},billingHelp:{id:"settingsModal.billingHelp",defaultMessage:"Need help with billing?"},accountErrorWarning:{id:"settingsModal.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},planChangeMessage:{id:"settingsModal.planChangeMessage",defaultMessage:"Your plan changes to {planName} on {date}"},planCanceledMessage:{id:"settingsModal.planCanceledMessage",defaultMessage:"Your plan will be canceled on {date}"},scheduledCancelMessage:{id:"settingsModal.scheduledCancelMessage",defaultMessage:"Your paid plan will downgrade to ChatGPT free on {date}"},renewMessage:{id:"settingsModal.renewMessage",defaultMessage:"Your plan auto-renews on {date}"},discountPercentMessage:{id:"settingsModal.discountPercentMessage",defaultMessage:"You've got {discountPercent}% off {planName}. Your discounted plan renews on {date}."},discountPercentMessageWithNewPrice:{id:"settingsModal.discountPercentMessageWithNewPrice",defaultMessage:"You've got {discountPercent}% off {planName}. Your plan renews (at {currencySymbol}{newPrice}/month) on {date}."},discountFixedMessage:{id:"settingsModal.discountFixedMessage",defaultMessage:"You've got {currencySymbol}{discountFixed} off {planName}. Your discounted plan renews on {date}."},discountFixedMessageWithNewPrice:{id:"settingsModal.discountFixedMessageWithNewPrice",defaultMessage:"You've got {currencySymbol}{discountFixed} off {planName}. Your plan renews (at {currencySymbol}{newPrice}/month) on {date}."},discountPercentFutureMessage:{id:"settingsModal.discountPercentFutureMessage",defaultMessage:"Your {discountPercent}% off {planName} discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}."},discountFixedFutureMessage:{id:"settingsModal.discountFixedFutureMessage",defaultMessage:"Your {currencySymbol}{discountFixed} off {planName} discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}."},thanksMessage:{id:"settingsModal.thanksMessage",defaultMessage:"Thanks for subscribing to ChatGPT {planName}! Your {planName} plan includes:"},paymentMethodMessage:{id:"settingsModal.paymentMethodMessage",defaultMessage:"Payment method"},upgradeFromFreeTitle:{id:"settingsModal.upgradeFromFreeTitle",defaultMessage:"Get ChatGPT {planName}"},upgradeFromFreeTrialTitle:{id:"settingsModal.upgradeFromFreeTrialTitle",defaultMessage:"Try ChatGPT {planName} for free"},upgradeFromFreeDescription:{id:"settingsModal.upgradeFromFreeDescription",defaultMessage:"Get everything in Free, and more."},upgradeButton:{id:"settingsModal.upgradeButton",defaultMessage:"Upgrade"},upgradeTrialButton:{id:"settingsModal.upgradeTrialButton",defaultMessage:"Start trial"}});function Ty({enabled:t=!1}={}){return ds({queryKey:["mfaPushAuthDevices"],queryFn:()=>Xe.safeGet("/accounts/mfa_push_auth_devices"),enabled:t})}function ky(t){return S.useCallback(async()=>{try{if(!t)return;await Hr(t.billingDetails,t.plusAnalyticsParams)}catch(e){}},[t])}const Ny=R(()=>L(()=>import("./iyn42bfr1ydmech0.js"),__vite__mapDeps([53,1])),{loading:t=>K(t)});function wy({eligibleProgramName:t}){const{data:e}=ds({queryKey:["referrals-enrollment-details"],queryFn:()=>Fs.getEnrollmentDetails()}),n=e==null?void 0:e.enrollment_details;return n?s.jsx(Py,{enrollmentDetails:n}):s.jsx(Ay,{eligibleProgramName:t})}function Py({enrollmentDetails:t}){const e=ce(),n=hn(e),a=Y(),o=gt(),i=ul(),l=ky(i),d=n==null?void 0:n.hasPaidSubscription(),c=Ga(t.referral_code),{discount:r}=t.referral_metadata,m=co(a,r.value||0,r.currency_code),g=t.earned_amount.split(".")[0],u=t.remaining_amount.split(".")[0];return s.jsxs(le,{children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx(p,{id:"OR4iav",defaultMessage:"Referrals"}),s.jsxs("div",{className:"flex h-8 items-center gap-2",children:[s.jsx("button",{onClick:()=>{io(c,o).then(()=>{o.success(a.formatMessage({id:"1TiBkD",defaultMessage:"Copied referral link to clipboard"}))})},children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"text-sm",children:c}),s.jsx(Ny,{className:"icon-sm"})]})}),!d&&t.is_eligible_to_redeem&&i&&l?s.jsx("div",{className:"ms-1 flex flex-1 justify-end",children:s.jsx(te,{color:"secondary",onClick:l,children:s.jsx(p,{id:"u1eO00",defaultMessage:"Get free Plus"})})}):null]})]}),s.jsxs("div",{className:"border-token-border-default my-4 flex rounded-md border bg-gray-50 px-3 py-4 dark:bg-gray-900",children:[s.jsx(Oa,{className:"border-token-border-default flex-1 border-e",info:t.num_referred,label:s.jsx(p,{id:"i/bF9u",defaultMessage:"Friends referred"})}),s.jsx(Oa,{className:"flex-1",info:g,label:s.jsx(p,{id:"iA319g",defaultMessage:"Earned"})}),s.jsx(Oa,{className:"border-token-border-default flex-1 border-s",info:u,label:s.jsx(p,{id:"wY0EA3",defaultMessage:"Remaining"})})]}),s.jsx("div",{className:"text-token-text-tertiary text-xs",children:s.jsx(p,pe(v({},qs.referralLinkModalDisclaimer),{values:{discount:m}}))})]})}function Oa({className:t,info:e,label:n}){return s.jsxs("div",{className:Ms("flex flex-col items-center gap-0.5",t),children:[s.jsx("div",{className:"text-base font-normal",children:e}),s.jsx("div",{className:"text-token-text-secondary text-xs",children:n})]})}function Ay({eligibleProgramName:t}){const e=Y(),n=Pt();return t?s.jsx(le,{children:s.jsx(zt,{label:e.formatMessage({id:"OR4iav",defaultMessage:"Referrals"}),buttonLabel:e.formatMessage({id:"LZKJO9",defaultMessage:"Get my referral link"}),onClick:()=>{n(Ru(t))}})}):null}function Iy(){const t=ce(),e=Oe(t,"550432558"),{data:n}=ds({queryKey:["is-eligible-for-referrals"],queryFn:()=>Fs.getIsEligibleForReferrals(),enabled:e}),a=e?n==null?void 0:n.eligible_program_name:null;return a?s.jsx(wy,{eligibleProgramName:a}):null}function Dy(){return new URL(window.location.href).searchParams.get("disable_mfa")!=null}function Oy({onClose:t,onConfirm:e}){const n=Y();return s.jsx(Bu,{isOpen:!0,title:n.formatMessage(Ii.disableConfimationTitle),confirmText:n.formatMessage(Ii.disable),onConfirm:e,onClose:t,primaryButtonColor:"danger",children:s.jsx("div",{children:s.jsx(p,{id:"postSigninDisableConfimationModal.description.1",defaultMessage:"Are you sure you want to disable multi-factor authentication? You will no longer need to provide a verification code when you log into your account."})})})}const Ii=Be({disableConfimationTitle:{id:"mfaDisableConfirmationModal.title.0",defaultMessage:"Disable multi-factor authentication (MFA)"},disable:{id:"mfaDisableConfirmationModal.button",defaultMessage:"Disable MFA"}});function Ly(){const[t,e]=gd(),n=Y();return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(p,{id:"settingsModal.theme",defaultMessage:"Appearance"})}),s.jsx(Wr,{value:t,onValueChange:e,options:[{label:n.formatMessage({id:"settingsModal.system",defaultMessage:"System"}),value:"system"},{label:n.formatMessage({id:"settingsModal.dark",defaultMessage:"Dark"}),value:"dark"},{label:n.formatMessage({id:"settingsModal.light",defaultMessage:"Light"}),value:"light"}]})]})}async function Ry(){var n;let t;"keyboard"in navigator&&(t=navigator.keyboard);const e=(n=await(t==null?void 0:t.getLayoutMap()))!=null?n:new Map;return t!=null&&t.lock&&await(t==null?void 0:t.lock()),new Promise(a=>{const o=new Set,i=new Set;let l=!0;const d=f=>{const h=Di(f,e);h&&!o.has(h)&&(o.add(h),i.add(h))},c=f=>{const h=Di(f,e);h&&o.delete(h),o.size===0&&l&&g()},r=f=>{l&&(m(),a(void 0))},m=()=>{window.removeEventListener("keydown",d),window.removeEventListener("keyup",c),window.removeEventListener("mousedown",r),window.removeEventListener("click",r),window.removeEventListener("blur",r),clearTimeout(u),t!=null&&t.unlock&&(t==null||t.unlock()),l=!1},g=()=>{m();const f=By(Array.from(i));a(Ll({webKeys:f}))};window.addEventListener("keydown",d),window.addEventListener("keyup",c),window.addEventListener("mousedown",r),window.addEventListener("click",r),window.addEventListener("blur",r);const u=setTimeout(()=>{l&&(m(),a(void 0))},1e4)})}function By(t){return t.toSorted((e,n)=>{const a=Object.values(ua).indexOf(e),o=a===-1?Number.MAX_SAFE_INTEGER:a,i=Object.values(ua).indexOf(n),l=i===-1?Number.MAX_SAFE_INTEGER:i;return o===l?e.charCodeAt(0)-n.charCodeAt(0):o-l})}const Fy=t=>/^[a-zA-Z]$/.test(t);function Di(t,e){var o;const n=(o=e.get(t.code))!=null?o:t.key;let a;return ie[t.key]?a=ie[t.key]:Fy(n)?a=n.toUpperCase():a=n,a}function Ll(t){return t.webKeys?(t.electronAcceleratorKeys=t.webKeys.map(Gy),t.electronAcceleratorString=Oi(t.electronAcceleratorKeys)):t.electronAcceleratorKeys?(t.webKeys=t.electronAcceleratorKeys.map(Uy),t.electronAcceleratorString=Oi(t.electronAcceleratorKeys)):t={webKeys:[],electronAcceleratorKeys:[],electronAcceleratorString:void 0},t}function Uy(t){var e;return(e=ua[t])!=null?e:t}function Gy(t){var e;return(e=zy[t])!=null?e:t}function Rl(t){const e=new Set(Object.keys(Bl)),n=t.filter(o=>!e.has(o)).length,a=t.length-n;return n===1&&a>0}const Vy=t=>{const e=t.split("+");return Rl(e)?e:void 0},Oi=t=>Rl(t)?t.join("+"):void 0,Bl={Meta:ie.Meta,CmdOrCtrl:ie.Mod,CommandOrControl:ie.Mod,Ctrl:ie.Control,Control:ie.Control,Cmd:ie.Mod,Command:ie.Mod,Alt:ie.Alt,Option:ie.Alt,AltGr:ie.AltGraph,Shift:ie.Shift,Super:ie.Super},ua=pe(v({},Bl),{Capslock:ie.CapsLock,Space:ie.Space,Tab:ie.Tab,Numlock:ie.NumLock,Scrolllock:ie.ScrollLock,Backspace:ie.Backspace,Delete:ie.Delete,Insert:ie.Insert,Return:ie.Enter,Enter:ie.Enter,Home:ie.Home,End:ie.End,PageUp:ie.PageUp,PageDown:ie.PageDown,Up:ie.ArrowUp,Down:ie.ArrowDown,Left:ie.ArrowLeft,Right:ie.ArrowRight,Esc:ie.Escape,Escape:ie.Escape,VolumeUp:ie.AudioVolumeUp,VolumeDown:ie.AudioVolumeDown,VolumeMute:ie.AudioVolumeMute,MediaNextTrack:ie.MediaTrackNext,MediaPreviousTrack:ie.MediaTrackPrevious,MediaStop:ie.MediaStop,MediaPlayPause:ie.MediaPlayPause,PrintScreen:ie.PrintScreen,numadd:ie.Add,numsub:ie.Subtract,nummult:ie.Multiply,numdiv:ie.Divide,numdec:ie.Decimal,F1:ie.F1,F2:ie.F2,F3:ie.F3,F4:ie.F4,F5:ie.F5,F6:ie.F6,F7:ie.F7,F8:ie.F8,F9:ie.F9,F10:ie.F10,F11:ie.F11,F12:ie.F12,F13:ie.F13,F14:ie.F14,F15:ie.F15,F16:ie.F16,F17:ie.F17,F18:ie.F18,F19:ie.F19,F20:ie.F20}),zy=Object.fromEntries(Object.entries(ua).map(([t,e])=>[e,t])),Hy=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zy),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)}),Wy=R(()=>L(()=>import("./kyyxlt80a527gl6x.js"),__vite__mapDeps([54,1])),{loading:t=>K(t)}),Ky=R(()=>L(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>K(t)});async function $y(){var t;await((t=ln)==null?void 0:t.checkForUpdates())}function qy(){var n;const[t,e]=S.useState(!1);return s.jsx(s.Fragment,{children:s.jsx(le,{children:s.jsx(zt,{label:s.jsx(p,v({},ls.updatesSettingLabel)),disabled:t,buttonLabel:t?s.jsx(p,v({},ls.updateInProgressButtonLabel)):s.jsx(p,v({},ls.updateButtonLabel)),onClick:async()=>{try{e(!0),await $y()}catch(a){ts.addError(new Error("Sidetron Settings: Error checking for updates"),{cause:a})}finally{e(!1)}},description:s.jsx(p,pe(v({},ls.updateSettingDescription),{values:{version:(n=md(xd()))!=null?n:"Unknown"}}))})})})}const Yy=async()=>{var a;let t="";const e=await((a=ln)==null?void 0:a.getSettingValue("companionWindowShortcut"));typeof e=="string"?t=e:ts.addError(new Error("Sidetron Settings: No companion chat hotkey found over IPC"));const n=Vy(t);return Promise.resolve(Ll({electronAcceleratorKeys:n}))};function Qy(){const[t,e]=S.useState(!1),[n,a]=S.useState(void 0);return S.useEffect(()=>{(async()=>{const i=await Yy();a(i)})()},[]),S.useEffect(()=>{var o;(o=ln)==null||o.publish(qo.HOTKEY_RECORDING_STATE,{inProgress:t})},[t]),s.jsx(s.Fragment,{children:s.jsx(le,{children:s.jsx(zt,{label:s.jsx(p,v({},ls.companionChatHotkeyLabel)),disabled:n===void 0||t,buttonLabel:t?s.jsx(p,v({},ls.companionChatHotkeyRecordingLabel)):n?s.jsx(Fu,{binding:n.webKeys,className:"text-xs"}):s.jsx(p,v({},ls.companionChatHotkeyLoadingLabel)),onClick:async()=>{e(!0);const o=await Ry();o?o.electronAcceleratorString?(a(o),ln&&(ln.publish(qo.DESKTOP_SETTING_CHANGED,{setting:"companionWindowShortcut",value:o.electronAcceleratorString}),ts.addAction("Sidetron Settings: User recorded a new hotkey: ".concat(o.electronAcceleratorString)))):ts.addError(new Error("Sidetron Settings: Invalid companion chat hotkey registered: ".concat(o))):ts.addAction("Sidetron Settings: User did not record a hotkey"),e(!1)}})})})}function Jy(){return s.jsx(s.Fragment,{children:s.jsx(le,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(p,v({},ls.textSizeLabel))}),s.jsxs("div",{className:"flex shrink-0 gap-2",children:[s.jsx(te,{color:"secondary",onClick:fd,"data-testid":"text-size-decrease",icon:Wy,className:"aspect-square p-0"}),s.jsx(te,{color:"secondary",onClick:pd,"data-testid":"text-size-increase",icon:Hy,className:"aspect-square p-0"}),s.jsx(te,{color:"secondary",onClick:hd,"data-testid":"text-size-reset",children:s.jsx(p,v({},ls.textSizeResetButtonLabel))})]})]})})})}function Zy({href:t,label:e,stateLabel:n,testId:a}){return s.jsx("a",{className:"w-full","data-testid":a,href:t,target:"_blank",rel:"noreferrer",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:e}),s.jsxs("div",{className:"me-3 -mb-1 flex items-center",children:[n&&s.jsx("div",{className:"me-2 -mt-0.5",children:n}),s.jsx(Ky,{className:"icon-sm"})]})]})})}function Xy(){const[t,e]=S.useState(!1),n=Y(),a=async()=>{var i;const o=await((i=ln)==null?void 0:i.getSettingValue("autoLaunch"));e(!!o)};return S.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("focus",o),()=>{window.removeEventListener("focus",o)}},[]),s.jsx(s.Fragment,{children:s.jsx(le,{children:s.jsx(Zy,{href:"ms-settings:startupapps",label:s.jsx(p,v({},ls.autoLaunchLabel)),stateLabel:t?n.formatMessage(ls.autoLaunchOnLabel):n.formatMessage(ls.autoLaunchOffLabel)})})})}const ls=Be({autoLaunchLabel:{id:"desktopAppSettingsModal.autoLaunchLabel",defaultMessage:"Launch at Login"},autoLaunchOnLabel:{id:"desktopAppSettingsModal.autoLaunchOnLabel",defaultMessage:"On"},autoLaunchOffLabel:{id:"desktopAppSettingsModal.autoLaunchOffLabel",defaultMessage:"Off"},updatesSettingLabel:{id:"desktopAppSettingsModal.updatesSettingLabel",defaultMessage:"App updates"},updateButtonLabel:{id:"desktopAppSettingsModal.updateButtonLabel",defaultMessage:"Check for updates"},updateInProgressButtonLabel:{id:"desktopAppSettingsModal.updateInProgressButtonLabel",defaultMessage:"Checking for updates..."},updateSettingDescription:{id:"desktopAppSettingsModal.updateSettingDescription",defaultMessage:"Current version: {version}"},companionChatHotkeyLabel:{id:"desktopAppSettingsModal.companionChatHotkeyLabel",defaultMessage:"Companion window hotkey"},companionChatHotkeyLoadingLabel:{id:"desktopAppSettingsModal.companionChatHotkeyLoadingLabel",defaultMessage:"Loading..."},companionChatHotkeyRecordingLabel:{id:"desktopAppSettingsModal.companionChatHotkeyRecordingLabel",defaultMessage:"Recording..."},textSizeLabel:{id:"desktopAppSettingsModal.textSizeLabel",defaultMessage:"Text size"},textSizeResetButtonLabel:{id:"desktopAppSettingsModal.textSizeResetButtonLabel",defaultMessage:"Reset"}});function eb(){const t=Et();return lt({mutationFn:({factor:e,phoneNumber:n=void 0})=>Xe.safePost("/accounts/mfa/enroll",{requestBody:{factor_type:e,phone_number:n}}),onSuccess:()=>{t.invalidateQueries({queryKey:["mfaInfo"]})}})}function _C(){const t=Et();return lt({mutationFn:({factor:e,sessionId:n,code:a})=>Xe.safePost("/accounts/mfa/user/activate_enrollment",{requestBody:{code:a,factor_type:e,session_id:n}}),onSuccess:()=>{t.invalidateQueries({queryKey:["mfaInfo"]})}})}function vC(){const t=Et();return lt({mutationFn:({factorId:e})=>Xe.safePost("/accounts/mfa/user/disable_in_house",{requestBody:{factor_id:e}}),onSuccess:()=>{t.invalidateQueries({queryKey:["mfaInfo"]})}})}const tb=R(()=>L(()=>import("./dch45l9yrtbjo93p.js"),__vite__mapDeps([55,1])),{loading:t=>K(t)}),sb=R(()=>L(()=>import("./jdb91cydeg9pgy1w.js"),__vite__mapDeps([56,1,19,20,14,15,16,17,21,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,31,95,96,97,41,98,99,100,101,102,103,104,105,106,107,108,109,110,44,111,112,113,114,115,116,117,118,119])).then(t=>t.EnterPhoneNumberModal)),nb=R(()=>L(()=>import("./f4q8qg8290sri8nw.js"),__vite__mapDeps([120,1,15,16,14,17,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,31,95,96,97,41,98,99,100,101,102,103,104,105,106,107,108,109,110,44,111,112,113,114,115,116,117,118,119])).then(t=>t.EnterOtpCodeModal)),nn=R(()=>L(()=>import("./bcb2bekoxbjy6is0.js"),__vite__mapDeps([121,1,15,16,14,17,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,31,95,96,97,41,98,99,100,101,102,103,104,105,106,107,108,109,110,44,111,112,113,114,115,116,117,118,119])).then(t=>t.DisableMfaFactorModal)),ab=R(()=>L(()=>import("./v4c8tb5m1p99v94r.js"),__vite__mapDeps([122,1,15,16,14,17,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,31,95,96,97,41,98,99,100,101,102,103,104,105,106,107,108,109,110,44,111,112,113,114,115,116,117,118,119])).then(t=>t.EnrollTotpModal)),Fl=t=>{nt(t,sb,{onOtpRequested:({phoneNumber:e,enrollmentSessionId:n,factorId:a})=>{nt(t,nb,{phoneNumber:e,enrollmentSessionId:n,factorId:a,onBack:()=>{Fl(t)}})}})};function ob(t){"use forget";var Ke,Je,et,tt,z,ue,Ie,me,he,xe,we,$e;const e=_e.c(61),{factors:n,isDisabled:a,isLoading:o,showPushAuth:i,showSms:l,email:d,numTrustedDevices:c}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={},e[0]=r):r=e[0];const{setupMfa:m,removeMfa:g}=pl(r),u=ce(),f=Y(),h=gt(),_=kt(),[b]=fn(),j=Pt(),y=eb(),M=S.useRef(!1),C=S.useRef(!1),k=S.useRef(!1);let E;e[1]!==u?(E=Oe(u,"959646612"),e[1]=u,e[2]=E):E=e[2];const w=E;let x;e[3]!==u?(x=Oe(u,"1250557818"),e[3]=u,e[4]=x):x=e[4];const T=x,N=((Je=(Ke=n==null?void 0:n.totp)==null?void 0:Ke.length)!=null?Je:0)>0,A=(z=(tt=(et=n==null?void 0:n.totp)==null?void 0:et[0])==null?void 0:tt.id)!=null?z:"",[P,U]=S.useState(null),I=(n==null?void 0:n.push_auth)!=null,q=(Ie=(ue=n==null?void 0:n.push_auth)==null?void 0:ue.id)!=null?Ie:"",[Q,D]=S.useState(!1),[F,G]=S.useState(null);let X,B;e[5]!==I||e[6]!==F?(X=()=>{F!==null&&F===I&&G(null)},B=[I,F],e[5]=I,e[6]=F,e[7]=X,e[8]=B):(X=e[7],B=e[8]),S.useEffect(X,B);const $=(_==null?void 0:_.planType)===ut.PLUS||(_==null?void 0:_.planType)===ut.PRO,H=((me=n==null?void 0:n.sms.length)!=null?me:0)>0,J=(xe=(he=n==null?void 0:n.sms[0])==null?void 0:he.metadata)==null?void 0:xe.phone_number,W=($e=(we=n==null?void 0:n.sms[0])==null?void 0:we.id)!=null?$e:"",[de,V]=S.useState(!1);let se;e[9]!==u?(se=()=>{Fl(u)},e[9]=u,e[10]=se):se=e[10];const ae=se;let Ne;e[11]!==u||e[12]!==d||e[13]!==y||e[14]!==f||e[15]!==h?(Ne=()=>{y.mutateAsync({factor:"totp"}).then(ye=>{k.current=!1,nt(u,ab,{sessionId:ye.session_id,secret:ye.secret,email:d,onActivated:()=>{k.current=!0},onCancelled:()=>{k.current||U(!1),k.current=!1}})}).catch(()=>{h.danger(f.formatMessage({id:"PK1QdN",defaultMessage:"We couldn't start setup. Please try again."}))})},e[11]=u,e[12]=d,e[13]=y,e[14]=f,e[15]=h,e[16]=Ne):Ne=e[16];const Me=Ne;let Ae,ve;e[17]!==u||e[18]!==y||e[19]!==f||e[20]!==o||e[21]!==j||e[22]!==ae||e[23]!==Me||e[24]!==q||e[25]!==b||e[26]!==W||e[27]!==h||e[28]!==A?(Ae=()=>{if(o)return;const ye=b.get("action"),Fe=b.get("factor"),Z=b.get("factor_id");if(!ye)return;let Ce=!1;const oe=()=>{var Ue;const fe=ao(He.Security);j({pathname:"/",hash:(Ue=fe.hash)!=null?Ue:"settings",search:""},{replace:!0})},ne=()=>{if(Z){if(Z===W){nt(u,nn,{factorId:Z,factor:"sms"}),Ce=!0;return}if(Z===q){nt(u,nn,{factorId:Z,factor:"push_auth",onDisabled:()=>G(!1)}),Ce=!0;return}if(Z===A){nt(u,nn,{factorId:Z,factor:"totp"}),Ce=!0;return}}},be=()=>{if(Fe===ka.PushAuth){if(M.current){Ce=!0;return}M.current=!0,D(!0),y.mutateAsync({factor:"push_auth"}).then(()=>{D(!1),G(!0),h.success(f.formatMessage({id:"ybOc16",defaultMessage:"Push notifications enabled"}),{testId:"push-mfa-activation-success"})}).catch(()=>{D(!1),h.danger(f.formatMessage({id:"h0SqYQ",defaultMessage:"We couldn't enroll you in push notifications. Please try again."}),{testId:"push-mfa-enrollment-failed"})}),Ce=!0;return}if(Fe===ka.Totp){if(C.current){Ce=!0;return}C.current=!0,Me(),Ce=!0;return}if(Fe===ka.Sms){ae(),Ce=!0;return}};ye===di.Disable?ne():ye===di.Enable&&be(),Ce&&oe()},ve=[b,u,j,W,q,A,o,y,f,h,ae,Me],e[17]=u,e[18]=y,e[19]=f,e[20]=o,e[21]=j,e[22]=ae,e[23]=Me,e[24]=q,e[25]=b,e[26]=W,e[27]=h,e[28]=A,e[29]=Ae,e[30]=ve):(Ae=e[29],ve=e[30]),S.useEffect(Ae,ve);let Le;e[31]!==u||e[32]!==y||e[33]!==f||e[34]!==a||e[35]!==o||e[36]!==$||e[37]!==I||e[38]!==H||e[39]!==N||e[40]!==F||e[41]!==T||e[42]!==c||e[43]!==ae||e[44]!==Me||e[45]!==Q||e[46]!==q||e[47]!==g||e[48]!==m||e[49]!==i||e[50]!==l||e[51]!==w||e[52]!==W||e[53]!==J||e[54]!==de||e[55]!==h||e[56]!==A||e[57]!==P?(Le=!o&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-token-text-primary mt-2.5 mb-1.5 flex items-center gap-2 text-lg font-normal",children:s.jsx(p,{id:"settingsModal.mfaSectionTitle",defaultMessage:"Multi-factor authentication (MFA)"})}),s.jsx(le,{children:s.jsx(ft,{disabled:a,enabled:P!=null?P:N,label:s.jsx(p,{id:"settingsModal.mfaAuthenticatorLabel",defaultMessage:"Authenticator App"}),description:s.jsx(p,{id:"settingsModal.mfaAuthenticatorDescription",defaultMessage:"Use one-time codes from an authenticator app."}),onChange:async ye=>{if(U(ye),ye){if(await m("totp",{native_modal:T}))return;Me()}else{const Fe=A;if(!Fe||await g("totp",Fe))return;nt(u,nn,{factorId:Fe,factor:"totp",onDisabled:()=>U(!1)})}}})}),i&&s.jsx(le,{children:s.jsx(ft,{disabled:a,enabled:F!=null?F:I,isLoading:Q,toggleLeftAdornment:(F!=null?F:I)===!0&&typeof c=="number"&&c===0?s.jsx(Wt,{label:s.jsx(p,{id:"settingsModal.pushMfaNoTrustedDevicesTooltip",defaultMessage:"No active trusted devices  well email you a code instead"}),side:"top",contentClassName:"!max-w-[180px]",labelTextAlign:"left",children:s.jsx(tb,{className:"icon-sm text-token-interactive-label-danger-secondary-default"})}):void 0,label:s.jsx(p,{id:"settingsModal.pushMfaLabel",defaultMessage:"Push notifications"}),description:s.jsx(p,{id:"settingsModal.pushMfaDescription",defaultMessage:"Approve log-ins with a push sent to your trusted device"}),onChange:async ye=>{if(ye){if(D(!0),await m("push_auth")){D(!1);return}try{await y.mutateAsync({factor:"push_auth"}).then(()=>{D(!1),G(!0),h.success(f.formatMessage({id:"ybOc16",defaultMessage:"Push notifications enabled"}),{testId:"push-mfa-activation-success"})})}catch(Z){h.danger(f.formatMessage({id:"1n5hT/",defaultMessage:"We couldn't enroll you in push notifications. Please try again."}),{testId:"push-mfa-enrollment-failed"}),D(!1)}}else{const Fe=q;if(await g("push_auth",Fe))return;nt(u,nn,{factorId:Fe,factor:"push_auth",onDisabled:()=>G(!1)})}}})}),(H||l&&($||w))&&s.jsx(le,{children:s.jsx(ft,{label:s.jsx(p,{id:"settingsModal.smsMfaLabel",defaultMessage:"Text Message"}),enabled:H,disabled:a,isLoading:o||de,onChange:async ye=>{if(ye&&!H){if(V(!0),await m("sms"))return;V(!1),ae()}else if(!ye&&H){if(V(!0),await g("sms",W))return;V(!1),nt(u,nn,{factorId:W,factor:"sms"})}},description:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-token-text-tertiary text-xs",children:s.jsx(p,{id:"settingsModal.smsMfaDescription",defaultMessage:"Get 6-digit verification codes by text"})}),J&&s.jsx("div",{className:"mt-1",children:s.jsx("p",{className:"text-blue-400","data-testid":J?"sms-phone-number-row":"sms-phone-number-row-add",children:J})})]})})}),s.jsx("div",{className:"hidden","aria-hidden":!0})]}),e[31]=u,e[32]=y,e[33]=f,e[34]=a,e[35]=o,e[36]=$,e[37]=I,e[38]=H,e[39]=N,e[40]=F,e[41]=T,e[42]=c,e[43]=ae,e[44]=Me,e[45]=Q,e[46]=q,e[47]=g,e[48]=m,e[49]=i,e[50]=l,e[51]=w,e[52]=W,e[53]=J,e[54]=de,e[55]=h,e[56]=A,e[57]=P,e[58]=Le):Le=e[58];let je;return e[59]!==Le?(je=s.jsx("div",{className:"flex flex-col",children:Le}),e[59]=Le,e[60]=je):je=e[60],je}const La=R(()=>L(()=>import("./bc1m2j307f5bar77.js"),__vite__mapDeps([123,1,15,16,14,17,44])).then(t=>t.PasskeysModal)),ib=R(()=>L(()=>import("./k0cn8gs14rhe3hip.js"),__vite__mapDeps([124,1,15,16,14,17,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,31,95,96,97,41,98,99,100,101,102,103,104,105,106,107,108,109,110,44,111,112,113,114,115,116,117,118,119])).then(t=>t.DeletePasskeyModal));function rb({factors:t}){const e=ce(),{setupMfa:n}=pl({}),a=Y(),[o]=fn(),i=Pt(),l=S.useRef(!1),d=S.useRef(new Set),c=S.useMemo(()=>{var j;return(j=t==null?void 0:t.passkeys)!=null?j:[]},[t==null?void 0:t.passkeys]);if(S.useEffect(()=>{var E,w,x;if(l.current)return;const j=o.get("action"),y=o.get("factor"),M=o.get("factor_id");if(j!=="disable"||y!=="passkey"||!M)return;const C=c.find(T=>T.id===M);if(!C||(l.current=!0,d.current.has(C.id)))return;d.current.add(C.id),nt(e,La,{passkeys:c,onCreatePasskey:()=>{n("passkey")}}),nt(e,ib,{factorId:C.id,passkeyName:(w=(E=C.metadata)==null?void 0:E.authenticator_name)!=null?w:null,onDeleted:T=>{const N=c.filter(A=>A.id!==T);nt(e,La,{passkeys:N,onCreatePasskey:()=>{n("passkey")}}),d.current.delete(T)},onClose:()=>{d.current.delete(C.id)}});const k=ao(He.Security);i({pathname:"/",hash:(x=k.hash)!=null?x:"settings",search:""},{replace:!0})},[e,c,o,n,i]),!Oe(e,"1216135095"))return null;const m=c.length,g=c.reduce((j,y)=>{var C,k;const M=(k=(C=y.metadata)==null?void 0:C.create_time_seconds)!=null?k:0;return M>j?M:j},0),u=g>0?new Date(g*1e3):null,f=()=>{n("passkey")},h=s.jsxs("div",{className:"text-start text-sm font-normal",children:[s.jsx(p,{id:"settingsModal.passkeysRowTitle",defaultMessage:"Passkeys"}),m===0&&s.jsx("p",{className:"text-token-text-tertiary mt-1 text-xs",children:s.jsx(p,{id:"settingsModal.passkeysRowDescription",defaultMessage:"Passkeys are secure and protect your account with multi-factor authentication. They don't require any extra steps."})}),m>0&&u&&s.jsx("p",{className:"text-token-text-tertiary mt-1 text-xs",children:s.jsx(p,{id:"settingsModal.passkeysRowLastAdded",defaultMessage:"Last added on {date}",values:{date:a.formatDate(u,{month:"long",day:"numeric",year:"numeric"})}})})]}),_=m===0?a.formatMessage({id:"settingsModal.passkeysRowAdd",defaultMessage:"Add"}):a.formatMessage({id:"settingsModal.passkeysRowCountLabel",defaultMessage:"{count, plural, one {# passkey} other {# passkeys}}"},{count:m}),b=()=>{if(m===0){f();return}nt(e,La,{passkeys:c,onCreatePasskey:f})};return s.jsx(le,{children:s.jsx(xn,{onClick:b,label:h,stateLabel:_})})}function lb(t){"use forget";const e=_e.c(19),{personalitiesList:n,selectedPersonality:a,traitsEnabled:o,traitsList:i,currentTraits:l,onSelectPersonality:d,onSelectTrait:c}=t,r=Xg(null),[m,g]=S.useState(null),u=Rs(d),f=Rs(c);let h,_;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(p,{defaultMessage:"Base style and tone",id:"settings.personality.baseStyleAndTone"}),_=s.jsx(p,{defaultMessage:"Set the style and tone of how ChatGPT responds to you. This doesn't impact ChatGPT's capabilities.",id:"settings.personality.baseStyleAndToneDescription"}),e[0]=h,e[1]=_):(h=e[0],_=e[1]);let b;e[2]!==u?(b=E=>{S.startTransition(()=>{u(E)})},e[2]=u,e[3]=b):b=e[3];const j=a==null?void 0:a.key;let y;e[4]!==n||e[5]!==b||e[6]!==j?(y=s.jsx(Li,{label:h,subtitle:_,dropdown:s.jsx(Qr,{personalitiesList:n,enabled:!0,onSelect:b,selectedPersonality:j})}),e[4]=n,e[5]=b,e[6]=j,e[7]=y):y=e[7];let M;e[8]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx(ub,{}),e[8]=M):M=e[8];let C;e[9]!==l||e[10]!==r||e[11]!==m||e[12]!==f||e[13]!==o||e[14]!==i?(C=o&&i.map(E=>{var w;return s.jsx(Li,{label:E.label,dropdown:s.jsx(cb,{trait:E,level:(w=l.get(E.key))!=null?w:null,parent:m,openDropdownType:r,onLevelChange:x=>{S.startTransition(()=>{f(E.key,x)})}})},E.key)}),e[9]=l,e[10]=r,e[11]=m,e[12]=f,e[13]=o,e[14]=i,e[15]=C):C=e[15];let k;return e[16]!==y||e[17]!==C?(k=s.jsxs(gb,{ref:g,children:[y,M,C]}),e[16]=y,e[17]=C,e[18]=k):k=e[18],k}function cb(t){"use forget";const e=_e.c(34),{trait:n,level:a,onLevelChange:o,parent:i,openDropdownType:l}=t;let d;e[0]!==l||e[1]!==n.key?(d=()=>l()===n.key,e[0]=l,e[1]=n.key,e[2]=d):d=e[2];const c=ot(d),r=n.key;let m;e[3]!==l||e[4]!==n.key?(m=E=>{S.startTransition(()=>{E?l.set(n.key):requestAnimationFrame(()=>{l()===n.key&&l.set(null)})})},e[3]=l,e[4]=n.key,e[5]=m):m=e[5];let g;e[6]!==a?(g=a==="less"&&s.jsx(p,{defaultMessage:"Less",id:"settings.personality.trait.less"}),e[6]=a,e[7]=g):g=e[7];let u;e[8]!==a?(u=a==="more"&&s.jsx(p,{defaultMessage:"More",id:"settings.personality.trait.more"}),e[8]=a,e[9]=u):u=e[9];let f;e[10]!==a?(f=(!a||a==="default")&&s.jsx(p,{defaultMessage:"Default",id:"settings.personality.trait.default"}),e[10]=a,e[11]=f):f=e[11];let h;e[12]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx("svg",{className:"text-muted ms-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),e[12]=h):h=e[12];let _;e[13]!==g||e[14]!==u||e[15]!==f?(_=s.jsx(Re.Trigger,{asChild:!0,children:s.jsxs(te,{color:"ghost",className:"font-normal",children:[g,u,f,h]})}),e[13]=g,e[14]=u,e[15]=f,e[16]=_):_=e[16];const b=a!=null?a:"default";let j;e[17]!==o?(j=E=>{o(E)},e[17]=o,e[18]=j):j=e[18];let y;e[19]!==n.levels?(y=n.levels.map(db),e[19]=n.levels,e[20]=y):y=e[20];let M;e[21]!==j||e[22]!==y||e[23]!==b?(M=s.jsx(Re.Content,{align:"end",children:s.jsx(Re.RadioGroup,{value:b,onValueChange:j,children:y})}),e[21]=j,e[22]=y,e[23]=b,e[24]=M):M=e[24];let C;e[25]!==i||e[26]!==M?(C=s.jsx(Re.Portal,{container:i,children:M}),e[25]=i,e[26]=M,e[27]=C):C=e[27];let k;return e[28]!==c||e[29]!==C||e[30]!==m||e[31]!==_||e[32]!==n.key?(k=s.jsxs(Re.Root,{modal:!0,open:c,onOpenChange:m,children:[_,C]},r),e[28]=c,e[29]=C,e[30]=m,e[31]=_,e[32]=n.key,e[33]=k):k=e[33],k}function db(t){return s.jsx(Re.RadioItem,{label:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:t.option_label}),s.jsx("span",{className:"text-token-text-tertiary truncate text-xs text-balance wrap-break-word",children:t.description})]}),value:t.key},t.key)}function ub(){"use forget";const t=_e.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx("div",{className:"col-span-full h-1.5 w-full"}),t[0]=e):e=t[0],e}function Li(t){"use forget";const e=_e.c(10),{label:n,dropdown:a,subtitle:o}=t;let i;e[0]!==n?(i=s.jsx("div",{className:"truncate select-none",children:n}),e[0]=n,e[1]=i):i=e[1];let l;e[2]!==a?(l=s.jsx("div",{className:"w-fit justify-self-end",children:a}),e[2]=a,e[3]=l):l=e[3];let d;e[4]!==o?(d=o&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-token-text-tertiary -mt-3 text-xs text-pretty",children:o}),s.jsx("div",{"data-empty":!0})]}),e[4]=o,e[5]=d):d=e[5];let c;return e[6]!==i||e[7]!==l||e[8]!==d?(c=s.jsxs(s.Fragment,{children:[i,l,d]}),e[6]=i,e[7]=l,e[8]=d,e[9]=c):c=e[9],c}function gb(t){"use forget";const e=_e.c(8),{children:n,title:a,ref:o}=t;let i;e[0]!==a?(i=a&&s.jsx("h2",{className:"text-heading-3 font-normal",children:a}),e[0]=a,e[1]=i):i=e[1];let l;e[2]!==n?(l=s.jsx("div",{className:"grid [grid-auto-rows:minmax(min-content,auto)] grid-cols-[minmax(0,1fr)_min-content] items-center gap-2",children:n}),e[2]=n,e[3]=l):l=e[3];let d;return e[4]!==o||e[5]!==i||e[6]!==l?(d=s.jsxs("section",{className:"flex flex-col gap-2 pt-4",ref:o,children:[i,l]}),e[4]=o,e[5]=i,e[6]=l,e[7]=d):d=e[7],d}const mb=()=>Ji({queryKey:["traitPills"],queryFn:async()=>{try{const t=await Xe.safeGet("/user_system_message_trait_pills");return t?Array.isArray(t)?t:[]:[]}catch(t){return[...fb.map(e=>({key:e,label:e,description:Ri[e].defaultMessage||""})),...pb.map(e=>({key:e,label:e,description:Ri[e].defaultMessage||""}))]}}}),fb=["Chatty","Witty","Opinionated","StraightShooting","GenZ","Encouraging","Skeptical","ForwardThinking"],pb=["Poetic","Respectful","Humble","Professional","Corporate","Direct","Silly","Pragmatic","Chill","OutsideTheBox"],Ri=Be({Chatty:{id:"userContextModal.chattySentence",defaultMessage:"Be talkative and conversational."},Witty:{id:"userContextModal.wittySentence",defaultMessage:"Use quick and clever humor when appropriate."},StraightShooting:{id:"userContextModal.straightShootingSentence",defaultMessage:"Tell it like it is; don't sugar-coat responses."},Encouraging:{id:"userContextModal.encouragingSentence",defaultMessage:"Use an encouraging tone."},GenZ:{id:"userContextModal.genZSentence",defaultMessage:"Talk like a member of Gen Z."},Skeptical:{id:"userContextModal.skepticalSentence",defaultMessage:"Adopt a skeptical, questioning approach."},ForwardThinking:{id:"userContextModal.forwardThinkingSentence",defaultMessage:"Take a forward-thinking view."},Poetic:{id:"userContextModal.poeticSentence",defaultMessage:"Use a poetic, lyrical tone."},Opinionated:{id:"userContextModal.opinionatedSentence",defaultMessage:"Readily share strong opinions."},Respectful:{id:"userContextModal.respectfulSentence",defaultMessage:"Always be respectful."},Humble:{id:"userContextModal.humbleSentence",defaultMessage:"Be humble when appropriate."},Professional:{id:"userContextModal.professionalSentence",defaultMessage:"Use a formal, professional tone."},Silly:{id:"userContextModal.sillySentence",defaultMessage:"Be playful and goofy."},Direct:{id:"userContextModal.directSentence",defaultMessage:"Get right to the point."},Pragmatic:{id:"userContextModal.pragmaticSentence",defaultMessage:"Be practical above all."},Corporate:{id:"userContextModal.corporateSentence",defaultMessage:"Respond with corporate jargon."},Chill:{id:"userContextModal.chillSentence",defaultMessage:"Keep it relaxed and easygoing."},OutsideTheBox:{id:"userContextModal.outsideTheBoxSentence",defaultMessage:"Be innovative and think outside the box."}}),hb=R(()=>L(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([32,1])),{loading:t=>K(t)});function xb(){return ds(pe(v({},mb()),{select:t=>{const e=Math.ceil(t.length/2-1);return{firstSet:t.slice(0,e),secondSet:t.slice(e)}}}))}function Bi(t,e,n){const a=t.length-2,o=t.filter(c=>!n.includes(c.key)),i=e.filter(c=>!n.includes(c.key)),l=Math.min(o.length,a),d=Math.max(0,a-o.length);return{visibleTraits:[...o.slice(0,l),...i.slice(0,d)],hiddenTraits:[...o.slice(l),...i.slice(d)]}}function yb({onSelect:t,selectedTraits:e,setSelectedTraits:n,disablePills:a=!1}){const o=Y(),{data:i,isLoading:l}=xb(),[d,c]=S.useState(!1),[r,m]=S.useState([]),[g,u]=S.useState([]);if(S.useEffect(()=>{if(i){const{visibleTraits:b,hiddenTraits:j}=Bi(i.firstSet,i.secondSet,[]);m(b),u(j)}},[i]),l)return s.jsx(Ut,{});if(!i)return null;let f=[];f=r;const h=b=>{if(!e.includes(b.key)&&(n(j=>[...j,b.key]),t(b.description),!d&&(m(j=>j.filter(y=>y.key!==b.key)),g.length>0))){const[j,...y]=g;m(M=>[...M,j]),u(y)}},_=()=>{if(d){const{visibleTraits:b,hiddenTraits:j}=Bi(i.firstSet,i.secondSet,e);m(b),u(j)}else m([...i.firstSet,...i.secondSet]),u([]);c(b=>!b)};return s.jsxs("ul",{className:"flex flex-wrap gap-x-1 gap-y-2",children:[f.map(b=>e.includes(b.key)?null:s.jsx("li",{children:s.jsx(te,{size:"small",color:"secondary",className:"text-token-text-secondary px-2.5 py-1 text-xs font-normal",onClick:()=>h(b),disabled:a,children:b.label})},b.label)),f.length>0&&!d&&g.length>0&&s.jsx("li",{children:s.jsx(te,{size:"small",color:"secondary","aria-label":o.formatMessage(We.traitsReset),className:"text-token-text-secondary h-7 w-7 rounded-full",onClick:_,disabled:a,children:s.jsx(hb,{className:"icon-sm"})})})]})}function bb({onSuccess:t,onError:e,skipPersonalityUpdates:n}){const a=Et();return lt({mutationFn:({userContext:o,conversationId:i,messageId:l})=>fr(pe(v({},o),{conversationId:i,messageId:l,skipPersonalityUpdates:n})),onSettled:(o,i)=>{const l=["userContext"];o!==null&&!i?a.setQueryData(l,o):a.invalidateQueries({queryKey:l})},onSuccess:t,onError:e})}const Mb=R(()=>L(()=>import("./glgf3sl2j4mvtn59.js"),__vite__mapDeps([125,1])),{loading:t=>K(t)}),Cb=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zE),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)}),Fi=100,_b=80;function vb(){"use forget";const t=_e.c(31),{data:e,isLoading:n}=Ft(ke.Sunshine),{data:a,isLoading:o}=Ft(ke.Moonshine),{data:i,isLoading:l}=Ft(ke.UkdvthMemoryEnabled),{data:d,isLoading:c}=Ft(ke.UkdvthEntrypointVisible),{mutate:r,isPending:m}=Bt(!0),{mutate:g,isPending:u}=Bt(!0),f=mo(),h=Y(),_=(f==null?void 0:f[ke.UkdvthMemoryEnabled])===!0||!e||!a,b=(f==null?void 0:f[ke.UkdvthEntrypointVisible])===!0||!e||!a||!i,j=_?!1:i,y=b?!1:d,M=l||n||o||m,C=c||l||n||o||u;let k;t[0]!==h?(k=h.formatMessage(We.pulseSettingTitle),t[0]=h,t[1]=k):k=t[1];let E;t[2]!==h?(E=h.formatMessage(We.pulseReferenceMemoriesToggleLabel),t[2]=h,t[3]=E):E=t[3];const w=j!=null?j:!1;let x;t[4]!==_||t[5]!==r?(x=D=>{_||(Ge.logEventWithStatsig(D?"ChatGPT Personalization Settings Pulse Enabled":"ChatGPT Personalization Settings Pulse Disabled",D?"chatgpt_personalization_settings_pulse_enabled":"chatgpt_personalization_settings_pulse_disabled"),r({setting:ke.UkdvthMemoryEnabled,value:D}))},t[4]=_,t[5]=r,t[6]=x):x=t[6];let T;t[7]!==_||t[8]!==M||t[9]!==E||t[10]!==w||t[11]!==x?(T=s.jsx(ft,{label:E,enabled:w,disabled:_,isLoading:M,onChange:x}),t[7]=_,t[8]=M,t[9]=E,t[10]=w,t[11]=x,t[12]=T):T=t[12];let N;t[13]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(un,{children:s.jsx(p,v({},We.pulseReferenceMemoriesDescription))}),t[13]=N):N=t[13];let A;t[14]!==T?(A=s.jsxs(le,{children:[T,N]}),t[14]=T,t[15]=A):A=t[15];let P;t[16]!==h?(P=h.formatMessage(We.pulseEntrypointToggleLabel),t[16]=h,t[17]=P):P=t[17];const U=y!=null?y:!1;let I;t[18]!==b||t[19]!==g?(I=D=>{b||(Ge.logEventWithStatsig(D?"ChatGPT Personalization Settings Pulse Entrypoint Enabled":"ChatGPT Personalization Settings Pulse Entrypoint Disabled",D?"chatgpt_personalization_settings_pulse_entrypoint_enabled":"chatgpt_personalization_settings_pulse_entrypoint_disabled"),g({setting:ke.UkdvthEntrypointVisible,value:D}))},t[18]=b,t[19]=g,t[20]=I):I=t[20];let q;t[21]!==b||t[22]!==C||t[23]!==P||t[24]!==U||t[25]!==I?(q=s.jsx(le,{children:s.jsx(ft,{label:P,enabled:U,disabled:b,isLoading:C,onChange:I})}),t[21]=b,t[22]=C,t[23]=P,t[24]=U,t[25]=I,t[26]=q):q=t[26];let Q;return t[27]!==k||t[28]!==q||t[29]!==A?(Q=s.jsxs(Ze,{title:k,children:[A,q]}),t[27]=k,t[28]=q,t[29]=A,t[30]=Q):Q=t[30],Q}function jb(){var c,r,m;const t=Y(),e=Es($s.isBusinessWorkspace),n=(c=Es($s.businessWorkspaceId))!=null?c:void 0,{data:a,isLoading:o}=Cd(n),{data:i}=Ft(ke.HiveReferencedInInternalKnowledge),l=Bt();return o?s.jsx("div",{className:"flex justify-center",children:s.jsx(Ut,{})}):(e?((r=a==null?void 0:a.beta_settings.hive)!=null?r:!1)&&((m=a==null?void 0:a.beta_settings.hive_knowledge_retrieval)!=null?m:!1):!0)?s.jsx(Ze,{title:t.formatMessage(We.RecordModeTitle),learnMoreHref:"https://help.openai.com/en/articles/11487532-chatgpt-record",children:s.jsx(le,{children:s.jsx(ft,{label:t.formatMessage(We.recordModeToggleLabel),enabled:!!i,onChange:g=>l.mutate({setting:ke.HiveReferencedInInternalKnowledge,value:g}),description:s.jsx(p,v({},We.recordModeDescription))})})}):null}function Sb({disabledTools:t,localUserContext:e,setLocalUserContext:n,userContextData:a}){var _,b;const o=Y(),i=ce(),[l,d]=S.useState(!1),c=S.useRef(null),m=_d(i)&&Oe(i,"798638120"),{data:g,isLoading:u}=Ft(ke.ConnectorSearchEnabled),{mutate:f,isPending:h}=Bt();return s.jsx(Ze,{title:s.jsxs("button",{onClick:()=>{d(j=>!j),l||requestAnimationFrame(()=>{c.current&&c.current.scrollIntoView({behavior:"smooth",block:"end"})})},"aria-label":o.formatMessage(l?We.advancedClose:We.advancedOpen),"data-testid":"advanced-toggle","aria-expanded":l,className:"flex items-center justify-between gap-1",children:[s.jsx(p,v({},We.advanced)),l?s.jsx(Mb,{className:"icon-sm"}):s.jsx(Cb,{className:"icon-sm"})]}),noBorder:!l,children:l&&s.jsxs("div",{className:"mt-2",children:[s.jsx(tg,{disabledTools:(b=(_=e.disabledTools)!=null?_:t)!=null?b:[],onDisabledToolsChanged:j=>Ls({userContextData:a,updates:{disabledTools:j},localUserContext:e,setLocalUserContext:n})}),m&&s.jsx("div",{children:s.jsx(le,{children:s.jsx(ft,{label:o.formatMessage(We.connectorSearchToggleLabel),description:s.jsx(p,v({},We.connectorSearchDescription)),enabled:g!=null?g:!0,isLoading:u||h,onChange:j=>f({setting:ke.ConnectorSearchEnabled,value:j})})})}),s.jsx("span",{ref:c})]})})}function Eb(t){"use forget";var Yt,Gt,It,Kt,Qt,Dt,$t;const e=_e.c(159),{userContextData:n,conversationId:a,messageId:o,localUserContext:i,setLocalUserContext:l,onSubmit:d,selectedTraits:c,setSelectedTraits:r,hasModError:m}=t,g=ce(),u=Y();let f;e[0]!==g?(f=Ks(g,"2874358162").get("traits_enabled",!1),e[0]=g,e[1]=f):f=e[1];const h=f;let _;e[2]!==g?(_=()=>sg(g)(),e[2]=g,e[3]=_):_=e[3];const b=ot(_);let j;e[4]!==g?(j=()=>nl(g),e[4]=g,e[5]=j):j=e[5];const y=ot(j);let M;e[6]!==g||e[7]!==h?(M=()=>h?ng(g)():[],e[6]=g,e[7]=h,e[8]=M):M=e[8];const C=ot(M);let k;e[9]!==g?(k=()=>Yo(g),e[9]=g,e[10]=k):k=e[10];const E=ot(k);let w;e[11]!==a||e[12]!==g||e[13]!==o?(w=Ve=>{vd(g,Ve,a,o,{optimistic:!0})},e[11]=a,e[12]=g,e[13]=o,e[14]=w):w=e[14];const x=Rs(w);let T;e[15]!==a||e[16]!==g||e[17]!==o?(T=(Ve,ct)=>{const jt=new Map(Yo(g));jt.set(Ve,ct),jd(g,jt,a,o,{optimistic:!0})},e[15]=a,e[16]=g,e[17]=o,e[18]=T):T=e[18];const N=Rs(T),A=dn(kb),P=(Yt=i.enabled)!=null?Yt:!!(n!=null&&n.enabled);let U;e[19]!==n?(U=sl(n),e[19]=n,e[20]=U):U=e[20];const{personalityTypeMessage:I,nameUserMessage:q,roleUserMessage:Q,traitsModelMessage:D,otherUserMessage:F}=U,[G,X]=S.useState(0),[B,$]=S.useState(!0);let H,J;e[21]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{const Ve=setTimeout(()=>{$(!1)},1e3),ct=setInterval(()=>{X(Tb)},5500);return()=>{clearInterval(ct),clearTimeout(Ve)}},H=[],e[21]=H,e[22]=J):(H=e[21],J=e[22]),S.useEffect(J,H);const{data:W}=Ju();let de;e[23]!==g?(de=Ks(g,"2874358162",{disableExposureLog:!0}).get("hide-settings-toggle",!1),e[23]=g,e[24]=de):de=e[24];const V=de;let se;e[25]!==g?(se=()=>Sd(g),e[25]=g,e[26]=se):se=e[26];const ae=ot(se),Ne=V&&ae;let Me;e[27]!==u?(Me=u.formatMessage(We.customizeTitle),e[27]=u,e[28]=Me):Me=e[28];let Ae;e[29]!==V||e[30]!==E||e[31]!==x||e[32]!==N||e[33]!==b||e[34]!==y||e[35]!==h||e[36]!==C?(Ae=V&&s.jsx(lb,{personalitiesList:b,selectedPersonality:y,traitsEnabled:h,traitsList:C,currentTraits:E,onSelectPersonality:x,onSelectTrait:N}),e[29]=V,e[30]=E,e[31]=x,e[32]=N,e[33]=b,e[34]=y,e[35]=h,e[36]=C,e[37]=Ae):Ae=e[37];let ve;e[38]!==Ne||e[39]!==u||e[40]!==i||e[41]!==l||e[42]!==n||e[43]!==P?(ve=!Ne&&s.jsx(le,{children:s.jsx(ft,{label:s.jsx(p,v({},We.enablePersonalizationRowLabel)),description:s.jsx(p,v({},We.enablePersonalizationRowDescription)),enabled:P,onChange:Ve=>{Ls({userContextData:n,updates:{enabled:Ve},localUserContext:i,setLocalUserContext:l}),Ge.logEventWithStatsig("Enable Customization Toggled","chatgpt_enable_customization_toggled",{enabled:Ve})},"aria-label":P?u.formatMessage(We.disableToggleLabel):u.formatMessage(We.enableToggleLabel)})}),e[38]=Ne,e[39]=u,e[40]=i,e[41]=l,e[42]=n,e[43]=P,e[44]=ve):ve=e[44];let Le;e[45]!==V||e[46]!==u||e[47]!==i||e[48]!==I||e[49]!==W||e[50]!==l||e[51]!==n||e[52]!==P?(Le=!V&&s.jsx(le,{children:s.jsx(Zu,{label:u.formatMessage(We.settingsPersonalitySelectionRowTitle),description:u.formatMessage(We.settingsPersonalitySelectionRowDescription),selector:s.jsx(Qr,{enabled:P,selectedPersonality:(Gt=i.personalityTypeMessage)!=null?Gt:I,personalitiesList:W,onSelect:Ve=>Ls({userContextData:n,updates:{personalityTypeMessage:Ve},localUserContext:i,setLocalUserContext:l})})})}),e[45]=V,e[46]=u,e[47]=i,e[48]=I,e[49]=W,e[50]=l,e[51]=n,e[52]=P,e[53]=Le):Le=e[53];let je;e[54]!==u?(je=u.formatMessage(We.customInstructions),e[54]=u,e[55]=je):je=e[55];const Ke=!P,Je=m==="traits_model_message",et=(It=i.traitsModelMessage)!=null?It:D;let tt;e[56]!==u?(tt=u.formatMessage(We.customInstructionsPlaceholder),e[56]=u,e[57]=tt):tt=e[57];let z;e[58]!==i||e[59]!==l||e[60]!==n?(z=Ve=>Ls({userContextData:n,updates:{traitsModelMessage:Ve.target.value},localUserContext:i,setLocalUserContext:l}),e[58]=i,e[59]=l,e[60]=n,e[61]=z):z=e[61];let ue;e[62]!==d||e[63]!==Ke||e[64]!==Je||e[65]!==et||e[66]!==tt||e[67]!==z?(ue=s.jsx(Yn,{onSubmit:d,name:"traits_model_message",disabled:Ke,hasModError:Je,value:et,placeholder:tt,onChange:z,size:"sm",showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0,dynamicHeight:!0}),e[62]=d,e[63]=Ke,e[64]=Je,e[65]=et,e[66]=tt,e[67]=z,e[68]=ue):ue=e[68];let Ie;e[69]!==V||e[70]!==i||e[71]!==c||e[72]!==l||e[73]!==r||e[74]!==D||e[75]!==n||e[76]!==P?(Ie=!V&&s.jsx(yb,{onSelect:Ve=>{var ct;Ls({userContextData:n,updates:{traitsModelMessage:"".concat((ct=i.traitsModelMessage)!=null?ct:D," ").concat(Ve).trim()},localUserContext:i,setLocalUserContext:l})},selectedTraits:c,setSelectedTraits:r,disablePills:!P}),e[69]=V,e[70]=i,e[71]=c,e[72]=l,e[73]=r,e[74]=D,e[75]=n,e[76]=P,e[77]=Ie):Ie=e[77];let me;e[78]!==je||e[79]!==ue||e[80]!==Ie?(me=s.jsxs(Qn,{title:je,className:"pt-7",children:[ue,Ie]}),e[78]=je,e[79]=ue,e[80]=Ie,e[81]=me):me=e[81];let he;e[82]!==Me||e[83]!==Ae||e[84]!==ve||e[85]!==Le||e[86]!==me?(he=s.jsxs(Ze,{title:Me,children:[Ae,ve,Le,me]}),e[82]=Me,e[83]=Ae,e[84]=ve,e[85]=Le,e[86]=me,e[87]=he):he=e[87];let xe;e[88]!==u?(xe=u.formatMessage(We.aboutYouSectionTitle),e[88]=u,e[89]=xe):xe=e[89];let we;e[90]!==u?(we=u.formatMessage(We.customizeNamePlaceholder),e[90]=u,e[91]=we):we=e[91];const $e=!P,ye=m==="name_user_message",Fe=(Kt=i.nameUserMessage)!=null?Kt:q;let Z;e[92]!==u?(Z=u.formatMessage(We.customizeName),e[92]=u,e[93]=Z):Z=e[93];let Ce;e[94]!==i||e[95]!==l||e[96]!==n?(Ce=Ve=>Ls({userContextData:n,updates:{nameUserMessage:Ve.target.value},localUserContext:i,setLocalUserContext:l}),e[94]=i,e[95]=l,e[96]=n,e[97]=Ce):Ce=e[97];let oe;e[98]!==A||e[99]!==d||e[100]!==$e||e[101]!==ye||e[102]!==Fe||e[103]!==Z||e[104]!==Ce?(oe=s.jsx(Yn,{onSubmit:d,disabled:$e,name:"name_user_message",hasModError:ye,value:Fe,placeholder:Z,onChange:Ce,size:"sm",showCharacterCount:!1,autoHighlight:A}),e[98]=A,e[99]=d,e[100]=$e,e[101]=ye,e[102]=Fe,e[103]=Z,e[104]=Ce,e[105]=oe):oe=e[105];let ne;e[106]!==we||e[107]!==oe?(ne=s.jsx(Qn,{title:we,className:"pt-5",children:oe}),e[106]=we,e[107]=oe,e[108]=ne):ne=e[108];let be;e[109]!==u?(be=u.formatMessage(We.occupationInputTitle),e[109]=u,e[110]=be):be=e[110];let fe;e[111]!==B||e[112]!==u||e[113]!==i.roleUserMessage||e[114]!==G||e[115]!==Q?(fe=!((Qt=i.roleUserMessage)!=null?Qt:Q)&&s.jsx(Ka,{mode:"wait",children:s.jsx(tr.span,{variants:Xu,initial:B?!1:"initial",animate:"animate",exit:"exit",className:"pointer-events-none absolute start-[0.81rem] top-[0.55rem] text-sm text-gray-400",children:u.formatMessage(eg[za[G]])},za[G])}),e[111]=B,e[112]=u,e[113]=i.roleUserMessage,e[114]=G,e[115]=Q,e[116]=fe):fe=e[116];const Ue=!P,Pe=m==="role_user_message",Se=(Dt=i.roleUserMessage)!=null?Dt:Q;let De;e[117]!==i||e[118]!==l||e[119]!==n?(De=Ve=>Ls({userContextData:n,updates:{roleUserMessage:Ve.target.value},localUserContext:i,setLocalUserContext:l}),e[117]=i,e[118]=l,e[119]=n,e[120]=De):De=e[120];let qe;e[121]!==d||e[122]!==Ue||e[123]!==Pe||e[124]!==Se||e[125]!==De?(qe=s.jsx(Yn,{onSubmit:d,name:"role_user_message",disabled:Ue,hasModError:Pe,value:Se,placeholder:"",onChange:De,size:"sm",showCharacterCount:!1}),e[121]=d,e[122]=Ue,e[123]=Pe,e[124]=Se,e[125]=De,e[126]=qe):qe=e[126];let Ye;e[127]!==fe||e[128]!==qe?(Ye=s.jsxs("div",{className:"relative overflow-clip",children:[fe,qe]}),e[127]=fe,e[128]=qe,e[129]=Ye):Ye=e[129];let ee;e[130]!==be||e[131]!==Ye?(ee=s.jsx(Qn,{title:be,className:"pt-7",children:Ye}),e[130]=be,e[131]=Ye,e[132]=ee):ee=e[132];let Qe;e[133]!==u?(Qe=u.formatMessage(We.moreDetailsInputTitle),e[133]=u,e[134]=Qe):Qe=e[134];const it=!P,ht=m==="other_user_message",yt=($t=i.otherUserMessage)!=null?$t:F;let bt;e[135]!==u?(bt=u.formatMessage(We.customizeOtherPlaceholder),e[135]=u,e[136]=bt):bt=e[136];let Ct;e[137]!==i||e[138]!==l||e[139]!==n?(Ct=Ve=>Ls({userContextData:n,updates:{otherUserMessage:Ve.target.value},localUserContext:i,setLocalUserContext:l}),e[137]=i,e[138]=l,e[139]=n,e[140]=Ct):Ct=e[140];let _t;e[141]!==d||e[142]!==it||e[143]!==ht||e[144]!==yt||e[145]!==bt||e[146]!==Ct?(_t=s.jsx(Yn,{onSubmit:d,disabled:it,name:"other_user_message",hasModError:ht,value:yt,placeholder:bt,onChange:Ct,size:"sm",showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0,dynamicHeight:!0}),e[141]=d,e[142]=it,e[143]=ht,e[144]=yt,e[145]=bt,e[146]=Ct,e[147]=_t):_t=e[147];let vt;e[148]!==Qe||e[149]!==_t?(vt=s.jsx(Qn,{title:Qe,className:"pt-7",children:_t}),e[148]=Qe,e[149]=_t,e[150]=vt):vt=e[150];let At;e[151]!==xe||e[152]!==ne||e[153]!==ee||e[154]!==vt?(At=s.jsxs(Ze,{title:xe,children:[ne,ee,vt]}),e[151]=xe,e[152]=ne,e[153]=ee,e[154]=vt,e[155]=At):At=e[155];let Rt;return e[156]!==he||e[157]!==At?(Rt=s.jsxs(s.Fragment,{children:[he,At]}),e[156]=he,e[157]=At,e[158]=Rt):Rt=e[158],Rt}function Tb(t){return(t+1)%za.length}function kb(t){return t.autoHighlightNicknameInput}function Nb(){"use no forget";var Pe,Se,De,qe,Ye;const t=ce(),[e,n]=S.useState(!1),a=S.useCallback(()=>{if(typeof window<"u"){const ee=document.getElementById("memory-modal");ee&&ee.scrollIntoView({block:"start"})}n(!0)},[]),o=Y(),i=Pt(),l=Uu(),d=Gu(),{isLoading:c,data:r}=ot(()=>eo(t)),m=Bt(),g=mo(),{data:u}=Vu(void 0,!1,l),f=Jr(),h=Zr(),_=zu(t),b=Hu(),j=Wu(),y=Xr(),M=el(t),{isLoading:C}=Ft(ke.Sunshine),{isLoading:k}=Ft(ke.Moonshine),{mutate:E,isPending:w}=Bt(!0),{mutate:x,isPending:T}=Bt(!0),N=Bt(!0),A=hn(t),P=A==null?void 0:A.hasPlusFeatures(),U=Oe(t,"1900515849"),I=Ku(t),q=$u(t,(Pe=u==null?void 0:u.memoryFullPct)!=null?Pe:0)!=="control",Q=S.useCallback(()=>{var ee;Ge.logEventWithStatsig("Memories Upgrade Link Clicked","chatgpt_memories_upgrade_link_clicked_settings",{memory_full_pct:(ee=u==null?void 0:u.memoryFullPct)!=null?ee:0}),ba(i,"memory_settings_upgrade_link")},[u==null?void 0:u.memoryFullPct,i]),F=Ks(t,"1704793646").get("full_name_llm",!1),G=us(),X=gt(),B=Oe(t,"1804926979")&&Oe(t,"3365913332"),$=Ks(t,"2874358162",{disableExposureLog:!0}).get("personality_rebase_enabled",!1),H=Ks(t,"2874358162",{disableExposureLog:!0}).get("custom_instructions_rebase_enabled",!1),[J,W]=S.useState(null),[de,V]=S.useState([]),[se,ae]=S.useState(v({},tl));S.useEffect(()=>{var ee,Qe;if(!(typeof window>"u"))try{((ee=window.sessionStorage)==null?void 0:ee.getItem(li))==="true"&&((Qe=window.sessionStorage)==null||Qe.removeItem(li),a())}catch(it){}},[a]),S.useEffect(()=>{const ee=()=>{a()};return window.addEventListener("personalization:show-memories-modal",ee),()=>window.removeEventListener("personalization:show-memories-modal",ee)},[a]);const Ne=Ks(t,"2874358162",{disableExposureLog:!0}).get("hide-settings-toggle",!1),{isPending:Me,mutate:Ae}=bb({skipPersonalityUpdates:Ne,onSuccess:ee=>{kn.setCookie(Nn.GreetingName,Md(ee,G,F)),window.dispatchEvent(new Event("refreshGreeting")),(!$||!H)&&X.success(o.formatMessage({id:"diZzkj",defaultMessage:"Personalization settings updated for future conversations"}))},onError:ee=>{var Qe,it,ht;return((Qe=ee.response)==null?void 0:Qe.reason)==="content_policy"&&((it=ee.response)!=null&&it.field)?W((ht=ee.response)==null?void 0:ht.field):X.danger(o.formatMessage({id:"userContextModal.saveError",defaultMessage:"Failed to update settings"}),{loggingTitle:"Failed to update settings",toastId:"user_context_modal"}),ee}}),{personalityTypeMessage:ve,nameUserMessage:Le,roleUserMessage:je,traitsModelMessage:Ke,otherUserMessage:Je,disabledTools:et,enabled:tt}=sl(r),{aboutUserMessage:z,aboutModelMessage:ue,nameUserMessage:Ie,roleUserMessage:me,traitsModelMessage:he,otherUserMessage:xe,disabledTools:we,enabled:$e,personalityTypeMessage:ye}=se,Fe=S.useMemo(()=>[Ie,me,he,xe].some(ee=>qu(ee!=null?ee:"")),[Ie,me,he,xe]),Z=S.useMemo(()=>{const ee=[{local:Ie,server:Le},{local:me,server:je},{local:he,server:Ke},{local:xe,server:Je}];return Ne||ee.push({local:ye,server:ve}),ee.some(({local:Qe,server:it})=>Qe!==void 0&&Qe!==it)||we!==void 0&&!yd(we,et)||$e!==void 0&&$e!==tt},[Le,je,Ke,Je,ve,Ie,me,he,xe,ye,we,et,$e,tt,Ne]),{conversationId:Ce=null}=Kl(),oe=Ce,ne=bd(oe,ee=>Ed.getLastAssistantMessage(ee)),be=ot(()=>oe?er(t,oe).serverId$():void 0),fe=Rs(()=>{if(!Me){W(null);const ee={aboutUserMessage:z!=null?z:"",aboutModelMessage:ue!=null?ue:"",nameUserMessage:Ie!=null?Ie:"",roleUserMessage:me!=null?me:"",traitsModelMessage:he!=null?he:"",otherUserMessage:xe!=null?xe:"",disabledTools:we!=null?we:[],enabled:!!$e,personalityTypeMessage:ye!=null?ye:""},Qe={name:Le,role:je,traits:Ke,other:Je,traitPillsSelected:de},it={name:ee.nameUserMessage,role:ee.roleUserMessage,traits:ee.traitsModelMessage,other:ee.otherUserMessage,personality:ee.personalityTypeMessage,traitPillsSelected:de},ht=rs(t),yt=nl(t);(yt==null?void 0:yt.key)!==it.personality&&$&&ht.success(o.formatMessage({id:"+CiZn7",defaultMessage:"Base style and tone updated"}),{duration:4,hasCloseButton:!0}),Ge.logEvent("User Context Save Customize ChatGPT",{previousState:Qe,newState:it}),pn.logEvent("chatgpt_user_context_save_custom_instructions",void 0,{previousState:JSON.stringify(Qe),newState:JSON.stringify(it)}),Ae({userContext:ee,conversationId:be!=null?be:null,messageId:ne==null?void 0:ne.id})}}),Ue=Rs(()=>{if(Fe){X.danger(o.formatMessage(We.messageLimitError,{limit:Yu}),{duration:4,hasCloseButton:!0,loggingTitle:"Message limit error",toastId:"user_context_modal",loggingDescription:We.messageLimitError.defaultMessage});return}fe()});return S.useEffect(()=>{Ge.logEventWithStatsig("User Context Custom Instructions Modal Opened","chatgpt_user_context_custom_instructions_modal_opened",{location:"personalization_settings"})},[]),c?s.jsx("div",{className:"flex justify-center p-6",children:s.jsx(Ut,{})}):s.jsxs(s.Fragment,{children:[s.jsx(Eb,{conversationId:be!=null?be:null,messageId:(Se=ne==null?void 0:ne.id)!=null?Se:null,userContextData:r,localUserContext:se,setLocalUserContext:ae,onSubmit:Ue,selectedTraits:de,setSelectedTraits:V,hasModError:J}),d&&s.jsxs(s.Fragment,{children:[s.jsx("div",{id:"memory-modal"}),s.jsxs(Ze,{noBorder:!0,title:I?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:o.formatMessage(We.memoryTitle)}),s.jsx(Zg,{memoryFullPct:u==null?void 0:u.memoryFullPct})]}):o.formatMessage(We.memoryTitle),description:q&&(((De=u==null?void 0:u.memoryFullPct)!=null?De:0)<Fi?s.jsx(p,{id:"GiIDzv",defaultMessage:"Responses may feel less personalized soon. For more memory, <upgradeLink>upgrade to Plus.</upgradeLink>",values:{upgradeLink:ee=>s.jsx("button",{type:"button",className:"text-token-interactive-label-accent-default hover:text-token-interactive-label-accent-hover hover:underline",onClick:Qe=>{Qe.preventDefault(),Q()},children:ee})}}):s.jsx(p,{id:"Z4GyWA",defaultMessage:"New memories cant be saved, so responses may feel less personalized. For more memory, <upgradeLink>upgrade to Plus.</upgradeLink>",values:{upgradeLink:ee=>s.jsx("button",{type:"button",className:"text-token-interactive-label-accent-default hover:text-token-interactive-label-accent-hover hover:underline",onClick:Qe=>{Qe.preventDefault(),Q()},children:ee})}})),learnMoreHref:"https://help.openai.com/en/articles/8590148-memory-faq",headerTrailingContent:s.jsx("div",{className:"flex flex-row gap-2",children:s.jsx(te,{color:"secondary",onClick:()=>{Ge.logEventWithStatsig("Manage Memories Button Clicked","chatgpt_manage_memories_button_clicked_settings"),n(!0)},size:"small",children:s.jsx(p,v({},We.manageButton))})}),children:[I&&s.jsx("div",{className:"border-token-border-light flex border-b"}),!I&&((qe=u==null?void 0:u.memoryFullPct)!=null?qe:0)>=_b&&s.jsxs("div",{className:"border-token-border-light flex flex-col gap-[2px] border-b pb-2",children:[s.jsx(Yg,{memoryFullPct:u==null?void 0:u.memoryFullPct,showInfoLabel:!1,onManageMemories:()=>{n(!0)}}),s.jsx("div",{className:"text-token-text-tertiary my-1.5 text-xs",children:((Ye=u==null?void 0:u.memoryFullPct)!=null?Ye:0)<Fi?P?s.jsx(p,{id:"SrHwDd",defaultMessage:"Once memory is full, responses may feel less personalized. Manage existing memories to free up space."}):s.jsx(p,{id:"eczLio",defaultMessage:"Once memory is full, responses may feel less personalized. Upgrade to expand memory, or manage existing memories."}):P?s.jsx(p,{id:"ho9xyz",defaultMessage:"New memories can't be saved, so responses may feel less personalized. Manage existing memories to free up space."}):s.jsx(p,{id:"s+OVoX",defaultMessage:"New memories can't be saved, so responses may feel less personalized. Upgrade to expand memory, or manage existing memories."})})]}),s.jsxs(le,{children:[s.jsx(ft,{label:o.formatMessage(We.toggleLabel),enabled:l,disabled:(g==null?void 0:g[ke.Sunshine])===!0,isLoading:C||w,onChange:ee=>{E({setting:ke.Sunshine,value:ee},{onSuccess:()=>{Ge.logEventWithStatsig("Personalization Settings Saved Memories ".concat(ee?"Enabled":"Disabled"),"chatgpt_personalization_settings_saved_memories_".concat(ee?"enabled":"disabled")),!ee&&l?(_&&P&&N.mutate({setting:ke.GoldenHour,value:!1}),b&&j&&x({setting:ke.Moonshine,value:!1}),h&&f&&m.mutate({setting:ke.MemoryInSearch,value:!1})):ee&&(b&&x({setting:ke.Moonshine,value:!0}),_&&P&&N.mutate({setting:ke.GoldenHour,value:!0}))}})}}),s.jsx(un,{children:s.jsx(p,v({},We.exampleDescription))})]}),l&&b&&s.jsx(le,{children:s.jsx(ft,{label:o.formatMessage({id:"2qTSAN",defaultMessage:"Reference chat history"}),enabled:j,isLoading:k||T,onChange:ee=>{Ge.logEventWithStatsig("Personalization Settings Reference Recent Conversations ".concat(ee?"Enabled":"Disabled"),"chatgpt_personalization_settings_reference_recent_conversations_".concat(ee?"enabled":"disabled")),x({setting:ke.Moonshine,value:ee})},disabled:!b||(g==null?void 0:g[ke.Moonshine])===!0,description:P?s.jsx(p,{id:"poYymi",defaultMessage:"Let ChatGPT reference all previous conversations when responding."}):s.jsx(p,{id:"kZ8Ljp",defaultMessage:"Let ChatGPT reference recent conversations when responding."})})}),y&&!M&&s.jsx(le,{children:s.jsx("div",{className:"text-token-text-tertiary pe-12 text-xs",children:s.jsx(p,{id:"iCZODP",defaultMessage:"ChatGPT may use Memory to personalize queries to search providers, such as Bing. {learnMoreLink}",values:{learnMoreLink:s.jsx(pa,{href:"https://help.openai.com/en/articles/9237897-chatgpt-search",className:"underline",children:s.jsx(p,{id:"0M5wS5",defaultMessage:"Learn more"})})}})})}),e&&I?s.jsx(Qg,{isOpen:e,memoryEntriesFilter:"all",onClose:()=>n(!1)}):e&&U?s.jsx(Jg,{memoryEntriesFilter:"all",onClose:()=>n(!1)}):e&&s.jsx(em,{memoryEntriesFilter:"all",onClose:()=>n(!1)})]})]}),Qu(t)&&s.jsx(vb,{}),B&&s.jsx(jb,{}),s.jsx(Sb,{disabledTools:et,userContextData:r,localUserContext:se,setLocalUserContext:ae}),Z&&s.jsx(wb,{setLocalUserContext:ae,isMutationLoading:Me,onSubmit:Ue,isAnyMessagePastLimit:Fe,hasUnsavedChanges:Z})]})}function wb({setLocalUserContext:t,isMutationLoading:e,onSubmit:n,isAnyMessagePastLimit:a,hasUnsavedChanges:o}){return s.jsx("div",{className:"bg-token-main-surface-primary sticky bottom-0 flex min-h-21 items-center justify-end border-t px-4",children:s.jsxs("footer",{className:"flex gap-2",children:[s.jsx(es.Button,{onClick:()=>t(tl),children:s.jsx(p,v({},We.cancel))}),s.jsx(es.Button,{loading:e,onClick:n,color:"primary",visuallyDisabled:a,disabled:!o,children:s.jsx(p,v({},We.save))})]})})}const Pb=R(()=>L(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([46,1])),{loading:t=>K(t)}),Ab=R(()=>L(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([8,1])),{loading:t=>K(t)}),Ib=R(()=>L(()=>import("./n70q0rscelh7atg0.js"),__vite__mapDeps([126,1])),{loading:t=>K(t)}),Db=0,Ob=150,Lb="1837-01-01",Xt=Be({placeholder:{id:"settingsModal.birthdayPlaceholder",defaultMessage:"DD / MM / YYYY"},add:{id:"settingsModal.birthday.add",defaultMessage:"Add"},edit:{id:"settingsModal.birthday.edit",defaultMessage:"Edit"},addAria:{id:"settingsModal.birthday.addAria",defaultMessage:"Add your date of birth"},editAria:{id:"settingsModal.birthday.editAria",defaultMessage:"Edit your date of birth"},cancel:{id:"settingsModal.birthday.cancel",defaultMessage:"Cancel"},confirm:{id:"settingsModal.birthday.confirm",defaultMessage:"Confirm"},verifyAgeTitle:{id:"settingsModal.birthday.verifyAgeTitle",defaultMessage:"Verify your age"},verifyAgeDescription:{id:"settingsModal.birthday.verifyAgeDescription",defaultMessage:"To make changes, we need to verify your age."},verifyAgeButton:{id:"settingsModal.birthday.verifyAgeButton",defaultMessage:"Verify age"},ageVerifiedTooltip:{id:"settingsModal.birthday.ageVerifiedTooltip",defaultMessage:"Age verified"},under18Description:{id:"settingsModal.birthday.under18Description",defaultMessage:"Your activity suggests you may be under 18, so we've turned on extra safeguards. If you're 18 or older, you can verify your age."},errorInvalid:{id:"settingsModal.birthday.error.invalid",defaultMessage:"Invalid birthdate"},birthdayUpdated:{id:"settingsModal.birthday.updated",defaultMessage:"You updated your date of birth"},ageVerificationPendingTooltip:{id:"settingsModal.birthday.ageVerificationPendingTooltip",defaultMessage:"Your age is verified and will update soon."}});function Rb(t){"use forget";const e=_e.c(118),{birthday:n,onSave:a,userIsAdultData:o}=t,i=n===Lb?null:n,l=Y(),d=ce();let c;e[0]!==d?(c=rs(d),e[0]=d,e[1]=c):c=e[1];const r=c,m=S.useRef(null),[g,u]=S.useState(!1);let f;e[2]!==i?(f=()=>na(i),e[2]=i,e[3]=f):f=e[3];const[h,_]=S.useState(f),[b,j]=S.useState(!1),[y,M]=S.useState(!1),[C,k]=S.useState(!1),[E,w]=S.useState(i),[x,T]=S.useState(!1),[N,A]=S.useState(!1),P=S.useId(),U=S.useId(),I=S.useId(),q=Rs(a);let Q;e[4]!==h?(Q=Fb(h),e[4]=h,e[5]=Q):Q=e[5];const D=Q,{mutate:F}=Td(),G=D.type==="valid",X=b&&D.type==="error"?D.error:null,B=b&&D.type==="valid"?D.age:null;let $;e[6]!==i||e[7]!==l?($=i?na(i):l.formatMessage(Xt.add),e[6]=i,e[7]=l,e[8]=$):$=e[8];const H=$;let J;e[9]!==l?(J=l.formatMessage(Xt.placeholder),e[9]=l,e[10]=J):J=e[10];const W=J,de=!!(o!=null&&o.has_verified_age_or_dob),V=!de&&(o==null?void 0:o.is_adult)===!1;let se,ae;e[11]!==F||e[12]!==d||e[13]!==y?(se=()=>{if(!y)return;const oe=ne=>{M(!1),T(!1),ne==="completed"&&(F(),A(!0))};return tm(d,{onCancel:()=>{oe("canceled")},onComplete:()=>{oe("completed")},onLoad:()=>{T(!0)}})},ae=[y,d,F],e[11]=F,e[12]=d,e[13]=y,e[14]=se,e[15]=ae):(se=e[14],ae=e[15]),S.useEffect(se,ae);let Ne,Me;e[16]!==g?(Ne=()=>{if(!g)return;const oe=requestAnimationFrame(()=>{var ne;(ne=m.current)==null||ne.focus()});return()=>cancelAnimationFrame(oe)},Me=[g],e[16]=g,e[17]=Ne,e[18]=Me):(Ne=e[17],Me=e[18]),S.useEffect(Ne,Me),E!==i&&i&&C&&(w(i),k(!1));let Ae;e[19]===Symbol.for("react.memo_cache_sentinel")?(Ae=function(){u(!1)},e[19]=Ae):Ae=e[19];const ve=Ae;let Le;e[20]!==i?(Le=function(){ve(),_(na(i)),j(!1)},e[20]=i,e[21]=Le):Le=e[21];const je=Le;let Ke;e[22]!==l||e[23]!==q||e[24]!==r||e[25]!==D.isoValue||e[26]!==D.type?(Ke=function(ne){ne.preventDefault(),k(!0),j(!0),D.type==="valid"&&(ve(),q(D.isoValue).then(()=>{r.success(l.formatMessage(Xt.birthdayUpdated))}))},e[22]=l,e[23]=q,e[24]=r,e[25]=D.isoValue,e[26]=D.type,e[27]=Ke):Ke=e[27];const Je=Ke;let et;e[28]===Symbol.for("react.memo_cache_sentinel")?(et=function(){M(!0)},e[28]=et):et=e[28];const tt=et;if(N){let oe;e[29]!==l?(oe=l.formatMessage(Xt.ageVerificationPendingTooltip),e[29]=l,e[30]=oe):oe=e[30];const ne=oe;let be;e[31]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(p,{id:"settingsModal.birthday",defaultMessage:"Date of birth"}),e[31]=be):be=e[31];let fe;e[32]!==P?(fe=s.jsx("div",{id:P,className:"text-sm font-medium",children:be}),e[32]=P,e[33]=fe):fe=e[33];let Ue;e[34]===Symbol.for("react.memo_cache_sentinel")?(Ue=s.jsx("span",{children:s.jsx(p,{id:"settingsModal.birthday.ageVerificationPendingLabel",defaultMessage:"Pending"})}),e[34]=Ue):Ue=e[34];let Pe;e[35]!==ne?(Pe=s.jsx("span",{className:"sr-only",children:ne}),e[35]=ne,e[36]=Pe):Pe=e[36];let Se;e[37]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(Ab,{"aria-hidden":!0,className:"icon-md text-token-text-tertiary"}),e[37]=Se):Se=e[37];let De;e[38]!==ne?(De=s.jsx(Wt,{label:ne,children:Se}),e[38]=ne,e[39]=De):De=e[39];let qe;e[40]!==Pe||e[41]!==De?(qe=s.jsxs("div",{className:"text-token-text-primary flex items-center gap-2 text-sm font-medium",children:[Ue,s.jsxs("div",{className:"flex items-center gap-1",children:[Pe,De]})]}),e[40]=Pe,e[41]=De,e[42]=qe):qe=e[42];let Ye;return e[43]!==fe||e[44]!==qe?(Ye=s.jsx("div",{className:"flex flex-col gap-1",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[fe,qe]})}),e[43]=fe,e[44]=qe,e[45]=Ye):Ye=e[45],Ye}if(de){let oe;e[46]!==l?(oe=l.formatMessage(Xt.ageVerifiedTooltip),e[46]=l,e[47]=oe):oe=e[47];const ne=oe;let be;e[48]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(p,{id:"settingsModal.birthday",defaultMessage:"Date of birth"}),e[48]=be):be=e[48];let fe;e[49]!==P?(fe=s.jsx("div",{id:P,className:"text-sm font-medium",children:be}),e[49]=P,e[50]=fe):fe=e[50];let Ue;e[51]!==H?(Ue=s.jsx("span",{children:H}),e[51]=H,e[52]=Ue):Ue=e[52];let Pe;e[53]!==ne?(Pe=s.jsx("span",{className:"sr-only",children:ne}),e[53]=ne,e[54]=Pe):Pe=e[54];let Se;e[55]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(Ib,{"aria-hidden":!0,className:"icon-md text-token-text-tertiary"}),e[55]=Se):Se=e[55];let De;e[56]!==ne?(De=s.jsx(Wt,{label:ne,children:Se}),e[56]=ne,e[57]=De):De=e[57];let qe;e[58]!==Pe||e[59]!==De?(qe=s.jsxs("div",{className:"flex items-center gap-1",children:[Pe,De]}),e[58]=Pe,e[59]=De,e[60]=qe):qe=e[60];let Ye;e[61]!==Ue||e[62]!==qe?(Ye=s.jsxs("div",{className:"text-token-text-primary flex items-center gap-2 text-sm font-medium",children:[Ue,qe]}),e[61]=Ue,e[62]=qe,e[63]=Ye):Ye=e[63];let ee;return e[64]!==fe||e[65]!==Ye?(ee=s.jsx("div",{className:"flex flex-col gap-1",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[fe,Ye]})}),e[64]=fe,e[65]=Ye,e[66]=ee):ee=e[66],ee}if(V){let oe;e[67]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(p,{id:"settingsModal.birthday",defaultMessage:"Date of birth"}),e[67]=oe):oe=e[67];let ne;e[68]!==P?(ne=s.jsx("div",{id:P,className:"text-sm font-medium",children:oe}),e[68]=P,e[69]=ne):ne=e[69];let be;e[70]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(un,{children:s.jsx(p,v({},Xt.under18Description))}),e[70]=be):be=e[70];let fe;e[71]!==ne?(fe=s.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[ne,be]}),e[71]=ne,e[72]=fe):fe=e[72];const Ue=y&&!x;let Pe;e[73]===Symbol.for("react.memo_cache_sentinel")?(Pe=s.jsx(p,v({},Xt.verifyAgeButton)),e[73]=Pe):Pe=e[73];let Se;e[74]!==Ue?(Se=s.jsx(te,{type:"button",size:"medium",color:"primary",onClick:tt,loading:Ue,children:Pe}),e[74]=Ue,e[75]=Se):Se=e[75];let De;return e[76]!==fe||e[77]!==Se?(De=s.jsx("div",{className:"flex flex-col gap-1",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[fe,Se]})}),e[76]=fe,e[77]=Se,e[78]=De):De=e[78],De}let z;e[79]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(p,{id:"settingsModal.birthday",defaultMessage:"Date of birth"}),e[79]=z):z=e[79];let ue;e[80]!==P?(ue=s.jsx("div",{id:P,className:"text-sm font-medium",children:z}),e[80]=P,e[81]=ue):ue=e[81];let Ie;e[82]!==i?(Ie=oe=>{u(oe),j(!1),_(na(i))},e[82]=i,e[83]=Ie):Ie=e[83];const me=i&&"gap-1.5 text-token-text-primary";let he;e[84]!==me?(he=Ms(me),e[84]=me,e[85]=he):he=e[85];let xe;e[86]!==i?(xe=i&&s.jsx(Pb,{"aria-hidden":!0,className:"icon-sm text-token-text-secondary"}),e[86]=i,e[87]=xe):xe=e[87];let we;e[88]!==C||e[89]!==he||e[90]!==xe||e[91]!==H?(we=s.jsx(Re.BasicTrigger,{children:s.jsxs(te,{color:"ghost",size:"medium",loading:C,contentWrapperClassName:he,children:[H,xe]})}),e[88]=C,e[89]=he,e[90]=xe,e[91]=H,e[92]=we):we=e[92];let $e;e[93]!==X||e[94]!==B||e[95]!==i||e[96]!==G||e[97]!==I||e[98]!==P||e[99]!==je||e[100]!==Je||e[101]!==x||e[102]!==U||e[103]!==h||e[104]!==y||e[105]!==W?($e=s.jsx(Re.Portal,{children:s.jsx(Re.Content,{align:"end",size:"small",className:"border-token-border bg-token-bg-primary w-[min(360px,calc(100vw-2rem))] rounded-3xl border p-4 shadow-xl",children:i?s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("p",{className:"text-base font-medium",children:s.jsx(p,v({},Xt.verifyAgeTitle))}),s.jsx("p",{className:"text-token-text-secondary text-sm",children:s.jsx(p,v({},Xt.verifyAgeDescription))})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(te,{type:"button",size:"small",color:"primary",onClick:()=>tt(),loading:y&&!x,children:s.jsx(p,v({},Xt.verifyAgeButton))})})]}):s.jsxs("form",{className:"flex flex-col gap-4",onSubmit:Je,children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{htmlFor:U,className:"text-token-text-primary text-sm font-medium",children:s.jsx(p,{id:"settingsModal.birthday",defaultMessage:"Date of birth"})}),s.jsx("input",{id:U,ref:m,type:"text",inputMode:"numeric",pattern:"[0-9/ ]*",maxLength:14,name:"birthday",autoComplete:"bday","aria-labelledby":P,"aria-describedby":X?I:void 0,"aria-invalid":!!X,className:Ms("bg-token-bg-tertiary/20 text-token-text-primary h-12 rounded-2xl border px-4 text-base outline-none focus:ring-2",X?"border-token-border-error focus:ring-token-border-error":"border-token-border hover:border-token-border-strong focus:ring-token-border-strong"),placeholder:W,value:h,onChange:oe=>{j(!0),_(Bb(oe.target.value))}}),B&&s.jsx("p",{className:"text-token-text-tertiary text-xs",children:s.jsx(p,{id:"settingsModal.birthday.age",defaultMessage:"You are {age} years old",values:{age:B}})}),X&&s.jsx("p",{id:I,role:"alert",className:"text-interactive-label-warning-secondary text-token-text-status-error text-xs",children:s.jsx(p,v({},Xt.errorInvalid))})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(te,{type:"button",color:"ghost",size:"small",onClick:je,children:s.jsx(p,v({},Xt.cancel))}),s.jsx(te,{type:"submit",size:"small",color:"primary",disabled:!G,children:s.jsx(p,v({},Xt.confirm))})]})]})})}),e[93]=X,e[94]=B,e[95]=i,e[96]=G,e[97]=I,e[98]=P,e[99]=je,e[100]=Je,e[101]=x,e[102]=U,e[103]=h,e[104]=y,e[105]=W,e[106]=$e):$e=e[106];let ye;e[107]!==g||e[108]!==Ie||e[109]!==we||e[110]!==$e?(ye=s.jsxs(Re.Root,{open:g,onOpenChange:Ie,children:[we,$e]}),e[107]=g,e[108]=Ie,e[109]=we,e[110]=$e,e[111]=ye):ye=e[111];let Fe;e[112]!==ue||e[113]!==ye?(Fe=s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[ue,ye]}),e[112]=ue,e[113]=ye,e[114]=Fe):Fe=e[114];let Z;e[115]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(un,{children:s.jsx(p,{id:"settingsModal.verify-age.description",defaultMessage:"This helps us personalize your experience and provide the right settings, in line with our {privacy_policy_link}.",values:{privacy_policy_link:s.jsx("a",{href:"https://openai.com/policies/privacy-policy/",className:"underline",target:"_blank",rel:"noopener noreferrer",children:s.jsx(p,{id:"settingsModal.verify-age.privacy-policy-link",defaultMessage:"Privacy Policy"})})}})}),e[115]=Z):Z=e[115];let Ce;return e[116]!==Fe?(Ce=s.jsxs("div",{className:"flex flex-col gap-1",children:[Fe,Z]}),e[116]=Fe,e[117]=Ce):Ce=e[117],Ce}function na(t){if(!t)return"";const[e,n,a]=t.split("-");return!e||!n||!a?"":[n.padStart(2,"0"),a.padStart(2,"0"),e].join(" / ")}function Bb(t){const e=t.replace(/\D/g,"").slice(0,8);if(e.length===0)return"";let n=e.slice(0,2),a=e.slice(2,4),o=e.slice(4,8);return(/^\s*\d{4}[^\d]?/.test(t)||e.length===8&&Number.parseInt(e.slice(0,4),10)>1900&&Number.parseInt(e.slice(4,6),10)<=12&&Number.parseInt(e.slice(6,8),10)<=31)&&e.length===8&&(o=e.slice(0,4),n=e.slice(4,6),a=e.slice(6,8)),[n,a,o].filter(Boolean).join(" / ")}function Fb(t){const e=t.replace(/\D/g,"");if(e.length===0)return{type:"empty"};if(e.length<8)return{type:"incomplete"};const n=e.slice(0,2),a=e.slice(2,4),o=e.slice(4,8);if(a.length!==2||n.length!==2||o.length!==4)return{type:"error",error:"invalid"};const i="".concat(o,"-").concat(n,"-").concat(a),l=new Date("".concat(i,"T00:00:00.000Z"));if(Number.isNaN(l.getTime())||l.getUTCDate()!==Number.parseInt(a,10)||l.getUTCMonth()+1!==Number.parseInt(n,10)||l.getUTCFullYear()!==Number.parseInt(o,10))return{type:"error",error:"invalid"};const d=new Date;if(l>d)return{type:"error",error:"future"};const c=Ub(l,d);return c<Db?{type:"error",error:"tooYoung"}:c>=Ob?{type:"error",error:"tooOld"}:{type:"valid",isoValue:i,age:c}}function Ub(t,e){let n=e.getUTCFullYear()-t.getUTCFullYear();const a=e.getUTCMonth()-t.getUTCMonth();return(a<0||a===0&&e.getUTCDate()<t.getUTCDate())&&(n-=1),n}function Gb(t){"use forget";const e=_e.c(3),{email:n}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("div",{children:s.jsx(p,{id:"settingsModal.email",defaultMessage:"Email"})}),e[0]=a):a=e[0];let o;return e[1]!==n?(o=s.jsxs("div",{className:"flex items-center justify-between",children:[a,s.jsx("div",{className:"text-token-text-secondary text-sm",children:n})]}),e[1]=n,e[2]=o):o=e[2],o}const re=Be({showLegacyModels:{id:"settingsModal.showLegacyModels",defaultMessage:"Show legacy models"},showAdditionalModels:{id:"settingsModal.showAdditionalModels",defaultMessage:"Show additional models"},settings:{id:"settingsModal.settings",defaultMessage:"General"},locale:{id:"settingsModal.locale_alpha",defaultMessage:"Language"},localeAuto:{id:"settingsModal.localeAuto",defaultMessage:"Auto-detect"},archivedConversations:{id:"settingsModal.archivedConversations",defaultMessage:"Archived chats"},sharedConversations:{id:"settingsModal.sharedConversations",defaultMessage:"Shared links"},manageButton:{id:"settingsModal.manageButton",defaultMessage:"Manage"},mergePersonalData:{id:"settingsModal.mergePersonalData",defaultMessage:"Merge data from your personal workspace"},mergeButton:{id:"settingsModal.mergeButton",defaultMessage:"Merge"},cookieManagement:{id:"settingsModal.cookieManagement",defaultMessage:"Cookie preferences"},cookieManagementButton:{id:"settingsModal.cookieManagementButton",defaultMessage:"Manage"},exportData:{id:"settingsModal.exportData",defaultMessage:"Export data"},exportButton:{id:"settingsModal.exportButton",defaultMessage:"Export"},deleteAccount:{id:"settingsModal.deleteAccount",defaultMessage:"Delete account"},deleteAccountButton:{id:"settingsModal.deleteButton",defaultMessage:"Delete"},modelStickyForNewChats:{id:"settingsModal.modelStickyForNewChats",defaultMessage:"Start new chats with most recently used model"},trainingAllowedDescription:{id:"Qalmv5",defaultMessage:"Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>"},deleteHistoryModalTitle:{id:"settingsModal.deleteHistoryModalTitle",defaultMessage:"Clear your chat history - are you sure?"},deleteHistoryModalConfirm:{id:"settingsModal.deleteHistoryModalConfirm",defaultMessage:"Confirm deletion"},deleteHistoryModalCancel:{id:"settingsModal.deleteHistoryModalCancel",defaultMessage:"Cancel"},archiveHistoryModalTitle:{id:"settingsModal.archiveHistoryModalTitle",defaultMessage:"Archive your chat history - are you sure?"},archiveHistoryModalConfirm:{id:"settingsModal.archiveHistoryModalConfirm",defaultMessage:"Confirm archive"},archiveHistoryModalCancel:{id:"settingsModal.archiveHistoryModalCancel",defaultMessage:"Cancel"},archiveHistorySuccess:{id:"settingsModal.archiveHistorySuccess",defaultMessage:"Successfully archived chats. You can view your archived chats in Settings."},dataExportRequested:{id:"settingsModal.dataExportRequested",defaultMessage:"Successfully exported data. You should receive an email shortly with your data."},dataExportFailed:{id:"settingsModal.dataExportFailed",defaultMessage:"We were unable to process your export at this time. Please try again later."},dataExportModalTitle:{id:"settingsModal.dataExportModalTitle",defaultMessage:"Request data export - are you sure?"},dataExportModalConfirm:{id:"settingsModal.dataExportModalConfirm",defaultMessage:"Confirm export"},dataExportModalCancel:{id:"settingsModal.dataExportModalCancel",defaultMessage:"Cancel"},dataExportModalDescription1:{id:"settingsModal.dataExportModalDescription1",defaultMessage:"Your account details and chats will be included in the export."},dataExportModalDescription2:{id:"settingsModal.dataExportModalDescription2",defaultMessage:"The data will be sent to your registered email in a downloadable file."},dataExportModalDescription3:{id:"settingsModal.dataExportModalDescription3",defaultMessage:"The download link will expire 24 hours after you receive it."},dataExportModalDescription4:{id:"settingsModal.dataExportModalDescription4",defaultMessage:"Processing may take some time. You'll be notified when it's ready."},dataExportModalDescription5:{id:"settingsModal.dataExportModalDescription5",defaultMessage:'To proceed, click "Confirm export" below.'},deleteAccountSessionTooOld:{id:"settingsModal.deleteAccountSessionTooOld",defaultMessage:"Your login session is too old. Please log in again before deleting your account."},deleteAccountFailed:{id:"settingsModal.deleteAccountFailed",defaultMessage:"Failed to delete account. Please try again later."},deleteAccountTitle:{id:"settingsModal.deleteAccountTitle",defaultMessage:"Delete account - are you sure?"},deleteAccountWarning:{id:"settingsModal.deleteAccountWarning",defaultMessage:"Deleting your account is permanent and cannot be undone."},reuseEmailPhoneWarning:{id:"settingsModal.reuseEmailPhoneWarning-2",defaultMessage:"You cannot create a new account using the same email address."},dataRemovalWarning:{id:"settingsModal.dataRemovalWarning-2",defaultMessage:"Your data will be deleted within 30 days, except we may retain a limited set of data for longer where required or permitted by law."},apiAccessDeletionWarning:{id:"settingsModal.apiAccessDeletionWarning-2",defaultMessage:"Deletion will prevent you from accessing OpenAI services, including ChatGPT, API, and DALLE."},deleteHelpCenter:{id:"settingsModal.deleteHelpCenter",defaultMessage:"Read our <article>help center article</article> for more information."},iapSubscriptionWarning:{id:"settingsModal.iapSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Apple App Store. We cannot cancel your subscription for you."},playStoreSubscriptionWarning:{id:"settingsModal.playStoreSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Google Play Store. We cannot cancel your subscription for you."},typeEmailLabel:{id:"settingsModal.typeEmailLabel",defaultMessage:"Please type your account email."},typePhoneNumberLabel:{id:"settingsModal.typePhoneNumberLabel",defaultMessage:"Please type your account phone number."},typeDeleteInputLabel:{id:"settingsModal.typeDeleteInputLabel",defaultMessage:'To proceed, type "{keyword}" in the input field below.'},deleteAccountKeyword:{id:"settingsModal.deleteAccountKeyword",defaultMessage:"DELETE"},lockedButtonLabel:{id:"settingsModal.lockedButtonLabel",defaultMessage:"Locked"},deleteAccountButtonLabel:{id:"settingsModal.deleteAccountButtonLabel",defaultMessage:"Permanently delete my account"},recentLoginMessage:{id:"settingsModal.recentLoginMessage",defaultMessage:"You may only delete your account if you have logged in within the last 10 minutes. Please log in again, then return here to continue."},refreshLoginButtonLabel:{id:"settingsModal.refreshLoginButtonLabel",defaultMessage:"Refresh login"},chatTrainingAllowedToggleLabel:{id:"settingsModal.trainingAllowedToggleLabel",defaultMessage:"Improve the model for everyone"},chatTrainingEnterpriseTooltip:{id:"settingsModal.chatTrainingEnterpriseTooltip",defaultMessage:"ChatGPT Enterprise automatically disables training."},chatTrainingEduTooltip:{id:"settingsModal.chatTrainingEduTooltip",defaultMessage:"ChatGPT Edu automatically disables training."},chatTrainingTeamsTooltip:{id:"settingsModal.chatTrainingTeamsTooltip",defaultMessage:"ChatGPT Business automatically disables training."},preciseLocationToggleLabel:{id:"dataControlsSettings.preciseLocationToggleLabel",defaultMessage:"Share precise location"},preciseLocationToggleDescription:{id:"dataControlsSettings.preciseLocationToggleDescription",defaultMessage:"Allow ChatGPT to use your device's precise location when answering questions."},dataControlsTab:{id:"settingsModal.dataControls",defaultMessage:"Data controls"},schedulesTab:{id:"settingsModal.schedulesTab",defaultMessage:"Schedules"},cookiesTab:{id:"settingsModal.cookies",defaultMessage:"Cookie Preferences"},personalizationTab:{id:"settingsModal.personalization",defaultMessage:"Personalization"},personalityTab:{id:"settingsModal.personalityTab",defaultMessage:"Personality"},generalTab:{id:"settingsModal.generalTab",defaultMessage:"General"},desktopAppTab:{id:"settingsModal.desktopAppTab",defaultMessage:"App"},connectorsTabRevamp:{id:"settingsModal.connectorsTabRevamp",defaultMessage:"Connectors"},connectorsTabModelToolDiscovery:{id:"settingsModal.connectorsModelToolDiscovery",defaultMessage:"Apps & Connectors"},securityTab:{id:"settingsModal.securityTab",defaultMessage:"Security"},accountTab:{id:"settingsModal.accountTab",defaultMessage:"Account"},internalTab:{id:"settingsModal.internalTab",defaultMessage:"Employee Only"},subscriptionTab:{id:"settingsModal.subscriptionTab",defaultMessage:"Subscription"},logoutAllSuccess:{id:"settingsModal.logoutAllSuccess",defaultMessage:"Successfully logged out of all devices."},logoutAllFailed:{id:"settingsModal.logoutAllFailed",defaultMessage:"We were unable to process your request at this time. Please try again later."},accountInfoNameLabel:{id:"settingsModal.accountInfoNameLabel",defaultMessage:"Name"},accountInfoEmailAddAction:{id:"settingsModal.accountInfoEmailAddAction",defaultMessage:"Add"},accountInfoEmailLabel:{id:"settingsModal.accountInfoEmailLabel",defaultMessage:"Email"},deleteChatLabel:{id:"settingsModal.deleteChatLabel",defaultMessage:"Delete all chats"},deleteChatButton:{id:"settingsModal.deleteChatButton",defaultMessage:"Delete all"},logOutLabel:{id:"settingsModal.logOutLabel",defaultMessage:"Log out of this device"},logOutButton:{id:"settingsModal.logoutButton",defaultMessage:"Log out"},trustedDevices:{id:"settingsModal.trustedDevices",defaultMessage:"Trusted Devices"},deviceCodeAuthToggleLabel:{id:"settingsModal.deviceCodeAuthToggleLabel",defaultMessage:"Enable device code authorization for Codex"},deviceCodeAuthToggleDescription:{id:"settingsModal.deviceCodeAuthToggleDescription",defaultMessage:"Device code authorization is useful for running headless login for the Codex CLI. Exercise caution in enabling, because device codes may be targeted by phishing attacks."},archiveChatsLabel:{id:"settingsModal.archiveChatsLabel",defaultMessage:"Archive all chats"},archiveChatsButton:{id:"settingsModal.archiveChatsButton",defaultMessage:"Archive all"},remoteBrowserData:{id:"settingsModal.remoteBrowserData",defaultMessage:"Remote browser data"},remoteBrowserDataKeepLabel:{id:"settingsModal.remoteBrowserDataKeepLabel",defaultMessage:"Remember site data between sessions"},remoteBrowserDataKeepDescription:{id:"settingsModal.remoteBrowserDataKeepDescription",defaultMessage:"Let agent mode's remote browser reuse cookies between sessions."},remoteBrowserDataSitesLabel:{id:"settingsModal.remoteBrowserDataSitesLabel",defaultMessage:"{count} {count, plural, one {site} other {sites}}"},chatHistoryDescription:{id:"settingsModal.chatHistoryDescription",defaultMessage:"Save new chats on this browser to your history and allow them to be used to improve our models. Unsaved chats will be deleted from our systems within 30 days. This setting does not sync across browsers or devices. <link>Learn more</link>"},voiceTrainingAllowedLabel:{id:"settingsModal.voiceTrainingAllowedLabel",defaultMessage:"Include your audio recordings"},videoTrainingAllowedLabel:{id:"settingsModal.videoTrainingAllowedLabel",defaultMessage:"Include your video recordings"},voiceAndVideoTrainingDescription:{id:"settingsModal.voiceAndVideoTrainingDescription",defaultMessage:'Include your audio and video recordings from Voice Mode to train our models. Transcripts and other files are covered by "Improve the model for everyone." <link>Learn more</link>'},accountErrorWarning:{id:"SettingsModalImpl.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},deleteBrowserContext:{id:"settingsModal.deleteBrowserContext",defaultMessage:"Remote browser data"},deleteBrowserContextButton:{id:"settingsModal.deleteBrowserContextButton",defaultMessage:"Delete all"},deleteBrowserContextSuccess:{id:"settingsModal.deleteBrowserContextSuccess",defaultMessage:"Remote browser data deleted successfully."},deleteBrowserContextError:{id:"settingsModal.deleteBrowserContextError",defaultMessage:"Error deleting browser context!"},deleteBrowserContextModalTitle:{id:"settingsModal.deleteBrowserContextModalTitle",defaultMessage:"Delete all browser data?"},deleteBrowserContextModalConfirm:{id:"settingsModal.deleteBrowserContextModalConfirm",defaultMessage:"Delete"},deleteBrowserContextModalCancel:{id:"settingsModal.deleteBrowserContextModalCancel",defaultMessage:"Cancel"},disableRemoteBrowserDataTitle:{id:"settingsModal.disableRemoteBrowserDataTitle",defaultMessage:"Turning off remote browser data?"},disableRemoteBrowserDataDescription:{id:"settingsModal.disableRemoteBrowserDataDescription",defaultMessage:"This will disable cookies and connectors for any active and scheduled tasks."},disableRemoteBrowserDataConfirm:{id:"settingsModal.disableRemoteBrowserDataConfirm",defaultMessage:"OK"},disableRemoteBrowserDataCancel:{id:"settingsModal.disableRemoteBrowserDataCancel",defaultMessage:"Keep on"}}),Vb=R(()=>L(()=>import("./jh022kjl1g1bb86v.js"),__vite__mapDeps([127,1])),{loading:t=>K(t)}),zb=R(()=>L(()=>import("./bwbxwr01lw4jlfcq.js"),__vite__mapDeps([128,1])),{loading:t=>K(t)}),Hb=R(()=>L(()=>import("./omdbfy4vvhu56dri.js"),__vite__mapDeps([129,1])),{loading:t=>K(t)});function Wb({type:t,className:e}){return t==="computer"?s.jsx(Vb,{className:e}):t==="phone"?s.jsx(zb,{className:e}):s.jsx(Hb,{className:e})}function Kb({onClose:t,devices:e}){const n=Y();return s.jsxs(pt,{isOpen:!0,onClose:t,title:s.jsx("span",{className:"heading-sm [font-weight:500]",children:n.formatMessage({id:"trustedDevicesModal.title",defaultMessage:"Trusted Devices"})}),testId:"modal-trusted-devices",className:"max-w-[524px]!",headerClassName:"!px-6 !py-0 !h-[76px] !items-center",contentClassName:"!px-6 !pt-6 !pb-0",showCloseButton:!0,hasSeparator:!0,modalActionsClassName:"!mt-0",children:[s.jsx("p",{className:"text-sm",children:s.jsx(p,{id:"trustedDevicesModal.description",defaultMessage:"After you sign in, a device becomes trusted. When you log in somewhere new, we'll send a prompt to your trusted devices for approval. To remove a trusted device from this list, just log out."})}),s.jsx("div",{className:"border-token-border mt-6 border-t"}),s.jsx("ul",{className:"divide-token-border border-token-border divide-y border-b",children:e.map(a=>{var o;return s.jsxs("li",{className:"flex items-center gap-3 py-2",children:[s.jsx("div",{className:"text-token-icon-primary",children:s.jsx(Wb,{type:a.device_type})}),s.jsxs("div",{children:[s.jsx("p",{className:"py-0.5 text-sm",children:(o=a.device_name)!=null?o:n.formatMessage({id:"trustedDevicesModal.unknownDeviceName",defaultMessage:"Unknown"})}),(a.last_seen_time!=null||a.device_location)&&s.jsx("p",{className:"text-token-text-secondary py-0.5 text-sm",children:a.device_location?s.jsx(p,{id:"trustedDevicesModal.lastSeen.withLocation",defaultMessage:"Last logged in on {ts, date, short} at {ts, time, short} from {location}",values:{ts:a.last_seen_time?a.last_seen_time*1e3:Date.now(),location:a.device_location}}):s.jsx(p,{id:"trustedDevicesModal.lastSeen.noLocation",defaultMessage:"Last logged in on {ts, date, short} at {ts, time, short}",values:{ts:a.last_seen_time?a.last_seen_time*1e3:Date.now()}})})]})]},a.device_id)})}),s.jsx("div",{className:"border-token-border mt-6 border-t"})]})}const $b=R(()=>L(()=>import("./gosr9rxp0v3e8kw5.js"),__vite__mapDeps([130,1])),{loading:t=>K(t)});R(()=>L(()=>import("./nk9us3c8gmndoxfz.js"),__vite__mapDeps([131,1])),{loading:t=>K(t)});R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zN),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)});const qb=R(()=>L(()=>import("./mxxk8a6tsnqbiapb.js"),__vite__mapDeps([132,1])),{loading:t=>K(t)}),Yb=R(()=>L(()=>import("./kw03hsqv96j7mp48.js"),__vite__mapDeps([133,1])),{loading:t=>K(t)}),Qb=R(()=>L(()=>import("./bzr9wyyo1msigqkj.js"),__vite__mapDeps([134,1])),{loading:t=>K(t)}),Jb=R(()=>L(()=>import("./esswtmzkysxthgv2.js"),__vite__mapDeps([135,1])),{loading:t=>K(t)}),Zb=R(()=>L(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([32,1])),{loading:t=>K(t)}),Xb=R(()=>L(()=>import("./g842wk722jj3m7vq.js"),__vite__mapDeps([136,1])),{loading:t=>K(t)}),eM=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zm),__vite__mapDeps([14,1,15,16,17])),{loading:t=>K(t)}),Ul=R(()=>L(()=>import("./decxj0nfuivtbs7k.js"),__vite__mapDeps([137,1])),{loading:t=>K(t)}),tM=R(()=>L(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([10,1])),{loading:t=>K(t)}),sM=R(()=>L(()=>import("./cklkb8csuv59azob.js"),__vite__mapDeps([138,1])),{loading:t=>K(t)}),nM=R(()=>L(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zP),__vite__mapDeps([14,1,15,16,17])).then(t=>t.default)),aM=R(()=>L(()=>import("./h1kcrvxc0en5lwjt.js"),__vite__mapDeps([139,1,15,16,140,14,17]))),oM=R(()=>L(()=>import("./lbp124td1jxnga57.js").then(t=>t.t),__vite__mapDeps([71,1,15,16,72,73,14,17,74,75,76,77,78,79,80,81,82,70,83])).then(t=>t.default)),Ui=R(()=>L(()=>import("./cl2tf2fdudyyttjl.js"),__vite__mapDeps([141,1,15,16,14,17,71,72,73,74,75,76,77,78,79,80,81,82,70,83,142])).then(t=>t.CancelSubscriptionModal)),Gi=R(()=>L(()=>import("./n1gcl1h3ubxs0ecs.js"),__vite__mapDeps([143,1,15,16,14,17,71,72,73,74,75,76,77,78,79,80,81,82,70,83,142])).then(t=>t.SubscriptionClaimCancelPromoModal)),iM=R(()=>L(()=>import("./gfqslfb8a7sfzqji.js"),__vite__mapDeps([144,1,15,16])).then(t=>t.EditEmailModal)),rM=R(()=>L(()=>import("./lzqsuxas5lacfmcs.js"),__vite__mapDeps([145,1,15,16,14,17])).then(t=>t.AddEmailModal)),lM=R(()=>L(()=>import("./dzj5ft8tapep7o7g.js"),__vite__mapDeps([146,1,15,16,147,14,17])).then(t=>t.default)),cM=R(()=>L(()=>import("./cc03anyjknq05li0.js"),__vite__mapDeps([148,1,15,16,14,17,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,31,95,96,97,41,98,99,100,101,102,103,104,105,106,107,108,109,110,44,111,112,113,114,115,116,117,118,119])).then(t=>t.ConfirmDeleteHistoryModal)),Gl=R(()=>L(()=>import("./pa9agtilwl49n8ny.js"),__vite__mapDeps([149,1,15,16,14,17,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,31,95,96,97,41,98,99,100,101,102,103,104,105,106,107,108,109,110,44,111,112,113,114,115,116,117,118,119])).then(t=>t.ConfirmDeleteBrowserContextModal)),dM=R(()=>L(()=>import("./h60kw9fd5jcuxve4.js"),__vite__mapDeps([150,1,15,16,14,17,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,31,95,96,97,41,98,99,100,101,102,103,104,105,106,107,108,109,110,44,111,112,113,114,115,116,117,118,119])).then(t=>t.ConfirmArchiveHistoryModal)),uM=R(()=>L(()=>import("./gzk9gjcdng26l0p1.js"),__vite__mapDeps([151,1,15,16,14,17,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,31,95,96,97,41,98,99,100,101,102,103,104,105,106,107,108,109,110,44,111,112,113,114,115,116,117,118,119])).then(t=>t.ConfirmExportDataModal)),gM=R(()=>L(()=>import("./cgydvuzo0i70jh2j.js"),__vite__mapDeps([152,1,15,16,14,17])).then(t=>t.ConfirmDeleteAccountModal)),mM=()=>!1,Vl="https://help.openai.com/en/articles/5722486",fM="https://help.openai.com/en/articles/8400625-voice-mode-faq#h_3839e62d6a";function pM(t){const e=ya(t),{data:n}=ds({queryKey:["data-usage-for-training",e==null?void 0:e.accountUserId],queryFn:()=>Xe.safeGet("/accounts/data_usage_for_training"),enabled:e!=null});return n==null?void 0:n.data_usage_for_training}function hM({account:t}){return t?t.isFree()?ut.FREE:t.isGo()?ut.GO:t.isPlus()?ut.PLUS:t.isPro()?ut.PRO:null:null}function xM(){const{data:t}=In(),e=Y(),n=Es($s.isBusinessWorkspace),[a,o]=S.useState(!1),i=Es($s.isTeamPlan),l=Es($s.isEduPlan),{data:d}=Ft(ke.TrainingAllowed),{data:c}=Ft(ke.VoiceTrainingAllowed),{data:r}=Ft(ke.VideoTrainingAllowed),m=Bt(),g=mo(),u=pM(t),f=u==="disallowed"?!1:!!d;return s.jsxs(le,{children:[s.jsx(xn,{onClick:()=>o(!0),label:e.formatMessage(re.chatTrainingAllowedToggleLabel),stateLabel:f?e.formatMessage({id:"settingsModal.trainingEnabled",defaultMessage:"On"}):e.formatMessage({id:"settingsModal.trainingDisabled",defaultMessage:"Off"}),testId:"improve-model-open-modal-button"}),a&&s.jsxs(pt,{testId:"modal-training-toggle",isOpen:!0,onClose:()=>o(!1),title:e.formatMessage({id:"settingsModal.trainingToggleModalTitle",defaultMessage:"Model improvement"}),type:"success",secondaryButton:s.jsx(te,{color:"secondary",onClick:()=>o(!1),"data-testid":"improve-model-done-button",children:s.jsx(p,{id:"settingsModal.trainingToggleModalDoneButton",defaultMessage:"Done"})}),children:[s.jsx("div",{className:"pb-8",children:s.jsx(ft,{label:e.formatMessage(re.chatTrainingAllowedToggleLabel),disabled:u==="disallowed"||(g==null?void 0:g[ke.TrainingAllowed])===!0,enabled:f,onChange:h=>{m.mutate({setting:ke.TrainingAllowed,value:h})},toggleTooltip:n?s.jsx(p,v({},i?re.chatTrainingTeamsTooltip:l?re.chatTrainingEduTooltip:re.chatTrainingEnterpriseTooltip)):null,description:s.jsx(p,pe(v({},re.trainingAllowedDescription),{values:{link:h=>s.jsx("a",{href:Vl,target:"_blank",className:"underline",rel:"noreferrer",children:h})}})),testId:"improve-model-toggle"})}),!n&&s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-token-text-secondary mb-2 text-lg leading-7 font-semibold",children:s.jsx(p,{id:"settingsModal.trainingToggleModalVoiceAndVideoTitle",defaultMessage:"Voice mode"})}),s.jsx("div",{className:"pb-2",children:s.jsx(ft,{label:e.formatMessage(re.voiceTrainingAllowedLabel),enabled:f?!!c:!1,disabled:!f||(g==null?void 0:g[ke.VoiceTrainingAllowed])===!0,onChange:h=>{f&&m.mutate({setting:ke.VoiceTrainingAllowed,value:h})}})}),s.jsx(ft,{label:e.formatMessage(re.videoTrainingAllowedLabel),enabled:f?!!r:!1,disabled:!f||(g==null?void 0:g[ke.VideoTrainingAllowed])===!0,onChange:h=>{f&&m.mutate({setting:ke.VideoTrainingAllowed,value:h})},description:s.jsx(p,pe(v({},re.voiceAndVideoTrainingDescription),{values:{link:h=>s.jsx("a",{href:fM,target:"_blank",className:"underline",rel:"noreferrer",children:h})}}))})]})]})]})}const yM=()=>{const t=ce(),e=Y(),n=Nd(),a=Cs(),{pathname:o}=a,i=Pt(),{closeSettings:l,currentTab:d,openSettings:c}=Zs(),r=wd(),m=Pd(),g=Ad(),u=Id(),f=mM(),h=As(),_=Dd(),b=Od(),[j,y]=S.useState(r);S.useEffect(()=>{y(r)},[r]);const[M,C]=S.useState(u),[k,E]=S.useState(f),w=Dy(),x=al(),T=Oe(t,"733205176"),N=Oe(t,"3375735072"),A=Oe(t,"490346566"),P=Or(Ts.CookieManagement),U=Et(),[I,q]=S.useState(null);S.useEffect(()=>{const[W]=a.hash.split("?"),[de,V,se]=W.split("/");de==="#settings"&&V===He.DataControls&&se===Lr.ArchivedChats&&nt(t,nM,{})},[t,a.hash,i]);const Q=x.status!=="loading",{native_default_factor_id:D}=x,F=()=>{if(x.status!=="enabled")throw new Error("MFA is not enabled");if(!D)throw new Error("No factor ID found");return Xe.safePost("/accounts/mfa/user/disable_in_house",{requestBody:{factor_id:D}})},G=()=>{F().then(()=>{U.invalidateQueries({queryKey:["mfaInfo"]}),i(Jo(Zo.DISABLE_MFA_SUCCESS,"/#settings/".concat(He.Security)))}).catch(()=>{i(Jo(Zo.DISABLE_MFA_TIMEOUT,"/#settings/".concat(He.Security)))})},X=Oe(t,"3325813340");Oe(t,"3384364566"),or(t,"3553340571").get("enable_api",!1);const B=kt(),$=B==null?void 0:B.isPersonalAccount(),H=$!==!1;S.useEffect(()=>{$===!1&&d===He.ParentalControls&&c(He.General)},[d,$,c]);let J=null;if(w)return Q?s.jsx(Oy,{onClose:()=>i("/",{replace:!0}),onConfirm:G}):null;if(P)return null;if(j){if(J=s.jsx(Hx,{onClose:()=>{m?(y(!1),b()):i(o,{replace:!0})}}),!m)return J}else{if(g)return s.jsx(Wg,{onClose:()=>i("/",{replace:!0}),referrer:rn.ConnectorToggle,toggleAllAfterRedirect:!0});if(M)return s.jsx(Rg,{onClose:W=>{W?(h(W),C(!1)):u?i(o,{replace:!0}):C(!1)}})}return s.jsxs(s.Fragment,{children:[s.jsx(pt,{testId:"modal-settings",isOpen:!0,onClose:l,size:"custom",className:"max-h-[85vh] max-md:min-h-[60vh] md:h-[600px] md:max-w-[680px]",type:"success",title:e.formatMessage(re.settings),showCloseButton:!0,visuallyHiddenHeader:n,hasSeparator:!0,noPadding:!0,children:s.jsxs(Ld,{className:"flex h-[100%] flex-col md:flex-row",value:d!=null?d:He.General,orientation:n?"vertical":void 0,onValueChange:W=>{c(W)},children:[s.jsxs(Rd,{className:"bg-token-bg-elevated-secondary flex shrink-0 flex-row flex-wrap select-none max-md:overflow-x-auto max-md:border-b max-md:p-1.5 md:max-w-[210px] md:min-w-[180px] md:flex-col dark:bg-black/10",children:[s.jsx("div",{className:"py-3 ps-2.5 max-md:hidden",children:s.jsx($a,{onClick:l})}),s.jsx(ys,{value:He.General,icon:Yb,label:s.jsx(p,v({},re.generalTab))}),X&&s.jsx(my,{}),s.jsx(ys,{value:He.Personalization,icon:Jb,label:s.jsx(p,v({},re.personalizationTab)),"data-testid":"personalization-tab",onMouseOver:()=>{U.prefetchQuery(ag()),eo(t),og(t),ig(t)}}),s.jsx(ys,{value:He.Connectors,icon:eM,label:A?s.jsx(p,v({},re.connectorsTabModelToolDiscovery)):s.jsx(p,v({},re.connectorsTabRevamp))}),T&&s.jsx(ys,{value:He.Schedules,icon:Ul,label:s.jsx(p,v({},re.schedulesTab)),"data-testid":"schedules-tab"}),N&&s.jsx(ys,{value:He.Orders,icon:qb,label:s.jsx(p,{id:"xdSD9Q",defaultMessage:"Orders"}),"data-testid":"orders-tab"}),s.jsx(ys,{value:He.DataControls,icon:Xb,label:s.jsx(p,v({},re.dataControlsTab)),"data-testid":"data-controls-tab"}),s.jsx(ys,{value:He.Security,icon:Qb,label:s.jsx(p,v({},re.securityTab)),"data-testid":"security-tab"}),H&&s.jsx(ys,{value:He.ParentalControls,icon:$b,label:e.formatMessage(os.parentalControlsTab),"data-testid":"amphora-controls-tab"}),!1,!1,s.jsx(ys,{value:He.Account,icon:sM,label:s.jsx(p,v({},re.accountTab)),"data-testid":"account-tab"}),!1]}),s.jsx(hs,{value:He.General,children:s.jsx(bM,{})}),X&&s.jsx(hs,{value:He.Notifications,children:s.jsx(ry,{})}),s.jsx(hs,{value:He.Personalization,children:s.jsx(Nb,{})}),s.jsx(hs,{value:He.Connectors,children:s.jsx(vh,{onAddLinkClick:()=>{_({referrer:rn.SettingsConnectorsTab,showSettingsBehindConnectorLink:!0}),y(!0)},onCreateCustomConnectorClick:()=>C(!0)})}),s.jsx(hs,{value:He.DataControls,children:I==="remoteBrowserData"?s.jsx(TM,{onBack:()=>q(null)}):s.jsx(CM,{onOpenRemoteBrowserDataPage:()=>q("remoteBrowserData")})}),T&&s.jsx(hs,{value:He.Schedules,children:s.jsx(_M,{})}),N&&s.jsx(hs,{value:He.Orders,children:s.jsx(Hg,{})}),s.jsx(hs,{value:He.Security,children:s.jsx(vM,{})}),H&&s.jsx(hs,{value:He.ParentalControls,children:s.jsx(Yf,{})}),!1,!1,s.jsx(hs,{value:He.Account,children:s.jsx(jM,{})}),!1]})}),J]})};function bM(){"use forget";const t=_e.c(50),e=Y(),n=Bt(),a=Et(),o=Bd(),i=ce();let l;t[0]!==i?(l=Fd(i)&&!Rr(),t[0]=i,t[1]=l):l=t[1];const d=l,{data:c}=Ft(ke.ShowLegacyModels),r=kt();let m;t[2]!==i?(m=Oe(i,"2991909965"),t[2]=i,t[3]=m):m=t[3];const g=m;let u;t[4]!==i?(u=Oe(i,"2036808540"),t[4]=i,t[5]=u):u=t[5];const f=u;let h;t[6]!==i?(h=Oe(i,"4230914712"),t[6]=i,t[7]=h):h=t[7];const _=h,b=Oe(i,"3315017149");let j;t[8]!==r||t[9]!==f||t[10]!==_?(j=(r==null?void 0:r.isEnterprisey())&&f||(r==null?void 0:r.isSelfServeBusiness())&&_,t[8]=r,t[9]=f,t[10]=_,t[11]=j):j=t[11];const y=j;let M;t[12]!==e?(M=e.formatMessage(re.showLegacyModels),t[12]=e,t[13]=M):M=t[13];let C=M,k;t[14]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(p,{id:"dw9iMe",defaultMessage:"Please contact your administrator to enable or disable legacy models."}),t[14]=k):k=t[14];let E=k;if(b){let F;t[15]!==e?(F=e.formatMessage(re.showAdditionalModels),t[15]=e,t[16]=F):F=t[16],C=F;let G;t[17]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(p,{id:"TJwldi",defaultMessage:"Please contact your administrator to enable or disable additional models."}),t[17]=G):G=t[17],E=G}let w;t[18]!==e?(w=e.formatMessage(re.settings),t[18]=e,t[19]=w):w=t[19];let x;t[20]!==o?(x=o&&s.jsx(qy,{}),t[20]=o,t[21]=x):x=t[21];let T;t[22]!==o?(T=o&&s.jsx(Xy,{}),t[22]=o,t[23]=T):T=t[23];let N;t[24]!==o?(N=o&&s.jsx(Qy,{}),t[24]=o,t[25]=N):N=t[25];let A;t[26]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(le,{children:s.jsx(Ly,{})}),t[26]=A):A=t[26];let P;t[27]!==r||t[28]!==d?(P=d&&r&&s.jsx(le,{children:s.jsx(Kg,{account:r})}),t[27]=r,t[28]=d,t[29]=P):P=t[29];let U;t[30]!==o?(U=o&&s.jsx(Jy,{}),t[30]=o,t[31]=U):U=t[31];let I,q;t[32]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(le,{children:s.jsx(SM,{})}),q=s.jsx(lg,{}),t[32]=I,t[33]=q):(I=t[32],q=t[33]);let Q;t[34]!==g||t[35]!==E||t[36]!==C||t[37]!==a||t[38]!==y||t[39]!==c||t[40]!==n?(Q=g&&s.jsx(le,{children:s.jsx(ft,{label:C,enabled:y?!1:!!c,disabled:y,description:y?E:void 0,isLoading:n.isPending,onChange:async F=>{await n.mutateAsync({setting:ke.ShowLegacyModels,value:F}),a.invalidateQueries({queryKey:Ud()})}})}),t[34]=g,t[35]=E,t[36]=C,t[37]=a,t[38]=y,t[39]=c,t[40]=n,t[41]=Q):Q=t[41];let D;return t[42]!==N||t[43]!==P||t[44]!==U||t[45]!==Q||t[46]!==w||t[47]!==x||t[48]!==T?(D=s.jsxs(Ze,{title:w,children:[x,T,N,A,P,U,I,q,Q]}),t[42]=N,t[43]=P,t[44]=U,t[45]=Q,t[46]=w,t[47]=x,t[48]=T,t[49]=D):D=t[49],D}function MM(){const t=Y(),e=Bt(),{data:n}=Ft(ke.PreciseLocationEnabledForDevice);return S.useEffect(()=>{typeof n=="boolean"&&(n?$g():qg())},[n]),s.jsx(le,{children:s.jsx(ft,{label:t.formatMessage(re.preciseLocationToggleLabel),description:s.jsx(p,v({},re.preciseLocationToggleDescription)),enabled:!!n,isLoading:n==null,onChange:a=>{e.mutate({setting:ke.PreciseLocationEnabledForDevice,value:a})}})})}function CM({onOpenRemoteBrowserDataPage:t}){const e=ce(),n=Y(),a=gt(),{pathname:o}=Cs(),i=Pt(),l=Oe(e,"733205176"),d=Oe(e,"1030527215"),c=Oe(e,"1957563541"),r=rg(Xi.WorkspaceShareLinks),m=Bt(),{data:g}=In(),u=ya(g),f=Es($s.isBusinessWorkspace),h=u==null?void 0:u.isSelfServeBusiness(),_=g==null?void 0:g.accountItems.some(T=>T.isPersonalAccount()),b=Jr(),j=Zr(),y=Xr(),M=el(e),C=Et(),{data:k}=Ft(ke.EnableRemoteBrowserData),E=()=>{Xe.safePatch("/conversations",{requestBody:{is_archived:!0}}).then(()=>{a.info(n.formatMessage(re.archiveHistorySuccess)),Xo(C)}),o!=="/"&&i("/",{replace:!0})},w=()=>{Xe.safePatch("/conversations",{requestBody:{is_visible:!1},intercomEventOnError:"fetch-error:conversations:delete"}).then(()=>{Xo(C)}),o!=="/"&&i("/",{replace:!0})},x=()=>{Xe.safeDelete("/agent/browser_context",{}).then(T=>{T.success?a.success(n.formatMessage(re.deleteBrowserContextSuccess)):a.danger(re.deleteBrowserContextError,{toastId:"delete-browser-context-failed"})}).catch(()=>{a.danger(re.deleteBrowserContextError,{toastId:"delete-browser-context-error"})})};return s.jsxs(Ze,{title:n.formatMessage(re.dataControlsTab),children:[s.jsx(xM,{}),l&&s.jsx(le,{children:d?s.jsx(xn,{label:n.formatMessage(re.remoteBrowserData),stateLabel:k?n.formatMessage({id:"personalizationSettings.on",defaultMessage:"On"}):n.formatMessage({id:"personalizationSettings.off",defaultMessage:"Off"}),onClick:t}):s.jsx(zt,{color:"danger-outline",label:n.formatMessage(re.deleteBrowserContext),buttonLabel:n.formatMessage(re.deleteBrowserContextButton),onClick:()=>{nt(e,Gl,{onDeleteBrowserContext:x})},"data-testid":"delete-browser-context-button"})}),c&&s.jsx(MM,{}),y&&M&&s.jsx(le,{children:s.jsx(ft,{label:n.formatMessage({id:"APWP2z",defaultMessage:"Enable memory in search"}),enabled:b,onChange:T=>{m.mutate({setting:ke.MemoryInSearch,value:T})},disabled:!j,description:s.jsx(p,{id:"nQ+QoN",defaultMessage:"To be more helpful in getting you more relevant responses, ChatGPT may share disassociated search queries based on past memories with third-party search providers. <link>Learn more</link>",values:{link:T=>s.jsx("a",{href:"https://help.openai.com/en/articles/9237897-chatgpt-search",target:"_blank",className:"underline",rel:"noreferrer",children:T})}})})}),r&&s.jsx(le,{children:s.jsx(zt,{label:n.formatMessage(re.sharedConversations),buttonLabel:n.formatMessage(re.manageButton),onClick:()=>{nt(e,lM)},"data-testid":"manage-shared-conversations-button"})}),s.jsx(le,{children:s.jsx(zt,{label:n.formatMessage(re.archivedConversations),buttonLabel:n.formatMessage(re.manageButton),onClick:()=>{i(ao(He.DataControls,{dataControlsRoute:Lr.ArchivedChats}))},"data-testid":"manage-archived-conversations-button"})}),s.jsx(le,{children:s.jsx(zt,{label:n.formatMessage(re.archiveChatsLabel),buttonLabel:n.formatMessage(re.archiveChatsButton),onClick:()=>{nt(e,dM,{onArchiveHistory:E})},"data-testid":"archive-all-chats-button"})}),s.jsx(le,{children:s.jsx(zt,{color:"danger-outline",label:n.formatMessage(re.deleteChatLabel),buttonLabel:n.formatMessage(re.deleteChatButton),onClick:()=>{nt(e,cM,{onDeleteHistory:w})},"data-testid":"delete-all-chats-button"})}),h&&_&&s.jsx(le,{children:s.jsx(zt,{label:n.formatMessage(re.mergePersonalData),buttonLabel:n.formatMessage(re.mergeButton),onClick:()=>{nt(e,aM,{fromSettings:!0})}})}),!f&&s.jsx(le,{children:s.jsx(zt,{label:n.formatMessage(re.exportData),buttonLabel:n.formatMessage(re.exportButton),onClick:()=>{nt(e,uM)},"data-testid":"export-data-button"})})]})}function _M(){"use forget";const t=_e.c(6),e=Y();let n;t[0]!==e?(n=e.formatMessage(re.schedulesTab),t[0]=e,t[1]=n):n=t[1];let a;t[2]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("div",{children:s.jsx(p,{id:"eTC7El",defaultMessage:"ChatGPT can be scheduled to run again after it completes a task. Choose {scheduleIcon} Schedule from the {menuIcon} menu in a conversation to set up future runs.",values:{scheduleIcon:s.jsx(Ul,{className:"-mt-1 inline-block size-4"}),menuIcon:s.jsx(Zb,{className:"-mt-1 inline-block size-4"})}})}),t[2]=a):a=t[2];let o;t[3]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsxs("div",{className:"flex flex-col gap-5 py-4",children:[a,s.jsx("div",{children:s.jsx(ga,{to:"/schedules",className:"hover:bg-token-bg-tertiary rounded-full border px-4 py-2",children:s.jsx(p,{id:"+0oCTk",defaultMessage:"Manage"})})})]}),t[3]=o):o=t[3];let i;return t[4]!==n?(i=s.jsx(Ze,{title:n,children:o}),t[4]=n,t[5]=i):i=t[5],i}function vM(){var x,T,N,A,P,U;const t=ce(),e=Y(),n=gt(),a=Bt(),[o,i]=S.useState(!1),[l,d]=S.useState(!1),c=al(),r=c.status,m=Gd(),g=Rr()&&!m,{session:u}=Vd(t),f=u==null?void 0:u.user,{data:h}=Ft(ke.EnableDeviceCodeAuth),{data:_}=In(),b=ya(_),j=b==null?void 0:b.features,y=Es(I=>{var q;return((q=I.currentWorkspace)==null?void 0:q.structure)==="workspace"});ts.addAction("security_settings_has_workspace",{hasWorkspace:y});const M=!y&&Oe(t,"2508433885"),C=Ty({enabled:!0}),k=r==="enabled"||(f==null?void 0:f.email)!=null&&(j==null?void 0:j.includes(zd))===!0&&(r==="loading"||r==="disabled"),E=k&&c.status==="loading",w=S.useCallback(()=>{i(!0),Xe.safePost("/accounts/logout_all").then(()=>{n.success(e.formatMessage(re.logoutAllSuccess),{testId:"logout-all-success-toaster"}),Ra()}).catch(I=>{ts.addError(new Error("Failed logging out all accounts: ",{cause:I})),n.danger(re.logoutAllFailed,{hasCloseButton:!0,toastId:"settings_modal_failed_to_log_out_all"}),i(!1)})},[e,n]);return s.jsxs(s.Fragment,{children:[s.jsxs(Ze,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[e.formatMessage(re.securityTab),E?s.jsx(Ut,{className:"h-4 w-4"}):null]}),headerInteractable:!0,children:[k&&!E&&s.jsx(rb,{factors:c.factors}),k&&s.jsx(ob,{factors:c.factors,isDisabled:E,isLoading:E,showPushAuth:c.show_push_auth,showSms:c.show_sms,email:(x=f==null?void 0:f.email)!=null?x:void 0,numTrustedDevices:C.isError||(T=C.data)==null?void 0:T.devices.length}),!C.isError&&C.data&&s.jsx(le,{children:C.data&&C.data.devices.length>0?s.jsx(xn,{onClick:()=>d(!0),label:s.jsx(p,v({},re.trustedDevices)),stateLabel:C.data?String(C.data.devices.length):"0"}):s.jsxs("div",{children:[s.jsx("div",{children:s.jsx(p,v({},re.trustedDevices))}),s.jsx(un,{children:s.jsx(p,{id:"settingsModal.trustedDevicesEmptyDescription",defaultMessage:"When you sign in on another device, it will be added here and can automatically receive device prompts for signing in."})})]})}),!g&&s.jsx(le,{children:s.jsx(zt,{label:e.formatMessage(re.logOutLabel),buttonLabel:e.formatMessage(re.logOutButton),onClick:()=>Ra(),"data-testid":"logout-button"})}),s.jsx(le,{children:s.jsx(zt,{label:s.jsx(p,{id:"settingsModal.logoutAllLabel",defaultMessage:"Log out of all devices"}),color:"danger-outline",buttonLabel:s.jsx("div",{style:{whiteSpace:"nowrap"},children:s.jsx(p,{id:"settingsModal.logoutAllButton",defaultMessage:"Log out all"})}),description:s.jsx(p,{id:"settingsModal.logoutAllDescription",defaultMessage:"Log out of all active sessions across all devices, including your current session. It may take up to 30 minutes for other devices to be logged out."}),onClick:()=>{Ge.logLogOutButtonClicked({location:"settings_modal_log_out_all"},Hd.ACCESS_LOGOUT_ACTION_LOCATION_SETTINGS_MODAL_LOG_OUT_ALL),w()},disabled:o,testId:"logout-all-button"})})]}),l&&!C.isError&&((N=C==null?void 0:C.data)==null?void 0:N.devices)&&((A=C==null?void 0:C.data)==null?void 0:A.devices.length)>0&&s.jsx(Kb,{devices:(U=(P=C==null?void 0:C.data)==null?void 0:P.devices)!=null?U:[],onClose:()=>d(!1)}),s.jsx(xp,{}),s.jsx("div",{className:"pb-2",children:M&&s.jsx(le,{children:s.jsx(ft,{label:e.formatMessage(re.deviceCodeAuthToggleLabel),description:s.jsx(p,v({},re.deviceCodeAuthToggleDescription)),enabled:!!h,disabled:a.isPending,isLoading:a.isPending,onChange:I=>{a.mutate({setting:ke.EnableDeviceCodeAuth,value:I})}})})})]})}function jM(){var _,b;const t=ce(),e=Y(),{data:n}=In(),a=ya(n),o=us(),i=Es($s.isBusinessWorkspace),l=Oe(t,"107120153"),d=ot(()=>Qd(t,ke.Birthday)),c=ot(()=>Jd(t)),r=Bt(),m=()=>{if(!a)return;const j=a.mustGetSubscriptionBillingCurrency("GlobalSettingsModal");nt(t,oM,{isOpen:!0,accountId:a.id,initialPlanType:a.data.subscriptionStatus.planType,updatedPlanType:a.data.subscriptionStatus.planType,billingDetails:{currency:j}})},g=()=>{a&&nt(t,Ui,{isOpen:!0,currentAccount:a,onClose:()=>{Ge.logEventWithStatsig("Cancel Subscription Modal Dismissed","chatgpt_cancel_subscription_modal_dismissed")},onClaimOfferButtonClicked:()=>{Ge.logEventWithStatsig("Cancel Subscription Modal Claim Offer Button Clicked","chatgpt_cancel_subscription_modal_claim_offer_offer_button_clicked"),ni(t,Ui),u()}})},u=()=>{a&&nt(t,Gi,{account:a,onBackButtonClicked:()=>{ni(t,Gi),g()}})},f=hM({account:a});let h=null;if(a&&f){const j=Eg({ctx:t}),y=fo({ctx:t}),M=ol({ctx:t});switch(f){case ut.FREE:h=s.jsx(jy,{});break;case ut.GO:h=s.jsx(Da,{currentAccount:a,onCancelSubscriptionClick:g,onRenewSubscriptionClick:m,pricingPlan:M});break;case ut.PLUS:h=s.jsx(Da,{currentAccount:a,onCancelSubscriptionClick:g,onRenewSubscriptionClick:m,pricingPlan:y});break;case ut.PRO:h=s.jsx(Da,{currentAccount:a,onCancelSubscriptionClick:g,onRenewSubscriptionClick:m,pricingPlan:j});break}}return s.jsxs(s.Fragment,{children:[s.jsxs(Ze,{title:e.formatMessage(re.accountTab),children:[l&&s.jsxs(s.Fragment,{children:[s.jsx(le,{children:s.jsx(Wd,{labelMessage:re.accountInfoNameLabel,value:(_=o==null?void 0:o.name)!=null?_:"",testId:"account-info-name"})}),s.jsx(le,{children:s.jsx(xn,{onClick:()=>{if(!(o!=null&&o.email)){nt(t,rM);return}nt(t,iM,{email:o.email})},label:s.jsx(p,v({},re.accountInfoEmailLabel)),stateLabel:o!=null&&o.email?o.email:e.formatMessage(re.accountInfoEmailAddAction),testId:"account-info-email"})})]}),h,Oe(t,"2444205802")&&s.jsxs(s.Fragment,{children:[s.jsx(le,{children:s.jsx(Gb,{email:(b=o==null?void 0:o.email)!=null?b:null})}),s.jsx(le,{children:s.jsx(Rb,{birthday:d!=null?d:null,userIsAdultData:c,onSave:j=>{var y;return r.mutateAsync({setting:ke.Birthday,value:j,account_id:(y=a==null?void 0:a.id)!=null?y:""})}})})]}),s.jsx(Iy,{}),!i&&s.jsx(le,{children:s.jsx(zt,{label:e.formatMessage(re.deleteAccount),buttonLabel:e.formatMessage(re.deleteAccountButton),color:"danger-outline",onClick:()=>{nt(t,gM)},"data-testid":"delete-account-button"})})]}),a&&s.jsx(ey,{})]})}function SM(){var r;const t=ce(),e=Kd(t).locale,n=Yd,a=(r=ei(()=>$d()))!=null?r:null,o=ei(()=>navigator.language),i=o==null?null:qd(o),l=S.useCallback(async m=>{try{await Xe.safePatch("/accounts/users/locale",{requestBody:{locale:m}})}catch(g){ts.addError(new Error("Failed to persist locale preference",{cause:g instanceof Error?g:void 0}))}},[]),d=[...new Set([a,i])].filter(m=>m!=null),c=n.filter(m=>!d.includes(m));return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(p,v({},re.locale))}),s.jsxs(dt.Root,{value:a!=null?a:"auto",onValueChange:m=>{Ge.logEvent("Locale Updated by User",{from_locale:e,to_locale:m,raw_browser_locale:o!=null?o:"",suggested_locale:i!=null?i:""}),pn.logEvent("chatgpt_locale_updated_by_user",m,{from_locale:e,to_locale:m,raw_browser_locale:o!=null?o:"",suggested_locale:i!=null?i:""}),(async()=>{const g=m==="auto"?null:m;await l(g),g===null?si(null):si(g)})()},children:[s.jsxs(dt.Trigger,{children:[s.jsx(dt.Value,{}),s.jsx(dt.Icon,{})]}),s.jsx(dt.Portal,{children:s.jsxs(dt.Content,{side:void 0,sideOffset:void 0,position:"item-aligned",children:[s.jsx(dt.Item,{value:"auto",children:s.jsx(p,v({},re.localeAuto))}),d.map(m=>{var g;return s.jsx(dt.Item,{value:m,children:(g=ti[m])!=null?g:m},m)}),s.jsx(dt.Separator,{}),c.map(m=>{var g;return s.jsx(dt.Item,{value:m,children:(g=ti[m])!=null?g:m},m)})]})})]})]})}function EM(){const t=Y(),e=ce(),n=Cs(),{pathname:a,hash:o,search:i}=n,l=ot(()=>Qo(e)),{closeSettings:d}=Zs(),c=S.useRef(!1);return S.useEffect(()=>{Ys(e)||!kd(o)||c.current||(c.current=!0,on(e,{callbackUrl:"".concat(a).concat(i).concat(o),fallbackScreenHint:"login",useFallbackScreenHint:!0}))},[e,o,a,i]),S.useEffect(()=>{pn.logEvent("chatgpt_unauthenticated_settings_modal_shown"),Ge.logEvent("Unauthenticated Settings Modal Shown")},[]),s.jsx(pt,{testId:"modal-settings-unauth",isOpen:!0,onClose:d,type:"success",showCloseButton:!0,title:t.formatMessage(re.settings),children:s.jsx(le,{children:s.jsx(ft,{label:t.formatMessage({id:"settingsModal.unauthChatTrainingToggleLabel",defaultMessage:"Improve the model for everyone"}),enabled:l,onChange:r=>{Qo.set(e,r),Ge.logEvent("No Auth Chat Training Toggled",{isEnabled:r})},description:s.jsx(p,{id:"rtxsI1",defaultMessage:"Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>.",values:{link:r=>s.jsx("a",{href:Vl,target:"_blank",className:"underline",rel:"noreferrer",children:r})}})})})})}function TM({onBack:t}){const e=Y(),n=ce(),a=Bt(!0),{data:o}=Ft(ke.EnableRemoteBrowserData),i=()=>{nt(n,Gl,{onDeleteBrowserContext:()=>Xe.safeDelete("/agent/browser_context",{})})};return s.jsxs(Ze,{title:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{"aria-label":e.formatMessage({id:"settingsModal.back",defaultMessage:"Back"}),onClick:t,className:"hover:bg-token-bg-tertiary -ms-1 rounded p-1",children:s.jsx(tM,{className:"icon-sm"})}),s.jsx("span",{children:e.formatMessage(re.remoteBrowserData)})]}),children:[s.jsx(le,{children:s.jsx(ft,{label:e.formatMessage(re.remoteBrowserDataKeepLabel),enabled:!!o,onChange:l=>{a.mutate({setting:ke.EnableRemoteBrowserData,value:l})},description:s.jsx(p,v({},re.remoteBrowserDataKeepDescription)),"data-testid":"remote-browser-data-toggle"})}),s.jsx(le,{children:s.jsx(zt,{color:"danger-outline",label:e.formatMessage(re.deleteBrowserContext),buttonLabel:e.formatMessage(re.deleteBrowserContextButton),onClick:i,"data-testid":"delete-browser-context-button"})})]})}function kM(){const t=ce(),{hash:e}=Cs(),{isOpen:n}=Zs(),a=!Ys(t),o=Pt(),i=Zd(e);return S.useEffect(()=>{if(n&&a&&i===He.Connectors){const l="".concat(window.location.pathname).concat(window.location.hash);o("/auth/login?next=".concat(encodeURIComponent(l)))}},[n,a,i,o]),n?a?s.jsx(EM,{}):s.jsx(yM,{}):null}function NM(){const t=Y(),[e]=fn(),n=gt(),a=e.get(cg),o=S.useMemo(()=>a==="true"?t.formatMessage({id:"ogcSBw",defaultMessage:"ChatGPT student offer activated"}):null,[a,t]);return S.useEffect(()=>{o&&n.success(o,{hasCloseButton:!0})},[o,n]),null}const wM=R(()=>L(()=>import("./nymwwtsb8uxucri0.js"),__vite__mapDeps([153,1,15,16,66,65,14,17])).then(t=>t.FannyPackModalContainer)),PM=R(()=>L(()=>import("./brfwhj2ts3oswpej.js"),__vite__mapDeps([154,1,15,16,14,17,155,156]))),AM=R(()=>L(()=>import("./ft9rfvh12efhjjba.js"),__vite__mapDeps([157,1,15,16,14,17])).then(t=>t.default));function IM(){"use forget";const t=_e.c(2),e=dn(DM);let n;return t[0]!==e?(n=e?s.jsx(PM,{serverThreadId:e}):null,t[0]=e,t[1]=n):n=t[1],n}function DM(t){return t.sharingModalThreadId}function OM(){var y,M;const t=dn(C=>C.purchaseWorkspaceData),e=dn(C=>C.leaveWorkspaceData),n=t!=null,a=Or(Ts.GlobalMemoryOnboarding),o=kt(),i=ce();Oe(i,"676035580"),nm();const l=km();Tg(n);const d=Pt(),{isOpen:c,defaultTab:r,defaultTabLoading:m}=Um(),{isFannyPackEnabled:g}=dg(i);Mg();const u=Xd(C=>C.researchShareIntent),{isEnabled:f}=sm(),[h]=fn(),_=h.get(Vr),b=ug(_!=null?_:""),j=_&&((M=(y=b.promoMetadata)!=null?y:b.promoError)!=null?M:b.isPromoLoading);return s.jsxs(s.Fragment,{children:[s.jsx(gg,{}),s.jsx(kM,{}),s.jsx(wm,{}),s.jsx(rf,{}),s.jsx(hm,{}),l&&s.jsx(Nm,{}),c&&o&&!j&&s.jsx(vg,{currentAccount:o,defaultTab:r,isDefaultTabLoading:m,onClose:()=>mg(d)},"all-plans-pricing-modal-".concat(r)),j&&o&&s.jsx(Am,{currentAccount:o,promotionData:b}),s.jsx(fg,{}),s.jsx(AM,{}),n&&s.jsx(kg,v({isOpen:n,onClose:()=>{cs.setPurchaseWorkspaceData(null),d({pathname:location.pathname,search:"",hash:""})}},t)),e&&s.jsx(om,{workspace:e}),a&&s.jsx(pg,{onClose:()=>cs.closeModal(Ts.GlobalMemoryOnboarding)}),g&&s.jsx(wM,{}),s.jsx(IM,{}),u&&s.jsx(fm,{taskId:u.taskId,messages:u.messages,threadId:u.threadId}),s.jsx(Mm,{}),f?s.jsx(NM,{}):null]})}const jC=Object.freeze(Object.defineProperty({__proto__:null,GlobalModalsComponent:OM},Symbol.toStringTag,{value:"Module"}));export{jC as G,_C as a,vC as b,re as m,eb as u};
//# sourceMappingURL=czndp739wd893pq6.js.map
