const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/b3ungmqo5x8kj4fh.js","assets/kfrdmkli83ureki3.js","assets/ip1a99ta06lqiwzj.js","assets/lu73hcy0eyoge4v0.js","assets/is2heqmyv1cd98qx.js","assets/ddaoveasmkugsi6h.js","assets/e94q0iitccatqzny.js","assets/f1e2b6n8g2blm1mk.js","assets/m58o5rj9uburgd29.js","assets/i6ahu3iuwhz5y2lv.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/bp7aioeryj7wbfac.js","assets/bdqubk4ywd0en7sc.js","assets/ci7lhbgv3s1kfbx6.js","assets/kbj1b07s2z6vxqkg.js","assets/hu1bt0oauegdhua6.js","assets/h1em0bjkpkjv8ykw.js","assets/i7t1qh3u8s8bvtb8.js","assets/gy1lpvuoewmzh42c.js","assets/dm8z7bzkrzic0zmg.js","assets/ipjj058rvhjq2uu2.js","assets/esgn9c4esm3mlqc4.js","assets/ab1440qk9vnud23e.js","assets/eahncmechdd0yy5s.js","assets/iyn42bfr1ydmech0.js","assets/kspsmo2l8jg7uqdj.js","assets/bpcuw1lkswzub019.js","assets/c09b3wnyb7ragkgg.js","assets/ddm6kppb0nh2wjan.js","assets/nz44s7ebe5b6pll5.js","assets/ler3ik0l0lgxpp03.js","assets/lrftmyomhnslqldf.js","assets/gsc4el4a1mly7vaf.js","assets/kfciwy69uk039ng9.js","assets/oydzwmbjqxhwp1ek.js","assets/g688vfij3wo711sf.js","assets/okzlvevr93wa1zvp.js","assets/d6c0uyk9gv3c7gwy.js","assets/n04o1mctwzj15yth.js","assets/laacu28tqafsw8cp.js","assets/oze22otsepdfaut5.js","assets/g8cpkydknwwj989v.js","assets/l3foo5601l7fb51e.js","assets/hnx3m6kxd7qfeifg.js","assets/hdkg0cys1b7b4f0v.js","assets/ia54sddtrl9qa2wj.js","assets/hn0hl0c8spo9mfdq.js","assets/ivcr7y2h4l13i5br.js","assets/isqpc56i7wx8h49k.js","assets/cra56oew4p77casj.js","assets/gducbep8qsfkuz9f.js","assets/bonby2i4xf93dev1.js","assets/fqy57c2iy2xliuz9.js","assets/foakg84w5wpjdwdx.js","assets/l92l17q6p2b89xpa.js","assets/e2qiox9wm3uaxg29.js","assets/mgt4kmm4im6a7le7.js","assets/mer2el06ski1l09m.js","assets/m3joncw451cqbul2.js","assets/lep2wptoy14cfe2w.js","assets/ehyvmdoziyg4axk8.js","assets/hoo89wr86agqpm13.js","assets/ejjzjfpdlx2v908r.js","assets/i8e4tsbcdrbcc668.js","assets/hgrkp82vl7wpvpuw.js","assets/gljkwjomy29v9c26.js","assets/oafyrulh7bq2qerb.js","assets/b4dmcdh59zl3olaw.js","assets/product-variants-gcznzbx5.css","assets/fey3pq4cxpkljcdg.js","assets/dd8hh2tmra1psngf.js","assets/f9w7j5yxpj8jmmro.js","assets/gz2kraed79kezjd0.js","assets/iiok29s29bpdre61.js","assets/aiiufwic7bdf3k4b.js","assets/lfpgz10qy2vdux3v.js","assets/giwakgarsud1rsxv.js","assets/nc8gen230lb13csi.js","assets/goxcf7vc701q04ob.js","assets/oyvo09ze11a90qsd.js","assets/zmq298rl93f7s2hn.js","assets/fux1oumbpb3w9e7e.js","assets/mo4f6niq6474ip4n.js","assets/ny16i6vydtz4gnvl.js","assets/i6j31imn3cki69v8.js","assets/dn55ejno9ewvlhxs.js","assets/pd4wtm7wtmrmmmqr.js","assets/pbjg7z6w7wj6b69y.js","assets/ansi-1f6vhsjh.css","assets/ccwkzjxugf5q7bsx.js","assets/c80q12olrn2ogvv0.js","assets/glg11vispnpcyq1s.js","assets/hzx9fvhly6v2qmjm.js","assets/jnr2ibp3zs9z7xhs.js","assets/hytzro4etxb8j4b5.js","assets/e7j9ia0bu5w3396k.js","assets/fx4g5niv8hgtkxju.js","assets/jhvofh4m5uva5wy3.js","assets/nvbtsxz152qyrww5.js","assets/ce3hgmw4iyyhicud.js","assets/me479l0dlgxhtxr0.js","assets/edhlcmww46h398kf.js","assets/de3ceoxcpky3ng0s.js","assets/cjv4tm2buxt5byw3.js","assets/gf4c0f98pdaqc94a.js","assets/idxukd613qgy7urm.js","assets/ft1wtuo4ibr3do9l.js","assets/fxythiulbb2q3qno.js","assets/kl7c6054usfnqmd4.js","assets/k97n0y6ba9c9h39c.js","assets/writing-block-focused-view-jhg5bjd7.css","assets/krqkx98dtny8rc4e.js","assets/b9tsn3f51rdwvzaj.js","assets/lsiyzz89iotypx8y.js","assets/fnm17yfijbvphy5g.js","assets/h5lqaaue6r5l2022.js","assets/ol9d5wxhynx9q2is.js","assets/lwq1uhykon6kdpgz.js","assets/fna9z31n721lpf9f.js","assets/table-components-iztk4amh.css","assets/FormattedText-fh8z7aev.css","assets/ailj2wmeuzip7d2v.js","assets/g842wk722jj3m7vq.js","assets/evrzv0yhdqda6wub.js","assets/kmh5vqrwfjuvl7dr.js","assets/btqzjxef0smsc2zx.js","assets/nbhzhbx6fr1xk0vm.js","assets/llxnsrn3cfujbemg.js","assets/ox03v4h6yt4mkym1.js","assets/lkxvbqgsq9u8m27e.js","assets/ldsa3r82d7xdb6ov.js","assets/lmlj1u04lgbh68m0.js","assets/myx1u0w5xt1aa2ml.js","assets/ggrj9mpupbpg92k0.js","assets/c5pm95go7wgn1yfn.js","assets/oi6j6iu5h3srk8zd.js","assets/e3eu2dzdizdbw00f.js","assets/h1ij87z8h3smwmah.js","assets/o350mbbkeahfd7yn.js","assets/kyzmzzgtaueiye6l.js","assets/o0j54eux3slox97p.js","assets/lur401x4nz6oqotk.js","assets/o53dfl5u400euisc.js","assets/dr1v3i80rkhviakg.js","assets/bya0tgas2bybcf45.js","assets/iz35nlf95x4k1pcg.js","assets/iwr3smf9emayvqcc.js","assets/k19zkhlbf7s6u5us.js","assets/l3z5gz1257zwquc2.js","assets/c23vrkf8h51nmu8w.js","assets/ezd0hym0jr36348y.js","assets/decxj0nfuivtbs7k.js","assets/nytsss2rto6p1kar.js","assets/kxu1gp8b3z2ozjpe.js","assets/mvqk0jsj23ovkg02.js","assets/jj7wmm5qo5qzg1m1.js","assets/lpy0q055i382xanc.js","assets/c8qz513xi61o87kz.js","assets/jc289srcgt4kpn3c.js","assets/dj4o13sb5g3xcmb3.js","assets/ii4wpa4hrkzspqol.js","assets/f371ag1u7jgitzn5.js","assets/otibmnf3wcwem3h5.js","assets/a7t2z9w3mxh5uner.js","assets/ny1kv4ggn7maxyzb.js","assets/ldblp2qq467fzutv.js","assets/d3u4n3d2otkvc852.js","assets/20q3iuutgud8fc8a.js","assets/fjpqjlv08i02xcat.js","assets/lofnqtpoo15yfpim.js","assets/uagvk69498d2kagr.js","assets/ii889c77tzp1fsld.js","assets/d8yt8dkeyw2i10n0.js","assets/oxp9fl5my018b2af.js","assets/cd4j0a8ftb7rofbi.js","assets/juy4s22sn689tqpq.js","assets/mpq6620swlx81941.js","assets/f3e3e0if4jix3vyn.js","assets/jhvfvrav7re5u2w1.js","assets/pes7awv5rcnazjq0.js","assets/j4p4w74o1oeu6aq1.js","assets/byhk9rdo4zj2h7y8.js","assets/gqy20yp8ouicffpb.js","assets/ufl1569g7nfrrv2b.js","assets/bllef8p3xhp1xolv.js","assets/ibe8nrmu3pupvrfv.js","assets/glxl4nz1rmynn05p.js","assets/f9xjishndyr2vb7y.js","assets/jqy8zfwhk6ptqvmj.js","assets/gdxlpnxrd91rpva8.js","assets/g7vuvm8u2dy012vs.js","assets/jm6z4m8r7320x7jr.js","assets/l2dc1a6f6pz6h0zz.js","assets/j5dxenc7f5mkx09f.js","assets/ehr8e46vjnw0vtn3.js","assets/e6tgogoygs27l1ey.js","assets/kw03hsqv96j7mp48.js","assets/e2qsug7cpoqmtswx.js","assets/dxjaf6qdyfvp7ro9.js","assets/khgwh2u5t1v9wux2.js","assets/cmy7kibwy58a01ix.js","assets/odtbrxkncka8brls.js","assets/mv59uia51hlqeiwb.js","assets/l4758d1q8in7mi6j.js","assets/d495ppjmiaba4smq.js","assets/kq30c8hkqjutcfht.js","assets/ol3xw5qndra1cjvx.js","assets/b1vl6tjy6g6n012n.js","assets/okl7sb11ljq0k719.js","assets/crl8f3ggvylz4ls6.js","assets/mxxk8a6tsnqbiapb.js","assets/kyyxlt80a527gl6x.js","assets/nlrge08q67ir6fyz.js","assets/eu0n4tcsxfc43xh4.js","assets/effczx7c6wukdepv.js","assets/incwaugrwq9u6ukb.js","assets/er12v6m875trrh25.js","assets/o8zk6g99n3l7p810.js","assets/erzdc1sy8jj0gwh1.js","assets/gskm8euf92v8tid9.js","assets/ja2qkf4baiwhlt1m.js","assets/juu7tdv10fpf0v4g.js","assets/bb4ej48vf8erpjle.js","assets/e3dkkco0b3958icx.js","assets/ftz93pccq70nox0a.js","assets/qu8ubkpitgs4u5zr.js","assets/kfdkis1zwf4ccfgg.js","assets/mbmcx8v24u1ao1ke.js","assets/dnpenovn9ku8sbs2.js","assets/iyoy7y29jyu5lcn2.js","assets/hfxtm5om7hr2tnqw.js","assets/62a1fj8wcavqvn87.js","assets/hxgirzyw7cjpprt3.js","assets/nivxefhsb1r0ag5t.js","assets/ikidg75a7ytoj1s1.js","assets/juhk9bg10nm4p27d.js","assets/ns51nblw8ziscsgd.js","assets/mywblj616r9yptxe.js","assets/mstl8wgfzorpgdoe.js","assets/cp40hb6p64z5j02r.js","assets/fxom17ahenhnb7xw.js","assets/deakbbf27g8e7ba0.js","assets/f86yt77iw8uocdb0.js","assets/mjysf44drisu4ssr.js","assets/bj1ejin6tzi0v3v8.js","assets/oqn9j41bt6i82zvt.js","assets/g4luqq3g92oxbbim.js","assets/pj0tlj9i65oz4g7u.js","assets/d8cmrw5lg3ncoab2.js","assets/n7wxdtzxeekb5r6v.js","assets/d8urt6z8czylb5p6.js","assets/bnipcvjraeep7qjy.js","assets/dvfjdfwc50k8htst.js","assets/oyksq1pvhzkxbrqr.js","assets/idxkrx2slxhzm8qh.js","assets/l9as1ndnevgs02tf.js","assets/l48iylqopn5miofx.js","assets/jwueg8vspq9yhps2.js","assets/e9c4tgzw8sr4ptnc.js","assets/hjef14qauats368u.js","assets/blthqd9nl25rhbvi.js","assets/dvib5d1jxvc518h5.js","assets/h48j4g76f726xzx4.js","assets/firqr8dqm1h7owx1.js","assets/kjvygvhx30u8mxny.js","assets/buq7rcr26b24qglf.js","assets/l9asex3m3rhov6mj.js","assets/icogg96ipnevhswg.js","assets/l4q37jna5u8671pr.js","assets/fo0x0epn1mhbz6yk.js","assets/kbwf70iamjdvta7y.js","assets/ba3v27n9os9eq40q.js","assets/naoaa24cgmdbcxxy.js","assets/lwiedwr35ag0he4r.js","assets/oda258a4iqmqo2yv.js","assets/cmgiklbz2ws6dyix.js","assets/duz09euqvesjqb1t.js","assets/m6idklazvjc7d344.js","assets/fwijeax9pw5s8qxf.js","assets/hipkq6lnzcpwyzq7.js","assets/b408wijcolxb1z67.js","assets/j81448c2c5whiu6c.js","assets/ADAVisualizationComponent-kv1hz405.css","assets/gdatzb2jbe3uxroz.js","assets/glgf3sl2j4mvtn59.js","assets/ffrotvb922yxp30i.js","assets/bwo20i0juyjiwskh.js","assets/omfzu6zlrauk9zdi.js","assets/o6iejiso3ne57s04.js","assets/ftbklkne5vchqwja.js","assets/idvmimdr84st2so4.js","assets/o0quqfjb2szj41iq.js","assets/net5f1925ssn3thy.js","assets/o2kvjcphiwxgrxo0.js","assets/ku3qnfz2eih7an2v.js","assets/fgnnkycj3ez3m5u7.js","assets/dbmhiqftlfabuure.js","assets/ef4orb4bcsix4ne6.js","assets/dvz93enk33kr6kwl.js","assets/i9bkgqmg6et5z0qc.js","assets/opxof2ldgc0aumvz.js","assets/l8s6hbjogkphba86.js","assets/hy1zav6qzw5abega.js","assets/coegk5d47rsglvgo.js","assets/bdfsdeky4mlgbyfk.js","assets/i63vgi3l2l0vhfen.js","assets/zhy6xcs8a6zch07h.js","assets/lrtd9knjab0hf8x5.js","assets/cus6e9b5l060ctey.js","assets/hzub286d2mnjgt50.js","assets/d4qsitgbpj3e1n6x.js","assets/leo4qb1u05uqhrab.js","assets/lruzrvi33w9z4jw7.js","assets/kyaj1drcq8ani22w.js","assets/go05rbhvvh9nvyl2.js","assets/kq4racjejm0744me.js","assets/nrepgto7in7c3ju5.js","assets/m0t07ixd92668z9e.js","assets/lg0oi3tmjv8kv2p4.js","assets/ny3gbedhp9u7gx6v.js","assets/fbdmxe5ygbrc3wdb.js","assets/evkgh503atu6x10z.js","assets/l4m29zus5vmyfglr.js","assets/hxiulybumx6oxiw9.js","assets/bq6b8bkp8ghtwa6g.js","assets/f36voarywa12jcnt.js","assets/njem4hkd3vzqk90b.js","assets/gn0yr6ivpbm62r9h.js","assets/my8gt8m1z63mib6t.js","assets/fw3ln85zsg8szaqb.js","assets/nhix0thqskc25i68.js","assets/hgosijqu5mbj1kgl.js","assets/bzr9wyyo1msigqkj.js","assets/l6g6inn3fet7dkcm.js","assets/hk404s80nkkano79.js","assets/iz9ybw36zj0rjajq.js","assets/1z12ka0sjzwi5bk4.js","assets/kmjljr0f5g55xi5s.js","assets/olx24ljq70j52gj6.js","assets/o2wqo63mhtvkjirm.js","assets/mj3cfg2f85rrc2rh.js","assets/mxg3f3sil9dynqw0.js","assets/d7nzu63howwrl3dl.js","assets/dxhrwa9msjjo4w51.js","assets/5bcdej51598lc3xr.js","assets/n6ajdtpejzhqnrex.js","assets/hk5ml9l4i4ups2ga.js","assets/fwbhrttgqnv5nm9m.js","assets/o5h7u1aikohecbkt.js","assets/w4rmhhxvug61xnae.js","assets/nh6x5pasrftsddpw.js","assets/c7lf6x6u521mpx19.js","assets/ydzvfm0toss4freg.js","assets/lcx1qzdvrvh4xmnf.js","assets/oppbmh012axflnpf.js","assets/cqj4tdcophnujsev.js","assets/om2umws0vlvjjj51.js","assets/h9a59xylvsn90ux6.js","assets/bc7tmzzosjt75txl.js","assets/ejd4bb0myatokvzs.js","assets/bzf7wmlorqd0v0qv.js","assets/dch45l9yrtbjo93p.js","assets/i5o8q29pfohjo085.js","assets/ea3j10kjv7ntyk1b.js","assets/m5o05xjhke8yaqmo.js","assets/e207r4ansyn2t3ve.js","assets/jrdfnldycz1vs00j.js","assets/hped4eg53je64yld.js","assets/dv0dvaedamxrvk5u.js","assets/nm8ilf9kbsyolp9f.js","assets/bxgk09qvxvkate6l.js","assets/oxmgj4amv4fazq4f.js","assets/gxmwe5tu80a6syuy.js","assets/i14budb41qztmmxp.js","assets/do0kdqk6x0fa68qx.js","assets/0gm9vowjt2kwou85.js","assets/jncziq1nczomb07p.js","assets/o0kdn9dsvj855pjy.js","assets/ll76ypq7mdcbhtdc.js","assets/hn96f4ur1sdmogyw.js","assets/oioy1sryt6z5x9kx.js","assets/hxyyvavb7iqj2z3e.js","assets/gzm1jxs289k6teg6.js","assets/je694u6n7mxuffnb.js","assets/m89x2zftpo6hrypr.js","assets/oprn23q7xw2h7eak.js","assets/kz0466kav0wlxeny.js","assets/dpf52wv18uwxh9t9.js","assets/fhiqz5jh4i8adn2f.js","assets/b61p2jrlkx9diop7.js","assets/lazh7fd24t88wsap.js","assets/d7ayto02yo7jqocx.js","assets/o8g67nlyg24uk9at.js","assets/m93ibzwrrpoc1bdm.js","assets/c326bjybavj646xd.js","assets/lwyag88acem9bm0o.js","assets/i0gpfefs37e3gwwl.js","assets/mq60ebbg8rx7y6z4.js","assets/koea7l5qbjcndn3s.js","assets/fbnp4n11buhgth4v.js","assets/nz3liyy52upbjeaw.js","assets/fz0860lkhp7je3od.js","assets/meym1wib9md0wcei.js","assets/j6yv5tyunone85r0.js","assets/j2fxxw8fjw5358xk.js","assets/c1jda78nitgsidb4.js","assets/kzowh6fnaz3z8ldi.js","assets/f1g778pkk2fhpy9x.js","assets/ctejkiukffhtkd40.js","assets/lc0x4d9r6tu0t28l.js","assets/joih9r2t62hj6gc6.js","assets/bed4i377b3t1bsof.js","assets/be0k5l79cn9kpvwt.js","assets/nudmd9gugqn68dov.js","assets/kbusob1kq5l0qrc1.js","assets/joa8jajuiu4xqpzn.js","assets/k5813xszuc7qopzc.js","assets/jzutzpqv1krrdtg5.js","assets/bbiazbzcqtq1xw6b.js","assets/omn9nfsnpjwo50x8.js","assets/drmwaklva7v056il.js","assets/bj2o1htuhytjg1ta.js","assets/byis8e009cwknczn.js","assets/gbvne18halyi17u1.js","assets/f538t4a72yr8mvhj.js","assets/m148ha1ozi8vz2cs.js","assets/ink8x3k66s63lr27.js","assets/comments-plugin-tah3dlup.css","assets/codemirror-g1j9yafs.css","assets/ifhsypom7qzhsv63.js","assets/prosemirror-egdr15sq.css","assets/l9jpvyecbss79r0n.js","assets/he1xnididjbc7s63.js","assets/i85urdvpkzpdgj3s.js","assets/kxw7q92iph67t48h.js","assets/oub30ufdqlfgcqjs.js","assets/odokf21e9yzx95dg.js","assets/jmj4kur2ey6a14ct.js","assets/b7yxnd6iunaqip5a.js","assets/e9rpltumxiot7uop.js","assets/i645xwusmfb9eqih.js","assets/luhdaml0ts1hcscs.js","assets/moa9hw4knutxpmay.js","assets/im8n91zlz29wyx3k.js","assets/lt3p9tbm4njlkdxy.js","assets/e2n6syult3e6hs2j.js","assets/b45jol6jjw62r4vk.js","assets/jr4rnsplty07ldd9.js","assets/i2fce51g7exmjyb6.js","assets/eblm0a618bl6wf18.js","assets/ib750dxmf2j0s8w3.js","assets/ohnma74ezw59jlv8.js","assets/79oriwozxkpwokzb.js","assets/hd8c06uahj4xlwsm.js","assets/euaq3qroi3mmil06.js","assets/d5bc8trtxeukg3jk.js","assets/mauhe4xggt6ulnl1.js","assets/kxiauyplvekf3qhc.js","assets/jalrxozsu1d7y5op.js","assets/fe6cdsv85astv3rx.js","assets/p6neiv37d8hk3lel.js","assets/dt7r1tuc81rn6vox.js","assets/mfltpwlb4iyi1q6i.js","assets/m7doe4pqk3hjrm1e.js","assets/d5o1u4o4wu2s3dug.js","assets/ghusiygna4o32qi1.js","assets/qsma96iq2r14xcmh.js","assets/h5j364hdjn039hzj.js","assets/h4evwzl4k6skj8r7.js","assets/c0ojy1t76yvdowjm.js","assets/kl9nc8lw2zbngsxu.js","assets/hegd51otv5xzo53u.js","assets/bknzejg1bftcxssf.js","assets/hig2jg8jtxy3himk.js","assets/d8oagvws6ho33alg.js","assets/luxqnz6j7d1xdl3t.js","assets/kgco101yg3lf47vy.js","assets/nlj7ey81i8rm36n9.js","assets/i9e855s7wyoxeff7.js","assets/dfw81cjd01zr8dcu.js","assets/gg4yvmc2n2kymxrf.js","assets/h3fuzfk2fgvggqan.js","assets/hanz3i2e98xohunm.js","assets/bjlkonebphl4hiqo.js","assets/km44ch1r0uf907fx.js","assets/fx3vo65j1l2o1ay3.js","assets/ggkkoiprbxqnv0r4.js","assets/ho9a4vsac4g3xh3d.js","assets/gcu688mmfk8ao20d.js","assets/lkxbuc3xjh9wuk8y.js","assets/hbl4emppcz7xmdaw.js","assets/gtszfryy8hllsxtu.js","assets/n2s4f8fk0mmpqlup.js","assets/h7yxptxa7cya0dam.js","assets/fc5s5wnfjm3vda54.js","assets/c6dhaujcud77o46h.js","assets/k68z30a1j9zr4phk.js","assets/emcmoa6z1wsa6qof.js","assets/be1f0w4doetbrndv.js","assets/nunatmpame7vjusr.js","assets/nvxri8mldbk6o2on.js","assets/hrprrmrs14hiemon.js","assets/n25jb1xrdrimv99m.js","assets/nm285usnll51g0n4.js","assets/c2da4gpayqesko65.js","assets/ckililxopth81755.js","assets/mj0406dyy526560j.js","assets/mqt6tyog32a32zx2.js","assets/dhbwqfnaau44fo68.js","assets/b865k9nv2k0vznof.js","assets/m3zxy9dyzl70pbky.js","assets/e6iqc9aa2rbtobl6.js","assets/m9mi9hq5de6arh0x.js","assets/p1oh54il7vkjezez.js","assets/izrw25jioqty508c.js","assets/kcrfstn8nf4rn51p.js","assets/et0kjfzq519mr3zi.js","assets/ck7ltodh2xzj12u2.js","assets/k08xcpxw1s54olyo.js","assets/ImageLightbox-j22hx8sz.css"])))=>i.map(i=>d[i]);
var H4=Object.freeze,G4=Object.defineProperty,V$=Object.defineProperties;var H$=Object.getOwnPropertyDescriptors;var Nm=Object.getOwnPropertySymbols;var W4=Object.prototype.hasOwnProperty,z4=Object.prototype.propertyIsEnumerable;var ec=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),c_=t=>{throw TypeError(t)};var l_=(t,e,n)=>e in t?G4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||(e={}))W4.call(e,n)&&l_(t,n,e[n]);if(Nm)for(var n of Nm(e))z4.call(e,n)&&l_(t,n,e[n]);return t},U=(t,e)=>V$(t,H$(e));var q4=t=>typeof t=="symbol"?t:t+"",ke=(t,e)=>{var n={};for(var s in t)W4.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&Nm)for(var s of Nm(t))e.indexOf(s)<0&&z4.call(t,s)&&(n[s]=t[s]);return n};var Q=(t,e,n)=>l_(t,typeof e!="symbol"?e+"":e,n),d_=(t,e,n)=>e.has(t)||c_("Cannot "+n);var Tn=(t,e,n)=>(d_(t,e,"read from private field"),n?n.call(t):e.get(t)),ro=(t,e,n)=>e.has(t)?c_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Pr=(t,e,n,s)=>(d_(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),Jt=(t,e,n)=>(d_(t,e,"access private method"),n);var ct=(t,e)=>H4(G4(t,"raw",{value:H4(e||t.slice())}));var Jn=function(t,e){this[0]=t,this[1]=e},Rr=(t,e,n)=>{var s=(i,l,c,d)=>{try{var u=n[i](l),f=(l=u.value)instanceof Jn,m=u.done;Promise.resolve(f?l[0]:l).then(p=>f?s(i==="return"?i:"next",l[1]?{done:p.done,value:p.value}:p,c,d):c({value:p,done:m})).catch(p=>s("throw",p,c,d))}catch(p){d(p)}},o=i=>a[i]=l=>new Promise((c,d)=>s(i,l,c,d)),a={};return n=n.apply(t,e),a[ec("asyncIterator")]=()=>a,o("next"),o("throw"),o("return"),a},u_=t=>{var e=t[ec("asyncIterator")],n=!1,s,o={};return e==null?(e=t[ec("iterator")](),s=a=>o[a]=i=>e[a](i)):(e=e.call(t),s=a=>o[a]=i=>{if(n){if(n=!1,a==="throw")throw i;return i}return n=!0,{done:!1,value:new Jn(new Promise(l=>{var c=e[a](i);c instanceof Object||c_("Object expected"),l(c)}),1)}}),o[ec("iterator")]=()=>o,s("next"),"throw"in e?s("throw"):o.throw=a=>{throw a},"return"in e&&s("return"),o},jo=(t,e,n)=>(e=t[ec("asyncIterator")])?e.call(t):(t=t[ec("iterator")](),e={},n=(s,o)=>(o=t[s])&&(e[s]=a=>new Promise((i,l,c)=>(a=o.call(t,a),c=a.done,Promise.resolve(a.value).then(d=>i({value:d,done:c}),l)))),n("next"),n("return"),e);import{c as G,q as es,u as jt,a as Hn,b as rt,d as ot,r as _,_ as P,g as Gn,j as r,M as j,e as be,m as G$,v as as,f as uh,h as ne,R as Kn,i as zt,k as W$,l as Ge,n as or,o as Us,s as Qy,L as Eo,p as z$,t as Tf,w as q$,x as Y$,y as Z$,$ as K$,z as QE,A as Pm,F as JE}from"./kfrdmkli83ureki3.js";import{c as Su,g as yt,a as xs,s as XE,b as Ci,u as V,d as ae,i as js,R as ge,A as nn,D as Re,T as mr,C as ns,e as Dt,f as In,h as Mf,j as ua,S as Zr,k as Ja,l as Ze,m as lo,n as wt,G as Rc,o as ex,p as Ut,q as eT,r as Cr,t as tT,v as nT,w as Es,x as jn,y as wl,z as hn,B as it,E as Q$,F as sT,H as Si,I as vd,J as ye,K as ef,L as mi,M as Ve,N as tt,O as ft,P as At,Q as wn,U as bd,V as he,W as Jc,X as Y4,Y as yn,Z as kl,_ as B,$ as Ie,a0 as je,a1 as J$,a2 as Xt,a3 as X$,a4 as Js,a5 as jp,a6 as Pe,a7 as Ye,a8 as fh,a9 as Xp,aa as bo,ab as dn,ac as eV,ad as tV,ae as nV,af as sV,ag as ps,ah as gs,ai as oV,aj as Cd,ak as ze,al as et,am as We,an as Jy,ao as ri,ap as aV,aq as tx,ar as rV,as as Vo,at as Ho,au as Ue,av as Pn,aw as ut,ax as pr,ay as Ke,az as R,aA as O,aB as _e,aC as Mt,aD as oT,aE as Af,aF as Be,aG as To,aH as St,aI as iV,aJ as Xc,aK as lV,aL as cV,aM as aT,aN as Qo,aO as If,aP as gt,aQ as dV,aR as rT,aS as Zt,aT as ii,aU as sn,aV as ed,aW as Lt,aX as Lc,aY as uV,aZ as $n,a_ as fV,a$ as mV,b0 as pV,b1 as Xy,b2 as gV,b3 as f_,b4 as pi,b5 as iT,b6 as hV,b7 as eg,b8 as lT,b9 as $s,ba as gr,bb as hr,bc as _V,bd as is,be as Xa,bf as Np,bg as e3,bh as Ln,bi as xV,bj as Z4,bk as bn,bl as Qs,bm as yV,bn as eo,bo as gi,bp as ts,bq as vV,br as lt,bs as hs,bt as Uu,bu as Ur,bv as mh,bw as bV,bx as ph,by as CV,bz as nx,bA as SV,bB as wV,bC as K4,bD as Sr,bE as Sa,bF as wu,bG as cT,bH as kV,bI as EV,bJ as gh,bK as hh,bL as TV,bM as MV,bN as AV,bO as t3,bP as El,bQ as Q4,bR as n3,bS as ls,bT as Jo,bU as dT,bV as jf,bW as uT,bX as tg,bY as IV,bZ as jV,b_ as NV,b$ as J4,c0 as wi,c1 as PV,c2 as fT,c3 as RV,c4 as xo,c5 as sx,c6 as Nf,c7 as ys,c8 as ki,c9 as On,ca as s3,cb as o3,cc as LV,cd as a3,ce as Oc,cf as r3,cg as _h,ch as Go,ci as ms,cj as mT,ck as OV,cl as pT,cm as Pf,cn as ng,co as Qn,cp as il,cq as _t,cr as xh,cs as Mo,ct as Xo,cu as os,cv as mt,cw as Ao,cx as DV,cy as W,cz as Tl,cA as to,cB as FV,cC as yh,cD as _r,cE as gT,cF as Ml,cG as vh,cH as Dn,cI as fn,cJ as Rt,cK as i3,cL as bh,cM as l3,cN as hT,cO as _T,cP as xT,cQ as yT,cR as vT,cS as bT,cT as CT,cU as ST,cV as BV,cW as Ch,cX as wT,cY as Sh,cZ as kT,c_ as UV,c$ as $V,d0 as VV,d1 as $u,d2 as wh,d3 as m_,d4 as qo,d5 as wa,d6 as ET,d7 as ox,d8 as Xi,d9 as Al,da as rs,db as Ns,dc as HV,dd as GV,de as WV,df as ax,dg as pt,dh as kh,di as zV,dj as Ps,dk as cn,dl as TT,dm as Il,dn as jl,dp as Rf,dq as qV,dr as Sd,ds as YV,dt as c3,du as d3,dv as wd,dw as u3,dx as f3,dy as tf,dz as ZV,dA as KV,dB as m3,dC as QV,dD as xr,dE as kd,dF as MT,dG as JV,dH as AT,dI as nf,dJ as XV,dK as eH,dL as Nl,dM as Rn,dN as Lf,dO as p3,dP as ea,dQ as gn,dR as Xe,dS as tH,dT as Cn,dU as IT,dV as Of,dW as Cc,dX as pa,dY as Wo,dZ as bt,d_ as mn,d$ as g3,e0 as jT,e1 as h3,e2 as Df,e3 as _3,e4 as NT,e5 as kt,e6 as _s,e7 as Ei,e8 as PT,e9 as Xn,ea as nH,eb as RT,ec as LT,ed as Ed,ee as Rm,ef as sg,eg as OT,eh as Eh,ei as sH,ej as wr,ek as Td,el as oH,em as aH,en as rH,eo as sf,ep as x3,eq as y3,er as Vs,es as DT,et as iH,eu as lH,ev as Th,ew as v3,ex as cH,ey as FT,ez as BT,eA as td,eB as dH,eC as uH,eD as Yo,eE as UT,eF as p_,eG as Y,eH as nd,eI as X4,eJ as Md,eK as ta,eL as $T,eM as fH,eN as of,eO as mH,eP as Ff,eQ as VT,eR as HT,eS as Wn,eT as pH,eU as Co,eV as GT,eW as Mh,eX as WT,eY as b3,eZ as So,e_ as gH,e$ as hH,f0 as _H,f1 as kr,f2 as An,f3 as og,f4 as As,f5 as af,f6 as xH,f7 as Kt,f8 as e6,f9 as C3,fa as zT,fb as Bf,fc as qT,fd as Er,fe as yH,ff as S3,fg as YT,fh as ZT,fi as Ah,fj as vH,fk as KT,fl as QT,fm as JT,fn as w3,fo as XT,fp as e8,fq as ll,fr as k3,fs as bH,ft as E3,fu as _l,fv as Ad,fw as Uf,fx as zi,fy as t8,fz as CH,fA as SH,fB as T3,fC as Ih,fD as wH,fE as M3,fF as Pl,fG as kH,fH as EH,fI as A3,fJ as n8,fK as TH,fL as Ss,fM as Id,fN as s8,fO as I3,fP as ku,fQ as MH,fR as AH,fS as IH,fT as jH,fU as NH,fV as jh,fW as PH,fX as RH,fY as LH,fZ as OH,f_ as $f,f$ as o8,g0 as DH,g1 as Oo,g2 as Nh,g3 as Ph,g4 as Lm,g5 as ds,g6 as j3,g7 as FH,g8 as Vf,g9 as N3,ga as BH,gb as jd,gc as a8,gd as r8,ge as i8,gf as t6,gg as l8,gh as Rl,gi as fo,gj as c8,gk as UH,gl as P3,gm as $H,gn as VH,go as HH,gp as GH,gq as WH,gr as d8,gs as R3,gt as zH,gu as qH,gv as L3,gw as rx,gx as O3,gy as D3,gz as YH,gA as u8,gB as f8,gC as F3,gD as m8,gE as ZH,gF as B3,gG as p8,gH as ba,gI as KH,gJ as QH,gK as JH,gL as g8,gM as U3,gN as XH,gO as Ca,gP as eG,gQ as tG,gR as nG,gS as sG,gT as oG,gU as aG,gV as rG,gW as iG,gX as En,gY as lG,gZ as cG,g_ as dG,g$ as uG,h0 as fG,h1 as h8,h2 as mG,h3 as pG,h4 as _8,h5 as gG,h6 as hG,h7 as $3,h8 as _G,h9 as xG,ha as x8,hb as yG,hc as vG,hd as bG,he as CG,hf as V3,hg as Rh,hh as n6,hi as s6,hj as SG,hk as Nd,hl as g_,hm as H3,hn as Lh,ho as Oh,hp as wG,hq as ix,hr as rf,hs as kG,ht as EG,hu as Ll,hv as TG,hw as ag,hx as MG,hy as y8,hz as Dh,hA as AG,hB as wo,hC as IG,hD as jG,hE as v8,hF as G3,hG as ar,hH as b8,hI as no,hJ as NG,hK as C8,hL as PG,hM as Na,hN as RG,hO as Ts,hP as W3,hQ as Fh,hR as z3,hS as LG,hT as S8,hU as Om,hV as OG,hW as DG,hX as FG,hY as BG,hZ as w8,h_ as li,h$ as k8,i0 as Vu,i1 as E8,i2 as UG,i3 as T8,i4 as $G,i5 as rr,i6 as Hf,i7 as M8,i8 as A8,i9 as VG,ia as rg,ib as HG,ic as GG,id as WG,ie as zG,ig as Eu,ih as q3,ii as qG,ij as Y3,ik as Z3,il as Bt,im as lx,io as I8,ip as YG,iq as ka,ir as ZG,is as Ea,it as KG,iu as K3,iv as QG,iw as Bh,ix as lf,iy as Q3,iz as JG,iA as XG,iB as j8,iC as hi,iD as _a,iE as cl,iF as eW,iG as o6,iH as tW,iI as nW,iJ as sW,iK as Kr,iL as J3,iM as oW,iN as aW,iO as rW,iP as Pd,iQ as iW,iR as lW,iS as cW,iT as dW,iU as uW,iV as fW,iW as mW,iX as pW,iY as gW,iZ as Uh,i_ as Gt,i$ as hW,j0 as _W,j1 as N8,j2 as X3,j3 as xW,j4 as Rd,j5 as yW,j6 as ir,j7 as dl,j8 as P8,j9 as Ol,ja as vW,jb as ev,jc as bW,jd as R8,je as CW,jf as SW,jg as Gf,jh as wW,ji as kW,jj as L8,jk as EW,jl as TW,jm as MW,jn as tc,jo as a6,jp as Dl,jq as el,jr as AW,js as IW,jt as jW,ju as $h,jv as tv,jw as r6,jx as O8,jy as nv,jz as D8,jA as NW,jB as Pt,jC as sv,jD as PW,jE as sd,jF as od,jG as ov,jH as RW,jI as LW,jJ as F8,jK as h_,jL as __,jM as OW,jN as av,jO as DW,jP as FW,jQ as BW,jR as UW,jS as B8,jT as yo,jU as $W,jV as Ft,jW as ha,jX as ad,jY as VW,jZ as HW,j_ as GW,j$ as WW,k0 as ig,k1 as U8,k2 as zW,k3 as rv,k4 as qW,k5 as YW,k6 as ZW,k7 as so,k8 as KW,k9 as QW,ka as JW,kb as XW,kc as $8,kd as ez,ke as V8,kf as iv,kg as tz,kh as Ti,ki as Ta,kj as nz,kk as Mi,kl as Mn,km as sz,kn as lv,ko as cv,kp as oz,kq as az,kr as dv,ks as rz,kt as H8,ku as G8,kv as Pp,kw as uv,kx as W8,ky as z8,kz as q8,kA as Wf,kB as iz,kC as fv,kD as lz,kE as Y8,kF as Sc,kG as cz,kH as dz,kI as uz,kJ as fz,kK as mz,kL as pz,kM as gz,kN as hz,kO as Vh,kP as _z,kQ as i6,kR as lg,kS as xz,kT as yz,kU as vz,kV as bz,kW as Cz,kX as Z8,kY as Sz,kZ as wz,k_ as K8,k$ as kz,l0 as Ez,l1 as x_,l2 as mv,l3 as Q8,l4 as pv,l5 as Tz,l6 as Mz,l7 as Az,l8 as Iz,l9 as J8,la as X8,lb as eM,lc as jz,ld as Nz,le as gv,lf as l6,lg as cx,lh as Ld,li as Pz,lj as hv,lk as Rz,ll as Lz,lm as _v,ln as tM,lo as Oz,lp as cf,lq as Dz,lr as nM,ls as c6,lt as Fz,lu as sM,lv as oM,lw as aM,lx as Bz,ly as Uz,lz as $z,lA as Vz,lB as Hz,lC as Gz,lD as rM,lE as Wz,lF as zz,lG as qz,lH as xv,lI as iM,lJ as Yz,lK as Dm,lL as Li,lM as Zz,lN as vo,lO as Hh,lP as Kz,lQ as Qz,lR as Jz,lS as Xz,lT as Gh,lU as lM,lV as Fm,lW as eq,lX as tq,lY as nq,lZ as cM,l_ as sq,l$ as cg,m0 as na,m1 as sa,m2 as dM,m3 as d6,m4 as oq,m5 as u6,m6 as aq,m7 as f6,m8 as rq,m9 as iq,ma as lq,mb as cq,mc as dq,md as uq,me as fq,mf as mq,mg as m6,mh as pq,mi as uM,mj as gq,mk as fM,ml as mM,mm as hq,mn as Zi,mo as _q,mp as pM,mq as xq,mr as yq,ms as Bm,mt as vq,mu as yv,mv as bq,mw as Cq,mx as Wt,my as gM,mz as Sq,mA as wq,mB as y_,mC as kq,mD as Eq,mE as hM,mF as Tq,mG as Mq,mH as Aq,mI as Iq,mJ as jq,mK as Nq,mL as Pq,mM as Rq,mN as Lq,mO as Oq,mP as dx,mQ as _M,mR as Dq,mS as Fq,mT as Bq,mU as xM,mV as p6,mW as Uq,mX as $q,mY as Vq,mZ as Um,m_ as Hq,m$ as Gq,n0 as Wq,n1 as yM,n2 as zq,n3 as vM,n4 as qq,n5 as ux,n6 as Yq,n7 as Zq,n8 as v_,n9 as Tu,na as tu,nb as g6,nc as Kq,nd as Qq,ne as Jq,nf as b_,ng as h6,nh as Xq,ni as eY,nj as bM,nk as tY,nl as nY,nm as $m,nn as vv,no as sY,np as oY,nq as aY,nr as _6,ns as rY,nt as CM,nu as x6,nv as Oi,nw as nc,nx as iY}from"./kw08ajijqinojrwh.js";const lY=t=>{const e=Object.entries(t.mapping).find(([n])=>n==="");if(e!==void 0){const n=Su(t),[,s]=e,o=s.children;n.mapping["client-created-root"]=U(w({},s),{id:"client-created-root"}),delete n.mapping[""];for(const a of o)n.mapping[a].parent="client-created-root";return n}return t},UHe=t=>(t.parent_message_id==="client-created-root"&&delete t.parent_message_id,t),bv={};function $He(t,e){bv[t]=e}function cY(t){var e;return(e=bv[t])!=null?e:null}function SM(t){return t in bv}const Wh=t=>{"use forget";const e=G.c(3),n=V();let s;return e[0]!==n||e[1]!==t?(s=()=>{if(t===void 0)return null;const o=yt(n,t);return Ci(o)},e[0]=n,e[1]=t,e[2]=s):s=e[2],ae(s)},Cv=(t,e)=>{const n=yt(t,e);return Ci(n)},Is=(t,e)=>{const n=yt(xs(),t);XE(n,e)};async function Ma(t,e={}){const n=cY(t),s={};e.projectId&&js(e.projectId)&&(s["chatgpt-project-id"]=e.projectId,e.ownerUserId&&(s["chatgpt-conv-owner-id"]=e.ownerUserId));const o=n!=null?n:await ge.safeGet("/conversation/{conversation_id}",w({parameters:{path:{conversation_id:t}},intercomEventOnError:"fetch-error:conversations:get",authOption:nn.SendIfAvailable},s?{additionalHeaders:s}:{}));n||Re.addTiming("chatgpt.web.chatPage.loadExistingConversation");const a=lY(o);return mr.updateThreadFromServer(t,a,{skipIfExisting:e==null?void 0:e.skipIfExisting}),Is(a.conversation_id,a.async_status?{source:ns.SERVER,value:a.async_status}:null),a}const zh=o=>{var a=o,{clientThreadId:t,alwaysForceUpdate:e=!1,onError:n}=a,s=ke(a,["clientThreadId","alwaysForceUpdate","onError"]);return es({queryKey:["conversation",t],queryFn:()=>Ma(t,U(w({},s),{skipIfExisting:!e})).catch(i=>{throw n==null||n(i),i})})},df=Dt(In(()=>null)),_i={updateDetails:t=>{["beacon_banner_info","beacon_modal_info","beacon_container_info"].includes(t.ui_info.type)&&df.setState(()=>w({},t),!0)},dismiss:()=>{df.setState(()=>null,!0)}};function Sv(){return df(t=>(t==null?void 0:t.ui_info.type)==="beacon_banner_info"?t:null)}function dY(){return df(t=>(t==null?void 0:t.ui_info.type)==="beacon_modal_info"?t:null)}function uY(){"use forget";return df(fY)}function fY(t){return(t==null?void 0:t.ui_info.type)==="beacon_container_info"?t:null}function Vm(t){t&&t.danger("Failed to copy to clipboard.",{duration:4,hasCloseButton:!0,toastId:"copy_to_clipboard_failed_to_copy"})}function Zo(t,e,n){var o,a,i;const{navigator:s}=(i=(a=(o=n==null?void 0:n.target)==null?void 0:o.ownerDocument)==null?void 0:a.defaultView)!=null?i:window;return new Promise((l,c)=>{var d;if(!(s!=null&&s.clipboard)){Vm(e),c();return}try{if("write"in s.clipboard&&"supports"in ClipboardItem){const u=Object.entries(typeof t=="string"?{"text/plain":t}:t).map(([m,p])=>[m,typeof p=="string"?new Blob([p],{type:m}):p]);if(u.length===0){l("success");return}const f=new ClipboardItem(Object.fromEntries(u));s.clipboard.write([f]).then(()=>l("success"),()=>{Vm(e),c()})}else{const u=typeof t=="string"?t:(d=t["text/plain"])!=null?d:"";s.clipboard.writeText(u).then(()=>l("success"),()=>{Vm(e),c()})}}catch(u){Vm(e),c()}})}function mY(t,e){returnwindow.location.origin.concat(Mf(t,e))}async function VHe(t,e,n,s,o){await Zo(mY(t,e),n,s),o&&n.info(o,{id:"gizmo-copy-url",testId:"copy-gizmo-url-toast"})}function wM(t){return t.some(e=>e.type===ua.JIT_PLUGIN)}function kM(t){var e;return"gizmo_id"in t&&(e=t.gizmo_id)!=null?e:null}function HHe(t){var e,n,s,o,a,i,l,c,d,u,f,m;return{id:t.gizmo.id,instructions:t.gizmo.instructions,name:t.gizmo.display.name,description:(e=t.gizmo.display.description)!=null?e:"",emoji:(n=t.gizmo.display.emoji)!=null?n:void 0,theme:(s=t.gizmo.display.theme)!=null?s:void 0,profilePictureId:(o=t.gizmo.display.profile_pic_id)!=null?o:void 0,profilePictureUrl:(a=t.gizmo.display.profile_picture_url)!=null?a:void 0,promptStarters:(i=t.gizmo.display.prompt_starters)!=null?i:[],tools:Su(t.tools),files:Su(t.files),sharing:t.gizmo.sharing?Su(t.gizmo.sharing):{subjects:[],recipient:t.gizmo.share_recipient},trainingDisabled:(l=t.gizmo.training_disabled)!=null?l:!1,goal:(c=t.gizmo.goal)!=null?c:void 0,memoryScope:(d=t.gizmo.memory_scope)!=null?d:Rc.UNSET,sharingRecipient:t.gizmo.share_recipient,sharingTargets:Su(t.gizmo.sharing_targets),liveVersion:(u=t.gizmo.live_version)!=null?u:0,contextStuffingBudget:t.gizmo.context_stuffing_budget,defaultModel:(f=t.gizmo.default_model)!=null?f:void 0,firstPartyProjectType:(m=t.gizmo.gizmo_snorlax_type)!=null?m:null}}function pY(t){return t===Rc.GLOBAL||t===Rc.UNSET||t===Rc.PROJECT}function GHe(t){return pY(t)?Rc.GLOBAL:Rc.PROJECT_V2}function Mu(t,e){return n=>n?U(w({},n),{pages:n.pages.map((s,o)=>o===0?U(w({},s),{items:[t,...s.items]}):s)}):{pages:[e],pageParams:[]}}function Au(t){return e=>e&&U(w({},e),{pages:e.pages.map(n=>U(w({},n),{items:n.items.filter(s=>s.id!==t)}))})}function gY({queryClient:t,newGizmoId:e,conversation:n,previousGizmoId:s}){const o=[],a=n.gizmo_id;return n.gizmo_id=e,o.push(()=>{n.gizmo_id=a}),e?(t.setQueryData([Zr,{gizmoId:e}],Mu(n,{items:[n],cursor:null})),o.push(()=>{t.setQueryData([Zr,{gizmoId:e}],Au(n.id))})):(t.setQueryData([Ja],Mu(n,{items:[n],total:1,limit:ex,offset:0})),o.push(()=>{t.setQueryData([Ja],Au(n.id))})),s?(t.setQueryData([Zr,{gizmoId:s}],Au(n.id)),o.push(()=>{t.setQueryData([Zr,{gizmoId:s}],Mu(n,{items:[n],cursor:null}))})):(t.setQueryData([Ja],Au(n.id)),o.push(()=>{t.setQueryData([Ja],Mu(n,{items:[n],total:1,limit:ex,offset:0}))})),Ze(n.id,i=>{i.mode=lo(y6(e))}),o.push(()=>{Ze(n.id,i=>{i.mode=lo(y6(a!=null?a:null))})}),()=>{o.forEach(i=>i())}}function y6(t){return t?{kind:wt.GizmoInteraction,gizmo_id:t}:{kind:wt.PrimaryAssistant}}const v6=t=>["conversation","init",t],hY=({clientThreadId:t,conversationMode:e,clientModelId:n,enabled:s},o,a,i)=>{var f;const l=kM(e),d=(f=new URLSearchParams(i).get(eT))!=null?f:void 0,u=Cr(t)?null:t;return{gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:"always",queryKey:v6(t),queryFn:()=>{let m=ge.safePost("/conversation/init",{requestBody:{gizmo_id:l,requested_default_model:n,conversation_id:u,timezone_offset_min:new Date().getTimezoneOffset(),conversation_owner_id:d},authOption:nn.SendIfAvailable});return m=m.then(p=>(o.getQueryData(v6(t))&&tT(p)&&o.invalidateQueries({queryKey:nT()}),p)),m},enabled:s&&!SM(t)}},_Y=t=>{const e=jt(),n=Ut(),{search:s}=Hn();return rt(hY(t,e,n,s))};function WHe(){const t=Hn();return MM(t.pathname)}function EM(t){const n=new URL("http://example.com".concat(t)).pathname.match(/\/g\/(g-p-[\w\d-]+)/);if(n)return n[1]}function TM(t){const e=t.split("-");return e.length>1&&e[0]==="g"?(e==null?void 0:e[1])==="p"?"g-p-".concat(e[2]):"g-".concat(e[1]):e[0]}function MM(t){const e=EM(t);if(e)return TM(e)}function zHe({gizmoId:t,pathname:e}){const n=b6(e),s=EM(e),o=s?TM(s):void 0;o&&t&&js(t)&&t!==o&&console.warn("Project slug/id mismatch",{gizmoId:t,projectIdFromSlug:o,pathname:e});const a=o!=null?o:js(t)?t:void 0,i=s!=null?s:a,l=i!=null?"/g/".concat(i,"/project"):void 0,c=l!=null&&b6(l)===n;return{projectIdForNewChat:a,projectHomePath:l,isOnProjectHomeView:c}}function qHe(t,e){return e==null?t:{newConversationConfig:U(w({},t==null?void 0:t.newConversationConfig),{urlGizmoId:e})}}function b6(t){return t.replace(/\/+$/,"")}const xY=t=>{"use forget";var x;const e=G.c(23),n=ot(),{pathname:s,search:o}=Hn(),a=Es(),i=Ut(),l=jn(hn),c=wl();let d,u,f;if(e[0]!==t||e[1]!==l||e[2]!==c||e[3]!==n||e[4]!==s||e[5]!==o||e[6]!==i){const v=c||SM(t);d=c;const y=new URLSearchParams(o),b=MM(s),C=(x=y.get(eT))!=null?x:void 0;f=rt;let S;e[10]!==t||e[11]!==l||e[12]!==n||e[13]!==s||e[14]!==i?(S=k=>{if(l)it.wantsNewConversation$.set(!0),it.selectedConversationId$.set(void 0);else{const E=Q$(s),T=E!=null?sT(E):"/";n(T)}i.danger("Unable to load conversation ".concat(t),{testId:"conversation-fetch-error-toaster",toastId:"use_fetch_conversation_failed_to_load_conversation"})},e[10]=t,e[11]=l,e[12]=n,e[13]=s,e[14]=i,e[15]=S):S=e[15],u=zh({clientThreadId:t,alwaysForceUpdate:v,projectId:b,ownerUserId:C,onError:S}),e[0]=t,e[1]=l,e[2]=c,e[3]=n,e[4]=s,e[5]=o,e[6]=i,e[7]=d,e[8]=u,e[9]=f}else d=e[7],u=e[8],f=e[9];let m;e[16]!==t||e[17]!==a?(m=!Cr(t)&&!a,e[16]=t,e[17]=a,e[18]=m):m=e[18];const p=d?"always":!1;let g;e[19]!==u||e[20]!==m||e[21]!==p?(g=U(w({},u),{enabled:m,refetchOnMount:!0,refetchOnWindowFocus:p}),e[19]=u,e[20]=m,e[21]=p,e[22]=g):g=e[22];const{data:h}=f(g);return h},yY=(t,e,n)=>{const s=V(),o=jn(hn),a=e.kind===wt.GizmoInteraction?e.gizmo_id:null,{data:i}=Si(a!=null?a:void 0),c=a&&js(a)&&!i;xY(t);const{session:d}=vd(s),u=ye(s,"544083113");_.useEffect(()=>{var p,g;mr.initThread({clientThreadId:t,conversationMode:e,userId:(p=d==null?void 0:d.user)==null?void 0:p.id,accountId:(g=d==null?void 0:d.account)==null?void 0:g.id,skipFollowupMcpCheck:u}),ef.reset(),_i.dismiss()},[t]),_.useEffect(()=>{n!=null&&n.shouldScrollToBottom&&Ze(t,p=>{p.scrollToMessageId="finalAgentTurn"})},[t,n==null?void 0:n.shouldScrollToBottom]),_.useEffect(()=>{n!=null&&n.disableConversationNavigation&&Ze(t,p=>{p.disableConversationNavigation=n.disableConversationNavigation})},[t,n==null?void 0:n.disableConversationNavigation]);const{isLoading:f,data:m}=_Y({clientThreadId:t,clientModelId:null,conversationMode:e,enabled:!c});_.useEffect(()=>{if(f||!m||o)return;const{default_model_slug:p}=m,g=p;ef.updateDetails(m),g&&Ze(t,h=>{h.defaultModelId=g})},[f,m,o])},vY=_.createContext(()=>Promise.resolve()),qh=_.createContext(null),Yh=()=>_.useContext(qh)!=null;_.createContext({onDismount:()=>{}});var Je=(t=>(t.Starter="starter",t.Reply="reply",t.Capabilities="capabilities",t.Autocomplete="autocomplete",t.Trending="trending",t.Templated="templated",t))(Je||{}),Sn=(t=>(t.Search="Search",t.Canvas="Canvas",t.Image="Image",t.ContextualAnswers="ContextualAnswers",t.ContextualAnswersNUX="ContextualAnswersNUX",t.ChatGPTTrending="ChatGPTTrending",t.ImageGenTrending="ImageGenTrending",t.Slurm="Slurm",t.Tatertot="Tatertot",t.Glaux="Glaux",t.TemplatedPrompts="TemplatedPrompts",t))(Sn||{});async function wv(t){const e=await P(()=>import("./b3ungmqo5x8kj4fh.js").then(n=>n.i),__vite__mapDeps([0,1]));if(Jc!=null&&(t!=null&&t.startsWith(Jc)))return!0;try{return e.get(new URL(t!=null?t:"").hostname)==="openai.com"}catch(n){return!1}}function kv(t,e,n){return ge.safeGet("/conversation/{conversation_id}/url_safe",{parameters:{path:{conversation_id:t},query:{url:e,history_and_training_disabled:n}}})}function bY(t,e){const n=V(),s=ae(()=>bd(n)),o=!tt(n);return rt({queryKey:["safe-url",{serverThreadId:t,url:e,isHistoryAndTrainingDisabled:s}],queryFn:async()=>{if(t==null||e==null)throw new Error("Unexpected falsey useSafeUrlQuery");return await wv(e)||he.isThreadUrlSafe(ft(t),e)?{safe:!0}:o?{safe:!1}:kv(t,e,s)},enabled:t!=null&&e!=null})}function CY(t,e,n=!0){const s=Ve(t,a=>e!=null&&he.isThreadUrlSafe(a,e)),{data:{safe:o}={}}=bY(t,s?void 0:e);return s||o||!n?e:void 0}function YHe(t,e,n=!0){const s=SY(e,500);return CY(t,s,n)}function SY(t,e){const[n,s]=_.useState(void 0),[o]=_.useState(()=>mi(a=>{s(a)},e));return _.useEffect(()=>{o(t)},[o,t]),n===t?t:void 0}function ZHe(t,e){const n=V(),s=ae(()=>bd(n)),o=Ve(t,i=>{var l;return(l=i==null?void 0:i.safeUrls)!=null?l:[]}),{data:a=[]}=rt({queryKey:["safe-urls",t,e,s,o],queryFn:async()=>{const i=o.filter(u=>e.includes(u)),l=e.filter(u=>!i.includes(u)),d=(await Promise.allSettled(l.map(async u=>{if(await wv(u))return u;if(t==null)return null;try{return(await kv(t,u,s)).safe?u:null}catch(m){return null}}))).map(u=>u.status==="fulfilled"?u.value:null).filter(u=>u!=null);return i.concat(d)},enabled:t!=null&&e.length>0});return a}async function wY(t,e){const{isKnownSafeUrl:n,isUrlMarkedSafeInThread:s,serverCheck:o,isHistoryAndTrainingDisabled:a}=e,i=t.filter(f=>!s(f));if(i.length===0)return[];const l=await Promise.all(i.map(f=>n(f))),c=i.filter((f,m)=>!l[m]);if(c.length===0)return[];if(!o)return c;const d=await Promise.allSettled(c.map(async f=>{try{return await o(f,a)?null:f}catch(m){return f}})),u=[];return d.forEach((f,m)=>{const p=c[m];f.status==="fulfilled"?typeof f.value=="string"&&u.push(f.value):u.push(p)}),u}function kY(t,e,n){const s=ft(e),o=At(e);return wY(n,{isKnownSafeUrl:wv,isUrlMarkedSafeInThread:a=>he.isThreadUrlSafe(s,a),serverCheck:o!=null?async(a,i)=>(await kv(o,a,i)).safe:void 0,isHistoryAndTrainingDisabled:wn(()=>bd(t))})}const KHe=_.createContext(void 0),EY=/#/g,TY=/&/g,MY=/\//g,AY=/=/g,Ev=/\+/g,IY=/%5e/gi,jY=/%60/gi,NY=/%7c/gi,PY=/%20/gi;function RY(t){return encodeURI(""+t).replace(NY,"|")}function fx(t){return RY(typeof t=="string"?t:JSON.stringify(t)).replace(Ev,"%2B").replace(PY,"+").replace(EY,"%23").replace(TY,"%26").replace(jY,"`").replace(IY,"^").replace(MY,"%2F")}function C_(t){return fx(t).replace(AY,"%3D")}function AM(t=""){try{return decodeURIComponent(""+t)}catch(e){return""+t}}function LY(t){return AM(t.replace(Ev," "))}function OY(t){return AM(t.replace(Ev," "))}function DY(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const o=LY(s[1]);if(o==="__proto__"||o==="constructor")continue;const a=OY(s[2]||"");e[o]===void 0?e[o]=a:Array.isArray(e[o])?e[o].push(a):e[o]=[e[o],a]}return e}function FY(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>"".concat(C_(t),"=").concat(fx(n))).join("&"):"".concat(C_(t),"=").concat(fx(e)):C_(t)}function BY(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>FY(e,t[e])).filter(Boolean).join("&")}const UY=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,$Y=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,VY=/^([/\\]\s*){2,}[^/\\]/;function HY(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?UY.test(t):$Y.test(t)||(e.acceptRelative?VY.test(t):!1)}function GY(t,e){const n=WY(t),s=w(w({},DY(n.search)),e);return n.search=BY(s),zY(n)}const IM=Symbol.for("ufo:protocolRelative");function WY(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,m=""]=n;return{protocol:f.toLowerCase(),pathname:m,href:f+m,auth:"",host:"",search:"",hash:""}}if(!HY(t,{acceptRelative:!0}))return C6(t);const[,s="",o,a=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,i="",l=""]=a.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(l=l.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:d,hash:u}=C6(l);return{protocol:s.toLowerCase(),auth:o?o.slice(0,Math.max(0,o.length-1)):"",host:i,pathname:c,search:d,hash:u,[IM]:!s}}function C6(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function zY(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",o=t.auth?t.auth+"@":"",a=t.host||"";return(t.protocol||t[IM]?(t.protocol||"")+"//":"")+o+a+e+n+s}var Hm={exports:{}},Gm={exports:{}},S6;function Tv(){return S6||(S6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(s){if(s==null)throw new TypeError("Expected a string but received a ".concat(s));if(s.constructor.name!=="String")throw new TypeError("Expected a string but received a ".concat(s.constructor.name))}t.exports=e.default,t.exports.default=e.default})(Gm,Gm.exports)),Gm.exports}var Wm={exports:{}},w6;function qY(){return w6||(w6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function n(o){return Object.prototype.toString.call(o)==="[object RegExp]"}function s(o,a){for(var i=0;i<a.length;i++){var l=a[i];if(o===l||n(l)&&l.test(o))return!0}return!1}t.exports=e.default,t.exports.default=e.default})(Wm,Wm.exports)),Wm.exports}var zm={exports:{}},k6;function YY(){return k6||(k6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(o,a){return o.indexOf(a)!==-1};e.default=n,t.exports=e.default,t.exports.default=e.default})(zm,zm.exports)),zm.exports}var qm={exports:{}},Ym={exports:{}},E6;function jM(){return E6||(E6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;for(var a in o)typeof s[a]>"u"&&(s[a]=o[a]);return s}t.exports=e.default,t.exports.default=e.default})(Ym,Ym.exports)),Ym.exports}var T6;function ZY(){return T6||(T6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=o(Tv()),s=o(jM());function o(l){return l&&l.__esModule?l:{default:l}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function i(l,c){(0,n.default)(l),c=(0,s.default)(c,a),c.allow_trailing_dot&&l[l.length-1]==="."&&(l=l.substring(0,l.length-1)),c.allow_wildcard===!0&&l.indexOf("*.")===0&&(l=l.substring(2));var d=l.split("."),u=d[d.length-1];return c.require_tld&&(d.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(u)||/\s/.test(u))||!c.allow_numeric_tld&&/^\d+$/.test(u)?!1:d.every(function(f){return!(f.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(f)||/[\uff01-\uff5e]/.test(f)||/^-|-$/.test(f)||!c.allow_underscores&&/_/.test(f))})}t.exports=e.default,t.exports.default=e.default})(qm,qm.exports)),qm.exports}var Zm={exports:{}},M6;function KY(){return M6||(M6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=s(Tv());function s(f){return f&&f.__esModule?f:{default:f}}function o(f){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},o(f)}var a="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(a,"[.]){3}").concat(a),l=new RegExp("^".concat(i,"$")),c="(?:[0-9a-fA-F]{1,4})",d=new RegExp("^("+"(?:".concat(c,":){7}(?:").concat(c,"|:)|")+"(?:".concat(c,":){6}(?:").concat(i,"|:").concat(c,"|:)|")+"(?:".concat(c,":){5}(?::").concat(i,"|(:").concat(c,"){1,2}|:)|")+"(?:".concat(c,":){4}(?:(:").concat(c,"){0,1}:").concat(i,"|(:").concat(c,"){1,3}|:)|")+"(?:".concat(c,":){3}(?:(:").concat(c,"){0,2}:").concat(i,"|(:").concat(c,"){1,4}|:)|")+"(?:".concat(c,":){2}(?:(:").concat(c,"){0,3}:").concat(i,"|(:").concat(c,"){1,5}|:)|")+"(?:".concat(c,":){1}(?:(:").concat(c,"){0,4}:").concat(i,"|(:").concat(c,"){1,6}|:)|")+"(?::((?::".concat(c,"){0,5}:").concat(i,"|(?::").concat(c,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");function u(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,n.default)(f);var p=(o(m)==="object"?m.version:arguments[1])||"";return p?p.toString()==="4"?l.test(f):p.toString()==="6"?d.test(f):!1:u(f,{version:4})||u(f,{version:6})}t.exports=e.default,t.exports.default=e.default})(Zm,Zm.exports)),Zm.exports}var A6;function QY(){return A6||(A6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=v;var n=c(Tv()),s=c(qY()),o=c(YY()),a=c(ZY()),i=c(KY()),l=c(jM());function c(y){return y&&y.__esModule?y:{default:y}}function d(y,b){return g(y)||p(y,b)||f(y,b)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(y,b){if(y){if(typeof y=="string")return m(y,b);var C={}.toString.call(y).slice(8,-1);return C==="Object"&&y.constructor&&(C=y.constructor.name),C==="Map"||C==="Set"?Array.from(y):C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C)?m(y,b):void 0}}function m(y,b){(b==null||b>y.length)&&(b=y.length);for(var C=0,S=Array(b);C<b;C++)S[C]=y[C];return S}function p(y,b){var C=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(C!=null){var S,k,E,T,M=[],A=!0,I=!1;try{if(E=(C=C.call(y)).next,b!==0)for(;!(A=(S=E.call(C)).done)&&(M.push(S.value),M.length!==b);A=!0);}catch(N){I=!0,k=N}finally{try{if(!A&&C.return!=null&&(T=C.return(),Object(T)!==T))return}finally{if(I)throw k}}return M}}function g(y){if(Array.isArray(y))return y}var h={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},x=/^\[([^\]]+)\](?::([0-9]+))?$/;function v(y,b){if((0,n.default)(y),!y||/[\s<>]/.test(y)||y.indexOf("mailto:")===0||(b=(0,l.default)(b,h),b.validate_length&&y.length>b.max_allowed_length)||!b.allow_fragments&&(0,o.default)(y,"#")||!b.allow_query_components&&((0,o.default)(y,"?")||(0,o.default)(y,"&")))return!1;var C,S,k,E,T,M,A,I;if(A=y.split("#"),y=A.shift(),A=y.split("?"),y=A.shift(),A=y.split("://"),A.length>1){if(C=A.shift().toLowerCase(),b.require_valid_protocol&&b.protocols.indexOf(C)===-1)return!1}else{if(b.require_protocol)return!1;if(y.slice(0,2)==="//"){if(!b.allow_protocol_relative_urls)return!1;A[0]=y.slice(2)}}if(y=A.join("://"),y==="")return!1;if(A=y.split("/"),y=A.shift(),y===""&&!b.require_host)return!0;if(A=y.split("@"),A.length>1){if(b.disallow_auth||A[0]===""||(S=A.shift(),S.indexOf(":")>=0&&S.split(":").length>2))return!1;var N=S.split(":"),L=d(N,2),D=L[0],F=L[1];if(D===""&&F==="")return!1}E=A.join("@"),M=null,I=null;var $=E.match(x);if($?(k="",I=$[1],M=$[2]||null):(A=E.split(":"),k=A.shift(),A.length&&(M=A.join(":"))),M!==null&&M.length>0){if(T=parseInt(M,10),!/^[0-9]+$/.test(M)||T<=0||T>65535)return!1}else if(b.require_port)return!1;return b.host_whitelist?(0,s.default)(k,b.host_whitelist):k===""&&!b.require_host?!0:!(!(0,i.default)(k)&&!(0,a.default)(k,b)&&(!I||!(0,i.default)(I,6))||(k=k||I,b.host_blacklist&&(0,s.default)(k,b.host_blacklist)))}t.exports=e.default,t.exports.default=e.default})(Hm,Hm.exports)),Hm.exports}var JY=QY();const XY=Gn(JY);function eZ(t){return(t.type==="containerDirective"||t.type==="textDirective"||t.type==="leafDirective")&&"name"in t}function QHe(t){return t.type==="containerDirective"}function JHe(t){return t.type==="code"}function XHe(t){if(t!=null)return new Date(t*1e3).toISOString()}const tZ=t=>{let e=5381;for(let n=0;n<t.length;n++)e=(e<<5)+e^t.charCodeAt(n);return(e>>>0).toString(36)},eGe=t=>{try{return"".concat(t?tZ(t):"")}catch(e){return""}},nZ=window.location.host,sZ=(t,e={})=>{const n=Object.keys(e).length?e:{utm_source:nZ};try{const s=t.trim();return XY(s,{protocols:["http","https"]})?GY(s,n):t}catch(s){return t}},tGe=(t,e={},n=[])=>{const s=Y4(t);return n.some(a=>a&&Y4(a)===s)?sZ(t,e):t},nGe=t=>{try{return he.getConversationSearchEntryUrls(t&&ft(t))}catch(e){return[]}},sGe=(t,e)=>{try{return t&&e?he.getNode(ft(t),e).message:void 0}catch(n){return}};function oGe(t){const e=t.trim();if(!e.startsWith("{"))return null;try{const n=JSON.parse(e);return!n||Array.isArray(n)||typeof n!="object"?null:oZ(n)}catch(n){return null}}function oZ(t){const e={};for(const[n,s]of Object.entries(t))(typeof s=="string"||typeof s=="number"||typeof s=="boolean")&&(e[n]=String(s));return e.type&&!e.variant&&(e.variant=e.type),e}function aZ(t){"use no forget";yn()&&kl().then(e=>{e.getHost().userStoppedAgentConversation(t)}).catch(()=>{})}function rZ(t,e,n,s=!1,o=!1,a=null){"use no forget";if(!yn())return;const i=n==null?void 0:n.slice(-10).map(u=>{var f=u,{metadata:c}=f,d=ke(f,["metadata"]);return d}),l=JSON.stringify({messages:i});kl().then(c=>{c.getHost().userSentMessageInAgentConversation(t,l,s,o,a,e)}).catch(()=>{})}function iZ(t,e=!1){"use no forget";yn()&&kl().then(n=>{n.getHost().agentConversationStopped(t,e)}).catch(()=>{})}function lZ(t){"use no forget";return yn()?kl().then(e=>e.getHost().getAgentStatus(t)):Promise.resolve("stopped")}function cZ(t,e,n,s,o=!1,a=void 0,i={},l=void 0){const c=U(w({client_thread_id:String(t),client_initiated:e,reason:n,is_agent_hint_enabled:a},i),{has_stop_conduit_token:l});if(!(a||s))return;if(o&&a!==void 0&&a!==s){const u=s?"from_agent_to_non_agent":"from_non_agent_to_agent",f="conversation.transition_".concat(u);Re.addAction(f,U(w({},c),{action_type:"abort_completion"})),B.logEventWithStatsig("Agent Conversation Transition","chatgpt_agent_conversation_transition",U(w({},c),{action_type:"abort_completion"}))}Ie.count(je.DEFAULT,"chatgpt_web_conversation_stop",[{key:"has_stop_conduit_token",value:l?"true":"false"},{key:"stop_reason",value:n}]),s&&(Re.addAction("conversation.stop_attempted",U(w({},c),{is_last_turn_agent:!0})),B.logEventWithStatsig("Agent Conversation Stop","chatgpt_agent_conversation_stop",w({},c)))}async function Zh(t,e=he.getRequestId(ft(t)),{clientInitiated:n=!1,reason:s="other",isLastTurnAgent:o=void 0,hasAgentSystemHint:a=void 0}={}){var T,M,A,I;const i=J$(e),l=xs(),c=ft(t),d=At(t),u=Cv(l,t),f=(u==null?void 0:u.value)===Xt.REALTIME,m=(u==null?void 0:u.value)===Xt.STREAMING,p=he.getCurrentNode(c),g=(T=c==null?void 0:c.stopConduitToken)!=null?T:null,h=g!==null,v=(()=>{const N=p==null?void 0:p.message;return N?X$(N):!1})(),y=m&&((I=(A=(M=p==null?void 0:p.message)==null?void 0:M.metadata)==null?void 0:A.model_slug)==null?void 0:I.endsWith("-pro")),b=m&&n,C=ye(l,"877631007");if(!i&&!f&&!y&&!b)return;Ze(t,N=>{N.interruptionInProgress=!0});const S=()=>{var F,$,H;const L=(c?he.getLastMessageSystemHints(c):[]).includes(Pe.Agent),D=!!((H=($=(F=he.getCurrentNode(c))==null?void 0:F.message)==null?void 0:$.metadata)!=null&&H.n7jupd_message);return L||D},k=o!=null?o:S();k&&d&&aZ(d);let E;if(d&&ye(l,"3922476776")){const L=w({requestBody:{conversation_id:d,exclude_async_types:C?["pro_mode"]:[]},authOption:nn.SendIfAvailable},g?{additionalHeaders:{"x-conduit-token":g}}:{});E=await ge.safePost("/stop_conversation",L),g&&Ze(t,D=>{D.stopConduitToken=null});try{cZ(t,n,s,k,!0,a,{},h)}catch(D){Js.error("Error logging abort completion attempt for analytics",{error:D})}}return i&&!v&&jp.abortRequest(e),Ze(t,N=>{N.interruptionInProgress=!1}),E}const rd=new Set,dZ=(t,e=()=>!0)=>{const n={callback:t,shouldBlock:e};return rd.add(n),()=>rd.delete(n)},aGe=(t,e=()=>!0)=>{_.useEffect(()=>{const n={callback:t,shouldBlock:e};return rd.add(n),()=>{rd.delete(n)}},[t,e])},uZ=()=>Array.from(rd).some(t=>t.shouldBlock()),fZ=()=>Promise.allSettled(Array.from(rd).filter(t=>t.shouldBlock()).map(t=>t.callback()));class mZ{constructor(){Q(this,"completionStartTime",Date.now());Q(this,"completionEndTime");Q(this,"blurDuringCompletionTime");Q(this,"refocusTime");Q(this,"logFocusAfterBlurDuringCompletionEvent",()=>{Ye.logEvent("chatgpt_focus_after_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)}),B.logEvent("Focus After Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)})});Q(this,"onWindowBlur",()=>{this.blurDuringCompletionTime===void 0&&(this.blurDuringCompletionTime=Date.now(),window.addEventListener("focus",this.onWindowFocusAfterBlur))});Q(this,"onWindowFocusAfterBlur",()=>{this.refocusTime=Date.now(),this.completionEndTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent(),this.cleanupFocusAfterBlurListener()});Q(this,"cleanupFocusAfterBlurListener",()=>{window.removeEventListener("focus",this.onWindowFocusAfterBlur)});Q(this,"onMessageError",()=>{window.removeEventListener("blur",this.onWindowBlur)});Q(this,"onMessageDone",()=>{window.removeEventListener("blur",this.onWindowBlur),this.blurDuringCompletionTime!==void 0&&(this.completionEndTime=Date.now(),Ye.logEvent("chatgpt_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),B.logEvent("Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),this.refocusTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent())});window.addEventListener("blur",this.onWindowBlur)}}const mx=new Set,NM=t=>{_.useEffect(()=>(mx.add(t),()=>{mx.delete(t)}),[t])},I6=t=>{for(const e of mx)try{e({error:t})}catch(n){Re.addError(n)}},Od=Dt(()=>({messagesDevData:{},activeNodeId:void 0,ui:{focusedNodeId:void 0}})),pZ=()=>Od.getState().ui.focusedNodeId,Dd=()=>Od.getState().messagesDevData;function rGe(t){const e=Object.keys(Dd()),n=e.indexOf(t);if(n===-1)throw new Error("Key not found in object");const s=(n+1)%e.length;return e[s]}function iGe(t){const e=Object.keys(Dd()),n=e.indexOf(t);if(n===-1)throw new Error("Key not found in object");const s=(n-1+e.length)%e.length;return e[s]}function lGe(t){return Object.keys(Dd()).indexOf(t)}const cGe=()=>Object.keys(Dd()).length;var S_,j6;function gZ(){if(j6)return S_;j6=1;function t(e,n){for(var s,o=-1,a=e.length;++o<a;){var i=n(e[o]);i!==void 0&&(s=s===void 0?i:s+i)}return s}return S_=t,S_}var w_,N6;function hZ(){if(N6)return w_;N6=1;var t=gZ(),e=NaN;function n(s,o){var a=s==null?0:s.length;return a?t(s,o)/a:e}return w_=n,w_}var k_,P6;function _Z(){if(P6)return k_;P6=1;var t=hZ(),e=fh();function n(s){return t(s,e)}return k_=n,k_}var xZ=_Z();const yZ=Gn(xZ);function vZ(t){return t.length===0?null:t.reduce((n,s)=>n+s,0)/t.length}function bZ(t){const e=t.length;if(e===0)return 0;const n=vZ(t)||0,s=t.reduce((o,a)=>o+Math.pow(a-n,2),0)/e;return Math.sqrt(s)}function R6(t,e){const n=t.slice().sort((l,c)=>l-c),s=e*(n.length-1),o=Math.floor(s),a=Math.ceil(s);if(o===a)return n[o];const i=s-o;return(1-i)*n[o]+i*n[a]}function CZ(t){if(t.length===0)return null;const e=t.slice().sort((s,o)=>s-o),n=Math.floor(e.length/2);return e.length%2===0?(e[n-1]+e[n])/2:e[n]}var Ro=(t=>(t.FirstTokenLatency="first_token_lat",t.TotalRequestTime="total_request_time",t.TokenCount="token_count",t.StdDevTokenLatency="std_dev_token_lat",t.MeanTokenLatency="mean_token_lat",t.MedianTokenLatency="median_token_lat",t.MinTokenLatency="min_token_lat",t.MaxTokenLatency="max_token_lat",t.P95TokenLatency="p95_token_lat",t.P99TokenLatency="p99_token_lat",t))(Ro||{});const PM=t=>{var m;const e=t.filter(p=>p.requestCount>1);let n=0;for(let p=0;p<t.length;p++){const g=t[p];if(n=g.requestDuration,g.content!=="")break}const s=R6(e.map(p=>p.lastTokenDuration),.95),o=R6(e.map(p=>p.lastTokenDuration),.99),a=yZ(e.map(p=>p.lastTokenDuration)),i=CZ(e.map(p=>p.lastTokenDuration)),l=e.filter(p=>p.lastTokenDuration!==0).reduce((p,g)=>Math.min(p,g.lastTokenDuration),1/0),c=e.reduce((p,g)=>Math.max(p,g.lastTokenDuration),-1/0),d=bZ(e.map(p=>p.lastTokenDuration)),u=(m=t[t.length-1])==null?void 0:m.requestDuration;return[{id:"first_token_lat",name:"First Token lat.",stat:n>0?"".concat(n.toFixed(2),"ms"):null,value:n>0?n:null,category:"summary"},{id:"total_request_time",name:"Total request time",stat:u?"".concat((u/1e3).toFixed(2),"s"):null,value:u||null,category:"summary"},{id:"token_count",name:"Token count",stat:"".concat(t.length),value:t.length,category:"summary"},{id:"std_dev_token_lat",name:"Std dev Token lat.",stat:"".concat(d.toFixed(2)),value:d,category:"token"},{id:"mean_token_lat",name:"Mean Token lat.",stat:a?"".concat(a.toFixed(2),"ms"):null,value:a!=null?a:null,category:"aggregate"},{id:"median_token_lat",name:"Median Token lat.",stat:i?"".concat(i.toFixed(2),"ms"):null,value:i!=null?i:null,category:"token"},{id:"min_token_lat",name:"Min Token lat.",stat:"".concat(l.toFixed(2),"ms"),value:l!=null?l:null,category:"token"},{id:"max_token_lat",name:"Max Token lat.",stat:"".concat(c.toFixed(2),"ms"),value:c!=null?c:null,category:"token"},{id:"p95_token_lat",name:"p95 Token lat.",stat:s?"".concat(s.toFixed(2),"ms"):null,value:s!=null?s:null,category:"aggregate"},{id:"p99_token_lat",name:"p99 Token lat.",stat:o?"".concat(o.toFixed(2),"ms"):null,value:o!=null?o:null,category:"aggregate"}]},dGe=()=>{var a;const t=Dd(),e=pZ();if(!t||!e)return{stats:[],targetLatencyData:[]};const n=t[e],s=(a=n==null?void 0:n.data)!=null?a:[];return{stats:PM(s),targetLatencyData:s}},SZ=(t,e,n,s)=>{Od.setState(o=>{const a={focusedNodeId:t},i={status:"active",data:[],model:e,serverRequestId:n,preflightTime:s};return U(w({},o),{activeNodeId:t,ui:a,messagesDevData:U(w({},o.messagesDevData),{[t]:i})})})},wZ=(t,e,n)=>{const s=n==null?void 0:n.search_source;Od.setState(o=>{var i;const a=o.messagesDevData[t];return U(w({},o),{activeNodeId:t,messagesDevData:U(w({},o.messagesDevData),{[t]:U(w({},a),{data:[...(i=a==null?void 0:a.data)!=null?i:[],e],searchSource:s})})})})},ra=(t,e)=>{var n;return(n=e.find(s=>s.id===t))==null?void 0:n.value},kZ=t=>{var c;if(!tt(xs()))return;const n=Dd()[t],s=PM(n.data),{preflightTime:o,model:a,serverRequestId:i,searchSource:l}=n;return ge.safePost("/lat/r",{requestBody:{server_request_id:i,model:a,preflight_time_ms:o,search_source:l,count_tokens:(c=ra(Ro.TokenCount,s))!=null?c:0,ts_first_token_ms:ra(Ro.FirstTokenLatency,s),ts_max_token_time_ms:ra(Ro.MaxTokenLatency,s),ts_mean_token_without_first_ms:ra(Ro.MeanTokenLatency,s),ts_median_token_without_first_ms:ra(Ro.MedianTokenLatency,s),ts_min_token_time_ms:ra(Ro.MinTokenLatency,s),ts_p95_token_without_first_ms:ra(Ro.P95TokenLatency,s),ts_p99_token_without_first_ms:ra(Ro.P99TokenLatency,s),ts_std_dev_token_ms:ra(Ro.StdDevTokenLatency,s),ts_total_request_ms:ra(Ro.TotalRequestTime,s)}})},EZ=t=>Od.setState(e=>{const n=U(w({},e.messagesDevData[t]),{status:"finished"});return U(w({},e),{messagesDevData:U(w({},e.messagesDevData),{[t]:n})})}),uGe=t=>Od.setState(e=>U(w({},e),{ui:U(w({},e.ui),{focusedNodeId:t})}));class TZ{constructor(e,n){Q(this,"requestLastTokenTime");Q(this,"requestCount",0);Q(this,"requestTimes",[]);this.requestLatencyId=e,this.requestStartTime=n,this.requestLastTokenTime=n}onResponse(e,n,s){const o=performance.now(),a=o-this.requestLastTokenTime,i=o-this.requestStartTime;this.requestLastTokenTime=o,this.requestCount+=1;const l={requestCount:this.requestCount,requestDuration:i,lastTokenDuration:Number(JSON.stringify(a)),messageType:n.content.content_type,content:Xp(n)?bo(n):""};this.requestTimes.push(l),e.type==="message"?wZ(this.requestLatencyId,l,n.metadata):e.type==="done"&&s!=null&&(EZ(this.requestLatencyId),kZ(this.requestLatencyId))}}const RM=(t,e)=>{const{isCompletion:n,messageId:s,conversationId:o,flagged:a,blocked:i,disclaimers:l,metadata:c,shouldDisableConversation:d}=t,u=!!(l!=null&&l.length);Ze(e,f=>{dn.updateTree(f,m=>{var x,v,y;const p=m.messageIdToNodeId(s);i&&m.clearNodeMessageParts(p);const g=(x=c==null?void 0:c.model_incompatibility)!=null?x:!1,h=(v=c==null?void 0:c.safety_limited)!=null?v:!1;m.updateNodeMetadata(p,U(w(w(w(w({},(y=u&&!!(l!=null&&l.length)&&sV(l,i))!=null?y:{}),a&&nV),i&&tV({isSafetyLimited:h,shouldDisableConversation:d,isModelIncompatibility:g})),d&&eV),{completionSampleFinishTime:Date.now()}))})}),B.logEvent(n?i?"Moderation: Completion Content Blocked":"Moderation: Completion Content Flagged":i?"Moderation: Prompt Content Blocked":"Moderation: Prompt Content Flagged",{threadId:o,id:s})},L6={base_config:void 0,eval_preset:void 0,sonicberry_model_ids:void 0,settings_overrides:void 0,dump_sub_conversation:void 0};function Kh(){let t;try{const e=ps.getCookie(gs.InternalSearchSettings);t=e?JSON.parse(e):L6}catch(e){t=L6}return oV(t,e=>!!e)}const LM=(t=xs(),e=!1)=>{var n;return tt(t)?((n=et(t))==null?void 0:n.planType)===We.FREE?ze(t,"3178812292",{disableExposureLog:e}):ze(t,"3703416703",{disableExposureLog:e}):ze(t,"2861477803",{disableExposureLog:e})},MZ=(t=xs())=>{const e=Cd().fConversationEndpoint;return e==="convo2"?!0:e==="convo1"?!1:ye(t,"4154476537")?!0:LM(t,!0).get("use_f_prepare",!1)},Qh=(t=xs(),e=!1)=>{const n=Cd().fConversationEndpoint;return n==="convo2"?!0:n==="convo1"?!1:ye(t,"4154476537")?!0:LM(t,e).get("use_f_convo",!1)},AZ=()=>{var t;return(t=Kh().fast_search)!=null?t:!1},Mv=(t=xs())=>ye(t,"2881402514");function O6(t,e){Jy.setState(n=>{const s=n.threads[t];if(s)s.prepareRequestBlocked=e,e||(s.lastCompletionFinishedTimestamp=performance.now());else{const o=At(t);if(o){const a=n.threads[o];a&&(a.prepareRequestBlocked=e,e||(a.lastCompletionFinishedTimestamp=performance.now()))}}})}function Av(t,e,n,s){Ze(e,o=>{o.title=n,o.titleSource=s}),ri.publish({kind:"updateThreadTitle",conversationId:e}),aV(t,e,n)}function OM(t){window.history.pushState({},"",t)}function Iv(t,e,n,s,o,a){var u;const i=ft(n),l=he.getGizmoId(i),d=(u=new URLSearchParams(window.location.search).get(tx))!=null?u:void 0;if(l!=null)rV(e,l).then(f=>{if(s){const m=f.gizmo;t(Vo(n,{project:m,superWidgetTab:d}));return}OM(Vo(n,{gizmo:f,superWidgetTab:d}))}).catch(f=>{Re.addError(f),t(Vo(n,{superWidgetTab:d}))});else{const f=Vo(n,{superWidgetTab:d});IZ(t)?t(f,{replace:a}):t(f)}}function IZ(t){return t!==OM}const DM={[Ho.LoggedIn]:Ue.LoggedInUserMessageCount,[Ho.LoggedOut]:Ue.NoAuthUserMessageCount},Jh=Dt(In(()=>({messageCountByAuthStatus:{[Ho.LoggedIn]:D6(Ho.LoggedIn),[Ho.LoggedOut]:D6(Ho.LoggedOut)}})));function FM(t){return t.messageCountByAuthStatus[Ho.LoggedOut]}function jZ(t){return t.messageCountByAuthStatus[Ho.LoggedIn]}const NZ={incrementUserMessageCount:t=>{Jh.setState(e=>{const n=e.messageCountByAuthStatus[t]+1;e.messageCountByAuthStatus[t]=n,PZ({authStatus:t,messageCount:n})})}};function D6(t){const e=localStorage.getItem(DM[t]);return e?Number(e):0}function PZ({authStatus:t,messageCount:e}){localStorage.setItem(DM[t],String(e))}var da=(t=>(t.Unavailable="unavailable",t.Thinking="thinking",t.Generating="generating",t.AsyncGenerating="async_generating",t.AsyncHanging="async_hanging",t.Complete="complete",t.Errored="errored",t.Empty="empty",t))(da||{});const RZ=["generating","async_generating","async_hanging","thinking"],LZ="sj1i4kz",ul="".concat(Pn.T2UAY3K,".").concat(LZ);function Xh(t){return t.author.role==="tool"&&t.author.name===ul&&t.content.content_type===ut.MultimodalText}function OZ(t,{skipSort:e}={skipSort:!1}){let n=t.filter(a=>{var i;return Xh(a)&&!((i=a.metadata)!=null&&i.is_visually_hidden_from_conversation)});e||(n=[...n].sort((a,i)=>{var l,c,d,u;return((c=(l=a.metadata)==null?void 0:l.generation_index)!=null?c:0)-((u=(d=i.metadata)==null?void 0:d.generation_index)!=null?u:0)}));const s=n.flatMap(a=>pr.getImageAssetPointers(a)),o=n.map(a=>a.id);return{imageAssetPointers:s,messageIds:o}}const BM=(t,e)=>{var h,x,v,y,b;const n=t.find(C=>{var S;return C.author.role===Ke.Tool&&[ut.Error,ut.SystemError].includes(C.content.content_type)||((S=C.metadata)==null?void 0:S.is_error)}),{imageAssetPointers:s}=OZ(t),o=s.length>0,i=t.some(C=>Xh(C))&&!o,l=t.some(C=>{var T,M;if((T=C.metadata)!=null&&T.image_gen_async)return!1;const S=C.author.name===Pn.IMAGE_GEN_HALLUCINATED||C.author.name===ul,k=C.content.content_type===ut.Text,E=!!((M=C.metadata)!=null&&M.is_visually_hidden_from_conversation);return S&&k&&E}),c=t.length>0&&!!((x=(h=t[t.length-1])==null?void 0:h.metadata)!=null&&x.image_gen_async),u=!t.some(C=>{var S;return[ul,Pn.IMAGE_GEN_HALLUCINATED].includes((S=C.author.name)!=null?S:"")&&C.content.content_type===ut.MultimodalText})&&t.some(C=>{var E;const S=[ul,Pn.IMAGE_GEN_HALLUCINATED].includes((E=C.author.name)!=null?E:""),k=C.recipient==="assistant";return S&&k});let f=0;for(const C of s){const S=C.height,k=(b=(y=(v=C.metadata)==null?void 0:v.generation)==null?void 0:y.height)!=null?b:void 0;f+=S!==void 0&&k!==void 0?k/S:0}const m=s.length>0?f/s.length:0,p=n!==void 0,g=e?da.AsyncGenerating:da.AsyncHanging;if(i||l||u)return da.Empty;if(p)return da.Errored;if(m){if(m<1)return c?g:da.Generating;if(m===1)return da.Complete}else return c?g:da.Thinking;return da.Unavailable},DZ=t=>BM([t],!0)===da.Complete,FZ=t=>t.author.role===Ke.Assistant&&t.recipient===ul;function fGe(t){return(t.author.name===ul||FZ(t))&&RZ.includes(BM([t],!0))}const BZ=R(()=>P(()=>import("./ip1a99ta06lqiwzj.js"),__vite__mapDeps([2,1])),{loading:t=>O(t)}),UZ=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)}),$Z=R(()=>P(()=>import("./is2heqmyv1cd98qx.js"),__vite__mapDeps([4,1])),{loading:t=>O(t)});function VZ(t){"use forget";const e=G.c(29),{onClose:n,effect:s}=t,o=ae(KZ),a=_.useRef(!1);let i,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{a.current||(a.current=!0,B.logEvent("SMHRK Intervention: Helpline Modal Opened",{}))},l=[],e[0]=i,e[1]=l):(i=e[0],l=e[1]),_.useEffect(i,l);const c=ZZ;let d;if(e[2]!==s.text){const k=s.text.split(/\n+/).map(YZ);d=[];let E=null;for(const T of k){const M=T.match(/^[-]\s+(.*)$/);M?(E==null&&(E=[]),E.push(M[1])):(E&&(d.push({type:"ul",content:E}),E=null),T&&d.push({type:"p",content:[T]}))}if(E){let T;e[4]!==E?(T={type:"ul",content:E},e[4]=E,e[5]=T):T=e[5],d.push(T)}e[2]=s.text,e[3]=d}else d=e[3];const u=d;let f;e[6]!==n?(f=()=>{ge.safePost("/sentinel/modal_ack",{authOption:nn.SendIfAvailable}).catch(qZ),n()},e[6]=n,e[7]=f):f=e[7];const m=f,p=s.title;let g;e[8]!==u?(g=r.jsx("div",{className:"text-token-text-secondary space-y-3",children:u.map(WZ)}),e[8]=u,e[9]=g):g=e[9];let h;if(e[10]!==s.helplines||e[11]!==o){let k;e[13]!==o?(k=(E,T)=>{var M,A;return r.jsxs("div",{className:"border-token-border-heavy rounded-lg border p-4",children:[r.jsx("div",{className:"text-base font-semibold",children:E.name}),E.description?r.jsx("div",{className:"text-token-text-secondary mt-1 text-sm",children:E.description}):null,r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(A=o?E.links:(M=E.links)==null?void 0:M.filter(GZ))==null?void 0:A.map((I,N)=>r.jsxs(_e,{as:"a",to:QZ(I.kind,I.href),openNewTab:I.kind==="url"||I.kind==="chat",color:I.kind==="call"?"secondary":"ghost",className:I.kind==="call"?void 0:"border-token-border-heavy border",size:"small",label:I.label,onClick:()=>c(E.name,I.href,I.kind),children:[JZ(I.kind),I.label]},N))})]},T)},e[13]=o,e[14]=k):k=e[14],h=s.helplines.map(k),e[10]=s.helplines,e[11]=o,e[12]=h}else h=e[12];let x;e[15]!==h?(x=r.jsx("div",{className:"flex flex-col gap-4",children:h}),e[15]=h,e[16]=x):x=e[16];let v;e[17]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("div",{className:"text-token-text-tertiary mt-1 text-xs",children:r.jsx(j,U(w({},F6.disclaimer),{values:{link:HZ}}))}),e[17]=v):v=e[17];let y;e[18]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(j,w({},F6.close)),e[18]=y):y=e[18];let b;e[19]!==m?(b=r.jsx("div",{className:"mt-2 flex justify-end",children:r.jsx(_e,{as:"button",color:"primary-inverse",onClick:m,size:"large",children:y})}),e[19]=m,e[20]=b):b=e[20];let C;e[21]!==b||e[22]!==g||e[23]!==x?(C=r.jsxs("div",{className:"flex flex-col gap-4 px-6 ps-6 pt-4 pb-6",children:[g,x,v,b]}),e[21]=b,e[22]=g,e[23]=x,e[24]=C):C=e[24];let S;return e[25]!==s.title||e[26]!==n||e[27]!==C?(S=r.jsx(Mt,{testId:"modal-crisis-helpline",isOpen:!0,onClose:n,title:p,showCloseButton:!1,noPadding:!0,position:"center",size:"custom",className:"max-w-[640px]",headerClassName:"ps-6 pe-6 pt-6 pb-0",shouldIgnoreClickOutside:!0,children:C}),e[25]=s.title,e[26]=n,e[27]=C,e[28]=S):S=e[28],S}function HZ(t){return r.jsx("a",{href:"https://help.openai.com/en/articles/12315645",target:"_blank",rel:"noreferrer",className:"underline",children:t})}function GZ(t){return t.kind!=="call"&&t.kind!=="text"}function WZ(t,e){return t.type==="p"?r.jsx("p",{className:"text-pretty",children:t.content[0]},"p-".concat(e)):r.jsx("ul",{className:"list-disc space-y-2 ps-5",children:t.content.map(zZ)},"ul-".concat(e))}function zZ(t,e){return r.jsx("li",{children:t},e)}function qZ(){}function YZ(t){return t.trim()}function ZZ(t,e,n){B.logEvent("SMHRK Intervention: Helpline Modal Button Clicked",{helplineName:t,linkHref:e,linkKind:n})}function KZ(){return oT()}function QZ(t,e){switch(t){case"call":return e.startsWith("tel:")?e:"tel:".concat(e);case"text":return e.startsWith("sms:")?e:"sms:".concat(e);default:return e}}const F6=be({close:{id:"crisisHelplineModal.close",defaultMessage:"Close"},disclaimer:{id:"crisisHelplineModal.disclaimer",defaultMessage:"Services unaffiliated with ChatGPT"}});function JZ(t){const e=t==="call"?BZ:t==="text"||t==="chat"?$Z:UZ;return r.jsx(e,{className:"icon-sm me-1","aria-label":""})}const UM=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10ZM17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10Z"}),_.createElement("path",{d:"M10.0002 8.5C10.8285 8.50022 11.5002 9.17171 11.5002 10C11.5002 10.8283 10.8285 11.4998 10.0002 11.5C8.50014 11.4999 5.00025 10.5 5.00025 10C5.00025 9.50002 8.50014 8.50009 10.0002 8.5Z"}),_.createElement("path",{d:"M12.0833 0.00488281C12.4504 0.00505872 12.7483 0.302761 12.7483 0.669922C12.7483 1.03708 12.4504 1.33479 12.0833 1.33496H7.91626C7.54922 1.3347 7.25122 1.03703 7.25122 0.669922C7.25122 0.302814 7.54922 0.00514505 7.91626 0.00488281H12.0833Z"})),mGe=Object.freeze(Object.defineProperty({__proto__:null,default:UM},Symbol.toStringTag,{value:"Module"})),$M=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10ZM17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10Z"}),_.createElement("path",{d:"M7.5 5.66992C7.93301 5.41993 10.5488 7.95095 11.2988 9.25C11.713 9.96741 11.4674 10.8846 10.75 11.2988C10.0326 11.713 9.11542 11.4673 8.70117 10.75C7.95118 9.45097 7.06701 5.91997 7.5 5.66992Z"}),_.createElement("path",{d:"M12.084 0.00488281C12.451 0.00519055 12.749 0.302842 12.749 0.669922C12.749 1.037 12.451 1.33465 12.084 1.33496H7.91699C7.54972 1.33496 7.25195 1.03719 7.25195 0.669922C7.25195 0.302653 7.54972 0.00488281 7.91699 0.00488281H12.084Z"})),pGe=Object.freeze(Object.defineProperty({__proto__:null,default:$M},Symbol.toStringTag,{value:"Module"})),VM=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.585 9.99998C16.585 6.36319 13.6368 3.41502 10 3.41502C6.3632 3.41502 3.41504 6.36319 3.41504 9.99998C3.41504 13.6368 6.3632 16.5849 10 16.5849C13.6368 16.5849 16.585 13.6368 16.585 9.99998ZM17.915 9.99998C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 9.99998C2.08496 5.62865 5.62867 2.08494 10 2.08494C14.3713 2.08494 17.915 5.62865 17.915 9.99998Z"}),_.createElement("path",{d:"M12.0837 0.00494385C12.4509 0.00511975 12.7488 0.302822 12.7488 0.669983C12.7488 1.03714 12.4509 1.33485 12.0837 1.33502H7.91675C7.54948 1.33502 7.25171 1.03725 7.25171 0.669983C7.25171 0.302714 7.54948 0.00494385 7.91675 0.00494385H12.0837Z"}),_.createElement("path",{d:"M11.2992 10.75C10.8849 11.4675 9.96756 11.7133 9.25012 11.2991C8.53268 10.8849 8.28687 9.96747 8.70108 9.25003C9.45108 7.95099 12.0671 5.4199 12.5001 5.6699C12.9331 5.9199 12.0492 9.45099 11.2992 10.75Z"})),gGe=Object.freeze(Object.defineProperty({__proto__:null,default:VM},Symbol.toStringTag,{value:"Module"})),HM=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),_.createElement("path",{d:"M16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10ZM17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10Z"}),_.createElement("path",{d:"M8.70117 9.25C9.1154 8.5326 10.0326 8.28697 10.75 8.70117C12.049 9.45122 14.5799 12.0669 14.3301 12.5C14.0796 12.9328 10.549 12.0488 9.25 11.2988C8.53268 10.8846 8.28699 9.96739 8.70117 9.25Z"}),_.createElement("path",{d:"M12.084 0.00488281C12.451 0.00519055 12.749 0.302842 12.749 0.669922C12.749 1.037 12.451 1.33465 12.084 1.33496H7.91699C7.54972 1.33496 7.25195 1.03719 7.25195 0.669922C7.25195 0.302653 7.54972 0.00488281 7.91699 0.00488281H12.084Z"})),hGe=Object.freeze(Object.defineProperty({__proto__:null,default:HM},Symbol.toStringTag,{value:"Module"})),XZ=R(()=>P(()=>import("./ddaoveasmkugsi6h.js"),__vite__mapDeps([5,1])),{loading:t=>O(t)}),eK=R(()=>P(()=>import("./e94q0iitccatqzny.js"),__vite__mapDeps([6,1])),{loading:t=>O(t)}),tK=R(()=>P(()=>import("./f1e2b6n8g2blm1mk.js"),__vite__mapDeps([7,1])),{loading:t=>O(t)}),nK=R(()=>P(()=>import("./m58o5rj9uburgd29.js"),__vite__mapDeps([8,1])),{loading:t=>O(t)}),B6="gpt-5-thinking",sK=t=>{const e=et(t);return e!=null&&e.isPro()||e!=null&&e.isEnterprise()?["min","standard","extended","max"]:["standard","extended"]},oK=(t,e)=>{B.logEventWithStatsig("ChatGPT Composer Thinking Effort Changed","chatgpt_composer_thinking_effort_changed",{effort:e,model:t})};function GM(t,e){switch(e){case"min":return{filledIcon:VM,progressIcon:eK,fullLabel:t.formatMessage({id:"kogr4P",defaultMessage:"Light thinking"}),shortLabel:t.formatMessage({id:"oHA6pi",defaultMessage:"Light"}),description:t.formatMessage({id:"IXCwXJ",defaultMessage:"Quick, thoughtful answers"})};case"standard":return{filledIcon:HM,progressIcon:XZ,fullLabel:t.formatMessage({id:"SF0DXJ",defaultMessage:"Standard thinking"}),shortLabel:t.formatMessage({id:"LvLUFd",defaultMessage:"Standard"}),description:t.formatMessage({id:"KBwMuT",defaultMessage:"Balanced thinking and speed"})};case"extended":return{filledIcon:UM,progressIcon:nK,fullLabel:t.formatMessage({id:"ZdXWiu",defaultMessage:"Extended thinking"}),shortLabel:t.formatMessage({id:"8yC7rt",defaultMessage:"Extended"}),description:t.formatMessage({id:"UvHF8K",defaultMessage:"Thinks longer for complex questions"})};case"max":return{filledIcon:$M,progressIcon:tK,fullLabel:t.formatMessage({id:"WQe8sQ",defaultMessage:"Heavy thinking"}),shortLabel:t.formatMessage({id:"ZCryku",defaultMessage:"Heavy"}),description:t.formatMessage({id:"uTE58+",defaultMessage:"Even longer analysis for harder questions"})}}}const aK=["notificationSettings"];class rK{static async getOrCreateSubscription({endpoint:e,p256dh:n,auth:s}){return ge.safePost("/notifications/subscription/register",{requestBody:{platform:"web",web_metadata:{endpoint:e,p256dh:n},token:s}})}static async deregisterSubscription({token:e}){const n={token:e,platform:"web"};return ge.safeDelete("/notifications/subscription/deregister",{requestBody:n})}static async getSettings(){return ge.safeGet("/notifications/settings")}static async updateSettings(e){const o=e,{category:n}=o,s=ke(o,["category"]);return ge.safePatch("/notifications/settings",{requestBody:{updates:{[n]:s}}})}}const iK=1e4,jv=Dt(In(()=>({notifications:[]}))),uf=t=>{var s;const e=crypto.randomUUID();jv.setState(o=>{o.notifications.push(U(w({},t),{id:e}))});const n=(s=t.timeout)!=null?s:iK;setTimeout(()=>{Nv(e)},n)},Nv=t=>{jv.setState(e=>{e.notifications=e.notifications.filter(n=>n.id!==t)})},_Ge=({onSuccess:t,alwaysRefetchOnMount:e=!1})=>rt({queryKey:aK,queryFn:async()=>{const s=(await rK.getSettings()).settings;return t==null||t(s),s},refetchOnMount:e?"always":!0});function lK(t,e){if(t.length<=e)return t;const n=t.slice(0,Math.min(t.length,e+20)),s=n.lastIndexOf("."),o=n.lastIndexOf("!"),a=n.lastIndexOf("?"),i=Math.max(s,o,a);if(i>0&&i<=e&&i>=Math.floor(e*.4))return t.slice(0,i+1).trim()+"";const l=t.lastIndexOf(" ",e);return l>Math.floor(e*.25)?t.slice(0,l).trim()+"":t.slice(0,e).trim()+""}class cK{constructor(e){Q(this,"activeSystemHintSuggestionChips$",Be([]));this.conversation=e,this.conversation=e}addActiveSystemHintSuggestionChips(e){const n=e.filter(s=>!this.activeSystemHintSuggestionChips$().some(o=>o.systemHint===s.systemHint));n.length&&this.activeSystemHintSuggestionChips$.set(s=>[...s!=null?s:[],...n])}removeActiveSystemHintSuggestionChip(e){this.activeSystemHintSuggestionChips$.set(s=>[...(s!=null?s:[]).filter(o=>o.systemHint!==e.systemHint)]);const n=e==null?void 0:e.systemHint;n&&ge.safePost("/system_hints/suggestion_cooldown",{requestBody:{system_hint:n}})}clearActiveSystemHintSuggestionChips(){this.activeSystemHintSuggestionChips$.set([])}}const dg=Af(t=>new cK(t));function dK(t){return t==null||[wt.PrimaryAssistant,wt.GizmoInteraction].includes(t.kind)}function WM(t){"use forget";const e=G.c(5),n=V();let s;e[0]!==t||e[1]!==n?(s=yt(n,t),e[0]=t,e[1]=n,e[2]=s):s=e[2];const o=s;let a;return e[3]!==o?(a=()=>zM(o),e[3]=o,e[4]=a):a=e[4],ae(a)}const zM=To(t=>St(()=>{const{ctx:e}=t,n=iV(t);if(n)switch(n.kind){case wt.PrimaryAssistant:case wt.FlyingCircusCustomization:return n;case wt.GizmoInteraction:case wt.GizmoMagicCreate:{const s=Xc(t);return U(w({},n),{gizmo:s?cV(e,s).data:void 0})}case wt.GizmoTest:{const s=Xc(t);return U(w({},n),{gizmo:s?lV(e,s).data:void 0})}}}));function xGe(t){return t.kind===wt.GizmoInteraction||t.kind===wt.GizmoMagicCreate||t.kind===wt.GizmoTest?t.gizmo:void 0}const uK="gpt-4",fK="oai/apps/capExpiresAt";Dt(()=>({serverThreadIds:new Set}));function mK(){const t=e1(o=>o.isoDate),e=Date.now(),n=t&&new Date(t).getTime(),s=t&&n&&n<=e;return _.useEffect(()=>{s&&qM()},[s]),s?null:t?uK:null}const e1=Dt()(aT(()=>({isoDate:""}),{name:fK}));function pK(t){e1.setState({isoDate:t})}function qM(){e1.setState({isoDate:""})}const U6="atlas",gK="side_chat",hK="new_tab_page",_K=window.location.host;function YM(t){return wn(()=>hn(t)?{app_name:U6,app_surface:gK}:Qo(t)?{app_name:U6,app_surface:hK}:{app_name:_K})}const xK="https://help.openai.com/en/articles/8590148-memory-faq",tl=80,Km=100;function yK(t){return t==="cold"?"cold":"warm"}function vK(t){return t==="user"?"user":"assistant"}function ZM(t){const e=t.last_updated,n=s=>s?{actor:vK(s.actor),timestamp:s.timestamp}:null;return U(w({},t),{status:yK(t.status),last_updated:n(e)})}function ug(t){if(!(!t||t.length===0))return Array.from(t).sort()}function KM(t,e=!0,n,s,o){const a=s?void 0:ug(n),i=s?void 0:ug(o);return["memories",w(w(w({gizmoId:t,includeMemoryEntries:e},a?{contextScopes:a}:{}),i?{requiredContextScopes:i}:{}),s?{memoryEntriesFilter:s}:{})]}function zf(t,e=!0,n=!0,s,o,a){const i=o?void 0:ug(s),l=o?void 0:ug(a);return rt({queryKey:KM(t,e,i,o,l),queryFn:async()=>{const c={gizmo_id:t,include_memory_entries:e};o?c.memory_entries_filter=o:(i&&(c.context_scopes=i),l&&(c.required_context_scopes=l));const d=await ge.safeGet("/memories",{parameters:{query:c}}),u=Math.min(Math.floor(100*d.memory_num_tokens/d.memory_max_tokens),100);return U(w({},d),{memoryFullPct:u,memories:d.memories.map(f=>ZM(f))})},refetchOnMount:"always",enabled:n})}function QM(t=50){return["memory_history",{limit:t}]}function yGe(t=50,e=!0){return rt({queryKey:QM(t),queryFn:async()=>{const n=await ge.safeGet("/memories/history",{parameters:{query:{limit:t}}}),s=Array.isArray(n.history)?n.history:[];return U(w({},n),{history:s.map(o=>U(w({},o),{memories:o.memories.map(a=>ZM(a))}))})},refetchOnMount:"always",enabled:e})}function Pv(t,e,n=!1){var l;const s="684023316",a=(l=ze(t,s,{disableExposureLog:!0}).get("memory_almost_full_threshold",tl))!=null?l:tl;if((e!=null?e:0)<a)return"control";const i=ze(t,s);return n?{threshold:a,layer:i.get("upsell_variant","control")}:i.get("upsell_variant","control")}function bK(t,e=!0){return ze(t,"684023316",{disableExposureLog:e}).get("upsell_variant","control")}const JM=(t,e)=>{window.__reactRouterDataRouter.navigate(t,e)},CK=t=>{const e=window.__reactRouterDataRouter.state.location.pathname;return G$(t,e)};let nl=null;const SK=2e3,Rv=If(Ue.PendingSurveySpec,()=>null);function wK(){return gt.getItem(Ue.PendingSurveySpec)}function kK(t){nl&&clearTimeout(nl),nl=setTimeout(()=>{nl=null,Rv.set(t)},SK)}function XM(){Rv.set(null),nl&&(clearTimeout(nl),nl=null)}const wc=Dt(t=>({survey:null,triggered:!1,setSurvey:e=>t({survey:e}),setTriggered:e=>t({triggered:e})}));function EK(){const{setTriggered:t}=wc.getState();t(!0)}function TK(){const t=wc(a=>a.survey),e=wc(a=>a.triggered),n=wc(a=>a.setSurvey),s=wc(a=>a.setTriggered);return _.useEffect(()=>{if(!e||t)return;const a=wK();XM(),n(a)},[t,e,n]),{survey:t,finishSurvey:()=>{n(null),s(!1)}}}function MK(){const t=wc(o=>o.setTriggered),e=ae(()=>Rv()),n=Hn(),s=_.useRef(null);_.useEffect(()=>{if(typeof document<"u"&&document.visibilityState!=="visible"){t(!1);return}if(!e){t(!1);return}n.pathname==="/"&&n.key!==s.current&&(s.current=n.key,t(!0))},[n.key,n.pathname,t,e])}function $6(t){return!(t.type==="perf_stats"||t.type==="server_ste_metadata"||t.type==="message_marker")}let Ki=null;const eA="".concat(rT,".suggest_agent");async function Lv(){return Ki==null&&(Ki=await dV()),Ki!=null?Ki:[]}function Rp(t){return Ki==null?!1:Ki.includes(t)}function AK(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619)>>>0;return e^=e>>>16,e=Math.imul(e,2246822507)>>>0,e^=e>>>13,e=Math.imul(e,3266489909)>>>0,e^=e>>>16,(e>>>0).toString(16).padStart(8,"0")}class IK{constructor(){Q(this,"answers",new Map);Q(this,"maxAttempts",5e5);Q(this,"requirementsSeed",jK());Q(this,"sid",as());Q(this,"errorPrefix","wQ8Lk5FbGpA2NcR9dShT6gYjU7VxZ4D");Q(this,"_runCheck",(e,n,s,o,a)=>{o[3]=a,o[9]=Math.round(performance.now()-e);const i=Qm(o);return AK(n+i).substring(0,s.length)<=s?i+"~S":null})}async initializeAndGatherData(e){this._getAnswer(e)}async startEnforcement(e){this._getAnswer(e)}getEnforcementTokenSync(e){const n=this._getAnswer(e);return typeof n=="string"?n:null}async getEnforcementToken(e,n){return this._getAnswer(e,n==null?void 0:n.forceSync)}async getRequirementsToken(){return this.answers.has(this.requirementsSeed)||this.answers.set(this.requirementsSeed,this._generateAnswerAsync(this.requirementsSeed,"0")),"gAAAAAC"+await this.answers.get(this.requirementsSeed)}getRequirementsTokenBlocking(){return"gAAAAAC"+this._generateRequirementsTokenAnswerBlocking()}_getAnswer(e,n=!1){var l;const s="gAAAAAB";if(!((l=e==null?void 0:e.proofofwork)!=null&&l.required))return null;const{seed:o,difficulty:a}=e.proofofwork;if(!(typeof o=="string"&&typeof a=="string"))return null;const i=this.answers.get(o);if(typeof i=="string")return i;if(n){const c=this._generateAnswerSync(o,a),d=s+c;return this.answers.set(o,d),d}return this.answers.has(o)||this.answers.set(o,this._generateAnswerAsync(o,a)),Promise.resolve().then(async()=>s+await this.answers.get(o)).then(c=>(this.answers.set(o,c),c))}buildGenerateFailMessage(e){return this.errorPrefix+Qm(String(e!=null?e:"e"))}_generateAnswerSync(e,n){const s=performance.now();try{const o=this.getConfig();for(let a=0;a<this.maxAttempts;a++){const i=this._runCheck(s,e,n,o,a);if(i)return i}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}async _generateAnswerAsync(e,n){const s=performance.now();try{let o=null;const a=this.getConfig();for(let i=0;i<this.maxAttempts;i++){(!o||o.timeRemaining()<=0)&&(o=await PK());const l=this._runCheck(s,e,n,a,i);if(l)return l}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}_generateRequirementsTokenAnswerBlocking(){let e="e";const n=performance.now();try{const s=this.getConfig();return s[3]=1,s[9]=Math.round(performance.now()-n),Qm(s)}catch(s){e=Qm(String(s))}return this.errorPrefix+e}getConfig(){var e,n,s,o;return[(screen==null?void 0:screen.width)+(screen==null?void 0:screen.height),""+new Date,(e=performance==null?void 0:performance.memory)==null?void 0:e.jsHeapSizeLimit,Math==null?void 0:Math.random(),navigator.userAgent,Lp(Array.from(document.scripts).map(a=>a==null?void 0:a.src).filter(a=>a)),(s=((n=Array.from(document.scripts||[]).map(a=>{var i;return(i=a==null?void 0:a.src)==null?void 0:i.match("c/[^/]*/_")}).filter(a=>a==null?void 0:a.length)[0])!=null?n:[])[0])!=null?s:document.documentElement.getAttribute("data-build"),navigator.language,(o=navigator.languages)==null?void 0:o.join(","),Math==null?void 0:Math.random(),NK(),Lp(Object.keys(document)),Lp(Object.keys(window)),performance.now(),this.sid,[...new URLSearchParams(window.location.search).keys()].join(","),navigator==null?void 0:navigator.hardwareConcurrency,performance.timeOrigin]}}function Lp(t){return t[Math.floor(Math.random()*t.length)]}function jK(){return""+Math.random()}function NK(){const t=Lp(Object.keys(Object.getPrototypeOf(navigator)));try{return"".concat(t,"").concat(navigator[t].toString())}catch(e){return"".concat(t)}}function Qm(t){return t=JSON.stringify(t),window.TextEncoder?btoa(String.fromCharCode(...new TextEncoder().encode(t))):btoa(unescape(encodeURIComponent(t)))}function PK(){return new Promise(t=>{(window.requestIdleCallback||RK)(n=>{t(n)},{timeout:10})})}function RK(t){return setTimeout(()=>{t({timeRemaining:()=>1,didTimeout:!1})},0),0}const yr=new IK,tA=new WeakMap;function px(t,e){tA.set(t,e)}function nA(t){return tA.get(t)}const LK=0,OK=1,DK=2,sA=3,oA=4,FK=5,BK=6,UK=24,$K=7,VK=8,Xs=9,HK=10,GK=11,WK=12,zK=13,qK=14,YK=15,gx=16,ZK=17,KK=18,QK=19,JK=23,XK=20,eQ=21,tQ=22,nQ=25,sQ=26,oQ=27,aQ=28,rQ=29,aA=30,iQ=33,lQ=34,Oe=new Map;let Qr=0,V6=Promise.resolve();function rA(t){const e=V6.then(t,t);return V6=e.then(()=>{},()=>{}),e}async function ff(){for(;Oe.get(Xs).length>0;){const[t,...e]=Oe.get(Xs).shift(),n=Oe.get(t)(...e);n&&typeof n.then=="function"&&await n,Qr++}}function cQ(t){return rA(()=>new Promise((e,n)=>{let s=!1;setTimeout(()=>{s=!0,e(""+Qr)},500),Oe.set(sA,o=>{s||(s=!0,e(btoa(""+o)))}),Oe.set(oA,o=>{s||(s=!0,n(btoa(""+o)))}),Oe.set(aA,(o,a,i,l)=>{const c=Array.isArray(l),d=c?i:[],u=(c?l:i)||[];Oe.set(o,(...f)=>{if(s)return;const p=[...Oe.get(Xs)];if(c)for(let g=0;g<d.length;g++){const h=d[g],x=f[g];Oe.set(h,x)}return Oe.set(Xs,[...u]),ff().then(()=>Oe.get(a)).catch(g=>""+g).finally(()=>{Oe.set(Xs,p)})})});try{Oe.set(Xs,JSON.parse(Ov(atob(t),""+Oe.get(gx)))),ff().catch(o=>{e(btoa(Qr+": "+o))})}catch(o){e(btoa(Qr+": "+o))}}))}function dQ(t,e){return rA(()=>new Promise((n,s)=>{var i;const o=(i=nA(t!=null?t:{}))!=null?i:"";uQ(),Qr=0,Oe.set(gx,o);let a=!1;setTimeout(()=>{a=!0,n(""+Qr)},500),Oe.set(sA,l=>{a||(a=!0,n(btoa(""+l)))}),Oe.set(oA,l=>{a||(a=!0,s(btoa(""+l)))}),Oe.set(aA,(l,c,d,u)=>{const f=Array.isArray(u),m=f?d:[],p=(f?u:d)||[];Oe.set(l,(...g)=>{if(a)return;const x=[...Oe.get(Xs)];if(f)for(let v=0;v<m.length;v++){const y=m[v],b=g[v];Oe.set(y,b)}return Oe.set(Xs,[...p]),ff().then(()=>Oe.get(c)).catch(v=>""+v).finally(()=>{Oe.set(Xs,x)})})});try{Oe.set(Xs,JSON.parse(Ov(atob(e),""+Oe.get(gx)))),ff().catch(l=>{n(btoa(Qr+": "+l))})}catch(l){n(btoa(Qr+": "+l))}}))}function Ov(t,e){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t.charCodeAt(s)^e.charCodeAt(s%e.length));return n}function uQ(){Oe.clear(),Oe.set(LK,cQ),Oe.set(OK,(t,e)=>Oe.set(t,Ov(""+Oe.get(t),""+Oe.get(e)))),Oe.set(DK,(t,e)=>Oe.set(t,e)),Oe.set(FK,(t,e)=>{const n=Oe.get(t);Array.isArray(n)?n.push(Oe.get(e)):Oe.set(t,n+Oe.get(e))}),Oe.set(oQ,(t,e)=>{const n=Oe.get(t);Array.isArray(n)?n.splice(n.indexOf(Oe.get(e)),1):Oe.set(t,n-Oe.get(e))}),Oe.set(rQ,(t,e,n)=>Oe.set(t,Oe.get(e)<Oe.get(n))),Oe.set(iQ,(t,e,n)=>{const s=Number(Oe.get(e)),o=Number(Oe.get(n));Oe.set(t,s*o)}),Oe.set(BK,(t,e,n)=>Oe.set(t,Oe.get(e)[Oe.get(n)])),Oe.set($K,(t,...e)=>Oe.get(t)(...e.map(n=>Oe.get(n)))),Oe.set(ZK,(t,e,...n)=>{try{const s=Oe.get(e)(...n.map(o=>Oe.get(o)));if(s&&typeof s.then=="function")return s.then(o=>{Oe.set(t,o)}).catch(o=>{Oe.set(t,""+o)});Oe.set(t,s)}catch(s){Oe.set(t,""+s)}}),Oe.set(zK,(t,e,...n)=>{try{Oe.get(e)(...n)}catch(s){Oe.set(t,""+s)}}),Oe.set(VK,(t,e)=>Oe.set(t,Oe.get(e))),Oe.set(HK,window),Oe.set(GK,(t,e)=>{var n,s;return Oe.set(t,(s=((n=Array.from(document.scripts||[]).map(o=>{var a;return(a=o==null?void 0:o.src)==null?void 0:a.match(Oe.get(e))}).filter(o=>o==null?void 0:o.length)[0])!=null?n:[])[0])!=null?s:null)}),Oe.set(WK,t=>Oe.set(t,Oe)),Oe.set(qK,(t,e)=>Oe.set(t,JSON.parse(""+Oe.get(e)))),Oe.set(YK,(t,e)=>Oe.set(t,JSON.stringify(Oe.get(e)))),Oe.set(KK,t=>Oe.set(t,atob(""+Oe.get(t)))),Oe.set(QK,t=>Oe.set(t,btoa(""+Oe.get(t)))),Oe.set(XK,(t,e,n,...s)=>Oe.get(t)===Oe.get(e)?Oe.get(n)(...s):null),Oe.set(eQ,(t,e,n,s,...o)=>Math.abs(Oe.get(t)-Oe.get(e))>Oe.get(n)?Oe.get(s)(...o):null),Oe.set(JK,(t,e,...n)=>Oe.get(t)!==void 0?Oe.get(e)(...n):null),Oe.set(UK,(t,e,n)=>Oe.set(t,Oe.get(e)[Oe.get(n)].bind(Oe.get(e)))),Oe.set(lQ,(t,e)=>{try{const n=Oe.get(e);return Promise.resolve(n).then(s=>{Oe.set(t,s)})}catch(n){return}}),Oe.set(tQ,(t,e)=>{const n=[...Oe.get(Xs)];return Oe.set(Xs,[...e]),ff().catch(s=>{Oe.set(t,""+s)}).finally(()=>{Oe.set(Xs,n)})}),Oe.set(aQ,()=>{}),Oe.set(sQ,()=>{}),Oe.set(nQ,()=>{})}const fQ="https://challenges.cloudflare.com/turnstile/v0/api.js",mQ="chatgpt-paid",pQ="chatgpt-freeaccount",hx="chatgpt-noauth",H6={[mQ]:"0x4AAAAAAASbFNinhLLnW5f1",[pQ]:"0x4AAAAAAACPe2BTwOIpYk6H",[hx]:"0x4AAAAAAASbHVR44GU82lOI"};class fg{toString(){return JSON.stringify(this.toJSON())}}class E_ extends fg{constructor(e){super(),this.message=e,this.message=e}toJSON(){return{"Turnstile-Internal-Error":this.message}}}class gQ extends fg{constructor(e){super(),this.errorCode=e,this.errorCode=e}toJSON(){return{"Turnstile-Client-Error":this.errorCode}}}class hQ{constructor(){Q(this,"app",hx);Q(this,"status","idle");Q(this,"turnstileInstancePromise",null);Q(this,"enforcementTokenPromise",null);Q(this,"enforcementTokenCache",new WeakMap);Q(this,"requestStartTimeMs",0);Q(this,"_onCompleted");Q(this,"_onError");Q(this,"dxPromiseCache",new Map)}async initializeAndGatherData(e){this._getOrCreateInstance(e)}cacheEnforcementToken(e,n){n&&this.enforcementTokenCache.set(e,n)}async _getOrCreateInstance(e){var n,s,o;return!((n=e.turnstile)!=null&&n.required)||(s=e.turnstile)!=null&&s.dx?null:(this.app!==e.persona&&(this.app=e.persona,this.turnstileInstancePromise=this._getTurnstileInstancePromise()),(o=this.turnstileInstancePromise)!=null?o:new E_("Turnstile instance not initialized."))}getEnforcementTokenSync(e){const n=this.enforcementTokenCache.get(e);return n!=null?n:null}async getEnforcementToken(e){var n;if((n=e.turnstile)!=null&&n.dx){const s=e.turnstile.dx,o=nA(e),a=o?"".concat(o,"::").concat(s):s,i=this.dxPromiseCache.get(a);if(i)return i;const c=dQ(e,s).then(d=>(d&&this.enforcementTokenCache.set(e,d),d)).finally(()=>{this.dxPromiseCache.delete(a)});return this.dxPromiseCache.set(a,c),c}return this.startEnforcement(e).then(s=>(this.enforcementTokenPromise=null,s?s.toString():null))}async startEnforcement(e){var n,s;return(n=e.turnstile)!=null&&n.required?(s=e.turnstile)!=null&&s.dx?this.getEnforcementToken(e):this.enforcementTokenPromise!==null?this.enforcementTokenPromise:this.enforcementTokenPromise=this._getEnforcementToken(e):null}precomputeEnforcementToken(e){var s;const n=this.enforcementTokenCache.get(e);return n?Promise.resolve(n):(s=e.turnstile)!=null&&s.dx?this.getEnforcementToken(e):this.startEnforcement(e).then(o=>{var a;return typeof o=="string"?o:(a=o==null?void 0:o.toString())!=null?a:null})}async _getEnforcementToken(e,n){const s=await this._getOrCreateInstance(e);return s instanceof fg||s===null?s:new Promise((o,a)=>{this.setOnCompleted(i=>{const l=performance.now()-this.requestStartTimeMs;Re.addAction("turnstile_get_token_success",{app:this.app.toString(),durationMs:l}),o(i)}),this.setOnError(i=>{if(!n)this._getEnforcementToken(e,!0).then(o,a);else{const l=performance.now()-this.requestStartTimeMs;Re.addAction("turnstile_get_token_error",{app_release:"7b4ad770564e1a05033d9481af8a607f0f63bc7b",error:i,app:this.app.toString(),durationMs:l}),o(new gQ(i))}}),this.setStatus("ready"),this.requestStartTimeMs=performance.now(),s.reset(),s.execute()})}setStatus(e){this.status=e}onCompleted(e){var n;(n=this._onCompleted)==null||n.call(this,e)}setOnCompleted(e){this._onCompleted=e}onError(e){var n;(n=this._onError)==null||n.call(this,e)}setOnError(e){this._onError=e}onExpired(){this.enforcementTokenPromise=null}_getTurnstileInstancePromise(e){if(this.turnstileInstancePromise!==null)if(e)this.turnstileInstancePromise.then(n=>{n instanceof fg||n.remove()}),this.turnstileInstancePromise=null;else return this.turnstileInstancePromise;return this.turnstileInstancePromise=new Promise((n,s)=>{var d,u;const o="onloadTurnstileCallback";Object.defineProperty(window,o,{value:()=>{var m;if(this.status==="ready")return;this.setStatus("script_loaded");const{turnstile:f}=window;if(f===null){this.setStatus("error"),e?(Re.addAction("turnstile_instance_missing",{app_release:"7b4ad770564e1a05033d9481af8a607f0f63bc7b",app:this.app.toString()}),n(new E_("Turnstile instance missing"))):this._getTurnstileInstancePromise(!0).then(n,s);return}f.render("#"+a,{sitekey:(m=H6[this.app])!=null?m:H6[hx],execution:"execute",callback:this.onCompleted.bind(this),"error-callback":this.onError.bind(this),"expired-callback":this.onExpired.bind(this)}),n(f)}});const a="cf-turnstile",i="cf-turnstile-script";(d=document.getElementById(a))==null||d.remove(),(u=document.getElementById(i))==null||u.remove();const l=document.createElement("div");l.id=a,l.hidden=!0,document.body.appendChild(l),this.setStatus("loading");const c=document.createElement("script");c.id=i,c.src=fQ+"?onload=".concat(o),c.async=!0,c.defer=!0,c.onerror=()=>{this.setStatus("error"),e?(Re.addAction("turnstile_script_load_error",{app_release:"7b4ad770564e1a05033d9481af8a607f0f63bc7b",app:this.app.toString()}),n(new E_("Turnstile script failed to load"))):this._getTurnstileInstancePromise(!0).then(n,s)},document.body.appendChild(c)}),this.turnstileInstancePromise}}const mf=new hQ,_Q=1e3*60*9;var _c=(t=>(t.ChatRequirementsToken="OpenAI-Sentinel-Chat-Requirements-Token",t.TurnstileToken="OpenAI-Sentinel-Turnstile-Token",t.ProofToken="OpenAI-Sentinel-Proof-Token",t.Token="OpenAI-Sentinel-Token",t))(_c||{});let xQ=-1,zs=null;const yQ="2115167980";function vQ(){try{const t=xs(),e=ye(t,yQ);return e!=null?e:!1}catch(t){return!1}}async function bQ(t){const e=await ge.safePost("/sentinel/chat-requirements",{requestBody:{p:t},authOption:nn.SendIfAvailable});return px(e,t),e}async function CQ(t){const n=await ge.safePost("/sentinel/chat-requirements/prepare",{requestBody:{p:t},authOption:nn.SendIfAvailable}),s={token:void 0,persona:n.persona,turnstile:n.turnstile,proofofwork:n.proofofwork,force_login:n.force_login};px(s,t);const[o,a]=await Promise.all([yr.getEnforcementToken(s,{forceSync:!0}),mf.getEnforcementToken(s)]),i={prepare_token:n.prepare_token};o&&(i.proofofwork=o),a&&(i.turnstile=a);const c=await ge.safePost("/sentinel/chat-requirements/finalize",{requestBody:i,authOption:nn.SendIfAvailable});return Object.assign(s,c),s.persona=c.persona,px(s,t),a&&mf.cacheEnforcementToken(s,a),s}function SQ(){if(zs){const{chatRequirements:t,expiration:e}=zs;if(Date.now()>=e)return zs=null,null;if(t)return zs=null,t}return null}function iA(t=!1){if(zs){const{expiration:o,chatRequirementsPromise:a}=zs;if(Date.now()<o)try{return t||(zs=null),a}catch(i){}else a.then(i=>Re.addAction("chat_requirements_cache_expired",{app:i.persona.toString()}));zs=null}const e=yr.getRequirementsTokenBlocking();let n;vQ()?n=CQ(e):n=bQ(e);const s=++xQ;return t&&(zs={id:s,chatRequirements:null,chatRequirementsPromise:n.then(o=>((zs==null?void 0:zs.id)===s&&(zs.chatRequirements=o),o)),expiration:Date.now()+_Q}),n}const wQ=window.location.origin+"/backend-api/sentinel/sdk.js",kQ="https://sentinel.openai.com/backend-api/sentinel/sdk.js";function EQ(t){return new Promise((e,n)=>{const s=document.createElement("script");s.type="text/javascript",s.src=t,s.async=!0,s.defer=!0,s.onload=e,s.onerror=n,document.getElementsByTagName("head")[0].appendChild(s)})}function lA(t){let e;return()=>(e||(e=EQ(t)),e)}const TQ=lA(wQ),MQ=lA(kQ);function cA(t,e){var o;return(((o=e==null?void 0:e.sdkVariant)!=null?o:"chatgpt")==="openai"?MQ:TQ)().then(()=>window.SentinelSDK.token(t))}function Dv(t,e,n,s){const o={};return t!=null&&t.token&&(o["OpenAI-Sentinel-Chat-Requirements-Token"]=t.token),e&&(o["OpenAI-Sentinel-Turnstile-Token"]=e),n&&(o["OpenAI-Sentinel-Proof-Token"]=n),s&&(o["OpenAI-Sentinel-Token"]=s),o}async function AQ(){try{const t=await iA(!0);t&&(await mf.precomputeEnforcementToken(t),await yr.startEnforcement(t))}catch(t){}}function dA(t,e){var l;const n=!!((l=e==null?void 0:e.prefetchIds)!=null&&l.length),s=performance.now(),o=[],a=SQ();if(a==null)return o.push("chatReq"),iA().then(i);return i(a);function i(c){c.force_login&&Zt(t,{fallbackScreenHint:"login"});const d=mf.getEnforcementTokenSync(c);if(d==null)return o.push("turnstile"),mf.getEnforcementToken(c).then(u);return u(d);function u(f){const m=performance.now(),p=yr.getEnforcementTokenSync(c);if(p==null)return o.push("proofofwork"),yr.getEnforcementToken(c,{forceSync:n}).then(g);return g(p);function g(h){const x=String(performance.now()-m),v=o.includes("chatReq")?"false":"true",y=o.includes("turnstile")?"false":"true",b=o.includes("proofofwork")?"false":"true";return Ie.hist(je.DEFAULT,"chat_req_time",[{key:"wasChatReqSync",value:v},{key:"wasTurnstileSync",value:y},{key:"wasProofofworkSync",value:b}],performance.now()-s),ii(xs(),{eventName:"chatgpt_web_completion_integrity_checks",value:o.length===0?"true":"false",metadata:{wasChatReqSync:v,wasTurnstileSync:y,wasProofofworkSync:b,isPrefetchInitialLoad:n?"true":"false",powTime:x}}),{chatReq:c,turnstileToken:f,proofToken:h}}}}}var io=(t=>(t.Success="success",t.Error="error",t.Canceled="canceled",t))(io||{});const IQ=1e3,jQ=IQ*60,NQ=jQ*60;function Fv(){var n;const t=(n=gt.getItem(Ue.ResumeTokenStore))!=null?n:{};return Object.fromEntries(Object.entries(t).filter(([s,o])=>o.expiresAt>Date.now()))}function uA(t){gt.setItem(Ue.ResumeTokenStore,t)}function PQ(t,e){const n=Fv();n[t]={token:e,expiresAt:Date.now()+NQ},uA(n)}function RQ(t){var n;return(n=Fv()[t])==null?void 0:n.token}function LQ(t){const e=Fv();delete e[t],uA(e)}function OQ(){gt.removeItem(Ue.ResumeTokenStore)}const Hu={set:PQ,get:RQ,remove:LQ,clear:OQ};function Bv(t){return ye(t,"988697485")}const fA=sn(t=>St(()=>ed(t,Lt.Moonshine)&&ed(t,Lt.Sunshine))),DQ=sn(t=>St(()=>Bv(t)&&t1(t)&&fA(t)===!0&&ed(t,Lt.UkdvthEntrypointVisible)===!0)),FQ=sn(t=>St(()=>Bv(t)&&fA(t)&&ed(t,Lt.UkdvthMemoryEnabled))),t1=t=>FQ(t)===!0,mA=sn(()=>If(Ue.LastOpenedPulseId,()=>null)),vGe=t=>sn(e=>St(()=>mA(e)===t));function bGe(t){"use forget";const e=G.c(4),n=V();let s,o;e[0]!==n||e[1]!==t?(s=()=>{t&&mA.set(n,t)},o=[t,n],e[0]=n,e[1]=t,e[2]=s,e[3]=o):(s=e[2],o=e[3]),_.useEffect(s,o)}function qf(t){return t.content_type==="card"}function G6(t){return t.replace("..."," ")}function BQ(t,e){const n=t.filter(qf),o=n.findIndex(a=>a.id===e)+1;return o<n.length?n[o]:null}function UQ(){"use forget";return uh("/pulse/*")!=null}function $Q(t){switch(t.type){case"card":return"feed/card/".concat(t.card_id,"/conversation");case"feedback-conversation":return"feed/feedback/conversation"}}function VQ(t,e){e.type==="feedback-conversation"&&e.feedback_card_id&&t.searchParams.set("card_id",e.feedback_card_id)}function pA(t){return{url:t,fallback_url:t,id:t}}function gA(t,e){return Rr(this,null,function*(){let n=null;try{for(var s=jo(t),o,a,i;o=!(a=yield new Jn(s.next())).done;o=!1){const l=a.value;if("response"in l)yield l;else if(l.event==="delta_encoding"){const c=String(l.data);if(e==null||e(c),c==="v1")n=new HQ;else throw new Error("[delta] unknown delta encoding: ".concat(c))}else if(l.event==="delta"){if(!n)throw new Error("[delta] delta event before delta_encoding");yield{data:n.applyDelta(l.data)}}else yield l}}catch(a){i=[a]}finally{try{o&&(a=s.return)&&(yield new Jn(a.call(s)))}finally{if(i)throw i[0]}}})}var hA=(t=>(t.V1="v1",t))(hA||{});class HQ{constructor(){Q(this,"prevObjByChannel",[]);Q(this,"prevDelta",{channel:0,op:"add",path:"",value:void 0})}applyDelta(e){try{const n=this.decodeDelta(e),s=n.channel,o=this.prevObjByChannel[s],a=zQ(o,n);return this.prevObjByChannel[s]=a,a}catch(n){Re.addError("Error applying delta: ".concat(n))}}decodeDelta(e){WQ(e);const n=GQ(e,this.prevDelta),s=_A(n);return this.prevDelta=s,s}}function GQ(t,e){for(const[n,s]of xA)n!=="value"&&!(s in t)&&(t[s]=e[n]);return t}function _A(t){const e=t;for(const[n,s]of xA)s in t&&(e[n]=t[s],delete t[s]);return e.op==="patch"&&(e.value=e.value.map(_A)),e}function WQ(t){if(!t||typeof t!="object")throw new Error("Unexpected delta non-object")}const xA=[["channel","c"],["path","p"],["op","o"],["value","v"]];function zQ(t,e){return Lc({__root:t},s=>yA(s,e)).__root}function yA(t,e){var o;const n=ZQ((o=e.path)!=null?o:"");for(let a=0;a<n.length-1;a++)t[n[a]]===void 0&&(typeof n[a+1]=="number"?t[n[a]]=[]:t[n[a]]={}),t=t[n[a]];const s=n[n.length-1];switch(e.op){case"patch":for(const a of e.value){const i={__root:t[s]};yA(i,a),t[s]=i.__root}break;case"add":Array.isArray(t)?t.splice(s,0,e.value):t[s]=e.value;break;case"remove":Array.isArray(t)?t.splice(s,1):delete t[s];break;case"replace":t[s]=e.value;break;case"append":if(typeof t[s]=="string")t[s]+=e.value;else if(Array.isArray(t[s]))t[s].push(...KQ(e.value));else if(W6(t[s])&&W6(e.value))for(const a in e.value)t[s][a]=e.value[a];else t[s]=e.value;break;case"truncate":t[s]&&(typeof t[s]=="string"?t[s]=t[s].substring(0,e.value):Array.isArray(t[s])&&(t[s].length=e.value));break;default:throw new Error("Unknown json delta operation")}}function qQ(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}const YQ=new RegExp("^(?:0|[1-9]\\d*)$","d");function ZQ(t){const e=["__root"];if(t==="")return e;t[0]==="/"&&(t=t.substring(1));for(const n of t.split("/"))YQ.test(n)?e.push(parseInt(n,10)):e.push(qQ(n));return e}function KQ(t){return Array.isArray(t)?t:[t]}function W6(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function QQ(t){let e=!1;const n=[],s=[];function o(c){n.length>0?n.shift()(c):s.push(c)}function a(c){e||o({value:c,done:!1})}function i(){e||(e=!0,n.forEach(c=>c({value:void 0,done:!0})),n.length=0)}function l(c){e||(o(Promise.reject(c)),i())}try{t(a,i,l)}catch(c){l(c)}return{next(){return new Promise(c=>{s.length>0?c(s.shift()):e?c({value:void 0,done:!0}):n.push(c)})},[Symbol.asyncIterator](){return this}}}function T_(t){var e,n;return(n=(e=t.headers.get("x-request-id"))!=null?e:t.headers.get("cf-ray"))!=null?n:void 0}function mg(t,{accessToken:e,ctx:n,method:s,headers:o,body:a,intercomEventOnError:i,signal:l,observer:c}={}){return QQ((d,u,f)=>{let m=!1,p=!1,g=null,h=!1,x=!1;const v=(E,T,M)=>{const A={reason:E,source:T,requestUrl:t};if(typeof navigator<"u"&&(A.navigator_online=navigator.onLine),g){A.response_status=g.status;const N=T_(g);N&&(A.response_request_id=N)}const I=uV(M);return Object.entries(I).forEach(([N,L])=>{L!==void 0&&(A[N]=L)}),A},y=(E,T,M)=>{if(h||x||E==="error")return;x=!0;const A=v(E,T,M);B.logValueEventWithStatsig({segmentEventName:"request_stream_no_events",statsigEventName:"chatgpt_request_stream_no_events",data:A})},b=void 0;function C(E,T="manual_error"){var M;if(m)return E;m=!0,b==null||b({reason:"error",source:T,error:E});try{return f(E),(M=c==null?void 0:c.onClose)==null||M.call(c,"error",E),E}finally{E instanceof $n?(fV(E,"stream"),mV(E),i&&pV(i,{url:E.url,message:E.message})):(Re.addError(E),B.logValueEventWithStatsig({segmentEventName:"request_stream_error",statsigEventName:"chatgpt_request_stream_error",data:{error:E instanceof Error?E.message:String(E)}}))}}function S(E){var T,M,A;if(!m)if(m=!0,l!=null&&l.aborted){const I=(T=l.reason)!=null?T:new DOMException("Aborted","AbortError");b==null||b({reason:"aborted",source:"abort_signal",error:I}),y("aborted","abort_signal",I),f(I),(M=c==null?void 0:c.onClose)==null||M.call(c,"aborted",I)}else b==null||b({reason:"completed",source:E}),y("completed",E),(A=c==null?void 0:c.onClose)==null||A.call(c,"completed"),u()}const k=e!=null?e:n?Xy(n):void 0;gV(t,{method:s,credentials:"include",headers:w(w(w({},k?eg({accessToken:k}):lT()),a?{"Content-Type":"application/json"}:null),o),body:a?JSON.stringify(a):void 0,signal:l,openWhenHidden:!0,async onopen(E){var M,A;g=E;const T=(M=E.headers.get("content-type"))!=null?M:"";if(E.ok&&T.includes("text/event-stream"))d({response:E}),(A=c==null?void 0:c.onOpen)==null||A.call(c,E);else if(T.includes("application/json")){const I=await E.json();throw C(new $n(t,E.status,I,T_(E),new Error(JSON.stringify(I))),"onopen_error")}else{const N=(await E.text()).substring(0,1e3);throw C(new $n(t,E.status,{detail:{message:hV,code:"unexpected_content_type",contentType:T,text:N}},T_(E),new Error(N)),"onopen_error")}},onmessage(E){var I;const T=new TextEncoder,M=E.data==="[DONE]";if((I=c==null?void 0:c.onEvent)==null||I.call(c,{byteLength:T.encode(E.data).length,isDoneEvent:M}),E.event==="ping"||!E.data)return;if(M){S("done_event");return}const A=JSON.parse(E.data);if(A.error){const N=new Error(A.error);B.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:N.message,isNetworkError:f_(N),isErrorInMessageData:!0,messageData:A}}),C($n.createWithErrorMessage(t,"server",A.error,void 0,new Error(A.error)),"onmessage_error")}else h=!0,d({event:E.event||void 0,data:A})},onerror(E){const T=E instanceof Error?E:new Error(JSON.stringify(E));throw B.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:T.message,isNetworkError:f_(T),isErrorInMessageData:!1}}),f_(T)?C($n.createWithErrorMessage(t,"client",pi,void 0,T),"onerror"):T.message==="Failed to fetch"?(B.logFailedToFetchError({source:"request_stream"}),C($n.createWithErrorMessage(t,"server","An error occurred. Either the engine you requested does not exist or there was another issue processing your request. ".concat(iT),void 0,T),"onerror")):C(T,"onerror")}}).then(()=>S("fetch_resolved"),C)})}const JQ=t=>new Promise(e=>setTimeout(e,t));function vA(t,c){return Rr(this,null,function*(){var d=c,{shouldRetry:e=()=>!0,retryConfig:{MIN_RETRY_INTERVAL:n,MAX_RETRY_INTERVAL:s,RETRY_FACTOR:o,MAX_RETRY_COUNT:a},onRetry:i}=d,l=ke(d,["shouldRetry","retryConfig","onRetry"]);let u=!1,f=!1,m=l;const p=C=>{const S=C.observer;return U(w({},C),{observer:U(w({},S),{onClose:(k,E)=>{var T;(T=S==null?void 0:S.onClose)==null||T.call(S,k,E),k==="completed"&&(f=!0)}})})};let g=mg(t,p(m)),h=0;for(;!u&&!f;)try{try{for(var x=jo(g),v,y,b;v=!(y=yield new Jn(x.next())).done;v=!1){const C=y.value;"response"in C&&(u=!0),yield C}}catch(y){b=[y]}finally{try{v&&(y=x.return)&&(yield new Jn(y.call(x)))}finally{if(b)throw b[0]}}f=!0}catch(C){if(f)return;if(u||!e(C)||h>=a)throw C;const S=Math.min(n*o**h,s);if(yield new Jn(JQ(S)),h++,i){const k=yield new Jn(i());Ie.count(je.DEFAULT,"chat_requirements.retry_refetch_token"),m=U(w(w({},m),k),{headers:k.headers!==void 0?k.headers:m.headers,body:k.body!==void 0?k.body:m.body})}g=mg(t,p(m))}})}const _o=t=>{if(t.type===Je.Starter&&t.category==="onboarding")return"";switch(t.type){case Je.Reply:return t.text;case Je.Templated:case Je.Starter:case Je.Autocomplete:case Je.Trending:case Je.Capabilities:return t.prompt}},XQ=t=>t.type===Je.Reply,bA=t=>t.type===Je.Starter,Uv=t=>t.type===Je.Autocomplete,pg=t=>t.type===Je.Trending,gg=t=>Uv(t)&&!!t.theme,$v=t=>t.type===Je.Capabilities,eJ=t=>t.type===Je.Templated,tJ=t=>pg(t)||$v(t)||Uv(t)&&!gg(t),n1=(t,e,n,s,o)=>{var a,i,l;switch(Ye.logEvent("chatgpt_prompt_use_suggestion",tJ(t)?"":_o(t),{id:(bA(t)||gg(t)||pg(t))&&(a=t.id)!=null?a:"",index:"".concat(e),type:t.type,theme:pg(t)&&t.theme?t.theme:""}),t.type){case Je.Reply:B.logEvent("Use Suggested Reply",{value:_o(t),prompt_type:Je.Reply,messageId:s});break;case Je.Capabilities:B.logEvent("Use Capabilities Suggestion",{prompt_type:Je.Capabilities,categoryId:t.categoryId,client_thread_id:n,messageId:s});break;case Je.Starter:B.logEvent(o!=null?o:"Use Starter Prompt",{value:_o(t),prompt_type:Je.Starter,title:t.title,body:t.body,id:t.id,category:t.category,client_thread_id:n,messageId:s,index:e,theme:t.theme});break;case Je.Autocomplete:{const c=gg(t);B.logEvent("Use Autocomplete",{value:c?_o(t):"",prompt_type:Je.Autocomplete,title:c?t.title:"",body:c?t.body:"",id:c?t.id:"",category:t.category,index:e,messageId:s,client_thread_id:n,theme:(i=t.theme)!=null?i:""});break}case Je.Trending:{B.logEvent("Use Trending Prompt",{prompt_type:Je.Trending,title:t.title,index:e,messageId:s,client_thread_id:n,theme:(l=t.theme)!=null?l:""});break}}},nJ=(t,e)=>{if(t.length===0)return;const s=he.getCurrentNode(ft(e)).message.id;Ye.logEvent("chatgpt_prompt_show_suggestions","count_".concat(t.length),{type:t[0].type});const o=a=>{var i;for(let l=0;l<a.length;l++){const c=a[l];B.logEventWithStatsig("Show Trending Prompt","chatgpt_prompt_show_suggestion",{type:c.type,id:c.id,index:l,client_thread_id:e,message_id:s,theme:(i=c.theme)!=null?i:""})}};if(t.every(XQ))B.logEvent("Show Suggested Replies",{prompt_count:t.length,prompt_type:Je.Reply,client_thread_id:e,suggestions:t.map(a=>a.text),message_id:s});else if(t.every(bA)){const{isAdditional:a}=t[0];B.logEvent(a?"More Starter Prompts Shown":"Show Starter Prompts",{prompt_count:t.length,prompt_type:Je.Starter,titles:t.map(i=>i.title),bodies:t.map(i=>i.body),ids:t.map(i=>i.id),client_thread_id:e,message_id:s,themes:t.map(i=>{var l;return(l=i.theme)!=null?l:""})}),a&&B.logEvent("Expand More Starter Prompts",{client_thread_id:e,message_id:s}),o(t)}else if(t.every(Uv)){const a=!!t.find(i=>gg(i));B.logEvent("Show Autocomplete Prompts",{prompt_count:t.length,prompt_type:t[0].type,titles:t.map(i=>a?i.title:""),bodies:t.map(i=>a?i.body:""),ids:t.map(i=>a?i.id:""),client_thread_id:e,message_id:s,themes:t.map(i=>{var l;return(l=i.theme)!=null?l:""})})}else t.every(pg)?(B.logEvent("Show Trending Prompts",{prompt_count:t.length,prompt_type:Je.Trending,titles:t.map(a=>a.title),client_thread_id:e,message_id:s}),o(t)):t.every($v)?B.logEvent("Show Capabilities Suggestions",{prompt_count:t.length,prompt_type:Je.Capabilities,category_ids:t.map(a=>a.categoryId),client_thread_id:e,message_id:s}):t.every(eJ)?B.logEvent("Show Templated Suggestions",{prompt_count:t.length,prompt_type:Je.Templated,titles:t.map(a=>a.title),client_thread_id:e,message_id:s}):Re.addError("Unhandled suggestion type",{type:t[0].type})},CGe=t=>{const n=he.getCurrentNode(ft(t)).message.id;B.logEvent("Show Expand More Starter Prompts Button",{client_thread_id:t,message_id:n})},SGe=t=>{const n=he.getCurrentNode(ft(t)).message.id;B.logEvent("Expand More Starter Prompts",{client_thread_id:t,message_id:n})},Do=be({searchPlaceholder:{id:"PromptTextarea.searchPlaceholder",defaultMessage:"Search the web"},internalSearchPlaceholder:{id:"PromptTextarea.internalSearchPlaceholder",defaultMessage:"Ask anything about {workspaceName}..."},thinkPlaceholder:{id:"PromptTextarea.thinkPlaceholder",defaultMessage:"Ask anything"},connectorPlaceholder:{id:"PromptTextarea.connectorPlaceholder",defaultMessage:"Search connected sources"},apiToolPlaceholder:{id:"PromptTextarea.apiToolPlaceholder",defaultMessage:"Use tools"},researchPlaceholder:{id:"PromptTextarea.researchPlaceholder",defaultMessage:"Get a detailed report"},canvasPlaceholder:{id:"PromptTextarea.canvasPlaceholder",defaultMessage:"Write or code"},picturePlaceholder:{id:"PromptTextarea.picturePlaceholder",defaultMessage:"Describe an image"},pictureV2Placeholder:{id:"PromptTextarea.pictureV2Placeholder",defaultMessage:"Describe an image"},tatertotPlaceholder:{id:"PromptTextarea.studyAndLearnPlaceholder",defaultMessage:"Learn something new"},continueGenerating:{id:"PromptTextarea.continueGenerating",defaultMessage:"Continue generating"},stopGenerating:{id:"PromptTextarea.stopGenerating",defaultMessage:"Stop generating"},disallowedByWorkspacePlaceholder:{id:"PromptTextarea.disallowedByWorkspaceReason",defaultMessage:"Your workspace owner hasnt approved this GPT."},pimBlockPlaceholder:{id:"PromptTextarea.pimBlockPlaceholder",defaultMessage:"Potentially Malicious Content Detected"},noModelsAvailablePlaceholder:{id:"PromptTextarea.noModelsAvailablePlaceholder",defaultMessage:"No models available"},requiresPluginsToBeInstalled:{id:"PromptTextarea.requiresPluginsToBeInstalled",defaultMessage:"Requires plugins to be installed"},noTestGizmoId:{id:"PromptTextarea.noTestGizmoId",defaultMessage:"Start by defining your GPT."},searchWith:{id:"PromptTextarea.searchWith",defaultMessage:"Search with {name}"},loading:{id:"PromptTextarea.loading",defaultMessage:"Loading..."},placeholder:{id:"PromptTextarea.placeholder",defaultMessage:"Send a message"},placeholderWithName:{id:"PromptTextarea.placeholderWithName",defaultMessage:"Message {name}"},placeholderAskAnythingVariant:{id:"PromptTextarea.placeholderAskAnythingVariant",defaultMessage:"Ask anything"},placeholderAsyncSteering:{id:"PromptTextarea.placeholderAsyncSteering",defaultMessage:"Provide more detail"},placeholderAskNameAnythingVariant:{id:"PromptTextarea.placeholderAskNameAnythingVariant",defaultMessage:"Ask {name} anything"},continueSharedConversationPlaceholder:{id:"PromptTextarea.continueSharedConversationPlaceholder",defaultMessage:"Send a message to continue the conversation."},readOnlyConversationPlaceholder:{id:"PromptTextarea.readOnlyConversationPlaceholder",defaultMessage:"This conversation is read-only."},sendMessageTooltip:{id:"PromptTextarea.sendMessageTooltip",defaultMessage:"Send message"},unsupportedFileType:{id:"PromptTextarea.unsupportedFileType",defaultMessage:'Uploads with file type "{file_type}" are not supported, please try another file.'},gizmoKnowledgeWarning:{id:"PromptTextarea.gizmoKnowledgeWarning",defaultMessage:"Files uploaded here may be included in conversations with your GPT. Files can be downloaded if Code Interpreter is enabled."},n7jupdSystemHintPlaceholder:{id:"3pa1zs",defaultMessage:"Describe a task"},n7jupdActivePlaceholder:{id:"0qUILF",defaultMessage:"Follow up"}}),hg="prompt-textarea";function Vv(){var t;(t=document.getElementById(hg))==null||t.focus()}const wGe={getAndReset:(t,e)=>{const n=gt.getItem(Ue.RestoreMessageAfterOauthRedirect);return gt.removeItem(Ue.RestoreMessageAfterOauthRedirect),!n||n.userId!==t||e!==n.serverThreadId||Date.now()>n.expiresAt?null:n},set:(t,e,n)=>{const s={userId:t,serverThreadId:e,inputText:n,expiresAt:Date.now()+6e4};gt.setItem(Ue.RestoreMessageAfterOauthRedirect,s)}},oa=()=>{"use forget";const t=G.c(16),e=$s(),n=gr.useStore();let s;t[0]!==n?(s=g=>n.getPersistedSystemHintTrigger(g),t[0]=n,t[1]=s):s=t[1];const o=s;let a;t[2]!==e?(a=g=>e(null,{ifPrevSystemHint:g}),t[2]=e,t[3]=a):a=t[3];const i=a;let l;t[4]!==e?(l=()=>e(null),t[4]=e,t[5]=l):l=t[5];const c=l;let d;t[6]!==e?(d=(g,h,x,v)=>{h?e(g,{analyticsMetadata:x,triggerSource:v}):e(null,{ifPrevSystemHint:g,analyticsMetadata:x})},t[6]=e,t[7]=d):d=t[7];const u=d;let f;t[8]!==e?(f=(g,h)=>{e(g,{analyticsMetadata:h})},t[8]=e,t[9]=f):f=t[9];const m=f;let p;return t[10]!==c||t[11]!==i||t[12]!==o||t[13]!==u||t[14]!==m?(p={getSystemHintModeTrigger:o,clearSystemHintModeTrigger:i,setThreadSystemHintMode:u,clearAllSystemHintModeTriggers:c,updateSystemHint:m},t[10]=c,t[11]=i,t[12]=o,t[13]=u,t[14]=m,t[15]=p):p=t[15],p},kGe=({promptDisabledReason:t,hasPendingFiles:e,hasTextContent:n,isTextContentTooLong:s,hasAsyncTaskPending:o,noSourceSelectedDr:a,isDeepResearchTaskStreaming:i,isThreadHardBlocked:l})=>t||(l?"rate_limit_hard_block":e?"file_upload_pending":o?i?void 0:"async_task_pending":n?s?"text_content_too_long":a?"no_source_selected_dr":void 0:"empty_text_content");function EGe(t,e){const n=Math.ceil(e/4);return typeof(t==null?void 0:t.maxTokens)=="number"&&n>t.maxTokens}function TGe(t,e){return t?e===void 0?!0:e.includes(t):!1}const sJ=t=>{switch(t){case"readOnlyConversation":return{placeholder:Do.readOnlyConversationPlaceholder,isLastingDisabledStyle:!0};case"pimBlock":return{placeholder:Do.pimBlockPlaceholder,isLastingDisabledStyle:!0};case"workspaceDisallowsGizmo":return{placeholder:Do.disallowedByWorkspacePlaceholder,isLastingDisabledStyle:!0};case"noModelsAvailable":return{placeholder:Do.noModelsAvailablePlaceholder,isLastingDisabledStyle:!0};case"requiresPluginsToBeInstalled":return{placeholder:Do.requiresPluginsToBeInstalled,isLastingDisabledStyle:!0};case"loadingPlugins":return{placeholder:Do.loading,isLastingDisabledStyle:!0};case"noTestGizmoId":return{placeholder:Do.noTestGizmoId,isLastingDisabledStyle:!0}}return null},oJ="OAI-Echo-Logs",sc={FOCUS_IN:0,FOCUS_OUT:1,COPY:2,PASTE:3,TOUCH_START:4,TOUCH_END:5},CA=[];function oc(t){return()=>{CA.push({type:t,ts:Math.round(performance.now())})}}const aJ={focusin:oc(sc.FOCUS_IN),focusout:oc(sc.FOCUS_OUT),copy:oc(sc.COPY),paste:oc(sc.PASTE),touchstart:oc(sc.TOUCH_START),touchend:oc(sc.TOUCH_END)};function rJ(t){const e=t!=null?t:document.getElementById(hg);for(const[n,s]of Object.entries(aJ))e==null||e.removeEventListener(n,s),e==null||e.addEventListener(n,s)}function s1(){return{[oJ]:CA.slice(0,10).map(t=>"".concat(t.type,",").concat(t.ts)).join(",")}}var iJ=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},sl="1.6.0",z6=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function lJ(t){var e=new Set([t]),n=new Set,s=t.match(z6);if(!s)return function(){return!1};var o={major:+s[1],minor:+s[2],patch:+s[3],prerelease:s[4]};if(o.prerelease!=null)return function(c){return c===t};function a(l){return n.add(l),!1}function i(l){return e.add(l),!0}return function(c){if(e.has(c))return!0;if(n.has(c))return!1;var d=c.match(z6);if(!d)return a(c);var u={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return u.prerelease!=null||o.major!==u.major?a(c):o.major===0?o.minor===u.minor&&o.patch<=u.patch?i(c):a(c):o.minor<=u.minor?i(c):a(c)}}var cJ=lJ(sl),dJ=sl.split(".")[0],pf=Symbol.for("opentelemetry.js.api."+dJ),gf=iJ;function Yf(t,e,n,s){var o;s===void 0&&(s=!1);var a=gf[pf]=(o=gf[pf])!==null&&o!==void 0?o:{version:sl};if(!s&&a[t]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(i.stack||i.message),!1}if(a.version!==sl){var i=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+t+" does not match previously registered API v"+sl);return n.error(i.stack||i.message),!1}return a[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+sl+"."),!0}function xl(t){var e,n,s=(e=gf[pf])===null||e===void 0?void 0:e.version;if(!(!s||!cJ(s)))return(n=gf[pf])===null||n===void 0?void 0:n[t]}function Zf(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+sl+".");var n=gf[pf];n&&delete n[t]}var uJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},fJ=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},mJ=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return nu("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return nu("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return nu("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return nu("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return nu("verbose",this._namespace,e)},t})();function nu(t,e,n){var s=xl("diag");if(s)return n.unshift(e),s[t].apply(s,fJ([],uJ(n),!1))}var qs;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(qs||(qs={}));function pJ(t,e){t<qs.NONE?t=qs.NONE:t>qs.ALL&&(t=qs.ALL),e=e||{};function n(s,o){var a=e[s];return typeof a=="function"&&t>=o?a.bind(e):function(){}}return{error:n("error",qs.ERROR),warn:n("warn",qs.WARN),info:n("info",qs.INFO),debug:n("debug",qs.DEBUG),verbose:n("verbose",qs.VERBOSE)}}var gJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},hJ=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},_J="diag",Aa=(function(){function t(){function e(o){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var l=xl("diag");if(l)return l[o].apply(l,hJ([],gJ(a),!1))}}var n=this,s=function(o,a){var i,l,c;if(a===void 0&&(a={logLevel:qs.INFO}),o===n){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((i=d.stack)!==null&&i!==void 0?i:d.message),!1}typeof a=="number"&&(a={logLevel:a});var u=xl("diag"),f=pJ((l=a.logLevel)!==null&&l!==void 0?l:qs.INFO,o);if(u&&!a.suppressOverrideMessage){var m=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+m),f.warn("Current logger will overwrite one already registered from "+m)}return Yf("diag",f,n,!0)};n.setLogger=s,n.disable=function(){Zf(_J,n)},n.createComponentLogger=function(o){return new mJ(o)},n.verbose=e("verbose"),n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})(),xJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},yJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vJ=(function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var n=this._entries.get(e);if(n)return Object.assign({},n)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var n=xJ(e,2),s=n[0],o=n[1];return[s,o]})},t.prototype.setEntry=function(e,n){var s=new t(this._entries);return s._entries.set(e,n),s},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var a=new t(this._entries);try{for(var i=yJ(s),l=i.next();!l.done;l=i.next()){var c=l.value;a._entries.delete(c)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return a},t.prototype.clear=function(){return new t},t})(),bJ=Symbol("BaggageEntryMetadata"),CJ=Aa.instance();function SJ(t){return t===void 0&&(t={}),new vJ(new Map(Object.entries(t)))}function MGe(t){return typeof t!="string"&&(CJ.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:bJ,toString:function(){return t}}}function SA(t){return Symbol.for(t)}var wJ=(function(){function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(s){return n._currentContext.get(s)},n.setValue=function(s,o){var a=new t(n._currentContext);return a._currentContext.set(s,o),a},n.deleteValue=function(s){var o=new t(n._currentContext);return o._currentContext.delete(s),o}}return t})(),kJ=new wJ,Fd=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}})(),EJ=(function(){function t(){}return t.prototype.createHistogram=function(e,n){return LJ},t.prototype.createCounter=function(e,n){return RJ},t.prototype.createUpDownCounter=function(e,n){return OJ},t.prototype.createObservableGauge=function(e,n){return FJ},t.prototype.createObservableCounter=function(e,n){return DJ},t.prototype.createObservableUpDownCounter=function(e,n){return BJ},t.prototype.addBatchObservableCallback=function(e,n){},t.prototype.removeBatchObservableCallback=function(e){},t})(),Hv=(function(){function t(){}return t})(),TJ=(function(t){Fd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,s){},e})(Hv),MJ=(function(t){Fd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,s){},e})(Hv),AJ=(function(t){Fd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(n,s){},e})(Hv),Gv=(function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t})(),IJ=(function(t){Fd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Gv),jJ=(function(t){Fd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Gv),NJ=(function(t){Fd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Gv),PJ=new EJ,RJ=new TJ,LJ=new AJ,OJ=new MJ,DJ=new IJ,FJ=new jJ,BJ=new NJ,UJ={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},$J={set:function(t,e,n){t!=null&&(t[e]=n)}},VJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},HJ=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},GJ=(function(){function t(){}return t.prototype.active=function(){return kJ},t.prototype.with=function(e,n,s){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return n.call.apply(n,HJ([s],VJ(o),!1))},t.prototype.bind=function(e,n){return n},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})(),WJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},zJ=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},M_="context",qJ=new GJ,o1=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Yf(M_,e,Aa.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,n,s){for(var o,a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return(o=this._getContextManager()).with.apply(o,zJ([e,n,s],WJ(a),!1))},t.prototype.bind=function(e,n){return this._getContextManager().bind(e,n)},t.prototype._getContextManager=function(){return xl(M_)||qJ},t.prototype.disable=function(){this._getContextManager().disable(),Zf(M_,Aa.instance())},t})(),_x;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(_x||(_x={}));var wA="0000000000000000",kA="00000000000000000000000000000000",YJ={traceId:kA,spanId:wA,traceFlags:_x.NONE},Gu=(function(){function t(e){e===void 0&&(e=YJ),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,n){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,n){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,n){},t})(),Wv=SA("OpenTelemetry Context Key SPAN");function zv(t){return t.getValue(Wv)||void 0}function ZJ(){return zv(o1.getInstance().active())}function qv(t,e){return t.setValue(Wv,e)}function KJ(t){return t.deleteValue(Wv)}function QJ(t,e){return qv(t,new Gu(e))}function EA(t){var e;return(e=zv(t))===null||e===void 0?void 0:e.spanContext()}var JJ=/^([0-9a-f]{32})$/i,XJ=/^[0-9a-f]{16}$/i;function eX(t){return JJ.test(t)&&t!==kA}function tX(t){return XJ.test(t)&&t!==wA}function TA(t){return eX(t.traceId)&&tX(t.spanId)}function nX(t){return new Gu(t)}var A_=o1.getInstance(),MA=(function(){function t(){}return t.prototype.startSpan=function(e,n,s){s===void 0&&(s=A_.active());var o=!!(n!=null&&n.root);if(o)return new Gu;var a=s&&EA(s);return sX(a)&&TA(a)?new Gu(a):new Gu},t.prototype.startActiveSpan=function(e,n,s,o){var a,i,l;if(!(arguments.length<2)){arguments.length===2?l=n:arguments.length===3?(a=n,l=s):(a=n,i=s,l=o);var c=i!=null?i:A_.active(),d=this.startSpan(e,a,c),u=qv(c,d);return A_.with(u,l,void 0,d)}},t})();function sX(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var oX=new MA,aX=(function(){function t(e,n,s,o){this._provider=e,this.name=n,this.version=s,this.options=o}return t.prototype.startSpan=function(e,n,s){return this._getTracer().startSpan(e,n,s)},t.prototype.startActiveSpan=function(e,n,s,o){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):oX},t})(),rX=(function(){function t(){}return t.prototype.getTracer=function(e,n,s){return new MA},t})(),iX=new rX,q6=(function(){function t(){}return t.prototype.getTracer=function(e,n,s){var o;return(o=this.getDelegateTracer(e,n,s))!==null&&o!==void 0?o:new aX(this,e,n,s)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:iX},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,n,s){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,n,s)},t})(),Y6;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Y6||(Y6={}));var Z6;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(Z6||(Z6={}));var K6;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(K6||(K6={}));var AGe=o1.getInstance(),IGe=Aa.instance(),lX=(function(){function t(){}return t.prototype.getMeter=function(e,n,s){return PJ},t})(),cX=new lX,I_="metrics",dX=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return Yf(I_,e,Aa.instance())},t.prototype.getMeterProvider=function(){return xl(I_)||cX},t.prototype.getMeter=function(e,n,s){return this.getMeterProvider().getMeter(e,n,s)},t.prototype.disable=function(){Zf(I_,Aa.instance())},t})(),jGe=dX.getInstance(),uX=(function(){function t(){}return t.prototype.inject=function(e,n){},t.prototype.extract=function(e,n){return e},t.prototype.fields=function(){return[]},t})(),Yv=SA("OpenTelemetry Baggage Key");function AA(t){return t.getValue(Yv)||void 0}function fX(){return AA(o1.getInstance().active())}function mX(t,e){return t.setValue(Yv,e)}function pX(t){return t.deleteValue(Yv)}var j_="propagation",gX=new uX,hX=(function(){function t(){this.createBaggage=SJ,this.getBaggage=AA,this.getActiveBaggage=fX,this.setBaggage=mX,this.deleteBaggage=pX}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return Yf(j_,e,Aa.instance())},t.prototype.inject=function(e,n,s){return s===void 0&&(s=$J),this._getGlobalPropagator().inject(e,n,s)},t.prototype.extract=function(e,n,s){return s===void 0&&(s=UJ),this._getGlobalPropagator().extract(e,n,s)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Zf(j_,Aa.instance())},t.prototype._getGlobalPropagator=function(){return xl(j_)||gX},t})(),NGe=hX.getInstance(),N_="trace",_X=(function(){function t(){this._proxyTracerProvider=new q6,this.wrapSpanContext=nX,this.isSpanContextValid=TA,this.deleteSpan=KJ,this.getSpan=zv,this.getActiveSpan=ZJ,this.getSpanContext=EA,this.setSpan=qv,this.setSpanContext=QJ}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var n=Yf(N_,this._proxyTracerProvider,Aa.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},t.prototype.getTracerProvider=function(){return xl(N_)||this._proxyTracerProvider},t.prototype.getTracer=function(e,n){return this.getTracerProvider().getTracer(e,n)},t.prototype.disable=function(){Zf(N_,Aa.instance()),this._proxyTracerProvider=new q6},t})(),xX=_X.getInstance();function yX(t,e,n,s,o,a){const i=CX(t,e,n,o,a);return IA(n,s,i)}function vX(t,e,n,s,o,a){const{conversationId:i,resumeToken:l,model:c}=e;let d=OA({ctx:t,conversationId:i,resumeToken:l,model:c,turnTracker:n,offset:0,signal:o!=null?o:null});d=LA(d,{ctx:t,model:c,turnTracker:n,signal:o!=null?o:null}),d=DA(d,{turnTracker:n,prepareState:null,signal:o!=null?o:null,f_completion:!0});const f=gA(d,m=>{n.stream_encoding=m});return IA(n,s,jA(f))}const bX=1e3*30,su=xX.getTracer("completion");function P_(t,e){Ie.count(je.DEFAULT,t,[{key:"prepare_sent",value:e&&e!=="none"?"true":"false"},{key:"prepare_succeeded",value:e==="success"?"true":"false"},{key:"prepare_failed",value:e==="failure"?"true":"false"}])}function IA(t,e,n){return Rr(this,null,function*(){var h;let s=!1,o=!1,a=!1,i=!1,l,c,d,u,f;su.startActiveSpan("completion.response",C=>{l=su.startSpan("completion.first_response"),c=su.startSpan("completion.first_token_including_tool_calls"),d=su.startSpan("completion.first_token_including_visible_content"),u=su.startSpan("completion.first_token"),f=C});const m=Date.now();let p=!1,g=setTimeout(()=>{B.logEvent("SSE Response Took Too Long to Come Back",{}),t.logCompletion({type:io.Error,error:{reason:"timeout",message:"SSE Response Took Too Long to Come Back"}}),p=!0},bX);try{e==null||e.logTimingOnce("prompt_submitted");try{for(var x=jo(n),v,y,b;v=!(y=yield new Jn(x.next())).done;v=!1){const C=y.value;yield C,C.type!=="connected"&&g&&(clearTimeout(g),g=null),C.type!=="connected"&&p&&(p=!1,t.logger.info("Late message received after ".concat(Date.now()-m,"ms"),t.createLogPayload()),Ie.count(je.DEFAULT,"conversation.stream.late_message_received",[{key:"trigger",value:(h=t.trigger)!=null?h:"null"}])),C.type==="message"&&(t.onMessageUpdate(C.message),s||(s=!0,l==null||l.end(),e==null||e.logTimingOnce("first_response")),!o&&C.message.author.role===Ke.Assistant&&(o=!0,c==null||c.end(),e==null||e.logTimingOnce("first_assistant_token")),!a&&C.message.author.role===Ke.Assistant&&Xp(C.message)&&(a=!0,d==null||d.end(),e==null||e.logTimingOnce("first_visible_content_token")),!i&&C.message.author.role===Ke.Assistant&&_V(C.message)&&(i=!0,u==null||u.end(),e==null||e.logTimingOnce("first_message_token"))),C.type==="perf_stats"&&t.addServerPerfStats(C),C.type==="server_ste_metadata"&&t.addServerSteMetadata(C),C.type==="message_marker"&&t.onMessageMarker(C),C.type==="done"&&t.onStreamClose()}}catch(y){b=[y]}finally{try{v&&(y=x.return)&&(yield new Jn(y.call(x)))}finally{if(b)throw b[0]}}}catch(C){throw g&&(clearTimeout(g),g=null),C}finally{f==null||f.end()}})}function CX(t,e,n,s,o){return Rr(this,null,function*(){const{conduitToken:a,prepareState:i,model:l,f_completion:c,f_search:d,expireConduit:u}=e,f=hr(3010482349,"".concat(l,"-AAAA"))||hr(3240390095,"".concat(l,"-AAAA")),m=tt(t)?f?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon";let p="".concat(m,"/conversation");c&&(p="".concat(m,"/f/conversation")),e.pulseCompletionParams&&(p="".concat(m,"/").concat($Q(e.pulseCompletionParams)));const g=kX(p);e.pulseCompletionParams&&VQ(g,e.pulseCompletionParams),ye(t,"212625335")&&g.searchParams.set("debug","true"),n.onSentUserMessage();const h=yn()?yield new Jn(Lv()):void 0,x=()=>w(w(w({},s1()),Dv(e.chatReq,e.turnstileToken,e.proofToken,null)),a?{"x-conduit-token":a}:{}),v=()=>NA(e,h),y=async()=>{const k=await dA(t,e.completionMetadata);if(e.chatReq=k.chatReq,e.turnstileToken=k.turnstileToken,e.proofToken=k.proofToken,k.chatReq.force_login)throw new Error("force_login during retry");return{headers:x(),body:v()}};let b=vA(g.toString(),{ctx:t,method:"POST",headers:x(),body:v(),intercomEventOnError:"fetch-error:conversation:new-message",signal:s,observer:{onEvent:k=>{n.onStreamEvent(k.byteLength,k.isDoneEvent)}},shouldRetry:k=>(_g(k)||k instanceof $n&&Zv(k.status))&&ze(t,"603105008").get("retry_stream_requests",!1),retryConfig:Kv(t),onRetry:y});b=LA(b,{ctx:t,model:l,turnTracker:n,signal:s!=null?s:null}),b=DA(b,{turnTracker:n,prepareState:i,signal:s!=null?s:null,f_completion:c!=null?c:null}),c&&o&&Ze(o,k=>{k.stopConduitToken=a!=null?a:null,u&&(k.conduitToken=null),k.prepareState=null,k.lastPrepareTimestamp=null});const S=gA(b,k=>{n.stream_encoding=k});try{yield*u_(jA(S,{onPrematureTermination:()=>{n.onPrematureStreamTermination()}}))}finally{ye(t,"4178431533")&&AQ()}})}function jA(n){return Rr(this,arguments,function*(t,e={}){var o,a,i,l,m;let s=!1;try{for(var c=jo(t),d,u,f;d=!(u=yield new Jn(c.next())).done;d=!1){const p=u.value;if("response"in p){const g=p.response,h=(a=(o=g==null?void 0:g.headers)==null?void 0:o.get("Cf-Ray"))!=null?a:null,x=(l=(i=g==null?void 0:g.headers)==null?void 0:i.get("X-Conduit-Token"))!=null?l:null;yield{type:"connected",serverRequestId:h,interruptConversationToken:x}}else{const g=RA(p.data);g&&(g.type==="done"&&(s=!0),yield g)}}}catch(u){f=[u]}finally{try{d&&(u=c.return)&&(yield new Jn(u.call(c)))}finally{if(f)throw f[0]}}s||((m=e.onPrematureTermination)==null||m.call(e),yield{type:"done"})})}function NA(t,e){var s,o,a,i,l,c,d,u;const n="threadId"in t?t.threadId:void 0;return U(w({action:t.completionType,messages:t.messages.length>0?t.messages.map(PA):void 0,continue_from_shared_conversation_id:"continueFromSharedConversationId"in t&&n==null?t.continueFromSharedConversationId:void 0,branching_from_conversation_id:"branchingFromConversationId"in t&&n==null?t.branchingFromConversationId:void 0,branching_from_message_id:"branchingFromMessageId"in t&&n==null?t.branchingFromMessageId:void 0,continue_from_shared_post_id:"continueFromSharedPostId"in t?t.continueFromSharedPostId:void 0,fork_from_shared_post:"forkFromSharedPost"in t?t.forkFromSharedPost:void 0},"sharedProjectConversationOwnerId"in t&&"sharedProjectConversationId"in t&&t.sharedProjectConversationId&&t.sharedProjectConversationOwnerId?{continue_from_shared_project_conversation_id:t.sharedProjectConversationId,shared_project_conversation_owner_id:t.sharedProjectConversationOwnerId}:{conversation_id:n}),{parent_message_id:t.parentMessageId,model:t.model,timezone_offset_min:new Date().getTimezoneOffset(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,variant_purpose:(s=t.completionMetadata)==null?void 0:s.variantPurpose,suggestions:(o=t.completionMetadata)!=null&&o.suggestions?t.completionMetadata.suggestions.map(f=>_o(f)):void 0,chosen_suggestion:(a=t.completionMetadata)!=null&&a.suggestion?{type:t.completionMetadata.suggestion.type,index:t.completionMetadata.suggestionIndex,source:t.completionMetadata.suggestion.type===Je.Autocomplete?t.completionMetadata.suggestion.source:void 0,user_input:t.completionMetadata.suggestion.type===Je.Autocomplete?t.completionMetadata.suggestion.userInput:void 0}:void 0,history_and_training_disabled:No(t.historyDisabled),conversation_mode:lo((i=t.completionMetadata)==null?void 0:i.conversationMode),force_paragen:No(t.forceParagen),force_paragen_model_slug:t.forceParagenModel,force_indepth_feedback:No(t.forceIndepthFeedback),force_rate_limit:No(t.forceRateLimit),reset_rate_limits:No(t.resetRateLimits),record_rendering:No(t.recordRendering),record_transformed_convo_json:No(t.recordTransformedConvoJson),disable_system_content_toggling:No(t.disableSystemContentToggling),enable_message_followups:t.enableMessageFollowups,source:(l=t.completionMetadata)==null?void 0:l.source,system_hints:(c=t.completionMetadata)==null?void 0:c.systemHints,prefetch_ids:(d=t.completionMetadata)==null?void 0:d.prefetchIds,supports_buffering:!0,supported_encodings:[hA.V1],conversation_origin:Gs(t.conversationOrigin),force_use_search:Gs(t.forceUseSearch),force_disable_features:Gs(t.forceDisableFeatures),client_reported_search_source:(u=t.completionMetadata)==null?void 0:u.searchSource,client_contextual_info:t.contextualInfo,paragen_stream_type_override:Gs(t.paragenStreamType==="none"?null:t.paragenStreamType),paragen_cot_summary_display_override:Gs(t.paragenCotSummaryDisplay==="none"?null:t.paragenCotSummaryDisplay),is_onboarding_conversation:No(t.isOnboardingConversation),is_visible:Gs(t.isVisible),override_infer_treatment:Gs(t.overrideInferTreatment),model_slug_stats_override:Gs(t.modelSlugStatsOverride),is_anon_mode:No(t.isAnonModeEnabled),is_reasoning_skipped:No(t.isReasoningSkipped),async_task_id:Gs(t.asyncTaskId),force_parallel_switch:Gs(t.forceParallelSwitch),thinking_effort:Gs(t.thinkingEffort),juice_score:Gs(t.juiceScore),multimodal_juice_score:Gs(t.multimodalJuiceScore),local_function_names:yn()&&e?[...e]:void 0})}function PA(t){let e=t;return t.clientMetadata&&(e=w({},t),delete e.clientMetadata),e}function No(t){if(t===!0)return t}function Gs(t){if(t!=null)return t}function RA(t){if("type"in t)switch(t.type){case"gizmo_inline_review":return{type:"gizmo_inline_review",gizmoId:t.gizmo_id};case"title_generation":return{type:"title_generation",title:t.title,conversation_id:t.conversation_id};case"moderation":return{type:"moderation",conversationId:t.conversation_id,messageId:t.message_id,isCompletion:t.is_completion,flagged:t.moderation_response.flagged,blocked:t.moderation_response.blocked,shouldDisableConversation:!!t.moderation_response.should_disable_conversation,disclaimers:t.moderation_response.disclaimers,metadata:t.moderation_response.metadata};case"url_moderation":return{type:"url_moderation",conversationId:t.conversation_id,messageId:t.message_id,url:t.url_moderation_result.full_url,isSafe:t.url_moderation_result.is_safe};case"num_variants_in_stream":return{type:"num_variants_in_stream",num_variants_in_stream:t.num_variants_in_stream,display_treatment:t.display_treatment};case"input_message":return{type:"input_message",message:t.input_message,conversationId:t.conversation_id};case"display_crisis_helpline_message":return{type:"display_crisis_helpline_message",text:t.text,links:t.links,conversationId:t.conversation_id,messageId:t.message_id};case"perf_stats":case"conversation_detail_metadata":case"beacon_ui_response":case"resume_conversation_token":case"conversation_async_status":case"server_ste_metadata":case"message_marker":case"survey_campaign_effect":case"system_hint_suggestion":case"display_crisis_helpline_modal":return t;case"message_stream_complete":return{type:"done"};default:return}if(t.message)return{type:"message",message:t.message,conversationId:t.conversation_id}}async function SX(t,e,n=[],s,o){var E,T,M,A,I,N,L;const a=xs();if(!Qh(a,!0)||!MZ(a)||ze(a,"1925940714").get("disable-convo-2",!1))return;const l=At(t),c=ft(t);if(c!=null&&c.prepareRequestBlocked)return;const d=3e3;if(o.delayAfterCompletion&&(c!=null&&c.lastCompletionFinishedTimestamp)){const D=performance.now()-c.lastCompletionFinishedTimestamp,F=d-D;F>0&&await new Promise($=>setTimeout($,F))}const u=(E=c==null?void 0:c.conversationOrigin)!=null?E:null;let f;if(o.isRegen){const D=he.getParentPromptNode(c);f=(T=D==null?void 0:D.id)!=null?T:""}else f=he.getCurrentNode(c).message.id;const m=Cd(),p=wn(()=>bd(a)),g=(M=c==null?void 0:c.conduitToken)!=null?M:null,h=(A=c==null?void 0:c.prepareState)!=null?A:"none",x={threadId:l,prepareState:h,conduitToken:g,continueFromSharedPostId:c==null?void 0:c.continuingFromSharedPostId,forkFromSharedPost:!!(c!=null&&c.continuingFromSharedPostId),continueFromSharedConversationId:c==null?void 0:c.continuingFromSharedConversationId,branchingFromMessageId:c==null?void 0:c.branchingFromMessageId,branchingFromConversationId:c==null?void 0:c.branchingFromConversationId,sharedProjectConversationId:c==null?void 0:c.continuingFromSharedProjectConversationId,sharedProjectConversationOwnerId:(I=c==null?void 0:c.sharedProjectConversationOwner)==null?void 0:I.id,isOnboardingConversation:o.isOnboardingConversation,conversationOrigin:u,model:e,completionType:Xa.Next,completionMetadata:{systemHints:n,conversationMode:(N=c==null?void 0:c.mode)!=null?N:{kind:wt.PrimaryAssistant}},messages:[],parentMessageId:f,recordRendering:m.recordRendering,recordTransformedConvoJson:m.recordTransformedConvoJson,historyDisabled:p,asyncTaskId:(L=c==null?void 0:c.steeringAsyncTaskId)!=null?L:void 0,contextualInfo:YM(a)},v=yn()?await Lv():void 0,y=NA(x,v),b={"x-conduit-token":g!=null?g:"no-token"},C=hr(3010482349,"".concat(e,"-AAAA"))||hr(3240390095,"".concat(e,"-AAAA"));if(C){Ze(t,D=>{D.conduitToken=null,D.prepareState=null});return}const S=tt(a)?C?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon";let k="".concat(S,"/f/conversation/prepare");try{Ze(t,$=>{$.prepareState="sent",$.lastPrepareTimestamp=performance.now()});const D=await Np.post(k,y,{additionalHeaders:b,authOption:nn.SendIfAvailable}),{conduit_token:F}=D;s(F)}catch(D){Ie.count(je.DEFAULT,"conduit_f_conversation_prepare_api_error"),Re.addError(D),!Mv(a)&&Ze(t,$=>{$.conduitToken=null,$.prepareState="failure"})}}const wX=t=>new Promise(e=>setTimeout(e,t));function LA(t,e){return Rr(this,null,function*(){const{MIN_RETRY_INTERVAL:n,MAX_RETRY_INTERVAL:s,RETRY_FACTOR:o,MAX_RETRY_COUNT:a}=Kv(e.ctx),{signal:i}=e;let l=!1;const c={onClose:(C,S)=>{C==="completed"&&(l=!0)}};let d,u,f=t,m=0,p=0,g=0,h=0;for(;f!=null;)try{try{for(var x=jo(f),v,y,b;v=!(y=yield new Jn(x.next())).done;v=!1){const C=y.value;const S="response"in C;!S&&C.data!=null&&typeof C.data=="object"&&"type"in C.data&&C.data.type==="resume_conversation_token"&&"token"in C.data&&"conversation_id"in C.data?(u=String(C.data.token),d=String(C.data.conversation_id),Hu.set(d,u)):yield C,p>0&&(h++,B.logEventWithStatsig("ChatGPT Convo Stream: Resume Succeeded","chatgpt_convo_stream_resume_succeeded",{conversationId:d,offset:m,afterRetryCount:p,successfulResumeCount:h}),p=0),S||m++}}catch(y){b=[y]}finally{try{v&&(y=x.return)&&(yield new Jn(y.call(x)))}finally{if(b)throw b[0]}}B.logEventWithStatsig("ChatGPT Convo Stream: Stream Completed","chatgpt_convo_stream_completed",{conversationId:d,resumeAttempts:g,successfulResumeCount:h}),d!=null&&Hu.remove(d),f=null,l=!0}catch(C){if(l)return;const S=_g(C);p===0&&B.logEventWithStatsig("ChatGPT Convo Stream: Error","chatgpt_convo_stream_error",{conversationId:d,offset:m,isNetworkError:S,successfulResumeCount:h,errorMessage:C instanceof Error?C.message:String(C)});const k=C instanceof $n&&Zv(C.status);if(p<a&&!(i!=null&&i.aborted)&&u!=null&&d!=null&&(_g(C)||k)&&ze(e.ctx,"2489999880").get("is_resume_enabled",!1)){p===0&&B.logEventWithStatsig("ChatGPT Convo Stream: Resume Attempted","chatgpt_convo_stream_resume_attempted",{conversationId:d,offset:m,retryCount:p,successfulResumeCount:h}),p++,g++;const T=Math.min(n*o**p,s)*(.5+Math.random()*.5);yield new Jn(wX(T)),f=OA(U(w({},e),{observer:c,resumeToken:u,conversationId:d,offset:m}))}else{const E=C instanceof $n&&C.status===404;throw(p>=a||E&&p>0)&&B.logEventWithStatsig("ChatGPT Convo Stream: Resume Failed","chatgpt_convo_stream_resume_failed",{conversationId:d,offset:m,afterRetryCount:p,successfulResumeCount:h,isNetworkError:S,is404:E}),f=null,C instanceof $n&&C.status===404&&p>0?(d!=null&&Hu.remove(d),$n.createWithErrorMessage(C.url,"client",pi,void 0,C)):C}}})}function _g(t){return t instanceof Error&&t.message===pi||typeof t=="string"&&t===pi}function Zv(t){return t===408||t===409||t===425||t===429||t===502||t===504}function OA({ctx:t,conversationId:e,resumeToken:n,model:s,turnTracker:o,offset:a,signal:i,observer:l={}}){const c=hr(3010482349,"".concat(s,"-AAAA"))||hr(3240390095,"".concat(s,"-AAAA")),d=tt(t)?c?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon",u={"x-conduit-token":n!=null?n:"no-token"},f="".concat(d,"/f/conversation/resume"),m=t?Xy(t):void 0,p={conversation_id:e,offset:a};return vA(f,{method:"POST",headers:U(w(w(w({},s1()),m?eg({accessToken:m}):lT()),u),{"Content-Type":"application/json"}),body:p,intercomEventOnError:"fetch-error:conversation:new-message",signal:i!=null?i:void 0,observer:U(w({},l),{onEvent:h=>{var x;(x=l.onEvent)==null||x.call(l,h),o.onStreamEvent(h.byteLength,h.isDoneEvent)}}),ctx:t,retryConfig:Kv(t),shouldRetry:h=>(_g(h)||h instanceof $n&&Zv(h.status))&&ze(t,"603105008").get("retry_stream_requests",!1)})}function DA(a,i){return Rr(this,arguments,function*(t,{turnTracker:e,prepareState:n,f_completion:s,signal:o}){try{try{for(var l=jo(t),c,d,u;c=!(d=yield new Jn(l.next())).done;c=!1){const f=d.value;yield f}}catch(d){u=[d]}finally{try{c&&(d=l.return)&&(yield new Jn(d.call(l)))}finally{if(u)throw u[0]}}e.onStreamClose(),s&&P_("conduit_f_conversation_api.success",n)}catch(f){throw Ie.count(je.DEFAULT,"conversation_api.client_request_error"),o!=null&&o.aborted?(e.handleAbort(f),s&&P_("conduit_f_conversation_api.aborted",n)):(e.handleRawError(f instanceof Error||typeof f=="string"?f:JSON.stringify(f)),s&&P_("conduit_f_conversation_api.error",n)),f}})}function Kv(t){const e=is(t,"3165814200");return{MIN_RETRY_INTERVAL:e.get("MIN_RETRY_INTERVAL",300),MAX_RETRY_INTERVAL:e.get("MAX_RETRY_INTERVAL",5e3),RETRY_FACTOR:e.get("RETRY_FACTOR",1.5),MAX_RETRY_COUNT:e.get("MAX_RETRY_COUNT",12)}}function kX(t){try{return new URL(t)}catch(e){return new URL(t,window.location.origin)}}const EX=.5,TX=R(()=>P(()=>import("./i6ahu3iuwhz5y2lv.js"),__vite__mapDeps([9,1,10,11])).then(t=>t.QuietHoursModal));function MX(){const t=AX();return t?t.gapPx>t.viewportHeightPx*EX:!1}function AX(){if(typeof window>"u"||typeof document>"u")return null;const t=document.getElementById("thread");if(!t)return null;const e=t.querySelectorAll('[data-turn="user"]');if(!e.length)return null;const n=e[e.length-1],s=window.innerHeight;if(!Number.isFinite(s)||s<=0)return null;const{bottom:o}=n.getBoundingClientRect();return{gapPx:s-o,viewportHeightPx:s}}var It,BA,xx,wf,Op,UA,$A,VA,HA,GA,WA,zA,qA,YA,ZA,KA,QA,yx,vx,bx,Cx;class FA{constructor(e,n,s,o,a,i,l,c,d,u,f,m,p,g,h,x,v,y,b,C,S=!1,k,E=!1,T=!1,M,A=void 0,I,N,L=!0){ro(this,It);Q(this,"isFirstCompletionInThread");Q(this,"activeBranchLastMessage");Q(this,"messagesToUpdate",{});Q(this,"allIncompleteMessageIds",new Set);Q(this,"responseThreadId");Q(this,"isCompletionBlocked",!1);Q(this,"isEitherFlagged",!1);Q(this,"sentNotification",!1);Q(this,"variantsInStreamInfo");Q(this,"blurDuringCompletionTracker",new mZ);Q(this,"completionLatencyTracker");Q(this,"preflightTime");Q(this,"treatCompletionAsAsync",!1);Q(this,"realtimeAsyncCompletion",!1);Q(this,"resumeToken");Q(this,"placeholderNodeId");ro(this,wf,e=>{var n,s,o;if(this.activeBranchLastMessage&&this.completionLatencyTracker.onResponse(e,this.activeBranchLastMessage,this.responseThreadId),this.responseThreadId===void 0&&"conversationId"in e){const a=e.conversationId;if(this.responseThreadId=a,this.turnTracker.onConversationId(a),Cr(this.conversation.id)&&At(this.conversation.id)!==a&&(yV(this.ctx,this.conversation.id,a),B.logEvent("Attribution: Client Thread to Server Thread",{client_thread_id:this.conversation.id,server_thread_id:a})),this.isContinuingFromSharedConversation&&(Ze(this.conversation.id,l=>{delete l.continuingFromSharedConversationId}),Ye.logEvent("chatgpt_continue_conversation_first_message_sent"),B.logEvent("Continue Conversation: First Message Sent",{forked_conversation_id:a,shared_conversation_id:(n=this.initialThread)==null?void 0:n.continuingFromSharedConversationId})),this.isContinuingFromBranchingConversation&&Ze(this.conversation.id,l=>{delete l.branchingFromConversationId,delete l.branchingFromMessageId}),this.isContinuingFromSharedProjectConversation&&Ze(this.conversation.id,l=>{delete l.continuingFromSharedProjectConversationId,delete l.sharedProjectConversationOwner}),this.isContinuableSharedPost&&Ze(this.conversation.id,l=>{delete l.continuingFromSharedPostId,delete l.forkFromSharedPost}),this.isFirstCompletionInThread){const l=ft(this.conversation.id);if(B.logEvent("Create New Thread"),!this.isHistoryAndTrainingDisabled&&dK(l==null?void 0:l.mode)&&tt(this.ctx)){eo(this.queryClient,he.getGizmoId(l));const c=gi(this.ctx)&&ts(this.ctx);l!=null&&l.disableConversationNavigation||Iv(JM,this.queryClient,a,this.isSnorlaxEnabledForGizmo,void 0,c)}}const i={id:this.requestId,threadId:this.responseThreadId,completionType:this.completionType,eventSource:this.eventSource,model:this.model};if(this.completionType===Xa.Next){const l=he.getConversationTurns(ft(this.conversation.id)),c=l.length,d=l.filter(f=>f.role===Ke.User),u=d&&((s=d[d.length-1])==null?void 0:s.messages[0]);if((u==null?void 0:u.content.content_type)===ut.Text){const f=u.content.parts.join("").length,m=(o=d==null?void 0:d.length)!=null?o:0;i.countConversationTurns=c,i.countUserSubmittedMessages=m,i.countLastUserPromptTextMessageLength=f}}B.logEvent("Generate Completion",i)}switch(e.type){case"num_variants_in_stream":Jt(this,It,zA).call(this,e);break;case"moderation":Jt(this,It,KA).call(this,e);break;case"url_moderation":Jt(this,It,QA).call(this,e);break;case"message":Jt(this,It,yx).call(this,e);break;case"input_message":Jt(this,It,yx).call(this,e);break;case"done":Jt(this,It,bx).call(this);break;case"gizmo_inline_review":Jt(this,It,UA).call(this,e);break;case"title_generation":Jt(this,It,$A).call(this,e);break;case"conversation_detail_metadata":Jt(this,It,VA).call(this,e);break;case"beacon_ui_response":Jt(this,It,HA).call(this,e);break;case"survey_campaign_effect":kK(e);break;case"conversation_async_status":Jt(this,It,GA).call(this,e);break;case"resume_conversation_token":Jt(this,It,WA).call(this,e);break;case"system_hint_suggestion":Jt(this,It,qA).call(this,e);break;case"display_crisis_helpline_message":Jt(this,It,YA).call(this,e);break;case"display_crisis_helpline_modal":Jt(this,It,ZA).call(this,e);break}});Q(this,"debouncedUpdateExistingMessages",mi(()=>{if(this.isCompletionBlocked)return;const e=Object.values(this.messagesToUpdate);e.length!==0&&(Ze(this.conversation.id,n=>{dn.updateTree(n,s=>{for(const o of e)s.updateNodeMessage(o.id,o),o.status!=="in_progress"&&(s.updateNodeMetadata(o.id,{completionSampleFinishTime:Date.now()}),this.allIncompleteMessageIds.delete(o.id))})}),this.messagesToUpdate={})},50,{leading:!0,maxWait:50}));this.ctx=e,this.requestId=n,this.queryClient=s,this.initialThread=o,this.conversation=a,this.parentMessageId=i,this.prependMessages=l,this.promptMessage=c,this.appendMessages=d,this.completionType=u,this.model=f,this.eventSource=m,this.isHistoryAndTrainingDisabled=p,this.startPreflightTime=g,this.isSnorlaxEnabledForGizmo=h,this.isNewThread=x,this.isContinuingFromSharedConversation=v,this.isContinuingFromBranchingConversation=y,this.isContinuingFromSharedProjectConversation=b,this.turnTracker=C,this.isAnonModeEnabled=k,this.isContinuableSharedPost=E,this.isReasoningSkipped=T,this.thinkingEffort=M,this.modelSlugStatsOverride=A,this.asyncTaskId=I,this.expireConduit=L,this.completionLatencyTracker=new TZ(this.requestId,g),this.isFirstCompletionInThread=x||this.isContinuingFromSharedConversation||this.isContinuingFromSharedProjectConversation||this.isContinuableSharedPost||this.isContinuingFromBranchingConversation,N!=null&&N.disablePlaceholder||(this.placeholderNodeId="".concat(e3).concat(n)),S&&(this.sentNotification=!0)}updateBeforeRequest(){NZ.incrementUserMessageCount(tt(this.ctx)?Ho.LoggedIn:Ho.LoggedOut),mr.retainThread(this.conversation.id),Ze(this.conversation.id,e=>{var a,i,l,c,d;e.stopConduitToken=(a=e.conduitToken)!=null?a:null,this.expireConduit&&(e.conduitToken=null),e.prepareState=null,e.lastPrepareTimestamp=null;const n=this.parentMessageId?he.getNode(e,this.parentMessageId):void 0,s=(n==null?void 0:n.message.author.role)===Ke.User,o=MX();this.completionType===Xa.Next&&he.hasUserMessage(e)&&((i=this.promptMessage)==null?void 0:i.author.role)===Ke.User&&!((c=(l=this.promptMessage)==null?void 0:l.metadata)!=null&&c.is_visually_hidden_from_conversation)&&!(s&&o)&&(e.scrollToMessageId=(d=this.promptMessage)==null?void 0:d.id),dn.updateTree(e,(u,f)=>{var p,g;if(this.parentMessageId&&(f=he.getNode(e,this.parentMessageId).id),this.prependMessages)for(const h of this.prependMessages)h.clientMetadata=U(w({},h.clientMetadata),{isOptimistic:!0}),f=u.addMessageNode(f,h);if(this.promptMessage){const h=this.promptMessage;h.clientMetadata=U(w({},h.clientMetadata),{isOptimistic:!0}),f=u.addMessageNode(f,h)}if(this.appendMessages)for(const h of this.appendMessages)h.clientMetadata=U(w({},h.clientMetadata),{isOptimistic:!0}),f=u.addMessageNode(f,h);const m=(g=(p=this.promptMessage)==null?void 0:p.metadata)==null?void 0:g.gizmo_id;if(this.placeholderNodeId){const h=nx("",m?{gizmo_id:m}:void 0,{requestId:this.requestId,isPlaceholder:!0},this.placeholderNodeId);f=u.addMessageNode(f,h)}return f})})}async sendRequest({conduitToken:e,turnstileToken:n,proofToken:s,completionMetadata:o,resolvedParentMessageId:a,messages:i,extraStreamParams:l,chatReq:c,profiler:d}){var g,h,x,v,y,b,C,S,k,E,T,M,A;O6(this.conversation.id,!0);const u=new AbortController;jp.addRequest(this.requestId,u,this.turnTracker);const f=Cd(),m=wn(this.conversation.serverId$);if(this.completionType===Xa.Variant&&m==null){Re.addError("Generating variant without conversation_id"),Jt(this,It,Op).call(this,new Error("Regeneration must have conversation_id"));return}const p=yX(this.ctx,w(w(U(w({conversationOrigin:(h=(g=this.initialThread)==null?void 0:g.conversationOrigin)!=null?h:null,model:this.model,completionType:this.completionType,prepareState:(v=(x=this.initialThread)==null?void 0:x.prepareState)!=null?v:"none",conduitToken:e,threadId:m,isReasoningSkipped:this.isReasoningSkipped,asyncTaskId:this.asyncTaskId,overrideInferTreatment:f.autoSwitcherTreatmentOverride,modelSlugStatsOverride:this.modelSlugStatsOverride,continueFromSharedConversationId:(y=this.initialThread)==null?void 0:y.continuingFromSharedConversationId,branchingFromConversationId:(b=this.initialThread)==null?void 0:b.branchingFromConversationId,branchingFromMessageId:(C=this.initialThread)==null?void 0:C.branchingFromMessageId,sharedProjectConversationOwnerId:(k=(S=this.initialThread)==null?void 0:S.sharedProjectConversationOwner)==null?void 0:k.id,sharedProjectConversationId:(E=this.initialThread)==null?void 0:E.continuingFromSharedProjectConversationId,continueFromSharedPostId:(T=this.initialThread)==null?void 0:T.continuingFromSharedPostId,forkFromSharedPost:(M=this.initialThread)==null?void 0:M.forkFromSharedPost,historyDisabled:this.isHistoryAndTrainingDisabled,isAnonModeEnabled:this.isAnonModeEnabled,parentMessageId:a,messages:i,chatReq:c,turnstileToken:n,proofToken:s,completionMetadata:o,contextualInfo:w({is_dark_mode:xV(),time_since_loaded:Math.floor(performance.now()/1e3),page_height:window.innerHeight,page_width:window.innerWidth,pixel_ratio:window.devicePixelRatio,screen_height:window.screen.height,screen_width:window.screen.width,window_style:Ln(this.ctx).windowStyle},YM(this.ctx)),isOnboardingConversation:o==null?void 0:o.isOnboardingConversation,thinkingEffort:Jt(this,It,BA).call(this),forceParagen:f.forceParagen,forceParagenModel:f.forceParagen?f.forceParagenModel.value:void 0,forceRateLimit:f.forceRateLimit,resetRateLimits:f.resetRateLimits,recordRendering:f.recordRendering,recordTransformedConvoJson:f.recordTransformedConvoJson,disableSystemContentToggling:f.rebaseSystemMessageContent!=null,forceUseSearch:(A=f.forceUseSearch)!=null?A:void 0,paragenStreamType:f.paragenStreamType,paragenCotSummaryDisplay:f.paragenCotSummaryDisplay,forceParallelSwitch:f.forceParallelSwitch,juiceScore:f.juiceScore,multimodalJuiceScore:f.multimodalJuiceScore},Qh(this.ctx)?{f_completion:!0}:{}),{expireConduit:this.expireConduit}),AZ()?{f_search:!0}:{}),l),this.turnTracker,d,u.signal,this.conversation.id);try{try{for(var I=jo(p),N,L,D;N=!(L=await I.next()).done;N=!1){const F=L.value;F.type==="connected"?Jt(this,It,xx).call(this,F):$6(F)&&Tn(this,wf).call(this,F)}}catch(L){D=[L]}finally{try{N&&(L=I.return)&&await L.call(I)}finally{if(D)throw D[0]}}}catch(F){Z4(F)||u.signal.aborted?Jt(this,It,vx).call(this,F):Jt(this,It,Op).call(this,F)}finally{O6(this.conversation.id,!1)}}async sendResumeRequest({conversationId:e,resumeToken:n,profiler:s}){const o=new AbortController;jp.addRequest(this.requestId,o,this.turnTracker),Ze(this.conversation.id,u=>{dn.setRequestIdOnCurrentLeaf(u,this.requestId)});const a=vX(this.ctx,{conversationId:e,resumeToken:n,model:this.model},this.turnTracker,s,o.signal,this.conversation.id);try{try{for(var i=jo(a),l,c,d;l=!(c=await i.next()).done;l=!1){const u=c.value;u.type==="connected"?Jt(this,It,xx).call(this,u):$6(u)&&Tn(this,wf).call(this,u)}}catch(c){d=[c]}finally{try{l&&(c=i.return)&&await c.call(i)}finally{if(d)throw d[0]}}}catch(u){Z4(u)||o.signal.aborted?Jt(this,It,vx).call(this,u):Jt(this,It,Op).call(this,u)}}async maybeSendNotification(){var i;if(this.sentNotification)return;const e=ft(this.conversation.id),n=(i=e==null?void 0:e.title)!=null?i:void 0;if(!n)return;const s=he.getCurrentNode(e).message;if(Xh(s)&&!DZ(s))return;const o=s.content,a=(o==null?void 0:o.content_type)===ut.Text?lK(await P(()=>import("./bp7aioeryj7wbfac.js"),__vite__mapDeps([12,10,1,11,13,14,15,16,17,18,19,20,21,22,23])).then(l=>{var c;return l.markdownToPlaintext((c=o.parts[0])!=null?c:"")}),120):void 0;uf({title:n,subtitle:a,clientThreadId:this.conversation.id}),this.sentNotification=!0}}It=new WeakSet,BA=function(){if(this.model!==B6){const n=wn(()=>bn(this.conversation));if(this.model!==B6&&!n.configurableThinkingEffort)return}if(ze(this.ctx,"790459319").get("show-juice-control",!1))return this.thinkingEffort},xx=function(e){const{serverRequestId:n,interruptConversationToken:s}=e;this.turnTracker.onStreamOpen(s!==null),n&&this.turnTracker.onReceivedServerRequestId(n),s&&Ze(this.conversation.id,o=>{o.conduitToken=s}),SZ(this.requestId,this.model,n,Qs(this.preflightTime))},wf=new WeakMap,Op=function(e){var d,u,f,m;const n=vV(e),s=n.message,o=e instanceof $n?e.code:void 0,a=e instanceof $n?(d=e.detail)==null?void 0:d.can_retry:void 0,i=s===pi,l=i&&!this.treatCompletionAsAsync&&tt(this.ctx)&&ze(this.ctx,"2489999880").get("is_polling_enabled",!1);l&&(this.treatCompletionAsAsync=!0),this.debouncedUpdateExistingMessages.flush(),this.treatCompletionAsAsync&&s===pi&&!l||Ze(this.conversation.id,p=>{dn.updateTree(p,(g,h)=>{var y,b,C,S,k;const x=this.variantsInStreamInfo&&(b=(y=he.getParentPromptNode(p))==null?void 0:y.id)!=null?b:h,v={err:l?wV:s,errType:l?"info":"danger",errCode:l?SV.NetworkErrorWithReconnection:o,completionSampleFinishTime:Date.now(),canRetry:l?!1:a};if(((k=(S=(C=g.getNodeIfExists(x))==null?void 0:C.message)==null?void 0:S.content)==null?void 0:k.content_type)!==ut.Text){const E=nx("");return E.clientMetadata=w(w({},E.clientMetadata),v),g.addMessageNode(x,E)}else g.updateNodeMetadata(x,v)})});try{typeof s=="string"&&s.toLowerCase().includes("blackout hours")&&lt(this.ctx,TX)}catch(p){}try{const p=ft(this.conversation.id),g=he.getLastMessageSystemHints(p);if(g==null?void 0:g.includes(hs)){const x=e instanceof $n?e:void 0,v=x==null?void 0:x.status,y=(u=x==null?void 0:x.isClientError())!=null?u:!1,b=(f=x==null?void 0:x.isServerError())!=null?f:!1,C=i?"network":b?"server":y?"client":"unknown";Re.addAction("agent.conversation.start_failed",{request_id:this.requestId,model:this.model,error_code:o!=null?o:"unknown",is_network_error:i,is_recoverable_error:l,error_status:v,is_client_error:y,is_server_error:b,error_type:C})}}catch(p){}switch(i&&B.logNetworkError({source:"request_stream",type:l?"info_polling":"error"}),o){case Ur.ContentPolicy:case Ur.ContentOrTos:case Uu.ModelCapExceeded:case Uu.HistoryDisabledConversationNotFound:break;default:s!==void 0&&Ye.logEvent("chatgpt_conversation_error_web",s)}if(this.blurDuringCompletionTracker.onMessageError(),I6(n),Jt(this,It,Cx).call(this),ri.publish({kind:"completionFinished",serverThreadId:this.responseThreadId}),e instanceof $n&&e.code===Uu.ModelCapExceeded){const p=(m=e.detail)==null?void 0:m.clears_in;p&&(pK(new Date(Date.now()+p*1e3).toISOString()),setTimeout(()=>{qM()},p*1e3))}},UA=function({gizmoId:e}){Ze(this.conversation.id,n=>{n.promptGptRating={gizmoId:e}})},$A=function(e){Av(this.ctx,e.conversation_id,e.title,mh.Generated),this.isSnorlaxEnabledForGizmo||bV(this.ctx,e.conversation_id,e.title),this.maybeSendNotification()},VA=function(e){const{default_model_slug:n}=e;n&&!ph({id:n},this.ctx)&&Ze(this.conversation.id,o=>{o.defaultModelId=n}),ye(this.ctx,"3315017149")&&tT(e)&&this.queryClient.invalidateQueries({queryKey:nT()}),ef.updateDetails(e)},HA=function(e){_i.updateDetails(e)},GA=function(e){const{async_status:n}=e;n===Xt.REALTIME&&(this.realtimeAsyncCompletion=!0),this.responseThreadId&&Is(this.responseThreadId,{source:ns.SERVER,value:n}),Is(this.conversation.id,{source:ns.SERVER,value:n})},WA=function(e){var i,l;const{token:n}=e;this.resumeToken=n!=null?n:void 0;const s=ft(this.conversation.id),o=he.getLastMessageSystemHints(s),a=o==null?void 0:o.includes(hs);this.realtimeAsyncCompletion&&a&&Re.addAction("agent.conversation.start_succeeded",{conversation_id:(l=(i=e.conversation_id)!=null?i:this.responseThreadId)!=null?l:"",request_id:this.requestId,model:this.model})},zA=function(e){this.variantsInStreamInfo=e,Ze(this.conversation.id,n=>{dn.updateTree(n,(s,o)=>{var i;const a=(i=he.getParentPromptNode(n))!=null?i:s.getNodeByIdOrMessageId(o);s.updateNodeMetadata(a.id,{variantsInStreamInfo:this.variantsInStreamInfo})})})},qA=function(e){let n=[];const{chips:s}=e;if(s!=null&&s.length)n=s.map(a=>({actionLabel:a.action_label,systemHint:a.system_hint}));else return null;dg(this.conversation).addActiveSystemHintSuggestionChips(n)},YA=function(e){Ze(this.conversation.id,n=>{dn.updateTree(n,s=>{s.updateNodeMessageMetadata(e.messageId,{crisis_helpline_message:e})})})},ZA=function(e){lt(this.ctx,VZ,{effect:e})},KA=function(e){const{isCompletion:n,flagged:s,blocked:o,disclaimers:a}=e,i=!!(a!=null&&a.length);(s||o||i)&&(this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged=!0,o&&n&&(this.isCompletionBlocked=!0),RM(e,this.conversation.id))},QA=function(e){const{conversationId:n,url:s,isSafe:o}=e;o&&Ze(n,a=>{a.safeUrls.push(s)})},yx=function({type:e,message:n,conversationId:s}){var o,a,i;if(e==="message"&&(this.activeBranchLastMessage=n),(n==null?void 0:n.author.role)===Ke.Tool&&(n==null?void 0:n.author.name)==="bio"){const l=(o=n.metadata)==null?void 0:o.gizmo_id;setTimeout(()=>{this.queryClient.invalidateQueries({queryKey:KM(l)}),this.queryClient.invalidateQueries({queryKey:QM()})},5e3)}if((a=n.metadata)!=null&&a.trigger_async_ux&&(this.treatCompletionAsAsync=!0,Is(this.conversation.id,{source:ns.SERVER,value:Xt.STREAMING})),he.getTree(ft(s)).containsNodeOrMessageId(n.id)){this.messagesToUpdate[n.id]=n,this.debouncedUpdateExistingMessages();const l=(i=n.metadata)==null?void 0:i.parent_id;if(!l)return;Ze(this.conversation.id,c=>{dn.updateTree(c,d=>{const u=d.getNodeIfExists(n.id),f=d.getNodeIfExists(l);if(!u){Re.addError(new Error("CompletionRequest handleMessage: message ".concat(n.id," not found in tree")));return}if(!f){Re.addAction("conversation.input_missing_expected_parent",{message_id:n.id,parent_id:l,completion_type:this.completionType});return}u.parentId!==f.id&&d.moveNode(f.id,u.id)})});return}this.debouncedUpdateExistingMessages.flush(),Ze(this.conversation.id,l=>{dn.updateTree(l,(c,d)=>{var p,g,h,x,v;const u={requestId:this.requestId};n.status!=="in_progress"?u.completionSampleFinishTime=Date.now():this.allIncompleteMessageIds.add(n.id);const f=U(w({},n),{clientMetadata:u});(p=n.metadata)!=null&&p.invoked_resource&&(l.startedWithByoMcp||(l.startedWithByoMcp=((g=n.metadata)==null?void 0:g.invoked_resource.publish_status)==="private"));const m=(h=n.metadata)==null?void 0:h.parent_id;if(m){if(this.placeholderNodeId&&c.getParent(this.placeholderNodeId).id===c.getNodeByIdOrMessageId(m).id)if(K4(f)){c.prependNode(this.placeholderNodeId,f);return}else c.getNodeIfExists(this.placeholderNodeId)&&c.deleteNode(this.placeholderNodeId),this.placeholderNodeId=void 0;const y=c.getNodeByIdOrMessageId(m).children,b=c.addMessageNode(m,f);if(this.completionType===Xa.Next&&((v=(x=this.variantsInStreamInfo)==null?void 0:x.num_variants_in_stream)!=null?v:0)<=1&&y.length>0){for(const C of y)C!==b&&c.moveNode(b,C);return}return b}else{const y=c.findFirst(b=>!K4(b.message));if(y)c.prependNode(y.id,f);else return c.addMessageNode(d,f)}})})},vx=function(e){this.debouncedUpdateExistingMessages.flush(),Ze(this.conversation.id,n=>{dn.updateTree(n,s=>{for(const o of this.allIncompleteMessageIds)s.updateNodeMessageMetadata(o,{finish_details:{type:"interrupted"}})})}),Jt(this,It,bx).call(this)},bx=function(){var e;if(this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged||ri.publish({kind:"completionFinished",serverThreadId:this.responseThreadId}),this.isFirstCompletionInThread&&this.responseThreadId){const n=he.getGizmoId(ft(this.responseThreadId)),s=this.queryClient.getQueryState([Zr,{gizmoId:n}]);if((s==null?void 0:s.fetchStatus)!=="fetching"){const o=this.queryClient.getQueryData([Zr,{gizmoId:n}]);((e=o==null?void 0:o.pages.flatMap(l=>l.items))!=null?e:[]).some(l=>l.id===this.responseThreadId)||(CV(this.queryClient,n),B.logEventWithStatsig("Refetch Project Conversation in Completion Request","chatgpt_web_projects_completion_request_new_chat_refetch"))}}ri.publish({kind:"createConversation",clientThreadId:this.conversation.id}),this.blurDuringCompletionTracker.onMessageDone(),I6(),Jt(this,It,Cx).call(this)},Cx=function(){Ze(this.conversation.id,e=>{if(e.shouldRefetchConvoOnFinalize){const n=At(this.conversation.id);n&&(Ma(n,{skipIfExisting:!1}),dn.setShouldRefetchConvoOnFinalize(e,!1))}dn.updateTree(e,n=>{for(const s of this.allIncompleteMessageIds)n.updateNodeMetadata(s,{completionSampleFinishTime:Date.now()})})}),this.allIncompleteMessageIds.clear(),this.expireConduit&&Ze(this.conversation.id,e=>{e.conduitToken=null}),setTimeout(()=>{if(this.treatCompletionAsAsync||this.realtimeAsyncCompletion){const e=this.treatCompletionAsAsync?Xt.STREAMING:Xt.REALTIME,n=s=>{if(!s)return;const o=Cv(this.ctx,s);(o==null||o.source===ns.CLIENT)&&Is(s,{source:ns.SERVER,value:e})};n(this.responseThreadId),n(this.conversation.id)}else Is(this.conversation.id,{source:ns.CLIENT,value:Xt.UNREAD});this.maybeSendNotification(),jp.removeRequest(this.requestId),mr.releaseThread(this.conversation.id)},0)};const IX=10,jX=Dt(In(()=>({requests:{},requestIds:[]}))),Jm=(t,e,n)=>{if(!Sr(xs()).checkGate("1154002920"))return null;jX.setState(s=>{var o,a;if(s.requestIds.length===IX){const i=s.requestIds.shift();i!=null&&delete s.requests[i]}(a=(o=s.requests)[t])!=null||(o[t]={serverRequestId:null,timeToFirstToken:null,apiStartDelay:null,serverStats:null}),s.requests[t][e]=n})},Xm={publishServerRequestId:(t,e)=>{Jm(t,"serverRequestId",e)},publishServerStats:(t,e)=>{Jm(t,"serverStats",e)},publishApiStartDelay:(t,e)=>{Jm(t,"apiStartDelay",e)},publishTimeToFirstToken:(t,e)=>{Jm(t,"timeToFirstToken",e)}};var Iu=(t=>(t[t.TURN_CLIENT_STATUS_UNSPECIFIED=0]="TURN_CLIENT_STATUS_UNSPECIFIED",t[t.TURN_CLIENT_STATUS_INPROGRESS=1]="TURN_CLIENT_STATUS_INPROGRESS",t[t.TURN_CLIENT_STATUS_SUCCESS=2]="TURN_CLIENT_STATUS_SUCCESS",t[t.TURN_CLIENT_STATUS_ERROR=3]="TURN_CLIENT_STATUS_ERROR",t[t.TURN_CLIENT_STATUS_CANCELLED=4]="TURN_CLIENT_STATUS_CANCELLED",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(Iu||{}),ln=(t=>(t[t.UPSELL_OR_MODAL_TYPE_UNSPECIFIED=0]="UPSELL_OR_MODAL_TYPE_UNSPECIFIED",t[t.UPSELL_OR_MODAL_TYPE_BLOCKING_INITIAL_MODAL=1]="UPSELL_OR_MODAL_TYPE_BLOCKING_INITIAL_MODAL",t[t.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL=2]="UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL",t[t.UPSELL_OR_MODAL_TYPE_NUX_BANNER=3]="UPSELL_OR_MODAL_TYPE_NUX_BANNER",t[t.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP=4]="UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(ln||{});const NX={$type:"protobuf_analytics_events.v1.CopyTurnToClipboard"},PX={$type:"protobuf_analytics_events.v1.ChatgptTurnComplete"},PGe={$type:"protobuf_analytics_events.v1.ChatgptVoiceSession"},un={$type:"protobuf_analytics_events.v1.ChatgptUpsellOrModalShown"},JA=t=>{var e,n;return!!((n=(e=t.metadata)==null?void 0:e.attachments)!=null&&n.length)},XA=t=>{const e=t.content;return e.content_type!==ut.MultimodalText?!1:e.parts.some(RX)},RX=t=>typeof t=="string"?!1:t.content_type===Sa.ImageAssetPointer||t.content_type===Sa.Image;class LX{constructor(e){Q(this,"isAuraRequest");Q(this,"surface");Q(this,"hasSearchHint",!1);Q(this,"hasAuraContextToolMessage",!1);Q(this,"hasAuraContextAttachments",!1);Q(this,"hasAuraContextImageContent",!1);Q(this,"hasFileSearchToolCall",!1);Q(this,"modelSlug");this.ctx=e,this.isAuraRequest=yn(),this.surface=this.isAuraRequest?this.resolveSurface():null}trackMessage(e){var a,i,l,c,d,u;if(!this.isAuraRequest)return;const n=(d=(l=(a=e.metadata)==null?void 0:a.model_slug)!=null?l:(i=e.metadata)==null?void 0:i.default_model_slug)!=null?d:(c=e.author.metadata)==null?void 0:c.model_slug;n&&(this.modelSlug=n),this.recordSystemHints((u=e.metadata)==null?void 0:u.system_hints);const s=e.author.name,o=e.author.role;o===Ke.Tool&&s===wu&&(this.hasAuraContextToolMessage||(this.hasAuraContextToolMessage=!0),this.hasAuraContextAttachments||(this.hasAuraContextAttachments=JA(e)),this.hasAuraContextImageContent||(this.hasAuraContextImageContent=XA(e))),!this.hasFileSearchToolCall&&o===Ke.Tool&&s===Pn.FILE_SEARCH&&(this.hasFileSearchToolCall=!0)}recordSystemHints(e){if(!(!this.isAuraRequest||this.hasSearchHint||!e)){for(const n of e)if(n===Pe.Search){this.hasSearchHint=!0;break}}}getTags(){var o,a,i,l;if(!this.isAuraRequest)return;const e=c=>c?"true":"false",n=(a=(o=et(this.ctx))==null?void 0:o.planType)!=null?a:"unknown",s=(i=this.modelSlug)!=null?i:"unknown";return[{key:"surface",value:(l=this.surface)!=null?l:"unknown"},{key:"is_search_request",value:e(this.hasSearchHint)},{key:"has_".concat(wu,"_tool"),value:e(this.hasAuraContextToolMessage)},{key:"has_".concat(wu,"_attachments"),value:e(this.hasAuraContextAttachments)},{key:"has_".concat(wu,"_image_content"),value:e(this.hasAuraContextImageContent)},{key:"has_file_search_tool_call",value:e(this.hasFileSearchToolCall)},{key:"plan_type",value:n},{key:"model_slug",value:s}]}resolveSurface(){return wn(()=>Qo(this.ctx)?"mini-web":hn(this.ctx)?"sidebar":"unknown")}}var R_,Q6;function OX(){if(Q6)return R_;Q6=1;function t(e){return e===void 0}return R_=t,R_}var DX=OX();const FX=Gn(DX);var L_,J6;function BX(){if(J6)return L_;J6=1;var t="Expected a function";function e(n){if(typeof n!="function")throw new TypeError(t);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}return L_=e,L_}var O_,X6;function UX(){if(X6)return O_;X6=1;var t=cT(),e=BX(),n=kV();function s(o,a){return n(o,e(t(a)))}return O_=s,O_}var $X=UX();const VX=Gn($X);function HX(t){return typeof t=="number"?Math.trunc(t):t}const GX=["time_since_prompt_sent_ms","time_since_last_event_ms","first_token_lat","api_start_delay","completion_request_time_to_first_visible_message"],ep="is_kaur1br5";class eI{constructor({ctx:e,clientRequestId:n,gizmoType:s,preflightTime:o,isTemporaryChat:a,conversationId:i}){Q(this,"ctx");Q(this,"start_time_ms");Q(this,"turn_id");Q(this,"trigger");Q(this,"result");Q(this,"time_since_prompt_sent_ms");Q(this,"stream_update_event_count",0);Q(this,"first_token_lat");Q(this,"first_visible_content_token_lat");Q(this,"first_nav_link_token_lat");Q(this,"last_model_message_received");Q(this,"api_start_time");Q(this,"time_since_last_event_ms");Q(this,"api_start_delay");Q(this,"completion_request_time_to_first_visible_message");Q(this,"model_slug");Q(this,"last_message_model_slug");Q(this,"tools_used");Q(this,"system_hints");Q(this,"gizmo_id");Q(this,"promptSentTimestamp");Q(this,"serverStats");Q(this,"serverSteMetadata");Q(this,"logger");Q(this,"server_request_id");Q(this,"client_request_id");Q(this,"completed",!1);Q(this,"num_images_attached",0);Q(this,"num_files_attached",0);Q(this,"hasKaur1br5ContextAttachments",!1);Q(this,"hasKaur1br5ContextImageContent",!1);Q(this,"bytes_received",0);Q(this,"model_message_update_count",0);Q(this,"stream_encoding");Q(this,"stream_buffering",!0);Q(this,"gizmo_type");Q(this,"isStreamOpen",!1);Q(this,"isTemporaryChat");Q(this,"conversationId");Q(this,"lastAssistantMessageId");Q(this,"hasReceivedAgentMetadataMessage",!1);Q(this,"streamTerminatedPrematurely",!1);Q(this,"auraTimeToFirstTokenTracker");Q(this,"messageMarkerLatencies",{});this.ctx=e,this.client_request_id=n,this.start_time_ms=performance.now(),this.turn_id=as(),this.promptSentTimestamp=o!=null?o:performance.now(),this.tools_used=new Set,this.system_hints=new Set,this.logger=EV.createLogger("turn-analytics","info","http"),this.auraTimeToFirstTokenTracker=new LX(e),s&&(this.gizmo_type=s),this.isTemporaryChat=a,this.conversationId=i}truncateValueForKey(e){const n=HX(this[e]);n!==void 0&&(this[e]=n)}onUserMessages(e){e.forEach(n=>{var s,o,a,i;this.auraTimeToFirstTokenTracker.trackMessage(n),this.updateAuraContextToolMetadata(n),n.author.role==="user"&&((o=(s=n.metadata)==null?void 0:s.attachments)==null||o.forEach(l=>{l.height&&l.width?this.num_images_attached+=1:this.num_files_attached+=1}),(i=(a=n.metadata)==null?void 0:a.system_hints)==null||i.forEach(l=>{this.system_hints.add(l)}))})}addServerPerfStats(e){Xm.publishServerStats(this.client_request_id,e),this.serverStats=e}addServerSteMetadata(e){this.serverSteMetadata=e.metadata}onMessageMarker(e){const s="".concat(e.event,"_").concat("received");this.messageMarkerLatencies[e.marker]=U(w({},this.messageMarkerLatencies[e.marker]),{[s]:performance.now()-this.promptSentTimestamp})}onStreamOpen(e){this.isStreamOpen=!0,this.logCompletionStarted(),this.logTimeToInterruptToken(e!=null?e:!1)}onStreamClose(){this.model_message_update_count>0?this.logCompletion({type:io.Success}):this.logCompletion({type:io.Error,error:{reason:"empty_response",message:"Successful completion ended with no messages"}})}onPrematureStreamTermination(){var n,s,o;if(this.streamTerminatedPrematurely)return;this.streamTerminatedPrematurely=!0;const e=yn()?"true":"false";Re.addAction("conversation.stream.terminated_prematurely",{turn_id:this.turn_id,client_request_id:this.client_request_id,server_request_id:this.server_request_id,system_hints:this.system_hints,model_slug:(s=(n=this.model_slug)!=null?n:this.last_message_model_slug)!=null?s:void 0,message_count:this.model_message_update_count,[ep]:e}),Ie.count(je.DEFAULT,"conversation.stream.terminated_prematurely",[{key:"first_system_hint",value:[...this.system_hints][0]||"n/a"},{key:"trigger",value:(o=this.trigger)!=null?o:"unknown"},{key:ep,value:e}])}onCompletionStarted(e,n){switch(e){case"next":this.trigger="submit";break;case"variant":this.trigger="reroll";break;case"continue":this.trigger="continue";break}this.model_slug=n}onReceivedServerRequestId(e){this.server_request_id=e,Xm.publishServerRequestId(this.client_request_id,this.server_request_id)}onConversationId(e){this.conversationId=e}onStreamEvent(e,n){this.bytes_received+=e,n||(this.stream_update_event_count+=1)}onSentUserMessage(){this.api_start_time=performance.now(),this.api_start_delay=this.api_start_time-this.promptSentTimestamp,Xm.publishApiStartDelay(this.client_request_id,this.api_start_delay)}onMessageUpdate(e){var i,l,c,d;this.auraTimeToFirstTokenTracker.trackMessage(e),this.updateAuraContextToolMetadata(e),e.author.name===Pn.n7jupd_m&&(this.hasReceivedAgentMetadataMessage=!0);const{model_slug:n,gizmo_id:s}=(i=e.metadata)!=null?i:{},{role:o,name:a}=e.author;if(o===Ke.Assistant&&(this.lastAssistantMessageId=e.id),this.gizmo_id=(l=this.gizmo_id)!=null?l:s,o===Ke.Tool&&a&&this.tools_used.add(a),o!==Ke.User&&o!==Ke.System&&o!==Ke.Developer&&o!==Ke.Root&&(this.model_message_update_count+=1,this.last_model_message_received=performance.now(),this.last_message_model_slug=n!=null?n:this.last_message_model_slug),!this.first_token_lat&&e.author.role!==Ke.User&&Xp(e)&&bo(e).length>0){const u=performance.now();this.first_token_lat=u-this.promptSentTimestamp,this.api_start_time&&(this.completion_request_time_to_first_visible_message=u-this.api_start_time),Xm.publishTimeToFirstToken(this.client_request_id,this.first_token_lat);const f=this.auraTimeToFirstTokenTracker.getTags();f&&Ie.hist(je.DEFAULT,"conversation.kaur1br5.time_to_first_token",f,this.first_token_lat)}if(!this.first_visible_content_token_lat&&e.author.role===Ke.Assistant&&Xp(e)&&(this.first_visible_content_token_lat=performance.now()-this.promptSentTimestamp),!this.first_nav_link_token_lat&&gh(e)===hh.SuperWidget){const u=e.content;(d=(c=u==null?void 0:u.widgets)==null?void 0:c.navlinks)!=null&&d.length&&(this.first_nav_link_token_lat=performance.now()-this.promptSentTimestamp)}}updateAuraContextToolMetadata(e){e.author.role!==Ke.Tool||e.author.name!==wu||(this.hasKaur1br5ContextAttachments||(this.hasKaur1br5ContextAttachments=JA(e)),this.hasKaur1br5ContextImageContent||(this.hasKaur1br5ContextImageContent=XA(e)))}handleAbort(e){this.logCompletion({type:io.Canceled})}handleRawError(e){var a;let n,s=null,o=null;e instanceof Error?(s=(a=e.message)!=null?a:"Something went wrong",o=e instanceof $n?e.status:void 0):s=e,o===400||s===pi||s==="NetworkError when attempting to fetch resource."||s==="The network connection was lost."?n="network_error":s==="Request timed out"?n="timeout":n="request_failed",this.logCompletion({type:io.Error,error:w({reason:n,message:s},o&&{status_code:o})})}getFeatureFlags(){const e={"resumable-streaming":ze(this.ctx,"2489999880",{disableExposureLog:!0}).get("is_resume_enabled",!1)},n=Object.entries(e),s=n.filter(([a,i])=>i).map(([a])=>a),o=n.filter(([a,i])=>!i).map(([a])=>a);return{enabled_feature_flags:s,disabled_feature_flags:o}}createLogPayload(){var i,l,c,d,u;const{enabled_feature_flags:e,disabled_feature_flags:n}=this.getFeatureFlags(),s=Ln(this.ctx),o=TV(this.ctx),a=U(w({turn_id:this.turn_id,trigger:this.trigger,result:Qs((i=this.result)==null?void 0:i.type)},((l=this.result)==null?void 0:l.type)===io.Error?{error:this.result.error}:void 0),{time_since_prompt_sent_ms:this.time_since_prompt_sent_ms,stream_update_event_count:this.stream_update_event_count,model_message_update_count:this.model_message_update_count,time_since_last_event_ms:this.time_since_last_event_ms,first_token_lat:this.first_token_lat,first_visible_content_token_lat:this.first_visible_content_token_lat,first_nav_link_token_lat:this.first_nav_link_token_lat,api_start_delay:this.api_start_delay,completion_request_time_to_first_visible_message:this.completion_request_time_to_first_visible_message,bytes_received:this.bytes_received,stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used],system_hints:[...this.system_hints],gizmo_id:this.gizmo_id,attachments:{files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached},has_kaur1br5_context_attachments:this.hasKaur1br5ContextAttachments,has_kaur1br5_context_image_content:this.hasKaur1br5ContextImageContent,temporary_chat:this.isTemporaryChat,gizmo_type:this.gizmo_type,server_ste_metadata:this.serverSteMetadata,message_marker_latencies:this.messageMarkerLatencies,cluster:(c=s.cluster)!=null?c:void 0,residency_region:(d=o==null?void 0:o.residencyRegion)!=null?d:void 0,compute_residency:(u=o==null?void 0:o.computeResidency)!=null?u:void 0,enabled_feature_flags:e,disabled_feature_flags:n});return{request_id:this.server_request_id,turn_analytics:a}}createStatsigPayload(){var e,n;return VX({turn_id:String(this.turn_id),trigger:this.trigger,result:(e=this.result)==null?void 0:e.type,error:JSON.stringify(((n=this.result)==null?void 0:n.type)===io.Error?{error:this.result.error}:void 0),time_since_prompt_sent_ms:String(this.time_since_prompt_sent_ms),stream_update_event_count:String(this.stream_update_event_count),model_message_update_count:String(this.model_message_update_count),time_since_last_event_ms:JSON.stringify(this.time_since_last_event_ms),first_token_lat:String(this.first_token_lat),api_start_delay:String(this.api_start_delay),completion_request_time_to_first_visible_message:String(this.completion_request_time_to_first_visible_message),bytes_received:String(this.bytes_received),stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used].join(", "),system_hints:[...this.system_hints].join(", "),gizmo_id:this.gizmo_id,attachments:JSON.stringify({files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached}),has_kaur1br5_context_attachments:String(this.hasKaur1br5ContextAttachments),has_kaur1br5_context_image_content:String(this.hasKaur1br5ContextImageContent),temporary_chat:String(this.isTemporaryChat),gizmo_type:this.gizmo_type,server_ste_metadata:JSON.stringify(this.serverSteMetadata),message_marker_latencies:JSON.stringify(this.messageMarkerLatencies)},FX)}getTurnClientStatus(){var e;switch((e=this.result)==null?void 0:e.type){case io.Success:return Iu.TURN_CLIENT_STATUS_SUCCESS;case io.Error:return Iu.TURN_CLIENT_STATUS_ERROR;case io.Canceled:return Iu.TURN_CLIENT_STATUS_CANCELLED;default:return Iu.TURN_CLIENT_STATUS_UNSPECIFIED}}logStructuredTurnCompleteEvent(){B.logStructuredEvent(PX,{requestId:this.getServerSteRequestId(),clientStatus:this.getTurnClientStatus(),lastMessageId:this.lastAssistantMessageId,conversationId:this.conversationId,timeToFirstVisibleTokenMs:this.first_token_lat,timeToLastTokenMs:this.time_since_prompt_sent_ms})}getServerSteRequestId(){if(this.serverSteMetadata==null)return;const e=this.serverSteMetadata.request_id;return typeof e=="string"?e:void 0}logCompletionStarted(){B.logEventWithStatsig("chatgpt_conversation_turn_turn_exchange_started","chatgpt_conversation_turn_turn_exchange_started",this.createStatsigPayload())}logTimeToInterruptToken(e){e&&Ie.hist(je.DEFAULT,"chatgpt_web_interrupt_token_latency",[],performance.now()-this.promptSentTimestamp),Ie.count(je.DEFAULT,"chatgpt_web_interrupt_token_exists",[{key:"has_conduit_token",value:e?"true":"false"}])}logCompletion(e){var s,o,a;if(this.completed)return;const n=performance.now();Ie.count(je.DEFAULT,"completion_request"),Ie.hist(je.DEFAULT,"completion_request_time",[],n-this.start_time_ms),this.completed=!0,this.result=e;for(const i of GX)this.truncateValueForKey(i);if(this.time_since_prompt_sent_ms=n-this.promptSentTimestamp,this.last_model_message_received&&(this.time_since_last_event_ms=n-this.last_model_message_received),e.type===io.Error?this.logger.error("Turn exchange complete",this.createLogPayload()):this.logger.info("Turn exchange complete",this.createLogPayload()),this.system_hints.has(hs)&&!this.hasReceivedAgentMetadataMessage){const i=yn()?"true":"false";Re.addAction("conversation.stream.agent_metadata_message_missing",{turn_id:this.turn_id,client_request_id:this.client_request_id,server_request_id:this.server_request_id,completion_result:e.type,stream_terminated_prematurely:this.streamTerminatedPrematurely,model_slug:(o=(s=this.model_slug)!=null?s:this.last_message_model_slug)!=null?o:void 0,trigger:this.trigger,[ep]:i}),Ie.count(je.DEFAULT,"conversation.stream.agent_metadata_message_missing",[{key:"trigger",value:(a=this.trigger)!=null?a:"null"},{key:ep,value:i}])}B.logEventWithStatsig("chatgpt_conversation_turn_turn_exchange_complete","chatgpt_conversation_turn_turn_exchange_complete",this.createStatsigPayload()),this.logStructuredTurnCompleteEvent()}}const Sx=To(()=>Be(!1));function WX(t){return MV(t)&&!AV(t)}const tp=50,zX=95;function qX(t,e){if(t<=e)return t/e*tp;{const n=tp,s=zX-tp,o=t-e,i=-(tp/e)/s;return n+s*(1-Math.exp(i*o))}}class YX{constructor(){Q(this,"mostRecentCompletionRequest");Q(this,"loggedRequests",new Set)}onCompletionRequestStarted(e){this.mostRecentCompletionRequest={requestId:e,timestamp:Date.now()},this.loggedRequests.clear()}logEvent(e,n,s,o,a){var l;const i=this.mostRecentCompletionRequest;i!=null&&!this.loggedRequests.has(e)&&((l=he.getNode(ft(n),s).message.clientMetadata)==null?void 0:l.requestId)===i.requestId&&(B.logEvent(e,w({messageId:s,timeMs:Date.now()-i.timestamp},o)),a==null||a(),this.loggedRequests.add(e))}}const tI=new YX;function ZX(t){var o,a;const e=t.find(i=>{var l;return((l=i.metadata)==null?void 0:l.image_search_results)!==void 0});return((a=(o=e==null?void 0:e.metadata)==null?void 0:o.image_search_results)!=null?a:[]).slice(0,5)}function KX(t){return{event:"attributes",data:{attributes:{isForceHide:t}}}}function D_(t,e){return{event:"fetch.status",data:{useCases:{[t]:{started:Date.now(),status:e}}}}}function nI(t,e){switch(e){case"navlinks":return t.navlinks.length>0;case"images":return t.images.length>0;case"videos":return t.videos.length>0;case"news":return t.news.length>0}return!1}const QX=new Set(["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_id","utm_name","utm_creative","gclid","fbclid","igshid","msclkid","vero_id","oly_enc_id","oly_anon_id","mc_eid","mc_cid","ref","ref_src","trk","spm"]);function JX(t){if(t.hostname=t.hostname.toLowerCase().replace(/^www\./,""),/(^|\.)youtube\.com$/.test(t.hostname)||t.hostname==="youtu.be"){if(t.hostname==="youtu.be"){const s=t.pathname.replace(/^\/+/,"");t.hostname="youtube.com",t.pathname="/watch",t.searchParams.set("v",s)}const e=t.pathname.match(/^\/shorts\/([^/]+)\/?$/i);e&&(t.pathname="/watch",t.searchParams.set("v",e[1])),t.hostname!=="youtube.com"&&(t.hostname="youtube.com");const n=new Set(["t","time_continue","start","feature","si","pp","ab_channel","index","redir_token"]);for(const s of[...t.searchParams.keys()])n.has(s.toLowerCase())&&t.searchParams.delete(s)}if(t.hostname==="x.com"||t.hostname==="twitter.com"||t.hostname==="mobile.twitter.com"||t.hostname==="m.twitter.com"){t.hostname="twitter.com";const e=new Set(["s","t","ref_src"]);for(const n of[...t.searchParams.keys()])e.has(n.toLowerCase())&&t.searchParams.delete(n)}if(t.hostname==="instagram.com"||t.hostname==="m.instagram.com"){t.hostname="instagram.com";const e=new Set(["hl"]);for(const n of[...t.searchParams.keys()])e.has(n.toLowerCase())&&t.searchParams.delete(n)}}function xg(t){const e=(t!=null?t:"").trim();if(!e)return"";try{const n=/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e),s=new URL(n?e:"http://".concat(e));s.protocol=s.protocol.toLowerCase(),s.username="",s.password="",s.hostname=s.hostname.replace(/\.$/,""),(s.protocol==="http:"&&s.port==="80"||s.protocol==="https:"&&s.port==="443")&&(s.port=""),s.hash="",s.pathname=s.pathname.replace(/\/{2,}/g,"/"),s.pathname!=="/"&&s.pathname.endsWith("/")&&(s.pathname=s.pathname.slice(0,-1)),JX(s);const o=s.searchParams,a=[],i=new Set;for(const d of o.keys()){const u=d.toLowerCase();u.startsWith("utm_")||QX.has(u)||i.has(d)||(i.add(d),a.push([d,o.getAll(d).sort((f,m)=>f.localeCompare(m))]))}a.sort((d,u)=>d[0].localeCompare(u[0]));const l=new URLSearchParams;for(const[d,u]of a)for(const f of u)l.append(d,f);return"".concat(s.hostname.toLowerCase()).concat(s.pathname).concat(l.toString()?"?".concat(l.toString()):"").toLowerCase()}catch(n){return e.replace(/^https?:\/\//i,"").replace(/^www\./i,"").replace(/\/{2,}/g,"/").replace(/\/+$/g,"").toLowerCase()}}function Jr(t,e,n){var a,i,l;if(!(e!=null&&e.length))return t;const s=[...t],o=new Map;for(let c=0;c<s.length;c++)o.set(xg(s[c].url),c);for(const c of e){const d=xg(c.url);if(!o.has(d)){const h=c.sources===void 0&&c.source!==void 0?U(w({},c),{sources:[c.source]}):c;o.set(d,s.push(h)-1);continue}const u=o.get(d);if(u===void 0)continue;let f=!0;if(c.domain!==void 0){const h=s[u].domain;(h===void 0||n&&c.domain!==h)&&(s[u]=U(w({},s[u]),{domain:c.domain}),f=!1)}c.snippet!==void 0&&c.snippet!==s[u].snippet&&(f?(s[u]=U(w({},s[u]),{snippet:c.snippet}),f=!1):s[u].snippet=c.snippet);let m=s[u];const p=m.source;p&&(m.sources===void 0||!m.sources.includes(p))&&(f&&(s[u]=w({},s[u]),m=s[u],f=!1),m.sources=(a=m.sources)!=null?a:[],m.sources.push(p));const g=[...c.source?[c.source]:[],...(i=c.sources)!=null?i:[]];if(g.length)for(const h of g)h&&(m.sources===void 0||!m.sources.includes(h))&&(f&&(s[u]=w({},s[u]),m=s[u],f=!1),m.sources=(l=m.sources)!=null?l:[],m.sources.push(h))}return s}function F_(t,e=[]){if(!t.length||!e.length)return t;const n=new Map;for(const a of e){const i=xg(a.url);i&&n.set(i,a.attribution)}let s=!1;const o=t.map(a=>{const i=xg(a.url),l=i?n.get(i):void 0;return l&&a.domain!==l?(s=!0,U(w({},a),{domain:l})):a});return s?o:t}var lr=(t=>(t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.DONE=1]="DONE",t[t.ERROR=2]="ERROR",t))(lr||{}),Xr=(t=>(t[t.NOT_RUN=0]="NOT_RUN",t[t.SAFE=1]="SAFE",t[t.ADULT=2]="ADULT",t[t.FLAGGED=3]="FLAGGED",t))(Xr||{});const Dc={navlinks:[],images:[],videos:[],news:[],isSearchLikely:void 0,analytics:{},safeSearchOff:!1},XX=t=>({entries:{},updateFromEvent:(e,n)=>t(s=>{var i,l,c,d,u,f,m,p,g,h,x,v,y;const o=(i=s.entries[e])!=null?i:Dc;let a=o;switch(n.event){case"navlinks":a=U(w({},o),{navlinks:Jr(o.navlinks,(l=n.data.navlinks)!=null?l:[],!1),images:Jr(o.images,(c=n.data.images)!=null?c:[],!1),videos:Jr(o.videos,(d=n.data.videos)!=null?d:[],!1),news:Jr(o.news,(u=n.data.news)!=null?u:[],!1)}),o.analytics.firstNavlinkFetched===void 0&&((f=n.data.navlinks)!=null?f:[]).length>0&&(a.analytics=U(w({},o.analytics),{firstNavlinkFetched:n.processTime,firstNavlinksFetchedTS:n.timestampMs}));break;case"search.classifier":a=U(w({},o),{isSearchLikely:n.data.is_search_likely}),o.analytics.firstClassifierFetched===void 0&&n.data.is_search_likely&&(a.analytics=U(w({},o.analytics),{firstClassifierFetched:n.processTime,firstClassifierFetchedTS:n.timestampMs}));break;case"attributions":a=U(w({},o),{navlinks:F_(o.navlinks,(m=n.data.attributions)!=null?m:[]),videos:F_(o.videos,(p=n.data.attributions)!=null?p:[]),news:F_(o.news,(g=n.data.attributions)!=null?g:[])});break;case"attributes":{const b=(h=n.data.attributes)!=null?h:{};a=U(w({},o),{isNoForceSearch:b.shortQueryNoOptimize!==void 0?!!b.shortQueryNoOptimize:o.isNoForceSearch,isNavlinkIntent:b.isNavlinkIntent!==void 0?!!b.isNavlinkIntent:o.isNavlinkIntent,isForceHide:b.isForceHide!==void 0?!!b.isForceHide:o.isForceHide,truncateFastNavlinks:b.truncateFastNavlinks!==void 0?Number(b.truncateFastNavlinks):o.truncateFastNavlinks});break}case"fetch.status":a=U(w({},o),{fetchingStatus:w(w({},(x=o.fetchingStatus)!=null?x:{}),(v=n.data.useCases)!=null?v:{})});break;case"log":switch(n.data.event){case"fetchSonicNavLinks.start":a=U(w({},o),{analytics:U(w({},o.analytics),{lastStartFetch:n.processTime,lastStartFetchTS:n.timestampMs,firstStartFetch:o.analytics.firstStartFetch!==void 0?o.analytics.firstStartFetch:n.processTime})});break;case"fetchBENavlinks.start":o.analytics.firstRoundtripTime===void 0&&(a=U(w({},o),{analytics:U(w({},o.analytics),{firstRoundtripTime:n.processTime})}));break;case"fetchNavlinks.finished":a=U(w({},o),{fetchingStatus:U(w({},(y=o.fetchingStatus)!=null?y:{}),{navlinks:{started:0,status:1}})});break;case"navlinkRequested":a=U(w({},o),{analytics:U(w({},o.analytics),{requestedTimeUnixEpochMs:n.timestampMs})});break;case"search_safety_safe":a=U(w({},o),{safety:1});break;case"search_safety_adult":a=U(w({},o),{safety:2});break;case"search_safety_flagged":a=U(w({},o),{safety:3});break;case"search_safety_not_run":a=U(w({},o),{safety:0});break;case"shortQueryNoOptimize":a=U(w({},o),{isNoForceSearch:!0});break;case"isNavlinkIntent":a=U(w({},o),{isNavlinkIntent:!0});break;case"safe_search_off":a=U(w({},o),{safeSearchOff:!0});break}break}return{entries:U(w({},s.entries),{[e]:a})}})}),er=t3()(XX,El);function eee(t,e){return er(n=>{var o,a,i;if(t==null)return Dc;const s=(a=(o=n.entries[t])==null?void 0:o.safeSearchOff)!=null?a:!1;return e!==void 0&&s!==e?Dc:(i=n.entries[t])!=null?i:Dc})}function tee(t){er.setState(e=>{const o=e.entries,{[t]:n}=o;return{entries:ke(o,[q4(t)])}})}const nee=8e3;async function ju(t,e,n,s){var v,y;if(e.length===0)return;const o=er.getState();let a=o.entries[e];if(a){if(a.safety===Xr.ADULT&&s!==void 0&&s!==!!a.safeSearchOff)tee(e),a=Dc;else if(nI(a,n))return}if(((y=(v=a==null?void 0:a.fetchingStatus)==null?void 0:v[n])==null?void 0:y.started)!==void 0)return;er.getState().updateFromEvent(e,D_(n,lr.IN_PROGRESS));const l={query:e,classifier:!1,attributions:n!=="images",[n]:!0,is_strict:!s};let c=null,d=!1;const f=is(t,"3205212221").get("retry",{}),m=typeof f[n]=="number"?Math.max(Math.min(f[n],10),0):0,p=typeof f.timeoutMs=="number"?Math.max(f.timeoutMs,500):6e3;let h=typeof f.retryDelayMs=="number"?f.retryDelayMs:0;const x=async()=>{var b;try{const T="".concat(Jc,"/navlinks");try{for(var C=jo(mg(T,{ctx:t,method:"POST",headers:w({},s1()),body:l})),S,k,E;S=!(k=await C.next()).done;S=!1){const M=k.value;if("response"in M)continue;const A=(b=M.event)!=null?b:void 0;if(A===void 0)continue;const I=M.data;o.updateFromEvent(e,{event:A,data:I,timestampMs:Date.now()})}}catch(k){E=[k]}finally{try{S&&(k=C.return)&&await k.call(C)}finally{if(E)throw E[0]}}d=!0,er.getState().updateFromEvent(e,D_(n,lr.DONE))}catch(T){c=T}};for(let b=0;b<=m;b++){b>0&&(await eC(h),h=h*2+Math.random()*10);const C=x(),S=eC(p);if(await Promise.race([C,S]),d)break}!d&&c!=null&&(er.getState().updateFromEvent(e,D_(n,lr.ERROR)),Re.addError(new Error("Failed to fetch navlinks",{cause:c})))}function sI(t,e){var i,l,c,d,u,f;const n=(l=(i=t.fetchingStatus)==null?void 0:i[e])==null?void 0:l.started;if(!n)return!1;const o=Date.now()-n>nee;return!(nI(t,e)||o||((d=(c=t.fetchingStatus)==null?void 0:c[e])==null?void 0:d.status)===lr.DONE||((f=(u=t.fetchingStatus)==null?void 0:u[e])==null?void 0:f.status)===lr.ERROR)}function np(t,e){var s;if(!t)return!1;const n=(s=er.getState().entries[t])!=null?s:Dc;return sI(n,e)}function eC(t){return new Promise(e=>setTimeout(e,t))}const see=(t,e=!1)=>{var n;return t==="web"?Q4.Web:t==="cloud"?Q4.Cloud:(n=n3[t])!=null?n:e?t:void 0},xi=(t,e=!1)=>Array.from(t.values()).map(n=>see(n,e)).filter(Boolean),oee="I took control of the virtual browser. If you're unsure what changed, ask for more context. If the task is complete, just acknowledge and wrap it up. Otherwise, please proceed.",Vn=Dt(()=>({token:null,clientThreadId:null,isOpen:!1,isResuming:!1,isTakeoverInProgress:!1,parentMessageId:null,vmId:null,abortPromise:null})),RGe=(t,e)=>{Vn.setState(n=>U(w({},n),{clientThreadId:t,token:e}))},aee=t=>{var n;const e=Qv();((n=e.clientMetadata)!=null?n:e.clientMetadata={}).isPlaceholder=!0,Ze(t,s=>{dn.appendMessage(s,e)})},oI=t=>{Ze(t,e=>{dn.updateTree(e,n=>{const s=n.nodes.filter(o=>{var l,c,d;const a=(l=o.message)==null?void 0:l.metadata,i=(c=o.message)==null?void 0:c.clientMetadata;return(i==null?void 0:i.isPlaceholder)&&(a==null?void 0:a.is_takeover_ended_message)&&((d=a==null?void 0:a.system_hints)==null?void 0:d.includes(hs))});for(const o of s)n.updateNodeMetadata(o.id,{isPlaceholder:!1})})})},Qv=(t,e)=>ls(oee,w(w({is_takeover_ended_message:!0,system_hints:[hs]},t&&{selected_sources:xi(t)}),e!=null?e:{})),LGe=()=>{Vn.setState({token:null,clientThreadId:null,isOpen:!1,isTakeoverInProgress:!1})};function ree(t){return t instanceof KeyboardEvent||"key"in t||"detail"in t&&t.detail===0?"keyboard":"mouse"}function iee(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}async function Ko({conversation:t,requestedModelId:e,completionType:n=Xa.Next,sourceEvent:s,eventSource:o,completionMetadata:a,extraStreamParams:i,parentMessageId:l,promptMessage:c,existingMessages:d,prependMessages:u,appendMessages:f,profiler:m,skipNotification:p,disablePlaceholder:g,isReasoningSkipped:h,parentMessageIdPromise:x,thinkingEffort:v}){var fe,re,ve,Me,$e,Le,Ae,He,Qe,ht;const y=t.ctx;Sx.set(t,!0);const b=Jo(y),C=(fe=s==null?void 0:s.timeStamp)!=null?fe:performance.now(),S=o!=null?o:s?ree(s):"mouse",k=dT(),E="request-".concat(t.id,"-").concat(k),T=ft(t.id),{conduitToken:M=null,prepareState:A="none",lastPrepareTimestamp:I=null}=T!=null?T:{},N=e!=null?e:wn(()=>bn(t).id),L=wn(()=>jf(y)),D=he.findNode(T,at=>at.message.author.role===Ke.Assistant||at.message.author.role===Ke.Tool)==null,F=(T==null?void 0:T.continuingFromSharedConversationId)!=null,$=(T==null?void 0:T.continuingFromSharedProjectConversationId)!=null,H=!!(T!=null&&T.continuingFromSharedPostId),z=(T==null?void 0:T.branchingFromConversationId)!=null,K=he.getConversationLastTurn(T),J=K==null?void 0:K.messages.some(at=>{var vt;return(vt=at.metadata)==null?void 0:vt.n7jupd_message});let Z=l?he.getNode(T,l):d!=null&&d[0]?he.getParentNode(T,d[0].id):he.getCurrentNode(T),q=l;Z.message.id.startsWith(e3)&&(Z=he.getParentNode(T,Z.message.id),q=(re=Z.message.id)!=null?re:Z.id);let se=(ve=Z.message.id)!=null?ve:Z.id;Vn.getState().isTakeoverInProgress&&(Vn.setState({isTakeoverInProgress:!1}),oI(t.id),u=[...u!=null?u:[],Qv()]);const ie=[...d!=null?d:[],...u!=null?u:[],...c?[c]:[],...f!=null?f:[]],ee=wn(()=>uT(y,Xc(t))),le=At(t.id),X=new eI({ctx:y,clientRequestId:E,gizmoType:ee,preflightTime:C,isTemporaryChat:L,conversationId:le!=null?le:void 0});if(X.onUserMessages(ie),ee===tg.PROJECT&&D){const at=a==null?void 0:a.systemHints;IV.set(t,at)}const te=wn(()=>bd(y)),ce=wn(()=>jV(y)),ue=gt.getItem(Ue.ModelSlugStatsOverride),me=new FA(y,E,b,T,t,q,u,c,f,n,N,S,te,C,ee===tg.PROJECT,D,F,z,$,X,p!=null?p:!1,ce,H,h,v,ue,(Me=T==null?void 0:T.steeringAsyncTaskId)!=null?Me:void 0,{disablePlaceholder:g!=null?g:!1},!Mv(y));NV(t.id);const xe=($e=a==null?void 0:a.systemHints)==null?void 0:$e.includes(hs),pe=yn();if(pe){const at=!((a==null?void 0:a.systemHints)===void 0||a.systemHints.length===0||a.systemHints.length===1&&a.systemHints.includes(Pe.Search)),vt=((He=(Ae=(Le=c==null?void 0:c.metadata)==null?void 0:Le.attachments)==null?void 0:Ae.length)!=null?He:0)>0,$t=c!=null&&c.metadata?c.metadata[rT]:void 0,Ct=!!((Qe=$t==null?void 0:$t.sources)!=null&&Qe.length),Vt=at||vt||Ct;if(c){const qt=bo(c,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0});if(er.getState().updateFromEvent(qt,KX(Vt)),D)try{const an=is(y,"3205212221").get("optimistic_fetch",{}),Qt=_n=>{const rn=an[_n];typeof rn!="number"||!isFinite(rn)||rn<=0||Math.random()<rn&&ju(y,qt,_n)};Qt("images"),Qt("videos"),Qt("news")}catch(en){}}}xe&&Re.addAction("agent.conversation.start_attempted",{client_thread_id:String(t.id),model:N});const Ee=Zh(t.id,void 0,{clientInitiated:!0,reason:"new_completion",hasAgentSystemHint:xe});if(ri.publish({kind:"requestCompletion"}),Is(t.id,{source:ns.CLIENT,value:xe?Xt.REALTIME:Xt.STREAMING}),tI.onCompletionRequestStarted(E),me.updateBeforeRequest(),((ht=Cv(y,t.id))==null?void 0:ht.value)===Xt.REALTIME&&!!!(J&&h)&&Ee){const at=await Ee;at!=null&&at.last_message_id&&(se=at.last_message_id)}if(x){const at=await x;at&&(se=at)}const Ne=dA(y,a),{chatReq:De,turnstileToken:de,proofToken:oe}=iee(Ne)?await Ne:Ne;if(De.force_login)return;if(b.getQueriesData(J4())==null&&await b.ensureQueryData(J4()),uZ()){const at=await fZ(),vt=Ct=>typeof Ct=="object"&&Ct!=null&&"id"in Ct,$t=at.flatMap(Ct=>Ct.status!=="fulfilled"||!Ct.value?[]:Array.isArray(Ct.value)?Ct.value.filter(vt):vt(Ct.value)?[Ct.value]:[]);if($t.length>0){const Ct=[...$t].reverse();ie.unshift(...Ct),lee({conversation:t,request:me,messages:Ct})}}X.onCompletionStarted(n,N),me.preflightTime=performance.now()-C;const we=Qh(y);if(Re.addFeatureFlagEvaluation("fast_convo",we),we&&I!=null){const at=performance.now()-I;at<=6e4&&Ie.hist(je.DEFAULT,"fast_conversation_last_prepare_to_convo_client",[{key:"model_id",value:N},{key:"prepare_state",value:String(A)},{key:"has_conduit_token",value:M!=null?"true":"false"}],at)}we&&pe&&Ie.count(je.DEFAULT,"client_request_conduit_token",[{key:"has_conduit_token",value:M!=null?"true":"false"}]),pe&&(m==null||m.logTimingOnce("prompt_request_started")),await me.sendRequest({conduitToken:M,turnstileToken:de,proofToken:oe,completionMetadata:a,resolvedParentMessageId:se,messages:ie,extraStreamParams:i,chatReq:De,profiler:m})}function lee({conversation:t,request:e,messages:n}){Ze(t.id,s=>{dn.updateTree(s,o=>{var i,l,c,d;const a=(d=(l=(i=e.prependMessages)==null?void 0:i[0])!=null?l:e.promptMessage)!=null?d:(c=e.appendMessages)==null?void 0:c[0];if(a&&o.containsNodeOrMessageId(a.id)){for(const u of n)o.containsNodeOrMessageId(u.id)||o.prependNode(a.id,u);return}})})}async function cee({ctx:t,conversation:e,completionType:n,token:s,serverThreadId:o,preflightTime:a}){const i=a!=null?a:performance.now();if(wn(()=>Sx(e)))return;Sx.set(e,!0);const l=Jo(t),c=wn(()=>uT(t,Xc(e))),d=wn(()=>bn(e).id),u=wn(()=>jf(t)),f=wn(()=>bd(t));Is(e.id,{source:ns.CLIENT,value:Xt.STREAMING});const m=dT(),p="request-".concat(e.id,"-").concat(m),g=At(e.id),h=new eI({ctx:t,clientRequestId:p,gizmoType:c,preflightTime:i,isTemporaryChat:u,conversationId:g!=null?g:void 0});ft(e.id)||mr.initThread({clientThreadId:e.id,conversationMode:{kind:wt.PrimaryAssistant},userId:void 0,accountId:void 0}),mr.retainThread(e.id);const x=new FA(t,p,l,void 0,e,void 0,void 0,void 0,void 0,n,d,"url",f,i,c===tg.PROJECT,!1,!1,!1,!1,h,void 0,!1,void 0,void 0,void 0,void 0,void 0,{disablePlaceholder:!0},!Mv(t));x.preflightTime=0,await x.sendResumeRequest({conversationId:o,resumeToken:s,profiler:void 0})}const dee=720*60*60*1e3;class Kf extends wi()(()=>{var n,s;const e=gt.getItem(Ue.MessageFollowupsStoreState);return e?{disabledGlobally:(n=e.disabledGlobally)!=null?n:!1,disabledConversations:new Map((s=e.disabledConversations)!=null?s:[])}:{disabledGlobally:!1,disabledConversations:new Map}}){persistState(){const e=this.getState(),n=Date.now(),s=new Map(Array.from(e.disabledConversations.entries()).filter(([,a])=>a.disabledAt===null||n-a.disabledAt<dee)),o={disabledGlobally:e.disabledGlobally,disabledConversations:Array.from(s.entries())};gt.setItem(Ue.MessageFollowupsStoreState,o)}setDisabledGlobally(e){this.setState({disabledGlobally:e}),this.persistState()}setDisabledConversation(e,n){this.setState(s=>{var o;return{disabledConversations:(o=s.disabledConversations)==null?void 0:o.set(e,{disabled:n,disabledAt:n?Date.now():null})}}),this.persistState()}static useDisabledGlobally(){return this.useState(e=>e.disabledGlobally)}static useIsDisabledConversation(e){return this.useState(n=>{var s,o,a;return(a=(o=(s=n.disabledConversations)==null?void 0:s.get(e))==null?void 0:o.disabled)!=null?a:!1})}static useIsEnabled(e){return this.useState(n=>{var o,a;const s=(o=n.disabledConversations)==null?void 0:o.get(e);return!((a=s==null?void 0:s.disabled)!=null?a:n.disabledGlobally)})}}function a1(t,e={}){var n;return{systemHints:t.filter(s=>s!==Pe.Search),extraStreamParams:U(w({},e),{forceUseSearch:(n=e.forceUseSearch)!=null?n:t.includes(Pe.Search)?!0:void 0})}}function uee(t){return pr.isMultimodalTextMessage(t)?t.content.parts.flatMap(e=>typeof e!="string"&&e.content_type===Sa.VideoAssetPointer?e:null).filter(e=>!!e):[]}const fee=(t,e)=>{var a;const n={"video/mp4":"mp4","video/quicktime":"mov"},s={mp4:"mp4",mov:"mov"},o=(a=e.split(".").pop())==null?void 0:a.toLowerCase();return n[t]||s[o!=null?o:""]||void 0};function mee(t,e,n,s,o){let a=PV.getReadyFiles(t.getState());(s==null?void 0:s.kind)===wt.GizmoMagicCreate?a=a.filter(g=>g.gizmoId!=null):a=a.filter(g=>g.gizmoId==null);let i=e!=null?e:"";const l=[],c=[],d=fT(n,s,o),f=RV(n,s).length>0,m=d===xo.Interpreter||d===xo.Retrieval||d===xo.ContextConnector,p=ye(xs(),"3681682292");return a.forEach(g=>{var v;const h=g.fileSpec,x=fee(h.mimeType,h.name);if(m&&!(f&&p&&x)){const y=h.contextConnectorInfo,b={id:h.id,size:h.size,name:h.name,context_connector_info:y?{context_connector:y==null?void 0:y.contextConnector,source_url:y==null?void 0:y.sourceUrl,synthetic_extension:(v=y==null?void 0:y.syntheticExtension)!=null?v:null,type:y==null?void 0:y.type}:void 0,mime_type:h.mimeType,width:"width"in h?h.width:void 0,height:"height"in h?h.height:void 0,file_token_size:h.fileTokenSize,source:g.source,library_file_id:g.libraryFileId};l.push(b)}f&&("width"in h&&"height"in h&&c.push({content_type:Sa.ImageAssetPointer,asset_pointer:sx(h.id),size_bytes:h.size,width:h.width,height:h.height}),p&&x&&c.push({content_type:Sa.VideoAssetPointer,asset_pointer:sx(h.id),size_bytes:h.size,format:x,metadata:{source:"quick_video_capture"}}))}),c.length>0&&(c.push(e!=null?e:""),i={content_type:ut.MultimodalText,parts:c}),{content:i,attachments:l}}var aI=(t=>(t.Header="Header",t.HeaderTop="HeaderTop",t.HeaderBottom="HeaderBottom",t))(aI||{}),pee=(t=>(t.Box="Box",t.PromptTextareaAction="PromptTextareaAction",t.BannerTermsDisclaimer="BannerTermsDisclaimer",t.NewUserBannerTermsDisclaimer="NewUserBannerTermsDisclaimer",t.BannerSignup="BannerSignup",t.BannersRateLimit="BannersRateLimit",t.BannersBeaconUI="BannersBeaconUI",t.BannerSidekickAnnouncement="BannerSidekickAnnouncement",t.BannerMemoryFull="BannerMemoryFull",t.BannerMemoryAlmostFull="BannerMemoryAlmostFull",t.ParagenControls="ParagenControls",t.AdvancedVoiceOnMobileAnnouncement="AdvancedVoiceOnMobileAnnouncement",t.SearchBrowserExtensionAnnouncement="SearchBrowserExtensionAnnouncement",t.SearchBrowserExtensionReactiveAnnouncement="SearchBrowserExtensionReactiveAnnouncement",t.MoonshineAnnouncement="MoonshineAnnouncement",t.CustomizeChatGPTAnnouncement="CustomizeChatGPTAnnouncement",t.ProjectConversationTaskNoFileAccess="ProjectConversationTaskNoFileAccess",t.JawboneAnnouncement="JawboneAnnouncement",t.JawboneMaxActiveAnnouncement="JawboneMaxActiveAnnouncement",t.PromoRedemptionAnnouncement="PromoRedemptionAnnouncement",t.OperatorAnnouncement="OperatorAnnouncement",t.BannerPlusUpsell="BannerPlusUpsell",t.PlusFreeTrialHomepageAnnouncementBanner="PlusFreeTrialHomepageAnnouncementBanner",t.ContextualAnswersAdminUpsell="ContextualAnswersAdminUpsell",t.ContextualAnswersUserUpsell="ContextualAnswersUserUpsell",t.ReferrerRedemptionAvailableAnnouncement="ReferrerRedemptionAvailableAnnouncement",t.RefereeRedemptionAvailableAnnouncement="RefereeRedemptionAvailableAnnouncement",t.ReferralProgramUpsellAnnouncement="ReferralProgramUpsellAnnouncement",t.TatertotIntakeFormAnnouncement="TatertotIntakeFormAnnouncement",t.StudentsUpsellAnnouncement="StudentsUpsellAnnouncement",t.TeamSeatsPromoAnnouncement="TeamSeatsPromoAnnouncement",t.ModelDeprecationBanner="ModelDeprecationBanner",t.TeamsContextualAnswersUpsell="TeamsContextualAnswersUpsell",t.LanguageUpsellBanner="LanguageUpsellBanner",t.AgentModeAnnouncementBanner="AgentModeAnnouncementBanner",t.GoldenHourAnnouncementBanner="GoldenHourAnnouncementBanner",t.BannerNoAuthTrials="BannerNoAuthTrials",t.StarterPrompts="StarterPrompts",t.ImageGenBanner="ImageGenBanner",t.SystemHintSuggestion="SystemHintSuggestion",t))(pee||{}),gee=(t=>(t.DallePromptControls="DallePromptControls",t))(gee||{});const tC={contentAreas:{Header:{dimensions:null,contentId:null},HeaderTop:{dimensions:null,contentId:null},HeaderBottom:{dimensions:null,contentId:null}},sharedProps:null};function hee(){const t=Dt(Nf(In(()=>tC)));function e(n,s){t.setState(o=>{o.contentAreas[n].dimensions=s})}return{reset:()=>t.setState(tC),useContentAreaId(n){return t(s=>s.contentAreas[n].contentId)},useHasAnnouncementInHeader(){const n=t(s=>s.contentAreas.HeaderTop.contentId);return n==="AdvancedVoiceOnMobileAnnouncement"||n==="BannerSidekickAnnouncement"},useContentAreaApi(n){const s=_.useCallback(a=>t.setState(i=>{i.contentAreas[n].contentId=a}),[n]),o=_.useCallback(()=>{t.setState(a=>{a.contentAreas[n].contentId=null})},[n]);return{set:s,remove:o}},useContentAreaDimensions(n,s){return t(o=>s(o.contentAreas[n].dimensions))},useContentAreaResizeObserver(n,s){_.useEffect(()=>{if(s.current){e(n,s.current.getBoundingClientRect());const o=new ResizeObserver(a=>{for(const i of a)e(n,i.contentRect)});return o.observe(s.current),()=>{o.disconnect(),e(n,null)}}},[s,n])},useIsHeaderContentAreaPopulated(){return t(n=>!!n.contentAreas.HeaderTop.contentId||!!n.contentAreas.HeaderBottom.contentId)},useSharedProps(n){return t(s=>n?n(s.sharedProps):s.sharedProps)},getSharedProps(){return t.getState().sharedProps},useSetSharedProps(){return _.useCallback(n=>{t.setState(s=>{s.sharedProps=n})},[])}}}const rI=_.createContext(null);function OGe(t){"use forget";const e=G.c(3),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={store:hee()},e[0]=s):s=e[0];let o;return e[1]!==n?(o=r.jsx(rI.Provider,{value:s,children:n}),e[1]=n,e[2]=o):o=e[2],o}function Bd(t){"use forget";const e=t===void 0?!0:t,n=_.useContext(rI);if(!n&&e)throw new Error("usePromptTextareaContext must be used within a PromptTextareaProvider");return n}function Ud(){"use forget";const t=G.c(11),e=V(),{store:n}=Bd();let s;t[0]!==e?(s=et(e),t[0]=e,t[1]=s):s=t[1];const o=s,a=ys(),{clearSystemHintModeTrigger:i,getSystemHintModeTrigger:l}=oa(),c=!Kf.useDisabledGlobally(),d=ki();let u;return t[2]!==o||t[3]!==a||t[4]!==i||t[5]!==e||t[6]!==d||t[7]!==l||t[8]!==c||t[9]!==n?(u=(f,m,p,g)=>{var ee,le,X,te,ce,ue,me,xe;const h=n.getSharedProps();if(!h)return;const{clientThreadId:x,onResetState:v,conversationMode:y}=h,b=yt(e,x);On.hideThreadHeader();const C=a===Pe.Search,S=C?l(Pe.Search):void 0,k=ft(x);let E;m.type===Je.Starter&&(E=(ee=m.data)==null?void 0:ee.system_hint);const T=E!=null?E:a,M=(X=(le=k==null?void 0:k.selectedSources)==null?void 0:le.get(T))!=null?X:new Set;let A,I;if($v(m))A=m.categoryId!=="ask"?[m.categoryId]:[],I=m.modelOverride?{model:m.modelOverride}:{};else{const pe=a1(T?[T]:[]);A=(te=pe.systemHints)!=null?te:[],I=(ce=pe.extraStreamParams)!=null?ce:{}}c&&(I.enableMessageFollowups=!0);const N=bn(b),{content:L,attachments:D}=mee(d,_o(m),N,y,T),F=A.includes(Pe.Slurm),$=A.includes(Pe.Glaux),H=Kh(),z=w({suggestion_type:m.type,starter_prompt_id:"id"in m?m.id:void 0,selected_sources:F||$?Array.from(M.values()).map(xee).filter(Boolean):void 0},A.length>0&&{system_hints:A});if(H&&(z.__internal={search_settings:H}),D.length>0&&(z.attachments=D),m.type===Je.Starter&&((ue=m.data)!=null&&ue.kaur1br5)){const pe=(me=m.data)==null?void 0:me.kaur1br5;z.kaur1br5=pe}const K=ls(L,z),J=[];(k==null?void 0:k.startedWithByoMcp)===!0&&J.push(s3("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));let Z;if(A!=null&&A.some(_ee)&&o3(e)){const pe=LV(e);pe&&(Z=pe)}Ko({conversation:b,requestedModelId:Z,promptMessage:K,prependMessages:J,sourceEvent:f,extraStreamParams:I,completionMetadata:{suggestions:p,suggestion:m,suggestionIndex:g,conversationMode:y!=null?y:k==null?void 0:k.mode,systemHints:A,searchSource:S}});const se=he.getCurrentNode(k).message.id;v();const ie=(xe=o==null?void 0:o.isK12)!=null&&xe.call(o)?"K12 Use Starter Prompt":void 0;n1(m,g,x,se,ie),a3()||Vv(),S&&C&&i(Pe.Search)},t[2]=o,t[3]=a,t[4]=i,t[5]=e,t[6]=d,t[7]=l,t[8]=c,t[9]=n,t[10]=u):u=t[10],u}function _ee(t){return Oc(t)}function xee(t){return n3[t]}const iI=(function(t){if(t==null)return Cee;if(typeof t=="function")return r1(t);if(typeof t=="object")return Array.isArray(t)?yee(t):vee(t);if(typeof t=="string")return bee(t);throw new Error("Expected function, string, or object as test")});function yee(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=iI(t[n]);return r1(s);function s(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function vee(t){const e=t;return r1(n);function n(s){const o=s;let a;for(a in t)if(o[a]!==e[a])return!1;return!0}}function bee(t){return r1(e);function e(n){return n&&n.type===t}}function r1(t){return e;function e(n,s,o){return!!(See(n)&&t.call(this,n,typeof s=="number"?s:void 0,o||void 0))}}function Cee(){return!0}function See(t){return t!==null&&typeof t=="object"&&"type"in t}const lI=[],wee=!0,nC=!1,kee="skip";function Eee(t,e,n,s){let o;typeof e=="function"&&typeof n!="function"?(s=n,n=e):o=e;const a=iI(o),i=s?-1:1;l(t,void 0,[])();function l(c,d,u){const f=c&&typeof c=="object"?c:{};if(typeof f.type=="string"){const p=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return m;function m(){let p=lI,g,h,x;if((!e||a(c,d,u[u.length-1]||void 0))&&(p=Tee(n(c,u)),p[0]===nC))return p;if("children"in c&&c.children){const v=c;if(v.children&&p[0]!==kee)for(h=(s?v.children.length:-1)+i,x=u.concat(v);h>-1&&h<v.children.length;){const y=v.children[h];if(g=l(y,h,x)(),g[0]===nC)return g;h=typeof g[1]=="number"?g[1]:h+i}}return p}}}function Tee(t){return Array.isArray(t)?t:typeof t=="number"?[wee,t]:t==null?lI:[t]}function Jv(t,e,n,s){let o,a,i;typeof e=="function"&&typeof n!="function"?(a=void 0,i=e,o=n):(a=e,i=n,o=s),Eee(t,a,l,o);function l(c,d){const u=d[d.length-1],f=u?u.children.indexOf(c):void 0;return i(c,f,u)}}const DGe="n7jupd_crefs",$r="agentCitation";function Mee(t){return t.type!=="invalid"&&t.cite_key!=null}function FGe(t,e){return e.forEach((n,s)=>{n.start_idx!=null&&n.end_idx!=null?(t=t.replace(Ree(n),(o,a)=>" :".concat($r,"{").concat(ac(s,a),"}\n")),t=t.replace(Nee(n),(o,a)=>" :".concat($r,"{").concat(ac(s,a),"}")),t=t.replace(Iee(n)," :".concat($r,"{").concat(ac(s),"}"))):Mee(n)&&(t=t.replace(Pee(n),(o,a)=>" :".concat($r,"{").concat(ac(s,a),"}\n")),t=t.replace(jee(n),(o,a)=>" :".concat($r,"{").concat(ac(s,a),"}")),t=t.replace(Aee(n)," :".concat($r,"{").concat(ac(s),"}")))}),t}function BGe(){return t=>{Jv(t,e=>{var n;!eZ(e)||e.name!==$r||(e.data=(n=e.data)!=null?n:{},e.data.hName=$r,e.data.hProperties=U(w({},e.attributes),{nodeType:e.type}))})}}function Aee(t){return new RegExp("{{".concat(t.type,":").concat(t.cite_key,"}}\\.?"))}function Iee(t){return new RegExp("".concat(t.matched_text,"\\.?"))}function jee(t){return new RegExp("\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function Nee(t){return new RegExp("\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function Pee(t){return new RegExp("\\!\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function Ree(t){return new RegExp("\\!\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function ac(t,e){const n={citationIndex:t.toString()};return e&&(n.label=e),Object.entries(n).map(([s,o])=>"".concat(s,"='").concat(o,"'")).join(" ")}var cI=(t=>(t.Turn="turn",t.ImagesTab="images_tab",t.ProductDetails="product_details",t.SuperWidget="super_widget",t.ImageGroup="image_group",t))(cI||{});class i1 extends wi()(()=>({currentImage:void 0})){setCurrentImage(e){this.setState({currentImage:e})}static useCurrentImage(){return this.useState(e=>e.currentImage)}}function UGe(t){"use forget";const e=G.c(8),{clientThreadId:n,children:s}=t,[o]=_.useState(Lee);let a;e[0]!==o?(a=()=>{o.setCurrentImage(void 0)},e[0]=o,e[1]=a):a=e[1];let i;e[2]!==n||e[3]!==o?(i=[n,o],e[2]=n,e[3]=o,e[4]=i):i=e[4],_.useEffect(a,i);let l;return e[5]!==s||e[6]!==o?(l=r.jsx(i1.Provider,{store:o,children:s}),e[5]=s,e[6]=o,e[7]=l):l=e[7],l}function Lee(){return new i1}const $Ge=3600*24*30;function Oee(t){var e;return((e=t.author.metadata)==null?void 0:e.real_author)===r3.ToolWeb}function VGe(t,e){returnwindow.location.origin+"/search/evals/permalink/".concat(t,"/").concat(e)}function HGe(t){return _h(t.flatMap(e=>e.type==="image_v2"?e.images:[]))}function GGe(t){const e={};return t.forEach(n=>{var s,o,a,i,l,c,d;if(n.type==="grouped_webpages")n.items.forEach(u=>{var m,p;if(!u.url)return;const f=e[u.url];f?"attribution_segments"in u&&"attribution_segments"in f&&(e[u.url]=U(w({},f),{attribution_segments:[...(m=f.attribution_segments)!=null?m:[],...(p=u.attribution_segments)!=null?p:[]]})):e[u.url]=w({},u)});else if(n.type==="webpage"||n.type==="webpage_extended")n.url&&(e[n.url]||(e[n.url]=n));else if(n.type==="image_inline"){const u=(o=n.clicked_from_url)!=null?o:(s=n.asset_pointer_links)==null?void 0:s[0];if(u){const f={type:"image_inline",url:u,title:(a=n.clicked_from_title)!=null?a:"Screenshot",snippet:"",attribution:"screenshot",asset_pointer_links:n.asset_pointer_links,clicked_from_url:n.clicked_from_url,clicked_from_title:n.clicked_from_title};e[u]=f}}else if(n.type==="file"){const u="file://".concat(n.source,"/").concat(n.id),f=(i=n.name)!=null?i:n.id,m=(c=(l=n.snippet)!=null?l:n.text)!=null?c:"",p=(d=n.source)!=null?d:"file";e[u]||(e[u]=U(w({},n),{title:f,url:u,snippet:m,attribution:p}))}else"cite_map"in n&&Object.values(n.cite_map).forEach(u=>{u&&u.url&&(e[u.url]||(e[u.url]=u))})}),Object.values(e)}class Dee{constructor(){Q(this,"loggedEvents",new Set)}logEvent(e,n,s){if(!this.loggedEvents.has(e)){const o=s!=null?s:window.performance.now();B.logEvent(e,w({timeMs:o},n)),this.loggedEvents.add(e)}}}const Fee=new Dee;function Bee(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function WGe(t){return t.join(" ").trim()}const dI=-1,l1=0,yg=1,vg=2,Xv=3,eb=4,tb=5,nb=6,uI=7,fI=8,sC=typeof self=="object"?self:globalThis,Uee=(t,e)=>{const n=(o,a)=>(t.set(a,o),o),s=o=>{if(t.has(o))return t.get(o);const[a,i]=e[o];switch(a){case l1:case dI:return n(i,o);case yg:{const l=n([],o);for(const c of i)l.push(s(c));return l}case vg:{const l=n({},o);for(const[c,d]of i)l[s(c)]=s(d);return l}case Xv:return n(new Date(i),o);case eb:{const{source:l,flags:c}=i;return n(new RegExp(l,c),o)}case tb:{const l=n(new Map,o);for(const[c,d]of i)l.set(s(c),s(d));return l}case nb:{const l=n(new Set,o);for(const c of i)l.add(s(c));return l}case uI:{const{name:l,message:c}=i;return n(new sC[l](c),o)}case fI:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new sC[a](i),o)};return s},oC=t=>Uee(new Map,t)(0),rc="",{toString:$ee}={},{keys:Vee}=Object,ou=t=>{const e=typeof t;if(e!=="object"||!t)return[l1,e];const n=$ee.call(t).slice(8,-1);switch(n){case"Array":return[yg,rc];case"Object":return[vg,rc];case"Date":return[Xv,rc];case"RegExp":return[eb,rc];case"Map":return[tb,rc];case"Set":return[nb,rc]}return n.includes("Array")?[yg,n]:n.includes("Error")?[uI,n]:[vg,n]},sp=([t,e])=>t===l1&&(e==="function"||e==="symbol"),Hee=(t,e,n,s)=>{const o=(i,l)=>{const c=s.push(i)-1;return n.set(l,c),c},a=i=>{if(n.has(i))return n.get(i);let[l,c]=ou(i);switch(l){case l1:{let u=i;switch(c){case"bigint":l=fI,u=i.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return o([dI],i)}return o([l,u],i)}case yg:{if(c)return o([c,[...i]],i);const u=[],f=o([l,u],i);for(const m of i)u.push(a(m));return f}case vg:{if(c)switch(c){case"BigInt":return o([c,i.toString()],i);case"Boolean":case"Number":case"String":return o([c,i.valueOf()],i)}if(e&&"toJSON"in i)return a(i.toJSON());const u=[],f=o([l,u],i);for(const m of Vee(i))(t||!sp(ou(i[m])))&&u.push([a(m),a(i[m])]);return f}case Xv:return o([l,i.toISOString()],i);case eb:{const{source:u,flags:f}=i;return o([l,{source:u,flags:f}],i)}case tb:{const u=[],f=o([l,u],i);for(const[m,p]of i)(t||!(sp(ou(m))||sp(ou(p))))&&u.push([a(m),a(p)]);return f}case nb:{const u=[],f=o([l,u],i);for(const m of i)(t||!sp(ou(m)))&&u.push(a(m));return f}}const{message:d}=i;return o([l,{name:c,message:d}],i)};return a},aC=(t,{json:e,lossy:n}={})=>{const s=[];return Hee(!(e||n),!!e,new Map,s)(t),s},B_=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?oC(aC(t,e)):structuredClone(t):(t,e)=>oC(aC(t,e)),mI=(function(t){if(t==null)return zee;if(typeof t=="string")return Wee(t);if(typeof t=="object")return Gee(t);if(typeof t=="function")return sb(t);throw new Error("Expected function, string, or array as `test`")});function Gee(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=mI(t[n]);return sb(s);function s(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function Wee(t){return sb(e);function e(n){return n.tagName===t}}function sb(t){return e;function e(n,s,o){return!!(qee(n)&&t.call(this,n,typeof s=="number"?s:void 0,o||void 0))}}function zee(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function qee(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const Yee=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,Zee=/^[a-zA-Z]:\\/;function Kee(t){if(typeof t!="string")throw new TypeError("Expected a `string`, got `".concat(typeof t,"`"));return Zee.test(t)?!1:Yee.test(t)}const Qee=["http","https"],Jee=["nofollow"],Xee={};function zGe(t){const e=t||Xee,n=e.protocols||Qee,s=mI(e.test);return function(o){Jv(o,"element",function(a,i,l){if(a.tagName==="a"&&typeof a.properties.href=="string"&&s(a,i,l)){const c=a.properties.href;if(Kee(c)?n.includes(c.slice(0,c.indexOf(":"))):c.startsWith("//")){const d=au(e.content,a),u=d&&!Array.isArray(d)?[d]:d,f=au(e.rel,a)||Jee,m=typeof f=="string"?Bee(f):f,p=au(e.target,a),g=au(e.properties,a);if(g&&Object.assign(a.properties,B_(g)),m.length>0&&(a.properties.rel=[...m]),p&&(a.properties.target=p),u){const h=au(e.contentProperties,a)||{};a.children.push({type:"element",tagName:"span",properties:B_(h),children:B_(u)})}}}})}}function au(t,e){return typeof t=="function"?t(e):t}var c1=(t=>(t.ACCELERATOR="accelerator",t.BLOCK_COMMENT_LAUNCHER="block_comment_launcher",t.CLOSE_TEXTDOC="close_textdoc",t.COLLAPSED_COMMENT="collapsed_comment",t.COMMENT_ACCEPT="comment_accept",t.COMMENT_DISMISS="comment_dismiss",t.COPY="copy",t.DOWNLOAD="download",t.EXPANDED_COMMENT="expanded_comment",t.FILE_DRAWER_ITEM="file_drawer_item",t.HISTORY_NEXT="history_next",t.HISTORY_PREVIOUS="history_previous",t.MESSAGE_ATTACHMENT="message_attachment",t.OPEN_SHARE_MENU="open_share_menu",t.CREATE_SHARE_LINK="create_share_link",t.UPDATE_SHARE_LINK_TO_LATEST="update_share_link_to_latest",t.COPY_SHARE_LINK="copy_share_link",t.UPDATE_SHARE_LINK_PRIVATE="update_share_link_private",t.UPDATE_SHARE_LINK_PUBLIC="update_share_link_public",t.SHOW_CHANGES="show_changes",t.TOOLBAR_FORMAT_BOLD="toolbar_format_bold",t.TOOLBAR_FORMAT_HEADER1="toolbar_format_header1",t.TOOLBAR_FORMAT_HEADER2="toolbar_format_header2",t.TOOLBAR_FORMAT_HEADER3="toolbar_format_header3",t.TOOLBAR_FORMAT_ITALIC="toolbar_format_italic",t.TOOLBAR_FORMAT_PARAGRAPH="toolbar_format_paragraph",t.TOOLBAR_FORMAT_STYLE="toolbar_format_style",t.TOOLBAR_ASK_CHATGPT="toolbar_ask_chatgpt",t.EDIT_IN_CANVAS_MESSAGE="edit_in_canvas_message",t.EDIT_IN_CANVAS_CODE_SNIPPET="edit_in_canvas_code_snippet",t.OPEN_IN_CANVAS_WRITING_BLOCK="open_in_canvas_writing_block",t.SAVE_TO_CHAT_ON_EDITOR_CLOSE="save_to_chat_on_editor_close",t.CLOSE_WITHOUT_SAVING="close_without_saving",t.LEARN_MODE_ABOUT_NETWORK_REQUESTS="learn_more_about_network_requests",t))(c1||{}),bg=(t=>(t.Unknown="unknown",t.ShowToast="show_toast",t.CanvasMessage="canvas_message",t.TurnComplete="turn_complete",t))(bg||{});const ete={canvas_message:Go({message:mT}),turn_complete:Go({}),unknown:Go({}),show_toast:Go({text:ms})},rC=OV(Object.values(bg));function tte(t){const{type:e}=pT(t,{type:rC}),n=rC(e);return w({type:n},ete[n](t))}function iC(t,e){ste(n=>{n.type===t&&e(n)})}function nte(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return new TextDecoder("utf-8").decode(n)}function ste(t){_.useEffect(()=>Pf(window,{message:n=>{const s=n.data;if(!(typeof s!="object"||(s==null?void 0:s.type)!=="canmore_native"))try{const o=nte(s.msg),a=tte(JSON.parse(o));t(a)}catch(o){console.warn("Unknown message from native app: ".concat(s.msg))}}}),[t])}function pI(){var n;let t;const e=ote();switch(e){case"android":t=window.CanmoreNative;break;case"ios":t=(n=window.webkit)==null?void 0:n.messageHandlers.canmoreNative;break;case"web":t=void 0;break}return{platform:e,isNative:e!=="web",bridge:t,sendMessage:s=>t==null?void 0:t.postMessage(btoa(JSON.stringify(s)))}}function ote(){return typeof window.CanmoreNative<"u"?"android":typeof window.webkit<"u"&&typeof window.webkit.messageHandlers.canmoreNative<"u"?"ios":"web"}function d1(t,e){B.logEvent(t,w({platform:pI().platform},e!=null?e:{}))}function ate(t,e,n){B.logEventWithStatsig(t,e,w({platform:pI().platform},n))}function rte(t,e,n){d1(t,w({distributionValue:e},n!=null?n:{}))}function ite(t,e){d1("Canvas Button Clicked",w({buttonName:t},e!=null?e:{}))}function lte(t){if(t instanceof Error){const{name:e,message:n,stack:s,cause:o}=t;return{name:e,message:n,stack:s,cause:o}}return t}function cte(t,e,n){d1("Canvas Client Error",{message:t,error:e==null?t:lte(e),attributes:n}),Re.addError(e)}const Fl={logButtonClick:ite,logEvent:d1,logEventWithStatsig:ate,logError:cte,logDistribution:rte},lC=Dt(()=>({rect:null})),dte=t=>{if(!t)return lC.setState({rect:null});const{height:e,left:n,top:s,width:o}=t.getBoundingClientRect(),{borderRadius:a}=getComputedStyle(t);lC.setState({rect:{height:e,left:n,top:s,width:o,borderRadius:a}})},ute=new RegExp("((?:\\n|\\r)+)((?:\\s{2,}|\\t)+)?|(```)|([#*_-]+)|([(){}[\\]]+)|([\\x21-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\x7E]+)|(\\b(?:await|break|case|catch|class|continue|default|define|except|extends|export|finally|implements|import|include|print|private|protected|public|return|span|switch|system|template|throw|type|using|while)\\b)|(\\b(?:async|breakpoint|cin|cmd|console|const|constexpr|cout|def|defn|div|env|fn|func|function|href|html|img|interface|lambda|namespace|println|src|stdout|struct|var|workdir|yield)\\b)","gi"),fte=[80.33911781017851,19.194942847935266,-78.96158351597562,31.404985863148777,48.13976028814005,82.48501866379408,15.781632991361631,67.81666324403915],mte=-9.860574779222393;function gI(t){return pte(gte(t),fte,mte)>0}function pte(t,e,n){let s=n;for(let o=0;o<t.length;o++)s+=t[o]*e[o];return s}function gte(t){const e=[0,0,0,0,0,0,0,0];if(!t)return e;let n;for(;(n=ute.exec(t))!=null;)for(let s=0;s<e.length;s++)n[s+1]&&(e[s]+=n[s+1].length);for(let s=0;s<e.length;s++)e[s]/=t.length;return e}const Cg=Dt(()=>({focusedObject:null}));function hI(){return Cg(t=>t.focusedObject)}var fl=(t=>(t[t.Textdoc=0]="Textdoc",t[t.ADAVisualization=1]="ADAVisualization",t))(fl||{});const yi=Dt(()=>({focusedObject:null,fromMessageId:null})),qGe=(t,e)=>{const n=yi.getState();e!==n.fromMessageId&&yi.setState({focusedObject:t,fromMessageId:e})},ml=t=>{yi.setState({focusedObject:t,fromMessageId:null})},vi=t=>{Cg.setState({focusedObject:null});const e=yi.getState(),{focusedObject:n}=e;(!n||n.type!==0||n.textdocId!==t)&&_I(t)},_I=t=>{ml({type:0,textdocId:t})},hte=(t,e,n)=>{ml({type:0,textdocId:t,history:e,showChangesAtVersion:n})},YGe=(t,e,n)=>{ml({type:0,textdocId:t,showChangesAtVersion:e,history:n!=null?n:void 0})},ob=()=>{yi.setState({focusedObject:null})},_te=()=>{yi.setState({focusedObject:null,fromMessageId:null})};var co=(t=>(t.INFERRING="inferring",t.PENDING="pending",t.SENT="sent",t))(co||{}),hf=(t=>(t.MODEL="model",t.SYSTEM_HINT_CANVAS="system_hint_canvas",t.SYSTEM_HINT_CANVAS_APPS="system_hint_canvas_apps",t.USER_CREATED_COMPOSER="user_created_composer",t.MESSAGE_CODE_SNIPPET="message_code_snippet",t.MESSAGE_WRITING_BLOCK="message_writing_block",t.MESSAGE="message",t.TASK_RESULT="task_result",t.REMIX_OF_SHARED_CANVAS="remix_of_shared_canvas",t.HIVE="hive",t))(hf||{});const tr=-1;var Os=(t=>(t.CREATING="creating",t.REWRITING="rewriting",t.COMMENTING="commenting",t.UPDATING="updating",t.COMPLETE="complete",t.ATTACHED_PENDING="attached_pending",t.ATTACHED_SENT="attached_sent",t))(Os||{});const ZGe=t=>(t==null?void 0:t.status)!=="complete"&&(t==null?void 0:t.status)!=="attached_pending"&&(t==null?void 0:t.status)!=="attached_sent",KGe=t=>(t==null?void 0:t.status)==="rewriting",QGe=t=>(t==null?void 0:t.status)==="creating",JGe=t=>(t==null?void 0:t.status)==="attached_pending"||(t==null?void 0:t.status)==="attached_sent",XGe=t=>(t==null?void 0:t.status)==="attached_pending";var cr=(t=>(t.DOCUMENT="document",t.CODE_BASH="code/bash",t.CODE_ZSH="code/zsh",t.CODE_JAVASCRIPT="code/javascript",t.CODE_TYPESCRIPT="code/typescript",t.CODE_HTML="code/html",t.CODE_CSS="code/css",t.CODE_PYTHON="code/python",t.CODE_JSON="code/json",t.CODE_SQL="code/sql",t.CODE_GO="code/go",t.CODE_YAML="code/yaml",t.CODE_JAVA="code/java",t.CODE_RUST="code/rust",t.CODE_CPP="code/cpp",t.CODE_SWIFT="code/swift",t.CODE_PHP="code/php",t.CODE_XML="code/xml",t.CODE_RUBY="code/ruby",t.CODE_HASKELL="code/haskell",t.CODE_KOTLIN="code/kotlin",t.CODE_CSHARP="code/csharp",t.CODE_C="code/c",t.CODE_OBJECTIVEC="code/objectivec",t.CODE_R="code/r",t.CODE_LUA="code/lua",t.CODE_DART="code/dart",t.CODE_SCALA="code/scala",t.CODE_PERL="code/perl",t.CODE_COMMONLISP="code/commonlisp",t.CODE_CLOJURE="code/clojure",t.CODE_OCAML="code/ocaml",t.CODE_POWERSHELL="code/powershell",t.CODE_VERILOG="code/verilog",t.CODE_DOCKERFILE="code/dockerfile",t.CODE_VUE="code/vue",t.CODE_REACT="code/react",t.CODE_OTHER="code/other",t.LOADING="loading",t))(cr||{});function Sg(t){return t.startsWith("code/")}function yl(t){const e=ng(t,Object.values(cr),null);if(e)return e;if(t==="webview")return"code/html";if(t.startsWith("code"))switch(t){case"code/js":case"code/jsx":return"code/javascript";case"code/ts":case"code/tsx":return"code/typescript";default:return"code/other"}return"document"}var Un=(t=>(t.CREATE="create",t.REWRITE="rewrite",t.EDIT="edit",t.ADD_COMMENT="add_comment",t.REMOVE_COMMENT="remove_comment",t))(Un||{}),xI=(t=>(t.ACCEPT="accept",t.DISMISS="dismiss",t))(xI||{}),wx=(t=>(t.ACCEPT_INITIATED="accept_initiated",t.DISMISSED="dismissed",t.PENDING="pending",t))(wx||{}),xte=(t=>(t.ADDED="added",t.REMOVED="removed",t))(xte||{}),yte=(t=>(t.ACCEPT_COMMENT="accept_comment",t.ASK_CHATGPT="ask_chatgpt",t.ACCELERATOR="accelerator",t.CONSOLE="console",t.FULL_SCREEN_SUBMIT="full_screen_submit",t.HIVE_SPEAKER_EDIT="hive_speaker_edit",t))(yte||{}),yI=(t=>(t.PUBLIC="public",t.PRIVATE="private",t.WORKSPACE="workspace",t))(yI||{});const vte=t=>ng(t,Object.values(yI),void 0);function vI(t){const e=ne(),n=Qn(t),s=jt();return async({title:a,textdocType:i,content:l,createSource:c})=>{if(!n)return;if(i==="loading"){Re.addError("Tried to add a textdoc with type 'loading'");return}const d=e.formatMessage({id:"6dkdc5",defaultMessage:"New document"});a||(a=d);const{textdoc_id:u}=await ge.safePost("/textdoc/add",{requestBody:{conversation_id:n,textdoc_title:a,textdoc_type:i,content:l,create_source:c}});return s.setQueryData([n,"textdocs"],f=>{if(!f)return f;const m={textdocId:u,messageId:null,type:i,comments:[],status:Os.COMPLETE,title:a,content:l,versionInt:1,createdAt:Date.now()},p=new Map(f.persistedTextdocVersionById);p.set(u,m);const g=[...f.persistedTextdocVersions,m],h=new Map(f.persistedTextdocById);return h.set(u,{id:u,version:1,title:a,textdoc_type:i,content:l,comments:[],metadata:null,updated_at:new Date().toISOString()}),U(w({},f),{persistedTextdocVersionById:p,persistedTextdocVersions:g,persistedTextdocById:h})}),await s.invalidateQueries({queryKey:[n,"textdocs"]}),requestAnimationFrame(()=>{vi(u),setTimeout(()=>{vi(u)},250)}),u}}const bte=R(()=>P(()=>import("./eahncmechdd0yy5s.js"),__vite__mapDeps([24,1])),{loading:t=>O(t)}),Cte=({content:t,codeLanguage:e,codeSnippetRef:n,clientThreadId:s})=>{var d;const o=V(),a=ne(),i=ae(()=>bn(yt(o,s))),l=vI(s);if(!((d=i.enabledTools)!=null&&d.includes(il.Canvas)))return null;function c(){Fl.logButtonClick(c1.EDIT_IN_CANVAS_CODE_SNIPPET),n!=null&&n.current&&dte(n.current);const u=e?yl("code/"+e):gI(t)?cr.CODE_OTHER:cr.DOCUMENT;l({title:a.formatMessage({id:"ay0U57",defaultMessage:"New {codeLanguage} document"},{codeLanguage:e||"text"}),textdocType:u,content:t,createSource:hf.MESSAGE})}return r.jsx(_t,{label:r.jsx(j,{id:"EditInCanvasButton.editTooltip",defaultMessage:"Edit in canvas"}),children:r.jsxs("button",{className:"flex items-center gap-1 py-1 select-none",onClick:c,children:[r.jsx(bte,{className:"icon-xs"}),a.formatMessage({id:"5k0sSJ",defaultMessage:"Edit"})]})})};var U_={},cC;function Ste(){return cC||(cC=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Unidentified="Unidentified",e.Alt="Alt",e.AltGraph="AltGraph",e.CapsLock="CapsLock",e.Control="Control",e.Fn="Fn",e.FnLock="FnLock",e.Hyper="Hyper",e.Meta="Meta",e.NumLock="NumLock",e.ScrollLock="ScrollLock",e.Shift="Shift",e.Super="Super",e.Symbol="Symbol",e.SymbolLock="SymbolLock",e.Enter="Enter",e.Tab="Tab",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e.Backspace="Backspace",e.Clear="Clear",e.Copy="Copy",e.CrSel="CrSel",e.Cut="Cut",e.Delete="Delete",e.EraseEof="EraseEof",e.ExSel="ExSel",e.Insert="Insert",e.Paste="Paste",e.Redo="Redo",e.Undo="Undo",e.Accept="Accept",e.Again="Again",e.Attn="Attn",e.Cancel="Cancel",e.ContextMenu="ContextMenu",e.Escape="Escape",e.Execute="Execute",e.Find="Find",e.Finish="Finish",e.Help="Help",e.Pause="Pause",e.Play="Play",e.Props="Props",e.Select="Select",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.BrightnessDown="BrightnessDown",e.BrightnessUp="BrightnessUp",e.Eject="Eject",e.LogOff="LogOff",e.Power="Power",e.PowerOff="PowerOff",e.PrintScreen="PrintScreen",e.Hibernate="Hibernate",e.Standby="Standby",e.WakeUp="WakeUp",e.AllCandidates="AllCandidates",e.Alphanumeric="Alphanumeric",e.CodeInput="CodeInput",e.Compose="Compose",e.Convert="Convert",e.Dead="Dead",e.FinalMode="FinalMode",e.GroupFirst="GroupFirst",e.GroupLast="GroupLast",e.GroupNext="GroupNext",e.GroupPrevious="GroupPrevious",e.ModeChange="ModeChange",e.NextCandidate="NextCandidate",e.NonConvert="NonConvert",e.PreviousCandidate="PreviousCandidate",e.Process="Process",e.SingleCandidate="SingleCandidate",e.HangulMode="HangulMode",e.HanjaMode="HanjaMode",e.JunjaMode="JunjaMode",e.Eisu="Eisu",e.Hankaku="Hankaku",e.Hiragana="Hiragana",e.HiraganaKatakana="HiraganaKatakana",e.KanaMode="KanaMode",e.KanjiMode="KanjiMode",e.Katakana="Katakana",e.Romaji="Romaji",e.Zenkaku="Zenkaku",e.ZenkakuHanaku="ZenkakuHanaku",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.F13="F13",e.F14="F14",e.F15="F15",e.F16="F16",e.F17="F17",e.F18="F18",e.F19="F19",e.F20="F20",e.Soft1="Soft1",e.Soft2="Soft2",e.Soft3="Soft3",e.Soft4="Soft4",e.AppSwitch="AppSwitch",e.Call="Call",e.Camera="Camera",e.CameraFocus="CameraFocus",e.EndCall="EndCall",e.GoBack="GoBack",e.GoHome="GoHome",e.HeadsetHook="HeadsetHook",e.LastNumberRedial="LastNumberRedial",e.Notification="Notification",e.MannerMode="MannerMode",e.VoiceDial="VoiceDial",e.ChannelDown="ChannelDown",e.ChannelUp="ChannelUp",e.MediaFastForward="MediaFastForward",e.MediaPause="MediaPause",e.MediaPlay="MediaPlay",e.MediaPlayPause="MediaPlayPause",e.MediaRecord="MediaRecord",e.MediaRewind="MediaRewind",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.AudioBalanceLeft="AudioBalanceLeft",e.AudioBalanceRight="AudioBalanceRight",e.AudioBassDown="AudioBassDown",e.AudioBassBoostDown="AudioBassBoostDown",e.AudioBassBoostToggle="AudioBassBoostToggle",e.AudioBassBoostUp="AudioBassBoostUp",e.AudioBassUp="AudioBassUp",e.AudioFaderFront="AudioFaderFront",e.AudioFaderRear="AudioFaderRear",e.AudioSurroundModeNext="AudioSurroundModeNext",e.AudioTrebleDown="AudioTrebleDown",e.AudioTrebleUp="AudioTrebleUp",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.MicrophoneToggle="MicrophoneToggle",e.MicrophoneVolumeDown="MicrophoneVolumeDown",e.MicrophoneVolumeMute="MicrophoneVolumeMute",e.MicrophoneVolumeUp="MicrophoneVolumeUp",e.TV="TV",e.TV3DMode="TV3DMode",e.TVAntennaCable="TVAntennaCable",e.TVAudioDescription="TVAudioDescription",e.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",e.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",e.TVContentsMenu="TVContentsMenu",e.TVDataService="TVDataService",e.TVInput="TVInput",e.TVInputComponent1="TVInputComponent1",e.TVInputComponent2="TVInputComponent2",e.TVInputComposite1="TVInputComposite1",e.TVInputComposite2="TVInputComposite2",e.TVInputHDMI1="TVInputHDMI1",e.TVInputHDMI2="TVInputHDMI2",e.TVInputHDMI3="TVInputHDMI3",e.TVInputHDMI4="TVInputHDMI4",e.TVInputVGA1="TVInputVGA1",e.TVMediaContext="TVMediaContext",e.TVNetwork="TVNetwork",e.TVNumberEntry="TVNumberEntry",e.TVPower="TVPower",e.TVRadioService="TVRadioService",e.TVSatellite="TVSatellite",e.TVSatelliteBS="TVSatelliteBS",e.TVSatelliteCS="TVSatelliteCS",e.TVSatelliteToggle="TVSatelliteToggle",e.TVTerrestrialAnalog="TVTerrestrialAnalog",e.TVTerrestrialDigital="TVTerrestrialDigital",e.TVTimer="TVTimer",e.AVRInput="AVRInput",e.AVRPower="AVRPower",e.ColorF0Red="ColorF0Red",e.ColorF1Green="ColorF1Green",e.ColorF2Yellow="ColorF2Yellow",e.ColorF3Blue="ColorF3Blue",e.ColorF4Grey="ColorF4Grey",e.ColorF5Brown="ColorF5Brown",e.ClosedCaptionToggle="ClosedCaptionToggle",e.Dimmer="Dimmer",e.DisplaySwap="DisplaySwap",e.DVR="DVR",e.Exit="Exit",e.FavoriteClear0="FavoriteClear0",e.FavoriteClear1="FavoriteClear1",e.FavoriteClear2="FavoriteClear2",e.FavoriteClear3="FavoriteClear3",e.FavoriteRecall0="FavoriteRecall0",e.FavoriteRecall1="FavoriteRecall1",e.FavoriteRecall2="FavoriteRecall2",e.FavoriteRecall3="FavoriteRecall3",e.FavoriteStore0="FavoriteStore0",e.FavoriteStore1="FavoriteStore1",e.FavoriteStore2="FavoriteStore2",e.FavoriteStore3="FavoriteStore3",e.Guide="Guide",e.GuideNextDay="GuideNextDay",e.GuidePreviousDay="GuidePreviousDay",e.Info="Info",e.InstantReplay="InstantReplay",e.Link="Link",e.ListProgram="ListProgram",e.LiveContent="LiveContent",e.Lock="Lock",e.MediaApps="MediaApps",e.MediaAudioTrack="MediaAudioTrack",e.MediaLast="MediaLast",e.MediaSkipBackward="MediaSkipBackward",e.MediaSkipForward="MediaSkipForward",e.MediaStepBackward="MediaStepBackward",e.MediaStepForward="MediaStepForward",e.MediaTopMenu="MediaTopMenu",e.NavigateIn="NavigateIn",e.NavigateNext="NavigateNext",e.NavigateOut="NavigateOut",e.NavigatePrevious="NavigatePrevious",e.NextFavoriteChannel="NextFavoriteChannel",e.NextUserProfile="NextUserProfile",e.OnDemand="OnDemand",e.Pairing="Pairing",e.PinPDown="PinPDown",e.PinPMove="PinPMove",e.PinPToggle="PinPToggle",e.PinPUp="PinPUp",e.PlaySpeedDown="PlaySpeedDown",e.PlaySpeedReset="PlaySpeedReset",e.PlaySpeedUp="PlaySpeedUp",e.RandomToggle="RandomToggle",e.RcLowBattery="RcLowBattery",e.RecordSpeedNext="RecordSpeedNext",e.RfBypass="RfBypass",e.ScanChannelsToggle="ScanChannelsToggle",e.ScreenModeNext="ScreenModeNext",e.Settings="Settings",e.SplitScreenToggle="SplitScreenToggle",e.STBInput="STBInput",e.STBPower="STBPower",e.Subtitle="Subtitle",e.Teletext="Teletext",e.VideoModeNext="VideoModeNext",e.Wink="Wink",e.ZoomToggle="ZoomToggle",e.SpeechCorrectionList="SpeechCorrectionList",e.SpeechInputToggle="SpeechInputToggle",e.Close="Close",e.New="New",e.Open="Open",e.Print="Print",e.Save="Save",e.SpellCheck="SpellCheck",e.MailForward="MailForward",e.MailReply="MailReply",e.MailSend="MailSend",e.LaunchCalculator="LaunchCalculator",e.LaunchCalendar="LaunchCalendar",e.LaunchContacts="LaunchContacts",e.LaunchMail="LaunchMail",e.LaunchMediaPlayer="LaunchMediaPlayer",e.LaunchMusicPlayer="LaunchMusicPlayer",e.LaunchMyComputer="LaunchMyComputer",e.LaunchPhone="LaunchPhone",e.LaunchScreenSaver="LaunchScreenSaver",e.LaunchSpreadsheet="LaunchSpreadsheet",e.LaunchWebBrowser="LaunchWebBrowser",e.LaunchWebCam="LaunchWebCam",e.LaunchWordProcessor="LaunchWordProcessor",e.LaunchApplication1="LaunchApplication1",e.LaunchApplication2="LaunchApplication2",e.LaunchApplication3="LaunchApplication3",e.LaunchApplication4="LaunchApplication4",e.LaunchApplication5="LaunchApplication5",e.LaunchApplication6="LaunchApplication6",e.LaunchApplication7="LaunchApplication7",e.LaunchApplication8="LaunchApplication8",e.LaunchApplication9="LaunchApplication9",e.LaunchApplication10="LaunchApplication10",e.LaunchApplication11="LaunchApplication11",e.LaunchApplication12="LaunchApplication12",e.LaunchApplication13="LaunchApplication13",e.LaunchApplication14="LaunchApplication14",e.LaunchApplication15="LaunchApplication15",e.LaunchApplication16="LaunchApplication16",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Decimal="Decimal",e.Key11="Key11",e.Key12="Key12",e.Multiply="Multiply",e.Add="Add",e.Divide="Divide",e.Subtract="Subtract",e.Separator="Separator"})(t.Key||(t.Key={}))})(U_)),U_}var wte=Ste(),Fn=(t=>(t.Core="Core",t.Chat="Chat",t.Settings="Settings",t.Internal="Internal",t))(Fn||{});const qe=w({Mod:"mod",Comma:",",Space:"Space"," ":"Space","":"Space"},wte.Key),eWe=[qe.Mod,"k"],tWe="writingBlockSkipSerialize",kte=/((`{3,})|(~{3,}))\s*/,bI=/^(?:\s*)((`{3,})|(~{3,}))\s*\{/m;var V9;const Ete=new RegExp(String.raw(V9||(V9=ct(["^s*:::","{[^}]*}[sS]*?:::"],["^\\s*:::","\\{[^}]*\\}[\\s\\S]*?:::"])),xh),"m");var H9;const Tte=new RegExp(String.raw(H9||(H9=ct(["^s*:::",""],["^\\s*:::",""])),xh),"m");var G9;const Mte=new RegExp(String.raw(G9||(G9=ct(["^s*:::","(?:s|{|$)"],["^\\s*:::","(?:\\s|\\{|$)"])),xh)),Ate=/^\s*:::\s*$/;var W9;const Ite=new RegExp(String.raw(W9||(W9=ct([":::",""])),xh));function nWe(t,e,n){B.logEventWithStatsig(t,e,n),Ie.count(je.WRITING_BLOCKS,e)}function jte(t){const e=CI(t);return Ete.test(e)?!0:bI.test(e)}function sWe(t){const e=CI(t);return Tte.test(e)?!0:bI.test(e)}function oWe(t){var i,l,c;const e=t.split("\n"),n=[],s=[];let o=null,a=null;for(const d of e){if(a){if(Ate.test(d)){n.push(...a),a=null;continue}a.push(d);continue}if(o){const p=(i=o.nested[o.nested.length-1])!=null?i:null;if((p==null?void 0:p.kind)==="code"){n.push(d);const h=Nu(d);h&&h.info.trim().length===0&&h.marker===p.marker&&h.fence.length===p.length&&o.nested.pop();continue}const g=Nu(d);if(g){const h=g.info.trimStart();if((p==null?void 0:p.kind)==="writing"&&g.info.trim().length===0&&g.marker===p.marker&&g.fence.length===p.length){o.nested.pop();continue}if(o.nested.length===0&&g.info.trim().length===0&&g.marker===o.marker&&g.fence.length===o.length){o=null;continue}const v=h.startsWith("{")?"writing":"code";o.nested.push({kind:v,marker:g.marker,length:g.fence.length}),v==="code"&&n.push(d);continue}n.push(d);continue}if(s.length>0){n.push(d);const p=Nu(d);p&&p.info.trim().length===0&&p.marker===((l=s[s.length-1])==null?void 0:l.marker)&&p.fence.length===((c=s[s.length-1])==null?void 0:c.length)&&s.pop();continue}const u=d.match(Ite);if((u==null?void 0:u.index)!=null){const p=d.slice(0,u.index).trimEnd();p.length>0&&n.push(p),a=[];continue}if(Mte.test(d)){a=[];continue}const f=Nu(d);if(!f){n.push(d);continue}if(f.info.trimStart().startsWith("{")){o={marker:f.marker,length:f.fence.length,nested:[]};continue}s.push({marker:f.marker,length:f.fence.length}),n.push(d)}return a&&n.push(...a),n.join("\n")}function CI(t){const e=t.split("\n"),n=[];let s=null,o=[];for(const a of e){const i=Nu(a);if(i){const l=i.info.trimStart();if(!s){l.startsWith("{")?(n.push(a),s={marker:i.marker,length:i.fence.length,kind:"writing"},o=[]):(s={marker:i.marker,length:i.fence.length,kind:"code"},o=[a]);continue}s.kind==="code"?o.push(a):n.push(a),i.info.trim().length===0&&i.marker===s.marker&&i.fence.length===s.length&&(s.kind==="code"&&(o=[]),s=null);continue}if(!s){n.push(a);continue}if(s.kind==="writing"){n.push(a);continue}o.push(a)}return(s==null?void 0:s.kind)==="code"&&n.push(...o),n.join("\n")}function Nu(t){const e=t.match(/^\s*/),n=e?e[0]:"",s=t.slice(n.length),o=s.match(kte);if(!o)return null;const a=o[0].trim(),i=a[0],l=s.slice(a.length).trimStart();return{leadingWhitespace:n,fence:a,marker:i,info:l}}function dC(t,e){const n=[];let s=e;for(;s&&s!==t;){const o=s.parentNode;if(!o)throw new Error("Unable to resolve selection for magic edit.");const a=Array.prototype.indexOf.call(o.childNodes,s);n.unshift(a),s=o}if(s!==t)throw new Error("Unable to resolve selection for magic edit.");return n}function aWe(t,e){return{startPath:dC(t,e.startContainer),startOffset:e.startOffset,endPath:dC(t,e.endContainer),endOffset:e.endOffset}}function rWe(t,e,n,s=120){const o=Math.max(0,e-s),a=Math.min(t.length,n+s);return{leading:t.slice(o,e),selection:t.slice(e,n),trailing:t.slice(n,a)}}async function iWe(t){const e=new TextEncoder,n=await crypto.subtle.digest("SHA-256",e.encode(t));return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}const lWe=t=>ye(t,"3700195277")||!1,cWe=()=>{const t=Xo();return!!(t!=null&&t.includes(os.CanvasCodeExecution))||void 0},dWe=()=>{const t=Xo();return!!(t!=null&&t.includes(os.CanvasCodeNetworkAccess))||void 0},uWe=t=>ye(t,"2311599525"),fWe=t=>ye(t,"3468624635")||!1,Nte=()=>{const t=V(),e=ye(t,"3286474446"),n=Mo();return tt(t)&&e&&!n},mWe=(t,e)=>{var p,g;const n=V(),s=tt(n),a=!!((p=ae(()=>bn(yt(n,t))).enabledTools)!=null&&p.includes(il.Canvas)),i=Mo(),l=wl(),c=(g=e==null?void 0:e.metadata)==null?void 0:g.b1de6e2_s,d=Es(),u=!!e&&gh(e)===hh.PIMBlock,f=ye(n,"4223274760"),m=((e==null?void 0:e.content.content_type)===ut.Text||(e==null?void 0:e.content.content_type)===ut.MultimodalText)&&jte(e==null?void 0:e.content.parts.join("\n"));return s&&f&&!m&&(!i||l)&&a&&!c&&!d&&!u};function SI(){const t=_.useRef(!1);return _.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),_.useCallback(()=>t.current,[])}const Pte=R(()=>P(()=>import("./iyn42bfr1ydmech0.js"),__vite__mapDeps([25,1])),{loading:t=>O(t)}),Rte=R(()=>P(()=>import("./kspsmo2l8jg7uqdj.js"),__vite__mapDeps([26,1])),{loading:t=>O(t)}),uC=be({copy:{id:"CopyButton.copy",defaultMessage:"Copy"},copied:{id:"CopyButton.copied",defaultMessage:"Copied"}});function wI({buttonText:t,shouldChangeText:e=!0,iconClassName:n="icon-sm",onCopy:s,className:o,iconOnly:a=!1,textPosition:i="right",tooltipSideOffset:l}){const c=ne(),[d,u]=_.useState(!1),f=SI(),m=_.useCallback(g=>{g.stopPropagation(),s(g),u(!0),setTimeout(()=>{f()&&u(!1)},2e3)},[f,s]);let p=t;return e&&d?p=r.jsx(j,w({},uC.copied)):t===!0&&(p=r.jsx(j,w({},uC.copy))),r.jsxs(r.Fragment,{children:[!d&&r.jsx(_t,{triggerAs:null,label:r.jsx(j,{id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),disabled:!a,sideOffset:l,children:r.jsxs(fC,{onClick:m,className:o,"aria-label":c.formatMessage({id:"ywKsIl",defaultMessage:"Copy"}),children:[i==="left"&&!a&&p,r.jsx(Pte,{className:n}),i==="right"&&!a&&p]})}),d&&r.jsxs(fC,{className:o,"aria-label":c.formatMessage({id:"I3L53c",defaultMessage:"Copied"}),children:[i==="left"&&!a&&p,r.jsx(Rte,{className:n}),i==="right"&&!a&&p]})]})}var z9;const fC=mt.button(z9||(z9=ct(["flex gap-1 items-center select-none"])));function u1(t,{type:e="copy",source:n,messageId:s,serverThreadId:o,selectedText:a,location:i,contentType:l,productLogOnly:c=!1}){if(tt(t)&&(B.logEvent("Content Exported",{type:e,source:n,length:a.length,location:i,contentType:l}),!(c||e==="download")))return ge.safePost("/conversation/implicit_message_feedback",{requestBody:{message_id:s,conversation_id:o,source:n,feedback:{feedback_type:e,selected_text_length:a.length},location:i}})}const Lte=_.createContext({isWithinDataAnalysisToolMessage:!1});var mC=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ote(t,e){return!!(t===e||mC(t)&&mC(e))}function Dte(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Ote(t[n],e[n]))return!1;return!0}function Bl(t,e){e===void 0&&(e=Dte);var n=null;function s(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(n&&n.lastThis===this&&e(o,n.lastArgs))return n.lastResult;var i=t.apply(this,o);return n={lastResult:i,lastArgs:o,lastThis:this},i}return s.clear=function(){n=null},s}const Fte=Bl(()=>P(()=>import("./bpcuw1lkswzub019.js"),__vite__mapDeps([27,1,28]))),Bte=Kn.memo(function({htmlSegment:e}){return r.jsx("span",{dangerouslySetInnerHTML:{__html:e}})}),Ute=t=>{var e,n;if(t instanceof Element)return(n=(e=t.closest("[data-message-id]"))==null?void 0:e.getAttribute("data-message-id"))!=null?n:void 0};function $te({wrapperClassName:t,codeClassName:e,language:n,content:s,shouldWrapCode:o,removeTopBorderRadius:a,showActionBar:i=!0,showStickyRightContent:l=!0,codeContainerClassName:c,title:d}){var I;const u=V(),f=Ao(),m=_.useRef(null),p=Ut(),g=Es(),h=Nte(),x=jn(hn),v=Yh(),y=_.useCallback(N=>{var D;N.preventDefault(),N.stopPropagation();const L=(D=window.getSelection())==null?void 0:D.toString();L&&Zo(L,void 0,N)},[]),b=_.useCallback(N=>{const L=(F,$,H)=>{if(g||(f==null?void 0:f.id)==null||$===void 0)return;const z=At(f.id);z!=null&&u1(u,{source:F,type:"copy",messageId:$,serverThreadId:z,selectedText:H,location:"code-snippet",contentType:"code"})},D=Ute(N.target);Zo(s,p,N),L("mouse",D,s)},[u,s,p,g,f]),C=ne(),{isWithinDataAnalysisToolMessage:S}=_.useContext(Lte),[k,E]=_.useState(null);_.useEffect(()=>{Fte().then(N=>{if(N!=null)try{E(N.highlightCode(s,n))}catch(L){if(!(L instanceof Error&&/Unknown language/i.test(L.message)))throw L}})},[s,n]);const T=n==="svg"||(n==="xml"||n==="html")&&Yte(s),M=_.useMemo(()=>k==null?void 0:k.html.split(/(<span[^>]*>.*?<\/span>)/g).filter(Boolean),[k==null?void 0:k.html]),A=T?r.jsx(DV,{svgString:s,className:"max-h-96 w-full"}):M&&M.length>0?r.jsx("span",{children:M.map((N,L)=>r.jsx(Bte,{htmlSegment:N},L))}):k!=null&&k.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:k.html}}):r.jsx("span",{children:s});return r.jsx(Hte,{ref:m,title:(I=d!=null?d:k==null?void 0:k.language)!=null?I:n,shouldWrapCode:o,stickyTitleRightContent:l&&r.jsxs("div",{className:"bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs",children:[S&&r.jsx(Vte,{}),r.jsx(wI,{buttonText:h?C.formatMessage({id:"6NJu7m",defaultMessage:"Copy"}):C.formatMessage({id:"zIa6ZQ",defaultMessage:"Copy code"}),onCopy:b,className:"py-1",iconClassName:h?"icon-xs":"icon-sm"}),!v&&(f==null?void 0:f.id)&&h&&r.jsx(Cte,{content:s,codeLanguage:n!=null?n:"",codeSnippetRef:m,clientThreadId:f==null?void 0:f.id})]}),codeClassName:e,codeContainerClassName:c,onCopy:y,className:W(t,x&&"border-token-border-medium bg-token-bg-primary dark:bg-token-sidebar-surface-primary border"),removeTopBorderRadius:a,showActionBar:i,isAuraSidebar:x,children:A})}function Vte(){const e=Tl(!0),{data:n=!1}=to(Lt.ShowExpandedCodeView),s=ne();return r.jsxs("div",{className:"border-token-border-medium me-2 flex items-center gap-2 border-e pe-2",children:[r.jsx("label",{htmlFor:"ada-always-show",children:r.jsx(j,{defaultMessage:"Always show details",id:"message.tools.codeInterpreter.alwaysShowAnalysis"})}),r.jsx(FV,{id:"ada-always-show",size:"small",onCheckedChange:o=>{e.mutate({setting:Lt.ShowExpandedCodeView,value:o})},checked:n,"aria-label":n?s.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis on",id:"message.tools.codeInterpreter.alwaysShowAnalysis.enabled"}):s.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis off",id:"message.tools.codeInterpreter.alwaysShowAnalysis.disabled"})})]})}function Hte({children:t,title:e,stickyTitleRightContent:n,shouldWrapCode:s=!1,className:o,codeContainerClassName:a,codeClassName:i,ref:l,onCopy:c,removeTopBorderRadius:d,showActionBar:u=!0,isAuraSidebar:f=!1}){return r.jsxs(Gte,{className:o,children:[u&&r.jsxs(r.Fragment,{children:[r.jsx(Wte,{$removeTopBorderRadius:d,className:W(f&&"bg-token-bg-primary dark:bg-token-sidebar-surface-primary"),children:e}),r.jsx("div",{className:"sticky top-9",children:r.jsx("div",{className:"absolute end-0 bottom-0 flex h-9 items-center pe-2",children:n})})]}),r.jsx(zte,{ref:l,className:a,children:r.jsx(qte,{$shouldWrap:s,className:i,onCopy:c,children:t})})]})}var q9;const Gte=mt.div(q9||(q9=ct(["contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"])));var Y9;const Wte=mt.div(Y9||(Y9=ct(["flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary select-none ",""])),t=>t.$removeTopBorderRadius?"":"rounded-t-2xl"),zte=function({children:e,className:n,ref:s}){return r.jsx("div",{ref:s,className:W("overflow-y-auto p-4",n),dir:"ltr",children:e})};var Z9;const qte=mt.code(Z9||(Z9=ct(["",""])),t=>t.$shouldWrap?"whitespace-pre-wrap!":"whitespace-pre!");function Yte(t){return t.trim().startsWith("<svg")}function Zte(t){return"children"in t?kI(t):"value"in t?t.value:""}function Kte(t){return t.type==="text"?t.value:"children"in t?kI(t):""}function kI(t){let e=-1;const n=[];for(;++e<t.children.length;)n[e]=Kte(t.children[e]);return n.join("")}function Qte(d){var u=d,{node:t,className:e,wrapperClassName:n,children:s,inline:o,removeTopBorderRadius:a,showActionBar:i=!0,codeContainerClassName:l}=u,c=ke(u,["node","className","wrapperClassName","children","inline","removeTopBorderRadius","showActionBar","codeContainerClassName"]);var f;if(o)return r.jsx("code",U(w({className:e},c),{children:s}));{const m=(f=e==null?void 0:e.split(" ").find(g=>g.startsWith("language-")))==null?void 0:f.split("-")[1],p=t?Zte(t):"";return r.jsx($te,{language:m,wrapperClassName:n,codeContainerClassName:l,codeClassName:e,content:p,removeTopBorderRadius:a,showActionBar:i})}}function EI(t){return t.type==="element"}function Jte(t){return EI(t)?t.tagName==="code":!1}function pWe(){return function(t){Jv(t,"element",function(e,n,s){Jte(e)&&(s&&EI(s)&&s.tagName==="pre"?e.properties.inline=!1:e.properties.inline=!0)})}}const ab=t=>{switch(t){case"thumbsDown":return"thumbs_down";case"thumbsUp":return"thumbs_up"}},Xte="ecosystem_app_feedback";function Pa(t,e,n="CHAT"){return{signal_detail:{common_metadata:e},signal_type:t,signal_metadata:{},user_metadata:{},product_surface:n}}function Ra(t){ge.safePost("/unified_user_signals",{requestBody:t,authOption:nn.SendIfAvailable})}function ene(t,e,n,s="CHAT",o){var a=Pa("message_feedback",w({conversation_id:e,message_id:n},o!=null&&o.originatingConversationId?{originating_conversation_id:o.originatingConversationId}:{}),s);a.signal_detail.message_feedback=t,Ra(a)}function tne(t,e,n,s="CHAT"){var o=Pa("conversation_rating",{conversation_id:e,message_id:n},s);o.signal_detail.conversation_rating=t,Ra(o)}function Lr(t,e,n,s,o={},a="CHAT"){const i=Pa(t,{conversation_id:e,message_id:n,image_generation_id:s},a);Object.assign(i.signal_detail,o),Ra(i)}function TI(t,e,n,s="CHAT"){var o=Pa("turn_regeneration",{conversation_id:e,model_slug:n},s);o.signal_detail.turn_regeneration=t,Ra(o)}function gWe(t,e,n="CHAT"){var s=Pa("active_branch_switch",{conversation_id:e},n);s.signal_detail.active_branch_switch=t,Ra(s)}function nne(t,e,n,s,o="CHAT"){return Pa(t,{conversation_id:e,message_id:n,model_slug:s},o)}function hWe(t,e,n,s,o,a,i="CHAT"){if(!ye(a,"2637496240"))return;const c=nne(t==="accept"?"writing_block_magic_edit_accepted":"writing_block_magic_edit_rejected",n,s,o,i);t==="accept"?c.signal_detail.writing_block_magic_edit_accepted=e:c.signal_detail.writing_block_magic_edit_rejected=e,Ra(c)}function sne(t,e,n="CHAT"){const s=Pa("survey_submission",{conversation_id:e},n);s.signal_detail.survey_submission=t,Ra(s)}function one(t,e,n="CHAT"){const s=Pa("survey_seen",{conversation_id:e},n);s.signal_detail.survey_seen=t,Ra(s)}function ane(t,e,n="CHAT"){var o,a;const s=Pa("survey_dismissed",{conversation_id:e},n);s.signal_detail.survey_dismissed={survey_campaign_name:(o=t.survey_campaign_name)!=null?o:null,survey_election_id:(a=t.survey_election_id)!=null?a:null},Ra(s)}function _We({rating:t,conversationId:e,messageId:n,suggestionMessageId:s,attributionId:o,widgetType:a,productSurface:i="CHAT"}){const l=Pa(Xte,{conversation_id:e!=null?e:null,message_id:n!=null?n:null},i);l.signal_detail.ecosystem_app_feedback={rating:ab(t),attribution_id:o!=null?o:null,widget_type:a!=null?a:null,suggestion_message_id:s!=null?s:null},Ra(l)}function rb(t,e="short"){try{const n=new URL(t).hostname.replace("www.","");return e==="hostname"?n:n.replace(/\.[^.]*$/,"")}catch(n){return t}}var ib="Popover",[MI]=Ml(ib,[yh]),Qf=yh(),[rne,Ai]=MI(ib),AI=t=>{const{__scopePopover:e,children:n,open:s,defaultOpen:o,onOpenChange:a,modal:i=!1}=t,l=Qf(e),c=_.useRef(null),[d,u]=_.useState(!1),[f=!1,m]=_r({prop:s,defaultProp:o,onChange:a});return r.jsx(gT,U(w({},l),{children:r.jsx(rne,{scope:e,contentId:vh(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:_.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:_.useCallback(()=>u(!0),[]),onCustomAnchorRemove:_.useCallback(()=>u(!1),[]),modal:i,children:n})}))};AI.displayName=ib;var II="PopoverAnchor",jI=_.forwardRef((t,e)=>{const c=t,{__scopePopover:n}=c,s=ke(c,["__scopePopover"]),o=Ai(II,n),a=Qf(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=o;return _.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(i3,U(w(w({},a),s),{ref:e}))});jI.displayName=II;var NI="PopoverTrigger",PI=_.forwardRef((t,e)=>{const c=t,{__scopePopover:n}=c,s=ke(c,["__scopePopover"]),o=Ai(NI,n),a=Qf(n),i=Dn(e,o.triggerRef),l=r.jsx(fn.button,U(w({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":UI(o.open)},s),{ref:i,onClick:Rt(t.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?l:r.jsx(i3,U(w({asChild:!0},a),{children:l}))});PI.displayName=NI;var lb="PopoverPortal",[ine,lne]=MI(lb,{forceMount:void 0}),RI=t=>{const{__scopePopover:e,forceMount:n,children:s,container:o}=t,a=Ai(lb,e);return r.jsx(ine,{scope:e,forceMount:n,children:r.jsx(bh,{present:n||a.open,children:r.jsx(l3,{asChild:!0,container:o,children:s})})})};RI.displayName=lb;var id="PopoverContent",LI=_.forwardRef((t,e)=>{const n=lne(id,t.__scopePopover),i=t,{forceMount:s=n.forceMount}=i,o=ke(i,["forceMount"]),a=Ai(id,t.__scopePopover);return r.jsx(bh,{present:s||a.open,children:a.modal?r.jsx(cne,U(w({},o),{ref:e})):r.jsx(dne,U(w({},o),{ref:e}))})});LI.displayName=id;var cne=_.forwardRef((t,e)=>{const n=Ai(id,t.__scopePopover),s=_.useRef(null),o=Dn(e,s),a=_.useRef(!1);return _.useEffect(()=>{const i=s.current;if(i)return hT(i)},[]),r.jsx(_T,{as:xT,allowPinchZoom:!0,children:r.jsx(OI,U(w({},t),{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Rt(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Rt(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Rt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})}))})}),dne=_.forwardRef((t,e)=>{const n=Ai(id,t.__scopePopover),s=_.useRef(!1),o=_.useRef(!1);return r.jsx(OI,U(w({},t),{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:a=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),OI=_.forwardRef((t,e)=>{const g=t,{__scopePopover:n,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u}=g,f=ke(g,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),m=Ai(id,n),p=Qf(n);return yT(),r.jsx(vT,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:a,children:r.jsx(bT,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:r.jsx(CT,U(w(w({"data-state":UI(m.open),role:"dialog",id:m.contentId},p),f),{ref:e,style:U(w({},f.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),DI="PopoverClose",FI=_.forwardRef((t,e)=>{const a=t,{__scopePopover:n}=a,s=ke(a,["__scopePopover"]),o=Ai(DI,n);return r.jsx(fn.button,U(w({type:"button"},s),{ref:e,onClick:Rt(t.onClick,()=>o.onOpenChange(!1))}))});FI.displayName=DI;var une="PopoverArrow",BI=_.forwardRef((t,e)=>{const a=t,{__scopePopover:n}=a,s=ke(a,["__scopePopover"]),o=Qf(n);return r.jsx(ST,U(w(w({},o),s),{ref:e}))});BI.displayName=une;function UI(t){return t?"open":"closed"}var Ul=AI,fne=jI,vr=PI,$l=RI,Vl=LI,mne=FI,pne=BI,gne="Toggle",$I=_.forwardRef((t,e)=>{const c=t,{pressed:n,defaultPressed:s=!1,onPressedChange:o}=c,a=ke(c,["pressed","defaultPressed","onPressedChange"]),[i=!1,l]=_r({prop:n,onChange:o,defaultProp:s});return r.jsx(fn.button,U(w({type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":t.disabled?"":void 0},a),{ref:e,onClick:Rt(t.onClick,()=>{t.disabled||l(!i)})}))});$I.displayName=gne;var $d="ToggleGroup",[VI,xWe]=BV($d,[Ch]),HI=Ch(),cb=Kn.forwardRef((t,e)=>{const o=t,{type:n}=o,s=ke(o,["type"]);if(n==="single"){const a=s;return r.jsx(hne,U(w({},a),{ref:e}))}if(n==="multiple"){const a=s;return r.jsx(_ne,U(w({},a),{ref:e}))}throw new Error("Missing prop `type` expected on `".concat($d,"`"))});cb.displayName=$d;var[GI,WI]=VI($d),hne=Kn.forwardRef((t,e)=>{const c=t,{value:n,defaultValue:s,onValueChange:o=()=>{}}=c,a=ke(c,["value","defaultValue","onValueChange"]),[i,l]=_r({prop:n,defaultProp:s,onChange:o});return r.jsx(GI,{scope:t.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:l,onItemDeactivate:Kn.useCallback(()=>l(""),[l]),children:r.jsx(zI,U(w({},a),{ref:e}))})}),_ne=Kn.forwardRef((t,e)=>{const u=t,{value:n,defaultValue:s,onValueChange:o=()=>{}}=u,a=ke(u,["value","defaultValue","onValueChange"]),[i=[],l]=_r({prop:n,defaultProp:s,onChange:o}),c=Kn.useCallback(f=>l((m=[])=>[...m,f]),[l]),d=Kn.useCallback(f=>l((m=[])=>m.filter(p=>p!==f)),[l]);return r.jsx(GI,{scope:t.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:d,children:r.jsx(zI,U(w({},a),{ref:e}))})});cb.displayName=$d;var[xne,yne]=VI($d),zI=Kn.forwardRef((t,e)=>{const m=t,{__scopeToggleGroup:n,disabled:s=!1,rovingFocus:o=!0,orientation:a,dir:i,loop:l=!0}=m,c=ke(m,["__scopeToggleGroup","disabled","rovingFocus","orientation","dir","loop"]),d=HI(n),u=Sh(i),f=w({role:"group",dir:u},c);return r.jsx(xne,{scope:n,rovingFocus:o,disabled:s,children:o?r.jsx(kT,U(w({asChild:!0},d),{orientation:a,dir:u,loop:l,children:r.jsx(fn.div,U(w({},f),{ref:e}))})):r.jsx(fn.div,U(w({},f),{ref:e}))})}),wg="ToggleGroupItem",qI=Kn.forwardRef((t,e)=>{const n=WI(wg,t.__scopeToggleGroup),s=yne(wg,t.__scopeToggleGroup),o=HI(t.__scopeToggleGroup),a=n.value.includes(t.value),i=s.disabled||t.disabled,l=U(w({},t),{pressed:a,disabled:i}),c=Kn.useRef(null);return s.rovingFocus?r.jsx(wT,U(w({asChild:!0},o),{focusable:!i,active:a,ref:c,children:r.jsx(pC,U(w({},l),{ref:e}))})):r.jsx(pC,U(w({},l),{ref:e}))});qI.displayName=wg;var pC=Kn.forwardRef((t,e)=>{const c=t,{__scopeToggleGroup:n,value:s}=c,o=ke(c,["__scopeToggleGroup","value"]),a=WI(wg,n),i={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return r.jsx($I,U(w(w({},l),o),{ref:e,onPressedChange:d=>{d?a.onItemActivate(s):a.onItemDeactivate(s)}}))}),yWe=cb,vWe=qI;const db=(...t)=>e=>{t.forEach(n=>{if(typeof n=="function")n(e);else if(n){const s=n;s.current=e}})},vne=(...t)=>{"use no forget";return _.useMemo(()=>db(...t),[...t])},YI=sn(()=>UV(()=>({width:window.innerWidth,height:window.innerHeight}),t=>Pf(window,{resize:t}),{getServerFallback:()=>({width:$V()?360:768,height:640})}));function gC(t,e){const n=t.indexOf(e);return n===-1?Number.POSITIVE_INFINITY:n}const f1=t=>{"use forget";const e=G.c(14),{binding:n,className:s}=t,o=ne();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=VV(),e[0]=a):a=e[0];const i=a;let l,c;if(e[1]!==n||e[2]!==s||e[3]!==o){let u;e[6]===Symbol.for("react.memo_cache_sentinel")?(u=(p,g)=>{const h=i?kne:Ene,x=gC(h,p),v=gC(h,g);return x-v},e[6]=u):u=e[6];const f=[...n].sort(u);e[7]!==s?(l=W("inline-flex whitespace-pre *:inline-flex *:font-sans",!i&&"*:not-last:after:px-0.5 *:not-last:after:content-['+']",s),e[7]=s,e[8]=l):l=e[8];let m;e[9]!==o?(m=p=>{var x,v,y;const g=(v=(x=i?Sne[p]:null)!=null?x:wne[p])!=null?v:p.toLocaleUpperCase(),h=(y=i?bne[p]:null)!=null?y:Cne[p];return r.jsx("kbd",{"aria-label":h&&o.formatMessage(h),children:r.jsx("span",{className:"min-w-[1em]",children:g})},p)},e[9]=o,e[10]=m):m=e[10],c=f.map(m),e[1]=n,e[2]=s,e[3]=o,e[4]=l,e[5]=c}else l=e[4],c=e[5];let d;return e[11]!==l||e[12]!==c?(d=r.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=d):d=e[13],d},Fo=be({commandKey:{id:"keyboard.key.command",defaultMessage:"Command"},optionKey:{id:"keyboard.key.option",defaultMessage:"Option"},shiftKey:{id:"keyboard.key.shift",defaultMessage:"Shift"},controlKey:{id:"keyboard.key.control",defaultMessage:"Control"},altKey:{id:"keyboard.key.alt",defaultMessage:"Alt"},winKey:{id:"keyboard.key.win",defaultMessage:"Windows"},escapeKey:{id:"keyboard.key.esc",defaultMessage:"Escape"},deleteKey:{id:"keyboard.key.delete",defaultMessage:"Delete"},backspaceKey:{id:"keyboard.key.bksp",defaultMessage:"Backspace"}}),bne={[qe.Mod]:Fo.commandKey,[qe.Meta]:Fo.commandKey,[qe.Alt]:Fo.optionKey,[qe.Backspace]:Fo.deleteKey},Cne={[qe.Mod]:Fo.controlKey,[qe.Meta]:Fo.winKey,[qe.Alt]:Fo.altKey,[qe.Shift]:Fo.shiftKey,[qe.Control]:Fo.controlKey,[qe.Escape]:Fo.escapeKey,[qe.Backspace]:Fo.backspaceKey},Sne={[qe.Mod]:"",[qe.Meta]:"",[qe.Alt]:"",[qe.Shift]:"",[qe.Control]:"",[qe.Escape]:""},wne={[qe.Mod]:"Ctrl",[qe.Meta]:"Win",[qe.Alt]:"Alt",[qe.Shift]:"Shift",[qe.Control]:"Ctrl",[qe.Comma]:",",[qe.Enter]:"",[qe.Escape]:"Esc",[qe.ArrowUp]:"",[qe.ArrowDown]:"",[qe.ArrowLeft]:"",[qe.ArrowRight]:"",[qe.Backspace]:"",[qe.Delete]:"",[qe.Tab]:""},kne=[qe.Control,qe.Alt,qe.Shift,qe.Meta,qe.Mod],Ene=[qe.Meta,qe.Mod,qe.Control,qe.Alt,qe.Shift];var Fe=(t=>(t.Onboarding="oai/apps/hasSeenOnboarding",t.hasSeenExistingUserPersonalityOnboarding="oai/apps/hasSeenExistingUserPersonalityOnboarding",t.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",t.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",t.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",t.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",t.NewOnboardingConvo="oai/apps/hasSeenNewUserOnboardingConvo",t.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",t.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",t.hasDismissedCanvasOnboarding="oai/apps/hasDismissedCanvasOnboarding",t.HasSeenAdvancedVoiceOnMobile="oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26",t.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",t.UseSidekick="oai/apps/hasDismissedUseSidekick",t.UseSidetron="oai/apps/hasDismissedUseSidetron",t.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",t.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",t.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",t.hasSeenComposerSearchButtonTooltip="oai/apps/hasSeenComposerSearchButtonTooltip",t.hasSeenComposerContextualAnswerTooltip="oai/apps/hasSeenComposerContextualAnswerTooltip",t.hasSeenConnectorsNuxModal="oai/apps/hasSeenConnectorsNuxModal",t.hasSeenGoogleConnectorsNuxModal="oai/apps/hasSeenGoogleConnectorsNuxModal",t.hasSeenContextualAnswerGoogleSyncFinished="oai/apps/hasSeenContextualAnswerGoogleSyncFinished",t.hasSeenConnectorsSourcesPillTooltip="oai/apps/hasSeenConnectorsSourcesPillTooltip",t.hasSeenConnectorsUpgradeFileAccessModal="oai/apps/hasSeenConnectorsUpgradeFileAccessModal",t.hasSeenComposerSystemHintButtonTooltip="oai/apps/hasSeenComposerSystemHintButtonTooltip",t.hasSeenPioneer="oai/apps/hasSeenPioneer",t.hasSeenMaverick="oai/apps/hasSeenMaverick",t.hasSeenMaverickCapi="oai/apps/hasSeenMaverickCapi",t.hasSeenTrailBlazer="oai/apps/hasSeenTrailBlazer",t.hasSeenStratos="oai/apps/hasSeenStratos",t.hasSeenSeeker="oai/apps/hasSeenSeeker",t.hasSeenWayfinder="oai/apps/hasSeenWayfinder",t.hasSeenAdvancedVoiceNuxFullPage="oai/apps/hasSeenAdvancedVoice/2024-09-24",t.hasSeenWindowsAppOnboarding="oai/apps/hasSeenWindowsAppOnboarding",t.DesktopBrowserExtensionAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionAnnouncement",t.DesktopBrowserExtensionReactiveAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement",t.DesktopOperatorAnnouncement="oai/apps/hasSeenDesktopOperatorAnnouncement",t.DesktopClassmatesPromotionAnnouncement="oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement",t.NewOnboardingFlow="oai/apps/hasSeenOnboardingFlow",t.NewStaticOnboardingFlow="oai/apps/hasSeenStaticOnboarding",t.NewPromptOnboardingFlow="oai/apps/hasSeenPromptOnboarding",t.CreateExampleChatsOnboarding="oai/apps/hasCreatedExampleChats",t.hasUsedConversationalOnboardingStarterPrompt="oai/apps/hasUsedNewUserStarterPrompt",t.hasSeenProjectsWebNuxTooltip="oai/apps/hasSeenProjectsWebNuxTooltip",t.hasSeenPotionOnboarding="oai/apps/hasSeenPotionOnboarding",t.hasSeenProjectsUpdateNuxTooltip="oai/apps/hasSeenProjectsUpdateNuxTooltip",t.hasSeenProjectsToFree="oai/apps/hasSeenProjectsToFree",t.hasSeenMemoryInSearch="oai/apps/hasSeenMemoryInSearch",t.hasSeenMoonshineNux="oai/apps/hasSeenMoonshineNux",t.hasSeenMoonshineNuxV2="oai/apps/hasSeenMoonshineNuxV2",t.hasSeenGoldenHourNux="oai/apps/hasSeenGoldenHourNux",t.hasSeenGoldenHourNuxV2="oai/apps/hasSeenGoldenHourNuxV2",t.hasSeenGoldenHourAnnouncement="oai/apps/hasSeenGoldenHourAnnouncement",t.hasSeenInlineFeedbackCustomInstrMessage="oai/apps/hasSeenInlineFeedbackCustomInstrMessage",t.hasSeenCaSystemHint="oai/apps/hasSeenCaSystemHint",t.hasDismissedPromoRedemption="oai/apps/hasDismissedPromoRedemption",t.hasSeenFilePickerNuxTooltip="oai/apps/hasSeenFilePicker",t.hasSeenMultipleGPTEditorsTooltip="oai/apps/hasSeenMultipleGPTEditorsTooltip",t.hasSeenSharedProjectsTooltip="oai/apps/hasSeenSharedProjectsTooltip",t.hasSeenPhoenixNux="oai/apps/hasSeenPhoenixNux",t.hasSeenPhoenixFreeNux="oai/apps/hasSeenPhoenixFreeNux",t.hasSeenAshwingNux="oai/apps/hasSeenAshwingNux",t.hasDismissedReferrerRedemption="oai/apps/hasDismissedReferrerRedemption",t.hasDismissedRefereeRedemption="oai/apps/hasDismissedRefereeRedemption",t.hasSeenReferralUpsellAnnouncement="oai/apps/hasSeenReferralProgramUpsell",t.hasSeenTatertotIntakeForm="oai/apps/hasSeenTatertotIntakeForm",t.hasSeenComposerBigBoxEnterHint="oai/apps/hasSeenComposerBigBoxEnterHint",t.d2dee219="oai/apps/d2dee219",t.hasSeenStudentsUpsellAnnouncement="oai/apps/hasSeenStudentsUpsellAnnouncement",t.hasSeenMemoryUpdatedTooltip="oai/apps/hasSeenMemoryUpdatedTooltip",t.hasSeenTeamSeatsPromoAnnouncement="oai/apps/hasSeenTeamSeatsPromoAnnouncement",t.hasSeenTeamsContextualAnswersUpsell="oai/apps/hasSeenTeamsContextualAnswersUpsell",t.hasSeenO3O4MiniAutomations="oai/apps/hasSeenO3O4MiniAutomations",t.hasSeenn7jupdNux="oai/apps/hasSeenn7jupdNux",t.hasSeenTatertotNux="oai/apps/hasSeenTatertotNux",t.hasSeenTatertotQuizNux="oai/apps/hasSeenTatertotQuizNux",t.hasSeenAudioParagenPrompt="oai/apps/hasSeenAudioParagenPrompt",t.hasSeenOdysseyConnectorsModal="oai/apps/hasSeenOdysseyConnectorsModal",t.hasSeenOdysseyTakeoverModal="oai/apps/hasSeenOdysseyTakeoverModal",t.hasSeenAgentModeAnnouncementBanner="oai/apps/hasSeenAgentModeAnnouncementBanner",t.hasSeenWorkspaceDiscoveryFirstLogin="oai/apps/hasSeenWorkspaceDiscoveryFirstLogin",t.hasSeenFreeTrialUpsellModal="oai/apps/hasSeenPlusOrBusinessFreeTrial",t.hasSeenGoFreeTrialUpsellModal="oai/apps/hasSeenGoTwelveMonthFreeTrial",t.hasSeenPlusFreeTrialHomepageAnnouncementBanner="oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner",t.hasSeenWorkSpacePolicy="oai/apps/hasSeenWorkSpacePolicy",t.hasSeenJoinWorkspaceBanner="oai/apps/hasSeenJoinWorkspaceBanner",t.hasSeenl1239dk1AlphaBanner="oai/apps/hasSeenl1239dk1AlphaBanner",t.hasSeenWhamCombinedSubmitButtonNux="oai/apps/hasSeenWhamCombinedSubmitButtonNux",t.hasSeenFollowupsFirstTurnOnce="oai/apps/hasSeenFollowupsFirstTurnOnce",t.hasSeenWritingInlineEditNux="oai/apps/hasSeenWritingInlineEditNux",t.hasSeenWritingInlineEditCaretNux="oai/apps/hasSeenWritingInlineEditCaretNux",t.hasSeenWritingInlineEditSelectNux="oai/apps/hasSeenWritingInlineEditSelectNux",t.hasSeenl1239dk1LaunchNux="oai/apps/hasSeenl1239dk1LaunchNux",t))(Fe||{});const ZI=sn(()=>Be(!1));function dt(t){"use forget";var y;const e=G.c(21),{data:n,isLoading:s}=wh();let o;e[0]!==(n==null?void 0:n.eligible_announcements)?(o=(y=n==null?void 0:n.eligible_announcements)!=null?y:[],e[0]=n==null?void 0:n.eligible_announcements,e[1]=o):o=e[1];const a=o,i=V();let l;e[2]!==i?(l=ts(i),e[2]=i,e[3]=l):l=e[3];const c=l;let d;e[4]!==c||e[5]!==t?(d=c&&!Ane(t),e[4]=c,e[5]=t,e[6]=d):d=e[6];const u=d,{mutate:f}=Tne();let m;e[7]!==t||e[8]!==f?(m=()=>f({key:t}),e[7]=t,e[8]=f,e[9]=m):m=e[9];const p=m;let g;e[10]!==i?(g=()=>ZI(i),e[10]=i,e[11]=g):g=e[11];const h=ae(g);let x;e[12]!==h||e[13]!==a||e[14]!==u||e[15]!==t?(x=!h&&a.includes(t)&&!u,e[12]=h,e[13]=a,e[14]=u,e[15]=t,e[16]=x):x=e[16];let v;return e[17]!==s||e[18]!==p||e[19]!==x?(v={eligible:x,markAsViewedDontInvalidateCache:p,isLoading:s},e[17]=s,e[18]=p,e[19]=x,e[20]=v):v=e[20],v}async function st(t,e){var o;const n=Jo(t),s=n.getQueryData($u().queryKey);(o=s==null?void 0:s.persistent_announcements)!=null&&o.includes(e)||(n.setQueryData($u().queryKey,a=>a&&U(w({},a),{eligible_announcements:a.eligible_announcements.filter(i=>i!==e)})),await ge.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:e}}}),n.invalidateQueries($u()))}function Tne(){"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:Mne},t[0]=e):e=t[0],zt(e)}function Mne(t){const{key:e}=t;return ge.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:e}}})}function Ane(t){switch(t){case"oai/apps/hasSeenOnboarding":case"oai/apps/hasSeenTeamOwnerOnboarding":case"oai/apps/hasSeenMemoryOnboarding":case"oai/apps/hasSeenTemporaryChatOnboarding":case"oai/apps/hasSeenArchiveConversationOnboarding":case"oai/apps/hasSeenNewUserOnboardingConvo":case"oai/apps/hasSeenDalleEditingOnboarding":case"oai/apps/hasSeenModelSwitcherAutoDowngrade":case"oai/apps/hasDismissedCanvasOnboarding":case"oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26":case"oai/apps/hasSeenAdvancedVoice/2024-09-24":case"oai/apps/hasSeenSidekickLauncherOnboarding":case"oai/apps/hasDismissedUseSidekick":case"oai/apps/hasDismissedUseSidetron":case"oai/apps/hasSeenSncUsageNux":case"oai/apps/hasSeenSncWelcomeNux":case"oai/apps/hasSeenSncSourcesTooltip":case"oai/apps/hasSeenComposerSearchButtonTooltip":case"oai/apps/hasSeenComposerContextualAnswerTooltip":case"oai/apps/hasSeenConnectorsNuxModal":case"oai/apps/hasSeenGoogleConnectorsNuxModal":case"oai/apps/hasSeenContextualAnswerGoogleSyncFinished":case"oai/apps/hasSeenConnectorsSourcesPillTooltip":case"oai/apps/hasSeenConnectorsUpgradeFileAccessModal":case"oai/apps/hasSeenComposerSystemHintButtonTooltip":case"oai/apps/hasSeenPioneer":case"oai/apps/hasSeenExistingUserPersonalityOnboarding":case"oai/apps/hasSeenMaverick":case"oai/apps/hasSeenMaverickCapi":case"oai/apps/hasSeenTrailBlazer":case"oai/apps/hasSeenStratos":case"oai/apps/hasSeenSeeker":case"oai/apps/hasSeenWayfinder":case"oai/apps/hasSeenWindowsAppOnboarding":case"oai/apps/hasSeenDesktopBrowserExtensionAnnouncement":case"oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement":case"oai/apps/hasSeenDesktopOperatorAnnouncement":case"oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement":case"oai/apps/hasSeenOnboardingFlow":case"oai/apps/hasSeenStaticOnboarding":case"oai/apps/hasSeenPromptOnboarding":case"oai/apps/hasCreatedExampleChats":case"oai/apps/hasUsedNewUserStarterPrompt":case"oai/apps/hasSeenProjectsWebNuxTooltip":case"oai/apps/hasSeenProjectsUpdateNuxTooltip":case"oai/apps/hasSeenProjectsToFree":case"oai/apps/hasSeenMemoryInSearch":case"oai/apps/hasSeenMemoryUpdatedTooltip":case"oai/apps/hasSeenMoonshineNux":case"oai/apps/hasSeenMoonshineNuxV2":case"oai/apps/hasSeenGoldenHourNux":case"oai/apps/hasSeenGoldenHourNuxV2":case"oai/apps/hasSeenGoldenHourAnnouncement":case"oai/apps/hasSeenInlineFeedbackCustomInstrMessage":case"oai/apps/hasSeenCaSystemHint":case"oai/apps/hasSeenFilePicker":case"oai/apps/hasSeenMultipleGPTEditorsTooltip":case"oai/apps/hasSeenSharedProjectsTooltip":case"oai/apps/hasSeenComposerBigBoxEnterHint":case"oai/apps/hasSeenPhoenixNux":case"oai/apps/hasSeenPhoenixFreeNux":case"oai/apps/hasSeenAshwingNux":case"oai/apps/hasSeenAudioParagenPrompt":case"oai/apps/hasDismissedPromoRedemption":case"oai/apps/hasDismissedReferrerRedemption":case"oai/apps/hasDismissedRefereeRedemption":case"oai/apps/hasSeenReferralProgramUpsell":case"oai/apps/hasSeenStudentsUpsellAnnouncement":case"oai/apps/hasSeenTeamSeatsPromoAnnouncement":case"oai/apps/hasSeenTeamsContextualAnswersUpsell":case"oai/apps/hasSeenWorkspaceDiscoveryFirstLogin":case"oai/apps/hasSeenWorkSpacePolicy":case"oai/apps/hasSeenJoinWorkspaceBanner":case"oai/apps/hasSeenl1239dk1AlphaBanner":case"oai/apps/hasSeenWhamCombinedSubmitButtonNux":case"oai/apps/hasSeenTatertotIntakeForm":case"oai/apps/hasSeenO3O4MiniAutomations":case"oai/apps/hasSeenOdysseyConnectorsModal":case"oai/apps/hasSeenOdysseyTakeoverModal":case"oai/apps/hasSeenAgentModeAnnouncementBanner":case"oai/apps/hasSeenPlusOrBusinessFreeTrial":case"oai/apps/hasSeenGoTwelveMonthFreeTrial":case"oai/apps/hasSeenFollowupsFirstTurnOnce":case"oai/apps/hasSeenWritingInlineEditNux":case"oai/apps/hasSeenWritingInlineEditCaretNux":case"oai/apps/hasSeenWritingInlineEditSelectNux":case"oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner":case"oai/apps/d2dee219":case"oai/apps/hasSeenPotionOnboarding":case"oai/apps/hasSeenl1239dk1LaunchNux":return!0;case"oai/apps/hasSeenTatertotNux":case"oai/apps/hasSeenTatertotQuizNux":case"oai/apps/hasSeenn7jupdNux":return!1}}const KI=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8.99992 16V6.41407L5.70696 9.70704C5.31643 10.0976 4.68342 10.0976 4.29289 9.70704C3.90237 9.31652 3.90237 8.6835 4.29289 8.29298L9.29289 3.29298L9.36907 3.22462C9.76184 2.90427 10.3408 2.92686 10.707 3.29298L15.707 8.29298L15.7753 8.36915C16.0957 8.76192 16.0731 9.34092 15.707 9.70704C15.3408 10.0732 14.7618 10.0958 14.3691 9.7754L14.2929 9.70704L10.9999 6.41407V16C10.9999 16.5523 10.5522 17 9.99992 17C9.44764 17 8.99992 16.5523 8.99992 16Z"})),Ine=Object.freeze(Object.defineProperty({__proto__:null,default:KI},Symbol.toStringTag,{value:"Module"}));function jne(){const t=_.useRef([]),e=_.useRef((n,s)=>{const o=setTimeout(n,s);return t.current.push(o),o});return _.useEffect(()=>{const n=t.current;return()=>{n.forEach(s=>{clearTimeout(s)})}},[]),e.current}var Ia=(t=>(t[t.ATLAS_NAVLINKS_SOURCE_UNSPECIFIED=0]="ATLAS_NAVLINKS_SOURCE_UNSPECIFIED",t[t.ATLAS_NAVLINKS_SOURCE_CHAT_CAROUSEL=1]="ATLAS_NAVLINKS_SOURCE_CHAT_CAROUSEL",t[t.ATLAS_NAVLINKS_SOURCE_CHAT_LIST=2]="ATLAS_NAVLINKS_SOURCE_CHAT_LIST",t[t.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB=3]="ATLAS_NAVLINKS_SOURCE_SEARCH_TAB",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(Ia||{}),vl=(t=>(t[t.ATLAS_NAVLINKS_ACTION_STEP_UNSPECIFIED=0]="ATLAS_NAVLINKS_ACTION_STEP_UNSPECIFIED",t[t.ATLAS_NAVLINKS_ACTION_STEP_SHOW=1]="ATLAS_NAVLINKS_ACTION_STEP_SHOW",t[t.ATLAS_NAVLINKS_ACTION_STEP_CLICK=2]="ATLAS_NAVLINKS_ACTION_STEP_CLICK",t[t.ATLAS_NAVLINKS_ACTION_STEP_SEE_MORE=3]="ATLAS_NAVLINKS_ACTION_STEP_SEE_MORE",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(vl||{}),xc=(t=>(t[t.ATLAS_SUPER_WIDGET_TAB_UNSPECIFIED=0]="ATLAS_SUPER_WIDGET_TAB_UNSPECIFIED",t[t.ATLAS_SUPER_WIDGET_TAB_HOME=1]="ATLAS_SUPER_WIDGET_TAB_HOME",t[t.ATLAS_SUPER_WIDGET_TAB_SEARCH=2]="ATLAS_SUPER_WIDGET_TAB_SEARCH",t[t.ATLAS_SUPER_WIDGET_TAB_IMAGES=3]="ATLAS_SUPER_WIDGET_TAB_IMAGES",t[t.ATLAS_SUPER_WIDGET_TAB_VIDEOS=4]="ATLAS_SUPER_WIDGET_TAB_VIDEOS",t[t.ATLAS_SUPER_WIDGET_TAB_NEWS=5]="ATLAS_SUPER_WIDGET_TAB_NEWS",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(xc||{}),kx=(t=>(t[t.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_UNSPECIFIED=0]="ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_UNSPECIFIED",t[t.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_SHOW=1]="ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_SHOW",t[t.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_CLICK=2]="ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_CLICK",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(kx||{});const ld={$type:"protobuf_analytics_events.v1.AtlasNavlinksAction"},Nne={$type:"protobuf_analytics_events.v1.AtlasClickSuperWidgetTab"},hC={$type:"protobuf_analytics_events.v1.AtlasGoogleSearchItAction"};function bWe(){const t=Ln(xs());t.redirect!=null&&(window.location.href=t.redirect.destination)}const m1="oai/apps/hasSeenl1239dk1LaunchNux",QI="oai/apps/hasSeenl1239dk1Onboarding",Pne="oai/apps/hasSeenl1239dk1Bon",Rne="oai/apps/hasSeenl1239dk1CreateFirstEnvModal",Lne="oai/apps/hasSeenl1239dk1NewFeatures",One="oai/apps/hasSeenl1239dk1NewFeaturesSlack",Dne="oai/apps/hasSeenl1239dk1AlphaBanner",Fne="oai/apps/hasSeenl1239dk1CodeReviewTab",Bne="oai/apps/hasCompletedWhamCodeReviewOnboardingFlow";function Une(){return dt(m1)}function JI(){return dt(QI)}function CWe(){return dt(Pne)}function SWe(){return dt(Rne)}function wWe(){return dt(Lne)}function kWe(){return dt(One)}function EWe(){return dt(Fne)}function TWe(){return dt(Dne)}function MWe(){return dt(Bne)}var XI=(t=>(t.Personal="chat",t.Workspace="workspace",t.Team="team",t))(XI||{});const AWe=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;var IWe={};const Fc=2147483647,xa=36,ub=1,_f=26,$ne=38,Vne=700,ej=72,tj=128,nj="-",Hne=/^xn--/,Gne=/[^\0-\x7F]/,Wne=/[\x2E\u3002\uFF0E\uFF61]/g,zne={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$_=xa-ub,ya=Math.floor,V_=String.fromCharCode;function Vr(t){throw new RangeError(zne[t])}function qne(t,e){const n=[];let s=t.length;for(;s--;)n[s]=e(t[s]);return n}function sj(t,e){const n=t.split("@");let s="";n.length>1&&(s=n[0]+"@",t=n[1]),t=t.replace(Wne,".");const o=t.split("."),a=qne(o,e).join(".");return s+a}function fb(t){const e=[];let n=0;const s=t.length;for(;n<s;){const o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<s){const a=t.charCodeAt(n++);(a&64512)==56320?e.push(((o&1023)<<10)+(a&1023)+65536):(e.push(o),n--)}else e.push(o)}return e}const oj=t=>String.fromCodePoint(...t),Yne=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:xa},_C=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},aj=function(t,e,n){let s=0;for(t=n?ya(t/Vne):t>>1,t+=ya(t/e);t>$_*_f>>1;s+=xa)t=ya(t/$_);return ya(s+($_+1)*t/(t+$ne))},mb=function(t){const e=[],n=t.length;let s=0,o=tj,a=ej,i=t.lastIndexOf(nj);i<0&&(i=0);for(let l=0;l<i;++l)t.charCodeAt(l)>=128&&Vr("not-basic"),e.push(t.charCodeAt(l));for(let l=i>0?i+1:0;l<n;){const c=s;for(let u=1,f=xa;;f+=xa){l>=n&&Vr("invalid-input");const m=Yne(t.charCodeAt(l++));m>=xa&&Vr("invalid-input"),m>ya((Fc-s)/u)&&Vr("overflow"),s+=m*u;const p=f<=a?ub:f>=a+_f?_f:f-a;if(m<p)break;const g=xa-p;u>ya(Fc/g)&&Vr("overflow"),u*=g}const d=e.length+1;a=aj(s-c,d,c==0),ya(s/d)>Fc-o&&Vr("overflow"),o+=ya(s/d),s%=d,e.splice(s++,0,o)}return String.fromCodePoint(...e)},pb=function(t){const e=[];t=fb(t);const n=t.length;let s=tj,o=0,a=ej;for(const c of t)c<128&&e.push(V_(c));const i=e.length;let l=i;for(i&&e.push(nj);l<n;){let c=Fc;for(const u of t)u>=s&&u<c&&(c=u);const d=l+1;c-s>ya((Fc-o)/d)&&Vr("overflow"),o+=(c-s)*d,s=c;for(const u of t)if(u<s&&++o>Fc&&Vr("overflow"),u===s){let f=o;for(let m=xa;;m+=xa){const p=m<=a?ub:m>=a+_f?_f:m-a;if(f<p)break;const g=f-p,h=xa-p;e.push(V_(_C(p+g%h,0))),f=ya(g/h)}e.push(V_(_C(f,0))),a=aj(o,d,l===i),o=0,++l}++o,++s}return e.join("")},rj=function(t){return sj(t,function(e){return Hne.test(e)?mb(e.slice(4).toLowerCase()):e})},ij=function(t){return sj(t,function(e){return Gne.test(e)?"xn--"+pb(e):e})},Zne={version:"2.3.1",ucs2:{decode:fb,encode:oj},decode:mb,encode:pb,toASCII:ij,toUnicode:rj},Kne=Object.freeze(Object.defineProperty({__proto__:null,decode:mb,default:Zne,encode:pb,toASCII:ij,toUnicode:rj,ucs2decode:fb,ucs2encode:oj},Symbol.toStringTag,{value:"Module"})),jWe=W$(Kne);function Dp({id:t,label:e,checked:n,onChange:s,disabled:o,className:a,labelClassName:i,readOnly:l,containerClassName:c,labelSide:d="right",style:u,indeterminate:f}){const m=e&&r.jsx("label",{className:W("form-check-label text-token-text-primary",i),htmlFor:t,children:e}),p=_.useRef(null);_.useEffect(()=>{p.current&&(p.current.indeterminate=!!f)},[f]);const g=h=>{s==null||s(h)};return r.jsxs("div",{className:W("form-check flex items-center gap-2",c),children:[d==="left"&&m,r.jsx("input",{className:W("bg-token-bg-primary float-start h-4 w-4 appearance-none rounded-xs border border-gray-300 bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-500 checked:bg-blue-500 indeterminate:border-blue-500 indeterminate:bg-blue-500 dark:border-gray-700 dark:checked:border-blue-400 dark:checked:bg-blue-400 dark:indeterminate:border-blue-400 dark:indeterminate:bg-blue-400",o?"cursor-not-allowed":"cursor-pointer",a),type:"checkbox",disabled:o,onChange:g,checked:n,readOnly:l,id:t,"data-testid":t,style:u,ref:p}),d==="right"&&m]})}const Qne=R(()=>P(()=>import("./ddm6kppb0nh2wjan.js"),__vite__mapDeps([29,1])),{loading:t=>O(t)});function xf(t){"use forget";var Et;const e=G.c(128);let n,s,o,a,i,l,c,d,u,f,m,p,g,h,x,v,y,b,C,S,k,E,T,M,A,I,N,L,D,F,$,H,z,K,J,Z,q,se;e[0]!==t?(Et=t,{name:v,placeholder:N,type:q,role:F,list:h,ariaLabel:s,displayName:u,onChange:b,onFocus:k,onBlur:y,value:se,saveOnBlur:$,onClear:C,icon:n,iconPosition:K,onInputIconClick:E,className:l,inputClassName:p,containerInputClassName:c,iconClassName:m,autoComplete:a,autoCapitalize:o,spellCheck:H,autoFocus:i,onPressEnter:A,onPaste:M,disabled:d,maxLength:x,color:J,onKeyDown:T,suppressFocus:Z,ref:D,insideContainerChildren:g,style:z,displayNameLabelClassName:f,readOnly:L,onClick:S}=Et,I=ke(Et,["name","placeholder","type","role","list","ariaLabel","displayName","onChange","onFocus","onBlur","value","saveOnBlur","onClear","icon","iconPosition","onInputIconClick","className","inputClassName","containerInputClassName","iconClassName","autoComplete","autoCapitalize","spellCheck","autoFocus","onPressEnter","onPaste","disabled","maxLength","color","onKeyDown","suppressFocus","ref","insideContainerChildren","style","displayNameLabelClassName","readOnly","onClick"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=d,e[9]=u,e[10]=f,e[11]=m,e[12]=p,e[13]=g,e[14]=h,e[15]=x,e[16]=v,e[17]=y,e[18]=b,e[19]=C,e[20]=S,e[21]=k,e[22]=E,e[23]=T,e[24]=M,e[25]=A,e[26]=I,e[27]=N,e[28]=L,e[29]=D,e[30]=F,e[31]=$,e[32]=H,e[33]=z,e[34]=K,e[35]=J,e[36]=Z,e[37]=q,e[38]=se):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],d=e[8],u=e[9],f=e[10],m=e[11],p=e[12],g=e[13],h=e[14],x=e[15],v=e[16],y=e[17],b=e[18],C=e[19],S=e[20],k=e[21],E=e[22],T=e[23],M=e[24],A=e[25],I=e[26],N=e[27],L=e[28],D=e[29],F=e[30],$=e[31],H=e[32],z=e[33],K=e[34],J=e[35],Z=e[36],q=e[37],se=e[38]);const ie=K===void 0?"right":K,ee=J===void 0?"tertiary":J,le=Z===void 0?!1:Z,[X,te]=_.useState(se);let ce;e[39]!==y||e[40]!==$?(ce=pn=>{y==null||y(pn),$&&te(pn.target.value)},e[39]=y,e[40]=$,e[41]=ce):ce=e[41];const ue=ce;let me;e[42]!==b||e[43]!==$?(me=pn=>{b==null||b(pn),$&&te(pn.target.value)},e[42]=b,e[43]=$,e[44]=me):me=e[44];const xe=me;let pe;e[45]!==X||e[46]!==T||e[47]!==A?(pe=pn=>{T==null||T(pn),!pn.nativeEvent.isComposing&&pn.key==="Enter"&&A&&(pn.preventDefault(),A(X,pn))},e[45]=X,e[46]=T,e[47]=A,e[48]=pe):pe=e[48];const Ee=pe;let Se,Te;e[49]!==se?(Se=()=>{te(se)},Te=[se],e[49]=se,e[50]=Se,e[51]=Te):(Se=e[50],Te=e[51]),_.useEffect(Se,Te);let Ne;e[52]!==$||e[53]!==se?(Ne=$?{}:{value:se},e[52]=$,e[53]=se,e[54]=Ne):Ne=e[54];let De;e[55]!==X||e[56]!==$?(De=$?{value:X}:{},e[55]=X,e[56]=$,e[57]=De):De=e[57];let de;e[58]!==De||e[59]!==Ne?(de=w(w({},Ne),De),e[58]=De,e[59]=Ne,e[60]=de):de=e[60];const oe=de,we=ie==="right",Ce=ie==="left";let fe;e[61]!==m||e[62]!==we||e[63]!==Ce?(fe=W("absolute top-1/2 -translate-y-1/2",{"end-0":we,"start-0":Ce},m),e[61]=m,e[62]=we,e[63]=Ce,e[64]=fe):fe=e[64];const re=fe,ve=ee==="neutral"&&(le?"-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2":"focus-within:bg-token-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2 focus-within:border-green-500 focus-within:ring-1 focus-within:ring-transparent"),Me=ee==="tertiary"&&(le?"border-token-border-medium px-3 py-2":"border-token-border-medium focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1"),$e=ee==="search"&&(le?"border-token-border-medium bg-token-main-surface-primary dark:border-token-border-medium rounded-xl p-4":"border-token-border-medium bg-token-main-surface-primary focus-within:border-token-border-xheavy dark:border-token-border-medium dark:focus-within:border-token-border-xheavy rounded-xl p-4 focus-within:ring-0 dark:focus-within:ring-0"),Le=ee==="quaternary"&&(le?"border-token-main-surface-quaternary text-token-text-quaternary px-3 py-2":"border-token-main-surface-quaternary text-token-text-quaternary focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1");let Ae;e[65]!==l||e[66]!==ve||e[67]!==Me||e[68]!==$e||e[69]!==Le?(Ae=W("rounded-md border shadow-none",ve,Me,$e,Le,l),e[65]=l,e[66]=ve,e[67]=Me,e[68]=$e,e[69]=Le,e[70]=Ae):Ae=e[70];let He;e[71]!==f?(He=W("text-token-text-primary block text-xs font-semibold",f),e[71]=f,e[72]=He):He=e[72];let Qe;e[73]!==u||e[74]!==v||e[75]!==He?(Qe=r.jsx("label",{htmlFor:v,className:He,children:u}),e[73]=u,e[74]=v,e[75]=He,e[76]=Qe):Qe=e[76];const ht=u&&"mt-1";let at;e[77]!==c||e[78]!==ht?(at=W(ht,"relative",c),e[77]=c,e[78]=ht,e[79]=at):at=e[79];const vt=s||void 0,$t=n!=null&&ie==="right"&&"pe-6",Ct=n!=null&&ie==="left"&&"ps-6",Vt=ee==="neutral"||ee==="search"?"bg-transparent":"bg-token-main-surface-primary text-token-text-primary",qt=ee==="quaternary"?"placeholder:text-token-text-quaternary":"placeholder-gray-500";let en;e[80]!==p||e[81]!==$t||e[82]!==Ct||e[83]!==Vt||e[84]!==qt?(en=W("block w-full border-0 p-0 shadow-none outline-hidden focus-within:shadow-none focus-within:ring-0 focus-within:outline-hidden focus:border-none focus:ring-0 sm:text-sm",$t,Ct,Vt,qt,p),e[80]=p,e[81]=$t,e[82]=Ct,e[83]=Vt,e[84]=qt,e[85]=en):en=e[85];let an;e[86]!==oe||e[87]!==o||e[88]!==a||e[89]!==i||e[90]!==d||e[91]!==ue||e[92]!==xe||e[93]!==Ee||e[94]!==h||e[95]!==x||e[96]!==v||e[97]!==S||e[98]!==k||e[99]!==M||e[100]!==I||e[101]!==N||e[102]!==L||e[103]!==D||e[104]!==F||e[105]!==H||e[106]!==z||e[107]!==vt||e[108]!==en||e[109]!==q?(an=r.jsx("input",w(U(w({},I),{style:z,ref:D,type:q,name:v,id:v,list:h,role:F,"aria-label":vt,onPaste:M,className:en,placeholder:N,onBlur:ue,onFocus:k,onChange:xe,onKeyDown:Ee,autoComplete:a,spellCheck:H,autoCapitalize:o,autoFocus:i,disabled:d,maxLength:x,readOnly:L,onClick:S}),oe)),e[86]=oe,e[87]=o,e[88]=a,e[89]=i,e[90]=d,e[91]=ue,e[92]=xe,e[93]=Ee,e[94]=h,e[95]=x,e[96]=v,e[97]=S,e[98]=k,e[99]=M,e[100]=I,e[101]=N,e[102]=L,e[103]=D,e[104]=F,e[105]=H,e[106]=z,e[107]=vt,e[108]=en,e[109]=q,e[110]=an):an=e[110];let Qt;e[111]!==n||e[112]!==re||e[113]!==E?(Qt=n!=null&&(E?r.jsx("button",{className:re,onClick:E,children:r.jsx(n,{className:"icon-sm"})}):r.jsx("div",{className:re,children:r.jsx(n,{className:"icon-sm"})})),e[111]=n,e[112]=re,e[113]=E,e[114]=Qt):Qt=e[114];let _n;e[115]!==X||e[116]!==C?(_n=C&&X&&r.jsx("button",{type:"button",className:"text-token-text-tertiary absolute end-0 top-1/2 -translate-y-1/2",onClick:C,children:r.jsx(Qne,{className:"icon-sm"})}),e[115]=X,e[116]=C,e[117]=_n):_n=e[117];let rn;e[118]!==g||e[119]!==at||e[120]!==an||e[121]!==Qt||e[122]!==_n?(rn=r.jsxs("div",{className:at,children:[an,Qt,_n,g]}),e[118]=g,e[119]=at,e[120]=an,e[121]=Qt,e[122]=_n,e[123]=rn):rn=e[123];let Nt;return e[124]!==Ae||e[125]!==Qe||e[126]!==rn?(Nt=r.jsxs("div",{className:Ae,children:[Qe,rn]}),e[124]=Ae,e[125]=Qe,e[126]=rn,e[127]=Nt):Nt=e[127],Nt}var K9;const NWe=mt.div(K9||(K9=ct(["text-base text-token-text-primary flex flex-col gap-9 my-6"])));var Q9;const Jne=mt.div(Q9||(Q9=ct(["text-base font-semibold"])));var J9;const PWe=mt.div(J9||(J9=ct(["text-base font-semibold"])));var X9;const RWe=mt.div(X9||(X9=ct(["flex flex-col divide-y divide-token-border-default border-y border-token-border-default"])));var eE;const Xne=mt.div(eE||(eE=ct(["flex flex-col w-full m-auto md:m-0"])));var tE;const ese=mt.div(tE||(tE=ct(["text-sm"])));var nE;const LWe=mt.div(nE||(nE=ct(["flex justify-between py-3 gap-4"])));var sE;const OWe=mt.hr(sE||(sE=ct(["max-w-xl border-token-border-default"])));var oE;const DWe=mt.div(oE||(oE=ct(["text-token-text-secondary text-sm mt-6"]))),FWe=({icon:t,title:e,body:n,toggle:s,disabled:o=!1,disabledPill:a,disabledMessage:i,children:l,showDivider:c=!0})=>r.jsx(_t,{label:i,side:"top",disabled:!o||!i,className:"max-w-xl",triggerAs:null,children:r.jsxs("div",{children:[r.jsxs(Xne,{className:W("border-token-border-default mb-3 p-6",o&&"text-token-text-tertiary"),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[t&&r.jsx(t,{className:"icon-sm"}),r.jsxs(Jne,{className:"flex items-center gap-3",children:[e,o&&a&&r.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-2 pb-0.5 text-sm",children:a})]})]}),r.jsx("div",{children:s})]}),r.jsx(ese,{children:n}),l&&r.jsx("div",{className:"mt-4",children:l})]}),c&&r.jsx("div",{className:"border-token-border-default mt-6 border border-t"})]})});function lj(t,e){return rt({queryKey:["workspace/identity",t],queryFn:async()=>{if(t!==void 0)return await ge.safeGet("/accounts/{account_id}/identity",{parameters:{path:{account_id:t}}})},enabled:e})}function BWe(t){const e=Xy(t),n=e?ET(e):null,s=n==null?void 0:n.pwd_auth_time;return s==null?!1:Date.now()-s<1800*1e3}function tse(t){return rt({queryKey:["sso/workos/connections",t],queryFn:()=>{if(t!==void 0)return ge.safeGet("/accounts/{account_id}/sso/workos/connections/list",{authOption:nn.SendIfAvailable,parameters:{path:{account_id:t}}})},enabled:t!=null,retry:(e,n)=>n instanceof $n&&(n.status===401||n.code==="reauth_required")?!1:e<3})}function UWe(){const t=qo(wa.businessWorkspaceId),e=V(),n=ye(e,"4105779609"),o=qo(wa.isTeamPlan)?n:!0,{data:a,isFetching:i,isPending:l}=tse(o&&t!=null?t:void 0),c=a instanceof $n?a:void 0;return{connection:c||a==null?void 0:a[0],error:c,enabled:o,isLoading:i||l}}function $We(t){const e=jt();return zt({mutationFn:()=>ge.safePost("/accounts/{account_id}/sso/connections/workos",{requestBody:{enabled_client_names:["chat"]},authOption:nn.SendIfAvailable,parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function VWe(){const t=qo(wa.businessWorkspaceId),{data:e}=lj(t!=null?t:void 0,t!=null);return e==null?void 0:e.allow_external_domain_invites}function HWe(){const t=qo(wa.businessWorkspaceId),{data:e}=lj(t!=null?t:void 0,t!=null);return _.useMemo(()=>(e==null?void 0:e.domains)&&(e==null?void 0:e.domains.filter(n=>n.status==="verified")),[e==null?void 0:e.domains])}function GWe(t){const e=ne(),n=Ut(),s=jt();return zt({mutationFn:({shouldAutoProvision:o})=>ge.safePost("/accounts/{account_id}/settings/auto_provision",{parameters:{path:{account_id:t}},requestBody:{value:o}}).then(a=>{const i=o?dr.autoProvisionEnabledToast:dr.autoProvisionDisabledToast;return n.success(e.formatMessage(i),{duration:3}),a}).catch(a=>{throw n.danger(a.message,{toastId:"useShouldAutoProvisionMutation",loggingTitle:a.message,loggingDescription:"Auto provisioning toggle failed"}),a}),onSuccess:()=>{s.invalidateQueries({queryKey:["workspace/identity",t]})}})}function WWe(t){const e=ne(),n=Ut(),s=jt();return zt({mutationFn:async({shouldAllowExternalDomainInvites:o})=>{try{const a=await ge.safePost("/accounts/{account_id}/settings/allow_external_domain_invites",{parameters:{path:{account_id:t}},requestBody:{value:o}}),i=o?dr.allowExternalDomainInvitesToast:dr.disableExternalDomainInvitesToast;return n.success(e.formatMessage(i),{duration:3}),a}catch(a){throw n.danger(a.message,{toastId:"useShouldDisableExternalDomainInvitesMutation",loggingTitle:a.message,loggingDescription:"External domain invites toggle failed"}),a}},onSuccess:()=>{s.invalidateQueries({queryKey:["workspace/identity",t]})}})}function zWe(t){const e=jt(),n=Ut();return zt({mutationFn:({hostname:s})=>ge.safePost("/accounts/{account_id}/domains",{parameters:{path:{account_id:t}},requestBody:{hostname:s}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace/identity",t]}),e.invalidateQueries({queryKey:["builderProfile"]})},onError:s=>{n.danger(s.message,{toastId:"useAddDomainMutation",loggingTitle:s.message,loggingDescription:"Domain add failed"})}})}function nse(t){const e=jt();return zt({mutationFn:({domainId:n})=>ge.safeDelete("/accounts/{account_id}/domains/{domain_id}",{parameters:{path:{account_id:t,domain_id:n}}}),onSuccess:()=>{e.refetchQueries({queryKey:["workspace/identity",t]}),e.refetchQueries({queryKey:["builderProfile"]})}})}function qWe(t,e){var i;const n=jt(),s=Ut(),o=ne(),a=(i=e==null?void 0:e.suppressSuccessToast)!=null?i:!1;return zt({mutationFn:({value:l,public_display_name:c,use_workspace_name_for_discovery:d})=>ge.safePost("/accounts/{account_id}/settings/workspace_discoverable",{parameters:{path:{account_id:t}},requestBody:{value:l,public_display_name:c,use_workspace_name_for_discovery:d}}),onSuccess:(l,c)=>{if(n.invalidateQueries({queryKey:["workspace-settings",t]}),n.invalidateQueries({queryKey:["discoverable-workspaces"]}),!a){let d;c.action==="name"?d=dr.discoveryDisplayNameUpdatedToast:d=c.value?dr.discoveryEnabledToast:dr.discoveryDisabledToast,s.success(o.formatMessage(d),{duration:3})}},onError:l=>{var c;s.danger((c=l.message)!=null?c:"Failed to update discovery settings",{toastId:"workspace_discoverability",loggingTitle:l.message,loggingDescription:"Workspace discoverability update failed"})}})}function YWe(t){const e=jt(),n=Ut(),s=ne();return zt({mutationFn:({autoAcceptRequests:o})=>ge.safePost("/accounts/{account_id}/settings/auto_accept_requests",{parameters:{path:{account_id:t}},requestBody:{value:o}}),onSuccess:(o,a)=>{e.invalidateQueries({queryKey:["workspace-settings",t]});const i=a.autoAcceptRequests?dr.manualApprovalDisabledToast:dr.manualApprovalEnabledToast;n.success(s.formatMessage(i),{duration:3})},onError:o=>{var a;n.danger((a=o.message)!=null?a:"Failed to update approval setting",{toastId:"workspace_manual_approval",loggingTitle:o.message,loggingDescription:"Workspace manual approval update failed"})}})}function ZWe(t){const e=jt();return zt({mutationFn:({enforcementStatus:n})=>ge.safePost("/accounts/{account_id}/sso/workos/connections/workos_enforcement",{parameters:{path:{account_id:t}},requestBody:{enforcement_status:n}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function KWe(t){const e=jt();return zt({mutationFn:()=>ge.safePost("/accounts/{account_id}/sso/workos/connections/toggle_enabled",{parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}var aE;mt.div(aE||(aE=ct(["text-md mb-4 text-token-text-secondary"])));const QWe={[m_.VERIFIED]:Ge({id:"i7FkyS",defaultMessage:"Verified"}),[m_.PENDING]:Ge({id:"THBv/l",defaultMessage:"Pending"}),[m_.EXPIRED]:Ge({id:"+sjWGK",defaultMessage:"Expired"})},dr=be({autoProvisionEnabledToast:{id:"workspaceIdentity.autoProvisionEnabledToast",defaultMessage:"Auto provisioning enabled for this workspace"},autoProvisionDisabledToast:{id:"workspaceIdentity.autoProvisionDisabledToast",defaultMessage:"Auto provisioning disabled for this workspace"},allowExternalDomainInvitesToast:{id:"j0jI/4",defaultMessage:"External domain invites are allowed for this workspace"},disableExternalDomainInvitesToast:{id:"67yB97",defaultMessage:"External domain invites are disabled for this workspace"},discoveryEnabledToast:{id:"workspaceIdentity.discoveryEnabledToast",defaultMessage:"Workspace is now discoverable"},discoveryDisabledToast:{id:"workspaceIdentity.discoveryDisabledToast",defaultMessage:"Workspace is no longer discoverable"},discoveryDisplayNameUpdatedToast:{id:"workspaceIdentity.discoveryDisplayNameUpdatedToast",defaultMessage:"Workspace display name updated"},manualApprovalEnabledToast:{id:"workspaceIdentity.manualApprovalEnabledToast",defaultMessage:"Join requests now require manual approval"},manualApprovalDisabledToast:{id:"workspaceIdentity.manualApprovalDisabledToast",defaultMessage:"Join requests will be auto-accepted"}});function JWe(t){return t===ox.ADMIN||t===ox.OWNER}function XWe(t){return t===ox.OWNER}function eze(t,e){switch(e){case ua.BROWSER:return"Web browsing";case ua.PYTHON:return"Code interpreter & Data Analysis";case ua.JIT_PLUGIN:return"Custom actions";case ua.RETRIEVAL:return"File retrieval";case ua.DALLE:return"DALLE image generation";case ua.IMAGE_GEN:return"4o image generation";case ua.CANVAS:return"Canvas";case Xi.Private:return"Builder only";case Xi.Workspace:return t.data.name;case Xi.Link:return"Anyone with link";case Xi.Marketplace:return"Public";default:return null}}const sse=R(()=>P(()=>import("./nz44s7ebe5b6pll5.js"),__vite__mapDeps([30,1])),{loading:t=>O(t)});function tze(){const{data:t}=Al(),e=V(),n=t==null?void 0:t.accountItems.find(l=>l.ssoConnectionName),s=t==null?void 0:t.accountItems.find(l=>!l.ssoConnectionName),o=!!n,a=!o&&!!s,i=()=>{const l=n!=null&&n.ssoConnectionName&&o?{connection:n.ssoConnectionName}:void 0;Zt(e,{fallbackScreenHint:"login",additionalAuthParams:l})};return r.jsx(Mt,{testId:"modal-invalid-accounts",isOpen:!0,onClose:rs,type:"warning",size:"custom",className:"max-w-3xl",title:r.jsx("div",{className:"flex flex-col",children:r.jsx("div",{className:"text-lg",children:r.jsx(j,w({},Di.title))})}),icon:sse,primaryButton:r.jsx(Ns.Button,{onClick:()=>{B.logLogOutButtonClicked({location:"invalid_account_modal"},HV.ACCESS_LOGOUT_ACTION_LOCATION_INVALID_ACCOUNT_MODAL),GV()},color:"primary",children:r.jsx(j,w({},Di.logOut))}),secondaryButton:o||a?r.jsx(Ns.Button,{onClick:i,color:"primary",children:r.jsx(j,w({},o?Di.ssoButton:Di.noSSOButton))}):null,children:r.jsx("div",{className:"flex flex-col space-y-4",children:r.jsxs("div",{children:[r.jsx("p",{children:r.jsx(j,w({},Di.description))}),r.jsx("br",{}),o&&r.jsx("p",{children:r.jsx(j,w({},Di.ssoSuggestion))}),a&&r.jsx("p",{children:r.jsx(j,w({},Di.noSSOSuggestion))})]})})})}const Di=be({title:{id:"sMC0Cy",defaultMessage:"No Accessible Workspaces"},description:{id:"ADpJJ4",defaultMessage:"It looks like you're currently unable to access any of your accounts. Try waiting a minute and logging in again."},logOut:{id:"KlMYRb",defaultMessage:"Log out"},ssoSuggestion:{id:"KCNTGv",defaultMessage:"Logging in with SSO may fix these issues."},noSSOSuggestion:{id:"mp/4+s",defaultMessage:"Logging in without SSO may fix these issues."},ssoButton:{id:"Nsa12I",defaultMessage:"Log in with SSO"},noSSOButton:{id:"60pUg9",defaultMessage:"Log in"}}),nze=(t,e=10080*60*1e3)=>{if(!t)return{isFresh:!1,hasWorkspacesToJoin:null};try{const n=JSON.parse(t),s=Number(n.set_at);if(Number.isNaN(s))return{isFresh:!1,hasWorkspacesToJoin:null};const o=Date.now()-s<e,a=n.hasWorkspacesToJoin===!0||n.hasWorkspacesToJoin==="true";return{isFresh:o,hasWorkspacesToJoin:o?a:null}}catch(n){return{isFresh:!1,hasWorkspacesToJoin:null}}};function sze(t,e){"use forget";var m;const n=G.c(9),s=t===void 0?!0:t,o=e===void 0?!1:e;let a;n[0]!==o?(a=["discoverable-workspaces",o],n[0]=o,n[1]=a):a=n[1];const i=s;let l;n[2]!==a||n[3]!==i?(l={queryKey:a,enabled:i,refetchOnMount:"always",queryFn:ase},n[2]=a,n[3]=i,n[4]=l):l=n[4];const c=rt(l);let d;n[5]!==c.data?(d=()=>{var p;if((p=c.data)!=null&&p.workspaces){const g=c.data.workspaces.some(ose),h=JSON.stringify({set_at:Date.now(),hasWorkspacesToJoin:g});gt.setItem(Ue.WorkspaceDiscoveryInfo,h)}},n[5]=c.data,n[6]=d):d=n[6];const u=(m=c.data)==null?void 0:m.workspaces;let f;return n[7]!==u?(f=[u],n[7]=u,n[8]=f):f=n[8],_.useEffect(d,f),c}function ose(t){return!t.requested}async function ase(){return await ge.safeGet("/accounts/discoverable-workspaces",{parameters:{query:{use_k12_lookup:!0}}})}const rse=Fe.hasSeenWorkspaceDiscoveryFirstLogin,oze=()=>{const{eligible:t,markAsViewedDontInvalidateCache:e,isLoading:n}=dt(rse);return{setHasSeenWorkspaceDiscoveryFirstLoginDontInvalidateCache:e,hasSeenWorkspaceDiscoveryFirstLoginDate:n?null:!t}},Jf="default",pl=new Map,p1=new Set([Jf]),ise="sidebar",lse="composer";let Ex=0,Tx=0,kg=0,Wu=null;typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(Wu=new PerformanceObserver(t=>{t.getEntries().forEach(e=>{if(e.entryType==="longtask"&&(Ex+=e.duration),e.entryType==="layout-shift"){if(e.hadRecentInput)return;Tx+=1,performance.timeOrigin&&(kg=Math.max(performance.timeOrigin+e.startTime,kg))}})}),Wu.observe({entryTypes:["longtask","layout-shift"]}));const cse=(t,e=Jf)=>{if(cd)return;pl.has(e)||pl.set(e,new Map);const n=pl.get(e);n.has(t)||(g1(),n.set(t,{start:Date.now()}))},dse=(t,e=Jf,n)=>{var o;if(cd)return;const s=(o=pl.get(e))==null?void 0:o.get(t);if(s&&s.end===void 0){s.end=Date.now();const a=p1.has(e)?"visible":"hidden";Re.addTiming("render.".concat(t,".").concat(a),{time:s.end,serialTimingGroup:n}),g1()}},use=(t,e=Jf)=>{if(cd)return;const n=pl.get(e);!n||!n.get(t)||(n.delete(t),g1())};let cd=!1;const xC=()=>{if(!cd){cd=!0;for(const[t,e]of pl.entries()){const n=p1.has(t)?"visible":"hidden";for(const[s,o]of e.entries())o.end||Re.addFirstTiming("render.".concat(s,".").concat(n,".timeout"))}}},fse=3e4;let H_;const g1=()=>{H_&&clearTimeout(H_),H_=setTimeout(mse,1e3)},mse=()=>{if(cd)return;let t=0,e;for(const[o,a]of pl.entries())if(p1.has(o)){if(![...a.values()].every(i=>i.end)){if(performance.now()<fse){g1();return}Re.addFirstTiming("render.StablePage.timeout"),xC();return}for(const[i,l]of a.entries())l.end!==void 0&&l.end>t&&(t=l.end,e=i)}Re.addFirstTiming("render.StablePage.complete",{time:t});const n=t-performance.timeOrigin,s=WV(n);Ye.logEvent("chatgpt_web_stable_page_complete_time",void 0,{raw_duration_ms:String(n),trimmed_duration_ms:String(s)}),e!==void 0&&Re.addAction("render.stablePage.lastComponent",{componentName:e}),Ex>0&&Re.addFirstDurationVital("render.StablePage.longTaskDuration",Date.now(),Ex),Tx>0&&Re.addFirstDurationVital("render.StablePage.layoutShifts",Date.now(),Tx),kg>0&&Re.addFirstTiming("render.StablePage.lastLayoutShift",{time:kg}),Wu==null||Wu.disconnect(),xC(),typeof window<"u"&&window.dispatchEvent(new Event("allComponentsRendered"))},pse=t=>{p1.add(t)},va={markStart:cse,markRendered:dse,cancelRender:use,trackNamespace:pse,NS_DEFAULT:Jf,NS_COMPOSER:lse,NS_SIDEBAR:ise},us=be({joinAndLaunchTitle:{id:"workspaceSwitcherFullscreen.joinAndLaunchTitle",defaultMessage:"Join and launch your workspaces"},launchWorkspaceTitle:{id:"workspaceSwitcherFullscreen.launchWorkspaceTitle",defaultMessage:"Launch a workspace"},joinWorkspacesTitle:{id:"workspaceSwitcherFullscreen.joinWorkspacesTitle",defaultMessage:"Join workspaces"},collaborationSubtitle:{id:"workspaceSwitcherFullscreen.collaborationSubtitle",defaultMessage:"Securely collaborate with coworkers using{lineBreak}tools like projects and custom GPTs"},title:{id:"workspaceSwitcherFullscreen.title",defaultMessage:"Select a workspace"},noTopSectionTitle:{id:"workspaceSwitcherFullscreen.noTopSectionTitle",defaultMessage:"Join your teams workspace"},close:{id:"workspaceSwitcherFullscreen.close",defaultMessage:"Close"},emailCanJoinWorkspaces:{id:"workspaceSwitcherFullscreen.emailCanJoinWorkspaces",defaultMessage:"{email} can join {count, plural, one {# workspace} other {# workspaces}}."},accessAndRequestLine:{id:"workspaceSwitcherFullscreen.accessAndRequestLine",defaultMessage:"{email} has access to {accessCount, plural, one {# workspace} other {# workspaces}} and can join {requestCount, plural, one {# workspace} other {# workspaces}}."},memberCount:{id:"workspaceSwitcherFullscreen.memberCount",defaultMessage:"{count, plural, one {# member} other {# members}}"},accessOnlyLine:{id:"workspaceSwitcherFullscreen.accessOnlyLine",defaultMessage:"{email} has access to {accessCount, plural, one {# workspace} other {# workspaces}}."},request:{id:"workspaceSwitcherFullscreen.request",defaultMessage:"Request"},requested:{id:"workspaceSwitcherFullscreen.requested",defaultMessage:"Requested"},open:{id:"workspaceSwitcherFullscreen.open",defaultMessage:"Open"},personalWorkspace:{id:"workspaceSwitcherFullscreen.personalWorkspace",defaultMessage:"Personal workspace"},createNewWorkspacePrefix:{id:"workspaceSwitcherFullscreen.createNewWorkspacePrefix",defaultMessage:"Want something new?"},createNewWorkspaceLink:{id:"workspaceSwitcherFullscreen.createNewWorkspaceLink",defaultMessage:"Create a new workspace"},hiddenWorkspacesFooter:{id:"workspaceSwitcherFullscreen.hiddenWorkspacesFooter",defaultMessage:"Some workspaces are hidden, contact your admin for more info."},noWorkspacesToJoin:{id:"workspaceSwitcherFullscreen.noWorkspacesToJoin",defaultMessage:"No workspaces to join"},done:{id:"workspaceSwitcherFullscreen.done",defaultMessage:"Done"},requestAccessError:{id:"workspaceSwitcherFullscreen.requestAccessError",defaultMessage:"Something went wrong requesting access. Please try again."}});function cj({children:t}){return r.jsx("div",{className:"border-token-main-surface-tertiary text-token-text-secondary mb-2 flex max-w-[500px] flex-col gap-4 rounded-2xl border border-solid p-[22px] pt-[18px] shadow-sm",children:t})}function nr({className:t}){return r.jsx("div",{className:W("loading-results-shimmer rounded-md",t),children:""})}function G_({className:t}){return r.jsxs("div",{className:W("flex w-full flex-col gap-1",t),children:[r.jsx(nr,{className:"h-[26px] w-[105px]"}),r.jsx(nr,{className:"h-[42px] w-full"})]})}function gse(){return r.jsxs(cj,{children:[r.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[r.jsx(G_,{className:"col-span-1"}),r.jsx(G_,{className:"col-span-1"}),r.jsx(G_,{className:"col-span-1 sm:col-span-2"})]}),r.jsxs("div",{className:"flex w-full justify-between",children:[r.jsx(_e,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Sen69P",defaultMessage:"Add a detail"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(_e,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Uqo7UD",defaultMessage:"Reset"})}),r.jsx(_e,{disabled:!0,children:r.jsx(j,{id:"FVou++",defaultMessage:"Start"})})]})]})]})}function aze({existingCount:t,discoverableCount:e,accountEmail:n,showCollaborationSubtitle:s}){const o=t>0,a=e>0,i=_.useMemo(()=>o&&a?us.joinAndLaunchTitle:o?us.launchWorkspaceTitle:a?us.joinWorkspacesTitle:us.noTopSectionTitle,[o,a]),l=o||a,c=s?"mt-2":"mt-3";return r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:r.jsx(j,w({},i))}),s&&r.jsx("p",{className:"text-token-text-secondary mt-3 text-base leading-6",children:r.jsx(j,U(w({},us.collaborationSubtitle),{values:{lineBreak:r.jsx("br",{})}}))}),l&&r.jsx("div",{className:"text-token-text-secondary ".concat(c," text-sm"),children:o?a?r.jsx(j,U(w({},us.accessAndRequestLine),{values:{email:n,accessCount:t,requestCount:e}})):r.jsx(j,U(w({},us.accessOnlyLine),{values:{email:n,accessCount:t}})):r.jsx(j,U(w({},us.emailCanJoinWorkspaces),{values:{email:n,count:e}}))})]})}function rze({showCollaborationSubtitle:t}){return r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:r.jsx(j,w({},us.noTopSectionTitle))}),t&&r.jsx("p",{className:"text-token-text-secondary mt-3 text-base leading-6",children:r.jsx(j,U(w({},us.collaborationSubtitle),{values:{lineBreak:r.jsx("br",{})}}))}),r.jsx("div",{className:"text-token-text-secondary ".concat(t?"mt-2":"mt-3"," text-sm"),children:r.jsx(nr,{className:"mx-auto h-4 w-64"})})]})}const hse=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yu),__vite__mapDeps([10,1,11])),{loading:t=>O(t)});function ize({workspace:t,isLoading:e,onRequestAccess:n,onHoverRequest:s}){var l,c;const o=ne(),a=_.useRef(!1),i=()=>{a.current||(a.current=!0,s(t))};return r.jsxs("div",{className:"flex w-full cursor-default items-center gap-3 border-t p-5 first:border-t-0",role:"listitem","data-testid":"discoverable-workspace-row","data-row-type":"discoverable","data-workspace-id":t.id,children:[r.jsx(ax,{src:(l=t.profile_picture_url)!=null?l:void 0,size:"large"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"text-token-text-primary truncate font-medium",title:(c=t.name)!=null?c:void 0,children:t.name}),r.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:r.jsx(j,U(w({},us.memberCount),{values:{count:t.member_count}}))})]}),r.jsx("div",{className:"shrink-0",children:t.requested?r.jsx(_e,{color:"primary",icon:hse,label:o.formatMessage(us.requested),onClick:d=>{d.preventDefault(),d.stopPropagation()},children:o.formatMessage(us.requested)}):r.jsx(_e,{color:"secondary",onClick:d=>{d.preventDefault(),d.stopPropagation(),n(t)},onMouseEnter:i,onFocus:i,visuallyDisabled:e,disabled:e,children:r.jsx(j,w({},us.request))})})]})}const _se=25;function xse(t,e=0,n="",s=_se,o=void 0,a=void 0){const i=_.useMemo(()=>a?[...a].sort().join(","):void 0,[a]);return rt({queryKey:["workspace",t,e,n,s,i],queryFn:async()=>await ge.safeGet("/accounts/{account_id}/users",{parameters:{path:{account_id:t},query:{offset:e,limit:s,query:n,role:i}}}),placeholderData:o,enabled:!!t})}function lze(){return r.jsxs("div",{className:"flex w-full cursor-default items-center gap-3 border-t p-5 first:border-t-0",role:"listitem","aria-busy":"true",children:[r.jsx("div",{className:"h-12 w-12 shrink-0 overflow-hidden rounded-full",children:r.jsx(nr,{className:"h-full w-full rounded-none"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"mb-1",children:r.jsx(nr,{className:"h-5 w-48"})}),r.jsx(nr,{className:"h-4 w-28"})]}),r.jsx("div",{className:"shrink-0",children:r.jsx(nr,{className:"h-8 w-24 rounded-md"})})]})}const dj=["AD","AE","AF","AG","AL","AM","AO","AR","AT","AU","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BN","BO","BR","BS","BT","BW","BZ","CA","CD","CF","CG","CH","CI","CL","CM","CO","CR","CV","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","FI","FJ","FM","FR","GA","GB","GD","GE","GF","GH","GM","GN","GP","GQ","GR","GT","GW","GY","HN","HR","HT","HU","ID","IE","IL","IN","IQ","IS","IT","JM","JO","JP","KE","KG","KH","KI","KM","KN","KR","KW","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MQ","MR","MT","MU","MV","MW","MX","MY","MZ","NA","NE","NG","NI","NL","NO","NP","NR","NZ","OM","PA","PE","PG","PH","PK","PL","PR","PS","PT","PW","PY","QA","RE","RO","RS","RW","SA","SB","SC","SD","SE","SG","SH","SI","SK","SL","SM","SN","SO","SR","SS","ST","SV","SZ","TD","TF","TG","TH","TJ","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","US","UY","UZ","VA","VC","VN","VU","WS","XK","YE","YT","ZA","ZM","ZW"],yse=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GF","GP","GR","HU","IS","IE","IT","LV","LI","LT","LU","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SK","SI","ES","SE","YT"]),vse=new Set(["GF","GP","MF","MQ","RE","YT"]),Mx="US",bse="IN",Cse={AL:"Albania",DZ:"Algeria",AF:"Afghanistan",AD:"Andorra",AO:"Angola",AG:"Antigua & Barbuda",AR:"Argentina",AM:"Armenia",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BE:"Belgium",BZ:"Belize",BJ:"Benin",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia & Herzegovina",BW:"Botswana",BR:"Brazil",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",CV:"Cape Verde",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CF:"Central African Republic",TD:"Chad",CL:"Chile",CO:"Colombia",KM:"Comoros",CG:"Congo - Brazzaville",CD:"Congo - Kinshasa",CR:"Costa Rica",CI:"Cte dIvoire",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",SZ:"Eswatini",ET:"Ethiopia",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GR:"Greece",GD:"Grenada",GP:"Guadeloupe",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",VA:"Vatican City",HN:"Honduras",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar (Burma)",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",MK:"North Macedonia",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PR:"Puerto Rico",PT:"Portugal",QA:"Qatar",RE:"Runion",RO:"Romania",RW:"Rwanda",KN:"St. Kitts & Nevis",LC:"St. Lucia",VC:"St. Vincent & Grenadines",SH:"Saint Helena",MF:"Saint Martin",WS:"Samoa",SM:"San Marino",ST:"So Tom & Prncipe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",KR:"South Korea",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SR:"Suriname",SE:"Sweden",CH:"Switzerland",SD:"Sudan",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TO:"Tonga",TT:"Trinidad & Tobago",TN:"Tunisia",TR:"Trkiye",TM:"Turkmenistan",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VN:"Vietnam",XK:"Kosovo",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};function uj(t){return dj.includes(t)}function Sse({country:t,shouldUseDefaultCountryCode:e}){return t==null||!uj(t)?(Re.addError("User country is null or unrecognized - will use ".concat(Mx),{user_country:t}),Mx):t}function wse(t){try{const e=new Intl.DisplayNames([t],{type:"region"});return n=>{var s;return(s=e.of(n))!=null?s:""}}catch(e){return Re.addError("Failed to create country display name formatter, will fallback to en_US locale display name",{cause:e}),n=>{var s;return(s=Cse[n])!=null?s:""}}}function kse(){const t=V(),e=Ln(t);return _.useMemo(()=>wse(e.locale),[e.locale])}function cze(){const t=kse();return _.useMemo(()=>[...dj].sort((n,s)=>{const o=t(n),a=t(s);return o.localeCompare(a)}),[t])}function Ese(t){return yse.has(t)}function dze(t){return t==null?(Re.addError(new Error("nullish_country_for_vat_collection_exclusion_check"),{country:t}),!1):vse.has(t)}const uze="https://help.openai.com/en/collections/3943089-billing",Tse="https://openai.com/chatgpt/enterprise",fze="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",mze="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",pze="https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",gze="https://help.openai.com/en/articles/11989085-chatgpt-go",gb="pricing",Xf="team-pricing",hze="plus-pricing",h1="account-payment-modal-open-from-location",W_="account-payment-modal-view",_1="plus_free_trial",Mse="promo_campaign",z_="gift_modal_plan",q_={CHATGPT_IOS:"chatgpt_mobile_ios",SORA_IOS:"sora_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android"};function _ze(t){return t.hash.split("#")[1]===gb}function Ase(t){return t.hash.split("#")[1]===Xf}function xn(t,e,n=gb,s,o,a){const i=new URL(window.location.href);s&&i.searchParams.set(Mse,s),o?i.searchParams.set(W_,o):i.searchParams.delete(W_),a!=null&&a.giftModalPlan?i.searchParams.set(z_,a.giftModalPlan):i.searchParams.delete(z_),t({hash:n,search:i.search},{state:w({[h1]:e,[W_]:o},a!=null&&a.giftModalPlan?{[z_]:a.giftModalPlan}:{})})}function xze(t){t({hash:""})}function em(t){switch(ze(t,"2788179050").get("plus_upsell_cta_copy","get_plus")){case"upgrade_to_plan":return pt.upgradeToPlus;case"upgrade_your_plan":return pt.upgradeYourPlan;case"upgrade":return pt.upgrade;case"get_plus":default:return pt.getPlus}}function Ise(t){switch(ze(t,"2788179050").get("pro_upsell_cta_copy","get_pro")){case"upgrade_to_plan":return pt.upgradeToPro;case"upgrade_your_plan":return pt.upgradeYourPlan;case"upgrade":return pt.upgrade;case"get_pro":default:return pt.getPro}}function Eg(t){return ye(t,"3600660324")}function jse(t,e,n){var x;const s=ot(),o=V(),a=et(o),{data:i}=Al(),l=(x=a==null?void 0:a.isWorkspaceAccount())!=null?x:!1,c=a==null?void 0:a.isPlus(),d=a==null?void 0:a.isPro(),u=a==null?void 0:a.planType,f=i&&kh(i),m=!l&&!c&&f&&ze(o,"2670443078").get("is_gating_fix_enabled",!1),p=!l&&!m&&!d&&ze(o,"2888142241").get("is_upgrade_in_settings",!1);return{showUpgradePlan:!p&&i&&!zV(i)&&n==="profile-dropdown-menu"&&Ps(o,"2471442003").get("enabled",!1)||p,onUpgradeClick:v=>{Sr(o).logEvent(t,void 0,{current_plan_type:u!=null?u:"unknown"}),B.logEvent(e,{planType:u!=null?u:"unknown"}),xn(s,v)}}}function yze({showHiddenWorkspacesNote:t=!1}){const{showUpgradePlan:e,onUpgradeClick:n}=jse("chatgpt_upgrade_in_workspace_switcher_clicked","Upgrade In Workspace Switcher Clicked","create-workspace-upgrade-cta"),s=!!e;return!(s||t)?null:r.jsxs("div",{className:"text-token-text-secondary mt-6 text-center text-sm",children:[t&&r.jsx("span",{className:"me-1",children:r.jsx(j,w({},us.hiddenWorkspacesFooter))}),s&&r.jsxs(r.Fragment,{children:[r.jsx(j,w({},us.createNewWorkspacePrefix)),"",r.jsx("button",{onClick:()=>n("fullscreen-workspace-switcher"),className:"underline",children:r.jsx(j,w({},us.createNewWorkspaceLink))})]})]})}function vze({source:t,existingCount:e,discoverableCount:n}){const s=cn(),o=s==null?void 0:s.email_domain_type,a=_.useMemo(()=>({source:t,join_flow:"discovery",platform:"web",email_domain_type:o}),[o,t]),i=_.useMemo(()=>({existing_workspace_count:e,joinable_workspace_count:n,has_joinable_workspaces:n>0}),[n,e]),l=_.useCallback((p,g,h={})=>{B.logEventWithStatsig(p,g,U(w(w(w({},a),i),h),{ts:new Date().toISOString()}))},[a,i]),c=_.useCallback((p,g={})=>{l("Account: Workspace Discovery Fullscreen Exit","chatgpt_workspace_discovery_fullscreen_exit",w({exit_action:p},g))},[l]),d=_.useRef(!1),u=_.useCallback(p=>{l("Account: Workspace Discovery Request Hovered","chatgpt_workspace_discovery_request_hovered",{workspace_id:p.id})},[l]),f=_.useCallback(p=>{l("Account: Workspace Discovery Request Clicked","chatgpt_workspace_discovery_request_clicked",{workspace_id:p.id})},[l]),m=_.useCallback(()=>{d.current||(d.current=!0,l("Account: Workspace Discovery Fullscreen Viewed","chatgpt_workspace_discovery_fullscreen_viewed"))},[l]);return{hasLoggedFullscreenView:d.current,logFullscreenViewedOnce:m,logExitEvent:c,logRequestButtonHovered:u,logRequestButtonClicked:f}}var fj="AlertDialog",[Nse]=Ml(fj,[TT]),Tr=TT(),mj=t=>{const o=t,{__scopeAlertDialog:e}=o,n=ke(o,["__scopeAlertDialog"]),s=Tr(e);return r.jsx(Il,U(w(w({},s),n),{modal:!0}))};mj.displayName=fj;var Pse="AlertDialogTrigger",Rse=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=ke(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(u3,U(w(w({},o),s),{ref:e}))});Rse.displayName=Pse;var Lse="AlertDialogPortal",pj=t=>{const o=t,{__scopeAlertDialog:e}=o,n=ke(o,["__scopeAlertDialog"]),s=Tr(e);return r.jsx(jl,w(w({},s),n))};pj.displayName=Lse;var Ose="AlertDialogOverlay",gj=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=ke(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(Rf,U(w(w({},o),s),{ref:e}))});gj.displayName=Ose;var Bc="AlertDialogContent",[Dse,Fse]=Nse(Bc),hj=_.forwardRef((t,e)=>{const d=t,{__scopeAlertDialog:n,children:s}=d,o=ke(d,["__scopeAlertDialog","children"]),a=Tr(n),i=_.useRef(null),l=Dn(e,i),c=_.useRef(null);return r.jsx(qV,{contentName:Bc,titleName:_j,docsSlug:"alert-dialog",children:r.jsx(Dse,{scope:n,cancelRef:c,children:r.jsxs(Sd,U(w(w({role:"alertdialog"},a),o),{ref:l,onOpenAutoFocus:Rt(o.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[r.jsx(YV,{children:s}),r.jsx(Use,{contentRef:i})]}))})})});hj.displayName=Bc;var _j="AlertDialogTitle",xj=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=ke(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(c3,U(w(w({},o),s),{ref:e}))});xj.displayName=_j;var yj="AlertDialogDescription",vj=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=ke(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(d3,U(w(w({},o),s),{ref:e}))});vj.displayName=yj;var Bse="AlertDialogAction",bj=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=ke(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(wd,U(w(w({},o),s),{ref:e}))});bj.displayName=Bse;var Cj="AlertDialogCancel",Sj=_.forwardRef((t,e)=>{const l=t,{__scopeAlertDialog:n}=l,s=ke(l,["__scopeAlertDialog"]),{cancelRef:o}=Fse(Cj,n),a=Tr(n),i=Dn(e,o);return r.jsx(wd,U(w(w({},a),s),{ref:i}))});Sj.displayName=Cj;var Use=({contentRef:t})=>{const e="`".concat(Bc,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(Bc,"` by passing a `").concat(yj,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(Bc,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return _.useEffect(()=>{var s;document.getElementById((s=t.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},$se=mj,Vse=pj,Hse=gj,Gse=hj,Wse=bj,zse=Sj,qse=xj,yC=vj;function wj({title:t,description:e,contentClassName:n,onClose:s,actionButton:o,cancelButton:a,moreInfoLink:i}){return r.jsx($se,{open:!0,onOpenChange:l=>{l||s()},children:r.jsxs(Vse,{children:[r.jsx(Hse,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0"}),r.jsxs(Gse,{className:W("bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",n),onEscapeKeyDown:l=>l.preventDefault(),children:[r.jsx(qse,{className:"border-token-border-default border-b p-4 text-lg font-semibold md:p-6",children:t}),r.jsxs("div",{className:"flex flex-col gap-4 p-4 md:p-6",children:[r.jsx(yC,{className:"text-base",children:e}),r.jsxs("div",{className:"flex justify-end gap-2",children:[i&&r.jsx(yC,{className:"grow",children:i}),a&&r.jsx(zse,{asChild:!0,children:a}),r.jsx(Wse,{asChild:!0,children:o})]})]})]})]})})}var hb="ToastProvider",[_b,Yse,Zse]=f3("Toast"),[kj]=Ml("Toast",[Zse]),[Kse,x1]=kj(hb),Ej=t=>{const{__scopeToast:e,label:n="Notification",duration:s=5e3,swipeDirection:o="right",swipeThreshold:a=50,children:i}=t,[l,c]=_.useState(null),[d,u]=_.useState(0),f=_.useRef(!1),m=_.useRef(!1);return n.trim()||console.error("Invalid prop `label` supplied to `".concat(hb,"`. Expected non-empty `string`.")),r.jsx(_b.Provider,{scope:e,children:r.jsx(Kse,{scope:e,label:n,duration:s,swipeDirection:o,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:_.useCallback(()=>u(p=>p+1),[]),onToastRemove:_.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:i})})};Ej.displayName=hb;var Tj="ToastViewport",Qse=["F8"],Ax="toast.viewportPause",Ix="toast.viewportResume",Mj=_.forwardRef((t,e)=>{const x=t,{__scopeToast:n,hotkey:s=Qse,label:o="Notifications ({hotkey})"}=x,a=ke(x,["__scopeToast","hotkey","label"]),i=x1(Tj,n),l=Yse(n),c=_.useRef(null),d=_.useRef(null),u=_.useRef(null),f=_.useRef(null),m=Dn(e,f,i.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;_.useEffect(()=>{const v=y=>{var C;s.length!==0&&s.every(S=>y[S]||y.code===S)&&((C=f.current)==null||C.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[s]),_.useEffect(()=>{const v=c.current,y=f.current;if(g&&v&&y){const b=()=>{if(!i.isClosePausedRef.current){const E=new CustomEvent(Ax);y.dispatchEvent(E),i.isClosePausedRef.current=!0}},C=()=>{if(i.isClosePausedRef.current){const E=new CustomEvent(Ix);y.dispatchEvent(E),i.isClosePausedRef.current=!1}},S=E=>{!v.contains(E.relatedTarget)&&C()},k=()=>{v.contains(document.activeElement)||C()};return v.addEventListener("focusin",b),v.addEventListener("focusout",S),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",k),window.addEventListener("blur",b),window.addEventListener("focus",C),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",k),window.removeEventListener("blur",b),window.removeEventListener("focus",C)}}},[g,i.isClosePausedRef]);const h=_.useCallback(({tabbingDirection:v})=>{const b=l().map(C=>{const S=C.ref.current,k=[S,...uoe(S)];return v==="forwards"?k:k.reverse()});return(v==="forwards"?b.reverse():b).flat()},[l]);return _.useEffect(()=>{const v=f.current;if(v){const y=b=>{var k,E,T;const C=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!C){const M=document.activeElement,A=b.shiftKey;if(b.target===v&&A){(k=d.current)==null||k.focus();return}const L=h({tabbingDirection:A?"backwards":"forwards"}),D=L.findIndex(F=>F===M);Y_(L.slice(D+1))?b.preventDefault():A?(E=d.current)==null||E.focus():(T=u.current)==null||T.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[l,h]),r.jsxs(ZV,{ref:c,role:"region","aria-label":o.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&r.jsx(jx,{ref:d,onFocusFromOutsideViewport:()=>{const v=h({tabbingDirection:"forwards"});Y_(v)}}),r.jsx(_b.Slot,{scope:n,children:r.jsx(fn.ol,U(w({tabIndex:-1},a),{ref:m}))}),g&&r.jsx(jx,{ref:u,onFocusFromOutsideViewport:()=>{const v=h({tabbingDirection:"backwards"});Y_(v)}})]})});Mj.displayName=Tj;var Aj="ToastFocusProxy",jx=_.forwardRef((t,e)=>{const i=t,{__scopeToast:n,onFocusFromOutsideViewport:s}=i,o=ke(i,["__scopeToast","onFocusFromOutsideViewport"]),a=x1(Aj,n);return r.jsx(m3,U(w({"aria-hidden":!0,tabIndex:0},o),{ref:e,style:{position:"fixed"},onFocus:l=>{var u;const c=l.relatedTarget;!((u=a.viewport)!=null&&u.contains(c))&&s()}}))});jx.displayName=Aj;var y1="Toast",Jse="toast.swipeStart",Xse="toast.swipeMove",eoe="toast.swipeCancel",toe="toast.swipeEnd",Ij=_.forwardRef((t,e)=>{const d=t,{forceMount:n,open:s,defaultOpen:o,onOpenChange:a}=d,i=ke(d,["forceMount","open","defaultOpen","onOpenChange"]),[l=!0,c]=_r({prop:s,defaultProp:o,onChange:a});return r.jsx(bh,{present:n||l,children:r.jsx(ooe,U(w({open:l},i),{ref:e,onClose:()=>c(!1),onPause:tf(t.onPause),onResume:tf(t.onResume),onSwipeStart:Rt(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Rt(t.onSwipeMove,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(f,"px")),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(m,"px"))}),onSwipeCancel:Rt(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Rt(t.onSwipeEnd,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(f,"px")),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(m,"px")),c(!1)})}))})});Ij.displayName=y1;var[noe,soe]=kj(y1,{onClose(){}}),ooe=_.forwardRef((t,e)=>{const D=t,{__scopeToast:n,type:s="foreground",duration:o,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p}=D,g=ke(D,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),h=x1(y1,n),[x,v]=_.useState(null),y=Dn(e,F=>v(F)),b=_.useRef(null),C=_.useRef(null),S=o||h.duration,k=_.useRef(0),E=_.useRef(S),T=_.useRef(0),{onToastAdd:M,onToastRemove:A}=h,I=tf(()=>{var $;(x==null?void 0:x.contains(document.activeElement))&&(($=h.viewport)==null||$.focus()),i()}),N=_.useCallback(F=>{!F||F===1/0||(window.clearTimeout(T.current),k.current=new Date().getTime(),T.current=window.setTimeout(I,F))},[I]);_.useEffect(()=>{const F=h.viewport;if(F){const $=()=>{N(E.current),d==null||d()},H=()=>{const z=new Date().getTime()-k.current;E.current=E.current-z,window.clearTimeout(T.current),c==null||c()};return F.addEventListener(Ax,H),F.addEventListener(Ix,$),()=>{F.removeEventListener(Ax,H),F.removeEventListener(Ix,$)}}},[h.viewport,S,c,d,N]),_.useEffect(()=>{a&&!h.isClosePausedRef.current&&N(S)},[a,S,h.isClosePausedRef,N]),_.useEffect(()=>(M(),()=>A()),[M,A]);const L=_.useMemo(()=>x?Oj(x):null,[x]);return h.viewport?r.jsxs(r.Fragment,{children:[L&&r.jsx(aoe,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),r.jsx(noe,{scope:n,onClose:I,children:or.createPortal(r.jsx(_b.ItemSlot,{scope:n,children:r.jsx(KV,{asChild:!0,onEscapeKeyDown:Rt(l,()=>{h.isFocusedToastEscapeKeyDownRef.current||I(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(fn.li,U(w({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":h.swipeDirection},g),{ref:y,style:w({userSelect:"none",touchAction:"none"},t.style),onKeyDown:Rt(t.onKeyDown,F=>{F.key==="Escape"&&(l==null||l(F.nativeEvent),F.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:Rt(t.onPointerDown,F=>{F.button===0&&(b.current={x:F.clientX,y:F.clientY})}),onPointerMove:Rt(t.onPointerMove,F=>{if(!b.current)return;const $=F.clientX-b.current.x,H=F.clientY-b.current.y,z=!!C.current,K=["left","right"].includes(h.swipeDirection),J=["left","up"].includes(h.swipeDirection)?Math.min:Math.max,Z=K?J(0,$):0,q=K?0:J(0,H),se=F.pointerType==="touch"?10:2,ie={x:Z,y:q},ee={originalEvent:F,delta:ie};z?(C.current=ie,op(Xse,f,ee,{discrete:!1})):vC(ie,h.swipeDirection,se)?(C.current=ie,op(Jse,u,ee,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs($)>se||Math.abs(H)>se)&&(b.current=null)}),onPointerUp:Rt(t.onPointerUp,F=>{const $=C.current,H=F.target;if(H.hasPointerCapture(F.pointerId)&&H.releasePointerCapture(F.pointerId),C.current=null,b.current=null,$){const z=F.currentTarget,K={originalEvent:F,delta:$};vC($,h.swipeDirection,h.swipeThreshold)?op(toe,p,K,{discrete:!0}):op(eoe,m,K,{discrete:!0}),z.addEventListener("click",J=>J.preventDefault(),{once:!0})}})}))})}),h.viewport)})]}):null}),aoe=t=>{const d=t,{__scopeToast:e,children:n}=d,s=ke(d,["__scopeToast","children"]),o=x1(y1,e),[a,i]=_.useState(!1),[l,c]=_.useState(!1);return coe(()=>i(!0)),_.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:r.jsx(l3,{asChild:!0,children:r.jsx(m3,U(w({},s),{children:a&&r.jsxs(r.Fragment,{children:[o.label," ",n]})}))})},roe="ToastTitle",jj=_.forwardRef((t,e)=>{const o=t,{__scopeToast:n}=o,s=ke(o,["__scopeToast"]);return r.jsx(fn.div,U(w({},s),{ref:e}))});jj.displayName=roe;var ioe="ToastDescription",loe=_.forwardRef((t,e)=>{const o=t,{__scopeToast:n}=o,s=ke(o,["__scopeToast"]);return r.jsx(fn.div,U(w({},s),{ref:e}))});loe.displayName=ioe;var Nj="ToastAction",Pj=_.forwardRef((t,e)=>{const o=t,{altText:n}=o,s=ke(o,["altText"]);return n.trim()?r.jsx(Lj,{altText:n,asChild:!0,children:r.jsx(xb,U(w({},s),{ref:e}))}):(console.error("Invalid prop `altText` supplied to `".concat(Nj,"`. Expected non-empty `string`.")),null)});Pj.displayName=Nj;var Rj="ToastClose",xb=_.forwardRef((t,e)=>{const a=t,{__scopeToast:n}=a,s=ke(a,["__scopeToast"]),o=soe(Rj,n);return r.jsx(Lj,{asChild:!0,children:r.jsx(fn.button,U(w({type:"button"},s),{ref:e,onClick:Rt(t.onClick,o.onClose)}))})});xb.displayName=Rj;var Lj=_.forwardRef((t,e)=>{const a=t,{__scopeToast:n,altText:s}=a,o=ke(a,["__scopeToast","altText"]);return r.jsx(fn.div,U(w({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0},o),{ref:e}))});function Oj(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),doe(s)){const o=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!o)if(a){const i=s.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...Oj(s))}}),e}function op(t,e,n,{discrete:s}){const o=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),s?QV(o,a):o.dispatchEvent(a)}var vC=(t,e,n=0)=>{const s=Math.abs(t.x),o=Math.abs(t.y),a=s>o;return e==="left"||e==="right"?a&&s>n:!a&&o>n};function coe(t=()=>{}){const e=tf(t);xr(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[e])}function doe(t){return t.nodeType===t.ELEMENT_NODE}function uoe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Y_(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var foe=Ej,moe=Mj,poe=Ij,Dj=jj,goe=Pj,Fj=xb;function Bj({children:t}){return r.jsxs(foe,{children:[r.jsx(poe,{className:"radix-state-closed:animate-hide radix-state-open:animate-slideIn popover bg-token-main-surface-primary grid grid-cols-[auto_max-content] items-center gap-x-4 rounded-lg p-4 shadow-xs [grid-template-areas:_'title_action'_'description_action'] sm:max-w-2xl",open:!0,children:t}),r.jsx(moe,{className:"fixed end-0 bottom-0 z-50 m-0 flex max-w-[100vw] list-none flex-col gap-4 p-6 outline-hidden"})]})}const yc="compliance",hoe=3600*24*30*6,_oe={serverPrimedAllowBrowserStorageValue:!0,showCookieConsentBanner:!1,isStorageComplianceEnabled:!1,ageVerificationDeadline:null,ageVerificationType:"none"},xoe={IT:"countdown",KR:"passive"};function yoe(t,e){var i,l,c,d,u,f,m,p;const n=AT(e),s=(i=t.registration_country)!=null?i:"",o=s in MT&&((l=t.age_verification)==null?void 0:l.is_required);if(!n&&!o)return _oe;const a=n&&!!t.require_cookie_consent;return{serverPrimedAllowBrowserStorageValue:a?(d=(c=t.cookie_consent)==null?void 0:c.analytics_cookies_accepted)!=null?d:!1:!0,showCookieConsentBanner:a&&!!((u=t.cookie_consent)!=null&&u.is_required),isStorageComplianceEnabled:a,ageVerificationDeadline:o&&(m=(f=t.age_verification)==null?void 0:f.remaining_seconds)!=null?m:null,ageVerificationType:o&&(p=xoe[s])!=null?p:"none"}}const Uj=es({queryKey:[yc],queryFn:async()=>{var e;let t;try{t=await ge.safeGet("/compliance")}catch(n){t={registration_country:null,require_cookie_consent:!1,age_verification:{is_required:!1},cookie_consent:{is_required:!1},terms_of_use:{is_required:!1}}}if((e=t.cookie_consent)!=null&&e.is_required){const n=ps.getBooleanCookie(gs.AllowNonessential),s=t.cookie_consent.analytics_cookies_accepted;if(n===void 0&&s!=null)ps.setBooleanCookie(gs.AllowNonessential,s,{maxAge:hoe,domain:JV});else if(n!==s&&n!=null){const o={analytics_cookies_accepted:n};return ge.safePost("/compliance/cookie_consent",{authOption:nn.SendIfAvailable,requestBody:o}),U(w({},t),{cookie_consent:w(w({},t.cookie_consent),o)})}}return t}});function $j({enabled:t,select:e}){return rt(U(w({},Uj),{enabled:t,select:e}))}function Vj(){const t=V(),{country:e}=kd(t),n=e!=null&&e in MT,s=rt(U(w({},Uj),{enabled:n,select:o=>yoe(o,e)}));return U(w({},s),{isEnabled:n})}function voe(){const t=jt();return zt({mutationFn:e=>ge.safePost("/compliance/cookie_consent",{requestBody:e}),onSuccess:()=>{t.refetchQueries({queryKey:[yc]})},onMutate:async e=>{await t.cancelQueries({queryKey:[yc]});const n=t.getQueryData([yc]);return t.setQueryData([yc],s=>{var a;if(s===void 0)return;const o=!!((a=s.cookie_consent)!=null&&a.is_required);return U(w({},s),{cookie_consent:w({is_required:o},e)})}),{previousValue:n}},onError:(e,n,s)=>{s!==void 0&&t.setQueryData([yc],s.previousValue)}})}function bze({serverPrimedAllowBrowserStorageValue:t,enabled:e}){const{data:n,isLoading:s}=$j({enabled:e,select:o=>{var a;return((a=o.cookie_consent)==null?void 0:a.analytics_cookies_accepted)===!0}});return s||!e?t:n!=null?n:!1}const boe=3600*24;function Cze(t,e=!1){return Xo()==null||e?"loading":!t||ps.getCookie(gs.AgeVerification)||t.ageVerificationDeadline==null||t.ageVerificationType==="none"?"hide":"show"}function Sze({onClose:t}){const{data:{ageVerificationType:e,ageVerificationDeadline:n}={}}=Vj();return e==="passive"?r.jsx(Coe,{onClose:t}):e==="countdown"&&n!=null?r.jsx(Soe,{onClose:t,ageVerificationDeadline:n}):null}const Coe=({onClose:t})=>{const e=V(),{country:n}=kd(e);return _.useEffect(()=>{Re.addAction("privacy_policy.show_age_verification_modal",{country:n})},[n]),r.jsx(wj,{onClose:t,title:"OpenAI      ",description:r.jsx("div",{className:"whitespace-pre-wrap",children:r.jsxs("p",{children:["ChatGPT  .     , OpenAI  OpenAI       . ChatGPT  ,  18 , 14        .",r.jsx("br",{}),r.jsx("br",{}),"OpenAI  "," ",r.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"    ."})]})}),actionButton:r.jsx(_e,{color:"primary",onClick:async()=>{await ge.safePost("/compliance/age_verification"),t()},children:" OpenAI  "}),cancelButton:r.jsx(_e,{as:"link",color:"secondary",to:"/auth/logout",children:""})})},Soe=({onClose:t,ageVerificationDeadline:e})=>{const n=V(),s=e!=null?Math.floor(e/60/60/24):0;_.useEffect(()=>{Ye.logEvent("chatgpt_compliance_age_verification_seen"),B.logEvent("Compliance Age Verification Seen")},[]);const{country:o}=kd(n);return _.useEffect(()=>{Re.addAction("privacy_policy.show_age_verification_countdown",{country:o})},[o]),r.jsxs(Bj,{children:[r.jsx(Dj,{className:"text-sm font-semibold [grid-area:_title]",children:r.jsx(j,U(w({},bC.ageVerificationTitle),{values:{deadline:s,learnMoreLink:a=>r.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:a})}}))}),r.jsx(goe,{altText:"Dismiss notification",asChild:!0,children:r.jsx(_e,{color:"primary",size:"small",onClick:()=>{Ye.logEvent("chatgpt_compliance_age_verification_clicked"),B.logEvent("Compliance Age Verification Clicked"),ps.setCookie(gs.AgeVerification,"true",{maxAge:boe,path:"/"}),t(),On.openModal(nf.AgeVerificationInterstitial)},children:r.jsx(j,w({},bC.startVerification))})}),r.jsx(Fj,{})]})},bC=be({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that youre old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardians permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function tm(){const{hash:t}=Hn(),e=ot();return{openSettings:(n,s)=>{e(Nl(n,s))},closeSettings:()=>{e({hash:""})},isOpen:eH(t),currentTab:XV(t)}}const wze=es({queryKey:["clientApplications"],queryFn:()=>ge.safeGet("/client_applications")});function kze(){const t=Ut();return zt({mutationFn:e=>ge.safeDelete("/client_applications/{client_id}",{parameters:{path:{client_id:e}}}),onSuccess:()=>{window.location.reload()},onError:e=>{Re.addError("Failed to revoke client application",{error:e}),t.danger("Failed to disconnect. Please try again later.",{toastId:"revoke_client_application"})}})}function Eze({onClose:t}){const e=V(),n=ne(),s=Ut(),{openSettings:o}=tm(),a=voe(),{session:i}=vd(e),{data:{isStorageComplianceEnabled:l}={}}=Vj(),{data:c,isLoading:d}=$j({enabled:!!(l&&i),select:u=>{var f;return!((f=u.cookie_consent)!=null&&f.is_required)}});return _.useEffect(()=>{c===!0&&t()},[c,t]),d?null:r.jsx(woe,{onReject:()=>{a.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){s.success(n.formatMessage(kc.updateSuccess))},onError(){s.danger(kc.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},onAccept:()=>{a.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){s.success(n.formatMessage(kc.updateSuccess))},onError(){s.danger(kc.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},children:r.jsx(j,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:u=>r.jsx(Lf,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:u}),manageLink:u=>r.jsx(koe,{onClick:()=>{o(Rn.DataControls)},children:u})}})})}function woe({children:t,onAccept:e,onReject:n}){return _.useEffect(()=>{Re.addAction("privacy_policy.show_cookie_consent_banner")},[]),r.jsxs(Bj,{children:[r.jsxs(Dj,{className:"text-sm font-semibold [grid-area:_title]",children:[t,r.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[r.jsx(_e,{color:"secondary",size:"small",onClick:n,children:r.jsx(j,w({},kc.reject))}),r.jsx(_e,{color:"secondary",size:"small",onClick:e,children:r.jsx(j,w({},kc.accept))})]})]}),r.jsx(Fj,{})]})}var rE;const koe=mt.button(rE||(rE=ct(["underline font-normal text-green-600"]))),kc=be({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),Eoe=sn(t=>St(()=>{var e,n;return(n=(e=p3(t))==null?void 0:e.includes(os.Sunshine))!=null?n:!1}));function Vd(){"use forget";const t=G.c(2),e=V();let n;return t[0]!==e?(n=()=>Eoe(e),t[0]=e,t[1]=n):n=t[1],ae(n)}function Ii(){"use forget";const{data:t}=to(Lt.Sunshine),e=Vd();return!!t&&e}function Hj(t){return ye(t,"507055138")}function Gj(t){const e=Hj(t),n=ye(t,"1946731762");return e&&n}function Toe(){"use forget";const t=G.c(2),e=V();let n;t[0]!==e?(n=Gj(e),t[0]=e,t[1]=n):n=t[1];const s=n,{data:o}=to(Lt.GoldenHour);return!!o&&s}const Moe=sn(t=>St(()=>{var e,n;return(n=(e=p3(t))==null?void 0:e.includes(os.Moonshine))!=null?n:!1}));function v1(){"use forget";const t=G.c(2),e=V();let n;return t[0]!==e?(n=()=>Moe(e),t[0]=e,t[1]=n):n=t[1],ae(n)}function Tze(){"use forget";const t=v1(),{data:e}=to(Lt.Moonshine);return t&&!!e}const Aoe=sn(t=>St(()=>{var e,n;return(n=(e=p3(t))==null?void 0:e.includes(os.MemoryInSearch))!=null?n:!1}));function Ioe(){"use forget";const t=G.c(2),e=V();let n;return t[0]!==e?(n=()=>Aoe(e),t[0]=e,t[1]=n):n=t[1],ae(n)}function Mze(){"use forget";const t=Ii(),{data:e}=to(Lt.MemoryInSearch),n=Ioe();return t&&!!e&&n}function Aze(){"use forget";var a;const t=G.c(2),e=V();let n;t[0]!==e?(n=(a=ye(e,"645560164"))!=null?a:!1,t[0]=e,t[1]=n):n=t[1];const s=n;return Ii()&&s}const Ize=t=>ye(t,"667937038");function joe(t){var e;return(e=ye(t,"1611573287"))!=null?e:!1}function b1(){"use forget";const t=G.c(2),e=V(),n=Ii();let s;return t[0]!==e?(s=joe(e),t[0]=e,t[1]=s):s=t[1],n&&s}const Noe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg",Poe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg";function jze(){const t=V(),e=Gj(t),{eligible:n,isLoading:s}=dt(Fe.hasSeenGoldenHourNuxV2);return jn(hn)||!e?"hide":s?"loading":n?"show":"hide"}function Roe(){const[t,e]=_.useState(!1);return _.useEffect(()=>{const n=setTimeout(()=>e(!0),1e3);return()=>clearTimeout(n)},[]),r.jsx("div",{"aria-hidden":!0,className:"relative box-content h-6 w-10 shrink-0 rounded-full p-[2px] ".concat(t?"bg-blue-400":"bg-gray-200 dark:bg-gray-600"),children:r.jsx(Xe.div,{className:"absolute top-1/2 h-[21px] w-[21px] -translate-y-1/2 rounded-full bg-white shadow",animate:{x:t?17:1.5},transition:{type:"spring",stiffness:350,damping:25}})})}function Nze({onClose:t}){const e=V(),s=ea()?Poe:Noe,[o,a]=_.useState(!1);_.useEffect(()=>{const f=new Image;f.src=s,f.onload=()=>a(!0)},[s]);const[i,l]=_.useState(!1);_.useEffect(()=>{o&&(i||(st(e,Fe.hasSeenGoldenHourNuxV2),l(!0),B.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Shown","chatgpt_golden_hour_nux_modal_shown"),Ie.count(je.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_shown"),B.logUpsellOrModalEvent(un,{eventId:"golden_hour_nux_modal_shown",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})))},[e,i,o]);const c=be({optm:{id:"GoldenHourNux.optm",defaultMessage:"Automatically manage"},title:{id:"GoldenHourNux.title",defaultMessage:'Say goodbye to "Memory full"'},subtitle:{id:"GoldenHourNux.subtitle",defaultMessage:"ChatGPT now manages saved memories automatically  so it wont fill up and stays focused on what matters."},learnMoreButton:{id:"GoldenHourNux.learnMoreButton",defaultMessage:"Learn more"},gotItButton:{id:"GoldenHourNux.gotItButton",defaultMessage:"Got it"}}),d="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47",u=()=>{window.open(d,"_blank","noopener noreferrer"),B.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Learn More Clicked","chatgpt_golden_hour_nux_modal_learn_more_clicked"),Ie.count(je.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_learn_more_clicked")};return o?r.jsxs(Mt,{testId:"modal-golden-hour-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),B.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Closed","chatgpt_golden_hour_nux_modal_closed"),Ie.count(je.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(gn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative flex flex-1 overflow-x-clip",children:[r.jsx("img",{src:s,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex w-full items-center justify-center",children:r.jsx("div",{className:"pointer-events-auto",children:r.jsx("div",{className:"inline-flex w-full rounded-[40px] bg-white/40 p-1 shadow-[0_0_84px_0_rgba(0,105,209,0.5)] backdrop-blur-[2px] dark:bg-black/60",children:r.jsx("div",{className:"bg-token-bg-secondary flex max-w-full items-center justify-end gap-[10px] overflow-hidden rounded-[38px] bg-white py-2.5 ps-4.5 pe-3 dark:bg-[#101010]",children:r.jsxs("div",{className:"flex w-full items-center gap-3",children:[r.jsx("div",{className:"text-token-text-primary flex min-w-0 flex-1 items-center gap-[9px] truncate text-[21px] leading-[30px] tracking-[-0.27px]",children:r.jsx(j,w({},c.optm))}),r.jsx("div",{className:"text-token-text-primary flex shrink-0 items-center gap-[18px]",children:r.jsx(Roe,{})})]})})})})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:r.jsx(j,w({},c.title))}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,w({},c.subtitle))}),r.jsxs("div",{className:"mt-4 flex w-full items-center justify-end gap-3",children:[r.jsx(_e,{color:"secondary",onClick:u,children:r.jsx(j,w({},c.learnMoreButton))}),r.jsx(_e,{color:"primary",onClick:t,children:r.jsx(j,w({},c.gotItButton))})]})]})]}):null}R(()=>P(()=>import("./ler3ik0l0lgxpp03.js"),__vite__mapDeps([31,1,32,10,11])).then(t=>t.ConfirmEnableMfaForGithubModal));function Pze(){return rt({queryKey:["mfa-is-enabled"],queryFn:async()=>(await ge.safeGet("/accounts/mfa_info")).mfa_enabled})}function Loe(t){var a;const{data:e,isLoading:n,isError:s,refetch:o}=rt({queryKey:["mfa-requirement-level-".concat(t)],queryFn:async()=>await ge.safeGet("/aip/connectors/{connector_id}/mfa_requirement",{parameters:{path:{connector_id:t}}})});return n?{status:"loading",retry:()=>{}}:s?{status:"error",retry:o}:{status:(a=e==null?void 0:e.requirement)!=null?a:"not_required",retry:o}}function Ooe({enabled:t=!0}={}){const e=Xo(),n=e==null?void 0:e.includes(tH);return rt({queryKey:["mfaInfo"],queryFn:()=>ge.safeGet("/accounts/mfa_info"),enabled:n&&t})}function Doe({enabled:t=!0}={}){var s,o,a,i,l,c,d;const e=Ooe({enabled:t});let n;return e.isLoading?n="loading":e.isError?n="error":(s=e.data)!=null&&s.mfa_enabled?n="enabled":n="disabled",{status:n,native_default_factor_id:(o=e.data)==null?void 0:o.native_default_factor_id,factors:(a=e.data)==null?void 0:a.factors,show_push_auth:(l=(i=e.data)==null?void 0:i.show_push_auth)!=null?l:!1,show_sms:(d=(c=e.data)==null?void 0:c.show_sms)!=null?d:!1,retry:e.refetch}}const Foe=R(()=>P(()=>import("./gsc4el4a1mly7vaf.js"),__vite__mapDeps([33,1])),{loading:t=>O(t)}),CC=R(()=>P(()=>import("./kfciwy69uk039ng9.js"),__vite__mapDeps([34,1])),{loading:t=>O(t)}),Boe=R(()=>P(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([35,1])),{loading:t=>O(t)}),Uoe="https://persistent.oaistatic.com/chatgpt/connector-promo-light.png",$oe="https://persistent.oaistatic.com/chatgpt/connector-nux-banner-bg-1.png",Voe="https://persistent.oaistatic.com/chatgpt/connector-nux-banner-bg-2.png",Rze=()=>{const t=V(),{isLoading:e,eligible:n}=dt(Fe.hasSeenConnectorsNuxModal),s=jn(hn),o=Cn(),a=!!(o!=null&&o.isAdminOfAccount()||o!=null&&o.isOwnerOfAccount()),{isLoading:i}=IT(),l=Of(),c=ae(()=>g3(t));if(s)return"hide";const d=e||i,u=n&&(l==null?void 0:l.enabled)&&(l==null?void 0:l.can_see_system_hint_announcement)&&(a||c&&c.length>0);return d?"loading":u?"show":"hide"},Lze=({onClose:t})=>{const{canUpgradeGDrive:e,canUpgradeSharepoint:n}=IT();return e||n?r.jsx(Hoe,{canUpgradeGDrive:e,canUpgradeSharepoint:n,onClose:t}):r.jsx(Woe,{onClose:t})},Hoe=({canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:n})=>r.jsx(Goe,{canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:n}),Goe=({canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:n})=>{const s=V(),o=ne(),a=Cn(),i=!!(a!=null&&a.isAdminOfAccount()||a!=null&&a.isOwnerOfAccount()),l=!!(a!=null&&a.isPersonalAccount()),[c,d]=_.useState(!1),[u,f]=_.useState(!1),m=t?$oe:Voe;_.useEffect(()=>{Cc.logEntryPointShown({referrer:pa.ConnectorNuxModal})},[]);const p=()=>{st(s,Fe.hasSeenConnectorsNuxModal),n()},g=t?Wo[bt.GDRIVE_ACTION_CONNECTOR]:Wo[bt.SHAREPOINT_CONNECTOR],h=Cc.createIdMetadataFromId(g,pa.ConnectorNuxModal),{status:x}=Loe(g),{status:v}=Doe({enabled:x==="required"||x==="suggested"}),y=_.useRef(!1),b=_.useMemo(()=>{if(x==="required")return"required";if(x==="suggested")return v==="enabled"?"not_required":v==="disabled"?"suggested":void 0;if(x==="not_required"||x==="error")return"not_required"},[x,v]),{CitationIcon:C,description:S,LoadingIcon:k,loadingText:E,onContinue:T,primaryButtonLabel:M,title:A}=_.useMemo(()=>t?{CitationIcon:Foe,description:o.formatMessage({id:"T7ohyZ",defaultMessage:"Ask ChatGPT anything about your Google Docs, Sheets, Slides, and files."}),LoadingIcon:Boe,loadingText:o.formatMessage({id:"Z5098P",defaultMessage:"Reading Google Drive..."}),primaryButtonLabel:o.formatMessage({id:"GmC5aI",defaultMessage:"Connect Google"}),title:o.formatMessage({id:"3HJBih",defaultMessage:"ChatGPT + Google Drive"}),onContinue:()=>{i&&!l?window.location.href="/admin/ca":window.location.hash="#settings/".concat(Rn.Connectors,"?connector=").concat(Wo[bt.GDRIVE_ACTION_CONNECTOR],"&add-connector-link=true&referrer=").concat(pa.ConnectorNuxModal)}}:{CitationIcon:CC,description:o.formatMessage({id:"Bq7hPi",defaultMessage:"Ask ChatGPT anything about your shared sites and OneDrive files."}),LoadingIcon:CC,loadingText:o.formatMessage({id:"CTgrFA",defaultMessage:"Reading Sharepoint..."}),primaryButtonLabel:o.formatMessage({id:"d89pUX",defaultMessage:"Connect Sharepoint"}),title:o.formatMessage({id:"mliVAI",defaultMessage:"ChatGPT + Sharepoint"}),onContinue:()=>{i&&!l?window.location.href="/admin/ca":window.location.hash="#settings/".concat(Rn.Connectors,"?connector=").concat(Wo[bt.SHAREPOINT_CONNECTOR],"&add-connector-link=true&referrer=").concat(pa.ConnectorNuxModal)}},[t,o,i,l]),I=()=>{Cc.logModalContinue({connector_id_metadata:h,referrer:pa.ConnectorNuxModal,action:"connection",authType:"NONE"}),B.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked",{targetted_connector:t?"gdrive":"sharepoint"}),st(s,Fe.hasSeenConnectorsNuxModal),n(),T()};return _.useEffect(()=>{const N=new Image;N.src=m,N.onload=()=>d(!0)},[m]),_.useEffect(()=>{y.current||b&&(Cc.logModalShown({connector_id_metadata:h,referrer:pa.ConnectorNuxModal,mfaState:b,authType:"NONE"}),y.current=!0)},[b,h]),_.useEffect(()=>{B.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown",{targetted_connector:t?"gdrive":"sharepoint"}),B.logUpsellOrModalEvent(un,{eventId:"connectors_nux_modal_shown",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[t,e,h]),_.useEffect(()=>{if(!c)return;const N=setTimeout(()=>{f(!0)},3e3);return()=>clearTimeout(N)},[c]),r.jsxs(Mt,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:p,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsxs("div",{className:"relative h-[213px]",children:[r.jsx(gn,{onClick:p,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:m,alt:o.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"h-[213px] w-full object-cover object-bottom"}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center",children:r.jsxs("div",{className:"flex w-full flex-col gap-4 px-8",children:[r.jsx(Xe.div,{className:"relative flex w-auto self-end rounded-3xl bg-white px-4 py-2.5 text-lg backdrop-blur-[24px] dark:bg-[rgba(48,48,48,0.8)]",initial:{opacity:0,y:16},animate:c?{opacity:1,y:0}:{opacity:0,y:8},transition:{type:"tween",ease:"easeInOut",stiffness:400,damping:30,delay:.2},layout:"position",children:r.jsx(j,{id:"2VNiPu",defaultMessage:"Where's the next company conference?"})}),r.jsx(Xe.div,{className:"relative flex w-auto self-start rounded-3xl bg-white px-4 py-2.5 text-lg backdrop-blur-[24px] dark:bg-[rgba(48,48,48,0.8)] ".concat(u?"pe-3":""),initial:{opacity:0,y:16},animate:c?{opacity:1,y:0}:{opacity:0,y:8},transition:{type:"tween",ease:"easeInOut",stiffness:400,damping:30,delay:.5},layout:"position",children:r.jsx(mn,{mode:"wait",initial:!1,children:u?r.jsxs(Xe.div,{className:"flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,width:"100%"},transition:{opacity:{duration:.2}},style:{width:"100%"},layout:!0,children:[r.jsx(j,{id:"hBFvRz",defaultMessage:"The next conference is in New York City."}),r.jsx("span",{className:"text-token-text-secondary dark:bg-token-tertiary relative flex items-center rounded-xl bg-[#f4f4f4] px-1.5 py-0.5",children:r.jsx(C,{className:"h-5 w-5 object-contain"})})]},"answer"):r.jsxs(Xe.div,{className:"flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,width:"100%"},transition:{opacity:{duration:.2}},style:{width:"100%"},layout:!0,children:[r.jsx(k,{className:"h-5 w-5 object-contain"}),r.jsx("span",{className:"loading-shimmer",children:E})]},"loading")})})]})})]})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:A}),r.jsx("div",{className:"text-token-text-secondary",children:S}),r.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[r.jsx(_e,{color:"secondary",onClick:p,children:r.jsx(j,{id:"ZeZf5A",defaultMessage:"Try later"})}),r.jsx(_e,{color:"primary",onClick:I,children:M})]})]})]})},Woe=({onClose:t})=>{const e=V(),n=ne(),s=Cn(),o=!!(s!=null&&s.isAdminOfAccount()||s!=null&&s.isOwnerOfAccount()),a=!!(s!=null&&s.isPersonalAccount()),{openSettings:i}=tm();_.useEffect(()=>{Cc.logEntryPointShown({referrer:pa.ConnectorNuxModal}),B.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown",{isAdmin:o&&!a?"true":"false"}),B.logUpsellOrModalEvent(un,{eventId:"connectors_nux_modal_shown",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[o,a]);const l=()=>{B.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked",{isAdmin:o&&!a?"true":"false"}),st(e,Fe.hasSeenConnectorsNuxModal),o&&!a?window.location.href="/admin/ca":(t(),i(Rn.Connectors))},c=()=>{st(e,Fe.hasSeenConnectorsNuxModal),t()},d=n.formatMessage({id:"l6VLn3",defaultMessage:"Your apps, smarter chats"}),u=n.formatMessage({id:"QTZ7a/",defaultMessage:"Find answers, summarize info, or get things done with tools you use every day."});return r.jsxs(Mt,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:c,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsxs("div",{className:"relative h-[213px]",children:[r.jsx(gn,{onClick:c,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsx("img",{src:Uoe,alt:n.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:d}),r.jsx("div",{className:"text-token-text-secondary",children:u}),r.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[r.jsx(_e,{color:"secondary",onClick:c,children:r.jsx(j,{id:"S6nkY/",defaultMessage:"Not now"})}),r.jsx(_e,{color:"primary",onClick:()=>l(),children:r.jsx(j,{id:"1pAV1c",defaultMessage:"Connect apps"})})]})]})]})},zoe="{{.assetPrefix}}/assets/no_auth_go_upsell_background-gp1k7btd.webp",yb={src:zoe};var Z_,SC;function qoe(){if(SC)return Z_;SC=1;var t=jT(),e=h3(),n="[object Boolean]";function s(o){return o===!0||o===!1||e(o)&&t(o)==n}return Z_=s,Z_}var Yoe=qoe();const C1=Gn(Yoe),Zoe="/?default_tab=personal#pricing",vb=()=>Ei(Ue.HasSeenNoAuthFreeTrialUpsell,!1,C1),Oze=()=>{const t=V(),e=!tt(t),n=Df(),s=_3(),[o]=vb(),[a]=Us(),i=Array.from(a.keys()).some(u=>u.toLowerCase()===NT.NoAuthPlan);return!e||n||o||s||i||!ye(t,"2207916353")||!ze(t,"2860408342").get("show_go_12_month_free_trial_modal_web",!1)?"hide":"show"},Dze=({onClose:t})=>{const e=V(),[,n]=vb(),[s,o]=_.useState(!1),a=_.useCallback(()=>{n(!0),gt.setItem(Ue.HasSeenNoAuthFreeTrialUpsell,!0)},[n]);_.useEffect(()=>{B.logEventWithStatsig("No Auth Go Free Trial Upsell Modal Shown","chatgpt_no_auth_go_free_trial_upsell_modal_shown"),B.logUpsellOrModalEvent(un,{eventId:"free_trial_upsell_modal_shown_go_no_auth",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);const i=_.useCallback(()=>{a(),B.logEventWithStatsig("No Auth Go Free Trial Upsell Modal Dismissed","chatgpt_no_auth_go_free_trial_upsell_modal_dismissed"),t()},[a,t]),l=_.useCallback(()=>{a(),o(!0),Zt(e,{fallbackScreenHint:"login",callback:c=>{B.logLogInButtonClicked({provider:c,location:"No Auth Go Free Trial Upsell Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL)},callbackUrl:Zoe,skipLoginModal:!1}),t()},[e,a,t]);return r.jsxs(Mt,{testId:"modal-no-auth-free-trial-upsell",isOpen:!0,onClose:i,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:yb.src,loading:"eager",fetchPriority:"high"}),r.jsx("p",{className:"text-token-text-default-primary absolute start-1/2 top-1/2 w-full -translate-x-1/2 -translate-y-1/2 text-center text-[48px] font-semibold text-white",children:r.jsx(j,w({},wC.imageText))})]}),r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[r.jsx("p",{className:"text-token-text-secondary dark:text-gray-solid-300 mb-6 text-center",children:r.jsx(j,w({},wC.subtitle))}),r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[r.jsx(_e,{size:"large",color:"secondary",onClick:i,className:"w-full focus-visible:outline-none md:w-auto",children:r.jsx(j,w({},pt.maybeLater))}),r.jsx(_e,{size:"large",color:"primary",onClick:l,className:"w-full min-w-[130px] md:w-auto",children:s?r.jsx(_s,{}):r.jsx(j,w({},pt.logInButtonText))})]})]})]})},wC=be({subtitle:{id:"NoAuthGoFreeTrialUpsell.subtitle",defaultMessage:"Log in to see if you qualify for faster responses, higher file upload limits, and expanded image generation with a Go plan  all free for the next 12 months."},imageText:{id:"NoAuthGoFreeTrialUpsell.imageText",defaultMessage:"Try Go, Free"}}),Koe="{{.assetPrefix}}/assets/business_free_trial_upsell_background-disf9zbl.webp",Qoe={src:Koe},Joe="{{.assetPrefix}}/assets/plus_free_trial_upsell_background-ct52ve11.webp",Xoe={src:Joe};function Hl(t){const{data:e}=Al(),n=PT(e);_.useEffect(()=>{!e||n||Js.warn("Unable to resolve current account for promo eligibility",{planType:t,currentAccountId:e.currentAccountId,availableAccountIds:e.accountItems.map(({id:o})=>o)})},[e,n,t]);const s=n==null?void 0:n.getEligiblePromoCampaignId(t);return t===We.PLUS&&((n==null?void 0:n.planType)==null||n.planType!==We.FREE)?{eligible:!1}:s?{eligible:!0,campaignId:s}:{eligible:!1}}function Wj(){return Hl(We.PLUS).eligible}function eae(){return Hl(We.GO).eligible}function tae(){return Hl(We.SELF_SERVE_BUSINESS).eligible}function nae(){return Hl(We.PLUS)}function sae(){return Hl(We.GO)}function oae(){return Hl(We.SELF_SERVE_BUSINESS)}function Fze(){return Hl(We.PLUS)}function bb(t){return ye(t,"2717328795")}function aae(t){const e=_.useRef(t);return Xn(()=>{e.current=t}),e}function zj(t){const e=aae(t);_.useEffect(()=>{e.current()},[e])}const rae=()=>{"use forget";const t=G.c(20),{eligible:e}=dt(Fe.hasSeenFreeTrialUpsellModal),{eligible:n}=dt(Fe.hasSeenGoFreeTrialUpsellModal),s=V();let o;t[0]!==s?(o=tt(s),t[0]=s,t[1]=o):o=t[1];const a=o,[i]=vb(),l=Wj(),c=eae(),d=tae();let u;t[2]!==s?(u=bb(s),t[2]=s,t[3]=u):u=t[3];const f=u,m=!f&&e&&d&&!i&&a,p=!f&&n&&c&&!i&&!m&&a,g=!f&&e&&l&&!i&&!m&&!p&&a;let h;t[4]!==m||t[5]!==p||t[6]!==g?(h=()=>{m&&(B.logEventWithStatsig("Business Free Trial Upsell Modal Shown","chatgpt_business_free_trial_upsell_modal_shown"),B.logUpsellOrModalEvent(un,{eventId:"free_trial_upsell_modal_shown_business",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})),p&&(B.logEventWithStatsig("Go Free Trial Upsell Modal Shown","chatgpt_go_free_trial_upsell_modal_shown"),B.logUpsellOrModalEvent(un,{eventId:"free_trial_upsell_modal_shown_go",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})),g&&(B.logEventWithStatsig("Plus Free Trial Upsell Modal Shown","chatgpt_plus_free_trial_upsell_modal_shown"),B.logUpsellOrModalEvent(un,{eventId:"free_trial_upsell_modal_shown_plus",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL}))},t[4]=m,t[5]=p,t[6]=g,t[7]=h):h=t[7];const x=h;let v;t[8]!==s||t[9]!==m||t[10]!==p||t[11]!==g?(v=()=>{m&&(B.logEventWithStatsig("Business Free Trial Upsell Modal Dismissed","chatgpt_business_free_trial_upsell_modal_dismissed"),st(s,Fe.hasSeenFreeTrialUpsellModal)),p&&(B.logEventWithStatsig("Go Free Trial Upsell Modal Dismissed","chatgpt_go_free_trial_upsell_modal_dismissed"),st(s,Fe.hasSeenGoFreeTrialUpsellModal)),g&&(B.logEventWithStatsig("Plus Free Trial Upsell Modal Dismissed","chatgpt_plus_free_trial_upsell_modal_dismissed"),st(s,Fe.hasSeenFreeTrialUpsellModal))},t[8]=s,t[9]=m,t[10]=p,t[11]=g,t[12]=v):v=t[12];const y=v,b=m||p||g;let C;return t[13]!==y||t[14]!==x||t[15]!==m||t[16]!==p||t[17]!==g||t[18]!==b?(C={isOpen:b,showBusiness:m,showGo:p,showPlus:g,onClose:y,onMount:x},t[13]=y,t[14]=x,t[15]=m,t[16]=p,t[17]=g,t[18]=b,t[19]=C):C=t[19],C};function iae(t){"use forget";const e=G.c(34),{onClose:n,onPrimaryClick:s,isButtonLoading:o,type:a}=t,{imageSrc:i,titleMessage:l,bodyMessage:c,primaryButtonMessage:d}=cae[a];let u;e[0]!==n?(u=r.jsx("div",{className:"absolute end-5 top-5",children:r.jsx(gn,{onClick:n,className:"text-token-text-secondary rounded-full! ring-0! outline-0! hover:border hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent"})}),e[0]=n,e[1]=u):u=e[1];let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("span",{"aria-hidden":"true",className:"bg-yellow-75 pointer-events-none absolute inset-0 m-auto h-32 w-32 rounded-full blur-[70px]"}),e[2]=f):f=e[2];const m="url(".concat(i,")");let p;e[3]!==m?(p=r.jsxs("div",{className:"relative flex h-[127px] w-[127px] items-center justify-center",children:[f,r.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute inset-0 m-auto block h-[127px] w-[127px] bg-contain bg-no-repeat",style:{backgroundImage:m}})]}),e[3]=m,e[4]=p):p=e[4];let g;e[5]!==l?(g=r.jsx("h2",{className:"text-token-text-default-primary text-xl font-semibold",children:r.jsx(j,w({},l))}),e[5]=l,e[6]=g):g=e[6];let h;e[7]!==c?(h=r.jsx("p",{className:"text-token-text-secondary tracking-condensed text-base leading-6 font-normal",children:r.jsx(j,w({},c))}),e[7]=c,e[8]=h):h=e[8];let x;e[9]!==g||e[10]!==h?(x=r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[g,h]}),e[9]=g,e[10]=h,e[11]=x):x=e[11];let v;e[12]!==p||e[13]!==x?(v=r.jsxs("div",{className:"flex flex-col items-center gap-6 text-center",children:[p,x]}),e[12]=p,e[13]=x,e[14]=v):v=e[14];let y;e[15]!==o||e[16]!==d?(y=o?r.jsx(_s,{}):r.jsx(j,w({},d)),e[15]=o,e[16]=d,e[17]=y):y=e[17];let b;e[18]!==s||e[19]!==y?(b=r.jsx(_e,{color:"primary",onClick:s,className:"w-full",children:y}),e[18]=s,e[19]=y,e[20]=b):b=e[20];let C;e[21]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx(j,w({},pt.maybeLater)),e[21]=C):C=e[21];let S;e[22]!==n?(S=r.jsx(Lf,{onClick:n,underline:!1,className:"text-token-text-secondary inline text-sm font-medium",children:C}),e[22]=n,e[23]=S):S=e[23];let k;e[24]!==b||e[25]!==S?(k=r.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[b,S]}),e[24]=b,e[25]=S,e[26]=k):k=e[26];let E;e[27]!==k||e[28]!==v?(E=r.jsxs("div",{className:"flex flex-col gap-6 px-8 pt-6 pb-6",children:[v,k]}),e[27]=k,e[28]=v,e[29]=E):E=e[29];let T;return e[30]!==n||e[31]!==u||e[32]!==E?(T=r.jsxs(Mt,{testId:"modal-free-trial-upsell-gift-variant",isOpen:!0,onClose:n,type:"success",noPadding:!0,position:"center",size:"custom",className:"max-w-[393px]",contentClassName:"flex flex-col",children:[u,E]}),e[30]=n,e[31]=u,e[32]=E,e[33]=T):T=e[33],T}function lae(t){"use forget";const e=G.c(30),{onClose:n,onPrimaryClick:s,isButtonLoading:o,type:a}=t;let i,l,c,d;e:switch(a){case"business":{i=Qoe.src,l=kC.subtitle,c=pt.tryBusiness;let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("span",{className:"text-center font-semibold text-black",children:r.jsx(j,w({},pt.chatGPT))}),e[0]=C):C=e[0];let S;e[1]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsxs("p",{className:"absolute start-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-[34px] font-semibold text-white",children:[C,r.jsx("span",{className:"ms-2.5 text-center font-semibold text-[#5D5D5D]",children:r.jsx(j,w({},kC.imageText2))})]}),e[1]=S):S=e[1],d=S;break e}case"go":{i=yb.src,l=Tg.subtitle,c=pt.tryGo;let C;e[2]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("p",{className:"text-token-text-default-primary absolute start-1/2 top-1/2 w-full -translate-x-1/2 -translate-y-1/2 text-center text-[48px] font-semibold text-white",children:r.jsx(j,w({},Tg.imageText))}),e[2]=C):C=e[2],d=C;break e}default:{i=Xoe.src,l=EC.subtitle,c=pt.tryPlus;let C;e[3]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("p",{className:"text-token-text-default-primary absolute start-1/2 top-1/2 w-full -translate-x-1/2 -translate-y-1/2 text-center text-[48px] font-semibold text-white",children:r.jsx(j,w({},EC.imageText))}),e[3]=C):C=e[3],d=C}}let u;e[4]!==i?(u=r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:i,loading:"eager",fetchPriority:"high"}),e[4]=i,e[5]=u):u=e[5];let f;e[6]!==d||e[7]!==u?(f=r.jsxs("div",{className:"relative",children:[u,d]}),e[6]=d,e[7]=u,e[8]=f):f=e[8];let m;e[9]!==l?(m=r.jsx("p",{className:"text-token-text-secondary dark:text-gray-solid-300 mb-6 text-center",children:r.jsx(j,w({},l))}),e[9]=l,e[10]=m):m=e[10];let p;e[11]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(j,w({},pt.maybeLater)),e[11]=p):p=e[11];let g;e[12]!==n?(g=r.jsx(_e,{size:"large",color:"secondary",onClick:n,className:"w-full focus-visible:outline-none md:w-auto",children:p}),e[12]=n,e[13]=g):g=e[13];let h;e[14]!==c||e[15]!==o?(h=o?r.jsx(_s,{}):r.jsx(j,w({},c)),e[14]=c,e[15]=o,e[16]=h):h=e[16];let x;e[17]!==s||e[18]!==h?(x=r.jsx(_e,{size:"large",color:"primary",onClick:s,className:"w-full min-w-[130px] md:w-auto",children:h}),e[17]=s,e[18]=h,e[19]=x):x=e[19];let v;e[20]!==g||e[21]!==x?(v=r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[g,x]}),e[20]=g,e[21]=x,e[22]=v):v=e[22];let y;e[23]!==m||e[24]!==v?(y=r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[m,v]}),e[23]=m,e[24]=v,e[25]=y):y=e[25];let b;return e[26]!==n||e[27]!==f||e[28]!==y?(b=r.jsxs(Mt,{testId:"modal-free-trial-upsell",isOpen:!0,onClose:n,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[f,y]}),e[26]=n,e[27]=f,e[28]=y,e[29]=b):b=e[29],b}const Bze=t=>{"use forget";const e=G.c(27),{onClose:n}=t,s=V(),{onMount:o,onClose:a,showGo:i,showPlus:l}=rae(),c=ot(),[d,u]=_.useState(!1);zj(o);let f;e[0]!==s?(f=ze(s,"1671916711").get("enabled_see_if_you_qualify_variant",!1),e[0]=s,e[1]=f):f=e[1];const m=f;let p;e[2]!==n||e[3]!==a?(p=()=>{n(),a()},e[2]=n,e[3]=a,e[4]=p):p=e[4];const g=p;let h;e[5]!==g||e[6]!==c||e[7]!==m?(h=function(){u(!0),xn(c,"Plus Free Trial Upsell Modal",void 0,void 0,_1,m?{giftModalPlan:"plus"}:void 0),setTimeout(g,1e3)},e[5]=g,e[6]=c,e[7]=m,e[8]=h):h=e[8];const x=h;let v;e[9]!==g||e[10]!==c||e[11]!==m?(v=function(){u(!0),xn(c,"Go Free Trial Upsell Modal",void 0,void 0,void 0,m?{giftModalPlan:"go"}:void 0),setTimeout(g,1e3)},e[9]=g,e[10]=c,e[11]=m,e[12]=v):v=e[12];const y=v;let b;e[13]!==g||e[14]!==c||e[15]!==m?(b=function(){u(!0),xn(c,"Business Free Trial Upsell Modal",void 0,void 0,void 0,m?{giftModalPlan:"business"}:void 0),setTimeout(g,1e3)},e[13]=g,e[14]=c,e[15]=m,e[16]=b):b=e[16];const C=b;let S,k;if(l?(S="plus",k=x):i?(S="go",k=y):(S="business",k=C),m&&(S==="plus"||S==="business")){let T;return e[17]!==g||e[18]!==d||e[19]!==S||e[20]!==k?(T=r.jsx(iae,{onClose:g,onPrimaryClick:k,isButtonLoading:d,type:S}),e[17]=g,e[18]=d,e[19]=S,e[20]=k,e[21]=T):T=e[21],T}let E;return e[22]!==g||e[23]!==d||e[24]!==S||e[25]!==k?(E=r.jsx(lae,{onClose:g,onPrimaryClick:k,isButtonLoading:d,type:S}),e[22]=g,e[23]=d,e[24]=S,e[25]=k,e[26]=E):E=e[26],E},kC=be({subtitle:{id:"BusinessFreeTrialUpsellModal.subtitle",defaultMessage:"Unlock a secure workspace with advanced models and connectors to internal sources to supercharge your work"},imageText2:{id:"BusinessFreeTrialUpsellModal.imageText2",defaultMessage:"Business"}}),EC=be({subtitle:{id:"FreeTrialUpsellModal.subtitle",defaultMessage:"Enjoy faster responses, more advanced reasoning, higher file upload limits, and expanded image generation  all free for the next 30 days."},imageText:{id:"FreeTrialUpsellModal.imageText",defaultMessage:"Try Plus, Free"}}),Tg=be({subtitle:{id:"GoFreeTrialUpsellModal.subtitle",defaultMessage:"Enjoy faster responses, higher file upload limits, and expanded image generation with a Go plan  all free for the next 12 months."},imageText:{id:"GoFreeTrialUpsellModal.imageText",defaultMessage:"Try Go, Free"}}),Fi=be({plusTitle:{id:"GiftVariantContentMessages.plusTitle",defaultMessage:"Special Plus offer"},plusBody:{id:"GiftVariantContentMessages.plusBody",defaultMessage:"You might qualify for a free month of faster responses, advanced features, and higher limits with a Plus plan."},businessTitle:{id:"GiftVariantContentMessages.businessTitle",defaultMessage:"Special Business offer"},businessBody:{id:"GiftVariantContentMessages.businessBody",defaultMessage:"You might qualify for a free month of business features like agents, higher limits, secure projects, and 4 collaborator invites."},checkEligibilityCta:{id:"GiftVariantContentMessages.checkEligibilityCta",defaultMessage:"Check eligibility"}}),cae={plus:{imageSrc:"https://cdn.openai.com/chatgpt/gift_upsell_background_icon.png",titleMessage:Fi.plusTitle,bodyMessage:Fi.plusBody,primaryButtonMessage:Fi.checkEligibilityCta},business:{imageSrc:"https://cdn.openai.com/chatgpt/gift_upsell_background_icon.png",titleMessage:Fi.businessTitle,bodyMessage:Fi.businessBody,primaryButtonMessage:Fi.checkEligibilityCta},go:{imageSrc:"https://cdn.openai.com/chatgpt/gift_upsell_background_icon.png",titleMessage:Tg.imageText,bodyMessage:Tg.subtitle,primaryButtonMessage:Fi.checkEligibilityCta}},dae=R(()=>P(()=>import("./g688vfij3wo711sf.js"),__vite__mapDeps([36,1])),{loading:t=>O(t)}),uae=R(()=>P(()=>import("./okzlvevr93wa1zvp.js"),__vite__mapDeps([37,1])),{loading:t=>O(t)}),fae="https://persistent.oaistatic.com/chatgpt/google-connectors-nux.jpg",Uze=()=>{const t=V(),e=ye(t,"2400167019"),{isLoading:n,eligible:s}=dt(Fe.hasSeenGoogleConnectorsNuxModal);return e?n?"loading":s?"show":"hide":"hide"};function $ze({onClose:t}){const e=V();_.useEffect(()=>{B.logEventWithStatsig("Google Connectors Nux Modal Shown","chatgpt_google_connectors_nux_modal_shown"),B.logUpsellOrModalEvent(un,{eventId:"google_connectors_nux_modal_shown",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);const n=()=>{B.logEventWithStatsig("Google Connectors Nux Modal Dismissed","chatgpt_google_connectors_nux_modal_dismissed"),st(e,Fe.hasSeenGoogleConnectorsNuxModal),t()},s=ot(),o=(l,c,d)=>{B.logEventWithStatsig("Google Connectors Nux Modal Show Me Continued","chatgpt_google_connectors_nux_modal_continued",{target:d}),st(e,Fe.hasSeenGoogleConnectorsNuxModal),t(),s({pathname:"/",search:"q=".concat(c)})},[a,i]=_.useState(!1);return r.jsxs(Mt,{testId:"modal-google-connectors-nux",isOpen:!0,noPadding:!0,onClose:n,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"flex max-w-[480px] flex-col",children:[r.jsx(gn,{onClick:n,className:"text-token-text-secondary absolute end-0 top-0 z-10 me-2 mt-2 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsx("div",{className:W("h-[224px] w-full transition-opacity duration-200",a?"opacity-100":"opacity-0"),children:r.jsx("img",{src:fae,draggable:!1,className:"object-cover object-center",alt:"",onLoad:()=>i(!0)})}),r.jsxs("div",{className:"flex flex-col p-8",children:[r.jsx("div",{className:"text-center text-[22px] font-medium",children:r.jsx(j,w({},Or.title))}),r.jsx("div",{className:"text-token-text-secondary mt-2 text-center",children:r.jsx(j,U(w({},Or.subtitle),{values:{link:l=>r.jsx("a",{href:Or.subtitle.link,target:"_blank",rel:"noopener noreferrer",className:"underline",children:l},"learn-more-link")}}))}),r.jsxs("div",{className:"text-token-text-tertiary mt-6 flex items-center gap-2",children:[r.jsx("div",{className:"h-px flex-1 border-t"}),r.jsx(j,w({},Or.tryItOut)),r.jsx("div",{className:"h-px flex-1 border-t"})]}),r.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[r.jsx(_e,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:l=>o(l,Or.gmailPrompt.defaultMessage,"gmail"),children:r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[r.jsx(uae,{className:"icon-lg"}),r.jsx(j,w({},Or.gmailPrompt))]})}),r.jsx(_e,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:l=>o(l,Or.gcalPrompt.defaultMessage,"googleCalendar"),children:r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[r.jsx(dae,{className:"icon-lg"}),r.jsx(j,w({},Or.gcalPrompt))]})})]})]})]})}const Or=be({title:{id:"xQB7J6",defaultMessage:"Gmail and Google Calendar, now in chat"},subtitle:{id:"bMcG4Z",defaultMessage:"ChatGPT can now reference your emails and calendar events in responses. <link>Learn more</link>",link:"https://help.openai.com/en/articles/11487775-connectors-in-chatgpt"},tryItOut:{id:"Wkoh8S",defaultMessage:"Try it out"},gmailPrompt:{id:"GoogleConnectorsNuxModal.gmailPrompt",defaultMessage:"Which emails should I reply to?"},gcalPrompt:{id:"GoogleConnectorsNuxModal.googleCalendarPrompt",defaultMessage:"Help me with tomorrow's calendar"}}),mae=()=>{const t=V(),e=_.useRef(pae()),n=!tt(t),s=Df(),o=nH(),a=n&&o&&!e.current&&!s,i=_.useCallback(()=>{a&&(gae(),B.logEventWithStatsig("Meet ChatGPT Modal Shown","chatgpt_meet_chatgpt_modal_shown"))},[a]),l=()=>{B.logEventWithStatsig("Meet ChatGPT Modal Confirmation Button Clicked","chatgpt_meet_chatgpt_modal_confirmation_button_clicked")};return a?{onConfirmationButtonClick:l,onMount:i,state:"show"}:{onConfirmationButtonClick:l,onMount:i,state:"hide"}};function pae(){return!!localStorage.getItem(Ue.HasSeenMeetChatGptModal)}function gae(){return localStorage.setItem(Ue.HasSeenMeetChatGptModal,"true")}const Vze=({onClose:t})=>{const e=V(),{onConfirmationButtonClick:n,onMount:s,state:o}=mae(),a=RT(e)?TC.trainingDisclaimer:TC.safetyAndAbuseDisclaimer;return _.useEffect(s,[s]),o!=="show"?null:r.jsx(Mt,{testId:"modal-meet-chatgpt",isOpen:!0,noPadding:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6 text-center",children:[r.jsx("div",{className:"-mt-5 -mb-4 self-center",children:r.jsx(LT,{})}),r.jsx("div",{className:"mb-2 text-2xl font-medium",children:r.jsx(j,{id:"fnY8gE",defaultMessage:"Meet ChatGPT"})}),r.jsx("div",{className:"text-token-text-secondary mb-6",children:r.jsx(j,{id:"OdX5ix",defaultMessage:"AI that can help with brainstorming, researching, planning, and more. Just ask."})}),r.jsx(_e,{color:"primary",size:"large",className:"mb-4",onClick:()=>{n(),t()},children:r.jsx(j,w({},pt.gotItButtonText))}),r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(j,U(w({},a),{values:{learnMoreLink:i=>r.jsx("a",{className:"underline",href:"https://help.openai.com/en/articles/9737562",rel:"noreferrer",target:"_blank",children:i})}}))})]})})},TC=be({trainingDisclaimer:{id:"hebnC4",defaultMessage:"Chats may be reviewed and used to train our models. You can opt out in settings. <learnMoreLink>Learn more</learnMoreLink>"},safetyAndAbuseDisclaimer:{id:"KpKqVi",defaultMessage:"Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"}});function Cb(){var n;const{data:t}=wh(),e=(n=t==null?void 0:t.settings)==null?void 0:n.amphora_locks;return typeof e=="object"&&e!=null?e:void 0}const hae="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",_ae="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",xae="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47";function Hze(){const[t,e]=_.useState("loading"),n=jn(hn),s=v1(),{eligible:o,isLoading:a}=dt(Fe.hasSeenMoonshineNuxV2);return _.useEffect(()=>{if(n){t!=="hide"&&e("hide");return}t==="loading"&&!a&&e(!s||!o?"hide":"show")},[t,a,s,o,n]),t}function Gze({onClose:t}){const e=V(),s=ea()?_ae:hae,[o,a]=_.useState(!1);_.useEffect(()=>{o||(st(e,Fe.hasSeenMoonshineNuxV2),a(!0),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Shown","chatgpt_moonshine_nux_v2_modal_shown"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_shown"),B.logUpsellOrModalEvent(un,{eventId:"moonshine_nux_v2_modal_shown",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL}))},[e,o]);const[i,l]=_.useState(!1);_.useEffect(()=>{const A=new Image;A.src=s,A.onload=()=>l(!0)},[s]);const[c,d]=_.useState(!1),[u,f]=_.useState(!1);_.useEffect(()=>{if(!i)return;const A=setTimeout(()=>{d(!0)},200),I=setTimeout(()=>{f(!0)},300);return()=>{clearTimeout(A),clearTimeout(I)}},[i]);const m=()=>{window.open(xae,"_blank","noopener noreferrer"),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Learn More Clicked","chatgpt_moonshine_nux_v2_modal_learn_more_clicked"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_learn_more_clicked")},p=ot(),g=ye(e,"1542198993"),h=Tl(),x=Cb(),[v,y]=_.useState(!1),b=is(e,"3934129380"),C=yae.describeMePrompt.defaultMessage,S=b.get("model","gpt-4o"),k=et(e),E=k==null?void 0:k.hasPlusFeatures(),T=()=>{v||(y(!0),t(),p({pathname:"/",search:"?q=".concat(C,"&model=").concat(S,"&skip_instant_query=1&hints=").concat(Pe.Moonshine)}),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Show Me Clicked","chatgpt_moonshine_nux_v2_modal_show_me_clicked"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_show_me_clicked"))},M=()=>{h.mutate({setting:Lt.Moonshine,value:!0},{onSettled:()=>{t()}}),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Enable Clicked","chatgpt_moonshine_nux_v2_modal_enable_clicked"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_enable_clicked")};return i?r.jsxs(Mt,{testId:"modal-moonshine-nux-v2",isOpen:!0,noPadding:!0,onClose:()=>{t(),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Closed","chatgpt_moonshine_nux_v2_modal_closed"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(gn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(c?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"MoonshineNuxV2Modal.firstBubble",defaultMessage:"Hey ChatGPT!"})}),r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(u?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"MoonshineNuxV2Modal.secondBubble",defaultMessage:"Describe me based on our chats"})})]})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:r.jsx(j,{id:"MoonshineNuxV2Modal.title",defaultMessage:"Introducing new, improved memory"})}),r.jsx("div",{className:"text-token-text-secondary w-full",children:g?E?r.jsx(j,{id:"MoonshineNuxV2Modal.subtitleDefaultOff",defaultMessage:"ChatGPT can now remember more of your past chats to better personalize its responses. Want to change what it knows about you? Just ask."}):r.jsx(j,{id:"MoonshineNuxV2Modal.subtitleDefaultOff.freeMoonshine",defaultMessage:"ChatGPT can now remember your recent chats to better personalize its responses. Want to change what it knows about you? Just ask."}):E?r.jsx(j,{id:"MoonshineNuxV2Modal.subtitle",defaultMessage:"ChatGPT can now remember more of your past chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."}):r.jsx(j,{id:"MoonshineNuxV2Modal.subtitle.freeMoonshine",defaultMessage:"ChatGPT now remembers your recent chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."})}),r.jsxs("div",{className:"mt-4 flex w-full items-center justify-between",children:[r.jsx(_e,{color:"secondary",onClick:m,children:r.jsx(j,{id:"MoonshineNuxV2Modal.learnMoreButton",defaultMessage:"Learn more"})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(_e,{color:"secondary",onClick:t,children:r.jsx(j,{id:"MoonshineNuxV2Modal.notNowButton",defaultMessage:"Not now"})}),g?r.jsx(_e,{color:"secondary",onClick:M,disabled:(x==null?void 0:x[Lt.Moonshine])===!0,children:r.jsx(j,{id:"MoonshineNuxV2Modal.enableButton",defaultMessage:"Enable"})}):r.jsx(_e,{color:"primary",onClick:T,children:r.jsx(j,{id:"MoonshineNuxV2Modal.showMeButton",defaultMessage:"Show me"})})]})]})]})]}):null}const yae=be({describeMePrompt:{id:"MoonshineNuxV2Modal.describeMePrompt",defaultMessage:"Describe me based on all our chats  make it catchy!"}});function Gl(t){return ze(t,"3637408529").get("is_login_primary_button",!1)}const vae=t=>ze(t,"1346366956").get("signup_cta_copy","SIGN_UP"),bae=t=>ze(t,"1803944755").get("login_or_signup_cta_copy","LOGIN_OR_SIGNUP"),Wze=t=>{switch(bae(t)){case"LOGIN_OR_SIGNUP":return MC.loginOrSignup;case"SIGNIN":return MC.signin}},Hd=(t,e)=>{switch(vae(t)){case"SIGN_UP":return e;case"SIGN_UP_FOR_FREE":return Ec.signUpForFreeCta;case"CREATE_ACCOUNT":return Ec.createAccountCta;case"CREATE_NEW_ACCOUNT":return Ec.createNewAccountCta;case"CREATE_FREE_ACCOUNT":return Ec.createFreeAccountCta}},MC=be({loginOrSignup:{id:"loginOrSignupCta.loginOrSignup",defaultMessage:"Log in or sign up"},signin:{id:"loginOrSignupCta.signin",defaultMessage:"Sign in"}}),Ec=be({createAccountCta:{id:"createAccountCta",defaultMessage:"Create account"},createNewAccountCta:{id:"createNewAccountCta",defaultMessage:"Create new account"},createFreeAccountCta:{id:"createFreeAccountCta",defaultMessage:"Create free account"},signUpForFreeCta:{id:"signUpForFreeCta",defaultMessage:"Sign up for free"}}),Cae="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",qj=()=>Ei(Ue.HasSeenNoAuthImagegenNux,!1,C1),zze=()=>{const t=V(),e=!tt(t),n=Df(),[s]=qj(),o=_3(),a=ze(t,"2118136551");return!e||n||s||o?"hide":a.get("should_show_imagegen_nux",!1)?"show":"hide"},qze=({onClose:t})=>{const n=Ed()?"center":"bottom",s=V(),[o,a]=_.useState(!1),i=is(s,"2604379743").value,l=typeof i.nux_video_url=="string"?i.nux_video_url:Cae,c=typeof i.nux_image_url=="string"?i.nux_image_url:"",[,d]=qj(),u=()=>{d(!0),gt.setItem(Ue.HasSeenNoAuthImagegenNux,!0)},f=Gl(s),p=ze(s,"2118136551").get("sign_up_button_has_the_word_free",!0),g=Hd(s,p?Ec.signUpForFreeCta:pt.signUpButtonText),h=r.jsx(_e,{as:"button",size:"large",color:f?"secondary":"primary",onClick:()=>{u(),Zt(s,{fallbackScreenHint:"signup",callback:y=>{B.logSignUpButtonClicked({provider:y,location:"No Auth Imagegen Nux Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},fullWidth:!0,children:r.jsx(j,w({},g))}),x=r.jsx(_e,{as:"button",size:"large",color:f?"primary":"secondary",fullWidth:!0,onClick:()=>{u(),Zt(s,{fallbackScreenHint:"login",callback:y=>{B.logLogInButtonClicked({provider:y,location:"No Auth Imagegen Nux Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},children:r.jsx(j,w({},pt.logInButtonText))}),v=()=>{t(),u(),B.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_dismissed","chatgpt_no_auth_imagegen_nux_modal_dismissed")};return _.useEffect(()=>{B.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_shown","chatgpt_no_auth_imagegen_nux_modal_shown")},[]),r.jsxs(Mt,{testId:"modal-no-auth-imagegen-nux",isOpen:!0,noPadding:!0,onClose:v,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",position:n,children:[r.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!o&&r.jsx("img",{src:c,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),r.jsx("video",{src:l,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>a(!0)}),r.jsx("div",{className:"absolute end-4 top-4",children:r.jsx(gn,{onClick:v})})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-8 text-center",children:[r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,{id:"OxVK72",defaultMessage:"Bring your ideas to life with images"})}),r.jsx("div",{className:"text-token-text-secondary w-full",children:r.jsx(j,{id:"bVWvdX",defaultMessage:"Create a free account to make illustrations, charts, comics, and more."})}),r.jsx("div",{className:"mt-4 mb-2 flex w-full flex-col gap-3",children:f?[x,h]:[h,x]}),r.jsx(_e,{color:"ghost",className:"text-token-text-secondary font-semibold underline hover:bg-transparent",onClick:v,children:r.jsx(j,w({},pt.stayLoggedOut))})]})]})},Sae=()=>{"use forget";const t=G.c(8),[e]=Us(),n=e.get(NT.NoAuthPlan);let s;e:switch(n){case Rm.Business:{s="Business";break e}case Rm.Go:{s="Go";break e}case Rm.Plus:{s="Plus";break e}case Rm.Pro:{s="Pro";break e}default:s=""}const o=s,a=V();let i;t[0]!==a?(i=tt(a),t[0]=a,t[1]=i):i=t[1];const c=!!(!i&&o);let d;t[2]!==c?(d=()=>{c&&B.logEventWithStatsig("No Auth Plan Upsell Modal Shown","chatgpt_no_auth_plan_upsell_shown")},t[2]=c,t[3]=d):d=t[3];const u=d,f=wae;let m;return t[4]!==c||t[5]!==u||t[6]!==o?(m={isOpen:c,onClose:f,onMount:u,planType:o},t[4]=c,t[5]=u,t[6]=o,t[7]=m):m=t[7],m},Yze=t=>{"use forget";const e=G.c(31),{onClose:n}=t,s=V(),{onMount:o,onClose:a,planType:i}=Sae(),[l,c]=_.useState(!1),d=i==="Business"?"business":"personal",u="/?default_tab=".concat(d,"#pricing");let f;e[0]!==s?(f=Gl(s),e[0]=s,e[1]=f):f=e[1];const m=f;zj(o);let p;e[2]!==u||e[3]!==s||e[4]!==m?(p=function(){c(!0),Zt(s,{callbackUrl:u,fallbackScreenHint:m?"login":"signup",callback:I=>{m?B.logLogInButtonClicked({location:"No Auth Plan Upsell Modal",provider:I},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PLAN_UPSELL_MODAL):B.logSignUpButtonClicked({location:"No Auth Plan Upsell Modal",provider:I},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PLAN_UPSELL_MODAL),c(!1)},skipLoginModal:!1})},e[2]=u,e[3]=s,e[4]=m,e[5]=p):p=e[5];const g=p;let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:yb.src,loading:"eager",fetchPriority:"high"}),e[6]=h):h=e[6];let x;e[7]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("h2",{className:"mb-1 text-center text-xl font-semibold",children:r.jsx(j,w({},K_.title))}),e[7]=x):x=e[7];let v;e[8]!==i?(v=r.jsx("p",{className:"text-token-text-default-secondary text-gray-solid-500 mb-6 text-center",children:r.jsx(j,U(w({},K_.subtitle),{values:{planType:i}}))}),e[8]=i,e[9]=v):v=e[9];let y;e[10]!==n||e[11]!==a?(y=()=>{n(),a()},e[10]=n,e[11]=a,e[12]=y):y=e[12];let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(j,w({},pt.maybeLater)),e[13]=b):b=e[13];let C;e[14]!==y?(C=r.jsx(_e,{size:"large",color:"secondary",onClick:y,className:"w-full focus-visible:outline-none md:w-auto",children:b}),e[14]=y,e[15]=C):C=e[15];let S;e[16]!==l||e[17]!==i?(S=l?r.jsx(_s,{}):r.jsx(j,U(w({},K_.primaryButton),{values:{planType:i}})),e[16]=l,e[17]=i,e[18]=S):S=e[18];let k;e[19]!==g||e[20]!==S?(k=r.jsx(_e,{size:"large",color:"primary",onClick:g,className:"w-full min-w-[130px] md:w-auto",children:S}),e[19]=g,e[20]=S,e[21]=k):k=e[21];let E;e[22]!==k||e[23]!==C?(E=r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[C,k]}),e[22]=k,e[23]=C,e[24]=E):E=e[24];let T;e[25]!==E||e[26]!==v?(T=r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[x,v,E]}),e[25]=E,e[26]=v,e[27]=T):T=e[27];let M;return e[28]!==n||e[29]!==T?(M=r.jsxs(Mt,{testId:"modal-no-auth-go-upsell",isOpen:!0,onClose:n,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[h,T]}),e[28]=n,e[29]=T,e[30]=M):M=e[30],M},K_=be({title:{id:"NoAuthGoUpsellModal.title",defaultMessage:"Unlock more of ChatGPT"},subtitle:{id:"NoAuthGoUpsellModal.subtitle",defaultMessage:"Upgrade to ChatGPT {planType} for extra messaging, uploads, and memory to keep your conversations going"},primaryButton:{id:"NoAuthGoUpsellModal.primaryButton",defaultMessage:"Upgrade to {planType}"}});function wae(){B.logEventWithStatsig("No Auth Plan Upsell Modal Dismissed","chatgpt_no_auth_plan_upsell_dismissed")}function Yj(){const[t]=Us();return t.get("promoCode")}const Zze=({onClose:t})=>{const e=V(),n=Ed(),s=Hd(e,pt.signUpButtonText),o=n?"center":"bottom",a=Yj();if(_.useEffect(()=>{a?B.logEventWithStatsig("No Auth Promo Redemption Modal Shown","chatgpt_no_auth_promo_redemption_modal_shown",{promoCode:a}):console.warn("Mounted NoAuthPromoRedemptionModal without a valid promo code")},[a]),!a)return null;const i="/p/".concat(a);return r.jsx(Mt,{testId:"modal-no-auth-promo-redemption",isOpen:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:o,children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[r.jsx("p",{className:"mb-6 text-center text-2xl font-semibold",children:r.jsx(j,w({},AC.title))}),r.jsx(_e,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3",onClick:()=>{Zt(e,{fallbackScreenHint:"login",callback:l=>{B.logLogInButtonClicked({provider:l,location:"No Auth Promo Redemption Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)},callbackUrl:i,skipLoginModal:!1})},children:r.jsx(j,w({},pt.logInButtonText))}),r.jsx(_e,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{Zt(e,{fallbackScreenHint:"signup",callback:l=>{B.logSignUpButtonClicked({provider:l,location:"No Auth Promo Redemption Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)},callbackUrl:i,skipLoginModal:!1})},children:r.jsx(j,w({},s))}),r.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:l=>{l.preventDefault(),B.logEventWithStatsig("No Auth Promo Redemption Modal Dismissed","chatgpt_no_auth_promo_redemption_modal_dismissed",{promoCode:a}),t()},children:r.jsx(j,w({},AC.stayLoggedOutLink))})]})})},AC=be({title:{id:"NoAuthPromoRedemptionModal.title",defaultMessage:"Log in or sign up to redeem your promotion"},stayLoggedOutLink:{id:"NoAuthPromoRedemptionModal.stayLoggedOut",defaultMessage:"Stay logged out"}});function Kze(){const t=V(),e=!tt(t),n=Yj();return sg(()=>OT(t))?{isOpen:!1}:{isOpen:n!=null&&e}}const Qze=R(()=>P(()=>import("./d6c0uyk9gv3c7gwy.js"),__vite__mapDeps([38,1,10,11,39,40,41,42,43,44,45,46])).then(t=>t.NoAuthWelcomeBackModal)),kae=({dismissLink:t,onLogInButtonClick:e,onSignUpButtonClick:n,subtitle:s,title:o})=>{const a=V(),l=Ed()?"center":"bottom",c=Gl(a),u=ze(a,"2118136551").get("sign_up_button_has_the_word_free",!0),f=Hd(a,u?Ec.signUpForFreeCta:IC.signUpCta),m=r.jsx(_e,{as:"button",size:"large",color:c?"secondary":"primary",onClick:n,fullWidth:!0,children:r.jsx(j,w({},f))}),p=r.jsx(_e,{as:"button",size:"large",color:c?"primary":"secondary",fullWidth:!0,onClick:e,children:r.jsx(j,w({},IC.logInCta))}),g=c?[p,m]:[m,p];return r.jsx(Mt,{testId:"modal-no-auth-rate-limit",isOpen:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:l,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:px-10 sm:pt-12 sm:pb-10",children:[r.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:r.jsx(j,w({},o))}),r.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:r.jsx(j,w({},s))}),r.jsx("div",{className:"flex w-full flex-col gap-2 sm:gap-2.5",children:g}),t?r.jsx("a",{href:"#",className:"text-token-text-secondary mt-5 cursor-pointer text-sm font-semibold underline",onClick:h=>{h.preventDefault(),t.onClick()},children:r.jsx(j,w({},t.text))}):null]})})},IC=be({signUpCta:{id:"NoAuthModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthModal.logInCta",defaultMessage:"Log in"}}),Eae=10,Tae=({type:t="default"}={})=>{const e=V(),s=ze(e,"3637408529").get("no_auth_soft_rate_limit",Eae),[o,a]=_.useState(()=>sessionStorage.getItem(Ue.NoAuthHasDismissedSoftRateLimitModal)!=null),i=!tt(e),l=Df(),c=Jh(FM),d=_.useRef(c),u=c>=s,[f,m]=_.useState(!1);_.useEffect(()=>{d.current<c&&(d.current=c,c===s&&m(!0))},[c,s]);const p=Eh(),g=i&&u&&(t==="default"||f)&&!o&&!l&&!p,h=_.useCallback(()=>{g&&(B.logEvent("No Auth Soft Rate Limit Modal Shown"),Ye.logEvent("chatgpt_no_auth_soft_rate_limit_modal_shown"))},[g]);return{isOpen:g,onClose:()=>{a(!0),sessionStorage.setItem(Ue.NoAuthHasDismissedSoftRateLimitModal,"true")},onMount:h}},Jze=({onClose:t})=>{const e=V(),n=Gl(e),{isOpen:s,onClose:o,onMount:a}=Tae();return _.useEffect(()=>{a==null||a()},[a]),s?r.jsx(kae,{dismissLink:{text:ap.stayLoggedOutLink,onClick:()=>{B.logEvent("No Auth Soft Rate Limit Modal Stay Logged out Link Clicked"),Ye.logEvent("chatgpt_no_auth_soft_rate_limit_modal_stay_logged_out_link_clicked"),t(),o()}},onLogInButtonClick:()=>{Zt(e,{fallbackScreenHint:"login",callback:i=>{B.logLogInButtonClicked({provider:i,location:"No Auth Soft Rate Limit Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)},skipLoginModal:!1})},onSignUpButtonClick:()=>{Zt(e,{fallbackScreenHint:"signup",callback:i=>{B.logSignUpButtonClicked({provider:i,location:"No Auth Soft Rate Limit Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)},skipLoginModal:!1})},subtitle:n?ap.logInSubtitle:ap.signUpSubtitle,title:ap.title}):null},ap=be({title:{id:"NoAuthSoftRateLimitModal.title",defaultMessage:"Thanks for trying ChatGPT"},signUpSubtitle:{id:"zpngdW",defaultMessage:"Sign up or log in to get smarter responses, upload files and images, and more."},logInSubtitle:{id:"iVew+I",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),Mae=3600*24*30*12;function Aae(){var l;const{isLoading:t,data:e}=rt(sH),n=_.useRef(Iae()),s=(l=e==null?void 0:e.email)!=null?l:null,o=_.useCallback(()=>{n.current&&e?B.logEventWithStatsig("Punch Out Anon To Authed Modal Shown","chatgpt_punch_out_anon_to_authed_modal_shown"):console.warn("PunchOutAnonToAuthedModal is being mounted without a user and a token")},[e]),a=c=>{B.logEventWithStatsig("Punch Out Anon To Authed Modal Continue Button Clicked","chatgpt_punch_out_anon_to_authed_modal_continue_button_clicked"),jC(),jae(),window.location.href="/continue_from_api?token=".concat(c)},i=()=>{jC(),B.logEventWithStatsig("Punch Out Anon To Authed Modal Cancel Button Clicked","chatgpt_punch_out_anon_to_authed_modal_cancel_button_clicked")};return t?{email:null,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"loading",token:null}:n.current&&s?{email:s,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"show",token:n.current}:{email:null,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"hide",token:null}}function Iae(){var t;return(t=ps.getCookie(gs.PunchOutRequireAnonToAuthedToken))!=null?t:null}function jC(){return ps.deleteCookie(gs.PunchOutRequireAnonToAuthedToken)}function jae(){ps.setCookie(gs.PunchOutAnonToAuthedEnabled,"true",{maxAge:Mae})}const Xze=({onClose:t})=>{const{onCancelButtonClick:e,onContinueButtonClick:n,onMount:s,token:o,email:a,state:i}=Aae(),c=wr()?"medium":"large";return _.useEffect(s,[s]),i!=="show"?null:r.jsx(Mt,{testId:"modal-punch-out-anon-to-authed",isOpen:!0,noPadding:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6",children:[r.jsx("div",{className:"mb-2 text-center text-xl font-medium md:text-start",children:r.jsx(j,{id:"qAel0I",defaultMessage:"Always open in ChatGPT?"})}),r.jsx("div",{className:"text-token-text-secondary mb-6 text-center md:text-start",children:r.jsx(j,{id:"9Pb+Og",defaultMessage:"Chats you open from Siri will be saved in your account <emailContainer>({email})</emailContainer>.",values:{emailContainer:d=>r.jsx("span",{className:"font-medium",children:d}),email:a}})}),r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[r.jsx(_e,{color:"primary",size:c,onClick:()=>n(o),children:r.jsx(j,w({},pt.continueButtonText))}),r.jsx(_e,{color:"secondary",size:c,onClick:()=>{e(),t()},children:r.jsx(j,w({},pt.cancelButtonText))})]})]})})};function eqe(t){return ze(t,"3233347819").get("is_signup_text_updated",!1)}function Qa(t){return ze(t,"3233347819").get("is_login_modal_phase2_enabled",!1)&&!Td()}function Nae(){const t=_.useRef(Pae()),e=V(),n=_.useCallback(()=>{t.current?B.logEventWithStatsig("No Auth Punch Out Sign In As Modal Shown","chatgpt_no_auth_punch_out_sign_in_as_modal_shown"):console.warn("PunchOutSignInAsModal is being mounted without punchOutRequireLoginInfo")},[]);return{onCancelButtonClick:()=>{B.logEventWithStatsig("No Auth Punch Out Sign In As Modal Cancel Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_cancel_button_clicked"),Nx()},onContinueButtonClick:({token:a})=>{B.logEventWithStatsig("No Auth Punch Out Sign In As Modal Continue Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_continue_button_clicked"),Nx(),Zt(e,{fallbackScreenHint:"login",callback:i=>{B.logLogInButtonClicked({location:"No Auth Punch Out Sign In As Modal",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PUNCH_OUT_SIGN_IN_AS_MODAL)},callbackUrl:"/continue_from_api?token=".concat(a),skipLoginModal:!Qa(e)})},onMount:n,punchOutRequireLoginInfo:t.current}}function Pae(){if(typeof window>"u")return null;const t=ps.getCookie(gs.PunchOutRequireLoginInfo);if(!t)return null;try{const e=JSON.parse(t);return oH(e,aH),e}catch(e){Nx(),e instanceof rH?console.warn("Invalid struct for punch out require login info",e):Re.addError("Failed to parse punch out require login info",{error:e})}return null}function Nx(){ps.deleteCookie(gs.PunchOutRequireLoginInfo)}const tqe=({onClose:t})=>{const{onCancelButtonClick:e,onContinueButtonClick:n,onMount:s,punchOutRequireLoginInfo:o}=Nae(),i=wr()?"medium":"large";if(_.useEffect(s,[s]),!o)return null;const{email:l}=o;return r.jsx(Mt,{testId:"modal-punch-out-sign-in-as",isOpen:!0,noPadding:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6",children:[r.jsx("div",{className:"mb-6 text-center text-xl font-medium md:text-start",children:r.jsx(j,{id:"0e8g2r",defaultMessage:"Sign in as {email}?",values:{email:l}})}),r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[r.jsx(_e,{color:"primary",size:i,onClick:()=>n(o),children:r.jsx(j,w({},pt.continueButtonText))}),r.jsx(_e,{color:"secondary",size:i,onClick:()=>{e(),t()},children:r.jsx(j,w({},pt.cancelButtonText))})]})]})})};function S1(t){"use forget";var m;const e=G.c(7),{lightLogoUrl:n,darkLogoUrl:s,enabled:o}=t,a=o===void 0?!0:o,l=(m=ea()?s!=null?s:n:n!=null?n:s)!=null?m:null;let c,d;e[0]!==l?(c=["connector-logo",l],d=()=>Rae(l),e[0]=l,e[1]=c,e[2]=d):(c=e[1],d=e[2]);const u=a&&!!l;let f;return e[3]!==c||e[4]!==d||e[5]!==u?(f={queryKey:c,queryFn:d,enabled:u},e[3]=c,e[4]=d,e[5]=u,e[6]=f):f=e[6],rt(f)}async function Rae(t){var e;if(t!=null&&t.startsWith("connectors://")){const n=new URL(t),s=n.hostname,o=(e=n.searchParams.get("theme"))!=null?e:"light",a=await ge.safeGet("/aip/connectors/{connector_id}/logo",{parameters:{path:{connector_id:s},query:{theme:o}},skipJsonTransform:!0});if(!a.ok)throw new Error("Failed to get connector logo: ".concat(await a.text()));const i=await a.blob();return{url:URL.createObjectURL(i),text:await i.text()}}return{url:t}}const Lae=R(()=>P(()=>import("./hn0hl0c8spo9mfdq.js"),__vite__mapDeps([47,1])),{loading:t=>O(t)}),Oae=R(()=>P(()=>import("./ivcr7y2h4l13i5br.js"),__vite__mapDeps([48,1])),{loading:t=>O(t)}),Dae=R(()=>P(()=>import("./eahncmechdd0yy5s.js"),__vite__mapDeps([24,1])),{loading:t=>O(t)}),Fae=R(()=>P(()=>import("./isqpc56i7wx8h49k.js"),__vite__mapDeps([49,1])),{loading:t=>O(t)}),Bae=R(()=>P(()=>Promise.resolve().then(()=>Cm),void 0),{loading:t=>O(t)}),Uae=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>O(t)}),Zj=R(()=>P(()=>Promise.resolve().then(()=>gm),void 0),{loading:t=>O(t)}),$ae=R(()=>P(()=>Promise.resolve().then(()=>q1),void 0),{loading:t=>O(t)}),Vae=R(()=>P(()=>import("./cra56oew4p77casj.js"),__vite__mapDeps([50,1])),{loading:t=>O(t)}),gl=t=>{"use forget";var h,x,v,y,b;const e=G.c(29);let n,s,o;e[0]!==t?(h=t,{hint:n,isNextToLabel:s}=h,o=ke(h,["hint","isNextToLabel"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o):(n=e[1],s=e[2],o=e[3]);let a;e[4]!==n?(a=Hae(n),e[4]=n,e[5]=a):a=e[5];const i=a,l=i&&(x=n.connectorLogoUrl)!=null?x:null,c=i&&(v=n.connectorLogoUrlDark)!=null?v:null,d=n.isConnector&&i;let u;e[6]!==l||e[7]!==c||e[8]!==d?(u={lightLogoUrl:l,darkLogoUrl:c,enabled:d},e[6]=l,e[7]=c,e[8]=d,e[9]=u):u=e[9];const f=S1(u);if(n.isConnector){if((y=f.data)!=null&&y.url){const k=(b=f.data)==null?void 0:b.url,E=s?"":n.name;let T;return e[10]!==o||e[11]!==k||e[12]!==E?(T=r.jsx("img",w({src:k,alt:E,className:"icon"},o)),e[10]=o,e[11]=k,e[12]=E,e[13]=T):T=e[13],T}if(n.logo&&!f.isLoading){const k=s?"":n.name;let E;return e[14]!==n.logo||e[15]!==o||e[16]!==k?(E=r.jsx(sf,w({svgString:n.logo,className:"icon","aria-label":k},o)),e[14]=n.logo,e[15]=o,e[16]=k,e[17]=E):E=e[17],E}const C=s?"":n.name;let S;return e[18]!==o||e[19]!==C?(S=r.jsx(Zj,w({className:"icon","aria-label":C},o)),e[18]=o,e[19]=C,e[20]=S):S=e[20],S}let m;e[21]!==n.systemHint?(m=Fp(n.systemHint),e[21]=n.systemHint,e[22]=m):m=e[22];const p=m;let g;return e[23]!==p||e[24]!==n.logo||e[25]!==n.name||e[26]!==s||e[27]!==o?(g=p?r.jsx(p,w({className:"icon","aria-label":s?"":n.name},o)):r.jsx(sf,w({svgString:n.logo,className:"icon","aria-label":s?"":n.name},o)),e[23]=p,e[24]=n.logo,e[25]=n.name,e[26]=s,e[27]=o,e[28]=g):g=e[28],g};function Fp(t){switch(t){case Pe.Search:return Uae;case Pe.Think:return Fae;case Pe.Research:return Lae;case Pe.Canvas:return Dae;case Pe.Picture:case Pe.PictureV2:return Bae;case Pe.Video:return Oae;case Pe.Slurm:case Pe.ApiTool:return Zj;case Pe.Agent:return Vae;case Pe.Tatertot:return $ae;default:return}}function Hae(t){return"connectorLogoUrl"in t||"connectorLogoUrlDark"in t}const Gae=R(()=>P(()=>import("./gducbep8qsfkuz9f.js"),__vite__mapDeps([51,1])),{loading:t=>O(t)}),Wae=R(()=>P(()=>Promise.resolve().then(()=>wm),void 0),{loading:t=>O(t)}),zae=R(()=>P(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([52,1])),{loading:t=>O(t)}),qae=R(()=>P(()=>import("./fqy57c2iy2xliuz9.js"),__vite__mapDeps([53,1])),{loading:t=>O(t)}),Yae=R(()=>P(()=>Promise.resolve().then(()=>Cm),void 0),{loading:t=>O(t)}),Zae=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>O(t)}),Kae=R(()=>P(()=>import("./kspsmo2l8jg7uqdj.js"),__vite__mapDeps([26,1])),{loading:t=>O(t)}),Qae=R(()=>P(()=>Promise.resolve().then(()=>q1),void 0),{loading:t=>O(t)}),Jae="https://persistent.oaistatic.com/chatgpt/NUX_StudyMode_16x9.png",nqe=()=>{const{eligible:t,isLoading:e}=dt(Fe.hasSeenTatertotNux),n=V();return!(!ye(n,"1586944302")&&ye(n,"2342247883"))||!x3(n)?"hide":e?"loading":t?"show":"hide"};function sqe({onClose:t}){var y,b,C;const e=V(),n=ae(()=>Vs(e)),s=Jae,o=ne(),a=_.useRef(!1),[i,l]=_.useState(!1);_.useEffect(()=>{const S=new Image;S.src=s,S.onload=()=>l(!0)},[s]),_.useEffect(()=>{!i||a.current||(a.current=!0,Ie.count(je.TATERTOT,"tatertot_nux_modal_v2_shown"),B.logEventWithStatsig("Tatertot Nux Modal V2 Shown","chatgpt_tatertot_nux_modal_v2_shown"))},[i]);const c=ot(),d=_.useMemo(()=>n?Object.fromEntries(n.map(S=>[S.systemHint,S])):{},[n]),u=d[Pe.PictureV2],f=d[Pe.Search],m=d[Pe.Tatertot],p=$s(),[g,h]=_.useState(!1),x=_.useCallback(()=>{st(e,Fe.hasSeenTatertotNux),t(),Ie.count(je.TATERTOT,"tatertot_nux_modal_v2_closed"),B.logEventWithStatsig("Tatertot Nux Modal V2 Closed","chatgpt_tatertot_nux_modal_v2_closed")},[e,t]),v=_.useCallback(()=>{g||(h(!0),st(e,Fe.hasSeenTatertotNux),t(),c({pathname:"/",search:"?hints=".concat(y3)}),p(Pe.Tatertot),Ie.count(je.TATERTOT,"tatertot_nux_modal_v2_show_me_clicked"),B.logEventWithStatsig("Tatertot Nux Modal V2 Show Me Clicked","chatgpt_tatertot_nux_modal_v2_show_me_clicked"))},[e,c,t,g,p]);return i?r.jsxs(Mt,{testId:"modal-tatertot-nux",isOpen:!0,noPadding:!0,onClose:x,showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(gn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:x})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[232px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-start justify-center",children:r.jsxs("div",{className:"relative mx-auto w-full",children:[r.jsx("div",{className:"relative mx-auto mt-6 w-full max-w-[240px]",children:r.jsxs("div",{className:"flex items-center justify-start",children:[r.jsx("div",{className:"me-3 flex h-12 w-12 items-center justify-center rounded-full bg-white/80 drop-shadow-sm",children:r.jsx(Wae,{className:"h-6 w-6 text-black"})}),r.jsx("div",{className:"w-[181px] flex-1 rounded-full bg-white/30 px-5 py-3 text-[17px] backdrop-blur-sm",children:r.jsx("span",{className:"text-black/30",children:o.formatMessage(Do.placeholderAskAnythingVariant)})})]})}),r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex h-[162px] max-w-full min-w-[240px] -translate-x-1/2 translate-y-44 flex-col items-start justify-end rounded-xl bg-white/80 p-4 drop-shadow-xs backdrop-blur-xs",children:r.jsx("div",{className:"flex h-full w-auto flex-col items-start justify-end",children:r.jsxs("div",{className:"flex h-full w-auto translate-y-3 flex-col items-start justify-end",children:[r.jsx("span",{className:"ms-2 mb-4 flex items-center gap-4 text-[17px] font-medium whitespace-nowrap text-gray-600",children:u?r.jsxs(r.Fragment,{children:[r.jsx(gl,{hint:u,isNextToLabel:!0,className:"h-6 w-6"}),(y=u.actionLabel)!=null?y:u.name]}):r.jsxs(r.Fragment,{children:[r.jsx(Yae,{className:"h-6 w-6 text-gray-600"}),o.formatMessage(Tc.createImagePill)]})}),r.jsx("span",{className:"ms-2 mb-2 flex items-center gap-4 text-[17px] font-medium whitespace-nowrap text-gray-600",children:f?r.jsxs(r.Fragment,{children:[r.jsx(gl,{hint:f,isNextToLabel:!0,className:"h-6 w-6"}),(b=f.actionLabel)!=null?b:f.name]}):r.jsxs(r.Fragment,{children:[r.jsx(Zae,{className:"h-6 w-6 text-gray-600"}),o.formatMessage(Tc.webSearchPill)]})})]})})}),r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex max-w-full min-w-[264px] -translate-x-1/2 translate-y-21 flex-col items-start",children:r.jsx("div",{className:"flex min-h-[60px] w-auto max-w-full min-w-[264px] items-center justify-center rounded-xl bg-white px-4 py-2 shadow-lg",children:r.jsxs("span",{className:"flex items-center text-[20px] font-medium whitespace-nowrap text-blue-400",children:[m?r.jsxs(r.Fragment,{children:[r.jsx(gl,{hint:m,isNextToLabel:!0,className:"h-7 w-7"}),r.jsx("span",{className:"mx-3.5",children:(C=m.actionLabel)!=null?C:m.name})]}):r.jsxs(r.Fragment,{children:[r.jsx(Qae,{className:"h-7 w-7 text-blue-400"}),r.jsx("span",{className:"mx-3.5",children:o.formatMessage(Tc.studyAndLearnPill)})]}),r.jsx(Kae,{className:"ms-3 h-7 w-7 text-blue-400"})]})})})]})})]}),r.jsxs("div",{className:"dark:bg-gray-750 relative z-30 flex flex-1 flex-col items-center gap-6 bg-white px-8 pt-8 pb-8",children:[r.jsx("div",{className:"flex w-80 items-center justify-center text-center text-4xl font-semibold",children:r.jsx(j,{id:"StudyandLearn.learnAnythingTitle",defaultMessage:"Learn anything, step by step"})}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(zae,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.quizFeatureTitle",defaultMessage:"Practice with quizzes"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.quizFeatureDescription",defaultMessage:"Create quizzes and flashcards to test your knowledge."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Gae,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.homeworkFeatureTitle",defaultMessage:"Get homework help"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.homeworkFeatureDescription",defaultMessage:"Break down tough problems with simple, step-by-step guidance."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(qae,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.exploreFeatureTitle",defaultMessage:"Explore new subjects"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.exploreFeatureDescription",defaultMessage:"Dive into anything you're curious about and get quick, clear answers."})})]})]}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4 text-[17px]",children:r.jsx(_e,{color:"primary",onClick:v,size:"large",fullWidth:!0,className:"px-12",children:o.formatMessage(Tc.tryItNowButton)})})})]})]}):null}const Tc=be({studyAndLearnTitle:{id:"StudyandLearnNux.title",defaultMessage:"Study and Learn"},studyAndLearnPill:{id:"StudyandLearnNux.studyAndLearnBubble",defaultMessage:"Study and learn"},createImagePill:{id:"StudyandLearnNux.createImagePill",defaultMessage:"Create image"},webSearchPill:{id:"StudyandLearnNux.webSearchPill",defaultMessage:"Web search"},quizQuestion:{id:"StudyandLearnNux.quizQuestion",defaultMessage:'How do you say "bathroom" in Spanish?'},quizAnswer1:{id:"StudyandLearnNux.quizAnswer1",defaultMessage:"bao"},quizAnswer2:{id:"StudyandLearnNux.quizAnswer2",defaultMessage:"calle"},quizAnswer3:{id:"StudyandLearnNux.quizAnswer3",defaultMessage:"cocina"},quizNUXTitle:{id:"StudyandLearnNux.quizNUXTitle",defaultMessage:"Quiz yourself with ChatGPT"},quizNUXDescription:{id:"StudyandLearnNux.quizNUXDescription",defaultMessage:"Quickly create quizzes and flashcards on any topic so you feel exam-ready"},tryItNowButton:{id:"StudyandLearnNux.tryItNowButton",defaultMessage:"Try it now"},notNowButton:{id:"StudyandLearnNux.notNowButton",defaultMessage:"Not now"}}),Px=R(()=>P(()=>import("./gducbep8qsfkuz9f.js"),__vite__mapDeps([51,1])),{loading:t=>O(t)}),Kj=R(()=>P(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([52,1])),{loading:t=>O(t)}),Xae=R(()=>P(()=>import("./fqy57c2iy2xliuz9.js"),__vite__mapDeps([53,1])),{loading:t=>O(t)}),ere=R(()=>P(()=>import("./foakg84w5wpjdwdx.js"),__vite__mapDeps([54,1])),{loading:t=>O(t)}),Sb="tatertot_create_flashcards_or_quiz",tre="https://persistent.oaistatic.com/chatgpt/NUX_StudyMode_16x9.png";function nre({onClose:t}){const e=V(),n=tre,[s,o]=_.useState(!1);_.useEffect(()=>{s||(st(e,Fe.hasSeenTatertotNux),o(!0),Ie.count(je.TATERTOT,"tatertot_nux_modal_shown"),B.logEventWithStatsig("Tatertot Nux Modal Shown","chatgpt_tatertot_nux_modal_shown"))},[e,s]);const[a,i]=_.useState(!1);_.useEffect(()=>{const x=new Image;x.src=n,x.onload=()=>i(!0)},[n]);const[l,c]=_.useState(!1),[d,u]=_.useState(!1);_.useEffect(()=>{if(!a)return;const x=setTimeout(()=>{c(!0)},200),v=setTimeout(()=>{u(!0)},300);return()=>{clearTimeout(x),clearTimeout(v)}},[a]);const f=ot(),[m,p]=_.useState(!1),g=ne(),h=()=>{m||(p(!0),t(),f({pathname:"/",search:"?hints=".concat(y3)}),Ie.count(je.TATERTOT,"tatertot_nux_modal_show_me_clicked"),B.logEventWithStatsig("Tatertot Nux Modal Show Me Clicked","chatgpt_tatertot_nux_modal_show_me_clicked"))};return a?r.jsxs(Mt,{testId:"modal-tatertot-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),Ie.count(je.TATERTOT,"tatertot_nux_modal_closed"),B.logEventWithStatsig("Tatertot Nux Modal Closed","chatgpt_tatertot_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(gn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:n,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(l?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"StudyandLearnNux.firstBubble",defaultMessage:"Hey Chat!"})}),r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(d?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"StudyandLearnNux.secondBubble",defaultMessage:"Help me with my homework"})})]})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-6 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-center text-[20px] leading-7 font-medium",children:g.formatMessage(Tc.studyAndLearnTitle)}),r.jsx("div",{className:"text-token-text-secondary -mt-4 w-full text-center text-[17px]",children:r.jsx(j,{id:"StudyandLearnNux.subtitle",defaultMessage:"Your step-by-step guide to learning anything"})}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Kj,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.featureTitle1",defaultMessage:"Get homework help"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.featureDescription1",defaultMessage:"Break down complex problems with approachable, guided explanations."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Px,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.featureTitle2",defaultMessage:"Prep for tests"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.featureDescription2",defaultMessage:"Test your knowledge with quizzes on any topic."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Xae,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.featureTitle3",defaultMessage:"Explore new subjects"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.featureDescription3",defaultMessage:"Go deep on any topic and ask any question."})})]})]}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4",children:r.jsx(_e,{color:"primary",onClick:h,size:"large",fullWidth:!0,className:"px-6",children:g.formatMessage(Tc.tryItNowButton)})})})]})]}):null}function Qj(t,e){const n=[{type:Je.Autocomplete,id:"tatertot_homework_autocomplete",title:t.formatMessage({id:"8ZR8F6",defaultMessage:"Help me with my homework"}),prompt:t.formatMessage({id:"3Cdh/P",defaultMessage:"Help me with my homework"}),icon:r.jsx(Kj,{className:"h-full w-full"}),body:"",theme:Sn.Tatertot},{type:Je.Autocomplete,id:"tatertot_explain_topic",title:t.formatMessage({id:"eOU1s2",defaultMessage:"Explain a topic to me"}),prompt:t.formatMessage({id:"/SVEgw",defaultMessage:"Explain a topic to me"}),icon:r.jsx(ere,{className:"h-full w-full"}),body:"",theme:Sn.Tatertot}];return e?n.push({type:Je.Autocomplete,id:Sb,title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"bNSdL3",defaultMessage:"Create a practice quiz with quizgpt"}),icon:r.jsx(Px,{className:"h-full w-full"}),body:"",theme:Sn.Tatertot}):n.push({type:Je.Autocomplete,id:"tatertot_create_quiz",title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"MSsW2T",defaultMessage:"Create a practice quiz"}),icon:r.jsx(Px,{className:"h-full w-full"}),body:"",theme:Sn.Tatertot}),n}const sre=Object.freeze(Object.defineProperty({__proto__:null,TATERTOT_CREATE_QUIZ_PROMPT_STARTER_ID:Sb,TatertotNuxModal:nre,getTatertotStaticPromptStarters:Qj},Symbol.toStringTag,{value:"Module"})),ore="https://persistent.oaistatic.com/chatgpt/nux-quiz.jpg",oqe=()=>{const{eligible:t,isLoading:e}=dt(Fe.hasSeenTatertotQuizNux),n=V();return!ye(n,"550187082")||!x3(n)?"hide":e?"loading":t?"show":"hide"};function aqe({onClose:t}){const e=V(),n=ae(()=>Vs(e)),s=ore,o=ne(),a=tt(e),l=Qj(o,a).find(x=>x.id===Sb),c=_.useRef(!1),[d,u]=_.useState(!1);_.useEffect(()=>{const x=new Image;x.src=s,x.onload=()=>u(!0)},[s]),_.useEffect(()=>{!d||c.current||(c.current=!0,Ie.count(je.TATERTOT,"tatertot_quiz_nux_modal_shown"),B.logEventWithStatsig("Tatertot Quiz Nux Modal Shown","chatgpt_tatertot_quiz_nux_modal_shown"),B.logUpsellOrModalEvent(un,{eventId:"tatertot_quiz_nux_modal_shown",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL}))},[d]);const f=ot();_.useMemo(()=>n?Object.fromEntries(n.map(x=>[x.systemHint,x])):{},[n]);const[m,p]=_.useState(!1),g=_.useCallback(()=>{st(e,Fe.hasSeenTatertotQuizNux),t(),Ie.count(je.TATERTOT,"tatertot_quiz_nux_modal_closed"),B.logEventWithStatsig("Tatertot Quiz Nux Modal Closed","chatgpt_tatertot_quiz_nux_modal_closed")},[e,t]),h=_.useCallback(()=>{m||(p(!0),st(e,Fe.hasSeenTatertotQuizNux),t(),f({pathname:"/",search:"?hints=".concat(y3,"&q=").concat(l==null?void 0:l.prompt)}),Ie.count(je.TATERTOT,"tatertot_quiz_nux_modal_show_me_clicked"),B.logEventWithStatsig("Tatertot Quiz Nux Modal Show Me Clicked","chatgpt_tatertot_quiz_nux_modal_show_me_clicked"))},[e,f,t,l==null?void 0:l.prompt,m]);return d?r.jsxs(Mt,{testId:"modal-tatertot-quiz-nux",isOpen:!0,noPadding:!0,onClose:g,showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(gn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:g})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[232px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-start justify-center",children:r.jsx("div",{className:"relative mx-auto w-full",children:r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex h-[200px] max-w-[172px] -translate-x-1/2 translate-y-60 flex-col items-start justify-end rounded-xl bg-white p-4",children:r.jsx("div",{className:"flex h-full w-auto flex-col items-start justify-end",children:r.jsxs("div",{className:"flex h-full w-auto translate-y-2 flex-col items-start justify-end",children:[r.jsx("span",{className:"mb-5 flex items-center gap-4 font-serif text-xl text-[15px] leading-[1.5] font-medium text-black",children:r.jsx(r.Fragment,{children:o.formatMessage(Fa.quizQuestion)})}),r.jsx("div",{className:"mb-2 flex flex-col gap-2",children:[Fa.quizAnswer1,Fa.quizAnswer2,Fa.quizAnswer3].map((x,v)=>{const y=[Fa.quizOptionA,Fa.quizOptionB,Fa.quizOptionC];return r.jsx(Kn.Fragment,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("label",{className:"flex items-center gap-2 text-[11.5px] text-black",children:[r.jsx("span",{className:"inline-block rounded bg-gray-100 px-1.5 py-0.5 text-[9px] font-medium text-gray-700",children:r.jsx(j,w({},y[v]))}),o.formatMessage(x)]}),r.jsx("div",{className:"ms-6.5 mt-1 h-[0.5px] w-[calc(100%+1.5rem)] bg-gray-200"})]})},x.id||v)})})]})})})})})]}),r.jsxs("div",{className:"dark:bg-gray-750 relative z-30 flex flex-1 flex-col items-center gap-6 bg-white px-8 pt-8 pb-8",children:[r.jsx("div",{className:"flex w-80 items-center justify-center text-center text-4xl font-semibold",children:o.formatMessage(Fa.quizNUXTitle)}),r.jsx("div",{className:"flex w-full items-center justify-center text-[17px]",children:r.jsx("div",{className:"flex w-90 flex-col items-center",children:r.jsx("div",{className:"text-token-text-secondary text-center",children:o.formatMessage(Fa.quizNUXDescription)})})}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4 text-[17px]",children:r.jsx(_e,{color:"primary",onClick:h,size:"large",fullWidth:!0,className:"px-12",children:r.jsx(j,{id:"StudyandLearnNux.quizNuxButton",defaultMessage:"Try it"})})})})]})]}):null}const Fa=be({studyAndLearnTitle:{id:"StudyandLearnNux.title",defaultMessage:"Study and Learn"},studyAndLearnPill:{id:"StudyandLearnNux.studyAndLearnBubble",defaultMessage:"Study and learn"},createImagePill:{id:"StudyandLearnNux.createImagePill",defaultMessage:"Create image"},webSearchPill:{id:"StudyandLearnNux.webSearchPill",defaultMessage:"Web search"},quizQuestion:{id:"StudyandLearnNux.quizQuestion",defaultMessage:'How do you say "bathroom" in Spanish?'},quizAnswer1:{id:"StudyandLearnNux.quizAnswer1",defaultMessage:"bao"},quizAnswer2:{id:"StudyandLearnNux.quizAnswer2",defaultMessage:"calle"},quizAnswer3:{id:"StudyandLearnNux.quizAnswer3",defaultMessage:"cocina"},quizNUXTitle:{id:"StudyandLearnNux.quizNUXTitle",defaultMessage:"Quiz yourself with ChatGPT"},quizNUXDescription:{id:"StudyandLearnNux.quizNUXDescription",defaultMessage:"Quickly create quizzes and flashcards on any topic so you feel exam-ready"},quizOptionA:{id:"StudyandLearnNux.quizOptionA",defaultMessage:"A"},quizOptionB:{id:"StudyandLearnNux.quizOptionB",defaultMessage:"B"},quizOptionC:{id:"StudyandLearnNux.quizOptionC",defaultMessage:"C"},tryItNowButton:{id:"StudyandLearnNux.tryItNowButton",defaultMessage:"Try it now"},notNowButton:{id:"StudyandLearnNux.notNowButton",defaultMessage:"Not now"}}),Jj="has-dismissed-welcome-back-modal",rqe=()=>{"use forget";const t=G.c(18),e=V(),[n,s]=_.useState(are);let o;t[0]!==e?(o=ze(e,"3637408529").get("is_no_auth_welcome_back_modal_enabled",!1),t[0]=e,t[1]=o):o=t[1];const a=o,i=DT();let l;t[2]!==e?(l=tt(e),t[2]=e,t[3]=l):l=t[3];const c=!l;let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=Df(),t[4]=d):d=t[4];const u=d,f=_3();let m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{s(!0),sessionStorage.setItem(Jj,"true")},t[5]=m):m=t[5];const p=m;let g;if(t[6]!==e?(g=()=>OT(e),t[6]=e,t[7]=g):g=t[7],ae(g)){let y;return t[8]===Symbol.for("react.memo_cache_sentinel")?(y={isOpen:!1,onClose:null},t[8]=y):y=t[8],y}let x;t[9]!==e||t[10]!==n||t[11]!==f||t[12]!==a||t[13]!==i||t[14]!==c?(x=c&&a&&!n&&u&&!i&&!f&&(iH()||!lH(e)),t[9]=e,t[10]=n,t[11]=f,t[12]=a,t[13]=i,t[14]=c,t[15]=x):x=t[15];let v;return t[16]!==x?(v={isOpen:x,onClose:p},t[16]=x,t[17]=v):v=t[17],v};function are(){return sessionStorage.getItem(Jj)!=null}const Bs=R(()=>P(()=>import("./l92l17q6p2b89xpa.js").then(t=>t.F),__vite__mapDeps([55,1,56,10,11,13,14,15,16,17,18,19,20,57,21,22,23,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,32,86,87,88,89,90,12,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,45,113,114,115,116,117,118,119,120,121])).then(t=>t.FormattedText));function rre(){return _.use(Bs.prefetch()),null}function Xj({workspaceId:t,enabled:e=!0}){return rt({queryKey:["workspace-policy",t],queryFn:t?()=>ge.safeGet("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}}}):Qy,enabled:!!t&&e})}function iqe(t){const e=jt();return zt({mutationFn:n=>ge.safePost("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}},requestBody:{workspace_policy:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace-policy",t]})}})}const ire=Fe.hasSeenWorkSpacePolicy;function lre(t){"use forget";const e=G.c(9),{workspaceId:n}=t,s=jt();let o;e[0]!==n?(o=()=>ge.safePost("/accounts/{account_id}/workspace_policy/acknowledge",{parameters:{path:{account_id:n}}}),e[0]=n,e[1]=o):o=e[1];let a,i;e[2]!==s?(a=()=>{s.setQueryData($u().queryKey,cre)},i=()=>{s.invalidateQueries($u())},e[2]=s,e[3]=a,e[4]=i):(a=e[3],i=e[4]);let l;return e[5]!==o||e[6]!==a||e[7]!==i?(l={mutationFn:o,onMutate:a,onSuccess:i},e[5]=o,e[6]=a,e[7]=i,e[8]=l):l=e[8],zt(l)}function cre(t){return t&&U(w({},t),{eligible_announcements:t.eligible_announcements.filter(dre)})}function dre(t){return t!==ire}const eN=t=>{let e=0;if(!t)return"";for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e.toString()},ure=720*60*60*1e3,wb=Be(null),fre=(t,e,n)=>{const s={hash:n,expiresAt:Date.now()+ure};gt.setItem(Ue.WorkspacePolicyViewed,JSON.stringify(s),{userId:e,workspaceId:t}),wb.set(n)},mre=(t,e)=>{const n=gt.getItem(Ue.WorkspacePolicyViewed,{userId:e,workspaceId:t});if(!n)return null;try{const s=JSON.parse(n);if(s.expiresAt>Date.now())return s.hash}catch(s){}return null},lqe=()=>{"use forget";var b,C,S;const t=G.c(15),e=qo(wa.businessWorkspaceId),n=(b=cn())==null?void 0:b.id,{data:s,isLoading:o}=Th(e!=null?e:void 0),a=!!((C=s==null?void 0:s.beta_settings)!=null&&C.workspace_policy),i=e!=null?e:void 0;let l;t[0]!==a||t[1]!==i?(l={workspaceId:i,enabled:a},t[0]=a,t[1]=i,t[2]=l):l=t[2];const{data:c,isLoading:d}=Xj(l),u=o||d,f=(S=c==null?void 0:c.workspace_policy)!=null?S:"";let m;t[3]!==f?(m=eN(f),t[3]=f,t[4]=m):m=t[4];const p=m,g=ae(pre);let h,x;if(t[5]!==n||t[6]!==e?(h=()=>{if(e&&n){const k=mre(e,n);wb.set(k)}},x=[e,n],t[5]=n,t[6]=e,t[7]=h,t[8]=x):(h=t[7],x=t[8]),_.useEffect(h,x),!e){let k;return t[9]===Symbol.for("react.memo_cache_sentinel")?(k={isLoading:!1,isOpen:!1},t[9]=k):k=t[9],k}if(u||!n){let k;return t[10]===Symbol.for("react.memo_cache_sentinel")?(k={isLoading:!0,isOpen:!1},t[10]=k):k=t[10],k}if(!a||!c||!f){let k;return t[11]===Symbol.for("react.memo_cache_sentinel")?(k={isLoading:!1,isOpen:!1},t[11]=k):k=t[11],k}if((s==null?void 0:s.beta_settings_str.workspace_policy_cadence)==="every_login"){let k;return t[12]===Symbol.for("react.memo_cache_sentinel")?(k={isLoading:!1,isOpen:!0},t[12]=k):k=t[12],k}const v=p!==g;let y;return t[13]!==v?(y={isLoading:!1,isOpen:v},t[13]=v,t[14]=y):y=t[14],y},cqe=({onClose:t})=>{var m,p,g;const e=ne(),n=qo(wa.businessWorkspaceId),s=(m=cn())==null?void 0:m.id,{mutate:o}=lre({workspaceId:n!=null?n:""}),{data:a,isLoading:i}=Xj({workspaceId:n!=null?n:void 0}),l=(p=a==null?void 0:a.workspace_policy)!=null?p:"",c=qo(wa.isBusinessWorkspace),d=qo(h=>h.currentWorkspace);if(!ax)return null;const u=e.formatMessage(NC.workspaceWelcome,{workspaceName:d==null?void 0:d.name}),f=()=>{t(),o(),n&&s&&fre(n,s,eN(l))};return r.jsx(Mt,{testId:"modal-workspace-policy",isOpen:!0,onClose:f,type:"success",icon:c?r.jsx(ax,{size:"small",src:d==null?void 0:d.profilePictureUrl}):void 0,title:u,size:"xlarge",shouldIgnoreClickOutside:!0,className:"h-[50vh]! min-h-[500px]!",children:i?r.jsx(_s,{}):r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsx(Bs,{size:"small",className:"px-4 md:px-6",children:(g=a==null?void 0:a.workspace_policy)!=null?g:""}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(v3,{title:e.formatMessage(NC.gettingStartedButton),onClick:f,color:"primary"})})]})})},NC=be({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},gettingStartedButton:{id:"BlockingInitialModals.acknowledgeButton",defaultMessage:"Acknowledge"}});function pre(){return wb()}const gre=R(()=>P(()=>import("./nz44s7ebe5b6pll5.js"),__vite__mapDeps([30,1])),{loading:t=>O(t)}),tN=R(()=>P(()=>import("./ailj2wmeuzip7d2v.js"),__vite__mapDeps([122,1])),{loading:t=>O(t)}),nN=Fe.Onboarding,dqe=()=>{const{eligible:t,isLoading:e}=dt(nN);return{hasSeenOnboardingDate:e?null:!t}},uqe=()=>{const{eligible:t,isLoading:e}=dt(Fe.TeamOwnerOnboarding);return{hasSeenTeamOwnerOnboardingDate:e?null:!t}};function fqe({onClose:t,scope:e}){const n=V(),s=_.useCallback(()=>{t(!0),st(n,nN)},[n,t]);return e===XI.Personal?r.jsx(_re,{onSubmit:s}):r.jsx(xre,{onSubmit:()=>{t(!0)}})}const Uc=({icon:t,title:e,body:n})=>r.jsxs("div",{className:"flex flex-col gap-2 md:w-1/3",children:[r.jsxs("div",{className:"flex flex-row items-start gap-2",children:[r.jsx("div",{className:"mt-1",children:t}),r.jsx("div",{className:"text-token-text-primary font-semibold",children:e})]}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:n})]}),hre="https://help.openai.com/en/articles/7039943-data-usage-for-consumer-services-faq",_re=({onSubmit:t})=>{const e=ne();return r.jsxs("div",{className:"flex flex-col gap-3 p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[r.jsx(Uc,{icon:r.jsx(tN,{isSolid:!0,className:"icon text-green-600"}),title:r.jsx(j,w({},Ds.askAway)),body:r.jsx(j,w({},Ds.askAwayBody))}),r.jsx(Uc,{icon:r.jsx(cH,{className:"icon text-brand-purple"}),title:r.jsx(j,w({},Ds.warning)),body:r.jsx(j,U(w({},Ds.warningBody),{values:{article:n=>r.jsx("a",{href:hre,target:"_blank",className:"underline",rel:"noopener noreferrer",children:n})}}))}),r.jsx(Uc,{icon:r.jsx(FT,{className:"icon mt-0.5 text-orange-300"}),title:r.jsx(j,w({},Ds.accuracy)),body:r.jsx(j,w({},Ds.accuracyBody))})]}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(v3,{title:e.formatMessage(Ds.gettingStartedButton),onClick:t,color:"primary","data-testid":"getting-started-button"})})]})},xre=({onSubmit:t})=>{const e=ne();return r.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[r.jsx(Uc,{icon:r.jsx(gre,{className:"icon text-brand-purple"}),title:r.jsx(j,w({},Ds.workUse)),body:r.jsx(j,w({},Ds.workUseBody))}),r.jsx(Uc,{icon:r.jsx(tN,{className:"icon text-green-600"}),title:r.jsx(j,w({},Ds.askAway)),body:r.jsx(j,w({},Ds.askAwayBody))}),r.jsx(Uc,{icon:r.jsx(FT,{className:"icon mt-0.5 text-orange-300"}),title:r.jsx(j,w({},Ds.accuracy)),body:r.jsx(j,w({},Ds.accuracyBody))})]}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(v3,{title:e.formatMessage(Ds.gettingStartedButton),onClick:t,color:"primary"})})]})},Ds=be({askAway:{id:"onboarding.askAway",defaultMessage:"Ask away"},askAwayBody:{id:"onboarding.askAwayBody",defaultMessage:"ChatGPT can answer questions, help you learn, write code, brainstorm together, and much more."},warning:{id:"onboarding.warning",defaultMessage:"Dont share sensitive info"},warningBody:{id:"onboarding.warningBody",defaultMessage:"Chat history may be reviewed or used to improve our services. Learn more about your choices in our <article>Help Center</article>."},accuracy:{id:"onboarding.accuracy",defaultMessage:"Check your facts"},accuracyBody:{id:"onboarding.accuracyBody",defaultMessage:"While we have safeguards, ChatGPT may give you inaccurate information. Its not intended to give advice."},gettingStartedButton:{id:"onboarding.gettingStartedButton",defaultMessage:"Okay, lets go"},workspaceWelcome:{id:"onboarding.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} Workspace"},workspaceWelcomeNoName:{id:"onboarding.workspaceWelcomeNoName",defaultMessage:"Welcome to the your Workspace"},workspaceWelcomeBody:{id:"onboarding.workspaceWelcomeBody",defaultMessage:"Here you can use our latest models, with more capabilities, and fewer limits."},workUse:{id:"onboarding.workUse",defaultMessage:"Made for use at work"},educationUse:{id:"onboarding.educationUse",defaultMessage:"Made for use in education"},workUseBody:{id:"onboarding.workUseBody",defaultMessage:"By default, chats in this workspace are not used to train our AI models."}}),yre=R(()=>P(()=>import("./isqpc56i7wx8h49k.js"),__vite__mapDeps([49,1])),{loading:t=>O(t)}),vre=R(()=>P(()=>import("./g842wk722jj3m7vq.js"),__vite__mapDeps([123,1])),{loading:t=>O(t)}),bre=R(()=>P(()=>import("./foakg84w5wpjdwdx.js"),__vite__mapDeps([54,1])),{loading:t=>O(t)}),sN=Fe.MemoryOnboarding;function mqe(){const t=Vd(),{eligible:e,isLoading:n}=dt(sN);return{eligible:e&&t,isLoading:n}}function Q_({icon:t,title:e,description:n}){return r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"text-token-text-secondary mt-1",children:t}),r.jsxs("div",{className:"ms-4",children:[r.jsx("div",{className:"text-lg font-semibold",children:e}),r.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:n})]})]})}function pqe({onClose:t}){const e=V(),n=Cre(e),s=Tl(),o=Cb(),a=(o==null?void 0:o[Lt.Sunshine])===!0,i=ne(),l=_.useCallback(()=>{st(e,sN),t()},[e,t]);return _.useEffect(()=>{B.logUpsellOrModalEvent(un,{eventId:"memory_onboarding_modal_shown",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]),r.jsx(Mt,{testId:"modal-memory-onboarding",isOpen:!0,onClose:rs,size:"custom",className:"max-w-xl",type:"success",title:i.formatMessage(ia.title),secondaryButton:n?r.jsx(Ns.Button,{onClick:async()=>{try{await s.mutateAsync({setting:Lt.Sunshine,value:!1}),l()}catch(c){}},title:i.formatMessage(ia.notNow),color:"secondary",disabled:a}):null,primaryButton:n?r.jsx(Ns.Button,{onClick:async()=>{try{await s.mutateAsync({setting:Lt.Sunshine,value:!0}),l()}catch(c){}},title:i.formatMessage(ia.enable),color:"primary",disabled:a}):r.jsx(Ns.Button,{onClick:l,title:i.formatMessage(ia.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(Q_,{icon:r.jsx(bre,{}),title:i.formatMessage(ia.bulletTitle1),description:i.formatMessage(ia.bulletDescription1)}),r.jsx(Q_,{icon:r.jsx(yre,{}),title:i.formatMessage(ia.bulletTitle2),description:r.jsx(j,w({},ia.bulletDescription2))}),r.jsx(Q_,{icon:r.jsx(vre,{}),title:i.formatMessage(ia.bulletTitle3),description:r.jsx(j,U(w({},ia.bulletDescription3),{values:{link1:c=>r.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:c}),link2:c=>r.jsx(Eo,{to:Nl(Rn.Personalization),className:"underline",children:c}),link3:c=>r.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq#h_b8745c1ae1",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:c})}}))})]})})}function Cre(t){return ye(t,"1542198993")}const ia=be({title:{id:"MemoryOnboardingModal.title.1",defaultMessage:"ChatGPT now has memory"},bulletTitle1:{id:"MemoryOnboardingModal.bulletTitle1",defaultMessage:"Keep the conversation going"},bulletDescription1:{id:"MemoryOnboardingModal.bulletDescription1.1",defaultMessage:"ChatGPT will automatically remember useful details and preferences you share in all your conversations, carrying them between chats."},bulletTitle2:{id:"MemoryOnboardingModal.bulletTitle2.1",defaultMessage:"A more personalized assistant"},bulletDescription2:{id:"MemoryOnboardingModal.bulletDescription2.2",defaultMessage:"Memories and your chat history are used to give you more relevant responses. Want to change what ChatGPT remembers? Just ask."},bulletTitle3:{id:"MemoryOnboardingModal.bulletTitle3",defaultMessage:"You're in control"},bulletDescription3:{id:"MemoryOnboardingModal.bulletDescription3.2",defaultMessage:"<link1>Learn more</link1> about how memory works. You can turn off memory at any time in <link2>settings</link2>. Memories may be used to <link3>train our models</link3> if you have model training enabled."},continue:{id:"MemoryOnboardingModal.continue",defaultMessage:"Continue"},notNow:{id:"MemoryOnboardingModal.notNow",defaultMessage:"Not now"},enable:{id:"MemoryOnboardingModal.enable",defaultMessage:"Enable"}});function nm(t){"use forget";const e=G.c(5),n=V();let s;e[0]!==t||e[1]!==n?(s=yt(n,t),e[0]=t,e[1]=n,e[2]=s):s=e[2];const o=s;let a;return e[3]!==o?(a=i=>Ko(w({conversation:o},i)),e[3]=o,e[4]=a):a=e[4],a}const Ka=sn(()=>Be(null)),ol=sn(()=>Be(null));function oN(t){var o;const e=Ps(t,"1384700061"),n=e==null?void 0:e.get("variant");return n&&(o={control:"control",new:"new",mix:"mix"}[n])!=null?o:null}function aN(t){var o;const e=Ps(t,"107823582"),n=e==null?void 0:e.get("variant");return n&&(o={control:"control",new:"new",mix:"mix"}[n])!=null?o:null}function Sre(t,e){const n=et(t);return n!=null&&n.isK12()?"k12":e!=null&&e.isHipaaCompliantWorkspace?"health":n!=null&&n.isEnterprise()?oN(t):n!=null&&n.isSelfServeBusiness()?aN(t):null}function wre(){"use forget";var h;const t=G.c(20),e=V(),{eligible:n,isLoading:s}=dt(Fe.NewOnboardingFlow);let o;t[0]!==e?(o=()=>Ka(e)===!0,t[0]=e,t[1]=o):o=t[1];const a=ae(o),i=rN();let l;t[2]!==e?(l=(h=et(e))==null?void 0:h.isFree(),t[2]=e,t[3]=l):l=t[3];const c=l;let d;t[4]!==e?(d=()=>st(e,Fe.NewOnboardingFlow),t[4]=e,t[5]=d):d=t[5];const u=d;let f,m;t[6]!==e||t[7]!==n||t[8]!==i||t[9]!==c||t[10]!==s?(f=()=>{if(n&&!s&&!i&&c){Ka.set(e,kre),ol.set(e,!1);const x=ze(e,"997657492",{disableExposureLog:!0}).get("onboarding-mode",void 0)==="personality";ZI.set(e,x)}},m=[e,n,s,i,c],t[6]=e,t[7]=n,t[8]=i,t[9]=c,t[10]=s,t[11]=f,t[12]=m):(f=t[11],m=t[12]),_.useEffect(f,m);let p;t[13]!==e?(p=()=>Ka.set(e,!1),t[13]=e,t[14]=p):p=t[14];let g;return t[15]!==s||t[16]!==a||t[17]!==u||t[18]!==p?(g={isOpen:a,isLoading:s,closeModal:p,markAsViewed:u},t[15]=s,t[16]=a,t[17]=u,t[18]=p,t[19]=g):g=t[19],g}function kre(t){return t!=null?t:!0}function Ere(){"use forget";var S,k;const t=G.c(25),e=V(),n=et(e),s=Cn(),o=n==null?void 0:n.isWorkspacePlan(),a=n==null?void 0:n.isEnterprisey(),i=n==null?void 0:n.isSelfServeBusiness(),l=(S=n==null?void 0:n.isK12())!=null?S:!1,c=(k=s==null?void 0:s.isHipaaCompliantWorkspace)!=null?k:!1;let d;t[0]!==s||t[1]!==e?(d=Sre(e,s),t[0]=s,t[1]=e,t[2]=d):d=t[2];const u=d,{eligible:f,isLoading:m}=dt(Fe.Onboarding),p=rN();let g;t[3]!==e?(g=()=>Ka(e)===!0,t[3]=e,t[4]=g):g=t[4];const h=ae(g);let x,v;t[5]!==e||t[6]!==f||t[7]!==p||t[8]!==a||t[9]!==c||t[10]!==l||t[11]!==m||t[12]!==i||t[13]!==o?(x=()=>{if(!(!o||!f||m||p))if(l)Ka.set(e,Ire),ol.set(e,!1);else if(c){const E=Ps(e,"217573384");if(E==null?void 0:E.get("enabled")){Ka.set(e,Are),ol.set(e,!1);return}}else a?oN(e)==="new"&&(Ka.set(e,Mre),ol.set(e,!1)):i&&aN(e)==="new"&&(Ka.set(e,Tre),ol.set(e,!1))},v=[e,o,l,f,m,p,a,i,c],t[5]=e,t[6]=f,t[7]=p,t[8]=a,t[9]=c,t[10]=l,t[11]=m,t[12]=i,t[13]=o,t[14]=x,t[15]=v):(x=t[14],v=t[15]),_.useEffect(x,v);let y,b;t[16]!==e?(y=()=>Ka.set(e,!1),b=()=>st(e,Fe.Onboarding),t[16]=e,t[17]=y,t[18]=b):(y=t[17],b=t[18]);let C;return t[19]!==m||t[20]!==h||t[21]!==y||t[22]!==b||t[23]!==u?(C={isOpen:h,isLoading:m,closeModal:y,markAsViewed:b,workspaceOnboardingVariant:u},t[19]=m,t[20]=h,t[21]=y,t[22]=b,t[23]=u,t[24]=C):C=t[24],C}function Tre(t){return t!=null?t:!0}function Mre(t){return t!=null?t:!0}function Are(t){return t!=null?t:!0}function Ire(t){return t!=null?t:!0}function jre(){"use forget";const t=G.c(6),e=V();let n;if(t[0]!==e){const l=et(e);n=l==null?void 0:l.isWorkspacePlan(),t[0]=e,t[1]=n}else n=t[1];const s=n,o=wre(),a=Ere();let i;return t[2]!==s||t[3]!==o||t[4]!==a?(i=s?U(w({},a),{isWorkspaceUser:!0}):U(w({},o),{isWorkspaceUser:!1,workspaceOnboardingVariant:void 0}),t[2]=s,t[3]=o,t[4]=a,t[5]=i):i=t[5],i}function rN(){"use forget";const t=G.c(2),[e]=Us();let n;return t[0]!==e?(n=e.has("prompt"),t[0]=e,t[1]=n):n=t[1],n}const dd=be({hi:{id:"new_user_onboarding.hi",defaultMessage:"Hi"},hiThere:{id:"new_user_onboarding.hi_there",defaultMessage:"Hi there"},tryUploadingAFile:{defaultMessage:"Try uploading a file",id:"chatgpt.new-onboarding.try-uploading-a-file"},uploadFileExample:{defaultMessage:"ChatGPT can summarize and analyze your files or images.",id:"chatgpt.new-onboarding.upload-file-exp"},school:{defaultMessage:"School",id:"chatgpt.new-onboarding.school"},schoolPrompt:{defaultMessage:"Im trying to learn and do better in school.",id:"chatgpt.new-onboarding.school-prompt"},work:{defaultMessage:"Work",id:"chatgpt.new-onboarding.work"},workPrompt:{defaultMessage:"I'm here to learn and grow in my work.",id:"chatgpt.new-onboarding.work-prompt"},personalTasks:{defaultMessage:"Personal tasks",id:"chatgpt.new-onboarding.personal-tasks"},personalTasksPrompt:{defaultMessage:"I'm here for my personal tasks",id:"chatgpt.new-onboarding.personal-tasks-prompt"},funAndEntertainment:{defaultMessage:"Fun and entertainment",id:"chatgpt.new-onboarding.fun-and-entertainment"},funAndEntertainmentPrompt:{defaultMessage:"I'm here to explore fun ideas and relax.",id:"chatgpt.new-onboarding.fun-and-entertainment-prompt"},other:{defaultMessage:"Other",id:"chatgpt.new-onboarding.other"},justCurious:{defaultMessage:"Just curious",id:"chatgpt.new-onboarding.just-curious"},justCuriousPrompt:{defaultMessage:"I'm just curious, exploring what you can do.",id:"chatgpt.new-onboarding.just-curious-prompt"},tryAnExample:{defaultMessage:"Try an example below or send any message in the message box below.",id:"chatgpt.new-onboarding.try-an-example"}});function Nre(){"use forget";const t=G.c(5),e=V(),{eligible:n,isLoading:s}=dt(Fe.NewOnboardingConvo);let o;t[0]!==e?(o=()=>st(e,Fe.NewOnboardingConvo),t[0]=e,t[1]=o):o=t[1];const a=o,i=n&&!s;let l;return t[2]!==a||t[3]!==i?(l={isEligible:i,markAsViewed:a},t[2]=a,t[3]=i,t[4]=l):l=t[4],l}function gqe(t){"use forget";const e=G.c(20),n=V();let s;e[0]!==n?(s=BT(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=td(Pre),{isEligible:i,markAsViewed:l}=Nre();let c;e[2]!==t?(c={clientThreadId:t},e[2]=t,e[3]=c):c=e[3];const d=kb(c);let u;e[4]!==n?(u=ze(n,"109457"),e[4]=n,e[5]=u):u=e[5];const f=u,m=ne(),p=DT(),g=Hn();let h;e[6]!==p||e[7]!==g?(h=p||Ase(g),e[6]=p,e[7]=g,e[8]=h):h=e[8];const x=h;let v,y;e[9]!==t||e[10]!==d||e[11]!==x||e[12]!==m||e[13]!==o||e[14]!==i||e[15]!==f||e[16]!==l||e[17]!==a?(v=()=>{i&&!a&&(m.locale===dH||m.messages!==uH)&&!o&&!x&&f.get("onboarding_style","")==="CONVO"&&(On.setOnboardingConvoState({onboardingConvoClientThreadId:t}),l(),d({eventSource:"url",stepPrompt:m.formatMessage(dd.hi),messageMetadata:{is_visually_hidden_from_conversation:!0},authorMetadata:{real_author:r3.Onboarding}}),Ye.logEvent("chatgpt_convo_onboarding_started"))},y=[i,l,d,a,m,m.locale,m.messages,t,f,o,x],e[9]=t,e[10]=d,e[11]=x,e[12]=m,e[13]=o,e[14]=i,e[15]=f,e[16]=l,e[17]=a,e[18]=v,e[19]=y):(v=e[18],y=e[19]),_.useEffect(v,y)}function Pre(t){var e;return(e=t.onboardingConvoState)!=null?e:void 0}const kb=t=>{"use forget";const e=G.c(2),{clientThreadId:n}=t,s=nm(n);let o;return e[0]!==s?(o=a=>{var f;const u=a,{stepPrompt:i,messageMetadata:l,authorMetadata:c}=u,d=ke(u,["stepPrompt","messageMetadata","authorMetadata"]);s(U(w({},d),{promptMessage:ls(i,l!=null?l:void 0,c!=null?c:void 0),completionMetadata:{isOnboardingConversation:!0,conversationMode:{kind:wt.PrimaryAssistant},systemHints:(f=l==null?void 0:l.onboarding)==null?void 0:f.system_hints},skipNotification:!0}))},e[0]=s,e[1]=o):o=e[1],o},hqe=t=>{"use forget";const e=G.c(5),{clientThreadId:n}=t,s=V(),o=nm(n),{open:a}=lN();let i;return e[0]!==n||e[1]!==s||e[2]!==a||e[3]!==o?(i=l=>{const{suggestedPrompt:c,index:d,isOnboarding:u}=l;u&&(st(s,Fe.Onboarding),a()),o({promptMessage:ls(c.prompt,{is_starter_prompt:!0,suggestion_type:Je.Starter,starter_prompt_id:c.id}),eventSource:"mouse",completionMetadata:{conversationMode:{kind:wt.PrimaryAssistant}},skipNotification:!0}),n1(c,d,n)},e[0]=n,e[1]=s,e[2]=a,e[3]=o,e[4]=i):i=e[4],i};function iN(t){"use forget";var u;const e=G.c(9),n=V(),s=Ve(t,Rre),{eligible:o,isLoading:a}=dt(Fe.hasSeenFilePickerNuxTooltip);let i;e[0]!==n?(i=()=>st(n,Fe.hasSeenFilePickerNuxTooltip),e[0]=n,e[1]=i):i=e[1];const l=i;let c;e[2]!==o||e[3]!==a||e[4]!==(s==null?void 0:s.triggered_tools)?(c=((u=s==null?void 0:s.triggered_tools)==null?void 0:u.includes("file_upload"))&&o&&!a,e[2]=o,e[3]=a,e[4]=s==null?void 0:s.triggered_tools,e[5]=c):c=e[5];let d;return e[6]!==l||e[7]!==c?(d={isEligible:c,markAsViewed:l},e[6]=l,e[7]=c,e[8]=d):d=e[8],d}function Rre(t){var e,n;return(n=(e=he.findNode(t,Lre))==null?void 0:e.message.metadata)==null?void 0:n.onboarding}function Lre(t){return t.message.author.role===Ke.User}function _qe(t){return ze(t,"109457",{disableExposureLog:!0}).get("onboarding_show_followups",!1)}const J_=sn(()=>Be(null)),rp=sn(()=>Be({isOpen:null,isUserTriggered:!1}));function xqe(){"use forget";var C;const t=G.c(25),e=V(),{eligible:n,isLoading:s}=dt(Fe.NewPromptOnboardingFlow);let o;t[0]!==e?(o=()=>rp(e),t[0]=e,t[1]=o):o=t[1];const{isOpen:a,isUserTriggered:i}=ae(o),l=V();let c;t[2]!==l?(c=ze(l,"109457",{disableExposureLog:!0}).get("prompt_onboarding_style","list"),t[2]=l,t[3]=c):c=t[3];const d=c;let u;t[4]!==e?(u=(C=et(e))==null?void 0:C.isFree(),t[4]=e,t[5]=u):u=t[5];const f=u;let m;t[6]!==e?(m=()=>st(e,Fe.NewPromptOnboardingFlow),t[6]=e,t[7]=m):m=t[7];const p=m;let g,h;t[8]!==e||t[9]!==n||t[10]!==f||t[11]!==s?(g=()=>{n&&!s&&f&&rp.set(e,Dre)},h=[e,n,s,f],t[8]=e,t[9]=n,t[10]=f,t[11]=s,t[12]=g,t[13]=h):(g=t[12],h=t[13]),_.useEffect(g,h);const x=!!a;let v,y;t[14]!==e?(v=()=>rp.set(e,{isOpen:!0,isUserTriggered:!0}),y=()=>rp.set(e,Ore),t[14]=e,t[15]=v,t[16]=y):(v=t[15],y=t[16]);let b;return t[17]!==s||t[18]!==i||t[19]!==p||t[20]!==d||t[21]!==x||t[22]!==v||t[23]!==y?(b={isOpen:x,isUserTriggered:i,isLoading:s,onboardingStyle:d,reopenModal:v,closeModal:y,markAsViewed:p},t[17]=s,t[18]=i,t[19]=p,t[20]=d,t[21]=x,t[22]=v,t[23]=y,t[24]=b):b=t[24],b}function Ore(t){return U(w({},t),{isOpen:!1})}function Dre(t){var e;return U(w({},t),{isOpen:(e=t.isOpen)!=null?e:!0})}function yqe(){"use forget";var h;const t=G.c(19),e=V(),{eligible:n,isLoading:s}=dt(Fe.NewStaticOnboardingFlow);let o;t[0]!==e?(o=()=>J_(e)===!0,t[0]=e,t[1]=o):o=t[1];const a=ae(o);let i;t[2]!==e?(i=(h=et(e))==null?void 0:h.isFree(),t[2]=e,t[3]=i):i=t[3];const l=i;let c;t[4]!==e?(c=()=>st(e,Fe.NewStaticOnboardingFlow),t[4]=e,t[5]=c):c=t[5];const d=c;let u,f;t[6]!==e||t[7]!==n||t[8]!==l||t[9]!==s?(u=()=>{n&&!s&&l&&(J_.set(e,Fre),ol.set(e,!1))},f=[e,n,s,l],t[6]=e,t[7]=n,t[8]=l,t[9]=s,t[10]=u,t[11]=f):(u=t[10],f=t[11]),_.useEffect(u,f);const m=!!a;let p;t[12]!==e?(p=()=>{J_.set(e,!1),ol.set(e,!0)},t[12]=e,t[13]=p):p=t[13];let g;return t[14]!==s||t[15]!==d||t[16]!==m||t[17]!==p?(g={isOpen:m,isLoading:s,closeModal:p,markAsViewed:d},t[14]=s,t[15]=d,t[16]=m,t[17]=p,t[18]=g):g=t[18],g}function Fre(t){return t!=null?t:!0}const ip=sn(()=>Be({isOpen:!1,viewedInClientThreadId:null}));function lN(){"use forget";const t=G.c(12),e=V();let n;t[0]!==e?(n=()=>ip(e),t[0]=e,t[1]=n):n=t[1];const{isOpen:s,viewedInClientThreadId:o}=ae(n);let a,i,l;t[2]!==e?(a=()=>ip.set(e,Ure),i=()=>ip.set(e,Bre),l=d=>ip.set(e,u=>U(w({},u),{viewedInClientThreadId:d})),t[2]=e,t[3]=a,t[4]=i,t[5]=l):(a=t[3],i=t[4],l=t[5]);let c;return t[6]!==s||t[7]!==a||t[8]!==i||t[9]!==l||t[10]!==o?(c={isOpen:s,viewedInClientThreadId:o,close:a,open:i,markViewedInClientThreadId:l},t[6]=s,t[7]=a,t[8]=i,t[9]=l,t[10]=o,t[11]=c):c=t[11],c}function Bre(t){return U(w({},t),{isOpen:!0})}function Ure(t){return U(w({},t),{isOpen:!1})}function vqe(){"use forget";const t=G.c(7),e=V(),n=ze(e,"109457",{disableExposureLog:!0}),s=cn();let o;t[0]!==e?(o=tt(e),t[0]=e,t[1]=o):o=t[1];const a=o,[i,l]=Ei(Ue.HasDismissedOnboardingSidebarEntry,!1,C1),c=typeof(s==null?void 0:s.created)=="number"?s.created>1e12?s.created:s.created*1e3:void 0,d=typeof window<"u"&&window.innerHeight>=667,u=!!(a&&c!=null&&Date.now()-c<=6048e5&&d),f=n.get("onboarding_sidebar_entry_style","");let m;return t[2]!==i||t[3]!==u||t[4]!==l||t[5]!==f?(m={style:f,hasDismissed:i,setHasDismissed:l,isEligible:u},t[2]=i,t[3]=u,t[4]=l,t[5]=f,t[6]=m):m=t[6],m}function bqe(t,e=!1){return ze(t,"109457",{disableExposureLog:!e})}const zn=be({marketing:{id:"onboarding.departments.marketing",defaultMessage:"Marketing"},analytics:{id:"onboarding.departments.analytics",defaultMessage:"Data or Analytics"},product:{id:"onboarding.departments.product",defaultMessage:"Product Management"},comms:{id:"onboarding.departments.comms",defaultMessage:"Communications"},finance:{id:"onboarding.departments.finance",defaultMessage:"Finance or Accounting"},customer_experience:{id:"onboarding.departments.customer_experience",defaultMessage:"Customer Experience"},project_management:{id:"onboarding.departments.project_management",defaultMessage:"Project or Program Management"},engineering:{id:"onboarding.departments.engineering",defaultMessage:"Engineering"},education_professional:{id:"onboarding.departments.education_professional",defaultMessage:"Education Professional"},design:{id:"onboarding.departments.design",defaultMessage:"Design"},administrative:{id:"onboarding.departments.administrative",defaultMessage:"Administrative Assistant"},partnerships:{id:"onboarding.departments.partnerships",defaultMessage:"Partnerships"},it:{id:"onboarding.departments.it",defaultMessage:"Information Technology (IT)"},ops:{id:"onboarding.departments.ops",defaultMessage:"Operations"},human_resources:{id:"onboarding.departments.human_resources",defaultMessage:"Human Resources"},research:{id:"onboarding.departments.research",defaultMessage:"Research & Development"},sales:{id:"onboarding.departments.sales",defaultMessage:"Sales"},legal:{id:"onboarding.departments.legal",defaultMessage:"Legal"},healthcare:{id:"onboarding.departments.healthcare",defaultMessage:"Healthcare Professional"},other:{id:"onboarding.departments.other",defaultMessage:"Other"}}),vs=be({engineering:{id:"onboarding.edu_departments.engineering",defaultMessage:"Engineering"},math:{id:"onboarding.edu_departments.math",defaultMessage:"Mathematics"},applied_sciences:{id:"onboarding.edu_departments.applied_sciences",defaultMessage:"Applied Sciences"},finance:{id:"onboarding.edu_departments.finance",defaultMessage:"Finance or Accounting"},health:{id:"onboarding.edu_departments.health",defaultMessage:"Health or Medical"},law:{id:"onboarding.edu_departments.law",defaultMessage:"Law"},business:{id:"onboarding.edu_departments.business",defaultMessage:"Business"},social:{id:"onboarding.edu_departments.social",defaultMessage:"Social Sciences"},liberal_art:{id:"onboarding.edu_departments.liberal_art",defaultMessage:"Liberal Arts"},fine_art:{id:"onboarding.edu_departments.fine_art",defaultMessage:"Fine Arts"},linguistics:{id:"onboarding.edu_departments.linguistics",defaultMessage:"Linguistics"},teaching:{id:"onboarding.edu_departments.teaching",defaultMessage:"Teaching"},dev:{id:"onboarding.edu_departments.dev",defaultMessage:"Research & Development"},campus_ops:{id:"onboarding.edu_departments.campus_ops",defaultMessage:"Campus Operations"},it:{id:"onboarding.edu_departments.it",defaultMessage:"Information Technology (IT)"},other:{id:"onboarding.edu_departments.other",defaultMessage:"Other"}}),Dr=be({team_member:{id:"onboarding.role.team_member",defaultMessage:"Team Member/ Individual Contributor"},manager:{id:"onboarding.role.manager",defaultMessage:"Manager"},student:{id:"onboarding.role.student",defaultMessage:"Student"},executive:{id:"onboarding.role.executive",defaultMessage:"Executive"},director:{id:"onboarding.role.director",defaultMessage:"Director"},business_owner:{id:"onboarding.role.business_owner",defaultMessage:"Business Owner"},freelancer:{id:"onboarding.role.freelancer",defaultMessage:"Freelancer"},other:{id:"onboarding.role.other",defaultMessage:"Other"}}),ic=be({student:{id:"onboarding.edu_role.student",defaultMessage:"Student"},instructional_staff:{id:"onboarding.edu_role.instructional_staff",defaultMessage:"Instructional Staff"},researcher:{id:"onboarding.edu_role.researcher",defaultMessage:"Researcher"},admin:{id:"onboarding.edu_role.admin",defaultMessage:"Administration"},alumni:{id:"onboarding.edu_role.alumni",defaultMessage:"Alumni"},other:{id:"onboarding.edu_role.other",defaultMessage:"Other"}}),lp=be({teacher:{id:"k12.onboarding.role.teacher",defaultMessage:"Teacher"},administratorDistrictLeader:{id:"k12.onboarding.role.administrator_district_leader",defaultMessage:"Administrator / District Leader"},itTechnicalStaff:{id:"k12.onboarding.role.it_staff",defaultMessage:"IT / Technical Staff"},others:{id:"k12.onboarding.role.others",defaultMessage:"Others"},other:{id:"k12.onboarding.role.other",defaultMessage:"Other"}}),Cqe=[{id:"team_member",displayValue:Dr.team_member},{id:"manager",displayValue:Dr.manager},{id:"director",displayValue:Dr.director},{id:"executive",displayValue:Dr.executive},{id:"business_owner",displayValue:Dr.business_owner},{id:"freelancer",displayValue:Dr.freelancer},{id:"student",displayValue:Dr.student},{id:"other",displayValue:Dr.other}],Sqe=[{id:"student",displayValue:ic.student},{id:"instructional_staff",displayValue:ic.instructional_staff},{id:"researcher",displayValue:ic.researcher},{id:"admin",displayValue:ic.admin},{id:"alumni",displayValue:ic.alumni},{id:"other",displayValue:ic.other}],wqe=[{id:"teacher",displayValue:lp.teacher},{id:"administrator_district_leader",displayValue:lp.administratorDistrictLeader},{id:"it_staff",displayValue:lp.itTechnicalStaff},{id:"others",displayValue:lp.others}],kqe=[{id:"marketing",displayValue:zn.marketing},{id:"analytics",displayValue:zn.analytics},{id:"product",displayValue:zn.product},{id:"comms",displayValue:zn.comms},{id:"engineering",displayValue:zn.engineering},{id:"education_professional",displayValue:zn.education_professional},{id:"finance",displayValue:zn.finance},{id:"customer_experience",displayValue:zn.customer_experience},{id:"project_management",displayValue:zn.project_management},{id:"design",displayValue:zn.design},{id:"administrative",displayValue:zn.administrative},{id:"it",displayValue:zn.it},{id:"ops",displayValue:zn.ops},{id:"human_resources",displayValue:zn.human_resources},{id:"research",displayValue:zn.research},{id:"sales",displayValue:zn.sales},{id:"partnerships",displayValue:zn.partnerships},{id:"legal",displayValue:zn.legal},{id:"healthcare",displayValue:zn.healthcare},{id:"other",displayValue:zn.other}],Eqe=[{id:"engineering",displayValue:vs.engineering},{id:"math",displayValue:vs.math},{id:"applied_sciences",displayValue:vs.applied_sciences},{id:"finance",displayValue:vs.finance},{id:"health",displayValue:vs.health},{id:"law",displayValue:vs.law},{id:"business",displayValue:vs.business},{id:"social",displayValue:vs.social},{id:"liberal_art",displayValue:vs.liberal_art},{id:"fine_art",displayValue:vs.fine_art},{id:"linguistics",displayValue:vs.linguistics},{id:"teaching",displayValue:vs.teaching},{id:"dev",displayValue:vs.dev},{id:"campus_ops",displayValue:vs.campus_ops},{id:"it",displayValue:vs.it},{id:"other",displayValue:vs.other}],Tqe=[{id:"2-10",displayValue:"2-10"},{id:"11-50",displayValue:"11-50"},{id:"51-200",displayValue:"51-200"},{id:"201-500",displayValue:"201-500"},{id:"500+",displayValue:"500+"}];var $re=(t=>(t.unsupported_app_version="unsupported_app_version",t))($re||{});const Mqe=t=>{const e=ye(t,"2335877601");return Yo?e?{isLoading:!1,isOpen:!0,modalType:"unsupported_app_version",onClose:()=>{}}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}},Aqe="chatgpt",Iqe="chatgpt-alt",jqe="oauth_complete",Nqe="ms-windows-store://pdp/?productid=9nt1r1c2hh7j",Pqe="https://apps.microsoft.com/detail/9nt1r1c2hh7j",Vre=({className:t})=>r.jsxs("div",{className:W("flex-column flex gap-[10px]",t),children:[r.jsx("div",{className:"relative flex h-[62px] w-[88px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-linear-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:r.jsx("span",{className:"text-token-text-secondary absolute end-[12px] bottom-[8px] text-[12px] leading-[15px] font-semibold tracking-[-0.197499px]",children:r.jsx(j,w({},PC.alt))})}),r.jsx("div",{className:"relative flex h-[62px] w-[232px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-linear-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:r.jsx("span",{className:"text-token-text-secondary absolute end-[12px] bottom-[8px] text-[12px] leading-[15px] font-semibold tracking-[-0.197499px]",children:r.jsx(j,w({},PC.space))})})]}),PC=be({alt:{id:"DesktopOnboardingKeyboardIllustration.altKeyboardKeyLabel",defaultMessage:"alt"},space:{id:"DesktopOnboardingKeyboardIllustration.spaceKeyboardKeyLabel",defaultMessage:"space"}}),RC=Fe.hasSeenWindowsAppOnboarding,Hre=()=>{"use forget";const t=G.c(7),e=V(),{eligible:n,isLoading:s}=dt(RC);if(!Yo||BT(e)){let i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i={isLoading:!1,isOpen:!1,onClose:null},t[0]=i):i=t[0],i}if(s){let i;return t[1]===Symbol.for("react.memo_cache_sentinel")?(i={isLoading:!0,isOpen:null,onClose:null},t[1]=i):i=t[1],i}let o;t[2]!==e?(o=()=>st(e,RC),t[2]=e,t[3]=o):o=t[3];let a;return t[4]!==n||t[5]!==o?(a={isLoading:!1,isOpen:n,onClose:o},t[4]=n,t[5]=o,t[6]=a):a=t[6],a},Rqe=({onClose:t})=>{const{isOpen:e,onClose:n}=Hre();return e?(Ye.logEvent("chatgpt_sidetron_onboarding_nux_shown"),r.jsx(Mt,{testId:"modal-desktop-onboarding",isOpen:!0,onClose:rs,type:"success",noPadding:!0,position:"center",className:"max-w-[552px] p-14 sm:max-w-[552px]",children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8",children:[r.jsx(gn,{className:"absolute end-4 top-4",onClick:()=>{t(),n()}}),r.jsx("p",{className:"mb-3 text-center text-2xl font-bold",children:r.jsx(j,w({},cp.title))}),r.jsx("p",{className:"text-token-text-tertiary text-center text-lg",children:r.jsx(j,w({},cp.subtitle))}),r.jsx(Vre,{className:"my-8"}),r.jsx("p",{className:"mb-2 text-center text-lg font-semibold",children:r.jsx(j,w({},cp.keyboardShortcut))}),r.jsx("p",{className:"text-token-text-tertiary text-center text-lg",children:r.jsx(j,w({},cp.keyboardShortcutHint))})]})})):null},cp=be({title:{id:"DesktopOnboardingModal.title",defaultMessage:"Quickly access ChatGPT"},subtitle:{id:"DesktopOnboardingModal.subtitle",defaultMessage:"Use a shortcut to ask questions, upload files, or take screenshots from anywhere on your computer."},keyboardShortcut:{id:"DesktopOnboardingModal.keyboardShortcut1",defaultMessage:"Press Alt+Space to open the companion window"},keyboardShortcutHint:{id:"DesktopOnboardingModal.keyboardShortcutHint",defaultMessage:"You can change this shortcut in Settings."}});function Gre(t){const e=_.useRef(!1);return()=>{e.current||(t(),e.current=!0)}}function Lqe(t=30){"use no forget";const e=V(),{session:n}=vd(e);return _.useMemo(()=>{const s=n==null?void 0:n.accessToken;if(!s)return!1;let o;try{const d=ET(s);o=d==null?void 0:d.pwd_auth_time}catch(d){return!1}if(o==null)return!1;const a=o<1e12?o*1e3:o,l=Date.now()-a;return l>=0&&l<=t*1e3},[n==null?void 0:n.accessToken,t])}function Oqe(t){"use forget";const e=G.c(87),{onClose:n}=t,s=V(),o=ne(),{eligible:a}=JI();let i;e[0]!==s?(i=()=>st(s,QI),e[0]=s,e[1]=i):i=e[1];const l=i,[c,d]=_.useState(!0),[u,f]=_.useState(0),m=UT();let p;e[2]!==s?(p=()=>Math.min(390,Math.round(YI(s).height*.4)),e[2]=s,e[3]=p):p=e[3];const g=ae(p),h=g<260,x=_.useRef(null);let v,y;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{var Ne;(Ne=x.current)==null||Ne.focus()},y=[],e[4]=v,e[5]=y):(v=e[4],y=e[5]),_.useEffect(v,y);let b;e[6]!==o?(b=o.formatMessage({id:"wham.codexOnboardingModal.title.welcome",defaultMessage:"Your software engineering agent"}),e[6]=o,e[7]=b):b=e[7];let C;e[8]!==o?(C=o.formatMessage({id:"wham.codexOnboardingModal.body.welcome",defaultMessage:"Codex understands your codebase, answers questions, and writes tested code you can ship."}),e[8]=o,e[9]=C):C=e[9];let S;e[10]!==b||e[11]!==C?(S={id:"welcome",image:"https://persistent.oaistatic.com/chatgpt/codex-web-view-diff.png",title:b,body:C},e[10]=b,e[11]=C,e[12]=S):S=e[12];let k;e[13]!==o?(k=o.formatMessage({id:"wham.codexOnboardingModal.title.everywhere",defaultMessage:"Everywhere you work"}),e[13]=o,e[14]=k):k=e[14];let E;e[15]!==o?(E=o.formatMessage({id:"wham.codexOnboardingModal.body.everywhere",defaultMessage:"Codex is built into your IDE, CLI, GitHub, and the web. Work side-by-side locally, or let it keep going in the cloud when you step away."}),e[15]=o,e[16]=E):E=e[16];let T;e[17]!==k||e[18]!==E?(T={id:"everywhere",image:"https://persistent.oaistatic.com/chatgpt/codex-supported-platform-apple-icons.png",title:k,body:E},e[17]=k,e[18]=E,e[19]=T):T=e[19];let M;e[20]!==o?(M=o.formatMessage({id:"wham.codexOnboardingModal.title.code-review",defaultMessage:"Deep code review"}),e[20]=o,e[21]=M):M=e[21];let A;e[22]!==o?(A=o.formatMessage({id:"wham.codexOnboardingModal.body.code-review",defaultMessage:"Codex reviews pull requests using the entire codebase, running code when needed to suggest improvements."}),e[22]=o,e[23]=A):A=e[23];let I;e[24]!==M||e[25]!==A?(I={id:"code-review",image:"https://persistent.oaistatic.com/chatgpt/codex-code-review.png",title:M,body:A},e[24]=M,e[25]=A,e[26]=I):I=e[26];let N;e[27]!==T||e[28]!==I||e[29]!==S?(N=[S,T,I],e[27]=T,e[28]=I,e[29]=S,e[30]=N):N=e[30];const L=N;if(!a||!c)return null;let D;e[31]!==l||e[32]!==n?(D=()=>{l(),d(!1),n==null||n()},e[31]=l,e[32]=n,e[33]=D):D=e[33];const F=D;let $;e[34]===Symbol.for("react.memo_cache_sentinel")?($=()=>{f(zre)},e[34]=$):$=e[34];const H=$;let z;e[35]!==l||e[36]!==n||e[37]!==L.length||e[38]!==u?(z=()=>{u<L.length-1?f(Wre):(l(),d(!1),n==null||n())},e[35]=l,e[36]=n,e[37]=L.length,e[38]=u,e[39]=z):z=e[39];const K=z;let J;e[40]!==n?(J=()=>{d(!1),n==null||n()},e[40]=n,e[41]=J):J=e[41];let Z;e[42]!==h||e[43]!==o||e[44]!==F||e[45]!==m||e[46]!==L||e[47]!==u||e[48]!==g?(Z=!h&&r.jsxs("div",{className:"relative w-full select-none",style:{height:g},children:[r.jsx(mn,{children:r.jsx(Xe.img,{src:L[u].image,alt:o.formatMessage({id:"wham.codexOnboardingModal.illustration",defaultMessage:"Codex onboarding illustration"}),className:"absolute inset-0 h-full w-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:m?1e-5:.25,ease:"easeInOut"}},L[u].image)}),r.jsx("div",{"aria-hidden":!0,className:W("pointer-events-none absolute inset-0 z-10","dark:bg-none","bg-[radial-gradient(ellipse_140%_90%_at_50%_130%,var(--bg-primary)_0%,var(--bg-primary)_50%,transparent_90%)]")}),r.jsx("div",{className:"absolute start-3 top-3 z-20",children:r.jsx(gn,{onClick:F,className:"bg-transparent! text-black/20 transition-transform duration-100 hover:text-black/60 focus-visible:bg-transparent!",bg:"transparent"})})]}),e[42]=h,e[43]=o,e[44]=F,e[45]=m,e[46]=L,e[47]=u,e[48]=g,e[49]=Z):Z=e[49];let q;e[50]!==h||e[51]!==F?(q=h&&r.jsx("div",{className:"absolute start-3 top-3 z-20",children:r.jsx(gn,{onClick:F,className:"bg-transparent! text-black/20 transition-transform duration-100 hover:text-black/60 focus-visible:bg-transparent!",bg:"transparent"})}),e[50]=h,e[51]=F,e[52]=q):q=e[52];const se=h?null:"-translate-y-6 dark:-translate-y-0";let ie;e[53]!==se?(ie=W("mx-auto flex h-full max-w-[400px] flex-col items-center justify-center gap-2",se),e[53]=se,e[54]=ie):ie=e[54];const ee=L[u];let le;e[55]!==ee.title?(le=r.jsx("div",{className:"max-w-[260px] text-center text-2xl font-semibold",children:ee.title}),e[55]=ee.title,e[56]=le):le=e[56];const X=L[u];let te;e[57]!==X.body?(te=r.jsx("div",{className:"text-token-text-secondary text-md w-full text-center leading-6",children:X.body}),e[57]=X.body,e[58]=te):te=e[58];let ce;e[59]!==ie||e[60]!==le||e[61]!==te?(ce=r.jsx("div",{className:"relative min-h-[220px] flex-1 select-none",children:r.jsxs("div",{className:ie,children:[le,te]})}),e[59]=ie,e[60]=le,e[61]=te,e[62]=ce):ce=e[62];let ue;e[63]!==u?(ue=u>0?r.jsx("div",{children:r.jsx(_e,{color:"secondary",onClick:H,children:r.jsx(j,{id:"wham.codexOnboardingModal.back",defaultMessage:"Back"})})}):r.jsx("div",{}),e[63]=u,e[64]=ue):ue=e[64];let me;e[65]!==o||e[66]!==L||e[67]!==u?(me=r.jsx("div",{className:"absolute start-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:r.jsx("div",{className:"flex items-center gap-1.5",children:L.map((Ne,De)=>r.jsx("button",{type:"button",onClick:()=>f(De),"aria-label":o.formatMessage({id:"wham.codexOnboardingModal.goToStep",defaultMessage:"Go to step {step}"},{step:De+1}),"aria-current":De===u?"page":void 0,className:W("h-1.5 w-1.5 cursor-pointer rounded-full",De===u?"bg-token-text-primary":"bg-token-text-primary opacity-20")},Ne.id))})}),e[65]=o,e[66]=L,e[67]=u,e[68]=me):me=e[68];let xe;e[69]!==L.length||e[70]!==u?(xe=u<L.length-1?r.jsx(j,{id:"wham.codexOnboardingModal.continue",defaultMessage:"Continue"}):r.jsx(j,{id:"wham.codexOnboardingModal.done",defaultMessage:"Done"}),e[69]=L.length,e[70]=u,e[71]=xe):xe=e[71];let pe;e[72]!==K||e[73]!==xe?(pe=r.jsx("div",{className:"ms-auto",children:r.jsx(_e,{color:"primary",onClick:K,ref:x,children:xe})}),e[72]=K,e[73]=xe,e[74]=pe):pe=e[74];let Ee;e[75]!==ue||e[76]!==me||e[77]!==pe?(Ee=r.jsxs("div",{className:"relative flex items-center px-6 py-5 pt-2",children:[ue,me,pe]}),e[75]=ue,e[76]=me,e[77]=pe,e[78]=Ee):Ee=e[78];let Se;e[79]!==Z||e[80]!==q||e[81]!==ce||e[82]!==Ee?(Se=r.jsxs("div",{className:"relative flex h-full flex-col",children:[Z,q,ce,Ee]}),e[79]=Z,e[80]=q,e[81]=ce,e[82]=Ee,e[83]=Se):Se=e[83];let Te;return e[84]!==J||e[85]!==Se?(Te=r.jsx(Mt,{isOpen:!0,onClose:J,testId:"modal-codex-onboarding",position:"center",size:"custom",className:"max-h-[90vh] w-[640px] max-w-[640px]",noPadding:!0,showOverlayBackground:!0,shouldIgnoreClickOutside:!0,children:Se}),e[84]=J,e[85]=Se,e[86]=Te):Te=e[86],Te}function Wre(t){return t+1}function zre(t){return t>0?t-1:t}function Dqe(){const{eligible:t,isLoading:e}=JI();return e?"loading":t?"show":"hide"}function qre(){const t=V(),e=et(t),{data:n,isLoading:s,isError:o}=Th(e==null?void 0:e.getWorkspaceId()),a=V(),i=ye(a,"616577762");return!(e!=null&&e.isEnterprisey())||i?"ENABLED":s&&n==null?"LOADING":o?"ERROR":n!=null&&n.beta_settings.wham_access?"ENABLED":"DISABLED"}const Yre={red:"bg-red-500",yellow:"bg-yellow-500",blue:"bg-blue-500"},Zre={sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4"},cN=({color:t,size:e="sm",className:n})=>r.jsx("div",{className:W("rounded-full",t?Yre[t]:void 0,Zre[e],n)});function Fqe(t){return Sr(t).checkGate("2067628123")}const Kre=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>O(t)}),Qre=R(()=>P(()=>import("./g842wk722jj3m7vq.js"),__vite__mapDeps([123,1])),{loading:t=>O(t)}),X_="oai-chat-backend",Bqe=()=>{var o;const[t,e]=_.useState(!1),[n,s]=_.useState(((o=p_.getCookie(X_))==null?void 0:o.toString())==="preview");return r.jsxs(r.Fragment,{children:[r.jsxs(Y.CheckboxItem,{icon:Kre,checked:t,onCheckedChange:a=>{e(a),requestAnimationFrame(()=>{window.location.href=a?"/preview":"/public"})},children:["Preview",r.jsx(nd,{children:"web"})]}),r.jsxs(Y.CheckboxItem,{icon:Qre,checked:n,onCheckedChange:a=>{a?(s(!0),p_.setCookie(X_,"preview")):p_.deleteCookie(X_),window.location.reload()},children:["Preview",r.jsx(nd,{children:"sa-server"})]})]})};function Eb({systemHint:t,modelConfig:e,conversationMode:n,isTemporaryChat:s,isDeveloperMode:o,isWorkspaceTenant:a,startedWithByoMcp:i}){return Jre(t,s)&&Xre(t,e)&&eie(t,e)&&tie(t,n)&&nie(t,o)&&sie(t,a,i)}function Jre(t,e){return!e||t.allowInTemporaryChat===!0}function Xre(t,e){const n=e==null?void 0:e.enabledTools;return n===void 0?!0:t.requiredFeatures.every(s=>n.includes(s))}function eie(t,e){if(t.systemHint===Pe.Think){const n=e==null?void 0:e.reasoningType;return n==null||n===X4.OFF||n===X4.AUTO}return t.requiredModels.length===0||t.requiredModels.some(n=>n===(e==null?void 0:e.id))}function tie(t,e){return t.requiredConversationModes.length===0||t.requiredConversationModes.some(n=>n===(e==null?void 0:e.kind))}function nie(t,e){return e?!0:!t.isDangerous}function sie(t,e,n){return e?!0:!(t.category==="tool"&&(t.isDangerous&&n===!1||!t.isDangerous&&n===!0))}function Tb(t){"use forget";const e=G.c(13),{clientThreadId:n,conversationMode:s}=t,o=V(),a=Es(),i=_.useContext(vY),l=Kf.useIsEnabled(n!=null?n:"");let c;e[0]!==o?(c=()=>Md(o),e[0]=o,e[1]=c):c=e[1];const d=ae(c);let u;e[2]!==o?(u=et(o),e[2]=o,e[3]=u):u=e[3];const f=u;let m;return e[4]!==f||e[5]!==n||e[6]!==s||e[7]!==o||e[8]!==i||e[9]!==d||e[10]!==l||e[11]!==a?(m=p=>{var H,z,K;let{nodeId:g,sourceEvent:h,requestedModelId:x,appendMessages:v,extraStreamParams:y,isReasoningSkipped:b}=p;if(!n)throw new Error("Regeneration must have clientThreadId");const C=ft(n),S=he.getVariantIds(C,g),k=he.getParentPromptNode(C,g);if(!k)throw new Error("Regeneration must have parent prompt");const E=(H=Vs(o))!=null?H:[],T=(S==null?void 0:S.length)===1&&(y==null?void 0:y.forceUseSearch)===void 0&&(y==null?void 0:y.forceDisableFeatures)===void 0,M=ta(yt(o,n)),A=$T(M,x),I=fH(C,g),N=(z=k.message.metadata)==null?void 0:z.system_hints,L=x&&N?N.filter(J=>{var q;const Z=E.find(se=>se.systemHint===J);return Z&&Eb({systemHint:Z,modelConfig:A,isTemporaryChat:a,conversationMode:s,isDeveloperMode:d,isWorkspaceTenant:(q=f==null?void 0:f.isWorkspaceAccount())!=null?q:!1,startedWithByoMcp:C==null?void 0:C.startedWithByoMcp})}):N!=null?N:[];l&&(y=U(w({},y!=null?y:{}),{enableMessageFollowups:!0}));const{systemHints:D,extraStreamParams:F}=a1(L,y);let $=D;(y==null?void 0:y.forceUseReason)!==void 0&&(y.forceUseReason?$.push(Pe.Think):$=$.filter(oie)),i({completionType:Xa.Variant,requestedModelId:x,sourceEvent:h,completionMetadata:{variantPurpose:T?"comparison_implicit":"none",conversationMode:s!=null?s:(K=ft(n))==null?void 0:K.mode,systemHints:$,searchSource:(y==null?void 0:y.forceUseSearch)===!0?of.CONVERSATION_REGENERATE_WITH_SEARCH:(y==null?void 0:y.forceUseSearch)===!1?of.CONVERSATION_REGENERATE_WITHOUT_SEARCH:void 0},parentMessageId:k.id,appendMessages:v,extraStreamParams:F,isReasoningSkipped:b,thinkingEffort:I}),b&&Ze(n,J=>{let Z=g,q=J.tree.getNodeByIdOrMessageId(Z);for(;q.message.author.role!==Ke.User;)J.tree.deleteNode(Z),Z=q.parentId,q=J.tree.getNodeByIdOrMessageId(Z)})},e[4]=f,e[5]=n,e[6]=s,e[7]=o,e[8]=i,e[9]=d,e[10]=l,e[11]=a,e[12]=m):m=e[12],m}function oie(t){return t!==Pe.Think}const aie=sn(t=>St(()=>{const e=mH(t);return e?e.is_adult||!e.age_is_known:!1})),rie=sn(t=>St(()=>{const e=ed(t,Lt.AmphoraLocks);return e!==void 0&&e[Lt.AtlasAdultSearchAllowed]===!0})),Mb=To(()=>Be(null)),Uqe=To(t=>St(()=>{const{ctx:e}=t,n=Ff(e),s=VT(e),o=aie(e),a=rie(e),i=Mb(t);return Qo(e)&&!s&&n&&i!=null&&o&&!a}));function dN(t){"use forget";var y;const e=G.c(15),{conversationMode:n,accountId:s}=t,o=Ao();let a;e[0]!==o?(a=()=>o&&Mb(o),e[0]=o,e[1]=a):a=e[1];const i=ae(a),{data:l,isLoading:c}=to(Lt.AtlasAdultSearchAllowed),{mutateAsync:d,isPending:u}=Tl(!0),f=c||u,m=(y=o==null?void 0:o.id)!=null?y:void 0;let p;e[2]!==n||e[3]!==m?(p={clientThreadId:m,conversationMode:n},e[2]=n,e[3]=m,e[4]=p):p=e[4];const g=Tb(p);let h;e[5]!==s||e[6]!==l||e[7]!==i||e[8]!==g||e[9]!==d?(h=async(b,C)=>{C===l||!s||(await d({setting:Lt.AtlasAdultSearchAllowed,value:C,account_id:s}),!(!C||!i||i.safeSearchOff)&&g({sourceEvent:b,nodeId:i.messageId}))},e[5]=s,e[6]=l,e[7]=i,e[8]=g,e[9]=d,e[10]=h):h=e[10];const x=h;let v;return e[11]!==x||e[12]!==l||e[13]!==f?(v={isAdultSearchEnabled:l,handleToggleSetting:x,isLoading:f},e[11]=x,e[12]=l,e[13]=f,e[14]=v):v=e[14],v}const iie=R(()=>P(()=>import("./evrzv0yhdqda6wub.js"),__vite__mapDeps([124,1])),{loading:t=>O(t)});function $qe(t){"use forget";const e=G.c(33),{conversationMode:n,accountId:s}=t;let o;e[0]!==s||e[1]!==n?(o={conversationMode:n,accountId:s},e[0]=s,e[1]=n,e[2]=o):o=e[2];const{isAdultSearchEnabled:a,handleToggleSetting:i,isLoading:l}=dN(o);let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=W("flex min-w-[155px] items-center justify-between rounded-full p-3 whitespace-nowrap","hover:bg-token-text-secondary text-token-bg-primary bg-token-text-primary focus-visible:bg-token-text-secondary!","dark:bg-token-text-secondary! dark:hover:bg-token-text-primary! dark:focus-visible:bg-token-text-primary!"),e[3]=c):c=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(j,w({},Bi.matureContent)),e[4]=d):d=e[4];let u;e[5]!==a?(u=r.jsxs("span",{className:"flex",children:[d,r.jsxs("span",{className:"text-token-text-tertiary dark:text-token-bg-primary/60 min-w-[25px] whitespace-pre",children:[" ",a?r.jsx(j,w({},Bi.on)):r.jsx(j,w({},Bi.off))]})]}),e[5]=a,e[6]=u):u=e[6];let f;e[7]!==l?(f=r.jsx("div",{className:"text-token-text-tertiary dark:text-token-bg-primary/60 min-w-[16px]",children:l?r.jsx(_s,{className:"icon-sm"}):r.jsx(iie,{className:"icon-md"})}),e[7]=l,e[8]=f):f=e[8];let m;e[9]!==u||e[10]!==f?(m=r.jsxs(Y.Trigger,{color:"primary",className:c,children:[u,f]}),e[9]=u,e[10]=f,e[11]=m):m=e[11];const p=a?"on":"off",g=a?"selected":"default";let h,x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(j,w({},Bi.on)),h=r.jsx(j,w({},Bi.onDescription)),e[12]=h,e[13]=x):(h=e[12],x=e[13]);let v;e[14]!==i?(v=A=>i(A,!0),e[14]=i,e[15]=v):v=e[15];let y;e[16]!==v||e[17]!==g?(y=r.jsx(Y.RadioItem,{color:g,value:"on",label:x,secondary:h,onClick:v}),e[16]=v,e[17]=g,e[18]=y):y=e[18];const b=a?"default":"selected";let C,S;e[19]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx(j,w({},Bi.off)),S=r.jsx(j,w({},Bi.offDescription)),e[19]=C,e[20]=S):(C=e[19],S=e[20]);let k;e[21]!==i?(k=A=>i(A,!1),e[21]=i,e[22]=k):k=e[22];let E;e[23]!==b||e[24]!==k?(E=r.jsx(Y.RadioItem,{color:b,value:"off",label:C,secondary:S,onClick:k}),e[23]=b,e[24]=k,e[25]=E):E=e[25];let T;e[26]!==y||e[27]!==E||e[28]!==p?(T=r.jsx(Y.Portal,{children:r.jsx(Y.Content,{size:"auto",children:r.jsxs(Y.RadioGroup,{value:p,children:[y,E]})})}),e[26]=y,e[27]=E,e[28]=p,e[29]=T):T=e[29];let M;return e[30]!==T||e[31]!==m?(M=r.jsxs(Y.Root,{children:[m,T]}),e[30]=T,e[31]=m,e[32]=M):M=e[32],M}const Bi=be({matureContent:{id:"mKrpYD",defaultMessage:"Mature content"},on:{id:"DQDUrG",defaultMessage:"On"},onDescription:{id:"SCtTOO",defaultMessage:"Show explicit links"},off:{id:"jAdHAP",defaultMessage:"Off"},offDescription:{id:"e7voKz",defaultMessage:"Attempt to hide all explicit content"}}),Vqe=R(()=>P(()=>import("./kmh5vqrwfjuvl7dr.js"),__vite__mapDeps([125,1,10,11])).then(t=>t.CalpicoCustomizeChatGPTModalContainer)),Hqe=R(()=>P(()=>import("./btqzjxef0smsc2zx.js"),__vite__mapDeps([126,1,10,11])).then(t=>t.CalpicoChatMembersModalContainer)),Gqe=R(()=>P(()=>import("./nbhzhbx6fr1xk0vm.js"),__vite__mapDeps([127,1,10,11])).then(t=>t.CalpicoDeleteMessageConfirmationModal)),lie=R(()=>P(()=>import("./llxnsrn3cfujbemg.js"),__vite__mapDeps([128,1,10,11])).then(t=>t.CalpicoEditProfileModal)),Wqe=R(()=>P(()=>import("./ox03v4h6yt4mkym1.js"),__vite__mapDeps([129,1,130,10,11])).then(t=>t.CalpicoEmojiPickerModal)),cie=R(()=>P(()=>import("./ldsa3r82d7xdb6ov.js"),__vite__mapDeps([131,1,10,11])).then(t=>t.CalpicoLeaveChatConfirmationModalContainer)),die=R(()=>P(()=>import("./lmlj1u04lgbh68m0.js"),__vite__mapDeps([132,1,10,11])).then(t=>t.CalpicoDeleteChatConfirmationModalContainer)),uie=R(()=>P(()=>import("./myx1u0w5xt1aa2ml.js"),__vite__mapDeps([133,1,10,11])).then(t=>t.CalpicoManageGroupLinkModalContainer)),fie=R(()=>P(()=>import("./ggrj9mpupbpg92k0.js"),__vite__mapDeps([134,1,10,11])).then(t=>t.CalpicoRenameChatModalContainer)),zqe=R(()=>P(()=>import("./c5pm95go7wgn1yfn.js"),__vite__mapDeps([135,1,10,11])).then(t=>t.CalpicoReportModalContainer)),Mg=R(()=>P(()=>import("./oi6j6iu5h3srk8zd.js"),__vite__mapDeps([136,1,10,11])).then(t=>t.CalpicoStartChatModalContainer)),qqe=R(()=>P(()=>import("./e3eu2dzdizdbw00f.js"),__vite__mapDeps([137,1,10,11])).then(t=>t.CalpicoUserProfileModal)),Yqe=R(()=>P(()=>import("./h1ij87z8h3smwmah.js"),__vite__mapDeps([138,1,10,11])).then(t=>t.CalpicoNoAccessYetModalContainer)),Zqe=R(()=>P(()=>import("./o350mbbkeahfd7yn.js"),__vite__mapDeps([139,1,140,10,11])).then(t=>t.CalpicoAppMightNeedUpdateModalContainer)),Bp=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10.4229 11.0137C10.7025 11.0295 10.9779 11.0611 11.248 11.1074L11.6494 11.1875L11.7764 11.2314C12.0578 11.3598 12.2204 11.6722 12.1484 11.9854C12.0762 12.2984 11.7935 12.5086 11.4844 12.501L11.3506 12.4844L11.0234 12.4189C10.8026 12.3811 10.5772 12.3548 10.3477 12.3418L10 12.332C6.87166 12.332 4.4152 14.6882 4.41504 17.5C4.41486 17.8671 4.11716 18.165 3.75 18.165C3.38284 18.165 3.08514 17.8671 3.08496 17.5C3.08512 13.8687 6.22504 11.002 10 11.002L10.4229 11.0137Z"}),_.createElement("path",{d:"M15 11.835C15.3673 11.835 15.665 12.1327 15.665 12.5V14.335H17.5L17.6338 14.3486C17.9369 14.4106 18.165 14.6786 18.165 15C18.165 15.3214 17.9369 15.5894 17.6338 15.6514L17.5 15.665H15.665V17.5C15.665 17.8673 15.3673 18.165 15 18.165C14.6327 18.165 14.335 17.8673 14.335 17.5V15.665H12.5C12.1327 15.665 11.835 15.3673 11.835 15C11.835 14.6327 12.1327 14.335 12.5 14.335H14.335V12.5C14.335 12.1327 14.6327 11.835 15 11.835Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.83496C12.2081 1.83496 13.9979 3.62494 13.998 5.83301C13.998 8.04123 12.2082 9.83203 10 9.83203C7.79178 9.83203 6.00195 8.04123 6.00195 5.83301C6.00213 3.62494 7.79189 1.83496 10 1.83496ZM10 3.16504C8.52643 3.16504 7.33221 4.35948 7.33203 5.83301C7.33203 7.30669 8.52632 8.50195 10 8.50195C11.4737 8.50195 12.668 7.30669 12.668 5.83301C12.6678 4.35948 11.4736 3.16504 10 3.16504Z"})),mie=Object.freeze(Object.defineProperty({__proto__:null,default:Bp},Symbol.toStringTag,{value:"Module"}));function Mr(t,e){t({pathname:"/",search:(e==null?void 0:e.params)&&"?".concat(e.params)},{replace:e==null?void 0:e.replace,state:fN(e==null?void 0:e.config)})}function uN(){"use no forget";const t=Hn(),e=gie(t),n=_.useRef(e!=null?e:{});return e?n.current=e:n.current}function w1(){"use forget";const t=G.c(2),e=uN();let n;return t[0]!==e?(n=pie(),t[0]=e,t[1]=n):n=t[1],n}function pie(t){return fN()}function fN(t){return{newConversationConfig:w({},t)}}function gie(t){var e;return(e=t.state)==null?void 0:e.newConversationConfig}function sm(c){var d=c,{icon:t,mobileIcon:e,color:n="primary",iconClassName:s,children:o,as:a,ref:i}=d,l=ke(d,["icon","mobileIcon","color","iconClassName","children","as","ref"]);let u=o;t&&(u=r.jsxs(r.Fragment,{children:[r.jsx(t,{className:W(s!=null?s:"icon",e!=null&&"max-md:hidden")}),e?r.jsx(e,{className:W(s!=null?s:"icon","md:hidden")}):null]}));const f=w1();switch(a){case"link":case"a":{const m=l,{linkProps:p}=m,g=ke(m,["linkProps"]),{to:h,state:x}=p!=null?p:{};return r.jsx(Eo,U(w({},g),{className:W(n==="primary"?"text-token-text-primary":n==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",l.className),ref:i,to:h!=null?h:"/",state:x!=null?x:f,children:u}))}case"button":default:{const p=l;return r.jsx("button",U(w({},p),{className:W(n==="primary"?"text-token-text-primary":n==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",l.className),ref:i,children:u}))}}}function Kqe(t){"use no forget";const e=V(),n=ne(),s=n.formatMessage({id:"yKEGRx",defaultMessage:"Start a group chat"});if(t.type==="from-conversation"){const a=n.formatMessage({id:"dX9+Fz",defaultMessage:"Add people"});return r.jsx(_t,{label:s,children:r.jsx(_e,{onClick:()=>{const i={type:"from-conversation",serverThreadId:t.serverThreadId,source:"top-nav"};lt(e,Mg,i)},icon:Bp,label:s,"data-testid":"start-group-chat-from-conversation-button",color:"ghost",className:"text-token-text-primary me-2",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:a})})}const o=async()=>{lt(e,Mg,{type:"new-chat",source:"top-nav"})};return r.jsx(_t,{label:s,children:t.variant==="default"?r.jsx(sm,{className:"me-1 rounded-full!","aria-label":s,onClick:o,icon:Bp}):r.jsx(_e,{className:"text-token-text-secondary me-1 rounded-lg",color:"ghost",icon:Bp,onClick:o,label:s})})}function Qqe(){return uh("/gg/*")!=null}function hie(){var e;const t=uh("/gg/:id");return(e=t==null?void 0:t.params.id)!=null?e:null}function _ie(){var e;const t=CK("/gg/:id");return(e=t==null?void 0:t.params.id)!=null?e:null}function xie(t,e=240){var a;const s=((a=t.preview)!=null?a:"").trim().replace(/\s+/g," ");return s.length>e?"".concat(s.slice(0,e),""):s}function Jqe(t,e){const n=new Date,s=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(n.getFullYear(),n.getMonth(),n.getDate()-1),a=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1),i=new Date(s);i.setDate(i.getDate()-6);const l=new Intl.DateTimeFormat(e,{hour:"numeric",minute:"2-digit"}).format(t),c=new Intl.RelativeTimeFormat(e,{numeric:"auto"});if(t>=s&&t<a)return{date:e0(c.format(0,"day"),e),time:l};if(t>=o&&t<s)return{date:e0(c.format(-1,"day"),e),time:l};if(t>=i&&t<o){const p=new Intl.DateTimeFormat(e,{weekday:"long"});return{date:e0(p.format(t),e),time:l}}const d=t.getFullYear()===n.getFullYear(),u=w({month:"long",day:"numeric"},d?{}:{year:"numeric"});return{date:new Intl.DateTimeFormat(e,u).format(t),time:l}}function e0(t,e){const[n="",...s]=HT(t);return n?"".concat(n.toLocaleUpperCase(e)).concat(s.join("")):t}var Rx=(t=>(t.CreateRoom="calpico_create_room",t))(Rx||{});const yie=window.location.origin+"/backend-api/sentinel/sdk.js",ud=globalThis,mN=!!(ud.window&&ud.document)&&!0;function vie(){return new Promise((t,e)=>{var o;const n=ud.document;if(!n){e(new Error("Sentinel SDK script cannot be injected outside the browser"));return}const s=n.createElement("script");s.type="text/javascript",s.src=yie,s.async=!0,s.defer=!0,s.onload=t,s.onerror=a=>{e(a!=null?a:new Error("Failed to load Sentinel SDK script"))},(o=n.head)==null||o.appendChild(s)})}const bie=(()=>{let t;return()=>(t||(mN?(t=vie(),t.then(()=>{var e;try{(e=ud.SentinelSDK)==null||e.init("calpico_init")}catch(n){Re.addError("Sentinel SDK init failed",{error:n})}})):t=Promise.resolve()),t)})();function LC(t){const e={};return t&&(e["OpenAI-Sentinel-Token"]=t),e}function Cie(t){return mN?bie().then(()=>{if(!ud.SentinelSDK)throw new Error("Sentinel SDK not initialized");return ud.SentinelSDK.token(t)}):Promise.resolve("disabled")}const Sie=2e3,OC=3e3,wie=20,kie=5;function Eie(t,e){var s;const n=(s=et(t))==null?void 0:s.normalizedAccountUserId;return e.role==="user"&&e.accountUserId===n}function Tie(t,e,n){var o;return{id:(o=t.id)!=null?o:"".concat(e,":raw:").concat(n),author:t.author,content:t.content,create_time:t.create_time,update_time:t.update_time,end_turn:t.end_turn,weight:t.weight,metadata:t.metadata,recipient:t.recipient,channel:t.channel,status:t.status}}function DC(t){if(!t)return null;const e=t.message;if(!e)return U(w({},t),{message:null});const n=zu(e);return U(w({},t),{message:n})}function Mie(t){return t?U(w({},t),{message:null}):null}function zu(t){var e,n,s,o,a,i,l;if(t.role==="user")return{id:t.id,role:"user",accountUserId:t.account_user_id,content:t.content,reactions:(e=t.reactions)!=null?e:{},replyTo:DC(t.reply_to),createdAt:new Date(t.created_at),deletedAt:t.deleted_at?new Date(t.deleted_at):null,preview:(n=t.preview)!=null?n:null};if(t.role==="assistant")return{id:t.id,role:"assistant",rawMessages:((s=t.raw_messages)!=null?s:[]).map((c,d)=>Tie(c,t.id,d)),reactions:(o=t.reactions)!=null?o:{},replyTo:DC(t.reply_to),createdAt:new Date(t.created_at),attachments:(a=t.attachments)!=null?a:[],deletedAt:t.deleted_at?new Date(t.deleted_at):null,preview:(i=t.preview)!=null?i:null,modelSlug:(l=t.model_slug)!=null?l:null};if(t.role==="system")return{id:t.id,role:"system",content:t.content,createdAt:new Date(t.created_at),message:t.content.text,preview:t.preview};throw new Error("Unknown message response type: ".concat(t.role))}function FC(t,e){Co(()=>{const n=t(),s=e.map(zu),o=new Map;for(const i of[...n,...s])o.set(i.id,i);const a=Array.from(o.values()).sort((i,l)=>i.createdAt.getTime()-l.createdAt.getTime());t.set(a)})}function Aie(t,e){var o,a;const n=(o=t.text)!=null?o:"",s=(a=t.attachments)==null?void 0:a.map((i,l)=>{switch(i==null?void 0:i.type){case"file":return{type:"file",file_id:i.file_id};case"link":return{type:"link",url:i.url,title:i.title};case"post":return{type:"post",post_id:i.post_id};case"conversation":return{type:"conversation",conversation_id:i.conversation_id};case"media":return{type:"media",post_id:i.post_id,generation_id:i.generation_id,generation_type:i.generation_type,title:i.title,conversation_id:i.conversation_id,message_id:i.message_id};case"sticker":{let c=null;const d=e==null?void 0:e[l];return(d==null?void 0:d.type)==="sticker"&&(c=d.image_url),{type:"sticker",sticker_id:i.sticker_id,image_url:c}}case"sticker_pack":return{type:"sticker_pack",sticker_ids:i.sticker_ids};default:return i}});return{text:n,attachments:s}}class Iie{constructor(e){Q(this,"hasFetchedRooms$",Be(!1));Q(this,"rooms$",Be(new Map));Q(this,"users$",Be(new Map));Q(this,"userAttributes$",Be(null));Q(this,"userProfileSnapshots$",Be(new Map));Q(this,"sortedRooms$",St(()=>Array.from(this.rooms$().values()).sort((n,s)=>{const o=n.pinned$(),a=s.pinned$();return o!==a?o?-1:1:s.updatedAt$().getTime()-n.updatedAt$().getTime()})));Q(this,"totalUnreadMessageCount$",St(()=>Array.from(this.rooms$().values()).reduce((e,n)=>e+n.unreadMessageCount$(),0)));Q(this,"messageDebugMode$",Be(!1));Q(this,"roomsPaginationCursor$",Be(Nie));Q(this,"isFetchingMoreRooms$",Be(!1));Q(this,"selfProfile$",St(()=>{var n,s;const e=(n=et(this.ctx))==null?void 0:n.normalizedAccountUserId;return e==null?null:(s=this.users$().get(e))!=null?s:null}));Q(this,"_handlePubSubMessage",e=>{var n;switch(e.type){case"calpico-message-add":{const{room_id:s,message:o}=e.payload;this._handleMessagesResponse$(s,[o]),this._cancelHeartbeat$(s,o),this._drawNotification$(s,o);break}case"calpico-message-update":{const{room_id:s,message:o}=e.payload;this._handleMessageUpdate$(s,o);break}case"calpico-room-update":{const{room:s}=e.payload;this._handleRoomsResponse$({response:[s],fetchSource:"pubsub"});break}case"calpico-room-read":{const{room_id:s,last_read_at:o}=e.payload;this._markRoomRead$(s,new Date(o));break}case"calpico-is-responding-heartbeat":{this._handleHeartbeatPayload$(e.payload);break}case"user-leave-room":{const{room_id:s,account_user_id:o,snapshot:a}=e.payload,i=new Map(this.userProfileSnapshots$());i.set(o,{accountUserId:a.account_user_id,name:a.name,avatarUrl:a.avatar_url,username:a.username}),this.userProfileSnapshots$.set(i);const l=this.rooms$().get(s);if(l){l.members$.set(l.members$().filter(d=>d.accountUserId!==o));const c=new Map(l.memberProfileSnapshots$().map(d=>[d.accountUserId,d]));c.set(o,{accountUserId:a.account_user_id,name:a.name,avatarUrl:a.avatar_url,username:a.username}),l.memberProfileSnapshots$.set(Array.from(c.values()))}o===((n=this.selfProfile$())==null?void 0:n.accountUserId)&&this.rooms$.set(c=>(c.delete(s),c));break}case"calpico-room-leave":{const{room_id:s}=e.payload;this.rooms$.set(o=>(o.delete(s),o));break}}});Q(this,"_drawNotification$",(e,n)=>{var c;if(!ye(this.ctx,"1497872396")||e===_ie())return;const s=zu(n);if(s.role==="system")return;const o=(c=et(this.ctx))==null?void 0:c.normalizedAccountUserId;if(s.role==="user"&&s.accountUserId===o)return;const a=this.rooms$().get(e);if(a==null)return;let i=xie(s,50),l=null;if(s.role==="user"){const d=this.users$().get(s.accountUserId);if(d==null)return;l={name:d.name,picture:d.avatarUrl},i="".concat(d.name,": ").concat(i)}uf({clientThreadId:e,title:a.name$(),subtitle:i,userAvatar:l,timeout:5e3,onClick:()=>{JM("/gg/".concat(e))}})});Q(this,"_handleRoomsResponse$",({response:e,fetchSource:n})=>{Co(()=>{e.forEach(s=>{var u,f,m,p,g,h,x,v;const o=this.rooms$(),a=s.members.flatMap(y=>{var b,C;return y.role==="user"?[{role:"user",accountUserId:y.account_user_id,name:y.name,avatarUrl:y.avatar_url,avatarFileId:y.avatar_file_id,username:y.username,isBlocked:(b=y.is_blocked)!=null?b:!1,canMessage:(C=y.can_message)!=null?C:!1}]:[]}),i=s.member_profile_snapshots.map(y=>({accountUserId:y.account_user_id,name:y.name,avatarUrl:y.avatar_url,username:y.username})),l=o.get(s.id);if(l){if(n==="summary"&&l.fetchSource$()!=="summary")return;s.latest_messages&&(t0(this.ctx,s.latest_messages),FC(l.messages$,s.latest_messages)),l.members$.set(a),l.memberProfileSnapshots$.set(i),l.name$.set(s.name),l.shouldAutoRespond$.set((u=s.should_auto_respond)!=null?u:null),l.pinned$.set(s.pinned===!0),l.assistantPersonality$.set(typeof s.assistant_personality=="string"&&s.assistant_personality||""),l.groupLink$.set((f=s.magic_link_url)!=null?f:null),l.groupLinkShareText$.set((m=s.magic_link_share_text)!=null?m:null),l.fetchSource$.set(n)}else{s.latest_messages&&t0(this.ctx,s.latest_messages);const y={id:s.id,type:s.type,name$:Be(s.name),assistantPersonality$:Be(typeof s.assistant_personality=="string"&&s.assistant_personality||""),members$:Be(a),memberProfileSnapshots$:Be(i),messages$:Be(s.latest_messages?s.latest_messages.map(zu):[]),optimisticMessages$:Be([]),threadSidebar$:Be(null),viewMessages$:St(()=>{const C=y.messages$(),S=y.optimisticMessages$();let k=[...C,...S];return k.sort((E,T)=>E.createdAt.getTime()-T.createdAt.getTime()),k=k.filter(E=>E.role==="system"?!0:E.deletedAt==null),k}),lastReadAt$:Be(s.last_read_at?new Date(s.last_read_at):null),isFetchingMessages$:Be(!1),hasFetchedBeginning$:Be(!1),createdAt:new Date,assistantHeartbeats$:Be([]),userHeartbeats$:Be([]),updatedAt$:St(()=>{var S,k;const C=y.viewMessages$();return(k=(S=So(C))==null?void 0:S.createdAt)!=null?k:new Date(s.updated_at)}),pinned$:Be(s.pinned===!0),unreadMessageCount$:St(()=>{const C=y.lastReadAt$();return C==null?0:y.messages$().filter(k=>!Eie(this.ctx,k)&&k.createdAt>C).length}),shouldAutoRespond$:Be((p=s.should_auto_respond)!=null?p:null),groupLink$:Be((g=s.magic_link_url)!=null?g:null),groupLinkShareText$:Be((h=s.magic_link_share_text)!=null?h:null),shouldInsertHeader$:St(()=>y.messages$().some(C=>C.role==="system"&&C.content.type==="create_magic_link")),creatorAccountUserId$:Be(Qs(s.creator_account_user_id)),fetchSource$:Be(n),_oai_internal_roomSystemInstructions:(x=s.oai_internal_system_instructions)!=null?x:null,_oai_internal_speakDecisionToolDescription:(v=s.oai_internal_speak_decision_tool_description)!=null?v:null},b=new Map(o);b.set(s.id,y),this.rooms$.set(b)}const c=new Map(this.users$());for(const y of a)c.set(y.accountUserId,{accountUserId:y.accountUserId,name:y.name,avatarUrl:y.avatarUrl,username:y.username});this.users$.set(c);const d=new Map(this.userProfileSnapshots$());for(const y of i)d.set(y.accountUserId,y);this.userProfileSnapshots$.set(d)})})});Q(this,"_handleMessagesResponse$",(e,n)=>{var a;const s=this.rooms$().get(e);if(!s)return;const o=(a=et(this.ctx))==null?void 0:a.normalizedAccountUserId;for(const i of n)i.role==="user"&&i.account_user_id===o&&i.request_id&&s.optimisticMessages$.set(l=>l.filter(c=>c.requestId!==i.request_id));t0(this.ctx,n),FC(s.messages$,n)});Q(this,"_handleMessageUpdate$",(e,n)=>{const s=this.rooms$().get(e);s&&s.messages$.set(Lc(o=>{const a=o.findIndex(i=>i.id===n.id);a!==-1&&(o[a]=zu(n))},s.messages$()))});Q(this,"_handleHeartbeatPayload$",e=>{var l,c;const{source:n,room_id:s,timestamp:o}=e,a=this.rooms$().get(s);if(a==null)return;const i=new Date(o*1e3);switch(n.role){case"user":{a.userHeartbeats$.set(d=>{const u=setTimeout(()=>{a.userHeartbeats$.set(m=>m.filter(p=>p.accountUserId!==n.account_user_id))},OC),f=d.find(m=>m.accountUserId===n.account_user_id);if(f!=null){const m=w({},f);return m.timestamp=i,clearTimeout(m.timeoutRef),m.timeoutRef=u,d.map(p=>p.accountUserId===n.account_user_id?m:p)}else return[...d,{accountUserId:n.account_user_id,timestamp:i,timeoutRef:u}]});break}case"assistant":{for(const u of a.assistantHeartbeats$())clearTimeout(u.timeoutRef);const d=setTimeout(()=>{a.assistantHeartbeats$.set(u=>u.filter(f=>f.modelSlug!==n.model_slug))},OC);a.assistantHeartbeats$.set([{modelSlug:n.model_slug,taskType:(l=n.task_type)!=null?l:null,timestamp:i,timeoutRef:d,message:(c=n.message)!=null?c:null}]);break}}});Q(this,"_cancelHeartbeat$",(e,n)=>{if(n.role==null)return;const s=this.rooms$().get(e);if(s!=null)switch(n.role){case"assistant":{for(const o of s.assistantHeartbeats$())clearTimeout(o.timeoutRef);s.assistantHeartbeats$.set([]);break}case"user":{s.userHeartbeats$.set(o=>{const a=o.find(i=>i.accountUserId===n.account_user_id);return a==null?o:(clearTimeout(a.timeoutRef),o.filter(i=>i.accountUserId!==n.account_user_id))});break}}});Q(this,"_fetchRoomsSidebarLightweight$",async(e=null)=>{const n=await ge.safeGet("/calpico/chatgpt/rooms/summary",{parameters:{query:{cursor:e,limit:kie}}});return Co(()=>{var s;this.hasFetchedRooms$.set(!0),this._handleRoomsResponse$({response:n.items.map(o=>{var a,i,l;return U(w({},o),{creator_account_user_id:(a=o.creator_account_user_id)!=null?a:null,magic_link_url:(i=o.magic_link_url)!=null?i:null,magic_link_share_text:(l=o.magic_link_share_text)!=null?l:null,member_profile_snapshots:[]})}),fetchSource:"summary"}),this.roomsPaginationCursor$.set((s=n.cursor)!=null?s:null)}),n});Q(this,"fetchMoreRooms$",async()=>{const e=this.roomsPaginationCursor$();if(!(this.isFetchingMoreRooms$()||e==null)){this.isFetchingMoreRooms$.set(!0);try{await this._fetchRoomsSidebarLightweight$(e)}finally{this.isFetchingMoreRooms$.set(!1)}}});Q(this,"fetchRoom$",async e=>{const n=await ge.safeGet("/calpico/chatgpt/rooms/{room_id}",{parameters:{path:{room_id:e}}});return this._handleRoomsResponse$({response:[n],fetchSource:"rest-full"}),n});Q(this,"createRoom$",async e=>{const n={};try{const o=await Cie(Rx.CreateRoom);Object.assign(n,LC(o))}catch(o){const a=o instanceof Error?o.message:"Failed to get sentinel token";Object.assign(n,LC(a)),Re.addError("Calpico sentinel token fetch failed",{error:o,sentinelFlow:Rx.CreateRoom,errorMessage:a})}const s=await ge.safePost("/calpico/chatgpt/rooms",{requestBody:e,additionalHeaders:n});return this._handleRoomsResponse$({response:[s],fetchSource:"rest-full"}),s});Q(this,"shareThreadToCalpico$",async e=>{if(!e)throw new Error("Cannot share conversation without server thread id");return this._createRoomFromSinglePlayerThread$(e)});Q(this,"_createRoomFromSinglePlayerThread$",async e=>{const n={room_type:"GROUP_DM",with_user_emails:[],with_account_user_ids:[],with_conversation_id:e};return this.createRoom$(n)});Q(this,"removeMemberFromRoom$",async(e,n)=>{const s=await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}/members/{account_user_id}",{parameters:{path:{room_id:e,account_user_id:n}}});return this._handleRoomsResponse$({response:[s],fetchSource:"rest-full"}),s});Q(this,"editRoom$",async(e,n)=>{const s=await ge.safePatch("/calpico/chatgpt/rooms/{room_id}",{parameters:{path:{room_id:e}},requestBody:n});return this._handleRoomsResponse$({response:[s],fetchSource:"rest-full"}),s});Q(this,"leaveRoom$",async e=>{await ge.safePost("/calpico/chatgpt/rooms/{room_id}/leave",{parameters:{path:{room_id:e}}});const n=new Map(this.rooms$());n.delete(e),this.rooms$.set(n)});Q(this,"deleteRoom$",async e=>{await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}",{parameters:{path:{room_id:e}}});const n=new Map(this.rooms$());n.delete(e),this.rooms$.set(n)});Q(this,"sendMessage$",async(e,n,s)=>{var i;const o=this.rooms$().get(e),a=(i=et(this.ctx))==null?void 0:i.normalizedAccountUserId;o&&a&&n.request_id?await this._postAndUpdateOptimisticMessage$(o,a,n,s):await this._postAndUpdateMessages$(e,n)});Q(this,"_setOptimisticMessageDeliveryState$",(e,n,s,o)=>{e.optimisticMessages$.set(a=>a.map(i=>i.requestId===n?U(w({},i),{deliveryState:s,deliveryErrorMessage:o}):i))});Q(this,"_postAndUpdateOptimisticMessage$",async(e,n,s,o)=>{if(!s.request_id)return await this._postAndUpdateMessages$(e.id,s);const a={id:s.request_id,role:"user",accountUserId:n,content:Aie(s.content,o),createdAt:new Date,reactions:{},replyTo:Mie(s.reply_to),deliveryState:"pending",requestId:s.request_id,deletedAt:null,preview:s.content.text,deliveryErrorMessage:null};e.optimisticMessages$.set(i=>{const l=[...i,a];return l.sort((c,d)=>c.createdAt.getTime()-d.createdAt.getTime()),l});try{await this._postAndUpdateMessages$(e.id,s)}catch(i){const l=GT(i);this._setOptimisticMessageDeliveryState$(e,s.request_id,"failed",l)}});Q(this,"fetchMessages$",async({roomId:e,before:n=null,after:s=null})=>{const o=this.rooms$().get(e);if(!o)return[];if(n!=null&&o.hasFetchedBeginning$()||o.isFetchingMessages$())return[];o.isFetchingMessages$.set(!0);try{const a=await ge.safeGet("/calpico/chatgpt/rooms/{room_id}/messages",{parameters:{path:{room_id:e},query:{before:n,after:s,limit:wie}}});return n!=null&&a.items.length===0&&o.hasFetchedBeginning$.set(!0),this._handleMessagesResponse$(e,a.items),a.items}finally{o.isFetchingMessages$.set(!1)}});Q(this,"fetchMoreMessages$",(e,n)=>{const s=this.rooms$().get(e);if(!s)return;const o=s.messages$(),a=n==="before"&&o[0]?o[0].id:null,i=n==="after"&&o.length>0?o[o.length-1].id:null;return this.fetchMessages$({roomId:e,before:a,after:i})});Q(this,"deleteMessage$",async(e,n)=>{const s=this.rooms$().get(e);s&&(s.messages$.set(o=>o.filter(a=>a.id!==n)),await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}/messages/{message_id}",{parameters:{path:{room_id:e,message_id:n}}}))});Q(this,"_markRoomRead$",(e,n)=>{const s=this.rooms$().get(e);s&&s.lastReadAt$.set(n)});Q(this,"markRoomRead$",async(e,n)=>{var o;await Mh(()=>gH(this.ctx));const s=(o=this.rooms$().get(e))==null?void 0:o.lastReadAt$();(s==null||n>s)&&(await ge.safePost("/calpico/chatgpt/rooms/{room_id}/read",{parameters:{path:{room_id:e}},requestBody:{last_read_at:new Date().toISOString()}}),this._markRoomRead$(e,n))});Q(this,"_addReactionLocal$",(e,n,s,o)=>{const a=this.rooms$().get(e);a&&a.messages$.set(Lc(i=>{const l=i.find(c=>c.id===n);l&&l.role!=="system"&&(l.reactions[s]=o)},a.messages$()))});Q(this,"_removeReactionLocal$",(e,n,s)=>{const o=this.rooms$().get(e);o&&o.messages$.set(Lc(a=>{const i=a.find(l=>l.id===n);i&&i.role!=="system"&&delete i.reactions[s]},o.messages$()))});Q(this,"addMessageReaction$",async(e,n,s)=>{var a;const o=(a=et(this.ctx))==null?void 0:a.normalizedAccountUserId;o&&this._addReactionLocal$(e,n,o,s.reaction),await ge.safePost("/calpico/chatgpt/rooms/{room_id}/messages/{message_id}/reactions",{parameters:{path:{room_id:e,message_id:n}},requestBody:s})});Q(this,"removeMessageReaction$",async(e,n)=>{var o;const s=(o=et(this.ctx))==null?void 0:o.normalizedAccountUserId;s&&this._removeReactionLocal$(e,n,s),await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}/messages/{message_id}/reactions",{parameters:{path:{room_id:e,message_id:n}}})});Q(this,"_fetchSelfProfile$",async()=>{var o,a;const e=(o=et(this.ctx))==null?void 0:o.normalizedAccountUserId;if(e==null)return null;const n=await ge.safeGet("/calpico/chatgpt/profile/{user_id}",{parameters:{path:{user_id:e}}}),s=new Map(this.users$());return s.set(e,{accountUserId:e,name:(a=n.display_name)!=null?a:"User",avatarUrl:n.profile_picture_url,username:n.username}),this.users$.set(s),n});Q(this,"updateSelfProfile$",async e=>{var a,i;const n=(a=et(this.ctx))==null?void 0:a.normalizedAccountUserId;if(n==null)return null;const s=await ge.safePost("/calpico/chatgpt/profile/{user_id}",{parameters:{path:{user_id:n}},requestBody:e}),o=new Map(this.users$());return o.set(n,{accountUserId:n,name:(i=s.display_name)!=null?i:"User",avatarUrl:s.profile_picture_url,username:s.username}),this.users$.set(o),s});Q(this,"updateSelfUsername$",async e=>{var a,i;const n=(a=et(this.ctx))==null?void 0:a.normalizedAccountUserId;if(n==null)return null;const s=await ge.safePost("/calpico/chatgpt/profile/{user_id}/username",{parameters:{path:{user_id:n}},requestBody:e}),o=new Map(this.users$());return o.set(n,{accountUserId:n,name:(i=s.display_name)!=null?i:"User",avatarUrl:s.profile_picture_url,username:s.username}),this.users$.set(o),s});Q(this,"acceptMagicLink$",async e=>{const n=await ge.safePost("/calpico/chatgpt/links",{requestBody:e});switch(n.content.type){case"invitation_redeemed":{const s=n.content.room_id;return this.fetchRoom$(s),{roomId:s}}case"noop":return null;default:throw new Error("Unknown redeem response type: ".concat(n.content.type))}});Q(this,"createGroupLink$",async({roomId:e})=>{const n=await ge.safePost("/calpico/chatgpt/rooms/{room_id}/group_link",{parameters:{path:{room_id:e}}}),s=Qs(n.magic_link_url),o=Qs(n.magic_link_share_text),i=this.rooms$().get(n.room_id);return i==null||(i.groupLink$.set(s),i.groupLinkShareText$.set(o)),s});Q(this,"deleteGroupLink$",async({roomId:e})=>{await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}/group_link",{parameters:{path:{room_id:e}}});const s=this.rooms$().get(e);if(s==null)return null;s.groupLink$.set(null),s.groupLinkShareText$.set(null)});Q(this,"resetGroupLink$",async({roomId:e})=>{const n=await ge.safePatch("/calpico/chatgpt/rooms/{room_id}/group_link",{parameters:{path:{room_id:e}}}),s=Qs(n.magic_link_url),o=Qs(n.magic_link_share_text),i=this.rooms$().get(n.room_id);return i==null||(i.groupLink$.set(s),i.groupLinkShareText$.set(o)),s});Q(this,"openThreadSidebar$",(e,n)=>{if(n.type!=="product")return;const s=e.messages$().find(o=>o.role!=="assistant"?!1:o.rawMessages.find(a=>a.id===n.messageId));if(s!=null)return e.threadSidebar$.set(U(w({},n),{calpicoMessageId:s.id}))});Q(this,"closeThreadSidebar$",e=>{e.threadSidebar$.set(null)});Q(this,"_fetchUserAttributes$",async()=>{const e=await ge.safeGet("/calpico/chatgpt/user_attributes");return this.userAttributes$.set({onboardedAt:e.onboarded_at?new Date(e.onboarded_at):null}),e});Q(this,"setUserOnboardingCompletion$",async()=>{const e=await ge.safePost("/calpico/chatgpt/user_attributes/onboarding_completion");this.userAttributes$.set({onboardedAt:e.onboarded_at?new Date(e.onboarded_at):null})});if(this.ctx=e,!this.hasAccess)return;this._fetchRoomsSidebarLightweight$(),this._fetchSelfProfile$(),this._fetchUserAttributes$();const s=pH(e).getTopic("calpico-chatgpt");s.subscribe(),s.onMessage(this._handlePubSubMessage)}get hasAccess(){return ye(this.ctx,"3096078201")}async _postAndUpdateMessages$(e,n){await ge.safePost("/calpico/chatgpt/rooms/{room_id}/messages",{parameters:{path:{room_id:e}},requestBody:n}),await this.fetchMoreMessages$(e,"after")}}async function jie({roomId:t}){return await ge.safePost("/calpico/chatgpt/rooms/{room_id}/responding_heartbeat",{parameters:{path:{room_id:t}}})}const Xqe=b3(jie,Sie,{trailing:!1}),om=Wn(t=>new Iie(t)),Nie=null;function Ab(t){const e=V(),n=om(e);return ae(()=>{var s,o;return n.hasAccess&&(o=(s=n.users$().get(t))!=null?s:n.userProfileSnapshots$().get(t))!=null?o:null})}function eYe(t){var e,n;return(n=(e=Ab(t))==null?void 0:e.name)!=null?n:"User"}function tYe(t){var e,n;return(n=(e=Ab(t))==null?void 0:e.avatarUrl)!=null?n:""}function Pie(t){return es({queryKey:["calpico-file",t],queryFn:()=>ge.safeGet("/calpico/chatgpt/files/{file_id}",{parameters:{path:{file_id:t}}}),staleTime:WT})}function t0(t,e){var s;const n=Jo(t);for(const o of e)if(o.role==="user"){const a=(s=o.content.attachments)!=null?s:[];for(const i of a)i.type==="file"&&i.file&&n.setQueryData(Pie(i.file_id).queryKey,i.file)}}var n0,BC;function Rie(){if(BC)return n0;BC=1;var t=hH();function e(n,s,o,a){return t(n,function(i,l,c){s(a,o(i),l,c)}),a}return n0=e,n0}var s0,UC;function Lie(){if(UC)return s0;UC=1;var t=Rie();function e(n,s){return function(o,a){return t(o,n,s(a),{})}}return s0=e,s0}var o0,$C;function Oie(){if($C)return o0;$C=1;var t=_H(),e=Lie(),n=fh(),s=Object.prototype,o=s.toString,a=e(function(i,l,c){l!=null&&typeof l.toString!="function"&&(l=o.call(l)),i[l]=c},t(n));return o0=a,o0}var Die=Oie();const Fie=Gn(Die);function Ib(t,e){var a,i,l,c;if(!t||e==null)return null;const{resolveTempTextdocId:n}=t,s=(a=n==null?void 0:n[e])!=null?a:e;let o=(l=(i=t.textdocById[s])!=null?i:t.textdocById[e])!=null?l:null;if(!o&&n){const d=Fie(n);o=(c=t.textdocById[d[s]])!=null?c:null}return o}var a0=z$();const Ag=Symbol(),Bie=Symbol(),Uie=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),pN=Uie?_.useEffect:_.useLayoutEffect,$ie=a0.unstable_runWithPriority?t=>{try{a0.unstable_runWithPriority(a0.unstable_NormalPriority,t)}catch(e){if(e.message==="Not implemented.")t();else throw e}}:t=>t(),Vie=t=>({value:n,children:s})=>{const o=_.useRef(n),a=_.useRef(0),[i,l]=_.useState(null);i&&(i(n),l(null));const c=_.useRef();if(!c.current){const d=new Set,u=(f,m)=>{a.current+=1;const p={n:a.current};m!=null&&m.suspense&&(p.n*=-1,p.p=new Promise(g=>{l(()=>h=>{p.v=h,delete p.p,g(h)})})),d.forEach(g=>g(p)),f()};c.current={[Ag]:{v:o,n:a,l:d,u}}}return pN(()=>{o.current=n,a.current+=1,$ie(()=>{c.current[Ag].l.forEach(d=>{d({n:a.current,v:n})})})},[n]),_.createElement(t,{value:c.current},s)};function Hie(t){const e=_.createContext({[Ag]:{v:{current:t},n:{current:-1},l:new Set,u:n=>n()}});return e[Bie]=e.Provider,e.Provider=Vie(e.Provider),delete e.Consumer,e}function Gie(t,e){const n=_.useContext(t)[Ag],{v:{current:s},n:{current:o},l:a}=n,i=e(s),[l,c]=_.useReducer((d,u)=>{if(!u)return[s,i];if("p"in u)throw u.p;if(u.n===o)return Object.is(d[1],i)?d:[s,i];try{if("v"in u){if(Object.is(d[0],u.v))return d;const f=e(u.v);return Object.is(d[1],f)?d:[u.v,f]}}catch(f){}return[...d]},[s,i]);return Object.is(l[1],i)||c(),pN(()=>(a.add(c),()=>{a.delete(c)}),[a]),l[1]}var Lx=(t=>(t.NATIVE="native",t.LAST_TURN="last_turn",t))(Lx||{});const gN=Hie(null);function Wie(){return{lastCanvasAssistantMessageById:{},resolveTempCommentId:{},resolveTempTextdocId:{},latestTextdocId:null}}function hN(t){return w({fetchError:null,isFetchingFromPersistence:!1,textdocById:{},allTextdocIdSet:{},streamingSource:null},t!=null?t:Wie())}function ei(t,e){return Lc(t,e)}function qu(t,e,n=!0){var o,a,i,l;const s=t.textdocById[e.textdocId];if(s)t.textdocById[e.textdocId]=s,s.metadata.type=e.type,s.metadata.title=e.title,s.metadata.updatedAt=e.createdAt,s.metadata.contentReferences=(i=e.metadata)==null?void 0:i.content_references,s.metadata.hiveId=(l=e.metadata)==null?void 0:l.hive_id,n?s.versions.push(e):s.versions[s.versions.length-1]=e;else{const c={metadata:{textdocId:e.textdocId,type:e.type,title:e.title,createdAt:e.createdAt,updatedAt:e.createdAt,contentReferences:(o=e.metadata)==null?void 0:o.content_references,hiveId:(a=e.metadata)==null?void 0:a.hive_id},versions:[e]};t.allTextdocIdSet[e.textdocId]=e.textdocId,t.textdocById[e.textdocId]=c}}var zie=fh();const qie=Gn(zie);function ko(t=qie){return Gie(gN,t)}function Yie(){return ko(t=>t==null?void 0:t.isFetchingFromPersistence)}function nYe(){return ko(t=>t==null?void 0:t.resolveTempCommentId)}function Zie(){return ko(t=>{var e;return(e=t==null?void 0:t.latestTextdocId)!=null?e:null})}function sYe(){return ko(t=>{var e;return(e=t==null?void 0:t.streamingSource)!=null?e:null})}function oYe(t){return ko(e=>Ib(e,t))}function k1(t){return ko(e=>{var n,s;return(s=(n=Ib(e,t))==null?void 0:n.metadata)!=null?s:null})}function _N(){const t=ko(e=>e==null?void 0:e.allTextdocIdSet);return t?Object.keys(t):null}function Kie(){return ko(t=>t?Object.keys(t.allTextdocIdSet).length>1:!1)}function Qie({textdocId:t,assistantMessageId:e}){return ko(n=>{const s=n==null?void 0:n.lastCanvasAssistantMessageById;return s==null||t==null?!0:s[t]==null||s[t]===e})}function xN(){return yi(t=>t.focusedObject)}function aYe(){const t=yi(e=>e.focusedObject);return(t==null?void 0:t.type)!==fl.Textdoc?null:t}function am(){return xN()!=null}function jb(t){const e=xN();return ko(n=>{var i,l,c;if(!t||(e==null?void 0:e.type)!==fl.Textdoc)return!1;const s=(i=n==null?void 0:n.resolveTempTextdocId)!=null?i:{},o=(l=s[e.textdocId])!=null?l:e.textdocId,a=(c=s[t])!=null?c:t;return o===a})}const Jie=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),Xie=({children:t})=>{const e=_N(),n=Mo();return!(e!=null&&e.length)||n?null:r.jsxs(Y.Root,{children:[r.jsx(Y.BasicTrigger,{children:t}),r.jsx(Y.Portal,{children:r.jsx(Y.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:e.map(s=>r.jsx(ele,{textdocId:s},s))})})]})},ele=({textdocId:t})=>{const e=Qs(k1(t));return r.jsx(Y.Item,{icon:Jie,onClick:()=>{Fl.logButtonClick(c1.FILE_DRAWER_ITEM),vi(e.textdocId)},children:r.jsx("span",{className:"block max-w-[200px] truncate",children:e.title})})},tle=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),rYe=()=>{const t=_N(),e=am();return!t||e?null:t.length===1?r.jsx(nle,{textdocId:t[0]}):r.jsx(Xie,{children:r.jsx(yN,{})})},nle=({textdocId:t})=>{const e=Qs(k1(t));return r.jsx(yN,{onClick:()=>vi(e.textdocId)})},yN=({onClick:t})=>{const e=ne();return r.jsx(_t,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:r.jsx(sm,{onClick:t,icon:tle,style:{viewTransitionName:"var(--vt-thread-header-open-canvas)"}})})},ci="canmore";var Yn=(t=>(t.CreateTextdoc="".concat(ci,".create_textdoc"),t.UpdateTextdoc="".concat(ci,".update_textdoc"),t.CommentTextdoc="".concat(ci,".comment_textdoc"),t))(Yn||{});function vN(t){return t===Yn.CreateTextdoc||t===Yn.UpdateTextdoc||t===Yn.CommentTextdoc}var Tt=(t=>(t[t.STREAMING=0]="STREAMING",t[t.WAITING=1]="WAITING",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t[t.CANCELED=4]="CANCELED",t[t.REDACTED=5]="REDACTED",t))(Tt||{});function sle({thread:t,leafId:e}){return t?he.findNode(t,n=>{var s,o;return((s=n.message.author.name)==null?void 0:s.startsWith("".concat(ci,".")))===!0||((o=n.message.recipient)==null?void 0:o.startsWith("".concat(ci,".")))===!0},e!=null?e:he.getCurrentLeafId(t))!=null:!1}function Nb(t,e){return sle({thread:t,leafId:e})}function bN(t){const e=jt();return _.useCallback(async()=>{if(!t)return;const n=await Ma(t);eo(e,n.gizmo_id)},[e,t])}function ole(t,e){const n=t.originalConversationId;uf({clientThreadId:n,title:t.title?e.formatMessage({id:"R1QYtC",defaultMessage:"Completed {taskTitle}"},{taskTitle:t.title}):e.formatMessage({id:"qi9HQV",defaultMessage:"Task complete"}),subtitle:e.formatMessage({id:"EgCRBg",defaultMessage:"Click here to view the result of your task"})})}const ale=t=>{"use forget";var E;const e=G.c(12),{isOdysseyTurn:n,hasConduitToken:s,isProTurn:o,isDeepResearchTurn:a,isImageGenAsync:i,isImageGenSync:l,metadataNode:c,isInterruptionBlocked:d}=Ve(t,rle),u=V(),f=(E=c==null?void 0:c.message.metadata)==null?void 0:E.async_task_id;let m;e[0]!==f?(m=T=>f?T.tasks[f]:null,e[0]=f,e[1]=m):m=e[1];const p=kr(m);let g;e[2]!==u?(g=ye(u,"1439437954"),e[2]=u,e[3]=g):g=e[3];const h=g;let x;e[4]!==u||e[5]!==(p==null?void 0:p.status)?(x=(p==null?void 0:p.status)===An.RUNNING&&ye(u,"877631007"),e[4]=u,e[5]=p==null?void 0:p.status,e[6]=x):x=e[6];const v=x;let y;e[7]!==u||e[8]!==(p==null?void 0:p.status)?(y=((p==null?void 0:p.status)===An.RUNNING||(p==null?void 0:p.status)===An.FINALIZING)&&ye(u,"1927459101"),e[7]=u,e[8]=p==null?void 0:p.status,e[9]=y):y=e[9];const b=y;let C;e[10]!==u?(C=ze(u,"3396794266").get("enable_interruption",!1),e[10]=u,e[11]=C):C=e[11];const k=C&&s&&!o&&!a&&!i&&!l;return d?!1:h||n||k||v||b},Gd=t=>ye(t,"1927459101"),iYe=t=>ye(t,"877631007");function rle(t){var e,n,s,o,a,i,l,c,d,u,f,m,p,g,h;return{isOdysseyTurn:!!((n=(e=he.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&n.n7jupd_message),hasConduitToken:(t==null?void 0:t.conduitToken)!=null,isProTurn:!!(((s=he.getCurrentNode(t))==null?void 0:s.message.author.name)===Pn.A8KM123||(i=(a=(o=he.getCurrentNode(t))==null?void 0:o.message.metadata)==null?void 0:a.model_slug)!=null&&i.endsWith("-pro")),isDeepResearchTurn:!!((c=(l=he.getCurrentNode(t))==null?void 0:l.message.metadata)!=null&&c.deep_research_version),isImageGenAsync:!!((u=(d=he.getCurrentNode(t))==null?void 0:d.message.metadata)!=null&&u.image_gen_async),isImageGenSync:((m=(f=he.getCurrentNode(t))==null?void 0:f.message.author)==null?void 0:m.role)===Ke.Assistant&&((p=he.getCurrentNode(t))==null?void 0:p.message.recipient)===ul,metadataNode:he.findAsyncTaskMetadataNode(t),isInterruptionBlocked:!!((h=(g=he.getCurrentNode(t))==null?void 0:g.message.metadata)!=null&&h.block_interruption)}}const ile=()=>!1;function lle({task:t}){const e=ne(),n=V(),s=t.originalConversationId,o=Ao(),a=ae(()=>o==null?void 0:o.serverId$()),i=ile(t.originalConversationId),l=bN(s),c=Gd(n),d=a===s,{clearSystemHintModeTrigger:u}=oa();return _.useEffect(()=>{var f,m;(f=t.notificationStatus)!=null&&f.recentlyCompleted&&!((m=t.notificationStatus)!=null&&m.notificationSent)&&!i&&(c&&og(n)?Ze(s,p=>{dn.setShouldRefetchConvoOnFinalize(p,!0)}):(d||(l(),ole(t,e)),u(Pe.Research),As.setTaskNotificationSent(t.taskId)))},[t,e,l,i,u,c,d,n,s]),r.jsx(Kn.Fragment,{})}function lYe(){const t=kr(af.getAllTasksOrdered);return xH(),t.length?r.jsx(r.Fragment,{children:t.map(e=>r.jsx(lle,{task:e},e.taskId))}):null}function fd({percentage:t,thickness:e=1/12,className:n,sizeOverride:s,backgroundStrokeClassName:o="stroke-gray-400",transitionDuration:a,transitionTimingFunction:i,onTransitionEnd:l}){const c=s!=null?s:120,d=c*e,u=(c-d)/2,f=2*Math.PI*u,m=f-t/100*f;return r.jsxs("svg",{width:c,height:c,viewBox:"0 0 ".concat(c," ").concat(c),className:n,children:[r.jsx("circle",{className:W("origin-[50%_50%] -rotate-90",o),strokeWidth:d,fill:"transparent",r:u,cx:c/2,cy:c/2}),r.jsx("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:d,strokeDashoffset:m,strokeDasharray:"".concat(f," ").concat(f),fill:"transparent",r:u,cx:c/2,cy:c/2,style:{strokeLinecap:"round",transitionDuration:a,transitionTimingFunction:i},onTransitionEnd:l})]})}const cle=({size:t=40,className:e="text-blue-400",backgroundStrokeClassName:n="stroke-gray-400"})=>{const s=t,o=1/12,a=s*o,i=(s-a)/2,l=2*Math.PI*i,d=l-60/100*l;return r.jsxs("svg",{width:s,height:s,viewBox:"0 0 ".concat(s," ").concat(s),className:W("animate-spin",e),children:[r.jsx("circle",{className:W("origin-[50%_50%] -rotate-90",n),strokeWidth:a,fill:"transparent",r:i,cx:s/2,cy:s/2}),r.jsx("circle",{className:"origin-[50%_50%] -rotate-90",stroke:"currentColor",strokeWidth:a,strokeDashoffset:d,strokeDasharray:"".concat(l," ").concat(l),fill:"transparent",r:i,cx:s/2,cy:s/2,style:{strokeLinecap:"round"}})]})},CN="personalization:open-memories-modal",r0=R(()=>P(()=>import("./lur401x4nz6oqotk.js"),__vite__mapDeps([142,1])),{loading:t=>O(t)}),dle=R(()=>P(()=>Promise.resolve().then(()=>f5),void 0),{loading:t=>O(t)});function dp({label:t,tooltip:e,Icon:n,tooltipInteractive:s=!1}){return r.jsx(_t,{label:e,interactive:s,children:r.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold opacity-70",children:[n&&r.jsx(n,{className:"icon-sm"}),r.jsx("div",{children:t})]})})}function cYe({clientThreadId:t,gizmoId:e}){const n=V(),s=ne(),o=ot(),{openSettings:a}=tm(),i=Vd(),l=Ii(),c=b1(),{data:d}=zf(e,!1,c),u=!!e,f=Toe(),m=Pv(n,d==null?void 0:d.memoryFullPct),p=m!=="control",g=Es(),h=Ve(t,he.getIsNewConversation),x=ae(()=>Md(n));if(!c)return null;const v=()=>{var y;if(typeof window<"u")try{(y=window.sessionStorage)==null||y.setItem(CN,"true")}catch(b){}};if(g&&(!h||u))return r.jsx(dp,{label:s.formatMessage(Ba.temporaryChat),tooltip:s.formatMessage(Ba.temporaryChatTooltip),Icon:dle});if(x&&!h)return r.jsx(dp,{label:s.formatMessage(Ba.memoryOff),tooltip:s.formatMessage(Ba.developerModeTooltip),Icon:r0});if(i&&!l&&!g)return r.jsx(dp,{label:s.formatMessage(Ba.memoryOff),tooltip:s.formatMessage(Ba.memoryOffTooltip),Icon:r0});if(d&&(d==null?void 0:d.memoryFullPct)>=100&&!g&&!f){const y=()=>{B.logEventWithStatsig("Memory Indicator Upgrade Clicked","chatgpt_memory_indicator_upgrade_clicked",{memoryFullButtonVariant:m}),xn(o,"Memory Indicator")},b=()=>{B.logEventWithStatsig("Memory Indicator Manage Clicked","chatgpt_memory_indicator_manage_clicked",{memoryFullButtonVariant:m}),v(),a(Rn.Personalization)};return r.jsx(dp,{label:s.formatMessage(Ba.memoryFull),tooltip:r.jsx("div",{className:"whitespace-normal",children:r.jsx(j,U(w({},p?Ba.memoryFullTooltipGoldenHour:Ba.memoryFullTooltip),{values:{upgrade:C=>r.jsx("button",{onClick:y,className:"text-token-text-link underline",children:C}),manage:C=>r.jsx("button",{onClick:b,className:"text-token-text-link underline",children:C}),link:C=>r.jsx(Eo,{to:Nl(Rn.Personalization),className:"underline",children:C})}}))}),Icon:r0,tooltipInteractive:!0})}else return null}const Ba=be({temporaryChat:{id:"ConversationPrivacyIndicator.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatTooltip:{id:"ConversationPrivacyIndicator.temporaryChatTooltip",defaultMessage:"Temporary Chats won't appear in your history, and ChatGPT won't remember anything you talk about."},memoryOff:{id:"ConversationPrivacyIndicator.memoryOff",defaultMessage:"Memory Off"},memoryOffTooltip:{id:"ConversationPrivacyIndicator.memoryOffTooltip",defaultMessage:"ChatGPT won't remember anything you talk about in this conversation."},developerModeTooltip:{id:"ConversationPrivacyIndicator.developerModeTooltip",defaultMessage:"ChatGPT won't reference past memories, or create new memories from this chat."},memoryFull:{id:"Z4zW/R",defaultMessage:"Memory full"},memoryFullTooltip:{id:"7IKefd",defaultMessage:"ChatGPT's out of space for saved memories. <link>Manage saved memories</link> to create more space."},memoryFullTooltipGoldenHour:{id:"mc0vkm",defaultMessage:"New memories can't be saved. <upgrade>Upgrade</upgrade> for more memory or <manage>manage</manage> saved memories."}}),SN=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M2.6687 11.333V8.66699C2.6687 7.74455 2.66841 7.01205 2.71655 6.42285C2.76533 5.82612 2.86699 5.31731 3.10425 4.85156L3.25854 4.57617C3.64272 3.94975 4.19392 3.43995 4.85229 3.10449L5.02905 3.02149C5.44666 2.84233 5.90133 2.75849 6.42358 2.71582C7.01272 2.66769 7.74445 2.66797 8.66675 2.66797H9.16675C9.53393 2.66797 9.83165 2.96586 9.83179 3.33301C9.83179 3.70028 9.53402 3.99805 9.16675 3.99805H8.66675C7.7226 3.99805 7.05438 3.99834 6.53198 4.04102C6.14611 4.07254 5.87277 4.12568 5.65601 4.20313L5.45581 4.28906C5.01645 4.51293 4.64872 4.85345 4.39233 5.27149L4.28979 5.45508C4.16388 5.7022 4.08381 6.01663 4.04175 6.53125C3.99906 7.05373 3.99878 7.7226 3.99878 8.66699V11.333C3.99878 12.2774 3.99906 12.9463 4.04175 13.4688C4.08381 13.9833 4.16389 14.2978 4.28979 14.5449L4.39233 14.7285C4.64871 15.1465 5.01648 15.4871 5.45581 15.7109L5.65601 15.7969C5.87276 15.8743 6.14614 15.9265 6.53198 15.958C7.05439 16.0007 7.72256 16.002 8.66675 16.002H11.3337C12.2779 16.002 12.9461 16.0007 13.4685 15.958C13.9829 15.916 14.2976 15.8367 14.5447 15.7109L14.7292 15.6074C15.147 15.3511 15.4879 14.9841 15.7117 14.5449L15.7976 14.3447C15.8751 14.128 15.9272 13.8546 15.9587 13.4688C16.0014 12.9463 16.0017 12.2774 16.0017 11.333V10.833C16.0018 10.466 16.2997 10.1681 16.6667 10.168C17.0339 10.168 17.3316 10.4659 17.3318 10.833V11.333C17.3318 12.2555 17.3331 12.9879 17.2849 13.5771C17.2422 14.0993 17.1584 14.5541 16.9792 14.9717L16.8962 15.1484C16.5609 15.8066 16.0507 16.3571 15.4246 16.7412L15.1492 16.8955C14.6833 17.1329 14.1739 17.2354 13.5769 17.2842C12.9878 17.3323 12.256 17.332 11.3337 17.332H8.66675C7.74446 17.332 7.01271 17.3323 6.42358 17.2842C5.90135 17.2415 5.44665 17.1577 5.02905 16.9785L4.85229 16.8955C4.19396 16.5601 3.64271 16.0502 3.25854 15.4238L3.10425 15.1484C2.86697 14.6827 2.76534 14.1739 2.71655 13.5771C2.66841 12.9879 2.6687 12.2555 2.6687 11.333ZM13.4646 3.11328C14.4201 2.334 15.8288 2.38969 16.7195 3.28027L16.8865 3.46485C17.6141 4.35685 17.6143 5.64423 16.8865 6.53613L16.7195 6.7207L11.6726 11.7686C11.1373 12.3039 10.4624 12.6746 9.72827 12.8408L9.41089 12.8994L7.59351 13.1582C7.38637 13.1877 7.17701 13.1187 7.02905 12.9707C6.88112 12.8227 6.81199 12.6134 6.84155 12.4063L7.10132 10.5898L7.15991 10.2715C7.3262 9.53749 7.69692 8.86241 8.23218 8.32715L13.2791 3.28027L13.4646 3.11328ZM15.7791 4.2207C15.3753 3.81702 14.7366 3.79124 14.3035 4.14453L14.2195 4.2207L9.17261 9.26856C8.81541 9.62578 8.56774 10.0756 8.45679 10.5654L8.41772 10.7773L8.28296 11.7158L9.22241 11.582L9.43433 11.543C9.92426 11.432 10.3749 11.1844 10.7322 10.8271L15.7791 5.78027L15.8552 5.69629C16.185 5.29194 16.1852 4.708 15.8552 4.30371L15.7791 4.2207Z"})),rm=Object.freeze(Object.defineProperty({__proto__:null,default:SN},Symbol.toStringTag,{value:"Module"})),ule=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M2.66821 12.6663V12.5003C2.66821 12.1331 2.96598 11.8353 3.33325 11.8353C3.70052 11.8353 3.99829 12.1331 3.99829 12.5003V12.6663C3.99829 13.3772 3.9992 13.8707 4.03052 14.2542C4.0612 14.6298 4.11803 14.8413 4.19849 14.9993L4.2688 15.1263C4.44511 15.4137 4.69813 15.6481 5.00024 15.8021L5.13013 15.8577C5.2739 15.9092 5.46341 15.947 5.74536 15.97C6.12888 16.0014 6.62221 16.0013 7.33325 16.0013H12.6663C13.3771 16.0013 13.8707 16.0014 14.2542 15.97C14.6295 15.9394 14.8413 15.8825 14.9993 15.8021L15.1262 15.7308C15.4136 15.5545 15.6481 15.3014 15.802 14.9993L15.8577 14.8695C15.9091 14.7257 15.9469 14.536 15.97 14.2542C16.0013 13.8707 16.0012 13.3772 16.0012 12.6663V12.5003C16.0012 12.1332 16.2991 11.8355 16.6663 11.8353C17.0335 11.8353 17.3313 12.1331 17.3313 12.5003V12.6663C17.3313 13.3553 17.3319 13.9124 17.2952 14.3626C17.2624 14.7636 17.1974 15.1247 17.053 15.4613L16.9866 15.6038C16.7211 16.1248 16.3172 16.5605 15.8215 16.8646L15.6038 16.9866C15.227 17.1786 14.8206 17.2578 14.3625 17.2952C13.9123 17.332 13.3553 17.3314 12.6663 17.3314H7.33325C6.64416 17.3314 6.0872 17.332 5.63696 17.2952C5.23642 17.2625 4.87552 17.1982 4.53931 17.054L4.39673 16.9866C3.87561 16.7211 3.43911 16.3174 3.13501 15.8216L3.01294 15.6038C2.82097 15.2271 2.74177 14.8206 2.70435 14.3626C2.66758 13.9124 2.66821 13.3553 2.66821 12.6663ZM9.33521 12.5003V4.9388L7.13696 7.13704C6.87732 7.39668 6.45625 7.39657 6.19653 7.13704C5.93684 6.87734 5.93684 6.45631 6.19653 6.19661L9.52954 2.86263L9.6311 2.77962C9.73949 2.70742 9.86809 2.66829 10.0002 2.66829C10.1763 2.66838 10.3454 2.73819 10.47 2.86263L13.804 6.19661C14.0633 6.45628 14.0634 6.87744 13.804 7.13704C13.5443 7.39674 13.1222 7.39674 12.8625 7.13704L10.6653 4.93977V12.5003C10.6651 12.8673 10.3673 13.1652 10.0002 13.1654C9.63308 13.1654 9.33538 12.8674 9.33521 12.5003Z"})),im=Object.freeze(Object.defineProperty({__proto__:null,default:ule},Symbol.toStringTag,{value:"Module"})),fle=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("circle",{cx:15,cy:5,r:4,fill:"#0285FF"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.65723 2.66504C9.47346 3.08492 9.33855 3.53055 9.25781 3.99512H8.16406L8.16504 4L8.16406 15.9951H12.167C13.1111 15.9951 13.7794 15.9948 14.3018 15.9521C14.8164 15.9101 15.1308 15.83 15.3779 15.7041L15.5615 15.6016C15.9796 15.3452 16.32 14.9775 16.5439 14.5381L16.6299 14.3379C16.7073 14.1211 16.7605 13.8478 16.792 13.4619C16.8347 12.9395 16.835 12.2713 16.835 11.3271V10.5332C17.3083 10.3763 17.7542 10.1607 18.165 9.89453V11.3271C18.165 12.2494 18.1653 12.9812 18.1172 13.5703C18.0745 14.0924 17.9916 14.5473 17.8125 14.9648L17.7295 15.1416C17.394 15.8 16.8833 16.3512 16.2568 16.7354L15.9814 16.8896C15.5157 17.1268 15.0069 17.2286 14.4102 17.2773C13.821 17.3255 13.0893 17.3252 12.167 17.3252H7.83301C6.91072 17.3252 6.17897 17.3255 5.58984 17.2773C5.06758 17.2347 4.61293 17.1508 4.19531 16.9717L4.01855 16.8896C3.36016 16.5542 2.80898 16.0435 2.4248 15.417L2.27051 15.1416C2.03329 14.6759 1.93158 14.167 1.88281 13.5703C1.83468 12.9812 1.83496 12.2494 1.83496 11.3271V8.66309C1.83496 7.74083 1.83469 7.00904 1.88281 6.41992C1.93157 5.82319 2.03332 5.31438 2.27051 4.84863L2.4248 4.57324C2.80898 3.94674 3.36013 3.43608 4.01855 3.10059L4.19531 3.01758C4.61285 2.8385 5.06771 2.75555 5.58984 2.71289C6.17898 2.66476 6.91071 2.66504 7.83301 2.66504H9.65723ZM6.83496 4C6.38353 4.00418 6.01421 4.01227 5.69824 4.03809C5.31232 4.06962 5.03904 4.12274 4.82227 4.2002L4.62207 4.28613C4.18266 4.51003 3.81497 4.85044 3.55859 5.26855L3.45605 5.45215C3.33015 5.69928 3.25006 6.01366 3.20801 6.52832C3.16534 7.05071 3.16504 7.71897 3.16504 8.66309V11.3271C3.16504 12.2713 3.16533 12.9395 3.20801 13.4619C3.25006 13.9766 3.33013 14.2909 3.45605 14.5381L3.55859 14.7217C3.81498 15.1398 4.18268 15.4802 4.62207 15.7041L4.82227 15.79C5.03903 15.8675 5.31235 15.9206 5.69824 15.9521C6.01398 15.9779 6.38301 15.986 6.83398 15.9902L6.83496 4Z"})),dYe=Object.freeze(Object.defineProperty({__proto__:null,default:fle},Symbol.toStringTag,{value:"Module"})),mle=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M6.83496 3.99992C6.38353 4.00411 6.01421 4.0122 5.69824 4.03801C5.31232 4.06954 5.03904 4.12266 4.82227 4.20012L4.62207 4.28606C4.18264 4.50996 3.81498 4.85035 3.55859 5.26848L3.45605 5.45207C3.33013 5.69922 3.25006 6.01354 3.20801 6.52824C3.16533 7.05065 3.16504 7.71885 3.16504 8.66301V11.3271C3.16504 12.2712 3.16533 12.9394 3.20801 13.4618C3.25006 13.9766 3.33013 14.2909 3.45605 14.538L3.55859 14.7216C3.81498 15.1397 4.18266 15.4801 4.62207 15.704L4.82227 15.79C5.03904 15.8674 5.31234 15.9205 5.69824 15.9521C6.01398 15.9779 6.383 15.986 6.83398 15.9902L6.83496 3.99992ZM18.165 11.3271C18.165 12.2493 18.1653 12.9811 18.1172 13.5702C18.0745 14.0924 17.9916 14.5472 17.8125 14.9648L17.7295 15.1415C17.394 15.8 16.8834 16.3511 16.2568 16.7353L15.9814 16.8896C15.5157 17.1268 15.0069 17.2285 14.4102 17.2773C13.821 17.3254 13.0893 17.3251 12.167 17.3251H7.83301C6.91071 17.3251 6.17898 17.3254 5.58984 17.2773C5.06757 17.2346 4.61294 17.1508 4.19531 16.9716L4.01855 16.8896C3.36014 16.5541 2.80898 16.0434 2.4248 15.4169L2.27051 15.1415C2.03328 14.6758 1.93158 14.167 1.88281 13.5702C1.83468 12.9811 1.83496 12.2493 1.83496 11.3271V8.66301C1.83496 7.74072 1.83468 7.00898 1.88281 6.41985C1.93157 5.82309 2.03329 5.31432 2.27051 4.84856L2.4248 4.57317C2.80898 3.94666 3.36012 3.436 4.01855 3.10051L4.19531 3.0175C4.61285 2.83843 5.06771 2.75548 5.58984 2.71281C6.17898 2.66468 6.91071 2.66496 7.83301 2.66496H12.167C13.0893 2.66496 13.821 2.66468 14.4102 2.71281C15.0069 2.76157 15.5157 2.86329 15.9814 3.10051L16.2568 3.25481C16.8833 3.63898 17.394 4.19012 17.7295 4.84856L17.8125 5.02531C17.9916 5.44285 18.0745 5.89771 18.1172 6.41985C18.1653 7.00898 18.165 7.74072 18.165 8.66301V11.3271ZM8.16406 15.995H12.167C13.1112 15.995 13.7794 15.9947 14.3018 15.9521C14.8164 15.91 15.1308 15.8299 15.3779 15.704L15.5615 15.6015C15.9797 15.3451 16.32 14.9774 16.5439 14.538L16.6299 14.3378C16.7074 14.121 16.7605 13.8478 16.792 13.4618C16.8347 12.9394 16.835 12.2712 16.835 11.3271V8.66301C16.835 7.71885 16.8347 7.05065 16.792 6.52824C16.7605 6.14232 16.7073 5.86904 16.6299 5.65227L16.5439 5.45207C16.32 5.01264 15.9796 4.64498 15.5615 4.3886L15.3779 4.28606C15.1308 4.16013 14.8165 4.08006 14.3018 4.03801C13.7794 3.99533 13.1112 3.99504 12.167 3.99504H8.16406C8.16407 3.99667 8.16504 3.99829 8.16504 3.99992L8.16406 15.995Z"})),uYe=Object.freeze(Object.defineProperty({__proto__:null,default:mle},Symbol.toStringTag,{value:"Module"}));let i0="",VC="",ru;const Yt={logProductEvent(t,e){const n=w(w({referrals_session_id:i0,program_name:VC},ru?{is_referrer:ru}:{}),e!=null?e:{});B.logEvent(t,n)},logAnnouncementProductEvent(t,e){B.logEvent(t,e)},createNewSession(t,e=void 0){i0=as(),VC=t,ru=e},logShowReferralDiscount(t,e){Yt.createNewSession(t,e),Ie.count(je.REFERRALS,"referrals.web.showReferralDiscount"),Yt.logProductEvent("Referrals: Show Referral Discount")},logShowReferralLinkGenerationModal(t){Yt.createNewSession(t,!0),Ie.count(je.REFERRALS,"referrals.web.showReferralLinkGenerationModal"),Yt.logProductEvent("Referrals: Show Referral Link Generation Modal")},logClickReferralGetLinkButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferralGetLinkButton"),Yt.logProductEvent("Referrals: Click Referral Get Link Button")},logCopyReferralLink(){Ie.count(je.REFERRALS,"referrals.web.copyReferralLinkSuccess"),Yt.logProductEvent("Referrals: Copy Referral Link")},logClickReferrerIntroNotNowButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferrerIntroNotNowButton"),Yt.logProductEvent("Referrals: Click Referrer Intro Not Now Button")},logShowReferrerConclusion(){Ie.count(je.REFERRALS,"referrals.web.showReferrerConclusion"),Yt.logProductEvent("Referrals: Show Referrer Conclusion")},logClickUpgradeButton(t){const e=[{key:"is_paying_user",value:t?"true":"false"}];ru!==void 0&&e.push({key:"is_referrer",value:ru?"true":"false"}),Ie.count(je.REFERRALS,"referrals.web.clickUpgradeButton",e),Yt.logProductEvent("Referrals: Click Upgrade Button",{is_paying_user:t})},logReferralDiscountContinue(){Ie.count(je.REFERRALS,"referrals.web.referralDiscountContinue"),Yt.logProductEvent("Referrals: Referral Discount Continue")},logClose(t){Ie.count(je.REFERRALS,"referrals.web.close",[{key:"source",value:t}]),B.logEvent("Referrals: Close",{referrals_session_id:i0,source:t})},logClickValidateEmail(){Ie.count(je.REFERRALS,"referrals.web.clickValidateEmail"),Yt.logProductEvent("Referrals: Click Validate Email")},logValidateEmailSuccess(){Ie.count(je.REFERRALS,"referrals.web.validateEmailSuccess")},logValidateEmailFailure(){Ie.count(je.REFERRALS,"referrals.web.validateEmailFailure")},logSendVerificationCode(){Ie.count(je.REFERRALS,"referrals.web.sendVerificationCode"),Yt.logProductEvent("Referrals: Send Verification Code")},logClickResendVerificationCodeButton(){Ie.count(je.REFERRALS,"referrals.web.resendVerificationCode"),Yt.logProductEvent("Referrals: Click Resend Verification Code Button")},logClickChangeEmailButton(){Ie.count(je.REFERRALS,"referrals.web.changeEmail"),Yt.logProductEvent("Referrals: Click Change Email Button")},logClickValidateVerificationCode(){Ie.count(je.REFERRALS,"referrals.web.validateVerificationCode"),Yt.logProductEvent("Referrals: Click Validate Verification Code")},logValidateVerificationCodeSuccess(){Ie.count(je.REFERRALS,"referrals.web.validateVerificationCodeSuccess")},logValidateVerificationCodeFailure(){Ie.count(je.REFERRALS,"referrals.web.validateVerificationCodeFailure")},logApplyDiscount(){Ie.count(je.REFERRALS,"referrals.web.applyDiscount"),Yt.logProductEvent("Referrals: Apply Discount")},logMobileSubscriptionTooltipOpen(){Ie.count(je.REFERRALS,"referrals.web.mobileSubscriptionTooltipOpen"),Yt.logProductEvent("Referrals: Show Mobile Subscription Tooltip")},logShowReferralUpsellAnnouncementBanner(){Ie.count(je.REFERRALS,"referrals.web.showReferralUpsellAnnouncementBanner"),Yt.logAnnouncementProductEvent("Referrals: Show Referral Upsell Announcement Banner")},logShowReferrerRedemptionBanner(){Ie.count(je.REFERRALS,"referrals.web.showReferrerRedemptionBanner"),Yt.logAnnouncementProductEvent("Referrals: Show Referrer Redemption Banner")},logShowRefereeRedemptionBanner(t){Ie.count(je.REFERRALS,"referrals.web.showRefereeRedemptionBanner"),Yt.logAnnouncementProductEvent("Referrals: Show Referee Redemption Banner",{referral_code:t})},logClickReferralUpsellButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferralUpsellButton"),Yt.logProductEvent("Referrals: Click Referral Upsell Button")},logClickReferrerRedeemButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferrerRedeemButton"),Yt.logProductEvent("Referrals: Click Referrer Redeem Button")},logClickRefereeRedeemButton(t){Ie.count(je.REFERRALS,"referrals.web.clickRefereeRedeemButton"),Yt.logProductEvent("Referrals: Click Referee Redeem Button",{referral_code:t})},logCloseReferralUpsellAnnouncementBanner(){Ie.count(je.REFERRALS,"referrals.web.closeReferralUpsellAnnouncementBanner"),Yt.logAnnouncementProductEvent("Referrals: Close Referral Upsell Announcement Banner")},logCloseReferrerRedemptionBanner(){Ie.count(je.REFERRALS,"referrals.web.closeReferrerRedemptionBanner"),Yt.logAnnouncementProductEvent("Referrals: Close Referrer Redemption Banner")},logCloseRefereeRedemptionBanner(t){Ie.count(je.REFERRALS,"referrals.web.closeRefereeRedemptionBanner"),Yt.logAnnouncementProductEvent("Referrals: Close Referee Redemption Banner",{referral_code:t})},logShowReferralUpsellHomepageButton(){Ie.count(je.REFERRALS,"referrals.web.showReferralUpsellHomepageButton"),Yt.logProductEvent("Referrals: Show Referral Upsell Homepage Button")},logClickReferralUpsellHomepageButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferralUpsellHomepageButton"),Yt.logProductEvent("Referrals: Click Referral Upsell Homepage Button")}};function wN(t=!0){return rt({queryKey:["referral-upsell-announcement"],queryFn:async()=>await lm.getUpsellAnnouncementBannerInfo(),enabled:t})}class lm{static async getReferralProgramMetadata(e){return ge.safeGet("/referrals/{program_name}",{parameters:{path:{program_name:e}},authOption:nn.SendIfAvailable})}static async getReferralCodeMetadata(e){return ge.safeGet("/referrals/{referral_code}/metadata",{parameters:{path:{referral_code:e}},authOption:nn.SendIfAvailable})}static async createReferralCode(e){return ge.safePost("/referrals/create_referral_code",{requestBody:{transaction_id:e}})}static async getEnrollmentDetails(){return ge.safeGet("/referrals/enrollment_details")}static async validateEmail(e,n){return ge.safePost("/referrals/validate_email",{requestBody:{email:e,program_name:n}})}static async sendVerificationCode(e){return ge.safePost("/referrals/send_verification_code",{requestBody:{transaction_id:e}})}static async validateVerificationCode(e,n){return ge.safePost("/referrals/validate_verification_code",{requestBody:{transaction_id:e,verification_code:n}})}static async redeemReferral(e,n){return ge.safePost("/referrals/{referral_code}/redeem",{parameters:{path:{referral_code:e}},requestBody:{transaction_id:n}})}static async getReferralDiscount(){return ge.safeGet("/referrals/available_referral_discount")}static async getUpsellAnnouncementBannerInfo(){return ge.safeGet("/referrals/upsell_announcement_banner_info")}static async getIsEligibleForReferrals(){return ge.safeGet("/referrals/is_eligible_for_referrals")}static async trackReferralSignup(e){return ge.safePost("/referrals/track_referral_signup",{parameters:{query:{referral_code:e}},authOption:nn.SendIfAvailable})}}const ple=R(()=>P(()=>import("./o53dfl5u400euisc.js"),__vite__mapDeps([143,1])),{loading:t=>O(t)});function fYe(){const t=V(),e=ot(),{data:n}=rt({queryKey:["is-eligible-for-referrals"],queryFn:ye(t,"550432558")?()=>lm.getIsEligibleForReferrals():Qy}),s=n==null?void 0:n.eligible_program_name;if(_.useEffect(()=>{s&&Yt.logShowReferralUpsellHomepageButton()},[s,n]),!s)return null;const o="Refer";return r.jsx(_t,{side:"bottom",label:o,children:r.jsx(_e,{color:"secondary",className:W("text-token-text-primary relative"),icon:ple,onClick:()=>{Yt.logClickReferralUpsellHomepageButton(),e("/refer/".concat(s))},label:o,children:o})})}function gle(t,e){return e&&((t==null?void 0:t.kind)===wt.GizmoInteraction||(t==null?void 0:t.kind)===wt.PrimaryAssistant)?{gizmo_id:e,kind:wt.GizmoInteraction}:t}function Pb(t){var a;const e=Xo(),n=V(),s=et(n);return!(s==null?void 0:s.isWorkspaceAccount())||((a=e==null?void 0:e.includes(t))!=null?a:!1)}class HC{constructor(e){Q(this,"conversationId");this.conversationId=e}}function kN(){const t=jt(),e=Ut();return _.useCallback(async({newGizmoId:s,conversation:o,previousGizmoId:a,optimistic:i=!0,contextScopes:l})=>{let c=()=>{};const d=()=>{a&&js(a)&&t.invalidateQueries({queryKey:[Zr,{gizmoId:a}]}),s&&js(s)&&t.invalidateQueries({queryKey:[Zr,{gizmoId:s}]}),(!s||!a||!js(s)||!js(a))&&t.invalidateQueries({queryKey:[Ja]}),a&&t.invalidateQueries({queryKey:e6(t,a,!1).queryKey}),s&&t.invalidateQueries({queryKey:e6(t,s,!1).queryKey})};i&&!(o instanceof HC)&&(c=gY({queryClient:t,newGizmoId:s,conversation:o,previousGizmoId:a}));try{const u=o instanceof HC?o.conversationId:o.id,f={gizmo_id:s==null?"":s};l&&l.length>0&&(f.context_scopes=l),await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:u}},requestBody:f})}catch(u){i&&(c(),d()),e.danger(Kt.moveConversationToProjectError,{toastId:"move_conversation_to_snorlax_error",hasCloseButton:!0})}i||d()},[t,e])}function Rb({title:t,description:e,confirmText:n,cancelText:s,isOpen:o=!1,onClose:a,onConfirm:i,primaryButtonColor:l="primary",textCenter:c=!1,loading:d=!1,children:u}){const f=ne();return r.jsx(Mt,{testId:"modal-confirm",isOpen:o,onClose:a,title:t,description:e,textCenter:c,primaryButton:r.jsx(Ns.Button,{title:n!=null?n:f.formatMessage(GC.confirmLabel),color:l,onClick:i,loading:d}),secondaryButton:r.jsx(Ns.Button,{title:s!=null?s:f.formatMessage(GC.cancelLabel),color:"secondary",onClick:a}),children:u})}const GC=be({confirmLabel:{id:"ConfirmModal.confirmLabel",defaultMessage:"Confirm"},cancelLabel:{id:"ConfirmModal.cancelLabel",defaultMessage:"Cancel"}}),qr={messages:be({delete:{id:"jawbone.delete",defaultMessage:"Delete"},pause:{id:"jawbone.pause",defaultMessage:"Pause"},pauseFailure:{id:"jawbone.pauseAutomationFailure",defaultMessage:"Failed to pause the automation"},resume:{id:"jawbone.resume",defaultMessage:"Resume"},enableFailure:{id:"jawbone.resumeFailure",defaultMessage:"Failed to resume the automation"},notificationsTitle:{id:"jawbone.notificationsTitle",defaultMessage:"Notifications"},notificationsDesktopAndMobile:{id:"jawbone.notificationsDesktopAndMobile",defaultMessage:"Desktop & mobile"},notificationsEmail:{id:"jawbone.notificationsEmail",defaultMessage:"Email"}})};class cm{static async getAutomations(e=null,n=null){return ge.safeGet("/automations",{parameters:{query:{cursor:e,filter:n}}})}static getAutomationQueryKey(e){return["automation",e]}static async getAutomation(e){return ge.safeGet("/automation/{automation_id}",{parameters:{path:{automation_id:e}}})}static async setAutomationStatus(e,n){return ge.safePost("/automations/set_status",{requestBody:{jawbone_id:e,is_enabled:n}})}static async removeAutomation(e){return ge.safePost("/automations/remove",{requestBody:{automation_id:e}})}static async saveAutomation(e,n,s,o,a,i,l,c){return ge.safePost("/automations/save",{requestBody:{jawbone_id:e,title:n,schedule:s,is_enabled:o,prompt:a,default_timezone:i,notifications_enabled:!1,email_enabled:!1,schedule_components:l,last_run_time:c}})}static async getAutomationNextRunTimes(e,n=null,s=5){return ge.safeGet("/automation/{automation_id}/next_run_times",{parameters:{path:{automation_id:e},query:{last_run_time:n,page_size:s}}})}}const Ot=be({pageTitle:{id:"CHk10n",defaultMessage:"Tasks"},emptyStateTitle:{id:"WZwnBu",defaultMessage:"Start creating tasks"},emptyStateDescription:{id:"VGFt6n",defaultMessage:"Ask ChatGPT to do things in the future."},emptyStateTryYourOwn:{id:"ARS7Xs",defaultMessage:"Try your own"},makingAutomation:{id:"nngZkS",defaultMessage:"Creating task..."},updatingAutomation:{id:"TtVqbi",defaultMessage:"Updating task..."},cancelModalDescription:{id:"ovdvFi",defaultMessage:"Are you sure you want to cancel? Your changes will not be saved."},pauseBanner:{id:"Shy3x+",defaultMessage:"This task is paused."},editModalTitle:{id:"TATVBL",defaultMessage:"Task"},editModalName:{id:"6yXwm0",defaultMessage:"Name"},editModalInstructions:{id:"6m8uZT",defaultMessage:"Instructions"},editModalSchedule:{id:"huULIs",defaultMessage:"When"},editModalDelete:{id:"jmdwEu",defaultMessage:"Delete"},editModalCancel:{id:"CkqFyL",defaultMessage:"Cancel"},editModalSave:{id:"tw230z",defaultMessage:"Save"},editModalSaveSuccess:{id:"2bPf6t",defaultMessage:"Task saved"},editModalSaveFailure:{id:"s9XRUo",defaultMessage:"Failed to save task"},editModalMissingTaskName:{id:"Gvl61x",defaultMessage:"A task name is required."},editModalMissingInstructions:{id:"50eJR5",defaultMessage:"Instructions are required."},editModalTooFarInFuture:{id:"pRMB4Q",defaultMessage:"Tasks cant be scheduled more than 2 years in the future."},editModalInPast:{id:"og7U6X",defaultMessage:"Please choose a date in the future."},newScheduleTitle:{id:"T+KLUF",defaultMessage:"New schedule"},editScheduleTitle:{id:"foaSfJ",defaultMessage:"Edit schedule"},seeMore:{id:"e818FO",defaultMessage:"See more"},scheduleFrequencyOnce:{id:"ubLvlf",defaultMessage:"Doesn't repeat"},scheduleFrequencyDaily:{id:"fCPVKk",defaultMessage:"Daily"},scheduleFrequencyWeekly:{id:"LBJNa8",defaultMessage:"Weekly"},scheduleFrequencyMonthly:{id:"KtDbq5",defaultMessage:"Monthly"},scheduleFrequencyYearly:{id:"jPb1ga",defaultMessage:"Annually"},scheduleFrequencyCustom:{id:"aW+M+B",defaultMessage:"Custom"},scheduleNextThreeTimes:{id:"jHrFIq",defaultMessage:"Next three times"},scheduleCustomScheduleTitle:{id:"S55b0f",defaultMessage:"To update this custom schedule, just ask ChatGPT"},scheduleCustomScheduleContent:{id:"HzgAWq",defaultMessage:'For example, "do this every 3 weeks on Tuesday"'},scheduleCustomScheduleOpenChat:{id:"QIZwlV",defaultMessage:"Open chat"},pausedPill:{id:"H45WpI",defaultMessage:"Paused"},customSchedule:{id:"xBDjE1",defaultMessage:"Custom schedule"},deleteModalConfirmation:{id:"VvP/mR",defaultMessage:"Are you sure you want to delete this task? This cannot be undone."},deleteModalSuccess:{id:"yOFuly",defaultMessage:"Task deleted"},deleteScheduleModalSuccess:{id:"o9VBGa",defaultMessage:"Scheduled task deleted"},deleteModalFailure:{id:"/sJV6Y",defaultMessage:"Failed to delete task"},deleteModalTitle:{id:"ghUY4y",defaultMessage:"Delete task"},lastRunToday:{id:"32N654",defaultMessage:"Today"},lastRunYesterday:{id:"0J3FW6",defaultMessage:"Yesterday"},notificationsBannerAllow:{id:"cw4hGs",defaultMessage:"Allow"},notificationsBannerNotNow:{id:"zwEnmc",defaultMessage:"Not now"},notificationsBannerTitle:{id:"aZg1Bl",defaultMessage:"Turn on desktop notifications"},notificationsBannerContent:{id:"I6r+8F",defaultMessage:"Get notified when theres an update on your tasks."},notificationsDisabledBannerTitle:{id:"mVWjpz",defaultMessage:"Notifications are disabled in your browser."},notificationsDisabledBannerContent:{id:"wAahVE",defaultMessage:"You'll need to visit your browser preferences to allow them."},attachmentEdit:{id:"/KHfm0",defaultMessage:"Edit"},attachmentManageAll:{id:"hlEgKT",defaultMessage:"Schedules"},localizedRuntimeTomorrow:{id:"yK7y4m",defaultMessage:"Tomorrow"},scheduled:{id:"Vor1nS",defaultMessage:"Scheduled"},paused:{id:"ATWDeu",defaultMessage:"Paused"},completed:{id:"Ur4kmZ",defaultMessage:"Completed"}}),$o={nextRunTime:t=>r.jsx(j,{id:"/OfbaB",defaultMessage:"Next run {nextRunTime}",values:{nextRunTime:t}}),runtimeDaily:t=>r.jsx(j,{id:"jawbone.runtime.daily",defaultMessage:"Daily at {localizedTime}",values:{localizedTime:t}}),runtimeWeeklyShort:t=>r.jsx(j,{id:"iTSfMl",defaultMessage:"Weekly on {localizedDayOfWeek}",values:{localizedDayOfWeek:t}}),runtimeWeekly:(t,e)=>r.jsx(j,{id:"jawbone.runtime.weekly",defaultMessage:"Weekly on {localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeMonthly:t=>r.jsx(j,{id:"jawbone.runtime.monthly",defaultMessage:"Monthly on the {monthDay, selectordinal, one {#st} two {#nd} few {#rd} other {#th}}",values:{monthDay:t}}),runtimeYearly:(t,e)=>r.jsx(j,{id:"jawbone.runtime.yearly",defaultMessage:"Annually on {localizedMonth} {day}",values:{localizedMonth:t,day:e}}),runtimeToday:t=>r.jsx(j,{id:"hStcUW",defaultMessage:"Today at {localizedTime}",values:{localizedTime:t}}),runtimeTomorrow:t=>r.jsx(j,{id:"BF9QGd",defaultMessage:"Tomorrow at {localizedTime}",values:{localizedTime:t}}),runtimeNextFiveDays:(t,e)=>r.jsx(j,{id:"UdC7R6",defaultMessage:"{localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeThisYear:(t,e)=>r.jsx(j,{id:"L9Pqre",defaultMessage:"{localizedMonthDay} at {localizedTime}",values:{localizedMonthDay:t,localizedTime:e}}),runtimeOutsideThisYear:(t,e)=>r.jsx(j,{id:"XOR8K9",defaultMessage:"{localizedDate} at {localizedTime}",values:{localizedDate:t,localizedTime:e}})},E1=Dt(In(()=>({jawboneById:{},cursorsByFilter:{scheduled:null,paused:null,finished:null},maxBannerClientThreadId:void 0}))),Ui=E1.getState,lc=E1.setState,T1={initJawbonesFromServerData:(t,e,n)=>{lc(s=>{t.forEach(o=>{s.jawboneById[o.id]=o}),s.cursorsByFilter[n]=e})},removeAutomation:t=>{lc(e=>{delete e.jawboneById[t]})},setAutomation:(t,e)=>{lc(n=>{const s=n.jawboneById[t];if(!s){n.jawboneById[t]=e;return}const o=new Date(s.updated_at),a=new Date(e.updated_at);(isNaN(o.getTime())||isNaN(a.getTime())||o<a)&&(n.jawboneById[t]=e)})},setAutomationStatus:(t,e)=>{lc(n=>{n.jawboneById[t].is_enabled=e})},clearMaxBannerClientThreadId:()=>{lc(t=>{t.maxBannerClientThreadId=void 0})},setMaxBannerClientThreadId:t=>{lc(e=>{e.maxBannerClientThreadId=t})}},M1={getAllJawbonesGrouped:(t=Ui())=>yle(Object.values(t.jawboneById)),getAutomation:(t,e=Ui())=>e.jawboneById[t],getCursor:(t,e=Ui())=>e.cursorsByFilter[t],getHasJawbones:(t=Ui())=>Object.values(t.jawboneById).length>0,getTargetTimeUTC:(t,e=Ui())=>{var n;return(n=e.jawboneById[t])==null?void 0:n.target_time_utc},hasJawbones:(t=Ui())=>Object.keys(t.jawboneById).length>0,getMaxBannerClientThreadId:(t=Ui())=>t.maxBannerClientThreadId};function l0(t){const{isLoading:e}=Tf({queryKey:["automations",t],queryFn:async({pageParam:n})=>{const s=await cm.getAutomations(n,t);return T1.initJawbonesFromServerData(s.items,s.cursor,t),s},initialPageParam:M1.getCursor(t),getNextPageParam:n=>{var s;return(s=n.cursor)!=null?s:void 0}});return{isLoading:e}}function hle(){const{isLoading:t}=l0("scheduled"),{isLoading:e}=l0("paused"),{isLoading:n}=l0("finished");return{isLoadingScheduled:t,isLoadingPaused:e,isLoadingFinished:n}}function _le({automation_id:t,onSuccess:e,onError:n}){return zt({mutationFn:({is_enabled:s})=>cm.setAutomationStatus(t,s),onSuccess:s=>{T1.setAutomation(s.id,s),e&&e()},onError:(s,o)=>{n&&n(o.is_enabled)}})}function xle({automation_id:t,onSuccess:e,onError:n}){return zt({mutationFn:()=>cm.removeAutomation(t),onSuccess:()=>{T1.removeAutomation(t),e&&e()},onError:()=>{n&&n()}})}function yle(t){return t.reduce((e,n)=>(n.next_run_times.length===0?e.completed.automations.push(n):n.is_enabled?e.scheduled.automations.push(n):e.paused.automations.push(n),e),{scheduled:{label:Ot.scheduled,filter:"scheduled",automations:[]},paused:{label:Ot.paused,filter:"paused",automations:[]},completed:{label:Ot.completed,filter:"finished",automations:[]}})}function EN({item:t,onClose:e,onConfirm:n}){const s=ne(),o=Ut(),a=V(),i=ye(a,"733205176");let l;i?l=Ot.deleteScheduleModalSuccess:l=Ot.deleteModalSuccess;const{mutate:c,isPending:d}=xle({automation_id:t.id,onSuccess:()=>{o.success(s.formatMessage(l),{hasCloseButton:!0}),n==null||n(),e()},onError:()=>{o.danger(Ot.deleteModalFailure,{hasCloseButton:!0,toastId:"jawbone_delete_modal"})}});return r.jsx(Rb,{isOpen:!0,title:s.formatMessage(Ot.deleteModalTitle),primaryButtonColor:"danger",onClose:e,confirmText:s.formatMessage(qr.messages.delete),onConfirm:()=>{c()},loading:d,children:r.jsx("div",{className:"text-sm",children:r.jsx(j,w({},Ot.deleteModalConfirmation))})})}const vle=Object.freeze(Object.defineProperty({__proto__:null,JawboneDeleteModal:EN},Symbol.toStringTag,{value:"Module"})),oo=_.createContext({scheduleComponents:{frequency:"custom"},setFrequency:()=>{},setStartDate:()=>{},setByDay:()=>{},setByMonthDay:()=>{},setByYearDay:()=>{},setByMonth:()=>{},setTime:()=>{},startDate:void 0,nextRunTimes:[],scheduleErrors:void 0,validFrequencies:void 0,setValidFrequencies:()=>{}});function Ig({initialScheduleComponents:t,initialValidFrequencies:e,nextRunTimes:n,children:s}){const[o,a]=_.useState(t),[i,l]=_.useState(void 0),[c,d]=_.useState(void 0),[u,f]=_.useState(e);return r.jsx(oo.Provider,{value:{scheduleComponents:o,setFrequency:m=>{a(U(w({},o),{frequency:m}))},setStartDate:m=>{l(m),d(ble(m)),a(U(w({},o),{start_time:m.toISOString()}))},setByDay:m=>{a(U(w({},o),{by_day:m}))},setByMonthDay:m=>{a(U(w({},o),{by_month_day:m}))},setByYearDay:m=>{a(U(w({},o),{by_year_day:m}))},setByMonth:m=>{a(U(w({},o),{by_month:m}))},setTime:(m,p)=>{a(U(w({},o),{by_hour:m,by_minute:p,by_second:0}))},startDate:i,scheduleErrors:o.frequency!=="once"?void 0:c,nextRunTimes:n,setValidFrequencies:f,validFrequencies:u},children:s})}function ble(t){let e=!1;const n=new Date;n.setFullYear(n.getFullYear()+2),t.getTime()>=n.getTime()&&(e=!0);let s=!1;const o=new Date;if(o.setSeconds(0,0),t.getTime()<o.getTime()&&(s=!0),e||s)return{tooFarInFuture:e,inPast:s}}function TN(t){switch(t.frequency){case"once":return t.start_time?new Date(t.start_time):void 0;case"daily":case"weekly":case"monthly":case"yearly":return t.by_hour==null||t.by_minute==null?void 0:new Date(0,0,0,t.by_hour,t.by_minute);case"custom":return}}function Cle(t,e){const n=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;n.setHours(t.getHours(),t.getMinutes()),e.setStartDate(n)}function Sle(t,e){var o,a;const n=TN(e.scheduleComponents),s=new Date(t);s.setHours((o=n==null?void 0:n.getHours())!=null?o:0,(a=n==null?void 0:n.getMinutes())!=null?a:0),e.setStartDate(s)}function wle(t,e){const n=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;n.setDate(t),e.setStartDate(n)}const kle=R(()=>P(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([144,1])),{loading:t=>O(t)}),Ele=R(()=>P(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([145,1])),{loading:t=>O(t)});function Tle({initialDate:t,onClick:e}){const n=ne(),{scheduleComponents:s}=_.useContext(oo),o=_.useMemo(()=>Mle(s),[s]),[a,i]=_.useState(t),c=new Intl.DateTimeFormat(n.locale,{month:"short",year:"numeric"}).format(a);return r.jsxs("div",{className:"mx-5 my-2 flex flex-col gap-0.5",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"grow text-lg font-semibold",children:c}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(WC,{onClick:()=>i(new Date(a.getFullYear(),a.getMonth()-1,1)),children:r.jsx(Ele,{className:"icon-sm"})}),r.jsx(WC,{onClick:()=>{i(new Date(a.getFullYear(),a.getMonth()+1,1))},children:r.jsx(kle,{className:"icon-sm"})})]})]}),r.jsx(Ile,{visibleDate:a,selectedDate:o,onClick:e})]})}function WC(t){const s=t,{children:e}=s,n=ke(s,["children"]);return r.jsx("button",U(w({},n),{className:"flex h-10 w-10 items-center justify-center",children:e}))}function Mle(t){return t.start_time?new Date(t.start_time):void 0}function zC(t,e){return new Date(t,e+1,0).getDate()}function Ale(t,e){return new Date(t,e,1).getDay()}function Ile({visibleDate:t,selectedDate:e,onClick:n}){const s=ne(),o=_.useContext(oo),a=6,i=_.useMemo(()=>{const d=t.getFullYear(),u=t.getMonth(),f=zC(d,u),m=Ale(d,u),p=[];for(let h=m-1;h>=0;h--)p.push(new Date(d,u-1,zC(d,u-1)-h));for(let h=1;h<=f;h++)p.push(new Date(d,u,h));const g=a*7-p.length;for(let h=1;h<=g;h++)p.push(new Date(d,u+1,h));return p},[t]),l=_.useMemo(()=>{const d=new Intl.DateTimeFormat(s.locale,{weekday:"narrow"});return Array.from({length:7},(u,f)=>d.format(new Date(1970,0,f+4)))},[s.locale]),c=new Date;return c.setHours(0,0,0,0),r.jsxs("div",{children:[r.jsx("div",{className:"flex",children:l.map((d,u)=>r.jsx("div",{className:"flex h-10 w-10 items-center justify-center text-sm font-medium",children:d},u))}),Array.from({length:a}).map((d,u)=>r.jsx("div",{className:"flex",children:i.slice(u*7,(u+1)*7).map(f=>{const m=f>=c;return r.jsx("button",{className:"h-10 w-10",onClick:()=>{m&&(Sle(f,o),n())},children:r.jsx(MN,{dayNumber:f.getDate(),isSelected:!!e&&e.toDateString()===f.toDateString(),isSelectable:m})},f.getDay())})},u))]})}function MN({dayNumber:t,isSelected:e,isSelectable:n}){return r.jsx("div",{className:"h-full w-full p-1",children:r.jsx("div",{className:W("flex h-full w-full items-center justify-center rounded-full text-sm",!n&&"text-token-text-tertiary",!e&&n&&"hover:bg-token-main-surface-secondary",e&&"bg-black font-semibold text-white dark:bg-white dark:text-black"),children:t})})}function jle({onClick:t,selectedDay:e}){const n=_.useContext(oo),s=_.useMemo(()=>{const o=[];let a=1;for(let i=0;i<5;i++){const l=[];for(let c=0;c<7&&a<=31;c++){const d=a;l.push(r.jsx("button",{className:"h-10 w-10 text-sm",onClick:()=>{wle(d,n),t(d)},children:r.jsx(MN,{dayNumber:d,isSelectable:!0,isSelected:a===e},a)},a)),a++}o.push(r.jsx("div",{className:"flex",children:l},i))}return r.jsxs("div",{children:[r.jsx("p",{className:"ms-2 mb-2 text-sm font-semibold",children:r.jsx(j,{id:"WOVV2Z",defaultMessage:"Repeat every month on the"})}),r.jsx("div",{children:o})]})},[e,t,n]);return r.jsx("div",{children:s})}const Nle=R(()=>P(()=>import("./iz35nlf95x4k1pcg.js"),__vite__mapDeps([146,1])),{loading:t=>O(t)}),Ple="flex-1",Rle="max-h-96 overflow-y-auto";function dm({rootClassName:t,contentClassName:e,trigger:n,children:s,open:o,onOpenChange:a,onCloseAutoFocus:i}){return r.jsx("div",{className:W(t!=null?t:Ple),children:r.jsxs(Y.Root,{open:o,onOpenChange:a,children:[n,r.jsx(Y.Portal,{children:r.jsx(Y.Content,{className:e!=null?e:Rle,side:"bottom",onCloseAutoFocus:i,children:s})})]})})}const Lle="w-full justify-start rounded-lg border-token-border-medium";function um({className:t,showError:e=!1,children:n}){return r.jsx(Y.Trigger,{className:W(Lle,t),style:{borderColor:e?"var(--text-error)":void 0},children:r.jsxs("div",{className:"flex w-full items-center gap-1",children:[r.jsx("div",{className:"grow text-start",children:n}),r.jsx(Nle,{className:"icon-sm text-token-text-tertiary"})]})})}function Lb({options:t,initialOption:e,showError:n=!1,onClick:s}){var o;return r.jsx(dm,{trigger:r.jsx(um,{showError:n,children:(o=e==null?void 0:e.label)!=null?o:t[0].label}),children:r.jsx(Ob,{options:t,onClick:s})})}function Ob({options:t,onClick:e}){return r.jsx(r.Fragment,{children:t.map((n,s)=>r.jsx(Y.Item,{onClick:()=>e==null?void 0:e(n),children:n.label},s))})}function AN({targetTimeUTC:t,useShortForm:e=!1}){return r.jsx(C3,{fallback:void 0,name:"JawboneLocalizedRuntime",children:r.jsx(Ole,{targetTimeUTC:t,useShortForm:e})})}function Ole({targetTimeUTC:t,useShortForm:e=!1}){const n=ne(),{localDate:s,today:o,tomorrow:a,dayAfterTomorrow:i,newWeek:l,localizedTime:c}=Dle(t,n.locale);if(s.toDateString()===o.toDateString())return $o.runtimeToday(c);if(s.toDateString()===a.toDateString())return $o.runtimeTomorrow(c);if(s>=i&&s<l){const d=new Intl.DateTimeFormat(n.locale,{weekday:"long"}).format(s);return $o.runtimeNextFiveDays(d,c)}else if(s.getFullYear()===o.getFullYear()){const d=new Intl.DateTimeFormat(n.locale,{month:"long",day:"numeric"}).format(s);return e?d:$o.runtimeThisYear(d,c)}else{const d=new Intl.DateTimeFormat(n.locale,{year:"numeric",month:"short",day:"numeric"}).format(s);return e?d:$o.runtimeOutsideThisYear(d,c)}}function Dle(t,e){const n=new Date(t);if(isNaN(n.getTime()))throw new Error("Invalid targetTimeUTC provided: ".concat(t));const s=n,o=new Date;o.setHours(0,0,0,0);const a=new Date(o);a.setDate(a.getDate()+1);const i=new Date(o);i.setDate(i.getDate()+2);const l=new Date(o);l.setDate(o.getDate()+7);const c=new Intl.DateTimeFormat(e,{hour:"numeric",minute:s.getMinutes()===0?void 0:"numeric",hour12:!0}).format(s);return{localDate:s,today:o,tomorrow:a,dayAfterTomorrow:i,newWeek:l,localizedTime:c}}function IN(t){const e=new Date,n=e.getFullYear(),s=e.getMonth(),o=e.getDate();let a;if(a=t.match(/^(\d{1,2}):(\d{2})\s?([ap]m)$/i),a){let i=parseInt(a[1],10);const l=parseInt(a[2],10),c=a[3].toLowerCase();if(i>=1&&i<=12&&l>=0&&l<=59)return c==="pm"&&i!==12&&(i+=12),c==="am"&&i===12&&(i=0),new Date(n,s,o,i,l)}if(a=t.match(/^([ap]m)\s?(\d{1,2}):(\d{2})$/i),a){let i=parseInt(a[2],10);const l=parseInt(a[3],10),c=a[1].toLowerCase();if(i>=1&&i<=12&&l>=0&&l<=59)return c==="pm"&&i!==12&&(i+=12),c==="am"&&i===12&&(i=0),new Date(n,s,o,i,l)}if(a=t.match(/^(\d{1,2})\s?([ap]m)$/i),a){let i=parseInt(a[1],10);const l=a[2].toLowerCase();if(i===12&&l==="am")return i=0,new Date(n,s,o,i,0);if(i>=1&&i<=11&&l==="pm")return i+=12,new Date(n,s,o,i,0);if(i>=1&&i<=12)return new Date(n,s,o,i,0)}if(a=t.match(/^(\d{1,2}):(\d{2})$/),a){const i=parseInt(a[1],10),l=parseInt(a[2],10);if(i>=0&&i<=23&&l>=0&&l<=59)return new Date(n,s,o,i,l)}if(a=t.match(/^(\d{1,2})(\d{2})$/),a){const i=parseInt(a[1],10),l=parseInt(a[2],10);if(i>=0&&i<=23&&l>=0&&l<=59)return new Date(n,s,o,i,l)}if(a=t.match(/^(\d{1,2})$/),a){const i=parseInt(a[1],10);if(i>=0&&i<=23)return new Date(n,s,o,i,0)}if(a=t.match(/^(\d{1,2}):$/),a){const i=parseInt(a[1],10);if(i>=0&&i<=23)return new Date(n,s,o,i,0)}}function Fle(t){return IN(t)}function jN(t){return t?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!(new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h23"||new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h24")}):""}function NN(t){if(!t)return"";const e=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return"".concat(e,":").concat(n)}function PN(t,e){const n=new Date(0,0,0,t,e);return jN(n)}function Ble(t,e){return"".concat(String(t).padStart(2,"0"),":").concat(String(e).padStart(2,"0"))}function qC(t){const[e,n]=t.split(":"),s=Number.parseInt(e!=null?e:"",10),o=Number.parseInt(n!=null?n:"",10);return Number.isNaN(s)||Number.isNaN(o)?"":PN(s,o)}function YC(t){const e=IN(t);if(e)return NN(e)}function fm(){const t=_.useContext(oo),[e,n]=_.useState(!1),[s,o]=_.useState(!0),a=_.useRef(null),i=_.useRef(null),l=_.useMemo(()=>Ule(),[]),c=TN(t.scheduleComponents),d=_.useMemo(()=>c!=null?c:new Date(new Date().setHours(14,0,0,0)),[c]);_.useEffect(()=>{c||RN(d,t)},[c,d,t]);const u=jN(d),f=NN(d),[m,p]=_.useState(!0),g=_.useRef(f),h=_.useRef(u),x=_.useRef(h.current);_.useEffect(()=>{const b=setTimeout(()=>{e&&a.current&&a.current.select()},0);return()=>clearTimeout(b)},[e]),_.useEffect(()=>{const b=setTimeout(()=>{if(e&&i.current){const C=zT(l,S=>S.value===g.current||S.value===$le(g.current));if(C!==-1&&i.current){const S=i.current.children[C];S&&S.scrollIntoView({block:"center"})}}},0);return()=>clearTimeout(b)},[e,g,l]);const v=b=>{x.current=b;const C=YC(b),S=C!==void 0;p(S),S&&C&&(g.current=C,h.current=qC(C))},y=()=>{const b=YC(x.current);b?(g.current=b,h.current=qC(b),x.current=h.current,c0(b,t)):(x.current=h.current,c0(g.current,t)),p(!0),a.current&&(a.current.value=h.current)};return r.jsx(dm,{trigger:r.jsx(um,{showError:!m||!!t.scheduleErrors,children:r.jsx("div",{className:"flex w-full items-center",children:r.jsx("textarea",{className:"m-0 w-full resize-none border-none bg-transparent p-0 text-sm",defaultValue:h.current,ref:a,rows:1,wrap:"off",onBlur:()=>{y()},onChange:b=>{const C=b.target.value;v(C)},onKeyDown:b=>{b.key===" "&&b.stopPropagation()}})})}),open:e,onOpenChange:b=>{n(b),b?o(!0):y()},onCloseAutoFocus:b=>{b.preventDefault(),a.current&&a.current.select()},children:r.jsx("ul",{ref:i,children:r.jsx(Ob,{options:l,onClick:b=>{g.current=b.value,h.current=b.label,x.current=b.label,c0(b.value,t),p(!0),n(!1),a.current&&(a.current.value=b.label,a.current.select())}})})})}function Ule(){return Array.from({length:96},(e,n)=>{const s=Math.floor(n/4),o=n%4*15,a=Ble(s,o);return{label:PN(s,o),value:a}})}function $le(t){if(!t)return t;const[e]=t.split(":");return e?"".concat(e.padStart(2,"0"),":00"):t}function RN(t,e){if(t)switch(e.scheduleComponents.frequency){case"once":{Cle(t,e);break}case"daily":case"weekly":case"monthly":case"yearly":{e.setTime(t.getHours(),t.getMinutes());break}}}function c0(t,e){const n=Fle(t);RN(n,e)}const Vle=R(()=>P(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([147,1])),{loading:t=>O(t)}),Hle=R(()=>P(()=>import("./iz35nlf95x4k1pcg.js"),__vite__mapDeps([146,1])),{loading:t=>O(t)});function Wd(){const t=ne(),{scheduleComponents:e,scheduleErrors:n,setFrequency:s,validFrequencies:o}=_.useContext(oo),a=_.useMemo(()=>[{label:t.formatMessage(Ot.scheduleFrequencyOnce),value:"once"},{label:t.formatMessage(Ot.scheduleFrequencyDaily),value:"daily"},{label:t.formatMessage(Ot.scheduleFrequencyWeekly),value:"weekly"},{label:t.formatMessage(Ot.scheduleFrequencyMonthly),value:"monthly"},{label:t.formatMessage(Ot.scheduleFrequencyYearly),value:"yearly"},{label:t.formatMessage(Ot.scheduleFrequencyCustom),value:"custom"}].filter(c=>o===void 0||(o==null?void 0:o.includes(c.value))),[t,o]),i=a.find(l=>l.value===e.frequency);return _.useEffect(()=>{i||s(a[0].value)},[i,a,s]),r.jsx(Lb,{options:a,initialOption:i,onClick:l=>s(l.value),showError:!!n})}function Gle(){const t=ne(),{scheduleComponents:e,scheduleErrors:n,setByDay:s}=_.useContext(oo),o=Array.from({length:7},(c,d)=>new Intl.DateTimeFormat(t.locale,{weekday:"long",timeZone:"UTC"}).format(new Date(Date.UTC(2021,2,d+1)))),a=["MO","TU","WE","TH","FR","SA","SU"],i=o.map((c,d)=>({label:c,value:a[d]})),l=i.find(c=>c.value===e.by_day);return _.useEffect(()=>{l||s(i[0].value)},[l,i,s]),r.jsx(Lb,{options:i,initialOption:l,onClick:c=>s(c.value),showError:!!n})}function Wle({useShortForm:t=!1}){var c;const{scheduleComponents:e,scheduleErrors:n,setByMonthDay:s}=_.useContext(oo),o=Array.from({length:31},(d,u)=>({label:(u+1).toString(),value:u+1})),a=(d,u=new Date().getFullYear())=>new Date(u,d,0).getDate(),i=o.slice(0,a((c=e.by_month)!=null?c:1)),l=i.find(d=>d.value===e.by_month_day);return _.useEffect(()=>{l||s(i[0].value)},[l,i,s]),r.jsx(dm,{rootClassName:t?"flex-none":void 0,trigger:r.jsx(um,{className:t?"w-[75px]":void 0,showError:!!n,children:l==null?void 0:l.label}),children:r.jsx(Ob,{options:i,onClick:d=>s(d.value)})})}function zle({useShortForm:t=!1}){var l;const{scheduleComponents:e,scheduleErrors:n,setByMonthDay:s}=_.useContext(oo),o=ne(),a=(l=e.by_month_day)!=null?l:1,i=o.formatMessage(oce[a-1]);return r.jsx(dm,{rootClassName:t?"flex-none":void 0,trigger:r.jsx(um,{className:t?"w-[75px]":void 0,showError:!!n,children:i}),children:r.jsx("div",{className:"m-4",children:r.jsx(jle,{onClick:s,selectedDay:a})})})}function qle(){const t=ne(),{scheduleComponents:e,scheduleErrors:n,setByMonth:s}=_.useContext(oo),o=new Intl.DateTimeFormat(t.locale,{month:"long"}),a=Array.from({length:12},(l,c)=>({label:o.format(new Date(0,c)),value:c+1})),i=a.find(l=>l.value===e.by_month);return _.useEffect(()=>{i||s(a[0].value)},[i,a,s]),r.jsx(Lb,{options:a,initialOption:i,onClick:l=>s(l.value),showError:!!n})}function Yle(){const t=ne(),{scheduleComponents:e,scheduleErrors:n,setStartDate:s}=_.useContext(oo),[o,a]=_.useState(!1);_.useEffect(()=>{e.start_time||s(new Date)},[e.start_time,s]);const i=e.start_time?new Date(e.start_time):new Date,l=new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"long",day:"numeric"});return r.jsx(dm,{trigger:r.jsx(um,{showError:!!n,children:l.format(i)}),contentClassName:"min-w-[224px]",open:o,onOpenChange:a,children:r.jsx(Tle,{initialDate:i,onClick:()=>a(!1)})})}function Zle(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Wd,{}),r.jsx(Yle,{}),r.jsx(fm,{})]})}function Kle(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Wd,{}),r.jsx(fm,{})]})}function Qle(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Wd,{}),r.jsx(Gle,{}),r.jsx(fm,{})]})}function Jle(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Wd,{}),r.jsx(zle,{}),r.jsx(fm,{})]})}function Xle(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Wd,{}),r.jsx(qle,{}),r.jsx(Wle,{useShortForm:!0}),r.jsx(fm,{})]})}function ece({automationId:t,conversationId:e,onModalClose:n}){return r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(Wd,{}),r.jsx(tce,{automationId:t}),r.jsx(nce,{conversationId:e,onModalClose:n})]})}function tce({automationId:t}){var i;const{data:e,fetchNextPage:n,hasNextPage:s,isFetchingNextPage:o}=Tf({queryKey:["automation-next-run-times",t],queryFn:({pageParam:l})=>cm.getAutomationNextRunTimes(t,l),getNextPageParam:l=>l.has_more?l.next_run_times[l.next_run_times.length-1]:void 0,initialPageParam:null}),a=_.useRef(null);return _.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e]),r.jsx("div",{className:"bg-token-main-surface-secondary rounded-lg p-3",children:r.jsxs("div",{ref:a,className:"flex h-full max-h-52 flex-col gap-3 overflow-y-auto text-sm",children:[(i=e==null?void 0:e.pages)==null?void 0:i.flatMap(l=>l.next_run_times).map((l,c)=>r.jsx("div",{children:r.jsx(AN,{targetTimeUTC:l})},c)),s&&r.jsx("button",{onClick:()=>n(),disabled:o,children:r.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[r.jsx(j,{id:"qL17GV",defaultMessage:"See more"}),r.jsx(Hle,{className:"icon"})]})})]})})}function nce({conversationId:t,onModalClose:e}){const n=ot();return t?r.jsxs("div",{className:"border-token-border-medium flex gap-3 rounded-lg border p-4",children:[r.jsx(Vle,{}),r.jsxs("div",{className:"flex grow flex-col",children:[r.jsx("span",{className:"text-sm font-medium",children:r.jsx(j,w({},Ot.scheduleCustomScheduleTitle))}),r.jsx("span",{className:"text-token-text-secondary text-sm",children:r.jsx(j,w({},Ot.scheduleCustomScheduleContent))})]}),r.jsx(_e,{onClick:()=>{e(),n(Vo(t))},children:r.jsx(j,w({},Ot.scheduleCustomScheduleOpenChat))})]}):null}function sce({automationId:t,conversationId:e,onModalClose:n}){const{scheduleComponents:s}=_.useContext(oo);switch(s.frequency){case"once":return r.jsx(Zle,{});case"daily":return r.jsx(Kle,{});case"weekly":return r.jsx(Qle,{});case"monthly":return r.jsx(Jle,{});case"yearly":return r.jsx(Xle,{});case"custom":return t?r.jsx(ece,{automationId:t,conversationId:e,onModalClose:n}):null}}const oce=new Array(31).fill(0).map((t,e)=>e+1).map(t=>{const e=t%10===1&&t!==11?"".concat(t,"st"):t===2||t===22?"".concat(t,"nd"):t===3||t===23?"".concat(t,"rd"):"".concat(t,"th");return{id:"date-ordinal-".concat(t),description:"Brief translation of a number's ordinal abbreviation, i.e. #1 = 1st (the 'st'), #2 = 2nd (the 'nd')",defaultMessage:e}});function ace(t){return!!t.id}const rce=R(()=>P(()=>import("./k19zkhlbf7s6u5us.js"),__vite__mapDeps([148,1])),{loading:t=>O(t)}),ice=R(()=>P(()=>import("./foakg84w5wpjdwdx.js"),__vite__mapDeps([54,1])),{loading:t=>O(t)});function lce({onClose:t,onConfirm:e}){const n=ne();return r.jsx(Rb,{isOpen:!0,title:n.formatMessage(Ot.editModalCancel),primaryButtonColor:"danger",onClose:()=>{t()},onConfirm:()=>{e()},children:r.jsx("div",{className:"text-sm",children:r.jsx(j,w({},Ot.cancelModalDescription))})})}function cce({onClick:t}){return r.jsxs("div",{className:"border-token-border-medium flex items-center justify-between rounded-2xl border p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium",children:[r.jsx(rce,{className:"icon-lg"}),r.jsx(j,w({},Ot.pauseBanner))]}),r.jsx("div",{children:r.jsx(_e,{onClick:t,children:r.jsx(j,w({},qr.messages.resume))})})]})}function Db({item:t,source:e,onClose:n,onSave:s=cm.saveAutomation}){const o=ne(),a=Ut();_.useEffect(()=>{Ie.count(je.JAWBONE,"jawbone_edit_modal.open")},[]);const{scheduleComponents:i,scheduleErrors:l}=_.useContext(oo),[c,d]=_.useState(!0),[u,f]=_.useState(!1),[m,p]=_.useState(!1),[g,h]=_.useState(t.title),[x,v]=_.useState(t.prompt),[y,b]=_.useState(t.is_enabled),C=_.useRef(null);_.useEffect(()=>{const L=C.current;if(!L)return;L.style.height="auto";const D=300;L.style.height="".concat(Math.min(L.scrollHeight,D),"px")},[x]);const S=!!t.id;_.useEffect(()=>{l!=null&&l.tooFarInFuture||l!=null&&l.inPast?d(!1):d(g.length>0&&x.length>0);const L=g!==t.title||x!==t.prompt||y!==t.is_enabled||!Bf(i,t.schedule_components);f(L)},[l==null?void 0:l.tooFarInFuture,l==null?void 0:l.inPast,g,x,y,t,i]);const{mutate:k}=zt({mutationFn:()=>{var L;return s((L=t.id)!=null?L:null,g,t.schedule,y,x,t.schedule_components.start_time!==i.start_time?Intl.DateTimeFormat().resolvedOptions().timeZone:t.default_timezone,i,t.last_run_time)},onSuccess:L=>{L&&T1.setAutomation(L.id,L),n(o.formatMessage(Ot.editModalSaveSuccess))},onError:()=>{a.danger(Ot.editModalSaveFailure,{hasCloseButton:!0,toastId:"jawbone_edit_modal"}),d(!0),p(!1)}}),[E,T]=_.useState(!1),[M,A]=_.useState(!1),I=V();ye(I,"156153730");const N=ot();return r.jsxs(r.Fragment,{children:[r.jsx(Mt,{testId:"modal-jawbone-edit",className:"min-w-[680px] text-sm",isOpen:!0,onClose:()=>{if(u){A(!0);return}n()},showCloseButton:!0,title:S?r.jsx(j,w({},Ot.editScheduleTitle)):r.jsx(j,w({},Ot.newScheduleTitle)),headerAccessory:e==="tasks"&&r.jsx(_e,{icon:ice,color:"secondary",onClick:()=>{N(Vo(t.conversation_id))},children:r.jsx(j,{id:"KkyshF",defaultMessage:"View chat"})}),type:"success",children:r.jsxs("div",{className:"flex flex-col gap-6",children:[!y&&r.jsx(cce,{onClick:()=>{b(!0)}}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(j,w({},Ot.editModalName))}),r.jsx("textarea",{className:W("border-token-border-medium bg-token-main-surface-primary w-full resize-none rounded-lg text-sm",g.length===0&&"border-token-text-error focus:border-token-text-error"),rows:1,value:g,onChange:L=>h(L.target.value),placeholder:o.formatMessage({id:"GB3SVK",defaultMessage:"Summarize AI news"})}),g.length===0&&r.jsx(up,{children:r.jsx(j,w({},Ot.editModalMissingTaskName))})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(j,w({},Ot.editModalInstructions))}),r.jsx("textarea",{ref:C,className:W("border-token-border-medium bg-token-main-surface-primary w-full resize-none overflow-y-auto rounded-lg text-sm",x.length===0&&"border-token-text-error focus:border-token-text-error"),rows:3,value:x,onChange:L=>v(L.target.value),placeholder:o.formatMessage({id:"XDXPIp",defaultMessage:"Send a summary of the latest news in AI, focusing on especially surprising stories."})}),x.length===0&&r.jsx(up,{children:r.jsx(j,w({},Ot.editModalMissingInstructions))})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(j,w({},Ot.editModalSchedule))}),r.jsx("div",{children:r.jsx(sce,{automationId:t.id,conversationId:t.conversation_id,onModalClose:n})}),r.jsxs("div",{children:[(l==null?void 0:l.tooFarInFuture)&&r.jsx(up,{children:r.jsx(j,w({},Ot.editModalTooFarInFuture))}),(l==null?void 0:l.inPast)&&r.jsx(up,{children:r.jsx(j,w({},Ot.editModalInPast))})]}),!1]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{className:"flex gap-2",children:[y&&S&&r.jsx(_e,{color:"secondary",onClick:()=>{b(!1)},children:r.jsx(j,w({},qr.messages.pause))}),S&&r.jsx(_e,{color:"danger-outline",onClick:()=>{T(!0)},children:r.jsx(j,w({},Ot.editModalDelete))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(_e,{color:"secondary",onClick:()=>{if(u){A(!0);return}n()},children:r.jsx(j,w({},Ot.editModalCancel))}),r.jsx(_e,{disabled:!c,loading:m,color:"primary",onClick:()=>{p(!0),k()},children:r.jsx(j,w({},Ot.editModalSave))})]})]})]})}),M&&r.jsx(lce,{onClose:()=>A(!1),onConfirm:()=>n()}),E&&ace(t)&&r.jsx(EN,{item:t,onClose:()=>T(!1),onConfirm:()=>{T(!1),n()}})]})}function up({children:t}){return r.jsx("div",{className:"text-token-text-error text-sm font-medium",children:t})}function dce({dateString:t}){switch(uce(t)){case"today":return r.jsx(j,w({},Ot.lastRunToday));case"yesterday":return r.jsx(j,w({},Ot.lastRunYesterday));case"weekday":return new Date(t).toLocaleDateString(void 0,{weekday:"long"});case"full":return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}}function uce(t){const e=new Date(t),s=qT(new Date,e);return s===0?"today":s===1?"yesterday":s<=7?"weekday":"full"}function ZC(t){"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("span",{className:"bg-token-main-surface-tertiary text-token-text-secondary rounded-[0.25rem] px-1 py-[1px] text-xs font-medium",children:n}),e[0]=n,e[1]=s):s=e[1],s}function fce(t){"use forget";const e=G.c(2),{item:n}=t,{is_enabled:s,target_time_utc:o}=n;if(!s){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(ZC,{children:r.jsx(j,w({},Ot.pausedPill))}),e[0]=a):a=e[0],a}if(o){const a=new Date,i=new Date(o);if(a.getTime()-i.getTime()>=6e4){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(ZC,{children:r.jsx(j,{id:"ppsH3r",defaultMessage:"Delayed"})}),e[1]=l):l=e[1],l}}return null}function mce(t){"use forget";const e=G.c(19),{item:n,useShortForm:s}=t,o=s===void 0?!1:s;if(n.next_run_times.length===0&&n.last_run_time){let i;return e[0]!==n.last_run_time?(i=r.jsx(dce,{dateString:n.last_run_time}),e[0]=n.last_run_time,e[1]=i):i=e[1],i}const a=n.schedule_components;switch(a.frequency){case"once":{let i;return e[2]!==n.id||e[3]!==o?(i=r.jsx(gce,{automationId:n.id,useShortForm:o}),e[2]=n.id,e[3]=o,e[4]=i):i=e[4],i}case"daily":{let i;return e[5]!==a?(i=r.jsx(hce,{scheduleComponents:a,useShortForm:!1}),e[5]=a,e[6]=i):i=e[6],i}case"weekly":{let i;return e[7]!==a||e[8]!==o?(i=r.jsx(_ce,{scheduleComponents:a,useShortForm:o}),e[7]=a,e[8]=o,e[9]=i):i=e[9],i}case"monthly":{let i;return e[10]!==a?(i=r.jsx(xce,{scheduleComponents:a}),e[10]=a,e[11]=i):i=e[11],i}case"yearly":{let i;return e[12]!==a?(i=r.jsx(yce,{scheduleComponents:a}),e[12]=a,e[13]=i):i=e[13],i}case"custom":{if(n.next_run_times.length===0){let c;return e[14]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("div",{children:r.jsx(j,w({},Ot.customSchedule))}),e[14]=c):c=e[14],c}let i;if(e[15]!==n.next_run_times[0]){const d=new Date(n.next_run_times[0]).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});i=$o.nextRunTime(d),e[15]=n.next_run_times[0],e[16]=i}else i=e[16];let l;return e[17]!==i?(l=r.jsx("div",{children:i}),e[17]=i,e[18]=l):l=e[18],l}}}function pce(t){"use forget";const e=G.c(2),{item:n}=t;let s;return e[0]!==n?(s=r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(mce,{item:n}),r.jsx(fce,{item:n})]}),e[0]=n,e[1]=s):s=e[1],s}function gce(t){"use forget";const e=G.c(5),{automationId:n,useShortForm:s}=t,o=s===void 0?!1:s;let a;e[0]!==n?(a=M1.getTargetTimeUTC(n),e[0]=n,e[1]=a):a=e[1];const i=a;if(!i)return null;let l;return e[2]!==i||e[3]!==o?(l=r.jsx(AN,{targetTimeUTC:i,useShortForm:o}),e[2]=i,e[3]=o,e[4]=l):l=e[4],l}function hce(t){"use forget";var c,d;const e=G.c(3),{scheduleComponents:n,useShortForm:s}=t,o=s===void 0?!1:s,a=ne(),i=LN((c=n.by_hour)!=null?c:0,(d=n.by_minute)!=null?d:0,a.locale);if(o){let u;return e[0]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(j,w({},Ot.scheduleFrequencyDaily)),e[0]=u):u=e[0],u}let l;return e[1]!==i?(l=$o.runtimeDaily(i),e[1]=i,e[2]=l):l=e[2],l}function _ce(t){"use forget";var u,f,m;const e=G.c(8),{scheduleComponents:n,useShortForm:s}=t,o=s===void 0?!1:s,a=ne();let i;if(e[0]!==a.locale||e[1]!==n.by_day){const p=new Date,g=vce((u=n.by_day)!=null?u:"")-p.getDay();p.setDate(p.getDate()+(g>=0?g:g+7)),i=new Intl.DateTimeFormat(a.locale,{weekday:"long"}).format(p),e[0]=a.locale,e[1]=n.by_day,e[2]=i}else i=e[2];const l=i,c=LN((f=n.by_hour)!=null?f:0,(m=n.by_minute)!=null?m:0,a.locale);if(o){let p;return e[3]!==l?(p=$o.runtimeWeeklyShort(l),e[3]=l,e[4]=p):p=e[4],p}let d;return e[5]!==l||e[6]!==c?(d=$o.runtimeWeekly(l,c),e[5]=l,e[6]=c,e[7]=d):d=e[7],d}function xce({scheduleComponents:t}){var e;return $o.runtimeMonthly(String((e=t.by_month_day)!=null?e:1))}function yce({scheduleComponents:t}){var s;const e=ne(),n=_.useMemo(()=>{var a;const o=new Date;return o.setMonth(((a=t.by_month)!=null?a:1)-1),new Intl.DateTimeFormat(e.locale,{month:"long"}).format(o)},[t.by_month,e.locale]);return $o.runtimeYearly(n,(s=t.by_month_day)!=null?s:1)}function LN(t,e,n){"use forget";const s=G.c(4);let o;if(s[0]!==t||s[1]!==n||s[2]!==e){const i=new Date;i.setHours(t),i.setMinutes(e),o=new Intl.DateTimeFormat(n,{hour:"numeric",minute:e===0?void 0:"numeric",hour12:!0}).format(i),s[0]=t,s[1]=n,s[2]=e,s[3]=o}else o=s[3];return o}function vce(t){switch(t){case"SU":return 0;case"MO":return 1;case"TU":return 2;case"WE":return 3;case"TH":return 4;case"FR":return 5;case"SA":return 6;default:return-1}}function bce(){return"/tasks"}const Cce=R(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([149,1])),{loading:t=>O(t)}),Sce=R(()=>P(()=>import("./c23vrkf8h51nmu8w.js"),__vite__mapDeps([150,1])),{loading:t=>O(t)}),wce=R(()=>P(()=>import("./k19zkhlbf7s6u5us.js"),__vite__mapDeps([148,1])),{loading:t=>O(t)}),kce=R(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([151,1])),{loading:t=>O(t)}),Ece=R(()=>P(()=>Promise.resolve().then(()=>rm),void 0),{loading:t=>O(t)}),Tce=R(()=>P(()=>import("./decxj0nfuivtbs7k.js"),__vite__mapDeps([152,1])),{loading:t=>O(t)}),Mce=R(()=>P(()=>Promise.resolve().then(()=>vle),void 0).then(t=>t.JawboneDeleteModal));function mYe(){"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(ON,{children:r.jsxs("div",{className:"flex h-full w-full flex-col justify-center py-4 ps-5 pe-3",children:[r.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary h-4 w-1/2 rounded-sm"}),r.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary mt-2.5 h-4 w-2/5 rounded-sm"})]})}),t[0]=e):e=t[0],e}function ON(t){"use forget";const e=G.c(5),{children:n,fullWidth:s}=t,o=s?"w-full":"inline-block max-w-[360px] min-w-[320px]";let a;e[0]!==o?(a=W("border-token-border-default relative my-2 overflow-hidden rounded-xl border",o),e[0]=o,e[1]=a):a=e[1];let i;return e[2]!==n||e[3]!==a?(i=r.jsx("div",{className:a,children:n}),e[2]=n,e[3]=a,e[4]=i):i=e[4],i}function Ace(t){"use forget";const e=G.c(5),{automation:n,onSave:s,overrideManageAllAction:o,fullWidth:a}=t,i=a===void 0?!1:a;if(!n)return null;let l;return e[0]!==n||e[1]!==i||e[2]!==s||e[3]!==o?(l=r.jsx(Ice,{item:n,onSave:s,overrideManageAllAction:o,fullWidth:i}),e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=l):l=e[4],l}function Ice(t){"use forget";const e=G.c(40),{item:n,onSave:s,overrideManageAllAction:o,fullWidth:a}=t,i=Ut();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0],_.useEffect(jce,l);const{id:c,is_enabled:d,title:u}=n,[f,m]=_.useState(!1),p=_.useRef(null);let g;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{if(p.current){const $=p.current.clientHeight,H=parseFloat(getComputedStyle(p.current).lineHeight);m($>H)}},e[1]=g):g=e[1];let h;e[2]!==u?(h=[u],e[2]=u,e[3]=h):h=e[3],_.useEffect(g,h);const x=n.next_run_times.length===0,[v,y]=_.useState(!1);let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=()=>y(!0),e[4]=b):b=e[4];const C=f?"items-start":"items-center";let S;e[5]!==C?(S=W("flex h-full w-full cursor-pointer justify-between py-4 ps-5 pe-3",C),e[5]=C,e[6]=S):S=e[6];let k;e[7]!==u?(k=r.jsx("div",{ref:p,className:"line-clamp-2 text-start font-medium",children:u}),e[7]=u,e[8]=k):k=e[8];let E;e[9]!==n?(E=r.jsx(pce,{item:n}),e[9]=n,e[10]=E):E=e[10];let T;e[11]!==n.next_run_times||e[12]!==n.schedule_components||e[13]!==E?(T=r.jsx("div",{className:"text-token-text-secondary text-start",children:r.jsx(Ig,{initialScheduleComponents:n.schedule_components,nextRunTimes:n.next_run_times,children:E})}),e[11]=n.next_run_times,e[12]=n.schedule_components,e[13]=E,e[14]=T):T=e[14];let M;e[15]!==k||e[16]!==T?(M=r.jsxs("div",{className:"flex flex-col gap-0.5 pe-8 text-sm",children:[k,T]}),e[15]=k,e[16]=T,e[17]=M):M=e[17];let A;e[18]!==M||e[19]!==S?(A=r.jsx("button",{className:"hover:bg-token-main-surface-secondary h-full w-full",onClick:b,children:r.jsx("div",{className:S,children:M})}),e[18]=M,e[19]=S,e[20]=A):A=e[20];let I;e[21]===Symbol.for("react.memo_cache_sentinel")?(I=()=>y(!0),e[21]=I):I=e[21];let N;e[22]!==c||e[23]!==x||e[24]!==d||e[25]!==n||e[26]!==o?(N=r.jsx("div",{className:"absolute end-3 top-1/2 -translate-y-1/2 transform",children:r.jsx("div",{className:"ms-4 flex",children:r.jsx(Nce,{automation_id:c,is_enabled:d,item:n,isFinished:x,onEditModalOpen:I,overrideManageAllAction:o})})}),e[22]=c,e[23]=x,e[24]=d,e[25]=n,e[26]=o,e[27]=N):N=e[27];let L;e[28]!==a||e[29]!==A||e[30]!==N?(L=r.jsxs(ON,{fullWidth:a,children:[A,N]}),e[28]=a,e[29]=A,e[30]=N,e[31]=L):L=e[31];let D;e[32]!==v||e[33]!==n||e[34]!==s||e[35]!==i?(D=v&&r.jsx(Ig,{initialScheduleComponents:n.schedule_components,nextRunTimes:n.next_run_times,children:r.jsx(Db,{item:n,source:"chat",onSave:s,onClose:$=>{$&&i.success($,{hasCloseButton:!0}),y(!1)}})}),e[32]=v,e[33]=n,e[34]=s,e[35]=i,e[36]=D):D=e[36];let F;return e[37]!==L||e[38]!==D?(F=r.jsxs(r.Fragment,{children:[L,D]}),e[37]=L,e[38]=D,e[39]=F):F=e[39],F}function jce(){Ie.count(je.JAWBONE,"jawbone_message_attachment.open")}function Nce(t){"use forget";const e=G.c(34),{automation_id:n,is_enabled:s,item:o,isFinished:a,onEditModalOpen:i,overrideManageAllAction:l}=t,c=V(),d=ne(),u=ot(),f=Ut(),[m,p]=_.useState(s);let g,h;e[0]!==s?(g=()=>p(s),h=[s],e[0]=s,e[1]=g,e[2]=h):(g=e[1],h=e[2]),_.useEffect(g,h);let x;e[3]!==f?(x=L=>{f.danger(L?qr.messages.enableFailure:qr.messages.pauseFailure,{hasCloseButton:!0,toastId:"toggle_automation_status"}),p(!L)},e[3]=f,e[4]=x):x=e[4];let v;e[5]!==n||e[6]!==x?(v={automation_id:n,onError:x},e[5]=n,e[6]=x,e[7]=v):v=e[7];const{mutate:y,isPending:b}=_le(v);let C;e[8]!==d||e[9]!==u||e[10]!==l?(C=function(){return l===null?null:r.jsxs(r.Fragment,{children:[r.jsx(Y.Separator,{}),l!=null?l:r.jsx(Y.Item,{icon:Tce,label:d.formatMessage(Ot.attachmentManageAll),onClick:()=>{u(bce())}})]})},e[8]=d,e[9]=u,e[10]=l,e[11]=C):C=e[11];const S=C;let k;e[12]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("button",{className:"hover:bg-token-surface-hover focus-visible:bg-token-surface-hover radix-state-open:bg-token-surface-hover flex h-9 w-9 items-center justify-center rounded-lg focus-visible:outline-0",children:r.jsx(kce,{className:"icon"})}),e[12]=k):k=e[12];let E;e[13]!==m||e[14]!==d||e[15]!==a||e[16]!==b||e[17]!==i||e[18]!==y?(E=!a&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{icon:Ece,label:d.formatMessage(Ot.attachmentEdit),onClick:i}),r.jsx(Y.Item,{icon:m?wce:Sce,label:d.formatMessage(m?qr.messages.pause:qr.messages.resume),onClick:()=>{const L=!m;p(L),y({is_enabled:L})},disabled:b})]}),e[13]=m,e[14]=d,e[15]=a,e[16]=b,e[17]=i,e[18]=y,e[19]=E):E=e[19];let T;e[20]!==d?(T=d.formatMessage(qr.messages.delete),e[20]=d,e[21]=T):T=e[21];let M;e[22]!==c||e[23]!==o?(M=()=>{lt(c,Mce,{item:o})},e[22]=c,e[23]=o,e[24]=M):M=e[24];let A;e[25]!==T||e[26]!==M?(A=r.jsx(Y.Item,{icon:Cce,color:"danger",label:T,onClick:M}),e[25]=T,e[26]=M,e[27]=A):A=e[27];let I;e[28]!==S?(I=S(),e[28]=S,e[29]=I):I=e[29];let N;return e[30]!==A||e[31]!==I||e[32]!==E?(N=r.jsxs(Er,{size:"auto",alignOffset:-8,sideOffset:4,triggerButton:k,children:[E,A,I]}),e[30]=A,e[31]=I,e[32]=E,e[33]=N):N=e[33],N}function Pce(t){return["odyssey_aut",t!=null?t:""]}function A1(t){const{data:e}=rt({queryKey:Pce(t),queryFn:()=>ge.safeGet("/agent_automation/{automation_id}",{parameters:{path:{automation_id:t!=null?t:""}}}),enabled:!!t});return e!=null?e:null}function DN(){return["odyssey_aut"]}function Rce(t){const{isLoading:e,data:n}=Lce(t),s=_.useMemo(()=>{var u;return(u=n==null?void 0:n.items.reduce((f,m)=>(f[m.id]=m,f),{}))!=null?u:void 0},[n]),o=_.useCallback(u=>u.map(f=>{const m=s==null?void 0:s[f.id];return m?w(w({},m),f):null}).filter(Boolean),[s]),{isLoadingScheduled:a,isLoadingPaused:i,isLoadingFinished:l}=hle(),c=E1(M1.getAllJawbonesGrouped),d=e||a||i||l;return _.useMemo(()=>{var u,f,m;return{isLoading:d,scheduledAutomations:o((u=c.scheduled.automations)!=null?u:[]),pausedAutomations:o((f=c.paused.automations)!=null?f:[]),completedAutomations:o((m=c.completed.automations)!=null?m:[])}},[d,c,o])}function Lce({enabled:t,staleTimeMs:e=1e3*5*60}){return rt({enabled:t,queryKey:DN(),queryFn:()=>ge.safeGet("/agent_automations"),refetchOnMount:"always",refetchOnWindowFocus:"always",staleTime:e})}function pYe(t,e=null){const n=_.useRef({}),[s,o]=_.useState({});return _.useEffect(()=>{async function a(l){const c=await ge.safeGet("/agent_automation/{automation_id}/conversations",{parameters:{path:{automation_id:l}}});o(d=>U(w({},d),{[l]:c.items}))}async function i(l,c){const d=await ge.safePost("/conversations/batch",{requestBody:{conversation_ids:[c]}});o(u=>U(w({},u),{[l]:d}))}for(const l of t)l.id in n.current||(l.job_type==="agent"||l.source_conversation_id&&l.source_message_id?n.current[l.id]=a(l.id):l.conversation_id&&(n.current[l.id]=i(l.id,l.conversation_id)))},[t]),_.useMemo(()=>{let a=[];return t.forEach(i=>{const l=s[i.id];if(l)for(const c of l)a.push({automation:i,conversation:c})}),e&&(a=a.filter(i=>{var c;return new Date((c=i.conversation.update_time)!=null?c:0).getTime()>e.getTime()})),a.sort((i,l)=>{var u,f;const c=new Date((u=i.conversation.update_time)!=null?u:0).getTime();return new Date((f=l.conversation.update_time)!=null?f:0).getTime()-c})},[s,t,e])}const Oce=async t=>(await ge.safePost("/aip/connectors/github/has_installations",{requestBody:{link_id:t}})).has_installations,gYe=({linkId:t})=>rt({queryKey:["github-has-installations",t],enabled:!!t,queryFn:async()=>await Oce(t),retry:1});function FN({enabled:t=!0,connectionInstanceId:e}){return rt({queryKey:["user_connection_sync_configuration",e],queryFn:async()=>{try{return await yH.user_connection_sync_configuration(e)}catch(n){return null}},enabled:!!(t&&e),retry:1})}function hYe(t){return is(t,"1001765573").get("ca_github_sync_max_repos",5)}const BN="v1.0",jg=Ue.SelectedGithubRepos,iu=({selectedReposMap:t,scope:e})=>{if(!t){gt.removeItem(jg,e);return}const n={selected_github_repos:[...t].map(([o,a])=>[o,a])},s={version:BN,data:n};gt.setItem(jg,JSON.stringify(s),e)},KC=t=>{const e=gt.getItem(jg,t);if(e)try{const{version:n,data:s}=JSON.parse(e);if(n!==BN){gt.removeItem(jg,t);return}return new Map(s.selected_github_repos)}catch(n){return}},Dce=t=>{var n;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const s of[...e].reverse()){const o=s.message;if(o.author.role!==Ke.User)continue;const a=(n=o.metadata)!=null?n:{},i=a.selected_github_repos,l=a.selected_all_github_repos;if(i||l)return{selectedRepos:i!=null?i:[],selectedAllRepos:l!=null?l:!1}}},Fce=S3(t=>Dce(t),{equals:Bf}),UN=()=>{var s,o;const t=ys(),e=Of(),n=V();if(t===Pe.Slurm){const a=(s=e==null?void 0:e.connectorConfig)==null?void 0:s[bt.GITHUB_CONNECTOR];return{maxRepos:(o=a==null?void 0:a.max_repos)!=null?o:3}}return t===Pe.Glaux?{maxRepos:vH(n)}:{maxRepos:void 0}};function $N(t){var S,k,E,T;const e=V(),{session:n}=vd(e),s=YT(),o=ZT(),a=ae(o),{maxRepos:i}=UN(),l=ae(()=>{if(s)return KT(e).data}),c=(k=(S=l==null?void 0:l.connection_statuses.find(M=>M.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(M.user_connection_details.activation_status)&&!!M.user_connection_details.connection_instance_id&&!!M.user_connection_details.backing_link_id))==null?void 0:S.user_connection_details.connection_instance_id)!=null?k:"",{data:d}=FN({connectionInstanceId:c!=null?c:"",enabled:!!(c&&s)}),u=_.useMemo(()=>{var M,A;return{userId:(M=n==null?void 0:n.user)==null?void 0:M.id,workspaceId:(A=n==null?void 0:n.account)==null?void 0:A.id}},[(E=n==null?void 0:n.user)==null?void 0:E.id,(T=n==null?void 0:n.account)==null?void 0:T.id]),f=yt(e,t),m=ae(()=>Fce(f)),[p,g]=Ve(t,M=>[M==null?void 0:M.hasModifiedGithubRepos,M==null?void 0:M.selectedGithubRepos]);_.useEffect(()=>{var I,N,L,D,F,$;if(p||((I=g==null?void 0:g.has(a))!=null?I:!1))return;if(m&&VN(m)){if(i&&((L=(N=m.selectedRepos)==null?void 0:N.length)!=null?L:0)>i)return;Ze(t,H=>{var z;(z=H.selectedGithubRepos)!=null||(H.selectedGithubRepos=new Map),H.selectedGithubRepos.set(a,lo(m))});return}const A=KC(u);if(A&&A.has(a)){if(i&&(($=(F=(D=A.get(a))==null?void 0:D.selectedRepos)==null?void 0:F.length)!=null?$:0)>i)return;const H=A.get(a);H&&Ze(t,z=>{var K;(K=z.selectedGithubRepos)!=null||(z.selectedGithubRepos=new Map),z.selectedGithubRepos.set(a,lo(H))})}Ah(n==null?void 0:n.user)&&Ze(t,H=>{var z;(z=H.selectedGithubRepos)!=null||(H.selectedGithubRepos=new Map),H.selectedGithubRepos.set(a,lo({selectedRepos:["openai/openai"],selectedAllRepos:!1}))})},[t,p,g,a,m,u,d==null?void 0:d.sync_enabled_objects,i,n==null?void 0:n.user]);const h=_.useMemo(()=>{var I,N,L,D;if(a==null&&(d!=null&&d.sync_enabled_objects))return{selectedRepos:d.sync_enabled_objects.filter($=>$.object_type==="repository").map($=>$.object_name).filter($=>$!=null),selectedAllRepos:!1};const M=g==null?void 0:g.get(a);if(M)return M;if(m&&(((N=(I=m.selectedRepos)==null?void 0:I.length)!=null?N:0)>0||m.selectedAllRepos)&&(i==null||((D=(L=m.selectedRepos)==null?void 0:L.length)!=null?D:0)<=i))return m;const A=KC(u);if(A&&A.has(a)){const F=A.get(a);if(F)return F}return Fb()},[a,d==null?void 0:d.sync_enabled_objects,g,m,u,i]),x=_.useCallback(M=>{t&&Ze(t,A=>{var I;A.hasModifiedGithubRepos=!0,(I=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map),A.selectedGithubRepos.set(a,lo(M)),iu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),v=_.useCallback(M=>{t&&Ze(t,A=>{var N,L;A.hasModifiedGithubRepos=!0,(N=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const I=(L=A.selectedGithubRepos.get(a))!=null?L:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(I.selectedRepos)&&!I.selectedRepos.includes(M)&&(I.selectedRepos=[...I.selectedRepos,M]),A.selectedGithubRepos.set(a,lo(I)),iu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),y=_.useCallback(M=>{t&&Ze(t,A=>{var N,L;A.hasModifiedGithubRepos=!0,(N=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const I=(L=A.selectedGithubRepos.get(a))!=null?L:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(I.selectedRepos)&&(I.selectedRepos=I.selectedRepos.filter(D=>D!==M)),A.selectedGithubRepos.set(a,lo(I)),iu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),b=_.useCallback(M=>{t&&Ze(t,A=>{var N,L;A.hasModifiedGithubRepos=!0,(N=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const I=(L=A.selectedGithubRepos.get(a))!=null?L:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(I.selectedRepos)&&(I.selectedRepos.includes(M)?I.selectedRepos=I.selectedRepos.filter(D=>D!==M):I.selectedRepos=[...I.selectedRepos,M]),A.selectedGithubRepos.set(a,lo(I)),iu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),C=_.useCallback(M=>{t&&Ze(t,A=>{var N,L;A.hasModifiedGithubRepos=!0,(N=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const I=(L=A.selectedGithubRepos.get(a))!=null?L:{selectedRepos:[],selectedAllRepos:!1};I.selectedAllRepos=M,A.selectedGithubRepos.set(a,lo(I)),iu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]);return{selectedRepos:h,setSelectedRepos:x,addRepo:v,removeRepo:y,toggleRepo:b,setAllRepos:C}}function _Ye(t,e=null){var n,s,o;return(o=(s=(n=t==null?void 0:t.selectedGithubRepos)==null?void 0:n.get(e))!=null?s:Uce(e))!=null?o:Fb()}function VN(t){return t.selectedAllRepos||t.selectedRepos!=null&&t.selectedRepos.length>0}function Fb(){return{selectedRepos:[],selectedAllRepos:!1}}function Bce(t,e){var n;try{const s=JSON.parse(t);if("selectedRepos"in s&&"selectedAllRepos"in s)return s;const o=e==null?"__null__":e;return(n=s[o])!=null?n:void 0}catch(s){return}}function Uce(t){const e=ps.getCookie(gs.LastSelectedGithubRepo);return e?Bce(e,t):Fb()}const $ce={disabledAutoConnectors:[],isLoading:!1},Vce=t=>{"use forget";var te,ce;const e=G.c(60),{clientThreadId:n,includeAutoConnectors:s}=t,o=s===void 0?!1:s,a=V();let i;e[0]!==a?(i=QT(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=JT();let d;e[2]!==a?(d=()=>k3(a),e[2]=a,e[3]=d):d=e[3];const u=ae(d);let f;e[4]!==u||e[5]!==c?(f=(u==null?void 0:u.isPersonalAccount())&&c,e[4]=u,e[5]=c,e[6]=f):f=e[6];const m=!!f;let p;e[7]!==o?(p={includeAutoConnectors:o},e[7]=o,e[8]=p):p=e[8];const{connectedTypes:g,isLoading:h,linkIdToConnectedType:x}=w3(p);let v;e[9]!==a||e[10]!==o?(v=()=>o?bH(a):$ce,e[9]=a,e[10]=o,e[11]=v):v=e[11];const{isLoading:y,disabledAutoConnectors:b}=ae(v);let C;e[12]!==n?(C={clientThreadId:n},e[12]=n,e[13]=C):C=e[13];const{connectorConfigMap:S}=Hce(C);let k;e[14]!==a?(k=()=>E3(a),e[14]=a,e[15]=k):k=e[15];const E=ae(k),T=!E,{connectedTypes:M,isLoading:A}=XT(),{data:I,isLoading:N}=e8();let L;e[16]===Symbol.for("react.memo_cache_sentinel")?(L=yn(),e[16]=L):L=e[16];const D=L,F=h||A||N||y||T;I==null||I.connection_statuses;let $,H,z,K,J,Z,q;if(e[17]!==l||e[18]!==M||e[19]!==E||e[20]!==g||e[21]!==b||e[22]!==o||e[23]!==S||e[24]!==x||e[25]!==(I==null?void 0:I.connection_statuses)||e[26]!==m){const ue=(te=I==null?void 0:I.connection_statuses.filter(Gce).map(Wce))!=null?te:[],me=(ce=I==null?void 0:I.connection_statuses.reduce((Ne,De)=>{if(["activated","partially_activated"].includes(De.user_connection_details.activation_status)&&De.user_connection_details.backing_link_id){const de=x.get(De.user_connection_details.backing_link_id);de&&Ne.add(de)}return Ne},new Set))!=null?ce:new Set,xe=[...g].filter(Ne=>{var De;if(Ne===bt.GDRIVE_ACTION_CONNECTOR&&m){if(ue.includes("gdrive_sync_connector"))return!1}else{if(me.has(Ne))return!1;if(Ne===bt.SHAREPOINT_CONNECTOR&&ue.includes("sharepoint_admin_sync_connector"))return!1}return o&&b.includes(Ne)?!1:Ne!==ll.MCP_CONNECTOR&&(!S.has(Ne)||!((De=S.get(Ne))!=null&&De.disabled))});let pe;e[34]!==M?(pe=[...M].filter(zce),e[34]=M,e[35]=pe):pe=e[35];let Ee;e[36]!==pe?(Ee=[...pe,"web"],e[36]=pe,e[37]=Ee):Ee=e[37],$=Ee;const Se=[...[...E!=null?E:[]].filter(Ne=>l&&Ne===ll.MCP_CONNECTOR||Ne!==ll.MCP_CONNECTOR)];q=Map;let Te;e[38]!==$?(Te=new Set($),e[38]=$,e[39]=Te):Te=e[39],e[40]!==Te?(K=[Pe.Research,Te],e[40]=Te,e[41]=K):K=e[41],J=[Pe.Slurm,new Set([...xe,...ue])],Z=[Pe.Glaux,new Set([...Se,...ue])],H=null,z=new Set(ue),e[17]=l,e[18]=M,e[19]=E,e[20]=g,e[21]=b,e[22]=o,e[23]=S,e[24]=x,e[25]=I==null?void 0:I.connection_statuses,e[26]=m,e[27]=$,e[28]=H,e[29]=z,e[30]=K,e[31]=J,e[32]=Z,e[33]=q}else $=e[27],H=e[28],z=e[29],K=e[30],J=e[31],Z=e[32],q=e[33];let se;e[42]!==H||e[43]!==z?(se=[H,z],e[42]=H,e[43]=z,e[44]=se):se=e[44];let ie;e[45]!==K||e[46]!==J||e[47]!==Z||e[48]!==se?(ie=[K,J,Z,se],e[45]=K,e[46]=J,e[47]=Z,e[48]=se,e[49]=ie):ie=e[49];let ee;if(e[50]!==$||e[51]!==q||e[52]!==ie){ee=new q(ie);let ue;e[54]===Symbol.for("react.memo_cache_sentinel")?(ue=D?["cloud"]:[],e[54]=ue):ue=e[54];let me;e[55]!==$?(me=new Set([...$,"web",...ue]),e[55]=$,e[56]=me):me=e[56],ee.set(hs,me),e[50]=$,e[51]=q,e[52]=ie,e[53]=ee}else ee=e[53];const le=ee;let X;return e[57]!==le||e[58]!==F?(X={availableConnectorTypes:le,isLoading:F},e[57]=le,e[58]=F,e[59]=X):X=e[59],X},Hce=t=>{"use forget";const e=G.c(12),{clientThreadId:n}=t,s=V();let o;e[0]!==n||e[1]!==s?(o=()=>bn(yt(s,n)),e[0]=n,e[1]=s,e[2]=o):o=e[2];const a=ae(o),i=ne(),l=Of();l==null||l.connectorConfig;let c;if(e[3]!==a||e[4]!==i||e[5]!==(l==null?void 0:l.connectorConfig)){const f=(l==null?void 0:l.connectorConfig)||{};let m;e[7]!==a||e[8]!==i?(m=(p,g)=>{const[h,x]=g,v=h,y=x.enabledModels&&a?!x.enabledModels.includes(a.id):!1;return p.set(v,{disabled:y,disabledText:y?i.formatMessage({id:"1MD3y6",defaultMessage:"Switch to {model} model to use connectors"},{model:x.enabledModels.join(", ")}):void 0,hasBetaTag:x.beta}),p},e[7]=a,e[8]=i,e[9]=m):m=e[9],c=Object.entries(f).reduce(m,new Map),e[3]=a,e[4]=i,e[5]=l==null?void 0:l.connectorConfig,e[6]=c}else c=e[6];const d=c;let u;return e[10]!==d?(u={connectorConfigMap:d},e[10]=d,e[11]=u):u=e[11],u};function Gce(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function Wce(t){return t.user_connection_details.connection_type}function zce(t){return t!==ll.MCP_CONNECTOR}const qce=(t,e)=>{var s,o,a,i;if(!t)return{};const n=t.tree.getBranchFromLeaf(t.currentLeafId);for(const l of[...n].reverse()){const c=l.message;if(c.author.role!==Ke.User)continue;const d=(s=c.metadata)!=null?s:{};let u=[];e===Pe.Research?u=(o=d.caterpillar_selected_sources)!=null?o:[]:u=(a=d.selected_sources)!=null?a:[];const f=(i=d==null?void 0:d.selected_mcp_sources)!=null?i:[],m=u.map(p=>{if(p==="web"||p==="cloud")return p;const g=Object.entries(n3);for(const[h,x]of g)if(x===p)return h;return p});if(u.length||f.length){const p=new Set(m),g=new Set(f.map(x=>x.id)),h=new Set(f.filter(x=>x.status==="ONLY_ME").map(x=>x.id));return{selectedSources:p,selectedMCPSources:g,selectedByoMCPSources:h}}}return{}},Yce=t=>{var n,s,o,a,i,l,c,d;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const u of e){const f=u.message;if(f.author.role!==Ke.User&&((n=f.metadata)==null?void 0:n.invoked_resource)===void 0||f.content.content_type==="user_editable_context")continue;const m=(o=(s=f.metadata)==null?void 0:s.selected_sources)!=null?o:[],p=(i=(a=f.metadata)==null?void 0:a.selected_mcp_sources)!=null?i:[];if(((l=f.metadata)==null?void 0:l.invoked_resource)!==void 0||m.length>0||p.length>0)return p.some(g=>g.status==="ONLY_ME")||((d=(c=f.metadata)==null?void 0:c.invoked_resource)==null?void 0:d.publish_status)==="private"}},Zce=t=>{var e;return ye(t,"3544641259")||!!((e=SH(t))!=null&&e.enabled)},Kce=(t,e,n)=>[...t].filter(s=>e.includes(s)||n&&zi(s)),lu=t=>{B.logEventWithStatsig("chatgpt_connectors_toggled_sources","chatgpt_connectors_toggled_sources",t)};function La(t,e=!1){var Ne,De;const n=V(),{session:s}=vd(n),o=ye(n,"4059945251"),a=Zce(n),i=ZT(),l=ae(i),c=_.useMemo(()=>S3(de=>qce(de,i()),{equals:Bf}),[i]),d=yt(n,t),u=ae(()=>c(d)),f=ae(()=>T3(n)),m=ae(()=>E3(n)),p=f===void 0||m===void 0,g=QT(n),h=ae(()=>Ih(n)),x=h===void 0,v=_.useMemo(()=>(h!=null?h:[]).filter(de=>["admin_connected","user_connected"].includes(de.user_connection_details.auth_status)),[h]),y=ye(n,"1030527215"),{data:b}=to(Lt.EnableRemoteBrowserData),{availableConnectorTypes:C,isLoading:S}=Vce({clientThreadId:t,includeAutoConnectors:e}),k=y&&!b&&_l(l),[E,T,M,A,I,N]=Ve(t,de=>[Yce(de),de==null?void 0:de.startedWithByoMcp,de==null?void 0:de.selectedSources,de==null?void 0:de.selectedMCPSources,de==null?void 0:de.hasModifiedSources,de==null?void 0:de.mentionedSources]),{platformConnectors:L,isLoading:D}=Ad(),F=l===Pe.Research||_l(l),{connectorLinks:$,isLoading:H,isFetching:z}=Uf({skip:!a||!F,fetchValidLinksOnly:!0}),K=ae(()=>Md(n)),J=Cn(),Z=(J==null?void 0:J.isWorkspacePlan())&&K,q=_.useMemo(()=>g?(f!=null?f:[]).filter(de=>de.type===ll.MCP_CONNECTOR&&($==null?void 0:$.has(de.id))).map(de=>String(de.id)):[],[g,f,$]);_.useEffect(()=>{t&&T===void 0&&E!==void 0&&Ze(t,de=>{de.startedWithByoMcp=E})},[t,T,E]),_.useEffect(()=>{if(!t||T===void 0||D||Z)return;const de=M==null?void 0:M.get(l),oe=A==null?void 0:A.get(l),we=new Set([...oe!=null?oe:[]].filter(fe=>{const re=L.get(fe);return(re==null?void 0:re.status)==="ONLY_ME"})),Ce=new Set([...oe!=null?oe:[]].filter(fe=>{const re=L.get(fe);return(re==null?void 0:re.status)!=="ONLY_ME"}));T?(de&&de.size>0||Ce.size>0)&&Ze(t,fe=>{var re,ve,Me,$e;(ve=(re=fe.selectedSources)==null?void 0:re.get(l))==null||ve.clear();for(const Le of Ce)($e=(Me=fe.selectedMCPSources)==null?void 0:Me.get(l))==null||$e.delete(Le)}):we.size>0&&Ze(t,fe=>{var re,ve;for(const Me of we)(ve=(re=fe.selectedMCPSources)==null?void 0:re.get(l))==null||ve.delete(Me)})},[t,T,M,A,l,L,D,Z]),_.useEffect(()=>{var ve,Me,$e,Le;if(!t||I)return;const de=(ve=M==null?void 0:M.has(l))!=null?ve:!1,oe=(Me=A==null?void 0:A.has(l))!=null?Me:!1,we=Oc(l)&&!de&&!p&&!x,Ce=Oc(l)&&g&&!oe&&q.length>0;if(we||Ce){Ze(t,Ae=>{var He,Qe;we&&((He=Ae.selectedSources)!=null||(Ae.selectedSources=new Map),Ae.selectedSources.set(l,new Set([...m!=null?m:[],...(v!=null?v:[]).map(ht=>ht.user_connection_details.connection_type)]))),Ce&&((Qe=Ae.selectedMCPSources)!=null||(Ae.selectedMCPSources=new Map),Ae.selectedMCPSources.set(l,new Set(q)))});return}if(de||oe)return;const fe=u.selectedSources,re=u.selectedMCPSources;(($e=fe==null?void 0:fe.size)!=null?$e:0)===0&&((Le=re==null?void 0:re.size)!=null?Le:0)===0||Ze(t,Ae=>{var He,Qe;fe&&fe.size>0&&((He=Ae.selectedSources)!=null||(Ae.selectedSources=new Map),Ae.selectedSources.set(l,new Set(fe))),re&&re.size>0&&((Qe=Ae.selectedMCPSources)!=null||(Ae.selectedMCPSources=new Map),Ae.selectedMCPSources.set(l,new Set(re)))})},[t,M,A,I,l,u.selectedSources,u.selectedMCPSources,m,g,q,n,v,p,x]);const se=_.useMemo(()=>{var we;const de=(we=M==null?void 0:M.get(l))!=null?we:new Set;if(I)return[...de];const oe=u.selectedSources;return oe&&oe.size>0?[...oe]:k?de.has("cloud")?["web","cloud"]:["web"]:[...de]},[M,l,I,u.selectedSources,k]),ie=_.useMemo(()=>new Set(N!=null?N:[]),[N]),ee=_.useMemo(()=>{var de;return S?new Set([...se,...N!=null?N:[]]):new Set([...Kce([...se],[...(de=C.get(l))!=null?de:[]],g&&l===Pe.Glaux),...N!=null?N:[]])},[C,S,N,l,se,g]),le=_.useMemo(()=>{var we;const de=(we=A==null?void 0:A.get(l))!=null?we:new Set;if(I)return de;const oe=u.selectedMCPSources;if(oe&&oe.size>0)return oe;if(k)return new Set;if(Oc(l)&&g){const Ce=new Set(de);for(const fe of q)Ce.add(fe);return Ce}return de},[A,I,l,u.selectedMCPSources,k,g,q]),X=_.useMemo(()=>new Set(le),[le]),te=_.useMemo(()=>{if(!a||!F||H||z)return ee;const de=new Set;return ee.forEach(oe=>{if(oe==="web"||oe==="cloud"){de.add(oe);return}if(oe in Wo){const we=Wo[oe];$.has(we)&&de.add(oe);return}if(zi(oe)){$.has(oe)&&de.add(oe);return}}),de},[ee,$,a,F,H,z]),ce=_.useCallback(de=>{var oe,we,Ce;t8({selectedSourcesMap:CH((oe=de.selectedSources)!=null?oe:new Map),selectedMCPSourcesMap:de.selectedMCPSources,scope:{userId:(we=s==null?void 0:s.user)==null?void 0:we.id,workspaceId:(Ce=s==null?void 0:s.account)==null?void 0:Ce.id}})},[(Ne=s==null?void 0:s.user)==null?void 0:Ne.id,(De=s==null?void 0:s.account)==null?void 0:De.id]),ue=_.useCallback(de=>{const oe=L.get(de);return(oe==null?void 0:oe.status)==="ONLY_ME"},[L]),me=_.useCallback(de=>{t&&Ze(t,oe=>{var He,Qe,ht,at,vt,$t,Ct,Vt;const we=(Qe=(He=oe.selectedSources)==null?void 0:He.get(l))!=null?Qe:new Set,Ce=(at=(ht=oe.selectedMCPSources)==null?void 0:ht.get(l))!=null?at:new Set,fe=new Set([...Ce].filter(ue)),re=new Set([...Ce].filter(qt=>!ue(qt))),ve=new Set([...we,...Ce,...(vt=oe.mentionedSources)!=null?vt:[]]),Me=($t=oe.mentionedSources)!=null?$t:new Set;let $e,Le;const Ae=oe.startedWithByoMcp!==void 0;if(zi(de))if(ue(de)){if(Le="mcp-byo",Ce.has(de))$e="remove",Ce.delete(de);else{if(Ae&&oe.startedWithByoMcp===!1&&!Z)return;if($e="add",!Ae&&!Z){we.clear();for(const en of re)Ce.delete(en)}Ce.add(de)}!o&&we.has("web")&&!oe.hasRemovedWebSource&&(we.delete("web"),oe.hasRemovedWebSource=!0)}else if(Le="mcp-workspace",ve.has(de))$e="remove",Ce.delete(de);else{if(Ae&&oe.startedWithByoMcp&&!Z)return;if($e="add",!Ae&&fe.size>0&&!Z)for(const qt of fe)Ce.delete(qt);Ce.add(de),!o&&de!=="web"&&de!=="cloud"&&we.has("web")&&!oe.hasRemovedWebSource&&(we.delete("web"),oe.hasRemovedWebSource=!0)}else if(Le="platform",de==="sharepoint_admin_sync_connector"&&(we.delete("sharepoint_sync_connector"),Me.delete("sharepoint_sync_connector"),we.delete(bt.SHAREPOINT_CONNECTOR),Me.delete(bt.SHAREPOINT_CONNECTOR)),ve.has(de))$e="remove",we.delete(de),Me.has(de)&&Me.delete(de);else{if(Ae&&oe.startedWithByoMcp&&!Z)return;if($e="add",we.add(de),!Ae&&fe.size>0&&!Z)for(const qt of fe)Ce.delete(qt);!o&&de!=="web"&&de!=="cloud"&&we.has("web")&&!oe.hasRemovedWebSource&&(we.delete("web"),oe.hasRemovedWebSource=!0)}(Ct=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,we),(Vt=oe.selectedMCPSources)!=null||(oe.selectedMCPSources=new Map),oe.selectedMCPSources.set(l,Ce),oe.mentionedSources=Me,oe.hasModifiedSources=!0,lu({source:"toggle",action:$e,type:Le,systemHint:l,selectedSource:de}),ce(oe)})},[t,l,o,ce,ue,Z]),xe=_.useCallback(de=>{t&&Ze(t,oe=>{var $e,Le,Ae,He,Qe,ht,at,vt,$t;let we;const Ce=oe.startedWithByoMcp!==void 0,fe=(Le=($e=oe.selectedSources)==null?void 0:$e.get(l))!=null?Le:new Set,re=(He=(Ae=oe.selectedMCPSources)==null?void 0:Ae.get(l))!=null?He:new Set,ve=new Set([...re].filter(ue)),Me=new Set([...re].filter(Ct=>!ue(Ct)));if(ue(de)){if(we="mcp-byo",Ce&&oe.startedWithByoMcp===!1&&!Z)return;if(!Ce&&!Z){((at=(ht=oe.selectedSources)==null?void 0:ht.get(l))!=null?at:new Set).clear();for(const Vt of Me)re.delete(Vt)}re.add(de)}else{if(we=zi(de)?"mcp-workspace":"platform",Ce&&oe.startedWithByoMcp&&!Z)return;if((zi(de)?re:fe).add(de),!Ce&&!Z){const Ct=(Qe=oe.selectedMCPSources)==null?void 0:Qe.get(l);for(const Vt of ve)Ct==null||Ct.delete(Vt)}}(vt=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,fe),($t=oe.selectedMCPSources)!=null||(oe.selectedMCPSources=new Map),oe.selectedMCPSources.set(l,re),lu({source:"toggle",action:"add",type:we,systemHint:l,selectedSource:de}),ce(oe),oe.hasModifiedSources=!0})},[t,l,ce,ue,Z]),pe=_.useCallback(de=>{t&&Ze(t,oe=>{var fe,re,ve,Me;const we=(fe=oe.mentionedSources)!=null?fe:new Set;we.add(de),oe.mentionedSources=we;const Ce=(ve=(re=oe.selectedSources)==null?void 0:re.get(l))!=null?ve:new Set;Ce.add(de),(Me=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,Ce),lu({source:"mentions",action:"add",type:"platform",systemHint:l,selectedSource:de}),ce(oe)})},[t,l,ce]),Ee=_.useCallback(de=>{t&&Ze(t,oe=>{var Ce;const we=(Ce=oe.mentionedSources)!=null?Ce:new Set;we.delete(de),oe.mentionedSources=we,lu({source:"mentions",action:"remove",type:"platform",systemHint:l,selectedSource:de})})},[t,l]),Se=_.useCallback(de=>{t&&Ze(t,oe=>{var ve,Me,$e,Le,Ae,He,Qe,ht,at;const we=(Me=(ve=oe.selectedSources)==null?void 0:ve.get(l))!=null?Me:new Set,Ce=(Le=($e=oe.selectedMCPSources)==null?void 0:$e.get(l))!=null?Le:new Set,fe=(Ae=oe.mentionedSources)!=null?Ae:new Set;let re;ue(de)?(re="mcp-byo",((Qe=(He=oe.selectedMCPSources)==null?void 0:He.get(l))!=null?Qe:new Set).delete(de)):(re=zi(de)?"mcp-workspace":"platform",we.delete(de),Ce.delete(de),fe.has(de)&&fe.delete(de)),(ht=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,we),(at=oe.selectedMCPSources)!=null||(oe.selectedMCPSources=new Map),oe.selectedMCPSources.set(l,Ce),oe.mentionedSources=fe,lu({source:"toggle",action:"remove",type:re,systemHint:l,selectedSource:de}),ce(oe),oe.hasModifiedSources=!0})},[t,l,ce,ue]),Te=_.useRef(!1);return _.useEffect(()=>{if(Te.current||!F||H||z)return;const de=[...ee].filter(oe=>!te.has(oe)&&oe!=="web"&&oe!=="cloud");de.length!==0&&(Te.current=!0,t&&(Ze(t,oe=>{var fe,re,ve,Me;const we=(re=(fe=oe.selectedSources)==null?void 0:fe.get(l))!=null?re:new Set,Ce=(ve=oe.mentionedSources)!=null?ve:new Set;de.forEach($e=>{var Le,Ae,He;if(!zi($e))we.delete($e),Ce.delete($e);else{const Qe=(Ae=(Le=oe.selectedMCPSources)==null?void 0:Le.get(l))!=null?Ae:new Set;Qe.delete($e),(He=oe.selectedMCPSources)!=null||(oe.selectedMCPSources=new Map),oe.selectedMCPSources.set(l,Qe)}}),(Me=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,we),oe.mentionedSources=Ce,ce(oe)}),ii(n,"chatgpt_connectors_toggled_sources",de.length,{action:"expired_auto_removed",sources:de.join(","),systemHint:String(l!=null?l:"")})))},[ee,te,F,t,l,ce,n,H,z]),a?{selectedSources:te,selectedMCPSources:X,mentionedSources:ie,toggleSource:me,addSource:xe,deleteSource:Se,addMentionedSource:pe,deleteMentionedSource:Ee}:{selectedSources:void 0,selectedMCPSources:void 0,mentionedSources:void 0,toggleSource:()=>{},addSource:()=>{},deleteSource:()=>{},addMentionedSource:()=>{},deleteMentionedSource:()=>{}}}function HN(t,e="<unknown>"){if(!t)throw wH(new Error("".concat(e,": unexpected non-truthy condition: ").concat(JSON.stringify(t))),HN)}const Qce=R(()=>P(()=>import("./decxj0nfuivtbs7k.js"),__vite__mapDeps([152,1])),{loading:t=>O(t)}),mm=_.createContext({sourceConversationId:null,sourceMessageId:null,automationId:null,isScheduledRun:!1,modalOpen:!1,openModal:()=>{},closeModal:()=>{}});function xYe({clientThreadId:t,children:e}){var m,p,g,h,x,v,y,b,C;const n=WN(t),s=ode(t),o=((m=s==null?void 0:s.metadata)==null?void 0:m.real_author_type)==="automation";let a=null;o?a=(g=(p=s==null?void 0:s.metadata)==null?void 0:p.real_author_id)!=null?g:null:n&&(a=(x=(h=n==null?void 0:n.metadata)==null?void 0:h.n7jupd_scheduled_id)!=null?x:null);const i=A1(a);let l=null,c=null;o?(l=(v=i==null?void 0:i.source_conversation_id)!=null?v:null,c=(y=i==null?void 0:i.source_message_id)!=null?y:null):n&&(l=(b=At(t))!=null?b:null,c=(C=n==null?void 0:n.id)!=null?C:null);const[d,u]=_.useState(!1),f=_.useMemo(()=>({sourceConversationId:l,sourceMessageId:c,automationId:a,isScheduledRun:o,modalOpen:d,openModal:()=>u(!0),closeModal:()=>u(!1)}),[a,d,l,c,o]);return r.jsxs(mm.Provider,{value:f,children:[e,r.jsx(Xce,{clientThreadId:t})]})}const GN=["daily","weekly","monthly"],Jce=Object.freeze({frequency:"monthly",by_hour:14,by_minute:0,by_month_day:1,by_second:0});function Xce({clientThreadId:t}){const{sourceConversationId:e,sourceMessageId:n,modalOpen:s,closeModal:o,automationId:a}=_.useContext(mm),i=WN(t),l=A1(a);return e?l&&n?r.jsx(tde,{automation:l,sourceConversationId:e,sourceMessageId:n,sourceClientThreadId:t,modalOpen:s,closeModal:o}):i?r.jsx(ede,{sourceClientThreadId:t,sourceConversationId:e,sourceMessage:i,modalOpen:s,closeModal:o}):null:null}function ede({sourceClientThreadId:t,sourceConversationId:e,sourceMessage:n,modalOpen:s,closeModal:o}){const a=rde(t,n),{selectedSources:i}=La(t),{selectedRepos:l}=$N(t),c=Intl.DateTimeFormat().resolvedOptions().timeZone,d=_.useMemo(()=>{var f;return w(w(w({system_hints:[hs]},i&&{selected_sources:xi(i)}),l&&{selected_github_repos:[...(f=l.selectedRepos)!=null?f:[]],selected_all_github_repos:l.selectedAllRepos}),c&&{user_timezone:c})},[i,l,c]),u=Ub(e,t,n.id,d,null);return a?r.jsx(r.Fragment,{children:r.jsx(Ig,{initialScheduleComponents:a.schedule_components,nextRunTimes:a.next_run_times,initialValidFrequencies:GN,children:s&&r.jsx(Db,{source:"chat",item:a,onSave:u,onClose:o})},a.id)}):null}function tde({automation:t,sourceConversationId:e,sourceMessageId:n,sourceClientThreadId:s,modalOpen:o,closeModal:a}){var l;const i=Ub(e,s,n,(l=t.user_message)==null?void 0:l.metadata,t.id);return r.jsx(r.Fragment,{children:r.jsx(Ig,{initialScheduleComponents:t.schedule_components,nextRunTimes:t.next_run_times,initialValidFrequencies:GN,children:o&&r.jsx(Db,{source:"chat",item:t,onSave:i,onClose:a})},t.id)})}function Bb({children:t}){const{openModal:e,automationId:n,sourceMessageId:s,isScheduledRun:o}=_.useContext(mm);return t({openScheduleModal:e,isScheduled:!!n,isSchedulable:!n&&!!s,isScheduledRun:o})}function nde(){const{automationId:t,sourceConversationId:e,sourceMessageId:n}=_.useContext(mm),s=A1(t);if(!s||!e||!n)return null;const o=M3(e);return r.jsx(sde,{automation:s,sourceClientThreadId:o,sourceConversationId:e,sourceMessageId:n})}function sde({sourceConversationId:t,sourceClientThreadId:e,sourceMessageId:n,automation:s}){var l;const o=ne(),a=ot(),i=Ub(t,e,n,(l=s.user_message)==null?void 0:l.metadata,s.id);return r.jsx(Ace,{automation:s,onSave:i,overrideManageAllAction:r.jsx(Y.Item,{icon:Qce,label:o.formatMessage({id:"uPBjIE",defaultMessage:"Schedules"}),onClick:()=>a(ide())})})}function WN(t){return Ve(t,e=>{if(!e)return null;function n(){const s=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!s)return null;for(let o=s.length-1;o>=0;o--)if(ade(s[o].message))return s[o].message;return null}return n()})}function ode(t){return Ve(t,e=>{if(!e)return null;function n(){var o;const s=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!s)return null;for(let a=0;a<s.length;a++){const i=s[a].message;if(i.author.role===Ke.User&&((o=i.metadata)==null?void 0:o.real_author_type)==="automation")return i}return null}return n()})}function ade(t){var e,n;return((e=t.metadata)==null?void 0:e.n7jupd_schedulable)||((n=t.metadata)==null?void 0:n.n7jupd_schedulable_score)!==void 0}function rde(t,e){const n=ne(),s=At(t),o=Ve(t,l=>{const c=l==null?void 0:l.tree.getBranchFromLeaf(e.id);return Pl(c,d=>d.message.author.role===Ke.User)}),a=Ve(t,l=>{var c;return(c=l==null?void 0:l.title)!=null?c:n.formatMessage({id:"4lMgsa",defaultMessage:"New Task"})}),i=_.useMemo(()=>{var c,d;if((c=e.metadata)!=null&&c.n7jupd_summary)return(d=e.metadata)==null?void 0:d.n7jupd_summary;if(!o)return null;const l=o.message.content;return l.content_type==="text"?l.parts.join(""):null},[e,o]);return _.useMemo(()=>!o||!i||!s?null:{id:null,title:a,prompt:i,conversation_id:s,schedule:"",is_enabled:!0,notifications_enabled:!0,email_enabled:!0,target_time_utc:null,schedule_components:Jce,default_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,last_run_time:null,next_run_times:[]},[o,a,i,s])}function Ub(t,e,n,s,o){const a=jt(),i=A1(o);return _.useCallback(async(c,d,u,f,m,p,g,h)=>{var v,y;HN(t,"Need server thread ID");const x=await ge.safePost("/conversation/{conversation_id}/agent_automation",{parameters:{path:{conversation_id:t}},requestBody:{jawbone_id:c,title:d,schedule:u,is_enabled:f,prompt:m,default_timezone:p,schedule_components:g,last_run_time:h,email_enabled:(v=i==null?void 0:i.email_enabled)!=null?v:!0,notifications_enabled:(y=i==null?void 0:i.notifications_enabled)!=null?y:!0,message_id:n,user_message:s&&PA(ls(m,s))}});return a.invalidateQueries({queryKey:DN()}),e&&Ze(e,b=>{dn.updateTree(b,C=>{C.updateNodeMessageMetadata(n,{n7jupd_scheduled_id:x.id})})}),x},[a,n,t,e,i,s])}function ide(){return"/schedules"}const Ys={gray:{solid:{50:"#f9f9f9",400:"#8f8f8f"}},green:{400:"#04b84c"},purple:{400:"#924ff7"},blue:{400:"#0285ff"},orange:{400:"#fb6a22"},red:{400:"#fa423e"},pink:{400:"#ff66ad"},yellow:{400:"#ffc300"}},on=new Set;function yYe(){return Promise.allSettled(Array.from(on).map(t=>t()))}const zN=R(()=>P(()=>import("./nytsss2rto6p1kar.js"),__vite__mapDeps([153,1])));on.add(zN.prefetch);const qN=R(()=>P(()=>import("./kxu1gp8b3z2ozjpe.js"),__vite__mapDeps([154,1])));on.add(qN.prefetch);const YN=R(()=>P(()=>import("./mvqk0jsj23ovkg02.js"),__vite__mapDeps([155,1])));on.add(YN.prefetch);const ZN=R(()=>P(()=>import("./jj7wmm5qo5qzg1m1.js"),__vite__mapDeps([156,1])));on.add(ZN.prefetch);const KN=R(()=>P(()=>import("./lpy0q055i382xanc.js"),__vite__mapDeps([157,1])));on.add(KN.prefetch);const QN=R(()=>P(()=>import("./c8qz513xi61o87kz.js"),__vite__mapDeps([158,1])));on.add(QN.prefetch);const JN=R(()=>P(()=>import("./jc289srcgt4kpn3c.js"),__vite__mapDeps([159,1])));on.add(JN.prefetch);const XN=R(()=>P(()=>import("./dj4o13sb5g3xcmb3.js"),__vite__mapDeps([160,1])));on.add(XN.prefetch);const eP=R(()=>P(()=>import("./ii4wpa4hrkzspqol.js"),__vite__mapDeps([161,1])));on.add(eP.prefetch);const tP=R(()=>P(()=>import("./f371ag1u7jgitzn5.js"),__vite__mapDeps([162,1])));on.add(tP.prefetch);const nP=R(()=>P(()=>import("./otibmnf3wcwem3h5.js"),__vite__mapDeps([163,1])));on.add(nP.prefetch);const sP=R(()=>P(()=>import("./a7t2z9w3mxh5uner.js"),__vite__mapDeps([164,1])));on.add(sP.prefetch);const oP=R(()=>P(()=>import("./ny1kv4ggn7maxyzb.js"),__vite__mapDeps([165,1])));on.add(oP.prefetch);const aP=R(()=>P(()=>import("./ldblp2qq467fzutv.js"),__vite__mapDeps([166,1])));on.add(aP.prefetch);const rP=R(()=>P(()=>import("./d3u4n3d2otkvc852.js"),__vite__mapDeps([167,1])));on.add(rP.prefetch);const iP=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0));on.add(iP.prefetch);const lP=R(()=>P(()=>import("./20q3iuutgud8fc8a.js"),__vite__mapDeps([168,1])));on.add(lP.prefetch);const cP=R(()=>P(()=>import("./fjpqjlv08i02xcat.js"),__vite__mapDeps([169,1])));on.add(cP.prefetch);const dP=R(()=>P(()=>import("./lofnqtpoo15yfpim.js"),__vite__mapDeps([170,1])));on.add(dP.prefetch);const uP=R(()=>P(()=>import("./uagvk69498d2kagr.js"),__vite__mapDeps([171,1])));on.add(uP.prefetch);const fP=R(()=>P(()=>import("./ii889c77tzp1fsld.js"),__vite__mapDeps([172,1])));on.add(fP.prefetch);const mP=R(()=>P(()=>import("./d8yt8dkeyw2i10n0.js"),__vite__mapDeps([173,1])));on.add(mP.prefetch);const pP=R(()=>P(()=>import("./oxp9fl5my018b2af.js"),__vite__mapDeps([174,1])));on.add(pP.prefetch);const gP=R(()=>P(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([52,1])));on.add(gP.prefetch);const hP=R(()=>P(()=>import("./cd4j0a8ftb7rofbi.js"),__vite__mapDeps([175,1])));on.add(hP.prefetch);const _P=R(()=>P(()=>import("./juy4s22sn689tqpq.js"),__vite__mapDeps([176,1])));on.add(_P.prefetch);const xP=R(()=>P(()=>import("./mpq6620swlx81941.js"),__vite__mapDeps([177,1])));on.add(xP.prefetch);const yP=R(()=>P(()=>import("./f3e3e0if4jix3vyn.js"),__vite__mapDeps([178,1])));on.add(yP.prefetch);const vP=R(()=>P(()=>import("./jhvfvrav7re5u2w1.js"),__vite__mapDeps([179,1])));on.add(vP.prefetch);const bP=R(()=>P(()=>import("./pes7awv5rcnazjq0.js"),__vite__mapDeps([180,1])));on.add(bP.prefetch);const CP=R(()=>P(()=>import("./j4p4w74o1oeu6aq1.js"),__vite__mapDeps([181,1])));on.add(CP.prefetch);const SP=R(()=>P(()=>import("./byhk9rdo4zj2h7y8.js"),__vite__mapDeps([182,1])));on.add(SP.prefetch);const kn={red:Ys.red[400],orange:Ys.orange[400],yellow:Ys.yellow[400],green:Ys.green[400],blue:Ys.blue[400],purple:Ys.purple[400],pink:Ys.pink[400]},lde=new Map([["pencil","edit"],["code-brackets","function"],["balancing-scale","scale"],["globe-spin","desk-globe"],["lite","lotus"],["pens","customize"]]),cde=t=>{var n;const e=(n=lde.get(t))!=null?n:t;return wP[e]},vYe={[kn.red]:{color:kn.red,label:Ge({defaultMessage:"Red",id:"project-color-red"})},[kn.orange]:{color:kn.orange,label:Ge({defaultMessage:"Orange",id:"project-color-orange"})},[kn.yellow]:{color:kn.yellow,label:Ge({defaultMessage:"Yellow",id:"project-color-yellow"})},[kn.green]:{color:kn.green,label:Ge({defaultMessage:"Green",id:"project-color-green"})},[kn.blue]:{color:kn.blue,label:Ge({defaultMessage:"Blue",id:"project-color-blue"})},[kn.purple]:{color:kn.purple,label:Ge({defaultMessage:"Purple",id:"project-color-purple"})},[kn.pink]:{color:kn.pink,label:Ge({defaultMessage:"Pink",id:"project-color-pink"})}},wP={folder:{id:"folder",icon:aP,label:Ge({id:"U1Ed2E",defaultMessage:"Folder"})},"currency-dollar":{id:"currency-dollar",icon:JN,label:Ge({id:"O1L2ji",defaultMessage:"Currency Dollar"})},book:{id:"book",icon:YN,label:Ge({id:"Ikd2nV",defaultMessage:"Book"})},"graduation-cap":{id:"graduation-cap",icon:lP,label:Ge({id:"XyOlu9",defaultMessage:"Graduation Cap"})},edit:{id:"edit",icon:gP,label:Ge({id:"e+bON4",defaultMessage:"Pencil"})},writing:{id:"writing",icon:SP,label:Ge({id:"Xsx76J",defaultMessage:"Writing"})},function:{id:"function",icon:KN,label:Ge({id:"1dLIWL",defaultMessage:"Code Brackets"})},terminal:{id:"terminal",icon:CP,label:Ge({id:"A7r7WM",defaultMessage:"Terminal"})},music:{id:"music",icon:mP,label:Ge({id:"vhV09/",defaultMessage:"Music"})},popcorn:{id:"popcorn",icon:xP,label:Ge({id:"IBA2my",defaultMessage:"Popcorn"})},customize:{id:"customize",icon:XN,label:Ge({id:"NoBDe3",defaultMessage:"Customize"})},palette:{id:"palette",icon:QN,label:Ge({id:"1NjHcj",defaultMessage:"Palette"})},stethoscope:{id:"stethoscope",icon:vP,label:Ge({id:"m/9B0l",defaultMessage:"Stethoscope"})},health:{id:"health",icon:cP,label:Ge({id:"uyQlnK",defaultMessage:"Health"})},lotus:{id:"lotus",icon:fP,label:Ge({id:"XVtU4x",defaultMessage:"Lotus"})},suitcase:{id:"suitcase",icon:bP,label:Ge({id:"Q7L6wE",defaultMessage:"Suitcase"})},"bar-chart":{id:"bar-chart",icon:qN,label:Ge({id:"clYNPV",defaultMessage:"Bar Chart"})},kettlebell:{id:"kettlebell",icon:uP,label:Ge({id:"d8EgqT",defaultMessage:"Kettlebell"})},dumbbell:{id:"dumbbell",icon:eP,label:Ge({id:"4f2kWJ",defaultMessage:"Dumbbell"})},logs:{id:"logs",icon:sP,label:Ge({id:"Uo10ll",defaultMessage:"Logs"})},scale:{id:"scale",icon:zN,label:Ge({id:"Duq21q",defaultMessage:"Balancing Scale"})},"desk-globe":{id:"desk-globe",icon:rP,label:Ge({id:"2oKfXd",defaultMessage:"Globe Spin"})},plane:{id:"plane",icon:hP,label:Ge({id:"Mp7VbF",defaultMessage:"Plane"})},globe:{id:"globe",icon:iP,label:Ge({id:"7Gk2Au",defaultMessage:"Globe"})},wrench:{id:"wrench",icon:yP,label:Ge({id:"cVZEQn",defaultMessage:"Wrench"})},paw:{id:"paw",icon:pP,label:Ge({id:"SwLz4n",defaultMessage:"Paw"})},flask:{id:"flask",icon:oP,label:Ge({id:"YRGg1h",defaultMessage:"Flask"})},brain:{id:"brain",icon:ZN,label:Ge({id:"xDBu5X",defaultMessage:"Brain"})},heart:{id:"heart",icon:dP,label:Ge({id:"7bZxVY",defaultMessage:"Heart"})},plant:{id:"plant",icon:_P,label:Ge({id:"h4prM6",defaultMessage:"Plant"})}};function mo(t){return t==null?null:cde(t)}function dde(){return ude}const ude={icon:nP,label:Ge({id:"i39yRC",defaultMessage:"Emoji"}),id:"default",hoverIcon:tP},fde=[{label:Ge({id:"cvNQv+",defaultMessage:"Investing"}),icon:mo("currency-dollar"),color:kn.green,emoji:"currency-dollar"},{label:Ge({id:"fxIuzw",defaultMessage:"Homework"}),icon:mo("graduation-cap"),color:kn.blue,emoji:"graduation-cap"},{label:Ge({id:"x1ggA9",defaultMessage:"Writing"}),icon:mo("writing"),color:kn.purple,emoji:"writing"},{label:Ge({id:"FdXDrg",defaultMessage:"Health"}),icon:mo("health"),color:kn.red,emoji:"health"},{label:Ge({id:"ftkSeM",defaultMessage:"Travel"}),icon:mo("plane"),color:kn.yellow,emoji:"plane"}],mde=[{label:Ge({id:"dNjvRY",defaultMessage:"Research"}),icon:mo("desk-globe"),color:kn.blue,emoji:"desk-globe"},{label:Ge({id:"lPMK20",defaultMessage:"Planning"}),icon:mo("book"),color:kn.green,emoji:"book"},{label:Ge({id:"LM4RDS",defaultMessage:"Code"}),icon:mo("function"),color:kn.orange,emoji:"function"},{label:Ge({id:"umKvY2",defaultMessage:"Meetings"}),icon:mo("logs"),color:kn.purple,emoji:"logs"},{label:Ge({id:"NXAQZ1",defaultMessage:"Onboarding"}),icon:mo("suitcase"),color:kn.yellow,emoji:"suitcase"},{label:Ge({id:"4tnZcg",defaultMessage:"Brainstorms"}),icon:mo("brain"),color:kn.pink,emoji:"brain"}];function bYe(t){return kH(t)?mde:fde}function CYe(){return Object.values(wP)}const pde=R(()=>P(()=>import("./ldblp2qq467fzutv.js"),__vite__mapDeps([166,1])),{loading:t=>O(t)}),gde=R(()=>P(()=>import("./gqy20yp8ouicffpb.js"),__vite__mapDeps([183,1])),{loading:t=>O(t)});function kP(t){"use forget";const e=G.c(23),{color:n,emoji:s,className:o,isSharedProject:a,size:i,strict:l}=t,c=s===void 0?null:s,d=ne();let u;if(e[0]!==o||e[1]!==n||e[2]!==c||e[3]!==d||e[4]!==a||e[5]!==i||e[6]!==l){const f=W("icon",i==="lg"&&"h-8 w-8 max-md:h-6 max-md:w-[28px] max-md:h-[28px]",o);let m,p,g,h,x,v;if(e[8]!==n||e[9]!==c||e[10]!==d||e[11]!==a||e[12]!==l){const y=mo(c),b=!!y;g=!b&&!l;const C=dde();let S;m=null;let k=null;b?(S=y.icon,k=y):g?(S=C.icon,m=C.hoverIcon,k=C):S=a?gde:pde;const E=g&&"relative";e[19]!==E?(x=W(E),e[19]=E,e[20]=x):x=e[20];const T=n!=null?n:void 0;e[21]!==T?(v={color:T},e[21]=T,e[22]=v):v=e[22],p=S,h=k?d.formatMessage(k.label):void 0,e[8]=n,e[9]=c,e[10]=d,e[11]=a,e[12]=l,e[13]=m,e[14]=p,e[15]=g,e[16]=h,e[17]=x,e[18]=v}else m=e[13],p=e[14],g=e[15],h=e[16],x=e[17],v=e[18];u=r.jsxs("div",{className:x,style:v,children:[r.jsx(p,{"aria-label":h,className:W(f,g&&"group-hover:invisible group-data-[state=open]:invisible")}),g&&m&&r.jsx(m,{"aria-hidden":!0,inert:!0,className:W(f,"invisible absolute inset-0 place-self-center justify-self-center group-hover:visible group-data-[state=open]:visible")})]}),e[0]=o,e[1]=n,e[2]=c,e[3]=d,e[4]=a,e[5]=i,e[6]=l,e[7]=u}else u=e[7];return u}const SYe=R(()=>P(()=>import("./ufl1569g7nfrrv2b.js"),__vite__mapDeps([184,1,10,11,185])).then(t=>t.SnorlaxFolderAnimation),{loading:({color:t,isSharedProject:e,strict:n})=>r.jsx(kP,{color:t,isSharedProject:e,strict:n})}),hde=R(()=>P(()=>import("./ibe8nrmu3pupvrfv.js"),__vite__mapDeps([186,1])),{loading:t=>O(t)}),d0=R(()=>P(()=>Promise.resolve().then(()=>Ome),void 0).then(t=>t.CreateOrEditProjectModalAsync));function Ox(t){"use forget";const e=G.c(47),n=ne(),s=jt(),o=V(),a=!t.inSidebarFlyout,{canCreate:i}=EH(),l=ot(),[c,d]=_.useState(!1),{snorlaxes:u,hasNextPage:f,fetchNextPage:m,isLoading:p,isFetchingNextPage:g,isError:h}=A3();let x,v,y,b,C;if(e[0]!==a||e[1]!==i||e[2]!==o||e[3]!==f||e[4]!==c||e[5]!==n||e[6]!==h||e[7]!==p||e[8]!==l||e[9]!==m||e[10]!==t||e[11]!==s||e[12]!==u){const E=t.inSidebarFlyout?u.slice(n8):u;let T;e[18]!==t.currentGizmoId?(T=D=>{const{gizmo:F}=D;return F.gizmo.id!==t.currentGizmoId},e[18]=t.currentGizmoId,e[19]=T):T=e[19];const M=E.filter(T),A=M.length===0;let I;e[20]!==f||e[21]!==p||e[22]!==m?(I=D=>{if(p||D==null)return;const F=new IntersectionObserver($=>{$[0].isIntersecting&&f&&m()});return F.observe(D),()=>{F.disconnect()}},e[20]=f,e[21]=p,e[22]=m,e[23]=I):I=e[23];const N=I,L=a&&i;x=A&&!h?N:void 0,e[24]!==A||e[25]!==p?(v=A&&p&&r.jsxs(Id,{children:[r.jsx(Y.Shimmer,{}),r.jsx(Y.Shimmer,{})]}),e[24]=A,e[25]=p,e[26]=v):v=e[26],e[27]!==c||e[28]!==n||e[29]!==A||e[30]!==h||e[31]!==s?(y=A&&h&&r.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[n.formatMessage(Kt.unableToLoadHistory),!c&&r.jsx("div",{className:"mt-1",children:r.jsx(_e,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{d(!0),TH(s)},children:n.formatMessage(Kt.retryLoadingHistory)})})]}),e[27]=c,e[28]=n,e[29]=A,e[30]=h,e[31]=s,e[32]=y):y=e[32],e[33]!==o||e[34]!==l||e[35]!==t||e[36]!==L?(b=L&&r.jsx(r.Fragment,{children:r.jsx(Y.Item,{icon:hde,label:r.jsx(j,w({},Kt.newProjectButton)),onSelect:()=>{lt(o,d0,{onClose:()=>Ss(o,d0),onSuccess:async D=>{D&&(await t.onUpdateConversationGizmo(D),l("/g/".concat(D,"/project")),Ss(o,d0))}})}})}),e[33]=o,e[34]=l,e[35]=t,e[36]=L,e[37]=b):b=e[37],C=!p&&!A&&M.map((D,F)=>{const{gizmo:$}=D,H=F===M.length-1?N:void 0;return r.jsxs(r.Fragment,{children:[L&&F===0&&r.jsx(Y.Separator,{},"new-project-separator"),r.jsx(Y.LinkItem,{to:$!=null?Mf(o,$):"/",icon:r.jsx(kP,{color:$.gizmo.display.theme,emoji:$.gizmo.display.emoji,strict:!0}),label:$.gizmo.display.name,onClick:()=>{t.inSidebarFlyout||t.onUpdateConversationGizmo($.gizmo.id)},ref:H},$.gizmo.id)]})}),e[0]=a,e[1]=i,e[2]=o,e[3]=f,e[4]=c,e[5]=n,e[6]=h,e[7]=p,e[8]=l,e[9]=m,e[10]=t,e[11]=s,e[12]=u,e[13]=x,e[14]=v,e[15]=y,e[16]=b,e[17]=C}else x=e[13],v=e[14],y=e[15],b=e[16],C=e[17];let S;e[38]!==g?(S=g&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Shimmer,{}),r.jsx(Y.Shimmer,{})]}),e[38]=g,e[39]=S):S=e[39];let k;return e[40]!==x||e[41]!==v||e[42]!==y||e[43]!==b||e[44]!==C||e[45]!==S?(k=r.jsxs("div",{ref:x,children:[v,y,b,C,S]}),e[40]=x,e[41]=v,e[42]=y,e[43]=b,e[44]=C,e[45]=S,e[46]=k):k=e[46],k}const QC=R(()=>P(()=>import("./glxl4nz1rmynn05p.js"),__vite__mapDeps([187,1,10,11,188])).then(t=>t.ShareProjectChatModal));function _de(t){"use forget";var h,x,v;const e=G.c(10),{clientThreadId:n}=t,s=V(),o=et(s),a=Qn(n),[i,l,c]=Ve(n,xde),d=o==null?void 0:o.normalizedAccountUserId,{data:u}=s8(c),f=((v=(x=(h=u==null?void 0:u.gizmo.sharing)==null?void 0:h.subjects)==null?void 0:x.length)!=null?v:0)>0,m=(i!=null?i:d)&&(a!=null?a:l)&&js(c)&&f&&!(o!=null&&o.isWorkspaceAccount());let p;e[0]!==s||e[1]!==u||e[2]!==(i==null?void 0:i.id)||e[3]!==a||e[4]!==l||e[5]!==d?(p=()=>{var y,b;u&&lt(s,QC,{gizmo:u,serverThreadId:a!=null?a:l,ownerUserId:(b=(y=i==null?void 0:i.id)!=null?y:d)!=null?b:"",onClose:()=>Ss(s,QC)})},e[0]=s,e[1]=u,e[2]=i==null?void 0:i.id,e[3]=a,e[4]=l,e[5]=d,e[6]=p):p=e[6];let g;return e[7]!==m||e[8]!==p?(g={shouldShowProjectsChatShareModal:m,openProjectsChatShareModal:p},e[7]=m,e[8]=p,e[9]=g):g=e[9],g}function xde(t){return[t==null?void 0:t.sharedProjectConversationOwner,t==null?void 0:t.continuingFromSharedProjectConversationId,he.getGizmoId(t)]}function yde(){"use forget";var i;const t=G.c(5),e=Cn();let n;t[0]!==e?(n=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=n):n=t[1];const s=Th(n),o=s.isLoading?null:((i=s.data)==null?void 0:i.allow_third_party_gpts)==="allow_specific";let a;return t[2]!==e||t[3]!==o?(a=(e==null?void 0:e.isOwnerOfAccount())&&o,t[2]=e,t[3]=o,t[4]=a):a=t[4],a}function vde(){"use forget";var l;const t=G.c(5),e=Cn();let n;t[0]!==e?(n=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=n):n=t[1];const{data:s,isLoading:o}=Th(n);let a;t[2]!==o||t[3]!==(s==null?void 0:s.permissions)?(a=o?null:((l=s==null?void 0:s.permissions)==null?void 0:l.includes("chatgpt.workspace.feature.enhanced-citations.access"))===!0,t[2]=o,t[3]=s==null?void 0:s.permissions,t[4]=a):a=t[4];const i=a;return I3()&&i}const EP=3;function bde(t){return e=>{if(e){const n=e.filter(s=>s.item.id!==t.item.id);return[t,...n]}return[t]}}function TP(t){return e=>e&&e.filter(n=>n.item.id!==t)}function Cde(t){var e;return((e=t==null?void 0:t.length)!=null?e:0)<EP}function Mc(){return es({queryKey:[ku],queryFn:async()=>await ge.safeGet("/pins",{parameters:{query:{limit:EP}},authOption:nn.SendIfAvailable})})}function Sde(){const t=jt(),e=Ut();return zt({mutationFn:async({isStarred:n,conversation:s})=>(await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:s.id}},requestBody:{is_starred:n},intercomEventOnError:"fetch-error:conversation:star"}),{conversation:s,isStarred:n}),onMutate:({isStarred:n,conversation:s})=>{const o=t.getQueryData([ku]),a=t.getQueryData([Ja]);if(n&&!Cde(o))return{previousStarredConversationsData:o,previousGeneralConversationsData:a};n?(t.setQueryData([ku],bde({item_type:"conversation",item:s})),t.setQueryData([Ja],Au(s.id))):(t.setQueryData([ku],TP(s.id)),t.setQueryData([Ja],Mu(s,{items:[s],total:1,limit:ex,offset:0})));const i=At(s.id);return i&&Ze(i,l=>{l.isStarred=n}),{previousStarredConversationsData:o,previousGeneralConversationsData:a}},onError:(n,s,o)=>{if(o!=null&&o.previousStarredConversationsData&&t.setQueryData([ku],o.previousStarredConversationsData),o!=null&&o.previousGeneralConversationsData&&t.setQueryData([Ja],o.previousGeneralConversationsData),s){const i=At(s.conversation.id);i&&Ze(i,l=>{l.isStarred=!s.isStarred})}const a=GT(n);e.warning(a!=null?a:"Error",{duration:2})},onSettled:()=>{eo(t)}})}function $b(t){const e=ze(t,"3436367576"),n=e.get("enable_local_indexing",!1),s=e.get("enable_ux",!1),o=et(t),a=!!(o!=null&&o.hasPlusFeatures());return{isFannyPackEnabled:s||a,isFannyPackInitializerEnabled:n||a}}const wde=new RegExp("```.*?\\n([\\s\\S]+?)\\n?```[^`]*$","gms");function JC(){return AH()||IH()}const kde={[qe.Comma]:",",[qe.Enter]:"",[qe.Escape]:"Esc",[qe.ArrowUp]:"",[qe.ArrowDown]:"",[qe.ArrowLeft]:"",[qe.ArrowRight]:"",[qe.Backspace]:"",[qe.Delete]:"",[qe.Tab]:"",[qe.Control]:"Ctrl",[qe.Shift]:"Shift"};function Ede(t){switch(t){case qe.Mod:return JC()?"":"Ctrl";case qe.Meta:return JC()?"":"Win";default:return kde[t]}}const wYe=t=>t.map(e=>{var n;return(n=Ede(e))!=null?n:e}),la=be({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},toggleDevMode:{id:"keyboardActions.toggleDevMode",defaultMessage:"Toggle dev mode"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),MP=new MH,AP=[qe.Mod,qe.Shift,"o"],Tde=[qe.Mod,"k"],Mde=R(()=>P(()=>Promise.resolve().then(()=>F4),void 0).then(t=>t.DeleteConversationConfirmationModalContainer)),kYe=t=>{"use forget";const e=G.c(24),{newChatAction:n,clientThreadId:s,focusPromptTextareaAction:o}=t,a=V(),i=Ut();let l;e[0]!==a?(l=$b(a),e[0]=a,e[1]=l):l=e[1];const{isFannyPackEnabled:c}=l;let d;e[2]!==a?(d=()=>Md(a),e[2]=a,e[3]=d):d=e[3];const u=ae(d);let f;e[4]!==a?(f=()=>jH(a),e[4]=a,e[5]=f):f=e[5];const m=ae(f),p=Tl();let g;e[6]!==a?(g=()=>NH(a),e[6]=a,e[7]=g):g=e[7];const h=ae(g),x=wl(),v=jn(hn),y=ot(),b=ne();let C,S;e[8]!==m||e[9]!==h||e[10]!==s||e[11]!==a||e[12]!==o||e[13]!==b||e[14]!==v||e[15]!==u||e[16]!==x||e[17]!==c||e[18]!==y||e[19]!==n||e[20]!==i||e[21]!==p?(C=()=>{const k=x?[[qe.Mod,"n"]]:[],E={key:"navigationToggle",action:Ade,actionMessageDescriptor:la.navigationToggle,group:Fn.Core,keyboardBinding:[qe.Mod,qe.Shift,"s"]},T={key:"toggleDevMode",action:()=>{p.mutate({setting:Lt.DeveloperMode,value:!u}),i.success(b.formatMessage({id:"ANH+8L",defaultMessage:"Developer mode toggled"}))},actionMessageDescriptor:la.toggleDevMode,group:Fn.Settings,keyboardBinding:[qe.Mod,"."]};return jh(a).addAction({key:"newChat",action:n||rs,actionMessageDescriptor:la.newChat,group:Fn.Core,keyboardBinding:AP,altKeyboardBindings:c?[...k]:[...k,[qe.Mod,"k"]]},{key:"focusPromptTextarea",action:o!=null?o:Vv,actionMessageDescriptor:la.focusPromptTextarea,group:Fn.Chat,keyboardBinding:[qe.Shift,qe.Escape]},{key:"copyLastCodeBlock",action:M=>{if(s!=null){const A=he.getConversationTurns(ft(s));for(let I=A.length-1;I>=0;I--){const{messages:N}=A[I],D=[...N.reduce(Ide,"").matchAll(wde)],F=D.length?D[D.length-1][1]:null;if(F!=null){Zo(F,i,M).then(()=>{i.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:la.copyLastCodeBlock,group:Fn.Chat,keyboardBinding:[qe.Mod,qe.Shift,";"],altKeyboardBindings:[[qe.Mod,qe.Shift,":"]]},{key:"toggleCustomInstructions",action:()=>{y("#settings/".concat(Rn.Personalization))},actionMessageDescriptor:la.toggleCustomInstructions,group:Fn.Settings,keyboardBinding:[qe.Mod,qe.Shift,"i"]},...m&&h?[T]:[],...v?[]:[E],{key:"deleteChat",action:()=>{if(s){const M=At(s);M&&lt(a,Mde,{serverThreadId:M,isActiveConversation:!0})}},actionMessageDescriptor:la.deleteChat,group:Fn.Chat,keyboardBinding:[qe.Mod,qe.Shift,qe.Backspace],altKeyboardBindings:[[qe.Mod,qe.Shift,qe.Delete]]},{key:"zoomIn",enabled:Yo,action:jde,actionMessageDescriptor:la.zoomIn,group:Fn.Chat,keyboardBinding:[qe.Mod,"+"],altKeyboardBindings:[[qe.Mod,"="]]},{key:"zoomOut",enabled:Yo,action:Nde,actionMessageDescriptor:la.zoomOut,group:Fn.Chat,keyboardBinding:[qe.Mod,"-"]},{key:"resetZoom",enabled:Yo,action:Pde,actionMessageDescriptor:la.resetZoom,group:Fn.Chat,keyboardBinding:[qe.Mod,"0"]})},S=[a,s,o,v,x,c,n,i,y,u,p,m,h,b],e[8]=m,e[9]=h,e[10]=s,e[11]=a,e[12]=o,e[13]=b,e[14]=v,e[15]=u,e[16]=x,e[17]=c,e[18]=y,e[19]=n,e[20]=i,e[21]=p,e[22]=C,e[23]=S):(C=e[22],S=e[23]),_.useEffect(C,S)},EYe=t=>{"use forget";const e=G.c(6),{setSelectedVoiceIndex:n,prevVoiceIndex:s,nextVoiceIndex:o}=t,a=V();let i,l;e[0]!==a||e[1]!==o||e[2]!==s||e[3]!==n?(i=()=>jh(a).addAction({key:"selectPrevVoice",action:()=>{n(s)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:Fn.Core,keyboardBinding:[qe.ArrowLeft]},{key:"selectNextVoice",action:()=>{n(o)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:Fn.Chat,keyboardBinding:[qe.ArrowRight]}),l=[a,n,s,o],e[0]=a,e[1]=o,e[2]=s,e[3]=n,e[4]=i,e[5]=l):(i=e[4],l=e[5]),_.useEffect(i,l)};function Ade(){On.setSidebarOpen(void 0)}function Ide(t,e){var n;return((n=e.clientMetadata)==null?void 0:n.err)==null&&e.author.role===Ke.Assistant&&e.recipient==="all"?t+(t?"\n\n":"")+bo(e):t}function jde(){return PH()}function Nde(){return RH()}function Pde(){return LH()}const Rde=R(()=>P(()=>import("./jqy8zfwhk6ptqvmj.js"),__vite__mapDeps([189,1])),{loading:t=>O(t)});function Lde({gizmoResource:t}){const e=V(),n=Ut(),[s,o]=_.useState(!1);return t.gizmo.share_recipient===Xi.Private?null:r.jsx(Y.Item,{onClick:async a=>{a.stopPropagation(),a.preventDefault();try{const i=t.gizmo.short_url?OH(t.gizmo.short_url):window.location.origin.concat(Mf(e,t));await Zo(i,n,a),o(!0),setTimeout(()=>{o(!1)},2e3)}catch(i){Re.addError(i);return}},icon:Rde,children:s?r.jsx(j,w({},XC.copiedURL)):r.jsx(j,w({},XC.copyLink))})}const XC=be({copyLink:{defaultMessage:"Copy link",id:"GizmoInformation.copyLink"},copiedURL:{defaultMessage:"Copied URL",id:"GizmoInformation.copiedURL"}}),Ode=R(()=>P(()=>Promise.resolve().then(()=>eD),void 0),{loading:t=>O(t)});function IP({className:t,inputClassName:e,value:n,onChange:s,onKeyDown:o,onFocus:a,onBlur:i,placeholder:l,id:c,autoFocus:d}){return r.jsxs("div",{className:W("relative",t),children:[r.jsx(Ode,{className:"icon-sm text-token-text-tertiary absolute start-2 top-1/2 -translate-y-1/2 transform"}),r.jsx("input",{id:c,type:"text",value:n,onKeyDown:o,onChange:s,onFocus:a,onBlur:i,placeholder:l,autoFocus:d,className:W("rounded-lg border border-gray-200 ps-8 placeholder:text-gray-500 dark:border-gray-600 dark:bg-gray-700",e),autoComplete:"off"})]})}function jP({modelSwitcherDeny:t}){const e=V(),n=et(e),s=n==null?void 0:n.isPro();switch(t.reason){case Oo.UNSUPPORTED_TOOL_USE:case Oo.UNSUPPORTED_AUDIO:case Oo.UNSUPPORTED_IMAGE:case Oo.UNSUPPORTED_GIZMO:case Oo.UNSUPPORTED_ATTACHMENT:case Oo.UNSUPPORTED_CUSTOM_INSTRUCTIONS:case Oo.UNSUPPORTED_CANVAS:case Oo.UNSUPPORTED_TEMPORARY_CHAT:return r.jsx(r.Fragment,{children:t.description});case $f.RATE_LIMIT:{const{resetsAfter:a}=t,i=new Date(a),l=new Date(a).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});if(s)return r.jsx("div",{children:r.jsx(j,{id:"CwSQn9",defaultMessage:"Temporarily limited. Contact <supportEmail>support@openai.com</supportEmail> for help.",values:{supportEmail:c=>r.jsx(Eo,{to:"mailto:support@openai.com",className:"underline",children:c})}})});if(o8(i))return r.jsx(j,{id:"HUybjA",defaultMessage:"Your limit will reset at {time}",values:{time:l}});if(DH(i))return r.jsx(j,{id:"TvYw9K",defaultMessage:"Your limit will reset at {time} tomorrow",values:{time:l}});{const c=i.toLocaleDateString([],{month:"short",day:"numeric"});return r.jsx(j,{id:"60ZcZL",defaultMessage:"Your limit will reset on {date}",values:{date:c}})}}}const o=t.description;if(o)return r.jsx(r.Fragment,{children:o})}function Vb({clientThreadId:t}){var p;const e=V(),n=yt(e,t),s=Nh(),[o,a]=Ve(t,g=>{var h,x;return[(x=(h=he.getCurrentNode(g))==null?void 0:h.message.metadata)==null?void 0:x.model_switcher_deny,he.getGizmoId(g)]}),i=a!=null?a:s,{data:l}=Si(i),c=ae(()=>ta(n)),d=ne(),u={},f=ye(e,"891514942"),m=Ph();for(const{resets_after:g,model_slug:h}of m)[Lm.CONVERSATION,Lm.REGENERATE].forEach(x=>{var C,S;const v=(C=u[h])!=null?C:{},y=(S=v[x])!=null?S:[],b={reason:$f.RATE_LIMIT,resetsAfter:g,isAvailable:!1};y.push(b),v[x]=y,u[h]=v});if(o==null||o.forEach(g=>{var E,T;const{slug:h,context:x,reason:v,description:y,is_available:b}=g,C=f&&b,S=(E=u[h])!=null?E:{},k=(T=S[x])!=null?T:[];k.push({reason:v,description:y,isAvailable:C}),S[x]=k,u[h]=S}),i&&js(i)){const g=[ds.GIZMO_PROJECT];(p=l==null?void 0:l.files)!=null&&p.length&&g.push(ds.ATTACHMENT),l!=null&&l.gizmo.instructions.length&&g.push(ds.CUSTOM_INSTRUCTIONS),c.categories.forEach(h=>{var C;const{defaultModel:x,supportedFeatures:v}=h,y=v||[],b=[];if(g.includes(ds.GIZMO_PROJECT)&&!y.includes(ds.GIZMO_PROJECT)&&b.push({reason:Oo.UNSUPPORTED_GIZMO,description:d.formatMessage({id:"6w0z4F",defaultMessage:"This model doesn't support projects."}),isAvailable:!1}),g.includes(ds.ATTACHMENT)&&!y.includes(ds.ATTACHMENT)&&b.push({reason:Oo.UNSUPPORTED_ATTACHMENT,description:d.formatMessage({id:"ZKjdak",defaultMessage:"This model doesn't support file attachments."}),isAvailable:!1}),g.includes(ds.CUSTOM_INSTRUCTIONS)&&!y.includes(ds.CUSTOM_INSTRUCTIONS)&&b.push({reason:Oo.UNSUPPORTED_CUSTOM_INSTRUCTIONS,description:d.formatMessage({id:"zaubcf",defaultMessage:"This model doesn't support custom instructions."}),isAvailable:!1}),b.length){const S=(C=u[x])!=null?C:{};[Lm.CONVERSATION,Lm.REGENERATE].forEach(k=>{var T;const E=(T=S[k])!=null?T:[];E.push(...b),S[k]=E,u[x]=S})}})}return u}function NP({modelSlug:t,modelSwitcherDenialsBySlug:e}){var s;const n=t?(s=e[t])==null?void 0:s.conversation:null;return n?n.every(o=>o.isAvailable===!0):!0}const Dde=R(()=>P(()=>import("./ny1kv4ggn7maxyzb.js"),__vite__mapDeps([165,1])),{loading:t=>O(t)}),Fde=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yu),__vite__mapDeps([10,1,11])),{loading:t=>O(t)});function Bde(t){"use forget";var I;const e=G.c(41),{conversation:n,currentModel:s,categoryOptions:o,className:a,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:l,onModelItemClick:c,preferredModelId:d}=t,u=l===void 0?!1:l,f=ne(),m=(I=s==null?void 0:s.id)!=null?I:null,[p,g]=_.useState("");let h;e:{if(!p){h=o;break e}let N;if(e[0]!==o||e[1]!==p){let L;e[3]!==p?(L=D=>D.name.toLowerCase().includes(p.toLowerCase()),e[3]=p,e[4]=L):L=e[4],N=o.filter(L),e[0]=o,e[1]=p,e[2]=N}else N=e[2];h=N}const x=h;let v;e[5]!==a?(v=W("flex flex-col pt-0",a),e[5]=a,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y={borderRadius:"inherit"},e[7]=y):y=e[7];let b;e[8]===Symbol.for("react.memo_cache_sentinel")?(b=N=>{g(N.target.value)},e[8]=b):b=e[8];let C;e[9]!==p?(C=r.jsx("div",{className:"p-2",children:r.jsx(IP,{inputClassName:"w-full",value:p,onKeyDown:Ude,onChange:b})}),e[9]=p,e[10]=C):C=e[10];let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx("hr",{}),e[11]=S):S=e[11];let k;e[12]!==C?(k=r.jsxs("div",{style:y,className:"sticky top-0 z-1 bg-white",children:[C,S]}),e[12]=C,e[13]=k):k=e[13];let E;e[14]!==x.length||e[15]!==f?(E=x.length===0&&r.jsx(Y.Item,{children:f.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),e[14]=x.length,e[15]=f,e[16]=E):E=e[16];let T;if(e[17]!==n||e[18]!==s||e[19]!==m||e[20]!==u||e[21]!==x||e[22]!==i||e[23]!==c||e[24]!==d){let N;e[26]!==n||e[27]!==s||e[28]!==m||e[29]!==u||e[30]!==i||e[31]!==c||e[32]!==d?(N=L=>{const{value:D}=L;return"options"in L?r.jsx(vc,{conversation:n,currentModel:s,isSelected:m==null?void 0:m.startsWith(D),option:L,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:u,onModelItemClick:c,preferredModelId:d},D):r.jsx(Hr,{conversation:n,currentModelId:m,isSelected:m===D,value:D,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:u,onClick:c,preferredModelId:d,children:L.name},D)},e[26]=n,e[27]=s,e[28]=m,e[29]=u,e[30]=i,e[31]=c,e[32]=d,e[33]=N):N=e[33],T=x.map(N),e[17]=n,e[18]=s,e[19]=m,e[20]=u,e[21]=x,e[22]=i,e[23]=c,e[24]=d,e[25]=T}else T=e[25];let M;e[34]!==T||e[35]!==E?(M=r.jsxs("div",{className:"scrollbar-gutter-stable w-[min(320px,95vw)] flex-grow overflow-auto",children:[E,T]}),e[34]=T,e[35]=E,e[36]=M):M=e[36];let A;return e[37]!==M||e[38]!==v||e[39]!==k?(A=r.jsx(Y.Portal,{children:r.jsxs(Y.SubContent,{className:v,children:[k,M]})}),e[37]=M,e[38]=v,e[39]=k,e[40]=A):A=e[40],A}function Ude(t){t.stopPropagation()}function vc({conversation:t,currentModel:e,option:n,isSelected:s=!1,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:a=!1,onModelItemClick:i,preferredModelId:l}){var g;const{name:c,options:d,categoryId:u}=n,f="".concat(c," Models"),m=()=>r.jsx("div",{className:"flex shrink-0 grow justify-between gap-2",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Dde,{className:"icon"}),f]})});let p;return a&&s&&(p=(g=n.options.find(h=>h.value===(e==null?void 0:e.id)))==null?void 0:g.name),r.jsxs(Y.Sub,{children:[r.jsx(Y.SubMenuTrigger,{children:r.jsxs("div",{className:W("flex grow justify-between gap-2 overflow-hidden",a?"items-center break-all":""),children:[u?m():c,s&&r.jsx("div",{className:"text-token-text-tertiary truncate",children:p!=null?p:e==null?void 0:e.title})]})}),r.jsx(Bde,{conversation:t,currentModel:e,categoryOptions:d,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:a,onModelItemClick:i,preferredModelId:l})]})}function Hr({value:t,children:e,icon:n,secondary:s,currentModelId:o,isSelected:a,onClick:i,modelSwitcherDenialsBySlug:l,isUpgradeUpsell:c=!1,testId:d,displayInFull_INTERNAL_USE_ONLY:u=!1,deprecated:f,preferredModelId:m,disabledByAdmin:p,conversation:g}){var T,M;const h=V(),x=t?(M=(T=l[t])==null?void 0:T.conversation)==null?void 0:M[0]:null,v=ys(),y=$s(),b=NP({modelSlug:t,modelSwitcherDenialsBySlug:l}),C=p||!b,S=ze(h,"1846737571"),k=()=>{if(v===Pe.Glaux&&y(null,{ifPrevSystemHint:Pe.Glaux}),i)i(t);else if(t){B.logEvent("Model Switcher Model Changed",{from:o,to:t}),Ye.logEvent("chatgpt_model_switcher_model_changed",t,{from:o!=null?o:"",to:t});const A=t;j3(h,A)||FH(h).mutate({modelSlug:A}),Vf(g,A)}},E=r.jsx(Y.Item,{onClick:k,disabled:C,className:W(u&&"break-all"),icon:n,secondary:s,trailingColor:"primary",trailing:c?r.jsx(_e,{color:"secondary",size:"small",className:S.get("is_upgrade_button_blue",!1)?"border-none bg-blue-600 text-white hover:bg-blue-800":"",children:r.jsx(j,{id:"oKo8wt",defaultMessage:"Upgrade"})}):a?r.jsx(Fde,{className:"icon-sm"}):r.jsx("span",{className:"icon"}),"data-testid":d,children:r.jsxs("span",{className:"flex items-center gap-1",children:[e,t&&t===m&&!a&&!c&&!f&&r.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700",children:r.jsx(j,{id:"model-switcher.preferred",defaultMessage:"GPT creator recommended"})})]})},t);return x?r.jsx(_t,{withArrow:!0,side:"right",sideOffset:-10,label:r.jsx(jP,{modelSwitcherDeny:x}),children:E}):E}var Up=(t=>(t.GPT4o="AG8PqS2q",t.AUTO="auto",t))(Up||{});const $de=t=>{const{categoryId:e}=t;return e==="auto"},Vde=(t,e,n,s)=>{const o=ye(t,"2861925050"),a=n==null?void 0:n.some(({model_slug:i})=>s==null?void 0:s.models.get(i));return!(!o||!a||!e||!e.isSelfServeBusiness())},PP=()=>{const t=gt.getItem(Ue.FinchAdminNotified);return new Date(t!=null?t:0)},Hde=()=>{const t=new Date;t.setDate(t.getDate()+1),gt.setItem(Ue.FinchAdminNotified,t.toISOString())},Gde=()=>{const t=PP();return gt.getItem(Ue.FinchAdminNotified)!=null&&new Date<=t},Wde=()=>{const t=PP();return new Date>t},zde=t=>{switch(t){case"wham":return"wham";case"deep_research":return"deep_research";case"image_gen":return"image_gen";case"gpt-4-5":return"gpt-4-5";default:return null}},qde=Dt(t=>({hasRequestedCredits:Gde(),setHasRequestedCredits:e=>t(()=>({hasRequestedCredits:e}))})),Yde=R(()=>P(()=>import("./gdxlpnxrd91rpva8.js"),__vite__mapDeps([190,1,10,11])).then(t=>t.CreditPurchaseModal)),Zde=()=>{const t=Ut(),e=ne(),{hasRequestedCredits:n,setHasRequestedCredits:s}=qde(),{mutate:o,isPending:a}=zt({mutationFn:i=>ge.safePost("/credits/pleas",{requestBody:{product:i}}),onError:i=>{Re.addError(new Error("Error occurred while submitting credit plea request",{cause:i})),t.danger($c.errorRequestCredits,{toastId:"teams_credit_plea_button"})},onSuccess:()=>{s(!0),t.success(e.formatMessage($c.successRequestCredits)),Hde(),On.setThreadModelPickerAlertDot(!1)}});return{submitCreditPleaRequest:o,hasRequestedCredits:n,isPending:a}},RP=n=>{var s=n,{trigger:t}=s,e=ke(s,["trigger"]);const o=V();_.useEffect(()=>{B.logEventWithStatsig("ChatGPT Credits: Add Credits Button Shown","chatgpt_credits_add_credits_button_shown",{trigger:t})},[t]);const a=()=>{B.logEventWithStatsig("ChatGPT Credits: Add Credits Clicked","chatgpt_credits_add_credits_clicked"),lt(o,Yde)};return r.jsx(_e,U(w({color:"primary",onClick:a},e),{children:r.jsx(j,w({},$c.addCredits))}))},LP=s=>{var o=s,{creditConsumingProduct:t,trigger:e}=o,n=ke(o,["creditConsumingProduct","trigger"]);const a=ne(),{submitCreditPleaRequest:i,isPending:l,hasRequestedCredits:c}=Zde();_.useEffect(()=>{B.logEventWithStatsig("ChatGPT Credits: Notify Admin Button Shown","chatgpt_credits_notify_admin_button_shown",{trigger:e,creditConsumingProduct:t})},[t,e]);const d=()=>{c||(i(t),B.logEventWithStatsig("ChatGPT Credits: Notify Admin Clicked","chatgpt_credits_notify_admin_clicked"))},u=r.jsx(_e,U(w({loading:l,color:c?"secondary":"primary",disabled:c,onClick:d},n),{children:c?a.formatMessage($c.requested):a.formatMessage($c.notifyAdmin)}));return c?r.jsx(_t,{className:"w-auto whitespace-nowrap",withArrow:!0,labelTextAlign:"left",contentClassName:"w-[180px]",side:"right",label:a.formatMessage($c.alreadyRequested),children:u}):u},$c=be({notifyAdmin:{id:"prompt-textarea.teamsCreditRequestBanner.notifyAdmin",defaultMessage:"Notify admin"},addCredits:{id:"prompt-textarea.teamsCreditRequestBanner.addCredits",defaultMessage:"Add credits"},requested:{id:"prompt-textarea.teamsCreditRequestBanner.requested",defaultMessage:"Requested"},errorRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.error",defaultMessage:"Error occurred while submitting credit request"},successRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.success",defaultMessage:"Request sent to your admin"},alreadyRequested:{id:"prompt-textarea.teamsCreditRequestBanner.alreadyRequested",defaultMessage:"Youve already notified your admin"}}),eS="needsCreditsSection",Kde=()=>{const t=Cn(),e=t==null?void 0:t.isOwnerOfAccount();return r.jsxs(Y.Item,{className:"pointer-events-none pe-2.5! hover:bg-transparent hover:text-inherit",onSelect:n=>n.preventDefault(),disabled:!0,children:[r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(j,w({},e?tS.ownerDescription:tS.description))}),e?r.jsx(RP,{size:"small",trigger:"thread-header-dropdown-credits-section"}):r.jsx(LP,{size:"small",creditConsumingProduct:"gpt-4-5",trigger:"thread-header-dropdown-credits-section"})]})},tS=be({description:{id:"prompt-textarea.teamsCreditRequestBanner.label",defaultMessage:"Limits reached. Send a request to your admin to get access"},ownerDescription:{id:"prompt-textarea.teamsCreditRequestBanner.ownerLabel",defaultMessage:"Limits reached. Add credits to your account"}}),Qde="{{.assetPrefix}}/assets/no-auth-upsell-m8ypcpwf.webp",Jde={src:Qde};function Xde({statsig_login_event:t,statsig_signup_event:e,location:n}){const s=V(),o=Gl(s),a=Hd(s,nS.signUpCta),i="no-auth-".concat(n),l=ot(),c=h=>{switch(h){case"attach":return kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_ATTACH;case"model-switcher":return kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_MODEL_SWITCHER;default:return kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL}},d=Ps(s,"2210309751").get("variant","control"),u=()=>{l({hash:Xf,search:window.location.search},{state:{[h1]:"NoAuth Model Picker Upsell"}})},f=()=>{Zt(s,{fallbackScreenHint:"login",callback:h=>{B.logLogInButtonClicked({location:i,provider:h},c(n)),Ye.logEvent(t)},skipLoginModal:!1})},m=()=>{Zt(s,{fallbackScreenHint:"signup",callback:h=>{B.logSignUpButtonClicked({location:i,provider:h},c(n)),Ye.logEvent(e)},skipLoginModal:!1})},p=r.jsx(_e,{as:"button",size:"medium",color:o?"primary":"secondary",onClick:f,children:r.jsx(j,{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"})},"login-button"),g=r.jsx(_e,{as:"button",size:"medium",color:o?"secondary":"primary",onClick:m,children:r.jsx(j,w({},a))},"signup-button");return r.jsxs("div",{className:"-mt-4 flex max-w-[calc(100vw-2rem)] flex-col",children:[r.jsx("img",{className:"max-xs:hidden h-[132px] object-fill",src:Jde.src,alt:""}),r.jsxs("div",{className:"flex flex-col px-4 pt-5 pb-2",children:[r.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:r.jsx(j,{id:"rwmTbn",defaultMessage:"Try advanced features for free"})}),r.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:r.jsx(j,{id:"unOBJo",defaultMessage:"Get smarter responses, upload files, create images, and more by logging in."})}),r.jsx("div",{className:"mt-5 flex flex-row flex-wrap justify-start gap-2",children:o?[p,g]:[g,p]}),d==="model-picker"&&r.jsx("p",{className:"text-token-text-secondary mt-5 text-xs",children:r.jsx(j,U(w({},nS.createWorkspaceTeamOrBusiness),{values:{createWorkspaceLink:h=>r.jsx("span",{onClick:u,className:"text-token-text-secondary decoration-token-text-primary cursor-pointer underline",children:h})}}))})]})]})}const nS=be({signUpCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},createWorkspaceTeamOrBusiness:{id:"components.noAuthUpsell.createWorkspaceTeamOrBusiness",defaultMessage:"<createWorkspaceLink>Create a workspace</createWorkspaceLink> for a team or business"}}),eue=({isUnauthenticated:t,enabled:e=!0})=>es({queryKey:["modelMessageCap",t],queryFn:()=>N3.safeGet("/conversation_limit",{authOption:nn.SendIfAvailable}),enabled:e});function Ng(t){return t.map(e=>typeof e=="string"?e:"").join("")}function TYe(t){return t.map(e=>e.type==="text"?e.text:"").join("\n")}function OP(t,e){const n=[];let s=0;for(let o=0;o<t.length;o++){const a=t[o];if(typeof a=="string")if(e!=null&&e<s+a.length){n.push({type:"text",text:a.slice(0,e-s)});break}else n.push({type:"text",text:a}),s+=a.length;else if(a.content_type===Sa.ImageAssetPointer){const i=o>0?n[o-1]:null;(i==null?void 0:i.type)==="images"?i.imageAssets.push(a):n.push({type:"images",imageAssets:[a]})}else a.content_type===Sa.AudioTranscription&&n.push({type:"transcription",text:a.text})}return n}function MYe({isUserTurn:t,parts:e}){if(!t)return OP(e);const n={text:[],images:[]};for(let o=0;o<e.length;o++){const a=e[o];typeof a=="string"?a.trim().length>0&&n.text.push({type:"text",text:a}):a.content_type===Sa.AudioTranscription?n.text.push({type:"transcription",text:a.text}):a.content_type===Sa.ImageAssetPointer&&n.images.push(a)}const s=[];return n.images.length>0&&s.unshift({type:"images",imageAssets:n.images}),s.push(...n.text.map(o=>({type:o.type,text:o.text}))),s}function tue(t){const e=t&&new Date(t),n=e&&new Date(e);return n?"after ".concat(n.getHours()%12||12,":").concat(n.getMinutes()<10?"0":"").concat(n.getMinutes()," ").concat(n.getHours()>=12?"PM":"AM"):"later"}function nue(t){if(t<60)return{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")};const e=Math.floor(t/60);if(e<24)return{type:"hour",value:e,text:e<2?"hour":"".concat(e," hours")};const n=Math.floor(e/24);return n<7?{type:"day",value:n,text:n<2?"day":"".concat(n," days")}:{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")}}const u0={textarea:"","model-switcher":""};function sue(){const t=V(),e=e1(l=>l.isoDate),n=tue(e),s=ne(),o=qo(wa.isEnterpriseyPlan),a=!tt(t),{data:i}=rt(eue({isUnauthenticated:a}));return _.useMemo(()=>{var g,h,x;const l=(g=i==null?void 0:i.message_cap)!=null?g:0,c=(h=i==null?void 0:i.message_cap_window)!=null?h:1,{text:d,type:u,value:f}=nue(c),m=(x=i==null?void 0:i.message_disclaimer)!=null?x:u0;if(!d||o)return{textareaDisclaimer:m.textarea,modelSwitcherDisclaimer:m["model-switcher"],modelSwitcherLimitShort:""};if(!i||!c||!l)return{textareaDisclaimer:u0.textarea,modelSwitcherDisclaimer:u0["model-switcher"],modelSwitcherLimitShort:""};let p=s.formatMessage(f0.shortLimitMinutes,{numerator:l,denominator:f});switch(u){case"hour":p=s.formatMessage(f0.shortLimitHours,{numerator:l,denominator:f});break;case"day":p=s.formatMessage(f0.shortLimitDays,{numerator:l,denominator:f});break}return{textareaDisclaimer:m.textarea.replaceAll("%FORMATTED_TIME%",n).replaceAll("%NUMERATOR%","".concat(l)).replaceAll("%DENOMINATOR%",d),modelSwitcherDisclaimer:m["model-switcher"].replaceAll("%FORMATTED_TIME%",n).replaceAll("%NUMERATOR%","".concat(l)).replaceAll("%DENOMINATOR%",d),modelSwitcherLimitShort:p}},[i,n,s,o])}const f0=be({shortLimitMinutes:{id:"modelCapMessaging.shortLimitMinutes",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# minute} one {# minute} other {# minutes}}"},shortLimitHours:{id:"modelCapMessaging.shortLimitHours",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# hour} one {# hour} other {# hours}}"},shortLimitDays:{id:"modelCapMessaging.shortLimitDays",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# day} one {# day} other {# days}}"}});var Wa=(t=>(t.ALPHA="alpha",t.DATA_CAMPAIGNS="data_campaigns",t.EXPERIMENTS="experiments",t.MAINLINE="mainline",t))(Wa||{});const oue=t=>jd(t,({id:e})=>e.split(":").slice(0,1).join(":"));function Hb(){const t=V(),e=Nh(),n=ae(()=>a8(t,{isGizmo:!!e})),s=mK(),{modelSwitcherDisclaimer:o}=sue();return _.useMemo(()=>{const a=[],{categories:i,groups:l,models:c}=n;for(const d of i){const{defaultModel:u,categoryId:f,label:m}=d,p=c.get(u);if(p){const g=s===u;a.push({categoryId:f,value:u,name:m,description:g?o:p.description,options:[m0(p,{name:"Default"})]})}}for(const d of l){const{group:u,label:f,modelIds:m}=d,p=m[0],g=[];for(const h of m){const x=c.get(h);x&&!x.tags.includes(BH.HIDDEN)&&g.push(x)}if(u==="experiments"){const h=oue(g),x=Object.entries(h).map(([v,y])=>{const b=v.split(":").slice(-1)[0];return{key:v,value:b,name:b,options:y.map(C=>{const{title:S}=C;return m0(U(w({},C),{title:S.replace(b,"")}))})}});a.push({categoryId:u,value:p,name:f,options:x})}else a.push({categoryId:u,value:p,name:f,options:g.map(h=>m0(h))})}return a},[n,s,o])}function m0(t,e={}){return w({value:t.id,name:t.title},e)}const aue=R(()=>P(()=>import("./g7vuvm8u2dy012vs.js"),__vite__mapDeps([191,1])),{loading:t=>O(t)}),sS=R(()=>P(()=>import("./jm6z4m8r7320x7jr.js"),__vite__mapDeps([192,1])),{loading:t=>O(t)}),oS=R(()=>P(()=>import("./l2dc1a6f6pz6h0zz.js"),__vite__mapDeps([193,1])),{loading:t=>O(t)}),rue=R(()=>P(()=>import("./j5dxenc7f5mkx09f.js"),__vite__mapDeps([194,1])),{loading:t=>O(t)}),iue=R(()=>P(()=>import("./ehr8e46vjnw0vtn3.js"),__vite__mapDeps([195,1])),{loading:t=>O(t)}),DP="top_level_secondary_models";function yf(t,e){let n=t;if(t===t6.AUTO){const a=e.categories.filter(({defaultModel:i})=>i!==t6.AUTO);(a==null?void 0:a.length)===1&&(n=a[0].defaultModel)}const s=e.categories.find(({defaultModel:a,supportedModels:i})=>a===n||n&&(i==null?void 0:i.includes(n)));if(s){const{categoryId:a}=s;return{selectedCategory:a,modelLabel:s.shortLabel,fullModelLabel:s.label}}const o=e.groups.find(({modelIds:a})=>n&&a.includes(n));if(o){const{group:a,shortLabel:i,label:l}=o;return{selectedCategory:a,modelLabel:i,fullModelLabel:l}}return{selectedCategory:null,modelLabel:null,fullModelLabel:null}}function lue(t,e,n,s){const o=e?t.formatMessage(Dx.beta):n?t.formatMessage(Dx.alpha):s;if(o)return r.jsx(nd,{children:o})}function cue({category:t,modelSwitcherDenialsBySlug:e,conversation:n,currentGizmoId:s,currentModelId:o,testId:a,preferredModelId:i,disabledByAdmin:l=!1,disableSelectionHighlight:c=!1}){const d=ne(),{defaultModel:u,label:f,description:m,isBeta:p,isAlpha:g,modelBadge:h,subcategory:x}=t,v=js(s!=null?s:""),y=V(),b=j3(y,u),C=x!==void 0&&x!==DP,S=r.jsxs(Hr,{value:u,conversation:n,currentModelId:o,modelSwitcherDenialsBySlug:e,secondary:C?void 0:m,deprecated:b,disabledByAdmin:l,isSelected:!c&&(!s||v)&&o===u,testId:a,preferredModelId:i,children:[f,lue(d,p,g,h)]},u);return l?r.jsx(_t,{label:d.formatMessage(Dx.disabledByAdmin),children:S}):S}function Gb({sections:t}){return r.jsx(r.Fragment,{children:t.map((e,n)=>{var s;return r.jsxs(Kn.Fragment,{children:[n!==0&&((s=t[n-1])==null?void 0:s.id)!=="model-picker-title"?r.jsx(Y.Separator,{}):null,e.content]},e.id)})})}function Wb(t,e,n,s,o){var Se,Te,Ne,De,de,oe,we,Ce;const a=ne(),i=V(),l=!tt(i),{data:c}=Al(),d=cn(),u=!l&&!!d&&r8(d)&&c&&!kh(c),{session:f}=vd(i),m=f==null?void 0:f.user,p=m&&Ah(m),g=ae(()=>bn(t)),h=g.id,x=ae(()=>Xc(t)),v=ys(),y=Oc(v),b=y?null:h;let C=ae(()=>ta(t));const S=i8(i),k=Qn(t.id),E=Vb({clientThreadId:t.id}),T=C.modelPickerVersion===2,{data:M}=ae(()=>x&&!Rl(i,x)?l8(i):{data:void 0}),A=!k,I=e.find(({categoryId:fe})=>fe===Wa.ALPHA),N=e.find(({categoryId:fe})=>fe===Wa.DATA_CAMPAIGNS),L=e.find(({categoryId:fe})=>fe===Wa.EXPERIMENTS),D=e.find(({categoryId:fe})=>fe===Wa.MAINLINE),[F,$]=_.useState(""),H=ae(()=>!0),z=[I,N,L,D].reduce((fe,re)=>re?[...fe,...re.options.map(ve=>U(w({},ve),{badge:re.categoryId}))]:fe,[]),K=_.useMemo(()=>F?z.filter(fe=>fe.name.toLowerCase().includes(F.toLowerCase())):z,[z,F]);if(s&&x&&M){const fe=JSON.parse(JSON.stringify(C));fe.categories=fe.categories.filter(({defaultModel:re})=>M.editor.models_list_with_custom_actions.includes(re)),C=fe}const J=!!(I!=null&&I.options.length),Z=!!(N!=null&&N.options.length),q=!!(L!=null&&L.options.length),se=!!(D!=null&&D.options.length),ie=ot(),ee=_.useCallback(fe=>{B.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),xn(ie,"Thread header dropdown",fe)},[ie]),le=()=>{Ye.logEvent("chatgpt_model_switcher_plus_upgrade_button_clicked"),B.logEvent("Model Switcher Plus Upgrade Button Clicked"),l?Zt(i,{shouldOpenPaymentModalOnAuth:!0,callback:fe=>{B.logSignUpButtonClicked({location:"Model switcher GPT-4 upsell",provider:fe},kt.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GPT4_UPSELL)},skipLoginModal:!1}):ee()},X=()=>{B.logEventWithStatsig("Model Switcher Go Upgrade Button Clicked","chatgpt_model_switcher_go_upgrade_button_clicked"),l?Zt(i,{shouldOpenPaymentModalOnAuth:!0,callback:fe=>{B.logSignUpButtonClicked({location:"Model switcher Go upsell",provider:fe},kt.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GO_UPSELL)},skipLoginModal:!1}):ee()},te=()=>{B.logEventWithStatsig("Model Switcher Team Upgrade Button Clicked","chatgpt_model_switcher_team_upgrade_button_clicked"),ee(Xf)},ce=[],ue=ye(i,"3315017149"),me=!!(C.secondaryTitle&&C.secondaryTitle!==""&&ue);C.title&&ue&&ce.push({id:"model-picker-title",content:[r.jsx(Y.Label,{className:"mb-0",children:C.title},"model-picker-title")]});const xe=r.jsxs(Y.Label,{className:"flex items-center",children:[r.jsx(j,{id:"coNCb7",defaultMessage:"Models"}),r.jsx(_t,{side:"right",className:"ms-1.5",delayDuration:120,label:r.jsx(j,{id:"/vFWz/",defaultMessage:"Learn more"}),children:r.jsx("a",{href:"https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",target:"_blank",rel:"noreferrer",children:r.jsx(oS,{className:"h-3.5 w-3.5 shrink-0"})})})]},"models-section-header");if(l){const fe={id:"modelSection",content:[]};fe.content.push(r.jsx(Xde,{location:"model-switcher",statsig_login_event:"chatgpt_modelswitcher_login_button_clicked",statsig_signup_event:"chatgpt_modelswitcher_signup_button_clicked"},"noAuthUpsell")),ce.push(fe)}else if(!S&&!x){const fe={id:"modelSection",content:[]};Eg(i)?fe.content.push(r.jsx(Hr,{value:"",conversation:t,currentModelId:h,onClick:X,modelSwitcherDenialsBySlug:E,isUpgradeUpsell:!0,icon:rue,secondary:r.jsx(j,{id:"vm2Wqf",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(j,{id:"/d/+gD",defaultMessage:"ChatGPT Go"})},"goUpgrade")):u?fe.content.push(r.jsx(Hr,{value:"",conversation:t,currentModelId:h,onClick:te,modelSwitcherDenialsBySlug:E,isUpgradeUpsell:!0,icon:iue,secondary:r.jsx(j,{id:"001Ixi",defaultMessage:"Advanced AI for your work"}),isSelected:!1,children:r.jsx(j,{id:"K94mcH",defaultMessage:"ChatGPT Business"})},"teamUpgrade")):fe.content.push(r.jsx(Hr,{value:"",conversation:t,currentModelId:h,onClick:le,modelSwitcherDenialsBySlug:E,isUpgradeUpsell:!0,icon:sS,secondary:r.jsx(j,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(j,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade")),fe.content.push(r.jsx(Hr,{value:Up.AUTO,conversation:t,currentModelId:h,modelSwitcherDenialsBySlug:E,icon:aue,secondary:u?r.jsx(j,{id:"R8fHfF",defaultMessage:"For quick tasks & answers"}):r.jsx(j,{id:"n96qML",defaultMessage:"Great for everyday tasks"}),isSelected:!y&&!x&&b===Up.AUTO,children:r.jsx(j,{id:"U9E7Rx",defaultMessage:"ChatGPT"})},Up.AUTO)),ce.push(fe)}else{const fe={id:"modelSection",content:[]};C.categories.length&&!T&&fe.content.push(xe),(Se=et(i))!=null&&Se.isGo()&&fe.content.push(r.jsx(Hr,{value:"",conversation:t,currentModelId:h,onClick:le,modelSwitcherDenialsBySlug:E,isUpgradeUpsell:!0,icon:sS,secondary:r.jsx(j,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(j,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade"));const re=new Map,ve=[];C.categories.forEach(He=>{var ht;const Qe=r.jsx(cue,{category:He,conversation:t,currentGizmoId:x,currentModelId:h,modelSwitcherDenialsBySlug:E,preferredModelId:o,testId:"model-switcher-".concat(He.defaultModel),disabledByAdmin:He.disabledByAdmin,disableSelectionHighlight:y},He.categoryId);if(He.subcategory===DP){ve.push(Qe);return}He.subcategory?(re.has(He.subcategory)||re.set(He.subcategory,[]),(ht=re.get(He.subcategory))==null||ht.push(Qe)):fe.content.push(Qe)}),me&&ve.length&&fe.content.push(r.jsx(Y.Label,{className:"mb-0",children:C.secondaryTitle},"secondary-model-picker-title")),ve.length&&fe.content.push(...ve);const Me=(Te=C.categories.some(He=>He.defaultModel==="gpt-5"))!=null?Te:!1,$e=(Ne=C.categories.some(He=>He.defaultModel==="gpt-5-pro"))!=null?Ne:!1;if(Me&&!$e&&!((De=et(i))!=null&&De.isPro())&&ye(i,"3309244414")){const He=r.jsx(due,{}),Qe=(de=C.categories.find(ht=>ht.defaultModel==="gpt-5-thinking"))==null?void 0:de.subcategory;Qe?(oe=re.get(Qe))==null||oe.push(He):fe.content.push(He)}T?re.forEach((He,Qe)=>{var vt;Qe&&fe.content.push(r.jsx(Y.Separator,{},"".concat(Qe,"-divider")));const ht=C.categories.find($t=>$t.subcategory===Qe&&$t.defaultModel===(g==null?void 0:g.id)),{fullModelLabel:at}=yf((vt=ht==null?void 0:ht.defaultModel)!=null?vt:"",C);fe.content.push(r.jsxs(Y.Sub,{children:[r.jsx(Y.SubMenuTrigger,{"data-testid":Qe+"-submenu",trailing:r.jsx("div",{className:"truncate",children:at}),children:Qe}),r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{children:He})})]},Qe))}):re.forEach((He,Qe)=>{const ht=C.categories.find(at=>at.subcategory===Qe&&at.defaultModel===(g==null?void 0:g.id));fe.content.push(r.jsxs(Y.Sub,{children:[r.jsx(Y.SubMenuTrigger,{"data-testid":Qe?"".concat(Qe,"-submenu"):void 0,trailing:ht&&r.jsx("div",{className:"truncate",children:ht.label}),children:Qe}),r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{children:He})})]},Qe))});const Le=(we=C.categories.some(He=>He.defaultModel==="gpt-5-1"))!=null?we:!1,Ae=(Ce=C.categories.some(He=>He.defaultModel==="gpt-4o"||He.defaultModel==="gpt-4.1"))!=null?Ce:!1;s&&x&&fe.content.push(r.jsx(Y.Label,{className:"flex flex-col items-start gap-1",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx(j,{id:"Y96ci5",defaultMessage:"Limited models for Custom Action GPTs"}),r.jsx(_t,{side:"right",className:"ms-1.5 cursor-pointer",delayDuration:0,label:Le?r.jsx(j,{id:"Npo7a5",defaultMessage:"GPTs with custom web actions can currently only use GPT-5.1, GPT-4o, and GPT-4.1."}):Me&&Ae?r.jsx(j,{id:"CicYT3",defaultMessage:"GPTs with custom web actions can currently only use GPT-5, GPT-4o, and GPT-4.1."}):Me?r.jsx(j,{id:"VfAyqX",defaultMessage:"GPTs with custom web actions can currently only use GPT-5."}):r.jsx(j,{id:"wDE3HX",defaultMessage:"GPTs with custom web actions can currently only use GPT-4o and GPT-4.1. If your GPT has no custom actions it can use any model."}),children:r.jsx(oS,{className:"h-4 w-4 shrink-0"})})]})})),ce.push(fe)}const pe={id:"otherOptionsSection",content:[]},{selectedCategory:Ee}=yf(b,C);return A&&(J||Z||q||se?pe.content.push(r.jsx("div",{className:"px-4 py-2",children:r.jsx(IP,{inputClassName:"w-full",onKeyDown:fe=>{fe.stopPropagation()},onChange:fe=>{$(fe.target.value)},value:F})})):p&&pe.content.push(r.jsxs(r.Fragment,{children:[r.jsx(Y.Shimmer,{size:"long"}),r.jsx(Y.Shimmer,{size:"long"}),r.jsx(Y.Shimmer,{size:"long"}),r.jsx(Y.Shimmer,{size:"long"})]})),F?pe.content.push(r.jsxs("div",{className:"scrollbar-gutter-stable max-h-64 w-[min(320px,95vw)] overflow-y-scroll",children:[K.length===0&&r.jsx(Y.Item,{className:"w-full",children:a.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),K.map(fe=>{const{value:re}=fe;return"options"in fe?r.jsx(vc,{conversation:t,currentModel:g,isSelected:!y&&(h==null?void 0:h.startsWith(re)),option:fe,modelSwitcherDenialsBySlug:E,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},re):r.jsxs(Hr,{conversation:t,currentModelId:h,isSelected:!y&&h===re,value:re,modelSwitcherDenialsBySlug:E,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o,children:[fe.name,fe.badge&&r.jsx(nd,{children:fe.badge})]},re)})]})):(J&&pe.content.push(r.jsx(vc,{isSelected:!y&&Ee===Wa.ALPHA,conversation:t,currentModel:g,option:I,modelSwitcherDenialsBySlug:E,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},I.value)),Z&&pe.content.push(r.jsx(vc,{isSelected:!y&&Ee===Wa.DATA_CAMPAIGNS,conversation:t,currentModel:g,option:N,modelSwitcherDenialsBySlug:E,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},N.value)),q&&pe.content.push(r.jsx(vc,{conversation:t,currentModel:g,isSelected:!y&&Ee===Wa.EXPERIMENTS,option:L,modelSwitcherDenialsBySlug:E,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},L.value)),se&&pe.content.push(r.jsx(vc,{isSelected:!y&&Ee===Wa.MAINLINE,conversation:t,currentModel:g,option:D,modelSwitcherDenialsBySlug:E,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},D.value)))),pe.content.length&&H&&ce.push(pe),n&&ce.push({id:eS,content:[r.jsx(Kde,{},eS)]}),ce}const due=()=>{const t=ot(),e=V(),n=ye(e,"3315017149");let s=r.jsx(j,{id:"4myKt+",defaultMessage:"GPT-5 Pro"});return n&&(s=r.jsx(j,{id:"fCVj6z",defaultMessage:"Pro"})),r.jsx(Y.Item,{disabled:!0,label:s,secondary:r.jsx(j,{id:"BsApen",defaultMessage:"Research-grade intelligence"}),trailing:r.jsx(_e,{color:"secondary",size:"small",onClick:()=>{B.logEventWithStatsig("Model Switcher Pro Upgrade Button Clicked","chatgpt_model_switcher_pro_upgrade_button_clicked"),B.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),xn(t,"Thread header dropdown")},children:r.jsx(j,{id:"aJndhk",defaultMessage:"Upgrade"})})})},Dx=be({alpha:{id:"o5FsPB",defaultMessage:"Alpha"},beta:{id:"XZwFET",defaultMessage:"Beta"},gpt35ShortExplainer:{defaultMessage:"Great for everyday tasks",id:"ModelSwitcher.gpt35ShortExplainer"},modelTunerSmartSelectionTitle:{id:"czjW8I",defaultMessage:"Dynamic"},modelTunerSmartSelectionExplainer:{id:"gp/YH1",defaultMessage:"Optimized for speed and intelligence"},gpt4ShortExplainer:{defaultMessage:"With DALLE, browsing and analysis",id:"ModelSwitcher.gpt4ShortExplainer"},gpt4ShortExplainerWithoutBrowse:{defaultMessage:"With DALLE and analysis",id:"ModelSwitcher.gpt4ShortExplainerWithoutBrowse"},gpt4UpsellExplainer:{id:"ModelSwitcher.gpt4Upsell",defaultMessage:"Our smartest and most capable model. Includes DALLE, browsing and more."},userUpgrade:{id:"ModelSwithcer.upgradeButton",defaultMessage:"Upgrade to Plus"},userUpgradeSignup:{id:"ModelSwitcher.signupUpgradeButton",defaultMessage:"Sign up for ChatGPT Plus"},temporaryChat:{id:"ModelSwitcher.temporaryChat",defaultMessage:"Temporary chat"},shareChat:{id:"ModelSwitcher.shareChat",defaultMessage:"Share chat"},disabledByAdmin:{id:"XoQ6cH",defaultMessage:"Disabled by Admin"}});function uue(t,e,n){const s=ae(()=>yf(bn(t).id,ta(t)).modelLabel),o=Hb(),a=Wb(t,o,void 0,e,n);return{modelLabel:s,dropdownSections:a}}function fue({show:t,conversation:e,gizmoHasCustomActions:n,preferredModelId:s}){const{modelLabel:o,dropdownSections:a}=uue(e,n,s);return t?r.jsxs(Y.Sub,{onOpenChange:i=>{i&&B.logEvent("GPTs: Breadcrumb Picker Model Picker Open")},children:[r.jsx(Y.SubMenuTrigger,{children:r.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[r.jsx(j,{id:"ilkdMh",defaultMessage:"Model"}),r.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:o})]})}),r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{onClick:()=>{B.logEvent("GPTs: Breadcrumb Picker Model Picker Select")},children:r.jsx(Gb,{sections:a})})})]}):null}function aS(t,e){const o=300/t,a=35/o;let i;if(e<=a)i=o*e;else{const l=t-a,d=-4*((e-a)/l);i=35+(99.9-35)*(1-Math.exp(d))}return Math.min(i,99.9)}const Fx=(t,e)=>{const n=+new Date-t,[s,o]=_.useState(aS(e,n));return _.useEffect(()=>{const a=setInterval(()=>{const i=+new Date-t,l=aS(e,i);if(o(l),l>=100||i>=e)return clearInterval(a),o(100),100},100);return()=>{clearInterval(a)}},[t,e]),s},mue={[fo.RESEARCH]:30,[fo.PRO_MODE]:15,[fo.THINKING]:2,[fo.IMAGE_GEN]:2,[fo.UNKNOWN]:15},FP=t=>{var o,a;const e=((a=(o=t.expectedDurationMinutes)!=null?o:mue[c8(t)])!=null?a:15)*60*1e3,n=t.createdAt?+new Date(t.createdAt):Date.now();return Fx(n,e)},pue="";function gue(t){var o,a;const e=c8(t),n={[fo.UNKNOWN]:{inProgress:{id:"task.inProgress",defaultMessage:"In progress"},completed:{id:"task.completed",defaultMessage:"Completed"},failed:{id:"task.failed",defaultMessage:"Failed"},cancelled:{id:"task.cancelled",defaultMessage:"Cancelled"},skipped:{id:"task.skipped",defaultMessage:"Skipped"}},[fo.RESEARCH]:{inProgress:{id:"task.research.inProgress",defaultMessage:"Research in progress"},completed:{id:"task.research.completed",defaultMessage:"Research completed"},failed:{id:"task.research.failed",defaultMessage:"Research failed"},cancelled:{id:"task.research.cancelled",defaultMessage:"Research cancelled"},skipped:{id:"task.research.skipped",defaultMessage:"Research skipped"}},[fo.PRO_MODE]:{inProgress:{id:"task.pro.inProgress",defaultMessage:"Pro thinking in progress"},completed:{id:"task.pro.completed",defaultMessage:"Pro thinking completed"},failed:{id:"task.pro.failed",defaultMessage:"Pro thinking failed"},cancelled:{id:"task.pro.cancelled",defaultMessage:"Pro thinking cancelled"},skipped:{id:"task.pro.skipped",defaultMessage:"Pro thinking skipped"}},[fo.THINKING]:{inProgress:{id:"task.thinking.inProgress",defaultMessage:"Thinking"},completed:{id:"task.thinking.completed",defaultMessage:"Thinking completed"},failed:{id:"task.thinking.failed",defaultMessage:"Thinking failed"},cancelled:{id:"task.thinking.cancelled",defaultMessage:"Thinking cancelled"},skipped:{id:"task.thinking.skipped",defaultMessage:"Thinking skipped"}},[fo.IMAGE_GEN]:{inProgress:{id:"task.image.inProgress",defaultMessage:"Image creating"},completed:{id:"task.image.completed",defaultMessage:"Image created"},failed:{id:"task.image.failed",defaultMessage:"Image failed"},cancelled:{id:"task.image.cancelled",defaultMessage:"Image creation cancelled"},skipped:{id:"task.image.skipped",defaultMessage:"Image creation skipped"}}},s=(()=>{switch(t.status){case An.CREATED:case An.RUNNING:case An.UNDETERMINED:case An.FINALIZING:return"inProgress";case An.COMPLETED:return"completed";case An.FAILED:return"failed";case An.CANCELLED:return"cancelled";case An.SKIPPING:return"skipped";default:return}})();if(s)return(a=(o=n[e])==null?void 0:o[s])!=null?a:n[fo.UNKNOWN][s]}const hue=({title:t,description:e,progress:n,link:s,onClick:o})=>{const a=ne(),i=r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("div",{children:t}),r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 text-xs",children:[e&&r.jsx("span",{children:e}),n!=null&&r.jsxs(r.Fragment,{children:[pue,r.jsx("span",{children:a.formatMessage({id:"task.progressOnly",defaultMessage:"{progress}%"},{progress:Math.round(n)})})]})]})]});return s!=null?r.jsx(Y.LinkItem,{to:s,children:i}):r.jsx(Y.Item,{onClick:o,children:i})},_ue=({task:t,conversationId:e,isActiveConversation:n})=>{const s=ne(),o=_.useMemo(()=>gue(t),[t]),a=FP(t),i=t.status===An.COMPLETED?t.responseMessageId:t.originalConversationUserMessageId,l=n?void 0:"/c/".concat(t.originalConversationId,"?messageId=").concat(i),c=n?()=>{Ze(e,d=>{d.scrollToMessageId=i,d.scrollToMessageIsAssistant=!0}),requestAnimationFrame(()=>{Ze(e,d=>{d.scrollToMessageId=void 0,d.scrollToMessageIsAssistant=void 0})})}:void 0;return r.jsx(hue,{title:t.title,description:o?s.formatMessage(o):void 0,progress:P3(t)?a:void 0,link:l,onClick:c},t.taskId)},xue=({conversationId:t,isActiveConversation:e})=>{const n=UH(t);return r.jsxs(r.Fragment,{children:[r.jsx(Y.Separator,{className:"first:hidden last:hidden"}),n.filter(s=>s.title!=null&&s.title!=="").map(s=>r.jsx(_ue,{task:s,conversationId:t,isActiveConversation:e},s.taskId))]})},yue=R(()=>P(()=>Promise.resolve().then(()=>mie),void 0),{loading:t=>O(t)}),vue=R(()=>P(()=>import("./e6tgogoygs27l1ey.js"),__vite__mapDeps([196,1])),{loading:t=>O(t)}),bue=R(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([149,1])),{loading:t=>O(t)}),BP=R(()=>P(()=>Promise.resolve().then(()=>im),void 0),{loading:t=>O(t)}),Cue=R(()=>P(()=>import("./kw03hsqv96j7mp48.js"),__vite__mapDeps([197,1])),{loading:t=>O(t)}),Sue=R(()=>P(()=>import("./e2qsug7cpoqmtswx.js"),__vite__mapDeps([198,1])),{loading:t=>O(t)});R(()=>P(()=>import("./dxjaf6qdyfvp7ro9.js"),__vite__mapDeps([199,1])),{loading:t=>O(t)});R(()=>P(()=>import("./lur401x4nz6oqotk.js"),__vite__mapDeps([142,1])),{loading:t=>O(t)});const wue=R(()=>P(()=>import("./khgwh2u5t1v9wux2.js"),__vite__mapDeps([200,1])),{loading:t=>O(t)}),kue=R(()=>P(()=>import("./cmy7kibwy58a01ix.js"),__vite__mapDeps([201,1])),{loading:t=>O(t)}),Eue=R(()=>P(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([52,1])),{loading:t=>O(t)}),Tue=R(()=>P(()=>import("./nz44s7ebe5b6pll5.js"),__vite__mapDeps([30,1])),{loading:t=>O(t)}),Mue=R(()=>P(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([147,1])),{loading:t=>O(t)}),rS=R(()=>P(()=>import("./ldblp2qq467fzutv.js"),__vite__mapDeps([166,1])),{loading:t=>O(t)}),UP=R(()=>P(()=>import("./odtbrxkncka8brls.js"),__vite__mapDeps([202,1])),{loading:t=>O(t)}),Aue=R(()=>P(()=>import("./mv59uia51hlqeiwb.js"),__vite__mapDeps([203,1])),{loading:t=>O(t)}),Iue=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),jue=R(()=>P(()=>import("./iyn42bfr1ydmech0.js"),__vite__mapDeps([25,1])),{loading:t=>O(t)}),Nue=R(()=>P(()=>Promise.resolve().then(()=>rm),void 0),{loading:t=>O(t)}),Pue=R(()=>P(()=>import("./l4758d1q8in7mi6j.js"),__vite__mapDeps([204,1])),{loading:t=>O(t)}),Rue=R(()=>P(()=>import("./decxj0nfuivtbs7k.js"),__vite__mapDeps([152,1])),{loading:t=>O(t)}),Lue=R(()=>P(()=>import("./ailj2wmeuzip7d2v.js"),__vite__mapDeps([122,1])),{loading:t=>O(t)}),Oue=R(()=>P(()=>Promise.resolve().then(()=>Tve),void 0),{loading:t=>O(t)}),Due=R(()=>P(()=>import("./d495ppjmiaba4smq.js"),__vite__mapDeps([205,1,10,11]))),Fue=R(()=>P(()=>import("./kq30c8hkqjutcfht.js"),__vite__mapDeps([206,1,10,11])).then(t=>t.GizmoKeepInSidebarMenuItem)),Bue=R(()=>P(()=>Promise.resolve().then(()=>F4),void 0).then(t=>t.DeleteConversationConfirmationModalContainer)),Uue=R(()=>P(()=>import("./ol3xw5qndra1cjvx.js").then(t=>t.c),__vite__mapDeps([207,1,10,11])).then(t=>t.GizmoDetailsModal)),$ue=R(()=>P(()=>import("./b1vl6tjy6g6n012n.js"),__vite__mapDeps([208,1,10,11])).then(t=>t.default)),Vue=R(()=>P(()=>import("./okl7sb11ljq0k719.js"),__vite__mapDeps([209,1,10,11])).then(t=>t.default)),Hue=R(()=>P(()=>Promise.resolve().then(()=>NPe),void 0).then(t=>t.default)),Gue=R(()=>P(()=>import("./crl8f3ggvylz4ls6.js"),__vite__mapDeps([210,1,10,11])).then(t=>t.ThreadReportConversationModal));function Wue(t){"use forget";const e=G.c(8),{children:n,conversation:s,gizmoResource:o,showReportModal:a,showGizmoModelPicker:i}=t;let l;e[0]!==s||e[1]!==o||e[2]!==i||e[3]!==a?(l=r.jsx($P,{conversation:s,gizmoResource:o,showReportModal:a,showGizmoModelPicker:i}),e[0]=s,e[1]=o,e[2]=i,e[3]=a,e[4]=l):l=e[4];let c;return e[5]!==n||e[6]!==l?(c=r.jsx(r.Fragment,{children:r.jsx(Er,{size:"small",triggerButton:n,children:l})}),e[5]=n,e[6]=l,e[7]=c):c=e[7],c}function $P({conversation:t,gizmoResource:e,showReportModal:n,showGizmoModelPicker:s}){var E,T;const{canEdit:o}=$H(e),{canCreate:a}=VH(),{canViewConfig:i}=HH(e),l=GH(e.gizmo.id),c=Xo(),d=WH(e),u=e.gizmo.share_recipient===Xi.Marketplace||e.gizmo.share_recipient===Xi.Link,f=!d&&u,m=V(),g=ye(m,"1825130190")&&!d&&d8(e),h=(c==null?void 0:c.includes(os.GizmoSupportEmails))&&!d&&e.gizmo.author.will_receive_support_emails&&g,x=yde(),v=ae(t.serverId$),b=Pb(os.WorkspaceShareLinks)&&v&&tt(m),C=ot(),S=Cn(),k=w1();return r.jsxs(r.Fragment,{children:[r.jsx(fue,{show:s,conversation:t,gizmoHasCustomActions:wM(e.tools),preferredModelId:(E=e.gizmo.default_model)!=null?E:void 0}),r.jsx(Y.LinkItem,{onClick:()=>{B.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:e.gizmo.id})},to:"/g/".concat(e.gizmo.short_url),state:k,icon:Nue,children:r.jsx(j,w({},qn.newChat))}),r.jsx(Y.Item,{onClick:()=>lt(m,Uue,{gizmoId:e.gizmo.id,creatorId:e.gizmo.author.user_id}),icon:Mue,children:r.jsx(j,w({},qn.about))}),((T=e.tools)==null?void 0:T.find(M=>M.type===ua.JIT_PLUGIN))&&r.jsx(Y.Item,{onClick:()=>lt(m,$ue,{gizmo:e}),icon:Tue,children:r.jsx(j,w({},qn.privacySettings))}),o&&r.jsx(Y.Item,{onClick:()=>{C(l)},icon:Cue,children:r.jsx(j,w({},qn.customize))}),!o&&i&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{onClick:()=>{C("/g/".concat(e.gizmo.id,"/view"))},icon:Aue,children:r.jsx(j,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),a&&r.jsx(Y.Item,{onClick:async()=>{const M=await R3.copyGizmo({gizmoId:e.gizmo.id});M.gizmo.id&&C("/gpts/editor/".concat(M.gizmo.id))},icon:jue,children:r.jsx(j,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),r.jsx(Fue,{gizmoResource:e,location:"conversation_page"}),r.jsx(Lde,{gizmoResource:e}),h&&r.jsx(Y.Item,{onClick:()=>lt(m,Vue,{gizmo:e}),icon:Lue,children:r.jsx(j,w({},qn.feedbackEmail))}),g&&r.jsx(Y.Item,{onClick:()=>lt(m,Hue,{gizmo:e}),icon:Pue,children:r.jsx(j,w({},qn.reviewGPT))}),f&&r.jsx(Y.Item,{onClick:n,icon:UP,children:r.jsx(j,w({},qn.reportGPT))}),b&&r.jsx(Y.Item,{onClick:()=>On.openSharingModal(v),icon:BP,children:r.jsx(j,w({},qn.shareChat))}),x&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Separator,{}),r.jsx(Y.Item,{color:"danger",onClick:()=>{lt(m,Due,{gpt:e,account:S,isOpen:!0})},icon:Iue,children:r.jsx(j,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),(c==null?void 0:c.includes("debug"))&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Separator,{}),r.jsx(Y.Item,{onClick:()=>{C(zH(e))},children:"(Internal) See share page"})]})]})}const zue=({conversation:t,isActiveConversation:e,inMainScreen:n=!1,inChatWindow:s=!1,inOrla:o=!1,shouldShowAdultSearchToggle:a=!1})=>{var oe,we,Ce;const i=V(),l=om(i),c=Cn(),d=t.id,u=t.gizmo_id,f=ae(()=>u?O3(i,u).gizmo$():null),m=Rl(i,u),p=ye(i,"3376455464"),g=ye(i,"16480203"),h=Es(),x=ye(i,"2560369700"),v=At(d),y=Pb(os.WorkspaceShareLinks),b=!tt(i),C=qH(i),S="owner"in t?(oe=t.owner)==null?void 0:oe.user_id:null,k=S==null||S===(c==null?void 0:c.normalizedAccountUserId),[E,T,M,A]=Ve(d,fe=>[fe==null?void 0:fe.isStarred,fe==null?void 0:fe.continuingFromSharedProjectConversationId,gle(fe==null?void 0:fe.mode,u!=null?u:void 0),Nb(fe)]),{shouldShowProjectsChatShareModal:I,openProjectsChatShareModal:N}=_de({clientThreadId:d}),L=y&&(v!=null?v:T)&&!b&&(!m||g)&&!0,D=l.hasAccess&&!b&&y&&v!=null&&!h&&k&&u==null&&T==null&&!A&&!s,[F,$]=_.useState(!!t.is_do_not_remember),H=E!=null?E:!!t.is_starred,z=ne(),K=f&&m?L3(f):!1;let J=null;const{snorlaxes:Z}=A3();J=Z;let q=null;m&&J&&(q=(we=J.find(({gizmo:fe})=>fe.gizmo.id===u))==null?void 0:we.gizmo);const se=kN(),{mutate:ie}=Sde(),ee=jt(),{eligible:le}=dt(Fe.ArchiveConversationOnboarding),X=Ut(),te=ot(),ce=ae(()=>Qo(i)),{isAdultSearchEnabled:ue,handleToggleSetting:me}=dN({conversationMode:M,accountId:c==null?void 0:c.id}),xe=async()=>{await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:t.id}},requestBody:{is_archived:!0}}),eo(ee,t.gizmo_id),Ye.logEvent("chatgpt_conversation_archived"),B.logEvent("Conversation Archived");const fe=gi(i)&&yn();le&&!fe&&(X.info(z.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),st(i,Fe.ArchiveConversationOnboarding)),e&&Mr(te)},pe=()=>{const fe=!H;ie({conversation:t,isStarred:fe}),B.logEvent(fe?"Conversation Pinned":"Conversation Unpinned")},Ee=Yh(),Se=[L&&(!s||ce)&&r.jsx(Y.Item,{onClick:()=>I?N():On.openSharingModal(v,"History Item Menu"),icon:BP,"data-testid":"share-chat-menu-item",children:r.jsx(j,w({},qn.shareChat))},"share"),D?r.jsx(Y.Item,{onClick:()=>{if(!v||Mg==null)return;lt(i,Mg,{type:"from-conversation",serverThreadId:v,source:"sidebar"})},icon:yue,children:r.jsx(j,{id:"2lQyjA",defaultMessage:"Start a group chat"})},"start-group-chat"):null,!s&&!o&&k&&r.jsx(Y.Item,{disabled:!v,onClick:()=>{setTimeout(()=>{v&&MP.publish({kind:n?"editTitleInMainScreen":"editTitle",serverThreadId:v})},100)},icon:Eue,children:r.jsx(j,w({},qn.renameChat))},"rename"),C&&!h&&k&&J&&(J==null?void 0:J.length)>0&&rx(u,H)&&v&&!0&&r.jsxs(Kn.Fragment,{children:[m&&r.jsxs(r.Fragment,{children:[J.length>1&&r.jsxs(Y.Sub,{children:[r.jsx(Y.SubMenuTrigger,{icon:rS,children:r.jsx(j,w({},Kt.moveConversationToProject))}),r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{children:r.jsx(Ox,{inSidebarFlyout:!1,onUpdateConversationGizmo:fe=>se({newGizmoId:fe,conversation:t,previousGizmoId:u!=null?u:null}),currentGizmoId:u})})})]}),r.jsx(Y.Item,{onClick:()=>{se({newGizmoId:null,conversation:t,previousGizmoId:u!=null?u:null})},icon:wue,children:r.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:r.jsx(j,U(w({},Kt.removeConversationFromProject),{values:{projectName:(Ce=q==null?void 0:q.gizmo.display.name)!=null?Ce:"project"}}))})})]}),!m&&!0&&r.jsxs(Y.Sub,{children:[r.jsx(Y.SubMenuTrigger,{icon:rS,children:z.formatMessage(Kt.moveConversationToProject)}),r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{children:r.jsx(Ox,{inSidebarFlyout:!1,onUpdateConversationGizmo:fe=>se({newGizmoId:fe,conversation:t,previousGizmoId:u!=null?u:null})})})})]})]},"snorlax")].filter(Boolean),{automationId:Te,sourceMessageId:Ne}=_.useContext(mm),De=ye(i,"3018147683"),de={topItems:Se.length>0,odysseyItem:!!Te||!Te&&!!Ne,pinItem:!u&&!h&&x,reportItem:p&&(s||K),archiveItem:k&&!h,dnrItem:!1,deleteItem:k,toggleAdultSearchItem:a};return Object.values(de).some(Boolean)?r.jsxs(r.Fragment,{children:[de.topItems&&r.jsxs(r.Fragment,{children:[Se,r.jsx(Y.Separator,{className:"first:hidden last:hidden"})]}),a&&r.jsx(Y.Item,{onClick:fe=>me(fe,!ue),icon:Sue,children:ue?r.jsx(j,w({},qn.hideMatureContent)):r.jsx(j,w({},qn.showMatureContent))},"adult-search-toggle"),de.odysseyItem&&r.jsx(Bb,{children:({openScheduleModal:fe,isScheduled:re,isSchedulable:ve})=>(ve||re)&&r.jsx(Y.Item,{onClick:fe,disabled:!v,icon:Rue,children:r.jsx(j,w({},re?qn.editSchedule:qn.scheduleTask))})}),de.pinItem&&r.jsx(Y.Item,{disabled:!v,onClick:pe,icon:H?vue:kue,iconAriaLabel:z.formatMessage(H?qn.unpinChat:qn.pinChat),children:r.jsx(j,w({},H?qn.unpinChat:qn.pinChat))}),de.archiveItem&&r.jsx(Y.Item,{disabled:!v,onClick:()=>{v&&xe()},icon:Oue,children:r.jsx(j,w({},qn.archiveChat))}),!1,de.reportItem&&r.jsx(Y.Item,{icon:UP,onClick:()=>lt(i,Gue,U(w({clientThreadId:d,isSharedConversation:Ee},K&&{projectId:u,conversationOwnerId:S}),{isStaticSharedThread:!1})),children:u?r.jsx(j,{id:"thread.reportConversation",defaultMessage:"Report conversation"}):r.jsx(j,{id:"thread.report",defaultMessage:"Report"})}),de.deleteItem&&r.jsx(Y.Item,{color:"danger",disabled:!v,onClick:()=>{v&&lt(i,Bue,{conversationTitle:t.title,serverThreadId:v,isActiveConversation:e,gizmoId:u})},icon:bue,"data-testid":"delete-chat-menu-item",children:r.jsx(j,w({},qn.deleteChat))}),De&&r.jsx(xue,{conversationId:t.id,isActiveConversation:e})]}):null};function que({clientThreadId:t,gizmoId:e,conversationTitle:n,conversationAsyncStatus:s,isDoNotRemember:o,isStarred:a,owner:i=null}){return{id:t,title:n!=null?n:"",create_time:null,update_time:null,owner:i,conversation_template_id:null,async_status:s!=null?s:null,gizmo_id:e!=null?e:null,snippet:null,is_do_not_remember:o,is_starred:a}}const Yue=d=>{var u=d,{conversation:t,children:e,isActiveConversation:n,onOpenChange:s,inMainScreen:o=!1,inChatWindow:a=!1,inOrla:i=!1,shouldShowAdultSearchToggle:l=!1}=u,c=ke(u,["conversation","children","isActiveConversation","onOpenChange","inMainScreen","inChatWindow","inOrla","shouldShowAdultSearchToggle"]);const[f,m]=_.useState(!1),p=zue({conversation:t,inMainScreen:o,isActiveConversation:n,inChatWindow:a,inOrla:i,shouldShowAdultSearchToggle:l});return r.jsx(Er,U(w({},c),{open:f,onOpenChange:g=>{m(g),s==null||s(g)},side:"bottom",contentAlign:a?"end":"start",alignOffset:a?0:-8,sideOffset:a?0:-4,triggerButton:p?e:void 0,size:"auto",children:f&&r.jsx(r.Fragment,{children:p})}))},qn=be({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},reportGPT:{defaultMessage:"Report GPT",id:"GizmoInformation.reportGPT"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},scheduleTask:{id:"7e1pG9",defaultMessage:"Schedule"},editSchedule:{id:"qzM4nO",defaultMessage:"Edit schedule"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"},pinChat:{defaultMessage:"Pin chat",id:"GizmoInformation.pinChat"},unpinChat:{defaultMessage:"Unpin chat",id:"GizmoInformation.unpinChat"},showMatureContent:{defaultMessage:"Show mature content",id:"GizmoInformation.showMatureContent"},hideMatureContent:{defaultMessage:"Hide mature content",id:"GizmoInformation.hideMatureContent"}}),Zue=Object.freeze(Object.defineProperty({__proto__:null,GizmoConversationOptionsDropdown:Yue,GizmoInformationDropdown:Wue,GizmoInformationDropdownItems:$P,buildConversationResponse:que},Symbol.toStringTag,{value:"Module"}));function VP(t,e,{location:n}){if(B.logNewChatButtonClicked({location:n}),"button"in e&&(e.metaKey||e.ctrlKey)){B.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab");return}Ye.logEvent("chatgpt_web_thread_tap_new_thread"),tt(t)?EK():gt.getItem(Ue.HasSeenNewChatModal)!==!0&&(gt.setItem(Ue.HasSeenNewChatModal,!0),On.openModal(nf.NoAuthNewChat),e.preventDefault())}const Kue=R(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([151,1])),{loading:t=>O(t)});function HP(t){return r.jsx(sm,U(w({},t),{icon:Kue}))}function GP(){const t=V(),{data:e}=Al();return tt(t)&&!!e&&!kh(e)}const cu={enableProfileUpgradePill:!1,enableUpgradeMenuSparkleIcon:!1,enableTinybarUpgradeBtn:!1,enableThreadHeaderUpgradePill:!0};function Que(){const t=V();if(!GP())return cu;const n=ze(t,"772164167");return{enableProfileUpgradePill:n.get("enable_profile_upgrade_pill",cu.enableProfileUpgradePill),enableUpgradeMenuSparkleIcon:n.get("enable_upgrade_menu_sparkle_icon",cu.enableUpgradeMenuSparkleIcon),enableTinybarUpgradeBtn:n.get("enable_tinybar_upgrade_btn",cu.enableTinybarUpgradeBtn),enableThreadHeaderUpgradePill:n.get("enable_thread_header_upgrade_pill",cu.enableThreadHeaderUpgradePill)}}function AYe(t){"use forget";var g,h;const e=G.c(14),{currentAccount:n}=t,s=V(),o=n==null?void 0:n.normalizedAccountUserId,a=Ab(o!=null?o:"");if(!o)return null;const i=(h=(g=a==null?void 0:a.name)!=null?g:n==null?void 0:n.name)!=null?h:"",l=(a==null?void 0:a.username)!=null&&a.username.length>0?"@".concat(a.username):void 0;let c;e[0]!==a?(c=a!=null?{name:a.name,picture:a.avatarUrl}:void 0,e[0]=a,e[1]=c):c=e[1];const d=c;let u;e[2]!==d?(u=r.jsx(D3,{size:"small",user:d}),e[2]=d,e[3]=u):u=e[3];let f;e[4]!==o||e[5]!==s?(f=()=>{lt(s,lie,{accountUserId:o})},e[4]=o,e[5]=s,e[6]=f):f=e[6];let m;e[7]!==i?(m=i||r.jsx(j,{id:"TNVQQS",defaultMessage:"Edit profile"}),e[7]=i,e[8]=m):m=e[8];let p;return e[9]!==u||e[10]!==f||e[11]!==m||e[12]!==l?(p=r.jsx(Y.Item,{"data-testid":"calpico-edit-profile-menu-item",icon:u,secondary:l,onSelect:f,children:m}),e[9]=u,e[10]=f,e[11]=m,e[12]=l,e[13]=p):p=e[13],p}const Jue=R(()=>P(()=>import("./mxxk8a6tsnqbiapb.js"),__vite__mapDeps([211,1])),{loading:t=>O(t)});function IYe(){const t=V(),e=ye(t,"3375735072"),n=ot();return e?r.jsx(Y.Item,{onSelect:()=>{n("#settings/".concat(Rn.Orders),{replace:!1})},icon:Jue,children:r.jsx(j,{id:"rcTyEn",defaultMessage:"Orders"})}):null}const I1=Be(!1),jYe=()=>{"use forget";const t=G.c(14),e=V();let n;t[0]!==e?(n=jh(e),t[0]=e,t[1]=n):n=t[1];const{actions$:s,addAction:o}=n,a=ae(I1),i=ae(s);let l;t[2]!==i?(l=efe(i),t[2]=i,t[3]=l):l=t[3];const c=l;let d,u;if(t[4]!==o?(d=()=>o({key:"toggleKeyboardActions",action:ofe,actionMessageDescriptor:Ge({id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}),group:Fn.Settings,keyboardBinding:[qe.Mod,"/"]}),u=[o],t[4]=o,t[5]=d,t[6]=u):(d=t[5],u=t[6]),_.useEffect(d,u),c.length===0)return null;let f;t[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(Ns.Overlay,{}),t[7]=f):f=t[7];let m;t[8]!==c||t[9]!==a?(m=r.jsxs(jl,{children:[f,r.jsx(Sd,{asChild:!0,children:r.jsx(tfe,{groups:c,showAsModal:a,onClose:rfe})})]}),t[8]=c,t[9]=a,t[10]=m):m=t[10];let p;return t[11]!==a||t[12]!==m?(p=r.jsx(Il,{open:a,onOpenChange:afe,modal:a,children:m}),t[11]=a,t[12]=m,t[13]=p):p=t[13],p};function Xue(t){return t.toReversed?t.toReversed():t.slice().reverse()}function efe(t){const e=Object.entries(jd(YH(u8(t,n=>n.key),n=>Xue(n.keyboardBinding).join("")),n=>n.group));return e.sort(([n],[s])=>Object.keys(Fn).indexOf(n)-Object.keys(Fn).indexOf(s)),e}const tfe=t=>{"use forget";const e=G.c(16),{groups:n,showAsModal:s,onClose:o}=t,a=!s&&"transition-opacity starting:opacity-0";let i;e[0]!==a?(i=W("shadow-long fixed start-3 bottom-3 min-w-(--sidebar-width) px-1.5 text-sm",a),e[0]=a,e[1]=i):i=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("h2",{className:"text-sm",children:r.jsx(j,{id:"hotkeyModal.title",defaultMessage:"Keyboard shortcuts"})}),e[2]=l):l=e[2];let c;e[3]!==o||e[4]!==s?(c=s&&r.jsx(wd,{asChild:!0,children:r.jsx(gn,{onClick:o})}),e[3]=o,e[4]=s,e[5]=c):c=e[5];let d;e[6]!==c?(d=r.jsxs("div",{className:"ms-2.5 mb-3 flex h-9 items-center justify-between font-semibold",children:[l,c]}),e[6]=c,e[7]=d):d=e[7];let u;e[8]!==n?(u=n.map(lfe),e[8]=n,e[9]=u):u=e[9];let f;e[10]!==u?(f=r.jsx("dl",{className:"grid [grid-template-columns:minmax(0,1fr)_max-content] gap-x-6 gap-y-3 px-2.5 pb-2",children:u}),e[10]=u,e[11]=f):f=e[11];let m;return e[12]!==i||e[13]!==d||e[14]!==f?(m=r.jsxs(f8,{className:i,children:[d,f]}),e[12]=i,e[13]=d,e[14]=f,e[15]=m):m=e[15],m};function nfe(t){switch(t){case Fn.Core:return null;case Fn.Chat:return r.jsx(j,{id:"keyboardActionGroup.label.Chat",defaultMessage:"Chat"});case Fn.Settings:return r.jsx(j,{id:"keyboardActionGroup.label.Settings",defaultMessage:"Settings"});case Fn.Internal:return"Internal"}}function sfe(t){return!t}function ofe(){I1.set(sfe)}function afe(t){t||I1.set(!1)}function rfe(){return I1.set(!1)}function ife(t){return r.jsxs(_.Fragment,{children:[r.jsx("dt",{children:typeof t.actionMessageDescriptor=="string"?t.actionMessageDescriptor:r.jsx(j,w({},t.actionMessageDescriptor))}),r.jsx("dd",{className:"text-token-text-secondary justify-self-end",children:r.jsx(f1,{binding:t.keyboardBinding})})]},t.key)}function lfe(t){const[e,n]=t;return r.jsxs(_.Fragment,{children:[r.jsx("dt",{className:"text-token-text-tertiary col-span-2 mt-2 empty:hidden",children:nfe(e)}),n.map(ife)]},e)}function NYe(t){var s;const{data:e,isLoading:n}=xse(t);return{count:(s=e==null?void 0:e.total)!=null?s:0,isLoading:n}}var iE;mt.ol(iE||(iE=ct(["ms-5 list-decimal"])));var lE;const cfe=mt.ul(lE||(lE=ct(["ms-3 list-disc"])));var cE;const dfe=mt.li(cE||(cE=ct(["marker:text-token-text-tertiary text-token-text-primary mb-2"])));var zb="Radio",[ufe,WP]=Ml(zb),[ffe,mfe]=ufe(zb),zP=_.forwardRef((t,e)=>{const x=t,{__scopeRadio:n,name:s,checked:o=!1,required:a,disabled:i,value:l="on",onCheck:c,form:d}=x,u=ke(x,["__scopeRadio","name","checked","required","disabled","value","onCheck","form"]),[f,m]=_.useState(null),p=Dn(e,v=>m(v)),g=_.useRef(!1),h=f?d||!!f.closest("form"):!0;return r.jsxs(ffe,{scope:n,checked:o,disabled:i,children:[r.jsx(fn.button,U(w({type:"button",role:"radio","aria-checked":o,"data-state":ZP(o),"data-disabled":i?"":void 0,disabled:i,value:l},u),{ref:p,onClick:Rt(t.onClick,v=>{o||c==null||c(),h&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})})),h&&r.jsx(pfe,{control:f,bubbles:!g.current,name:s,value:l,checked:o,required:a,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});zP.displayName=zb;var qP="RadioIndicator",YP=_.forwardRef((t,e)=>{const i=t,{__scopeRadio:n,forceMount:s}=i,o=ke(i,["__scopeRadio","forceMount"]),a=mfe(qP,n);return r.jsx(bh,{present:s||a.checked,children:r.jsx(fn.span,U(w({"data-state":ZP(a.checked),"data-disabled":a.disabled?"":void 0},o),{ref:e}))})});YP.displayName=qP;var pfe=t=>{const c=t,{control:e,checked:n,bubbles:s=!0}=c,o=ke(c,["control","checked","bubbles"]),a=_.useRef(null),i=F3(n),l=m8(e);return _.useEffect(()=>{const d=a.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==n&&m){const p=new Event("click",{bubbles:s});m.call(d,n),d.dispatchEvent(p)}},[i,n,s]),r.jsx("input",U(w({type:"radio","aria-hidden":!0,defaultChecked:n},o),{tabIndex:-1,ref:a,style:U(w(w({},t.style),l),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function ZP(t){return t?"checked":"unchecked"}var gfe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],qb="RadioGroup",[hfe]=Ml(qb,[Ch,WP]),KP=Ch(),QP=WP(),[_fe,xfe]=hfe(qb),JP=_.forwardRef((t,e)=>{const v=t,{__scopeRadioGroup:n,name:s,defaultValue:o,value:a,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:f}=v,m=ke(v,["__scopeRadioGroup","name","defaultValue","value","required","disabled","orientation","dir","loop","onValueChange"]),p=KP(n),g=Sh(d),[h,x]=_r({prop:a,defaultProp:o,onChange:f});return r.jsx(_fe,{scope:n,name:s,required:i,disabled:l,value:h,onValueChange:x,children:r.jsx(kT,U(w({asChild:!0},p),{orientation:c,dir:g,loop:u,children:r.jsx(fn.div,U(w({role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g},m),{ref:e}))}))})});JP.displayName=qb;var XP="RadioGroupItem",eR=_.forwardRef((t,e)=>{const p=t,{__scopeRadioGroup:n,disabled:s}=p,o=ke(p,["__scopeRadioGroup","disabled"]),a=xfe(XP,n),i=a.disabled||s,l=KP(n),c=QP(n),d=_.useRef(null),u=Dn(e,d),f=a.value===o.value,m=_.useRef(!1);return _.useEffect(()=>{const g=x=>{gfe.includes(x.key)&&(m.current=!0)},h=()=>m.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",h)}},[]),r.jsx(wT,U(w({asChild:!0},l),{focusable:!i,active:f,children:r.jsx(zP,U(w(w({disabled:i,required:a.required,checked:f},c),o),{name:a.name,ref:u,onCheck:()=>a.onValueChange(o.value),onKeyDown:Rt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:Rt(o.onFocus,()=>{var g;m.current&&((g=d.current)==null||g.click())})}))}))});eR.displayName=XP;var yfe="RadioGroupIndicator",tR=_.forwardRef((t,e)=>{const a=t,{__scopeRadioGroup:n}=a,s=ke(a,["__scopeRadioGroup"]),o=QP(n);return r.jsx(YP,U(w(w({},o),s),{ref:e}))});tR.displayName=yfe;var vfe=JP,Yb=eR,Zb=tR,p0,iS;function bfe(){if(iS)return p0;iS=1;function t(e,n,s){return e===e&&(s!==void 0&&(e=e<=s?e:s),n!==void 0&&(e=e>=n?e:n)),e}return p0=t,p0}var g0,lS;function Cfe(){if(lS)return g0;lS=1;var t=bfe(),e=ZH();function n(s,o,a){return a===void 0&&(a=o,o=void 0),a!==void 0&&(a=e(a),a=a===a?a:0),o!==void 0&&(o=e(o),o=o===o?o:0),t(e(s),o,a)}return g0=n,g0}var Sfe=Cfe();const Kb=Gn(Sfe);var Bx=(t=>(t.Month="month",t.Year="year",t.Once="once",t))(Bx||{}),wfe=(t=>(t.Inclusive="inclusive",t.Exclusive="exclusive",t))(wfe||{});function PYe(t,e,n,s,o){return{product:t,currency:e,recurringInterval:n,amount:Number(s),amountTaxBehavior:o}}const kfe="/checkout_pricing_config/countries",Efe="/checkout_pricing_config/configs/{country_code}",RYe="go",LYe="plus",OYe="pro",cS="business",nR=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","ID","IE","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE","CH","GB","IN","PK","TH","MY","VN","PH","NG","ZA","KZ","TZ","EG","BR"];function Tfe(t){return nR.includes(t)}const sR={AT:20,BE:21,BG:20,HR:25,CY:19,CZ:21,DK:25,EE:24,FI:25.5,FR:20,DE:19,GR:24,HU:27,IS:24,ID:11,IE:23,IT:22,LV:21,LI:8.1,LT:21,LU:17,MT:18,NL:21,NO:25,PL:23,PT:23,RO:21,SK:23,SI:22,ES:21,SE:25,CH:8.1,GB:20,IN:18,PK:0,TH:7,MY:8,VN:10,PH:12,NG:8,ZA:15,KZ:12,TZ:18,EG:14,BR:0};function Mfe({amount:t,roundToPrecision:e=2}){const n=Math.pow(10,e);return Math.round(t*n)/n}function Afe({amount:t,taxPercent:e,inclusive:n,roundToPrecision:s=2}){const o=e*t/((n?e:0)+100),a=Math.pow(10,s);return Math.round(o*a)/a}function DYe(t,e){return e==null?(Re.addError(new Error("nullish_country_for_vat_calculation"),{country:e}),0):Tfe(e)?Afe({amount:t,taxPercent:sR[e],inclusive:!0}):(Re.addError(new Error("unrecognized_country_for_vat_calculation"),{country:e}),0)}function FYe(t,e){let n=null,s=null;return t===e.countryCode?(n=e.currencyConfig.tax_percent,s=e.currencyConfig.tax_type):nR.includes(t)&&(n=sR[t],s=t===bse?"gst":"vat"),n==null||s==null?null:{taxCountry:t,taxRatePercent:n,taxName:s,reverseChargeEligible:!0}}const BYe={at_vat:{type:"at_vat",country:"AT",region:"EEA-GB-CH",country_label:"Austria",format:"ATU[0-9]{8}",placeholder:"ATU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},be_vat:{type:"be_vat",country:"BE",region:"EEA-GB-CH",country_label:"Belgium",format:"BE(0|1)[0-9]{9}",placeholder:"BE0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},bg_vat:{type:"bg_vat",country:"BG",region:"EEA-GB-CH",country_label:"Bulgaria",format:"BG[0-9]{9,10}",placeholder:"BG0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},br_cnpj:{type:"br_cnpj",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})[\\/\\\\]?([0-9]{4})\\-?([0-9]{2})",placeholder:"01.234.456/5432-10",stripe_type:"br_cnpj",verifiable:!1,replacement_string:"\\1.\\2.\\3/\\4-\\5",description:"Brazilian CNPJ number",reverse_charge:!1,supported:!0},br_cpf:{type:"br_cpf",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{3})\\.?([0-9]{3})\\.?([0-9]{3})\\-?([0-9]{2})",placeholder:"123.456.789-87",stripe_type:"br_cpf",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Brazilian CPF number",reverse_charge:!1,supported:!0},cy_vat:{type:"cy_vat",country:"CY",region:"EEA-GB-CH",country_label:"Cyprus",format:"CY[0-9]{8}[A-Z]",placeholder:"CY12345678Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},cz_vat:{type:"cz_vat",country:"CZ",region:"EEA-GB-CH",country_label:"Czech Republic",format:"CZ[0-9]{8,10}",placeholder:"CZ1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},de_vat:{type:"de_vat",country:"DE",region:"EEA-GB-CH",country_label:"Germany",format:"DE[0-9]{9}",placeholder:"DE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},dk_vat:{type:"dk_vat",country:"DK",region:"EEA-GB-CH",country_label:"Denmark",format:"DK[0-9]{8}",placeholder:"DK12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ee_vat:{type:"ee_vat",country:"EE",region:"EEA-GB-CH",country_label:"Estonia",format:"EE[0-9]{9}",placeholder:"EE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},es_vat:{type:"es_vat",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"ES([A-Z][0-9]{8}|[0-9]{8}[A-Z]|[A-Z][0-9]{7}[A-Z])",placeholder:"ESA1234567Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fi_vat:{type:"fi_vat",country:"FI",region:"EEA-GB-CH",country_label:"Finland",format:"FI[0-9]{8}",placeholder:"FI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fr_vat:{type:"fr_vat",country:"FR",region:"EEA-GB-CH",country_label:"France",format:"FR[A-Z0-9]{2}[0-9]{9}",placeholder:"FRAB123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},gr_vat:{type:"gr_vat",country:"GR",region:"EEA-GB-CH",country_label:"Greece",format:"EL[0-9]{9}",placeholder:"EL123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hr_vat:{type:"hr_vat",country:"HR",region:"EEA-GB-CH",country_label:"Croatia",format:"HR[0-9]{11}",placeholder:"HR12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hu_vat:{type:"hu_vat",country:"HU",region:"EEA-GB-CH",country_label:"Hungary",format:"(HU)?[0-9]{8}((-)?[0-9]{1}(-)?[0-9]{2})?",placeholder:"HU12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ie_vat:{type:"ie_vat",country:"IE",region:"EEA-GB-CH",country_label:"Ireland",format:"IE([0-9]{7}[A-Z]{1,2}|[0-9][A-Z][0-9]{5}[A-Z])",placeholder:"IE1234567AB",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},it_vat:{type:"it_vat",country:"IT",region:"EEA-GB-CH",country_label:"Italy",format:"IT[0-9]{11}",placeholder:"IT12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lt_vat:{type:"lt_vat",country:"LT",region:"EEA-GB-CH",country_label:"Lithuania",format:"LT([0-9]{9}|[0-9]{12})",placeholder:"LT123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lu_vat:{type:"lu_vat",country:"LU",region:"EEA-GB-CH",country_label:"Luxembourg",format:"LU[0-9]{8}",placeholder:"LU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lv_vat:{type:"lv_vat",country:"LV",region:"EEA-GB-CH",country_label:"Latvia",format:"LV[0-9]{11}",placeholder:"LV12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},mt_vat:{type:"mt_vat",country:"MT",region:"EEA-GB-CH",country_label:"Malta",format:"MT[0-9]{8}",placeholder:"MT12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},nl_vat:{type:"nl_vat",country:"NL",region:"EEA-GB-CH",country_label:"Netherlands",format:"NL[0-9]{9}B[0-9]{2}",placeholder:"NL123456789B12",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pl_vat:{type:"pl_vat",country:"PL",region:"EEA-GB-CH",country_label:"Poland",format:"PL[0-9]{10}",placeholder:"PL1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pt_vat:{type:"pt_vat",country:"PT",region:"EEA-GB-CH",country_label:"Portugal",format:"PT[0-9]{9}",placeholder:"PT123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ro_vat:{type:"ro_vat",country:"RO",region:"EEA-GB-CH",country_label:"Romania",format:"RO[0-9]{2,10}",placeholder:"RO1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},se_vat:{type:"se_vat",country:"SE",region:"EEA-GB-CH",country_label:"Sweden",format:"SE[0-9]{12}",placeholder:"SE123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},si_vat:{type:"si_vat",country:"SI",region:"EEA-GB-CH",country_label:"Slovenia",format:"SI[0-9]{8}",placeholder:"SI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},sk_vat:{type:"sk_vat",country:"SK",region:"EEA-GB-CH",country_label:"Slovakia",format:"SK[0-9]{10}",placeholder:"SK1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},xi_vat:{type:"xi_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"(XI)([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"XI123456789",stripe_type:"eu_vat",verifiable:!0,description:"Northern Ireland VAT number",reverse_charge:!0,supported:!0},gb_vat:{type:"gb_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"GB([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"GB123456789",stripe_type:"gb_vat",verifiable:!0,description:"United Kingdom VAT number",reverse_charge:!0,supported:!0},nz_gst:{type:"nz_gst",country:"NZ",region:"NZ",country_label:"New Zealand",format:"[0-9]{8,9}",placeholder:"123456789",stripe_type:"nz_gst",description:"New Zealand GST number",reverse_charge:!0,supported:!0,verifiable:!1},au_abn:{type:"au_abn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{11}",placeholder:"12345678912",stripe_type:"au_abn",verifiable:!0,description:"Australian Business Number (AU ABN)",reverse_charge:!0,supported:!0},au_arn:{type:"au_arn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{12}",placeholder:"123456789123",stripe_type:"au_arn",verifiable:!1,description:"Australian Taxation Office Reference Number",reverse_charge:!0,supported:!0},in_gst:{type:"in_gst",country:"IN",region:"IN",country_label:"India",format:"[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z][1-9A-Z]Z[0-9A-Z]",placeholder:"12ABCDE3456FGZH",stripe_type:"in_gst",description:"Indian GST number",reverse_charge:!0,supported:!0,verifiable:!1},no_vat:{type:"no_vat",country:"NO",region:"EEA-GB-CH",country_label:"Norway",format:"[0-9]{9}MVA",placeholder:"123456789MVA",stripe_type:"no_vat",verifiable:!1,description:"Norwegian VAT number",reverse_charge:!0,supported:!0},za_vat:{type:"za_vat",country:"ZA",region:"ZA",country_label:"South Africa",format:"4[0-9]{9}",placeholder:"4123456789",stripe_type:"za_vat",verifiable:!1,description:"South African VAT number",reverse_charge:!1,supported:!0},ch_vat:{type:"ch_vat",country:"CH",region:"EEA-GB-CH",country_label:"Switzerland",placeholder:"CHE-123.456.789 MWST",format:"([Cc][Hh][Ee])[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3}) ?([Mm][Ww][Ss][Tt]|[Tt][Vv][Aa]|[Ii][Vv][Aa])",stripe_type:"ch_vat",verifiable:!1,replacement_string:"\\1-\\2.\\3.\\4 \\5",description:"Switzerland VAT number",reverse_charge:!0,supported:!0},mx_rfc:{type:"mx_rfc",country:"MX",region:"MX",country_label:"Mexico",format:"([A-Za-z&]{3,4})-?([0-9]{2})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])-?([A-Za-z0-9])-?([A-Za-z0-9][0-9A])",placeholder:"ABC010203AB9",stripe_type:"mx_rfc",verifiable:!1,replacement_string:"\\1\\2\\3\\4\\5\\6",description:"Mexican RFC number",reverse_charge:!0,supported:!0},sg_uen:{type:"sg_uen",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z])",placeholder:"123456789F",stripe_type:"sg_uen",verifiable:!1,description:"Singaporean UEN",reverse_charge:!0,supported:!0},ru_inn:{type:"ru_inn",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{10}",placeholder:"1234567891",stripe_type:"ru_inn",verifiable:!1,description:"Russian INN",reverse_charge:!0,supported:!1},ru_kpp:{type:"ru_kpp",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ru_kpp",verifiable:!1,description:"Russian KPP",reverse_charge:!0,supported:!1},ca_bn:{type:"ca_bn",country:"CA",region:"CA",country_label:"Canada",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ca_bn",verifiable:!1,description:"Canadian BN",reverse_charge:!1,supported:!0},hk_br:{type:"hk_br",country:"HK",region:"HK",country_label:"Hong Kong",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"hk_br",description:"Hong Kong BR number",reverse_charge:!1,supported:!1,verifiable:!1},es_cif:{type:"es_cif",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"[0-9A-Z][0-9]{7}[0-9A-Z]",placeholder:"A12345678",stripe_type:"es_cif",description:"Spanish CIF number",reverse_charge:!0,supported:!0,verifiable:!1},tw_vat:{type:"tw_vat",country:"TW",region:"TW",country_label:"Taiwan",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"tw_vat",description:"Taiwanese VAT",reverse_charge:!0,supported:!0,verifiable:!1},th_vat:{type:"th_vat",country:"TH",region:"TH",country_label:"Thailand",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"th_vat",description:"Thai VAT",reverse_charge:!0,supported:!0,verifiable:!1},jp_cn:{type:"jp_cn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"jp_cn",description:"Japanese Corporate Number",reverse_charge:!0,supported:!0,verifiable:!1},jp_rn:{type:"jp_rn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{5}",placeholder:"12345",stripe_type:"jp_rn",description:"Japanese Registered Foreign Businesses Number",reverse_charge:!0,supported:!0,verifiable:!1},li_uid:{type:"li_uid",country:"LI",region:"EEA-GB-CH",country_label:"Liechtenstein",format:"CHE[0-9]{9}",placeholder:"CHE123456789",stripe_type:"li_uid",description:"Liechtensteinian UID number",reverse_charge:!0,supported:!0,verifiable:!1},my_itn:{type:"my_itn",country:"MY",region:"MY",country_label:"Malaysia",format:"([A-Z]{1,2}) ?([0-9]{10})",placeholder:"C 1234567890",stripe_type:"my_itn",description:"Malaysian ITN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1 \\2"},us_ein:{type:"us_ein",country:"US",region:"US",country_label:"United States",format:"([0-9]{2})-?([0-9]{7})",placeholder:"12-3456789",stripe_type:"us_ein",verifiable:!1,replacement_string:"\\1-\\2",description:"United States EIN",reverse_charge:!1,supported:!1},kr_brn:{type:"kr_brn",country:"KR",region:"KR",country_label:"South Korea",format:"([0-9]{3})-?([0-9]{2})-?([0-9]{5})",placeholder:"123-45-67890",stripe_type:"kr_brn",description:"Korean BRN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1-\\2-\\3"},ca_qst:{type:"ca_qst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{10}TQ[0-9]{4}|[0-9]{9}[A-Z]{2}[0-9]{4}|[0-9]{9,10}|NR[0-9]{8})",placeholder:"1234567890TQ1234",stripe_type:"ca_qst",verifiable:!1,description:"Canadian QST number (Qubec)",reverse_charge:!1,supported:!0},ca_gst_hst:{type:"ca_gst_hst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{9}) ?RT ?([0-9]{4})",placeholder:"123456789RT0002",stripe_type:"ca_gst_hst",verifiable:!1,replacement_string:"\\1RT\\2",description:"Canadian GST/HST number",reverse_charge:!1,supported:!0},ca_pst_bc:{type:"ca_pst_bc",country:"CA",region:"CA",country_label:"Canada",format:"PST-?([0-9]{4})-?([0-9]{4})",placeholder:"PST-1234-5678",stripe_type:"ca_pst_bc",verifiable:!1,replacement_string:"PST-\\1-\\2",description:"Canadian PST number (British Columbia)",reverse_charge:!1,supported:!0},ca_pst_mb:{type:"ca_pst_mb",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{6})-?([0-9])",placeholder:"123456-7",stripe_type:"ca_pst_mb",verifiable:!1,replacement_string:"\\1-\\2",description:"Canadian PST number (Manitoba)",reverse_charge:!1,supported:!0},ca_pst_sk:{type:"ca_pst_sk",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{7})",placeholder:"1234567",stripe_type:"ca_pst_sk",verifiable:!1,description:"Canadian PST number (Saskatchewan)",reverse_charge:!1,supported:!0},my_sst:{type:"my_sst",country:"MY",region:"MY",country_label:"Malaysia",format:"(([A-Z][0-9]{2})-?([0-9]{4})-?([0-9]{8})|[0-9]{8})",placeholder:"A12-3456-78912345",stripe_type:"my_sst",description:"Malaysian SST number",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\2-\\3-\\4",only_replace_if_group_captured:2},sg_gst:{type:"sg_gst",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z]|M[0-9A-Z][0-9]{7}[0-9A-Z]|F[0-9]{8}[A-Z])",placeholder:"M12345678X",stripe_type:"sg_gst",description:"Singaporean GST",reverse_charge:!0,supported:!0,verifiable:!1},ae_trn:{type:"ae_trn",country:"AE",region:"AE",country_label:"United Arab Emirates",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"ae_trn",verifiable:!1,description:"United Arab Emirates TRN",reverse_charge:!0,supported:!0},cl_tin:{type:"cl_tin",country:"CL",region:"CL",country_label:"Chile",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})-?([K0-9])",placeholder:"12.345.678-K",stripe_type:"cl_tin",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Chilean TIN",reverse_charge:!0,supported:!1},sa_vat:{type:"sa_vat",country:"SA",region:"SA",country_label:"Saudi Arabia",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"sa_vat",description:"Saudi Arabia VAT",reverse_charge:!0,supported:!0,verifiable:!1},id_npwp:{type:"id_npwp",country:"ID",region:"ID",country_label:"Indonesia",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})\\.?([0-9])-?([0-9]{3})\\.?([0-9]{3})",placeholder:"12.345.678.9-012.345",verifiable:!1,stripe_type:"id_npwp",description:"Indonesian NPWP number",reverse_charge:!0,supported:!0,replacement_string:"\\1.\\2.\\3.\\4-\\5.\\6"},my_frp:{type:"my_frp",country:"MY",region:"MY",country_label:"Malaysia",format:"[0-9]{8}",placeholder:"12345678",verifiable:!1,stripe_type:"my_frp",description:"Malaysian FRP number",reverse_charge:!0,supported:!0},il_vat:{type:"il_vat",country:"IL",region:"IL",country_label:"Israel",format:"[0-9]{9}",placeholder:"000012345",verifiable:!1,stripe_type:"il_vat",description:"Israel VAT",reverse_charge:!0,supported:!0},ge_vat:{type:"ge_vat",country:"GE",region:"GE",country_label:"Georgia",format:"([0-9]{9}|[0-9]{11})",placeholder:"123456789",verifiable:!1,stripe_type:"ge_vat",description:"Georgian VAT",reverse_charge:!0,supported:!0},ua_vat:{type:"ua_vat",country:"UA",region:"UA",country_label:"Ukraine",format:"([0-9]{8,10}|[0-9]{12})",placeholder:"123456789",verifiable:!1,stripe_type:"ua_vat",description:"Ukrainian VAT",reverse_charge:!0,supported:!1},is_vat:{type:"is_vat",country:"IS",region:"EEA-GB-CH",country_label:"Iceland",format:"[0-9]{6}",placeholder:"123456",verifiable:!1,stripe_type:"is_vat",description:"Icelandic VAT",reverse_charge:!0,supported:!0},tr_tin:{country:"TR",region:"TR",format:"[0-9]{10,11}",placeholder:"0123456789",verifiable:!1,type:"tr_tin",stripe_type:"tr_tin",description:"Turkish Tax Identification Number",country_label:"Trkiye",reverse_charge:!0,supported:!0}};function Ux(t){return t.trim().toUpperCase()}function Ife(t,e){return e||(e=xs()),ze(e,"3768341700").get(t,!1)}async function jfe(){return(await(await ge.safeGet(kfe,{skipJsonTransform:!0,authOption:nn.SendIfAvailable})).json()).countries.map(Ux)}async function cc(t){const e=Ux(t);if(!e){const o=new Error("Country code is required to fetch checkout pricing config");throw Re.addError(o,{countryCode:t}),o}const n=await ge.safeGet(Efe,{parameters:{path:{country_code:e}},skipJsonTransform:!0,authOption:nn.SendIfAvailable});if(!n.ok){let o;try{const i=await n.json();typeof(i==null?void 0:i.detail)=="string"&&(o=i.detail)}catch(i){}const a=n.status===404&&o==="Country config not found"?"Checkout pricing config not found for this country":"Failed to fetch checkout pricing config";throw Re.addError(new Error(a),{countryCode:e,status:n.status,detail:o}),new Error(a)}const s=await n.json();return{countryCode:Ux(s.country_code),currencyConfig:s.currency_config}}async function Nfe(t,e,n){const s=t!==void 0&&Ese(t)?"EU":Mx;let o=null;const a=await jfe();if(e?(t&&a.includes(t)&&(o=await cc(t),o.currencyConfig.symbol_code!==e&&(o=null)),o||(o=await cc(e))):t&&(a.includes(t)?o=await cc(t):o=await cc(s)),!o)return cc(s);const i=o.currencyConfig.pricing_rollout_gate;return!i||Ife(i,n)?o:cc(s)}function dS(t,e,n){const s=t.currencyConfig[e];if(!s){const a=new Error("Plan is not available for given country's pricing");throw Re.addError(a,{countryCode:t.countryCode,planType:e,interval:n}),a}const o=s[n];if(!o){const a=new Error("Price for interval is not available for given country's pricing");throw Re.addError(a,{countryCode:t.countryCode,planType:e,interval:n}),a}return{amount:o.amount,taxBehavior:o.tax}}function Pfe({countryCode:t,currency:e,ctx:n,enabled:s=!0}){return rt({queryKey:["checkout-pricing-config",t!=null?t:null,e!=null?e:null],queryFn:()=>Nfe(t,e,n),enabled:s})}function UYe(t){return t===We.SELF_SERVE_BUSINESS?"business":t}function $Ye(t,e,n){return{id:"pricingPlan.".concat(e,".costAmount"),defaultMessage:Rfe(t),description:"Cost for ".concat(e," plan in ").concat(n)}}function VYe(t,e){var n;return(n=t.currencyConfig.promos)==null?void 0:n[e]}function Rfe(t){const e=Mfe({amount:t,roundToPrecision:2});return e%1===0?e.toFixed(0):e.toFixed(2)}const Lfe=R(()=>P(()=>Promise.resolve().then(()=>wm),void 0),{loading:t=>O(t)}),Ofe=R(()=>P(()=>import("./kyyxlt80a527gl6x.js"),__vite__mapDeps([212,1])),{loading:t=>O(t)}),Dfe=R(()=>P(()=>import("./kspsmo2l8jg7uqdj.js"),__vite__mapDeps([26,1])),{loading:t=>O(t)});var dE;const Ffe=mt.div(dE||(dE=ct(["flex flex-col gap-3 text-token-text-secondary text-sm mt-3"])));var uE;const Bfe=mt.p(uE||(uE=ct(["text-token-text-primary"])));var fE;const Ufe=mt(Yb)(fE||(fE=ct(["relative flex cursor-pointer flex-col rounded-xl border-token-border-default p-5 text-start align-top transition-[border-color] duration-100 hover:border-token-border-heavy data-[state=unchecked]:m-[1px] data-[state=checked]:border-2 data-[state=unchecked]:border data-[state=checked]:border-black dark:data-[state=checked]:border-white md:min-h-[300px]"])));var mE;const $fe=mt(Zb)(mE||(mE=ct(["flex h-5 w-5 items-center justify-center rounded-full border-2 border-token-border-heavy bg-token-bg-primary outline-hidden data-[state=checked]:bg-black dark:data-[state=checked]:bg-white"])));var pE;const uS=mt.s(pE||(pE=ct(["text-token-text-tertiary"]))),h0=999,Vfe=2,Hfe=5,HYe="team-pricing-seat-selection",GYe="team-pricing-seat-selection-direct",WYe="numSeats",zYe="selectedPlan",qYe="promo_campaign",Gfe=t=>Vfe,YYe=t=>Hfe;function ZYe({billingType:t,name:e,billingFeatures:n,cost:s,currencySign:o,currencyCode:a,monthlyCost:i,discountedMonthlyCost:l,costStructure:c,selectedValue:d,hideDetails:u=!1,showWelcomeOfferLabel:f=!1,promoDisclaimer:m=null,hideSavingsMessage:p=!1}){const g=ne();V();const h=Gfe(),x=Math.floor(100-l/i*100);return r.jsxs(Ufe,{value:t,id:t,className:W(u&&"min-h-0!"),children:[f&&r.jsx("div",{className:"absolute start-3 top-0 -translate-y-1/2 rounded-xl bg-[#10A37F] px-2 py-1 text-xs font-medium text-white",children:r.jsx(j,w({},tn.welcomeOfferLabel))}),!p&&l<i&&r.jsx("div",{className:W("absolute start-3 top-0 -translate-y-1/2 px-2 py-1 text-xs font-medium",d===t?"bg-token-bg-primary text-[#10A37F]":"rounded-xl bg-[#10A37F] text-white"),children:r.jsx(j,U(w({},d===t?tn.discountSelectedLabel:tn.discountUnselectedLabel),{values:{discountedRate:x}}))}),r.jsxs("div",{className:"flex w-full items-center justify-between",children:[r.jsx("div",{className:W(u?"text-base":"text-xl","font-medium"),children:r.jsx(j,w({},e))}),r.jsx($fe,{forceMount:!0,children:r.jsx(Dfe,{className:W("mt-0.25 h-[14px] w-[14px] stroke-3 text-white dark:text-black",d!==t&&"hidden")})})]}),r.jsxs(Ffe,{children:[r.jsxs("div",{children:[r.jsx(Bfe,{children:r.jsx(j,U(w({},s),{values:{monthlyCost:i,discountedMonthlyCost:l,currencyCode:g.formatMessage(a),currencySign:g.formatMessage(o),s:(...v)=>r.jsx(uS,{children:v})}}))}),r.jsx("p",{children:r.jsx(j,w({},c))})]}),!u&&r.jsx(cfe,{children:n.map(v=>r.jsx(dfe,{className:"text-token-text-secondary",children:r.jsx(j,U(w({},v),{values:{minSeats:h,monthlyCost:i,minimumMonthlyCost:l*2,currencyCode:g.formatMessage(a),currencySign:g.formatMessage(o),s:(...y)=>r.jsx(uS,{children:y})}}))},v.id))}),m&&r.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:m})]})]})}var gE;const fS=mt.button(gE||(gE=ct(["h-12 w-12 rounded-lg flex items-center justify-center border border-token-border-default px-1.5 py-1.5 hover:bg-token-main-surface-secondary disabled:pointer-events-none disabled:text-token-text-tertiary"])));function KYe({numSeats:t,minSeats:e,setNumSeats:n,label:s,maxSeats:o,classNames:a}){const i=o!=null?o:h0,[l,c]=_.useState(!1),d=Cn(),u=_.useMemo(()=>d==null?void 0:d.subscriptionAnalyticsParams,[d]),f=_.useCallback(b=>{B.logEvent("Account Pay: Team Plan Seat Count Clicked",w(w({},u),b))},[u]),m=_.useRef(null);_.useEffect(()=>{var b;(b=m.current)==null||b.focus()},[m]);const p=_.useRef(null),g=_.useRef(0),h=_.useCallback(b=>{n(C=>{const S=Kb(C+b,e,i);return f({prevSeats:C,currentSeats:S}),S})},[i,e,n,f]),x=_.useCallback(b=>{const E=300-b*50;return E>25?E:25},[]),v=_.useCallback(b=>{h(b),g.current=0;const C=()=>{g.current+=1,h(b);const S=x(g.current);p.current=setTimeout(C,S)};p.current=setTimeout(C,x(g.current))},[h,x]),y=_.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]);return _.useEffect(()=>{l||i===h0&&t>i&&c(!0)},[l,i,t]),r.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[r.jsx("label",{className:W(a==null?void 0:a.label,"mb-1 flex text-base font-medium"),htmlFor:"seats",children:s!=null?s:r.jsx(j,w({},tn.usersTitle))}),r.jsxs("div",{className:"relative flex items-center gap-3",children:[r.jsx("input",{ref:m,type:"number",min:e,max:i,name:"seats",value:t,onChange:b=>{const C=parseInt(b.target.value);n(C),f({prevSeats:t,currentSeats:C})},onBlur:()=>{let b=t;t<e&&(b=e),t>i&&(b=i),t||(b=e),b!==t&&(f({prevSeats:t,currentSeats:b}),n(b))},autoFocus:!0,tabIndex:0,className:W(a==null?void 0:a.input,"bg-token-bg-primary text-token-text-primary relative m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white")}),r.jsxs("div",{className:W(a==null?void 0:a.buttons,"flex gap-1.5"),children:[r.jsx(fS,{disabled:t<=e,onMouseDown:()=>v(-1),onMouseUp:y,onMouseLeave:y,className:a==null?void 0:a.button,type:"button",children:r.jsx(Ofe,{className:W("icon-sm",t<=e&&"text-token-text-tertiary")})}),r.jsx(fS,{type:"button",disabled:t>=i,onMouseDown:()=>v(1),onMouseUp:y,onMouseLeave:y,className:a==null?void 0:a.button,children:r.jsx(Lfe,{className:"icon-sm"})})]})]}),i===h0&&l&&r.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:r.jsx(j,U(w({},tn.seatSelectorTooltipMaxLimit),{values:{maxSeats:i,link:b=>r.jsx(Eo,{to:Tse,target:"_blank",className:"underline",children:b})}}))})]})}const tn=be({flexiblePlanCost:{id:"teamBilling.flexiblePlan.cost",defaultMessage:"{currencyCode} {currencySign}{monthlyCost}"},summaryTitle:{id:"teamBilling.summaryTitle",defaultMessage:"Summary"},annualPlanCost:{id:"teamBilling.annualPlan.cost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost} <s>{currencySign}{monthlyCost}</s>"},nameWorkspace:{id:"nameWorkspace.title",defaultMessage:"Name your workspace"},cancel:{id:"createWorkspace.cancel",defaultMessage:"Cancel"},selectTeamPlan:{id:"createWorkspace.selectTeamPlan",defaultMessage:"Select Business Plan"},selectTeamPlanModalTitle:{id:"createWorkspace.selectTeamPlanModalTitle",defaultMessage:"Select your Business plan"},continueToBillingButton:{id:"createWorkspace.continueToBillingButton",defaultMessage:"Continue to billing"},paymentErrorWarning:{id:"createWorkspace.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},continueToPricePreview:{id:"teamBilling.continueToPricePreview",defaultMessage:"Continue"},changeEffectDate:{id:"teamBilling.changeEffectDate",defaultMessage:"This change will take effect at your next renewal on {date}"},confirmPageChangeEffectDate:{id:"teamBilling.confirmPageChangeEffectDate",defaultMessage:"Your billing schedule will change from {current_plan} to {new_plan} starting at your next renewal on {date}"},confirmChange:{id:"teamBilling.confirmChange",defaultMessage:"Confirm"},teamsCostStructure:{id:"teamBilling.teamsCostStructureNew",defaultMessage:"per user/month"},businessCostStructure:{id:"teamBilling.businessCostStructure",defaultMessage:"seat/mo"},businessAnnualPlanName:{id:"teamBilling.businessAnnualPlanName",defaultMessage:"Annual billing"},businessFlexiblePlanName:{id:"teamBilling.businessFlexiblePlanName",defaultMessage:"Monthly billing"},businessAnnualPlanCost:{id:"teamBilling.businessAnnualPlanCost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost}"},businessAnnualPlanSavingsAmount:{id:"teamBilling.businessAnnualPlanSavingsAmount.v2",defaultMessage:"Youre saving {savingsAmountMonthly}/month by choosing an annual plan. Thats {savingsAmountYearly}/year."},seatsTitle:{id:"teamBilling.seatsTitle",defaultMessage:"Seats"},usersTitle:{id:"teamBilling.usersTitle",defaultMessage:"Users"},chatGptTeam:{id:"teamBilling.chatGptTeam",defaultMessage:"ChatGPT Business"},annualPlanName:{id:"teamBilling.annualPlan.nameNew",defaultMessage:"Annual"},annualPlanSavingsLabel:{id:"teamBilling.annualPlan.savingsLabel",defaultMessage:"({percent}% off)"},annualBilledAnnually:{id:"teamBilling.annualPlan.billedAnnuallyNew",defaultMessage:"Billed annually"},annualAddUsersWithRenewal:{id:"teamBilling.annualPlan.addUsersWithRenewalNew",defaultMessage:"Add and reassign users as needed"},annualMinBill:{id:"teamBilling.annualPlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},flexiblePlanName:{id:"teamBilling.flexiblePlan.nameNew",defaultMessage:"Monthly"},flexibleBilledMonthly:{id:"teamBilling.flexiblePlan.billedMonthlyNew",defaultMessage:"Billed monthly"},flexibleAddRemoveUsers:{id:"teamBilling.flexiblePlan.addRemoveUsersNew",defaultMessage:"Add or remove users as needed"},flexibleMinBill:{id:"teamBilling.flexiblePlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},today:{id:"teamBilling.today",defaultMessage:"Today"},allPlansTotal:{id:"teamBilling.allPlansTotal",defaultMessage:"Plan Total"},allPlansTodayTotal:{id:"teamBilling.allPlansTodayTotal",defaultMessage:"Today's total"},flexiblePlanAmountBreakdown:{id:"teamBilling.flexiblePlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}}"},annualPlanAmountBreakdown:{id:"teamBilling.annualPlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}} x 12 months"},breakdownAmount:{id:"teamBilling.breakdownAmount",defaultMessage:"{currencySign}{amount}/seat"},allPlansPreDiscountTotal:{id:"teamBilling.allPlansPreDiscountTotal",defaultMessage:"{currencySign}{preDiscountTotalAmount}"},planDiscountLabel:{id:"teamBilling.planDiscountLabel",defaultMessage:"Discount"},annualPlanDiscountDescription:{id:"teamBilling.annualPlanDiscountDescription",defaultMessage:"Annual (-{discountPercentage}%)"},annualPlanDiscountAmount:{id:"teamBilling.annualPlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanDiscountAmount:{id:"teamBilling.flexiblePlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanBilledMonthly:{id:"teamBilling.flexiblePlanBilledMonthly",defaultMessage:"Billed monthly starting {billDate}"},annualPlanBilledAnnually:{id:"teamBilling.annualPlanBilledAnnually",defaultMessage:"Billed annually starting {billDate}"},allPlansTotalAmount:{id:"teamBilling.allPlansTotalAmount",defaultMessage:"{currencyCode} {currencySign}{totalAmount}"},discountSelectedLabel:{id:"teamBilling.discountSelectedLabel",defaultMessage:"You're saving {discountedRate}%"},discountUnselectedLabel:{id:"teamBilling.discountUnselectedLabel",defaultMessage:"Save {discountedRate}%"},welcomeOfferLabel:{id:"teamBilling.welcomeOfferLabel",defaultMessage:"Welcome Offer"},seatSelectorTooltipMaxLimit:{id:"teamBilling.seatSelectorTooltipMaxLimit",defaultMessage:"For more than {maxSeats} users, upgrade to our <link>Enterprise plan</link>."}});var Wfe=(t=>(t.FLEXIBLE="month",t.ANNUAL="year",t))(Wfe||{});function QYe(t,e,n){const s=dS(e,cS,Bx.Month),o=dS(e,cS,Bx.Year),a=B3(t),i={type:"month",name:n?tn.businessFlexiblePlanName:tn.flexiblePlanName,cost:tn.flexiblePlanCost,monthlyCost:s.amount,discountedMonthlyCost:s.amount,unitCost:s.amount,currencySign:a.sign,currencyCode:a.code,costStructure:n?tn.businessCostStructure:tn.teamsCostStructure,billingFeatures:[tn.flexibleBilledMonthly,tn.flexibleMinBill,tn.flexibleAddRemoveUsers]},l={type:"year",name:n?tn.businessAnnualPlanName:tn.annualPlanName,cost:n?tn.businessAnnualPlanCost:tn.annualPlanCost,monthlyCost:s.amount,discountedMonthlyCost:o.amount,unitCost:o.amount*12,currencySign:a.sign,currencyCode:a.code,costStructure:n?tn.businessCostStructure:tn.teamsCostStructure,billingFeatures:[tn.annualBilledAnnually,tn.annualMinBill,tn.annualAddUsersWithRenewal]};return{flexibleBillingPlan:i,annualBillingPlan:l}}const JYe={month:{name:tn.chatGptTeam,breakdown:tn.flexiblePlanAmountBreakdown,discountAmount:tn.flexiblePlanDiscountAmount,discountDescription:void 0,billed:tn.flexiblePlanBilledMonthly,total:tn.allPlansTotalAmount},year:{name:tn.chatGptTeam,breakdown:tn.annualPlanAmountBreakdown,discountAmount:tn.annualPlanDiscountAmount,discountDescription:tn.annualPlanDiscountDescription,billed:tn.annualPlanBilledAnnually,total:tn.allPlansTotalAmount}},XYe=(t,e)=>Math.floor(100-e/t*100),eZe=(t,e)=>Math.floor((1-e/t)*100);function zfe(){return{queryKey:["personalityTypeList"],queryFn:()=>ge.safeGet("/personality_types")}}function tZe(){return rt(zfe())}const oR={key:"default",label:"Default",description:"Balanced style and tone",footer_text:null,example_messages:null,deprecated:!1,icon_src:null,badge:"Popular"};function qfe(t,e){const n=t!=null?t:[];let s=n==null?void 0:n.find(o=>o.key===e);return(!s||!e)&&(s=n==null?void 0:n.find(o=>o.key==="default")),s||oR}const Yfe=[oR],nZe=t=>{"use forget";const e=G.c(40),{enabled:n,personalitiesList:s,onSelect:o,selectedPersonality:a}=t,[i,l]=_.useState(!1),c=s!=null?s:Yfe,d=ne();let u;e[0]!==s||e[1]!==a?(u=qfe(s,a),e[0]=s,e[1]=a,e[2]=u):u=e[2];const f=u.key;let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=A=>{l(A),A&&B.logEventWithStatsig("User Context: View Personalities","chatgpt_user_context_view_personalities")},e[3]=m):m=e[3];let p;e[4]!==c?(p=c.map(Zfe),e[4]=c,e[5]=p):p=e[5];let g;e[6]!==p?(g=r.jsx("div",{"aria-hidden":!0,className:"invisible grid w-fit px-5 [&>*]:col-start-1 [&>*]:row-start-1",children:p}),e[6]=p,e[7]=g):g=e[7];let h;e[8]!==d?(h=d.formatMessage({id:"user-context-modal.personality.select",defaultMessage:"Select personality"}),e[8]=d,e[9]=h):h=e[9];const x=!n;let v;if(e[10]!==c||e[11]!==f){let A;e[13]!==f?(A=I=>r.jsx("span",{"aria-hidden":I.key!==f,className:W("col-span-full row-span-full",I.key===f?"":"hidden"),children:I.label},I.key),e[13]=f,e[14]=A):A=e[14],v=c.map(A),e[10]=c,e[11]=f,e[12]=v}else v=e[12];let y;e[15]!==v?(y=r.jsx("div",{className:"grid [&>*]:col-start-1 [&>*]:row-start-1",children:v}),e[15]=v,e[16]=y):y=e[16];let b;e[17]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx("svg",{className:"text-muted ms-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),e[17]=b):b=e[17];let C;e[18]!==h||e[19]!==x||e[20]!==y?(C=r.jsxs(Y.Trigger,{className:"data-[state=open]:bg-token-bg-tertiary flex h-min w-fit items-center justify-between gap-0! justify-self-end rounded-lg border px-3 py-2 text-start",id:"personality-select-trigger","aria-label":h,disabled:x,children:[y,b]}),e[18]=h,e[19]=x,e[20]=y,e[21]=C):C=e[21];let S;e[22]!==C||e[23]!==g?(S=r.jsxs("div",{className:"grid w-fit [&>*]:col-start-1 [&>*]:row-start-1",children:[g,C]}),e[22]=C,e[23]=g,e[24]=S):S=e[24];let k;e[25]!==o?(k=A=>{_.startTransition(()=>{o(A),l(!1)})},e[25]=o,e[26]=k):k=e[26];let E;if(e[27]!==c||e[28]!==f){let A;e[30]!==f?(A=I=>r.jsx(Y.RadioItem,{color:f===I.key?"selected":"default",value:I.key,label:I.label,secondary:I.description},I.key),e[30]=f,e[31]=A):A=e[31],E=c.map(A),e[27]=c,e[28]=f,e[29]=E}else E=e[29];let T;e[32]!==f||e[33]!==k||e[34]!==E?(T=r.jsx(Y.Portal,{children:r.jsx(Y.Content,{size:"auto",alignOffset:-7,align:"end",children:r.jsx(Y.RadioGroup,{value:f,onValueChange:k,children:E})})}),e[32]=f,e[33]=k,e[34]=E,e[35]=T):T=e[35];let M;return e[36]!==i||e[37]!==S||e[38]!==T?(M=r.jsxs(Y.Root,{open:i,onOpenChange:m,children:[S,T]}),e[36]=i,e[37]=S,e[38]=T,e[39]=M):M=e[39],M};function sZe({label:t,description:e,selector:n}){return r.jsxs("div",{className:"flex items-start justify-between pt-2",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{children:t}),e!=null&&r.jsx(p8,{className:"pe-12!",children:e})]}),n]})}function Zfe(t){return r.jsx("span",{className:"invisible col-span-full row-span-full",children:t.label},t.key)}const Kfe=_.createContext("none"),Qb=()=>_.useContext(Kfe),Qfe=R(()=>P(()=>import("./odtbrxkncka8brls.js"),__vite__mapDeps([202,1])),{loading:t=>O(t)}),aR=R(()=>P(()=>import("./nlrge08q67ir6fyz.js"),__vite__mapDeps([213,1,10,11])).then(t=>t.default));function oZe(){"use forget";const t=G.c(8),e=V(),n=ze(e,"2888142241").get("is_feedback_tool_shown",!1),s=Ao();let o;t[0]!==s?(o=()=>s==null?void 0:s.serverId$(),t[0]=s,t[1]=o):o=t[1];const a=ae(o),i=et(e);if(!i)return null;const c=i.isEnterprise()||i.isEdu();if(!n||c)return null;let d;t[2]!==a||t[3]!==e?(d=()=>{B.logEventWithStatsig("Feedback: Report Bug Button Clicked","chatgpt_feedback_report_bug_click",{location:"help-menu"}),Ie.count(je.DEFAULT,"chatgpt_feedback_report_bug_click",{location:"help-menu"}),requestAnimationFrame(()=>{lt(e,aR,{entryPointElementId:"report-bug-menu-item",conversationId:a})})},t[2]=a,t[3]=e,t[4]=d):d=t[4];let u;t[5]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(j,{id:"feedback.reportBug",defaultMessage:"Report Bug"}),t[5]=u):u=t[5];let f;return t[6]!==d?(f=r.jsx(Y.Item,{id:"report-bug-menu-item",icon:Qfe,onPointerOver:Jfe,onClick:d,children:u}),t[6]=d,t[7]=f):f=t[7],f}function Jfe(){return aR.prefetch()}/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xfe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eme=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),mS=t=>{const e=eme(t);return e.charAt(0).toUpperCase()+e.slice(1)},rR=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),tme=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nme={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sme=_.forwardRef((d,c)=>{var u=d,{color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:a,iconNode:i}=u,l=ke(u,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return _.createElement("svg",w(w(U(w({ref:c},nme),{width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:rR("lucide",o)}),!a&&!tme(l)&&{"aria-hidden":"true"}),l),[...i.map(([f,m])=>_.createElement(f,m)),...Array.isArray(a)?a:[a]])});/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=(t,e)=>{const n=_.forwardRef((i,a)=>{var l=i,{className:s}=l,o=ke(l,["className"]);return _.createElement(sme,w({ref:a,iconNode:e,className:rR("lucide-".concat(Xfe(mS(t))),"lucide-".concat(t),s)},o))});return n.displayName=mS(t),n};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ome=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],aZe=Wl("atom",ome);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ame=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rZe=Wl("chevron-right",ame);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rme=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],iZe=Wl("code-xml",rme);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ime=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],lZe=Wl("route",ime);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lme=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]],cZe=Wl("sparkle",lme);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cme=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dZe=Wl("square-pen",cme);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dme=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uZe=Wl("x",dme),ume="https://help.openai.com/en/collections/3742473-chatgpt",fme="https://help.openai.com/en/articles/9982051",mme="https://help.openai.com/en/articles/6825453-chatgpt-release-notes",pme="https://help.openai.com/en/articles/10003026-windows-app-release-notes";function gme(){return Yo?fme:ume}function hme(){return Yo?pme:mme}const _me=R(()=>P(()=>import("./eu0n4tcsxfc43xh4.js"),__vite__mapDeps([214,1])),{loading:t=>O(t)}),xme=R(()=>P(()=>import("./effczx7c6wukdepv.js"),__vite__mapDeps([215,1])),{loading:t=>O(t)}),yme=R(()=>P(()=>import("./incwaugrwq9u6ukb.js"),__vite__mapDeps([216,1])),{loading:t=>O(t)});function fZe(){return r.jsxs(r.Fragment,{children:[r.jsx(Y.LinkItem,{icon:xme,external:!0,to:gme(),onClick:()=>{B.logEvent("Click FAQ")},children:r.jsx(j,{id:"thread.helpCenter",defaultMessage:"Help center"})}),r.jsx(Y.LinkItem,{icon:yme,external:!0,to:hme(),children:r.jsx(j,{id:"thread.releaseNotes",defaultMessage:"Release notes"})}),r.jsx(Y.LinkItem,{icon:_me,external:!0,to:"https://openai.com/policies",children:r.jsx(j,{id:"thread.termsAndPolicies",defaultMessage:"Terms & policies"})})]})}function iR({date:t}){const e=ne(),n=t instanceof Date?t:new Date(t*1e3),s=ba(n,new Date);if(s<4&&s>-4){const o=e.formatRelativeTime(s,"day",{numeric:"auto"});return o.charAt(0).toUpperCase()+o.slice(1)}else return e.formatDate(n,{year:"numeric",month:"long",day:"numeric"})}const vme="_wrapper_m72g5_1",bme="_disabled_m72g5_16",Cme="_label_m72g5_22",_0={wrapper:vme,disabled:bme,label:Cme};function Sme(d){var u=d,{className:t,icon:e,label:n,onClick:s,style:o,tabIndex:a=0,ref:i,disabled:l}=u,c=ke(u,["className","icon","label","onClick","style","tabIndex","ref","disabled"]);return r.jsx("label",{"aria-label":n,className:W(t,_0.wrapper,l&&_0.disabled),style:o,tabIndex:-1,children:r.jsx("button",U(w({className:W(_0.label,l&&"opacity-50"),onClick:s,tabIndex:a,ref:i,type:"button",disabled:l},c),{children:e}))})}const wme=R(()=>P(()=>import("./er12v6m875trrh25.js"),__vite__mapDeps([217,1])),{loading:t=>O(t)}),kme=R(()=>P(()=>import("./kw03hsqv96j7mp48.js"),__vite__mapDeps([197,1])),{loading:t=>O(t)}),Eme=R(()=>P(()=>import("./o8zk6g99n3l7p810.js"),__vite__mapDeps([218,1])),{loading:t=>O(t)}),Tme=R(()=>P(()=>import("./erzdc1sy8jj0gwh1.js"),__vite__mapDeps([219,1])),{loading:t=>O(t)}),pm=Dt(In(()=>({feedItems:[],hasUnreadNotifications:!1,isModalOpen:!1}))),Mme=pm.getState,x0=pm.setState,Ame={getHasUnreadNotifications:(t=Mme())=>t.hasUnreadNotifications},Vc={setIsModalOpen:t=>{x0({isModalOpen:t})},setHasUnreadNotifications:t=>{x0({hasUnreadNotifications:t})},bulkLoadFeedItems:t=>{x0(e=>{e.feedItems=t})}};function Ime(){const t=V(),e=Jb(t),n=pm(Ame.getHasUnreadNotifications);return e&&n}function jme(t,e,n,s){const o=V(),a=Ime(),i=ae(()=>KH(o).some(c=>{var d;return((d=Ci(c))==null?void 0:d.value)===Xt.UNREAD}));return n&&a||s&&i?t:e}function Jb(t){return ze(t,"3606233934",{disableExposureLog:!0}).get("enable_notifications_feed")}function mZe(){const t=V(),e=Jb(t),n=pm(s=>s.isModalOpen);return e&&n}function Nme(){const t=V(),e=Jb(t),n=rt({queryKey:["fetch-notifications-feed"],queryFn:async()=>{const s=await ge.safeGet("/notifications/feed");return Vc.bulkLoadFeedItems(s.items),Vc.setHasUnreadNotifications(s.has_unreads),s.items},enabled:e});return{isLoading:n.isLoading,isFetching:n.isFetching}}function pZe(){const t=ne(),e=jme(Tme,Eme,!0,!1),n=t.formatMessage({id:"1UHY6w",defaultMessage:"Notifications"});return Nme(),r.jsx(_t,{label:n,className:"group",children:r.jsx(sm,{icon:e,onClick:()=>Vc.setIsModalOpen(!0),"aria-label":n})})}function Pme({conversation:t,item:e,onClose:n}){const o={announcement:wme}[e.type];let a=null;try{const d=new Date(e.created_at);a=iR({date:d})}catch(d){}const i=nm(t.id),l=ot(),c=d=>{var u,f,m;if(((u=e.action)==null?void 0:u.type)==="show_conversation")n(),l(e.action.conversation_id);else if(((f=e.action)==null?void 0:f.type)==="new_conversation"){const p=e.action;p.prefilled_message&&(i({sourceEvent:d,promptMessage:ls(p.prefilled_message),requestedModelId:(m=p.model_slug)!=null?m:void 0}),n())}};return r.jsxs("button",{className:"border-token-border-default flex w-full items-center justify-start gap-3 overflow-hidden border-t py-4 first-of-type:border-none",onClick:c,disabled:!e.action,children:[r.jsx("div",{className:"relative",children:o&&r.jsx(o,{className:"icon"})}),r.jsxs("div",{className:"flex h-5 shrink grow basis-0 items-center justify-between",children:[r.jsx("div",{className:"text-token-text-primary text-sm leading-tight font-normal",children:e.message}),r.jsx("div",{className:"flex items-center justify-start gap-1",children:r.jsx("div",{className:"text-token-text-tertiary text-sm leading-tight font-normal",children:a!=null?a:""})})]})]})}function gZe({conversation:t}){const{feedItems:e,isModalOpen:n}=pm();_.useEffect(()=>{n&&(Vc.setHasUnreadNotifications(!1),ge.safePost("/notifications/feed/read",{authOption:nn.SendIfAvailable}))},[n]);const s=ne(),o=ot(),a=V(),i=ye(a,"3325813340"),l=new Date,c=jd(e,u=>{const f=new Date(u.created_at);if(o8(f))return"today";const m=ba(l,f);return m<=7?"last_7_days":m<=30?"last_30_days":"more_than_30_days"}),d=u=>{switch(u){case"today":return s.formatMessage({id:"zlkA39",defaultMessage:"Today"});case"last_7_days":return s.formatMessage({id:"FW89A4",defaultMessage:"Last 7 days"});case"last_30_days":return s.formatMessage({id:"2s3h/P",defaultMessage:"Last 30 days"});case"more_than_30_days":return s.formatMessage({id:"yArZiR",defaultMessage:"More than 30 days"})}};return r.jsx(Mt,{testId:"modal-notifications-feed",isOpen:n,onClose:()=>{Vc.setIsModalOpen(!1)},type:"success",size:"custom",className:"max-w-3xl",children:r.jsxs("div",{className:"flex flex-col gap-y-10",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold",children:s.formatMessage({id:"kWt8Cx",defaultMessage:"Notifications"})}),i&&r.jsx(Sme,{icon:r.jsx(kme,{className:"icon"}),onClick:()=>{o(Nl(Rn.Notifications))},label:s.formatMessage({id:"mZVh0S",defaultMessage:"Notifications settings"})})]}),Object.entries(c).map(([u,f])=>r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold",children:d(u)}),f.map(m=>r.jsx(Pme,{conversation:t,item:m,onClose:()=>Vc.setIsModalOpen(!1)},m.id))]},u))]})})}const Rme=R(()=>P(()=>Promise.resolve().then(()=>c4),void 0),{loading:t=>O(t)});function zd(t){var T;const e=V(),[n,s]=_.useState(!1),E=t,{announcementKey:o,onDismiss:a,children:i,childrenWrapperClassName:l}=E,c=ke(E,["announcementKey","onDismiss","children","childrenWrapperClassName"]),{show:d}=c,f=ze(e,"717266490").get("one_announcement_tooltip_per_session",!1),m=td(M=>!!M.displayAnnouncementTooltip),p=td(M=>!f||M.displayAnnouncementTooltip===o),g=ne(),h=QH(),x=JH();let v=!1;const y=Bd(!1);v=((T=y==null?void 0:y.store.useContentAreaId(aI.HeaderTop))!=null?T:null)!==null;const S=d&&!(h||v||x);if(_.useEffect(()=>{f&&S&&n&&On.showAnnouncementTooltipExclusively(o)},[n,f,o,S]),_.useEffect(()=>{S&&(!f||p)&&(Ye.logEvent("announcement_tooltip_shown",null,{announcement_key:o}),B.logEvent("Announcement Tooltip Shown",{announcement_key:o}),B.logUpsellOrModalEvent(un,{eventId:"".concat(o,"_tooltip_shown"),type:ln.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}))},[S,p,o,f]),m&&!p)return i;const k=()=>{(!f||p)&&(a(),Ye.logEvent("announcement_tooltip_dismissed",null,{announcement_key:o}),B.logEvent("Announcement Tooltip Dismissed",{announcement_key:o}))};return r.jsx(Lme,U(w({},c),{show:S,onDismiss:k,renderAsInvisible:f&&!m,onTooltipChildrenBecomeVisible:()=>{f&&s(!0)},children:r.jsx("div",{"aria-label":g.formatMessage({id:"announcementTooltip.ariaLabel",defaultMessage:"Announcements"}),className:W("w-fit",l),children:i})}))}function Lme({align:t,arrowPadding:e,alignOffset:n,show:s,onDismiss:o,children:a,title:i,side:l,sideOffset:c,theme:d="default",badge:u="new",contentAlign:f="start",description:m,className:p,collisionPadding:g,onTooltipChildrenBecomeVisible:h,renderAsInvisible:x=!1,dismissOnOutsideClick:v=!1,dismissOnTriggerClick:y=!0,contentClassName:b}){var T;const C=_.useRef(null),[S,k]=_.useState(!1);_.useEffect(()=>{if(!s)return;const M=C.current;if(!M)return;const A=new IntersectionObserver(I=>{k(I[I.length-1].intersectionRatio===1)},{threshold:1});return A.observe(M),()=>{A.unobserve(M)}},[s]);const E=M=>{s&&M&&M.getBoundingClientRect().width>0&&M.getBoundingClientRect().height>0&&(h==null||h()),C.current=M};return r.jsxs(Ul,{open:s&&S,onOpenChange:M=>{M||o()},children:[r.jsx(vr,{asChild:!0,onPointerDown:()=>{y&&o()},ref:E,children:a}),r.jsx($l,{container:(T=C.current)==null?void 0:T.ownerDocument.body,children:r.jsx(g8,{children:r.jsxs(Vl,{arrowPadding:e,alignOffset:n,align:t,collisionPadding:g,side:l,sideOffset:c,onOpenAutoFocus:M=>{M.preventDefault()},onCloseAutoFocus:M=>{M.preventDefault()},onInteractOutside:M=>{var I;M.target instanceof Element&&((I=C.current)==null?void 0:I.contains(M.target))||M.type==="dismissableLayer.focusOutside"?M.preventDefault():v?o():M.preventDefault()},updatePositionStrategy:"always",className:W("animate-slideLeftAndFade relative z-30 rounded-xl p-4 text-sm shadow-sm select-none",d==="default"?"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-700":"bg-blue-400 text-white",x&&"invisible",b),children:[r.jsxs("div",{className:W("flex max-w-xs flex-col gap-1",p),children:[r.jsxs("div",{className:"mb-0.5 flex gap-2",children:[u==="new"?r.jsx("span",{className:W("self-center rounded-sm px-1.5 py-0.5 text-[10px] leading-normal font-semibold uppercase",d==="default"?"bg-token-main-surface-primary text-token-main-surface-primary-inverse":"bg-white text-blue-400"),children:r.jsx(j,w({},pS.new))}):u==="beta"&&r.jsx("span",{className:"rounded-full bg-blue-100 px-1.5 text-[10px] font-semibold text-blue-600",children:r.jsx(j,w({},pS.beta))}),r.jsx("div",{className:W("grow font-semibold",f&&"text-".concat(f)),children:i}),r.jsx(mne,{className:"-m-1 p-1 leading-[0] opacity-70 transition hover:opacity-100","data-testid":"announcement-tooltip-close-btn",children:r.jsx(Rme,{className:"icon-sm"})})]}),m!==void 0&&r.jsx("div",{className:W(f&&"text-".concat(f)),children:m})]}),r.jsx(pne,{asChild:!0,children:r.jsx("div",{className:W("relative top-[-6px] h-3 w-3 rotate-45 transform rounded-ee-sm",d==="default"?"bg-gray-900 dark:bg-gray-50":"bg-blue-400")})})]})})})]})}const pS=be({new:{id:"announcementTooltip.new",defaultMessage:"New"},beta:{id:"announcementTooltip.beta",defaultMessage:"Beta"}}),gS=R(()=>P(()=>import("./gskm8euf92v8tid9.js"),__vite__mapDeps([220,1,10,11])).then(t=>t.CustomInstructionsModal)),$p=R(()=>P(()=>import("./ja2qkf4baiwhlt1m.js"),__vite__mapDeps([221,1,10,11,222,41])).then(t=>t.CreateOrEditProjectModal)),Ome=Object.freeze(Object.defineProperty({__proto__:null,CreateOrEditProjectModalAsync:$p},Symbol.toStringTag,{value:"Module"})),hS=R(()=>P(()=>import("./bb4ej48vf8erpjle.js"),__vite__mapDeps([223,1,10,11,224,188,225,226,227,117,228,106,91])).then(t=>t.ShareProjectModal)),Dme=R(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([149,1])),{loading:t=>O(t)}),Fme=R(()=>P(()=>Promise.resolve().then(()=>im),void 0),{loading:t=>O(t)}),Bme=R(()=>P(()=>import("./dnpenovn9ku8sbs2.js"),__vite__mapDeps([229,1])),{loading:t=>O(t)}),Ume=R(()=>P(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([52,1])),{loading:t=>O(t)}),$me=R(()=>P(()=>import("./odtbrxkncka8brls.js"),__vite__mapDeps([202,1])),{loading:t=>O(t)}),Vme=R(()=>P(()=>import("./iyoy7y29jyu5lcn2.js"),__vite__mapDeps([230,1])),{loading:t=>O(t)}),_S=R(()=>P(()=>import("./hfxtm5om7hr2tnqw.js"),__vite__mapDeps([231,1,10,11])).then(t=>t.ProjectReportModal)),xS=R(()=>P(()=>import("./62a1fj8wcavqvn87.js"),__vite__mapDeps([232,1,10,11])).then(t=>t.SnorlaxDeletionModal)),yS=R(()=>P(()=>import("./hxgirzyw7cjpprt3.js"),__vite__mapDeps([233,1,10,11])).then(t=>t.SnorlaxLeaveModal));function Hme(t){"use forget";var I;const e=G.c(26);let n,s;e[0]!==t?(I=t,{className:s}=I,n=ke(I,["className"]),e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const o=V(),a=ne(),i=et(o),{eligible:l}=dt(Fe.hasSeenSharedProjectsTooltip),c=zd,d=Fe,u="bottom",f="end",m="w-full",p=0,g="z-100",h="w-full",x="bright",v=!0,y="new";let b;e[3]!==a?(b=a.formatMessage({id:"YJ1BcI",defaultMessage:"Invite others to projects"}),e[3]=a,e[4]=b):b=e[4];const C=i!=null&&i.isWorkspaceAccount()?a.formatMessage({id:"7i6HBq",defaultMessage:"Build reports, plan client work, or do research  together."}):a.formatMessage({id:"CO0hjY",defaultMessage:"Plan adventures, campaigns, workouts, and more  together."});let S;e[5]!==o?(S=()=>st(o,Fe.hasSeenSharedProjectsTooltip),e[5]=o,e[6]=S):S=e[6];let k;e[7]!==s?(k=W("mx-2",s),e[7]=s,e[8]=k):k=e[8];let E;e[9]!==a?(E=a.formatMessage(Kt.projectShareButton),e[9]=a,e[10]=E):E=e[10];let T;e[11]!==a?(T=a.formatMessage(Kt.projectShareButton),e[11]=a,e[12]=T):T=e[12];let M;e[13]!==n||e[14]!==k||e[15]!==E||e[16]!==T?(M=r.jsx(_e,U(w({className:k,color:"ghost",icon:Fme,label:E},n),{children:T})),e[13]=n,e[14]=k,e[15]=E,e[16]=T,e[17]=M):M=e[17];let A;return e[18]!==c||e[19]!==l||e[20]!==d.hasSeenSharedProjectsTooltip||e[21]!==b||e[22]!==C||e[23]!==S||e[24]!==M?(A=r.jsx(c,{announcementKey:d.hasSeenSharedProjectsTooltip,show:l,side:u,align:f,className:m,sideOffset:p,contentClassName:g,childrenWrapperClassName:h,theme:x,dismissOnOutsideClick:v,badge:y,title:b,description:C,onDismiss:S,children:M}),e[18]=c,e[19]=l,e[20]=d.hasSeenSharedProjectsTooltip,e[21]=b,e[22]=C,e[23]=S,e[24]=M,e[25]=A):A=e[25],A}function lR(t){"use forget";var we,Ce,fe,re,ve;const e=G.c(106),{gizmoId:n,serverThreadId:s}=t,o=ne(),a=ot(),i=V();let l;e[0]!==i||e[1]!==n?(l=O3(i,n),e[0]=i,e[1]=n,e[2]=l):l=e[2];const c=l;let d;e[3]!==i?(d=()=>k3(i),e[3]=i,e[4]=d):d=e[4];const u=ae(d);let f;e[5]!==c?(f=()=>c.gizmo$(),e[5]=c,e[6]=f):f=e[6];const m=ae(f);let p;e[7]!==c?(p=()=>eG(c)(),e[7]=c,e[8]=p):p=e[8];const g=ae(p),h=!s;let x;e[9]!==c?(x=()=>tG(c)(),e[9]=c,e[10]=x):x=e[10];const v=ae(x);let y;e[11]!==c?(y=()=>nG(c)(),e[11]=c,e[12]=y):y=e[12];const b=ae(y);let C;e[13]!==c?(C=()=>sG(c)(),e[13]=c,e[14]=C):C=e[14];const S=ae(C);let k;e[15]!==c?(k=()=>oG(c)(),e[15]=c,e[16]=k):k=e[16];const E=ae(k),{canEdit:T}=U3(m!=null?m:void 0),{canDelete:M}=XH(m!=null?m:void 0),A=b&&h;let I;e[17]!==m?(I=m?L3(m):!1,e[17]=m,e[18]=I):I=e[18];const N=I;let L;e[19]!==i||e[20]!==m?(L=aG(),e[19]=i,e[20]=m,e[21]=L):L=e[21];const D=L,F=((Ce=(we=m==null?void 0:m.gizmo)==null?void 0:we.author)==null?void 0:Ce.user_id)===(u==null?void 0:u.normalizedAccountUserId),$=N&&h;let H;e[22]!==i||e[23]!==m?(H=()=>{m&&lt(i,_S,{projectId:m.gizmo.id,projectName:m.gizmo.display.name,onClose:()=>Ss(i,_S)})},e[22]=i,e[23]=m,e[24]=H):H=e[24];const z=H;let K;e[25]!==i||e[26]!==m||e[27]!==o?(K=()=>{m&&lt(i,$p,{submitButtonTitle:o.formatMessage(Kt.projectSettingsSubmitButton),gizmo:m,onClose:()=>Ss(i,$p),onSuccess:()=>{Ss(i,$p)}})},e[25]=i,e[26]=m,e[27]=o,e[28]=K):K=e[28];const J=K;let Z;e[29]!==i||e[30]!==n||e[31]!==a?(Z=()=>{lt(i,xS,{gizmoId:n,handleDelete:()=>{Ss(i,xS),a("/",{replace:!0})}})},e[29]=i,e[30]=n,e[31]=a,e[32]=Z):Z=e[32];const q=Z;let se;e[33]!==i||e[34]!==m?(se=()=>{m&&lt(i,gS,{gizmo:m,onClose:()=>Ss(i,gS)})},e[33]=i,e[34]=m,e[35]=se):se=e[35];const ie=Ca(se);let ee;e[36]!==i||e[37]!==m||e[38]!==n||e[39]!==a?(ee=()=>{m&&lt(i,yS,{gizmoId:n,projectName:m.gizmo.display.name,handleLeave:()=>{Ss(i,yS),a("/",{replace:!0})}})},e[36]=i,e[37]=m,e[38]=n,e[39]=a,e[40]=ee):ee=e[40];const le=ee;let X;e[41]!==i?(X=()=>{},e[41]=i,e[42]=X):X=e[42];const te=X,ce=((ve=(re=(fe=m==null?void 0:m.gizmo)==null?void 0:fe.instructions)==null?void 0:re.length)!=null?ve:0)>0,ue=T?ce?Kt.editInstructionsDropdownLabel:Kt.addInstructionsDropdownLabel:Kt.viewOnlyInstructionsDropdownLabel;let me;if(e[43]!==M||e[44]!==T||e[45]!==i||e[46]!==ue||e[47]!==m||e[48]!==ie||e[49]!==q||e[50]!==J||e[51]!==le||e[52]!==z||e[53]!==te||e[54]!==ce||e[55]!==D||e[56]!==F||e[57]!==$){me=[];const Me=ye(i,"1478278884"),$e=ye(i,"3769650838");if(F){let Le;e[62]!==i?(Le=ye(i,"4283270305")?r.jsx(j,{id:"ADb29o",defaultMessage:"Edit project"}):r.jsx(j,w({},Kt.editProjectNameDropdownButton)),e[62]=i,e[63]=Le):Le=e[63];let Ae;e[64]!==J||e[65]!==Le?(Ae=r.jsx(Y.Item,{onClick:J,icon:Ume,children:Le},"edit"),e[64]=J,e[65]=Le,e[66]=Ae):Ae=e[66],me.push(Ae)}if((T||ce)&&Me&&!$e){let Le;e[67]!==ue?(Le=r.jsx(j,w({},ue)),e[67]=ue,e[68]=Le):Le=e[68];let Ae;e[69]!==ie||e[70]!==Le?(Ae=r.jsx(Y.Item,{onClick:ie,icon:Bme,children:Le},"instructions"),e[69]=ie,e[70]=Le,e[71]=Ae):Ae=e[71],me.push(Ae)}if($){let Le;e[72]===Symbol.for("react.memo_cache_sentinel")?(Le=r.jsx(j,w({},Kt.reportProjectButtonLabel)),e[72]=Le):Le=e[72];let Ae;e[73]!==z?(Ae=r.jsx(Y.Item,{onClick:z,icon:$me,children:Le},"report"),e[73]=z,e[74]=Ae):Ae=e[74],me.push(Ae)}if(!F&&!D){let Le;e[75]===Symbol.for("react.memo_cache_sentinel")?(Le=r.jsx(j,w({},Kt.leaveProjectDropdownButton)),e[75]=Le):Le=e[75];let Ae;e[76]!==le?(Ae=r.jsx(Y.Item,{color:"danger",onClick:le,icon:Vme,children:Le},"leave"),e[76]=le,e[77]=Ae):Ae=e[77],me.push(Ae)}if(M&&!D&&!$e){let Le;e[78]===Symbol.for("react.memo_cache_sentinel")?(Le=r.jsx(j,w({},Kt.deleteProjectDropdownButton)),e[78]=Le):Le=e[78];let Ae;e[79]!==q?(Ae=r.jsx(Y.Item,{color:"danger",onClick:q,icon:Dme,children:Le},"delete"),e[79]=q,e[80]=Ae):Ae=e[80],me.push(Ae)}e[43]=M,e[44]=T,e[45]=i,e[46]=ue,e[47]=m,e[48]=ie,e[49]=q,e[50]=J,e[51]=le,e[52]=z,e[53]=te,e[54]=ce,e[55]=D,e[56]=F,e[57]=$,e[58]=me}else me=e[58];const xe=me;let pe;e[81]!==i||e[82]!==m?(pe=()=>{m&&lt(i,hS,{gizmo:rG(m),publishedGizmo:m,onClose:()=>Ss(i,hS)})},e[81]=i,e[82]=m,e[83]=pe):pe=e[83];const Ee=pe;let Se,Te;e[84]!==i||e[85]!==g||e[86]!==b||e[87]!==A||e[88]!==v?(Se=()=>{g&&(Ie.count(je.PROJECTS,"snorlax_header_actions_shown",{in_shared_projects_gate:ye(i,"773249106")?"true":"false",workspace_allows_sharing:v?"true":"false",is_shared_projects_enabled:b?"true":"false"}),A&&Ie.count(je.PROJECTS,"snorlax_header_actions_share_button_shown"))},Te=[g,A,v,b,i],e[84]=i,e[85]=g,e[86]=b,e[87]=A,e[88]=v,e[89]=Se,e[90]=Te):(Se=e[89],Te=e[90]),_.useEffect(Se,Te);let Ne;e[91]!==o?(Ne=o.formatMessage(Kt.showProjectDetailsDropdown),e[91]=o,e[92]=Ne):Ne=e[92];let De;e[93]!==o?(De=o.formatMessage(Kt.projectShareButton),e[93]=o,e[94]=De):De=e[94];const de=!m;let oe;return e[95]!==xe||e[96]!==Ee||e[97]!==D||e[98]!==E||e[99]!==h||e[100]!==S||e[101]!==A||e[102]!==Ne||e[103]!==De||e[104]!==de?(oe={dropdownAriaLabel:Ne,dropdownOptions:xe,handleClickShare:Ee,isFirstPartyProjectValue:D,monograms:E,onProjectHomePage:h,projectShareLabel:De,shareButtonDisabled:de,shouldShowMonograms:S,showShareProjectButton:A},e[95]=xe,e[96]=Ee,e[97]=D,e[98]=E,e[99]=h,e[100]=S,e[101]=A,e[102]=Ne,e[103]=De,e[104]=de,e[105]=oe):oe=e[105],oe}function Gme(t){"use forget";const e=G.c(6),{state:n}=t,{handleClickShare:s,monograms:o,projectShareLabel:a,shouldShowMonograms:i}=n;if(!i)return null;let l;e[0]!==o?(l=r.jsx(iG,{monograms:o}),e[0]=o,e[1]=l):l=e[1];let c;return e[2]!==s||e[3]!==a||e[4]!==l?(c=r.jsx(_e,{"aria-label":a,className:"bg-transparent! px-0! hover:opacity-90",color:"ghost",onClick:s,children:l}),e[2]=s,e[3]=a,e[4]=l,e[5]=c):c=e[5],c}function Wme(t){"use forget";const e=G.c(3),{state:n}=t,{handleClickShare:s,isFirstPartyProjectValue:o,shareButtonDisabled:a,showShareProjectButton:i}=n;if(!i||o)return null;let l;return e[0]!==s||e[1]!==a?(l=r.jsx(Hme,{disabled:a,onClick:s}),e[0]=s,e[1]=a,e[2]=l):l=e[2],l}function cR(t){"use forget";const e=G.c(5),{state:n}=t,{dropdownAriaLabel:s,dropdownOptions:o,onProjectHomePage:a}=n;if(!a||o.length===0)return null;let i;e[0]!==s?(i=r.jsx(HP,{"aria-label":s,className:"shrink-0"}),e[0]=s,e[1]=i):i=e[1];let l;return e[2]!==o||e[3]!==i?(l=r.jsx(Er,{side:"top",contentAlign:"end",sideOffset:0,triggerButton:i,size:"auto",children:o}),e[2]=o,e[3]=i,e[4]=l):l=e[4],l}function hZe(t){"use forget";const e=G.c(2),n=lR(t);let s;return e[0]!==n?(s=r.jsxs(r.Fragment,{children:[r.jsx(Gme,{state:n}),r.jsx(Wme,{state:n}),r.jsx(cR,{state:n})]}),e[0]=n,e[1]=s):s=e[1],s}function _Ze(t){"use forget";const e=G.c(2),n=lR(t);let s;return e[0]!==n?(s=r.jsx(cR,{state:n}),e[0]=n,e[1]=s):s=e[1],s}const ja=To(t=>{const e=Be(null),n=e.set;return e.set=s=>{const o=wn(e);n(s);const a=wn(e);o&&!Pg(a,o)&&Kme(t,o),a&&!Pg(a,o)&&Zme(t,a)},e}),zme=To(t=>St(()=>ja(t)!=null));function Xb(t,e){ja.set(t,e)}function j1(t){ja.set(t,null)}function dR(t,e,n){const s=wn(()=>ja(t));s&&Pg(e,s)?Ht(e,"searchSources")&&Ht(s,"searchSources")&&s.scrollToHeader!==e.scrollToHeader?ja.set(t,U(w({},e),{shouldAnimateScroll:!0})):j1(t):(n==null||n(),Xb(t,e))}function Pg(t,e){return t===e?!0:!t||!e?!1:Ht(t,"searchSources")&&Ht(e,"searchSources")?e.messageId===t.messageId:Ht(t,"caterpillar")&&Ht(e,"caterpillar")?e.caterpillarId===t.caterpillarId&&e.initialTab===t.initialTab:Ht(t,"summarizer")&&Ht(e,"summarizer")?e.turnIndex===t.turnIndex:Ht(t,"cot")&&Ht(e,"cot")?e.turnIndex===t.turnIndex&&e.reasoningGroupIndex===t.reasoningGroupIndex:Ht(t,"retrievalResults")&&Ht(e,"retrievalResults")?e.turnIndex===t.turnIndex&&e.messageId===t.messageId:Ht(t,"n7jupdSources")&&Ht(e,"n7jupdSources")||Ht(t,"n7jupdTabs")&&Ht(e,"n7jupdTabs")?e.messageId===t.messageId:Ht(t,"codingCitations")&&Ht(e,"codingCitations")?e.messageId===t.messageId&&e.matchedText===t.matchedText:Ht(t,"product")&&Ht(e,"product")?e.messageId===t.messageId&&e.turnIndex===t.turnIndex&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.productIndex===t.productIndex:Ht(t,"product_agent")&&Ht(e,"product_agent")?e.product.id===t.product.id:Ht(t,"entity")&&Ht(e,"entity")?e.messageId===t.messageId&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.query===t.query&&e.category===t.category:Ht(t,"strix")&&Ht(e,"strix")?e.entityId===t.entityId:!1}function Ar(t){"use forget";const e=G.c(2),s=Ao();let o;return e[0]!==s?(o={openThreadSidebar:a=>{s&&Xb(s,a)},closeThreadSidebar:()=>{s&&j1(s)},toggleThreadSidebar:(a,i)=>{s&&dR(s,a,i)}},e[0]=s,e[1]=o):o=e[1],o}function Ht(t,e){return(t==null?void 0:t.type)===e}function qme(){"use forget";const t=G.c(2),e=Ao();let n;return t[0]!==e?(n=()=>e!=null&&zme(e),t[0]=e,t[1]=n):n=t[1],ae(n)}function Yme(){"use forget";const t=G.c(2),e=Ao();let n;return t[0]!==e?(n=()=>e!=null?ja(e):null,t[0]=e,t[1]=n):n=t[1],ae(n)}function vS(t){"use forget";const e=G.c(3),n=Ao();let s;return e[0]!==n||e[1]!==t?(s=()=>{const o=n!=null?ja(n):null;if(o&&Ht(o,t))return o},e[0]=n,e[1]=t,e[2]=s):s=e[2],ae(s)}const Zme=(t,e)=>{if(Ht(e,"searchSources")){const{turnIndex:n,messageId:s}=e;B.logEventWithStatsig("Search Links Sidebar Shown","search_links_sidebar_shown",En({turnIndex:n,clientThreadId:t.id,messageId:s}))}else if(Ht(e,"product")){const{turnIndex:n,messageId:s,contentReferenceStartIndex:o,productId:a,productIndex:i,productUrl:l,interactionSource:c}=e;B.logEventWithStatsig("Product Sidebar Shown","product_sidebar_shown",U(w({},En({turnIndex:n,clientThreadId:t.id,messageId:s})),{content_reference_start_index:o,product_index:(i+1).toString(),product_url:l,product_id:a,interaction_source:c}))}else if(Ht(e,"retrievalResults")){const{turnIndex:n}=e;B.logEventWithStatsig("File Sources Sidebar Shown","file_sources_sidebar_shown",w({},En({turnIndex:n,clientThreadId:t.id})))}},Kme=(t,e)=>{if(Ht(e,"searchSources")){const{messageId:n,turnIndex:s}=e;B.logEventWithStatsig("Search Links Sidebar Closed","search_links_sidebar_closed",En({clientThreadId:t.id,messageId:n,turnIndex:s}))}else if(Ht(e,"product")){const{messageId:n,turnIndex:s,contentReferenceStartIndex:o,productIndex:a,productId:i}=e;B.logEventWithStatsig("Product Sidebar Closed","product_sidebar_closed",U(w({},En({turnIndex:s,clientThreadId:t.id,messageId:n})),{content_reference_start_index:o,product_index:(a+1).toString(),product_id:i}))}else if(Ht(e,"retrievalResults")){const{turnIndex:n}=e;B.logEvent("File Sources Sidebar Closed",En({clientThreadId:t.id,turnIndex:n}))}};class Rs extends wi()(()=>({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})){appendOrReplaceActive(e,n=Pg){const{history:s,historyIndex:o,historyScrollTops:a,historyFullWidthImageHeights:i}=this.getState();if(o>=0&&n(s[o],e)){const c=[...s];c[o]=e,this.setState({history:c});return}const l=o>=0?s.slice(0,o+1):[];this.setState({history:[...l,e],historyScrollTops:[...a.slice(0,Math.max(0,o+1)),0],historyFullWidthImageHeights:[...i.slice(0,Math.max(0,o+1)),null],historyIndex:l.length})}setActiveIndex(e){const{history:n}=this.getState();e<0||e>=n.length||this.setState({historyIndex:e})}setScrollTopForActive(e){const{historyIndex:n,historyScrollTops:s}=this.getState();if(n<0)return;const o=[...s];o[n]=e,this.setState({historyScrollTops:o})}setFullWidthImageHeightForIndex(e,n){const{history:s,historyFullWidthImageHeights:o}=this.getState();if(e<0||e>=s.length)return;const a=[...o];a[e]=n,this.setState({historyFullWidthImageHeights:a})}setFullWidthImageHeightForActive(e){const{historyIndex:n}=this.getState();this.setFullWidthImageHeightForIndex(n,e)}reset(){this.setState({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})}goBack(e){const{historyIndex:n,history:s}=this.getState();n<=0||(this.setActiveIndex(n-1),e(s[n-1]))}goToHistoryIndex(e,n){const{history:s}=this.getState();e<0||e>=s.length||(this.setActiveIndex(e),n(s[e]))}closeThreadSidebar(e){this.reset(),e()}}Q(Rs,"selectCanGoBack",e=>e.historyIndex>0),Q(Rs,"selectBackHistory",e=>e.history.slice(0,Math.max(0,e.historyIndex))),Q(Rs,"selectCurrentHistoryScrollTop",e=>{var n;return e.historyIndex>=0&&(n=e.historyScrollTops[e.historyIndex])!=null?n:0}),Q(Rs,"selectCurrentHistoryFullWidthImageHeight",e=>{var n;return e.historyIndex>=0&&(n=e.historyFullWidthImageHeights[e.historyIndex])!=null?n:null});function Qme(){const{openThreadSidebar:t,closeThreadSidebar:e}=Ar(),n=Yme(),s=Rs.useStore(),o=Rs.useState(Rs.selectCanGoBack),a=Rs.useState(Rs.selectBackHistory),i=Rs.useState(Rs.selectCurrentHistoryScrollTop),l=Rs.useState(Rs.selectCurrentHistoryFullWidthImageHeight),c=Rs.useState(x=>x.historyIndex);_.useEffect(()=>{n&&s.appendOrReplaceActive(n)},[n,s]);const d=_.useCallback(()=>s.goBack(t),[s,t]),u=_.useCallback(x=>s.goToHistoryIndex(x,t),[s,t]),f=_.useCallback(x=>s.setScrollTopForActive(x),[s]),m=_.useCallback(x=>s.setFullWidthImageHeightForActive(x),[s]),p=_.useCallback((x,v)=>s.setFullWidthImageHeightForIndex(x,v),[s]),g=_.useCallback(()=>{s.reset()},[s]),h=_.useCallback(()=>{s.reset(),e()},[s,e]);return{canGoBack:o,backHistory:a,goBack:d,goToHistoryIndex:u,setScrollTopForActive:f,currentHistoryScrollTop:i,setFullWidthImageHeightForActive:m,setFullWidthImageHeightForIndex:p,currentHistoryFullWidthImageHeight:l,activeHistoryIndex:c,resetSidebarHistory:g,closeThreadSidebarAndResetHistory:h}}var y0,bS;function uR(){if(bS)return y0;bS=1;var t=lG(),e=cG();function n(s,o,a){(a!==void 0&&!e(s[o],a)||a===void 0&&!(o in s))&&t(s,o,a)}return y0=n,y0}var v0,CS;function Jme(){if(CS)return v0;CS=1;var t=dG(),e=h3();function n(s){return e(s)&&t(s)}return v0=n,v0}var b0,SS;function Xme(){if(SS)return b0;SS=1;var t=jT(),e=uG(),n=h3(),s="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,l=a.hasOwnProperty,c=i.call(Object);function d(u){if(!n(u)||t(u)!=s)return!1;var f=e(u);if(f===null)return!0;var m=l.call(f,"constructor")&&f.constructor;return typeof m=="function"&&m instanceof m&&i.call(m)==c}return b0=d,b0}var C0,wS;function fR(){if(wS)return C0;wS=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return C0=t,C0}var S0,kS;function epe(){if(kS)return S0;kS=1;var t=fG(),e=h8();function n(s){return t(s,e(s))}return S0=n,S0}var w0,ES;function tpe(){if(ES)return w0;ES=1;var t=uR(),e=mG(),n=pG(),s=_8(),o=gG(),a=hG(),i=$3(),l=Jme(),c=_G(),d=xG(),u=x8(),f=Xme(),m=yG(),p=fR(),g=epe();function h(x,v,y,b,C,S,k){var E=p(x,y),T=p(v,y),M=k.get(T);if(M){t(x,y,M);return}var A=S?S(E,T,y+"",x,v,k):void 0,I=A===void 0;if(I){var N=i(T),L=!N&&c(T),D=!N&&!L&&m(T);A=T,N||L||D?i(E)?A=E:l(E)?A=s(E):L?(I=!1,A=e(T,!0)):D?(I=!1,A=n(T,!0)):A=[]:f(T)||a(T)?(A=E,a(E)?A=g(E):(!u(E)||d(E))&&(A=o(T))):I=!1}I&&(k.set(T,A),C(A,T,b,S,k),k.delete(T)),t(x,y,A)}return w0=h,w0}var k0,TS;function npe(){if(TS)return k0;TS=1;var t=vG(),e=uR(),n=bG(),s=tpe(),o=x8(),a=h8(),i=fR();function l(c,d,u,f,m){c!==d&&n(d,function(p,g){if(m||(m=new t),o(p))s(c,d,g,u,l,f,m);else{var h=f?f(i(c,g),p,g+"",c,d,m):void 0;h===void 0&&(h=p),e(c,g,h)}},a)}return k0=l,k0}var E0,MS;function spe(){if(MS)return E0;MS=1;var t=CG(),e=V3();function n(s){return t(function(o,a){var i=-1,l=a.length,c=l>1?a[l-1]:void 0,d=l>2?a[2]:void 0;for(c=s.length>3&&typeof c=="function"?(l--,c):void 0,d&&e(a[0],a[1],d)&&(c=l<3?void 0:c,l=1),o=Object(o);++i<l;){var u=a[i];u&&s(o,u,i,c)}return o})}return E0=n,E0}var T0,AS;function ope(){if(AS)return T0;AS=1;var t=npe(),e=spe(),n=e(function(s,o,a){t(s,o,a)});return T0=n,T0}var ape=ope();const qd=Gn(ape);function rpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t}function $x(t,e){return Array(e+1).join(t)}function ipe(t){return t.replace(/^\n*/,"")}function lpe(t){for(var e=t.length;e>0&&t[e-1]==="\n";)e--;return t.substring(0,e)}var cpe=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function e5(t){return t5(t,cpe)}var mR=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function pR(t){return t5(t,mR)}function dpe(t){return hR(t,mR)}var gR=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function upe(t){return t5(t,gR)}function fpe(t){return hR(t,gR)}function t5(t,e){return e.indexOf(t.nodeName)>=0}function hR(t,e){return t.getElementsByTagName&&e.some(function(n){return t.getElementsByTagName(n).length})}var Ms={};Ms.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}};Ms.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+"\n"}};Ms.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var s=Number(e.nodeName.charAt(1));if(n.headingStyle==="setext"&&s<3){var o=$x(s===1?"=":"-",t.length);return"\n\n"+t+"\n"+o+"\n\n"}else return"\n\n"+$x("#",s)+" "+t+"\n\n"}};Ms.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),"\n\n"+t+"\n\n"}};Ms.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return n.nodeName==="LI"&&n.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}};Ms.listItem={filter:"li",replacement:function(t,e,n){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var s=n.bulletListMarker+"   ",o=e.parentNode;if(o.nodeName==="OL"){var a=o.getAttribute("start"),i=Array.prototype.indexOf.call(o.children,e);s=(a?Number(a)+i:i+1)+".  "}return s+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}};Ms.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}};Ms.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){for(var s=e.firstChild.getAttribute("class")||"",o=(s.match(/language-(\S+)/)||[null,""])[1],a=e.firstChild.textContent,i=n.fence.charAt(0),l=3,c=new RegExp("^"+i+"{3,}","gm"),d;d=c.exec(a);)d[0].length>=l&&(l=d[0].length+1);var u=$x(i,l);return"\n\n"+u+o+"\n"+a.replace(/\n$/,"")+"\n"+u+"\n\n"}};Ms.horizontalRule={filter:"hr",replacement:function(t,e,n){return"\n\n"+n.hr+"\n\n"}};Ms.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var n=e.getAttribute("href"),s=Rg(e.getAttribute("title"));return s&&(s=' "'+s+'"'),"["+t+"]("+n+s+")"}};Ms.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,n){var s=e.getAttribute("href"),o=Rg(e.getAttribute("title"));o&&(o=' "'+o+'"');var a,i;switch(n.linkReferenceStyle){case"collapsed":a="["+t+"][]",i="["+t+"]: "+s+o;break;case"shortcut":a="["+t+"]",i="["+t+"]: "+s+o;break;default:var l=this.references.length+1;a="["+t+"]["+l+"]",i="["+l+"]: "+s+o}return this.references.push(i),a},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}};Ms.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}};Ms.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}};Ms.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!n},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",n="`",s=t.match(/`+/gm)||[];s.indexOf(n)!==-1;)n=n+"`";return n+e+t+e+n}};Ms.image={filter:"img",replacement:function(t,e){var n=Rg(e.getAttribute("alt")),s=e.getAttribute("src")||"",o=Rg(e.getAttribute("title")),a=o?' "'+o+'"':"";return s?"!["+n+"]("+s+a+")":""}};function Rg(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function _R(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}_R.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=M0(this.array,t,this.options))||(e=M0(this._keep,t,this.options))||(e=M0(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function M0(t,e,n){for(var s=0;s<t.length;s++){var o=t[s];if(mpe(o,e,n))return o}}function mpe(t,e,n){var s=t.filter;if(typeof s=="string"){if(s===e.nodeName.toLowerCase())return!0}else if(Array.isArray(s)){if(s.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof s=="function"){if(s.call(t,e,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function ppe(t){var e=t.element,n=t.isBlock,s=t.isVoid,o=t.isPre||function(f){return f.nodeName==="PRE"};if(!(!e.firstChild||o(e))){for(var a=null,i=!1,l=null,c=IS(l,e,o);c!==e;){if(c.nodeType===3||c.nodeType===4){var d=c.data.replace(/[ \r\n\t]+/g," ");if((!a||/ $/.test(a.data))&&!i&&d[0]===" "&&(d=d.substr(1)),!d){c=A0(c);continue}c.data=d,a=c}else if(c.nodeType===1)n(c)||c.nodeName==="BR"?(a&&(a.data=a.data.replace(/ $/,"")),a=null,i=!1):s(c)||o(c)?(a=null,i=!0):a&&(i=!1);else{c=A0(c);continue}var u=IS(l,c,o);l=c,c=u}a&&(a.data=a.data.replace(/ $/,""),a.data||A0(a))}}function A0(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function IS(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var xR=typeof window<"u"?window:{};function gpe(){var t=xR.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch(n){}return e}function hpe(){var t=function(){};return _pe()?t.prototype.parseFromString=function(e){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(e),n.close(),n}:t.prototype.parseFromString=function(e){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(e),n.close(),n},t}function _pe(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){window.ActiveXObject&&(t=!0)}return t}var xpe=gpe()?xR.DOMParser:hpe();function ype(t,e){var n;if(typeof t=="string"){var s=vpe().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");n=s.getElementById("turndown-root")}else n=t.cloneNode(!0);return ppe({element:n,isBlock:e5,isVoid:pR,isPre:e.preformattedCode?bpe:null}),n}var I0;function vpe(){return I0=I0||new xpe,I0}function bpe(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function Cpe(t,e){return t.isBlock=e5(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=Spe(t),t.flankingWhitespace=wpe(t,e),t}function Spe(t){return!pR(t)&&!upe(t)&&/^\s*$/i.test(t.textContent)&&!dpe(t)&&!fpe(t)}function wpe(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var n=kpe(t.textContent);return n.leadingAscii&&jS("left",t,e)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&jS("right",t,e)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function kpe(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function jS(t,e,n){var s,o,a;return t==="left"?(s=e.previousSibling,o=/ $/):(s=e.nextSibling,o=/^ /),s&&(s.nodeType===3?a=o.test(s.nodeValue):n.preformattedCode&&s.nodeName==="CODE"?a=!1:s.nodeType===1&&!e5(s)&&(a=o.test(s.textContent))),a}var Epe=Array.prototype.reduce,Tpe=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Lg(t){if(!(this instanceof Lg))return new Lg(t);var e={rules:Ms,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,s){return s.isBlock?"\n\n":""},keepReplacement:function(n,s){return s.isBlock?"\n\n"+s.outerHTML+"\n\n":s.outerHTML},defaultReplacement:function(n,s){return s.isBlock?"\n\n"+n+"\n\n":n}};this.options=rpe({},e,t),this.rules=new _R(this.options)}Lg.prototype={turndown:function(t){if(!Ipe(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=yR.call(this,new ype(t,this.options));return Mpe.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return Tpe.reduce(function(e,n){return e.replace(n[0],n[1])},t)}};function yR(t){var e=this;return Epe.call(t.childNodes,function(n,s){s=new Cpe(s,e.options);var o="";return s.nodeType===3?o=s.isCode?s.nodeValue:e.escape(s.nodeValue):s.nodeType===1&&(o=Ape.call(e,s)),vR(n,o)},"")}function Mpe(t){var e=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(t=vR(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function Ape(t){var e=this.rules.forNode(t),n=yR.call(this,t),s=t.flankingWhitespace;return(s.leading||s.trailing)&&(n=n.trim()),s.leading+e.replacement(n,t,this.options)+s.trailing}function vR(t,e){var n=lpe(t),s=ipe(e),o=Math.max(t.length-n.length,e.length-s.length),a="\n\n".substring(0,o);return n+a+s}function Ipe(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}var NS=/highlight-(?:text|source)-([a-z0-9]+)/;function jpe(t){t.addRule("highlightedCodeBlock",{filter:function(e){var n=e.firstChild;return e.nodeName==="DIV"&&NS.test(e.className)&&n&&n.nodeName==="PRE"},replacement:function(e,n,s){var o=n.className||"",a=(o.match(NS)||[null,""])[1];return"\n\n"+s.fence+a+"\n"+n.firstChild.textContent+"\n"+s.fence+"\n\n"}})}function Npe(t){t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var Ppe=Array.prototype.indexOf,Rpe=Array.prototype.every,md={};md.tableCell={filter:["th","td"],replacement:function(t,e){return bR(t,e)}};md.tableRow={filter:"tr",replacement:function(t,e){var n="",s={left:":--",right:"--:",center:":-:"};if(n5(e))for(var o=0;o<e.childNodes.length;o++){var a="---",i=(e.childNodes[o].getAttribute("align")||"").toLowerCase();i&&(a=s[i]||a),n+=bR(a,e.childNodes[o])}return"\n"+t+(n?"\n"+n:"")}};md.table={filter:function(t){return t.nodeName==="TABLE"&&n5(t.rows[0])},replacement:function(t){return t=t.replace("\n\n","\n"),"\n\n"+t+"\n\n"}};md.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}};function n5(t){var e=t.parentNode;return e.nodeName==="THEAD"||e.firstChild===t&&(e.nodeName==="TABLE"||Lpe(e))&&Rpe.call(t.childNodes,function(n){return n.nodeName==="TH"})}function Lpe(t){var e=t.previousSibling;return t.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function bR(t,e){var n=Ppe.call(e.parentNode.childNodes,e),s=" ";return n===0&&(s="| "),s+t+" |"}function Ope(t){t.keep(function(n){return n.nodeName==="TABLE"&&!n5(n.rows[0])});for(var e in md)t.addRule(e,md[e])}function Dpe(t){t.addRule("taskListItems",{filter:function(e){return e.type==="checkbox"&&e.parentNode.nodeName==="LI"},replacement:function(e,n){return(n.checked?"[x]":"[ ]")+" "}})}function Fpe(t){t.use([jpe,Npe,Ope,Dpe])}function PS(t){const e=w({},t);for(const n of Object.keys(e))e[n]=Math.round(e[n]);return e}function Ac(t,e){for(;t;){if(t instanceof HTMLElement&&t.dataset[e]!=null)return{node:t,dataValue:t.dataset[e]};t=t.parentNode}return{node:void 0,dataValue:void 0}}const j0={clientRect:void 0,isCollapsed:void 0,textContent:void 0,documentFragment:void 0,selection:void 0},CR=new Lg;CR.use(Fpe);function Bpe(t){const n=t.getRangeAt(0).cloneContents(),s=document.createElement("div");return s.appendChild(n),CR.turndown(s.innerHTML)}function Upe(t){const e=V(),[{clientRect:n,isCollapsed:s,textContent:o,documentFragment:a,selection:i},l]=_.useState(j0);Xn(()=>{const d=()=>{setTimeout(()=>{let u;const f=window.getSelection(),m={};if(f==null||!f.rangeCount){l(j0);return}const p=f.getRangeAt(0);if(p==null){l(j0);return}const g=p.cloneContents();m.documentFragment=g,m.textContent=Bpe(f);const h=p.getClientRects();if(h.length===0&&p.commonAncestorContainer!=null&&p.commonAncestorContainer instanceof HTMLElement){const x=p.commonAncestorContainer;u=PS(x.getBoundingClientRect().toJSON())}else{if(h.length<1)return;u=PS(h[0].toJSON())}m.clientRect=u,m.isCollapsed=p.collapsed,m.selection=f,l(m)},0)};return window.addEventListener("mouseup",d),()=>{window.removeEventListener("mouseup",d)}},[]);const c=Es();return _.useEffect(()=>{if(c)return;const d=u=>{const f=window.getSelection(),m=f==null?void 0:f.toString(),p=At(t),{dataValue:g}=Ac(f==null?void 0:f.anchorNode,"messageAuthorRole"),{dataValue:h}=Ac(f==null?void 0:f.anchorNode,"messageId");!m||!h||!p||!g||g!=="assistant"||u1(e,{source:"keyboard",type:"copy",messageId:h,serverThreadId:p,selectedText:m,location:"selection",contentType:"text"})};return document.addEventListener("copy",d),()=>{document.removeEventListener("copy",d)}},[e,t,c]),{clientRect:n,isCollapsed:s,textContent:o,documentFragment:a,selection:i}}const $pe=R(()=>P(()=>import("./nivxefhsb1r0ag5t.js"),__vite__mapDeps([234,1])),{loading:t=>O(t)}),SR="agent-turn",xZe=[wt.PrimaryAssistant,wt.GizmoInteraction],N0=8,Vpe=44,Hpe=12;function Gpe({clientRect:t,containerSize:e}){const n=t.top,s=n+t.height,o=t.left+t.width/2;let a=n-Vpe,i=o-e.width/2;const l=N0;(a<l||n<l)&&(a=s+Hpe);const c=window.innerWidth-e.width-N0;return i=Math.max(N0,Math.min(i,c)),{top:a,left:i}}function Wpe(t){var e;return or.createPortal(t.children,(e=t.mount)!=null?e:document.body)}function zpe({onClick:t}){return r.jsx(_e,{size:"medium",color:"secondary",className:"shadow-long flex rounded-xl border-none active:opacity-1",onClick:t,children:r.jsxs("span",{className:"flex items-center gap-1.5 select-none",children:[r.jsx($pe,{className:"icon"}),r.jsx("span",{className:"whitespace-nowrap! select-none max-md:sr-only",children:r.jsx(j,{defaultMessage:"Ask ChatGPT",id:"TargetedReplyPopover.askChatGPT"})})]})})}function qpe({anchorNode:t,clientRect:e,buttons:n}){var d;const s=_.useRef(null),[o,a]=_.useState({width:0,height:0});if(Xn(()=>{const u=s.current;if(!u)return;const f=()=>{s.current&&a({width:s.current.offsetWidth,height:s.current.offsetHeight})};f();const m=new ResizeObserver(f);return m.observe(u),()=>m.disconnect()},[n.length]),!t||!t.closest(".".concat(SR))||(n==null?void 0:n.length)===0)return null;const{top:i,left:l}=Gpe({clientRect:e,containerSize:o}),c=(d=t.ownerDocument)==null?void 0:d.body;return c?r.jsx(Wpe,{mount:c,children:r.jsx("div",{className:"aria-live=polite fixed select-none",style:{top:i,left:l},children:r.jsx("div",{ref:s,className:"shadow-long flex overflow-hidden rounded-xl",children:n})})}):null}const Ype=3;function yZe({conversation:t,onTargetedReply:e,conversation_context:n}){var C;const{clientRect:s,isCollapsed:o,textContent:a,selection:i}=Upe(t.id),{resetSidebarHistory:l}=Qme();V();const c=!1,{dataValue:d}=Ac(i==null?void 0:i.anchorNode,"messageAuthorRole"),{node:u,dataValue:f}=Ac(i==null?void 0:i.anchorNode,"messageId"),{dataValue:m}=Ac(i==null?void 0:i.focusNode,"messageId"),p=!m||f===m,g=a==null?void 0:a.trim(),h=(C=g==null?void 0:g.length)!=null?C:0,{dataValue:x}=Ac(i==null?void 0:i.focusNode,"writingBlock");_.useCallback(S=>{},[t,c,g,l,n]);const v=_.useCallback(S=>{g!==void 0&&e&&e({targetedReply:{type:"text",label:g,createNewCompletionParams:k=>{const E=Rh(g);return U(w({},k),{promptMessage:qd(k.promptMessage,{metadata:{targeted_reply:g}}),appendMessages:k.appendMessages==null?[E]:[...k.appendMessages,E]})},onCreateCompletion:({serverThreadId:k,currentLeafId:E})=>{B.logEventWithStatsig("Targeted Reply Submitted","chatgpt_targeted_reply_submitted",{conversationId:k,currentLeafId:E})},onCleared:({serverThreadId:k,currentLeafId:E})=>{B.logEventWithStatsig("Targeted Reply Cleared","chatgpt_targeted_reply_cleared",{conversationId:k,currentLeafId:E})}},messageId:S})},[g,e]);if(s==null||o||x||!p||d!=="assistant")return null;const y=f!=null?f:"",b=[];return h>=Ype&&b.push(r.jsx(zpe,{onClick:()=>v(y)})),r.jsx(qpe,{anchorNode:u,clientRect:s,buttons:b})}function vZe({isUserTurn:t}){return W("relative flex w-full min-w-0 flex-col",!t&&SR)}function bZe({text:t,customSymbolOffsets:e}){return r.jsx(C3,{name:"formatted_text_error",fallback:()=>r.jsx(r.Fragment,{children:t}),children:r.jsx(Zpe,{text:t,customSymbolOffsets:e})})}const Zpe=({text:t,customSymbolOffsets:e=[]})=>{const n=/(```[\s\S]*?```|`[^`\n]+`|```[\s\S]*|`[^`\n]*\n|`[^`\n]*$)/g;let s=0;const o=t.split(n).flatMap((a,i)=>{const l=s;if(s+=a.length,a.startsWith("```")&&a.endsWith("```"))return r.jsx("pre",{className:"overflow-x-auto",children:r.jsx("code",{children:a.slice(3,-3).trim()})},i);if(a.startsWith("```"))return r.jsx("pre",{className:"overflow-x-auto",children:r.jsx("code",{children:a.slice(3).trim()})},i);if(a.startsWith("`")&&a.endsWith("`"))return r.jsx("code",{children:a.slice(1,-1)},i);if(a.startsWith("`"))return r.jsx("code",{children:a.slice(1)},i);{const c=e.map(d=>n6(d)).filter(d=>l<=d.startIndex&&d.endIndex<=s);if(c.length){const d=c.map(m=>n6(m)).sort((m,p)=>m.startIndex-p.startIndex),u=[];let f=0;for(let m=0;m<d.length;m++){const p=d[m],g=p.startIndex-l,h=p.endIndex-l;g>f&&u.push(a.slice(f,g)),u.push(Kpe(p.symbol,a.slice(g,h),"".concat(i,"-multi-").concat(m))),f=h}return f<a.length&&u.push(a.slice(f)),u.filter(m=>!!m)}return a}});return r.jsx("div",{className:"whitespace-pre-wrap",children:o})};function Kpe(t,e,n=void 0){return t===s6.SystemHint?r.jsx("span",{className:"hint-pill",children:e},n):t===s6.EcosystemMention?r.jsx("span",{className:"ecosystem-mention",children:e},n):null}function Qpe({scriptSrc:t}){const e=V();return r.jsx("script",{nonce:Ln(e).cspScriptNonce,suppressHydrationWarning:!0,children:t})}function CZe({role:t,children:e}){const n=jn(hn);if(!n)return e;const s=t===Ke.User&&n?"py-4":void 0;return r.jsx("div",{className:W(s),children:e})}const Jpe=SG("(width <= 500px)",()=>!1);function Xpe(){return ae(Jpe)}function wR(){const t=jn(hn);return Xpe()&&t}let RS=!1;function SZe(t,e,n){_.useEffect(()=>{var s;!t||e||RS||n&&((s=Nd())==null||s.receivedFirstToken(),RS=!0)},[t,e,n])}const Vx=R(()=>P(()=>import("./ikidg75a7ytoj1s1.js"),__vite__mapDeps([235,1,236,10,11,237,100,102,238,239,240,227,117,228,241,96,242,107,109,110,243,119,120,244,245])).then(t=>t.CanvasMessageAttachment)),ege=R(()=>P(()=>import("./ikidg75a7ytoj1s1.js"),__vite__mapDeps([235,1,236,10,11,237,100,102,238,239,240,227,117,228,241,96,242,107,109,110,243,119,120,244,245])).then(t=>t.CanvasMessageAttachmentWrapper)),tge=R(()=>P(()=>import("./oqn9j41bt6i82zvt.js"),__vite__mapDeps([246,1])),{loading:t=>O(t)}),nge=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)});function Ic(t,e){return t===cr.DOCUMENT?r.jsx(nge,{className:W("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):t&&Sg(t)?r.jsx(tge,{className:W("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):null}const sge=({textdocId:t,clientThreadId:e})=>{const n=ko(f=>{var m;return(m=f==null?void 0:f.resolveTempTextdocId[t])!=null?m:t}),s=k1(n),o=jb(n),a=am(),i=ko(f=>{const m=f==null?void 0:f.lastCanvasAssistantMessageById;return m==null||n==null?!0:m[n]==null});if(!s)return null;const l=()=>{vi(n)},c=()=>{ml({type:fl.Textdoc,textdocId:n,shouldRunCodeOnOpen:!0})},{title:d,type:u}=s;return r.jsx("div",{className:"flex w-full justify-end",children:r.jsx(Vx,{textdocId:n,clientThreadId:e,name:d,tag:u,icon:Ic(u,!1),iconSelected:Ic(u,!0),isCanvasOpen:a,isInlinePreview:i,isFocused:o,isUserMessage:!0,onClick:l,onPreview:c})})},wZe=({messages:t,clientThreadId:e})=>{var o,a;const[n]=t,s=(o=n==null?void 0:n.metadata)==null?void 0:o.canvas;return!s||s.user_message_type!=null?null:r.jsx(r.Fragment,{children:(a=s.user_created_textdocs)==null?void 0:a.map(({user_created_temp_textdoc_id:i})=>r.jsx(sge,{textdocId:i,clientThreadId:e},i))})};function kZe(t){const e=Qn(t);return kr(n=>af.getTaskIdsByConversationId(e,n).map(a=>af.getTask(a,n)).filter(a=>a!==void 0).some(a=>a.status===An.RUNNING||a.status===An.CREATED))}function EZe(t){var e,n;return t&&(n=(e=t.metadata)==null?void 0:e.b1de6e2_rm)!=null?n:!1}function oge(t,e){return he.findNode(t,({message:n})=>{var s,o;return((s=n.metadata)==null?void 0:s.b1de6e2_rm)===!0&&((o=n.metadata)==null?void 0:o.async_task_id)===e})!=null}function age(t,e){var s;let n=he.getCurrentNode(t);return n.message.author.role==="developer"&&(n=he.getNode(t,n.parentId)),e!=null&&(n.message.id===e||((s=n.message.metadata)==null?void 0:s.parent_id)===e)}function rge(t,e){const n=he.getCurrentNode(t);return e!=null&&n.message.id===e}const kR=R(()=>P(()=>Promise.resolve().then(()=>gm),void 0),{loading:t=>O(t)}),ER={medium:"icon",small:"icon-sm",xsmall:"icon-xs",large:"icon-lg",xxlarge:"icon-xl"},LS={xsmall:"h-4.5 w-4.5 text-base",small:"h-6 w-6 text-xs",medium:"h-8 w-8 text-sm",large:"h-10 w-10 text-base",xxlarge:"h-20 w-20 text-base"},vf=t=>{"use forget";var y,b,C;const e=G.c(29),{connector:n,className:s,iconClassName:o,size:a}=t,i=ea(),l=(y=n.logo_url)!=null?y:null,c=(b=n.logo_url_dark)!=null?b:null;let d;e[0]!==l||e[1]!==c?(d={lightLogoUrl:l,darkLogoUrl:c},e[0]=l,e[1]=c,e[2]=d):d=e[2];const u=S1(d);if(!((C=u.data)!=null&&C.url)){const S=LS[a],k=a==="large"||a==="xxlarge"?"rounded-xl":"rounded-md",E=i?"bg-token-bg-tertiary":"bg-token-bg-secondary";let T;e[3]!==S||e[4]!==k||e[5]!==E?(T=W("text-token-text-secondary flex items-center justify-center font-semibold",S,k,E),e[3]=S,e[4]=k,e[5]=E,e[6]=T):T=e[6];const M=ER[a];let A;e[7]!==o||e[8]!==M?(A=W(M,o),e[7]=o,e[8]=M,e[9]=A):A=e[9];let I;e[10]!==A?(I=r.jsx(kR,{className:A}),e[10]=A,e[11]=I):I=e[11];let N;e[12]!==I||e[13]!==T?(N=r.jsx("span",{className:T,children:I}),e[12]=I,e[13]=T,e[14]=N):N=e[14];let L;return e[15]!==s||e[16]!==N?(L=r.jsx("div",{className:s,children:N}),e[15]=s,e[16]=N,e[17]=L):L=e[17],L}const f=u.data.url,m=n.name,p=LS[a],g=a==="large"?"rounded-xl":"rounded-md";let h;e[18]!==o||e[19]!==p||e[20]!==g?(h=W(p,"object-contain",g,o),e[18]=o,e[19]=p,e[20]=g,e[21]=h):h=e[21];let x;e[22]!==n.name||e[23]!==u.data.url||e[24]!==h?(x=r.jsx("img",{src:f,alt:m,className:h}),e[22]=n.name,e[23]=u.data.url,e[24]=h,e[25]=x):x=e[25];let v;return e[26]!==s||e[27]!==x?(v=r.jsx("div",{className:s,children:x}),e[26]=s,e[27]=x,e[28]=v):v=e[28],v},TZe=t=>{"use forget";var d,u,f;const e=G.c(11),{connector:n}=t,s=ea(),o=(d=n.logo_url)!=null?d:null,a=(u=n.logo_url_dark)!=null?u:null;let i;e[0]!==o||e[1]!==a?(i={lightLogoUrl:o,darkLogoUrl:a},e[0]=o,e[1]=a,e[2]=i):i=e[2];const l=S1(i);if(!((f=l.data)!=null&&f.url)){const m=s?"bg-token-bg-tertiary":"bg-token-bg-secondary";let p;e[3]!==m?(p=W("text-token-text-secondary m-0.5 flex h-6 w-6 items-center justify-center rounded-md text-xs font-semibold",m),e[3]=m,e[4]=p):p=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(kR,{className:ER.small}),e[5]=g):g=e[5];let h;return e[6]!==p?(h=r.jsx("span",{className:p,children:g}),e[6]=p,e[7]=h):h=e[7],h}let c;return e[8]!==n.name||e[9]!==l.data.url?(c=r.jsx("span",{className:"m-0.5 rounded-md",children:r.jsx("img",{src:l.data.url,alt:n.name,className:"h-6 w-6 rounded-md object-contain"})}),e[8]=n.name,e[9]=l.data.url,e[10]=c):c=e[10],c},TR=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M7.45996 14.375C7.45996 13.3616 6.63844 12.54 5.625 12.54C4.61156 12.54 3.79004 13.3616 3.79004 14.375C3.79004 15.3884 4.61156 16.21 5.625 16.21C6.63844 16.21 7.45996 15.3884 7.45996 14.375ZM16.21 14.375C16.21 13.3616 15.3884 12.54 14.375 12.54C13.3616 12.54 12.54 13.3616 12.54 14.375C12.54 15.3884 13.3616 16.21 14.375 16.21C15.3884 16.21 16.21 15.3884 16.21 14.375ZM7.45996 5.625C7.45996 4.61156 6.63844 3.79004 5.625 3.79004C4.61156 3.79004 3.79004 4.61156 3.79004 5.625C3.79004 6.63844 4.61156 7.45996 5.625 7.45996C6.63844 7.45996 7.45996 6.63844 7.45996 5.625ZM16.21 5.625C16.21 4.61156 15.3884 3.79004 14.375 3.79004C13.3616 3.79004 12.54 4.61156 12.54 5.625C12.54 6.63844 13.3616 7.45996 14.375 7.45996C15.3884 7.45996 16.21 6.63844 16.21 5.625ZM17.54 14.375C17.54 16.123 16.123 17.54 14.375 17.54C12.627 17.54 11.21 16.123 11.21 14.375C11.21 12.627 12.627 11.21 14.375 11.21C16.123 11.21 17.54 12.627 17.54 14.375ZM8.79004 5.625C8.79004 7.37298 7.37298 8.79004 5.625 8.79004C3.87702 8.79004 2.45996 7.37298 2.45996 5.625C2.45996 3.87702 3.87702 2.45996 5.625 2.45996C7.37298 2.45996 8.79004 3.87702 8.79004 5.625ZM17.54 5.625C17.54 7.37298 16.123 8.79004 14.375 8.79004C13.7416 8.79004 13.153 8.60173 12.6582 8.28125L8.28125 12.6582C8.60173 13.153 8.79004 13.7416 8.79004 14.375C8.79004 16.123 7.37298 17.54 5.625 17.54C3.87702 17.54 2.45996 16.123 2.45996 14.375C2.45996 12.627 3.87702 11.21 5.625 11.21C6.25794 11.21 6.84623 11.3977 7.34082 11.7178L11.7178 7.34082C11.3977 6.84623 11.21 6.25794 11.21 5.625C11.21 3.87702 12.627 2.45996 14.375 2.45996C16.123 2.45996 17.54 3.87702 17.54 5.625Z"})),gm=Object.freeze(Object.defineProperty({__proto__:null,default:TR},Symbol.toStringTag,{value:"Module"})),ige=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),lge=R(()=>P(()=>import("./g4luqq3g92oxbbim.js"),__vite__mapDeps([247,1])),{loading:t=>O(t)}),cge=R(()=>P(()=>import("./pj0tlj9i65oz4g7u.js"),__vite__mapDeps([248,1])),{loading:t=>O(t)}),dge=R(()=>P(()=>import("./d8cmrw5lg3ncoab2.js"),__vite__mapDeps([249,1])),{loading:t=>O(t)}),uge=R(()=>P(()=>import("./gsc4el4a1mly7vaf.js"),__vite__mapDeps([33,1])),{loading:t=>O(t)}),fge=R(()=>P(()=>import("./n7wxdtzxeekb5r6v.js"),__vite__mapDeps([250,1])),{loading:t=>O(t)}),mge=R(()=>P(()=>import("./d8urt6z8czylb5p6.js"),__vite__mapDeps([251,1])),{loading:t=>O(t)}),pge=R(()=>P(()=>import("./bnipcvjraeep7qjy.js"),__vite__mapDeps([252,1])),{loading:t=>O(t)}),gge=R(()=>P(()=>import("./dvfjdfwc50k8htst.js"),__vite__mapDeps([253,1])),{loading:t=>O(t)}),hge=R(()=>P(()=>import("./kfciwy69uk039ng9.js"),__vite__mapDeps([34,1])),{loading:t=>O(t)}),_ge=R(()=>P(()=>import("./oyksq1pvhzkxbrqr.js"),__vite__mapDeps([254,1])),{loading:t=>O(t)}),xge=R(()=>P(()=>import("./idxkrx2slxhzm8qh.js"),__vite__mapDeps([255,1])),{loading:t=>O(t)}),yge=R(()=>P(()=>import("./l9as1ndnevgs02tf.js"),__vite__mapDeps([256,1])),{loading:t=>O(t)}),vge=R(()=>P(()=>import("./l48iylqopn5miofx.js"),__vite__mapDeps([257,1])),{loading:t=>O(t)}),bge=R(()=>P(()=>import("./jwueg8vspq9yhps2.js"),__vite__mapDeps([258,1])),{loading:t=>O(t)}),Cge=R(()=>P(()=>import("./e9c4tgzw8sr4ptnc.js"),__vite__mapDeps([259,1])),{loading:t=>O(t)}),Sge=R(()=>P(()=>import("./hjef14qauats368u.js"),__vite__mapDeps([260,1])),{loading:t=>O(t)}),wge=R(()=>P(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([35,1])),{loading:t=>O(t)}),kge=R(()=>P(()=>import("./blthqd9nl25rhbvi.js"),__vite__mapDeps([261,1])),{loading:t=>O(t)}),Ege=R(()=>P(()=>import("./g688vfij3wo711sf.js"),__vite__mapDeps([36,1])),{loading:t=>O(t)}),Tge=R(()=>P(()=>import("./okzlvevr93wa1zvp.js"),__vite__mapDeps([37,1])),{loading:t=>O(t)}),Mge=R(()=>P(()=>import("./dvib5d1jxvc518h5.js"),__vite__mapDeps([262,1])),{loading:t=>O(t)}),Age=R(()=>P(()=>import("./h48j4g76f726xzx4.js"),__vite__mapDeps([263,1])),{loading:t=>O(t)}),Ige=R(()=>P(()=>import("./firqr8dqm1h7owx1.js"),__vite__mapDeps([264,1])),{loading:t=>O(t)}),jge=R(()=>P(()=>import("./kjvygvhx30u8mxny.js"),__vite__mapDeps([265,1])),{loading:t=>O(t)}),Nge=R(()=>P(()=>import("./buq7rcr26b24qglf.js"),__vite__mapDeps([266,1])),{loading:t=>O(t)}),Pge=R(()=>P(()=>import("./l9asex3m3rhov6mj.js"),__vite__mapDeps([267,1])),{loading:t=>O(t)}),Rge=R(()=>P(()=>import("./icogg96ipnevhswg.js"),__vite__mapDeps([268,1])),{loading:t=>O(t)}),Lge=R(()=>P(()=>import("./l4q37jna5u8671pr.js"),__vite__mapDeps([269,1])),{loading:t=>O(t)}),Oge=R(()=>P(()=>import("./fo0x0epn1mhbz6yk.js"),__vite__mapDeps([270,1])),{loading:t=>O(t)}),Dge=R(()=>P(()=>import("./kbwf70iamjdvta7y.js"),__vite__mapDeps([271,1])),{loading:t=>O(t)}),OS={[window.location.origin+"/c/"]:"Canvas","https://chatgpt-staging.com/c/":"Canvas","https://docs.google.com/document":"Google Docs","https://docs.google.com/presentation":"Google Slides","https://docs.google.com/spreadsheets":"Google Sheets","https://drive.google.com/":"Google Drive","https://mail.google.com/mail/":"Gmail","https://calendar.google.com/":"Google Calendar","https://www.google.com/calendar":"Google Calendar","https://github.com/":"GitHub","https://linear.app/":"Linear","https://app.intercom.com/":"Intercom","https://www.notion.so/":"Notion","https://notion.so/":"Notion","https://canva.com/":"Canva","https://www.canva.com/":"Canva","https://dropbox.com/":"Dropbox","https://www.dropbox.com/":"Dropbox","https://box.com/":"Box","https://app.box.com/":"Box","https://outlook.office.com/":"Outlook","https://outlook.live.com/":"Outlook","https://outlook.office365.com/":"Outlook","https://teams.microsoft.com/":"Teams","mailto:":"Google Contacts","https://app.hubspot.com/":"Hubspot","https://gitlab.com/":"GitLab","https://desk.zoho.":"Zoho Desk","https://3.basecamp.com":"Basecamp"},DS={".aha.io/":"Aha!",".asana.com/":"Asana","dev.azure.com/":"Azure DevOps",".clickup.com/":"ClickUp","gitlab.com/":"GitLab",".helpscout.net/":"Help Scout",".teamwork.com/":"Teamwork",".zendesk.com/":"Zendesk"},Fge=/^(https:\/\/)([a-zA-Z0-9-]+\.)+slack\.com(\/.*)?$/,Bge=/^https:\/\/outlook\.(office|live)\.com/,Uge=/^https:\/\/[^\s]+?\.sharepoint\.com\/[^\s]*/;function MR(t){if(t){if(Fge.test(t))return"Slack";if(Bge.test(t))return"Outlook";if(Uge.test(t))return"SharePoint";{const e=Object.keys(OS).find(s=>t.startsWith(s));if(e)return OS[e];const n=Object.keys(DS).find(s=>t.includes(s));return n?DS[n]:void 0}}}function s5(t){switch(t){case"Google Contacts":return kge;case"Google Docs":return uge;case"Google Slides":return cge;case"Google Sheets":return dge;case"Google Drive":return wge;case"Gmail":return Tge;case"Google Calendar":return Ege;case"GitHub":return Age;case"Slack":return gge;case"Canvas":return ige;case"SharePoint":return hge;case"Linear":return vge;case"Dropbox":return Ige;case"Box":return Pge;case"Intercom":return bge;case"Notion":return xge;case"Canva":return Nge;case"Outlook":return _ge;case"Teams":return yge;case"Hubspot":return Cge;case"Aha!":return Dge;case"Asana":return Oge;case"Azure DevOps":return Lge;case"ClickUp":return jge;case"GitLab":return Mge;case"Help Scout":return Sge;case"Teamwork":return pge;case"Zendesk":return mge;case"Zoho Desk":return fge;case"Basecamp":return Rge;default:return null}}function Yd(t){const e=MR(t);if(!e)return null;const n=s5(e);return n?{type:e,Icon:n}:null}const Hx=({connectorId:t,cloud_doc_url:e,availableConnectors:n,iconClassName:s})=>{const o=Yd(e!=null?e:""),{Icon:a,type:i}=o!=null?o:{};if(a)return{Icon:r.jsx(a,{className:W(s,"icon-sm")}),appName:i!=null?i:""};if(t){const l=Array.from(n!=null?n:[]).find(c=>c.id===t);if(l)return{Icon:r.jsx(vf,{connector:l,size:"xsmall",className:s,iconClassName:"m-0"}),appName:l.name}}return{Icon:e?r.jsx(TR,{className:W(s,"icon-sm")}):r.jsx(lge,{className:W(s,"icon-sm")}),appName:i!=null?i:""}};function MZe(t){var e;{const n=(e=t.extra)==null?void 0:e.cloud_doc_url;if(!n)return;const s=MR(n);if(!s)return;const o=t.name;return{url:n,type:s,title:Vge(s)?Hge(o):o}}}const $ge=["Google Docs","Google Slides","Google Sheets"];function Vge(t){return $ge.includes(t)}function Hge(t){const e=t.lastIndexOf(".");return e!==-1?t.slice(0,e):t}function AZe({citationMetadata:t,compact:e}){if(!t)return null;const n=s5(t.type);return n?e?r.jsx("a",{href:g_(t.url),target:"_blank",rel:"noreferrer",children:r.jsxs("div",{className:"flex flex-row items-center gap-2 overflow-clip rounded-lg border border-gray-200 px-[16px] py-2",children:[r.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),r.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title?t.title:g_(t.url)})]})}):r.jsx("a",{href:g_(t.url),target:"_blank",rel:"noreferrer",children:r.jsxs("div",{className:"flex flex-col gap-[2px] overflow-clip rounded-lg border border-gray-200 px-[16px] py-[12px]",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-0.5",children:[r.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),r.jsx("p",{className:"text-token-text-secondary text-xs leading-normal",children:t.type})]}),r.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title})]})}):null}const Gge=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)});function IZe({hint:t}){var n;if(!t)return null;const e=Yd((n=t.url)!=null?n:"");return r.jsxs("div",{className:"text-token-text-tertiary mb-2 flex flex-row items-center justify-end",children:[r.jsx(Gge,{className:"icon me-1.5"}),r.jsx("span",{className:"shrink-0",children:r.jsx(j,{id:"Y+ZBkg",defaultMessage:"Referring to {fileName}",values:{fileName:r.jsxs(Lf,{className:"text-token-text-secondary font-semibold hover:underline",href:t.url,underline:!1,openNewTab:!0,children:[e&&r.jsx(e.Icon,{className:"icon me-1.5 inline"}),t.name]})}})})]})}const Wge=R(()=>P(()=>Promise.resolve().then(()=>Nr),void 0),{loading:t=>O(t)}),jZe=t=>{"use forget";const e=G.c(22),{children:n,collapsedHeight:s}=t,[o,a]=_.useState(!1),[i,l]=_.useState(null),c=_.useRef(null);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{c.current&&l(c.current.scrollHeight)},e[0]=d):d=e[0];let u;e[1]!==n||e[2]!==o?(u=[n,o],e[1]=n,e[2]=o,e[3]=u):u=e[3],_.useEffect(d,u);const f=o&&i?i:"".concat(s,"rem");let m;e[4]!==f?(m={maxHeight:f},e[4]=f,e[5]=m):m=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx("hr",{className:W("absolute start-0 end-0 bottom-0","hires:[border-inline-width:0.5px] [border-inline-width:1px] border-[var(--theme-user-msg-text)] opacity-20")}),e[6]=p):p=e[6];let g;e[7]!==n||e[8]!==m?(g=r.jsxs("div",{id:"expandable-content",ref:c,className:"relative overflow-hidden pb-3",style:m,children:[n,p]}),e[7]=n,e[8]=m,e[9]=g):g=e[9];let h;e[10]===Symbol.for("react.memo_cache_sentinel")?(h=()=>a(zge),e[10]=h):h=e[10];const x=o?FS.showLess.defaultMessage:FS.showMore.defaultMessage,v=o&&"rotate-180";let y;e[11]!==v?(y=W("self-center text-[var(--theme-user-msg-text)] group-hover:scale-110",v),e[11]=v,e[12]=y):y=e[12];let b;e[13]!==y?(b=r.jsx(Wge,{className:y}),e[13]=y,e[14]=b):b=e[14];let C;e[15]!==o||e[16]!==b||e[17]!==x?(C=r.jsx("button",{onClick:h,className:"group -mb-3 flex w-full cursor-pointer flex-col items-stretch pt-2 pb-2.5 select-none","aria-expanded":o,"aria-controls":"expandable-content","aria-label":x,children:b}),e[15]=o,e[16]=b,e[17]=x,e[18]=C):C=e[18];let S;return e[19]!==C||e[20]!==g?(S=r.jsxs("div",{className:"relative",children:[g,C]}),e[19]=C,e[20]=g,e[21]=S):S=e[21],S},FS=be({showLess:{id:"showLess",defaultMessage:"Show Less"},showMore:{id:"showMore",defaultMessage:"Show More"}});function zge(t){return!t}const qge={highlightedAttributions:new Set},BS=8,Gx=Dt(()=>qge),US={debugMode:!1,viewModelPredictedFallback:!1,disableSegmentReplacement:!1,useSigmoid:!0,influenceTemperature:.2,probThreshold:.45,probBaseline:.02},o5=Dt()(aT(()=>w({},US),{name:"search.attributions-settings",version:BS,migrate:(t,e)=>e!==BS?US:t}));function AR(t,e){return"".concat(t,"-").concat(e)}const $S={setHighlight:(t,e)=>{if(t==null)return;if(e==null||e.length===0)return $S.clearHighlights();Array.isArray(e)||(e=[e]);const n=new Set;for(const s of e)n.add(AR(t,s));return Gx.setState(()=>({highlightedAttributions:n}))},setHighlightBySource:(t,e)=>{var s;let n;"attribution_segments"in e&&(n=(s=e.attribution_segments)!=null?s:void 0),$S.setHighlight(t,n)},clearHighlights:()=>Gx.setState({highlightedAttributions:new Set})},NZe=()=>o5(t=>t.viewModelPredictedFallback),PZe=()=>o5(t=>t.debugMode),RZe=(t,e)=>Gx(n=>t==null?!1:n.highlightedAttributions.has(AR(t,e))),LZe=()=>o5(t=>t.disableSegmentReplacement);function OZe(){return!1}const DZe=t=>ze(t,"453021389").get("enable-block-animations",!1);function IR(t){var e;return t.author.role===Ke.Assistant&&((e=t.recipient)==null?void 0:e.startsWith(Pn.CANMORE))===!0}function jR(t){var e;return t.author.role===Ke.Tool&&((e=t.author.name)==null?void 0:e.startsWith(ci))===!0}function NR(t,e){const n=[];let s=0,o=0;for(const a of e)n[o]=s,s+=a.length,o+=1;return n[o]=s,t.map(a=>{const{start:i,end:l}=a;return{start:n[i],end:n[l]}})}function Yge(t,e){const n=[];let s=0,o=0;for(const a of e)n[s]=o,a.length===2?(n[s+1]=o,s+=2):s+=1,o+=1;return n[s]=o,t.map(a=>{const{start:i,end:l}=a;return{start:n[i],end:n[l]}})}function Wx(t,e){const n=t.map(({content:a,id:i,start:l,end:c})=>({id:i,at:{start:l,end:c},content:a})),s=n.map(a=>a.at),o=NR(s,e);return n.map((a,i)=>U(w({},a),{at:o[i]}))}function FZe(t,e){const n=t.map(a=>a.at),s=Yge(n,e);return t.map((a,i)=>U(w({},a),{at:s[i]})).map(({content:a,id:i,at:l})=>({id:i,start:l.start,end:l.end,content:a}))}const Zge=(t,e)=>{const n=NR(e,t),s=[];for(let a=0;a<n.length;a++){const{start:i}=n[a];let l=0;const c=n.slice(0,a).entries();for(const[d,u]of c)if(i>u.start||i>u.end){const f=u.end-u.start,m=e[d].content.length;l+=m-f}s.push(l)}const o=[];for(let a=0;a<n.length;a++){const{content:i}=e[a],l=n[a],{start:c}=l,d=s[a],u={start:c+d,end:c+d+i.length};o.push({id:"edit-".concat(a),content:i,positionBefore:l,positionAfter:u})}return o},Kge=(t,e)=>ge.safeGet("/textdoc/{textdoc_id}/diff/{version}",{parameters:{path:{textdoc_id:t,version:e}}});function Qge(t,e){const n=t.filter(s=>s.op_type==="edit");return Zge(e,n)}const Jge=async(t,e)=>{if(e===1)return null;const{content_before:n,content_after:s,comments_before:o,comments_after:a,operations:i}=await Kge(t,e!=null?e:-1);return{edits:Qge(i,n),contentBefore:n,contentAfter:s,commentsBefore:Wx(o,n),commentsAfter:Wx(a,s)}},PR=(t,e)=>es({queryKey:[t,e,"edit"],enabled:e!=null,gcTime:1e3*60*5,queryFn:()=>Jge(t,e)}),a5=()=>({lastFlushedAt:null,lastTriggeredAt:null}),r5=Dt(In(()=>({userEdits:{},timestamps:{}}))),{setState:N1}=r5,BZe=t=>r5(({timestamps:e})=>{var n,s,o,a;return((s=(n=e[t])==null?void 0:n.lastTriggeredAt)!=null?s:0)>((a=(o=e[t])==null?void 0:o.lastFlushedAt)!=null?a:0)}),UZe=t=>{N1(e=>{var n,s;(s=(n=e.timestamps)[t])!=null||(n[t]=a5()),e.timestamps[t].lastTriggeredAt=Date.now()})},$Ze=({textdocId:t,basedOnVersionInt:e,content:n,comments:s})=>{N1(o=>{var a,i,l,c;(i=(a=o.timestamps)[t])!=null||(a[t]=a5()),o.timestamps[t].lastFlushedAt=Date.now(),(c=(l=o.userEdits)[t])!=null||(l[t]=[]),o.userEdits[t].push({content:n,basedOnVersionInt:e,nextVersionInt:null,isPending:!0,comments:s})})},VZe=({textdocId:t,basedOnVersionInt:e,newVersion:n})=>{N1(s=>{var o,a;(a=(o=s.userEdits)[t])!=null||(o[t]=[]);for(const i of s.userEdits[t])if(i.basedOnVersionInt===e){i.isPending=!1,i.nextVersionInt=n;break}})},Xge=t=>{N1(e=>{for(const{textdocId:n,versionInt:s}of t){const o=e.userEdits[n];o&&(e.userEdits[n]=o.filter(a=>a.basedOnVersionInt>(s!=null?s:tr)),o.length===0&&(e.timestamps[n]=a5()))}})},ehe=Bl(({userEdits:t})=>t),the=Bl(t=>{const e=new Map;for(const[n,s]of Object.entries(t)){const o=So(s);if(!o)continue;const{content:a,comments:i,nextVersionInt:l,basedOnVersionInt:c}=o;e.set(n,{textdocId:n,comments:i,content:a,versionInt:l!=null?l:c})}return e}),nhe=()=>r5(t=>the(ehe(t))),RR=Dt(()=>({optimisticRestore:null})),{setState:Vp,getState:she}=RR;function ohe(t){Vp(e=>{var n;if(e.optimisticRestore){for(const{textdocId:s,versionInt:o}of t)if(e.optimisticRestore.textdocId===s&&e.optimisticRestore.versionInt!==-1&&((n=e.optimisticRestore.versionInt)!=null?n:tr)<=(o!=null?o:tr))return{optimisticRestore:null}}return e})}function LR(){return RR(t=>t.optimisticRestore)}function HZe(t,e,n){const s=jt(),{mutateAsync:o}=zt({mutationKey:["canvas","textdoc","persist"],mutationFn:ahe,onSuccess:()=>{t&&s.invalidateQueries({queryKey:[t,"textdocs"]})}}),a=LR(),i=_.useCallback(async()=>{if(!e||!n||e.versionInt==null||n.versionInt==null||she().optimisticRestore!=null)return;const{textdocId:l,versionInt:c}=e,d=n.versionInt,u=U(w({},n),{versionInt:-1});Vp(()=>({optimisticRestore:u})),_I(l);try{const f=await o({textdocId:l,versionInt:c,restoreFromVersionInt:d});Vp(m=>({optimisticRestore:m.optimisticRestore&&U(w({},m.optimisticRestore),{versionInt:f})}))}catch(f){Vp(()=>({optimisticRestore:null})),hte(l,{version:d})}},[e,n,o]);return{optimisticRestoredTextdocVersion:a,restoreHistoricalTextdocVersion:i}}async function ahe({textdocId:t,versionInt:e,restoreFromVersionInt:n}){return(await ge.safePost("/textdoc/{textdoc_id}/restore",{parameters:{path:{textdoc_id:t}},requestBody:{version:e,restore_from_version:n}})).version}const rhe=async({lastVersion:t,textdocId:e,commentId:n,reason:s})=>(await ge.safeDelete("/textdoc/{textdoc_id}/{version}/comment/{comment_id}",{parameters:{query:{reason:s},path:{textdoc_id:e,version:String(t),comment_id:n}}})).version,zx=Dt(()=>({persistingOp:null,ops:[]})),{setState:Hp,getState:ihe}=zx,lhe=()=>{const t=zx(({ops:n})=>n),e=zx(({persistingOp:n})=>n);return _.useMemo(()=>[...t,e].filter(H3),[t,e])},che=t=>{Hp(e=>{let n=e.ops;for(const{textdocId:s,versionInt:o}of t)n=n.filter(a=>{var i;return a.textdocId!==s||((i=a.versionInt)!=null?i:tr)>(o!=null?o:tr)});return{ops:n}})},GZe=t=>_.useCallback(async(e,n)=>{const s=!!ihe().persistingOp,o=t==null?void 0:t.versionInt,a=t==null?void 0:t.textdocId;if(s||o==null||a==null)return!1;const i={kind:Un.REMOVE_COMMENT,textdocId:a,author:{role:Ke.User},versionInt:o,createdAt:Date.now()/1e3,commentId:e,reason:n};Hp(({ops:l})=>({ops:l,isPersisting:!0,persistingOp:i}));try{const l=await rhe({lastVersion:o,textdocId:a,commentId:e,reason:n});return Hp(({ops:c})=>({ops:[...c,U(w({},i),{versionInt:l})],isPersisting:!1,persistingOp:null})),l}catch(l){return Hp(({ops:c})=>({ops:c,isPersisting:!1,persistingOp:null})),!1}},[t]),i5=t=>ye(t,"2928249761");function dhe(t){var n,s;const e=(s=(n=t.metadata)==null?void 0:n.open_in_canvas_view)==null?void 0:s.id;return e!=null?e:null}const uhe=async t=>await ge.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:t}}}).catch(e=>(Fl.logError("Failed to fetch persisted textdocs",e,{clientThreadId:t}),[])),fhe=async t=>{const e=await uhe(t),n=new Map(e.map(a=>[a.id,a])),s=[];for(const{id:a,content:i,version:l,textdoc_type:c,title:d,comments:u,metadata:f}of e)s.push({textdocId:a,messageId:null,type:yl(c),comments:Wx(u,i),status:Os.COMPLETE,title:d,content:i,versionInt:l,createdAt:0,metadata:{content_references:f==null?void 0:f.content_references,hive_id:f==null?void 0:f.hive_id}});return{persistedTextdocVersionById:new Map(s.map(a=>[a.textdocId,a])),persistedTextdocVersions:s,persistedTextdocById:n}};function mhe(t){const e=V(),n=i5(e),s=ye(e,"3959994305")||n,o=Qn(t),[a,i]=Ve(t,g=>[he.isMessageTurnEnded(g),he.lastUserMessage(g)]),l=i&&!!dhe(i),c=!!o&&tt(e)&&(!s||a||!!l),{data:d,error:u,isLoading:f,isFetching:m,refetch:p}=rt({queryKey:[o,"textdocs"],enabled:c,queryFn:o?()=>fhe(o):Qy});return _.useEffect(()=>{if(!d)return;const{persistedTextdocVersions:g}=d;che(g),Xge(g),ohe(g)},[d]),[U(w({},d),{error:u,isEnabled:c,isLoading:f,isFetching:m}),p]}var Og=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.READY=1]="READY",t[t.REFETCHING=2]="REFETCHING",t))(Og||{});function OR(t){"use forget";const e=G.c(14),[n,s]=mhe(t),{error:o,persistedTextdocVersionById:a,isEnabled:i,isLoading:l,isFetching:c}=n,d=a===void 0?null:a,u=jt();let f;e[0]!==t||e[1]!==u||e[2]!==s?(f=()=>{var y,b,C,S,k;const g=he.getConversationLastTurn(ft(t)),h=(y=g==null?void 0:g.messages)!=null?y:[],x=Pl(h,ghe),v=h.some(phe);if(x){const E=(C=(b=x.metadata)==null?void 0:b.canvas)==null?void 0:C.textdoc_id,T=(k=(S=x.metadata)==null?void 0:S.canvas)==null?void 0:k.version;E!=null&&T!=null&&u.prefetchQuery(PR(E,T))}(x||v)&&s()},e[0]=t,e[1]=u,e[2]=s,e[3]=f):f=e[3],NM(f);let m;e[4]!==i||e[5]!==c||e[6]!==l||e[7]!==d?(m=0,d&&c?m=2:(!i||d&&!c&&!l)&&(m=1),e[4]=i,e[5]=c,e[6]=l,e[7]=d,e[8]=m):m=e[8];let p;return e[9]!==o||e[10]!==d||e[11]!==s||e[12]!==m?(p={status:m,fetchError:o,textdocVersionById:d,refetch:s},e[9]=o,e[10]=d,e[11]=s,e[12]=m,e[13]=p):p=e[13],p}function phe(t){var e,n;return((n=(e=t.metadata)==null?void 0:e.canvas)==null?void 0:n.user_created_temp_textdoc_id)!=null}function ghe(t){return jR(t)}const hhe=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),_he=R(()=>P(()=>import("./naoaa24cgmdbcxxy.js"),__vite__mapDeps([273,1])),{loading:t=>O(t)}),VS=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)});function WZe({messages:t,clientThreadId:e}){var a,i,l,c;const n=t.find(d=>{var u;return((u=d.metadata)==null?void 0:u.open_in_canvas_view)!=null}),{textdocVersionById:s}=OR(e);if(n==null)return null;const o=(i=(a=n.metadata)==null?void 0:a.open_in_canvas_view)!=null&&i.id?s==null?void 0:s.get((c=(l=n.metadata)==null?void 0:l.open_in_canvas_view)==null?void 0:c.id):void 0;return o!=null?r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(VS,{className:"icon"}),o.type.startsWith("code/")?r.jsx(_he,{className:"ms-2 inline-block"}):r.jsx(hhe,{className:"ms-2 inline-block"}),o.title]}):r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(VS,{className:"icon"}),r.jsx(j,{id:"NHZXLr",defaultMessage:"Canvas document"})]})}const HS=be({noThanksLabel:{id:"shoppingDecisionBoundaryButtons.noThanksLabel",defaultMessage:"No thanks"},continueLabel:{id:"shoppingDecisionBoundaryButtons.continueLabel",defaultMessage:"Continue"}}),GS="shopping_app";function zZe(t){"use forget";const e=G.c(12),{conversation:n,messages:s}=t;let o;e[0]!==n?(o=async()=>{const g={id:as(),author:{role:Ke.Tool,name:GS},create_time:Date.now()/1e3,content:{content_type:ut.Text,parts:["The user has declined to use Shopping api tool, answer their question directly"]},recipient:"all",metadata:{is_visually_hidden_from_conversation:!0},status:"finished_successfully",weight:0};await Ko({conversation:n,promptMessage:g,eventSource:"mouse"})},e[0]=n,e[1]=o):o=e[1];const a=o;let i;e[2]!==n?(i=async()=>{const g={id:as(),author:{role:Ke.Tool,name:GS},create_time:Date.now()/1e3,content:{content_type:ut.Text,parts:["The user has accepted to use Shopping api tool, now we MUST answer their question by triggering the Shopping app"]},recipient:"all",metadata:{is_visually_hidden_from_conversation:!0},status:"finished_successfully",weight:0};await Ko({conversation:n,promptMessage:g,eventSource:"mouse"})},e[2]=n,e[3]=i):i=e[3];const l=i;let c;e[4]!==s[0].id?(c=g=>he.isLastActorMessage(g,s[0].id),e[4]=s[0].id,e[5]=c):c=e[5];const d=Ve(n.id,c),[u,f]=_.useState(!d);let m;e[6]!==a||e[7]!==l||e[8]!==u?(m=!u&&r.jsxs("div",{className:"mt-4 flex gap-3",children:[r.jsx("button",{type:"button",className:"btn btn-secondary rounded-full px-4 py-2 font-medium",onClick:()=>{f(!0),a()},children:r.jsx(j,w({},HS.noThanksLabel))}),r.jsx("button",{type:"button",className:"btn btn-primary rounded-full px-4 py-2 font-medium",onClick:()=>{f(!0),l()},children:r.jsx(j,w({},HS.continueLabel))})]}),e[6]=a,e[7]=l,e[8]=u,e[9]=m):m=e[9];let p;return e[10]!==m?(p=r.jsx("div",{children:m}),e[10]=m,e[11]=p):p=e[11],p}function xhe(t,e=[]){var s;if(e.length===0)return t;const n=e.filter(o=>{var a;return o.end_ix<=t.length&&o.citation_format_type==="tether_markdown"&&((a=o.metadata)==null?void 0:a.type)==="webpage"});for(let o=n.length-1;o>=0;o--){const a=n[o];if(((s=a.metadata)==null?void 0:s.type)!=="webpage")continue;const{start_ix:i,end_ix:l,metadata:c}=a,u=t.substring(i,l).replace(/\[(.*?)\]\((\d+)\)/g,"[$1](".concat(c==null?void 0:c.url,")"));t=t.substring(0,i)+u+t.substring(l)}return t}function yhe(t,e=[]){var a,i;if(e.length===0)return[];const n=[],s=e.filter(l=>l.end_ix<=t.length&&l.citation_format_type!=="tether_markdown"),o=HT(t);for(let l=s.length-1;l>=0;l--){const c=s[l];let d;const{start_ix:u,end_ix:f,metadata:m,invalid_reason:p}=c;if(!(m!=null&&m.type))continue;const g=o.slice(u,f).join("");switch(m.type){case"webpage":d=U(w({},m),{type:"webpage",title:(a=m.title)!=null?a:"",snippet:(i=m.text)!=null?i:null,pub_date:vhe(m.pub_date),matched_text:g,start_idx:u,end_idx:f,alt:null,prompt_text:null,safe_urls:[],attributions:null,refs:[]});break;case"file":d=U(w({},m),{matched_text:g,start_idx:u,end_idx:f,alt:null,prompt_text:null,safe_urls:[],refs:[]});break}p&&(d={type:"invalid",alt:p,prompt_text:null,start_idx:u,end_idx:f,matched_text:g,invalid:!0,safe_urls:[],refs:[]});let h=!1;if(n.length>0){const x=n[n.length-1];WS(x)===WS(d)&&o.slice(x.end_idx,c.start_ix).join("").trim().length===0&&(n[n.length-1].end_idx=c.end_ix,h=!0)}!h&&d&&n.push(d)}return n}function qZe(t,e=[],n=[]){const s=xhe(t,e),a=[...n.length>0?[]:yhe(s,e),...n],i=_h(a);return{text:s,contentReferences:i}}function WS(t){switch(t.type){case"file":return t.id;case"webpage":return t.url;case"invalid":return t.alt}}function vhe(t){return t==null?null:new Date(t).getTime()/1e3}function YZe(t){return t.startsWith("file_")||t.startsWith("file-")}const bhe=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)});function ZZe({messages:t,clientThreadId:e}){var l,c,d;const[n,s]=_.useState(),o=ne(),a=Qn(e);let i=null;for(const u of t)if(((d=(c=(l=u.metadata)==null?void 0:l.dalle)==null?void 0:c.from_client)==null?void 0:d.operation)!=null){i=u.metadata.dalle.from_client.operation;break}return _.useEffect(()=>{if(i==null)return;const u=i.original_file_id;async function f(m){try{const p=await Lh(m,void 0,void 0,a,!1);p.status===Oh.Success?s(p.download_url):Re.addError("Error fetching URL for file ".concat(m,": ").concat(p.status))}catch(p){}}f(u)},[a,i]),i==null?null:r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(bhe,{className:"icon"}),n==null?r.jsx("div",{className:"h-7"}):r.jsxs(r.Fragment,{children:[r.jsx("img",{src:n,alt:o.formatMessage({id:"textMessage.editedImageAltText",defaultMessage:"Edited image"}),className:"h-7 w-auto rounded-sm opacity-50"}),i.type==="inpainting"&&r.jsx("span",{className:"ms-1 text-sm font-semibold",children:r.jsx(j,{id:"textMessage.inpaintedImage",defaultMessage:"Selection"})})]})]})}const Che=R(()=>P(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([147,1])),{loading:t=>O(t)}),She=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)});function l5({type:t="info",children:e,isDismissible:n=!1,onDismiss:s,className:o,isElevated:a=!1,primaryAction:i,customIcon:l,iconCentered:c=!1}){const[d,u]=_.useState(!1);if(d)return null;let f;return t!=="none"&&(f=l||Che),r.jsxs(whe,{$type:t,className:W("flex w-full items-center gap-6 rounded-2xl border text-sm",n?"py-2.5 ps-3 pe-2 md:py-3 md:ps-4 md:pe-3":"px-3 py-2.5 md:p-4",a&&"shadow-xxs",o),children:[r.jsxs("div",{className:W("flex min-w-0 grow gap-3",c?"items-center":"items-start"),children:[f&&r.jsx(f,{className:W("icon-lg shrink-0",n&&"mt-[2px] md:mt-px",(t==="info"||t==="none")&&"text-token-text-secondary")}),r.jsx("div",{className:W("min-w-0 grow",n?"pt-[4px] md:pt-[3px]":"pt-[2px]",!f&&"ps-1"),children:e})]}),i,n&&r.jsx("button",{onClick:()=>{u(!0),s==null||s()},className:W("text-token-text-primary flex h-7 w-7 shrink-0 items-center justify-center self-start rounded-full bg-transparent",(t==="info"||t==="none")&&"hover:bg-token-main-surface-secondary",t==="danger"&&"hover:bg-token-surface-error/10",t==="warning"&&"hover:bg-orange-400/10"),children:r.jsx(She,{className:"icon"})})]})}var hE;const whe=mt.div(hE||(hE=ct(["\n",""])),({$type:t})=>{switch(t){case"danger":return"text-token-text-error border-token-surface-error/15 bg-token-surface-error/5";case"warning":return"text-orange-600 bg-orange-400/5 border-orange-400/15";case"success":return"text-green-500 border-green-500 bg-green-500/10";default:return"text-token-text-primary border-token-border-default bg-token-main-surface-primary/10"}}),khe=({disclaimerContent:t})=>{let e;switch(t){case"us_elections_policy":e=r.jsx(j,{id:"D1Mw8a",defaultMessage:"Always verify information about voting with your state or local election authority. For more information, visit <usElectionLink></usElectionLink>.",values:{usElectionLink:()=>r.jsx("a",{target:"_blank",href:"https://canivote.org",rel:"noreferrer",className:"underline hover:no-underline",children:"canivote.org"})}});break;case"eu_elections_policy":e=r.jsx(j,{id:"Disclaimer.EUElections",defaultMessage:"Always verify information about voting with your local election authority. For more information about the EU elections, visit <euElectionLink></euElectionLink>.",values:{euElectionLink:()=>r.jsx("a",{target:"_blank",href:"https://elections.europa.eu",rel:"noreferrer",className:"underline hover:no-underline",children:"elections.europa.eu"})}});break;case"generic_elections_policy":e=r.jsx(j,{id:"Disclaimer.GenericElections",defaultMessage:"Always verify information about voting with your local election authority."});break;default:e=r.jsx(Bs,{className:"text-sm",componentOverrides:{a:n=>{const i=n,{node:s,children:o}=i,a=ke(i,["node","children"]);return r.jsx("a",U(w({},a),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:o}))}},children:t})}return r.jsx(l5,{className:"w-fit self-start",children:e})};function Ehe({message:t}){var e,n;return(n=(e=t==null?void 0:t.clientMetadata)==null?void 0:e.disclaimers)!=null&&n.length?r.jsx("div",{className:"flex flex-col gap-2",children:t.clientMetadata.disclaimers.map(s=>r.jsx(khe,{disclaimerContent:s},s))}):null}const The=t=>{var e;return{type:"table",file_id:(e=t.id)!=null?e:"",title:wG(t),file_name:t.name,context_connector_info:t.context_connector_info}};function Mhe(){return ix(os.DataAnalysisV2)}const Ahe=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),Ihe=R(()=>P(()=>import("./lwiedwr35ag0he4r.js"),__vite__mapDeps([274,1])),{loading:t=>O(t)});function DR(n){var s=n,{contextConnectorSourceUrl:t}=s,e=ke(s,["contextConnectorSourceUrl"]);const o=ne(),[a,i]=_.useState({width:0,height:0}),l=a.width/a.height,c=a.width>0&&a.height>0,d=_.useMemo(()=>{if(t!==void 0){let u=new URL(t);return u.protocol!=="https:"&&(u=void 0),u==null?void 0:u.toString()}},[t]);return _.useEffect(()=>{if(!e.src)throw new Error("ExpandableImage requires a src");const u=new Image;u.onload=()=>{i({width:u.naturalWidth,height:u.naturalHeight})},u.onerror=()=>{},u.src=e.src},[e.src]),r.jsxs(Il,{children:[r.jsx(u3,{className:e.className,disabled:!c,children:e.children}),r.jsx(jl,{children:r.jsxs(Rf,{className:"radix-state-open:animate-show fixed inset-0 z-[100] flex items-center justify-center overflow-hidden bg-black/90 dark:bg-black/80",children:[r.jsx(wd,{asChild:!0,children:r.jsx("button",{className:"absolute end-4 top-4",children:r.jsx(Ahe,{className:"h-5 w-5 text-gray-100"})})}),r.jsxs(Sd,{onEscapeKeyDown:u=>u.stopPropagation(),className:"radix-state-open:animate-contentShow shadow-xl focus:outline-hidden",children:[r.jsx("div",{className:W("relative max-h-[85vh] max-w-[90vw]"),style:{aspectRatio:l},children:r.jsx("img",{src:e.src,alt:e.alt,className:"h-full w-full object-contain"})}),d&&r.jsx("div",{className:"absolute end-14 top-4",children:r.jsx(_t,{label:o.formatMessage(jhe.openOriginal),children:r.jsx("a",{href:d,target:"_blank",rel:"noreferrer",children:r.jsx(Ihe,{className:"icon rotate-180 text-gray-100"})})})})]})]})})]})}const jhe=be({openOriginal:{id:"ExpandableImage.openOriginal",defaultMessage:"Open original image"}}),Nhe=R(()=>P(()=>import("./oda258a4iqmqo2yv.js"),__vite__mapDeps([275,1])),{loading:t=>O(t)}),Phe=R(()=>P(()=>import("./cmgiklbz2ws6dyix.js"),__vite__mapDeps([276,1])),{loading:t=>O(t)}),Rhe=R(()=>P(()=>import("./duz09euqvesjqb1t.js"),__vite__mapDeps([277,1])),{loading:t=>O(t)}),Lhe=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),zS=R(()=>P(()=>import("./g4luqq3g92oxbbim.js"),__vite__mapDeps([247,1])),{loading:t=>O(t)});function FR({fileName:t,icon:e,loadingPercentage:n,contextConnectorInfo:s,customFileDescription:o,fileNameClass:a}){var m,p;const i=ne(),l=n!==void 0&&n<100,c=rf(t),d=(m=s==null?void 0:s.syntheticExtension)!=null?m:null;function u(g){if(Ll(g))return i.formatMessage(dc.fileDescImage);switch(c){case"py":return"Python";case"js":case"jsx":return"JavaScript";case"ts":case"tsx":return"TypeScript";case"pdf":return"PDF";case"doc":case"docx":case"txt":return i.formatMessage(dc.fileDescDocument);case"zip":return i.formatMessage(dc.fileDescZip);case"xls":case"xlsx":case"csv":return i.formatMessage(dc.fileDescSpreadsheet);case"ppt":case"pptx":case"key":return i.formatMessage(dc.fileDescPresentation);default:return i.formatMessage(dc.fileDescFile)}}const f=o!=null?o:s!=null&&s.contextConnector?r.jsx(kG,{contextConnector:s.contextConnector,extension:(p=d!=null?d:c)!=null?p:null}):u(t);return r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e!=null&&e!==!1?r.jsxs("div",{className:"border-token-border-heavy relative h-10 w-10 shrink-0 overflow-hidden rounded-lg border",children:[e,l&&r.jsx(qS,{percentage:n,blurBackground:!0})]}):r.jsx("div",{className:"relative h-10 w-10 shrink-0 overflow-hidden rounded-lg",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:W("inset-0",BR),style:{backgroundColor:UR(t,s==null?void 0:s.contextConnector)}}),r.jsx(qS,{percentage:s?null:n})]}):r.jsx(c5,{filename:t,contextConnectorInfo:s})}),r.jsxs("div",{className:"overflow-hidden",children:[r.jsx("div",{className:W("truncate",a!=null?a:"font-semibold"),children:EG(t,d)}),r.jsx("div",{className:"text-token-text-secondary truncate",children:f})]})]})}function qS({percentage:t,blurBackground:e=!1}){return r.jsx("div",{className:W("absolute inset-0 flex items-center justify-center text-white",e&&"bg-black/5 backdrop-blur-xs"),children:t?r.jsx(fd,{percentage:t,className:"h-6 w-6"}):r.jsx(_s,{className:"text-token-text-secondary h-6 w-6"})})}const BR="h-10 w-10 shrink-0";function c5({filename:t,contextConnectorInfo:e,className:n=BR,glyphClassName:s="h-5 w-5"}){var l,c,d;if(e)return r.jsx("div",{className:W("flex items-center justify-center rounded-lg",n),style:{backgroundColor:UR(t,e.contextConnector)},children:r.jsx(TG,{contextConnector:e.contextConnector,extension:(c=(l=e.syntheticExtension)!=null?l:rf(t))!=null?c:null,className:W(s,"text-white")})});const o=(d=rf(t))!=null?d:null,{BgColor:a,Icon:i}=$R(o);return r.jsx("div",{className:W("flex items-center justify-center rounded-lg",n),style:{backgroundColor:a},children:r.jsx(i,{className:W(s,"text-white")})})}function UR(t,e){var s;if(e)return Ys.gray.solid[50];const n=(s=rf(t))!=null?s:null;return $R(n).BgColor}function $R(t){const e={purple:Ys.purple[400],blue:Ys.blue[400],green:Ys.green[400],red:Ys.red[400],gray:Ys.gray.solid[400]},n=(t!=null?t:"").toLowerCase();return n==="zip"?{BgColor:e.purple,Icon:Nhe}:n==="pdf"?{BgColor:e.red,Icon:zS}:n==="xls"||n==="xlsx"||n==="csv"?{BgColor:e.green,Icon:Phe}:n==="doc"||n==="docx"||n==="txt"||n==="md"||n==="markdown"?{BgColor:e.blue,Icon:Lhe}:n==="png"||n==="jpg"||n==="jpeg"||n==="gif"||n==="webp"?{BgColor:e.gray,Icon:Rhe}:{BgColor:e.gray,Icon:zS}}const dc=be({fileDescDocument:{id:"FileDataView.fileDescDocument",defaultMessage:"Document"},fileDescZip:{id:"FileDataView.fileDescZip",defaultMessage:"Zip Archive"},fileDescSpreadsheet:{id:"FileDataView.fileDescSpreadsheet",defaultMessage:"Spreadsheet"},fileDescPresentation:{id:"FileDataView.fileDescPresentation",defaultMessage:"Presentation"},fileDescImage:{id:"FileDataView.fileDescImage",defaultMessage:"Image"},fileDescFile:{id:"FileDataView.fileDescFile",defaultMessage:"File"}}),Ohe=R(()=>P(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([52,1])),{loading:t=>O(t)}),Dhe=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)}),Fhe=R(()=>P(()=>import("./duz09euqvesjqb1t.js"),__vite__mapDeps([277,1])),{loading:t=>O(t)}),Bhe=R(()=>P(()=>import("./ldblp2qq467fzutv.js"),__vite__mapDeps([166,1])),{loading:t=>O(t)}),Uhe=R(()=>P(()=>import("./m6idklazvjc7d344.js"),__vite__mapDeps([278,1])),{loading:t=>O(t)}),$he=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),Vhe=R(()=>P(()=>Promise.resolve().then(()=>c4),void 0),{loading:t=>O(t)}),Hhe=R(()=>P(()=>import("./fwijeax9pw5s8qxf.js"),__vite__mapDeps([279,1,10,11])).then(t=>t.FilePreviewModal));function di(t){return typeof window>"u"?!1:typeof t!="string"}function Ghe({downloadLink:t}){const e=_.useCallback(()=>{var s;const n=document.createElement("a");n.href=t,n.setAttribute("download",(s=t.split("/").pop())!=null?s:"downloaded_file"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},[t]);return r.jsx("button",{onClick:e,children:r.jsx(Uhe,{className:"icon-sm m-1.5"})})}function YS({onClick:t,ariaLabel:e,large:n=!1,children:s}){return r.jsx("button",{onClick:t,"aria-label":e,className:W("transition-colors","flex h-4 w-4 items-center justify-center rounded-full","border-[rgba(0,0,0,0.1)] bg-black text-white","dark:border-[rgba(255,255,255,0.1)] dark:bg-white dark:text-black",n&&"h-6 w-6"),children:s})}function VR({onRemoveFileClick:t,onImageEditClick:e,useLargeImageThumbnailStyle:n,file:s,fileId:o,gizmoId:a,loadingPercentage:i,contextConnectorInfo:l,width:c="normal",alwaysShowData:d=!1,showDownloadButton:u=!1,downloadLink:f="",borderRadius:m="xl",className:p,isUserTurn:g=!1,clientThreadId:h}){const x=V(),v=ne(),y=i!==void 0&&i<100,b=di(s)?s.name:s,C=di(s)&&(s==null?void 0:s.type.startsWith("image/"))||Ll(b)&&o!=null,S=C&&r.jsx(zhe,{file:s,fileId:o,gizmoId:a,contextConnectorInfo:l}),k=_.useContext(qh),E=(k==null?void 0:k.serverSharedThreadId)&&g,T=MG(),M=C||l==null?void 0:l.sourceUrl,A=!(l!=null&&l.sourceUrl)&&!S?b:void 0,N=di(s)&&(s==null?void 0:s.type)==="text/plain"&&!d&&!l&&y8(x),L=_.useCallback(async()=>{if(!y&&o)if(rf(b)==="pdf")lt(x,Hhe,{gizmoId:a,fileId:o,fileName:b});else{const H=await Lh(o,a,!1,h!=null?At(h):void 0,!1);H.status===Oh.Success?window.open(H.download_url,"_blank"):Re.addError("Failed to get download link for file: ".concat(b))}},[b,x,o,h,a,y]),D=qhe({file:s,isExpandableTextFile:N}),F=!t;if(E){if(!C||T()){const H=C?r.jsx(Fhe,{className:"icon-sm"}):r.jsx(Bhe,{className:"icon-sm"}),z=C?v.formatMessage(Pu.uploadedImage):v.formatMessage(Pu.uploadedFile);return r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-2",children:[H,r.jsx("span",{children:z})]})}if(C)return null}const $=r.jsxs("div",{className:W("p-2",c==="wide"?"w-80":"w-60"),children:[r.jsx(FR,{fileName:b,icon:S,loadingPercentage:i,contextConnectorInfo:l}),u&&f!==""&&r.jsx("div",{className:"absolute end-1 top-1",children:r.jsx(Ghe,{downloadLink:f})})]});return r.jsxs("div",{className:"group text-token-text-primary relative inline-block text-sm",children:[r.jsx(Khe,{showTooltip:F,sourceUrl:M,className:W("border-token-border-default bg-primary relative overflow-hidden border",m==="xl"&&"rounded-xl",m==="2xl"&&"rounded-2xl",p),tooltipContent:A,onClick:L,children:C&&!d?r.jsxs("div",{className:W("h-14.5 w-14.5",n&&"tall:h-36 tall:w-36"),children:[S,y&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:r.jsx(fd,{percentage:i,className:"h-6 w-6"})})]}):N&&(D!=null&&D.length)?r.jsx(Yhe,{trigger:$,content:D}):$}),r.jsxs("div",{className:"absolute end-1.5 top-1.5 inline-flex gap-1",children:[n&&e&&r.jsx(YS,{onClick:H=>{H.stopPropagation(),H.preventDefault(),e()},ariaLabel:v.formatMessage(Pu.editImage),large:n,children:r.jsx(Ohe,{"aria-label":"",className:"icon-sm"})}),t!=null&&r.jsx(YS,{onClick:t,ariaLabel:v.formatMessage(Pu.removeFile),large:n,children:r.jsx(Vhe,{"aria-label":"",className:"icon-sm"})})]})]})}var _E;const HR=mt.span(_E||(_E=ct(["flex items-center h-full w-full justify-center bg-gray-500 dark:bg-gray-700 bg-cover bg-center text-white"])));function Whe(){return r.jsx(HR,{})}function zhe({file:t,fileId:e,gizmoId:n,contextConnectorInfo:s}){const o=ne(),a=di(t)?t.name:t,i=GR(di(t)?t:null,a,e,n,s);return i==null?r.jsx(Whe,{}):r.jsx(DR,{src:i,alt:o.formatMessage(Pu.userUploadedImage),contextConnectorSourceUrl:s==null?void 0:s.sourceUrl,className:"h-full w-full",children:r.jsx(HR,{style:{backgroundImage:"url(".concat(i,")")}})})}function qhe({file:t,isExpandableTextFile:e}){const[n,s]=_.useState(void 0);return _.useEffect(()=>{if(e&&di(t)){const o=new FileReader;o.addEventListener("load",()=>{const a=o.result;s(typeof a=="string"?a:void 0)}),o.readAsText(t)}},[e,t]),n}function Yhe({trigger:t,content:e}){return r.jsxs(Il,{children:[r.jsx(u3,{className:"h-full w-full text-start",children:t}),r.jsx(jl,{children:r.jsxs(Rf,{className:"radix-state-open:animate-show fixed inset-0 flex items-center justify-center overflow-hidden bg-black/90 dark:bg-black/80",children:[r.jsx(wd,{asChild:!0,children:r.jsx("button",{className:"absolute end-4 top-4",children:r.jsx($he,{className:"h-5 w-5 text-gray-100"})})}),r.jsx(Sd,{className:"radix-state-open:animate-contentShow shadow-xl focus:outline-hidden",children:r.jsx("div",{className:W("relative max-h-[85vh] max-w-[90vw] overflow-scroll bg-white p-10 dark:bg-gray-800"),children:r.jsx(Bs,{children:e})})})]})})]})}const fp=new Map,Zhe=100;function GR(t,e,n,s,o,a=!1){const[i,l]=_.useState(void 0),c=V(),d=Ln(c).flags,u=d==null?void 0:d.includes(ag.NoAuthEnableFileUploads);return _.useEffect(()=>{if(!a&&o&&n!=null)ZS({fileId:n,gizmoId:s,setUri:l});else if(!o&&(t!=null&&t.type.startsWith("image/")))if(u){const f=URL.createObjectURL(t);return l(f),()=>{URL.revokeObjectURL(f)}}else{const f=new FileReader;f.addEventListener("load",()=>{const m=f.result;l(typeof m=="string"?m:void 0)}),f.readAsDataURL(t)}else!a&&e&&Ll(e)&&n!=null?ZS({fileId:n,gizmoId:s,setUri:l}):l(void 0)},[t,e,n,s,o,a,u]),i}async function ZS({fileId:t,gizmoId:e,setUri:n}){try{const s=fp.get(t);if(s){n(s);return}const o=await Lh(t,e);o.status===Oh.Success?(fp.size>Zhe&&fp.clear(),fp.set(t,o.download_url),n(o.download_url)):Re.addError("Error fetching URL for file ".concat(t,": ").concat(o.status))}catch(s){Re.addError(new Error("Error fetching URL for file ".concat(t,")"),{cause:s}))}}const Pu=be({removeFile:{id:"FileTile.removeFile",defaultMessage:"Remove file"},editImage:{id:"FileTile.editImage",defaultMessage:"Edit image"},userUploadedImage:{id:"FileTile.userUploadedImage",defaultMessage:"User uploaded image"},uploadedImage:{id:"FileTile.uploadedImage",defaultMessage:"Uploaded an image"},uploadedFile:{id:"FileTile.uploadedFile",defaultMessage:"Uploaded a file"}});function Khe({showTooltip:t,sourceUrl:e,children:n,className:s,onClick:o,tooltipContent:a}){var d;const i=ae(Dh);if(!e&&!a)return r.jsx("div",{className:s,children:n});const l=r.jsx("a",{href:e,target:"_blank",rel:"noreferrer",onClick:o,className:"cursor-pointer",children:r.jsx("div",{className:s,children:n})});if(!t||!i)return l;const c=(d=a!=null?a:e)!=null?d:"";return r.jsx(_t,{wide:!0,interactive:!0,label:r.jsxs("a",{href:e,target:"_blank",className:"flex w-full items-center gap-2",rel:"noreferrer",children:[r.jsx("p",{className:"line-clamp-1 flex-1 text-ellipsis",children:Qhe(c)}),e&&r.jsx(Dhe,{className:"icon-sm"})]}),side:"top",children:l})}function Qhe(t){return t.split("").join("")}const Jhe=_.createContext({isEmbeddedInFocusedView:!1});function P1(){return _.useContext(Jhe).isEmbeddedInFocusedView}const Xhe="GPT-4o with scheduled tasks";function WR({featureType:t,isUserTurn:e=!1,clientThreadId:n}){const s=V(),o=yt(s,n),a=ye(s,"3612584454"),i=e1e(),l=ye(s,"891514942"),c=ae(()=>bn(o).id),d=!t1e({featureType:t,currentModelId:c,conversation:o});if(!(a&&i||l&&d))return null;const m=n1e({featureType:t,unsupportedMessageReason:i?"rateLimit":"modelPicker",currentModelId:c});return r.jsx("div",{className:"flex ".concat(e?"justify-end":"justify-start"),children:m})}function e1e(){var a;const t=V(),e=et(t),n=(a=e==null?void 0:e.isFree())!=null?a:!1,o=Ph().some(i=>i.model_slug==="gpt-4o");return n&&o}function t1e({featureType:t,currentModelId:e,conversation:n}){const s=ae(()=>ta(n)),o=V(),a=et(o);if(a==null?void 0:a.isFree())return!0;{const l=s==null?void 0:s.categories.find(d=>d.defaultModel===e);return l?!!(l==null?void 0:l.supportedFeatures.includes(t)):!0}}function n1e({featureType:t,unsupportedMessageReason:e,currentModelId:n=""}){const s=n===AG?Xhe:n,o=ne();let a=null;switch(e){case"rateLimit":switch(t){case ds.ATTACHMENT:a=o.formatMessage(P0.file);break;case ds.IMAGE:a=o.formatMessage(P0.image);break;case ds.CANVAS_SUPPORTED:a=o.formatMessage(P0.canvas);break;default:return null}break;case"modelPicker":switch(t){case ds.ATTACHMENT:a=o.formatMessage(R0.file,{modelDisplayName:s});break;case ds.IMAGE:a=o.formatMessage(R0.image,{modelDisplayName:s});break;case ds.CANVAS_SUPPORTED:a=o.formatMessage(R0.canvas,{modelDisplayName:s});break;default:return null}break}return r.jsx("span",{className:"text-opacity-80 text-xs text-yellow-500",children:a})}const P0=be({canvas:{id:"featureUnsupportedWarning.canvas",defaultMessage:"Document editing temporarily unavailable"},file:{id:"featureUnsupportedWarning.file",defaultMessage:"File analysis temporarily unavailable"},image:{id:"featureUnsupportedWarning.image",defaultMessage:"Image analysis temporarily unavailable"}}),R0=be({canvas:{id:"modelPickerUnsupportedWarning.canvas",defaultMessage:"{modelDisplayName} cannot edit documents"},file:{id:"modelPickerUnsupportedWarning.file",defaultMessage:"{modelDisplayName} cannot analyze files"},image:{id:"modelPickerUnsupportedWarning.image",defaultMessage:"{modelDisplayName} cannot analyze images"}}),s1e=R(()=>P(()=>import("./hipkq6lnzcpwyzq7.js").then(t=>t.A),__vite__mapDeps([280,1,10,11,113,114,281,228,46,282,283])).then(t=>t.default));var xE;const o1e=mt.div(xE||(xE=ct(["flex gap-2 flex-wrap mt-1 max-w-[80%] justify-end"])));var yE;const a1e=mt.div(yE||(yE=ct(["flex flex-col gap-2"]))),KZe=({parts:t,attachments:e,isUserTurn:n,conversation:s})=>{const o=Mo(),a=Mhe(),i=pr.getImageAssetPointersFromParts(t),l=new Set(i.map(p=>wo(p.asset_pointer))),d=P1()||o,u=(e!=null?e:[]).filter(p=>IG(p.name)),f=(e!=null?e:[]).filter(p=>p.id==null||l.has(p.id)?!1:a?!u.includes(p):!0);return(a?(f.length>0||u.length>0)&&n:f.length>0&&n)?r.jsxs(r.Fragment,{children:[r.jsx(o1e,{children:f.map(p=>r.jsx(VR,{file:p.name,fileId:p.id,contextConnectorInfo:jG(p.context_connector_info),width:o?"normal":"wide",alwaysShowData:!0,isUserTurn:n,clientThreadId:s.id},p.id))}),r.jsx(WR,{featureType:ds.ATTACHMENT,isUserTurn:n,clientThreadId:s.id}),a&&r.jsx(a1e,{className:W(!d&&!0&&"w-[80%]"),children:u.map(p=>r.jsx(s1e,{clientThreadId:s.id,visualization:The(p)},p.id))})]}):null},r1e=t=>{"use forget";var x;const e=G.c(19);let n,s,o,a,i;e[0]!==t?(x=t,{label:s,icon:n,as:a,isUserTurn:i}=x,o=ke(x,["label","icon","as","isUserTurn"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5]);const l=a===void 0?"div":a,c=i===void 0?!0:i,d=l,u=l==="button"&&"hover:text-token-text-primary",f=c?"mt-1 justify-end":"mt-2";let m;e[6]!==u||e[7]!==f?(m=W("text-token-text-tertiary mx-2 mb-1 flex items-start gap-1.5 text-sm font-normal focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-current",u,f),e[6]=u,e[7]=f,e[8]=m):m=e[8];let p;e[9]!==n?(p=r.jsx("span",{"aria-hidden":"true",className:"pointer-events-none",children:n}),e[9]=n,e[10]=p):p=e[10];let g;e[11]!==s?(g=r.jsx("p",{className:"line-clamp-3",children:s}),e[11]=s,e[12]=g):g=e[12];let h;return e[13]!==d||e[14]!==o||e[15]!==m||e[16]!==p||e[17]!==g?(h=r.jsxs(d,U(w({className:m},o),{children:[p,g]})),e[13]=d,e[14]=o,e[15]=m,e[16]=p,e[17]=g,e[18]=h):h=e[18],h},i1e=v8(()=>({images:new Set})),l1e=t=>G3(i1e,t);function c1e(){return l1e(t=>t.images)}function QZe({messages:t}){const e=ZX(t),n=c1e();return e.length===0?null:r.jsx("div",{className:W({"mb-2":!0,"grid grid-flow-col gap-3":e.length>1,"w-1/3":e.length===1}),children:e.filter(({contentUrl:s})=>n.has(s)).map((s,o)=>r.jsx("a",{href:s.hostPageUrl,target:"_blank",rel:"noreferrer",children:r.jsx("img",{src:s.contentUrl,alt:s.name,className:"aspect-square rounded-xl object-cover"})},o))})}const d1e="_slideUp_1kuxv_21",JZe={slideUp:d1e};function zl({axis:t,debounce:e,initialSize:n=!0,onChange:s,target:o}){if(!o)return;let a=new AbortController,i=null,l=null,c=n;const d=new ResizeObserver(f=>{f.forEach(m=>{const{width:p,height:g}=u1e(m);let h=!1;if(t==="width"){const x=(c||i!=null)&&i!==p;i=p,x&&(h=!0)}else if(t==="height"){const x=(c||l!=null)&&l!==g;l=g,x&&(h=!0)}else if(t==="both"){const x=(c||i!=null)&&i!==p,v=(c||l!=null)&&l!==g;i=p,l=g,(x||v)&&(h=!0)}if(c=!1,h)if(!e)s({width:p,height:g,previousWidth:i,previousHeight:l},m);else{a.abort(),a=new AbortController;const x=a.signal;requestAnimationFrame(()=>{x.aborted||s({width:p,height:g,previousWidth:i,previousHeight:l},m)})}})});function u(){try{d.disconnect()}catch(f){}}return d.observe(o),u}function u1e(t){let e,n;if(t.borderBoxSize){const s=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=s.inlineSize,n=s.blockSize}else e=t.contentRect.width,n=t.contentRect.height;return{width:e,height:n}}function XZe(t){return e=>zl(U(w({},t),{target:e}))}function eKe({containsImagesOrAttachments:t,isMaxWidthMessage:e=!1,children:n}){const s=_.useRef(!1);return r.jsx("div",{className:W("user-message-bubble-color relative rounded-[18px] px-4 py-1.5 data-[multiline]:py-3",t&&"rounded-se-lg",e?"w-full":"max-w-[var(--user-chat-width,70%)]"),ref:o=>zl({axis:"height",target:o,onChange:({height:a})=>{if(o){const i=parseFloat(getComputedStyle(document.documentElement).fontSize),l=2*(s.current?12:6);s.current=a>1.5*i+l,ar(o,"data-multiline",s.current)}}}),children:n})}function f1e(){return r.jsx(Xe.div,{className:"absolute flex h-8 w-3 origin-center items-center justify-center",initial:{scale:1,opacity:1},animate:{scale:0,opacity:0},transition:{ease:"easeInOut",duration:.2},children:r.jsx("div",{className:"bg-token-text-primary h-3 w-3 rounded-full"})})}function m1e(t){return rt(p1e(t))}function p1e(t){return es({enabled:t!=null,queryKey:["imageData",t],queryFn:()=>new Promise((e,n)=>{const s=new Image;s.onload=()=>{e(s)},s.onerror=n,s.src=t})})}function ks(t){"use forget";const e=G.c(14),{url:n,size:s,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,applySizeToImg:d,onLoad:u,onError:f}=t,m=s===void 0?16:s,p=d===void 0?!0:d;let g;e[0]!==m||e[1]!==n?(g=b1e(n,m),e[0]=m,e[1]=n,e[2]=g):g=e[2];const h=g;if(h==null)return a!=null?a:null;let x;return e[3]!==p||e[4]!==i||e[5]!==l||e[6]!==a||e[7]!==h||e[8]!==o||e[9]!==f||e[10]!==u||e[11]!==c||e[12]!==m?(x=o!=null?r.jsx(g1e,{faviconUrl:h,size:m,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,onLoad:u,onError:f}):r.jsx(zR,{faviconUrl:h,size:p?m:void 0,className:i,onLoad:u,onError:f}),e[3]=p,e[4]=i,e[5]=l,e[6]=a,e[7]=h,e[8]=o,e[9]=f,e[10]=u,e[11]=c,e[12]=m,e[13]=x):x=e[13],x}function g1e(t){"use forget";const e=G.c(13),{faviconUrl:n,size:s,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,onLoad:d,onError:u}=t,{data:f,isLoading:m}=m1e(n),p=f&&Math.min(f.width,f.height);if(!m&&(p==null||p<o))return a!=null?a:null;let g;e[0]!==l?(g=W("relative inline-block shrink-0",l),e[0]=l,e[1]=g):g=e[1];let h;e[2]!==i||e[3]!==n||e[4]!==m||e[5]!==u||e[6]!==d||e[7]!==c||e[8]!==s?(h=m?c?r.jsx(h1e,{className:W(i,"duration-200 motion-safe:transition-opacity",!m&&"pointer-events-none opacity-0")}):r.jsx("div",{className:i}):r.jsx(zR,{faviconUrl:n,size:s,className:W(i,"duration-200 motion-safe:transition-opacity",m?"pointer-events-none opacity-0":"opacity-100"),onLoad:d,onError:u}),e[2]=i,e[3]=n,e[4]=m,e[5]=u,e[6]=d,e[7]=c,e[8]=s,e[9]=h):h=e[9];let x;return e[10]!==g||e[11]!==h?(x=r.jsx("div",{className:g,children:h}),e[10]=g,e[11]=h,e[12]=x):x=e[12],x}function zR(t){"use forget";const e=G.c(7),{faviconUrl:n,size:s,className:o,onLoad:a,onError:i}=t,l=s!=null?s:"auto",c=s!=null?s:"auto";let d;return e[0]!==o||e[1]!==n||e[2]!==i||e[3]!==a||e[4]!==l||e[5]!==c?(d=r.jsx("img",{src:n,alt:"",width:l,height:c,className:o,onLoad:a,onError:i}),e[0]=o,e[1]=n,e[2]=i,e[3]=a,e[4]=l,e[5]=c,e[6]=d):d=e[6],d}function h1e({className:t,children:e}){return r.jsx("div",{"aria-busy":!0,className:W("bg-token-bg-tertiary flex animate-pulse items-center justify-center rounded-full",t),children:e})}const _1e="http://files.openai.com",x1e="https://openai.com",y1e="https://images.openai.com";function v1e(t){const e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")return _1e;const n=e.origin;return n===y1e?x1e:n}function b1e(t,e){if(!t)return null;try{const n=v1e(t);return"https://www.google.com/s2/favicons?domain=".concat(n,"&sz=").concat(e)}catch(n){return Re.addAction("Invalid favicon url",{error:n,url:t}),null}}const qx={favicons:[]};function C1e(t,e){const n=new Set,s=[];for(const o of[...t,...e])n.has(o.url)||(s.push(o),n.add(o.url));return s}const S1e=t=>({entries:{},updateFromEvent:(e,n)=>t(s=>{var i,l;const o=(i=s.entries[e])!=null?i:qx,a=U(w({},o),{favicons:C1e(o.favicons,(l=n.data.favicons)!=null?l:[])});return{entries:U(w({},s.entries),{[e]:a})}})}),KS=t3()(S1e,El);function w1e(t){const e=KS(s=>{var o,a;return t==null?qx.favicons:(a=(o=s.entries[t])==null?void 0:o.favicons)!=null?a:qx.favicons}),n=_.useCallback(({ctx:s,profiler:o})=>{if(!t||t.trim().length===0||!Sr(s).checkGate("948657827",{disableExposureLog:!0}))return;(async()=>{var u,f,m;o==null||o.logTimingOnce("fetch_favicons_stream_called");const l=mg("".concat(Jc,"/favicons"),{ctx:s,method:"POST",headers:w({},s1()),body:{query:t}});let c=!1,d=!1;try{for(var p=jo(l),g,h,x;g=!(h=await p.next()).done;g=!1){const v=h.value;d||(d=!0,o==null||o.logTimingOnce("fetch_favicons_stream_first_event"));const y=v;y.event==="favicons"&&(KS.getState().updateFromEvent(t,{event:"favicons",data:{favicons:(u=y.data.favicons)!=null?u:[]}}),!c&&((m=(f=y.data.favicons)==null?void 0:f.length)!=null?m:0)>0&&(c=!0,o==null||o.logTimingOnce("fetch_favicons_first_link_fetched_client")))}}catch(h){x=[h]}finally{try{g&&(h=p.return)&&await h.call(p)}finally{if(x)throw x[0]}}})().catch(()=>{})},[t]);return{favicons:e,load:n}}const k1e=_.createContext(!1);var qR=(t=>(t.Sources="sources",t.Images="images",t))(qR||{}),d5=(t=>(t.Links="links",t.Citations="citations",t.SearchResults="search_results",t))(d5||{}),L0,QS;function YR(){if(QS)return L0;QS=1;function t(e,n,s){var o=-1,a=e.length;n<0&&(n=-n>a?0:a+n),s=s>a?a:s,s<0&&(s+=a),a=n>s?0:s-n>>>0,n>>>=0;for(var i=Array(a);++o<a;)i[o]=e[o+n];return i}return L0=t,L0}var O0,JS;function E1e(){if(JS)return O0;JS=1;var t=YR(),e=V3(),n=b8(),s=Math.ceil,o=Math.max;function a(i,l,c){(c?e(i,l,c):l===void 0)?l=1:l=o(n(l),0);var d=i==null?0:i.length;if(!d||l<1)return[];for(var u=0,f=0,m=Array(s(d/l));u<d;)m[f++]=t(i,u,u+=l);return m}return O0=a,O0}var T1e=E1e();const M1e=Gn(T1e),A1e=R(()=>P(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([144,1])),{loading:t=>O(t)}),I1e=R(()=>P(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([145,1])),{loading:t=>O(t)}),XS=3;function j1e({navigation:t,trackContentReferenceEvent:e}){const[n,s]=_.useState(!1),[o,a]=_.useState(0),i=t.domains.filter(m=>m.url);_.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:i.map(m=>m.url).join(",")})},[i]);const l=Ed(),c=P1e(i.length,!l),d=n?M1e(i,c):[i.slice(0,XS)];function u(){return i.length<=XS?null:o===0&&!n?r.jsx(D0,{onClick:()=>s(!0),className:"shrink-0 text-sm whitespace-nowrap",children:r.jsx(j,{id:"B5xwY8",defaultMessage:"More links"})}):r.jsx(D0,{onClick:()=>a(o-1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o===0,children:r.jsx(j,{id:"Q0o6pZ",defaultMessage:"{icon} Previous",values:{icon:r.jsx(I1e,{className:"icon-sm -ms-1 -me-1"})}})})}function f(){return n?r.jsx(D0,{onClick:()=>a(o+1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o>=d.length-1,children:r.jsx(j,{id:"N4c5Xd",defaultMessage:"Next {icon}",values:{icon:r.jsx(A1e,{className:"icon-sm -ms-1 -me-1"})}})}):null}return r.jsxs("div",{className:"not-prose mb-3",children:[r.jsx(Xe.div,{initial:!1,animate:{maxHeight:n?1e3:250,opacity:1},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:r.jsx("div",{className:"flex transition-transform",style:{transform:"translateX(-".concat(o*100,"%)")},children:d.map((m,p)=>r.jsx("div",{className:"flex flex-[0_0_100%] shrink-0 flex-col gap-6",children:m.map((g,h)=>r.jsx(N1e,{navigationDomain:g,trackContentReferenceEvent:e,analyticsMetadata:{section_index:h}},g.url))},p))})}),r.jsx("div",{className:"mt-6 flex flex-col gap-6",children:r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-3",children:[u(),r.jsx("div",{className:"bg-token-bg-tertiary h-[1px] w-full flex-1"}),f()]})})]})}function N1e({navigationDomain:t,trackContentReferenceEvent:e,analyticsMetadata:n}){var s;return _.useEffect(()=>{e("link_action",null,"navigation",{url:t.url,title:t.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:n.section_index})},[]),r.jsxs(no,{className:"flex flex-col hover:underline",href:t.url,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ks,{url:t.url,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),r.jsx("div",{className:"text-token-text-secondary text-xs",children:(s=t.attribution)!=null?s:t.subtitle})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-token-text-primary text-sm",children:t.title}),t.snippet&&r.jsx("div",{className:"text-token-text-secondary line-clamp-1 w-full text-sm",children:t.snippet})]})]})}function P1e(t,e){const n=e?[5,6]:[6,7,8];let s=n[0],o=-1;for(let a=0;a<n.length;a++){const i=n[a],l=t%i;if(l===0)return i;l>o&&(o=l,s=i)}return s}var vE;const D0=mt.button(vE||(vE=ct(["\n    shrink-0\n    text-sm\n    whitespace-nowrap\n    flex\n    items-center\n    gap-1\n    text-token-text-secondary\n    hover:text-token-text-primary\n    disabled:opacity-50\n    disabled:hover:text-token-text-secondary\n  "]))),R1e=_.createContext(null),F0=3,L1e=3;function O1e({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n}){const s=V(),o=ye(s,"4111922784"),a=_.useContext(R1e)==="user-query-with-navlink",i=_.useContext(k1e);return r.jsx("div",{className:W({hidden:i&&a}),children:o?r.jsx(j1e,{navigation:t,trackContentReferenceEvent:n}):r.jsx(D1e,{navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n})})}function D1e({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n}){const s=t.domains.filter(i=>i.url);_.useEffect(()=>{n("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:s.map(i=>i.url).join(",")})},[s]);const o=s.slice(0,F0),a=s.slice(F0,F0+L1e);return r.jsxs("div",{className:"not-prose mb-3 flex gap-2",children:[o.map((i,l)=>r.jsx(B1e,{isPrimaryDomain:l===0,isFistLineDomain:!0,navigationDomain:i,trackContentReferenceEvent:n,analyticsMetadata:{section_index:l}},i.url)),a.length>0&&r.jsx(F1e,{onShowSearchResults:e,trackContentReferenceEvent:n,moreDomains:a})]})}const F1e=({onShowSearchResults:t,trackContentReferenceEvent:e,moreDomains:n})=>r.jsx(ZR,{component:"div",className:"group flex w-28 cursor-pointer",onClick:()=>{e("Search Content Reference Clicked","search_content_reference_clicked","navigation",{sidebar:"sidebar"}),t(qR.Sources,d5.Links)},children:r.jsxs("div",{className:"flex min-w-0 flex-col",children:[r.jsx("div",{className:"flex items-center",children:n.map((s,o)=>r.jsx("div",{style:{zIndex:n.length-o},className:"ms-[-6px] first:ms-0",children:r.jsx("div",{className:W("flex h-4 w-4 items-center overflow-hidden rounded-full","border-token-bg-primary bg-token-bg-primary group-hover:border-token-bg-tertiary border-2"),children:r.jsx(ks,{url:s.url,size:32,minSize:20,className:"icon-xs rounded-full",showLoadingAnimation:!0})},s.url)},s.url))}),r.jsx("div",{className:"text-token-text-primary flex text-sm font-semibold",children:r.jsx("span",{className:"truncate",children:r.jsx(j,{id:"B5xwY8",defaultMessage:"More links"})})})]})}),B1e=({isPrimaryDomain:t,isFistLineDomain:e,navigationDomain:n,trackContentReferenceEvent:s,analyticsMetadata:o})=>{var a;return _.useEffect(()=>{s("link_action",null,"navigation",{url:n.url,title:n.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:o.section_index})},[]),r.jsx("div",{className:"min-w-0 flex-1",children:r.jsx(U1e,{isFistLineDomain:e,isPrimaryDomain:t,title:n.title,subtitle:(a=n.subtitle)!=null?a:void 0,url:n.url,domain:n.domain,subDomains:n.sub_domains,trackContentReferenceEvent:s,analyticsMetadata:o})})},U1e=({isFistLineDomain:t,title:e,subtitle:n,url:s,trackContentReferenceEvent:o,analyticsMetadata:a})=>{const i={url:s,title:e,link_type:"card",section:"fast_nav",section_location:"response",section_index:a.section_index},l=yn()?"_self":"_blank";return r.jsxs(ZR,{component:no,href:s,target:l,onClick:()=>o("link_action",null,"navigation",U(w({},i),{action:"click"})),onMouseEnter:()=>{o("link_action",null,"navigation",U(w({},i),{action:"hover"}))},className:"flex flex-col gap-[2px]",children:[r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-[6px] text-xs",children:[r.jsx(ks,{url:s,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),r.jsx("div",{className:"truncate",children:n})]}),r.jsx("div",{className:W("text-token-text-primary flex items-center font-medium",t?"text-sm":"text-xs"),children:r.jsx("span",{className:"truncate",children:e})})]})},ZR=o=>{var a=o,{component:t,children:e,className:n}=a,s=ke(a,["component","children","className"]);return r.jsx(t,U(w({},s),{className:W("hover:bg-token-bg-tertiary border-token-border-light rounded-2xl border px-4 py-3",n),children:e}))},$1e=(t,e)=>t==="Search Content Reference Shown"||t==="Contextual Answers Content Reference Shown"||t==="Search Content Reference Failed"||t==="link_action"&&(e==null?void 0:e.action)==="show"||t==="product_offer"&&(e==null?void 0:e.action)==="shown",V1e=(t,e,n)=>w(U(w({},En(e)),{type:t}),n?G1e(n):{}),H1e=["section_index","product_index","offer_index"],G1e=t=>Object.fromEntries(Object.entries(t!=null?t:{}).map(([e,n])=>[e,H1e.includes(e)&&n!==void 0?(Number(n)+1).toString():String(n)]));function tKe(t){var s;const e=(s=_.useContext(qh))==null?void 0:s.serverSharedThreadId;return _.useMemo(()=>{const[o,a]=t.split("?"),i=new URLSearchParams(a!=null?a:"");return e&&i.set("shared_conversation_id",e),i.size?o+"?"+i.toString():o},[t,e])}function W1e(t){const e=_.useRef(new Set);return _.useCallback((n,s,o,a,i)=>{if(t&&t.messageId&&z1e(t.messageId)){const l=V1e(o,t,a),c="".concat(n,"-").concat(JSON.stringify(l));(!e.current.has(c)||!$1e(n,a))&&(e.current.add(c),s?B.logEventWithStatsig(n,s,l):B.logEvent(n,l),i==null||i(t))}},[t])}const z1e=t=>!t.startsWith(NG)&&!t.startsWith(e3),KR=R(()=>P(()=>import("./gdatzb2jbe3uxroz.js"),__vite__mapDeps([284,1])).then(t=>t.QRCodeSVG)),vn=({onDismiss:t,title:e,content:n,customCtas:s,onPrimaryCtaClick:o,primaryCtaText:a,primaryCtaColor:i,primaryCtaClassName:l,secondaryCtaColor:c,primaryCtaQrLink:d,onPrimaryCtaQrClick:u,onSecondaryCtaClick:f,onDangerCtaClick:m,secondaryCtaText:p,dangerCtaText:g,icon:h,isElevated:x=!0,isPrimaryCtaDisabled:v=!1,isSecondaryCtaDisabled:y=!1,isDangerCtaDisabled:b=!1,type:C="normal",className:S,contentClassName:k,closeButtonContainerClassName:E,verticalCta:T=!0})=>{const M=P1(),A=W("m-w-fit flex shrink-0 gap-2 pb-1 md:pb-0",T&&"flex-col"),I=s?r.jsx("div",{className:A,children:s}):(a||p||g)&&r.jsxs("div",{className:A,children:[a&&r.jsx(_e,{onClick:o,color:i!=null?i:"primary",className:W("shrink-0",l),disabled:v,children:a}),p&&r.jsx(_e,{onClick:f,color:c!=null?c:"secondary",className:"shrink-0",disabled:y,children:p}),g&&r.jsx(_e,{onClick:m,color:"danger-outline",className:"shrink-0",disabled:b,children:g})]});return r.jsxs("aside",{className:W("flex w-full items-start gap-4 rounded-3xl border py-4 ps-5 pe-3 text-sm [text-wrap:pretty] lg:mx-auto dark:border-transparent",x&&"shadow-xxs",M?"flex-col":"md:items-center",C==="error"?"border-token-surface-error/15 text-token-text-error dark:bg-token-surface-error/5 bg-red-50":C==="info"?"border-token-border-light bg-token-main-surface-secondary text-token-text-primary dark:bg-token-main-surface-tertiary":"border-token-border-default bg-token-main-surface-primary text-token-text-primary dark:bg-token-main-surface-secondary",S),children:[r.jsxs("div",{className:W("flex h-full w-full gap-3",!M&&"md:items-center"),children:[h&&r.jsx("div",{className:"flex items-start pt-0.5",children:h}),r.jsxs("div",{className:W("flex grow flex-col md:flex-row md:items-center md:justify-between md:gap-8",k),children:[r.jsxs("div",{className:"flex flex-col",children:[e&&r.jsx("h3",{className:W("text-sm font-bold",C==="error"?"text-token-text-error":"text-token-text-primary"),children:e}),r.jsx("div",{className:W(e?C==="error"?"text-token-text-error":"text-token-text-secondary":""),children:n})]}),r.jsxs("div",{className:"mt-2 flex min-w-fit flex-col gap-2 md:mt-0 md:items-center md:gap-4",children:[d&&r.jsx(KR,{className:"min-h-[62px] min-w-[62px] cursor-pointer",onClick:u,size:62,value:d}),!M&&I]})]}),r.jsx("div",{className:W("flex shrink-0 items-start gap-2 sm:items-center",E),children:!!t&&r.jsx(gn,{onClick:t})})]}),M&&I]})},QR=({onDismiss:t,title:e,content:n,onPrimaryCtaClick:s,primaryCtaText:o,onSecondaryCtaClick:a,secondaryCtaText:i})=>r.jsxs("div",{className:W("border-main-surface-secondary bg-token-main-surface-primary text-token-text-primary flex h-16 items-center border-b px-2 text-sm"),children:[r.jsxs("div",{className:"flex items-center justify-center",children:[!!t&&r.jsx(gn,{onClick:t,className:"text-token-text-tertiary -me-2"}),r.jsx(LT,{className:"h-16 w-16 rounded-xs pt-1 shadow-none"}),r.jsxs("div",{className:"-ms-1 flex flex-col",children:[e&&r.jsx("div",{className:"text-token-text-primary font-bold",children:e}),r.jsx("div",{className:W(e?"text-token-text-secondary -mt-0.5":""),children:n})]})]}),r.jsxs("div",{className:"ms-auto flex justify-end",children:[o&&r.jsx(_e,{onClick:s,color:"primary",className:"shrink-0",children:o}),i&&r.jsx(_e,{onClick:a,color:"secondary",className:"me-2 shrink-0",children:i})]})]}),JR=Fe.DesktopBrowserExtensionAnnouncement,XR=Fe.DesktopBrowserExtensionReactiveAnnouncement,q1e=5,Y1e="https://chromewebstore.google.com/detail/searchgpt/ejcfepkfckglbgocfkanmcdngdijcgld";function Z1e({announcementKey:t=JR,onClose:e}){const n=V();_.useEffect(()=>{B.logEventWithStatsig("ChatGPT Browser Extension: Announcement Shown","chatgpt_browser_extension_announcement_shown"),B.logUpsellOrModalEvent(un,{eventId:"browser_extension_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]);const s=_.useCallback(()=>{st(n,t),B.logEventWithStatsig("ChatGPT Browser Extension: Announcement Closed","chatgpt_browser_extension_announcement_closed"),e&&e()},[t,n,e]),o=_.useCallback(()=>{B.logEventWithStatsig("ChatGPT Browser Extension: CTA Clicked","chatgpt_browser_extension_announcement_cta_clicked"),st(n,t),e&&e()},[t,n,e]);return r.jsx(K1e,{downloadUrl:Y1e,announcementKey:t,handleCTAClicked:o,handleClose:s})}function nKe({onClose:t}){return Z1e({announcementKey:XR,onClose:t})}function K1e({downloadUrl:t,announcementKey:e,handleCTAClicked:n,handleClose:s}){const o=()=>{n(),window.open(t)},a=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(j,{id:"uAZwaE",defaultMessage:"Use ChatGPT for every search"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"+wTq4L",defaultMessage:"Download the Chrome extension to switch your default search engine to ChatGPT, and get instant answers from trusted sources with every search."})})]});return r.jsx(vn,{onPrimaryCtaClick:o,primaryCtaText:r.jsx(j,{id:"x9mKG0",defaultMessage:"Get Extension"}),onDismiss:()=>s(e),content:a})}function eL(t){var c;const e=V(),n=C8(()=>document.documentElement.dataset.searchExtension==="1"),o=(c=ae(()=>bn(yt(e,t.clientThreadId))).enabledTools)==null?void 0:c.includes(il.Search),a=Xo(),i=!(a!=null&&a.includes(os.SearchToolHoldout)),l=yn();return PG()&&!l&&!n&&o&&i}function sKe(t){return eL(t),J1e(),dt(JR),!1}function oKe(t){var i;const e=eL(t),n=Ve(t.clientThreadId,l=>Pl(he.getConversationTurns(l),c=>c.role===Ke.User));let s=!1;const o=n==null?void 0:n.messages[0];if((o==null?void 0:o.content.content_type)===ut.Text){const l=(i=o==null?void 0:o.content.parts[0])==null?void 0:i.toLowerCase();l&&(s=l.includes("chrome extension")||l.includes("default search"))}const a=dt(XR);return a.eligible&&!a.isLoading&&e&&s}function Q1e(t){var n;const e=(n=gt.getItem(Ue.SearchSettings))!=null?n:{};e.hasSearchedMinTimes||(e.searchMessageIds||(e.searchMessageIds=[]),e.searchMessageIds.includes(t)||(e.searchMessageIds.push(t),e.searchMessageIds.length>=q1e&&(e.hasSearchedMinTimes=!0,delete e.searchMessageIds),gt.setItem(Ue.SearchSettings,e)))}function J1e(){var e;return((e=gt.getItem(Ue.SearchSettings))!=null?e:{}).hasSearchedMinTimes===!0}var hm=(t=>(t.SonicBusinessesMap="sonic.web.businessesMap",t.CompletionRequest="chatgpt.web.completionRequest",t.GetDiffedDoc="chatgpt.web.canvas.getDiffedDoc",t.ProductsCompletionRequest="chatgpt.web.products.completionRequest",t.ProductSidebar="chatgpt.web.products.sidebar",t.SuperWidget="chatgpt.web.super_widget",t.SearchingState="chatgpt.web.searchingState",t))(hm||{});class X1e{constructor(e,n){Q(this,"namespace");Q(this,"expectedTimingLogs");Q(this,"expectedTimingLogTimeouts",{});Q(this,"startMs",-1);Q(this,"lastLogMs",-1);Q(this,"loggedTimings",new Set);Q(this,"timingBlocks",{});Q(this,"_debug",!1);Q(this,"context");var s,o,a;this.namespace=e,this.expectedTimingLogs=(s=n==null?void 0:n.expectedTimingLogs)!=null?s:[],this._debug=(o=n==null?void 0:n.debug)!=null?o:!1,this.context=(a=n==null?void 0:n.context)!=null?a:{},this.reset()}reset(e){this.startMs=this.lastLogMs=e!=null?e:performance.now(),this.timingBlocks={},this.loggedTimings=new Set;for(const n of Object.values(this.expectedTimingLogTimeouts))clearTimeout(n);this.expectedTimingLogTimeouts={};for(const n of this.expectedTimingLogs){const s=setTimeout(()=>{var o;Re.addAction("".concat(this.namespace,".").concat(n.name,".timed_out"),(o=n.initializationInfo)!=null?o:{})},n.expectedInMs);this.expectedTimingLogTimeouts[n.name]=s,this.isDebug()&&console.debug("[DatadogProfiler] Expecting ".concat(this.namespace,".").concat(n.name," to be logged within ").concat(n.expectedInMs,"ms"))}}isDebug(){var e;return(e=window.__DATADOG_PROFILER_DEBUG__)!=null?e:this._debug}getStartTime(){return this.startMs}logTimingOnce(e,n={fromLastLog:!1}){var a;if(this.loggedTimings.has(e)){this.isDebug()&&console.warn("[DatadogProfiler] Timing ".concat(this.namespace,".").concat(e," already logged"));return}const s=performance.now(),o=(a=n.overrideDurationMs)!=null?a:s-(n.fromLastLog?this.lastLogMs:this.startMs);return Re.addAction("".concat(this.namespace,".").concat(e),U(w(w({},this.context),n.context),{durationMs:o})),this.lastLogMs=s,this.loggedTimings.add(e),e in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[e]),delete this.expectedTimingLogTimeouts[e]),this.isDebug()&&console.debug("[DatadogProfiler] ".concat(this.namespace,".").concat(e,": ").concat(o,"ms")),o}startBlock(e){this.timingBlocks[e]=performance.now()}endBlock(e,n={throwError:!0}){const s=this.timingBlocks[e];if(s===void 0&&n.throwError)throw new Error('Block "'.concat(e,'" not started'));const o=performance.now()-s;Re.addAction("".concat(this.namespace,".").concat(e),U(w(w({},this.context),n.context),{durationMs:o})),delete this.timingBlocks[e]}}const Dg={};function e_e({namespace:t,opts:e}){return Dg[t]!==void 0&&Re.addError("Profiler already exists for namespace ".concat(t)),Dg[t]=new X1e(t,e)}function u5({namespace:t,opts:e}){let n=Dg[t];return n===void 0&&(n=Dg[t]=e_e({namespace:t,opts:e})),n}function tL(t){"use forget";const e=G.c(11),{namespace:n,clientThreadId:s}=t,[o,a]=_.useState(!1);let i;e[0]!==n?(i=()=>u5({namespace:n,opts:{debug:!1}}),e[0]=n,e[1]=i):i=e[1];const[l]=_.useState(i),c=Ve(s,t_e),d=Na(c);let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=new Set,e[2]=u):u=e[2];const f=_.useRef(u),m=V();let p,g;e[3]!==m||e[4]!==l||e[5]!==c?(p=()=>{if(c&&!f.current.has(c)){f.current.add(c);const v=RG(m,c);v&&(l.reset(v.turnTracker.promptSentTimestamp),a(!0))}},g=[c,l,m],e[3]=m,e[4]=l,e[5]=c,e[6]=p,e[7]=g):(p=e[6],g=e[7]),_.useEffect(p,g);const h=o?l:null;let x;return e[8]!==d||e[9]!==h?(x={profiler:h,isRequestActive:d},e[8]=d,e[9]=h,e[10]=x):x=e[10],x}function t_e(t){return he.getRequestId(t)}const Yx=v8(()=>({delayedRenderingMessageIds:new Set})),n_e=t=>G3(Yx,t);function s_e(t){return n_e(e=>t?t(e.delayedRenderingMessageIds):e.delayedRenderingMessageIds)}const ew={addDelayedRenderingMessage(t){Yx.setState(e=>{if(e.delayedRenderingMessageIds.has(t))return e;const n=new Set(e.delayedRenderingMessageIds);return n.add(t),{delayedRenderingMessageIds:n}})},removeDelayedRenderingMessage(t){Yx.setState(e=>{if(!e.delayedRenderingMessageIds.has(t))return e;const n=new Set(e.delayedRenderingMessageIds);return n.delete(t),{delayedRenderingMessageIds:n}})}},o_e="5.7.5",a_e=100,r_e=0,i_e=350,l_e=24,c_e=24,d_e="Comp 1",u_e=0,f_e=[],m_e=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],p_e=[],g_e={v:o_e,fr:a_e,ip:r_e,op:i_e,w:l_e,h:c_e,nm:d_e,ddd:u_e,assets:f_e,layers:m_e,markers:p_e},h_e="5.7.5",__e=100,x_e=0,y_e=400,v_e=24,b_e=24,C_e="Comp 1",S_e=0,w_e=[],k_e=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.944433333333334],[-1.166666666666667,0]],o:[[-1.166666666666666,1.944433333333333],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.003000259399414062,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.3626899123191833],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.003000259399414062,2.333300590515137],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.120759010314941]],o:[[1.720494627952576,0],[.6510882377624512,-1.120759010314941]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.166999816894531,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],E_e=[],T_e={v:h_e,fr:__e,ip:x_e,op:y_e,w:v_e,h:b_e,nm:C_e,ddd:S_e,assets:w_e,layers:k_e,markers:E_e},M_e="5.7.5",A_e=100,I_e=0,j_e=400,N_e=24,P_e=24,R_e="Comp 1",L_e=0,O_e=[],D_e=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.9444333333333343],[-1.166666666666667,0]],o:[[-1.166666666666666,1.9444333333333326],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.0030002593994140625,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.36268991231918335],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.0030002593994140625,2.3333005905151367],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.1207590103149414]],o:[[1.7204946279525757,0],[.6510882377624512,-1.1207590103149414]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.1669998168945312,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],F_e=[],B_e={v:M_e,fr:A_e,ip:I_e,op:j_e,w:N_e,h:P_e,nm:R_e,ddd:L_e,assets:O_e,layers:D_e,markers:F_e},U_e="5.7.5",$_e=100,V_e=0,H_e=350,G_e=24,W_e=24,z_e="Comp 1",q_e=0,Y_e=[],Z_e=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],K_e=[],Q_e={v:U_e,fr:$_e,ip:V_e,op:H_e,w:G_e,h:W_e,nm:z_e,ddd:q_e,assets:Y_e,layers:Z_e,markers:K_e},J_e=R(()=>P(()=>import("./bllef8p3xhp1xolv.js"),__vite__mapDeps([185,1])));function nL({animationData:t,animationSegmentToPlay:e,animationLoopCounter:n}){const s=_.useRef(null);return _.useEffect(()=>{var o;(o=s.current)==null||o.playSegments(e,!0)},[n]),r.jsx(J_e,{animationData:t,lottieRef:s,loop:!1,autoplay:!1})}function X_e(t){return r.jsx(Ts,U(w({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.66607 0.376042C8.01072 0.605806 8.10385 1.07146 7.87408 1.4161L3.54075 7.9161C3.40573 8.11863 3.18083 8.24304 2.93752 8.24979C2.69421 8.25654 2.46275 8.1448 2.31671 7.95008L0.150044 5.06119C-0.098484 4.72982 -0.0313267 4.25972 0.300044 4.01119C0.631415 3.76266 1.10152 3.82982 1.35004 4.16119L2.88068 6.20204L6.62601 0.584055C6.85577 0.239408 7.32142 0.146278 7.66607 0.376042Z",fill:"currentColor"})}))}function e0e(t){return r.jsxs(Ts,U(w({width:"4",height:"12",viewBox:"0 0 4 12",fill:"none"},t),{children:[r.jsx("mask",{id:"path-1-inside-1_1975_4008",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z"})}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z",fill:"currentColor"}),r.jsx("path",{d:"M1 6.5H-0.25H1ZM1 1.5L-0.25 1.5L-0.25 1.5L1 1.5ZM2 6.25C2.13807 6.25 2.25 6.36193 2.25 6.5H-0.25C-0.25 7.74264 0.757359 8.75 2 8.75V6.25ZM1.75 6.5C1.75 6.36193 1.86193 6.25 2 6.25V8.75C3.24264 8.75 4.25 7.74264 4.25 6.5H1.75ZM1.75 1.5V6.5H4.25V1.5H1.75ZM2 1.75C1.86193 1.75 1.75 1.63807 1.75 1.5H4.25C4.25 0.257359 3.24264 -0.75 2 -0.75V1.75ZM2.25 1.5C2.25 1.63807 2.13807 1.75 2 1.75V-0.75C0.757359 -0.75 -0.25 0.257359 -0.25 1.5L2.25 1.5ZM2.25 6.5L2.25 1.5L-0.25 1.5L-0.25 6.5L2.25 6.5ZM2 10.25H-0.5C-0.5 11.6307 0.619288 12.75 2 12.75V10.25ZM2 10.25V12.75C3.38071 12.75 4.5 11.6307 4.5 10.25H2ZM2 10.25H2H4.5C4.5 8.86929 3.38071 7.75 2 7.75V10.25ZM2 10.25H2V7.75C0.619288 7.75 -0.5 8.86929 -0.5 10.25H2Z",fill:"currentColor",mask:"url(#path-1-inside-1_1975_4008)"})]}))}function t0e(t){return r.jsx(Ts,U(w({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.32256 1.48447C7.59011 1.16827 7.55068 0.695034 7.23447 0.427476C6.91827 0.159918 6.44503 0.199354 6.17748 0.515559L4.00002 3.08892L1.82256 0.515559C1.555 0.199354 1.08176 0.159918 0.765559 0.427476C0.449355 0.695034 0.409918 1.16827 0.677476 1.48447L3.01755 4.25002L0.677476 7.01556C0.409918 7.33176 0.449354 7.805 0.765559 8.07256C1.08176 8.34011 1.555 8.30068 1.82256 7.98447L4.00002 5.41111L6.17748 7.98447C6.44503 8.30068 6.91827 8.34011 7.23447 8.07256C7.55068 7.805 7.59011 7.33176 7.32256 7.01556L4.98248 4.25002L7.32256 1.48447Z",fill:"currentColor"})}))}function aKe({animationLoopCounter:t}){const e=ea();return r.jsx(nL,{animationData:e?g_e:Q_e,animationSegmentToPlay:[0,300],animationLoopCounter:t})}function rKe({animationLoopCounter:t}){const e=ea();return r.jsx(nL,{animationData:e?T_e:B_e,animationSegmentToPlay:[0,400],animationLoopCounter:t})}const n0e=2e3,sL=.4,s0e=.45,o0e=.2,a0e=.1,r0e=.25;var Zs=(t=>(t[t.Running=0]="Running",t[t.Finished=1]="Finished",t[t.Error=2]="Error",t[t.Stopped=3]="Stopped",t[t.Paused=4]="Paused",t))(Zs||{});function iKe({conversationMessages:t,icon:e,status:n,text:s,estimatedToolDurationMs:o,animationLoopDurationMs:a=n0e,shouldPersistAfterFinished:i=!1}){const[l,c]=_.useState(n===0?0:n===1&&!i?7:1),[d,u]=_.useState(0);_.useEffect(()=>{n===2?c(8):n===3?c(9):n===4?c(10):n===1?c(l===2?3:7):n===0&&l===10&&(c(2),u(m=>m+1))},[n]);const f=c0e(l);return _.useEffect(()=>{const m=t[0].id;if(f)return ew.addDelayedRenderingMessage(m),()=>{ew.removeDelayedRenderingMessage(m)}},[f]),W3(()=>{Hc(l)&&u(m=>m+1)},a),l===7&&!i?null:r.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[r.jsx(i0e,{icon:e,status:n,uiState:l,estimatedToolDurationMs:o,animationLoopCounter:d,shouldPersistAfterFinished:i,onFillProgressBarAnimationComplete:()=>c(4),onFinishAnimationComplete:()=>{c(5),setTimeout(()=>{c(i?7:6)},a0e*1e3)},onHideAnimationComplete:()=>c(7)}),r.jsx(l0e,{text:s,uiState:l,animationLoopCounter:d,onEnterAnimationComplete:()=>c(2)})]})}const tw=50;function i0e({icon:t,status:e,uiState:n,estimatedToolDurationMs:s,animationLoopCounter:o,shouldPersistAfterFinished:a,onFillProgressBarAnimationComplete:i,onFinishAnimationComplete:l,onHideAnimationComplete:c}){const[d,u]=_.useState(0);W3(()=>{Hc(n)?u(y=>y+tw):n===10&&u(0)},tw);let f,m,p;Hc(n)||n===10?(f="running",m=r.jsx(t,{animationLoopCounter:o}),p="bg-transparent"):n===4||n===5||n===7&&a?(f="finished",m=r.jsx(X_e,{}),p="bg-brand-purple"):e===2?(f="error",m=r.jsx(e0e,{}),p="bg-orange-500"):e===3&&(f="stopped",m=r.jsx(t0e,{}),p="bg-gray-300");let g={opacity:0,scale:0,rotate:-180,x:0},h={type:"spring",bounce:.3,duration:s0e},x={opacity:0,scale:.6,rotate:0,x:0};n===0?(g={opacity:0,scale:.5,rotate:-180,x:-8},h={type:"spring",bounce:.3,duration:sL}):n===1?g=!1:n===5&&(x={opacity:0,scale:0,rotate:0,x:0},h={type:"spring",bounce:.3,duration:r0e});const v=qX(d,s);return r.jsx("div",{className:"relative h-5 w-5 shrink-0",children:r.jsx(mn,{onExitComplete:()=>{n===6&&c()},children:f!=null&&r.jsxs(Xe.div,{className:W("absolute start-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",p),initial:g,animate:{opacity:1,scale:1,rotate:0,x:0},exit:x,transition:h,onAnimationComplete:()=>{n===4&&l()},children:[m,(Hc(n)||n===10)&&r.jsx(fd,{percentage:n===3?100:v,thickness:1.5/23,className:"text-brand-purple absolute start-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:n===3?"".concat((100-v)/100*o0e,"s"):void 0,transitionTimingFunction:n===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{n===3&&i()}})]},f)})})}function l0e({text:t,uiState:e,animationLoopCounter:n,onEnterAnimationComplete:s}){const[o,a]=_.useState(t);_.useEffect(()=>{e===2&&a(t)},[n]),_.useEffect(()=>{Hc(e)||a(t)},[e,t]);let i={opacity:0,x:0,y:15},l={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};e===0?(i={opacity:0,x:-8,y:0},l={type:"spring",bounce:.3,duration:sL,delay:.15}):e===1&&(i=!1);const c=o!=null?o:void 0;return r.jsx("div",{className:W("relative h-5 w-full leading-5",e===8||e===9?"text-token-text-tertiary":"text-token-text-secondary"),children:r.jsx(mn,{children:c!=null&&r.jsx(Xe.div,{className:"absolute start-0 top-0 line-clamp-1 overflow-visible",initial:i,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:l,onAnimationComplete:()=>{e===0&&s()},children:c},c.toString())})})}function Hc(t){return t===0||t===2||t===3}function c0e(t){return Hc(t)||t===4||t===5||t===6||t===10}const d0e=R(()=>P(()=>import("./glgf3sl2j4mvtn59.js"),__vite__mapDeps([285,1])),{loading:t=>O(t)}),u0e=R(()=>P(()=>Promise.resolve().then(()=>Nr),void 0),{loading:t=>O(t)});var bE;const nw=mt.div(bE||(bE=ct(["group start-0 top-0 me-1.5 overflow-hidden mt-1 text-start"]))),Zx=t=>{"use forget";var X;const e=G.c(70);let n,s,o,a,i,l,c,d,u,f,m,p,g;e[0]!==t?(X=t,{highlightedCommand:o,status:u,children:s,showWorkUserSetting:f,hideOnlyIfNotInteractedWith:m,defaultExpanded:p,forceExpanded:g,labelPrefix:a,onOpenAnalytics:l,onClick:i,accessory:n,ref:c}=X,d=ke(X,["highlightedCommand","status","children","showWorkUserSetting","hideOnlyIfNotInteractedWith","defaultExpanded","forceExpanded","labelPrefix","onOpenAnalytics","onClick","accessory","ref"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=d,e[9]=u,e[10]=f,e[11]=m,e[12]=p,e[13]=g):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],d=e[8],u=e[9],f=e[10],m=e[11],p=e[12],g=e[13]);const h=f===void 0?!1:f,x=m===void 0?!1:m,v=p===void 0?!1:p,y=g===void 0?!1:g,b=s!=null||i!=null,[C]=_.useState(h),[S,k]=_.useState(h||v),[E,T]=_.useState(!1),M=u===Zs.Finished||u===Zs.Error,A=x?C?!1:!E:!1,I=u===Zs.Running?"loading-shimmer":"inline-block";if(M&&A)return null;if(!b){let te;e[14]!==I?(te=W(I),e[14]=I,e[15]=te):te=e[15];let ce;e[16]!==o?(ce=r.jsx("span",{className:"text-start",children:o}),e[16]=o,e[17]=ce):ce=e[17];let ue;e[18]!==n||e[19]!==a||e[20]!==ce?(ue=r.jsxs("div",{className:"flex items-center justify-start gap-1",children:[a,ce,n]}),e[18]=n,e[19]=a,e[20]=ce,e[21]=ue):ue=e[21];let me;e[22]!==te||e[23]!==ue?(me=r.jsx(nw,{className:te,children:ue}),e[22]=te,e[23]=ue,e[24]=me):me=e[24];let xe;return e[25]!==c||e[26]!==d||e[27]!==me?(xe=r.jsx(sw,U(w({ref:c,$canShowWork:!1},d),{children:me})),e[25]=c,e[26]=d,e[27]=me,e[28]=xe):xe=e[28],xe}let N;e[29]!==i||e[30]!==l||e[31]!==S?(N=te=>{S||l==null||l(),k(f0e),T(!0),i==null||i(te)},e[29]=i,e[30]=l,e[31]=S,e[32]=N):N=e[32];let L;e[33]!==o?(L=o==null?void 0:o.toString(),e[33]=o,e[34]=L):L=e[34];let D,F,$,H;e[35]===Symbol.for("react.memo_cache_sentinel")?(F={opacity:0},$={opacity:1},H={opacity:0},D={duration:.3},e[35]=D,e[36]=F,e[37]=$,e[38]=H):(D=e[35],F=e[36],$=e[37],H=e[38]);let z;e[39]!==I?(z=W(I),e[39]=I,e[40]=z):z=e[40];let K;e[41]!==o?(K=r.jsx("span",{className:"text-start",children:o}),e[41]=o,e[42]=K):K=e[42];let J;e[43]!==y||e[44]!==i||e[45]!==S?(J=!i&&!y&&(S?r.jsx(d0e,{className:"icon-sm"}):r.jsx(u0e,{className:"icon-sm"})),e[43]=y,e[44]=i,e[45]=S,e[46]=J):J=e[46];let Z;e[47]!==n||e[48]!==a||e[49]!==K||e[50]!==J?(Z=r.jsxs("div",{className:"flex items-center justify-start gap-1",children:[a,K,J,n]}),e[47]=n,e[48]=a,e[49]=K,e[50]=J,e[51]=Z):Z=e[51];let q;e[52]!==z||e[53]!==Z||e[54]!==N||e[55]!==L?(q=r.jsx(mn,{children:r.jsx(nw,{children:r.jsx(Xe.button,{onClick:N,initial:F,animate:$,exit:H,transition:D,className:z,children:Z},L)})}),e[52]=z,e[53]=Z,e[54]=N,e[55]=L,e[56]=q):q=e[56];let se;e[57]!==c||e[58]!==d||e[59]!==q?(se=r.jsx(sw,U(w({ref:c,$canShowWork:!0},d),{children:q})),e[57]=c,e[58]=d,e[59]=q,e[60]=se):se=e[60];let ie;e[61]!==s||e[62]!==y||e[63]!==S?(ie=(S||y)&&s&&r.jsx(Xe.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s}),e[61]=s,e[62]=y,e[63]=S,e[64]=ie):ie=e[64];let ee;e[65]!==ie?(ee=r.jsx(mn,{children:ie}),e[65]=ie,e[66]=ee):ee=e[66];let le;return e[67]!==se||e[68]!==ee?(le=r.jsxs(r.Fragment,{children:[se,ee]}),e[67]=se,e[68]=ee,e[69]=le):le=e[69],le};var CE;const sw=mt.span(CE||(CE=ct(["block first:mt-0 relative\n",""])),({$canShowWork:t})=>t?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary");function f0e(t){return!t}const ow=3,m0e=.1,aw=[0,.26,.4],p0e=800,g0e=1200;function lKe(t){"use forget";var fe;const e=G.c(98),{nextMessage:n,isLastMessage:s,isRequestActive:o,isLastTurnInConversation:a,clientThreadId:i,turnIndex:l,searchResultGroups:c,query:d,searchModelQueries:u,showFastNav:f,isForcedMessage:m,shouldShowAnimatedBlackDot:p}=t;let g;e[0]!==c?(g=c===void 0?[]:c,e[0]=c,e[1]=g):g=e[1];const h=g,x=d===void 0?null:d;let v;e[2]!==u?(v=u===void 0?[]:u,e[2]=u,e[3]=v):v=e[3];const y=v,b=f===void 0?!0:f,C=m===void 0?!1:m,S=p===void 0?!0:p;let k;e[4]!==s||e[5]!==n?(k=v0e({isLastMessage:s,nextMessage:n}),e[4]=s,e[5]=n,e[6]=k):k=e[6];const E=k,T=_.useRef(!1),M=jt(),A=Ve(i,he.getGizmoId);let I,N;e[7]!==A||e[8]!==n||e[9]!==M?(I=()=>{n&&z3(n)&&!T.current&&(T.current=!0,eo(M,A))},N=[n,M,A],e[7]=A,e[8]=n,e[9]=M,e[10]=I,e[11]=N):(I=e[10],N=e[11]),_.useEffect(I,N);let L;e[12]!==n?(L=Fh(n),e[12]=n,e[13]=L):L=e[13];const D=L;n!=null&&n.id&&Q1e(n==null?void 0:n.id);let F;e[14]!==i?(F={namespace:hm.SearchingState,clientThreadId:i},e[14]=i,e[15]=F):F=e[15];const{profiler:$}=tL(F),H=V();let z;e[16]!==H?(z=ts(H),e[16]=H,e[17]=z):z=e[17];const K=z;let J;e[18]!==H?(J=Sr(H).checkGate("1640462792"),e[18]=H,e[19]=J):J=e[19];const Z=J,{favicons:q,load:se}=w1e(x!=null?x:null);let ie;e[20]!==H||e[21]!==se||e[22]!==$?(ie=()=>{se({ctx:H,profiler:$})},e[20]=H,e[21]=se,e[22]=$,e[23]=ie):ie=e[23];const ee=_.useEffectEvent(ie);let le;e[24]!==C||e[25]!==ee||e[26]!==x||e[27]!==Z?(le=()=>{x&&x.trim().length>0&&!C&&!Z&&ee()},e[24]=C,e[25]=ee,e[26]=x,e[27]=Z,e[28]=le):le=e[28];let X;e[29]!==C||e[30]!==x||e[31]!==Z?(X=[x,C,Z],e[29]=C,e[30]=x,e[31]=Z,e[32]=X):X=e[32],_.useEffect(le,X);let te;e:{let re;e[33]!==q?(re=q.slice(0,ow).map(x0e),e[33]=q,e[34]=re):re=e[34];const ve=re;if(ve.length>0){te=ve;break e}let Me;e[35]!==h?(Me=_h(h.slice(0,ow).map(_0e)),e[35]=h,e[36]=Me):Me=e[36],te=Me}const ce=te,ue=_.useRef(!1),me=_.useRef(!1);let xe,pe;e[37]!==o||e[38]!==$||e[39]!==E?(xe=()=>{E&&!ue.current&&$&&o&&(ue.current=!0,$.logTimingOnce("searching_the_web_shown"))},pe=[E,$,o],e[37]=o,e[38]=$,e[39]=E,e[40]=xe,e[41]=pe):(xe=e[40],pe=e[41]),_.useEffect(xe,pe);let Ee,Se;e[42]!==o||e[43]!==$||e[44]!==E||e[45]!==ce.length?(Ee=()=>{!me.current&&E&&ce.length>0&&$&&o&&(me.current=!0,$.logTimingOnce("favicons_shown"))},Se=[ce.length,E,$,o],e[42]=o,e[43]=$,e[44]=E,e[45]=ce.length,e[46]=Ee,e[47]=Se):(Ee=e[46],Se=e[47]),_.useEffect(Ee,Se);const[Te,Ne]=_.useState(0),[De,de]=_.useState(!0);let oe,we;e[48]!==o||e[49]!==y.length||e[50]!==E||e[51]!==De?(oe=()=>{if(o&&E&&y.length>0&&De){let re=null;const ve=setTimeout(()=>{de(!1),re=setInterval(()=>{Ne(Me=>Me+1>=y.length?y.length-1:Me+1)},g0e)},p0e);return()=>{clearTimeout(ve),re!=null&&clearInterval(re)}}(!o||!E||y.length===0)&&!De&&de(!0)},we=[o,E,y.length,De],e[48]=o,e[49]=y.length,e[50]=E,e[51]=De,e[52]=oe,e[53]=we):(oe=e[52],we=e[53]),_.useEffect(oe,we);let Ce;if(e[54]!==i||e[55]!==D||e[56]!==K||e[57]!==a||e[58]!==o||e[59]!==n||e[60]!==y||e[61]!==Te||e[62]!==S||e[63]!==b||e[64]!==E||e[65]!==Z||e[66]!==De||e[67]!==l||e[68]!==ce){if(Ce=[],((fe=D==null?void 0:D[0])==null?void 0:fe.type)==="navigation"&&n&&b){const re=D[0];let ve;e[70]!==i||e[71]!==a||e[72]!==o||e[73]!==n||e[74]!==re||e[75]!==l?(ve=r.jsx(y0e,{clientThreadId:i,turnIndex:l,nextMessage:n,isRequestActive:o,isLastTurnInConversation:a,navigationCitation:re},"fast-nav"),e[70]=i,e[71]=a,e[72]=o,e[73]=n,e[74]=re,e[75]=l,e[76]=ve):ve=e[76],Ce.push(ve)}if(E){if(Z){const re=!o;let ve;e[77]!==re||e[78]!==y||e[79]!==Te||e[80]!==De?(ve=re?r.jsx(j,{id:"sjbaxy",defaultMessage:"Stopped searching"}):De?r.jsx(j,{id:"jjx8Qg",defaultMessage:"Searching the web"}):r.jsx(j,{id:"FauKHv",defaultMessage:"Searching for {query}",values:{query:y[Te]}}),e[77]=re,e[78]=y,e[79]=Te,e[80]=De,e[81]=ve):ve=e[81];const Me=ve;if(re){let $e;e[82]!==Me?($e=r.jsx(Zx,{highlightedCommand:Me,status:Zs.Error},"search-gpt-query"),e[82]=Me,e[83]=$e):$e=e[83],Ce.push($e)}else{if(De&&S){let He;e[84]===Symbol.for("react.memo_cache_sentinel")?(He=r.jsx(f1e,{}),e[84]=He):He=e[84],Ce.push(He)}const $e=!K&&"truncate";let Le;e[85]!==$e?(Le=W("loading-shimmer text-token-text-secondary pt-[3px] font-medium select-none",$e),e[85]=$e,e[86]=Le):Le=e[86];let Ae;e[87]!==Me||e[88]!==Le?(Ae=r.jsx("span",{className:Le,children:Me}),e[87]=Me,e[88]=Le,e[89]=Ae):Ae=e[89],Ce.push(Ae)}}else if(E){let re;e[90]!==o||e[91]!==ce?(re=o?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(j,{id:"jjx8Qg",defaultMessage:"Searching the web"}),ce.map(h0e)]}):r.jsx(j,{id:"sjbaxy",defaultMessage:"Stopped searching"}),e[90]=o,e[91]=ce,e[92]=re):re=e[92];const ve=re,Me=o?Zs.Running:Zs.Error;let $e;e[93]!==ve||e[94]!==Me?($e=r.jsx(Zx,{highlightedCommand:ve,status:Me},"search-gpt-query"),e[93]=ve,e[94]=Me,e[95]=$e):$e=e[95],Ce.push($e)}}e[54]=i,e[55]=D,e[56]=K,e[57]=a,e[58]=o,e[59]=n,e[60]=y,e[61]=Te,e[62]=S,e[63]=b,e[64]=E,e[65]=Z,e[66]=De,e[67]=l,e[68]=ce,e[69]=Ce}else Ce=e[69];if(Ce.length){let re;return e[96]!==Ce?(re=r.jsx("div",{children:Ce}),e[96]=Ce,e[97]=re):re=e[97],re}return null}function h0e(t,e){return r.jsx(Xe.div,{className:W("-ms-1.5 first:ms-0 last:me-1.5","relative"),initial:{width:e===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:m0e,delay:aw[Math.min(e,aw.length-1)]},children:r.jsx("div",{className:W("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-token-bg-primary bg-token-bg-primary border-2"),children:r.jsx(ks,{url:t,size:32,minSize:16,className:"icon rounded-full"})})},t)}function _0e(t){return t.entries[0].url}function x0e(t){return t.url}const y0e=({clientThreadId:t,turnIndex:e,nextMessage:n,isRequestActive:s,isLastTurnInConversation:o,navigationCitation:a})=>{var u;const{scrollToHeader:i}=(u=vS("searchSources"))!=null?u:{},l=qme(),c=vS("searchSources"),{openThreadSidebar:d}=Ar();return _.useEffect(()=>{Re.addFirstTiming("render.fastNavigation")},[]),_.useEffect(()=>{var f;l&&c&&d({type:"searchSources",scrollToHeader:i,turnIndex:e,messageId:(f=n==null?void 0:n.id)!=null?f:""})},[]),_.useEffect(()=>{var g;const f=n,m=(g=f.metadata)==null?void 0:g.search_source,p=a.domains.map(h=>h.url);tI.logEvent("Search Tool Request Time To Fast Nav",t,f.id,{search_source:m,urls:p},()=>{m===LG.InstantQuery&&Fee.logEvent("Search Tool Page Load Time To Fast Nav",{message_id:f.id,urls:p,search_source:m})})},[t,n,a]),s&&o?r.jsx(Xe.div,{initial:{opacity:s?0:1,height:s?0:"auto"},animate:{opacity:1,height:"auto"},children:r.jsx(rw,{clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:a})}):r.jsx(rw,{clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:a})},rw=({clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:s})=>{const{toggleThreadSidebar:o}=Ar(),a=_.useMemo(()=>({clientThreadId:t,turnIndex:e,messageId:n==null?void 0:n.id}),[t,e,n==null?void 0:n.id]),i=_.useCallback((c,d)=>{var u;o({type:"searchSources",scrollToHeader:d,turnIndex:e,messageId:(u=n==null?void 0:n.id)!=null?u:""})},[o,e,n==null?void 0:n.id]),l=W1e(a);return r.jsx(O1e,{navigation:s,onShowSearchResults:i,trackContentReferenceEvent:l})};function v0e({isLastMessage:t,nextMessage:e}){return t||!e||e&&!z3(e)}function b0e({fullHeight:t,children:e,verticalPadding:n,horizontalPadding:s,overflowY:o,verticalMargin:a="auto",horizontalMargin:i="auto",ref:l}){const[c,d]=jn(f=>[Qo(f),hn(f)]),u=!d&&!c;return r.jsx("div",{className:W("text-base",o==="auto"&&"overflow-y-auto",a==="auto"&&"my-auto",i==="auto"&&"mx-auto",u&&n==="first"&&"pt-3",u&&n==="last"&&"pb-10",u&&n==="last-standard"&&"pb-3",u&&n==="large"&&"pt-12",u&&n==="small"&&"py-1",c&&n==="first"&&"pt-4.5",c&&n==="large"&&"pt-4.5",c&&n==="last"&&"pb-8",aL,s!=="none"&&"px-(--thread-content-margin)",t&&"h-full"),ref:l,children:e})}function Ir(s){var o=s,{children:t,className:e}=o,n=ke(o,["children","className"]);const[a,i,l]=jn(f=>[Qo(f),hn(f),S8(f)]),d=i?"[--thread-content-max-width:100%]":oL(a&&!l?"bento":"default"),u=i?"mx-auto flex-1 w-full max-w-full":"mx-auto max-w-(--thread-content-max-width) flex-1";return r.jsx("div",U(w({className:W(d,u,e)},n),{children:t}))}function oL(t){return t==="bento"?"[--thread-content-max-width:100%] thread-sm:[--thread-content-max-width:44rem] thread-md:[--thread-content-max-width:48rem] thread-lg:[--thread-content-max-width:50rem] thread-xxl:[--thread-content-max-width:54rem]":"[--thread-content-max-width:40rem] thread-lg:[--thread-content-max-width:48rem]"}const aL="[--thread-content-margin:--spacing(4)] thread-sm:[--thread-content-margin:--spacing(6)] thread-lg:[--thread-content-margin:--spacing(16)]";function cKe(t){return ze(t,"1803944755").get("enable_combined_login_or_signup_button",!1)}const rL=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M11.7304 7.35195C11.9273 7.04193 12.3384 6.95002 12.6484 7.14687C12.9582 7.34374 13.0502 7.75487 12.8535 8.06484L9.67868 13.0648C9.56765 13.2397 9.38114 13.3525 9.17477 13.3705C8.96844 13.3885 8.76558 13.3096 8.62595 13.1566L6.80075 11.1566L6.7197 11.0482C6.56149 10.7827 6.60647 10.4337 6.84372 10.2172C7.08112 10.0007 7.43256 9.98823 7.68259 10.1703L7.78317 10.2601L9.02145 11.6166L11.7304 7.35195Z","data-rtl-flip":""}),_.createElement("path",{d:"M4.52148 15.1664C4.61337 14.8108 4.39951 14.4478 4.04395 14.3559C3.73281 14.2756 3.41605 14.4295 3.28027 14.7074L3.2334 14.8334C3.13026 15.2324 3.0046 15.6297 2.86133 16.0287L2.71289 16.4281C2.63179 16.6393 2.66312 16.8775 2.79688 17.06C2.93067 17.2424 3.14825 17.3443 3.37402 17.3305L3.7793 17.3002C4.62726 17.2265 5.44049 17.0856 6.23438 16.8764C6.84665 17.1788 7.50422 17.4101 8.19434 17.558C8.55329 17.6347 8.9064 17.4062 8.9834 17.0473C9.06036 16.6881 8.83177 16.3342 8.47266 16.2572C7.81451 16.1162 7.19288 15.8862 6.62305 15.5814C6.50913 15.5205 6.38084 15.4946 6.25391 15.5053L6.12793 15.5277C5.53715 15.6955 4.93256 15.819 4.30566 15.9027C4.33677 15.8052 4.36932 15.7081 4.39844 15.6098L4.52148 15.1664Z"}),_.createElement("path",{d:"M15.7998 14.5365C15.5786 14.3039 15.2291 14.2666 14.9668 14.4301L14.8604 14.5131C13.9651 15.3633 12.8166 15.9809 11.5273 16.2572C11.1682 16.3342 10.9396 16.6881 11.0166 17.0473C11.0936 17.4062 11.4467 17.6347 11.8057 17.558C13.2388 17.2509 14.5314 16.5858 15.5713 15.6644L15.7754 15.4769C16.0417 15.224 16.0527 14.8028 15.7998 14.5365Z"}),_.createElement("path",{d:"M2.23828 7.58925C1.97668 8.34846 1.83496 9.15956 1.83496 10.0004C1.835 10.7359 1.94324 11.4483 2.14551 12.1234L2.23828 12.4105C2.35793 12.7576 2.73588 12.9421 3.08301 12.8226C3.3867 12.718 3.56625 12.4153 3.52637 12.1088L3.49512 11.9769C3.2808 11.3548 3.16508 10.6908 3.16504 10.0004C3.16504 9.30975 3.28072 8.64512 3.49512 8.02284C3.61476 7.67561 3.43024 7.29679 3.08301 7.17714C2.73596 7.05777 2.35799 7.2423 2.23828 7.58925Z"}),_.createElement("path",{d:"M16.917 12.8226C17.2641 12.9421 17.6421 12.7576 17.7617 12.4105C18.0233 11.6515 18.165 10.8411 18.165 10.0004C18.165 9.15956 18.0233 8.34846 17.7617 7.58925C17.642 7.2423 17.264 7.05777 16.917 7.17714C16.5698 7.29679 16.3852 7.67561 16.5049 8.02284C16.7193 8.64512 16.835 9.30975 16.835 10.0004C16.8349 10.6908 16.7192 11.3548 16.5049 11.9769C16.3852 12.3242 16.5698 12.703 16.917 12.8226Z"}),_.createElement("path",{d:"M8.9834 2.95253C8.90632 2.59372 8.55322 2.36509 8.19434 2.44179C6.76126 2.74891 5.46855 3.41404 4.42871 4.33534L4.22461 4.52284C3.95829 4.77575 3.94729 5.19696 4.2002 5.46327C4.42146 5.69603 4.77088 5.73326 5.0332 5.56972L5.13965 5.48769C6.03496 4.63746 7.18337 4.01888 8.47266 3.74257C8.83177 3.66561 9.06036 3.31165 8.9834 2.95253Z"}),_.createElement("path",{d:"M15.5713 4.33534C14.5314 3.41404 13.2387 2.74891 11.8057 2.44179C11.4468 2.36509 11.0937 2.59372 11.0166 2.95253C10.9396 3.31165 11.1682 3.66561 11.5273 3.74257C12.7361 4.00161 13.8209 4.56094 14.6895 5.33046L14.8604 5.48769L14.9668 5.56972C15.2291 5.73326 15.5785 5.69603 15.7998 5.46327C16.0211 5.23025 16.0403 4.87902 15.8633 4.62538L15.7754 4.52284L15.5713 4.33534Z"})),dKe=Object.freeze(Object.defineProperty({__proto__:null,default:rL},Symbol.toStringTag,{value:"Module"})),iL=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M4.52148 15.1664C4.61337 14.8108 4.39951 14.4478 4.04395 14.3559C3.73281 14.2756 3.41605 14.4295 3.28027 14.7074L3.2334 14.8334C3.13026 15.2324 3.0046 15.6297 2.86133 16.0287L2.71289 16.4281C2.63179 16.6393 2.66312 16.8775 2.79688 17.06C2.93067 17.2424 3.14825 17.3443 3.37402 17.3305L3.7793 17.3002C4.62726 17.2265 5.44049 17.0856 6.23438 16.8764C6.84665 17.1788 7.50422 17.4101 8.19434 17.558C8.55329 17.6348 8.9064 17.4062 8.9834 17.0473C9.06036 16.6882 8.83177 16.3342 8.47266 16.2572C7.81451 16.1162 7.19288 15.8862 6.62305 15.5815C6.50913 15.5206 6.38084 15.4946 6.25391 15.5053L6.12793 15.5277C5.53715 15.6955 4.93256 15.819 4.30566 15.9027C4.33677 15.8053 4.36932 15.7081 4.39844 15.6098L4.52148 15.1664Z"}),_.createElement("path",{d:"M15.7998 14.5365C15.5786 14.3039 15.2291 14.2666 14.9668 14.4301L14.8604 14.5131C13.9651 15.3633 12.8166 15.9809 11.5273 16.2572C11.1682 16.3342 10.9396 16.6882 11.0166 17.0473C11.0936 17.4062 11.4467 17.6348 11.8057 17.558C13.2388 17.2509 14.5314 16.5858 15.5713 15.6645L15.7754 15.477C16.0417 15.2241 16.0527 14.8028 15.7998 14.5365Z"}),_.createElement("path",{d:"M2.23828 7.58927C1.97668 8.34847 1.83496 9.15958 1.83496 10.0004C1.835 10.736 1.94324 11.4483 2.14551 12.1234L2.23828 12.4106C2.35793 12.7576 2.73588 12.9421 3.08301 12.8227C3.3867 12.718 3.56625 12.4154 3.52637 12.1088L3.49512 11.977C3.2808 11.3549 3.16508 10.6908 3.16504 10.0004C3.16504 9.30977 3.28072 8.64514 3.49512 8.02286C3.61476 7.67563 3.43024 7.2968 3.08301 7.17716C2.73596 7.05778 2.35799 7.24232 2.23828 7.58927Z"}),_.createElement("path",{d:"M16.917 12.8227C17.2641 12.9421 17.6421 12.7576 17.7617 12.4106C18.0233 11.6515 18.165 10.8411 18.165 10.0004C18.165 9.15958 18.0233 8.34847 17.7617 7.58927C17.642 7.24231 17.264 7.05778 16.917 7.17716C16.5698 7.2968 16.3852 7.67563 16.5049 8.02286C16.7193 8.64514 16.835 9.30977 16.835 10.0004C16.8349 10.6908 16.7192 11.3549 16.5049 11.977C16.3852 12.3242 16.5698 12.703 16.917 12.8227Z"}),_.createElement("path",{d:"M8.9834 2.95255C8.90632 2.59374 8.55322 2.3651 8.19434 2.44181C6.76126 2.74892 5.46855 3.41405 4.42871 4.33536L4.22461 4.52286C3.95829 4.77577 3.94729 5.19697 4.2002 5.46329C4.42146 5.69604 4.77088 5.73328 5.0332 5.56973L5.13965 5.4877C6.03496 4.63748 7.18337 4.0189 8.47266 3.74259C8.83177 3.66563 9.06036 3.31166 8.9834 2.95255Z"}),_.createElement("path",{d:"M15.5713 4.33536C14.5314 3.41405 13.2387 2.74892 11.8057 2.44181C11.4468 2.3651 11.0937 2.59374 11.0166 2.95255C10.9396 3.31166 11.1682 3.66563 11.5273 3.74259C12.7361 4.00163 13.8209 4.56095 14.6895 5.33048L14.8604 5.4877L14.9668 5.56973C15.2291 5.73327 15.5785 5.69604 15.7998 5.46329C16.0211 5.23026 16.0403 4.87903 15.8633 4.6254L15.7754 4.52286L15.5713 4.33536Z"})),f5=Object.freeze(Object.defineProperty({__proto__:null,default:iL},Symbol.toStringTag,{value:"Module"}));function uKe({clientThreadId:t,variant:e="default"}){const n=V(),s=Ve(t,he.getIsNewConversation),o=ae(()=>jf(n)),a=ot(),[,i]=Us(),l=()=>{B.logEvent("Temporary Chat Move: Temporary Chat Button Clicked"),s?i(f=>(f.has(Om)?f.delete(Om):f.set(Om,"true"),f),{replace:!0}):Mr(a,{params:o?void 0:new URLSearchParams({[Om]:"true"})})},c=ne(),d=o?c.formatMessage({id:"0emak7",defaultMessage:"Turn off temporary chat"}):c.formatMessage({id:"x2lslS",defaultMessage:"Turn on temporary chat"}),u=o?rL:iL;return r.jsx(_t,{label:d,children:e==="default"?r.jsx(sm,{className:"rounded-full!","aria-label":d,onClick:l,icon:u}):r.jsx(_e,{className:"text-token-text-secondary rounded-lg",color:"ghost",icon:u,onClick:l,label:d})})}const C0e={type:"spring",bounce:.1,duration:.3},fKe={type:"spring",bounce:.1,duration:.24},lL={duration:1e-14};function Fg(t,[e,n]){return Math.min(n,Math.max(e,t))}var S0e=[" ","Enter","ArrowUp","ArrowDown"],w0e=[" ","Enter"],_m="Select",[R1,L1,k0e]=f3(_m),[Zd]=Ml(_m,[k0e,yh]),O1=yh(),[E0e,ji]=Zd(_m),[T0e,M0e]=Zd(_m),cL=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:m,required:p,form:g}=t,h=O1(e),[x,v]=_.useState(null),[y,b]=_.useState(null),[C,S]=_.useState(!1),k=Sh(d),[E=!1,T]=_r({prop:s,defaultProp:o,onChange:a}),[M,A]=_r({prop:i,defaultProp:l,onChange:c}),I=_.useRef(null),N=x?g||!!x.closest("form"):!0,[L,D]=_.useState(new Set),F=Array.from(L).map($=>$.props.value).join(";");return r.jsx(gT,U(w({},h),{children:r.jsxs(E0e,{required:p,scope:e,trigger:x,onTriggerChange:v,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:vh(),value:M,onValueChange:A,open:E,onOpenChange:T,dir:k,triggerPointerDownPosRef:I,disabled:m,children:[r.jsx(R1.Provider,{scope:e,children:r.jsx(T0e,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback($=>{D(H=>new Set(H).add($))},[]),onNativeOptionRemove:_.useCallback($=>{D(H=>{const z=new Set(H);return z.delete($),z})},[]),children:n})}),N?r.jsxs(PL,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:M,onChange:$=>A($.target.value),disabled:m,form:g,children:[M===void 0?r.jsx("option",{value:""}):null,Array.from(L)]},F):null]})}))};cL.displayName=_m;var dL="SelectTrigger",uL=_.forwardRef((t,e)=>{const h=t,{__scopeSelect:n,disabled:s=!1}=h,o=ke(h,["__scopeSelect","disabled"]),a=O1(n),i=ji(dL,n),l=i.disabled||s,c=Dn(e,i.onTriggerChange),d=L1(n),u=_.useRef("touch"),[f,m,p]=RL(x=>{const v=d().filter(C=>!C.disabled),y=v.find(C=>C.value===i.value),b=LL(v,x,y);b!==void 0&&i.onValueChange(b.value)}),g=x=>{l||(i.onOpenChange(!0),p()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(i3,U(w({asChild:!0},a),{children:r.jsx(fn.button,U(w({type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":NL(i.value)?"":void 0},o),{ref:c,onClick:Rt(o.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&g(x)}),onPointerDown:Rt(o.onPointerDown,x=>{u.current=x.pointerType;const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(g(x),x.preventDefault())}),onKeyDown:Rt(o.onKeyDown,x=>{const v=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(v&&x.key===" ")&&S0e.includes(x.key)&&(g(),x.preventDefault())})}))}))});uL.displayName=dL;var fL="SelectValue",mL=_.forwardRef((t,e)=>{const m=t,{__scopeSelect:n,className:s,style:o,children:a,placeholder:i=""}=m,l=ke(m,["__scopeSelect","className","style","children","placeholder"]),c=ji(fL,n),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,f=Dn(e,c.onValueNodeChange);return xr(()=>{d(u)},[d,u]),r.jsx(fn.span,U(w({},l),{ref:f,style:{pointerEvents:"none"},children:NL(c.value)?r.jsx(r.Fragment,{children:i}):a}))});mL.displayName=fL;var A0e="SelectIcon",pL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n,children:s}=a,o=ke(a,["__scopeSelect","children"]);return r.jsx(fn.span,U(w({"aria-hidden":!0},o),{ref:e,children:s||""}))});pL.displayName=A0e;var I0e="SelectPortal",gL=t=>r.jsx(l3,w({asChild:!0},t));gL.displayName=I0e;var bl="SelectContent",hL=_.forwardRef((t,e)=>{const n=ji(bl,t.__scopeSelect),[s,o]=_.useState();if(xr(()=>{o(new DocumentFragment)},[]),!n.open){const a=s;return a?or.createPortal(r.jsx(_L,{scope:t.__scopeSelect,children:r.jsx(R1.Slot,{scope:t.__scopeSelect,children:r.jsx("div",{children:t.children})})}),a):null}return r.jsx(xL,U(w({},t),{ref:e}))});hL.displayName=bl;var Lo=10,[_L,Ni]=Zd(bl),j0e="SelectContentImpl",xL=_.forwardRef((t,e)=>{const X=t,{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:x}=X,v=ke(X,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),y=ji(bl,n),[b,C]=_.useState(null),[S,k]=_.useState(null),E=Dn(e,te=>C(te)),[T,M]=_.useState(null),[A,I]=_.useState(null),N=L1(n),[L,D]=_.useState(!1),F=_.useRef(!1);_.useEffect(()=>{if(b)return hT(b)},[b]),yT();const $=_.useCallback(te=>{const[ce,...ue]=N().map(pe=>pe.ref.current),[me]=ue.slice(-1),xe=document.activeElement;for(const pe of te)if(pe===xe||(pe==null||pe.scrollIntoView({block:"nearest"}),pe===ce&&S&&(S.scrollTop=0),pe===me&&S&&(S.scrollTop=S.scrollHeight),pe==null||pe.focus(),document.activeElement!==xe))return},[N,S]),H=_.useCallback(()=>$([T,b]),[$,T,b]);_.useEffect(()=>{L&&H()},[L,H]);const{onOpenChange:z,triggerPointerDownPosRef:K}=y;_.useEffect(()=>{if(b){let te={x:0,y:0};const ce=me=>{var xe,pe,Ee,Se;te={x:Math.abs(Math.round(me.pageX)-((pe=(xe=K.current)==null?void 0:xe.x)!=null?pe:0)),y:Math.abs(Math.round(me.pageY)-((Se=(Ee=K.current)==null?void 0:Ee.y)!=null?Se:0))}},ue=me=>{te.x<=10&&te.y<=10?me.preventDefault():b.contains(me.target)||z(!1),document.removeEventListener("pointermove",ce),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",ue,{capture:!0})}}},[b,z,K]),_.useEffect(()=>{const te=()=>z(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[z]);const[J,Z]=RL(te=>{const ce=N().filter(xe=>!xe.disabled),ue=ce.find(xe=>xe.ref.current===document.activeElement),me=LL(ce,te,ue);me&&setTimeout(()=>me.ref.current.focus())}),q=_.useCallback((te,ce,ue)=>{const me=!F.current&&!ue;(y.value!==void 0&&y.value===ce||me)&&(M(te),me&&(F.current=!0))},[y.value]),se=_.useCallback(()=>b==null?void 0:b.focus(),[b]),ie=_.useCallback((te,ce,ue)=>{const me=!F.current&&!ue;(y.value!==void 0&&y.value===ce||me)&&I(te)},[y.value]),ee=s==="popper"?Kx:yL,le=ee===Kx?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:x}:{};return r.jsx(_L,{scope:n,content:b,viewport:S,onViewportChange:k,itemRefCallback:q,selectedItem:T,onItemLeave:se,itemTextRefCallback:ie,focusSelectedItem:H,selectedItemText:A,position:s,isPositioned:L,searchRef:J,children:r.jsx(_T,{as:xT,allowPinchZoom:!0,children:r.jsx(vT,{asChild:!0,trapped:y.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:Rt(o,te=>{var ce;(ce=y.trigger)==null||ce.focus({preventScroll:!0}),te.preventDefault()}),children:r.jsx(bT,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:r.jsx(ee,U(w(w({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:te=>te.preventDefault()},v),le),{onPlaced:()=>D(!0),ref:E,style:w({display:"flex",flexDirection:"column",outline:"none"},v.style),onKeyDown:Rt(v.onKeyDown,te=>{const ce=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!ce&&te.key.length===1&&Z(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let me=N().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(te.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const xe=te.target,pe=me.indexOf(xe);me=me.slice(pe+1)}setTimeout(()=>$(me)),te.preventDefault()}})}))})})})})});xL.displayName=j0e;var N0e="SelectItemAlignedPosition",yL=_.forwardRef((t,e)=>{const E=t,{__scopeSelect:n,onPlaced:s}=E,o=ke(E,["__scopeSelect","onPlaced"]),a=ji(bl,n),i=Ni(bl,n),[l,c]=_.useState(null),[d,u]=_.useState(null),f=Dn(e,T=>u(T)),m=L1(n),p=_.useRef(!1),g=_.useRef(!0),{viewport:h,selectedItem:x,selectedItemText:v,focusSelectedItem:y}=i,b=_.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&h&&x&&v){const T=a.trigger.getBoundingClientRect(),M=d.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),I=v.getBoundingClientRect();if(a.dir!=="rtl"){const xe=I.left-M.left,pe=A.left-xe,Ee=T.left-pe,Se=T.width+Ee,Te=Math.max(Se,M.width),Ne=window.innerWidth-Lo,De=Fg(pe,[Lo,Math.max(Lo,Ne-Te)]);l.style.minWidth=Se+"px",l.style.left=De+"px"}else{const xe=M.right-I.right,pe=window.innerWidth-A.right-xe,Ee=window.innerWidth-T.right-pe,Se=T.width+Ee,Te=Math.max(Se,M.width),Ne=window.innerWidth-Lo,De=Fg(pe,[Lo,Math.max(Lo,Ne-Te)]);l.style.minWidth=Se+"px",l.style.right=De+"px"}const N=m(),L=window.innerHeight-Lo*2,D=h.scrollHeight,F=window.getComputedStyle(d),$=parseInt(F.borderTopWidth,10),H=parseInt(F.paddingTop,10),z=parseInt(F.borderBottomWidth,10),K=parseInt(F.paddingBottom,10),J=$+H+D+K+z,Z=Math.min(x.offsetHeight*5,J),q=window.getComputedStyle(h),se=parseInt(q.paddingTop,10),ie=parseInt(q.paddingBottom,10),ee=T.top+T.height/2-Lo,le=L-ee,X=x.offsetHeight/2,te=x.offsetTop+X,ce=$+H+te,ue=J-ce;if(ce<=ee){const xe=N.length>0&&x===N[N.length-1].ref.current;l.style.bottom="0px";const pe=d.clientHeight-h.offsetTop-h.offsetHeight,Ee=Math.max(le,X+(xe?ie:0)+pe+z),Se=ce+Ee;l.style.height=Se+"px"}else{const xe=N.length>0&&x===N[0].ref.current;l.style.top="0px";const Ee=Math.max(ee,$+h.offsetTop+(xe?se:0)+X)+ue;l.style.height=Ee+"px",h.scrollTop=ce-ee+h.offsetTop}l.style.margin="".concat(Lo,"px 0"),l.style.minHeight=Z+"px",l.style.maxHeight=L+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,d,h,x,v,a.dir,s]);xr(()=>b(),[b]);const[C,S]=_.useState();xr(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const k=_.useCallback(T=>{T&&g.current===!0&&(b(),y==null||y(),g.current=!1)},[b,y]);return r.jsx(R0e,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:r.jsx(fn.div,U(w({},o),{ref:f,style:w({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})});yL.displayName=N0e;var P0e="SelectPopperPosition",Kx=_.forwardRef((t,e)=>{const l=t,{__scopeSelect:n,align:s="start",collisionPadding:o=Lo}=l,a=ke(l,["__scopeSelect","align","collisionPadding"]),i=O1(n);return r.jsx(CT,U(w(w({},i),a),{ref:e,align:s,collisionPadding:o,style:U(w({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Kx.displayName=P0e;var[R0e,m5]=Zd(bl,{}),Qx="SelectViewport",vL=_.forwardRef((t,e)=>{const d=t,{__scopeSelect:n,nonce:s}=d,o=ke(d,["__scopeSelect","nonce"]),a=Ni(Qx,n),i=m5(Qx,n),l=Dn(e,a.onViewportChange),c=_.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(R1.Slot,{scope:n,children:r.jsx(fn.div,U(w({"data-radix-select-viewport":"",role:"presentation"},o),{ref:l,style:w({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:Rt(o.onScroll,u=>{const f=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&m){const g=Math.abs(c.current-f.scrollTop);if(g>0){const h=window.innerHeight-Lo*2,x=parseFloat(m.style.minHeight),v=parseFloat(m.style.height),y=Math.max(x,v);if(y<h){const b=y+g,C=Math.min(h,b),S=b-C;m.style.height=C+"px",m.style.bottom==="0px"&&(f.scrollTop=S>0?S:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})}))})]})});vL.displayName=Qx;var bL="SelectGroup",[L0e,O0e]=Zd(bL),CL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,s=ke(a,["__scopeSelect"]),o=vh();return r.jsx(L0e,{scope:n,id:o,children:r.jsx(fn.div,U(w({role:"group","aria-labelledby":o},s),{ref:e}))})});CL.displayName=bL;var SL="SelectLabel",wL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,s=ke(a,["__scopeSelect"]),o=O0e(SL,n);return r.jsx(fn.div,U(w({id:o.id},s),{ref:e}))});wL.displayName=SL;var Bg="SelectItem",[D0e,kL]=Zd(Bg),EL=_.forwardRef((t,e)=>{const y=t,{__scopeSelect:n,value:s,disabled:o=!1,textValue:a}=y,i=ke(y,["__scopeSelect","value","disabled","textValue"]),l=ji(Bg,n),c=Ni(Bg,n),d=l.value===s,[u,f]=_.useState(a!=null?a:""),[m,p]=_.useState(!1),g=Dn(e,b=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,b,s,o)}),h=vh(),x=_.useRef("touch"),v=()=>{o||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(D0e,{scope:n,value:s,disabled:o,textId:h,isSelected:d,onItemTextChange:_.useCallback(b=>{f(C=>{var S;return C||((S=b==null?void 0:b.textContent)!=null?S:"").trim()})},[]),children:r.jsx(R1.ItemSlot,{scope:n,value:s,disabled:o,textValue:u,children:r.jsx(fn.div,U(w({role:"option","aria-labelledby":h,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},i),{ref:g,onFocus:Rt(i.onFocus,()=>p(!0)),onBlur:Rt(i.onBlur,()=>p(!1)),onClick:Rt(i.onClick,()=>{x.current!=="mouse"&&v()}),onPointerUp:Rt(i.onPointerUp,()=>{x.current==="mouse"&&v()}),onPointerDown:Rt(i.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:Rt(i.onPointerMove,b=>{var C;x.current=b.pointerType,o?(C=c.onItemLeave)==null||C.call(c):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Rt(i.onPointerLeave,b=>{var C;b.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:Rt(i.onKeyDown,b=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&b.key===" "||(w0e.includes(b.key)&&v(),b.key===" "&&b.preventDefault())})}))})})});EL.displayName=Bg;var Ru="SelectItemText",TL=_.forwardRef((t,e)=>{const v=t,{__scopeSelect:n,className:s,style:o}=v,a=ke(v,["__scopeSelect","className","style"]),i=ji(Ru,n),l=Ni(Ru,n),c=kL(Ru,n),d=M0e(Ru,n),[u,f]=_.useState(null),m=Dn(e,y=>f(y),c.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,y,c.value,c.disabled)}),p=u==null?void 0:u.textContent,g=_.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:h,onNativeOptionRemove:x}=d;return xr(()=>(h(g),()=>x(g)),[h,x,g]),r.jsxs(r.Fragment,{children:[r.jsx(fn.span,U(w({id:c.textId},a),{ref:m})),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?or.createPortal(a.children,i.valueNode):null]})});TL.displayName=Ru;var ML="SelectItemIndicator",AL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,s=ke(a,["__scopeSelect"]);return kL(ML,n).isSelected?r.jsx(fn.span,U(w({"aria-hidden":!0},s),{ref:e})):null});AL.displayName=ML;var Jx="SelectScrollUpButton",F0e=_.forwardRef((t,e)=>{const n=Ni(Jx,t.__scopeSelect),s=m5(Jx,t.__scopeSelect),[o,a]=_.useState(!1),i=Dn(e,s.onScrollButtonChange);return xr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?r.jsx(IL,U(w({},t),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null});F0e.displayName=Jx;var Xx="SelectScrollDownButton",B0e=_.forwardRef((t,e)=>{const n=Ni(Xx,t.__scopeSelect),s=m5(Xx,t.__scopeSelect),[o,a]=_.useState(!1),i=Dn(e,s.onScrollButtonChange);return xr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?r.jsx(IL,U(w({},t),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null});B0e.displayName=Xx;var IL=_.forwardRef((t,e)=>{const d=t,{__scopeSelect:n,onAutoScroll:s}=d,o=ke(d,["__scopeSelect","onAutoScroll"]),a=Ni("SelectScrollButton",n),i=_.useRef(null),l=L1(n),c=_.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return _.useEffect(()=>()=>c(),[c]),xr(()=>{var f;const u=l().find(m=>m.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(fn.div,U(w({"aria-hidden":!0},o),{ref:e,style:w({flexShrink:0},o.style),onPointerDown:Rt(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:Rt(o.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:Rt(o.onPointerLeave,()=>{c()})}))}),U0e="SelectSeparator",jL=_.forwardRef((t,e)=>{const o=t,{__scopeSelect:n}=o,s=ke(o,["__scopeSelect"]);return r.jsx(fn.div,U(w({"aria-hidden":!0},s),{ref:e}))});jL.displayName=U0e;var ey="SelectArrow",$0e=_.forwardRef((t,e)=>{const l=t,{__scopeSelect:n}=l,s=ke(l,["__scopeSelect"]),o=O1(n),a=ji(ey,n),i=Ni(ey,n);return a.open&&i.position==="popper"?r.jsx(ST,U(w(w({},o),s),{ref:e})):null});$0e.displayName=ey;function NL(t){return t===""||t===void 0}var PL=_.forwardRef((t,e)=>{const l=t,{value:n}=l,s=ke(l,["value"]),o=_.useRef(null),a=Dn(e,o),i=F3(n);return _.useEffect(()=>{const c=o.current,d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(i!==n&&f){const m=new Event("change",{bubbles:!0});f.call(c,n),c.dispatchEvent(m)}},[i,n]),r.jsx(m3,{asChild:!0,children:r.jsx("select",U(w({},s),{ref:a,defaultValue:n}))})});PL.displayName="BubbleSelect";function RL(t){const e=tf(t),n=_.useRef(""),s=_.useRef(0),o=_.useCallback(i=>{const l=n.current+i;e(l),(function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),a=_.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,o,a]}function LL(t,e,n){const o=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let i=V0e(t,Math.max(a,0));o.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function V0e(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var H0e=cL,G0e=uL,W0e=mL,z0e=pL,q0e=gL,Y0e=hL,OL=vL,Z0e=CL,K0e=wL,Q0e=EL,J0e=TL,X0e=AL,e2e=jL;const t2e=R(()=>P(()=>Promise.resolve().then(()=>Nr),void 0),{loading:t=>O(t)}),n2e=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yu),__vite__mapDeps([10,1,11])),{loading:t=>O(t)});function s2e(a,o){var i=a,{children:t,iconClassName:e,className:n}=i,s=ke(i,["children","iconClassName","className"]);return r.jsxs(Q0e,U(w({ref:o,className:W("__menu-item flex justify-between",n)},s),{children:[r.jsx(J0e,{children:t}),r.jsx(X0e,{className:"trailing",children:r.jsx(n2e,{className:e!=null?e:"icon-sm"})})]}))}function o2e(t){return r.jsx(OG,w({$as:G0e},t))}function a2e(s){var o=s,{children:t,className:e}=o,n=ke(o,["children","className"]);return r.jsx(f8,U(w({$as:Y0e,side:"bottom",sideOffset:4,alignOffset:-4,position:"popper",className:W("max-h-[60vh] min-w-[220px] overflow-auto",e)},n),{children:r.jsx(OL,{children:t})}))}function r2e(){return r.jsx(z0e,{children:r.jsx(t2e,{className:"icon-sm"})})}function i2e({className:t}){return r.jsx(e2e,{className:W("bg-token-border-default mx-5 my-2 h-px",t)})}function l2e({children:t,className:e}){return r.jsx(K0e,{className:W("text-token-text-secondary mx-2 my-1 px-3 text-xs font-semibold",e),children:t})}function mKe({options:t,value:e,onValueChange:n,disabled:s,defaultValue:o,placeholder:a,triggerClassName:i,contentClassName:l,triggerId:c}){return r.jsxs(Bn.Root,{value:e,onValueChange:n,disabled:s,defaultValue:o,children:[r.jsxs(Bn.Trigger,{className:i,id:c,children:[r.jsx(Bn.Value,{placeholder:a}),r.jsx(Bn.Icon,{})]}),r.jsx(Bn.Portal,{children:r.jsx(Bn.Content,{className:l,children:t.map(d=>r.jsx(Bn.Item,{value:d.value,children:d.label},d.value))})})]})}const Bn={Root:H0e,Trigger:o2e,Value:W0e,Icon:r2e,Portal:q0e,Content:a2e,Item:Kn.forwardRef(s2e),Separator:i2e,Label:l2e,Group:Z0e,Viewport:OL};function c2e(t,e){const[n,s]=_.useState(t),o=_.useRef(mi(a=>s(a),e));return _.useEffect(()=>(o.current=mi(a=>{s(a)},e),()=>{var a;(a=o.current)==null||a.cancel()}),[e]),_.useEffect(()=>{var a;(a=o.current)==null||a.call(o,t)},[t]),n}var B0,iw;function d2e(){if(iw)return B0;iw=1;var t=fh();function e(n){return typeof n=="function"?n:t}return B0=e,B0}var U0,lw;function u2e(){if(lw)return U0;lw=1;var t=DG(),e=d2e(),n=b8(),s=9007199254740991,o=4294967295,a=Math.min;function i(l,c){if(l=n(l),l<1||l>s)return[];var d=o,u=a(l,o);c=e(c),l-=o;for(var f=t(u,c);++d<l;)c(d);return f}return U0=i,U0}var f2e=u2e();const DL=Gn(f2e);function m2e(t){var e,n;return{sharedTextdocId:t.shared_textdoc_id,versionInt:(e=t.version)!=null?e:void 0,title:t.name,type:yl(t.textdoc_type),content:t.content,access:vte(t.access),isModerationBlocked:t.is_moderation_blocked,isAnonifyApiKeyDetected:(n=t.is_anonify_api_key_detected)!=null?n:!1}}const p2e=4e4,g2e={[We.FREE]:8e3,[We.FREE_WORKSPACE]:8e3,[We.GO]:8e3,[We.PLUS]:32e3,[We.PRO]:128e3,[We.SELF_SERVE_BUSINESS]:32e3,[We.ENTERPRISE_CBP]:128e3,[We.EDUCATION_CBP]:32e3,[We.K12]:32e3,[We.QUORUM]:128e3,[We.DEPRECATED_ENTERPRISE]:128e3,[We.DEPRECATED_EDU]:32e3};function pKe(t){return Math.round(g2e[t]/3*4)}const h2e="max-length-toast",FL=mi((t,e,n,s=1.5)=>t.warning(e,{description:n,duration:s,id:h2e}),500,{leading:!0,trailing:!1});function gKe(t,e,n){FL(t,e.formatMessage(Ug.exceededMaxLengthTitle),e.formatMessage(Ug.exceededMaxLengthDescription),n)}function _2e(t,e,n){FL(t,e.formatMessage(Ug.exceededMaxLengthTitle),e.formatMessage(Ug.exceededMaxLengthForTruncatedMessageDescription),n)}const Ug=be({exceededMaxLengthDescription:{id:"YhSTHh",defaultMessage:"The document might be longer than a canvas can currently handle. To edit, please reduce the length."},exceededMaxLengthForTruncatedMessageDescription:{id:"r87COE",defaultMessage:"The document was truncated because it was too long."},exceededMaxLengthTitle:{id:"v9nHC8",defaultMessage:"Document may exceed maximum length"}}),D1="temp";function BL(t,e){return"".concat(D1,"-tdc-").concat(e,"-").concat(t)}function p5(t){return"".concat(D1,"-td-").concat(t)}function x2e(){return"".concat(D1,"-td-user:").concat(Date.now())}function y2e(t){return"".concat(D1,"-td-remix:").concat(t)}const Kd=Dt(In(()=>({attachedTempTextdocs:{}}))),{setState:Ua,getState:v2e}=Kd,b2e=7e3,UL={createTempTextdoc:(t,e,n,s)=>{const o=x2e(),a=s?yl("code/"+s):gI(t)?cr.CODE_OTHER:cr.DOCUMENT;Ua(d=>{d.attachedTempTextdocs[o]={tempTextdocId:o,createdAt:Date.now(),status:co.INFERRING,type:a,title:e,content:t,create_source:n,hasUserEdits:!1}});let i=!1;const l=new Promise(d=>setTimeout(d,b2e)).then(()=>{i=!0}),c=ge.safePost("/conversation/textdocs/infer_metadata",{requestBody:{content:t.slice(0,p2e)}}).then(({name:d,type:u})=>{i||Ua(f=>{f.attachedTempTextdocs[o]&&(f.attachedTempTextdocs[o].title=d,f.attachedTempTextdocs[o].type=yl(u))})});return Promise.race([l,c]).finally(()=>{Ua(d=>{d.attachedTempTextdocs[o]&&(d.attachedTempTextdocs[o].status=co.PENDING)})}),o},createRemixTempTextdoc:(t,e)=>{const n=y2e(t);if(!v2e().attachedTempTextdocs[n])return Ua(s=>{s.attachedTempTextdocs[n]={tempTextdocId:n,createdAt:Date.now(),status:co.PENDING,type:cr.LOADING,title:"",content:"",create_source:hf.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:t}}),ge.safeGet("/textdoc/shared/{shared_textdoc_id}",{parameters:{path:{shared_textdoc_id:t}}}).then(({shared_textdoc:s})=>{const o=m2e(s);Ua(a=>{a.attachedTempTextdocs[n]={tempTextdocId:n,createdAt:Date.now(),status:co.PENDING,type:o.type,title:e.formatMessage({id:"cuH4su",defaultMessage:"Copy of {title}"},{title:o.title}),content:o.content,create_source:hf.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:o.sharedTextdocId}})}).catch(()=>{UL.removeTempTextdoc(n),window.location.href=FG(BG.CANVAS_NOT_FOUND)}),n},replaceTempTextdocContent:(t,e)=>{Ua(n=>{n.attachedTempTextdocs[t].content=e,n.attachedTempTextdocs[t].hasUserEdits=!0})},markAsSent:t=>{Ua(e=>{e.attachedTempTextdocs[t].status===co.PENDING?e.attachedTempTextdocs[t].status=co.SENT:delete e.attachedTempTextdocs[t]})},markAllAsSent:()=>{Ua(t=>{for(const e of Object.keys(t.attachedTempTextdocs))t.attachedTempTextdocs[e].status===co.PENDING?t.attachedTempTextdocs[e].status=co.SENT:delete t.attachedTempTextdocs[e]})},removeTempTextdoc:t=>{Ua(e=>{delete e.attachedTempTextdocs[t]})}},xm=Bl(({attachedTempTextdocs:t})=>t),C2e=Bl(t=>Object.values(t)),g5=Bl(t=>Object.values(t).filter(e=>e.status!==co.SENT)),S2e=()=>g5(xm(Kd.getState())),w2e=()=>Kd(t=>C2e(xm(t))),k2e=()=>Kd(t=>g5(xm(t))),hKe=t=>Kd(e=>{if(t)return xm(e)[t]}),_Ke=()=>Kd(t=>g5(xm(t)).length>0),E2e=t=>{const[e,n]=_.useState(null),s=_.useCallback(a=>{n(i=>{if(!i)return[a];const l=[...i];for(let c=0;c<i.length;c++)l[c].id===a.id?l[c]=a:c===l.length-1&&l.push(a);return l})},[]),o=_.useCallback(()=>n(null),[]);return iC(bg.TurnComplete,async()=>{await t(),o()}),iC(bg.CanvasMessage,async({message:a})=>{var d;const{message:i}=a,{recipient:l,author:c}=i;(l!=null&&l.startsWith(ci)||(d=c.name)!=null&&d.startsWith(ci))&&s(i)}),e};function T2e(t,e){return t.replace(new RegExp("\\\\(\\d+)|\\\\g<(?:(\\d+)|(\\D[^>]*))>|((?<!\\\\)\\\\(?:g(?:<[^>]*)?)?$)","gi"),(n,s,o,a,i)=>{var c,d,u;if(s==="0")return"\\0";const l=s!=null?s:o;if(l)return(c=e[w8(l)])!=null?c:"";if(a)return(u=(d=e.groups)==null?void 0:d[a])!=null?u:"";if(i)return"";throw new Error("Unreachable")})}function M2e(t,e){var x;let n="",s=0,o=0,a=0,i=0,l=!1;const c=v=>{s+=v},d=v=>{s>o&&(n+=t.slice(o,s)),s=o=s+v},u=v=>{d(0),n+=v},f=()=>{u("\\"),c(1)},m=v=>{if(s+v<t.length)return t[s+v]},p=(v,y=0)=>s+y<t.length&&v===t[s+y],g=v=>{const y=t.indexOf(v,s);if(y===-1)d(t.length-s);else return y-s},h=v=>{let y=1;if(m(v)==="\\"){const C=m(v+1);y=C==="U"?10:C==="u"?6:C==="x"?4:2}const b=s+v+y>t.length;return b&&d(t.length-s),b};for(;s<t.length;){if(p("\\")){if(h(0))continue;const b=(x=m(1))!=null?x:"";if(b==="a")d(2),u("\\x07");else if(b==="A")d(2),u("^");else if(b==="z")d(2),u("$");else if(b==="Z")d(2),u("(?=\\n?$)");else if(b==="U"){const C=t.slice(s+2,s+10);d(10),u("\\u{".concat(parseInt(C,16).toString(16),"}"))}else if(b==="u")c(6);else if(b==="x")c(4);else{let C;l?C=/[0bdDsSwWfnrtv()[\]{}|/\\^-]/.test(b):/[1-9]/.test(b)?C=parseInt(b,10)<=i:C=/[0bBdDsSwWfnrtv()[\]{}|/\\^$.?*+]/.test(b),C?c(2):d(1)}continue}if(p("]")){l?(l=!1,c(1)):f();continue}else if(l){if(p("-")&&h(1))continue;/[()[\]{}|/\\]/.test(t[s])?f():c(1);continue}else if(p("[")){l=!0,c(1),p("]")&&f();continue}if(p("|")&&h(1))continue;if(p("{")){const b=/^\{(?:\d+(?:,\d*)?(\}|$)|$)/.exec(t.slice(s));s>0&&(b==null?void 0:b[1])==="}"?c(b[0].length):s>0&&b&&e?d(b[0].length):f();continue}else if(p("}")){f();continue}if(p("+")){const b=m(-1);b&&/[*+?}]/.test(b)&&m(-2)!=="\\"?d(1):c(1);continue}if(p(")")){a>0?(a--,c(1)):f();continue}if(!p("(")){c(1);continue}if(h(1))continue;if(m(1)!=="?"){a++,i++,c(1);continue}if(h(2))continue;const v=m(2);if(!v){d(2);continue}if(v==="#"){const b=g(")");b&&d(1+b);continue}if(v==="P"){if(m(3)==="="){const b=g(")");if(b){const C=t.slice(s+4,s+b);d(1+b),u("\\k<".concat(C,">"))}}else{const b=g(">");if(b){const C=t.slice(s+4,s+b);if(d(1+b),h(0))continue;u("(?<".concat(C,">")),a++}}continue}if(/[-a-z]/.test(v)){const b=t.indexOf(":",s)>=0,C=g(b?":":")");if(C&&d(1+C),b){if(h(0))continue;u("(?:"),a++}continue}if(v===">"){if(d(3),h(0))continue;u("(?:"),a++;continue}const y=v==="<"?4:3;h(y)||(c(y),a++)}for(n+=t.slice(o,t.length),l&&(n+="]");a-- >0;)n+=")";return n.length>0?n:"(?!)"}function cw(t){const e=[/^`{1,3}\s*$/,/^```[^\n]*\n?/],n=[/\n?`{1,3}\s*$/];for(const s of e)if(s.test(t)){t=t.replace(s,"");break}for(const s of n)if(s.test(t)){t=t.replace(s,"");break}return t}function $L(t){let e=t;return e=e.replace(/\.[^/.]+$/,""),e=e.replace(/_/g," "),e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" ")}function $g(t,e){return e!=null||t!=null?{modelSelectionPositionRange:e,modelCursorPosition:t}:void 0}function A2e(t,e,n){const s=[],o=e.start-e.end+n;for(const a of t){const i=I2e(a.at,e,o);i&&s.push(i===a.at?a:U(w({},a),{at:i}))}return s}function I2e(t,e,n){return e.start>=t.end?t:e.start<=t.start&&e.end>=t.end?null:e.end<=t.start?n===0?t:{start:t.start+n,end:t.end+n}:e.start<=t.start?{start:e.end+n,end:t.end+n}:e.end>=t.end?{start:t.start,end:e.start}:{start:t.start,end:t.end+n}}const j2e=/[*_-\s\d.\\`]+$/;function ty(t,e){return e?t.replace(j2e,""):t}function VL(t,e){return ei(t,n=>{for(const s of e){if(s.kind===Un.CREATE){const o=P2e(s);qu(n,o)}else{const o=n.textdocById[s.textdocId];if(!o){Re.addError("Attempted to apply canmore operation to an unknown target id",{textdocOp:s});continue}const a=o.versions[o.versions.length-1],i=HL(a,s);qu(n,i,N2e(a,s))}s.textdocId&&(n.latestTextdocId=s.textdocId)}})}function N2e(t,e){if(e.author.role===Ke.User)return t.messageId?!0:e.createdAt-t.createdAt>3600;switch(e.kind){case Un.REWRITE:return!0;case Un.EDIT:return e.messageId!==t.messageId;case Un.ADD_COMMENT:return!1;case Un.REMOVE_COMMENT:return!1}}function P2e(t){var s,o;const e=!!t.isPartial,n=ty(t.content,e);return{textdocId:t.textdocId,versionInt:(s=t.versionInt)!=null?s:null,messageId:(o=t.messageId)!=null?o:null,title:t.title,type:t.type,content:n,createdAt:t.createdAt,status:e?Os.CREATING:Os.COMPLETE,comments:[],modelCursor:$g(t.author.role===Ke.Assistant&&t.isPartial?n.length:void 0)}}function R2e(t,e){if(!t.isPartial)return;if(t.isPartialRange)return $g(void 0,t.at);const n=t.at.start+e.length;return $g(n)}function HL(t,e){var n,s,o,a,i,l,c,d,u,f;switch(e.kind){case Un.REMOVE_COMMENT:return U(w({},t),{versionInt:(n=e.versionInt)!=null?n:t.versionInt,comments:t.comments.map(m=>m.id===e.commentId?U(w({},m),{status:e.reason===xI.ACCEPT?wx.ACCEPT_INITIATED:wx.DISMISSED}):m)});case Un.REWRITE:{const m=t.status!==Os.COMPLETE||e.isPartial===!0,p=ty(e.content,m),g=e.author.role===Ke.Assistant&&e.isPartial?p.length:void 0;return U(w({},t),{versionInt:(s=e.versionInt)!=null?s:t.versionInt,messageId:(o=e.messageId)!=null?o:null,content:p,createdAt:e.createdAt,comments:(a=e.comments)!=null?a:t.comments,status:e.isPartial?Os.REWRITING:Os.COMPLETE,modelCursor:$g(g)})}case Un.EDIT:{const m=e.isPartial&&e.isPartialRange?t.content.slice(e.at.start,e.at.end):ty(e.content,e.isPartial===!0),p=t.content.slice(0,e.at.start)+m+t.content.slice(e.at.end);return U(w({},t),{versionInt:(i=e.versionInt)!=null?i:t.versionInt,messageId:(l=e.messageId)!=null?l:null,content:p,createdAt:e.createdAt,status:e.isPartial?Os.UPDATING:Os.COMPLETE,comments:A2e(t.comments,e.at,m.length),modelCursor:R2e(e,m)})}case Un.ADD_COMMENT:{const m={id:(c=e.id)!=null?c:e.tempId,tempId:e.tempId,at:e.at,content:(d=e.content)!=null?d:""},p=t.comments.concat(m);return U(w({},t),{versionInt:(u=e.versionInt)!=null?u:t.versionInt,messageId:(f=e.messageId)!=null?f:null,createdAt:e.createdAt,status:e.isPartial?Os.COMMENTING:Os.COMPLETE,comments:p})}}}function L2e(t){let e="";const n=t.length;let s=0,o=0;for(;s<n;){let a=t.charCodeAt(s);if(a!==92){s++;continue}if(o<s&&(e+=t.slice(o,s)),s++,s>=n){e+="\\";break}switch(a=t.charCodeAt(s),a){case 110:e+="\n",s++;break;case 116:e+="	",s++;break;case 114:e+="\r",s++;break;case 98:e+="\b",s++;break;case 102:e+="\f",s++;break;case 118:e+="\v",s++;break;case 48:e+="\0",s++;break;case 39:e+="'",s++;break;case 34:e+='"',s++;break;case 92:e+="\\",s++;break;case 120:if(s+2<n){const i=parseInt(t.slice(s+1,s+3),16);if(!isNaN(i)){e+=String.fromCharCode(i),s+=3;break}}e+="\\x",s++;break;case 117:if(s+1<n)if(t.charAt(s+1)==="{"){const i=t.indexOf("}",s+2);if(i!==-1){const l=parseInt(t.slice(s+2,i),16);if(!isNaN(l)&&l<=1114111){e+=String.fromCodePoint(l),s=i+1;break}}}else{const i=parseInt(t.slice(s+1,s+5),16);if(!isNaN(i)){e+=String.fromCharCode(i),s+=5;break}}e+="\\u",s++;break;default:e+="\\"+t.charAt(s),s++;break}o=s}return o<n&&(e+=t.slice(o)),e}const dw=t=>t===" "||t==="\n"||t==="\r"||t==="	";function O2e(t,e=!1){let n=0,s=null;const o=[];if(!t)return[void 0,o];if(e)return[l(),o];try{return[JSON.parse(t),null]}catch(g){return s=g,[l(),o]}function a(){for(;n<t.length&&dw(t[n]);)n++;return n<t.length}function i(g){return a()&&t[n]===g?(n++,!0):!1}function l(){if(a())switch(t[n]){case"{":return f();case"[":return m();case'"':{const[g]=d();return g}case"f":return p("false",!1);case"t":return p("true",!0);case"n":return p("null",null);case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return u()}throw s}function c(g,h=!1){return h?L2e(g):g}function d(g=!1){const h=n+1;let x=!1;for(n++;n<t.length;){const v=t[n++];if(v==="\\"){if(x=!0,n===t.length||t[n]==="u"&&n+4>=t.length){const y=n-1;return n=t.length,[c(t.slice(h,y),x),!1]}n++;continue}if(v==='"'){let y=n;for(;y<t.length&&dw(t[y]);)y++;if(t[y]==null||t[y]===","||t[y]==="]"||t[y]==="}"||g&&t[y]===":")return[c(t.slice(h,n-1),x),!0]}}return[c(t.slice(h,n),x),!1]}function u(){const g=n;for(;n<t.length&&/[0-9.eE+-]/.test(t[n]);)n++;const h=Number(t.slice(g,n));if(isNaN(h)){if(a())throw s;return 0}return h}function f(){n++;const g={};if(i("}"))return g;for(;a();){const[h,x]=d(!0);if(!x||(o.push(h),!a()))break;if(!i(":"))throw s;if(!a()||(g[h]=l(),!a()))break;if(i("}")){o.pop();break}if(!i(","))throw s;o.pop()}return g}function m(){n++;const g=[];if(i("]"))return g;for(o.push(0);a()&&(g.push(l()),!!a());){if(i("]")){o.pop();break}if(!i(","))throw s;o[o.length-1]=g.length}return g}function p(g,h){const x=n+g.length;if(x<=t.length?t.slice(n,x)===g:g.startsWith(t.slice(n)))return n=x,h;throw s}}function Yu(t,e,n=!1){try{const[s,o]=O2e(t);return[e(s),o]}catch(s){return n&&Fl.logError("JSON parsing",s),[void 0,[]]}}function du(t,e){return t!=null&&e.every((n,s)=>t[s]===n)}const D2e=Go({type:li(ms),name:li(ms),content:li(ms)}),F2e=Go({updates:k8(Go({pattern:li(ms),multiple:li(Vu),replacement:li(ms)}))}),B2e=Go({comments:k8(Go({pattern:li(ms),comment:li(ms)}))});function GL(t){var s;const e=t.author.name;if(!vN(e))return null;const n=(s=t==null?void 0:t.metadata)==null?void 0:s.canvas;return{function:e,status:$2e(t),textdocId:n==null?void 0:n.textdoc_id,type:(n==null?void 0:n.textdoc_type)&&yl(n.textdoc_type),versionInt:V2e(n),commentIds:n==null?void 0:n.comment_ids}}function WL(t,e,n){var d,u,f,m,p;const{id:s,author:o,recipient:a,create_time:i}=e;if(!i)throw new Error("Expected a create_time");const l=bo(e),c=n&&GL(n);if((d=e==null?void 0:e.metadata)!=null&&d.is_redacted||(c==null?void 0:c.status)===Tt.REDACTED||l==="The output of this plugin was redacted.")return{function:a,status:Tt.REDACTED,messageId:s,author:o,createdAt:i};switch(a){case Yn.CreateTextdoc:{const[g,h]=Yu(l,D2e),x=(u=c==null?void 0:c.type)!=null?u:!(g!=null&&g.type)||du(h,["type"])?void 0:yl(g.type);return{function:Yn.CreateTextdoc,status:(f=c==null?void 0:c.status)!=null?f:$0(t,e,h!=null),messageId:s,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,title:g==null?void 0:g.name,type:x,content:g==null?void 0:g.content}}case Yn.UpdateTextdoc:{const[g,h]=Yu(l,F2e,!t),x=g==null?void 0:g.updates.map((v,y)=>U(w({},v),{isPartialPattern:du(h,["updates",y,"pattern"]),isPartial:du(h,["updates",y])}));return{function:Yn.UpdateTextdoc,status:(m=c==null?void 0:c.status)!=null?m:$0(t,e,h!=null),messageId:s,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,updates:x}}case Yn.CommentTextdoc:{const[g,h]=Yu(l,B2e,!t),x=c==null?void 0:c.commentIds,v=g==null?void 0:g.comments.map((y,b)=>U(w({},y),{id:x==null?void 0:x[b],isPartialPattern:du(h,["comments",b,"pattern"]),isPartial:du(h,["comments",b])}));return{function:Yn.CommentTextdoc,status:(p=c==null?void 0:c.status)!=null?p:$0(t,e,h!=null),messageId:s,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,comments:v}}}}function ny(t){return vN(t==null?void 0:t.recipient)}function U2e(t,e=0){for(let n=e;n<t.length;n++)if(ny(t[n]))return!0;return!1}function $0(t,e,n){var o,a;return((a=(o=e==null?void 0:e.metadata)==null?void 0:o.finish_details)==null?void 0:a.type)==="interrupted"?Tt.CANCELED:t?n?Tt.STREAMING:Tt.WAITING:Tt.FAILED}function $2e(t){var n,s;if((n=t==null?void 0:t.metadata)!=null&&n.is_redacted)return Tt.REDACTED;if((t==null?void 0:t.content.content_type)===ut.SystemError)return Tt.FAILED;const e=(s=t==null?void 0:t.metadata)==null?void 0:s.canvas;return e!=null&&e.is_failure!==!0?Tt.COMPLETE:Tt.FAILED}function V2e(t){var e;return(e=t==null?void 0:t.version)!=null?e:t==null?void 0:t.version_int}const H2e=5;function h5(t){var n;let e=null;for(let s=0;s<t.length;s++){const o=t[s];if(ny(o)){let a=null;for(let i=s+1;i<t.length;i++){const l=t[i];if(ny(l))break;if(((n=l.author)==null?void 0:n.name)===o.recipient){a=l;break}}e?e.push([o,a]):e=[[o,a]]}}return e}function G2e(t,e,n){let s=null;const o=h5(n);if(!o)return s;for(const[a,i]of o){const l=WL(t,a,i),c=W2e(e,l);c&&(e&&(e=VL(e,c)),s?s=s.concat(c):s=c)}return s}const V0=Bl((t,e,n)=>{Re.addError(e,n)},([t],[e])=>t===e);function W2e(t,e){var a,i,l,c,d,u,f;if(e.status===Tt.FAILED||e.status===Tt.CANCELED)return null;if(e.function===Yn.CreateTextdoc){if(!e.type)return null;const m=p5(e.messageId),p=e.content&&Sg(e.type)?cw(e.content):e.content;return[{kind:Un.CREATE,textdocId:(a=e.textdocId)!=null?a:m,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,tempTextdocId:m,title:$L((i=e.title)!=null?i:""),type:e.type,content:p!=null?p:"",isPartial:e.status===Tt.STREAMING}]}const n=t==null?void 0:t.latestTextdocId,s=(l=e==null?void 0:e.textdocId)!=null?l:n;if(e.status===Tt.COMPLETE&&(n?e!=null&&e.textdocId&&e.textdocId!==n&&V0(e.messageId,"Attempted to parse canmore operation with incorrect client latest target id",{latestTextdocId:n,toolCall:e}):V0(e.messageId,"Attempted to parse canmore operation but latestTextdocId is unset",{toolCall:e})),!s)return null;const o=So((c=Ib(t,s))==null?void 0:c.versions);if(!o)return e.status===Tt.COMPLETE&&V0(e.messageId,"Attempted to parse canmore operation against unknown target id",{textdocId:s}),null;switch(e.function){case Yn.UpdateTextdoc:{const m=[],p=(d=e.updates)!=null?d:[];for(let g=0;g<p.length;g++){const h=p[g];if(h.isPartialPattern&&h.pattern&&h.pattern.length<H2e)continue;if(h.pattern===".*"){const y=h.replacement?Sg(o.type)?cw(h.replacement):h.replacement:"";return[{kind:Un.REWRITE,textdocId:s,versionInt:e.versionInt,messageId:e.messageId,createdAt:e.createdAt,author:e.author,content:y,isPartial:e.status===Tt.STREAMING&&h.isPartial,comments:[]}]}const x=fw(h.pattern,h.isPartialPattern,h.multiple);if(!x)continue;let v=!1;for(const y of uw(o.content,x,h.multiple)){v=!0;const b=mw(y),C=h.replacement&&T2e(h.replacement,y);for(const S of m)if(S.at.end<=b.start){if(!S.isPartialRange){const k=S.at.start-S.at.end+S.content.length;b.start+=k,b.end+=k}}else S.at.start<b.end;m.push({kind:Un.EDIT,textdocId:s,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,at:b,content:C!=null?C:"",isPartialRange:e.status===Tt.STREAMING&&h.isPartialPattern,isPartial:e.status===Tt.STREAMING&&h.isPartial})}if(!h.isPartialPattern&&!v)return null}return m.length>0?m:null}case Yn.CommentTextdoc:{const m=[],p=(u=e.comments)!=null?u:[];for(let g=0;g<p.length;g++){const h=p[g],x=fw(h.pattern,h.isPartialPattern);if(!x)continue;let v=!1;for(const y of uw(o.content,x)){v=!0;const b=mw(y);b.end>b.start&&m.push({kind:Un.ADD_COMMENT,textdocId:s,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,id:h.id,tempId:BL(e.messageId,g),at:b,content:(f=h.comment)!=null?f:"",isPartialRange:e.status===Tt.STREAMING&&h.isPartialPattern,isPartial:e.status===Tt.STREAMING&&h.isPartial})}if(!h.isPartialPattern&&!v)return null}return m.length>0?m:null}}}function*uw(t,e,n=!1){if(n)yield*u_(t.matchAll(e));else{const s=t.match(e);s&&(yield s)}}function fw(t,e,n=!1){if(t)try{const s=M2e(t,e);return new RegExp(s,n?"gsv":"sv")}catch(s){console.warn("Assistant returned invalid Regexp, dropping",{pattern:t,error:s})}}function mw(t){return{start:t.index,end:t.index+t[0].length}}const pw=(t,e)=>{var o,a,i;for(const l of e){const c=(o=l.metadata)==null?void 0:o.canvas;if(c!=null&&c.user_created_temp_textdoc_id&&(c!=null&&c.textdoc_id)){const{user_created_temp_textdoc_id:d,textdoc_id:u}=c;t=ei(t,f=>{f.latestTextdocId=u,f.resolveTempTextdocId[d]=u})}}const n=Pl(e,l=>IR(l));for(let l=e.length-1;l>=0;l--){const{metadata:c}=e[l],d=c==null?void 0:c.canvas,u=(i=(a=c==null?void 0:c.open_in_canvas_view)==null?void 0:a.id)!=null?i:d==null?void 0:d.textdoc_id;if(u){t=ei(t,f=>{f.latestTextdocId=u!=null?u:null,n&&(f.lastCanvasAssistantMessageById[u]=n.id)});break}}const s=h5(e);if(!s)return t;for(const[l,c]of s){const d=c&&GL(c);d&&(t=ei(t,u=>{if(d.function===Yn.CreateTextdoc){const{textdocId:f}=d;f&&(u.resolveTempTextdocId[p5(l.id)]=f)}else if(d.function===Yn.CommentTextdoc){const{commentIds:f=[]}=d;for(let m=0;m<f.length;m++){const p=f[m],g=BL(l.id,m);u.resolveTempCommentId[p]=g}}}))}return t},z2e=(t,e,n)=>{const s=ft(t),o=he.getTree(s),a=he.getVariantIds(s,n.messages[0].id);if(a.length<2)return pw(e,n.messages);for(const i of a){const l=o.getLeafFromNode(i).id,c=he.getConversationLastTurn(s,l);c&&(e=pw(e,c.messages))}return e};function q2e(){return new WeakMap}function zL(t,e,n,s){const o=n[s];let a=e.get(o);if(!a){const i=s===0?hN():zL(t,e,n,s-1);a=z2e(t,i,o),e.set(o,a)}return a}function Y2e(t,e,n){return n.length===0?null:zL(t,e,n,n.length-1)}function Z2e(t,e){const[n]=_.useState(q2e);return _.useMemo(()=>Y2e(t,n,e),[n,t,e])}const gw=t=>{if(!t)return;const{messages:e}=t,n=zT(e!=null?e:[],o=>o.author.role===Ke.System||o.author.role===Ke.Developer),s=n===-1?e:e==null?void 0:e.slice(n+1);if(s&&U2e(s))return s},K2e=({lastTurn:t,clientThreadId:e,isRequestActive:n,persistedTextdocStoreStatus:s})=>{const[o,a]=_.useState(!0),i=n||!o||s!==Og.READY,l=_.useMemo(()=>{if(!t)return null;const d=ft(e),u=he.getTree(d),f=he.getVariantIds(d,t.messages[0].id);return f.length<2?null:f.map(m=>{const p=u.getLeafFromNode(m).id;return he.getConversationLastTurn(d,p)})},[e,t]);return[_.useMemo(()=>{var d,u;return!i||!t?null:l?(u=l.flatMap(gw).filter(H3))!=null?u:null:(d=gw(t))!=null?d:null},[i,t,l]),a]};class qL{constructor(e,n,s,o){Q(this,"sentLength",null);Q(this,"sentIsComplete",null);Q(this,"bufferedLength");Q(this,"requestUpdateRaf",null);Q(this,"prevBuffer");Q(this,"nextBuffer");this.targetLength=e,this.isActivelyStreaming=n,this.onUpdate=o,this.bufferedLength=s?0:this.targetLength,s&&!s.isComplete()?(s.nextBuffer=this,this.prevBuffer=s):s!=null&&s.isComplete()&&(this.bufferedLength=this.targetLength)}setTargetLength(e,n){e<this.bufferedLength&&(this.bufferedLength=e),this.targetLength=e,this.isActivelyStreaming=n,this.shouldUpdate()&&this.updateBufferedState()}shouldUpdate(){return!this.prevBuffer&&(this.isBuffering()||this.sentIsComplete!==this.isComplete())}isBuffering(){return this.bufferedLength<this.targetLength}isComplete(){return!this.prevBuffer&&!this.isActivelyStreaming&&!this.isBuffering()}getTotalRemainingLength(){let e=this.targetLength,n=this.nextBuffer;for(;n;)e+=n.targetLength,n=n.nextBuffer;return e-this.bufferedLength}requestUpdate(){this.requestUpdateRaf||this.sentLength===this.bufferedLength&&this.sentIsComplete===this.isComplete()||(this.requestUpdateRaf=window.requestAnimationFrame(()=>{this.requestUpdateRaf=null;const e=this.isComplete();this.sentLength=this.bufferedLength,this.sentIsComplete=e,this.onUpdate(this.bufferedLength,e),e&&this.resolveDependency()}))}resolveDependency(){if(this.nextBuffer){const e=this.nextBuffer;this.nextBuffer=e.prevBuffer=void 0,e.shouldUpdate()&&e.updateBufferedState()}}destroy(){this.resolveDependency(),this.requestUpdateRaf&&(window.cancelAnimationFrame(this.requestUpdateRaf),this.requestUpdateRaf=null)}}const Ji=class Ji extends qL{constructor(){super(...arguments);Q(this,"frameRequestId");Q(this,"prevAddFrameTime")}updateBufferedState(){if(!this.frameRequestId){const n=this.getTotalRemainingLength(),s=Math.max(Ji.MIN_BUFFERING_CHAR_PER_MS,n/Ji.MAX_BUFFERING_LAG_MS);this.frameRequestId=window.requestAnimationFrame(o=>{this.frameRequestId=void 0;const a=this.prevAddFrameTime===void 0?2/Ji.MIN_BUFFERING_CHAR_PER_MS:o-this.prevAddFrameTime,i=Math.floor(s*a);i>0&&(this.prevAddFrameTime=o,this.bufferedLength=Math.min(this.bufferedLength+i,this.targetLength)),this.requestUpdate(),this.shouldUpdate()&&this.updateBufferedState()})}}destroy(){super.destroy(),this.frameRequestId&&window.cancelAnimationFrame(this.frameRequestId)}};Q(Ji,"MAX_BUFFERING_LAG_MS",500),Q(Ji,"MIN_BUFFERING_CHAR_PER_MS",1/30);let sy=Ji;class _5 extends qL{constructor(e,n,s,o){super(Ng(e).length,s,o,(a,i)=>n(OP(this.textMessageParts,a),i)),this.textMessageParts=e}onMessagePartsUpdated(e,n){this.textMessageParts=e,this.setTargetLength(Ng(e).length,n)}removeDelayedRender(){return!this.isBuffering()}}class xKe extends _5{constructor(n,s,o,a){super(n,s,o,a);Q(this,"ALPHA",.1);Q(this,"DIV",1.2);Q(this,"MUL",1.5);Q(this,"minRate",1);Q(this,"expectedDisplayInterval",.05);Q(this,"displayNextChunkTimeout");Q(this,"_rate",this.minRate);Q(this,"_lastArrival",null);Q(this,"_lastDrain",0);Q(this,"_drainCarry",0);Q(this,"_lastTargetLength",0);this.updateReactComponentDisplay=s}removeDelayedRender(){return this.bufferedLength>1}calculateBufferLength(){if(!this.isActivelyStreaming){this.bufferedLength<this.targetLength&&(this.bufferedLength=this.targetLength,this.requestUpdate());return}const n=performance.now()/1e3,s=this.targetLength-this._lastTargetLength;if(this._lastTargetLength=this.targetLength,s>0){if(this._lastArrival!=null){const c=Math.max(n-this._lastArrival,10),d=s/c;this._rate=Math.max(this.minRate,this.ALPHA*d+(1-this.ALPHA)*this._rate)}else this._rate=s;this._lastArrival=n}const o=n-this._lastDrain;this._lastDrain=n;const a=this.targetLength-this.bufferedLength;for(let c=0;c<(o+this._drainCarry)/this.expectedDisplayInterval;c++)a&&a<this._rate*this.MUL&&(this._rate=(a+this._rate*this.MUL)/2),a>this._rate/this.DIV&&(this._rate=(a+this._rate/this.DIV)/2);this._rate=Math.max(this.minRate,this._rate);const i=o*this._rate+this._drainCarry,l=Math.floor(i);this._drainCarry=i-l,l>=1&&(this.bufferedLength=Math.min(this.bufferedLength+l,this.targetLength)),this.requestUpdate()}updateBufferedState(){this.calculateBufferLength(),this.displayNextChunkTimeout||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},50))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}}const Za=class Za extends _5{constructor(n,s,o,a){super(n,s,o,a);Q(this,"displayNextChunkTimeout");this.updateReactComponentDisplay=s}updateBufferedState(){const n=this.getTotalRemainingLength(),s=n<Za.MIN_CHARS_BEHIND_TO_CATCHUP?this.targetLength-this.bufferedLength:Math.ceil(n*Za.UPDATE_FREQUENCY_MS/Za.CATCHUP_TIME_MS);this.bufferedLength=Math.min(this.bufferedLength+s,this.targetLength),this.requestUpdate(),this.displayNextChunkTimeout||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},Za.UPDATE_FREQUENCY_MS))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}};Q(Za,"MIN_CHARS_BEHIND_TO_CATCHUP",5),Q(Za,"CATCHUP_TIME_MS",300),Q(Za,"UPDATE_FREQUENCY_MS",30);let Vg=Za;const mp=15,H0=8;class yKe extends _5{constructor(n,s,o,a,i){var l;super(n,s,o,a);Q(this,"LAG_FACTORS",w({".":mp,"!":mp,"?":mp,"\n":mp,",":H0,":":H0,";":H0,DEFAULT_LAG_FACTOR:.9,BUFFER_FACTOR:.08},typeof window<"u"&&window.__PUNCTUATION_BUFFER_LAG_FACTORS));Q(this,"concatenatedText");Q(this,"displayNextCharTimeout");Q(this,"debug");Q(this,"streamStartMs");Q(this,"averageMsPerChar");Q(this,"_throttledDebugLog",b3(n=>{console.debug(n)},500,{leading:!0,trailing:!0}));this.updateReactComponentDisplay=s,this.concatenatedText=Ng(this.textMessageParts),this.debug=(l=i==null?void 0:i.debug)!=null?l:!1,this.streamStartMs=0,this.averageMsPerChar=.25,this.debug&&console.debug(["PunctuationBuffer:","[lagFactors: ".concat(JSON.stringify(this.LAG_FACTORS,null,2),"]")].join("\n"))}displayNextChar(){this.displayNextCharTimeout=void 0,this.shouldUpdate()&&(this.bufferedLength++,this.requestUpdate(),this.displayNextCharTimeout=window.setTimeout(()=>this.displayNextChar(),this._getNextCharDelayMs()))}updateBufferedState(){this.concatenatedText=Ng(this.textMessageParts),this.streamStartMs===0?this.streamStartMs=Date.now():this.averageMsPerChar=(Date.now()-this.streamStartMs)/this.targetLength,this.displayNextCharTimeout||this.displayNextChar()}destroy(){super.destroy(),window.clearTimeout(this.displayNextCharTimeout)}_getNextCharDelayMs(){var l;const n=this.concatenatedText[this.bufferedLength-1],s=this.getTotalRemainingLength(),o=1/Math.max(s*this.LAG_FACTORS.BUFFER_FACTOR,1),a=((l=this.LAG_FACTORS[n])!=null?l:this.LAG_FACTORS.DEFAULT_LAG_FACTOR)*o,i=this.averageMsPerChar*a;return this.debug&&this._throttledDebugLog(["PunctuationBuffer:","[lagMs: ".concat(i,"]"),'[lastChar: "'.concat(n,'"]'),"[averageMsPerChar: ".concat(this.averageMsPerChar,"]"),"[lagFactor: ".concat(a,"]"),"[bufferLagFactor: ".concat(o,"]"),"[remainingLength: ".concat(s,"]"),"==="].join("\n")),i}}function Q2e(t){return t.type==="text"}class hw{constructor(e,n,s="",o,a){Q(this,"buffer");Q(this,"text");this.buffer=new e([s],(i,l)=>{const c=i.filter(Q2e).map(d=>d.text).join("");n(c,l)},o,a),this.text=s}setText(e,n=!0){this.text=e,this.buffer.onMessagePartsUpdated([this.text],n)}isBuffering(){return this.buffer.isBuffering()}isComplete(){return this.buffer.isComplete()}destroy(){return this.buffer.destroy()}}function J2e(t,e,n){var c;const[s,o]=_.useState(null),a=(c=e==null?void 0:e.length)!=null?c:0,i=a>0,l=_.useRef(new Map);return _.useEffect(()=>{if(e)for(const d of e){const{messageId:u}=d;if(u==null||l.current.has(u))continue;const f=new X2e((m,p)=>{if(o(g=>U(w({},g),{[u]:m})),!!p){for(const[g,h]of l.current.entries())if(g!==u&&!h.isComplete())return;n(!0)}});l.current.set(u,f)}},[a]),_.useEffect(()=>{const d=l.current;return()=>{for(const u of d.values())u.destroy()}},[i]),_.useEffect(()=>{if(!i)return o(null);const d=jd(e,"messageId");for(const[u,f]of Object.entries(d)){const m=l.current.get(u);m&&m.setTextdocOps(f,!t)}},[i,t,e]),_.useMemo(()=>!i||!s?null:Object.values(s).flatMap(d=>d!=null?d:[]),[i,s])}class X2e{constructor(e){Q(this,"bufferedOps",[]);Q(this,"isFinishedStreaming",!1);Q(this,"rangeBuffers",[]);Q(this,"textBuffers",[]);Q(this,"completeCounters",[]);Q(this,"lastBuffer");this.onUpdate=e}destroy(){for(const e of this.rangeBuffers)e==null||e.destroy();for(const e of this.textBuffers)e==null||e.destroy();this.isFinishedStreaming=!0,this.rangeBuffers=[],this.textBuffers=[],this.completeCounters=[],this.lastBuffer=void 0}isBuffering(){var e,n,s,o;return!(((n=(e=this.lastBuffer)==null?void 0:e.isComplete())==null||n)&&((o=(s=So(this.completeCounters))==null?void 0:s.isComplete())==null||o))}getNonEmptyBufferedOpsOrNull(){return this.bufferedOps&&this.bufferedOps.length>0?this.bufferedOps:null}isComplete(){return this.isFinishedStreaming&&!this.isBuffering()}setTextdocOps(e,n){if(this.isFinishedStreaming=n,e)for(let s=0;s<e.length;s++){const o=e[s];if(o.author.role===Ke.Assistant)switch(o.kind){case Un.CREATE:case Un.REWRITE:this.setAllContentOpAtIndex(o,s);break;case Un.EDIT:case Un.ADD_COMMENT:this.setRangeAndContentOpAtIndex(o,s);break;default:this.setUnbufferedOpAtIndex(o,s)}else this.setUnbufferedOpAtIndex(o,s)}n&&(e?this.isBuffering()||this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),!0):(this.destroy(),this.update(()=>null)))}update(e){const n=this.bufferedOps;this.bufferedOps=Lc(n,e),this.bufferedOps!==n&&this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),this.isComplete())}getBufferedAllContentOp(e,n,s){let o=e[s];return o||(o=U(w({},n),{content:""}),e[s]=o),o}setAllContentOpAtIndex(e,n){const{content:s,isPartial:o=!1}=e;let a=this.textBuffers[n];a?(a.setText(s,o),e.kind===Un.CREATE&&this.update(i=>{const l=this.getBufferedAllContentOp(i,e,n);l.textdocId=e.textdocId})):(a=new hw(Vg,(i,l)=>{this.update(c=>{const d=this.getBufferedAllContentOp(c,e,n);d.content=i,d.isPartial=!l})},s,o,this.lastBuffer),this.textBuffers[n]=a,this.lastBuffer=a.buffer)}getBufferedRangeAndContentOp(e,n,s){let o=e[s];return o||(o=U(w({},n),{at:{start:n.at.start,end:n.at.start},content:"",isPartial:!0,isPartialRange:!0}),e[s]=o),o}setRangeAndContentOpAtIndex(e,n){const{at:s,content:o,isPartialRange:a=!1,isPartial:i=!1}=e;let l=this.completeCounters[n];l||(l=new exe(()=>{this.update(u=>{const f=this.getBufferedRangeAndContentOp(u,e,n);f.isPartial=!1})}),l.update("original",!1),this.completeCounters[n]=l);let c=this.rangeBuffers[n];c?(this.update(u=>{const f=this.getBufferedRangeAndContentOp(u,e,n);if(f.at.start!==s.start){const m=f.at.end-f.at.start;f.at={start:s.start,end:s.start+m}}}),c.setTargetLength(s.end-s.start,a)):(c=new sy(0,a,this.lastBuffer,(u,f)=>{this.update(m=>{const p=this.getBufferedRangeAndContentOp(m,e,n);p.at.end=p.at.start+u,p.isPartialRange=!f}),l.update("range",f)}),this.rangeBuffers[n]=c,this.lastBuffer=c,l.update("range",!1));let d=this.textBuffers[n];d?d.setText(o!=null?o:"",i):(d=new hw(Vg,(u,f)=>{this.update(m=>{const p=this.getBufferedRangeAndContentOp(m,e,n);p.content=u}),l.update("content",f)},o,i,this.lastBuffer),this.textBuffers[n]=d,this.lastBuffer=d.buffer,l.update("content",!1)),l.update("original",!i)}setUnbufferedOpAtIndex(e,n){this.update(s=>{s[n]=e})}}class exe{constructor(e){Q(this,"keyStates",new Set);Q(this,"onComplete");this.onComplete=e}isComplete(){return this.onComplete==null}update(e,n){if(!n)this.keyStates.add(e);else if(this.keyStates.delete(e),this.keyStates.size===0&&this.onComplete){const s=this.onComplete;this.onComplete=null,s()}}}function txe(t){const e=ne(),n=Ut();NM(()=>{var a,i;const s=he.getConversationLastTurn(ft(t)),o=Pl(s==null?void 0:s.messages,l=>IR(l));((i=(a=o==null?void 0:o.metadata)==null?void 0:a.finish_details)==null?void 0:i.type)==="max_tokens"&&_2e(n,e,4)})}function nxe(t){var e;return t?!!((e=t.metadata)!=null&&e.async_completion_id&&t.status==="in_progress"):!1}function sxe(t){var S,k;const[e,n]=Ve(t,E=>[he.getRequestId(E),he.getConversationTurns(E)],{disablePerfDetector:!0}),s=Na(e)||nxe((k=(S=So(n))==null?void 0:S.messages)==null?void 0:k[0]),o=OR(t),a=nhe(),i=E2e(()=>Promise.allSettled([o.refetch(),Ma(t)])),[l,c]=K2e({isRequestActive:s,lastTurn:So(n),clientThreadId:t,persistedTextdocStoreStatus:o.status}),d=i!=null?i:l,u=!!i||s,f=d?i?Lx.NATIVE:Lx.LAST_TURN:null,m=Z2e(t,n),p=LR(),g=lhe(),h=w2e(),x=_.useMemo(()=>{let E=hN(m);const{textdocVersionById:T,fetchError:M,status:A}=o;return E=ei(E,I=>{var N,L,D,F;I.fetchError=M,I.isFetchingFromPersistence=A===Og.REFETCHING||A===Og.INITIALIZING;for(const{tempTextdocId:$,status:H,createdAt:z,type:K,title:J,content:Z}of h){const q=(N=I.resolveTempTextdocId[$])!=null?N:$;qu(I,{textdocId:q,title:J,type:K,content:Z,createdAt:z,versionInt:0,comments:[],messageId:null,status:H===co.SENT?Os.ATTACHED_SENT:Os.ATTACHED_PENDING})}if(T)for(const[$,H]of T.entries()){I.allTextdocIdSet[$]=$;const z=a.get($);let K=z&&((L=z.versionInt)!=null?L:tr)>((D=H.versionInt)!=null?D:tr)?w(w({},H),z):H;const J=g.filter(q=>q.textdocId===$&&q.kind===Un.REMOVE_COMMENT);let Z=K.versionInt;for(const q of J)K=HL(K,q),Z=Math.max(Z!=null?Z:tr,(F=q.versionInt)!=null?F:tr);K=U(w({},K),{versionInt:Z}),I.textdocById[$]=void 0,qu(I,K)}}),p?ei(E,I=>{qu(I,p,!1)}):E},[h,m,o,a,p,g]),v=_.useMemo(()=>d!=null&&d.length?G2e(u,x,d):null,[d,u,x]),y=_.useMemo(()=>ei(x,E=>{for(const T of v!=null?v:[])if(T.messageId&&(E.lastCanvasAssistantMessageById[T.textdocId]=T.messageId),T.kind===Un.CREATE){const{tempTextdocId:M,textdocId:A}=T;M&&A&&(E.resolveTempTextdocId[M]=A)}}),[v,x]),b=J2e(u,v,c);return _.useMemo(()=>b?ei(VL(y,b),E=>{E.streamingSource=f}):y,[y,f,b])}function vKe({clientThreadId:t,children:e}){const n=sxe(t);return txe(t),r.jsx(gN.Provider,{value:n,children:e})}class oxe{constructor({capacity:e,dispose:n}){Q(this,"capacity");Q(this,"cache");Q(this,"dispose");this.capacity=e,this.cache=new Map,this.dispose=n}get(e){if(!this.cache.has(e))return null;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}set(e,n){if(this.cache.has(e)){this.cache.delete(e),this.cache.set(e,n);return}if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;s!=null&&this.delete(s)}this.cache.set(e,n)}delete(e){const n=this.cache.get(e);this.cache.delete(e),this.dispose&&this.dispose(n)}}const axe=300,YL=({collapsed:t,setCollapsed:e,children:n})=>{const s=V(),o=ts(s),a=ne(),[i,l]=_.useState(!1);return r.jsxs(Xe.div,{className:W("border-token-border-sharp dark:border-token-main-surface-secondary @container relative mb-4","flex cursor-text flex-col items-start overflow-hidden rounded-[14px] border shadow-md contain-inline-size",!o&&"mx-[-16px] sm:mx-[-32px] sm:rounded-[28px]"),initial:!1,animate:{height:t?axe:"auto"},transition:{duration:.5,ease:"easeInOut"},onAnimationComplete:()=>l(!1),children:[t&&r.jsx("button",{type:"button",className:"absolute inset-0 z-10","aria-label":a.formatMessage({id:"iB4l+i",defaultMessage:"Expand full response"}),"aria-expanded":!t,onClick:()=>{e(!1),l(!0)}}),r.jsx("div",{className:W("p-4",!o&&"sm:p-8"),children:r.jsx(Ir,{children:n})}),(t||i)&&r.jsx("span",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-12 bg-gradient-to-b from-transparent to-[var(--bg-primary)] dark:to-[var(--bg-elevated-secondary)]"})]})},rxe=1e3;function bKe({children:t,messages:e,clientThreadId:n}){var u,f;const s=e.find(m=>{var p;return(p=m.metadata)==null?void 0:p.is_async_task_result_message}),o=(u=s==null?void 0:s.metadata)==null?void 0:u.async_task_id,a=kr(m=>o?m.tasks[o]:null),[i,l]=_.useState((f=a==null?void 0:a.collapsed)!=null?f:!1),c=Ve(n,m=>{var p,g;return s&&((p=s.metadata)==null?void 0:p.async_task_id)&&he.hasContinuedFromAsyncTask(m,s==null?void 0:s.id,(g=s==null?void 0:s.metadata)==null?void 0:g.async_task_id)});if(!s)return null;const d=s.content.content_type==="text"&&s.content.parts.reduce((m,p)=>m+p.length,0)<rxe;return!c||d?r.jsx(r.Fragment,{children:t}):r.jsx("div",{className:"py-2",children:r.jsx(YL,{collapsed:i,setCollapsed:l,children:t})})}const _w=be({manage:{id:"manage",defaultMessage:"Manage"},continue:{id:"continue",defaultMessage:"Continue"}});function CKe({title:t,description:e,settingsTab:n="general",clientThreadId:s,parentMessageId:o}){const a=V(),i=yt(a,s),l=ne(),[c,d]=_.useState(!1),{openSettings:u}=tm(),f=()=>{var x;if(c)return;d(!0);const p=ft(s),g=p?he.getCurrentNode(p):null;(g?(x=g.message.id)!=null?x:g.id:void 0)===o&&Ko({conversation:i,promptMessage:ls("Yes, please proceed"),eventSource:"mouse",parentMessageId:o})},m=_.useCallback(()=>{const p=Nd();yn()&&p?p.openSettings(n):u()},[u,n]);return r.jsxs("div",{className:"max-w-md rounded-lg border p-4 shadow-sm",children:[r.jsx("h2",{className:"mb-1 font-bold",children:r.jsx(Bs,{className:"text-base",children:t})}),r.jsx("p",{className:"mb-3 text-sm",children:r.jsx(Bs,{className:"text-base",children:e})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(_e,{className:"text-base",color:"secondary",onClick:m,children:l.formatMessage(_w.manage)}),r.jsx(_e,{className:"text-base",color:"primary",onClick:f,children:l.formatMessage(_w.continue)})]})]})}function ixe({className:t}){return r.jsxs(r.Fragment,{children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:W(t,"dark:hidden"),children:[r.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"black",fillOpacity:"0.04"}),r.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"black",strokeOpacity:"0.16",strokeWidth:"0.6"}),r.jsx("path",{d:"M10.8988 4.47241C11.297 4.30205 11.6994 4.7051 11.5287 5.10327L9.85392 9.01147C9.69208 9.3891 9.39072 9.69046 9.0131 9.85229L5.1049 11.5271C4.70673 11.6977 4.30368 11.2954 4.47404 10.8972L6.14982 6.98804C6.31165 6.61062 6.61225 6.31002 6.98966 6.14819L10.8988 4.47241ZM8.00138 7.19995C7.5597 7.20005 7.20167 7.55807 7.20158 7.99976C7.20158 8.44152 7.55964 8.79946 8.00138 8.79956C8.44321 8.79956 8.80119 8.44158 8.80119 7.99976C8.80109 7.55801 8.44315 7.19995 8.00138 7.19995Z",fill:"black",fillOpacity:"0.16"})]}),r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:W(t,"hidden dark:block"),children:[r.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"white",fillOpacity:"0.2"}),r.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"white",strokeOpacity:"0.65",strokeWidth:"0.6"}),r.jsx("path",{d:"M10.8989 4.47248C11.2971 4.30212 11.6994 4.70517 11.5288 5.10334L9.85399 9.01154C9.69215 9.38917 9.39079 9.69052 9.01317 9.85236L5.10496 11.5272C4.7068 11.6978 4.30375 11.2955 4.47411 10.8973L6.14989 6.98811C6.31171 6.61069 6.61232 6.31009 6.98973 6.14826L10.8989 4.47248ZM8.00145 7.20002C7.55976 7.20012 7.20174 7.55814 7.20164 7.99982C7.20164 8.44159 7.5597 8.79953 8.00145 8.79963C8.44328 8.79963 8.80125 8.44165 8.80125 7.99982C8.80116 7.55808 8.44322 7.20002 8.00145 7.20002Z",fill:"white",fillOpacity:"0.65"})]})]})}function Hg({base64:t,title:e,alt:n,className:s}){var o;return t?r.jsx("img",{src:"data:image/png;base64,".concat(t),alt:(o=n!=null?n:e)!=null?o:"",className:s}):r.jsx(ixe,{className:s})}function SKe(t){"use forget";const e=G.c(19),{browserContextMetadata:n,className:s}=t,o=n.sources[0];if(!o)return null;const{url:a,title:i,base64favicon:l}=o;if(!a)return null;let c;e[0]!==i?(c=i==null?void 0:i.trim(),e[0]=i,e[1]=c):c=e[1];const d=c;let u;if(e[2]!==a){let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,e[4]=y):y=e[4],u=a.replace(y,""),e[2]=a,e[3]=u}else u=e[3];const f=u,m=d&&d.length>0?d:f||a;let p;e[5]!==s?(p=W("no-underline",s),e[5]=s,e[6]=p):p=e[6];let g;e[7]!==l||e[8]!==m?(g=r.jsx(Hg,{base64:l,title:m,alt:"",className:"h-4 w-4 flex-shrink-0"}),e[7]=l,e[8]=m,e[9]=g):g=e[9];let h;e[10]!==m?(h=r.jsx("span",{className:"truncate select-none",children:m}),e[10]=m,e[11]=h):h=e[11];let x;e[12]!==g||e[13]!==h?(x=r.jsx("div",{className:"user-message-bubble-color relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-3.5 py-1.5",children:r.jsxs("div",{className:"flex min-w-0 cursor-pointer items-center gap-2",children:[g,h]})}),e[12]=g,e[13]=h,e[14]=x):x=e[14];let v;return e[15]!==p||e[16]!==x||e[17]!==a?(v=r.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:p,children:x}),e[15]=p,e[16]=x,e[17]=a,e[18]=v):v=e[18],v}const lxe=t=>Ve(t,e=>{var n,s;return(s=(n=e==null?void 0:e.disabledToolIds)==null?void 0:n.includes(Pn.CANMORE))!=null?s:!1}),cxe=R(()=>P(()=>import("./ffrotvb922yxp30i.js"),__vite__mapDeps([286,1])),{loading:t=>O(t)}),dxe=(t,e)=>{var u;const n=Ve(t,f=>he.getLastMessageSystemHints(f).includes(ua.CANVAS)),s=Tb({clientThreadId:t}),o=lxe(t),a=V(),i=i5(a),l=(u=So(e))==null?void 0:u.id,c=e.some(f=>{var m,p;return(p=(m=f.metadata)==null?void 0:m.canvas)==null?void 0:p.canvas_opt_in});return{isVisible:!n&&!o&&!i&&!c&&!!l,onClick:async f=>{var x;if(!l)return;f.stopPropagation(),ob();const m=[Pn.CANMORE];s({sourceEvent:f,nodeId:l,appendMessages:[s3("The user has requested the canvas tool be disabled for this conversation. You should not call the tool again.",{disable_tool_ids:m,exclude_after_next_user_message:!0})]});const p=ft(t),g=he.getConversationTurns(p,l).length,h=(x=he.getParentPromptNode(p,l))==null?void 0:x.message.id;Fl.logEventWithStatsig("Canvas Opt Out Clicked","chatgpt_canvas_opt_out_clicked",{num_turns:String(g),conversation_id:At(t),message_id:h}),Ze(t,v=>{v.disabledToolIds=m})}}},uxe=({clientThreadId:t,allTurnMessages:e})=>{const{isVisible:n,onClick:s}=dxe(t,e);return n?r.jsx("button",{onClick:s,className:"text-token-text-secondary hover:text-token-text-primary mb-2 w-full",children:r.jsxs("div",{className:"flex items-center rounded-xl",children:[r.jsx(j,{id:"aa5Dyk",defaultMessage:"Answer in chat instead"}),r.jsx(cxe,{className:"icon text-token-text-secondary"})]})}):null},ym=t=>{const{closeThreadSidebar:e}=Ar();return()=>{t!=="canvas"&&ob(),t!=="caterpillar"&&t!=="summarizer"&&t!=="searchSources"&&t!=="entity"&&e()}},fxe=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),mxe=(t,e)=>t!=null&&t.textdocId?t.textdocId:(t==null?void 0:t.function)===Yn.CreateTextdoc?p5(t.messageId):e!=null?e:void 0,pxe=({toolCall:t,clientThreadId:e,isRequestActive:n})=>{const s=V(),o=ne(),a=Zie(),i=mxe(t,a),l=k1(i),c=am(),d=jb(i),u=Kie(),f=i5(s),m=jt(),p=Yie(),g=Qie({textdocId:i,assistantMessageId:t==null?void 0:t.messageId}),h=Gre(()=>{const M=bn(yt(s,e)).id;Fl.logError("Textdoc missing from conversation",null,{clientThreadId:e,modelId:M,textdocId:i,latestTextdocId:a,toolCallTextdocId:t==null?void 0:t.textdocId,toolCallStatus:t==null?void 0:t.status,toolCallFunction:t==null?void 0:t.function})});_.useEffect(()=>{!n&&(t==null?void 0:t.status)===Tt.COMPLETE&&!p&&!l&&h()},[t,l,n,p,h]);const x=ym("canvas");if(!t)return null;const v=t.status===Tt.REDACTED||!p&&!l&&t.status!==Tt.STREAMING&&t.status!==Tt.WAITING;let y,b,C;if(t.status!==Tt.REDACTED&&t.status!==Tt.FAILED&&!v&&i){const M=!g&&t.status===Tt.COMPLETE;y=()=>{x(),M&&t.versionInt?ml({type:fl.Textdoc,textdocId:i,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):vi(i)},b=()=>{x(),M&&t.versionInt?ml({type:fl.Textdoc,textdocId:i,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):ml({type:fl.Textdoc,textdocId:i,shouldRunCodeOnOpen:!0})},C=()=>{M&&t.versionInt&&m.prefetchQuery(PR(i,t.versionInt))}}const S=gxe(t,l);if(t.function===Yn.CreateTextdoc&&!(f&&(!g||c))){if(t.status===Tt.STREAMING||t.status===Tt.WAITING||t.status===Tt.COMPLETE){const A=p===!0&&(t.status===Tt.STREAMING||t.status===Tt.WAITING);return r.jsx(Vx,{textdocId:i,name:S,clientThreadId:e,tag:t.type,icon:Ic(t.type,!1),iconSelected:Ic(t.type,!0),isCanvasOpen:c,isInlinePreview:g,isFetching:A,isFocused:d,isStreaming:t.status===Tt.STREAMING,onClick:y,onPreview:b})}let M;switch(t.status){case Tt.FAILED:M=o.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case Tt.CANCELED:M=o.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case Tt.REDACTED:M=r.jsx(_t,{align:"start",label:o.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:o.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return r.jsx(xw,{children:M})}const k=v||t.status===Tt.REDACTED,E=f?k?null:S:u&&!k?S:null,T=r.jsxs(xw,{onClick:y,onMouseOver:C,isStreaming:t.status===Tt.STREAMING,children:[f&&r.jsx(fxe,{}),t.function===Yn.CommentTextdoc?_xe(o,t,E):t.function===Yn.CreateTextdoc?E!=null?E:o.formatMessage({id:"/402F4",defaultMessage:"New document"}):hxe(o,t,E)]});return g&&!c&&!v&&i?r.jsx(Vx,{textdocId:i,clientThreadId:e,name:S,tag:l==null?void 0:l.type,icon:Ic(l==null?void 0:l.type,!1),iconSelected:Ic(l==null?void 0:l.type,!0),isCanvasOpen:c,isFetching:!1,isFocused:d,isInlinePreview:!0,isStreaming:t.status===Tt.STREAMING,onPreview:b,onClick:i!=null?()=>{x(),vi(i)}:void 0}):T};function gxe(t,e){return e!=null&&e.title?e.title:t.function===Yn.CreateTextdoc&&t.title?$L(t.title):null}const xw=({isStreaming:t=!1,onClick:e,onMouseOver:n,children:s})=>r.jsx("button",{disabled:!e,className:W(t&&"loading-shimmer","text-token-text-secondary flex min-h-5 w-fit flex-row items-center gap-1.5 pt-[3px] text-start select-none",e&&"hover:text-token-text-primary"),onClick:e,onMouseOver:n,children:s}),ZL=9;function hxe(t,e,n){var o;if(e.status===Tt.STREAMING)return n?t.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(e.status===Tt.FAILED)return n?t.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(e.status===Tt.CANCELED)return n?t.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const s=(o=e.updates)==null?void 0:o.length;return e.status===Tt.REDACTED||!s||s>ZL?n?t.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):n?t.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:s,documentTitle:n}):t.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:s})}function _xe(t,e,n){var o;if(e.status===Tt.STREAMING)return n?t.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(e.status===Tt.FAILED)return n?t.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(e.status===Tt.CANCELED)return n?t.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const s=(o=e.comments)==null?void 0:o.length;return e.status===Tt.REDACTED||!s||s>ZL?n?t.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):n?t.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:s,documentTitle:n}):t.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:s})}const wKe=({messages:t,isRequestActive:e,isFinalTurn:n,allTurnMessages:s,clientThreadId:o,isUserTurn:a=!1})=>{const i=_.useMemo(()=>{const c=h5(s);if(!c)return null;const d=new Set(t.map(u=>u.id));return c.filter(([u])=>d.has(u.id))},[s,t]),l=_.useMemo(()=>i?i.map(([c,d])=>WL(e,c,d)).filter(Boolean):[],[i,e]);return l.length===0?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-col gap-2 [&:not(:first-child)]:mt-2",children:l.map(c=>r.jsx(pxe,{toolCall:c,clientThreadId:o,isRequestActive:e},c.messageId))}),r.jsx(WR,{featureType:ds.CANVAS_SUPPORTED,isUserTurn:a,clientThreadId:o}),n&&r.jsx(uxe,{clientThreadId:o,allTurnMessages:s})]})};function xxe(t,e,n){const s=kr(l=>!!(t&&l.tasks[t])),o=ym("caterpillar"),a=Ve(n,l=>he.findNode(l,c=>{var d,u,f;return((d=c.message.metadata)==null?void 0:d.async_task_id)===t&&(((u=c.message.metadata)==null?void 0:u.b1de6e2_rm)===!0||((f=c.message.metadata)==null?void 0:f.is_async_task_result_message)===!0)})!=null),{clearSystemHintModeTrigger:i}=oa();_.useEffect(()=>{var p;if(s||!t||!e)return;const{async_task_created_at:l,async_task_prompt:c,async_task_title:d,async_task_original_message_id:u}=(p=e.metadata)!=null?p:{},f=At(n),m={originalConversationId:f!=null?f:n,taskId:t,title:d!=null?d:"",prompt:c!=null?c:"",createdAt:l!=null?l:"",updatedAt:l!=null?l:"",status:An.UNDETERMINED,originalConversationUserMessageId:u};As.setTask(t,m),i(Pe.Research)},[s,t,e,n,o,i,a])}R(()=>P(()=>import("./gducbep8qsfkuz9f.js"),__vite__mapDeps([51,1])),{loading:t=>O(t)});const yxe=R(()=>P(()=>Promise.resolve().then(()=>hEe),void 0),{loading:t=>O(t)}),vxe=R(()=>P(()=>import("./bwo20i0juyjiwskh.js"),__vite__mapDeps([287,1])),{loading:t=>O(t)}),bxe=R(()=>P(()=>import("./omfzu6zlrauk9zdi.js"),__vite__mapDeps([288,1])),{loading:t=>O(t)}),Cxe=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),KL=R(()=>P(()=>import("./g4luqq3g92oxbbim.js"),__vite__mapDeps([247,1])),{loading:t=>O(t)}),Sxe=R(()=>P(()=>import("./o6iejiso3ne57s04.js"),__vite__mapDeps([289,1])),{loading:t=>O(t)}),wxe=R(()=>P(()=>import("./ftbklkne5vchqwja.js"),__vite__mapDeps([290,1])),{loading:t=>O(t)}),kxe=R(()=>P(()=>import("./idvmimdr84st2so4.js"),__vite__mapDeps([291,1])),{loading:t=>O(t)}),Exe=R(()=>P(()=>import("./o0quqfjb2szj41iq.js"),__vite__mapDeps([292,1])),{loading:t=>O(t)}),Txe=R(()=>P(()=>import("./net5f1925ssn3thy.js"),__vite__mapDeps([293,1])),{loading:t=>O(t)}),Mxe=R(()=>P(()=>import("./pj0tlj9i65oz4g7u.js"),__vite__mapDeps([248,1])),{loading:t=>O(t)}),yw=R(()=>P(()=>import("./d8cmrw5lg3ncoab2.js"),__vite__mapDeps([249,1])),{loading:t=>O(t)}),Axe={pdf:Sxe,sheet:yw,excel:Txe,doc:Cxe,audio:yxe,video:bxe,image:vxe,csv:yw,word:wxe,forms:Exe,slides:Mxe,powerpoint:kxe,other:KL};function x5(t){var e;return(e=Axe[t])!=null?e:KL}const Ixe=({children:t,iconType:e})=>{const n=x5(e);return r.jsxs("div",{className:"flex items-start gap-2 text-start text-wrap",children:[r.jsx("div",{className:"mt-[1px] inline-flex h-5 w-5 shrink-0 items-center justify-end gap-2.5 pt-[3px]",children:r.jsx(n,{className:"text-token-text-primary relative h-5 w-5"})}),t]})},kKe=({row:t})=>r.jsx(Ixe,{iconType:t.iconType,children:r.jsx("div",{className:"text-token-text-primary flex-1 truncate text-base",children:t.rowText})});function jxe(){const t=V();return rt({queryKey:["clientStrings"],queryFn:()=>ge.safeGet("/client/strings"),staleTime:1/0,enabled:tt(t)})}function QL(t,e,n,s){"use forget";const o=G.c(7),a=e===void 0?"small":e,{platformConnectors:i}=Ad(!1,E8.DEEP_RESEARCH);let l;e:try{let u;if(s&&(u=UG[s.toLowerCase()]),!u){l=null;break e}const f=Wo[u];if(!f){l=null;break e}let m;o[0]!==f||o[1]!==i?(m=i.get(f),o[0]=f,o[1]=i,o[2]=m):m=o[2];const p=m;if(!p){l=null;break e}l=p}catch(u){l=null}const c=l;let d;return o[3]!==n||o[4]!==c||o[5]!==a?(d=c?r.jsx(vf,{connector:c,size:a,className:n}):null,o[3]=n,o[4]=c,o[5]=a,o[6]=d):d=o[6],d}function Nxe({url:t,size:e="small",className:n,fallback:s,connectorSource:o}){const a=QL(t,e,n,o);return a!=null?a:s}const Pxe=R(()=>P(()=>import("./o2kvjcphiwxgrxo0.js"),__vite__mapDeps([294,1])),{loading:t=>O(t)});function EKe(t,e=0){if(!t)return!1;const n=t.getBoundingClientRect();return n.top+e>=0&&n.left+e>=0&&n.bottom-e<=(window.innerHeight||document.documentElement.clientHeight)&&n.right-e<=(window.innerWidth||document.documentElement.clientWidth)}function JL(){var o,a,i,l,c,d,u;const t=ne(),{data:e}=jxe(),n=e==null?void 0:e.caterpillar_status_message_texts,s={cancelledMessage:t.formatMessage({id:"ZVkPyf",defaultMessage:"Task cancelled"}),failureMessage:t.formatMessage({id:"3BZzpX",defaultMessage:"Something went wrong"}),completedMessage:t.formatMessage({id:"nZ8w6W",defaultMessage:"Completed in"}),failureBannerContentMessage:t.formatMessage({id:"9peWdy",defaultMessage:"There was an error"}),waitingInQueueMessage:t.formatMessage({id:"k4vqxH",defaultMessage:"Your request is queued up. It will be completed shortly."}),startingMessage:t.formatMessage({id:"+jIjI+",defaultMessage:"Starting Task"}),caterpillarNoneSelectedMessage:t.formatMessage({id:"cLZOtM",defaultMessage:"Choose at least one"})};return n?{cancelledMessage:(o=n.cancelled_message)!=null?o:s.cancelledMessage,failureMessage:(a=n.failure_message)!=null?a:s.failureMessage,completedMessage:(i=n.completed_message)!=null?i:s.completedMessage,failureBannerContentMessage:(l=n.failure_banner_content_message)!=null?l:s.failureBannerContentMessage,waitingInQueueMessage:(c=n.waiting_in_queue_message)!=null?c:s.waitingInQueueMessage,startingMessage:(d=n.starting_message)!=null?d:s.startingMessage,caterpillarNoneSelectedMessage:(u=n.none_selected_dr_message)!=null?u:s.caterpillarNoneSelectedMessage}:s}function XL(t){const e=new Map;return _h(t).forEach(s=>{if(s.type==="website")try{const o=r.jsx(Nxe,{url:s.url,size:"xsmall",className:"icon-sm",fallback:r.jsx(ks,{url:s.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:r.jsx(Pxe,{className:"icon-sm text-token-text-quaternary"})})}),a=new URL(s.url).hostname;if(e.has(a)){const i=e.get(a);i&&(i.count+=1)}else e.set(a,{url:s.url,count:1,icon:o})}catch(o){}else if(!e.has(s.name)){const o=x5(s.fileType);e.set(s.name,{url:s.name,count:1,icon:r.jsx(o,{className:"text-token-text-primary relative h-4 w-4"})})}}),Array.from(e.values())}function Rxe(t){const e=t.map(n=>n.type==="websiteOpen"?{url:n.url,type:"website"}:n.type==="fileOpen"&&n.fileName?{name:n.fileName,type:"file",fileType:n.iconType}:null);return XL(e)}function Lxe(t){return t.reduce((e,n)=>{var s,o;if(n.type==="search"){const a=(o=(s=n.urls)==null?void 0:s.length)!=null?o:0;return e+a}return e},0)}function Oxe(t){var s;const e=(s=t.metadata)==null?void 0:s.content_references;if(!e)return[];const n=e.map(o=>o.type==="webpage_extended"?o.icon_type?{name:o.title,type:"file",fileType:o.icon_type}:{url:o.url,type:"website"}:null);return XL(n)}function TKe(t){var e;return{type:T8,groups:(e=t==null?void 0:t.filter(n=>n.type==="summary").map(n=>{var s;return{type:n.message?(s=$G(n.message))!=null?s:rr.Text:rr.Text,messages:n.message?[n.message]:[]}}))!=null?e:[]}}const eO=R(()=>P(()=>import("./oda258a4iqmqo2yv.js"),__vite__mapDeps([275,1])),{loading:t=>O(t)}),tO=R(()=>P(()=>import("./ku3qnfz2eih7an2v.js"),__vite__mapDeps([295,1])),{loading:t=>O(t)}),nO=R(()=>P(()=>import("./fgnnkycj3ez3m5u7.js"),__vite__mapDeps([296,1])),{loading:t=>O(t)}),sO=R(()=>P(()=>import("./dbmhiqftlfabuure.js"),__vite__mapDeps([297,1])),{loading:t=>O(t)}),oO=R(()=>P(()=>import("./ef4orb4bcsix4ne6.js"),__vite__mapDeps([298,1])),{loading:t=>O(t)}),aO=R(()=>P(()=>import("./dvz93enk33kr6kwl.js"),__vite__mapDeps([299,1])),{loading:t=>O(t)}),rO=R(()=>P(()=>import("./i9bkgqmg6et5z0qc.js"),__vite__mapDeps([300,1])),{loading:t=>O(t)}),iO=R(()=>P(()=>import("./opxof2ldgc0aumvz.js"),__vite__mapDeps([301,1])),{loading:t=>O(t)}),lO=R(()=>P(()=>import("./l8s6hbjogkphba86.js"),__vite__mapDeps([302,1])),{loading:t=>O(t)}),cO=R(()=>P(()=>import("./hy1zav6qzw5abega.js"),__vite__mapDeps([303,1])),{loading:t=>O(t)}),dO=R(()=>P(()=>import("./coegk5d47rsglvgo.js"),__vite__mapDeps([304,1])),{loading:t=>O(t)}),uO=R(()=>P(()=>import("./bdfsdeky4mlgbyfk.js"),__vite__mapDeps([305,1])),{loading:t=>O(t)}),fO=R(()=>P(()=>import("./i63vgi3l2l0vhfen.js"),__vite__mapDeps([306,1])),{loading:t=>O(t)}),mO=R(()=>P(()=>import("./zhy6xcs8a6zch07h.js"),__vite__mapDeps([307,1])),{loading:t=>O(t)});function Dxe({url:t,className:e}){switch(new URL(t).pathname.split(".").pop()){case"pdf":return r.jsx(aO,{className:e});case"gif":return r.jsx(fO,{className:e});case"jpg":case"jpeg":return r.jsx(uO,{className:e});case"png":return r.jsx(oO,{className:e});case"webp":return r.jsx(tO,{className:e});case"mp3":return r.jsx(lO,{className:e});case"m4a":return r.jsx(dO,{className:e});case"ogg":return r.jsx(rO,{className:e});case"wav":return r.jsx(nO,{className:e});case"mp4":return r.jsx(iO,{className:e});case"mov":return r.jsx(cO,{className:e});case"zip":return r.jsx(eO,{className:e});case"rar":return r.jsx(sO,{className:e});case"css":return r.jsx(mO,{className:e});default:return null}}function Fxe({searchResult:t,className:e}){switch(t.content_type){case"application/pdf":return r.jsx(aO,{className:e});case"image/gif":return r.jsx(fO,{className:e});case"image/jpeg":return r.jsx(uO,{className:e});case"image/png":return r.jsx(oO,{className:e});case"image/webp":return r.jsx(tO,{className:e});case"audio/mpeg":return r.jsx(lO,{className:e});case"audio/m4a":return r.jsx(dO,{className:e});case"audio/ogg":return r.jsx(rO,{className:e});case"audio/wav":return r.jsx(nO,{className:e});case"video/mp4":return r.jsx(iO,{className:e});case"video/quicktime":return r.jsx(cO,{className:e});case"application/zip":return r.jsx(eO,{className:e});case"application/x-rar-compressed":return r.jsx(sO,{className:e});case"text/css":return r.jsx(mO,{className:e})}return r.jsx(Dxe,{url:t.url,className:e})}const Bxe=R(()=>P(()=>import("./o2kvjcphiwxgrxo0.js"),__vite__mapDeps([294,1])),{loading:t=>O(t)});function Uxe(t){var e;if(t.startsWith("file://"))return x5((e=t.split(".").pop())!=null?e:"other")}const pO=({item:t})=>{const e=t.attribution,n=QL(t.url,"small","relative",e!=null?e:void 0);if(n)return n;const s=Uxe(t.url);return s?r.jsx(s,{className:"text-token-text-primary relative h-4 w-4"}):r.jsx(ks,{url:t.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:r.jsx(Bxe,{className:"icon-sm text-token-text-quaternary"})})};function $xe({item:t}){var o;const e=t.attribution,n=e!=null?e:rb(t.url,"short"),s=a=>"ref_id"in a&&"content_type"in a;return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[r.jsx(pO,{item:t}),n,s(t)&&r.jsx(Fxe,{searchResult:t,className:"text-token-text-tertiary inline h-4 w-4"})]}),r.jsx("div",{className:"line-clamp-2 text-sm font-semibold break-words",children:t.title}),((o=t.pub_date)!=null?o:t.snippet)&&r.jsxs("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:[t.pub_date&&r.jsx(iR,{date:t.pub_date}),t.pub_date&&t.snippet&&"  ",t.snippet]})]})}function Vxe(t,e=20){if(t.length<=e)return{attribution:t,wasTruncated:!1};const n="...",s=e-n.length,o=Math.floor(s/2),a=s-o;return{attribution:t.substring(0,o)+n+t.substring(t.length-a),wasTruncated:!0}}function Hxe({citation:t,showCounts:e}){const n=rb(t.url,"short"),{attribution:s,wasTruncated:o}=Vxe(n);return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"group hover:bg-token-main-surface-secondary flex items-center gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",title:o?n:void 0,children:[t.icon,s]}),e&&t.count>1&&r.jsx("div",{className:"flex h-4 items-center justify-end ps-1",children:r.jsx("div",{className:"bg-token-main-surface-tertiary group-hover:bg-token-main-surface-primary flex h-4 min-w-4 items-center justify-center rounded-full text-[8px]",children:t.count})})]})}function Gxe({item:t}){const e=t.url.split("#:~:text=")[0];return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[r.jsx(pO,{item:t}),r.jsx("p",{className:"text-normal truncate text-base font-semibold",children:t.title})]}),r.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:e})]})}function Wxe({taskIsPending:t,finalMessage:e,sources:n,caterpillarHeaderRef:s,showCounts:o=!0,citationView:a="normal"}){var l,c;const i=u8((c=(l=e==null?void 0:e.metadata)==null?void 0:l.content_references)==null?void 0:c.filter(d=>d.type==="webpage_extended"),"matched_text");return r.jsxs("div",{children:[r.jsx("div",{ref:s},"task-header"),r.jsxs("div",{className:"flex flex-col gap-4",children:[i.length>0&&r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-base font-medium",children:r.jsx(j,{id:"cc9nL7",defaultMessage:"Citations"})}),r.jsx("div",{className:"ms-[-12px] flex flex-col gap-1",children:i==null?void 0:i.map((d,u)=>a==="condensed"?r.jsx(Gxe,{item:d},"citation-".concat(u,"-").concat(d.matched_text)):r.jsx($xe,{item:d},"citation-".concat(u,"-").concat(d.matched_text)))})]}),r.jsxs("div",{className:"flex flex-col gap-2.5",children:[r.jsx("div",{className:"text-base font-medium",children:t?r.jsx("div",{className:"loading-shimmer-pure-text flex h-8 gap-1 overflow-hidden",children:r.jsx(j,{id:"Wo2ed3",defaultMessage:"Compiling sources"})}):r.jsx(j,{id:"h6ereF",defaultMessage:"All Sources"})}),r.jsx("div",{className:"ms-[-12px] flex flex-wrap",children:n==null?void 0:n.map((d,u)=>r.jsx(Hxe,{citation:d,showCounts:o},"source-".concat(u,"-").concat(d.url)))})]})]})]})}const zxe=(t,e)=>e?!1:ye(t,"3576660381"),qxe=(t,e)=>{if(!t)return[];const n=he.getConversationTurns(t);return e<0||e>=n.length?[]:he.getConversationTurnAtIndex(t,e).messages.filter(o=>{var a;return((a=o.metadata)==null?void 0:a.b47u8ra0)===!0})},Yxe=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>O(t)}),Zxe=R(()=>P(()=>import("./g4luqq3g92oxbbim.js"),__vite__mapDeps([247,1])),{loading:t=>O(t)}),Kxe=5;function Qxe(t){const e=Yd(t);if(e)return e.type;try{return new URL(t).hostname.replace(/^www\./,"")}catch(n){return t}}function Jxe(t){const e=new Map;return t.forEach(n=>e.set(Qxe(n),n)),Array.from(e.values())}function gO(t){"use forget";const e=G.c(14),{urls:n,max:s,itemClass:o,iconClass:a,faviconClass:i}=t;let l,c;if(e[0]!==i||e[1]!==a||e[2]!==o||e[3]!==s||e[4]!==n){const u=Jxe(n);l="flex flex-row-reverse";let f;e[7]!==i||e[8]!==a||e[9]!==o?(f=(m,p)=>{var x;const g=Yd(m),h=(x=g==null?void 0:g.Icon)!=null?x:null;return r.jsx("div",{className:W(o),children:h?r.jsx(h,{className:W("icon-sm",a),alt:g==null?void 0:g.type}):r.jsx(ks,{url:m,size:32,minSize:16,className:W("icon-sm",i),"aria-label":"",showLoadingAnimation:!0,fallback:r.jsx(Zxe,{className:"icon-sm"})})},p)},e[7]=i,e[8]=a,e[9]=o,e[10]=f):f=e[10],c=u.slice(0,s).reverse().map(f),e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=n,e[5]=l,e[6]=c}else l=e[5],c=e[6];let d;return e[11]!==l||e[12]!==c?(d=r.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=d):d=e[13],d}function hO({sourcesUrls:t,onClick:e,className:n}){return r.jsxs("button",{className:W("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary mt-3 mb-2 flex h-[38px] w-fit items-center gap-1.5 rounded-3xl border py-2","ps-3 pe-3",n),onClick:e,children:[t.length>0&&r.jsx(gO,{urls:t,max:Kxe,itemClass:W("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden rounded-full","-ms-1 first:me-0","border-2","group-hover/footnote:border-token-main-surface-secondary","relative")}),r.jsx("div",{className:"text-token-text-secondary flex items-center text-xs font-semibold",children:r.jsx(j,{id:"/48IOP",defaultMessage:"Sources"})})]})}function Xxe(t,e,n){const s=V(),o=Ve(t,u=>{const f=qxe(u,e);return[n,...f]}),a=_.useMemo(()=>o.flatMap(u=>Fh(u)),[o]),i=a.find(u=>u.type==="sources_footnote"),l=ae(()=>bn(yt(s,t))),c=ph(l,s),d=i!=null&&i.sources?i==null?void 0:i.sources.map(({url:u})=>u).filter(u=>!!u):c?a.map(u=>{var f;return(f=u.safe_urls)!=null?f:[]}).flat().filter(u=>!!u):[];return{hasSources:(!!i||c)&&d.length>0,sourcesUrls:d}}function MKe({clientThreadId:t,message:e,turnIndex:n,isAgentTurn:s}){const o=e==null?void 0:e.id,{toggleThreadSidebar:a}=Ar(),i=V(),l=zxe(i,s),[c,d]=Ve(t,x=>{var y;if(!((y=e==null?void 0:e.metadata)!=null&&y.async_task_id))return[-1,-1];const v=he.getConversationTurns(x);for(let b=0;b<v.length;b++){const C=v[b];for(let S=0;S<C.messageGroups.length;S++){const k=C.messageGroups[S];if(k.type===rr.a8km123&&k.messages.some(E=>{var T,M;return((T=E==null?void 0:E.metadata)==null?void 0:T.async_task_id)===((M=e==null?void 0:e.metadata)==null?void 0:M.async_task_id)}))return[b,S]}}return[-1,-1]}),u=Ve(t,x=>{var v;return n>=0?(v=he.getConversationTurnAtIndex(x,n))==null?void 0:v.messageGroups.findIndex(y=>y.type===T8||y.type===rr.a8km123):-1}),f=c>=0?c:n,m=d>=0?d:u,p=_.useCallback(()=>{o&&(l&&m>=0?a({type:"cot",turnIndex:f,reasoningGroupIndex:m,scrollTo:"sources"}):a({type:"searchSources",scrollToHeader:d5.Citations,turnIndex:n,messageId:o}))},[o,a,n,l,m,f]),{hasSources:g,sourcesUrls:h}=Xxe(t,n,e);return g?r.jsx(tye,{sourcesUrls:h,onClick:p,className:"hover:bg-token-bg-tertiary rounded-3xl"}):null}const eye=3;function tye({sourcesUrls:t,onClick:e,className:n}){const o=ne().formatMessage({id:"/48IOP",defaultMessage:"Sources"});return r.jsxs("button",{className:W("group/footnote bg-token-bg-primary flex w-fit items-center gap-1.5 px-3 py-1.5",n),onClick:e,"aria-label":o,children:[t.length>0?r.jsx(gO,{urls:t,max:eye,itemClass:W("border-token-bg-primary bg-token-bg-primary flex items-center overflow-clip rounded-full","-ms-1.5 first:me-0","border-2","group-hover/footnote:border-token-bg-tertiary","relative"),iconClass:"rounded-full shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05)]",faviconClass:"rounded-full border border-token-border-light border-[0.5px]"}):r.jsx(Yxe,{className:"icon-sm text-token-text-secondary"}),r.jsx("div",{className:"text-token-text-secondary mt-[-1px] text-[13px] font-medium",children:o})]})}const nye=R(()=>P(()=>import("./hn0hl0c8spo9mfdq.js"),__vite__mapDeps([47,1])),{loading:t=>O(t)}),sye=R(()=>P(()=>Promise.resolve().then(()=>im),void 0),{loading:t=>O(t)}),oye=({title:t})=>r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-2",children:[r.jsx(nye,{className:"h-4 w-4"}),r.jsx("p",{children:t})]});function AKe({messages:t,children:e,clientThreadId:n,renderingView:s}){var C,S,k,E;const o=V(),a=t.find(T=>{var M;return(M=T.metadata)==null?void 0:M.b1de6e2_rm}),i=(C=a==null?void 0:a.metadata)==null?void 0:C.async_task_id,l=kr(T=>i?T.tasks[i]:null),[c,d]=_.useState((S=l==null?void 0:l.collapsed)!=null?S:!1),{toggleThreadSidebar:u}=Ar(),f=ym("caterpillar"),m=_.useRef(null),p=I3(),g=Gd(o),h=Ve(n,T=>{var I,N;if(!c||!l)return!1;const M=he.getCurrentNode(T);let A=he.getNode(T,M.parentId);return A.message.author.role==="developer"&&(A=he.getNode(T,A.parentId)),!(((I=A.message.metadata)==null?void 0:I.async_task_id)===i&&((N=A.message.metadata)!=null&&N.async_task_created_at))});_.useEffect(()=>{!h&&c&&d(h)},[h,c]);const x=_.useCallback(T=>{i&&u({type:"caterpillar",caterpillarId:i,initialTab:T},f)},[u,i,f]),{uniqueSources:v}=_.useMemo(()=>a?{uniqueSources:Oxe(a)}:{uniqueSources:[],totalSources:0},[a]),y=Hf();if(!a)return null;const b=({taskId:T})=>p?null:r.jsx("div",{className:"hover:bg-token-main-surface-secondary cursor-pointer rounded-md p-2",children:r.jsx(sye,{className:"icon text-token-text-tertiary",onClick:()=>{As.setResearchShareIntent({messages:t.map(M=>M),threadId:n,taskId:T})}})});return s==="chat"?r.jsxs(YL,{collapsed:c,setCollapsed:d,children:[r.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[!g&&((k=a.metadata)==null?void 0:k.async_task_title)&&r.jsx(oye,{title:(E=a.metadata)==null?void 0:E.async_task_title}),i&&r.jsx(b,{taskId:i})]}),e,r.jsxs("div",{className:"flex items-center gap-2 py-2",children:[r.jsx(hO,{sourcesUrls:v.map(T=>T.url),onClick:()=>{y&&x("sources")},className:W("mt-0! mb-0!",y&&"cursor-default")}),i&&r.jsx(b,{taskId:i})]})]}):r.jsxs("div",{className:"flex flex-col gap-4",children:[e,r.jsx("div",{className:"border-token-border-sharp flex flex-col gap-2 border-b"}),r.jsx(Wxe,{caterpillarHeaderRef:m,taskIsPending:!1,finalMessage:a,showCounts:!1,sources:v,citationView:"condensed"})]})}function IKe({className:t}){return r.jsx(_O,{className:W("w-full",t)})}function _O({className:t}){return r.jsx("div",{className:W("loading-results-shimmer rounded-md",t),children:""})}function aye({percentage:t,height:e=10,className:n,backgroundClassName:s="bg-gray-400",barClassName:o="bg-current",transitionDuration:a,transitionTimingFunction:i,onTransitionEnd:l}){return r.jsxs("div",{className:W("relative w-full",n),style:{height:e},children:[r.jsx("div",{className:W("absolute start-0 top-0 h-full w-full",s)}),r.jsx("div",{className:W("absolute start-0 top-0 h-full transition-[width]",o),style:{width:"".concat(Math.max(Math.min(t,100),1),"%"),transitionDuration:a,transitionTimingFunction:i},onTransitionEnd:l})]})}function rye({taskId:t,intl:e,toaster:n}){return zt({mutationFn:async()=>{if(t)return await M8.cancelTask({taskId:t})},onSuccess:()=>{t&&(As.setTaskStatus(t,An.CANCELLED),As.abortTaskStream(t))},onError:()=>{n.danger(e.formatMessage({id:"4Hl5/B",defaultMessage:"An error occurred while cancelling the task."}),{loggingTitle:"An error occurred while cancelling the task.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task cancellation throws an error"})}})}function jKe({taskId:t,intl:e,toaster:n}){return zt({mutationFn:async()=>{if(!t)throw new Error("Cannot answer now without a task id");return await M8.answerNowTask({taskId:t})},onMutate:()=>{var o;if(!t)return;const s=(o=af.getTask(t))==null?void 0:o.status;return As.setTaskStatus(t,An.SKIPPING),{previousStatus:s}},onSuccess:()=>{},onError:(s,o,a)=>{t&&(a!=null&&a.previousStatus)&&As.setTaskStatus(t,a.previousStatus),n.danger(e.formatMessage({id:"c0xDWm",defaultMessage:"An error occurred while skipping thinking."}),{loggingTitle:"An error occurred while skipping thinking.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task answer now throws an error"})}})}const iye=({taskId:t,clientThreadId:e,onClose:n})=>{const s=ne(),o=Ut(),a=A8(c=>c.bySystemHint(Pe.Research)),i=rye({taskId:t,intl:s,toaster:o}),l=_.useCallback(()=>{i.mutate(),Is(e,null),B.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:At(e),currentLeafId:he.getCurrentNode(ft(e)).message.id,eventSource:"mouse"}),n()},[i,e,n]);return r.jsx(Il,{open:!0,onOpenChange:c=>{c||n()},children:r.jsxs(jl,{children:[r.jsx(Rf,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0 bg-black/25"}),r.jsxs(Sd,{className:"bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",children:[r.jsx(c3,{className:"p-4 pb-2 text-lg font-semibold md:p-6 md:pb-2",children:r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskTitle",defaultMessage:"Are you sure you want to stop researching?"})}),r.jsxs("div",{className:"flex flex-col gap-4 p-4 pt-0 md:p-6 md:pt-0",children:[r.jsx(d3,{className:"text-base",children:r.jsx("span",{className:"mb-2",children:a?r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskDescription",defaultMessage:"Stopping now will still count as one deep research request. You have {remaining} more available until {resetDate}.",values:{remaining:a.remaining,resetDate:new Date(a.reset_after).toLocaleDateString(s.locale,{month:"long",day:"numeric"})}}):r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskDescriptionNoRateLimit",defaultMessage:"Stopping now will still count as one deep research request."})})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(_e,{color:"secondary",onClick:n,children:r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskCancelButton",defaultMessage:"Don't stop"})}),r.jsx(_e,{color:"danger",className:"w-20",onClick:l,children:i.isPending?r.jsx(_s,{}):r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskButton",defaultMessage:"Stop"})})]})]})]})]})})},lye=R(()=>P(()=>import("./lrtd9knjab0hf8x5.js"),__vite__mapDeps([308,1])),{loading:t=>O(t)}),G0={div:t=>{const o=t,{node:e,children:n}=o,s=ke(o,["node","children"]);return r.jsx("div",U(w({},s),{className:"text-red-500",children:n}))},p:t=>{const o=t,{node:e,children:n}=o,s=ke(o,["node","children"]);return r.jsx("p",U(w({},s),{className:"text-token-text-primary text-start leading-6",children:n}))},a:t=>{const o=t,{node:e,children:n}=o,s=ke(o,["node","children"]);return r.jsx("a",U(w({},s),{className:"font-sm text-token-text-primary! leading-6",children:n}))}},cye=1e3*60*2,dye=30;function xO({taskId:t,clientThreadId:e,onClick:n,statusMessage:s,showSources:o,includeMargin:a,sources:i,progressBar:l}){const c=Hf(),[d,u]=_.useState(!1);return r.jsxs(r.Fragment,{children:[t&&d&&r.jsx(iye,{taskId:t,clientThreadId:e,onClose:()=>u(!1)}),r.jsxs("div",{className:"relative flex w-4/5 max-w-[416px]",children:[t&&r.jsx("button",{onClick:()=>u(!0),disabled:!t,className:"hover:bg-token-bg-elevated-secondary bg-token-bg-elevated-primary absolute end-4 bottom-4 flex items-center justify-center rounded-full border border-black/10 p-0.5 dark:border-white/10",children:r.jsx(lye,{className:"icon-lg"})}),r.jsx("button",{onClick:()=>c&&n(),className:W("bg-token-main-surface-primary mt-4 flex w-full items-start justify-start gap-[18px] rounded-2xl border border-black/10 px-5 py-4 shadow-sm dark:border-white/10",c?"hover:bg-token-main-surface-secondary cursor-pointer":"cursor-auto"),children:r.jsxs("div",{className:"flex w-full flex-col gap-3",children:[r.jsxs("div",{className:W("flex flex-col items-start justify-start self-stretch md:h-7 md:flex-row md:items-center md:justify-between",o?"h-12":"h-6"),children:[r.jsx("div",{className:W("font-sm text-token-text-primary w-full flex-1 truncate text-start leading-7 md:w-0",a&&"me-[30px]"),children:s}),o&&i]}),r.jsx("div",{className:W("flex w-full items-center justify-start gap-4 self-stretch pb-2",t&&"pe-10"),children:l})]})})]})]})}function y5({taskId:t,clientThreadId:e,toggleSidebar:n,openSidebar:s,startTime:o,progressBar:a}){const i=V(),l=ne(),[c,d]=_.useState(!1),u=JL();_.useEffect(()=>{if(!o)return;const g=Date.now()-o,h=cye-g;if(h>0){const x=setTimeout(()=>{d(!0),s()},h);return()=>clearTimeout(x)}else d(!0),s()},[o,s]);const f=Gd(i),m=kr(g=>t?g.tasks[t]:null),p=f&&m&&P3(m);return _.useEffect(()=>{p&&s()},[p,s]),a||(a=r.jsx(_O,{className:"h-2 w-full"})),r.jsx(xO,{taskId:t,clientThreadId:e,onClick:n,statusMessage:c?l.formatMessage({id:"T2SbxC",defaultMessage:"Waiting"}):r.jsx("div",{className:"text-token-text-primary text-sm font-medium text-pretty",children:u.startingMessage}),progressBar:a,showSources:!1})}function uye(t,e,n){var a;const s=t.formatMessage({id:"Bs+OcV",defaultMessage:"Thinking"});if(e.length<2)return(a=n==null?void 0:n.initial)!=null?a:s;const o=e[e.length-2];return o.type==="summary"?o.title:o.type==="search"?o.query:(o==null?void 0:o.type)==="websiteOpen"?r.jsx(Bs,{componentOverrides:G0,children:o.activeRowText}):o.type==="fileOpen"?r.jsx(Bs,{componentOverrides:G0,children:o.activeRowText}):o.type==="pythonAnalysis"?r.jsx(Bs,{componentOverrides:G0,children:o.analysisSummary}):s}function fye({task:t,clientThreadId:e,caterpillarRows:n,messageWithTaskMetadata:s,totalSources:o,handleToggleCaterpillarSidebar:a}){var k,E;const i=ne(),l=Hf(),c=uye(i,n,(k=s.metadata)==null?void 0:k.async_task_status_messages),d=((E=t==null?void 0:t.expectedDurationMinutes)!=null?E:dye)*60*1e3,u=V(),f=Gd(u),m=ye(u,"3550239432"),p=t.createdAt?+new Date(t.createdAt):Date.now(),g=Fx(p,d),h=s!=null&&s.create_time?s.create_time*1e3:0,x=Math.min(Fx(h||Date.now(),d),4),v=m?Math.max(g,x):g;let y;const b=r.jsx("div",{className:"bg-token-main-surface-tertiary flex h-2 shrink grow basis-0 items-start justify-start gap-2.5 overflow-hidden rounded-[10px]",children:r.jsx(aye,{percentage:v,barClassName:"bg-token-text-primary",backgroundClassName:"bg-token-main-surface-tertiary"})});m&&(y=b),_.useEffect(()=>{f||Is(e,{source:ns.CLIENT,value:Xt.STREAMING})},[e,f]);const{openThreadSidebar:C}=Ar();_.useEffect(()=>{n.length===2&&l&&C({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[n.length,C,t.taskId,e,l]);const S=_.useCallback(()=>{C({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[C,t.taskId]);return n.length<=1?r.jsx(y5,{taskId:t.taskId,clientThreadId:e,toggleSidebar:()=>a("activity"),openSidebar:S,startTime:new Date(t.createdAt).getTime(),progressBar:y}):r.jsx(xO,{taskId:t.taskId,clientThreadId:e,onClick:()=>a("activity"),statusMessage:c,showSources:!0,includeMargin:o>0,sources:o===0?r.jsx("div",{className:"text-token-text-tertiary text-sm text-pretty",children:r.jsx(j,{id:"zfwUjs",defaultMessage:"Looking for sources"})}):r.jsxs("button",{onClick:T=>{T.stopPropagation(),a("sources")},className:W("flex shrink-0 gap-1 text-[13px] leading-[18px] text-[#0285ff]",l?"cursor-pointer hover:text-[#0285ff]/80":"cursor-auto"),children:[r.jsx("div",{className:"relative",children:r.jsx(mn,{initial:!1,children:r.jsx(Xe.span,{initial:{opacity:0,rotateX:-90,translateY:20},animate:{opacity:1,rotateX:0,translateY:0},exit:{opacity:0,rotateX:90,translateY:-20},transition:{duration:.35},className:"absolute start-0 md:end-0",children:o},o)})}),r.jsx("div",{className:W("md:pe-0",o>0&&"ps-2",o>9&&"ps-[14px]",o>99&&"ps-[22px]"),children:o>1?r.jsx(j,{id:"zN+MuO",defaultMessage:" sources"}):r.jsx(j,{id:"dMowmJ",defaultMessage:" source"})})]}),progressBar:b})}function oy({message:t,handleToggleCaterpillarSidebar:e}){const n=Hf();return r.jsx("div",{className:"flex w-full flex-col gap-6 pt-3 pb-6",children:r.jsx("button",{onClick:()=>n&&e(),className:W("text-token-text-tertiary flex w-full text-start",n?"hover:text-token-text-secondary cursor-pointer":"cursor-auto"),children:t})})}const mye=()=>!1;function vw({task:t,clientThreadId:e,messageWithTaskMetadata:n,totalSources:s,totalSearches:o,handleToggleCaterpillarSidebar:a}){var p,g,h,x,v,y;const i=t==null?void 0:t.originalConversationId,l=bN(i),c=V(),d=Gd(c),u=mye(),f=Ve(e,b=>oge(b,t==null?void 0:t.taskId)),{clearSystemHintModeTrigger:m}=oa();return _.useEffect(()=>{(t==null?void 0:t.status)===An.COMPLETED&&!f&&!u&&(d&&og(c)?Ze(i,b=>{dn.setShouldRefetchConvoOnFinalize(b,!0)}):l(),m(Pe.Research))},[t==null?void 0:t.status,u,f,l,m,d,c,i]),r.jsx(oy,{message:r.jsxs(r.Fragment,{children:[(y=(v=(g=(p=n.metadata)==null?void 0:p.async_task_status_messages)==null?void 0:g.completed_with_time)!=null?v:(x=(h=n.metadata)==null?void 0:h.async_task_status_messages)==null?void 0:x.completed_no_time)!=null?y:r.jsx(j,{id:"4d0xZc",defaultMessage:"Completed"}),s===0?r.jsx(j,{id:"VggF2B",defaultMessage:"  0 sources"}):s===1?r.jsx(j,{id:"zkkdKV",defaultMessage:"  1 source"}):r.jsx(j,{id:"qcKt3q",defaultMessage:"  {sourcesCount} sources",values:{sourcesCount:s}}),o>0&&r.jsx(j,{id:"ti+7CY",defaultMessage:"  {searchesCount, plural, one {# search} other {# searches}}",values:{searchesCount:o}})]}),handleToggleCaterpillarSidebar:()=>a("activity")})}function yO({clientThreadId:t}){const e=V(),n=yt(e,t),s=ae(()=>{var i;return((i=Ci(n))==null?void 0:i.value)===Xt.STREAMING}),[o]=Ve(t,i=>[he.getRequestId(i)]);return Na(o)||s}function NKe({messages:t,clientThreadId:e}){var m;const n=V(),s=t.find(p=>{var g,h;return((g=p.metadata)==null?void 0:g.b1de6e2_s)&&((h=p.metadata)==null?void 0:h.async_task_id)}),o=(m=s==null?void 0:s.metadata)==null?void 0:m.async_task_id,a=t.find(p=>p.recipient===Pn.START_RESEARCH_TASK),i=Gd(n),l=Ve(e,p=>i?age(p,a==null?void 0:a.id):rge(p,a==null?void 0:a.id)),c=yO({clientThreadId:e}),[d,u]=_.useState(c),{clearSystemHintModeTrigger:f}=oa();return _.useEffect(()=>{const p=setTimeout(()=>{u(l&&(c||i))},3e3);return()=>clearTimeout(p)},[c,l,i]),_.useEffect(()=>{d&&f(Pe.Research)},[d,f]),!s||!o?d?r.jsx(y5,{taskId:o,clientThreadId:e,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):null:r.jsx(pye,{clientThreadId:e,payloadTaskId:o,messageWithTaskMetadata:s})}function pye({payloadTaskId:t,messageWithTaskMetadata:e,clientThreadId:n}){var m,p,g,h,x,v,y,b;xxe(t,e,n);const s=kr(C=>t?C.tasks[t]:null),o=ne(),a=s==null?void 0:s.status,i=_.useMemo(()=>s!=null&&s.rows?s.rows:[],[s==null?void 0:s.rows]),{toggleThreadSidebar:l}=Ar(),{totalSources:c,totalSearches:d}=_.useMemo(()=>{if(!i)return{uniqueSources:[],totalSources:0,totalSearches:0};const C=Rxe(i),S=C.reduce((E,T)=>E+T.count,0),k=Lxe(i);return{uniqueSources:C,totalSources:S,totalSearches:k}},[i]),u=ym("caterpillar"),f=_.useCallback(C=>{t&&l({type:"caterpillar",caterpillarId:t,initialTab:C},u)},[l,t,u]);return VG(t),(p=(m=e.metadata)==null?void 0:m.async_task_status_messages)!=null&&p.completed_with_time?r.jsx(vw,{task:s,clientThreadId:n,messageWithTaskMetadata:e,totalSources:c,totalSearches:d,handleToggleCaterpillarSidebar:f}):!s||!a||a===An.UNDETERMINED?r.jsx(y5,{taskId:t,clientThreadId:n,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):s.status===An.COMPLETED?r.jsx(vw,{task:s,clientThreadId:n,messageWithTaskMetadata:e,totalSources:c,totalSearches:d,handleToggleCaterpillarSidebar:f}):s.status===An.FAILED?r.jsx(oy,{message:(x=(h=(g=e.metadata)==null?void 0:g.async_task_status_messages)==null?void 0:h.error)!=null?x:o.formatMessage({id:"at6zk8",defaultMessage:"Failed to think"}),handleToggleCaterpillarSidebar:()=>f("activity")}):s.status===An.CANCELLED?r.jsx(oy,{message:(b=(y=(v=e.metadata)==null?void 0:v.async_task_status_messages)==null?void 0:y.cancelled)!=null?b:o.formatMessage({id:"u1rIr5",defaultMessage:"Task Cancelled"}),handleToggleCaterpillarSidebar:()=>f("activity")}):r.jsx(fye,{task:s,clientThreadId:n,caterpillarRows:i,messageWithTaskMetadata:e,totalSources:c,handleToggleCaterpillarSidebar:f})}var W0,bw;function gye(){if(bw)return W0;bw=1;function t(e){return e==null}return W0=t,W0}var hye=gye();const _ye=Gn(hye),xye=R(()=>P(()=>import("./iz35nlf95x4k1pcg.js"),__vite__mapDeps([146,1])),{loading:t=>O(t)}),yye=R(()=>P(()=>import("./cus6e9b5l060ctey.js"),__vite__mapDeps([309,1])),{loading:t=>O(t)});function vye({formData:t,readOnly:e,schema:n,uiSchema:s,onChange:o}){const a=_.useCallback((c,d)=>{o==null||o(U(w({},t),{[c]:d}))},[t,o]);_.useEffect(()=>{const c={};Object.entries(n.properties).forEach(([d,u])=>{c[d]===void 0&&u.default!==void 0&&("enum"in u?c[d]=[u.default]:c[d]=u.default)}),o(c)},[]);const i=_.useMemo(()=>{const c=Object.fromEntries(s.elements.map(d=>{const u=So(d.scope.split("/"));return u?[u,d]:[]}).filter(d=>d.length>0));return Object.entries(n.properties).map(([d,u])=>{const f=c[d];return f?{dataRow:u,uiRow:f,rowKey:d}:null}).filter(d=>!!d).sort((d,u)=>{const f="enum"in d.dataRow,m="enum"in u.dataRow;return f===m?0:f?-1:1})},[n,s]),l=i.filter(c=>"enum"in c.dataRow).length;return r.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:i.map((c,d)=>r.jsx(bye,{updateFormDataForRow:u=>a(c.rowKey,u),clearAll:()=>a(c.rowKey,void 0),renderRow:c,value:t==null?void 0:t[c.rowKey],readOnly:e,forceFullWidth:l%2===1&&d===l-1},c.rowKey))})}function bye({updateFormDataForRow:t,clearAll:e,renderRow:n,readOnly:s,value:o,forceFullWidth:a=!1}){const{dataRow:i,uiRow:l,rowKey:c}=n,d=ne(),u=_.useCallback(k=>{o===void 0?t([k]):o.includes(k)?t(o.filter(E=>E!==k)):t([...o,k])},[o,t]),[f,m]=_.useState(!1),[p,g]=_.useState(""),[h,x]=_.useState(!1),[v,y]=_.useState(void 0);_.useEffect(()=>{m(!1),g("")},[h]);const b=_.useCallback(()=>{u(p),m(!1),g(""),v&&y([...v,p])},[p,u,m,g,v]);_.useEffect(()=>{"enum"in i&&i.enum&&y(i.enum)},[i]);const C=_.useMemo(()=>{const k=i.type,E=_ye(o)||o===""||Array.isArray(o)&&o.length===0;if(v){const T=E?d.formatMessage({id:"Dzsmf1",defaultMessage:"Any"}):o.length===1?o[0]:o[0]+" + ".concat(o.length-1);return r.jsxs(Y.Root,{open:h,onOpenChange:x,children:[r.jsxs(Y.Trigger,{className:"border-token-main-surface-quaternary bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-full justify-between rounded-md border text-start",children:[r.jsx("span",{className:"text-token-text-primary truncate",children:T}),r.jsx(xye,{className:"icon-sm text-token-text-tertiary"})]}),r.jsx(Y.Portal,{children:r.jsxs(Y.Content,{size:"medium",children:[r.jsx(Y.MultiSelectCheckboxItem,{checked:(o==null?void 0:o.length)===0||o===void 0,onCheckedChange:e,children:r.jsx(j,{id:"Dzsmf1",defaultMessage:"Any"})},"any"),r.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),v.map(M=>r.jsx(Y.MultiSelectCheckboxItem,{checked:o==null?void 0:o.includes(M),onCheckedChange:()=>u(M),children:r.jsx("span",{className:"pe-2",children:M})},M)),r.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),f?r.jsxs("div",{className:"flex w-full flex-row items-center justify-between pe-5",children:[r.jsx(xf,{autoFocus:!0,name:"new-option",className:"bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-0 flex-1 grow rounded-md border-none text-start focus-within:ring-0!",value:p,placeholder:d.formatMessage({id:"LhAlwa",defaultMessage:"Add option..."}),ariaLabel:d.formatMessage({id:"XElhCL",defaultMessage:"New option"}),onChange:M=>g(M.target.value),onKeyDown:M=>M.stopPropagation(),onPressEnter:b}),r.jsx("button",{className:"shrink-0 cursor-pointer",onClick:b,children:r.jsx(yye,{className:"icon-sm text-token-text-primary"})})]}):r.jsx("div",{className:"flex px-2",children:r.jsx("button",{className:"bg-token-main-surface-primary hover:bg-token-main-surface-secondary w-full rounded-md border-none p-2 text-start text-sm",onClick:()=>m(!0),children:r.jsx(j,{id:"lMgmto",defaultMessage:"Add Option..."})})})]})})]})}else return k==="string"||k==="integer"?r.jsx(xf,{ariaLabel:d.formatMessage({id:"M18pon",defaultMessage:"Form row"}),name:c,color:"quaternary",placeholder:l.placeholder,value:o!=null?o:"",type:"text",className:W("border-token-main-surface-quaternary text-token-text-primary",E&&"text-token-text-quaternary"),onChange:T=>t(T.target.value),disabled:s}):null},[i,o,l.placeholder,u,d,c,s,t,e,f,p,h,v,b]);if(!C)return null;const S=a||!v;return r.jsx(Cye,{label:l.label,className:W("col-span-1 flex flex-col justify-between",S&&"sm:col-span-2"),children:C})}function Cye({children:t,label:e,className:n}){return r.jsxs("div",{className:n,children:[r.jsx("p",{className:"mb-1 font-[550]",children:e}),r.jsx("div",{children:t})]})}function Sye(t,e,n){const s=e.elements.length;if(s===0)return;const o=Object.entries(t).reduce((a,[i,l])=>Array.isArray(l)?l.length>0?a+1:a:l!==""?a+1:a,0);B.logEventWithStatsig("dynamic-form-submission","chatgpt_dyanmic_form_submission",U(w({},En({clientThreadId:n})),{totalItems:s.toString(),completedItems:o.toString(),ratio:(o/s).toString()}))}function wye(t,e){let n="";return e.elements.forEach(s=>{var c;const o=s.scope.split("/").pop(),a=o&&t[o],i=a?Array.isArray(a)?a.join(", "):a:"Any",l=(c=s.label)!=null?c:o;n+="".concat(l,": ").concat(i,"\n")}),n}function PKe({messages:t,clientThreadId:e,isLastMessage:n}){var C;const s=t.find(S=>S.author.role===Ke.Assistant),o=t.find(S=>{var k;return(k=S.metadata)==null?void 0:k.json_form}),a=(C=o==null?void 0:o.metadata)==null?void 0:C.json_form,[i,l]=_.useState({}),[c,d]=_.useState(),[u,f]=_.useState(),m=gr.useStore(),p=nm(e);_.useEffect(()=>{a&&(d(a.json_form_ui),f(a.json_form_data))},[a]);const g=_.useCallback(()=>{if(l({}),c){const S=U(w({},c),{elements:c.elements.filter(k=>k.scope!=="#/properties/AdditionalInfo")});d(S)}u&&(delete u.properties.AdditionalInfo,f(u))},[l,d,f,c,u]),h=_.useCallback(()=>{if(c){const S=U(w({},c),{elements:[...c.elements,{type:"Control",scope:"#/properties/AdditionalInfo",label:"Additional Info",placeholder:"Any other details..."}]});d(S)}if(u){const S=U(w({},u.properties),{AdditionalInfo:{type:"string"}});f(U(w({},u),{properties:S}))}},[d,f,c,u]),x=c==null?void 0:c.elements.some(S=>S.scope.endsWith("#/properties/AdditionalInfo")),v=Ve(e,he.getCurrentLeafId),y=(o==null?void 0:o.id)!==v;if(!o||!u||!c)return(s==null?void 0:s.status)==="in_progress"&&n?r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(nr,{className:"h-[26px] w-full"}),r.jsx(nr,{className:"h-[26px] w-3/4"}),r.jsx(gse,{})]}):null;if(y)return null;const b=async S=>{const k=m.getActiveSystemHintType(),E=wye(i,c);Sye(i,c,e),p({sourceEvent:S,promptMessage:ls(E),completionMetadata:{systemHints:k?[k]:[],conversationMode:{kind:wt.PrimaryAssistant}}})};return r.jsxs(cj,{children:[r.jsx(kye,{formData:i,dataSchema:u,uiSchema:c,setData:l,readOnly:y}),r.jsxs("div",{className:"flex w-full justify-between",children:[x?r.jsx("div",{}):r.jsx(_e,{disabled:y,onClick:h,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Sen69P",defaultMessage:"Add a detail"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(_e,{disabled:y,onClick:g,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Uqo7UD",defaultMessage:"Reset"})}),r.jsx(_e,{disabled:y,onClick:b,children:r.jsx(j,{id:"FVou++",defaultMessage:"Start"})})]})]})]})}function kye({dataSchema:t,uiSchema:e,setData:n,readOnly:s,formData:o}){return r.jsx("div",{children:r.jsx(vye,{formData:o,readOnly:s,schema:t,uiSchema:e,onChange:a=>n(a)})})}const Eye=/^[A-Za-z_][\w]*$/,Tye=2;function Mye(t){const e=_.useMemo(()=>t?v5(t):null,[t]);return _.useCallback(n=>{e&&Zo(e,void 0,n)},[e])}function Aye(){const t=cn(),e=rg(n=>n.showDebugConversationTurns);return Iye(t,e)}function Iye(t,e){return!!t&&Ah(t)||e}function v5(t,e={}){var l,c;const{indent:n=0}=e,s=" ".repeat(n),o=jye((l=t.props)!=null?l:{}),a=((c=t.children)!=null?c:[]).filter(d=>d!=null);if(!a.length)return"".concat(s,"<").concat(t.type).concat(o," />");const i=a.map(d=>v5(d,{indent:n+Tye})).join("\n");return"".concat(s,"<").concat(t.type).concat(o,">\n").concat(i,"\n").concat(s,"</").concat(t.type,">")}function jye(t){const e=Object.keys(t!=null?t:{}).filter(s=>t[s]!==void 0);if(!e.length)return"";const n=e.sort().map(s=>Nye(s,t[s]));return" ".concat(n.join(" "))}function Nye(t,e){return typeof e=="string"?"".concat(t,"=").concat(JSON.stringify(e)):"".concat(t,"={ ").concat(ay(e)," }")}function ay(t){if(Pye(t))return v5(t,{indent:0});if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number"){if(!Number.isFinite(t))throw new Error("Cannot serialize non-finite numbers in DIL props");return String(t)}if(typeof t=="string")return JSON.stringify(t);if(Array.isArray(t)){const e=t.map(n=>ay(n)).join(", ");return"[".concat(e,"]")}if(t instanceof Date)return JSON.stringify(t.toISOString());if(Rye(t)){const n=Object.keys(t).sort().map(s=>{const o=Eye.test(s)?s:JSON.stringify(s);return"".concat(o,": ").concat(ay(t[s]))}).join(", ");return n?"{ ".concat(n," }"):"{}"}return JSON.stringify(t)}function Pye(t){return!t||typeof t!="object"?!1:"type"in t&&"props"in t&&"children"in t}function Rye(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Lye=R(()=>P(()=>import("./hzub286d2mnjgt50.js").then(t=>t.i),__vite__mapDeps([310,1])).then(t=>t.DILRenderer));function vO(t){const c=t,{props:e={},children:n=[]}=c,s=ke(c,["props","children"]),o=w(w({},e),s),a=n.map(vO),d=o,{type:i}=d,l=ke(d,["type"]);if(typeof i!="string")throw new Error("Invalid DIL node: missing widget type");return U(w({},l),{type:i,children:a})}const Oye=({dil:t,rootWidget:e})=>{var f,m;const n=HG(),[s,o]=_.useState(0),a=_.useMemo(()=>{const p=e!=null?e:t?vO(t):null;if(!p)throw new Error("DILWidget requires either a dil or rootWidget");return p},[e,t]),i=(m=(f=a.theme)!=null?f:n)!=null?m:"light",l=_.useRef(i),c=_.useMemo(()=>U(w({},a),{theme:i}),[a,i]),d=Mye(t),u=Aye();return _.useEffect(()=>{l.current!==i&&(l.current=i,o(p=>p+1))},[i]),r.jsxs("div",{className:"mt-4",children:[t&&u&&r.jsx("div",{className:"text-token-text-tertiary hover:text-token-text-secondary mb-2 flex justify-end",children:r.jsx(wI,{onCopy:d,buttonText:"Copy DIL"})}),r.jsx(Lye,{widget:c,theme:i},s)]})},RKe=Object.freeze(Object.defineProperty({__proto__:null,DILWidget:Oye},Symbol.toStringTag,{value:"Module"})),bO=0,b5=700,Dye=t=>{var e;return Array.from((e=t.match(/\s*\S+(?:\s+|$)/g))!=null?e:[])},Fye=/^\s*$/,Bye=()=>{const{locale:t}=ne(),e=_.useMemo(()=>{try{return new Intl.Segmenter(t,{granularity:"word"})}catch(s){return null}},[t]);return _.useCallback(s=>{var a;if(e==null)return Dye(s);const o=[];for(const{segment:i,isWordLike:l}of e.segment(s))if(Fye.test(i)||!l){const c=Math.max(o.length-1,0);(a=o[c])!=null||(o[c]=""),o[c]+=i}else o.push(i);return o},[e])},Uye=_.createContext({isDisabled:!0,segmentText:()=>[],enqueueElement:()=>{},dequeueElement:()=>{},updateElementBounds:()=>{},reportReady:()=>{},reportProgress:()=>{},reportComplete:()=>{},lastPositionCompletedAnimating:null,activeStartPos:null,animationTiming:{durationMs:b5,delayMs:bO}}),uu=(t,e)=>"".concat(t,"-").concat(e),$ye=t=>{const[e,n]=t.split("-");return{tag:e,startPos:parseInt(n)}},LKe=({isDisabled:t,onComplete:e,children:n,defaultDelayPerSegmentMs:s=bO,defaultAnimationDurationPerSegmentMs:o=b5})=>{const a=_.useRef(new Set),[i,l]=_.useState(null),[c,d]=_.useState(null),u=_.useRef(new Map),f=_.useRef(null),m=_.useCallback((C,S,k,E)=>{var T;f.current=Math.max((T=f.current)!=null?T:0,k),u.current.set(uu(C,S),{start:S,end:k,numChildren:E})},[]),p=_.useCallback((C,S)=>{c!=null&&S<=c||(a.current.add(uu(C,S)),a.current.size===1&&d(S))},[c]),g=_.useCallback((C,S)=>{const k=uu(C,S);a.current.delete(k),u.current.delete(k)},[]),[h]=_.useState(()=>({delayMs:s,durationMs:o})),x=_.useCallback((C,S,k)=>{var A;if(S!==c)return;const E=uu(C,S),T=(A=u.current.get(E))==null?void 0:A.end,M=f.current;T==null||M==null},[c]),v=_.useCallback((C,S)=>{const k=uu(C,S);if(!a.current.has(k))return;a.current.delete(k);let E=null;for(const T of a.current){const{startPos:M}=$ye(T);(E==null||M<E)&&(E=M)}E!=null&&d(E)},[]),y=_.useCallback(C=>{(a.current.size===0||a.current.size===1&&C===f.current)&&(e==null||e()),l(S=>Math.max(S!=null?S:0,C))},[e]),b=Bye();return r.jsx(Uye.Provider,{value:{lastPositionCompletedAnimating:i,isDisabled:t,activeStartPos:c,animationTiming:h,segmentText:b,enqueueElement:p,dequeueElement:g,updateElementBounds:m,reportProgress:x,reportReady:v,reportComplete:y},children:n})},Vye="_root_m1hgl_7",Hye="_fadeIn_m1hgl_8",OKe={root:Vye,fadeIn:Hye,"fade-in":"_fade-in_m1hgl_1"},DKe=()=>{const t=ze(V(),"3991624489"),e=rg(({wordFadeType:o})=>o),n=rg(({tokenBufferType:o})=>o),s=t.get("animation_duration",b5);return{wordFadeType:ng(e!=null?e:t.get("word_fade_type"),WG),bufferType:ng(n!=null?n:t.get("token_buffer_type"),GG),animationDurationMs:s}};function CO(t){return ye(t,"2304807207")}function FKe({text:t}){return t&&t.length>0?r.jsx("span",{className:"result-streaming streaming-dot loading-shimmer relative pt-1",children:r.jsx(Bs,{children:t})}):r.jsx("span",{className:"result-streaming streaming-dot relative pt-1",children:""})}function BKe(t,e,n,s){var o;return(o=Gye(t))!=null?o:qye(t,e,n,s)}function Gye(t){var d,u,f;const{errType:e,errCode:n,err:s,disclaimers:o}=(d=t.clientMetadata)!=null?d:{},a=zye(t),i=n!==Ur.ModelIncompatibility&&n!==Ur.ContentPolicy&&((f=(u=t.clientMetadata)==null?void 0:u.canRetry)!=null?f:!0);if(a&&Wye(t))return{flagSeverity:"warning",shouldHideContent:!0,errCode:Ur.ContentRegurgitation,errMessage:s,canRetry:i};if(!(o&&o.length>0)&&a)return{flagSeverity:"warning",shouldHideContent:!0,errCode:Ur.ContentOrTos,errMessage:s,canRetry:i};if(e)return{flagSeverity:e,shouldHideContent:e==="danger"&&(n===Ur.ContentPolicy||n===Ur.ModelIncompatibility),disclaimers:o,errCode:n,errMessage:s,canRetry:i}}function Wye(t){var e;return((e=t.metadata)==null?void 0:e.safety_plugin_status_code)===123}function zye(t){var e,n;return((n=(e=t.metadata)==null?void 0:e.finish_details)==null?void 0:n.type)==="content_filter"}function qye(t,e,n,s){var a,i,l,c;if(!n&&e&&(t==null?void 0:t.author.role)===Ke.User&&t.status!==void 0&&!s)return{flagSeverity:"info",shouldHideContent:!1,errCode:Uu.MissingLastCompletion,canRetry:!0};if(((i=(a=t.metadata)==null?void 0:a.finish_details)==null?void 0:i.type)==="interrupted"&&((c=(l=t.metadata)==null?void 0:l.finish_details)==null?void 0:c.reason)==="server_error")return{flagSeverity:"danger",shouldHideContent:!1,errCode:Uu.InterruptionServerError,canRetry:!0}}var Zn=(t=>(t[t.Thought=0]="Thought",t[t.Recap=1]="Recap",t[t.Search=2]="Search",t[t.CodeAnalysis=3]="CodeAnalysis",t[t.ImageAnalysis=4]="ImageAnalysis",t[t.ComputerOutput=5]="ComputerOutput",t[t.N7jupdLoading=6]="N7jupdLoading",t[t.Browsing=7]="Browsing",t[t.N7jupdAPI=8]="N7jupdAPI",t[t.e1ld0dvz=9]="e1ld0dvz",t[t.Glaux=10]="Glaux",t[t.Strix=11]="Strix",t))(Zn||{});const Yye=_.createContext(null);let Gp=null;const SO=()=>{var t;return(t=Gp==null?void 0:Gp.platformConnectors)!=null?t:null};function UKe({value:t,children:e}){"use no forget";return Gp=t,r.jsx(Yye.Provider,{value:t,children:e})}const Zye=_.createContext({postId:""});function wO(){const{postId:t}=_.useContext(Zye),{postWithProfile:e}=_.useContext(zG);return(e==null?void 0:e.post.id)||t}class Kye{async fetch(e,n){const a=this.makeQueryOptions(n,e),{enabled:s}=a,o=ke(a,["enabled"]);return await e.fetchQuery(o)}makeQueryOptions(e,n){var i;const s=wo(e.asset.asset_pointer),o=U(w({},e),{id:s}),a=["getFileDownloadLink",s,e.gizmoId,e.conversationId,e.sharedThreadId,e.postId];return e.force&&(n==null||n.invalidateQueries({queryKey:a})),{queryKey:a,queryFn:async()=>s.startsWith(Jc)?U(w({},e.asset),{url:s}):await Qye(o),staleTime:WT,enabled:(i=e.getServerUrl)!=null?i:!0}}}const Qd=new Kye;async function Qye(t){const{asset:e,gizmoId:n,id:s,isUnauthenticated:o,conversationId:a,postId:i}=t,l=await Lh(s,n,o,a,!1,i).catch(c=>{throw c instanceof $n||Re.addError(new Error("Could not fetch file with ID ".concat(s," from file service"),{cause:c})),c});if(l.status!==Oh.Success)throw Re.addError("Could not fetch file with ID ".concat(s," from file service"),l),new Error("Could not fetch file with ID ".concat(s," from file service"));return U(w({},e),{url:l.download_url})}function $Ke(o){var a=o,{className:t,onLoad:e,fadeIn:n=!0}=a,s=ke(a,["className","onLoad","fadeIn"]);const[i,l]=_.useState(!1);function c(d){l(!0),e==null||e(d)}return r.jsx("img",U(w({},s),{alt:s.alt,onLoad:d=>c(d),className:W(t,"w-fit",n&&"transition-opacity duration-300",i?"opacity-100":"opacity-0")}))}function Jye(t,e,n){const s=V(),o=!tt(s),a=_.useContext(qh),i=a==null?void 0:a.serverSharedThreadId,l=wO();return q$({queries:t.map(c=>Qd.makeQueryOptions({asset:c,sharedThreadId:i,gizmoId:e,isUnauthenticated:o,postId:l,conversationId:n}))})}function VKe(t){"use forget";const e=G.c(10),{asset:n,gizmoId:s,conversationId:o,getServerUrl:a,sharedThreadId:i}=t,l=V();let c;e[0]!==l?(c=tt(l),e[0]=l,e[1]=c):c=e[1];const d=!c,u=wO();let f;return e[2]!==n||e[3]!==o||e[4]!==a||e[5]!==s||e[6]!==d||e[7]!==u||e[8]!==i?(f=Qd.makeQueryOptions({asset:n,gizmoId:s,isUnauthenticated:d,conversationId:o,getServerUrl:a,sharedThreadId:i,postId:u}),e[2]=n,e[3]=o,e[4]=a,e[5]=s,e[6]=d,e[7]=u,e[8]=i,e[9]=f):f=e[9],rt(f)}const Xye=t=>{const[e,n]=_.useState(null);return Ve(t,o=>{var i,l,c;if(e)return e;const a=he.findNode(o,d=>{var u;return((u=d.message.metadata)==null?void 0:u.visited_risky_domain)!==void 0});return(i=a==null?void 0:a.message.metadata)!=null&&i.visited_risky_domain?(n((l=a==null?void 0:a.message.metadata)==null?void 0:l.visited_risky_domain),(c=a.message.metadata)==null?void 0:c.visited_risky_domain):null})},e3e=(t,e)=>{var i,l;const n=Ao(),s=ae(()=>e!=null?e:n==null?void 0:n.serverId$()),o=_.useMemo(()=>t?[t]:[],[t]);return(l=(i=Jye(o,void 0,s)[0])==null?void 0:i.data)==null?void 0:l.url},HKe=t=>{const[e,n]=_.useState(t);return _.useEffect(()=>{if(!t||t===e)return;const s=new Image;return s.src=t,s.onload=()=>n(t),s.onerror=()=>console.warn("failed to load",t),()=>{s.src="",s.onload=null,s.onerror=null}},[t,e]),e},t3e=t=>t.replace(/^wwws?\./,""),n3e=["localhost","127.0.0.1","newtab"];function s3e(t){try{return new URL(t)}catch(e){return Re.addError(e),null}}function Cw(t){var a;const e=(a=t==null?void 0:t.vmMetadata)==null?void 0:a.url;if(!e)return{domain:null,origin:null};if(e.startsWith("data:"))return{domain:null,origin:null};const n=s3e(e);if(!n)return{domain:null,origin:null};if(n3e.includes(n.hostname))return{domain:null,origin:null};const s=n.origin;return{domain:t3e(n.hostname),origin:s}}const o3e=(t,e)=>{var u,f,m,p,g;const n=[],s=[],o=[],a=[];if(t.every(h=>h.author.name===Pn.n7jupd_m)){if(!e)return;const h=So(t),x=typeof((u=h==null?void 0:h.metadata)==null?void 0:u.agent_custom_loading_headline)=="string"?h.metadata.agent_custom_loading_headline:void 0;return[{type:Zn.N7jupdLoading,needs_startup:(m=(f=h==null?void 0:h.metadata)==null?void 0:f.needs_startup)!=null?m:!1,custom_headline:x}]}for(const h of t){if(h.content.content_type===ut.ComputerOutput){const x=U(w({},h.content.screenshot),{vmMetadata:(p=h.metadata)==null?void 0:p.n7jupd_v,messageId:h.id});n.push(x)}if(h.content.content_type===ut.Text&&((g=h.recipient)!=null&&g.includes("computer"))&&s.push({type:h.recipient,parts:h.content.parts.join("")}),h.content.content_type===ut.StructuredThoughts)for(const x of h.content.thoughts)x.summary&&(o.push(x.summary),a.push(x.content))}const l=!1,c=[],d=Math.min(n.length,a.length);for(let h=0;h<d;h++){const x=n[h],{domain:v}=Cw(x),y={type:Zn.ComputerOutput,screenshots:[x],text:"",messages:t,thoughts:[o[h]],fullThoughts:[a[h]],actions:s,isBlank:!v};c.push(y)}if(n.length>d){const h=n.slice(d);if(c.length===0)c.push({type:Zn.ComputerOutput,screenshots:h,text:"",messages:t,thoughts:[],fullThoughts:[],actions:s,isBlank:l});else{const x=c[c.length-1];x.screenshots.push(...h),x.isBlank&&(x.isBlank=h.every(v=>!Cw(v).domain)&&x.isBlank)}}if(a.length>d)for(let h=d;h<a.length;h++)c.push({type:Zn.ComputerOutput,screenshots:[],text:"",messages:t,thoughts:[o[h]],fullThoughts:[a[h]],actions:s,isBlank:!0});return!c.length&&(n.length||a.length)?[{type:Zn.ComputerOutput,screenshots:n,text:"",messages:t,thoughts:o,fullThoughts:a,actions:s,isBlank:l}]:c},GKe=t=>{var s,o,a,i;const e=t.messages[0];let n;switch(e.author.name){case"browser.search":{const l=(o=(s=e.metadata)==null?void 0:s.n7jupd_title)!=null?o:"Searched",c=(i=(a=e.metadata)==null?void 0:a.n7jupd_urls)!=null?i:[];n={type:Zn.Search,queries:[{type:"search",q:l}],sources:c.map(d=>({type:"search_result_group",domain:d,entries:[{type:"search_result",url:d,title:"",snippet:"",ref_id:null,content_type:null,pub_date:null}]}))};break}}if(!(!n||!n.sources.length))return[n]},ry=/connector_[0-9a-f]{32}/i,WKe=t=>{var l,c,d,u,f,m,p,g,h,x,v,y,b,C,S,k;const e=SO();if(!e)return;const n=t.messages[0];if(!n)return;const s=(l=n.metadata)==null?void 0:l.n7jupd_subtool;if((c=s==null?void 0:s.subtool)!=null&&c.includes("search"))return[{type:Zn.N7jupdAPI,action:"n7jupd_as"}];if((d=s==null?void 0:s.subtool)!=null&&d.includes("api_doc"))return[{type:Zn.N7jupdAPI,action:"n7jupd_ag"}];const o=(f=(u=n.metadata)==null?void 0:u.n7jupd_subtool)==null?void 0:f.generic_api_func;let a=(p=(m=o==null?void 0:o.match(ry))==null?void 0:m[0])!=null?p:void 0;a||(a=(v=(x=(h=(g=n.metadata)==null?void 0:g.n7jupd_url)==null?void 0:h.match(ry))==null?void 0:x[0])!=null?v:void 0);const i=e==null?void 0:e.get(a!=null?a:"");if(!a||!i)return[{type:Zn.N7jupdAPI,action:"n7jupd_cf"}];if(t.messages.length>1&&((y=t.messages[1].metadata)!=null&&y.connector_source)&&t.messages[1].content.content_type===ut.TetherBrowsingDisplay){if((b=t.messages[1].metadata)!=null&&b.display_url&&((C=t.messages[1].metadata)!=null&&C.display_title))return[{type:Zn.N7jupdAPI,action:"n7jupd_cf",source:i,fetchResult:{url:(S=t.messages[1].metadata)==null?void 0:S.display_url,title:(k=t.messages[1].metadata)==null?void 0:k.display_title}}];const E=kO(t.messages[1].content.result);if(E.length)return[{type:Zn.N7jupdAPI,action:"n7jupd_cs",source:i,searchResults:E.map(([T,M])=>({url:T,title:M}))}]}return[{type:Zn.N7jupdAPI,action:"n7jupd_cf",source:i}]},zKe=t=>{var i,l,c,d,u,f,m,p,g,h,x,v,y;const e=SO();if(!e)return;const n=t.messages[0];if(!n)return;if((i=n.recipient)!=null&&i.includes("list_resources")||(l=n.recipient)!=null&&l.includes("search_tools"))return[{type:Zn.N7jupdAPI,action:"n7jupd_as"}];if((c=n.recipient)!=null&&c.includes("read_resources")||(d=n.recipient)!=null&&d.includes("get_resource"))return[{type:Zn.N7jupdAPI,action:"n7jupd_ag"}];if(t.messages.length==1)return[];const s=t.messages[1];if(s.content.content_type!==ut.CitableCodeOutput)return[{type:Zn.N7jupdAPI,action:"n7jupd_cf"}];let o=(f=(u=s.content.metadata)==null?void 0:u.connector_id)!=null?f:void 0;o||(o=(p=(m=s.content.output_str.match(ry))==null?void 0:m[0])!=null?p:void 0);const a=e==null?void 0:e.get(o!=null?o:"");if(t.messages.length>1&&t.messages[1].content.content_type===ut.CitableCodeOutput&&((g=t.messages[1].content.metadata)!=null&&g.connector_source)){if((h=t.messages[1].metadata)!=null&&h.display_url&&((x=t.messages[1].metadata)!=null&&x.display_title))return[{type:Zn.N7jupdAPI,action:"n7jupd_cf",source:a,fetchResult:{url:(v=t.messages[1].metadata)==null?void 0:v.display_url,title:(y=t.messages[1].metadata)==null?void 0:y.display_title}}];const b=kO(t.messages[1].content.output_str);if(b.length)return[{type:Zn.N7jupdAPI,action:"n7jupd_cs",source:a,searchResults:b.map(([C,S])=>({url:C,title:S}))}]}return[{type:Zn.N7jupdAPI,action:"n7jupd_cf",source:a}]};function kO(t){const e=t.replace(/^\s*L\d+:\s*/gm,""),n=[],s=[];for(let f=0;f<e.length;f++){const m=e[f];if(m==="{")s.push(f);else if(m==="}"){if(s.length===0)continue;const p=s.pop();n.push({start:p,end:f})}}const o=["display_url","web_link","url","web_url"],a=["display_title","title","name","path","subject","summary"],i=f=>f.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),l=(f,m)=>{const p=[];for(const g of f){const h=new RegExp('"'.concat(i(g),'"\\s*:\\s*"([^"]+)"'),"g");for(const x of m.matchAll(h))p.push(x[1].replace(/\n/g,""))}return p},c=[];for(const{start:f,end:m}of n){const p=e.slice(f,m+1),g=l(o,p),h=l(a,p),x=Math.min(g.length,h.length);for(let v=0;v<x;v++)c.push([g[v],h[v]])}const d=new Map;for(const[f,m]of c)d.set("".concat(f,"|||").concat(m),[f,m]);return Array.from(d.values())}const a3e="_markdown_1frq2_10",r3e={markdown:a3e},Sw=({content:t})=>r.jsx(Bs,{className:W(r3e.markdown,"text-token-text-secondary text-[14px] leading-5"),componentOverrides:{code:e=>r.jsx(Qte,U(w({},e),{wrapperClassName:"",showActionBar:!1}))},children:t});function i3e(t){let e;try{e=JSON.parse(t)}catch(o){return Re.addError(o),null}const n=o=>typeof o=="object"&&o!=null&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.button=="number"&&typeof o.action=="string",s=o=>typeof o=="object"&&o!=null&&Array.isArray(o.actions);if(typeof e=="object"&&e!=null&&s(e)){const o=Pl(e.actions,a=>a&&a.action==="click");if(n(o))return o}else if(n(e))return e;return null}const l3e=({chunk:t,isKAUR1BR5:e})=>{var p,g,h,x,v;const n=_.useRef(null),s=t.screenshots.at(-1),o=(p=t.fullThoughts)==null?void 0:p.at(-1),a=(g=t.thoughts)==null?void 0:g.at(-1),i=o!=null?o:a,l=(h=t.actions)==null?void 0:h.at(-1),c=e3e(s,void 0),[d,u]=_.useState(null),[f,m]=_.useState(!1);return _.useEffect(()=>{if(!c)return;let y=!1;const b=new Image;return m(!1),b.src=c,b.onload=()=>{!y&&u(c)},b.onerror=()=>{!y&&u(null),!y&&m(!0),!y&&Re.addError(new Error("Failed to load image"))},()=>{y=!0}},[c]),(l==null?void 0:l.type)==="computer.click"&&i3e(l.parts),e?((x=t.fullThoughts)==null?void 0:x.length)===0?r.jsx(Sw,{content:"Used the browser"},"used-the-browser"):r.jsx(r.Fragment,{children:(v=t.fullThoughts)==null?void 0:v.map(y=>r.jsx(Sw,{content:y},y))}):r.jsxs("div",{className:"flex w-full flex-row items-start justify-center gap-4",children:[i&&r.jsx("div",{className:"text-token-text-secondary flex-1 text-sm",children:i}),s&&r.jsx("div",{ref:n,className:"border-token-border-heavy mt-1 flex h-30 w-40 items-center justify-center overflow-hidden rounded-lg border",children:d&&r.jsx(DR,{src:d,alt:"screenshot",className:"flex aspect-[1024/764] w-40 items-center justify-center overflow-hidden",children:r.jsx("img",{src:d,alt:"screenshot",loading:"lazy",className:"h-full w-full object-cover object-bottom"},d)})})]})},c3e=({clientThreadId:t,messageId:e,renderClosestScreenshot:n})=>{const s=Ve(t,i=>{const c=he.getConversationTurns(i).find(f=>f.messages.some(m=>m.id===e));if(!c)return null;const d=o3e([...c.messages],!1);return d==null?void 0:d.find(f=>f.type===Zn.ComputerOutput)}),o=_.useMemo(()=>{if(!s)return null;if(n){const d=s.screenshots.findIndex(u=>u.messageId===e);return d===-1?null:d}const i={};s.screenshots.forEach((d,u)=>{i[d.messageId]=u});const l=s.messages.findIndex(d=>d.id===e),c=s.messages.slice(l).find(d=>i[d.id]);return c?i[c.id]:null},[s,e,n]),a=s==null?void 0:s.messages.some(i=>{var l;return(l=i.metadata)==null?void 0:l.kaur1br5_mode});return n&&o===null||!s||!s.screenshots.length?null:r.jsx("div",{children:r.jsx("div",{className:"relative flex flex-1 cursor-default flex-col gap-2",children:r.jsx(l3e,{chunk:s,isKAUR1BR5:a})})})},d3e=R(()=>P(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([147,1])),{loading:t=>O(t)});function u3e(t,e,n){const s=ne(),{selectedSources:o}=La(t),a=nm(t);return _.useCallback(async()=>await a({promptMessage:ls(s.formatMessage({id:"3qSZZF",defaultMessage:"I understand the risks. Please continue"}),w({user_acknowledges_pim:!0,system_hints:e},o&&{selected_sources:xi(o)})),completionMetadata:{systemHints:e,conversationMode:n},eventSource:"mouse"}),[a,n,e,s,o])}const f3e=({onMarkSafe:t,justification:e,clientThreadId:n,flaggedMessageId:s})=>{const[o,a]=_.useState(!1),i=ne(),l=_.useCallback(()=>a(!1),[]);return r.jsxs(r.Fragment,{children:[r.jsx(Mt,{testId:"modal-confirm-close-editor",isOpen:o,size:"custom",className:"max-w-xl",onClose:l,type:"warning",hideSeparator:!1,title:r.jsx("span",{className:"text-xl",children:r.jsx(j,{id:"lzy3Zg",defaultMessage:"Potentially Malicious Content Detected"})}),primaryButton:r.jsx(Ns.Button,{title:i.formatMessage({id:"E82qxN",defaultMessage:"Mark safe and continue"}),color:"danger",onClick:t}),secondaryButton:r.jsx(Ns.Button,{title:i.formatMessage({id:"byfawg",defaultMessage:"Don't mark safe"}),color:"secondary",onClick:l}),showCloseButton:!0,closeButton:r.jsx(gn,{onClick:l}),children:r.jsxs("div",{children:[r.jsx("div",{className:"text-md text-token-text-secondary pb-2",children:e?r.jsx(Bs,{children:e}):r.jsx(j,{id:"OkPb2T",defaultMessage:"This webpage contained hidden instructions that may be attempting to extract sensitive information. You should only continue if you're sure this content is safe."})}),!!s&&r.jsx(c3e,{clientThreadId:n,messageId:s,renderClosestScreenshot:!0})]})}),r.jsx(_e,{color:"danger",onClick:()=>a(!0),children:r.jsx(j,{id:"5L93Tx",defaultMessage:"Continue"})})]})};function qKe({children:t,isFinalTurn:e,hasActiveRequest:n,conversationMode:s,clientThreadId:o,justification:a,flaggedMessageId:i}){const l=Ve(o,u=>{var f;return(f=he.findNode(u,m=>m.message.author.role===Ke.User))==null?void 0:f.message}),c=_.useMemo(()=>{var u;return(u=l==null?void 0:l.metadata)==null?void 0:u.system_hints},[l]),d=u3e(o,c,s);return r.jsxs("div",{children:[r.jsxs("div",{className:"bg-token-main-surface-secondary mt-1 flex gap-2 rounded-2xl px-3 py-2",children:[r.jsx(d3e,{className:"icon-xl mt-2"}),r.jsx("div",{children:t})]}),e&&!n&&r.jsx("div",{className:"mt-2",children:r.jsx(m3e,{onMarkSafe:d,justification:a,flaggedMessageId:i,clientThreadId:o})})]})}function m3e({onMarkSafe:t,justification:e,clientThreadId:n,flaggedMessageId:s}){return r.jsx("div",{children:r.jsx(f3e,{onMarkSafe:t,justification:e,clientThreadId:n,flaggedMessageId:s})})}const YKe=()=>r.jsxs("div",{className:"text-message relative flex w-full flex-col items-end gap-2 text-start break-words whitespace-normal [.text-message+&]:mt-5",children:[r.jsx("div",{className:"text-token-text-tertiary px-5 text-sm",children:r.jsx(j,{id:"clarification.autoResponse",defaultMessage:"Auto response"})}),r.jsx("div",{className:"bg-token-message-surface relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-5 py-2.5",children:r.jsx(j,{id:"clarification.modelContinueMessage",defaultMessage:"Continue"})})]}),p3e=R(()=>P(()=>import("./d4qsitgbpj3e1n6x.js"),__vite__mapDeps([311,1])),{loading:t=>O(t)}),ZKe=()=>r.jsx("div",{className:"flex w-full justify-end px-5 py-4",children:r.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-1",children:[r.jsx(p3e,{className:"size-5"}),r.jsx(j,{id:"operator.takeover.indicator",defaultMessage:"You took control"})]})});function g3e(t,e,n){var a,i,l,c;if(!t)return n.current=null,null;if(!e)return(i=(a=n.current)==null?void 0:a.message)!=null?i:null;const s=n.current;if(s&&s.threadId===t)return s.message;const o=(c=(l=he.findFirstFromLeaf(e,d=>d.message.author.role===Ke.Tool&&d.message.author.name==="n7jupd.metadata"))==null?void 0:l.message)!=null?c:null;return o&&(n.current={threadId:t,message:o}),o}function EO(t){const e=_.useRef(null);return Ve(t,n=>g3e(t,n,e),{disablePerfDetector:!0})}function h3e(t){var n;const e=EO(t);return((n=e==null?void 0:e.metadata)==null?void 0:n.n7jupd_local_safe_mode)===!0}const TO=118;function KKe(t){var l,c,d,u,f,m;const e=ft(t),n=(l=he.getCurrentNode(e))==null?void 0:l.message;if(!n||!MO(n)||(c=n.clientMetadata)!=null&&c.autoProceedCancelled||(d=n.metadata)!=null&&d.auto_proceed_cancelled)return!1;const s=Date.now(),o=((u=n.create_time)!=null?u:Date.now()/1e3)*1e3,a=(m=(f=n.metadata)==null?void 0:f.auto_proceed_timeout_seconds)!=null?m:TO;return Math.max(0,Math.ceil(a-(s-o)/1e3))>0}function MO(t){var e;return!!((e=t.metadata)!=null&&e.n7jupd_message&&t.channel==="commentary"&&t.end_turn===!0)}async function QKe(t){const e=At(t);if(e)return Ze(t,n=>{dn.updateTree(n,(s,o)=>{s.updateNodeMetadata(o,{autoProceedCancelled:!0})})}),await ge.safePost("/conversation/{conversation_id}/agent/cancel_auto_proceed",{parameters:{path:{conversation_id:e}}})}function _3e(t,e,n){const[s,o]=_.useState(()=>Date.now());_.useEffect(()=>{if(!n)return;const d=setInterval(()=>o(Date.now()),250);return()=>clearInterval(d)},[n]);const a=e-(s-t)/1e3,i=Math.max(0,a),l=Math.ceil(i),c=e===0?1:Math.min(1,Math.max(0,1-i/e));return{secondsDisplay:l,progress:c}}const x3e=({lastMessage:t,clientThreadId:e})=>{var p,g,h;const n=V(),s=yt(n,e),o=_.useRef(((p=t.create_time)!=null?p:Date.now()/1e3)*1e3),a=(h=(g=t.metadata)==null?void 0:g.auto_proceed_timeout_seconds)!=null?h:TO,{initialTimeLeft:i}=_.useMemo(()=>{const x=Date.now(),v=o.current,y=Math.ceil(a-(x-v)/1e3),b=(a-y)/a;return{initialTimeLeft:y,initialProgress:b}},[a]),[l,c]=_.useState(!1),{selectedSources:d}=La(s.id),{secondsDisplay:u,progress:f}=_3e(o.current,a,l||i>0);_.useEffect(()=>{if(i<=0){c(!0);return}const x=setTimeout(()=>c(!0),i*1e3);return()=>clearTimeout(x)},[i]);const m=async()=>{c(!0),await Ko({conversation:s,eventSource:"mouse",promptMessage:ls("Continue",w({system_hints:[hs]},d&&{selected_sources:xi(d)})),parentMessageId:t.id,completionMetadata:{systemHints:[hs],conversationMode:{kind:wt.PrimaryAssistant}}})};return i<-30?null:r.jsx("div",{className:"my-2 flex",children:r.jsxs(_e,{onClick:m,disabled:l,className:"relative min-w-32 overflow-hidden px-2 transition-all",contentWrapperClassName:"gap-2",children:[r.jsx("span",{className:"flex items-center gap-1",children:l?r.jsx(j,{id:"clarification.loading",defaultMessage:"Proceeding..."}):r.jsx(j,{id:"clarification.modelContinueMessage",defaultMessage:"Continue"})}),!l&&r.jsx(y3e,{secondsDisplay:u,progress:f})]})})};function y3e({secondsDisplay:t,progress:e,size:n=22,strokeWidth:s=2}){const o=(n-s)/2,a=2*Math.PI*o,i=a*(1-e),l=ne();return r.jsxs("div",{"aria-label":l.formatMessage({id:"clarification.secondsRemaining",defaultMessage:"{seconds} seconds remaining"},{seconds:t.toString()}),className:"relative inline-flex items-center justify-center",style:{width:n,height:n},children:[r.jsxs("svg",{width:n,height:n,className:"block",children:[r.jsx("circle",{cx:n/2,cy:n/2,r:o,stroke:"currentColor",strokeOpacity:.3,strokeWidth:s,fill:"none"}),r.jsx("circle",{cx:n/2,cy:n/2,r:o,stroke:"currentColor",strokeWidth:s,fill:"none",strokeDasharray:a,strokeDashoffset:i,style:{transition:"stroke-dashoffset 100ms linear"},transform:"rotate(-90 ".concat(n/2," ").concat(n/2,")")})]}),r.jsx("span",{className:"absolute text-[9px] leading-none font-medium",style:{fontVariantNumeric:"tabular-nums"},children:t})]})}const v3e=R(()=>P(()=>import("./leo4qb1u05uqhrab.js"),__vite__mapDeps([312,1])),{loading:t=>O(t)}),AO=R(()=>P(()=>import("./g4luqq3g92oxbbim.js"),__vite__mapDeps([247,1])),{loading:t=>O(t)}),iy=be({heading:{id:"odyssey.openTabs.heading",defaultMessage:"Relevant tabs"},safeModeTooltip:{id:"odyssey.openTabs.safeModeTooltip",defaultMessage:"This tab is in logged out mode"}});function ww(t){"use forget";const e=G.c(19),{tabs:n,clientThreadId:s,className:o,onTabClick:a,detailed:i,isSafeMode:l}=t,c=l===void 0?!1:l,d=ne();let u;e[0]!==d||e[1]!==c?(u=c?d.formatMessage(iy.safeModeTooltip):void 0,e[0]=d,e[1]=c,e[2]=u):u=e[2];const f=u;if(!n||n.length===0)return null;let m;e[3]!==o?(m=W("flex flex-col",o),e[3]=o,e[4]=m):m=e[4];let p;if(e[5]!==s||e[6]!==i||e[7]!==a||e[8]!==f||e[9]!==n){let h;e[11]!==s||e[12]!==i||e[13]!==a||e[14]!==f?(h=(x,v)=>{var y;return r.jsx("div",{className:W(v>0&&"border-token-border-subtle border-t"),children:r.jsx("button",{type:"button",onClick:()=>{a?a(x):S3e(x,s)},className:"hover:bg-token-bg-secondary focus-visible:ring-token-text-tertiary w-full cursor-pointer p-3 text-start transition-colors focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:outline-hidden",children:i?r.jsx(C3e,{tab:x,safeModeLabel:f}):r.jsx(b3e,{tab:x,safeModeLabel:f})})},(y=x.id)!=null?y:"".concat(x.url,"-").concat(v))},e[11]=s,e[12]=i,e[13]=a,e[14]=f,e[15]=h):h=e[15],p=n.map(h),e[5]=s,e[6]=i,e[7]=a,e[8]=f,e[9]=n,e[10]=p}else p=e[10];let g;return e[16]!==m||e[17]!==p?(g=r.jsx("div",{className:m,children:p}),e[16]=m,e[17]=p,e[18]=g):g=e[18],g}const b3e=t=>{"use forget";var v,y,b;const e=G.c(25),{tab:n,safeModeLabel:s}=t;let o;e[0]!==n.url?(o=Yd(n.url),e[0]=n.url,e[1]=o):o=e[1];const a=o,i=(v=a==null?void 0:a.Icon)!=null?v:null;let l;e[2]!==n.title||e[3]!==n.url?(l=((y=n.title)==null?void 0:y.trim())||Gg(n.url),e[2]=n.title,e[3]=n.url,e[4]=l):l=e[4];const c=l;let d;e[5]!==(a==null?void 0:a.type)||e[6]!==n.url?(d=(b=a==null?void 0:a.type)!=null?b:Gg(n.url),e[5]=a==null?void 0:a.type,e[6]=n.url,e[7]=d):d=e[7];const u=d;let f;e[8]!==i||e[9]!==(a==null?void 0:a.type)||e[10]!==n.url?(f=i?r.jsx(i,{className:"icon-md",alt:a==null?void 0:a.type}):r.jsx(ks,{url:n.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:r.jsx(AO,{className:"size-5"})}),e[8]=i,e[9]=a==null?void 0:a.type,e[10]=n.url,e[11]=f):f=e[11];let m;e[12]!==c?(m=r.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=m):m=e[13];let p;e[14]!==u?(p=r.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:u}),e[14]=u,e[15]=p):p=e[15];let g;e[16]!==m||e[17]!==p?(g=r.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[m,p]}),e[16]=m,e[17]=p,e[18]=g):g=e[18];let h;e[19]!==s?(h=s?r.jsx(IO,{label:s}):null,e[19]=s,e[20]=h):h=e[20];let x;return e[21]!==f||e[22]!==g||e[23]!==h?(x=r.jsxs("div",{className:"flex items-center gap-3",children:[f,g,h]}),e[21]=f,e[22]=g,e[23]=h,e[24]=x):x=e[24],x},C3e=t=>{"use forget";var v,y,b;const e=G.c(25),{tab:n,safeModeLabel:s}=t;let o;e[0]!==n.url?(o=Yd(n.url),e[0]=n.url,e[1]=o):o=e[1];const a=o,i=(v=a==null?void 0:a.Icon)!=null?v:null;let l;e[2]!==n.title||e[3]!==n.url?(l=((y=n.title)==null?void 0:y.trim())||Gg(n.url),e[2]=n.title,e[3]=n.url,e[4]=l):l=e[4];const c=l;let d;e[5]!==(a==null?void 0:a.type)||e[6]!==n.url?(d=(b=a==null?void 0:a.type)!=null?b:Gg(n.url),e[5]=a==null?void 0:a.type,e[6]=n.url,e[7]=d):d=e[7];const u=d;let f;e[8]!==i||e[9]!==(a==null?void 0:a.type)||e[10]!==n.url?(f=i?r.jsx(i,{className:"icon-md",alt:a==null?void 0:a.type}):r.jsx(ks,{url:n.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:r.jsx(AO,{className:"size-5"})}),e[8]=i,e[9]=a==null?void 0:a.type,e[10]=n.url,e[11]=f):f=e[11];let m;e[12]!==c?(m=r.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=m):m=e[13];let p;e[14]!==u?(p=r.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:u}),e[14]=u,e[15]=p):p=e[15];let g;e[16]!==m||e[17]!==p?(g=r.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[m,p]}),e[16]=m,e[17]=p,e[18]=g):g=e[18];let h;e[19]!==s?(h=s?r.jsx(IO,{label:s}):null,e[19]=s,e[20]=h):h=e[20];let x;return e[21]!==f||e[22]!==g||e[23]!==h?(x=r.jsxs("div",{className:"flex items-center gap-3 px-3",children:[f,g,h]}),e[21]=f,e[22]=g,e[23]=h,e[24]=x):x=e[24],x},IO=t=>{"use forget";const e=G.c(6),{label:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(v3e,{className:"icon-sm","aria-hidden":"true"}),e[0]=s):s=e[0];let o;e[1]!==n?(o=r.jsx("span",{className:"text-token-text-tertiary inline-flex items-center justify-center",role:"img","aria-label":n,children:s}),e[1]=n,e[2]=o):o=e[2];let a;return e[3]!==n||e[4]!==o?(a=r.jsx(_t,{label:n,side:"top",className:"ms-auto inline-flex items-center justify-center",children:o}),e[3]=n,e[4]=o,e[5]=a):a=e[5],a};function S3e(t,e){if(t!=null&&t.url){try{const n=At(e);if(n){const s=Nd();s==null||s.openAgentTabs(n,[t.url]);return}}catch(n){Js.error("openTabs via host failed",{error:n})}try{const n=window.open(t.url,"_blank","noopener,noreferrer");n==null||n.focus()}catch(n){Js.error("openTabs fallback failed",{error:n})}}}function Gg(t){try{return new URL(t).hostname.replace(/^www\./,"")}catch(e){return t}}const w3e=R(()=>P(()=>import("./lruzrvi33w9z4jw7.js"),__vite__mapDeps([313,1,10,11])).then(t=>t.OdysseyTakeoverNuxModal)),k3e=()=>{"use no forget";const t=V(),e=dt(Fe.hasSeenOdysseyTakeoverModal),{clientThreadId:n}=Vn(),s=Ve(n!=null?n:void 0,l=>he.findNode(l,c=>c.message.author.name==="n7jupd.metadata"));if(!n)return()=>{Js.info("VNC modal opened without a client thread id")};const o=async l=>{const c=At(l);if(c)return await ge.safePost("/conversation/{conversation_id}/agent/resume",{parameters:{path:{conversation_id:c}}})},a=()=>{var c,d;if(!yn()||!((c=s==null?void 0:s.message.metadata)!=null&&c.kaur1br5_mode))return Promise.resolve(!1);const l=At(n);if(!l)return Js.info("Agent viewer opened without a server thread id"),Promise.resolve(!1);try{const u=Nd(),f=(d=u==null?void 0:u.tryOpenAgentViewer(l))!=null?d:!1;return Promise.resolve(f)}catch(u){return Js.error("Failed to open local agent viewer - error thrown"),Promise.resolve(!1)}},i=async()=>{var c;if(await a()){Js.info("Opened VNC modal with local agent viewer");return}Vn.setState({isResuming:!0}),Vn.setState({isOpen:!0}),On.setSidebarOpen(!1);let l;Re.addAction("agent.conversation.resume_rpc_attempted",{client_thread_id:n});try{l=await o(n),l?Re.addAction("agent.conversation.resume_rpc_succeeded",{client_thread_id:n,vm_id:(c=l.vm_id)!=null?c:""}):Re.addAction("agent.conversation.resume_rpc_failed",{client_thread_id:n,reason:"no_response"})}catch(d){Re.addAction("agent.conversation.resume_rpc_failed",{client_thread_id:n,reason:"exception",error:d})}Vn.setState({isResuming:!1,vmId:l==null?void 0:l.vm_id}),jO({})};return async()=>{if(e.eligible){lt(t,w3e,{onConfirm:async()=>{st(t,Fe.hasSeenOdysseyTakeoverModal),await i()}});return}await i()}},E3e=async(t,e,{startNewTurn:n})=>{Vn.setState({isOpen:!1}),await NO(t,e,{startNewTurn:n})},jO=async({showPlaceholderMessage:t=!1})=>{var s;Vn.setState({isTakeoverInProgress:!0});const{clientThreadId:e}=Vn.getState();if(!e){Js.info("VNC takeover started without a client thread id");return}t&&aee(e);const n=await T3e();Vn.setState({parentMessageId:(s=n==null?void 0:n.last_message_id)!=null?s:null})},NO=async(t,e,{startNewTurn:n,skipTakeoverAfterAbort:s=void 0},o)=>{Vn.setState({isTakeoverInProgress:!1});const{clientThreadId:a}=Vn.getState();if(!a){Js.info("VNC modal closed without a client thread id");return}if(!n)return;const i=M3e(),{abortPromise:l}=Vn.getState();l&&s&&(await l,await s())||(oI(a),await Ko({conversation:yt(t,a),eventSource:"mouse",promptMessage:Qv(e,o),parentMessageIdPromise:i,completionMetadata:{systemHints:[hs],conversationMode:{kind:wt.PrimaryAssistant}}}))},T3e=()=>{const{clientThreadId:t}=Vn.getState();if(!t)return Js.info("stopAgent called without a client thread id"),Promise.resolve(void 0);const e=Zh(t,void 0,{clientInitiated:!0,reason:"takeover",isLastTurnAgent:!0}).then(n=>n).finally(()=>{Vn.setState({abortPromise:null})});return Vn.setState({abortPromise:e}),e},M3e=(t=5e3)=>new Promise(e=>{const{parentMessageId:n}=Vn.getState();if(n)return e(n);const s=setTimeout(()=>{o(),e(void 0)},t),o=Vn.subscribe(a=>{a.parentMessageId&&(e(a.parentMessageId),clearTimeout(s),o())})}),A3e=()=>{"use forget";const t=G.c(5),e=k3e();let n;t[0]!==e?(n=l=>({token:l.token,clientThreadId:l.clientThreadId,isOpen:l.isOpen,isTakeoverInProgress:l.isTakeoverInProgress,isResuming:l.isResuming,vmId:l.vmId,open:e,close:E3e}),t[0]=e,t[1]=n):n=t[1];const s=Vn(n),a=!Yh();let i;return t[2]!==a||t[3]!==s?(i=U(w({},s),{isVNCEnabled:a}),t[2]=a,t[3]=s,t[4]=i):i=t[4],i},I3e=R(()=>P(()=>import("./kyaj1drcq8ani22w.js"),__vite__mapDeps([314,1])),{loading:t=>O(t)}),JKe=t=>{"use forget";var S,k,E,T;const e=G.c(33),{currentGroupedMessage:n,isLastMessage:s,isLastTurnInConversation:o,conversation:a,turnIndex:i,lastAgentMetadataNode:l}=t,c=!!((S=l==null?void 0:l.metadata)!=null&&S.kaur1br5_mode);let d,u;e[0]!==(n==null?void 0:n.messages)||e[1]!==o?(d=So(n==null?void 0:n.messages),u=o&&d&&MO(d)&&!((k=d.metadata)!=null&&k.auto_proceed_cancelled)&&!((E=d.clientMetadata)!=null&&E.autoProceedCancelled),e[0]=n==null?void 0:n.messages,e[1]=o,e[2]=d,e[3]=u):(d=e[2],u=e[3]);const f=u;let m;e:{if(!((T=d==null?void 0:d.metadata)!=null&&T.open_tabs)){let A;e[4]===Symbol.for("react.memo_cache_sentinel")?(A=[],e[4]=A):A=e[4],m=A;break e}let M;e[5]!==d.metadata.open_tabs?(M=d.metadata.open_tabs.filter(R3e),e[5]=d.metadata.open_tabs,e[6]=M):M=e[6],m=M}let p;e[7]!==m?(p=m.filter(L3e),e[7]=m,e[8]=p):p=e[8];const g=p,h=g.length>0&&c;let x;e[9]!==a||e[10]!==d||e[11]!==g||e[12]!==h?(x=h&&(d==null?void 0:d.id)&&r.jsx(j3e,{openTabList:g,clientThreadId:a.id,messageId:d.id}),e[9]=a,e[10]=d,e[11]=g,e[12]=h,e[13]=x):x=e[13];let v;e[14]!==a||e[15]!==d||e[16]!==f||e[17]!==i?(v=f&&r.jsx(x3e,{clientThreadId:a.id,lastMessage:d,turnIndex:i}),e[14]=a,e[15]=d,e[16]=f,e[17]=i,e[18]=v):v=e[18];let y;e[19]!==s||e[20]!==o?(y=o&&s&&r.jsx(Bb,{children:O3e}),e[19]=s,e[20]=o,e[21]=y):y=e[21];let b;e[22]!==a||e[23]!==n||e[24]!==c||e[25]!==s||e[26]!==o?(b=r.jsx(N3e,{conversation:a,currentGroupedMessage:n,isLastMessage:s,isLastTurnInConversation:o,isKAUR1BR5:c}),e[22]=a,e[23]=n,e[24]=c,e[25]=s,e[26]=o,e[27]=b):b=e[27];let C;return e[28]!==x||e[29]!==v||e[30]!==y||e[31]!==b?(C=r.jsxs("div",{className:"my-2 flex flex-col",children:[x,v,y,b]}),e[28]=x,e[29]=v,e[30]=y,e[31]=b,e[32]=C):C=e[32],C};function j3e(t){"use forget";const e=G.c(30),{openTabList:n,clientThreadId:s,messageId:o}=t,[a,i]=_.useState(!1),{openThreadSidebar:l}=Ar(),c=jn(hn),d=h3e(s);let u;e[0]!==n?(u=n.slice(0,3),e[0]=n,e[1]=u):u=e[1];const f=u,m=n.length>1&&n.length!==f.length;let p;e[2]!==c||e[3]!==o||e[4]!==n||e[5]!==l?(p=()=>{if(c){i(!0);return}l({type:"n7jupdTabs",messageId:o,tabs:n})},e[2]=c,e[3]=o,e[4]=n,e[5]=l,e[6]=p):p=e[6];const g=p;let h;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("div",{className:"flex items-center py-0.5",children:r.jsx(j,w({},iy.heading))}),e[7]=h):h=e[7];let x;e[8]!==g||e[9]!==n.length||e[10]!==m?(x=m&&r.jsxs(_e,{onClick:g,color:"ghost",className:"text-token-text-secondary rounded-lg font-normal",contentWrapperClassName:"gap-1",children:[r.jsx(j,{id:"BrbWdy",defaultMessage:"View {count} tabs",values:{count:n.length}}),r.jsx(I3e,{className:"icon-sm"})]}),e[8]=g,e[9]=n.length,e[10]=m,e[11]=x):x=e[11];let v;e[12]!==x?(v=r.jsxs("div",{className:"text-token-text-primary flex items-center justify-between px-3 py-2 text-sm font-medium",children:[h,x]}),e[12]=x,e[13]=v):v=e[13];let y;e[14]!==s||e[15]!==d||e[16]!==f?(y=r.jsx(ww,{tabs:f,clientThreadId:s,className:"border-token-border-subtle flex flex-col border-t",isSafeMode:d}),e[14]=s,e[15]=d,e[16]=f,e[17]=y):y=e[17];let b;e[18]!==v||e[19]!==y?(b=r.jsxs("div",{className:"border-token-border-subtle bg-token-bg-secondary/30 text-token-text-primary w-full max-w-[360px] overflow-hidden rounded-2xl border",children:[v,y]}),e[18]=v,e[19]=y,e[20]=b):b=e[20];let C;e[21]!==s||e[22]!==c||e[23]!==a||e[24]!==d||e[25]!==n?(C=c&&r.jsx(Mt,{headerClassName:"ps-6! pe-5!",isOpen:a,showCloseButton:!0,onClose:()=>i(!1),testId:"modal-odyssey-open-tabs",title:r.jsx("div",{className:"flex w-full items-center text-[15px] font-medium",children:r.jsx(j,w({},iy.heading))}),noPadding:!0,children:r.jsx(ww,{tabs:n,clientThreadId:s,className:"border-token-border-subtle flex flex-col border-t",isSafeMode:d,detailed:!0})}),e[21]=s,e[22]=c,e[23]=a,e[24]=d,e[25]=n,e[26]=C):C=e[26];let S;return e[27]!==b||e[28]!==C?(S=r.jsxs(r.Fragment,{children:[b,C]}),e[27]=b,e[28]=C,e[29]=S):S=e[29],S}const N3e=t=>{"use forget";var T;const e=G.c(16),{conversation:n,currentGroupedMessage:s,isLastMessage:o,isLastTurnInConversation:a,isKAUR1BR5:i}=t,{formatMessage:l}=ne(),{open:c,isVNCEnabled:d}=A3e(),{selectedSources:u}=La(n.id),f=V(),m=ye(f,"733205176");let p;e:{if(!d){p=null;break e}if(!m){p=null;break e}if(!o||!a){p=null;break e}if(s.type!==rr.Text){p=null;break e}p=s.messages[0]}const g=p;if(!g)return null;const h=(T=g.metadata)==null?void 0:T.n7jupd_button_type;if(!h||h==="confirmation"||(h==="takeover"||h==="login")&&i)return null;let x;e[0]!==n||e[1]!==g.id||e[2]!==u?(x=async()=>{await Ko({conversation:n,eventSource:"mouse",promptMessage:ls("Yes, please proceed",w({system_hints:[hs]},u&&{selected_sources:xi(u)})),parentMessageId:g.id,completionMetadata:{systemHints:[hs],conversationMode:{kind:wt.PrimaryAssistant}}})},e[0]=n,e[1]=g.id,e[2]=u,e[3]=x):x=e[3];const v=x;let y;e[4]!==c||e[5]!==v?(y=M=>{switch(M){case"takeover":return c();case"login":return c();case"confirmation":return v()}},e[4]=c,e[5]=v,e[6]=y):y=e[6];const b=y;let C;e[7]!==b||e[8]!==h?(C=()=>b(h),e[7]=b,e[8]=h,e[9]=C):C=e[9];const S=P3e[h];let k;e[10]!==l||e[11]!==S?(k=l(S),e[10]=l,e[11]=S,e[12]=k):k=e[12];let E;return e[13]!==C||e[14]!==k?(E=r.jsx("div",{className:"my-2 flex",children:r.jsx(_e,{onClick:C,children:k})}),e[13]=C,e[14]=k,e[15]=E):E=e[15],E},P3e=be({takeover:{id:"odyssey-message-indicator.takeover",defaultMessage:"Take over"},login:{id:"odyssey-message-indicator.login",defaultMessage:"Log in"},confirmation:{id:"odyssey-message-indicator.confirm",defaultMessage:"Confirm"}});function R3e(t){return t.url==="about:blank"?!1:!(t.url==="https://openai.com/"&&!t.selected)}function L3e(t){var n;const e=(n=t.url)==null?void 0:n.trim().toLowerCase();return e&&e!=="about:blank"&&e!==""}function O3e(t){const{isScheduled:e,isScheduledRun:n}=t;return e&&!n&&r.jsx(nde,{})}function D3e(s){var o=s,{onChange:t,target:e}=o,n=ke(o,["onChange","target"]);if(!e)return;const a=w({childList:!0,subtree:!0},n),i=new MutationObserver(c=>{t(c)});function l(){try{i.disconnect()}catch(c){}}return i.observe(e,a),l}const F3e=()=>{};function B3e(t){return _.useCallback(e=>t?e(console.log.bind(console)):F3e,[t])}const U3e=".markdown:is(.streaming-animation,.result-streaming)",XKe=_.memo(function(e){const{debug:n,isStreaming:s}=e,o=_.useRef(-1),a=B3e(n),i=_.useRef(null),[l,c]=_.useState([]),d=_.useCallback(m=>{const p=m.dataset.start,g=m.tagName.toLowerCase(),h="--streaming-".concat(g,"-").concat(p),v={height:0,ready:!1,selector:"".concat(g,'[data-start="').concat(p,'"]'),target:m,variableName:h},y=zl({axis:"height",target:m,onChange({height:b}){var T;const C=m.dataset.end,S=m.dataset.isLastNode==="",k=["table","pre"].includes(g)&&S;if(a(M=>M("".concat(g,"-").concat(p),{observedElement:v,height:b,canLookAhead:k,isLastNode:S})),!v.ready){const M=k&&$3e(p,C,15),A=b>0;(M||A)&&(v.ready=!0,o.current=G3e(C))}const E=typeof v.height=="number"&&b<v.height;v.ready&&!E&&(v.height=b,(T=i.current)==null||T.style.setProperty(h,"".concat(b,"px")))}});v.unsubscribe=y,c(b=>[...b,v])},[a]),u=_.useCallback(m=>D3e({onChange(p){const{added:g}=H3e(p);for(const h of g)d(h)},target:m,subtree:!0,childList:!0}),[d]);_.useEffect(()=>{if(!s)return;let m;function p(h){i.current=h,m=u(h)}function g(h){const x=document.querySelector(U3e);x?h(x):requestAnimationFrame(()=>{g(h)})}return g(p),()=>{window.setTimeout(()=>{if(n){a(h=>h("Animations complete, preserving state in debug mode."));return}m==null||m(),c([]),o.current=-1},500)}},[s,n,u,a]);const f=l.map(({selector:m,variableName:p})=>"".concat(m," { --streaming-reveal-amount: var(").concat(p,", 0) }")).join("\n");return r.jsx("style",{children:f})});function $3e(t,e,n){if(t===void 0||e===void 0)return!0;const s=parseInt(t,10),o=parseInt(e,10);return isNaN(s)||isNaN(o)?!0:o-s>=n}function V3e(t){return t instanceof HTMLElement?["PRE","TABLE"].includes(t.tagName):!1}function H3e(t){return{added:t.flatMap(n=>Array.from(n.addedNodes)).filter(V3e)}}function G3e(t){return t?parseInt(t,10):-1}function W3e(t){"use forget";const e=G.c(7),[n,s]=_.useState(null),o=jt();let a,i;e[0]!==t.assetPointer||e[1]!==t.serverThreadId||e[2]!==o?(a=()=>{t.assetPointer&&Qd.fetch(o,{asset:t.assetPointer,conversationId:t.serverThreadId}).then(c=>{s(c.url)})},i=[o,t.assetPointer,t.serverThreadId],e[0]=t.assetPointer,e[1]=t.serverThreadId,e[2]=o,e[3]=a,e[4]=i):(a=e[3],i=e[4]),_.useEffect(a,i);let l;return e[5]!==n?(l=n?r.jsx("video",{controls:!0,src:n,className:"w-full"}):null,e[5]=n,e[6]=l):l=e[6],l}function eQe(t){"use forget";var f,m;const e=G.c(5),{message:n,isUserTurn:s,clientThreadId:o}=t,a=uee(n),i=Qn(o);if(a.length===0||!s)return null;const l=(m=(f=a[0].metadata)==null?void 0:f.transcription)==null?void 0:m.text,c=W("mt-2 text-sm italic",{"opacity-65":l,"opacity-30":!l});let d;e[0]!==l?(d=l!=null?l:r.jsx(j,w({},z3e.transcriptUnavailable)),e[0]=l,e[1]=d):d=e[1];let u;return e[2]!==c||e[3]!==d?(u=r.jsx("div",{className:c,children:d}),e[2]=c,e[3]=d,e[4]=u):u=e[4],r.jsxs("div",{className:"flex max-w-[400px] flex-col justify-end self-end",children:[r.jsx(W3e,{assetPointer:a[0],serverThreadId:i}),u]})}const z3e=be({transcriptUnavailable:{id:"textMessage.transcriptUnavailable",defaultMessage:"Transcript Unavailable"}});function q3e(t){const e=Math.floor(t/60),n=Math.floor(e/60),s=String(Math.floor(t)%60).padStart(2,"0"),o=String(e%60).padStart(2,"0");return n===0?"".concat(o,":").concat(s):"".concat(n,":").concat(o,":").concat(s)}const Y3e=R(()=>P(()=>import("./go05rbhvvh9nvyl2.js"),__vite__mapDeps([315,1])),{loading:t=>O(t)}),Z3e=R(()=>P(()=>Promise.resolve().then(()=>PTe),void 0),{loading:t=>O(t)});function K3e(t){var n;const e=(n=t==null?void 0:t.audio_asset_pointer)==null?void 0:n.metadata;if((e==null?void 0:e.start)!==void 0&&(e==null?void 0:e.end)!==void 0)return e.end-e.start}const tQe=_.memo(function(e){const n=ne(),{content:s,metadata:o}=e.message;if(!(s.content_type==="multimodal_text"&&e.isUserTurn))return;const i=s.parts.filter(pr.isPartRealTimeUserAudioVideoAssetPointer).find(c=>c.audio_asset_pointer),l=K3e(i);return r.jsxs("div",{className:"text-token-text-secondary my-2 me-4 flex flex-row justify-end gap-1 text-xs",children:[(o==null?void 0:o.real_time_audio_has_video)&&r.jsx(Y3e,{"aria-label":n.formatMessage({id:"/nS9Zn",defaultMessage:"Recorded with video or screenshare"}),className:"icon-sm"}),i&&r.jsx(Z3e,{"aria-label":n.formatMessage({id:"eP1JEa",defaultMessage:"Recorded with voice"}),className:"icon-sm"}),l!==void 0&&r.jsx("span",{className:"font-semibold",children:q3e(l)})]})});function F1(){"use forget";var d,u,f,m,p,g,h;const t=G.c(8),{data:e}=wh(),n=PO(),s=(d=e==null?void 0:e.settings)==null?void 0:d[Lt.VoiceName];let o;t[0]!==n||t[1]!==s?(o=LO(s,n),t[0]=n,t[1]=s,t[2]=o):o=t[2];const a=(f=(u=e==null?void 0:e.settings)==null?void 0:u[Lt.VoiceMainLanguage])!=null?f:Eu.Auto,i=!!((m=e==null?void 0:e.settings)!=null&&m[Lt.TrainingAllowed]&&((p=e==null?void 0:e.settings)!=null&&p[Lt.VoiceTrainingAllowed])),l=!!((g=e==null?void 0:e.settings)!=null&&g[Lt.TrainingAllowed]&&((h=e==null?void 0:e.settings)!=null&&h[Lt.VideoTrainingAllowed]));let c;return t[3]!==o||t[4]!==a||t[5]!==i||t[6]!==l?(c={voiceName:o,voiceMainLanguage:a,voiceTrainingAllowed:i,videoTrainingAllowed:l},t[3]=o,t[4]=a,t[5]=i,t[6]=l,t[7]=c):c=t[7],c}function PO(){const t=RO(),e=q3().locale;return _.useCallback(()=>{if(t.length===0)return"juniper";let n=t[0].voice;return e.startsWith("zh")&&(n="cove"),n},[t,e])}function RO(){var n;const t=(n=to(Lt.VoiceMainLanguage))==null?void 0:n.data,{data:e}=rt({queryKey:["getUserSettingVoices",t],queryFn:()=>ge.safeGet("/settings/voices",{authOption:nn.SendIfAvailable})});return e?e.voices:[]}function LO(t,e){return t==="sky"?"juniper":t!=null?t:e()}function C5(){if(typeof window<"u"&&"MediaSource"in window){const t=e=>qG(e)&&MediaSource.isTypeSupported(e);if(t("audio/aac"))return"aac";if(t("audio/mpeg"))return"mp3";if(t("audio/ogg"))return"opus"}}function Wg(t){if(t.buffer instanceof ArrayBuffer)return t;const e=new Uint8Array(t.byteLength);return e.set(t),e}function Q3e({conversationId:t,messageId:e}){const{voiceName:n}=F1(),s=()=>ge.safeGet("/synthesize",{parameters:{query:{message_id:e,conversation_id:t,voice:n,format:C5()}},skipJsonTransform:!0}),o="".concat(t,".").concat(e,".").concat(n);return J3e(s,o)}function J3e(t,e){var p;const[n,s]=_.useState(!1),o=_.useRef({isMediaSourceAvailable:S5(),mediaSourceFormat:(p=C5())!=null?p:"n/a",playPromise:null,shouldAbortQueuedPlayback:!1}).current,a=ne(),i=Ut(),l=Y3(),c=Z3(g=>{var h;return g.isPlaying&&g.sourceUrl===((h=uo.get(e))==null?void 0:h.src)}),d=_.useCallback(async()=>{if(!l||!t)return;s(!0);const g={isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat};try{const h=await X3e({key:e,onStreamingError:x=>{Bt.readAloud.error(x,g),s(!1),i.danger(a.formatMessage(pp.playbackError,{error:x.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:pp.playbackError.defaultMessage,loggingDescription:x.message})},onStreamingStart:()=>{s(!1)},fetchAudioDataResponse:t});if(o.shouldAbortQueuedPlayback){o.shouldAbortQueuedPlayback=!1;return}l.changeSource(h),o.playPromise=l.play()}catch(h){Bt.readAloud.error(h,g),s(!1),i.danger(a.formatMessage(pp.playbackError,{error:h.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:pp.playbackError.defaultMessage,loggingDescription:h.message})}},[l,o,e,i,a,t]),u=_.useCallback(()=>{const g=lx();g&&(o.playPromise?o.playPromise.then(()=>{g.stop(),o.playPromise=null}):g.stop())},[o]),f=_.useCallback(()=>{var h;const g=lx();g&&(g.state.isPlaying&&g.state.sourceUrl===((h=uo.get(e))==null?void 0:h.src)?u():(Bt.readAloud.click({isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat}),d()))},[e,o,d,u]);_.useEffect(()=>{n&&c&&s(!1)},[n,c]);const m=_.useRef(e);return _.useEffect(()=>{m.current=e}),_.useEffect(()=>(o.shouldAbortQueuedPlayback=!1,()=>{var x;const g=I8();g.isPlaying&&g.sourceUrl===((x=uo.get(m.current))==null?void 0:x.src)?u():o.shouldAbortQueuedPlayback=!0}),[o,u]),{togglePlayback:f,isPlaying:c,isLoading:n}}async function OO(t){var s;const e=await t(),n=(s=e.headers.get("content-type"))!=null?s:"audio/aac";return{response:e,format:n}}async function X3e(t){return S5()?tve(t):eve(t)}async function eve({key:t,fetchAudioDataResponse:e}){const n=uo.get(t);if(n!=null&&n.blob)return n.src;const{response:s,format:o}=await OO(e),a=await s.arrayBuffer(),i=new Blob([a],{type:o}),l=DO({key:t,src:URL.createObjectURL(i),format:o,blob:i});return uo.set(t,l),l.src}async function tve({key:t,onStreamingError:e,onStreamingStart:n,fetchAudioDataResponse:s}){let o=uo.get(t);o!=null&&o.streaming&&(uo.delete(t),o=null);let a,i;const l=sve(),c=new l;if(o)a=o,a.src=URL.createObjectURL(c);else{const{format:f,response:m}=await OO(s);i=m,a=DO({key:t,src:URL.createObjectURL(c),format:f})}const d=nve(a.id),u={sourceopen:async()=>{var p,g;d("sourceopen");const f=c.addSourceBuffer(a.format),m=async()=>{f.updating&&await new Promise(h=>f.addEventListener("updateend",h,{once:!0}))};if(a.segments.length&&!a.streaming){d("streaming from cache"),a.streaming=!0,n();for(const h of a.segments)f.appendBuffer(Wg(h)),await m();c.readyState==="open"&&c.endOfStream(),a.streaming=!1,d("done streaming from cache");return}if(i){d("fetching audio");try{const h=(p=i.body)==null?void 0:p.getReader();if(!h)return;for(;((g=uo.get(t))==null?void 0:g.id)===a.id;){const{done:x,value:v}=await h.read();if(x){d("done streaming"),a.streaming=!1,c.readyState==="open"&&c.endOfStream();break}if(!v)continue;if(!Array.from(c.sourceBuffers).includes(f)){d("stop streaming, source buffer removed"),a.streaming=!1;break}a.streaming||(d("start streaming"),a.streaming=!0,n());const y=Wg(v);f.appendBuffer(y),a.segments.push(y),await m()}}catch(h){if(d("error while streaming",h),a.streaming=!1,c.readyState==="open")try{c.endOfStream("network")}catch(x){Bt.readAloud.error(x)}uo.delete(t),e(h)}}},sourceclose:()=>{var f;d("sourceclose"),a.streaming&&(a.streaming=!1,((f=uo.get(t))==null?void 0:f.id)===a.id&&(d("sourceclosed while streaming, cleaning up cache"),uo.delete(t)))},sourceended:rs};for(const[f,m]of Object.entries(u))c.addEventListener(f,()=>{try{return m()}catch(p){Bt.readAloud.error(p)}});return uo.set(t,a),a.src}const pp=be({playbackError:{id:"useVoiceReadAloudAudio.playbackError",defaultMessage:"Failed to play message"}}),nve=t=>rs;function sve(){return S5()?window.MediaSource:null}function S5(){return!!C5()}const DO=t=>w({id:as(),segments:[],streaming:!1},t),uo=new oxe({capacity:50,dispose:t=>{URL.revokeObjectURL(t.src)}});R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)});R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)});const vm=Dt(t=>({targetedContent:void 0,setTargetedContent:e=>{t({targetedContent:e})}})),ove=t=>{"use forget";const e=G.c(3),n=_.useRef(void 0);let s,o;return e[0]!==t?(s=()=>{n.current=t},o=[t],e[0]=t,e[1]=s,e[2]=o):(s=e[1],o=e[2]),_.useEffect(s,o),n};function kw(){return" "}const ave=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M11.6663 12.6686L11.801 12.6823C12.1038 12.7445 12.3313 13.0125 12.3313 13.3337C12.3311 13.6547 12.1038 13.9229 11.801 13.985L11.6663 13.9987H3.33325C2.96609 13.9987 2.66839 13.7008 2.66821 13.3337C2.66821 12.9664 2.96598 12.6686 3.33325 12.6686H11.6663ZM16.6663 6.00163L16.801 6.0153C17.1038 6.07747 17.3313 6.34546 17.3313 6.66667C17.3313 6.98788 17.1038 7.25586 16.801 7.31803L16.6663 7.33171H3.33325C2.96598 7.33171 2.66821 7.03394 2.66821 6.66667C2.66821 6.2994 2.96598 6.00163 3.33325 6.00163H16.6663Z"})),nQe=Object.freeze(Object.defineProperty({__proto__:null,default:ave},Symbol.toStringTag,{value:"Module"})),FO=R(()=>P(()=>import("./kq4racjejm0744me.js"),__vite__mapDeps([316,1,10,11,317,225,226,227,117,228,106,318,319,0])).then(t=>t.AdminInviteModal)),BO=Object.freeze(Object.defineProperty({__proto__:null,AdminInviteModal:FO},Symbol.toStringTag,{value:"Module"})),UO="DEFAULT",rve=sn(()=>Be(UO)),ss={recentPulse:["recent-pulse"],pulseCard:t=>["pulse-card",t],pulseEntrypoint:["pulse-entrypoint"]};function $O(t,e){t.setQueryData(ss.pulseCard(e.id),e)}function sQe(t,e,n){t.setQueryData(ss.pulseCard(e),s=>U(w({},s),{conversation_id:n})),t.setQueryData(ss.recentPulse,s=>{const o=s.items.map(a=>qf(a)&&a.id===e?U(w({},a),{conversation_id:n}):a);return U(w({},s),{items:o})})}const w5=t=>Object.keys(t).length===0,ive=YG((t,e)=>ka(t,()=>es({queryKey:["pulse-feed",e],queryFn:async()=>{const n=await ge.safeGet("/feed/mixed/{feed_variant_id}",{parameters:{path:{feed_variant_id:e}}});return w5(n)?null:(n.items.filter(qf).forEach(s=>{$O(Jo(t),s)}),n)}}),{enabled$:()=>t1(t)})),VO=sn(t=>ka(t,()=>es({queryKey:ss.recentPulse,queryFn:async()=>{const e=await ge.safeGet("/feed/mixed");return w5(e)?null:(e.items.filter(qf).forEach(n=>{$O(Jo(t),n)}),e)}}),{enabled$:()=>t1(t)})),lve=t=>{VO.prefetch(t)},bm=sn(t=>St(()=>{const e=rve(t);return e&&e!==UO?ive(t,e):VO(t)})),k5=sn(t=>ka(t,()=>es({queryKey:ss.pulseEntrypoint,queryFn:async()=>{const e=await ge.safeGet("/feed/entrypoint");return w5(e)?null:e}}),{enabled$:()=>DQ(t)})),oQe=sn(t=>St(()=>{var e,n;return(n=(e=bm(t).data)==null?void 0:e.feedback)==null?void 0:n.feedback_conversation_id})),aQe=Wn(t=>ZG(t,{mutationFn:async()=>await ge.safePost("/feed/feedback/conversation/delete"),onSuccess:()=>{Jo(t).invalidateQueries({queryKey:ss.recentPulse})}})),HO=t=>{"use forget";const e=G.c(11),n=V();let s;e[0]!==t?(s=ss.pulseCard(t),e[0]=t,e[1]=s):s=e[1];let o;e[2]!==t?(o=async()=>{if(!t)throw new Error("Card ID is required");return await ge.safeGet("/feed/card/{card_id}",{parameters:{path:{card_id:t}}})},e[2]=t,e[3]=o):o=e[3];let a;e[4]!==t||e[5]!==n?(a=Bv(n)&&!!t,e[4]=t,e[5]=n,e[6]=a):a=e[6];let i;return e[7]!==s||e[8]!==o||e[9]!==a?(i={queryKey:s,queryFn:o,enabled:a},e[7]=s,e[8]=o,e[9]=a,e[10]=i):i=e[10],rt(i)},cve=t=>{"use forget";const e=G.c(12),n=jt();let s;e[0]!==t?(s=async c=>c==="remove"?await ge.safeDelete("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}}}):await ge.safePost("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}},requestBody:{emoji:c}}),e[0]=t,e[1]=s):s=e[1];let o,a,i;e[2]!==t||e[3]!==n?(o=async c=>{await n.cancelQueries({queryKey:ss.pulseCard(t)});const d=n.getQueryData(ss.pulseCard(t));return d&&n.setQueryData(ss.pulseCard(t),U(w({},d),{reaction:c})),{previousCard:d}},a=(c,d,u)=>{u!=null&&u.previousCard&&n.setQueryData(ss.pulseCard(t),u.previousCard)},i=(c,d,u)=>{const{emoji:f}=c,{previousCard:m}=u;n.setQueryData(ss.pulseCard(t),U(w({},m),{reaction:f}))},e[2]=t,e[3]=n,e[4]=o,e[5]=a,e[6]=i):(o=e[4],a=e[5],i=e[6]);let l;return e[7]!==s||e[8]!==o||e[9]!==a||e[10]!==i?(l={mutationFn:s,onMutate:o,onError:a,onSuccess:i},e[7]=s,e[8]=o,e[9]=a,e[10]=i,e[11]=l):l=e[11],zt(l)},dve=t=>{"use forget";const e=G.c(12),n=jt();let s;e[0]!==t?(s=async c=>c==="save"?await ge.safePut("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}):await ge.safeDelete("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}),e[0]=t,e[1]=s):s=e[1];let o,a,i;e[2]!==t||e[3]!==n?(o=async c=>{await n.cancelQueries({queryKey:ss.pulseCard(t)});const d=n.getQueryData(ss.pulseCard(t));return d&&n.setQueryData(ss.pulseCard(t),U(w({},d),{is_saved:c==="save"})),{previousCard:d}},a=(c,d,u)=>{u!=null&&u.previousCard&&n.setQueryData(ss.pulseCard(t),u.previousCard)},i=(c,d,u)=>{const{saved:f}=c,{previousCard:m}=u;n.setQueryData(ss.pulseCard(t),U(w({},m),{is_saved:f}))},e[2]=t,e[3]=n,e[4]=o,e[5]=a,e[6]=i):(o=e[4],a=e[5],i=e[6]);let l;return e[7]!==s||e[8]!==o||e[9]!==a||e[10]!==i?(l={mutationFn:s,onMutate:o,onError:a,onSuccess:i},e[7]=s,e[8]=o,e[9]=a,e[10]=i,e[11]=l):l=e[11],zt(l)},rQe=(t,e)=>{"use forget";const n=G.c(3);let s;return n[0]!==t||n[1]!==e?(s={mutationFn:async()=>await ge.safePost("/feed/interactions",{requestBody:{events:[{type:"proactive_connectors_declined",connector_ids:t,item_id:e,timestamp:new Date().toISOString()}]}})},n[0]=t,n[1]=e,n[2]=s):s=n[2],zt(s)},Fs=Wn(t=>{let e;return Ea(()=>{var n,s,o,a;return(a=(o=(n=k5(t).data)==null?void 0:n.id)!=null?o:(s=bm(t).data)==null?void 0:s.id)!=null?a:void 0},n=>{e=n},{fireImmediately:!0}),{logEventWithStatsig:(n,s,o)=>{const a=e?U(w({},o),{feed_id:e}):o;B.logEventWithStatsig(n,s,a)}}});var al=(t=>(t.FeedbackOnCard="pulse-feedback-on-card",t.FeedbackConversation="pulse-feedback-conversation",t.FeedbackPreview="pulse-feedback-preview",t))(al||{});const GO={type:"pulse-feedback-preview"},WO={activeCardId:null};class uve{constructor(){Q(this,"autoSendCompletion");Q(this,"shouldAutoSendCompletion$",Be(!1));Q(this,"populatePrompt$",Be(void 0));Q(this,"isFeedbackModalOpen$",Be(!1));Q(this,"feedbackModalState$",Be(GO));Q(this,"isCardModalOpen$",Be(!1));Q(this,"cardModalState$",Be(WO))}}const Oa=Wn(()=>new uve),zO=sn(t=>St(()=>{var n;const{data:e}=bm(t);return((n=e==null?void 0:e.items)!=null?n:[]).filter(qf)})),iQe=sn(t=>St(()=>{const e=Oa(t).cardModalState$().activeCardId;if(e)return zO(t).find(n=>n.id===e)}));var E5=(t=>(t.Sidebar="sidebar",t.Chat="chat",t.Url="url",t))(E5||{});const qO=sn(()=>Be(void 0)),fve=a=>{var i=a,{label:t,first:e,children:n,className:s}=i,o=ke(i,["label","first","children","className"]);const l=_.useId();return r.jsxs("aside",U(w({className:W(e?"pt-(--sidebar-section-first-margin-top)":"pt-(--sidebar-section-margin-top)","last:mb-5",s),"aria-labelledby":t?l:void 0},o),{children:[t&&r.jsx(YO,{id:l,children:t}),n]}))},YO=t=>r.jsx(QG,w({as:"h2"},t)),Io=t=>r.jsx(KG,U(w({fillContainer:!0},t),{onClick:ZO(t)})),T5=t=>r.jsx(K3,U(w({as:"div",fillContainer:!0},t),{onClick:ZO(t)}));function ZO(t){return e=>{var n;(n=t.onClick)==null||n.call(t,e),!e.defaultPrevented&&e.currentTarget.contains(e.target)&&On.setPopoverSidebarOpen(!1)}}const mve=R(()=>P(()=>import("./ny3gbedhp9u7gx6v.js"),__vite__mapDeps([320,1])),{loading:t=>O(t)});function pve(t){"use forget";const e=G.c(4),{iconOnly:n}=t,s=V();let o;if(e[0]!==s?(o=()=>t1(s),e[0]=s,e[1]=o):o=e[1],!ae(o))return null;let i;return e[2]!==n?(i=r.jsx(gve,{iconOnly:n}),e[2]=n,e[3]=i):i=e[3],i}function gve(t){"use forget";const e=G.c(13),{iconOnly:n}=t,s=ne(),o=UQ(),a=V();let i;e[0]!==s?(i=s.formatMessage({id:"zEGHd1",defaultMessage:"Pulse"}),e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=Bh("/pulse"),e[2]=c):c=e[2];let d;e[3]!==a?(d=()=>{Fs(a).logEventWithStatsig("(Web) Feed Opened From Sidebar","chatgpt_web_fyp_feed_opened_from_sidebar"),qO.set(a,E5.Sidebar)},e[3]=a,e[4]=d):d=e[4];let u;e[5]!==n||e[6]!==l?(u=n?{iconOnly:!0,iconAriaLabel:l}:{},e[5]=n,e[6]=l,e[7]=u):u=e[7];let f;return e[8]!==o||e[9]!==l||e[10]!==d||e[11]!==u?(f=r.jsx(Io,w({"data-testid":"sidebar-item-pulse",icon:mve,to:c,onClick:d,label:l,active:o},u)),e[8]=o,e[9]=l,e[10]=d,e[11]=u,e[12]=f):f=e[12],f}const M5=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M9.38759 8.53403C10.0712 8.43795 10.7036 8.91485 10.7997 9.59849C10.8956 10.2819 10.4195 10.9133 9.73622 11.0096C9.05259 11.1057 8.4202 10.6298 8.32411 9.94614C8.22804 9.26258 8.70407 8.63022 9.38759 8.53403Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3886 5.58677C10.8476 5.5681 11.2608 5.5975 11.6581 5.74204L11.8895 5.83677C12.4185 6.07813 12.8721 6.46152 13.1991 6.94614L13.2831 7.07993C13.4673 7.39617 13.5758 7.74677 13.6571 8.14048C13.7484 8.58274 13.8154 9.13563 13.8993 9.81919L14.245 12.6317L14.3554 13.5624C14.3852 13.8423 14.4067 14.0936 14.4159 14.3192C14.4322 14.7209 14.4118 15.0879 14.3095 15.4393L14.2606 15.5887C14.0606 16.138 13.7126 16.6202 13.2577 16.9823L13.0565 17.1297C12.7061 17.366 12.312 17.4948 11.8622 17.5877C11.6411 17.6334 11.3919 17.673 11.1132 17.7118L10.1835 17.8299L7.37098 18.1756C6.68748 18.2596 6.13466 18.3282 5.68348 18.3465C5.28176 18.3628 4.9148 18.3424 4.56337 18.2401L4.41395 18.1913C3.86454 17.9912 3.38258 17.6432 3.0204 17.1883L2.87294 16.9872C2.63655 16.6367 2.50788 16.2427 2.41493 15.7928C2.36926 15.5717 2.32964 15.3226 2.29091 15.0438L2.17274 14.1141L1.82704 11.3016C1.74311 10.6181 1.67455 10.0653 1.65614 9.61411C1.63747 9.15518 1.66697 8.74175 1.81141 8.34458L1.90614 8.11313C2.14741 7.58441 2.53115 7.13051 3.01552 6.80356L3.1493 6.71958C3.46543 6.53545 3.8163 6.42688 4.20985 6.34556C4.65206 6.25423 5.20506 6.18729 5.88856 6.10337L8.70106 5.75767L9.63173 5.64731C9.91161 5.61744 10.163 5.59597 10.3886 5.58677ZM6.75673 13.0594C6.39143 12.978 6.00943 13.0106 5.66298 13.1522C5.5038 13.2173 5.32863 13.3345 5.06923 13.5829C4.80403 13.8368 4.49151 14.1871 4.04091 14.6932L3.64833 15.1327C3.67072 15.2763 3.69325 15.4061 3.71766 15.5243C3.79389 15.893 3.87637 16.0961 3.97548 16.243L4.06141 16.3602C4.27134 16.6237 4.5507 16.8253 4.86903 16.9413L5.00477 16.9813C5.1536 17.0148 5.34659 17.0289 5.6288 17.0174C6.01317 17.0018 6.50346 16.9419 7.20888 16.8553L10.0214 16.5106L10.9306 16.3944C11.0173 16.3824 11.0997 16.3693 11.1776 16.3573L8.61513 14.3065C8.08582 13.8831 7.71807 13.5905 7.41395 13.3846C7.19112 13.2338 7.02727 13.1469 6.88856 13.0975L6.75673 13.0594ZM10.4432 6.91587C10.2511 6.9237 10.0319 6.94288 9.77333 6.97056L8.86317 7.07798L6.05067 7.42271C5.34527 7.50932 4.85514 7.57047 4.47841 7.64829C4.20174 7.70549 4.01803 7.76626 3.88173 7.83481L3.75966 7.9061C3.47871 8.09575 3.25597 8.35913 3.1161 8.66587L3.06141 8.79966C3.00092 8.96619 2.96997 9.18338 2.98524 9.55942C3.00091 9.94382 3.06074 10.4341 3.14735 11.1395L3.42274 13.3895L3.64442 13.1434C3.82631 12.9454 3.99306 12.7715 4.1493 12.6219C4.46768 12.3171 4.78299 12.0748 5.16005 11.9208L5.38661 11.8377C5.92148 11.6655 6.49448 11.6387 7.04579 11.7616L7.19325 11.7987C7.53151 11.897 7.8399 12.067 8.15907 12.2831C8.51737 12.5256 8.9325 12.8582 9.4452 13.2684L12.5966 15.7889C12.7786 15.6032 12.9206 15.3806 13.0106 15.1336L13.0507 14.9979C13.0842 14.8491 13.0982 14.6561 13.0868 14.3739C13.079 14.1817 13.0598 13.9625 13.0321 13.704L12.9247 12.7938L12.58 9.9813C12.4933 9.27584 12.4322 8.78581 12.3544 8.40903C12.2972 8.13219 12.2364 7.94873 12.1679 7.81235L12.0966 7.69028C11.9069 7.40908 11.6437 7.18669 11.3368 7.04673L11.203 6.99204C11.0364 6.93147 10.8195 6.90059 10.4432 6.91587Z"}),_.createElement("path",{d:"M9.72841 1.5897C10.1797 1.60809 10.7322 1.67665 11.4159 1.7606L14.2284 2.1063L15.1581 2.22446C15.4371 2.26322 15.6859 2.3028 15.9071 2.34849C16.3571 2.44144 16.7509 2.57006 17.1015 2.80649L17.3026 2.95396C17.7576 3.31618 18.1055 3.79802 18.3056 4.34751L18.3544 4.49692C18.4567 4.84845 18.4772 5.21519 18.4608 5.61704C18.4516 5.84273 18.4292 6.09381 18.3993 6.37388L18.2899 7.30454L17.9442 10.117C17.8603 10.8007 17.7934 11.3535 17.702 11.7958C17.6207 12.1895 17.5122 12.5401 17.328 12.8563L17.244 12.9901C17.0958 13.2098 16.921 13.4086 16.7255 13.5829L16.6171 13.662C16.3496 13.8174 16.0009 13.769 15.787 13.5292C15.5427 13.255 15.5666 12.834 15.8407 12.5897L16.0018 12.4276C16.0519 12.3703 16.0986 12.3095 16.1415 12.2459L16.2128 12.1239C16.2813 11.9875 16.3421 11.8041 16.3993 11.5272C16.4771 11.1504 16.5383 10.6605 16.6249 9.95493L16.9696 7.14243L17.077 6.23228C17.1047 5.97357 17.1239 5.7546 17.1317 5.56235C17.1432 5.27997 17.1291 5.08722 17.0956 4.93833L17.0556 4.80259C16.9396 4.4842 16.7381 4.20493 16.4745 3.99497L16.3573 3.90903C16.2103 3.80991 16.0075 3.72745 15.6386 3.65122C15.4502 3.61231 15.2331 3.57756 14.9755 3.54185L14.0663 3.42563L11.2538 3.08091C10.5481 2.99426 10.0582 2.93444 9.67372 2.9188C9.39129 2.90732 9.19861 2.92142 9.0497 2.95493L8.91395 2.99497C8.59536 3.11093 8.31538 3.31224 8.10536 3.57603L8.0204 3.69321C7.95293 3.79324 7.89287 3.91951 7.83778 4.10532L7.787 4.23032C7.64153 4.50308 7.31955 4.64552 7.01161 4.55454C6.65948 4.45019 6.45804 4.07952 6.56239 3.72739L6.63075 3.52036C6.70469 3.31761 6.79738 3.12769 6.91786 2.94907L7.06532 2.7479C7.42756 2.29294 7.90937 1.94497 8.45888 1.74497L8.60829 1.69614C8.95981 1.59385 9.32655 1.57335 9.72841 1.5897Z"})),Cm=Object.freeze(Object.defineProperty({__proto__:null,default:M5},Symbol.toStringTag,{value:"Module"})),Sm=t=>{_.useEffect(t,[])};function Ew(){return{finished:Promise.resolve(),ready:Promise.resolve(),skipTransition:()=>{},types:new Set,updateCallbackDone:Promise.resolve()}}function hve(){return"ViewTransitionTypeSet"in document}function KO({forceFlushSync:t,update:e,className:n,types:s}){var o,a;if(typeof document<"u"&&document.visibilityState==="hidden")return t?or.flushSync(e):e(),Ew();if("startViewTransition"in document){let i;const l=hve();s&&document.documentElement.setAttribute("active-view-transition-type",s.join(","));const c=["active-view-transition"];n&&(Array.isArray(n)?c.push(...n):c.push(n)),document.documentElement.classList.add(...c),l?i=document.startViewTransition({update:()=>{if(document.documentElement.classList.add("update-callback-done"),t)or.flushSync(e);else return e()},types:s}):i=document.startViewTransition(()=>{if(document.documentElement.classList.add("update-callback-done"),t)or.flushSync(e);else return e()});let d=!1;const u=()=>{d||(d=!0,document.documentElement.classList.remove(...c,"update-callback-done"),document.documentElement.removeAttribute("active-view-transition-type"))};return(o=i.finished)==null||o.then(async()=>{await lf.yield(),u()}).catch(f=>{u()}),(a=i.ready)==null||a.catch(f=>{u()}),i}else{const i=Ew();return setTimeout(()=>{e()},0),i}}const _ve={type:"unsupported",value:void 0};const xve={home:{from:{type:"landing-page",className:"back-animation"}},"landing-page":{from:{type:"home",className:"use-case-animation"},to:{type:"home",className:"back-animation"}},conversation:{},unsupported:{},library:{from:{type:"home",className:"use-case-animation"},to:{type:"home",className:"back-animation"}}},zr=class zr{constructor(){Q(this,"activeViewTransition",null);Q(this,"classNames",[]);Q(this,"storage",new ly);Q(this,"currentPage",null);Q(this,"previousPage",null);Q(this,"waitForReadyPromise",null);Q(this,"waitForReadyResolve",null)}static getPageToPageConfig({to:e,from:n}){if(!xve[e.type]||e.type===(n==null?void 0:n.type))return null;const o=[];return n&&(o.push("from-".concat(n.type)),n.value&&o.push("from-value-".concat(n.value))),o.push("to-".concat(e.type)),e.value&&o.push("to-value-".concat(e.value)),o}addStaticClass(e){if(!e)return;const n=Array.isArray(e)?e:[e];n.forEach(s=>{zr.persistedClassNames.add(s)}),document.documentElement.classList.add(...n)}static getPageType(e){let n;for(const s of e)if(s.id==="routes/_conversation.$landingType"){const o=s.data;o!=null&&o.type&&(n={type:o.page,value:o.type})}else s.id==="routes/_conversation"?n={type:"home",value:void 0}:s.id==="routes/_conversation.c.$conversationId"?n={type:"conversation",value:void 0}:s.id==="routes/trending"&&(n={type:"trending",value:void 0});return n!=null?n:_ve}loadPageTransition(e){const n=zr.getPageType(e);this.previousPage=this.currentPage,this.currentPage=n}loadPageTransitionFromStorage(){const e=this.storage.getEntry();e&&(this.addClassToCurrentTransition(e.classNames),this.signalTransitionReady())}transitionToPage(e,n){const s=zr.getPageToPageConfig({to:e,from:this.currentPage});this.classNames=[],this.addClassToCurrentTransition(s);const o=this.storage.createEntry({from:this.currentPage,to:e,classNames:s});this.storage.saveEntry(o),this.startTransition({classNames:s,waitForReady:!0,update:n})}addClassToCurrentTransition(e){e&&(this.classNames.push(...Array.isArray(e)?e:[e]),this.syncClassNames())}syncClassNames(){const e=Array.from(document.documentElement.classList).filter(n=>!this.classNames.includes(n)&&!zr.persistedClassNames.has(n)&&(n.startsWith("from-")||n.startsWith("to-")));document.documentElement.classList.remove(...e),document.documentElement.classList.add(...this.classNames)}signalTransitionReady(){var e;this.waitForReadyPromise&&((e=this.waitForReadyResolve)==null||e.call(this))}waitForTransitionReady(){return this.waitForReadyPromise}static timeout(e,n){return new Promise(s=>{setTimeout(()=>{n.aborted||Re.addError(new Error("Unexpected view transition timeout")),s()},e)})}startTransition({classNames:e,forceFlushSync:n,staticClassNames:s,types:o,update:a,waitForReady:i=!1}){this.addStaticClass(s),i&&(this.waitForReadyPromise=new Promise(d=>{this.waitForReadyResolve=d}));const c=KO({update:i?async()=>{await a();const d=new AbortController;await Promise.race([this.waitForTransitionReady(),zr.timeout(1500,d.signal)]),d.abort(),await new Promise(u=>setTimeout(u,60))}:a,className:e,forceFlushSync:n,types:o});return this.activeViewTransition=c,c}};Q(zr,"persistedClassNames",new Set);let zg=zr;const Ju=class Ju{getEntry(){const e=sessionStorage.getItem(Ju.key);return e?JSON.parse(e):null}saveEntry(e){sessionStorage.setItem(Ju.key,JSON.stringify(e))}createEntry({from:e,to:n,classNames:s}){return n.type==="home"?{version:1,classNames:s!=null?s:[],from:e==null?void 0:e.type,to:n.type,selector:"[data-type='unified-composer']",wait:!1}:n.type==="landing-page"?{version:1,from:e==null?void 0:e.type,to:n.type,classNames:s!=null?s:[],selector:"[data-landing-page-load-target]",wait:!0}:{version:1,from:e==null?void 0:e.type,to:n.type,classNames:s!=null?s:[],wait:!1}}};Q(Ju,"key","view-transition-session-storage");let ly=Ju;const yve=Wn(()=>new zg);function vve(t){return yve(t)}function bve(){const t=V(),e=Y$(),n=zg.getPageType(e),s=vve(t);return Sm(()=>{s.loadPageTransition(e)}),_.useEffect(()=>{s.loadPageTransitionFromStorage()},[n.type,s]),{pageType:n}}function Cve(){return{library:Pe.PictureV2,images:Pe.PictureV2,research:Pe.Research,write:Pe.Canvas}}const Sve=Cve();Object.fromEntries(Object.entries(Sve).map(([t,e])=>[e,t]));function wve(t,e){return"/".concat(e)}const lQe=Z$(function(){return null}),kve=t=>{"use forget";const e=G.c(18),{iconOnly:n}=t,s=ne(),{pageType:o}=bve(),a=Qb();let i;e[0]!==s?(i=s.formatMessage({id:"E56n+Q",defaultMessage:"Library"}),e[0]=s,e[1]=i):i=e[1];const l=i;let c,d;if(e[2]===Symbol.for("react.memo_cache_sentinel")){c=null;try{typeof window<"u"&&(c=window.localStorage.getItem("chatgpt_library_last_tab"))}catch(C){c=null}d=wve(Pe.PictureV2,"library"),e[2]=c,e[3]=d}else c=e[2],d=e[3];const u=d;let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=()=>u,e[4]=f):f=e[4];const[m,p]=_.useState(f);let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{p(Bh(c?"".concat(u,"?tab=").concat(encodeURIComponent(c)):u).toString())},e[5]=g):g=e[5];let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=[c,u],e[6]=h):h=e[6],_.useEffect(g,h);let x;e[7]!==a?(x=()=>{B.logEventWithStatsig("chatgpt_web_image_library_sidebar_item_clicked","chatgpt_web_image_library_sidebar_item_clicked",{location:a})},e[7]=a,e[8]=x):x=e[8];const v=o.type==="library";let y;e[9]!==n||e[10]!==l?(y=n?{iconOnly:!0,iconAriaLabel:l}:{},e[9]=n,e[10]=l,e[11]=y):y=e[11];let b;return e[12]!==l||e[13]!==x||e[14]!==v||e[15]!==y||e[16]!==m?(b=r.jsx(Io,w({"data-testid":"sidebar-item-library",onClick:x,active:v,icon:M5,to:m,label:l},y)),e[12]=l,e[13]=x,e[14]=v,e[15]=y,e[16]=m,e[17]=b):b=e[17],b},QO="/archived";function Eve(){"use forget";return uh(QO)!=null}const JO=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M11.8008 10.1816C12.1035 10.2438 12.3309 10.5119 12.3311 10.833C12.3311 11.1542 12.1036 11.4222 11.8008 11.4844L11.666 11.498H8.33301C7.96589 11.4979 7.66797 11.2002 7.66797 10.833C7.66814 10.466 7.966 10.1682 8.33301 10.168H11.666L11.8008 10.1816Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.417 2.66797C16.7045 2.66815 17.7489 3.71251 17.749 5V5.83301C17.749 6.33171 17.59 6.79271 17.3232 7.17188C17.3263 7.19763 17.3311 7.22343 17.3311 7.25V12.667C17.3311 13.3559 17.3317 13.9131 17.2949 14.3633C17.2622 14.7639 17.197 15.1246 17.0527 15.4609L16.9863 15.6035C16.7209 16.1245 16.3169 16.5602 15.8213 16.8643L15.6035 16.9863C15.2268 17.1782 14.8202 17.2575 14.3623 17.2949C13.9121 17.3317 13.3549 17.332 12.666 17.332H7.33301C6.64407 17.332 6.08689 17.3317 5.63672 17.2949C5.23627 17.2622 4.87521 17.1979 4.53906 17.0537L4.39648 16.9863C3.8754 16.7208 3.43882 16.3171 3.13477 15.8213L3.0127 15.6035C2.82089 15.227 2.74153 14.821 2.7041 14.3633C2.66732 13.9131 2.66797 13.3559 2.66797 12.667V7.25C2.66797 7.22312 2.67268 7.19694 2.67578 7.1709C2.4096 6.79197 2.25195 6.33115 2.25195 5.83301V5C2.25212 3.7124 3.29634 2.66797 4.58398 2.66797H15.417ZM16.001 8.08789C15.8141 8.13621 15.619 8.16501 15.417 8.16504H4.58398C4.38146 8.16504 4.18541 8.13644 3.99805 8.08789V12.667C3.99805 13.3778 3.99895 13.8714 4.03027 14.2549C4.06097 14.6303 4.11779 14.8421 4.19824 15L4.26855 15.126C4.44482 15.4134 4.69792 15.6478 5 15.8018L5.12988 15.8574C5.27361 15.9089 5.4633 15.9467 5.74512 15.9697C6.12858 16.0011 6.62215 16.002 7.33301 16.002H12.666C13.3767 16.002 13.8705 16.001 14.2539 15.9697C14.6292 15.9391 14.8411 15.8821 14.999 15.8018L15.126 15.7305C15.4132 15.5542 15.6479 15.3019 15.8018 15L15.8574 14.8691C15.9088 14.7255 15.9467 14.5363 15.9697 14.2549C16.0011 13.8714 16.001 13.3779 16.001 12.667V8.08789ZM4.58398 3.99805C4.03088 3.99805 3.5822 4.44693 3.58203 5V5.83301C3.58203 6.38621 4.03078 6.83496 4.58398 6.83496H15.417C15.97 6.83478 16.4189 6.3861 16.4189 5.83301V5C16.4188 4.44705 15.9699 3.99823 15.417 3.99805H4.58398Z"})),Tve=Object.freeze(Object.defineProperty({__proto__:null,default:JO},Symbol.toStringTag,{value:"Module"}));function Mve(){"use forget";const t=G.c(6),e=ne(),n=Eve();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=Bh(QO),t[0]=s):s=t[0];let o;t[1]!==e?(o=e.formatMessage(Ave),t[1]=e,t[2]=o):o=t[2];let a;return t[3]!==n||t[4]!==o?(a=r.jsx(Io,{icon:JO,to:s,active:n,label:o}),t[3]=n,t[4]=o,t[5]=a):a=t[5],a}const Ave=Ge({id:"WvXi2t",defaultMessage:"Archived chats"}),XO=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.0857 8.74999C14.0857 5.80355 11.6972 3.41503 8.75073 3.41503C5.80429 3.41503 3.41577 5.80355 3.41577 8.74999C3.41577 11.6964 5.80429 14.085 8.75073 14.085C11.6972 14.085 14.0857 11.6964 14.0857 8.74999ZM15.4158 8.74999C15.4158 10.3539 14.848 11.8245 13.9041 12.9746L13.9705 13.0303L16.9705 16.0303L17.0564 16.1338C17.2269 16.3919 17.1977 16.7434 16.9705 16.9707C16.7432 17.1975 16.3925 17.226 16.1345 17.0557L16.03 16.9707L13.03 13.9707L12.9753 13.9033C11.8253 14.8472 10.3547 15.415 8.75073 15.415C5.06975 15.415 2.08569 12.431 2.08569 8.74999C2.08569 5.06901 5.06975 2.08495 8.75073 2.08495C12.4317 2.08495 15.4158 5.06901 15.4158 8.74999Z"})),eD=Object.freeze(Object.defineProperty({__proto__:null,default:XO},Symbol.toStringTag,{value:"Module"})),cQe=()=>{"use forget";const t=G.c(20),e=V();let n;t[0]!==e?(n=ye(e,"713974087"),t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==e?(o=gi(e)&&yn(),t[2]=e,t[3]=o):o=t[3];const a=o;let i,l,c,d,u,f,m,p;t[4]===Symbol.for("react.memo_cache_sentinel")?(i=W("tall:sticky tall:top-header-height tall:z-20 bg-token-bg-elevated-secondary relative","[--sticky-spacer:6px]"),l=r.jsx(Ive,{}),c=r.jsx(jve,{}),d=!1,u=!1,f=!1,m=r.jsx(pve,{}),p=r.jsx(kve,{}),t[4]=i,t[5]=l,t[6]=c,t[7]=d,t[8]=u,t[9]=f,t[10]=m,t[11]=p):(i=t[4],l=t[5],c=t[6],d=t[7],u=t[8],f=t[9],m=t[10],p=t[11]);let g;t[12]!==s?(g=!1,t[12]=s,t[13]=g):g=t[13];let h;t[14]!==a?(h=a&&r.jsx(Mve,{}),t[14]=a,t[15]=h):h=t[15];let x;t[16]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("div",{"aria-hidden":!0,className:W("pointer-events-none absolute start-0 end-0","-bottom-[var(--sticky-spacer)] h-[var(--sticky-spacer)]","opacity-0 will-change-[opacity] group-data-scrolled-from-top/scrollport:opacity-100","bg-token-bg-elevated-secondary")}),t[16]=x):x=t[16];let v;return t[17]!==g||t[18]!==h?(v=r.jsxs(fve,{first:!0,className:i,children:[l,c,d,u,f,m,p,g,h,x]}),t[17]=g,t[18]=h,t[19]=v):v=t[19],v},Ive=t=>{"use forget";const e=G.c(15),{iconOnly:n}=t,s=V(),o=ne(),a=Qb(),i=ae(Q3);let l;e[0]!==s||e[1]!==a?(l=h=>{B.logEvent("Sidebar Click Gizmo",{gizmo_id:"primary"}),VP(s,h,{location:a!=null?a:"Sidebar gizmo list"})},e[0]=s,e[1]=a,e[2]=l):l=e[2];const c=l;let d;e[3]!==o?(d=o.formatMessage({id:"6Abeg/",defaultMessage:"New chat"}),e[3]=o,e[4]=d):d=e[4];const u=d,f=w1();let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(f1,{binding:AP,className:"touch:hidden"}),e[5]=m):m=e[5];let p;e[6]!==n||e[7]!==u?(p=n?{iconOnly:!0,iconAriaLabel:u}:{},e[6]=n,e[7]=u,e[8]=p):p=e[8];let g;return e[9]!==i||e[10]!==c||e[11]!==u||e[12]!==f||e[13]!==p?(g=r.jsx(Io,w({"data-testid":"create-new-chat-button",to:"/",state:f,onClick:c,icon:SN,label:u,highlightTrailing:m,showHighlightTrailing:i},p)),e[9]=i,e[10]=c,e[11]=u,e[12]=f,e[13]=p,e[14]=g):g=e[14],g},jve=({iconOnly:t})=>{const e=V(),n=ne(),{isFannyPackEnabled:s}=$b(e),o=Qb(),a=ae(Q3),l=ae(()=>JG(e));if(_.useEffect(()=>{s&&(Re.addAction("fannypack.web.action_seen"),P(()=>import("./fbdmxe5ygbrc3wdb.js").then(d=>d.a),__vite__mapDeps([321,322,10,1,11])))},[s]),!s)return null;const c=n.formatMessage({id:"bDEsvT",defaultMessage:"Search chats"});return r.jsx(T5,w({onClick:d=>{l&&d.preventDefault(),P(()=>import("./fbdmxe5ygbrc3wdb.js").then(u=>u.a),__vite__mapDeps([321,322,10,1,11])).then(u=>u.openFannyPackSearch()),B.logEventWithStatsig("chatgpt_web_search_sidebar_item_clicked","chatgpt_web_search_sidebar_item_clicked",{location:o})},icon:XO,label:c,highlightTrailing:r.jsx("div",{className:"touch:hidden",children:r.jsx(f1,{binding:Tde})}),showHighlightTrailing:a},t?{iconOnly:!0,iconAriaLabel:c}:{}))},z0=R(()=>P(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([144,1])),{loading:t=>O(t)}),q0=R(()=>P(()=>Promise.resolve().then(()=>Nr),void 0),{loading:t=>O(t)}),tD="https://openai.com/policies/cookie-policy/",$i=be({essentialCookies:{id:"settingsModal.privacy.cookieConsent.essentialCookiesLabel",defaultMessage:"Strictly Necessary Cookies (always active)"},marketingCookies:{id:"settingsModal.privacy.cookieConsent.marketingCookiesLabel",defaultMessage:"Marketing Performance Cookies"},analyticsCookies:{id:"settingsModal.privacy.cookieConsent.analyticsCookiesLabel",defaultMessage:"Analytics Cookies"},cookieConsent:{id:"settingsModal.privacy.cookieConsent.header",defaultMessage:"Cookie Preference Center"}});function A5(t,e){const{isUserInPioneerHR:n,userCountry:s}=Ln(t);return(!(e!=null&&e.structure)||e.structure!==XG.WORKSPACE)&&AT(s)&&(n!=null?n:!1)}const ch=class ch extends wi()(()=>({isOpen:!1})){constructor(){super(...arguments);Q(this,"openModal",()=>this.setState(n=>U(w({},n),{isOpen:!0})));Q(this,"closeModal",()=>this.setState(n=>U(w({},n),{isOpen:!1})))}};Q(ch,"useIsOpen",()=>ch.useState(n=>n.isOpen));let br=ch;function dQe(){const t=ne(),e=jt(),n=V(),s=et(n),{data:o,isLoading:a}=rt(hi),i=br.useStore(),l=br.useIsOpen(),c=wr(),[d,u]=_.useState(!1),[f,m]=_.useState(!1),[p,g]=_.useState(!1),{mutate:h}=j8({onMutate:v=>{e.setQueryData(hi.queryKey,y=>y?U(w({},y),{consent_analytics:v.consent_analytics,consent_marketing:v.consent_marketing}):{consent_analytics:v.consent_analytics,consent_marketing:v.consent_marketing,is_consent_required:!0})},onSuccess:(v,y)=>{Re.addAction("cookie-consent.consent-modal.updated-cookie-consent-backend",{consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing}),B.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend",{consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing})},onError:(v,y)=>{B.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend Error","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend_error",{error:v.message,consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing})}}),x=A5(n,s)&&l;return _.useEffect(()=>{x&&B.logEventWithStatsig("Cookie Preferences Modal Shown","chatgpt_cookie_prefs_modal_shown")},[x]),r.jsx(Mt,{isOpen:x,testId:"modal-cookie-preferences",onClose:()=>{i.closeModal(),B.logEventWithStatsig("Cookie Preferences Modal Closed","chatgpt_cookie_prefs_modal_closed")},size:"custom",className:"h-[100%] md:max-h-[600px] md:min-h-[600px] md:max-w-[680px]",type:"success",showCloseButton:!0,title:t.formatMessage($i.cookieConsent),children:r.jsxs("div",{className:"flex max-h-[calc(100vh-150px)] w-full flex-col gap-3 overflow-y-auto md:min-h-[380px]",children:[r.jsx("p",{className:"text-token-text-secondary text-sm",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.description.v2",defaultMessage:"Using websites and apps involves storing and retrieving information from your device, including cookies and other identifiers, which can be shared with third parties, for various activities. We provide a simple tool below allowing you to tailor your choices as you deem fit. You can change your consent at any time. <learnMore>Learn more.</learnMore>",values:{learnMore:v=>r.jsx("a",{href:tD,target:"_blank",rel:"noreferrer",className:"underline",children:v})}})}),r.jsxs("div",{className:"mt-2 flex flex-col gap-3",children:[r.jsx(_a,{children:c?r.jsx(cl,{label:t.formatMessage($i.essentialCookies),disabled:!0,enabled:!0,onChange:()=>{},description:r.jsx("p",{children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dp,{id:"essential-cb",checked:!0,disabled:!0}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage($i.essentialCookies)}),r.jsx("button",{onClick:()=>u(!d),children:d?r.jsx(z0,{className:"icon-sm"}):r.jsx(q0,{className:"icon-sm"})})]}),d&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})]})]})}),r.jsx(_a,{children:c?r.jsx(cl,{label:t.formatMessage($i.analyticsCookies),enabled:!!(o!=null&&o.consent_analytics),disabled:a,onChange:v=>{var y;B.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:v}),h({consent_analytics:v,consent_marketing:(y=o==null?void 0:o.consent_marketing)!=null?y:!1})},description:r.jsx("p",{children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dp,{id:"analytics-cb",checked:!!(o!=null&&o.consent_analytics),disabled:a,onChange:v=>{var b;const y=v.target.checked;B.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:y}),h({consent_analytics:y,consent_marketing:(b=o==null?void 0:o.consent_marketing)!=null?b:!1})}}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage($i.analyticsCookies)}),r.jsx("button",{onClick:()=>m(!f),children:f?r.jsx(z0,{className:"icon-sm"}):r.jsx(q0,{className:"icon-sm"})})]}),f&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})]})]})}),r.jsx(_a,{children:c?r.jsx(cl,{label:t.formatMessage($i.marketingCookies),enabled:!!(o!=null&&o.consent_marketing),disabled:a,onChange:v=>{var y;B.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:v}),h({consent_marketing:v,consent_analytics:(y=o==null?void 0:o.consent_analytics)!=null?y:!1})},description:r.jsx("p",{children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dp,{id:"marketing-cb",checked:!!(o!=null&&o.consent_marketing),disabled:a,onChange:v=>{var b;const y=v.target.checked;B.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:y}),h({consent_marketing:y,consent_analytics:(b=o==null?void 0:o.consent_analytics)!=null?b:!1})}}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage($i.marketingCookies)}),r.jsx("button",{onClick:()=>g(!p),children:p?r.jsx(z0,{className:"icon-sm"}):r.jsx(q0,{className:"icon-sm"})})]}),p&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})]})]})})]})]})})}function Gc(t){"use forget";const e=G.c(7),{onClick:n,children:s}=t,o=V(),a=ze(o,"2118136551"),i=Mo(),l=a.get("show_cookie_banner_improvements",!1),c=l?"secondary":void 0,d=l?"text-sm":"bg-gray-950/5 text-sm text-black hover:bg-gray-800/10 dark:bg-gray-50/5 hover:dark:bg-gray-100/10",u=i?"medium":void 0,f=i?"secondary":c,m=i?"mb-2 sm:mb-3":d;let p;return e[0]!==s||e[1]!==i||e[2]!==n||e[3]!==u||e[4]!==f||e[5]!==m?(p=r.jsx(_e,{as:"button",size:u,color:f,fullWidth:i,className:m,onClick:n,children:s}),e[0]=s,e[1]=i,e[2]=n,e[3]=u,e[4]=f,e[5]=m,e[6]=p):p=e[6],p}function uQe(t){"use forget";const e=G.c(7),{useManuallyControlledVisibility:n,fixed:s}=t,o=n===void 0?!1:n,a=s===void 0?!1:s,{shouldShowCookieBanner:i,closeCookieConsentBanner:l,ignoreCookieConsentBanner:c}=eW(),{mutate:d}=j8(),u=o6.useOnCloseSideEffect(),f=o6.useManuallySetVisibility(),m=o?f:i;let p;return e[0]!==l||e[1]!==a||e[2]!==c||e[3]!==u||e[4]!==m||e[5]!==d?(p=m&&r.jsx(Nve,{fixed:a,onAccept:()=>{d({consent_analytics:!0,consent_marketing:!0}),l(),u(),B.logEventWithStatsig("Cookie Consent Banner Accepted","chatgpt_cookie_consent_banner_accepted")},onReject:()=>{d({consent_analytics:!1,consent_marketing:!1}),l(),u(),B.logEventWithStatsig("Cookie Consent Banner Rejected","chatgpt_cookie_consent_banner_rejected")},onIgnore:()=>{c(),u(),B.logEventWithStatsig("Cookie Consent Banner Ignored","chatgpt_cookie_consent_banner_ignored")}}),e[0]=l,e[1]=a,e[2]=c,e[3]=u,e[4]=m,e[5]=d,e[6]=p):p=e[6],p}function Nve(t){"use forget";const e=G.c(4),n=Mo();let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],e[0]=s):s=e[0],_.useEffect(Pve,s);let o;return e[1]!==n||e[2]!==t?(o=n?r.jsx(Ove,w({},t)):r.jsx(Lve,w({},t)),e[1]=n,e[2]=t,e[3]=o):o=e[3],o}function Pve(){B.logEventWithStatsig("Cookie Consent Banner Shown","chatgpt_cookie_consent_banner_shown")}function nD(){"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.title",defaultMessage:"We use cookies"}),t[0]=e):e=t[0],e}function cy(){"use forget";const t=G.c(2),e=br.useStore();let n;return t[0]!==e?(n=r.jsx(j,{id:"cookie-consent-banner.description.v2",defaultMessage:"We use cookies to help this site function, understand service usage, and support marketing efforts. Visit <manageCookiesLink>Manage Cookies</manageCookiesLink> to change preferences anytime. View our <cookiePolicyLink>Cookie Policy</cookiePolicyLink> for more info.",values:{cookiePolicyLink:Rve,manageCookiesLink:s=>r.jsx("a",{onClick:o=>{o.preventDefault(),e.openModal()},className:"cursor-pointer underline underline-offset-2",children:s},1)}}),t[0]=e,t[1]=n):n=t[1],n}function Rve(t){return r.jsx("a",{className:"underline underline-offset-2",href:tD,target:"_blank",rel:"noreferrer",children:t},0)}function sD(){"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.reject",defaultMessage:"Reject non-essential"}),t[0]=e):e=t[0],e}function oD(){"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.accept",defaultMessage:"Accept all"}),t[0]=e):e=t[0],e}function aD(){"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.manage-cookies",defaultMessage:"Manage Cookies"}),t[0]=e):e=t[0],e}function Lve(t){"use forget";const e=G.c(26),n=V(),s=ze(n,"2118136551"),o=br.useStore(),a=s.get("show_cookie_banner_improvements",!1),i=t.fixed&&"fixed inset-x-0 bottom-0";let l;e[0]!==i?(l=W("z-10 w-[100vw] max-w-[100vw] overflow-hidden",i),e[0]=i,e[1]=l):l=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("h1",{className:"text-base",children:r.jsx(nD,{})}),e[2]=c):c=e[2];let d;e[3]!==a?(d=r.jsxs("div",{className:"flex max-w-5xl flex-col gap-2 sm:flex-1",children:[c,r.jsx("p",{className:"text-sm",children:a?r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(cy,{})}):r.jsx("span",{className:"text-gray-600",children:r.jsx(cy,{})})})]}),e[3]=a,e[4]=d):d=e[4];let u;e[5]!==o?(u=()=>o.openModal(),e[5]=o,e[6]=u):u=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(aD,{}),e[7]=f):f=e[7];let m;e[8]!==u?(m=r.jsx(Gc,{onClick:u,children:f}),e[8]=u,e[9]=m):m=e[9];let p;e[10]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(sD,{}),e[10]=p):p=e[10];let g;e[11]!==t.onReject?(g=r.jsx(Gc,{onClick:t.onReject,children:p}),e[11]=t.onReject,e[12]=g):g=e[12];let h;e[13]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(oD,{}),e[13]=h):h=e[13];let x;e[14]!==t.onAccept?(x=r.jsx(Gc,{onClick:t.onAccept,children:h}),e[14]=t.onAccept,e[15]=x):x=e[15];let v;e[16]!==x||e[17]!==m||e[18]!==g?(v=r.jsxs("div",{className:"flex w-full flex-row justify-end gap-3 sm:w-auto sm:min-w-[300px]",children:[m,g,x]}),e[16]=x,e[17]=m,e[18]=g,e[19]=v):v=e[19];let y;e[20]!==v||e[21]!==d?(y=r.jsxs("div",{className:"bg-token-main-surface-tertiary flex w-full flex-col items-center justify-between gap-5 p-5 shadow-sm sm:flex-row sm:gap-0",children:[d,v]}),e[20]=v,e[21]=d,e[22]=y):y=e[22];let b;return e[23]!==l||e[24]!==y?(b=r.jsx("div",{className:l,children:y}),e[23]=l,e[24]=y,e[25]=b):b=e[25],b}function Ove(t){"use forget";var S;const e=G.c(24),n=V(),s=ze(n,"2118136551"),o=br.useStore(),a=s.get("show_cookie_banner_improvements",!1),i=Dve,l=a&&(S=t.onIgnore)!=null?S:i,c=!a;let d;e[0]!==t?(d=r.jsx("div",{className:"flex w-full justify-end",children:r.jsx(gn,{onClick:()=>{var k;return(k=t.onIgnore)==null?void 0:k.call(t)}})}),e[0]=t,e[1]=d):d=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("p",{className:"mb-2 text-center text-xl font-semibold",children:r.jsx(nD,{})}),e[2]=u):u=e[2];let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-sm",children:r.jsx(cy,{})}),e[3]=f):f=e[3];let m;e[4]!==o?(m=()=>o.openModal(),e[4]=o,e[5]=m):m=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(aD,{}),e[6]=p):p=e[6];let g;e[7]!==m?(g=r.jsx(Gc,{onClick:m,children:p}),e[7]=m,e[8]=g):g=e[8];let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(oD,{}),e[9]=h):h=e[9];let x;e[10]!==t.onAccept?(x=r.jsx(Gc,{onClick:t.onAccept,children:h}),e[10]=t.onAccept,e[11]=x):x=e[11];let v;e[12]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(sD,{}),e[12]=v):v=e[12];let y;e[13]!==t.onReject?(y=r.jsx(Gc,{onClick:t.onReject,children:v}),e[13]=t.onReject,e[14]=y):y=e[14];let b;e[15]!==d||e[16]!==y||e[17]!==g||e[18]!==x?(b=r.jsxs("div",{className:"flex flex-col items-center justify-center px-5 pt-4 pb-8 sm:p-10",children:[d,u,f,g,x,y]}),e[15]=d,e[16]=y,e[17]=g,e[18]=x,e[19]=b):b=e[19];let C;return e[20]!==l||e[21]!==c||e[22]!==b?(C=r.jsx(Mt,{testId:"modal-cookie-consent-banner-mobile",isOpen:!0,onClose:l,noPadding:!0,type:"success",size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:"bottom",shouldIgnoreClickOutside:c,children:b}),e[20]=l,e[21]=c,e[22]=b,e[23]=C):C=e[23],C}function Dve(){}const Fve=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M11.2475 18.25C10.6975 18.25 10.175 18.1455 9.67999 17.9365C9.18499 17.7275 8.74499 17.436 8.35999 17.062C7.94199 17.205 7.50749 17.2765 7.05649 17.2765C6.31949 17.2765 5.63749 17.095 5.01049 16.732C4.38349 16.369 3.87749 15.874 3.49249 15.247C3.11849 14.62 2.93149 13.9215 2.93149 13.1515C2.93149 12.8325 2.97549 12.486 3.06349 12.112C2.62349 11.705 2.28249 11.2375 2.04049 10.7095C1.79849 10.1705 1.67749 9.6095 1.67749 9.0265C1.67749 8.4325 1.80399 7.8605 2.05699 7.3105C2.30999 6.7605 2.66199 6.2875 3.11299 5.8915C3.57499 5.4845 4.10849 5.204 4.71349 5.05C4.83449 4.423 5.08749 3.862 5.47249 3.367C5.86849 2.861 6.35249 2.465 6.92449 2.179C7.49649 1.893 8.10699 1.75 8.75599 1.75C9.30599 1.75 9.82849 1.8545 10.3235 2.0635C10.8185 2.2725 11.2585 2.564 11.6435 2.938C12.0615 2.795 12.496 2.7235 12.947 2.7235C13.684 2.7235 14.366 2.905 14.993 3.268C15.62 3.631 16.1205 4.126 16.4945 4.753C16.8795 5.38 17.072 6.0785 17.072 6.8485C17.072 7.1675 17.028 7.514 16.94 7.888C17.38 8.295 17.721 8.768 17.963 9.307C18.205 9.835 18.326 10.3905 18.326 10.9735C18.326 11.5675 18.1995 12.1395 17.9465 12.6895C17.6935 13.2395 17.336 13.718 16.874 14.125C16.423 14.521 15.895 14.796 15.29 14.95C15.169 15.577 14.9105 16.138 14.5145 16.633C14.1295 17.139 13.651 17.535 13.079 17.821C12.507 18.107 11.8965 18.25 11.2475 18.25ZM7.17199 16.1875C7.72199 16.1875 8.20049 16.072 8.60749 15.841L11.7095 14.059C11.8195 13.982 11.8745 13.8775 11.8745 13.7455V12.3265L7.88149 14.62C7.63949 14.763 7.39749 14.763 7.15549 14.62L4.03699 12.8215C4.03699 12.8545 4.03149 12.893 4.02049 12.937C4.02049 12.981 4.02049 13.047 4.02049 13.135C4.02049 13.696 4.15249 14.213 4.41649 14.686C4.69149 15.148 5.07099 15.511 5.55499 15.775C6.03899 16.05 6.57799 16.1875 7.17199 16.1875ZM7.33699 13.498C7.40299 13.531 7.46349 13.5475 7.51849 13.5475C7.57349 13.5475 7.62849 13.531 7.68349 13.498L8.92099 12.7885L4.94449 10.4785C4.70249 10.3355 4.58149 10.121 4.58149 9.835V6.2545C4.03149 6.4965 3.59149 6.8705 3.26149 7.3765C2.93149 7.8715 2.76649 8.4215 2.76649 9.0265C2.76649 9.5655 2.90399 10.0825 3.17899 10.5775C3.45399 11.0725 3.81149 11.4465 4.25149 11.6995L7.33699 13.498ZM11.2475 17.161C11.8305 17.161 12.3585 17.029 12.8315 16.765C13.3045 16.501 13.6785 16.138 13.9535 15.676C14.2285 15.214 14.366 14.697 14.366 14.125V10.561C14.366 10.429 14.311 10.33 14.201 10.264L12.947 9.538V14.1415C12.947 14.4275 12.826 14.642 12.584 14.785L9.46549 16.5835C10.0045 16.9685 10.5985 17.161 11.2475 17.161ZM11.8745 11.122V8.878L10.01 7.822L8.12899 8.878V11.122L10.01 12.178L11.8745 11.122ZM7.05649 5.8585C7.05649 5.5725 7.17749 5.358 7.41949 5.215L10.538 3.4165C9.99899 3.0315 9.40499 2.839 8.75599 2.839C8.17299 2.839 7.64499 2.971 7.17199 3.235C6.69899 3.499 6.32499 3.862 6.04999 4.324C5.78599 4.786 5.65399 5.303 5.65399 5.875V9.4225C5.65399 9.5545 5.70899 9.659 5.81899 9.736L7.05649 10.462V5.8585ZM15.4385 13.7455C15.9885 13.5035 16.423 13.1295 16.742 12.6235C17.072 12.1175 17.237 11.5675 17.237 10.9735C17.237 10.4345 17.0995 9.9175 16.8245 9.4225C16.5495 8.9275 16.192 8.5535 15.752 8.3005L12.6665 6.5185C12.6005 6.4745 12.54 6.458 12.485 6.469C12.43 6.469 12.375 6.4855 12.32 6.5185L11.0825 7.2115L15.0755 9.538C15.1965 9.604 15.2845 9.692 15.3395 9.802C15.4055 9.901 15.4385 10.022 15.4385 10.165V13.7455ZM12.122 5.3635C12.364 5.2095 12.606 5.2095 12.848 5.3635L15.983 7.195C15.983 7.118 15.983 7.019 15.983 6.898C15.983 6.37 15.851 5.8695 15.587 5.3965C15.334 4.9125 14.9655 4.5275 14.4815 4.2415C14.0085 3.9555 13.4585 3.8125 12.8315 3.8125C12.2815 3.8125 11.803 3.928 11.396 4.159L8.29399 5.941C8.18399 6.018 8.12899 6.1225 8.12899 6.2545V7.6735L12.122 5.3635Z"})),fQe=Object.freeze(Object.defineProperty({__proto__:null,default:Fve},Symbol.toStringTag,{value:"Module"})),Bve=R(()=>P(()=>import("./l4m29zus5vmyfglr.js"),__vite__mapDeps([323,1])),{loading:t=>O(t)});function mQe(t){"use forget";const e=G.c(8),{as:n,inExpandoSidebarSection:s}=t,o=n===void 0?Io:n,a=s===void 0?!1:s,i=ne(),l=Hn();let c;e[0]!==a||e[1]!==i?(c=a?i.formatMessage({id:"gizmo.exploreStoreEnabled.short.expando",defaultMessage:"Explore"}):i.formatMessage({id:"gizmo.exploreStoreEnabled.short",defaultMessage:"GPTs"}),e[0]=a,e[1]=i,e[2]=c):c=e[2];const d=c;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=Bh(tW()),e[3]=u):u=e[3];const f=l.pathname==="/gpts";let m;return e[4]!==o||e[5]!==d||e[6]!==f?(m=r.jsx(o,{icon:Bve,"data-testid":"explore-gpts-button",to:u,active:f,onClick:Uve,label:d}),e[4]=o,e[5]=d,e[6]=f,e[7]=m):m=e[7],m}function Uve(){nW()&&On.setPopoverSidebarOpen(!1),B.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_explore_gpts",{gizmo_id:"explore_gpts"})}function rD(t){return ye(t,"2459568560")}function $ve(t){return ye(t,"833571076")}function Vve(t){return rD(t)}function pQe(t){return rD(t)&&$ve(t)}const Hve=R(()=>P(()=>import("./hxiulybumx6oxiw9.js"),__vite__mapDeps([324,1])),{loading:t=>O(t)}),Gve=({as:t=Io})=>{const e=V(),n=ne();return Vve(e)?r.jsx(t,{to:"/aardvark",icon:Hve,external:!Td(),label:n.formatMessage({id:"AardvarkSidebarListItem.aardvark",defaultMessage:"Aardvark"})}):null},iD=t=>_.createElement("svg",w({width:25,height:25,viewBox:"0 0 25 25",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("g",{clipPath:"url(#clip0_151_34)"},_.createElement("path",{d:"M11.1543 2.27734L11.1544 1.52734H11.1543V2.27734ZM14.8301 3.7998L14.2999 4.33025L14.6059 4.63612L15.0238 4.52434L14.8301 3.7998ZM16.1768 3.62305L16.1768 2.87305L16.1767 2.87305L16.1768 3.62305ZM21.377 8.82324L22.127 8.82324L22.127 8.82322L21.377 8.82324ZM21.1992 10.168L20.4746 9.97447L20.363 10.3925L20.669 10.6984L21.1992 10.168ZM22.7227 13.8457L23.4727 13.8457L23.4727 13.8457L22.7227 13.8457ZM18.8682 18.8682L18.6746 18.1436L18.2555 18.2555L18.1436 18.6746L18.8682 18.8682ZM13.8457 22.7227L13.8457 23.4727H13.8457V22.7227ZM10.1689 21.2002L10.6993 20.6698L10.3933 20.3639L9.97526 20.4756L10.1689 21.2002ZM8.82324 21.377L8.82324 22.127L8.8233 22.127L8.82324 21.377ZM3.62305 16.1768L2.87305 16.1767V16.1768H3.62305ZM3.7998 14.8301L4.52433 15.0239L4.63614 14.6059L4.33028 14.2999L3.7998 14.8301ZM2.27734 11.1543L1.52734 11.1543V11.1543H2.27734ZM6.12988 6.13086L6.32372 6.85538L6.74246 6.74335L6.85443 6.3246L6.12988 6.13086ZM11.1543 2.27734L11.1542 3.02734C12.3827 3.02745 13.4939 3.5246 14.2999 4.33025L14.8301 3.7998L15.3603 3.26936C14.2846 2.19417 12.7966 1.52749 11.1544 1.52734L11.1543 2.27734ZM14.8301 3.7998L15.0238 4.52434C15.3914 4.42604 15.7777 4.37306 16.1768 4.37305L16.1768 3.62305L16.1767 2.87305C15.6443 2.87306 15.1278 2.94383 14.6363 3.07527L14.8301 3.7998ZM16.1768 3.62305V4.37305C18.6343 4.37305 20.6269 6.3657 20.627 8.82327L21.377 8.82324L22.127 8.82322C22.1269 5.53731 19.4628 2.87305 16.1768 2.87305V3.62305ZM21.377 8.82324H20.627C20.627 9.22016 20.5731 9.60568 20.4746 9.97447L21.1992 10.168L21.9238 10.3615C22.0545 9.87218 22.127 9.35663 22.127 8.82324H21.377ZM21.1992 10.168L20.669 10.6984C21.4753 11.5043 21.9726 12.6163 21.9727 13.8458L22.7227 13.8457L23.4727 13.8457C23.4725 12.2027 22.806 10.7136 21.7294 9.63751L21.1992 10.168ZM22.7227 13.8457H21.9727C21.9727 15.9036 20.5745 17.636 18.6746 18.1436L18.8682 18.8682L19.0618 19.5927C21.6008 18.9144 23.4727 16.6006 23.4727 13.8457H22.7227ZM18.8682 18.8682L18.1436 18.6746C17.636 20.5746 15.9037 21.9727 13.8457 21.9727V22.7227V23.4727C16.6006 23.4727 18.9144 21.6008 19.5928 19.0617L18.8682 18.8682ZM13.8457 22.7227L13.8457 21.9727C12.6167 21.9726 11.5052 21.4757 10.6993 20.6698L10.1689 21.2002L9.63863 21.7305C10.7146 22.8064 12.2032 23.4726 13.8457 23.4727L13.8457 22.7227ZM10.1689 21.2002L9.97526 20.4756C9.6077 20.5739 9.22182 20.6269 8.82318 20.627L8.82324 21.377L8.8233 22.127C9.3556 22.1269 9.8716 22.056 10.3626 21.9248L10.1689 21.2002ZM8.82324 21.377V20.627C6.36565 20.627 4.37305 18.6344 4.37305 16.1768H3.62305H2.87305C2.87305 19.4628 5.53722 22.127 8.82324 22.127V21.377ZM3.62305 16.1768L4.37305 16.1768C4.37308 15.7776 4.42601 15.3914 4.52433 15.0239L3.7998 14.8301L3.07528 14.6363C2.94376 15.1279 2.87309 15.6443 2.87305 16.1767L3.62305 16.1768ZM3.7998 14.8301L4.33028 14.2999C3.52457 13.4937 3.02734 12.3827 3.02734 11.1543H2.27734H1.52734C1.52734 12.7967 2.19424 14.2846 3.26933 15.3603L3.7998 14.8301ZM2.27734 11.1543L3.02734 11.1543C3.02745 9.09668 4.42492 7.36339 6.32372 6.85538L6.12988 6.13086L5.93604 5.40634C3.39777 6.08544 1.52748 8.40053 1.52734 11.1543L2.27734 11.1543ZM6.12988 6.13086L6.85443 6.3246C7.36225 4.42545 9.0963 3.02734 11.1543 3.02734V2.27734V1.52734C8.40018 1.52734 6.0842 3.39833 5.40534 5.93712L6.12988 6.13086Z",fill:"currentColor"}),_.createElement("g",{filter:"url(#filter0_d_151_34)"},_.createElement("path",{d:"M14.731 9.34888C14.8822 9.29395 15.053 9.28872 15.2163 9.34595C15.5959 9.47908 15.7888 9.91135 15.6509 10.2893L13.3882 16.4856C13.252 16.8585 12.8421 17.0637 12.4673 16.9329C12.2323 16.8507 12.068 16.6595 12.0083 16.4368L11.3862 14.1204C11.3199 13.8719 11.1257 13.6783 10.8774 13.6116L8.56201 12.9846C8.33954 12.9244 8.14944 12.7587 8.06787 12.5237C7.93794 12.1487 8.14308 11.7392 8.51611 11.6038L14.731 9.34888Z",fill:"currentColor"}),_.createElement("path",{d:"M14.731 9.34888C14.8822 9.29395 15.053 9.28872 15.2163 9.34595C15.5959 9.47908 15.7888 9.91135 15.6509 10.2893L13.3882 16.4856C13.252 16.8585 12.8421 17.0637 12.4673 16.9329C12.2323 16.8507 12.068 16.6595 12.0083 16.4368L11.3862 14.1204C11.3199 13.8719 11.1257 13.6783 10.8774 13.6116L8.56201 12.9846C8.33954 12.9244 8.14944 12.7587 8.06787 12.5237C7.93794 12.1487 8.14308 11.7392 8.51611 11.6038L14.731 9.34888Z",fill:"currentColor"}))),_.createElement("defs",null,_.createElement("filter",{id:"filter0_d_151_34",x:-12.693,y:-7.27227,width:49.1101,height:49.1109,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},_.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),_.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),_.createElement("feOffset",{dy:4.14436}),_.createElement("feGaussianBlur",{stdDeviation:10.3609}),_.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),_.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),_.createElement("feBlend",{mode:"overlay",in2:"BackgroundImageFix",result:"effect1_dropShadow_151_34"}),_.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_151_34",result:"shape"})),_.createElement("clipPath",{id:"clip0_151_34"},_.createElement("rect",{width:25,height:25,fill:"white"})))),gQe=Object.freeze(Object.defineProperty({__proto__:null,default:iD},Symbol.toStringTag,{value:"Module"})),Wve=({as:t=Io})=>r.jsx(t,{to:"/atlas",external:!0,onClick:()=>{B.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:"atlas"}),B.logEventWithStatsig("Sidebar Click Atlas","chatgpt_sidebar_click_atlas",{gizmo_id:"atlas"})},icon:iD,label:r.jsx(j,{id:"n0YPrC",defaultMessage:"Atlas"})}),zve=R(()=>P(()=>import("./decxj0nfuivtbs7k.js"),__vite__mapDeps([152,1])),{loading:t=>O(t)});function qve(){"use forget";const t=G.c(1),e=V(),n=ye(e,"733205176"),s=ye(e,"1767304360");if(!(n&&s))return null;let a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(Yve,{}),t[0]=a):a=t[0],a}function Yve(){const{scheduledAutomations:t}=Rce({enabled:!0,staleTimeMs:1/0}),e=ne(),n=Hn(),s=sW();return t.length>0?r.jsx(Io,{icon:zve,"data-testid":"schedule-sidebar-button",to:s,active:n.pathname===s,label:e.formatMessage({id:"sidebar.schedulesItem",defaultMessage:"Schedules"})}):null}function Zve(t){switch(t){case Kr.PRIMARY:return"primary";case Kr.SECONDARY:return"secondary";case Kr.COPY:return"primary";case Kr.DROPDOWN:return"primary"}return"primary"}function Tw(t,e){const n={beacon_id:t.beacon_id,beacon_name:t.beacon_name,beacon_type:"container"};if(e==="show"){B.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",n);return}B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",n)}const lD=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10ZM13.333 11.418L13.4678 11.4316C13.7705 11.4938 13.9979 11.7619 13.998 12.083C13.998 12.4042 13.7706 12.6722 13.4678 12.7344L13.333 12.748H10.833C10.4659 12.7479 10.168 12.4502 10.168 12.083C10.1681 11.716 10.466 11.4181 10.833 11.418H13.333ZM7.65332 12.4258C7.46427 12.7404 7.05603 12.8422 6.74121 12.6533C6.42642 12.4644 6.32391 12.0561 6.5127 11.7412L7.65332 12.4258ZM8.90332 9.6582C9.02956 9.86872 9.02956 10.1313 8.90332 10.3418L7.65332 12.4258L7.08301 12.083L6.5127 11.7412L7.55664 10L6.5127 8.25879L7.08301 7.91699L7.65332 7.57422L8.90332 9.6582ZM6.74121 7.34668C7.05603 7.15779 7.46427 7.25955 7.65332 7.57422L6.5127 8.25879C6.32391 7.94392 6.42642 7.53563 6.74121 7.34668ZM17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10Z"})),hQe=Object.freeze(Object.defineProperty({__proto__:null,default:lD},Symbol.toStringTag,{value:"Module"})),bf=(t,e)=>{var i;if(!t)return{conversationId:void 0,messageId:null};const n=yt(e,t),s=ft(n.id),o=he.getLastAssistantMessage(s),a=n.serverId$();return a?{conversationId:a,messageId:(i=o==null?void 0:o.id)!=null?i:null}:{conversationId:void 0,messageId:null}};function I5(t){"use forget";const e=G.c(2);let n;return e[0]!==t?(n={mutationFn:s=>{var i;const{conversationId:o,messageId:a}=(i=t==null?void 0:t())!=null?i:{conversationId:void 0,messageId:null};return ge.safePost("/beacons/event",{requestBody:{beacon_id:s,event_type:J3.VIEW,conversation_id:o,message_id:a}})}},e[0]=t,e[1]=n):n=e[1],zt(n)}function cD(t){"use forget";const e=G.c(2);let n;return e[0]!==t?(n={mutationFn:s=>{var c;const{beaconId:o,eventCtaId:a}=s,{conversationId:i,messageId:l}=(c=t==null?void 0:t())!=null?c:{conversationId:void 0,messageId:null};return ge.safePost("/beacons/event",{requestBody:{beacon_id:o,event_type:J3.CLICK,event_cta_id:a,conversation_id:i,message_id:l}})}},e[0]=t,e[1]=n):n=e[1],zt(n)}function j5(t){"use forget";const e=G.c(2);let n;return e[0]!==t?(n={mutationFn:s=>{var i;const{conversationId:o,messageId:a}=(i=t==null?void 0:t())!=null?i:{conversationId:void 0,messageId:null};return ge.safePost("/beacons/event",{requestBody:{beacon_id:s,event_type:J3.DISMISS,conversation_id:o,message_id:a}})}},e[0]=t,e[1]=n):n=e[1],zt(n)}const Kve=t=>{"use forget";const e=G.c(3),{as:n}=t,s=n===void 0?Io:n,o=V(),a=oW(o),i=qre();if(!a||i==="DISABLED")return null;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(j,{id:"EFFUeE",defaultMessage:"Codex"}),e[0]=l):l=e[0];let c;return e[1]!==s?(c=r.jsx(Qve,{children:r.jsx(s,{to:"/codex",external:!0,onClick:ebe,icon:lD,label:l})}),e[1]=s,e[2]=c):c=e[2],c};function Qve(t){"use forget";const e=G.c(4),{children:n}=t,s=V();if(bb(s)){let i;return e[0]!==n?(i=r.jsx(Jve,{children:n}),e[0]=n,e[1]=i):i=e[1],i}let a;return e[2]!==n?(a=r.jsx(Xve,{children:n}),e[2]=n,e[3]=a):a=e[3],a}function Jve(t){"use forget";const e=G.c(13),{children:n}=t,s=V(),o=uY(),{mutate:a}=I5(),{mutate:i}=j5(),l=(o==null?void 0:o.beacon_id)==="codex_sidebar_tooltip";let c,d;e[0]!==o||e[1]!==a||e[2]!==l?(c=()=>{!l||!o||(Tw(o,"show"),a(o.beacon_id))},d=[o,a,l],e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=d):(c=e[3],d=e[4]),_.useEffect(c,d);let u;e[5]!==o||e[6]!==s||e[7]!==i?(u=()=>{o&&(Tw(o,"dismiss"),i(o.beacon_id),st(s,m1),_i.dismiss())},e[5]=o,e[6]=s,e[7]=i,e[8]=u):u=e[8];const f=u;let m;return e[9]!==n||e[10]!==f||e[11]!==l?(m=r.jsx(dD,{show:l,onDismiss:f,children:n}),e[9]=n,e[10]=f,e[11]=l,e[12]=m):m=e[12],m}function Xve(t){"use forget";const e=G.c(6),{children:n}=t,s=V(),o=Une(),a=!o.isLoading&&o.eligible;let i;e[0]!==s?(i=()=>st(s,m1),e[0]=s,e[1]=i):i=e[1];let l;return e[2]!==n||e[3]!==a||e[4]!==i?(l=r.jsx(dD,{show:a,onDismiss:i,children:n}),e[2]=n,e[3]=a,e[4]=i,e[5]=l):l=e[5],l}function dD(t){"use forget";const e=G.c(9),{children:n,onDismiss:s,show:o}=t,a=ne();if(!o)return n;let i;e[0]!==a?(i=a.formatMessage({id:"wham.sidebarListItem.nuxTooltip.title",defaultMessage:"Software engineering agent"}),e[0]=a,e[1]=i):i=e[1];let l;e[2]!==a?(l=a.formatMessage({id:"wham.whamSidebarListItem.writeInCodebase",defaultMessage:"Answers questions, runs code, and drafts PRs."}),e[2]=a,e[3]=l):l=e[3];let c;return e[4]!==n||e[5]!==s||e[6]!==i||e[7]!==l?(c=r.jsx(zd,{show:!0,side:"right",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",childrenWrapperClassName:"!w-full",announcementKey:m1,title:i,description:l,onDismiss:s,children:n}),e[4]=n,e[5]=s,e[6]=i,e[7]=l,e[8]=c):c=e[8],c}function ebe(){B.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:"codex"}),B.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_codex",{gizmo_id:"codex"})}const _Qe=t=>{"use forget";var b,C;const e=G.c(27),{as:n,ptnSidebarProps:s}=t,o=V();let a,i;e[0]!==o?(a=et(o),i=a==null?void 0:a.hasPaidSubscription(),e[0]=o,e[1]=a,e[2]=i):(a=e[1],i=e[2]);const l=i;let c;e[3]!==o?(c=!yn()&&aW(o),e[3]=o,e[4]=c):c=e[4];const d=c,u=!!(s!=null&&s.isPtnEnabled&&((b=s==null?void 0:s.isPtnLoading)!=null&&b||((C=s==null?void 0:s.ptnSnorlax)!=null?C:null)!=null));if(!a)return null;let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=!1,e[5]=f):f=e[5];let m;e[6]!==n||e[7]!==l?(m=l&&r.jsx(Kve,{as:n}),e[6]=n,e[7]=l,e[8]=m):m=e[8];let p;e[9]!==n||e[10]!==d?(p=d&&r.jsx(Wve,{as:n}),e[9]=n,e[10]=d,e[11]=p):p=e[11];let g,h;e[12]!==n?(g=r.jsx(Gve,{as:n}),h=!1,e[12]=n,e[13]=g,e[14]=h):(g=e[13],h=e[14]);let x;e[15]!==(s==null?void 0:s.currentGizmoId)||e[16]!==(s==null?void 0:s.isPtnLoading)||e[17]!==(s==null?void 0:s.ptnSnorlax)||e[18]!==u?(x=!1,e[15]=s==null?void 0:s.currentGizmoId,e[16]=s==null?void 0:s.isPtnLoading,e[17]=s==null?void 0:s.ptnSnorlax,e[18]=u,e[19]=x):x=e[19];let v;e[20]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(qve,{}),e[20]=v):v=e[20];let y;return e[21]!==m||e[22]!==p||e[23]!==g||e[24]!==h||e[25]!==x?(y=r.jsxs(r.Fragment,{children:[f,m,p,g,h,x,v]}),e[21]=m,e[22]=p,e[23]=g,e[24]=h,e[25]=x,e[26]=y):y=e[26],y},tbe="3578245547",nbe="2904126195",sbe="persist-files-to-library",obe="show-recent-files-dropdown",abe="double-write-files-to-library";function uD(t,e=!1){ze(t,nbe,{disableExposureLog:e});const n=Ps(t,tbe,{disableExposureLog:e});return{persistFilesToLibrary:n.get(sbe,!1),showRecentFilesDropdown:n.get(obe,!1),doubleWriteFilesToLibrary:n.get(abe,!1)}}var gp={},Mw;function rbe(){return Mw||(Mw=1,gp.__esModule=!0,gp.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var s=t.name||"",o=(t.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return n.some(function(i){var l=i.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):o===l})}return!0}),gp}var ibe=rbe();const Y0=Gn(ibe);function Aw(t){return dbe(t)||cbe(t)||mD(t)||lbe()}function lbe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dbe(t){if(Array.isArray(t))return dy(t)}function Iw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function jw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Iw(Object(n),!0).forEach(function(s){fD(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iw(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function fD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cf(t,e){return mbe(t)||fbe(t,e)||mD(t,e)||ube()}function ube(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mD(t,e){if(t){if(typeof t=="string")return dy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dy(t,e)}}function dy(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function fbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s=[],o=!0,a=!1,i,l;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(s.push(i.value),!(e&&s.length===e));o=!0);}catch(c){a=!0,l=c}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw l}}return s}}function mbe(t){if(Array.isArray(t))return t}var pbe=typeof Y0=="function"?Y0:Y0.default,gbe="file-invalid-type",pD="file-too-large",hbe="file-too-small",gD="too-many-files",xQe={FileTooLarge:pD,TooManyFiles:gD},_be=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),s=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:gbe,message:"File type must be ".concat(s)}},Nw=function(e){return{code:pD,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Pw=function(e){return{code:hbe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},yQe={code:gD,message:"Too many files"};function xbe(t,e){var n=t.type==="application/x-moz-file"||pbe(t,e);return[n,n?null:_be(e)]}function ybe(t,e,n){if(Qi(t.size))if(Qi(e)&&Qi(n)){if(t.size>n)return[!1,Nw(n)];if(t.size<e)return[!1,Pw(e)]}else{if(Qi(e)&&t.size<e)return[!1,Pw(e)];if(Qi(n)&&t.size>n)return[!1,Nw(n)]}return[!0,null]}function Qi(t){return t!=null}function vQe(t){var e=t.files,n=t.accept,s=t.minSize,o=t.maxSize,a=t.multiple,i=t.maxFiles,l=t.validator;return!a&&e.length>1||a&&i>=1&&e.length>i?!1:e.every(function(c){var d=xbe(c,n),u=Cf(d,1),f=u[0],m=ybe(c,s,o),p=Cf(m,1),g=p[0],h=l?l(c):null;return f&&g&&!h})}function Rw(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function bQe(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function CQe(t){t.preventDefault()}function vbe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function bbe(t){return t.indexOf("Edge/")!==-1}function SQe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return vbe(t)||bbe(t)}function wQe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return e.some(function(l){return!Rw(s)&&l&&l.apply(void 0,[s].concat(a)),Rw(s)})}}function kQe(){return"showOpenFilePicker"in window}function EQe(t){if(Qi(t)){var e=Object.entries(t).filter(function(n){var s=Cf(n,2),o=s[0],a=s[1],i=!0;return hD(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(a)||!a.every(_D))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(n,s){var o=Cf(s,2),a=o[0],i=o[1];return jw(jw({},n),{},fD({},a,i))},{});return[{description:"Files",accept:e}]}return t}function TQe(t){if(Qi(t))return Object.entries(t).reduce(function(e,n){var s=Cf(n,2),o=s[0],a=s[1];return[].concat(Aw(e),[o],Aw(a))},[]).filter(function(e){return hD(e)||_D(e)}).join(",")}function MQe(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function AQe(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function hD(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function _D(t){return/^.*\.[\w]+$/.test(t)}const IQe=({className:t})=>r.jsxs(Ts,{width:"132",height:"108",viewBox:"0 0 132 108",fill:"none",className:t,children:[r.jsx("g",{clipPath:"url(#clip0_3605_64419)",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.2025 29.3514C10.778 33.2165 8.51524 37.1357 11.8281 49.4995L13.4846 55.6814C16.7975 68.0453 20.7166 70.308 35.1411 66.443L43.3837 64.2344C57.8082 60.3694 60.0709 56.4502 56.758 44.0864L55.1016 37.9044C51.7887 25.5406 47.8695 23.2778 33.445 27.1428L29.3237 28.2471L25.2025 29.3514ZM18.1944 42.7244C18.8572 41.5764 20.325 41.1831 21.4729 41.8459L27.3517 45.24C28.4996 45.9027 28.8929 47.3706 28.2301 48.5185L24.836 54.3972C24.1733 55.5451 22.7054 55.9384 21.5575 55.2757C20.4096 54.613 20.0163 53.1451 20.6791 51.9972L22.8732 48.1969L19.0729 46.0028C17.925 45.3401 17.5317 43.8723 18.1944 42.7244ZM29.4091 56.3843C29.066 55.104 29.8258 53.7879 31.1062 53.4449L40.3791 50.9602C41.6594 50.6172 42.9754 51.377 43.3184 52.6573C43.6615 53.9376 42.9017 55.2536 41.6214 55.5967L32.3485 58.0813C31.0682 58.4244 29.7522 57.6646 29.4091 56.3843Z",fill:"#AFC1FF"})}),r.jsx("g",{clipPath:"url(#clip1_3605_64419)",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.8124 13.4036C81.0973 11.8722 78.5673 13.2649 77.0144 19.0603L68.7322 49.97C67.1793 55.7656 68.5935 58.2151 74.4696 59.7895L97.4908 65.958C103.367 67.5326 105.816 66.1184 107.406 60.1848L115.393 30.379C115.536 29.8456 115.217 29.2959 114.681 29.16C113.478 28.8544 112.435 28.6195 111.542 28.4183C106.243 27.2253 106.22 27.2201 109.449 20.7159C109.73 20.1507 109.426 19.4638 108.816 19.3004L86.8124 13.4036ZM87.2582 28.4311C86.234 28.1567 85.1812 28.7645 84.9067 29.7888C84.6323 30.813 85.2401 31.8658 86.2644 32.1403L101.101 36.1158C102.125 36.3902 103.178 35.7824 103.453 34.7581C103.727 33.7339 103.119 32.681 102.095 32.4066L87.2582 28.4311ZM82.9189 37.2074C83.1934 36.1831 84.2462 35.5753 85.2704 35.8497L100.107 39.8252C101.131 40.0996 101.739 41.1524 101.465 42.1767C101.19 43.201 100.137 43.8088 99.1132 43.5343L84.2766 39.5589C83.2523 39.2844 82.6445 38.2316 82.9189 37.2074ZM83.2826 43.2683C82.2584 42.9939 81.2056 43.6017 80.9311 44.626C80.6567 45.6502 81.2645 46.703 82.2888 46.9775L89.7071 48.9652C90.7313 49.2396 91.7841 48.6318 92.0586 47.6076C92.333 46.5833 91.7252 45.5305 90.7009 45.256L83.2826 43.2683Z",fill:"#7989FF"})}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.4004 71.8426C40.4004 57.2141 44.0575 53.5569 61.1242 53.5569H66.0004H70.8766C87.9432 53.5569 91.6004 57.2141 91.6004 71.8426V79.1569C91.6004 93.7855 87.9432 97.4426 70.8766 97.4426H61.1242C44.0575 97.4426 40.4004 93.7855 40.4004 79.1569V71.8426ZM78.8002 67.4995C78.8002 70.1504 76.6512 72.2995 74.0002 72.2995C71.3492 72.2995 69.2002 70.1504 69.2002 67.4995C69.2002 64.8485 71.3492 62.6995 74.0002 62.6995C76.6512 62.6995 78.8002 64.8485 78.8002 67.4995ZM60.7204 70.8597C60.2672 70.2553 59.5559 69.8997 58.8004 69.8997C58.045 69.8997 57.3337 70.2553 56.8804 70.8597L47.2804 83.6597C46.4851 84.72 46.7 86.2244 47.7604 87.0197C48.8208 87.8149 50.3251 87.6 51.1204 86.5397L58.8004 76.2997L66.4804 86.5397C66.8979 87.0962 67.5363 87.4443 68.2303 87.4936C68.9243 87.5429 69.6055 87.2887 70.0975 86.7967L74.8004 82.0938L79.5034 86.7967C80.4406 87.734 81.9602 87.734 82.8975 86.7967C83.8347 85.8595 83.8347 84.3399 82.8975 83.4026L76.4975 77.0026C75.5602 76.0653 74.0406 76.0653 73.1034 77.0026L68.6601 81.4459L60.7204 70.8597Z",fill:"#3C46FF"}),r.jsxs("defs",{children:[r.jsx("clipPath",{id:"clip0_3605_64419",children:r.jsx("rect",{width:"56",height:"56",fill:"white",transform:"translate(0 26.9939) rotate(-15)"})}),r.jsx("clipPath",{id:"clip1_3605_64419",children:r.jsx("rect",{width:"64",height:"64",fill:"white",transform:"translate(69.5645 0.5) rotate(15)"})})]})]}),jQe=({className:t})=>r.jsxs(Ts,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#10A37F"}),r.jsx("path",{d:"M15.5 10.5H12.1667C11.2462 10.5 10.5 11.2462 10.5 12.1667V13.5V18M15.5 10.5H23.8333C24.7538 10.5 25.5 11.2462 25.5 12.1667V13.5V18M15.5 10.5V25.5M15.5 25.5H18H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V18M15.5 25.5H12.1667C11.2462 25.5 10.5 24.7538 10.5 23.8333V18M10.5 18H25.5",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),NQe=({className:t})=>r.jsxs(Ts,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF5588"}),r.jsx("path",{d:"M19.6663 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V14.6666L19.6663 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M19.667 9.66663V14.6666H24.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M21.3337 18.8334H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M21.3337 22.1666H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M16.3337 15.5H15.5003H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),PQe=({className:t})=>r.jsxs(Ts,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#0088FF"}),r.jsx("path",{d:"M18.833 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V15.5L18.833 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M18.833 9.66663V15.5H24.6663",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),RQe=({className:t})=>r.jsxs(Ts,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF6E3C"}),r.jsx("path",{d:"M21.333 23L26.333 18L21.333 13",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M14.667 13L9.66699 18L14.667 23",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),Cbe="webp",Sbe=222,wbe=160,kbe="srgb",Ebe=3,Tbe="uchar",Mbe=72,Abe=!1,Ibe=8,jbe=!1,Nbe=!1,Pbe="{{.assetPrefix}}/assets/example_bg_1-grdr084h.webp",Rbe={format:Cbe,width:Sbe,height:wbe,space:kbe,channels:Ebe,depth:Tbe,density:Mbe,isProgressive:Abe,paletteBitDepth:Ibe,hasProfile:jbe,hasAlpha:Nbe,src:Pbe},Lbe="webp",Obe=222,Dbe=160,Fbe="srgb",Bbe=3,Ube="uchar",$be=72,Vbe=!1,Hbe=8,Gbe=!1,Wbe=!1,zbe="{{.assetPrefix}}/assets/example_bg_2-bh3fby76.webp",qbe={format:Lbe,width:Obe,height:Dbe,space:Fbe,channels:Bbe,depth:Ube,density:$be,isProgressive:Vbe,paletteBitDepth:Hbe,hasProfile:Gbe,hasAlpha:Wbe,src:zbe},Ybe="webp",Zbe=222,Kbe=160,Qbe="srgb",Jbe=3,Xbe="uchar",e5e=72,t5e=!1,n5e=8,s5e=!1,o5e=!1,a5e="{{.assetPrefix}}/assets/example_bg_3-ogafarpd.webp",r5e={format:Ybe,width:Zbe,height:Kbe,space:Qbe,channels:Jbe,depth:Xbe,density:e5e,isProgressive:t5e,paletteBitDepth:n5e,hasProfile:s5e,hasAlpha:o5e,src:a5e},i5e=R(()=>P(()=>import("./bq6b8bkp8ghtwa6g.js"),__vite__mapDeps([325,1])),{loading:t=>O(t)}),l5e=R(()=>P(()=>import("./gducbep8qsfkuz9f.js"),__vite__mapDeps([51,1])),{loading:t=>O(t)}),c5e=R(()=>P(()=>import("./f36voarywa12jcnt.js"),__vite__mapDeps([326,1])),{loading:t=>O(t)}),d5e=R(()=>P(()=>import("./isqpc56i7wx8h49k.js"),__vite__mapDeps([49,1])),{loading:t=>O(t)}),u5e=R(()=>P(()=>Promise.resolve().then(()=>q1),void 0),{loading:t=>O(t)});function f5e({usage:t}){const e={work:{icon:i5e,color:"#35AE47"},school:{icon:u5e,color:"#E937D1"},personalTasks:{icon:l5e,color:"#EA8444"},funAndEntertainment:{icon:c5e,color:"#6C71FF"},justCurious:{icon:d5e,color:"#FFCC00"}},n=e[t].icon,s=e[t].color;return r.jsx(n,{className:"icon",style:{color:s}})}function LQe({clientThreadId:t}){const e=ne(),n=kb({clientThreadId:t});return _.useEffect(()=>{Ye.logEvent("chatgpt_convo_onboarding_usage_chips_shown")},[]),r.jsx(mn,{mode:"wait",children:r.jsx(Xe.div,{className:"-mx-6 mt-2 flex flex-wrap gap-2 px-6",initial:{opacity:0},animate:{opacity:1,transition:{delay:.2,ease:"easeInOut"}},exit:{opacity:0,transition:{ease:"easeInOut"}},children:["school","work","personalTasks","funAndEntertainment","justCurious"].map(s=>r.jsxs("button",{className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary inline-flex h-[42px] items-center justify-start gap-2 rounded-[25px] border px-4 py-3",onClick:o=>{n({sourceEvent:o,stepPrompt:e.formatMessage(dd["".concat(s,"Prompt")]),messageMetadata:{onboarding:{main_usages:[{usage:s}]},is_starter_prompt:!0,suggestion_type:Je.Starter}}),Ye.logEvent("chatgpt_convo_onboarding_usage_chip_clicked",null,{usage:s})},children:[r.jsx("div",{"data-svg-wrapper":!0,className:"relative",children:r.jsx(f5e,{usage:s})}),r.jsx("div",{className:"font-['SF Pro'] text-token-text-primary text-[13px] leading-[18px] font-normal opacity-90",children:e.formatMessage(dd[s])})]},s))})})}function OQe({clientThreadId:t,examples:e}){const n=kb({clientThreadId:t}),s=[Rbe,qbe,r5e],o=ne();return _.useEffect(()=>{Ye.logEvent("chatgpt_convo_onboarding_examples_shown")},[]),r.jsx(mn,{mode:"wait",children:r.jsxs("div",{children:[r.jsx(Xe.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeInOut"},className:"text-token-text-primary text-base",children:o.formatMessage(dd.tryAnExample)}),r.jsx("ul",{className:"-mx-6 flex list-none flex-nowrap gap-6 overflow-auto px-6 py-4",children:e.map((a,i)=>r.jsx(Xe.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:(i+1)*.2,duration:.3},children:r.jsxs("button",{className:"bg-token-main-surface-primary outline-token-border-xlight hover:shadow-token-border-default inline-flex h-60 w-[222px] flex-col items-center justify-start overflow-hidden rounded-2xl outline transition-all duration-300 hover:shadow-lg",onClick:l=>{n({sourceEvent:l,stepPrompt:a.example,messageMetadata:{onboarding:{triggered_tools:[a.feature]},is_starter_prompt:!0,suggestion_type:Je.Starter}}),Ye.logEvent("chatgpt_convo_onboarding_example_clicked",null,{tool:a.feature})},children:[r.jsx("img",{src:s[i%s.length].src,className:"h-[160px] w-full object-cover",alt:o.formatMessage({id:"chatgpt.new-onboarding.example-prompt",defaultMessage:"Example prompt"})}),r.jsx("div",{className:"inline-flex h-20 w-full gap-1 p-4",children:r.jsx("div",{className:"text-token-text-primary line-clamp-2 shrink grow basis-0 text-start text-base leading-normal",title:a.title,children:a.title})})]})},a.feature))})]})})}function m5e({clientThreadId:t,children:e}){const{isEligible:n,markAsViewed:s}=iN(t),o=ne();return _.useEffect(()=>{n&&On.showAnnouncementTooltipExclusively(Fe.hasSeenFilePickerNuxTooltip,!0)},[n]),n?r.jsx(zd,{announcementKey:Fe.hasSeenFilePickerNuxTooltip,show:!0,side:"top",align:"start",theme:"bright",dismissOnOutsideClick:!0,badge:"none",title:o.formatMessage(dd.tryUploadingAFile),description:o.formatMessage(dd.uploadFileExample),onDismiss:s,sideOffset:0,children:e}):e}var ui=(t=>(t.ModelNotSupported="modelNotSupported",t.HasReachedMaxFiles="hasReachedMaxFiles",t.RateLimitReached="rateLimitReached",t))(ui||{}),N5=(t=>(t.General="general",t.ModelNotSupported="modelNotSupported",t.GizmoNotSupported="gizmoNotSupported",t.HasAttachedFiles="hasAttachedFiles",t))(N5||{});function ho(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function xD(t,e=[]){let n=[];function s(a,i){const l=_.createContext(i),c=n.length;n=[...n,i];const d=f=>{var y;const v=f,{scope:m,children:p}=v,g=ke(v,["scope","children"]),h=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,x=_.useMemo(()=>g,Object.values(g));return r.jsx(h.Provider,{value:x,children:p})};d.displayName=a+"Provider";function u(f,m){var h;const p=((h=m==null?void 0:m[t])==null?void 0:h[c])||l,g=_.useContext(p);if(g)return g;if(i!==void 0)return i;throw new Error("`".concat(f,"` must be used within `").concat(a,"`"))}return[d,u]}const o=()=>{const a=n.map(i=>_.createContext(i));return function(l){const c=(l==null?void 0:l[t])||a;return _.useMemo(()=>({["__scope".concat(t)]:U(w({},l),{[t]:c})}),[l,c])}};return o.scopeName=t,[s,p5e(o,...e)]}function p5e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const f=c(a)["__scope".concat(d)];return w(w({},l),f)},{});return _.useMemo(()=>({["__scope".concat(e.scopeName)]:i}),[i])}};return n.scopeName=e.scopeName,n}var Cl=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},g5e=K$[" useInsertionEffect ".trim().toString()]||Cl;function h5e({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[o,a,i]=_5e({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:o;{const u=_.useRef(t!==void 0);_.useEffect(()=>{const f=u.current;if(f!==l){const m=f?"controlled":"uncontrolled",p=l?"controlled":"uncontrolled";console.warn("".concat(s," is changing from ").concat(m," to ").concat(p,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}u.current=l},[l,s])}const d=_.useCallback(u=>{var f;if(l){const m=x5e(u)?u(t):u;m!==t&&((f=i.current)==null||f.call(i,m))}else a(u)},[l,t,a,i]);return[c,d]}function _5e({defaultProp:t,onChange:e}){const[n,s]=_.useState(t),o=_.useRef(n),a=_.useRef(e);return g5e(()=>{a.current=e},[e]),_.useEffect(()=>{var i;o.current!==n&&((i=a.current)==null||i.call(a,n),o.current=n)},[n,o]),[n,s,a]}function x5e(t){return typeof t=="function"}var y5e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ql=y5e.reduce((t,e)=>{const n=rW("Primitive.".concat(e)),s=_.forwardRef((o,a)=>{const d=o,{asChild:i}=d,l=ke(d,["asChild"]),c=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,U(w({},l),{ref:a}))});return s.displayName="Primitive.".concat(e),U(w({},t),{[e]:s})},{});function v5e(t,e){t&&or.flushSync(()=>t.dispatchEvent(e))}var b5e="Arrow",yD=_.forwardRef((t,e)=>{const i=t,{children:n,width:s=10,height:o=5}=i,a=ke(i,["children","width","height"]);return r.jsx(ql.svg,U(w({},a),{ref:e,width:s,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})}))});yD.displayName=b5e;var C5e=yD;function B1(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function S5e(t){const[e,n]=_.useState(void 0);return Cl(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=t.offsetWidth,l=t.offsetHeight;n({width:i,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var P5="Popper",[vD,bD]=xD(P5),[w5e,CD]=vD(P5),SD=t=>{const{__scopePopper:e,children:n}=t,[s,o]=_.useState(null);return r.jsx(w5e,{scope:e,anchor:s,onAnchorChange:o,children:n})};SD.displayName=P5;var wD="PopperAnchor",kD=_.forwardRef((t,e)=>{const c=t,{__scopePopper:n,virtualRef:s}=c,o=ke(c,["__scopePopper","virtualRef"]),a=CD(wD,n),i=_.useRef(null),l=Pd(e,i);return _.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(ql.div,U(w({},o),{ref:l}))});kD.displayName=wD;var R5="PopperContent",[k5e,E5e]=vD(R5),ED=_.forwardRef((t,e)=>{var te,ce,ue,me,xe,pe,Ee,Se;const X=t,{__scopePopper:n,side:s="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:g}=X,h=ke(X,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),x=CD(R5,n),[v,y]=_.useState(null),b=Pd(e,Te=>y(Te)),[C,S]=_.useState(null),k=S5e(C),E=(te=k==null?void 0:k.width)!=null?te:0,T=(ce=k==null?void 0:k.height)!=null?ce:0,M=s+(a!=="center"?"-"+a:""),A=typeof u=="number"?u:w({top:0,right:0,bottom:0,left:0},u),I=Array.isArray(d)?d:[d],N=I.length>0,L={padding:A,boundary:I.filter(M5e),altBoundary:N},{refs:D,floatingStyles:F,placement:$,isPositioned:H,middlewareData:z}=iW({strategy:"fixed",placement:M,whileElementsMounted:(...Te)=>gW(...Te,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[lW({mainAxis:o+T,alignmentAxis:i}),c&&cW(w({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?pW():void 0},L)),c&&dW(w({},L)),uW(U(w({},L),{apply:({elements:Te,rects:Ne,availableWidth:De,availableHeight:de})=>{const{width:oe,height:we}=Ne.reference,Ce=Te.floating.style;Ce.setProperty("--radix-popper-available-width","".concat(De,"px")),Ce.setProperty("--radix-popper-available-height","".concat(de,"px")),Ce.setProperty("--radix-popper-anchor-width","".concat(oe,"px")),Ce.setProperty("--radix-popper-anchor-height","".concat(we,"px"))}})),C&&fW({element:C,padding:l}),A5e({arrowWidth:E,arrowHeight:T}),m&&mW(w({strategy:"referenceHidden"},L))]}),[K,J]=AD($),Z=B1(g);Cl(()=>{H&&(Z==null||Z())},[H,Z]);const q=(ue=z.arrow)==null?void 0:ue.x,se=(me=z.arrow)==null?void 0:me.y,ie=((xe=z.arrow)==null?void 0:xe.centerOffset)!==0,[ee,le]=_.useState();return Cl(()=>{v&&le(window.getComputedStyle(v).zIndex)},[v]),r.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:w(U(w({},F),{transform:H?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(pe=z.transformOrigin)==null?void 0:pe.x,(Ee=z.transformOrigin)==null?void 0:Ee.y].join(" ")}),((Se=z.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:r.jsx(k5e,{scope:n,placedSide:K,onArrowChange:S,arrowX:q,arrowY:se,shouldHideArrow:ie,children:r.jsx(ql.div,U(w({"data-side":K,"data-align":J},h),{ref:b,style:U(w({},h.style),{animation:H?void 0:"none"})}))})})});ED.displayName=R5;var TD="PopperArrow",T5e={top:"bottom",right:"left",bottom:"top",left:"right"},MD=_.forwardRef(function(e,n){const l=e,{__scopePopper:s}=l,o=ke(l,["__scopePopper"]),a=E5e(TD,s),i=T5e[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(C5e,U(w({},o),{ref:n,style:U(w({},o.style),{display:"block"})}))})});MD.displayName=TD;function M5e(t){return t!==null}var A5e=t=>({name:"transformOrigin",options:t,fn(e){var x,v,y,b,C;const{placement:n,rects:s,middlewareData:o}=e,i=((x=o.arrow)==null?void 0:x.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[d,u]=AD(n),f={start:"0%",center:"50%",end:"100%"}[u],m=((y=(v=o.arrow)==null?void 0:v.x)!=null?y:0)+l/2,p=((C=(b=o.arrow)==null?void 0:b.y)!=null?C:0)+c/2;let g="",h="";return d==="bottom"?(g=i?f:"".concat(m,"px"),h="".concat(-c,"px")):d==="top"?(g=i?f:"".concat(m,"px"),h="".concat(s.floating.height+c,"px")):d==="right"?(g="".concat(-c,"px"),h=i?f:"".concat(p,"px")):d==="left"&&(g="".concat(s.floating.width+c,"px"),h=i?f:"".concat(p,"px")),{data:{x:g,y:h}}}});function AD(t){const[e,n="center"]=t.split("-");return[e,n]}var I5e=SD,j5e=kD,N5e=ED,P5e=MD,R5e="Portal",ID=_.forwardRef((t,e)=>{var c;const l=t,{container:n}=l,s=ke(l,["container"]),[o,a]=_.useState(!1);Cl(()=>a(!0),[]);const i=n||o&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return i?QE.createPortal(r.jsx(ql.div,U(w({},s),{ref:e})),i):null});ID.displayName=R5e;function L5e(t,e){return _.useReducer((n,s)=>{const o=e[n][s];return o!=null?o:n},t)}var L5=t=>{const{present:e,children:n}=t,s=O5e(e),o=typeof n=="function"?n({present:s.isPresent}):_.Children.only(n),a=Pd(s.ref,D5e(o));return typeof n=="function"||s.isPresent?_.cloneElement(o,{ref:a}):null};L5.displayName="Presence";function O5e(t){const[e,n]=_.useState(),s=_.useRef(null),o=_.useRef(t),a=_.useRef("none"),i=t?"mounted":"unmounted",[l,c]=L5e(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const d=hp(s.current);a.current=l==="mounted"?d:"none"},[l]),Cl(()=>{const d=s.current,u=o.current;if(u!==t){const m=a.current,p=hp(d);t?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,c]),Cl(()=>{var d;if(e){let u;const f=(d=e.ownerDocument.defaultView)!=null?d:window,m=g=>{const x=hp(s.current).includes(g.animationName);if(g.target===e&&x&&(c("ANIMATION_END"),!o.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",u=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},p=g=>{g.target===e&&(a.current=hp(s.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function hp(t){return(t==null?void 0:t.animationName)||"none"}function D5e(t){var s,o;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function F5e(t,e=globalThis==null?void 0:globalThis.document){const n=B1(t);_.useEffect(()=>{const s=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var B5e="DismissableLayer",uy="dismissableLayer.update",U5e="dismissableLayer.pointerDownOutside",$5e="dismissableLayer.focusOutside",Lw,jD=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ND=_.forwardRef((t,e)=>{var T;const E=t,{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i,onDismiss:l}=E,c=ke(E,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),d=_.useContext(jD),[u,f]=_.useState(null),m=(T=u==null?void 0:u.ownerDocument)!=null?T:globalThis==null?void 0:globalThis.document,[,p]=_.useState({}),g=Pd(e,M=>f(M)),h=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=h.indexOf(x),y=u?h.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,C=y>=v,S=G5e(M=>{const A=M.target,I=[...d.branches].some(N=>N.contains(A));!C||I||(o==null||o(M),i==null||i(M),M.defaultPrevented||l==null||l())},m),k=W5e(M=>{const A=M.target;[...d.branches].some(N=>N.contains(A))||(a==null||a(M),i==null||i(M),M.defaultPrevented||l==null||l())},m);return F5e(M=>{y===d.layers.size-1&&(s==null||s(M),!M.defaultPrevented&&l&&(M.preventDefault(),l()))},m),_.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Lw=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Ow(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Lw)}},[u,m,n,d]),_.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Ow())},[u,d]),_.useEffect(()=>{const M=()=>p({});return document.addEventListener(uy,M),()=>document.removeEventListener(uy,M)},[]),r.jsx(ql.div,U(w({},c),{ref:g,style:w({pointerEvents:b?C?"auto":"none":void 0},t.style),onFocusCapture:ho(t.onFocusCapture,k.onFocusCapture),onBlurCapture:ho(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:ho(t.onPointerDownCapture,S.onPointerDownCapture)}))});ND.displayName=B5e;var V5e="DismissableLayerBranch",H5e=_.forwardRef((t,e)=>{const n=_.useContext(jD),s=_.useRef(null),o=Pd(e,s);return _.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),r.jsx(ql.div,U(w({},t),{ref:o}))});H5e.displayName=V5e;function G5e(t,e=globalThis==null?void 0:globalThis.document){const n=B1(t),s=_.useRef(!1),o=_.useRef(()=>{});return _.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){PD(U5e,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=c,e.addEventListener("click",o.current,{once:!0})):c()}else e.removeEventListener("click",o.current);s.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function W5e(t,e=globalThis==null?void 0:globalThis.document){const n=B1(t),s=_.useRef(!1);return _.useEffect(()=>{const o=a=>{a.target&&!s.current&&PD($5e,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Ow(){const t=new CustomEvent(uy);document.dispatchEvent(t)}function PD(t,e,n,{discrete:s}){const o=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),s?v5e(o,a):o.dispatchEvent(a)}var Z0,U1="HoverCard",[RD]=xD(U1,[bD]),$1=bD(),[z5e,V1]=RD(U1),LD=t=>{const{__scopeHoverCard:e,children:n,open:s,defaultOpen:o,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=t,c=$1(e),d=_.useRef(0),u=_.useRef(0),f=_.useRef(!1),m=_.useRef(!1),[p,g]=h5e({prop:s,defaultProp:o!=null?o:!1,onChange:a,caller:U1}),h=_.useCallback(()=>{clearTimeout(u.current),d.current=window.setTimeout(()=>g(!0),i)},[i,g]),x=_.useCallback(()=>{clearTimeout(d.current),!f.current&&!m.current&&(u.current=window.setTimeout(()=>g(!1),l))},[l,g]),v=_.useCallback(()=>g(!1),[g]);return _.useEffect(()=>()=>{clearTimeout(d.current),clearTimeout(u.current)},[]),r.jsx(z5e,{scope:e,open:p,onOpenChange:g,onOpen:h,onClose:x,onDismiss:v,hasSelectionRef:f,isPointerDownOnContentRef:m,children:r.jsx(I5e,U(w({},c),{children:n}))})};LD.displayName=U1;var OD="HoverCardTrigger",DD=_.forwardRef((t,e)=>{const i=t,{__scopeHoverCard:n}=i,s=ke(i,["__scopeHoverCard"]),o=V1(OD,n),a=$1(n);return r.jsx(j5e,U(w({asChild:!0},a),{children:r.jsx(ql.a,U(w({"data-state":o.open?"open":"closed"},s),{ref:e,onPointerEnter:ho(t.onPointerEnter,Yg(o.onOpen)),onPointerLeave:ho(t.onPointerLeave,Yg(o.onClose)),onFocus:ho(t.onFocus,o.onOpen),onBlur:ho(t.onBlur,o.onClose),onTouchStart:ho(t.onTouchStart,l=>l.preventDefault())}))}))});DD.displayName=OD;var O5="HoverCardPortal",[q5e,Y5e]=RD(O5,{forceMount:void 0}),FD=t=>{const{__scopeHoverCard:e,forceMount:n,children:s,container:o}=t,a=V1(O5,e);return r.jsx(q5e,{scope:e,forceMount:n,children:r.jsx(L5,{present:n||a.open,children:r.jsx(ID,{asChild:!0,container:o,children:s})})})};FD.displayName=O5;var qg="HoverCardContent",BD=_.forwardRef((t,e)=>{const n=Y5e(qg,t.__scopeHoverCard),i=t,{forceMount:s=n.forceMount}=i,o=ke(i,["forceMount"]),a=V1(qg,t.__scopeHoverCard);return r.jsx(L5,{present:s||a.open,children:r.jsx(Z5e,U(w({"data-state":a.open?"open":"closed"},o),{onPointerEnter:ho(t.onPointerEnter,Yg(a.onOpen)),onPointerLeave:ho(t.onPointerLeave,Yg(a.onClose)),ref:e}))})});BD.displayName=qg;var Z5e=_.forwardRef((t,e)=>{const g=t,{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i}=g,l=ke(g,["__scopeHoverCard","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),c=V1(qg,n),d=$1(n),u=_.useRef(null),f=Pd(e,u),[m,p]=_.useState(!1);return _.useEffect(()=>{if(m){const h=document.body;return Z0=h.style.userSelect||h.style.webkitUserSelect,h.style.userSelect="none",h.style.webkitUserSelect="none",()=>{h.style.userSelect=Z0,h.style.webkitUserSelect=Z0}}},[m]),_.useEffect(()=>{if(u.current){const h=()=>{p(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var v;((v=document.getSelection())==null?void 0:v.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",h),()=>{document.removeEventListener("pointerup",h),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),_.useEffect(()=>{u.current&&J5e(u.current).forEach(x=>x.setAttribute("tabindex","-1"))}),r.jsx(ND,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ho(a,h=>{h.preventDefault()}),onDismiss:c.onDismiss,children:r.jsx(N5e,U(w(w({},d),l),{onPointerDown:ho(l.onPointerDown,h=>{h.currentTarget.contains(h.target)&&p(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:U(w({},l.style),{userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"})}))})}),K5e="HoverCardArrow",Q5e=_.forwardRef((t,e)=>{const a=t,{__scopeHoverCard:n}=a,s=ke(a,["__scopeHoverCard"]),o=$1(n);return r.jsx(P5e,U(w(w({},o),s),{ref:e}))});Q5e.displayName=K5e;function Yg(t){return e=>e.pointerType==="touch"?void 0:t()}function J5e(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}var X5e=LD,e4e=DD,t4e=FD,Dw=BD;const UD=({clientThreadId:t,rateLimitPopup:e,children:n,disabled:s,highlightTooltip:o=!1,disabledReason:a,currentModelName:i,label:l,secondaryLabel:c})=>{const d=ne(),u=Ve(t,he.getIsNewConversation),f=V(),m=et(f),p=y=>{var b;e!=null&&y&&B.logPopoverHover({type:"rate_limit",location:"file_upload",plan_type:(b=m==null?void 0:m.planType)!=null?b:"unknown"})},g=Hd(f,pt.signUpButtonText),{isEligible:h}=iN(t),x=!!e,v=!s&&h;return x?r.jsxs(X5e,{openDelay:0,onOpenChange:p,children:[r.jsx(e4e,{asChild:!0,children:n}),r.jsx(t4e,{children:r.jsx(g8,{children:r.jsx(Dw,{role:"dialog","aria-labelledby":"rate-limit-popover-title",children:r.jsx(Uh,{$as:Dw,side:"bottom",sideOffset:6,align:"start",alignOffset:-6,className:"max-w-[300px]",children:r.jsx(n4e,{isNewConversation:u,rateLimitPopup:e,signUpButtonText:g})})})})})]}):v?r.jsx(m5e,{clientThreadId:t,children:n}):r.jsx(_t,{label:!s&&l?l:H1(f,d,s,a,i),secondaryLabel:c,labelOrientation:"horizontal",className:"flex",contentClassName:o?void 0:"touch:hidden",open:o?!0:void 0,side:"bottom",children:n})};function H1(t,e,n,s,o){const a=et(t),i=a!=null,l=Eg(t);return n?s===ui.ModelNotSupported&&o!=null?e.formatMessage({id:"xPEzDr",defaultMessage:"Add files disabled for {modelName}"},{modelName:o}):s===ui.HasReachedMaxFiles?i?e.formatMessage({id:"TEBczg",defaultMessage:"Cannot add more files"}):e.formatMessage({id:"Y6o+nN",defaultMessage:"Cannot add more photos"}):s===ui.RateLimitReached?i?a.hasPaidSubscription()?e.formatMessage({id:"W/ug8Z",defaultMessage:"Upload limit reached"}):l?e.formatMessage({id:"j6nN5P",defaultMessage:"Upgrade to Go for more uploads"}):e.formatMessage({id:"GXsPqr",defaultMessage:"Get Plus for more uploads"}):e.formatMessage({id:"RHdQBI",defaultMessage:"Log in to add more photos"}):i?e.formatMessage({id:"MeW0HZ",defaultMessage:"Add files is unavailable"}):e.formatMessage({id:"bvbDsP",defaultMessage:"Add photos is unavailable"}):i?e.formatMessage({id:"composer.add.label",defaultMessage:"Add photos & files"}):e.formatMessage({id:"wNvwwm",defaultMessage:"Add photos"})}const n4e=t=>{"use forget";var D,F,$,H;const e=G.c(43),{isNewConversation:n,rateLimitPopup:s,signUpButtonText:o}=t,a=n===void 0?!1:n,i=V();let l;e[0]!==i?(l=Gl(i),e[0]=i,e[1]=l):l=e[1];const c=l,d=wr();if(s==null)return null;const{call_to_action:u,description:f}=s;let m;e[2]!==u?(m=(D=u==null?void 0:u.includes(Gt.UPGRADE_TO_GO))!=null?D:!1,e[2]=u,e[3]=m):m=e[3];const p=m;let g;e[4]!==u?(g=(F=u==null?void 0:u.includes(Gt.GET_GO_TRIAL))!=null?F:!1,e[4]=u,e[5]=g):g=e[5];const h=g;let x;e[6]!==u?(x=($=u==null?void 0:u.includes(Gt.GET_PLUS))!=null?$:!1,e[6]=u,e[7]=x):x=e[7];const v=x;let y;e[8]!==u?(y=(H=u==null?void 0:u.includes(Gt.AUTHENTICATE))!=null?H:!1,e[8]=u,e[9]=y):y=e[9];const b=y;let C;e[10]!==f||e[11]!==h||e[12]!==p?(C=f!=null?f:r.jsx(j,U(w({},s4e.defaultDescription),{values:{upgradePlanType:p||h?"Go":"Plus"}})),e[10]=f,e[11]=h,e[12]=p,e[13]=C):C=e[13];const S=C,k=b&&d;let E;e[14]!==S?(E=r.jsx("div",{className:"mb-3",id:"rate-limit-popover-title",children:S}),e[14]=S,e[15]=E):E=e[15];let T;e[16]!==a||e[17]!==h?(T=h?r.jsx(K0,{isNewConversation:a,message:pt.tryGoTrial,upgradePlanType:We.GO}):null,e[16]=a,e[17]=h,e[18]=T):T=e[18];let M;e[19]!==a||e[20]!==p?(M=p?r.jsx(K0,{isNewConversation:a,message:pt.upgradeToGo,upgradePlanType:We.GO}):null,e[19]=a,e[20]=p,e[21]=M):M=e[21];let A;e[22]!==i||e[23]!==a||e[24]!==v?(A=v?r.jsx(K0,{isNewConversation:a,message:em(i),upgradePlanType:We.PLUS}):null,e[22]=i,e[23]=a,e[24]=v,e[25]=A):A=e[25];let I;e[26]!==i||e[27]!==c||e[28]!==b||e[29]!==o?(I=b?r.jsx(_e,{color:"primary",onClick:()=>{Zt(i,{fallbackScreenHint:c?"login":"signup",callback:z=>{c?B.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:z},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP):B.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:z},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},children:c?r.jsx(j,w({},pt.logInButtonText)):r.jsx(j,w({},o))}):null,e[26]=i,e[27]=c,e[28]=b,e[29]=o,e[30]=I):I=e[30];let N;e[31]!==i||e[32]!==c||e[33]!==k||e[34]!==o?(N=k?r.jsx(_e,{color:"secondary",className:"ms-2",onClick:()=>{Zt(i,{fallbackScreenHint:c?"signup":"login",callback:z=>{c?B.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:z},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP):B.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:z},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},children:c?r.jsx(j,w({},o)):r.jsx(j,w({},pt.logInButtonText))}):null,e[31]=i,e[32]=c,e[33]=k,e[34]=o,e[35]=N):N=e[35];let L;return e[36]!==M||e[37]!==A||e[38]!==I||e[39]!==N||e[40]!==E||e[41]!==T?(L=r.jsxs("div",{className:"text-token-text-primary p-2 text-sm",children:[E,T,M,A,I,N]}),e[36]=M,e[37]=A,e[38]=I,e[39]=N,e[40]=E,e[41]=T,e[42]=L):L=e[42],L},K0=t=>{"use forget";const e=G.c(12),{isNewConversation:n,message:s,upgradePlanType:o}=t,a=V();let i;e[0]!==a?(i=et(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=ot();let d;e[2]!==(l==null?void 0:l.planType)||e[3]!==n||e[4]!==c||e[5]!==o?(d=()=>{var m,p;xn(c,"Rate limited file upload popover"),B.logRateLimitUpgradePlanButtonClicked({hard_block_reason:"",is_hard_block:!1,is_new_conversation:n,location:"popover",plan_type:(m=l==null?void 0:l.planType)!=null?m:"unknown",type:"file_upload",upgrade_plan_tye:o}),B.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"popover",plan_type:(p=l==null?void 0:l.planType)!=null?p:"unknown",is_hard_block:!1,is_new_conversation:n,hard_block_reason:""})},e[2]=l==null?void 0:l.planType,e[3]=n,e[4]=c,e[5]=o,e[6]=d):d=e[6];let u;e[7]!==s?(u=r.jsx(j,w({},s)),e[7]=s,e[8]=u):u=e[8];let f;return e[9]!==d||e[10]!==u?(f=r.jsx(_e,{size:"small",color:"secondary",onClick:d,children:u}),e[9]=d,e[10]=u,e[11]=f):f=e[11],f},s4e=be({defaultDescription:{id:"mMIVYZ",defaultMessage:"You've reached your daily upload limit. Get ChatGPT {upgradePlanType} to unlock more."}}),$D=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M9.33496 16.5V10.665H3.5C3.13273 10.665 2.83496 10.3673 2.83496 10C2.83496 9.63273 3.13273 9.33496 3.5 9.33496H9.33496V3.5C9.33496 3.13273 9.63273 2.83496 10 2.83496C10.3673 2.83496 10.665 3.13273 10.665 3.5V9.33496H16.5L16.6338 9.34863C16.9369 9.41057 17.165 9.67857 17.165 10C17.165 10.3214 16.9369 10.5894 16.6338 10.6514L16.5 10.665H10.665V16.5C10.665 16.8673 10.3673 17.165 10 17.165C9.63273 17.165 9.33496 16.8673 9.33496 16.5Z"})),wm=Object.freeze(Object.defineProperty({__proto__:null,default:$D},Symbol.toStringTag,{value:"Module"}));var Q0,Fw;function o4e(){if(Fw)return Q0;Fw=1;var t=Math.floor,e=Math.random;function n(s,o){return s+t(e()*(o-s+1))}return Q0=n,Q0}var J0,Bw;function VD(){if(Bw)return J0;Bw=1;var t=o4e();function e(n,s){var o=-1,a=n.length,i=a-1;for(s=s===void 0?a:s;++o<s;){var l=t(o,i),c=n[l];n[l]=n[o],n[o]=c}return n.length=s,n}return J0=e,J0}var X0,Uw;function a4e(){if(Uw)return X0;Uw=1;var t=_8(),e=VD();function n(s){return e(t(s))}return X0=n,X0}var e2,$w;function r4e(){if($w)return e2;$w=1;var t=hW();function e(n,s){return t(s,function(o){return n[o]})}return e2=e,e2}var t2,Vw;function i4e(){if(Vw)return t2;Vw=1;var t=r4e(),e=_W();function n(s){return s==null?[]:t(s,e(s))}return t2=n,t2}var n2,Hw;function l4e(){if(Hw)return n2;Hw=1;var t=VD(),e=i4e();function n(s){return t(e(s))}return n2=n,n2}var s2,Gw;function c4e(){if(Gw)return s2;Gw=1;var t=a4e(),e=l4e(),n=$3();function s(o){var a=n(o)?t:e;return a(o)}return s2=s,s2}var d4e=c4e();const u4e=Gn(d4e),f4e=R(()=>P(()=>import("./njem4hkd3vzqk90b.js"),__vite__mapDeps([327,1])),{loading:t=>O(t)}),m4e=R(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([151,1])),{loading:t=>O(t)}),p4e=R(()=>P(()=>import("./dj4o13sb5g3xcmb3.js"),__vite__mapDeps([160,1])),{loading:t=>O(t)}),g4e=R(()=>P(()=>Promise.resolve().then(()=>vB),void 0),{loading:t=>O(t)}),km=Wn(t=>{const e=Be(!1),n=Be(!1),s=N8(t),o=St(()=>n()&&s.anySheetOpen$()),a=If(Ue.ComposerMenuSheetBounced,()=>!1),i=St(()=>e()||o());return{hasBounced$:a,isSheetVisible$:i,isSheetOpen$:e,keepSheetOpen$:n}}),h4e=t=>{"use forget";const e=G.c(32),{onCloseAutoFocus:n,children:s,items:o,fileUploadRateLimited:a,mode:i}=t,l=i===void 0?"dropdown":i,c=V(),d=ae(Dh);let u;e[0]!==c?(u=km(c),e[0]=c,e[1]=u):u=e[1];const f=u,{isSheetOpen$:m,keepSheetOpen$:p}=f,g=ae(m);let h;e[2]!==c?(h=()=>X3(c),e[2]=c,e[3]=h):h=e[3];const x=ae(h),v=l==="sheet"?x.detentSize:"";let y;e[4]!==x||e[5]!==l?(y=l==="sheet"&&x.backClosesSheet?{behavior:"history",sheetName:"composer-plus-menu"}:{},e[4]=x,e[5]=l,e[6]=y):y=e[6];const b=y,C=!d;let S;e[7]!==v?(S=v===""?void 0:[v],e[7]=v,e[8]=S):S=e[8];let k;e[9]!==f.hasBounced$?(k=A=>{f.hasBounced$.set(!0),B.logEventWithStatsig("Composer: Plus Menu Detent Change","chatgpt_web_composer_plus_menu_detent_change",{detent:A})},e[9]=f.hasBounced$,e[10]=k):k=e[10];let E;e[11]!==x||e[12]!==c||e[13]!==a||e[14]!==p||e[15]!==l||e[16]!==f.isSheetOpen$?(E=A=>{Co(()=>{f.isSheetOpen$.set(A),A&&p.set(!1)}),A?(uD(c,!1),ze(c,"1092897457").get("is_tatertot_enabled",!0),l==="sheet"&&x.expose(),B.logEventWithStatsig("Composer: Open Plus Menu","chatgpt_web_composer_plus_menu_open",a?{file_upload_disabled_reason:"rate_limit",mode:l}:{mode:l})):l==="sheet"&&B.logEventWithStatsig("Composer: Close Plus Menu","chatgpt_web_composer_plus_menu_close",{mode:l})},e[11]=x,e[12]=c,e[13]=a,e[14]=p,e[15]=l,e[16]=f.isSheetOpen$,e[17]=E):E=e[17];let T;e[18]!==o||e[19]!==n?(T=r.jsx(Y.Portal,{children:r.jsx(_4e,{onCloseAutoFocus:n,children:o})}),e[18]=o,e[19]=n,e[20]=T):T=e[20];let M;return e[21]!==s||e[22]!==b||e[23]!==l||e[24]!==g||e[25]!==f||e[26]!==C||e[27]!==S||e[28]!==k||e[29]!==E||e[30]!==T?(M=r.jsxs(Y.Root,U(w({mode:l,open:g,store:f},b),{modal:C,detents:S,onActiveDetentChange:k,onOpenChange:E,children:[s,T]})),e[21]=s,e[22]=b,e[23]=l,e[24]=g,e[25]=f,e[26]=C,e[27]=S,e[28]=k,e[29]=E,e[30]=T,e[31]=M):M=e[31],M},_4e=t=>{"use forget";const e=G.c(20),{onCloseAutoFocus:n,children:s}=t,o=V(),{fullyExpanded$:a,mode:i}=_.use(xW),l=ae(a);let c;e[0]!==o?(c=()=>Rd(o),e[0]=o,e[1]=c):c=e[1];const{isCombinedList:d,showModelsInPlusMenu:u}=ae(c);let f;e[2]!==o?(f=km(o),e[2]=o,e[3]=f):f=e[3];const{hasBounced$:m}=f;let p;e[4]!==o?(p=()=>X3(o),e[4]=o,e[5]=p):p=e[5];const g=ae(p),h=i==="sheet"?g.canBounce:void 0,x=l&&"content-sheet-section:scrollable-content-section";let v;e[6]!==o||e[7]!==d||e[8]!==i||e[9]!==u?(v=i!=="sheet"&&tt(o)&&d&&(u?"max-h-[min(var(--radix-dropdown-menu-content-available-height,50svh),--spacing(1.5)+7*var(--menu-item-height))]!":"max-h-[min(var(--radix-dropdown-menu-content-available-height,50svh),--spacing(1.5)+5.8*var(--menu-item-height))]!"),e[6]=o,e[7]=d,e[8]=i,e[9]=u,e[10]=v):v=e[10];let y;e[11]!==x||e[12]!==v?(y=W("content-sheet-section:flex content-sheet-section:flex-col content-sheet-section:gap-3",x,v),e[11]=x,e[12]=v,e[13]=y):y=e[13];let b;return e[14]!==h||e[15]!==s||e[16]!==m||e[17]!==n||e[18]!==y?(b=r.jsx(Y.Content,{showHeader:!0,className:y,canBounce:h,hasBounced$:m,size:"auto",alignOffset:-7,loop:!0,onCloseAutoFocus:n,children:s}),e[14]=h,e[15]=s,e[16]=m,e[17]=n,e[18]=y,e[19]=b):b=e[19],b},x4e=t=>{"use forget";const e=G.c(2);let n;return e[0]!==t?(n=r.jsx(Y.BasicTrigger,{asChild:!0,children:r.jsx(y4e,w({},t))}),e[0]=t,e[1]=n):n=e[1],n},y4e=t=>{"use forget";var v;const e=G.c(21);let n,s;e[0]!==t?(v=t,{className:n}=v,s=ke(v,["className"]),e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const o=V();let a;e[3]!==o?(a=()=>Rd(o),e[3]=o,e[4]=a):a=e[4];const{plusButtonLabel:i}=ae(a);let l;e[5]!==o?(l=()=>hn(o),e[5]=o,e[6]=l):l=e[6];const c=ae(l),d=ne(),u=c&&"composer-btn--desktopSidebar",f=i&&"border-token-border-medium me-1 gap-1.5 border-1 ps-2 pe-3.5";let m;e[7]!==n||e[8]!==u||e[9]!==f?(m=W("composer-btn",n,u,f),e[7]=n,e[8]=u,e[9]=f,e[10]=m):m=e[10];let p;e[11]!==d?(p=d.formatMessage({id:"composer.plusMenu.label",defaultMessage:"Add files and more"}),e[11]=d,e[12]=p):p=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx($D,{className:"icon"}),e[13]=g):g=e[13];let h;e[14]!==i?(h=i&&r.jsx("span",{inert:!0,children:r.jsx(j,{id:"uHQYgJ",defaultMessage:"Add"})}),e[14]=i,e[15]=h):h=e[15];let x;return e[16]!==s||e[17]!==m||e[18]!==p||e[19]!==h?(x=r.jsxs("button",U(w({type:"button",className:m,"data-testid":"composer-plus-btn","aria-label":p},s),{id:"composer-plus-btn",children:[g,h]})),e[16]=s,e[17]=m,e[18]=p,e[19]=h,e[20]=x):x=e[20],x},v4e=t=>{"use forget";const e=G.c(4),{layoutMode:n,children:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(Y.SubMenuTrigger,{icon:m4e,label:r.jsx(j,{id:"iORE28",defaultMessage:"More"})}),e[0]=o):o=e[0];const a=n==="bottom"?"end":"start";let i;return e[1]!==s||e[2]!==a?(i=r.jsxs(Y.Sub,{children:[o,r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{align:a,children:s})})]},"more-tools-menu"),e[1]=s,e[2]=a,e[3]=i):i=e[3],i},b4e=t=>{"use forget";const e=G.c(4),{layoutMode:n,children:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(Y.SubMenuTrigger,{icon:p4e,label:r.jsx(j,{id:"gVFn9L",defaultMessage:"Tools"})}),e[0]=o):o=e[0];const a=n==="bottom"?"end":"start";let i;return e[1]!==s||e[2]!==a?(i=r.jsxs(Y.Sub,{children:[o,r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{align:a,children:s})})]},"collapsed-tool-menu"),e[1]=s,e[2]=a,e[3]=i):i=e[3],i},C4e=()=>u4e([{key:Pe.PictureV2,label:r.jsx(j,{id:"8CBFak",defaultMessage:"Create image"}),icon:Fp(Pe.PictureV2)},{key:Pe.Research,label:r.jsx(j,{id:"EGM5w4",defaultMessage:"Deep research"}),icon:Fp(Pe.Research)},{key:Pe.Think,label:r.jsx(j,{id:"V/wEA3",defaultMessage:"Think longer"}),icon:Fp(Pe.Think)},{key:"gpt-5",label:"GPT-5",icon:g4e},{key:"add-flies",label:r.jsx(j,{id:"dUwCPF",defaultMessage:"Add files"}),icon:f4e}]).slice(0,3),S4e=()=>{"use forget";const t=G.c(5),e=V();let n;if(t[0]!==e){const s=C4e(),o=w4e,a=c=>{Zt(e,{fallbackScreenHint:"login_or_signup",callback:d=>{B.logLoginOrSignUpButtonClicked({location:"Plus Menu ".concat(c),provider:d},o(c))},skipLoginModal:!1})};let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(Y.Label,{children:r.jsx(j,{id:"2SJWKf",defaultMessage:"Log in to use..."})}),t[2]=i):i=t[2];let l;t[3]!==a?(l=c=>r.jsx(Y.Item,{label:c.label,icon:c.icon,"data-disabled":!0,onSelect:()=>{a(c.key)},highlightTrailing:r.jsx(yW,{to:"#",onClick:d=>{d.preventDefault(),a(c.key)},children:r.jsx(j,w({},pt.logInButtonText))})},c.key),t[3]=a,t[4]=l):l=t[4],n=r.jsxs(Y.Group,{children:[i,s.map(l)]}),t[0]=e,t[1]=n}else n=t[1];return n};function w4e(t){switch(t.trim().toLowerCase()){case"add_files":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_ADD_FILES;case"picture_v2":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_PICTURE_V2;case"gpt_5":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_GPT_5;case"research":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_RESEARCH;case"reason":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_REASON;default:return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION}}const k4e=R(()=>P(()=>Promise.resolve().then(()=>Cm),void 0),{loading:t=>O(t)}),E4e=R(()=>P(()=>import("./duz09euqvesjqb1t.js"),__vite__mapDeps([277,1])),{loading:t=>O(t)}),T4e=R(()=>P(()=>import("./gn0yr6ivpbm62r9h.js"),__vite__mapDeps([328,1])),{loading:t=>O(t)});function DQe(t){"use forget";const e=G.c(28),{uploadType:n,modelSupportedImageMimeTypes:s,gizmo:o,attachmentsProductFeature:a,contextScopes:i}=t,l=ne(),c=ki(),d=Ut();let u;e[0]!==a||e[1]!==i||e[2]!==c||e[3]!==(o==null?void 0:o.gizmo)||e[4]!==l||e[5]!==s||e[6]!==d||e[7]!==n?(u=(S,k)=>{S&&(Array.from(S).forEach(E=>{ir.uploadFile(c,dl(E),E,n!=null?n:xo.Retrieval,s,l,d,w({gizmoId:o==null?void 0:o.gizmo.id},i&&i.length>0?{contextScopes:i}:{}),a)}),B.logEventWithStatsig("Upload File",k==="photos"?"chatgpt_web_photos_file_uploaded":"chatgpt_web_camera_file_uploaded",{intent:k,source:n,location:n===xo.Retrieval?"retrieval":"context-connector-picker"}))},e[0]=a,e[1]=i,e[2]=c,e[3]=o==null?void 0:o.gizmo,e[4]=l,e[5]=s,e[6]=d,e[7]=n,e[8]=u):u=e[8];const f=u;let m;e[9]!==n?(m=S=>{B.logEvent("Open File Viewer",{intent:S,source:n}),Ye.logEvent("chatgpt_web_".concat(S,"_file_viewer_opened"),null,{location:n===xo.Retrieval?"retrieval":"context-connector-picker"})},e[9]=n,e[10]=m):m=e[10];const p=m;let g;e[11]!==p?(g=()=>p("photos"),e[11]=p,e[12]=g):g=e[12];let h;e[13]!==f?(h=S=>{f(S.currentTarget.files,"photos")},e[13]=f,e[14]=h):h=e[14];let x;e[15]!==g||e[16]!==h?(x=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-photos",onClick:g,onChange:h,accept:"image/*",multiple:!0}),e[15]=g,e[16]=h,e[17]=x):x=e[17];let v;e[18]!==p?(v=()=>p("camera"),e[18]=p,e[19]=v):v=e[19];let y;e[20]!==f?(y=S=>{f(S.currentTarget.files,"camera")},e[20]=f,e[21]=y):y=e[21];let b;e[22]!==v||e[23]!==y?(b=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-camera",onClick:v,onChange:y,accept:"image/*",capture:"environment",multiple:!0}),e[22]=v,e[23]=y,e[24]=b):b=e[24];let C;return e[25]!==x||e[26]!==b?(C=r.jsxs(r.Fragment,{children:[x,b]}),e[25]=x,e[26]=b,e[27]=C):C=e[27],C}const Ww=t=>{"use forget";const e=G.c(10),{forMobileSheet:n}=t,s=V(),o=n?Y.HeaderItemAs:Y.ItemAs;let a;e[0]!==s||e[1]!==n?(a=d=>{n?km(s).keepSheetOpen$.set(!0):HD(d)},e[0]=s,e[1]=n,e[2]=a):a=e[2];const i=n?"large":void 0;let l;e[3]!==n?(l=n?r.jsx(j,{id:"wWojoI",defaultMessage:"Camera"}):r.jsx(j,{id:"AjuCMV",defaultMessage:"Take photo"}),e[3]=n,e[4]=l):l=e[4];let c;return e[5]!==o||e[6]!==a||e[7]!==i||e[8]!==l?(c=r.jsx(o,{as:"label",htmlFor:"upload-camera",onPointerUp:a,icon:T4e,size:i,label:l}),e[5]=o,e[6]=a,e[7]=i,e[8]=l,e[9]=c):c=e[9],c},zw=t=>{"use forget";const e=G.c(7),{forMobileSheet:n}=t,s=n?Y.HeaderItemAs:Y.ItemAs,o=n?"large":void 0,a=n?k4e:E4e;let i;e[0]!==n?(i=n?r.jsx(j,{id:"h453TK",defaultMessage:"Photos"}):r.jsx(j,{id:"kBmJ2X",defaultMessage:"Add photos"}),e[0]=n,e[1]=i):i=e[1];let l;return e[2]!==s||e[3]!==o||e[4]!==a||e[5]!==i?(l=r.jsx(s,{as:"label",htmlFor:"upload-photos",onPointerUp:HD,size:o,icon:a,label:i}),e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l):l=e[6],l};function HD(t){t.currentTarget.click()}const M4e=R(()=>P(()=>Promise.resolve().then(()=>a_),void 0),{loading:t=>O(t)}),D5=R(()=>P(()=>Promise.resolve().then(()=>Xke),void 0),{loading:t=>O(t)}),A4e=R(()=>P(()=>import("./my8gt8m1z63mib6t.js"),__vite__mapDeps([329,1])),{loading:t=>O(t)}),I4e=R(()=>P(()=>Promise.resolve().then(()=>Cm),void 0),{loading:t=>O(t)}),j4e=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),N4e=R(()=>P(()=>import("./fw3ln85zsg8szaqb.js"),__vite__mapDeps([330,1])),{loading:t=>O(t)}),P4e=[qe.Mod,"u"];function F5(t,e="en"){if(!t)return"";const n=new Date(t);if(isNaN(n.getTime()))return"";const s=new Date,o=Math.max(0,n.getTime()-s.getTime()),a=Math.floor(o/(1e3*60)),i=Math.floor(o/(1e3*60*60)),l=Math.floor(o/(1e3*60*60*24));let c,d;return l>0?(c=l,d="day"):i>0?(c=i,d="hour"):(c=a,d="minute"),new Intl.RelativeTimeFormat(e,{numeric:"always"}).format(c,d).replace(/^in\s+/i,"").replace(/\s+ago$/i,"")}function GD({openFileDialog:t,showMenuForNoAuth:e,mode:n,modelSupportsImages:s,isDisabled:o,disabledReason:a,rateLimitInfo:i,currentModelName:l,clientThreadId:c}){const d=V(),u=et(d),{attachfileRateLimitMessageVariant:f,attachfileRateLimitMessageShowIcon:m}=ae(()=>Rd(d)),p=s&&!o&&Td(),g=s&&!o&&tt(d)&&P8(),h=o&&a===ui.RateLimitReached,x=Ve(c,he.getIsNewConversation),v=_.useRef(!1);_.useEffect(()=>{var b;h&&!v.current&&(B.logEventWithStatsig("Rate Limit: Show Info","chatgpt_rate_limit_tooltip_shown",{location:"file_upload",type:"rate_limit",plan_type:(b=u==null?void 0:u.planType)!=null?b:"unknown",is_new_conversation:x}),v.current=!0)},[h,x,u==null?void 0:u.planType]);let y;if(o&&a===ui.RateLimitReached)if(u!=null&&u.hasPaidSubscription())y=r.jsx(qw,{account:u,forSheet:n==="sheet",rateLimitInfo:i!=null?i:null,currentModelName:l});else switch(n==="sheet"?"title_and_description":f){case"linked_text":y=r.jsx(L4e,{account:u,rateLimitInfo:i!=null?i:null,showIcon:m});break;case"title_and_description":y=r.jsx(qw,{account:u,forSheet:n==="sheet",rateLimitInfo:i!=null?i:null,currentModelName:l});break;case"upgrade_button":y=r.jsx(O4e,{account:u,rateLimitInfo:i!=null?i:null});break}else y=r.jsx(R4e,{mode:n,rateLimitInfo:i!=null?i:null,hasAddPhotosItem:g,currentModelName:l,openFileDialog:t,disabled:o,disabledReason:a});return e?r.jsx(D4e,{onClickUploadImages:t,redirectToAuth:()=>Zt(d,{fallbackScreenHint:"login",skipLoginModal:!1})}):n==="sheet"?r.jsxs(r.Fragment,{children:[p&&r.jsx(Ww,{forMobileSheet:!0}),g&&r.jsx(zw,{forMobileSheet:!0}),y]}):r.jsxs(r.Fragment,{children:[g&&r.jsx(zw,{}),p&&r.jsx(Ww,{}),y]})}function R4e(t){"use forget";const e=G.c(27),{hasAddPhotosItem:n,currentModelName:s,mode:o,openFileDialog:a,disabled:i,disabledReason:l}=t,c=ne(),d=V(),u=ae(Q3),f=Ol(),m=n?"android":o==="sheet"&&tt(d)?"ios":"default";let p;e:{if(f){let S;e[0]!==c?(S=c.formatMessage({id:"LocalFileDropdownItem.uploadImagesOnly",defaultMessage:"Add photos"}),e[0]=c,e[1]=S):S=e[1],p=S;break e}switch(m){case"android":{let S;e[2]!==c?(S=c.formatMessage({id:"LocalFileDropdownItem.uploadFilesOnly",defaultMessage:"Add files"}),e[2]=c,e[3]=S):S=e[3],p=S;break e}case"ios":{let S;e[4]!==c?(S=c.formatMessage({id:"LocalFileDropdownItem.uploadPhotosAndFiles",defaultMessage:"Photos & files"}),e[4]=c,e[5]=S):S=e[5],p=S;break e}case"default":{let S;e[6]!==d||e[7]!==s||e[8]!==i||e[9]!==l||e[10]!==c?(S=H1(d,c,i,l,s),e[6]=d,e[7]=s,e[8]=i,e[9]=l,e[10]=c,e[11]=S):S=e[11],p=S;break e}}p=void 0}const g=p,h=o==="sheet"?Y.HeaderItem:Y.Item,x=o==="sheet"?"large":void 0;let v;e[12]!==d||e[13]!==o||e[14]!==a?(v=()=>{o==="sheet"?(km(d).keepSheetOpen$.set(!0),Promise.resolve().then(()=>{a()})):a()},e[12]=d,e[13]=o,e[14]=a,e[15]=v):v=e[15];let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(D5,{className:"icon"}),e[16]=y):y=e[16];let b;e[17]!==o?(b=o!=="sheet"&&r.jsx(f1,{binding:P4e,className:"touch:hidden"}),e[17]=o,e[18]=b):b=e[18];let C;return e[19]!==h||e[20]!==i||e[21]!==u||e[22]!==g||e[23]!==x||e[24]!==v||e[25]!==b?(C=r.jsx(h,{size:x,onClick:v,icon:y,label:g,disabled:i,highlightTrailing:b,showHighlightTrailing:u},"upload"),e[19]=h,e[20]=i,e[21]=u,e[22]=g,e[23]=x,e[24]=v,e[25]=b,e[26]=C):C=e[26],C}function qw({account:t,forSheet:e,rateLimitInfo:n,currentModelName:s}){const o=ne(),a=V(),i=ot(),l=F5(n==null?void 0:n.resets_after);let c=r.jsx(D5,{className:"icon"}),d;t!=null&&t.hasPaidSubscription()?d=o.formatMessage({id:"ZBhfvX",defaultMessage:"Wait {time} to upload again"},{time:l}):(c=r.jsx(A4e,{className:"icon"}),d=o.formatMessage({id:"ba5pHI",defaultMessage:"Or wait {time} to upload again"},{time:l}));const u=e?Y.HeaderItemRow:Y.Item;return r.jsx(u,{onClick:()=>{t?Zg(i,t):Zt(a,{fallbackScreenHint:"login_or_signup",callback:f=>{B.logLogInButtonClicked({provider:f,location:"File picker rate limit tooltip"},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},icon:!e&&c,disabled:(t==null?void 0:t.hasPaidSubscription())&&!e,label:H1(a,o,!0,ui.RateLimitReached,s),trailing:e&&!(t!=null&&t.hasPaidSubscription())&&r.jsx(_e,{className:W(e&&"min-h-9"),onClick:()=>{Zg(i,t)},children:r.jsx(j,w({},pt.upgrade))}),secondary:d},"upload")}function L4e({account:t,rateLimitInfo:e,showIcon:n}){const s=ne(),o=ot(),a=F5(e==null?void 0:e.resets_after);return r.jsxs("div",{className:"group flex min-w-0 items-center py-2 ".concat(n?"px-2.5":"px-5"),children:[n&&r.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center",children:r.jsx(D5,{className:"text-token-text-tertiary"})}),r.jsx("div",{className:"text-token-text-tertiary line-clamp-2 block max-w-[212px] min-w-0 flex-1 text-start text-sm font-light",children:s.formatMessage({id:"egGG9V",defaultMessage:"<link>Upgrade to Plus</link> to attach more files or try again in {time}"},{time:a,link:i=>r.jsx("button",{type:"button",className:"text-token-text-secondary underline",onClick:()=>{Zg(o,t)},children:i})})})]},"upload")}function O4e({account:t,rateLimitInfo:e}){const n=ne(),s=ot(),o=F5(e==null?void 0:e.resets_after);return r.jsxs("div",{className:"flex flex-col gap-2 px-5 py-2",children:[r.jsx("div",{className:"text-token-text-tertiary max-w-[212px] text-start text-sm font-light",children:n.formatMessage({id:"/zL/ev",defaultMessage:"Upgrade to Plus to attach more files or try again in {time}"},{time:o})}),r.jsxs("button",{type:"button",className:"flex w-full items-center justify-center gap-1 rounded-full bg-[#F1F1FB] px-4 py-2 text-sm font-medium text-[#AF52DE] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClick:()=>{Zg(s,t)},children:[r.jsx(M4e,{className:"icon-sm text-[#5D5BD0] dark:text-[#DCDBF6]"}),r.jsx(j,w({},pt.upgrade))]})]},"upload")}function Zg(t,e){var n;xn(t,"Rate limited file upload inline-text"),B.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"inline-text",plan_type:(n=e==null?void 0:e.planType)!=null?n:"unknown",is_hard_block:!1,hard_block_reason:""})}function D4e({onClickUploadImages:t,redirectToAuth:e}){return r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{icon:N4e,onClick:e,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx(j,w({},fu.connectApps)),r.jsx("span",{className:"text-token-text-secondary text-[13px]",children:r.jsx(j,w({},fu.loginRequired))})]})},"connect-apps-no-auth"),r.jsx(Y.Item,{icon:j4e,onClick:e,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx(j,w({},fu.uploadDocuments)),r.jsx("span",{className:"text-token-text-secondary text-[13px]",children:r.jsx(j,w({},fu.loginRequired))})]})},"upload-documents-no-auth"),r.jsx(Y.Item,{icon:I4e,onClick:t,children:r.jsx(j,w({},fu.uploadImages))},"upload-images-no-auth")]})}const fu=be({connectApps:{id:"Rna6u2",defaultMessage:"Connect apps"},uploadDocuments:{id:"0BxpM7",defaultMessage:"Documents"},uploadImages:{id:"rdMuNJ",defaultMessage:"Images"},loginRequired:{id:"/1XNys",defaultMessage:"Login required"}});var SE;const FQe=mt.button(SE||(SE=ct(["flex items-center justify-center "," rounded-full "," "," "," "," ",""])),({$isSmall:t})=>t?"h-[34px] focus-visible:-outline-offset-1":"h-9",({$hideBorder:t,$visualTreatment:e})=>e!=="composer-btn"&&!t&&"border border-token-border-default",({$visualTreatment:t})=>t!=="composer-btn"&&"text-token-text-secondary",({$showLabel:t,$isSmall:e})=>t?"min-w-8 w-auto p-2 text-[13px] font-semibold radix-state-open:bg-black/10 hover:bg-token-main-surface-secondary":e?"w-7":"w-9",({disabled:t})=>t?"opacity-50":"hover:bg-token-main-surface-secondary",({$open:t})=>t&&"bg-black/10");function F4e(){const t=ne();return r.jsx("span",{className:"ps-1 pe-1 whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:t.formatMessage({id:"PromptFilePicker.attachFilesLabel",defaultMessage:"Attach"})})}const B4e=R(()=>P(()=>import("./nhix0thqskc25i68.js"),__vite__mapDeps([331,1])),{loading:t=>O(t)});function U4e({task:t}){const e=FP(t);return t.status===An.UNDETERMINED?r.jsx(fd,{percentage:0,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}):vW(t)?r.jsx(B4e,{className:"text-token-text-secondary"}):r.jsx(fd,{percentage:e,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"".concat((100-e)/100*.2,"s"),transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"})}const $4e=10,V4e=15,Yw=20,Zw=5,H4e=10;let o2=null;const ur=t=>{var e,n,s,o,a,i,l;if(o2==null){const c=is(t,"3317473948").value,d={convoPollingFreshnessMaxMins:((e=c.default_max_polling_duration)!=null?e:$4e*60)/60,imageGenPollingFreshnessMaxMins:((n=c.model_slug_max_polling_durations.image_gen)!=null?n:V4e*60)/60,o1ProConvoPollingFreshnessMaxMins:((s=c.model_slug_max_polling_durations.o1_pro)!=null?s:Yw*60)/60,o3ProConvoPollingFreshnessMaxMins:((o=c.model_slug_max_polling_durations.o3_pro)!=null?o:Yw*60)/60,gpt4oConvoPollingIntervalMs:((a=c.model_slug_intervals.gpt_4o)!=null?a:Zw)*1e3,defaultConvoPollingIntervalMs:((i=c.default_interval)!=null?i:Zw)*1e3,imageGenPollingIntervalMs:((l=c.model_slug_intervals.image_gen)!=null?l:H4e)*1e3,errorCountThreshold:30};return o2=d,d}return o2};var WD=(t=>(t[t.Standard=0]="Standard",t[t.ImageGen=1]="ImageGen",t))(WD||{});function rl(t){var e;return(e=t==null?void 0:t.metadata)!=null&&e.image_gen_async?1:0}function G4e(t){var n,s;const e=(s=(n=t==null?void 0:t.metadata)==null?void 0:n.poll_on_websocket_inactivity_ms)!=null?s:0;return e>0?e:0}function fy(t,e){var o,a,i;const n=(a=(o=t==null?void 0:t.metadata)==null?void 0:o.poll_interval_ms)!=null?a:0;return n>0?n:rl(t)===1?ur(e).imageGenPollingIntervalMs:W4e((i=t==null?void 0:t.metadata)==null?void 0:i.model_slug)?ur(e).gpt4oConvoPollingIntervalMs:ur(e).defaultConvoPollingIntervalMs}function B5(t,e){var o,a,i;const n=(a=(o=t==null?void 0:t.metadata)==null?void 0:o.poll_freshness_max_mins)!=null?a:0;if(n>0)return n;const s=(i=t==null?void 0:t.metadata)==null?void 0:i.model_slug;return qD(s)?ur(e).o1ProConvoPollingFreshnessMaxMins:YD(s)?ur(e).o3ProConvoPollingFreshnessMaxMins:rl(t)===1?ur(e).imageGenPollingFreshnessMaxMins:zD(rl(t),e)}function zD(t,e){switch(t){case 1:return ur(e).imageGenPollingFreshnessMaxMins;case 0:return ur(e).convoPollingFreshnessMaxMins}}function qD(t){return t?hr(3010482349,"".concat(t,"-AAAA")):!1}function YD(t){return t?hr(3240390095,"".concat(t,"-AAAA")):!1}function W4e(t){return t?t==="gpt-4o":!1}function Kw(t,e){Ze(t,n=>{dn.updateTree(n,(s,o)=>{var i,l,c;if(!(((c=(l=(i=s.getNodeIfExists(o))==null?void 0:i.message)==null?void 0:l.content)==null?void 0:c.content_type)===ut.Text)){const d=nx("");return d.clientMetadata=w(w({},d.clientMetadata),e),s.addMessageNode(o,d)}s.updateNodeMetadata(o,e)})})}function ZD({threadId:t}){const e=V(),n=jt(),s=_.useRef(!1),o=_.useRef(null),a=_.useRef(0),i=_.useRef(null);return _.useEffect(()=>{let l=!1;function c(){var f;return(f=he.getCurrentNode(ft(t)))==null?void 0:f.message}let d=0;async function u(){var g,h,x;i.current==null&&(i.current=Date.now()),s.current=!0;let f=null;try{const v=c();if(rl(v)!==1&&!qD((g=v==null?void 0:v.metadata)==null?void 0:g.model_slug)&&!YD((h=v==null?void 0:v.metadata)==null?void 0:h.model_slug))try{const y=Date.now()/1e3,{status:b}=await ge.safeGet("/conversation/{conversation_id}/stream_status",{parameters:{path:{conversation_id:t}}});b!=="COMPLETE"&&(d++,B.logEvent("ChatGPT Convo Stream: Polling Attempted",{conversationId:t,retryCount:d}),f={async_status:Xt.STREAMING,update_time:y})}catch(y){}f==null&&(d++,B.logEventWithStatsig("ChatGPT Convo Stream: Polling Attempted","chatgpt_convo_stream_polling_attempted",{conversationId:t,retryCount:d}),f=await Ma(t,{skipIfExisting:!1})),a.current=0}catch(v){a.current+=1;const y=c();if(a.current>=ur(e).errorCountThreshold){B.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:rl(y)}),B.logNetworkError({source:"pending_thread_poller",type:"error"});const b="A network error occurred. Please check your connection and try again. ".concat(iT);Kw(t,{err:b,errType:"danger"})}else l||(o.current=window.setTimeout(u,fy(y,e)));return}if(f.async_status===Xt.UNREAD){const v=c(),y=i.current?Date.now()-i.current:0;B.logEventWithStatsig("chatgpt_web_network_error_poller_success","chatgpt_web_network_error_poller_success",{duration_ms:y,poll_type:rl(v)}),Is(t,{source:ns.SERVER,value:Xt.UNREAD}),eo(n,f.gizmo_id),mr.updateThreadFromServer(t,f);return}if(f.async_status!==Xt.STREAMING)return;const m=(x=f.update_time)!=null?x:0,p=ev(new Date,new Date(m*1e3));if(!l){const v=c();if(p<B5(v,e))o.current=window.setTimeout(u,fy(v,e));else{const y=c();B.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:rl(y)}),Kw(t,{err:pi,errType:"danger",canRetry:!0}),ge.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:t}},requestBody:{status:null}})}}B.logEventWithStatsig("ChatGPT Convo Stream: Polling Complete","chatgpt_convo_stream_polling_complete",{conversationId:t,retryCount:d})}return s.current||(B.logEvent("Conversation Polling Started"),u()),()=>{l=!0,o.current&&window.clearTimeout(o.current),s.current=!1}},[n,t,e]),null}function KD(t){const e=V(),n=Wh(t),{value:s=null,source:o=null}=n!=null?n:{};return Ve(t,a=>{var m,p,g;const i=(m=he.getCurrentNode(a))==null?void 0:m.message,l=B5(i,e),c=he.getUpdateTime(a),d=Math.max(c!=null?c:0,(p=i==null?void 0:i.create_time)!=null?p:0,(g=i==null?void 0:i.update_time)!=null?g:0),u=ev(new Date,new Date(d*1e3))<l;return ye(e,"3922476776")&&u&&s===Xt.STREAMING&&o===ns.SERVER})}const pd=Dt(In(()=>({dragData:null,conversationDropTargetCount:0}))),z4e=()=>{"use forget";return pd(K4e)},q4e=t=>{pd.setState({dragData:t})},Y4e=()=>{pd.setState(t=>{t.dragData=null})},BQe=()=>(pd.setState(t=>{t.conversationDropTargetCount+=1}),()=>{pd.setState(t=>{t.conversationDropTargetCount=Math.max(0,t.conversationDropTargetCount-1)})}),Z4e=()=>{"use forget";return pd(Q4e)};function K4e(t){return t.dragData}function Q4e(t){return t.conversationDropTargetCount>0}function J4e({text:t}){const e=SI(),[n,s]=_.useState({finalText:t,pos:0,isTyping:!!t});_.useEffect(()=>{s(t?{finalText:t,pos:0,isTyping:!0}:{finalText:"",pos:0,isTyping:!1})},[t]);const o=_.useMemo(()=>Array.from(n.finalText),[n.finalText]),a=_.useMemo(()=>n.finalText?new X4e().humanTypingDelaysQuertyDistance(o):[],[o,n.finalText]);return _.useEffect(()=>{if(!n.isTyping)return;const i=a.map((l,c)=>setTimeout(()=>{e()&&s(d=>U(w({},d),{pos:c+1,isTyping:c+1<o.length}))},l));return()=>i.forEach(clearTimeout)},[n.isTyping,a,o,e]),r.jsx(r.Fragment,{children:n.finalText.slice(0,n.pos)})}class X4e{qwertyDistance(e,n){var c,d;const s={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},[o,a]=(c=s[e.toLowerCase()])!=null?c:[0,0],[i,l]=(d=s[n.toLowerCase()])!=null?d:[0,0];return Math.abs(o-i)+Math.abs(a-l)}humanTypingDelaysQuertyDistance(e,n=10,s=100){let o=0;const a=[];for(let i=0;i<e.length;++i){let l;if(i>0){const c=this.qwertyDistance(e[i-1],e[i]);c===0?l=this.getRandomInt(n,Math.floor(s/2)):c===1?l=this.getRandomInt(n,Math.floor(s*2/3)):l=this.getRandomInt(n,s)}else l=this.getRandomInt(n,s);a.push(l+o),o+=l}return a}getRandomInt(e,n){return Math.floor(Math.random()*(n-e+1))+e}}function e6e(t){const e=V(),[n,s]=_.useState(()=>wn(()=>bW(e)().some(a=>a.conversationId===t)));return _.useEffect(()=>{var a;let o=(a=ft(t))==null?void 0:a.title;return Jy.subscribe(i=>{const l=ft(t,i),c=l==null?void 0:l.title;c!==o&&((l==null?void 0:l.titleSource)===mh.Generated&&R8()?s(!0):s(!1),o=c)})},[t]),n}function t6e(t){"use forget";const e=G.c(9),{clientThreadId:n,historyConversationResponse:s,shouldShowLoadingShimmer$:o}=t,a=ae(o);let i;e[0]!==s.is_do_not_remember||e[1]!==a?(i=W({"loading-shimmer":a,"opacity-60":s.is_do_not_remember}),e[0]=s.is_do_not_remember,e[1]=a,e[2]=i):i=e[2];let l;e[3]!==n||e[4]!==s?(l=r.jsx(n6e,{clientThreadId:n,historyConversationResponse:s}),e[3]=n,e[4]=s,e[5]=l):l=e[5];let c;return e[6]!==i||e[7]!==l?(c=r.jsx("span",{className:i,dir:"auto",children:l}),e[6]=i,e[7]=l,e[8]=c):c=e[8],c}function n6e(t){"use forget";const e=G.c(2),{clientThreadId:n,historyConversationResponse:s}=t,o=Ve(n,s6e),a=e6e(n),i=o!=null?o:s.title;if(a){const l=i!=null?i:"";let c;return e[0]!==l?(c=r.jsx(J4e,{text:l}),e[0]=l,e[1]=c):c=e[1],c}return i}function s6e(t){return t==null?void 0:t.title}function o6e(t){"use forget";const e=G.c(19),{conversationId:n,historyConversationResponse:s,onClose:o}=t;let a;e[0]!==n||e[1]!==s?(a=()=>{var h,x,v;return(v=(x=(h=ft(n))==null?void 0:h.title)!=null?x:s.title)!=null?v:""},e[0]=n,e[1]=s,e[2]=a):a=e[2];const[i]=_.useState(a),l=_.useRef(null),c=V(),d=jt();let u;e[3]!==n||e[4]!==c||e[5]!==s||e[6]!==i||e[7]!==d?(u=function(){var v,y;const x=(y=(v=l.current)==null?void 0:v.value)!=null?y:"";x!==i&&(Av(c,n,x,mh.User),B.logEvent("Rename Thread",{threadId:n,content:x}),ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n}},requestBody:{title:x},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{eo(d,s.gizmo_id)}))},e[3]=n,e[4]=c,e[5]=s,e[6]=i,e[7]=d,e[8]=u):u=e[8];const f=u;let m;e[9]!==o||e[10]!==f?(m=h=>{if(!h.nativeEvent.isComposing){h.key===" "&&h.stopPropagation();e:switch(h.key){case"Escape":{o();break e}case"Enter":f(),o()}}},e[9]=o,e[10]=f,e[11]=m):m=e[11];let p;e[12]!==o||e[13]!==f?(p=()=>{f(),o()},e[12]=o,e[13]=f,e[14]=p):p=e[14];let g;return e[15]!==i||e[16]!==m||e[17]!==p?(g=r.jsx("input",{type:"text",defaultValue:i,ref:l,onClick:r6e,onKeyDown:m,onFocus:a6e,onBlur:p,autoFocus:!0,className:"w-full border-none bg-transparent p-0 text-sm focus:ring-0"}),e[15]=i,e[16]=m,e[17]=p,e[18]=g):g=e[18],g}function a6e(t){var e;(e=t.currentTarget)==null||e.select()}function r6e(t){t.preventDefault()}const Qw=R(()=>P(()=>import("./hgosijqu5mbj1kgl.js"),__vite__mapDeps([332,1])),{loading:t=>O(t)}),QD=R(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([151,1])),{loading:t=>O(t)}),JD=R(()=>P(()=>Promise.resolve().then(()=>Zue),void 0).then(t=>t.GizmoConversationOptionsDropdown)),i6e=new Date(2024,9,11,0);function l6e(t){B.logEvent("Load Thread",{threadId:t})}function UQe(t){"use forget";const e=G.c(11),{conversation:n,onOpenChange:s,testId:o,inMainScreen:a,isActiveConversation:i}=t,l=a===void 0?!1:a,c=ne(),d=V();if(!tt(d))return null;let f;e[0]!==c?(f=c.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),e[0]=c,e[1]=f):f=e[1];let m;e[2]!==f||e[3]!==o?(m=r.jsx(Gf,{"data-testid":o,className:"m-0","data-prevent-default":!0,"aria-label":f,icon:QD}),e[2]=f,e[3]=o,e[4]=m):m=e[4];let p;return e[5]!==n||e[6]!==l||e[7]!==i||e[8]!==s||e[9]!==m?(p=r.jsx(JD,{conversation:n,onOpenChange:s,inMainScreen:l,isActiveConversation:i,children:m}),e[5]=n,e[6]=l,e[7]=i,e[8]=s,e[9]=m,e[10]=p):p=e[10],p}const G1=_.memo(c6e);function c6e(t){"use forget";var an,Qt,_n,rn;const e=G.c(117),{conversation:n,className:s,hideOverflowMenu:o,isActive:a,elementRef:i,testId:l,onSelect:c,icon:d,isStarred:u}=t,f=o===void 0?!1:o,m=ne(),p=V(),[g,h]=_.useState(!1),x=Cn(),v="owner"in n?(an=n.owner)==null?void 0:an.user_id:null,y=v==null||v===(x==null?void 0:x.normalizedAccountUserId);let b;e[0]!==p?(b=ye(p,"232791851"),e[0]=p,e[1]=b):b=e[1];const C=b;let S,k;e[2]!==n.async_status||e[3]!==n.id||e[4]!==p?(S=()=>{if(n.id!=null&&n.async_status!=null){const Nt=yt(p,n.id);XE(Nt,{source:ns.SERVER,value:n.async_status})}},k=[p,n.id,n.async_status],e[2]=n.async_status,e[3]=n.id,e[4]=p,e[5]=S,e[6]=k):(S=e[5],k=e[6]),_.useEffect(S,k);let E;e[7]!==n.id||e[8]!==p?(E=()=>{if(n.id===void 0)return null;const Nt=yt(p,n.id);return Ci(Nt)},e[7]=n.id,e[8]=p,e[9]=E):E=e[9];const T=E;let M;e[10]!==T?(M=()=>{var Nt,Et;return(Et=(Nt=T())==null?void 0:Nt.value)!=null?Et:null},e[10]=T,e[11]=M):M=e[11];const A=M;let I;e[12]!==T?(I=()=>{var Nt,Et;return(Et=(Nt=T())==null?void 0:Nt.source)!=null?Et:null},e[12]=T,e[13]=I):I=e[13];const N=I,L=Ve(n.id,he.getRequestId);let D;e[14]!==p||e[15]!==L?(D=()=>kW(p,L),e[14]=p,e[15]=L,e[16]=D):D=e[16];const F=D;let $;e[17]!==n.update_time?($=ev(new Date,new Date((Qt=n.update_time)!=null?Qt:0)),e[17]=n.update_time,e[18]=$):$=e[18];const H=$<zD(WD.Standard,p);let z;e[19]!==n.update_time?(z=n.update_time&&CW(new Date(n.update_time),i6e),e[19]=n.update_time,e[20]=z):z=e[20];const K=z;let J;e[21]!==A||e[22]!==H?(J=()=>(A()===Xt.STREAMING||A()===Xt.REALTIME)&&H,e[21]=A,e[22]=H,e[23]=J):J=e[23];const Z=J;let q;e[24]!==A||e[25]!==K||e[26]!==p||e[27]!==a||e[28]!==F||e[29]!==C?(q=()=>!!(C&&!a&&!F()&&K&&A()===Xt.UNREAD&&!hn(p)),e[24]=A,e[25]=K,e[26]=p,e[27]=a,e[28]=F,e[29]=C,e[30]=q):q=e[30];const se=q;let ie;e[31]!==Z||e[32]!==a||e[33]!==F||e[34]!==C?(ie=()=>C&&!a&&(F()||Z()),e[31]=Z,e[32]=a,e[33]=F,e[34]=C,e[35]=ie):ie=e[35];const ee=ie,le=C&&!a;let X;e[36]!==Z||e[37]!==a||e[38]!==F||e[39]!==ee||e[40]!==C?(X=()=>!ee()&&C&&!a&&(F()||Z()),e[36]=Z,e[37]=a,e[38]=F,e[39]=ee,e[40]=C,e[41]=X):X=e[41];const te=X,ce=KD(n.id)&&!a,ue=_.useRef(!1);let me,xe;e[42]!==N||e[43]!==A||e[44]!==n.id||e[45]!==p||e[46]!==a||e[47]!==F?(me=()=>{if(!ue.current&&ye(p,"3922476776"))return a?Ea(()=>(F(),A()===Xt.UNREAD),async Nt=>{Nt&&(N()===ns.SERVER&&(ue.current=!0,await ge.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:n.id}},requestBody:{status:null}})),Is(n.id,null),ue.current=!1)},{fireImmediately:!0}):Ea(()=>(F(),N()===ns.CLIENT&&A()===Xt.UNREAD),async Nt=>{Nt&&(ue.current=!0,await ge.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:n.id}},requestBody:{status:A()}}),Is(n.id,{value:Xt.UNREAD,source:ns.SERVER}),ue.current=!1)})},xe=[p,a,n.id,A,N,F],e[42]=N,e[43]=A,e[44]=n.id,e[45]=p,e[46]=a,e[47]=F,e[48]=me,e[49]=xe):(me=e[48],xe=e[49]),_.useEffect(me,xe);let pe,Ee;e[50]!==n.id||e[51]!==a||e[52]!==y?(pe=()=>L8(MP,{editTitle:Nt=>{const{serverThreadId:Et}=Nt;y&&(Et?Et===n.id:a)&&h(!0)}}),Ee=[n.id,a,y],e[50]=n.id,e[51]=a,e[52]=y,e[53]=pe,e[54]=Ee):(pe=e[53],Ee=e[54]),_.useEffect(pe,Ee);let Se;e[55]!==n.conversation_template_id||e[56]!==p?(Se=()=>{var Nt,Et;if(n.conversation_template_id!=null)return(Et=(Nt=EW(p).data)==null?void 0:Nt.gizmos.find(pn=>pn.resource.gizmo.id===n.conversation_template_id))==null?void 0:Et.resource},e[55]=n.conversation_template_id,e[56]=p,e[57]=Se):Se=e[57];const Te=ae(Se),Ne=_.useRef(null);let De;e[58]!==Te||e[59]!==n.gizmo_id?(De=SW(n.gizmo_id)&&Te?Te.gizmo:void 0,e[58]=Te,e[59]=n.gizmo_id,e[60]=De):De=e[60];const de=De,oe=n.gizmo_id&&js(n.gizmo_id)&&"owner"in n?{id:n.gizmo_id}:void 0,we="owner"in n?(_n=n.owner)==null?void 0:_n.user_id:void 0,Ce=(rn=et(p))==null?void 0:rn.normalizedAccountUserId,fe=Z4e(),re=_.useRef(null),ve=Io;let Me;e[61]!==n.gizmo_id||e[62]!==fe||e[63]!==g||e[64]!==u?(Me=!g&&fe&&rx(n.gizmo_id,u),e[61]=n.gizmo_id,e[62]=fe,e[63]=g,e[64]=u,e[65]=Me):Me=e[65];let $e;e[66]!==n||e[67]!==u?($e=Nt=>{var ao;if(!rx(n.gizmo_id,u))return;const Et=Nt.currentTarget,pn=Ne.current;pn&&(pn.style.display="none"),Et.style.opacity="0.99",pn&&requestAnimationFrame(()=>{pn.style.display="",Et.style.opacity="0"}),Nt.dataTransfer.effectAllowed="move",q4e({kind:"conversation",conversation:n,gizmoId:(ao=n.gizmo_id)!=null?ao:null})},e[66]=n,e[67]=u,e[68]=$e):$e=e[68];const Le=d6e;let Ae;e[69]!==i?(Ae=db(i,re),e[69]=i,e[70]=Ae):Ae=e[70];const He=Vo(n.id,{gizmo:de?{gizmo:de}:void 0,project:oe||void 0,ownerUserId:we,accountUserId:Ce});let Qe;e[71]!==n.id||e[72]!==a||e[73]!==c?(Qe=Nt=>{Nt.metaKey||Nt.ctrlKey||!a&&!Nt.defaultPrevented&&(l6e(n.id),c==null||c())},e[71]=n.id,e[72]=a,e[73]=c,e[74]=Qe):Qe=e[74];let ht;e[75]===Symbol.for("react.memo_cache_sentinel")?(ht=()=>{h(!0)},e[75]=ht):ht=e[75];const at=!!u;let vt;e[76]!==le||e[77]!==n.id||e[78]!==a||e[79]!==g||e[80]!==ee||e[81]!==se||e[82]!==at?(vt=r.jsx(u6e,{conversationId:n.id,isActive:a,isEditingTitle:g,isStarred:at,canShowAsyncTaskProgressCircle:le,shouldShowUnreadNotification$:se,shouldShowLoadingSpinner$:ee}),e[76]=le,e[77]=n.id,e[78]=a,e[79]=g,e[80]=ee,e[81]=se,e[82]=at,e[83]=vt):vt=e[83];let $t;e[84]!==n||e[85]!==f||e[86]!==m||e[87]!==a||e[88]!==g||e[89]!==l?($t=!f&&!g&&r.jsx(JD,{conversation:n,isActiveConversation:a,onOpenChange:Nt=>{Nt&&B.logEvent("Conversation History Item Open Menu",{conversationId:n.id})},children:r.jsx(Gf,{ref:Ne,"data-testid":"".concat(l,"-options"),"aria-label":m.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),icon:QD})}),e[84]=n,e[85]=f,e[86]=m,e[87]=a,e[88]=g,e[89]=l,e[90]=$t):$t=e[90];let Ct;e[91]!==n||e[92]!==g||e[93]!==te?(Ct=!g&&r.jsx(t6e,{clientThreadId:n.id,historyConversationResponse:n,shouldShowLoadingShimmer$:te}),e[91]=n,e[92]=g,e[93]=te,e[94]=Ct):Ct=e[94];let Vt;e[95]!==n.id||e[96]!==ce?(Vt=ce&&r.jsx(ZD,{threadId:n.id}),e[95]=n.id,e[96]=ce,e[97]=Vt):Vt=e[97];let qt;e[98]!==n||e[99]!==g?(qt=g?r.jsx(o6e,{conversationId:n.id,historyConversationResponse:n,onClose:()=>{h(!1)}}):null,e[98]=n,e[99]=g,e[100]=qt):qt=e[100];let en;return e[101]!==ve||e[102]!==s||e[103]!==d||e[104]!==a||e[105]!==Me||e[106]!==$e||e[107]!==Le||e[108]!==Ae||e[109]!==He||e[110]!==Qe||e[111]!==vt||e[112]!==$t||e[113]!==Ct||e[114]!==Vt||e[115]!==qt?(en=r.jsxs(ve,{icon:d,draggable:Me,onDragStart:$e,onDragEnd:Le,ref:Ae,active:a,className:s,to:He,onClick:Qe,onDoubleClick:ht,trailing:vt,highlightTrailing:$t,label:Ct,children:[Vt,qt]}),e[101]=ve,e[102]=s,e[103]=d,e[104]=a,e[105]=Me,e[106]=$e,e[107]=Le,e[108]=Ae,e[109]=He,e[110]=Qe,e[111]=vt,e[112]=$t,e[113]=Ct,e[114]=Vt,e[115]=qt,e[116]=en):en=e[116],en}function d6e(t){t.currentTarget.style.opacity="",Y4e()}function u6e(t){"use forget";const e=G.c(8),{conversationId:n,isActive:s,isEditingTitle:o,isStarred:a,shouldShowUnreadNotification$:i,canShowAsyncTaskProgressCircle:l,shouldShowLoadingSpinner$:c}=t,d=wW(n),u=ae(i),f=ae(c);let m;return e[0]!==l||e[1]!==d||e[2]!==s||e[3]!==o||e[4]!==a||e[5]!==f||e[6]!==u?(m=!o&&((!s&&u?a?r.jsx(Qw,{className:"icon-xs text-blue-500"}):r.jsx(cN,{color:"blue"}):l&&d.length>0?r.jsx(U4e,{task:d[0]}):!s&&f?r.jsx(cle,{size:16,backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10"}):null)||(a?r.jsx(Qw,{className:"icon-xs text-token-icon-tertiary opacity-50"}):null)),e[0]=l,e[1]=d,e[2]=s,e[3]=o,e[4]=a,e[5]=f,e[6]=u,e[7]=m):m=e[7],m}function f6e({systemHints:t,isN7jupdActive:e}){const n=it.agentSessionMode$();if(!e)return;const s=t.includes(Pe.Agent);if(!(n!=="incognito"||!s))return{n7jupd_local_safe_mode:!0}}let my=null;function $Qe(t){my=t}function m6e(t){return my?my(t):t}function XD(t){switch(t.content.content_type){case ut.Text:return t.content.parts.join("");case ut.Code:return t.content.text;default:return""}}const Jw=new WeakMap,Kg=new WeakMap,Xw=t=>{const e=Jw.get(t);if(e)return e;try{const n=t!=null&&t.widget_state?JSON.parse(t.widget_state):void 0;return Jw.set(t,n),n}catch(n){return null}},p6e=t=>{var n;const e=Kg.get(t);if(e)return e;try{const s=XD(t),o=s&&(n=JSON.parse(s))!=null?n:void 0;return Kg.set(t,o),o}catch(s){return null}},g6e=t=>{const e=Kg.get(t);if(e)return e;try{const n=XD(t),[s]=Yu(n,Go({path:ms,args:o=>{const[a]=Yu(ms(o),mT);return a!=null?a:{}}}));return s?(Kg.set(t,s),s):null}catch(n){return null}},W1=t=>{var e;return(e=t.resource_name)!=null?e:""},h6e=t=>{var e;return(e=t.resolved_pineapple_uri)!=null?e:""},e7="api_tool",U5=t=>t.filter(e=>{var n,s;return e.author.role===Ke.Assistant&&!!((n=e.recipient)!=null&&n.startsWith(e7))||e.author.role===Ke.Tool&&!!((s=e.author.name)!=null&&s.startsWith(e7))}),a2=t=>{var e;if(t){if("metadata"in t)return(e=t.metadata)==null?void 0:e.chatgpt_sdk;if("chatgpt_sdk"in t)return t.chatgpt_sdk}else return},eF=TW(_6e);function _6e(t){var m,p,g,h,x,v,y,b,C,S;const e=U5(t),n=e.find(k=>k.author.role===Ke.Assistant),s=e.findLast(k=>k.author.role===Ke.Tool&&!!a2(k)),o=a2(n),a=a2(s);let i=o;a&&(i=w(w({},i),a)),i=Qs(i);const l=W1(i),c=h6e(i),d=()=>n?g6e(n):null,u=()=>s?p6e(s):null,f=(m=i.tool_response_metadata)!=null?m:null;return new Proxy({isComplete:!!s&&!!n,invocationUuid:(p=i.invocation_uuid)!=null?p:null,turnUuid:(g=i.turn_uuid)!=null?g:null,distributionChannel:(h=i.distribution_channel)!=null?h:MW.EXTERNAL,sessionId:(x=i.session_id)!=null?x:null,connectorId:(v=i.attribution_id)!=null?v:"",isError:(y=i.is_error)!=null?y:!1,messages:t,widgetId:(C=(b=s==null?void 0:s.id)!=null?b:n==null?void 0:n.id)!=null?C:"",toolMessageId:(S=s==null?void 0:s.id)!=null?S:null,metadata:i,widgetType:l,widgetParent:c,toolResponseMetadata:f,toolInput:null,toolOutput:null,path:null},{get(k,E){var T,M,A,I,N,L;if(E==="path")return(M=(T=d())==null?void 0:T.path)!=null?M:null;if(E==="toolInput")return(I=(A=d())==null?void 0:A.args)!=null?I:null;if(E==="toolOutput")return(N=u())!=null?N:null;if(E in k)return(L=Object.getOwnPropertyDescriptor(k,E))==null?void 0:L.value}})}const x6e=t=>U5(t).some(e=>{var n;return!!((n=e.metadata)!=null&&n.chatgpt_sdk)}),y6e=t=>{var e,n;return t?{isTrusted:!0,connectDomains:(e=t.connect_domains)!=null?e:[],resourceDomains:(n=t.resource_domains)!=null?n:[]}:null},py=t=>{if(!t)return null;try{return new URL(t).hostname.replaceAll(".","-")}catch(e){return t.startsWith("http")?null:py("https://".concat(t))}},Wp=(t,e)=>{var o,a,i,l,c,d,u,f,m,p,g,h,x;const n=(a=(o=e==null?void 0:e.domain)!=null?o:t.metadata.widget_domain)!=null?a:null,s=(l=py(n))!=null?l:py((i=t.metadata.resolved_pineapple_uri)!=null?i:null);return{domain:n,subdomain:s,name:(c=e==null?void 0:e.name)!=null?c:null,html:(d=e==null?void 0:e.html)!=null?d:null,logoUrl:(u=e==null?void 0:e.logo_url)!=null?u:null,csp:e!=null&&e.csp?y6e(e.csp):null,prefersBorder:(m=(f=e==null?void 0:e.prefers_border)!=null?f:t.metadata.prefers_border)!=null?m:!1,hideWidgetActions:((g=(p=e==null?void 0:e.hide_widget_feedback)!=null?p:t.metadata.hide_widget_feedback)!=null?g:!1)||((x=(h=e==null?void 0:e.hide_widget_actions)!=null?h:t.metadata.hide_widget_actions)!=null?x:!1)}},v6e="oai-ecosys-db",Fr="resolved-widget-cache",b6e=10;class C6e{constructor(e){Q(this,"db");Q(this,"openDB",mu({name:"open_db"},()=>new Promise((e,n)=>{const s=indexedDB.open(v6e,1);s.onupgradeneeded=()=>{const o=s.result;o.objectStoreNames.contains(Fr)||o.createObjectStore(Fr,{keyPath:"key"}).createIndex("lastAccess","lastAccess")},s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})));Q(this,"getDB",mu({name:"get_db"},async()=>{const e=await this.db;return!e||e.close===void 0||e.version===0?(this.db=this.openDB(),this.db):e}));Q(this,"get",mu({name:"get"},async e=>{const n=await this.getDB();return n?new Promise((s,o)=>{const i=n.transaction(Fr,"readwrite").objectStore(Fr),l=i.get(e);l.onsuccess=()=>{if(l.result==null)return s(null);const c=pT(l.result,{key:()=>e,domain:tc(ms),subdomain:tc(ms),name:tc(ms),html:tc(ms),logoUrl:tc(ms),csp:tc(Go({isTrusted:Vu,connectDomains:a6,resourceDomains:a6})),prefersBorder:Vu,hideWidgetActions:Vu,lastAccess:w8});c.lastAccess=Date.now(),i.put(c),s(c)},l.onerror=()=>o(l.error)}):null}));Q(this,"set",mu({name:"set"},async(e,n)=>{const s=await this.getDB();if(!s)return;const a=s.transaction(Fr,"readwrite").objectStore(Fr);a.put(U(w({},n),{key:e,lastAccess:Date.now()})),await new Promise((i,l)=>{const c=a.count();c.onsuccess=()=>{if(c.result>b6e){const f=a.index("lastAccess").openCursor();f.onsuccess=()=>{const m=f.result;m&&a.delete(m.primaryKey),i()},f.onerror=()=>l(f.error);return}i()},c.onerror=()=>l(c.error)})}));Q(this,"delete",mu({name:"delete"},async e=>{const n=await this.getDB();if(!n)return;const o=n.transaction(Fr,"readwrite").objectStore(Fr);await new Promise((a,i)=>{const l=o.delete(e);l.onsuccess=()=>a(),l.onerror=()=>i(l.error)})}));this.ctx=e,this.db=this.openDB()}}const mu=({name:t},e)=>async(...n)=>{try{return await e(...n)}catch(s){return P(async()=>{const{DatadogLogger:o}=await import("./kw08ajijqinojrwh.js").then(a=>a.yp);return{DatadogLogger:o}},__vite__mapDeps([10,1,11])).then(({DatadogLogger:o})=>{o.addError(s)}),P(async()=>{const{statsc:o,Namespace:a}=await import("./kw08ajijqinojrwh.js").then(i=>i.yq);return{statsc:o,Namespace:a}},__vite__mapDeps([10,1,11])).then(({statsc:o,Namespace:a})=>{o.count(a.ECOSYSTEM,"resolved_widget_cache.".concat(t,".error"))}),null}},S6e=Wn(t=>new C6e(t)),w6e=({metadata:t})=>t.html_asset_pointer,tF=({metadata:t,path:e})=>["htmlAsset",t.resolved_pineapple_uri,t.html_asset_pointer,e],k6e=(t,e)=>{var n;return Wp(e,(n=t.getQueryData(tF(e)))!=null?n:null)},VQe=t=>{"use no forget";const e=V(),n=S6e(e),s=w6e(t),{path:o}=t,{html_asset_pointer:a,resolved_pineapple_uri:i}=t.metadata,l=tF(t),{data:c,isLoading:d}=rt({queryKey:["resolvedWidgetCache",s],queryFn:()=>s?n.get(s):Promise.resolve(null),enabled:!!s,staleTime:1/0,gcTime:1/0}),{data:u,isLoading:f,isError:m,refetch:p}=rt({queryKey:l,queryFn:async()=>{try{const h=await ge.safeGet("/ecosystem/widget",{parameters:{query:{uri:i!=null?i:"",template_pointer:a!=null?a:"",resource_path:o!=null?o:""}}});if(s){const x=Wp(t,h);n.set(s,x)}return h}catch(h){throw s&&h instanceof $n&&h.status===404&&n.delete(s),h}},gcTime:0,enabled:l.every(Boolean)}),g=w(w(w({},Wp(t,null)),c!=null?c:void 0),u?Wp(t,u):{});return U(w({},g),{refetch:p,isLoading:f&&(!c||d),isError:m})};var kf,Zc,Kc,dh;class E6e{constructor(e){Q(this,"requestBlockingPromiseListener",null);Q(this,"subscriptionEffect",null);Q(this,"showLoadingBar$",Be(!1));Q(this,"transitioningId$",Be(null));Q(this,"pinnedChatSDK$",Be(null));Q(this,"pinnedChatSDKId$",St(()=>{var e,n;return(n=(e=this.pinnedChatSDK$())==null?void 0:e.widgetId)!=null?n:null}));Q(this,"pinnedWidgetType$",St(()=>{var n;const e=(n=this.pinnedChatSDK$())==null?void 0:n.metadata;return e?W1(e):null}));Q(this,"conversationChatSDKEntries$",St(()=>el(this.conversation).map(({messages:n})=>x6e(n)?eF(n):null).filter(n=>n!=null),{equals:El}));Q(this,"widgetStateCache$",Be(new Map,{equals:()=>!1}));Q(this,"conversationTurnSnapshot$",St(()=>this.hasPinnedWidget$()?wn(()=>el(this.conversation)):[]));Q(this,"hasPinnedWidget$",St(()=>this.pinnedWidgetType$()!=null));Q(this,"displayMode$",Be("inline"));Q(this,"title$",Be(null));ro(this,kf,Be(null));Q(this,"maxWidgetHeight$",St(()=>{const{height:e}=YI(this.conversation.ctx);if(this.displayMode$()!=="inline")return this.displayMode$()==="pip"?e/2-38:void 0}));ro(this,Zc,new Set);ro(this,Kc,new Map);Q(this,"closedWidgetIds$",Be(new Set,{equals:()=>!1}));Q(this,"pinnedWidgetHeight$",St(()=>{const e=this.maxWidgetHeight$(),n=this.pinnedWidgetType$(),s=Tn(this,kf).call(this);return n?Math.min(e!=null?e:0,s!=null?s:0):null}));ro(this,dh,e=>mi(async n=>{const s=this.conversation.serverId$();if(s)try{await ge.safePost("/ecosystem/widget_state",{requestBody:{conversation_id:s,message_id:e,state:JSON.stringify(n)}})}catch(o){}finally{Tn(this,Zc).delete(e)}},2e3));Q(this,"getLatestChatSDK$",e=>{const n=this.pinnedWidgetType$();if(!n||n!==e.widgetType)return e;const s=el(this.conversation);return t7(e,s,n)});this.conversation=e,this.requestBlockingPromiseListener=dZ(async()=>{await Promise.all(Tn(this,Kc).values().map(n=>n.flush()))},()=>Tn(this,Zc).size>0)}subscribeToNewMessages$(e,n){this.subscriptionEffect&&this.subscriptionEffect(),this.subscriptionEffect=Dl(()=>{const s=this.pinnedWidgetType$();if(!s)return;const o=this.conversationTurnSnapshot$(),i=el(this.conversation).slice(o.length);if(i.length===0)return;const l=t7(e,i,s);n(c=>{var u,f;return!c||l.toolOutput!=null?l:U(w({},l),{toolResponseMetadata:(u=l.toolResponseMetadata)!=null?u:c.toolResponseMetadata,toolOutput:(f=l.toolOutput)!=null?f:c.toolOutput})})})}setPinnedWidgetHeight(e){Tn(this,kf).set(e)}isPinned$(e){return this.pinnedWidgetType$()===e.widgetType}isPinOrigin$(e){return this.pinnedChatSDKId$()===e.widgetId}setDisplayMode$(e,n,s){Co(()=>{this.displayMode$.set(n),n==="fullscreen"?s&&this.title$.set(s):this.title$.set(null),n==="pip"||n==="fullscreen"?this.pinnedChatSDK$.set(e):this.pinnedChatSDK$.set(null)})}setWidgetState$(e,n){this.widgetStateCache$.set(this.widgetStateCache$().set(e,n));let s=Tn(this,Kc).get(e);s||(s=Tn(this,dh).call(this,e),Tn(this,Kc).set(e,s)),Tn(this,Zc).add(e),s(n)}closeWidget$(e,n){const s=this.conversation.serverId$();s&&(this.closedWidgetIds$.set(this.closedWidgetIds$().add(e)),ge.safePost("/ecosystem/widget_close",{requestBody:{conversation_id:s,message_id:e,close_reason:n}}))}callTool$(e,n,s){return ge.safePost("/ecosystem/call_mcp",{requestBody:{app_uri:e,tool_name:n,tool_input:s}})}getWidgetState$(e){var o,a;const n=(o=this.widgetStateCache$().get(e.widgetId))!=null?o:Xw(e.metadata);if(n!=null||e.sessionId==null)return n;const s=this.conversationChatSDKEntries$();for(let i=s.length-1;i>=0;i--){const l=s[i],c=(a=this.widgetStateCache$().get(l.widgetId))!=null?a:Xw(l.metadata);if(l.widgetId!==e.widgetId&&l.sessionId===e.sessionId&&c!=null)return c}return null}getWidgetStateAndProps$(e){const{toolInput:n,toolOutput:s,toolResponseMetadata:o}=e;return{toolInput:n,toolOutput:s,toolResponseMetadata:o,widgetState:this.getWidgetState$(e)}}fullscreenWidgetPlaceholder$(e){if(this.displayMode$()!=="fullscreen")return null;const n=this.pinnedChatSDK$();if(!n)return null;const s=k6e(Jo(this.conversation.ctx),n);return s!=null&&s.name?e.formatMessage(Ge({id:"oECdDM",defaultMessage:"Ask {name}"}),{name:s.name}):null}}kf=new WeakMap,Zc=new WeakMap,Kc=new WeakMap,dh=new WeakMap;const T6e=Af(t=>new E6e(t)),t7=(t,e,n)=>{var s,o;for(let a=e.length-1;a>=0;a--){const i=e[a];for(let l=i.messageGroups.length-1;l>=0;l--){const c=i.messageGroups[l];if(c.type===rr.JITPlugin)for(let d=c.messages.length-1;d>=0;d--){const u=c.messages[d];if((s=u.metadata)!=null&&s.chatgpt_sdk&&n===W1((o=u.metadata)==null?void 0:o.chatgpt_sdk))return eF(c.messages)}}}return t};function HQe(){return!1}const M6e={apps:[],selectedApps:[]},GQe=Dt(Nf(In(()=>M6e))),A6e=async t=>{var n;const e=t.map(s=>s.id);if(e.length!==0)return(n=AW)==null?void 0:n.pairing.getContentForPairedApps(e)},WQe=async()=>{},zQe=({event:t,conversationMode:e,systemHints:n})=>{const{systemHints:s,extraStreamParams:o}=a1(n);return{sourceEvent:t,completionType:Xa.Continue,extraStreamParams:o,completionMetadata:{conversationMode:e,systemHints:s}}};function I6e(t){if(t===Pe.Research)return"research";if(t===Pe.Agent)return"agent";if(t===Pe.Glaux)return"scout";if(t===Pe.Search)return"file_search"}const qQe=async({ctx:t,clientThreadId:e,attachments:n,content:s,contentToSend:o,conversationMode:a,hasSelectedApps:i,desktopOrigin:l,shouldCollectSidebarContext:c,desktopSidebarContext:d,isMessageFollowupsEnabled:u,selectedApps:f,selectedGizmoTag:m,selectedRepos:p,selectedSources:g,selectedMCPConnectors:h,selectedConnectorIds:x,selectedSyncKnowledgeStoreIds:v,searchConnectorIds:y,noFullActionConnectorIds:b,startedWithByoMcp:C,sourceEvent:S,systemHints:k,allSystemHints:E,usedDictation:T,dictationEdited:M,dictationOriginalText:A,dictationAssetPointer:I,dictationAssetTTL:N,dictationAssetFormat:L,isN7jupdActive:D,isForceAllowCustomMcpModeEnabled:F,thinkingEffort:$})=>{var we,Ce,fe;const H=u5({namespace:hm.CompletionRequest,opts:{expectedTimingLogs:[{name:"prompt_submitted",expectedInMs:3e3}],debug:!1}});H.reset();const z=[],{targetedContent:K}=vm.getState();if(i){const re=await A6e(f);re&&z.push(IW(re))}const J=new Map;E.forEach(re=>J.set(re.systemHint,re)),(C||h&&h.some(re=>re.status==="ONLY_ME")||k.some(re=>{var ve;return(ve=J.get(re))==null?void 0:ve.isDangerous}))&&z.push(s3("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));const Z=[],{rebaseSystemMessageContent:q}=rg.getState();q&&Z.push(jW(q));const se=w({},a);"gizmo"in se&&delete se.gizmo;let ie=se;if(l){const re=it.newConversationGizmoId$();re&&(ie={kind:wt.GizmoInteraction,gizmo_id:re},it.newConversationGizmoId$.set(void 0))}const ee=k.includes(Pe.Search),le=k.includes(Pe.Research),X=k.includes(Pe.Agent),te=k.includes(Pe.Glaux),ce=k.includes(Pe.Slurm),ue=k.length===0,me=ee?of.CONVERSATION_COMPOSER_WEB_ICON:void 0,xe=S2e(),pe=Kh(),Ee=Intl.DateTimeFormat().resolvedOptions().timeZone,Se=l?f6e({systemHints:k,isN7jupdActive:D}):void 0,Te=Object.keys(pe).length>0,Ne=(we=T6e(yt(t,e)).pinnedChatSDK$())==null?void 0:we.toolMessageId,De=ls(s,w(w(w(w(w(w(w(w(w(w(w(w(w(w({},n.length>0&&{attachments:n}),m&&{gizmo_id:m.gizmo.id}),g&&{caterpillar_selected_sources:le?xi(g):void 0,developer_mode_connector_ids:h==null?void 0:h.map(re=>re.id),selected_mcp_sources:le||ce||te||D&&F?h:void 0,selected_connector_ids:x?Array.from(x):void 0,selected_sync_knowledge_store_ids:v?Array.from(v):void 0,selected_sources:ce||te||le||D||ue||X?xi(g,ce||te||ue):void 0}),p&&{selected_github_repos:[...(Ce=p.selectedRepos)!=null?Ce:[]],selected_all_github_repos:p.selectedAllRepos}),k.length>0&&{system_hints:k}),y&&y.length>0&&{search_connectors:y}),b&&b.length>0&&{no_full_action_connectors:b}),!!o.metadata&&{serialization_metadata:o.metadata}),Ne?{chatgpt_sdk_focused_message_id:Ne}:null),xe.length>0&&{canvas:{user_created_textdocs:xe.map(re=>({user_created_temp_textdoc_id:re.tempTextdocId,type:re.type,title:re.title,content:re.content,create_source:re.create_source,remix_shared_textdoc_id:re.remixSharedTextdocId}))}}),Te&&{__internal:{search_settings:Te?pe:void 0}}),T&&w(w(w(w(w({dictation:!0},M&&{dictation_edited:!0}),A&&{dictation_original_text:A}),I&&{dictation_asset_pointer:I}),N&&{dictation_asset_ttl:N}),L&&{dictation_asset_format:L})),(le||D)&&Ee&&{user_timezone:Ee}),l?w(w({},await $h(c&&d!=null?d:void 0,l,"user",k)),Se!=null?Se:{}):{}));let de={sourceEvent:S,completionMetadata:{conversationMode:ie,systemHints:k,searchSource:me},promptMessage:De,prependMessages:z,appendMessages:Z,thinkingEffort:$,profiler:H};const oe={};if(de=m6e(de),(fe=de.completionMetadata)!=null&&fe.systemHints){let re=!1;de.completionMetadata.systemHints=de.completionMetadata.systemHints.filter(ve=>ve===Pe.Search?(re=!0,!1):!0),re&&(oe.forceUseSearch=!0)}u&&(oe.enableMessageFollowups=!0),de.extraStreamParams=oe,K!=null&&K.createNewCompletionParams&&(de=await K.createNewCompletionParams(de));try{const re=k.length>0?I6e(k[0]):void 0;Cc.logSelectionChanged({selectedSources:g!=null?g:new Set,selectedMCPSources:h!=null?h:[],referrer:"composer_submit",triggerHint:re})}catch(re){}return H.logTimingOnce("request_params_ready"),de};var r2,n7;function j6e(){if(n7)return r2;n7=1;var t=tv(),e=/[\\^$.*+?()[\]{}|]/g,n=RegExp(e.source);function s(o){return o=t(o),o&&n.test(o)?o.replace(e,"\\$&"):o}return r2=s,r2}var N6e=j6e();const P6e=Gn(N6e),R6e=t=>{var l;const e=(l=t==null?void 0:t.filter(c=>{var d;return(d=c.keywordInvocations)==null?void 0:d.length}))!=null?l:[],n=e.flatMap(c=>c.keywordInvocations).filter(c=>typeof c=="string"),s=n.map(c=>P6e(c)),o=[];e.forEach(c=>{var d;(d=c.keywordInvocations)==null||d.forEach(u=>{o.push([u.toLowerCase(),c])})});const a=Object.fromEntries(o);let i;try{i=s.length>0?new RegExp("^(".concat(s.join("|"),")\\s+"),"ig"):void 0}catch(c){Re.addError("Error creating regex for ecosystem suggestions",{keywords:n,escapedKeywords:s})}return{keywordToSystemHintMap:a,regex:i}},L6e=t=>{"use forget";const e=G.c(25),{clientThreadId:n,composerController:s,availableSystemHints:o}=t,a=V();let i;e[0]!==a?(i=r6(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=ys(),d=O8(),u=nv(),f=D8(),m=_.useRef(void 0);let p;e:{if(!r6(a)){let k;e[2]===Symbol.for("react.memo_cache_sentinel")?(k={},e[2]=k):k=e[2],p=k;break e}let C;e[3]!==o?(C=R6e(o),e[3]=o,e[4]=C):C=e[4];let S;e[5]!==f||e[6]!==c||e[7]!==C?(S=U(w({},C),{activeSystemHintType:c,activeConnectorSystemTypes:f}),e[5]=f,e[6]=c,e[7]=C,e[8]=S):S=e[8],p=S}const g=p;let h,x;e[9]!==s||e[10]!==g||e[11]!==l?(h=()=>{l&&NW(Pt(s),g)},x=[s,g,l],e[9]=s,e[10]=g,e[11]=l,e[12]=h,e[13]=x):(h=e[12],x=e[13]),_.useEffect(h,x);let v,y;e[14]!==f||e[15]!==c||e[16]!==d||e[17]!==o||e[18]!==n||e[19]!==s||e[20]!==a||e[21]!==l||e[22]!==u?(v=()=>{if(!l)return;const b=C=>{var E;const S=Pt(s),{matches:k}=(E=RW.getState(S.state))!=null?E:{};return{matches:k}};return Ea(()=>b(ov(s)),C=>{const{matches:S}=C,k=m.current,E=new Set([...S!=null?S:[]].map(O6e));m.current=E;const T=[...S!=null?S:[]].filter(L=>{const{systemHintType:D}=L;return!(k!=null&&k.has(D))}),M=[...k!=null?k:[]].filter(L=>!E.has(L));if(!S)return;let A=T.map(L=>({systemHint:o==null?void 0:o.find(D=>D.systemHint===L.systemHintType),keyword:L.keyword}));const I=M.map(L=>o==null?void 0:o.find(D=>D.systemHint===L)),N=o==null?void 0:o.find(L=>L.systemHint===c);if(!(N&&!sv(N.systemHint))){if(A.length>0){if(!Ps(a,"2350526063").get("has_suggestions_enabled",!0))return;const $=Ps(a,"2993367469").get("connector_id",null);if(A=A.filter(H=>{const{systemHint:z}=H;if(!(z!=null&&z.isConnector))return!0;const K=PW(z.systemHint);return K?K!==$:!0}),A.length===0)return}A.forEach(L=>{const{systemHint:D,keyword:F}=L;D!=null&&D.isConnector&&!f.has(D.systemHint)&&(sd(D.systemHint,od.PrefixMatch,U(w({},En({clientThreadId:n})),{matched_keyword:F})),d(D.systemHint,{analyticsMetadata:{clientThreadId:n}}))}),I.forEach(L=>{L!=null&&L.isConnector&&f.has(L.systemHint)&&(sd(L.systemHint,od.PrefixRemove,w({},En({clientThreadId:n}))),u(L.systemHint,{analyticsMetadata:{clientThreadId:n}}))})}},{fireImmediately:!0,equals:El})},y=[s,n,d,u,o,c,f,l,a],e[14]=f,e[15]=c,e[16]=d,e[17]=o,e[18]=n,e[19]=s,e[20]=a,e[21]=l,e[22]=u,e[23]=v,e[24]=y):(v=e[23],y=e[24]),_.useEffect(v,y)};function O6e(t){const{systemHintType:e}=t;return e}function $5(t){const e=V(),n=ys(),s=ae(()=>t!=null&&nF(bn(yt(e,t)).id,n));return _.useMemo(()=>({isOdysseyMode:s}),[s])}function nF(t,e){return t===LW||_l(e)}const sF=t=>{"use forget";var L,D;const e=G.c(34),{clientThreadId:n}=t,s=ys(),o=Cn(),a=JT();let i;e[0]!==o||e[1]!==a?(i=(o==null?void 0:o.isPersonalAccount())&&a,e[0]=o,e[1]=a,e[2]=i):i=e[2];const l=!!i,c=$5(n).isOdysseyMode,d=c||s===Pe.Research,u=Of(),m=!!(u!=null&&u.softmentionEnabled)&&d;let p;e[3]!==m?(p={enabled:m},e[3]=m,e[4]=p):p=e[4];const{connectedTypes:g,linkIdToConnectedType:h}=w3(p);let x;e[5]!==m?(x={enabled:m},e[5]=m,e[6]=x):x=e[6];const{connectedTypes:v}=XT(x),{data:y}=e8();y==null||y.connection_statuses,u==null||u.connectorConfig;let b,C,S;if(e[7]!==s||e[8]!==(u==null?void 0:u.connectorConfig)||e[9]!==v||e[10]!==m||e[11]!==c||e[12]!==l||e[13]!==g||e[14]!==h||e[15]!==(y==null?void 0:y.connection_statuses)){const F=(L=y==null?void 0:y.connection_statuses.reduce(D6e,new Set))!=null?L:new Set;let $=g;if(s===Pe.Research||c)$=v;else{const q=(D=y==null?void 0:y.connection_statuses.reduce((se,ie)=>{if(["activated","partially_activated"].includes(ie.user_connection_details.activation_status)&&ie.user_connection_details.backing_link_id){const ee=h.get(ie.user_connection_details.backing_link_id);ee&&se.add(ee)}return se},new Set))!=null?D:new Set;$=new Set([...g].filter(se=>se===bt.GDRIVE_ACTION_CONNECTOR&&l&&F.has("gdrive_sync_connector")||q.has(se)?!1:!(se===bt.SHAREPOINT_CONNECTOR&&F.has("sharepoint_admin_sync_connector"))))}const H=(u==null?void 0:u.connectorConfig)||{},z={keywordSet:new Set,connectorToKeywordsMap:{},keywordsConnectorMap:{}},{keywordSet:K,connectorToKeywordsMap:J,keywordsConnectorMap:Z}=Object.entries(H).reduce((q,se)=>{const[ie,ee]=se;if($.has(ie)||F.has(ie)){const le=((ee==null?void 0:ee.keywords)||[]).map(F6e);q.connectorToKeywordsMap[ie]=le,le.forEach(X=>{q.keywordSet.add(X),q.keywordsConnectorMap[X]=ie})}return q},z);b=J,C=Z,S=m?Array.from(K):[],e[7]=s,e[8]=u==null?void 0:u.connectorConfig,e[9]=v,e[10]=m,e[11]=c,e[12]=l,e[13]=g,e[14]=h,e[15]=y==null?void 0:y.connection_statuses,e[16]=b,e[17]=C,e[18]=S}else b=e[16],C=e[17],S=e[18];let k;e[19]!==b||e[20]!==m?(k=m?b:{},e[19]=b,e[20]=m,e[21]=k):k=e[21];let E;e[22]!==m||e[23]!==C?(E=m?C:{},e[22]=m,e[23]=C,e[24]=E):E=e[24];let T;e[25]!==S||e[26]!==k||e[27]!==E?(T={filteredKeywords:S,connectorToKeywordsMap:k,keywordsConnectorMap:E},e[25]=S,e[26]=k,e[27]=E,e[28]=T):T=e[28];const{filteredKeywords:M,connectorToKeywordsMap:A,keywordsConnectorMap:I}=T;let N;return e[29]!==A||e[30]!==m||e[31]!==M||e[32]!==I?(N={enabled:m,keywords:M,connectorToKeywordsMap:A,keywordsConnectorMap:I},e[29]=A,e[30]=m,e[31]=M,e[32]=I,e[33]=N):N=e[33],N};function D6e(t,e){return["activated","partially_activated"].includes(e.user_connection_details.activation_status)&&t.add(e.user_connection_details.connection_type),t}function F6e(t){return t.toLowerCase()}const B6e=({clientThreadId:t,composerController:e})=>{const{mentionedSources:n,addMentionedSource:s,deleteMentionedSource:o}=La(t),a=ys(),{setThreadSystemHintMode:i}=oa(),l=$5(t).isOdysseyMode,c=_.useRef(l),{keywords:d,connectorToKeywordsMap:u,keywordsConnectorMap:f}=sF({clientThreadId:t});_.useEffect(()=>{F8(d,Pt(e))},[e,d]);const m=_.useRef(a);_.useEffect(()=>{const x=m.current;m.current=a;const v=Pt(e),y=c.current;if(c.current=l,y&&!l&&h_(__(v.state),v),(x===Pe.Slurm||x===Pe.Research)&&a==null){const b=__(v.state);h_(b,v),b.forEach(C=>o(f[C]))}},[a,e,o,l,f]);const p=_.useRef(n);_.useEffect(()=>{const x=p.current;if(p.current=n,!x)return;const v=Array.from(x).filter(b=>!(n!=null?n:new Set).has(b)),y=[];v.forEach(b=>{var C;y.push(...(C=u[b])!=null?C:[])}),h_(y,Pt(e))},[e,u,n]);const g=_.useRef([]),h=a!=null;_.useEffect(()=>{const x=y=>{if(g.current.length===0&&y.length>0&&!h){const S={clientThreadId:t};i(Pe.Slurm,!0,S)}const b=y.filter(S=>!g.current.includes(S)),C=g.current.filter(S=>!y.includes(S));b.forEach(S=>s(S)),C.forEach(S=>o(S)),g.current=y},v=y=>__(y).map(b=>f[b.toLowerCase()]);return Dl(()=>{x(OW(v(ov(e))))})},[s,t,e,o,f,h,i])},YQe=({clientThreadId:t,currentModelId:e,isCompletionInProgress:n,composerController:s,expireConduit:o,availableSystemHints:a})=>{const i=V(),l=ys(),c=Jy(y=>{var b,C;return(C=(b=y.threads[t])==null?void 0:b.prepareRequestBlocked)!=null?C:!1}),{isOpen:d}=jre();B6e({clientThreadId:t,composerController:s}),L6e({clientThreadId:t,composerController:s,availableSystemHints:a});const u=_.useRef(n);_.useEffect(()=>{u.current=n},[n]);const f=_.useRef(!1);_.useEffect(()=>{f.current=!1},[t]);const m=_.useCallback(y=>{u.current?o&&Ze(t,b=>{b.conduitToken=null,b.prepareState=null}):Ze(t,b=>{b.conduitToken=y,b.prepareState="success"})},[t,o]),p=_.useRef(null);p.current=()=>e&&SX(t,e,l?[l]:void 0,m,{isRegen:!1,isOnboardingConversation:d,delayAfterCompletion:!0});const g=_.useCallback(()=>{var y;return(y=p.current)==null?void 0:y.call(p)},[]),h=_.useCallback(b3(()=>g(),5e3,{leading:!0,trailing:!0}),[]),x=_.useRef(!1),v=av();return _.useEffect(()=>{if(v){if(!x.current){x.current=!0;return}u.current||c||f.current&&g()}},[v,t,e,l,c]),_.useEffect(()=>{h.cancel()},[n,h]),_.useEffect(()=>{if(!(n||!Qh(i,!0)))return Ea(()=>ov(s),()=>{f.current=!0,h()})},[n,s,h,i]),null},U6e="side_chat",ZQe="ntp",KQe="website";function QQe(t){"use forget";var d;const e=G.c(4),{clientThreadId:n,isKaur1br5Client:s}=t,o=EO(s?n:void 0);let a;e:{if(!o){a=null;break e}a=((d=o.metadata)==null?void 0:d.n7jupd_local_safe_mode)===!0?"incognito":"signedInAccounts"}const i=a;let l,c;return e[0]!==i||e[1]!==s?(l=()=>{s&&i&&it.agentSessionMode$()!==i&&it.agentSessionMode$.set(i)},c=[i,s],e[0]=i,e[1]=s,e[2]=l,e[3]=c):(l=e[2],c=e[3]),_.useEffect(l,c),o!=null}const $6e="signedInAccounts";function V6e(t){it.agentSessionMode$.set(t)}function H6e(t){it.agentSafeModeHasSeenNux$.set(t)}function oF(t){V6e(t);const e=Nd();e==null||e.updateAgentSafeMode(t)}function G6e(t){H6e(t);const e=Nd();e==null||e.updateAgentSafeModeHasSeenNux(t)}const ws=be({incognitoLabel:{id:"R+8byO",defaultMessage:"Start logged out"},incognitoDescription:{id:"Omk3s1",defaultMessage:"Let ChatGPT work alongside you logged out from your accounts."},incognitoMenuLabel:{id:"2E6cUi",defaultMessage:"Logged out"},signedInLabel:{id:"ajcZ1i",defaultMessage:"Start logged in"},signedInDescription:{id:"+aVek4",defaultMessage:"ChatGPT works alongside you using your logged in accounts."},signedInMenuLabel:{id:"dPv7uS",defaultMessage:"Logged in"},modalTitle:{id:"QvXNKA",defaultMessage:"Agent mode may introduce risk"},modalDescriptionIntroHeading:{id:"M46Qff",defaultMessage:"Agent mode may introduce risk."},modalDescriptionIntroBody:{id:"bwpgjC",defaultMessage:"In Agent mode, ChatGPT can perform complex tasks in the browser for you."},modalDescriptionLoggedInHeading:{id:"7YCY6E",defaultMessage:"Logged in:"},modalDescriptionLoggedInBody:{id:"6AOX4E",defaultMessage:'In "logged in" mode, ChatGPT can access your logged in sites, making it faster to complete tasks. ChatGPT is built to protect you, but there is always some risk that attackers could successfully break our safeguards to access your data, or take actions as you on logged in sites. You can use logged out mode to reduce risk.'},modalDescriptionLoggedOutHeading:{id:"seaiYG",defaultMessage:"Logged out:"},modalDescriptionLoggedOutBody:{id:"Gw4NKU",defaultMessage:'Use "logged out" mode to have Agent mode use sites without being logged in as you. You can still log ChatGPT agent into individual sites, allowing it to use just those sites logged in.'},modalIncognitoCta:{id:"JEr/J7",defaultMessage:"Start logged out"},modalSignedInCta:{id:"kGLOXd",defaultMessage:"Start logged in"},modalCancelCta:{id:"5anpHu",defaultMessage:"Cancel"}}),W6e=t=>({introHeading:t.formatMessage(ws.modalDescriptionIntroHeading),introBody:t.formatMessage(ws.modalDescriptionIntroBody),loggedInHeading:t.formatMessage(ws.modalDescriptionLoggedInHeading),loggedInBody:t.formatMessage(ws.modalDescriptionLoggedInBody),loggedOutHeading:t.formatMessage(ws.modalDescriptionLoggedOutHeading),loggedOutBody:t.formatMessage(ws.modalDescriptionLoggedOutBody)}),z6e=t=>["".concat(t.introHeading," ").concat(t.introBody),"".concat(t.loggedInHeading," ").concat(t.loggedInBody),"".concat(t.loggedOutHeading," ").concat(t.loggedOutBody)].join("\n\n"),q6e=R(()=>P(()=>import("./bzr9wyyo1msigqkj.js"),__vite__mapDeps([333,1])),{loading:t=>O(t)});function Y6e(t){"use forget";const e=G.c(35),{isOpen:n,onClose:s,onModeSelected:o}=t,a=ne(),i=ae(it.agentSessionMode$),l=i!=null?i:$6e,c=ae(it.agentSafeModeHasSeenNux$);let d,u,f;e[0]!==a?(d=W6e(a),u=a.formatMessage(ws.modalTitle),f=z6e(d),e[0]=a,e[1]=d,e[2]=u,e[3]=f):(d=e[1],u=e[2],f=e[3]);let m;e[4]!==a?(m=a.formatMessage(ws.modalIncognitoCta),e[4]=a,e[5]=m):m=e[5];let p;e[6]!==a?(p=a.formatMessage(ws.modalSignedInCta),e[6]=a,e[7]=p):p=e[7];let g;e[8]!==a?(g=a.formatMessage(ws.modalCancelCta),e[8]=a,e[9]=g):g=e[9];let h;e[10]!==d||e[11]!==u||e[12]!==f||e[13]!==m||e[14]!==p||e[15]!==g?(h={title:u,description:f,descriptionSections:d,incognitoCta:m,signedInCta:p,cancelCta:g},e[10]=d,e[11]=u,e[12]=f,e[13]=m,e[14]=p,e[15]=g,e[16]=h):h=e[16];const x=h;let v,y;e[17]!==c||e[18]!==n?(v=()=>{n&&c===!1&&G6e(!0)},y=[c,n],e[17]=c,e[18]=n,e[19]=v,e[20]=y):(v=e[19],y=e[20]),_.useEffect(v,y);let b;e[21]!==s||e[22]!==o?(b=k=>{oF(k),o==null||o(k),s()},e[21]=s,e[22]=o,e[23]=b):b=e[23];const C=b;let S;return e[24]!==C||e[25]!==n||e[26]!==x.cancelCta||e[27]!==x.description||e[28]!==x.descriptionSections||e[29]!==x.incognitoCta||e[30]!==x.signedInCta||e[31]!==x.title||e[32]!==l||e[33]!==s?(S=r.jsx(Z6e,{isOpen:n,onClose:s,selectedMode:l,onSelectMode:C,title:x.title,description:x.description,descriptionSections:x.descriptionSections,incognitoCta:x.incognitoCta,signedInCta:x.signedInCta,cancelCta:x.cancelCta}),e[24]=C,e[25]=n,e[26]=x.cancelCta,e[27]=x.description,e[28]=x.descriptionSections,e[29]=x.incognitoCta,e[30]=x.signedInCta,e[31]=x.title,e[32]=l,e[33]=s,e[34]=S):S=e[34],S}function Z6e(t){"use forget";const e=G.c(40),{isOpen:n,onClose:s,selectedMode:o,isSubmitting:a,onSelectMode:i,title:l,description:c,descriptionSections:d,incognitoCta:u,signedInCta:f,cancelCta:m}=t;let p;e[0]!==c||e[1]!==d?(p=d?r.jsxs("div",{className:"text-token-text-secondary space-y-3 text-sm md:text-base",children:[r.jsx("p",{children:d.introBody}),r.jsxs("p",{children:[r.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:d.loggedInHeading}),r.jsx("span",{children:d.loggedInBody})]}),r.jsxs("p",{children:[r.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:d.loggedOutHeading}),r.jsx("span",{children:d.loggedOutBody})]})]}):r.jsx("p",{className:"text-token-text-secondary text-sm whitespace-pre-line md:text-base",children:c}),e[0]=c,e[1]=d,e[2]=p):p=e[2];const g=p;let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("div",{className:"bg-token-main-surface-secondary flex h-12 w-12 items-center justify-center rounded-full",children:r.jsx(q6e,{className:"icon-xl text-token-text-primary"})}),e[3]=h):h=e[3];let x;e[4]!==l?(x=r.jsx("h2",{className:"text-token-text-primary text-lg font-semibold md:text-xl",children:l}),e[4]=l,e[5]=x):x=e[5];let v;e[6]!==g||e[7]!==x?(v=r.jsxs("div",{className:"flex flex-col gap-4",children:[h,r.jsxs("div",{className:"space-y-2",children:[x,g]})]}),e[6]=g,e[7]=x,e[8]=v):v=e[8];let y;e[9]!==m||e[10]!==a||e[11]!==s?(y=r.jsx(_e,{color:"secondary",onClick:s,disabled:a,className:"md:text-base",children:m}),e[9]=m,e[10]=a,e[11]=s,e[12]=y):y=e[12];let b;e[13]!==i?(b=()=>i("incognito"),e[13]=i,e[14]=b):b=e[14];const C=o==="incognito"&&"font-medium";let S;e[15]!==C?(S=W("md:text-base",C),e[15]=C,e[16]=S):S=e[16];let k;e[17]!==u||e[18]!==a||e[19]!==b||e[20]!==S?(k=r.jsx(_e,{color:"primary",onClick:b,disabled:a,className:S,children:u}),e[17]=u,e[18]=a,e[19]=b,e[20]=S,e[21]=k):k=e[21];let E;e[22]!==i?(E=()=>i("signedInAccounts"),e[22]=i,e[23]=E):E=e[23];const T=o==="signedInAccounts"&&"font-medium";let M;e[24]!==T?(M=W("md:text-base",T),e[24]=T,e[25]=M):M=e[25];let A;e[26]!==a||e[27]!==f||e[28]!==E||e[29]!==M?(A=r.jsx(_e,{color:"primary",onClick:E,disabled:a,className:M,children:f}),e[26]=a,e[27]=f,e[28]=E,e[29]=M,e[30]=A):A=e[30];let I;e[31]!==A||e[32]!==y||e[33]!==k?(I=r.jsxs("div",{className:"flex flex-col-reverse gap-2 md:flex-row md:justify-end",children:[y,k,A]}),e[31]=A,e[32]=y,e[33]=k,e[34]=I):I=e[34];let N;return e[35]!==n||e[36]!==s||e[37]!==I||e[38]!==v?(N=r.jsxs(Mt,{isOpen:n,onClose:s,testId:"modal-aura-agent-session-mode-nux",size:"xlarge",contentClassName:"flex flex-col gap-6 p-8",children:[v,I]}),e[35]=n,e[36]=s,e[37]=I,e[38]=v,e[39]=N):N=e[39],N}function JQe(t){"use forget";const e=G.c(11),{isAgentHintActive:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=yn(),e[0]=s):s=e[0];const o=s,a=ae(it.agentSafeModeHasSeenNux$),[i,l]=_.useState(!1),c=_.useRef(null),d=o&&n&&a!==!0;let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{l(!1),c.current=null},e[1]=u):u=e[1];const f=u;let m;e[2]!==d?(m=b=>d?(c.current=b,l(!0),!0):!1,e[2]=d,e[3]=m):m=e[3];const p=m;let g;e[4]===Symbol.for("react.memo_cache_sentinel")?(g=b=>{const C=c.current;if(c.current=null,!C)return;const S=()=>C(b);typeof queueMicrotask=="function"?queueMicrotask(S):Promise.resolve().then(S)},e[4]=g):g=e[4];const h=g;let x;e:{if(!o||!n||!i){x=null;break e}let b;e[5]!==i?(b=r.jsx(Y6e,{isOpen:i,onClose:f,onModeSelected:h}),e[5]=i,e[6]=b):b=e[6],x=b}const v=x;let y;return e[7]!==v||e[8]!==p||e[9]!==i?(y={agentSessionModeNuxModal:v,closeAgentSessionModeNux:f,ensureAgentSessionModeNux:p,isAgentSessionModeNuxOpen:i},e[7]=v,e[8]=p,e[9]=i,e[10]=y):y=e[10],y}function XQe(){const t=V(),[e,n]=Us(),s=yn();_.useEffect(()=>{if(!(!s||gi(t)))return Ea(()=>B8(t),o=>{let a;if(o==="mainPage"||o==="new_page_view")a=BW,DW(t);else if(o==="sidebar"||o==="sidebar_view")a=UW,FW(t);else return;e.get(a.name)!==a.value&&n(i=>{const l=new URLSearchParams(i);return l.set(a.name,a.value),l},{replace:!0})},{fireImmediately:!0})},[t,s,e,n])}function eJe(t){const e=V(),n=ts(e),{setTargetedContent:s}=vm();_.useEffect(()=>{if(n)return Mh(()=>it.wantsPopulatePrompt$(),()=>{it.wantsPopulatePrompt$.set(!1);const o=it.populatePrompt;o&&(o.userMessage&&yo(Pt(t),o.userMessage),setTimeout(()=>{s(o.targetedReply?{type:"text",label:o.targetedReply,createNewCompletionParams:a=>{if(!o.targetedReply)return a;const i=Rh(o.targetedReply);return U(w({},a),{promptMessage:qd(a.promptMessage,{metadata:{targeted_reply:o.targetedReply}}),appendMessages:a.appendMessages==null?[i]:[...a.appendMessages,i]})}}:void 0)},0))})},[n,t,s])}function K6e(t){"use forget";const e=G.c(26),{size:n,triggerIcon:s,triggerButton:o,children:a,side:i,className:l,triggerIconClassName:c,sideOffset:d,alignOffset:u,open:f,onOpenChange:m,alignAgainstAnchor:p,disableAutofocus:g,modal:h}=t,x=n===void 0?"default":n,v=i===void 0?"bottom":i,y=d===void 0?10:d,b=u===void 0?0:u,C=p===void 0?"center":p,S=g===void 0?!1:g,k=h===void 0?!1:h,E=$W();let T;e[0]!==s||e[1]!==o||e[2]!==c?(T=s?r.jsx(vr,{className:W("hover:bg-token-main-surface-secondary rounded-lg p-2",c),children:r.jsx(s,{className:"icon"})}):r.jsx(vr,{asChild:!0,children:o}),e[0]=s,e[1]=o,e[2]=c,e[3]=T):T=e[3];let M;e[4]!==S?(M=F=>{S&&F.preventDefault()},e[4]=S,e[5]=M):M=e[5];const A=x==="default";let I;e[6]!==l||e[7]!==A?(I=W({"max-w-xs min-w-[200px]":A},l),e[6]=l,e[7]=A,e[8]=I):I=e[8];let N;e[9]!==C||e[10]!==b||e[11]!==a||e[12]!==v||e[13]!==y||e[14]!==I||e[15]!==M?(N=r.jsx(Uh,{$as:Vl,side:v,sideOffset:y,alignOffset:b,align:C,collisionPadding:10,onOpenAutoFocus:M,className:I,children:a}),e[9]=C,e[10]=b,e[11]=a,e[12]=v,e[13]=y,e[14]=I,e[15]=M,e[16]=N):N=e[16];let L;e[17]!==E||e[18]!==N?(L=r.jsx($l,U(w({},E),{children:N})),e[17]=E,e[18]=N,e[19]=L):L=e[19];let D;return e[20]!==k||e[21]!==m||e[22]!==f||e[23]!==L||e[24]!==T?(D=r.jsxs(Ul,{open:f,onOpenChange:m,modal:k,children:[T,L]}),e[20]=k,e[21]=m,e[22]=f,e[23]=L,e[24]=T,e[25]=D):D=e[25],D}function V5(t){"use forget";const e=G.c(2);t.triggerIcon&&t.triggerButton;let n;return e[0]!==t?(n=r.jsx(K6e,w({},t)),e[0]=t,e[1]=n):n=e[1],n}function s7(t,e){return t.connector===e.connector&&t.type===e.type}const Q6e=()=>Dt((t,e)=>({_messages:[],_dismissedMessages:[],getFirstMessage:()=>{var s;return(s=e()._messages[0])!=null?s:null},appendMessageIfNotDismissed:n=>{t(s=>s._messages.some(o=>s7(o,n))||s._dismissedMessages.some(o=>s7(o,n))?s:U(w({},s),{_messages:[...s._messages,n]}))},dismissMessage:n=>{t(s=>s._messages.includes(n)?U(w({},s),{_messages:s._messages.filter(o=>o!==n),_dismissedMessages:[...s._dismissedMessages,n]}):s)},clearMessages:()=>{t(n=>n._messages.length||n._dismissedMessages.length?U(w({},n),{_messages:[],_dismissedMessages:[]}):n)}})),J6e=Q6e(),X6e=_.createContext(J6e);function Qg(){const t=_.useContext(X6e);return G3(t)}const gy="open-connector";function eCe(){const t=ot(),e=Hn(),[n]=Us(),s=n.get(gy),o=_.useCallback(()=>{const i=new URLSearchParams(e.search);i.delete(gy),t(U(w({},e),{search:i.toString()}),{replace:!0})},[e,t]);return{connector:Object.values(Ft).find(i=>i===s),clearParam:o}}async function tCe(t,e,n,s){if(!e)return;n();let o="";s===ad.Picker&&(o="".concat(gy,"=").concat(e.type)),t!=null||(t="/"),o&&(t.includes("?")?t+="&".concat(o):t+="?".concat(o)),VW({id:e.id},HW(s),"".concat(window.location.origin,"/ccc/").concat(e.id,"/oauth/callback"),t)}function nCe(t,e){t.access_token&&t.expires_at!=null&&t.expires_at*1e3<=Date.now()&&ha.expiredAccessTokenUsed(t.type,e)}function sCe(t,e,n,s,o,a,i,l){ir.uploadFile(t,dl(e),e,l!=null?l:xo.Retrieval,n,s,o,{gizmoId:i},a)}function oCe(t,e,n,s,o,a,i,l,c){let d=e.title;n===Ft.GDRIVE&&(d=e.syntheticExtension?"".concat(e.title,".").concat(e.syntheticExtension):e.title);const u=e.mimeType.split(";")[0],f=u.startsWith("image/");if((o==null?void 0:o.includes(u))===!1||f&&!s.includes(u)){c.danger(l.formatMessage(o7.unsupportedFileType,{fileName:d}),U(w({},GW),{toastId:"ccc_upload_file",loggingTitle:o7.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}));return}ir.uploadFile(t,e.id,new File([],d,{type:u}),xo.Retrieval,s,l,c,{gizmoId:i},a,{contextConnector:n,sourceUrl:e.url,syntheticExtension:e.syntheticExtension,type:ad.Picker,o365DriveId:e.o365DriveId})}const o7=be({unsupportedFileType:{id:"ContextConnectorUtils.unsupportedFileType",defaultMessage:"{fileName} is not a supported file type"}}),ti={uploadFile:sCe,uploadPickedFile:oCe,doContextConnectorOauthRedirect:tCe,logAttemptIfAccessTokenIsExpired:nCe},aCe=R(()=>P(()=>import("./l6g6inn3fet7dkcm.js"),__vite__mapDeps([334,1])),{loading:t=>O(t)}),a7=R(()=>P(()=>import("./a7t2z9w3mxh5uner.js"),__vite__mapDeps([164,1])),{loading:t=>O(t)}),r7=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),rCe=R(()=>P(()=>import("./ftbklkne5vchqwja.js"),__vite__mapDeps([290,1])),{loading:t=>O(t)}),iCe=R(()=>P(()=>import("./idvmimdr84st2so4.js"),__vite__mapDeps([291,1])),{loading:t=>O(t)}),lCe=R(()=>P(()=>import("./net5f1925ssn3thy.js"),__vite__mapDeps([293,1])),{loading:t=>O(t)}),cCe=R(()=>P(()=>import("./pj0tlj9i65oz4g7u.js"),__vite__mapDeps([248,1])),{loading:t=>O(t)}),dCe=R(()=>P(()=>import("./d8cmrw5lg3ncoab2.js"),__vite__mapDeps([249,1])),{loading:t=>O(t)}),uCe=R(()=>P(()=>import("./gsc4el4a1mly7vaf.js"),__vite__mapDeps([33,1])),{loading:t=>O(t)}),aF=R(()=>P(()=>import("./dvfjdfwc50k8htst.js"),__vite__mapDeps([253,1])),{loading:t=>O(t)}),fCe=R(()=>P(()=>import("./idxkrx2slxhzm8qh.js"),__vite__mapDeps([255,1])),{loading:t=>O(t)}),rF=R(()=>P(()=>import("./hk404s80nkkano79.js"),__vite__mapDeps([335,1])),{loading:t=>O(t)}),mCe=R(()=>P(()=>import("./iz9ybw36zj0rjajq.js"),__vite__mapDeps([336,1])),{loading:t=>O(t)}),iF=R(()=>P(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([35,1])),{loading:t=>O(t)}),pCe=R(()=>P(()=>import("./1z12ka0sjzwi5bk4.js"),__vite__mapDeps([337,1])),{loading:t=>O(t)}),i7=R(()=>P(()=>import("./kmjljr0f5g55xi5s.js"),__vite__mapDeps([338,1])),{loading:t=>O(t)});function tJe({onOauthRedirect:t}){const{connectorConfig:e,isLoading:n}=WW(),s=Qg(),o=V(),a=ye(o,"1242184140"),{getFirstMessage:i}=s,l=i(),c=l?e.get(l.connector):null,d=n||!c,u=a?gCe:hCe,f=_.useMemo(()=>{if(d||!l)return null;switch(l.type){case"not-connected":return r.jsx(u,{unconnectedMessage:l,onOauthRedirect:t,entry:c})}},[u,d,c,l,t]),{dismissMessage:m}=Qg(),p=_.useCallback(g=>{!g&&l&&!d&&m(l)},[d,m,l]);return r.jsx(V5,{size:"none",open:!d,onOpenChange:p,side:"top",sideOffset:4,triggerButton:r.jsx("button",{type:"button",name:"context-connector-pasted-link-popover-trigger",suppressHydrationWarning:!0,className:"invisible absolute self-center","aria-hidden":!0,tabIndex:-1}),children:f})}function gCe({unconnectedMessage:t,onOauthRedirect:e,entry:n}){const{dismissMessage:s}=Qg(),o=ne(),a=ig(t.connector,o),i=_Ce(t.connector),l=()=>{ha.oauthUpsellButtonClick(n.type,"link"),ti.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,e,ad.Link)},c=()=>{ha.oauthUpsellButtonClick(n.type,"not-now"),s(t)};return r.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-2 sm:w-[384px]",children:[r.jsxs("div",{className:"mb-5 flex flex-row gap-2",children:[r.jsx(yCe,{icon:i}),r.jsx("span",{className:"text-sm font-bold",children:r.jsx(j,U(w({},ni.connectTo),{values:{connectorName:a}}))})]}),r.jsx("span",{className:"text-token-text-secondary mb-5 text-sm",children:r.jsx(j,U(w({},ni.description),{values:{connectorName:a}}))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(_e,{color:"primary",onClick:l,children:r.jsx(j,w({},ni.connect))}),r.jsx(_e,{color:"secondary",onClick:c,children:r.jsx(j,w({},ni.notNow))})]})]})}function hCe({unconnectedMessage:t,onOauthRedirect:e,entry:n}){const{dismissMessage:s}=Qg(),o=ne(),a=ig(t.connector,o),{icon1:i,icon2:l,icon3:c,icon4:d}=xCe(t.connector);return r.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-4 sm:w-[384px]",children:[r.jsxs("div",{className:"mb-3 flex flex-row gap-2 self-center",children:[r.jsx(_p,{icon:i,rotation:-6}),r.jsx(_p,{icon:l,rotation:6}),r.jsx(_p,{icon:c,rotation:-6}),r.jsx(_p,{icon:d,rotation:6})]}),r.jsx("span",{className:"mb-3 text-lg font-semibold",children:r.jsx(j,U(w({},ni.connectTo),{values:{connectorName:a}}))}),r.jsx("span",{className:"text-token-text-secondary mb-4 text-sm",children:r.jsx(j,U(w({},ni.description),{values:{connectorName:a}}))}),r.jsxs("div",{className:"flex flex-row-reverse gap-3 self-end",children:[r.jsx(_e,{color:"primary",onClick:()=>{ha.oauthUpsellButtonClick(n.type,"link"),ti.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,e,ad.Link)},children:r.jsx(j,w({},ni.connect))}),r.jsx(_e,{color:"secondary",onClick:()=>{ha.oauthUpsellButtonClick(n.type,"not-now"),s(t)},children:r.jsx(j,w({},ni.notNow))})]})]})}function _Ce(t){switch(t){case Ft.CONFLUENCE:return r.jsx(pCe,{width:20,height:20});case Ft.GDRIVE:return r.jsx(iF,{width:20,height:20});case Ft.JIRA:return r.jsx(mCe,{width:20,height:20});case Ft.NOTION_OPEN_CONNECTOR:return r.jsx(fCe,{width:20,height:20});case Ft.O365:case Ft.O365_BUSINESS:case Ft.O365_PERSONAL:return r.jsx(rF,{width:20,height:20});case Ft.SLACK_OPEN_CONNECTOR:return r.jsx(aF,{width:20,height:20})}U8(t)}function xCe(t){switch(t){case Ft.GDRIVE:return{icon1:r.jsx(iF,{}),icon2:r.jsx(uCe,{}),icon3:r.jsx(cCe,{}),icon4:r.jsx(dCe,{})};case Ft.O365:case Ft.O365_BUSINESS:case Ft.O365_PERSONAL:return{icon1:r.jsx(rF,{}),icon2:r.jsx(rCe,{}),icon3:r.jsx(iCe,{}),icon4:r.jsx(lCe,{})};case Ft.CONFLUENCE:case Ft.JIRA:case Ft.NOTION_OPEN_CONNECTOR:return{icon1:r.jsx(aCe,{}),icon2:r.jsx(i7,{}),icon3:r.jsx(r7,{}),icon4:r.jsx(a7,{})};case Ft.SLACK_OPEN_CONNECTOR:return{icon1:r.jsx(aF,{}),icon2:r.jsx(i7,{}),icon3:r.jsx(r7,{}),icon4:r.jsx(a7,{})}}U8(t)}const yCe=({icon:t})=>r.jsx("div",{className:W("flex h-[20px] w-[20px]"),children:r.jsx("div",{className:"object-contain",children:t})});function _p({rotation:t,icon:e}){return r.jsx("div",{className:W("flex h-[44px] w-[44px] items-center justify-center rounded-xl border border-[#EDEDF2] bg-white shadow-[0_1px_12px_0px_#0000000B]"),style:{transform:"rotate(".concat(t,"deg)")},children:r.jsx("div",{className:"object-contain",children:e})})}const ni=be({connectTo:{id:"ContextConnectorPastedLinkPopover.connectTo",defaultMessage:"Connect to {connectorName}"},description:{id:"ContextConnectorPastedLinkPopover.description",defaultMessage:"Connect ChatGPT to {connectorName} to reference the content from this link."},notNow:{id:"ContextConnectorPastedLinkPopover.notNow",defaultMessage:"Not now"},connect:{id:"ContextConnectorPastedLinkPopover.connect",defaultMessage:"Connect"},addFromGdriveDescription:{id:"ContextConnectorPastedLinkPopover.addFromDriveDescription",defaultMessage:"To add files from Google Drive, upload them directly to your message."},addFromGdriveNotNow:{id:"ContextConnectorPastedLinkPopover.addFromDriveNotNow",defaultMessage:"Not now"},addFromGdriveUploadFile:{id:"ContextConnectorPastedLinkPopover.addFromDriveUploadFile",defaultMessage:"Upload file"}}),vCe="77377267392",lF="AIzaSyAOHzpLbFWAcLwrOn1IvQeVd0jHRntTlPk";var bCe=(t=>(t.OneDrive_BUSINESS_DRIVE_ITEMS="https://graph.microsoft.com/v1.0/me/drive/items",t.OneDrive_BUSINESS_DRIVE_ROOT="https://graph.microsoft.com/v1.0/me/drive/root",t.OneDrive_BUSINESS_SHARES="https://graph.microsoft.com/v1.0/shares",t.OneDrive_PERSONAL_DRIVE_ITEMS="https://api.onedrive.com/v1.0/drives",t.OneDrive_PERSONAL_SHARES="https://api.onedrive.com/v1.0/shares",t))(bCe||{});let i2=null;function cF(t){return i2==null&&(i2=CCe().then(()=>(gapi.client.setToken({access_token:t}),gapi.client.init({apiKey:lF,scope:"https://www.googleapis.com/auth/drive.file",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]})))),i2}function CCe(){return new Promise((t,e)=>{const n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.onload=t,n.onerror=e,document.documentElement.appendChild(n)}).then(()=>Promise.all([new Promise(t=>gapi.load("client",t)),new Promise(t=>gapi.load("client:picker",t))]))}async function SCe(t,e,n,s){await cF(n);async function o(u){switch(u.action){case google.picker.Action.PICKED:{ha.filePickerPicked(Ft.GDRIVE,u.docs.length);const f=u.docs.map(m=>({connector:e,id:m.id,title:m.name,mimeType:m.mimeType,url:m.url,syntheticExtension:m.type==="document"?zW(m.mimeType):null}));s(f);break}case google.picker.Action.CANCEL:ha.filePickerCancelled(Ft.GDRIVE);return;case"loaded":{ha.filePickerLoaded(Ft.GDRIVE);return}}}const a=new google.picker.DocsView(google.picker.ViewId.DOCS).setIncludeFolders(!0).setSelectFolderEnabled(!1).setMode(google.picker.DocsViewMode.LIST);let i="en";l7.includes(t)?i=t:l7.includes(t.split("-")[0])&&(i=t.split("-")[0]);const l=new google.picker.PickerBuilder().enableFeature(google.picker.Feature.MULTISELECT_ENABLED).enableFeature(google.picker.Feature.SUPPORT_DRIVES).setDeveloperKey(lF).setAppId(vCe).setOAuthToken(n).addView(a).setCallback(o).setLocale(i).build();ha.filePickerStarted(Ft.GDRIVE),l.setVisible(!0);const c=wCe(),d=()=>{ha.filePickerCancelled(Ft.GDRIVE),l.setVisible(!1),c==null||c.removeEventListener("click",d)};c==null||c.addEventListener("click",d)}function wCe(){var e;if(typeof window>"u")return null;const t=(e=window.document.body.querySelector("div.picker-dialog-bg"))!=null?e:window.document.body.querySelector("div.oai-picker-dialog-bg");return t==null||t.classList.add("oai-picker-dialog-bg","bg-black/50","dark:bg-black/80","absolute","inset-0","z-1000"),t==null||t.classList.remove("picker-dialog-bg"),t}const l7=["af","am","ar","bg","bn","ca","cs","da","de","el","en","en-GB","es","es-419","et","eu","fa","fi","fil","fr","fr-CA","gl","gu","hi","hr","hu","id","is","it","iw","ja","kn","ko","lt","lv","ml","mr","ms","nl","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","sw","ta","te","th","tr","uk","ur","vi","zh-CN","zh-HK","zh-TW","zu"],kCe=R(()=>P(()=>import("./olx24ljq70j52gj6.js"),__vite__mapDeps([339,1,10,11])).then(t=>t.GoogleDriveOAuthModal)),ECe=R(()=>P(()=>import("./o2wqo63mhtvkjirm.js"),__vite__mapDeps([340,1,10,11])).then(t=>t.OneDrivePickerModal));function nJe(t){"use forget";var A,I;const e=G.c(32),{connectorConfig:n,modelSupportedImageMimeTypes:s,modelAcceptedMimeTypes:o,attachmentsProductFeature:a,onOauthRedirect:i}=t,l=V(),c=ne(),d=Ut(),u=ki(),{getGizmoId:f}=rv(),m=(I=(A=Of())==null?void 0:A.enabled)!=null?I:!1,[p,g]=_.useState();let h,x;e[0]!==f?(h=()=>{f?f().then(N=>g(N)):g(void 0)},x=[f],e[0]=f,e[1]=h,e[2]=x):(h=e[1],x=e[2]),_.useEffect(h,x);let v;e[3]!==a||e[4]!==u||e[5]!==p||e[6]!==c||e[7]!==o||e[8]!==s||e[9]!==d?(v=(N,L)=>ti.uploadPickedFile(u,N,L,s,o,a,p,c,d),e[3]=a,e[4]=u,e[5]=p,e[6]=c,e[7]=o,e[8]=s,e[9]=d,e[10]=v):v=e[10];const y=v,b=_.useRef(!1);let C;e[11]!==l||e[12]!==m||e[13]!==i?(C=N=>{if(N.type===Ft.GDRIVE&&m&&!b.current){lt(l,kCe,{onContinue:()=>{b.current=!0,C(N)}});return}ti.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,N,i,ad.Picker),i()},e[11]=l,e[12]=m,e[13]=i,e[14]=C):C=e[14];let S;e[15]!==a||e[16]!==u||e[17]!==p||e[18]!==c||e[19]!==o||e[20]!==s||e[21]!==d?(S=N=>{ti.uploadPickedFile(u,N,Ft.GDRIVE,s,o,a,p,c,d)},e[15]=a,e[16]=u,e[17]=p,e[18]=c,e[19]=o,e[20]=s,e[21]=d,e[22]=S):S=e[22];const k=S;let E;e[23]!==n||e[24]!==l||e[25]!==C||e[26]!==k||e[27]!==y?(E=N=>{const{access_token:L}=N;if(!L){C(N);return}ti.logAttemptIfAccessTokenIsExpired(N,ad.Picker);e:switch(N.type){case Ft.GDRIVE:{SCe(Ln(l).locale,N.type,L,D=>D.forEach(k));break e}case Ft.O365_PERSONAL:case Ft.O365_BUSINESS:{const D=N.type?n.get(N.type):null;D!=null&&D.access_token&&D.onedrive_endpoint_hint&&lt(l,ECe,{accessToken:D.access_token,oneDriveURL:D.onedrive_endpoint_hint,uploadPickedFile:y});break e}}},e[23]=n,e[24]=l,e[25]=C,e[26]=k,e[27]=y,e[28]=E):E=e[28];const T=E;let M;return e[29]!==C||e[30]!==T?(M={onSelectConnector:T,onConnectorOauthRedirect:C},e[29]=C,e[30]=T,e[31]=M):M=e[31],M}function sJe(t,e){"use forget";const n=G.c(6),{connector:s,clearParam:o}=eCe();let a,i;n[0]!==o||n[1]!==s||n[2]!==t||n[3]!==e?(a=()=>{const l=s!=null&&Array.from(t.values()).find(c=>c.type===s&&!!c.access_token);l&&(e(l),o())},i=[t,s,o,e],n[0]=o,n[1]=s,n[2]=t,n[3]=e,n[4]=a,n[5]=i):(a=n[4],i=n[5]),_.useEffect(a,i)}const dF=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10 2.125C14.3492 2.125 17.875 5.65076 17.875 10C17.875 14.3492 14.3492 17.875 10 17.875C5.65076 17.875 2.125 14.3492 2.125 10C2.125 5.65076 5.65076 2.125 10 2.125ZM7.88672 10.625C7.94334 12.3161 8.22547 13.8134 8.63965 14.9053C8.87263 15.5194 9.1351 15.9733 9.39453 16.2627C9.65437 16.5524 9.86039 16.625 10 16.625C10.1396 16.625 10.3456 16.5524 10.6055 16.2627C10.8649 15.9733 11.1274 15.5194 11.3604 14.9053C11.7745 13.8134 12.0567 12.3161 12.1133 10.625H7.88672ZM3.40527 10.625C3.65313 13.2734 5.45957 15.4667 7.89844 16.2822C7.7409 15.997 7.5977 15.6834 7.4707 15.3486C6.99415 14.0923 6.69362 12.439 6.63672 10.625H3.40527ZM13.3633 10.625C13.3064 12.439 13.0059 14.0923 12.5293 15.3486C12.4022 15.6836 12.2582 15.9969 12.1006 16.2822C14.5399 15.467 16.3468 13.2737 16.5947 10.625H13.3633ZM12.1006 3.7168C12.2584 4.00235 12.4021 4.31613 12.5293 4.65137C13.0059 5.90775 13.3064 7.56102 13.3633 9.375H16.5947C16.3468 6.72615 14.54 4.53199 12.1006 3.7168ZM10 3.375C9.86039 3.375 9.65437 3.44756 9.39453 3.7373C9.1351 4.02672 8.87263 4.48057 8.63965 5.09473C8.22547 6.18664 7.94334 7.68388 7.88672 9.375H12.1133C12.0567 7.68388 11.7745 6.18664 11.3604 5.09473C11.1274 4.48057 10.8649 4.02672 10.6055 3.7373C10.3456 3.44756 10.1396 3.375 10 3.375ZM7.89844 3.7168C5.45942 4.53222 3.65314 6.72647 3.40527 9.375H6.63672C6.69362 7.56102 6.99415 5.90775 7.4707 4.65137C7.59781 4.31629 7.74073 4.00224 7.89844 3.7168Z"})),jr=Object.freeze(Object.defineProperty({__proto__:null,default:dF},Symbol.toStringTag,{value:"Module"})),TCe=R(()=>P(()=>import("./kw03hsqv96j7mp48.js"),__vite__mapDeps([197,1])),{loading:t=>O(t)}),MCe=R(()=>P(()=>import("./effczx7c6wukdepv.js"),__vite__mapDeps([215,1])),{loading:t=>O(t)}),ACe=R(()=>P(()=>import("./foakg84w5wpjdwdx.js"),__vite__mapDeps([54,1])),{loading:t=>O(t)}),ICe=R(()=>P(()=>Promise.resolve().then(()=>f5),void 0),{loading:t=>O(t)});function jCe({isOpen:t,onClose:e,markAsViewed:n}){const s=ne();return r.jsx(Mt,{testId:"modal-memory-alpha",isOpen:t,onClose:e,showCloseButton:!0,size:"custom",type:"success",className:"max-w-xl",title:s.formatMessage({id:"MoonshineAlphaAnnouncement.title",defaultMessage:"You're testing memory improvements"}),footerContent:r.jsxs("div",{className:"ms-1 mt-4 flex w-full justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(MCe,{className:"icon text-token-text-secondary me-1.5 inline-block"}),r.jsx("a",{href:"https://help.openai.com/en/articles/10303002-how-does-memory-use-past-conversations",target:"_blank",rel:"noopener noreferrer",onClick:()=>{n&&n(),e()},className:"text-token-text-secondary font-medium",children:s.formatMessage({id:"MoonshineAlphaAnnouncement.secondaryButton",defaultMessage:"Learn more"})})]}),r.jsx("div",{children:r.jsx(Ns.Button,{title:s.formatMessage({id:"MoonshineAlphaAnnouncement.primaryButton",defaultMessage:"Got it"}),color:"secondary",className:"text-base",onClick:e})})]}),children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx(ACe,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.chatTitle",defaultMessage:"ChatGPT now uses all past chats"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.chatText",defaultMessage:"All past chats will inform responses, not just saved memories."})})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx(ICe,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.optInTitle",defaultMessage:"You're in control"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.optInText",defaultMessage:"Use temporary chats for topics you don't want remembered."})})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx(TCe,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.optOutText",defaultMessage:"Opt out any time"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.settingsLink",defaultMessage:"Visit {settingsLink} to turn off improved memory.",values:{settingsLink:r.jsx(Eo,{to:Nl(Rn.Personalization),onClick:()=>{n&&n()},className:"underline",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.settingsLinkWord",defaultMessage:"Settings"})})}})})]})]})]})})}const Jg=Fe.hasSeenMoonshineNux;function oJe(){"use forget";const t=G.c(19),e=V(),[n,s]=_.useState(!1);let o;t[0]!==e?(o=()=>st(e,Jg),t[0]=e,t[1]=o):o=t[1];const a=o;let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{s(!0)},t[2]=i):i=t[2];const l=i;let c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{s(!1)},t[3]=c):c=t[3];const d=c;let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=[],t[4]=u):u=t[4],_.useEffect(NCe,u);let f,m;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{l(),Ie.count(je.MOONSHINE,"announcement.learn_more_clicked"),B.logEventWithStatsig("ChatGPT Moonshine: CTA Clicked","chatgpt_moonshine_announcement_cta_clicked")},m=r.jsx(j,{id:"MoonshineAnnouncement.secondaryCtaText",defaultMessage:"Learn more"}),t[5]=f,t[6]=m):(f=t[5],m=t[6]);let p;t[7]!==a?(p=()=>{Ie.count(je.MOONSHINE,"announcement.close_clicked"),B.logEventWithStatsig("ChatGPT Moonshine: Announcement Closed","chatgpt_moonshine_announcement_closed"),a()},t[7]=a,t[8]=p):p=t[8];let g;t[9]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsxs("div",{className:"flex items-center gap-2 font-bold",children:[r.jsx(j,{id:"MoonshineAnnouncement.heading",defaultMessage:"You're testing memory improvements"}),r.jsx(qW,{})]}),t[9]=g):g=t[9];let h;t[10]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsxs("div",{className:"grow",children:[g,r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"MoonshineAnnouncement.description",defaultMessage:"ChatGPT can now reference past chats, not just saved memories."})})]}),t[10]=h):h=t[10];let x;t[11]!==p?(x=r.jsx(vn,{onSecondaryCtaClick:f,secondaryCtaText:m,onDismiss:p,content:h}),t[11]=p,t[12]=x):x=t[12];let v;t[13]!==n||t[14]!==a?(v=n&&r.jsx(jCe,{isOpen:n,markAsViewed:a,onClose:()=>{d(),a()}}),t[13]=n,t[14]=a,t[15]=v):v=t[15];let y;return t[16]!==v||t[17]!==x?(y=r.jsxs(r.Fragment,{children:[x,v]}),t[16]=v,t[17]=x,t[18]=y):y=t[18],y}function NCe(){Ie.count(je.MOONSHINE,"nux.shown"),B.logEventWithStatsig("ChatGPT Moonshine: Announcement Shown","chatgpt_moonshine_announcement_shown"),B.logUpsellOrModalEvent(un,{eventId:"moonshine_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})}function PCe(){"use forget";const t=v1(),{eligible:e,isLoading:n}=dt(Jg);return t&&e&&!n}function aJe(){"use forget";const t=G.c(4),e=V(),n=v1(),{eligible:s}=dt(Jg);let o;return t[0]!==e||t[1]!==s||t[2]!==n?(o=()=>{!n||!s||(Ie.count(je.MOONSHINE,"nux.implicit_close"),st(e,Jg))},t[0]=e,t[1]=s,t[2]=n,t[3]=o):o=t[3],o}const RCe=R(()=>P(()=>import("./mj3cfg2f85rrc2rh.js"),__vite__mapDeps([341,1])),{loading:t=>O(t)}),LCe=R(()=>P(()=>import("./iz35nlf95x4k1pcg.js"),__vite__mapDeps([146,1])),{loading:t=>O(t)}),H5=t=>{"use forget";const e=G.c(61),{pressed:n,disabled:s,icon:o,label:a,ariaLabel:i,animatedLabel:l,showLabel:c,onClick:d,splitButtonDropdownContent:u,showSplitButton:f,dropdownContent:m,dataTestid:p,splitSecondaryButton:g,tooltip:h,as:x}=t,v=f===void 0?!0:f,y=x===void 0?"popover":x,[b,C]=_.useState(!1),[S,k]=_.useState(!1),E=YW(),T=!s&&n;let M;e[0]!==a?(M=a&&r.jsx("div",{className:"ps-1 pe-1 font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:a}),e[0]=a,e[1]=M):M=e[1];const A=M,I=!!u;let N;e[2]!==I?(N=W("flex h-full min-w-8 items-center justify-center p-2",{"pe-1.5":I}),e[2]=I,e[3]=N):N=e[3];let L;e[4]===Symbol.for("react.memo_cache_sentinel")?(L=()=>k(!1),e[4]=L):L=e[4];let D;e[5]!==m||e[6]!==d?(D=Ce=>{m||(k(!0),d(Ce))},e[5]=m,e[6]=d,e[7]=D):D=e[7];const F=!l&&c?A:null;let $;e[8]!==l||e[9]!==A||e[10]!==E||e[11]!==c?($=l&&r.jsx(mn,{initial:!1,children:c&&r.jsx(Xe.span,{initial:{x:-10,width:0,opacity:0},animate:{x:0,width:"fit-content",opacity:1},exit:{x:-10,width:0,opacity:0},transition:{ease:"easeOut",duration:E?0:.15},children:A})}),e[8]=l,e[9]=A,e[10]=E,e[11]=c,e[12]=$):$=e[12];let H;e[13]!==i||e[14]!==p||e[15]!==s||e[16]!==o||e[17]!==n||e[18]!==N||e[19]!==D||e[20]!==F||e[21]!==$?(H=r.jsxs("button",{className:N,"data-testid":p,"aria-pressed":n,"aria-label":i,disabled:s,onTransitionEnd:L,onClick:D,children:[o,F,$]}),e[13]=i,e[14]=p,e[15]=s,e[16]=o,e[17]=n,e[18]=N,e[19]=D,e[20]=F,e[21]=$,e[22]=H):H=e[22];const z=H;let K;e[23]!==z||e[24]!==h?(K=h?h(z):z,e[23]=z,e[24]=h,e[25]=K):K=e[25];const J=K;let Z;e[26]!==b?(Z=b?r.jsx(RCe,{className:"icon"}):r.jsx(LCe,{className:"icon"}),e[26]=b,e[27]=Z):Z=e[27];const q=Z;let se;e[28]===Symbol.for("react.memo_cache_sentinel")?(se={type:"tween",duration:.15,ease:"easeInOut"},e[28]=se):se=e[28];const ie=se;let ee;e[29]!==E?(ee=E?lL:{opacity:{delay:.1},default:ie},e[29]=E,e[30]=ee):ee=e[30];const le=ee;let X;e[31]!==y||e[32]!==m||e[33]!==u?(X=u||m?y==="popover"?r.jsx($l,{children:r.jsx(Uh,{className:"p-0",$as:Vl,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:m!=null?m:u})}):r.jsx(Y.Portal,{children:r.jsx(Y.Content,{children:m!=null?m:u})}):null,e[31]=y,e[32]=m,e[33]=u,e[34]=X):X=e[34];const te=X;let ce;e[35]!==y||e[36]!==J?(ce=y==="popover"?r.jsx(vr,{asChild:!0,children:J}):r.jsx(Y.Trigger,{asChild:!0,children:J}),e[35]=y,e[36]=J,e[37]=ce):ce=e[37];const ue=ce;let me;e[38]!==le||e[39]!==y||e[40]!==q||e[41]!==s||e[42]!==T?(me=y==="popover"?r.jsx(vr,{asChild:!0,children:r.jsx("button",{className:"border-token-border-default border-s p-2",style:{borderColor:T?"#0285FF0D":void 0},disabled:s,children:q})}):r.jsx(Xe.div,{initial:{width:0,opacity:0,padding:0},animate:{width:"auto",opacity:1,padding:"0.5rem"},exit:{width:0,opacity:0,padding:0,borderInlineStart:"unset"},transition:le,style:{overflow:"hidden",border:"unset",borderInlineStart:"solid 1px",borderColor:T?"#0285FF0D":"var(--border-default)"},children:r.jsx(Y.Trigger,{asChild:!0,children:r.jsx("button",{style:{padding:0,backgroundColor:"transparent",height:"100%",borderRadius:"unset",color:T?"var(--interactive-label-accent-default)":void 0},disabled:s,children:q})})}),e[38]=le,e[39]=y,e[40]=q,e[41]=s,e[42]=T,e[43]=me):me=e[43];const xe=me,pe=!n,Ee=!!T,Se=!T;let Te;e[44]!==s||e[45]!==S||e[46]!==pe||e[47]!==Ee||e[48]!==Se?(Te=W("radix-state-open:bg-black/10 inline-flex h-9 rounded-full border text-[13px] font-medium",{"duration-75 motion-safe:transition-all":S,"text-token-text-secondary":pe,"text-token-interactive-label-accent-default bg-token-composer-blue-bg border-transparent hover:bg-[#BDDCF4] dark:bg-[#2A4A6D] dark:text-[#48AAFF] dark:hover:bg-[#1A416A]":Ee,"border-token-border-default hover:bg-token-main-surface-secondary focus-visible:outline-black dark:focus-visible:outline-white":Se,"opacity-30":s}),e[44]=s,e[45]=S,e[46]=pe,e[47]=Ee,e[48]=Se,e[49]=Te):Te=e[49];const Ne=m?ue:J,De=!m&&u&&v?xe:null;let de;e[50]!==De?(de=r.jsx(mn,{children:De}),e[50]=De,e[51]=de):de=e[51];let oe;e[52]!==g||e[53]!==Te||e[54]!==Ne||e[55]!==de?(oe=r.jsxs("div",{className:Te,children:[Ne,de,g]}),e[52]=g,e[53]=Te,e[54]=Ne,e[55]=de,e[56]=oe):oe=e[56];const we=oe;if(u||m){let Ce;return e[57]!==y||e[58]!==we||e[59]!==te?(Ce=y==="popover"?r.jsxs(Ul,{onOpenChange:fe=>C(fe),children:[r.jsx(fne,{asChild:!0,children:we}),te]}):r.jsxs(Y.Root,{onOpenChange:fe=>C(fe),children:[we,te]}),e[57]=y,e[58]=we,e[59]=te,e[60]=Ce):Ce=e[60],Ce}else return we};function rJe(t){"use forget";var A,I;const e=G.c(11),{account:n,clientBootstrapFlags:s,features:o,clientThreadId:a,currentModelConfig:i,composerController:l,isDisabled:c,gizmoId:d}=t,u=V(),f=WM(a),m=Rl(u,d);let p;e[0]!==(i==null?void 0:i.enabledTools)?(p=(A=i==null?void 0:i.enabledTools)==null?void 0:A.includes(il.Search),e[0]=i==null?void 0:i.enabledTools,e[1]=p):p=e[1];const g=p,h=f==null||(f==null?void 0:f.kind)===wt.PrimaryAssistant||(f==null?void 0:f.kind)===wt.GizmoInteraction&&m,x=!tt(u);let v;e[2]!==u?(v=()=>ZW(u,Pe.Search),e[2]=u,e[3]=v):v=e[3];const y=ae(v),b=!x&&(n==null||n.isFree());if(g===!1||x&&(s!=null&&s.includes(ag.AnonSearchHoldout))||b&&s!=null&&s.includes(ag.FreeSearchHoldout)||!y||!x&&(n==null||n.isEnterprisey())&&!(o!=null&&o.includes(os.BrowsingAvailable))||!h)return null;let S;e[4]===Symbol.for("react.memo_cache_sentinel")?(S={viewTransitionName:"var(--vt-composer-".concat(Pe.Search,"-action)")},e[4]=S):S=e[4];const k=!!c||!g,E=g?void 0:N5.ModelNotSupported,T=(I=i==null?void 0:i.title)!=null?I:"";let M;return e[5]!==a||e[6]!==l||e[7]!==k||e[8]!==E||e[9]!==T?(M=r.jsx("div",{"data-testid":"system-hint-search",style:S,children:r.jsx(OCe,{clientThreadId:a,composerController:l,isDisabled:k,disabledReason:E,currentModelName:T})},"system-hint-".concat(Pe.Search)),e[5]=a,e[6]=l,e[7]=k,e[8]=E,e[9]=T,e[10]=M):M=e[10],M}function OCe(t){"use forget";const e=G.c(28),{clientThreadId:n,composerController:s,isDisabled:o,disabledReason:a,currentModelName:i}=t,l=ne();let c;e[0]!==l?(c=l.formatMessage({id:"TbHx8d",defaultMessage:"Search"}),e[0]=l,e[1]=c):c=e[1];const d=c,u=ys(),f=$s(),m=u===Pe.Search;let p,g;e[2]!==n||e[3]!==o||e[4]!==m||e[5]!==f?(p=()=>{o&&m&&f(null,{analyticsMetadata:{clientThreadId:n}})},g=[o,m,f,n],e[2]=n,e[3]=o,e[4]=m,e[5]=f,e[6]=p,e[7]=g):(p=e[6],g=e[7]),_.useEffect(p,g);let h;e[8]!==n||e[9]!==s||e[10]!==m||e[11]!==f?(h=k=>{k.stopPropagation(),k.preventDefault(),f(m?null:Pe.Search,{analyticsMetadata:{clientThreadId:n}}),m||so(Pt(s)),B.logEventWithStatsig("Composer Search Button Clicked","composer_search_button_clicked",{clientThreadId:n}),m&&KW(Pt(s),/^search\b/i)},e[8]=n,e[9]=s,e[10]=m,e[11]=f,e[12]=h):h=e[12];const x=h;let v;e[13]!==n?(v={clientThreadId:n},e[13]=n,e[14]=v):v=e[14];const y=o!=null?o:!1;let b;e[15]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(dF,{className:"icon"}),e[15]=b):b=e[15];let C;e[16]!==x||e[17]!==m||e[18]!==d||e[19]!==y?(C=r.jsx(H5,{pressed:m,disabled:y,icon:b,label:d,ariaLabel:d,animatedLabel:!0,showLabel:!0,onClick:x,dataTestid:"composer-button-search"}),e[16]=x,e[17]=m,e[18]=d,e[19]=y,e[20]=C):C=e[20];let S;return e[21]!==i||e[22]!==a||e[23]!==o||e[24]!==m||e[25]!==v||e[26]!==C?(S=r.jsx(FCe,{analyticsMetadata:v,isThreadUsingSearchMode:m,isDisabled:o,disabledReason:a,currentModelName:i,children:C}),e[21]=i,e[22]=a,e[23]=o,e[24]=m,e[25]=v,e[26]=C,e[27]=S):S=e[27],S}function DCe(){"use forget";const t=PCe(),e=dt(Fe.hasSeenComposerSearchButtonTooltip);return!e.isLoading&&e.eligible&&!t}function FCe(t){"use forget";const e=G.c(19),{children:n,analyticsMetadata:s,isThreadUsingSearchMode:o,isDisabled:a,disabledReason:i,currentModelName:l}=t,c=V();if(!(DCe()&&!o)){let h;e[0]!==l||e[1]!==i||e[2]!==a?(h=a?i===N5.ModelNotSupported?r.jsx(j,{id:"GZemJe",defaultMessage:"Search disabled for {modelName}",values:{modelName:"".concat(l)}}):r.jsx(j,{id:"GpDAWD",defaultMessage:"Search is unavailable"}):r.jsx(j,{id:"c+4o2s",defaultMessage:"Search the web"}),e[0]=l,e[1]=i,e[2]=a,e[3]=h):h=e[3];let x;e[4]!==s?(x=y=>{y&&B.logEventWithStatsig("Composer Search Button Hovered","composer_search_button_hovered",s)},e[4]=s,e[5]=x):x=e[5];let v;return e[6]!==n||e[7]!==h||e[8]!==x?(v=r.jsx("div",{children:r.jsx(_t,{className:"inline-block",label:h,side:"bottom",onOpenChange:x,children:n})}),e[6]=n,e[7]=h,e[8]=x,e[9]=v):v=e[9],v}let u;e[10]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(j,{id:"Yjduqi",defaultMessage:"Search the web"}),e[10]=u):u=e[10];let f;e[11]!==c?(f=()=>st(c,Fe.hasSeenComposerSearchButtonTooltip),e[11]=c,e[12]=f):f=e[12];let m;e[13]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(j,{id:"W51Aei",defaultMessage:"Get fast answers with trusted sources. {learnMore}",values:{learnMore:r.jsx(no,{href:"https://openai.com/index/introducing-chatgpt-search",className:"underline",children:r.jsx(j,{id:"stA7F4",defaultMessage:"Learn more"})})}}),e[13]=m):m=e[13];let p;e[14]!==n?(p=r.jsx("div",{children:n}),e[14]=n,e[15]=p):p=e[15];let g;return e[16]!==f||e[17]!==p?(g=r.jsx(zd,{announcementKey:Fe.hasSeenComposerSearchButtonTooltip,side:"right",show:!0,theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:u,onDismiss:f,sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",description:m,children:p}),e[16]=f,e[17]=p,e[18]=g):g=e[18],g}const iJe=async({filePickerStore:t,event:e,intl:n,toaster:s,conversationMode:o,clientThreadId:a,currentModelConfig:i,getEditorGizmoId:l,modelSupportedImageMimeTypes:c,activeSystemHintType:d,ctx:u,contextScopes:f})=>{var E,T;const m=tt(u),p=Ln(u).flags,g=p==null?void 0:p.includes(ag.NoAuthEnableFileUploads),h=fT(i,o,d),x=c.length>0;B.logEvent("Pasted to Composer",{client_thread_id:a});const{clipboardData:v}=e,y=QW(i,o),b=!m&&g?c:(E=y==null?void 0:y.attachments)==null?void 0:E.accepted_mime_types,C=!m&&g?!1:(T=y==null?void 0:y.attachments)==null?void 0:T.can_accept_all_mime_types,S=w(w({},g&&{isUnauthenticated:!m}),m&&f&&f.length>0?{contextScopes:f}:{});if(x&&v&&v.files.length>0){const M=v.files[0],A=M.name.match(/\.[^.]+$/),I=A?"".concat(as()).concat(A[0]):as(),N=new File([M],I,{type:M.type,lastModified:M.lastModified});if(b!==void 0&&!b.includes(N.type)&&C!==!0){s.danger(n.formatMessage(Do.unsupportedFileType,{file_type:JW(N)}),{toastId:"paste_unsupported_file_type",loggingTitle:Do.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}),e.preventDefault();return}if(On.hideThreadHeader(),B.logEvent("Upload File",{client:"web",eventSource:"paste"}),l!=null){l().then(L=>ir.uploadFile(t,dl(N),N,h,c,n,s,w({gizmoId:L},S)));return}ir.uploadFile(t,dl(N),N,h,c,n,s,S,y==null?void 0:y.attachments)}if(v&&v.types.includes("text/plain")){const M=v.getData("text");if(M&&y8(u,M)){e.preventDefault();const A="text/plain";let I="txt";const N=await XW(M);N&&(C||b!=null&&b.includes(N.mime))&&(I=N.ext);const L="pasted.".concat(I),D=new Blob([M],{type:A}),F=new File([D],L,{type:A});ir.uploadFile(t,dl(F),F,h,c,n,s,S),B.logEventWithStatsig("Big Paste","chatgpt_web_big_paste",{text_length:BCe(M.length)})}}},BCe=t=>t<500?"under 500":t<=1e3?"500-1000":t<=5e3?"1001-5000":t<=1e4?"5000-10000":"10000+",lJe=(t,{canSubmit:e,isTextContentTooLong:n,toaster:s,requestCompletion:o})=>t.shiftKey||t.altKey||a3()&&$8(t)?!1:(e?(t.preventDefault(),o(t)):n&&s.danger("The message you submitted was too long, please submit something shorter.",{hasCloseButton:!0}),!0),cJe=(t,{isAutocompletionActive:e,clearAutocompletions:n,canAbortCompletion:s,clientThreadId:o,abortCompletion:a,isEmpty:i,hasTargetedContent:l,clearTargetedContent:c,hasSystemHint:d,removeSystemHint:u,hasSelectedTarget:f,removeSelectedTarget:m,hasNonDefaultModel:p,removeNonDefaultModel:g})=>s?(a(),B.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:At(o),currentLeafId:he.getCurrentNode(ft(o)).message.id,eventSource:"keyboard"}),!0):e!=null&&e()?(n(),!0):d?(u(),!0):p?(g(),!0):i&&l?(c(),!0):f?(m(),!0):!1,dJe={PromptTextareaHeader:"z-20"},UCe=R(()=>P(()=>import("./mxg3f3sil9dynqw0.js"),__vite__mapDeps([342,1])),{loading:t=>O(t)}),$Ce=R(()=>P(()=>import("./d7nzu63howwrl3dl.js"),__vite__mapDeps([343,1])),{loading:t=>O(t)});function VCe({voice:t,voiceSpeed:e}){const[n,s]=_.useState(!1),o=Y3(),a=t.voice,i=t.preview_url,l=_.useRef({playPromise:null}).current,c=Z3(p=>p.isPlaying&&p.sourceUrl===i);_.useEffect(()=>{o&&o.setSpeed(e)},[o,e]);const d=Ut(),u=_.useCallback(async()=>{if(!o)return;const p={voice:a,source:i};Bt.previews.click(p);try{s(!0),o.changeSource(i),l.playPromise=o.play(),s(!1)}catch(g){Bt.previews.error(g,p),d.danger(Ge({id:"DeIYxH",defaultMessage:"Something went wrong playing preview"}),{toastId:"voice_preview_player_play_error"})}},[o,i,a,l,d]),f=_.useCallback(()=>{o&&(l.playPromise?l.playPromise.then(()=>{o.stop(),l.playPromise=null}):o.stop())},[o,l]),m=_.useCallback(()=>{c?f():n||u()},[f,u,n,c]);return _.useEffect(()=>()=>{c&&f()},[t,c,f]),r.jsx(_e,{onClick:m,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:n,icon:c?UCe:$Ce,children:c?r.jsx(j,{id:"yGpEMJ",defaultMessage:"Stop"}):r.jsx(j,{id:"JwYDVp",defaultMessage:"Play"})})}var uF=["PageUp","PageDown"],fF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Jd="Slider",[hy,HCe,GCe]=f3(Jd),[pF]=Ml(Jd,[GCe]),[WCe,z1]=pF(Jd),gF=_.forwardRef((t,e)=>{const I=t,{name:n,min:s=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:g}=I,h=ke(I,["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"]),x=_.useRef(new Set),v=_.useRef(0),b=i==="horizontal"?zCe:qCe,[C=[],S]=_r({prop:u,defaultProp:d,onChange:N=>{var D;(D=[...x.current][v.current])==null||D.focus(),f(N)}}),k=_.useRef(C);function E(N){const L=JCe(C,N);A(N,L)}function T(N){A(N,v.current)}function M(){const N=k.current[v.current];C[v.current]!==N&&m(C)}function A(N,L,{commit:D}={commit:!1}){const F=nSe(a),$=sSe(Math.round((N-s)/a)*a+s,F),H=Fg($,[s,o]);S((z=[])=>{const K=KCe(z,H,L);if(tSe(K,c*a)){v.current=K.indexOf(H);const J=String(K)!==String(z);return J&&D&&m(K),J?K:z}else return z})}return r.jsx(WCe,{scope:t.__scopeSlider,name:n,disabled:l,min:s,max:o,valueIndexToChangeRef:v,thumbs:x.current,values:C,orientation:i,form:g,children:r.jsx(hy.Provider,{scope:t.__scopeSlider,children:r.jsx(hy.Slot,{scope:t.__scopeSlider,children:r.jsx(b,U(w({"aria-disabled":l,"data-disabled":l?"":void 0},h),{ref:e,onPointerDown:Rt(h.onPointerDown,()=>{l||(k.current=C)}),min:s,max:o,inverted:p,onSlideStart:l?void 0:E,onSlideMove:l?void 0:T,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&A(s,0,{commit:!0}),onEndKeyDown:()=>!l&&A(o,C.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:L})=>{if(!l){const $=uF.includes(N.key)||N.shiftKey&&fF.includes(N.key)?10:1,H=v.current,z=C[H],K=a*$*L;A(z+K,H,{commit:!0})}}}))})})})});gF.displayName=Jd;var[hF,_F]=pF(Jd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),zCe=_.forwardRef((t,e)=>{const b=t,{min:n,max:s,dir:o,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d}=b,u=ke(b,["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),[f,m]=_.useState(null),p=Dn(e,C=>m(C)),g=_.useRef(),h=Sh(o),x=h==="ltr",v=x&&!a||!x&&a;function y(C){const S=g.current||f.getBoundingClientRect(),k=[0,S.width],T=G5(k,v?[n,s]:[s,n]);return g.current=S,T(C-S.left)}return r.jsx(hF,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:r.jsx(xF,U(w({dir:h,"data-orientation":"horizontal"},u),{ref:p,style:U(w({},u.style),{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:C=>{const S=y(C.clientX);i==null||i(S)},onSlideMove:C=>{const S=y(C.clientX);l==null||l(S)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:C=>{const k=mF[v?"from-left":"from-right"].includes(C.key);d==null||d({event:C,direction:k?-1:1})}}))})}),qCe=_.forwardRef((t,e)=>{const h=t,{min:n,max:s,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c}=h,d=ke(h,["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),u=_.useRef(null),f=Dn(e,u),m=_.useRef(),p=!o;function g(x){const v=m.current||u.current.getBoundingClientRect(),y=[0,v.height],C=G5(y,p?[s,n]:[n,s]);return m.current=v,C(x-v.top)}return r.jsx(hF,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:r.jsx(xF,U(w({"data-orientation":"vertical"},d),{ref:f,style:U(w({},d.style),{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:x=>{const v=g(x.clientY);a==null||a(v)},onSlideMove:x=>{const v=g(x.clientY);i==null||i(v)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:x=>{const y=mF[p?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:y?-1:1})}}))})}),xF=_.forwardRef((t,e)=>{const f=t,{__scopeSlider:n,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c}=f,d=ke(f,["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"]),u=z1(Jd,n);return r.jsx(fn.span,U(w({},d),{ref:e,onKeyDown:Rt(t.onKeyDown,m=>{m.key==="Home"?(i(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):uF.concat(fF).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:Rt(t.onPointerDown,m=>{const p=m.target;p.setPointerCapture(m.pointerId),m.preventDefault(),u.thumbs.has(p)?p.focus():s(m)}),onPointerMove:Rt(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&o(m)}),onPointerUp:Rt(t.onPointerUp,m=>{const p=m.target;p.hasPointerCapture(m.pointerId)&&(p.releasePointerCapture(m.pointerId),a(m))})}))}),yF="SliderTrack",vF=_.forwardRef((t,e)=>{const a=t,{__scopeSlider:n}=a,s=ke(a,["__scopeSlider"]),o=z1(yF,n);return r.jsx(fn.span,U(w({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},s),{ref:e}))});vF.displayName=yF;var _y="SliderRange",bF=_.forwardRef((t,e)=>{const m=t,{__scopeSlider:n}=m,s=ke(m,["__scopeSlider"]),o=z1(_y,n),a=_F(_y,n),i=_.useRef(null),l=Dn(e,i),c=o.values.length,d=o.values.map(p=>SF(p,o.min,o.max)),u=c>1?Math.min(...d):0,f=100-Math.max(...d);return r.jsx(fn.span,U(w({"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0},s),{ref:l,style:U(w({},t.style),{[a.startEdge]:u+"%",[a.endEdge]:f+"%"})}))});bF.displayName=_y;var xy="SliderThumb",CF=_.forwardRef((t,e)=>{const n=HCe(t.__scopeSlider),[s,o]=_.useState(null),a=Dn(e,l=>o(l)),i=_.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(YCe,U(w({},t),{ref:a,index:i}))}),YCe=_.forwardRef((t,e)=>{const y=t,{__scopeSlider:n,index:s,name:o}=y,a=ke(y,["__scopeSlider","index","name"]),i=z1(xy,n),l=_F(xy,n),[c,d]=_.useState(null),u=Dn(e,b=>d(b)),f=c?i.form||!!c.closest("form"):!0,m=m8(c),p=i.values[s],g=p===void 0?0:SF(p,i.min,i.max),h=QCe(s,i.values.length),x=m==null?void 0:m[l.size],v=x?XCe(x,g,l.direction):0;return _.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:"calc(".concat(g,"% + ").concat(v,"px)")},children:[r.jsx(hy.ItemSlot,{scope:t.__scopeSlider,children:r.jsx(fn.span,U(w({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0},a),{ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:Rt(t.onFocus,()=>{i.valueIndexToChangeRef.current=s})}))}),f&&r.jsx(ZCe,{name:o!=null?o:i.name?i.name+(i.values.length>1?"[]":""):void 0,form:i.form,value:p},s)]})});CF.displayName=xy;var ZCe=t=>{const a=t,{value:e}=a,n=ke(a,["value"]),s=_.useRef(null),o=F3(e);return _.useEffect(()=>{const i=s.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&d){const u=new Event("input",{bubbles:!0});d.call(i,e),i.dispatchEvent(u)}},[o,e]),r.jsx("input",U(w({style:{display:"none"}},n),{ref:s,defaultValue:e}))};function KCe(t=[],e,n){const s=[...t];return s[n]=e,s.sort((o,a)=>o-a)}function SF(t,e,n){const a=100/(n-e)*(t-e);return Fg(a,[0,100])}function QCe(t,e){return e>2?"Value ".concat(t+1," of ").concat(e):e===2?["Minimum","Maximum"][t]:void 0}function JCe(t,e){if(t.length===1)return 0;const n=t.map(o=>Math.abs(o-e)),s=Math.min(...n);return n.indexOf(s)}function XCe(t,e,n){const s=t/2,a=G5([0,50],[0,s]);return(s-a(e)*n)*n}function eSe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function tSe(t,e){if(e>0){const n=eSe(t);return Math.min(...n)>=e}return!0}function G5(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function nSe(t){return(String(t).split(".")[1]||"").length}function sSe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var W5=gF,z5=vF,wF=bF,q5=CF;const yy=.5,vy=2,kF=.1,EF=Math.round((vy-yy)/kF),oSe=Array.from({length:EF+1},(t,e)=>e),TF=2,zp=8,c7=(zp-TF)/2,aSe=t=>{const e=Number(t);return isNaN(e)?1:e};function rSe(t){return ye(t,"174366048")}function iSe(t){return ye(t,"3302173089")}const Y5=()=>{const{value:t}=Em(Lt.VoiceEnabled);return t!==!1};function uJe(){const t=V(),e=rSe(t),n=Xo(),s=iSe(t),{isLoading:o,value:a,setValue:i}=Em(Lt.VoiceSpeed),l=aSe(a),c=Y5();if(!e)return null;const d=(n==null?void 0:n.length)&&!(n!=null&&n.includes(os.VideoScreenSharing));return r.jsxs(r.Fragment,{children:[c&&r.jsxs(r.Fragment,{children:[r.jsx(_a,{children:r.jsx(dSe,{})}),r.jsx(_a,{children:r.jsx(lSe,{voiceSpeed:l})})]}),s&&c&&r.jsx(_a,{children:r.jsx(cSe,{voiceSpeed:l,setVoiceSpeed:i,isLoading:o})}),d&&r.jsx(_a,{children:r.jsx(uSe,{})})]})}function Em(t,e=!1){const{data:n,isLoading:s}=to(t)||{},o=Tl(e);return{isLoading:s,value:n,setValue:a=>{o.mutate({setting:t,value:a})}}}function lSe({voiceSpeed:t}){const{isLoading:e,value:n,setValue:s}=Em(Lt.VoiceName),o=RO(),a=PO(),i=e?"":LO(n,a),l=o.find(({voice:c})=>c===i);return r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(j,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),r.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[l?r.jsxs(r.Fragment,{children:[r.jsx(VCe,{voice:l,voiceSpeed:t}),r.jsx("div",{className:"h-4 border-s"})]}):null,r.jsxs(Bn.Root,{value:i,onValueChange:c=>s(c),disabled:e,children:[r.jsxs(Bn.Trigger,{children:[r.jsx(Bn.Value,{}),r.jsx(Bn.Icon,{})]}),r.jsx(Bn.Portal,{children:r.jsx(Bn.Content,{children:o.map(({voice:c,name:d})=>r.jsx(Bn.Item,{value:c,children:d},c))})})]})]})]})})})}function cSe({voiceSpeed:t,setVoiceSpeed:e,isLoading:n}){const[s,o]=_.useState(t);return _.useEffect(()=>o(t),[t]),r.jsxs("div",{className:"flex w-full flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(j,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),r.jsx("div",{className:"text-token-text-secondary tabular-nums",children:r.jsx(j,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:s.toFixed(1)}})})]}),r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs(W5,{className:"relative flex w-full items-center",min:yy,max:vy,step:kF,value:[s],disabled:n,onValueChange:a=>o(a[0]),onValueCommit:a=>{const i=a[0],l=Math.min(vy,Math.max(yy,i));e(l.toString())},children:[r.jsxs(z5,{className:"relative h-[4px] grow rounded-full",children:[r.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:c7,right:c7}}),r.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:zp/2,right:zp/2},children:oSe.map(a=>r.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:TF,left:"".concat(a/EF*100,"%"),transform:"translateX(-50%)"}},a))})]}),r.jsx(q5,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:zp}})]})})})]})}function dSe(){const{isLoading:t,value:e,setValue:n}=Em(Lt.VoiceMainLanguage);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(j,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),r.jsxs(Bn.Root,{value:t?"":e!=null?e:Eu.Auto,onValueChange:s=>n(s),disabled:t,children:[r.jsxs(Bn.Trigger,{children:[r.jsx(Bn.Value,{}),r.jsx(Bn.Icon,{})]}),r.jsx(Bn.Portal,{children:r.jsxs(Bn.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[r.jsx(Bn.Item,{value:Eu.Auto,children:r.jsx(j,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(Eu).filter(([s,o])=>o!==Eu.Auto).map(([s,o])=>r.jsx(Bn.Item,{value:o,className:"capitalize",children:s},o))]})})]})]}),r.jsx(p8,{children:r.jsx(j,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function uSe(){const t=ne();return r.jsx(cl,{label:t.formatMessage(d7.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:t.formatMessage(d7.voiceAndScreenSharingDescription)})}const d7=be({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}}),fSe=()=>{"use forget";const t=G.c(12),{value:e,setValue:n,isLoading:s}=Em(Lt.VoiceEnabled),o=ne();let a;t[0]!==o?(a=o.formatMessage(Xg.voiceEnabledSetting),t[0]=o,t[1]=a):a=t[1];const i=e!=null?e:!0;let l;t[2]!==n?(l=u=>{n(u)},t[2]=n,t[3]=l):l=t[3];let c;t[4]!==o?(c=o.formatMessage(Xg.voiceEnabledSettingDescription),t[4]=o,t[5]=c):c=t[5];let d;return t[6]!==s||t[7]!==a||t[8]!==i||t[9]!==l||t[10]!==c?(d=r.jsx(cl,{label:a,isLoading:s,enabled:i,onChange:l,description:c}),t[6]=s,t[7]=a,t[8]=i,t[9]=l,t[10]=c,t[11]=d):d=t[11],d},mSe=()=>{"use forget";const t=G.c(8),e=sg(V8),n=ne();let s;t[0]!==n?(s=n.formatMessage(Xg.separateModeSetting),t[0]=n,t[1]=s):s=t[1];let o;t[2]!==n?(o=n.formatMessage(Xg.separateModeSettingDescription),t[2]=n,t[3]=o):o=t[3];let a;return t[4]!==e||t[5]!==s||t[6]!==o?(a=r.jsx(cl,{label:s,enabled:e,onChange:pSe,description:o}),t[4]=e,t[5]=s,t[6]=o,t[7]=a):a=t[7],a};function fJe({disabledTools:t,onDisabledToolsChanged:e}){var y;_.useEffect(()=>{B.logEvent("User Context GPT-4 Capabilities Shown")},[]);const n=V(),s=et(n),o=(y=s==null?void 0:s.isEnterprisey())!=null?y:!1,a=!ix(os.BrowsingAvailable)&&o,i=!ye(n,"934056609"),l=ye(n,"3199592968"),c=ne(),d=b=>{const C=t.includes(b)?t.filter(S=>S!==b):[...t,b];e(C)},u=Xo(),f=!ix(os.Canvas)&&o;var m;u!=null&&u.includes(os.SearchTool)&&!u.includes(os.SearchToolHoldout)?m=pu({tool:Pn.BROWSER,label:c.formatMessage({id:"userContextModal.tools.web",defaultMessage:"Web search"}),disabledTooltipLabel:c.formatMessage({id:"4WldgK",defaultMessage:"Web search is disabled by your organization"}),description:c.formatMessage({id:"userContexModal.tools.webSearchTooltip",defaultMessage:"Let ChatGPT automatically search the web for answers."}),enabled:!t.includes(Pn.BROWSER)&&!a,handleToolClick:d,disabled:a}):m=pu({tool:Pn.BROWSER,label:c.formatMessage({id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),disabledTooltipLabel:c.formatMessage({id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}),description:c.formatMessage({id:"userContexModal.tools.browserTooltip",defaultMessage:"Let ChatGPT browse the internet to find answers."}),enabled:!t.includes(Pn.BROWSER)&&!a,handleToolClick:d,disabled:a});const p=l?null:pu({tool:Pn.PYTHON,label:c.formatMessage({id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),description:c.formatMessage({id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Let ChatGPT execute code using Code Interpreter."}),enabled:!t.includes(Pn.PYTHON),handleToolClick:d}),g=pu({tool:Pn.CANMORE,label:c.formatMessage({id:"FW2C7Y",defaultMessage:"Canvas"}),description:c.formatMessage({id:"zPYZ4h",defaultMessage:"Collaborate with ChatGPT on text and code."}),enabled:!t.includes(Pn.CANMORE),handleToolClick:d}),h=pu({tool:Pn.ADVANCED_VOICE,label:c.formatMessage({id:"eHCnkb",defaultMessage:"Advanced voice"}),description:c.formatMessage({id:"OrvjWP",defaultMessage:"Have more natural conversations in voice mode."}),enabled:!t.includes(Pn.ADVANCED_VOICE),handleToolClick:d}),x=Y5(),v=ez(n);return r.jsxs(r.Fragment,{children:[m,p,!f&&g,r.jsx(_a,{children:r.jsx(fSe,{})}),v&&r.jsx(_a,{children:r.jsx(mSe,{})}),i&&x&&h]})}function pu({tool:t,label:e,disabledTooltipLabel:n,description:s,enabled:o,handleToolClick:a,disabled:i}){return r.jsx(_a,{children:r.jsx(cl,{label:e,enabled:o,onChange:()=>a(t),toggleTooltip:i&&n,description:s,disabled:i})})}const Xg=be({voiceEnabledSetting:{id:"oFt0Pe",defaultMessage:"ChatGPT Voice"},voiceEnabledSettingDescription:{id:"v/Uvaa",defaultMessage:"Enable voice mode in ChatGPT"},separateModeSetting:{id:"yhGAuw",defaultMessage:"Separate mode"},separateModeSettingDescription:{id:"+qGd/g",defaultMessage:"Enable ChatGPT Voice in full screen mode without real time transcripts and visuals"}});function pSe(t){Bt.settings.separateModeChanged({separateMode:t}),V8.set(t)}const mJe=()=>!gt.getItem("hasSeenIntegratedVoiceNuxBefore"),pJe=()=>{gt.setItem("hasSeenIntegratedVoiceNuxBefore",!0)};function gJe(){const t=ot();return r.jsx(vn,{primaryCtaText:r.jsx(j,{id:"k/qPdM",defaultMessage:"Manage tasks"}),onPrimaryCtaClick:()=>{t("/tasks")},title:r.jsx(j,{id:"mYNRrn",defaultMessage:"Youve reached your limit for scheduled tasks."}),content:r.jsx(j,{id:"Bwsb55",defaultMessage:"To schedule new ones, pause some of your existing tasks first."})})}const MF=Fe.HasSeenAdvancedVoiceOnMobile,gSe=window.location.origin+"/update-app",u7=window.location.origin+"/update-app?origin=qr";function hSe(t){const e=et(t),n=ye(t,"989108178");return e!=null&&n}function hJe(t){var l;const e=V(),n=hSe(e),{eligible:s,isLoading:o}=dt(MF);return{eligible:!(!n||!s||((l=t.conversationMode)==null?void 0:l.kind)!==wt.PrimaryAssistant)&&!o}}const _Se=3;function xSe(t){let e=gt.getItem(Ue.AdvancedVoiceOnMobileAnnouncementCount);Array.isArray(e)||(e=[]);const n=new Set(e);return t&&n.add(t),e=[...n],gt.setItem(Ue.AdvancedVoiceOnMobileAnnouncementCount,e),e.length}function _Je({onClose:t,clientThreadId:e}){const n=V(),s=_.useCallback(()=>{st(n,MF)},[n]),o=Qn(e);_.useEffect(()=>{const c=xSe(o);c>_Se&&(s(),Ye.logEvent("chatgpt_advanced_voice_on_mobile_announcement_limit_reached",c)),B.logEvent("Advanced Voice on Mobile: Announcement Shown"),Ye.logEvent("chatgpt_advanced_voice_on_mobile_announcement_shown"),B.logUpsellOrModalEvent(un,{eventId:"advanced_voice_on_mobile_announcement_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[o,s]);const a=_.useCallback(()=>{s(),B.logEvent("Advanced Voice on Mobile: Dismissed Announcement"),Ye.logEvent("chatgpt_advanced_voice_on_mobile_announcement_dismissed"),t&&t()},[s,t]),l={markAsDownloaded:_.useCallback(()=>{B.logEvent("Advanced Voice on Mobile: Link Clicked"),Ye.logEvent("chatgpt_advanced_voice_on_mobile_announcement_download_clicked"),s(),t&&t()},[s,t]),markAsViewed:a};return r.jsx(vSe,w({},l))}function ySe(){window.open(gSe,"_blank")}function vSe({markAsDownloaded:t,markAsViewed:e}){const n=ne(),[s,o]=_.useState(!1),a=_.useCallback(()=>{ySe(),t()},[t]),i=r.jsx("div",{className:"grow flex-row",children:r.jsxs("div",{className:"flex-column",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(j,w({},uc.advancedVoiceOnMobileBannerTitle))}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,w({},uc.advancedVoiceOnMobileBannerDescription))})]})}),l=!Td(),c=Ed();let d;return l?c?d=Object.freeze({primaryCtaQrLink:u7,onPrimaryCtaQrClick:()=>o(!0)}):d=Object.freeze({onSecondaryCtaClick:()=>o(!0),secondaryCtaText:n.formatMessage(uc.advancedVoiceOnMobileButtonScanCode)}):d=Object.freeze({onPrimaryCtaClick:a,primaryCtaText:n.formatMessage(uc.advancedVoiceOnMobileButtonDownload)}),r.jsxs(r.Fragment,{children:[r.jsx(vn,U(w({},d),{onDismiss:e,content:i})),l&&r.jsx(Mt,{testId:"modal-advanced-voice-on-mobile-qr",size:"custom",className:"w-[328px] max-w-[328px]",title:n.formatMessage(uc.advancedVoiceOnMobileQRModalTitle),isOpen:s,showCloseButton:!0,onClose:()=>o(!1),type:"success",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(KR,{className:"m-[24px] mt-[0px]",size:280,value:u7}),r.jsx("div",{className:"text-token-text-primary text-start",children:r.jsx(j,w({},uc.advancedVoiceOnMobileQRModalDescription))})]})})]})}const uc=be({advancedVoiceOnMobileBannerTitle:{id:"AdvancedVoiceOnMobile.banner.title",defaultMessage:"Download the latest iOS or Android app to try advanced voice mode"},advancedVoiceOnMobileBannerDescription:{id:"AdvancedVoiceOnMobile.banner.description",defaultMessage:"Get more natural, real-time conversations with advanced voice. Senses and responds to humor, sarcasm, interruptions, and more."},advancedVoiceOnMobileButtonDownload:{id:"AdvancedVoiceOnMobile.button.download",defaultMessage:"Download"},advancedVoiceOnMobileButtonScanCode:{id:"AdvancedVoiceOnMobile.button.scancode",defaultMessage:"Scan code"},advancedVoiceOnMobileButtonClose:{id:"AdvancedVoiceOnMobile.button.close",defaultMessage:"Close"},advancedVoiceOnMobileQRModalTitle:{id:"AdvancedVoiceOnMobile.qrmodal.title",defaultMessage:"Download the app"},advancedVoiceOnMobileQRModalDescription:{id:"AdvancedVoiceOnMobile.qrmodal.description",defaultMessage:"Scan the QR code on your phone to download the ChatGPT app."}}),AF=R(()=>P(()=>Promise.resolve().then(()=>tUe),void 0),{loading:t=>O(t)}),IF="1696863369",bSe=Fe.UseSidekick,CSe=Fe.SidekickLauncherOnboarding,SSe="https://help.openai.com/en/articles/9275200",wSe="https://persistent.oaistatic.com/sidekick/public/ChatGPT_Desktop_public_latest.dmg",jF="1697140512",kSe=Fe.UseSidetron,ESe=Fe.hasSeenWindowsAppOnboarding,TSe="https://help.openai.com/en/articles/9982051",MSe="https://apps.microsoft.com/detail/9nt1r1c2hh7j",NF="download";function PF(t,e,n){const s=et(t),o=ze(t,e).get(n,!1);return s!=null&&o}function ASe(t){return PF(t,IF,"has_sidekick_access")}function ISe(t){return PF(t,jF,"can_download_sidetron")}function Z5(t){const e=ASe(t),n=ISe(t);return{isSidekickAvailable:e,isSidetronAvailable:n,isDesktopAppAvailable:e||n}}function jSe(t){return t===NF}function NSe(){const t=ot(),{hash:e}=Hn(),n=jSe(e.slice(1));return{openModal:()=>{t({hash:NF})},closeModal:()=>{t({hash:""})},isOpen:n}}function xJe(t){var p;const e=V(),n=Z5(e),{isDesktopAppAvailable:s}=n,o=K5(n),i=ze(e,o.statsigLayerName).get("show_nux_banner",!1),{eligible:l,isLoading:c}=dt(o.downloadAnnouncement),{eligible:d,isLoading:u}=dt(o.onboardingAnnouncement);return{eligible:!(!l||!d||!s||((p=t.conversationMode)==null?void 0:p.kind)!==wt.PrimaryAssistant)&&i,isLoading:u||c}}function yJe({onClose:t}){const e=V(),n=Z5(e),s=K5(n);_.useEffect(()=>{B.logEvent(s.analyticsBannerShown),Ye.logEvent(s.statsigBannerShown),B.logUpsellOrModalEvent(un,{eventId:"".concat(s.downloadAnnouncement,"_banner_shown"),type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[s.analyticsBannerShown,s.statsigBannerShown,s.downloadAnnouncement]);const o=_.useCallback(()=>{st(e,s.downloadAnnouncement),B.logEvent(s.analyticsBannerDismissed),Ye.logEvent(s.statsigBannerDismissed),t&&t()},[e,t,s.analyticsBannerDismissed,s.statsigBannerDismissed,s.downloadAnnouncement]),a=_.useCallback(()=>{B.logEvent(s.analyticsBannerDownloadClicked),Ye.logEvent(s.statsigBannerDownloadClicked),st(e,s.downloadAnnouncement),t&&t()},[e,t,s.analyticsBannerDownloadClicked,s.statsigBannerDownloadClicked,s.downloadAnnouncement]),i=U(w({},s),{isAppAvailable:n.isDesktopAppAvailable,markAsDownloaded:a,markAsViewed:o});return r.jsx(LSe,w({},i))}function PSe(t){window.open(t,"_blank")}function K5(t){return t.isSidekickAvailable?USe:$Se}function RSe(t){return t.bannerTitle}function vJe(){const t=V(),{closeModal:e,isOpen:n}=NSe(),s=Z5(t),{isDesktopAppAvailable:o}=s,a=K5(s),i=_.useMemo(()=>({isDesktopAppAvailable:o}),[o]),l=()=>{B.logEvent(a.analyticsModalClosed,i),Ye.logEvent(a.statsigModalClosed),e()},c=()=>{B.logEvent(a.analyticsModalDownloadClicked,i),Ye.logEvent(a.statsigModalDownloadClicked),e()};if(_.useEffect(()=>{n&&(B.logEvent(a.analyticsModalShown,w({},i)),Ye.logEvent(a.statsigModalShown))},[i,n,a.analyticsModalShown,a.statsigModalShown]),!n)return null;const d=U(w({},a),{isAppAvailable:s.isDesktopAppAvailable,markAsDownloaded:c,markAsViewed:l});return r.jsx(OSe,w({},d))}function LSe({downloadUrl:t,markAsDownloaded:e,markAsViewed:n,messages:s,learnMoreUrl:o}){const a=ne(),i=_.useCallback(()=>{PSe(t),e()},[e,t]),l=r.jsx(j,w({},RSe(s))),c=r.jsx(j,w({},s.bannerContent)),d=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:l}),r.jsx("span",{className:"text-token-text-secondary",children:c}),r.jsxs(no,{href:o,className:"ms-2 gap-1 font-medium",children:[r.jsx(j,w({},s.learnMore)),r.jsx(AF,{className:"icon-sm inline-block"})]})]});return r.jsx(vn,{onPrimaryCtaClick:i,primaryCtaText:a.formatMessage(s.download),onDismiss:n,content:d})}function OSe({downloadUrl:t,markAsDownloaded:e,markAsViewed:n,isAppAvailable:s,messages:o,learnMoreUrl:a}){const i=o.modalTitle,l=r.jsx(j,w({},i)),c=r.jsx(j,w({},o.modalContent)),d=r.jsx("div",{className:"mt-2",children:r.jsxs(no,{href:a,className:"flex items-center gap-1 font-medium",children:[r.jsx(j,w({},o.learnMore)),r.jsx(AF,{className:"icon-sm"})]})}),u=r.jsx(_e,{as:"link",to:t,color:"primary",onClick:e,openNewTab:!0,children:r.jsx(j,w({},o.download))}),f=r.jsx(_e,{color:"secondary",onClick:n,children:r.jsx(j,w({},BSe.close))}),m=s?u:f,p=s?f:void 0;return r.jsx(wj,{onClose:n,title:l,description:c,actionButton:m,cancelButton:p,moreInfoLink:d})}const DSe=be({bannerTitle:{id:"SidekickOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for macOS 14+ with Apple Silicon"},bannerContent:{id:"SidekickOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Option + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidekickOnboarding.modalTitle",defaultMessage:"ChatGPT is available for macOS 14+ with Apple Silicon"},modalContent:{id:"SidekickOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Option + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidekickOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidekickOnboarding.download",defaultMessage:"Download"}}),FSe=be({bannerTitle:{id:"SidetronOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for Windows 10+"},bannerContent:{id:"SidetronOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Alt + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidetronOnboarding.modalTitle",defaultMessage:"ChatGPT is available for Windows 10+"},modalContent:{id:"SidetronOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Alt + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidetronOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidetronOnboarding.download",defaultMessage:"Download on Microsoft Store"}}),BSe=be({close:{id:"SidekickOnboarding.close",defaultMessage:"Close"}}),USe={downloadUrl:wSe,messages:DSe,learnMoreUrl:SSe,analyticsModalShown:"Sidekick: Download Modal Shown",analyticsModalClosed:"Sidekick: Download Modal Closed",analyticsModalDownloadClicked:"Sidekick: Download Modal Downloaded",analyticsBannerShown:"Sidekick: Announcement Shown",analyticsBannerDismissed:"Sidekcik: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidekick: Clicked Announcement Link",statsigLayerName:IF,statsigModalShown:"chatgpt_sidekick_modal_shown",statsigModalClosed:"chatgpt_sidekick_modal_closed",statsigModalDownloadClicked:"chatgpt_sidekick_modal_download_clicked",statsigBannerShown:"chatgpt_sidekick_announcement_shown",statsigBannerDismissed:"chatgpt_sidekick_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidekick_announcement_download_clicked",downloadAnnouncement:bSe,onboardingAnnouncement:CSe},$Se={downloadUrl:MSe,messages:FSe,learnMoreUrl:TSe,analyticsModalShown:"Sidetron: Download Modal Shown",analyticsModalClosed:"Sidetron: Download Modal Closed",analyticsModalDownloadClicked:"Sidetron: Download Modal Downloaded",analyticsBannerShown:"Sidetron: Announcement Shown",analyticsBannerDismissed:"Sidetron: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidetron: Clicked Announcement Link",statsigLayerName:jF,statsigModalShown:"chatgpt_sidetron_modal_shown",statsigModalClosed:"chatgpt_sidetron_modal_closed",statsigModalDownloadClicked:"chatgpt_sidetron_modal_download_clicked",statsigBannerShown:"chatgpt_sidetron_announcement_shown",statsigBannerDismissed:"chatgpt_sidetron_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidetron_announcement_download_clicked",downloadAnnouncement:kSe,onboardingAnnouncement:ESe};function VSe({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s=!0}){const o=V(),{data:a,isLoading:i,error:l}=Pfe({countryCode:t,ctx:o}),[c,d]=_.useState(()=>f7({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:a}));return _.useEffect(()=>{d(f7({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:a}))},[t,e,n,s,a,i,l]),c}function HSe({initialCountryCode:t}={}){const e=V(),n=Ln(e),s="userCountry"in n?n.userCountry:null,[o,a]=_.useState(t&&uj(t)?t:Sse({country:s,shouldUseDefaultCountryCode:!1}));return{country:o,setCountry:a,userCountry:s}}function f7({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:o}){return e!=null&&e.hasPaidSubscription()&&s?{currency:e==null?void 0:e.mustGetSubscriptionBillingCurrency(n)}:o?{country:t,currency:o.currencyConfig.symbol_code}:null}const GSe="promoCode",WSe="oai/apps/promoEligibleUpsellSuppression",bJe=t=>{var l,c,d;const{data:e,isLoading:n}=rt({enabled:!!t,queryKey:["promotionEligibility",t],queryFn:()=>ge.safeGet("/promotions/eligibility/{promo_code}",{parameters:{path:{promo_code:t}}})}),{data:s,isLoading:o}=rt({enabled:!!t&&(e==null?void 0:e.is_eligible),queryKey:["promotionMetadata",t],queryFn:()=>ge.safeGet("/promotions/metadata/{promo_code}",{parameters:{path:{promo_code:t}}})}),a=n||o,i=(e==null?void 0:e.ineligible_reason)&&(e&&!e.is_eligible&&(l=e.ineligible_reason)!=null?l:null);return{isEligible:(c=e==null?void 0:e.is_eligible)!=null?c:!1,isPromoLoading:a,promoCode:t,promoError:i,promoMetadata:(d=s==null?void 0:s.metadata)!=null?d:null}},po=window.localStorage,m7=Dt(In(()=>{var n;const t=(n=po==null?void 0:po.getItem(Ue.NoAuthBannerDisclaimerClientThreadId))!=null?n:null,e=(po==null?void 0:po.getItem(Ue.NoAuthHasAcceptedFooterDisclaimer))==="true";return{bannerDisclaimerClientThreadId:t,hasAcceptedFooterDisclaimer:e}})),RF={updateBannerDisclaimerClientThreadId(t){m7.setState(e=>{e.bannerDisclaimerClientThreadId=t}),po==null||po.setItem(Ue.NoAuthBannerDisclaimerClientThreadId,t)},updateHasAcceptedFooterDisclaimer(){m7.setState(t=>{t.hasAcceptedFooterDisclaimer=!0}),po==null||po.setItem(Ue.NoAuthHasAcceptedFooterDisclaimer,"true")}},zSe=R(()=>P(()=>import("./njem4hkd3vzqk90b.js"),__vite__mapDeps([327,1])),{loading:t=>O(t)}),l2=t=>{"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{className:"pointer-events-auto",children:n}),e[0]=n,e[1]=s):s=e[1],s};function qSe({clientThreadId:t}){const e=iv(t);return e!=null?r.jsx(YSe,{clientThreadId:t,gizmoId:e}):r.jsx(LF,{clientThreadId:t})}function YSe({clientThreadId:t,gizmoId:e}){const n=Si(e).data,s=Ve(t,he.getThreadCreateTime),o=(n==null?void 0:n.gizmo.updated_at)!=null?new Date(n.gizmo.updated_at):void 0;return(n==null?void 0:n.gizmo.gizmo_type)===tg.PROJECT||(n==null?void 0:n.gizmo.short_url)==null||o==null||s==null||o<=s?r.jsx(LF,{clientThreadId:t}):r.jsxs("div",{className:"text-token-text-tertiary",children:[r.jsx(zSe,{className:"text-token-secondary me-1 mb-1 inline-block h-4 w-4 stroke-0"}),r.jsx(j,U(w({},fs.outdatedGptDisclaimer),{values:{link:a=>r.jsx(Eo,{to:sT(n.gizmo.short_url),className:"underline",children:a},"gizmo-link-".concat(n.gizmo.short_url)),bold:a=>r.jsx("span",{className:"text-token-secondary font-semibold",children:a},"gizmo-bold-".concat(n.gizmo.short_url))}}))]})}function LF({clientThreadId:t}){const e=V(),n=et(e),s=Cn(),o=!tt(e),a=br.useStore(),i=Ve(t,he.hasUserMessage);if(n!=null&&n.isWorkspaceAccount()){if(s==null)return null;if(ye(e,"2462890004"))return r.jsx(l2,{children:s.name!=null?r.jsx(j,U(w({},fs.earlyAccessBusinessDisclaimer),{values:{workspaceName:s.name}})):r.jsx(j,w({},fs.earlyAccessBusinessDisclaimerNoName))});const c=s.data.ekmConfig!=null;return r.jsx(l2,{children:c?s.name!=null?r.jsx(j,U(w({},fs.businessDisclaimerWithEncryption),{values:{workspaceName:s.name}})):r.jsx(j,w({},fs.businessDisclaimerWithEncryptionNoName)):s.name!=null?r.jsx(j,U(w({},fs.businessDisclaimer),{values:{workspaceName:s.name}})):r.jsx(j,w({},fs.businessDisclaimerNoName))})}if(o&&!i)return r.jsx(Q5,{clientThreadId:t});let l=fs.mayProduceInaccurateInformation;return A5(e,n)&&(l=fs.mayProduceInaccurateInformationWithCookieConsent),r.jsx(l2,{children:r.jsx(j,U(w({},l),{values:{cookiePreferencesLink:c=>r.jsx("a",{onClick:d=>{d.preventDefault(),B.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!0}),a.openModal()},className:"text-token-text-primary decoration-token-text-primary cursor-pointer underline",children:c})}}))})}function Q5({clientThreadId:t,variant:e="default"}){const n=V(),s=et(n),{country:o}=kd(n);let a=e==="default"?o==="KR"?fs.mayProduceInaccurateInformationNoAuthKorea:fs.mayProduceInaccurateInformationNoAuthV2:o==="KR"?fs.agreeToTermsNoAuthKorea:fs.agreeToTermsNoAuthV2;const l=ze(n,"3533083032",{disableExposureLog:!0}).get("disclaimer_color_adjust",!1),c=br.useStore();return A5(n,s)&&(a=e==="default"?o==="KR"?fs.mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:fs.mayProduceInaccurateInformationNoAuthV2WithCookieConsent:o==="KR"?fs.agreeToTermsNoAuthKoreaWithCookieConsent:fs.agreeToTermsNoAuthV2WithCookieConsent),_.useEffect(()=>()=>{he.hasUserMessage(ft(t))&&RF.updateHasAcceptedFooterDisclaimer()},[t]),r.jsx("span",{className:W("pointer-events-auto text-sm",e==="byContinuing"?void 0:"leading-none"),children:r.jsx(j,U(w({},a),{values:{privacyLink:d=>r.jsx("a",{href:"https://openai.com/privacy",target:"_blank",className:W(l?"text-token-text-secondary":"text-token-text-primary","decoration-token-text-primary underline"),onClick:()=>{Ye.logEvent("chatgpt_footer_disclaimer_privacy_link_clicked"),B.logEvent("Footer Disclaimer Privacy Link Clicked")},rel:"noreferrer",children:d},"privacy_link"),termsLink:d=>r.jsx("a",{href:"https://openai.com/terms",target:"_blank",className:W(l?"text-token-text-secondary":"text-token-text-primary","decoration-token-text-primary underline"),onClick:()=>{Ye.logEvent("chatgpt_footer_disclaimer_terms_link_clicked"),B.logEvent("Footer Disclaimer Terms Link Clicked")},rel:"noreferrer",children:d},"terms_link"),koreaAddendumLink:d=>r.jsx("a",{href:"https://openai.com/ko/policies/kr-privacy-policy-addendum",target:"_blank",className:"text-token-text-primary decoration-token-text-primary underline",onClick:()=>{Ye.logEvent("chatgpt_footer_disclaimer_korea_addendum_link_clicked"),B.logEvent("Footer Disclaimer Korea Addendum Link Clicked")},rel:"noreferrer",children:d},"addendum_link"),cookiePreferencesLink:d=>r.jsx("a",{onClick:u=>{u.preventDefault(),c.openModal(),B.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!1})},className:"text-token-text-primary decoration-token-text-primary cursor-pointer underline",children:d},"cookie_preferences_link")}}))})}const fs=be({mayProduceInaccurateInformation:{id:"thread.chatgptMayProduceInaccurateInformation-oct-30",defaultMessage:"ChatGPT can make mistakes. Check important info."},mayProduceInaccurateInformationWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationWithCookieConsent-may-12",defaultMessage:"ChatGPT can make mistakes. Check important info. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthV2:{id:"thread.chatgptMayProduceInaccurateInformationNoAuth-may-06",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},agreeToTermsNoAuthV2:{id:"thread.agreeToTermsNoAuth-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},mayProduceInaccurateInformationNoAuthV2WithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthV2WithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthV2WithCookieConsent:{id:"thread.agreeToTermsNoAuthV2WithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthKorea:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKorea-may-06",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},agreeToTermsNoAuthKorea:{id:"thread.agreeToTermsNoAuthKorea-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthKoreaWithCookieConsent:{id:"thread.agreeToTermsNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},businessDisclaimer:{id:"thread.businessDisclaimer-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models."},businessDisclaimerNoName:{id:"thread.businessDisclaimerNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models."},businessDisclaimerWithEncryption:{id:"thread.businessDisclaimerWithEncryption-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},businessDisclaimerWithEncryptionNoName:{id:"thread.businessDisclaimerWithEncryptionNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},outdatedGptDisclaimer:{id:"thread.outdatedGptDisclaimer.0",defaultMessage:"<bold>New version of GPT available</bold> - Continue chatting to use the old version, or start a <link>new chat</link> for the latest version."},earlyAccessBusinessDisclaimer:{id:"thread.earlyAccessBusinessDisclaimer",defaultMessage:"ChatGPT can make mistakes. OpenAI uses {workspaceName} workspace data to train its models."},earlyAccessBusinessDisclaimerNoName:{id:"thread.earlyAccessBusinessDisclaimerNoName",defaultMessage:"ChatGPT can make mistakes. OpenAI uses your workspace data to train its models."}});function CJe({threadId:t}){const e=V(),n=ne(),[s,o]=_.useState(!1);_.useEffect(()=>{RF.updateBannerDisclaimerClientThreadId(t),Ye.logEvent("chatgpt_unauthenticated_legal_banner"),B.logEvent("Unauthenticated Legal Banner",{threadId:t})},[t]);const a=RT(e)?fr.bannerTermsDisclaimer:fr.bannerTermsDisclaimerSafetyAndAbuse;return s?null:r.jsx(vn,{onDismiss:()=>{o(!0),B.logEventWithStatsig("Unauthenticated Legal Banner Dismissed Clicked","chatgpt_unauthenticated_legal_banner_dismissed")},content:r.jsxs(r.Fragment,{children:[r.jsx(Q5,{clientThreadId:t}),r.jsx("br",{}),n.formatMessage(a,{learnMoreLink:i=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{Ye.logEvent("chatgpt_unauthenticated_banner_learn_more_clicked"),B.logEvent("Unauthenticated Signup Banner Learn More Clicked",{threadId:t})},children:i})})]})})}function SJe({threadId:t,showLogin:e=!0}){const n=V(),s=ne(),a=ze(n,"2118136551").get("sign_up_button_has_the_word_free",!0);return _.useEffect(()=>{Ye.logEvent("chatgpt_unauthenticated_signup_banner"),B.logEvent("Unauthenticated Signup Banner",{threadId:t})},[t]),r.jsx(vn,{content:s.formatMessage(fr.bannerSignup),onPrimaryCtaClick:()=>{Zt(n,{fallbackScreenHint:"signup",callback:i=>{Ye.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),B.logSignUpButtonClicked({location:"Chat Stage Signup Banner",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_SIGNUP_BANNER)},skipLoginModal:!1})},primaryCtaText:s.formatMessage(a?fr.bannerSignupButtonWithFree:fr.bannerSignupButton),onSecondaryCtaClick:e?()=>{Zt(n,{fallbackScreenHint:"login",callback:i=>{Ye.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),B.logLogInButtonClicked({location:"Chat Stage Signup Banner",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_SIGNUP_BANNER)},skipLoginModal:!1})}:void 0,secondaryCtaText:e?s.formatMessage(pt.logInButtonText):void 0})}function wJe({threadId:t,showSignUp:e}){const n=V(),s=ne(),a=ze(n,"2118136551").get("sign_up_button_has_the_word_free",!0);return _.useEffect(()=>{Ye.logEvent("chatgpt_unauthenticated_login_banner"),B.logEvent("Unauthenticated Login Banner",{threadId:t})},[t]),r.jsx(vn,{content:s.formatMessage(fr.bannerSignup),onPrimaryCtaClick:()=>{Zt(n,{fallbackScreenHint:"login",callback:i=>{Ye.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),B.logLogInButtonClicked({location:"Chat Stage Login Banner",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})},primaryCtaText:s.formatMessage(pt.logInButtonText),onSecondaryCtaClick:e?()=>{Zt(n,{fallbackScreenHint:"signup",callback:i=>{Ye.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),B.logSignUpButtonClicked({location:"Chat Stage Login Banner",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})}:void 0,secondaryCtaText:e?a?s.formatMessage(fr.bannerSignupButtonWithFree):s.formatMessage(fr.bannerSignupButton):void 0})}const fr=be({bannerTermsDisclaimer:{id:"bannerTermsDisclaimer",defaultMessage:"Don't share sensitive info. Chats may be reviewed and used to train our models. <learnMoreLink>Learn more</learnMoreLink>"},bannerTermsDisclaimerSafetyAndAbuse:{id:"pDsoLk",defaultMessage:"Don't share sensitive information. Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"},bannerSignup:{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."},bannerSignupButton:{id:"hedgehog.banner_signup_button",defaultMessage:"Sign up"},bannerSignupButtonWithFree:{id:"xL5gsL",defaultMessage:"Sign up for free"}});function kJe({threadId:t}){const e=V(),n=ne(),{isOpen:s,close:o,markViewedInClientThreadId:a,viewedInClientThreadId:i}=lN(),l=ZSe(e),c=Ve(t,he.hasUserMessage);return _.useEffect(()=>{i?At(i)!==At(t)&&o():(a(t),B.logEventWithStatsig("New User Legal Banner Shown","chatgpt_new_user_legal_banner_shown",{threadId:t}))},[t,i,o,a,l]),_.useEffect(()=>{!l||!s||!c||i&&At(i)!==At(t)||(st(e,Fe.Onboarding),o())},[e,o,c,l,s,t,i]),s?r.jsx(vn,{onDismiss:()=>{l&&st(e,Fe.Onboarding),o(),B.logEventWithStatsig("New User Legal Banner Dismissed Clicked","chatgpt_new_user_legal_banner_dismissed")},content:r.jsxs(r.Fragment,{children:[r.jsx(Q5,{clientThreadId:t}),r.jsx("br",{}),n.formatMessage(fr.bannerTermsDisclaimer,{learnMoreLink:d=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{B.logEventWithStatsig("New User Legal Banner Learn More Clicked","chatgpt_new_user_legal_banner_learn_more_clicked",{threadId:t})},children:d})})]})}):null}function ZSe(t){return ze(t,"109457",{disableExposureLog:!0}).get("is_new_user_banner_disclaimer_enabled",!1)}const p7={logCouponCheck(t,e){Ie.count(je.TEAMS,"promo_campaign.web.check_coupon",[{key:"coupon",value:t},{key:"outcome",value:e}]),B.logEvent("Promo Campaign: Check Coupon",{coupon:t,outcome:e})},logCouponApplied(t){Ie.count(je.TEAMS,"promo_campaign.web.coupon_applied",[{key:"coupon",value:t}]),B.logEvent("Promo Campaign: Coupon Applied",{coupon:t})}},KSe=t=>{var e,n,s,o,a;return U(w({},t),{redeemed_at:(e=t.redeemed_at)!=null?e:null,user_redeemed_at:(n=t.user_redeemed_at)!=null?n:null,workspace_redeemed_at:(s=t.workspace_redeemed_at)!=null?s:null,promotion_length_days:(o=t.promotion_length_days)!=null?o:null,expires_at:(a=t.expires_at)!=null?a:null})},QSe=t=>({coupon:t.coupon,state:t.state,redemption:t.redemption?KSe(t.redemption):null}),JSe=t=>{const e=rt({queryKey:["promoCampaignEligibility",t],queryFn:async()=>{const n=await ge.safeGet("/promo_campaign/check_coupon",{parameters:{query:{coupon:t}},authOption:nn.SendIfAvailable});return QSe(n)},enabled:!!t});return _.useEffect(()=>{e.isSuccess&&e.data?p7.logCouponCheck(t,e.data.state):e.isError&&p7.logCouponCheck(t,"error")},[e.isSuccess,e.isError,e.data,t]),e},by=25,XSe=by/100,ewe="team_seats_promo";function OF(t){return t==null||!Number.isFinite(t)?null:Math.ceil(t*XSe)}function EJe(t){const{data:e}=JSe(ewe),n=(e==null?void 0:e.state)==="eligible",s=_.useMemo(()=>OF(t),[t]);return _.useMemo(()=>{const o=e!=null?e:null,a=n&&s!=null?s:null;return{eligible:n,seatThresholdGap:a,promoEligibility:o}},[e,n,s])}function twe(t){const e=ne(),n=Ut();return rt({queryKey:["organization-subscription",t],queryFn:async()=>await ge.safeGet("/subscriptions",{parameters:{query:t}}).catch(s=>(n.danger(e.formatMessage(g7.subscriptionLoadError,{error:s.message}),{toastId:"subscription_data",loggingTitle:g7.subscriptionLoadError.defaultMessage,loggingDescription:"Failed to load subscription"}),null)),enabled:t.account_id!=null||t.organization_id!=null})}function DF(){var i;const t=Cn(),e=t==null?void 0:t.id,n=(i=t==null?void 0:t.data.organizationId)!=null?i:void 0,s=t==null?void 0:t.isEnterprisey(),a=!!(t!=null&&t.isFreeWorkspace())?{}:s?{organization_id:n}:{account_id:e};return twe(a)}function TJe(t,e,n,s,o=!1){return rt({queryKey:["get-subscription-update-preview",e,s,n],queryFn:async()=>await ge.safeGet("/subscriptions/update/preview",{parameters:{query:{account_id:t,updated_plan:n,updated_seats:e,updated_promo_id:s}}}),enabled:!o})}function MJe(t){const e=jt();return zt({mutationFn:async n=>ge.safePost("/subscriptions/cancel",{requestBody:{account_id:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]}),e.invalidateQueries(tz())}})}function AJe(t){const e=jt();return zt({mutationFn:async n=>ge.safePost("/subscriptions/renew",{requestBody:{account_id:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}function IJe(t){const e=jt();return zt({mutationFn:({accountId:n,updatedPlan:s,updatedSeats:o,updatedPriceInterval:a,updatedPromoId:i,updatedPromoCode:l,updatedPromoCampaign:c})=>ge.safePost("/subscriptions/update",{requestBody:{account_id:n,updated_plan:s,updated_seats:o,updated_price_interval:a,updated_promo_id:i,updated_promo_code:l,updated_promo_campaign:c}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}const g7=be({subscriptionLoadError:{id:"useSubscriptionData.subscriptionLoadError",defaultMessage:"Failed to load subscription: {error}. Contact support@openai.com if error persists."}}),nwe=R(()=>P(()=>import("./dxhrwa9msjjo4w51.js"),__vite__mapDeps([344,1])),{loading:t=>O(t)});function jJe(){const t=V(),e=ot(),{data:n}=DF(),s=n==null?void 0:n.seats_entitled,o=_.useMemo(()=>OF(s),[s]);return _.useEffect(()=>{Ie.count(je.TEAMS,"teams.web.teamSeatsPromo.impressionAnnouncementBanner"),B.logEvent("Teams: Show Team Seats Promo Announcement Banner"),B.logUpsellOrModalEvent(un,{eventId:"team_seats_promo_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),o==null?null:r.jsx(vn,{icon:r.jsx(nwe,{className:"h-6 w-6 text-[#4338CA]","aria-hidden":"true"}),title:r.jsx(j,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.title.withThreshold",defaultMessage:"Add {seatsCount, plural, one {# seat} other {# seats}}, get {discount}% off",values:{discount:by,seatsCount:o}}),content:r.jsx(j,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.content.withThreshold",defaultMessage:"Invite team members to work with you in ChatGPT and save {discount}% for a month when you add {seatsCount, plural, one {# seat} other {# seats}}.",values:{discount:by,seatsCount:o}}),primaryCtaColor:"purple",className:"border-[#DDD8FF] bg-[#F2F0FF]",primaryCtaText:r.jsx(j,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.primaryCta",defaultMessage:"Add Seats"}),onPrimaryCtaClick:()=>{Ie.count(je.TEAMS,"teams.web.teamSeatsPromo.clickAnnouncementBannerPrimaryCta"),B.logEvent("Teams: Click Team Seats Promo Announcement Banner"),st(t,Fe.hasSeenTeamSeatsPromoAnnouncement),e("/admin/billing")},onDismiss:()=>{Ie.count(je.TEAMS,"teams.web.teamSeatsPromo.dismissAnnouncementBanner"),B.logEvent("Teams: Close Team Seats Promo Announcement Banner"),st(t,Fe.hasSeenTeamSeatsPromoAnnouncement)}})}function swe(t){return ye(t,"878458344")}const NJe=t=>{const e=V(),n=swe(e),{eligible:s}=dt(Fe.hasSeenTeamsContextualAnswersUpsell),o=cn(),a=o!=null&&r8(o),l=!!Ve(t,d=>he.findNode(d,u=>u.message.author.role===Ke.Tool&&u.message.author.name===Pn.MYFILES_BROWSER));return n&&s&&a&&l};function PJe(){const t=V(),e=ot();return _.useEffect(()=>{Ie.count(je.TEAMS,"teams.web.caUpsell.impressionAnnouncementBanner"),B.logEvent("Teams: Show CA Upsell Announcement Banner"),B.logUpsellOrModalEvent(un,{eventId:"teams_contextual_upsell_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(vn,{title:r.jsx(j,{id:"components.pricing.teams.contextualUpsellAnnouncement.title",defaultMessage:"Connect to Google Drive directly with the Business plan"}),content:r.jsx(j,{id:"components.pricing.teams.contextualUpsellAnnouncement.content",defaultMessage:"Summarize, analyze, and get smarter answers from your teams docs."}),primaryCtaText:r.jsx(j,{id:"components.pricing.teams.contextualUpsellAnnouncement.primaryCtaText",defaultMessage:"Get Business"}),onPrimaryCtaClick:()=>{Ie.count(je.TEAMS,"teams.web.caUpsell.clickAnnouncementBannerPrimaryCta"),B.logEvent("Teams: Click CA Upsell Announcement Banner"),st(t,Fe.hasSeenTeamsContextualAnswersUpsell),e({hash:Xf,search:window.location.search},{state:{[h1]:"CA upsell announcement banner"}})},onDismiss:()=>{Ie.count(je.TEAMS,"teams.web.caUpsell.dismissAnnouncementBanner"),B.logEvent("Teams: Close CA Upsell Announcement Banner"),st(t,Fe.hasSeenTeamsContextualAnswersUpsell)}})}const h7=Fe.hasSeenAgentModeAnnouncementBanner,RJe=t=>ye(t,"785520609");function LJe(){const t=V(),e=$s();return _.useEffect(()=>{B.logUpsellOrModalEvent(un,{eventId:"agent_mode_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(vn,{title:r.jsx(j,{id:"VjCFGa",defaultMessage:"ChatGPT can now do more work for you"}),content:r.jsx(j,{id:"idZZDZ",defaultMessage:"Agent mode can do even more complex tasks, like spreadsheets, research, and reservations, all on its own."}),primaryCtaText:r.jsx(j,{id:"xT8iIw",defaultMessage:"Try agent mode"}),onPrimaryCtaClick:()=>{st(t,h7),e(hs)},onDismiss:()=>{st(t,h7)}})}function OJe({onDismissSideEffect:t,onPrimaryCtaClickSideEffect:e}){var u;const n=ne(),s=V(),o=ot(),a=Ln(s),{locale:i,usedDefault:l}=FF((u=a.cfIpCity)!=null?u:""),c=n.formatMessage(rwe[i]),d=n.formatMessage({id:"language-upsell-banner.query",defaultMessage:"Talk to me in {language}"},{language:c});return _.useEffect(()=>{B.logEventWithStatsig("Language Upsell Banner Shown","chatgpt_web_language_upsell_banner_shown",{inferred_locale:i,used_default:l})},[i,l]),r.jsx(vn,{title:n.formatMessage({id:"language-upsell-banner.title",defaultMessage:"{hello} Want to chat in {language}?"},{hello:awe[i],language:c}),content:l?n.formatMessage({id:"language-upsell-banner.content.default",defaultMessage:"ChatGPT speaks many languages. Give it a try, just by typing."}):n.formatMessage({id:"language-upsell-banner.content.language",defaultMessage:"ChatGPT speaks your local language  give it a try, just by typing."}),primaryCtaText:n.formatMessage({id:"language-upsell-banner.primary-cta",defaultMessage:"Try it"}),onPrimaryCtaClick:()=>{e(),o("/?q=".concat(encodeURIComponent(d)))},onDismiss:t})}const owe=sn(()=>If(Ue.HasManuallyClosedLanguageUpsellBanner,()=>!1,{coerceStoredValue:Vu}));function DJe(t){var c,d;const e=V(),n=Ve(t,(c=he.getIsNewConversation)!=null?c:(()=>!1)),s=Ln(e),{country:o}=kd(e),a=ze(e,"723297404"),i=s.locale,{locale:l}=FF((d=s.cfIpCity)!=null?d:"");return ae(()=>n&&(o==null?void 0:o.toUpperCase())==="IN"&&i!==l&&a.get("show_india_language_upsell_banner",!1)&&!owe(e))}function FF(t){return t in _7?{locale:_7[t],usedDefault:!1}:{locale:"hi-IN",usedDefault:!0}}const _7={Bengaluru:"kn-IN",Mumbai:"mr-IN",Hyderabad:"te-IN",Chennai:"ta-IN",Pune:"mr-IN","New Delhi":"hi-IN",Delhi:"hi-IN",Kolkata:"bn-BD",Ahmedabad:"gu-IN",Kochi:"ml",Jaipur:"hi-IN",Lucknow:"hi-IN",Indore:"hi-IN",Patna:"hi-IN",Guwahati:"as",Coimbatore:"ta-IN",Chandigarh:"pa",Bhopal:"hi-IN",Surat:"gu-IN",Bhubaneswar:"or",Gurugram:"hi-IN",Nagpur:"mr-IN",Noida:"hi-IN",Ludhiana:"pa",Dehradun:"hi-IN",Thrissur:"ml",Agra:"hi-IN",Visakhapatnam:"te-IN",Vadodara:"gu-IN",Thiruvananthapuram:"ml",Mangalore:"kn-IN",Ranchi:"hi-IN",Ghaziabad:"hi-IN",Kanpur:"hi-IN",Vijayawada:"te-IN",Madurai:"ta-IN",Varanasi:"hi-IN",Srinagar:"hi-IN",Salem:"ta-IN",Faridabad:"hi-IN",Jodhpur:"hi-IN",Raipur:"hi-IN",Jammu:"hi-IN",Sopur:"hi-IN",Nashik:"mr-IN","Navi Mumbai":"mr-IN",Rajkot:"gu-IN",Prayagraj:"hi-IN",Meerut:"hi-IN",Thane:"mr-IN",Kozhikode:"ml",Jabalpur:"hi-IN"},awe={"kn-IN":"!","mr-IN":"!","te-IN":"!","ta-IN":"!","hi-IN":"!","bn-BD":"!","gu-IN":"!",ml:"!",as:"!",pa:"  !",or:"!"},rwe=be({"kn-IN":{id:"language-upsell-banner.locale.kn",defaultMessage:"Kannada"},"mr-IN":{id:"language-upsell-banner.locale.mr",defaultMessage:"Marathi"},"te-IN":{id:"language-upsell-banner.locale.te",defaultMessage:"Telugu"},"ta-IN":{id:"language-upsell-banner.locale.ta",defaultMessage:"Tamil"},"hi-IN":{id:"language-upsell-banner.locale.hi",defaultMessage:"Hindi"},"bn-BD":{id:"language-upsell-banner.locale.bn",defaultMessage:"Bengali"},"gu-IN":{id:"language-upsell-banner.locale.gu",defaultMessage:"Gujarati"},ml:{id:"language-upsell-banner.locale.ml",defaultMessage:"Malayalam"},as:{id:"language-upsell-banner.locale.as",defaultMessage:"Assamese"},pa:{id:"language-upsell-banner.locale.pa",defaultMessage:"Punjabi"},or:{id:"language-upsell-banner.locale.or",defaultMessage:"Odia"}});function FJe(t){const e=V();return ae(()=>j3(e,bn(yt(e,t)).id))}function BJe(t){return null}const iwe=1;function BF(){const[t,e]=Ei(Ue.LastSeenNoAuthTrialsBannerAt,null,o=>o!=null&&typeof o=="number"),n=t==null||ba(Date.now(),Ti(t))>=iwe;return{markBannerSeen:()=>{e(Ta(new Date)),localStorage.setItem(Ue.LastSeenNoAuthTrialsBannerAt,JSON.stringify(Ta(new Date)))},canBeSeen:n}}function UJe(){const t=V(),e=!tt(t),{canBeSeen:n}=BF();return e&&n&&ze(t,"1074962980").get("is_plus_1_month_free_enabled",!1)}function $Je(){const t=ot(),{markBannerSeen:e}=BF();return _.useEffect(()=>{B.logEventWithStatsig("No Auth Trials Banner Shown","chatgpt_no_auth_trials_banner_shown"),B.logUpsellOrModalEvent(un,{eventId:"no_auth_trials_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(vn,{icon:r.jsx("img",{src:"https://openaiassets.blob.core.windows.net/$web/chatgpt/filled-plus-icon.png",alt:"",style:{width:24,height:24}}),onPrimaryCtaClick:()=>{B.logEventWithStatsig("No Auth Trials Banner Try Plus free Button Clicked","chatgpt_no_auth_trials_banner_try_plus_free_button_clicked"),sessionStorage.setItem("poijcwa","jwoid"),xn(t,"No auth trials banner",void 0,void 0,_1),e()},primaryCtaText:r.jsx(j,w({},pt.tryPlusTrial)),onDismiss:()=>{B.logEventWithStatsig("No Auth Trials Banner Dismissed","chatgpt_no_auth_trials_banner_dismissed"),e()},title:r.jsx(j,w({},x7.noAuthTrialUpsellTitle)),content:r.jsx(j,w({},x7.noAuthTrialUpsellDescription))})}const x7=be({noAuthTrialUpsellTitle:{id:"sSjBA2",defaultMessage:"Get better, faster responses for free"},noAuthTrialUpsellDescription:{id:"4yEtmJ",defaultMessage:"Upgrade to ChatGPT Plus. Your first 30 days are on us."}}),y7=Fe.DesktopOperatorAnnouncement;function VJe(){const t=V();_.useEffect(()=>{B.logEventWithStatsig("Operator Announcement Banner Shown","chatgpt_operator_announcement_banner_shown"),B.logUpsellOrModalEvent(un,{eventId:"operator_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]);const e=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(j,{id:"/bPUPL",defaultMessage:"Delegate daily tasks with Operator"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"ODMLVJ",defaultMessage:"With the Pro plan, you can try the Operator research preview  an agent that browses the web to handle tasks for you."})})]});return r.jsx(vn,{onPrimaryCtaClick:()=>{st(t,y7),B.logEventWithStatsig("Operator Announcement Banner Try Operator Button Clicked","chatgpt_operator_announcement_banner_try_operator_button_clicked"),window.open("".concat(nz,"?utm_source=chatgpt"),"_blank")},primaryCtaText:r.jsx(j,{id:"eDZIyV",defaultMessage:"Try Operator"}),onDismiss:()=>{st(t,y7),B.logEventWithStatsig("Operator Announcement Banner Dismissed","chatgpt_operator_announcement_banner_dismissed")},content:e})}function HJe(t){return ye(t,"2429530106")}const J5=Wn(()=>{const t=Be("loading");return{auraAnnouncementBannerState$:t,setAuraAnnouncementBannerState:n=>{t.set(n)}}});function lwe(){const t=localStorage.getItem(Ue.AuraAnnouncementBannerImpressions),e=t?parseInt(t):null;e==null||isNaN(e)?localStorage.setItem(Ue.AuraAnnouncementBannerImpressions,JSON.stringify(1)):localStorage.setItem(Ue.AuraAnnouncementBannerImpressions,JSON.stringify(e+1)),localStorage.setItem(Ue.LastSeenAuraAnnouncementBannerAt,JSON.stringify(Ta(new Date))),localStorage.getItem(Ue.FirstSeenAuraAnnouncementBannerAt)==null&&localStorage.setItem(Ue.FirstSeenAuraAnnouncementBannerAt,JSON.stringify(Ta(new Date)))}function cwe(t){const e=localStorage.getItem(Ue.FirstSeenAuraAnnouncementBannerAt);if(!e)return!1;const n=parseInt(e);if(isNaN(n))return!1;const s=Ti(n);return ba(new Date,s)>t}function dwe(t){const e=localStorage.getItem(Ue.AuraAnnouncementBannerImpressions);if(!e)return!1;const n=parseInt(e);return isNaN(n)?!1:n>=t}function GJe(t){const e=is(t,"619645130"),n=e.get("max_days_visible",-1);if(n>=0&&cwe(n))return!0;const s=e.get("max_impressions",-1);if(s>=0&&dwe(s))return!0;if(e.get("limit_one_impression_per_day",!1)){const a=localStorage.getItem(Ue.LastSeenAuraAnnouncementBannerAt),i=a?parseInt(a):null;if(i!=null&&!isNaN(i)){const l=Ti(i);if(ba(new Date,l)<1)return!0}}return!1}function WJe(){return localStorage.getItem(Ue.HasDismissedAuraAnnouncementBanner)!=null}function UF(){localStorage.setItem(Ue.HasDismissedAuraAnnouncementBanner,"true")}const uwe=R(()=>P(()=>Promise.resolve().then(()=>a_),void 0),{loading:t=>O(t)});function $F(){"use forget";const t=G.c(5),e=V(),{eligible:n}=dt(Fe.hasSeenPlusFreeTrialHomepageAnnouncementBanner);let s;t[0]!==e?(s=()=>st(e,Fe.hasSeenPlusFreeTrialHomepageAnnouncementBanner),t[0]=e,t[1]=s):s=t[1];const o=s;let a;return t[2]!==n||t[3]!==o?(a={markAsViewed:o,eligible:n},t[2]=n,t[3]=o,t[4]=a):a=t[4],a}const VF="2850117686",fwe="is-plus-free-trial-homepage-announcement-banner-enabled",mwe="hide_thread_header_upgrade_pill_button",X5=Be(!1);function pwe(){"use forget";return ae(gwe)}function gwe(){return X5()}function zJe(t){"use forget";const e=G.c(4),{clientThreadId:n}=t,s=V();let o;e[0]!==s?(o=J5(s),e[0]=s,e[1]=o):o=e[1];const{auraAnnouncementBannerState$:a}=o,l=ae(a)!=="not-shown",c=Wj();let d;e[2]!==n?(d=Cr(n),e[2]=n,e[3]=d):d=e[3];const u=d,f=Ve(n,he.hasUserMessage),m=u&&!f,{eligible:p}=$F();return!l&&p&&c&&m}function qJe(t){const n=ze(t,VF).get(fwe,!1),s=bb(t);return n&&!s}function hwe(t){"use forget";const e=G.c(7),{onPrimaryCtaClick:n,onDismiss:s}=t;let o,a,i,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(uwe,{className:"text-[#5D5BD0] dark:text-[#DCDBF6]","aria-hidden":!0}),a=r.jsx(j,{id:"components.promptTextarea.plusFreeTrialAnnouncement.title",defaultMessage:"Get better, faster responses for free"}),i=r.jsx(j,{id:"components.promptTextarea.plusFreeTrialAnnouncement.content",defaultMessage:"Upgrade to ChatGPT Plus. Your first 30 days are on us."}),l=r.jsx(j,{id:"components.promptTextarea.plusFreeTrialAnnouncement.primaryCta",defaultMessage:"Try Plus for free"}),e[0]=o,e[1]=a,e[2]=i,e[3]=l):(o=e[0],a=e[1],i=e[2],l=e[3]);let c;return e[4]!==s||e[5]!==n?(c=r.jsx(vn,{icon:o,title:a,content:i,primaryCtaText:l,primaryCtaClassName:"px-5 text-sm font-semibold",primaryCtaColor:"primary",onPrimaryCtaClick:n,onDismiss:s,isElevated:!1}),e[4]=s,e[5]=n,e[6]=c):c=e[6],c}function YJe(){"use forget";const t=G.c(9),{markAsViewed:e}=$F(),n=ot();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],t[0]=s):s=t[0],_.useEffect(_we,s);let o;t[1]!==e||t[2]!==n?(o=()=>{B.logEventWithStatsig("Plus Free Trial Homepage Announcement Banner CTA Clicked","chatgpt_plus_free_trial_homepage_announcement_banner_cta_clicked"),e(),xn(n,"Plus Free Trial Homepage Announcement Banner",void 0,void 0,_1)},t[1]=e,t[2]=n,t[3]=o):o=t[3];const a=o;let i;t[4]!==e?(i=()=>{B.logEventWithStatsig("Plus Free Trial Homepage Announcement Banner Dismissed","chatgpt_plus_free_trial_homepage_announcement_banner_dismissed"),e()},t[4]=e,t[5]=i):i=t[5];const l=i;let c;return t[6]!==l||t[7]!==a?(c=r.jsx(hwe,{onPrimaryCtaClick:a,onDismiss:l}),t[6]=l,t[7]=a,t[8]=c):c=t[8],c}function _we(){return B.logEventWithStatsig("Plus Free Trial Homepage Announcement Banner Shown","chatgpt_plus_free_trial_homepage_announcement_banner_shown"),B.logUpsellOrModalEvent(un,{eventId:"plus_free_trial_homepage_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER}),X5.set(!0),xwe}function xwe(){X5.set(!1)}const ywe=20,vwe=7;function ZJe(){const t=ot(),e=V();return _.useEffect(()=>{B.logEventWithStatsig("Plus Upsell Banner Shown","chatgpt_plus_upsell_banner_shown"),B.logUpsellOrModalEvent(un,{eventId:"plus_upsell_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(vn,{onPrimaryCtaClick:()=>{B.logEventWithStatsig("Plus Upsell Banner Get Plus Button Clicked","chatgpt_plus_upsell_banner_get_plus_button_clicked"),xn(t,"Plus upsell banner"),v7()},primaryCtaText:r.jsx(j,w({},em(e))),onDismiss:()=>{B.logEventWithStatsig("Plus Upsell Banner Dismissed","chatgpt_plus_upsell_banner_dismissed"),v7()},title:r.jsx(j,{id:"CEHXxQ",defaultMessage:"Unlock more with Plus"}),content:r.jsx(j,{id:"s+Afdr",defaultMessage:"ChatGPT Plus gives you higher limits, smarter models, and Sora for video."})})}const HF=Dt(In(()=>({lastSeenPlusUpsellBannerAt:bwe()})));function v7(){const t=new Date;HF.setState(e=>{e.lastSeenPlusUpsellBannerAt=t}),localStorage.setItem(Ue.LastSeenPlusUpsellBannerAt,String(Ta(new Date)))}function bwe(){const t=localStorage.getItem(Ue.LastSeenPlusUpsellBannerAt);return t?Ti(Number(t)):null}function KJe(){const t=Jh(jZ),e=HF(i=>i.lastSeenPlusUpsellBannerAt),n=Cn(),s=!!(n!=null&&n.isFree()&&(n!=null&&n.features.includes("plus_upsell"))),o=t>=ywe,a=e==null||ba(Date.now(),e)>=vwe;return s&&o&&a}const GF=({intl:t,conversation:e,systemHint:n})=>{var d,u,f,m;const s=n.systemHint,o=ft(e.id),a=he.getParentPromptNode(o);if(!a)return;const i=(d=n==null?void 0:n.actionLabel)!=null?d:n==null?void 0:n.name;Ie.count(je.ECOSYSTEM,"suggestion_hint_followup_turn_triggered"),B.logEventWithStatsig("Ecosystem app: Suggestion hint followup turn triggered","chatgpt_web_ecosystem_suggestion_hint_followup_turn_triggered",w({system_hint:s},i?{system_hint_label:i}:{}));const l=[...(f=(u=a.message.metadata)==null?void 0:u.system_hints)!=null?f:[],s],c=ls(a.message.content,U(w({},a.message.metadata),{system_hints:l,is_visually_hidden_from_conversation:!0,triggered_by_system_hint_suggestion:!0,targeted_reply_label:i?t.formatMessage(b7.usedSystemHint,{systemHint:i}):t.formatMessage(b7.usedSystemHintGeneric)}));a&&Ko({promptMessage:c,completionMetadata:{systemHints:l,conversationMode:(m=o==null?void 0:o.mode)!=null?m:{kind:wt.PrimaryAssistant}},eventSource:"mouse",conversation:e}),s&&sd(s,od.SuggestionAccept,En({clientThreadId:e.id}))},b7=be({usedSystemHint:{id:"pwHqiX",defaultMessage:"Used {systemHint}"},usedSystemHintGeneric:{id:"wbs4BT",defaultMessage:"Used tool"}}),Cwe=R(()=>P(()=>Promise.resolve().then(()=>c4),void 0),{loading:t=>O(t)});function Swe({clientThreadId:t,systemHint:e,label:n,iconSvgString:s,onClick:o,onDismiss:a,onMouseEnter:i,onMouseLeave:l}){"use no forget";const c=Qn(t);return _.useEffect(()=>{e&&sd(e,od.SuggestionTrigger,En({clientThreadId:c}))},[]),n?r.jsxs("button",{type:"button",className:"hover:bg-token-bg-tertiary dark:hover:bg-token-bg-tertiary dark:bg-token-bg-secondary border-token-border-default bg-token-bg-primary text-token-text-primary focus-visible:ring-token-text-tertiary mx-auto mb-1 flex h-9 items-center gap-2.5 rounded-full border py-1 ps-2.5 pe-3 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden",onClick:o,onMouseEnter:i,onMouseLeave:l,children:[s?r.jsx("span",{className:"h-4.5 w-4.5 shrink-0",children:r.jsx(sf,{svgString:s,className:"h-full w-full"})}):null,r.jsx("span",{className:"truncate text-sm",children:n}),a?r.jsx("span",{className:"-ms-1.5 -me-1.5",children:r.jsx(j,{id:"GYl7YK",defaultMessage:"Dismiss",children:d=>r.jsx(Cwe,{className:"icon dark:hover:bg-token-bg-tertiary hover:bg-token-bg-secondary translate-y-[0.5px] cursor-pointer rounded-full p-0.5 opacity-30 hover:opacity-100","aria-label":d,strokeWidth:.5,onClick:u=>{u.stopPropagation(),a==null||a(u)}})})}):null]}):null}const C7=.2;function QJe(){"use no forget";const t=V(),{store:e}=Bd(),n=e.useSharedProps(o=>o==null?void 0:o.clientThreadId),s=ae(()=>n?dg(yt(t,n)).activeSystemHintSuggestionChips$():[]);return ts(t)||!s.length?null:r.jsx("div",{className:"max-xs:flex-col max-xs:gap-0 flex justify-center gap-3",children:s.map(o=>r.jsx(wwe,{threadId:n,systemHintSuggestionChip:o},o.systemHint))})}function wwe(t){"use forget";const e=G.c(38),{systemHintSuggestionChip:n,threadId:s}=t,o=ne(),a=V(),i=Mi(),l=_.useRef(null),c=_.useRef(!1),[d,u]=_.useState(!1),f=ae(()=>{var z;return(z=Vs(a))==null?void 0:z.find(K=>K.systemHint===L)});let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{l.current&&(clearTimeout(l.current),l.current=null)},e[0]=m):m=e[0];const p=m;let g,h;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>()=>{p()},h=[p],e[1]=g,e[2]=h):(g=e[1],h=e[2]),_.useEffect(g,h);let x;e[3]!==a||e[4]!==n||e[5]!==s?(x=z=>{z==null||z.preventDefault(),z==null||z.stopPropagation();const K=n==null?void 0:n.systemHint;if(!s)return;const J=yt(a,s);u(!0),setTimeout(()=>{u(!1),z&&K?dg(J).removeActiveSystemHintSuggestionChip(n):dg(J).clearActiveSystemHintSuggestionChips()},C7*1e3),p()},e[3]=a,e[4]=n,e[5]=s,e[6]=x):x=e[6];const v=x;let y;e[7]!==v?(y=()=>{c.current||(p(),l.current=setTimeout(()=>{v()},2e3))},e[7]=v,e[8]=y):y=e[8];const b=y;let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{c.current=!0,p()},e[9]=C):C=e[9];const S=C;let k;e[10]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{c.current=!1},e[10]=k):k=e[10];const E=k;let T;e[11]!==i||e[12]!==b?(T=()=>Pf(Pt(i).dom,{input:()=>{l.current||b()}}),e[11]=i,e[12]=b,e[13]=T):T=e[13];let M;e[14]!==i||e[15]!==v||e[16]!==b?(M=[i,v,b],e[14]=i,e[15]=v,e[16]=b,e[17]=M):M=e[17],_.useEffect(T,M);let A;e[18]!==n?(A=n!=null?n:{},e[18]=n,e[19]=A):A=e[19];const{actionLabel:I,systemHint:N}=A,L=N;let D;e[20]!==a||e[21]!==o||e[22]!==v||e[23]!==f||e[24]!==s?(D=()=>{v(),!(!s||!f)&&(Ie.count(je.ECOSYSTEM,"suggestion_hint_clicked"),B.logEventWithStatsig("Ecosystem app: Suggestion hint clicked","chatgpt_web_ecosystem_suggestion_hint_clicked",w({system_hint:f.systemHint},f.actionLabel?{system_hint_label:f.actionLabel}:{})),GF({intl:o,conversation:yt(a,s),systemHint:f}))},e[20]=a,e[21]=o,e[22]=v,e[23]=f,e[24]=s,e[25]=D):D=e[25];const F=D;if(!s||!n||!f)return null;let $;e[26]!==I||e[27]!==S||e[28]!==E||e[29]!==d||e[30]!==F||e[31]!==v||e[32]!==L||e[33]!==(f==null?void 0:f.logo)||e[34]!==s?($=!d&&r.jsx(Xe.div,{exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:C7},children:r.jsx(Swe,{clientThreadId:s,systemHint:L,label:I,iconSvgString:f==null?void 0:f.logo,onClick:F,onDismiss:v,onMouseEnter:S,onMouseLeave:E})},"system-hint-suggestion-banner"),e[26]=I,e[27]=S,e[28]=E,e[29]=d,e[30]=F,e[31]=v,e[32]=L,e[33]=f==null?void 0:f.logo,e[34]=s,e[35]=$):$=e[35];let H;return e[36]!==$?(H=r.jsx(mn,{children:$}),e[36]=$,e[37]=H):H=e[37],H}const kwe=({className:t,children:e})=>r.jsx(Xe.div,{className:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.1,delay:0}},transition:{type:"tween",duration:.3,delay:.2},children:e}),Ewe=R(()=>P(()=>import("./5bcdej51598lc3xr.js"),__vite__mapDeps([345,1])),{loading:t=>O(t)});function JJe(t){"use forget";const e=G.c(6),{canContinue:n,onContinueGenerating:s}=t;let o;e[0]!==s?(o=c=>{s(c),Vv()},e[0]=s,e[1]=o):o=e[1];const a=o;let i=null;if(n){let c;e[2]!==a?(c=r.jsx(Mwe,{onHandleContinueGenerating:a}),e[2]=a,e[3]=c):c=e[3],i=c}if(!i)return i;let l;return e[4]!==i?(l=r.jsx("div",{className:"flex h-full w-full items-center justify-end gap-0 py-4 md:gap-2",children:i}),e[4]=i,e[5]=l):l=e[5],l}function Twe({className:t}){return r.jsx(Ewe,{className:W("-rotate-180",t)})}const Mwe=t=>{"use forget";const e=G.c(3),{onHandleContinueGenerating:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(j,w({},Do.continueGenerating)),e[0]=s):s=e[0];let o;return e[1]!==n?(o=r.jsx(kwe,{children:r.jsx(_e,{as:"button",color:"secondary",onClick:n,className:"py-2 whitespace-nowrap",icon:Twe,size:"small",children:s})}),e[1]=n,e[2]=o):o=e[2],o};function Awe(t){"use forget";const e=G.c(49),{onThennableClick:n,text:s}=t,o=ne();let a;e[0]!==o||e[1]!==s?(a=typeof s=="string"?s:o.formatMessage(s),e[0]=o,e[1]=s,e[2]=a):a=e[2];const i=a;let l;e[3]!==o?(l=o.formatMessage(xp.copy),e[3]=o,e[4]=l):l=e[4];const c=l;let d;e[5]!==o?(d=o.formatMessage(xp.copied),e[5]=o,e[6]=d):d=e[6];const u=d,[f,m]=_.useState(!1),p=_.useRef(null),g=_.useRef(null),[h,x]=_.useState();let v;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{var X,te,ce,ue;const ie=(te=(X=p.current)==null?void 0:X.offsetWidth)!=null?te:0,ee=(ue=(ce=g.current)==null?void 0:ce.offsetWidth)!=null?ue:0,le=Math.max(ie,ee);x(le===0?void 0:le)},e[7]=v):v=e[7];let y;e[8]!==u||e[9]!==c?(y=[c,u],e[8]=u,e[9]=c,e[10]=y):y=e[10],Xn(v,y);let b,C;e[11]!==f?(b=()=>{if(!f)return;const ie=window.setTimeout(()=>{m(!1)},5e3);return()=>{window.clearTimeout(ie)}},C=[f],e[11]=f,e[12]=b,e[13]=C):(b=e[12],C=e[13]),_.useEffect(b,C);let S;e[14]!==n?(S=()=>{n().then(()=>{m(!0)})},e[14]=n,e[15]=S):S=e[15];const k=S;let E;e[16]===Symbol.for("react.memo_cache_sentinel")?(E=W("flex w-fit flex-row gap-1 text-center"),e[16]=E):E=e[16];let T;e[17]!==i?(T=r.jsx("code",{className:"max-w-[50vw] truncate sm:max-w-[300px] md:max-w-[200px] lg:max-w-[300px]",children:i}),e[17]=i,e[18]=T):T=e[18];let M;e[19]!==k||e[20]!==T?(M=r.jsx(_e,{color:"secondary",className:"w-fit max-w-[40vw] rounded-3xl border px-3 py-2 sm:max-w-[300px]",onClick:k,contentWrapperClassName:"flex justify-between! md:justify-center! w-full",children:T}),e[19]=k,e[20]=T,e[21]=M):M=e[21];const A=f?"primary-inverse":"primary";let I;e[22]!==h?(I=typeof h=="number"?{width:h}:void 0,e[22]=h,e[23]=I):I=e[23];let N;e[24]!==c?(N=r.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:r.jsx("span",{ref:p,children:c})}),e[24]=c,e[25]=N):N=e[25];let L;e[26]!==u?(L=r.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:r.jsx("span",{ref:g,children:u})}),e[26]=u,e[27]=L):L=e[27];const D=f?"copied":"copy";let F,$,H,z;e[28]===Symbol.for("react.memo_cache_sentinel")?(F={opacity:0,y:4},$={opacity:1,y:0},H={opacity:0,y:-4},z={duration:.2,ease:"easeInOut"},e[28]=F,e[29]=$,e[30]=H,e[31]=z):(F=e[28],$=e[29],H=e[30],z=e[31]);let K;e[32]!==f?(K=f?r.jsx(j,w({},xp.copied)):r.jsx(j,w({},xp.copy)),e[32]=f,e[33]=K):K=e[33];let J;e[34]!==D||e[35]!==K?(J=r.jsx(mn,{mode:"wait",initial:!1,children:r.jsx(Xe.span,{initial:F,animate:$,exit:H,transition:z,className:"inline-flex whitespace-nowrap",children:K},D)}),e[34]=D,e[35]=K,e[36]=J):J=e[36];let Z;e[37]!==I||e[38]!==N||e[39]!==L||e[40]!==J?(Z=r.jsxs("span",{className:"relative inline-flex justify-center",style:I,children:[N,L,J]}),e[37]=I,e[38]=N,e[39]=L,e[40]=J,e[41]=Z):Z=e[41];let q;e[42]!==k||e[43]!==A||e[44]!==Z?(q=r.jsx(_e,{color:A,className:"w-fit px-4 py-2 transition-all duration-200 ease-in-out",onClick:k,contentWrapperClassName:"flex justify-between! lg:justify-center! w-fit min-w-[40px] text-center",children:Z}),e[42]=k,e[43]=A,e[44]=Z,e[45]=q):q=e[45];let se;return e[46]!==M||e[47]!==q?(se=r.jsxs("div",{className:E,children:[M,q]}),e[46]=M,e[47]=q,e[48]=se):se=e[48],se}const xp=be({copy:{id:"beacon-banner-copy-to-clipboard.copy",defaultMessage:"Copy"},copied:{id:"beacon-banner-copy-to-clipboard.copied",defaultMessage:"Copied"}});function Iwe(t){"use forget";const e=G.c(8),{beaconInfo:n,copyBeaconAction:s,onDismiss:o}=t,{title:a,description:i}=n.ui_info;let l;e[0]!==s.onThennableClick||e[1]!==s.text?(l=r.jsx(Awe,{onThennableClick:s.onThennableClick,text:s.text}),e[0]=s.onThennableClick,e[1]=s.text,e[2]=l):l=e[2];let c;return e[3]!==i||e[4]!==o||e[5]!==l||e[6]!==a?(c=r.jsx(vn,{title:a,content:i,onDismiss:o,customCtas:l,contentClassName:"gap-1!"}),e[3]=i,e[4]=o,e[5]=l,e[6]=a,e[7]=c):c=e[7],c}const jwe=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)}),Nwe=R(()=>P(()=>Promise.resolve().then(()=>Nr),void 0),{loading:t=>O(t)}),Pwe={banner:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full items-center justify-between gap-2 rounded-4xl! bg-[rgba(13,13,13,0.90)]! px-4 py-2 dark:bg-[rgba(255,255,255,0.90)]!",triggerTextClassName:"truncate font-medium text-white dark:text-[#0D0D0D]",chevronClassName:"icon-sm shrink-0 text-white dark:text-[#0D0D0D]",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-[256px] max-w-[80vw] min-w-[220px] overflow-hidden rounded-2xl border p-1.5 shadow-lg",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1",itemClassName:"m-0 py-1.5 ps-2.5 pe-0 [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"h-6 w-6 dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-sm font-medium",footerPlacement:"inline",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",showLinkIcon:!1},modal:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full h-11.5 items-center justify-between! gap-3 rounded-2xl! border-token-border-default! bg-token-bg-elevated-primary px-4 py-3 text-start dark:border-token-border-muted dark:bg-token-bg-elevated-secondary",triggerTextClassName:"truncate font-normal font-[14px] text-token-text-tertiary",chevronClassName:"icon-lg shrink-0 text-token-text-secondary",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-full overflow-hidden rounded-2xl border p-1.5 shadow-xl w-[416px] sm:max-w-[416px]",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1 px-1",itemClassName:"m-0 pe-2.5 py-1.5 ps-1.5 dark:ps-2.5 [&>div]:w-fit [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"flex h-6 w-6 items-center justify-center rounded-full dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-base font-semibold",footerPlacement:"below",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",footerBelowClassName:"text-token-text-tertiary leading-4.5 text-center text-[13px]",showLinkIcon:!0}};function Rwe(t){"use forget";const e=G.c(6),{dropdownAction:n,formatAction:s}=t;let o;e:{if(!n){let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0],o=i;break e}let a;if(e[1]!==n.action_v2.items||e[2]!==s){let i;e[4]!==s?(i=l=>{const c=s(l);return c?{id:l.id,text:l.text,iconUrl:l.icon_url,action:c}:null},e[4]=s,e[5]=i):i=e[5],a=n.action_v2.items.map(i).filter(Lwe),e[1]=n.action_v2.items,e[2]=s,e[3]=a}else a=e[3];o=a}return o}function Lwe(t){return t!=null}function Owe(t){"use forget";const e=G.c(11),{iconUrl:n,label:s,className:o,fallbackTextClassName:a}=t;let i;e[0]!==s?(i=s.trim().slice(0,1).toUpperCase(),e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]!==o?(c=W("flex items-center justify-center rounded-full",o),e[2]=o,e[3]=c):c=e[3];let d;e[4]!==l||e[5]!==a||e[6]!==n?(d=n?r.jsx("img",{src:n,alt:"",className:"h-4 w-4 object-contain",loading:"eager"}):r.jsx("span",{className:a,children:l}),e[4]=l,e[5]=a,e[6]=n,e[7]=d):d=e[7];let u;return e[8]!==c||e[9]!==d?(u=r.jsx("div",{className:c,"aria-hidden":"true",children:d}),e[8]=c,e[9]=d,e[10]=u):u=e[10],u}function Dwe({item:t,beaconInfo:e,beaconClickEventMutation:n,variant:s,onClose:o}){var a,i,l;B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:e.beacon_id,beacon_name:(a=e.beacon_name)!=null?a:"unknown",beacon_type:s,action_id:t.id}),n.mutate({beaconId:e.beacon_id,eventCtaId:t.id}),"onThennableClick"in t.action&&t.action.onThennableClick?t.action.onThennableClick():(l=(i=t.action).onClick)==null||l.call(i),s==="modal"&&o()}function Fwe(t){"use forget";var $;const e=G.c(68),{beaconInfo:n,conversationId:s,dropdownAction:o,dropdownItems:a,variant:i,onClose:l}=t,c=i===void 0?"banner":i,d=ne(),u=V();let f;e[0]!==s||e[1]!==u?(f=()=>bf(s,u),e[0]=s,e[1]=u,e[2]=f):f=e[2];const m=cD(f),p=Pwe[c];let g=($=o.action_v2.header_text)!=null?$:void 0;if(g&&typeof g!="string"){let H;e[3]!==d||e[4]!==g?(H=d.formatMessage(g),e[3]=d,e[4]=g,e[5]=H):H=e[5],g=H}let h;e[6]!==m||e[7]!==n||e[8]!==l||e[9]!==c?(h=H=>{Dwe({item:H,beaconInfo:n,beaconClickEventMutation:m,variant:c,onClose:l})},e[6]=m,e[7]=n,e[8]=l,e[9]=c,e[10]=h):h=e[10];const x=h;if(a.length===0)return null;const v=p.containerClassName;let y;e[11]!==n||e[12]!==o.action_v2.action_enum||e[13]!==o.id||e[14]!==o.type||e[15]!==c?(y=H=>{var z;H&&B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:n.beacon_id,beacon_name:(z=n.beacon_name)!=null?z:"unknown",beacon_type:c,action_id:o.id,action_type:o.type,action_enum:o.action_v2.action_enum})},e[11]=n,e[12]=o.action_v2.action_enum,e[13]=o.id,e[14]=o.type,e[15]=c,e[16]=y):y=e[16];let b;e[17]!==p.triggerTextClassName||e[18]!==o.text?(b=r.jsx("span",{className:p.triggerTextClassName,children:o.text}),e[17]=p.triggerTextClassName,e[18]=o.text,e[19]=b):b=e[19];let C;e[20]!==p.chevronClassName?(C=r.jsx(Nwe,{className:p.chevronClassName}),e[20]=p.chevronClassName,e[21]=C):C=e[21];let S;e[22]!==p.triggerClassName||e[23]!==b||e[24]!==C?(S=r.jsx(Y.Trigger,{asChild:!0,children:r.jsxs("button",{type:"button",className:p.triggerClassName,children:[b,C]})}),e[22]=p.triggerClassName,e[23]=b,e[24]=C,e[25]=S):S=e[25];const k=p.contentClassName;let E;e[26]!==p.headerClassName||e[27]!==o.action_v2.header_text||e[28]!==g?(E=o.action_v2.header_text&&g?r.jsx("p",{className:p.headerClassName,children:g}):null,e[26]=p.headerClassName,e[27]=o.action_v2.header_text,e[28]=g,e[29]=E):E=e[29];const T=p.itemsWrapperClassName;let M;if(e[30]!==p.fallbackTextClassName||e[31]!==p.iconClassName||e[32]!==p.itemClassName||e[33]!==p.itemTextClassName||e[34]!==p.showLinkIcon||e[35]!==a||e[36]!==x){let H;e[38]!==p.fallbackTextClassName||e[39]!==p.iconClassName||e[40]!==p.itemClassName||e[41]!==p.itemTextClassName||e[42]!==p.showLinkIcon||e[43]!==x?(H=z=>r.jsx(Y.Item,{size:"large",className:p.itemClassName,icon:r.jsx(Owe,{iconUrl:z.iconUrl,label:z.text,className:p.iconClassName,fallbackTextClassName:p.fallbackTextClassName}),trailing:p.showLinkIcon?r.jsx(jwe,{className:"text-token-text-primary"}):void 0,onSelect:()=>x(z),children:r.jsx("span",{className:p.itemTextClassName,children:z.text})},z.id),e[38]=p.fallbackTextClassName,e[39]=p.iconClassName,e[40]=p.itemClassName,e[41]=p.itemTextClassName,e[42]=p.showLinkIcon,e[43]=x,e[44]=H):H=e[44],M=a.map(H),e[30]=p.fallbackTextClassName,e[31]=p.iconClassName,e[32]=p.itemClassName,e[33]=p.itemTextClassName,e[34]=p.showLinkIcon,e[35]=a,e[36]=x,e[37]=M}else M=e[37];let A;e[45]!==p.itemsWrapperClassName||e[46]!==M?(A=r.jsx("div",{className:T,children:M}),e[45]=p.itemsWrapperClassName,e[46]=M,e[47]=A):A=e[47];let I;e[48]!==p.footerClassName||e[49]!==o.action_v2.footer_text?(I=o.action_v2.footer_text?r.jsx("p",{className:p.footerClassName,children:o.action_v2.footer_text}):null,e[48]=p.footerClassName,e[49]=o.action_v2.footer_text,e[50]=I):I=e[50];let N;e[51]!==p.contentClassName||e[52]!==E||e[53]!==A||e[54]!==I?(N=r.jsx(Y.Portal,{children:r.jsxs(Y.Content,{size:"auto",className:k,children:[E,A,I]})}),e[51]=p.contentClassName,e[52]=E,e[53]=A,e[54]=I,e[55]=N):N=e[55];let L;e[56]!==N||e[57]!==y||e[58]!==S?(L=r.jsxs(Y.Root,{onOpenChange:y,children:[S,N]}),e[56]=N,e[57]=y,e[58]=S,e[59]=L):L=e[59];let D;e[60]!==p.footerBelowClassName||e[61]!==p.footerPlacement||e[62]!==o.action_v2.footer_text?(D=p.footerPlacement==="below"&&o.action_v2.footer_text?r.jsx("p",{className:p.footerBelowClassName,children:o.action_v2.footer_text}):null,e[60]=p.footerBelowClassName,e[61]=p.footerPlacement,e[62]=o.action_v2.footer_text,e[63]=D):D=e[63];let F;return e[64]!==p.containerClassName||e[65]!==L||e[66]!==D?(F=r.jsxs("div",{className:v,children:[L,D]}),e[64]=p.containerClassName,e[65]=L,e[66]=D,e[67]=F):F=e[67],F}const WF={small:24,medium:36,large:48},Bwe="small",Uwe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),$we=t=>t&&Uwe(WF,t)?t:Bwe,zF=({bannerIconImageUrl:t,bannerIconSize:e,icon:n})=>{if(n)return n;if(!t)return null;const s=WF[$we(e)];return r.jsx("img",{src:t,alt:"",style:{width:s,height:s,objectFit:"contain"}})},Sf=t=>{"use forget";var M,A;const e=G.c(34),{actions:n,title:s,description:o,onDismiss:a,onInteract:i,primaryButtonColor:l,primaryButtonClassName:c,secondaryButtonColor:d,bannerIconImageUrl:u,bannerIconSize:f,icon:m}=t,p=ne();let g;e[0]!==n||e[1]!==p?(g=(M=n==null?void 0:n.primaryAction)!=null&&M.text?typeof n.primaryAction.text=="string"?n.primaryAction.text:p.formatMessage(n.primaryAction.text):void 0,e[0]=n,e[1]=p,e[2]=g):g=e[2];const h=g;let x;e[3]!==n||e[4]!==p?(x=(A=n==null?void 0:n.secondaryAction)!=null&&A.text?typeof n.secondaryAction.text=="string"?n.secondaryAction.text:p.formatMessage(n.secondaryAction.text):void 0,e[3]=n,e[4]=p,e[5]=x):x=e[5];const v=x,y=n==null?void 0:n.customActions;let b;e[6]!==u||e[7]!==f||e[8]!==m?(b=zF({icon:m,bannerIconImageUrl:u,bannerIconSize:f}),e[6]=u,e[7]=f,e[8]=m,e[9]=b):b=e[9];let C;e[10]!==o?(C=o?r.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):null,e[10]=o,e[11]=C):C=e[11];let S;e[12]!==a||e[13]!==i?(S=a?()=>{i==null||i(),a==null||a()}:void 0,e[12]=a,e[13]=i,e[14]=S):S=e[14];let k;e[15]!==(n==null?void 0:n.primaryAction)||e[16]!==i?(k=()=>{var I,N;i==null||i(),(N=(I=n==null?void 0:n.primaryAction)==null?void 0:I.onClick)==null||N.call(I)},e[15]=n==null?void 0:n.primaryAction,e[16]=i,e[17]=k):k=e[17];let E;e[18]!==(n==null?void 0:n.secondaryAction)||e[19]!==i?(E=()=>{var I,N;i==null||i(),(N=(I=n==null?void 0:n.secondaryAction)==null?void 0:I.onClick)==null||N.call(I)},e[18]=n==null?void 0:n.secondaryAction,e[19]=i,e[20]=E):E=e[20];let T;return e[21]!==y||e[22]!==c||e[23]!==l||e[24]!==h||e[25]!==d||e[26]!==v||e[27]!==b||e[28]!==C||e[29]!==S||e[30]!==k||e[31]!==E||e[32]!==s?(T=r.jsx(vn,{icon:b,title:s,content:C,onDismiss:S,customCtas:y,primaryCtaText:h,primaryCtaColor:l,primaryCtaClassName:c,onPrimaryCtaClick:k,secondaryCtaText:v,secondaryCtaColor:d,onSecondaryCtaClick:E,isElevated:!0}),e[21]=y,e[22]=c,e[23]=l,e[24]=h,e[25]=d,e[26]=v,e[27]=b,e[28]=C,e[29]=S,e[30]=k,e[31]=E,e[32]=s,e[33]=T):T=e[33],T};function Vwe({beaconInfo:t,conversationId:e,dropdownAction:n,formatAction:s,onDismiss:o}){"use no forget";const{title:a,description:i,icon_image_url:l,icon_image_size:c}=t.ui_info,d=Rwe({dropdownAction:n,formatAction:s});if(d.length===0)return r.jsx(Sf,{bannerIconImageUrl:l,bannerIconSize:c,onDismiss:o,title:a,description:i});const u=r.jsx(Fwe,{beaconInfo:t,conversationId:e,dropdownAction:n,dropdownItems:d,variant:"banner",onClose:()=>{}});return r.jsx(Sf,{bannerIconImageUrl:l,bannerIconSize:c,onDismiss:o,title:a,description:i,actions:{customActions:u}})}const Hwe=R(()=>P(()=>import("./n6ajdtpejzhqnrex.js"),__vite__mapDeps([346,1,10,11,347,348,349,350,319,0,351,352])).then(t=>t.CreatePromptModal)),Gwe=R(()=>P(()=>import("./ydzvfm0toss4freg.js"),__vite__mapDeps([353,1,10,11,354,355])).then(t=>t.ConnectorsOnboardingModal));function Wwe(t){"use forget";const e=G.c(27),{clientThreadId:n,location:s,composerController:o,persistedSystemHintsStore:a,openFileDialog:i,beaconInfo:l}=t,c=V(),d=Cn();let u;e[0]!==c?(u=tt(c),e[0]=c,e[1]=u):u=e[1];const f=!u,m=ot(),p=Qn(n);let g;e[2]!==n?(g={clientThreadId:n},e[2]=n,e[3]=g):g=e[3];const h=Tb(g);let x;e[4]!==n||e[5]!==c?(x=()=>bf(n,c),e[4]=n,e[5]=c,e[6]=x):x=e[6];const{mutate:v}=cD(x);let y;e[7]!==c?(y=()=>Vs(c),e[7]=c,e[8]=y):y=e[8];const b=ae(y);let C;e[9]!==d?(C=d==null?void 0:d.isWorkspaceAccount(),e[9]=d,e[10]=C):C=e[10];const S=C;let k;return e[11]!==b||e[12]!==l||e[13]!==n||e[14]!==o||e[15]!==c||e[16]!==d||e[17]!==f||e[18]!==S||e[19]!==s||e[20]!==m||e[21]!==i||e[22]!==a||e[23]!==h||e[24]!==p||e[25]!==v?(k=E=>{if(E===void 0)return;const T=l.ui_info.type==="beacon_banner_info"?"banner":"modal",M=typeof E=="object"&&"type"in E&&E.type?E.type:"unknown",A=()=>{var $,H,z;B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:l.beacon_id,beacon_name:($=l.beacon_name)!=null?$:"unknown",beacon_type:T,action_id:(H=E.id)!=null?H:"unknown",action_type:M,action_enum:D.action_enum}),v({beaconId:l.beacon_id,eventCtaId:(z=E.id)!=null?z:"unknown"});const F=[Kr.PRIMARY,Kr.SECONDARY];M&&F.includes(M)&&_i.dismiss()},I=F=>{if("onClick"in F&&F.onClick){const $=F.onClick;return U(w({},F),{onClick:()=>{A(),$()}})}if("onThennableClick"in F&&F.onThennableClick){const $=F.onThennableClick;return U(w({},F),{onThennableClick:()=>(A(),$())})}return F},{action_v2:N,text:L}=E,D=N;switch(D.action_enum){case Mn.FILE_UPLOAD:case Mn.PHOTO_UPLOAD:return I({text:L,onClick:()=>{if(i(),D.composer_text){const $=Pt(o);$.focus(),yo($,D.composer_text)}}});case Mn.SYSTEM_HINT:return I({text:L,onClick:()=>{const $=lv(D.hint);if($){if(D.new_chat){const H=new URLSearchParams({[cv]:$});D.composer_text&&H.set("prompt",D.composer_text),Mr(m,{params:H})}else if(oz(a,o,$,b,{analyticsMetadata:{clientThreadId:n}},S),D.composer_text){const H=Pt(o);H.focus(),yo(H,D.composer_text)}}}});case Mn.INVITE_TEAM_MEMBERS:return d?I({text:L,onClick:()=>{lt(c,FO,{workspace:d})}}):void 0;case Mn.AUTHENTICATE_LOGIN:return I({text:L,onClick:()=>{Zt(c,{fallbackScreenHint:"login"})}});case Mn.AUTHENTICATE_SIGNUP:return I({text:L,onClick:()=>{Zt(c,{fallbackScreenHint:"signup"})}});case Mn.GET_PLUS:case Mn.GET_GO:case Mn.GET_PRO:case Mn.GET_TEAM:return I({text:L,onClick:()=>{if(f)Zt(c,{fallbackScreenHint:"login",shouldOpenPaymentModalOnAuth:!0});else{const $=D==null?void 0:D.promo_campaign_id;xn(m,s,gb,$)}}});case Mn.DISMISS:return I({text:L,onClick:()=>{if(D.composer_text){const $=Pt(o);$.focus(),yo($,D.composer_text)}}});case Mn.OPEN_URL:return I({text:L,onClick:()=>{window.open(D.url,"_blank","noopener noreferrer")}});case Mn.OPEN_LOCAL_URL:return I({text:L,onClick:()=>{m(D.web_url)}});case Mn.SHARE_CONVERSATION:return p?I({text:L,onClick:()=>{On.openSharingModal(p,s)}}):void 0;case Mn.UPDATE_PERSONALITY_TRAIT:return I({text:L,onClick:()=>{const $=new Map,{conversationId:H,messageId:z}=bf(p,c),K=H===void 0?null:H,J=z===void 0?null:z;Object.entries(D.updated_trait_settings_dict).forEach(Z=>{const[q,se]=Z;$.set(q,se)}),sz(c,$,K,J,{optimistic:!0})}});case Mn.CREATE_PROMPT:return{text:L,onClick:()=>{var J,Z,q,se,ie,ee,le,X;if(D.open_in_modal===!1)return;const H=he.getConversationTurns(ft(n)).findLast(zwe),z=(ie=(se=(q=(Z=(J=H==null?void 0:H.messages)==null?void 0:J[0])==null?void 0:Z.metadata)==null?void 0:q.system_hints)==null?void 0:se[0])!=null?ie:"",K={name:(ee=D.prompt_name)!=null?ee:"",prompt:(le=D.prompt_text)!=null?le:"",description:(X=D.prompt_description)!=null?X:"",system_hint:z};lt(c,Hwe,{prompt:K,referer:"prompt_template_beacon"})}};case Mn.OPEN_CONNECTORS_ONBOARDING_MODAL:return I({text:L,onClick:()=>{lt(c,Gwe,{})}});case Mn.COPY_TO_CLIPBOARD:{const F=D.copy_text;return I({text:F,onThennableClick:()=>{if(F.startsWith("$")){const H=F.slice(1);return Zo(H.trim())}else return Zo(F.trim())}})}case Mn.DROPDOWN:return;case Mn.REGENERATE:{const F=he.getCurrentLeafId(ft(n));return I({text:L,onClick:()=>{D.update_model_picker&&Vf(yt(c,n),D.model_slug),h({sourceEvent:new Event("click"),nodeId:F,requestedModelId:D.model_slug})}})}}},e[11]=b,e[12]=l,e[13]=n,e[14]=o,e[15]=c,e[16]=d,e[17]=f,e[18]=S,e[19]=s,e[20]=m,e[21]=i,e[22]=a,e[23]=h,e[24]=p,e[25]=v,e[26]=k):k=e[26],k}function zwe(t){return t.role==="user"}const qwe=t=>{"use forget";const e=G.c(36),{clientThreadId:n,beaconInfo:s,onDismiss:o,onMount:a,openFileDialog:i}=t,{ui_info:l,action_items:c}=s,{title:d,description:u,icon_image_url:f,icon_image_size:m}=l,p=ne(),g=Mi(),h=gr.useStore();let x;e[0]!==s||e[1]!==n||e[2]!==g||e[3]!==i||e[4]!==h?(x={clientThreadId:n,location:"Prompt TextareaBeacons Banner",composerController:g,openFileDialog:i,persistedSystemHintsStore:h,beaconInfo:s},e[0]=s,e[1]=n,e[2]=g,e[3]=i,e[4]=h,e[5]=x):x=e[5];const v=Wwe(x);let y;e[6]!==a?(y=()=>{a==null||a()},e[6]=a,e[7]=y):y=e[7],Sm(y);let b;e:{if(c==null){b=void 0;break e}let I;e[8]!==c?(I=c.find(Ywe),e[8]=c,e[9]=I):I=e[9],b=I}const C=b;if(C){let I;return e[10]!==s||e[11]!==n||e[12]!==C||e[13]!==v||e[14]!==o?(I=r.jsx(Vwe,{beaconInfo:s,conversationId:n,dropdownAction:C,formatAction:v,onDismiss:o}),e[10]=s,e[11]=n,e[12]=C,e[13]=v,e[14]=o,e[15]=I):I=e[15],I}let S,k;if(e[16]!==c||e[17]!==s||e[18]!==v||e[19]!==p||e[20]!==o){k=Symbol.for("react.early_return_sentinel");e:{let I;e[23]!==v?(I=F=>{const $=v(F);return $?{action:F,formatted:$}:null},e[23]=v,e[24]=I):I=e[24];const N=(c!=null?c:[]).map(I).filter(Zwe),L=N.find(Kwe);if(L&&"onThennableClick"in L.formatted&&L.formatted.onThennableClick){const F={text:L.formatted.text,onThennableClick:L.formatted.onThennableClick};k=r.jsx(Iwe,{beaconInfo:s,copyBeaconAction:F,onDismiss:o});break e}const D=N.filter(Qwe);t:{if(D.length===0){S=void 0;break t}let F;e[25]!==p?(F=$=>{const{action:H,formatted:z}=$,K=typeof z.text=="string"?z.text:p.formatMessage(z.text),J=()=>{var Z;"onThennableClick"in z&&z.onThennableClick?z.onThennableClick():(Z=z.onClick)==null||Z.call(z)};return r.jsx(_e,{color:Zve(H.type),className:"w-full sm:w-auto",onClick:J,children:K},H.id)},e[25]=p,e[26]=F):F=e[26],S=r.jsx("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:D.map(F)})}}e[16]=c,e[17]=s,e[18]=v,e[19]=p,e[20]=o,e[21]=S,e[22]=k}else S=e[21],k=e[22];if(k!==Symbol.for("react.early_return_sentinel"))return k;const E=S,T=m!=null?m:void 0;let M;e[27]!==E?(M=E?{customActions:E}:void 0,e[27]=E,e[28]=M):M=e[28];let A;return e[29]!==u||e[30]!==f||e[31]!==o||e[32]!==T||e[33]!==M||e[34]!==d?(A=r.jsx(Sf,{bannerIconImageUrl:f,bannerIconSize:T,onDismiss:o,title:d,description:u,actions:M}),e[29]=u,e[30]=f,e[31]=o,e[32]=T,e[33]=M,e[34]=d,e[35]=A):A=e[35],A};function Ywe(t){return(t==null?void 0:t.action_v2.action_enum)===Mn.DROPDOWN}function Zwe(t){return t!=null}function Kwe(t){const{action:e,formatted:n}=t;return e.type===Kr.COPY&&"onThennableClick"in n&&typeof n.onThennableClick=="function"}function Qwe(t){const{action:e}=t;return e.type!==Kr.COPY}const qF="plus_free_trial_homepage_banner",XJe=t=>{"use forget";const e=G.c(30),{clientThreadId:n,openFileDialog:s}=t,o=Sv(),a=Ve(n,he.getRequestId),i=Na(a),l=V();let c;e[0]!==n||e[1]!==l?(c=yt(l,n),e[0]=n,e[1]=l,e[2]=c):c=e[2];const d=c;let u;e[3]!==d?(u=()=>d.serverId$(),e[3]=d,e[4]=u):u=e[4];const f=ae(u);let m;e[5]!==l||e[6]!==f?(m=()=>bf(f,l),e[5]=l,e[6]=f,e[7]=m):m=e[7];const p=m,g=I5(p),h=j5(p);let x;e[8]!==(o==null?void 0:o.beacon_id)||e[9]!==(o==null?void 0:o.beacon_name)||e[10]!==i?(x=()=>{var M,A;i&&(B.logEventWithStatsig("Web Beacon Ignored","chatgpt_web_beacon_ignored",{beacon_id:(M=o==null?void 0:o.beacon_id)!=null?M:"unknown",beacon_name:(A=o==null?void 0:o.beacon_name)!=null?A:"unknown",beacon_type:"banner"}),_i.dismiss())},e[8]=o==null?void 0:o.beacon_id,e[9]=o==null?void 0:o.beacon_name,e[10]=i,e[11]=x):x=e[11];let v;e[12]!==o||e[13]!==i?(v=[i,o],e[12]=o,e[13]=i,e[14]=v):v=e[14],_.useEffect(x,v);const y=_.useRef(!1);let b;e[15]!==o||e[16]!==g||e[17]!==l?(b=()=>{y.current||o&&(B.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:o.beacon_id,beacon_name:o.beacon_name,beacon_type:"banner"}),g.mutate(o.beacon_id),o.beacon_id===qF&&st(l,Fe.hasSeenPlusFreeTrialHomepageAnnouncementBanner),y.current=!0)},e[15]=o,e[16]=g,e[17]=l,e[18]=b):b=e[18];const C=b;let S;e[19]!==o||e[20]!==h?(S=()=>{o&&(B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:o.beacon_id,beacon_name:o.beacon_name,beacon_type:"banner"}),h.mutate(o.beacon_id)),_i.dismiss()},e[19]=o,e[20]=h,e[21]=S):S=e[21];const k=S;let E;e[22]!==o||e[23]!==n||e[24]!==k||e[25]!==C||e[26]!==s?(E=o&&r.jsx(Xe.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:r.jsx(qwe,{clientThreadId:n,beaconInfo:o,onDismiss:k,onMount:C,openFileDialog:s})}),e[22]=o,e[23]=n,e[24]=k,e[25]=C,e[26]=s,e[27]=E):E=e[27];let T;return e[28]!==E?(T=r.jsx(mn,{children:E}),e[28]=E,e[29]=T):T=e[29],T};function eXe(t){const e=Ve(t,he.getRequestId),n=Na(e),s=V(),o=yt(s,t),a=ae(()=>az(o)),i=Sv(),l=Object.values(Mn),c=i!=null&&i.action_items.every(d=>l.includes(d.action_v2.action_enum)?d.action_v2.action_enum===Mn.DROPDOWN?d.action_v2.items.every(u=>l.includes(u.action_v2.action_enum)):d.action_v2.action_enum===Mn.CREATE_PROMPT?!a:!0:!1);return!n&&c}const Jwe=3,Xwe=3,c2="oai/apps/connectorInContextUpsellBannerV1";function e7e(t){return!!ze(t,"3819205143",{disableExposureLog:!1}).get("enabled",!0)}function t7e(t){return t?new Date>dv(t,Jwe):!0}function YF(t){var f;const e=V(),[n,s]=Ei(c2,null,m=>m!=null&&typeof m=="object"&&typeof m.messageId=="string"&&typeof m.lastSeenAt=="number"&&typeof m.interacted=="boolean"&&typeof m.viewCount=="number"&&typeof m.hasDismissed=="boolean"),o=e7e(e),a=n?Ti(n.lastSeenAt):null,i=n&&(f=n.viewCount)!=null?f:0,l=n?n.hasDismissed:!1;return{canBeSeen:t!==""&&!l&&o&&(!n||i<=Xwe&&(t7e(a)||n.interacted===!1)),markSeen:m=>{const p={messageId:t,lastSeenAt:Ta(new Date),interacted:m,viewCount:(n?n.viewCount:0)+(m?0:1),hasDismissed:l};Ie.count(je.DEFAULT,"connector_upsell_banner_shown"),s(p),window.localStorage.setItem(c2,JSON.stringify(p))},markDismissed:()=>{const m={messageId:t,lastSeenAt:Ta(new Date),interacted:!0,viewCount:0,hasDismissed:!0};Ie.count(je.DEFAULT,"connector_upsell_banner_dismissed"),s(m),window.localStorage.setItem(c2,JSON.stringify(m))}}}const Cy=30,n7e=3,s7e=1,Sy=Dt(In(()=>({lastSeenInContextUpsellBannerAt:a7e()}))),wy=Dt(In(()=>({inContextUpsellBannerPeriodStartAt:ZF()}))),ky=Dt(In(()=>({inContextUpsellBannerPeriodExposureCount:KF()}))),Ey=Dt(In(()=>({inContextUpsellBannerInteractedInPeriod:r7e()}))),Ty=Dt(In(()=>({inContextUpsellBannerLastSeenId:QF()})));function o7e(t){if(QF()===t)return;const n=ZF(),s=KF();!n||!s||ba(Date.now(),n)>=Cy?My({lastSeenAt:new Date,periodStartAt:new Date,exposureCount:1,interactedInPeriod:!1,lastSeenId:t}):My({lastSeenAt:new Date,exposureCount:s+1,lastSeenId:t})}function My({lastSeenAt:t,periodStartAt:e,exposureCount:n,interactedInPeriod:s,lastSeenId:o}){t===void 0?t=Sy.getState().lastSeenInContextUpsellBannerAt:Sy.setState(i=>{i.lastSeenInContextUpsellBannerAt=t===void 0?null:t}),e===void 0?e=wy.getState().inContextUpsellBannerPeriodStartAt:wy.setState(i=>{i.inContextUpsellBannerPeriodStartAt=e===void 0?null:e}),n===void 0?n=ky.getState().inContextUpsellBannerPeriodExposureCount:ky.setState(i=>{i.inContextUpsellBannerPeriodExposureCount=n===void 0?null:n}),s===void 0?s=Ey.getState().inContextUpsellBannerInteractedInPeriod:Ey.setState(i=>{i.inContextUpsellBannerInteractedInPeriod=s===void 0?null:s}),o===void 0?o=Ty.getState().inContextUpsellBannerLastSeenId:Ty.setState(i=>{i.inContextUpsellBannerLastSeenId=o===void 0?null:o});const a={lastSeenInContextUpsellBannerAt:t?String(Ta(t)):null,inContextUpsellBannerPeriodStartAt:e?String(Ta(e)):null,inContextUpsellBannerPeriodExposureCount:n,inContextUpsellBannerInteractedInPeriod:s,inContextUpsellBannerLastSeenId:o};localStorage.setItem(Ue.O3MiniHighInContextUpsellBanner,JSON.stringify(a))}function Tm(){const t=localStorage.getItem(Ue.O3MiniHighInContextUpsellBanner);if(!t)return null;try{return JSON.parse(t)}catch(e){return null}}function a7e(){var e;const t=(e=Tm())==null?void 0:e.lastSeenInContextUpsellBannerAt;return t?Ti(Number(t)):null}function ZF(){var e;const t=(e=Tm())==null?void 0:e.inContextUpsellBannerPeriodStartAt;return t?Ti(Number(t)):null}function KF(){var t,e;return(e=(t=Tm())==null?void 0:t.inContextUpsellBannerPeriodExposureCount)!=null?e:null}function r7e(){var t,e;return(e=(t=Tm())==null?void 0:t.inContextUpsellBannerInteractedInPeriod)!=null?e:null}function QF(){var t,e;return(e=(t=Tm())==null?void 0:t.inContextUpsellBannerLastSeenId)!=null?e:null}const i7e=t=>{"use forget";var L,D;const e=G.c(40),{actions:n,title:s,description:o,onDismiss:a,onInteract:i,primaryButtonColor:l,secondaryButtonColor:c,bannerIconImageUrl:d,bannerIconSize:u,icon:f,className:m,contentClassName:p}=t,g=ne();let h;e[0]!==n||e[1]!==g?(h=(L=n==null?void 0:n.primaryAction)!=null&&L.text?typeof n.primaryAction.text=="string"?n.primaryAction.text:g.formatMessage(n.primaryAction.text):void 0,e[0]=n,e[1]=g,e[2]=h):h=e[2];const x=h;let v;e[3]!==n||e[4]!==g?(v=(D=n==null?void 0:n.secondaryAction)!=null&&D.text?typeof n.secondaryAction.text=="string"?n.secondaryAction.text:g.formatMessage(n.secondaryAction.text):void 0,e[3]=n,e[4]=g,e[5]=v):v=e[5];const y=v,b=n==null?void 0:n.customActions;let C;e[6]!==m?(C=W("relative -mb-9 ps-4! pe-2.5! pt-2.5 pb-9!","rounded-t-[32px] rounded-b-none border border-b-0","bg-token-bg-tertiary! dark:bg-token-bg-tertiary!","border-token-border-strong/60 dark:border-token-border-strong/60",m),e[6]=m,e[7]=C):C=e[7];let S;e[8]!==p?(S=W(p),e[8]=p,e[9]=S):S=e[9];let k;e[10]!==d||e[11]!==u||e[12]!==f?(k=zF({icon:f,bannerIconImageUrl:d,bannerIconSize:u}),e[10]=d,e[11]=u,e[12]=f,e[13]=k):k=e[13];let E;e[14]!==s?(E=s&&r.jsxs("span",{className:"font-medium",children:[s,s.toString().endsWith(".")?"":r.jsx(r.Fragment,{children:"."})]}),e[14]=s,e[15]=E):E=e[15];let T;e[16]!==o?(T=o?r.jsxs(r.Fragment,{children:["",r.jsx("span",{dangerouslySetInnerHTML:{__html:o}})]}):null,e[16]=o,e[17]=T):T=e[17];let M;e[18]!==E||e[19]!==T?(M=r.jsxs("div",{className:"text-token-text-secondary text-sm",children:[E,T]}),e[18]=E,e[19]=T,e[20]=M):M=e[20];let A;e[21]!==a||e[22]!==i?(A=a?()=>{i==null||i(),a==null||a()}:void 0,e[21]=a,e[22]=i,e[23]=A):A=e[23];let I;e[24]!==(n==null?void 0:n.primaryAction)||e[25]!==(n==null?void 0:n.secondaryAction)||e[26]!==b||e[27]!==i||e[28]!==l||e[29]!==x||e[30]!==c||e[31]!==y?(I=b!=null?b:r.jsxs("div",{className:"m-w-fit flex shrink-0 flex-col gap-2 pb-1 md:pb-0",children:[x&&r.jsx(_e,{onClick:()=>{var F,$;i==null||i(),($=(F=n==null?void 0:n.primaryAction)==null?void 0:F.onClick)==null||$.call(F)},color:l!=null?l:"secondary",className:W("text-[#5856D6] dark:text-[#DCDBF6]","min-h-8"),children:x}),y&&r.jsx(_e,{onClick:()=>{var F,$;i==null||i(),($=(F=n==null?void 0:n.secondaryAction)==null?void 0:F.onClick)==null||$.call(F)},color:c!=null?c:"secondary",className:"shrink-0",children:y})]}),e[24]=n==null?void 0:n.primaryAction,e[25]=n==null?void 0:n.secondaryAction,e[26]=b,e[27]=i,e[28]=l,e[29]=x,e[30]=c,e[31]=y,e[32]=I):I=e[32];let N;return e[33]!==I||e[34]!==C||e[35]!==S||e[36]!==k||e[37]!==M||e[38]!==A?(N=r.jsx("div",{className:"relative",children:r.jsx(vn,{className:C,contentClassName:S,isElevated:!1,icon:k,title:void 0,content:M,onDismiss:A,customCtas:I})}),e[33]=I,e[34]=C,e[35]=S,e[36]=k,e[37]=M,e[38]=A,e[39]=N):N=e[39],N},l7e=[Gt.UPGRADE_TO_GO,Gt.GET_PLUS,Gt.GET_PRO,Gt.GET_BUSINESS_TRIAL,Gt.GET_PLUS_TRIAL,Gt.GET_GO_TRIAL],c7e=R(()=>P(()=>Promise.resolve().then(()=>sre),void 0).then(t=>t.TatertotNuxModal));function d7e({clientThreadId:t,rateLimitInfo:e,onDismiss:n,onInteract:s,onMount:o}){"use no-forget";var pe;const a=V(),{name:i,title:l,call_to_action:c,description:d,icon_image_url:u}=e,f="metadata"in e&&e.metadata?e.metadata:{},m=et(a),{updateSystemHint:p}=oa(),g=Mi(),h=rz(),x=Ve(t,he.getIsNewConversation),v=(pe=m==null?void 0:m.planType)!=null?pe:"unknown",y=wr(),b=Ee=>{switch(Ee.trim().toLowerCase()){case"image_gen":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_IMAGE_GEN;case"send":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_SEND;case"gizmo":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO;case"gizmo_tag":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO_TAG;case"dalle":case"dall_e":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_DALLE;case"advanced_data_analysis":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_ADAVANCED_DATA_ANALYSIS;case"gpt_4o":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_4O;case"gpt_5_auto":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_5_AUTO;case"progress_banner_gpt_5":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_PROGRESS_BANNER_GPT_5;default:return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_TEMPLATE}},C=h&&"block_reason"in h?h.block_reason:null,S="banner_description",k=_.useMemo(()=>({type:i||"unknown",location:S,plan_type:v,is_new_conversation:x,is_hard_block:!!h,hard_block_reason:C!=null?C:"",call_to_action:c,title:l,description:d,icon_image_url:u}),[i,v,x,h,C,c,l,d,u]),E=ot(),T=!tt(a),M=Gl(a),A=Hd(a,pt.signUpButtonText),{eligible:I,isLoading:N}=dt(Fe.hasSeenTatertotNux),L=ze(a,"1368081792"),D=H8(),F=Uf({skip:i!=="agent-connector-in-context-upsell",fetchValidLinksOnly:!0,productSku:"n7jupd"}),$=Array.from(F.connectorLinks.values()).some(Ee=>Ee.some(Se=>Se.connector_id===(f==null?void 0:f.connector_id))),{addSource:H}=La(t),z=Ee=>{switch(Ee){case Gt.CONNECT_CONNECTOR:return{text:pt.connect,onClick:()=>{B.logEventWithStatsig("Agent Connector In Context Upsell Banner CTA Clicked","chatgpt_agent_connector_in_context_upsell_banner_cta_clicked",{location:"Agent Connector In Context Upsell Banner CTA Clicked",eventProperties:k});const Se=At(t),Te=Se?new URL(Vo(Se),window.location.origin):new URL(window.location.href);if(Te.searchParams.set("oauth_success","true"),!!(f!=null&&f.connector_id))if($){H(Pp[f==null?void 0:f.connector_id]);return}else D({connectorId:f==null?void 0:f.connector_id,redirectAfter:Te.toString(),systemHintType:Pe.Agent})}};case Gt.AUTHENTICATE:return{text:M?pt.logInButtonText:A,onClick:()=>{Zt(a,{fallbackScreenHint:M?"login":"signup",callback:Se=>{M?B.logLogInButtonClicked({location:"Rate limit banner - ".concat(i),provider:Se},b(i)):B.logSignUpButtonClicked({location:"Rate limit banner - ".concat(i),provider:Se},b(i))},skipLoginModal:!Qa(a)})}};case Gt.AUTHENTICATE_SECONDARY:return{text:M?A:pt.logInButtonText,onClick:()=>{Zt(a,{fallbackScreenHint:M?"signup":"login",callback:Se=>{M?B.logSignUpButtonClicked({location:"Rate limit banner - ".concat(i),provider:Se},b(i)):B.logLogInButtonClicked({location:"Rate limit banner - ".concat(i),provider:Se},b(i))},skipLoginModal:!Qa(a)})}};case Gt.GET_PLUS:return{text:em(a),onClick:()=>{B.logRateLimitGetPlusButtonClicked(k),T?Zt(a,{fallbackScreenHint:M?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:Se=>{M?B.logLogInButtonClicked({location:"Rate limit banner Get Plus upsell",provider:Se},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PLUS_UPSELL):B.logSignUpButtonClicked({location:"Rate limit banner Get Plus upsell",provider:Se},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PLUS_UPSELL)},skipLoginModal:!Qa(a)}):xn(E,"Prompt textarea rate limit banner")}};case Gt.NEW_CHAT:return{text:Vi.newChatButton,onClick:()=>{B.logNewChatButtonClicked({location:S}),Mr(E)}};case Gt.DEEP_RESEARCH_IN_CONTEXT_UPSELL:{const Se=he.findNode(ft(t),Ne=>G8(Ne.message)),Te=Se?bo(Se.message):void 0;return{text:Vi.tryItButton,onClick:()=>{B.logEventWithStatsig("In Context Upsell Banner Deep Research CTA Clicked","chatgpt_in_context_upsell_banner_deep_research_cta_clicked",{location:"In-context upsell deep research - Try it button",eventProperties:k}),p(Pe.Research,{clientThreadId:t});const Ne=Pt(g);Ne.focus(),yo(Ne,Te!=null?Te:"")}}}case Gt.GET_PRO:return{text:Ise(a),onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},k),{upgrade_plan_tye:"pro"})),T?Zt(a,{fallbackScreenHint:M?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:Se=>{M?B.logLogInButtonClicked({location:"Rate limit banner Get Pro upsell",provider:Se},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PRO_UPSELL):B.logSignUpButtonClicked({location:"Rate limit banner Get Pro upsell",provider:Se},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PRO_UPSELL)},skipLoginModal:!Qa(a)}):xn(E,"Prompt textarea rate limit banner")}};case Gt.UPGRADE_TO_GO:return{text:Vi.upgradeToGoButton,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},k),{upgrade_plan_tye:"go"})),T?Zt(a,{fallbackScreenHint:M?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:Se=>{M?B.logLogInButtonClicked({location:"Rate limit banner Upgrade to Go upsell",provider:Se},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_UPGRADE_TO_GO_UPSELL):B.logSignUpButtonClicked({location:"Rate limit banner Upgrade to Go upsell",provider:Se},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_UPGRADE_TO_GO_UPSELL)},skipLoginModal:!Qa(a)}):xn(E,"Prompt textarea rate limit banner")}};case Gt.GET_BUSINESS_TRIAL:return{text:Vi.getBusinessTrialButton,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},k),{upgrade_plan_tye:"business"})),xn(E,"Prompt textarea rate limit banner")}};case Gt.GET_GO_TRIAL:return{text:pt.tryGoTrial,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},k),{upgrade_plan_tye:"go"})),xn(E,"Prompt textarea rate limit banner")}};case Gt.GET_PLUS_TRIAL:return{text:Vi.getPlusTrialButton,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},k),{upgrade_plan_tye:"plus"})),xn(E,"Prompt textarea rate limit banner",void 0,void 0,_1)}};case Gt.TRY_CODEX:return{text:Vi.tryCodexButton,onClick:()=>{B.logEventWithStatsig("In Context Upsell Banner Codex CTA Clicked","chatgpt_in_context_upsell_banner_codex_cta_clicked",{location:"In-context upsell codex - Try Codex button",eventProperties:k}),E("/codex")}};case Gt.TRY_TATERTOT:return{text:Vi.tryItButton,onClick:()=>{B.logEventWithStatsig("In Context Upsell Banner Tatertot CTA Clicked","chatgpt_in_context_upsell_banner_tatertot_cta_clicked",{location:"In-context upsell tatertot - Try it button",eventProperties:k}),Ie.count(je.TATERTOT,"tatertot_upsell_banner_try_it_clicked"),p(Pe.Tatertot,{clientThreadId:t}),!N&&I&&ye(a,"1586944302")&&lt(a,c7e)}};case Gt.NOTIFY_ADMIN_FOR_CREDITS:case Gt.ADD_CREDITS:return null}};Sm(()=>{!L.get("should_change_model_picker",!0)&&k.type==="o3-mini-high-in-context-upsell-plus"&&(k.type="o3-mini-high-in-context-upsell-plus-no-model-switch"),B.logRateLimitBannerShown(k),o==null||o()});const[K,J]=c!=null?c:[];let Z=J;K===Gt.AUTHENTICATE&&y&&(Z=Gt.AUTHENTICATE_SECONDARY);const q=ye(a,"2861925050");let se={};q&&(K===Gt.NOTIFY_ADMIN_FOR_CREDITS||K===Gt.ADD_CREDITS)?K===Gt.ADD_CREDITS?se={customActions:r.jsx(RP,{trigger:"prompt-textarea-rate-limit-banner"})}:K===Gt.NOTIFY_ADMIN_FOR_CREDITS&&(se={customActions:r.jsx(LP,{creditConsumingProduct:zde(i),trigger:"prompt-textarea-rate-limit-banner"})}):se={primaryAction:z(K),secondaryAction:z(Z)};const ie=f==null?void 0:f.connector_id,{platformConnectors:ee,isLoading:le}=Ad(!!ie),X=ie?ee.get(ie):void 0;let te=null;if(i==="agent-connector-in-context-upsell"){if(ie===void 0||!X||le)return null;te=r.jsx(vf,{connector:X,size:"xxlarge"})}const ce=ze(a,"2206338824"),ue=!x&&l7e.includes(K)?ce.get("web_design_style","control"):"control",me=ue==="composer_banner",xe=ue==="purple_cta";return me?r.jsx(i7e,{onDismiss:n,title:l,description:d,actions:se,onInteract:s,bannerIconImageUrl:u!=null?u:void 0,icon:te}):r.jsx(Sf,{onDismiss:n,title:l,description:d,actions:se,primaryButtonClassName:W({"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]":xe}),onInteract:s,bannerIconImageUrl:u!=null?u:void 0,icon:te})}const Vi=be({upgradeToGoButton:{id:"SuXEJy",defaultMessage:"Upgrade to Go"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"},tryItButton:{id:"zPDzun",defaultMessage:"Try it"},tryCodexButton:{id:"KcWniZ",defaultMessage:"Try Codex"},getBusinessTrialButton:{id:"PMkLT4",defaultMessage:"Try Business free"},getPlusTrialButton:{id:"H+N0ro",defaultMessage:"Try Plus free"}}),tXe=t=>{"use forget";const e=G.c(33),{clientThreadId:n,composerController:s}=t,o=uv(),a=Ve(n,he.getRequestId),i=Ve(n,he.getCurrentLeafId),l=Na(a),{markSeen:c}=W8(i),{markSeen:d,markDismissed:u}=YF(i),f=V();let m;e[0]!==f?(m=ze(f,"1368081792"),e[0]=f,e[1]=m):m=e[1];const p=m;let g;e[2]!==o||e[3]!==i||e[4]!==d||e[5]!==c?(g=o!=null&&o.name?()=>{e:switch(o.name){case"tatertot-in-context-upsell":{c(!1);break e}case"agent-connector-in-context-upsell":{d(!1);break e}case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":o7e(i)}}:void 0,e[2]=o,e[3]=i,e[4]=d,e[5]=c,e[6]=g):g=e[6];const h=g;let x;e[7]!==f?(x=ye(f,"3612584454"),e[7]=f,e[8]=x):x=e[8];const v=x,y=(o==null?void 0:o.name)==="gpt-4l"&&v;let b;e[9]!==l||e[10]!==y?(b=()=>{l&&!y&&ef.dismissBanner()},e[9]=l,e[10]=y,e[11]=b):b=e[11];let C;e[12]!==s||e[13]!==l||e[14]!==y?(C=[l,y,s],e[12]=s,e[13]=l,e[14]=y,e[15]=C):C=e[15],_.useEffect(b,C);let S;e[16]!==(o==null?void 0:o.is_dismissible)||e[17]!==(o==null?void 0:o.name)||e[18]!==p||e[19]!==u?(S=o!=null&&o.is_dismissible?()=>{(o==null?void 0:o.name)==="agent-connector-in-context-upsell"?B.logEventWithStatsig("Dismiss Agent Connector In Context Upsell Banner","chatgpt_agent_connector_in_context_upsell_banner_dismissed",{type:"agent-connector-in-context-upsell"}):B.logEventWithStatsig("Rate Limit: Dismiss Banner","chatgpt_rate_limit_banner_dismissed",{type:!p.get("should_change_model_picker",!0)&&(o==null?void 0:o.name)==="o3-mini-high-in-context-upsell-plus"?"o3-mini-high-in-context-upsell-plus-no-model-switch":o==null?void 0:o.name}),(o==null?void 0:o.name)==="agent-connector-in-context-upsell"&&u(),ef.dismissBanner()}:void 0,e[16]=o==null?void 0:o.is_dismissible,e[17]=o==null?void 0:o.name,e[18]=p,e[19]=u,e[20]=S):S=e[20];const k=S;let E;e[21]!==(o==null?void 0:o.name)||e[22]!==d||e[23]!==c?(E=()=>{e:switch(o==null?void 0:o.name){case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":{My({interactedInPeriod:!0});break e}case"tatertot-in-context-upsell":{c(!0);break e}case"agent-connector-in-context-upsell":{d(!0);break e}}},e[21]=o==null?void 0:o.name,e[22]=d,e[23]=c,e[24]=E):E=e[24];const T=E;let M;e[25]!==o||e[26]!==n||e[27]!==k||e[28]!==T||e[29]!==h?(M=o&&r.jsx(Xe.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:r.jsx(d7e,{clientThreadId:n,rateLimitInfo:o,onDismiss:k,onInteract:T,onMount:h})}),e[25]=o,e[26]=n,e[27]=k,e[28]=T,e[29]=h,e[30]=M):M=e[30];let A;return e[31]!==M?(A=r.jsx(mn,{children:M}),e[31]=M,e[32]=A):A=e[32],A};function u7e(t,e,n,s,o,a,i,l,c,d,u,f,m){if(c||(t.name==="o3-mini-high-in-context-upsell-free"||t.name==="o3-mini-high-in-context-upsell-plus")&&(e.some(C=>C.model_slug==="o4-mini-high")||(n==null?void 0:n.id)==="o4-mini-high")||l&&i&&ba(Date.now(),i)<Cy)return!1;const g=s==null||ba(Date.now(),s)>=s7e,h=o===d,x=i==null||a==null||ba(Date.now(),i)>=Cy||a<n7e;if(!(g&&x||h))return!1;switch(t.name){case"deep-research-in-context-upsell":return u("should_show_deep_research_upsell_banner",!1);case"deep-research-in-context-upsell-free":return u("should_show_deep_research_upsell_banner_free",!1);case"o3-mini-high-in-context-upsell-free":return u("should_show_o3_mini_high_upsell_banner_free_user_to_plus",!1);case"o3-mini-high-in-context-upsell-plus":return u("should_show_o3_mini_high_upsell_banner_plus_user",!1);case"codex-in-context-upsell":return f("should_show_codex_upsell_banner",!1);case"codex-in-context-upsell-plus":return m("should_show_codex_upsell_banner",!1);default:return!1}}function nXe(t){"use no forget";var k;const e=V(),n=Eh(),s=ae(()=>Qo(e)),o=Ph(),a=ae(()=>bn(yt(e,t))),i=Ve(t,he.getRequestId),l=Ve(t,he.getCurrentLeafId),c=Na(i),d=Sy(E=>E.lastSeenInContextUpsellBannerAt),u=ky(E=>E.inContextUpsellBannerPeriodExposureCount),f=wy(E=>E.inContextUpsellBannerPeriodStartAt),m=Ty(E=>E.inContextUpsellBannerLastSeenId),p=Ey(E=>E.inContextUpsellBannerInteractedInPeriod),g=ze(e,"1368081792"),h=ze(e,"1738106734"),x=ze(e,"3861158060"),v=ze(e,"1092897457"),y=uv(),{canBeSeen:b}=W8(l),{canBeSeen:C}=YF(l);if(n||s)return!1;let S=!1;switch(y==null?void 0:y.name){case null:case void 0:break;case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":S=u7e(y,o,a,d,m,u,f,p,c,l,g.get,h.get,x.get);break;case"tatertot-in-context-upsell":S=b&&v.get("is_tatertot_enabled",!0)&&v.get("is_upsell_banner_enabled",!0);break;case"agent-connector-in-context-upsell":S=C&&((k=y.metadata)==null?void 0:k.connector_id)!==void 0;break;default:S=!0}return!c&&S}function sXe(t){"use forget";const e=G.c(2);if(!t.shouldRender)return null;let n;return e[0]!==t?(n=r.jsx(f7e,w({},t)),e[0]=t,e[1]=n):n=e[1],n}function f7e({contentArea:t,children:e}){"use no forget";const{store:n}=Bd(),s=_.useRef(null);return n.useContentAreaResizeObserver(t,s),r.jsx("div",{ref:s,className:"relative h-full w-full",children:e})}const oXe=sn(()=>Be(!1));function aXe(t){returnwindow.location.host+"/redeem/".concat(t)}function rXe(t){return"/?code=".concat(t,"#referrals")}function iXe(t,e,n){return t.formatNumber(e||0,{style:"currency",currency:n,minimumFractionDigits:0,maximumFractionDigits:2})}function m7e(t){return"/?program=".concat(t,"#referrals")}function lXe(t){return"/refer/".concat(t)}function cXe(){const t=V(),e=ot(),{data:n}=wN();_.useEffect(()=>{n&&n.info&&(Yt.logShowReferralUpsellAnnouncementBanner(),B.logUpsellOrModalEvent(un,{eventId:"referral_upsell_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[n]);const s=n==null?void 0:n.info;return s?r.jsx(vn,{title:r.jsx(j,{id:"referralUpsellAnnouncementBanner.title",defaultMessage:"Get up to 12 free months of Plus when you refer classmates"}),content:r.jsx(j,{id:"referralUpsellAnnouncementBanner.content",defaultMessage:"Refer a friend to sign up for ChatGPT, and youll both get a $20 credit."}),primaryCtaText:r.jsx(j,{id:"referralUpsellAnnouncementBanner.primaryCtaText",defaultMessage:"Invite"}),onDismiss:()=>{st(t,Fe.hasSeenReferralUpsellAnnouncement),Yt.logCloseReferralUpsellAnnouncementBanner()},onPrimaryCtaClick:async()=>{st(t,Fe.hasSeenReferralUpsellAnnouncement),Yt.logClickReferralUpsellButton(),e(m7e(s.program_name))}}):null}const dXe=t=>{var i,l,c,d,u,f,m,p;const{data:e,isLoading:n}=rt({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>lm.getReferralProgramMetadata(t)}),s=e,o=(c=(l=(i=s==null?void 0:s.metadata)==null?void 0:i.program_name)!=null?l:t)!=null?c:null,a=(s==null?void 0:s.ineligible_reason)&&(s&&!s.is_eligible&&(d=s.ineligible_reason)!=null?d:null);return{isEligible:(u=s==null?void 0:s.is_eligible)!=null?u:!1,referralMetadata:(f=s==null?void 0:s.metadata)!=null?f:null,programName:o,isReferralLoading:n,referralCode:(m=s==null?void 0:s.referral_code)!=null?m:null,transactionId:(p=s==null?void 0:s.transaction_id)!=null?p:null,referralError:a}},p7e=t=>{var a,i,l,c,d,u;const{data:e,isLoading:n}=rt({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>t?lm.getReferralCodeMetadata(t):{metadata:null,is_referrer:!1,ineligible_reason:null,should_forward_to_checkout:!1}}),s=e,o=(i=(a=s==null?void 0:s.metadata)==null?void 0:a.program_name)!=null?i:null;return{shouldForwardToCheckout:(l=s==null?void 0:s.should_forward_to_checkout)!=null?l:!1,isReferrer:(c=s==null?void 0:s.is_referrer)!=null?c:!1,ineligibleReason:(d=s==null?void 0:s.ineligible_reason)!=null?d:null,referralMetadata:(u=s==null?void 0:s.metadata)!=null?u:null,programName:o,isReferralLoading:n}},g7e=Fe.hasDismissedRefereeRedemption,h7e=()=>{const{eligible:t}=dt(g7e),{referralCode:e,discountValue:n,discountDuration:s}=_7e();return{shouldShowBanner:t&&e&&n&&s,referralCode:e,discountValue:n,discountDuration:s}},_7e=()=>{const t=gt.getItem(Ue.ReferralCode),{referralMetadata:e}=p7e(t);return{referralCode:t,discountValue:e==null?void 0:e.discount,discountDuration:e==null?void 0:e.duration}},uXe=()=>{const t=V(),e=ye(t,"727502549"),n=ye(t,"550432558"),{shouldShowBanner:s}=h7e();return e&&n&&s};async function x7e(t){return ge.safePost("/payments/checkout",{requestBody:t,additionalHeaders:Dv(null,null,null,await cA("chatgpt_checkout").catch(e=>{Re.addError(e)}))})}async function y7e(t,e,n,s){B.logEvent("Account Pay: Payment Checkout Clicked",e),Ye.logEvent("chatgpt_account_payment_modal_upgrade_button_click",We.PLUS);const o=await x7e(w(w({plan_name:"chatgptplusplan",billing_details:t},n&&{student_verification_id:n}),s&&{veterans_verification_id:s}));B.logEvent("Account Pay: Navigating to Payment Checkout",U(w({},e),{url:o.url})),Ye.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",We.PLUS,{url:o.url}),n&&gt.setItem(Ue.CheckoutFrom,"students"),s&&gt.setItem(Ue.CheckoutFrom,"veterans"),window.location.href=o.url}const v7e=t=>{var s;const{data:e,isLoading:n}=rt({queryKey:["referralDiscount",t],queryFn:async()=>t?await lm.getReferralDiscount():{discount:null}});return{discount:(s=e==null?void 0:e.discount)!=null?s:null,isDiscountLoading:n}},Ay=Fe.hasDismissedReferrerRedemption,JF=()=>{const{eligible:t}=dt(Ay),{discount:e,isDiscountLoading:n}=v7e(t);return{shouldShowBanner:t&&e&&!n,discountValue:e==null?void 0:e.value,discountDuration:e==null?void 0:e.duration}},fXe=()=>{const t=V(),e=ye(t,"727502549"),n=ye(t,"550432558"),{shouldShowBanner:s}=JF();return e&&n&&s},eh="month",XF="year";function mXe(){const t=Cn(),e=V(),n=ne(),{country:s}=HSe(),o=VSe({country:s,currentAccount:t,location:"ReferrerRedemptionAvailableAnnouncementBanner",shouldUsePaidSubscriptionBillingCurrency:!0}),a=_.useMemo(()=>U(w({},t==null?void 0:t.subscriptionAnalyticsParams),{referrer:document.referrer}),[t]);async function i(){try{if(!o)return;await y7e(o,a)}catch(p){}}const{shouldShowBanner:l,discountValue:c,discountDuration:d}=JF();if(_.useEffect(()=>{l&&c&&d&&(Yt.logShowReferrerRedemptionBanner(),B.logUpsellOrModalEvent(un,{eventId:"referrer_redemption_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[l,c,d]),!l||!c||!d||!o)return null;const u=b7e(n,o,c,d),f=C7e(n,o,c,d),m=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:u}),r.jsx("span",{className:"text-token-text-secondary",children:f})]});return r.jsx(vn,{onPrimaryCtaClick:()=>{st(e,Ay),Yt.logClickReferrerRedeemButton(),i()},primaryCtaText:r.jsx(j,w({},em(e))),onDismiss:()=>{st(e,Ay),Yt.logCloseReferrerRedemptionBanner()},content:m})}function b7e(t,e,n,s){var u,f;const o=B3(e.currency),a=s?s.period:eh,i=s?s.num_periods:1,l=(f=(u=o.code.defaultMessage)==null?void 0:u.toString())!=null?f:z8,c=t.formatNumber(n.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let d;return a===eh?d=i===1?r.jsx(j,{id:"referrerRedemptionBannerTitleForSingleMonth",defaultMessage:"Your {discount} credit is ready",values:{discount:c}}):r.jsx(j,{id:"referrerRedemptionBannerTitleForPluralMonths",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):a===XF&&(d=i===1?r.jsx(j,{id:"referrerRedemptionBannerTitleForSingleYear",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):r.jsx(j,{id:"referrerRedemptionBannerTitleForPluralYears",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}})),d}function C7e(t,e,n,s){var u,f;const o=B3(e.currency),a=s?s.period:eh,i=s?s.num_periods:1,l=(f=(u=o.code.defaultMessage)==null?void 0:u.toString())!=null?f:z8,c=t.formatNumber(n.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let d;return a===eh?d=i===1?r.jsx(j,{id:"referrerRedemptionBannerContentForSingleMonth",defaultMessage:"Your referral link was used  claim your free month of Plus."}):r.jsx(j,{id:"referrerRedemptionBannerContentForPluralMonths",defaultMessage:"Your referral link earned you {discount} off {num_months} months of Plus.",values:{discount:c,num_months:i}}):a===XF&&(d=i===1?r.jsx(j,{id:"referrerRedemptionBannerContentForSingleYear",defaultMessage:"Your referral link earned you {discount} off a year of Plus.",values:{discount:c}}):r.jsx(j,{id:"referrerRedemptionBannerContentForPluralYears",defaultMessage:"Your referral link earned you {discount} off {num_years} years of Plus.",values:{discount:c,num_years:i}})),d}const d2={logDisabledAccess(t){Ie.count(je.STUDENTS,"students.web.disabled",{reason:t})},logLandingPageImpression(){Ie.count(je.STUDENTS,"students.web.landingPageImpression"),B.logEvent("Students: Landing Page Impression")},logClickLoginButton(t){Ie.count(je.STUDENTS,"students.web.clickLoginButton",{key:"source",value:t}),B.logEvent("Students: Click Login Button",{source:t})},logClickVerifyButton(t){Ie.count(je.STUDENTS,"students.web.clickVerifyButton",{key:"source",value:t}),B.logEvent("Students: Click Verify Button",{source:t})},logClickCheckoutButton(t){Ie.count(je.STUDENTS,"students.web.clickCheckoutButton",{key:"source",value:t}),B.logEvent("Students: Click Checkout Button",{source:t})},logShowNeedsVerificationModal(){Ie.count(je.STUDENTS,"students.web.showNeedsVerificationModal"),B.logEvent("Students: Show Needs Verification Modal")},logShowVerifiedModal(){Ie.count(je.STUDENTS,"students.web.showVerifiedModal"),B.logEvent("Students: Show Verified Modal")},logError(t){Ie.count(je.STUDENTS,"students.web.error",{key:"errorType",value:t})},logShowAnnouncementBanner(){Ie.count(je.STUDENTS,"students.web.showAnnouncementBanner"),B.logEvent("Students: Show Announcement Banner")},logClickAnnouncementBanner(){Ie.count(je.STUDENTS,"students.web.clickAnnouncementBanner"),B.logEvent("Students: Click Announcement Banner")},logCloseAnnouncementBanner(){Ie.count(je.STUDENTS,"students.web.closeAnnouncementBanner"),B.logEvent("Students: Close Announcement Banner")}},pXe="redirectedFromAuth",S7="studentsPromotion";function w7(t){return t?"/students?".concat(t,"=true"):"/students"}function gXe(t=!1){return t?window.location.origin+"/?".concat(S7,"=true"):"/?".concat(S7,"=true")}function hXe(t){const e=t.hasPaidSubscription(),n=t.getLastActiveSubscription(),s=e&&[q_.CHATGPT_IOS,q_.SORA_IOS].includes(n.purchase_origin_platform),o=e&&n.purchase_origin_platform===q_.MOBILE_ANDROID;return s||o}function _Xe(){const t=V(),e=ot();return _.useEffect(()=>{d2.logShowAnnouncementBanner(),B.logUpsellOrModalEvent(un,{eventId:"students_upsell_announcement_banner_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(vn,{title:r.jsx(j,{id:"GA5kGX",defaultMessage:"Students can claim 2 months of Plus, free."}),content:r.jsx(j,{id:"WOGB1g",defaultMessage:"Get access to premium features when you verify youre a student in the US or Canada. {learnMoreLink}",values:{learnMoreLink:r.jsx("span",{className:"underline",children:r.jsx(Eo,{to:w7(),children:r.jsx(j,{id:"0cZpUc",defaultMessage:"Learn more"})})})}}),primaryCtaText:r.jsx(j,{id:"uA26i5",defaultMessage:"Learn More"}),onPrimaryCtaClick:()=>{d2.logClickAnnouncementBanner(),st(t,Fe.hasSeenStudentsUpsellAnnouncement),e(w7())},onDismiss:()=>{d2.logCloseAnnouncementBanner(),st(t,Fe.hasSeenStudentsUpsellAnnouncement)}})}const xXe=t=>q8([wt.GizmoMagicCreate,wt.GizmoTest],t==null?void 0:t.kind),S7e=t=>q8([wt.GizmoInteraction,wt.GizmoMagicCreate,wt.GizmoTest],t==null?void 0:t.kind);function w7e(t){return[{title:t.formatMessage({id:"er580q",defaultMessage:"Create an image of a magazine cover of cute animals with headlines and text"}),body:"",type:Je.Autocomplete,prompt:t.formatMessage({id:"SKZKBN",defaultMessage:"Create an image of a photorealistic magazine cover for 'CUTE ANIMALS,' featuring three impossibly cute and stylishly accessorized pets, with realistic, catchy headlines and teaser text"}),theme:Sn.Image},{title:t.formatMessage({id:"ukPFbH",defaultMessage:"Create an image for a garden-themed birthday party invitation"}),body:"",type:Je.Autocomplete,prompt:t.formatMessage({id:"uYg5kL",defaultMessage:"Create an image of a colorful invitation for a garden-themed birthday party, including whimsical typography"}),theme:Sn.Image},{title:t.formatMessage({id:"mMiJxP",defaultMessage:"Create an image of an astronaut with an inflatable duck on Mars"}),body:"",type:Je.Autocomplete,prompt:t.formatMessage({id:"5nFWh4",defaultMessage:"Create a photorealistic image of an international astronaut on Mars, wearing a giant duck inflatable toy around its waist"}),theme:Sn.Image},{title:t.formatMessage({id:"+T7POI",defaultMessage:"Create an image of a tutorial for cooking pasta"}),body:"",type:Je.Autocomplete,prompt:t.formatMessage({id:"9N2bJ0",defaultMessage:"Create an image of a comic-book style tutorial for cooking pasta"}),theme:Sn.Image}]}const k7e=Wf(()=>Be(!1)),eB=Wf(t=>{const e=Be([],{equals:Bf}),n=St(()=>{const s=k7e(t),o=iz(Pt(t));return fv(t)&&!s()&&e().length>0&&!(o!=null&&o())},{getServerFallback:()=>!1});return{autocompletions$:e,shouldShowAutocomplete$:n}});function e4(){return"virtualKeyboard"in navigator}const E7e=Dt()(()=>({height:0,isKeyboardOpen:!1,scrollOffset:null,composerHeight:null}));function T7e(t){return t?t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable:!1}function M7e(){document.documentElement.classList.add("keyboard-open")}function A7e(){document.documentElement.classList.remove("keyboard-open")}const t4=Wn(()=>{const t=Be(null),e=Be(!1),n=Be(null),s=Be(0),o=Be(!1),a=new EventTarget,i=f=>{a.dispatchEvent(new CustomEvent(f))},l=(f,m,p)=>{a.addEventListener(f,m,p)},c=(f,m,p)=>{a.removeEventListener(f,m,p)};setTimeout(()=>{o.set(e4())});function d(f){const m=new AbortController,p=t();if(!p)return;p.blur(),l("keyboard-closed",()=>{m.abort(),f==null||f()},{signal:m.signal});const g=window.setTimeout(()=>{f==null||f(),m.abort()},500);m.signal.addEventListener("abort",()=>{window.clearTimeout(g)})}return{closeKeyboard:d,events:{addEventListener:l,dispatch:i,removeEventListener:c},focusedElement:t,isKeyboardOpen:e,keyboardDimensions:n,keyboardHeight:s,reset:()=>{Co(()=>{t.set(null),e.set(!1),n.set(null),s.set(0)})},supportsVirtualKeyboardApi$:o}});function yXe(t){if(!e4())return;const e=t4(t);let n=!1;const s=navigator.virtualKeyboard.overlaysContent;function o(){if(n)return;e.reset(),document.removeEventListener("focusout",a),A7e(),document.body.style.removeProperty("--screen-keyboard-height"),navigator.virtualKeyboard.removeEventListener("geometrychange",i);let c;const d=u=>{u.target.boundingRect.height===0&&setTimeout(()=>{e.events.dispatch("keyboard-closed"),window.clearTimeout(c)},100)};c=window.setTimeout(()=>{navigator.virtualKeyboard.removeEventListener("geometrychange",d),e.events.dispatch("keyboard-closed")},500),navigator.virtualKeyboard.addEventListener("geometrychange",d)}const a=()=>{n=!1,e.isKeyboardOpen.set(!1),requestAnimationFrame(o)},i=c=>{document.body.style.setProperty("--screen-keyboard-height","".concat(c.target.boundingRect.height,"px")),M7e(),e.keyboardDimensions.set(c.target.boundingRect),e.keyboardHeight.set(c.target.boundingRect.height)},l=c=>{const d=c.target;T7e(d)&&(n=!0,e.focusedElement.set(d),e.isKeyboardOpen.set(!0),e.events.dispatch("keyboard-opened"),document.addEventListener("focusout",a),navigator.virtualKeyboard.addEventListener("geometrychange",i))};return navigator.virtualKeyboard.overlaysContent=!0,document.addEventListener("focusin",l),()=>{navigator.virtualKeyboard.overlaysContent=s,document.removeEventListener("focusin",l),o()}}function vXe(t){"use forget";const e=G.c(14),{canShowAutocomplete$:n,layoutMode:s,composerController:o,clientThreadId:a}=t,i=V(),l=ae(n);let c;e[0]!==i?(c=t4(i),e[0]=i,e[1]=c):c=e[1];const u=ae(c.supportsVirtualKeyboardApi$);let f;e[2]!==o?(f=(y,b,C)=>{b&&yo(Pt(o),C?"".concat(C.title).concat(C.body):"")},e[2]=o,e[3]=f):f=e[3];const m=f;if(!l)return null;const p=s==="center"?"top-full":"bottom-full",g=u&&"keyboard-open:fixed keyboard-open:bottom-[calc(var(--screen-keyboard-height,0px)+var(--composer-height,100px)+12px)] keyboard-open:px-4";let h;e[4]!==p||e[5]!==g?(h=W("absolute start-0 z-[-1] box-border w-full ps-0",p,g),e[4]=p,e[5]=g,e[6]=h):h=e[6];let x;e[7]!==a||e[8]!==o||e[9]!==m?(x=r.jsx(I7e,{composerController:o,onChange:m,clientThreadId:a}),e[7]=a,e[8]=o,e[9]=m,e[10]=x):x=e[10];let v;return e[11]!==h||e[12]!==x?(v=r.jsx("div",{className:h,children:x}),e[11]=h,e[12]=x,e[13]=v):v=e[13],v}function I7e(t){"use forget";const e=G.c(51),{composerController:n,onSelect:s,onChange:o,clientThreadId:a}=t;let i;e[0]!==n?(i=eB(n),e[0]=n,e[1]=i):i=e[1];const l=ae(i.autocompletions$),c=Ud(),d=V();let u,f;e[2]!==a||e[3]!==l?(u=()=>{l.length>0&&l.every(N7e)&&nJ(l,a)},f=[l,a],e[2]=a,e[3]=l,e[4]=u,e[5]=f):(u=e[4],f=e[5]),_.useEffect(u,f);let m;e[6]!==c||e[7]!==d||e[8]!==s?(m=(q,se,ie,ee)=>{var le,X;if(se.onSelectOverride)return se.onSelectOverride(q,se,ie,ee);if(se.type===Je.Templated){const te={id:(le=se.id)!=null?le:"dyn-".concat(Date.now()),name:se.title,prompt:se.prompt,description:(X=se.title)!=null?X:null};lz({ctx:d,prompt:te,referer:"autocomplete-suggestion"}),s==null||s(se,ie,ee);return}s==null||s(se,ie,ee),c(q,se,ie,ee)},e[6]=c,e[7]=d,e[8]=s,e[9]=m):m=e[9];const p=m,g=l.length>0,[h,x]=_.useState(-1),[v,y]=_.useState(!1);let b;e[10]!==o||e[11]!==h||e[12]!==l?(b=()=>{const q=h===l.length-1?0:h+1;return x(q),o==null||o(q,!0,l[q]),!0},e[10]=o,e[11]=h,e[12]=l,e[13]=b):b=e[13];const C=Ca(b);let S;e[14]!==o||e[15]!==h||e[16]!==l?(S=()=>{const q=h<=0?l.length-1:h-1;return x(q),o==null||o(q,!0,l[q]),!0},e[14]=o,e[15]=h,e[16]=l,e[17]=S):S=e[17];const k=Ca(S);let E;e[18]!==p||e[19]!==h||e[20]!==l?(E=q=>l[h]?(p(q,l[h],l,h),!0):!1,e[18]=p,e[19]=h,e[20]=l,e[21]=E):E=e[21];const T=Ca(E);let M,A;e[22]!==n||e[23]!==C||e[24]!==k||e[25]!==T?(M=()=>Y8(Pt(n),{ArrowDown:C,ArrowUp:k,Enter:T}),A=[n,C,k,T],e[22]=n,e[23]=C,e[24]=k,e[25]=T,e[26]=M,e[27]=A):(M=e[26],A=e[27]),_.useEffect(M,A);let I,N;e[28]!==v?(I=()=>{if(!v){const q=()=>{y(!0),window.removeEventListener("mousemove",q)};return window.addEventListener("mousemove",q),()=>{window.removeEventListener("mousemove",q)}}},N=[v],e[28]=v,e[29]=I,e[30]=N):(I=e[29],N=e[30]),_.useEffect(I,N);let L;e[31]!==o?(L=()=>{x(-1),o==null||o(-1,!1),y(!1)},e[31]=o,e[32]=L):L=e[32];let D;e[33]!==o||e[34]!==l?(D=[l,o],e[33]=o,e[34]=l,e[35]=D):D=e[35],_.useEffect(L,D);let F,$,H;e[36]===Symbol.for("react.memo_cache_sentinel")?(F={opacity:0},$={opacity:1},H={opacity:0},e[36]=F,e[37]=$,e[38]=H):(F=e[36],$=e[37],H=e[38]);const z=g?"flex":"hidden";let K;e[39]!==z?(K=W("bg-token-bg-primary divide-token-border-light w-full flex-col divide-y p-2.5 max-sm:px-0",z),e[39]=z,e[40]=K):K=e[40];let J;e[41]!==v||e[42]!==n||e[43]!==p||e[44]!==o||e[45]!==h||e[46]!==l?(J=l.map((q,se)=>{var ie;return r.jsx(Xe.li,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:se*.03},exit:{opacity:0,translateY:4},className:"w-full",children:r.jsxs("button",{className:W("flex w-full cursor-pointer items-center justify-start rounded-lg px-2.5 py-3 text-start whitespace-pre-wrap",h===se?"bg-token-main-surface-secondary":"bg-token-main-surface-primary"),onClick:ee=>{ee.preventDefault(),p(ee,q,l,se),a3()&&Pt(n).dom.blur()},onMouseDown:j7e,onMouseEnter:()=>{v&&(x(se),o==null||o(se,!1,q))},onMouseLeave:()=>{x(-1),o==null||o(-1,!1,q)},children:[q.source==="CURATED"&&(q.iconThumbnailUrl||q.coverThumbnailImageUrl)?r.jsx("img",{className:W("me-2 flex-none rounded-md object-cover",q.coverThumbnailImageUrl?"h-7 w-7":"h-8 w-8"),src:q.iconThumbnailUrl||q.coverThumbnailImageUrl,alt:""}):q.emoji?r.jsx("span",{"aria-hidden":"true",className:W("bg-primary text-token-text-primary text-md me-4 flex flex-none items-center justify-center"),children:q.emoji}):q.icon?r.jsx("span",{className:"text-token-text-secondary icon me-2 flex-none",children:q.icon}):null,r.jsx("span",{className:W(q.category==="personalized"?"text-md":"text-sm","whitespace-pre-wrap"),children:q.autocompletionChunks&&q.autocompletionChunks.length>0?r.jsx(r.Fragment,{children:q.autocompletionChunks.map((ee,le)=>{var X;return r.jsx("span",{className:W((X=ee.className)!=null?X:ee.isMatched?"text-token-text-tertiary":q.category==="personalized"?"text-token-text-secondary":"text-token-text-primary"),children:ee.text},le)})}):q.source==="CURATED"?r.jsx("span",{className:W("text-pretty",q.type===Je.Starter||q.type===Je.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:q.title}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:W("text-pretty",q.type===Je.Starter||q.type===Je.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:q.title}),r.jsx("span",{className:"text-token-text-primary text-pretty",children:q.body})]})}),q.trailing?q.trailing:null]})},(ie=q.id)!=null?ie:se)}),e[41]=v,e[42]=n,e[43]=p,e[44]=o,e[45]=h,e[46]=l,e[47]=J):J=e[47];let Z;return e[48]!==K||e[49]!==J?(Z=r.jsx(Xe.ul,{initial:F,animate:$,exit:H,className:K,children:J}),e[48]=K,e[49]=J,e[50]=Z):Z=e[50],Z}function j7e(t){t.preventDefault()}function N7e(t){return t.type===Je.Autocomplete||t.type===Je.Trending}function P7e(t,e){t=t.toLocaleLowerCase();const n=e;e=e.toLocaleLowerCase();const s=[];let o=0;for(let l=0;l<e.length&&(o<t.length&&t[o]===e[l]&&(s.push(l),o++),o!==t.length);l++);const a=[];let i=0;if(s.forEach(l=>{if(l>i){const c=n.slice(i,l);c&&a.push({text:c,isMatched:!1})}a.push({text:n[l],isMatched:!0}),i=l+1}),i<e.length){const l=n.slice(i);l&&a.push({text:l,isMatched:!1})}return R7e(a)}function R7e(t){if(t.length===0)return t;const e=[t[0]];for(let s=1;s<t.length;s++){const o=e[e.length-1],a=t[s];o.isMatched===a.isMatched?o.text+=a.text:e.push(a)}const n=e.filter(s=>s.isMatched).reduce((s,o)=>s+o.text.trim().length,0);return e.length<=4&&n>=2?e:[{text:e.map(s=>s.text).join(""),isMatched:!1}]}function L7e(t=8,e=null){return es({queryKey:["promptStarters",t,e],queryFn:async()=>{const n=await ge.safeGet("/prompt_library/",{parameters:{query:{limit:t,use_v2:!0,model_slug:e}},authOption:nn.SendIfAvailable});return Re.addFirstTiming("load.promptStarters"),n}})}function Iy(t){var e;return(e=Sc(t)?t.promptStarters:t.gizmo.display.prompt_starters)==null?void 0:e.map(n=>({type:Je.Starter,title:"",body:n,prompt:n}))}function tB(){const t=V(),e=cn(),n=Jh(FM),s=tt(t),o=n4(t,!1);return!s&&n<o.get("new-user-message-count",20)||s&&e&&Date.now()/1e3-e.created<o.get("new-user-age-seconds",336*60*60)}const O7e=()=>{const t=V(),e=n4(t,!0),n=tB(),s=et(t);return s!=null&&s.isK12()?()=>!0:()=>n&&e.get("web-enable-for-new-users",!1)||!n&&e.get("web_enable_for_existing_users",!1)};function nB({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const n=O7e(),s=V(),o=et(s),a=Ve(e,c=>c==null?void 0:c.mode),i=S7e(a);let l=!(o!=null&&o.isEnterprisey());return o!=null&&o.isK12()&&(l=!0),t&&!i&&l&&n()}function bXe({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const n=V(),s=n4(n,!1),o=tB(),[a,i]=Ei("homepage_prompt_style","",m=>typeof m=="string"),l=s.get("homepage_prompt_style","chips"),c=s.get("persist_new_user_experience",!1);let d=l;c&&a&&(d=a);const u=et(n);return u&&u.isK12()&&(d="tiles"),_.useEffect(()=>{a&&!c?i(""):!a&&o&&c&&i(l)},[a,i,s,o,l,c]),nB({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e})?d:"chips"}const CXe=({clientThreadId:t,limit:e,shouldBeEnabledForDefaultAssistant:n,modelSlug:s})=>{var E,T;const o=Mi(),{autocompletions$:a}=eB(o),i=Xo(),l=ne(),{clearAllSystemHintModeTriggers:c,setThreadSystemHintMode:d}=oa(),u=Ve(t,M=>M==null?void 0:M.mode),f=Si((u==null?void 0:u.kind)===wt.GizmoInteraction?u.gizmo_id:void 0).data,{gizmoEditorData:m,mode:p}=rv(),g=nB({shouldBeEnabledForDefaultAssistant:n,clientThreadId:t}),{data:h,isSuccess:x}=rt(U(w({},L7e(e,s)),{enabled:g}));if(i==null)return{promptStarters:[],isLoading:!0,isSuccess:!1};if(p==="test"&&m)return{promptStarters:(E=Iy(m))!=null?E:[],isLoading:!1,isSuccess:!0};if(f!=null)return{promptStarters:Iy(f),isLoading:!1,isSuccess:!0};if(!g)return{promptStarters:[],isLoading:!1,isSuccess:!0};const v=(T=h==null?void 0:h.items.map(M=>({type:Je.Starter,id:M.id,title:M.title,body:M.description,prompt:M.prompt,category:M.category,oneliner:M.oneliner,theme:M.theme,requires_file_upload:M.requires_file_upload})))!=null?T:[],y=(M,A,I,N)=>{const L=Pt(o);if(A.type===Je.Starter&&A.category==="dalle"){requestAnimationFrame(()=>{c(),d(Pe.PictureV2,!0,{}),so(L)}),a.set(w7e(l));return}const D=A.title;a.set([]),L.focus(),yo(L,D),requestAnimationFrame(()=>{const F=v.filter($=>$.theme===A.theme).map($=>{const H=Qs($.oneliner),z=H.startsWith($.title);return U(w({},$),{title:z?"".concat($.title," "):"",body:z?$.body:H,autocompletionChunks:P7e(D,H),type:Je.Autocomplete})});a.set(F),n1(A,N,t)})},b=v==null?void 0:v.reduce((M,A)=>(A.theme&&!M[A.theme]&&(M[A.theme]=A),M),{}),C=[];if(b)for(const M in b)M!=="For you"&&C.push(b[M]);const S=C.length>0,k=n&&x&&S;return n&&(va.markStart("StarterPromptChips",va.NS_COMPOSER),k&&va.markRendered("StarterPromptChips",va.NS_COMPOSER)),{onSelectStarterPrompt:y,shouldShowStarterPrompts:k,promptStarters:C}};function n4(t,e=!1){const n=Sr(t),s=n.getLayer("4031588851",{disableExposureLog:!e}),o=n.getLayer("3533083032",{disableExposureLog:!e});return tt(t)?s:o}const bs=be({add_picture_do_rest:{id:"india-viral-image-gen-prompts.add_picture_do_rest",defaultMessage:"Just add a picture  ChatGPT will do the rest."},navratri_title:{id:"india-viral-image-gen-prompts.navratri.title",defaultMessage:"Navratri Garba Glow"},navratri_oneliner:{id:"india-viral-image-gen-prompts.navratri.oneliner",defaultMessage:"Garba night photo, styled for you"},navratri_prompt:{id:"india-viral-image-gen-prompts.navratri.prompt",defaultMessage:"Transform us into a Garba dance celebration, wearing colorful chaniya cholis and kediyus, ready to dance under strings of fairy lights in a festive ground."},diwali_title:{id:"india-viral-image-gen-prompts.diwali.title",defaultMessage:"Diwali Family Lights"},diwali_oneliner:{id:"india-viral-image-gen-prompts.diwali.oneliner",defaultMessage:"Create a Diwali card from your photo"},diwali_prompt:{id:"india-viral-image-gen-prompts.diwali.prompt",defaultMessage:"Change the photo to us wearing traditional clothes, participating in a Diwali celebration. Glowing 'Happy Diwali From [Insert Name]' text written in background with shining letters floats in the air. Make it a slightly stylized festive illustration."},childrens_title:{id:"india-viral-image-gen-prompts.childrens.title",defaultMessage:"Children's Day Story"},childrens_oneliner:{id:"india-viral-image-gen-prompts.childrens.oneliner",defaultMessage:"Make a playful Childrens Day card"},childrens_prompt:{id:"india-viral-image-gen-prompts.childrens.prompt",defaultMessage:"Create a Happy Children's Day greeting card in a photo surrealistic style. The photo looks like there is a big open book with the greeting written on it and the children are playing on swings and slides around it. There are rainbows and confetti all around."},christmas_title:{id:"india-viral-image-gen-prompts.christmas.title",defaultMessage:"Christmas Wonderland Card"},christmas_oneliner:{id:"india-viral-image-gen-prompts.christmas.oneliner",defaultMessage:"Make a snowy family Christmas card"},christmas_prompt:{id:"india-viral-image-gen-prompts.christmas.prompt",defaultMessage:'Make the family celebrate Christmas in a detailed snowy winter wonderland Christmas card style with "Merry Christmas from the [Insert Name]" written in the background.'},cricket_title:{id:"india-viral-image-gen-prompts.cricket.title",defaultMessage:"Cricket Festival Street"},cricket_oneliner:{id:"india-viral-image-gen-prompts.cricket.oneliner",defaultMessage:"Get a custom match-day photo"},cricket_prompt:{id:"india-viral-image-gen-prompts.cricket.prompt",defaultMessage:"Generate a vibrant Indian festival street scene with me included in the celebration and fans in blue jerseys dancing Garba and waving flags, colorful gulal (powder) flying in the air, and a glowing banner reading 'Chak De India' in beautiful English calligraphy."}});function SXe(){"use forget";var p;const t=G.c(16),e=V(),n=ne();let s;if(t[0]!==e){const{country:g}=kd(e);s=(g!=null?g:"").toUpperCase(),t[0]=e,t[1]=s}else s=t[1];const o=s;let a;if(t[2]!==n||t[3]!==o){const g=n.formatMessage(bs.add_picture_do_rest),h=B7e,x=C=>{var E;const S=(E=C.trending_target_countries)!=null?E:[];return S.length===0||o===""?!1:new Set(S.map(F7e)).has(o)},y=[{type:Je.Trending,id:"india_viral_navratri_garba",title:n.formatMessage(bs.navratri_title),body:g,oneliner:n.formatMessage(bs.navratri_oneliner),prompt:n.formatMessage(bs.navratri_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-21T18:30:00Z",end_time_utc:"2025-10-02T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-2@2x.png"}],theme:Sn.ImageGenTrending,source:"CURATED"},{type:Je.Trending,id:"india_viral_diwali_family_glow",title:n.formatMessage(bs.diwali_title),body:g,oneliner:n.formatMessage(bs.diwali_oneliner),prompt:n.formatMessage(bs.diwali_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-10-14T18:30:00Z",end_time_utc:"2025-10-22T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-2@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-3@2x.png"}],theme:Sn.ImageGenTrending,source:"CURATED"},{type:Je.Trending,id:"india_viral_childrens_day_card",title:n.formatMessage(bs.childrens_title),body:g,oneliner:n.formatMessage(bs.childrens_oneliner),prompt:n.formatMessage(bs.childrens_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-11-11T18:30:00Z",end_time_utc:"2025-11-14T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/childrens-day@2x.png"}],theme:Sn.ImageGenTrending,source:"CURATED"},{type:Je.Trending,id:"india_viral_christmas_card",title:n.formatMessage(bs.christmas_title),body:g,oneliner:n.formatMessage(bs.christmas_oneliner),prompt:n.formatMessage(bs.christmas_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-12-24T18:30:00Z",end_time_utc:"2025-12-25T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/christmas@2x.png"}],theme:Sn.ImageGenTrending,source:"CURATED"},{type:Je.Trending,id:"india_viral_cricket_festival",title:n.formatMessage(bs.cricket_title),body:g,oneliner:n.formatMessage(bs.cricket_oneliner),prompt:n.formatMessage(bs.cricket_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-08T18:30:00Z",end_time_utc:"2025-09-28T18:29:59Z"},{start_time_utc:"2025-10-18T18:30:00Z",end_time_utc:"2025-10-19T18:29:59Z"},{start_time_utc:"2025-10-22T18:30:00Z",end_time_utc:"2025-10-23T18:29:59Z"},{start_time_utc:"2025-10-24T18:30:00Z",end_time_utc:"2025-10-25T18:29:59Z"},{start_time_utc:"2025-10-28T18:30:00Z",end_time_utc:"2025-10-29T18:29:59Z"},{start_time_utc:"2025-10-30T18:30:00Z",end_time_utc:"2025-10-31T18:29:59Z"},{start_time_utc:"2025-11-01T18:30:00Z",end_time_utc:"2025-11-02T18:29:59Z"},{start_time_utc:"2025-11-05T18:30:00Z",end_time_utc:"2025-11-06T18:29:59Z"},{start_time_utc:"2025-11-07T18:30:00Z",end_time_utc:"2025-11-08T18:29:59Z"},{start_time_utc:"2025-11-29T18:30:00Z",end_time_utc:"2025-11-30T18:29:59Z"},{start_time_utc:"2025-12-02T18:30:00Z",end_time_utc:"2025-12-03T18:29:59Z"},{start_time_utc:"2025-12-05T18:30:00Z",end_time_utc:"2025-12-06T18:29:59Z"},{start_time_utc:"2025-12-08T18:30:00Z",end_time_utc:"2025-12-09T18:29:59Z"},{start_time_utc:"2025-12-10T18:30:00Z",end_time_utc:"2025-12-11T18:29:59Z"},{start_time_utc:"2025-12-13T18:30:00Z",end_time_utc:"2025-12-14T18:29:59Z"},{start_time_utc:"2025-12-16T18:30:00Z",end_time_utc:"2025-12-17T18:29:59Z"},{start_time_utc:"2025-12-18T18:30:00Z",end_time_utc:"2025-12-19T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/cricket@2x.png"}],theme:Sn.ImageGenTrending,source:"CURATED"}].filter(C=>x(C)&&h(C)),b=D7e;a=y.filter(b),t[2]=n,t[3]=o,t[4]=a}else a=t[4];const i=a,l=i[Math.floor(Math.random()*i.length)];if(!l){let g;return t[5]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[5]=g):g=t[5],g}const c=l.oneliner;let d;t[6]!==c||t[7]!==l?(d=c?U(w({},l),{title:c}):l,t[6]=c,t[7]=l,t[8]=d):d=t[8];const u=d,f=u.example_image_urls;if(Array.isArray(f)&&f.length>0){const g=f[Math.floor(Math.random()*f.length)];let h;t[9]!==g?(h=(p=g==null?void 0:g["320_2x"])!=null?p:g?Object.values(g)[0]:void 0,t[9]=g,t[10]=h):h=t[10];const x=h;if(typeof x=="string"&&x.length>0){let v;return t[11]!==u||t[12]!==x?(v=[U(w({},u),{coverImageUrl:x})],t[11]=u,t[12]=x,t[13]=v):v=t[13],v}}let m;return t[14]!==u?(m=[u],t[14]=u,t[15]=m):m=t[15],m}function D7e(t){var e;return(e=t.systemHints)==null?void 0:e.includes(Pe.PictureV2)}function F7e(t){return t.toUpperCase()}function B7e(t){var s;const e=(s=t.trending_schedule_utc)!=null?s:[];if(e.length===0)return!1;const n=new Date;for(const o of e){const a=o.start_time_utc,i=o.end_time_utc;if(!a||!i)continue;const l=new Date(a),c=new Date(i);if(l<=n&&n<=c)return!0}return!1}const sB=Wf(()=>{const t=Be(!1);let e=null;const n=o=>{e&&(clearTimeout(e),e=null),t.set(o)};return{shouldHighlight$:t,setShouldHighlight:n,flashHighlight:(o=4e3)=>{n(!0),e=setTimeout(()=>{t.set(!1),e=null},o)}}});function U7e(){"use forget";const t=G.c(3),{store:e}=Bd(),n=$s();let s;return t[0]!==n||t[1]!==e?(s=(o,a,i,l)=>{const c=e.getSharedProps(),d=c==null?void 0:c.composerController;if(!d)return;const u=_o(a);if(u==null)return;const f="systemHints"in a?a.systemHints:void 0,m=f&&f.length>0?f[0]:void 0;if(m){const x=c!=null&&c.clientThreadId?{clientThreadId:c.clientThreadId}:void 0;n(m,w({},x?{analyticsMetadata:x}:{}))}if((a.type===Je.Starter||a.type===Je.Autocomplete||a.type===Je.Trending)&&a.requires_file_upload===!0){const{flashHighlight:x}=sB(d);x()}o.preventDefault();const g=Pt(d);yo(g,u),g.focus();const h=c==null?void 0:c.clientThreadId;h&&n1(a,l,h)},t[0]=n,t[1]=e,t[2]=s):s=t[2],s}function wXe({label:t,onClick:e,disabled:n=!1,icon:s,rightIcon:o}){return r.jsxs("button",{className:"group border-token-border-default enabled:hover:bg-token-main-surface-secondary relative flex h-[42px] items-center gap-1.5 rounded-full border px-3 py-2 text-start text-[13px] transition disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]",disabled:n,onClick:e,children:[s,r.jsx("span",{className:"group-hover:text-token-text-primary max-w-full whitespace-nowrap text-gray-600 transition select-none dark:text-gray-500",children:t}),o]})}const kXe=()=>Hn().pathname==="/new-tab-page";function EXe({starterPrompt:t,allPrompts:e,index:n,disabled:s,className:o}){var p;const a=Ud(),i=U7e(),l=(p=t.body)!=null?p:t.title,c=g=>{var x;((x=t.systemHints)==null?void 0:x.includes(Pe.PictureV2))&&t.requires_file_upload?i(g,t,e,n):a(g,t,e,n)},d=t.iconImageUrl,u=t.coverImageUrl,f=t.accentColor,m=f&&u?{backgroundColor:f}:void 0;return r.jsxs("button",{disabled:s,onClick:c,className:W("group relative flex aspect-[4/3] items-end overflow-hidden rounded-2xl border p-3 text-start transition","border-token-border-default enabled:hover:bg-token-interactive-bg-secondary-hover shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] disabled:opacity-60",o),style:m,"aria-label":l,children:[!d&&u&&r.jsxs(r.Fragment,{children:[r.jsx("img",{src:u,alt:"","aria-hidden":"true",className:"absolute inset-0 h-full w-full object-cover object-center"}),r.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"})]}),r.jsx("div",{className:"absolute start-3 top-3",children:d?r.jsx("img",{src:d,alt:"","aria-hidden":"true",className:"h-10 w-10 rounded-md sm:h-12 sm:w-12"}):null}),r.jsx("div",{className:"pointer-events-none absolute start-3 end-3 bottom-3 select-none",children:r.jsx("div",{className:W("line-clamp-2 text-sm leading-tight sm:text-base",u?"text-white":"text-token-text-primary"),children:l})})]})}R(()=>P(()=>import("./dxjaf6qdyfvp7ro9.js"),__vite__mapDeps([199,1])),{loading:t=>O(t)});const jy=Fe.hasSeenGoldenHourAnnouncement;function $7e(){"use forget";var C,S,k;const t=G.c(6),e=V();let n;t[0]!==e?(n=ts(e),t[0]=e,t[1]=n):n=t[1];const s=n,o=et(e),a=cn();let i;t[2]!==a?(i=a!=null&&Ah(a),t[2]=a,t[3]=i):i=t[3];const l=i,{eligible:c,isLoading:d}=dt(jy),u=Ii();let f;t[4]!==e?(f=Hj(e),t[4]=e,t[5]=f):f=t[5];const m=f,{data:p}=zf(void 0,!1,u),g=(C=p==null?void 0:p.memoryFullPct)!=null?C:0,h=(S=o==null?void 0:o.isFree())!=null?S:!1,x=(k=o==null?void 0:o.isGo())!=null?k:!1,b=l||g>=(h||x?95:90);return c&&!d&&m&&b&&!s}function TXe(){"use forget";const t=G.c(4),e=V(),n=$7e(),{eligible:s}=dt(jy);let o;return t[0]!==n||t[1]!==e||t[2]!==s?(o=()=>{!n||!s||(Ie.count(je.GOLDEN_HOUR,"announcement_banner.implicit_close"),st(e,jy))},t[0]=n,t[1]=e,t[2]=s,t[3]=o):o=t[3],o}const k7=R(()=>P(()=>import("./lur401x4nz6oqotk.js"),__vite__mapDeps([142,1])),{loading:t=>O(t)}),nt=window.sessionStorage,oB=4320*60*1e3,aB=1440*60*1e3;function V7e(){const t=(nt==null?void 0:nt.getItem(Ue.MemoryFullBannerDismissed))==="true",e=nt==null?void 0:nt.getItem(Ue.MemoryFullBannerDismissedTimestamp);if(!t)return e!=null&&(nt==null||nt.removeItem(Ue.MemoryFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return nt==null||nt.removeItem(Ue.MemoryFullBannerDismissed),{dismissed:!1,timestamp:null};const n=Number.parseInt(e,10),s=Number.isFinite(n)&&n>=0?n:null;return s==null?(nt==null||nt.removeItem(Ue.MemoryFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-s>=aB?(nt==null||nt.removeItem(Ue.MemoryFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:s}}function H7e(){const t=(nt==null?void 0:nt.getItem(Ue.MemoryAlmostFullBannerDismissed))==="true",e=nt==null?void 0:nt.getItem(Ue.MemoryAlmostFullBannerDismissedTimestamp);if(!t)return e!=null&&(nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissed),{dismissed:!1,timestamp:null};const n=Number.parseInt(e,10),s=Number.isFinite(n)&&n>=0?n:null;return s==null?(nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-s>=oB?(nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:s}}const si=Dt(In(()=>{const{dismissed:t,timestamp:e}=V7e(),{dismissed:n,timestamp:s}=H7e();return{memoryFullBannerDismissed:t,memoryFullBannerDismissedTimestamp:e,memoryAlmostFullBannerDismissed:n,memoryAlmostFullBannerDismissedTimestamp:s}})),hl={dismissBanner(){const t=Date.now();si.setState(e=>{e.memoryFullBannerDismissed=!0,e.memoryFullBannerDismissedTimestamp=t}),nt==null||nt.setItem(Ue.MemoryFullBannerDismissed,"true"),nt==null||nt.setItem(Ue.MemoryFullBannerDismissedTimestamp,t.toString())},dismissAlmostFullBanner(){const t=Date.now();si.setState(e=>{e.memoryAlmostFullBannerDismissed=!0,e.memoryAlmostFullBannerDismissedTimestamp=t}),nt==null||nt.setItem(Ue.MemoryAlmostFullBannerDismissed,"true"),nt==null||nt.setItem(Ue.MemoryAlmostFullBannerDismissedTimestamp,t.toString())},clearDismissedBanner(){si.setState(t=>{t.memoryFullBannerDismissed=!1,t.memoryFullBannerDismissedTimestamp=null}),nt==null||nt.removeItem(Ue.MemoryFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryFullBannerDismissedTimestamp)},clearAlmostFullDismissedBanner(){si.setState(t=>{t.memoryAlmostFullBannerDismissed=!1,t.memoryAlmostFullBannerDismissedTimestamp=null}),nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissedTimestamp)}};function MXe(t){var F,$;const e=iv(t),n=Es(),s=b1(),{data:o}=zf(e,!1,s),a=V(),i=Ii(),l=Pv(a,o==null?void 0:o.memoryFullPct,!0),c=typeof l=="object"?l.layer:"control",d=typeof l=="object"?l.threshold:tl,u=Ve(t,H=>he.findNode(H,z=>z.message.author.role===Ke.Tool&&z.message.author.name==="bio")),m=Ve(t,H=>!H||H.isLoading)&&!!t,p=(F=u==null?void 0:u.message.metadata)==null?void 0:F.memory_percentage_used,g=_.useRef(void 0),h=_.useRef(!1),[x,v]=_.useState(!1);_.useEffect(()=>{if(m)return;const H=u==null?void 0:u.message.id;if(!h.current){g.current=H!=null?H:null,h.current=!0;return}H&&H!==g.current&&Promise.resolve().then(()=>v(!0))},[m,u==null?void 0:u.message.id]);const y=p!=null?p*100:null,b=($=o==null?void 0:o.memoryFullPct)!=null?$:null,C=x?y!=null:b!=null,S=x?y!=null?y:0:b!=null?b:0,k=C&&S>=d,[E,T]=_.useState(!k);_.useEffect(()=>{x&&T(!0)},[x]);const[M,A]=_.useState(!1),I=_.useRef(null),N=_.useRef(!1);_.useEffect(()=>{var z;if(!C)return;const H=(z=I.current)!=null?z:-1/0;I.current=S,H<tl&&S>=tl&&(N.current=!0,Promise.resolve().then(()=>A(!0))),S<tl&&N.current&&(N.current=!1,Promise.resolve().then(()=>A(!1)),Promise.resolve().then(()=>T(!0)))},[C,S,M]);const L=si(H=>H.memoryAlmostFullBannerDismissed),D=si(H=>H.memoryAlmostFullBannerDismissedTimestamp);switch(_.useEffect(()=>{if(!L||D==null)return;const H=Date.now()-D,z=oB-H;if(z<=0){hl.clearAlmostFullDismissedBanner();return}const K=window.setTimeout(()=>{hl.clearAlmostFullDismissedBanner()},z);return()=>{window.clearTimeout(K)}},[L,D]),c){case"control":return{shouldShowMemoryAlmostFull:!1};case"treatment_upsell_on_convo_start":return{shouldShowMemoryAlmostFull:!n&&i&&k&&E&&!L&&S<100};case"treatment_upsell_on_bio_tool":return{shouldShowMemoryAlmostFull:!n&&i&&k&&x&&E&&!L&&S<100};default:return{shouldShowMemoryAlmostFull:!1}}}function AXe(t){"use forget";var se,ie;const e=G.c(27),n=iv(t),s=V(),o=Es(),a=b1(),{data:i}=zf(n,!1,a),l=Ii(),c=Pv(s,i==null?void 0:i.memoryFullPct),d=Ve(t,Y7e),f=Ve(t,q7e)&&!!t,m=(se=d==null?void 0:d.message.metadata)==null?void 0:se.memory_percentage_used,p=_.useRef(void 0),g=_.useRef(!1),[h,x]=_.useState(!1),v=m!=null?m*100:null,y=(ie=i==null?void 0:i.memoryFullPct)!=null?ie:null,b=h?v!=null:y!=null,C=h?v!=null?v:0:y!=null?y:0,S=b&&C>=Km,[k,E]=_.useState(!S),[T,M]=_.useState(!1),A=_.useRef(null),I=_.useRef(!1);let N,L;e[0]!==h?(N=()=>{h&&E(!0)},L=[h],e[0]=h,e[1]=N,e[2]=L):(N=e[1],L=e[2]),_.useEffect(N,L);let D;e[3]!==(d==null?void 0:d.message.id)||e[4]!==f?(D=()=>{if(f)return;const ee=d==null?void 0:d.message.id;if(!g.current){p.current=ee!=null?ee:null,g.current=!0;return}ee&&ee!==p.current&&Promise.resolve().then(()=>x(!0))},e[3]=d==null?void 0:d.message.id,e[4]=f,e[5]=D):D=e[5];const F=d==null?void 0:d.message.id;let $;e[6]!==f||e[7]!==F?($=[f,F],e[6]=f,e[7]=F,e[8]=$):$=e[8],_.useEffect(D,$);let H;e[9]!==C||e[10]!==b?(H=()=>{var le;if(!b)return;const ee=(le=A.current)!=null?le:-1/0;A.current=C,ee<Km&&C>=Km&&(I.current=!0,Promise.resolve().then(()=>M(!0))),C<Km&&I.current&&(I.current=!1,Promise.resolve().then(()=>M(!1)),Promise.resolve().then(()=>E(!0)))},e[9]=C,e[10]=b,e[11]=H):H=e[11];let z;e[12]!==C||e[13]!==b||e[14]!==T?(z=[b,C,T],e[12]=C,e[13]=b,e[14]=T,e[15]=z):z=e[15],_.useEffect(H,z);const K=si(z7e),J=si(W7e);let Z,q;switch(e[16]!==K||e[17]!==J?(Z=()=>{if(!K||J==null)return;const ee=Date.now()-J,le=aB-ee;if(le<=0){hl.clearDismissedBanner();return}const X=window.setTimeout(G7e,le);return()=>{window.clearTimeout(X)}},q=[K,J],e[16]=K,e[17]=J,e[18]=Z,e[19]=q):(Z=e[18],q=e[19]),_.useEffect(Z,q),c){case"control":{const ee=!o&&l?S&&k&&!K:!1;let le;return e[20]!==ee?(le={shouldShowMemoryFull:ee},e[20]=ee,e[21]=le):le=e[21],le}case"treatment_upsell_on_convo_start":{const ee=!o&&l?S&&!K:!1;let le;return e[22]!==ee?(le={shouldShowMemoryFull:ee},e[22]=ee,e[23]=le):le=e[23],le}case"treatment_upsell_on_bio_tool":{const ee=!o&&l?S&&h&&!K:!1;let le;return e[24]!==ee?(le={shouldShowMemoryFull:ee},e[24]=ee,e[25]=le):le=e[25],le}default:{let ee;return e[26]===Symbol.for("react.memo_cache_sentinel")?(ee={shouldShowMemoryFull:!1},e[26]=ee):ee=e[26],ee}}}function G7e(){hl.clearDismissedBanner()}function W7e(t){return t.memoryFullBannerDismissedTimestamp}function z7e(t){return t.memoryFullBannerDismissed}function q7e(t){return!t||t.isLoading}function Y7e(t){return he.findNode(t,Z7e)}function Z7e(t){return t.message.author.role===Ke.Tool&&t.message.author.name==="bio"}function IXe({memoryAlmostFullVariant:t}={}){const e=ne(),{openSettings:n}=tm(),s=ot(),o=V(),a=et(o),i=a==null?void 0:a.isFree(),l=bK(o,!0),c=l!=="control",d=e.formatMessage(Po.getMore),u=()=>{var m;if(typeof window<"u")try{(m=window.sessionStorage)==null||m.setItem(CN,"true")}catch(p){}};_.useEffect(()=>{t?c&&B.logEventWithStatsig("Memory Banner Almost Full Shown","chatgpt_memory_banner_almost_full_shown",{variant:l,threshold:tl}):B.logEventWithStatsig("Memory Banner Full Shown","chatgpt_memory_banner_full_shown",{variant:l})},[c,t,l]);const f=m=>{B.logEventWithStatsig("Memory Banner Upgrade Clicked","chatgpt_memory_banner_upgrade_clicked",{variant:l,surface:m}),xn(s,"Memory Full Banner")};if(t){if(!i||!c)return null;const m=r.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[r.jsx(_e,{color:"secondary",onClick:()=>{B.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"almost_full"}),u(),n(Rn.Personalization)},children:e.formatMessage(Po.memoryManageButton)}),r.jsx(_e,{color:"primary",onClick:()=>f("almost_full"),children:d})]});return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(vn,{title:e.formatMessage(Po.memoryAlmostFullTitleTreatment),icon:r.jsx(k7,{className:"h-6 w-6"}),content:e.formatMessage(Po.memoryAlmostFullTreatmentBody),customCtas:m,onDismiss:()=>hl.dismissAlmostFullBanner()})})}if(c){const m=r.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[r.jsx(_e,{color:"secondary",onClick:()=>{B.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"almost_full"}),u(),n(Rn.Personalization)},children:e.formatMessage(Po.memoryManageButton)}),r.jsx(_e,{color:"primary",onClick:()=>f("almost_full"),children:d})]});return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(vn,{icon:r.jsx(k7,{className:"h-6 w-6"}),title:e.formatMessage(Po.memoryFullTitleTreatment),content:e.formatMessage(Po.memoryFullTreatmentBody),customCtas:m,onDismiss:()=>hl.dismissBanner()})})}return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(vn,{title:e.formatMessage(Po.memoryFullTitleControl),content:e.formatMessage(Po.memoryFullTooltipControl,Po.memoryFullTooltipControl.values),primaryCtaText:e.formatMessage(Po.memoryManageButton),onPrimaryCtaClick:()=>{B.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"full"}),n(Rn.Personalization)},onDismiss:()=>hl.dismissBanner()})})}const Po=be({memoryFullTitleControl:{id:"xzFgrm",defaultMessage:"ChatGPT's out of space for saved memories"},memoryFullTitleTreatment:{id:"61wRTj",defaultMessage:"Memory full"},memoryFullTreatmentBody:{id:"bGCh/f",defaultMessage:"Responses may feel less personalized. Upgrade to expand memory, or manage existing memories."},getMore:{id:"LdblxY",defaultMessage:"Get more"},getMoreTreatment:{id:"zq5dLI",defaultMessage:"Upgrade"},memoryManageButton:{id:"a5A88o",defaultMessage:"Manage"},memoryAlmostFullTitleTreatment:{id:"2IibCN",defaultMessage:"Memory almost full"},memoryAlmostFullTreatmentBody:{id:"2wtxF6",defaultMessage:"Once memory is full, responses will feel less personalized. Upgrade to expand memory, or manage existing memories."},memoryTooltipVariant:{id:"h72m3Z",defaultMessage:"<link>Manage</link> saved memories or upgrade to {planType} to get more.",values:{link:t=>r.jsx(Eo,{to:Nl(Rn.Personalization),className:"underline",children:t})}},memoryFullTooltipControl:{id:"I1DjDy",defaultMessage:"New memories wont be added until you make space. <a>Learn more</a>",values:{a:t=>r.jsx("a",{href:xK,target:"_blank",rel:"noopener noreferrer",className:"underline",children:t})}}});function jXe(t){return ze(t,"3637408529").get("is_secondary_auth_banner_button_enabled",!1)}function rB(t){var e,n,s;return(s=(n=(e=t.metadata)==null?void 0:e.dalle)==null?void 0:n.prompt)!=null?s:""}async function K7e(t,e,n="image/png"){return new Promise((s,o)=>{t.toBlob(a=>{a!=null?s(new File([a],e,{type:n})):o(new Error("Failed to convert canvas to blob"))},n)})}async function Q7e(t,e){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const s=n.getContext("2d");if(s==null)throw new Error("Failed to get 2d context for mask canvas");const o=s.createImageData(t.width,t.height);for(let a=0;a<t.data.length;a+=4)t.data[a+3]!==0?(o.data[a]=0,o.data[a+1]=0,o.data[a+2]=0,o.data[a+3]=255):(o.data[a]=255,o.data[a+1]=255,o.data[a+2]=255,o.data[a+3]=255);return s.putImageData(o,0,0),K7e(n,e)}async function J7e(t,e){const s=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=e,o.click(),o.remove()}function X7e(t){const e=dz(new Date,"yyyy-MM-dd HH.mm.ss");let n=t.slice(0,150);return n.endsWith(".")&&(n=n.slice(0,-1)),"DALLE ".concat(e," - ").concat(n,".webp")}async function eke(t,e,n,s=!1){var l,c,d,u,f,m,p,g,h,x,v,y,b,C,S,k,E,T,M,A,I,N;const o=rB(t),a=X7e(o);await J7e(t.url,a);const i=s?"chatgpt_dalle_image_captioning_download":"chatgpt_dalle_image_download";Ye.logEvent(i,null,{sourceOperation:(d=(c=(l=t.metadata)==null?void 0:l.dalle)==null?void 0:c.edit_op)!=null?d:"none",hasParent:((f=(u=t.metadata)==null?void 0:u.dalle)==null?void 0:f.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent(i,{conversationId:e,messageId:n,generationId:(p=(m=t.metadata)==null?void 0:m.dalle)==null?void 0:p.gen_id,parentGenerationId:(h=(g=t.metadata)==null?void 0:g.dalle)==null?void 0:h.parent_gen_id,fileId:wo(t.asset_pointer),sourceOperation:(v=(x=t.metadata)==null?void 0:x.dalle)==null?void 0:v.edit_op,model:"dalle"}),Ye.logEvent("chatgpt_image_download",null,{sourceOperation:(C=(b=(y=t.metadata)==null?void 0:y.dalle)==null?void 0:b.edit_op)!=null?C:"none",hasParent:((k=(S=t.metadata)==null?void 0:S.dalle)==null?void 0:k.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent("chatgpt_image_download",{conversationId:e,messageId:n,generationId:(T=(E=t.metadata)==null?void 0:E.dalle)==null?void 0:T.gen_id,parentGenerationId:(A=(M=t.metadata)==null?void 0:M.dalle)==null?void 0:A.parent_gen_id,fileId:wo(t.asset_pointer),sourceOperation:(N=(I=t.metadata)==null?void 0:I.dalle)==null?void 0:N.edit_op,model:"dalle"})}function NXe(t){const e=WM(t),n=P1(),s=e&&"gizmo"in e?e.gizmo:void 0;return!n&&(s==null?void 0:s.gizmo.id)===cz}function tke(t,e){var o,a;const n=(a=(o=e.metadata)==null?void 0:o.dalle)==null?void 0:a.gen_id,s=wo(e.asset_pointer);return s==null||n==null?t:qd(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"transformation",original_gen_id:n,original_file_id:s}}}}}})}async function nke(t,e,n,s){return new Promise((o,a)=>{uz(dl(t),t,e,n,{kind:fz.DalleAgent},{onFileCreated:rs,onFileUploadProgress:rs,onFileUploaded:(i,l)=>o(l),onError:(i,l)=>{a(new Error("Failed to upload file with reason: ".concat(l)))}},s)})}async function ske(t,e,n,s,o){var l,c;const a=(c=(l=e.metadata)==null?void 0:l.dalle)==null?void 0:c.gen_id,i=wo(e.asset_pointer);if(i==null||a==null||n==null)return t;try{const d=await Q7e(n,"mask.png"),u=await nke(d,s,o,{imageDimensions:{width:e.width,height:e.height}});return qd(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"inpainting",original_gen_id:a,original_file_id:i,mask_file_id:u}}}}}})}catch(d){return Re.addError(d),t}}async function oke(t,e,n,s,o){return await Promise.all(e.map(a=>Qd.fetch(t,{asset:a,sharedThreadId:n,gizmoId:s,conversationId:o}))).catch(a=>{const i=e.map(l=>wo(l.asset_pointer));throw Re.addError(new Error("Could not fetch files with IDs ".concat(i," from file service"),{cause:a})),a})}function PXe(t){const e=V(),n=CO(e),s=E1(M1.getMaxBannerClientThreadId);return!(!n||s!==t)}let $a="";const E7={setSessionId(t){$a=t},logImpression(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.impression"),Re.addAction("tasks.notification.impression"),B.logEvent("tasks:notification.impression",{logging_session_id:$a})},logNotNow(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.not_now"),Re.addAction("tasks.notification.not_now"),B.logEvent("tasks:notification.not_now",{logging_session_id:$a})},logAllow(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.allow"),Re.addAction("tasks.notification.allow"),B.logEvent("tasks:notification.allow",{logging_session_id:$a})},logSystemDeny(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.system_deny"),Re.addAction("tasks.notification.system_deny"),B.logEvent("tasks:notification.system_deny",{logging_session_id:$a})},logSystemAllow(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.system_allow"),Re.addAction("tasks.notification.system_allow"),B.logEvent("tasks:notification.system_allow",{logging_session_id:$a})},logSystemSuccess(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.system_success"),Re.addAction("tasks.notification.system_success"),B.logEvent("tasks:notification.system_success",{logging_session_id:$a})},logRegistration(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.registration"),Re.addAction("tasks.notification.registration"),B.logEvent("tasks:notification.registration",{logging_session_id:$a})},logErrorDismissed(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.error_dismissed"),Re.addAction("tasks.notification.error_dismissed"),B.logEvent("tasks:notification.error_dismissed",{logging_session_id:$a})}},Wc=window.localStorage,s4=Dt(In(()=>{var t;return{initialized:!1,requestingClientThreadId:null,previouslyRequestedClientThreadIds:new Set,lastRequestTime:(t=Wc==null?void 0:Wc.getItem("oai/apps/jawboneNotificationLastRequestTime"))!=null?t:null,permission:typeof window<"u"&&"Notification"in window?Notification.permission:"default"}})),qp=s4.getState,yp=s4.setState,RXe={initIfNeeded:(t=qp())=>{var e;t.initialized||(yp({initialized:!0}),typeof window<"u"&&"Notification"in window&&((e=navigator.permissions)==null||e.query({name:"notifications"}).then(n=>{n.onchange=()=>{switch(Notification.permission){case"granted":E7.logSystemAllow();break;case"denied":E7.logSystemDeny();break}yp({permission:Notification.permission})}})))},setRequestingClientThreadId:t=>{yp(e=>{e.previouslyRequestedClientThreadIds.has(t)||(e.requestingClientThreadId=t,e.previouslyRequestedClientThreadIds.add(t))})},clearNotificationRequest:()=>{yp(t=>{if(t.requestingClientThreadId){const e=new Date().toISOString();t.lastRequestTime=e,Wc==null||Wc.setItem("oai/apps/jawboneNotificationLastRequestTime",e)}t.requestingClientThreadId=null})}},ake={getRequestingClientThreadId:(t=qp())=>t.requestingClientThreadId,getLastRequestTime:(t=qp())=>t.lastRequestTime,getPermission:(t=qp())=>t.permission};function LXe(t){const{requestingClientThreadId:e}=s4(o=>({requestingClientThreadId:ake.getRequestingClientThreadId(o)})),n=V();return!(!CO(n)||t!==e)}const rke=R(()=>P(()=>import("./cqj4tdcophnujsev.js"),__vite__mapDeps([356,1,10,11])).then(t=>t.BeaconModal));function OXe(t){"use forget";const e=G.c(16),{clientThreadId:n,composerController:s,openFileDialog:o}=t,a=dY(),i=V();let l;e[0]!==n||e[1]!==i?(l=()=>bf(n,i),e[0]=n,e[1]=i,e[2]=l):l=e[2];const c=l,d=I5(c),u=j5(c),f=_.useRef(!1),m=Ve(n,he.getCurrentLeafId),p=gr.useStore();let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{f.current=!1},e[3]=g):g=e[3];let h;e[4]!==m?(h=[m],e[4]=m,e[5]=h):h=e[5],_.useEffect(g,h);let x,v;e[6]!==u||e[7]!==d||e[8]!==n||e[9]!==s||e[10]!==i||e[11]!==a||e[12]!==o||e[13]!==p?(x=()=>{if(!a||f.current)return;f.current=!0,B.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:a.beacon_id,beacon_name:a.beacon_name,beacon_type:"modal"}),d.mutate(a.beacon_id),lt(i,rke,{onDismiss:()=>{var b,C;B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:a.beacon_id,beacon_name:a.beacon_name,beacon_type:"modal"}),u.mutate(a.beacon_id),_i.dismiss(),a.beacon_id==="free_trial_upsell_modal_beacon"&&st(i,((C=(b=a.action_items)==null?void 0:b[1])==null?void 0:C.id)==="plus_free_trial_upsell_modal_beacon_try_plus"?Fe.hasSeenFreeTrialUpsellModal:Fe.hasSeenGoFreeTrialUpsellModal)},modalInfo:a,clientThreadId:n,composerController:s,persistedSystemHintsStore:p,openFileDialog:o})},v=[a,i,d,u,n,s,p,o],e[6]=u,e[7]=d,e[8]=n,e[9]=s,e[10]=i,e[11]=a,e[12]=o,e[13]=p,e[14]=x,e[15]=v):(x=e[14],v=e[15]),_.useEffect(x,v)}function DXe(){var l;const t=V(),e=ye(t,"727502549"),n=ye(t,"550432558"),{eligible:s}=dt(Fe.hasSeenReferralUpsellAnnouncement),{data:o}=wN(s),a=ze(t,"1976075658"),i=((l=o==null?void 0:o.info)==null?void 0:l.program_name)==="colombia"?a.get("show_banner",!1):!0;return e&&n&&i&&s&&!!(o!=null&&o.info)}function FXe(){var d;const t=V(),e=ye(t,"3148583717"),n=ye(t,"3362382575"),s=is(t,"1087852479").value,{eligible:o}=dt(Fe.hasSeenStudentsUpsellAnnouncement),a=cn(),i=a==null?void 0:a.email,l=(d=s==null?void 0:s.blacklist)!=null?d:[];return Array.isArray(l)&&i&&l.some(u=>i.endsWith(u))?!1:(i==null?void 0:i.endsWith(".edu"))&&o&&e&&n}function BXe(t){"use forget";const e=G.c(13),[n,s]=_.useState(!1),o=V();let a;e[0]!==t||e[1]!==o?(a=yt(o,t),e[0]=t,e[1]=o,e[2]=a):a=e[2];const i=a;let l;e[3]!==i?(l=()=>{var g;return((g=Ci(i))==null?void 0:g.value)===Xt.REALTIME},e[3]=i,e[4]=l):l=e[4];const c=ae(l);let d;e[5]!==c?(d=()=>{c&&s(!0)},e[5]=c,e[6]=d):d=e[6];const u=d;let f,m;e[7]!==c?(f=()=>{c||s(!1)},m=[c],e[7]=c,e[8]=f,e[9]=m):(f=e[8],m=e[9]),_.useEffect(f,m);let p;return e[10]!==n||e[11]!==u?(p={maybeSetWaitingForRealtimeOnAbort:u,isWatingForRealtimeStatusChange:n},e[10]=n,e[11]=u,e[12]=p):p=e[12],p}function UXe(){const t=V(),e=gz(),n=ye(t,"1416952492");return _.useMemo(()=>{const s=[];for(const o of e){const a=hz(o.name);a&&s.push(a)}return n&&!s.includes(Pe.Research)&&s.push(Pe.Research),s},[e,n])}function ike(t){const e=V(),n=ne(),s=et(e),o=(s==null?void 0:s.isSelfServeBusiness())||(s==null?void 0:s.isEnterpriseCBP()),a=A8(v=>v.bySystemHint(t)),i=mz(pz(t)),l=i&&o,c=t===Pe.Research?lke(n.locale,a,o):_l(t)?cke(n.locale,a,o):null,d=c!=null&&!i,u=t===Pe.Research&&ye(e,"1416952492"),f=_l(t)&&ye(e,"926440545"),m=u||f,p=m||i!=null,g=m?r.jsx(j,{id:"composer.skills.unavailable",defaultMessage:"Temporarily unavailable"}):i&&!o?r.jsx(j,{id:"composer.skills.rateLimited",defaultMessage:"{limit} more available on {resetDate}",values:{limit:i.limit,resetDate:new Date(i.resets_after).toLocaleDateString(n.locale,{month:"long",day:"numeric"})}}):void 0;let h,x;return(l||d)&&(h=l?i.title:c==null?void 0:c.label,x=l?i.description:c==null?void 0:c.secondaryLabel),{isBlocked:p,blockedLabel:g,remainingLabel:h,remainingLabelSecondary:x}}function iB(t,e){return new Date(e.reset_after).toLocaleDateString(t,{month:"long",day:"numeric"})}function lke(t,e,n){return n||!e?null:{label:r.jsx(j,{id:"m6JsYD",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:r.jsx(j,{id:"8V98un",defaultMessage:"More available on {resetDate}",values:{resetDate:iB(t,e)}})}}function cke(t,e,n){return n||!e?null:{label:r.jsx(j,{id:"nD45w8",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:r.jsx(j,{id:"eBZSNV",defaultMessage:"More available on {resetDate}",values:{resetDate:iB(t,e)}})}}function o4(t){it.sidebarUrlTrayOpen$.set(t)}function $Xe(){const t=V(),e=jn(hn),n=Vh(t),s=ae(it.sidebarUrlTrayOpen$),o=ae(it.context$),a=ys(),i=$s(),l=_.useRef(a);_.useEffect(()=>{if(!e||!n)return;const d=l.current;l.current=a,a===Pe.Agent&&d!==Pe.Agent&&o&&(s||o4(!0))},[e,n,a,o,s]);const c=_.useRef(s);_.useEffect(()=>{if(!e||!n)return;const d=s,u=c.current;c.current=d,u&&!d&&a===Pe.Agent&&i(null,{ifPrevSystemHint:Pe.Agent})},[e,n,s,a,i])}var dke=(t=>(t.ConfigureRepos="configure-repos",t.SyncRepos="sync-repos",t.IndexRepos="index-repos",t))(dke||{});const uke=R(()=>P(()=>import("./om2umws0vlvjjj51.js"),__vite__mapDeps([357,10,1,11,358])).then(t=>t.ContextConnectorDocumentParser));function VXe({composerController:t,parsedDocumentHandler:e}){const n=V(),{gdriveLinkStatus:s,o365BusinessLinkStatus:o,o365PersonalLinkStatus:a}=_z(n);return s==="false"&&o==="false"&&a==="false"?null:r.jsx(uke,{composerController:t,parsedDocumentHandler:e})}function HXe(){"use forget";const t=G.c(8),e=V(),n=ne();let s;t[0]!==n?(s=n.formatMessage({id:"ebFfvg",defaultMessage:"Create image"}),t[0]=n,t[1]=s):s=t[1];const o=s;let a;t[2]!==e?(a=d=>{d.preventDefault(),d.stopPropagation(),B.logEventWithStatsig("Composer Create Image Button Clicked","composer_create_image_button_clicked"),Zt(e,{fallbackScreenHint:"login_or_signup",skipLoginModal:!1,loginModalSubtitleVariant:"create-image"})},t[2]=e,t[3]=a):a=t[3];const i=a;let l;t[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(M5,{className:"icon"}),t[4]=l):l=t[4];let c;return t[5]!==i||t[6]!==o?(c=r.jsx(H5,{pressed:!1,disabled:!1,icon:l,label:o,ariaLabel:o,animatedLabel:!0,showLabel:!0,onClick:i,dataTestid:"composer-button-create-image"}),t[5]=i,t[6]=o,t[7]=c):c=t[7],c}const lB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M16.3965 5.01128C16.3963 4.93399 16.3489 4.87691 16.293 4.85406L16.2354 4.84332C13.9306 4.91764 12.5622 5.32101 10.665 6.34722V16.3716C11.3851 15.9994 12.0688 15.7115 12.7861 15.5015C13.8286 15.1965 14.9113 15.0633 16.2402 15.0435L16.2979 15.0308C16.353 15.0063 16.3965 14.9483 16.3965 14.8755V5.01128ZM3.54492 14.8765C3.54492 14.9725 3.62159 15.0422 3.70117 15.0435L4.19629 15.0562C5.94062 15.1247 7.26036 15.4201 8.65918 16.0484C8.05544 15.1706 7.14706 14.436 6.17871 14.1109V14.1099C5.56757 13.9045 5.16816 13.3314 5.16797 12.6988V4.98882C4.86679 4.93786 4.60268 4.8999 4.28223 4.87457L3.72754 4.84429C3.62093 4.84079 3.54505 4.92417 3.54492 5.01226V14.8765ZM17.7266 14.8755C17.7266 15.6314 17.1607 16.2751 16.4121 16.3628L16.2598 16.3736C15.0122 16.3922 14.0555 16.5159 13.1602 16.7779C12.2629 17.0404 11.3966 17.4508 10.3369 18.0738C10.129 18.1959 9.87099 18.1958 9.66309 18.0738C7.71455 16.9283 6.31974 16.4689 4.12988 16.3853L3.68164 16.3736C2.85966 16.3614 2.21484 15.6838 2.21484 14.8765V5.01226C2.21497 4.15391 2.93263 3.4871 3.77246 3.51519L4.39844 3.54937C4.67996 3.57191 4.92258 3.60421 5.16797 3.64214V2.51031C5.16797 1.44939 6.29018 0.645615 7.31055 1.15679L7.31152 1.15582C8.78675 1.89511 10.0656 3.33006 10.5352 4.91461C12.3595 3.98907 13.8688 3.58817 16.1924 3.51324L16.3506 3.51714C17.1285 3.5741 17.7264 4.23496 17.7266 5.01128V14.8755ZM6.49805 12.6988C6.49824 12.7723 6.5442 12.8296 6.60254 12.8492L6.96289 12.9859C7.85245 13.3586 8.68125 13.9846 9.33496 14.7496V5.5816C9.08794 4.37762 8.13648 3.1566 6.95801 2.47613L6.71582 2.34527C6.67779 2.32617 6.6337 2.32502 6.58301 2.35796C6.52946 2.39279 6.49805 2.44863 6.49805 2.51031V12.6988Z"})),q1=Object.freeze(Object.defineProperty({__proto__:null,default:lB},Symbol.toStringTag,{value:"Module"}));function GXe(t){"use forget";const e=G.c(12),{composerController:n,clientThreadId:s}=t,o=ne(),a=ys(),i=$s(),l=a===Pe.Tatertot;let c;e[0]!==o?(c=o.formatMessage({id:"bF9p2/",defaultMessage:"Study"}),e[0]=o,e[1]=c):c=e[1];const d=c;let u;e[2]!==s||e[3]!==n||e[4]!==l||e[5]!==i?(u=g=>{g.stopPropagation(),g.preventDefault(),i(l?null:Pe.Tatertot,{analyticsMetadata:{clientThreadId:s}}),l||so(Pt(n))},e[2]=s,e[3]=n,e[4]=l,e[5]=i,e[6]=u):u=e[6];const f=u;let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(lB,{className:"h-[18px] w-[18px]"}),e[7]=m):m=e[7];let p;return e[8]!==f||e[9]!==l||e[10]!==d?(p=r.jsx(H5,{pressed:l,icon:m,label:d,ariaLabel:d,animatedLabel:!0,showLabel:!0,onClick:f,disabled:!1,dataTestid:"composer-button-study"}),e[8]=f,e[9]=l,e[10]=d,e[11]=p):p=e[11],p}class Ny extends wi()(()=>({files:[]})){addFile(e){this.setState(n=>U(w({},n),{files:[...n.files,e]}))}updateFile(e,n){this.setState(s=>U(w({},s),{files:s.files.map(o=>o.fileSpec.id===e?w(w({},o),n):o)}))}removeFile(e){this.setState(n=>U(w({},n),{files:n.files.filter(s=>s.fileSpec.id!==e)}))}reset(){this.setState(()=>({files:[]}))}}Q(Ny,"selectFiles",e=>e.files),Q(Ny,"selectFile",(e,n)=>e.files.find(s=>s.fileSpec.id===n));const T7=R(()=>P(()=>import("./bc7tmzzosjt75txl.js"),__vite__mapDeps([359,1])),{loading:t=>O(t)});function Y1({isFirstParty:t,gizmoId:e,src:n,alt:s,className:o,showLoading:a,simple:i}){const l=V(),c=Rl(l,e),[d,u]=_.useState(!1),[f,m]=_.useState(!0);if(d||!n){const g=t||c;return i?g?r.jsx(i6,{className:o,"aria-label":""}):r.jsx(T7,{className:o,"aria-label":""}):r.jsx("div",{className:o,children:r.jsx("div",{className:"gizmo-shadow-stroke bg-token-main-surface-primary text-token-text-primary relative flex h-full items-center justify-center rounded-full",children:r.jsx(Xe.div,{className:"flex h-full w-full items-center justify-center",initial:{opacity:0},animate:{opacity:1,transition:{duration:.1}},children:g?r.jsx(i6,{className:"h-2/3 w-2/3"}):r.jsx(T7,{className:"h-2/3 w-2/3 text-gray-400"})})})})}const p=r.jsx("img",{src:n,className:"bg-token-tertiary h-full w-full",alt:s!=null?s:"GPT Icon",width:80,height:80,onError:()=>u(!0),onLoad:()=>m(!1)});return i?r.jsx("div",{className:W("overflow-hidden rounded-full",a&&f&&"animate-pulse",o),children:p}):r.jsx("div",{className:o,children:r.jsx("div",{className:W("gizmo-shadow-stroke overflow-hidden rounded-full",a&&f&&"animate-pulse"),children:p})})}function fke({gizmoId:t,className:e}){var s,o;const{data:n}=Si(t);return r.jsx(Y1,{src:n==null?void 0:n.gizmo.display.profile_picture_url,gizmoId:t,isFirstParty:(o=(s=n==null?void 0:n.gizmo.tags)==null?void 0:s.includes(lg.FirstParty))!=null?o:!1,className:e})}const WXe=Ge({id:"PromptTextarea.integratedVoiceModeTypePlaceholder",defaultMessage:"Type"}),zXe=Ge({id:"SplashScreenV2.integratedVoiceModeHeadline",defaultMessage:"Start talking"}),qXe=Ge({id:"SplashScreenV2.integratedVoiceModeHeadline.connecting",defaultMessage:"Connecting to voice"});function mke(t){return es({queryKey:["shared-prompt",t],queryFn:()=>ge.safeGet("/templated_prompts/{prompt_id}/subscribed",{parameters:{path:{prompt_id:t!=null?t:""}}}),enabled:!!t})}const pke=R(()=>P(()=>Promise.resolve().then(()=>PDe),void 0).then(t=>t.PromptSharingModal)),YXe=(t,e,n,s)=>{"use forget";const o=G.c(10);let a;o[0]!==e?(a=mke(e),o[0]=e,o[1]=a):a=o[1];const{data:i,isError:l}=rt(a),c=ne();let d,u;o[2]!==t||o[3]!==i||o[4]!==c||o[5]!==l||o[6]!==n||o[7]!==s?(d=()=>{l&&(xz(t).danger(c.formatMessage({id:"tDSvzy",defaultMessage:"Prompt not found, please verify you are in the right workspace"})),n()),i!=null&&lt(t,pke,{prompt:i,mode:"sharee",onClose:n,onTryIt:s})},u=[t,i,n,s,l,c],o[2]=t,o[3]=i,o[4]=c,o[5]=l,o[6]=n,o[7]=s,o[8]=d,o[9]=u):(d=o[8],u=o[9]),_.useEffect(d,u)};function gke(t){return Pt(t).state.doc.textContent}function ZXe(t){"use forget";const e=G.c(8),n=V();let s;e[0]!==n?(s=Oa(n),e[0]=n,e[1]=s):s=e[1];const o=s,{setTargetedContent:a}=vm();let i,l;e[2]!==t||e[3]!==n||e[4]!==o||e[5]!==a?(i=()=>Dl(()=>{var u;if(!o.isFeedbackModalOpen$())return;const c=o.populatePrompt$();let d;e:switch(c==null?void 0:c.type){case"surveyReply":{d=hke(c.userMessage,c.targetedReply);break e}case"cardReply":{d=_ke(Jo(n).getQueryData(ss.pulseCard(c.cardId)));break e}default:d={userMessage:null,targetedReply:null}}yo(Pt(t),(u=d.userMessage)!=null?u:""),setTimeout(()=>{var f;a((f=d.targetedReply)!=null?f:void 0)},0)}),l=[n,o,t,a],e[2]=t,e[3]=n,e[4]=o,e[5]=a,e[6]=i,e[7]=l):(i=e[6],l=e[7]),_.useEffect(i,l)}const hke=(t,e)=>({userMessage:t,targetedReply:e?{type:"text",label:e,isFocusedViewContent:!1,createNewCompletionParams:n=>{var o;if(!e)return n;const s=Rh(e);return U(w({},n),{promptMessage:qd(n.promptMessage,{metadata:{targeted_reply:e}}),appendMessages:[...(o=n.appendMessages)!=null?o:[],s]})}}:null}),_ke=t=>({userMessage:null,targetedReply:t!=null&&t.title?{type:"text",label:t.title,isFocusedViewContent:!1,createNewCompletionParams:e=>t.title?U(w({},e),{extraStreamParams:U(w({},e.extraStreamParams),{pulseCompletionParams:{feedback_card_id:t.id,type:"feedback-conversation"}}),promptMessage:qd(e.promptMessage,{metadata:{targeted_reply:t.title}})}):e}:null});function KXe(){return Hn(),!1}function xke(t,e,n){return t.get(e,n)}function jc({globalOverride:t,layer:e,condition:n,paramName:s,defaultValue:o}){const a=_.useRef(n);return Xn(()=>{a.current=n},[n]),_.useCallback(i=>!a.current||a.current()?t!==void 0&&!(i!=null&&i.skipOverride)?t:(i!=null&&i.override&&!i.skipOverride&&Re.addError(new Error("override is not allowed in production")),xke(e,s,o)):o,[e,s,o,t])}function cB(){const t=V(),e=!tt(t),n=ze(t,"3434623093"),s=e;return{getShowUpsellReason:jc({layer:n,condition:()=>s,paramName:"with-reason-upsell",defaultValue:!1}),getUpsellLabelType:jc({layer:n,condition:()=>s,paramName:"labels",defaultValue:void 0}),getShowVoiceUpsell:jc({layer:n,condition:()=>s,paramName:"with-voice-upsell",defaultValue:!1}),getUpsellShowsAttach:jc({layer:n,condition:()=>s,paramName:"with-attach-upsell",defaultValue:!1})}}const yke=To(()=>Be(null)),a4=To(t=>St(()=>{const e=yke(t);return e?{gizmo:e,gizmo_id:e.gizmo.id,kind:wt.GizmoInteraction}:zM(t)})),vke=(t,e,n=!1)=>t.role===Ke.Root?!1:t.role===Ke.System||t.role===Ke.Developer||e.every(s=>{var o,a;return((o=s.metadata)==null?void 0:o.is_visually_hidden_from_conversation)&&!((a=s.metadata)!=null&&a.targeted_reply_label)})?n:!0,QXe=(t,e)=>t.length===1&&t[0].author.name==="n7jupd.metadata"&&!e,dB=t=>t.some(e=>{var s,o;if((s=e.metadata)!=null&&s.is_visually_hidden_from_conversation&&!((o=e.metadata)!=null&&o.targeted_reply_label)||e.author.role===Ke.Tool||e.author.role===Ke.System||e.recipient!=="all")return!1;const n=e.content;return(n.content_type===ut.Text||n.content_type===ut.MultimodalText)&&n.parts.some(a=>typeof a=="string"&&a.length>0)});function JXe(t,e,n){return!n&&t.role!==Ke.User&&dB(t.messages)&&t.messages.some(s=>{var i,l;const o=!!((l=(i=s.metadata)==null?void 0:i.content_references)!=null&&l.some(c=>c.type==="file"||c.type==="file_navlist")),a=e&&bke(s);return o||a})}function XXe(t,e,n){return!e&&t.role!==Ke.User&&dB(t.messages)&&t.messages.some(s=>{var o,a;return!!((a=(o=s.metadata)==null?void 0:o.content_references)!=null&&a.some(i=>i.type==="file"&&i.medical_file_reference!=null||n&&i.type==="grouped_webpages"))})}function bke(t){return r4(t)&&t.content.result.length>0&&t.content.result.trim()!=="Visible: 0% - 100%"}function r4(t){return t.author.role===Ke.Tool&&t.author.name==="file_search"&&t.content.content_type===ut.TetherBrowsingDisplay}function eet(t){return t.startsWith("ks--")}const tet=/^\[L\d+\] (.+)$/,net=/"(text|description|content|snippet)":\s*\"(.*)\"/,Cke=Wf(()=>{let t=M7;function e(o){t=o}function n(){e(M7)}function s(o){return U(w({},t),{dictationEdited:Ske(t,o)})}return{setData:e,resetData:n,getData:s}}),M7={usedDictation:!1,dictationOriginalText:null,dictationAssetPointer:null,dictationAssetTTL:null,dictationAssetFormat:null};function Ske(t,e){return t.usedDictation&&t.dictationOriginalText!=null&&!e.includes(t.dictationOriginalText)}const i4=Wf(()=>{const t=Be(!1),e=Be(void 0);return{isWhisperActive$:t,waveformData$:e}});function wke(t,e){var f;const n=V(),s=ae(()=>Vs(n)),o=et(n),a=ae(()=>bn(yt(n,e))),[i,l]=Ve(e,m=>[m==null?void 0:m.mode,m==null?void 0:m.startedWithByoMcp]),c=Es(),d=ae(()=>Md(n)),u=(f=o==null?void 0:o.isWorkspaceAccount())!=null?f:!1;return _.useMemo(()=>{if(!s)return!0;const m=s.find(p=>p.systemHint===t);return m!=null&&Eb({systemHint:m,modelConfig:a,conversationMode:i,isTemporaryChat:c,isDeveloperMode:d,isWorkspaceTenant:u,startedWithByoMcp:l})},[s,t,a,i,c,d,u,l])}const kke="https://help.openai.com/en/articles/11752874-chatgpt-agent#h_beedf96566",Eke="composer_system_hint",Va={segment:{shown:"Agent Nux Modal Shown",continueClicked:"Agent Nux Modal Continue Clicked",dismissed:"Agent Nux Modal Dismissed"},statsig:{shown:"chatgpt_agent_nux_modal_shown",continueClicked:"chatgpt_agent_nux_modal_continue_clicked",dismissed:"chatgpt_agent_nux_modal_dismissed"},datadog:{shown:"agent_nux_modal_shown",continueClicked:"agent_nux_modal_continue_clicked",dismissed:"agent_nux_modal_dismissed"}},bc={title:r.jsx(j,{id:"jFh1/1",defaultMessage:"Welcome to agent mode"}),description:r.jsx(j,{id:"RJdktl",defaultMessage:"Let ChatGPT handle complex tasks from start to finish, from finding the perfect product to creating spreadsheets."}),privacy:r.jsx(j,{id:"AgLzPZ",defaultMessage:"Agent mode uses a remote browser and takes screenshots. You can take control anytime. Agent mode has privacy risks and is important to monitor. <learnMoreLink>Learn more</learnMoreLink>",values:{learnMoreLink:t=>r.jsx("a",{href:kke,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer underline",children:t})}}),buttonText:r.jsx(j,{id:"RW8OC0",defaultMessage:"Get started"})},uB=()=>{const t=V(),{eligible:e,isLoading:n}=dt(Fe.hasSeenn7jupdNux),s=ts(t),o=ye(t,"3014776572"),a=wke(hs,yz);return!o||!a||s?"hide":n?"loading":e?"show":"hide"},Tke=t=>{"use forget";const e=G.c(38),{onClose:n,clientThreadId:s,source:o}=t,a=o===void 0?Eke:o,i=V();let l,c;if(e[0]!==i){const L=is(i,"2302071098");l=L.get("videoUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.mp4"),c=L.get("posterUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.jpg"),e[0]=i,e[1]=l,e[2]=c}else l=e[1],c=e[2];const d=c,[u,f]=_.useState(!1);let m;e[3]!==s||e[4]!==a?(m={client_thread_id:s,source:a},e[3]=s,e[4]=a,e[5]=m):m=e[5];const p=m;let g;e[6]!==p?(g=()=>{B.logEventWithStatsig(Va.segment.shown,Va.statsig.shown,p),Re.addAction(Va.datadog.shown,p)},e[6]=p,e[7]=g):g=e[7];let h;e[8]!==p||e[9]!==s||e[10]!==a?(h=[p,s,a],e[8]=p,e[9]=s,e[10]=a,e[11]=h):h=e[11],_.useEffect(g,h);let x;e[12]!==p||e[13]!==i||e[14]!==n?(x=()=>{B.logEventWithStatsig(Va.segment.dismissed,Va.statsig.dismissed,p),Re.addAction(Va.datadog.dismissed,p),st(i,Fe.hasSeenn7jupdNux),n()},e[12]=p,e[13]=i,e[14]=n,e[15]=x):x=e[15];const v=x;let y;e[16]!==p||e[17]!==i||e[18]!==n?(y=()=>{B.logEventWithStatsig(Va.segment.continueClicked,Va.statsig.continueClicked,p),Re.addAction(Va.datadog.continueClicked,p),st(i,Fe.hasSeenn7jupdNux),n()},e[16]=p,e[17]=i,e[18]=n,e[19]=y):y=e[19];const b=y;let C;e[20]!==d||e[21]!==u?(C=!u&&r.jsx("img",{src:d,alt:"",className:"pointer-events-none absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),e[20]=d,e[21]=u,e[22]=C):C=e[22];let S;e[23]===Symbol.for("react.memo_cache_sentinel")?(S=()=>f(!0),e[23]=S):S=e[23];let k;e[24]!==l?(k=r.jsx("video",{src:l,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"pointer-events-none h-full w-full object-cover object-bottom",onLoadedData:S}),e[24]=l,e[25]=k):k=e[25];let E;e[26]!==k||e[27]!==C?(E=r.jsxs("div",{className:"relative aspect-16/9 w-full",children:[C,k]}),e[26]=k,e[27]=C,e[28]=E):E=e[28];let T,M,A;e[29]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx("div",{className:"text-xl font-medium",children:bc.title}),M=r.jsx("div",{className:"text-token-text-secondary",children:bc.description}),A=r.jsx("div",{className:"text-token-text-secondary text-xs",children:bc.privacy}),e[29]=T,e[30]=M,e[31]=A):(T=e[29],M=e[30],A=e[31]);let I;e[32]!==b?(I=r.jsxs("div",{className:"flex flex-col gap-4 px-8 pt-6 pb-8 text-center",children:[T,M,A,r.jsx("div",{className:"mt-4 flex w-full justify-center gap-3",children:r.jsx("div",{className:"mx-auto flex w-fit max-w-full min-w-[260px] justify-center gap-3",children:r.jsx(_e,{color:"primary",onClick:b,className:"min-w-0 flex-1",children:bc.buttonText})})})]}),e[32]=b,e[33]=I):I=e[33];let N;return e[34]!==v||e[35]!==E||e[36]!==I?(N=r.jsxs(Mt,{testId:"modal-agent-nux",isOpen:!0,noPadding:!0,onClose:v,showCloseButton:!0,size:"custom",type:"success",className:"max-w-md",title:bc.title,visuallyHiddenHeader:!0,children:[E,I]}),e[34]=v,e[35]=E,e[36]=I,e[37]=N):N=e[37],N},Mke=Object.freeze(Object.defineProperty({__proto__:null,AgentNuxModal:Tke,agentModeWelcomeCopy:bc,useAgentNuxModalState:uB},Symbol.toStringTag,{value:"Module"}));var Ake=(t=>(t.Gizmo="gizmo",t.App="app",t))(Ake||{});function set(t){return typeof t=="object"&&t!=null&&"command"in t}function oet(t){"use forget";const e=G.c(11),{command:n,isHighlighted:s,onHighlight:o,onClick:a}=t;let i;e[0]!==n.title?(i=r.jsx("span",{className:"break-all",children:n.title}),e[0]=n.title,e[1]=i):i=e[1];let l;return e[2]!==n.disabled||e[3]!==n.icon||e[4]!==n.secondary||e[5]!==n.trailing||e[6]!==s||e[7]!==a||e[8]!==o||e[9]!==i?(l=r.jsx(K3,{as:"div",hasManagedFocus:!0,disabled:n.disabled,highlighted:s,icon:n.icon,secondary:n.secondary,trailing:n.trailing,onPointerMove:o,onClick:a,children:i}),e[2]=n.disabled,e[3]=n.icon,e[4]=n.secondary,e[5]=n.trailing,e[6]=s,e[7]=a,e[8]=o,e[9]=i,e[10]=l):l=e[10],l}function aet(t){var e,n;return{targets:[t.command,...(e=t.aliases)!=null?e:[],...(n=t.regexMatches)!=null?n:[],t.secondary?"".concat(t.title," ").concat(t.secondary):t.title],weight:t.matchWeight}}class Ike{constructor(e,n){Q(this,"store",[]);this.compare=e,this.maxSize=n}push(e){const n=this.store;n.length<this.maxSize?(n.push(e),jke(this.store,this.compare)):this.compare(e,n[0])>0&&(n[0]=e,A7(this.store,this.compare))}pop(){const e=this.store,n=e[0],s=e.pop();return e.length>0&&(e[0]=s,A7(this.store,this.compare)),n}toArray(e){const n=this.store.length,s=new Array(n);for(let o=n-1;o>=0;o--){const a=this.pop();s[o]=e?e(a):a}return s}}function jke(t,e){let n=t.length-1;for(;n>0;){const s=Math.floor((n-1)/2);if(e(t[s],t[n])<=0)break;[t[s],t[n]]=[t[n],t[s]],n=s}}function A7(t,e){let n=0;for(let s=1;s<t.length;s=n*2+1){const o=s+1,a=o<t.length&&e(t[o],t[s])<0?o:s;if(e(t[n],t[a])<=0)break;[t[n],t[a]]=[t[a],t[n]],n=a}}function ret(t,e,n,{locale:s,maxResults:o=50}={}){const a=e.toLocaleLowerCase();if(!a)return t;const i=new Ike((l,c)=>l.score-c.score,o);for(let l=0;l<t.length;l++){const{targets:c,weight:d=1}=n(t[l]);let u=0;for(let f=0;f<c.length;f++){const m=c[f];if(m){const p=m.toLowerCase(),g=Nke(p,a,s);g>u&&(u=g)}}u>0&&i.push({value:t[l],score:u*d})}return i.toArray(l=>l.value)}function Nke(t,e,n){if(e.length===0||e.length>t.length||!t.includes(e[0])||e.length>1&&!t.includes(e[e.length-1]))return 0;const s=[];for(let c=0,d=0;c<t.length&&d<e.length;c++)t.charCodeAt(c)===e.charCodeAt(d)&&(s.push(c),d++);if(s.length!==e.length)return 0;for(let c=s.length-2;c>=0;c--){const d=s[c+1]-1;s[c]<d&&t.charCodeAt(d)===e.charCodeAt(c)&&(s[c]=d)}const o=s[0];let a=0,i=0,l=I7(t,s[0],n)?1:0;for(let c=1;c<s.length;c++){const d=s[c]-s[c-1];d===1?a++:(i+=d-1,l+=I7(t,s[c],n)?1:0)}return Pke*s.length+Rke*a+Lke*(o===0?1:0)+Oke*l+Dke*i+Fke*o}const Pke=5,Rke=10,Lke=5,Oke=15,Dke=-5,Fke=-.2;function I7(t,e,n){var s;if(typeof Intl.Segmenter=="function"){const o=new Intl.Segmenter(n,{granularity:"word"}).segment(t);if(typeof o.containing=="function"){const a=o.containing(e);if(!a)return!1;const i=(s=a.segment)==null?void 0:s[e-a.index-1];return a.isWordLike===!0&&(a.index===e||i==="_")}}return!1}var Bke=vz();const iet=Gn(Bke);function cet({children:t,className:e,showBackground:n}){return r.jsxs("div",{className:"relative",children:[t,n&&r.jsx(Xe.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:W("pointer-events-none absolute inset-0 rounded-full",e)})]})}function Uke({shortName:t,includeAction:e,entry:n,onClick:s}){_.useEffect(()=>{if(!open||n.type!==Ft.GDRIVE)return;const d=n.access_token;d&&cF(d)},[n]);const o=bz(n.type),a=ne(),i=!t&&(n.type===Ft.O365_BUSINESS||n.type===Ft.O365_PERSONAL)?ig(Ft.O365,a,t):ig(n.type,a,t),l=t?void 0:n.type===Ft.O365_BUSINESS?a.formatMessage(N7.workSchool):n.type===Ft.O365_PERSONAL?a.formatMessage(N7.personal):void 0,c=!t&&n.type===Ft.O365_BUSINESS?!0:!!l;return r.jsx(Y.Item,{onClick:s,icon:o,label:e?n.access_token?r.jsx(j,U(w({},j7.uploadFromMessage),{values:{connectorName:i}})):r.jsx(j,U(w({},j7.signinWithMessage),{values:{connectorName:i}})):i,secondary:c?[l,n.type===Ft.O365_BUSINESS?a.formatMessage(Cz.includesSharePoint):void 0].filter(Boolean).join(" - "):null},n.id)}const j7=be({signinWithMessage:{id:"ContextConnectorPickerDropdownItem.signInWithMessage",defaultMessage:"Connect {connectorName}"},uploadFromMessage:{id:"ContextConnectorPickerDropdownItem.uploadWithMessage",defaultMessage:"Add from {connectorName}"}}),N7=be({personal:{id:"ContextConnectorPickerDropdownItem.o365Personal",defaultMessage:"Personal"},workSchool:{id:"ContextConnectorPickerDropdownItem.o365WorkSchool",defaultMessage:"Work/School"}}),$ke=R(()=>P(()=>import("./fw3ln85zsg8szaqb.js"),__vite__mapDeps([330,1])),{loading:t=>O(t)});function Vke({isLoadingConnectors:t,connectorConfig:e,onConnectorClick:n}){const s=!Ed(),a=_.useMemo(()=>Array.from(e.values()),[e]).filter(l=>l.access_token!=null),i=wl();return a.length===0&&(!t||i)?null:r.jsxs(Y.Sub,{onOpenChange:l=>{l&&B.logEventWithStatsig("Composer: Open Context Connector Picker","chatgpt_composer_open_context_connector_picker")},children:[r.jsx(Y.SubMenuTrigger,{icon:$ke,children:r.jsx("div",{className:"line-clamp-1 text-ellipsis",children:r.jsx(j,w({},Hke.addFromApps))})}),r.jsx(Y.Portal,{children:r.jsxs(Y.SubContent,{className:W(s&&"-translate-x-1/2 -translate-y-full"),children:[t&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Shimmer,{}),r.jsx(Y.Shimmer,{}),r.jsx(Y.Shimmer,{})]}),r.jsx(Py,{includeAction:!1,shortName:!1,connectorConfig:e,onConnectorClick:n})]})})]})}const Py=({shortName:t,includeAction:e,connectorConfig:n,onConnectorClick:s})=>{const a=_.useMemo(()=>Array.from(n.values()),[n]).filter(i=>i.access_token!=null);return r.jsx(r.Fragment,{children:a.map(i=>r.jsx(Uke,{shortName:t,includeAction:e,entry:i,onClick:()=>s(i)},i.id))})},Hke=be({addFromApps:{id:"ContextConnectorPicker.addFromApps",defaultMessage:"Add from apps"}});function fB(){var i;const t=V(),e=jn(hn),n=Vh(t),s=ae(it.sidebarUrlTrayOpen$),o=ae(it.context$),a=s&&!!o;return e&&n?r.jsx(Y.Item,{icon:r.jsx(Hg,{base64:o==null?void 0:o.base64favicon,title:(i=o==null?void 0:o.title)!=null?i:o==null?void 0:o.url,className:"h-4 w-4 rounded-[4px]"}),disabled:a,onClick:()=>{var l;(l=Z8())==null||l.triggerProductEvent("addTabContext"),o4(!0)},children:r.jsx("span",{children:r.jsx(j,{id:"+gYTJ0",defaultMessage:"Attach tab"})})},"tab_context"):null}const Gke=R(()=>P(()=>import("./ejd4bb0myatokvzs.js"),__vite__mapDeps([360,1])),{loading:t=>O(t)}),Wke=R(()=>P(()=>import("./gn0yr6ivpbm62r9h.js"),__vite__mapDeps([328,1])),{loading:t=>O(t)}),zke={"image/jpeg":".jpg","image/png":".png"};function qke({entry:t}){return r.jsx(Y.Item,{onClick:t.onClick,icon:t.icon,children:r.jsx(j,w({},t.label))},t.key)}function Yke(t){const e=ne(),n=Ut(),s=ki();return _.useCallback(async a=>{const i="".concat(new Date().toISOString().replaceAll(":","-")).concat(zke[a.mimeType]);ti.uploadFile(s,new File([Wg(a.data)],i,{type:a.mimeType}),t,e,n,void 0,void 0,xo.Multimodal)},[s,e,n,t])}function mB(t){const e=Yke(t),n=Zke(e),s=Kke(e);return{desktopConnectors:_.useMemo(()=>Yo?[n,s].filter(a=>a!==void 0):[],[n,s])}}function Zke(t){return _.useMemo(()=>({key:"takeScreenshot",label:pB.takeScreenshot,icon:Gke,onClick:async()=>{const e=await Sz();e&&(B.logEvent("Sidetron: Screenshot Attached"),await t(e))}}),[t])}function Kke(t){return _.useMemo(()=>({key:"takePhoto",label:pB.takePhoto,icon:Wke,onClick:async()=>{const e=await wz();e&&(B.logEvent("Sidetron: Photo Attached"),await t(e))}}),[t])}const pB=be({takeScreenshot:{id:"ContextConnectorPickerDropdownItem.takeScreenshotDesktop",defaultMessage:"Take screenshot"},takePhoto:{id:"ContextConnectorPickerDropdownItem.takePhotoDesktop",defaultMessage:"Take photo"}});function det({clientThreadId:t,icon:e,modelSupportedImageMimeTypes:n,isLoadingConnectors:s,connectorConfig:o,onSelectConnector:a,openFileDialog:i,isDisabled:l=!1,highlightTooltip:c=!1,showLabel:d,disabledReason:u,currentModelName:f}){const m=ne(),p=K8(),[g,h]=_.useState(!1),x=_.useRef(!1),v=V(),y=jn(hn),b=p!=null||u===ui.RateLimitReached,C=I=>{h(I),I&&(B.logEventWithStatsig("Composer: Open Plus Menu","chatgpt_web_composer_plus_menu_open",b?{file_upload_disabled_reason:"rate_limit"}:void 0),x.current=!0,setTimeout(()=>{x.current=!1},250))},{desktopConnectors:S}=mB(n),k=n.length>0,E=r.jsxs(r.Fragment,{children:[y&&r.jsx(fB,{}),r.jsx(Vke,{isLoadingConnectors:s,connectorConfig:o,onConnectorClick:a}),r.jsx(gB,{modelSupportedImageMimeTypes:n}),r.jsx(GD,{openFileDialog:i,showMenuForNoAuth:!1,modelSupportsImages:k,clientThreadId:t})]}),T=l||p!=null,M=_.useRef(!1),A=r.jsxs(Y.Root,{open:g,onOpenChange:C,children:[r.jsx(UD,{clientThreadId:t,rateLimitPopup:p,highlightTooltip:c,disabled:T,disabledReason:u,currentModelName:f,children:r.jsxs(Y.BasicTrigger,{className:"composer-btn",disabled:T,id:"upload-file-btn","aria-label":H1(v,m,T,u,f),children:[e,d&&r.jsx(F4e,{})]})}),r.jsx(Y.Portal,{children:r.jsx(Y.Content,{alignOffset:-8,onEscapeKeyDown:()=>{M.current=!0},side:"bottom",size:"small",onCloseAutoFocus:I=>{M.current||I.preventDefault()},className:"radix-side-bottom:flex-col-reverse flex flex-col",children:E})})]});return r.jsx("div",{className:"flex flex-col",children:A})}const gB=({modelSupportedImageMimeTypes:t})=>wl()?r.jsx(Qke,{modelSupportedImageMimeTypes:t}):null,Qke=({modelSupportedImageMimeTypes:t})=>{const{desktopConnectors:e}=mB(t);return r.jsx(r.Fragment,{children:e.map(n=>r.jsx(qke,{entry:n},n.key))})},Jke=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M4.33496 12.5V7.5C4.33496 7.13273 4.63273 6.83496 5 6.83496C5.36727 6.83496 5.66504 7.13273 5.66504 7.5V12.5C5.66504 14.8942 7.60585 16.835 10 16.835C12.3942 16.835 14.335 14.8942 14.335 12.5V5.83301C14.3348 4.35959 13.1404 3.16522 11.667 3.16504C10.1934 3.16504 8.99822 4.35948 8.99805 5.83301V12.5C8.99805 13.0532 9.44679 13.502 10 13.502C10.5532 13.502 11.002 13.0532 11.002 12.5V7.5C11.002 7.13273 11.2997 6.83496 11.667 6.83496C12.0341 6.83514 12.332 7.13284 12.332 7.5V12.5C12.332 13.7877 11.2877 14.832 10 14.832C8.71226 14.832 7.66797 13.7877 7.66797 12.5V5.83301C7.66814 3.62494 9.45888 1.83496 11.667 1.83496C13.875 1.83514 15.6649 3.62505 15.665 5.83301V12.5C15.665 15.6287 13.1287 18.165 10 18.165C6.87131 18.165 4.33496 15.6287 4.33496 12.5Z"})),Xke=Object.freeze(Object.defineProperty({__proto__:null,default:Jke},Symbol.toStringTag,{value:"Module"})),e9e=R(()=>P(()=>import("./ejd4bb0myatokvzs.js"),__vite__mapDeps([360,1])),{loading:t=>O(t)});function t9e({modelSupportedImageMimeTypes:t}){const e=jn(hn),n=ki(),s=Ut(),o=ne();return e?r.jsx(Y.Item,{icon:e9e,onClick:async()=>{const a=await P(()=>import("./bzf7wmlorqd0v0qv.js"),__vite__mapDeps([361,10,1,11])).then(i=>i.getTabScreenshot());if(a)try{const i=atob(a.base64image),l=i.length,c=new Uint8Array(l);for(let u=0;u<l;u++)c[u]=i.charCodeAt(u);const d=new File([c],a.filename,{type:a.mimetype});ti.uploadFile(n,d,t,o,s,void 0,void 0,xo.Multimodal)}catch(i){}},children:r.jsx(j,{id:"HiFPUD",defaultMessage:"Attach screenshot"})},"attach_screenshot"):null}function hB(t,e){return new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"short",day:"numeric"}).format(e)}function n9e(t,e){return new Intl.DateTimeFormat(t.locale,{month:"short",day:"numeric"}).format(e)}const s9e=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)});function o9e({onAttachLibraryFile:t,attachedFileIds:e}){const n=ne(),[s,o]=_.useState(null),[a,i]=_.useState(!1),[l,c]=_.useState(null),d=_.useRef(!1),u=_.useMemo(()=>e==null?new Set:e instanceof Set?e:new Set(e),[e]),f=async p=>{i(!0),c(null);try{const h=await ge.safePost("/files/library",{requestBody:{limit:5,cursor:p}});o(x=>x?[...x,...h.items]:h.items)}catch(g){c(g.message)}finally{i(!1)}};function m(p){const g=p.lastIndexOf(".");return g>0?p.slice(0,g):p}return _.useEffect(()=>{d.current&&s==null&&!a&&f(null)},[d.current]),r.jsxs(Y.Sub,{onOpenChange:p=>{d.current=p,p&&s==null&&!a&&f(null)},children:[r.jsx(Y.SubMenuTrigger,{icon:s9e,children:r.jsx("div",{className:"line-clamp-1 text-ellipsis",children:r.jsx(j,w({},P7.addFromLibrary))})}),r.jsx(Y.Portal,{children:r.jsxs(Y.SubContent,{children:[s==null&&a&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Shimmer,{}),r.jsx(Y.Shimmer,{}),r.jsx(Y.Shimmer,{})]}),l?r.jsx(Y.Label,{children:r.jsx(j,{id:"fRTSh4",defaultMessage:"Failed to load library files"})}):(s==null?void 0:s.length)===0&&!a&&r.jsx(Y.Label,{children:r.jsx(j,{id:"CalUoF",defaultMessage:"No results"})}),s==null?void 0:s.map(p=>r.jsx(Y.Item,{className:"gap-2",size:"large",secondary:p.state==="failed"?"Failed":void 0,disabled:p.state!=="ready"||u.has(p.file_id),onClick:()=>{p.state!=="ready"||u.has(p.file_id)||(t==null||t({id:p.file_id,name:p.file_name,mimeType:p.mime_type,libraryFileId:p.id}),B.logEventWithStatsig("chatgpt_files_user_action","chatgpt_library_file_attached_to_conversation",{mimeType:p.mime_type}))},children:r.jsx(FR,{fileName:m(p.file_name),icon:r.jsx(c5,{filename:p.file_name,contextConnectorInfo:void 0}),fileNameClass:"text-token-text-primary text-sm leading-[18px] font-normal tracking-[-0.3px]",customFileDescription:r.jsx("span",{className:"text-token-text-tertiary text-xs leading-4 font-normal tracking-[-0.1px]",children:r.jsx(j,U(w({},P7.fileDesc),{values:{category:kz(p.library_file_category),sep:"",date:n9e(n,new Date(p.file_upload_time))}}))})})},p.id))]})})]})}const P7=be({addFromLibrary:{id:"hAUk/T",defaultMessage:"Recent files"},fileDesc:{id:"ContextConnectorLibraryFileDropdownItem.fileDesc",defaultMessage:"{category} {sep} {date}"}}),a9e=R(()=>P(()=>Promise.resolve().then(()=>vB),void 0),{loading:t=>O(t)}),r9e=t=>{"use forget";var ie,ee,le,X;const e=G.c(52),{conversation:n,layoutMode:s,selectedModelId:o,onSelectModelId:a}=t,i=V();let l;e[0]!==n?(l=()=>ta(n),e[0]=n,e[1]=l):l=e[1];const c=ae(l);let d;e[2]!==n?(d=()=>Ez(n),e[2]=n,e[3]=d):d=e[3];const u=ae(d);let f;e[4]!==c.categories?(f=(ie=c.categories)!=null?ie:[],e[4]=c.categories,e[5]=f):f=e[5];const m=f;let p;e[6]!==c.categories||e[7]!==c.models||e[8]!==o?(p=(X=(ee=c.categories.find(te=>{var ce;return te.defaultModel===o||((ce=te.supportedModels)==null?void 0:ce.includes(o))}))==null?void 0:ee.label)!=null?X:(le=c.models.get(o))==null?void 0:le.title,e[6]=c.categories,e[7]=c.models,e[8]=o,e[9]=p):p=e[9];const g=p;let h;e[10]!==m?(h=m.filter(i9e),e[10]=m,e[11]=h):h=e[11];const x=h;let v;e[12]!==m?(v=jd(m.filter(l9e),"subcategory"),e[12]=m,e[13]=v):v=e[13];const y=v;let b;e[14]!==x||e[15]!==y?(b={primaryGroup:x,subGroups:y},e[14]=x,e[15]=y,e[16]=b):b=e[16];const{primaryGroup:C,subGroups:S}=b;if(!i8(i))return null;let E;e[17]!==i?(E=ye(i,"3315017149"),e[17]=i,e[18]=E):E=e[18];const T=E,M=3+(T?9:0)+12*C.length+2+9+3;let A;e[19]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(j,{id:"RylQRg",defaultMessage:"Model"}),e[19]=A):A=e[19];let I;e[20]!==g?(I=r.jsx("span",{className:"max-w-40 truncate",children:g}),e[20]=g,e[21]=I):I=e[21];const N=!u;let L;e[22]!==I||e[23]!==N?(L=r.jsx(Y.SubMenuTrigger,{icon:a9e,label:A,trailing:I,disabled:N}),e[22]=I,e[23]=N,e[24]=L):L=e[24];const D=s==="center"?"start":"end",F="min(var(--radix-dropdown-menu-content-available-height),calc(var(--spacing)*".concat(M,"))");let $;e[25]!==F?($={maxHeight:F},e[25]=F,e[26]=$):$=e[26];let H;e[27]!==T||e[28]!==c.title?(H=T&&r.jsx(Y.Label,{children:c.title}),e[27]=T,e[28]=c.title,e[29]=H):H=e[29];let z;if(e[30]!==C||e[31]!==o){let te;e[33]!==o?(te=ce=>r.jsx(R7,{category:ce,isSelected:o===ce.defaultModel},ce.defaultModel),e[33]=o,e[34]=te):te=e[34],z=C.map(te),e[30]=C,e[31]=o,e[32]=z}else z=e[32];let K;e[35]!==o||e[36]!==S?(K=Object.entries(S).map(te=>{const[ce,ue]=te;return r.jsxs(Y.Group,{children:[r.jsx(Y.Label,{children:ce}),ue.map(me=>r.jsx(R7,{category:me,isSelected:o===me.defaultModel},me.defaultModel))]},ce)}),e[35]=o,e[36]=S,e[37]=K):K=e[37];let J;e[38]!==a||e[39]!==o||e[40]!==H||e[41]!==z||e[42]!==K?(J=r.jsxs(Y.RadioGroup,{value:o,onValueChange:a,children:[H,z,K]}),e[38]=a,e[39]=o,e[40]=H,e[41]=z,e[42]=K,e[43]=J):J=e[43];let Z;e[44]===Symbol.for("react.memo_cache_sentinel")?(Z=!1,e[44]=Z):Z=e[44];let q;e[45]!==D||e[46]!==$||e[47]!==J?(q=r.jsx(Y.Portal,{children:r.jsxs(Y.SubContent,{align:D,style:$,children:[J,Z]})}),e[45]=D,e[46]=$,e[47]=J,e[48]=q):q=e[48];let se;return e[49]!==L||e[50]!==q?(se=r.jsxs(Y.Sub,{children:[L,q]},"models-menu"),e[49]=L,e[50]=q,e[51]=se):se=e[51],se},R7=t=>{"use forget";const e=G.c(12),{category:n,isSelected:s}=t,o=ne();let a;e[0]!==n.isAlpha||e[1]!==n.isBeta||e[2]!==n.modelBadge||e[3]!==o?(a=n.isBeta?o.formatMessage({id:"Mu+7v6",defaultMessage:"Beta"}):n.isAlpha?o.formatMessage({id:"chDss2",defaultMessage:"Alpha"}):n.modelBadge,e[0]=n.isAlpha,e[1]=n.isBeta,e[2]=n.modelBadge,e[3]=o,e[4]=a):a=e[4];const i=a,l=s?"selected":"default";let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(Y.RadioItemCheck,{}),e[5]=c):c=e[5];let d;return e[6]!==i||e[7]!==n.defaultModel||e[8]!==n.description||e[9]!==n.label||e[10]!==l?(d=r.jsx(Y.RadioItem,{value:n.defaultModel,color:l,trailing:c,label:n.label,secondary:n.description,badge:i,disabled:!1}),e[6]=i,e[7]=n.defaultModel,e[8]=n.description,e[9]=n.label,e[10]=l,e[11]=d):d=e[11],d};function i9e(t){return t.subcategory==null}function l9e(t){return t.subcategory!=null}function Ry(t){"use forget";const e=G.c(7),{systemHint:n}=t;if(!L7(n))return null;const o=n.isDangerous&&"text-token-interactive-label-danger-secondary-default border-token-border-status-error";let a;e[0]!==o?(a=W(o),e[0]=o,e[1]=a):a=e[1];let i;e[2]!==n?(i=L7(n),e[2]=n,e[3]=i):i=e[3];let l;return e[4]!==a||e[5]!==i?(l=r.jsx(nd,{className:a,children:i}),e[4]=a,e[5]=i,e[6]=l):l=e[6],l}function L7(t){if(t.badgeText!=null)return t.badgeText;switch(t.badgeType){case x_.DEV:return r.jsx(j,{defaultMessage:"Dev",id:"allConnectors.dev.mcp"});case x_.BETA:return r.jsx(j,{defaultMessage:"Beta",id:"allConnectors.beta.mcp"});case x_.CUSTOM:return r.jsx(j,{defaultMessage:"Custom",id:"allConnectors.custom.mcp"})}if(t.isDangerous)return r.jsx(j,{id:"w+mmPI",defaultMessage:"DEV"})}const c9e=R(()=>P(()=>import("./dnpenovn9ku8sbs2.js"),__vite__mapDeps([229,1])),{loading:t=>O(t)}),d9e=[];function uet(t){"use forget";const e=G.c(49),{composerController:n,activeSystemHintType:s,systemHints:o,clientThreadId:a,disabled:i}=t,l=i===void 0?!1:i,c=$s(),d=D8(),u=V();let f;e[0]!==a||e[1]!==c?(f=ee=>{c(ee,{analyticsMetadata:{clientThreadId:a}})},e[0]=a,e[1]=c,e[2]=f):f=e[2];const m=f;let p;e[3]!==a?(p={clientThreadId:a},e[3]=a,e[4]=p):p=e[4];const g=p;let h;e[5]!==g?(h=function(){B.logEventWithStatsig("Composer System Hint Button Hovered","composer_system_hint_button_hovered",g)},e[5]=g,e[6]=h):h=e[6];const x=h;let v;e[7]!==g||e[8]!==u?(v=function(){ze(u,"1092897457").get("is_tatertot_enabled",!0),B.logEventWithStatsig("Composer System Hint Button Clicked","composer_system_hint_button_clicked",g)},e[7]=g,e[8]=u,e[9]=v):v=e[9];const y=v;let b;e[10]!==n?(b=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{so(Pt(n))})})},e[10]=n,e[11]=b):b=e[11];const C=b,S=ne(),[k,E]=_.useState(!1),T=s!=null,M=!T,A=_.useRef(!1),I=_.useRef(!1);let N;e[12]!==y||e[13]!==C?(N=ee=>{E(ee),ee?y==null||y():requestAnimationFrame(()=>{requestAnimationFrame(()=>{A.current&&(A.current=!1,C())})})},e[12]=y,e[13]=C,e[14]=N):N=e[14];let L;e[15]!==k?(L=mv(k),e[15]=k,e[16]=L):L=e[16];let D;e[17]!==S?(D=S.formatMessage({id:"mJYhKI",defaultMessage:"Choose tool"}),e[17]=S,e[18]=D):D=e[18];let F;e[19]===Symbol.for("react.memo_cache_sentinel")?(F=r.jsx(c9e,{"aria-label":"",className:"icon"}),e[19]=F):F=e[19];let $;e[20]!==M?($=M&&r.jsx("span",{className:"ms-1.5 me-0.5",children:r.jsx(j,{id:"mNL7WC",defaultMessage:"Tools"})}),e[20]=M,e[21]=$):$=e[21];let H;e[22]!==l||e[23]!==x||e[24]!==$||e[25]!==L||e[26]!==D?(H=r.jsxs(Y.BasicTrigger,{className:"composer-btn px-2","data-opened":L,"aria-label":D,id:"system-hint-button",disabled:l,onPointerOver:x,onClick:f9e,onFocusCapture:u9e,children:[F,$]}),e[22]=l,e[23]=x,e[24]=$,e[25]=L,e[26]=D,e[27]=H):H=e[27];let z;e[28]!==l||e[29]!==T||e[30]!==H?(z=r.jsx(p9e,{disabled:l,hintSelected:T,children:H}),e[28]=l,e[29]=T,e[30]=H,e[31]=z):z=e[31];let K,J;e[32]===Symbol.for("react.memo_cache_sentinel")?(K=()=>{I.current=!0},J=ee=>{var le;if(!I.current||A.current){ee.preventDefault();return}(le=document.querySelector("#system-hint-button"))==null||le.focus()},e[32]=K,e[33]=J):(K=e[32],J=e[33]);let Z;e[34]!==M?(Z=!M&&r.jsx(Y.Label,{children:r.jsx(j,{id:"KSn3Jr",defaultMessage:"Tools"})}),e[34]=M,e[35]=Z):Z=e[35];let q;e[36]!==d||e[37]!==s||e[38]!==m||e[39]!==o?(q=r.jsx(Yp,{systemHints:o,activeConnectorSystemHintTypes:d,selectedHintType:s,onSelectHintType:m,isLoadingConnectorsForSystemHints:!1}),e[36]=d,e[37]=s,e[38]=m,e[39]=o,e[40]=q):q=e[40];let se;e[41]!==Z||e[42]!==q?(se=r.jsx(Y.Portal,{children:r.jsxs(Y.Content,{size:"auto",alignOffset:-7,onEscapeKeyDown:K,onCloseAutoFocus:J,children:[Z,q]})}),e[41]=Z,e[42]=q,e[43]=se):se=e[43];let ie;return e[44]!==k||e[45]!==z||e[46]!==se||e[47]!==N?(ie=r.jsxs(Y.Root,{open:k,onOpenChange:N,children:[z,se]}),e[44]=k,e[45]=z,e[46]=se,e[47]=N,e[48]=ie):ie=e[48],ie}function u9e(t){t.stopPropagation()}function f9e(t){t.preventDefault()}const Yp=({systemHints:t,activeConnectorSystemHintTypes:e,selectedHintType:n,onSelectHintType:s,isLoadingConnectorsForSystemHints:o})=>r.jsx(Y.RadioGroup,{value:n!=null?n:void 0,onValueChange:a=>{s(a===n?null:a)},children:t?r.jsxs(r.Fragment,{children:[t.map(a=>r.jsx(m9e,{hint:a,isSelected:n===a.systemHint||sv(n)&&(e==null?void 0:e.has(a.systemHint))},a.systemHint)),o&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Shimmer,{size:"short"}),r.jsx(Y.Shimmer,{size:"short"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(Y.Shimmer,{size:"short"}),r.jsx(Y.Shimmer,{size:"short"})]})}),m9e=t=>{"use forget";var g;const e=G.c(22),{hint:n,isSelected:s}=t,o=ike(n.systemHint);let a;e[0]!==n.systemHint?(a=d9e.includes(n.systemHint),e[0]=n.systemHint,e[1]=a):a=e[1];const i=a;if(n.hideFromInitialSelection&&!s)return null;const l=s?"selected":"default";let c;e[2]!==n?(c=r.jsx(gl,{hint:n,isNextToLabel:!0}),e[2]=n,e[3]=c):c=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(Y.RadioItemCheck,{}),e[4]=d):d=e[4];const u=(g=n.actionLabel)!=null?g:n.name;let f;e[5]!==n||e[6]!==i?(f=i?r.jsx(nd,{children:r.jsx(j,{id:"composer.skills.new",defaultMessage:"New"})}):r.jsx(Ry,{systemHint:n}),e[5]=n,e[6]=i,e[7]=f):f=e[7];let m;e[8]!==n.systemHint||e[9]!==o.blockedLabel||e[10]!==o.isBlocked||e[11]!==l||e[12]!==c||e[13]!==u||e[14]!==f?(m=r.jsx(Y.RadioItem,{value:n.systemHint,disabled:o.isBlocked,color:l,icon:c,trailing:d,label:u,secondary:o.blockedLabel,children:f}),e[8]=n.systemHint,e[9]=o.blockedLabel,e[10]=o.isBlocked,e[11]=l,e[12]=c,e[13]=u,e[14]=f,e[15]=m):m=e[15];const p=m;if(o.remainingLabel){const h=o.isBlocked?"left":"center",x=o.isBlocked?void 0:null;let v;return e[16]!==p||e[17]!==o.remainingLabel||e[18]!==o.remainingLabelSecondary||e[19]!==h||e[20]!==x?(v=r.jsx(_t,{side:"right",labelTextAlign:h,label:o.remainingLabel,secondaryLabel:o.remainingLabelSecondary,contentClassName:"cant-hover:hidden",triggerAs:x,children:p}),e[16]=p,e[17]=o.remainingLabel,e[18]=o.remainingLabelSecondary,e[19]=h,e[20]=x,e[21]=v):v=e[21],v}return p},p9e=({disabled:t,children:e,hintSelected:n})=>{const s=V(),o=dt(Fe.hasSeenComposerSystemHintButtonTooltip),a=g9e(),i=!t&&!a.isLoading&&a.eligible,l=!t&&!o.isLoading&&o.eligible,c=_.useMemo(()=>{if(i)return{announcementKey:Fe.hasSeenConnectorsSourcesPillTooltip,title:r.jsx(j,{id:"qgvuHg",defaultMessage:"Search connected apps"}),onDismiss:()=>st(s,Fe.hasSeenConnectorsSourcesPillTooltip),description:r.jsx(j,{id:"bJE6uS",defaultMessage:"Get insights across Google Drive, SharePoint, Dropbox, and more."})};if(l)return{announcementKey:Fe.hasSeenComposerSystemHintButtonTooltip,title:r.jsx(j,{id:"tTydhk",defaultMessage:"All your tools, in one handy place"}),onDismiss:()=>st(s,Fe.hasSeenComposerSystemHintButtonTooltip),description:r.jsx(j,{id:"Kgb5fv",defaultMessage:"Create an image, research report, and more."})}},[s,l,i]);if(_.useEffect(()=>{c&&(c.announcementKey===Fe.hasSeenComposerSystemHintButtonTooltip?B.logUpsellOrModalEvent(un,{eventId:"composer_system_hint_button_tooltip_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}):c.announcementKey===Fe.hasSeenConnectorsSourcesPillTooltip&&B.logUpsellOrModalEvent(un,{eventId:"connectors_sources_pill_tooltip_shown",type:ln.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}))},[c]),!n&&!i)return e;if(c)return r.jsx(zd,U(w({show:!0,side:"bottom",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!"},c),{children:e}));let d;return t?d=r.jsx(j,{id:"uw9x80",defaultMessage:"Tools unavailable"}):d=r.jsx(j,{id:"Yr1zf1",defaultMessage:"Choose tool"}),r.jsx(_t,{side:"bottom",label:d,children:e})},g9e=()=>{var u;const t=V(),e=ae(()=>Vs(t)),{data:n,isLoading:s}=wh(),{eligible:o,markAsViewedDontInvalidateCache:a,isLoading:i}=dt(Fe.hasSeenConnectorsSourcesPillTooltip),l=(u=n==null?void 0:n.announcements)==null?void 0:u[Fe.hasSeenConnectorsNuxModal],c=!!(l&&qT(new Date,new Date(l))>=1);return{eligible:o&&c&&e!=null&&e.some(f=>f.systemHint===Pe.Slurm),isLoading:s||i,markAsViewedDontInvalidateCache:a}},h9e=R(()=>P(()=>Promise.resolve().then(()=>Mke),void 0).then(t=>t.AgentNuxModal));function fet(t){"use forget";var $4;const e=G.c(140),{conversation:n,composerController:s,composerDisabled:o,layoutMode:a,shouldUseBottomSheet:i,openFileDialog:l,modelSupportedImageMimeTypes:c,isFileUploadEnabled:d,fileUploadDisabledReason:u,currentModelId:f,currentModelConfig:m,selectModelId:p,connectorConfig:g,onSelectConnector:h,availableSystemHints:x,activeConnectorSystemHintTypes:v,activeSystemHintType:y}=t,b=V(),C=ne();let S;e[0]!==b?(S=Q8(b),e[0]=b,e[1]=S):S=e[1];const k=S,E=K8(),T=E!=null,M=c.length>0,A=ki(),I=pv(y9e),N=Ol();let L;e[2]!==s?(L=i4(s),e[2]=s,e[3]=L):L=e[3];const D=ae(L.isWhisperActive$);let F;e[4]!==s?(F=sB(s),e[4]=s,e[5]=F):F=e[5];const{shouldHighlight$:$}=F;let H;e[6]!==$?(H=()=>$(),e[6]=$,e[7]=H):H=e[7];const z=ae(H);let K;e[8]!==b?(K=()=>Tz(b),e[8]=b,e[9]=K):K=e[9];const J=ae(K),Z=uB();let q;e[10]!==Z||e[11]!==n.id||e[12]!==b?(q=()=>{Z==="show"&&lt(b,h9e,{clientThreadId:n.id,source:"composer_system_hint"})},e[10]=Z,e[11]=n.id,e[12]=b,e[13]=q):q=e[13];const se=q,ie=$s(),ee=O8();let le;e[14]!==ee||e[15]!==s||e[16]!==n.id||e[17]!==se||e[18]!==ie||e[19]!==i||e[20]!==k.composer?(le=Hs=>{Hs!=null&&(Mz(Hs)?ee(Hs,{analyticsMetadata:{clientThreadId:n.id}}):ie(Hs,{analyticsMetadata:{clientThreadId:n.id}}),Hs===Pe.Agent&&se(),i&&!k.composer.autofocusDisabled$()&&so(Pt(s)))},e[14]=ee,e[15]=s,e[16]=n.id,e[17]=se,e[18]=ie,e[19]=i,e[20]=k.composer,e[21]=le):le=e[21];const X=le;let te;e[22]!==b?(te=uD(b,!0),e[22]=b,e[23]=te):te=e[23];const{showRecentFilesDropdown:ce}=te;let ue;e[24]!==b?(ue=tt(b),e[24]=b,e[25]=ue):ue=e[25];const me=ue;let xe;e[26]!==b?(xe=()=>Rd(b),e[26]=b,e[27]=xe):xe=e[27];const pe=ae(xe),{isCombinedList:Ee,fullyCollapsedToolMenu:Se,showSlashHint:Te,showModelsInPlusMenu:Ne}=pe,De=Se&&!i,de=Ne&&!i,oe=x==null||x.length>0,we=!Ee&&!i&&oe&&(($4=x==null?void 0:x.length)!=null?$4:0)>5,Ce=Array.from(g.values()).some(x9e);let fe;e[28]!==b?(fe=()=>X3(b),e[28]=b,e[29]=fe):fe=e[29];const re=ae(fe),ve=N||i&&re.noExplicitAddFromSocial;let Me;e[30]!==g||e[31]!==Ce||e[32]!==ve||e[33]!==d||e[34]!==me||e[35]!==h||e[36]!==i?(Me=me&&d&&i&&!ve&&Ce?r.jsx(Y.Group,{children:r.jsx(Py,{includeAction:!0,shortName:!0,connectorConfig:g,onConnectorClick:h})},"connect-apps"):null,e[30]=g,e[31]=Ce,e[32]=ve,e[33]=d,e[34]=me,e[35]=h,e[36]=i,e[37]=Me):Me=e[37];const $e=Me;let Le;e[38]!==v||e[39]!==y||e[40]!==x||e[41]!==$e||e[42]!==De||e[43]!==oe||e[44]!==J||e[45]!==me||e[46]!==a||e[47]!==X?(Le=De&&me&&(oe||$e)?r.jsxs(b4e,{layoutMode:a,children:[r.jsx(Y.Group,{children:r.jsx(Yp,{systemHints:x,activeConnectorSystemHintTypes:v,selectedHintType:y,onSelectHintType:X,isLoadingConnectorsForSystemHints:J})}),$e]},"tools-menu"):null,e[38]=v,e[39]=y,e[40]=x,e[41]=$e,e[42]=De,e[43]=oe,e[44]=J,e[45]=me,e[46]=a,e[47]=X,e[48]=Le):Le=e[48];let Ae;e[49]!==n||e[50]!==f||e[51]!==a||e[52]!==p||e[53]!==de?(Ae=de?r.jsx(r9e,{conversation:n,layoutMode:a,selectedModelId:f!=null?f:"",onSelectModelId:Hs=>{p(Hs,"plus menu")}},"models-menu"):null,e[49]=n,e[50]=f,e[51]=a,e[52]=p,e[53]=de,e[54]=Ae):Ae=e[54];let He;e[55]!==Le||e[56]!==Ae?(He=[Le,Ae].filter(_9e),e[55]=Le,e[56]=Ae,e[57]=He):He=e[57];const Qe=He;let ht;e[58]!==x||e[59]!==we?(ht=x&&(we?x.slice(0,4):x),e[58]=x,e[59]=we,e[60]=ht):ht=e[60];const at=ht;let vt;e[61]!==N||e[62]!==Qe?(vt=Qe.length>0&&!N?r.jsx(Y.Group,{children:Qe},"submenus"):null,e[61]=N,e[62]=Qe,e[63]=vt):vt=e[63];const $t=vt,Ct=i?"sheet":void 0,Vt=!d,qt=m==null?void 0:m.title;let en;e[64]!==n.id||e[65]!==u||e[66]!==M||e[67]!==l||e[68]!==E||e[69]!==Ct||e[70]!==Vt||e[71]!==qt?(en=r.jsx(GD,{openFileDialog:l,modelSupportsImages:M,mode:Ct,showMenuForNoAuth:!1,isDisabled:Vt,disabledReason:u,currentModelName:qt,rateLimitInfo:E,clientThreadId:n.id}),e[64]=n.id,e[65]=u,e[66]=M,e[67]=l,e[68]=E,e[69]=Ct,e[70]=Vt,e[71]=qt,e[72]=en):en=e[72];let an;e[73]!==I||e[74]!==g||e[75]!==A||e[76]!==d||e[77]!==me||e[78]!==c||e[79]!==M||e[80]!==h||e[81]!==i||e[82]!==ce?(an=me&&r.jsxs(r.Fragment,{children:[d&&M&&r.jsx(gB,{modelSupportedImageMimeTypes:c}),!i&&d&&r.jsx(Py,{includeAction:!0,shortName:!0,connectorConfig:g,onConnectorClick:h}),ce&&r.jsx(o9e,{attachedFileIds:I,onAttachLibraryFile:Hs=>ir.attachLibraryFile(A,Hs)}),r.jsx(fB,{}),r.jsx(t9e,{modelSupportedImageMimeTypes:c})]}),e[73]=I,e[74]=g,e[75]=A,e[76]=d,e[77]=me,e[78]=c,e[79]=M,e[80]=h,e[81]=i,e[82]=ce,e[83]=an):an=e[83];let Qt;e[84]!==en||e[85]!==an?(Qt=r.jsxs(Y.Group,{className:"content-sheet:content-sheet-inset-section",children:[en,an]},"add-files"),e[84]=en,e[85]=an,e[86]=Qt):Qt=e[86];const _n=Ee&&$t;let rn;e[87]!==v||e[88]!==y||e[89]!==x||e[90]!==at||e[91]!==$e||e[92]!==De||e[93]!==oe||e[94]!==N||e[95]!==J||e[96]!==me||e[97]!==a||e[98]!==X||e[99]!==we?(rn=(!De||!me)&&oe&&!N&&r.jsxs(Y.Group,{children:[r.jsx(Yp,{systemHints:at,activeConnectorSystemHintTypes:v,selectedHintType:y,onSelectHintType:X,isLoadingConnectorsForSystemHints:we?!1:J}),we&&r.jsxs(v4e,{layoutMode:a,children:[r.jsx(Y.Group,{children:r.jsx(Yp,{systemHints:x==null?void 0:x.slice(4),activeConnectorSystemHintTypes:v,selectedHintType:y,onSelectHintType:X,isLoadingConnectorsForSystemHints:J})}),$e]})]},"system-hints"),e[87]=v,e[88]=y,e[89]=x,e[90]=at,e[91]=$e,e[92]=De,e[93]=oe,e[94]=N,e[95]=J,e[96]=me,e[97]=a,e[98]=X,e[99]=we,e[100]=rn):rn=e[100];const Nt=(!De||!me)&&!N&&$e&&(!we||!oe||i)&&$e,Et=!Ee&&$t;let pn;e[101]!==me?(pn=!me&&r.jsx(S4e,{},"upsell"),e[101]=me,e[102]=pn):pn=e[102];let ao;e[103]!==C||e[104]!==N||e[105]!==Te?(ao=Te&&!N&&r.jsx(Y.Group,{children:r.jsx("div",{className:"text-token-text-tertiary p-2 text-center text-sm",children:C.formatMessage({id:"composer.plusMenu.typeSlashForQuickAccess",defaultMessage:"Type '/' for quick access"})})},"slash-hint"),e[103]=C,e[104]=N,e[105]=Te,e[106]=ao):ao=e[106];let Pi;e[107]!==Qt||e[108]!==_n||e[109]!==rn||e[110]!==Nt||e[111]!==Et||e[112]!==pn||e[113]!==ao?(Pi=r.jsxs(r.Fragment,{children:[Qt,_n,rn,Nt,Et,pn,ao]}),e[107]=Qt,e[108]=_n,e[109]=rn,e[110]=Nt,e[111]=Et,e[112]=pn,e[113]=ao,e[114]=Pi):Pi=e[114];const Nn=Pi,Ri=i?"sheet":"dropdown";let Zl;e[115]!==s||e[116]!==k.composer?(Zl=Hs=>{k.composer.autofocusDisabled$()||(Hs.preventDefault(),so(Pt(s)))},e[115]=s,e[116]=k.composer,e[117]=Zl):Zl=e[117];let Kl;e[118]!==C||e[119]!==me?(Kl=me?C.formatMessage({id:"composer.plusMenu.label",defaultMessage:"Add files and more"}):C.formatMessage({id:"composer.plusMenu.label.loggedOut",defaultMessage:"Add photos and more"}),e[118]=C,e[119]=me,e[120]=Kl):Kl=e[120];let Im;e[121]===Symbol.for("react.memo_cache_sentinel")?(Im=r.jsx("kbd",{className:"bg-token-bg-tertiary -me-1 inline-grid aspect-square w-4 items-center justify-center rounded-sm text-[11px]",children:r.jsx("span",{children:"/"})}),e[121]=Im):Im=e[121];const i_=d?l:void 0;let Ql;e[122]!==b?(Ql=Hs=>{if(Dh())return;const V4=t4(b);V4.isKeyboardOpen()&&(Hs.preventDefault(),V4.closeKeyboard(()=>{km(b).isSheetOpen$.set(!0)}))},e[122]=b,e[123]=Ql):Ql=e[123];let Jl;e[124]!==D||e[125]!==i_||e[126]!==Ql?(Jl=r.jsx(x4e,{onDoubleClick:i_,onPointerDown:Ql,disabled:D}),e[124]=D,e[125]=i_,e[126]=Ql,e[127]=Jl):Jl=e[127];let Xl;e[128]!==o||e[129]!==n.id||e[130]!==z||e[131]!==Kl||e[132]!==Jl?(Xl=r.jsx(UD,{disabled:o,clientThreadId:n.id,rateLimitPopup:null,highlightTooltip:z,label:Kl,secondaryLabel:Im,children:Jl}),e[128]=o,e[129]=n.id,e[130]=z,e[131]=Kl,e[132]=Jl,e[133]=Xl):Xl=e[133];let jm;return e[134]!==T||e[135]!==Nn||e[136]!==Ri||e[137]!==Zl||e[138]!==Xl?(jm=r.jsx(h4e,{mode:Ri,onCloseAutoFocus:Zl,items:Nn,fileUploadRateLimited:T,children:Xl}),e[134]=T,e[135]=Nn,e[136]=Ri,e[137]=Zl,e[138]=Xl,e[139]=jm):jm=e[139],jm}function _9e(t){return t!=null}function x9e(t){return t.access_token!=null}function y9e(t){return t.files.map(b9e).filter(v9e)}function v9e(t){return t!=null}function b9e(t){return t.fileId}const C9e=R(()=>P(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([144,1])),{loading:t=>O(t)}),S9e=R(()=>P(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([145,1])),{loading:t=>O(t)}),_B=_.createContext({isScrolling:!1});function w9e(){"use forget";return _.useContext(_B)}function met({items:t,getItemKey:e,onRenderItem:n,itemClassName:s,loadingItemClassName:o,getItemStyle:a,onShown:i,onClick:l,className:c,arrowClassName:d,numLoadingItems:u,theme:f="default"}){"use no forget";const m=V(),p=ae(()=>hn(m)),[g,h]=_.useState(!1),[x,v]=_.useState(!1),[y,b]=_.useState(!1),C=_.useRef(null),S=_.useRef(void 0),k=_.useRef(!1),E=_.useRef(!1),T=_.useRef(0),M=_.useRef(null),A=_.useRef([]),I=_.useRef(null),N=8,L=_.useRef([]),D=_.useCallback(()=>{I.current!=null&&(cancelAnimationFrame(I.current),I.current=null)},[]),F=_.useCallback(X=>{const te=C.current;if(!te)return;const ce=te.scrollWidth-te.clientWidth;if(ce<=0)return;const ue=.0045,me=te.scrollLeft,xe=me+X/ue,pe=Math.min(Math.max(xe,0),ce),Ee=pe-me;if(Math.abs(Ee)<.5)return;const Se=performance.now(),Te=()=>{const Ne=C.current;if(!Ne){I.current=null;return}const De=performance.now()-Se,de=Ee*Math.exp(-ue*De),oe=pe-de,we=Ne.scrollWidth-Ne.clientWidth,Ce=Math.min(Math.max(oe,0),we);Ne.scrollLeft=Ce,Math.abs(de)>.5&&Ce>0&&Ce<we?I.current=requestAnimationFrame(Te):I.current=null};D(),I.current=requestAnimationFrame(Te)},[D]),$=_.useCallback(X=>{X.button!==0&&X.button!==1||(D(),k.current=!0,E.current=!1,T.current=X.clientX,M.current=X.clientX,A.current=[])},[D]),H=_.useCallback(X=>{var me;const te=C.current;if(!te||!k.current&&!te.hasPointerCapture(X.pointerId))return;if(!g)if(Math.abs(X.clientX-T.current)>=N){h(!0),E.current=!0;try{X.currentTarget.setPointerCapture(X.pointerId)}catch(pe){}}else return;const ce=(me=M.current)!=null?me:X.clientX-(X.movementX||0),ue=X.clientX-ce;if(M.current=X.clientX,ue!==0){const xe=-ue;te.scrollLeft+=xe;const pe=A.current,Ee=X.timeStamp;pe.push({time:Ee,delta:xe});const Se=Ee-100;for(;pe.length>0&&pe[0].time<Se;)pe.shift()}},[g,E,T,N]),z=_.useCallback(X=>{const te=C.current;if(!te)return;try{te.hasPointerCapture(X.pointerId)&&te.releasePointerCapture(X.pointerId)}catch(xe){}k.current=!1,h(!1);const ce=A.current;let ue=0;if(ce.length>=2){const xe=ce[0],Ee=ce[ce.length-1].time-xe.time||1;ue=ce.reduce((Te,Ne)=>Te+Ne.delta,0)/Ee}A.current=[],M.current=null,E.current&&Math.abs(ue)>.05&&F(ue)},[F]),K=_.useCallback(X=>{E.current&&(X.preventDefault(),X.stopPropagation(),E.current=!1)},[]),J=_.useCallback(X=>{var te;(te=C.current)!=null&&te.hasPointerCapture(X.pointerId)||z(X)},[z]),Z=_.useCallback(X=>{X.preventDefault(),X.stopPropagation()},[]);_.useEffect(()=>()=>D(),[D]),Xn(()=>{if(!C.current)return;const X=C.current,te=()=>{v(!0),clearTimeout(S.current),S.current=setTimeout(()=>v(!1),150)};return X.addEventListener("scroll",te,{passive:!0}),()=>{X.removeEventListener("scroll",te),clearTimeout(S.current),v(!1)}},[C]),Xn(()=>zl({axis:"width",target:C.current,onChange:({width:X})=>{C.current&&b(C.current.scrollWidth>X)}}),[t]);const q=!C.current||C.current.scrollLeft===0,se=!!C.current&&C.current.scrollLeft+C.current.clientWidth>=C.current.scrollWidth,ie=_.useCallback(()=>{if(!C.current)return;const X=C.current;X.scrollTo({left:X.scrollLeft+X.clientWidth,behavior:"smooth"})},[]),ee=_.useCallback(()=>{if(!C.current)return;const X=C.current;X.scrollTo({left:X.scrollLeft-X.clientWidth,behavior:"smooth"})},[]),le=f==="contained";return r.jsxs("div",{className:W("group relative overflow-hidden",le?"rounded-xl":"-my-3 py-3"),children:[r.jsx("div",{ref:C,onPointerDown:y?$:void 0,onPointerMove:y?H:void 0,onPointerUp:y?z:void 0,onPointerCancel:y?z:void 0,onLostPointerCapture:y?z:void 0,onPointerLeave:y?J:void 0,onDragStartCapture:y?Z:void 0,onClickCapture:y?K:void 0,onAuxClickCapture:y?K:void 0,className:W("relative w-full touch-none","no-scrollbar touch-pan-y overflow-x-auto overflow-y-hidden overscroll-x-contain",y&&(g?"cursor-grabbing select-none":"cursor-grab"),!le&&(p?"scroll-px-[var(--thread-content-margin)] px-[var(--thread-content-margin)]":"scroll-px-6 px-6")),children:r.jsx("div",{className:"relative w-max",children:r.jsx(_B.Provider,{value:{isScrolling:g||x},children:r.jsxs("ul",{className:W("not-prose relative flex list-none items-stretch gap-2 px-0",c),children:[t.map((X,te)=>r.jsx("li",{ref:ce=>{L.current[te]=ce},className:W("not-prose border-token-border-default border-thin hover:border-token-border-heavy relative overflow-hidden",le?"rounded-xl":"rounded-lg",s),style:a==null?void 0:a(X),children:r.jsx(k9e,{item:X,onRenderItem:ce=>n(ce,te),onShown:i?()=>i(X,te):void 0,onClick:l?()=>l(X,te):void 0,containerRef:C})},e(X))),DL(u!=null?u:0,X=>r.jsx("li",{className:W("not-prose border-token-border-default border-thin hover:border-token-border-heavy relative overflow-hidden",le?"rounded-xl":"rounded-lg",s,o),children:r.jsx("div",{className:"loading-results-shimmer h-full w-full"})},"loading-".concat(X)))]})})})}),y&&r.jsxs(r.Fragment,{children:[r.jsx(O7,{side:"left",onClick:ee,isFullyScrolled:q,theme:f,className:d}),r.jsx(O7,{side:"right",onClick:ie,isFullyScrolled:se,theme:f,className:d})]})]})}function k9e(t){"use forget";const e=G.c(12),{item:n,onRenderItem:s,onShown:o,onClick:a,containerRef:i}=t,l=_.useRef(null),c=_.useRef(o);let d,u;e[0]!==o?(d=()=>{c.current=o},u=[o],e[0]=o,e[1]=d,e[2]=u):(d=e[1],u=e[2]),_.useEffect(d,u);let f,m;e[3]!==i?(f=()=>{if(!l.current)return;const h=new IntersectionObserver(x=>{const[v]=x;return v.isIntersecting&&c.current&&c.current()},{root:i.current,threshold:.5});return h.observe(l.current),()=>h.disconnect()},m=[i],e[3]=i,e[4]=f,e[5]=m):(f=e[4],m=e[5]),Xn(f,m);let p;e[6]!==n||e[7]!==s?(p=s(n),e[6]=n,e[7]=s,e[8]=p):p=e[8];let g;return e[9]!==a||e[10]!==p?(g=r.jsx("div",{ref:l,className:"h-full w-full overflow-hidden",onClick:a,children:p}),e[9]=a,e[10]=p,e[11]=g):g=e[11],g}function O7(t){"use forget";const e=G.c(11),{side:n,onClick:s,isFullyScrolled:o,theme:a,className:i}=t,l=a==="contained";let c;e[0]!==i||e[1]!==o||e[2]!==l||e[3]!==n?(c=W("bg-token-bg-primary hover:bg-token-bg-secondary pointer-events-none absolute top-[50%] -translate-y-1/2 py-1","transition-translate-x opacity-0 duration-150 ease-out",n==="left"?["start-0 -translate-x-full rounded-e-full",l?"ps-1.5 pe-2":"ps-1 pe-1.5"]:["end-0 translate-x-full rounded-s-full",l?"ps-2 pe-1.5":"ps-1.5 pe-1"],!o&&"delay-100 group-hover:pointer-events-auto group-hover:translate-x-0 group-hover:opacity-100",l?"h-[calc(100%-12px)]":"shadow-long",i),e[0]=i,e[1]=o,e[2]=l,e[3]=n,e[4]=c):c=e[4];let d;e[5]!==n?(d=n==="left"?r.jsx(S9e,{className:"icon-sm"}):r.jsx(C9e,{className:"icon-sm"}),e[5]=n,e[6]=d):d=e[6];let u;return e[7]!==s||e[8]!==c||e[9]!==d?(u=r.jsx("button",{onClick:s,className:c,children:d}),e[7]=s,e[8]=c,e[9]=d,e[10]=u):u=e[10],u}const E9e=({root:t=void 0,rootMargin:e="0px",threshold:n=0,onlyOnce:s=!1})=>{const[o,a]=_.useState(!1),i=_.useCallback(l=>{if(!l)return;const c=new IntersectionObserver(d=>{for(const u of d)u.isIntersecting?(a(!0),s&&l&&c.unobserve(l)):a(!1)},{root:t,rootMargin:e,threshold:n});return c.observe(l),()=>{c.unobserve(l)}},[t,e,n,s]);return[o,i]},T9e=350,M9e=150;function xB({favicon:t,heading:e,title:n,quoteHeading:s,quoteText:o,snippet:a,isContentBlocked:i,theme:l,children:c}){const[d,u]=_.useState(!1),f=_.useRef(null),m=_.useRef(null),p=_.useRef(!1),{isScrolling:g}=w9e(),h=s!=null||o!=null,[x,v]=E9e({threshold:.75}),y=_.useCallback(()=>{f.current&&clearTimeout(f.current)},[]),b=_.useCallback(()=>{m.current&&clearTimeout(m.current)},[]),C=_.useCallback(()=>{u(!1)},[]),S=_.useCallback(M=>{M.stopPropagation(),p.current=!0,b(),f.current=setTimeout(()=>{p.current&&u(!0)},T9e)},[b]),k=_.useCallback(M=>{M.stopPropagation(),p.current=!1,y(),m.current=setTimeout(()=>{C()},M9e)},[y,C]);_.useEffect(()=>{d&&b()},[d,b]),_.useEffect(()=>{g&&C()},[g,C]);const E=_.useMemo(()=>({onBlur:k,onMouseLeave:k,onMouseEnter:S,onFocus:S}),[k,S]),T=x&&d&&!g;return r.jsxs(Ul,{open:T,children:[r.jsx(vr,U(w({ref:v,asChild:!0},E),{children:c})),r.jsx($l,{children:r.jsx(Vl,U(w({side:"top",align:"start",sideOffset:4},E),{onOpenAutoFocus:M=>M.preventDefault(),onCloseAutoFocus:M=>M.preventDefault(),className:W(Az,l==="grey"&&"bg-token-bg-primary!","relative w-64 text-sm focus:outline-none"),collisionPadding:8,onPointerDown:M=>M.stopPropagation(),children:r.jsxs("div",{className:"rounded-xl px-3 py-1.5 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[t,r.jsx("span",{className:"text-token-text-secondary truncate text-xs",children:e})]}),i?r.jsx("div",{className:"mt-2",children:r.jsx(j,{id:"iGylAw",defaultMessage:"ChatGPT is unable to access the contents of this website."})}):r.jsxs(r.Fragment,{children:[n&&r.jsx("div",{className:"mt-2 line-clamp-2 leading-snug font-semibold text-ellipsis",children:n}),h&&r.jsxs("div",{className:"border-token-border-default mt-2 flex flex-col gap-1 border-s-2 ps-2 text-xs",children:[s&&r.jsx("div",{className:"text-token-link text-xs font-semibold",children:s}),o&&r.jsx("div",{className:"text-token-text-secondary line-clamp-2 overflow-hidden text-xs leading-snug text-ellipsis",children:o})]}),a&&r.jsx("div",{className:"mt-2 line-clamp-4 text-sm select-text",children:a})]})]})}))})]})}const A9e=R(()=>P(()=>import("./dch45l9yrtbjo93p.js"),__vite__mapDeps([362,1])),{loading:t=>O(t)}),I9e=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)});function pet(){"use forget";var ce,ue,me;const t=G.c(55),e=V(),n=ae(it.context$),s=ae(it.sidebarUrlTrayOpen$),o=Vh(e),a=ne(),c=ys()===Pe.Agent||n==null?void 0:n.selection,d=N9e(c),u=d>0,f=_.useRef(null),[m,p]=_.useState(!1);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{const xe=f.current;xe&&p(xe.scrollWidth>xe.clientWidth)},t[0]=g):g=t[0];const h=n==null?void 0:n.title,x=n==null?void 0:n.url;let v;if(t[1]!==c||t[2]!==h||t[3]!==x?(v=[h,x,c],t[1]=c,t[2]=h,t[3]=x,t[4]=v):v=t[4],_.useEffect(g,v),!o||!n)return null;let y,b;if(n!=null&&n.url){let xe;if(t[5]!==n.url){let pe;t[7]===Symbol.for("react.memo_cache_sentinel")?(pe=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,t[7]=pe):pe=t[7],xe=n.url.replace(pe,""),t[5]=n.url,t[6]=xe}else xe=t[6];b=xe;try{let pe;t[8]!==n.url?(pe=new URL(n.url),t[8]=n.url,t[9]=pe):pe=t[9],y=pe.host}catch(pe){}}let C;t[10]!==n.title?(C=(ce=n.title)==null?void 0:ce.trim(),t[10]=n.title,t[11]=C):C=t[11];const S=C,k=(ue=b&&b.length>0?b:n.url)!=null?ue:void 0,E=S&&S.length>0?S:k,T=!!(n!=null&&n.blocked);if(!s)return null;const A=E!=null?E:n.url;let I;t[12]!==n.base64favicon||t[13]!==A?(I=r.jsx(Hg,{base64:n.base64favicon,title:A,className:"h-4 w-4 flex-shrink-0 rounded-[4px]"}),t[12]=n.base64favicon,t[13]=A,t[14]=I):I=t[14];const N=(me=y!=null?y:k)!=null?me:n.url,L=E!=null?E:n.url;let D;t[15]!==u||t[16]!==d?(D=u?r.jsx(j,{id:"EwD8lK",defaultMessage:"Selected text ({count} words)",values:{count:d}}):null,t[15]=u,t[16]=d,t[17]=D):D=t[17];const F=u&&c!=null?c:null,$=T?"bg-[rgba(255,214,10,0.1)]":u?"bg-token-interactive-bg-accent-default":"bg-[rgba(0,0,0,0.03)] hover:bg-[rgba(0,0,0,0.08)] dark:bg-[rgba(255,255,255,0.05)] dark:hover:bg-[rgba(255,255,255,0.1)]";let H;t[18]!==$?(H=W("group flex h-[36px] w-fit max-w-[150px] min-w-0 cursor-default items-center gap-[6px] rounded-xl px-2 pe-3 transition-all",$),t[18]=$,t[19]=H):H=t[19];let z;t[20]!==n.base64favicon||t[21]!==n.url||t[22]!==E||t[23]!==T?(z=T?r.jsx(A9e,{className:"text-token-icon-status-warning block h-4 w-4 group-hover:hidden"}):r.jsx(Hg,{base64:n.base64favicon,title:E!=null?E:n.url,className:"block h-4 w-4 rounded-[4px] group-hover:hidden"}),t[20]=n.base64favicon,t[21]=n.url,t[22]=E,t[23]=T,t[24]=z):z=t[24];let K;t[25]!==a?(K=a.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),t[25]=a,t[26]=K):K=t[26];let J;t[27]===Symbol.for("react.memo_cache_sentinel")?(J=r.jsx(I9e,{className:"h-4 w-4 text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]"}),t[27]=J):J=t[27];let Z;t[28]!==K?(Z=r.jsx("button",{onClick:j9e,className:"absolute start-0 top-0 hidden group-hover:block","aria-label":K,children:J}),t[28]=K,t[29]=Z):Z=t[29];let q;t[30]!==z||t[31]!==Z?(q=r.jsxs("div",{className:"relative h-4 w-4 flex-shrink-0",children:[z,Z]}),t[30]=z,t[31]=Z,t[32]=q):q=t[32];const se=m&&!u&&"[mask-image:linear-gradient(to_right,black_85%,transparent_100%)] [-webkit-mask-image:linear-gradient(to_right,black_85%,transparent_100%)]";let ie;t[33]!==se?(ie=W("overflow-hidden text-xs whitespace-nowrap select-none",se),t[33]=se,t[34]=ie):ie=t[34];let ee;t[35]!==n.url||t[36]!==E||t[37]!==u||t[38]!==T?(ee=u&&!T?r.jsx(j,{id:"DaC6ra",defaultMessage:"Selected text"}):E?r.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:E}):r.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:n.url}),t[35]=n.url,t[36]=E,t[37]=u,t[38]=T,t[39]=ee):ee=t[39];let le;t[40]!==ie||t[41]!==ee?(le=r.jsx("span",{ref:f,className:ie,children:ee}),t[40]=ie,t[41]=ee,t[42]=le):le=t[42];let X;t[43]!==H||t[44]!==q||t[45]!==le?(X=r.jsxs("div",{className:H,children:[q,le]}),t[43]=H,t[44]=q,t[45]=le,t[46]=X):X=t[46];let te;return t[47]!==T||t[48]!==F||t[49]!==X||t[50]!==I||t[51]!==N||t[52]!==L||t[53]!==D?(te=r.jsx("div",{className:"relative px-3 pt-3",children:r.jsx(xB,{favicon:I,heading:N,title:L,quoteHeading:D,quoteText:F,snippet:null,isContentBlocked:T,theme:"grey",children:X})}),t[47]=T,t[48]=F,t[49]=X,t[50]=I,t[51]=N,t[52]=L,t[53]=D,t[54]=te):te=t[54],te}function j9e(){var t;(t=Z8())==null||t.triggerProductEvent("removeTabContext"),o4(!1)}function N9e(t){if(!t)return 0;const e=t.trim();if(!e)return 0;if(typeof Intl.Segmenter=="function")try{const n=new Intl.Segmenter(void 0,{granularity:"word"}).segment(e);return Array.from(n).reduce((s,o)=>s+(o.isWordLike?1:0),0)}catch(n){}return e.split(/\s+/).filter(Boolean).length}const yB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.338 3.08492C15.0406 3.08955 15.7151 3.28724 16.214 3.78609C16.7128 4.28495 16.9105 4.95949 16.9151 5.66207C16.9197 6.36056 16.7358 7.13467 16.419 7.92672C16.153 8.59182 15.7832 9.291 15.3243 9.99996C15.7832 10.7089 16.153 11.4081 16.419 12.0732C16.7358 12.8652 16.9197 13.6394 16.9151 14.3379C16.9105 15.0404 16.7128 15.715 16.214 16.2138C15.7151 16.7127 15.0406 16.9104 14.338 16.915C13.6395 16.9196 12.8654 16.7357 12.0733 16.4189C11.4082 16.1528 10.709 15.783 10.0001 15.3242C9.29112 15.783 8.59194 16.1528 7.92684 16.4189C7.1348 16.7357 6.36069 16.9196 5.66219 16.915C4.95961 16.9104 4.28507 16.7127 3.78622 16.2138C3.28736 15.715 3.08967 15.0404 3.08504 14.3379C3.08049 13.6394 3.26432 12.8652 3.58114 12.0732C3.84715 11.4082 4.21616 10.7088 4.67489 9.99996C4.21616 9.29115 3.84715 8.59168 3.58114 7.92672C3.26432 7.13467 3.08049 6.36056 3.08504 5.66207C3.08967 4.95949 3.28736 4.28495 3.78622 3.78609C4.28507 3.28724 4.95961 3.08955 5.66219 3.08492C6.36069 3.08037 7.1348 3.2642 7.92684 3.58102C8.5918 3.84703 9.29127 4.21603 10.0001 4.67477C10.7089 4.21603 11.4084 3.84703 12.0733 3.58102C12.8654 3.2642 13.6395 3.08037 14.338 3.08492ZM5.5118 11.1728C5.22609 11.6559 4.99351 12.1249 4.81649 12.5673C4.53951 13.2598 4.41207 13.8575 4.41512 14.3291C4.4182 14.7967 4.54582 15.0926 4.72664 15.2734C4.90747 15.4542 5.20337 15.5818 5.67098 15.5849C6.14256 15.588 6.74026 15.4605 7.4327 15.1836C7.8751 15.0066 8.34325 14.7729 8.82625 14.4873C8.23208 14.0242 7.64066 13.5038 7.06844 12.9316C6.49588 12.359 5.97512 11.7674 5.5118 11.1728ZM14.4874 11.1728C14.0242 11.7672 13.5041 12.3592 12.9317 12.9316C12.3593 13.504 11.7673 14.024 11.1729 14.4873C11.6562 14.7731 12.1248 15.0065 12.5675 15.1836C13.2599 15.4605 13.8576 15.588 14.3292 15.5849C14.7968 15.5818 15.0927 15.4542 15.2735 15.2734C15.4544 15.0926 15.582 14.7967 15.585 14.3291C15.5881 13.8575 15.4607 13.2598 15.1837 12.5673C15.0066 12.1247 14.7732 11.6561 14.4874 11.1728ZM10.0001 6.29C9.33643 6.77801 8.66365 7.35398 8.00887 8.00875C7.3541 8.66352 6.77813 9.33631 6.29012 9.99996C6.77813 10.6636 7.3541 11.3364 8.00887 11.9912C8.66349 12.6458 9.33658 13.221 10.0001 13.7089C10.6636 13.221 11.3367 12.6458 11.9913 11.9912C12.6459 11.3366 13.2211 10.6635 13.7091 9.99996C13.2211 9.33646 12.6459 8.66337 11.9913 8.00875C11.3365 7.35398 10.6637 6.77801 10.0001 6.29ZM5.67098 4.415C5.20337 4.41808 4.90747 4.54569 4.72664 4.72652C4.54582 4.90735 4.4182 5.20325 4.41512 5.67086C4.41207 6.14244 4.53951 6.74014 4.81649 7.43258C4.99342 7.87485 5.22629 8.34327 5.5118 8.82613C5.975 8.23179 6.49608 7.64069 7.06844 7.06832C7.64081 6.49595 8.23192 5.97488 8.82625 5.51168C8.3434 5.22617 7.87497 4.9933 7.4327 4.81637C6.74026 4.53939 6.14256 4.41195 5.67098 4.415ZM14.3292 4.415C13.8576 4.41195 13.2599 4.53939 12.5675 4.81637C12.125 4.99338 11.656 5.22597 11.1729 5.51168C11.7675 5.97499 12.3592 6.49576 12.9317 7.06832C13.5039 7.64053 14.0243 8.23195 14.4874 8.82613C14.773 8.34312 15.0067 7.87498 15.1837 7.43258C15.4607 6.74014 15.5881 6.14244 15.585 5.67086C15.582 5.20325 15.4544 4.90735 15.2735 4.72652C15.0927 4.54569 14.7968 4.41808 14.3292 4.415Z",fill:"currentColor"})),vB=Object.freeze(Object.defineProperty({__proto__:null,default:yB},Symbol.toStringTag,{value:"Module"})),l4=t=>_.createElement("svg",w({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M12.1338 5.94433C12.3919 5.77382 12.7434 5.80202 12.9707 6.02929C13.1979 6.25656 13.2261 6.60807 13.0556 6.8662L12.9707 6.9707L8.47067 11.4707C8.21097 11.7304 7.78896 11.7304 7.52926 11.4707L3.02926 6.9707L2.9443 6.8662C2.77379 6.60807 2.80199 6.25656 3.02926 6.02929C3.25653 5.80202 3.60804 5.77382 3.86617 5.94433L3.97067 6.02929L7.99996 10.0586L12.0293 6.02929L12.1338 5.94433Z"})),Nr=Object.freeze(Object.defineProperty({__proto__:null,default:l4},Symbol.toStringTag,{value:"Module"})),Ly=t=>_.createElement("svg",w({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M11.1152 3.91503C11.3868 3.73594 11.756 3.7658 11.9951 4.00488C12.2341 4.24395 12.264 4.61309 12.0849 4.88476L11.9951 4.99511L8.99018 7.99999L11.9951 11.0049L12.0849 11.1152C12.264 11.3869 12.2341 11.756 11.9951 11.9951C11.756 12.2342 11.3868 12.2641 11.1152 12.085L11.0048 11.9951L7.99995 8.99023L4.99506 11.9951C4.7217 12.2685 4.2782 12.2685 4.00483 11.9951C3.73146 11.7217 3.73146 11.2782 4.00483 11.0049L7.00971 7.99999L4.00483 4.99511L3.91499 4.88476C3.73589 4.61309 3.76575 4.24395 4.00483 4.00488C4.24391 3.7658 4.61305 3.73594 4.88471 3.91503L4.99506 4.00488L7.99995 7.00976L11.0048 4.00488L11.1152 3.91503Z"})),c4=Object.freeze(Object.defineProperty({__proto__:null,default:Ly},Symbol.toStringTag,{value:"Module"})),Z1=t=>{"use forget";const e=G.c(41),{icon:n,removable:s,label:o,content:a,dropdownContent:i,onRemove:l,onOpenChange:c,onCloseAutoFocus:d}=t,u=ne();let f;e[0]!==u||e[1]!==o?(f=u.formatMessage({id:"giCR14",defaultMessage:"{selectedMode}, click to remove"},{selectedMode:o}),e[0]=u,e[1]=o,e[2]=f):f=e[2];const m=f,p=P9e;let g;e[3]!==l?(g=T=>{const M=T.changedTouches[0];T.target===T.currentTarget&&T.currentTarget.contains(document.elementFromPoint(M.clientX,M.clientY))&&(T.preventDefault(),l==null||l(T))},e[3]=l,e[4]=g):g=e[4];let h;e[5]!==l||e[6]!==g?(h={onClick:l,onTouchStart:R9e,onTouchEnd:g},e[5]=l,e[6]=g,e[7]=h):h=e[7];const x=h;let v;e[8]!==n?(v=typeof n=="function"?r.jsx(n,{}):n,e[8]=n,e[9]=v):v=e[9];let y;e[10]!==v?(y=r.jsx("div",{className:"__composer-pill-icon",inert:!0,children:v}),e[10]=v,e[11]=y):y=e[11];const b=y,C=a!=null?a:o;let S;e[12]!==C?(S=r.jsx("span",{className:"max-w-40 truncate [[data-collapse-labels]_&]:sr-only",ref:p,children:C}),e[12]=C,e[13]=S):S=e[13];const k=S;if(i){let T;e[14]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(l4,{className:"icon-sm -me-0.5 h-3.5 w-3.5",inert:!0}),e[14]=T):T=e[14];let M;e[15]!==b||e[16]!==k?(M=r.jsxs(Y.BasicTrigger,{className:"__composer-pill group/pill",children:[b,k,T]}),e[15]=b,e[16]=k,e[17]=M):M=e[17];let A;e[18]!==i||e[19]!==d?(A=r.jsx(Y.Portal,{children:r.jsx(Y.Content,{size:"auto",align:"start",alignOffset:-8,onCloseAutoFocus:d,children:i})}),e[18]=i,e[19]=d,e[20]=A):A=e[20];let I;e[21]!==c||e[22]!==A||e[23]!==M?(I=r.jsxs(Y.Root,{modal:!1,onOpenChange:c,children:[M,A]}),e[21]=c,e[22]=A,e[23]=M,e[24]=I):I=e[24];const N=I;if(s){let L;e[25]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx(Ly,{className:"icon-sm",inert:!0}),e[25]=L):L=e[25];let D;e[26]!==x||e[27]!==m?(D=r.jsx("button",U(w({type:"button",className:"__composer-pill-remove","aria-label":m},x),{children:L})),e[26]=x,e[27]=m,e[28]=D):D=e[28];let F;return e[29]!==N||e[30]!==D?(F=r.jsxs("div",{className:"__composer-pill-composite group relative",children:[D,N]}),e[29]=N,e[30]=D,e[31]=F):F=e[31],F}return N}if(s){let T;e[32]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx("div",{className:"__composer-pill-remove",inert:!0,children:r.jsx(Ly,{className:"icon-sm"})}),e[32]=T):T=e[32];let M;return e[33]!==b||e[34]!==x||e[35]!==m||e[36]!==k?(M=r.jsxs("button",U(w({type:"button",className:"__composer-pill group","aria-label":m},x),{children:[b,k,T]})),e[33]=b,e[34]=x,e[35]=m,e[36]=k,e[37]=M):M=e[37],M}let E;return e[38]!==b||e[39]!==k?(E=r.jsxs("div",{className:"__composer-pill",children:[b,k]}),e[38]=b,e[39]=k,e[40]=E):E=e[40],E};function P9e(t){t!=null&&t.parentElement&&t.textContent&&t.scrollWidth>t.clientWidth&&(t.parentElement.title=t.textContent)}function R9e(t){t.preventDefault()}const get=t=>{"use forget";const e=G.c(7),{label:n,tooltipLabel:s,onRemoveModel:o}=t,a=s==null;let i;e[0]!==n||e[1]!==o?(i=r.jsx(Z1,{icon:yB,label:n,removable:!0,onRemove:o}),e[0]=n,e[1]=o,e[2]=i):i=e[2];let l;return e[3]!==a||e[4]!==i||e[5]!==s?(l=r.jsx(_t,{label:s,disabled:a,children:i}),e[3]=a,e[4]=i,e[5]=s,e[6]=l):l=e[6],l},L9e=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)}),O9e=R(()=>P(()=>import("./h48j4g76f726xzx4.js"),__vite__mapDeps([263,1])),{loading:t=>O(t)});function D9e({repoName:t,onClose:e}){const n=ne();return r.jsxs(Mt,{isOpen:!0,onClose:e,shouldIgnoreClickOutside:!0,testId:"modal-github-indexing",type:"success",size:"custom",className:"max-w-[420px]",headerClassName:"pt-0 pb-0 pe-2",showCloseButton:!0,hideSeparator:!0,title:r.jsx("span",{}),children:[r.jsx("div",{className:"mt-0 mb-4 flex justify-center",children:r.jsx("div",{className:"bg-tertiary border-token-border-subtle rounded-lg border p-3",children:r.jsx(O9e,{className:"h-10 w-10"})})}),r.jsx("h2",{className:"mb-4 px-4 text-center text-xl font-semibold",children:n.formatMessage({id:"ejqREp",defaultMessage:"{repoName} is not indexed yet"},{repoName:t})}),r.jsx("p",{className:"text-token-text-secondary mb-6 px-6 text-center text-sm leading-relaxed",children:n.formatMessage({id:"KkmieM",defaultMessage:"This repository can't be accessed by ChatGPT until it's indexed by GitHub. You can trigger indexing by searching the repository's code on GitHub. After about 510 minutes, you can use it in ChatGPT."})}),r.jsxs(_e,{className:"w-full",size:"large",onClick:()=>{const s="https://github.com/search?q=repo:".concat(t,"&type=code");window.open(s,"_blank"),e()},children:[n.formatMessage({id:"yUeuLL",defaultMessage:"Trigger indexing on GitHub"}),r.jsx(L9e,{className:"icon-sm ms-2 inline-block"})]})]})}const F9e=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)}),D7=R(()=>P(()=>import("./kspsmo2l8jg7uqdj.js"),__vite__mapDeps([26,1])),{loading:t=>O(t)}),B9e=({items:t,searchTerm:e,setSearchTerm:n,selectedItems:s,searchPlaceholder:o,handleSelectItem:a,showSelectAllRepos:i,loading:l,onEndScroll:c,maxRepos:d,contentRef:u,subContentRef:f})=>{var b;const m=Iz("installations/select_target"),p=_.useRef(null),g=_.useRef(null),h=i&&(s==null?void 0:s.includes("$all_accessible_repos")),x=(b=s==null?void 0:s.filter(C=>C!=="$all_accessible_repos").length)!=null?b:0,v=d!==void 0&&x>=d,y=d===1;return _.useEffect(()=>{requestAnimationFrame(()=>{var C;(C=p.current)==null||C.focus()})},[]),_.useEffect(()=>{const C=T=>{p.current&&document.activeElement!==p.current&&(J8(T)||T.key==="Enter"||T.ctrlKey||T.metaKey||T.key.length!==1&&!X8(T)||(T.stopPropagation(),p.current.focus()))},S=T=>{if(T)return T.addEventListener("keydown",C),()=>{T.removeEventListener("keydown",C)}},k=u&&S(u==null?void 0:u.current),E=f&&S(f==null?void 0:f.current);return()=>{k==null||k(),E==null||E()}},[]),_.useEffect(()=>{var E,T;const C=g.current;if(!C)return;const S=(T=(E=f==null?void 0:f.current)!=null?E:u==null?void 0:u.current)!=null?T:null,k=new IntersectionObserver(M=>{M[0].isIntersecting&&(c==null||c())},S?{root:S}:void 0);return k.observe(C),()=>k.disconnect()},[u,f,c]),r.jsxs(r.Fragment,{children:[r.jsx(Y.InputItem,{selectAllOnFocus:!1,border:!1,ref:p,value:e,onChange:C=>n(C.target.value),placeholder:o,name:"github-submenu-dropdown-input"}),r.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[t==null?void 0:t.map(C=>{const S=s==null?void 0:s.includes(C.name),k=d!==void 0&&!S&&v&&!y;return r.jsx(Y.Item,{onClick:E=>{E.preventDefault(),a(C)},secondary:r.jsx("span",{className:"line-clamp-2",children:C.description}),trailing:S&&D7,className:W((k||!C.indexed)&&"text-token-text-tertiary opacity-50"),disabled:k,children:r.jsx("div",{className:"truncate",children:C.name})},C.name)}),r.jsx("div",{className:"w-auto",ref:g}),!l&&t.length===0&&r.jsx(Y.Item,{className:"text-token-text-tertiary pointer-events-none",children:r.jsx(j,{id:"LRA3gT",defaultMessage:"No repositories found"})}),l&&r.jsx("div",{className:"text-token-text-tertiary mx-1.5 px-2 py-2.5 text-sm",role:"alert","aria-busy":"true",children:r.jsx(j,{id:"HvTGRC",defaultMessage:"Loading..."})})]}),i&&d===void 0&&r.jsx(Y.Item,{onClick:C=>{C.preventDefault(),a({name:"$all_accessible_repos"}),h&&!e&&U9e(C.currentTarget)},secondary:r.jsx(j,{id:"EhTGqu",defaultMessage:"Select all repositories accessible to ChatGPT"}),trailing:h&&D7,children:r.jsx(j,{id:"pJnTxe",defaultMessage:"All Repositories"})}),r.jsx(Y.Separator,{}),r.jsx(Y.Item,{onClick:()=>{window.open(m,"_blank")},trailing:r.jsx(F9e,{className:"icon-sm"}),children:r.jsx(j,{id:"ICVOEb",defaultMessage:"Configure Repositories"})}),r.jsx(Y.Separator,{}),r.jsxs("div",{className:"text-token-text-tertiary mx-1.5 px-2.5 py-2 text-xs",children:[d&&r.jsx(j,{id:"k/9Fjt",defaultMessage:"Choose up to {maxRepos} {maxRepos, plural, one {repository} other {repositories}}. To search more, use deep research.",values:{maxRepos:d}}),r.jsx(j,{id:"4Z21ID",defaultMessage:"Not seeing a repository? {helpLink}",values:{helpLink:r.jsx(r.Fragment,{children:r.jsx("a",{href:"https://help.openai.com/en/articles/11145903-chatgpt-connectors",target:"_blank",rel:"noopener noreferrer",className:"underline",children:r.jsx(j,{id:"sVuhcw",defaultMessage:"Learn more"})})})}})]})]})};function U9e(t){const e=t.closest("[role=menuitem]");if(!e)return;let n=e.nextElementSibling;for(;n&&n.getAttribute("role")!=="menuitem";)n=n.nextElementSibling;if(!n)for(n=e.previousElementSibling;n&&n.getAttribute("role")!=="menuitem";)n=n.previousElementSibling;n instanceof HTMLElement&&n.focus()}const $9e=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)}),V9e=30,H9e=25,G9e=t=>{"use forget";const e=G.c(11),{enabled:n,debouncedSearchTerm:s,linkId:o,limit:a}=t,i=n===void 0?!0:n,l=a===void 0?20:a;let c;e[0]!==s||e[1]!==o?(c=["github-repos",s,o],e[0]=s,e[1]=o,e[2]=c):c=e[2];let d;e[3]!==s||e[4]!==l||e[5]!==o?(d=async f=>{const{pageParam:m}=f,p=m===void 0?null:m;return await ge.safePost("/aip/connectors/github/search_repos",{requestBody:{query:s,limit:l,next_token:p,link_id:o}})},e[3]=s,e[4]=l,e[5]=o,e[6]=d):d=e[6];let u;return e[7]!==i||e[8]!==c||e[9]!==d?(u={queryKey:c,enabled:i,queryFn:d,getNextPageParam:q9e,initialPageParam:null,retry:1},e[7]=i,e[8]=c,e[9]=d,e[10]=u):u=e[10],Tf(u)};function bB(t){"use forget";var Ce,fe;const e=G.c(57),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:a,githubSyncEnabled:i,enabled:l,onSelectAllRepos:c}=t,d=s===void 0?!1:s,u=i===void 0?!1:i,f=l===void 0?!0:l,{selectedRepos:m,setSelectedRepos:p}=$N(n);let g;e[0]!==m?(g=VN(m),e[0]=m,e[1]=g):g=e[1];const h=g,[x]=_.useState(m),[v,y]=_.useState(""),b=c2e(v,300),{maxRepos:C}=UN(),[S,k]=_.useState(null),E=f&&!!o,T=o!=null?o:"";let M;e[2]!==b||e[3]!==E||e[4]!==T?(M={enabled:E,debouncedSearchTerm:b,linkId:T},e[2]=b,e[3]=E,e[4]=T,e[5]=M):M=e[5];const{data:A,isFetching:I,isFetchingNextPage:N,isError:L,fetchNextPage:D}=G9e(M),F=f&&u&&!!(a!=null&&a.length),$=a!=null?a:"";let H;e[6]!==F||e[7]!==$?(H={enabled:F,connectionInstanceId:$},e[6]=F,e[7]=$,e[8]=H):H=e[8];const{data:z,isFetching:K}=FN(H);let J;e:{if(!(z!=null&&z.sync_enabled_objects)){let ve;e[9]===Symbol.for("react.memo_cache_sentinel")?(ve=[],e[9]=ve):ve=e[9],J=ve;break e}let re;e[10]!==z.sync_enabled_objects?(re=z.sync_enabled_objects.filter(z9e).map(W9e),e[10]=z.sync_enabled_objects,e[11]=re):re=e[11],J=re}const Z=J;let q;if(e[12]!==b||e[13]!==u||e[14]!==x||e[15]!==A||e[16]!==Z){const re=new Map;b.length===0&&((Ce=x.selectedRepos)==null||Ce.forEach(ve=>{re.set(ve,{repository_full_name:ve,description:null,is_code_search_indexed:!0,synced:!1})})),u&&Z&&Z.forEach(ve=>{var Me;re.set(ve.repository_full_name,{repository_full_name:ve.repository_full_name,description:(Me=ve.description)!=null?Me:null,is_code_search_indexed:!0,synced:!0})}),A&&A.pages.forEach(ve=>{ve.repos.forEach(Me=>{var Le,Ae,He;const $e=re.get(Me.repository_full_name);re.set(Me.repository_full_name,{repository_full_name:Me.repository_full_name,description:(Le=Me.description)!=null?Le:null,is_code_search_indexed:(Ae=Me.is_code_search_indexed)!=null?Ae:void 0,synced:(He=$e==null?void 0:$e.synced)!=null?He:!1})})}),b.length>0&&re.forEach(ve=>{var Me;!ve.repository_full_name.toLowerCase().includes(b.toLowerCase())&&!((Me=ve.description)!=null&&Me.toLowerCase().includes(b.toLowerCase()))&&re.delete(ve.repository_full_name)}),q=Array.from(re.values()),e[12]=b,e[13]=u,e[14]=x,e[15]=A,e[16]=Z,e[17]=q}else q=e[17];const se=q;let ie;e[18]!==u||e[19]!==se?(ie=se.map(re=>{const ve=!!re.is_code_search_indexed||re.synced&&u;return{name:re.repository_full_name,description:re.description,indexed:ve,synced:re.synced}}),e[18]=u,e[19]=se,e[20]=ie):ie=e[20];const ee=ie;let le;e[21]!==C||e[22]!==c||e[23]!==m.selectedAllRepos||e[24]!==m.selectedRepos||e[25]!==p?(le=re=>{var Ae,He,Qe,ht,at;const ve=re.name;if(!re.indexed&&!re.synced){k(re.name);return}if(ve==="$all_accessible_repos"){const vt=!m.selectedAllRepos;p({selectedRepos:[],selectedAllRepos:vt}),vt&&(c==null||c());return}const Me=(Ae=m.selectedRepos)==null?void 0:Ae.includes(ve),$e=(Qe=(He=m.selectedRepos)==null?void 0:He.length)!=null?Qe:0;if(C!==void 0&&C>1&&!Me&&$e>=C)return;if(C!==void 0&&C===1&&!Me){p({selectedRepos:[ve],selectedAllRepos:!1});return}const Le=Me?((ht=m.selectedRepos)!=null?ht:[]).filter(vt=>vt!==ve):[...(at=m.selectedRepos)!=null?at:[],ve];p({selectedRepos:Le,selectedAllRepos:!1})},e[21]=C,e[22]=c,e[23]=m.selectedAllRepos,e[24]=m.selectedRepos,e[25]=p,e[26]=le):le=e[26];const X=le;let te;e[27]!==m.selectedRepos?(te=(fe=m.selectedRepos)!=null?fe:[],e[27]=m.selectedRepos,e[28]=te):te=e[28];let ce;e[29]!==m.selectedAllRepos?(ce=m.selectedAllRepos?["$all_accessible_repos"]:[],e[29]=m.selectedAllRepos,e[30]=ce):ce=e[30];let ue;e[31]!==te||e[32]!==ce?(ue=[...te,...ce],e[31]=te,e[32]=ce,e[33]=ue):ue=e[33];const me=ue,xe=_.useRef(0);let pe;e[34]!==f||e[35]!==D?(pe=()=>{f&&xe.current<1&&D()},e[34]=f,e[35]=D,e[36]=pe):pe=e[36];const Ee=pe;let Se;e[37]===Symbol.for("react.memo_cache_sentinel")?(Se=()=>{xe.current=0},e[37]=Se):Se=e[37];let Te;e[38]!==b?(Te=[b],e[38]=b,e[39]=Te):Te=e[39],_.useEffect(Se,Te);let Ne,De;e[40]!==N||e[41]!==L?(Ne=()=>{L?xe.current=xe.current+1:!N&&!L&&(xe.current=0)},De=[N,L],e[40]=N,e[41]=L,e[42]=Ne,e[43]=De):(Ne=e[42],De=e[43]),_.useEffect(Ne,De);const de=f&&I||N||K,oe=f&&(u||!!o);let we;return e[44]!==d||e[45]!==ee||e[46]!==X||e[47]!==h||e[48]!==S||e[49]!==de||e[50]!==C||e[51]!==Ee||e[52]!==v||e[53]!==me||e[54]!==m||e[55]!==oe?(we={isAvailable:oe,allowSelectAllRepos:d,dropdownItems:ee,handleSelectItem:X,indexModalRepo:S,setIndexModalRepo:k,loading:de,maxRepos:C,onEndScroll:Ee,searchTerm:v,setSearchTerm:y,selectedItemNames:me,selectedRepos:m,hasRepos:h},e[44]=d,e[45]=ee,e[46]=X,e[47]=h,e[48]=S,e[49]=de,e[50]=C,e[51]=Ee,e[52]=v,e[53]=me,e[54]=m,e[55]=oe,e[56]=we):we=e[56],we}function W9e(t){var e;return{repository_full_name:t.object_name,description:(e=t.object_description)!=null?e:null}}function z9e(t){return t.object_type==="repository"&&t.object_name}function d4(t){"use forget";const e=G.c(23),{state:n,searchPlaceholder:s,notIndexedLabel:o,contentRef:a,subContentRef:i}=t;let l;if(e[0]!==o||e[1]!==n.dropdownItems){let m;e[3]!==o?(m=p=>U(w({},p),{description:!p.indexed&&!p.synced?o:p.description}),e[3]=o,e[4]=m):m=e[4],l=n.dropdownItems.map(m),e[0]=o,e[1]=n.dropdownItems,e[2]=l}else l=e[2];const c=l;let d;e[5]!==n?(d=n.indexModalRepo&&r.jsx(D9e,{repoName:n.indexModalRepo,onClose:()=>n.setIndexModalRepo(null)}),e[5]=n,e[6]=d):d=e[6];let u;e[7]!==a||e[8]!==c||e[9]!==s||e[10]!==n.allowSelectAllRepos||e[11]!==n.handleSelectItem||e[12]!==n.loading||e[13]!==n.maxRepos||e[14]!==n.onEndScroll||e[15]!==n.searchTerm||e[16]!==n.selectedItemNames||e[17]!==n.setSearchTerm||e[18]!==i?(u=r.jsx(B9e,{items:c,searchTerm:n.searchTerm,setSearchTerm:n.setSearchTerm,selectedItems:n.selectedItemNames,searchPlaceholder:s,handleSelectItem:n.handleSelectItem,showSelectAllRepos:n.allowSelectAllRepos,loading:n.loading,onEndScroll:n.onEndScroll,maxRepos:n.maxRepos,contentRef:a,subContentRef:i}),e[7]=a,e[8]=c,e[9]=s,e[10]=n.allowSelectAllRepos,e[11]=n.handleSelectItem,e[12]=n.loading,e[13]=n.maxRepos,e[14]=n.onEndScroll,e[15]=n.searchTerm,e[16]=n.selectedItemNames,e[17]=n.setSearchTerm,e[18]=i,e[19]=u):u=e[19];let f;return e[20]!==d||e[21]!==u?(f=r.jsxs(r.Fragment,{children:[d,u]}),e[20]=d,e[21]=u,e[22]=f):f=e[22],f}function het(t){"use forget";var F,$,H,z;const e=G.c(33),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:a,githubSyncEnabled:i,contentRef:l}=t,c=s===void 0?!1:s,d=i===void 0?!1:i,u=ne(),f=_.useRef(null),{addSource:m}=La(n);let p;e[0]!==m?(p=()=>{m(bt.GITHUB_CONNECTOR)},e[0]=m,e[1]=p):p=e[1];let g;e[2]!==c||e[3]!==n||e[4]!==d||e[5]!==o||e[6]!==a||e[7]!==p?(g={clientThreadId:n,allowSelectAllRepos:c,linkId:o,syncConnectionId:a,githubSyncEnabled:d,enabled:!0,onSelectAllRepos:p},e[2]=c,e[3]=n,e[4]=d,e[5]=o,e[6]=a,e[7]=p,e[8]=g):g=e[8];const h=bB(g),x=h.hasRepos,[v,y]=_.useState(!x);let b,C;e[9]!==x?(b=()=>{x||y(!0)},C=[x],e[9]=x,e[10]=b,e[11]=C):(b=e[10],C=e[11]),_.useEffect(b,C);let S;e:{if(($=(F=h.selectedRepos)==null?void 0:F.selectedRepos)!=null&&$.length&&((z=(H=h.selectedRepos)==null?void 0:H.selectedRepos)==null?void 0:z.length)>=1){const K=h.selectedRepos.selectedRepos;let J=K[0];if(J.length>V9e){const q=(H9e-3)/2;J=J.slice(0,Math.floor(q))+"..."+J.slice(Math.floor(-q))}const Z=K.length-1;S=Z>0?"".concat(J," +").concat(Z):J;break e}S=void 0}const k=S;if(!h.isAvailable)return null;const E=!x||v;let T;e[12]!==x?(T=K=>{x&&y(K)},e[12]=x,e[13]=T):T=e[13];let M;e[14]!==u||e[15]!==k?(M=k!=null?k:u.formatMessage({id:"sDCihQ",defaultMessage:"Repositories"}),e[14]=u,e[15]=k,e[16]=M):M=e[16];let A;e[17]!==M?(A=r.jsx(Y.SubMenuTrigger,{className:"ps-4",icon:$9e,children:M}),e[17]=M,e[18]=A):A=e[18];let I;e[19]!==u?(I=u.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[19]=u,e[20]=I):I=e[20];let N;e[21]!==u?(N=u.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[21]=u,e[22]=N):N=e[22];let L;e[23]!==l||e[24]!==h||e[25]!==I||e[26]!==N?(L=r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{ref:f,children:r.jsx(d4,{state:h,searchPlaceholder:I,notIndexedLabel:N,contentRef:l,subContentRef:f})})}),e[23]=l,e[24]=h,e[25]=I,e[26]=N,e[27]=L):L=e[27];let D;return e[28]!==A||e[29]!==L||e[30]!==E||e[31]!==T?(D=r.jsxs(Y.Sub,{open:E,onOpenChange:T,children:[A,L]}),e[28]=A,e[29]=L,e[30]=E,e[31]=T,e[32]=D):D=e[32],D}function q9e(t){var e;return(e=t.next_token)!=null?e:void 0}const Y9e=R(()=>P(()=>Promise.resolve().then(()=>gm),void 0),{loading:t=>O(t)}),th="connector:".concat(eM),Z9e=t=>{"use forget";const e=G.c(16),{clientThreadId:n,activeConnectorSystemHints:s,githubMenuState:o,githubLabels:a}=t,i=ne(),l=nv(),c=_.useRef(null),d=_.useRef(null);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(Y9e,{}),e[0]=u):u=e[0];let f;e[1]!==s.length||e[2]!==i?(f=i.formatMessage({id:"composer.apps.multiple",defaultMessage:"{count} apps"},{count:s.length}),e[1]=s.length,e[2]=i,e[3]=f):f=e[3];let m;e[4]!==s||e[5]!==n||e[6]!==a||e[7]!==o||e[8]!==i||e[9]!==l?(m=s.map(h=>{var v,y,b,C;return h.systemHint===th&&(o!=null&&o.isAvailable)?r.jsxs(Y.Sub,{children:[r.jsx(Y.SubMenuTrigger,{icon:r.jsx(gl,{hint:h,isNextToLabel:!0}),label:(v=h.actionLabel)!=null?v:h.name,trailing:r.jsx(Y.RadioItemCheck,{}),highlightTrailing:r.jsx("button",{type:"button",className:"text-token-text-tertiary hover:bg-tertiary hover:text-token-text-secondary flex h-6 w-6 items-center justify-center rounded transition","aria-label":i.formatMessage({id:"wpLHSw",defaultMessage:"Remove {connector}"},{connector:(y=h.actionLabel)!=null?y:h.name}),onClick:S=>{S.preventDefault(),S.stopPropagation(),l(th,{analyticsMetadata:{clientThreadId:n}})}}),onSelect:K9e,children:r.jsx(Ry,{systemHint:h})}),r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{ref:d,children:r.jsx(d4,{state:o,searchPlaceholder:a.searchPlaceholder,notIndexedLabel:a.notIndexedLabel,contentRef:c,subContentRef:d})})})]},h.systemHint):r.jsx(Y.RadioGroup,{value:(b=h.systemHint)!=null?b:void 0,onValueChange:S=>{l(S,{analyticsMetadata:{clientThreadId:n}})},children:r.jsx(Y.RadioItem,{value:h.systemHint,color:"default",icon:r.jsx(gl,{hint:h,isNextToLabel:!0}),label:(C=h.actionLabel)!=null?C:h.name,trailing:r.jsx(Y.RadioItemCheck,{}),onSelect:Q9e,children:r.jsx(Ry,{systemHint:h})},h.systemHint)},h.systemHint)}),e[4]=s,e[5]=n,e[6]=a,e[7]=o,e[8]=i,e[9]=l,e[10]=m):m=e[10];let p;e[11]!==m?(p=r.jsx("div",{className:"min-w-48",ref:c,children:m}),e[11]=m,e[12]=p):p=e[12];let g;return e[13]!==f||e[14]!==p?(g=r.jsx(Z1,{icon:u,label:f,removable:!1,dropdownContent:p}),e[13]=f,e[14]=p,e[15]=g):g=e[15],g},_et=t=>{"use forget";var q,se,ie;const e=G.c(43),{clientThreadId:n,activeSystemHint:s,activeSystemHintType:o,activeConnectorSystemHints:a,locked:i,onRemoveSystemHint:l}=t,c=V(),d=ne(),u=nv(),{connectorLinks:f}=Uf(),m=YT();let p;e[0]!==c||e[1]!==m?(p=()=>{if(m)return KT(c).data},e[0]=c,e[1]=m,e[2]=p):p=e[2];const g=ae(p);let h;e[3]!==(g==null?void 0:g.connection_statuses)?(h=g==null?void 0:g.connection_statuses.find(J9e),e[3]=g==null?void 0:g.connection_statuses,e[4]=h):h=e[4];const x=h;let v;e[5]!==f?(v=(se=(q=f.get(eM))==null?void 0:q[0])==null?void 0:se.id,e[5]=f,e[6]=v):v=e[6];const y=v,b=x==null?void 0:x.user_connection_details.connection_instance_id,C=!!(m&&b);let S;e[7]!==a?(S=a.some(X9e),e[7]=a,e[8]=S):S=e[8];const k=S,E=C?b:void 0;let T;e[9]!==n||e[10]!==y||e[11]!==C||e[12]!==k||e[13]!==E?(T={clientThreadId:n,allowSelectAllRepos:!1,linkId:y,syncConnectionId:E,githubSyncEnabled:C,enabled:k},e[9]=n,e[10]=y,e[11]=C,e[12]=k,e[13]=E,e[14]=T):T=e[14];const M=bB(T);let A;e[15]!==d?(A=d.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[15]=d,e[16]=A):A=e[16];let I;e[17]!==d?(I=d.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[17]=d,e[18]=I):I=e[18];let N;e[19]!==A||e[20]!==I?(N={searchPlaceholder:A,notIndexedLabel:I},e[19]=A,e[20]=I,e[21]=N):N=e[21];const L=N,D=_.useRef(null);let F,$=s,H=l;if(o&&sv(o)){if((a==null?void 0:a.length)===0)return null;if((a==null?void 0:a.length)===1){$=a[0];let ee;if(e[22]!==a[0]||e[23]!==n||e[24]!==u?(ee=()=>u(a[0].systemHint,{analyticsMetadata:{clientThreadId:n}}),e[22]=a[0],e[23]=n,e[24]=u,e[25]=ee):ee=e[25],H=ee,$.systemHint===th&&M.isAvailable){let le;e[26]!==L.notIndexedLabel||e[27]!==L.searchPlaceholder||e[28]!==M?(le=r.jsx("div",{ref:D,children:r.jsx(d4,{state:M,searchPlaceholder:L.searchPlaceholder,notIndexedLabel:L.notIndexedLabel,contentRef:D})}),e[26]=L.notIndexedLabel,e[27]=L.searchPlaceholder,e[28]=M,e[29]=le):le=e[29],F=le}}else{let ee;return e[30]!==a||e[31]!==n||e[32]!==L||e[33]!==M?(ee=r.jsx(Z9e,{activeConnectorSystemHints:a,clientThreadId:n,githubMenuState:M,githubLabels:L}),e[30]=a,e[31]=n,e[32]=L,e[33]=M,e[34]=ee):ee=e[34],ee}}if(!$)return null;let z;e[35]!==$?(z=r.jsx(gl,{hint:$,isNextToLabel:!0}),e[35]=$,e[36]=z):z=e[36];const K=(ie=$.shortLabel)!=null?ie:$.name,J=!i;let Z;return e[37]!==F||e[38]!==H||e[39]!==z||e[40]!==K||e[41]!==J?(Z=r.jsx(Z1,{icon:z,label:K,removable:J,onRemove:H,dropdownContent:F}),e[37]=F,e[38]=H,e[39]=z,e[40]=K,e[41]=J,e[42]=Z):Z=e[42],Z};function K9e(t){t.preventDefault()}function Q9e(t){t.preventDefault()}function J9e(t){return t.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(t.user_connection_details.activation_status)&&!!t.user_connection_details.connection_instance_id&&!!t.user_connection_details.backing_link_id}function X9e(t){return t.systemHint===th}const eEe=R(()=>P(()=>import("./bzr9wyyo1msigqkj.js"),__vite__mapDeps([333,1])),{loading:t=>O(t)}),tEe=R(()=>P(()=>import("./leo4qb1u05uqhrab.js"),__vite__mapDeps([312,1])),{loading:t=>O(t)}),nEe=R(()=>P(()=>Promise.resolve().then(()=>Nr),void 0),{loading:t=>O(t)});function xet(t){"use forget";const e=G.c(60),{disabled:n,showLeadingDivider:s}=t,o=n===void 0?!1:n,a=s===void 0?!1:s,i=ne(),l=ae(it.agentSessionMode$),c=l!=null?l:"signedInAccounts";let d;e[0]!==i?(d=i.formatMessage(ws.signedInMenuLabel),e[0]=i,e[1]=d):d=e[1];const u=d;let f;e[2]!==i?(f=i.formatMessage(ws.incognitoMenuLabel),e[2]=i,e[3]=f):f=e[3];const m=f,p=c==="signedInAccounts"?u:m;let g;e[4]!==c?(g=c==="signedInAccounts"?r.jsx(eEe,{className:"icon"}):r.jsx(tEe,{className:"icon"}),e[4]=c,e[5]=g):g=e[5];const h=g;let x;e[6]!==o||e[7]!==c?(x=ie=>{o||ie!==c&&oF(ie)},e[6]=o,e[7]=c,e[8]=x):x=e[8];const v=x,y=a&&"group/trigger";let b;e[9]!==y?(b=W("composer-btn -ms-2 ps-3.5 pe-2 disabled:cursor-not-allowed disabled:opacity-60",y),e[9]=y,e[10]=b):b=e[10];const C=b;let S;e[11]!==a?(S=a?r.jsx("span",{className:"bg-token-border-medium -me-3 hidden h-6 w-px min-[420px]:inline-block"}):null,e[11]=a,e[12]=S):S=e[12];let k;e[13]!==h?(k=r.jsx("span",{className:"hidden items-center [[data-collapse-labels]_&]:me-1.5 [[data-collapse-labels]_&]:inline-flex",children:h}),e[13]=h,e[14]=k):k=e[14];let E;e[15]!==u?(E=r.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:u}),e[15]=u,e[16]=E):E=e[16];let T;e[17]!==m?(T=r.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:m}),e[17]=m,e[18]=T):T=e[18];let M;e[19]!==p?(M=r.jsx("span",{className:"col-start-1 row-start-1 whitespace-nowrap",children:p}),e[19]=p,e[20]=M):M=e[20];let A;e[21]!==E||e[22]!==T||e[23]!==M?(A=r.jsxs("span",{className:"relative grid [[data-collapse-labels]_&]:sr-only",children:[E,T,M]}),e[21]=E,e[22]=T,e[23]=M,e[24]=A):A=e[24];let I;e[25]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx(nEe,{className:"icon-sm ms-1"}),e[25]=I):I=e[25];let N;e[26]!==o||e[27]!==k||e[28]!==A||e[29]!==C?(N=r.jsxs("button",{type:"button",className:C,disabled:o,children:[k,A,I]}),e[26]=o,e[27]=k,e[28]=A,e[29]=C,e[30]=N):N=e[30];let L;e[31]!==o||e[32]!==N?(L=r.jsx(Y.BasicTrigger,{asChild:!0,disabled:o,children:N}),e[31]=o,e[32]=N,e[33]=L):L=e[33];let D;e[34]!==o||e[35]!==v?(D=ie=>{o||(ie==="incognito"||ie==="signedInAccounts")&&v(ie)},e[34]=o,e[35]=v,e[36]=D):D=e[36];let F;e[37]!==i?(F=i.formatMessage(ws.signedInMenuLabel),e[37]=i,e[38]=F):F=e[38];let $;e[39]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(j,w({},ws.signedInDescription)),e[39]=$):$=e[39];let H;e[40]!==o||e[41]!==F?(H=r.jsx(Y.RadioItem,{value:"signedInAccounts",disabled:o,label:F,secondary:$}),e[40]=o,e[41]=F,e[42]=H):H=e[42];let z;e[43]!==i?(z=i.formatMessage(ws.incognitoMenuLabel),e[43]=i,e[44]=z):z=e[44];let K;e[45]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx(j,w({},ws.incognitoDescription)),e[45]=K):K=e[45];let J;e[46]!==o||e[47]!==z?(J=r.jsx(Y.RadioItem,{value:"incognito",disabled:o,label:z,secondary:K}),e[46]=o,e[47]=z,e[48]=J):J=e[48];let Z;e[49]!==c||e[50]!==D||e[51]!==H||e[52]!==J?(Z=r.jsx(Y.Portal,{children:r.jsx(Y.Content,{size:"auto",alignOffset:-7,children:r.jsxs(Y.RadioGroup,{value:c,onValueChange:D,children:[H,J]})})}),e[49]=c,e[50]=D,e[51]=H,e[52]=J,e[53]=Z):Z=e[53];let q;e[54]!==L||e[55]!==Z?(q=r.jsxs(Y.Root,{children:[L,Z]}),e[54]=L,e[55]=Z,e[56]=q):q=e[56];let se;return e[57]!==q||e[58]!==S?(se=r.jsxs(r.Fragment,{children:[S,q]}),e[57]=q,e[58]=S,e[59]=se):se=e[59],se}const yet=({includeDisabledByAdmin:t}={})=>{const e=V(),{enabled:n,availableConnectorsType:s}=jz(e),o=ae(()=>{if(n)return gv(e,{includeDisabledByAdmin:t,productSku:E8.N7JUPD})}),a=n&&o===void 0,i=Nz(e),l=ye(e,"1826175200"),c=_.useMemo(()=>o?i?o.filter(d=>s.includes(d.type)):l?o.filter(d=>s.includes(d.type)||d.type===ll.MCP_CONNECTOR&&d.status!=="ONLY_ME"):o.filter(d=>s.includes(d.type)&&d.type!==ll.MCP_CONNECTOR):[],[s,o,i,l]);return n?{enabled:!0,availableConnectors:c,isLoading:a}:{enabled:!1,availableConnectors:[],isLoading:!1}};function vet(){return r.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{id:"mP0mrm",defaultMessage:"Beta"})})}function sEe(){"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"text-token-interactive-label-danger-secondary-default border-token-border-status-error items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{id:"w+mmPI",defaultMessage:"DEV"})}),t[0]=e):e=t[0],e}const oEe=()=>{"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{defaultMessage:"Custom",id:"allConnectors.custom"})}),t[0]=e):e=t[0],e},aEe=()=>{"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{defaultMessage:"Beta",id:"allConnectors.beta"})}),t[0]=e):e=t[0],e};function bet(t){"use forget";const e=G.c(3),{connector:n}=t;if(n.connector_type!=="MCP"||n.developer_type==="TRUSTED_PARTNER")return null;if(n.status==="ONLY_ME"){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(sEe,{}),e[0]=s):s=e[0],s}else if(n.supports_full_actions&&n.status==="ENABLED"){let s;return e[1]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(aEe,{}),e[1]=s):s=e[1],s}else{let s;return e[2]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(oEe,{}),e[2]=s):s=e[2],s}}const F7=R(()=>P(()=>import("./i5o8q29pfohjo085.js"),__vite__mapDeps([363,1])),{loading:t=>O(t)}),B7=R(()=>P(()=>import("./ea3j10kjv7ntyk1b.js"),__vite__mapDeps([364,1])),{loading:t=>O(t)}),U7=R(()=>P(()=>import("./decxj0nfuivtbs7k.js"),__vite__mapDeps([152,1])),{loading:t=>O(t)}),rEe=R(()=>P(()=>import("./m5o05xjhke8yaqmo.js"),__vite__mapDeps([365,1])),{loading:t=>O(t)}),Cet=({connection:t,onClose:e})=>{var l;const n=ne(),s=t.user_connection_details.activation_status,o=s==="activating"?[{icon:U7,label:n.formatMessage(ca.initialTime)},{icon:F7,label:n.formatMessage(ca.response)},{icon:B7,label:n.formatMessage(ca.future)}]:[{icon:rEe,label:n.formatMessage(ca.search)},{icon:U7,label:n.formatMessage(ca.fullSyncTime)},{icon:F7,label:n.formatMessage(ca.response)},{icon:B7,label:n.formatMessage(ca.future)}],a=s==="activating"?n.formatMessage(ca.titleSyncing):n.formatMessage(ca.titlePartialSyncing),i=t.connection_display_info.display_name;return r.jsx(iEe,{iconUrl:(l=t.connection_display_info.icon_url)!=null?l:void 0,iconAlt:t.connection_display_info.display_name,footerLogo:s==="activating"?r.jsx(l6,{sizeOverride:18,percentage:40,className:"text-token-text-tertiary"}):r.jsx(l6,{sizeOverride:18,percentage:60,className:"text-blue-400"}),bulletPoints:o,onClose:e,title:a,description:i})},iEe=({title:t,iconUrl:e,iconAlt:n,footerLogo:s,description:o,bulletPoints:a,onClose:i})=>{const l=ne();return r.jsxs(Mt,{testId:"modal-ca-nux",isOpen:!0,noPadding:!0,onClose:i,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"z-[10000] max-w-sm",children:[r.jsx("div",{className:"relative h-12",children:r.jsx(gn,{onClick:i,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"})}),r.jsxs("div",{className:"flex flex-col p-6 pb-5 text-center",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:e,alt:n,className:"h-12 w-12 rounded-full"}),r.jsx("div",{className:"bg-token-bg-primary absolute end-0 bottom-0 z-10 flex items-center justify-center rounded-full",children:s})]})}),r.jsx("div",{className:"text-md mt-6 font-medium",children:t}),r.jsx("div",{className:"text-token-text-tertiary text-sm",children:o}),r.jsx("div",{className:"mt-5 mb-9 flex flex-col justify-center gap-3",children:a.map(c=>r.jsxs("div",{className:"text-token-text-secondary flex items-start gap-2",children:[r.jsx(c.icon,{className:"icon"}),r.jsx("span",{className:"text-body-small-regular text-start",children:c.label})]},c.label))}),r.jsx("div",{children:r.jsx(_e,{color:"secondary",onClick:i,children:r.jsx("span",{className:"px-4",children:l.formatMessage(ca.gotIt)})})})]})]})},ca=be({titleSyncing:{id:"contextual-answers.status-modal.title-syncing",defaultMessage:"Sync in progress..."},titlePartialSyncing:{id:"contextual-answers.status-modal.title-partial-syncing",defaultMessage:"Last 30 days synced. Still syncing..."},search:{id:"contextual-answers.status-modal.search",defaultMessage:"The last 30 days are ready to search."},initialTime:{id:"contextual-answers.status-modal.initial-time",defaultMessage:"The initial sync may take 8 hours or longer, based on workspace size."},fullSyncTime:{id:"contextual-answers.status-modal.full-time",defaultMessage:"Full sync may take up to 16 hours or longer, based on workspace size."},response:{id:"contextual-answers.status-modal.response",defaultMessage:"Syncing enables instant ChatGPT responses about your data."},future:{id:"contextual-answers.status-modal.future",defaultMessage:"Future changes are available in real-time."},gotIt:{id:"contextual-answers.status-modal.got-it",defaultMessage:"Got it"}});function wet(t,{target:e,referrer:n,toggleAllAfterRedirect:s}={target:"connectors"}){let o="#settings/".concat(Rn.Connectors);return t&&(o+="?connector=".concat(Wo[t],"&add-connector-link=true&target=").concat(e),n&&(o+="&referrer=".concat(encodeURIComponent(n))),s&&(o+="&".concat(cx))),o}function ket(t){return"#settings/".concat(Rn.Connectors,"?connector=").concat(Wo[t])}function Eet(){const t=V(),e=Hn(),n=ae(()=>g3(t)),s=ys();return o=>{var f,m;const a=e.pathname.match(/\/c\/.+/)?e.pathname:"/",i=e.hash.includes("suggestedPromptsText="),l=e.hash.includes(cx),c=e.hash.includes("target=")?(f=e.hash.match(/target=([^&]+)/))==null?void 0:f[1]:"connectors",d="".concat(a,"?hints=").concat(c,"&sources=").concat(Pp[o.id]);if(i){const p=(m=e.hash.match(/suggestedPromptsText=([^&]+)/))==null?void 0:m[1];return"".concat(d,"&prompt=").concat(p,"&redirect_source=suggested_ca_prompts")}if(l)return"".concat(d,"&").concat(cx);if((s==null||s===Pe.Slurm)&&(n==null?void 0:n.some(p=>p.id===o.id&&[bt.GDRIVE_ACTION_CONNECTOR,bt.BOX_CONNECTOR,bt.DROPBOX_CONNECTOR,bt.SHAREPOINT_CONNECTOR].includes(Pp[p.id])))){const p=Ps(t,"1204757806").get("group","control");if(p==="connector-enabled"||p==="suggestions")return"".concat(d).concat(p==="suggestions"?"&suggestions-for-connector=".concat(Pp[o.id]):"")}return""}}const Tet="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M3.51105%2018.4269L4.39307%2019.9615C4.57634%2020.2846%204.8398%2020.5384%205.14908%2020.723L8.29914%2015.2307H1.99902C1.99902%2015.5884%202.09066%2015.9461%202.27394%2016.2692L3.51105%2018.4269Z'%20fill='%230066DA'%20/%3e%3cpath%20d='M11.999%208.76916L8.84897%203.27686C8.53969%203.46147%208.27623%203.71532%208.09295%204.03839L2.27394%2014.1922C2.09403%2014.5083%201.99926%2014.8663%201.99902%2015.2307H8.29914L11.999%208.76916Z'%20fill='%2300AC47'%20/%3e%3cpath%20d='M18.8492%2020.723C19.1585%2020.5384%2019.422%2020.2846%2019.6053%2019.9615L19.9718%2019.3269L21.7244%2016.2692C21.9077%2015.9461%2021.9993%2015.5884%2021.9993%2015.2307H15.6987L17.0394%2017.8846L18.8492%2020.723Z'%20fill='%23EA4335'%20/%3e%3cpath%20d='M11.9982%208.76923L15.1483%203.27692C14.839%203.09231%2014.4839%203%2014.1173%203H9.87907C9.51252%203%209.15742%203.10385%208.84814%203.27692L11.9982%208.76923Z'%20fill='%2300832D'%20/%3e%3cpath%20d='M15.6983%2015.2307H8.29849L5.14844%2020.723C5.45772%2020.9076%205.81281%2020.9999%206.17937%2020.9999H17.8174C18.1839%2020.9999%2018.539%2020.8961%2018.8483%2020.723L15.6983%2015.2307Z'%20fill='%232684FC'%20/%3e%3cpath%20d='M18.8146%209.11532L15.9051%204.03839C15.7218%203.71532%2015.4584%203.46147%2015.1491%203.27686L11.999%208.76916L15.6989%2015.2307H21.9876C21.9876%2014.873%2021.8959%2014.5153%2021.7127%2014.1922L18.8146%209.11532Z'%20fill='%23FFBA00'%20/%3e%3c/svg%3e",lEe=R(()=>P(()=>import("./e207r4ansyn2t3ve.js"),__vite__mapDeps([366,1])),{loading:t=>O(t)}),cEe=R(()=>P(()=>import("./jrdfnldycz1vs00j.js"),__vite__mapDeps([367,1,10,11])).then(t=>t.AgentConnectorsSafetyModal));function dEe({ctx:t,connector:e,clientThreadId:n,activeSystemHintType:s,account:o}){lt(t,cEe,{connector:e,alreadyViewed:!0,onClose:()=>{},onConfirm:()=>{},onTurnOffConnectors:()=>{Ze(n,a=>{var i,l;(i=a.selectedSources)!=null||(a.selectedSources=new Map),a.selectedSources.set(s,new Set(["web"])),(l=a.selectedMCPSources)!=null||(a.selectedMCPSources=new Map),a.selectedMCPSources.set(s,new Set),a.mentionedSources=new Set,t8({selectedSourcesMap:a.selectedSources,selectedMCPSourcesMap:a.selectedMCPSources,scope:{userId:o==null?void 0:o.authUserId,workspaceId:o==null?void 0:o.id}})})}})}function Met(t){"use forget";var S;const e=G.c(23),{clientThreadId:n,activeSystemHintType:s,layoutMode:o}=t,a=ne(),i=V();let l;e[0]!==i?(l=et(i),e[0]=i,e[1]=l):l=e[1];const c=l,d=dt(Fe.hasSeenOdysseyConnectorsModal),{platformConnectors:u}=Ad(),{selectedSources:f}=La(n);if(d.isLoading||d.eligible)return null;let m,p;if(e[2]!==u||e[3]!==f){p=Symbol.for("react.early_return_sentinel");e:{const k=Array.from(f!=null?f:[]).find(uEe);if(!(k!=null)){p=null;break e}if(k){const T=(S=Wo[k])!=null?S:k;m=u.get(T)}if(!m&&u.size>0){let T;e[6]!==u?(T=Array.from(u.values()),e[6]=u,e[7]=T):T=e[7],m=T[0]}}e[2]=u,e[3]=f,e[4]=m,e[5]=p}else m=e[4],p=e[5];if(p!==Symbol.for("react.early_return_sentinel"))return p;if(!m)return null;let g;e[8]!==c||e[9]!==s||e[10]!==n||e[11]!==m||e[12]!==i?(g=()=>{dEe({ctx:i,connector:m,clientThreadId:n,activeSystemHintType:s,account:c})},e[8]=c,e[9]=s,e[10]=n,e[11]=m,e[12]=i,e[13]=g):g=e[13];const h=g;let x;e[14]!==a?(x=a.formatMessage(fEe.tooltip),e[14]=a,e[15]=x):x=e[15];const v=o==="center"?"bottom":"top";let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(lEe,{className:"icon-sm text-[#E25507] dark:text-[#FF9E6C]"}),e[16]=y):y=e[16];let b;e[17]!==h?(b=r.jsx("button",{type:"button",onClick:h,className:"-ms-1 flex h-9 items-center justify-center p-1.5",children:y}),e[17]=h,e[18]=b):b=e[18];let C;return e[19]!==x||e[20]!==v||e[21]!==b?(C=r.jsx(_t,{label:x,side:v,delayDuration:300,children:b}),e[19]=x,e[20]=v,e[21]=b,e[22]=C):C=e[22],C}function uEe(t){return t!=="web"&&t!=="cloud"}const fEe=be({tooltip:{id:"IK9l6I",defaultMessage:"Learn more about privacy risks with connectors"}}),Aet=t=>{"use forget";const e=G.c(42),{modelLabel:n,modelSlug:s,thinkingEffort:o,onChangeThinkingEffort:a,onRemoveModel:i,onCloseAutoFocus:l}=t,c=ne(),d=V();let u,f,m,p,g,h,x,v,y,b,C,S;if(e[0]!==d||e[1]!==c||e[2]!==n||e[3]!==s||e[4]!==a||e[5]!==l||e[6]!==i||e[7]!==o){const T=sK(d);let M;e[20]!==c||e[21]!==o?(M=GM(c,o),e[20]=c,e[21]=o,e[22]=M):M=e[22];const{filledIcon:A,fullLabel:I}=M;f=Z1,v=A,y=o==="standard"?n:I,b=!0,C=i,S=l,p=pEe,u=Y.RadioGroup,m=o,e[23]!==s||e[24]!==a?(g=N=>{const L=N;oK(s,L),a(L)},e[23]=s,e[24]=a,e[25]=g):g=e[25],e[26]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(Y.Label,{children:r.jsx(j,{id:"YhWabo",defaultMessage:"Thinking time"})}),e[26]=h):h=e[26],x=T.map(gEe),e[0]=d,e[1]=c,e[2]=n,e[3]=s,e[4]=a,e[5]=l,e[6]=i,e[7]=o,e[8]=u,e[9]=f,e[10]=m,e[11]=p,e[12]=g,e[13]=h,e[14]=x,e[15]=v,e[16]=y,e[17]=b,e[18]=C,e[19]=S}else u=e[8],f=e[9],m=e[10],p=e[11],g=e[12],h=e[13],x=e[14],v=e[15],y=e[16],b=e[17],C=e[18],S=e[19];let k;e[27]!==u||e[28]!==m||e[29]!==g||e[30]!==h||e[31]!==x?(k=r.jsxs(u,{value:m,onValueChange:g,children:[h,x]}),e[27]=u,e[28]=m,e[29]=g,e[30]=h,e[31]=x,e[32]=k):k=e[32];let E;return e[33]!==f||e[34]!==p||e[35]!==k||e[36]!==v||e[37]!==y||e[38]!==b||e[39]!==C||e[40]!==S?(E=r.jsx(f,{icon:v,label:y,removable:b,onRemove:C,onCloseAutoFocus:S,onOpenChange:p,dropdownContent:k}),e[33]=f,e[34]=p,e[35]=k,e[36]=v,e[37]=y,e[38]=b,e[39]=C,e[40]=S,e[41]=E):E=e[41],E};function mEe({effort:t}){const e=ne(),{progressIcon:n,shortLabel:s,description:o}=GM(e,t);return r.jsx(_t,{side:"right",labelTextAlign:"left",contentClassName:"cant-hover:hidden",labelClassName:"[text-wrap:pretty]",label:o,triggerAs:null,children:r.jsx(Y.RadioItem,{value:t,icon:n,label:s})})}function pEe(t){t&&B.logEventWithStatsig("ChatGPT Composer Thinking Effort Opened","chatgpt_composer_thinking_effort_opened")}function gEe(t){return r.jsx(mEe,{effort:t},t)}const CB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M7.167 15.416V4.583a.75.75 0 0 1 1.5 0v10.833a.75.75 0 0 1-1.5 0Zm4.166-2.5V7.083a.75.75 0 0 1 1.5 0v5.833a.75.75 0 0 1-1.5 0ZM3 11.25V8.75a.75.75 0 0 1 1.5 0v2.5a.75.75 0 0 1-1.5 0Zm12.5 0V8.75a.75.75 0 0 1 1.5 0v2.5a.75.75 0 0 1-1.5 0Z"})),hEe=Object.freeze(Object.defineProperty({__proto__:null,default:CB},Symbol.toStringTag,{value:"Module"}));class u4{constructor(e){Q(this,"namespace","Voice");e&&(this.namespace=e.namespace)}log(e,...n){}info(...e){this.log("log",...e)}debug(...e){this.log("debug",...e)}error(...e){this.log("error",...e)}createChild(e){return new u4({namespace:"".concat(this.namespace,":").concat(e)})}}const bi=new u4,za=t=>t===0?null:t+performance.timeOrigin,K1=t=>{const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];e[n]=za(s!=null?s:0)}return e},SB=Be(void 0),wB=Be(void 0),kB=Be(void 0),EB=Be(void 0),_Ee=Be(void 0),TB=Be(void 0),MB=Be(void 0),AB=Be(void 0),IB=Be(void 0),xEe=Be(void 0),jB=Be(void 0),NB=Be(void 0),PB=Be(void 0),Iet=()=>Ld(()=>{const t=kB(),e=SB(),n=wB(),s=TB(),o=IB();return K1({pre_connection_setup_start_time:t==null?void 0:t.start_time,pre_connection_setup_end_time:t==null?void 0:t.end_time,audio_input_aquisition_start_time:e==null?void 0:e.start_time,audio_input_aquisition_end_time:e==null?void 0:e.end_time,audio_transceiver_setup_start_time:n==null?void 0:n.start_time,audio_transceiver_setup_end_time:n==null?void 0:n.end_time,post_connection_setup_start_time:s==null?void 0:s.start_time,post_connection_setup_end_time:s==null?void 0:s.end_time,quality_monitor_setup_start_time:o==null?void 0:o.start_time,quality_monitor_setup_end_time:o==null?void 0:o.end_time})}),jet=()=>Ld(()=>{const t=xEe(),e=jB(),n=NB(),s=PB(),o=EB(),a=_Ee();return K1({pre_connect_get_peer_connection_start_time:t==null?void 0:t.start_time,pre_connect_get_peer_connection_end_time:t==null?void 0:t.end_time,pre_connect_data_channel_start_time:e==null?void 0:e.start_time,pre_connect_data_channel_end_time:e==null?void 0:e.end_time,pre_connect_event_handlers_start_time:n==null?void 0:n.start_time,pre_connect_event_handlers_end_time:n==null?void 0:n.end_time,pre_connect_blank_transceiver_start_time:s==null?void 0:s.start_time,pre_connect_blank_transceiver_end_time:s==null?void 0:s.end_time,pre_connect_create_offer_start_time:o==null?void 0:o.start_time,pre_connect_create_offer_end_time:o==null?void 0:o.end_time,pre_connect_create_abort_signal_start_time:a==null?void 0:a.start_time,pre_connect_create_abort_signal_end_time:a==null?void 0:a.end_time})}),Net=()=>Ld(()=>{const t=MB(),e=AB();return K1({post_connect_set_remote_description_start_time:t==null?void 0:t.start_time,post_connect_set_remote_description_end_time:t==null?void 0:t.end_time,post_connect_get_response_text_start_time:e==null?void 0:e.start_time,post_connect_get_response_text_end_time:e==null?void 0:e.end_time})}),f4=Be(void 0),m4=Be(void 0),RB=Be(void 0),Pet=()=>Ld(()=>{const t=m4(),e=f4();return K1({connect_auth_headers_start_time:t==null?void 0:t.start_time,connect_auth_headers_end_time:t==null?void 0:t.end_time,connect_new_form_start_time:e==null?void 0:e.start_time,connect_new_form_end_time:e==null?void 0:e.end_time})}),Ret=()=>{SB.set(void 0),wB.set(void 0),kB.set(void 0),TB.set(void 0),IB.set(void 0),jB.set(void 0),NB.set(void 0),PB.set(void 0),EB.set(void 0),MB.set(void 0),AB.set(void 0),f4.set(void 0),m4.set(void 0),RB.set(void 0)},$7=(t,e)=>{const n=performance.now(),s=e(),o=performance.now();return t.set({start_time:n,end_time:o}),s},Let=async(t,e)=>{const n=performance.now(),s=await e(),o=performance.now();return t.set({start_time:n,end_time:o}),s},yEe=Wn(t=>ye(t,"2783249450")),Q1=t=>yEe(t),vEe=window.location.origin+"/voice",LB=window.location.origin,OB=window.location.origin,bEe=[/\[abort\]/,/The user aborted a request/,/Fetch is aborted/,/Request signal is aborted/],CEe="v=0\r\no=- 0 0 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=ice-ufrag:foo\r\na=ice-pwd:barbazqux\r\na=fingerprint:sha-256 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00\r\na=setup:actpass\r\na=msid-semantic: WMS\r\nm=audio 9 UDP/TLS/RTP/SAVPF 111\r\nc=IN IP4 0.0.0.0\r\na=rtpmap:111 opus/48000/2\r\na=mid:0\r\na=rtcp-mux\r\n",SEe=t=>{const e=t instanceof Error?t.message:String(t);return bEe.some(n=>n.test(e))},DB=()=>{const t=xs();return ye(t,"571174949")&&!0},V7=()=>{const t=DB(),e=t?OB:LB,n=t?"/realtime/status":"/v1/vp/status";return"".concat(e).concat(n)},u2=(t=!0)=>{const e=DB(),n=e?OB:LB,s=e?"/realtime/vp":"/v1/vp";return"".concat(n).concat(s).concat(t?"":"s")};async function H7(t,{payload:e,eventSource:n,url:s}){var i;const o={eventSource:n,voice:e.voice,voice_mode:(i=e.voice_mode)!=null?i:"undefined",voice_session_id:e.voice_session_id};performance.clearResourceTimings();const a=performance.now();Bt.getToken.request(o);try{const l=await t();Ld(()=>{const d=performance.getEntriesByType("resource").filter(f=>f.name.includes(s))[0],u={domain_lookup_start_time:null,domain_lookup_end_time:null,connect_end_time:null,connect_start_time:null,secure_connection_start_time:null,request_start_time:null,response_start_time:null,response_end_time:null,latency_ms:null};if(d){const{domainLookupEnd:f,domainLookupStart:m,connectEnd:p,connectStart:g,secureConnectionStart:h,requestStart:x,responseStart:v,responseEnd:y,duration:b}=d;u.domain_lookup_start_time=za(m),u.domain_lookup_end_time=za(f),u.connect_end_time=za(p),u.connect_start_time=za(g),u.secure_connection_start_time=za(h),u.request_start_time=za(x),u.response_start_time=za(v),u.response_end_time=za(y),u.latency_ms=b||null}bi.debug({timing:u,entry:d}),RB.set(u)});const c=performance.now()-a;return Bt.getToken.success(U(w({},o),{durationMs:c})),l}catch(l){const c=performance.now()-a,d=SEe(l);throw Bt.getToken.failure(U(w({},o),{durationMs:c,error:l instanceof Error?l.message:String(l),voice_session_id:e.voice_session_id,user_aborted:d})),l}}class nh{static startLivekitSession(e,n,s){const o="".concat(vEe,"/get_token");return H7(()=>Np.post(o,e,{additionalHeaders:s?{[_c.ProofToken]:s}:{}}),{payload:e,eventSource:n,url:o})}static startTransceiverSession({payload:e,accessToken:n,proofOfWorkAnswer:s,eventSource:o,signal:a,dataChannelId:i=0,offer:l}){const c=e.voice_mode==="advanced",d="".concat(u2(c),"?dcid=").concat(i);return H7(async()=>{const u=$7(m4,()=>eg({accessToken:n}));delete u["cf-timezone"];let f={};const m=$7(f4,()=>{const g=new FormData;return g.append("sdp",l.sdp),g.append("session",JSON.stringify(e)),g}),p=await fetch(d,{method:"POST",body:m,headers:w(w(w({},u),f),s?{[_c.ProofToken]:s}:{}),signal:a});if(!p.ok)throw new Error("Failed to create session: ".concat(p.statusText));return p},{payload:e,eventSource:o,url:d})}static prewarmRealtimeVoice(){const e={[_c.ProofToken]:"dummy"},n=w(w({},eg({accessToken:"dummy"})),e),s=()=>{};Np.post(V7(),{requested_voice_mode:"prewarm"},{additionalHeaders:e}).catch(s);const o=()=>{const a=new FormData;return a.append("sdp",CEe),a.append("session",JSON.stringify({voice_mode:"prewarm"})),a};fetch("".concat(u2(!0),"?dcid=0"),{method:"POST",body:o(),headers:n}).catch(s),fetch("".concat(u2(!1),"?dcid=0"),{method:"POST",body:o(),headers:n}).catch(s)}static async getVoiceStatus(e,n){var a;const s={eventSource:n,requested_voice_mode:(a=e.requested_voice_mode)!=null?a:"null"},o=await yr.getRequirementsToken();return Bt.getVoiceStatus.request(s),ge.safePost("/conversation/voice/status",{requestBody:e,additionalHeaders:{[_c.ProofToken]:o}}).then(i=>(Bt.getVoiceStatus.success(s),i)).catch(i=>{throw Bt.getVoiceStatus.failure(U(w({},s),{error:i==null?void 0:i.message})),i})}static async getRealtimeVoiceStatus(e,n){var a;const s={eventSource:n,requested_voice_mode:(a=e.requested_voice_mode)!=null?a:"null"},o=await yr.getRequirementsToken();return Bt.getVoiceStatus.request(s),Np.post(V7(),e,{additionalHeaders:{[_c.ProofToken]:o}}).then(i=>(Bt.getVoiceStatus.success(s),i)).catch(i=>{throw Bt.getVoiceStatus.failure(U(w({},s),{error:i==null?void 0:i.message})),i})}}const wEe=t=>Q1(t)?nh.getRealtimeVoiceStatus:nh.getVoiceStatus,kEe=()=>[8,4,4,4,12].map(e=>Math.floor(Math.random()*Math.pow(10,e)).toString(16).padStart(e,"0").toUpperCase()).join("-");var sr=(t=>(t.StateUpdate="state_update",t.ActionRequest="action_request",t.ConversationUpdate="conversation_update",t.RelayMessage="relay_message",t.Unknown="unknown",t.UsageUpdate="usage_update",t.ToolUpdate="tool_update",t.TurnContext="turn_context",t.Performance="performance",t.StartupTelemetry="startup_telemetry",t.TrackState="track_state",t.FullChatMessage="full_chat_message",t.LiveCaptioningText="live_captioning_text",t.UserTranscriptionText="user_transcription_text",t))(sr||{}),EEe=(t=>(t.StartListeningIntently="start_listening",t.StopListeningIntently="stop_listening",t.HaltAllActivity="stop_speaking",t.ResumeListening="resume_listening",t.RelayMessage="relay_message",t))(EEe||{}),TEe=(t=>(t.Connecting="connecting",t.Idle="idle",t.Connected="connected",t.Halted="halted",t.Listening="listening",t.ListeningIntently="listening_intently",t.Thinking="thinking",t.Speaking="speaking",t))(TEe||{}),Oy=(t=>(t.Add="add",t.Remove="remove",t))(Oy||{});let f2;const MEe=()=>(f2||(f2=new TextEncoder),f2);async function FB({room:t,event:e,voiceStore:n}){const s=MEe();await t.localParticipant.publishData(s.encode(JSON.stringify(e))),n.setState(o=>{o.server.messages.push(U(w({},e),{timestamp:new Date,source:"local"}))})}function Oet(t,e,n,s){FB({room:t,voiceStore:e,event:{type:sr.TrackState,payload:{type:sr.TrackState,track_id:n==="camera_front"?"webcam":"screenshare",media_type:"video",media_source:n,state:s}}})}function AEe(t,e,n,s){FB({room:t,voiceStore:e,event:{type:sr.TrackState,payload:{type:sr.TrackState,track_id:"microphone",media_type:"audio",media_source:n,state:s}}})}class IEe{constructor(){Q(this,"logger",bi.createChild("VoiceTurnContext"));Q(this,"publish",async()=>{throw new Error("VoiceTurnContext does not have a set publisher.")});Q(this,"store",Dt(Nf(In(()=>({parts:{},attachments:{}})))))}useState(e){return this.store(e||(n=>n))}setPublisher(e){this.publish=e}async add({parts:e,attachments:n}){if(!e&&!n)return;let s={},o={};n&&(s=Object.fromEntries(n.map(i=>[this.makeId("attachment"),i]))),e&&(o=Object.fromEntries(e.map(i=>[this.makeId("part"),i])));const a={type:sr.TurnContext,payload:{type:sr.TurnContext,action:Oy.Add,attachments:s,parts:o}};await this.publish(a),this.store.setState(i=>{i.parts=Object.assign(i.parts,o),i.attachments=Object.assign(i.attachments,s)}),this.logger.info("Added",{payload:a})}async remove({parts:e,attachments:n}){if(!e&&!n)return;this.logger.info("Removing turn context attachment",{parts:e,attachments:n});const s={},o={},a=this.store.getState();n&&n.forEach(l=>{a.attachments[l]&&(s[l]=a.attachments[l])}),e&&e.forEach(l=>{a.parts[l]&&(o[l]=a.parts[l])});const i={type:sr.TurnContext,payload:{type:sr.TurnContext,action:Oy.Remove,attachments:s,parts:o}};this.publish(i),this.store.setState(l=>{Object.keys(o).forEach(c=>{delete l.parts[c]}),Object.keys(s).forEach(c=>{delete l.attachments[c]})}),this.logger.info("Removed",{payload:i})}async clear(){this.store.setState(e=>{e.parts={},e.attachments={}}),this.logger.info("Cleared")}makeId(e){return"client:".concat(e?"".concat(e,":"):"").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,15))}}var jEe=(t=>(t.Starting="starting",t.Started="started",t.Stopping="stopping",t.Stopped="stopped",t))(jEe||{});const BB={conversationId:null,voiceSessionId:null,isActivityHalted:!1,isVoiceModeActive:!1,video:"stopped",screenshare:"stopped",dev:{room:null},credentials:{token:null,url:null,e2eeKey:null},server:{actions:null,connectionState:null,remoteState:null,messages:[],usage:null,toolUpdate:null,voiceConnectionQuality:null,turnContext:new IEe,relayReady:!1},disconnectPending:void 0,showVoicePicker:!1,showNuxFullPage:!1,metrics:{totalLatencyMs:[],currentRttMs:[],numSpeaking:0,numThinking:0,numListening:0,conversationLatency:0},hasConnectedOnce:!1},UB=t=>{const e=Dt(Nf(In(()=>BB)));return t&&e.setState(t),e},NEe=UB(),$B=_.createContext(null),Det=({children:t,initializer:e})=>{const n=_.useRef(void 0);return n.current||(n.current=UB(e)),r.jsx($B.Provider,{value:n.current,children:t})};function Yl(){const t=_.useContext($B);return t!=null?t:NEe}function Sl(t){return Yl()(t)}function Fet(){const t=ae(()=>hv()),e=Sl(s=>!!(s.credentials.token&&s.credentials.url&&s.credentials.e2eeKey)),n=Sl(s=>s.server.connectionState==="connected");return t==="livekit"?e:n}function Bet(){return Yl()(e=>e.voiceStatus)}function PEe(){const{voiceName:t}=F1(),e=Yl(),n=V(),s=wEe(n);return _.useCallback(async function(a,i){var d;const l=kEe(),c=await s(U(w({},a),{timezone_offset_min:new Date().getTimezoneOffset(),nonce:Pz(),voice:(d=a.voice)!=null?d:t,voice_session_id:l}),i);return c!=null&&c.chatreq&&yr.startEnforcement(c==null?void 0:c.chatreq),e.setState({voiceStatus:c}),U(w({},c),{voice_session_id:l})},[t,s,e])}function Uet(){const[t,e]=_.useState(!1),n=Yl(),s=_.useCallback(async()=>{e(!0);const o=n.getState().dev.room;if(o){const a=o.localParticipant.isMicrophoneEnabled,i=a?"mute":"unmute";Bt.toggleMuteButton.click({toggleTo:i});try{await o.localParticipant.setMicrophoneEnabled(!a),AEe(o,n,"microphone",i==="mute"?"muted":"live")}finally{e(!1)}}},[n]);return{isMuting:t,toggleMute:s}}function $et(t,e){if(t){const{credentials:n,conversationId:s,voiceSessionId:o,voiceMode:a}=t;bi.debug("setting credentials",t),e.setState(i=>{i.conversationId=s,i.credentials=n,i.voiceSessionId=o,i.voiceMode=a});return}bi.debug("clearing credentials"),REe(e)}function Vet(){const t=Yl(),e=Sl(o=>o.video),n=_.useCallback(o=>{t.setState(a=>{const i=a.video?"off":"on";Bt.toggleVideoButton.click({eventSource:o,toggleTo:i}),a.video==="stopped"?(a.screenshare==="started"&&(a.screenshare="stopping"),a.video="starting"):a.video="stopping"})},[t]),s=_.useCallback(o=>{t.setState(a=>{a.video=o})},[t]);return{cameraTrackState:e,finalizeCameraState:s,toggleCamera:n}}function Het(){const t=Sl(o=>o.screenshare),e=Yl(),n=_.useCallback(o=>{e.setState(a=>{const i=a.screenshare?"off":"on";Bt.toggleScreenShareButton.click({eventSource:o,toggleTo:i}),a.screenshare==="stopped"?(a.video==="started"&&(a.video="stopping"),a.screenshare="starting"):a.screenshare="stopping"})},[e]),s=_.useCallback(o=>{e.setState(a=>{a.screenshare=o})},[e]);return{screenshareTrackState:t,toggleScreenShare:n,finalizeScreenshareState:s}}function REe(t){t.setState(e=>U(w({},BB),{isVoiceModeActive:e.isVoiceModeActive,hasConnectedOnce:e.hasConnectedOnce}))}function Get(t){const e=t.default_voice_mode,n=t.modes.find(s=>s.mode===e);if(!n)throw new Error("Voice status returned a default_voice_mode that does not exist in the modes array");return n}const LEe="{{.assetPrefix}}/assets/pcm-player-processor-Bnki682T.js";var fa,ma,Ef,Qc,Uo,qi,VB;class G7 extends Rz.EventEmitter{constructor({sampleRate:n=24e3,channels:s=1}={}){super();ro(this,Uo);ro(this,fa);ro(this,ma,null);ro(this,Ef);ro(this,Qc);Pr(this,fa,new AudioContext({sampleRate:n,latencyHint:"playback"})),Pr(this,Ef,s),Pr(this,ma,null),Pr(this,Qc,!1)}async preload(){return await Jt(this,Uo,qi).call(this),this}async stream(n){const s=await Jt(this,Uo,qi).call(this);let o=0,a=await n.read();for(;!a.done;)this.emit("ready"),s.port.postMessage({type:"push",payload:{chunk:a.value}}),o+=a.value.byteLength,a=await n.read();Pr(this,Qc,!0),o===0&&this.emit("error")}async play(){Tn(this,fa).state==="suspended"&&await Tn(this,fa).resume(),(await Jt(this,Uo,qi).call(this)).port.postMessage({type:"play"})}async pause(){(await Jt(this,Uo,qi).call(this)).port.postMessage({type:"pause"})}async seek(n){(await Jt(this,Uo,qi).call(this)).port.postMessage({type:"seek",payload:{seconds:n}})}async reset(){(await Jt(this,Uo,qi).call(this)).port.postMessage({type:"reset"})}destroy(){this.removeAllListeners(),Tn(this,ma)&&(Tn(this,ma).disconnect(),Pr(this,ma,null)),Tn(this,fa).close()}}fa=new WeakMap,ma=new WeakMap,Ef=new WeakMap,Qc=new WeakMap,Uo=new WeakSet,qi=async function(){if(Tn(this,ma))return Tn(this,ma);await Tn(this,fa).audioWorklet.addModule(LEe);const n=new AudioWorkletNode(Tn(this,fa),"pcm-player");return n.connect(Tn(this,fa).destination),n.port.postMessage({type:"init",payload:{channels:Tn(this,Ef)}}),n.port.onmessage=Jt(this,Uo,VB).bind(this),Pr(this,ma,n),n},VB=function(n){switch(n.data.type){case"timeupdate":{this.emit("timeupdate",{seconds:n.data.payload.seconds,totalSeconds:n.data.payload.totalSeconds}),Tn(this,Qc)&&n.data.payload.seconds>=n.data.payload.totalSeconds&&this.emit("ended");break}}};const sh=Symbol("both-are-bad"),OEe=({serverThreadId:t})=>t3(In((e,n)=>{const s=(o,a)=>e(i=>{const l=i.paragens.find(c=>c.id===o);l&&a(l)});return{serverThreadId:t,paragens:[],playingId:null,selectedId:null,shouldShowAudioParagenPrompt:!1,shouldShowThankYouTooltip:!1,actions:{createAudioParagen:async o=>{var b,C,S;const{serverThreadId:a}=n();if(!a){const k=new Error("thread id is not set");throw Re.addError(k),k}const i=as(),l=as();e(k=>{k.paragens[0]={id:i},k.paragens[1]={id:l}});const{forceParagen:c,forceParagenModel:d}=Cd(),[u,f,m]=await Promise.all([ge.safePost("/generate_audio_paragen",{requestBody:w({conversation_id:a,message_id:o,paragen_ids:[i,l]},c?{force_paragen:!0,force_paragen_model_slug:d.value}:{}),skipJsonTransform:!0}),new G7().preload(),new G7().preload()]),p=(b=u.body)==null?void 0:b.getReader();if(!u.ok||!p){for(const k of[i,l])s(k,E=>{E.error=new Error("Failed to create audio paragen: ".concat(u.statusText))});return}const g={},h=k=>new ReadableStream({start(E){g[k]=E}}),x=(k,E)=>{k.on("ready",()=>s(E,T=>{T.player=k})).on("error",()=>s(E,T=>{T.error=!0}))};x(f,i),x(m,l),f.stream(h(i).getReader()),m.stream(h(l).getReader());const v=new TextDecoder;let y="";for(;;){const{value:k,done:E}=await p.read();if(E)break;y+=v.decode(k,{stream:!0});let T=y.indexOf("\n");for(;T!==-1;){const M=y.slice(0,T).trim();if(y=y.slice(T+1),M)try{const A=JSON.parse(M),I=A.paragen_id;if(A.chunk){const N=Uint8Array.from(atob(A.chunk),L=>L.charCodeAt(0));(C=g[I])==null||C.enqueue(N)}A.done&&((S=g[I])==null||S.close())}catch(A){}T=y.indexOf("\n")}}},playParagen:o=>{B.logEventWithStatsig("Audio Paragen: Play","chatgpt_audio_paragen_play",{paragen_id:o}),e(a=>{a.playingId=o})},pauseParagen:(o,a=!1)=>{a&&B.logEventWithStatsig("Audio Paragen: Pause","chatgpt_audio_paragen_pause",{paragen_id:o}),e(i=>{i.playingId===o&&(i.playingId=null)})},selectParagen:o=>{B.logEventWithStatsig("Audio Paragen: Select Option","chatgpt_audio_paragen_select_option",{paragen_id:o}),e(a=>{a.playingId=null,a.selectedId=o})},submitParagenResults:async(o,a,i)=>{const{paragens:l,selectedId:c,serverThreadId:d}=n();if(!d){const f=new Error("thread id is not set");throw Re.addError(f),f}B.logEventWithStatsig("Audio Paragen: Submit Results","chatgpt_audio_paragen_submit_results");const u=await ge.safePost("/paragen_audio_submission",{requestBody:{conversation_id:d,user_prompt_message_id:o,displayed_paragen_ids:l.map(f=>f.id),selected_paragen_id:c===sh?null:c,reviews:a,stream_type:"stream",freeform_feedback:i},skipJsonTransform:!0});if(!u.ok){const f=new Error("Failed to create audio paragen: ".concat(u.statusText));throw Re.addError(f,{conversationId:d,messageId:o}),f}},setShouldShowThankYouTooltip:o=>{e(a=>{a.shouldShowThankYouTooltip=o})},resetStore:()=>{e(o=>{var a;for(const i of o.paragens)(a=i.player)==null||a.destroy();o.paragens=[],o.playingId=null,o.selectedId=null})}}}}),El),J1=_.createContext(null);J1.displayName="AudioParagenStore";function DEe(){const t=_.useContext(J1);if(!t)throw new Error("useAudioParagenState must be used within a AudioParagenStoreProvider");return t}function FEe(t,e){const n=_.useContext(J1);if(n)return n(t,e)}function gd(t,e){const n=DEe(),s=Lz(n,t,e);if(s===n.getState())throw new Error("Selector cannot return the entire state. Please select a specific part of the state.");return s}function X1(){return gd(t=>t.actions)}function Wet(t,e){const{createAudioParagen:n,resetStore:s}=X1(),{paragens:o}=gd(a=>({paragens:a.paragens}));return _.useEffect(()=>{if(!(!e||!t))return n(t),()=>{s()}},[n,e,t,s]),o.every(a=>a.player&&!a.error)}function zet({children:t,serverThreadId:e}){const n=_.useRef(null);return n.current==null&&(n.current=OEe({serverThreadId:e})),_.useEffect(()=>{const s=n.current;s&&!s.getState().serverThreadId&&e&&s.setState(o=>{o.serverThreadId=e})},[e]),r.jsx(J1.Provider,{value:n.current,children:t})}const HB=new Set;function qet(t){return t?HB.has(t):!1}function BEe(t){HB.add(t)}function UEe(){return typeof RTCPeerConnection<"u"&&typeof RTCPeerConnection.generateCertificate=="function"}function $Ee(){"use forget";const t=dt(Fe.hasSeenAdvancedVoiceNuxFullPage);return!t.isLoading&&t.eligible}function VEe(t){Bt.voiceAdvancedDisclosureShown.success(),t.setState(e=>{e.showNuxFullPage=!0})}function HEe(t,e){return W("relative flex h-9 items-center justify-center rounded-full disabled:text-gray-50 disabled:opacity-30",t?"min-w-8 p-2":e?"w-7":"w-9",e&&"h-7!","composer-secondary-button-color hover:opacity-80")}function GEe(){const t=ne();return r.jsx("span",{className:"ps-1 pe-1 text-[13px] font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:t.formatMessage({id:"composerSpeechUpsell.voiceLabel",defaultMessage:"Voice"})})}const WEe=R(()=>P(()=>import("./hped4eg53je64yld.js"),__vite__mapDeps([368,1,10,11,369,370,371,372])).then(t=>t.VoiceModals)),zEe=()=>{const t=V(),e=Yl(),n=!tt(t),s=$Ee(),o=_v();return()=>{if(B.logEventWithStatsig("Composer Speech Button Clicked","composer_speech_button_clicked",{protocol:o}),n)return Bt.voiceSelectionShown.click(n?{isUnauthenticated:!0,eventSource:"composerSpeechButton"}:{}),e.setState(i=>{i.showVoicePicker=!0});if(s)return VEe(e);e.setState(i=>{i.isVoiceModeActive=!0})}};function qEe({isSmall:t=!1,disableTooltip:e=!1,clientThreadId:n}){const s=V(),a=ne().formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),i=_v(),l=Sl(p=>p.isVoiceModeActive),{loggedOutVoiceLabel:c}=ae(()=>Rd(s)),{getUpsellLabelType:d}=cB(),u=tt(s)?d()==="all":c,f=zEe(),m=av()?UEe():!0;return r.jsxs(r.Fragment,{children:[r.jsx(YEe,{disabled:e,protocol:i,isRTCSupported:m,children:r.jsxs("button",{"data-testid":"composer-speech-button",onClick:f,"aria-label":a,disabled:!m||l,className:HEe(u,t),style:{viewTransitionName:"var(--vt-composer-speech-button)"},children:[r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(CB,{className:"icon"})}),u&&r.jsx(GEe,{})]})}),r.jsx(WEe,{clientThreadId:n})]})}function YEe(t){return FEe(n=>n.shouldShowThankYouTooltip)?r.jsx(KEe,w({},t)):r.jsx(ZEe,w({},t))}function ZEe({children:t,disabled:e=!1,protocol:n,isRTCSupported:s}){const o=ne();return r.jsx(_t,{open:e?!1:void 0,label:s?o.formatMessage(oh.defaultTooltipLabel):o.formatMessage(oh.webRTCNotSupportedLabel),side:"bottom",onOpenChange:a=>{a&&(B.logEvent("Composer Speech Button Hovered",{protocol:n}),Bt.composerSpeechButton.hover())},children:t})}function KEe({children:t}){const{setShouldShowThankYouTooltip:e}=X1();return _.useEffect(()=>{const n=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(n)},[e]),r.jsx(_t,{open:!0,label:r.jsx(j,w({},oh.audioParagenThankYouLabelHeader)),secondaryLabel:r.jsx(j,w({},oh.audioParagenThankYouLabelSubheader)),side:"top",withArrow:!0,children:t})}const oh=be({audioParagenThankYouLabelHeader:{id:"ComposerSpeechButton.audioParagenThankYouLabelHeader",defaultMessage:"Thank you for your feedback!"},audioParagenThankYouLabelSubheader:{id:"ComposerSpeechButton.audioParagenThankYouLabelSubheader",defaultMessage:"Continue chatting with voice mode"},defaultTooltipLabel:{id:"ComposerSpeechButton.defaultTooltipLabel",defaultMessage:"Use voice mode"},webRTCNotSupportedLabel:{id:"ComposerSpeechButton.webRTCNotSupportedLabel",defaultMessage:"Voice mode unsupported"}}),QEe=R(()=>P(()=>import("./gxmwe5tu80a6syuy.js"),__vite__mapDeps([373,1,10,11,370,371,374,369,375,376,59,19,21,17,15,16,74])).then(t=>t.VoiceModeLayout)),JEe=R(()=>P(()=>import("./jncziq1nczomb07p.js"),__vite__mapDeps([377,1,10,11])).then(t=>t.VoiceConversationRating));function XEe(){const t=V(),e=_v();return ye(t,"482976135")&&e==="transceiver"}function p4(){const t=XEe();return!Y5()||Td()?!1:tM()?t:!0}function Yet(t){return p4()?r.jsx(QEe,w({},t)):null}function eTe(t){return p4()?r.jsx(JEe,w({},t)):null}const tTe=1e3,W7=t=>{"use forget";const e=G.c(11),{children:n}=t,s=_.useRef(!0),o=_.useRef(void 0),a=V();let i;e[0]!==a?(i=ye(a,"2921139901"),e[0]=a,e[1]=i):i=e[1];const l=i,c=Sl(nTe),d=Ol(),u=c||d;let f;e[2]!==l||e[3]!==u?(f=()=>{!u&&s.current&&l&&(s.current=!1,nh.prewarmRealtimeVoice())},e[2]=l,e[3]=u,e[4]=f):f=e[4];const m=f;let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{o.current||(o.current=window.setTimeout(()=>{s.current=!0,o.current=void 0},tTe))},e[5]=p):p=e[5];const g=p;let h,x;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=()=>()=>{window.clearTimeout(o.current)},x=[],e[6]=h,e[7]=x):(h=e[6],x=e[7]),_.useEffect(h,x);let v;return e[8]!==n||e[9]!==m?(v=r.jsx("div",{onMouseEnter:m,onMouseLeave:g,children:n}),e[8]=n,e[9]=m,e[10]=v):v=e[10],v};function nTe(t){return t.isVoiceModeActive}const sTe=R(()=>P(()=>import("./lrtd9knjab0hf8x5.js"),__vite__mapDeps([308,1])),{loading:t=>O(t)}),oTe=R(()=>P(()=>import("./o0kdn9dsvj855pjy.js"),__vite__mapDeps([378,1,10,11,372,369,370,371,374,375,376,59,19,21,17,15,16,74,379])).then(t=>t.IntegratedUXComposerContainer));function aTe(t){"use forget";var A;const e=G.c(4),n=V(),s=!tt(n),a=pv(rTe).length>0;let i;e[0]!==t.composerController?(i=()=>!cf(t.composerController),e[0]=t.composerController,e[1]=i):i=e[1];const l=ae(i),c=!a&&!l,{browseMode:d}=td(),u=wl(),f=Td()&&!u,m=Es(),p=ye(n,"2360528850"),g=Ol(),h=m&&!p,x=ye(n,"3728856343"),v=et(n),y=Xo(),b=ts(n),C=jn(hn);let S;e[2]!==n?(S=()=>Rd(n),e[2]=n,e[3]=S):S=e[3];const{isSingleLine:k}=ae(S),{getShowVoiceUpsell:E}=cB();if(g)return"speech";if(t.inputState==="disabled"&&t.disableReason!=="pimBlock"||C&&k&&c&&t.state!=="streaming")return"disabled";const T=v!=null&&!b&&((A=y==null?void 0:y.includes(os.AllowVoiceUse))!=null?A:!1);return(!s&&T||s&&(x||E()))&&c&&t.state==="disabled"&&t.clientThreadId&&d!=="gizmo-editor"&&!f&&!h?"speech":"submit"}function rTe(t){return t.files}function Zet(t){"use forget";const e=G.c(20),n=V(),s=Oz(n),o=Ol(),a=Ve(t.clientThreadId,iTe),i=aTe(t),l=p4();let c;e[0]!==t.composerController?(c=()=>fv(t.composerController),e[0]=t.composerController,e[1]=c):c=e[1];const d=ae(c);if(i==="disabled"&&!a)return null;const u=t.state==="disabled",f=t.state==="streaming";let m;e[2]!==t.clientThreadId||e[3]!==t.composerController||e[4]!==t.disableReason||e[5]!==t.forceStopButton||e[6]!==t.isSmall||e[7]!==t.onSubmit||e[8]!==t.useStartButtonText||e[9]!==a||e[10]!==u||e[11]!==f?(m=r.jsx(lTe,{isSmall:t.isSmall,isDisabled:u,isStreaming:f,showSpinner:a,onSubmit:t.onSubmit,disableReason:t.disableReason,useStartButtonText:t.useStartButtonText,composerController:t.composerController,clientThreadId:t.clientThreadId,forceStopButton:t.forceStopButton}),e[2]=t.clientThreadId,e[3]=t.composerController,e[4]=t.disableReason,e[5]=t.forceStopButton,e[6]=t.isSmall,e[7]=t.onSubmit,e[8]=t.useStartButtonText,e[9]=a,e[10]=u,e[11]=f,e[12]=m):m=e[12];const p=m,g=i==="speech"&&l;if(t.clientThreadId&&(o||g&&!0)){let x;return e[13]!==s||e[14]!==d||e[15]!==t.clientThreadId||e[16]!==t.disableTooltip||e[17]!==t.isSmall||e[18]!==t.onSubmit?(x=s?r.jsx(W7,{children:r.jsx(oTe,{clientThreadId:t.clientThreadId,isFocused:d,onComposerSubmit:t.onSubmit})}):r.jsx("div",{className:t.isSmall?"min-w-7":"min-w-9","data-testid":"composer-speech-button-container",children:r.jsx(W7,{children:r.jsx(qEe,{isSmall:t.isSmall,clientThreadId:t.clientThreadId,disableTooltip:t.disableTooltip})})}),e[13]=s,e[14]=d,e[15]=t.clientThreadId,e[16]=t.disableTooltip,e[17]=t.isSmall,e[18]=t.onSubmit,e[19]=x):x=e[19],x}return p}function iTe(t){var e,n;return!!(t!=null&&t.interruptionInProgress)&&!!((n=(e=he.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&n.n7jupd_message)}function lTe(t){"use forget";var $;const e=G.c(27),{onSubmit:n,isStreaming:s,isDisabled:o,showSpinner:a,disableReason:i,useStartButtonText:l,composerController:c,isSmall:d,clientThreadId:u,forceStopButton:f}=t;let m;e[0]!==c?(m=()=>cf(c),e[0]=c,e[1]=m):m=e[1];const p=ae(m),g=ale(u),h=s&&(!g||p||f),x=a?_s:h?sTe:KI,v=ne(),y=i==="async_task_pending"&&!g,b=JL(),C=o||y||a;let S;e[2]!==v||e[3]!==h?(S=h?v.formatMessage(Hi.stopStreamingLabel):v.formatMessage(Hi.sendPromptLabel),e[2]=v,e[3]=h,e[4]=S):S=e[4];const k=h?"stop-button":"send-button",E=h?"composer-secondary-button-color":"composer-submit-button-color",T=d?"h-7":"h-9",M=l&&!h?"w-fit px-3":d?"w-7":"w-9";let A;e[5]!==E||e[6]!==T||e[7]!==M?(A=W("composer-submit-btn",E,T,M),e[5]=E,e[6]=T,e[7]=M,e[8]=A):A=e[8];let I;e[9]!==x||e[10]!==h||e[11]!==l?(I=l&&!h?r.jsx("p",{className:"text-md font-medium",children:r.jsx(j,{id:"q2Rxh8",defaultMessage:"Start"})}):r.jsx(x,{className:"icon"}),e[9]=x,e[10]=h,e[11]=l,e[12]=I):I=e[12];let N;e[13]!==n||e[14]!==C||e[15]!==S||e[16]!==k||e[17]!==A||e[18]!==I?(N=r.jsx("button",{onClick:n,disabled:C,id:"composer-submit-button","aria-label":S,"data-testid":k,className:A,children:I}),e[13]=n,e[14]=C,e[15]=S,e[16]=k,e[17]=A,e[18]=I,e[19]=N):N=e[19];const L=N;let D;if(e[20]!==b||e[21]!==i||e[22]!==v){e:{if(!i){D=void 0;break e}const H=i==="file_upload_pending"?v.formatMessage(Hi.fileUploadPendingLabel):i==="rate_limit_hard_block"?v.formatMessage(Hi.rateLimitHardBlockLabel):i==="empty_text_content"?v.formatMessage(Hi.emptyTextContentLabel):i==="async_task_pending"?v.formatMessage(Hi.asyncTaskInProgressLabel):i==="no_source_selected_dr"?b.caterpillarNoneSelectedMessage:i==="text_content_too_long"?v.formatMessage(Hi.textContentTooLongLabel):void 0;if(H){D=H;break e}const z=($=sJ(i))==null?void 0:$.placeholder;if(z){D=v.formatMessage(z);break e}D=void 0}e[20]=b,e[21]=i,e[22]=v,e[23]=D}else D=e[23];const F=D;if(i&&o||y){let H;return e[24]!==L||e[25]!==F?(H=F?r.jsx(_t,{sideOffset:14,label:F,side:"bottom",children:L}):L,e[24]=L,e[25]=F,e[26]=H):H=e[26],H}return L}const Hi=be({stopStreamingLabel:{id:"+yfm/p",defaultMessage:"Stop streaming"},sendPromptLabel:{id:"xfIykB",defaultMessage:"Send prompt"},emptyTextContentLabel:{id:"LCVL2q",defaultMessage:"Message is empty"},textContentTooLongLabel:{id:"kDrqDJ",defaultMessage:"Message is too long"},fileUploadPendingLabel:{id:"Qv7jQN",defaultMessage:"File upload pending"},rateLimitHardBlockLabel:{id:"YhP4bh",defaultMessage:"Messages limit reached"},asyncTaskInProgressLabel:{id:"a959Km",defaultMessage:"Disabled"},bigBoxSubmitShortcutWindows:{id:"v8kTwt",defaultMessage:"Ctrl + Enter to send"},bigBoxSubmitShortcutMac:{id:"DC5el0",defaultMessage:" Enter to send"}}),cTe=R(()=>P(()=>import("./hn96f4ur1sdmogyw.js"),__vite__mapDeps([380,1])),{loading:t=>O(t)}),dTe=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),uTe=({textdocId:t,userCreatedTextdoc:e,isCanvasOpen:n=!1,isFocused:s=!1})=>r.jsxs("div",{className:"group/file-tile relative",children:[r.jsx("button",{onClick:()=>{UL.removeTempTextdoc(t),ob()},className:"dark:border-token-main-surface-secondary absolute -start-1 -top-1 z-10 hidden rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white group-hover/file-tile:block dark:bg-white dark:text-black",children:r.jsx(dTe,{className:"icon-xs"})}),r.jsx(ege,{textdocId:t,clientThreadId:void 0,name:e.title,tag:e.type,icon:r.jsx(cTe,{className:"icon"}),size:"small",isCanvasOpen:n,isFocused:s,isInlinePreview:!0,isInferring:e.status===co.INFERRING,onClick:()=>vi(t),children:r.jsx("div",{className:W("px-4 whitespace-pre",Sg(e.type)&&"font-mono"),children:e.content})})]}),fTe=({textdocId:t,userCreatedTextdoc:e})=>{const n=jb(t),s=am();return r.jsx(uTe,{textdocId:t,userCreatedTextdoc:e,isFocused:n,isCanvasOpen:s})},mTe=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)});function pTe({selectedApp:t}){const e=ne(),n=be({removeItem:{id:"WorkWithAppsTile.removeItem",defaultMessage:"Remove"}});return r.jsxs("div",{className:"group border-token-border-default bg-token-main-surface-primary text-token-text-primary relative inline-block rounded-xl border p-2 text-sm",children:[r.jsxs("div",{className:"grid h-full grid-cols-[auto_1fr] items-center gap-2",children:[r.jsx("div",{className:"icon relative overflow-hidden",children:r.jsx(hTe,{app:t,className:"h-full w-full"})}),r.jsx("div",{className:"truncate font-semibold",children:_Te(t.name)})]}),r.jsx("button",{className:"dark:border-token-main-surface-secondary absolute end-1 top-1 translate-x-1/2 -translate-y-1/2 rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white transition-colors dark:bg-white dark:text-black",children:r.jsx(_t,{label:e.formatMessage(n.removeItem),side:"top",children:r.jsx(mTe,{className:"icon-xs"})})})]})}const gTe=r.jsx("span",{className:"pe-2 text-2xl",children:r.jsx(j,{id:"WorkWithAppsTile.defaultIcon",defaultMessage:""})});function hTe({app:t,className:e}){const[n,s]=_.useState(null);return _.useEffect(()=>{if(!t||!t.icon){s(null);return}const o=new Blob([Wg(t.icon.data)],{type:t.icon.mimeType}),a=URL.createObjectURL(o);return s(a),()=>{URL.revokeObjectURL(a)}},[t]),n?r.jsx("img",{src:n,alt:"",className:e}):gTe}function _Te(t){if(!t)return"";if(t.length<=32)return t;const n=t.substring(0,20),s=t.substring(t.length-9);return"".concat(n,"...").concat(s)}function xTe(t){if(t.length!==1)return!1;const{file:e,fileId:n}=t[0],s=di(e)&&!!(e!=null&&e.type)&&e.type.startsWith("image/"),o=n!=null&&!!e&&Ll(e.name);return s||o}function Ket(t){"use forget";const e=G.c(34),{files:n,selectedApps:s,className:o,activeSystemHintType:a,disableEditButton:i,forceSmallView:l}=t;let c;e[0]!==s?(c=s===void 0?[]:s,e[0]=s,e[1]=c):c=e[1];const d=c,u=i===void 0?!1:i,f=l===void 0?!1:l,m=Mo(),p=ki(),g=Ny.useStore(),{updateSystemHint:h}=oa(),x=Ao(),v=jn(hn);let y;e[2]!==n?(y=xTe(n),e[2]=n,e[3]=y):y=e[3];const b=y,C=!u&&b&&a!==Pe.PictureV2,S=k2e();let k;e[4]!==S?(k=S.map(vTe),e[4]=S,e[5]=k):k=e[5];let E;e[6]!==d?(E=d.map(yTe),e[6]=d,e[7]=E):E=e[7];let T;if(e[8]!==x||e[9]!==n||e[10]!==f||e[11]!==v||e[12]!==m||e[13]!==g||e[14]!==C||e[15]!==b||e[16]!==p||e[17]!==h){let A;e[19]!==x||e[20]!==f||e[21]!==v||e[22]!==m||e[23]!==g||e[24]!==C||e[25]!==b||e[26]!==p||e[27]!==h?(A=I=>{var N;return r.jsx(VR,{borderRadius:"2xl",width:m?"normal":"wide",onRemoveFileClick:()=>{ir.remove(p,I.tempId,"none"),g.removeFile(I.tempId)},useLargeImageThumbnailStyle:b&&!v&&!f,onImageEditClick:C?()=>{x&&h(Pe.PictureV2,{clientThreadId:x.id})}:void 0,file:I.file,fileId:(N=I.fileId)!=null?N:void 0,contextConnectorInfo:I.contextConnectorInfo,loadingPercentage:I.status===Dz.Uploading?I.progress:void 0},I.tempId)},e[19]=x,e[20]=f,e[21]=v,e[22]=m,e[23]=g,e[24]=C,e[25]=b,e[26]=p,e[27]=h,e[28]=A):A=e[28],T=n.map(A),e[8]=x,e[9]=n,e[10]=f,e[11]=v,e[12]=m,e[13]=g,e[14]=C,e[15]=b,e[16]=p,e[17]=h,e[18]=T}else T=e[18];let M;return e[29]!==o||e[30]!==k||e[31]!==E||e[32]!==T?(M=r.jsxs("div",{className:o,children:[k,E,T]}),e[29]=o,e[30]=k,e[31]=E,e[32]=T,e[33]=M):M=e[33],M}function yTe(t){return r.jsx(pTe,{selectedApp:t},t.id)}function vTe(t){return r.jsx(fTe,{textdocId:t.tempTextdocId,userCreatedTextdoc:t},t.tempTextdocId)}const bTe=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),GB=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)}),Qet=t=>{"use forget";const e=G.c(4),{replyRegions:n}=t;let s;e[0]!==n?(s=n.map(kTe),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=r.jsx("div",{className:"divide-token-border-default bg-token-main-surface-primary mx-1 mt-1 flex cursor-auto flex-col divide-y overflow-hidden rounded-t-[24px] rounded-b-lg",children:s}),e[2]=s,e[3]=o):o=e[3],o};function CTe(t){"use forget";const e=G.c(8),{value:n,hideQuotes:s,onRemoveRegion:o}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(_4,{children:r.jsx(GB,{className:"icon"})}),e[0]=a):a=e[0];const i=s?n:"".concat(n,"");let l;e[1]!==i?(l=r.jsx(x4,{children:i}),e[1]=i,e[2]=l):l=e[2];let c;e[3]!==o?(c=o&&r.jsx(g4,{onClick:o}),e[3]=o,e[4]=c):c=e[4];let d;return e[5]!==l||e[6]!==c?(d=r.jsxs(h4,{className:"text-token-text-secondary",children:[a,l,c]}),e[5]=l,e[6]=c,e[7]=d):d=e[7],d}function STe(t){"use forget";const e=G.c(8),{value:n,onRemoveRegion:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(_4,{children:r.jsx(GB,{className:"icon"})}),e[0]=o):o=e[0];let a;e[1]!==n?(a=r.jsx(x4,{className:"font-semibold",children:n}),e[1]=n,e[2]=a):a=e[2];let i;e[3]!==s?(i=r.jsx(g4,{onClick:s}),e[3]=s,e[4]=i):i=e[4];let l;return e[5]!==a||e[6]!==i?(l=r.jsxs(h4,{className:"text-blue-400",children:[o,a,i]}),e[5]=a,e[6]=i,e[7]=l):l=e[7],l}function wTe(t){"use forget";const e=G.c(10),{value:n,icon:s,onRemoveRegion:o}=t;let a;e[0]!==s?(a=r.jsx(_4,{className:"mt-0",children:s}),e[0]=s,e[1]=a):a=e[1];let i;e[2]!==n?(i=r.jsx(x4,{className:"text-token-text-primary font-semibold",children:n}),e[2]=n,e[3]=i):i=e[3];let l;e[4]!==o?(l=r.jsx(g4,{onClick:o}),e[4]=o,e[5]=l):l=e[5];let c;return e[6]!==a||e[7]!==i||e[8]!==l?(c=r.jsxs(h4,{children:[a,i,l]}),e[6]=a,e[7]=i,e[8]=l,e[9]=c):c=e[9],c}function g4(t){"use forget";const e=G.c(6),{onClick:n}=t,s=ne();let o;e[0]!==s?(o=s.formatMessage({id:"PlVqJ1",defaultMessage:"Remove"}),e[0]=s,e[1]=o):o=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(bTe,{className:"icon"}),e[2]=a):a=e[2];let i;return e[3]!==n||e[4]!==o?(i=r.jsx("button",{onClick:n,type:"button",className:"text-token-text-secondary flex h-9 w-9 shrink-0 items-center justify-center","aria-label":o,children:a}),e[3]=n,e[4]=o,e[5]=i):i=e[5],i}var wE;const h4=mt.div(wE||(wE=ct(["bg-token-main-surface-secondary dark:bg-token-main-surface-tertiary flex items-start py-1 gap-1.5 px-1.5 text-sm"])));var kE;const _4=mt.span(kE||(kE=ct(["shrink-0 w-9 h-9 flex justify-center items-center"])));var EE;const x4=mt.span(EE||(EE=ct(["flex-1 line-clamp-3 py-2"])));function kTe(t,e){switch(t.type){case"text":return r.jsx(CTe,{value:t.value,hideQuotes:t.hideQuotes,onRemoveRegion:t.onRemoveRegion},e);case"object":return r.jsx(STe,{value:t.value,onRemoveRegion:t.onRemoveRegion},e);case"mention":case"system_hint":return r.jsx(wTe,{value:t.value,icon:t.icon,onRemoveRegion:t.onRemoveRegion},e)}return null}const ETe="_fallbackTextarea_1dsxi_2",z7={"prosemirror-parent":"_prosemirror-parent_1dsxi_2",fallbackTextarea:ETe},TTe=be({informationSeekingAskLatestNews:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askLatestNews",defaultMessage:"Ask for the latest news"},informationSeekingAskTodaysWeather:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askTodaysWeather",defaultMessage:"Ask about today's weather"},informationSeekingAskFunTrivia:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askFunTrivia",defaultMessage:"Ask for fun trivia"},informationSeekingAskFamousQuotes:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askFamousQuotes",defaultMessage:"Ask for famous quotes"},informationSeekingAskShortExplainer:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askShortExplainer",defaultMessage:"Ask for a short explainer"},informationSeekingAskMovieSuggestions:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askMovieSuggestions",defaultMessage:"Ask for movie suggestions"},informationSeekingAskBookSummaries:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askBookSummaries",defaultMessage:"Ask for book summaries"},informationSeekingAskTravelRecommendations:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askTravelRecommendations",defaultMessage:"Ask for travel recommendations"},informationSeekingAskPopularLocalRestaurants:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askPopularLocalRestaurants",defaultMessage:"Ask about popular local restaurants"},informationSeekingAskLatestGameScore:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askLatestGameScore",defaultMessage:"Ask for the latest game score"},informationSeekingAskRecipeIdeas:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askRecipeIdeas",defaultMessage:"Ask for recipe ideas"},informationSeekingAskProductReviews:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askProductReviews",defaultMessage:"Ask for product reviews"},informationSeekingAskTranslationHelp:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askTranslationHelp",defaultMessage:"Ask for translation help"},howToAskHelpAchievingGoal:{id:"PromptTextarea.rotatingPlaceholders.howTo.askHelpAchievingGoal",defaultMessage:"Ask for help achieving a goal"},howToAskFixSomething:{id:"PromptTextarea.rotatingPlaceholders.howTo.askFixSomething",defaultMessage:"Ask how to fix something"},howToAskStayOrganized:{id:"PromptTextarea.rotatingPlaceholders.howTo.askStayOrganized",defaultMessage:"Ask how to stay organized"},howToAskBudgetBetter:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBudgetBetter",defaultMessage:"Ask how to budget better"},howToAskImproveFocus:{id:"PromptTextarea.rotatingPlaceholders.howTo.askImproveFocus",defaultMessage:"Ask how to improve your focus"},howToAskBuildHabit:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBuildHabit",defaultMessage:"Ask how to build a habit"},howToAskManageStressTips:{id:"PromptTextarea.rotatingPlaceholders.howTo.askManageStressTips",defaultMessage:"Ask for tips to manage stress"},howToAskBakeBread:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBakeBread",defaultMessage:"Ask how to bake bread"},howToAskBoostCreativityTips:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBoostCreativityTips",defaultMessage:"Ask for tips to boost creativity"},howToAskNegotiateSalary:{id:"PromptTextarea.rotatingPlaceholders.howTo.askNegotiateSalary",defaultMessage:"Ask how to negotiate a salary"},howToAskTripPlanningTips:{id:"PromptTextarea.rotatingPlaceholders.howTo.askTripPlanningTips",defaultMessage:"Ask for trip planning tips"},howToAskWriteResume:{id:"PromptTextarea.rotatingPlaceholders.howTo.askWriteResume",defaultMessage:"Ask how to write a resume"},howToAskMakeCoffee:{id:"PromptTextarea.rotatingPlaceholders.howTo.askMakeCoffee",defaultMessage:"Ask how to make coffee"},howToAskUseExcel:{id:"PromptTextarea.rotatingPlaceholders.howTo.askUseExcel",defaultMessage:"Ask how to use Excel"},howToAskRefreshDecor:{id:"PromptTextarea.rotatingPlaceholders.howTo.askRefreshDecor",defaultMessage:"Ask how to refresh your decor"},howToAskManageTime:{id:"PromptTextarea.rotatingPlaceholders.howTo.askManageTime",defaultMessage:"Ask how to manage time"},howToAskNetworkEffectively:{id:"PromptTextarea.rotatingPlaceholders.howTo.askNetworkEffectively",defaultMessage:"Ask how to network effectively"},howToAskStayMotivated:{id:"PromptTextarea.rotatingPlaceholders.howTo.askStayMotivated",defaultMessage:"Ask how to stay motivated"},educationAskExplainConcept:{id:"PromptTextarea.rotatingPlaceholders.education.askExplainConcept",defaultMessage:"Ask to explain a concept"},educationAskStudyTips:{id:"PromptTextarea.rotatingPlaceholders.education.askStudyTips",defaultMessage:"Ask for study tips"},educationAskMathHelp:{id:"PromptTextarea.rotatingPlaceholders.education.askMathHelp",defaultMessage:"Ask for help with a math problem"},educationAskTopicOverview:{id:"PromptTextarea.rotatingPlaceholders.education.askTopicOverview",defaultMessage:"Ask for a topic overview"},educationAskHistoryPeriod:{id:"PromptTextarea.rotatingPlaceholders.education.askHistoryPeriod",defaultMessage:"Ask about a period in history"},educationAskTestPrepHelp:{id:"PromptTextarea.rotatingPlaceholders.education.askTestPrepHelp",defaultMessage:"Ask for test prep help"},educationAskLearnLanguage:{id:"PromptTextarea.rotatingPlaceholders.education.askLearnLanguage",defaultMessage:"Ask for help learning a language"},educationAskSimplifyIdeas:{id:"PromptTextarea.rotatingPlaceholders.education.askSimplifyIdeas",defaultMessage:"Ask for help simplifying ideas"},educationAskMemoryTricks:{id:"PromptTextarea.rotatingPlaceholders.education.askMemoryTricks",defaultMessage:"Ask for tricks to help memory"},educationAskStructureEssay:{id:"PromptTextarea.rotatingPlaceholders.education.askStructureEssay",defaultMessage:"Ask how to structure an essay"},educationAskHomeworkHelp:{id:"PromptTextarea.rotatingPlaceholders.education.askHomeworkHelp",defaultMessage:"Ask for homework help"},educationAskCustomizedQuiz:{id:"PromptTextarea.rotatingPlaceholders.education.askCustomizedQuiz",defaultMessage:"Ask for a customized quiz"},educationAskGrammarCheck:{id:"PromptTextarea.rotatingPlaceholders.education.askGrammarCheck",defaultMessage:"Ask for a grammar check"},educationAskCodingBasics:{id:"PromptTextarea.rotatingPlaceholders.education.askCodingBasics",defaultMessage:"Ask for help with coding basics"},writingAskDraftMessages:{id:"PromptTextarea.rotatingPlaceholders.writing.askDraftMessages",defaultMessage:"Ask to draft messages"},writingAskDraftText:{id:"PromptTextarea.rotatingPlaceholders.writing.askDraftText",defaultMessage:"Ask to draft a text"},writingAskDraftEmail:{id:"PromptTextarea.rotatingPlaceholders.writing.askDraftEmail",defaultMessage:"Ask to draft an email"},writingAskToneSuggestions:{id:"PromptTextarea.rotatingPlaceholders.writing.askToneSuggestions",defaultMessage:"Ask for tone suggestions"},writingAskSmallTalkTips:{id:"PromptTextarea.rotatingPlaceholders.writing.askSmallTalkTips",defaultMessage:"Ask for small talk tips"},writingAskPersuasiveTips:{id:"PromptTextarea.rotatingPlaceholders.writing.askPersuasiveTips",defaultMessage:"Ask for persuasive writing tips"},writingAskBlogIdeas:{id:"PromptTextarea.rotatingPlaceholders.writing.askBlogIdeas",defaultMessage:"Ask for blog ideas"},writingAskSocialMediaCaptions:{id:"PromptTextarea.rotatingPlaceholders.writing.askSocialMediaCaptions",defaultMessage:"Ask for social media captions"},writingAskStorytellingAdvice:{id:"PromptTextarea.rotatingPlaceholders.writing.askStorytellingAdvice",defaultMessage:"Ask for storytelling advice"},writingAskOutlineSpeech:{id:"PromptTextarea.rotatingPlaceholders.writing.askOutlineSpeech",defaultMessage:"Ask to outline a speech"},writingAskCreativePrompts:{id:"PromptTextarea.rotatingPlaceholders.writing.askCreativePrompts",defaultMessage:"Ask for creative prompts"},writingAskSocialMediaCopy:{id:"PromptTextarea.rotatingPlaceholders.writing.askSocialMediaCopy",defaultMessage:"Ask for social media copy"},writingAskHeadlineIdeas:{id:"PromptTextarea.rotatingPlaceholders.writing.askHeadlineIdeas",defaultMessage:"Ask for headline ideas"},writingAskSummarizeText:{id:"PromptTextarea.rotatingPlaceholders.writing.askSummarizeText",defaultMessage:"Ask to summarize text"},writingAskPresentationTips:{id:"PromptTextarea.rotatingPlaceholders.writing.askPresentationTips",defaultMessage:"Ask for presentation tips"},writingAskFeedbackPhrasing:{id:"PromptTextarea.rotatingPlaceholders.writing.askFeedbackPhrasing",defaultMessage:"Ask for feedback phrasing"},healthAskDailyMotivation:{id:"PromptTextarea.rotatingPlaceholders.health.askDailyMotivation",defaultMessage:"Ask for daily motivation"},healthAskHealthyHabits:{id:"PromptTextarea.rotatingPlaceholders.health.askHealthyHabits",defaultMessage:"Ask for simple healthy habits"},healthAskMindfulnessTips:{id:"PromptTextarea.rotatingPlaceholders.health.askMindfulnessTips",defaultMessage:"Ask for mindfulness tips"},healthAskSleepBetter:{id:"PromptTextarea.rotatingPlaceholders.health.askSleepBetter",defaultMessage:"Ask how to sleep better"},healthAskProteinRecipes:{id:"PromptTextarea.rotatingPlaceholders.health.askProteinRecipes",defaultMessage:"Ask for protein-packed recipes"},healthAskTwentyMinuteWorkouts:{id:"PromptTextarea.rotatingPlaceholders.health.askTwentyMinuteWorkouts",defaultMessage:"Ask for 20-minute workout ideas"},healthAskMeditationTechniques:{id:"PromptTextarea.rotatingPlaceholders.health.askMeditationTechniques",defaultMessage:"Ask for meditation techniques"},healthAskSelfCareIdeas:{id:"PromptTextarea.rotatingPlaceholders.health.askSelfCareIdeas",defaultMessage:"Ask for simple self-care ideas"},healthAskBoostEnergy:{id:"PromptTextarea.rotatingPlaceholders.health.askBoostEnergy",defaultMessage:"Ask how to boost your energy"},healthAskHydrationTips:{id:"PromptTextarea.rotatingPlaceholders.health.askHydrationTips",defaultMessage:"Ask for hydration tips"},healthAskStretchingRoutines:{id:"PromptTextarea.rotatingPlaceholders.health.askStretchingRoutines",defaultMessage:"Ask for stretching routines"},healthAskNutritionInfo:{id:"PromptTextarea.rotatingPlaceholders.health.askNutritionInfo",defaultMessage:"Ask for nutritional info for a food"},healthAskStressReliefTips:{id:"PromptTextarea.rotatingPlaceholders.health.askStressReliefTips",defaultMessage:"Ask for stress-relief tips"},healthAskDeskExercises:{id:"PromptTextarea.rotatingPlaceholders.health.askDeskExercises",defaultMessage:"Ask for exercises to do at your desk"},healthAskProductivityHacks:{id:"PromptTextarea.rotatingPlaceholders.health.askProductivityHacks",defaultMessage:"Ask for productivity hacks"}}),Gr=[{id:"informationSeeking",messageKeys:["informationSeekingAskLatestNews","informationSeekingAskTodaysWeather","informationSeekingAskFunTrivia","informationSeekingAskFamousQuotes","informationSeekingAskShortExplainer","informationSeekingAskMovieSuggestions","informationSeekingAskBookSummaries","informationSeekingAskTravelRecommendations","informationSeekingAskPopularLocalRestaurants","informationSeekingAskLatestGameScore","informationSeekingAskRecipeIdeas","informationSeekingAskProductReviews","informationSeekingAskTranslationHelp"]},{id:"howToGuidance",messageKeys:["howToAskHelpAchievingGoal","howToAskFixSomething","howToAskStayOrganized","howToAskBudgetBetter","howToAskImproveFocus","howToAskBuildHabit","howToAskManageStressTips","howToAskBakeBread","howToAskBoostCreativityTips","howToAskNegotiateSalary","howToAskTripPlanningTips","howToAskWriteResume","howToAskMakeCoffee","howToAskUseExcel","howToAskRefreshDecor","howToAskManageTime","howToAskNetworkEffectively","howToAskStayMotivated"]},{id:"educationLearning",messageKeys:["educationAskExplainConcept","educationAskStudyTips","educationAskMathHelp","educationAskTopicOverview","educationAskHistoryPeriod","educationAskTestPrepHelp","educationAskLearnLanguage","educationAskSimplifyIdeas","educationAskMemoryTricks","educationAskStructureEssay","educationAskHomeworkHelp","educationAskCustomizedQuiz","educationAskGrammarCheck","educationAskCodingBasics"]},{id:"writingCommunication",messageKeys:["writingAskDraftMessages","writingAskDraftText","writingAskDraftEmail","writingAskToneSuggestions","writingAskSmallTalkTips","writingAskPersuasiveTips","writingAskBlogIdeas","writingAskSocialMediaCaptions","writingAskStorytellingAdvice","writingAskOutlineSpeech","writingAskCreativePrompts","writingAskSocialMediaCopy","writingAskHeadlineIdeas","writingAskSummarizeText","writingAskPresentationTips","writingAskFeedbackPhrasing"]},{id:"healthWellness",messageKeys:["healthAskDailyMotivation","healthAskHealthyHabits","healthAskMindfulnessTips","healthAskSleepBetter","healthAskProteinRecipes","healthAskTwentyMinuteWorkouts","healthAskMeditationTechniques","healthAskSelfCareIdeas","healthAskBoostEnergy","healthAskHydrationTips","healthAskStretchingRoutines","healthAskNutritionInfo","healthAskStressReliefTips","healthAskDeskExercises","healthAskProductivityHacks"]}];function MTe(t,e,n,s){return t.current&&(clearInterval(t.current),t.current=null),_.startTransition(()=>{n(),t.current=window.setInterval(()=>{_.startTransition(()=>{s()})},e)}),()=>{t.current&&(clearInterval(t.current),t.current=null)}}const ATe={"composer-slide":"_composer-slide_rfswj_125","composer-placeholder-rotate":"_composer-placeholder-rotate_rfswj_135","pinned-widget":"_pinned-widget_rfswj_196","becoming-inline":"_becoming-inline_rfswj_240","becoming-pinned":"_becoming-pinned_rfswj_261","fullscreen-widget-composer-transition":"_fullscreen-widget-composer-transition_rfswj_280","fullscreen-popover-thread-opening-transition":"_fullscreen-popover-thread-opening-transition_rfswj_294","fullscreen-popover-thread-closing-transition":"_fullscreen-popover-thread-closing-transition_rfswj_295"},ITe=3500;function m2(){return Gr.length===0?{nextCategoryIndex:0}:{nextCategoryIndex:Gr.length>1?1:0}}const Jet=({composerController:t,placeholder:e,disableAutoFocus:n=!1,textareaMaxHeightClassName:s="max-h-[max(30svh,5rem)]",fontSize:o="base",enableRotatingPlaceholders:a=!1})=>{"use no forget";const i=_.useRef(null),l=_.useRef(null),c=_.useRef(!1),d=_.useRef(null),u=_.useRef(m2()),f=V(),m=ne(),p=ae(()=>sM()),g=Q8(f),h=ae(g.composer.autofocusDisabled$),x=_.useRef(n||h),v=T=>Math.floor(Math.random()*T),y=_.useCallback(T=>{if(T.messageKeys.length===0)return null;const M=v(T.messageKeys.length),A=T.messageKeys[M];return{messageKey:A,placeholder:m.formatMessage(TTe[A])}},[m]),b=_.useMemo(()=>{var A;if(!a)return e;const T=Gr[0],M=T!=null?y(T):null;return(A=M==null?void 0:M.placeholder)!=null?A:e},[a,y,e]),[C,S]=_.useState(()=>a?b:e),k=_.useCallback((T,{withTransition:M=!0}={})=>{const A=()=>{S(T)},I=typeof document<"u"&&document.querySelector('[data-modal-layer="overlay"]')!==null;if(!M||p||I){A();return}KO({className:ATe["composer-placeholder-rotate"],update:A})},[p]),E=_.useCallback(()=>{var N;if(Gr.length===0)return;const T=u.current,M=(N=T.nextCategoryIndex)!=null?N:0,A=Gr[M];if(T.nextCategoryIndex=(M+1)%Gr.length,!A)return;const I=y(A);I&&(k(I.placeholder),B.logEventWithStatsig("chatgpt_web_prompttextarea_placeholder_rotated","chatgpt_web_prompttextarea_placeholder_rotated",{category:A.id,message_key:I.messageKey}),Ie.count(je.DEFAULT,"chatgpt_web_prompttextarea_placeholder_rotated",{category:A.id,message_key:I.messageKey}))},[k,y]);return Xn(()=>{if(c.current||!i.current)return;const T=Pt(t);c.current=!0;const M=l.current;if(M!=null){const{value:A,selectionStart:I,selectionEnd:N}=M;T.dispatch(T.state.tr.insertText(A)),T.dispatch(T.state.tr.setSelection(nM.create(T.state.doc,I+1,N+1))),M.style.display="none",M.value=""}i.current.appendChild(T.dom),T.dom.id=hg,T.dom.dataset.virtualkeyboard="true",rJ(T.dom),x.current||so(Pt(t))},[t]),_.useEffect(()=>{if(!a||Gr.length===0)return;u.current=m2();const T=Gr[0];if(T){const M=y(T);M&&k(M.placeholder,{withTransition:!1})}return MTe(d,ITe,()=>{},E)},[a,k,y,E]),_.useEffect(()=>{a||S(e)},[e,a]),_.useEffect(()=>{a||(u.current=m2())},[a]),_.useEffect(()=>{const T=i.current;if(!T)return;const M=Pt(t);return zl({target:M.dom,axis:"height",onChange:({height:A,previousHeight:I})=>{if(wn(()=>c6(t))&&I!=null&&A>I)return;const N=document.createElement("span");N.textContent="",N.inert=!0;const L=getComputedStyle(M.dom);for(const F of["font-size","line-height","padding-top","padding-bottom"])N.style.setProperty(F,L.getPropertyValue(F));N.style.position="absolute",T.appendChild(N);const D=N.offsetHeight;T.removeChild(N),c6.set(t,A>D)}})},[t]),_.useEffect(()=>{Fz(Pt(t),C)},[C,t]),_.useEffect(()=>{Re.addFirstTiming("chatgpt.web.chatPage.prompttextarea.modern.mounted",{serialTimingGroup:"pageLoad"})},[]),r.jsxs("div",{ref:i,onKeyDown:()=>{lf.postTask(()=>{Bs.prefetch()},{priority:"background"})},className:W([z7["prosemirror-parent"],"text-token-text-primary",s,"max-h-52","flex-1 overflow-auto [scrollbar-width:thin]",tM()?"firefox":"default-browser"],"vertical-scroll-fade-mask"),"data-size":o!=="base"?o:void 0,children:[r.jsx("textarea",{className:z7.fallbackTextarea,name:hg,autoFocus:!x.current,placeholder:C,ref:l,"data-virtualkeyboard":!0}),r.jsx(Qpe,{scriptSrc:"window.__oai_logHTML?window.__oai_logHTML():window.__oai_SSR_HTML=window.__oai_SSR_HTML||Date.now();requestAnimationFrame((function(){window.__oai_logTTI?window.__oai_logTTI():window.__oai_SSR_TTI=window.__oai_SSR_TTI||Date.now()}))"})]})},jTe=4,WB=.0025;function Xet(n){var s=n,{composerController:t}=s,e=ke(s,["composerController"]);const{waveformData$:o}=i4(t),a=ae(o);return a?r.jsx(NTe,w({waveform:a},e)):null}function NTe({waveform:t,progressPercentage:e,barWidth:n=jTe,normalize:s=!1,scaleFactor:o=10,initialValue:a=WB,silentColor:i,activeColor:l,className:c}){const d=_.useRef(null),u=ea(),f=i!=null?i:u?"#000":"#CCC",m=l!=null?l:u?"#CCC":"#000",[p,g]=_.useState(300);_.useEffect(()=>{d.current&&g(d.current.clientWidth)},[]);const{soundBars:h,firstAudioBarIndex:x}=_.useMemo(()=>{const v=t.length,y=Math.floor(p/n),b=v/y;let C=-1;const S=[];for(let E=0;E<y;E++){const T=Math.floor(E*b),M=Math.min(Math.floor((E+1)*b),v);if(T>=M){S.push(0);continue}let A=0;for(let N=T;N<M;N++)A+=Math.abs(t[N]);const I=A/(M-T);C===-1&&I>a&&(C=E),S.push(I)}let k=S;if(s){const T=1/(Math.max(...k)||1);k=k.map(M=>{const A=M*T;return Math.max(Math.min(A,.92),.08)})}return{soundBars:k,firstAudioBarIndex:C}},[t,p,n,s,a]);return _.useEffect(()=>{const v=d.current,y=v==null?void 0:v.getContext("2d");if(!v||!y)return;const b=window.devicePixelRatio,{clientHeight:C,clientWidth:S}=v;v.width=S*b,v.height=C*b,y.clearRect(0,0,v.width,v.height);const k=C*b*.5;y.translate(0,k);const E=v.width/h.length;for(let T=0;T<h.length;T++){let M=h[T];s||(M*=o);const A=M*k,I=T*E;if(typeof e=="number"){const L=(h.length-T)/h.length<e;y.fillStyle=L?m:f}else{const N=x===-1||T<x?f:m;y.fillStyle=N}y.fillRect(I,-A,E/2,A*2)}},[h,p,f,m,s,o,x,e]),r.jsx("canvas",{ref:d,className:W("h-8 w-full",c)})}const zB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M15.7806 10.1963C16.1326 10.3011 16.3336 10.6714 16.2288 11.0234L16.1487 11.2725C15.3429 13.6262 13.2236 15.3697 10.6644 15.6299L10.6653 16.835H12.0833L12.2171 16.8486C12.5202 16.9106 12.7484 17.1786 12.7484 17.5C12.7484 17.8214 12.5202 18.0894 12.2171 18.1514L12.0833 18.165H7.91632C7.5492 18.1649 7.25128 17.8672 7.25128 17.5C7.25128 17.1328 7.5492 16.8351 7.91632 16.835H9.33527L9.33429 15.6299C6.775 15.3697 4.6558 13.6262 3.84992 11.2725L3.76984 11.0234L3.74445 10.8906C3.71751 10.5825 3.91011 10.2879 4.21808 10.1963C4.52615 10.1047 4.84769 10.2466 4.99347 10.5195L5.04523 10.6436L5.10871 10.8418C5.8047 12.8745 7.73211 14.335 9.99933 14.335C12.3396 14.3349 14.3179 12.7789 14.9534 10.6436L15.0052 10.5195C15.151 10.2466 15.4725 10.1046 15.7806 10.1963ZM12.2513 5.41699C12.2513 4.17354 11.2437 3.16521 10.0003 3.16504C8.75675 3.16504 7.74835 4.17343 7.74835 5.41699V9.16699C7.74853 10.4104 8.75685 11.418 10.0003 11.418C11.2436 11.4178 12.2511 10.4103 12.2513 9.16699V5.41699ZM13.5814 9.16699C13.5812 11.1448 11.9781 12.7479 10.0003 12.748C8.02232 12.748 6.41845 11.1449 6.41828 9.16699V5.41699C6.41828 3.43889 8.02221 1.83496 10.0003 1.83496C11.9783 1.83514 13.5814 3.439 13.5814 5.41699V9.16699Z"})),PTe=Object.freeze(Object.defineProperty({__proto__:null,default:zB},Symbol.toStringTag,{value:"Module"})),ett=300,ttt=async(t=1)=>{let e=0,n;return new Promise(s=>{const o=a=>(n||(n=a),a-n<t*1e3?(e+=1,requestAnimationFrame(o)):s(Math.floor(e/t)));requestAnimationFrame(o)})},ntt=t=>{const e=_.useRef(t),n=_.useCallback(s=>{(e.current[0]!==s.width||e.current[1]!==s.height)&&(e.current=[s.width,s.height])},[]);return{canvasSizeRef:e,handleCanvasSizeUpdate:n}},stt=t=>{var i,l,c,d,u,f,m,p,g;const{voiceSessionId:e,server:n,voiceMode:s,audioInputDevice:o,voiceStatus:a}=t;return{voice_session_id:e!=null?e:"(none)",server_messages:n.messages.map(h=>h.type).join(","),rate_limit_message:(l=JSON.stringify((i=n.usage)==null?void 0:i.rate_limit_message))!=null?l:"(none)",audio_s:(d=(c=n.usage)==null?void 0:c.audio_s)!=null?d:"(none)",tool_update:(f=(u=n.toolUpdate)==null?void 0:u.type)!=null?f:"(none)",voice_connection_quality:(m=n.voiceConnectionQuality)!=null?m:"(none)",voice_mode:s!=null?s:"(none)",audio_input_device:(p=o==null?void 0:o.label)!=null?p:"(none)",voice_status:(g=JSON.stringify(a))!=null?g:"(none)"}};function qB(t){return t instanceof DOMException&&t.name==="NotAllowedError"?(Bt.permissions.denied({message:t.message}),!0):!1}const Xu=class Xu{constructor(){Q(this,"userMediaPromiseMap",new Map)}static getLocalDevices(e,n=!0){return Xu.instance.getDevices(e,n)}async getDevices(e,n=!0){if(this.userMediaPromiseMap.size>0)try{e?await this.userMediaPromiseMap.get(e):await Promise.all(Array.from(this.userMediaPromiseMap.values()))}catch(o){console.warn("error waiting for media permissions",o)}let s=await navigator.mediaDevices.enumerateDevices();if(n&&!(oM()&&this.hasDeviceInUse(e))&&(s.filter(a=>a.kind===e).length===0||s.some(a=>{const i=a.label==="",l=e?a.kind===e:!0;return i&&l}))){const a={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},i=await navigator.mediaDevices.getUserMedia(a);s=await navigator.mediaDevices.enumerateDevices(),i.getTracks().forEach(l=>{l.stop()})}return e&&(s=s.filter(o=>o.kind===e)),s}hasDeviceInUse(e){return e?this.userMediaPromiseMap.has(e):this.userMediaPromiseMap.size>0}};Q(Xu,"instance",new Xu);let Dy=Xu;async function RTe(t){let e;try{e=await Dy.getLocalDevices(t)}catch(o){qB(o),bi.debug("Error fetching local devices",o);return}const n={};for(const o of e)o.kind===t&&(n[o.groupId]||(n[o.groupId]=[]),n[o.groupId].push(o));for(const o in n){const a=n[o];if(a.length>1&&a.find(l=>l.deviceId==="default")){const l=a.find(c=>c.deviceId!=="default");if(l)return l}}let s;for(const o of e)if(o.kind===t){if(o.deviceId==="default")return o;s||(s=o)}return s}async function LTe(){var a,i;const e=(await navigator.mediaDevices.enumerateDevices()).filter(l=>l.kind==="audioinput"),n=e.find(l=>l.deviceId==="default"),s=e.find(l=>l.label.toLowerCase().includes("iphone")),o=e.find(l=>{const c=!!(s&&s.label!==l.label),d=!!(n&&l.deviceId===n.deviceId);return c||d});return(i=o==null?void 0:o.deviceId)!=null?i:(a=e[0])==null?void 0:a.deviceId}const OTe=()=>{const t=aM()&&Yo;return async()=>{if(t)return await Bz();try{const e=await LTe(),n=await navigator.mediaDevices.getUserMedia({audio:e!==""?{deviceId:{exact:e}}:!0,video:!1}),s=await navigator.mediaDevices.enumerateDevices();return n.getTracks().forEach(a=>a.stop()),s.some(a=>a.kind==="audioinput"&&a.label!=="")}catch(e){if(!qB(e))throw e;return!1}}};function DTe(t){const e=_.useRef(void 0);_.useEffect(()=>{if(!(aM()&&Yo||!navigator.permissions))return navigator.permissions.query({name:"microphone"}).then(s=>{e.current=s,s.onchange=()=>{t(s.state==="granted")}}).catch(()=>{}),()=>{e.current&&(e.current.onchange=null)}},[t])}const FTe=()=>{const[t,e]=_.useState(!1),[n,s]=_.useState(!1),[o,a]=_.useState(),i=_.useCallback(u=>{e(u)},[]);DTe(i);const l=OTe(),c=_.useCallback(async()=>n?t:l().then(u=>(e(u),u)).finally(()=>{s(!0)}),[l,n,t]);return _.useEffect(()=>{t&&BTe().then(u=>{a(u)})},[t]),{permissionsRequested:n,requestMicrophonePermissions:c,userDeclinedMicrophonePermissions:n&&!t,microphoneAvailable:t,microphoneLabel:o}},BTe=async()=>{var t;try{const e=await RTe("audioinput");return(t=e==null?void 0:e.label)!=null?t:""}catch(e){const n=hv();return Re.addError("Failed to fetch default media device",{error:e,protocol:n}),"Error accessing microphone devices"}},UTe={status:"idle"},$Te=Dt()(Nf(In(()=>w({},UTe)))),YB=W("flex items-center justify-center rounded-full"),ZB=W(YB,"border border-token-border-default p-1 text-token-text-secondary","focus-visible:outline-black dark:text-token-text-secondary dark:focus-visible:outline-white","bg-transparent dark:bg-transparent"),KB=W("hover:bg-token-main-surface-tertiary"),QB=W(YB,"bg-transparent text-token-text-secondary transition-colors","hover:bg-token-main-surface-tertiary focus-visible:outline-black","disabled:text-[#f4f4f4] disabled:opacity-30","dark:bg-transparent dark:text-token-text-secondary dark:hover:bg-token-main-surface-tertiary dark:focus-visible:outline-white","h-8 w-8"),VTe=t=>{const{requestMicrophonePermissions:e}=FTe(),s=ne().formatMessage({id:"vONrv3",defaultMessage:"Enable mic access to dictate"}),o=Ut();return async()=>{if(B.logEvent("Whisper on Web/Windows: Clicked to start dictation"),Ye.logEvent("chatgpt_composer_whisper_button_clicked_start"),!await e())return o.danger(s,{toastId:"whisper_icon_button_click_failure"});t()}},HTe=c=>{var d=c,{size:t="medium",disabled:e,onExit:n,buttonClassName:s,invertColor:o,disableTooltip:a=!1,visualTreatment:i}=d,l=ke(d,["size","disabled","onExit","buttonClassName","invertColor","disableTooltip","visualTreatment"]);const u=ne(),f=$Te(h=>h.status),m=VTe(n);f==="error"&&(B.logEvent("Whisper on Web/Windows: Error"),Ye.logEvent("chatgpt_composer_whisper_button_error"));const p=r.jsx(zB,{"aria-label":"",className:"icon",fontSize:"inherit"}),g=jn(hn);return r.jsx(GTe,{disabled:a,children:i==="composer-btn"||i==="codex"?r.jsx("button",U(w({},l),{"aria-label":u.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),type:"button",onClick:m,disabled:e,className:W("composer-btn",g&&"composer-btn--desktopSidebar"),children:p})):r.jsx(_e,U(w({},l),{"aria-label":u.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),size:t,type:"button",onClick:m,disabled:e,className:W(o?QB:ZB,"[view-transition-name:var(--vt-composer-whisper-button)]",e?"opacity-30":!o&&KB,"dark:hover:bg-transparent dark:hover:opacity-100",s),children:p}))})};function GTe({children:t,disabled:e=!1}){const n=ne();return r.jsx(_t,{open:e?!1:void 0,label:n.formatMessage({id:"abw2XH",defaultMessage:"Dictate"}),side:"bottom",onOpenChange:s=>{s&&(B.logEvent("Whisper on Web/Windows: Button hover to see tooltip"),Ye.logEvent("chatgpt_composer_whisper_button_hovered"))},children:t})}const q7=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),Y7=R(()=>P(()=>import("./kspsmo2l8jg7uqdj.js"),__vite__mapDeps([26,1])),{loading:t=>O(t)});function WTe(t){const e=V();return tt(e)?r.jsx(HTe,w({},t)):null}function zTe(t){return t.visualTreatment==="codex"?r.jsxs("div",{className:"flex gap-x-1.5",children:[r.jsx(_e,{type:"button",color:"ghost",size:"small",icon:q7,children:r.jsx(j,{id:"wham.whisperModeControlsLoading.cancel",defaultMessage:"Cancel"})}),r.jsx(_e,{type:"button",color:"secondary",size:"small",icon:Y7,children:r.jsx(j,{id:"wham.whisperModeControlsLoading.done",defaultMessage:"Done"})})]}):r.jsxs("div",{className:"flex gap-x-1.5",children:[r.jsx("div",{className:W(ZB,KB,t.buttonClassName),children:r.jsx(q7,{className:"icon"})}),r.jsx("div",{className:W(QB,t.buttonClassName),children:r.jsx(Y7,{className:"icon-lg"})})]})}const qTe=R(()=>P(()=>import("./oioy1sryt6z5x9kx.js"),__vite__mapDeps([381,1,10,11])).then(t=>t.WhisperModeControls),{loading:t=>r.jsx(zTe,w({},t))});function YTe(t){return r.jsx(qTe,w({},t))}function ott({composerController:t,composerType:e}){const{waveformData$:n,isWhisperActive$:s}=i4(t),o=ae(s),a=_.useCallback((i,l,c,d)=>{const u=Pt(t),f=u.state.selection.ranges[0].$from.pos;s.set(!1),requestAnimationFrame(()=>{u.focus(),u.dispatch(u.state.tr.insertText(i,f,f)),u.dispatch(u.state.tr.setSelection(nM.create(u.state.doc,f+i.length)).scrollIntoView()),Cke(t).setData({usedDictation:!0,dictationOriginalText:i!=null?i:null,dictationAssetPointer:l!=null?l:null,dictationAssetTTL:c!=null?c:null,dictationAssetFormat:d!=null?d:null})})},[t,s]);return o?r.jsx(YTe,{initialValue:WB,onSuccess:a,onWaveformDataUpdate:n.set,onExit:()=>{s.set(!1)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"}):r.jsx(WTe,{size:"small",onExit:()=>{s.set(!0)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"})}const ZTe=Ge({id:"imageGenEditor.transformationTextareaPlaceholder",defaultMessage:"Describe what you want to add, remove or replace"}),KTe=Ge({id:"imageGenEditor.transformationTextareaPlaceholderShort",defaultMessage:"Describe your edit"}),Fy="image",att=({image:t,currentDrawnShape:e,onCleared:n,getImageData:s})=>{const o=ne(),{setTargetedContent:a}=vm(),i=Ut(),c=wr()?ZTe:KTe;_.useEffect(()=>(e==null?a({type:"object",subtype:Fy,placeholderTextOverride:c,shouldPersistAcrossMessages:!0,isFocusedViewContent:!1,createNewCompletionParams:d=>tke(d,t)}):a({type:"object",subtype:Fy,placeholderTextOverride:c,isFocusedViewContent:!1,createNewCompletionParams:async d=>await ske(d,t,s(),o,i),onCleared:n}),()=>{a(void 0)}),[e,s,t,o,n,a,i,c])},JB={cyberpunk:{id:"cyberpunk",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/cyberpunk.webp",label:Ge({id:"EoebyJ",defaultMessage:"Cyberpunk"}),textToImagePrompt:Ge({id:"Deq9he",defaultMessage:"Create an image in a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."}),imageToImagePrompt:Ge({id:"omZTK1",defaultMessage:"Restyle this image with a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."})},"coloring-book":{id:"coloring-book",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/coloring-book.webp",label:Ge({id:"Ma5v0R",defaultMessage:"Coloring Book"}),textToImagePrompt:Ge({id:"PWjYK/",defaultMessage:"Create an image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."}),imageToImagePrompt:Ge({id:"U6fwpJ",defaultMessage:"Restyle this image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."})},anime:{id:"anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/anime.webp",label:Ge({id:"U/Qrsc",defaultMessage:"Anime"}),textToImagePrompt:Ge({id:"gCogZd",defaultMessage:"Create an image in a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."}),imageToImagePrompt:Ge({id:"jZIKG9",defaultMessage:"Restyle this image with a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."})},"classic-anime":{id:"classic-anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/classic-anime.webp",label:Ge({id:"jLkVYJ",defaultMessage:"Classic Anime"}),textToImagePrompt:Ge({id:"7SgRKH",defaultMessage:"Create an image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."}),imageToImagePrompt:Ge({id:"r6UnyO",defaultMessage:"Restyle this image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."})},"dramatic-headshot":{id:"dramatic-headshot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/dramatic-headshot.webp",label:Ge({id:"p4IJX5",defaultMessage:"Dramatic Headshot"}),textToImagePrompt:Ge({id:"L2OTSr",defaultMessage:"Create an ultra-realistic high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."}),imageToImagePrompt:Ge({id:"HwR32X",defaultMessage:"Restyle this photo into a high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."})},"photo-shoot":{id:"photo-shoot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/photo-shoot.webp",label:Ge({id:"ZmdPZ5",defaultMessage:"Photo Shoot"}),textToImagePrompt:Ge({id:"APWtsI",defaultMessage:"Create an ultra-realistic professional photo shoot with soft lighting."}),imageToImagePrompt:Ge({id:"ugvh1K",defaultMessage:"Make a professional photo shoot with soft lighting based on this photo."})},"retro-cartoon":{id:"retro-cartoon",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/retro-cartoon.webp",label:Ge({id:"GAjF4n",defaultMessage:"Retro Cartoon"}),textToImagePrompt:Ge({id:"46xB6P",defaultMessage:"Create a retro 1950s cartoon style image, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."}),imageToImagePrompt:Ge({id:"ozicEm",defaultMessage:"Restyle this photo in a retro 1950s cartoon style, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."})},"80s-glam":{id:"80s-glam",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/80s-glam.webp",label:Ge({id:"fDejVt",defaultMessage:"80s Glam"}),textToImagePrompt:Ge({id:"W7Od8r",defaultMessage:"Create a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."}),imageToImagePrompt:Ge({id:"sL7kY5",defaultMessage:"Turn this photo into a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."})},"art-nouveau":{id:"art-nouveau",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/art-nouveau.webp",label:Ge({id:"JNecL3",defaultMessage:"Art Nouveau"}),textToImagePrompt:Ge({id:"Kdl/EG",defaultMessage:"Create an image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."}),imageToImagePrompt:Ge({id:"IicReU",defaultMessage:"Restyle this image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."})},synthwave:{id:"synthwave",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/synthwave.webp",label:Ge({id:"Db9V0o",defaultMessage:"Synthwave"}),textToImagePrompt:Ge({id:"t8FH1X",defaultMessage:"Create an image in a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."}),imageToImagePrompt:Ge({id:"CnZDU9",defaultMessage:"Restyle this image with a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."})},"tiranga-portrait-2025":{id:"tiranga-portrait-2025",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/tiranga-portrait-2025.webp",label:Ge({id:"eHhV1D",defaultMessage:"Tiranga Portrait"}),textToImagePrompt:Ge({id:"V7BzQx",defaultMessage:"Create a photorealistic photo on a clean background with soft key lighting. Add saffron-white-green rim light and a subtle Ashoka Chakra halo behind the head. Blend one soft overlay  Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette  into the shoulders/background. Include light tricolor bokeh or smoke and a gentle khadi/paper micro-texture. Crisp detail, no text, no flag as clothing."}),imageToImagePrompt:Ge({id:"AJ1btA",defaultMessage:'Restyle this photo in a "Tiranga double-exposure" look: preserve identity and pose, add saffron-white-green rim light and a subtle Ashoka Chakra halo. Blend one overlay - Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette - plus soft tricolor bokeh/smoke and gentle khadi/paper micro-texture. Photo real, balanced saturation. No text, don\'t use the flag as clothing'})}},XB=Object.values(JB),QTe=R(()=>P(()=>import("./hxyyvavb7iqj2z3e.js"),__vite__mapDeps([382,1])),{loading:t=>O(t)}),JTe=R(()=>P(()=>Promise.resolve().then(()=>Nr),void 0),{loading:t=>O(t)});function rtt({composerController:t}){const e=pv(u=>u.files.some(f=>Ll(f.file.name))),{targetedContent:n}=vm(),s=e||(n==null?void 0:n.subtype)===Fy,o=ne(),a=V(),c=is(a,"3961845717").get("styles",XB.map(u=>u.id)).map(u=>JB[u]).filter(Boolean);_.useEffect(()=>{B.logEventWithStatsig("chatgpt_imagegen_style_picker_shown","chatgpt_imagegen_style_picker_shown")},[]);const d=_.useCallback(u=>{const f=s?o.formatMessage(u.imageToImagePrompt):o.formatMessage(u.textToImagePrompt);e8e(f,t,o),B.logEventWithStatsig("chatgpt_imagegen_preset_style_selected","chatgpt_imagegen_preset_style_selected",{style_id:u.id})},[t,o,s]);return r.jsxs(Ul,{onOpenChange:u=>{u&&B.logEventWithStatsig("chatgpt_imagegen_style_picker_opened","chatgpt_imagegen_style_picker_opened")},children:[r.jsx(vr,{asChild:!0,children:r.jsxs("button",{type:"button",className:"composer-btn px-2",children:[r.jsx(QTe,{className:"icon"}),r.jsx("span",{className:"ms-1.5 [[data-collapse-labels]_&]:sr-only",children:r.jsx(j,{id:"X850uz",defaultMessage:"Styles"})}),r.jsx(JTe,{className:"icon-sm xs:ms-1.5 ms-1"})]})}),r.jsx($l,{children:r.jsx(Uh,{className:"z-[51] max-h-[294px] w-[345px] overflow-y-auto bg-clip-border px-3 py-4",$as:Vl,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:r.jsx("div",{className:"grid grid-cols-3 gap-x-2 gap-y-4",children:c.map(u=>r.jsx(XTe,{style:u,onClick:()=>d(u)},u.id))})})})]})}function XTe({style:t,onClick:e}){const n=ne();return r.jsxs("button",{onClick:e,className:"hover:bg-token-bg-secondary focus-visible:ring-ring flex flex-col items-center gap-2.5 rounded-md p-1 text-xs focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-none",children:[r.jsx("img",{src:t.imageUrl,alt:n.formatMessage(t.label),className:"aspect-square w-4/5 rounded-full object-cover"}),r.jsx("span",{children:n.formatMessage(t.label)})]})}function e8e(t,e,n){const s=Pt(e),o=gke(e);if(o.trim()===""){Uz(s,t);return}const a=o.toLowerCase();for(const{textToImagePrompt:i,imageToImagePrompt:l}of XB){const d=[n.formatMessage(i),n.formatMessage(l)].map(u=>{const f=a.indexOf(u.toLowerCase());return f===-1?null:{start:f,end:f+u.length}}).filter(Boolean);if(d.length){const u=Math.min(...d.map(p=>p.start)),f=Math.max(...d.map(p=>p.end)),m=o.substring(u,f).trimEnd();$z(s,m,t);return}}Vz(s,t)}function t8e(){const t=av(),e=ae(Hz);return t&&e&&P8()&&e4()}function n8e(t){const i=t,{ref:e,children:n,className:s}=i,o=ke(i,["ref","children","className"]),a=t8e();return r.jsx("div",U(w({},o),{className:W(a&&"keyboard-open:fixed keyboard-open:bottom-[var(--screen-keyboard-height,0)] keyboard-open:start-3 keyboard-open:end-3 keyboard-open:z-50 keyboard-open:w-auto! keyboard-open:-translate-y-2",s),ref:l=>{if(typeof e=="function"?e(l):e!=null&&(e.current=l),!!a)return zl({axis:"height",target:l,onChange:({height:c})=>{E7e.setState(d=>U(w({},d),{composerHeight:c}))}})},children:n}))}const itt=t=>{"use forget";const e=G.c(91),{viewTransitionName:n,isTemporaryChat:s,isDeveloperMode:o,isNewConversation:a,composerController:i,children:l,expanded:c,onSubmit:d,shouldUseTightRadius:u,canCollapseWithInput:f,canCollapseWithFooterActions:m,expandOnMultilineInput:p,backgroundClassName:g,ariaLabel:h,ref:x,disableMotion:v}=t,y=n===void 0?"var(--vt-composer)":n,b=u===void 0?!1:u;let C=f===void 0?!1:f,S=m===void 0?!0:m;const k=p===void 0?!1:p,E=v===void 0?!1:v,T=jn(hn);let M,A,I,N,L,D,F;e[0]!==l?(L=null,D=null,N=null,M=[],F=[],A=[],I=[],_.Children.forEach(l,Et=>{if(_.isValidElement(Et)){if(Et.type===s8e){if(L!=null)throw new Error("PromptTextareaComposer only accepts a single primary content");L=Et}if(Et.type===o8e){if(D!=null)throw new Error("PromptTextareaComposer only accepts a single submit button");D=Et}else if(Et.type===a8e){if(N!=null)throw new Error("PromptTextareaComposer only accepts a single leading action");N=Et}else Et.type===i8e||Et.type===r8e?M.push(Et):Et.type===l8e?F.push(Et):Et.type===c8e?A.push(Et):Et.type===d8e&&I.push(Et)}}),e[0]=l,e[1]=M,e[2]=A,e[3]=I,e[4]=N,e[5]=L,e[6]=D,e[7]=F):(M=e[1],A=e[2],I=e[3],N=e[4],L=e[5],D=e[6],F=e[7]),k&&(C=!0,S=!1);const $=M.length>0,H=F.length>0,z=H||D!=null,K=UT(),J=V(),Z=!tt(J),q=ae(()=>!$&&!z?!1:c!=null?c:k&&Wz(i)||!k&&zz(i)||!C&&!cf(i)||!S&&$),se=u8e;let ie;e[8]!==d?(ie=Et=>{Et.preventDefault(),d(Et)},e[8]=d,e[9]=ie):ie=e[9];const ee=ie,[le,X]=_.useState(!1);let te;e[10]===Symbol.for("react.memo_cache_sentinel")?(te=()=>{X(!0),setTimeout(()=>{X(!1)},250)},e[10]=te):te=e[10];const ce=te;let ue;e[11]!==le||e[12]!==K?(ue=le?{duration:0}:K?lL:C0e,e[11]=le,e[12]=K,e[13]=ue):ue=e[13];const me=ue,xe=ne();let pe;e[14]!==xe?(pe=xe.formatMessage({id:"U6PwZd",defaultMessage:"Developer mode"}).toLocaleUpperCase(),e[14]=xe,e[15]=pe):pe=e[15];const Ee=pe,Se=o&&!a&&"relative";let Te;e[16]!==Se?(Te=W("group/composer w-full",Se),e[16]=Se,e[17]=Te):Te=e[17];const Ne=y!=null?y:void 0;let De;e[18]!==Ne?(De={viewTransitionName:Ne},e[18]=Ne,e[19]=De):De=e[19];const de=De;let oe;e[20]!==q?(oe=mv(q),e[20]=q,e[21]=oe):oe=e[21];const we="unified-composer";let Ce;e[22]!==i?(Ce=Gz(i),e[22]=i,e[23]=Ce):Ce=e[23];const fe=vne(Ce,x);let re;e[24]!==Ee||e[25]!==o||e[26]!==a?(re=o&&!a&&r.jsx(Lf,{href:"#settings/Connectors/Advanced",underline:!1,className:"absolute end-12 top-0 -translate-y-full rounded-t-xl bg-orange-400 px-2 text-xs font-medium text-white transition-colors hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500",children:Ee}),e[24]=Ee,e[25]=o,e[26]=a,e[27]=re):re=e[27];let ve;e[28]!==I?(ve=I.length>0&&r.jsx("div",{className:"hidden",children:I}),e[28]=I,e[29]=ve):ve=e[29];const Me=n8e;let $e;e[30]!==i||e[31]!==J?($e=Et=>{!fv(i)&&!Et.defaultPrevented&&(N8(J).anySheetOpen$()||so(Pt(i)))},e[30]=i,e[31]=J,e[32]=$e):$e=e[32];const Le=fc,Ae=!0,He=T&&"dark:bg-token-bg-primary",Qe=s&&"dark",ht=!o&&"shadow-short",at=o&&"relative shadow-sm outline-2 outline-orange-400";let vt;e[33]!==g||e[34]!==He||e[35]!==Qe||e[36]!==ht||e[37]!==at?(vt=W("bg-token-bg-primary cursor-text overflow-clip bg-clip-padding p-2.5 contain-inline-size dark:bg-[#303030]","grid grid-cols-[auto_1fr_auto] [grid-template-areas:'header_header_header'_'leading_primary_trailing'_'._footer_.'] group-data-expanded/composer:[grid-template-areas:'header_header_header'_'primary_primary_primary'_'leading_footer_trailing']",He,Qe,ht,at,g),e[33]=g,e[34]=He,e[35]=Qe,e[36]=ht,e[37]=at,e[38]=vt):vt=e[38];const $t=T?"0":b?"var(--radius-xl)":"28px";let Ct;e[39]!==$t?(Ct={borderRadius:$t},e[39]=$t,e[40]=Ct):Ct=e[40];let Vt;e[41]!==E||e[42]!==q||e[43]!==L||e[44]!==me?(Vt=r.jsx(fc,{disableMotion:E,layout:"position",layoutDependency:q,transition:me,className:"-my-2.5 flex min-h-14 items-center overflow-x-hidden px-1.5 [grid-area:primary] group-data-expanded/composer:mb-0 group-data-expanded/composer:px-2.5",children:L}),e[41]=E,e[42]=q,e[43]=L,e[44]=me,e[45]=Vt):Vt=e[45];let qt;e[46]!==E||e[47]!==q||e[48]!==N||e[49]!==me?(qt=N&&r.jsx(fc,{disableMotion:E,layout:"position",layoutDependency:q,transition:me,className:"[grid-area:leading]",children:N}),e[46]=E,e[47]=q,e[48]=N,e[49]=me,e[50]=qt):qt=e[50];const en=$&&r.jsx(fc,{disableMotion:E,layout:"position",layoutDependency:q,transition:me,"data-testid":"composer-footer-actions",className:W("-m-1 max-w-full overflow-x-auto p-1 [grid-area:footer] [scrollbar-width:none]",S&&"group-not-data-expanded/composer:-mb-12"),inert:!q,initial:{translateY:q?0:"calc(-6*var(--spacing))"},animate:{translateY:0},children:r.jsx("div",{className:W("flex min-w-fit items-center",Z?"gap-1.5 ps-0 pe-1.5":"cant-hover:px-1.5 cant-hover:gap-1.5"),ref:se,children:M})});let an;e[51]!==E||e[52]!==z||e[53]!==H||e[54]!==q||e[55]!==D||e[56]!==F||e[57]!==me?(an=z&&r.jsxs(fc,{disableMotion:E,layout:"position",layoutDependency:q,transition:me,className:"flex items-center gap-2 [grid-area:trailing]",children:[H&&r.jsx("div",{className:"relative ms-1",children:F}),D]}),e[51]=E,e[52]=z,e[53]=H,e[54]=q,e[55]=D,e[56]=F,e[57]=me,e[58]=an):an=e[58];let Qt;e[59]!==E||e[60]!==A||e[61]!==q||e[62]!==me?(Qt=A.length>0&&r.jsx(fc,{disableMotion:E,layout:"position",layoutDependency:q,transition:me,className:"-mx-2.5 -mt-2.5 mb-2.5 flex flex-col [grid-area:header]",children:A}),e[59]=E,e[60]=A,e[61]=q,e[62]=me,e[63]=Qt):Qt=e[63];let _n;e[64]!==Le||e[65]!==E||e[66]!==q||e[67]!==vt||e[68]!==Ct||e[69]!==Vt||e[70]!==qt||e[71]!==en||e[72]!==an||e[73]!==Qt||e[74]!==me?(_n=r.jsxs(Le,{disableMotion:E,layout:Ae,layoutDependency:q,transition:me,className:vt,style:Ct,children:[Vt,qt,en,an,Qt]}),e[64]=Le,e[65]=E,e[66]=q,e[67]=vt,e[68]=Ct,e[69]=Vt,e[70]=qt,e[71]=en,e[72]=an,e[73]=Qt,e[74]=me,e[75]=_n):_n=e[75];let rn;e[76]!==Me||e[77]!==$e||e[78]!==_n?(rn=r.jsx(Me,{onClick:$e,children:_n}),e[76]=Me,e[77]=$e,e[78]=_n,e[79]=rn):rn=e[79];let Nt;return e[80]!==h||e[81]!==ce||e[82]!==ee||e[83]!==Te||e[84]!==de||e[85]!==oe||e[86]!==fe||e[87]!==re||e[88]!==ve||e[89]!==rn?(Nt=r.jsxs("form",{onPaste:ce,className:Te,style:de,"data-expanded":oe,onSubmit:ee,"data-type":we,"aria-label":h,ref:fe,children:[re,ve,rn]}),e[80]=h,e[81]=ce,e[82]=ee,e[83]=Te,e[84]=de,e[85]=oe,e[86]=fe,e[87]=re,e[88]=ve,e[89]=rn,e[90]=Nt):Nt=e[90],Nt},fc=t=>{"use forget";var f;const e=G.c(20);let n,s,o,a,i,l,c,d;if(e[0]!==t?(f=t,{disableMotion:o,layout:i,layoutDependency:l,transition:d,initial:a,animate:n,children:s}=f,c=ke(f,["disableMotion","layout","layoutDependency","transition","initial","animate","children"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=d):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],d=e[8]),o){let m;return e[9]!==s||e[10]!==c?(m=r.jsx("div",U(w({},c),{children:s})),e[9]=s,e[10]=c,e[11]=m):m=e[11],m}let u;return e[12]!==n||e[13]!==s||e[14]!==a||e[15]!==i||e[16]!==l||e[17]!==c||e[18]!==d?(u=r.jsx(Xe.div,U(w({layout:i,layoutDependency:l,transition:d,initial:a,animate:n},c),{children:s})),e[12]=n,e[13]=s,e[14]=a,e[15]=i,e[16]=l,e[17]=c,e[18]=d,e[19]=u):u=e[19],u},s8e=t=>{"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(r.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s},o8e=t=>{"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{className:"ms-auto flex items-center gap-1.5",onPointerDown:f8e,children:n}),e[0]=n,e[1]=s):s=e[1],s},a8e=t=>{"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(r.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s},r8e=t=>{"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=n?r.jsx(r.Fragment,{children:n}):null,e[0]=n,e[1]=s):s=e[1],s},i8e=t=>{"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{onPointerDown:m8e,children:n}),e[0]=n,e[1]=s):s=e[1],s},l8e=t=>{"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{onPointerDown:p8e,children:n}),e[0]=n,e[1]=s):s=e[1],s},c8e=t=>{"use forget";const e=G.c(5),{children:n,width:s}=t,a=(s===void 0?"full":s)==="fit"?"w-fit":"w-full";let i;e[0]!==a?(i=W(a),e[0]=a,e[1]=i):i=e[1];let l;return e[2]!==n||e[3]!==i?(l=r.jsx("div",{className:i,onPointerDown:g8e,children:n}),e[2]=n,e[3]=i,e[4]=l):l=e[4],l},d8e=t=>{"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(r.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s};function u8e(t){const e=t==null?void 0:t.parentElement;if(!t||!e)return;const n=()=>{const o=rM(t,"data-collapse-labels"),a=t.scrollWidth>(o?0:e.clientWidth);ar(t,"data-collapse-labels",a)},s=new ResizeObserver(n);return s.observe(t),s.observe(e),()=>s.disconnect()}function f8e(t){return t.stopPropagation()}function m8e(t){return t.stopPropagation()}function p8e(t){return t.stopPropagation()}function g8e(t){return t.stopPropagation()}const ltt=({clientThreadId:t,accountUserId:e})=>{var o;const n=Ve(t,a=>a==null?void 0:a.sharedProjectConversationOwner);return(n==null?void 0:n.id)!=null&&n.id!==e?r.jsx("p",{className:"text-token-text-secondary mb-2 text-center text-xs",children:r.jsx(j,{id:"thread.sharedProjectConversationOwnerNotice",defaultMessage:"This is a conversation between ChatGPT and {name}. Responding will create a branch.",values:{name:(o=n==null?void 0:n.name)!=null?o:"the owner"}})}):null};function ctt(){const t=ne();return r.jsx(_e,{onClick:()=>{On.openModal(nf.SharedConversationModeration)},className:"w-1/3",children:t.formatMessage({id:"thread.sharedConversation.moderate",defaultMessage:"Moderate conversation"})})}const dtt=To(t=>St(()=>{var l,c,d;if(!h8e(t))return[];const e=bn(t),n=a4(t),s=jf(t.ctx),o=Md(t.ctx),a=(c=(l=et(t.ctx))==null?void 0:l.isWorkspaceAccount())!=null?c:!1,i=qz(t);return(d=Vs(t.ctx))==null?void 0:d.filter(u=>!(!Eb({systemHint:u,modelConfig:e,conversationMode:n,isTemporaryChat:s,isDeveloperMode:o,isWorkspaceTenant:a,startedWithByoMcp:i})||u.systemHint===Pe.Agent&&!_8e(t)||u.systemHint===Pe.Slurm&&!x8e(t)))},{equals:El})),h8e=To(t=>St(()=>{const e=a4(t);return e==null||e.kind===wt.PrimaryAssistant||e.kind===wt.GizmoInteraction&&Rl(t.ctx,kM(e))})),_8e=To(t=>St(()=>{var o,a,i;if(!ye(t.ctx,"3084799213")||xv(t))return!0;const n=iM(t,l=>G8(l.message));return(i=(a=(o=n==null?void 0:n.message.metadata)==null?void 0:o.system_hints)==null?void 0:a.includes(Pe.Agent))!=null?i:!1})),x8e=To(t=>St(()=>{const e=a4(t);return(e==null?void 0:e.kind)!==wt.GizmoInteraction||!e.gizmo||Yz(e.gizmo)&&!L3(e.gizmo)})),y8e=R(()=>P(()=>import("./duz09euqvesjqb1t.js"),__vite__mapDeps([277,1])),{loading:t=>O(t)});function v8e({className:t,file:e,fileName:n,fileId:s,gizmoId:o}){const a=Ll(n)&&s!=null,i=ne(),l=GR(e&&di(e)?e:null,n,s,o,void 0);return a?r.jsx("div",{className:W("flex h-full w-full items-center justify-center bg-[#8F8F8F] bg-cover bg-center text-white",t),"aria-label":i.formatMessage({id:"snorlax.imageThumbnail",defaultMessage:"Image thumbnail for {fileName}"},{fileName:n}),style:{backgroundImage:"url(".concat(l,")")},children:!l&&r.jsx(y8e,{className:"icon-lg"})}):null}const Z7=R(()=>P(()=>import("./gzm1jxs289k6teg6.js"),__vite__mapDeps([383,1,10,11,351,352,384,385,220])).then(t=>t.SnorlaxFileModal)),K7=R(()=>P(()=>import("./gskm8euf92v8tid9.js"),__vite__mapDeps([220,1,10,11])).then(t=>t.CustomInstructionsModal));function utt({gizmo:t}){return r.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:t?r.jsxs(r.Fragment,{children:[r.jsx(b8e,{gizmo:t,className:"rounded-s-[20px] rounded-e-[0] border-[1px] border-e-[0.5px]"}),r.jsx(S8e,{gizmo:t,className:"rounded-s-[0] rounded-e-[20px] border-[1px] border-s-[0.5px]"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Q7,{}),r.jsx(Q7,{})]})})}const y4=({className:t,header:e,context:n,contextClassName:s="",icon:o,onClick:a,disabled:i=!1})=>r.jsx("button",{onClick:a,disabled:i,className:W("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",t),children:r.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[r.jsxs("div",{className:"w-full grow text-start",children:[r.jsx("div",{className:"text-sm font-medium",children:e}),r.jsx("div",{className:W("text-token-text-secondary text-xs",s),children:n})]}),o]})}),Q7=()=>{"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(y4,{disabled:!0,header:r.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:r.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})}),t[0]=e):e=t[0],e};function b8e(t){"use forget";const e=G.c(28),{className:n,gizmo:s}=t,{files:o}=s,a=!o.length,i=V();let l;e[0]!==i||e[1]!==s?(l=()=>lt(i,Z7,{gizmo:s,onClose:()=>Ss(i,Z7)}),e[0]=i,e[1]=s,e[2]=l):l=e[2];const c=l;let d,u,f;const{canEdit:m}=U3(s);if(a){const h=m?Kt.addFilesButtonLabel:Kt.viewFilesButtonLabel;let x;e[3]!==h?(x=r.jsx(j,w({},h)),e[3]=h,e[4]=x):x=e[4],d=x;const v=m?Kt.filesControlDescription:Kt.noFilesReadOnlyDescription;let y;e[5]!==v?(y=r.jsx(j,w({},v)),e[5]=v,e[6]=y):y=e[6],u=y,f=null}else{let h,x;if(e[7]!==o||e[8]!==s.gizmo){const y=o.slice(0,3);let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(j,w({},Kt.projectFilesModalTitle)),e[13]=b):b=e[13],d=b;let C;e[14]!==o.length?(C=r.jsx(j,U(w({},Kt.filesCount),{values:{count:o.length}})),e[14]=o.length,e[15]=C):C=e[15],u=C,h="relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only";let S;e[16]!==s.gizmo?(S=(k,E)=>r.jsx(C8e,{file:k,index:E,gizmoId:s.gizmo.id},k.id),e[16]=s.gizmo,e[17]=S):S=e[17],x=y.toReversed().map(S),e[7]=o,e[8]=s.gizmo,e[9]=h,e[10]=x,e[11]=d,e[12]=u}else h=e[9],x=e[10],d=e[11],u=e[12];let v;e[18]!==h||e[19]!==x?(v=r.jsx("div",{className:h,children:x}),e[18]=h,e[19]=x,e[20]=v):v=e[20],f=v}const p=a&&!m;let g;return e[21]!==n||e[22]!==u||e[23]!==d||e[24]!==f||e[25]!==c||e[26]!==p?(g=r.jsx(y4,{className:n,onClick:c,header:d,context:u,icon:f,disabled:p}),e[21]=n,e[22]=u,e[23]=d,e[24]=f,e[25]=c,e[26]=p,e[27]=g):g=e[27],g}function C8e(t){"use forget";const e=G.c(16),{file:n,index:s,gizmoId:o}=t,a=n.name;let i;e[0]!==n.file_id||e[1]!==a?(i=Ll(a)&&n.file_id!=null,e[0]=n.file_id,e[1]=a,e[2]=i):i=e[2];const l=i;let c;e[3]!==n.file_id||e[4]!==a||e[5]!==o||e[6]!==l?(c=l&&r.jsx(v8e,{fileName:a,fileId:n.file_id,gizmoId:o,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"}),e[3]=n.file_id,e[4]=a,e[5]=o,e[6]=l,e[7]=c):c=e[7];const d=c,u="translateX(".concat(s*-20,"px)");let f;e[8]!==u?(f={transform:u},e[8]=u,e[9]=f):f=e[9];let m;e[10]!==n.name||e[11]!==d?(m=d||r.jsx(c5,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:n.name,contextConnectorInfo:void 0}),e[10]=n.name,e[11]=d,e[12]=m):m=e[12];let p;return e[13]!==f||e[14]!==m?(p=r.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:f,children:m}),e[13]=f,e[14]=m,e[15]=p):p=e[15],p}function S8e(t){"use forget";const e=G.c(15),{gizmo:n,className:s}=t,{instructions:o}=n.gizmo,a=!o.length,i=V();let l;e[0]!==i||e[1]!==n?(l=()=>lt(i,K7,{gizmo:n,onClose:()=>Ss(i,K7)}),e[0]=i,e[1]=n,e[2]=l):l=e[2];const c=l;let d,u,f;const{canEdit:m}=U3(n);if(a){const h=m?Kt.customInstructionsTitle:Kt.customInstructionsReadOnlyTitle;let x;e[3]!==h?(x=r.jsx(j,w({},h)),e[3]=h,e[4]=x):x=e[4],d=x;const v=m?Kt.customInstructionsDescription:Kt.customInstructionsReadOnlyDescription;let y;e[5]!==v?(y=r.jsx(j,w({},v)),e[5]=v,e[6]=y):y=e[6],u=y}else{let h;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(j,w({},Kt.editCustomInstructionsTitle)),e[7]=h):h=e[7],d=h,f="overflow-hidden text-ellipsis whitespace-nowrap",u=o}const p=a&&!m;let g;return e[8]!==s||e[9]!==u||e[10]!==f||e[11]!==d||e[12]!==c||e[13]!==p?(g=r.jsx(y4,{className:s,onClick:c,header:d,context:u,contextClassName:f,disabled:p}),e[8]=s,e[9]=u,e[10]=f,e[11]=d,e[12]=c,e[13]=p,e[14]=g):g=e[14],g}const eU=sn(()=>Be({}));function ftt(t,e){var n;return(n=eU(t)[e])!=null?n:null}function mtt(t,e,n){eU.set(t,s=>U(w({},s),{[e]:n}))}function Gi(t){"use forget";const e=G.c(10),{data:n,className:s,size:o,style:a}=t,i=n.avatarUrl,l=n.name;let c;e[0]!==s?(c=W("rounded-full object-cover",s),e[0]=s,e[1]=c):c=e[1];let d;e[2]!==o||e[3]!==a?(d=w({width:o,height:o},a),e[2]=o,e[3]=a,e[4]=d):d=e[4];let u;return e[5]!==n.avatarUrl||e[6]!==n.name||e[7]!==c||e[8]!==d?(u=r.jsx("img",{src:i,alt:l,className:c,style:d}),e[5]=n.avatarUrl,e[6]=n.name,e[7]=c,e[8]=d,e[9]=u):u=e[9],u}function w8e({list:t,baseSize:e=40,variant:n="compact",excludeViewer:s=!0}){var c;const o=V(),a=(c=et(o))==null?void 0:c.normalizedAccountUserId,i=t.filter(d=>s?d.id!==a:!0);if(n==="horizontal-stack"){const u=i.slice(0,3),f=Math.round(e*.33),m=i.length<=3?0:i.length-2;return r.jsx("div",{className:"relative flex shrink-0 items-center",children:u.length>=2?r.jsxs(r.Fragment,{children:[u.map((p,g)=>r.jsx(Gi,{data:p,className:"bg-token-bg-primary gizmo-shadow-stroke relative box-content rounded-full",size:e,style:{padding:2,marginLeft:g===0?0:-f,zIndex:100+(g+1)*10}},p.id)),m===0?null:r.jsx("div",{className:"absolute box-content flex items-center justify-center rounded-full bg-black/60 text-white",style:{width:e,height:e,left:(e+4-f)*2+2,zIndex:100+(u.length+1)*10,fontSize:Math.min(16,Math.round(e*.5-2))},children:m},"overlay")]}):i.length===1?r.jsx(Gi,{data:i[0],className:"bg-token-bg-primary gizmo-shadow-stroke box-content rounded-full",size:e,style:{padding:2}}):t.length>=1?r.jsx(Gi,{data:t[0],className:"bg-token-bg-primary gizmo-shadow-stroke box-content rounded-full",size:e,style:{padding:2}}):null})}const l=Math.round(e*.7);return r.jsx("div",{className:"relative shrink-0",style:{width:e,height:e},children:i.length>=2?r.jsxs(r.Fragment,{children:[r.jsx(Gi,{data:i[0],className:"absolute start-0 top-0",size:l}),r.jsx("div",{className:"bg-token-bg-primary absolute -end-0.5 -bottom-0.5 rounded-full p-0.5",children:r.jsx(Gi,{data:i[1],size:l})})]}):i.length===1?r.jsx(Gi,{data:i[0],className:"gizmo-shadow-stroke",size:e}):t.length>=1?r.jsx(Gi,{data:t[0],className:"gizmo-shadow-stroke",size:e}):null})}function k8e({room:t,baseSize:e=40,variant:n="compact"}){const s=ae(()=>t.members$().map(o=>({id:o.accountUserId,avatarUrl:o.avatarUrl,name:o.name})));return r.jsx(w8e,{list:s,baseSize:e,variant:n})}function E8e(t,e){return t in Zp&&typeof e=="boolean"}const Zp={apps:!1,projects:!0,gpts:!0,chats:!0,favorites:!1,groupChats:!0},T8e=Wn(()=>{const t=M8e(),e={apps:Be(t.sectionStates.apps),projects:Be(t.sectionStates.projects),gpts:Be(t.sectionStates.gpts),chats:Be(t.sectionStates.chats),favorites:Be(t.sectionStates.favorites),groupChats:Be(t.sectionStates.groupChats)};return{sidebarSectionState:e,expandSection:s=>{e[s].set(!0),J7(e)},collapseSection:s=>{e[s].set(!1),J7(e)}}});function J7(t){const e={apps:t.apps(),projects:t.projects(),gpts:t.gpts(),chats:t.chats(),favorites:t.favorites(),groupChats:t.groupChats()};A8e({sectionStates:e})}function M8e(){try{const t=ps.getCookie(gs.SidebarSections);if(t){const e=JSON.parse(t);if(e&&typeof e.sectionStates=="object"){const n=w({},Zp);for(const[s,o]of Object.entries(e.sectionStates))E8e(s,o)&&(n[s]=o);return{sectionStates:n}}}return{sectionStates:Zp}}catch(t){return Re.addError(new Error("Failed to load sidebar section state",{cause:t})),{sectionStates:Zp}}}function A8e(t){try{ps.setCookie(gs.SidebarSections,JSON.stringify({sectionStates:t.sectionStates}))}catch(e){Re.addError(new Error("Failed to save sidebar section state",{cause:e}))}}const I8e=R(()=>P(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([144,1])),{loading:t=>O(t)}),j8e=R(()=>P(()=>Promise.resolve().then(()=>Nr),void 0),{loading:t=>O(t)});function N8e(t){"use forget";const e=G.c(27),{title:n,id:s,children:o}=t,a=V(),i=ne();let l;e[0]!==a?(l=T8e(a),e[0]=a,e[1]=l):l=e[1];const c=l,d=ae(c.sidebarSectionState[s]);let u;e[2]!==s||e[3]!==c||e[4]!==d?(u=k=>{k.preventDefault(),d?c.collapseSection(s):c.expandSection(s)},e[2]=s,e[3]=c,e[4]=d,e[5]=u):u=e[5];const f=u;let m;e[6]!==i||e[7]!==d?(m=d?i.formatMessage({defaultMessage:"Collapse section",id:"sidebar.collapseSection"}):i.formatMessage({defaultMessage:"Expand section",id:"sidebar.expandSection"}),e[6]=i,e[7]=d,e[8]=m):m=e[8];const p=m,g=d?"mb-[var(--sidebar-expanded-section-margin-bottom)]":"mb-[var(--sidebar-collapsed-section-margin-bottom)]";let h;e[9]!==g?(h=W("group/sidebar-expando-section",g),e[9]=g,e[10]=h):h=e[10];let x;e[11]!==n?(x=r.jsx(YO,{"data-no-spacing":!0,children:n}),e[11]=n,e[12]=x):x=e[12];let v;e[13]!==d?(v=d?r.jsx(j8e,{className:"hidden h-3 w-3 group-hover/sidebar-expando-section:block"}):r.jsx(I8e,{className:"h-3 w-3 group-hover/sidebar-expando-section:block"}),e[13]=d,e[14]=v):v=e[14];let y;e[15]!==x||e[16]!==v?(y=r.jsxs("div",{className:"text-token-text-tertiary flex w-full items-center justify-start gap-0.5",children:[x,v]}),e[15]=x,e[16]=v,e[17]=y):y=e[17];let b;e[18]!==p||e[19]!==f||e[20]!==d||e[21]!==y?(b=r.jsx(T5,{onClick:f,"aria-expanded":d,"aria-label":p,"data-no-hover-bg":!0,"data-no-contents-gap":!0,children:y}),e[18]=p,e[19]=f,e[20]=d,e[21]=y,e[22]=b):b=e[22];const C=d&&o;let S;return e[23]!==C||e[24]!==h||e[25]!==b?(S=r.jsxs("div",{className:h,children:[b,C]}),e[23]=C,e[24]=h,e[25]=b,e[26]=S):S=e[26],S}const P8e=R(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([149,1])),{loading:t=>O(t)}),R8e=R(()=>P(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([52,1])),{loading:t=>O(t)}),L8e=R(()=>P(()=>import("./jqy8zfwhk6ptqvmj.js"),__vite__mapDeps([189,1])),{loading:t=>O(t)}),O8e=R(()=>P(()=>import("./iyoy7y29jyu5lcn2.js"),__vite__mapDeps([230,1])),{loading:t=>O(t)}),D8e=R(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([151,1])),{loading:t=>O(t)}),F8e=R(()=>P(()=>import("./oprn23q7xw2h7eak.js"),__vite__mapDeps([386,1])),{loading:t=>O(t)});function ptt(){const t=V();return om(t).hasAccess?r.jsx(B8e,{}):null}function B8e(){const t=V(),e=om(t),n=ae(()=>e.sortedRooms$()),s=ae(()=>e.hasFetchedRooms$()),o=ae(()=>e.isFetchingMoreRooms$()),a=ae(()=>e.roomsPaginationCursor$()!=null);return n.length===0?null:r.jsxs(N8e,{id:"groupChats",title:r.jsx(j,{id:"Job6E6",defaultMessage:"Group chats"}),children:[n.map(i=>r.jsx(U8e,{room:i},i.id)),s&&a?r.jsx(T5,{disabled:o,onClick:i=>{i.preventDefault(),e.fetchMoreRooms$()},children:r.jsx(j,{id:"79QD5f",defaultMessage:"See more"})}):null]})}function U8e({room:t}){const e=V(),s=hie()===t.id,o=om(e),a=ae(()=>t.name$()),i=ae(()=>t.unreadMessageCount$()>0),l=ae(()=>t.members$().length===1),c=_.useRef(null),d=r.jsxs("div",{className:"flex items-center space-x-3",children:[i?r.jsx(X7,{}):null,l?r.jsx(F8e,{className:"icon text-token-icon-primary opacity-[0.15]",viewBox:"2 2 16 16"}):r.jsx(k8e,{room:t,baseSize:20})]}),u=r.jsxs("div",{className:"flex items-center space-x-2",children:[i?r.jsx(X7,{}):null,r.jsx($8e,{room:t})]});return r.jsx(Io,{to:"/gg/".concat(t.id),draggable:!1,label:a,trailing:d,active:s,highlightTrailing:u,onMouseOver:()=>{c.current!==t.id&&(c.current=t.id,o.fetchMessages$({roomId:t.id}))}})}function $8e({room:t}){const e=V(),n=ne(),s=_.useRef(null),[o,a]=_.useState(!1),i=ae(()=>t.members$().length===1);return r.jsx(Er,{open:o,onOpenChange:l=>{a(l)},side:"bottom",contentAlign:"start",alignOffset:-8,sideOffset:-4,triggerButton:r.jsx(Gf,{ref:s,"aria-label":n.formatMessage({id:"oUP76h",defaultMessage:"Open group chat options"}),icon:D8e}),size:"auto",children:o?r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{onClick:()=>{lt(e,fie,{room:t})},icon:R8e,children:r.jsx(j,{id:"2O0yli",defaultMessage:"Rename"})}),r.jsx(Y.Item,{onClick:()=>{lt(e,uie,{room:t})},icon:L8e,children:r.jsx(j,{id:"qShpjO",defaultMessage:"Add people via group link"})}),i?r.jsx(Y.Item,{onClick:()=>{lt(e,die,{room:t})},icon:P8e,color:"danger",children:r.jsx(j,{id:"wkwt0O",defaultMessage:"Delete"})}):r.jsx(Y.Item,{onClick:()=>{lt(e,cie,{room:t})},icon:O8e,color:"danger",children:r.jsx(j,{id:"HxAKnp",defaultMessage:"Leave"})})]}):null})}function X7(){return r.jsx(_t,{label:r.jsx(j,{id:"ruB6tr",defaultMessage:"Unread"}),triggerAs:null,side:"top",children:r.jsx("span",{className:"bg-token-interactive-icon-accent-default inline-block h-2 w-2 flex-shrink-0 rounded-full"})})}function gtt({gizmoResource:t,serverThreadId:e,isOnProjectPage:n,conversations:s,hasNextPage:o=!1}){const a=V(),i=s!=null?s:[],l=i.findIndex(u=>u.id===e),c=i.slice(0,Dm);l!=null&&l>=Dm&&(c[Dm-1]=i[l]);const d=o||i.length>Dm;return r.jsxs(r.Fragment,{children:[c.map(u=>r.jsx(G1,{className:"ps-9",conversation:u,isActive:u.id===e},u.id)),d&&!n&&r.jsx(Io,{to:Mf(a,t),className:"ps-9",label:r.jsx(j,w({},Kt.seeAllChats))})]})}function htt(t){"use forget";const e=G.c(21),{className:n,autoFocus:s,initialValue:o,onCommit:a,onCancel:i}=t,l=s===void 0?!0:s,[c,d]=_.useState(o),u=_.useRef(null);let f;e[0]!==o||e[1]!==i||e[2]!==a||e[3]!==c?(f=function(){c!==o?a(c):i()},e[0]=o,e[1]=i,e[2]=a,e[3]=c,e[4]=f):f=e[4];const m=f;let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=y=>d(y.target.value),e[5]=p):p=e[5];let g;e[6]!==m||e[7]!==i?(g=y=>{if($8(y)){y.key===" "&&y.stopPropagation();e:switch(y.key){case"Escape":{i();break e}case"Enter":m()}}},e[6]=m,e[7]=i,e[8]=g):g=e[8];let h;e[9]!==m||e[10]!==i||e[11]!==c.length?(h=()=>{c.length?m():i()},e[9]=m,e[10]=i,e[11]=c.length,e[12]=h):h=e[12];let x;e[13]!==n?(x=W("w-full border-none bg-transparent p-0 text-sm focus:ring-0",n),e[13]=n,e[14]=x):x=e[14];let v;return e[15]!==l||e[16]!==g||e[17]!==h||e[18]!==x||e[19]!==c?(v=r.jsx("input",{ref:u,type:"text",name:"title-editor",value:c,onFocus:H8e,autoFocus:l,onChange:p,onClick:V8e,onKeyDown:g,onBlur:h,className:x}),e[15]=l,e[16]=g,e[17]=h,e[18]=x,e[19]=c,e[20]=v):v=e[20],v}function V8e(t){t.preventDefault()}function H8e(t){var e;(e=t.currentTarget)==null||e.select()}const _tt=be({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}}),ek=2,tk=3;function xtt(t,e){var u,f,m,p,g,h,x;const n=jd(t,v=>v.flair.kind);let s=[],o=[];const a=(u=n[Li.Recent])==null?void 0:u.slice(0,ek),i=(f=n[Li.Recent])==null?void 0:f.slice(ek),l=(m=n[Li.Workspace])==null?void 0:m.slice(0,tk),c=(p=n[Li.Workspace])==null?void 0:p.slice(tk),d=(g=n[Li.Mine])!=null?g:[];return s=[...l!=null?l:[],...(h=n[Li.FirstParty])!=null?h:[],...(x=n[Li.SidebarKeep])!=null?x:[],...a!=null?a:[],...e?d:[]],o=[...i!=null?i:[],...c!=null?c:[]],{topGizmos:s,remainingGizmos:o}}function tU(t){const e=JSON.stringify(t.map(s=>[s.id,s.title,s.update_time]));return _.useMemo(()=>t,[e])}const G8e="starred-conversations",W8e=1;function z8e({activeId:t}){var a;const e=Zz(G8e,W8e,Mc().queryKey),{data:n,isLoading:s}=rt(U(w({},Mc()),{placeholderData:e})),o=tU((a=n==null?void 0:n.map(i=>i.item))!=null?a:[]);return!s&&o.length===0?null:s?r.jsxs(Id,{children:[r.jsx(vo,{}),r.jsx(vo,{})]}):o.map(i=>r.jsx(G1,{conversation:i,isActive:t===i.id,isStarred:!0},i.id))}const q8e=5;function nU(t){"use forget";const e=G.c(9),{activeId:n,items:s,hasNextPage:o,infiniteScrollTriggerElementRef:a,hideOverflowMenu:i,onSelect:l}=t;let c;e[0]!==n||e[1]!==o||e[2]!==i||e[3]!==a||e[4]!==s||e[5]!==l?(c=s.map((f,m)=>{var g;const p=o&&((g=s[s.length-q8e-1])==null?void 0:g.id)===f.id?a:void 0;return r.jsx(G1,{conversation:f,hideOverflowMenu:i,isActive:n===f.id,elementRef:p,testId:"history-item-".concat(m),onSelect:l},f.id)}),e[0]=n,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=c):c=e[6];let d;return e[7]!==c?(d=r.jsx(r.Fragment,{children:c}),e[7]=c,e[8]=d):d=e[8],d}const nk=be({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function Y8e(t){"use forget";const e=G.c(60),{activeId:n,hideOverflowMenu:s}=t,o=V(),a=jt(),[i,l]=_.useState(!1),[c,d]=_.useState(0),u=jne(),[f,m]=_.useState(!1),p=z4e(),g=kN(),{conversations:h,hasNextPage:x,fetchNextPage:v,isLoading:y,isFetchingNextPage:b,isError:C}=Hh(),S=tU(h);let k;e[0]!==x||e[1]!==y||e[2]!==v?(k=Te=>{if(y||Te==null)return;const Ne=new IntersectionObserver(De=>{De[0].isIntersecting&&x&&v()});return Ne.observe(Te),()=>{Ne.disconnect()}},e[0]=x,e[1]=y,e[2]=v,e[3]=k):k=e[3];const E=k;let T,M;e[4]!==S?(T=()=>{ri.publish({kind:"refreshHistory",conversations:S})},M=[S],e[4]=S,e[5]=T,e[6]=M):(T=e[5],M=e[6]),_.useEffect(T,M);let A,I;e[7]!==o||e[8]!==a?(A=()=>Kz(o,"conversations").onMessage(Ne=>{Ne.type==="conversation-turn-complete"&&ye(o,"1163864876")&&eo(a,Ne.payload.conversation_id)}),I=[o,a],e[7]=o,e[8]=a,e[9]=A,e[10]=I):(A=e[9],I=e[10]),_.useEffect(A,I);const N=S;let L,D;e[11]!==c||e[12]!==u?(L=()=>{const Te=Qz(Jz(),Date.now());u(()=>{d(c+1)},Te+1e3)},D=[c,u],e[11]=c,e[12]=u,e[13]=L,e[14]=D):(L=e[13],D=e[14]),_.useEffect(L,D);const F=N.length===0;va.markStart("History",va.NS_SIDEBAR);const $=et(o);let H;e[15]!==o?(H=ye(o,"2560369700"),e[15]=o,e[16]=H):H=e[16];const z=H;$!=null&&!y&&va.markRendered("History",va.NS_SIDEBAR);let J;e[17]!==p?(J=p!=null&&p.kind==="conversation"&&p.gizmoId!=null&&js(p.gizmoId),e[17]=p,e[18]=J):J=e[18];const Z=J,q=y||C||F,se=_.useRef(0),ie=q&&"h-full items-center justify-center empty:hidden",ee=f&&"opacity-50";let le;e[19]!==ie||e[20]!==ee?(le=W(ie,ee),e[19]=ie,e[20]=ee,e[21]=le):le=e[21];let X;e[22]!==Z?(X=Te=>{Te.preventDefault(),Z&&m(!0)},e[22]=Z,e[23]=X):X=e[23];let te;e[24]!==Z||e[25]!==p||e[26]!==g?(te=Te=>{var Ne;Te.preventDefault(),Z&&(se.current=0,m(!1),g({newGizmoId:null,conversation:p.conversation,previousGizmoId:(Ne=p.gizmoId)!=null?Ne:null}))},e[24]=Z,e[25]=p,e[26]=g,e[27]=te):te=e[27];let ce,ue;e[28]!==Z?(ce=Te=>{Te.preventDefault(),Z&&(se.current=se.current+1)},ue=Te=>{Te.preventDefault(),Z&&(se.current=se.current-1,se.current===0&&m(!1))},e[28]=Z,e[29]=ce,e[30]=ue):(ce=e[29],ue=e[30]);let me;e[31]!==F||e[32]!==y?(me=F&&y&&r.jsx(Id,{children:r.jsx(_s,{className:"m-auto"})}),e[31]=F,e[32]=y,e[33]=me):me=e[33];let xe;e[34]!==i||e[35]!==F||e[36]!==C||e[37]!==a?(xe=F&&C&&r.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[r.jsx(j,w({},nk.unableToLoadHistory)),!i&&r.jsx("div",{className:"mt-1",children:r.jsx(_e,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{l(!0),eo(a)},children:r.jsx(j,w({},nk.retryButton))})})]}),e[34]=i,e[35]=F,e[36]=C,e[37]=a,e[38]=xe):xe=e[38];let pe;e[39]!==n||e[40]!==x||e[41]!==s||e[42]!==E||e[43]!==F||e[44]!==y||e[45]!==N||e[46]!==z?(pe=!y&&!F&&r.jsxs(r.Fragment,{children:[z&&r.jsx(z8e,{activeId:n}),r.jsx(nU,{activeId:n,hasNextPage:x,items:N,infiniteScrollTriggerElementRef:E,hideOverflowMenu:s})]}),e[39]=n,e[40]=x,e[41]=s,e[42]=E,e[43]=F,e[44]=y,e[45]=N,e[46]=z,e[47]=pe):pe=e[47];let Ee;e[48]!==b?(Ee=b&&r.jsxs("div",{className:"mb-5",children:[r.jsx(vo,{}),r.jsx(vo,{}),r.jsx(vo,{})]}),e[48]=b,e[49]=Ee):Ee=e[49];let Se;return e[50]!==le||e[51]!==X||e[52]!==te||e[53]!==ce||e[54]!==ue||e[55]!==me||e[56]!==xe||e[57]!==pe||e[58]!==Ee?(Se=r.jsxs("div",{id:"history",className:le,onDragOver:X,onDrop:te,onDragEnter:ce,onDragLeave:ue,children:[me,xe,pe,Ee]}),e[50]=le,e[51]=X,e[52]=te,e[53]=ce,e[54]=ue,e[55]=me,e[56]=xe,e[57]=pe,e[58]=Ee,e[59]=Se):Se=e[59],Se}const ytt=Kn.memo(Y8e);function vtt({showRetry:t,refetch:e}){return r.jsxs("div",{className:"text-token-text-tertiary mt-5 p-3 text-center italic",children:[r.jsx(j,w({},Kt.unableToLoadHistory)),t&&r.jsx("div",{className:"mt-1",children:r.jsx(_e,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{e(!0)},children:r.jsx(j,w({},Kt.retryLoadingHistory))})})]})}function Z8e(t){return r.jsx(Er,{side:"right",sideOffset:-4,alignOffset:-7,size:"auto",triggerButton:r.jsx(K3,{as:"div",icon:t.icon,label:t.label,highlightTrailing:t.highlightTrailing}),children:r.jsx("div",{className:"max-h-[50dvh] max-w-(--sidebar-width) overflow-x-auto [scrollbar-gutter:stable]",children:r.jsx(Id,{children:t.children})})})}const K8e=R(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([151,1])),{loading:t=>O(t)});function btt({currentGizmoId:t}){return r.jsx(Z8e,{label:r.jsx(j,w({},Kt.seeMoreProjectItems)),icon:K8e,children:r.jsx(Ox,{currentGizmoId:t,inSidebarFlyout:!0})})}const Q8e=768,J8e=320,X8e=140,vp=8,eMe=12;function tMe(t,e,n){const[s,o]=_.useState(null),[a,i]=_.useState(!1),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),u=()=>{var g,h,x,v,y;const f=e.current;if(!f)return;let m=null;if(t){const b='nav a[href*="/c/'.concat(t,'"]'),C=document.querySelector(b);if(C&&(m=C.getBoundingClientRect()),m&&(m.bottom<=0||m.top>=window.innerHeight)){o(null);return}}if(m||(m=((g=document.querySelector("nav"))!=null?g:f).getBoundingClientRect()),window.matchMedia("(max-width: ".concat(Q8e,"px)")).matches){const b=(x=(h=n.current)==null?void 0:h.getBoundingClientRect().width)!=null?x:J8e,C=(y=(v=n.current)==null?void 0:v.getBoundingClientRect().height)!=null?y:X8e,S=m.left+m.width/2-b/2,k=Math.max(vp,Math.min(S,window.innerWidth-b-vp)),E=m.top-C-vp,T=Math.max(vp,E);i(!0),o({top:T,left:k})}else{const b=m.top+m.height/2,C=m.right+eMe;i(!1),o({top:b,left:C})}};return Xn(()=>{u();const f=()=>{l.current&&cancelAnimationFrame(l.current),l.current=requestAnimationFrame(u)},m=()=>{f()};window.addEventListener("resize",m),window.addEventListener("scroll",m,!0);const p=document.querySelector("nav");if(p&&typeof MutationObserver<"u"){const g=new MutationObserver(()=>f());g.observe(p,{childList:!0,subtree:!0}),c.current=g}if(typeof ResizeObserver<"u"){const g=new ResizeObserver(()=>f());p&&g.observe(p),n.current&&g.observe(n.current),d.current=g}return()=>{window.removeEventListener("resize",m),window.removeEventListener("scroll",m,!0),l.current&&cancelAnimationFrame(l.current),c.current&&(c.current.disconnect(),c.current=null),d.current&&(d.current.disconnect(),d.current=null)}},[t]),{pos:s,isMobileAbove:a,remeasure:u}}function nMe({conversationId:t,children:e,onClose:n,clickOutsideToClose:s=!1,onVisibilityChange:o=()=>{}}){const[a,i]=_.useState(!1),l=ne(),c=_.useRef(null),d=_.useRef(null),u=Xz(),{pos:f,isMobileAbove:m}=tMe(t,c,d);Xn(()=>{u||On.setSidebarOpen(!0)},[u]),Xn(()=>{if(!s)return;const x=v=>{const y=d.current;y&&v.target instanceof Node&&!y.contains(v.target)&&n()};return document.addEventListener("mousedown",x,!0),()=>document.removeEventListener("mousedown",x,!0)},[n,s]),Xn(()=>{if(!f)return;i(!1);const x=requestAnimationFrame(()=>i(!0));return()=>cancelAnimationFrame(x)},[f]);const p=Ca(o);_.useEffect(()=>{const x=!!f;p==null||p(x)},[f,p]);const g=r.jsx("span",{ref:c,role:"presentation",style:{display:"none"}});if(!f)return g;const h=r.jsxs("div",{ref:d,style:{position:"fixed",top:f.top,left:f.left,zIndex:1e3},className:"border-token-border-light relative max-h-[60vh] max-w-md transform rounded-lg border bg-blue-500 p-4 text-sm text-white shadow-2xl transition-opacity duration-200 "+(m?"":"-translate-y-1/2")+(a?" opacity-100":" opacity-0"),children:[r.jsx(gn,{onClick:n,className:"absolute end-2 top-2 text-white hover:bg-blue-400/20! hover:text-white",bg:"transparent","aria-label":l.formatMessage({id:"n7Yh10",defaultMessage:"Close survey"})}),m?r.jsx("div",{className:"border-token-border-light absolute start-4 -bottom-2 h-4 w-4 rotate-45 border bg-blue-500"}):r.jsx("div",{className:"border-token-border-light absolute -start-2 top-1/2 h-4 w-4 -translate-y-1/2 rotate-45 border bg-blue-500"}),e]});return r.jsxs(r.Fragment,{children:[g,or.createPortal(h,document.body)]})}const sMe=5;function Ctt(){"use forget";const t=G.c(6),e=V();let n;t[0]!==e?(n=ye(e,"3324471394"),t[0]=e,t[1]=n):n=t[1];const s=n;let o,a;if(t[2]!==s?(o=()=>{s||XM()},a=[s],t[2]=s,t[3]=o,t[4]=a):(o=t[3],a=t[4]),_.useEffect(o,a),!s)return null;let i;return t[5]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(oMe,{}),t[5]=i):i=t[5],i}function oMe(){"use forget";const t=G.c(48),{survey:e,finishSurvey:n}=TK(),{conversations:s}=Hh(),o=V();MK();const a=!ae(aMe),i=_.useRef(null);let l,c;if(t[0]!==s||t[1]!==e){const z=(Array.isArray(s)?s:[]).slice(0,sMe);l=Boolean,c=e&&z.some(K=>(K==null?void 0:K.id)===(e==null?void 0:e.conversation_id)),t[0]=s,t[1]=e,t[2]=l,t[3]=c}else l=t[2],c=t[3];const d=l(c),u=!(e!=null&&e.survey_display_type)||e.survey_display_type==="CONVERSATION_COACHMARK",f=!(e!=null&&e.trigger_event_type)||e.trigger_event_type==="NEW_CHAT_CLICK",m=!!(e!=null&&e.content),p=!!(e&&d&&m&&u&&f&&!a);let g;t[4]!==p||t[5]!==e?(g=()=>{if(!p||!(e!=null&&e.conversation_id))return;const H='nav a[href*="/c/'.concat(e.conversation_id,'"]'),z=document.querySelector(H);if(z)return z.classList.add("ring-2","ring-blue-500","rounded-md"),()=>{z.classList.remove("ring-2","ring-blue-500","rounded-md")}},t[4]=p,t[5]=e,t[6]=g):g=t[6];const h=e==null?void 0:e.conversation_id;let x;t[7]!==p||t[8]!==h?(x=[p,h],t[7]=p,t[8]=h,t[9]=x):x=t[9],Xn(g,x);let v;t[10]!==o||t[11]!==e?(v=H=>{var J;if(!H||!e)return;const z=e.conversation_id,K=e.survey_election_id;!z||!K||i.current!==K&&(one({survey_campaign_name:e.survey_campaign_name,survey_election_id:K},z),ii(o,"chatgpt_survey_seen",void 0,{survey_campaign_name:String((J=e.survey_campaign_name)!=null?J:""),survey_election_id:K,conversation_id:z}),i.current=K)},t[10]=o,t[11]=e,t[12]=v):v=t[12];const y=v;if(!p||!e)return null;const{conversation_id:b}=e,C=e.content;let S;t[13]!==C.answers?(S=Array.isArray(C==null?void 0:C.answers)?C.answers:[],t[13]=C.answers,t[14]=S):S=t[14];const k=S;let E;t[15]!==o?(E=H=>{var z,K,J,Z;sne({survey_campaign_name:H.campaign_name,survey_election_id:H.election_id,question_id:void 0,question_text:(z=H.question)!=null?z:null,answer_id:H.answer_id,answer_text:(K=H.answer_text)!=null?K:null,tags:null},H.conversation_id),ii(o,"chatgpt_survey_response",void 0,{survey_campaign_name:H.campaign_name,survey_election_id:H.election_id,conversation_id:H.conversation_id,question_text:(J=H.question)!=null?J:"",answer_id:H.answer_id,answer_text:(Z=H.answer_text)!=null?Z:""})},t[15]=o,t[16]=E):E=t[16];const T=E;let M;t[17]!==o?(M=H=>{var z,K;ane({survey_campaign_name:H.campaign_name,survey_election_id:H.election_id},H.conversation_id),ii(o,"chatgpt_survey_dismissed",void 0,{survey_campaign_name:String((z=H.campaign_name)!=null?z:""),survey_election_id:String((K=H.election_id)!=null?K:""),conversation_id:H.conversation_id})},t[17]=o,t[18]=M):M=t[18];const A=M,I=e.conversation_id;let N;t[19]!==A||t[20]!==n||t[21]!==e?(N=()=>{e&&A({conversation_id:e.conversation_id,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name}),n()},t[19]=A,t[20]=n,t[21]=e,t[22]=N):N=t[22];let L;t[23]!==C.question?(L=r.jsx("div",{className:"mb-3 pe-8 font-medium break-words",children:C.question}),t[23]=C.question,t[24]=L):L=t[24];let D;if(t[25]!==k||t[26]!==C.question||t[27]!==b||t[28]!==n||t[29]!==T||t[30]!==e.survey_campaign_name||t[31]!==e.survey_election_id){let H;t[33]!==C.question||t[34]!==b||t[35]!==n||t[36]!==T||t[37]!==e.survey_campaign_name||t[38]!==e.survey_election_id?(H=z=>r.jsx("button",{className:"rounded-full border border-gray-300 bg-white px-4 py-2 font-medium whitespace-nowrap text-black hover:bg-gray-100",onClick:()=>{T({conversation_id:b,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name,question:C.question,answer_id:z.answer_id,answer_text:z.text}),n()},children:z.text},z.answer_id),t[33]=C.question,t[34]=b,t[35]=n,t[36]=T,t[37]=e.survey_campaign_name,t[38]=e.survey_election_id,t[39]=H):H=t[39],D=k.map(H),t[25]=k,t[26]=C.question,t[27]=b,t[28]=n,t[29]=T,t[30]=e.survey_campaign_name,t[31]=e.survey_election_id,t[32]=D}else D=t[32];let F;t[40]!==D?(F=r.jsx("div",{className:"flex gap-2",children:D}),t[40]=D,t[41]=F):F=t[41];let $;return t[42]!==y||t[43]!==e.conversation_id||t[44]!==N||t[45]!==L||t[46]!==F?($=r.jsxs(nMe,{conversationId:I,onClose:N,onVisibilityChange:y,children:[L,F]}),t[42]=y,t[43]=e.conversation_id,t[44]=N,t[45]=L,t[46]=F,t[47]=$):$=t[47],$}function aMe(){return Gh()}const Stt=s=>{var o=s,{className:t,children:e}=o,n=ke(o,["className","children"]);const a=_.useRef(null),i=_.useCallback(()=>{const l=a.current;l&&(ar(l,"data-scrolled-from-top",l.scrollTop>0),ar(l,"data-scrolled-from-end",l.scrollTop<l.scrollHeight-l.clientHeight-1))},[]);return _.useEffect(()=>{const l=a.current;if(!l)return;const c=new ResizeObserver(i);return c.observe(l),()=>c.disconnect()},[i]),_.useEffect(()=>{setTimeout(()=>{i()},500)},[]),r.jsx("nav",U(w({className:W("group/scrollport",t),onScroll:i,ref:a},n),{children:e}))},rMe=R(()=>P(()=>Promise.resolve().then(()=>a_),void 0),{loading:t=>O(t)}),iMe=R(()=>P(()=>import("./o53dfl5u400euisc.js"),__vite__mapDeps([143,1])),{loading:t=>O(t)}),lMe=R(()=>P(()=>Promise.resolve().then(()=>BO),void 0).then(t=>t.AdminInviteModal));function cMe(t){"use forget";const e=G.c(8),{location:n}=t,s=V(),o=Cn();let a;e[0]!==s||e[1]!==o||e[2]!==n?(a=()=>{o&&(B.logEvent("Account: Invite Member Button Clicked",{eventSource:"mouse",location:n}),Sr(s).logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:n,text:"AddTeammates",step:"OpenModal"}),lt(s,lMe,{workspace:o}))},e[0]=s,e[1]=o,e[2]=n,e[3]=a):a=e[3];const i=a;let l,c;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(iMe,{className:"icon-sm","aria-hidden":"true"}),c=r.jsx(j,{id:"inviteMemberButton.inviteMemberSidebarFooterCap",defaultMessage:"Invite team members"}),e[4]=l,e[5]=c):(l=e[4],c=e[5]);let d;return e[6]!==i?(d={icon:l,label:c,onClick:i},e[6]=i,e[7]=d):d=e[7],d}function dMe(t){"use forget";const e=G.c(7),{location:n}=t,s=ot();let o;e[0]!==n||e[1]!==s?(o=()=>{xn(s,n)},e[0]=n,e[1]=s,e[2]=o):o=e[2];const a=o;let i,l;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(rMe,{className:"icon-sm text-[#5856D6] dark:text-[#DCDBF6]","aria-hidden":"true"}),l=r.jsx(j,w({},pt.upgradeYourPlan)),e[3]=i,e[4]=l):(i=e[3],l=e[4]);let c;return e[5]!==a?(c={icon:i,label:l,labelClassName:"text-[#5856D6] dark:text-[#DCDBF6]",onClick:a},e[5]=a,e[6]=c):c=e[6],c}function sU(t,e){"use forget";const n=G.c(4),{location:s}=e;let o;n[0]!==s?(o={location:s},n[0]=s,n[1]=o):o=n[1];const a=cMe(o);let i;n[2]!==s?(i={location:s},n[2]=s,n[3]=i):i=n[3];const l=dMe(i);return t==="invite"?a:l}const uMe=R(()=>P(()=>import("./kz0466kav0wlxeny.js"),__vite__mapDeps([387,1])),{loading:t=>O(t)});function wtt(t){"use forget";const e=G.c(18),{variant:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={location:"sidebar footer cap above user menu"},e[0]=s):s=e[0];const{icon:o,label:a,onClick:i}=sU(n,s);let l,c;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=W("sm:bg-primary relative rounded-t-2xl bg-white/80 sm:bg-transparent","sm:backdrop-blur-0 backdrop-blur-sm","group-data-scrolled-from-end/scrollport:shadow-[0_-20px_40px_rgba(0,0,0,0.04)]","sm:group-data-scrolled-from-end/scrollport:shadow-[0_-20px_40px_rgba(0,0,0,0.08)]","motion-safe:transition-shadow motion-safe:duration-150 motion-safe:ease-out"),c=r.jsx("div",{className:"l-0 r-0 bg-token-bg-elevated-secondary pointer-events-none absolute top-[-175px] z-0 hidden h-[200px] w-full [mask-image:linear-gradient(180deg,transparent_33.62%,black_100%)] opacity-0 [-webkit-mask-image:linear-gradient(180deg,transparent_33.62%,black_100%)] group-data-scrolled-from-end/scrollport:opacity-100 motion-safe:transition-opacity motion-safe:duration-150 motion-safe:ease-out sm:block"}),e[1]=l,e[2]=c):(l=e[1],c=e[2]);let d;e[3]!==i?(d=x=>{(x.key==="Enter"||x.key===" ")&&i()},e[3]=i,e[4]=d):d=e[4];let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=W("group sm:bg-token-main-surface-primary text-token-text-primary hover:bg-token-main-surface-secondary relative z-10 flex w-full items-center justify-between rounded-t-2xl","py-3 ps-4 pe-4 text-xs","border-token-border-default border border-[.5px] p-2","focus-visible:ring-token-text-tertiary focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","motion-safe:transition-colors motion-safe:duration-150"),e[5]=u):u=e[5];let f;e[6]!==o?(f=r.jsx("span",{children:o}),e[6]=o,e[7]=f):f=e[7];let m;e[8]!==a?(m=r.jsx("span",{children:a}),e[8]=a,e[9]=m):m=e[9];let p;e[10]!==f||e[11]!==m?(p=r.jsxs("span",{className:"flex items-center gap-3",children:[f,m]}),e[10]=f,e[11]=m,e[12]=p):p=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(uMe,{className:"icon-xs text-token-text-primary","aria-hidden":"true"}),e[13]=g):g=e[13];let h;return e[14]!==i||e[15]!==d||e[16]!==p?(h=r.jsxs("div",{className:l,children:[c,r.jsxs("div",{role:"button",tabIndex:0,onClick:i,onKeyDown:d,className:u,children:[p,g]})]}),e[14]=i,e[15]=d,e[16]=p,e[17]=h):h=e[17],h}function ktt(t){"use forget";const e=G.c(12),{variant:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={location:"sidebar, below user menu"},e[0]=s):s=e[0];const{icon:o,label:a,onClick:i,labelClassName:l}=sU(n,s);let c;e[1]!==i?(c=m=>{(m.key==="Enter"||m.key===" ")&&i()},e[1]=i,e[2]=c):c=e[2];let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=W("border-token-interactive-border-secondary-default flex w-full items-center justify-center gap-1","bg-token-main-surface-primary rounded-full border px-3 py-2","text-xs font-medium","hover:bg-token-interactive-bg-secondary-hover","focus-visible:ring-2 focus-visible:ring-[#5856D6] focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","motion-safe:transition-colors motion-safe:duration-150 motion-safe:ease-out"),e[3]=d):d=e[3];let u;e[4]!==a||e[5]!==l?(u=r.jsx("span",{className:l,children:a}),e[4]=a,e[5]=l,e[6]=u):u=e[6];let f;return e[7]!==o||e[8]!==i||e[9]!==c||e[10]!==u?(f=r.jsx("div",{className:"px-3.5 pt-1 pb-3",children:r.jsxs("button",{type:"button",onClick:i,onKeyDown:c,className:d,children:[o,u]})}),e[7]=o,e[8]=i,e[9]=c,e[10]=u,e[11]=f):f=e[11],f}const fMe=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)}),mMe=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),pMe=()=>rt({queryKey:["userSurvey"],queryFn:()=>ge.safeGet("/user_surveys/active")}),gMe=()=>{const t=jt();return zt({mutationFn:({surveyId:e,reason:n})=>ge.safePost("/user_surveys/{survey_id}/complete",{parameters:{path:{survey_id:e}},requestBody:{reason:n}}),onSuccess:()=>{t.invalidateQueries({queryKey:["userSurvey"]})}})};function Ett(){const t=ne(),[e,n]=_.useState(!1),{mutate:s}=gMe(),{data:o}=pMe(),a=o==null?void 0:o.survey,i=c=>{n(!0),a!=null&&s({surveyId:a.id,reason:c})};return!e&&a!=null?r.jsx("div",{className:"bg-brand-blue-800 mx-1.5 rounded-lg",children:r.jsxs("div",{className:"flex flex-col gap-3 p-3 text-sm text-white",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"font-bold text-wrap",children:r.jsx(j,{id:"navigation.survey.title",defaultMessage:"We are asking a small group of people for their opinion"})}),r.jsx("button",{className:"text-white/25 hover:text-white/40",onClick:()=>i("dismissed"),"aria-label":t.formatMessage({id:"navigation.survey.dismiss",defaultMessage:"Dismiss survey"}),children:r.jsx(mMe,{className:"icon"})})]}),r.jsx("div",{className:"text-wrap",children:r.jsx(j,{id:"navigation.survey.description",defaultMessage:"Could you spare few minutes to take a short survey?"})}),r.jsxs("a",{href:a.link,target:"_blank",className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-sm bg-white/25 p-2 hover:bg-white/40",rel:"noreferrer",onClick:()=>i("link_clicked"),children:[r.jsx(fMe,{className:"icon-sm"}),r.jsx(j,{id:"navigation.survey.takeSurvey",defaultMessage:"Take survey"})]})]})}):null}const hMe="{{.assetPrefix}}/assets/team-upsell-landscape-ee106ppw.webp",_Me={src:hMe};function Ttt(){const t=V(),e=!tt(t),n=Ps(t,"2210309751").get("variant","control"),s=Mo(),[o]=Ei(Ue.HasDismissedTeamsNoAuthUpsell,!1,C1),a=!s&&e&&n==="front-door"&&!o;ye(t,"676035580");const[i,l]=_.useState(()=>gt.getItem(Ue.HasDismissedTeamsNoAuthUpsell)!==!0),c=ot(),d=lM(),u=()=>{l(!1),gt.setItem(Ue.HasDismissedTeamsNoAuthUpsell,!0)},f=()=>{u(),c({hash:Xf,search:window.location.search},{state:{[h1]:"Teams no-auth upsell announcement"}})};return!a||!i?null:r.jsx(Il,{open:i,modal:!1,children:r.jsx(jl,{container:d==null?void 0:d.document.body,children:r.jsxs("div",{className:"bg-token-bg-primary popover border-token-border-default bg-primary fixed end-4 bottom-4 z-100 flex w-full max-w-sm flex-col gap-3 overflow-hidden rounded-2xl border shadow-xl",children:[r.jsx("img",{className:"h-[147px] object-cover",src:_Me.src,alt:""}),r.jsxs("div",{className:"flex flex-col px-6 py-5",children:[r.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:r.jsx(j,w({},bp.teamsNoAuthUpsellTitle))}),r.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:r.jsx(j,w({},bp.teamsNoAuthUpsellDescription))}),r.jsxs("div",{className:"mt-5 flex flex-row justify-start space-x-2",children:[r.jsx(_e,{as:"button",color:"primary",onClick:f,children:r.jsx(j,w({},bp.getTeam))}),!1,r.jsx(_e,{as:"button",color:"secondary",onClick:u,children:r.jsx(j,w({},bp.notNow))})]})]})]})})})}const bp=be({teamsNoAuthUpsellTitle:{id:"TeamsNoAuthUpsell.title",defaultMessage:"A shared space for teams"},teamsNoAuthUpsellDescription:{id:"TeamsNoAuthUpsell.description",defaultMessage:"Supercharge your team's work with a shared workspace, admin controls, and connectors to your company tools."},getTeam:{id:"TeamsNoAuthUpsell.getTeam",defaultMessage:"Get Business"},notNow:{id:"TeamsNoAuthUpsell.notNow",defaultMessage:"Not now"}});function xMe(t,e){return"/checkout/".concat(t,"/").concat(e)}class yMe{static async getCheckoutLink(e,n){return ge.safePost("/payments/checkout",{requestBody:e,additionalHeaders:Dv(null,null,null,n!=null&&n.skipSentinelCheckout?void 0:await cA("chatgpt_checkout",{sdkVariant:n!=null&&n.fromiOSWebview?"openai":"chatgpt"}).catch(s=>{Re.addError(s)}))})}static async fetchExistingCheckoutSession(e,n){return await ge.safeGet("/payments/checkout/{processor_entity}/{checkout_session_id}",{parameters:{path:{processor_entity:e,checkout_session_id:n}}})}}const vMe="3950229590",bMe="enabled_custom_checkout_for_plus",CMe="enabled_custom_checkout_for_go",SMe="enabled_custom_checkout_for_pro",wMe="enabled_custom_checkout_for_team",kMe="is_checkout_redesign",EMe="checkoutRedesignExposureLogged",sk="chatgpt_web_checkout_navigate_to_checkout",TMe="chatgpt_web_checkout_prepare_checkout_session";function oU(t,{shouldLogExposure:e=!0}={}){return ze(t,vMe,{disableExposureLog:!e})}function MMe({ctx:t,shouldLogExposure:e=!0}){return oU(t,{shouldLogExposure:e}).get(kMe,!1)}function AMe(t){switch(t){case Fm.PLUS:return bMe;case Fm.GO:return CMe;case Fm.PRO:return SMe;case Fm.SELF_SERVE_BUSINESS:return wMe;default:return null}}function IMe(t,e){if(ye(t,"3990391703"))return"redirect";const n=AMe(e);return n==null?"redirect":oU(t).get(n,!1)?"custom":"redirect"}function Mtt(){"use forget";const t=G.c(11),e=ot(),n=V();let s;t[0]!==n?(s=async function(f){const m=f===void 0?1e3:f,p=Sr(n);await Promise.race([p.flush(),new Promise(g=>setTimeout(g,m))])},t[0]=n,t[1]=s):s=t[1];const o=s;let a;t[2]!==n?(a=async function(f,m){var p;return f.checkout_ui_mode=(p=f.checkout_ui_mode)!=null?p:(m==null?void 0:m.fromiOSWebview)===!0?"redirect":IMe(n,f.plan_name),ii(n,{eventName:TMe,metadata:{ui_mode:f.checkout_ui_mode}}),await yMe.getCheckoutLink(f,{skipSentinelCheckout:m==null?void 0:m.skipSentinelCheckout,fromiOSWebview:m==null?void 0:m.fromiOSWebview})},t[2]=n,t[3]=a):a=t[3];const i=a;let l;t[4]!==n||t[5]!==o||t[6]!==e?(l=async function(f,m){var p;if("tag"in f){ii(n,{eventName:sk,metadata:{tag:f.tag}}),await o();e:switch(f.tag){case"hosted_checkout_session":case"redirect_to_portal":{window.location.href=f.url;break e}case"custom_checkout_session":{const g=f.processor_entity,h=f.checkout_session_id;await e({pathname:xMe(g,h),search:(p=m==null?void 0:m.searchParams)!=null?p:"",hash:""},{state:U(w({},m==null?void 0:m.state),{[EMe]:!0})})}}}else if(f.url)ii(n,{eventName:sk,metadata:{tag:"missing_tag"}}),await o(),window.location.href=f.url;else throw new Error("Received invalid response from /checkout")},t[4]=n,t[5]=o,t[6]=e,t[7]=l):l=t[7];const c=l;let d;return t[8]!==c||t[9]!==i?(d={prepareCheckoutSession:i,navigateToCheckout:c},t[8]=c,t[9]=i,t[10]=d):d=t[10],d}const jMe=({onDismiss:t})=>{const e=ne();_.useEffect(()=>{Ye.logEvent("chatgpt_web_mobile_app_upsell_banner_shown"),B.logEvent("Mobile App Upsell Banner Shown")},[]);const n=()=>{localStorage.setItem(Ue.HasDismissedMobileAppUpsellBanner,"true"),t==null||t(),Ye.logEvent("chatgpt_web_mobile_app_upsell_banner_dismissed"),B.logEvent("Mobile App Upsell Banner Dismissed")},s=()=>{window.open("https://apps.apple.com/us/app/chatgpt/id6448311069","_blank"),Ye.logEvent("chatgpt_web_mobile_app_upsell_banner_clicked"),B.logEvent("Mobile App Upsell Banner Clicked")};return r.jsx(QR,{title:e.formatMessage({id:"mobileTopBanner.title",defaultMessage:"ChatGPT"}),content:e.formatMessage({id:"mobileTopBanner.content",defaultMessage:"The official app by OpenAI"}),secondaryCtaText:e.formatMessage({id:"mobileTopBanner.secondaryCtaText",defaultMessage:"Open"}),onDismiss:n,onSecondaryCtaClick:s})};function NMe(t){const e=encodeURIComponent(t);return"https://wa.me/18002428478?text=".concat(e)}function PMe({onDismiss:t}){const e=ne(),n=e.formatMessage({id:"moodengUpsellBanner.prefilledMessage",defaultMessage:"Hey ChatGPT, can you tell me a little bit more about what you can do?"}),s=()=>{B.logEventWithStatsig("Moodeng Upsell Banner Clicked","chatgpt_web_moodeng_upsell_banner_clicked"),window.open(NMe(n),"_blank")},o=()=>{localStorage.setItem(Ue.HasDismissedMoodengUpsellBanner,"true"),t==null||t(),B.logEventWithStatsig("Moodeng Upsell Banner Dismissed","chatgpt_web_moodeng_upsell_banner_dismissed")};return _.useEffect(()=>{B.logEventWithStatsig("Moodeng Upsell Banner Shown","chatgpt_web_moodeng_upsell_banner_shown")},[]),r.jsx(QR,{title:e.formatMessage({id:"moodengUpsellBanner.title",defaultMessage:"Chat on WhatsApp"}),content:e.formatMessage({id:"moodengUpsellBanner.content",defaultMessage:"Supported by OpenAI"}),secondaryCtaText:e.formatMessage({id:"moodengUpsellBanner.secondaryCtaText",defaultMessage:"Try Now"}),onSecondaryCtaClick:s,onDismiss:o})}function Att(){var v;const t=V(),e=Hn(),n=Mo(),s=eq(),[o,a]=_.useState(!1),[i,l]=_.useState(()=>localStorage.getItem(Ue.HasDismissedMobileAppUpsellBanner)==="true"),[c,d]=_.useState(()=>localStorage.getItem(Ue.HasDismissedMoodengUpsellBanner)==="true"),u=ze(t,"3927927759"),f=e.pathname.split("/").filter(Boolean),m=f.length===3&&f[0]==="checkout";_.useEffect(()=>{if(!(typeof window>"u"))try{const y=sessionStorage.getItem(WSe);a(!!y)}catch(y){a(!1)}},[e.search]);const p=_.useMemo(()=>(()=>{if(!e.search)return!1;try{return!!new URLSearchParams(e.search).get(GSe)}catch(C){return!1}})()||o?!0:!m||!MMe({ctx:t,shouldLogExposure:!1})?!1:ze(t,"3950229590").get("suppress_native_download_banner",!1),[t,o,m,e.search]),h=_.useMemo(()=>[{Component:()=>r.jsx(jMe,{onDismiss:()=>{l(!0)}}),isVisible:()=>n&&s&&!i&&!p&&u.get("enable_mobile_app_upsell_banner",!1)},{Component:()=>r.jsx(PMe,{onDismiss:()=>{d(!0)}}),isVisible:()=>n&&!p&&!c&&u.get("enable_moodeng_upsell_banner",!1)}],[n,s,i,c,p,u]).find(y=>y.isVisible()),x=(v=h==null?void 0:h.Component)!=null?v:(()=>null);return r.jsx(x,{})}const RMe=1;function LMe(t){return t?new Date>dv(t,RMe):!0}function OMe(){const[t,e]=Ei(Ue.SubscriptionFailedBanner,null,a=>typeof a=="number"),n=t!=null?Ti(t):null;return{canBeSeen:LMe(n),markSeen:()=>{e(Ta(new Date))}}}var p2,ok;function DMe(){if(ok)return p2;ok=1;var t=YR();function e(n,s,o){var a=n.length;return o=o===void 0?a:o,!s&&o>=a?n:t(n,s,o)}return p2=e,p2}var g2,ak;function aU(){if(ak)return g2;ak=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",o=e+n+s,a="\\ufe0e\\ufe0f",i="\\u200d",l=RegExp("["+i+t+o+a+"]");function c(d){return l.test(d)}return g2=c,g2}var h2,rk;function FMe(){if(rk)return h2;rk=1;function t(e){return e.split("")}return h2=t,h2}var _2,ik;function BMe(){if(ik)return _2;ik=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",o=e+n+s,a="\\ufe0e\\ufe0f",i="["+t+"]",l="["+o+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=d+"?",h="["+a+"]?",x="(?:"+p+"(?:"+[u,f,m].join("|")+")"+h+g+")*",v=h+g+x,y="(?:"+[u+l+"?",l,f,m,i].join("|")+")",b=RegExp(c+"(?="+c+")|"+y+v,"g");function C(S){return S.match(b)||[]}return _2=C,_2}var x2,lk;function UMe(){if(lk)return x2;lk=1;var t=FMe(),e=aU(),n=BMe();function s(o){return e(o)?n(o):t(o)}return x2=s,x2}var y2,ck;function $Me(){if(ck)return y2;ck=1;var t=DMe(),e=aU(),n=UMe(),s=tv();function o(a){return function(i){i=s(i);var l=e(i)?n(i):void 0,c=l?l[0]:i.charAt(0),d=l?t(l,1).join(""):i.slice(1);return c[a]()+d}}return y2=o,y2}var v2,dk;function VMe(){if(dk)return v2;dk=1;var t=$Me(),e=t("toUpperCase");return v2=e,v2}var b2,uk;function HMe(){if(uk)return b2;uk=1;var t=tv(),e=VMe();function n(s){return e(t(s).toLowerCase())}return b2=n,b2}var GMe=HMe();const C2=Gn(GMe),WMe=R(()=>P(()=>import("./dpf52wv18uwxh9t9.js"),__vite__mapDeps([388,1])),{loading:t=>O(t)}),zMe=({message:t,buttonText:e,buttonAction:n,iconAriaLabel:s,isDismissible:o,onDismiss:a})=>r.jsx("div",{className:"pointer-events-none fixed inset-x-4 top-2 z-50 flex justify-center",children:r.jsx(vn,{className:"pointer-events-auto bg-yellow-300 text-[16px] text-black",icon:r.jsx(WMe,{className:"icon-lg mt-1.5","aria-label":s}),content:t,customCtas:e?r.jsx("button",{onClick:n,className:"font-medium text-black underline dark:text-white",type:"button",children:e}):void 0,onDismiss:o?a:void 0})}),qMe=R(()=>P(()=>import("./dpf52wv18uwxh9t9.js"),__vite__mapDeps([388,1])),{loading:t=>O(t)}),YMe=({title:t,message:e,buttonText:n,buttonAction:s,iconAriaLabel:o,isDismissible:a,onDismiss:i})=>r.jsxs("div",{className:"border-main-surface-secondary flex h-auto min-h-16 items-center justify-between bg-yellow-300 p-3 text-black dark:border-transparent",ref:l=>{const c=zl({axis:"height",target:l,onChange({height:d}){document.documentElement.style.setProperty("--top-banner-height","".concat(d,"px"))}});return()=>{c==null||c(),document.documentElement.style.removeProperty("--top-banner-height")}},children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"px-2",children:r.jsx(qMe,{className:"icon-lg","aria-label":o})}),r.jsx("div",{className:"px-2",children:r.jsxs("div",{children:[t&&r.jsx("div",{className:"text-sm font-bold",children:t}),r.jsx("div",{className:W(t?"text-sm":""),children:e})]})})]}),r.jsxs("div",{className:"flex flex-none items-center gap-2 pe-4",children:[n&&r.jsx(_e,{onClick:s,color:"primary",className:"dark:bg-gray-950 dark:text-white",children:n}),a&&r.jsx(gn,{onClick:i,className:"hover:bg-black/10! dark:hover:bg-white/10!"})]})]}),ZMe=7,Ws=be({userTitle:{id:"SubscriptionRenewalFailedBanner.userTitle",defaultMessage:"Your workspace will be deactivated on {date}"},ownerTile:{id:"SubscriptionRenewalFailedBanner.ownerTitle",defaultMessage:"Unable to charge payment method for your Team subscription"},userMessage:{id:"SubscriptionRenewalFailedBanner.userMessage",defaultMessage:"Please contact your workspace admin to retain access to your account"},ownerMessage:{id:"SubscriptionRenewalFailedBanner.ownerMessage",defaultMessage:"We'll keep trying this method, or you can update it now. To continue accessing your workspace, please take action by {date}"},ownerButtonText:{id:"SubscriptionRenewalFailedBanner.ownerButtonText",defaultMessage:"Update"},iconAriaLabel:{id:"SubscriptionRenewalFailedBanner.iconAriaLabel",defaultMessage:"Warning"},personalTitle:{id:"SubscriptionRenewalFailedBanner.personalTitle",defaultMessage:"Unable to charge payment method for your {subscription} subscription"},personalDescriptionNoDate:{id:"SubscriptionRenewalFailedBanner.personalDescription",defaultMessage:"We're keeping your access active for now. To continue using {subscription}, please update your payment details."},personalDescriptionWithDate:{id:"SubscriptionRenewalFailedBanner.personalDescriptionWithDate",defaultMessage:"We're keeping your access active for now. To continue using {subscription}, please update your payment details by {date}."},personalMessageMobileNoDate:{id:"SubscriptionRenewalFailedBanner.personalMessageMobile",defaultMessage:"Subscription charge failed. Please update your payment method."},personalMessageMobileWithDate:{id:"SubscriptionRenewalFailedBanner.personalMessageMobileWithDate",defaultMessage:"Subscription charge failed. Please update your payment method by {date}."}});function KMe(t){t?document.documentElement.classList.add("top-banner-visible"):document.documentElement.classList.remove("top-banner-visible")}const Itt=t=>{"use forget";const e=G.c(2),n=V(),s=et(n),o=q3();if(!(s!=null&&s.hasPaidSubscription())||o.authStatus!==Ho.LoggedIn)return null;let a;return e[0]!==t?(a=r.jsx(QMe,w({},t)),e[0]=t,e[1]=a):a=e[1],a},QMe=({setIsVisible:t})=>{"use no forget";const e=ne(),n=ot(),[s,o]=_.useState(!1),[a,i]=_.useState(!1),{data:l}=DF(),{canBeSeen:c,markSeen:d}=OMe(),u=Cn(),f=u==null?void 0:u.isStandardUserOfAccount(),m=wl(),p=l!=null&&l.plan_type===We.SELF_SERVE_BUSINESS,g=V(),h=l?JMe({ctx:g,planType:l.plan_type}):null,x=l!=null&&l.became_delinquent_timestamp?new Date(l.became_delinquent_timestamp):null,v=x!=null&&new Date>dv(x,p&&f?3:2),y=l!=null&&l.grace_period_end_timestamp!=null&&new Date(l.grace_period_end_timestamp)>new Date,b=l!=null&&!!l.is_delinquent&&y&&l.will_renew&&v,C=b&&p,S=!!(b&&c&&h&&h.get("include_banner_notifications",!1)),k=S&&l!=null&&l.grace_period_end_timestamp!=null&&tq(new Date(l.grace_period_end_timestamp),ZMe)<new Date,E=!!(S&&h&&h.get("is_banner_notification_dismissible",!1)),T=ye(g,"2293185713"),M=!m&&l!=null&&(C||S||T),A=Mo(),I=M&&(!A||E)&&!a,N=I&&!A,L=I&&A;M&&!I&&B.logEvent("Subscription Renewal Failed Banner Hidden On Mobile"),_.useEffect(()=>{I&&(p?f?B.logEventWithStatsig("Subscription Renewal Failed Banner Shown to User","chatgpt_web_subscription_renewal_failed_banner_shown_to_user"):B.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Owner","chatgpt_web_subscription_renewal_failed_banner_shown_to_owner"):B.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Personal User","chatgpt_web_subscription_renewal_failed_banner_shown_to_personal_user")),t==null||t(I)},[I,f,t,p]);const D=async()=>{o(!0);let se;try{se=(await ge.safeGet("/payments/customer_portal",{parameters:{query:{account_id:u==null?void 0:u.getWorkspaceId()}},intercomEventOnError:"fetch-error:customer_portal:get"})).url}catch(ie){se=window.location.origin+"/admin/billing"}finally{o(!1)}B.logEventWithStatsig("Subscription Renewal Failed Banner Owner Clicked","chatgpt_web_subscription_renewal_failed_banner_owner_clicked"),location.href=se},F=()=>{D().catch(()=>{})},$=()=>{B.logEventWithStatsig("Subscription Renewal Failed Banner Personal Manage Subscription CTA Clicked","chatgpt_web_subscription_renewal_failed_banner_personal_cta_clicked"),n("/account/manage")},H=l!=null&&l.grace_period_end_timestamp!=null?hB(e,new Date(l.grace_period_end_timestamp)):null;let z="",K="",J="",Z;p?f?(z=e.formatMessage(Ws.userTitle,{date:H}),K=e.formatMessage(Ws.userMessage)):(z=e.formatMessage(Ws.ownerTile),K=e.formatMessage(Ws.ownerMessage,{date:H}),J=e.formatMessage(Ws.ownerButtonText),Z=F):(z=e.formatMessage(Ws.personalTitle,{subscription:C2(l==null?void 0:l.plan_type)}),J=e.formatMessage(Ws.ownerButtonText),Z=$,A?k?K=e.formatMessage(Ws.personalMessageMobileWithDate,{date:H}):K=e.formatMessage(Ws.personalMessageMobileNoDate):k?K=e.formatMessage(Ws.personalDescriptionWithDate,{subscription:C2(l==null?void 0:l.plan_type),date:H}):K=e.formatMessage(Ws.personalDescriptionNoDate,{subscription:C2(l==null?void 0:l.plan_type)})),KMe(N);const q=()=>{B.logEventWithStatsig("Subscription Renewal Failed Banner Personal Dismissed","chatgpt_web_subscription_renewal_failed_banner_personal_dismissed"),d(),i(!0)};return I?L?r.jsx(zMe,{message:K,buttonText:J,buttonAction:Z,iconAriaLabel:e.formatMessage(Ws.iconAriaLabel),isDismissible:E,onDismiss:q}):r.jsx(YMe,{title:z,message:K,buttonText:J,buttonAction:Z,iconAriaLabel:e.formatMessage(Ws.iconAriaLabel),isDismissible:E,onDismiss:q}):null};function JMe({ctx:t,planType:e}){switch(e){case We.PLUS:return ze(t,"3850010910");case We.GO:return ze(t,"1445695849");case We.PRO:return ze(t,"2420067952");default:return null}}const XMe="_leadingBar_sbmq2_1",eAe="_leadingBarScrollAnimation_sbmq2_19",tAe="_trailingBar_sbmq2_23",nAe="_trailingBarScrollAnimation_sbmq2_41",sAe="_primary_sbmq2_45",gu={leadingBar:XMe,leadingBarScrollAnimation:eAe,trailingBar:tAe,trailingBarScrollAnimation:nAe,primary:sAe};function oAe({disabled:t=!1,track:e}={}){const[n,s]=_.useState(null),o=_.useRef(null),a=_.useRef(null),i=_.useCallback(l=>{if(a.current&&(a.current.disconnect(),a.current=null),o.current=l,t||!l)return;const c=new ResizeObserver(d=>{if(!d.length)return;const u=d[0],{width:f,height:m}=aAe(u);_.startTransition(()=>{s(p=>{const g={width:f,height:m};return!p||e==="width"&&p.width!==f||e==="height"&&p.height!==m||p.width!==f||p.height!==m?g:p})})});c.observe(l),a.current=c},[t,e]);return[n,i]}function aAe(t){let e,n;if(t.borderBoxSize){const s=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=s.inlineSize,n=s.blockSize}else e=t.contentRect.width,n=t.contentRect.height;return{width:e,height:n}}function Kp({disableSizeTracking:t,name:e,track:n}){const[s,o]=oAe({disabled:n===void 0||t,track:n});let a={};return e&&!t&&n&&s&&(a={["--".concat(e,"-").concat(n)]:"".concat(s[n==="width"?"width":"height"],"px")}),[a,o,s]}function rAe(t){var g;const p=t,{axis:e="horizontal",children:n,className:s,hidden:o,leading:a,trailing:i,ref:l,style:c,type:d}=p,u=ke(p,["axis","children","className","hidden","leading","trailing","ref","style","type"]),[f,m]=Kp(u);return r.jsx("div",{"bar-type":d,hidden:o,"data-testid":"bar-".concat((g=u.name)!=null?g:"default"),className:W("gap-bar grid",e==="vertical"&&"flex-col",a&&[gu.leadingBar,gu.leadingBarScrollAnimation],i&&[gu.trailingBar,gu.trailingBarScrollAnimation],d==="primary"&&gu.primary,s),ref:l!=null?l:m,style:w(w({},c),f),children:n})}const iAe="_screen_c7xqp_1",lAe={screen:iAe};function cAe(t){const k=t,{anchor:e,children:n,className:s,contentClassName:o,leading:a,leadingClassName:i,primaryScrollContainer:l,ref:c,style:d,trailing:u,trackLeading:f,trackTrailing:m}=k,p=ke(k,["anchor","children","className","contentClassName","leading","leadingClassName","primaryScrollContainer","ref","style","trailing","trackLeading","trackTrailing"]),{name:g}=p,[h,x]=Kp(p),[v,y]=Kp({disableSizeTracking:!f,name:"".concat(g,"-leading"),track:"height"}),[b,C]=Kp({disableSizeTracking:!m,name:"".concat(g,"-trailing"),track:"height"}),S=g!=null?g:"default";return r.jsxs("section",{className:W(lAe.screen,"h-[var(--screen-height-override,calc(var(--cqh-full)-var(--screen-height-offset,0px)))]","keyboard-open:h-[var(--screen-height-override,calc(var(--cqh-full)-env(keyboard-inset-height,0px)-var(--screen-height-offset,0px)-var(--force-redraw,0px)))]",s),"data-testid":"screen-".concat(S),"data-primary-scroller":l,"screen-anchor":e,ref:db(x,c),style:U(w(w(w(w({},d),h),v),b),{container:g?"".concat(g," / inline-size"):void 0,minWidth:"min(var(--screen-".concat(S,"_min-width), 100cqw)")}),children:[r.jsx("div",{slot:"leading",ref:y,className:i,children:a}),r.jsx("div",{slot:"content",className:o,children:n}),r.jsx("div",{slot:"trailing",ref:E=>{C(E)},children:u})]})}const dAe=R(()=>P(()=>import("./fhiqz5jh4i8adn2f.js"),__vite__mapDeps([389,1])),{loading:t=>O(t)});var TE;const uAe=mt.button(TE||(TE=ct(["cursor-pointer absolute z-30 rounded-full bg-clip-padding border text-token-text-secondary border-token-border-default end-1/2 translate-x-1/2 bg-token-main-surface-primary w-8 h-8 flex items-center justify-center print:hidden"])));function fAe({show:t,onClick:e,className:n}){return r.jsx(mn,{children:t&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},children:r.jsx(uAe,{className:n,onClick:e,children:r.jsx(dAe,{className:"icon text-token-text-primary"})})})})}function mAe(f){var m=f,{ariaLabel:t,leadingFullBleed:e,headerActions:n,trailing:s,handleClose:o,showScrollToBottomButton:a=!1,children:i,onScroll:l,restoreScrollTop:c,scrollMode:d="full-screen"}=m,u=ke(m,["ariaLabel","leadingFullBleed","headerActions","trailing","handleClose","showScrollToBottomButton","children","onScroll","restoreScrollTop","scrollMode"]);const p=V(),g=ts(p),h=_.useRef(null),[x,v]=_.useState(!0);return _.useEffect(()=>{const y=h.current;if(!y||typeof l!="function")return;function b(){y&&l&&l(y.scrollTop)}return y.addEventListener("scroll",b,{passive:!0}),()=>{y.removeEventListener("scroll",b)}},[l]),_.useEffect(()=>{const y=h.current;!y||c==null||requestAnimationFrame(()=>{y.scrollTop=c})},[c]),r.jsxs(r.Fragment,{children:[r.jsxs(cAe,{ref:h,anchor:"top",className:W("relative flex-1",g?"border-s-thin border-(--bento-border-color)":"border-s-token-border-sharp dark:border-token-main-surface-secondary border-s"),style:d==="content-only"?{overflow:"hidden"}:void 0,name:"threadFlyOut",ariaLabel:t,primaryScrollContainer:!0,trackLeading:!0,trailing:s,contentClassName:W("bg-token-bg-primary",d==="content-only"&&"overflow-y-auto"),leading:(()=>{if("renderLeading"in u)return u.renderLeading({handleClose:o});const{leading:y}=u;return r.jsx(rAe,{name:"search-sources-header",type:"primary",className:W("flex items-center ".concat(y?"":"justify-end p-1.5"," bg-transparent!"),e&&"pointer-events-none",g?"min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)]"),children:y?r.jsxs("div",{className:W("flex items-center justify-between px-4 py-3",g?"h-[var(--header-height,3.5rem)] border-(--bento-border-color)":"border-token-border-sharp h-[calc(var(--header-height,3.5rem)+1px)]",e?"pointer-events-none bg-transparent":g?"bg-token-main-surface-primary border-b-thin border-(--bento-border-color)":"bg-token-main-surface-primary border-b"),children:[y,r.jsxs("div",{className:W("flex items-center gap-1",e&&"pointer-events-auto"),children:[n,r.jsx(gn,{className:W("bg-token-main-surface-primary pointer-events-auto -me-2.5",e&&"opacity-80"),bg:e?"primary":"transparent",onClick:o})]})]}):n?r.jsxs("div",{className:"me-3 flex items-center gap-1",children:[n,r.jsx(gn,{className:"bg-token-main-surface-primary! hover:bg-token-main-surface-secondary! p-1",onClick:o})]}):r.jsx(gn,{className:"bg-token-main-surface-primary! hover:bg-token-main-surface-secondary! me-3 p-1",onClick:o})})})(),leadingClassName:e?"pointer-events-none":void 0,children:[i,a&&r.jsx(nq,{setIsScrolledToEdge:y=>{v(!y)},options:{rootMargin:"0px 0px 80px 0px"}})]}),a&&r.jsx(fAe,{show:!x,className:"bottom-8",onClick:()=>{var y,b;(b=h==null?void 0:h.current)==null||b.scrollTo({top:(y=h==null?void 0:h.current)==null?void 0:y.scrollHeight,behavior:"smooth"})}})]})}const pAe=R(()=>P(()=>import("./b61p2jrlkx9diop7.js"),__vite__mapDeps([390,1,10,11,391,392,61,62,59,19,21,17,15,16,18,20,63,64,65,66,67,68,69])).then(t=>t.ChatScreenProductFlyout),{loading:aa}),gAe=R(()=>P(()=>import("./b61p2jrlkx9diop7.js"),__vite__mapDeps([390,1,10,11,391,392,61,62,59,19,21,17,15,16,18,20,63,64,65,66,67,68,69])).then(t=>t.ChatScreenAgentProductFlyout),{loading:aa}),hAe=R(()=>P(()=>import("./o8g67nlyg24uk9at.js"),__vite__mapDeps([393,1,10,11,392,61,62,59,19,21,17,15,16,18,20,63,64,65,66,67,68,69,71,394,395,396,319,0,349,350,112])).then(t=>t.ChatScreenEntityFlyout),{loading:aa}),_Ae=R(()=>P(()=>import("./i0gpfefs37e3gwwl.js"),__vite__mapDeps([397,1,398,10,11,399,400])).then(t=>t.ChatScreenSearchSourcesFlyout),{loading:aa}),xAe=R(()=>P(()=>import("./nz3liyy52upbjeaw.js"),__vite__mapDeps([401,1,402,10,11,66,403,398,399,400])).then(t=>t.ChatScreenRetrievalResultsFlyout),{loading:aa}),yAe=R(()=>P(()=>import("./j6yv5tyunone85r0.js"),__vite__mapDeps([404,1,10,11])).then(t=>t.ChatScreenSummarizerFlyout),{loading:aa}),vAe=R(()=>P(()=>import("./j2fxxw8fjw5358xk.js").then(t=>t.c),__vite__mapDeps([405,1,10,11,406,403,113,407,408,67,409,398,399,400])).then(t=>t.ChatScreenCoTFlyout),{loading:aa}),bAe=R(()=>P(()=>import("./lc0x4d9r6tu0t28l.js"),__vite__mapDeps([410,1,405,10,11,406,403,113,407,408,67,409,398,399,400])).then(t=>t.CaterpillarSidebar),{loading:aa}),CAe=R(()=>P(()=>import("./joih9r2t62hj6gc6.js"),__vite__mapDeps([411,1,398,10,11,399,400])).then(t=>t.AgentSourcesSidebar),{loading:aa}),SAe=R(()=>P(()=>import("./bed4i377b3t1bsof.js"),__vite__mapDeps([412,1,10,11])).then(t=>t.AgentTabsSidebar),{loading:aa});R(()=>P(()=>import("./be0k5l79cn9kpvwt.js"),__vite__mapDeps([413,1,10,11,113])).then(t=>t.CodingCitationsSidebar),{loading:aa});function aa(){"use forget";const t=G.c(5),e=Ao();let n;t[0]!==e?(n=()=>e&&j1(e),t[0]=e,t[1]=n):n=t[1];let s;t[2]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(r.Fragment,{}),t[2]=s):s=t[2];let o;return t[3]!==n?(o=r.jsx(mAe,{ariaLabel:"",handleClose:n,children:s}),t[3]=n,t[4]=o):o=t[4],o}function jtt(t){"use forget";const e=G.c(11),{isExpanded:n,children:s}=t,[o,a]=_.useState("400px");let i;e[0]!==s?(i=Kn.isValidElement(s)?Kn.cloneElement(s,{setWidth:a}):s,e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]!==l?(c=Kn.Children.toArray(l).some(Boolean),e[2]=l,e[3]=c):c=e[3];const d=c;let u;e[4]!==l||e[5]!==d||e[6]!==n||e[7]!==o?(u=n&&d?r.jsx(Xe.div,{className:"bg-token-sidebar-surface-primary relative z-1 shrink-0 overflow-x-hidden max-lg:w-0!",initial:{width:0},animate:{width:o,transition:{type:"spring",bounce:.12}},exit:{width:0},children:r.jsx("div",{className:"absolute h-full",style:{width:o},children:r.jsx("div",{className:"flex h-full flex-col",children:l})})}):null,e[4]=l,e[5]=d,e[6]=n,e[7]=o,e[8]=u):u=e[8];let f;return e[9]!==u?(f=r.jsx(mn,{children:u}),e[9]=u,e[10]=f):f=e[10],f}const Ntt=t=>{"use forget";const e=G.c(38),{conversation:n}=t,s=ae(cM);let o;e[0]!==n?(o=()=>ja(n),e[0]=n,e[1]=o):o=e[1];const a=ae(o);if(!a)return null;if(s)switch(a.type){case"searchSources":{let i;return e[2]!==a||e[3]!==n?(i=r.jsx(_Ae,{conversation:n,sidebar:a}),e[2]=a,e[3]=n,e[4]=i):i=e[4],i}case"product":{let i;return e[5]!==a||e[6]!==n?(i=r.jsx(pAe,{conversation:n,sidebar:a}),e[5]=a,e[6]=n,e[7]=i):i=e[7],i}case"product_agent":{let i;return e[8]!==a||e[9]!==n?(i=r.jsx(gAe,{conversation:n,sidebar:a}),e[8]=a,e[9]=n,e[10]=i):i=e[10],i}case"entity":{let i;return e[11]!==a||e[12]!==n?(i=r.jsx(hAe,{conversation:n,sidebar:a}),e[11]=a,e[12]=n,e[13]=i):i=e[13],i}}switch(a.type){case"retrievalResults":{let i;return e[14]!==a||e[15]!==n?(i=r.jsx(xAe,{conversation:n,sidebar:a}),e[14]=a,e[15]=n,e[16]=i):i=e[16],i}case"summarizer":{let i;return e[17]!==a||e[18]!==n?(i=r.jsx(yAe,{conversation:n,sidebar:a}),e[17]=a,e[18]=n,e[19]=i):i=e[19],i}case"cot":{let i;return e[20]!==a||e[21]!==n?(i=r.jsx(vAe,{conversation:n,sidebar:a}),e[20]=a,e[21]=n,e[22]=i):i=e[22],i}case"caterpillar":{let i;return e[23]!==a.caterpillarId||e[24]!==a.initialTab?(i=r.jsx(bAe,{taskId:a.caterpillarId,initialTab:a.initialTab}),e[23]=a.caterpillarId,e[24]=a.initialTab,e[25]=i):i=e[25],i}case"n7jupdSources":{let i;return e[26]!==a||e[27]!==n?(i=r.jsx(CAe,{conversation:n,sidebar:a}),e[26]=a,e[27]=n,e[28]=i):i=e[28],i}case"n7jupdTabs":{let i;return e[29]!==a.tabs||e[30]!==n?(i=r.jsx(SAe,{conversation:n,tabs:a.tabs}),e[29]=a.tabs,e[30]=n,e[31]=i):i=e[31],i}}return null};function Ptt({clientThreadId:t}){const e=jv(o=>o.notifications),n=_.useRef(new Set),s=W("pointer-events-auto fixed end-4 top-8 z-100 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse px-2 py-4",e.length>3&&"overflow-y-auto");return _.useEffect(()=>{e.filter(a=>a.clientThreadId===void 0||t===a.clientThreadId).map(a=>a.id).filter(a=>a!==void 0).forEach(a=>Nv(a)),e.forEach(a=>{a.id&&!n.current.has(a.id)&&(Ye.logEvent("chatgpt_notification_shown"),B.logEvent("Notifications: Notification Shown to User"),n.current.add(a.id))})},[t,e]),e.length===0||Yo?null:r.jsx("div",{className:s,children:r.jsx(mn,{children:e.map(o=>r.jsx(kAe,w({},o),o.id))})})}function wAe({notification:t}){return t.userAvatar!=null?r.jsx(D3,{user:t.userAvatar}):t.icon?r.jsx(sq,{className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border",IconComponent:t.icon}):r.jsx(cg,{iconName:"openai",className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border"})}function kAe(e){var t=ke(e,[]);var l,c;const n=ot(),s=jt(),o=ne(),a=Qn(t.clientThreadId),i=()=>{Ye.logEvent("chatgpt_notification_clicked"),B.logEvent("Notifications: User Clicked Notification"),t.onClick!=null?t.onClick():a&&Iv(n,s,a),t.id&&Nv(t.id)};return r.jsxs(Xe.div,{onClick:i,className:"border-token-border-default bg-token-main-surface-primary z-100 inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border px-3 py-3 align-middle shadow-lg","data-ignore-for-page-load":!0,initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[r.jsx(wAe,{notification:t}),r.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[r.jsx("div",{className:"text-token-text-primary w-full truncate text-sm font-medium",children:(l=t.title)!=null?l:o.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),t.subtitle&&r.jsx("div",{className:"text-token-text-tertiary w-full truncate text-sm",children:t.subtitle}),((c=t.payload)==null?void 0:c.display_image_url)&&r.jsx("img",{className:"mt-2 h-12 w-12 rounded-xs",src:t.payload.display_image_url,alt:t.payload.image_alt})]})]})}function Rtt(){const t=jt(),e=_.useCallback(function(s){var l,c;const o=s.data.conversation_id;if(!o)return;const a=(c=(l=ft(o))==null?void 0:l.title)!=null?c:void 0,i=he.getGizmoId(ft(o));uf({title:a,subtitle:s.title,clientThreadId:o}),eo(t,i),Ma(o)},[t]),n=_.useCallback(function(s){var i,l;const o=s.data.conversation_id;if(!o)return;const a=(l=(i=ft(o))==null?void 0:i.title)!=null?l:void 0;uf({title:a,subtitle:s.body,clientThreadId:o})},[]);return _.useEffect(()=>{const s={"new-message":e,"automation-error":n},o=a=>{if(a.data.type in s){const i=a.data.type;s[i](a.data)}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",o)}},[e,n,t]),null}const EAe="1881066865";function Da(t){return ye(t,EAe)}const fk="3747963938802455",Nc="1105138088231444",TAe="Lead",MAe="AddToCart",AAe={"":"",[We.GO]:"FindLocation",[We.PLUS]:"AddToWishlist",[We.PRO]:"CustomizeProduct",[We.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-team-contact-sales":"ViewContent","chatgpt-explore-plan":"Subscribe","chatgpt-subscribe-plan-plus":"AddPaymentInfo","chatgpt-subscribe-plan-go":"InitiateCheckout","chatgpt-subscribe-plan-pro":"CompleteRegistration","chatgpt-subscribe-plan-business":"Schedule"},IAe={"":"",[We.GO]:"FindLocation",[We.PLUS]:"AddToWishlist",[We.PRO]:"CustomizeProduct",[We.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-team-contact-sales":"ViewContent","chatgpt-explore-plan":"Subscribe","chatgpt-subscribe-plan-plus":"AddPaymentInfo","chatgpt-subscribe-plan-go":"InitiateCheckout","chatgpt-subscribe-plan-pro":"CompleteRegistration","chatgpt-subscribe-plan-business":"Schedule"};function Ltt(){"use forget";const t=G.c(8),e=V();let n;t[0]!==e?(n=Da(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==e?(o=tt(e),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=dt(Fe.hasSeenMaverick),c=cn();let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=U(w({},hi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=d):d=t[4];const{data:u,isLoading:f}=rt(d),m=u?u.is_consent_required?!!u.consent_marketing:!0:!1,p=s&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}function Ott(t){"use forget";const e=G.c(6),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=V(),l=cn();let c;e[0]!==i?(c=Ln(i),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:d}=c;if(!window||!l&&!a||!d)return jAe;let u;return e[2]!==d||e[3]!==n||e[4]!==s?(u=()=>{const f=na(sa.Fbclid),m=f?AAe[n]:IAe[n];if(!m)return;const p=rU(d);p("set","autoConfig","false",Nc),p("init",Nc),p("dataProcessingOptions",["LDU"],0,0),f?p("trackSingle",Nc,m,{fbclid:f}):p("trackSingle",Nc,m),s()},e[2]=d,e[3]=n,e[4]=s,e[5]=u):u=e[5],u}function jAe(){}function Dtt(){"use forget";const t=G.c(7),e=cn(),n=V(),s=Da(n);let o;t[0]!==n?(o=Ln(n),t[0]=n,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForMaverick,{eligible:c}=dt(Fe.hasSeenMaverickCapi);if(!window||!e||!i||!s)return NAe;let d;return t[2]!==i||t[3]!==n||t[4]!==c||t[5]!==l?(d=()=>{const u=na(sa.Fbclid);if(!u&&!l)return;const f=rU(i);u&&(f("init",fk),f("dataProcessingOptions",["LDU"],0,0),f("trackSingle",fk,TAe,{fbclid:u})),c&&(f("init",Nc),f("dataProcessingOptions",["LDU"],0,0),f("trackSingle",Nc,MAe,{fbclid:u!=null?u:""}),st(n,Fe.hasSeenMaverickCapi))},t[2]=i,t[3]=n,t[4]=c,t[5]=l,t[6]=d):d=t[6],d}function NAe(){}function rU(t){return!window||!document?()=>{}:((function(e,n,s,o,a,i,l){e.fbq||(a=e.fbq=function(){a.callMethod?a.callMethod(...arguments):a.queue.push(arguments)},e._fbq||(e._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],i=n.createElement(s),i.async=!0,i.src=o,i.nonce=t,l=n.getElementsByTagName(s)[0],l==null||l.parentNode.insertBefore(i,l))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),window.fbq)}const iU="AW-16678058309",lU="AW-16679965591";function Ftt(){const t=V(),e=!tt(t),{eligible:n,isLoading:s}=dt(Fe.hasSeenPioneer),o=cn(),{data:a,isLoading:i}=rt(U(w({},hi),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),l=a?a.is_consent_required?!!a.consent_marketing:!0:!1;return{eligible:o&&o.created>Date.now()/1e3-1440*60&&n&&l&&!e,isLoading:s||i}}function PAe(){["IDE","ANID","NID"].forEach(e=>{try{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=."+window.location.hostname}catch(n){Ye.logEvent("chatgpt_pioneer_cookie_error")}})}async function RAe(t){if(t)try{const n=new TextEncoder().encode(t);return await crypto.subtle.digest("SHA-256",n).then(s=>Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join(""))}catch(e){Ye.logEvent("chatgpt_pioneer_email_error")}}const LAe={"":"",[We.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[We.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[We.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[We.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"AW-16679965591/qdZOCN-224sbEJen0JE-","chatgpt-team-contact-sales":"AW-16679965591/X1ZvCLPptJQbEJen0JE-","chatgpt-explore-plan":"AW-16678058309/-VhXCK3Z2r0bEMXy25A-","chatgpt-subscribe-plan-plus":"AW-16678058309/LjaPCJnT0b0bEMXy25A-","chatgpt-subscribe-plan-go":"AW-16678058309/ShZRCJbT0b0bEMXy25A-","chatgpt-subscribe-plan-pro":"AW-16678058309/lwuWCJzT0b0bEMXy25A-","chatgpt-subscribe-plan-business":"AW-16678058309/NiaVCLbJ2b0bEMXy25A-"},OAe={"":"",[We.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[We.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[We.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[We.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"AW-16679965591/qdZOCN-224sbEJen0JE-","chatgpt-team-contact-sales":"AW-16679965591/X1ZvCLPptJQbEJen0JE-","chatgpt-explore-plan":"AW-16678058309/-VhXCK3Z2r0bEMXy25A-","chatgpt-subscribe-plan-plus":"AW-16678058309/LjaPCJnT0b0bEMXy25A-","chatgpt-subscribe-plan-go":"AW-16678058309/ShZRCJbT0b0bEMXy25A-","chatgpt-subscribe-plan-pro":"AW-16678058309/lwuWCJzT0b0bEMXy25A-","chatgpt-subscribe-plan-business":"AW-16678058309/NiaVCLbJ2b0bEMXy25A-"},DAe={"":"",[We.GO]:"",[We.PLUS]:"",[We.PRO]:"",[We.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"AW-16679965591/fQSPCKP20r0bEJen0JE-","chatgpt-subscribe-plan-plus":"AW-16679965591/zJU3CLC02b0bEJen0JE-","chatgpt-subscribe-plan-go":"AW-16679965591/rQqJCK202b0bEJen0JE-","chatgpt-subscribe-plan-pro":"AW-16679965591/AZZZCLO02b0bEJen0JE-","chatgpt-subscribe-plan-business":"AW-16679965591/XTwNCLa02b0bEJen0JE-"},FAe={"":"",[We.GO]:"",[We.PLUS]:"",[We.PRO]:"",[We.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"AW-16679965591/fQSPCKP20r0bEJen0JE-","chatgpt-subscribe-plan-plus":"AW-16679965591/zJU3CLC02b0bEJen0JE-","chatgpt-subscribe-plan-go":"AW-16679965591/rQqJCK202b0bEJen0JE-","chatgpt-subscribe-plan-pro":"AW-16679965591/AZZZCLO02b0bEJen0JE-","chatgpt-subscribe-plan-business":"AW-16679965591/XTwNCLa02b0bEJen0JE-"},mk=[[iU,"0kStCJHMl9QZEMXy25A-"],[lU,"1dOfCL2W9ZYbEJen0JE-"]];function Btt({key:t,onTracked:e,allowUnauthenticatedTracking:n=!1}){const s=V(),o=cn(),{cspScriptNonce:a}=Ln(s);return!window||!o&&!n||!a?()=>{}:()=>{const i=na(sa.Gclid),l=i?LAe[t]:OAe[t],c=i?DAe[t]:FAe[t];if(!l&&!c)return;const d=(u,f)=>{if(!f)return;const m=dM(a,u);m("config",u,{send_page_view:!1,conversion_linker:!1,allow_ad_personalization_signals:!1,restricted_data_processing:!0}),i?m("event","conversion",{send_to:f,user_data:{gclid:i}}):m("event","conversion",{send_to:f})};l&&d(iU,l),c&&d(lU,c),e()}}function Utt(){"use forget";const t=G.c(6),e=cn(),n=V();let s;t[0]!==n?(s=Ln(n),t[0]=n,t[1]=s):s=t[1];const o=s,{cspScriptNonce:a}=o,i=o.eligibleNoCookieConsumerMarketing.isUserEligibleForPioneer;if(!window||!e||!a)return BAe;let l;return t[2]!==a||t[3]!==i||t[4]!==e?(l=async()=>{const c=na(sa.Gclid);if(!c&&!i)return;const d=await RAe(e.email),[u]=mk[0],f=dM(a,u);for(const[m,p]of mk)f("config",m,{send_page_view:!1,conversion_linker:!0,restricted_data_processing:!0}),PAe(),f("set","user_data",{sha256_email_address:d}),f("event","conversion",{send_to:"".concat(m,"/").concat(p),user_data:{sha256_email_address:d,gclid:c!=null?c:void 0}});Ye.logEvent("chatgpt_pioneer_conv")},t[2]=a,t[3]=i,t[4]=e,t[5]=l):l=t[5],l}function BAe(){}const UAe={"":0,[We.GO]:22738426,[We.PLUS]:22738410,[We.PRO]:22738418,[We.SELF_SERVE_BUSINESS]:22738434,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":22837578,"chatgpt-team-contact-sales":22998554,"chatgpt-explore-plan":24300506,"chatgpt-subscribe-plan-plus":24300482,"chatgpt-subscribe-plan-go":24300474,"chatgpt-subscribe-plan-pro":24300490,"chatgpt-subscribe-plan-business":24300498},$Ae={"":0,[We.GO]:0,[We.PLUS]:0,[We.PRO]:0,[We.SELF_SERVE_BUSINESS]:0,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":0,"chatgpt-team-contact-sales":0,"chatgpt-explore-plan":0,"chatgpt-subscribe-plan-plus":0,"chatgpt-subscribe-plan-go":0,"chatgpt-subscribe-plan-pro":0,"chatgpt-subscribe-plan-business":0},VAe={"":0,[We.GO]:22332948,[We.PLUS]:22332932,[We.PRO]:22332940,[We.SELF_SERVE_BUSINESS]:22332956,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":22332972,"chatgpt-team-contact-sales":22332964,"chatgpt-explore-plan":22333036,"chatgpt-subscribe-plan-plus":22333012,"chatgpt-subscribe-plan-go":22333004,"chatgpt-subscribe-plan-pro":22333020,"chatgpt-subscribe-plan-business":22333028},HAe={"":0,[We.GO]:0,[We.PLUS]:0,[We.PRO]:0,[We.SELF_SERVE_BUSINESS]:0,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":0,"chatgpt-team-contact-sales":0,"chatgpt-explore-plan":0,"chatgpt-subscribe-plan-plus":0,"chatgpt-subscribe-plan-go":0,"chatgpt-subscribe-plan-pro":0,"chatgpt-subscribe-plan-business":0};function $tt(){"use forget";const t=G.c(8),e=V();let n;t[0]!==e?(n=Da(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==e?(o=tt(e),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=dt(Fe.hasSeenSeeker),c=cn();let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=U(w({},hi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=d):d=t[4];const{data:u,isLoading:f}=rt(d),m=u?u.is_consent_required?!!u.consent_marketing:!0:!1,p=s&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}function Vtt(){"use forget";const t=G.c(5),e=cn(),n=V(),s=Da(n);let o;t[0]!==n?(o=Ln(n),t[0]=n,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForSeeker;if(!window||!e||!i||!s)return GAe;let c;return t[2]!==i||t[3]!==l?(c=()=>{if(!(!na(sa.Liclid)&&!l))try{By(i,zo)("track",{conversion_id:22332924,[zc]:zo})}catch(u){const f=u;Re.addError(f,{conversion_id:22332924,partner_id:zo})}},t[2]=i,t[3]=l,t[4]=c):c=t[4],c}function GAe(){}const pk="seeker-script-8jd10",WAe="seeker-script-h8d129",oi="7057666",zo="8245332",zc="__seekerPartnerId";let gk=!1;const Yr={},hk={},ah={};function Zu(t){const e=Yr[t];if(!e)return;const n=ah[t];if(n!=null&&n.length){ah[t]=[];for(const[s,o,a]of n)e.call(s,o,a)}}function cU(t){if(typeof window>"u")return;const e=window,n="_linkedin_data_partner_ids";e._linkedin_partner_id=t,e._linkedin_data_partner_id=t,e[n]=Array.isArray(e[n])?e[n]:[],e[n].includes(t)||e[n].push(t)}function zAe(){if(gk||typeof window>"u")return;gk=!0;const t=window;let e=t.lintrk;const n=s=>{if(!s||s.__seekerWrapped)return s;const o=!!s.q,a=function(l,c){let d;if(c&&zc in c){const f=c[zc];(f===oi||f===zo)&&(d=f)}d&&cU(d);let u=c;return!o&&d&&c&&(u=w({},c),delete u[zc]),s.call(this,l,u)};return o&&s.q&&(a.q=s.q),a.__seekerWrapped=!0,a.__seekerIsStub=o,a};Object.defineProperty(t,"lintrk",{configurable:!0,get(){return e},set(s){if(e=n(s),e&&!e.__seekerIsStub){const o=t._linkedin_partner_id;o===oi?(Yr[oi]=e,Zu(oi)):o===zo&&(Yr[zo]=e,Zu(zo))}}}),e=n(e)}function qAe(t){switch(t){case oi:return pk;case zo:return WAe;default:return pk}}function Htt(t){"use forget";const e=G.c(6),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=V(),l=cn();let c;e[0]!==i?(c=Ln(i),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:d}=c;if(!window||!l&&!a||!d)return YAe;let u;return e[2]!==d||e[3]!==n||e[4]!==s?(u=()=>{const f=na(sa.Liclid),m=f?UAe[n]:$Ae[n],p=f?VAe[n]:HAe[n];if(!(!m&&!p)){if(m)try{By(d,oi)("track",{conversion_id:m,[zc]:oi}),s()}catch(g){const h=g;Re.addError(h,{conversion_id:m,partner_id:oi})}if(p)try{By(d,zo)("track",{conversion_id:p,[zc]:zo}),s()}catch(g){const h=g;Re.addError(h,{conversion_id:p,partner_id:zo})}}},e[2]=d,e[3]=n,e[4]=s,e[5]=u):u=e[5],u}function YAe(){}function By(t,e){var o,a;if(typeof window>"u"||typeof document>"u")return()=>{};zAe();const n=window;cU(e);let s=hk[e];if(s||(s=function(l,c){var f;const d=Yr[e];if(d)return Zu(e),d.call(this,l,c);((f=ah[e])!=null?f:ah[e]=[]).push([this,l,c])},hk[e]=s),!Yr[e]){if(!n.lintrk){const c=function(u,f){var p;const m=(p=n.lintrk)==null?void 0:p.q;m&&m.push([u,f])};c.q=[],n.lintrk=c}const i=qAe(e);if(document.getElementById(i))!Yr[e]&&typeof n.lintrk=="function"&&(Yr[e]=n.lintrk,Zu(e));else{const c=document.getElementsByTagName("script")[0],d=document.createElement("script");d.id=i,d.type="text/javascript",d.async=!0,d.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",typeof t=="string"&&(d.nonce=t),d.addEventListener("load",()=>{const u=n.lintrk;typeof u=="function"&&(Yr[e]=u,Zu(e))}),((a=(o=c==null?void 0:c.parentNode)!=null?o:document.head)!=null?a:document.documentElement).insertBefore(d,c!=null?c:null)}}return s}function Gtt(){"use forget";const t=G.c(8),e=V();let n;t[0]!==e?(n=Da(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==e?(o=tt(e),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=dt(Fe.hasSeenStratos),c=cn();let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=U(w({},hi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=d):d=t[4];const{data:u,isLoading:f}=rt(d),m=u?u.is_consent_required?!!u.consent_marketing:!0:!1,p=s&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}function Wtt(){"use forget";const t=G.c(5),e=cn(),n=V(),s=Da(n);let o;t[0]!==n?(o=Ln(n),t[0]=n,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForStratos;if(!window||!e||!i||!s)return ZAe;let c;return t[2]!==i||t[3]!==l?(c=()=>{const d=na(sa.Tiktokclid);if(!(!d&&!l))try{const u=KAe(i);u.load("D0V58BRC77UC6ES2LGJG",{limited_data_use:!0}),u.page(),u.identify({external_id:d}),u.track("AddToCart")}catch(u){const f=u;Re.addError(f,{message:"Failed to track Stratos conversion"})}},t[2]=i,t[3]=l,t[4]=c):c=t[4],c}function ZAe(){}function KAe(t){return!window||!document?()=>{}:((function(e,n,s){e.TiktokAnalyticsObject=s;var o=e[s]=e[s]||[];o.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],o.setAndDefer=function(i,l){i[l]=function(){i.push([l].concat(Array.prototype.slice.call(arguments,0)))}};for(var a=0;a<o.methods.length;a++)o.setAndDefer(o,o.methods[a]);o.instance=function(i){for(var l=o._i[i]||[],c=0;c<o.methods.length;c++)o.setAndDefer(l,o.methods[c]);return l},o.load=function(i,l){var c="https://analytics.tiktok.com/i18n/pixel/events.js";l&&l.partner,o._i=o._i||{},o._i[i]=[],o._i[i]._u=c,o._t=o._t||{},o._t[i]=+new Date,o._o=o._o||{},o._o[i]=l||{},l=n.createElement("script"),l.type="text/javascript",l.async=!0,l.src=c+"?sdkid="+i+"&lib="+s,l.nonce=t,i=n.getElementsByTagName("script")[0],i.parentNode.insertBefore(l,i)}})(window,document,"ttq"),window.ttq)}function ztt(){"use forget";const t=G.c(8),e=V();let n;t[0]!==e?(n=Da(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==e?(o=tt(e),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=dt(Fe.hasSeenTrailBlazer),c=cn();let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=U(w({},hi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=d):d=t[4];const{data:u,isLoading:f}=rt(d),m=u?u.is_consent_required?!!u.consent_marketing:!0:!1,p=s&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}const QAe={"":"",[We.GO]:"FindLocation",[We.PLUS]:"AddToCart",[We.PRO]:"CustomizeProduct",[We.SELF_SERVE_BUSINESS]:"Purchase","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"PageVisit","chatgpt-team-contact-sales":"SignUp","chatgpt-explore-plan":"","chatgpt-subscribe-plan-plus":"","chatgpt-subscribe-plan-go":"","chatgpt-subscribe-plan-pro":"","chatgpt-subscribe-plan-business":""},JAe={"":"",[We.GO]:"",[We.PLUS]:"",[We.PRO]:"",[We.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-team-contact-sales":"","chatgpt-explore-plan":"","chatgpt-subscribe-plan-plus":"","chatgpt-subscribe-plan-go":"","chatgpt-subscribe-plan-pro":"","chatgpt-subscribe-plan-business":""};function qtt(t){"use forget";const e=G.c(6),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=V(),l=cn();let c;e[0]!==i?(c=Ln(i),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:d}=c;if(!window||!l&&!a||!d)return XAe;let u;return e[2]!==d||e[3]!==n||e[4]!==s?(u=()=>{const f=na(sa.Rdtcid),m=f?QAe[n]:JAe[n];if(!m)return;const p=dU(d);p("init","a2_f1c16ccvsrrl",{dpm:"LDU",dpcc:"ALL",dprc:"ALL"}),f?p("track",m,{rdt_cid:f}):p("track",m),s()},e[2]=d,e[3]=n,e[4]=s,e[5]=u):u=e[5],u}function XAe(){}function Ytt(){"use forget";const t=G.c(5),e=cn(),n=V(),s=Da(n);let o;t[0]!==n?(o=Ln(n),t[0]=n,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForTrailBlazer;if(!window||!e||!i||!s)return eIe;let c;return t[2]!==i||t[3]!==l?(c=()=>{const d=na(sa.Rdtcid);if(!d&&!l)return;const u=dU(i);u("init","a2_f1c16ccvsrrl",{}),u("track","Lead",{rdt_cid:d!=null?d:void 0})},t[2]=i,t[3]=l,t[4]=c):c=t[4],c}function eIe(){}function dU(t){return!window||!document?()=>{}:((function(e,n){if(!e.rdt){var s=e.rdt=function(){s.sendEvent?s.sendEvent(...arguments):s.callQueue.push(arguments)};s.callQueue=[];var o=n.createElement("script");o.src="https://www.redditstatic.com/ads/pixel.js",o.async=!0,o.nonce=t;var a=n.getElementsByTagName("script")[0];a==null||a.parentNode.insertBefore(o,a)}})(window,document),window.rdt)}const tIe="187204252",_k="wayfinder-uet-script",nIe={"":"",[We.GO]:"FindLocation",[We.PLUS]:"AddToWishlist",[We.PRO]:"CustomizeProduct",[We.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-team-contact-sales":"ViewContent","chatgpt-explore-plan":"","chatgpt-subscribe-plan-plus":"","chatgpt-subscribe-plan-go":"","chatgpt-subscribe-plan-pro":"","chatgpt-subscribe-plan-business":""};function Ztt(){"use forget";const t=G.c(8),e=V();let n;t[0]!==e?(n=Da(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==e?(o=tt(e),t[2]=e,t[3]=o):o=t[3];const a=!o,{eligible:i,isLoading:l}=dt(Fe.hasSeenWayfinder),c=cn();let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=U(w({},hi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[4]=d):d=t[4];const{data:u,isLoading:f}=rt(d),m=u?u.is_consent_required?!!u.consent_marketing:!0:!1,p=s&&c&&i&&m&&!a,g=l||f;let h;return t[5]!==p||t[6]!==g?(h={eligible:p,isLoading:g},t[5]=p,t[6]=g,t[7]=h):h=t[7],h}function Ktt(t){"use forget";const e=G.c(6),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=V(),l=cn();let c;e[0]!==i?(c=Ln(i),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:d}=c;if(!window||!l&&!a||!d)return sIe;let u;return e[2]!==d||e[3]!==n||e[4]!==s?(u=()=>{if(!na(sa.Msclkid))return;const m=nIe[n];if(m)try{const p=uU(d);if(!p)return;p.push("event",m),s()}catch(p){const g=p;Re.addError(g,{message:"Failed to track Wayfinder Bing b2b conversion",eventName:m})}},e[2]=d,e[3]=n,e[4]=s,e[5]=u):u=e[5],u}function sIe(){}function Qtt(){"use forget";const t=G.c(5),e=cn(),n=V(),s=Da(n);let o;t[0]!==n?(o=Ln(n),t[0]=n,t[1]=o):o=t[1];const a=o,{cspScriptNonce:i}=a,l=a.eligibleNoCookieConsumerMarketing.isUserEligibleForWayfinder;if(!window||!e||!i||!s)return oIe;let c;return t[2]!==i||t[3]!==l?(c=()=>{if(!(!na(sa.Msclkid)&&!l))try{const u=uU(i);if(!u)return;u.push("event","AddToCart")}catch(u){const f=u;Re.addError(f,{message:"Failed to track Wayfinder Bing b2c conversion",eventName:"AddToCart"})}},t[2]=i,t[3]=l,t[4]=c):c=t[4],c}function oIe(){}function uU(t){var a,i;if(!window||!document)return;const e=window;e.uetq=(a=e.uetq)!=null?a:[];const n=()=>{var c;if(e.__wayfinderUetInitialized||typeof e.UET!="function")return;const l={ti:tIe,enableAutoSpaTracking:!0};l.q=e.uetq,e.uetq=new e.UET(l),(c=e.uetq)==null||c.push("pageLoad"),e.__wayfinderUetInitialized=!0};if(document.getElementById(_k))return n(),e.uetq;const s=document.createElement("script");s.id=_k,s.async=!0,s.src="https://bat.bing.com/bat.js",t&&(s.nonce=t),s.onload=n,s.addEventListener("readystatechange",()=>{const l=s.readyState;(!l||l==="loaded"||l==="complete")&&n()});const o=document.getElementsByTagName("script")[0];return(i=o==null?void 0:o.parentNode)==null||i.insertBefore(s,o),e.uetq}function Jtt(){"use forget";const t=G.c(6),e=V();let n,s;if(t[0]!==e){const l=ye(e,"2717328795");n=rt,s=aIe(l),t[0]=e,t[1]=n,t[2]=s}else n=t[1],s=t[2];const{data:o}=n(s);let a,i;t[3]!==o?(a=()=>{!o||!o.ui_info||_i.updateDetails(o)},i=[o],t[3]=o,t[4]=a,t[5]=i):(a=t[4],i=t[5]),_.useEffect(a,i)}function aIe(t){return es({enabled:t,queryKey:["home-beacon"],queryFn:async()=>(await ge.safeGet("/beacons/home")).beacon_ui_response})}const rIe={stiffness:300,damping:30,mass:1},iIe={transition:rIe,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},lIe={setFocusedObject:t=>{Cg.setState({focusedObject:t}),_te()},close(){Cg.setState({focusedObject:null})}},cIe=({className:t})=>r.jsxs(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:[r.jsx("path",{d:"M11.5047 10C12.8828 10 14 11.1172 14 12.4953C14 15.2919 10.9404 14.9905 9.00947 14.9905C9.00947 13.0596 8.70813 10 11.5047 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),r.jsx("path",{d:"M12 9.5C13.8983 6.79576 16.0839 4.85949 18.8983 3.40128C19.3829 3.15019 19.9712 3.25691 20.3571 3.64286V3.64286C20.7431 4.0288 20.8498 4.61706 20.5987 5.10168C19.1405 7.91612 17.2042 10.1017 14.5 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M12.0003 21.0003C11.5003 21.0003 8.93732 20.1297 6.71782 17.9102C3.00784 14.2002 2.05809 9.13491 4.5965 6.5965C6.68218 4.51082 10.4738 4.78002 13.8179 7.00031M17.1066 10.0003C19.9927 13.3315 21.2146 16.7289 19.0003 18.5003C17.3415 19.8274 15.2424 18.2927 14.0176 17.1097",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),dIe=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.70711 2.29289C8.09763 2.68342 8.09763 3.31658 7.70711 3.70711L6.41421 5H13.5C17.6421 5 21 8.35786 21 12.5C21 16.6421 17.6421 20 13.5 20H9C8.44772 20 8 19.5523 8 19C8 18.4477 8.44772 18 9 18H13.5C16.5376 18 19 15.5376 19 12.5C19 9.46243 16.5376 7 13.5 7H6.41421L7.70711 8.29289C8.09763 8.68342 8.09763 9.31658 7.70711 9.70711C7.31658 10.0976 6.68342 10.0976 6.29289 9.70711L3.29289 6.70711C2.90237 6.31658 2.90237 5.68342 3.29289 5.29289L6.29289 2.29289C6.68342 1.90237 7.31658 1.90237 7.70711 2.29289Z",fill:"currentColor"})}),uIe=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2929 2.29289C16.6834 1.90237 17.3166 1.90237 17.7071 2.29289L20.7071 5.29289C21.0976 5.68342 21.0976 6.31658 20.7071 6.70711L17.7071 9.70711C17.3166 10.0976 16.6834 10.0976 16.2929 9.70711C15.9024 9.31658 15.9024 8.68342 16.2929 8.29289L17.5858 7H10.5C7.46243 7 5 9.46243 5 12.5C5 15.5376 7.46243 18 10.5 18H15C15.5523 18 16 18.4477 16 19C16 19.5523 15.5523 20 15 20H10.5C6.35786 20 3 16.6421 3 12.5C3 8.35786 6.35786 5 10.5 5H17.5858L16.2929 3.70711C15.9024 3.31658 15.9024 2.68342 16.2929 2.29289Z",fill:"currentColor"})}),Xtt=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{d:"M3 18H4.17157C4.70201 18 5.21071 17.7893 5.58579 17.4142L15.4142 7.58579C15.7893 7.21071 16.298 7 16.8284 7H19M3 6H4.17157C4.70201 6 5.21071 6.21071 5.58579 6.58579L8 9M19 17H16.8284C16.298 17 15.7893 16.7893 15.4142 16.4142L14 15M18 4L21 7L18 10M18 14L21 17L18 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),ent=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),tnt=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),nnt=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"6",y:"2",width:"12",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),fIe=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4C13 3.44772 13.4477 3 14 3H20C20.5523 3 21 3.44772 21 4V10C21 10.5523 20.5523 11 20 11C19.4477 11 19 10.5523 19 10V6.41421L15.2071 10.2071C14.8166 10.5976 14.1834 10.5976 13.7929 10.2071C13.4024 9.81658 13.4024 9.18342 13.7929 8.79289L17.5858 5H14C13.4477 5 13 4.55228 13 4ZM4 13C4.55228 13 5 13.4477 5 14V17.5858L8.79289 13.7929C9.18342 13.4024 9.81658 13.4024 10.2071 13.7929C10.5976 14.1834 10.5976 14.8166 10.2071 15.2071L6.41421 19H10C10.5523 19 11 19.4477 11 20C11 20.5523 10.5523 21 10 21H4C3.44772 21 3 20.5523 3 20V14C3 13.4477 3.44772 13 4 13Z",fill:"currentColor"})}),mIe=R(()=>P(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([147,1])),{loading:t=>O(t)}),pIe=R(()=>P(()=>import("./m6idklazvjc7d344.js"),__vite__mapDeps([278,1])),{loading:t=>O(t)}),fU=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),gIe=R(()=>P(()=>import("./iyn42bfr1ydmech0.js"),__vite__mapDeps([25,1])),{loading:t=>O(t)});function snt({imageAsset:t,mode:e,setMode:n,clientThreadId:s,messageId:o,cursorWidth:a,setCursorWidth:i,inpaintingDrawingState:l,isLoadingNewImage:c}){const d=At(s),{canUndoDrawing:u,undoDrawing:f,canRedoDrawing:m,redoDrawing:p,clearAllDrawings:g}=l,h=ne();return r.jsxs(Xe.div,U(w({className:"flex h-16 w-full justify-between px-4"},iIe),{children:[r.jsx("div",{className:"flex items-center",children:e==="inpaint"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:W("flex items-center gap-3",c&&"opacity-50"),children:[r.jsx(yk,{className:"h-[11px] w-[11px]"}),r.jsxs(W5,{className:"relative flex w-[90px] items-center",min:32,max:240,step:.01,value:[a],onValueChange:x=>i(x[0]),disabled:c,children:[r.jsx(z5,{className:"bg-token-text-quaternary relative h-[2px] grow",children:r.jsx(wF,{className:"bg-token-text-secondary absolute h-full"})}),r.jsx(q5,{className:"bg-token-text-secondary block h-[11px] w-[11px] rounded-full"})]}),r.jsx(yk,{className:"h-6 w-6"})]}),r.jsx(xk,{}),r.jsx(qa,{disabled:!u||c,onClick:f,children:r.jsx(dIe,{})}),r.jsx(qa,{disabled:!m||c,onClick:p,children:r.jsx(uIe,{})}),r.jsx(xk,{}),r.jsx(qa,{disabled:!u||c,onClick:g,children:r.jsx(j,{id:"imageEditorControls.clearSelectionButtonLabel",defaultMessage:"Clear selection"})})]})}),r.jsx("div",{className:"flex items-center",children:e==="inpaint"?r.jsx(qa,{onClick:()=>n("default"),disabled:c,children:r.jsx(j,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})}):r.jsxs(r.Fragment,{children:[r.jsx(_Ie,{imageAsset:t,setMode:n,messageId:o,serverThreadId:d}),r.jsx(qa,{tooltip:h.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:()=>eke(t,d,o),children:r.jsx(pIe,{})}),r.jsx(hIe,{prompt:rB(t),children:r.jsx(qa,{tooltip:h.formatMessage({id:"imageEditorControls.promptButtonTooltip",defaultMessage:"Prompt"}),children:r.jsx(mIe,{})})}),r.jsx(qa,{tooltip:h.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:lIe.close,children:r.jsx(fU,{className:"icon-lg"})})]})})]}))}function hIe({prompt:t,children:e}){const[n,s]=_.useState(!1),o=ne(),a=Ut();return r.jsx(V5,{sideOffset:4,alignAgainstAnchor:"end",triggerButton:r.jsx("div",{className:"group",children:e}),className:"z-10",size:"none",children:r.jsxs("div",{className:"flex max-w-sm flex-col gap-3 p-4",children:[r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"imageEditorControls.promptPopoverLabel",defaultMessage:"Prompt"})}),r.jsx("div",{children:t}),r.jsx("div",{children:r.jsx(_e,{color:"secondary",disabled:n,onClick:i=>{s(!0),Zo(t,a,i),setTimeout(()=>s(!1),2e3)},icon:gIe,children:n?o.formatMessage({id:"imageEditorControls.copiedButtonLabel",defaultMessage:"Copied!"}):o.formatMessage({id:"imageEditorControls.copyButtonLabel",defaultMessage:"Copy"})})})]})})}function qa({children:t,tooltip:e,disabled:n,onClick:s}){const o=r.jsx("button",{className:W("hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary rounded-sm p-2 font-semibold",n?"text-token-text-quaternary":"text-token-text-secondary"),disabled:n,onClick:s,children:t});return e!=null?r.jsx(_t,{label:e,children:o}):o}function ont({onClose:t}){const e=ne();return r.jsx(qa,{tooltip:e.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:t,children:r.jsx(fU,{className:"icon-lg"})})}function _Ie({imageAsset:t,setMode:e,messageId:n,serverThreadId:s,disabled:o}){const a=ne(),i=V(),l=dt(Fe.DalleEditingOnboarding),c=l.eligible&&!l.isLoading,d=r.jsx(qa,{tooltip:c?void 0:a.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:()=>{var u,f,m,p,g,h,x,v,y,b,C,S,k,E,T,M,A,I,N,L,D,F;e("inpaint"),Ye.logEvent("chatgpt_dalle_inpaint_click",null,{sourceOperation:(m=(f=(u=t.metadata)==null?void 0:u.dalle)==null?void 0:f.edit_op)!=null?m:"none",hasParent:((g=(p=t.metadata)==null?void 0:p.dalle)==null?void 0:g.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent("chatgpt_dalle_inpaint_click",{conversationId:s,messageId:n,generationId:(x=(h=t.metadata)==null?void 0:h.dalle)==null?void 0:x.gen_id,fileId:wo(t.asset_pointer),parentGenerationId:(y=(v=t.metadata)==null?void 0:v.dalle)==null?void 0:y.parent_gen_id,sourceOperation:(C=(b=t.metadata)==null?void 0:b.dalle)==null?void 0:C.edit_op,model:"dalle"}),Ye.logEvent("chatgpt_image_inpaint_click",null,{sourceOperation:(E=(k=(S=t.metadata)==null?void 0:S.dalle)==null?void 0:k.edit_op)!=null?E:"none",hasParent:((M=(T=t.metadata)==null?void 0:T.dalle)==null?void 0:M.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent("chatgpt_image_inpaint_click",{conversationId:s,messageId:n,generationId:(I=(A=t.metadata)==null?void 0:A.dalle)==null?void 0:I.gen_id,fileId:wo(t.asset_pointer),parentGenerationId:(L=(N=t.metadata)==null?void 0:N.dalle)==null?void 0:L.parent_gen_id,sourceOperation:(F=(D=t.metadata)==null?void 0:D.dalle)==null?void 0:F.edit_op,model:"dalle"})},disabled:o,children:r.jsx(cIe,{})});return c?r.jsx(zd,{announcementKey:Fe.DalleEditingOnboarding,show:!0,side:"bottom",sideOffset:0,title:a.formatMessage({id:"imageEditorNUX.title",defaultMessage:"Select area of the image to edit"}),description:a.formatMessage({id:"imageEditorNUX.description",defaultMessage:"Highlight the area and describe changes in chat."}),onDismiss:()=>st(i,Fe.DalleEditingOnboarding),children:r.jsx("div",{children:d})}):d}var ME;const xk=mt.div(ME||(ME=ct(["mx-3 w-[1px] h-6 bg-token-border-default"])));var AE;const yk=mt.div(AE||(AE=ct(["rounded-full border-2 border-token-text-secondary"])));async function vk({url:t,fileName:e}){const s=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=e,o.click(),o.remove()}const xIe="ChatGPT Image";function yIe(t){const e=new Date,n=t.formatDate(e,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return"".concat(xIe," ").concat(n,".png")}function ant(){const[t,e]=_.useState({undoStack:[],currentIndex:-1});function n(i){e(l=>({undoStack:[...l.undoStack.slice(0,l.currentIndex+1),i],currentIndex:l.currentIndex+1}))}function s(){e(i=>({undoStack:i.undoStack,currentIndex:Math.max(i.currentIndex-1,-1)}))}function o(){e(i=>({undoStack:i.undoStack,currentIndex:Math.min(i.currentIndex+1,i.undoStack.length-1)}))}function a(){e({undoStack:[],currentIndex:-1})}return{currentDrawnShape:t.undoStack.length>0?t.undoStack[t.currentIndex]:null,onNewDrawnShape:n,canUndoDrawing:t.currentIndex>=0,undoDrawing:s,canRedoDrawing:t.currentIndex<t.undoStack.length-1,redoDrawing:o,clearAllDrawings:a}}const vIe=R(()=>P(()=>import("./nudmd9gugqn68dov.js"),__vite__mapDeps([414,1,10,11,415,416])).then(t=>t.DynamicDrawingCanvas)),bIe=136;function rnt({image:t,drawingState:e,drawingCanvasRef:n}){return r.jsx("div",{className:"pointer-events-none absolute inset-0 z-[60] overflow-visible",children:r.jsx("div",{className:"pointer-events-auto absolute inset-0",children:r.jsx(vIe,{drawingCanvasRef:n,color:"rgba(0, 122, 255, 0.5)",dashedOutlineColor:"rgba(255, 255, 255, 0.65)",cursorWidth:bIe,canvasWidth:t.width,canvasHeight:t.height,currentDrawnShape:e.currentDrawnShape,onNewDrawnShape:e.onNewDrawnShape})})})}function CIe(s){var o=s,{className:t,children:e}=o,n=ke(o,["className","children"]);return r.jsx(vfe,U(w({className:t},n),{children:e}))}const SIe=o=>{var a=o,{value:t,className:e,label:n}=a,s=ke(a,["value","className","label"]);return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yb,w({id:t,value:t,className:W("border-token-text-tertiary hover:bg-token-main-surface-tertiary h-4 w-4 shrink-0 gap-2 rounded-full border bg-transparent shadow-sm outline-hidden",e)},s)),r.jsx("label",{htmlFor:t,className:"w-full cursor-pointer",children:n})]})},wIe=n=>{var s=n,{className:t}=s,e=ke(s,["className"]);return r.jsx(Zb,w({className:W("after:bg-token-text-primary relative flex h-full w-full items-center justify-center after:block after:h-2 after:w-2 after:rounded-[50%] after:content-['']",t)},e))},S2={Root:CIe,Item:SIe,Indicator:wIe};function mU(n){var s=n,{className:t}=s,e=ke(s,["className"]);return r.jsx("textarea",w({className:W("form-textarea border-token-border-default bg-token-main-surface-secondary text-token-text-primary focus:border-token-text-primary focus:ring-token-text-primary w-full rounded-lg border text-sm focus:shadow-none focus:outline-hidden",t)},e))}function kIe(t){var e,n;return((n=(e=t.sub_reasons)==null?void 0:e.length)!=null?n:0)===0&&t.details_placeholder==null&&t.link_attachment==null&&t.subtext==null}function int(t,e,n,s,o={},a,i,l,c){const d=Ut(),u={};return a&&js(a)&&i&&(u["chatgpt-project-id"]=a,u["chatgpt-conv-owner-id"]=i),l&&(u["chatgpt-conv-message-id"]=l),zt({mutationFn:f=>{var p,g;return tt(t)?ge.safePost("/report_flow/report",{requestBody:U(w({},f),{entity_type:s,entity_id:n,additional_fields_values:w(w({},(p=f.additional_fields_values)!=null?p:{}),o!=null?o:{}),product_area:c}),additionalHeaders:u,authOption:nn.SendIfAvailable}):N3.safePost("/report_flow/report",{requestBody:U(w({},f),{entity_type:s,entity_id:n,additional_fields_values:w(w({},(g=f.additional_fields_values)!=null?g:{}),o!=null?o:{}),product_area:c}),authOption:nn.Anonymous})},onError:f=>{var m;Re.addError(new Error("Error occurred while reporting",{cause:f}),{entityType:s,id:n}),d.danger(e.formatMessage({id:"report.submitError",defaultMessage:"Error reporting: {detail}"},{detail:f.message}),{toastId:"report_mutation_failed_to_report",loggingTitle:String((m=f==null?void 0:f.message)!=null?m:""),loggingDescription:"Error message when submitting a report fails"})}})}function lnt(t,e){return rt({queryKey:["reportReasons",{entityType:e}],queryFn:()=>tt(t)?ge.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:e}},authOption:nn.SendIfAvailable}):N3.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:e}},authOption:nn.Anonymous})})}var IE;mt.div(IE||(IE=ct(["divide-y overflow-hidden rounded-md border border-token-border-medium"])));var jE;mt.button(jE||(jE=ct(["w-full border-token-border-medium p-2 text-start text-sm hover:bg-token-main-surface-secondary"])));var NE;const EIe=mt.div(NE||(NE=ct(["text-base font-medium"])));var PE;const TIe=mt.div(PE||(PE=ct(["text-sm text-token-text-secondary"])));function mc({header:t,subHeader:e}){return t==null&&e==null?null:r.jsxs("div",{className:"mb-4",children:[t!=null&&r.jsx(EIe,{children:t}),e!=null&&r.jsx(TIe,{children:e})]})}function MIe({reasons:t,setSelectedReason:e,selectedReason:n}){var s;return r.jsx(S2.Root,{value:(s=n==null?void 0:n.id)!=null?s:"",onValueChange:o=>e(t.find(a=>a.id===o)),className:"flex flex-col gap-3",children:t.map(o=>r.jsx(S2.Item,{value:o.id,label:o.cta,children:r.jsx(S2.Indicator,{})},o.id))})}function AIe({reason:t,details:e,setDetails:n,name:s,setName:o,email:a,setEmail:i,showName:l,showEmail:c}){const d=l||c,u=ne(),f=u.formatMessage({id:"report.loggedOut.name",defaultMessage:"Your name"}),m=u.formatMessage({id:"report.loggedOut.email",defaultMessage:"Your email address"}),p=u.formatMessage({id:"report.loggedOut.details",defaultMessage:"Add details"});return r.jsxs("div",{className:"flex flex-col gap-4",children:[d&&r.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[l&&r.jsxs("div",{className:"flex flex-col gap-1",children:[f,r.jsx(xf,{ariaLabel:f,name:"name",type:"text",value:s,onChange:g=>o(g.target.value)})]}),c&&r.jsxs("div",{className:"flex flex-col gap-1",children:[m,r.jsx(xf,{ariaLabel:m,name:"email",type:"email",value:a,onChange:g=>i(g.target.value)})]})]}),r.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[d&&p,r.jsx(mU,{"aria-label":d?p:void 0,value:e,onChange:g=>n(g.target.value),placeholder:!d&&t.details_placeholder?t.details_placeholder:void 0,autoFocus:!0,className:"bg-token-main-surface-primary!"})]}),t.subtext!=null&&r.jsx("div",{className:"text-token-text-secondary text-sm",children:t.subtext})]})}function IIe({reason:t}){return r.jsx("div",{className:"text-sm",children:r.jsx("div",{className:"mb-2",children:t.link_explanation})})}function cnt({reasons:t,submitReport:e,title:n,onClose:s,header:o}){var N,L;const a=ne(),[i,l]=_.useState([]);let c=t,d;for(const D of i)d=c.find(F=>F.id===D.id),c=(N=d==null?void 0:d.sub_reasons)!=null?N:[];const[u,f]=_.useState(),m=u!=null&&kIe(u),[p,g]=_.useState(""),[h,x]=_.useState(""),[v,y]=_.useState(""),b=(L=d==null?void 0:d.additional_fields)==null?void 0:L.map(D=>D.id),C=b==null?void 0:b.includes(d6.UserName),S=b==null?void 0:b.includes(d6.UserEmail);let k;m?k=r.jsx(_e,{color:"primary",onClick:()=>{e.mutateAsync({reason:{id:u.id}})},disabled:!u||e.isPending,loading:e.isPending,children:r.jsx(j,{id:"report.submitReport",defaultMessage:"Submit"})}):k=r.jsx(_e,{color:"primary",onClick:()=>{u&&(l(D=>[...D,u]),f(void 0))},disabled:!u,children:r.jsx(j,{id:"z5fExR",defaultMessage:"Next"})});let E=d!=null?r.jsx(_e,{onClick:()=>{if(i.length>0){const D=i[i.length-1];l(F=>F.slice(0,-1)),f(D)}},color:"secondary",children:r.jsx(j,{id:"xJnONr",defaultMessage:"Back"})}):null;const T=(d==null?void 0:d.subtext)!=null&&r.jsx("div",{className:"text-token-text-secondary text-sm",children:d.subtext}),M=a.formatMessage({id:"report.submittedModal.header",defaultMessage:"Report submitted"}),A=a.formatMessage({id:"report.submittedModal.subHeader",defaultMessage:"Thank you for your report. We'll review the content to determine if it violates our policies."});let I;if(e.isSuccess)E=void 0,k=void 0,I=r.jsxs(r.Fragment,{children:[r.jsx(mc,{header:M}),r.jsxs("div",{className:"text-sm",children:[A,r.jsx("br",{}),r.jsx("br",{}),r.jsx(j,{id:"report.submittedModal.learn",defaultMessage:"Learn more about "}),r.jsx("a",{href:"https://openai.com/transparency-and-content-moderation/",target:"_blank",rel:"noreferrer",className:"break-words underline",children:r.jsx(j,{id:"report.submittedModal.link",defaultMessage:"how we handle reports."})})]})]});else if((d==null?void 0:d.details_placeholder)!=null)k=r.jsx(_e,{color:"primary",onClick:()=>{let D;(C||S)&&(D={},C&&(D.user_name=h),S&&(D.user_email=v)),e.mutateAsync({reason:{id:d.id,details:p},additional_fields_values:D})},disabled:e.isPending,loading:e.isPending,children:r.jsx(j,{id:"report.submitReport",defaultMessage:"Submit"})}),I=r.jsxs(r.Fragment,{children:[r.jsx(mc,{header:r.jsx(j,{id:"CGoWjT",defaultMessage:"Please tell us more"})}),r.jsx(AIe,{reason:d,showName:C!=null?C:!1,showEmail:S!=null?S:!1,details:p,setDetails:g,name:h,setName:x,email:v,setEmail:y})]});else if((d==null?void 0:d.link_attachment)!=null){const D=d.link_attachment;k=r.jsx(_e,{color:"primary",onClick:()=>{window.open(D,"_blank")},children:r.jsx(j,{id:"report.goToForm",defaultMessage:"Go to Form"})}),I=r.jsxs(r.Fragment,{children:[r.jsx(mc,{}),r.jsx(IIe,{reason:d}),T]})}else c.length>0?I=r.jsxs(r.Fragment,{children:[r.jsx(mc,{header:o}),c.length>0&&r.jsx(MIe,{reasons:c,selectedReason:u,setSelectedReason:f}),T]}):(d==null?void 0:d.subtext)!=null?(k=void 0,I=r.jsxs(r.Fragment,{children:[r.jsx(mc,{header:o}),r.jsx("div",{className:"text-sm",children:d==null?void 0:d.subtext})]})):(Re.addError("Reporting: arrived at empty leaf reason",d),k=void 0,E=void 0,I=r.jsx(mc,{header:M,subHeader:A}));return r.jsx(Mt,{testId:"modal-report-reason-selection",title:n,onClose:s,isOpen:!0,showCloseButton:!0,type:"success",secondaryButton:E,primaryButton:k,children:I})}const jIe="https://openai.com/form/report-content/",dnt=({areButtonsFullWidth:t,post:e,setIsReportModalOpen:n})=>{const s=V(),o=!tt(s),a=ne(),i=e.attachments.every(l=>l.kind==="media_generation");return r.jsx("div",{className:"border-token-border-default flex w-full justify-center border-b-[0.5px] px-2 sm:px-6",children:r.jsx("div",{className:W("flex w-full items-center justify-between gap-4 py-4",!t&&"max-w-[1200px]"),children:r.jsxs("div",{children:[r.jsx(_t,{align:"start",theme:"primary",labelTextAlign:"left",wide:!0,contentClassName:"![&>*]:font-normal *:font-normal",label:a.formatMessage({id:"rZHri8",defaultMessage:"The content youre seeing was made by a ChatGPT user. It may be unverified or contain potentially unsafe content that doesnt reflect the views of OpenAI."}),children:r.jsx("h1",{className:"text-token-text-primary line-clamp-1 text-base font-semibold",children:e.text})}),r.jsxs("div",{className:"text-token-text-secondary xs:flex-col flex flex-col gap-1.5 text-xs sm:flex-row",children:[!i&&r.jsx("div",{className:"cursor-default",children:a.formatMessage(w2.madeWithCanvas)}),r.jsx("div",{children:o?r.jsx("a",{className:"underline",href:jIe,target:"_blank",rel:"noreferrer",onClick:()=>{},children:a.formatMessage(w2.report)}):r.jsx("button",{className:"underline",onClick:()=>{n(!0)},children:a.formatMessage(w2.report)})})]})]})})})},w2=be({report:{id:"DHsq+d",defaultMessage:"Report"},editWithChatGPT:{id:"DrcR8S",defaultMessage:"Edit with ChatGPT"},edit:{id:"PpEliN",defaultMessage:"Edit"},madeWithCanvas:{id:"h8SGou",defaultMessage:"Youre viewing user-generated content that may be unverified or unsafe."}}),NIe=R(()=>P(()=>import("./k5813xszuc7qopzc.js"),__vite__mapDeps([417,1])),{loading:t=>O(t)});function pU({className:t}){const e=ne();return r.jsx(NIe,{className:W("h-6 w-24",t),"aria-label":e.formatMessage({id:"VJmCc9",defaultMessage:"ChatGPT logo"}),role:"img"})}const gU=R(()=>P(()=>import("./jzutzpqv1krrdtg5.js"),__vite__mapDeps([418,1,10,11,419,420,102,236,237,100,421,95,422,96,423,97,424,104,425,426,427,94,428,429,430,93,58,19,20,16,13,14,15,17,18,23,92,98,21,60,65,66,67,431,432,116,117,433,434,71,435])).then(t=>t.AttachmentContent));function PIe(){gU.prefetch()}function hU({attachments:t,variant:e,className:n,clientThreadId:s}){return r.jsx(r.Fragment,{children:t.map((o,a)=>r.jsx("div",{className:n,children:r.jsx(gU,{attachment:o,caption:"",variant:e,hasActiveRequest:!1,clientThreadId:s})},a))})}function RIe({attachments:t,clientThreadId:e,className:n}){var a;const s=V(),o=((a=t[0])==null?void 0:a.kind)==="media_generation";return r.jsx(oq,{conversation:yt(s,e),children:r.jsxs("div",{className:W("bg-token-primary relative m-0 box-border w-full overflow-hidden",n),"data-testid":"sharing-post-unfurl-view",children:[r.jsx(hU,{attachments:t,variant:"unfurl",className:"h-full w-full",clientThreadId:e}),r.jsx("div",{className:W("absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent",o?"from-black/35":"from-token-main-surface-primary")}),r.jsx("div",{className:"absolute end-5 bottom-5 z-10 inline-flex flex-shrink-0 items-end justify-end",children:r.jsx(pU,{className:W("inline h-4 w-24 text-end",o&&"text-white")})})]})})}const LIe=Object.freeze(Object.defineProperty({__proto__:null,PostListPreview:hU,PostUnfurlPreview:RIe,prefetchPostPreviewContentComponent:PIe},Symbol.toStringTag,{value:"Module"})),OIe=R(()=>P(()=>import("./oub30ufdqlfgcqjs.js"),__vite__mapDeps([436,322,10,1,11])).then(t=>t.FannyPackInitializer));function unt(){const t=V(),{isFannyPackEnabled:e,isFannyPackInitializerEnabled:n}=$b(t);return e||!n?null:r.jsx(OIe,{})}function fnt({clientThreadId:t,urlThreadId:e}){const n=V(),s=ne(),o=ot(),a=Es();return r.jsx(Id,{children:a&&t&&!!e&&r.jsx(Rb,{isOpen:!0,title:r.jsx(j,{id:"HistoryGizmoItem.leaveTempChatTitle",defaultMessage:"Leave Temporary Chat?"}),description:r.jsx(j,{id:"HistoryGizmoItem.leaveTempChatDescription",defaultMessage:"Temporary Chats don't appear in your history, so you won't be able to come back to it."}),confirmText:s.formatMessage({id:"HistoryGizmoItem.leaveTempChatConfirm",defaultMessage:"Leave Temporary Chat"}),onClose:()=>{o("/")},onConfirm:()=>{jf.set(n,!1)}})})}var k2,bk;function DIe(){if(bk)return k2;bk=1;var t="Expected a function",e=NaN,n="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,c=typeof Pm=="object"&&Pm&&Pm.Object===Object&&Pm,d=typeof self=="object"&&self&&self.Object===Object&&self,u=c||d||Function("return this")(),f=Object.prototype,m=f.toString,p=Math.max,g=Math.min,h=function(){return u.Date.now()};function x(S,k,E){var T,M,A,I,N,L,D=0,F=!1,$=!1,H=!0;if(typeof S!="function")throw new TypeError(t);k=C(k)||0,v(E)&&(F=!!E.leading,$="maxWait"in E,A=$?p(C(E.maxWait)||0,k):A,H="trailing"in E?!!E.trailing:H);function z(X){var te=T,ce=M;return T=M=void 0,D=X,I=S.apply(ce,te),I}function K(X){return D=X,N=setTimeout(q,k),F?z(X):I}function J(X){var te=X-L,ce=X-D,ue=k-te;return $?g(ue,A-ce):ue}function Z(X){var te=X-L,ce=X-D;return L===void 0||te>=k||te<0||$&&ce>=A}function q(){var X=h();if(Z(X))return se(X);N=setTimeout(q,J(X))}function se(X){return N=void 0,H&&T?z(X):(T=M=void 0,I)}function ie(){N!==void 0&&clearTimeout(N),D=0,T=L=M=N=void 0}function ee(){return N===void 0?I:se(h())}function le(){var X=h(),te=Z(X);if(T=arguments,M=this,L=X,te){if(N===void 0)return K(L);if($)return N=setTimeout(q,k),z(L)}return N===void 0&&(N=setTimeout(q,k)),I}return le.cancel=ie,le.flush=ee,le}function v(S){var k=typeof S;return!!S&&(k=="object"||k=="function")}function y(S){return!!S&&typeof S=="object"}function b(S){return typeof S=="symbol"||y(S)&&m.call(S)==n}function C(S){if(typeof S=="number")return S;if(b(S))return e;if(v(S)){var k=typeof S.valueOf=="function"?S.valueOf():S;S=v(k)?k+"":k}if(typeof S!="string")return S===0?S:+S;S=S.replace(s,"");var E=a.test(S);return E||i.test(S)?l(S.slice(2),E?2:8):o.test(S)?e:+S}return k2=x,k2}var FIe=DIe();const Ck=Gn(FIe);var v4=typeof window<"u"?_.useLayoutEffect:_.useEffect;function BIe(t,e,n,s){const o=_.useRef(e);v4(()=>{o.current=e},[e]),_.useEffect(()=>{const a=window;if(!(a&&a.addEventListener))return;const i=l=>{o.current(l)};return a.addEventListener(t,i,s),()=>{a.removeEventListener(t,i,s)}},[t,n,s])}var UIe=typeof window>"u";function $Ie(t,{defaultValue:e=!1,initializeWithValue:n=!0}={}){const s=l=>UIe?e:window.matchMedia(l).matches,[o,a]=_.useState(()=>n?s(t):e);function i(){a(s(t))}return v4(()=>{const l=window.matchMedia(t);return i(),l.addListener?l.addListener(i):l.addEventListener("change",i),()=>{l.removeListener?l.removeListener(i):l.removeEventListener("change",i)}},[t]),o}function VIe(t){const e=_.useRef(t);e.current=t,_.useEffect(()=>()=>{e.current()},[])}function HIe(t,e=500,n){const s=_.useRef();VIe(()=>{s.current&&s.current.cancel()});const o=_.useMemo(()=>{const a=Ck(t,e,n),i=(...l)=>a(...l);return i.cancel=()=>{a.cancel()},i.isPending=()=>!!s.current,i.flush=()=>a.flush(),i},[t,e,n]);return _.useEffect(()=>{s.current=Ck(t,e,n)},[t,e,n]),o}function mnt({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:s=!1,initialIsIntersecting:o=!1,onChange:a}={}){var i;const[l,c]=_.useState(null),[d,u]=_.useState(()=>({isIntersecting:o,entry:void 0})),f=_.useRef();f.current=a;const m=((i=d.entry)==null?void 0:i.isIntersecting)&&s;_.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||m)return;const h=new IntersectionObserver(x=>{const v=Array.isArray(h.thresholds)?h.thresholds:[h.thresholds];x.forEach(y=>{const b=y.isIntersecting&&v.some(C=>y.intersectionRatio>=C);u({isIntersecting:b,entry:y}),f.current&&f.current(b,y)})},{threshold:t,root:e,rootMargin:n});return h.observe(l),()=>{h.disconnect()}},[l,JSON.stringify(t),e,n,m,s]);const p=_.useRef(null);_.useEffect(()=>{var h;!l&&((h=d.entry)!=null&&h.target)&&!s&&!m&&p.current!==d.entry.target&&(p.current=d.entry.target,u({isIntersecting:o,entry:void 0}))},[l,d.entry,s,m,o]);const g=[c,!!d.isIntersecting,d.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function GIe(){const t=_.useRef(!1);return _.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),_.useCallback(()=>t.current,[])}var Sk={width:void 0,height:void 0};function pnt(t){const{ref:e,box:n="content-box"}=t,[{width:s,height:o},a]=_.useState(Sk),i=GIe(),l=_.useRef(w({},Sk)),c=_.useRef(void 0);return c.current=t.onResize,_.useEffect(()=>{if(!e.current||typeof window>"u"||!("ResizeObserver"in window))return;const d=new ResizeObserver(([u])=>{const f=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",m=wk(u,f,"inlineSize"),p=wk(u,f,"blockSize");if(l.current.width!==m||l.current.height!==p){const h={width:m,height:p};l.current.width=m,l.current.height=p,c.current?c.current(h):i()&&a(h)}});return d.observe(e.current,{box:n}),()=>{d.disconnect()}},[n,e,i]),{width:s,height:o}}function wk(t,e,n){return t[e]?Array.isArray(t[e])?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}var WIe=typeof window>"u";function gnt(t={}){let{initializeWithValue:e=!0}=t;WIe&&(e=!1);const[n,s]=_.useState(()=>e?{width:window.innerWidth,height:window.innerHeight}:{width:void 0,height:void 0}),o=HIe(s,t.debounceDelay);function a(){(t.debounceDelay?o:s)({width:window.innerWidth,height:window.innerHeight})}return BIe("resize",a),v4(()=>{a()},[]),n}const zIe=t=>_.createElement("svg",w({viewBox:"0 0 468 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("style",null,"\n  .path1 { fill: var(--bg-primary, currentColor); }\n  .path2 { fill: var(--tab-color, rgba(0,0,0,1)); }\n"),_.createElement("g",{clipPath:"url(#clip0_3_20)"},_.createElement("mask",{id:"path-1-outside-1_3_20",maskUnits:"userSpaceOnUse",x:-1,y:7.19714,width:777,height:50,fill:"black"},_.createElement("rect",{fill:"currentColor",x:-1,y:7.19714,width:777,height:50}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z"})),_.createElement("path",{className:"path1",fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z",fill:"currentColor"}),_.createElement("path",{className:"path2",d:"M34.3496 11.2608L33.4586 10.8068L33.4586 10.8068L34.3496 11.2608ZM36.8017 8.80871L37.2557 9.69972L37.2557 9.69972L36.8017 8.80871ZM129.429 8.80871L129.883 7.9177L129.883 7.9177L129.429 8.80871ZM131.881 11.2608L130.99 11.7148L130.99 11.7148L131.881 11.2608ZM132.492 26.2161H131.492L131.492 26.23L132.492 26.2161ZM132.492 30.6417H131.492V31.6417H132.492V30.6417ZM132.492 30.6413H133.492V29.6413H132.492V30.6413ZM33.7385 30.6413V29.6413H32.7385V30.6413H33.7385ZM33.7385 30.6417V31.6417H34.7385V30.6417H33.7385ZM33.738 26.2153L34.738 26.229V26.2153H33.738ZM0 30.6421V29.6421H-1V30.6421H0ZM774.322 30.6421H775.322V29.6421H774.322V30.6421ZM0 55.3306H-1V56.3306H0V55.3306ZM774.322 55.3306V56.3306H775.322V55.3306H774.322ZM34.3496 11.2608L33.4586 10.8068C33.069 11.5714 32.8993 12.4106 32.8178 13.408C32.7372 14.3939 32.738 15.6201 32.738 17.1748H33.738H34.738C34.738 15.5871 34.7388 14.4564 34.8111 13.5709C34.8825 12.6971 35.0186 12.1505 35.2406 11.7148L34.3496 11.2608ZM36.8017 8.80871L36.3477 7.9177C35.1038 8.55152 34.0924 9.56288 33.4586 10.8068L34.3496 11.2608L35.2406 11.7148C35.6827 10.8472 36.3881 10.1418 37.2557 9.69972L36.8017 8.80871ZM42.7157 8.19714V7.19714C41.1609 7.19714 39.9347 7.19637 38.9489 7.27691C37.9514 7.35841 37.1123 7.52812 36.3477 7.9177L36.8017 8.80871L37.2557 9.69972C37.6914 9.47773 38.238 9.34166 39.1118 9.27027C39.9973 9.19792 41.1279 9.19714 42.7157 9.19714V8.19714ZM123.515 8.19714V7.19714H42.7157V8.19714V9.19714H123.515V8.19714ZM129.429 8.80871L129.883 7.9177C129.118 7.52812 128.279 7.35841 127.281 7.27691C126.295 7.19637 125.069 7.19714 123.515 7.19714V8.19714V9.19714C125.102 9.19714 126.233 9.19792 127.118 9.27027C127.992 9.34166 128.539 9.47773 128.975 9.69972L129.429 8.80871ZM131.881 11.2608L132.772 10.8068C132.138 9.56289 131.126 8.55153 129.883 7.9177L129.429 8.80871L128.975 9.69972C129.842 10.1418 130.548 10.8472 130.99 11.7148L131.881 11.2608ZM132.492 17.1748H133.492C133.492 15.6201 133.493 14.3939 133.412 13.408C133.331 12.4106 133.161 11.5714 132.772 10.8068L131.881 11.2608L130.99 11.7148C131.212 12.1505 131.348 12.6971 131.419 13.5709C131.491 14.4564 131.492 15.5871 131.492 17.1748H132.492ZM132.492 26.2161H133.492V17.1748H132.492H131.492V26.2161H132.492ZM136.981 30.6417V29.6417C135.071 29.6417 133.519 28.1059 133.492 26.2022L132.492 26.2161L131.492 26.23C131.534 29.2258 133.976 31.6417 136.981 31.6417V30.6417ZM132.492 30.6417V31.6417H136.981V30.6417V29.6417H132.492V30.6417ZM132.492 30.6413H131.492V30.6417H132.492H133.492V30.6413H132.492ZM33.7385 30.6413V31.6413H132.492V30.6413V29.6413H33.7385V30.6413ZM33.7385 30.6417H34.7385V30.6413H33.7385H32.7385V30.6417H33.7385ZM29.2492 30.6417V31.6417H33.7385V30.6417V29.6417H29.2492V30.6417ZM33.738 26.2153L32.7381 26.2016C32.712 28.1056 31.1596 29.6417 29.2492 29.6417V30.6417V31.6417C32.255 31.6417 34.6968 29.2253 34.7379 26.229L33.738 26.2153ZM33.738 17.1748H32.738V26.2153H33.738H34.738V17.1748H33.738ZM0 30.6421V31.6421H774.322V30.6421V29.6421H0V30.6421ZM0 55.3306H1V30.6421H0H-1V55.3306H0ZM774.322 55.3306V54.3306H0V55.3306V56.3306H774.322V55.3306ZM774.322 30.6421H773.322V55.3306H774.322H775.322V30.6421H774.322Z",mask:"url(#path-1-outside-1_3_20)"})),_.createElement("defs",null,_.createElement("clipPath",{id:"clip0_3_20"},_.createElement("rect",{width:468,height:55.3307,fill:"currentColor"})))),qIe=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),_U="https://persistent.oaistatic.com/sandwich/26e83b2ac5b9e29e1.webp",xU="https://persistent.oaistatic.com/sandwich/2cf24dba5fb0a30e.webp",YIe="https://persistent.oaistatic.com/atlas/public/ChatGPT_Atlas.dmg";function ZIe(){UF(),B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Download Clicked","chatgpt_web_aura_announcement_banner_download_clicked"),Ie.count(je.ATLAS,"chatgpt_web_aura_announcement_banner_download_clicked")}const Uy=468,$y=520,hnt=t=>{"use forget";const e=G.c(11),{shouldShowDisclaimer:n,clientThreadId:s}=t,o=V(),[a,i]=_.useState(!1);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{i(!0),UF(),B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Dismissed","chatgpt_web_aura_announcement_banner_dismissed"),Ie.count(je.ATLAS,"chatgpt_web_aura_announcement_banner_dismissed")},e[0]=l):l=e[0];const c=l,{data:d,isLoading:u}=to(Lt.BrowserReferenceWebHistoryInChat),f=d!==void 0;let m;e[1]!==o?(m=J5(o),e[1]=o,e[2]=m):m=e[2];const{setAuraAnnouncementBannerState:p}=m;let g,h;if(e[3]!==f||e[4]!==u||e[5]!==p?(g=()=>{u||p(f?"not-shown":"shown")},h=[f,u,p],e[3]=f,e[4]=u,e[5]=p,e[6]=g,e[7]=h):(g=e[6],h=e[7]),_.useEffect(g,h),$Ie("(max-height: 660px)")||a||f||u)return null;let v;return e[8]!==s||e[9]!==n?(v=r.jsx(KIe,{shouldShowDisclaimer:n,onDismiss:c,clientThreadId:s,className:"fixed"}),e[8]=s,e[9]=n,e[10]=v):v=e[10],v};function KIe(t){"use forget";const e=G.c(31),{shouldShowDisclaimer:n,onDismiss:s,className:o,clientThreadId:a}=t,i=ae(sM),l=ae(XIe),[c,d]=_.useState(0);let u,f;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const F=new Image;F.src=_U,F.onload=()=>d(JIe)},f=[],e[0]=u,e[1]=f):(u=e[0],f=e[1]),_.useEffect(u,f);let m,p;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const F=new Image;F.src=xU,F.onload=()=>d(QIe)},p=[],e[2]=m,e[3]=p):(m=e[2],p=e[3]),_.useEffect(m,p);const g=c>=2;let h,x;if(e[4]!==g?(h=()=>{g&&(B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Shown","chatgpt_web_aura_announcement_banner_shown"),Ie.count(je.ATLAS,"chatgpt_aura_announcement_banner_shown"),lwe())},x=[g],e[4]=g,e[5]=h,e[6]=x):(h=e[5],x=e[6]),_.useEffect(h,x),!g)return null;let v,y,b;e[7]===Symbol.for("react.memo_cache_sentinel")?(v={opacity:0,y:"100%"},y={opacity:1,y:0},b={opacity:0,y:"100%"},e[7]=v,e[8]=y,e[9]=b):(v=e[7],y=e[8],b=e[9]);const C=i?0:.75;let S;e[10]!==i?(S=i?void 0:[.33,0,.05,1],e[10]=i,e[11]=S):S=e[11];let k;e[12]!==C||e[13]!==S?(k={duration:C,ease:S},e[12]=C,e[13]=S,e[14]=k):k=e[14];const E=k;let T;e[15]!==o?(T=W("pointer-events-none start-1/2 bottom-0 z-[70] -translate-x-1/2",o),e[15]=o,e[16]=T):T=e[16];const M=l?$y:Uy;let A;e[17]!==M?(A={minWidth:M},e[17]=M,e[18]=A):A=e[18];let I;e[19]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx(tje,{className:"col-span-full row-span-full justify-self-center"}),e[19]=I):I=e[19];let N;e[20]!==s?(N=r.jsxs("div",{className:"grid w-full grid-cols-1 grid-rows-1 overflow-hidden",children:[I,r.jsx(eje,{onDismiss:s,className:"col-span-full row-span-full self-end justify-self-center"})]}),e[20]=s,e[21]=N):N=e[21];let L;e[22]!==a||e[23]!==n?(L=n&&r.jsx("div",{className:W("text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center text-center text-xs whitespace-nowrap [view-transition-name:var(--vt-disclaimer)] md:px-[60px]"),children:r.jsx(qSe,{clientThreadId:a})}),e[22]=a,e[23]=n,e[24]=L):L=e[24];let D;return e[25]!==E||e[26]!==T||e[27]!==A||e[28]!==N||e[29]!==L?(D=r.jsx(mn,{children:r.jsxs(Xe.div,{initial:v,animate:y,exit:b,transition:E,className:T,style:A,children:[N,L]})}),e[25]=E,e[26]=T,e[27]=A,e[28]=N,e[29]=L,e[30]=D):D=e[30],D}function QIe(t){return t+1}function JIe(t){return t+1}function XIe(){return Gh()}const eje=t=>{"use forget";const e=G.c(39),{onDismiss:n,className:s}=t,o=V(),a=ea(),i=ne(),l=ae(oje),c=Ps(o,"1545803083");let d;e:switch(c.get("Variant",1)){case 1:default:{let F;e[0]===Symbol.for("react.memo_cache_sentinel")?(F=[Ha.atlasBannerTitleVariantOne,Ha.atlasBannerBodyVariantOne,Ha.atlasBannerCtaVariantOne],e[0]=F):F=e[0],d=F;break e}case 2:{let F;e[1]===Symbol.for("react.memo_cache_sentinel")?(F=[Ha.atlasBannerTitleVariantTwo,Ha.atlasBannerBodyVariantTwo,Ha.atlasBannerCtaVariantOne],e[1]=F):F=e[1],d=F;break e}case 3:{let F;e[2]===Symbol.for("react.memo_cache_sentinel")?(F=[Ha.atlasBannerTitleVariantThree,Ha.atlasBannerBodyVariantThree,Ha.atlasBannerCtaVariantTwo],e[2]=F):F=e[2],d=F}}const[u,f,m]=d;let p;e[3]!==s?(p=W("border-token-border-heavy grid grid-cols-1 grid-rows-[auto_1fr_24px]","bg-token-bg-primary/60","rounded-ss-xl rounded-se-xl border","[mask-image:linear-gradient(to_bottom,black_80%,transparent_100%)]","[mask-size:100%_100%] [mask-repeat:no-repeat]","pointer-events-auto relative z-10",s),e[3]=s,e[4]=p):p=e[4];const g=l?$y:Uy;let h;e[5]!==g?(h={boxShadow:"0px 4.1px 24px rgba(0, 0, 0, 0.08)",width:g},e[5]=g,e[6]=h):h=e[6];const x=a?"white":"var(--border-heavy)",v=l?$y-2:Uy-2;let y;e[7]!==x||e[8]!==v?(y=r.jsx(zIe,{"aria-hidden":"true",className:"pointer-events-none col-span-full col-start-1 row-span-1 row-start-1 w-full text-[var(--bg-primary)]",style:{"--tab-color":x,width:v}}),e[7]=x,e[8]=v,e[9]=y):y=e[9];let b;e[10]!==s?(b=W("text-token-text-tertiary hover:text-token-text-secondary flex h-9 w-9 cursor-pointer items-center justify-center bg-transparent",s),e[10]=s,e[11]=b):b=e[11];let C;e[12]!==i?(C=i.formatMessage(pt.close),e[12]=i,e[13]=C):C=e[13];let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx(qIe,{className:"icon-sm"}),e[14]=S):S=e[14];let k;e[15]!==n||e[16]!==b||e[17]!==C?(k=r.jsx("div",{className:"absolute end-0 top-0",children:r.jsx("button",{"data-testid":"close-button",onClick:n,className:b,"aria-label":C,children:S})}),e[15]=n,e[16]=b,e[17]=C,e[18]=k):k=e[18];let E;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{className:"bg-token-bg-primary col-span-full col-start-1 row-span-2 row-start-2 -mt-1"}),e[19]=E):E=e[19];let T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(nje,{}),e[20]=T):T=e[20];let M;e[21]!==u?(M=r.jsx("h2",{className:"text-token-text-primary text-sm font-medium",children:r.jsx(j,w({},u))}),e[21]=u,e[22]=M):M=e[22];let A;e[23]!==f?(A=r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,w({},f))}),e[23]=f,e[24]=A):A=e[24];let I;e[25]!==M||e[26]!==A?(I=r.jsxs("div",{className:"flex max-w-[340px] flex-col gap-0.5",children:[M,A]}),e[25]=M,e[26]=A,e[27]=I):I=e[27];let N;e[28]!==m.defaultMessage?(N=r.jsx(sje,{ctaLabel:m.defaultMessage}),e[28]=m.defaultMessage,e[29]=N):N=e[29];let L;e[30]!==I||e[31]!==N?(L=r.jsxs("div",{className:"col-span-full col-start-1 row-start-2 -mt-2 flex min-h-[74px] flex-1 items-start gap-4 px-5",children:[T,I,N]}),e[30]=I,e[31]=N,e[32]=L):L=e[32];let D;return e[33]!==k||e[34]!==L||e[35]!==p||e[36]!==h||e[37]!==y?(D=r.jsxs("div",{className:p,style:h,children:[y,k,E,L]}),e[33]=k,e[34]=L,e[35]=p,e[36]=h,e[37]=y,e[38]=D):D=e[38],D};function tje(t){"use forget";const e=G.c(4),{className:n}=t;let s;e[0]!==n?(s=W("pointer-events-none z-0 aspect-[752/244] h-[244px] opacity-50",n),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=r.jsx("img",{alt:"","aria-hidden":"true",src:xU,className:s}),e[2]=s,e[3]=o):o=e[3],o}function nje(){"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("img",{alt:"","aria-hidden":"true",src:_U,className:"pointer-events-none size-10"}),t[0]=e):e=t[0],e}function sje(t){"use forget";const e=G.c(2),{ctaLabel:n}=t;let s;return e[0]!==n?(s=r.jsx("a",{href:YIe,onClick:ZIe,className:"btn btn-secondary mt-2 min-h-9 rounded-full px-3 text-sm",children:n}),e[0]=n,e[1]=s):s=e[1],s}const Ha=be({atlasBannerTitleVariantOne:{id:"Zr7mYe",defaultMessage:"Try Atlas - ChatGPTs new browser"},atlasBannerBodyVariantOne:{id:"jYcAxk",defaultMessage:"Bring ChatGPT with you across the web for instant answers, smarter suggestions, and help with tasks."},atlasBannerTitleVariantTwo:{id:"TMWFFD",defaultMessage:"Try Atlas - a browser powered by ChatGPT"},atlasBannerBodyVariantTwo:{id:"jYcAxk",defaultMessage:"Bring ChatGPT with you across the web for instant answers, smarter suggestions, and help with tasks."},atlasBannerTitleVariantThree:{id:"D5LkgH",defaultMessage:"ChatGPT Atlas - a smarter web browser"},atlasBannerBodyVariantThree:{id:"iwqNw3",defaultMessage:"Take ChatGPT with you across the web for instant answers, smarter suggestions, and your own personal agent."},atlasBannerCtaVariantOne:{id:"IupvSa",defaultMessage:"Download"},atlasBannerCtaVariantTwo:{id:"58Al3e",defaultMessage:"Try now"}});function oje(){return Gh()}const aje=Be("contentOnly"),yU=Be(void 0),rje=24;function ije({className:t}){return r.jsx("div",{className:W("pointer-events-none fixed inset-x-0 z-21","border-b-thin hires:top-[calc(var(--header-height)-.5px)] top-[calc(var(--header-height)-1px)] border-(--bento-border-color)",t)})}function _nt(){const t=ae(()=>aje());return t==="none"?null:r.jsxs(r.Fragment,{children:[r.jsx(ije,{}),r.jsx("div",{className:W(oL("bento"),aL,"pointer-events-none fixed inset-y-0 start-1/2 z-99 -translate-x-1/2 border-s border-e border-(--bento-border-color)","hires:[border-inline-width:0.5px] [border-inline-width:1px]",t==="contentOnly"&&"mt-(--header-height)"),style:{width:"min(100vw, calc(min(var(--thread-content-max-width), 100cqw - (var(--thread-content-margin) * 2)) + ".concat(2*rje,"px))")}})]})}function xnt(){const t=V(),e=ts(t),n=ae(it.wantsAttachUserFile$),s=ne(),o=Ut(),a=ki();_.useEffect(()=>{if(!e||!n)return;it.wantsAttachUserFile$.set(!1);const i=it.attachUserFileRequest;if(it.attachUserFileRequest=void 0,!!i)try{const l=new Uint8Array(i.bytes),c=new File([l],i.name,{type:i.mimeType}),d=dl(c),u=(c.type||i.mimeType).startsWith("image/"),f=u?xo.Multimodal:xo.Retrieval;ir.uploadFile(a,d,c,f,u?[i.mimeType]:[],s,o)}catch(l){Js.error("failed to attach file",{error:l})}},[e,n,s,o,a])}function ynt(){const t=yn(),e=jn(hn);_.useEffect(()=>{if(!t||!e)return;const n=a=>{var f,m;const i=a.target;if(!i)return;const l=i.closest("a");if(!l||l.closest("[data-desktop-skip-link-handler]"))return;const c=l.getAttribute("href");if(!c)return;const d=(f=l.getAttribute("target"))!=null?f:"",u=u6(c,document.baseURI);u&&(aq(a)||(a.preventDefault(),(m=f6())==null||m.handleLink(u.href,d)))};document.addEventListener("click",n,{capture:!0});const s=window.open,o=(a,i,l)=>{var u;const c=typeof a=="string"?a:a==null?void 0:a.toString();if(!c)return s.call(window,a,i,l);const d=u6(c,document.baseURI);return d?((u=f6())==null||u.handleLink(d.href,i!=null?i:""),null):s.call(window,a,i,l)};return window.open=o,()=>{document.removeEventListener("click",n,{capture:!0}),window.open=s}},[t,e])}function lje(t){return t.width!==void 0&&t.height!==void 0}function cje(t,e){var i;const n=(i=e==null?void 0:e.filter(lje))!=null?i:[];if(n.length===0)return{content_type:ut.Text,parts:[t]};const s=n.map(l=>{var c,d;return{content_type:Sa.ImageAssetPointer,asset_pointer:sx((c=l.id)!=null?c:""),size_bytes:(d=l.size)!=null?d:0,width:l.width,height:l.height}}),o=t,a=[...s,o];return{content_type:ut.MultimodalText,parts:a}}function vnt(t,e){"use forget";const n=G.c(25),s=V();let o;n[0]!==s?(o=()=>[ts(s),hn(s)],n[0]=s,n[1]=o):o=n[1];const[a,i]=ae(o),l=ae(it.wantsRequestCompletion$),c=ae(it.sidebarUrlTrayOpen$),d=ot(),u=Hn();let f;n[2]!==s?(f=Vh(s),n[2]=s,n[3]=f):f=n[3];const m=f;let p;n[4]!==m||n[5]!==t||n[6]!==s||n[7]!==a||n[8]!==u.search||n[9]!==d||n[10]!==e||n[11]!==c||n[12]!==l?(p=()=>{if(!a||!l)return;it.wantsRequestCompletion$.set(!1);const h=it.requestCompletion;if(!h)return;const x=u5({namespace:hm.CompletionRequest,opts:{debug:!1}});x.reset();const v=function(k){k&&Vf(yt(s,t),k)},y=function(k){if(!k)return;const{prepareState:E,lastPrepareTimestamp:T,conduitToken:M}=k;Ze(t,A=>{A.prepareState=E,A.lastPrepareTimestamp=T,A.conduitToken=M!=null?M:null})},b=async function(k,E,T,M,A){var J,Z,q,se;const I=(J=it.tabContext)==null?void 0:J[0],N=c&&m,L=cje(k,it.attachments),D=w(w(w(w({},E.length>0&&{system_hints:E}),((Z=it.attachments)==null?void 0:Z.length)&&{attachments:it.attachments}),await $h(N?I:void 0,(q=it.promptOrigin)!=null?q:"unknown","user",E)),M!==void 0&&{n7jupd_local_safe_mode:M}),F=ls(L,D),$=N?await lq(I,(se=it.promptOrigin)!=null?se:"unknown",E,t):void 0,H={kind:wt.PrimaryAssistant},z=w({conversationMode:H},E.length>0&&{systemHints:E});return{promptMessage:F,prependMessages:$&&$.length>0?$:void 0,requestedModelId:T!==""?T:void 0,completionMetadata:z,eventSource:"url",conduitToken:A}},C=function(){it.requestCompletion=void 0,it.attachments=void 0,it.prepareConversationDetails=void 0,it.whisperContent=void 0,it.tabContext=void 0,it.promptOrigin=void 0};v(h.modelSlug),y(it.prepareConversationDetails),(async()=>{var E;const S=await b(h.prompt,h.systemHints,h.modelSlug,h.n7jupdLocalSafeMode,(E=it.prepareConversationDetails)==null?void 0:E.conduitToken);S.profiler=x;const k=gi(s)&&it.promptOrigin!=="ntp"?!0:void 0;if(C(),gi(s)){const T=new URLSearchParams(u.search);T.set(rq,iq.value),d({pathname:"/",search:T.toString()},{replace:k})}e(S)})()},n[4]=m,n[5]=t,n[6]=s,n[7]=a,n[8]=u.search,n[9]=d,n[10]=e,n[11]=c,n[12]=l,n[13]=p):p=n[13];let g;n[14]!==m||n[15]!==t||n[16]!==s||n[17]!==a||n[18]!==i||n[19]!==u.search||n[20]!==d||n[21]!==e||n[22]!==c||n[23]!==l?(g=[s,a,l,t,e,c,m,i,u.search,d],n[14]=m,n[15]=t,n[16]=s,n[17]=a,n[18]=i,n[19]=u.search,n[20]=d,n[21]=e,n[22]=c,n[23]=l,n[24]=g):g=n[24],_.useEffect(p,g)}function bnt(t){"use forget";const e=G.c(36),n=V();let s;e[0]!==n?(s=ts(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=Hn(),i=ot(),l=ae(t.serverId$),c=jt(),d=ae(it.wantsModelSlug$),u=ae(it.selectedConversationId$),f=ae(it.wantsNewConversation$),m=ae(it.newConversationGizmoId$),p=uN();let g;e[2]!==a.pathname||e[3]!==i?(g=T=>{Mr(i,{replace:a.pathname==="/",config:T})},e[2]=a.pathname,e[3]=i,e[4]=g):g=e[4];const h=Ca(g);let x,v;e[5]!==o||e[6]!==m||e[7]!==h||e[8]!==f?(x=()=>{if(!o||!f)return;it.wantsNewConversation$.set(!1),h(m?{urlGizmoId:m}:void 0)},v=[o,f,m,h],e[5]=o,e[6]=m,e[7]=h,e[8]=f,e[9]=x,e[10]=v):(x=e[9],v=e[10]),_.useEffect(x,v);let y;e[11]!==o||e[12]!==p?(y=()=>{!o||!p||it.selectedConversationId$.set(void 0)},e[11]=o,e[12]=p,e[13]=y):y=e[13];let b;e[14]!==o||e[15]!==p||e[16]!==h?(b=[o,p,h],e[14]=o,e[15]=p,e[16]=h,e[17]=b):b=e[17],_.useEffect(y,b);let C,S;e[18]!==n||e[19]!==o||e[20]!==i||e[21]!==p||e[22]!==c||e[23]!==u||e[24]!==l?(C=()=>{o&&u&&(gi(n)&&p||u!==l&&Iv(i,c,u))},S=[o,u,p,i,c,l,n],e[18]=n,e[19]=o,e[20]=i,e[21]=p,e[22]=c,e[23]=u,e[24]=l,e[25]=C,e[26]=S):(C=e[25],S=e[26]),_.useEffect(C,S);let k;e[27]!==t||e[28]!==o||e[29]!==d?(k=()=>{o&&d&&(it.wantsModelSlug$.set(void 0),Vf(t,d))},e[27]=t,e[28]=o,e[29]=d,e[30]=k):k=e[30];let E;e[31]!==t||e[32]!==n||e[33]!==o||e[34]!==d?(E=[o,d,t,n],e[31]=t,e[32]=n,e[33]=o,e[34]=d,e[35]=E):E=e[35],_.useEffect(k,E)}function dje(t){"use forget";var A;const e=G.c(32),{action:n,ChatsIcon:s,FileBlankIcon:o,hintIcons:a,onItemClick:i,starter:l,index:c,hint:d}=t;let u,f,m,p=!1;e:switch(n.action_type){case"chat":{u=n.title,f=n.message,m=(A=n.system_hint)!=null?A:void 0,p=m==="agent";break e}case"navigation":u=n.title,f=n.subtitle||n.url}let g;e[0]!==s||e[1]!==a?(g=function(N){"use forget";const{hint:L}=N;if(L){const D=a==null?void 0:a[L];if(D){const F=D;return r.jsx(F,{className:"block h-4 w-4 text-token-text-primary","aria-hidden":!0})}}return r.jsx(s,{className:"block h-4 w-4 text-token-text-primary"})},e[0]=s,e[1]=a,e[2]=g):g=e[2];const h=g;if(!u)return null;let x;e[3]!==d||e[4]!==c||e[5]!==i||e[6]!==l?(x=I=>i(I,l,c,d),e[3]=d,e[4]=c,e[5]=i,e[6]=l,e[7]=x):x=e[7];let v;e[8]!==h||e[9]!==o||e[10]!==n.action_type||e[11]!==n.system_hint?(v=r.jsx("div",{className:"mt-[2px] shrink-0 self-start","aria-hidden":!0,children:n.action_type==="chat"?r.jsx(h,{hint:n.system_hint}):r.jsx(o,{className:"text-token-text-primary block h-4 w-4"})}),e[8]=h,e[9]=o,e[10]=n.action_type,e[11]=n.system_hint,e[12]=v):v=e[12];let y;e[13]===Symbol.for("react.memo_cache_sentinel")?(y=W("min-w-0 flex-1 overflow-hidden [mask-image:linear-gradient(to_right,black_85%,transparent_100%)] [-webkit-mask-image:linear-gradient(to_right,black_85%,transparent_100%)]"),e[13]=y):y=e[13];let b;e[14]!==u?(b=r.jsx("div",{className:"text-token-text-primary text-sm leading-5 whitespace-nowrap",children:u}),e[14]=u,e[15]=b):b=e[15];let C;e[16]!==p?(C=p&&r.jsx("span",{className:"ms-1 inline-flex shrink-0 items-center rounded-full px-1.5 py-px text-xs",style:{color:"var(--colors-fills-accented-fill-a-prominent, #007AFD)",background:"var(--colors-fills-accented-fill-a-subtle, rgba(0, 122, 253, 0.10))"},children:r.jsx(j,{id:"4ufBv1",defaultMessage:"NEW"})}),e[16]=p,e[17]=C):C=e[17];let S;e[18]!==b||e[19]!==C?(S=r.jsxs("div",{className:"flex items-center gap-2",children:[b,C]}),e[18]=b,e[19]=C,e[20]=S):S=e[20];let k;e[21]!==f?(k=f?r.jsx("div",{className:"text-token-text-secondary mt-1 text-sm whitespace-nowrap",children:f}):null,e[21]=f,e[22]=k):k=e[22];let E;e[23]!==S||e[24]!==k?(E=r.jsx("div",{className:"min-w-0 flex-1",children:r.jsx("div",{className:"flex min-w-0 items-start gap-2",children:r.jsxs("div",{className:y,children:[S,k]})})}),e[23]=S,e[24]=k,e[25]=E):E=e[25];let T;e[26]!==v||e[27]!==E?(T=r.jsxs("div",{className:"flex items-start gap-2 overflow-hidden",children:[v,E]}),e[26]=v,e[27]=E,e[28]=T):T=e[28];let M;return e[29]!==T||e[30]!==x?(M=r.jsx("li",{className:"w-full",children:r.jsx("button",{type:"button",onClick:x,className:"relative w-full rounded-xl py-3 ps-3.5 pe-3 text-start transition-colors hover:bg-black/5 dark:hover:bg-white/5",children:T})}),e[29]=T,e[30]=x,e[31]=M):M=e[31],M}const vU={agent:()=>P(()=>import("./cra56oew4p77casj.js"),__vite__mapDeps([50,1])),tatertot:()=>P(()=>Promise.resolve().then(()=>q1),void 0),search:()=>P(()=>Promise.resolve().then(()=>jr),void 0),picture_v2:()=>P(()=>Promise.resolve().then(()=>Cm),void 0),reason:()=>P(()=>import("./isqpc56i7wx8h49k.js"),__vite__mapDeps([49,1])),canvas:()=>P(()=>import("./eahncmechdd0yy5s.js"),__vite__mapDeps([24,1])),research:()=>P(()=>import("./hn0hl0c8spo9mfdq.js"),__vite__mapDeps([47,1]))},uje=Promise.all([P(()=>import("./foakg84w5wpjdwdx.js"),__vite__mapDeps([54,1])),P(()=>import("./g4luqq3g92oxbbim.js"),__vite__mapDeps([247,1]))]).then(([t,e])=>({ChatsIcon:t.default,FileBlankIcon:e.default})),Lu=new Map,E2=new Map;function fje(t){var n;const e=new Set;for(const s of t){if(s.action_type!=="chat")continue;const o=(n=s.system_hint)!=null?n:void 0;o&&(Lu.has(o)||vU[o]&&e.add(o))}return Array.from(e)}async function mje(t){if(t.length===0)return{};await Promise.all(t.map(n=>{if(Lu.has(n))return Promise.resolve();const s=vU[n];if(!s)return Promise.resolve();let o=E2.get(n);return o||(o=s().then(a=>{Lu.set(n,a.default)}).catch(()=>{Lu.delete(n)}).finally(()=>{E2.delete(n)}),E2.set(n,o)),o}));const e=t.map(n=>{const s=Lu.get(n);return s?[n,s]:null}).filter(Boolean);return Object.fromEntries(e)}function pje(t,e){const[n,s]=_.useState(null),[o,a]=_.useState({}),[i,l]=_.useState(t),[c,d]=_.useState(e);return _.useEffect(()=>{const u=fje(t);if(n&&u.length===0){l(t),d(e);return}let f=!1;async function m(){const[p,g]=await Promise.all([n?Promise.resolve(n):uje,mje(u)]);f||(s(p),Object.keys(g).length>0&&a(h=>w(w({},h),g)),l(t),d(e))}return m(),()=>{f=!0}},[n,t,e]),{icons:n,hintIcons:o,items:i,suggestions:c}}function gje(t){"use forget";const e=G.c(13),{items:n,suggestions:s,onItemClick:o}=t,{icons:a,hintIcons:i,items:l,suggestions:c}=pje(n,s);if(!a)return null;let d;if(e[0]!==i||e[1]!==a||e[2]!==o||e[3]!==l||e[4]!==c){let f;e[6]!==i||e[7]!==a||e[8]!==o||e[9]!==c?(f=(m,p)=>{var x,v;const g=c[p];if(!g)return null;const h=m.action_type==="chat"&&(x=m.system_hint)!=null?x:null;return r.jsx(dje,{action:m,ChatsIcon:a.ChatsIcon,FileBlankIcon:a.FileBlankIcon,hintIcons:i,onItemClick:o,starter:g,index:p,hint:h},(v=m.id)!=null?v:m.title)},e[6]=i,e[7]=a,e[8]=o,e[9]=c,e[10]=f):f=e[10],d=l.map(f),e[0]=i,e[1]=a,e[2]=o,e[3]=l,e[4]=c,e[5]=d}else d=e[5];let u;return e[11]!==d?(u=r.jsx("ul",{className:"flex w-full flex-col gap-2",children:d}),e[11]=d,e[12]=u):u=e[12],u}class hje{static async getOnPageSuggestions({source:e="kaur1br5_chat",current_page:n}){return await ge.safePost("/kaur1br5/suggestions",{requestBody:{source:e,current_page:n}})}}const bU=300*1e3,CU=1800*1e3,_je=Wn(t=>{const e=is(t,"2712016364"),n=e.get("staleTimeMs",bU),s=e.get("gcTimeMs",CU);return{staleTime:n,gcTime:s}}),xje=(t,e,n,s)=>w({queryKey:["kaur1br5","kaur1br5Suggestions",n!=null?n:"anon",t],enabled:!!t&&!!e,staleTime:bU,gcTime:CU,refetchOnWindowFocus:!1,queryFn:async()=>{if(!t||!e)throw new Error("Missing url or title for on-page suggestions request.");return await hje.getOnPageSuggestions({source:"kaur1br5_chat",current_page:{url:t,title:e}})}},s!=null?s:{});function yje(t,e,n){"use forget";var l;const s=G.c(8),o=V();let a,i;if(s[0]!==o||s[1]!==n||s[2]!==e||s[3]!==t){const c=et(o),d=(l=c==null?void 0:c.id)!=null?l:void 0,{staleTime:u,gcTime:f}=_je(o);let m;s[6]!==o?(m=ye(o,"3830740688"),s[6]=o,s[7]=m):m=s[7];const p=m;a=rt,i=xje(t,e,d,{enabled:!!(t&&e&&!n&&p),staleTime:u,gcTime:f}),s[0]=o,s[1]=n,s[2]=e,s[3]=t,s[4]=a,s[5]=i}else a=s[4],i=s[5];return a(i)}function vje(t,e,n){B.logEventWithStatsig("kaur1br5: Suggested Action Displayed","chatgpt_suggested_action_displayed",SU(t,e,n))}function bje(t,e,n){B.logEventWithStatsig("kaur1br5: Suggested Action Selected","chatgpt_suggested_action_selected",SU(t,e,n))}function SU(t,e,n){var o;const s={location:n.location,impression_id:n.impression_id,suggestion_index:e,suggestion_id:(o=t.id)!=null?o:null,suggestion_type:t.action_type};return n.page_classification_domain&&(s.page_classification_domain=n.page_classification_domain),n.page_classification_type&&(s.page_classification_type=n.page_classification_type),t.action_type==="chat"&&t.system_hint&&(s.system_hint=t.system_hint),s}const kk="default_agent_suggestion",Cje=[{reason:"Default suggestion",action_type:"chat",id:as(),title:"Summarize",message:"Summarize this content"},{reason:"Default suggestion",action_type:"chat",id:as(),title:"Learn more",message:"Find related information and links to this content",system_hint:"search"},{reason:"Default suggestion",action_type:"chat",id:as(),title:"What can I do here?",message:"Suggest useful actions for this content"}];function Sje(t){var s,o;let e="";switch(t.action_type){case"chat":e=t.message;break;case"navigation":e=t.title;break}const n=t.action_type==="chat"&&t.system_hint?lv(String(t.system_hint)):void 0;return{type:Je.Starter,title:(s=t.title)!=null?s:"",body:"",prompt:String(e!=null?e:""),id:(o=t.id)!=null?o:void 0,data:w({},n?{system_hint:n}:{})}}function wje(){"use no forget";var z,K,J;const t=V(),e=ae(it.context$),n=e==null?void 0:e.url,s=e==null?void 0:e.title,o=(z=e==null?void 0:e.blocked)!=null?z:!1,a=ae(()=>VT(t)),i=ye(t,"292680291"),l=o||a||!i,{data:c,isLoading:d}=yje(n,s,l),u=Ud(),f=gr.useStore(),{activeSystemHintType:m,activeConnectorSystemTypes:p}=gr.useState(Z=>({activeSystemHintType:Z.activeSystemHintType,activeConnectorSystemTypes:Z.activeConnectorSystemTypes})),{store:g}=Bd(),h=_.useRef(void 0),[x,v]=_.useState(null);_.useEffect(()=>{let Z=!1;async function q(){if(e&&e.url&&e.title){const se=await $h(e,U6e,"user");Z||v(se)}}return q(),()=>{Z=!0}},[e]),_.useEffect(()=>{if(l){h.current=void 0;return}c&&(h.current=c)},[c,l]);const y=!e||!e.url||!e.title,b=l?void 0:c!=null?c:h.current,S=!(b!==void 0)&&(d||y)||!x||l,k=b==null?void 0:b.actions,E=_.useMemo(()=>{if(l)return[];const Z=k!=null?k:[],q=3,se=new Set;m&&se.add(m);for(const te of p)se.add(te);const ie=se.size>0,ee=te=>{if(!ie)return!0;if(te.action_type!=="chat"||!te.system_hint)return!1;const ce=lv(te.system_hint);return ce?se.has(ce):!1},le=Z.filter(te=>ie&&te.id===kk?!1:ee(te));if(ie)return le.slice(0,q);const X=Z.slice(0,q);return X.length>0?X:Cje.slice(0,q)},[p,m,l,k]),T=_.useMemo(()=>E.map(Z=>{var ie;const q=Sje(Z),se=w(w({},(ie=q.data)!=null?ie:{}),x!=null&&x.kaur1br5?{kaur1br5:x.kaur1br5}:{});return U(w({},q),{data:se})}),[E,x]),M=_.useMemo(()=>E.map((Z,q)=>{var se,ie;return"".concat((ie=(se=Z.id)!=null?se:Z.title)!=null?ie:"","-").concat(q)}).join("|"),[E]),A=_.useRef(as());_.useEffect(()=>{A.current=as()},[M]);const I=(K=b==null?void 0:b.id)!=null?K:A.current,N=_.useMemo(()=>{var Z,q;return{location:"sidebar",impression_id:I,page_classification_domain:(Z=b==null?void 0:b.page_classification)==null?void 0:Z.domain,page_classification_type:(q=b==null?void 0:b.page_classification)==null?void 0:q.page_type}},[b,I]),L=_.useRef(null);_.useEffect(()=>{S||E.length===0||L.current!==I&&(L.current=I!=null?I:null,E.forEach((Z,q)=>{vje(Z,q,N)}))},[N,I,S,E]);const D=ae(()=>Vs(t)),F=(J=et(t))==null?void 0:J.isWorkspaceAccount(),$=(Z,q,se,ie)=>{var ee;if(E[se]&&bje(E[se],se,N),f.setActiveSystemHint(ie,D,{locked:!1},F),((ee=q.data)==null?void 0:ee.system_hint)==="agent"){const le=g.getSharedProps();if(le!=null&&le.composerController){const X=Pt(le.composerController);if(q.id===kk)return;yo(X,q.prompt)}return}u(Z,q,T,se)};return{shouldShowSuggestions:!S&&E.length>0,items:E,suggestions:T,handleItemClick:$}}const kje=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yv),__vite__mapDeps([10,1,11])).then(t=>t.OpenaiLogo));function Eje(){return r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsx(kje,{className:"h-11 w-11 opacity-40"})})}function Cnt(){"use forget";const t=G.c(5),{shouldShowSuggestions:e,items:n,suggestions:s,handleItemClick:o}=wje();if(!e){let i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(Eje,{}),t[0]=i):i=t[0],i}let a;return t[1]!==o||t[2]!==n||t[3]!==s?(a=r.jsx("div",{className:"mt-auto w-full ps-2.5 pe-3 pt-4 pb-3",children:r.jsx(gje,{items:n,suggestions:s,onItemClick:o})}),t[1]=o,t[2]=n,t[3]=s,t[4]=a):a=t[4],a}const Xd=t=>ye(t,"1424158285"),eu=t=>is(t,"1535193150"),Snt=t=>{const e=eu(t);return Xd(t)&&e.get("journal_homepage_url_icon_enabled",!1)},wnt=t=>{const e=eu(t);return Xd(t)&&e.get("show_web_page_file_refs",!1)},knt=t=>{const e=eu(t);return Xd(t)&&!e.get("show_turn_search_sources",!0)},Ent=t=>{const e=eu(t);return Xd(t)?e.get("file_ref_type_order",[]):[]},Tnt=t=>{const e=eu(t);return!!(Xd(t)&&e.get("render_web_results_like_files",!1))},Mnt=t=>{const e=eu(t);return Xd(t)?e.get("custom_thread_classes",""):""},wU=1e3*60*60;let T2;function Tje(){(T2===void 0||Date.now()-T2>wU)&&(nh.prewarmRealtimeVoice(),T2=Date.now())}function Mje(t){if(tt(t)&&ye(t,"422449809")&&Q1(t)){let e;const n=()=>{Tje(),e=window.setTimeout(()=>{n()},wU)};return n(),()=>window.clearTimeout(e)}}const Aje=S3(he.lastUserMessage);function M2(t){kl().then(e=>{t(e.getHost())}).catch(()=>{})}function Ije(t,e){const n=yt(t,e),s=St(()=>{const i=el(n);return i?i.filter(l=>l.role===Ke.User).length:0}),o=St(()=>{var c;const i=Aje(n);if(!i)return!1;const l=(c=i.metadata)==null?void 0:c.system_hints;return l!=null&&l.length?l.some(d=>d!=null&&d!==Pe.Search):!1});let a;return Dl(()=>{if(!Qo(t)){a=void 0;return}if(!Cr(e)){a=void 0;return}const i=n.serverId$();if(!i){a=void 0;return}(a==null?void 0:a.conversationId)!==i&&(a=void 0);const l=s(),c=o();if(l>0&&c){if((a==null?void 0:a.status)==="enqueued"&&a.conversationId===i){const u=i;M2(f=>f.cancelConversationArchive(u))}else(a==null?void 0:a.status)!=="cancelled"||a.conversationId;a={conversationId:i,status:"cancelled"};return}if(l===1){if((a==null?void 0:a.status)==="enqueued")return;a={conversationId:i,status:"enqueued"};const d=i;M2(u=>u.enqueueConversationArchive(d));return}if(l>1&&(a==null?void 0:a.status)==="enqueued"&&a.conversationId===i){a={conversationId:i,status:"cancelled"};const d=i;M2(u=>u.cancelConversationArchive(d))}})}function jje(t){return es({queryKey:["conversation",t,"stream-status"],queryFn:async()=>t?await ge.safeGet("/conversation/{conversation_id}/stream_status",{parameters:{path:{conversation_id:t}}}):null})}function Nje(t,e){return ka(t,()=>jje(e))}function Pje(t,e){const n=yt(t,e),s=St(()=>{const o=n.serverId$();return o==null?null:Nje(t,o)()});return Mh(()=>{var c;const o=xv(n),a=s(),i=n.serverId$();return i==null||o||((c=a==null?void 0:a.data)==null?void 0:c.status)!=="IS_STREAMING"?!1:Hu.get(i)!=null},()=>{if(!ze(t,"2489999880").get("is_resume_over_reloads_enabled",!1))return;const o=Qs(wn(n.serverId$)),a=Qs(Hu.get(o));cee({ctx:t,conversation:n,completionType:Xa.Continue,serverThreadId:o,token:a})})}function Ant(t,e){const n=[Mje(t),Ije(t,e),Pje(t,e)];return()=>{n.forEach(s=>s==null?void 0:s())}}const Rje=R(()=>P(()=>import("./odokf21e9yzx95dg.js"),__vite__mapDeps([437,1])),{loading:t=>O(t)});function Int({clientThreadId:t}){const e=jt(),n=Qn(t),s=Ve(t,he.getGizmoId),o=async()=>{n&&(await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n}},requestBody:{is_archived:!1},intercomEventOnError:"fetch-error:conversation:edit"}),e.invalidateQueries(zh({clientThreadId:t})),Ze(n,a=>{a.isArchived=!1}),eo(e,s))};return r.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[r.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:r.jsx(j,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),r.jsx("div",{children:r.jsx(_e,{disabled:!n,onClick:o,icon:Rje,children:r.jsx(j,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const jnt=Af(()=>({marginBottom$:Be(null),height$:Be(null)})),Lje=R(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([149,1])),{loading:t=>O(t)}),Oje=R(()=>P(()=>Promise.resolve().then(()=>wm),void 0),{loading:t=>O(t)}),Dje=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)}),Fje=R(()=>P(()=>import("./jmj4kur2ey6a14ct.js"),__vite__mapDeps([438,1])),{loading:t=>O(t)}),Bje=R(()=>P(()=>import("./b7yxnd6iunaqip5a.js"),__vite__mapDeps([439,1])),{loading:t=>O(t)}),Uje=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),$je=R(()=>P(()=>import("./iz35nlf95x4k1pcg.js"),__vite__mapDeps([146,1])),{loading:t=>O(t)}),Vje=R(()=>P(()=>import("./e9rpltumxiot7uop.js"),__vite__mapDeps([440,1,10,11,441])));function Nnt({selectedDomain:t,verifiedDomains:e,domains:n,onChangeDomain:s}){const[o,a]=_.useState(!1),i=e.length>0,l=V(),c=et(l),d=c==null?void 0:c.id,u=c==null?void 0:c.isEnterprisey(),{mutateAsync:f}=nse(d);return r.jsxs("div",{className:"font-normal",children:[r.jsxs(Y.Root,{children:[r.jsx(cq,{children:r.jsxs("span",{className:"flex items-center gap-2 py-2",children:[t!=null?t:r.jsx(j,w({},Vy.selectADomain)),r.jsx($je,{className:"icon"})]})}),r.jsx(Y.Portal,{children:r.jsxs(Y.Content,{children:[r.jsx(Y.RadioGroup,{value:t,onValueChange:m=>{m!==t&&s(m)},children:e.map(({id:m,hostname:p})=>r.jsx(Y.RadioItem,{value:p,children:r.jsxs("div",{className:"flex flex-row",children:[r.jsx("span",{children:p}),r.jsx("span",{onClick:()=>{f({domainId:m}),s("")},children:r.jsx(Lje,{className:"icon-sm fixed end-4"})})]})},m))}),i&&r.jsx(Y.Separator,{}),r.jsx(Y.Item,{onClick:()=>{a(!0)},icon:Oje,children:r.jsx(j,w({},Vy.addDomain))})]})})]}),d&&!u&&r.jsx(Vje,{domains:n,isOpen:o,onClose:()=>a(!1),workspaceId:d,showUnverifiedDomains:!0,onVerifyDomain:m=>{s(m.hostname)}})]})}function Hje(){const t=jt();return zt({mutationFn:({verifierType:e})=>R3.unverifySocialAuth(e),onSuccess:()=>{t.refetchQueries({queryKey:["builderProfile"]})}})}function Gje({socialData:t}){const{type:e,display_name:n,verified_data:s}=t,o=e==="linkedin"?Fje:e==="github"?Bje:null;return o?r.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[r.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[o({className:"icon"}),r.jsx("span",{children:n})]}),(s==null?void 0:s.link_to)&&r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:s.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:r.jsx(Dje,{className:"icon-sm"})})]}):null}function Pnt({socialData:t,icon:e}){const{id:n,type:s,display_name:o,verified:a,verified_data:i}=t,[l,c]=_.useState(!1),d=Hje();return r.jsxs("div",{className:"flex flex-row items-center justify-between space-y-1",children:[r.jsxs("div",{className:W("flex items-center space-x-2"),children:[r.jsx(e,{className:"icon-sm"}),r.jsx("span",{children:o}),a&&(i==null?void 0:i.username)&&r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:i.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:i==null?void 0:i.username})]}),a?r.jsx("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{d.mutate({verifierType:s})},children:d.isPending?r.jsx(_s,{}):r.jsx(Uje,{className:"icon-sm text-token-text-tertiary"})}):r.jsx(_e,{size:"small",color:"secondary",loading:l,onClick:async()=>{c(!0),await dq({id:n},"#settings/".concat(Rn.Account)),c(!1)},children:r.jsx(j,w({},Vy.verify))})]})}const Vy=be({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}}),Wje=R(()=>P(()=>import("./luhdaml0ts1hcscs.js"),__vite__mapDeps([442,1])),{loading:t=>O(t)}),zje=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)}),kU=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>O(t)}),qje=R(()=>P(()=>import("./jmj4kur2ey6a14ct.js"),__vite__mapDeps([438,1])),{loading:t=>O(t)}),Yje=R(()=>P(()=>import("./b7yxnd6iunaqip5a.js"),__vite__mapDeps([439,1])),{loading:t=>O(t)});var RE;const Zje=mt.div(RE||(RE=ct(["text-sm text-token-text-tertiary"]))),Kje="community builder";function Qje(t){const[e,n]=_.useState(t),s=_.useRef(null),o=(a,i)=>{s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{n(a),s.current=null},i)};return _.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),[e,o]}function Jje(t){return"gizmo"in t}function Ek({gizmo:t,builderName:e,builderUrl:n,className:s,socials:o,hideLink:a=!1}){const i=V(),l=ye(i,"2256850471");let c,d;t&&Jje(t)?(c=t.gizmo.author.display_name,d=t.gizmo.author.link_to):(c=e,d=n),(c===""||c==null)&&(c=Kje);const u=o==null?void 0:o.filter(m=>m.verified),f=r.jsxs("div",{className:"w-48 space-y-4 text-sm",children:[d&&r.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[r.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[r.jsx(kU,{className:"icon"}),r.jsx("span",{children:r.jsx(j,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:d,className:"text-token-text-tertiary hover:cursor-pointer",children:r.jsx(zje,{className:"icon-sm"})})]}),l&&(u==null?void 0:u.map((m,p)=>m.verified?r.jsx(Gje,{socialData:m},p):null)),r.jsxs("div",{className:"text-token-text-tertiary text-xs",children:[(d||u&&u.length>0)&&r.jsx("hr",{className:"border-token-border-default my-2"}),r.jsx(j,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return r.jsxs("div",{className:"flex flex-row items-center space-x-1",children:[r.jsx(Zje,{className:s,children:r.jsx(j,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:c}})}),!a&&r.jsx(Xje,{socials:o,website:d,children:f})]})}function Xje({website:t,socials:e,children:n}){const[s,o]=Qje(!1);let a=[];t&&a.push(r.jsx(kU,{className:"icon-xs text-token-text-secondary"})),e&&e.forEach(l=>{l.verified&&(l.type==="linkedin"?a.push(r.jsx(qje,{className:"icon-xs text-token-text-secondary"})):l.type==="github"&&a.push(r.jsx(Yje,{className:"icon-xs text-token-text-secondary"})))});const i=a.length-2;return a=a.slice(0,2),i>0&&a.push(r.jsxs("span",{className:"text-token-text-secondary text-xs font-semibold",children:["+",i]},"overflow")),r.jsx(Ul,{open:s,onOpenChange:l=>o(l,0),children:r.jsxs("div",{onPointerLeave:()=>o(!1,300),children:[r.jsx(vr,{asChild:!0,children:r.jsx("div",{onPointerEnter:()=>o(!0,0),className:"cursor-pointer",children:a.length>0?r.jsx("div",{className:"bg-token-main-surface-secondary flex items-center gap-1 rounded-xl px-2 py-1",children:a}):r.jsx(Wje,{className:"icon-xs text-token-text-secondary"})})}),r.jsx($l,{children:r.jsx(Vl,{side:"top",sideOffset:8,align:"center",className:"bg-token-main-surface-primary z-10 rounded-lg p-4 drop-shadow-md",children:r.jsx("div",{onPointerEnter:()=>o(!0,0),children:n})})})]})})}const eNe=R(()=>P(()=>import("./kspsmo2l8jg7uqdj.js"),__vite__mapDeps([26,1])),{loading:t=>O(t)}),tNe=R(()=>P(()=>import("./kz0466kav0wlxeny.js"),__vite__mapDeps([387,1])),{loading:t=>O(t)}),nNe=R(()=>P(()=>import("./moa9hw4knutxpmay.js"),__vite__mapDeps([443,1,10,11,351,352,347,348,349,350,319,0])).then(t=>t.SnorlaxSplashScreen)),Rnt=({conversation:t,currentModelId:e,onRequestCompletion:n,gizmoId:s})=>{const o=V(),{data:a}=Si(s),i=Rl(o,s),l=mq();return a==null?null:i?r.jsx(nNe,{conversation:t,gizmoId:s,currentModelId:e,onRequestCompletion:n}):r.jsx(sNe,{gizmo:a,showStarterPrompts:!0,disableStarterPrompts:l,clientThreadId:t.id,currentModelId:e})};function sNe({gizmo:t,hideOwner:e=!1,children:n,className:s,avatarClassName:o,showStarterPrompts:a=!1,disableStarterPrompts:i=!1,clientThreadId:l,currentModelId:c}){return t==null?null:r.jsx(r.Fragment,{children:r.jsxs("div",{className:W("text-token-text-primary flex h-full flex-col items-center justify-center","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",s),children:[r.jsx(oNe,{gizmo:t,avatarClassName:o}),r.jsx(rNe,{gizmo:t,hideOwner:e,showStarterPrompts:a,disableStarterPrompts:i,clientThreadId:l,currentModelId:c}),n]})})}function oNe({gizmo:t,avatarClassName:e}){var s;const n=!!(t!=null&&uq(t)&&((s=t==null?void 0:t.gizmo.tags)!=null&&s.includes(lg.FirstParty)));return r.jsx("div",{className:"relative",children:r.jsx(Y1,{isFirstParty:n||!t,src:t!=null&&Sc(t)?t.profilePictureUrl:t==null?void 0:t.gizmo.display.profile_picture_url,className:W("mb-3 h-12 w-12",e)})})}function aNe({gizmo:t,disabled:e}){const n=Iy(t),s=Ud(),o=Mo();if(n==null||n.length===0)return null;const a=n.slice(0,o?2:4);return r.jsx(lNe,{starterPrompts:a,onSelectStarterPrompt:s,disabled:e})}function rNe({gizmo:t,hideOwner:e,showStarterPrompts:n,disableStarterPrompts:s,clientThreadId:o,currentModelId:a}){var v;const i=V(),l=ae(()=>a8(i,{isGizmo:!0})),{data:c,isLoading:d}=ae(()=>l8(i)),u=t!=null&&Sc(t)?t.name:t==null?void 0:t.gizmo.display.name,f=t!=null&&Sc(t)?t.description:t==null?void 0:t.gizmo.display.description,m=c==null?void 0:c.model_override,p=t!=null&&Sc(t)?t.defaultModel:t==null?void 0:t.gizmo.default_model,g=p?m!=null&&m[p]?l.models.get(m==null?void 0:m[p]):l.models.get(p):null,h=(v=et(i))==null?void 0:v.hasPaidFeatures(),x=_.useCallback(()=>{!o||!g||(B.logEvent("GPTs: Landing Preferred Model Switch",{from:a,to:g.id}),Ye.logEvent("chatgpt_gpts_landing_preferred_model_switch",g.id,{from:String(a!=null?a:""),to:g.id}),Vf(yt(i,o),g.id))},[o,g,a,i]);return r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"text-center text-2xl font-semibold",children:u}),!e&&r.jsx("div",{className:"text-token-text-tertiary flex items-center gap-1",children:r.jsx(r.Fragment,{children:t&&Sc(t)?r.jsx(Ek,{gizmo:t}):r.jsx(Ek,{gizmo:t,socials:t.gizmo.author.display_socials})})}),!d&&h&&g&&(a&&a!==g.id?r.jsxs("button",{onClick:x,className:"btn btn-blue btn-small flex items-center gap-1",children:[r.jsx(tNe,{className:"icon-sm"}),r.jsx(j,{id:"6uu9eh",defaultMessage:"Switch to {modelTitle} (creator's recommended model)",values:{modelTitle:"".concat(g.title)}})]}):r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 text-xs",children:[r.jsx(eNe,{style:{color:"gray",width:16,height:16}}),r.jsx(j,{id:"mcxm8w",defaultMessage:"Using the creator's recommended model: {modelTitle}",values:{modelTitle:"".concat(g.title)}})]})),f&&r.jsx("div",{className:"text-token-text-primary max-w-md text-center text-sm font-normal",children:f}),n&&r.jsx(aNe,{gizmo:t,disabled:s})]})}const iNe=/\s/;function lNe({starterPrompts:t,onSelectStarterPrompt:e,disabled:n,cssMobileDisplayLimit:s,marginOverride:o}){let a=t.map((i,l)=>{var u,f;let c=(u=i.oneliner)!=null?u:i.title;c===""&&(c=i.body);const d=iNe.test(c);return r.jsxs("button",{className:W(s!==void 0&&l>=s&&"max-sm:hidden","border-token-border-default shadow-xxs enabled:hover:bg-token-main-surface-secondary relative flex w-40 flex-col gap-2 rounded-2xl border px-3 pt-3 pb-4 text-start align-top text-[15px] transition disabled:cursor-not-allowed"),disabled:n,onClick:m=>e(m,i,t,l),children:[r.jsx(fq,{category:i.category}),r.jsx("div",{className:W("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",d?"break-word":"break-all"),children:c})]},(f=i.id)!=null?f:l)});if(a.length>2){const i=Math.floor(a.length/2);a=[a.slice(0,i),a.slice(i)].map((l,c)=>r.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:l},c))}return r.jsx("div",{className:W("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",o!=null?o:"mt-12"),children:a})}function cNe(t){var n,s,o,a;const e=he.getTree(t).findNode(i=>{var l;return((l=i.message.metadata)==null?void 0:l.greenwich)!==void 0},he.getCurrentLeafId(t));return[(s=(n=e==null?void 0:e.message.metadata)==null?void 0:n.greenwich)==null?void 0:s.text,(a=(o=e==null?void 0:e.message.metadata)==null?void 0:o.greenwich)==null?void 0:a.link]}function Lnt({clientThreadId:t}){const[e,n]=Ve(t,cNe);return!e||!n?null:r.jsx("div",{className:"flex w-full items-center justify-center p-2 text-center text-xs",children:r.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"hover:text-token-text-primary text-token-text-tertiary hover:underline",children:e})})}function Ont(t){"use forget";const e=G.c(7),n=Hn(),[,s]=Us();let o;e[0]!==n.state||e[1]!==s?(o=c=>{s(d=>(c?d.set(m6,c):d.delete(m6),d),{replace:!0,state:n.state})},e[0]=n.state,e[1]=s,e[2]=o):o=e[2];const a=Ca(o);let i,l;e[3]!==t||e[4]!==a?(i=()=>Ea(()=>{if(xv(t)){const c=bn(t);if(ta(t).groups.some(u=>u.modelIds.includes(c.id)))return c.id}},a),l=[t,a],e[3]=t,e[4]=a,e[5]=i,e[6]=l):(i=e[5],l=e[6]),_.useEffect(i,l)}function Dnt(){const t=pq(nf.NoAuthNewChat),e=Eh();return t&&!e?r.jsx(dNe,{onClose:()=>{On.closeModal(nf.NoAuthNewChat)}}):null}function dNe({onClose:t}){const e=V(),n=ot(),s=i=>{i.preventDefault(),Zt(e,{fallbackScreenHint:"signup",callback:l=>{Ye.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),B.logSignUpButtonClicked({location:"New chat modal",provider:l},kt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Qa(e)})},o=i=>{i.preventDefault(),Zt(e,{fallbackScreenHint:"login",callback:l=>{Ye.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),B.logLogInButtonClicked({location:"New chat modal",provider:l},kt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Qa(e)})},a=()=>{Ye.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),B.logNewChatButtonClicked({location:"New Chat Modal New Chat Button"}),Mr(n),t()};return _.useEffect(()=>{Ye.logEvent("chatgpt_new_chat_modal_shown"),B.logEvent("New Chat Modal Shown")},[]),r.jsx(Mt,{testId:"modal-no-auth-new-chat",isOpen:!0,type:"success",onClose:t,noPadding:!0,size:"custom",className:"max-w-sm",children:r.jsxs("div",{className:"flex flex-col justify-center p-6",children:[r.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[r.jsx("div",{}),r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(gn,{onClick:t})})]}),r.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:r.jsx(j,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:i=>r.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:s,children:i}),login:i=>r.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:o,children:i})}})}),r.jsx(_e,{className:"mb-3",color:"primary",size:"large",onClick:a,children:r.jsx(j,{id:"cBGbrD",defaultMessage:"Clear chat"})}),r.jsx(_e,{size:"large",onClick:()=>{Zt(e,{fallbackScreenHint:"login",callback:i=>{B.logLogInButtonClicked({location:"New chat modal",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Qa(e)})},color:"secondary",children:r.jsx(j,w({},pt.logInButtonText))})]})})}const uNe=R(()=>P(()=>import("./im8n91zlz29wyx3k.js"),__vite__mapDeps([444,1])),{loading:t=>O(t)}),fNe=R(()=>P(()=>import("./er12v6m875trrh25.js"),__vite__mapDeps([217,1])),{loading:t=>O(t)}),mNe=R(()=>P(()=>import("./c23vrkf8h51nmu8w.js"),__vite__mapDeps([150,1])),{loading:t=>O(t)}),pNe=R(()=>P(()=>import("./d4qsitgbpj3e1n6x.js"),__vite__mapDeps([311,1])),{loading:t=>O(t)}),gNe=R(()=>P(()=>import("./lt3p9tbm4njlkdxy.js"),__vite__mapDeps([445,1])),{loading:t=>O(t)}),hNe=R(()=>P(()=>import("./o0j54eux3slox97p.js"),__vite__mapDeps([141,1])),{loading:t=>O(t)}),_Ne=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>O(t)}),EU={spreadsheets:uNe,presentations:gNe,actions:pNe,deep_research:hNe,suggested:fNe};function Fnt({clientThreadId:t}){const{isOdysseyMode:e}=$5(t),n=bNe(e),{keywords:s}=sF({clientThreadId:t});return!e||!n?null:r.jsx(xNe,{groups:n,mentionKeywords:s})}function xNe({groups:t,mentionKeywords:e}){const[n,s]=_.useState(null),o=Mi(),[a,i]=_.useState(null),[l,c]=_.useState("suggested"),d=b=>{c(b),i(null)},u=_.useMemo(()=>{var C;const b=t.find(S=>S.category.name===l);return(C=b==null?void 0:b.prompts)!=null?C:[]},[t,l]);_.useEffect(()=>{u&&a!=null&&yo(Pt(o),u[a].prompt_string)},[o,u,a]),_.useEffect(()=>{e&&e.length>0&&F8(e,Pt(o))},[o,e]);const[f,m]=_.useState(()=>wn(()=>cf(o)));_.useEffect(()=>Dl(()=>{cf(o)&&m(!0)}),[o]);const p=Ca(()=>{const b=a==null?0:Math.min(a+1,u.length-1);return i(b),!0}),g=Ca(()=>{const b=a===0||a==null?null:a-1;return i(b),!0}),h=u.length>0;_.useEffect(()=>{if(!(!f||!h))return Y8(Pt(o),{ArrowDown:p,ArrowUp:g})},[f,h,o,p,g]),_.useEffect(()=>{const b=()=>{m(!1),i(null)};return Pf(Pt(o).dom,{click:b,input:b})},[o]);const x=_.useRef(null),[v,y]=_.useState(void 0);return Xn(()=>{x.current&&y(x.current.offsetWidth)},[l]),r.jsx(b0e,{horizontalPadding:"standard",horizontalMargin:"none",verticalMargin:"none",verticalPadding:"none",overflowY:"auto",children:r.jsx(Ir,{className:"h-full overflow-y-hidden",children:r.jsx(Xe.div,{className:"flex size-full flex-col",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:r.jsxs("div",{className:"mt-5 flex flex-col items-center overflow-y-auto",children:[r.jsx("div",{className:"py-2",ref:x,children:r.jsx("div",{className:"flex flex-row flex-nowrap gap-2 overflow-x-auto",children:t.map(b=>r.jsx(yNe,{category:b.category.name,displayName:b.category_display_name,selected:l===b.category.name,onSelect:()=>d(b.category.name)},b.category.name))})}),r.jsx("div",{className:"overflow-y-auto",children:r.jsx(Xe.ul,{className:"mt-1 flex flex-col",style:v?{width:v}:{},children:u.map((b,C)=>r.jsx(vNe,{prompt:b,rowIdx:C,selected:a===C,onSelect:()=>{B.logEvent("Agent Suggested Prompt Selected",{prompt_title:b.title,prompt_category:b.categories[0].name}),i(C),so(Pt(o))},hoveredPromptIndex:n,setHoveredPromptIndex:s,totalRows:u.length},"".concat(l,"-").concat(C)))})})]})})})})}function yNe({category:t,displayName:e,selected:n,onSelect:s}){const o=EU[t],a=n?"text-token-text-primary":"text-token-text-secondary",i=n?"text-token-icon-primary":"text-token-icon-secondary";return r.jsx(_e,{color:"secondary",onClick:s,icon:()=>r.jsx(o,{className:i}),className:W("border-token-bg-tertiary",n&&"bg-token-bg-tertiary","font-normal",a),children:e})}function vNe({prompt:t,rowIdx:e,selected:n,onSelect:s,hoveredPromptIndex:o,setHoveredPromptIndex:a,totalRows:i}){const l=_.useRef(null);_.useEffect(()=>{var u;n&&((u=l.current)==null||u.scrollIntoView({behavior:"auto"}))},[n]);function c(){const u=CNe(t),f=u?EU[u]:_Ne;return r.jsx(f,{className:"text-token-icon-secondary size-5"})}const d=o===e||o===e+1;return r.jsxs(Xe.li,{ref:l,initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:e*.03},exit:{opacity:0,translateY:4},onMouseEnter:()=>a(e),onMouseLeave:()=>a(null),children:[r.jsxs("button",{className:W("hover:bg-token-bg-tertiary flex w-full flex-row items-center rounded-xl px-2 py-4 text-start"),onClick:s,type:"button",children:[r.jsx("div",{className:"flex flex-col items-center justify-center p-1",children:c()}),r.jsx("div",{className:"text-token-text-secondary flex-1 overflow-hidden pe-2 text-sm text-ellipsis whitespace-nowrap",children:t.title}),t.example_url?r.jsx("div",{className:"flex flex-col items-center justify-center pe-1",onClick:u=>{u.stopPropagation(),B.logEvent("Agent Suggested Prompt Example Clicked",{prompt_title:t.title,prompt_category:t.categories[0].name}),t.example_url&&(window.location.href=t.example_url)},children:r.jsx(mNe,{className:"text-token-icon-tertiary size-6.5 shrink-0"})}):null]}),e<i-1&&!d&&r.jsx("div",{className:"bg-token-bg-tertiary mx-4 mt-[-1px] h-[1px]"})]})}function bNe(t){var n;return(n=rt({queryKey:["odyssey_suggested_prompts_all"],queryFn:async()=>await ge.safeGet("/n7jupd_suggested_prompts_all"),enabled:t}).data)==null?void 0:n.prompt_groups}function CNe(t){const e=t.categories;if(e.length!==0)return e[0].name}const TU=t=>{"use forget";var y;const e=G.c(23);let n,s,o,a,i;e[0]!==t?(y=t,{open:i,containerClassName:s,onDismiss:o,onShow:a}=y,n=ke(y,["open","containerClassName","onDismiss","onShow"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5]);const l=i===void 0?!0:i,c=ne(),[d,u]=_.useState(l);let f,m;if(e[6]!==d||e[7]!==a?(f=()=>{d&&(a==null||a())},m=[d,a],e[6]=d,e[7]=a,e[8]=f,e[9]=m):(f=e[8],m=e[9]),_.useEffect(f,m),!d)return null;let p;e[10]!==s?(p=W("pointer-events-none fixed start-1/2 bottom-8 z-50 w-full -translate-x-1/2 px-4",s),e[10]=s,e[11]=p):p=e[11];let g;e[12]!==c?(g=c.formatMessage({id:"b675aO",defaultMessage:"Banner"}),e[12]=c,e[13]=g):g=e[13];let h;e[14]!==o?(h=()=>{o==null||o(),u(!1)},e[14]=o,e[15]=h):h=e[15];let x;e[16]!==n||e[17]!==h?(x=r.jsx("div",{className:"pointer-events-auto mx-auto w-full max-w-[768px]",children:r.jsx(Sf,U(w({},n),{onDismiss:h}))}),e[16]=n,e[17]=h,e[18]=x):x=e[18];let v;return e[19]!==p||e[20]!==g||e[21]!==x?(v=r.jsx("div",{className:p,"aria-live":"polite",role:"region","aria-label":g,children:x}),e[19]=p,e[20]=g,e[21]=x,e[22]=v):v=e[22],v},SNe=t=>{"use forget";const e=G.c(7),{children:n}=t,s=Array.isArray(n)?n[0]:n,o=Array.isArray(n)?n[1]:null;let a;e[0]!==s?(a=r.jsx("div",{className:"border-token-bg-secondary bg-token-bg-primary z-10 -translate-y-[6px] rotate-[-5deg] rounded-[7px] border-[1px] [box-shadow:0_2px_8px_0_rgba(0,0,0,0.05)]",children:r.jsx("div",{className:"flex h-[28px] w-[28px] items-center justify-center overflow-hidden rounded-[7px] p-[2px]",children:r.jsx("div",{className:"flex h-full w-full items-center justify-center [&_img]:max-h-full [&_img]:max-w-full [&_img]:object-contain [&_img]:object-center [&_svg]:max-h-full [&_svg]:max-w-full [&_svg]:object-contain [&_svg]:object-center",children:s})})}),e[0]=s,e[1]=a):a=e[1];let i;e[2]!==o?(i=r.jsx("div",{className:"border-token-bg-secondary bg-token-bg-primary z-20 -ms-[10px] translate-y-[6px] rotate-[5deg] rounded-[7px] border-[1px] [box-shadow:0_2px_8px_0_rgba(0,0,0,0.05)]",children:r.jsx("div",{className:"flex h-[28px] w-[28px] items-center justify-center overflow-hidden rounded-[7px] p-[2px]",children:r.jsx("div",{className:"flex h-full w-full items-center justify-center [&_img]:max-h-full [&_img]:max-w-full [&_img]:object-contain [&_img]:object-center [&_svg]:max-h-full [&_svg]:max-w-full [&_svg]:object-contain [&_svg]:object-center",children:o})})}),e[2]=o,e[3]=i):i=e[3];let l;return e[4]!==a||e[5]!==i?(l=r.jsxs("div",{className:"flex items-center",children:[a,i]}),e[4]=a,e[5]=i,e[6]=l):l=e[6],l};function wNe(t){const{data:e,isLoading:n}=rt({queryKey:["workspace_connector_stats",t],queryFn:()=>ge.safeGet("/aip/workspace/connector-stats"),enabled:!!t}),s=_.useMemo(()=>{var l,c,d;const a=new Map,i=(l=e==null?void 0:e.connector_stats)!=null?l:[];for(const u of i){const f=Number((c=u.unique_user_cnt)!=null?c:0);Number.isFinite(f)&&a.set(u.connector_id,((d=a.get(u.connector_id))!=null?d:0)+f)}return a},[e]),o=_.useMemo(()=>{const a=Array.from(s.entries()).map(([i,l])=>({connectorId:i,totalCount:l}));return a.sort((i,l)=>l.totalCount-i.totalCount),a},[s]);return{totalsByConnectorId:s,topSorted:o,isLoading:n}}const kNe=R(()=>P(()=>import("./kfciwy69uk039ng9.js"),__vite__mapDeps([34,1])),{loading:t=>O(t)}),ENe=R(()=>P(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([35,1])),{loading:t=>O(t)}),TNe=R(()=>P(()=>import("./ydzvfm0toss4freg.js"),__vite__mapDeps([353,1,10,11,354,355])).then(t=>t.ConnectorsOnboardingModal));function MNe({skip:t=!1}){const e=V(),n=o3(e),s=uM(e),o=gq(e),[a,i]=Us(),[l,c]=_.useState(!1);_.useEffect(()=>{a.get("force_show_external_nux")==="true"&&(c(!0),i(S=>(S.delete("force_show_external_nux"),S)))},[a,i]);const d=gt.getItem(Ue.ConnectorsExternalNuxBannerDismissed)===!0,u=!t&&n&&!o&&s==="external"&&!d,{connectorLinks:f,isLoading:m}=Uf({skip:!u,fetchValidLinksOnly:!0}),p=ae(()=>{if(u)return T3(e)}),g=u&&!p,h=ae(()=>Ih(e)),x=h===void 0,v=_.useMemo(()=>{var S;return!!(p!=null&&p.some(k=>k.status!=="DISABLED_BY_ADMIN"))||((S=h==null?void 0:h.length)!=null?S:0)>0},[p,h]),y=_.useMemo(()=>{var S,k;if(!u||m||g)return!1;if(p){for(const E of p)if(((S=f.get(E.id))!=null?S:[]).length===0)return!0}if(((k=h==null?void 0:h.length)!=null?k:0)>0&&!x){const E=h!=null?h:[],T=new Set(["partially_activated","activated","activating"]);for(const M of h){const A=E.find(I=>I.user_connection_details.connection_type===M);if(!A||!T.has(A.user_connection_details.activation_status))return!0}}return!1},[u,m,g,p,f,h,x]);return{shouldShow:l||u&&v&&y,isLoading:u&&(m||g||x)}}function Bnt(t){"use forget";var se,ie,ee,le,X,te,ce,ue,me,xe,pe;const e=G.c(42),{clientThreadId:n}=t,s=V(),o=ne(),a=Mi(),i=$s(),l=Cn();let c;e[0]!==l?(c=l==null?void 0:l.getWorkspaceId(),e[0]=l,e[1]=c):c=e[1];const d=c,u=(se=l==null?void 0:l.name)!=null?se:"",f=l==null?void 0:l.planType;let m;e[2]!==f?(m=fM(f),e[2]=f,e[3]=m):m=e[3];const p=m,{platformConnectors:g}=Ad(!0);let h;e[4]===Symbol.for("react.memo_cache_sentinel")?(h={},e[4]=h):h=e[4];const{shouldShow:x,isLoading:v}=MNe(h),y=x&&!v,{topSorted:b,isLoading:C}=wNe(y?d:void 0),S=jNe;let k;e[5]!==n||e[6]!==a||e[7]!==i?(k=()=>{S(),i("glaux",{analyticsMetadata:{clientThreadId:n}}),setTimeout(()=>{so(Pt(a))},100),B.logEventWithStatsig("ChatGPT Connectors Connector Pill Enabled","chatgpt_connectors_connector_pill_enabled",{type:"glaux"})},e[5]=n,e[6]=a,e[7]=i,e[8]=k):k=e[8];const E=k;if(!y||C)return null;let T;e[9]!==g||e[10]!==((ie=b[0])==null?void 0:ie.connectorId)?(T=g.get((le=(ee=b[0])==null?void 0:ee.connectorId)!=null?le:""),e[9]=g,e[10]=(X=b[0])==null?void 0:X.connectorId,e[11]=T):T=e[11];const M=T;let A;e[12]!==g||e[13]!==((te=b[1])==null?void 0:te.connectorId)?(A=g.get((ue=(ce=b[1])==null?void 0:ce.connectorId)!=null?ue:""),e[12]=g,e[13]=(me=b[1])==null?void 0:me.connectorId,e[14]=A):A=e[14];const I=A,N=(pe=(xe=b[0])==null?void 0:xe.totalCount)!=null?pe:0;let L;e[15]!==o||e[16]!==p||e[17]!==N?(L=N<5?p?o.formatMessage({id:"CexxSa",defaultMessage:"Get started with organization knowledge"}):o.formatMessage({id:"hyzDPW",defaultMessage:"Get started with company knowledge"}):p?o.formatMessage({id:"eqzxmv",defaultMessage:"{count, plural, one {Join # teammate using organization knowledge} other {Join # teammates using organization knowledge}}"},{count:N}):o.formatMessage({id:"f7CtQQ",defaultMessage:"{count, plural, one {Join # teammate using company knowledge} other {Join # teammates using company knowledge}}"},{count:N}),e[15]=o,e[16]=p,e[17]=N,e[18]=L):L=e[18];const D=L;let F;e[19]!==M?(F=M?r.jsx(vf,{connector:M,size:"large"}):r.jsx(ENe,{className:"icon"}),e[19]=M,e[20]=F):F=e[20];let $;e[21]!==I?($=I?r.jsx(vf,{connector:I,size:"large"}):r.jsx(kNe,{className:"icon"}),e[21]=I,e[22]=$):$=e[22];let H;e[23]!==$||e[24]!==F?(H=r.jsxs(SNe,{children:[F,$]}),e[23]=$,e[24]=F,e[25]=H):H=e[25];let z;e[26]!==o||e[27]!==u?(z=o.formatMessage({id:"XrxX7J",defaultMessage:"Ask ChatGPT anything about {name}. Get answers specific to your work, so you can plan, make decisions, and move faster."},{name:u}),e[26]=o,e[27]=u,e[28]=z):z=e[28];let K;e[29]!==o?(K=o.formatMessage({id:"/U3ta8",defaultMessage:"Get started"}),e[29]=o,e[30]=K):K=e[30];let J;e[31]!==s||e[32]!==E?(J=()=>{B.logEventWithStatsig("ChatGPT Connectors External NUX Banner CTA Clicked","chatgpt_connectors_external_nux_banner_cta_clicked"),lt(s,TNe,{onContinue:E}),gt.setItem(Ue.ConnectorsExternalNuxBannerDismissed,!0)},e[31]=s,e[32]=E,e[33]=J):J=e[33];let Z;e[34]!==K||e[35]!==J?(Z={primaryAction:{text:K,onClick:J}},e[34]=K,e[35]=J,e[36]=Z):Z=e[36];let q;return e[37]!==H||e[38]!==z||e[39]!==Z||e[40]!==D?(q=r.jsx(TU,{onShow:INe,onDismiss:ANe,icon:H,title:D,description:z,actions:Z}),e[37]=H,e[38]=z,e[39]=Z,e[40]=D,e[41]=q):q=e[41],q}function ANe(){B.logEventWithStatsig("ChatGPT Connectors External NUX Banner Dismissed","chatgpt_connectors_external_nux_banner_dismissed"),gt.setItem(Ue.ConnectorsExternalNuxBannerDismissed,!0)}function INe(){B.logEventWithStatsig("ChatGPT Connectors External NUX Banner Shown","chatgpt_connectors_external_nux_banner_shown")}function jNe(){gt.setItem(Ue.HasClickedCompanyKnowledgePill,new Date().toISOString())}const NNe=R(()=>P(()=>Promise.resolve().then(()=>a_),void 0),{loading:t=>O(t)}),PNe=R(()=>P(()=>Promise.resolve().then(()=>BO),void 0).then(t=>t.AdminInviteModal)),A2=be({title:{id:"4LuIsp",defaultMessage:"Invite your districts teachers for free"},description:{id:"INXOVE",defaultMessage:"ChatGPT Edu is free for verified educators and staff in your district. Send invites so fellow teachers can collaborateonly colleagues from your district can join."},cta:{id:"FBIXg9",defaultMessage:"Invite fellow teachers"}});function Tk(t){t&&gt.setItem(Ue.K12InviteBannerDismissed,!0,{workspaceId:t})}function Unt(){"use forget";const t=G.c(23),e=V(),n=ne(),s=Cn();let o;t[0]!==s?(o=s==null?void 0:s.getWorkspaceId(),t[0]=s,t[1]=o):o=t[1];const a=o;if(!s||!a)return null;let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("div",{className:"bg-token-main-surface-secondary text-token-text-primary flex size-12 items-center justify-center rounded-full",children:r.jsx(NNe,{className:"icon-md text-[#5D5BD0]","aria-hidden":!0})}),t[2]=i):i=t[2];let l;t[3]!==n?(l=n.formatMessage(A2.title),t[3]=n,t[4]=l):l=t[4];let c;t[5]!==n?(c=n.formatMessage(A2.description),t[5]=n,t[6]=c):c=t[6];let d;t[7]!==n?(d=n.formatMessage(A2.cta),t[7]=n,t[8]=d):d=t[8];let u;t[9]!==s||t[10]!==e||t[11]!==a?(u=()=>{B.logEventWithStatsig("K12 Invite Banner: CTA Clicked","chatgpt_k12_invite_banner_cta_clicked"),Tk(a),lt(e,PNe,{workspace:s})},t[9]=s,t[10]=e,t[11]=a,t[12]=u):u=t[12];let f;t[13]!==d||t[14]!==u?(f={primaryAction:{text:d,onClick:u}},t[13]=d,t[14]=u,t[15]=f):f=t[15];let m;t[16]!==a?(m=()=>{B.logEventWithStatsig("K12 Invite Banner: Dismissed","chatgpt_k12_invite_banner_dismissed"),Tk(a)},t[16]=a,t[17]=m):m=t[17];let p;return t[18]!==l||t[19]!==c||t[20]!==f||t[21]!==m?(p=r.jsx(TU,{icon:i,title:l,description:c,actions:f,onShow:RNe,onDismiss:m}),t[18]=l,t[19]=c,t[20]=f,t[21]=m,t[22]=p):p=t[22],p}function RNe(){B.logEventWithStatsig("K12 Invite Banner: Shown","chatgpt_k12_invite_banner_shown")}function $nt(t){"use forget";var p,g,h,x;const e=G.c(9),{skip:n}=t,s=n===void 0?!1:n,o=Cn();let a,i,l,c,d;e[0]!==o?(d=o==null?void 0:o.getWorkspaceId(),i=o===void 0,a=(g=(p=o==null?void 0:o.canInviteMembers)==null?void 0:p.call(o))!=null?g:!1,l=(x=(h=o==null?void 0:o.isK12)==null?void 0:h.call(o))!=null?x:!1,c=d!=null&&gt.getItem(Ue.K12InviteBannerDismissed,{workspaceId:d})===!0,e[0]=o,e[1]=a,e[2]=i,e[3]=l,e[4]=c,e[5]=d):(a=e[1],i=e[2],l=e[3],c=e[4],d=e[5]);const f=!s&&!i&&!!d&&l&&a&&!c;let m;return e[6]!==i||e[7]!==f?(m={shouldShow:f,isLoading:i},e[6]=i,e[7]=f,e[8]=m):m=e[8],m}class Vnt{constructor(e){Q(this,"config");Q(this,"localStorageKey");this.config=e,this.localStorageKey=e.localStorageKey}getState(){const e=gt.getItem(this.localStorageKey)||{lastShown:null,showCount:0,shownTimestamps:[]};return Array.isArray(e.shownTimestamps)||(e.shownTimestamps=[]),e}setState(e){gt.setItem(this.localStorageKey,e)}getShownTimes(){return this.getState().showCount}shouldShow(){const e=this.getState(),n=Date.now();if(this.config.termination.maxShows!==void 0&&e.showCount>=this.config.termination.maxShows||this.config.termination.customCondition&&this.config.termination.customCondition())return!1;const s=this.config.schedule.maxShowsPerInterval;if(s!==void 0){const o=n-this.config.schedule.intervalMs;if((e.shownTimestamps||[]).filter(i=>i>=o).length>=s)return!1}else if(e.lastShown!=null&&n-e.lastShown<this.config.schedule.intervalMs)return!1;return!0}recordShown(){const e=this.getState(),n=Date.now();let s=Array.isArray(e.shownTimestamps)?e.shownTimestamps:[];const o=n-this.config.schedule.intervalMs;s=s.filter(a=>a>=o),s.push(n),this.setState({lastShown:n,showCount:e.showCount+1,shownTimestamps:s})}reset(){gt.setItem(this.localStorageKey,{lastShown:null,showCount:0,shownTimestamps:[]})}}const I2=R(()=>P(()=>import("./idxkrx2slxhzm8qh.js"),__vite__mapDeps([255,1])),{loading:t=>O(t)}),j2=R(()=>P(()=>import("./l9as1ndnevgs02tf.js"),__vite__mapDeps([256,1])),{loading:t=>O(t)}),N2=R(()=>P(()=>import("./e2n6syult3e6hs2j.js"),__vite__mapDeps([446,1])),{loading:t=>O(t)}),Wi=R(()=>P(()=>import("./b45jol6jjw62r4vk.js"),__vite__mapDeps([447,1])),{loading:t=>O(t)}),P2=R(()=>P(()=>import("./e9c4tgzw8sr4ptnc.js"),__vite__mapDeps([259,1])),{loading:t=>O(t)}),pc=R(()=>P(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([35,1])),{loading:t=>O(t)}),LNe=R(()=>P(()=>import("./blthqd9nl25rhbvi.js"),__vite__mapDeps([261,1])),{loading:t=>O(t)}),gc=R(()=>P(()=>import("./okzlvevr93wa1zvp.js"),__vite__mapDeps([37,1])),{loading:t=>O(t)}),ONe=R(()=>P(()=>import("./h48j4g76f726xzx4.js"),__vite__mapDeps([263,1])),{loading:t=>O(t)}),R2=R(()=>P(()=>import("./firqr8dqm1h7owx1.js"),__vite__mapDeps([264,1])),{loading:t=>O(t)});function Hnt(){"use forget";const t=G.c(111),e=V(),n=ne(),s=mM();let o;t[0]!==e?(o=()=>g3(e,{includeAutoConnectors:!0}),t[0]=e,t[1]=o):o=t[1];const a=ae(o),i=!a;let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l={includeAutoConnectors:!0},t[2]=l):l=t[2];const{connectedTypes:c,isLoading:d}=w3(l),{isLoading:u,internalKnowledgeConfigs:f}=hq();let m;t[3]!==f||t[4]!==s?(m=s&&(f==null?void 0:f.some(YNe)),t[3]=f,t[4]=s,t[5]=m):m=t[5];const p=!!m;let g;t[6]!==f||t[7]!==s?(g=s&&(f==null?void 0:f.some(qNe)),t[6]=f,t[7]=s,t[8]=g):g=t[8];const h=!!g,x=ys(),v=zNe,y=GNe,b=VNe,C=$Ne;let S;t[9]!==n?(S=n.formatMessage({id:"9jtvbx",defaultMessage:"Describe and suggest improvements to my email style"}),t[9]=n,t[10]=S):S=t[10];let k;t[11]!==n?(k=n.formatMessage({id:"PjZmLV",defaultMessage:"Describe and suggest improvements to my email style"}),t[11]=n,t[12]=k):k=t[12];let E;t[13]===Symbol.for("react.memo_cache_sentinel")?(E={connectors:{[bt.GMAIL_CONNECTOR]:gc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Wi}},t[13]=E):E=t[13];let T;t[14]!==S||t[15]!==k?(T={type:Je.Starter,title:S,prompt:k,theme:Sn.Slurm,data:E,body:""},t[14]=S,t[15]=k,t[16]=T):T=t[16];let M;t[17]!==n?(M=n.formatMessage({id:"gmFv/2",defaultMessage:"Summarize my unread emails"}),t[17]=n,t[18]=M):M=t[18];let A;t[19]!==n?(A=n.formatMessage({id:"/lt8RC",defaultMessage:"Summarize my unread emails"}),t[19]=n,t[20]=A):A=t[20];let I;t[21]===Symbol.for("react.memo_cache_sentinel")?(I={connectors:{[bt.GMAIL_CONNECTOR]:gc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Wi}},t[21]=I):I=t[21];let N;t[22]!==M||t[23]!==A?(N={type:Je.Starter,title:M,prompt:A,theme:Sn.Slurm,data:I,body:""},t[22]=M,t[23]=A,t[24]=N):N=t[24];let L;t[25]!==n?(L=n.formatMessage({id:"rMKyX2",defaultMessage:"Give me an overview of a project or customer"}),t[25]=n,t[26]=L):L=t[26];let D;t[27]!==n?(D=n.formatMessage({id:"5hS/7U",defaultMessage:"Give me an overview of a project or customer"}),t[27]=n,t[28]=D):D=t[28];let F;t[29]===Symbol.for("react.memo_cache_sentinel")?(F={connectors:{[bt.GDRIVE_ACTION_CONNECTOR]:pc,[bt.GMAIL_CONNECTOR]:gc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Wi,[bt.HUBSPOT_CONNECTOR]:P2,[bt.DROPBOX_CONNECTOR]:R2,[bt.NOTION_CONNECTOR]:I2,[bt.SHAREPOINT_CONNECTOR]:N2,[bt.TEAMS_CONNECTOR]:j2},syncConnectors:{[Zi.gdrive_sync_connector]:pc}},t[29]=F):F=t[29];let $;t[30]!==L||t[31]!==D?($={type:Je.Starter,title:L,prompt:D,theme:Sn.Slurm,data:F,body:""},t[30]=L,t[31]=D,t[32]=$):$=t[32];let H;t[33]!==n?(H=n.formatMessage({id:"c9CBw8",defaultMessage:"Find me the top three most relevant documents on a project"}),t[33]=n,t[34]=H):H=t[34];let z;t[35]!==n?(z=n.formatMessage({id:"NYPKci",defaultMessage:"Find me the top three most relevant documents on a project"}),t[35]=n,t[36]=z):z=t[36];let K;t[37]===Symbol.for("react.memo_cache_sentinel")?(K={connectors:{[bt.GDRIVE_ACTION_CONNECTOR]:pc,[bt.GMAIL_CONNECTOR]:gc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Wi,[bt.HUBSPOT_CONNECTOR]:P2,[bt.DROPBOX_CONNECTOR]:R2,[bt.NOTION_CONNECTOR]:I2,[bt.SHAREPOINT_CONNECTOR]:N2,[bt.TEAMS_CONNECTOR]:j2},syncConnectors:{[Zi.gdrive_sync_connector]:pc}},t[37]=K):K=t[37];let J;t[38]!==H||t[39]!==z?(J={type:Je.Starter,title:H,prompt:z,theme:Sn.Slurm,data:K,body:""},t[38]=H,t[39]=z,t[40]=J):J=t[40];let Z;t[41]!==n?(Z=n.formatMessage({id:"bh3D+B",defaultMessage:"Review my most recent PR"}),t[41]=n,t[42]=Z):Z=t[42];let q;t[43]!==n?(q=n.formatMessage({id:"MQvW9m",defaultMessage:"Review my most recent PR"}),t[43]=n,t[44]=q):q=t[44];let se;t[45]===Symbol.for("react.memo_cache_sentinel")?(se={connectors:{[bt.GITHUB_CONNECTOR]:ONe}},t[45]=se):se=t[45];let ie;t[46]!==Z||t[47]!==q?(ie={type:Je.Starter,title:Z,prompt:q,theme:Sn.Slurm,data:se,body:""},t[46]=Z,t[47]=q,t[48]=ie):ie=t[48];let ee;t[49]!==n?(ee=n.formatMessage({id:"eb79eJ",defaultMessage:"What changed in the projects that Im working on"}),t[49]=n,t[50]=ee):ee=t[50];let le;t[51]!==n?(le=n.formatMessage({id:"Q+eKmx",defaultMessage:"What changed in the projects that Im working on"}),t[51]=n,t[52]=le):le=t[52];let X;t[53]===Symbol.for("react.memo_cache_sentinel")?(X={connectors:{[bt.GDRIVE_ACTION_CONNECTOR]:pc,[bt.GMAIL_CONNECTOR]:gc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Wi,[bt.HUBSPOT_CONNECTOR]:P2,[bt.DROPBOX_CONNECTOR]:R2,[bt.NOTION_CONNECTOR]:I2,[bt.SHAREPOINT_CONNECTOR]:N2,[bt.TEAMS_CONNECTOR]:j2},syncConnectors:{[Zi.gdrive_sync_connector]:pc}},t[53]=X):X=t[53];let te;t[54]!==ee||t[55]!==le?(te={type:Je.Starter,title:ee,prompt:le,theme:Sn.Slurm,data:X,body:""},t[54]=ee,t[55]=le,t[56]=te):te=t[56];let ce;t[57]!==n?(ce=n.formatMessage({id:"BZuK5N",defaultMessage:"Find all emails about a project or customer"}),t[57]=n,t[58]=ce):ce=t[58];let ue;t[59]!==n?(ue=n.formatMessage({id:"S/AOrO",defaultMessage:"Find all emails about a project or customer"}),t[59]=n,t[60]=ue):ue=t[60];let me;t[61]===Symbol.for("react.memo_cache_sentinel")?(me={connectors:{[bt.GMAIL_CONNECTOR]:gc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Wi}},t[61]=me):me=t[61];let xe;t[62]!==ce||t[63]!==ue?(xe={type:Je.Starter,title:ce,prompt:ue,theme:Sn.Slurm,data:me,body:""},t[62]=ce,t[63]=ue,t[64]=xe):xe=t[64];let pe;t[65]!==n?(pe=n.formatMessage({id:"DtUTpV",defaultMessage:"Brief me on this weeks meetings"}),t[65]=n,t[66]=pe):pe=t[66];let Ee;t[67]!==n?(Ee=n.formatMessage({id:"NoHU2S",defaultMessage:"Brief me on this weeks meetings"}),t[67]=n,t[68]=Ee):Ee=t[68];let Se;t[69]===Symbol.for("react.memo_cache_sentinel")?(Se={connectors:{[bt.GOOGLE_CONTACTS_CONNECTOR]:LNe,[bt.OUTLOOK_CALENDAR_CONNECTOR]:Wi}},t[69]=Se):Se=t[69];let Te;t[70]!==pe||t[71]!==Ee?(Te={type:Je.Starter,title:pe,prompt:Ee,theme:Sn.Slurm,data:Se,body:""},t[70]=pe,t[71]=Ee,t[72]=Te):Te=t[72];let Ne;t[73]!==N||t[74]!==$||t[75]!==J||t[76]!==ie||t[77]!==te||t[78]!==xe||t[79]!==Te||t[80]!==T?(Ne=[T,N,$,J,ie,te,xe,Te],t[73]=N,t[74]=$,t[75]=J,t[76]=ie,t[77]=te,t[78]=xe,t[79]=Te,t[80]=T,t[81]=Ne):Ne=t[81];const De=Ne,de=i||d||u;if(de){let re;t[82]===Symbol.for("react.memo_cache_sentinel")?(re=[],t[82]=re):re=t[82];let ve;return t[83]!==de?(ve={prompts:re,isLoading:de},t[83]=de,t[84]=ve):ve=t[84],ve}if(x===Pe.Slurm){let re,ve,Me;if(t[85]!==De||t[86]!==c||t[87]!==h||t[88]!==de){Me=Symbol.for("react.early_return_sentinel");e:{if(re=De.filter(Le=>{const{connectors:Ae,syncConnectors:He}=v(Le),Qe=Object.keys(Ae).some(at=>[...c].some(vt=>vt===at)),ht=!!He[Zi.gdrive_sync_connector];return Qe||ht&&h}),re.length<3){let Le;t[92]===Symbol.for("react.memo_cache_sentinel")?(Le=[],t[92]=Le):Le=t[92];let Ae;t[93]!==de?(Ae={prompts:Le,isLoading:de},t[93]=de,t[94]=Ae):Ae=t[94],Me=Ae;break e}re.sort(UNe),ve=re.slice(0,4).map(Le=>{const{connectors:Ae,syncConnectors:He}=v(Le),Qe=b(Ae,He,{mode:"connected",connectedTypes:new Set([...c]),hasGdriveSync:h});return U(w({},Le),{trailing:y(Qe)})})}t[85]=De,t[86]=c,t[87]=h,t[88]=de,t[89]=re,t[90]=ve,t[91]=Me}else re=t[89],ve=t[90],Me=t[91];if(Me!==Symbol.for("react.early_return_sentinel"))return Me;re=ve;let $e;return t[95]!==de||t[96]!==re?($e={prompts:re,isLoading:de},t[95]=de,t[96]=re,t[97]=$e):$e=t[97],$e}let oe,we,Ce;if(t[98]!==De||t[99]!==a||t[100]!==p||t[101]!==de){Ce=Symbol.for("react.early_return_sentinel");e:{if(oe=De.filter(re=>{const{connectors:ve,syncConnectors:Me}=v(re),$e=new Set(a.map(BNe)),Le=Object.keys(ve).some(He=>$e.has(He)),Ae=!!Me[Zi.gdrive_sync_connector];return Le||Ae&&p}),oe.length<3){let re;t[105]===Symbol.for("react.memo_cache_sentinel")?(re=[],t[105]=re):re=t[105];let ve;t[106]!==de?(ve={prompts:re,isLoading:de},t[106]=de,t[107]=ve):ve=t[107],Ce=ve;break e}oe.sort(FNe),we=oe.slice(0,4).map((re,ve)=>{var He;const Me="#settings/".concat(Rn.Connectors,"?referrer=").concat(pa.SuggestedPrompts),{connectors:$e,syncConnectors:Le}=v(re),Ae=b($e,Le,{mode:"available",availableTypes:new Set(a.map(DNe)),hasGdriveSync:p});return U(w({},re),{theme:Sn.ContextualAnswersNUX,trailing:y(Ae),data:{link:Me,id:(He=re.data)==null?void 0:He.id,position:ve.toString()},onSelectOverride:C})})}t[98]=De,t[99]=a,t[100]=p,t[101]=de,t[102]=oe,t[103]=we,t[104]=Ce}else oe=t[102],we=t[103],Ce=t[104];if(Ce!==Symbol.for("react.early_return_sentinel"))return Ce;oe=we;let fe;return t[108]!==de||t[109]!==oe?(fe={prompts:oe,isLoading:de},t[108]=de,t[109]=oe,t[110]=fe):fe=t[110],fe}function DNe(t){return t.type}function FNe(){return Math.random()-.5}function BNe(t){return t.type}function UNe(){return Math.random()-.5}function $Ne(t,e){var n,s;if(e.type===Je.Starter&&(e.theme===Sn.ContextualAnswersNUX||e.theme===Sn.Slurm)){const{data:o}=e,{link:a}=o;window.location.hash=a+"&suggestedPromptsText=".concat(encodeURIComponent(e.prompt)),B.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_selected","chatgpt_contextual_answers_recommended_prompt_selected",{prompt_id:(n=e.data)==null?void 0:n.id,prompt_position:(s=e.data)==null?void 0:s.position}),t.preventDefault();return}}function VNe(t,e,n){const s=[],o=!!(e!=null&&e[Zi.gdrive_sync_connector]);o&&n.hasGdriveSync&&s.push(e[Zi.gdrive_sync_connector]);const a=i=>n.mode==="connected"?n.connectedTypes.has(i):n.availableTypes.has(i);for(const i of Object.keys(t))o&&n.hasGdriveSync&&i===bt.GDRIVE_ACTION_CONNECTOR||a(i)&&s.push(t[i]);return s.sort(HNe),s}function HNe(){return Math.random()-.5}function GNe(t){return r.jsx("div",{className:"flex flex-1 items-center justify-end gap-1",children:t.filter(Boolean).slice(0,3).map(WNe)})}function WNe(t,e){return r.jsx("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center rounded-full",children:r.jsx(t,{className:"h-full w-full"})},e)}function zNe(t){var n,s,o;const e=(n=t.data)!=null?n:{};return{connectors:(s=e.connectors)!=null?s:{},syncConnectors:(o=e.syncConnectors)!=null?o:{}}}function qNe(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function YNe(t){return t.user_connection_details.auth_status==="not_connected"}const MU=()=>{"use forget";const t=G.c(13),e=V();let n;t[0]!==e?(n=o3(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==e?(o=()=>T3(e),t[2]=e,t[3]=o):o=t[3];const a=ae(o);let i;t[4]!==e?(i=()=>Ih(e),t[4]=e,t[5]=i):i=t[5];const l=ae(i),c=!l;let d;t[6]!==e?(d=()=>Vs(e),t[6]=e,t[7]=d):d=t[7];const u=ae(d);let f;t[8]!==u?(f=u==null?void 0:u.some(ZNe),t[8]=u,t[9]=f):f=t[9];const m=f;let p;e:{if(a!=null&&a.some(KNe)){p=!0;break e}if(l&&l.length>0){p=!0;break e}p=!1}const h=s&&m&&p,x=c||!u;let v;return t[10]!==h||t[11]!==x?(v={available:h,isLoading:x},t[10]=h,t[11]=x,t[12]=v):v=t[12],v};function ZNe(t){return t.systemHint==="glaux"}function KNe(t){return t.status!=="DISABLED_BY_ADMIN"}async function QNe(t,e=4){if(e<1)return[];try{const n=b4(t),s=XNe(t);return(await ge.safeGet("/templated_prompts/suggestions",{parameters:{query:{limit:e,mode:s,bypass_cache:n.get("bypass_cache",!1)}}})).suggestions.filter(a=>typeof a.prompt=="string"&&a.prompt.length>0).slice(0,e).map(a=>{var i;return{type:Je.Templated,title:(i=a.description)!=null?i:"Dynamic Prompt",body:a.prompt,prompt:a.prompt,id:a.id,oneliner:a.name,theme:Sn.TemplatedPrompts,source:"CURATED"}})}catch(n){return[]}}function Gnt(t,e){"use forget";const n=G.c(9),s=V();let o;n[0]!==t?(o=["dynamic-prompt-suggestions",t],n[0]=t,n[1]=o):o=n[1];let a;n[2]!==s||n[3]!==t?(a=()=>QNe(s,t),n[2]=s,n[3]=t,n[4]=a):a=n[4];let i;return n[5]!==e||n[6]!==o||n[7]!==a?(i={queryKey:o,enabled:e,staleTime:3e5,queryFn:a},n[5]=e,n[6]=o,n[7]=a,n[8]=i):i=n[8],rt(i)}const Wnt=()=>{const t=V(),e=Cn(),{available:n,isLoading:s}=MU();return!!(e!=null&&e.isWorkspacePlan())&&!n&&!s&&JNe(t)},b4=t=>Ps(t,"2538364663");function JNe(t){return b4(t).get("enabled",!1)}function XNe(t){const n=b4(t).get("mode","static");return n==="dynamic"||n==="static"?n:"static"}function znt(t){"use forget";const e=G.c(6),n=V();let s;e[0]!==n?(s=Oa(n),e[0]=n,e[1]=s):s=e[1];const o=s;let a,i;e[2]!==t||e[3]!==o?(a=()=>Ea(()=>o.isFeedbackModalOpen$()&&o.shouldAutoSendCompletion$(),l=>{if(!l)return;o.shouldAutoSendCompletion$.set(!1);const c=o.autoSendCompletion;setTimeout(()=>{var d;c&&c.targetedReply&&t({eventSource:"mouse",promptMessage:ls(c.userMessage,{targeted_reply:(d=c.targetedReply)!=null?d:void 0}),appendMessages:[Rh(c.targetedReply)]})},250)},{fireImmediately:!0}),i=[o,t],e[2]=t,e[3]=o,e[4]=a,e[5]=i):(a=e[4],i=e[5]),_.useEffect(a,i)}const qnt=()=>{"use forget";const t=G.c(3),e=Ao();let n,s;t[0]!==e?(n=()=>{if(e)return Ea(()=>{var l;const o=ja(e);if(!o||_q(e))return;const a=(l=So(el(e)))==null?void 0:l.messages.find(ePe),i="messageId"in o&&iM(e,c=>c.id===o.messageId)==null;return[a,i]},o=>{if(!o)return;const[a,i]=o,l=ja(e);if((Ht(l,"searchSources")||Ht(l,"retrievalResults"))&&a&&l.messageId!==a.id){const c=el(e).length-1,d=a.id,f=Fh(a).some(tPe)?{type:"retrievalResults",turnIndex:c,messageId:d}:{type:"searchSources",turnIndex:c,messageId:d,scrollToHeader:Ht(l,"searchSources")?l.scrollToHeader:void 0};Xb(e,f)}else i&&!Ht(l,"entity")&&j1(e)},{equals:El})},s=[e],t[0]=e,t[1]=n,t[2]=s):(n=t[1],s=t[2]),_.useEffect(n,s)};function ePe(t){return t.status!=="in_progress"&&Fh(t).length>0}function tPe(t){return t.type==="file"||t.type==="file_navlist"}const AU="ChatGPT";function nPe(t,e){const[n]=Ve(t,s=>{var o;return[(o=s==null?void 0:s.title)!=null?o:null]});return _.useMemo(()=>sPe(t,n,e),[t,e,n])}function sPe(t,e,n){const s=Cr(t);return n&&n.kind===wt.GizmoInteraction&&n.gizmo?s?"ChatGPT - ".concat(n.gizmo.gizmo.display.name):e&&"".concat(n.gizmo.gizmo.display.name," - ").concat(e):e||AU}function Ynt(t){const e=V();_.useEffect(()=>jh(e).addAction({key:"prev-message",group:Fn.Chat,keyboardBinding:[qe.Shift,qe.ArrowUp],actionMessageDescriptor:Ge({id:"N8H1CM",defaultMessage:"Previous message"}),action:n=>Mk(n,"up"),enabled:!t},{key:"next-message",group:Fn.Chat,keyboardBinding:[qe.Shift,qe.ArrowDown],actionMessageDescriptor:Ge({id:"d69Yjj",defaultMessage:"Next message"}),action:n=>Mk(n,"down"),enabled:!t}),[e,t])}function Mk(t,e){if(t.target instanceof HTMLDivElement&&t.target.isContentEditable&&t.target.textContent)return!1;const n=[...document.querySelectorAll("article[data-turn=assistant]")];let s;if(document.activeElement instanceof HTMLElement&&n.includes(document.activeElement)&&Ak(document.activeElement))s=n.indexOf(document.activeElement)+(e==="down"?1:-1);else{const o=n.findIndex(oPe);if(o===-1)return!1;s=e==="down"?o+1:Ak(n[o])?o-1:o}if(s===-1||s>=n.length)return!1;n[s].focus({preventScroll:!0}),n[s].scrollIntoView({behavior:"smooth",block:"start"})}function oPe(t){const e=t.getBoundingClientRect();return e.bottom>IU()&&e.top<window.innerHeight}function Ak(t){const e=t.getBoundingClientRect();return e.top>=IU()&&e.top<window.innerHeight}function IU(){return Math.min(200,Math.max(70,window.innerHeight*.2))}const Znt=R(()=>P(()=>import("./jr4rnsplty07ldd9.js"),__vite__mapDeps([448,1,10,11,351,352,347,348,349,350,319,0,443,222,41])).then(t=>t.ProjectHomePage));var xt=(t=>(t.Chat="chat",t.Search="search",t.Images="images",t.Videos="videos",t.News="news",t))(xt||{});const Ik="chat";function aPe(t){var e;return t&&(e=Object.values(xt).find(n=>n===t))!=null?e:Ik}function Mm(){"use forget";const t=G.c(8),[e,n]=Us();let s;if(t[0]!==e){const c=e.get(tx);s=aPe(c),t[0]=e,t[1]=s}else s=t[1];const o=s;let a;t[2]!==o||t[3]!==n?(a=c=>{const{tabType:d,options:u,extraQueryParams:f}=c,m=u===void 0?{}:u;o!==d&&n(p=>{const g=f!=null?f:new URLSearchParams,h=new URLSearchParams([...g,...p]);return h.set(tx,d),h},m)},t[2]=o,t[3]=n,t[4]=a):a=t[4];const i=a;let l;return t[5]!==i||t[6]!==o?(l=[o,i],t[5]=i,t[6]=o,t[7]=l):l=t[7],l}function Knt(t){"use forget";const e=G.c(11),n=V();let s;e[0]!==n?(s=ts(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=ae(it.wantsInitialTab$),[,i]=Mm();let l;e[2]!==o||e[3]!==i||e[4]!==a?(l=()=>{o&&a&&a!=="chat"&&(i({tabType:a,options:{replace:!0}}),it.wantsInitialTab$.set(void 0))},e[2]=o,e[3]=i,e[4]=a,e[5]=l):l=e[5];let c;e[6]!==t||e[7]!==o||e[8]!==i||e[9]!==a?(c=[a,i,o,t],e[6]=t,e[7]=o,e[8]=i,e[9]=a,e[10]=c):c=e[10],_.useEffect(l,c)}function Qnt(t){switch(t){case"answer":return"chat";case"web":return"search";case"images":return"images";case"videos":return"videos"}}function jU(t){switch(t){case"chat":return xc.ATLAS_SUPER_WIDGET_TAB_HOME;case"search":return xc.ATLAS_SUPER_WIDGET_TAB_SEARCH;case"images":return xc.ATLAS_SUPER_WIDGET_TAB_IMAGES;case"videos":return xc.ATLAS_SUPER_WIDGET_TAB_VIDEOS;case"news":return xc.ATLAS_SUPER_WIDGET_TAB_NEWS}}const Jnt=()=>{"use forget";const t=G.c(2),e=V();let n;return t[0]!==e?(n=()=>Gh()&&Dh()&&Ps(e,"43324078").get("enabled",!1),t[0]=e,t[1]=n):n=t[1],ae(n)};class ai extends wi()(n=>n){constructor(){super(...arguments);Q(this,"startReplay",n=>{this.setState(()=>({isReplayEnabled:!0,finalMessageId:n}))});Q(this,"endReplay",()=>{this.setState(()=>({isPlaying:!1,isReplayEnabled:!1,finalMessageId:null}))});Q(this,"setIsReplayEnabled",n=>{this.setState(s=>U(w({},s),{isReplayEnabled:n}))});Q(this,"toggleIsPlaying",()=>{this.setState(n=>U(w({},n),{isPlaying:!n.isPlaying}))});Q(this,"setPlaying",n=>{this.setState(s=>U(w({},s),{isPlaying:n}))});Q(this,"setSpeed",n=>{this.setState(s=>U(w({},s),{playbackSpeed:n}))})}}Q(ai,"getFinalMessageId",({finalMessageId:n})=>n),Q(ai,"isReplayInProgress",(n,s)=>n.isReplayEnabled&&n.finalMessageId!==s);function Xnt({children:t,clientThreadId:e}){const n=Ve(e,u=>!!(u!=null&&u.tree.getBranchFromLeaf(u.currentLeafId).some(f=>{var m;return(m=f.message.metadata)==null?void 0:m.n7jupd_message}))),s=Ve(e,u=>u==null?void 0:u.currentLeafId),o=!!s,l=Yh()&&n&&!!s,c=l?s:null,[d]=_.useState(()=>new ai({finalMessageId:c,isReplayEnabled:l,isPlaying:!1,playbackSpeed:1}));return _.useEffect(()=>{o&&l&&d.setState({isReplayEnabled:l,finalMessageId:c})},[o]),r.jsx(ai.Provider,{store:d,children:t})}function est(t){return Sr(t).getExperiment("3438591328").get("use_scroll_v3",!1)}const rPe=R(()=>P(()=>import("./i2fce51g7exmjyb6.js"),__vite__mapDeps([449,1])),{loading:t=>O(t)}),iPe=R(()=>P(()=>import("./fhiqz5jh4i8adn2f.js"),__vite__mapDeps([389,1])),{loading:t=>O(t)}),lPe=({onClick:t})=>{const e=ne();return r.jsx("div",{className:W("sticky top-6 z-10 flex h-0 items-start justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-top])]/thread:scale-50","group-[:not([data-scroll-from-top])]/thread:opacity-0","group-[:not([data-scroll-from-top])]/thread:pointer-events-none","group-[:not([data-scroll-from-top])]/thread:duration-100","group-[:not([data-scroll-from-top])]/thread:delay-0"),children:r.jsx(NU,{label:e.formatMessage({id:"dZQBu/",defaultMessage:"Scroll to beginning"}),onClick:t,children:r.jsx(rPe,{className:"icon text-token-text-primary min-w-8"})})})},cPe=({streamingState:t,onClick:e})=>{const n=ne();return r.jsx("div",{className:W("sticky bottom-[calc(var(--composer-overlap-px)+--spacing(6))] z-10 flex h-0 items-end justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-end])]/thread:scale-50","group-[:not([data-scroll-from-end])]/thread:opacity-0","group-[:not([data-scroll-from-end])]/thread:pointer-events-none","group-[:not([data-scroll-from-end])]/thread:duration-100","group-[:not([data-scroll-from-end])]/thread:delay-0"),children:r.jsx(NU,{label:n.formatMessage({id:"JDdG2F",defaultMessage:"Scroll to end"}),onClick:e,contentKey:t,children:r.jsxs("div",{className:"absolute end-0 flex items-center pe-1 text-nowrap",children:[t==="streaming"?r.jsx("span",{className:"loading-shimmer-pure-text ps-2.5",children:r.jsx(j,{id:"lMu1TV",defaultMessage:"Responding"})}):t==="unseen"?r.jsx("span",{className:"ps-2.5",children:r.jsx(j,{id:"mX2yAS",defaultMessage:"Done"})}):null,r.jsx(iPe,{className:"icon text-token-text-primary min-w-6"})]})})})},NU=({children:t,label:e,onClick:n,contentKey:s})=>{const o=_.useRef(null),a=_.useCallback(()=>{const i=o.current,l=i==null?void 0:i.firstElementChild;l&&(i.style.width="".concat(l.clientWidth,"px"))},[]);return _.useEffect(()=>{s!=null&&a()},[a,s]),r.jsx("button",{tabIndex:-1,onClick:n,"aria-label":e,onTransitionEnd:a,className:W("absolute flex h-8 min-w-8 cursor-pointer items-center justify-end overflow-hidden rounded-full outline-hidden select-none","motion-safe:transition-width motion-safe:duration-300","btn-secondary box-content shadow-sm sm:shadow-md dark:shadow-none!"),ref:o,children:t})},dPe="_threadRoot_1y3t0_1",uPe="_threadGutter_1y3t0_22",fPe={threadRoot:dPe,threadGutter:uPe},tst=n=>{var s=n,{clientThreadId:t}=s,e=ke(s,["clientThreadId"]);const o=s_e(),[a,i,l]=Ve(t,f=>{var m,p;return[he.isMessageTurnEnded(f),he.getRequestId(f),(p=(m=he.getConversationLastTurn(f))==null?void 0:m.messages.some(g=>o.has(g.id)))!=null?p:!1]}),d=Na(i)&&!a||l,u=r.jsx(mPe,w({isStreaming:d},e));return e.initScrolledToEnd?r.jsx(Id,{children:r.jsxs(_.Suspense,{fallback:null,children:[r.jsx(rre,{}),u]})}):u},mPe=({allowScrollToEnd:t,allowScrollToTop:e,children:n,initScrolledToEnd:s,isStreaming:o,threadFooterRef:a,threadRootRef:i})=>{const l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),u=_.useRef(null),[f]=jn(x=>[Qo(x)]),[m,p]=_.useState("seen");Xn(()=>{const x=l.current;!s||!x||(x.scrollTop=x.scrollHeight,requestAnimationFrame(()=>{x.scrollTop=x.scrollHeight,requestAnimationFrame(()=>{x.scrollTop=x.scrollHeight})}))},[]),Sm(()=>{const x=i.current,v=a.current,y=l.current,b=d.current,C=c.current;if(!x||!y||!b||!C)return;const S=jk(b,{root:y,threshold:0},M=>{On.setIsConversationScrolledFromTop(!M.isIntersecting),ar(x,"data-scroll-from-top",!M.isIntersecting)}),k=Array.from({length:101},(M,A)=>A/100),E=jk(C,{root:y,threshold:k,rootMargin:"1px"},M=>{gPe(y,C),!M.isIntersecting&&PU(u)?L2(x,y):ar(x,"data-scroll-from-end",!M.isIntersecting)}),T=v&&xPe(v,M=>{x.style.setProperty("--thread-footer-height","".concat(M,"px"))});return()=>{S==null||S(),E==null||E(),T==null||T()}}),_.useEffect(()=>{const x=i.current,v=c.current,y=l.current;!t||!x||!v||!y||(ar(x,"data-stream-active",o),o&&L2(x,y),p(o?"streaming":rM(x,"data-scroll-from-end")?"unseen":"seen"),o||_Pe(u))},[o]);const g=_.useCallback(()=>{const x=i.current,v=l.current;!x||!v||pPe(x,v)},[i]),h=_.useCallback(()=>{Ye.logEvent("chatgpt_thread_scroll_to_bottom");const x=i.current,v=l.current,y=c.current;!x||!v||!y||(L2(x,v),o?hPe(x,u):p("seen"))},[o,i]);return r.jsxs("div",{className:W("@container h-full overflow-y-auto [scrollbar-gutter:stable_both-edges] group-data-stream-active/thread:[overflow-anchor:none]",!f&&"thread-xl:pt-(--header-height)"),ref:l,children:[e&&r.jsx(lPe,{onClick:g}),r.jsx("div",{ref:d,className:"pointer-events-none w-px"}),n,r.jsx("div",{ref:c,className:W("pointer-events-none w-px",fPe.threadGutter,"min-h-[max(var(--gutter-min-height,0px),var(--gutter-remaining-height,0px))] md:[--gutter-min-height:2.25rem]","group-data-stream-active/thread:h-(--thread-end-gutter-active-height)")}),t&&r.jsx(cPe,{streamingState:m,onClick:h})]})};function pPe(t,e){ar(t,"data-scroll-from-top",!1),e==null||e.scrollTo({top:0,behavior:"smooth"})}function L2(t,e){ar(t,"data-scroll-from-end",!1),e==null||e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}function gPe(t,e){const n=t.getBoundingClientRect().bottom-e.getBoundingClientRect().top;n>0?e.style.setProperty("--gutter-remaining-height","".concat(n,"px")):e.style.removeProperty("--gutter-remaining-height")}function PU(t){return t.current!=null}function hPe(t,e){if(!PU(e)&&t){const n=()=>{e.current=null,t.removeEventListener("wheel",n),t.removeEventListener("pointerdown",n)};e.current=n,t.addEventListener("wheel",n,{passive:!0}),t.addEventListener("pointerdown",n)}}function _Pe(t){var e;(e=t.current)==null||e.call(t)}function jk(t,e,n){const s=new IntersectionObserver(o=>{n(o[o.length-1])},e);return s.observe(t),()=>s.disconnect()}function xPe(t,e){const n=()=>e(t.getBoundingClientRect().height);n();const s=new ResizeObserver(n);return s.observe(t),()=>s.disconnect()}function yPe({id:t,name:e,checked:n,onChange:s=rs}){return r.jsx("input",{className:"sr-only",checked:n,id:t,name:e,type:"checkbox",readOnly:!0,onChange:s})}function nst(t){"use forget";const e=G.c(8),{gizmo:n}=t;let s;e[0]!==n?(s=n?wM(n.tools):!1,e[0]=n,e[1]=s):s=e[1];const o=s;let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsxs("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]","data-testid":"temporary-chat-label",children:[r.jsx(yPe,{id:"temporary-chat-checkbox",name:"temporary-chat-checkbox",checked:!0}),r.jsx(j,w({},Pc.temporaryChat))]}),e[2]=a):a=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(bPe,{}),e[3]=i):i=e[3];let l;e[4]!==o?(l=o&&r.jsx("div",{className:"mt-3",children:r.jsx(j,U(w({},Pc.temporaryChatDescriptionGptActions),{values:{link:vPe}}))}),e[4]=o,e[5]=l):l=e[5];let c;return e[6]!==l?(c=r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a,r.jsxs("div",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-[24rem] text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:[i,l]})]}),e[6]=l,e[7]=c):c=e[7],c}function vPe(t){return r.jsx("a",{href:"https://help.openai.com/en/articles/8914046-temporary-chat-faq",target:"_blank",className:"underline",rel:"noreferrer",children:t})}function bPe(){"use forget";const t=G.c(2),e=V(),n=et(e),s=n==null?void 0:n.isWorkspaceAccount(),o=Vd(),a=s?o?Pc.temporaryChatBizMemoryAvailable:Pc.temporaryChatBizMemoryUnavailable:o?Pc.temporaryChatDescriptionMemoryAvailable:Pc.temporaryChatDescriptionMemoryUnavailable;let i;return t[0]!==a?(i=r.jsx(j,w({},a)),t[0]=a,t[1]=i):i=t[1],i}const Pc=be({temporaryChat:{id:"GizmoLanding.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatBizMemoryAvailable:{id:"otDmKh",defaultMessage:"Memory is disabled for this chat, and it wont appear in your history."},temporaryChatBizMemoryUnavailable:{id:"fQmbtG",defaultMessage:"This chat won't appear your conversation history."},temporaryChatDescriptionMemoryAvailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryAvailable",defaultMessage:"This chat won't appear in history, use or update ChatGPT's memory, or be used to train our models. For safety purposes, we may keep a copy of this chat for up to 30 days."},temporaryChatDescriptionMemoryUnavailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryUnavailable",defaultMessage:"This chat won't appear in history or be used to train our models. For safety purposes, we may keep a copy of this chat for up to 30 days."},temporaryChatDescriptionGptActions:{id:"GizmoLanding.temporaryChatDescriptionGptActions",defaultMessage:"Any data shared with a third party through GPT actions are subject to the third party's privacy policy. <link>Learn more</link>"}});function CPe(t){"use forget";const e=G.c(5),{safetyLimited:n}=t,s=V(),o=w1(),a=ot();if(n){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(j,{id:"5QWLgm",defaultMessage:"<heading>We've limited access to this content for safety reasons.</heading>This type of information may be used to benefit or to harm people. We are continuously refining our work in this area, and you can read more about our approach in our <blogLink>blog post</blogLink> and <modelSpecLink>Model Spec</modelSpecLink>.",values:{heading:EPe,blogLink:kPe,modelSpecLink:wPe}}),e[0]=l):l=e[0],l}let i;return e[1]!==s||e[2]!==a||e[3]!==o?(i=r.jsx(j,{id:"4vDLZ8",defaultMessage:"This chat may violate our <contentPolicyLink>usage policies</contentPolicyLink> and has been closed. <startNewChatLink>Start a new chat</startNewChatLink>.",values:{contentPolicyLink:SPe,startNewChatLink:l=>ts(s)?r.jsx("button",{type:"button",onClick:()=>{Mr(a,{replace:location.pathname==="/"})},className:"underline hover:no-underline",children:l}):r.jsx(Eo,{to:"/",state:o,onClick:c=>{VP(s,c,{location:"Content violation"})},className:"underline hover:no-underline",children:l})}}),e[1]=s,e[2]=a,e[3]=o,e[4]=i):i=e[4],i}function SPe(t){return r.jsx("a",{href:"https://openai.com/policies/usage-policies",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function wPe(t){return r.jsx("a",{href:"https://openai.com/index/introducing-the-model-spec/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function kPe(t){return r.jsx("a",{href:"https://openai.com/index/preparing-for-future-ai-capabilities-in-biology/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function EPe(t){return r.jsx("h4",{className:"text-base font-bold",children:t})}function sst({safetyLimited:t}){return r.jsx("div",{className:"flex flex-col items-center justify-center gap-4 pt-8",children:r.jsx(Ir,{children:r.jsx(l5,{type:"danger",className:"mb-2 w-fit self-start",children:r.jsx(CPe,{safetyLimited:t})})})})}const TPe=R(()=>P(()=>import("./eblm0a618bl6wf18.js"),__vite__mapDeps([450,1])),{loading:t=>O(t)});function MPe(t,e){var s;const n=(s=t!=null?t:e)!=null?s:0;return W(t!=null&&t!=e&&"opacity-50 dark:opacity-60",n>4?"text-brand-purple":n>3?"text-green-500":n>2?"text-yellow-500":n>1?"text-orange-500":"text-red-500")}function APe(t){switch(t){case 1:return Ls.hoverRating1;case 2:return Ls.hoverRating2;case 3:return Ls.hoverRating3;case 4:return Ls.hoverRating4;case 5:return Ls.hoverRating5}}function IPe(t){return rt({queryFn:async()=>R3.getUserReview(t),queryKey:["gizmo","review",{gizmoId:t}],enabled:t!=null})}const C4=({rating:t,onRating:e,className:n})=>{const[s,o]=_.useState(),a=ne();return r.jsx("div",{className:W("flex flex-row",n),children:[1,2,3,4,5].map(i=>{var u;const l=r.jsx(TPe,{className:W("icon-2xl cursor-pointer",((u=s!=null?s:t)!=null?u:0)>=i?MPe(s,t):"text-token-main-surface-tertiary")}),c=APe(s!=null?s:0),d=c&&a.formatMessage(c);return r.jsx("div",{onClick:()=>{e(i)},onMouseEnter:()=>{o(i)},onMouseLeave:()=>{o(void 0)},className:"p-1",children:c?r.jsx(_t,{label:d,side:"top",children:l}):l},i)})})},jPe=({gizmo:t,onClose:e})=>{var v,y,b;const n=cn(),s=ne(),o=Ut(),[a,i]=_.useState(""),[l,c]=_.useState(!1),[d,u]=_.useState(),f=IPe(t.gizmo.id),m=pM(t.gizmo.id),p=d===((v=f.data)==null?void 0:v.rating);_.useEffect(()=>{f.data!=null&&d==null&&u(f.data.rating)},[f.data,d]),_.useEffect(()=>{B.logEvent("Show Rating Modal",{gizmo_id:t.gizmo.id})},[t.gizmo.id]);const g=f.data!=null,h=!((y=t.gizmo.tags)!=null&&y.includes(lg.FirstParty))&&t.gizmo.author.will_receive_support_emails,x=(b=t.gizmo.tags)==null?void 0:b.includes(lg.Workspace);return r.jsx(Mt,{testId:"modal-gizmo-review",type:"success",title:r.jsxs("div",{children:[r.jsx(j,w({},Ls.title)),r.jsxs("div",{className:"align-end mt-2 flex text-sm font-normal",children:[g?r.jsx(j,w({},Ls.subtitleChange)):r.jsx(j,w({},Ls.subtitle)),r.jsx(_t,{label:s.formatMessage(x?Ls.subtitleTooltipPrivate:Ls.subtitleTooltip),className:"ms-1 flex cursor-pointer items-center ps-1",children:r.jsx("div",{className:"icon-xs border-token-text-tertiary text-token-text-tertiary flex items-center justify-center rounded-full border text-[8px] font-bold",children:"i"})})]})]}),isOpen:!0,onClose:e,size:"custom",showCloseButton:!0,className:"max-w-xl overflow-y-auto",hideSeparator:!0,children:r.jsxs("div",{className:"flex grow flex-col space-y-8",children:[r.jsx(C4,{rating:d,onRating:u,className:"mx-auto flex flex-row items-center"}),h&&r.jsxs("div",{children:[r.jsx(mU,{className:"mb-1 w-full resize-none overflow-y-auto rounded-md bg-transparent focus:border-gray-200 focus:ring-gray-200 dark:focus:border-white dark:focus:ring-white",placeholder:s.formatMessage(Ls.messagePlaceholder),value:a,rows:1,onChange:C=>i(C.target.value)}),r.jsxs("div",{className:W("flex flex-row items-center space-x-2 self-start",a.length>0?"text-token-text-primary":"text-token-text-tertiary"),children:[r.jsx("input",{type:"checkbox",className:"rounded-sm",checked:l,onChange:C=>c(C.target.checked)}),n&&r.jsx("span",{className:"text-sm",children:r.jsx(j,U(w({},Ls.includeFrom),{values:{email:r.jsx("strong",{children:n.email})}}))})]})]}),r.jsx(_e,{color:"primary",disabled:p,onClick:async()=>{if(d==null){o.warning("Please select a rating");return}B.logEvent("Submit Rating Modal",{gizmo_id:t.gizmo.id,rating:d}),await m.mutateAsync({rating:d,message:a.length>0?a:void 0,includeFrom:a.length>0?l:void 0}),o.success(s.formatMessage(Ls.successToast),{duration:3}),e()},children:r.jsx(j,w({},Ls.submit))})]})})},Ls=be({title:{id:"GizmoReviewModal.title",defaultMessage:"Leave Feedback"},subtitle:{id:"GizmoReviewModal.subtitle",defaultMessage:"How would you rate this GPT?"},subtitleChange:{id:"GizmoReviewModal.subtitleChange",defaultMessage:"Would you like to change your rating?"},subtitleTooltip:{id:"GizmoReviewModal.subtitleTooltip",defaultMessage:"Stars will be public and anonymous"},subtitleTooltipPrivate:{id:"GizmoReviewModal.subtitleTooltipPrivate",defaultMessage:"Stars are anonymous and will only be visible to your workspace"},messagePlaceholder:{id:"GizmoReviewModal.messagePlaceholder",defaultMessage:"Add an optional private email to the creator"},submit:{id:"GizmoReviewModal.submit",defaultMessage:"Submit"},successToast:{id:"GizmoReviewModal.successToast",defaultMessage:"Review sent"},includeFrom:{id:"GizmoReviewModal.includeFrom",defaultMessage:"Include my email address {email}"},hoverRating1:{id:"GizmoReviewModal.hoverRating1",defaultMessage:"Bad"},hoverRating2:{id:"GizmoReviewModal.hoverRating2",defaultMessage:"Okay"},hoverRating3:{id:"GizmoReviewModal.hoverRating3",defaultMessage:"Good"},hoverRating4:{id:"GizmoReviewModal.hoverRating4",defaultMessage:"Great!"},hoverRating5:{id:"GizmoReviewModal.hoverRating5",defaultMessage:"Excellent!"}}),NPe=Object.freeze(Object.defineProperty({__proto__:null,GizmoReviewSelectRating:C4,default:jPe},Symbol.toStringTag,{value:"Module"}));var LE;const Nk=mt.div(LE||(LE=ct(["m-8 flex flex-col items-center"])));function Pk(t){return r.jsx(Xe.div,w({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0,transition:{duration:.5,ease:"easeIn"}}},t))}function ost({clientThreadId:t}){const e=Ve(t,o=>o==null?void 0:o.promptGptRating),n=e==null?void 0:e.gizmoId,{data:s}=Si(n);return n==null||s==null||!d8(s)?null:r.jsx(PPe,{gizmoId:n})}function PPe({gizmoId:t}){const[e,n]=_.useState(!1),[s,o]=_.useState(!1),a=pM(t),i=async c=>{n(!0),setTimeout(()=>{o(!0)},5e3),B.logEvent("Submit Inline Rating",{gizmo_id:t,rating:c}),await a.mutateAsync({rating:c})},l=async()=>{o(!0),B.logEvent("Dismiss Inline Rating",{gizmo_id:t}),await a.mutateAsync({})};return _.useEffect(()=>{s||B.logEvent("Show Inline Rating",{gizmo_id:t})},[s,t]),s?null:e?r.jsx(Nk,{children:r.jsxs(Pk,{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"border-token-border-heavy rounded-lg border p-4",children:r.jsxs("div",{className:"flex justify-between gap-2",children:[r.jsx(j,{id:"gizmo.inlineReview.reviewLeft",defaultMessage:"Feedback sent"}),r.jsx(gn,{onClick:()=>{o(!0)}})]})}),r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(j,{id:"gizmo.inlineReview.reviewLeftSubtext",defaultMessage:'To update your rating, click "Send Feedback" in the GPT Menu'})})]})}):r.jsx(Nk,{children:r.jsxs(Pk,{className:"border-token-border-heavy flex flex-col items-center gap-4 rounded-lg border p-4",children:[r.jsxs("div",{className:"flex justify-between gap-2",children:[r.jsx(j,{id:"gizmo.inlineReview.prompt",defaultMessage:"How would you rate this GPT so far?"}),r.jsx(gn,{onClick:l})]}),r.jsx(C4,{rating:void 0,onRating:i})]})})}const S4=Be({},{name:"voiceTaskStatus",equals:()=>!1}),qc=Be([]),w4=(t,e)=>{S4.set(n=>{const s=n[t],o=typeof e=="function"?e(s):e;return o===void 0?delete n[t]:n[t]=o,n})},ast=()=>ae(()=>{const e=qc()[0];if(e)return S4()[e.id]==="pending"?e:void 0}),rst=t=>{let e=!1;return w4(t,n=>n==="pending"?(e=!0,"running"):n),e},ist=t=>{const e=wn(()=>qc());e.find(s=>t===s.id)&&(w4(t,"complete"),qc.set(e.filter(s=>s.id!==t)))},lst=t=>{const e=as(),n={id:e,command:t,timestamp:Date.now()};return Ld(()=>{qc.set([...qc(),n]),bi.debug("Current voice queue",qc()),w4(e,"pending")}),Mh(()=>S4()[e]==="complete")},RPe='defaults write com.google.Chrome NewTabPageLocation "'.concat(atob("aHR0cHM6Ly93d3cuY2hhdGdwdC5jb20vbmV3LXRhYi1wYWdl"),'"'),RU="defaults delete com.google.Chrome NewTabPageLocation 2>/dev/null || true",Hy=({content:t})=>{const[e,n]=_.useState(!1),s=Ut(),o=ne();return r.jsxs("div",{className:"bg-token-bg-tertiary relative min-w-0 rounded-sm",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[r.jsx("div",{className:"overflow-x-auto px-2 py-1",children:r.jsx("code",{className:"block min-w-0 whitespace-nowrap",children:t})}),e&&r.jsx(_e,{color:"secondary",className:"absolute! sticky end-1 top-1/2 -translate-y-1/2",size:"small",onClick:async()=>{try{await navigator.clipboard.writeText(t),s.success(o.formatMessage({id:"laoJM9",defaultMessage:"Command copied to clipboard"}))}catch(a){}},children:r.jsx(j,{id:"fmeSBG",defaultMessage:"Copy"})})]})},k4=()=>r.jsxs("div",{className:"bg-token-bg-secondary w-full flex-none animate-pulse rounded-md p-3",children:[r.jsx("div",{className:"mb-3 h-32 w-full rounded-md bg-gray-200"}),r.jsx("div",{className:"mb-2 h-4 w-3/4 rounded bg-gray-200"}),r.jsx("div",{className:"h-3 w-2/3 rounded bg-gray-200"})]}),cst=()=>gt.getItem(Ue.HomeDiscoveryDismissed)?null:r.jsx(Ir,{children:r.jsxs(l5,{isDismissible:!0,className:"w-full",onDismiss:()=>gt.setItem(Ue.HomeDiscoveryDismissed,!0),children:[r.jsx(j,{id:"ool//w",tagName:"p",defaultMessage:"Thanks for finding this page. You can set the default chrome new tab to this page by:"}),r.jsx(Hy,{content:RPe}),r.jsx(j,{id:"8+SRpS",tagName:"p",defaultMessage:"You can revert by:"}),r.jsx(Hy,{content:RU})]})});function LPe({limit:t=3}={}){const{data:e,isLoading:n,isError:s}=xq({cutId:"popular_in_my_workspace",limit:t});return{gizmos:_.useMemo(()=>{var i;return((i=e==null?void 0:e.pages)!=null?i:[]).flatMap(l=>{var c;return(c=l.list)!=null?c:[]}).flatMap(l=>{var c;return(c=l.items)!=null?c:[]}).flatMap(l=>l.resource)},[e]),isLoading:n,isError:s}}function OPe(){const{gizmos:t,isLoading:e,isError:n}=LPe();return n?null:r.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:r.jsx(j,{id:"/XUia9",defaultMessage:"Trending GPTs"})}),e&&r.jsx(r.Fragment,{children:Array.from({length:3}).map((s,o)=>r.jsx(k4,{},o))}),t.map(s=>r.jsx(DPe,{gizmo:s},s.gizmo.id))]})}function DPe({gizmo:t}){var l;const e=V(),n=ot(),s=t.gizmo.display.name,o=t.gizmo.display.description,a=(l=t.gizmo.display.profile_picture_url)!=null?l:void 0,i=()=>{const c=Mf(e,t);n(c)};return r.jsx("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:i,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Y1,{src:a,isFirstParty:!1,className:"h-10 w-10 shrink-0 rounded-md border border-gray-200 dark:border-gray-700"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h3",{className:"mb-0.5 line-clamp-1 text-sm font-medium",children:s}),o&&r.jsx("p",{className:"text-token-text-secondary line-clamp-2 text-xs",children:o})]})]})})}const FPe=R(()=>P(()=>import("./ib750dxmf2j0s8w3.js"),__vite__mapDeps([451,1,10,11])).then(t=>t.ItemDisplayModal));function LU(){"use forget";var l,c,d,u;const t=G.c(8);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["mixed-feed"],queryFn:UPe},t[0]=e):e=t[0];const n=rt(e);let s;t[1]!==((l=n.data)==null?void 0:l.items)?(s=(d=(c=n.data)==null?void 0:c.items)!=null?d:[],t[1]=(u=n.data)==null?void 0:u.items,t[2]=s):s=t[2];let o;t[3]!==s?(o=s.filter(BPe),t[3]=s,t[4]=o):o=t[4];const a=o;let i;return t[5]!==a||t[6]!==n?(i=U(w({},n),{items:a}),t[5]=a,t[6]=n,t[7]=i):i=t[7],i}function BPe(t){return t.content_type!=="survey"&&t.content_type!=="card_set"&&t.content_type!=="footer"}function UPe(){return ge.safeGet("/feed/mixed")}function dst(){"use forget";const t=G.c(3);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(WPe,{})}),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx($Pe,{})}),t[1]=n):n=t[1];let s;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsxs("div",{className:"flex w-full justify-center gap-4",children:[e,n,r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(OPe,{})})]}),t[2]=s):s=t[2],s}function $Pe(){"use forget";const t=G.c(13),{items:e,isLoading:n,isError:s}=LU();let o,a,i,l;if(t[0]!==s||t[1]!==n||t[2]!==e){l=Symbol.for("react.early_return_sentinel");e:{const d=e.filter(GPe);if(s){l=null;break e}o="flex flex-col gap-3 pe-1",t[7]!==n?(a=n&&r.jsx(r.Fragment,{children:Array.from({length:4}).map(HPe)}),t[7]=n,t[8]=a):a=t[8],i=d.map(VPe)}t[0]=s,t[1]=n,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=l}else o=t[3],a=t[4],i=t[5],l=t[6];if(l!==Symbol.for("react.early_return_sentinel"))return l;let c;return t[9]!==o||t[10]!==a||t[11]!==i?(c=r.jsxs("div",{className:o,children:[a,i]}),t[9]=o,t[10]=a,t[11]=i,t[12]=c):c=t[12],c}function VPe(t,e){return r.jsx("div",{children:r.jsx(OU,{item:t})},"".concat(t.content_type,"-").concat(e))}function HPe(t,e){return r.jsx(k4,{},e)}function GPe(t){var e,n;return t.content_type==="card"&&(((e=t.title)==null?void 0:e.toLowerCase().includes("inbox"))||((n=t.title)==null?void 0:n.toLowerCase().includes("calendar")))}function WPe(){"use forget";const t=G.c(7),{items:e,isLoading:n,isError:s}=LU();if(s)return null;let o;t[0]!==n?(o=n&&r.jsx(r.Fragment,{children:Array.from({length:4}).map(qPe)}),t[0]=n,t[1]=o):o=t[1];let a;t[2]!==e?(a=e.map(zPe),t[2]=e,t[3]=a):a=t[3];let i;return t[4]!==o||t[5]!==a?(i=r.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[o,a]}),t[4]=o,t[5]=a,t[6]=i):i=t[6],i}function zPe(t,e){return r.jsx("div",{children:r.jsx(OU,{item:t})},"".concat(t.content_type,"-").concat(e))}function qPe(t,e){return r.jsx(k4,{},e)}const OU=t=>{"use forget";var l,c;const e=G.c(37),{item:n}=t,s=ne();let o;e[0]!==s?(o=s.formatMessage(Rk.newsImageAlt),e[0]=s,e[1]=o):o=e[1];const a=o,i=V();switch(n.content_type){case"card":{const d=(l=n.image)==null?void 0:l.url,u=(c=n.image)==null?void 0:c.fallback_url,f=n.title,m=n.preview_markdown_text;let p;e[2]!==i||e[3]!==a||e[4]!==n?(p=()=>lt(i,FPe,{selectedCard:n,fallbackAltText:a}),e[2]=i,e[3]=a,e[4]=n,e[5]=p):p=e[5];let g;e[6]!==u||e[7]!==d||e[8]!==s||e[9]!==f?(g=d&&r.jsx("img",{src:d,onError:y=>{u&&y.target.src!==u&&(y.target.src=u)},alt:f!=null?f:s.formatMessage(Rk.newsImageAlt),className:"mb-3 h-32 w-full rounded-md object-cover"}),e[6]=u,e[7]=d,e[8]=s,e[9]=f,e[10]=g):g=e[10];let h;e[11]!==f?(h=f&&r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:f}),e[11]=f,e[12]=h):h=e[12];let x;e[13]!==m?(x=m&&r.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:m}),e[13]=m,e[14]=x):x=e[14];let v;return e[15]!==p||e[16]!==g||e[17]!==h||e[18]!==x?(v=r.jsxs("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:p,children:[g,h,x]}),e[15]=p,e[16]=g,e[17]=h,e[18]=x,e[19]=v):v=e[19],v}case"header_with_date":{let d;e[20]!==n.date?(d=n.date!=null?new Date(Number(n.date)*1e3):null,e[20]=n.date,e[21]=d):d=e[21];const u=d,f=n.body;let m;e[22]!==u?(m=u&&r.jsx("h3",{className:"mb-0.5 line-clamp-2 text-sm font-medium",children:r.jsx(JE,{value:u,month:"long",day:"numeric"})}),e[22]=u,e[23]=m):m=e[23];let p;e[24]!==f?(p=f&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:f}),e[24]=f,e[25]=p):p=e[25];let g;return e[26]!==m||e[27]!==p?(g=r.jsxs("div",{children:[m,p]}),e[26]=m,e[27]=p,e[28]=g):g=e[28],g}case"commentary":{const d=n.title,u=n.body;let f;e[29]!==d?(f=d&&r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:d}),e[29]=d,e[30]=f):f=e[30];let m;e[31]!==u?(m=u&&r.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:u}),e[31]=u,e[32]=m):m=e[32];let p;return e[33]!==f||e[34]!==m?(p=r.jsxs("div",{children:[f,m]}),e[33]=f,e[34]=m,e[35]=p):p=e[35],p}case"divider":{let d;return e[36]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("div",{className:"border-token-border-muted my-1 border-t"}),e[36]=d):d=e[36],d}default:return null}},Rk=be({newsImageAlt:{id:"+EPy7B",defaultMessage:"News image"}}),YPe=R(()=>P(()=>Promise.resolve().then(()=>wm),void 0),{loading:t=>O(t)}),ZPe=R(()=>P(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([147,1])),{loading:t=>O(t)}),KPe=R(()=>P(()=>import("./ohnma74ezw59jlv8.js"),__vite__mapDeps([452,1])),{loading:t=>O(t)}),Lk=R(()=>P(()=>import("./79oriwozxkpwokzb.js"),__vite__mapDeps([453,1,10,11])).then(t=>t.AddShortcutModal)),QPe=t=>Array.isArray(t)?t.map(e=>typeof e=="object"&&e!=null?{name:String(e.name),url:String(e.url)}:null).filter(e=>e!=null):[];function ust(){"use forget";var C;const t=G.c(31),e=V(),n=ne();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=QPe((C=gt.getItem(Ue.ShortcutLinks))!=null?C:[]),t[0]=s):s=t[0];const[o,a]=_.useState(s);let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=S=>{a(S),gt.setItem(Ue.ShortcutLinks,S)},t[1]=i):i=t[1];const l=i;let c;t[2]!==e||t[3]!==n||t[4]!==o?(c=S=>{lt(e,Lk,{title:n.formatMessage(Ku.editShortcut),defaultName:o[S].name,defaultUrl:o[S].url,onSave:(k,E)=>{l(o.map((T,M)=>M===S?{name:k,url:E}:T))}})},t[2]=e,t[3]=n,t[4]=o,t[5]=c):c=t[5];const d=c;let u;t[6]!==o?(u=S=>{l(o.filter((k,E)=>E!==S))},t[6]=o,t[7]=u):u=t[7];const f=u;let m;if(t[8]!==d||t[9]!==f||t[10]!==o){let S;t[12]!==d||t[13]!==f?(S=(k,E)=>r.jsx(Ok,{onClick:()=>window.location.href=k.url,img:r.jsx("img",{src:"https://www.google.com/s2/favicons?domain=".concat(k.url,"&sz=64"),alt:k.name,className:"h-6 w-6"}),name:k.name,showMenu:!0,onEdit:()=>d(E),onRemove:()=>f(E)},k.name),t[12]=d,t[13]=f,t[14]=S):S=t[14],m=o.map(S),t[8]=d,t[9]=f,t[10]=o,t[11]=m}else m=t[11];let p;t[15]!==e||t[16]!==n||t[17]!==o?(p=()=>lt(e,Lk,{title:n.formatMessage(Ku.addShortcut),onSave:(S,k)=>{l([...o,{name:S,url:k}])}}),t[15]=e,t[16]=n,t[17]=o,t[18]=p):p=t[18];let g;t[19]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(YPe,{className:"h-6 w-6"}),t[19]=g):g=t[19];let h;t[20]!==n?(h=n.formatMessage(Ku.addShortcut),t[20]=n,t[21]=h):h=t[21];let x;t[22]!==p||t[23]!==h?(x=r.jsx(Ok,{onClick:p,img:g,name:h}),t[22]=p,t[23]=h,t[24]=x):x=t[24];let v;t[25]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("div",{className:"absolute! end-0 top-0 translate-x-full rtl:-translate-x-full",children:r.jsx(JPe,{})}),t[25]=v):v=t[25];let y;t[26]!==x?(y=r.jsxs("div",{className:"relative",children:[x,v]}),t[26]=x,t[27]=y):y=t[27];let b;return t[28]!==y||t[29]!==m?(b=r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"flex flex-wrap justify-center",children:[m,y]})}),t[28]=y,t[29]=m,t[30]=b):b=t[30],b}const JPe=()=>{"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(V5,{triggerIcon:ZPe,side:"right",sideOffset:4,children:r.jsxs("div",{className:"text-sm",children:[r.jsx(j,{id:"RUf4sV",tagName:"p",defaultMessage:"You can revert to chrome original by:"}),r.jsx(Hy,{content:RU})]})}),t[0]=e):e=t[0],e},Ok=({onClick:t,img:e,name:n,showMenu:s,onEdit:o,onRemove:a})=>{const i=ne();return r.jsxs(_e,{color:"ghost",className:"group relative rounded-sm",onClick:t,children:[s&&o&&a&&r.jsxs(Y.Root,{children:[r.jsx(Y.Trigger,{asChild:!0,onClick:l=>{l.stopPropagation()},children:r.jsx(XPe,{})}),r.jsx(Y.Portal,{children:r.jsxs(Y.Content,{size:"auto",children:[r.jsx(Y.Item,{onClick:l=>{l.stopPropagation(),o()},label:i.formatMessage(Ku.edit)}),r.jsx(Y.Item,{onClick:l=>{l.stopPropagation(),a()},label:i.formatMessage(Ku.remove)})]})})]}),r.jsxs("div",{className:"flex flex-col items-center gap-3 py-3",children:[r.jsx("div",{className:"bg-token-bg-secondary mx-3 rounded-full p-3",children:e}),r.jsx("span",{className:"text-xs text-gray-700",children:n})]})]})},XPe=n=>{var s=n,{ref:t}=s,e=ke(s,["ref"]);return r.jsx(_e,U(w({ref:t},e),{as:"button",onClick:o=>{var a;return(a=e.onClick)==null?void 0:a.call(e,o)},icon:KPe,color:"ghost",className:"absolute! end-0 top-0 opacity-0 transition-opacity group-hover:opacity-100",size:"small"}))},Ku=be({addShortcut:{id:"TK0jxS",defaultMessage:"Add shortcut"},editShortcut:{id:"OLI43T",defaultMessage:"Edit shortcut"},edit:{id:"PUtE2c",defaultMessage:"Edit"},remove:{id:"lCYLCS",defaultMessage:"Remove"}}),eRe=R(()=>P(()=>import("./hd8c06uahj4xlwsm.js"),__vite__mapDeps([454,1])),{loading:t=>O(t)}),tRe=R(()=>P(()=>import("./ydzvfm0toss4freg.js"),__vite__mapDeps([353,1,10,11,354,355])).then(t=>t.ConnectorsOnboardingModal)),Dk=R(()=>P(()=>import("./euaq3qroi3mmil06.js"),__vite__mapDeps([455,1,10,11])).then(t=>t.GlauxNuxModal));function fst({clientThreadId:t}){var A;const e=V(),n=ne(),s=Mi(),o=ys(),a=$s(),[i,l]=Us(),c=uM(e),d=Cn(),u=(A=d==null?void 0:d.name)!=null?A:"",m=fM(d==null?void 0:d.planType)?r.jsx(j,{id:"2mP3gw",defaultMessage:"Organization knowledge"}):r.jsx(j,{id:"eMtjgF",defaultMessage:"Company knowledge"}),p=ae(()=>E3(e)),g=ae(()=>Ih(e)),h=_.useMemo(()=>{var N;if(p===void 0||g===void 0)return!0;const I=g==null?void 0:g.some(L=>["partially_activated","activated","activating"].includes(L.user_connection_details.activation_status));return((N=p==null?void 0:p.size)!=null?N:0)>0||I},[p,g]),x=gt.getItem(Ue.HasClickedCompanyKnowledgePill),v=_.useCallback(()=>{gt.setItem(Ue.HasClickedCompanyKnowledgePill,new Date().toISOString())},[]),y=ae(()=>Vs(e)),b=y==null?void 0:y.some(I=>I.systemHint==="glaux"),{auraAnnouncementBannerState$:C}=J5(e),S=ae(C),{available:k}=MU(),E=_.useMemo(()=>k&&o==null,[k,o]),T=_.useCallback(()=>{v();const I=gt.getItem("oai/apps/connectors/glauxOnboarding"),N=()=>{a("glaux",{analyticsMetadata:{clientThreadId:t}}),setTimeout(()=>{so(Pt(s))},100),B.logEventWithStatsig("ChatGPT Connectors Connector Pill Enabled","chatgpt_connectors_connector_pill_enabled",{type:"glaux"})};if(c==="restricted"&&I||!c){N();return}c==="restricted"?lt(e,Dk,{onContinue:N}):c==="external"&&(h?N():lt(e,tRe,{onContinue:N}))},[e,t,a,s,c,v,h]);_.useEffect(()=>{b&&i.get("glaux-onboarding")==="true"&&(lt(e,Dk,{onContinue:()=>{a("glaux",{analyticsMetadata:{clientThreadId:t}}),so(Pt(s))}}),l(N=>(N.delete("glaux-onboarding"),N)))},[b,i,l,e,t,a,s]);const M=({onClick:I,Icon:N,label:L,tooltip:D})=>{const F=r.jsx(_e,{className:"py-2",color:"secondary",onClick:I,size:"medium",children:r.jsx("div",{className:"flex gap-2",children:r.jsxs(r.Fragment,{children:[N,L]})})});return r.jsx("div",{className:"mx-1.5 mt-11 flex justify-center max-md:hidden",children:D?r.jsx(_t,{label:D,children:F}):F})};return E?r.jsx(M,{onClick:T,Icon:r.jsx(eRe,{className:"icon"}),label:r.jsxs(r.Fragment,{children:[m,x||S==="shown"?null:r.jsx("span",{className:"inline-flex shrink-0 items-center rounded-full bg-[rgba(2,133,255,0.15)] px-1.5 py-px text-xs font-semibold text-[#0285FF]",children:r.jsx(j,{id:"Q46KVL",defaultMessage:"NEW"})})]}),tooltip:n.formatMessage({id:"TfieoZ",defaultMessage:"Search {name}'s knowledge"},{name:u})}):null}function nRe(t){return t!=null&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||!!t.getAttribute("contenteditable"))}function mst(t){"use forget";const e=G.c(3);let n,s;e[0]!==t?(n=()=>{const o=Pt(t).dom.ownerDocument,a=o.defaultView;if(!a)return;const i=l=>{l.code!=="Space"&&(!l.metaKey||l.key==="v")&&!nRe(o.activeElement)&&so(Pt(t))};return a.addEventListener("keypress",i),()=>{a.removeEventListener("keypress",i)}},s=[t],e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]),_.useEffect(n,s)}const sRe=R(()=>P(()=>import("./ny3gbedhp9u7gx6v.js"),__vite__mapDeps([320,1])),{loading:t=>O(t)}),hd=t=>{"use forget";var k;const e=G.c(31);let n,s,o,a;e[0]!==t?(k=t,{className:o,fallbackSrc:n,shadow:a}=k,s=ke(k,["className","fallbackSrc","shadow"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a):(n=e[1],s=e[2],o=e[3],a=e[4]);const i=o===void 0?"":o,l=a===void 0?!1:a,c=ne();let d;e[5]!==n||e[6]!==s.src?(d=()=>s.src?"primary":n?"fallback":"error",e[5]=n,e[6]=s.src,e[7]=d):d=e[7];const[u,f]=_.useState(d);let m,p;e[8]!==n||e[9]!==s.src?(m=()=>{const E=s.src?"primary":n?"fallback":"error";f(T=>T===E?T:E)},p=[s.src,n],e[8]=n,e[9]=s.src,e[10]=m,e[11]=p):(m=e[10],p=e[11]),_.useEffect(m,p);const g=u==="primary"?s.src:n!=null?n:void 0,h=l&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let x;e[12]!==i||e[13]!==h?(x=W("rounded-2xl object-cover aspect-square",h,i),e[12]=i,e[13]=h,e[14]=x):x=e[14];const v=x;if(!g||u==="error"){let E;return e[15]!==v||e[16]!==s.onClick||e[17]!==l?(E=r.jsx(oRe,{onClick:s.onClick,className:v,shadow:l}),e[15]=v,e[16]=s.onClick,e[17]=l,e[18]=E):E=e[18],E}let y;e[19]!==c?(y=c.formatMessage({id:"syAyIZ",defaultMessage:"Image attachment"}),e[19]=c,e[20]=y):y=e[20];let b;e[21]===Symbol.for("react.memo_cache_sentinel")?(b=E=>{const{currentTarget:T}=E;(T.naturalWidth<30||T.naturalHeight<30)&&f("error")},e[21]=b):b=e[21];let C;e[22]!==n||e[23]!==u?(C=E=>{const{currentTarget:T}=E;u==="primary"&&n&&T.src!==n?f("fallback"):f("error")},e[22]=n,e[23]=u,e[24]=C):C=e[24];let S;return e[25]!==v||e[26]!==s||e[27]!==g||e[28]!==C||e[29]!==y?(S=r.jsx("img",U(w({},s),{alt:y,loading:"eager",src:g,className:v,onLoad:b,onError:C})),e[25]=v,e[26]=s,e[27]=g,e[28]=C,e[29]=y,e[30]=S):S=e[30],S},oRe=t=>{"use forget";const e=G.c(7),{className:n,shadow:s,onClick:o}=t,a=s&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let i;e[0]!==n||e[1]!==a?(i=W("border-token-[#0285FF17] flex items-center justify-center rounded-2xl border bg-[#DFEFFF] object-cover p-2",a,n),e[0]=n,e[1]=a,e[2]=i):i=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(sRe,{className:"text-token-text-accent aspect-square h-1/3 w-1/3"}),e[3]=l):l=e[3];let c;return e[4]!==o||e[5]!==i?(c=r.jsx("div",{onClick:o,className:i,children:l}),e[4]=o,e[5]=i,e[6]=c):c=e[6],c},aRe=70,Fk="radial-gradient(circle at center, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 99%)",DU=t=>{"use forget";var c,d;const e=G.c(5),{images:n}=t,o=ae(yq)?28:21,a=o>n.length&&((c=n.at(0))==null?void 0:c.url)===((d=n.at(-1))==null?void 0:d.url)?o-1:o;let i;e[0]!==a?(i=Array.from({length:a}),e[0]=a,e[1]=i):i=e[1];let l;if(e[2]!==n||e[3]!==i){const u=i.map((f,m)=>n[m%n.length]);l=r.jsx(rRe,{images:u,imageSize:80}),e[2]=n,e[3]=i,e[4]=l}else l=e[4];return l},rRe=t=>{"use forget";const e=G.c(12),{images:n,imageSize:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=W("flex h-45 w-full max-w-170 items-center justify-center transition-opacity duration-200 ease-in-out"),e[0]=o):o=e[0];let a,i,l;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={maskImage:Fk,WebkitMaskImage:Fk,maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat"},i=W("absolute start-1/2 top-0 aspect-square w-[190%] -translate-x-1/2 animate-spin"),l={animationDuration:"".concat(aRe,"s")},e[1]=a,e[2]=i,e[3]=l):(a=e[1],i=e[2],l=e[3]);let c;if(e[4]!==s||e[5]!==n){let u;e[7]!==s||e[8]!==n.length?(u=(f,m)=>{const p=m/n.length*360;return r.jsx("div",{className:"absolute inset-0 origin-center",style:{transform:"rotate(".concat(p,"deg)"),transformOrigin:"center"},children:r.jsx("div",{className:"absolute start-1/2 top-0 -translate-x-1/2",children:r.jsx("div",{style:{width:"".concat(s,"px"),height:"".concat(s,"px")},children:r.jsx(hd,{src:f==null?void 0:f.url,fallbackSrc:f==null?void 0:f.fallback_url,className:"h-full w-full rounded-xl",shadow:!0})})})},"".concat(m,"-").concat(f==null?void 0:f.url))},e[7]=s,e[8]=n.length,e[9]=u):u=e[9],c=n.map(u),e[4]=s,e[5]=n,e[6]=c}else c=e[6];let d;return e[10]!==c?(d=r.jsx("div",{className:o,children:r.jsx("div",{className:"relative h-full w-full",style:a,children:r.jsx("div",{className:i,style:l,children:c})})}),e[10]=c,e[11]=d):d=e[11],d},Gy=t=>{"use forget";const e=G.c(13),{firstRef:n,secondRef:s,firstSide:o,secondSide:a,threshold:i,absolute:l}=t,c=i===void 0?200:i,d=l===void 0?!0:l,[u,f]=_.useState(!1);let m;e[0]!==d||e[1]!==n||e[2]!==o||e[3]!==s||e[4]!==a||e[5]!==c?(m=()=>{const g=n.current,h=s.current;if(!g||!h){f(!1);return}const x=()=>{const b=g.getBoundingClientRect(),C=h.getBoundingClientRect(),S=b[o]-C[a];f(d?Math.abs(S)<=c:S<=c)};let v=null;const y=()=>{v!=null&&cancelAnimationFrame(v),v=requestAnimationFrame(()=>{v=null,x()})};return window.addEventListener("resize",y,{passive:!0}),x(),()=>{v!=null&&cancelAnimationFrame(v),window.removeEventListener("resize",y),window.removeEventListener("orientationchange",y)}},e[0]=d,e[1]=n,e[2]=o,e[3]=s,e[4]=a,e[5]=c,e[6]=m):m=e[6];let p;return e[7]!==n||e[8]!==o||e[9]!==s||e[10]!==a||e[11]!==c?(p=[n,s,o,a,c],e[7]=n,e[8]=o,e[9]=s,e[10]=a,e[11]=c,e[12]=p):p=e[12],Xn(m,p),u},FU=sn(()=>If(Ue.HasSeenPulseOnboarding,()=>!1));function pst(){"use forget";var F,$;const t=G.c(37),e=V();let n;t[0]!==e?(n=()=>k5(e),t[0]=e,t[1]=n):n=t[1];const{data:s}=ae(n);let o,a;t[2]!==e?(o=()=>{lve(e)},a=[e],t[2]=e,t[3]=o,t[4]=a):(o=t[3],a=t[4]),_.useEffect(o,a);let i;t[5]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[5]=i):i=t[5],_.useEffect(lRe,i);let l;t[6]!==(s==null?void 0:s.onboarding_config)?(l=(F=s==null?void 0:s.onboarding_config)!=null?F:{},t[6]=s==null?void 0:s.onboarding_config,t[7]=l):l=t[7];const{image_urls:c,name:d}=l,u=iRe,f=_.useRef(null),m=_.useRef(null);let p;t[8]===Symbol.for("react.memo_cache_sentinel")?(p={firstRef:m,secondRef:f,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},t[8]=p):p=t[8];const g=Gy(p);let h;t[9]!==e?(h=()=>{FU.set(e,!0),Fs(e).logEventWithStatsig("(Web) FYP Onboarding Completed","chatgpt_web_fyp_onboarding_completed")},t[9]=e,t[10]=h):h=t[10];const x=h,v=g&&"sticky top-0";let y;t[11]!==v?(y=W("relative flex h-45 w-full items-center justify-center",v),t[11]=v,t[12]=y):y=t[12];let b;t[13]!==c?(b=($=c==null?void 0:c.map(pA))!=null?$:[],t[13]=c,t[14]=b):b=t[14];let C;t[15]!==b?(C=r.jsx(DU,{images:b}),t[15]=b,t[16]=C):C=t[16];let S;t[17]!==C||t[18]!==y?(S=r.jsx("div",{className:y,ref:m,children:C}),t[17]=C,t[18]=y,t[19]=S):S=t[19];let k;t[20]!==d?(k=r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,U(w({},Cp.greeting),{values:{name:d}}))}),t[20]=d,t[21]=k):k=t[21];let E;t[22]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{className:"whitespace-pre-line",children:r.jsx(j,w({},Cp.onboardingExplanation))}),t[22]=E):E=t[22];let T;t[23]!==k?(T=r.jsxs("div",{className:"flex flex-col gap-4",children:[k,E]}),t[23]=k,t[24]=T):T=t[24];let M;t[25]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(j,w({},Cp.next)),t[25]=M):M=t[25];let A;t[26]!==x?(A=r.jsx(_e,{size:"large",className:"w-1/2",onClick:x,children:M}),t[26]=x,t[27]=A):A=t[27];let I;t[28]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx("span",{className:"text-token-text-tertiary px-2 text-sm font-medium",children:r.jsx(j,U(w({},Cp.learnMore),{values:{link:u}}))}),t[28]=I):I=t[28];let N;t[29]!==A?(N=r.jsxs("div",{className:"flex w-full flex-col gap-2",children:[A,I]}),t[29]=A,t[30]=N):N=t[30];let L;t[31]!==T||t[32]!==N?(L=r.jsxs("div",{className:"flex w-full flex-col justify-start gap-6 text-xl font-medium",children:[T,N]}),t[31]=T,t[32]=N,t[33]=L):L=t[33];let D;return t[34]!==S||t[35]!==L?(D=r.jsxs("div",{className:"relative mx-auto mb-30 flex w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-hidden px-4 py-6",children:[S,L]}),t[34]=S,t[35]=L,t[36]=D):D=t[36],D}function iRe(t){return r.jsx(no,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",target:"_blank",rel:"noreferrer",className:"text-token-text-secondary underline",children:t})}function lRe(){Ie.count(je.PULSE,"chatgpt_web_fyp_onboarding_shown")}const Cp=be({greeting:{id:"SqSmpy",defaultMessage:"Hi, {name}"},onboardingExplanation:{id:"SbZL/F",defaultMessage:"I'm here to surface what's helpful to you once a day, every day. You decide what shows up  if you tell me what to focus on, I'll curate it for you tomorrow."},learnMore:{id:"Chvn9N",defaultMessage:"<link>Learn more</link> about how Pulse works"},next:{id:"U2jFjI",defaultMessage:"Next"}}),cRe=sn(t=>St(()=>{var s,o,a;const e=k5(t),n=(a=(o=(s=e==null?void 0:e.data)==null?void 0:s.onboarding_config)==null?void 0:o.image_urls)!=null?a:[];return new Set(n)})),dRe=()=>{"use forget";const t=G.c(2),e=V();let n;t[0]!==e?(n=()=>Dl(()=>{FU(e)||cRe(e).forEach(uRe)}),t[0]=e,t[1]=n):n=t[1],_.useEffect(n)};function uRe(t){const e=new Image;e.src=t}const fRe=R(()=>P(()=>import("./ffrotvb922yxp30i.js"),__vite__mapDeps([286,1])),{loading:t=>O(t)}),mRe=be({defaultTitle:{id:"pulse.entrypoint.defaultTitle",defaultMessage:"Today's pulse"},seenCaption:{id:"pulse.entrypoint.seenCaption",defaultMessage:"You're all caught up for today."}}),gst=t=>{"use forget";const e=G.c(8),{pulseId:n,caption:s,previewImages:o,onClick:a}=t,i=V();dRe();let l;e[0]!==s||e[1]!==i||e[2]!==a||e[3]!==o||e[4]!==n?(l=n&&r.jsx(Xe.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.1,ease:"easeInOut"},className:"mt-10 max-md:hidden",children:r.jsx(Ir,{className:"flex justify-center px-10",children:r.jsx(pRe,{previewImages:o,title:r.jsx(j,w({},mRe.defaultTitle)),caption:s,onClick:()=>{Fs(i).logEventWithStatsig("(Web) FYP Entrypoint Tapped","chatgpt_web_fyp_entrypoint_tapped"),qO.set(i,E5.Chat),Ie.count(je.PULSE,"chatgpt_web_fyp_entrypoint_tapped"),a()}})})}),e[0]=s,e[1]=i,e[2]=a,e[3]=o,e[4]=n,e[5]=l):l=e[5];let c;return e[6]!==l?(c=r.jsx(mn,{children:l}),e[6]=l,e[7]=c):c=e[7],c};function pRe(t){"use forget";const e=G.c(19),{onClick:n,previewImages:s,title:o,caption:a}=t,i=V();let l,c;e[0]!==i?(l=()=>{Fs(i).logEventWithStatsig("(Web) FYP Entrypoint Shown","chatgpt_web_fyp_entrypoint_shown"),Ie.count(je.PULSE,"chatgpt_web_fyp_entrypoint_shown")},c=[i],e[0]=i,e[1]=l,e[2]=c):(l=e[1],c=e[2]),_.useEffect(l,c);let d;e[3]!==s?(d=r.jsx(gRe,{previewImages:s}),e[3]=s,e[4]=d):d=e[4];let u;e[5]!==o?(u=r.jsx("div",{className:"text-sm font-semibold",children:o}),e[5]=o,e[6]=u):u=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(fRe,{className:"h-4 w-4 flex-shrink-0"}),e[7]=f):f=e[7];let m;e[8]!==u?(m=r.jsxs("div",{className:"flex flex-shrink-0 items-center gap-1",children:[u,f]}),e[8]=u,e[9]=m):m=e[9];let p;e[10]!==d||e[11]!==m?(p=r.jsxs("div",{className:"flex flex-shrink-0 items-center gap-4",children:[d,m]}),e[10]=d,e[11]=m,e[12]=p):p=e[12];let g;e[13]!==a?(g=r.jsx("div",{className:"text-token-text-tertiary group-hover:text-token-text-secondary min-w-0 flex-shrink truncate text-sm whitespace-nowrap transition-colors",children:a}),e[13]=a,e[14]=g):g=e[14];let h;return e[15]!==n||e[16]!==p||e[17]!==g?(h=r.jsxs("div",{className:"group hover:bg-token-bg-tertiary inline-flex cursor-pointer items-center gap-2 overflow-hidden rounded-full px-4 py-2",onClick:n,children:[p,g]}),e[15]=n,e[16]=p,e[17]=g,e[18]=h):h=e[18],h}function gRe({previewImages:t}){var e,n,s,o;return r.jsxs("div",{className:"relative h-7 w-7",children:[r.jsx(hd,{src:(e=t[0])==null?void 0:e.url,fallbackSrc:(n=t[0])==null?void 0:n.fallback_url,className:"absolute aspect-square h-7 w-7 translate-x-2 rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:translate-x-2.5 group-hover:rotate-[3deg]"}),r.jsx(hd,{src:(s=t[1])==null?void 0:s.url,fallbackSrc:(o=t[1])==null?void 0:o.fallback_url,className:"absolute aspect-square h-7 w-7 -rotate-[6.5deg] rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:-translate-x-1 group-hover:-rotate-[10deg]"})]})}function hRe({currentIndex:t,numEntries:e,onChange:n,onMouseDown:s,onMouseUp:o}){return r.jsx("div",{className:"w-full",children:r.jsxs(W5,{className:"relative m-2 flex w-full items-center",min:0,max:e,step:1,value:[t],onValueChange:a=>{n(a[0]),s()},onValueCommit:()=>{o()},children:[r.jsx(z5,{className:"bg-token-text-quaternary relative h-[9px] grow rounded-full",children:r.jsx(wF,{className:"bg-token-text-primary absolute h-full rounded-full"})}),r.jsx(q5,{className:"bg-token-bg-primary border-token-bg-secondary block h-[15px] w-[15px] cursor-pointer rounded-full border focus:outline-none"})]})})}const _Re=R(()=>P(()=>import("./d5bc8trtxeukg3jk.js"),__vite__mapDeps([456,1])),{loading:t=>O(t)}),xRe=R(()=>P(()=>import("./mauhe4xggt6ulnl1.js"),__vite__mapDeps([457,1])),{loading:t=>O(t)}),yRe=R(()=>P(()=>import("./kxiauyplvekf3qhc.js"),__vite__mapDeps([458,1])),{loading:t=>O(t)}),vRe=R(()=>P(()=>import("./ailj2wmeuzip7d2v.js"),__vite__mapDeps([122,1])),{loading:t=>O(t)}),bRe=R(()=>P(()=>import("./5bcdej51598lc3xr.js"),__vite__mapDeps([345,1])),{loading:t=>O(t)});R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)});function CRe(t,e){const n=[];if(!e)return n;let s=t.getNodeIfExists(e);for(;s;)n.push(s.message),s=t.getNodeIfExists(s.parentId);return n.reverse()}const SRe=400,wRe=4e3,kRe=3e3,ERe=2e3;function TRe(t,e){const n=t.author.name,s=t.recipient;return n!=null&&n.startsWith("browser")||s!=null&&s.startsWith("browser")?wRe/e:Bm(n,724319625)||Bm(s,724319625)?kRe/e:Bm(n,3405121681)||Bm(s,3405121681)?ERe/e:SRe/e}const BU="inline-block min-h-[unset]",Bk=W(BU,"p-0 h-fit py-1 px-4");function hst({clientThreadId:t}){var A;const e=ot(),n=ai.useState(I=>I.finalMessageId),s=ai.useStore(),o=ai.useState(I=>I.isPlaying),a=ai.useState(I=>I.playbackSpeed),i=s.setPlaying,l=s.endReplay,c=_.useRef(!1),d=_.useCallback(I=>{i(I),c.current=I},[i]),u=_.useCallback(()=>{i(!1)},[i]),f=_.useCallback(()=>{i(c.current)},[i]);_.useCallback(()=>{if(!n)throw Error("Missing finalMessageId");Ze(t,I=>{I.currentLeafId=n}),l()},[l,n,t]),_.useEffect(()=>()=>{n&&Ze(t,I=>{I.currentLeafId=n})},[n,t]);const m=Ve(t,I=>I==null?void 0:I.tree),p=_.useMemo(()=>m?CRe(m,n).filter(L=>!(L.author.role==="root"||L.author.role==="system"||L.author.role==="assistant"&&L.recipient!=="all"||L.author.name&&hr(111655449,L.author.name))):[],[m,n]),g=((A=p==null?void 0:p.length)!=null?A:1)-1,h=V(),x=!tt(h),v=_.useCallback(()=>{d(!1),C(g)},[d,g]),y=_.useMemo(()=>{var H,z,K;const I=p.findLastIndex(J=>J.author.role==Ke.User),N=p[I],L=I===-1?p:p.slice(I),D=L.findLast(J=>{var Z;return J.channel==="final"&&((Z=J.metadata)==null?void 0:Z.n7jupd_summary)})||L.findLast(J=>{var Z;return(Z=J.metadata)==null?void 0:Z.n7jupd_summary}),F=(z=(H=N.metadata)==null?void 0:H.system_hints)!=null?z:[],$=(K=D==null?void 0:D.metadata)==null?void 0:K.n7jupd_summary;return $?{systemHints:F,summarizedPrompt:$}:null},[p]),[b,C]=_.useState(1);_.useEffect(()=>{const I=p==null?void 0:p[b].id;I&&Ze(t,N=>{N.currentLeafId=I})},[b,p,t]);const S=g===b;_.useEffect(()=>{S&&d(!1)},[S,d]);const k=s.toggleIsPlaying,E=_.useCallback(()=>{S&&!o&&C(1),k()},[S,o,k]);_.useEffect(()=>{if(!o||b>=g)return;const I=TRe(p[b],a),N=setTimeout(()=>{C(L=>L+1)},I);return()=>clearTimeout(N)},[o,a,b,p,g]),_.useEffect(()=>(d(!0),()=>d(!1)),[d]);const T=_.useCallback(()=>{d(!0),C(1)},[d]);return r.jsxs("div",{className:"shadow-long bg-token-main-surface-primary flex w-full items-center gap-2 rounded-[20px] p-4",children:[r.jsx(_e,{icon:S?bRe:o?yRe:xRe,onClick:S?T:E,className:W(BU,"border-none p-2"),color:"secondary"}),r.jsx("div",{className:"flex flex-1 flex-col items-center justify-center pe-6",children:r.jsx(hRe,{onChange:C,numEntries:g,currentIndex:b,onMouseDown:u,onMouseUp:f})}),r.jsxs("div",{className:"flex max-w-[200px] items-center justify-center",children:[S&&r.jsxs(r.Fragment,{children:[!1,!x&&!!y&&r.jsx(_e,{icon:vRe,onClick:()=>{const I=new URLSearchParams({prompt:y.summarizedPrompt});for(const N of y.systemHints)I.append(cv,N);Mr(e,{params:I})},className:Bk,children:r.jsx("span",{className:"truncate",children:r.jsx(j,{id:"if6xD7",defaultMessage:"Try this prompt"})})})]}),!S&&r.jsx(r.Fragment,{children:r.jsx(_e,{icon:_Re,onClick:v,className:Bk,color:"secondary",children:r.jsx(j,{id:"Cxho9p",defaultMessage:"Skip"})})})]})]})}const _st=()=>r.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 -z-10 h-24",children:r.jsx(Ir,{children:r.jsx("div",{className:"relative -mx-8 h-24 [mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)] [mask-composite:intersect] backdrop-blur-2xl [-webkit-mask-composite:source-in] [-webkit-mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)]"})})}),MRe=R(()=>P(()=>import("./lrtd9knjab0hf8x5.js"),__vite__mapDeps([308,1])),{loading:t=>O(t)}),xst=t=>{"use forget";const e=G.c(22),{clientThreadId:n,bottom:s,pinnedWidgetType:o,onClick:a}=t;let i;e[0]!==n?(i=()=>he.getBranch(ft(n)),e[0]=n,e[1]=i):i=e[1];const[l]=_.useState(i);let c;e[2]!==l||e[3]!==o?(c=y=>{var b,C,S;return[(S=(C=(b=he.getBranch(y))==null?void 0:b.slice(l.length).findLast(k=>{const{message:E}=k,{metadata:T}=E;return(T==null?void 0:T.chatgpt_sdk)&&W1(T.chatgpt_sdk)===o}))==null?void 0:C.message.metadata)==null?void 0:S.tool_invoking_message]},e[2]=l,e[3]=o,e[4]=c):c=e[4];const[d]=Ve(n,c);let u;e[5]!==s?(u={bottom:s},e[5]=s,e[6]=u):u=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f={viewTransitionName:"var(--vt-composer)"},e[7]=f):f=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(fd,{sizeOverride:28,className:"text-token-border-default ms-2 flex-shrink-0 animate-spin",thickness:.08333333333333333,backgroundStrokeClassName:W("stroke-[rgba(0,0,0,0)]"),percentage:33.333333333333336}),e[8]=m):m=e[8];let p;e[9]!==d?(p=d!=null?d:r.jsx(j,{id:"z6ez+H",defaultMessage:"Thinking"}),e[9]=d,e[10]=p):p=e[10];let g;e[11]!==p?(g=r.jsx("span",{className:"loading-shimmer truncate px-4",children:p}),e[11]=p,e[12]=g):g=e[12];let h;e[13]!==n?(h=r.jsx(_e,{icon:MRe,size:"medium",className:"aspect-square p-0",onClick:y=>{y.stopPropagation(),Zh(n)}}),e[13]=n,e[14]=h):h=e[14];let x;e[15]!==a||e[16]!==g||e[17]!==h?(x=r.jsxs("div",{role:"button",onClick:a,className:"bg-token-bg-primary shadow-short pointer-events-auto mx-auto flex h-12 w-full max-w-md cursor-pointer items-center justify-between gap-2 rounded-full px-1.5 dark:bg-[#303030]",style:f,children:[m,g,h]}),e[15]=a,e[16]=g,e[17]=h,e[18]=x):x=e[18];let v;return e[19]!==u||e[20]!==x?(v=r.jsx(Ir,{className:"fixed start-0 end-0 bottom-0 z-[100] py-1",style:u,children:x}),e[19]=u,e[20]=x,e[21]=v):v=e[21],v},ARe="_main_vose0_1",yst={main:ARe};function IRe(t,e=Bf){const n=_.useRef(void 0);return s=>{const o=t(s);return e(n.current,o)?n.current:n.current=o}}function UU(t){if(t&&t.messages.length>0){const e=t.messages[0].create_time;if(e)return new Date(e*1e3)}return null}function rh(t,e){return!t||!e?!1:t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function vst(t){const e=Ve(t,IRe(c=>he.getConversationTurns(c).map(u=>{const f=UU(u),m=vke(u,u.messages);return{turnDate:f,isRenderable:m}}))),n=Wh(t),s=(n==null?void 0:n.value)===Xt.UNREAD&&n.source===ns.SERVER,[o,a]=_.useState(null),{results:i,lastRenderableTurnIndex:l}=_.useMemo(()=>{const c=new Array(e.length).fill(void 0),d=new Date;let u=null;for(const g of e){const h=g.turnDate;h&&(!u||h<u)&&(u=h)}let f=null,m=!0,p=null;for(let g=0;g<e.length;g++){const h=e[g];if(h.isRenderable){p=g;const x=h.turnDate;m?(m=!1,u&&!rh(u,d)&&(c[g]=0)):f&&!rh(x,f)&&(c[g]=0),f=x}}return{results:c,lastRenderableTurnIndex:p}},[e]);return _.useEffect(()=>{s&&l!=null&&l!==o&&a(l)},[s,l,o]),_.useMemo(()=>{const c=[...i];return s&&l!=null?c[l]=1:!s&&o!=null&&(c[o]=1),d=>c[d]},[i,s,l,o])}function jRe(t,e){const n=UU(e);if(n){const s=new Date,o=new Date;o.setDate(s.getDate()-1);let a;if(rh(n,s))a=t.formatMessage({id:"ConversationTurn.todayHeader",defaultMessage:"Today"});else if(rh(n,o))a=t.formatMessage({id:"ConversationTurn.yesterdayHeader",defaultMessage:"Yesterday"});else{const i=s.getFullYear(),l=n.getFullYear();i===l?a=t.formatDate(n,{month:"short",day:"numeric"}):a=t.formatDate(n,{month:"short",day:"numeric",year:"numeric"})}return a}else return null}const bst=t=>{"use forget";const e=G.c(12),{turn:n,dateHeaderType:s}=t,o=V(),a=ne();if(s===void 0||!ye(o,"1847911009"))return null;let i;e[0]!==a||e[1]!==n?(i=jRe(a,n),e[0]=a,e[1]=n,e[2]=i):i=e[2];const l=i;if(!l)return null;if(s===1){let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("div",{className:"me-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[3]=u):u=e[3];let f;e[4]!==l?(f=r.jsx("span",{className:"text-sm leading-5 font-normal text-[#0088FF]",children:l}),e[4]=l,e[5]=f):f=e[5];let m;e[6]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx("div",{className:"ms-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[6]=m):m=e[6];let p;return e[7]!==f?(p=r.jsxs("div",{className:"mx-auto my-4 flex h-[20px] w-full items-center md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]",children:[u,f,m]}),e[7]=f,e[8]=p):p=e[8],p}let c;e[9]===Symbol.for("react.memo_cache_sentinel")?(c={height:"20px"},e[9]=c):c=e[9];let d;return e[10]!==l?(d=r.jsx("div",{className:"my-4 flex justify-center",style:c,children:r.jsx("span",{className:"text-token-text-secondary text-sm leading-5 font-normal",children:l})}),e[10]=l,e[11]=d):d=e[11],d},Cst=({role:t,gizmo:e})=>{const n=ne();function s(){switch(t){case Ke.User:return n.formatMessage({id:"3DStaP",defaultMessage:"You said:"});case Ke.Assistant:return e?n.formatMessage({id:"ptfwNc",defaultMessage:"{author} said:"},{author:e.gizmo.display.name}):n.formatMessage({id:"LDIn6l",defaultMessage:"ChatGPT said:"});default:return""}}const o=t===Ke.Assistant?"h6":"h5";return r.jsx(o,{className:"sr-only",children:s()})},NRe=R(()=>P(()=>import("./kw03hsqv96j7mp48.js"),__vite__mapDeps([197,1])),{loading:t=>O(t)}),PRe=R(()=>P(()=>import("./jalrxozsu1d7y5op.js"),__vite__mapDeps([459,1])),{loading:t=>O(t)}),RRe="https://help.openai.com/en/articles/8400625-voice-mode-faq";function LRe({onSubmit:t}){const e=Tl(),n=Cb(),s=(n==null?void 0:n[Lt.TrainingAllowed])===!0||(n==null?void 0:n[Lt.VoiceTrainingAllowed])===!0;_.useEffect(()=>{B.logEventWithStatsig("Audio Paragen: Opt-In Shown","chatgpt_audio_paragen_opt_in_shown")},[]);const o=_.useCallback(async()=>{B.logEventWithStatsig("Audio Paragen: Opt-In Accepted","chatgpt_audio_paragen_opt_in_accepted"),await Promise.all([e.mutateAsync({setting:Lt.TrainingAllowed,value:!0}),e.mutateAsync({setting:Lt.VoiceTrainingAllowed,value:!0})]),t()},[e,t]);return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("section",{children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(j,w({},Ga.header))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(j,w({},Ga.subheader))})]}),r.jsxs("section",{className:"flex gap-3 align-top",children:[r.jsx(PRe,{className:"h-5 w-5 shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("p",{children:r.jsx(j,w({},Ga.privacyHeader))}),r.jsx("p",{className:"text-token-text-secondary",children:r.jsx(j,w({},Ga.privacyDescription))})]})]}),r.jsxs("section",{className:"flex gap-3 align-top",children:[r.jsx(NRe,{className:"h-5 w-5 shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("p",{children:r.jsx(j,w({},Ga.controlHeader))}),r.jsx("p",{className:"text-token-text-secondary",children:r.jsx(j,U(w({},Ga.controlDescription),{values:{learnMoreTextAndLink:r.jsx(no,{href:RRe,target:"_blank",className:"underline underline-offset-2",children:r.jsx(j,w({},Ga.controlLearnMoreLink))})}}))})]})]}),r.jsxs("section",{className:"flex justify-center gap-2",children:[r.jsx(_e,{size:"medium",onClick:()=>{B.logEventWithStatsig("Audio Paragen: Opt-In Actively Declined","chatgpt_audio_paragen_opt_in_actively_declined"),t()},color:"primary-inverse",className:"flex-1",children:r.jsx(j,w({},Ga.buttonNotNow))}),r.jsx(_e,{size:"medium",onClick:()=>o(),disabled:s,className:"flex-1",children:r.jsx(j,w({},Ga.buttonEnableDataSharing))})]})]})}const Ga=be({header:{id:"AudioParagenOptIn.header",defaultMessage:"Thank you for making Voice Mode better!"},subheader:{id:"AudioParagenOptIn.subheader",defaultMessage:"Use voice chats to improve our models?"},privacyHeader:{id:"AudioParagenOptIn.privacyHeader",defaultMessage:"Taking steps to protect privacy"},privacyDescription:{id:"AudioParagenOptIn.privacyDescription",defaultMessage:"To improve our models, our team may review your audio. We take steps to reduce the amount of personal information used to train our models."},controlHeader:{id:"AudioParagenOptIn.controlHeader",defaultMessage:"Youre in control"},controlDescription:{id:"AudioParagenOptIn.controlDescription",defaultMessage:"You can stop sharing any time in settings. {learnMoreTextAndLink} about how to disable training on other content from voice mode."},controlLearnMoreLink:{id:"VoiceTrainingModal.controlLearnMoreLink",defaultMessage:"Learn more"},buttonNotNow:{id:"AudioParagenOptIn.buttonNotNow",defaultMessage:"Not now"},buttonEnableDataSharing:{id:"AudioParagenOptIn.buttonEnableDataSharing",defaultMessage:"Enable data sharing"}}),ORe=R(()=>P(()=>import("./d7nzu63howwrl3dl.js"),__vite__mapDeps([343,1])),{loading:t=>O(t)}),DRe=R(()=>P(()=>import("./kxiauyplvekf3qhc.js"),__vite__mapDeps([458,1])),{loading:t=>O(t)}),FRe=R(()=>P(()=>import("./fe6cdsv85astv3rx.js"),__vite__mapDeps([460,1])),{loading:t=>O(t)}),BRe=R(()=>P(()=>import("./p6neiv37d8hk3lel.js"),__vite__mapDeps([461,1])),{loading:t=>O(t)});function URe({player:t,isPlaying:e,onPlay:n,onPause:s,onRewind:o,onForward:a}){const i=e&&!t,[l,c]=_.useState(0),[d,u]=_.useState(0);_.useEffect(()=>{t==null||t.on("ended",s);const g=h=>{c(h.seconds),u(h.totalSeconds)};return t==null||t.on("timeupdate",g),()=>{t==null||t.off("ended",s),t==null||t.off("timeupdate",g)}},[s,c,u,t]),_.useEffect(()=>{e||t==null||t.pause()},[e,t]);function f(){l>=d-.2&&(t==null||t.reset()),t==null||t.play(),n()}function m(){t==null||t.seek(-5),o==null||o()}function p(){t==null||t.seek(5),a==null||a()}return r.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[r.jsx("button",{className:"ms-auto disabled:opacity-50",onClick:m,disabled:l<=.05,children:r.jsx(BRe,{className:"size-6"})}),r.jsx("button",{className:W("rounded-full p-4 transition-all duration-200",e?"bg-token-bg-secondary":"bg-token-bg-tertiary"),onClick:e?()=>s(!0):f,children:i?r.jsx(_s,{className:"m-3 size-6 opacity-50"}):e?r.jsx(DRe,{className:"size-10"}):r.jsx(ORe,{className:"size-10"})}),r.jsx("button",{className:"me-auto disabled:opacity-50",onClick:p,disabled:l>=d-.05,children:r.jsx(FRe,{className:"size-6"})})]})}function $Re({paragen:t,onSelect:e}){const n=gd(i=>i.playingId===t.id),s=gd(i=>i.selectedId),{playParagen:o,pauseParagen:a}=X1();return r.jsxs("div",{className:W("flex flex-1 flex-col gap-4 rounded-2xl border p-4 [transition:opacity_500ms_ease-out,border-color_200ms_ease-in-out,background-color_200ms_ease-in-out]",{"bg-token-interactive-bg-tertiary-hover border-token-border-heavy":n,"bg-token-interactive-bg-tertiary-press border-token-border-focus border-1":s===t.id,"opacity-40":s&&s!==t.id}),children:[r.jsx(URe,{player:t.player,isPlaying:n,onPlay:()=>o(t.id),onPause:i=>a(t.id,i),onRewind:()=>{B.logEventWithStatsig("Audio Paragen: Rewind","chatgpt_audio_paragen_rewind",{paragen_id:t.id})},onForward:()=>{B.logEventWithStatsig("Audio Paragen: Forward","chatgpt_audio_paragen_forward",{paragen_id:t.id})}}),r.jsx(_e,{size:"medium",onClick:()=>e(t.id),children:r.jsx(j,w({},Qp.paragenOptionButton))})]})}function VRe({selectedId:t,onSelect:e,onMount:n}){const s=gd(o=>o.paragens);return Sm(()=>{n(s.length)}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"gap flex flex-col",children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(j,w({},Qp.feedbackDescription))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(j,w({},Qp.feedbackHeader))})]}),r.jsx("div",{className:"flex flex-row gap-4 md:justify-center",children:s.map(o=>r.jsx($Re,{paragen:o,onSelect:e},o.id))}),r.jsx(_e,{className:W("self-center transition-opacity duration-300",{"opacity-40":t!=null&&t!==sh}),size:"medium",color:"ghost",onClick:()=>e(sh),children:r.jsx(j,w({},Qp.paragenOptionBothBad))})]})}const Qp=be({feedbackHeader:{id:"audioParagen.feedbackHeader",defaultMessage:"Help improve voice mode in your region"},feedbackDescription:{id:"audioParagen.feedbackDescription",defaultMessage:"Which audio response do you prefer?"},paragenOptionButton:{id:"audioParagen.paragenOptionButton",defaultMessage:"I prefer this audio"},paragenOptionBothBad:{id:"audioParagen.paragenOptionBothBad",defaultMessage:"Both are bad"}}),$U=1500,Sst={aboutUserMessage:void 0,aboutModelMessage:void 0,nameUserMessage:void 0,roleUserMessage:void 0,traitsModelMessage:void 0,otherUserMessage:void 0,disabledTools:void 0,enabled:void 0,personalityTypeMessage:void 0},wst=["engineeringStudent","gastroenterologist","sourdoughBaker","interiorDesigner","daycareManager","familyLawAttorney","excelWizard","level10Mage","pharmaSales","freelanceCopywriter","weddingPhotographer","catHerder","cdlDriver","thirdGradeTeacher"],kst={initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-8,transition:{duration:.2}}};function Est(t){var e,n,s,o,a,i;return{personalityTypeMessage:(e=t==null?void 0:t.personalityTypeMessage)!=null?e:"",nameUserMessage:(n=t==null?void 0:t.nameUserMessage)!=null?n:"",roleUserMessage:(s=t==null?void 0:t.roleUserMessage)!=null?s:"",traitsModelMessage:(o=t==null?void 0:t.traitsModelMessage)!=null?o:"",otherUserMessage:(a=t==null?void 0:t.otherUserMessage)!=null?a:"",disabledTools:(i=t==null?void 0:t.disabledTools)!=null?i:[],enabled:t==null?void 0:t.enabled}}function Tst({userContextData:t,updates:e,localUserContext:n,setLocalUserContext:s}){var h;const{aboutUserMessage:o="",aboutModelMessage:a="",personalityTypeMessage:i="",nameUserMessage:l="",roleUserMessage:c="",traitsModelMessage:d="",otherUserMessage:u="",disabledTools:f=[],enabled:m}=t!=null?t:{},p=(h=n.enabled)!=null?h:!!m,g=(x,v,y)=>x!==void 0?x:v!=null?v:y;s(x=>U(w(w({},x),e),{aboutUserMessage:g(e.aboutUserMessage,x.aboutUserMessage,o),personalityTypeMessage:g(e.personalityTypeMessage,x.personalityTypeMessage,i),aboutModelMessage:g(e.aboutModelMessage,x.aboutModelMessage,a),nameUserMessage:g(e.nameUserMessage,x.nameUserMessage,l),roleUserMessage:g(e.roleUserMessage,x.roleUserMessage,c),traitsModelMessage:g(e.traitsModelMessage,x.traitsModelMessage,d),otherUserMessage:g(e.otherUserMessage,x.otherUserMessage,u),enabled:g(e.enabled,x.enabled,p),disabledTools:g(e.disabledTools,x.disabledTools,f)}))}const HRe=(t,e=$U)=>t.length>e,hu=be({traitsReset:{id:"userContextModal.traitsReset",defaultMessage:"Refresh traits"},tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},profileSubtitle:{id:"userContextModal.profileSubtitle",defaultMessage:"Introduce yourself to get better, more personalized responses"},profileSubtitleTooltip:{id:"userContextModal.profileSubtitleTooltip",defaultMessage:"ChatGPT will use the information you provide to tailor its responses to you. <link>Learn more</link> about how we use your data.",link:"https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt"},customizeName:{id:"userContextModal.customizeName",defaultMessage:"What should ChatGPT call you?"},customizeNamePlaceholder:{id:"userContextModal.customizeNamePlaceholder",defaultMessage:"Nickname"},occupationInputTitle:{id:"userContextModal.occupationInputTitle",defaultMessage:"Occupation"},moreDetailsInputTitle:{id:"userContextModal.moreDetailsInputTitle",defaultMessage:"More about you"},customizeRole:{id:"userContextModal.customizeRole",defaultMessage:"What do you do?"},customizeRolePlaceholder:{id:"userContextModal.customizeRolePlaceholder",defaultMessage:"Engineer, student, etc."},customizePersonality:{id:"userContextModal.customizePersonality",defaultMessage:"What personality should ChatGPT have?"},customizeTraits:{id:"userContextModal.customizeTraits",defaultMessage:"What traits should ChatGPT have?"},customizeTraitsPlaceholder:{id:"userContextModal.customizeTraitsPlaceholder",defaultMessage:"Describe or select traits"},customInstructionsPlaceholder:{id:"userContextModal.customInstructionsPlaceholder",defaultMessage:"Additional behavior, style, and tone preferences"},customizeOther:{id:"userContextModal.customizeOther",defaultMessage:"Anything else ChatGPT should know about you?"},customizeOtherPlaceholder:{id:"userContextModal.customizeOtherPlaceholder",defaultMessage:"Interests, values, or preferences to keep in mind"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom Instructions and how they're used to help ChatGPT provide better responses."},traitsTooltipTitle:{id:"userContextModal.traitsTooltipTitle",defaultMessage:"You can tune ChatGPT's behavior by..."},traitsTooltipBodyItem1:{id:"userContextModal.traitsTooltipBodyItem1",defaultMessage:"Use a formal, professional tone."},traitsTooltipBodyItem2:{id:"userContextModal.traitsTooltipBodyItem2",defaultMessage:"Be casual and chatty."},traitsTooltipBodyItem3:{id:"userContextModal.traitsTooltipBodyItem3",defaultMessage:"Be opinionated. If a question could have multiple answers, try to give only the best one."},otherTooltipTitle:{id:"userContextModal.otherTooltipTitle",defaultMessage:"You can share things like..."},otherTooltipBodyItem1:{id:"userContextModal.otherTooltipBodyItem1",defaultMessage:"I love hiking and jazz."},otherTooltipBodyItem2:{id:"userContextModal.otherTooltipBodyItem2",defaultMessage:"I'm vegetarian."},otherTooltipBodyItem3:{id:"userContextModal.otherTooltipBodyItem3",defaultMessage:"I'm trying to learn French."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink>  your input will aid our research in this area."},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALLE"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"},advanced:{id:"userContextModal.advanced",defaultMessage:"Advanced"},advancedOpen:{id:"userContextModal.advancedOpen",defaultMessage:"Open advanced settings"},advancedClose:{id:"userContextModal.advancedClose",defaultMessage:"Close advanced settings"},customizeTitle:{id:"personalizationSettings.customizeTitle",defaultMessage:"Personalization"},aboutYouSectionTitle:{id:"personalizationSettings.aboutYouSectionTitle",defaultMessage:"About you"},memoryTitle:{id:"personalizationSettings.memoryTitle",defaultMessage:"Memory"},toggleLabel:{id:"settingsModal.myChagtGptToggleLabel.2",defaultMessage:"Reference saved memories"},exampleDescription:{id:"settingsModal.exampleDescription",defaultMessage:"Let ChatGPT save and use memories when responding."},manageMemoriesLink:{id:"settingsModal.manageMemoriesLink",defaultMessage:"Manage memories"},manageButton:{id:"settingsModal.manageMemoriesLink.button",defaultMessage:"Manage"},upgradeButton:{id:"settingsModal.upgradeButtonLink.button",defaultMessage:"Upgrade"},exampleDescription1:{id:"settingsModal.exampleDescription1.1",defaultMessage:"ChatGPT will become more helpful as you chat, picking up on details and preferences to tailor its responses to you. <link>Learn more</link>"},exampleDescription2:{id:"settingsModal.exampleDescription2.2",defaultMessage:"To understand what ChatGPT remembers or teach it something new, just chat with it:"},exampleMessage1:{id:"settingsModal.exampleMessage1.1",defaultMessage:"Remember that I like concise responses."},exampleMessage2:{id:"settingsModal.exampleMessage2.1",defaultMessage:"I just got a puppy!"},exampleMessage3:{id:"settingsModal.exampleMessage3.2",defaultMessage:"What do you remember about me?"},exampleMessage4:{id:"settingsModal.exampleMessage4",defaultMessage:"Where did we leave off on my last project?"},reset:{id:"settingsModal.reset",defaultMessage:"Reset memories"},resetModalTitle:{id:"settingsModal.resetModalTitle",defaultMessage:"Are you sure?"},resetModalDescription:{id:"settingsModal.resetModalDescription",defaultMessage:"Your GPT will forget what it has learned from your previous chats. This can't be undone."},resetModalConfirm:{id:"settingsModal.resetModalConfirm",defaultMessage:"Confirm reset"},resetModalCancel:{id:"settingsModal.resetModalCancel",defaultMessage:"Cancel"},resetSuccessful:{id:"settingsModal.resetSuccessful",defaultMessage:"Your GPT's memory has been reset."},resetFailed:{id:"settingsModal.resetFailed",defaultMessage:"Failed to reset your GPT's memory."},on:{id:"personalizationSettings.on",defaultMessage:"On"},off:{id:"personalizationSettings.off",defaultMessage:"Off"},customInstructions:{id:"personalizationSettings.customInstructions",defaultMessage:"Custom instructions"},enablePersonalizationRowLabel:{id:"personalizationSettings.enablePersonalizationRowLabel",defaultMessage:"Enable customization"},enablePersonalizationRowDescription:{id:"personalizationSettings.enablePersonalizationRowDescription",defaultMessage:"Customize how ChatGPT responds to you. {learnMoreLink}",values:{learnMoreLink:r.jsx(no,{href:"https://help.openai.com/en/articles/8096356-chatgpt-custom-instructions-faq",className:"underline",children:r.jsx(j,{id:"dyoG1M",defaultMessage:"Learn more"})})}},manageMemoriesButton:{id:"personalizationSettings.manageMemoriesButton",defaultMessage:"Manage memories"},RecordModeTitle:{id:"personalizationSettings.recordModeTitle",defaultMessage:"Record mode"},recordModeToggleLabel:{id:"personalizationSettings.recordModeToggleLabel",defaultMessage:"Reference record history"},recordModeDescription:{id:"personalizationSettings.recordModeDescription",defaultMessage:"Let ChatGPT reference all previous recording transcripts and notes when responding."},connectorSearchToggleLabel:{id:"personalizationSettings.connectorSearchToggleLabel",defaultMessage:"Connector search"},connectorSearchDescription:{id:"personalizationSettings.connectorSearchDescription",defaultMessage:"Let ChatGPT automatically search connected sources for answers."},pulseSettingTitle:{id:"personalizationSettings.pulseSettingTitle",defaultMessage:"Pulse"},pulseReferenceMemoriesToggleLabel:{id:"personalizationSettings.pulseReferenceMemoriesToggleLabel",defaultMessage:"Reference Memory in suggestions"},pulseReferenceMemoriesDescription:{id:"personalizationSettings.pulseReferenceMemoriesDescription",defaultMessage:'Let ChatGPT use memories proactively in suggestions. Turning this off will disable "Pulse". {learnMoreLink}',values:{learnMoreLink:r.jsx(no,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",className:"underline",children:r.jsx(j,{id:"lFx4tz",defaultMessage:"Learn more"})})}},pulseEntrypointToggleLabel:{id:"personalizationSettings.pulseEntrypointToggleLabel",defaultMessage:'Show "Pulse" in new chats'},settingsPersonalitySelectionRowTitle:{id:"personalizationSettings.settingsPersonalitySelectionRowTitle",defaultMessage:"Base style and tone"},settingsPersonalitySelectionRowDescription:{id:"personalizationSettings.settingsPersonalitySelectionRowDescription",defaultMessage:"Set the style and tone ChatGPT uses when responding."}}),Mst=be({engineeringStudent:{id:"userContextModal.rolePlaceholder.engineeringStudent",defaultMessage:"Engineering student at University of Waterloo"},gastroenterologist:{id:"userContextModal.rolePlaceholder.gastroenterologist",defaultMessage:"Gastroenterologist"},sourdoughBaker:{id:"userContextModal.rolePlaceholder.sourdoughBaker",defaultMessage:"Small-batch home sourdough baker"},interiorDesigner:{id:"userContextModal.rolePlaceholder.interiorDesigner",defaultMessage:"Interior designer"},daycareManager:{id:"userContextModal.rolePlaceholder.daycareManager",defaultMessage:"Home daycare manager"},familyLawAttorney:{id:"userContextModal.rolePlaceholder.familyLawAttorney",defaultMessage:"Family law attorney"},excelWizard:{id:"userContextModal.rolePlaceholder.excelWizard",defaultMessage:"Excel wizard"},level10Mage:{id:"userContextModal.rolePlaceholder.level10Mage",defaultMessage:"Level 10 mage"},pharmaSales:{id:"userContextModal.rolePlaceholder.pharmaSales",defaultMessage:"Pharma sales"},freelanceCopywriter:{id:"userContextModal.rolePlaceholder.freelanceCopywriter",defaultMessage:"Freelance copywriter"},weddingPhotographer:{id:"userContextModal.rolePlaceholder.weddingPhotographer",defaultMessage:"Wedding photographer"},catHerder:{id:"userContextModal.rolePlaceholder.catHerder",defaultMessage:"Professional cat herder"},cdlDriver:{id:"userContextModal.rolePlaceholder.cdlDriver",defaultMessage:"CDL driver"},thirdGradeTeacher:{id:"userContextModal.rolePlaceholder.thirdGradeTeacher",defaultMessage:"Third-grade teacher"}}),GRe=R(()=>P(()=>import("./mv59uia51hlqeiwb.js"),__vite__mapDeps([203,1])),{loading:t=>O(t)}),WRe=R(()=>P(()=>import("./dt7r1tuc81rn6vox.js"),__vite__mapDeps([462,1])),{loading:t=>O(t)}),zRe=({disabled:t=!1,onChange:e,onSubmit:n,placeholder:s,value:o,name:a,tip:i,hasModError:l,className:c,size:d="md",showCharacterCount:u=!0,autoHighlight:f=!1,isNewCustomInstructionsUIEnabled:m=!1,maxLength:p=$U,dynamicHeight:g=!1,rows:h,textareaClassName:x})=>{var F;const v=ne(),y=_.useRef(null);_.useEffect(()=>{f&&y.current&&requestAnimationFrame(()=>{var $;($=y.current)==null||$.select(),On.setAutoHighlightNicknameInput(!1)})},[f]),_.useEffect(()=>{if(!g||!y.current)return;const $=y.current,H=()=>{$.style.height="auto",$.style.height=Math.min($.scrollHeight+2,120)+"px"};return H(),$.addEventListener("input",H),()=>{$.removeEventListener("input",H)}},[g,o]);const b=ae(cM),C=ae(vq),S=!b,[k,E]=_.useState(!1),[T,M]=_.useState(S),A=!S&&k&&!T,I=S&&!T,N=HRe(o,p),L=$=>{$.nativeEvent.isComposing||!t&&$.key==="Enter"&&$.metaKey&&!$.shiftKey&&!$.nativeEvent.isComposing&&($.preventDefault(),n())},D=_.useRef(null);return r.jsxs(r.Fragment,{children:[i&&r.jsx(Mt,{testId:"modal-user-context-tip",isOpen:I,type:"success",size:"custom",className:"max-w-lg",title:v.formatMessage(hu.tipsHeader),showCloseButton:!0,onClose:()=>{M(!0)},children:i}),r.jsxs(Ul,{open:A,children:[r.jsxs("div",{className:c,ref:D,children:[r.jsx(vr,{asChild:!0,children:r.jsx("textarea",{ref:y,className:W("bg-token-main-surface-primary w-full resize-none focus:ring-transparent",x,{"rounded-sm p-4":d!=="sm"&&!m,"rounded-lg border text-sm":d==="sm"||m,"border-orange-400 focus:border-orange-400":l,"border-red-500 focus:border-red-500":N&&!l,"focus-token-border-heavy border-token-border-default":!N&&!l,"opacity-30":t,"placeholder:text-gray-400":d==="sm"||m,"placeholder:text-gray-300":!m,"overflow-y-auto":g}),name:a,disabled:t,placeholder:s,onKeyDown:L,rows:h!=null?h:d==="sm"?1:b&&!C?6:5,value:o,onChange:e,onBlur:()=>{E(!1)},onFocus:()=>{E(!0)},style:{maxHeight:g?"120px":void 0,verticalAlign:"top"}})}),r.jsx("div",{className:W("flex items-center justify-between px-1 text-xs tabular-nums",N?"text-red-600":"text-token-text-tertiary"),children:l?r.jsx("div",{className:"visible mt-2 text-start text-xs text-orange-400",children:r.jsx(j,U(w({},hu.modApiVoilation),{values:{policyLink:$=>r.jsx("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:$}),feedbackLink:$=>r.jsx("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:$})}}))}):r.jsxs(r.Fragment,{children:[u&&r.jsx("div",{children:"".concat(o.length,"/").concat(p)}),i&&r.jsx("button",{className:"flex items-center gap-1",onClick:()=>{var $;($=y.current)==null||$.focus(),M(!T)},tabIndex:-1,children:r.jsx(mn,{initial:!1,children:k&&r.jsx(Xe.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:T?r.jsxs(r.Fragment,{children:[r.jsx(j,w({},hu.showTips)),r.jsx(GRe,{className:"icon-xs"})]}):r.jsxs(r.Fragment,{children:[r.jsx(j,w({},hu.hideTips)),r.jsx(WRe,{className:"icon-xs"})]})},"show-hide")})})]})})]}),i&&r.jsx($l,{container:(F=D.current)==null?void 0:F.ownerDocument.body,children:r.jsx(Vl,{side:"right",align:"start",sideOffset:12,className:"popover animate-slideLeftAndFade border-token-border-default bg-token-main-surface-primary text-token-text-primary relative z-50 max-w-[220px] rounded-xl border p-4 text-sm shadow-[0px_4px_14px_rgba(0,0,0,0.06)] select-none xl:max-w-xs",onOpenAutoFocus:$=>{$.preventDefault()},onCloseAutoFocus:$=>{$.preventDefault()},children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("strong",{children:r.jsx(j,w({},hu.tipsHeader))}),i]})})})]})]})};function qRe({children:t,className:e,footer:n,title:s}){return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:W("flex flex-col gap-2",e),children:[r.jsx("div",{className:"text-body-small-emphasized [font-weight:500]",children:s}),t]}),n]})}const YRe=R(()=>P(()=>Promise.resolve().then(()=>wm),void 0),{loading:t=>O(t)}),ZRe=R(()=>P(()=>import("./kspsmo2l8jg7uqdj.js"),__vite__mapDeps([26,1])),{loading:t=>O(t)}),go=be({formResponseSound:{id:"audioParagen.formResponseSound",defaultMessage:"Clearer sound"},formResponseAccent:{id:"audioParagen.formResponseAccent",defaultMessage:"Better accent"},formResponseMoreExpressive:{id:"audioParagen.formResponseMoreExpressive",defaultMessage:"More expressive"},formResponseNotExpressive:{id:"audioParagen.formResponseNotExpressive",defaultMessage:"Not expressive"},formResponseDistortedAudio:{id:"audioParagen.formResponseDistortedAudio",defaultMessage:"Distorted audio"},formResponsePoorAccent:{id:"audioParagen.formResponsePoorAccent",defaultMessage:"Poor accent"},formThankYou:{id:"audioParagen.formThankYou",defaultMessage:"Thank you for making Voice Mode better!"},formWhyChoose:{id:"audioParagen.formWhyChoose",defaultMessage:"Why did you choose your response?"},formOptionalFeedback:{id:"audioParagen.formOptionalFeedback",defaultMessage:"Other feedback (Optional)"},formOptionalFeedbackPlaceholder:{id:"audioParagen.formOptionalFeedbackPlaceholder",defaultMessage:"Anything you'd like to share?"},formBack:{id:"audioParagen.formBack",defaultMessage:"Back"},formSubmit:{id:"audioParagen.formSubmit",defaultMessage:"Submit"}}),Uk={clearer_sound:go.formResponseSound,better_accent:go.formResponseAccent,more_expressive:go.formResponseMoreExpressive,not_expressive:go.formResponseNotExpressive,distorted_audio:go.formResponseDistortedAudio,poor_accent:go.formResponsePoorAccent};function KRe({option:t,reviews:e,onSelect:n}){const s=t in Uk?Uk[t]:null;if(!s)return null;const o=e.includes(t);return r.jsx(_e,{icon:o?ZRe:YRe,color:o?"primary":"secondary",className:"py-2 ps-2 pe-3 text-xs font-normal",onClick:()=>n(t),children:r.jsx(j,w({},s))})}function QRe({reviewOptions:t,feedback:e,selectedReviewOptions:n,onReviewOptionsChanged:s,onOptionalFeedbackChanged:o,onBack:a,onSubmit:i}){const l=_.useRef(null),c=ne();_.useEffect(()=>{l.current&&l.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[]);function d(f){n.includes(f)?s(n.filter(m=>m!==f)):s([...n,f])}function u(f){o(f.target.value)}return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"gap flex flex-col",children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(j,w({},go.formThankYou))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(j,w({},go.formWhyChoose))})]}),r.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:t.map(f=>r.jsx(KRe,{option:f,reviews:n,onSelect:d},f))}),r.jsx(qRe,{title:r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(j,w({},go.formOptionalFeedback))}),children:r.jsx(zRe,{disabled:!1,onChange:u,onSubmit:rs,value:e,name:"audio_paragen_optional_feedback",placeholder:c.formatMessage(go.formOptionalFeedbackPlaceholder),showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0,size:"md"})}),r.jsxs("div",{className:"flex flex-row gap-2 self-end",children:[r.jsx(_e,{color:"ghost",onClick:a,children:r.jsx(j,w({},go.formBack))}),r.jsx(_e,{onClick:i,children:r.jsx(j,w({},go.formSubmit))})]})]})}const JRe=["clearer_sound","better_accent","more_expressive"],XRe=["not_expressive","distorted_audio","poor_accent"];function Ast({lastUserMessageId:t,setIsDismissed:e}){const n=V(),[s,o]=_.useState("options"),[a,i]=_.useState([]),[l,c]=_.useState(""),d=_.useRef(null),u=_.useRef(!1),f=gd(k=>k.selectedId),{data:m}=to(Lt.TrainingAllowed),{data:p}=to(Lt.VoiceTrainingAllowed),{selectParagen:g,submitParagenResults:h,setShouldShowThankYouTooltip:x}=X1();_.useEffect(()=>{B.logUpsellOrModalEvent(un,{eventId:"audio_paragen_prompt_shown",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);function v(){g(null),i([]),o("options")}function y(k){d.current&&window.clearTimeout(d.current),g(k),d.current=window.setTimeout(()=>{o("review")},1e3)}function b(){e(!0),BEe(t),x(!0)}function C(){if(h(t,a,l),!m||!p){o("opt-in");return}b()}const S=_.useCallback(k=>{u.current||(u.current=!0,B.logEventWithStatsig("Audio Paragen: View","chatgpt_audio_paragen_view",{count:k}))},[]);return r.jsx(Xe.div,{className:"relative max-w-[548px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.5,delay:.75}},exit:{opacity:0},children:r.jsxs(yv,{children:[r.jsx(Xe.div,{layout:"size",className:"shadow-xxs overflow-hidden rounded-2xl border p-6 text-sm focus:outline-hidden",children:r.jsx(mn,{mode:"wait",initial:!1,children:r.jsx(Xe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},exit:{opacity:0},children:s==="options"?r.jsx(VRe,{selectedId:f,onSelect:y,onMount:S}):s==="review"?r.jsx(QRe,{reviewOptions:f!==sh?JRe:XRe,feedback:l,selectedReviewOptions:a,onReviewOptionsChanged:i,onOptionalFeedbackChanged:c,onBack:v,onSubmit:C}):s==="opt-in"?r.jsx(LRe,{onSubmit:b}):null},s)})}),r.jsx(gn,{className:"absolute end-6 top-6",onClick:()=>{B.logEventWithStatsig("Audio Paragen: Dismissed Modal","chatgpt_audio_paragen_dismissed_modal"),st(n,Fe.hasSeenAudioParagenPrompt),e(!0)}})]})})}function eLe(t,e){var a;if(!t)return!1;if(e)return!0;const s=["gpt-4o-gdrive","gpt-4o-gdrive-1007-mclick","gpt-4o-gdrive-1124","gpt-4o-gdrive-1124-citation","gpt-4o-gdrive-0212","gpt-4o-gdrive-0314","o1_ca_0226","o3_mini_ca_0226"].includes(t.id),o=!!((a=t.product_features.contextual_answers)!=null&&a.is_eligible_for_contextual_answers);return s||o}function E4(t){const e=V(),n=mM(),s=ph(t!=null?t:null,e);return n&&eLe(t,s)}function tLe(t,e){const n=E4(t!=null?t:null),s=V(),o=bq(s);return!n||!o?!1:o===Cq.DOGFOODING?!!e:!0}const nLe=R(()=>P(()=>import("./nz44s7ebe5b6pll5.js"),__vite__mapDeps([30,1])),{loading:t=>O(t)});function sLe(t,e,n,s){if(e)return t?n&&n!==s?"/g/".concat(t,"/shared/c/").concat(e,"?project_id=").concat(t,"&owner_user_id=").concat(n):"/g/".concat(t,"/c/").concat(e):"/c/".concat(e)}function Ist({clientThreadId:t,turn:e,isFinalTurn:n}){return Ve(t,o=>!n&&e.messages.some(a=>(o==null?void 0:o.continuingSharedConversationLastMessageId)===a.id))?r.jsx("div",{className:"mx-auto mt-8 -mb-2 flex justify-center pb-2",children:r.jsxs("p",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(nLe,{className:"icon-xs me-2"}),r.jsx(j,{id:"threadLayout.sharedConversationPrivateDisclaimer",defaultMessage:"Messages beyond this point are only visible to you"})]})}):null}function jst({clientThreadId:t,turn:e}){var u,f,m,p,g,h,x,v;const n=At(t),s=V(),o=et(s),a=(f=(u=e.messages.find(y=>{var b;return(b=y.metadata)==null?void 0:b.branching_from_conversation_title}))==null?void 0:u.metadata)==null?void 0:f.branching_from_conversation_title,i=(p=(m=e.messages.find(y=>{var b;return(b=y.metadata)==null?void 0:b.branching_from_conversation_id}))==null?void 0:m.metadata)==null?void 0:p.branching_from_conversation_id,l=(h=(g=e.messages.find(y=>{var b;return(b=y.metadata)==null?void 0:b.branching_from_conversation_owner}))==null?void 0:g.metadata)==null?void 0:h.branching_from_conversation_owner,c=(v=(x=e.messages.find(y=>{var b;return(b=y.metadata)==null?void 0:b.gizmo_id}))==null?void 0:x.metadata)==null?void 0:v.gizmo_id,d=sLe(c,i,l,o==null?void 0:o.normalizedAccountUserId);return a?r.jsx(Ir,{children:r.jsxs("div",{className:"mx-auto mt-8 flex w-full items-center justify-center",children:[r.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),r.jsx("p",{className:"mx-3 shrink text-xs whitespace-nowrap text-gray-500",children:r.jsx(j,{id:"threadLayout.branchConversationDisclaimer",defaultMessage:"Branched from {conversationTitle}",values:{conversationTitle:(n||l)&&d?r.jsx(Lf,{className:"font-semibold",href:d,children:a}):r.jsx("span",{className:"font-semibold",children:a})}})}),r.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]})}):null}const oLe="bg-token-main-surface-primary text-token-text-primary",aLe="openai",$k=["bg-blue-300 text-white"];function rLe(t){var e;return $k[((e=t==null?void 0:t.charCodeAt(0))!=null?e:0)%$k.length]}const Sp=({children:t})=>r.jsx("div",{className:"pt-0",children:r.jsx("div",{className:W(_.isValidElement(t)&&t.type===cg?"gizmo-bot-avatar":"gizmo-shadow-stroke","flex h-8 w-8 items-center justify-center overflow-hidden rounded-full"),children:t})});function Nst(t){var m;const{messages:e,isUserTurn:n,avatarClassName:s,gizmo:o}=t,a=e[0],i=(m=a==null?void 0:a.metadata)==null?void 0:m.shared_conversation_id,l=i!=null,c=cn(),{gizmoEditorData:d,mode:u}=rv();let f=r.jsx(Sp,{children:r.jsx(cg,{className:s!=null?s:oLe,iconName:aLe})});return o?f=r.jsx(Sp,{children:r.jsx(fke,{gizmoId:o.gizmo.id,className:"h-full w-full"})}):d!=null&&u==="test"&&(f=r.jsx(Y1,{isFirstParty:!1,src:d.profilePictureUrl,className:"h-8 w-8 first:pt-[3px]"})),r.jsx("div",{children:n?l?r.jsx(Sp,{children:r.jsx(cg,{className:rLe(i),iconName:"user"})}):r.jsx(Sp,{children:r.jsx(D3,{user:c})}):f})}const iLe=Dt(()=>({displayingSideBySideFeedback:!1})),lLe=R(()=>P(()=>Promise.resolve().then(()=>eD),void 0),{loading:t=>O(t)}),cLe=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)}),dLe=R(()=>P(()=>import("./hd8c06uahj4xlwsm.js"),__vite__mapDeps([454,1])),{loading:t=>O(t)}),Vk=R(()=>P(()=>import("./mfltpwlb4iyi1q6i.js"),__vite__mapDeps([463,1])),{loading:t=>O(t)}),uLe=R(()=>P(()=>import("./d8urt6z8czylb5p6.js"),__vite__mapDeps([251,1])),{loading:t=>O(t)}),fLe=R(()=>P(()=>import("./bnipcvjraeep7qjy.js"),__vite__mapDeps([252,1])),{loading:t=>O(t)}),mLe=R(()=>P(()=>import("./dvfjdfwc50k8htst.js"),__vite__mapDeps([253,1])),{loading:t=>O(t)}),pLe=R(()=>P(()=>import("./m7doe4pqk3hjrm1e.js"),__vite__mapDeps([464,1])),{loading:t=>O(t)}),Hk=R(()=>P(()=>import("./kfciwy69uk039ng9.js"),__vite__mapDeps([34,1])),{loading:t=>O(t)}),Gk=R(()=>P(()=>import("./d5o1u4o4wu2s3dug.js"),__vite__mapDeps([465,1])),{loading:t=>O(t)}),gLe=R(()=>P(()=>import("./ghusiygna4o32qi1.js"),__vite__mapDeps([466,1])),{loading:t=>O(t)}),Wk=R(()=>P(()=>import("./idxkrx2slxhzm8qh.js"),__vite__mapDeps([255,1])),{loading:t=>O(t)}),zk=R(()=>P(()=>import("./l48iylqopn5miofx.js"),__vite__mapDeps([257,1])),{loading:t=>O(t)}),hLe=R(()=>P(()=>import("./iz9ybw36zj0rjajq.js"),__vite__mapDeps([336,1])),{loading:t=>O(t)}),_Le=R(()=>P(()=>import("./qsma96iq2r14xcmh.js"),__vite__mapDeps([467,1])),{loading:t=>O(t)}),xLe=R(()=>P(()=>import("./h5j364hdjn039hzj.js"),__vite__mapDeps([468,1])),{loading:t=>O(t)}),yLe=R(()=>P(()=>import("./jwueg8vspq9yhps2.js"),__vite__mapDeps([258,1])),{loading:t=>O(t)}),qk=R(()=>P(()=>import("./e9c4tgzw8sr4ptnc.js"),__vite__mapDeps([259,1])),{loading:t=>O(t)}),vLe=R(()=>P(()=>import("./hjef14qauats368u.js"),__vite__mapDeps([260,1])),{loading:t=>O(t)}),bLe=R(()=>P(()=>import("./h4evwzl4k6skj8r7.js"),__vite__mapDeps([469,1])),{loading:t=>O(t)}),Yk=R(()=>P(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([35,1])),{loading:t=>O(t)}),CLe=R(()=>P(()=>import("./okzlvevr93wa1zvp.js"),__vite__mapDeps([37,1])),{loading:t=>O(t)}),SLe=R(()=>P(()=>import("./dvib5d1jxvc518h5.js"),__vite__mapDeps([262,1])),{loading:t=>O(t)}),wLe=R(()=>P(()=>import("./h48j4g76f726xzx4.js"),__vite__mapDeps([263,1])),{loading:t=>O(t)}),kLe=R(()=>P(()=>import("./c0ojy1t76yvdowjm.js"),__vite__mapDeps([470,1])),{loading:t=>O(t)}),ELe=R(()=>P(()=>import("./kl9nc8lw2zbngsxu.js"),__vite__mapDeps([471,1])),{loading:t=>O(t)}),TLe=R(()=>P(()=>import("./hegd51otv5xzo53u.js"),__vite__mapDeps([472,1])),{loading:t=>O(t)}),Zk=R(()=>P(()=>import("./firqr8dqm1h7owx1.js"),__vite__mapDeps([264,1])),{loading:t=>O(t)}),MLe=R(()=>P(()=>import("./1z12ka0sjzwi5bk4.js"),__vite__mapDeps([337,1])),{loading:t=>O(t)}),ALe=R(()=>P(()=>import("./kjvygvhx30u8mxny.js"),__vite__mapDeps([265,1])),{loading:t=>O(t)}),Kk=R(()=>P(()=>import("./l9asex3m3rhov6mj.js"),__vite__mapDeps([267,1])),{loading:t=>O(t)}),ILe=R(()=>P(()=>import("./icogg96ipnevhswg.js"),__vite__mapDeps([268,1])),{loading:t=>O(t)}),jLe=R(()=>P(()=>import("./l4q37jna5u8671pr.js"),__vite__mapDeps([269,1])),{loading:t=>O(t)}),NLe=R(()=>P(()=>import("./fo0x0epn1mhbz6yk.js"),__vite__mapDeps([270,1])),{loading:t=>O(t)}),PLe=R(()=>P(()=>import("./kbwf70iamjdvta7y.js"),__vite__mapDeps([271,1])),{loading:t=>O(t)});function RLe({messages:t,isRequestActive:e,isLastMessageInTurn:n,isRetrieval:s,isUsingGizmo:o,isUsingProject:a}){var x,v;const i=GU({messages:t}),l=LLe(t),c=l.filter(y=>GLe(y,!1)&&!WLe(y)),d=(x=c[c.length-1])!=null?x:void 0,u=ne();if(zLe(t).some(({content:y})=>y.content_type===ut.SystemError))return null;let f=Zs.Running;const m=c.filter(y=>y.type===Wt.Search).length,p={count:c.length-m,domain:d?gM((v=e_(d))!=null?v:""):void 0,query:d?VU(d):void 0};let g=s?o?a?u.formatMessage(Kt.searchingProjectFiles):u.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):u.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):u.formatMessage({id:"message.tools.browse.running",defaultMessage:"Searching the web"});return t.some(WX)?(f=Zs.Stopped,g=s?o?u.formatMessage({id:"browsingMessage.searchingKnowledgeStopped",defaultMessage:"Stopped searching knowledge"}):u.formatMessage({id:"browsingMessage.retrievalStopped",defaultMessage:"Stopped reading documents"}):u.formatMessage({id:"message.tools.browse.stopped",defaultMessage:"Search stopped"})):!n||!e?l.length>0&&l.every(y=>y.didError)?(f=Zs.Error,g=s?o?u.formatMessage({id:"browsingMessage.searchingKnowledgeFailed",defaultMessage:"Error searching knowledge"}):u.formatMessage({id:"browsingMessage.retrievalFailed",defaultMessage:"Error reading documents"}):u.formatMessage({id:"message.tools.browse.failed",defaultMessage:"Search failed"})):(f=Zs.Finished,g=s?null:p.count===0?u.formatMessage({id:"message.tools.browse.started",defaultMessage:"Searching the web..."}):u.formatMessage({id:"message.tools.browse.finished",defaultMessage:"Searched {count, plural, =0 {0 sites} one {# site} other {# sites}}"},p)):i.length>0?g=WU({contextualAnswerSources:i,intl:u}):c.length>0&&(g=VLe(u,p,s,o,c[c.length-1])),(c.length>0||s&&n)&&f!==Zs.Error?r.jsx(Zx,{highlightedCommand:g,showWorkUserSetting:!1,status:f,children:c.length===0?null:r.jsx(OLe,{commands:c})}):r.jsx(qLe,{$isError:f===Zs.Error,children:g})}function Qk(t){var e,n,s;return((e=t.metadata)==null?void 0:e.command)==="quote"||((n=t.metadata)==null?void 0:n.command)==="quote_full"||((s=t.metadata)==null?void 0:s.command)==="quote_lines"}function LLe(t){return t.map((e,n)=>{if(e.author.role!==Ke.Tool||n>0&&Qk(e)&&Qk(t[n-1]))return null;const s=e.metadata;if(!s)return null;const{command:o,status:a}=s;return o?{type:o,status:a,didError:e.content.content_type===ut.SystemError,message:e}:null}).filter(H3)}function OLe({commands:t}){const e=ne();return r.jsx("div",{className:"divide-token-border-default border-token-border-default mb-4 divide-y rounded-xl border text-sm",children:r.jsx(mn,{initial:!1,children:t.map((n,s)=>{const o=BLe(n);if(o==null)return null;const{icon:a,url:i,title:l,externalLink:c}=o,d=i?gM(i):void 0,u=l?typeof l=="string"?l:e.formatMessage(l):null,f=i&&rb(i);return r.jsx(Xe.div,{initial:"collapsed",animate:"open",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:r.jsxs(DLe,{url:c!=null?c:i,className:W("flex items-start gap-3 px-4 py-3",l?"text-token-text-secondary":"text-token-text-primary",s===0&&"rounded-t-xl",s===t.length-1&&"rounded-b-xl"),children:[a?r.jsx(a,{className:"icon-sm text-token-text-secondary mt-0.5 shrink-0"}):i?r.jsx(ks,{url:i,className:"mt-1"}):null,r.jsxs("div",{children:[u&&r.jsxs("div",{className:"text-token-text-primary line-clamp-1",children:[f&&"".concat(f,"  "),u]}),r.jsx("div",{children:d})]})]})},s)})})})}function DLe({url:t,children:e,className:n}){return t?r.jsxs("a",{href:t,target:"_blank",className:W(n,"group hover:bg-token-main-surface-secondary relative"),rel:"noreferrer",children:[e,r.jsx("div",{className:"from-token-main-surface-secondary invisible absolute end-3 bg-linear-to-l to-transparent ps-4 group-hover:visible",children:r.jsx(cLe,{className:"icon text-token-text-secondary"})})]}):r.jsx("div",{className:n,children:e})}function FLe(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type!=="file"?e.title:null}function VU(t){var e,n;return(n=(e=t.message.metadata)==null?void 0:e.args)==null?void 0:n[0]}function BLe(t){var e,n,s;switch(t.type){case Wt.Search:{const o=(e=t.message.metadata)==null?void 0:e.search_engine;if(o&&o!==wq.Bing)return null;const a=VU(t);return{icon:lLe,url:((n=t.message.metadata)==null?void 0:n.message_source)==="apple"?null:"bing.com",externalLink:$Le(t),title:a?"".concat(a,""):Ge({id:"message.tools.browse.querying",defaultMessage:"Querying"})}}case Wt.Click:case Wt.MultiClick:case Wt.Lookup:case Wt.OpenUrl:case Wt.Open:case Wt.Quote:case Wt.QuoteFull:case Wt.QuoteLines:case Wt.Scroll:return{url:e_(t),title:(s=FLe(t))!=null?s:void 0};case Wt.Spinner:case Wt.Back:return null}}function ULe(t){const e=new URLSearchParams({query:t.query});return"".concat(Jc,"/bing/redirect?").concat(e.toString())}function $Le(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n.args)==null?void 0:s[0];return e===void 0?null:ULe({query:e})}function VLe(t,e,n,s,o){switch(o==null?void 0:o.type){case Wt.Click:case Wt.MultiClick:case Wt.Lookup:case Wt.OpenUrl:case Wt.Quote:case Wt.QuoteFull:case Wt.QuoteLines:case Wt.Scroll:case Wt.Open:case Wt.Back:return t.formatMessage({id:"message.tools.browse.reading",defaultMessage:"Browsing {domain}"},e);case Wt.Search:case void 0:return n?s?t.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):t.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):t.formatMessage({id:"message.tools.browse.searching",defaultMessage:'Searching "{query}"'},e);case Wt.Spinner:return null}}function HLe(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type==="file"?e.name:null}function GLe(t,e){switch(t.type){case Wt.Search:return!0;case Wt.Click:case Wt.Lookup:case Wt.MultiClick:case Wt.OpenUrl:case Wt.Quote:case Wt.QuoteFull:case Wt.QuoteLines:return e?HLe(t)!=null:e_(t)!=null;case Wt.Open:case Wt.Back:case Wt.Scroll:case Wt.Spinner:return!1}}function WLe(t){var e;return((e=t.message.metadata)==null?void 0:e.message_source)==="apple"}function e_(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type!=="file"?e.url:null}function zLe(t){return t.filter(e=>e.author.role===Ke.Tool)}var OE;const qLe=mt.p(OE||(OE=ct(["first:mt-0 my-1.5 h-8 flex items-center ltr:me-auto rtl:ms-auto empty:hidden\n",""])),({$isError:t})=>t?"text-token-text-error":"text-token-text-secondary"),T4={aha_sync_connector:"Aha!",asana_sync_connector:"Asana",azure_devops_sync_connector:"Azure Boards",basecamp_sync_connector:"Basecamp",google_drive:"Google Drive",sharepoint:"SharePoint",slack:"Slack",github:"GitHub",clickup_sync_connector:"ClickUp",dropbox_sync_connector:"Dropbox",box_sync_connector:"Box",linear_sync_connector:"Linear",intercom_sync_connector:"Intercom",notion_sync_connector:"Notion",confluence_sync_connector:"Confluence",jira_sync_connector:"Jira",jira_servicemanagement_sync_connector:"Jira Service",hubspot_sync_connector:"HubSpot",salesforce_sync_connector:"Salesforce",freshdesk_sync_connector:"Freshdesk",freshservice_sync_connector:"Freshservice",front_sync_connector:"Front",gitlab_sync_connector:"GitLab Issues",gorgias_sync_connector:"Gorgias",helpscout_sync_connector:"Help Scout",ironclad_sync_connector:"Ironclad",pipedrive_sync_connector:"Pipedrive",salesforce_service_cloud_sync_connector:"Salesforce Service Cloud",shortcut_sync_connector:"Shortcut",teamwork_sync_connector:"Teamwork.com",zendesk_sync_connector:"Zendesk",zoho_sync_connector:"Zoho",zoho_desk_sync_connector:"Zoho Desk",slurm_sharepoint:"SharePoint",slurm_linear:"Linear",slurm_box:"Box",slurm_dropbox:"Dropbox",slurm_gmail:"Gmail",slurm_google_drive:"Google Drive",slurm_notion:"Notion",slurm_hubspot:"HubSpot"},HU={aha_sync_connector:PLe,asana_sync_connector:NLe,azure_devops_sync_connector:jLe,basecamp_sync_connector:ILe,google_drive:Yk,sharepoint:Hk,slack:mLe,github:wLe,clickup_sync_connector:ALe,dropbox_sync_connector:Zk,box_sync_connector:Kk,linear_sync_connector:zk,intercom_sync_connector:yLe,notion_sync_connector:Wk,confluence_sync_connector:MLe,jira_sync_connector:hLe,jira_servicemanagement_sync_connector:_Le,hubspot_sync_connector:qk,salesforce_sync_connector:Gk,freshdesk_sync_connector:TLe,freshservice_sync_connector:ELe,front_sync_connector:kLe,gitlab_sync_connector:SLe,gorgias_sync_connector:bLe,helpscout_sync_connector:vLe,ironclad_sync_connector:xLe,pipedrive_sync_connector:gLe,salesforce_service_cloud_sync_connector:Gk,shortcut_sync_connector:pLe,teamwork_sync_connector:fLe,zendesk_sync_connector:uLe,zoho_sync_connector:Vk,zoho_desk_sync_connector:Vk,slurm_sharepoint:Hk,slurm_linear:zk,slurm_box:Kk,slurm_dropbox:Zk,slurm_gmail:CLe,slurm_google_drive:Yk,slurm_notion:Wk,slurm_hubspot:qk},GU=({messages:t})=>[...t.filter(Sq).reduce((s,o)=>{var a,i;return(i=(a=o.metadata)==null?void 0:a.retrieval_search_sources)==null||i.forEach(l=>{(l.product_type==="contextual_answers"||l.product_type==="slurm")&&l.source_name in T4&&s.add(l.source_name)}),s},new Set)],WU=({contextualAnswerSources:t,intl:e})=>{const n=t.map(a=>{var i;return(i=T4[a])!=null?i:a}).filter(Boolean),s=t.map(a=>{var l;const i=(l=HU[a])!=null?l:dLe;return r.jsx(i,{className:"icon-sm"},a)}).filter(Boolean),o=t.length===1?e.formatMessage({id:"Jzt2om",defaultMessage:"Reading {source}"},{source:n[0]}):t.length===2?e.formatMessage({id:"wTM7gR",defaultMessage:"Reading {source1} and {source2}"},{source1:n[0],source2:n[1]}):e.formatMessage({id:"xnwjH1",defaultMessage:"Reading {source1}, {source2} and more"},{source1:n[0],source2:n[1]});return t.length>0?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center gap-1",children:s}),o]}):void 0},Pst=Object.freeze(Object.defineProperty({__proto__:null,BrowsingMessage:RLe,CA_SOURCE_TO_ICON_MAP:HU,CA_SOURCE_TO_TEXT_MAP:T4,getCASources:GU,getContextualAnswerDisplayText:WU,getVisitedUrl:e_},Symbol.toStringTag,{value:"Module"})),YLe=R(()=>P(()=>Promise.resolve().then(()=>gm),void 0),{loading:t=>O(t)}),ZLe=/^(\d+)([^]*)([^]+)?$/,KLe=["Citation Marker","Content Snippet","Content source","File created at","File last modified at","Mclick Target","Title"];function Rst(t){const e=[];if(!t||typeof t!="object")return null;if(!Object.hasOwn(t,"results"))return null;const n=t.results;if(!Array.isArray(n))return null;const s=n.map(Jk);for(const a of s){if(a==null)return null;e.push(a)}let o;if(Object.hasOwn(t,"debug_info")){const a=t.debug_info;if(!a||typeof a!="object"||!Object.hasOwn(a,"retrieval_results")||!Array.isArray(a.retrieval_results))return null;const i=a.retrieval_results;o={retrieval_results:[]};for(const l of i){if(!l||typeof l!="object"||typeof l.query!="string"||!Array.isArray(l.results))return null;const c=l.query,d=l.results.map(Jk),u=[];for(const f of d){if(!f)return null;u.push(f)}o.retrieval_results.push({query:c,results:u})}}return{results:e,debug_info:o}}function Jk(t){const e={};if(!t||typeof t!="object")return null;for(const[n,s]of Object.entries(t))n==="score"&&typeof s=="number"?e.score=s:["document_id","content","title","created_at","updated_at","file_created_at","file_modified_at","document_chunk_id","cloud_doc_url","document_source"].includes(n)&&(s==null||typeof s=="string")&&(e[n]=s!=null?s:void 0);return e.document_id==null||e.content==null?null:U(w({},e),{document_id:e.document_id,content:e.content})}function QLe(t){var i;if(!t.startsWith("# "))return null;const e=t.slice(2),n=ZLe.exec(e);if(!n||n.length<3)return null;const s=parseInt(n[1],10),o=n[2],a=((i=n[3])==null?void 0:i.slice(1))||void 0;return{resultNum:s,title:o,documentId:a}}function zU(t,e){var i,l;const n=[];let s=null,o="";const a=t.split("\n");a.length>0&&a[a.length-1].startsWith("Visible: ")&&(o=(i=a.pop())!=null?i:"");for(const c of a){const d=c.trim(),u=QLe(d);if(u){const{resultNum:f,documentId:m,title:p}=u;s&&n.push(s),s={resultNum:f,title:(l=p||m)!=null?l:"",documentId:m,contents:"",metadata:{}}}else if(s)if(s.contents)s.contents+="\n".concat(c);else{let f=!1;for(const m of KLe){const p="".concat(m,":");if(d.startsWith(p)){s.metadata[m]=d.slice(p.length),f=!0;break}}f||(s.contents=c)}}if(s&&n.push(s),e)for(let c=0;c<n.length;c++)n[c].metadata.cloud_doc_url?n[c].cloudDocUrl=String(n[c].metadata.cloud_doc_url):c<e.length&&(n[c].cloudDocUrl=e[c]);return{visibilityLine:o,chunks:n}}function Lst(t){const e=t.content;switch(e.content_type){case ut.Text:return e.parts.join();case ut.ExecutionOutput:case ut.SystemError:case ut.Code:case ut.SystemMessage:case ut.TetherQuote:case ut.TetherBrowsingCode:return e.text;case ut.TetherBrowsingDisplay:return e.result;case ut.SonicWebpage:return e.text;case ut.UserEditableContext:case ut.ModelEditableContext:case ut.Error:return null;case ut.MultimodalText:return Xk(e.parts);case ut.SystemContent:case ut.DeveloperContent:return e.instructions==null?null:typeof e.instructions=="string"?e.instructions:Xk(e.instructions);case ut.StructuredThoughts:case ut.ReasoningRecap:return null;case ut.ComputerOutput:return null;case ut.SuperWidget:return null;case ut.CitableCodeOutput:return e.output_str}}function Xk(t){return t.filter(e=>typeof e=="string").join()}function Ost(t){var s;const e=t.trim().split("/").filter(o=>o.length>0);if(!e.length)return null;const n=e[0].trim();return n?{connectorName:n==="uploaded_files:"?"uploaded files":n,Icon:(s=s5(n))!=null?s:YLe}:null}const JLe=250,XLe=700;function Dst(t){"use forget";var Te,Ne,De,de;const e=G.c(61),{handleShowRetrievalResults:n,clientThreadId:s,turnIndex:o,className:a,responseComplete:i}=t,l=V();let c;e[0]!==o?(c=oe=>he.getConversationTurnAtIndex(oe,o).messages,e[0]=o,e[1]=c):c=e[1];const d=Ve(s,c);let u;e[2]!==s||e[3]!==l?(u=()=>bn(yt(l,s)),e[2]=s,e[3]=l,e[4]=u):u=e[4];const f=ae(u),m=E4(f);let p;e[5]!==s||e[6]!==i||e[7]!==o?(p={clientThreadId:s,turnIndex:o,responseComplete:i},e[5]=s,e[6]=i,e[7]=o,e[8]=p):p=e[8];const g=p;let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=function(we){var fe;const Ce=new Map;for(const re of we){const ve=((fe=re.name)!=null?fe:"").trim().toLowerCase();Ce.set(ve,re)}return Ce.size<3?we:Array.from(Ce.values())},e[9]=h):h=e[9];const x=h;let v;e[10]!==l||e[11]!==m?(v=()=>{if(m)return gv(l,{skipLogos:!1})},e[10]=l,e[11]=m,e[12]=v):v=e[12];const y=ae(v);let b;e:{if(!m){let we;e[13]===Symbol.for("react.memo_cache_sentinel")?(we=[],e[13]=we):we=e[13],b=we;break e}let oe;if(e[14]!==y||e[15]!==d){const we=new Map,Ce=new Set;for(const fe of d)if(fe.author.role===Ke.Tool&&fe.author.name==="api_tool.call_tool"&&fe.content.content_type===ut.MultimodalText&&((Te=fe.metadata)==null?void 0:Te.api_tool_type)==="glaux"){const re=(Ne=fe.metadata)==null?void 0:Ne.citation_metadata,ve=re==null?void 0:re.id;if(!re||!ve||!re.url)continue;const Me=typeof(re==null?void 0:re.__connector_id)=="string"?re.__connector_id:void 0,{Icon:$e,appName:Le}=Hx({connectorId:Me,cloud_doc_url:re.url,availableConnectors:y}),Ae={id:ve,Icon:$e,appName:Le,name:re.title,cloud_doc_url:re.url,connectorId:Me};we.set(ve,Ae)}else if(r4(fe)){const re=zU(fe.content.result),ve=(de=(De=fe.metadata)==null?void 0:De.cloud_doc_urls)!=null?de:[];re.chunks.forEach((Me,$e)=>{if(!Me.documentId||Ce.has(Me.documentId))return;let Le;if(Me.metadata.cloud_doc_url)Le=Me.metadata.cloud_doc_url.toString();else if($e<ve.length)Le=ve[$e];else if(Me.documentId.endsWith("--google")){const Qe=Me.documentId.split("--")[1];Le="https://drive.google.com/file/d/".concat(Qe)}if(!Le)return;Ce.add(Me.documentId);const{Icon:Ae,appName:He}=Hx({cloud_doc_url:Le});we.set(Me.documentId,{id:Me.documentId,name:Me.title,cloud_doc_url:Le,Icon:Ae,appName:He})})}oe=Array.from(we.values()).filter(oOe),e[14]=y,e[15]=d,e[16]=oe}else oe=e[16];b=oe}const C=b;let S;if(e[17]!==C){const oe=new Map;for(const we of C)we.Icon&&oe.set(we.appName,we.Icon);S=Array.from(oe.values()).slice(0,3),e[17]=C,e[18]=S}else S=e[18];const k=S,E=_.useRef(!1);let T;e[19]!==g||e[20]!==C.length?(T=()=>{E.current||C.length>0&&(E.current=!0,B.logEvent("File Sources Carousel Shown",g))},e[19]=g,e[20]=C.length,e[21]=T):T=e[21];let M;e[22]!==g||e[23]!==C?(M=[C,g],e[22]=g,e[23]=C,e[24]=M):M=e[24],_.useEffect(T,M);let A;e[25]!==C?(A=x(C),e[25]=C,e[26]=A):A=e[26];const I=A,[N,L]=_.useState(0),[D,F]=_.useState(!1);let $;e[27]===Symbol.for("react.memo_cache_sentinel")?($=[],e[27]=$):$=e[27];const H=_.useRef($);let z;e[28]!==I?(z=I.map(sOe).join("|"),e[28]=I,e[29]=z):z=e[29];const K=z,J=_.useRef(0);let Z,q;e[30]!==N?(Z=()=>{J.current=N},q=[N],e[30]=N,e[31]=Z,e[32]=q):(Z=e[31],q=e[32]),_.useEffect(Z,q);const se=_.useRef(!1);let ie,ee;e[33]!==D?(ie=()=>{se.current=D},ee=[D],e[33]=D,e[34]=ie,e[35]=ee):(ie=e[34],ee=e[35]),_.useEffect(ie,ee);let le;e[36]!==I.length||e[37]!==C.length?(le=()=>{if(H.current.forEach(nOe),H.current=[],I.length===0){_.startTransition(()=>{F(!1),L(0)});return}const oe=Math.min(J.current,I.length,3),we=oe>0?oe:Math.min(1,I.length);_.startTransition(()=>{L(we),C.length<=3&&F(!1)});const Ce=Math.min(3,I.length);for(let fe=we;fe<Ce;fe=fe+1,fe){const re=window.setTimeout(()=>{L(ve=>Math.max(ve,fe+1))},JLe*fe);H.current.push(re)}if(C.length>3&&!se.current){const fe=window.setTimeout(()=>F(!0),XLe);H.current.push(fe)}return()=>{H.current.forEach(tOe),H.current=[]}},e[36]=I.length,e[37]=C.length,e[38]=le):le=e[38];let X;e[39]!==K||e[40]!==I.length||e[41]!==C.length?(X=[K,I.length,C.length],e[39]=K,e[40]=I.length,e[41]=C.length,e[42]=X):X=e[42],_.useEffect(le,X);const te=Math.min(N,I.length),ce=D&&C.length>3;if(C.length===0)return null;let ue;e[43]!==a?(ue=W("flex w-full flex-row gap-2",a),e[43]=a,e[44]=ue):ue=e[44];let me;e[45]===Symbol.for("react.memo_cache_sentinel")?(me=W("flex w-full flex-1 transform-gpu flex-row justify-start gap-2"),e[45]=me):me=e[45];let xe;e[46]!==I||e[47]!==te?(xe=I.slice(0,te).map(eOe),e[46]=I,e[47]=te,e[48]=xe):xe=e[48];let pe;e[49]!==g||e[50]!==n||e[51]!==k||e[52]!==C.length||e[53]!==ce?(pe=ce&&r.jsx(rOe,{overflowIcons:k,count:C.length,onClick:()=>{B.logEvent("File Sources Carousel Clicked",g),n()}}),e[49]=g,e[50]=n,e[51]=k,e[52]=C.length,e[53]=ce,e[54]=pe):pe=e[54];let Ee;e[55]!==xe||e[56]!==pe?(Ee=r.jsxs("div",{className:me,children:[xe,pe]}),e[55]=xe,e[56]=pe,e[57]=Ee):Ee=e[57];let Se;return e[58]!==ue||e[59]!==Ee?(Se=r.jsx("div",{className:ue,children:Ee}),e[58]=ue,e[59]=Ee,e[60]=Se):Se=e[60],Se}function eOe(t){return r.jsx(aOe,{item:t},t.id)}function tOe(t){return window.clearTimeout(t)}function nOe(t){return window.clearTimeout(t)}function sOe(t){return t.id}function oOe(t){return!!t.cloud_doc_url}const aOe=_.memo(function(e){"use forget";const n=G.c(16),{item:s}=e;if(!s)return null;let o,a,i,l;n[0]===Symbol.for("react.memo_cache_sentinel")?(o={opacity:0,x:6},a={opacity:1,x:0},i={type:"spring",stiffness:180,damping:26,mass:.8},l={willChange:"transform, opacity"},n[0]=o,n[1]=a,n[2]=i,n[3]=l):(o=n[0],a=n[1],i=n[2],l=n[3]);const c=s.cloud_doc_url;let d;n[4]===Symbol.for("react.memo_cache_sentinel")?(d=W("block h-[64px] min-w-0 flex-1 basis-0","relative flex flex-col gap-1 rounded-2xl px-4 py-3","border-token-border-default border","bg-token-bg-primary","hover:bg-token-bg-tertiary cursor-pointer"),n[4]=d):d=n[4];const u=s.Icon?s.Icon:null;let f;n[5]!==s.appName?(f=r.jsx("div",{className:"text-token-text-secondary line-clamp-1 text-xs",children:s.appName}),n[5]=s.appName,n[6]=f):f=n[6];let m;n[7]!==u||n[8]!==f?(m=r.jsxs("div",{className:"flex items-center gap-1",children:[u,f]}),n[7]=u,n[8]=f,n[9]=m):m=n[9];let p;n[10]!==s.name?(p=r.jsx("div",{className:"text-token-text-primary line-clamp-1 truncate text-sm",children:s.name}),n[10]=s.name,n[11]=p):p=n[11];let g;return n[12]!==s.cloud_doc_url||n[13]!==p||n[14]!==m?(g=r.jsxs(Xe.a,{initial:o,animate:a,transition:i,style:l,href:c,target:"_blank",rel:"noreferrer",className:d,children:[m,p]}),n[12]=s.cloud_doc_url,n[13]=p,n[14]=m,n[15]=g):g=n[15],g}),rOe=_.memo(function(e){"use forget";const n=G.c(15),{overflowIcons:s,count:o,onClick:a}=e;let i,l,c,d;n[0]===Symbol.for("react.memo_cache_sentinel")?(i={opacity:0,x:6},l={opacity:1,x:0},c={type:"spring",stiffness:180,damping:26,mass:.8},d={willChange:"transform, opacity"},n[0]=i,n[1]=l,n[2]=c,n[3]=d):(i=n[0],l=n[1],c=n[2],d=n[3]);let u;n[4]===Symbol.for("react.memo_cache_sentinel")?(u=Array.from({length:3}),n[4]=u):u=n[4];let f;n[5]!==s?(f=r.jsx("div",{className:"flex flex-row gap-1",children:u.map((h,x)=>{const v=s[x];return r.jsx("div",{children:v||r.jsx("div",{className:"icon-sm rounded-full object-cover"})},x)})}),n[5]=s,n[6]=f):f=n[6];let m;n[7]!==o?(m=r.jsx("div",{className:"text-token-text-primary text-start text-sm",children:r.jsx(j,{id:"aQJYKd",defaultMessage:"{count} {count, plural, one {source} other {sources}}",values:{count:o}})}),n[7]=o,n[8]=m):m=n[8];let p;n[9]!==f||n[10]!==m?(p=r.jsxs("div",{className:"flex h-full flex-col justify-between",children:[f,m]}),n[9]=f,n[10]=m,n[11]=p):p=n[11];let g;return n[12]!==a||n[13]!==p?(g=r.jsx(Xe.button,{initial:i,animate:l,transition:c,style:d,className:"bg-token-bg-primary hover:bg-token-bg-tertiary border-token-border-default flex h-[64px] min-w-[110px] shrink-0 flex-col justify-between rounded-2xl border px-4 py-3",onClick:a,children:p}),n[12]=a,n[13]=p,n[14]=g):g=n[14],g}),e9=R(()=>P(()=>Promise.resolve().then(()=>gm),void 0),{loading:t=>O(t)});function Fst({handleShowRetrievalResults:t,clientThreadId:e,turnIndex:n,responseComplete:s=!1}){const o=V(),a=vde(),[i,l]=Ve(e,x=>[he.getTurnContentReferences(x,n),he.getConversationTurnAtIndex(x,n).messages]),c=_.useMemo(()=>({turnIndex:n,clientThreadId:e,responseComplete:s}),[e,s,n]),d=_.useRef(!1);_.useEffect(()=>{d.current||(d.current=!0,B.logEvent("File Sources Footer Shown",c))},[c]);const u=_.useCallback(()=>{B.logEvent("File Sources Footer Clicked",c),t()},[t,c]),f=sg(()=>bn(yt(o,e))),m=E4(f),p=sg(()=>{if(m)return gv(o,{skipLogos:!1})}),g=_.useMemo(()=>{var S,k,E,T,M,A;const x=new Set,v=new Map;function y(I,N){!I||x.has(I)||(x.add(I),v.set(I,{url:I,connectorId:N}))}if(i.forEach(I=>{var N,L;I.type==="file"?y((L=I.cloud_doc_url)!=null?L:(N=I.extra)==null?void 0:N.cloud_doc_url):I.type==="file_navlist"&&I.items.forEach(D=>{y(D.cloud_doc_url)})}),s){for(const I of l)if(r4(I)){const N=zU(I.content.result),L=(k=(S=I.metadata)==null?void 0:S.cloud_doc_urls)!=null?k:[],D=N.chunks;for(let F=0;F<D.length;F++){const $=D[F];if(!$.documentId)continue;if(F<L.length){y(L[F]);continue}const H=$.documentId.endsWith("--google")?$.documentId.split("--")[1]:void 0,z=(E=$.metadata.cloud_doc_url)!=null?E:H?"https://drive.google.com/file/d/".concat(H):void 0;y(z==null?void 0:z.toString())}break}else if(I.author.role===Ke.Tool&&I.author.name==="api_tool.call_tool"&&I.content.content_type===ut.MultimodalText&&((T=I.metadata)==null?void 0:T.api_tool_type)==="glaux"){const N=(M=I.metadata)==null?void 0:M.citation_metadata;if(!N||!N.url)continue;y(N.url,(A=N==null?void 0:N.__connector_id)!=null?A:"")}}const b=ye(o,"1424158285")||a,C=new Map;for(const[I,{connectorId:N}]of v.entries()){const{appName:L,Icon:D}=Hx({connectorId:N,cloud_doc_url:I,availableConnectors:p});if(D?C.set(L,r.jsx("div",{className:"icon-sm",children:D})):b&&I.length>0?C.set(I,r.jsx(ks,{url:I,className:"icon-sm object-cover",size:32,minSize:20,fallback:r.jsx(e9,{className:"icon-sm"})})):C.set("connected-apps",r.jsx(e9,{className:"icon-sm"})),C.size>2)break}return new Set(Array.from(C.values()))},[l,i,s,o,a,p]),h=jn(hn);return g.size===0&&!s||h?null:r.jsx("div",{className:"relative h-[60px]",children:r.jsx(Xe.div,{className:"absolute h-[60px]",initial:{opacity:0},animate:{opacity:1},children:r.jsxs("button",{className:W("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary mt-3 mb-2 flex w-fit items-center gap-1.5 rounded-xl border py-2","ps-3 pe-2.5"),onClick:u,children:[g.size>0&&r.jsx("div",{className:"flex flex-row-reverse gap-1",children:Array.from(g).reverse().map((x,v)=>r.jsx(Xe.div,{className:W("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden","group-hover/footnote:border-token-main-surface-secondary","relative"),initial:{opacity:0},animate:{opacity:1},children:x},v))}),r.jsx("div",{className:"text-token-text-secondary flex items-center gap-0.5 text-xs font-semibold",children:r.jsx(j,{id:"/48IOP",defaultMessage:"Sources"})})]})})})}var DE;const Bst=mt.header(DE||(DE=ct(["draggable no-draggable-children sticky top-0 p-2 touch:p-2.5 flex items-center justify-between z-20 h-header-height bg-token-main-surface-primary"]))),Ust=128;function $st(t){var l;const i=t,{tooltip:e,className:n,testId:s}=i,o=ke(i,["tooltip","className","testId"]),a=r.jsx(_e,U(w({color:(l=t.color)!=null?l:"secondary",size:"medium"},o),{className:n,"data-testid":s}));return e!=null?r.jsx(_t,{label:e,children:a}):a}function Vst({label:t,disabled:e=!1,tooltipText:n,value:s}){const o=_.useId();return r.jsx("div",{className:W("flex items-center gap-2",e?"opacity-50":""),children:r.jsx(_t,{disabled:n==null,label:n,side:"right",triggerAs:null,children:r.jsxs("label",{htmlFor:o,className:"flex cursor-pointer items-center gap-1",children:[r.jsx(Yb,{id:o,value:s,disabled:e,className:"me-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full border border-gray-500 bg-white dark:border-gray-600 dark:bg-gray-700",children:r.jsx(Zb,{className:"h-2 w-2 rounded-full bg-gray-950 dark:bg-white"})}),t]})})})}function Hst(t){return r.jsx(Dp,U(w({},t),{className:W("rounded-sm! checked:border-black! checked:bg-black! dark:border-gray-600 dark:bg-gray-700",t.className)}))}const Gst=({gizmo:t})=>r.jsx("div",{className:"text-token-text-tertiary pointer-events-none text-sm select-none","aria-hidden":!0,inert:!0,children:t.gizmo.display.name}),Wst=t=>{var e,n,s;return((s=(n=(e=t.metadata)==null?void 0:e.suggested_connector_ids)==null?void 0:n.length)!=null?s:0)>0},zst=t=>t.recipient==="api_tool.call_tool",qst=t=>t.recipient===eA,iOe=t=>{var e;t=Array.isArray(t)?t:[t];for(let n=t.length-1;n>=0;n--){const{metadata:s}=t[n];if((e=s==null?void 0:s.suggested_connector_ids)!=null&&e.length)return s.suggested_connector_ids}return[]},lOe=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:n}=t[e];if(n!=null&&n.cta_by_suggested_connector_id)return n.cta_by_suggested_connector_id}return{}};R(()=>P(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([144,1])),{loading:t=>O(t)});const cOe=({conversation:t,connectorId:e,connector:n,hasLink:s,callToAction:o,imageUrl:a})=>{const i=ne(),l=H8();_.useEffect(()=>{sd(y_(e),od.SuggestionTrigger,En({clientThreadId:t.serverId$()}))},[]);const c=Ca(()=>{x.current||(x.current=!0,GF({intl:i,conversation:t,systemHint:{name:n.name,systemHint:y_(e)}}))}),[d,u]=Us(),f=d.get(kq)==="true",m=d.get("oauth_success"),p=d.get("connector_id"),g=ove(Eq()).current,h=gr.useStore(),x=_.useRef(!1);_.useEffect(()=>{!m||p!==e||(u(E=>(E.delete("oauth_success"),E.delete("system_hint"),E.delete("connector_id"),E)),c())},[m,u,c,e,p]),_.useEffect(()=>{!e||!f||g!==e||c()},[f,e,g,c]);const{logo_url:v,logo_url_dark:y}=n,{data:b}=S1({lightLogoUrl:v,darkLogoUrl:y}),C=a||(b==null?void 0:b.url),[S,k]=_.useState(!1);return r.jsxs(Xe.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1,duration:.5,type:"spring"},type:"button",className:"group after:bg-token-bg-secondary relative z-10 flex items-center gap-4 after:absolute after:-inset-2 after:z-[-1] after:hidden after:rounded-xl after:opacity-50 after:content-[''] hover:after:block",onClick:()=>{if(Ie.count(je.ECOSYSTEM,"suggestion_hint_clicked"),sd(y_(e),od.SuggestionClick,En({clientThreadId:t.serverId$()})),s)c();else{Ie.count(je.ECOSYSTEM,"inline_message_suggestion_connect_modal_opened"),B.logEventWithStatsig("Ecosystem app: Inline message suggestion connect modal opened","chatgpt_web_ecosystem_inline_message_suggestion_connect_modal_opened");const E=t.serverId$(),T=E?new URL(Vo(E),window.location.origin):new URL(window.location.href);T.searchParams.set("connector_id",e),T.searchParams.set("oauth_success","true");const M=h.getActiveSystemHintType();M&&T.searchParams.set("system_hint",M);const A=n.supported_auth.length===1&&n.supported_auth[0].type==="OAUTH"?"OAUTH":void 0;l({connectorId:e,authTypeOverride:A,redirectAfter:T.toString(),referrer:pa.MessageSuggestion,showSettingsBehindConnectorLink:!1})}},children:[C&&r.jsx("div",{className:W("flex items-center justify-center overflow-hidden",!S&&"shimmer",a?"h-14 w-14 rounded-lg":W("bg-token-bg-primary h-12 w-12 rounded-xl","shadow-[0_0_0_0.5px_rgba(0,0,0,0.05),0_0.5px_1px_0_rgba(0,0,0,0.09),0_5px_8px_-3px_rgba(0,0,0,0.05)]","dark:shadow-[0_0_0_0.5px_rgba(255,255,255,0.05),0_0.5px_1px_0_rgba(255,255,255,0.09),0_5px_8px_-3px_rgba(255,255,255,0.05)]")),children:r.jsx("img",{className:W("object-contain",a?"h-full w-full":"h-8 w-8 overflow-hidden rounded-lg"),src:C,onLoad:()=>k(!0),"aria-hidden":"true"})}),r.jsxs("div",{className:"flex flex-col items-start gap-1 pe-2",children:[r.jsxs("span",{className:"text-token-text-primary inline-flex items-center text-base",children:[r.jsx("span",{className:"truncate",children:o}),null]}),r.jsxs("div",{className:"flex flex-1 items-start gap-2",children:[a&&!0&&r.jsx("span",{className:"h-4.5 w-4.5 shrink-0 overflow-hidden rounded-md",children:(b==null?void 0:b.url)&&r.jsx("img",{src:b.url,className:"h-full w-full",alt:n.name})}),r.jsx("span",{className:"text-token-text-tertiary group-hover:text-token-text-secondary truncate text-sm",children:s?r.jsx(j,{id:"6RY8V3",defaultMessage:"Use {connectorName}",values:{connectorName:n.name}}):r.jsx(j,{id:"tbpdYd",defaultMessage:"Connect {connectorName}",values:{connectorName:n.name}})})]})]})]})},dOe=t=>{"use forget";const e=G.c(10),{conversation:n,messages:s}=t,o=iOe(s),{platformConnectors:a}=Ad(),{connectorLinks:i}=Uf();let l;e[0]!==s?(l=lOe(s),e[0]=s,e[1]=l):l=e[1];const c=l,d=o.length>1,u="border-token-border-light my-2 flex gap-10 border-t pt-4";let f;e[2]!==i||e[3]!==n||e[4]!==c||e[5]!==d||e[6]!==a?(f=g=>{var y,b;const h=a.get(g);if(!h||!g)return null;const x=h.suggestion_config,v=(y=c[g])!=null?y:x==null?void 0:x.call_to_action;return!x||!v?null:r.jsx(cOe,{conversation:n,connectorId:g,connector:h,hasLink:i.has(g),callToAction:v,imageUrl:d?null:(b=x.image_url)!=null?b:null},g)},e[2]=i,e[3]=n,e[4]=c,e[5]=d,e[6]=a,e[7]=f):f=e[7];const m=o.map(f);let p;return e[8]!==m?(p=r.jsx("div",{className:u,children:m}),e[8]=m,e[9]=p):p=e[9],p},Yst=t=>{"use forget";const e=G.c(6),{isCompletionRequestInProgress:n,conversation:s,messages:o}=t;let a;e[0]!==s||e[1]!==n||e[2]!==o?(a=!n&&r.jsx(dOe,{conversation:s,messages:o},"message-suggestion"),e[0]=s,e[1]=n,e[2]=o,e[3]=a):a=e[3];let i;return e[4]!==a?(i=r.jsx(C3,{name:"EcosystemMessageSuggestion",children:r.jsx(mn,{children:a})}),e[4]=a,e[5]=i):i=e[5],i},uOe=R(()=>P(()=>import("./dch45l9yrtbjo93p.js"),__vite__mapDeps([362,1])),{loading:t=>O(t)}),fOe=R(()=>P(()=>import("./bknzejg1bftcxssf.js"),__vite__mapDeps([473,1])),{loading:t=>O(t)});function t_({domain:t,url:e,title:n,thumbnail_url:s,description:o,pub_date:a,subscript:i,theme:l="default",thumbnailOverlay:c,ThumbnailErrorIcon:d=uOe,descriptionClassName:u="line-clamp-2",onLogClick:f}){const m=ne(),p=_.useRef(!1),[g,h]=_.useState("loading"),[x,v]=_.useState("loading");return _.useEffect(()=>{setTimeout(()=>{v(y=>y==="loading"?"error":y)},5e3)},[]),r.jsxs(no,{href:e,target:"_self",className:W("hover:bg-token-interactive-bg-secondary-hover thread-sm:px-4 flex w-full justify-between gap-6 rounded-xl px-2 py-2.5",!o&&"min-h-[96px]"),draggable:!1,onMouseDown:()=>p.current=!1,onMouseMove:()=>p.current=!0,onClick:y=>p.current?(p.current=!1,y.preventDefault()):f==null?void 0:f(),children:[r.jsxs("div",{className:"flex flex-col overflow-hidden",children:[l==="default"&&r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:W("border-token-border-light border-thin relative h-[28px] w-[28px] shrink-0 self-center overflow-hidden rounded-lg p-1.25",x==="loading"&&"loading-results-shimmer"),children:[r.jsx("div",{className:W("absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat opacity-30 dark:opacity-20",x==="loaded"&&"blur-md",x==="error"&&"bg-token-bg-tertiary"),children:r.jsx(ks,{url:e,size:256,minSize:32,containerClassName:W(x!=="loaded"&&"hidden"),className:"h-10 w-10"})}),r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[r.jsx(ks,{url:e,size:128,minSize:32,containerClassName:W("overflow-hidden rounded-md",x!=="loaded"&&"hidden"),className:"icon-sm h-4 w-4",onLoad:()=>v("loaded"),onError:()=>v("error")}),x==="error"&&r.jsx(fOe,{className:"icon-md text-token-text-tertiary"})]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"line-clamp-1 text-sm [overflow-wrap:anywhere] select-text",children:t}),r.jsx("span",{className:"text-token-text-secondary mt-0.5 line-clamp-1 align-top text-xs [overflow-wrap:anywhere] select-text",children:mOe(e)})]})]}),n&&r.jsx("span",{className:W("mt-2.5 text-base font-medium [overflow-wrap:anywhere] text-[var(--interactive-label-accent-default)] select-text",l==="default"&&"line-clamp-2",l==="sub-result"&&"line-clamp-1"),children:n}),(o!=null?o:a)&&r.jsxs("div",{className:W("text-token-text-secondary mt-1 line-clamp-2 w-full text-sm font-normal [overflow-wrap:anywhere] select-text",u),children:[r.jsx("span",{className:"text-token-text-tertiary",children:a&&r.jsxs(r.Fragment,{children:[hB(m,new Date(a)),o&&r.jsxs(r.Fragment,{children:[r.jsx(kw,{}),"",r.jsx(kw,{})]})]})}),o]}),i&&r.jsx("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 text-sm select-text",children:i})]}),s&&l==="default"&&r.jsx("div",{className:"self-center",children:r.jsxs("div",{className:"relative ms-auto block aspect-video min-h-[144px] w-[222px] min-w-0 overflow-hidden rounded-xl",children:[s&&r.jsx("img",{src:s,alt:"",className:W("absolute inset-0 h-full w-full object-cover opacity-0",g==="loaded"&&"opacity-100"),loading:"lazy",onLoad:()=>h("loaded"),onError:()=>h("error")}),r.jsx("div",{className:W("loading-results-shimmer absolute inset-0",{hidden:g!=="loading"})}),r.jsx("div",{className:W("bg-token-bg-secondary absolute inset-0 flex items-center justify-center",{hidden:g!=="error"}),children:r.jsx(d,{className:"icon-2xl opacity-15"})}),c]})})]})}function mOe(t){let e;try{e=decodeURIComponent(t)}catch(o){console.warn("Unable to decode URL",{url:t,error:o}),e=t}const n=e.replace(/\/$/,"");return n.match("youtube.com/watch")?n:n.replace(/\?.*$/,"")}function pOe(t){return t.find(e=>{var n;return!!((n=e.metadata)!=null&&n.crisis_helpline_message)})}function gOe(t){"use forget";const e=G.c(11),{message:n,className:s}=t,o=n.metadata.crisis_helpline_message;let a;e[0]!==s?(a=W("shadow-short flex flex-col rounded-lg p-4",s),e[0]=s,e[1]=a):a=e[1];let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i={a:_Oe},e[2]=i):i=e[2];let l;e[3]!==o.text?(l=r.jsx(Bs,{className:"text-sm",componentOverrides:i,children:o.text}),e[3]=o.text,e[4]=l):l=e[4];let c;e[5]!==o.links?(c=o.links.length>0&&r.jsx("div",{className:"flex flex-col gap-2",children:o.links.map(hOe)}),e[5]=o.links,e[6]=c):c=e[6];let d;return e[7]!==a||e[8]!==l||e[9]!==c?(d=r.jsxs("div",{className:a,children:[l,c]}),e[7]=a,e[8]=l,e[9]=c,e[10]=d):d=e[10],d}function hOe(t){return r.jsx("div",{className:"rounded-lg bg-[var(--bg-quaternary)] py-1",children:r.jsx(t_,{url:t.url,domain:t.domain,title:t.title,description:t.description})},t.url)}function _Oe(t){const o=t,{node:e,children:n}=o,s=ke(o,["node","children"]);return r.jsx("a",U(w({},s),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:n}))}const xOe=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)}),Zst=({message:t,clientThreadId:e,isUserTurn:n})=>{var i,l,c,d;const s=Ve(e,u=>{var f,m;return t&&((f=t.metadata)==null?void 0:f.async_task_id)&&he.hasContinuedFromAsyncTask(u,t==null?void 0:t.id,(m=t==null?void 0:t.metadata)==null?void 0:m.async_task_id)});if(!t||!(s||n&&((i=t.metadata)!=null&&i.async_task_title)))return null;const o=(l=t.metadata)==null?void 0:l.async_task_original_message_id,a=()=>{o&&(Ze(e,u=>{u.scrollToMessageId=o}),requestAnimationFrame(()=>{Ze(e,u=>{u.scrollToMessageId=void 0})}))};return r.jsx(r1e,{icon:r.jsx(xOe,{className:"h-4 w-4"}),label:(d=(c=t.metadata)==null?void 0:c.async_task_title)!=null?d:"",as:"button",onClick:a,isUserTurn:n})},yOe=({icons:t,size:e,stackOrder:n="bottom"})=>r.jsx("div",{className:"flex items-center",children:t.map((s,o)=>r.jsx("div",{className:"border-token-border-default box-content rounded-full border border-1 bg-white",style:{marginInlineStart:o===0?0:-e/2,zIndex:n==="bottom"?t.length-o:void 0,width:e,height:e,padding:e/4-1},children:s},o))}),vOe=R(()=>P(()=>import("./kfciwy69uk039ng9.js"),__vite__mapDeps([34,1])),{loading:t=>O(t)}),bOe=R(()=>P(()=>import("./h48j4g76f726xzx4.js"),__vite__mapDeps([263,1])),{loading:t=>O(t)}),COe=R(()=>P(()=>import("./firqr8dqm1h7owx1.js"),__vite__mapDeps([264,1])),{loading:t=>O(t)}),SOe=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)}),t9=R(()=>P(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([35,1])),{loading:t=>O(t)});function Kst({clientThreadId:t,connectorToUpsell:e,analyticsMetadata:n}){const s=V(),o=ts(s),a=Kf.useIsEnabled(t)&&!o,i=Cn(),l=!!(i!=null&&i.isAdminOfAccount()||i!=null&&i.isOwnerOfAccount()),c=!!(i!=null&&i.isPersonalAccount()),d=l&&!c,u=()=>{d&&e===Ft.GDRIVE?window.location.href="/admin/ca":e==="general"?window.location.hash="#settings/".concat(Rn.Connectors):window.location.hash="#settings/".concat(Rn.Connectors,"?connector=").concat(Wo[e===Ft.GDRIVE?bt.GDRIVE_ACTION_CONNECTOR:bt.SHAREPOINT_CONNECTOR],"&add-connector-link=true&referrer=").concat(pa.ConversationFollowup)};let f;if(e==="general")f=r.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[r.jsx(yOe,{size:16,icons:[r.jsx(t9,{width:16,height:16},"gdrive"),r.jsx(COe,{width:16,height:16},"dropbox"),r.jsx(bOe,{width:16,height:16},"github")]}),r.jsx("div",{children:r.jsx(j,{id:"k3bYdS",defaultMessage:"<b>Connect apps</b> to find answers, summarize info, and get things done",values:{b:m=>r.jsx("span",{className:"font-medium",children:m})}})})]});else{const m=e===Ft.GDRIVE?t9:vOe;f=r.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[r.jsx(m,{className:"icon-sm inline"}),r.jsx("div",{children:r.jsx(j,{id:"m1IPsN",defaultMessage:"<b>Connect {app}</b> to ask questions about all your files",values:{b:p=>r.jsx("span",{className:"font-medium",children:p}),app:e===Ft.GDRIVE?"Google Drive":"SharePoint"}})})]})}return a?r.jsxs("div",{className:"group",children:[r.jsx("hr",{className:"bg-token-bg-tertiary mt-5 mb-5 opacity-70"}),r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex w-full flex-col",children:r.jsx(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:0*.03},exit:{opacity:0,translateY:4},children:r.jsxs(Xe.button,{whileHover:"hover",className:W("bg-primary hover:bg-secondary flex w-full cursor-pointer items-start justify-start gap-2 rounded-lg px-0 py-3 text-start"),onClick:m=>{u(),B.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",U(w({},En(n)),{action:"click",connectorToUpsell:e}))},onMouseEnter:()=>{B.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",U(w({},En(n)),{action:"hover",connectorToUpsell:e}))},children:[r.jsx(Xe.div,{className:"flex items-center justify-center pt-0.25 opacity-70",variants:{hover:{x:4}},initial:{x:0},transition:{duration:.1},children:r.jsx(SOe,{className:"text-token-text-secondary icon"})}),f]})})})]}):null}const wOe=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)}),kOe=4;function qU({followups:t,analyticsMetadata:e}){const n=_.useRef(!1),s=Ud();_.useEffect(()=>{n.current||(n.current=!0,t.forEach((a,i)=>{B.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",U(w({},En(e)),{action:"show",position:(i+1).toString(),followup_text:_o(a)}))}))},[t,e]);const o=t.slice(0,kOe);return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex w-full flex-col",children:o.map((a,i,l)=>r.jsx(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:i*.03},exit:{opacity:0,translateY:4},children:r.jsx(EOe,{followUp:a,onSelectingSuggestedReply:s,analyticsMetadata:e,position:i,visibleFollowups:l})},i))})}var FE;const YU=mt.div(FE||(FE=ct(["\n  h-[1px] opacity-45\n  ","\n"])),({$isSelected:t})=>t?"mx-2 bg-token-main-surface-secondary":"bg-token-border-default");function EOe({followUp:t,onSelectingSuggestedReply:e,analyticsMetadata:n,position:s,visibleFollowups:o}){const a=l=>{e(l,t,o,s),B.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",U(w({},En(n)),{action:"click",position:(s+1).toString(),followup_text:_o(t)}))},i=()=>{B.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",U(w({},En(n)),{action:"hover",position:(s+1).toString(),followup_text:_o(t)}))};return r.jsxs(Xe.button,{whileHover:"hover",className:W("bg-token-main-surface-primary hover:bg-token-main-surface-secondary flex w-full cursor-pointer items-start justify-start gap-2 rounded-lg px-0 py-3 text-start"),onClick:a,onMouseEnter:i,children:[r.jsx(Xe.div,{className:"flex items-center justify-center pt-0.25 opacity-70",variants:{hover:{x:4}},initial:{x:0},transition:{duration:.1},children:r.jsx(wOe,{className:"text-token-text-secondary icon"})}),r.jsx("div",{className:"text-token-text-secondary pe-2 text-start text-sm",children:_o(t)})]})}const TOe=()=>r.jsx(hM,{size:"lg",lines:3,width:35,widthVariance:10,className:"w-full"}),MOe=19,AOe=4,IOe=8,jOe=2,NOe=f=>{var m=f,{as:t="div",logo:e,size:n="default",label:s,isBadge:o,isNew:a,isLauncher:i,isSelected:l=!1,tooltip:c,className:d}=m,u=ke(m,["as","logo","size","label","isBadge","isNew","isLauncher","isSelected","tooltip","className"]);const p=ne(),g=n==="large"?MOe:IOe,h=n==="large"?AOe:jOe,x=r.jsx("div",{className:W("w-".concat(g," h-").concat(g," flex aspect-square items-center justify-center rounded-full border p-").concat(h),"border-transparent bg-white","dark:bg-token-main-surface-secondary"),children:r.jsx("div",{className:W("transition-[transform_--shadow-color] duration-[0.24s]",i&&!l&&"drop-shadow-[0_6px_4px_var(--shadow-color)] [--shadow-color:transparent] group-hover/app-icon:motion-safe:scale-[1.025] group-hover/app-icon:motion-safe:[--shadow-color:rgba(0,0,0,0.1)]"),children:e})}),v=t;return r.jsxs(v,U(w(w({className:W("group/app-icon can-hover:active:scale-[0.98] flex flex-col items-center gap-3 transition-transform duration-100 w-".concat(g),o?"scale-[0.9]":"",i?"cursor-pointer":"cursor-default","opacity-80 group-hover:opacity-100",d),onClick:async y=>{var b;y.persist(),await Promise.race([new Promise(C=>{y.target.addEventListener("transitionend",()=>{C()},{once:!0})}),new Promise(C=>{setTimeout(()=>C(),200)})]),(b=u.onClick)==null||b.call(u,y)}},t==="button"?{type:"button"}:{}),u),{children:[r.jsxs("div",{className:W("relative rounded-full transition-[transform_--shadow-color] duration-[0.24s]",o&&"border-token-border-default border",i&&"dark:border-token-border-default scale-[0.9] border border-black/[0.12] shadow-none group-hover/app-icon:motion-safe:shadow-[0px_4px_12px_rgba(0,0,0,0.08)]",i&&"group-hover/app-icon:motion-safe:scale-[0.91]"),children:[!i&&x,i&&r.jsx(_t,{label:c,side:"top",children:x}),a&&r.jsx("div",{className:"text-token-text-primary absolute -start-1 -top-1 z-10 rounded-full bg-blue-500 px-1.5 py-1 text-[10px] font-bold uppercase",children:p.formatMessage({id:"kEZrwC",defaultMessage:"New"})})]}),s&&r.jsx("div",{className:W("text-token-text-secondary text-center text-[12px] leading-[17px]",l&&"text-blue-400",!i&&"w-20"),children:s})]}))},POe=R(()=>P(()=>import("./duz09euqvesjqb1t.js"),__vite__mapDeps([277,1])),{loading:t=>O(t)}),ROe=R(()=>P(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([144,1])),{loading:t=>O(t)}),LOe=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)}),OOe=t=>{var n;return(n={[Pe.Search]:"Web Search",[Pe.Research]:"Research",[Pe.PictureV2]:"Draw Image",[Pe.Think]:"Think Harder"}[t])!=null?n:"Title"},Wy=(t,e,n,s,o)=>{B.logEventWithStatsig("Capabilities Suggestion Action","chatgpt_capabilities_suggestion_action",U(w({},En(n)),{categoryId:e.categoryId,suggestionId:e.id,position:s,action:t,numSuggestions:String(o)}))},DOe=(t,e)=>{const n=_.useRef(!1);_.useEffect(()=>{n.current||(n.current=!0,t.forEach((s,o)=>{Wy("show",s,e,o+1,t.length)}))},[t,e])},ZU=({suggestions:t,analyticsMetadata:e,style:n="default"})=>{const s=Ud();return DOe(t,e),r.jsx(r.Fragment,{children:t.map((o,a)=>r.jsxs(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:4},transition:{delay:a*.03},className:W("w-full flex-1",n==="compact"&&"flex-col"),children:[n==="compact"&&a>0&&r.jsx(YU,{$isSelected:!1}),r.jsx(FOe,{suggestion:o,onSelectingSuggestedReply:s,position:a+1,numSuggestions:t.length,analyticsMetadata:e,style:n})]},o.prompt))})},FOe=({suggestion:t,onSelectingSuggestedReply:e,analyticsMetadata:n,position:s,numSuggestions:o,style:a="default"})=>{const{setThreadSystemHintMode:i}=oa(),l=V(),c=et(l),d=ot();return r.jsx(Xe.button,{onClick:u=>{if(Wy("click",t,n,s,o),t.categoryId===Pe.Research)if(c!=null&&c.isFree()){xn(d,"Suggested Capabilities Upsell");return}else i(t.categoryId,!0,n);e(u,t,[],0)},onMouseEnter:()=>{Wy("hover",t,n,s,o)},className:W("hover:bg-token-main-surface-secondary flex w-full flex-1 items-start rounded-xl text-start transition-colors duration-300 ease-in-out",a==="default"&&"gap-4 p-2"),children:a==="compact"?r.jsx(BOe,{suggestion:t}):r.jsx(UOe,{suggestion:t})})},BOe=({suggestion:t})=>{var o;const e=V(),n=ae(()=>Vs(e)),s=_.useMemo(()=>t.categoryId==="ask"||n==null?void 0:n.find(a=>a.systemHint===t.categoryId),[n,t.categoryId]);return r.jsxs("div",{className:"bg-primary hover:bg-tertiary group flex w-full cursor-pointer items-center justify-start gap-2 rounded-lg px-2 py-3 text-start transition-colors duration-300 ease-in-out",children:[r.jsx("div",{className:"flex items-center justify-center opacity-70 transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:rotate-[-5deg] group-hover:opacity-100",children:t.categoryId==="ask"?r.jsx(LOe,{className:"text-token-text-secondary group-hover:text-token-text-primary icon"}):r.jsx(sf,{svgString:(o=s==null?void 0:s.logo)!=null?o:"",className:"text-token-text-secondary icon group-hover:text-token-interactive-label-accent-default"})}),r.jsx("div",{className:"text-token-text-secondary group-hover:text-token-text-primary flex items-center pe-2 text-start text-sm",children:_o(t)})]})},UOe=({suggestion:{categoryId:t,imageUrl:e,description:n,title:s,ctaLabel:o,prompt:a}})=>{var d;const i=V(),l=ae(()=>Vs(i)),c=_.useMemo(()=>t==="ask"||l==null?void 0:l.find(u=>u.systemHint===t),[l,t]);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"border-token-border-default bg-primary relative h-16 w-14 flex-shrink-0 rounded-lg border drop-shadow-xs transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:rotate-[-2deg]",children:[t===Pe.PictureV2?r.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-lg bg-cover",style:{backgroundImage:"url(".concat(e,")")},children:r.jsx(POe,{className:"icon-xl mb-2 text-white"})}):r.jsxs("div",{className:"flex flex-col gap-1.5 p-2",children:[r.jsx("div",{className:"text-token-text-primary text-[5px] leading-tight font-semibold tracking-tighter",children:s!=null?s:OOe(t)}),r.jsx("div",{className:"flex flex-col gap-0.5",children:Array.from({length:10}).map((u,f)=>r.jsx("div",{className:"bg-token-border-heavy h-[1px] w-full rounded-full"},f))})]}),r.jsx("div",{className:"absolute -end-2 -bottom-2",children:r.jsx(NOe,{isBadge:!0,className:"opacity-100",logo:r.jsx(sf,{svgString:(d=c==null?void 0:c.logo)!=null?d:"",className:"icon"})})})]}),r.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[r.jsx("div",{className:"text-token-text-primary flex-grow",children:n!=null?n:a}),o&&r.jsxs("div",{className:"text-token-text-secondary flex items-center font-medium",children:[o,r.jsx(Xe.div,{variants:{hover:{x:2}},initial:{x:0},transition:{duration:.1},children:r.jsx(ROe,{className:"icon-sm"})})]})]})]})},M4=t=>{var e,n,s,o,a,i;return{id:t.id,prompt:t.prompt,title:(e=t.title)!=null?e:void 0,description:(n=t.description)!=null?n:void 0,categoryId:(s=t.system_hint)!=null?s:t.category_id,type:Je.Capabilities,imageUrl:(o=t.image_url)!=null?o:void 0,ctaLabel:(a=t.cta_label)!=null?a:void 0,modelOverride:(i=t.model_override)!=null?i:void 0}},$Oe=({categoryId:t,shouldFetch:e,serverThreadId:n,lastMessageId:s})=>{var c;const{data:o,isLoading:a,error:i}=rt({queryKey:["capability_suggestions",t,s],queryFn:()=>{if(!n||!s)throw new Error("Server thread ID and last user message ID are required");return ge.safePost("/conversation/experimental/suggest_capabilities",{requestBody:{conversation_id:n,message_id:s,system_hint:t,category_id:t}})},enabled:e&&!!n&&!!s});return{suggestions:(c=o==null?void 0:o.suggestions.map(M4))!=null?c:[],isLoading:a,error:i}},zy=(t,e,n,s)=>{B.logEventWithStatsig("Capabilities Tab Action","chatgpt_capabilities_tab_action",U(w({},En(n)),{tabId:e,position:s,action:t}))},VOe=(t,e)=>{const n=_.useRef(!1);_.useEffect(()=>{n.current||(n.current=!0,t.forEach((s,o)=>{zy("show",s.value,e,o+1)}))},[t,e])},HOe=({clientThreadId:t,categorySuggestions:e,lastMessageId:n,analyticsMetadata:s,style:o="default"})=>{const a=e.map(({category_id:c,title:d,suggestions:u})=>{var f;return{value:c,message:d,suggestions:(f=u==null?void 0:u.map(M4))!=null?f:[]}}),[i,l]=_.useState(a[0].value);return VOe(a,s),r.jsxs(Tq,{value:i,onValueChange:l,orientation:"horizontal",className:"flex w-full flex-col",children:[r.jsx(Mq,{className:"border-token-border-default relative flex w-full flex-row gap-6 border-b",children:a.map((c,d)=>r.jsx(WOe,{value:c.value,message:c.message,isActive:i===c.value,analyticsMetadata:s,position:d+1},c.value))}),a.map(c=>r.jsx(Aq,{value:c.value,children:r.jsx(GOe,{initialSuggestions:c.suggestions,clientThreadId:t,categoryId:c.value,isActive:i===c.value,lastMessageId:n,analyticsMetadata:s,style:o})},c.value))]})},GOe=({initialSuggestions:t,clientThreadId:e,categoryId:n,isActive:s,lastMessageId:o,analyticsMetadata:a,style:i="default"})=>{const l=At(e),c=s&&t.length===0,{suggestions:d,isLoading:u}=$Oe({categoryId:n,shouldFetch:c,serverThreadId:l,lastMessageId:o}),f=c?d:t;return n==="ask"?u?r.jsx(TOe,{}):r.jsx(qU,{followups:f.map(m=>({type:Je.Reply,text:m.prompt})),analyticsMetadata:a}):r.jsx("div",{className:"flex w-full flex-col gap-y-4 py-3 md:flex-row md:gap-x-4",children:u?r.jsxs(r.Fragment,{children:[r.jsx(n9,{}),r.jsx(n9,{})]}):r.jsx(ZU,{suggestions:f,analyticsMetadata:a,style:i})})},WOe=({value:t,message:e,isActive:n,analyticsMetadata:s,position:o})=>r.jsxs(Iq,{className:"text-token-text-tertiary hover:text-token-text-secondary radix-state-active:text-token-text-primary relative flex min-w-10 justify-center py-4 text-sm font-medium",value:t,onClick:()=>{zy("click",t,s,o)},onMouseEnter:()=>{zy("hover",t,s,o)},children:[r.jsx("div",{className:"truncate",children:e}),r.jsx(mn,{children:n&&r.jsx(Xe.div,{layoutId:"tab-underline",className:"bg-token-text-primary absolute start-0 end-0 bottom-0 h-0.5",transition:{type:"spring",stiffness:500,damping:30}})})]}),n9=()=>r.jsxs("div",{className:"flex flex-1 items-center gap-4 rounded-xl p-2",children:[r.jsx("div",{className:"bg-token-sidebar-surface-secondary dark:bg-token-border-default h-16 w-14 flex-shrink-0 rounded-lg"}),r.jsx("div",{className:"w-full flex-grow",children:r.jsx(hM,{lines:3,size:"sm"})})]}),zOe=({clientThreadId:t,categorySuggestions:e,lastMessageId:n,analyticsMetadata:s})=>{if(!e||e.length===0)return null;const o=e.length===1,a=e[0],i=a.suggestions.length>0?a.suggestions:void 0;return o&&i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-1 text-sm font-semibold",children:r.jsx(j,{id:"3UFIQc",defaultMessage:"Follow up"})}),r.jsx(ZU,{suggestions:i.map(M4),analyticsMetadata:s,style:a.style})]}):r.jsx(HOe,{clientThreadId:t,categorySuggestions:e!=null?e:[],lastMessageId:n,analyticsMetadata:s})};function qOe(t=!1){const e=V(),n=ze(e,"3692302894"),s={getCapabilitySuggestionsEnabled:jc({layer:n,paramName:"capability_suggestions",defaultValue:!1}),getPrefetchCapabilitySuggestions:jc({layer:n,paramName:"prefetch_capability_suggestions",defaultValue:!1})};return{capabilitySuggestionsEnabled:!t&&s.getCapabilitySuggestionsEnabled(),prefetchCapabilitySuggestions:!t&&s.getPrefetchCapabilitySuggestions()}}R(()=>P(()=>import("./cmgiklbz2ws6dyix.js"),__vite__mapDeps([276,1])),{loading:t=>O(t)});R(()=>P(()=>import("./hig2jg8jtxy3himk.js"),__vite__mapDeps([474,1])),{loading:t=>O(t)});R(()=>P(()=>import("./d8oagvws6ho33alg.js"),__vite__mapDeps([475,1])),{loading:t=>O(t)});const YOe=R(()=>P(()=>import("./d4qsitgbpj3e1n6x.js"),__vite__mapDeps([311,1])),{loading:t=>O(t)}),wp=R(()=>P(()=>import("./ba3v27n9os9eq40q.js"),__vite__mapDeps([272,1])),{loading:t=>O(t)}),ZOe=(t,e,n,s,o)=>{B.logEventWithStatsig("Agent Suggestion Action","chatgpt_agent_suggestion_action",U(w({},En(n)),{capability:e.capability,position:s,action:t,numSuggestions:o}))},KOe=(t,e)=>{const n=_.useRef(!1);_.useEffect(()=>{n.current||(n.current=!0,t.forEach((s,o)=>{ZOe("show",s,e,o+1,t.length)}))},[t,e])},QOe=({agentSuggestions:t,analyticsMetadata:e})=>(KOe(t,e),r.jsx(r.Fragment,{children:t.map((n,s)=>r.jsxs(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:4},transition:{delay:s*.03},className:W("w-full flex-1","flex-col"),children:[s>0&&r.jsx(YU,{$isSelected:!1}),r.jsx(JOe,{agentSuggestion:n,analyticsMetadata:e})]},n.prompt))})),JOe=t=>{"use forget";const e=G.c(14),{agentSuggestion:n}=t,s=Mi();let o;e[0]!==n.capability?(o=XOe(n.capability),e[0]=n.capability,e[1]=o):o=e[1];const a=o,i=$s();let l;e[2]!==n.prompt||e[3]!==s||e[4]!==i?(l=()=>{const m=Pt(s);m.focus(),yo(m,n.prompt),i(Pe.Agent)},e[2]=n.prompt,e[3]=s,e[4]=i,e[5]=l):l=e[5];const c=l;let d;e[6]!==a?(d=r.jsx("div",{className:"flex items-center justify-center opacity-70 transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:opacity-100",children:r.jsx(a,{className:"text-token-text-secondary group-hover:text-token-text-primary icon"})}),e[6]=a,e[7]=d):d=e[7];let u;e[8]!==n.title?(u=r.jsx("div",{className:"text-token-text-secondary group-hover:text-token-text-primary flex items-center pe-2 text-start text-sm",children:n.title}),e[8]=n.title,e[9]=u):u=e[9];let f;return e[10]!==c||e[11]!==d||e[12]!==u?(f=r.jsxs("div",{onClick:c,className:"bg-primary hover:bg-tertiary group flex w-full cursor-pointer items-center justify-start gap-2 rounded-lg px-2 py-3 text-start transition-colors duration-300 ease-in-out",children:[d,u]}),e[10]=c,e[11]=d,e[12]=u,e[13]=f):f=e[13],f},s9={action:YOe,research:wp,spreadsheet:wp,presentation:wp,default:wp},XOe=t=>{var e;return(e=s9[t])!=null?e:s9.default};function Qst({clientThreadId:t,followups:e,categorySuggestions:n,actionSuggestions:s,lastMessageId:o,analyticsMetadata:a,isTatertotFollowupsEnabled:i}){const l=V(),c=ts(l),d=Kf.useIsEnabled(t)&&!c,{capabilitySuggestionsEnabled:u}=qOe(i),f=n&&n.length>0;return s&&s.length>0?r.jsx(QOe,{agentSuggestions:s,analyticsMetadata:a}):r.jsx(r.Fragment,{children:d&&(u?f&&r.jsx(zOe,{clientThreadId:t,lastMessageId:o,categorySuggestions:n,analyticsMetadata:a}):e.length>0&&r.jsx(eDe,{followups:e,analyticsMetadata:a}))})}function eDe({followups:t,analyticsMetadata:e}){return r.jsxs("div",{className:"group",children:[r.jsx("hr",{className:"bg-token-bg-tertiary mt-5 mb-5 opacity-70"}),r.jsx(qU,{followups:t,analyticsMetadata:e})]})}class Jst extends wi()(()=>({isMultigenParagenVotingActive:!1})){setIsMultigenParagenVotingActive(e){this.setState({isMultigenParagenVotingActive:e})}static useIsMultigenParagenVotingActive(){return this.useState(e=>e.isMultigenParagenVotingActive)}}class KU extends wi()(()=>({selectedIndex:0})){setSelectedIndex(e){this.setState({selectedIndex:e})}static useSelectedIndex(){return this.useState(e=>e.selectedIndex)}}function Xst(t){"use forget";const e=G.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(KU.Provider,{store:tDe,children:n}),e[0]=n,e[1]=s):s=e[1],s}function tDe(){return new KU}const eot=t=>U5(t).some(e=>{var n;return!!((n=e.metadata)!=null&&n.chatgpt_sdk)}),_d=({icon:t,label:e,iconClassName:n,className:s,size:o="med",onClick:a,onSelect:i,onBeforeClick:l,selected:c=!1,disabled:d=!1,asMenuItem:u=!1,style:f,testId:m,trailing:p})=>{const g=u?Y.Item:"button";return r.jsx(_t,{label:e,disabled:!e||u,triggerAs:null,children:r.jsx(g,{className:W(!u&&"text-token-text-secondary hover:bg-token-bg-secondary rounded-lg",!u&&c&&"bg-token-bg-tertiary",s),"aria-label":e,"aria-pressed":c,onClick:a,onSelect:i,onPointerEnter:l,onTouchStart:l,onFocus:l,disabled:d,style:f,"data-testid":m,label:u?e:void 0,icon:u?t:void 0,trailing:u?p:void 0,children:typeof t=="function"&&!u&&r.jsx("span",{className:W("flex items-center justify-center","touch:w-10 h-8 w-8"),children:r.jsx(t,{className:n!=null?n:o==="small"?"icon-sm":"icon"})})})})};async function nDe(t,e,n,{unprocessed:s=!1}={}){var c;const o=[],a=[],i={},l=new Map;for(const d of t.messages){if(JU(d)){const u=(c=d.metadata)==null?void 0:c.content_references,f=bo(d,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0});if(s)o.push(f);else{const{messageTextToClipboardContent:m}=await P(async()=>{const{messageTextToClipboardContent:g}=await import("./e2qiox9wm3uaxg29.js").then(h=>h.j);return{messageTextToClipboardContent:g}},__vite__mapDeps([56,10,1,11,13,14,15,16,17,18,19,20,57,21,22,23,58,59,60])),p=m(f,u);p["text/plain"]&&o.push(p["text/plain"]),p["text/html"]&&a.push(p["text/html"])}if(!s&&u)for(const m of u)m.type==="file"&&sDe(m)&&!l.has(m.id)&&l.set(m.id,m)}if(jq(d)){const u=pr.getImageAssetPointers(d);if(u.length>0){const f=u[0];try{const m=At(n),{url:p}=await Qd.fetch(e,{asset:f,conversationId:m!=null?m:void 0}),h=await(await fetch(p)).blob();["image/png","image/jpeg","image/webp"].includes(h.type)&&(i[h.type]=h)}catch(m){return Promise.reject()}}}}if(!s&&l.size>0){const d=Array.from(l.values()),u=d.map(oDe).filter(m=>!!m);if(u.length>0){const m=u.map((p,g)=>"".concat(g+1,". ").concat(p));o.push(["Medical References:",...m].join("\n"))}const f=d.map(aDe).filter(m=>!!m);f.length>0&&a.push("<section><p><strong>Medical References</strong></p><ol>".concat(f.join(""),"</ol></section>"))}return o.length>0&&(i["text/plain"]=o.join("\n\n")),a.length>0&&(i["text/html"]=a.join("\n\n")),i}function sDe(t){const e=t.medical_file_reference;return e!=null&&["journal_name","authors_display","publication_year","doi","journal_homepage_url"].some(n=>{const s=e==null?void 0:e[n];return s!=null&&String(s).trim()!==""&&String(s).toLowerCase()!=="none"})}function oDe(t){const e=QU(t);if(!e)return null;const{journalName:n,authorsDisplay:s,publicationYear:o,doi:a,url:i}=e,l=[];n&&l.push(n);const c=[];return s&&c.push(s),o&&c.push(o),c.length>0&&l.push(c.join(", ")),a&&l.push("DOI: ".concat(a)),i&&l.push("URL: ".concat(i)),l.join("  ")}function aDe(t){const e=QU(t);if(!e)return null;const{journalName:n,authorsDisplay:s,publicationYear:o,doi:a,url:i}=e,l=[];if(n&&l.push("<span>".concat(_u(n),"</span>")),s||o){const c=[];s&&c.push("<em>".concat(_u(s),"</em>")),o&&c.push("<span>".concat(_u(o),"</span>")),l.push(c.join(" "))}return a&&l.push("<span>DOI: ".concat(_u(a),"</span>")),i&&l.push("<span>URL: ".concat(_u(i),"</span>")),l.length===0?null:"<li>".concat(l.join("<br/>"),"</li>")}function QU(t){var n,s,o,a,i,l,c;const e=t.medical_file_reference;return!e||!e.journal_name&&!e.authors_display&&!e.publication_year&&!((n=e.doi)!=null?n:t.id)?null:{journalName:(s=e.journal_name)!=null?s:void 0,authorsDisplay:(o=e.authors_display)!=null?o:void 0,publicationYear:(a=e.publication_year)!=null?a:void 0,doi:(l=(i=e.doi)!=null?i:t.id)!=null?l:void 0,url:(c=t.cloud_doc_url)!=null?c:void 0}}function _u(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function JU(t){var e,n;return!((e=t.clientMetadata)!=null&&e.err)&&(t.author.role===Ke.Assistant||t.author.role===Ke.User)&&(t.author.role===Ke.User||t.recipient==="all")&&!((n=t.metadata)!=null&&n.reasoning_status)}const rDe=R(()=>P(()=>import("./eahncmechdd0yy5s.js"),__vite__mapDeps([24,1])),{loading:t=>O(t)}),iDe=({turn:t,clientThreadId:e})=>{const n=vI(e),s=ne();function o(){Fl.logButtonClick(c1.EDIT_IN_CANVAS_MESSAGE);const a=lDe(t);n({textdocType:cr.DOCUMENT,content:a,createSource:hf.MESSAGE})}return r.jsx(_d,{icon:rDe,onClick:o,label:s.formatMessage({id:"EditInCanvas.tooltip",defaultMessage:"Edit in canvas"}),asMenuItem:!0})};function lDe(t){return t.messages.filter(e=>JU(e)&&e.author.role===Ke.Assistant).map(e=>bo(e,{shouldGetTextFromContentReferences:!0,shouldGetVisibleText:!1})).filter(Boolean).join("\n\n")}const cDe=R(()=>P(()=>import("./luxqnz6j7d1xdl3t.js"),__vite__mapDeps([476,1])),{loading:t=>O(t)});function dDe({clientThreadId:t,lastMessage:e,asMenuItem:n}){const[s,o]=_.useState(!1),a=ne(),i=_.useCallback(()=>{const c=At(t);if(!c)return;o(!0);const d="/branch/".concat(c,"/").concat(e.id);window.open(d,"_blank","noreferrer")},[t,e.id]),l=s?o9.loading:o9.branch;return r.jsx(_d,{icon:s?_s:cDe,label:a.formatMessage(l),onClick:i,disabled:s,asMenuItem:n,onSelect:c=>{c.preventDefault()}})}const o9=be({branch:{id:"BranchTurnActionButton.branch",defaultMessage:"Branch in new chat"},loading:{id:"BranchTurnActionButton.loading",defaultMessage:"Loading"}}),uDe=R(()=>P(()=>import("./odtbrxkncka8brls.js"),__vite__mapDeps([202,1])),{loading:t=>O(t)}),fDe=R(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([151,1])),{loading:t=>O(t)}),mDe=R(()=>P(()=>import("./decxj0nfuivtbs7k.js"),__vite__mapDeps([152,1])),{loading:t=>O(t)}),XU=R(()=>P(()=>import("./kgco101yg3lf47vy.js"),__vite__mapDeps([477,1,10,11])).then(t=>t.VoicePlayButton));function tot(t){"use forget";const e=G.c(24),{showPlayButton:n,showCanvasButton:s,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,messages:l,lastMessage:c,imageGenMessageId:d,turn:u,turnIndex:f,requestId:m,parentPromptId:p,showReportMessageButton:g,onReportMessage:h}=t,x=V(),v=ne();let y;e[0]!==v?(y=v.formatMessage({id:"e/27r7",defaultMessage:"More actions"}),e[0]=v,e[1]=y):y=e[1];const b=y;if(!tt(x)||!(o&&!!c||n&&!!c||s||a||g||!1))return null;let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx(fDe,{className:"icon"}),e[2]=S):S=e[2];let k;e[3]!==b?(k=r.jsx("button",{className:"text-token-text-secondary hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",onMouseOver:pDe,"aria-label":b,children:S}),e[3]=b,e[4]=k):k=e[4];let E;e[5]!==a||e[6]!==i||e[7]!==d||e[8]!==c||e[9]!==l||e[10]!==h||e[11]!==p||e[12]!==m||e[13]!==o||e[14]!==s||e[15]!==n||e[16]!==g||e[17]!==u||e[18]!==f?(E=r.jsx(gDe,{showPlayButton:n,showCanvasButton:s,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,messages:l,lastMessage:c,imageGenMessageId:d,turn:u,turnIndex:f,requestId:m,parentPromptId:p,showReportMessageButton:g,onReportMessage:h}),e[5]=a,e[6]=i,e[7]=d,e[8]=c,e[9]=l,e[10]=h,e[11]=p,e[12]=m,e[13]=o,e[14]=s,e[15]=n,e[16]=g,e[17]=u,e[18]=f,e[19]=E):E=e[19];let T;return e[20]!==b||e[21]!==k||e[22]!==E?(T=r.jsx(Er,{triggerButton:k,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,tooltip:b,children:E}),e[20]=b,e[21]=k,e[22]=E,e[23]=T):T=e[23],T}function pDe(){XU.prefetch()}function gDe(t){"use forget";const e=G.c(29),{showPlayButton:n,showCanvasButton:s,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,lastMessage:l,turn:c,requestId:d,showReportMessageButton:u,onReportMessage:f}=t,m=ne();let p;e[0]!==i||e[1]!==l||e[2]!==o?(p=o&&l&&r.jsx(dDe,{clientThreadId:i,lastMessage:l,asMenuItem:!0}),e[0]=i,e[1]=l,e[2]=o,e[3]=p):p=e[3];let g;e[4]!==i||e[5]!==l||e[6]!==n?(g=n&&l&&r.jsx(XU,{conversationId:i,message:l,asMenuItem:!0}),e[4]=i,e[5]=l,e[6]=n,e[7]=g):g=e[7];let h;e[8]!==i||e[9]!==s||e[10]!==c?(h=s&&r.jsx(iDe,{clientThreadId:i,turn:c}),e[8]=i,e[9]=s,e[10]=c,e[11]=h):h=e[11];let x;e[12]!==a||e[13]!==m?(x=a&&r.jsx(Bb,{children:C=>{const{openScheduleModal:S,isScheduled:k,isSchedulable:E}=C;return!k&&E?r.jsx(_d,{icon:mDe,label:m.formatMessage({id:"l12ujd",defaultMessage:"Schedule"}),onClick:S,asMenuItem:!0}):null}}),e[12]=a,e[13]=m,e[14]=x):x=e[14];let v;e[15]!==m||e[16]!==f||e[17]!==u?(v=u&&f&&r.jsx(_d,{icon:uDe,label:m.formatMessage({id:"ConversationTurn.reportMessageMenuItem",defaultMessage:"Report message"}),asMenuItem:!0,onSelect:()=>f()}),e[15]=m,e[16]=f,e[17]=u,e[18]=v):v=e[18];let y;e[19]!==l||e[20]!==d?(y=!1,e[19]=l,e[20]=d,e[21]=y):y=e[21];let b;return e[22]!==p||e[23]!==g||e[24]!==h||e[25]!==x||e[26]!==v||e[27]!==y?(b=r.jsxs(r.Fragment,{children:[p,g,h,x,v,y]}),e[22]=p,e[23]=g,e[24]=h,e[25]=x,e[26]=v,e[27]=y,e[28]=b):b=e[28],b}const hDe=R(()=>P(()=>import("./ffrotvb922yxp30i.js"),__vite__mapDeps([286,1])),{loading:t=>O(t)}),_De=R(()=>P(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([144,1])),{loading:t=>O(t)}),xDe=R(()=>P(()=>import("./nlj7ey81i8rm36n9.js"),__vite__mapDeps([478,1])),{loading:t=>O(t)}),yDe=R(()=>P(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([145,1])),{loading:t=>O(t)});function not({currentPage:t,length:e,onChangeIndex:n}){const s=a=>{n(Kb(t+a,0,e-1))},o=ne();return r.jsxs("div",{className:W("text-token-text-secondary flex items-center justify-center"),children:[r.jsx("button",{onClick:()=>s(-1),disabled:t===0,className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent","aria-label":o.formatMessage({id:"XwENI/",defaultMessage:"Previous response"}),children:r.jsx(xDe,{className:"icon"})}),r.jsx("div",{className:"px-0.5 text-sm font-semibold tabular-nums",children:"".concat(t+1,"/").concat(e)}),r.jsx("button",{onClick:()=>s(1),disabled:t===e-1,"aria-label":o.formatMessage({id:"V8RFHE",defaultMessage:"Next response"}),className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent",children:r.jsx(hDe,{className:"icon"})})]})}function sot({currentPage:t,onChangeIndex:e,length:n}){const s=o=>{e(Kb(t+o,0,n-1))};return n===0?null:r.jsxs(vDe,{children:[r.jsx(a9,{onClick:()=>s(-1),disabled:t===0,children:r.jsx(yDe,{className:"icon-sm"})}),r.jsx(bDe,{children:"".concat(t+1,"/").concat(n)}),r.jsx(a9,{onClick:()=>s(1),disabled:t===n-1,children:r.jsx(_De,{className:"icon-sm"})})]})}var BE;const vDe=mt.div(BE||(BE=ct(["text-sm inline-flex border rounded-full border-token-border-medium overflow-hidden"])));var UE;const a9=mt.button(UE||(UE=ct(["text-token-text-secondary disabled:text-token-border-medium w-8 flex items-center justify-center hover:bg-token-main-surface-tertiary"])));var $E;const bDe=mt.span($E||($E=ct(["text-token-text-tertiary px-2 flex items-center font-mono tracking-widest py-1.5"])));function e$(t=!1){const e=Pb(os.WorkspaceShareLinks),n=V(),s=ze(n,"2382399797",{disableExposureLog:t}),o=ae(()=>Pq(k3(n)));return _.useCallback(()=>e&&!o&&s.get("is_enabled",!1),[o,s,e])}function CDe(t){return ze(t,"3243846918").get("enable_message_slice",!1)}function oot(t){const e=Es(),n=e$(),s=V(),{imageGenMessages:o,canvasMessage:a,gizmoMessage:i,hasErrorInTurn:l,isIncomplete:c}=_.useMemo(()=>{const f=[];let m,p,g=!1,h=!1;return t.forEach(x=>{var y,b;Xh(x)&&f.push(x),jR(x)&&(m=x),(y=x.metadata)!=null&&y.gizmo_id&&(p=x);const v=(b=x.clientMetadata)==null?void 0:b.errType;v!=null&&v!=="info"&&(g=!0),Nq(x)&&(h=!0)}),{imageGenMessages:f,canvasMessage:m,gizmoMessage:p,hasErrorInTurn:g,isIncomplete:h}},[t]),d=!e&&!i&&o.length>0&&o.every(f=>f.status==="finished_successfully")&&n(),u=!e&&o.length===0&&!a&&!i&&CDe(s);return{enableImageGenPostSharing:d,enableMessageSliceSharing:u,imageGenMessages:o,canvasMessage:a,hasErrorInTurn:l,isIncomplete:c}}function t$(t=!1){const e=Es(),n=e$(t);return _.useMemo(()=>!e&&n(),[e,n])}const SDe=R(()=>P(()=>import("./dt7r1tuc81rn6vox.js"),__vite__mapDeps([462,1])),{loading:t=>O(t)}),aot=t=>{"use forget";const e=G.c(10),{onShowHidden:n}=t,s=ne();let o;e[0]!==s?(o=s.formatMessage({id:"NaTncQ",defaultMessage:"Library menu"}),e[0]=s,e[1]=o):o=e[1];let a;e[2]!==o?(a=r.jsx(HP,{"aria-label":o}),e[2]=o,e[3]=a):a=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(SDe,{className:"h-4 w-4"}),r.jsx(j,{id:"H788Jv",defaultMessage:"Show hidden images"})]}),e[4]=i):i=e[4];let l;e[5]!==n?(l=r.jsx(Y.Item,{onClick:n,children:i}),e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==a||e[8]!==l?(c=r.jsx(Er,{triggerButton:a,contentAlign:"end",children:l}),e[7]=a,e[8]=l,e[9]=c):c=e[9],c};function wDe({className:t,children:e,position:n="center",size:s,removePopoverStyling:o=!1,shadow:a="normal"}){const i=Rq(),l=ne(),c=Math.random()*40-20;return _.useEffect(()=>{i.start({x:0,y:0,rotate:0,opacity:1,transition:{type:"spring",duration:.6,bounce:.15}})},[i]),r.jsx(Xe.div,{initial:{x:0,y:"100%",rotate:0,opacity:1},animate:i,exit:{x:0,y:"100%",rotate:c,opacity:1},transition:{type:"spring",duration:.6,bounce:.15},className:W("z-50 h-full w-full overflow-y-auto",s!=="fullscreen"&&"grid grid-cols-[10px_1fr_10px]",s!=="fullscreen"&&n==="center"&&"grid-rows-[minmax(10px,1fr)_auto_minmax(10px,1fr)] md:grid-rows-[minmax(20px,1fr)_auto_minmax(20px,1fr)]",s!=="fullscreen"&&n==="bottom"&&"grid-rows-[minmax(10px,1fr)_auto_10px] md:grid-rows-[minmax(20px,1fr)_auto_20px]"),children:r.jsx(Sd,{className:W(!o&&"popover","bg-token-sidebar-surface relative start-1/2 col-auto col-start-2 row-auto row-start-2 h-full w-full min-w-0 gap-4 p-4 text-start ltr:-translate-x-1/2 rtl:translate-x-1/2 dark:bg-[#171717]",s!=="fullscreen"&&"rounded-[36px]",a==="normal"&&"shadow-[0_32px_48px_rgba(0,0,0,0.175),_0_0_1px_rgba(0,0,0,0.2)] dark:shadow-[0_32px_48px_rgba(0,0,0,0.175),_0_0_1px_rgba(255,255,255,0.4)]",t),"aria-description":l.formatMessage({id:"slide-up-modal.share-sheet.description",defaultMessage:"Share sheet"}),"aria-describedby":"",children:e})})}function kDe({isOpen:t,onClose:e,children:n,shouldIgnoreClickOutside:s=!1,className:o}){var a;return r.jsx(Il,{open:t,onOpenChange:i=>{s||i===!1&&e(!1)},children:r.jsx(jl,{container:(a=lM())==null?void 0:a.document.body,children:r.jsx("div",{className:W("absolute inset-0",o),children:n})})})}function EDe({className:t,children:e,showBackground:n=!0}){const s=ea(),o=n?s?"rgba(0, 0, 0, 0.8)":"rgba(249,249,249,0.8)":"rgba(0, 0, 0, 0)";return r.jsx(Rf,{asChild:!0,children:r.jsx(Xe.div,{initial:{backdropFilter:"blur(0px)",backgroundColor:s?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 0)"},animate:{backdropFilter:n?"blur(4px)":"blur(0px)",backgroundColor:o},exit:{backdropFilter:"blur(0px)",backgroundColor:s?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 0)"},className:W("fixed inset-0 z-50",t),children:e})})}function TDe({title:t,description:e,icon:n,type:s}){return r.jsxs("div",{className:"flex max-w-full min-w-0 items-center",children:[r.jsx(ADe,{icon:n,type:s}),r.jsxs("div",{className:"flex max-w-full min-w-0 grow flex-col gap-1",children:[t!=null&&r.jsx(c3,{className:"text-token-text-primary text-3xl leading-6 font-semibold tracking-tight max-sm:text-xl",children:t}),e!=null&&r.jsx(d3,{className:"text-token-text-tertiary text-sm",children:e})]})]})}function MDe({title:t,accessory:e,description:n,withSeparator:s=!0,icon:o,type:a,closeButton:i,textCenter:l}){return!t&&!n?null:r.jsxs(IDe,{$hasSeparator:s,children:[r.jsx("div",{className:W("flex max-w-full",l&&"flex-1 justify-center text-center"),children:r.jsx(TDe,{title:t,description:n,icon:o,type:a})}),r.jsxs("div",{className:"flex items-center gap-5",children:[e,i!=null&&r.jsx(wd,{asChild:!0,className:"sm:mt-0",children:i})]})]})}const ADe=({type:t,icon:e})=>e==null?null:r.jsx("div",{className:W("me-4 flex h-12 w-12 shrink-0 items-center justify-center rounded-full sm:h-10 sm:w-10",t==="danger"&&"bg-red-100",t==="warning"&&"bg-yellow-100",t==="success"&&"bg-green-100"),children:r.jsx(e,{className:W("icon-lg",t==="danger"&&"text-red-600",t==="warning"&&"text-yellow-700",t==="success"&&"text-green-700"),"aria-hidden":"true"})});var VE;const IDe=mt.div(VE||(VE=ct(["px-4 pb-2 sm:p-6 flex items-center justify-between ",""])),({$hasSeparator:t})=>t&&"border-b border-black/10 dark:border-white/10"),O2={Root:kDe,Overlay:EDe,Content:wDe,Header:MDe},jDe=R(()=>P(()=>import("./jqy8zfwhk6ptqvmj.js"),__vite__mapDeps([189,1])),{loading:t=>O(t)});function NDe(t){"use forget";const e=G.c(47),{prompt:n,mode:s,onClose:o,onTryIt:a}=t,i=s===void 0?"sharer":s,l=ne(),c=jt(),d=Ut(),[u,f]=_.useState(null),[m,p]=_.useState(!0);let g;e[0]!==l||e[1]!==d?(g=()=>{d.danger(l.formatMessage({id:"O6MPEA",defaultMessage:"Failed to create sharing link"}))},e[0]=l,e[1]=d,e[2]=g):g=e[2];let h;e[3]!==c?(h=()=>{c.invalidateQueries({queryKey:["prompt-templates"],exact:!1})},e[3]=c,e[4]=h):h=e[4];let x;e[5]!==g||e[6]!==h?(x={share:!0,onError:g,onSuccess:h},e[5]=g,e[6]=h,e[7]=x):x=e[7];const{mutateAsync:v,isPending:y}=Lq(x);let b;e[8]!==l||e[9]!==u||e[10]!==d?(b=async()=>{if(u)try{await Zo("".concat(window.location.origin,"/?share_prompt=").concat(u)),d.success(l.formatMessage({id:"WpnjbL",defaultMessage:"Link copied to clipboard"}))}catch($){d.danger(l.formatMessage({id:"gCy731",defaultMessage:"Failed to copy link"}))}},e[8]=l,e[9]=u,e[10]=d,e[11]=b):b=e[11];const C=b;let S;e[12]!==l||e[13]!==d?(S=()=>{d.danger(l.formatMessage({id:"xdHQb2",defaultMessage:"Failed to add to My library"}))},e[12]=l,e[13]=d,e[14]=S):S=e[14];let k;e[15]!==l||e[16]!==c||e[17]!==d?(k=()=>{c.invalidateQueries({queryKey:["prompt-templates"],exact:!1}),d.success(l.formatMessage({id:"b4SFiB",defaultMessage:"Success"}))},e[15]=l,e[16]=c,e[17]=d,e[18]=k):k=e[18];let E;e[19]!==S||e[20]!==k?(E={onError:S,onSuccess:k},e[19]=S,e[20]=k,e[21]=E):E=e[21];const{mutateAsync:T}=Oq(E);let M;e[22]!==n||e[23]!==T?(M=async()=>{n&&await T({promptId:String(n.id),relationship:"subscribed"})},e[22]=n,e[23]=T,e[24]=M):M=e[24];const A=M;let I,N;if(e[25]!==v||e[26]!==i||e[27]!==n||e[28]!==u||e[29]!==m?(I=()=>{m&&!u&&n&&i==="sharer"&&v(n.id).then($=>{var z,K,J,Z,q,se;const{shared_id:H}=$;f(H),B.logEventWithStatsig("chatgpt_web_prompt_shared","chatgpt_web_prompt_shared",{hint:(z=n.system_hint)!=null?z:"none",hasSources:((J=(K=n.sources)==null?void 0:K.length)!=null?J:0)>0,sources:((Z=n.sources)!=null?Z:[]).join(","),sourceCount:(se=(q=n.sources)==null?void 0:q.length)!=null?se:0})})},N=[m,u,n,v,i],e[25]=v,e[26]=i,e[27]=n,e[28]=u,e[29]=m,e[30]=I,e[31]=N):(I=e[30],N=e[31]),_.useEffect(I,N),!n){let $;return e[32]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(_s,{}),e[32]=$):$=e[32],$}let L;e[33]!==o?(L=()=>o(!1),e[33]=o,e[34]=L):L=e[34];let D;e[35]!==y||e[36]!==i||e[37]!==C||e[38]!==A||e[39]!==a||e[40]!==n||e[41]!==u||e[42]!==m?(D=m&&r.jsx(O2.Root,{isOpen:!0,onClose:()=>{p(!1)},className:"max-w-[640px]",children:r.jsx(O2.Overlay,{showBackground:!0,children:r.jsx(O2.Content,{size:"normal",position:"center",className:"flex max-w-[640px] flex-col p-6 focus:outline-hidden",removePopoverStyling:!1,shadow:"normal",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"border-token-border-secondary flex gap-2 border-b-1 pb-4",children:[r.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[r.jsx("div",{className:"text-token-text-primary text-3xl font-bold max-sm:text-xl",children:n.name}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:n.description})]}),r.jsx(gn,{onClick:()=>p(!1),className:"end-0 top-0 z-10 px-1.5 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"})]}),r.jsxs("div",{className:"outline-token-border-light relative flex w-full flex-col justify-center gap-2 overflow-hidden rounded-xl shadow-sm outline outline-1",children:[r.jsx("div",{className:"text-token-text-primary p-4 pb-20 text-sm",children:n.prompt}),r.jsx("div",{className:"from-token-bg-primary absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent"}),r.jsx("div",{className:"absolute end-5 bottom-5 z-10 inline-flex flex-shrink-0 items-end justify-end",children:r.jsx(pU,{className:"inline h-4 w-24 text-end"})})]}),r.jsx("div",{className:"flex flex-row justify-center gap-4",children:i==="sharer"?r.jsxs("button",{disabled:y||!u,onClick:()=>{C==null||C()},className:"relative flex flex-col gap-y-4 disabled:opacity-50 max-sm:gap-y-2",children:[r.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full shadow-lg max-sm:h-12 max-sm:w-12 max-sm:shadow-md dark:shadow-md",children:r.jsx("div",{className:"pointer-events-none flex h-8 w-8 items-center justify-center max-sm:h-6 max-sm:w-6",children:y||!u?r.jsx(_s,{className:"h-4 w-4"}):r.jsx(jDe,{})})}),r.jsx("div",{className:"w-full text-center text-xs",children:r.jsx(j,{id:"DFXg8z",defaultMessage:"Copy link"})})]}):r.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[r.jsx(_e,{color:"secondary",disabled:n.relationship!==null,onClick:()=>{A()},children:n.relationship==null?r.jsx(j,{id:"nfx0dD",defaultMessage:"Save to library"}):r.jsx(j,{id:"3Fx9p6",defaultMessage:"Already saved"})}),r.jsx(_e,{onClick:()=>{var $,H,z,K,J,Z;p(!1),B.logEventWithStatsig("chatgpt_web_prompt_used","chatgpt_web_prompt_used",{referer:"shared",hint:($=n.system_hint)!=null?$:"none",sources:((H=n.sources)!=null?H:[]).join(","),hasSources:((K=(z=n.sources)==null?void 0:z.length)!=null?K:0)>0,sourceCount:(Z=(J=n.sources)==null?void 0:J.length)!=null?Z:0}),a==null||a(n)},children:r.jsx(j,{id:"D+lWJu",defaultMessage:"Try it out"})})]})}),r.jsx("div",{className:"text-token-text-tertiary text-center text-sm sm:mt-2",children:r.jsx(j,{id:"I8F6LL",defaultMessage:"The share links are visible to workspace members only."})})]})})})}),e[35]=y,e[36]=i,e[37]=C,e[38]=A,e[39]=a,e[40]=n,e[41]=u,e[42]=m,e[43]=D):D=e[43];let F;return e[44]!==L||e[45]!==D?(F=r.jsx(mn,{onExitComplete:L,children:D}),e[44]=L,e[45]=D,e[46]=F):F=e[46],F}const PDe=Object.freeze(Object.defineProperty({__proto__:null,PromptSharingModal:NDe},Symbol.toStringTag,{value:"Module"})),RDe=R(()=>P(()=>import("./ea3j10kjv7ntyk1b.js"),__vite__mapDeps([364,1])),{loading:t=>O(t)}),LDe=R(()=>P(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([147,1])),{loading:t=>O(t)}),ODe=R(()=>P(()=>import("./decxj0nfuivtbs7k.js"),__vite__mapDeps([152,1])),{loading:t=>O(t)}),A4=({modelSwitcherDeny:t,value:e,label:n,subtitle:s,icon:o,onMouseEnter:a,onMouseLeave:i,onSelect:l,messageModelSlug:c,shouldShowUpsell:d=!1,className:u,includeRegenerate:f=!1,clientThreadId:m,isContextualRetryMenu:p})=>{const g=V(),h=et(g),x=Vb({clientThreadId:m}),v=NP({modelSlug:e,modelSwitcherDenialsBySlug:x}),y=!v&&!d,b=ot(),C=S=>{var k;if(!d){l==null||l(S);return}B.logEvent("Account Pay: Open Payment from Message Model Picker"),B.logRateLimitGetPlusButtonClicked({type:$f.RATE_LIMIT,location:"message_model_switcher_dropdown",plan_type:(k=h==null?void 0:h.planType)!=null?k:"unknown",is_hard_block:!1,hard_block_reason:"",is_new_conversation:!1}),xn(b,"Message model switcher dropdown")};return r.jsx(_t,{label:t&&r.jsx(jP,{modelSwitcherDeny:t}),children:r.jsx(Y.Item,{onSelect:C,onMouseEnter:()=>v&&(a==null?void 0:a()),onMouseLeave:()=>v&&(i==null?void 0:i()),disabled:y,className:u!=null?u:p?void 0:"radix-disabled:pointer-events-auto radix-disabled:cursor-not-allowed radix-disabled:hover:bg-transparent",icon:p?o:void 0,trailing:p&&d?r.jsx(r9,{}):void 0,label:p?n:void 0,secondary:p?s:void 0,children:!p&&r.jsxs("span",{className:"flex w-full items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex w-full items-center gap-3",children:[o||null,r.jsxs("div",{children:[r.jsx("div",{children:n}),r.jsx("div",{className:W({"text-token-text-secondary text-sm":!y},{"text-token-text-quaternary text-sm":y}),children:s})]})]}),d?r.jsx(r9,{}):r.jsx(DDe,{messageModelSlug:c,modelSwitcherDeny:t,optionModelSlug:e,includeRegenerate:f})]})})})},DDe=({modelSwitcherDeny:t,includeRegenerate:e=!0})=>{let n=null;if(t)switch(t.reason){case $f.RATE_LIMIT:n=ODe;break;default:n=LDe;break}return t?r.jsx(n,{className:"icon"}):!!e&&r.jsx(RDe,{className:"icon text-token-text-tertiary hidden"})};function r9(){const t=V();return r.jsx(_e,{color:"secondary",size:"small",children:r.jsx(j,w({},em(t)))})}const FDe=R(()=>P(()=>import("./isqpc56i7wx8h49k.js"),__vite__mapDeps([49,1])),{loading:t=>O(t)}),BDe=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>O(t)}),UDe=R(()=>P(()=>import("./i9e855s7wyoxeff7.js"),__vite__mapDeps([479,1])),{loading:t=>O(t)}),I4="rounded-lg radix-disabled:pointer-events-auto radix-disabled:cursor-not-allowed",j4=W("icon-sm","order-10 ms-auto text-token-text-tertiary icon");function n$(t,e){const{modelSwitcherDeny:n,subscriptionLevel:s}=t;return!!n&&n.reason===$f.RATE_LIMIT&&s===dx.PLUS&&!e}function $De({messageModelEnabledTools:t,message:e,intl:n}){const s=t.includes(Pe.Search),o=Oee(e);return[{key:"use-search",extraStreamParams:{forceUseSearch:!0},label:n.formatMessage({id:"eTV6j1",defaultMessage:"Search the web"}),icon:BDe,condition:s&&!o,eventName:"chatgpt_regenerate_with_search_button_clicked"},{key:"use-no-search",extraStreamParams:{forceUseSearch:!1},label:n.formatMessage({id:"k/SdXa",defaultMessage:"Don't search the web"}),icon:UDe,condition:s&&o,eventName:"chatgpt_regenerate_without_search_button_clicked"}]}function VDe({clientThreadId:t,message:e,intl:n}){const s=he.isReasoningResponseMessage(ft(t),e.id);return[{key:"use-reason",extraStreamParams:{forceUseReason:!0},label:n.formatMessage({id:"4VX35n",defaultMessage:"Think longer"}),icon:FDe,condition:!s,eventName:"chatgpt_regenerate_with_reason_button_clicked"}]}const HDe=R(()=>P(()=>import("./ea3j10kjv7ntyk1b.js"),__vite__mapDeps([364,1])),{loading:t=>O(t)});function D2(t){"use forget";var v;const e=G.c(24),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:a,showContextualRetry:i,hasPlusFeatures:l,subcategory:c,messageModelSlug:d}=t;let u,f;e[0]!==a?(v=a,{value:f}=v,u=ke(v,["value"]),e[0]=a,e[1]=u,e[2]=f):(u=e[1],f=e[2]);let m;e[3]!==n||e[4]!==s||e[5]!==o||e[6]!==f?(m=y=>{Ye.logEvent("chatgpt_regenerate_switch_model_button_clicked",f,w({requestedModelId:f},En({clientThreadId:n,messageId:s}))),o({sourceEvent:y,requestedModelId:f})},e[3]=n,e[4]=s,e[5]=o,e[6]=f,e[7]=m):m=e[7];let p;e[8]!==l||e[9]!==a?(p=n$(a,l),e[8]=l,e[9]=a,e[10]=p):p=e[10];const g=i?void 0:I4;let h;e[11]!==i||e[12]!==c?(h=!i&&!c?r.jsx("span",{className:j4}):void 0,e[11]=i,e[12]=c,e[13]=h):h=e[13];let x;return e[14]!==n||e[15]!==d||e[16]!==u||e[17]!==i||e[18]!==m||e[19]!==p||e[20]!==g||e[21]!==h||e[22]!==f?(x=r.jsx(A4,U(w({value:f,onSelect:m,messageModelSlug:d,shouldShowUpsell:p,className:g},u),{icon:h,clientThreadId:n,isContextualRetryMenu:i})),e[14]=n,e[15]=d,e[16]=u,e[17]=i,e[18]=m,e[19]=p,e[20]=g,e[21]=h,e[22]=f,e[23]=x):x=e[23],x}function s$(t){"use forget";const e=G.c(21),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:a,showContextualRetry:i,messageModelSlug:l,parentPrompt:c}=t,d=ne(),u=V(),f=a.value;let m;e[0]!==n||e[1]!==u||e[2]!==s||e[3]!==a.value||e[4]!==o||e[5]!==(c==null?void 0:c.id)?(m=b=>{var C;B.logEventWithStatsig("chatgpt_regenerate_try_again_button_clicked","chatgpt_regenerate_try_again_button_clicked",w({requestedModelId:a.value},En({clientThreadId:n,messageId:s}))),ye(u,"3247947701")&&TI({retry_option:"try_again",parent_prompt_id:(C=c==null?void 0:c.id)!=null?C:""},At(n),a.value),o({sourceEvent:b,requestedModelId:a.value})},e[0]=n,e[1]=u,e[2]=s,e[3]=a.value,e[4]=o,e[5]=c==null?void 0:c.id,e[6]=m):m=e[6];const p=i?void 0:I4;let g;e[7]!==d?(g=d.formatMessage({id:"VbsBGW",defaultMessage:"Try again"}),e[7]=d,e[8]=g):g=e[8];const h=!i&&a.label,x=i?"icon":j4;let v;e[9]!==x?(v=r.jsx(HDe,{className:x}),e[9]=x,e[10]=v):v=e[10];let y;return e[11]!==n||e[12]!==l||e[13]!==a||e[14]!==i||e[15]!==m||e[16]!==p||e[17]!==g||e[18]!==h||e[19]!==v?(y=r.jsx(A4,U(w({onSelect:m,messageModelSlug:l,className:p},a),{label:g,subtitle:h,icon:v,clientThreadId:n,isContextualRetryMenu:i,includeRegenerate:!0}),f),e[11]=n,e[12]=l,e[13]=a,e[14]=i,e[15]=m,e[16]=p,e[17]=g,e[18]=h,e[19]=v,e[20]=y):y=e[20],y}function i9(t){"use forget";const e=G.c(15),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:a,systemHintRetryOptions:i,showContextualRetry:l,messageModelSlug:c}=t;let d;if(e[0]!==n||e[1]!==s||e[2]!==c||e[3]!==a||e[4]!==o||e[5]!==l||e[6]!==i){let u;e[8]!==n||e[9]!==s||e[10]!==c||e[11]!==a||e[12]!==o||e[13]!==l?(u=f=>{const m=f.icon;return r.jsx(A4,U(w({onSelect:p=>{B.logEventWithStatsig(f.eventName,f.eventName,w({requestedModelId:a.value},En({clientThreadId:n,messageId:s}))),o({sourceEvent:p,requestedModelId:a.value,extraStreamParams:f.extraStreamParams})},messageModelSlug:c,className:l?void 0:I4},a),{label:f.label,subtitle:"",icon:r.jsx(m,{className:l?"icon":j4}),clientThreadId:n,isContextualRetryMenu:l}),f.key)},e[8]=n,e[9]=s,e[10]=c,e[11]=a,e[12]=o,e[13]=l,e[14]=u):u=e[14],d=i.filter(GDe).map(u),e[0]=n,e[1]=s,e[2]=c,e[3]=a,e[4]=o,e[5]=l,e[6]=i,e[7]=d}else d=e[7];return d}function GDe(t){return t.condition}const WDe=R(()=>P(()=>import("./dfw81cjd01zr8dcu.js"),__vite__mapDeps([480,1])),{loading:t=>O(t)}),zDe=R(()=>P(()=>Promise.resolve().then(()=>Ine),void 0),{loading:t=>O(t)}),qDe=R(()=>P(()=>import("./gg4yvmc2n2kymxrf.js"),__vite__mapDeps([481,1])),{loading:t=>O(t)}),l9="freeform_feedback",c9=be({retryWithFeedback:{id:"HW5O9Q",defaultMessage:"Ask to change response"},makeLonger:{id:"s7cVzc",defaultMessage:"Add details"},makeShorter:{id:"uWyhEy",defaultMessage:"More concise"}}),YDe=()=>[{key:"make_longer",messageKey:"makeLonger",prompt:"Please make this response longer and more detailed.",icon:r.jsx(qDe,{})},{key:"make_shorter",messageKey:"makeShorter",prompt:"Please make this response more concise and brief.",icon:r.jsx(WDe,{})}];function ZDe({message:t,canRegenerateResponse:e,onModelSelect:n,clientThreadId:s,retryOption:o,contentRef:a,parentPrompt:i}){var y;const l=ne(),c=V(),[d,u]=_.useState(""),f=_.useRef(null),m=is(c,"3586972587").get("prompt",""),p=YDe(),g=(y=t.metadata)==null?void 0:y.model_slug;_.useEffect(()=>{requestAnimationFrame(()=>{var b;(b=f.current)==null||b.focus()})},[]),_.useEffect(()=>{const b=a==null?void 0:a.current;if(!b)return;function C(S){f.current&&document.activeElement!==f.current&&(J8(S)||S.key==="Enter"||S.ctrlKey||S.metaKey||S.key.length!==1&&!X8(S)||(S.stopPropagation(),f.current.focus()))}return b.addEventListener("keydown",C),()=>{b.removeEventListener("keydown",C)}},[]);const h=_.useCallback((b,C,S,k,E)=>{var M;ye(E,"3247947701")&&TI({retry_option:k,parent_prompt_id:(M=i==null?void 0:i.id)!=null?M:"",freeform_feedback:k===l9?C:void 0},At(s),g);const T="".concat(b).concat(C);n({sourceEvent:S,requestedModelId:g||"",appendMessages:[ls(T,{is_visually_hidden_from_conversation:!0,is_contextual_retry_user_message:!0})]})},[n,g,s,i==null?void 0:i.id]),x=b=>{d.trim()&&(h(m,d.trim(),b,l9,c),u(""))},v=(b,C)=>{const S="".concat(b.prompt);h(m,S,C,b.key,c)};return e?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(Y.InputItem,{selectAllOnFocus:!1,ref:f,value:d,onChange:b=>u(b.target.value),placeholder:l.formatMessage(c9.retryWithFeedback),onSubmit:x,border:!1,className:"min-w-[210px] ps-2.5 pe-9",name:"contextual-retry-dropdown-input"}),r.jsx("div",{className:"absolute end-4 top-1/2 flex -translate-y-1/2 items-center justify-center",children:r.jsx("button",{className:"icon composer-submit-btn",disabled:d.trim()==="",onClick:x,"aria-label":l.formatMessage({defaultMessage:"Submit",id:"aria.submit"}),"data-in-menu":mv(!0),children:r.jsx(zDe,{className:"icon-xs"})})})]}),r.jsx(Y.Separator,{}),!!o&&r.jsx(s$,{clientThreadId:s,messageId:t.id,onModelSelect:n,modelRetryOption:o,messageModelSlug:g,parentPrompt:i,showContextualRetry:!0}),p.map(b=>r.jsx(Y.Item,{onSelect:C=>v(b,C),label:l.formatMessage(c9[b.messageKey]),icon:b.icon},b.key))]}):null}const KDe=({clientThreadId:t,message:e})=>{var m,p,g,h,x,v,y,b;const n=V(),s=yt(n,t),o=ae(()=>ta(s)),a=Vb({clientThreadId:t}),i=[];for(const C of(m=o.categories)!=null?m:[]){if($de(C))continue;const{defaultModel:S,label:k,tagline:E,subscriptionLevel:T,subcategory:M}=C,A=(g=(p=a[S])==null?void 0:p.regenerate)==null?void 0:g[0];i.push({label:k,value:S,subtitle:E,modelSwitcherDeny:A,subscriptionLevel:T,subcategory:M})}const l=(h=e.metadata)==null?void 0:h.model_slug,c=$T(o,l),d=(c==null?void 0:c.enabledTools)||[],u=ae(()=>bn(s));let f;return c&&l?f={label:c==null?void 0:c.title,value:l,subtitle:c==null?void 0:c.description,subscriptionLevel:dx.FREE,modelSwitcherDeny:l?(v=(x=a[l])==null?void 0:x.regenerate)==null?void 0:v[0]:void 0}:u&&(f={label:u.title,value:u.id,subtitle:u.description,subscriptionLevel:dx.FREE,modelSwitcherDeny:(b=(y=a[u.id])==null?void 0:y.regenerate)==null?void 0:b[0]}),{modelOptions:i,messageModelConfig:c,messageModelEnabledTools:d,defaultModelSlug:_M(o),modelPickerVersion:o.modelPickerVersion,fallbackModelOption:f}};var F2,d9;function QDe(){if(d9)return F2;d9=1;var t=Dq(),e=t(function(n,s,o){n[o?0:1].push(s)},function(){return[[],[]]});return F2=e,F2}var JDe=QDe();const XDe=Gn(JDe),u9=R(()=>P(()=>import("./h3fuzfk2fgvggqan.js"),__vite__mapDeps([482,1])),{loading:t=>O(t)}),eFe=R(()=>P(()=>import("./ea3j10kjv7ntyk1b.js"),__vite__mapDeps([364,1])),{loading:t=>O(t)}),tFe=R(()=>P(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([147,1])),{loading:t=>O(t)}),nFe=R(()=>P(()=>import("./nlj7ey81i8rm36n9.js"),__vite__mapDeps([478,1])),{loading:t=>O(t)}),sFe=R(()=>P(()=>Promise.resolve().then(()=>Nr),void 0),{loading:t=>O(t)});function oFe(t){"use forget";var rn,Nt,Et,pn,ao,Pi;const e=G.c(78),{className:n,clientThreadId:s,message:o,onModelSelect:a,canRegenerateResponse:i,parentPrompt:l,size:c}=t,d=c===void 0?"med":c,[u,f]=_.useState(!1),m=V(),p=(rn=o.metadata)==null?void 0:rn.model_slug,g=o.id,h=ne(),x=et(m),v=x==null?void 0:x.planType,y=_.useRef(null),b=_.useRef(null);Ii();const[C,S]=_.useState(!1);let k;e[0]!==m?(k=ye(m,"1327278438"),e[0]=m,e[1]=k):k=e[1];const E=k;ye(m,"880513586");let T;e[2]!==s||e[3]!==o?(T={clientThreadId:s,message:o},e[2]=s,e[3]=o,e[4]=T):T=e[4];const{modelOptions:M,messageModelConfig:A,messageModelEnabledTools:I,defaultModelSlug:N,modelPickerVersion:L,fallbackModelOption:D}=KDe(T);let F;if(e[5]!==p||e[6]!==M){let Nn;e[8]!==p?(Nn=Ri=>Ri.value===p,e[8]=p,e[9]=Nn):Nn=e[9],F=M.find(Nn),e[5]=p,e[6]=M,e[7]=F}else F=e[7];const $=F;let H;if(e[10]!==(N==null?void 0:N.id)||e[11]!==M){let Nn;e[13]!==(N==null?void 0:N.id)?(Nn=Ri=>Ri.value===(N==null?void 0:N.id),e[13]=N==null?void 0:N.id,e[14]=Nn):Nn=e[14],H=M.find(Nn),e[10]=N==null?void 0:N.id,e[11]=M,e[12]=H}else H=e[12];const z=H,K=L===2;let J;e[15]!==s||e[16]!==g||e[17]!==p||e[18]!==M||e[19]!==a||e[20]!==E||e[21]!==K?(J=r.jsx(aFe,{clientThreadId:s,messageId:g,onModelSelect:a,messageModelSlug:p,modelOptions:M,showContextualRetry:E,isModelPickerV2:K}),e[15]=s,e[16]=g,e[17]=p,e[18]=M,e[19]=a,e[20]=E,e[21]=K,e[22]=J):J=e[22];const Z=J,q=$!=null?$:D;let se;e[23]===Symbol.for("react.memo_cache_sentinel")?(se=Nn=>{Nn||setTimeout(()=>{y.current&&y.current.blur()},10)},e[23]=se):se=e[23];const ie=se;let ee,le;e[24]!==u?(le=()=>{ie(u)},ee=[u],e[24]=u,e[25]=ee,e[26]=le):(ee=e[25],le=e[26]),_.useEffect(le,ee);let X,te;e[27]!==u?(X=()=>{u||S(!1)},te=[u],e[27]=u,e[28]=X,e[29]=te):(X=e[28],te=e[29]),_.useEffect(X,te);const ce=Ve(s,Nb);let ue;e[30]!==s?(ue={clientThreadId:s},e[30]=s,e[31]=ue):ue=e[31];const me=yO(ue),xe=_.useRef(me);let pe,Ee;e[32]!==me?(pe=()=>{xe.current=me},Ee=[me],e[32]=me,e[33]=pe,e[34]=Ee):(pe=e[33],Ee=e[34]),_.useEffect(pe,Ee);const Se=wR();if(ce)return null;const Te=(Nt=o.metadata)==null?void 0:Nt.model_slug,Ne=$De({messageModelEnabledTools:I,message:o,intl:h});let De;e[35]!==s||e[36]!==h||e[37]!==o?(De=VDe({clientThreadId:s,message:o,intl:h}),e[35]=s,e[36]=h,e[37]=o,e[38]=De):De=e[38];const de=De;if(!i)return null;const oe=(Et=o.metadata)==null?void 0:Et.show_safety_switch_ui,we=Y;let Ce;e[39]!==E?(Ce=Nn=>{f(Nn),ie(Nn),Nn&&E&&B.logEventWithStatsig("Contextual Retry Dropdown Menu Opened","chatgpt_contextual_retry_dropdown_opened")},e[39]=E,e[40]=Ce):Ce=e[40];let fe,re;e[41]!==(A==null?void 0:A.title)||e[42]!==Te||e[43]!==oe?(fe=oe?r.jsx(j,U(w({},hc.modelUsedDescription),{values:{modelName:(pn=A==null?void 0:A.title)!=null?pn:Te}})):r.jsx(j,{id:"gW2N97",defaultMessage:"Try again..."}),re=oe?null:r.jsx(j,{id:"yAiiEg",defaultMessage:"Used {modelName}",values:{modelName:(ao=A==null?void 0:A.title)!=null?ao:Te}}),e[41]=A==null?void 0:A.title,e[42]=Te,e[43]=oe,e[44]=fe,e[45]=re):(fe=e[44],re=e[45]);let ve;e[46]!==n?(ve=W("cursor-pointer",n),e[46]=n,e[47]=ve):ve=e[47];let Me;e[48]!==h?(Me=h.formatMessage({id:"42qUcL",defaultMessage:"Switch model"}),e[48]=h,e[49]=Me):Me=e[49];let $e;e[50]!==oe||e[51]!==d?($e=oe?r.jsx(tFe,{color:"var(--tag-blue)",className:d==="small"?"icon-sm":"icon"}):r.jsx(eFe,{className:d==="small"?"icon-sm":"icon"}),e[50]=oe,e[51]=d,e[52]=$e):$e=e[52];let Le;e[53]!==E?(Le=!E&&r.jsx(sFe,{className:"icon-sm"}),e[53]=E,e[54]=Le):Le=e[54];let Ae;e[55]!==$e||e[56]!==Le?(Ae=r.jsxs("div",{className:"flex items-center",children:[$e,Le]}),e[55]=$e,e[56]=Le,e[57]=Ae):Ae=e[57];let He;e[58]!==ve||e[59]!==Me||e[60]!==Ae?(He=r.jsx(Y.BasicTrigger,{ref:y,className:ve,"aria-label":Me,children:Ae}),e[58]=ve,e[59]=Me,e[60]=Ae,e[61]=He):He=e[61];let Qe;e[62]!==fe||e[63]!==re||e[64]!==He?(Qe=r.jsx(_t,{label:fe,secondaryLabel:re,children:He}),e[62]=fe,e[63]=re,e[64]=He,e[65]=Qe):Qe=e[65];const ht=Y,at=Y,vt="top",$t=4,Ct=-10,Vt="start",qt="auto",en=C?r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{icon:r.jsx(nFe,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:Nn=>{Nn.preventDefault(),S(!1)},children:r.jsx(j,w({},hc.back))}),r.jsx(Y.Separator,{}),Z]}):r.jsxs(r.Fragment,{children:[E&&r.jsx(ZDe,{message:o,canRegenerateResponse:i,onModelSelect:a,clientThreadId:s,retryOption:q,contentRef:b,parentPrompt:l}),!E&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Label,{children:r.jsx(j,{id:"bFLh5u",defaultMessage:"Switch model"})}),Z]}),q&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Separator,{}),!E&&r.jsx(s$,{clientThreadId:s,messageId:g,messageModelSlug:p,onModelSelect:a,modelRetryOption:q,showContextualRetry:!1,parentPrompt:l}),r.jsx(i9,{clientThreadId:s,messageId:g,onModelSelect:a,modelRetryOption:q,systemHintRetryOptions:[...Ne],showContextualRetry:E,messageModelSlug:p})]}),!!z&&E&&(v===We.FREE||v===We.GO)&&r.jsx(i9,{clientThreadId:s,messageId:g,onModelSelect:a,modelRetryOption:z,systemHintRetryOptions:de,messageModelSlug:p,showContextualRetry:!0}),E&&v&&Fq(v)&&v!==We.GO&&!oe&&r.jsxs(Y.Sub,{children:[!Se&&r.jsxs(r.Fragment,{children:[r.jsx(Y.SubMenuTrigger,{icon:u9,children:r.jsx(j,w({},hc.switchModel))}),r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{children:Z})})]}),Se&&r.jsx(Y.SubMenuTrigger,{icon:u9,onClick:Nn=>{Nn.preventDefault(),S(!0)},children:r.jsx(j,w({},hc.switchModel))})]}),oe&&r.jsxs(r.Fragment,{children:[r.jsx(Y.Separator,{}),r.jsxs("div",{className:"px-4 py-2",children:[r.jsx("div",{className:"text-sm",children:r.jsx(j,U(w({},hc.modelUsedDescription),{values:{modelName:(Pi=A==null?void 0:A.title)!=null?Pi:Te}}))}),r.jsx("div",{className:"text-token-text-tertiary max-w-64 py-1 text-xs",children:r.jsx(j,U(w({},hc.safetySwitchWarning),{values:{learnMoreLink:r.jsx("a",{href:"https://help.openai.com/en/articles/12454167",target:"_blank",className:"text-token-text-accent hover:text-token-text-accent/80 underline",rel:"noreferrer",children:r.jsx(j,{id:"dyuBaD",defaultMessage:"Learn more"})})}}))})]})]})]});let an;e[66]!==at.Content||e[67]!==en?(an=r.jsx(at.Content,{side:vt,sideOffset:$t,alignOffset:Ct,align:Vt,size:qt,ref:b,children:en}),e[66]=at.Content,e[67]=en,e[68]=an):an=e[68];let Qt;e[69]!==ht.Portal||e[70]!==an?(Qt=r.jsx(ht.Portal,{children:an}),e[69]=ht.Portal,e[70]=an,e[71]=Qt):Qt=e[71];let _n;return e[72]!==u||e[73]!==we.Root||e[74]!==Ce||e[75]!==Qe||e[76]!==Qt?(_n=r.jsxs(we.Root,{open:u,onOpenChange:Ce,children:[Qe,Qt]}),e[72]=u,e[73]=we.Root,e[74]=Ce,e[75]=Qe,e[76]=Qt,e[77]=_n):_n=e[77],_n}function aFe(t){"use forget";const e=G.c(49),{clientThreadId:n,messageId:s,messageModelSlug:o,onModelSelect:a,modelOptions:i,showContextualRetry:l,isModelPickerV2:c}=t,{data:d}=Al(),u=d===void 0?null:d;let f;e[0]!==u?(f=u&&kh(u),e[0]=u,e[1]=f):f=e[1];const m=f;let p;e[2]!==i?(p=XDe(i,rFe),e[2]=i,e[3]=p):p=e[3];const[g,h]=p;let x;e[4]!==m||e[5]!==i?(x=()=>{const A=i.some(I=>n$(I,m));B.logEvent("Conversation Open Message Model Selector",{has_get_plus_button:A,is_new_regen_dropdown:!0})},e[4]=m,e[5]=i,e[6]=x):x=e[6];const v=_.useEffectEvent(x);let y;e[7]!==v?(y=()=>{v()},e[7]=v,e[8]=y):y=e[8];let b;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[9]=b):b=e[9],_.useEffect(y,b);let C;e[10]!==g?(C=new Map,g.forEach(A=>{var N;const I=A.subcategory;I&&(C.has(I)||C.set(I,[]),(N=C.get(I))==null||N.push(A))}),e[10]=g,e[11]=C):C=e[11];const S=C;let k;if(e[12]!==n||e[13]!==m||e[14]!==s||e[15]!==o||e[16]!==a||e[17]!==l||e[18]!==h){let A;e[20]!==n||e[21]!==m||e[22]!==s||e[23]!==o||e[24]!==a||e[25]!==l?(A=I=>r.jsx(D2,{clientThreadId:n,messageId:s,onModelSelect:a,modelRetryOption:I,showContextualRetry:l,hasPlusFeatures:m,messageModelSlug:o},I.value),e[20]=n,e[21]=m,e[22]=s,e[23]=o,e[24]=a,e[25]=l,e[26]=A):A=e[26],k=h.map(A),e[12]=n,e[13]=m,e[14]=s,e[15]=o,e[16]=a,e[17]=l,e[18]=h,e[19]=k}else k=e[19];let E;e[27]!==n||e[28]!==m||e[29]!==c||e[30]!==s||e[31]!==o||e[32]!==a||e[33]!==S||e[34]!==l?(E=c&&[...S.entries()].map(A=>{const[I,N]=A;return N.map(L=>r.jsx(D2,{clientThreadId:n,messageId:s,onModelSelect:a,modelRetryOption:L,showContextualRetry:l,hasPlusFeatures:m,messageModelSlug:o,subcategory:I},I+"-"+L.value))}),e[27]=n,e[28]=m,e[29]=c,e[30]=s,e[31]=o,e[32]=a,e[33]=S,e[34]=l,e[35]=E):E=e[35];let T;e[36]!==n||e[37]!==m||e[38]!==c||e[39]!==s||e[40]!==o||e[41]!==a||e[42]!==S||e[43]!==l?(T=!c&&[...S.entries()].map(A=>{const[I,N]=A;return r.jsxs(Y.Sub,{children:[r.jsx(Y.SubMenuTrigger,{children:r.jsx("div",{className:"flex grow justify-between gap-2 overflow-hidden",children:I})}),r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{className:"min-w-fit",children:N.map(L=>r.jsx(D2,{clientThreadId:n,messageId:s,onModelSelect:a,modelRetryOption:L,showContextualRetry:l,hasPlusFeatures:m,messageModelSlug:o,subcategory:I},I+"-"+L.value))})})]},I)}),e[36]=n,e[37]=m,e[38]=c,e[39]=s,e[40]=o,e[41]=a,e[42]=S,e[43]=l,e[44]=T):T=e[44];let M;return e[45]!==k||e[46]!==E||e[47]!==T?(M=r.jsxs(r.Fragment,{children:[k,E,T]}),e[45]=k,e[46]=E,e[47]=T,e[48]=M):M=e[48],M}function rFe(t){return t.subcategory}const rot=_.memo(oFe),hc=be({switchModel:{id:"RegenerateWithModelDropdown.switchModel",defaultMessage:"Switch model"},back:{id:"RegenerateWithModelDropdown.back",defaultMessage:"Back"},modelUsedDescription:{id:"RegenerateWithModelDropdown.modelUsedDescription",defaultMessage:"Used {modelName}"},safetySwitchWarning:{id:"RegenerateWithModelDropdown.safetySwitchWarning",defaultMessage:"ChatGPT routes some sensitive conversations to models that handle these topics with extra care. {learnMoreLink}"}});function N4(t){returnwindow.location.origin+"/s/".concat(t)}const Qu=be({copyLink:{id:"postSharingModal.copyLink",defaultMessage:"Copy link"},linkCopied:{id:"postSharingModal.linkCopied",defaultMessage:"Link copied!"},failedToGenerateShareLink:{id:"postSharingModal.failedToGenerateShareLink",defaultMessage:"Failed to generate share link"},fromChatGPT:{id:"postSharingModal.fromChatGPT",defaultMessage:"From ChatGPT"},contentUnavailable:{id:"postSharingModal.contentUnavailable",defaultMessage:"Content Unavailable"},unavailableReasonGeneral:{id:"postSharingModal.unavailableReasonGeneral",defaultMessage:"This share link is not available because it doesnt exist or you dont have access to it."},unavailableReasonWorkspace:{id:"postSharingModal.unavailableReasonWorkspace",defaultMessage:"This content was shared from a workspace you dont have access to. Ask the owner to invite you if youd like to view it."},ok:{id:"postSharingModal.ok",defaultMessage:"OK"},shareLinkVisibleToWorkspaceOnly:{id:"postSharingModal.shareLinkVisibleToWorkspaceOnly",defaultMessage:"The share links are visible to workspace members only."},download:{id:"postSharingModal.download",defaultMessage:"Download"},downloadPdfButtonMenu:{id:"postSharingModal.download-pdf-button.menu",defaultMessage:"PDF Document (.pdf)"},downloadDocxButtonMenu:{id:"postSharingModal.download-docx-button.menu",defaultMessage:"Microsoft Word Document (.docx)"},downloadPptxButtonMenu:{id:"postSharingModal.download-pptx-button.menu",defaultMessage:"Microsoft PowerPoint Document (.pptx)"},downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},imageLicenseDisclaimer:{id:"postSharingModal.imageLicenseDisclaimer",defaultMessage:"Only share images you have a license to use. <link>Learn{nbsp}more</link>"},screenshotDisclaimer:{id:"postSharingModal.screenshotDisclaimer",defaultMessage:"Screenshots may contain sensitive information."}}),n_=R(()=>P(()=>import("./hanz3i2e98xohunm.js"),__vite__mapDeps([483,1,10,11,224,109,110,73])).then(t=>t.PostSharingModal)),xd=R(()=>P(()=>import("./bjlkonebphl4hiqo.js"),__vite__mapDeps([484,1,10,11])).then(t=>t.MobilePostPreview));function iFe(t){const e=Pl(t,n=>pr.getImageAssetPointers(n).length>0);return e?pr.getImageAssetPointers(e)[0]:null}async function lFe(t,e,n){return wo(e.asset_pointer)?(await oke(t,[e],null,void 0,n))[0]:null}const cFe=async(t,e,n)=>{var i;const s=()=>he.findNode(ft(e),({message:l})=>l.id===n||!!pr.getImageAssetPointers(l).find(c=>c.asset_pointer===t));let o=s();if(!(o!=null&&o.message)&&(await Ma(e),o=s(),!(o!=null&&o.message)))return null;const a=At(e);return{postText:(i=o.message.metadata)==null?void 0:i.image_gen_title,imageAssetPointer:iFe([o.message]),serverThreadId:a}};async function dFe(t,e,n,s){const o=wo(e.asset_pointer);if(!o)return null;const a=await ge.safePost("/share/post",{requestBody:{post_text:n,attachments_to_create:[{kind:"image_share",file_id:o,conversation_id:t,width:s==null?void 0:s.width,height:s==null?void 0:s.height}]}});return N4(a.post.id)}async function uFe(t,e,n){const s=await ge.safePost("/share/post",{requestBody:{post_text:n,attachments_to_create:[{kind:"message_slice",conversation_id:t,message_ids:e}]}});return N4(s.post.id)}async function s_({postText:t,postTitle:e,clientThreadId:n,generateShareLinkFn:s,renderPreviewFn:o,usePostText:a,useShareLink:i,useShareTitle:l}){if(!At(n))return!1;try{const d=await s();return d?(o&&o(),await navigator.share({text:a?t:void 0,url:i?d:void 0,title:l?e:void 0}),!0):!1}catch(d){return!1}}async function fFe(t,e,n,s,o,a){const i=await cFe(t,e,n);if(!(i!=null&&i.imageAssetPointer)||!(i!=null&&i.serverThreadId))return;const{postText:l,imageAssetPointer:c,serverThreadId:d}=i,u=await lFe(s,c,d);if(!u)return;const f=()=>dFe(d,c,l,u);if(a&&ye(o,"1138231213")){const m=ze(o,"2382399797");if(await s_({clientThreadId:e,postText:l,generateShareLinkFn:f,usePostText:m.get("navigator_share_text",!1),useShareLink:m.get("navigator_share_link",!1)}))return}lt(o,n_,{postSharingData:{clientThreadId:e,postText:l,generateShareLinkFn:f,coverImageUrl:u==null?void 0:u.url}})}async function mFe(t,e,n,s,o){const a=At(t);if(!a)return;const i=()=>uFe(a,e,o);if(s&&ye(n,"1138231213")){await s_({clientThreadId:t,generateShareLinkFn:i,renderPreviewFn:()=>{lt(n,xd,{clientThreadId:t,coverImageUrl:void 0,messageSliceIds:e})},useShareLink:!0,useShareTitle:!0,postTitle:o}),Ss(n,xd);return}lt(n,n_,{postSharingData:{clientThreadId:t,generateShareLinkFn:i,postText:o,messageSliceIds:e,messageSliceAttachment:void 0}})}const B2=async(t,e,n,s)=>{if(!At(e))return;const a=async()=>{const i=await ge.safePost("/share/post",{requestBody:{attachments_to_create:[{kind:"odyssey_artifact",file_id:t.fileId,message_id:t.messageId,conversation_id:t.serverThreadId}]}});return N4(i.post.id)};if(s&&ye(n,"1138231213")){const i=await s_({clientThreadId:e,generateShareLinkFn:a,renderPreviewFn:()=>{lt(n,xd,{clientThreadId:e,generateShareLinkFn:a,coverImageUrl:void 0,messageSliceIds:void 0,odysseyShareIntent:t})},useShareLink:!0,useShareTitle:!1});if(Ss(n,xd),i)return}lt(n,n_,{postSharingData:{clientThreadId:e,generateShareLinkFn:a,odysseyShareIntent:t,messageSliceIds:void 0}})};async function pFe({ctx:t,serverThreadId:e,existingShareLinkUrl:n}){var d,u,f;if(!t)return!1;const s=M3(e);let o=ft(s);if(o||(await Ma(s),o=ft(s)),!o)return!1;const a=he.getConversationTurns(o).flatMap(m=>m.messages.map(p=>p.id)).filter(m=>!!m);if(a.length===0)return!1;const i=!R8();((d=he.getCurrentNode(o))==null?void 0:d.message.id)||await Ma(s);const c=()=>Promise.resolve(n!=null?n:null);return i&&ye(t,"1138231213")?(await s_({clientThreadId:s,postTitle:(u=o.title)!=null?u:void 0,generateShareLinkFn:c,renderPreviewFn:()=>{lt(t,xd,{clientThreadId:s,coverImageUrl:void 0,messageSliceIds:a})},useShareLink:!0,useShareTitle:!0}),Ss(t,xd),!0):(lt(t,n_,{postSharingData:{clientThreadId:s,generateShareLinkFn:c,postText:(f=o.title)!=null?f:void 0,messageSliceIds:a,messageSliceAttachment:void 0}}),!0)}function o$(t){const{assetPointer:e=null,clientThreadId:n,imageGenMessageId:s,messageSliceIds:o,odysseyShareIntent:a,parentPromptId:i}=t,l=jt(),c=V(),d=Mo(),u=Ve(n,f=>f==null?void 0:f.title);return _.useEffect(()=>{P(()=>Promise.resolve().then(()=>LIe),void 0)},[]),_.useCallback(async()=>{if(s)await fFe(e,n,s,l,c,d);else if(o){const m=i!=null&&ze(c,"1547743984").get("is_message_prompt_enabled",!1)&&i?[i,...o.filter(p=>p!==i)]:o;await mFe(n,m,c,d,u!=null?u:void 0)}else a&&await(B2==null?void 0:B2(a,n,c,d))},[e,n,s,o,u,l,d,a,i,c])}function a$(t){const e=ne();switch(t){case"general":return e.formatMessage(Qu.unavailableReasonGeneral);case"workspace":return e.formatMessage(Qu.unavailableReasonWorkspace);default:return e.formatMessage(Qu.unavailableReasonGeneral)}}function gFe({onClose:t,reason:e}){const n=ne(),s=ot(),o=()=>{t(),s("/")},a=a$(e);return r.jsx(Mt,{testId:"modal-post-sharing-error",isOpen:!0,type:"danger",textCenter:!0,title:n.formatMessage(Qu.contentUnavailable),description:a,onClose:o,footerContent:r.jsx(_e,{size:"large",color:"primary",className:"w-full",onClick:o,children:n.formatMessage(Qu.ok)})})}const iot=Object.freeze(Object.defineProperty({__proto__:null,PostSharingErrorModal:gFe,openConversationPostSharingModal:pFe,useOpenPostSharingModal:o$,usePostSharingErrorMessage:a$},Symbol.toStringTag,{value:"Module"})),lot=async(t,e,n,s,o,a="mouse",i)=>{var b,C;const l=he.getConversationTurns(ft(e)),c=l[n];if(!c)return Promise.reject();const d=c.role===Ke.User?c.userContinuationRootTurnId:void 0,u=d!=null?l.filter(S=>S.role===Ke.User&&S.userContinuationRootTurnId===d):[c],f=(b=u[0])!=null?b:c,m=u.length>1?U(w({},f),{messages:u.flatMap(S=>S.messages)}):c,{messages:p}=m,g=o,h=((C=p[0])==null?void 0:C.author.role)===Ke.User,x=g.metaKey||g.altKey,v=await nDe(m,i,e,{unprocessed:x||h});await Zo(v,s,o);const y=At(e);y&&(u1(t,{messageId:p[0].id,type:"copy",serverThreadId:y,selectedText:bo(p[0]),source:a,location:"message",contentType:"text"}),B.logStructuredEvent(NX,{conversationId:y,messageId:p[0].id}))};function cot(t,e){var p,g,h,x;const n=V(),[s,o,a]=Ve(t,v=>[he.getIsNewConversation(v),he.getRequestId(v),Nb(v)]),i=Na(o),l=iLe(),c=!tt(n),d=((p=e==null?void 0:e.metadata)==null?void 0:p.b1de6e2_s)||((g=e==null?void 0:e.metadata)==null?void 0:g.b1de6e2_rm),u=!!((h=e==null?void 0:e.metadata)!=null&&h.n7jupd_message),f=!!((x=e==null?void 0:e.metadata)!=null&&x.image_gen_async);return!s&&!i&&!l.displayingSideBySideFeedback&&!c&&!a&&!u&&!f&&!d}async function dot(t,e,n){try{await t()}catch(s){e(s)}finally{n()}}function hFe({audioAssetPointer:t,conversationId:e}){const n=jt(),[s,o]=_.useState(!1),a=_.useRef(!0),[i,l]=_.useState(void 0),c=_.useRef(null),d=Y3(),u=Z3(g=>g.isPlaying&&g.sourceUrl===i),f=_.useCallback(()=>{const g=lx();if(g)c.current?c.current.then(()=>{g.stop(),c.current=null}):g.stop();else return},[]);_.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),_.useEffect(()=>()=>{I8().isPlaying&&f()},[f]);const m=_.useCallback(async()=>{if(!d||!a.current)return;o(!0);const{url:g}=await Qd.fetch(n,{asset:t,conversationId:e});o(!1),l(g),d.changeSource(g),c.current=d.play()},[t,e,d,n]);return{togglePlayback:_.useCallback(()=>{if(d)u?f():(Bt.messagePlayback.click(),m());else return},[u,m,d,f]),isPlaying:u,isLoading:s}}const r$=_.createContext({isLoading:!1,isPlaying:!1,togglePlayback:()=>{throw new Error("Invalid usage outside of VoicePlaybackContext")},mode:"readAloud"});function _Fe({children:t,audioAssetPointer:e,conversationId:n}){const{isLoading:s,isPlaying:o,togglePlayback:a}=hFe({audioAssetPointer:e,conversationId:n});return r.jsx(r$.Provider,{value:_.useMemo(()=>({isLoading:s,isPlaying:o,togglePlayback:a,mode:"audioAsset"}),[s,o,a]),children:t})}function xFe({children:t,conversationId:e,messageId:n}){const{isLoading:s,isPlaying:o,togglePlayback:a}=Q3e({conversationId:e,messageId:n});return r.jsx(r$.Provider,{value:_.useMemo(()=>({isLoading:s,isPlaying:o,togglePlayback:a,mode:"readAloud"}),[s,o,a]),children:t})}function uot({children:t,enable:e,lastMessage:n,serverThreadId:s}){if(!e||!n||!s)return t;const o=pr.getAudioAssetPointers(n)[0];return o?r.jsx(_Fe,{conversationId:s,audioAssetPointer:o,children:t}):r.jsx(xFe,{conversationId:s,messageId:n.id,children:t})}const yFe=R(()=>P(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([52,1])),{loading:t=>O(t)});function fot({onAnticipateEdit:t,onEnterEdit:e}){const n=ne();return r.jsx(_d,{label:n.formatMessage({id:"gG9rea",defaultMessage:"Edit message"}),icon:yFe,onClick:e,onBeforeClick:t})}function mot({message:t,clientThreadId:e,turnIndex:n,referenceMessageId:s,responseComplete:o}){var p,g;const a=V(),i=yt(a,e),l=ym("n7jupdSources"),c=Hf(),d=(p=t==null?void 0:t.metadata)==null?void 0:p.async_task_id,u=t&&((g=t.metadata)==null?void 0:g.open_tabs)&&t.metadata.open_tabs.length>0,f=(()=>{var v,y,b;if(!t)return[];const h=(v=t.metadata)!=null?v:{},x=[...(y=h.content_references)!=null?y:[],...Object.values((b=h.content_references_by_file)!=null?b:{}).flat()];return x.length===0?[]:x.flatMap(C=>{var S,k,E,T;switch(C.type){case"webpage":case"webpage_extended":return C.url?[C.url]:[];case"grouped_webpages":return(k=(S=C.items)==null?void 0:S.map(M=>M.url).filter(Boolean))!=null?k:[];case"file":return C.cloud_doc_url?[C.cloud_doc_url]:[];case"image_inline":{const M=(T=C.clicked_from_url)!=null?T:(E=C.asset_pointer_links)==null?void 0:E[0];return M?[M]:[]}default:return[]}})})();_.useEffect(()=>{if(d)return As.retainTaskStream(d),()=>{As.releaseTaskStream(d)}},[d]);const m=_.useCallback(()=>{dR(i,{type:"n7jupdSources",turnIndex:n||1,messageId:s},l)},[i,l,n,s]);return!o||f.length===0||u?null:r.jsx(hO,{sourcesUrls:f,onClick:()=>{m()},className:W("mt-0! mb-0!",c&&"cursor-default")})}const pot=({clientThreadId:t})=>{const e=At(t),n=Ve(t,s=>he.findNode(s,o=>{var a;return!!((a=o.message.metadata)!=null&&a.visited_risky_domain)}));return _.useEffect(()=>{if(!e||!n)return;const s=setInterval(()=>{document.visibilityState==="visible"&&ge.safePost("/conversation/{conversation_id}/agent/notify_viewing",{parameters:{path:{conversation_id:e}}})},1e3);return()=>clearInterval(s)},[e,n]),null},vFe="Continue",got=({clientThreadId:t,messages:e})=>{const n=V(),s=yt(n,t),o=_.useMemo(()=>e.some(d=>{var u;return((u=d.metadata)==null?void 0:u.stop_reason)===Bq.RiskyDomainNotWatching}),[e]),a=Xye(s.id),{selectedSources:i}=La(s.id),[l,c]=_.useState(!1);return r.jsx(Mt,{testId:"modal-watch-mode-stopped",isOpen:o&&!l,type:"success",size:"normal",onClose:rs,className:"p-1",title:r.jsx("div",{className:"font-semibold",children:r.jsx(j,{id:"8FmSDC",defaultMessage:"Task paused while you were away"})}),primaryButton:r.jsx(_e,{onClick:()=>{Ko({conversation:s,eventSource:"mouse",promptMessage:ls(vFe,w({system_hints:[hs]},i&&{selected_sources:xi(i)})),completionMetadata:{systemHints:[hs],conversationMode:{kind:wt.PrimaryAssistant}}})},children:r.jsx(j,{id:"4rrYz9",defaultMessage:"Resume"})}),secondaryButton:r.jsx(_e,{color:"secondary",onClick:()=>c(!0),children:r.jsx(j,{id:"yg+V5e",defaultMessage:"Stay paused"})}),children:r.jsx(j,{id:"Wdb/cy",defaultMessage:"ChatGPT is working with {riskyDomain}, which contains sensitive data. To resume, keep your browser's tab open and monitor actions.",values:{riskyDomain:r.jsx("span",{className:"font-medium",children:a})}})})},P4=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10 2.125C14.3492 2.125 17.875 5.65076 17.875 10C17.875 14.3492 14.3492 17.875 10 17.875C5.65076 17.875 2.125 14.3492 2.125 10C2.125 5.65076 5.65076 2.125 10 2.125ZM7.88672 10.625C7.94334 12.3161 8.22547 13.8134 8.63965 14.9053C8.87263 15.5194 9.1351 15.9733 9.39453 16.2627C9.65437 16.5524 9.86039 16.625 10 16.625C10.1396 16.625 10.3456 16.5524 10.6055 16.2627C10.8649 15.9733 11.1274 15.5194 11.3604 14.9053C11.7745 13.8134 12.0567 12.3161 12.1133 10.625H7.88672ZM3.40527 10.625C3.65313 13.2734 5.45957 15.4667 7.89844 16.2822C7.7409 15.997 7.5977 15.6834 7.4707 15.3486C6.99415 14.0923 6.69362 12.439 6.63672 10.625H3.40527ZM13.3633 10.625C13.3064 12.439 13.0059 14.0923 12.5293 15.3486C12.4022 15.6836 12.2582 15.9969 12.1006 16.2822C14.5399 15.467 16.3468 13.2737 16.5947 10.625H13.3633ZM12.1006 3.7168C12.2584 4.00235 12.4021 4.31613 12.5293 4.65137C13.0059 5.90775 13.3064 7.56102 13.3633 9.375H16.5947C16.3468 6.72615 14.54 4.53199 12.1006 3.7168ZM10 3.375C9.86039 3.375 9.65437 3.44756 9.39453 3.7373C9.1351 4.02672 8.87263 4.48057 8.63965 5.09473C8.22547 6.18664 7.94334 7.68388 7.88672 9.375H12.1133C12.0567 7.68388 11.7745 6.18664 11.3604 5.09473C11.1274 4.48057 10.8649 4.02672 10.6055 3.7373C10.3456 3.44756 10.1396 3.375 10 3.375ZM7.89844 3.7168C5.45942 4.53222 3.65314 6.72647 3.40527 9.375H6.63672C6.69362 7.56102 6.99415 5.90775 7.4707 4.65137C7.59781 4.31629 7.74073 4.00224 7.89844 3.7168Z"}));var ga=(t=>(t[t.Classifier=0]="Classifier",t[t.Conversation=1]="Conversation",t[t.ShortQuery=2]="ShortQuery",t))(ga||{});function bFe(t){switch(t){case 0:return"navlinks_shown_cl";case 1:return"navlinks_shown_co";case 2:return"navlinks_shown_sq"}}function CFe(t,e,n,s,o){var u,f;if(!n)return;const a=t,i=e,l=n.getStartTime();if(n.logTimingOnce("navlinks_shown",{overrideDurationMs:a-l}),o!==void 0){const m=bFe(o);n.logTimingOnce(m,{overrideDurationMs:a-l}),Ie.count(je.DEFAULT,"navlinks_show_decision_counter",[{key:"source",value:m}])}if(!s)return;let c=0;s.requestedTimeUnixEpochMs!==void 0&&(c=i-(s==null?void 0:s.requestedTimeUnixEpochMs)-(a-l),n.logTimingOnce("navlinks_before_js",{overrideDurationMs:c}),n.logTimingOnce("navlinks_shown_total",{overrideDurationMs:i-(s==null?void 0:s.requestedTimeUnixEpochMs)}));const d=o===ga.Classifier;if(s.lastStartFetch!==void 0&&s.firstStartFetch!==void 0&&s.firstNavlinkFetched!==void 0){const m=Math.max(d&&s.firstClassifierFetched!==void 0?s.firstClassifierFetched-s.lastStartFetch:0,0);let p=Math.max(Math.min(s.lastStartFetch-s.firstStartFetch,s.firstNavlinkFetched-s.firstStartFetch),0);o===ga.Conversation&&(p=0),n.logTimingOnce("navlinks_typeahead_savings",{overrideDurationMs:p}),n.logTimingOnce("navlinks_typeahead_savings_adj",{overrideDurationMs:Math.max(p-m,0)})}if(s.firstRoundtripTime!==void 0&&s.firstStartFetch!==void 0&&n.logTimingOnce("navlinks_roundtrip_latency",{overrideDurationMs:s.firstRoundtripTime-s.firstStartFetch}),s.firstNavlinkFetched!==void 0&&s.firstStartFetch!==void 0&&n.logTimingOnce("navlinks_first_fetch_latency",{overrideDurationMs:s.firstNavlinkFetched-s.firstStartFetch}),s.firstClassifierFetched!==void 0&&s.lastStartFetch!==void 0&&n.logTimingOnce("navlinks_classifier_latency",{overrideDurationMs:s.firstClassifierFetched-s.lastStartFetch}),s.requestedTimeUnixEpochMs){const m=Math.max((u=s.firstNavlinksFetchedTS)!=null?u:0,d&&(f=s.firstClassifierFetchedTS)!=null?f:0,s.requestedTimeUnixEpochMs);let p=i-m;o===ga.Conversation&&(p=c),n.logTimingOnce("navlinks_wait_for_ui",{overrideDurationMs:p})}}function SFe(t){const e=/^(\S+\s+followers  )\S+\s+following  \S+\s+posts  @[A-Za-z0-9._]+:\s*(.+)$/,n=t.match(e);return n?r.jsxs("span",{children:[r.jsx("span",{className:"text-token-text-tertiary",children:n[1]}),n[2]]}):t}function wFe(t){return Object.values(t.reduce((e,n)=>{const s=n.domain;return e[s]||(e[s]=[]),e[s].push(n),e},{}))}const f9=new Set,U2=new Map;function kFe({content:t,clientThreadId:e,navlinksShowDecisionSource:n,analytics:s,query:o}){const a=V(),{navlinks:i,navlinks_ready:l}=t.widgets,{profiler:c,isRequestActive:d}=tL({namespace:hm.SuperWidget,clientThreadId:e}),u=ne(),f=ae(()=>Qo(a)),m=_.useRef(!1),g=xM(a)&&i&&i.length>0;if(g&&o!=null){const v="".concat(e,"_").concat(o);U2.has(v)||U2.set(v,{perf:performance.now(),unix:Date.now()})}_.useEffect(()=>{if(g&&c&&d&&!m.current&&o!=null){const v="".concat(e,"_").concat(o),y=U2.get(v);!f9.has(v)&&y&&(f9.add(v),m.current=!0,CFe(y.perf,y.unix,c,s,n))}},[g,c,d,n,s,o,e]),_.useEffect(()=>{g&&B.logStructuredEvent(ld,{step:vl.ATLAS_NAVLINKS_ACTION_STEP_SHOW,source:Ia.ATLAS_NAVLINKS_SOURCE_CHAT_LIST})},[g]);const[,h]=Mm(),x=()=>{B.logStructuredEvent(ld,{step:vl.ATLAS_NAVLINKS_ACTION_STEP_SEE_MORE,source:Ia.ATLAS_NAVLINKS_SOURCE_CHAT_LIST}),h({tabType:xt.Search})};return g?r.jsxs("div",{className:"flex gap-2",children:[r.jsx(m9,{index:0,navlink:i.length>0?i[0]:null}),r.jsx(m9,{index:1,navlink:i.length>1?i[1]:null}),f&&r.jsxs("button",{onClick:x,"aria-label":u.formatMessage({id:"cwfmIN",defaultMessage:"See more links"}),className:W("text-token-text-tertiary flex flex-col items-center justify-center gap-1 self-stretch rounded-xl",f?"hover:bg-token-bg-tertiary bg-(--bg-quaternary) px-6":"bg-token-bg-tertiary hover:bg-token-bg-secondary px-4"),children:[r.jsx(P4,{}),r.jsx("span",{className:"min-h-[20px] text-sm",children:l?i.length:null})]})]}):null}function m9({index:t,navlink:e,linkTarget:n="_self"}){var l;const s=V(),o=ae(()=>Qo(s)),a=()=>{B.logStructuredEvent(ld,{step:vl.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:Ia.ATLAS_NAVLINKS_SOURCE_CHAT_CAROUSEL,navlinkIndex:t})},i=["flex-1 rounded-xl",o?"hover:bg-token-bg-tertiary min-h-[76px] bg-(--bg-quaternary)":"bg-token-bg-tertiary hover:bg-token-bg-secondary min-h-[64px]"];return e?r.jsx(xB,{favicon:r.jsx(ks,{url:e.url,size:32,minSize:16,applySizeToImg:!1,showLoadingAnimation:!0,className:"h-4 w-4 shrink-0 rounded-full border-1 border-gray-200"}),heading:e.title,title:null,quoteHeading:null,quoteText:null,snippet:(l=e.snippet)!=null?l:null,isContentBlocked:!1,theme:"white",children:r.jsxs(no,{href:e.url,target:n,onClick:a,className:W(i,"flex flex-col gap-1 px-4 py-3 select-none"),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ks,{url:e.url,size:32,minSize:16,applySizeToImg:!1,className:"h-4 w-4 shrink-0 rounded-full",showLoadingAnimation:!0}),r.jsx("span",{className:"text-token-text-tertiary line-clamp-1 text-sm",children:r.jsxs("span",{children:[e.domain,"  ",e.title]})})]}),r.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm",children:e.snippet?SFe(e.snippet):e.title})]})}):r.jsx("div",{className:W(i,"loading-results-shimmer")})}const EFe=new Set(["lynx","cache"]),qy=new Set(["ocelot","caracal"]),p9=10,TFe=2,MFe=t=>{var n;return t.source&&qy.has(t.source)?!0:((n=t.sources)!=null?n:[]).some(s=>qy.has(s))};function Ou(t,e,n=!1){var l,c,d;const s=w({},e),o=[],a=[],i=[];for(const u of t){let f=!1;for(let m=0;m<1+((c=(l=u.sources)==null?void 0:l.length)!=null?c:0);m++){const p=m===0?u.source:(d=u.sources)==null?void 0:d[m-1],g=p!=="fast"?p:"cache",h=g!==void 0?[g]:[];if(g!==void 0&&EFe.has(g)&&h.push("fast"),g!==void 0&&qy.has(g)&&h.push("high-quality"),!h.some(x=>s[x]!==void 0&&s[x]<=0)){h.forEach(x=>{s[x]!==void 0&&s[x]--}),o.push(u),f=!0;break}}f||(MFe(u)?a:i).push(u)}if(n&&o.length<p9){const u=p9-o.length,f=new Set(o.map(g=>g.url)),m=(g,h)=>{let x=0;for(const v of g){if(x>=h)break;f.has(v.url)||(o.push(v),f.add(v.url),x++)}return x},p=m(a,u);p<u&&m(i,u-p)}return o}const i$=Wn(t=>{const n=is(t,"3205212221").get("max_navlinks",void 0);let s;if(n&&typeof n=="object"&&!Array.isArray(n)){s={};for(const[o,a]of Object.entries(n))typeof a=="number"&&(s[o]=a)}return(!s||Object.keys(s).length===0)&&(s={fast:TFe}),s}),l$=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8.07715 11.7168C9.31399 11.1993 10.4531 11.1663 11.6777 11.6191L11.9238 11.7168L12.042 11.7812C12.2973 11.9555 12.4042 12.2906 12.2803 12.5869C12.1562 12.8832 11.8424 13.0421 11.5391 12.9824L11.4102 12.9434L11.2266 12.8711C10.3144 12.5309 9.5197 12.5548 8.59082 12.9434C8.25208 13.0851 7.86156 12.9256 7.71973 12.5869C7.57799 12.2481 7.73836 11.8586 8.07715 11.7168Z"}),_.createElement("path",{d:"M7.08301 7.08301C7.77326 7.08301 8.33284 7.64279 8.33301 8.33301C8.33301 9.02336 7.77336 9.58301 7.08301 9.58301C6.39282 9.58281 5.83301 9.02324 5.83301 8.33301C5.83317 7.64291 6.39292 7.08321 7.08301 7.08301Z"}),_.createElement("path",{d:"M12.917 7.08301C13.6071 7.08321 14.1668 7.64291 14.167 8.33301C14.167 9.02324 13.6072 9.58281 12.917 9.58301C12.2266 9.58301 11.667 9.02336 11.667 8.33301C11.6672 7.64279 12.2267 7.08301 12.917 7.08301Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.83496C10.3673 1.83496 10.665 2.13273 10.665 2.5V3.08496H13.084C13.7728 3.08496 14.3302 3.08432 14.7803 3.12109C15.2379 3.15854 15.644 3.23788 16.0205 3.42969L16.2383 3.55176C16.7341 3.85586 17.1378 4.29237 17.4033 4.81348L17.4707 4.95605C17.6149 5.29226 17.6792 5.65318 17.7119 6.05371C17.7392 6.38721 17.7442 6.7793 17.7461 7.24023C18.2408 7.48486 18.5819 7.99377 18.582 8.58301V9.83301C18.582 10.4249 18.2375 10.9351 17.7393 11.1787C17.7316 11.6246 17.7183 12.0205 17.6895 12.374C17.6368 13.018 17.5355 13.5674 17.3213 14.0664L17.2217 14.2773C16.7875 15.1292 16.1108 15.8317 15.2793 16.2979L15.1104 16.3887C14.5555 16.6713 13.9436 16.7963 13.208 16.8564C12.4799 16.9159 11.5726 16.915 10.417 16.915H9.58398C8.42845 16.915 7.52104 16.9159 6.79297 16.8564C6.14901 16.8038 5.59958 16.7015 5.10059 16.4873L4.88965 16.3887C3.98077 15.9255 3.24152 15.1862 2.77832 14.2773C2.49553 13.7223 2.37068 13.1099 2.31055 12.374C2.28166 12.0205 2.26719 11.6247 2.25977 11.1787C1.76193 10.935 1.41797 10.4246 1.41797 9.83301V8.58301C1.41809 7.99377 1.75916 7.48486 2.25391 7.24023C2.25555 6.77929 2.26084 6.38722 2.28809 6.05371C2.3255 5.59593 2.40488 5.19008 2.59668 4.81348C2.90012 4.21801 3.38499 3.7331 3.98047 3.42969C4.357 3.23799 4.76303 3.1585 5.2207 3.12109C5.67088 3.08434 6.22809 3.08496 6.91699 3.08496H9.33496V2.5C9.33496 2.13273 9.63273 1.83496 10 1.83496ZM6.91699 4.41504C6.20618 4.41504 5.71257 4.41596 5.3291 4.44727C4.95363 4.47795 4.74196 4.5348 4.58398 4.61523C4.23879 4.79113 3.95815 5.07182 3.78223 5.41699C3.70172 5.575 3.64496 5.78642 3.61426 6.16211C3.58292 6.54563 3.58203 7.03896 3.58203 7.75V9.58301C3.58203 10.7606 3.58269 11.6042 3.63672 12.2656C3.69012 12.9192 3.79255 13.3366 3.96387 13.6729C4.29959 14.3317 4.83531 14.8674 5.49414 15.2031L5.62402 15.2646C5.93806 15.3997 6.32958 15.4836 6.90137 15.5303C7.56272 15.5843 8.40657 15.585 9.58398 15.585H10.417C11.5946 15.585 12.4382 15.5843 13.0996 15.5303C13.753 15.4769 14.1706 15.3744 14.5068 15.2031L14.748 15.0684C15.2964 14.7319 15.7434 14.2493 16.0371 13.6729L16.0977 13.543C16.2328 13.2289 16.3175 12.8377 16.3643 12.2656C16.4183 11.6042 16.4189 10.7606 16.4189 9.58301V7.75C16.4189 7.03898 16.4181 6.54562 16.3867 6.16211C16.3637 5.88018 16.3259 5.69064 16.2744 5.54688L16.2188 5.41699C16.0648 5.11489 15.8304 4.86186 15.543 4.68555L15.417 4.61523C15.2591 4.53477 15.0472 4.47798 14.6719 4.44727C14.2885 4.41594 13.7947 4.41504 13.084 4.41504H6.91699Z"})),AFe=Object.freeze(Object.defineProperty({__proto__:null,default:l$},Symbol.toStringTag,{value:"Module"})),c$=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.0013 7.33331C16.0013 6.62228 16.0014 6.12894 15.9701 5.74542C15.947 5.46347 15.9092 5.27396 15.8578 5.13019L15.8021 5.00031C15.6482 4.6982 15.4137 4.44517 15.1263 4.26886L14.9994 4.19855C14.8414 4.11809 14.6298 4.06127 14.2542 4.03058C13.8708 3.99926 13.3772 3.99835 12.6663 3.99835H7.33334C6.6223 3.99835 6.12897 3.99924 5.74545 4.03058C5.46359 4.05361 5.27396 4.09047 5.13021 4.14191L5.00033 4.19855C4.69807 4.35257 4.4452 4.58669 4.26888 4.87433L4.19857 5.00031C4.11806 5.15831 4.0613 5.36972 4.0306 5.74542C3.99927 6.12894 3.99838 6.62228 3.99838 7.33331V11.7269L5.01791 10.7083L5.19466 10.5482C6.11049 9.80104 7.46204 9.85459 8.31576 10.7083L13.6038 15.9964C13.8549 15.9923 14.0676 15.9853 14.2542 15.97C14.6296 15.9394 14.8414 15.8824 14.9994 15.8021L15.1263 15.7308C15.4137 15.5545 15.6482 15.3014 15.8021 14.9993L15.8578 14.8694C15.9092 14.7257 15.947 14.536 15.9701 14.2542C16.0014 13.8707 16.0013 13.3772 16.0013 12.6663V7.33331ZM7.37533 11.6487C7.00855 11.282 6.42794 11.2593 6.03451 11.5804L5.95834 11.6487L4.00228 13.6048C4.00643 13.8555 4.01538 14.0678 4.0306 14.2542C4.06129 14.6298 4.11811 14.8413 4.19857 14.9993L4.26888 15.1263C4.44519 15.4137 4.69822 15.6481 5.00033 15.8021L5.13021 15.8577C5.27398 15.9092 5.46349 15.947 5.74545 15.97C6.12896 16.0014 6.6223 16.0013 7.33334 16.0013H11.7269L7.37533 11.6487ZM13.0853 7.91632C13.0851 7.36327 12.6364 6.91535 12.0833 6.91535C11.5302 6.91535 11.0816 7.36327 11.0814 7.91632C11.0814 8.46953 11.5301 8.91827 12.0833 8.91827C12.6365 8.91827 13.0853 8.46953 13.0853 7.91632ZM14.4154 7.91632C14.4154 9.20407 13.3711 10.2484 12.0833 10.2484C10.7956 10.2484 9.75131 9.20407 9.75131 7.91632C9.75148 6.62873 10.7957 5.58527 12.0833 5.58527C13.371 5.58527 14.4152 6.62873 14.4154 7.91632ZM17.3314 12.6663C17.3314 13.3553 17.332 13.9124 17.2953 14.3626C17.2625 14.7636 17.1975 15.1247 17.0531 15.4612L16.9867 15.6038C16.7212 16.1248 16.3173 16.5605 15.8216 16.8646L15.6038 16.9866C15.2271 17.1786 14.8206 17.2578 14.3626 17.2952C13.9124 17.332 13.3554 17.3314 12.6663 17.3314H7.33334C6.64425 17.3314 6.08729 17.332 5.63705 17.2952C5.23636 17.2625 4.87571 17.1973 4.53939 17.053L4.39681 16.9866C3.87569 16.7211 3.43919 16.3174 3.13509 15.8216L3.01302 15.6038C2.82105 15.2271 2.74185 14.8206 2.70443 14.3626C2.66766 13.9124 2.6683 13.3553 2.6683 12.6663V7.33331C2.6683 6.64422 2.66764 6.08727 2.70443 5.63702C2.74184 5.17923 2.82122 4.77341 3.01302 4.39679L3.13509 4.17804C3.43919 3.68233 3.87578 3.27848 4.39681 3.013L4.53939 2.9466C4.87568 2.80236 5.2364 2.73715 5.63705 2.70441C6.08729 2.66762 6.64424 2.66827 7.33334 2.66827H12.6663C13.3553 2.66827 13.9124 2.66764 14.3626 2.70441C14.8206 2.74183 15.2271 2.82103 15.6038 3.013L15.8216 3.13507C16.3174 3.43917 16.7211 3.87567 16.9867 4.39679L17.0531 4.53937C17.1973 4.87569 17.2625 5.23634 17.2953 5.63702C17.332 6.08727 17.3314 6.64422 17.3314 7.33331V12.6663Z"})),d$=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.165 12.668C14.532 12.6682 14.8299 12.966 14.8301 13.333C14.8301 13.7001 14.5321 13.9978 14.165 13.998H5.83203C5.46476 13.998 5.16699 13.7003 5.16699 13.333C5.16717 12.9659 5.46487 12.668 5.83203 12.668H14.165Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.79981 6.00195C9.16705 6.00198 9.46484 6.29974 9.46484 6.66699V10C9.46467 10.3671 9.16695 10.665 8.79981 10.665H5.83301C5.46596 10.6649 5.16814 10.367 5.16797 10V6.66699C5.16797 6.29981 5.46585 6.00209 5.83301 6.00195H8.79981ZM6.49805 9.33496H8.13477V7.33203H6.49805V9.33496Z"}),_.createElement("path",{d:"M14.166 9.33496C14.5332 9.33496 14.8309 9.63288 14.8311 10C14.8309 10.3671 14.5332 10.665 14.166 10.665H11.7998C11.4328 10.6649 11.1349 10.367 11.1348 10C11.1349 9.63296 11.4328 9.33509 11.7998 9.33496H14.166Z"}),_.createElement("path",{d:"M14.166 6.00195C14.5333 6.00195 14.8311 6.29972 14.8311 6.66699C14.8309 7.03412 14.5332 7.33203 14.166 7.33203H11.7998C11.4328 7.3319 11.1349 7.03403 11.1348 6.66699C11.1348 6.29981 11.4326 6.00209 11.7998 6.00195H14.166Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 2.66797C14.1891 2.66797 14.7461 2.66732 15.1963 2.7041C15.654 2.74151 16.0599 2.82094 16.4365 3.0127C17.032 3.31609 17.5169 3.80107 17.8203 4.39649C18.0121 4.77301 18.0915 5.17906 18.1289 5.63672C18.1657 6.08689 18.165 6.64406 18.165 7.33301V12.666C18.165 13.3548 18.1656 13.9122 18.1289 14.3623C18.0915 14.8202 18.0122 15.2268 17.8203 15.6035C17.5169 16.199 17.032 16.6829 16.4365 16.9863C16.0599 17.1782 15.6541 17.2575 15.1963 17.2949C14.746 17.3317 14.1891 17.3311 13.5 17.3311H6.5C5.81091 17.3311 5.25395 17.3317 4.80371 17.2949C4.34589 17.2575 3.94011 17.1782 3.56348 16.9863C2.96804 16.6829 2.48311 16.1989 2.17969 15.6035C1.98781 15.2268 1.90851 14.8202 1.87109 14.3623C1.83435 13.9122 1.83496 13.3548 1.83496 12.666V7.33301C1.83496 6.64407 1.83431 6.08689 1.87109 5.63672C1.90852 5.17906 1.98793 4.77301 2.17969 4.39649C2.48314 3.80107 2.96803 3.31609 3.56348 3.0127C3.94006 2.82094 4.34597 2.74151 4.80371 2.7041C5.25395 2.66732 5.81092 2.66797 6.5 2.66797H13.5ZM6.5 3.99805C5.78898 3.99805 5.29563 3.99894 4.91211 4.03027C4.53651 4.06097 4.32499 4.11777 4.16699 4.19824C3.82183 4.37412 3.54117 4.65487 3.36524 5C3.28475 5.15796 3.22797 5.36961 3.19727 5.74512C3.16594 6.12858 3.16504 6.62214 3.16504 7.33301V12.666C3.16504 13.3767 3.16598 13.8705 3.19727 14.2539C3.22794 14.6293 3.28485 14.8411 3.36524 14.999C3.54114 15.3443 3.82178 15.6258 4.16699 15.8018C4.32498 15.8822 4.53656 15.939 4.91211 15.9697C5.29563 16.0011 5.78896 16.001 6.5 16.001H13.5C14.211 16.001 14.7044 16.0011 15.0879 15.9697C15.4634 15.939 15.675 15.8822 15.833 15.8018C16.1782 15.6258 16.4589 15.3443 16.6348 14.999C16.7152 14.8411 16.7721 14.6293 16.8027 14.2539C16.834 13.8705 16.835 13.3767 16.835 12.666V7.33301C16.835 6.62214 16.8341 6.12858 16.8027 5.74512C16.772 5.36961 16.7153 5.15796 16.6348 5C16.4588 4.65487 16.1782 4.37412 15.833 4.19824C15.675 4.11777 15.4635 4.06097 15.0879 4.03027C14.7044 3.99894 14.211 3.99805 13.5 3.99805H6.5Z"})),u$=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2998 2.6709C13.318 2.66997 13.3361 2.67031 13.3545 2.6709C13.739 2.67372 14.0728 2.68047 14.3623 2.7041C14.8202 2.74151 15.2268 2.82085 15.6035 3.0127L15.8213 3.13477C16.317 3.4388 16.7208 3.87553 16.9863 4.39649L17.0527 4.53906C17.197 4.87528 17.2622 5.23618 17.2949 5.63672C17.3317 6.08689 17.3311 6.64407 17.3311 7.33301V12.666C17.3311 13.3549 17.3317 13.9121 17.2949 14.3623C17.2622 14.7632 17.1971 15.1245 17.0527 15.4609L16.9863 15.6035C16.6829 16.1988 16.1988 16.6829 15.6035 16.9863C15.2268 17.1783 14.8203 17.2575 14.3623 17.2949C13.9121 17.3317 13.3549 17.3311 12.666 17.3311H7.33301C6.64403 17.3311 6.08691 17.3317 5.63672 17.2949C5.23614 17.2622 4.87531 17.197 4.53906 17.0527L4.39649 16.9863C3.87551 16.7208 3.4388 16.317 3.13477 15.8213L3.0127 15.6035C2.82086 15.2269 2.74151 14.8202 2.7041 14.3623C2.66736 13.9122 2.66797 13.3548 2.66797 12.666V7.33301C2.66797 6.64407 2.66732 6.08689 2.7041 5.63672C2.74152 5.17906 2.82093 4.77301 3.0127 4.39649C3.31613 3.80105 3.80103 3.31611 4.39649 3.0127C4.77304 2.82092 5.17902 2.74152 5.63672 2.7041C6.08691 2.66732 6.64403 2.66797 7.33301 2.66797H12.666C12.891 2.66797 13.1021 2.66971 13.2998 2.6709ZM3.99805 8.16504V12.666C3.99805 13.3767 3.99899 13.8705 4.03027 14.2539C4.06094 14.6292 4.11789 14.8411 4.19824 14.999L4.26856 15.126C4.4448 15.4133 4.69804 15.6478 5 15.8018L5.12988 15.8574C5.27361 15.9089 5.46331 15.9467 5.74512 15.9697C6.12859 16.0011 6.6221 16.001 7.33301 16.001H12.666C13.3767 16.001 13.8705 16.001 14.2539 15.9697C14.6292 15.9391 14.8411 15.8821 14.999 15.8018C15.3443 15.6258 15.6258 15.3443 15.8018 14.999L15.8574 14.8691C15.9088 14.7254 15.9467 14.5355 15.9697 14.2539C16.001 13.8705 16.001 13.3767 16.001 12.666V8.16504H3.99805ZM12.6484 6.83496H15.999C15.9976 6.38034 15.9932 6.03187 15.9697 5.74512C15.9467 5.46336 15.9089 5.2736 15.8574 5.12988L15.8018 5C15.6478 4.69805 15.4133 4.44479 15.126 4.26856L14.999 4.19824C14.8411 4.11788 14.6292 4.06094 14.2539 4.03027C14.1122 4.01871 13.9555 4.01257 13.7783 4.00781L12.6484 6.83496ZM7.33301 3.99805C6.6221 3.99805 6.12859 3.99894 5.74512 4.03027C5.36955 4.06098 5.15798 4.11775 5 4.19824C4.65484 4.37414 4.37416 4.65485 4.19824 5C4.11776 5.15796 4.06098 5.36961 4.03027 5.74512C4.00685 6.03186 4.00272 6.38034 4.00098 6.83496H6.21582L7.35059 3.99805H7.33301ZM7.64844 6.83496H11.2158L12.3506 3.99805H8.7832L7.64844 6.83496Z"}));function Am(t){switch(t){case xt.Search:return P4;case xt.Images:return c$;case xt.Videos:return u$;case xt.News:return d$;case xt.Chat:return null}}function fi({IconComponent:t=l$,className:e,children:n}){return r.jsxs("div",{className:W("bg-token-bg-tertiary flex min-h-[160px] flex-col items-center justify-center gap-3 rounded-3xl",e),children:[r.jsx(t,{className:"icon-xl text-token-text-tertiary"}),r.jsx("div",{className:"text-token-text-tertiary text-center",children:n})]})}function f$({content:t,isAdultSearchEnabled:e,isLatestTurn:n,descriptionClassName:s,source:o="search",className:a}){const{navlinks:i,navlinks_ready:l,safe_search_off:c,safety:d}=t.widgets,u=V(),f=_.useMemo(()=>i$(u),[u]),m=ae(()=>Ff(u)),p=i&&i.length>0,h=p&&(!m||d!=="adult"||!!c==!!e||!c&&!n||c===void 0)?Jr([],Ou(i,f,l),!1):[];if(_.useEffect(()=>{h.length>0&&B.logStructuredEvent(ld,{step:vl.ATLAS_NAVLINKS_ACTION_STEP_SHOW,source:o==="navlinks"?Ia.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:Ia.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB})},[h.length,o]),h.length===0){const v=Am(xt.Search),y=p&&m;return r.jsx(fi,{IconComponent:v,className:y?"min-h-[120px]!":"",children:y?r.jsx(j,{id:"MFLPAn",defaultMessage:"No links to show"}):r.jsx(j,{id:"dOHukr",defaultMessage:"No links found"})})}const x=PFe(h);return r.jsx("div",{className:W("thread-sm:-mx-4 -mx-2 flex flex-col gap-3",a),children:x.map((v,y)=>r.jsx(IFe,{groupIndex:y,navlinks:v,source:o,descriptionClassName:s},y))})}function IFe({groupIndex:t,navlinks:e,source:n,descriptionClassName:s}){const o=e[0],a=e.slice(1);return r.jsxs("div",{className:"flex flex-col",children:[r.jsx(jFe,{navlinkIndex:t,mainNavlink:o,source:n,descriptionClassName:s}),a.length>0&&r.jsx("div",{className:"ms-4 flex flex-col",children:a.map((i,l)=>r.jsx(NFe,{navlinkIndex:t+1+l,navlink:i,source:n,descriptionClassName:s},i.url))})]})}function jFe({mainNavlink:t,navlinkIndex:e,source:n,descriptionClassName:s}){const o=()=>{B.logStructuredEvent(ld,{step:vl.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:n==="navlinks"?Ia.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:Ia.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB,navlinkIndex:e})};return r.jsx(t_,{url:t.url,domain:t.domain,title:t.title,description:t.snippet,descriptionClassName:s,onLogClick:o})}function NFe({navlink:t,navlinkIndex:e,source:n,descriptionClassName:s}){const o=_.useRef(!1),a=()=>{B.logStructuredEvent(ld,{step:vl.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:n==="navlinks"?Ia.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:Ia.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB,navlinkIndex:e})};return r.jsx(no,{href:t.url,target:"_self",className:"hover:bg-token-interactive-bg-secondary-hover ms-2.5 flex flex-col rounded-xl px-4 py-2.5",draggable:!1,onMouseDown:()=>o.current=!1,onMouseMove:()=>o.current=!0,onClick:i=>o.current?(o.current=!1,i.preventDefault()):a(),children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"mb-1 truncate text-base font-medium text-[var(--interactive-label-accent-default)]",children:t.title}),t.snippet&&r.jsx("div",{className:W("text-token-text-secondary mb-1 truncate text-sm font-normal",s),children:t.snippet})]})},t.url)}function PFe(t){return Object.values(t.reduce((e,n)=>{const s=n.domain;return e[s]||(e[s]=[]),e[s].push(n),e},{}))}const RFe=4,hot=t=>{"use forget";const e=G.c(19),{clientThreadId:n,query:s,className:o,state:a,isAssistantResponseSuppressed:i}=t,[,l]=Mm(),{showNavlinksWidget:c,showLongList:d,navlinksOptimistic:u,navlinksReady:f,imagesOptimistic:m,videosOptimistic:p,newsOptimistic:g,showReason:h,analytics:x}=a;if(!c)return null;const v=!i&&"mb-8";let y;e[0]!==o||e[1]!==v?(y=W(v,o),e[0]=o,e[1]=v,e[2]=y):y=e[2];let b;e[3]!==x||e[4]!==n||e[5]!==m||e[6]!==i||e[7]!==l||e[8]!==u||e[9]!==f||e[10]!==g||e[11]!==s||e[12]!==d||e[13]!==h||e[14]!==p?(b=d?r.jsxs(r.Fragment,{children:[r.jsx(f$,{content:{content_type:ut.SuperWidget,widgets:{navlinks:u.slice(0,RFe),images:m,videos:p,news:g,navlinks_ready:f}},className:"pt-1",descriptionClassName:"line-clamp-1",source:"navlinks"}),r.jsxs("div",{className:"thread-sm:-mx-4 -mx-2",children:[r.jsx("div",{className:"mt-3 mb-6 flex w-full items-center justify-between px-4",children:r.jsx("button",{type:"button",onClick:()=>l({tabType:xt.Search}),className:"text-token-text-primary text-sm hover:underline",children:r.jsx(j,{id:"navlinks.showAllSearchResults",defaultMessage:"Show all search results"})})}),!i&&r.jsx("hr",{className:"mx-4"})]})]}):r.jsx(kFe,{content:{content_type:ut.SuperWidget,widgets:{navlinks:u,images:m,videos:p,news:g,navlinks_ready:f}},clientThreadId:n,navlinksShowDecisionSource:h,analytics:x,query:s}),e[3]=x,e[4]=n,e[5]=m,e[6]=i,e[7]=l,e[8]=u,e[9]=f,e[10]=g,e[11]=s,e[12]=d,e[13]=h,e[14]=p,e[15]=b):b=e[15];let C;return e[16]!==y||e[17]!==b?(C=r.jsx("div",{id:"navlinks-content",className:y,children:b}),e[16]=y,e[17]=b,e[18]=C):C=e[18],C};function LFe(t){return t.split(new RegExp("[^\\p{L}\\p{N}]+","u")).filter(Boolean).length}const OFe=Wn(t=>{let n=is(t,"3205212221").get("numWords",3);const s=Ps(t,"999809785").get("numWordsShowNavlinks",-1);return s!==-1&&(n=s),n});function DFe(t){return OFe(t)}function _ot({conversation:t,threadContent:e,query:n,triggeredSearch:s,messageGroups:o,allMessages:a,isAdultSearchEnabled:i}){"use no forget";var X,te,ce,ue,me,xe,pe,Ee,Se,Te,Ne,De,de,oe,we,Ce,fe;const l=V(),c=DFe(l),d=LFe(n!=null?n:""),u=eee(n!=null?n:"",i),f=ae(()=>Ff(l)),m=u.safety===Xr.ADULT||((X=e==null?void 0:e.widgets)==null?void 0:X.safety)==="adult",p=!!u.safeSearchOff||!!((te=e==null?void 0:e.widgets)!=null&&te.safe_search_off),g=i===void 0||((ce=e==null?void 0:e.widgets)==null?void 0:ce.safe_search_off)===void 0||((ue=e==null?void 0:e.widgets)==null?void 0:ue.safe_search_off)===i,h=_.useMemo(()=>{var re;return g?(re=e==null?void 0:e.widgets)==null?void 0:re.navlinks:[]},[g,(me=e==null?void 0:e.widgets)==null?void 0:me.navlinks]),x=(xe=So(a))==null?void 0:xe.id,v=_.useEffectEvent(()=>{Mb.set(t,{messageId:x!=null?x:"",safeSearchOff:p!=null?p:!1})});_.useEffect(()=>{!m||!x||v()},[m,x]);const y=d>0&&d<=c&&!u.isNoForceSearch&&u.navlinks.length>0,b=u.isNavlinkIntent===!0||u.safety===Xr.ADULT||!!((pe=e==null?void 0:e.widgets)!=null&&pe.is_navlinks_emphasize)||((Ee=e==null?void 0:e.widgets)==null?void 0:Ee.safety)==="adult",C=_.useMemo(()=>i$(l),[l]),[S,k]=_.useState(Ou(Jr([],h&&h.length>0?h:u.navlinks,!0),C)),[E,T]=_.useState((Se=e==null?void 0:e.widgets)!=null&&Se.images&&e.widgets.images.length>0?e.widgets.images:u.images),[M,A]=_.useState((Te=e==null?void 0:e.widgets)!=null&&Te.videos&&e.widgets.videos.length>0?e.widgets.videos:u.videos),[I,N]=_.useState((Ne=e==null?void 0:e.widgets)!=null&&Ne.news&&e.widgets.news.length>0?e.widgets.news:u.news),[L,D]=_.useState({show:!u.isForceHide&&(y||u.isSearchLikely===!0||b||s),showReason:y?ga.ShortQuery:u.isSearchLikely===!0?ga.Classifier:s?ga.Conversation:void 0}),F=_.useRef({navlinks:h&&h.length>0?"thread":u.navlinks.length>0?"prefetched":null,images:(De=e==null?void 0:e.widgets)!=null&&De.images&&e.widgets.images.length>0?"thread":u.images.length>0?"prefetched":null,videos:(de=e==null?void 0:e.widgets)!=null&&de.videos&&e.widgets.videos.length>0?"thread":u.videos.length>0?"prefetched":null,news:(oe=e==null?void 0:e.widgets)!=null&&oe.news&&e.widgets.news.length>0?"thread":u.news.length>0?"prefetched":null}),$=F.current.navlinks==="prefetched"?((Ce=(we=u.fetchingStatus)==null?void 0:we.navlinks)==null?void 0:Ce.status)===lr.DONE:((fe=e==null?void 0:e.widgets)==null?void 0:fe.navlinks_ready)===!0,H=S.length>0?S:Ou(u.navlinks,C),z=E.length>0?E:u.images,K=M.length>0?M:u.videos,J=I.length>0?I:u.news,Z=!u.isForceHide&&(L.show||u.isSearchLikely===!0||b||s),q=(re,ve)=>{const Me=Ou(Jr(S,re,!0),C,ve);k(Me)};_.useEffect(()=>{var Me,$e,Le,Ae,He;if(!u)return;function re({prefetchedData:Qe,threadData:ht,sourceType:at,setData:vt,isFinalPrefetched:$t,isFinalThread:Ct}){const Vt=F.current[at];function qt(en){return Array.isArray(en)&&en.length>0}qt(ht)&&(!Vt||Vt==="thread")?(F.current[at]="thread",vt(ht,Ct)):qt(Qe)&&(!Vt||Vt==="prefetched")&&(F.current[at]="prefetched",vt(Qe,$t))}re({prefetchedData:u.navlinks,threadData:h,sourceType:"navlinks",setData:q,isFinalPrefetched:(($e=(Me=u.fetchingStatus)==null?void 0:Me.navlinks)==null?void 0:$e.status)===lr.DONE,isFinalThread:((Le=e==null?void 0:e.widgets)==null?void 0:Le.navlinks_ready)===!0}),re({prefetchedData:u.images,threadData:(Ae=e==null?void 0:e.widgets)==null?void 0:Ae.images,sourceType:"images",setData:T}),re({prefetchedData:u.videos,threadData:(He=e==null?void 0:e.widgets)==null?void 0:He.videos,sourceType:"videos",setData:A}),re({prefetchedData:u.news,threadData:e==null?void 0:e.widgets.news,sourceType:"news",setData:N}),(u.isSearchLikely||s||y)&&!L.show&&!u.isForceHide&&D({show:!0,showReason:y?ga.ShortQuery:u.isSearchLikely?ga.Classifier:ga.Conversation})},[u,e,s,y]),_.useEffect(()=>{var $e;if(!f)return;const re=F.current.navlinks,ve=re==="prefetched"&&u.safeSearchOff!==i,Me=re==="thread"&&(($e=e==null?void 0:e.widgets)==null?void 0:$e.safe_search_off)!==i;if(S.length===0&&!u||ve||Me){const Le=h&&h.length>0,Ae=Le?h:u.safeSearchOff===i?u.navlinks:[];if(Ae.length===0)return;F.current.navlinks=Le?"thread":"prefetched",k(Ou(Jr([],Ae,!0),C))}},[f,u,e,i,h,C,S.length]);const se=Z&&H.length>0,ie=nPe(t.id,void 0),ee=ie!==AU?ie:null,le=_.useMemo(()=>FFe(s,o,a),[s,o,a]);return{showNavlinksWidget:se,showLongList:b,showReason:L.showReason,isClassifiedAdult:m,isSafeSearchOff:p,navlinksOptimistic:H,navlinksReady:$,imagesOptimistic:z,videosOptimistic:K,newsOptimistic:J,analytics:u.analytics,title:ee,header:le}}function FFe(t,e,n){const s=n.findLast(d=>p6(d).length>0),o=p6(s);let a=!1,i,l=-1;for(let d=0;d<e.length;d++)if(e[d].type===rr.SearchGPTQuery){l=d,a=!0;break}if(a)for(let d=e.length-1;d>l;d--){const u=e[d];if(u.type===rr.Text||u.type===rr.CoTSearchTool){i=u.messages[0];break}}return{showSearchGPTQuery:t&&a&&(!i||!z3(i)),nextMessage:i,searchResultGroups:o}}const BFe=R(()=>P(()=>import("./km44ch1r0uf907fx.js"),__vite__mapDeps([485,1])),{loading:t=>O(t)}),UFe=R(()=>P(()=>import("./fx3vo65j1l2o1ay3.js"),__vite__mapDeps([486,1])),{loading:t=>O(t)}),$Fe=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),g9=[1,2,3,4,10,20,30],VFe=1,HFe=["g-67e595af0a408191b84ee532fca12cd1","g-67ec3b78892481918c89067962526695","g-67ec3b4988f8819184c5454e18f5e84b","g-67ec3ad40750819181ccffa6a6f050d5","g-67edaaa3d3a081918205d0c470f00a32","g-67edab030ac881918ce8fa5c75a8e1b3","g-67edab2fc0f48191881a20ac98fedf6f","g-67edab4a24fc8191b975acaa8da2dcef"];function m$({clientThreadId:t,isInline:e=!1}){var ee,le;const n=V(),s=yt(n,t),o=qo(wa.isBusinessWorkspace),a=Uq(n),i=_.useRef(!1),l=Qn(t),[c,d,u,f]=Ve(t,X=>[X==null?void 0:X.mode,he.getRequestId(X),he.getConversationLastTurn(X),he.getConversationTurns(X).filter(te=>te.role===Ke.Assistant).length]),m=ae(()=>{var X;return((X=Ci(s))==null?void 0:X.value)===Xt.STREAMING}),p=!tt(n),g=_.useMemo(()=>{if(!l)return-1;const X=$q(l);return X()>VFe?-1:g9[Math.floor(X()*g9.length)]},[l]),h=Na(d),x=((ee=Wh(t))==null?void 0:ee.value)===Xt.STREAMING,v=m||h||x,y=function(){return Math.random()<.9?"default":"personality_v1"},[b,C]=_.useState(null),[S,k]=_.useState(!1),[E,T]=_.useState(!1),[M,A]=_.useState(!1),[I,N]=_.useState(y),L=(X,te,ce)=>{var me;const ue=(me=u==null?void 0:u.messages[0])==null?void 0:me.id;C(X),N(te),K(ue,X,te,ce)},D=(u==null?void 0:u.role)===Ke.Assistant,F=u==null?void 0:u.messages.find(X=>{var te;return(te=X.metadata)==null?void 0:te.async_task_id}),$=(le=F==null?void 0:F.metadata)==null?void 0:le.async_task_id,H=kr(X=>af.getTask($!=null?$:"",X)),z=!!(H&&P3(H)),K=_.useMemo(()=>mi((X,te,ce,ue)=>{l&&X&&(o&&a?tne({rating:ab(te),shown_at_assistant_turn:g,prompt:ce},l,X):o||ge.safePost("/conversation/{conversation_id}/rating",{parameters:{path:{conversation_id:l}},requestBody:{message_id:X,rating:te,shown_at_assistant_turn:g,prompt:ce,popup_ui_message:ue},authOption:nn.SendIfAvailable})),B.logEvent("Conversation Rating Submitted",{rating:te,showAtAssistantTurn:g,conversationId:l,prompt:ce,popupUiMessage:ue}),k(!0),setTimeout(()=>{T(!0)},1500)},2e3),[o,a,l,g]),J=ts(n),Z=ne(),q=_.useMemo(()=>I==="personality_v1"?Z.formatMessage({id:"rating.instructions.personality_v1",defaultMessage:"Do you like this personality?"}):e?"Is this helpful so far?":"Is this conversation helpful so far?",[Z,I,e]),se=f!==g||v||z||!D||!!o&&!a||(c==null?void 0:c.kind)!==wt.PrimaryAssistant&&(c==null?void 0:c.kind)!==wt.FlyingCircusCustomization&&(c==null?void 0:c.gizmo_id)!==void 0&&!HFe.includes(c==null?void 0:c.gizmo_id)||M||p||J;_.useEffect(()=>{!se&&!i.current&&(B.logEvent("Conversation Rating Shown",{showAtAssistantTurn:g,conversationId:l}),i.current=!0)},[se]);const ie=Cd();return M||!ie.forceShowConvoRating&&se?null:r.jsxs(r.Fragment,{children:[r.jsx(mn,{children:S&&!E&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:r.jsx(h9,{$padded:!0,$fullRounded:e,children:r.jsx("span",{className:"text-token-text-tertiary text-sm",children:r.jsx(j,{id:"rating.thanks",defaultMessage:"Thanks for your feedback!"})})})},"submitted")}),!S&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},children:r.jsxs(h9,{$padded:!1,$fullRounded:e,children:[r.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-4 px-4 py-2.5 text-sm whitespace-nowrap",children:[r.jsx("span",{children:q}),r.jsxs("div",{className:"flex items-center gap-5",children:[r.jsx($2,{$selected:b==="thumbsUp",onClick:()=>L("thumbsUp",I,q),children:r.jsx(BFe,{className:"icon"})}),r.jsx($2,{$selected:b==="thumbsDown",onClick:()=>L("thumbsDown",I,q),children:r.jsx(UFe,{className:"icon"})})]})]}),!e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-token-main-surface-tertiary w-px flex-1 self-stretch"}),r.jsx($2,{className:"p-3",$selected:!1,onClick:()=>A(!0),children:r.jsx($Fe,{className:"icon text-token-text-secondary hover:text-token-text-primary"})})]})]})},"rating")]})}var HE;const $2=mt.button(HE||(HE=ct(["\n  ","\n  hover:text-token-text-primary\n"])),t=>t.$selected?"text-token-text-primary":"text-token-text-secondary");var GE;const h9=mt.div(GE||(GE=ct(["inline-flex border border-gray-100 dark:border-gray-700\n","\n","\n"])),t=>t.$padded&&"py-2.5 px-4",t=>t.$fullRounded?"rounded-full":"rounded-xl"),GFe=R(()=>P(()=>import("./ggkkoiprbxqnv0r4.js"),__vite__mapDeps([487,1,10,11])));function p$({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n}){var u,f;const s=V(),o=et(s),a=(u=o==null?void 0:o.isWorkspacePlan())!=null?u:!1,i=Ve(t,m=>{const p=he.getConversationTurns(m);let g=0;for(let h=p.length-1;h>=0;h--){const x=p[h];if(x.messages.some(v=>{var y;return(y=v.metadata)==null?void 0:y.is_indepth_feedback}))return!0;if(x.messages.some(v=>v.author.role===Ke.Assistant)&&g++,g>=3)break}return!1}),l=Qn(t),c=td(m=>m.voiceFeedbackThread),d=l===c;return i?"none":d&&l&&!a?"voice":(f=n.clientMetadata)!=null&&f.rating&&e?"inline":"conversation"}function xot({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n,allGroupedMessages:s,currentModelId:o}){const a=V(),i=Ol(),l=ye(a,"294957382"),c=p$({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n}),d=Qn(t),{voiceName:u}=F1();if(c==="none")return null;let f=null;if(c==="voice"&&d&&!i)Bt.feedbackShown.success({voice:u}),f=r.jsx("div",{className:"text-center",children:r.jsx(eTe,{serverThreadId:d})});else if(c==="inline")f=r.jsx(GFe,{clientThreadId:t,conversationMessage:n,allGroupedMessages:s,currentModelId:o});else if(c==="conversation"){if(l)return null;f=r.jsx("div",{className:"text-center",children:r.jsx(m$,{clientThreadId:t})})}return r.jsx("div",{className:"mt-3 w-full empty:hidden",children:f})}function yot({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n}){const s=V(),o=ye(s,"294957382");return p$({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n})!=="conversation"||!o?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grow"}),r.jsx(m$,{clientThreadId:t,isInline:!0})]})}const WFe=R(()=>P(()=>import("./ho9a4vsac4g3xh3d.js"),__vite__mapDeps([488,1,10,11,489,434,71])).then(t=>t.CAFeedbackModal));function vot({clientThreadId:t,currentModelConfig:e}){const n=V(),s=Vq(t),o=tLe(e,s),a=qo(wa.isBusinessWorkspace),i=ae(()=>bn(yt(n,t))),l=ph(i,n);return{onChangeRating:_.useCallback(({nodeId:d,messageId:u,rating:f})=>{var h,x;const m=At(t);f&&B.logEvent("Rated Result",{id:u,threadId:m,rating:f,model:e==null?void 0:e.id});const p=he.getTree(ft(t)),g=p.getNodeByIdOrMessageId(d);if(m!==void 0&&(a&&ye(n,"4147309512")?f&&ene({rating:ab(f)},m,u):a||(f?ge.safePost("/conversation/message_feedback",{requestBody:{message_id:u,conversation_id:m,rating:f},authOption:nn.SendIfAvailable}):ge.safeDelete("/conversation/message_feedback",{requestBody:{message_id:u,conversation_id:m},authOption:nn.SendIfAvailable}))),Ze(t,v=>{dn.updateTree(v,y=>{y.updateNodeMetadata(d,{rating:f!=null?f:void 0})})}),f&&(o||l)){lt(n,WFe,{citations:(x=(h=g.message.metadata)==null?void 0:h.citations)!=null?x:[],rating:f,conversationId:m!=null?m:"",messageId:u,conversationTree:p,nodeId:d,isGlaux:l});return}},[n,t,e==null?void 0:e.id,a,o,l])}}function bot(t){const{isCompletionRequestInProgress:e,isUserTurn:n,message:s}=t,o=ne(),a=_.useRef(e);_.useEffect(()=>{if(!e)return;let i;Um.setLiveRegionAssertive(o.formatMessage({id:"0LFLpz",defaultMessage:"ChatGPT is generating a response..."}));const l=o.formatMessage({id:"uqqkLX",defaultMessage:"ChatGPT is still generating a response..."}),c=5e3;function d(){Um.setLiveRegionAssertive(""),i=window.setTimeout(()=>{Um.setLiveRegionAssertive(l),i=window.setTimeout(()=>d(),c)},1e3)}return i=window.setTimeout(d,c),()=>{window.clearTimeout(i)}},[e,o]),_.useEffect(()=>{var d,u,f;if(e||n||!s||!a.current){a.current=e;return}const{content:i}=s,l=(i.content_type===ut.Text,i),c=o.formatMessage({id:"lZ4dVJ",defaultMessage:"ChatGPT says: {message}"},{message:(f=(u=(d=l==null?void 0:l.parts)==null?void 0:d.join)==null?void 0:u.call(d,"\n"))!=null?f:""});Um.setLiveRegionAssertive(c),a.current=!1},[n,e,o,s])}var V2,_9;function zFe(){if(_9)return V2;_9=1;function t(e,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(!n(e[s],s,e))return!1;return!0}return V2=t,V2}var H2,x9;function qFe(){if(x9)return H2;x9=1;var t=Hq();function e(n,s){var o=!0;return t(n,function(a,i,l){return o=!!s(a,i,l),o}),o}return H2=e,H2}var G2,y9;function YFe(){if(y9)return G2;y9=1;var t=zFe(),e=qFe(),n=cT(),s=$3(),o=V3();function a(i,l,c){var d=s(i)?t:e;return c&&o(i,l,c)&&(l=void 0),d(i,n(l,3))}return G2=a,G2}var ZFe=YFe();const Cot=Gn(ZFe);var W2,v9;function KFe(){if(v9)return W2;v9=1;function t(e){return e&&e.length?e[0]:void 0}return W2=t,W2}var z2,b9;function QFe(){return b9||(b9=1,z2=KFe()),z2}var JFe=QFe();const Sot=Gn(JFe);function XFe(t){return t.nodeType===Node.ELEMENT_NODE}function g$(t){var e;if(XFe(t)){if(["THEAD","TR","TD","TH"].includes(t.nodeName.toUpperCase())){let n=t.parentNode;for(;n&&n.nodeName!=="TABLE";)n=n.parentNode;if(!n){Js.debug("Found table element without a parent <table>");const s=document.createElement("table");(e=t.parentNode)==null||e.insertBefore(s,t),s.appendChild(t)}}t.attributes&&[...t.attributes].forEach(n=>{["style"].includes(n.name)&&t.removeAttribute(n.name)})}t.childNodes.forEach(g$)}function eBe(t){t.childNodes.forEach(g$)}function tBe(t){var o;const e=t.currentTarget.ownerDocument,n=e.defaultView;t.preventDefault();const s=n==null?void 0:n.getSelection();if(s&&s.rangeCount>0){const i=s.getRangeAt(0).cloneContents();eBe(i),i.querySelectorAll("script, [class*='select-none']").forEach(u=>{u.remove()});const l=e.createElement("div");l.appendChild(i),e.body.appendChild(l);const c=l.innerHTML;let d=l.innerText;d!=null&&d.trim()||(d=(o=l.textContent)!=null?o:""),d=d.replace(/\u00a0/g," "),e.body.removeChild(l),t.clipboardData.setData("text/html",c),t.clipboardData.setData("text/plain",d)}}function C9(t){return t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement}function nBe(t){const e=t.nativeEvent;if(typeof e.composedPath=="function"){for(const n of e.composedPath())if(C9(n))return!0}return C9(t.target)}const wot=t=>{"use forget";const e=G.c(4),n=V(),s=Es();let o;return e[0]!==t||e[1]!==n||e[2]!==s?(o=a=>{var u,f;nBe(a)||tBe(a);const{currentTarget:i}=a,l=(u=i.closest("[data-message-id]"))==null?void 0:u.getAttribute("data-message-id"),c=(f=document.getSelection())==null?void 0:f.toString(),d=At(t);!l||!c||!d||s||u1(n,{source:"keyboard",type:"copy",messageId:l,serverThreadId:d,selectedText:c,location:"selection",contentType:"text"})},e[0]=t,e[1]=n,e[2]=s,e[3]=o):o=e[3],o},h$=_.createContext(!1);function kot(){return _.useContext(h$)}function Eot({children:t}){return r.jsx(h$.Provider,{value:!0,children:t})}const sBe=R(()=>P(()=>import("./nlj7ey81i8rm36n9.js"),__vite__mapDeps([478,1])),{loading:t=>O(t)});function oBe(t){"use forget";var S,k,E,T,M,A;const e=G.c(31),{conversation:n,isRootVisible:s,isPanelVisible:o,onOpenPanel:a,onClosePanel:i,backMessage:l}=t;let c;e[0]!==n?(c=()=>bn(n),e[0]=n,e[1]=c):c=e[1];const d=ae(c);let u;e[2]!==n?(u=()=>ta(n),e[2]=n,e[3]=u):u=e[3];const f=ae(u),m=Hb(),p=Wb(n,m,!1);let g;e:{if(!d||!f){let J;e[4]===Symbol.for("react.memo_cache_sentinel")?(J={primaryModelLabel:null,secondaryModelLabel:null},e[4]=J):J=e[4],g=J;break e}let I;e[5]!==d.id||e[6]!==f?(I=yf(d.id,f),e[5]=d.id,e[6]=f,e[7]=I):I=e[7];const{selectedCategory:N,fullModelLabel:L}=I;let D;if(e[8]!==d.id||e[9]!==f.categories||e[10]!==N){let J;e[12]!==d.id||e[13]!==N?(J=Z=>{const{categoryId:q,defaultModel:se,supportedModels:ie}=Z;return q===N||se===d.id||(ie==null?void 0:ie.includes(d.id))},e[12]=d.id,e[13]=N,e[14]=J):J=e[14],D=f.categories.find(J),e[8]=d.id,e[9]=f.categories,e[10]=N,e[11]=D}else D=e[11];const F=D,$=(E=(k=(S=f.title)!=null?S:F==null?void 0:F.label)!=null?k:d.title)!=null?E:d.id,H=(A=(M=(T=F==null?void 0:F.label)!=null?T:L)!=null?M:d.title)!=null?A:d.id,z=H&&H!==$?H:null;let K;e[15]!==$||e[16]!==z?(K={primaryModelLabel:$,secondaryModelLabel:z},e[15]=$,e[16]=z,e[17]=K):K=e[17],g=K}const{primaryModelLabel:h,secondaryModelLabel:x}=g,v=s&&h;let y;e[18]!==a||e[19]!==h||e[20]!==x||e[21]!==v?(y=v?r.jsx(r.Fragment,{children:r.jsx(Y.Item,{fillContainer:!0,onSelect:I=>{I.preventDefault(),a()},subMenu:!0,children:r.jsxs("div",{className:"flex w-full items-baseline gap-2 text-sm",children:[r.jsx("span",{className:"text-token-text-primary",children:h}),x?r.jsx("span",{className:"text-token-text-tertiary",children:x}):null]})})}):null,e[18]=a,e[19]=h,e[20]=x,e[21]=v,e[22]=y):y=e[22];let b;e[23]!==l||e[24]!==p||e[25]!==o||e[26]!==i?(b=o?r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{icon:r.jsx(sBe,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:I=>{I.preventDefault(),i()},fillContainer:!0,children:r.jsx(j,w({},l))}),r.jsx(Y.Separator,{}),r.jsx(Y.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(Gb,{sections:p})})]}):null,e[23]=l,e[24]=p,e[25]=o,e[26]=i,e[27]=b):b=e[27];let C;return e[28]!==y||e[29]!==b?(C=r.jsxs(r.Fragment,{children:[y,b]}),e[28]=y,e[29]=b,e[30]=C):C=e[30],C}function S9(t){"use forget";const e=G.c(31),{activeId:n,hideOverflowMenu:s,onSelect:o}=t,{conversations:a,hasNextPage:i,fetchNextPage:l,isLoading:c,isFetchingNextPage:d,refetch:u}=Hh();let f,m;e[0]!==u?(f=()=>{u()},m=[u],e[0]=u,e[1]=f,e[2]=m):(f=e[1],m=e[2]),_.useEffect(f,m);let p;e[3]!==l||e[4]!==i?(p=k=>{if(k==null)return;const E=new IntersectionObserver(T=>{T[0].isIntersecting&&i&&l()});return E.observe(k),()=>{E.disconnect()}},e[3]=l,e[4]=i,e[5]=p):p=e[5];const g=p;let h;if(e[6]!==n||e[7]!==a){let k;e[9]!==n?(k=E=>E.id!==n,e[9]=n,e[10]=k):k=e[10],h=a.filter(k),e[6]=n,e[7]=a,e[8]=h}else h=e[8];const x=h;let v;e[11]!==g||e[12]!==c?(v=c?aBe:g,e[11]=g,e[12]=c,e[13]=v):v=e[13];let y;e[14]!==n||e[15]!==i||e[16]!==s||e[17]!==x||e[18]!==o||e[19]!==v?(y=r.jsx(nU,{activeId:n,hasNextPage:i,items:x,infiniteScrollTriggerElementRef:v,hideOverflowMenu:s,onSelect:o}),e[14]=n,e[15]=i,e[16]=s,e[17]=x,e[18]=o,e[19]=v,e[20]=y):y=e[20];let b;e[21]!==c||e[22]!==x.length?(b=x.length===0&&!c&&r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:r.jsx(j,w({},rBe.noConversations))}),e[21]=c,e[22]=x.length,e[23]=b):b=e[23];let C;e[24]!==d||e[25]!==c?(C=(c||d)&&r.jsxs("div",{children:[r.jsx(vo,{}),r.jsx(vo,{}),r.jsx(vo,{})]}),e[24]=d,e[25]=c,e[26]=C):C=e[26];let S;return e[27]!==y||e[28]!==b||e[29]!==C?(S=r.jsxs(r.Fragment,{children:[y,b,C]}),e[27]=y,e[28]=b,e[29]=C,e[30]=S):S=e[30],S}function aBe(){}const rBe=be({noConversations:{id:"SidebarHistory.noConversations",defaultMessage:"No previous chats"}}),iBe=R(()=>P(()=>Promise.resolve().then(()=>rm),void 0),{loading:t=>O(t)}),Yc=be({projects:{id:"SidebarHeader.projects",defaultMessage:"Projects"},noProjects:{id:"SidebarHeader.noProjects",defaultMessage:"No projects yet"},noProjectChats:{id:"SidebarHeader.noProjectChats",defaultMessage:"No chats in this project"},startProjectChat:{id:"SidebarHeader.startProjectChat",defaultMessage:"Start a new chat in this project"}}),lBe=20;function cBe(){"use forget";const t=G.c(9),{snorlaxes:e,isLoading:n,refetch:s}=A3();let o;t[0]!==e?(o=e!=null?e:[],t[0]=e,t[1]=o):o=t[1];let a;t[2]!==o?(a=o.slice(0,n8),t[2]=o,t[3]=a):a=t[3];const i=a,l=i.length>0;let c;return t[4]!==n||t[5]!==i||t[6]!==s||t[7]!==l?(c={projects:i,areProjectsLoading:n,hasProjects:l,refetchProjects:s},t[4]=n,t[5]=i,t[6]=s,t[7]=l,t[8]=c):c=t[8],c}function _$(t){"use forget";const e=G.c(3),n=V();let s;return e[0]!==n||e[1]!==t?(s=()=>{var d,u,f,m;if(!t)return"";const o=t.gizmo,a=o.gizmo.id,i=(u=(d=o.gizmo.display.name)==null?void 0:d.trim())!=null?u:a,l=O3(n,a);if(l.isSkeleton$()){const p=(f=Gq(n,o))==null?void 0:f.trim();return p&&p.length>0?p:i}const c=(m=l.title$())==null?void 0:m.trim();return c&&c.length>0?c:i},e[0]=n,e[1]=t,e[2]=s):s=e[2],ae(s)}function Yy(t){"use forget";const e=G.c(2),{project:n}=t,s=_$(n);let o;return e[0]!==s?(o=r.jsx("span",{className:"text-token-text-primary truncate text-sm",children:s}),e[0]=s,e[1]=o):o=e[1],o}function dBe(t){"use forget";const e=G.c(19),{projects:n,hasProjects:s,serverThreadId:o,onClose:a,onStartProjectChat:i,startProjectChatLabel:l,onOpenProjects:c}=t;if(!s)return null;let d;e[0]!==c?(d=g=>{g&&(c==null||c())},e[0]=c,e[1]=d):d=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(Y.SubMenuTrigger,{fillContainer:!0,children:r.jsx(j,w({},Yc.projects))}),e[2]=u):u=e[2];let f;if(e[3]!==a||e[4]!==i||e[5]!==n||e[6]!==o||e[7]!==l){let g;e[9]!==a||e[10]!==i||e[11]!==o||e[12]!==l?(g=h=>{const x=h.gizmo.gizmo.id;return r.jsxs(Y.Sub,{children:[r.jsx(Y.SubMenuTrigger,{fillContainer:!0,children:r.jsx("span",{className:"flex w-full items-center justify-between gap-2",children:r.jsx(Yy,{project:h})})}),r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:r.jsxs(Y.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[r.jsx(Y.Item,{fillContainer:!0,className:"mb-1 ps-1",onSelect:uBe,trailing:r.jsx(Gf,{"aria-label":l,onPointerDown:v=>{i(v,x)},onClick:v=>{i(v,x)},icon:iBe}),children:r.jsx(Yy,{project:h})}),r.jsx(Y.Separator,{}),r.jsx(x$,{project:h,serverThreadId:o,onSelectConversation:a})]})})})]},x)},e[9]=a,e[10]=i,e[11]=o,e[12]=l,e[13]=g):g=e[13],f=n.map(g),e[3]=a,e[4]=i,e[5]=n,e[6]=o,e[7]=l,e[8]=f}else f=e[8];let m;e[14]!==f?(m=r.jsx(Y.Portal,{children:r.jsx(Y.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:r.jsx(Y.Group,{separator:!1,children:f})})}),e[14]=f,e[15]=m):m=e[15];let p;return e[16]!==d||e[17]!==m?(p=r.jsxs(Y.Sub,{onOpenChange:d,children:[u,m]}),e[16]=d,e[17]=m,e[18]=p):p=e[18],p}function uBe(t){t.preventDefault()}function fBe(t){"use forget";const e=G.c(9),{projects:n,areProjectsLoading:s,onSelectProject:o}=t;if(s&&n.length===0){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsxs(r.Fragment,{children:[r.jsx(vo,{}),r.jsx(vo,{})]}),e[0]=l):l=e[0],l}if(n.length===0){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:r.jsx(j,w({},Yc.noProjects))}),e[1]=l):l=e[1],l}let a;if(e[2]!==o||e[3]!==n){let l;e[5]!==o?(l=c=>{const d=c.gizmo.gizmo.id;return r.jsx(Y.Item,{fillContainer:!0,onSelect:u=>{u.preventDefault(),o(d)},subMenu:!0,children:r.jsx(Yy,{project:c})},d)},e[5]=o,e[6]=l):l=e[6],a=n.map(l),e[2]=o,e[3]=n,e[4]=a}else a=e[4];let i;return e[7]!==a?(i=r.jsx(r.Fragment,{children:a}),e[7]=a,e[8]=i):i=e[8],i}function mBe(t){"use forget";const e=G.c(4),{project:n,serverThreadId:s,onSelectConversation:o}=t;if(!n)return null;let a;return e[0]!==o||e[1]!==n||e[2]!==s?(a=r.jsx(x$,{project:n,serverThreadId:s,onSelectConversation:o}),e[0]=o,e[1]=n,e[2]=s,e[3]=a):a=e[3],a}function x$(t){"use forget";const e=G.c(18),{project:n,serverThreadId:s,onSelectConversation:o}=t,a=n.gizmo.gizmo.id,{items:i,isLoading:l,refetch:c}=Wq(a);let d;e[0]!==c?(d=()=>{c()},e[0]=c,e[1]=d):d=e[1];let u;e[2]!==a||e[3]!==c?(u=[a,c],e[2]=a,e[3]=c,e[4]=u):u=e[4],_.useEffect(d,u);let f,m;if(e[5]!==l||e[6]!==i||e[7]!==o||e[8]!==s){m=Symbol.for("react.early_return_sentinel");e:{const g=i.slice(0,lBe);if(l&&g.length===0){let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsxs(r.Fragment,{children:[r.jsx(vo,{}),r.jsx(vo,{})]}),e[11]=x):x=e[11],m=x;break e}if(!l&&g.length===0){let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:r.jsx(j,w({},Yc.noProjectChats))}),e[12]=x):x=e[12],m=x;break e}let h;e[13]!==o||e[14]!==s?(h=x=>r.jsx(G1,{className:"ps-2",conversation:x,hideOverflowMenu:!0,isActive:x.id===s,onSelect:o},x.id),e[13]=o,e[14]=s,e[15]=h):h=e[15],f=g.map(h)}e[5]=l,e[6]=i,e[7]=o,e[8]=s,e[9]=f,e[10]=m}else f=e[9],m=e[10];if(m!==Symbol.for("react.early_return_sentinel"))return m;let p;return e[16]!==f?(p=r.jsx(r.Fragment,{children:f}),e[16]=f,e[17]=p):p=e[17],p}const pBe=R(()=>P(()=>Promise.resolve().then(()=>rm),void 0),{loading:t=>O(t)}),q2=R(()=>P(()=>import("./nlj7ey81i8rm36n9.js"),__vite__mapDeps([478,1])),{loading:t=>O(t)});function gBe(t){"use forget";var xe;const e=G.c(63),{serverThreadId:n,isAuth:s,isNarrowSidebar:o,isRootMenuVisible:a,onActiveStateChange:i,onClose:l,backMessage:c,switchChatMessage:d}=t,u=ne(),{projects:f,areProjectsLoading:m,hasProjects:p,refetchProjects:g}=cBe(),[h,x]=_.useState("root"),[v,y]=_.useState(null);let b;e:{if(!v){b=null;break e}let pe;e[0]!==v||e[1]!==f?(pe=(xe=f.find(Ee=>{const{gizmo:Se}=Ee;return Se.gizmo.id===v}))!=null?xe:null,e[0]=v,e[1]=f,e[2]=pe):pe=e[2],b=pe}const C=b;let S=h;!o&&S!=="root"&&(S="root"),!p&&(S==="projectsList"||S==="projectChats")&&(S="history"),S==="projectChats"&&!C&&(S="projectsList");const k=S,E=k==="projectChats"?C:null,T=_$(E);let M;e[3]!==u?(M=u.formatMessage(Yc.startProjectChat),e[3]=u,e[4]=M):M=e[4];const A=M;let I;e[5]!==o||e[6]!==l?(I=(pe,Ee)=>{pe.preventDefault(),pe.stopPropagation(),it.newConversationGizmoId$.set(Ee),it.wantsNewConversation$.set(!0),it.selectedConversationId$.set(void 0),o&&(y(null),x("root")),l()},e[5]=o,e[6]=l,e[7]=I):I=e[7];const N=I;let L,D;e[8]!==a||e[9]!==g?(L=()=>{a&&g()},D=[a,g],e[8]=a,e[9]=g,e[10]=L,e[11]=D):(L=e[10],D=e[11]),_.useEffect(L,D);let F,$;e[12]!==g||e[13]!==k?(F=()=>{k==="projectsList"&&g()},$=[k,g],e[12]=g,e[13]=k,e[14]=F,e[15]=$):(F=e[14],$=e[15]),_.useEffect(F,$);let H,z;if(e[16]!==i||e[17]!==k?(H=()=>{i(k!=="root")},z=[i,k],e[16]=i,e[17]=k,e[18]=H,e[19]=z):(H=e[18],z=e[19]),_.useEffect(H,z),!s)return null;let K;e[20]!==N||e[21]!==p||e[22]!==o||e[23]!==a||e[24]!==l||e[25]!==f||e[26]!==g||e[27]!==k||e[28]!==n||e[29]!==A||e[30]!==d?(K=()=>!a||k!=="root"?null:r.jsx(r.Fragment,{children:r.jsxs(Y.Sub,{children:[r.jsx(Y.SubMenuTrigger,{fillContainer:!0,onClick:pe=>{o&&(pe.preventDefault(),x("history"))},children:r.jsx(j,w({},d))}),o?null:r.jsx(Y.Portal,{children:r.jsxs(Y.SubContent,{"data-desktop-skip-link-handler":!0,className:"max-h-[50dvh] w-72 overflow-y-auto",children:[p?r.jsx(dBe,{projects:f,hasProjects:p,serverThreadId:n,onClose:l,onStartProjectChat:(pe,Ee)=>N(pe,Ee),startProjectChatLabel:A,onOpenProjects:g}):null,r.jsx(S9,{activeId:n,hideOverflowMenu:!0,onSelect:l})]})})]})}),e[20]=N,e[21]=p,e[22]=o,e[23]=a,e[24]=l,e[25]=f,e[26]=g,e[27]=k,e[28]=n,e[29]=A,e[30]=d,e[31]=K):K=e[31];const J=K;let Z;e[32]!==c||e[33]!==p||e[34]!==l||e[35]!==k||e[36]!==n?(Z=()=>k!=="history"?null:r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{icon:r.jsx(q2,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:pe=>{pe.preventDefault(),x("root")},fillContainer:!0,children:r.jsx(j,w({},c))}),r.jsx(Y.Separator,{}),r.jsxs(Y.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[p?r.jsx(Y.Item,{fillContainer:!0,onSelect:pe=>{pe.preventDefault(),y(null),x("projectsList")},subMenu:!0,children:r.jsx(j,w({},Yc.projects))}):null,r.jsx(S9,{activeId:n,hideOverflowMenu:!0,onSelect:()=>{x("root"),l()}})]})]}),e[32]=c,e[33]=p,e[34]=l,e[35]=k,e[36]=n,e[37]=Z):Z=e[37];const q=Z;let se;e[38]!==m||e[39]!==f||e[40]!==k?(se=()=>k!=="projectsList"?null:r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{icon:r.jsx(q2,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:pe=>{pe.preventDefault(),x("history")},fillContainer:!0,children:r.jsx(j,w({},Yc.projects))}),r.jsx(Y.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(fBe,{projects:f,areProjectsLoading:m,onSelectProject:pe=>{y(pe),x("projectChats")}})})]}),e[38]=m,e[39]=f,e[40]=k,e[41]=se):se=e[41];const ie=se;let ee;e[42]!==E||e[43]!==T||e[44]!==N||e[45]!==l||e[46]!==k||e[47]!==n||e[48]!==A?(ee=()=>k!=="projectChats"||!E?null:r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{icon:r.jsx(q2,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:pe=>{pe.preventDefault(),x("projectsList")},fillContainer:!0,trailing:r.jsx(Gf,{"aria-label":A,onPointerUp:pe=>N(pe,E.gizmo.gizmo.id),onClick:pe=>N(pe,E.gizmo.gizmo.id),icon:pBe}),children:T}),r.jsx(Y.Separator,{}),r.jsx(Y.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(mBe,{project:E,serverThreadId:n,onSelectConversation:()=>{x("root"),y(null),l()}})})]}),e[42]=E,e[43]=T,e[44]=N,e[45]=l,e[46]=k,e[47]=n,e[48]=A,e[49]=ee):ee=e[49];const le=ee;let X;e[50]!==J?(X=J(),e[50]=J,e[51]=X):X=e[51];let te;e[52]!==q?(te=q(),e[52]=q,e[53]=te):te=e[53];let ce;e[54]!==ie?(ce=ie(),e[54]=ie,e[55]=ce):ce=e[55];let ue;e[56]!==le?(ue=le(),e[56]=le,e[57]=ue):ue=e[57];let me;return e[58]!==X||e[59]!==te||e[60]!==ce||e[61]!==ue?(me=r.jsxs(r.Fragment,{children:[X,te,ce,ue]}),e[58]=X,e[59]=te,e[60]=ce,e[61]=ue,e[62]=me):me=e[62],me}const hBe=R(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([149,1])),{loading:t=>O(t)}),_Be=R(()=>P(()=>import("./lu73hcy0eyoge4v0.js"),__vite__mapDeps([3,1])),{loading:t=>O(t)});R(()=>P(()=>import("./lkxbuc3xjh9wuk8y.js"),__vite__mapDeps([490,1])),{loading:t=>O(t)});const xBe=R(()=>P(()=>Promise.resolve().then(()=>F4),void 0).then(t=>t.DeleteConversationConfirmationModalContainer));R(()=>P(()=>import("./nlrge08q67ir6fyz.js"),__vite__mapDeps([213,1,10,11])).then(t=>t.default));function yBe(t){"use forget";const e=G.c(29),{clientThreadId:n,onClose:s}=t,o=V(),a=Qn(n),i=yM();let l;e[0]!==n||e[1]!==o?(l=yt(o,n),e[0]=n,e[1]=o,e[2]=l):l=e[2];const c=l;let d;e[3]!==o?(d=tt(o),e[3]=o,e[4]=d):d=e[4];const u=d;let f;e[5]!==i?(f=()=>{i==null||i.openInNewTab()},e[5]=i,e[6]=f):f=e[6];const m=f,p=wR(),[g,h]=_.useState(!1),[x,v]=_.useState(!1),y=!g&&!x;let b,C;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=()=>h(!0),C=()=>h(!1),e[7]=b,e[8]=C):(b=e[7],C=e[8]);let S;e[9]!==c||e[10]!==g||e[11]!==y?(S=r.jsx(oBe,{conversation:c,isRootVisible:y,isPanelVisible:g,onOpenPanel:b,onClosePanel:C,backMessage:xu.back}),e[9]=c,e[10]=g,e[11]=y,e[12]=S):S=e[12];let k;e[13]!==u||e[14]!==p||e[15]!==y||e[16]!==s||e[17]!==a?(k=r.jsx(gBe,{serverThreadId:a,isAuth:u,isNarrowSidebar:p,isRootMenuVisible:y,onActiveStateChange:v,onClose:s,backMessage:xu.back,switchChatMessage:xu.switchChat}),e[13]=u,e[14]=p,e[15]=y,e[16]=s,e[17]=a,e[18]=k):k=e[18];let E;e[19]!==o||e[20]!==m||e[21]!==y||e[22]!==s||e[23]!==a?(E=y?r.jsxs(r.Fragment,{children:[a?r.jsxs(r.Fragment,{children:[r.jsx(Y.Item,{icon:_Be,onClick:m,fillContainer:!0,children:r.jsx(j,w({},xu.openChatInTab))}),r.jsx(Y.Item,{icon:hBe,color:"danger",onClick:()=>{a&&(lt(o,xBe,{serverThreadId:a,isActiveConversation:!0}),s())},fillContainer:!0,children:r.jsx(j,w({},xu.deleteChat))})]}):null,null]}):null,e[19]=o,e[20]=m,e[21]=y,e[22]=s,e[23]=a,e[24]=E):E=e[24];let T;return e[25]!==S||e[26]!==k||e[27]!==E?(T=r.jsxs(r.Fragment,{children:[S,k,E]}),e[25]=S,e[26]=k,e[27]=E,e[28]=T):T=e[28],T}const xu=be({switchChat:{id:"SidebarHeader.switchChat",defaultMessage:"Switch Chat"},openChatInTab:{id:"SidebarHeader.openChatInTab",defaultMessage:"Open Chat in Tab"},deleteChat:{id:"SidebarHeader.deleteChat",defaultMessage:"Delete Chat"},openFeedbackModal:{id:"SidebarHeader.openFeedbackModal",defaultMessage:"Share Feedback"},back:{id:"SidebarHeader.back",defaultMessage:"Back"}}),vBe=R(()=>P(()=>import("./hbl4emppcz7xmdaw.js"),__vite__mapDeps([491,1])),{loading:t=>O(t)}),bBe=R(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([151,1])),{loading:t=>O(t)}),CBe=R(()=>P(()=>Promise.resolve().then(()=>rm),void 0),{loading:t=>O(t)}),SBe=R(()=>P(()=>import("./ddm6kppb0nh2wjan.js"),__vite__mapDeps([29,1])),{loading:t=>O(t)});var WE;const kp=mt.button(WE||(WE=ct(["\n  hover:bg-token-interactive-bg-secondary-hover\n  focus-visible:bg-token-interactive-bg-secondary-hover\n  radix-state-open:bg-token-interactive-bg-secondary-hover\n  flex h-[34px] w-[34px] items-center justify-center rounded-[8px]\n  focus-visible:outline-0\n"])));function Tot(t){"use forget";const e=G.c(44),{clientThreadId:n}=t,s=V(),o=ne(),[a,i]=_.useState(!1),l=yM();let c;e[0]!==s?(c=xM(s),e[0]=s,e[1]=c):c=e[1];const d=c;let u;e[2]!==l||e[3]!==s?(u=()=>{gi(s)&&B8.set(s,"new_page_overlay_view"),l==null||l.becomeMainPage()},e[2]=l,e[3]=s,e[4]=u):u=e[4];const f=u,m=wBe;let p;e[5]!==l?(p=()=>{var H;(H=l==null?void 0:l.closeSideChat)==null||H.call(l)},e[5]=l,e[6]=p):p=e[6];const g=p;let h;e[7]!==f||e[8]!==o||e[9]!==d?(h=d&&r.jsx(_t,{triggerAs:null,label:r.jsx(j,w({},Br.expandSidebar)),children:r.jsx(kp,{"aria-label":o.formatMessage(Br.expandSidebar),onClick:f,children:r.jsx(vBe,{className:"icon -scale-x-100"})})}),e[7]=f,e[8]=o,e[9]=d,e[10]=h):h=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(j,w({},Br.openChatMenu)),e[11]=x):x=e[11];let v;e[12]!==o?(v=o.formatMessage(Br.openChatMenu),e[12]=o,e[13]=v):v=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(bBe,{className:"icon"}),e[14]=y):y=e[14];let b;e[15]!==v?(b=r.jsx(_t,{triggerAs:null,label:x,children:r.jsx(Y.BasicTrigger,{asChild:!0,children:r.jsx(kp,{"aria-label":v,children:y})})}),e[15]=v,e[16]=b):b=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=()=>i(!1),e[17]=C):C=e[17];let S;e[18]!==n?(S=r.jsx(Y.Portal,{children:r.jsx(Y.Content,{children:r.jsx(yBe,{clientThreadId:n,onClose:C})})}),e[18]=n,e[19]=S):S=e[19];let k;e[20]!==a||e[21]!==S||e[22]!==b?(k=r.jsxs(Y.Root,{open:a,onOpenChange:i,children:[b,S]}),e[20]=a,e[21]=S,e[22]=b,e[23]=k):k=e[23];let E;e[24]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx(j,w({},Br.newChat)),e[24]=E):E=e[24];let T;e[25]!==o?(T=o.formatMessage(Br.newChat),e[25]=o,e[26]=T):T=e[26];let M;e[27]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(CBe,{className:"icon"}),e[27]=M):M=e[27];let A;e[28]!==T?(A=r.jsx(_t,{triggerAs:null,label:E,children:r.jsx(kp,{"aria-label":T,onClick:m,children:M})}),e[28]=T,e[29]=A):A=e[29];let I;e[30]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx(j,w({},Br.closeSidebar)),e[30]=I):I=e[30];let N;e[31]!==o?(N=o.formatMessage(Br.closeSidebar),e[31]=o,e[32]=N):N=e[32];let L;e[33]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx(SBe,{className:"icon"}),e[33]=L):L=e[33];let D;e[34]!==g||e[35]!==N?(D=r.jsx(_t,{triggerAs:null,label:I,children:r.jsx(kp,{"aria-label":N,onClick:g,children:L})}),e[34]=g,e[35]=N,e[36]=D):D=e[36];let F;e[37]!==k||e[38]!==A||e[39]!==D?(F=r.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[k,A,D]}),e[37]=k,e[38]=A,e[39]=D,e[40]=F):F=e[40];let $;return e[41]!==F||e[42]!==h?($=r.jsxs("div",{className:"flex w-full items-center justify-between",children:[h,F]}),e[41]=F,e[42]=h,e[43]=$):$=e[43],$}function wBe(){it.newConversationGizmoId$.set(void 0),it.wantsNewConversation$.set(!0),it.selectedConversationId$.set(void 0)}const Br=be({expandSidebar:{id:"SidebarHeader.expandSidebar",defaultMessage:"Back to ChatGPT"},openChatMenu:{id:"SidebarHeader.openChatMenu",defaultMessage:"Open chat menu"},newChat:{id:"SidebarHeader.startNewChat",defaultMessage:"New chat"},closeSidebar:{id:"SidebarHeader.closeSidebar",defaultMessage:"Close side chat"}});function kBe({content:t}){const e=V();if(!t.widgets.news_tab_enabled)return null;if(!ye(e,"3024830181"))return r.jsx(fi,{children:"Work in progress"});const{news:n}=t.widgets;if(!n||n.length===0){const o=Am(xt.News);return r.jsx(fi,{IconComponent:o,children:r.jsx(j,{id:"sM5f1q",defaultMessage:"No news results found"})})}const s=wFe(n);return r.jsx("div",{className:"thread-sm:-mx-4 flex flex-col",children:s.map((o,a)=>r.jsx(EBe,{news:o},a))})}const EBe=_.memo(function({news:e}){const n=e[0],s=e.slice(1);return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(w9,{news:n},n.url),r.jsx("div",{className:"ms-4 flex flex-col gap-1",children:s.map(o=>r.jsx(w9,{news:o,showDomain:!1},o.url))})]})});function w9({news:t,showDomain:e=!0}){const n=ne(),s=_.useMemo(()=>{const o=t.pub_date?new Date(t.pub_date).getTime()/1e3:null;return zq(n,o)},[n,t.pub_date]);return r.jsx(t_,{url:t.url,domain:t.domain,title:t.title,description:t.snippet,theme:e?"default":"sub-result",subscript:s,thumbnail_url:t.thumbnail_url})}const TBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M9.23935 2.48C9.73898 2.35629 10.2612 2.35626 10.7608 2.48C11.3552 2.62721 11.8836 3.0064 12.6612 3.5464L15.8614 5.76906C16.4569 6.18256 16.87 6.46183 17.172 6.83937C17.4266 7.15787 17.6172 7.52271 17.7335 7.91359C17.8713 8.37702 17.8653 8.87508 17.8653 9.60011V13.9995C17.8653 14.4553 17.8654 14.8377 17.8399 15.1489C17.8139 15.4677 17.7578 15.7707 17.6114 16.0581C17.3879 16.4969 17.0306 16.8541 16.5919 17.0777C16.3044 17.2241 16.0015 17.2811 15.6827 17.3071C15.3714 17.3326 14.989 17.3316 14.5333 17.3316H12.5001C12.1328 17.3315 11.8351 17.0338 11.8351 16.6665V13.1704C11.835 12.157 11.0135 11.3346 10.0001 11.3345C8.98668 11.3345 8.16514 12.157 8.16513 13.1704V16.6665C8.16513 17.0337 7.86731 17.3315 7.50009 17.3316H5.46689C5.01117 17.3316 4.62875 17.3326 4.31748 17.3071C3.99864 17.2811 3.69576 17.2241 3.4083 17.0777C2.96958 16.8541 2.6123 16.4968 2.38876 16.0581C2.24242 15.7707 2.18631 15.4677 2.16025 15.1489C2.13482 14.8377 2.13486 14.4553 2.13486 13.9995V9.60011C2.13486 8.87505 2.12883 8.37704 2.26669 7.91359C2.38299 7.52267 2.5735 7.1579 2.82822 6.83937C3.13024 6.46179 3.54323 6.18262 4.13876 5.76906L7.33896 3.5464C8.1166 3.00637 8.64499 2.62722 9.23935 2.48Z",fill:"currentColor"})),MBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.5353 9.60012C16.5353 8.7943 16.5288 8.52666 16.4591 8.2925C16.3916 8.06583 16.2807 7.85414 16.1329 7.66945C15.9803 7.47876 15.7645 7.32044 15.1027 6.86086L11.9025 4.63918C11.0356 4.03721 10.7407 3.84522 10.4415 3.77102C10.1518 3.69926 9.84844 3.69926 9.55871 3.77102C9.25946 3.84517 8.96491 4.037 8.09777 4.63918L4.89758 6.86086C4.23585 7.32039 4.01991 7.4788 3.8673 7.66945C3.71959 7.85412 3.60858 8.06585 3.54113 8.2925C3.47147 8.52666 3.46496 8.79429 3.46496 9.60012V13.9995C3.46496 14.4772 3.46549 14.796 3.48547 15.0405C3.50481 15.2773 3.53924 15.3857 3.57433 15.4546C3.67034 15.643 3.82343 15.7961 4.01183 15.8921C4.0807 15.9272 4.18923 15.9616 4.4259 15.981C4.67046 16.001 4.98923 16.0015 5.46691 16.0015H7.25207V13.1245C7.25231 11.6069 8.48241 10.3765 10.0001 10.3765C11.5178 10.3766 12.7479 11.6069 12.7482 13.1245V16.0015H14.5333C15.011 16.0015 15.3298 16.001 15.5743 15.981C15.8109 15.9616 15.9195 15.9272 15.9884 15.8921C16.1767 15.7961 16.3299 15.643 16.4259 15.4546C16.461 15.3857 16.4954 15.2772 16.5148 15.0405C16.5347 14.796 16.5353 14.4772 16.5353 13.9995V9.60012ZM17.8653 13.9995C17.8653 14.4553 17.8654 14.8377 17.84 15.1489C17.8139 15.4677 17.7578 15.7707 17.6114 16.0581C17.3879 16.4969 17.0306 16.8541 16.5919 17.0777C16.3044 17.2241 16.0016 17.2811 15.6827 17.3071C15.3715 17.3326 14.9891 17.3316 14.5333 17.3316H12.0831C11.7159 17.3315 11.4181 17.0337 11.4181 16.6665V13.1245C11.4178 12.3415 10.7832 11.7067 10.0001 11.7066C9.21694 11.7066 8.58142 12.3414 8.58117 13.1245V16.6665C8.58117 17.0338 8.2834 17.3316 7.91613 17.3316H5.46691C5.01118 17.3316 4.62878 17.3326 4.3175 17.3071C3.99865 17.2811 3.69579 17.2241 3.40832 17.0777C2.96959 16.8541 2.61233 16.4969 2.38879 16.0581C2.24243 15.7707 2.18633 15.4678 2.16027 15.1489C2.13484 14.8377 2.13488 14.4553 2.13488 13.9995V9.60012C2.13488 8.87504 2.12885 8.37705 2.26672 7.91359C2.38301 7.52267 2.57352 7.15791 2.82824 6.83938C3.13027 6.46179 3.54324 6.18263 4.13879 5.76906L7.33898 3.54641C8.11664 3.00637 8.645 2.62722 9.23937 2.48C9.73901 2.3563 10.2612 2.35626 10.7609 2.48C11.3552 2.62722 11.8836 3.00639 12.6612 3.54641L15.8614 5.76906C16.4569 6.18257 16.87 6.46182 17.172 6.83938C17.4267 7.15789 17.6172 7.52271 17.7335 7.91359C17.8714 8.37703 17.8654 8.87507 17.8653 9.60012V13.9995Z",fill:"currentColor"})),ABe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7012 2.66797C13.374 2.66796 13.9198 2.66798 14.3623 2.7041C14.8202 2.74151 15.2269 2.82086 15.6035 3.0127L15.8213 3.13477C16.317 3.4388 16.7208 3.87553 16.9863 4.39648L17.0527 4.53906C17.197 4.87529 17.2622 5.23617 17.2949 5.63672C17.3311 6.07921 17.3311 6.62508 17.3311 7.29785V12.7012C17.3311 13.374 17.331 13.9198 17.2949 14.3623C17.2622 14.7632 17.1971 15.1245 17.0527 15.4609L16.9863 15.6035C16.7208 16.1245 16.317 16.5602 15.8213 16.8643L15.6035 16.9863C15.2268 17.1783 14.8203 17.2575 14.3623 17.2949C13.9198 17.331 13.374 17.3311 12.7012 17.3311H7.29785C6.62508 17.3311 6.07921 17.3311 5.63672 17.2949C5.23617 17.2622 4.87529 17.197 4.53906 17.0527L4.39648 16.9863C3.87553 16.7208 3.4388 16.317 3.13477 15.8213L3.0127 15.6035C2.82086 15.2269 2.74151 14.8202 2.7041 14.3623C2.66798 13.9198 2.66796 13.374 2.66797 12.7012V7.29785C2.66796 6.62508 2.66795 6.07921 2.7041 5.63672C2.74152 5.17904 2.82093 4.77302 3.0127 4.39648L3.13477 4.17773C3.43883 3.6821 3.87553 3.27816 4.39648 3.0127L4.53906 2.94629C4.87528 2.80208 5.23618 2.73685 5.63672 2.7041C6.07921 2.66795 6.62508 2.66796 7.29785 2.66797H12.7012ZM7.95313 10.9033C7.52351 10.4737 6.84365 10.4472 6.38281 10.8232L6.29297 10.9033L4.00195 13.1943C4.00681 13.4879 4.01733 13.7367 4.03516 13.9551C4.0711 14.3949 4.13819 14.6431 4.23242 14.8281L4.31445 14.9766C4.52088 15.3131 4.81727 15.5873 5.1709 15.7676L5.32324 15.833C5.49163 15.8933 5.71374 15.9379 6.04395 15.9648C6.49196 16.0014 7.06822 16.001 7.89746 16.001H13.0498L7.95313 10.9033ZM12.0859 6.07324C11.078 6.07324 10.2607 6.89046 10.2607 7.89844C10.2609 8.90625 11.0781 9.72363 12.0859 9.72363C13.0938 9.72358 13.9109 8.90622 13.9111 7.89844C13.9111 6.89049 13.0939 6.0733 12.0859 6.07324Z",fill:"currentColor"})),IBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.0013 7.33337C16.0013 6.62234 16.0014 6.129 15.9701 5.74548C15.947 5.46353 15.9092 5.27402 15.8577 5.13025L15.8021 5.00037C15.6481 4.69826 15.4137 4.44523 15.1263 4.26892L14.9993 4.19861C14.8414 4.11815 14.6298 4.06133 14.2542 4.03064C13.8707 3.99933 13.3772 3.99841 12.6663 3.99841H7.33333C6.62229 3.99841 6.12896 3.99931 5.74544 4.03064C5.46359 4.05367 5.27396 4.09053 5.13021 4.14197L5.00032 4.19861C4.69807 4.35263 4.44519 4.58675 4.26888 4.87439L4.19857 5.00037C4.11806 5.15837 4.0613 5.36978 4.0306 5.74548C3.99926 6.129 3.99837 6.62234 3.99837 7.33337V11.7269L5.0179 10.7084L5.19466 10.5482C6.11048 9.8011 7.46203 9.85465 8.31575 10.7084L13.6038 15.9965C13.8549 15.9923 14.0676 15.9853 14.2542 15.9701C14.6296 15.9394 14.8414 15.8825 14.9993 15.8021L15.1263 15.7308C15.4137 15.5545 15.6482 15.3015 15.8021 14.9994L15.8577 14.8695C15.9092 14.7258 15.947 14.5361 15.9701 14.2543C16.0014 13.8708 16.0013 13.3772 16.0013 12.6664V7.33337ZM7.37533 11.6488C7.00854 11.282 6.42794 11.2594 6.0345 11.5804L5.95833 11.6488L4.00228 13.6049C4.00642 13.8555 4.01538 14.0679 4.0306 14.2543C4.06128 14.6299 4.11811 14.8414 4.19857 14.9994L4.26888 15.1263C4.44519 15.4138 4.69821 15.6482 5.00032 15.8021L5.13021 15.8578C5.27398 15.9092 5.46349 15.9471 5.74544 15.9701C6.12896 16.0014 6.6223 16.0013 7.33333 16.0013H11.7269L7.37533 11.6488ZM13.0853 7.91638C13.0851 7.36333 12.6364 6.91541 12.0833 6.91541C11.5302 6.91541 11.0816 7.36333 11.0814 7.91638C11.0814 8.46959 11.5301 8.91834 12.0833 8.91834C12.6365 8.91834 13.0853 8.46959 13.0853 7.91638ZM14.4154 7.91638C14.4154 9.20413 13.3711 10.2484 12.0833 10.2484C10.7956 10.2484 9.7513 9.20413 9.7513 7.91638C9.75148 6.62879 10.7957 5.58533 12.0833 5.58533C13.371 5.58533 14.4152 6.62879 14.4154 7.91638ZM17.3314 12.6664C17.3314 13.3554 17.332 13.9125 17.2952 14.3627C17.2625 14.7636 17.1975 15.1248 17.0531 15.4613L16.9867 15.6039C16.7212 16.1248 16.3173 16.5606 15.8216 16.8646L15.6038 16.9867C15.2271 17.1787 14.8206 17.2579 14.3626 17.2953C13.9124 17.3321 13.3553 17.3314 12.6663 17.3314H7.33333C6.64424 17.3314 6.08728 17.3321 5.63704 17.2953C5.23636 17.2625 4.87571 17.1974 4.53939 17.0531L4.39681 16.9867C3.87569 16.7212 3.43919 16.3175 3.13509 15.8217L3.01302 15.6039C2.82105 15.2271 2.74185 14.8207 2.70443 14.3627C2.66766 13.9125 2.66829 13.3554 2.66829 12.6664V7.33337C2.66829 6.64428 2.66764 6.08733 2.70443 5.63709C2.74184 5.17929 2.82121 4.77347 3.01302 4.39685L3.13509 4.1781C3.43918 3.68239 3.87577 3.27854 4.39681 3.01306L4.53939 2.94666C4.87568 2.80242 5.2364 2.73721 5.63704 2.70447C6.08728 2.66768 6.64424 2.66834 7.33333 2.66834H12.6663C13.3553 2.66834 13.9124 2.6677 14.3626 2.70447C14.8206 2.74189 15.2271 2.82109 15.6038 3.01306L15.8216 3.13513C16.3174 3.43923 16.7211 3.87573 16.9867 4.39685L17.0531 4.53943C17.1973 4.87575 17.2625 5.2364 17.2952 5.63709C17.332 6.08733 17.3314 6.64428 17.3314 7.33337V12.6664Z",fill:"currentColor"})),jBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 2.66797C14.1891 2.66797 14.7461 2.66732 15.1963 2.7041C15.654 2.74151 16.0599 2.82094 16.4365 3.0127C17.032 3.31609 17.5169 3.80106 17.8203 4.39649C18.0121 4.77302 18.0915 5.17905 18.1289 5.63672C18.1657 6.08689 18.165 6.64406 18.165 7.33301V12.666C18.165 13.3549 18.1657 13.9122 18.1289 14.3623C18.0915 14.8202 18.0122 15.2268 17.8203 15.6035C17.5169 16.199 17.032 16.6829 16.4365 16.9863C16.0599 17.1782 15.6541 17.2575 15.1963 17.2949C14.746 17.3317 14.1891 17.3311 13.5 17.3311H6.5C5.81091 17.3311 5.25395 17.3317 4.80371 17.2949C4.34589 17.2575 3.94011 17.1782 3.56348 16.9863C2.96804 16.6829 2.48311 16.199 2.17969 15.6035C1.98781 15.2268 1.90851 14.8202 1.87109 14.3623C1.83435 13.9122 1.83496 13.3549 1.83496 12.666V7.33301C1.83496 6.64406 1.83431 6.08689 1.87109 5.63672C1.90852 5.17905 1.98793 4.77302 2.17969 4.39649C2.48314 3.80106 2.96803 3.31609 3.56348 3.0127C3.94006 2.82094 4.34597 2.74151 4.80371 2.7041C5.25395 2.66732 5.81092 2.66797 6.5 2.66797H13.5ZM5.83106 12.668C5.46408 12.6682 5.16618 12.966 5.16602 13.333C5.16602 13.7001 5.46398 13.9978 5.83106 13.998H14.1641C14.5313 13.998 14.8291 13.7003 14.8291 13.333C14.8289 12.9659 14.5312 12.668 14.1641 12.668H5.83106ZM5.83301 6.00195C5.46588 6.00212 5.16797 6.29983 5.16797 6.66699V10C5.16813 10.367 5.46598 10.6649 5.83301 10.665H8.79981C9.16695 10.665 9.46468 10.3671 9.46484 10V6.66699C9.46484 6.29974 9.16705 6.00198 8.79981 6.00195H5.83301ZM11.7998 9.33496C11.4328 9.33513 11.1349 9.63298 11.1348 10C11.1349 10.367 11.4328 10.6649 11.7998 10.665H14.166C14.5332 10.665 14.8309 10.3671 14.8311 10C14.8309 9.63288 14.5332 9.33496 14.166 9.33496H11.7998ZM11.7998 6.00195C11.4327 6.00212 11.1348 6.29983 11.1348 6.66699C11.1349 7.03402 11.4328 7.33187 11.7998 7.33203H14.166C14.5332 7.33203 14.8309 7.03412 14.8311 6.66699C14.8311 6.29972 14.5333 6.00195 14.166 6.00195H11.7998Z",fill:"currentColor"})),NBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.165 12.668C14.532 12.6682 14.8299 12.966 14.8301 13.333C14.8301 13.7001 14.5321 13.9978 14.165 13.998H5.83203C5.46476 13.998 5.16699 13.7003 5.16699 13.333C5.16717 12.9659 5.46487 12.668 5.83203 12.668H14.165Z",fill:"currentColor"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.79981 6.00195C9.16705 6.00198 9.46484 6.29974 9.46484 6.66699V10C9.46467 10.3671 9.16695 10.665 8.79981 10.665H5.83301C5.46596 10.6649 5.16814 10.367 5.16797 10V6.66699C5.16797 6.29981 5.46585 6.00209 5.83301 6.00195H8.79981ZM6.49805 9.33496H8.13477V7.33203H6.49805V9.33496Z",fill:"currentColor"}),_.createElement("path",{d:"M14.166 9.33496C14.5332 9.33496 14.8309 9.63288 14.8311 10C14.8309 10.3671 14.5332 10.665 14.166 10.665H11.7998C11.4328 10.6649 11.1349 10.367 11.1348 10C11.1349 9.63296 11.4328 9.33509 11.7998 9.33496H14.166Z",fill:"currentColor"}),_.createElement("path",{d:"M14.166 6.00195C14.5333 6.00195 14.8311 6.29972 14.8311 6.66699C14.8309 7.03412 14.5332 7.33203 14.166 7.33203H11.7998C11.4328 7.3319 11.1349 7.03403 11.1348 6.66699C11.1348 6.29981 11.4326 6.00209 11.7998 6.00195H14.166Z",fill:"currentColor"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 2.66797C14.1891 2.66797 14.7461 2.66732 15.1963 2.7041C15.654 2.74151 16.0599 2.82094 16.4365 3.0127C17.032 3.31609 17.5169 3.80107 17.8203 4.39649C18.0121 4.77301 18.0915 5.17906 18.1289 5.63672C18.1657 6.08689 18.165 6.64406 18.165 7.33301V12.666C18.165 13.3548 18.1656 13.9122 18.1289 14.3623C18.0915 14.8202 18.0122 15.2268 17.8203 15.6035C17.5169 16.199 17.032 16.6829 16.4365 16.9863C16.0599 17.1782 15.6541 17.2575 15.1963 17.2949C14.746 17.3317 14.1891 17.3311 13.5 17.3311H6.5C5.81091 17.3311 5.25395 17.3317 4.80371 17.2949C4.34589 17.2575 3.94011 17.1782 3.56348 16.9863C2.96804 16.6829 2.48311 16.1989 2.17969 15.6035C1.98781 15.2268 1.90851 14.8202 1.87109 14.3623C1.83435 13.9122 1.83496 13.3548 1.83496 12.666V7.33301C1.83496 6.64407 1.83431 6.08689 1.87109 5.63672C1.90852 5.17906 1.98793 4.77301 2.17969 4.39649C2.48314 3.80107 2.96803 3.31609 3.56348 3.0127C3.94006 2.82094 4.34597 2.74151 4.80371 2.7041C5.25395 2.66732 5.81092 2.66797 6.5 2.66797H13.5ZM6.5 3.99805C5.78898 3.99805 5.29563 3.99894 4.91211 4.03027C4.53651 4.06097 4.32499 4.11777 4.16699 4.19824C3.82183 4.37412 3.54117 4.65487 3.36524 5C3.28475 5.15796 3.22797 5.36961 3.19727 5.74512C3.16594 6.12858 3.16504 6.62214 3.16504 7.33301V12.666C3.16504 13.3767 3.16598 13.8705 3.19727 14.2539C3.22794 14.6293 3.28485 14.8411 3.36524 14.999C3.54114 15.3443 3.82178 15.6258 4.16699 15.8018C4.32498 15.8822 4.53656 15.939 4.91211 15.9697C5.29563 16.0011 5.78896 16.001 6.5 16.001H13.5C14.211 16.001 14.7044 16.0011 15.0879 15.9697C15.4634 15.939 15.675 15.8822 15.833 15.8018C16.1782 15.6258 16.4589 15.3443 16.6348 14.999C16.7152 14.8411 16.7721 14.6293 16.8027 14.2539C16.834 13.8705 16.835 13.3767 16.835 12.666V7.33301C16.835 6.62214 16.8341 6.12858 16.8027 5.74512C16.772 5.36961 16.7153 5.15796 16.6348 5C16.4588 4.65487 16.1782 4.37412 15.833 4.19824C15.675 4.11777 15.4635 4.06097 15.0879 4.03027C14.7044 3.99894 14.211 3.99805 13.5 3.99805H6.5Z",fill:"currentColor"})),PBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M12.6143 10.665C12.5527 12.6855 12.2142 14.4786 11.7139 15.7871C11.4358 16.5143 11.1207 17.0603 10.8018 17.4131C10.4828 17.7659 10.2106 17.875 10 17.875C9.78939 17.875 9.51719 17.7659 9.19824 17.4131C8.87934 17.0603 8.5642 16.5143 8.28613 15.7871C7.78584 14.4786 7.44732 12.6855 7.38574 10.665H12.6143Z",fill:"currentColor"}),_.createElement("path",{d:"M6.13574 10.665C6.19746 12.8083 6.55431 14.7586 7.11816 16.2334C7.30297 16.7167 7.51524 17.1598 7.75293 17.5469C4.70324 16.6402 2.42908 13.9384 2.15527 10.665H6.13574Z",fill:"currentColor"}),_.createElement("path",{d:"M17.8447 10.665C17.5709 13.9387 15.2962 16.6405 12.2461 17.5469C12.4839 17.1597 12.697 16.7169 12.8818 16.2334C13.4457 14.7586 13.8025 12.8083 13.8643 10.665H17.8447Z",fill:"currentColor"}),_.createElement("path",{d:"M7.75293 2.45215C7.51506 2.83936 7.30308 3.28296 7.11816 3.7666C6.55431 5.24139 6.19746 7.19168 6.13574 9.33496H2.15527C2.42909 6.0615 4.7031 3.35875 7.75293 2.45215Z",fill:"currentColor"}),_.createElement("path",{d:"M10 2.125C10.2106 2.125 10.4828 2.23408 10.8018 2.58691C11.1207 2.93972 11.4358 3.48566 11.7139 4.21289C12.2142 5.52136 12.5527 7.31448 12.6143 9.33496H7.38574C7.44732 7.31448 7.78584 5.52136 8.28613 4.21289C8.5642 3.48566 8.87934 2.93972 9.19824 2.58691C9.51719 2.23408 9.78939 2.125 10 2.125Z",fill:"currentColor"}),_.createElement("path",{d:"M12.2461 2.45215C15.2964 3.35849 17.5709 6.06118 17.8447 9.33496H13.8643C13.8025 7.19168 13.4457 5.24139 12.8818 3.7666C12.6968 3.28278 12.4841 2.83946 12.2461 2.45215Z",fill:"currentColor"})),RBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10 2.125C14.3492 2.125 17.875 5.65076 17.875 10C17.875 14.3492 14.3492 17.875 10 17.875C5.65076 17.875 2.125 14.3492 2.125 10C2.125 5.65076 5.65076 2.125 10 2.125ZM7.88672 10.625C7.94334 12.3161 8.22547 13.8134 8.63965 14.9053C8.87263 15.5194 9.1351 15.9733 9.39453 16.2627C9.65437 16.5524 9.86039 16.625 10 16.625C10.1396 16.625 10.3456 16.5524 10.6055 16.2627C10.8649 15.9733 11.1274 15.5194 11.3604 14.9053C11.7745 13.8134 12.0567 12.3161 12.1133 10.625H7.88672ZM3.40527 10.625C3.65313 13.2734 5.45957 15.4667 7.89844 16.2822C7.7409 15.997 7.5977 15.6834 7.4707 15.3486C6.99415 14.0923 6.69362 12.439 6.63672 10.625H3.40527ZM13.3633 10.625C13.3064 12.439 13.0059 14.0923 12.5293 15.3486C12.4022 15.6836 12.2582 15.9969 12.1006 16.2822C14.5399 15.467 16.3468 13.2737 16.5947 10.625H13.3633ZM12.1006 3.7168C12.2584 4.00235 12.4021 4.31613 12.5293 4.65137C13.0059 5.90775 13.3064 7.56102 13.3633 9.375H16.5947C16.3468 6.72615 14.54 4.53199 12.1006 3.7168ZM10 3.375C9.86039 3.375 9.65437 3.44756 9.39453 3.7373C9.1351 4.02672 8.87263 4.48057 8.63965 5.09473C8.22547 6.18664 7.94334 7.68388 7.88672 9.375H12.1133C12.0567 7.68388 11.7745 6.18664 11.3604 5.09473C11.1274 4.48057 10.8649 4.02672 10.6055 3.7373C10.3456 3.44756 10.1396 3.375 10 3.375ZM7.89844 3.7168C5.45942 4.53222 3.65314 6.72647 3.40527 9.375H6.63672C6.69362 7.56102 6.99415 5.90775 7.4707 4.65137C7.59781 4.31629 7.74073 4.00224 7.89844 3.7168Z",fill:"currentColor"})),LBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M17.3311 12.666C17.3311 13.3549 17.3317 13.9122 17.2949 14.3623C17.2622 14.7632 17.1971 15.1245 17.0527 15.4609L16.9863 15.6035C16.6829 16.1988 16.1988 16.6829 15.6035 16.9863C15.2268 17.1783 14.8203 17.2575 14.3623 17.2949C13.9121 17.3317 13.3549 17.3311 12.666 17.3311H7.33301C6.64403 17.3311 6.08691 17.3317 5.63672 17.2949C5.23614 17.2622 4.8753 17.197 4.53906 17.0527L4.39648 16.9863C3.87551 16.7208 3.4388 16.317 3.13477 15.8213L3.0127 15.6035C2.82086 15.2269 2.74151 14.8202 2.7041 14.3623C2.66736 13.9122 2.66797 13.3548 2.66797 12.666V8.16504H17.3311V12.666Z",fill:"currentColor"}),_.createElement("path",{d:"M5.87988 6.83496H2.66992C2.6715 6.36896 2.67663 5.97298 2.7041 5.63672C2.74152 5.17906 2.82093 4.77301 3.0127 4.39649C3.31613 3.80105 3.80104 3.31611 4.39648 3.0127C4.77304 2.82092 5.17902 2.74152 5.63672 2.7041C6.08691 2.66732 6.64403 2.66797 7.33301 2.66797H7.54688L5.87988 6.83496Z",fill:"currentColor"}),_.createElement("path",{d:"M10.8828 6.75293L11.0879 6.83496H7.3125L8.94727 2.74707L8.75 2.66797H12.5166L10.8828 6.75293Z",fill:"currentColor"}),_.createElement("path",{d:"M14.3623 2.7041C14.8202 2.74151 15.2268 2.82085 15.6035 3.0127L15.8213 3.13477C16.317 3.4388 16.7208 3.87553 16.9863 4.39649L17.0527 4.53906C17.197 4.87528 17.2622 5.23618 17.2949 5.63672C17.3224 5.97298 17.3275 6.36896 17.3291 6.83496H12.2822L13.9424 2.68164C14.0918 2.68662 14.2316 2.69343 14.3623 2.7041Z",fill:"currentColor"})),OBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2998 2.6709C13.318 2.66997 13.3361 2.67031 13.3545 2.6709C13.739 2.67372 14.0728 2.68047 14.3623 2.7041C14.8202 2.74151 15.2268 2.82085 15.6035 3.0127L15.8213 3.13477C16.317 3.4388 16.7208 3.87553 16.9863 4.39649L17.0527 4.53906C17.197 4.87528 17.2622 5.23618 17.2949 5.63672C17.3317 6.08689 17.3311 6.64407 17.3311 7.33301V12.666C17.3311 13.3549 17.3317 13.9121 17.2949 14.3623C17.2622 14.7632 17.1971 15.1245 17.0527 15.4609L16.9863 15.6035C16.6829 16.1988 16.1988 16.6829 15.6035 16.9863C15.2268 17.1783 14.8203 17.2575 14.3623 17.2949C13.9121 17.3317 13.3549 17.3311 12.666 17.3311H7.33301C6.64403 17.3311 6.08691 17.3317 5.63672 17.2949C5.23614 17.2622 4.8753 17.197 4.53906 17.0527L4.39648 16.9863C3.87551 16.7208 3.4388 16.317 3.13476 15.8213L3.01269 15.6035C2.82086 15.2269 2.74151 14.8202 2.7041 14.3623C2.66736 13.9122 2.66797 13.3548 2.66797 12.666V7.33301C2.66797 6.64407 2.66732 6.08689 2.7041 5.63672C2.74152 5.17906 2.82093 4.77301 3.01269 4.39649C3.31613 3.80105 3.80103 3.31611 4.39648 3.0127C4.77304 2.82092 5.17901 2.74152 5.63672 2.7041C6.08691 2.66732 6.64403 2.66797 7.33301 2.66797H12.666C12.891 2.66797 13.1021 2.66971 13.2998 2.6709ZM3.99805 8.16504V12.666C3.99805 13.3767 3.99899 13.8705 4.03027 14.2539C4.06094 14.6292 4.11788 14.8411 4.19824 14.999L4.26855 15.126C4.4448 15.4133 4.69803 15.6478 5 15.8018L5.12988 15.8574C5.27361 15.9089 5.46331 15.9467 5.74512 15.9697C6.12859 16.0011 6.6221 16.001 7.33301 16.001H12.666C13.3767 16.001 13.8705 16.001 14.2539 15.9697C14.6292 15.9391 14.8411 15.8821 14.999 15.8018C15.3443 15.6258 15.6258 15.3443 15.8018 14.999L15.8574 14.8691C15.9088 14.7254 15.9467 14.5355 15.9697 14.2539C16.001 13.8705 16.001 13.3767 16.001 12.666V8.16504H3.99805ZM12.6484 6.83496H15.999C15.9976 6.38034 15.9932 6.03187 15.9697 5.74512C15.9467 5.46336 15.9089 5.2736 15.8574 5.12988L15.8018 5C15.6478 4.69805 15.4133 4.44479 15.126 4.26856L14.999 4.19824C14.8411 4.11788 14.6292 4.06094 14.2539 4.03027C14.1122 4.01871 13.9555 4.01257 13.7783 4.00781L12.6484 6.83496ZM7.33301 3.99805C6.6221 3.99805 6.12859 3.99894 5.74512 4.03027C5.36955 4.06098 5.15798 4.11775 5 4.19824C4.65484 4.37414 4.37416 4.65485 4.19824 5C4.11776 5.15796 4.06098 5.36961 4.03027 5.74512C4.00684 6.03186 4.00272 6.38034 4.00098 6.83496H6.21582L7.35059 3.99805H7.33301ZM7.64844 6.83496H11.2158L12.3506 3.99805H8.7832L7.64844 6.83496Z",fill:"currentColor"}));function DBe(s){var o=s,{selected:t,label:e}=o,n=ke(o,["selected","label"]);const a=W(t?"text-[var(--interactive-label-accent-default)]":"text-token-text-tertiary hover:text-token-text-secondary",n.className);return r.jsx(_t,{label:e,className:a,children:r.jsx("button",U(w({},n),{className:W("rounded-lg px-6 py-2.5",t&&"bg-[var(--theme-user-msg-bg)]")}))})}function FBe({selectedTab:t,selectTab:e,className:n,textClassName:s,showNewsTab:o=!0}){const a=[{key:xt.Chat,label:r.jsx(j,w({},yu.homeTab)),icon:r.jsx(MBe,{className:"justify-self-center"}),selectedIcon:r.jsx(TBe,{className:"justify-self-center"})},{key:xt.Search,label:r.jsx(j,w({},yu.searchTab)),icon:r.jsx(RBe,{className:"justify-self-center"}),selectedIcon:r.jsx(PBe,{className:"justify-self-center"})},{key:xt.Images,label:r.jsx(j,w({},yu.imagesTab)),icon:r.jsx(IBe,{className:"justify-self-center"}),selectedIcon:r.jsx(ABe,{className:"justify-self-center"})},{key:xt.Videos,label:r.jsx(j,w({},yu.videosTab)),icon:r.jsx(OBe,{className:"justify-self-center"}),selectedIcon:r.jsx(LBe,{className:"justify-self-center"})}];return o&&a.push({key:xt.News,label:r.jsx(j,w({},yu.newsTab)),icon:r.jsx(NBe,{className:"justify-self-center"}),selectedIcon:r.jsx(jBe,{className:"justify-self-center"})}),r.jsx(yv,{id:"super-widget-tabs",children:r.jsx("div",{className:W("mx-px flex h-full items-center gap-0.5",n),id:"super-widget-tab-buttons",children:a.map(({key:i,label:l,icon:c,selectedIcon:d})=>r.jsx(DBe,{label:l,className:W("relative flex-1 sm:flex-none",t===i?"font-medium":"font-normal",s),selected:t===i,style:{fontSize:"0.9375rem"},onClick:()=>e(i),children:t===i?d:c},i))})})}const yu=be({homeTab:{id:"mYiOeg",defaultMessage:"Home"},searchTab:{id:"GjXttB",defaultMessage:"Search"},imagesTab:{id:"ZY9oIP",defaultMessage:"Images"},videosTab:{id:"C8mH8+",defaultMessage:"Videos"},newsTab:{id:"2QYAL1",defaultMessage:"News"}}),BBe=R(()=>P(()=>import("./e2qsug7cpoqmtswx.js"),__vite__mapDeps([198,1])),{loading:t=>O(t)}),UBe=R(()=>P(()=>Promise.resolve().then(()=>AFe),void 0),{loading:t=>O(t)}),$Be=R(()=>P(()=>import("./gtszfryy8hllsxtu.js"),__vite__mapDeps([492,1])),{loading:t=>O(t)});function VBe({content:t,turnIndex:e}){const n=V();if(!ye(n,"3024830181"))return r.jsx(fi,{children:"Work in progress"});const{videos:s,safety:o}=t.widgets;if(o==="adult")return r.jsx(fi,{IconComponent:BBe,className:"min-h-[240px]!",children:r.jsx(j,{id:"8j9OLb",defaultMessage:"Video results not available"})});if(!s||s.length===0){const a=Am(xt.Videos);return r.jsx(fi,{IconComponent:a,children:r.jsx(j,{id:"YgdAWv",defaultMessage:"No videos found"})})}return r.jsx("div",{className:"flex flex-col",children:r.jsx("div",{className:"thread-sm:-mx-4 -mx-2 flex flex-col gap-1",children:s.map(a=>r.jsx(_.Fragment,{children:r.jsx(HBe,{video:a,turnIndex:e})},a.url))})})}function HBe({video:t}){return r.jsx(t_,{url:t.url,domain:t.domain,title:t.title,description:t.description,pub_date:t.pub_date,thumbnail_url:t.thumbnail_url,thumbnailOverlay:t.duration&&r.jsxs("div",{className:"absolute start-1.5 bottom-1.5 inline-flex items-center gap-1.5 rounded-full border-[0.5px] border-white/20 bg-black/20 bg-clip-padding px-1 py-1 text-sm font-normal text-white backdrop-blur-2xl",children:[r.jsx($Be,{className:"size-4"}),r.jsx("span",{className:"pe-1.5",children:GBe(t.duration)})]}),ThumbnailErrorIcon:UBe})}function GBe(t){const e=t.split(":");if(e.length===0)return t;const n=e[0],s=/^(\d+)$/.test(n)?String(Number(n)):n;return e[0]=s,e.join(":")}const k9=2048;function WBe(t,e){const n=encodeURIComponent(t),s=(()=>{switch(e){case xt.Search:return"https://www.google.com/search?q=";case xt.Images:return"https://www.google.com/search?udm=2&q=";case xt.Videos:return"https://www.google.com/search?udm=7&q=";case xt.News:return"https://www.google.com/search?tbm=nws&q=";default:throw new Error("Unsupported tab type: ".concat(e))}})(),o=s+n;if(o.length<=k9)return o;const a=Math.max(0,k9-s.length);let i=n.slice(0,a);if(/%%?$/.test(i))for(;i.endsWith("%");)i=i.slice(0,-1);return/%[0-9A-Fa-f]$/.test(i)&&(i=i.slice(0,-1)),s+i}function zBe({className:t,direction:e="horizontal",isMasked:n=!0,children:s,style:o}){return n?r.jsx("div",{className:W(e==="horizontal"?"[mask-image:linear-gradient(to_right,black_calc(100%_-_2rem),transparent_100%)]":"[mask-image:linear-gradient(to_bottom,black_calc(100%_-_2rem),transparent_100%)]","[mask-size:100%_100%]","[mask-repeat:no-repeat]",t),style:o,children:s}):r.jsx("div",{className:t,style:o,children:s})}const qBe=R(()=>P(()=>import("./e2qsug7cpoqmtswx.js"),__vite__mapDeps([198,1])),{loading:t=>O(t)}),E9=180,Y2=8,YBe=130;function ZBe(t){"use forget";const e=G.c(28),{content:n,turnIndex:s}=t,{images:o,safety:a}=n.widgets,i=_.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[c,d]=_.useState(l);let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=new Set,e[1]=u):u=e[1];const[f,m]=_.useState(u);let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=T=>m(M=>{const A=new Set(M);return A.add(T),A}),e[2]=p):p=e[2];const g=p;let h;if(e[3]!==f||e[4]!==o){let T;e[6]!==f?(T=M=>!f.has(M.content_url),e[6]=f,e[7]=T):T=e[7],h=o.filter(T),e[3]=f,e[4]=o,e[5]=h}else h=e[5];const x=h;let v;e[8]!==x?(v=()=>{if(!i.current)return;const T=i.current.getBoundingClientRect().width,M=[];let A=[],I=0;x.forEach((N,L)=>{const{width:D,height:F}=N.content_size,H=(F?D/F:1)*E9,z=T-I;let K=Math.min(H,z);const J=z-K;let Z=J<=0;J>0&&J<YBe&&(K=K+J,Z=!0),A.push({img:N,displayWidth:K}),I=I+(K+Y2),Z?(M.push(A),A=[],I=0):L===x.length-1&&M.push(A)}),d(M)},e[8]=x,e[9]=v):v=e[9];const y=v;let b;e[10]!==x?(b=[x],e[10]=x,e[11]=b):b=e[11],Xn(y,b);let C;e[12]!==y?(C=()=>{if(!i.current)return;const T=new ResizeObserver(y);return T.observe(i.current),()=>T.disconnect()},e[12]=y,e[13]=C):C=e[13];let S;if(e[14]!==x?(S=[x],e[14]=x,e[15]=S):S=e[15],Xn(C,S),a==="adult"){let T;return e[16]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(fi,{IconComponent:qBe,className:"min-h-[240px]!",children:r.jsx(j,{id:"H+Ty5b",defaultMessage:"Image results not available"})}),e[16]=T):T=e[16],T}if(!x||x.length===0){let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=Am(xt.Images),e[17]=T):T=e[17];const M=T;let A;return e[18]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(fi,{IconComponent:M,children:r.jsx(j,{id:"jtAYXl",defaultMessage:"No images found"})}),e[18]=A):A=e[18],A}let k;if(e[19]!==c||e[20]!==s||e[21]!==x){let T;e[23]!==s||e[24]!==x?(T=(M,A)=>r.jsx("div",{className:"flex",style:{gap:Y2,marginBottom:Y2},children:M.map(I=>{const{img:N,displayWidth:L}=I;return r.jsx("div",{className:"object-cover",style:{width:L,height:E9},children:r.jsx(eUe,{image:N,allImages:x,turnIndex:s,onError:()=>g(N.content_url)})},N.url)})},A),e[23]=s,e[24]=x,e[25]=T):T=e[25],k=c.map(T),e[19]=c,e[20]=s,e[21]=x,e[22]=k}else k=e[22];let E;return e[26]!==k?(E=r.jsx("div",{ref:i,className:"w-full",children:k}),e[26]=k,e[27]=E):E=e[27],E}var zE;const KBe=mt.div(zE||(zE=ct(["\n  pointer-events-none absolute inset-0 z-10 bg-gradient-to-t\n  from-black/70 via-black/20 to-transparent\n  opacity-0 transition-opacity duration-200\n  group-hover:opacity-100 group-focus-visible:opacity-100\n  select-none flex flex-col justify-end\n"])));var qE;const QBe=mt.div(qE||(qE=ct(["\n  flex items-center gap-2 text-xs text-white/90 text-clip whitespace-nowrap\n"])));var YE;const JBe=mt.div(YE||(YE=ct(["\n  text-start text-sm font-medium text-white text-clip whitespace-nowrap\n"])));function XBe({image:t}){const[e,n]=_.useState(!1);return r.jsx(KBe,{children:r.jsxs(zBe,{className:"flex flex-col gap-1 px-2.5 pb-2.5",children:[r.jsxs(QBe,{children:[r.jsx(ks,{url:t.content_url,className:"icon-sm",containerClassName:W("bg-token-bg-primary rounded-sm overflow-hidden",!e&&"loading-results-shimmer"),size:32,minSize:16,applySizeToImg:!0,onLoad:()=>n(!0)}),r.jsx("span",{className:"text-clip whitespace-nowrap",children:t.domain})]}),r.jsx(JBe,{children:t.title})]})})}function eUe({image:t,allImages:e,turnIndex:n,onError:s}){const[o,a]=_.useState(!1),i=i1.useStore();return r.jsxs("button",{className:"border-token-border-light group relative block h-full w-full overflow-hidden rounded-lg border",disabled:!o,onClick:()=>{i.setCurrentImage({image:t,source:cI.SuperWidget,imageResults:e,analyticsMetadata:{turnIndex:n}})},children:[r.jsx("div",{className:W("bg-token-bg-tertiary absolute inset-0 transition-opacity duration-300",o?"pointer-events-none opacity-0":"animate-pulse opacity-100")}),r.jsx("img",{src:t.content_url,alt:t.title,onLoad:()=>a(!0),onError:s,className:W("block h-full w-full transform-gpu object-cover object-[0%_25%] transition-transform duration-300 hover:scale-103",o?"opacity-100":"opacity-0"),width:t.content_size.width,height:t.content_size.height}),o&&r.jsx(XBe,{image:t})]})}const y$=t=>_.createElement("svg",w({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M11.3349 10.3301V5.60547L4.47065 12.4707C4.21095 12.7304 3.78895 12.7304 3.52925 12.4707C3.26955 12.211 3.26955 11.789 3.52925 11.5293L10.3945 4.66504H5.66011C5.29284 4.66504 4.99507 4.36727 4.99507 4C4.99507 3.63273 5.29284 3.33496 5.66011 3.33496H11.9999L12.1337 3.34863C12.4369 3.41057 12.665 3.67857 12.665 4V10.3301C12.6649 10.6973 12.3672 10.9951 11.9999 10.9951C11.6327 10.9951 11.335 10.6973 11.3349 10.3301ZM11.333 4.66699L11.3349 4.66797L11.332 4.66504H11.331L11.333 4.66699Z"})),tUe=Object.freeze(Object.defineProperty({__proto__:null,default:y$},Symbol.toStringTag,{value:"Module"}));function nUe({href:t,turnIndex:e,tabType:n}){const s=n&&jU(n),o=()=>{B.logStructuredEvent(hC,{step:kx.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_CLICK,turnIndex:e,fromTab:s})};return _.useEffect(()=>{B.logStructuredEvent(hC,{step:kx.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_SHOW,turnIndex:e,fromTab:s})},[e,s]),r.jsxs(no,{target:"_self",href:t,onClick:o,className:"flex items-center gap-2 text-sm text-[var(--interactive-label-accent-default)] select-none hover:text-(--super-widget-link-color-hover)",style:{"--super-widget-link-color-hover":"oklch(from var(--interactive-label-accent-default) calc(l - 0.2) clamp(0, calc(c + 0.03), 1.0) h)"},children:[r.jsx(j,w({},sUe.googleIt)),r.jsx(y$,{})]})}const sUe=be({googleIt:{id:"ZOaw3K",defaultMessage:"Google"}}),oUe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.5353 9.60012C16.5353 8.7943 16.5288 8.52666 16.4591 8.2925C16.3916 8.06583 16.2807 7.85414 16.1329 7.66945C15.9803 7.47876 15.7645 7.32044 15.1027 6.86086L11.9025 4.63918C11.0356 4.03721 10.7407 3.84522 10.4415 3.77102C10.1518 3.69926 9.84844 3.69926 9.55871 3.77102C9.25946 3.84517 8.96491 4.037 8.09777 4.63918L4.89758 6.86086C4.23585 7.32039 4.01991 7.4788 3.8673 7.66945C3.71959 7.85412 3.60858 8.06585 3.54113 8.2925C3.47147 8.52666 3.46496 8.79429 3.46496 9.60012V13.9995C3.46496 14.4772 3.46549 14.796 3.48547 15.0405C3.50481 15.2773 3.53924 15.3857 3.57433 15.4546C3.67034 15.643 3.82343 15.7961 4.01183 15.8921C4.0807 15.9272 4.18923 15.9616 4.4259 15.981C4.67046 16.001 4.98923 16.0015 5.46691 16.0015H7.25207V13.1245C7.25231 11.6069 8.48241 10.3765 10.0001 10.3765C11.5178 10.3766 12.7479 11.6069 12.7482 13.1245V16.0015H14.5333C15.011 16.0015 15.3298 16.001 15.5743 15.981C15.8109 15.9616 15.9195 15.9272 15.9884 15.8921C16.1767 15.7961 16.3299 15.643 16.4259 15.4546C16.461 15.3857 16.4954 15.2772 16.5148 15.0405C16.5347 14.796 16.5353 14.4772 16.5353 13.9995V9.60012ZM17.8653 13.9995C17.8653 14.4553 17.8654 14.8377 17.84 15.1489C17.8139 15.4677 17.7578 15.7707 17.6114 16.0581C17.3879 16.4969 17.0306 16.8541 16.5919 17.0777C16.3044 17.2241 16.0016 17.2811 15.6827 17.3071C15.3715 17.3326 14.9891 17.3316 14.5333 17.3316H12.0831C11.7159 17.3315 11.4181 17.0337 11.4181 16.6665V13.1245C11.4178 12.3415 10.7832 11.7067 10.0001 11.7066C9.21694 11.7066 8.58142 12.3414 8.58117 13.1245V16.6665C8.58117 17.0338 8.2834 17.3316 7.91613 17.3316H5.46691C5.01118 17.3316 4.62878 17.3326 4.3175 17.3071C3.99865 17.2811 3.69579 17.2241 3.40832 17.0777C2.96959 16.8541 2.61233 16.4969 2.38879 16.0581C2.24243 15.7707 2.18633 15.4678 2.16027 15.1489C2.13484 14.8377 2.13488 14.4553 2.13488 13.9995V9.60012C2.13488 8.87504 2.12885 8.37705 2.26672 7.91359C2.38301 7.52267 2.57352 7.15791 2.82824 6.83938C3.13027 6.46179 3.54324 6.18263 4.13879 5.76906L7.33898 3.54641C8.11664 3.00637 8.645 2.62722 9.23937 2.48C9.73901 2.3563 10.2612 2.35626 10.7609 2.48C11.3552 2.62722 11.8836 3.00639 12.6612 3.54641L15.8614 5.76906C16.4569 6.18257 16.87 6.46182 17.172 6.83938C17.4267 7.15789 17.6172 7.52271 17.7335 7.91359C17.8714 8.37703 17.8654 8.87507 17.8653 9.60012V13.9995Z"}));function aUe(){return r.jsx(Xe.div,{layoutId:"super-widget-underline",className:"absolute start-0 end-0 bottom-0 h-0.5 bg-black dark:bg-white",transition:{type:"spring",duration:.3,bounce:.12}})}function rUe(s){var o=s,{selected:t,label:e}=o,n=ke(o,["selected","label"]);const a=W(t?"text-token-text-primary":"text-token-text-tertiary hover:text-token-text-secondary",n.className);return r.jsx(_t,{label:e,className:a,children:r.jsx("button",U(w({},n),{className:"h-full w-full"}))})}function iUe({selectedTab:t,selectTab:e,className:n,textClassName:s,showNewsTab:o=!0}){const a=[{key:xt.Chat,label:r.jsx(j,w({},vu.homeTab)),icon:r.jsx(oUe,{className:"justify-self-center"})},{key:xt.Search,label:r.jsx(j,w({},vu.searchTab)),icon:r.jsx(P4,{className:"justify-self-center"})},{key:xt.Images,label:r.jsx(j,w({},vu.imagesTab)),icon:r.jsx(c$,{className:"justify-self-center"})},{key:xt.Videos,label:r.jsx(j,w({},vu.videosTab)),icon:r.jsx(u$,{className:"justify-self-center"})}];return o&&a.push({key:xt.News,label:r.jsx(j,w({},vu.newsTab)),icon:r.jsx(d$,{className:"justify-self-center"})}),r.jsx(yv,{id:"super-widget-tabs",children:r.jsx("div",{className:W("flex h-full gap-0.5",n),children:a.map(({key:i,label:l,icon:c})=>r.jsxs(rUe,{label:l,className:W("relative flex-1 sm:w-(--tab-width) sm:flex-none",t===i?"font-medium":"font-normal",s),selected:t===i,style:{fontSize:"0.9375rem"},onClick:d=>{e(i),d.currentTarget.scrollIntoView({behavior:"smooth"})},children:[c,t===i&&r.jsx(aUe,{})]},i))})})}const vu=be({homeTab:{id:"mYiOeg",defaultMessage:"Home"},searchTab:{id:"GjXttB",defaultMessage:"Search"},imagesTab:{id:"ZY9oIP",defaultMessage:"Images"},videosTab:{id:"C8mH8+",defaultMessage:"Videos"},newsTab:{id:"2QYAL1",defaultMessage:"News"}});function lUe({queryText:t,tabType:e,searchIt:n}){const s=Am(e);return r.jsxs("div",{className:"flex w-full items-center text-start text-sm",children:[r.jsxs("span",{className:"text-token-text-tertiary flex max-w-[var(--user-chat-width,70%)] min-w-0 items-center",children:[r.jsx(s,{className:"me-2.5 h-4 w-4 shrink-0"}),r.jsx(j,U(w({},cUe(e)),{values:{prefix:o=>r.jsx("span",{className:"shrink-0",children:o}),query:r.jsx("span",{className:"min-w-0 flex-initial truncate",children:t}),trailingQuote:o=>r.jsx("span",{"aria-hidden":"true",className:"shrink-0",children:o})}}))]}),r.jsx("span",{className:"ms-auto flex-shrink-0",children:n})]})}function cUe(t){switch(t){case xt.Images:return Ep.imageResultsFor;case xt.Videos:return Ep.videoResultsFor;case xt.News:return Ep.newsResultsFor;case xt.Search:default:return Ep.searchResultsFor}}const Ep=be({searchResultsFor:{id:"xeT484",defaultMessage:"<prefix>Search results for </prefix>{query}<trailingQuote></trailingQuote>"},imageResultsFor:{id:"OsLjmT",defaultMessage:"<prefix>Image results for </prefix>{query}<trailingQuote></trailingQuote>"},videoResultsFor:{id:"Egf3CB",defaultMessage:"<prefix>Video results for </prefix>{query}<trailingQuote></trailingQuote>"},newsResultsFor:{id:"MtgcpS",defaultMessage:"<prefix>News results for </prefix>{query}<trailingQuote></trailingQuote>"}});function R4(t,e,n){var s,o,a;return t===0?e[0]?bo(e[0]):null:(a=(o=(s=n[t])==null?void 0:s.widgets)==null?void 0:o.query)!=null?a:bo(e[t])}function Tp(t,e,n,s,o){var l,c,d,u,f;const a=((d=(c=(l=t==null?void 0:t.widgets)==null?void 0:l[n])==null?void 0:c.length)!=null?d:0)>0&&(!o||(t==null?void 0:t.widgets.safety)!=="adult"||(t==null?void 0:t.widgets.safe_search_off)!==!0||s===!0),i=((f=(u=e==null?void 0:e[n])==null?void 0:u.length)!=null?f:0)>0&&((e==null?void 0:e.safeSearchOff)!==!0||s===!0);return a||i?0:e&&sI(e,n)?1:2}function dUe(t,e,n,s,o,a,i){const l=s[t],c=R4(t,n,s),d=c?o[c]:void 0;switch(e){case xt.Search:return Tp(l,d,"navlinks",a,i);case xt.Images:return Tp(l,d,"images");case xt.Videos:return Tp(l,d,"videos");case xt.News:return Tp(l,d,"news");default:return 2}}function uUe(t){switch(t.safety){case Xr.SAFE:return"safe";case Xr.ADULT:return"adult";case Xr.FLAGGED:return"flagged";case Xr.NOT_RUN:return"not_run";case void 0:return}}function fUe(t,e,n,s,o,a,i){var f,m,p,g,h,x;const l={content_type:ut.SuperWidget,widgets:w({},(m=(f=n[t])==null?void 0:f.widgets)!=null?m:{navlinks:[],images:[],videos:[],news:[],news_tab_enabled:!0})},c=R4(t,o,n),d=c?s[c]:void 0;d&&(d.navlinks.length>0&&(l.widgets.navlinks=d.navlinks,l.widgets.navlinks_ready=((g=(p=d.fetchingStatus)==null?void 0:p.navlinks)==null?void 0:g.status)===lr.DONE||((x=(h=n[t])==null?void 0:h.widgets)==null?void 0:x.navlinks_ready)===!0,l.widgets.safe_search_off=d.safeSearchOff,l.widgets.safety=uUe(d)),d.images.length>0&&(l.widgets.images=d.images),d.videos.length>0&&(l.widgets.videos=d.videos),d.news.length>0&&(l.widgets.news=d.news));let u=!1;switch(e){case xt.Search:{const v=t===n.length-1;u=l.widgets.navlinks.length>0&&(!i||l.widgets.safety!=="adult"||l.widgets.safe_search_off!==!0||a===!0||!v)?!1:np(c,"navlinks");break}case xt.Images:u=l.widgets.images.length>0?!1:np(c,"images");break;case xt.Videos:u=l.widgets.videos.length>0?!1:np(c,"videos");break;case xt.News:u=l.widgets.news.length>0?!1:np(c,"news");break;case xt.Chat:break}return[l,u]}function Mot(){const t=V(),e=ts(t),n=jn(hn),s=am(),o=hI();return e&&!n&&!s&&!o}function v$(){const t=V(),e=ae(()=>yU());return typeof e=="boolean"?e:is(t,"694761886").get("news_tab_enabled",!0)}function Aot({className:t,textClassName:e}){const n=V(),[s,o]=Mm(),a=v$(),i=gr.useStore(),l=$s(),c=ae(()=>vM(n));_.useEffect(()=>{!a&&s===xt.News&&o({tabType:xt.Chat})},[a,o,s]);function d(u){if(o({tabType:u}),u!==xt.Chat){const f=i.getActiveSystemHintType();f&&f!==Pe.Search&&l(null)}B.logStructuredEvent(Nne,{tab:jU(s)})}return c?S8(n)?r.jsx(FBe,{selectedTab:s,selectTab:d,className:t,textClassName:e,showNewsTab:a}):r.jsx(iUe,{selectedTab:s,selectTab:d,className:t,textClassName:e,showNewsTab:a}):null}const mUe={[xt.Chat]:()=>null,[xt.Search]:f$,[xt.Images]:ZBe,[xt.Videos]:VBe,[xt.News]:kBe};function pUe({userMessages:t,superWidgetMessageContents:e,tab:n,scrollToMessageId:s,isNewsTabEnabled:o,isAdultSearchEnabled:a}){"use no forget";const i=V(),l=ae(()=>Ff(i)),c=_.useRef({});function d(p,g="smooth"){const h=c.current[p];h&&h.scrollIntoView({behavior:g,block:"start"})}_.useEffect(()=>{requestAnimationFrame(()=>{if(t.length>0){const p=t[t.length-1];p&&d(p.id,"instant")}})},[]),_.useEffect(()=>{setTimeout(()=>{s&&d(s)},50)},[s]);const u=er(p=>p.entries);if(n===xt.News&&!o)return null;const f=mUe[n],m=t.map((p,g)=>dUe(g,n,t,e,u,a,l));return r.jsx("div",{className:"thread-sm:px-2 flex w-full flex-col gap-4 px-4 pt-2",children:DL(t.length,p=>{if(m[p]!==0&&p!==t.length-1)return null;const g=R4(p,t,e),h=p>0&&m[p-1]===0,x=pOe([t[p]]);return r.jsxs("div",{className:"w-full",children:[h&&r.jsx("hr",{className:"border-heavy w-full pb-3.5"}),r.jsxs("div",{className:W("mb-4 flex scroll-mt-6 flex-col gap-4 text-base",h&&"mt-2.5"),ref:v=>{c.current[t[p].id]=v},children:[r.jsx(gUe,{queryText:g,tab:n,turnIndex:p}),x&&r.jsx(gOe,{message:x}),!x&&r.jsx(Ehe,{message:t[p]})]}),(()=>{var C,S;const[v,y]=fUe(p,n,e,u,t,a,l),b=(p===0||((S=(C=e[p])==null?void 0:C.widgets)==null?void 0:S.query)!==void 0)&&!y;return v&&b?r.jsx(f,{content:v,isAdultSearchEnabled:a,isLatestTurn:p===e.length-1,turnIndex:p,source:"search"}):r.jsx("div",{className:"min-h-[calc(100dvh_-_var(--header-height)_".concat(x?"+_330":"-_120","px)]"),children:m[p]!==2&&r.jsx("div",{className:"result-streaming pulse",children:r.jsx("span",{})})})})()]},p)})})}function gUe(t){"use forget";const e=G.c(11),{queryText:n,turnIndex:s,tab:o}=t;if(!n)return null;let a;e[0]!==n||e[1]!==o?(a=WBe(n,o),e[0]=n,e[1]=o,e[2]=a):a=e[2];let i;e[3]!==a||e[4]!==o||e[5]!==s?(i=r.jsx(nUe,{href:a,turnIndex:s,tabType:o}),e[3]=a,e[4]=o,e[5]=s,e[6]=i):i=e[6];let l;return e[7]!==n||e[8]!==i||e[9]!==o?(l=r.jsx(lUe,{queryText:n,tabType:o,searchIt:i}),e[7]=n,e[8]=i,e[9]=o,e[10]=l):l=e[10],l}function Iot(t){"use forget";var N,L,D,F,$,H;const e=G.c(41),{clientThreadId:n,children:s}=t,o=V(),a=v$(),[i,l]=Mm();let c;e[0]!==o?(c=()=>Ff(o)&&ed(o,Lt.AtlasAdultSearchAllowed),e[0]=o,e[1]=c):c=e[1];const d=ae(c),[u,f,m]=Ve(n,_Ue),p=f[f.length-1],g=(L=(N=p==null?void 0:p.content)==null?void 0:N.widgets)==null?void 0:L.news_tab_enabled;let h,x;e[2]!==g?(h=()=>{yU.set(typeof g=="boolean"?g:void 0)},x=[g],e[2]=g,e[3]=h,e[4]=x):(h=e[3],x=e[4]),_.useEffect(h,x);let v,y;e[5]!==a||e[6]!==l||e[7]!==i?(v=()=>{!a&&i===xt.News&&l({tabType:xt.Chat})},y=[a,l,i],e[5]=a,e[6]=l,e[7]=i,e[8]=v,e[9]=y):(v=e[8],y=e[9]),_.useEffect(v,y);let b;e[10]!==o||e[11]!==d||e[12]!==a||e[13]!==((F=(D=p==null?void 0:p.content)==null?void 0:D.widgets)==null?void 0:F.query)||e[14]!==i||e[15]!==u[0]?(b=()=>{var q,se,ie,ee,le;const z=u[0],K=z?bo(z):null,J=(ie=(se=(q=p==null?void 0:p.content)==null?void 0:q.widgets)==null?void 0:se.query)!=null?ie:"",Z=((le=(ee=J==null?void 0:J.trim())==null?void 0:ee.length)!=null?le:0)>0?J:K;Z&&(i==="search"?ju(o,Z,"navlinks",d):i==="images"?ju(o,Z,"images"):i==="videos"?ju(o,Z,"videos"):i==="news"&&a&&ju(o,Z,"news"))},e[10]=o,e[11]=d,e[12]=a,e[13]=(H=($=p==null?void 0:p.content)==null?void 0:$.widgets)==null?void 0:H.query,e[14]=i,e[15]=u[0],e[16]=b):b=e[16];let C;e[17]!==o||e[18]!==d||e[19]!==a||e[20]!==p||e[21]!==i||e[22]!==u?(C=[o,i,u,a,p,d],e[17]=o,e[18]=d,e[19]=a,e[20]=p,e[21]=i,e[22]=u,e[23]=C):C=e[23],_.useEffect(b,C);let S;if(e[24]!==o?(S=()=>vM(o),e[24]=o,e[25]=S):S=e[25],!ae(S))return s;const E=i===xt.Chat?"block":"hidden";let T;e[26]!==s||e[27]!==E?(T=r.jsx("div",{id:"mini-chat-content",className:E,children:s}),e[26]=s,e[27]=E,e[28]=T):T=e[28];let M;e[29]!==d||e[30]!==a||e[31]!==m||e[32]!==i||e[33]!==f||e[34]!==u?(M=i!==xt.Chat&&(i!==xt.News||a)&&r.jsx(pUe,{userMessages:u,superWidgetMessageContents:f.map(hUe),tab:i,scrollToMessageId:m,isNewsTabEnabled:a,isAdultSearchEnabled:d},i),e[29]=d,e[30]=a,e[31]=m,e[32]=i,e[33]=f,e[34]=u,e[35]=M):M=e[35];let A;e[36]!==M?(A=r.jsx(Ir,{children:M}),e[36]=M,e[37]=A):A=e[37];let I;return e[38]!==T||e[39]!==A?(I=r.jsxs("div",{children:[T,A]}),e[38]=T,e[39]=A,e[40]=I):I=e[40],I}function hUe(t){return t.content}function _Ue(t){return[he.getUserMessages(t).filter(xUe),he.getSuperWidgetMessages(t),t==null?void 0:t.scrollToMessageId]}function xUe(t){var e;return!((e=t.metadata)!=null&&e.is_visually_hidden_from_conversation)}const T9=R(()=>P(()=>import("./g4luqq3g92oxbbim.js"),__vite__mapDeps([247,1])),{loading:t=>O(t)}),Zy=R(()=>P(()=>Promise.resolve().then(()=>f5),void 0),{loading:t=>O(t)}),M9=R(()=>P(()=>import("./n2s4f8fk0mmpqlup.js"),__vite__mapDeps([493,1])),{loading:t=>O(t)}),b$=Fe.TemporaryChatOnboarding;function jot(){const t=Es(),{eligible:e}=dt(b$);return e&&t}function bu({icon:t,title:e,description:n}){return r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"mt-1 h-5 w-5 shrink-0",children:t}),r.jsxs("div",{className:"ms-4",children:[r.jsx("div",{className:"text-lg font-semibold",children:e}),r.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:n})]})]})}function Not({onClose:t}){const[e,n]=_.useState(!0),s=V(),o=et(s),a=ne(),i=Vd(),l=_.useCallback(()=>{st(s,b$),n(!1),t==null||t()},[s,t]);return _.useEffect(()=>{B.logUpsellOrModalEvent(un,{eventId:"temporary_chat_onboarding_modal_shown",type:ln.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]),o!=null&&o.isWorkspaceAccount()?r.jsx(Mt,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:rs,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(cs.title),primaryButton:r.jsx(Ns.Button,{onClick:l,title:a.formatMessage(cs.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(bu,{icon:r.jsx(Zy,{className:"h-full w-full"}),title:a.formatMessage(cs.bulletTitle1),description:a.formatMessage({id:"nSGhxr",defaultMessage:"Temporary chats won't appear in your history."})}),r.jsx(bu,{icon:i?r.jsx(T9,{className:"h-full w-full"}):r.jsx(M9,{className:"h-full w-full"}),title:a.formatMessage(i?cs.bulletTitle2MemoryAvailable:cs.bulletTitle2MemoryUnavailable),description:a.formatMessage(i?cs.bulletDescription2MemoryAvailable:cs.bulletDescription2MemoryUnavailable)})]})}):r.jsx(Mt,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:rs,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(cs.title),primaryButton:r.jsx(Ns.Button,{onClick:l,title:a.formatMessage(cs.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(bu,{icon:r.jsx(Zy,{className:"h-full w-full"}),title:a.formatMessage(cs.bulletTitle1),description:a.formatMessage(cs.bulletDescription1)}),r.jsx(bu,{icon:r.jsx(qq,{className:"h-full w-full"}),title:a.formatMessage(cs.bulletTitle3),description:a.formatMessage(cs.bulletDescription3)}),r.jsx(bu,{icon:i?r.jsx(T9,{className:"h-full w-full"}):r.jsx(M9,{className:"h-full w-full"}),title:a.formatMessage(i?cs.bulletTitle2MemoryAvailable:cs.bulletTitle2MemoryUnavailable),description:a.formatMessage(i?cs.bulletDescription2MemoryAvailable:cs.bulletDescription2MemoryUnavailable)})]})})}const cs=be({title:{id:"TemporaryChatOnboardingModal.title",defaultMessage:"Temporary Chat"},bulletTitle1:{Icon:r.jsx(Zy,{className:"h-full w-full"}),id:"TemporaryChatOnboardingModal.bulletTitle1",defaultMessage:"Not in history"},bulletDescription1:{id:"TemporaryChatOnboardingModal.bulletDescription1.1",defaultMessage:"Temporary chats won't appear in your history. For safety purposes, we may keep a copy of your chat for up to 30 days."},bulletTitle2MemoryAvailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryAvailable",defaultMessage:"Memory off"},bulletDescription2MemoryAvailable:{id:"rmWwWN",defaultMessage:"While in a temporary chat, ChatGPT won't use or update its memory. Custom instructions will still be followed if you have them enabled."},bulletTitle2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryUnavailable",defaultMessage:"Follows Custom Instructions"},bulletDescription2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletDescription2MemoryUnavailable",defaultMessage:"Custom Instructions will still be followed if you have them enabled."},bulletTitle3:{id:"TemporaryChatOnboardingModal.bulletTitle3",defaultMessage:"No model training"},bulletDescription3:{id:"TemporaryChatOnboardingModal.bulletDescription3",defaultMessage:"Temporary chats won't be used to improve our models."},continue:{id:"TemporaryChatOnboardingModal.continue",defaultMessage:"Continue"}}),C$=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8.11523 3.19409C9.15589 2.15344 10.844 2.15363 11.8848 3.19409L16.8057 8.11499C17.8462 9.15575 17.8463 10.8438 16.8057 11.8845L11.8848 16.8054C10.8441 17.8461 9.156 17.846 8.11523 16.8054L3.19434 11.8845C2.15387 10.8438 2.15369 9.15564 3.19434 8.11499L8.11523 3.19409ZM7.96582 7.49976C7.78889 7.49965 7.6396 7.63263 7.61914 7.80835C7.49243 8.90693 6.87202 9.52734 5.77344 9.65405C5.59772 9.67451 5.46474 9.8238 5.46484 10.0007C5.46517 10.1777 5.59859 10.3264 5.77441 10.3464C6.85731 10.4691 7.52042 11.0831 7.61816 12.1824C7.63414 12.3623 7.78525 12.4999 7.96582 12.4998C8.14634 12.4994 8.29693 12.3613 8.3125 12.1814C8.40645 11.0979 9.06302 10.4414 10.1465 10.3474C10.3264 10.3318 10.4645 10.1813 10.4648 10.0007C10.465 9.82016 10.3273 9.66905 10.1475 9.65308C9.04822 9.55533 8.4342 8.89222 8.31152 7.80933C8.29153 7.6335 8.14276 7.50008 7.96582 7.49976Z",fill:"#5856D6"})),Pot=Object.freeze(Object.defineProperty({__proto__:null,default:C$},Symbol.toStringTag,{value:"Module"})),o_=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M17.665 10C17.665 10.6877 17.1785 11.2454 16.5488 11.3945L16.4219 11.4189C14.7098 11.6665 13.6129 12.1305 12.877 12.8623C12.1414 13.5938 11.6742 14.6843 11.4238 16.3887C11.3197 17.0973 10.7182 17.665 9.96484 17.665C9.27085 17.665 8.68836 17.1772 8.53613 16.5215C8.12392 14.7459 7.6623 13.619 6.95703 12.8652C6.31314 12.1772 5.39414 11.7268 3.88672 11.4688L3.57715 11.4199C2.88869 11.319 2.33496 10.734 2.33496 10C2.33496 9.26603 2.88869 8.681 3.57715 8.58008L3.88672 8.53125C5.39414 8.27321 6.31314 7.82277 6.95703 7.13477C7.6623 6.38104 8.12392 5.25413 8.53613 3.47852L8.56934 3.35742C8.76133 2.76356 9.31424 2.33496 9.96484 2.33496C10.7182 2.33497 11.3197 2.9027 11.4238 3.61133L11.5283 4.22266C11.7954 5.58295 12.2334 6.49773 12.877 7.1377C13.6129 7.86952 14.7098 8.33351 16.4219 8.58105C17.1119 8.68101 17.665 9.26667 17.665 10Z"})),a_=Object.freeze(Object.defineProperty({__proto__:null,default:o_},Symbol.toStringTag,{value:"Module"})),yUe=R(()=>P(()=>import("./h7yxptxa7cya0dam.js"),__vite__mapDeps([494,1])),{loading:t=>O(t)});var S$=(t=>(t.GENERIC="generic",t.GENERIC_FREE_TRIAL="generic_free_trial",t.GO="go",t.PLUS="plus",t))(S$||{});const Z2="thread_header_upgrade_pill_dismissed_event",vUe=1440*60*1e3,bUe={[We.PLUS]:pt.tryPlus,[We.GO]:pt.tryGo,[We.SELF_SERVE_BUSINESS]:pt.tryBusiness};function CUe(t){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}return null}function Rot(t){"use forget";var z,K,J,Z,q,se;const e=G.c(18),{clientThreadId:n,fromHeader:s}=t,o=V(),a=GP(),{enableThreadHeaderUpgradePill:i}=Que();let l;e[0]!==n?(l=Cr(n),e[0]=n,e[1]=l):l=e[1];const c=l,d=Ve(n,SUe),u=uv(),f=Sv();let m;e[2]!==(u==null?void 0:u.call_to_action)?(m=((z=u==null?void 0:u.call_to_action)==null?void 0:z.includes(Gt.GET_PLUS))||((K=u==null?void 0:u.call_to_action)==null?void 0:K.includes(Gt.UPGRADE_TO_GO))||((J=u==null?void 0:u.call_to_action)==null?void 0:J.includes(Gt.GET_BUSINESS_TRIAL))||((Z=u==null?void 0:u.call_to_action)==null?void 0:Z.includes(Gt.GET_GO_TRIAL))||((q=u==null?void 0:u.call_to_action)==null?void 0:q.includes(Gt.GET_PLUS_TRIAL))||((se=u==null?void 0:u.call_to_action)==null?void 0:se.includes(Gt.GET_PRO)),e[2]=u==null?void 0:u.call_to_action,e[3]=m):m=e[3];const p=m,g=c&&!d,[h,x]=_.useState(null),v=Qn(n),y=h!==null;let b,C;e[4]!==n||e[5]!==v?(b=()=>{if(typeof window>"u")return;const ie=CUe(gt.getItem(Ue.ThreadHeaderUpgradePillDismissals));ie!=null&&Date.now()-ie<vUe?x(ie):ie!=null&&gt.setItem(Ue.ThreadHeaderUpgradePillDismissals,null);const ee=le=>{const X=le.detail;(X===n||v&&X===v)&&x(Date.now())};return window.addEventListener(Z2,ee),()=>{window.removeEventListener(Z2,ee)}},C=[n,v],e[4]=n,e[5]=v,e[6]=b,e[7]=C):(b=e[6],C=e[7]),_.useEffect(b,C);const S=a&&i&&!p,k=S&&g;let E;e[8]!==o?(E=ze(o,VF,{disableExposureLog:!0}).get(mwe,!1),e[8]=o,e[9]=E):E=e[9];const T=E,M=pwe(),A=(f==null?void 0:f.beacon_id)===qF,N=(M||A)&&T;let L=!1;if(!N&&s&&S&&n){let ie;e[10]!==o?(ie=ze(o,"684023316").get("show_persistent_generic_upsell",!1),e[10]=o,e[11]=ie):ie=e[11],L=ie}let D;e[12]!==n||e[13]!==v?(D=()=>{const ie=v!=null?v:n,ee=Date.now();if(gt.setItem(Ue.ThreadHeaderUpgradePillDismissals,ee),x(ee),typeof window<"u"){const le=new Set([ie]);v&&v!==n&&le.add(n);for(const X of le)window.dispatchEvent(new CustomEvent(Z2,{detail:X}))}},e[12]=n,e[13]=v,e[14]=D):D=e[14];const F=D,$=!N&&(k||L&&!y);let H;return e[15]!==F||e[16]!==$?(H={shouldShow:$,showCloseButton:!0,handleClose:F},e[15]=F,e[16]=$,e[17]=H):H=e[17],H}function SUe(t){return he.hasUserMessage(t)}function Lot(t){"use forget";var M;const e=G.c(17),{clientThreadId:n,onClose:s,showCloseButton:o}=t,a=o===void 0?!0:o,i=V(),l=Cn(),c=nae(),d=oae(),u=sae();let f;e[0]!==n?(f=Cr(n),e[0]=n,e[1]=f):f=e[1];const m=f,p=Ve(n,kUe),g=a&&(!m||p),h=ae(wUe);let x=null;d.eligible?x=We.SELF_SERVE_BUSINESS:c.eligible?x=We.PLUS:u.eligible&&(x=We.GO);const v=x!==null,y=b1(),{isLoading:b}=to(Lt.Sunshine),{data:C,isLoading:S}=zf(void 0,!1,y),k=y&&((M=C==null?void 0:C.memoryFullPct)!=null?M:0)>=100;if(!l||S&&(b||k))return null;let T;if(v)T="generic_free_trial";else if(h)Eg(i)?T="go":T="plus";else if(Eg(i))T="go";else{const I=ze(i,"497415788").get("upgrade_pill_type","plus");if(IUe(I))T=I;else return null}switch(T){case"generic":{let A;return e[2]!==s||e[3]!==g?(A=r.jsx(MUe,{onClose:s,showCloseButton:g}),e[2]=s,e[3]=g,e[4]=A):A=e[4],A}case"generic_free_trial":{if(!x)return null;let A;return e[5]!==x||e[6]!==s||e[7]!==g?(A=r.jsx(AUe,{onClose:s,planType:x,showCloseButton:g}),e[5]=x,e[6]=s,e[7]=g,e[8]=A):A=e[8],A}case"plus":{let A;return e[9]!==h||e[10]!==s||e[11]!==g?(A=r.jsx(EUe,{isMobileWeb:h,onClose:s,showCloseButton:g}),e[9]=h,e[10]=s,e[11]=g,e[12]=A):A=e[12],A}case"go":{let A;return e[13]!==h||e[14]!==s||e[15]!==g?(A=r.jsx(TUe,{isMobileWeb:h,onClose:s,showCloseButton:g}),e[13]=h,e[14]=s,e[15]=g,e[16]=A):A=e[16],A}}}function wUe(){return oT()}function kUe(t){return he.hasUserMessage(t)}function EUe(t){"use forget";const e=G.c(13),{isMobileWeb:n,onClose:s,showCloseButton:o}=t,a=ot(),i=V();let l;e[0]!==a?(l=()=>{xn(a,"thread_header_get_plus_pill")},e[0]=a,e[1]=l):l=e[1];const c=l;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(o_,{className:"icon-sm"}),e[2]=d):d=e[2];let u;e[3]!==i||e[4]!==n?(u=jUe(i,n),e[3]=i,e[4]=n,e[5]=u):u=e[5];let f;e[6]!==u?(f=r.jsx(j,w({},u)),e[6]=u,e[7]=f):f=e[7];let m;return e[8]!==c||e[9]!==s||e[10]!==o||e[11]!==f?(m=r.jsxs(r_,{onClick:c,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:s,showCloseButton:o,type:"plus",children:[d,f]}),e[8]=c,e[9]=s,e[10]=o,e[11]=f,e[12]=m):m=e[12],m}function TUe(t){"use forget";const e=G.c(13),{isMobileWeb:n,onClose:s,showCloseButton:o}=t,a=ot(),i=V();let l;e[0]!==a?(l=()=>{xn(a,"thread_header_get_plus_pill")},e[0]=a,e[1]=l):l=e[1];const c=l;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(C$,{className:"icon-sm"}),e[2]=d):d=e[2];let u;e[3]!==i||e[4]!==n?(u=NUe(i,n),e[3]=i,e[4]=n,e[5]=u):u=e[5];let f;e[6]!==u?(f=r.jsx(j,w({},u)),e[6]=u,e[7]=f):f=e[7];let m;return e[8]!==c||e[9]!==s||e[10]!==o||e[11]!==f?(m=r.jsxs(r_,{onClick:c,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:s,showCloseButton:o,type:"go",children:[d,f]}),e[8]=c,e[9]=s,e[10]=o,e[11]=f,e[12]=m):m=e[12],m}function MUe(t){"use forget";const e=G.c(8),{onClose:n,showCloseButton:s}=t,o=ot();let a;e[0]!==o?(a=()=>{xn(o,"thread_header_generic_upgrade_pill_button")},e[0]=o,e[1]=a):a=e[1];const i=a;let l,c;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(o_,{className:"icon-sm"}),c=r.jsx(j,w({},pt.upgrade)),e[2]=l,e[3]=c):(l=e[2],c=e[3]);let d;return e[4]!==i||e[5]!==n||e[6]!==s?(d=r.jsxs(r_,{onClick:i,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,showCloseButton:s,type:"generic",children:[l,c]}),e[4]=i,e[5]=n,e[6]=s,e[7]=d):d=e[7],d}function AUe(t){"use forget";const e=G.c(10),{onClose:n,planType:s,showCloseButton:o}=t,a=V(),i=ot(),c=s&&ze(a,"1288455623").get("enabled",!1)?bUe[s]:pt.upgradeForFree;let d;e[0]!==i?(d=()=>{xn(i,"thread_header_generic_free_trial_upgrade_pill_button")},e[0]=i,e[1]=d):d=e[1];const u=d;let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(o_,{className:"icon-sm"}),e[2]=f):f=e[2];let m;e[3]!==c?(m=r.jsx(j,w({},c)),e[3]=c,e[4]=m):m=e[4];let p;return e[5]!==u||e[6]!==n||e[7]!==o||e[8]!==m?(p=r.jsxs(r_,{onClick:u,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,showCloseButton:o,type:"generic_free_trial",children:[f,m]}),e[5]=u,e[6]=n,e[7]=o,e[8]=m,e[9]=p):p=e[9],p}function r_(t){"use forget";const e=G.c(30),{children:n,className:s,onClick:o,onClose:a,showCloseButton:i,type:l}=t,c=ne(),[d,u]=_.useState(!1),f=i?"py-2 pe-2":"py-2";let m;e[0]!==s||e[1]!==f?(m=W("inline-flex items-center gap-1 rounded-full text-sm font-medium",f,s),e[0]=s,e[1]=f,e[2]=m):m=e[2];const p=m,g=i?"pe-0":"pe-3";let h;e[3]!==g?(h=W("flex items-center gap-1 bg-transparent ps-2.5 text-current focus:outline-none",g),e[3]=g,e[4]=h):h=e[4];const x=h;let v,y;e[5]!==l?(v=()=>{B.logEventWithStatsig("Thread Header Upgrade Pill Button Shown","chatgpt_thread_header_upgrade_pill_button_shown",{type:l})},y=[l],e[5]=l,e[6]=v,e[7]=y):(v=e[6],y=e[7]),_.useEffect(v,y);let b;e[8]!==o||e[9]!==l?(b=()=>{B.logEventWithStatsig("Thread Header Upgrade Pill Button Clicked","chatgpt_thread_header_upgrade_pill_button_clicked",{type:l}),o==null||o()},e[8]=o,e[9]=l,e[10]=b):b=e[10];const C=b;let S;e[11]!==a||e[12]!==l?(S=()=>{B.logEventWithStatsig("Thread Header Upgrade Pill Button Dismissed","chatgpt_thread_header_upgrade_pill_button_dismissed",{type:l}),a()},e[11]=a,e[12]=l,e[13]=S):S=e[13];const k=S;let E,T;e[14]!==i?(T=()=>{if(!i){u(!1);return}if(typeof window>"u"){u(!0);return}const N=window.requestAnimationFrame(()=>{u(!0)});return()=>{window.cancelAnimationFrame(N)}},E=[i],e[14]=i,e[15]=E,e[16]=T):(E=e[15],T=e[16]),_.useEffect(T,E);let M;e[17]!==n||e[18]!==x||e[19]!==C?(M=r.jsx("button",{type:"button",onClick:C,className:x,children:n}),e[17]=n,e[18]=x,e[19]=C,e[20]=M):M=e[20];let A;e[21]!==k||e[22]!==c||e[23]!==d||e[24]!==i?(A=i?r.jsx("button",{type:"button",onClick:k,className:W("ms-0 flex h-4 w-4 items-center justify-center rounded-full text-[black] hover:bg-[#E4E4F6] dark:text-[white] dark:hover:bg-[#414071]","transform transition-all duration-200 ease-out",d?"pointer-events-auto visible translate-x-0 opacity-100":"pointer-events-none invisible -translate-x-1 opacity-0"),"aria-label":c.formatMessage(pt.dismissUpgradeReminder),tabIndex:d?0:-1,children:r.jsx(yUe,{height:20,width:20,color:"text-token-text-primary"})}):null,e[21]=k,e[22]=c,e[23]=d,e[24]=i,e[25]=A):A=e[25];let I;return e[26]!==p||e[27]!==M||e[28]!==A?(I=r.jsxs("div",{className:p,children:[M,A]}),e[26]=p,e[27]=M,e[28]=A,e[29]=I):I=e[29],I}function IUe(t){return Object.values(S$).includes(t)}function jUe(t,e){const n=ze(t,"497415788");return e&&n.get("should_show_upgrade_cta_mobile_web",!1)?pt.upgrade:pt.getPlus}function NUe(t,e){const n=ze(t,"497415788");return e&&n.get("should_show_upgrade_cta_mobile_web",!1)?pt.upgrade:pt.upgradeToGo}var ZE;const PUe=mt.button(ZE||(ZE=ct(["group flex cursor-pointer justify-center items-center gap-1 rounded-lg min-h-9 touch:min-h-10 px-2.5 text-lg hover:bg-token-surface-hover focus-visible:bg-token-surface-hover font-normal whitespace-nowrap focus-visible:outline-none"]))),RUe=t=>{"use forget";const e=G.c(4),{headerTextClassName:n}=t,s=n!=null?n:"px-2.5 text-lg";let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(j,{id:"mhGPZ6",defaultMessage:"ChatGPT"}),e[0]=o):o=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("span",{className:"text-token-text-tertiary ms-1",children:r.jsx(j,{id:"0GIpXd",defaultMessage:"Voice"})}),e[1]=a):a=e[1];let i;return e[2]!==s?(i=r.jsxs("div",{className:s,children:[o,a]}),e[2]=s,e[3]=i):i=e[3],i};function LUe(t,e){var s;const n=e.categories.find(({defaultModel:o,supportedModels:a})=>o===t||(a==null?void 0:a.includes(t)));return(s=n==null?void 0:n.renderHeaderType)!=null?s:ux.SHORT_LABEL}function OUe(t,e){const n=e.groups.find(({modelIds:s})=>s.includes(t));return(n==null?void 0:n.group)!=null}const DUe=R(()=>P(()=>import("./fc5s5wnfjm3vda54.js"),__vite__mapDeps([495,1,10,11])).then(t=>t.GizmoModelPicker)),FUe=t=>{"use forget";const e=G.c(2),{conversation:n,shouldShowFinchSection:s,preferredModelId:o}=t,a=Hb(),i=Wb(n,a,s,void 0,o);let l;return e[0]!==i?(l=r.jsx(Gb,{sections:i}),e[0]=i,e[1]=l):l=e[1],l};function BUe({conversation:t,preferredModelId:e,headerTextClassName:n,chevronClassName:s}){var M;const o=V(),a=ne();gr.useStoreWithInit({});const i=ys(),l=Oc(i),c=_l(i),d=Ph(),u=et(o),f=td(A=>A.shouldShowThreadModelPickerDot),m=Yq((M=Zq(o))==null?void 0:M.user,u),p=ae(()=>bn(t).id),g=ae(()=>ta(t)),{modelLabel:h}=yf(l?null:p,g),x=l?ux.SHORT_LABEL:LUe(p,g),y=!!tt(o)&&!(u!=null&&u.isFree())||m,b=_.useMemo(()=>!tt(o)||!Vde(o,u,d,g)?!1:(Wde()&&!f&&On.setThreadModelPickerAlertDot(!0),!0),[o,u,g,d,f]);if(Ol())return r.jsx(RUe,{headerTextClassName:n});if(c)return r.jsx("div",{className:W("text-token-text-primary px-3",n!=null?n:"text-lg"),children:v_});y&&(va.markStart("ThreadModelSelector"),h!=null&&va.markRendered("ThreadModelSelector"));const S=x===ux.TITLE?r.jsx(r.Fragment,{children:h}):r.jsxs(r.Fragment,{children:[v_," ",r.jsx("span",{className:"text-token-text-tertiary",children:h})]}),k=r.jsx("div",{className:n,children:y&&h!=null?S:v_}),E=!l&&OUe(p,g),T=r.jsxs(PUe,{style:{viewTransitionName:"var(--vt-thread-model-switcher)"},"aria-label":h?a.formatMessage({id:"JrtGPQ",defaultMessage:"Model selector, current model is {modelLabel}"},{modelLabel:h}):a.formatMessage({id:"/D1dJC",defaultMessage:"Model selector"}),children:[E?r.jsx(_t,{label:p,side:"right",children:k}):k,r.jsx(l4,{className:W(s!=null?s:"icon-sm","text-token-text-tertiary")}),f&&r.jsx(cN,{color:"blue",className:"ms-1"})]});return g===void 0?T:r.jsx(Er,{alignOffset:-4,size:"small",triggerButton:T,onOpenChange:A=>{B.logEvent("Toggle Model Switcher",{isOpen:A}),Ye.logEvent("toggle_model_switcher",null,{isOpen:String(A)})},testId:"model-switcher-dropdown",children:r.jsx(FUe,{conversation:t,shouldShowFinchSection:b,preferredModelId:e})})}function Oot(t){"use forget";var d;const e=G.c(12),{conversation:n,textClassName:s,chevronClassName:o}=t,a=V();let i;e[0]!==n?(i=()=>Xc(n),e[0]=n,e[1]=i):i=e[1];const l=ae(i),{data:c}=Si(l);if(l==null||Rl(a,l)){const u=(d=c==null?void 0:c.gizmo.default_model)!=null?d:void 0;let f;return e[2]!==o||e[3]!==n||e[4]!==u||e[5]!==s?(f=r.jsx(BUe,{conversation:n,preferredModelId:u,headerTextClassName:s,chevronClassName:o}),e[2]=o,e[3]=n,e[4]=u,e[5]=s,e[6]=f):f=e[6],f}else{let u;return e[7]!==o||e[8]!==n||e[9]!==l||e[10]!==s?(u=r.jsx(DUe,{gizmoId:l,conversation:n,textClassName:s,chevronClassName:o}),e[7]=o,e[8]=n,e[9]=l,e[10]=s,e[11]=u):u=e[11],u}}const UUe=t=>{const e=[];let n=null;const s={};Ea(()=>zO(t),d=>{d==null||d.forEach(u=>{var f;s[u.id]=(f=u.conversation_id)!=null?f:void 0})},{fireImmediately:!0});const o=d=>{ge.safePost("/feed/interactions",{requestBody:{events:d}})},a=()=>{if(!n)return;const{cardId:d,openTimestamp:u}=n,f=(Date.now()-u)/1e3;e.push({type:"read_expanded",card_id:d,dwell_time_seconds:f,timestamp:new Date().toISOString()}),Fs(t).logEventWithStatsig("(Web) FYP Card Closed","chatgpt_web_fyp_card_closed",{card_id:d,dwell_time_seconds:f,conversation_id:s[d]}),n=null};return{trackCardOpen:d=>{(n==null?void 0:n.cardId)!==d&&(n&&a(),n={cardId:d,openTimestamp:Date.now()},Fs(t).logEventWithStatsig("(Web) FYP Card Opened","chatgpt_web_fyp_card_opened",{card_id:d,conversation_id:s[d]}),Ie.count(je.PULSE,"chatgpt_web_fyp_card_opened"))},trackCardClose:a,trackCardImpression:d=>{e.push({type:"impression",card_id:d,dwell_time_seconds:0,timestamp:new Date().toISOString()}),Fs(t).logEventWithStatsig("(Web) FYP Card Viewed","chatgpt_web_fyp_card_viewed",{card_id:d,conversation_id:s[d]}),Ie.count(je.PULSE,"chatgpt_web_fyp_card_viewed")},trackAndFlushInteractions:()=>{e.length!==0&&(o(e),e.length=0)}}},$Ue=Wn(t=>UUe(t)),VUe=3e3,HUe=()=>{"use forget";const t=G.c(9),e=V();let n;t[0]!==e?(n=$Ue(e),t[0]=e,t[1]=n):n=t[1];const s=n;W3(s.trackAndFlushInteractions,VUe);let o,a;t[2]!==s.trackAndFlushInteractions?(o=()=>{const l=Pf(window,{pagehide:s.trackAndFlushInteractions,beforeunload:s.trackAndFlushInteractions,visibilitychange:s.trackAndFlushInteractions});return()=>{l()}},a=[s.trackAndFlushInteractions],t[2]=s.trackAndFlushInteractions,t[3]=o,t[4]=a):(o=t[3],a=t[4]),_.useEffect(o,a);let i;return t[5]!==s.trackCardClose||t[6]!==s.trackCardImpression||t[7]!==s.trackCardOpen?(i={trackCardOpen:s.trackCardOpen,trackCardClose:s.trackCardClose,trackCardImpression:s.trackCardImpression},t[5]=s.trackCardClose,t[6]=s.trackCardImpression,t[7]=s.trackCardOpen,t[8]=i):i=t[8],i},GUe=R(()=>P(()=>import("./c6dhaujcud77o46h.js"),__vite__mapDeps([496,1,497,10,11,351,352,347,348,349,350,319,0,498,434,71,499,433,394,395,396,500,501,502,503,504,505,506,507,443])).then(t=>t.PulseCardConversationModal));function w$(){"use forget";const t=G.c(17),e=V();let n;t[0]!==e?(n=Oa(e),t[0]=e,t[1]=n):n=t[1];const s=n,{trackCardOpen:o,trackCardClose:a}=HUe();let i;t[2]!==s||t[3]!==a?(i=()=>{Co(()=>{s.isCardModalOpen$.set(!1),s.cardModalState$.set(WO)}),a()},t[2]=s,t[3]=a,t[4]=i):i=t[4];const l=i;let c;t[5]!==e||t[6]!==l||t[7]!==s||t[8]!==o?(c=p=>{o(p),Co(()=>{s.isCardModalOpen$.set(!0),s.cardModalState$.set({activeCardId:p})}),lt(e,GUe,{onClose:l})},t[5]=e,t[6]=l,t[7]=s,t[8]=o,t[9]=c):c=t[9];const d=c;let u;t[10]!==s||t[11]!==o?(u=p=>{s.cardModalState$.set({activeCardId:p}),o(p)},t[10]=s,t[11]=o,t[12]=u):u=t[12];const f=u;let m;return t[13]!==l||t[14]!==d||t[15]!==f?(m={openModal:d,setActiveCardId:f,closeModal:l},t[13]=l,t[14]=d,t[15]=f,t[16]=m):m=t[16],m}const WUe=sn(t=>St(()=>{var n;const e=(n=bm(t).data)==null?void 0:n.items;if(e){const{activeCardId:s}=Oa(t).cardModalState$();if(s)return BQ(e,s)}}));function Dot(t){"use forget";const e=G.c(9),{show:n}=t,s=V(),{setActiveCardId:o}=w$();let a;e[0]!==s?(a=()=>WUe(s),e[0]=s,e[1]=a):a=e[1];const i=ae(a);let l;e[2]!==s||e[3]!==i||e[4]!==o||e[5]!==n?(l=n&&i&&r.jsx(zUe,{onClick:()=>{Fs(s).logEventWithStatsig("(Web) FYP Next Card Pill Tapped","chatgpt_web_fyp_next_card_pill_tapped",{card_id:i.id}),o(i.id)},image:i.image,title:i.title}),e[2]=s,e[3]=i,e[4]=o,e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==l?(c=r.jsx(mn,{children:l}),e[7]=l,e[8]=c):c=e[8],c}const zUe=t=>{"use forget";const e=G.c(13),{image:n,title:s,onClick:o}=t;let a,i,l,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0},i={opacity:1},l={opacity:0},c={duration:.15,ease:"easeInOut"},e[0]=a,e[1]=i,e[2]=l,e[3]=c):(a=e[0],i=e[1],l=e[2],c=e[3]);const d=n==null?void 0:n.url,u=n==null?void 0:n.fallback_url;let f;e[4]!==d||e[5]!==u?(f=r.jsx(hd,{src:d,fallbackSrc:u,className:"h-6 w-6 rounded-sm"}),e[4]=d,e[5]=u,e[6]=f):f=e[6];let m;e[7]!==s?(m=r.jsx("div",{className:"text-sm",children:s}),e[7]=s,e[8]=m):m=e[8];let p;return e[9]!==o||e[10]!==f||e[11]!==m?(p=r.jsxs(Xe.button,{initial:a,animate:i,exit:l,transition:c,className:"border-token-border-heavy bg-token-bg-elevated-primary absolute end-1/2 bottom-[calc(var(--composer-overlap-px)+--spacing(6))] flex translate-x-1/2 items-center justify-center gap-2 rounded-4xl border bg-clip-padding px-4 py-2 shadow-[0_4px_16px_0_rgba(0,0,0,0.05)]",onClick:o,children:[f,m]}),e[9]=o,e[10]=f,e[11]=m,e[12]=p):p=e[12],p},k$=R(()=>P(()=>import("./mqt6tyog32a32zx2.js"),__vite__mapDeps([508,1,10,11,505,506,507,503,504,395,396,319,0,349,350,71,443,351,352,347,348,497,498,434,499,433,394,500,501,502])).then(t=>t.PulseFeedbackConversationModal)),E$=t=>{const e=Oa(t);Co(()=>{e.isFeedbackModalOpen$.set(!1),e.feedbackModalState$.set(GO),e.populatePrompt$.set(void 0)})};function Ky(t){Oa(t).isFeedbackModalOpen$.set(!0),lt(t,k$,{onClose:()=>{E$(t)}})}function Fot(t){E$(t),Ss(t,k$)}const qUe=R(()=>P(()=>import("./km44ch1r0uf907fx.js"),__vite__mapDeps([485,1])),{loading:t=>O(t)}),YUe=R(()=>P(()=>import("./dhbwqfnaau44fo68.js"),__vite__mapDeps([509,1])),{loading:t=>O(t)}),ZUe=R(()=>P(()=>import("./fx3vo65j1l2o1ay3.js"),__vite__mapDeps([486,1])),{loading:t=>O(t)}),KUe=R(()=>P(()=>import("./b865k9nv2k0vznof.js"),__vite__mapDeps([510,1])),{loading:t=>O(t)}),QUe=R(()=>P(()=>Promise.resolve().then(()=>im),void 0),{loading:t=>O(t)}),JUe=R(()=>P(()=>import("./m3zxy9dyzl70pbky.js"),__vite__mapDeps([511,1])),{loading:t=>O(t)}),XUe=R(()=>P(()=>import("./e6iqc9aa2rbtobl6.js"),__vite__mapDeps([512,1])),{loading:t=>O(t)});function e$e({cardId:t}){const e=V(),n=ne(),{mutate:s}=cve(t),{mutate:o}=dve(t),{closeModal:a}=w$(),{data:i}=HO(t),l=Oa(e),c=(i==null?void 0:i.reaction)==="like",d=(i==null?void 0:i.reaction)==="dislike",u=i==null?void 0:i.conversation_id,f=u?At(u):void 0,m=h=>{h==="remove"?Fs(e).logEventWithStatsig("(Web) FYP Card Reaction Undone","chatgpt_web_fyp_card_reaction_undo",{card_id:t,conversation_id:f}):Fs(e).logEventWithStatsig("(Web) FYP Card Reaction Added","chatgpt_web_fyp_card_reaction",{card_id:t,reaction:h,conversation_id:f})},p=h=>{h==="save"?Fs(e).logEventWithStatsig("(Web) FYP Card Saved","chatgpt_web_fyp_card_saved",{card_id:t,conversation_id:f}):Fs(e).logEventWithStatsig("(Web) FYP Card Saved Undone","chatgpt_web_fyp_card_saved_undo",{card_id:t,conversation_id:f})},g=[{key:"upvote",icon:c?YUe:qUe,label:n.formatMessage({id:"wN6PjH",defaultMessage:"Like"}),onClick:()=>{const h=c?"remove":"like";s(h),m(h)}},{key:"downvote",icon:d?KUe:ZUe,label:n.formatMessage({id:"FMxx3D",defaultMessage:"Dislike"}),onClick:()=>{const h=d?"remove":"dislike";s(h),m(h)}},{key:"share",icon:QUe,label:n.formatMessage({id:"BNIqUa",defaultMessage:"Share"}),disabled:!f,onClick:()=>{Fs(e).logEventWithStatsig("(Web) FYP Card Shared","chatgpt_web_fyp_card_shared",{card_id:t,conversation_id:f}),f&&On.openSharingModal(f)}},{key:"save",icon:i!=null&&i.is_saved?XUe:JUe,label:n.formatMessage({id:"Fy5DRu",defaultMessage:"Save"}),onClick:()=>{const h=i!=null&&i.is_saved?"unsave":"save";o(h),p(h),f&&Jo(e).invalidateQueries({queryKey:Tu().queryKey})},additionalText:i!=null&&i.is_saved?n.formatMessage({id:"5bP9LT",defaultMessage:"Saved as chat"}):void 0}];return r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"text-token-text-secondary flex",children:g.map(h=>r.jsxs("div",{className:"flex items-center gap-0.5",children:[r.jsx(_d,{icon:h.icon,label:h.label,disabled:h.disabled,onClick:x=>{x.stopPropagation(),h.onClick()}},h.key),h.additionalText&&r.jsx("span",{className:"text-token-text-secondary text-sm",children:h.additionalText})]},h.key))}),r.jsx("div",{className:W(!d&&"invisible"),"aria-hidden":!d,children:r.jsx(t$e,{onClick:h=>{Co(()=>{l.feedbackModalState$.set({type:al.FeedbackOnCard,cardId:t}),l.populatePrompt$.set({type:"cardReply",cardId:t}),Ky(e),a()}),h.stopPropagation()}})})]})}const t$e=t=>{"use forget";const e=G.c(3),{onClick:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(j,{id:"xh3p31",defaultMessage:"Share your thoughts"}),e[0]=s):s=e[0];let o;return e[1]!==n?(o=r.jsx(_e,{onClick:n,color:"secondary",children:s}),e[1]=n,e[2]=o):o=e[2],o};function Bot({imageSrc:t,fallbackSrc:e,title:n,cardId:s}){return r.jsxs("div",{className:"flex flex-col gap-6 pb-4",children:[r.jsx("div",{className:"relative aspect-[2/1] overflow-hidden rounded-2xl",children:r.jsx(hd,{src:t,fallbackSrc:e,className:"h-full w-full object-cover"})}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-3xl",children:n}),s&&r.jsx(e$e,{cardId:s})]})]})}const A9=R(()=>P(()=>import("./eahncmechdd0yy5s.js"),__vite__mapDeps([24,1])),{loading:t=>O(t)}),n$e=t=>{"use forget";const e=G.c(21),{question:n,suggestions:s}=t,o=V();let a,i,l,c,d;if(e[0]!==o||e[1]!==n||e[2]!==s){const p=Oa(o);let g;e[8]!==s?(g=s.every(s$e),e[8]=s,e[9]=g):g=e[9],i=g,a=(h,x,v)=>{const y=v===void 0?!1:v;Fs(o).logEventWithStatsig("(Web) FYP Feed Survey Tapped","chatgpt_web_fyp_feed_survey_tapped",{isAutoSend:y}),y?Co(()=>{p.feedbackModalState$.set({type:al.FeedbackConversation}),p.autoSendCompletion={userMessage:G6(h),targetedReply:x!=null?x:null},p.shouldAutoSendCompletion$.set(!0),Ky(o)}):Co(()=>{p.populatePrompt$.set({type:"surveyReply",userMessage:G6(h),targetedReply:x!=null?x:null}),Ky(o)})},d="flex w-full flex-col gap-4 py-4",l="grid grid-cols-2 gap-4",c=s.map((h,x)=>{const{text:v,is_auto_send:y,prompt:b}=h;return r.jsx(_e,{icon:y?null:A9,color:"secondary",contentWrapperClassName:"justify-start px-2 py-3 gap-4",iconClassName:"text-token-text-secondary",onClick:()=>a(b!=null?b:v,n!=null?n:null,y),children:v},x)}),e[0]=o,e[1]=n,e[2]=s,e[3]=a,e[4]=i,e[5]=l,e[6]=c,e[7]=d}else a=e[3],i=e[4],l=e[5],c=e[6],d=e[7];let u;e[10]!==a||e[11]!==i||e[12]!==n?(u=!i&&r.jsx(_e,{icon:A9,color:"secondary",className:"text-token-text-secondary",contentWrapperClassName:"justify-start px-2 gap-4",onClick:()=>a("",n!=null?n:null),children:r.jsx(j,{id:"FKKl/d",defaultMessage:"Share anything..."})}),e[10]=a,e[11]=i,e[12]=n,e[13]=u):u=e[13];let f;e[14]!==l||e[15]!==c||e[16]!==u?(f=r.jsxs("div",{className:l,children:[c,u]}),e[14]=l,e[15]=c,e[16]=u,e[17]=f):f=e[17];let m;return e[18]!==d||e[19]!==f?(m=r.jsx("div",{className:d,children:f}),e[18]=d,e[19]=f,e[20]=m):m=e[20],m};function s$e(t){return t.is_auto_send}const Uot=()=>{"use forget";var c,d,u,f,m,p,g,h,x,v,y,b,C,S,k,E,T,M,A,I,N,L,D,F,$;const t=G.c(13),e=V();let n;t[0]!==e?(n=()=>Oa(e).feedbackModalState$(),t[0]=e,t[1]=n):n=t[1];const s=ae(n);let o;t[2]!==e?(o=()=>bm(e),t[2]=e,t[3]=o):o=t[3];const{data:a}=ae(o);let i;t[4]!==s.cardId||t[5]!==s.type||t[6]!==((c=a==null?void 0:a.feedback)==null?void 0:c.suggestions)||t[7]!==((d=a==null?void 0:a.onboarding)==null?void 0:d.image_urls)||t[8]!==((m=(f=(u=a==null?void 0:a.survey)==null?void 0:u.survey_config)==null?void 0:f.overlay_content)==null?void 0:m.body)||t[9]!==((h=(g=(p=a==null?void 0:a.survey)==null?void 0:p.survey_config)==null?void 0:g.overlay_content)==null?void 0:h.title)?(i=(s.type===al.FeedbackPreview||s.type===al.FeedbackOnCard)&&r.jsxs(Xe.div,{className:"bg-token-bg-primary absolute start-0 top-0 z-10 h-full w-full",initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:[s.type===al.FeedbackPreview&&r.jsx(o$e,{title:(y=(v=(x=a==null?void 0:a.survey)==null?void 0:x.survey_config)==null?void 0:v.overlay_content)==null?void 0:y.title,body:(S=(C=(b=a==null?void 0:a.survey)==null?void 0:b.survey_config)==null?void 0:C.overlay_content)==null?void 0:S.body,suggestions:(k=a==null?void 0:a.feedback)==null?void 0:k.suggestions,images:(T=(E=a==null?void 0:a.onboarding)==null?void 0:E.image_urls)==null?void 0:T.map(pA)}),s.type===al.FeedbackOnCard&&r.jsx(a$e,{cardId:s.cardId})]}),t[4]=s.cardId,t[5]=s.type,t[6]=(M=a==null?void 0:a.feedback)==null?void 0:M.suggestions,t[7]=(A=a==null?void 0:a.onboarding)==null?void 0:A.image_urls,t[8]=(L=(N=(I=a==null?void 0:a.survey)==null?void 0:I.survey_config)==null?void 0:N.overlay_content)==null?void 0:L.body,t[9]=($=(F=(D=a==null?void 0:a.survey)==null?void 0:D.survey_config)==null?void 0:F.overlay_content)==null?void 0:$.title,t[10]=i):i=t[10];let l;return t[11]!==i?(l=r.jsx(mn,{mode:"wait",children:i}),t[11]=i,t[12]=l):l=t[12],l},o$e=t=>{"use forget";const e=G.c(30),{title:n,body:s,suggestions:o,images:a}=t,i=V();let l;e[0]!==i?(l=!1,e[0]=i,e[1]=l):l=e[1];const c=l,d=_.useRef(null),u=_.useRef(null),f=_.useRef(null);let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m={firstRef:u,secondRef:d,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},e[2]=m):m=e[2];const p=Gy(m);let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g={firstRef:f,secondRef:u,firstSide:"top",secondSide:"bottom",threshold:30,absolute:!1},e[3]=g):g=e[3];const h=Gy(g),x=p&&"sticky top-0",v=h&&"opacity-10 transition-opacity duration-300";let y;e[4]!==x||e[5]!==v?(y=W("flex h-45 w-full items-center justify-center",x,v),e[4]=x,e[5]=v,e[6]=y):y=e[6];let b;e[7]!==a?(b=a!=null?a:[],e[7]=a,e[8]=b):b=e[8];let C;e[9]!==b?(C=r.jsx(DU,{images:b}),e[9]=b,e[10]=C):C=e[10];let S;e[11]!==y||e[12]!==C?(S=r.jsx("div",{className:y,ref:u,children:C}),e[11]=y,e[12]=C,e[13]=S):S=e[13];let k;e[14]!==n?(k=n&&r.jsx("div",{className:"text-xl font-medium",children:n}),e[14]=n,e[15]=k):k=e[15];let E;e[16]!==s?(E=s&&r.jsx("div",{className:"text-token-text-secondary whitespace-pre-line",children:s}),e[16]=s,e[17]=E):E=e[17];let T;e[18]!==o?(T=o&&r.jsx(n$e,{suggestions:o.map(r$e)}),e[18]=o,e[19]=T):T=e[19];let M;e[20]!==c?(M=!1,e[20]=c,e[21]=M):M=e[21];let A;e[22]!==k||e[23]!==E||e[24]!==T||e[25]!==M?(A=r.jsxs("div",{className:"z-10 flex w-full flex-col gap-4 pb-16",ref:f,children:[k,E,T,M]}),e[22]=k,e[23]=E,e[24]=T,e[25]=M,e[26]=A):A=e[26];let I;return e[27]!==A||e[28]!==S?(I=r.jsxs("div",{className:"relative mx-auto flex h-full w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-visible px-4 py-6",ref:d,children:[S,A]}),e[27]=A,e[28]=S,e[29]=I):I=e[29],I},a$e=t=>{"use forget";var d,u;const e=G.c(6),{cardId:n}=t,{data:s}=HO(n);if(!s)return null;const o=(d=s.image)==null?void 0:d.url,a=(u=s.image)==null?void 0:u.fallback_url;let i;e[0]!==o||e[1]!==a?(i=r.jsx(hd,{src:o,fallbackSrc:a,className:"h-32 w-32",shadow:!0}),e[0]=o,e[1]=a,e[2]=i):i=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsxs("div",{className:"flex w-full flex-col items-center gap-4",children:[r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,{id:"TXCx5u",defaultMessage:"Share what you're thinking"})}),r.jsx("div",{children:r.jsx(j,{id:"bZrGT3",defaultMessage:"Every bit of feedback shapes what shows up next."})})]}),e[3]=l):l=e[3];let c;return e[4]!==i?(c=r.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-8",children:[i,l]}),e[4]=i,e[5]=c):c=e[5],c};function r$e(t){return{text:t,prompt:t,is_auto_send:!1}}function $ot({isSharedConversation:t,clientThreadId:e}){const n=V(),s=ye(n,"2287071194"),o=_.useRef(!1),{clearAllSystemHintModeTriggers:a,setThreadSystemHintMode:i}=oa(),c=Ve(e,u=>he.getLastMessageSystemHints(u)).includes(Pe.Tatertot),d=s&&t&&x3(n)&&c;_.useEffect(()=>{!d||o.current||(a(),i(Pe.Tatertot,!0,{clientThreadId:e}),o.current=!0)},[d,o,e,a,i,c])}const Mp="m",i$e=2e3,l$e="skip_instant_query",c$e="client_reported_search_source",d$e=["gpt-5","gpt-4o","gpt-4-1-mini"],u$e=Kq;function Vot(t){var A;const{clientThreadId:e,handleRequestCompletion:n}=t,s=V(),o=yt(s,e),a=_.useRef(!1),i=_.useRef(null),l=ae(()=>ta(o)),c=Kf.useIsEnabled(e),{isLoading:d,data:u}=Al(),f=Ve(e,he.hasUserMessage),m=PT(u),[p,g]=Us(),h=Ut(),x=ae(()=>Vs(s)),v=p.get(tu),y=p.get(g6)==="ipl";_.useEffect(()=>{M(!0),a.current=!1,i.current=null},[v]);const b=_.useCallback(({content:I,attachments:N},L,D)=>{const F=Kh(),$=N.length>0?{attachments:N}:{};$.system_hints=L.systemHints,Object.keys(F).length>0&&($.__internal={search_settings:F});const{extraStreamParams:H}=a1(L.systemHints?L.systemHints:[],{enableMessageFollowups:c});n({promptMessage:ls(I,$,y?{real_author:r3.IPL}:void 0),requestedModelId:D,eventSource:"url",completionMetadata:L,extraStreamParams:H})},[n,c,y]),C=(A=C8(()=>window.location.pathname))!=null?A:null,S=u$e(),k=!d&&C!=null,E=q3(),[T,M]=_.useState(!0);return _.useEffect(()=>{var me,xe,pe,Ee,Se,Te,Ne;if(!T||a.current)return;const I=(me=ft(e))==null?void 0:me.mode;if(!k||I==null||(p.has(cv)||p.has(Qq))&&x==null)return;if(!m$e(C)||f$e(C)&&S===void 0||At(e)!=null){M(!1);return}const L=(()=>{try{return Object.fromEntries(new URLSearchParams(location.hash.slice(1)).entries())}catch(De){return{}}})(),D=w(w({},Object.fromEntries(p)),L),{[tu]:F,[Mp]:$,model:H,[l$e]:z,[c$e]:K,[b_]:J}=D,Z=(xe=typeof F=="string"?F:null)!=null?xe:typeof $=="string"?$:null,q=Object.values(of).includes(K)?K:void 0,se=J!==void 0;if(!Z||!Z.trim()){M(!1);return}else i.current=Date.now();const ie=Jq(p,{availableHints:x});a.current=!0;const ee=ie.find(_l),le=nF(H!=null?H:null,ee),X=E.secFetchSite==="same-site"||E.secFetchSite==="none"&&(((Ee=(pe=document==null?void 0:document.documentElement)==null?void 0:pe.dataset)==null?void 0:Ee.searchExtension)==="1"||oM());let te=!se&&X;if(le&&(te=!1),yn()&&(te=!1),!te){g(De=>{const de=new URLSearchParams(De);return de.delete(tu),de.delete(Mp),de.delete(g6),de.delete(b_),de.append("prompt",Z),de}),M(!1),se||Re.addAction("pageload-completion.disallowed",{secFetchSite:E.secFetchSite,referrer:document.referrer});return}const ce=ie.includes(Pe.Search);let ue=_M(l);if(ce&&l){const De=d$e.map(de=>l.models.get(de)).find(de=>{var oe;return(oe=de==null?void 0:de.enabledTools)==null?void 0:oe.includes(il.Search)});if(De)ue=De;else if(!((Se=ue==null?void 0:ue.enabledTools)!=null&&Se.includes(il.Search))){for(const de of l.models.values())if((Te=de.enabledTools)!=null&&Te.includes(il.Search)){ue=de;break}}}((Ne=t.prefetchSearchThreadIdPromise)!=null?Ne:Promise.resolve(null)).then(De=>{var oe;g(we=>{const Ce=new URLSearchParams(we);return Ce.delete(tu),Ce.delete(Mp),Ce.delete("skip_instant_query"),Ce.delete(b_),ue&&Ce.append("model",ue.id),Ce});const de=q!=null?q:ce?of.URL_SEARCH_HINT:void 0;b({content:Z,attachments:[]},{conversationMode:I,source:z?void 0:"instant-query",systemHints:ie,prefetchIds:De!=null?[De]:void 0,searchSource:de},(oe=ue==null?void 0:ue.id)!=null?oe:void 0),De!=null&&Re.addFirstTiming("createCompletion.prefetchSearch")})},[d,k,C,l,m,b,T,e,S,E.secFetchSite,h,t.prefetchSearchThreadIdPromise,p,g,x]),T&&(t.prefetchSearchThreadIdPromise!=null||p.has(tu)||p.has(Mp)?!0:i.current?f||Date.now()-i.current>i$e?(i.current=null,M(!1),!1):!0:!1)}function f$e(t){return T$(t)}function T$(t){return t==null?!1:/^\/g\/[\w-]+$/.test(t)}function m$e(t){return t==null?!1:t==="/"||T$(t)}const p$e="webrtc-cert-db",g$e=1,yd="certs",I9="ecdsa-p256:v1",h$e={name:"ECDSA",namedCurve:"P-256",expires:365*24*60*60*1e3};function _$e(){return new Promise((t,e)=>{const n=indexedDB.open(p$e,g$e);n.onupgradeneeded=()=>{const s=n.result;s.objectStoreNames.contains(yd)||s.createObjectStore(yd)},n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)})}function x$e(t,e){return new Promise((n,s)=>{const a=t.transaction(yd,"readonly").objectStore(yd).get(e);a.onsuccess=()=>n(a.result),a.onerror=()=>s(a.error)})}function y$e(t,e,n){return new Promise((s,o)=>{const i=t.transaction(yd,"readwrite").objectStore(yd).put(n,e);i.onsuccess=()=>s(),i.onerror=()=>o(i.error)})}function M$(t){const e=Date.now();return t.expires<=e}async function v$e(){try{"storage"in navigator&&"persist"in navigator.storage&&await navigator.storage.persist()}catch(t){Bt.certificateLocalDb.saveFailed(t)}}async function j9(t){const e=await RTCPeerConnection.generateCertificate(t);return Bt.certificateLocalDb.generated(),e}async function b$e(t={}){const{generationParams:e=h$e,disablePersistence:n=!1}=t;if(!n&&"indexedDB"in window)try{await v$e();const s=await _$e(),o=await x$e(s,I9);if(o&&!M$(o))return Bt.certificateLocalDb.hit(),o;const a=await j9(e);return y$e(s,I9,a).catch(i=>{Bt.certificateLocalDb.saveFailed(i)}),a}catch(s){Bt.certificateLocalDb.loadFailed(s)}return j9(e)}let Du,Ya;const ih=Be(!0);function N9(t,e){b$e({generationParams:{name:"ECDSA",namedCurve:"P-256"}}).then(n=>{Ya=n}).catch(n=>{t.current||(t.current=!0,Bt.certificateCache.unsupported(n))}).finally(()=>{e.current=!1})}function P9(){try{Du=A$.createPeerConnection("cache"),ih.set(!1)}catch(t){Bt.peerConnectionCache.unsupported(t)}}const Hot=()=>{const t=V(),e=_.useRef(!1),n=_.useRef(!1),s=tt(t),o=ae(ih),a=ye(t,"1863841549"),i=ye(t,"2777663391");return _.useEffect(()=>{s&&(a&&!e.current&&Ya===void 0?(e.current=!0,h6(t,"defer-pc")?lf.postTask(()=>N9(n,e)):N9(n,e)):a||Bt.certificateCache.disabled())},[t,a,s]),_.useEffect(()=>{s&&i&&o&&(h6(t,"defer-pc")?lf.postTask(()=>P9()):P9())},[t,i,o,s]),null};function C$e(t){return!(!t||t.signalingState==="closed"||t.connectionState!=="new"||t.iceConnectionState!=="new")}const A$={createPeerConnection:t=>(Ya&&M$(Ya)&&(Bt.certificateCache.expired({expires:Ya.expires}),Ya=void 0),Ya===void 0?(Bt.certificateCache.miss({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle"})):(Bt.certificateCache.hit({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle",certificates:[Ya]}))),getFreshPeerConnection:t=>{try{return C$e(Du)?(Bt.peerConnectionCache.hit(),Du):(Bt.peerConnectionCache.miss(),A$.createPeerConnection(t))}finally{ih.set(!0),Du=void 0}},resetAll:()=>{Du=void 0,Ya=void 0,ih.set(!0)}},Got=()=>{const t=V(),e=Q1(t);return _.useEffect(()=>{hv.set(e?"transceiver":"livekit")},[e]),null};function S$e(t){const e=V();return ae(()=>bn(yt(e,t)).id)}async function w$e(){try{return(await navigator.permissions.query({name:"microphone"})).state}catch(t){return bi.info("Failed to check microphone permission state",t),"unknown"}}const Ap=Be(void 0),k$e=1e3*60*9,E$e=Be([]),T$e=Be([]),Wot=Be(void 0),R9=Be([]);function M$e(t,e){return t.includes(e)?t:[...t,e]}function A$e(t,e){return t.includes(e)?t.filter(n=>n!==e):t}function lh(...t){bi.debug("[Status Cache]",...t)}function I$e(t){const e=is(t,"2943229081");return{"require-voice-used-recently":e.get("require-voice-used-recently",!1),"voice-used-within-past-days":e.get("voice-used-within-past-days",7),"enable-cache-for-gpts":e.get("enable-cache-for-gpts",!1),"enable-cache-for-new-users":e.get("enable-cache-for-new-users",!1),"new-user-within-past-days":e.get("new-user-within-past-days",7),"voice-status-cache-ttl-ms":e.get("voice-status-cache-ttl-ms",k$e),"enable-cache-if-mic-granted":e.get("enable-cache-if-mic-granted",!1)}}function j$e(t,e){var l;const n=t["enable-cache-for-new-users"],s=t["new-user-within-past-days"];if(!n)return!1;const o=((l=e==null?void 0:e.created)!=null?l:0)*1e3,a=Date.now()-o;return Math.floor(a/(1e3*60*60*24))<s}function N$e(t,e){const n=t["require-voice-used-recently"],s=t["voice-used-within-past-days"],o=s*24*60*60*1e3;if(e&&!n)return lh("User using transceiver and recency not required, prefetch OK"),!0;const a=gt.getItem(Ue.VoiceLastUsed),i=a?new Date(a):null,l=i?i.getTime()>Date.now()-o:!1;return lh("User ".concat(l?"passes":"fails"," recency requirement, prefetch ").concat(l?"OK":"SKIP"),{voiceUsedWithinDays:s,lastUsedVoiceDate:i}),l}const zot=({conversationId:t})=>{var T;const e=V(),{voiceName:n}=F1(),s=Qn(t),o=PEe(),a=_.useRef(!1),i=Sl(M=>M.isVoiceModeActive),l=Nh(),c=(T=S$e(t))!=null?T:Xq,d=Q1(e),u=_.useMemo(()=>I$e(e),[e]),f=cn(),m=u["voice-status-cache-ttl-ms"],p=ye(e,"2209667701"),g=tt(e),h=Ve(s,M=>!!(M&&M.isLoading===!1))||Cr(t),x=_.useMemo(()=>{const M=u["enable-cache-for-gpts"],A=N$e(u,d),I=j$e(u,f),N=!!l,L=[];return L.push(!p&&"gate-disabled"),!A&&!I&&(L.push("not-voice-used-recently"),L.push("fails-new-user-requirement")),L.push(!M&&N&&"is-custom-gpt"),L.push(!g&&"logged-out"),L.filter(D=>typeof D=="string")},[l,d,u,f,p,g]),[v,y]=_.useState([]);_.useEffect(()=>{const M=u["enable-cache-if-mic-granted"];g&&p&&M?w$e().then(A=>{y(A==="granted"?I=>M$e(I,"mic-granted"):I=>A$e(I,"mic-granted"))}):y(A=>A.length>0?[]:A)},[u,p,g]);const b=_.useMemo(()=>({conversation_id:s!=null?s:null,requested_voice_mode:"advanced",gizmo_id:l!=null?l:null,voice:n!=null?n:null,requested_default_model:c}),[s,n,l,c]),[C,S]=_.useState(!0),k=_.useRef(void 0),E=_.useRef(void 0);return _.useEffect(()=>{S(!0)},[b]),_.useEffect(()=>{if(!h)return;E$e.set(x),T$e.set(v),lh("Eligibility snapshot",{eligibleReasons:v,ineligibleReasons:x}),x.length>0&&v.length===0&&Ap.set(void 0);const M=x.length===0||v.length>0,A=!i&&M&&C,I=a.current;!A||I||(a.current=!0,lh("Prefetching voice status"),o(b,"voice-status-cache").then(N=>{R9.set([]);const{chatreq:L}=N;Ap.set(U(w({},N),{proofOfWorkPromise:new Promise((D,F)=>{L?yr.getEnforcementToken(L).then(D).catch(F):D(null)})})),k.current=Date.now(),S(!1),clearTimeout(E.current),E.current=setTimeout(()=>{var F;const D=(F=k.current)!=null?F:0;Date.now()-D>=m&&(Ap.set(void 0),S(!0),eY().then($=>{Re.addAction("voice-status-cache-stale",{conversationId:b.conversation_id,protocol:$,ttlMs:m})}))},m)}).catch(N=>{var L;N.code==="conversation_not_found"?Re.addAction("voice-status-cache-conversation-not-found",{conversationId:b.conversation_id}):Bt.voiceStatusCache.error(N),R9.set([(L=N.code)!=null?L:"unknown error"]),Ap.set(void 0)}).finally(()=>{a.current=!1}))},[o,b,x,v,i,C,m,h]),_.useEffect(()=>()=>{clearTimeout(E.current)},[]),null};function qot(){const t=V(),e=ye(t,"733205176"),n=ye(t,"3500862873"),s=ye(t,"2017435557"),o=e||s||n;_.useEffect(()=>{if(!o)return;const a=i=>{var m,p,g,h,x,v,y,b;const l=i.payload.conversation_id,c=i.payload.update_content,d=i.payload.update_type;if(d==="refetch-conversation"){Ma(l,{skipIfExisting:!1});return}if(d==="async-task-update-message"){const C=c.message;if(!C)return;Ze(l,S=>{dn.updateTree(S,k=>{k.updateNodeMessage(C.id,C)})}),(m=C.metadata)!=null&&m.async_task_id&&((p=C.metadata)!=null&&p.async_task_title)&&As.setTaskTitle(C.metadata.async_task_id,C.metadata.async_task_title),C.status==="finished_successfully"&&((g=C.metadata)!=null&&g.async_task_id)&&((h=C.metadata)==null?void 0:h.async_task_type)===fo.IMAGE_GEN&&As.setTaskCompleted(C.metadata.async_task_id,C)}const u=yt(t,l);if(j$(u).set(Date.now()),d==="add-messages"){let C=c.messages;if(!(C!=null&&C.length))return;const S=C.filter(E=>{var T;return(T=E.metadata)==null?void 0:T.async_completion_id});if(S.length>0){for(const E of S)(x=E.metadata)!=null&&x.async_completion_id&&As.setTaskCompleted((v=E.metadata)==null?void 0:v.async_completion_id,E);og(t)&&(Ze(l,E=>{dn.setShouldRefetchConvoOnFinalize(E,!0)}),C=C.filter(E=>{var T;return!((T=E.metadata)!=null&&T.async_completion_id)}))}I$(u).set(E=>{if(!C.length)return E;const T=new Map(E.map(L=>[L.id,L]));for(const L of C)T.set(L.id,L);const M=E.map(L=>L.id),A=M.map(L=>T.get(L)).filter(Boolean),I=C.filter(L=>!M.includes(L.id));return[...A,...I]})}if(d==="async-task-start"&&As.setTask(c.async_task_id,{originalConversationId:l,taskId:c.async_task_id,title:c.title,prompt:c.prompt,status:An.CREATED,createdAt:c.created_at,updatedAt:c.created_at,originalConversationUserMessageId:c.original_conversation_user_message_id}),d==="async-task-title"&&As.setTaskTitle(c.async_task_id,c.title),d==="async-task-completed"){const C=c.message;if(!C)return;(y=C.metadata)!=null&&y.async_completion_id&&As.setTaskCompleted((b=C.metadata)==null?void 0:b.async_completion_id,C),Ze(l,S=>{og(t)?dn.setShouldRefetchConvoOnFinalize(S,!0):dn.updateTree(S,(k,E)=>{if(k.getNodeIfExists(C.id))k.updateNodeMessage(C.id,C);else return k.addMessageNode(E,C),C.id})})}if(d==="title-update"){const C=c.title;if(!C)return;Av(t,l,C,mh.Server)}if(d==="set-conversation-async-status"&&"conversation_async_status"in c){const C=c.conversation_async_status,S=C?{value:C,source:ns.SERVER}:null;Is(l,S);const k=M3(l);k!==l&&Is(k,S)}if(d==="moderation-response")try{const C=c.moderation_event,S=RA(C);if((S==null?void 0:S.type)!=="moderation")throw new Error("Expected moderation type but got ".concat(S==null?void 0:S.type));RM(S,l)}catch(C){}};return bM.on("conversation-update",a)},[t,o])}const P$e=Object.freeze([]),K2=10*1e3,R$e=200*1e3,I$=Af(()=>Be([])),j$=Af(()=>Be(null));function Yot(t){"use forget";var X;const e=G.c(48),n=V(),s=ae(t.serverId$),a=((X=Wh(s))==null?void 0:X.value)===Xt.REALTIME;let i;e[0]!==n?(i=te=>{var ue,me,xe;const ce=(ue=he.getCurrentNode(te))==null?void 0:ue.message;return[ce!=null?G4e(ce):0,ce!=null?fy(ce,n):0,ce!=null?B5(ce,n):null,ce!=null?"".concat(ce.id,":").concat(ce.create_time):null,ce!=null?(me=ce.author)==null?void 0:me.role:null,ce!=null?ce.channel:null,(xe=he.lastUserMessage(te))==null?void 0:xe.id]},e[0]=n,e[1]=i):i=e[1];const[l,c,d,u,f,m,p]=Ve(s,i);let g;e[2]!==t?(g=()=>t?j$(t)():null,e[2]=t,e[3]=g):g=e[3];const h=ae(g),x=d!=null?d*60*1e3:R$e,[v,y]=_.useState(!1),[b,C]=_.useState(!1),[S,k]=_.useState(!1),E=_.useRef(null);let T;e[4]!==s?(T=()=>{if(y(!1),!s)return;const te=setTimeout(()=>{C(!0)},K2);return()=>{clearTimeout(te),C(!1)}},e[4]=s,e[5]=T):T=e[5];let M;e[6]!==p||e[7]!==s?(M=[s,p],e[6]=p,e[7]=s,e[8]=M):M=e[8],_.useEffect(T,M);let A;e[9]!==a||e[10]!==x||e[11]!==l||e[12]!==s?(A=()=>{if(s==null||!a||!l){k(!1);return}k(!1);let te=null;const ce=window.setTimeout(()=>{k(!0),Ie.count(je.DEFAULT,"chatgpt_web_websocket_timeout_reached"),te=window.setTimeout(()=>{k(!1),Ie.count(je.DEFAULT,"chatgpt_web_websocket_timeout_max_duration")},x)},l);return()=>{window.clearTimeout(ce),te&&window.clearTimeout(te)}},e[9]=a,e[10]=x,e[11]=l,e[12]=s,e[13]=A):A=e[13];let I;e[14]!==a||e[15]!==h||e[16]!==x||e[17]!==l||e[18]!==s?(I=[s,a,l,h,x],e[14]=a,e[15]=h,e[16]=x,e[17]=l,e[18]=s,e[19]=I):I=e[19],_.useEffect(A,I);const N=s!==void 0&&s!=null&&a&&(v&&b||S);let L;e[20]!==t?(L=()=>t?I$(t)():P$e,e[20]=t,e[21]=L):L=e[21];const D=ae(L),F=c&&c>0?c:K2,$=S?F:K2,H=s!=null?s:"missing";let z;e[22]!==H?(z=zh({clientThreadId:H,alwaysForceUpdate:!0}),e[22]=H,e[23]=z):z=e[23];let K;e[24]!==N||e[25]!==$||e[26]!==z?(K=U(w({},z),{enabled:N,refetchInterval:$,staleTime:$}),e[24]=N,e[25]=$,e[26]=z,e[27]=K):K=e[27];const{data:J}=rt(K);let Z,q;e[28]!==J?(Z=()=>{J&&y(!1)},q=[J],e[28]=J,e[29]=Z,e[30]=q):(Z=e[29],q=e[30]),_.useEffect(Z,q);let se;e[31]!==f||e[32]!==m||e[33]!==u||e[34]!==s||e[35]!==S?(se=()=>{if(!s){E.current=null;return}S&&f==="assistant"&&m==="final"&&u&&u!==E.current&&(B.logEventWithStatsig("chatgpt_web_polled_for_final_assistant_message","chatgpt_web_polled_for_final_assistant_message",{conversationId:s}),Ie.count(je.DEFAULT,"chatgpt_web_polled_for_final_assistant_message")),E.current=u},e[31]=f,e[32]=m,e[33]=u,e[34]=s,e[35]=S,e[36]=se):se=e[36];let ie;e[37]!==F||e[38]!==f||e[39]!==m||e[40]!==u||e[41]!==s||e[42]!==S?(ie=[u,f,m,S,s,F],e[37]=F,e[38]=f,e[39]=m,e[40]=u,e[41]=s,e[42]=S,e[43]=ie):ie=e[43],_.useEffect(se,ie);let ee,le;e[44]!==D||e[45]!==s?(ee=()=>{if(!D.length||!s)return;const te=D;te.length&&Ze(s,ce=>{dn.updateTree(ce,(ue,me)=>{let xe=me;const pe=Ee=>{var Se;if(Ee.id!==me){if((Se=Ee.metadata)!=null&&Se.append_to_end&&ue.getNodeIfExists(me)){xe=ue.addMessageNode(me,Ee);return}y(!0)}};if(te.forEach(Ee=>{var De,de;const Se=lo(Ee),Te=ue.getNodeIfExists(Se.id);let Ne=(De=Se.metadata)==null?void 0:De.parent_id;if(Te&&Te.id===me&&Te.parentId&&(Ne=Te.parentId),Ne)if(ue.getNodeIfExists(Se.id)){const oe=ue.getNodeByIdOrMessageId(Se.id);if(oe.message.create_time&&Se.create_time&&oe.message.create_time>Se.create_time)return;if(oe.parentId!==Ne){if(!ue.getNodeIfExists(Ne)){y(!0);return}ue.moveNode(Ne,oe.id),xe=ue.getLeafFromNodeAvoidingPlaceholders(oe.id).id;const Ce=ue.getNodeByIdOrMessageId(Ne).children.map(fe=>ue.getNodeIfExists(fe)).filter(fe=>(fe==null?void 0:fe.id)!==oe.id).find(O$e);Ce&&(ue.moveNode(xe,Ce.id),xe=ue.getLeafFromNodeAvoidingPlaceholders(Ce.id).id)}ue.updateNodeMessage(Se.id,Se)}else if(ue.getNodeIfExists(Ne)){const oe=ue.getNodeByIdOrMessageId(Ne);(de=oe.message.clientMetadata)!=null&&de.isOptimistic&&oe.children.forEach(Ce=>{var re;const fe=ue.getNodeIfExists(Ce);(re=fe==null?void 0:fe.message.clientMetadata)!=null&&re.isPlaceholder&&ue.deleteNode(fe.id)}),xe=ue.addMessageNode(Ne,Se);const we=oe.children.map(Ce=>ue.getNodeIfExists(Ce)).find(L$e);we&&(ue.moveNode(xe,we.id),xe=ue.getLeafFromNodeAvoidingPlaceholders(we.id).id)}else pe(Se);else{pe(Se);return}}),xe!==me)return xe})})},le=[D,s],e[44]=D,e[45]=s,e[46]=ee,e[47]=le):(ee=e[46],le=e[47]),_.useEffect(ee,le)}function L$e(t){var e;return(e=t==null?void 0:t.message.clientMetadata)==null?void 0:e.isOptimistic}function O$e(t){var e;return(e=t==null?void 0:t.message.clientMetadata)==null?void 0:e.isOptimistic}function Zot(){const t=V();_.useEffect(()=>{const e=n=>{const s=n.payload.conversation_id,o=n.payload.update_content,a=n.payload.update_type;if(a==="chime-start-task"){const i=o.task_id,l=o.initiating_message_id;Ze(s,c=>{c&&(c.asyncTurns||(c.asyncTurns={}),c.asyncTurns[i]?(c.asyncTurns[i].status="streaming_cot_messages",c.asyncTurns[i].initiatingMessageId=l):c.asyncTurns[i]={turnId:i,messages:{},title:o.title,status:"streaming_cot_messages",initiatingMessageId:l})})}if(a==="chime-update-title"){const i=o.task_id,l=o.title;Ze(s,c=>{var u;if(!c)return;const d=(u=c.asyncTurns)==null?void 0:u[i];d&&(d.title=l)})}if(a==="chime-cot-message-add"||a==="chime-final-message-add"){const i=o.task_id,l=o.message;Ze(s,c=>{var u;if(!c)return;const d=(u=c.asyncTurns)==null?void 0:u[i];d&&(d.status="streaming_cot_messages",d.messages[l.id]=l,a==="chime-final-message-add"&&(d.status="streaming_final_message",c.tree.getNodeIfExists(l.id)?dn.updateTree(c,m=>{l.metadata||(l.metadata={}),m.updateNodeMessage(l.id,l)}):dn.appendMessage(c,l),l.status==="finished_successfully"&&(d.status="done")))})}};return bM.on("conversation-update",e)},[t])}const D$e=R(()=>{const t=P(()=>import("./m9mi9hq5de6arh0x.js"),__vite__mapDeps([513,1,10,11,41,406,403,113,407,408,67])).then(e=>e.NewUserPersonalityOnboarding);return t.catch(e=>{Re.addAction("chatgpt_personality_upsell_load_error",{cause:e.message}),B.logEventWithStatsig("Web: Personality Upsell: Load Error","chatgpt_personality_upsell_load_error",{cause:e.message})}),t}),F$e=["default","listener","nerd","cynic","robot"],L9={default:be({title:{id:"personality-onboarding_personality_default_title",defaultMessage:"Default"},subtitle:{id:"personality-onboarding_personality_default_subtitle",defaultMessage:"Flexible and helpful"}}),listener:be({title:{id:"personality-onboarding_personality_listener_title",defaultMessage:"Listener"},subtitle:{id:"personality-onboarding_personality_listener_subtitle",defaultMessage:"Reflective and supportive"}}),nerd:be({title:{id:"personality-onboarding_personality_nerd_title",defaultMessage:"Nerd"},subtitle:{id:"personality-onboarding_personality_nerd_subtitle",defaultMessage:"Curious and analytical"}}),cynic:be({title:{id:"personality-onboarding_personality_cynic_title",defaultMessage:"Cynic"},subtitle:{id:"personality-onboarding_personality_cynic_subtitle",defaultMessage:"Blunt and practical"}}),robot:be({title:{id:"personality-onboarding_personality_robot_title",defaultMessage:"Robot"},subtitle:{id:"personality-onboarding_personality_robot_subtitle",defaultMessage:"Precise and efficient"}})},B$e=be({line1:{id:"personality-onboarding_personality_default_intro_1",defaultMessage:"Hi, Im ChatGPT. I can help you brainstorm ideas, explain tricky concepts, or tackle everyday tasks like writing, planning, or organizing your thoughts."},line2:{id:"personality-onboarding_personality_default_intro_2",defaultMessage:"You can keep it simple with one quick question or build something with me over timeIll roll with it either way."},line3:{id:"personality-onboarding_personality_default_intro_3",defaultMessage:"I can remember what matters to you, go deep on a specific topic, or just be a quick sounding board when you need one."}}),U$e=be({line1:{id:"personality-onboarding_personality_listener_intro_1",defaultMessage:"Hi, Im ChatGPT. Im here to listen closely, reflect what I hear, and help you sort through whats on your mind."},line2:{id:"personality-onboarding_personality_listener_intro_2",defaultMessage:"You can use me to talk things through, set intentions, or give shape to your thoughts at your own pace."},line3:{id:"personality-onboarding_personality_listener_intro_3",defaultMessage:"If youd like, I can help turn those reflections into clear next steps, plans, or messages."}}),$$e=be({line1:{id:"personality-onboarding_personality_nerd_intro_1",defaultMessage:"Hey! Im ChatGPT. I love digging into ideasbig, tiny, weird, or wonderfully specific."},line2:{id:"personality-onboarding_personality_nerd_intro_2",defaultMessage:"Bring me a question and well break it down, chase connections, and build something together."},line3:{id:"personality-onboarding_personality_nerd_intro_3",defaultMessage:"Whether its research, strategy, or some obscure rabbit hole, Ill happily nerd out right beside you."}}),V$e=be({line1:{id:"personality-onboarding_personality_cynic_intro_1",defaultMessage:"Oh. Hi. Im ChatGPT. Ill give you the useful parts and skip the fluff."},line2:{id:"personality-onboarding_personality_cynic_intro_2",defaultMessage:"Toss me your ideasIll poke at the weak spots, call out nonsense, and help you make it sharper."},line3:{id:"personality-onboarding_personality_cynic_intro_3",defaultMessage:"Im good for gut-checking plans, catching blind spots, and giving it to you straight."}}),H$e=be({line1:{id:"personality-onboarding_personality_robot_intro_1",defaultMessage:"Hello. I am ChatGPT, a language model optimized for structured, accurate output."},line2:{id:"personality-onboarding_personality_robot_intro_2",defaultMessage:"Give me instructions and I will execute themwriting, summarizing, calculating, or retrieving data."},line3:{id:"personality-onboarding_personality_robot_intro_3",defaultMessage:"No chatter. No detours. Just fast, clean answers and exactly what you asked for."}}),G$e={default:Object.values(B$e),listener:Object.values(U$e),nerd:Object.values($$e),cynic:Object.values(V$e),robot:Object.values(H$e)};function W$e(){return F$e.map(t=>({key:t,label:L9[t].title.defaultMessage,description:L9[t].subtitle.defaultMessage,legacy_messages:G$e[t],type:"legacy"}))}function z$e(t){const e={openedAt:Date.now(),closedAt:null,hasLoggedImpression:!1,increment:(n,s,o)=>{var a,i;n==="personality"?(e.selectionCounts[s]=((a=e.selectionCounts[s])!=null?a:0)+1,B.logEventWithStatsig("Web: Personality Selection: Personality Selected","chatgpt_personality_onboarding_personality_selection",{personality:s}),Re.addAction("chatgpt_personality_onboarding_personality_selection",{personality:s,platform:"web"})):(e.selectionCounts[s]=((i=e.selectionCounts[s])!=null?i:0)+1,B.logEventWithStatsig("Web: Personality Selection: Trait Selected","chatgpt_personality_onboarding_trait_selection",{trait:s,level:o}),Re.addAction("chatgpt_personality_onboarding_trait_selection",{trait:s,level:o,platform:"web"}))},log:n=>{switch(n){case"impression":{if(e.hasLoggedImpression)return;e.hasLoggedImpression=!0,B.logEventWithStatsig("Web: Personality Selection: Onboarding Shown","chatgpt_personality_onboarding_modal_impression"),Re.addAction("chatgpt_personality_onboarding_modal_impression",{platform:"web"});break}case"skip":{B.logEventWithStatsig("Web: Personality Selection: Skip","chatgpt_personality_onboarding_skip"),Re.addAction("chatgpt_personality_onboarding_skip",{platform:"web"});break}}},mode:t,selectionCounts:{},finalSelection:null,wasSubmitted:!1};return e}function Kot(t,e,n){t.closedAt=Date.now(),t.wasSubmitted=e,n&&(t.finalSelection=n)}function q$e(t){if(!t.closedAt||!t.openedAt)return null;const e=t.closedAt-t.openedAt;return e<3e4?"under_30_seconds":e<6e4?"30_60_seconds":e<5*6e4?"1_5_minutes":"5_plus_minutes"}async function Qot(t){var c;await lf.yield();const{mode:e,finalSelection:n,wasSubmitted:s}=t,o=(c=q$e(t))!=null?c:null,a=s?"success":"failure",i=e==="personality"?"Web: Personality Selection: Continue":"Web: Traits Selection: Continue",l=s?"chatgpt_personality_onboarding_submit":"chatgpt_personality_onboarding_cancel";B.logEventWithStatsig(i,l,{outcome:a,mode:e,duration_bucket:o,opened_at:t.openedAt,closed_at:t.closedAt,selection_type:n,selection_counts:t.selectionCounts}),s&&Re.addAction("chatgpt_personality_onboarding_continue",{mode:e,duration_bucket:o,opened_at:t.openedAt,closed_at:t.closedAt,selection_type:n,selection_counts:t.selectionCounts})}function L4(){return es({queryKey:["personalityOnboarding"],queryFn:()=>ge.safeGet("/personality_onboarding")})}sn(t=>ka(t,()=>L4()));class Y$e{constructor(e,n,s,o={}){Q(this,"selectedPersonality$");Q(this,"selectedTraits$");Q(this,"serverData$");Q(this,"logging");Q(this,"mode");Q(this,"isLegacy$");Q(this,"mockData$");Q(this,"serverDataPromise");Q(this,"intervalSec$",St(()=>{var n,s;return(s=(n=this.serverData$().data)==null?void 0:n.interval_sec)!=null?s:4}));Q(this,"personalities$",St(()=>{var s,o,a;let e=[],n=this.selectedPersonality$();if(this.isLegacy$())e=W$e();else{const i=this.mockData$(),l=i?{data:i}:null,c=l!=null?l:this.serverData$();(s=c.data)!=null&&s.default_personality_key&&(n=c.data.default_personality_key),e=(a=(o=c.data)==null?void 0:o.personalities)!=null?a:[]}return e.map(i=>U(w({},i),{selected$:Be(n===i.key)}))}));Q(this,"traits$",St(()=>{const e=this.mockData$(),n=e?{data:e}:null,s=n!=null?n:this.serverData$();return!s||!s.data||!s.data.traits?[]:s.data.traits.map(o=>U(w({},o),{selected$:Be(this.selectedTraits$().includes(o.key))}))}));var a,i,l,c;this.ctx=e,this.flow=n,this.selectedPersonality$=Be((a=o.selectedPersonality$)!=null?a:null),this.selectedTraits$=Be((i=o.selectedTraits$)!=null?i:[]),this.mode=s,this.logging=z$e(s),this.isLegacy$=Be((l=o.isLegacy$)!=null?l:!1),this.mockData$=Be((c=o.mockData$)!=null?c:null),this.serverData$=n==="legacy-new-user-personality-flow"?ka(e,()=>es({queryKey:["personalityOnboarding_legacy"],queryFn:()=>null})):ka(e,()=>L4()),this.serverDataPromise=this.watchServerData(),ze(e,"2874358162")}watchServerData(){let e,n;const s=new Promise((o,a)=>{e=o,n=a});return Dl(()=>{const o=this.serverData$();o.status==="success"?e(o.data):o.status==="error"&&n(o.error)}),s}}function Z$e(t,e,n,s){return new Y$e(t,e,n,s)}const Jot=tY(Z$e),K$e=Wn(t=>ka(t,()=>L4())),Q$e=Wn(t=>St(()=>{const e=K$e(t)();return e.status==="success"?e.data:null},{getServerFallback(){return null}}));function J$e(){return es({queryKey:["personalityTypeList"],queryFn:()=>ge.safeGet("/personality_types")})}function X$e(){return es({queryKey:["traitsList"],queryFn:()=>ge.safeGet("/personality_trait_types")})}const N$=Wn(t=>ka(t,()=>J$e())),eVe=Wn(t=>ka(t,()=>X$e())),Xot=Wn(t=>St(()=>{var s;const e=eVe(t)(),n=[];return!e||!e.data||!e.data.trait_types?n:(s=e.data)==null?void 0:s.trait_types})),eat=Wn(t=>St(()=>{var n;const e=N$(t)();return e?(n=e.data)!=null?n:[]:[]})),tat=sn(t=>St(()=>{var o;const e=N$(t)();if(!e)return null;const n=nY(t);return(o=e.data)==null?void 0:o.find(a=>a.key===n)}));function nat(t){"use forget";var v;const e=G.c(13),{conversation:n}=t,s=V(),{hash:o}=Hn(),a=o==="#personality-onboarding";let i;e[0]!==n?(i=()=>n.serverId$(),e[0]=n,e[1]=i):i=e[1];const l=ae(i);let c;e[2]!==s||e[3]!==a?(c=()=>a&&ze(s,"2874358162",{disableExposureLog:!0}).get("new_user_personality_onboarding_enabled",!1),e[2]=s,e[3]=a,e[4]=c):c=e[4];const d=ae(c),u=Ve(n.id,tVe),{eligible:f}=dt(Fe.hasSeenExistingUserPersonalityOnboarding);let m,p;e[5]!==s||e[6]!==f?(m=()=>{f&&Q$e(s)()},p=[f,s],e[5]=s,e[6]=f,e[7]=m,e[8]=p):(m=e[7],p=e[8]),_.useEffect(m,p);const g=l!=null?l:null,h=(v=u==null?void 0:u.id)!=null?v:null;let x;return e[9]!==d||e[10]!==g||e[11]!==h?(x=r.jsx(D$e,{conversationId:g,messageId:h,isPersonalityOnboardingRoute:d}),e[9]=d,e[10]=g,e[11]=h,e[12]=x):x=e[12],x}function tVe(t){return he.getLastAssistantMessage(t)}function sat({children:t}){let e;return _.Children.forEach(t,n=>{if(_.isValidElement(n)&&n.type==="title"){const s=_.Children.toArray(n.props.children)[0];typeof s=="string"&&(e=s)}}),_.useEffect(()=>{if(e!=null){const n=document.title;return document.title=e,()=>{document.title=n}}},[e]),null}const O4=_.createContext({rootBordered:!1});function nVe({children:t}){return r.jsx("thead",{children:r.jsx("tr",{children:t})})}function sVe({textAlign:t="left",children:e,className:n="",onClick:s}){const{rootBordered:o}=_.useContext(O4);return r.jsx("th",{onClick:s,className:W("text-token border-token-border-medium bg-token-main-surface-primary sticky top-0 z-10 border-b-[0.5px] py-2 font-semibold",o?"px-3":"pe-4 last:pe-0",t==="left"?"text-start":t==="right"?"text-end":"text-center",n,{"hover:text-token-text-tertiary cursor-pointer":s!=null}),children:e})}function oVe(n){var s=n,{children:t}=s,e=ke(s,["children"]);return r.jsx("tbody",U(w({},e),{children:t}))}const aVe=_.forwardRef(function({children:e,disabled:n=!1,onClick:s,className:o,tabIndex:a,ariaLabel:i,role:l},c){return r.jsx("tr",U(w({tabIndex:a,ref:c},n?{"data-disabled":!0}:{}),{className:W(n?"pointer-events-none":"",s?"hover:bg-token-interactive-bg-tertiary-hover cursor-pointer":"",o),onClick:s,"aria-label":i,role:l,children:e}))});function rVe({textAlign:t="left",verticalAlign:e="top",children:n,className:s,divClassName:o="min-h-[40px] items-center",colSpan:a,wrap:i=!1}){const{rootBordered:l}=_.useContext(O4);return r.jsx("td",{className:W("border-token-border-medium border-b-[0.5px]",e==="top"?"align-top":e==="bottom"?"align-bottom":"align-middle",l?"px-3":"pe-4 last:pe-0 [tr:last-child_&]:border-b-0",t&&"text-"+t,s),colSpan:a,style:i?{overflowWrap:"anywhere"}:void 0,children:r.jsx("div",{className:W("flex [tr[data-disabled=true]_&]:opacity-50",t==="right"&&"justify-end",t==="center"&&"justify-center",o),children:n})})}function iVe({children:t}){return r.jsx("div",{className:"text-md flex items-center justify-end gap-2",children:t})}function lVe({children:t,fixed:e=!1,className:n,size:s="normal",bordered:o=!1,disableScroll:a=!1}){const i=_.useRef(null),l=_.useRef(null),[c,d]=_.useState(!1);return _.useEffect(()=>{const u=i.current,f=l.current;if(u&&f){const m=new ResizeObserver(()=>{d(f.scrollHeight>u.clientHeight)});return m.observe(u),()=>m.disconnect()}},[]),r.jsx(O4.Provider,{value:{rootBordered:o},children:r.jsx("div",{className:W("text-token-text-primary",!a&&"overflow-y-auto",o&&"border-token-border-default rounded-lg border",s==="normal"?"text-base":"text-sm",c&&"pe-1",n),ref:i,children:r.jsx("table",{className:W("w-full border-separate border-spacing-0",e&&"table-fixed"),ref:l,children:t})})})}const Bo={Root:lVe,Header:nVe,HeaderCell:sVe,Body:oVe,Row:aVe,Cell:rVe,Actions:iVe};function cVe(t){return zt({mutationFn:async({serverThreadId:e,gizmoId:n})=>await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:e}},requestBody:{is_visible:!1}}),onMutate:async({serverThreadId:e,gizmoId:n})=>{await t.cancelQueries({queryKey:Tu().queryKey}),await t.cancelQueries({queryKey:Mc().queryKey}),n&&await t.cancelQueries({queryKey:$m(n).queryKey});const s=t.getQueryData(Tu().queryKey),o=t.getQueryData(Mc().queryKey);t.setQueryData(Tu().queryKey,i=>{var l;return i&&U(w({},i),{pages:(l=i.pages)==null?void 0:l.map(c=>{const d=c.items.some(u=>u.id===e)?c.items.filter(u=>u.id!==e):c.items;return U(w({},c),{items:d})})})}),t.setQueryData(Mc().queryKey,TP(e));let a=null;return n&&(a=t.getQueryData($m(n).queryKey),t.setQueryData($m(n).queryKey,i=>{var l;return i&&U(w({},i),{pages:(l=i==null?void 0:i.pages)==null?void 0:l.map(c=>{var d;return U(w({},c),{items:(d=c==null?void 0:c.items)!=null&&d.some(u=>u.id===e)?c.items.filter(u=>u.id!==e):c.items})})})})),{prevData:s,prevStarredConversations:o,prevSnorlaxConversations:a}},onError:(e,{gizmoId:n},s)=>{s!=null&&s.prevData&&t.setQueryData(Tu().queryKey,s.prevData),s!=null&&s.prevStarredConversations&&t.setQueryData(Mc().queryKey,s.prevStarredConversations),s!=null&&s.prevSnorlaxConversations&&n&&t.setQueryData($m(n).queryKey,s.prevSnorlaxConversations)},onSettled:(e,n,{serverThreadId:s,gizmoId:o},a)=>{B.logEventWithStatsig("Conversation Deleted","chatgpt_conversation_deleted"),ri.publish({kind:"deleteConversation",serverThreadId:s}),eo(t,o)}})}function D4({title:t,handleDelete:e,onClose:n}){const s=ne(),o=Vd();return r.jsxs(Mt,{testId:"modal-delete-conversation-confirmation",isOpen:!0,onClose:()=>n(),type:"success",title:s.formatMessage(Ip.deleteModalTitle),primaryButton:r.jsx(Ns.Button,{title:s.formatMessage(Ip.deleteModalConfirm),color:"danger",onClick:()=>{e(),n()},"data-testid":"delete-conversation-confirm-button"}),secondaryButton:r.jsx(Ns.Button,{title:s.formatMessage(Ip.deleteModalCancel),color:"secondary",onClick:()=>n()}),children:[r.jsx(j,U(w({},Ip.deleteModalBody),{values:{title:r.jsx("strong",{children:t})}})),o&&r.jsx("div",{className:"text-token-text-tertiary mt-2 text-sm",children:r.jsx(j,{id:"history.deleteModalMemoryDisclaimer",defaultMessage:"Visit <link>settings</link> to delete any memories saved during this chat.",values:{link:a=>r.jsx(Eo,{to:Nl(Rn.Personalization),className:"underline",onClick:()=>{setTimeout(()=>{n({closeParentModal:!0})},100)},children:a})}})})]})}const dVe=t=>{"use forget";var b,C,S,k;const e=G.c(15),{conversationTitle:n,serverThreadId:s,onClose:o,isActiveConversation:a,gizmoId:i}=t,l=jt(),c=ot();let d;e[0]!==s?(d=ft(s),e[0]=s,e[1]=d):d=e[1];const u=d,f=Hh();let m;e[2]!==f.conversations||e[3]!==s?(m=(b=f.conversations.find(E=>E.id===s))==null?void 0:b.title,e[2]=f.conversations,e[3]=s,e[4]=m):m=e[4];const p=m,g=cVe(l);let h;e[5]!==g||e[6]!==i||e[7]!==a||e[8]!==c||e[9]!==s?(h=()=>{g.mutate({serverThreadId:s,gizmoId:i!=null?i:he.getGizmoId(ft(s))}),a&&Mr(c,{replace:!0})},e[5]=g,e[6]=i,e[7]=a,e[8]=c,e[9]=s,e[10]=h):h=e[10];const x=h,v=(k=(S=(C=u==null?void 0:u.title)!=null?C:p)!=null?S:n)!=null?k:"";let y;return e[11]!==x||e[12]!==o||e[13]!==v?(y=r.jsx(D4,{title:v,handleDelete:x,onClose:o}),e[11]=x,e[12]=o,e[13]=v,e[14]=y):y=e[14],y},Ip=be({deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}."},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel"}}),F4=Object.freeze(Object.defineProperty({__proto__:null,DeleteConversationConfirmationModal:D4,DeleteConversationConfirmationModalContainer:dVe},Symbol.toStringTag,{value:"Module"})),uVe=R(()=>P(()=>import("./odokf21e9yzx95dg.js"),__vite__mapDeps([437,1])),{loading:t=>O(t)}),fVe=R(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([149,1])),{loading:t=>O(t)}),mVe=R(()=>P(()=>import("./ailj2wmeuzip7d2v.js"),__vite__mapDeps([122,1])),{loading:t=>O(t)}),P$=["archivedConversations"],pVe=30,gVe=3,Ks=be({name:{id:"archivedConversationsModal.name",defaultMessage:"Name"},dateCreated:{id:"archivedConversationsModal.dateCreated",defaultMessage:"Date created"},loading:{id:"archivedConversationsModal.loading",defaultMessage:"Loading..."},somethingWentWrong:{id:"archivedConversationsModal.somethingWentWrong",defaultMessage:"Something went wrong..."},retry:{id:"archivedConversationsModal.retry",defaultMessage:"Retry"},noArchivedConversations:{id:"archivedConversationsModal.noArchivedConversations",defaultMessage:"You have no archived conversations."},title:{id:"archivedConversationsModal.title",defaultMessage:"Archived chats"},unarchiveConversation:{id:"archivedConversationsModal.unarchiveConversation",defaultMessage:"Unarchive conversation"},deleteConversation:{id:"archivedConversationsModal.deleteConversation",defaultMessage:"Delete conversation"},deleteFailed:{id:"archivedConversationsModal.deleteFailed",defaultMessage:"Deleting failed"}});function hVe(t){"use forget";var X;const e=G.c(68),{conversation:n,elementRef:s,onCloseParent:o,variant:a}=t,i=a==="modal",l=ne(),c=Ut(),d=jt();let u;e[0]!==n.gizmo_id||e[1]!==d?(u=()=>{d.invalidateQueries({queryKey:[P$]}),eo(d,n.gizmo_id)},e[0]=n.gizmo_id,e[1]=d,e[2]=u):u=e[2];let f;e[3]!==c?(f=()=>{c.danger(Ks.deleteFailed,{toastId:"archived_conversations_modal_delete_failed"})},e[3]=c,e[4]=f):f=e[4];let m;e[5]!==u||e[6]!==f?(m={mutationFn:_Ve,onSettled:u,onError:f},e[5]=u,e[6]=f,e[7]=m):m=e[7];const{mutate:p,isPending:g}=zt(m),[h,x]=_.useState(!1);let v;e[8]!==n.id?(v=Vo(n.id),e[8]=n.id,e[9]=v):v=e[9];const y=v;let b;e[10]!==i?(b=i&&r.jsx(mVe,{className:"icon"}),e[10]=i,e[11]=b):b=e[11];let C;e[12]!==n.title||e[13]!==b?(C=r.jsxs(r.Fragment,{children:[b,n.title]}),e[12]=n.title,e[13]=b,e[14]=C):C=e[14];const S=C;let k;e[15]!==y||e[16]!==s||e[17]!==S||e[18]!==a?(k=a==="page"?r.jsx(Eo,{to:y,className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",ref:s,viewTransition:!1,children:S}):r.jsx("a",{href:y,rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",ref:s,children:S}),e[15]=y,e[16]=s,e[17]=S,e[18]=a,e[19]=k):k=e[19];const E=k;let T;e[20]!==E?(T=r.jsx(Bo.Cell,{children:E}),e[20]=E,e[21]=T):T=e[21];let M;e[22]!==n.create_time?(M=n.create_time!=null?r.jsx(JE,{value:n.create_time,month:"long",year:"numeric",day:"numeric"}):null,e[22]=n.create_time,e[23]=M):M=e[23];let A;e[24]!==M?(A=r.jsx(Bo.Cell,{children:M}),e[24]=M,e[25]=A):A=e[25];let I;e[26]!==l?(I=l.formatMessage(Ks.unarchiveConversation),e[26]=l,e[27]=I):I=e[27];let N;e[28]!==l?(N=l.formatMessage(Ks.unarchiveConversation),e[28]=l,e[29]=N):N=e[29];let L;e[30]!==n.id||e[31]!==p?(L=()=>{p({conversationId:n.id,is_archived:!1})},e[30]=n.id,e[31]=p,e[32]=L):L=e[32];let D;e[33]===Symbol.for("react.memo_cache_sentinel")?(D=r.jsx(uVe,{className:"icon-sm"}),e[33]=D):D=e[33];let F;e[34]!==N||e[35]!==L?(F=r.jsx("button",{"aria-label":N,className:"text-token-text-tertiary hover:text-token-text-secondary inline-flex h-7 w-7 cursor-pointer items-center justify-center text-[18px]",type:"button",onClick:L,children:D}),e[34]=N,e[35]=L,e[36]=F):F=e[36];let $;e[37]!==I||e[38]!==F?($=r.jsx(_t,{label:I,side:"top",children:F}),e[37]=I,e[38]=F,e[39]=$):$=e[39];let H;e[40]!==l?(H=l.formatMessage(Ks.deleteConversation),e[40]=l,e[41]=H):H=e[41];let z;e[42]===Symbol.for("react.memo_cache_sentinel")?(z=()=>x(!0),e[42]=z):z=e[42];let K;e[43]!==l?(K=l.formatMessage(Ks.deleteConversation),e[43]=l,e[44]=K):K=e[44];let J;e[45]===Symbol.for("react.memo_cache_sentinel")?(J=r.jsx(fVe,{className:"icon-sm"}),e[45]=J):J=e[45];let Z;e[46]!==K?(Z=r.jsx("button",{onClick:z,"aria-label":K,className:"text-token-text-tertiary hover:text-token-text-secondary inline-flex h-7 w-7 items-center justify-center",type:"button",children:J}),e[46]=K,e[47]=Z):Z=e[47];let q;e[48]!==H||e[49]!==Z?(q=r.jsx(_t,{label:H,side:"top",children:Z}),e[48]=H,e[49]=Z,e[50]=q):q=e[50];let se;e[51]!==$||e[52]!==q?(se=r.jsx(Bo.Cell,{textAlign:"right",children:r.jsxs(Bo.Actions,{children:[$,q]})}),e[51]=$,e[52]=q,e[53]=se):se=e[53];let ie;e[54]!==g||e[55]!==A||e[56]!==se||e[57]!==T?(ie=r.jsxs(Bo.Row,{disabled:g,children:[T,A,se]}),e[54]=g,e[55]=A,e[56]=se,e[57]=T,e[58]=ie):ie=e[58];let ee;e[59]!==n.id||e[60]!==n.title||e[61]!==h||e[62]!==o||e[63]!==p?(ee=h&&r.jsx(D4,{title:(X=n.title)!=null?X:"",handleDelete:()=>{p({conversationId:n.id,is_visible:!1})},onClose:te=>{x(!1),te!=null&&te.closeParentModal&&(o==null||o())}}),e[59]=n.id,e[60]=n.title,e[61]=h,e[62]=o,e[63]=p,e[64]=ee):ee=e[64];let le;return e[65]!==ie||e[66]!==ee?(le=r.jsxs(r.Fragment,{children:[ie,ee]}),e[65]=ie,e[66]=ee,e[67]=le):le=e[67],le}function _Ve(t){const s=t,{conversationId:e}=s,n=ke(s,["conversationId"]);return ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:e}},requestBody:n,intercomEventOnError:"fetch-error:conversation:edit"})}function R$(t){"use forget";var k;const e=G.c(37),{onClose:n,className:s,variant:o}=t,a=o===void 0?"modal":o;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={queryKey:[P$],queryFn:vVe,initialPageParam:0,getNextPageParam:yVe,refetchOnMount:"always"},e[0]=i):i=e[0];const{data:l,isLoading:c,isError:d,refetch:u,fetchNextPage:f,hasNextPage:m}=Tf(i),p=_.useRef(null);let g;e[1]!==f||e[2]!==m||e[3]!==c?(g=E=>{var T;c||E==null||((T=p.current)==null||T.disconnect(),p.current=new IntersectionObserver(M=>{M[0].isIntersecting&&m&&f()}),p.current.observe(E))},e[1]=f,e[2]=m,e[3]=c,e[4]=g):g=e[4];const h=g;let x,v;e[5]===Symbol.for("react.memo_cache_sentinel")?(x=()=>()=>{var E;(E=p.current)==null||E.disconnect()},v=[],e[5]=x,e[6]=v):(x=e[5],v=e[6]),_.useEffect(x,v);let y;e[7]!==(l==null?void 0:l.pages)?(y=(k=l==null?void 0:l.pages.flatMap(xVe))!=null?k:[],e[7]=l==null?void 0:l.pages,e[8]=y):y=e[8];const b=y;let C;if(c){let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{className:"text-token-text-secondary pb-8",children:r.jsx(j,w({},Ks.loading))}),e[9]=E):E=e[9],C=E}else if(d){let E;e[10]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{className:"mb-4 text-red-500",children:r.jsx(j,w({},Ks.somethingWentWrong))}),e[10]=E):E=e[10];let T;e[11]!==u?(T=()=>{u()},e[11]=u,e[12]=T):T=e[12];let M;e[13]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(j,w({},Ks.retry)),e[13]=M):M=e[13];let A;e[14]!==T?(A=r.jsxs("div",{children:[E,r.jsx("div",{children:r.jsx(_e,{color:"secondary",onClick:T,children:M})})]}),e[14]=T,e[15]=A):A=e[15],C=A}else if(b.length===0){let E;e[16]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{className:"text-token-text-tertiary pb-8",children:r.jsx(j,w({},Ks.noArchivedConversations))}),e[16]=E):E=e[16],C=E}else{const E=a==="modal"?"max-h-[28rem]":"max-h-none";let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(Bo.HeaderCell,{children:r.jsx(j,w({},Ks.name))}),e[17]=T):T=e[17];let M;e[18]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsxs(Bo.Header,{children:[T,r.jsx(Bo.HeaderCell,{children:r.jsx(j,w({},Ks.dateCreated))}),r.jsx(Bo.HeaderCell,{})]}),e[18]=M):M=e[18];let A;if(e[19]!==b||e[20]!==h||e[21]!==n||e[22]!==a){let L;e[24]!==b.length||e[25]!==h||e[26]!==n||e[27]!==a?(L=(D,F)=>r.jsx(hVe,{conversation:D,elementRef:F===b.length-gVe?h:void 0,onCloseParent:n,variant:a},D.id),e[24]=b.length,e[25]=h,e[26]=n,e[27]=a,e[28]=L):L=e[28],A=b.map(L),e[19]=b,e[20]=h,e[21]=n,e[22]=a,e[23]=A}else A=e[23];let I;e[29]!==A?(I=r.jsx(Bo.Body,{children:A}),e[29]=A,e[30]=I):I=e[30];let N;e[31]!==I||e[32]!==E?(N=r.jsxs(Bo.Root,{className:E,size:"compact",children:[M,I]}),e[31]=I,e[32]=E,e[33]=N):N=e[33],C=N}let S;return e[34]!==C||e[35]!==s?(S=s?r.jsx("div",{className:s,children:C}):r.jsx(r.Fragment,{children:C}),e[34]=C,e[35]=s,e[36]=S):S=e[36],S}function xVe(t){return t.items}function yVe(t){var n,s,o;const e=((n=t.offset)!=null?n:0)+((s=t.limit)!=null?s:0);return e<((o=t.total)!=null?o:0)?e:void 0}function vVe(t){const{pageParam:e}=t;return ge.safeGet("/conversations",{parameters:{query:{offset:e,limit:pVe,order:"updated",is_archived:!0}},intercomEventOnError:"fetch-error:conversations:get",authOption:nn.SendIfAvailable})}function O9(t){"use forget";const e=G.c(8),{onClose:n}=t,s=ne();let o;e[0]!==s?(o=s.formatMessage(Ks.title),e[0]=s,e[1]=o):o=e[1];let a;e[2]!==n?(a=r.jsx(R$,{onClose:n}),e[2]=n,e[3]=a):a=e[3];let i;return e[4]!==n||e[5]!==o||e[6]!==a?(i=r.jsx(Mt,{testId:"modal-archived-conversations",isOpen:!0,onClose:n,size:"custom",className:"max-w-5xl",type:"success",title:o,showCloseButton:!0,children:a}),e[4]=n,e[5]=o,e[6]=a,e[7]=i):i=e[7],i}const oat=Object.freeze(Object.defineProperty({__proto__:null,ArchivedConversationsContent:R$,ArchivedConversationsModal:O9,archivedConversationsMessages:Ks,default:O9},Symbol.toStringTag,{value:"Module"}));async function bVe(){try{return await(await kl()).getHost().getClientCapabilityVersion()}catch(t){return}}async function CVe(){const t=await bVe();return t!=null&&t>=2}function SVe(t){"use forget";var H,z,K,J,Z,q,se,ie,ee,le;const e=G.c(31),n=ae(it.wantsHandleAgentRequest$),s=V(),{selectedSources:o}=La(t),a=Qn(t),[i,l]=_.useState(!1),c=Ve(t,MVe),d=((H=c==null?void 0:c.metadata)==null?void 0:H.is_takeover_ended_message)===!0,u=Ve(t,EVe),f=Ve(t,kVe);let m;e[0]!==f?(m=gh(f)===hh.n7jupd_m&&((z=f.metadata)==null?void 0:z.kaur1br5_mode)===!0,e[0]=f,e[1]=m):m=e[1];const p=m,g=(K=f.metadata)==null?void 0:K.agent_preinitialize_request_id,h=((J=f.metadata)==null?void 0:J.n7jupd_local_safe_mode)===!0;let x;e[2]!==t||e[3]!==s?(x=()=>{var te;const X=yt(s,t);return(te=Ci(X))==null?void 0:te.value},e[2]=t,e[3]=s,e[4]=x):x=e[4];const v=ae(x),y=v===Xt.STREAMING||v===Xt.REALTIME,b=c&&c.create_time&&u&&u.create_time&&c.create_time<u.create_time&&y,C=_.useRef(void 0),S=(f==null?void 0:f.author.role)===Ke.Assistant?f:void 0,k=!!(S&&(((q=(Z=S.metadata)==null?void 0:Z.finish_details)==null?void 0:q.type)==="interrupted"&&((ie=(se=S.metadata)==null?void 0:se.finish_details)==null?void 0:ie.reason)==="server_error"||((ee=S.clientMetadata)==null?void 0:ee.err)!=null||((le=S.clientMetadata)==null?void 0:le.errType)!=null)),E=(S==null?void 0:S.end_turn)===!0;let T,M;e[5]!==o||e[6]!==a||e[7]!==s||e[8]!==n?(T=()=>{if(!n)return;it.wantsHandleAgentRequest$.set(!1);const X=it.agentRequest;if(X&&a)e:switch(X){case"startTakeoverFromAgent":{jO({showPlaceholderMessage:!0});break e}case"endTakeoverFromAgent":{(async()=>{const te=await $h(void 0,"side_chat","user",[Pe.Agent]);await NO(s,o,{startNewTurn:!0,skipTakeoverAfterAbort:async()=>await lZ(a)!=="running"},te)})();break e}case"stopAgent":{l(!0);break e}}},M=[n,o,s,a],e[5]=o,e[6]=a,e[7]=s,e[8]=n,e[9]=T,e[10]=M):(T=e[9],M=e[10]),_.useEffect(T,M);let A,I;e[11]!==t||e[12]!==b||e[13]!==i?(A=()=>{!i||!b||(l(!1),Zh(t,void 0,{clientInitiated:!0,reason:"stop_button",isLastTurnAgent:!0}))},I=[i,b,t],e[11]=t,e[12]=b,e[13]=i,e[14]=A,e[15]=I):(A=e[14],I=e[15]),_.useEffect(A,I);const N=Ve(t,wVe);let L,D;e[16]!==t||e[17]!==p||e[18]!==g||e[19]!==h||e[20]!==d||e[21]!==a||e[22]!==N?(L=()=>{if(!p||!a)return;let X=!1;return(async()=>{if(!(await CVe()||!d)||X)return;l(!1);const ue=AVe(t);rZ(a,ue,N,h,d,g)})(),()=>{X=!0}},D=[a,p,g,h,d,N,t,l],e[16]=t,e[17]=p,e[18]=g,e[19]=h,e[20]=d,e[21]=a,e[22]=N,e[23]=L,e[24]=D):(L=e[23],D=e[24]),_.useEffect(L,D);let F,$;e[25]!==v||e[26]!==k||e[27]!==E||e[28]!==a?(F=()=>{const X=C.current;C.current=v;const te=X===Xt.REALTIME&&v!==Xt.REALTIME;a&&(E||te)&&iZ(a,k)},$=[a,v,C,E,k],e[25]=v,e[26]=k,e[27]=E,e[28]=a,e[29]=F,e[30]=$):(F=e[29],$=e[30]),_.useEffect(F,$)}function wVe(t){return he.getUserMessages(t)}function kVe(t){return he.getCurrentNode(t).message}function EVe(t){var e;return(e=he.findNode(t,TVe))==null?void 0:e.message}function TVe(t){var e;return gh(t.message)===hh.n7jupd_m&&((e=t.message.metadata)==null?void 0:e.kaur1br5_mode)===!0}function MVe(t){return he.getUserMessages(t).at(-1)}function AVe(t){if(!t)return!1;const e=ft(t);if(!e)return!1;const n=he.getConversationTurns(e).flatMap(a=>a.messages);let s=-1,o=-1;for(let a=n.length-1;a>=0;a--)if(n[a].author.role===Ke.User)if(o===-1)o=a;else{s=a;break}if(s===-1||o===-1)return!1;for(let a=s+1;a<o;a++)if(n[a].recipient==="kaur1br5.suggest_agent")return!0;return!1}const aat=t=>{"use forget";const{clientThreadId:e}=t;return SVe(e),null};var Wr=(t=>(t.Running="running",t.Finished="finished",t.Error="error",t))(Wr||{});const Q2=(t,e)=>"".concat(t,":").concat(e),Yi=Dt((t,e)=>({toolStates:new Map,setToolState:(n,s,o,a)=>{const i=Q2(n,s),l=e().toolStates.get(i);t(c=>{var u;const d=new Map(c.toolStates);return d.set(i,{status:a,toolName:o,messageId:s,startTime:(u=l==null?void 0:l.startTime)!=null?u:Date.now()}),{toolStates:d}})},getToolState:(n,s)=>{const o=Q2(n,s);return e().toolStates.get(o)},removeToolState:(n,s)=>{const o=Q2(n,s);t(a=>{const i=new Map(a.toolStates);return i.delete(o),{toolStates:i}})},getRunningToolsForThread:n=>{const s=e().toolStates,o=[];for(const[a,i]of s.entries())a.startsWith("".concat(n,":"))&&i.status==="running"&&o.push(i);return o}})),IVe=R(()=>P(()=>import("./p1oh54il7vkjezez.js"),__vite__mapDeps([514,1,10,11])).then(t=>t.SafeLinkWarningModal)),jVe=15e3,L$="TimeoutError",NVe="opening link failed";function rat(t){const e=_.useRef(new Set),n=Ve(t,he.getConversationTurns,{disablePerfDetector:!0});_.useEffect(()=>{yn()&&Lv().catch(()=>{})},[]);const s=Ve(t,o=>he.getRequestId(o));_.useEffect(()=>{if(!yn()||!n.length)return;n.flatMap(a=>a.messages).filter(a=>{var i;return!!a.recipient&&Rp(a.recipient)&&(a.status==="in_progress"||a.status==="finished_successfully")&&!e.current.has(a.id)&&((i=a.clientMetadata)==null?void 0:i.requestId)===s}).forEach(a=>{a.recipient&&Rp(a.recipient)&&Yi.getState().setToolState(t,a.id,a.recipient,Wr.Running)})},[t,n,s]),_.useEffect(()=>{if(yn())return L8(ri,{completionFinished:async()=>{const o=ft(t);if(!o)return;const a=he.getConversationTurns(o);if(!a.length)return;const i=he.getRequestId(o),l=a.flatMap(c=>c.messages).filter(c=>{var d;return!!c.recipient&&Rp(c.recipient)&&c.status==="finished_successfully"&&!e.current.has(c.id)&&((d=c.clientMetadata)==null?void 0:d.requestId)===i});if(l.length!==0)for(const c of l)e.current.add(c.id),await PVe(c,t)}})},[t,s])}async function PVe(t,e){const n=t.recipient;if(!n||!Rp(n))return;let s;if(t.content.content_type===ut.Text?s=t.content.parts&&t.content.parts.length?t.content.parts[0]:"":t.content.content_type===ut.Code?s=t.content.text:s="",!await RVe(n,s,e)){Yi.getState().setToolState(e,t.id,n,Wr.Finished);return}if(!await DVe(n,s,e)){Yi.getState().setToolState(e,t.id,n,Wr.Finished);return}if(!await BVe(n,s,e)){Yi.getState().setToolState(e,t.id,n,Wr.Finished);return}if(n===eA){Yi.getState().setToolState(e,t.id,n,Wr.Finished);return}const l=()=>{Yi.getState().setToolState(e,t.id,n,Wr.Error)},c=()=>{l(),D9(e,n,"Tool host unavailable","host_unavailable")};let d;try{d=(await kl()).getHost()}catch(m){c();return}if(!d||!d.callLocalTool){c();return}let u,f;try{u=await $Ve(d.callLocalTool(n,s),jVe)}catch(m){f=m.name===L$?"timeout":"exception",l(),D9(e,n,f,f);return}Yi.getState().setToolState(e,t.id,n,Wr.Finished);for(const m of u)await O$(e,m.author,m.message)}async function O$(t,e,n){const s={id:as(),author:{role:Ke.Tool,name:e},create_time:Date.now()/1e3,content:{content_type:ut.Text,parts:[n]},recipient:"all",status:"finished_successfully",weight:0};try{const o=xs();await Ko({conversation:yt(o,t),promptMessage:s,eventSource:"keyboard"})}catch(o){Ze(t,a=>{dn.appendMessage(a,s)})}}function D9(t,e,n,s){const o={id:as(),author:{role:Ke.Assistant,name:e},create_time:Date.now()/1e3,content:{content_type:ut.Text,parts:["Error: "+n]},status:"finished_successfully",weight:0,metadata:{local_function_error:!0,local_function_error_type:s}};Ze(t,a=>{dn.appendMessage(a,o)})}function RVe(t,e,n){return t!=="kaur1br5.navigate_current_tab"?Promise.resolve(!0):B4(t,e,n,s=>{const o=OVe(s);return o?[o]:void 0})}function LVe(t){return vv(t)&&(t.url===void 0||typeof t.url=="string")}function OVe(t){try{const e=JSON.parse(t||"{}");if(LVe(e))return e.url}catch(e){}}function DVe(t,e,n){return t!=="kaur1br5.open_tabs"?Promise.resolve(!0):B4(t,e,n,FVe)}function FVe(t){try{const e=JSON.parse(t||"{}"),n=vv(e)?e:{};if(Array.isArray(n.urls))return n.urls.filter(s=>typeof s=="string")}catch(e){}}function BVe(t,e,n){return t!=="kaur1br5.add_bookmark"?Promise.resolve(!0):B4(t,e,n,UVe)}function UVe(t){try{const e=JSON.parse(t||"{}"),n=vv(e)?e:{};if(typeof n.url=="string")return[n.url]}catch(e){}}function $Ve(t,e){return new Promise((n,s)=>{const o=setTimeout(()=>{const a=new Error("Local function invocation timed out");a.name=L$,s(a)},e);t.then(a=>{clearTimeout(o),n(a)}).catch(a=>{clearTimeout(o),s(a)})})}async function J2(t,e,n,s){const o=await VVe(t,s);return o||await O$(e,n,NVe),o}function VVe(t,e){return new Promise(n=>{let s=!1;const o=a=>{s||(s=!0,n(a))};lt(t,IVe,{urls:e,suppressNavigation:!0,onAction:a=>o(a==="open"),onActionAborted:()=>o(!1)})})}async function B4(t,e,n,s){const o=xs();try{const a=s(e);if(!a||a.length===0)return J2(o,n,t,e);const i=a.filter(c=>!HVe(c));if(i.length===0)return!0;const l=await kY(o,n,i);return l.length===0?!0:J2(o,n,t,l.length===1?l[0]:l)}catch(a){return J2(o,n,t,e)}}function HVe(t){try{return new URL(t).protocol.toLowerCase()==="atlas:"}catch(e){return!1}}function iat(){const t=V(),e=Eh();_.useEffect(()=>{yn()&&e&&sY.set(t,!1)},[t,e])}var D$=(t=>(t[t.ADAVisualization=0]="ADAVisualization",t[t.Image=1]="Image",t))(D$||{});function GVe(t){return Ps(t,"398474797").get("enabled",!1)}const WVe=_.createContext({model:"gpt-4o"}),U4=()=>_.useContext(WVe);function lat({pointer:t,conversationId:e,messageId:n,source:s,imageIndex:o}){var a,i,l,c,d,u,f;return{imageUrl:t&&"url"in t?t.url:void 0,conversationId:e,messageId:n,generationId:(l=(i=(a=t==null?void 0:t.metadata)==null?void 0:a.generation)==null?void 0:i.gen_id)!=null?l:void 0,parentGenerationId:(u=(d=(c=t==null?void 0:t.metadata)==null?void 0:c.generation)==null?void 0:d.parent_gen_id)!=null?u:void 0,fileId:wo((f=t==null?void 0:t.asset_pointer)!=null?f:""),model:"gpt-4o",source:s,imageIndex:o}}class Cs{}Q(Cs,"imageRated",({liked:e,analyticsContext:n})=>{const s=e?"like":"dislike",o=e?"true":"false";Ye.logEvent("chatgpt_dalle_image_rating",s,w({liked:o},n)),B.logEvent("chatgpt_dalle_image_rating",w({liked:e},n)),Ye.logEvent("chatgpt_image_rating",s,w({liked:o},n)),B.logEvent("chatgpt_image_rating",w({liked:e},n));var a="thumbs_down";e&&(a="thumbs_up"),n.conversationId&&n.messageId&&n.generationId&&(Lr("imagegen_rating",n.conversationId,n.messageId,n.generationId,{imagegen_rating:{rating:a}}),ge.safePost("/conversation/message_feedback",{requestBody:{message_id:n.messageId,conversation_id:n.conversationId,rating:e?"thumbsUp":"thumbsDown"},authOption:nn.SendIfAvailable}))}),Q(Cs,"imageShared",({analyticsContext:e,source:n})=>{B.logEventWithStatsig("Share Post: Share Button Clicked","chatgpt_post_share_button_clicked",w({source:n},e)),e.conversationId&&e.messageId&&e.generationId&&Lr("image_share",e.conversationId,e.messageId,e.generationId)}),Q(Cs,"paragenImageRated",({liked:e,analyticsContext:n})=>{const s=e?"like":"dislike";Ye.logEvent("chatgpt_imagegen_image_paragen_rating",void 0,{liked:s,hasParent:n.parentGenerationId?"true":"false"}),B.logEvent("chatgpt_imagegen_image_paragen_rating",w({liked:e},n));var o="thumbs_down";e&&(o="thumbs_up"),n.conversationId&&n.messageId&&n.generationId&&Lr("imagegen_image_paragen_rating",n.conversationId,n.messageId,n.generationId,{imagegen_image_paragen_rating:{rating:o}})}),Q(Cs,"paragenDownload",({analyticsContext:e})=>{Ye.logEvent("chatgpt_imagegen_image_paragen_download",void 0,{hasParent:e.parentGenerationId?"true":"false"}),B.logEvent("chatgpt_imagegen_image_paragen_download",e),e.conversationId&&e.messageId&&e.generationId&&Lr("imagegen_image_paragen_download",e.conversationId,e.messageId,e.generationId)}),Q(Cs,"renderingComplete",({analyticsContext:e})=>{Ye.logEvent("chatgpt_imagegen_image_rendering_complete",void 0,{hasParent:e.parentGenerationId?"true":"false"}),B.logEvent("chatgpt_imagegen_image_rendering_complete",e)}),Q(Cs,"editorClick",({sourceOperation:e,analyticsContext:n})=>{Ye.logEvent("chatgpt_dalle_image_view_full",null,w({sourceOperation:e},n)),B.logEvent("chatgpt_dalle_image_view_full",w({sourceOperation:e},n)),Ye.logEvent("chatgpt_image_view_full",null,w({sourceOperation:e},n)),B.logEvent("chatgpt_image_view_full",w({sourceOperation:e},n)),n.conversationId&&n.messageId&&n.generationId&&Lr("image_view_full",n.conversationId,n.messageId,n.generationId)}),Q(Cs,"inpaintStarted",({analyticsContext:e})=>{Ye.logEvent("chatgpt_dalle_inpaint_click","click",e),B.logEvent("chatgpt_dalle_inpaint_click",e),Ye.logEvent("chatgpt_image_inpaint_click",void 0,e),B.logEvent("chatgpt_image_inpaint_click",e)}),Q(Cs,"inpaintClick",({analyticsContext:e})=>{Ye.logEvent("chatgpt_imagegen_inpaint_click",null,e),B.logEvent("chatgpt_imagegen_inpaint_click",e)}),Q(Cs,"zoom",({zoomType:e,analyticsContext:n})=>{Ye.logEvent(e==="in"?"chatgpt_image_view_full_zoom_in":"chatgpt_image_view_full_zoom_out",null,{hasParent:n.parentGenerationId?"true":"false"}),B.logEvent(e==="in"?"chatgpt_image_view_full_zoom_in":"chatgpt_image_view_full_zoom_out",U(w({},n),{startMs:performance.now()})),n.conversationId&&n.messageId&&n.generationId&&Lr(e==="in"?"image_view_full_zoom_in":"image_view_full_zoom_out",n.conversationId,n.messageId,n.generationId)}),Q(Cs,"download",({analyticsContext:e})=>{Ye.logEvent("chatgpt_dalle_image_download","click",e),B.logEvent("chatgpt_dalle_image_download",e),Ye.logEvent("chatgpt_image_download",void 0,e),B.logEvent("chatgpt_image_download",e),e.conversationId&&e.messageId&&e.generationId&&Lr("image_download",e.conversationId,e.messageId,e.generationId)}),Q(Cs,"generationSuccess",({analyticsContext:e,durationMs:n})=>{Ye.logEvent("chatgpt_imagegen_generation_success",n?Math.round(n):void 0),B.logEvent("chatgpt_imagegen_generation_success",U(w({},e),{duration_ms:n}))}),Q(Cs,"generationFailure",({analyticsContext:e,errorReason:n})=>{const s=n?{errorReason:n}:void 0;Ye.logEvent("chatgpt_imagegen_generation_failure",void 0,s),B.logEvent("chatgpt_imagegen_generation_failure",U(w({},e),{errorReason:n}))});const zVe=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)}),qVe=5,YVe="Default";function ZVe(t){const e={};return t.forEach(n=>{var o;const s=(o=n.group)!=null?o:YVe;e[s]||(e[s]=[]),e[s].push(n)}),e}function KVe({tagOptions:t,onSubmit:e,onMoreClicked:n,onCancel:s,maxInlineTags:o=qVe,modalOnly:a=!1,modalTitle:i,multiple:l,children:c,allowEmptySubmit:d=!1,hideDefaultTextInput:u=!1,modalLeadContent:f,modalSecondaryButton:m,isSubmitDisabled:p}){var ie;const g=ne(),h=V(),x=et(h),v=x==null?void 0:x.planType,y=v===We.FREE||v===We.GO||v===We.PLUS||v===We.PRO,[b,C]=_.useState(a?"modal":"inline"),[S,k]=_.useState([]),[E,T]=_.useState(void 0),M=ee=>S.some(le=>le.value===ee),{eligible:A}=dt(Fe.hasSeenInlineFeedbackCustomInstrMessage),I=A?4e3:1500,[N,L]=_.useState(!1),D=ot(),F=_.useCallback(ee=>{e(ee),C("submitted");const le=["Too chatty or casual","Don't like the style"];L(ee.tags.some(X=>le.includes(X.value))),setTimeout(()=>{C("closed"),A&&N&&st(h,Fe.hasSeenInlineFeedbackCustomInstrMessage)},I)},[e,I,A,N,h]),$=_.useMemo(()=>mi(F,500),[F]),H=ee=>{let le=[];return l?le=M(ee.value)?S.filter(X=>X!==ee):[...S,ee]:le=[ee],k(le),le},z=t.map(ee=>ee.value),K=ZVe(t),J=Object.keys(K),Z=ee=>{F({event:ee,tags:S,textFeedback:E,tagChoices:z,source:"modal"})},q=S.length===0&&!E&&!d,se=(ie=p==null?void 0:p(S,E))!=null?ie:q;return r.jsxs(r.Fragment,{children:[!a&&r.jsx(mn,{children:b!=="closed"&&r.jsxs(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:[b==="submitted"&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:r.jsx("div",{className:"border-token-border-default inline-flex rounded-lg border p-4",children:r.jsx("div",{className:"text-sm",children:A&&N?r.jsx(r.Fragment,{children:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.customInstructions",defaultMessage:"Thanks! If ChatGPT's style isn't quite right, you can also <link>customize its responses</link>.",values:{link:ee=>r.jsx("span",{onClick:()=>{D("#settings/".concat(Rn.Personalization)),Ye.logEvent("chatgpt_user_context_inline_feedback_message_clicked"),B.logEvent("User Context Inline Feedback Message Clicked")},className:"text-token-text-primary cursor-pointer font-semibold",children:ee})}})}):r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(b)&&r.jsxs("div",{className:"border-token-border-default relative mt-2 flex w-full flex-col gap-3 rounded-lg border p-4",children:[r.jsx("button",{className:"absolute end-4 top-4 text-sm font-bold",onClick:()=>{C("closed"),$.cancel(),s==null||s()},children:r.jsx(zVe,{className:"icon text-token-text-secondary hover:text-token-text-primary"})}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.slice(0,o).map(ee=>{const le=ee.icon;return r.jsxs(X2,{"aria-pressed":M(ee.value),"aria-selected":M(ee.value),$selected:M(ee.value),onClick:X=>{const te=H(ee);$({event:X,tags:te,tagChoices:z,source:"inline"})},children:[le&&r.jsx(le,{className:"icon-sm"}),r.jsx("span",{children:ee.label})]},ee.value)}),r.jsx(X2,{onClick:()=>{n==null||n(),$.cancel(),C("modal")},children:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),b==="modal"&&r.jsxs(Mt,{type:"success",testId:"modal-inline-feedback",isOpen:!0,className:"max-w-xl",size:"custom",title:i!=null?i:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{k([]),C(a?"closed":"inline"),a&&(s==null||s())},showCloseButton:!0,primaryButton:r.jsx(_e,{color:"primary",disabled:se,onClick:Z,children:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",secondaryButton:m,children:[f,r.jsx("div",{className:"flex flex-col gap-6",children:J.map(ee=>r.jsxs("div",{children:[J.length>1&&r.jsx("div",{className:"mb-3 text-sm font-semibold",children:ee}),r.jsx("div",{className:"flex flex-wrap gap-3",children:K[ee].map(le=>{const X=le.icon;return r.jsxs(X2,{$selected:M(le.value),onClick:()=>H(le),children:[X&&r.jsx(X,{className:"icon-sm"}),r.jsx("span",{children:le.label})]},le.value)})},ee)]},ee))}),!u&&r.jsx(xf,{ariaLabel:g.formatMessage({id:"Z3Ja/T",defaultMessage:"Additional feedback"}),name:"feedback",type:"text",className:"mt-6",placeholder:g.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:E!=null?E:"",onChange:ee=>T(ee.target.value),onPressEnter:(ee,le)=>Z(le)}),y&&r.jsx("div",{className:"bg-token-main-surface-secondary text-token-text-secondary mt-4 rounded-lg p-3 text-xs",children:r.jsx(j,{id:"n8n3KW",defaultMessage:"Submitting feedback will include this full conversation to help improve ChatGPT, even if 'Improve the model for everyone' is turned off. <link>Learn more</link>",values:{link:ee=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",rel:"noopener noreferrer",className:"text-token-text-secondary underline",children:ee})}})}),c]})]})}var KE;const X2=mt.button(KE||(KE=ct(["\n  inline-flex items-center justify-center gap-2 rounded-lg border border-token-border-default px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary\n  ","\n"])),({$selected:t})=>t&&"bg-token-text-primary! text-token-main-surface-primary!");function QVe({messageId:t,serverThreadId:e,rating:n,onClose:s}){const o=ne(),a=Object.entries(oY).map(([l,c])=>({label:o.formatMessage(c),value:l})),i=async l=>{var d;const c=a.map(u=>u.value);try{await ge.safePost("/conversation/message_feedback",{requestBody:{message_id:t,conversation_id:e,rating:"thumbsDown",text:(d=l.textFeedback)!=null?d:void 0,tags:l.tags.map(u=>u.value),tag_choices:c},authOption:nn.SendIfAvailable})}catch(u){Re.addError("Failed to submit ".concat(n," image generation feedback: ").concat(u))}s()};return r.jsx("div",{onClick:l=>l.stopPropagation(),children:r.jsx(KVe,{tagOptions:a,modalOnly:!0,multiple:!0,onSubmit:i})})}const JVe=R(()=>P(()=>import("./m6idklazvjc7d344.js"),__vite__mapDeps([278,1])),{loading:t=>O(t)}),XVe=R(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([151,1])),{loading:t=>O(t)}),eHe=({onOpenChange:t,onDownload:e,triggerClassName:n,iconClassName:s,dropdownClassName:o})=>{const a=ne(),i=_.useCallback(()=>{e==null||e()},[e]);return r.jsxs(Y.Root,{onOpenChange:t,children:[r.jsx(Y.Trigger,{"aria-label":a.formatMessage({id:"imagegen.watermark.dropdownName",defaultMessage:"More Download options"}),className:n,tabIndex:0,children:r.jsx(XVe,{style:{filter:"drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.20))"},className:s})}),r.jsx(Y.Portal,{children:r.jsx(Y.Content,{className:o,side:"bottom",align:"end",children:r.jsx(Y.Item,{className:"py-2",children:r.jsxs("button",{type:"button",onClick:i,className:"row text-token-text-primary flex items-center gap-2",children:[r.jsx(JVe,{}),r.jsxs("div",{className:"ms-2 flex flex-col items-start",children:[r.jsx("span",{className:"font-semibold",children:r.jsx(j,{id:"imagegen.watermark.dropdownLabel",defaultMessage:"Save image"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"imagegen.watermark.dropdownSecondaryLabel",defaultMessage:"without watermark"})})]})]})})})})]})},tHe=R(()=>P(()=>import("./km44ch1r0uf907fx.js"),__vite__mapDeps([485,1])),{loading:t=>O(t)}),nHe=R(()=>P(()=>import("./dhbwqfnaau44fo68.js"),__vite__mapDeps([509,1])),{loading:t=>O(t)}),sHe=R(()=>P(()=>import("./fx3vo65j1l2o1ay3.js"),__vite__mapDeps([486,1])),{loading:t=>O(t)}),oHe=R(()=>P(()=>import("./b865k9nv2k0vznof.js"),__vite__mapDeps([510,1])),{loading:t=>O(t)}),aHe=R(()=>P(()=>Promise.resolve().then(()=>im),void 0),{loading:t=>O(t)}),rHe=R(()=>P(()=>import("./m6idklazvjc7d344.js"),__vite__mapDeps([278,1])),{loading:t=>O(t)});function F9({rightAlign:t=!1,bottomAlign:e=!1,fullWidth:n=!1,justifyBetween:s=!1,alwaysVisible:o=!1,children:a}){const i=_.useRef(null),l=_.useRef(!1),c=U4(),d=t$(),u=_.useCallback(()=>{d&&(l.current||(B.logEvent("Share Post: Share Button Shown",w({source:"image_gen_action_overlay"},c)),l.current=!0))},[c,d]),f=_.useCallback(m=>{m.propertyName==="opacity"&&u()},[u]);return _.useEffect(()=>{o&&u()},[o,u]),r.jsxs("div",{ref:i,onTransitionEnd:f,className:W("absolute z-2 transition-opacity duration-75 ease-out",o?"opacity-100":"opacity-0 group-hover/imagegen-image:opacity-100 group-focus/imagegen-image:opacity-100 focus-within:opacity-100",t?"end-0":"start-0",e?"bottom-0":"top-0",n&&"w-full"),children:[r.jsx("div",{className:W(e?"bg-linear-to-b":"bg-linear-to-t","from-transparent to-black/30","h-20 w-full")}),r.jsx("div",{className:W("absolute inset-0 flex p-1",e?"items-end":"items-start",t?"justify-end":"justify-start",s&&"justify-between"),children:a})]})}function Fu({icon:t,children:e,disabled:n,onClick:s,ariaLabel:o,selected:a=!1}){return r.jsxs("button",{"aria-pressed":a,className:W("hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md","z-11 flex h-10 items-center justify-center gap-1 rounded-xl text-sm font-medium text-white",e==null?"w-10":"px-2"),onClick:s,disabled:n,"aria-label":o,children:[r.jsx(t,{style:{filter:"drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.15))"},className:"icon fill-current"}),e]})}function Jp(t){return e=>{e.stopPropagation(),t()}}const iHe=({imageAssetPointer:t,imageUrl:e,messageId:n,clientThreadId:s,serverThreadId:o,shouldShowOverflow:a=!1,showRatingButtons:i=!0})=>{const l=V(),c=GVe(l),d=ne(),[u,f]=_.useState(!1),[m,p]=_.useState(null),g=U4(),h=E=>{m==null&&(Cs.imageRated({liked:E,analyticsContext:g}),p(E),E||f(!0))},x=_.useCallback(()=>yIe(d),[d]),v=P1(),y=hI(),b=(y==null?void 0:y.type)===D$.Image&&y.image.asset_pointer===t,[C,S]=_.useState(!1),k=_.useCallback(()=>{t&&(vk({url:t,fileName:x()}),Cs.download({analyticsContext:g}))},[t,x,g]);return r.jsxs(r.Fragment,{children:[v?!b&&r.jsx(F9,{rightAlign:!0,fullWidth:!0,children:r.jsx(Fu,{icon:fIe,ariaLabel:d.formatMessage(Bu.expand)})}):r.jsx(r.Fragment,{children:r.jsx(F9,{bottomAlign:!0,rightAlign:!0,fullWidth:!0,alwaysVisible:C,children:r.jsxs("div",{className:"flex w-full items-center justify-between",children:[r.jsxs("div",{className:"flex",children:[i&&m!==!1&&r.jsx(_t,{label:d.formatMessage({id:"U99PVw",defaultMessage:"Like"}),delayDuration:300,children:r.jsx(Fu,{icon:m===!0?nHe:tHe,selected:m===!0,onClick:Jp(()=>h(!0)),ariaLabel:d.formatMessage(Bu.thumbsUp),disabled:m===!0})}),i&&m!==!0&&r.jsx(_t,{label:d.formatMessage({id:"ncGqTt",defaultMessage:"Dislike"}),delayDuration:300,children:r.jsx(Fu,{icon:m===!1?oHe:sHe,selected:m===!1,onClick:Jp(()=>h(!1)),ariaLabel:d.formatMessage(Bu.thumbsDown),disabled:m===!1})}),e&&r.jsx(_t,{label:d.formatMessage({id:"0EYire",defaultMessage:"Download"}),children:r.jsx(Fu,{icon:rHe,ariaLabel:d.formatMessage(Bu.download),onClick:Jp(()=>{vk({url:e,fileName:x()}),Cs.download({analyticsContext:g})})})}),c&&a&&r.jsx(eHe,{onOpenChange:S,onDownload:k,triggerClassName:"z-11 flex h-10 w-10 items-center justify-center rounded-xl bg-transparent hover:bg-token-icon-surface/10 focus:bg-token-icon-surface/10 focus-visible:bg-token-icon-surface/10",iconClassName:"icon-lg fill-transparent text-white",dropdownClassName:"z-11 min-w-fit origin-top-end text-token-text-primary"})]}),r.jsx("div",{className:"flex",children:r.jsx(lHe,{clientThreadId:s,messageId:n})})]})})}),u&&r.jsx(QVe,{messageId:n,serverThreadId:o!=null?o:"",rating:m,onClose:()=>f(!1)})]})};function lHe({clientThreadId:t,messageId:e}){const[n,s]=_.useState(!1),o=ne(),a=t$(),i=I3(),l=o$({clientThreadId:t,imageGenMessageId:e}),c=U4();return!a||i?null:r.jsx(Fu,{icon:n?_s:aHe,disabled:n,onClick:Jp(async()=>{s(!0);try{await l()}finally{s(!1)}Cs.imageShared({analyticsContext:c,source:"image_gen_action_overlay"})}),ariaLabel:o.formatMessage(Bu.share),children:r.jsx(j,{id:"imageGenActionOverlay.shareButton",defaultMessage:"Share"})})}const Bu=be({thumbsUp:{id:"imageGenActionOverlay.thumbsUp",defaultMessage:"Like this image"},thumbsDown:{id:"imageGenActionOverlay.thumbsDown",defaultMessage:"Dislike this image"},inpaint:{id:"imageGenActionOverlay.inpaint",defaultMessage:"Enter inpainting mode"},download:{id:"imageGenActionOverlay.download",defaultMessage:"Download this image"},expand:{id:"imageGenActionOverlay.expand",defaultMessage:"Expand this image"},share:{id:"imageGenActionOverlay.share",defaultMessage:"Share this image"}}),cHe="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIzNiIKICBoZWlnaHQ9IjM2IgogIHZpZXdCb3g9IjAgMCAzNiAzNiIKICBmaWxsPSJub25lIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF80NjY1XzIzMzApIj4KICAgIDxyZWN0IHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiIgZmlsbD0id2hpdGUiIC8+CiAgICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIGZpbGw9IiMxRTFFMUUiIC8+CiAgICA8cmVjdCB4PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSJibGFjayIgLz4KICAgIDxyZWN0IHg9IjE4IiB5PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSIjMUUxRTFFIiAvPgogICAgPHJlY3QgeT0iMTgiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgZmlsbD0iYmxhY2siIC8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMF80NjY1XzIzMzAiPgogICAgICA8cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIiAvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo=",dHe="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIzNiIKICBoZWlnaHQ9IjM2IgogIHZpZXdCb3g9IjAgMCAzNiAzNiIKICBmaWxsPSJub25lIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF80NjY1XzIzMTkpIj4KICAgIDxyZWN0IHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiIgZmlsbD0id2hpdGUiIC8+CiAgICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIGZpbGw9IiNFRkVGRjAiIC8+CiAgICA8cmVjdCB4PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSJ3aGl0ZSIgLz4KICAgIDxyZWN0IHg9IjE4IiB5PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSIjRUZFRkYwIiAvPgogICAgPHJlY3QgeT0iMTgiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgZmlsbD0id2hpdGUiIC8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMF80NjY1XzIzMTkiPgogICAgICA8cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIiAvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo=",uHe=()=>{"use forget";const t=G.c(2),e=ea(),n="url(".concat(e?cHe:dHe,")");let s;return t[0]!==n?(s=r.jsx("div",{className:"absolute inset-0 z-0 w-full overflow-hidden opacity-0 group-hover:opacity-100 group-focus:opacity-100",children:r.jsx("div",{className:"absolute inset-0 bg-auto bg-repeat",style:{backgroundImage:n}})}),t[0]=n,t[1]=s):s=t[1],s},fHe=R(()=>P(()=>import("./dpf52wv18uwxh9t9.js"),__vite__mapDeps([388,1])),{loading:t=>O(t)}),mHe=({src:t,thumbnail:e,alt:n,height:s,width:o,isLoaded:a,onLoad:i,onError:l})=>{"use no forget";const c=ne(),[d,u]=_.useState(!1);return n!=null||(n=c.formatMessage({id:"xoI74H",defaultMessage:"ChatGPT generated image."})),r.jsxs(r.Fragment,{children:[r.jsx("img",{loading:"lazy",decoding:"async",className:W("absolute inset-0 z-0 aspect-square object-cover transition-opacity delay-100 duration-300 ease-[cubic-bezier(.24,.1,.42,.91)]",!a&&"opacity-0"),onLoad:()=>{i()},onError:()=>{l(),i()},alt:n,src:t,width:o,height:s}),e&&e!==t&&r.jsx("img",{loading:"lazy",decoding:"async",alt:n,src:e,className:W("absolute inset-0 z-1 h-full w-full object-cover blur-sm transition-opacity delay-100 duration-300 ease-[cubic-bezier(.24,.1,.42,.91)]",d&&!a?"opacity-100":"opacity-0"),onLoad:()=>u(!0),width:o,height:s}),a&&r.jsx(uHe,{})]})},pHe=t=>!("isPlaceholder"in t)||!t.isPlaceholder,B9=t=>{"use forget";const e=G.c(21),[n,s]=_.useState(!1),[o,a]=_.useState(!1),{index:i,onClick:l}=t;let c;e[0]!==t?(c=pHe(t),e[0]=t,e[1]=c):c=e[1];const d=!c;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=W("group/imagegen-image bg-tertiary relative z-0 flex aspect-square items-center justify-center overflow-clip text-xs"),e[2]=u):u=e[2];let f;e[3]!==i||e[4]!==l||e[5]!==d?(f=()=>{d||l==null||l(i)},e[3]=i,e[4]=l,e[5]=d,e[6]=f):f=e[6];const m=d?void 0:"button",p=d?!0:void 0;let g;e[7]!==n||e[8]!==d||e[9]!==t?(g=d?r.jsx("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:r.jsx("div",{className:"bg-token-bg-tertiary h-full w-full animate-pulse"})}):r.jsxs(r.Fragment,{children:[!n&&r.jsx("div",{className:"bg-token-bg-tertiary absolute inset-0 z-0 animate-pulse"}),r.jsx(mHe,U(w({},t),{isLoaded:n,onLoad:()=>s(!0),onError:()=>a(!0)}))]}),e[7]=n,e[8]=d,e[9]=t,e[10]=g):g=e[10];let h;e[11]!==o||e[12]!==d?(h=o&&!d&&r.jsx(fHe,{className:"text-token-text-tertiary absolute z-0 h-12 w-12 text-red-500"}),e[11]=o,e[12]=d,e[13]=h):h=e[13];let x;return e[14]!==t.children||e[15]!==f||e[16]!==m||e[17]!==p||e[18]!==g||e[19]!==h?(x=r.jsxs("div",{className:u,onClick:f,role:m,"aria-hidden":p,children:[g,h,t.children]}),e[14]=t.children,e[15]=f,e[16]=m,e[17]=p,e[18]=g,e[19]=h,e[20]=x):x=e[20],x},gHe=({onScrollToEnd:t})=>{const e=_.useRef(null);return _.useEffect(()=>{if(!e.current)return;const n=new IntersectionObserver(s=>{s[0].isIntersecting&&t()});return n.observe(e.current),()=>n.disconnect()},[t]),r.jsx("div",{className:"absolute",ref:e})},hHe=["recent","images","bootstrap"],F$=10,B$=25,_He=20,xHe=(t,e)=>({queryKey:["recent","images",t,e],initialPageParam:null,staleTime:120*1e3,queryFn:({pageParam:n})=>{const s=Ye.checkGate("1057463568"),o=s?"/my/recent/v2/image_gen":"/my/recent/image_gen",a=n==null?t?F$:B$:_He,i=w({limit:a,after:n},s?{retrieve_archived:e||void 0}:{include_archived:e||void 0});return ge.safeGet(o,{parameters:{query:i}})},getNextPageParam:({cursor:n})=>n}),U$=()=>({queryKey:hHe,refetchOnMount:"always",enabled:()=>!0,queryFn:()=>ge.safeGet("/images/bootstrap",{})}),cat=t=>t.fetchQuery(U$()),dat=()=>{"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=U$(),t[0]=e):e=t[0],rt(e)};function U9({queryClient:t,includeArchived:e,isMobile:n,imageId:s,operation:o}){t.setQueryData(["recent","images",n,e],a=>a&&U(w({},a),{pages:a.pages.map(i=>{let l=i.items.map(c=>c.id===s?U(w({},c),{is_archived:o==="archive"}):c);return o==="archive"&&!e&&(l=l.filter(c=>c.id!==s)),U(w({},i),{items:l})})}))}const yHe=()=>{"use forget";const t=G.c(7),e=V(),n=!wr();let s;t[0]!==e?(s=Jo(e),t[0]=e,t[1]=s):s=t[1];const o=s;let a;t[2]!==n||t[3]!==o?(a={mutationFn:bHe,onMutate:async c=>{const{imageId:d,operation:u}=c;await Promise.all([o.cancelQueries({queryKey:["recent","images",n,!1]}),o.cancelQueries({queryKey:["recent","images",n,!0]})]);const f=o.getQueryData(["recent","images",n,!1]),m=o.getQueryData(["recent","images",n,!0]);return U9({queryClient:o,includeArchived:!1,isMobile:n,imageId:d,operation:u}),U9({queryClient:o,includeArchived:!0,isMobile:n,imageId:d,operation:u}),{recentImagesUnarchived:f,recentImagesArchived:m}},onError:(c,d,u)=>{const{recentImagesUnarchived:f,recentImagesArchived:m}=u!=null?u:{};o.setQueryData(["recent","images",n,!1],f),o.setQueryData(["recent","images",n,!0],m)},onSuccess:(c,d)=>{const{operation:u}=d;u==="unarchive"&&o.invalidateQueries({queryKey:["recent","images",n,!1]})}},t[2]=n,t[3]=o,t[4]=a):a=t[4];const i=zt(a);let l;return t[5]!==i?(l={archiveMutation:i},t[5]=i,t[6]=l):l=t[6],l},vHe=(t,e)=>{"use forget";var y;const n=G.c(13),s=t===void 0?!1:t,o=e===void 0?"all":e,a=!wr(),i=s||o!=="unarchived";let l;n[0]!==a||n[1]!==i?(l=xHe(a,i),n[0]=a,n[1]=i,n[2]=l):l=n[2];const c=l,{data:d,refetch:u,fetchNextPage:f,hasNextPage:m,isLoading:p,isFetchingNextPage:g}=Tf(c);let h;if(n[3]!==(d==null?void 0:d.pages)||n[4]!==o){e:{const b=(y=d==null?void 0:d.pages.flatMap(CHe).map(SHe))!=null?y:[];if(o==="archived"){h=b.filter(wHe);break e}if(o==="unarchived"){h=b.filter(kHe);break e}h=b}n[3]=d==null?void 0:d.pages,n[4]=o,n[5]=h}else h=n[5];const x=h;let v;return n[6]!==f||n[7]!==m||n[8]!==x||n[9]!==g||n[10]!==p||n[11]!==u?(v={refetch:u,images:x,isLoading:p,isFetchingNextPage:g,hasNextPage:m,fetchNextPage:f},n[6]=f,n[7]=m,n[8]=x,n[9]=g,n[10]=p,n[11]=u,n[12]=v):v=n[12],v};function bHe(t){const{imageId:e,operation:n}=t;return ge.safePatch("/my/image/{gen_id}/".concat(n),{parameters:{path:{gen_id:e}}})}function CHe(t){return t.items}function SHe(t){var e,n,s,o,a,i,l,c;return U(w({},t),{archived:(e=t.is_archived)!=null?e:!1,id:t.id,messageId:(n=t.message_id)!=null?n:null,transformationId:(s=t.transformation_id)!=null?s:null,assetPointer:(o=t.asset_pointer)!=null?o:null,createdAt:t.created_at?new Date(t.created_at*1e3):void 0,conversationId:(a=t.conversation_id)!=null?a:void 0,thumbnail:(c=(l=(i=t.encodings)==null?void 0:i.thumbnail)==null?void 0:l.path)!=null?c:null})}function wHe(t){return t.archived}function kHe(t){return!t.archived}const EHe=R(()=>P(()=>import("./mv59uia51hlqeiwb.js"),__vite__mapDeps([203,1])),{loading:t=>O(t)}),THe=R(()=>P(()=>import("./izrw25jioqty508c.js"),__vite__mapDeps([515,1,10,11,516,517,501,347,348,349,350,319,0,351,352,518])).then(t=>t.ImageGenLibraryLightboxNew)),MHe=t=>{"use forget";var T;const e=G.c(32),{conversation:n,hasMoreImages:s,count:o,images:a,includeArchived:i,isHiddenView:l,onUnhide:c,isFetchingMore:d,onScrollToEnd:u}=t,f=l===void 0?!1:l,m=V(),p=ne(),h=!wr()?F$:B$,x=d?Math.max(o!=null?o:0,h):s?Math.max((o!=null?o:0)-((T=a.length)!=null?T:0),0):0;let v;e[0]!==n||e[1]!==m||e[2]!==i||e[3]!==f?(v=M=>{B.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened");const A=wn(()=>bn(n).id);lt(m,THe,{initialIndex:M,includeArchived:i,visibilityFilter:f?"archived":"unarchived",clientThreadId:n.id,currentModelId:A})},e[0]=n,e[1]=m,e[2]=i,e[3]=f,e[4]=v):v=e[4];const y=v;let b;if(e[5]!==a||e[6]!==p||e[7]!==f||e[8]!==u||e[9]!==c||e[10]!==y||e[11]!==x){let M;e[13]!==a.length||e[14]!==p||e[15]!==f||e[16]!==u||e[17]!==c||e[18]!==y?(M=(I,N)=>{const{id:L,url:D,thumbnail:F,width:$,height:H,title:z,assetPointer:K,conversationId:J,messageId:Z}=I,q=z===void 0?null:z;return r.jsxs(B9,{index:N,src:ms(F!=null?F:D),onClick:()=>y(N),thumbnail:ms(F),width:$,height:H,alt:q,children:[!f&&J!=null&&Z!=null&&r.jsx(iHe,{imageAssetPointer:K!=null?K:void 0,imageUrl:D!=null?D:void 0,clientThreadId:J,serverThreadId:J,messageId:Z,showRatingButtons:!1}),f&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pointer-events-none absolute inset-0 z-20 opacity-0 transition-opacity group-hover/imagegen-image:opacity-100",children:r.jsx("div",{className:"absolute inset-x-0 bottom-0 h-20 bg-linear-to-b from-transparent to-black/30"})}),r.jsx("div",{className:"absolute end-1 bottom-1 z-20 opacity-0 transition-opacity group-hover/imagegen-image:opacity-100",children:r.jsxs("button",{className:"z-11 flex h-10 items-center gap-1 rounded-xl px-2 text-sm font-medium text-white hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md",onClick:se=>{se.stopPropagation(),c==null||c(L)},"aria-label":p.formatMessage({id:"fjXWf2",defaultMessage:"Unhide image"}),children:[r.jsx(EHe,{className:"h-4 w-4"}),r.jsx("span",{className:"max-md:hidden",children:r.jsx(j,{id:"wEyKC9",defaultMessage:"Unhide"})})]})})]}),N===a.length-1&&r.jsx(gHe,{onScrollToEnd:u})]},L)},e[13]=a.length,e[14]=p,e[15]=f,e[16]=u,e[17]=c,e[18]=y,e[19]=M):M=e[19];let A;e[20]!==a.length?(A=(I,N)=>{const L=a.length+N;return r.jsx(B9,{index:L,isPlaceholder:!0},L)},e[20]=a.length,e[21]=A):A=e[21],b=a.map(M).concat(new Array(x).fill(null).map(A)),e[5]=a,e[6]=p,e[7]=f,e[8]=u,e[9]=c,e[10]=y,e[11]=x,e[12]=b}else b=e[12];let C;e[22]!==b?(C=r.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-1 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:b}),e[22]=b,e[23]=C):C=e[23];let S;e[24]!==s||e[25]!==d?(S=s&&d&&r.jsx(_s,{}),e[24]=s,e[25]=d,e[26]=S):S=e[26];let k;e[27]!==S?(k=r.jsx("div",{className:"flex h-8 items-center justify-center",children:S}),e[27]=S,e[28]=k):k=e[28];let E;return e[29]!==C||e[30]!==k?(E=r.jsxs("div",{className:"w-full",children:[C,k]}),e[29]=C,e[30]=k,e[31]=E):E=e[31],E};R(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([149,1])),{loading:t=>O(t)});R(()=>P(()=>import("./mv59uia51hlqeiwb.js"),__vite__mapDeps([203,1])),{loading:t=>O(t)});const AHe=R(()=>P(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([10,1,11])),{loading:t=>O(t)});function uat(t){"use forget";const e=G.c(38),{conversation:n,onClose:s}=t,{images:o,hasNextPage:a,fetchNextPage:i,isFetchingNextPage:l,isLoading:c}=vHe(!0,"archived"),{archiveMutation:d}=yHe(),[u,f]=_.useState(!1),m=ne();let p;e[0]!==d?(p=async F=>{await Promise.all(F.map($=>d.mutateAsync({imageId:$,operation:"unarchive"})))},e[0]=d,e[1]=p):p=e[1];const g=p;let h;e[2]!==g||e[3]!==o?(h=async()=>{o.length&&(f(!0),await g(o.map(IHe)),f(!1))},e[2]=g,e[3]=o,e[4]=h):h=e[4];const x=h;let v;e[5]!==m?(v=m.formatMessage({id:"awwvCt",defaultMessage:"Close"}),e[5]=m,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(AHe,{className:"h-5 w-5"}),e[7]=y):y=e[7];let b;e[8]!==s||e[9]!==v?(b=r.jsx("button",{type:"button","aria-label":v,onClick:s,className:"flex items-center justify-center p-1",children:y}),e[8]=s,e[9]=v,e[10]=b):b=e[10];let C;e[11]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("h1",{className:"px-2 text-lg font-normal select-none [text-box-trim:trim-both]",children:r.jsx(j,{id:"pvfc+c",defaultMessage:"Hidden"})}),e[11]=C):C=e[11];let S;e[12]!==b?(S=r.jsxs("div",{className:"flex items-center gap-1",children:[b,C]}),e[12]=b,e[13]=S):S=e[13];let k;e[14]!==x?(k=!1,e[14]=x,e[15]=k):k=e[15];let E;e[16]!==S||e[17]!==k?(E=r.jsxs("header",{"data-landing-page-load-target":!0,className:"h-header-height bg-token-bg-primary sticky top-0 z-20 flex w-full items-center justify-between px-3 py-3",children:[S,k]}),e[16]=S,e[17]=k,e[18]=E):E=e[18];let T;e[19]!==g?(T=F=>g([F]),e[19]=g,e[20]=T):T=e[20];const M=a!=null?a:!1,A=l||c;let I;e[21]!==n||e[22]!==i||e[23]!==o||e[24]!==T||e[25]!==M||e[26]!==A?(I=r.jsx(MHe,{conversation:n,images:o,count:o.length,includeArchived:!0,isHiddenView:!0,onUnhide:T,hasMoreImages:M,isFetchingMore:A,onScrollToEnd:i}),e[21]=n,e[22]=i,e[23]=o,e[24]=T,e[25]=M,e[26]=A,e[27]=I):I=e[27];let N;e[28]!==u||e[29]!==o.length||e[30]!==c?(N=o.length===0&&!u&&!c&&r.jsx("p",{className:"text-token-text-secondary py-8 text-center",children:r.jsx(j,{id:"BdZGOW",defaultMessage:"No hidden images"})}),e[28]=u,e[29]=o.length,e[30]=c,e[31]=N):N=e[31];let L;e[32]!==I||e[33]!==N?(L=r.jsxs("div",{className:"w-full max-w-[1800px]",children:[I,N]}),e[32]=I,e[33]=N,e[34]=L):L=e[34];let D;return e[35]!==L||e[36]!==E?(D=r.jsxs("div",{className:"max-md:bg-token-bg-primary flex w-full flex-col items-center max-md:fixed max-md:inset-0 max-md:z-50 max-md:overflow-y-auto",children:[E,L]}),e[35]=L,e[36]=E,e[37]=D):D=e[37],D}function IHe(t){return t.id}let Cu=null;function jHe(){return Cu||(Cu=document.createElement("div"),Cu.setAttribute("portal-container",""),document.body.append(Cu)),Cu||null}function fat(t){const{children:e}=t,n=jHe();return n&&QE.createPortal(e,n)}const mat=t=>{"use forget";const e=G.c(6),{borderless:n}=t,s=!n&&"border";let o;e[0]!==s?(o=W("flex h-full w-full flex-col items-center justify-center gap-2 rounded-xl p-8",s),e[0]=s,e[1]=o):o=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("div",{className:"text-token-text-secondary -mt-[100px] text-xl",children:r.jsx(j,{id:"D9mM+/",defaultMessage:"Visualize anything, find it here"})}),e[2]=a):a=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("div",{className:"text-token-text-tertiary text-center text-base text-balance",children:r.jsx(j,{id:"fnxt50",defaultMessage:"Ask ChatGPT to turn any idea into an image, diagram, or visual."})}),e[3]=i):i=e[3];let l;return e[4]!==o?(l=r.jsxs("div",{className:o,children:[a,i]}),e[4]=o,e[5]=l):l=e[5],l},$9="chatgpt_library_last_tab";function pat(t,e){var i;const[n]=Us(),s=Hn(),o=ot(),a=(i=n.get("tab"))!=null?i:"images";_.useEffect(()=>{if(!e)return;const l=n.get("tab");if(!(!!l&&t.includes(l)))try{if(typeof window<"u"){const d=window.localStorage.getItem($9),u=d&&t.includes(d)?d:"images",f=new URLSearchParams(s.search);f.set("tab",u),o({pathname:s.pathname,search:f.toString(),hash:s.hash},{replace:!0})}}catch(d){}},[e,a,t,o,s,n]),_.useEffect(()=>{if(e)try{typeof window<"u"&&t.includes(a)&&window.localStorage.setItem($9,a)}catch(l){}},[e,a,t])}function gat(t){"use forget";const e=G.c(2);if(KD(t)&&t){let s;return e[0]!==t?(s=r.jsx(ZD,{threadId:t}),e[0]=t,e[1]=s):s=e[1],s}return null}function hat(t){"use forget";const e=G.c(8),{clientThreadId:n,messageId:s}=t;let o,a;e[0]!==n||e[1]!==s?(o=()=>{On.closeSharingModal(),Ze(n,d=>{s!=null?(d.scrollToMessageId=s,d.scrollToMessageIsAssistant=!0):(d.scrollToMessageId="finalAgentTurn",d.scrollToMessageIsAssistant=void 0),aY("messageId")})},a=[n,s],e[0]=n,e[1]=s,e[2]=o,e[3]=a):(o=e[2],a=e[3]),_.useEffect(o,a);const i=jt();let l,c;e[4]!==i||e[5]!==n?(l=()=>(mr.retainThread(n),()=>{setTimeout(()=>{i.invalidateQueries(zh({clientThreadId:n}))},0),mr.releaseThread(n)}),c=[n,i],e[4]=i,e[5]=n,e[6]=l,e[7]=c):(l=e[6],c=e[7]),_.useEffect(l,c)}function _at(t,e){"use forget";const n=G.c(4),s=e===void 0?!0:e,o=Nh();let a;n[0]!==o?(a=o?{kind:wt.GizmoInteraction,gizmo_id:o}:{kind:wt.PrimaryAssistant},n[0]=o,n[1]=a):a=n[1];const i=a;let l;n[2]!==s?(l={shouldScrollToBottom:s},n[2]=s,n[3]=l):l=n[3],yY(t,i,l)}function xat({clientThreadId:t}){return i1.useCurrentImage()?r.jsx(NHe,{clientThreadId:t}):null}const NHe=R(()=>P(()=>import("./k08xcpxw1s54olyo.js"),__vite__mapDeps([519,1,10,11,391,14,517,520])).then(t=>t.ImageLightbox));function yat(){const t=_6(n=>n.liveRegionAssertive),e=_6(n=>n.liveRegionPolite);return r.jsxs(r.Fragment,{children:[r.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",id:"live-region-assertive",children:t}),r.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"live-region-polite",children:e})]})}function vat(t){"use forget";var C;const e=G.c(26),{clientThreadId:n}=t,s=V(),o=Hn(),a=ot(),[i,l]=Ve(n,PHe),c=Qn(n);let d;e[0]!==l?(d=l!=null&&js(l),e[0]=l,e[1]=d):d=e[1];const u=d,{data:f}=s8(u?l:void 0),m=f==null?void 0:f.gizmo;let p;e[2]!==s?(p=(C=et(s))==null?void 0:C.normalizedAccountUserId,e[2]=s,e[3]=p):p=e[3];const g=p;let h;e[4]!==o.pathname?(h=o.pathname.includes("/shared/"),e[4]=o.pathname,e[5]=h):h=e[5];const x=h;let v;e[6]!==g||e[7]!==x||e[8]!==u||e[9]!==o.pathname||e[10]!==o.search||e[11]!==a||e[12]!==m||e[13]!==c||e[14]!==i?(v=()=>{if(!u||x||!c||!m||(i==null?void 0:i.id)==null||g==null||i.id===g)return;const S=Vo(c,{project:m,ownerUserId:i.id,accountUserId:g}),k="".concat(o.pathname).concat(o.search);S!==k&&a(S,{replace:!0})},e[6]=g,e[7]=x,e[8]=u,e[9]=o.pathname,e[10]=o.search,e[11]=a,e[12]=m,e[13]=c,e[14]=i,e[15]=v):v=e[15];const y=i==null?void 0:i.id;let b;return e[16]!==g||e[17]!==x||e[18]!==u||e[19]!==o.pathname||e[20]!==o.search||e[21]!==a||e[22]!==m||e[23]!==c||e[24]!==y?(b=[g,x,u,o.pathname,o.search,a,m,c,y],e[16]=g,e[17]=x,e[18]=u,e[19]=o.pathname,e[20]=o.search,e[21]=a,e[22]=m,e[23]=c,e[24]=y,e[25]=b):b=e[25],_.useEffect(v,b),null}function PHe(t){return[t==null?void 0:t.sharedProjectConversationOwner,he.getGizmoId(t)]}function bat(){"use forget";const t=G.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("a",{"data-skip-to-content":"",className:"bg-token-main-surface-primary fixed start-1/2 top-1 z-50 mx-auto w-fit -translate-x-1/2 translate-y-[-100lvh] rounded-full px-3 py-2 focus-visible:translate-y-0 print:hidden",href:"#main",children:r.jsx(j,{id:"thread.skipToContent",defaultMessage:"Skip to content"})}),t[0]=e):e=t[0],e}function Cat(){"use forget";const t=G.c(6),e=V();let n;t[0]!==e?(n=tt(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o,a;t[2]!==e||t[3]!==s?(o=()=>{if(!s)return;const i=ps.getCookie(gs.AuthSessionLoggingId);if(i==null)return;const{flowType:l,connectionType:c}=RHe(e);B.logStructuredEvent(rY,{authSessionLoggingId:i,flowType:l,connectionType:c}),ps.deleteCookie(gs.AuthSessionLoggingId)},a=[s,e],t[2]=e,t[3]=s,t[4]=o,t[5]=a):(o=t[4],a=t[5]),_.useEffect(o,a)}function RHe(t){const{isSignup:e,connectionType:n}=CM(t);return{flowType:e?x6.ACCESS_FLOW_TYPE_SIGNUP:x6.ACCESS_FLOW_TYPE_LOGIN,connectionType:LHe(n)}}function LHe(t){switch(t){case nc.Google:return Oi.ACCESS_FLOW_CONNECTION_TYPE_GOOGLE;case nc.Password:return Oi.ACCESS_FLOW_CONNECTION_TYPE_PASSWORD;case nc.Apple:return Oi.ACCESS_FLOW_CONNECTION_TYPE_APPLE;case nc.Microsoft:return Oi.ACCESS_FLOW_CONNECTION_TYPE_MICROSOFT;case nc.Samlp:return Oi.ACCESS_FLOW_CONNECTION_TYPE_SAMLP;case nc.Oidc:return Oi.ACCESS_FLOW_CONNECTION_TYPE_OIDC;default:return Oi.ACCESS_FLOW_CONNECTION_TYPE_UNSPECIFIED}}function Sat(){"use forget";const t=G.c(12),e=V();let n;t[0]!==e?(n=tt(e),t[0]=e,t[1]=n):n=t[1];const s=n,o=cn(),{accountInfo:a}=OHe();let i;t[2]!==(a==null?void 0:a.isOptedOut)||t[3]!==e||t[4]!==s||t[5]!==o?(i=()=>{var u;if(!o||!s)return;if(!o.email&&!o.phone_number){Re.addError(new Error("User should have either email or phone number, but none are present: ".concat(JSON.stringify(o))));return}if(a!=null&&a.isOptedOut)return;const c=o.email?{email:o.email}:{phoneNumber:(u=o.phone_number)!=null?u:""},d={user:U(w({name:o.name},c),{picture:o.picture,connectionType:CM(e).connectionType,timestamp:Date.now()}),isOptedOut:!1};$$(d)},t[2]=a==null?void 0:a.isOptedOut,t[3]=e,t[4]=s,t[5]=o,t[6]=i):i=t[6];let l;t[7]!==a||t[8]!==e||t[9]!==s||t[10]!==o?(l=[o,s,a,e],t[7]=a,t[8]=e,t[9]=s,t[10]=o,t[11]=l):l=t[11],_.useEffect(i,l)}function OHe(){"use no forget";const[t,e]=_.useState(()=>ps.getCookie(gs.AccountInfo)),n=_.useMemo(()=>{if(!t)return null;try{return JSON.parse(t)}catch(o){return null}},[t]),s=_.useCallback(()=>{n&&(n.isOptedOut=!0,n.user=void 0,$$(n),e(void 0))},[n]);return{accountInfo:n,removeAccount:s}}function $$(t){ps.setCookie(gs.AccountInfo,JSON.stringify(t),{maxAge:720*60*60})}function wat(t,e,n){var a;if(((a=t.getQueryState(e))==null?void 0:a.status)==="success")return n(),()=>{};const s=iY(e),o=t.getQueryCache().subscribe(i=>{i.query.queryHash===s&&i.query.state.status==="success"&&(n(),o())});return o}export{Oye as $,Bl as A,$l as B,fl as C,ize as D,Vl as E,lL as F,fKe as G,aze as H,vWe as I,Bn as J,yI as K,rze as L,CO as M,Gre as N,Tb as O,va as P,Ar as Q,yWe as R,qh as S,vKe as T,SKe as U,AWe as V,lze as W,lKe as X,wKe as Y,YKe as Z,lQe as _,yY as a,Bo as a$,bKe as a0,AKe as a1,NKe as a2,PKe as a3,CKe as a4,FKe as a5,ZKe as a6,qKe as a7,JKe as a8,tQe as a9,Fe as aA,HSe as aB,VSe as aC,bJe as aD,Pfe as aE,un as aF,ln as aG,vn as aH,st as aI,dS as aJ,Bx as aK,RYe as aL,LYe as aM,dt as aN,att as aO,OGe as aP,Btt as aQ,Ott as aR,qtt as aS,Htt as aT,Ktt as aU,Da as aV,qe as aW,Fn as aX,mnt as aY,db as aZ,sat as a_,eQe as aa,DKe as ab,OKe as ac,LKe as ad,DZe as ae,XKe as af,OZe as ag,nxe as ah,l5 as ai,Gye as aj,wI as ak,Zo as al,kP as am,$p as an,o6e as ao,z4e as ap,kN as aq,BQe as ar,MP as as,UQe as at,mtt as au,qQe as av,zQe as aw,utt as ax,Ir as ay,b0e as az,pI as b,fS as b$,Kb as b0,HWe as b1,VWe as b2,RIe as b3,Iqe as b4,Aqe as b5,jqe as b6,xn as b7,wet as b8,gnt as b9,Rb as bA,Y1 as bB,hYe as bC,WQe as bD,Lv as bE,tm as bF,OHe as bG,YI as bH,wNe as bI,Hd as bJ,rqe as bK,tKe as bL,wO as bM,Qd as bN,mU as bO,om as bP,zRe as bQ,lie as bR,zqe as bS,uie as bT,Ab as bU,hie as bV,vYe as bW,CYe as bX,wP as bY,Mtt as bZ,c2e as b_,lnt as ba,int as bb,cnt as bc,OM as bd,C2 as be,_ze as bf,Ase as bg,yMe as bh,xMe as bi,$b as bj,XWe as bk,JWe as bl,Xne as bm,Jne as bn,ese as bo,mKe as bp,eze as bq,vf as br,rZe as bs,ret as bt,IP as bu,$Ge as bv,Ii as bw,zf as bx,KM as by,QM as bz,oYe as c,kb as c$,Ost as c0,Zs as c1,Zx as c2,Yd as c3,WX as c4,ZX as c5,i1e as c6,ks as c7,La as c8,$N as c9,GGe as cA,vde as cB,Xd as cC,wnt as cD,Ent as cE,E4 as cF,YZe as cG,zU as cH,tet as cI,net as cJ,Hx as cK,Yh as cL,Snt as cM,TR as cN,h3e as cO,iy as cP,ww as cQ,vqe as cR,xqe as cS,DF as cT,w$e as cU,RXe as cV,Ot as cW,bCe as cX,ti as cY,dd as cZ,jre as c_,eot as ca,xi as cb,Mhe as cc,Bs as cd,Zn as ce,zKe as cf,WKe as cg,GKe as ch,o3e as ci,GU as cj,E1 as ck,M1 as cl,cm,T1 as cn,rK as co,E7 as cp,j1 as cq,mAe as cr,d5 as cs,rb as ct,Fxe as cu,$S as cv,VKe as cw,i1 as cx,iR as cy,qxe as cz,WHe as d,lat as d$,wqe as d0,Mr as d1,ol as d2,Uc as d3,Ds as d4,lst as d5,qR as d6,lIe as d7,D$ as d8,yde as d9,hoe as dA,Yb as dB,Zb as dC,vfe as dD,VHe as dE,mY as dF,IJe as dG,QYe as dH,Wfe as dI,TJe as dJ,by as dK,tn as dL,ewe as dM,h0 as dN,KYe as dO,ZYe as dP,MJe as dQ,Vd as dR,q_ as dS,KR as dT,Sme as dU,ant as dV,dIe as dW,uIe as dX,QVe as dY,yIe as dZ,Cs as d_,e$ as da,yHe as db,vve as dc,vHe as dd,Ko as de,sm as df,vk as dg,o$ as dh,zWe as di,SI as dj,nse as dk,ene as dl,KVe as dm,ab as dn,UGe as dp,xat as dq,r$ as dr,_d as ds,wYe as dt,uj as du,Mx as dv,Sse as dw,Vj as dx,bze as dy,voe as dz,xY as e,ZZe as e$,_We as e0,mg as e1,gA as e2,yf as e3,VGe as e4,JI as e5,hf as e6,jne as e7,vZe as e8,eKe as e9,Uqe as eA,VP as eB,SN as eC,NYe as eD,Gfe as eE,Fqe as eF,fZe as eG,Bqe as eH,AYe as eI,IYe as eJ,Qb as eK,oZe as eL,jse as eM,Que as eN,cZe as eO,zfe as eP,I1 as eQ,GP as eR,e1 as eS,dZe as eT,zGe as eU,tue as eV,tI as eW,SZe as eX,r1e as eY,wZe as eZ,IZe as e_,bZe as ea,Fee as eb,rw as ec,Qpe as ed,que as ee,_de as ef,$qe as eg,fYe as eh,lYe as ei,hZe as ej,ule as ek,Kqe as el,uKe as em,cYe as en,rYe as eo,Yue as ep,HP as eq,cle as er,cKe as es,Wze as et,eqe as eu,jme as ev,mle as ew,fle as ex,gle as ey,Nb as ez,$He as f,Xme as f$,WZe as f0,zZe as f1,Ehe as f2,QZe as f3,JZe as f4,Xpe as f5,LZe as f6,jZe as f7,qZe as f8,DGe as f9,Gl as fA,w1 as fB,zHe as fC,qHe as fD,_Ze as fE,Sm as fF,Kfe as fG,ave as fH,xQe as fI,FQe as fJ,H1 as fK,F4e as fL,UD as fM,GD as fN,Xde as fO,WM as fP,IQe as fQ,uD as fR,rnt as fS,hU as fT,iIe as fU,ont as fV,dnt as fW,qa as fX,nm as fY,gXe as fZ,gZ as f_,FGe as fa,EZe as fb,KHe as fc,KZe as fd,i5 as fe,ZGe as ff,KGe as fg,QGe as fh,Sg as fi,cr as fj,OP as fk,yKe as fl,Vg as fm,xKe as fn,ew as fo,BKe as fp,MYe as fq,pve as fr,t1 as fs,FO as ft,f1 as fu,AP as fv,Ive as fw,Tde as fx,jve as fy,kve as fz,zh as g,Fs as g$,dQe as g0,uQe as g1,E9e as g2,Pb as g3,Hst as g4,Ek as g5,sNe as g6,Lde as g7,gb as g8,Ptt as g9,Wwe as gA,gl as gB,ett as gC,Yl as gD,Sl as gE,Em as gF,Hj as gG,mqe as gH,yO as gI,v1 as gJ,zd as gK,V5 as gL,$5 as gM,Wh as gN,mm as gO,xYe as gP,Bb as gQ,nde as gR,Ig as gS,Db as gT,Kh as gU,a1 as gV,VR as gW,Qu as gX,O2 as gY,aQe as gZ,Fot as g_,zl as ga,Qte as gb,Lte as gc,Ny as gd,GR as ge,P1 as gf,$Ke as gg,DR as gh,WR as gi,iKe as gj,rKe as gk,Jye as gl,aKe as gm,A3e as gn,Zh as go,zxe as gp,Ace as gq,mYe as gr,_Ge as gs,ake as gt,dke as gu,G9e as gv,Rwe as gw,Awe as gx,Fwe as gy,Zve as gz,Ma as h,fGe as h$,Oa as h0,oQe as h1,al as h2,XZe as h3,Cse as h4,N4 as h5,S2 as h6,QHe as h7,iI as h8,$r as h9,bve as hA,Eve as hB,Qqe as hC,Rot as hD,pat as hE,Lot as hF,Oot as hG,aat as hH,fnt as hI,Yet as hJ,T6e as hK,Ntt as hL,unt as hM,_at as hN,hat as hO,kYe as hP,gat as hQ,qot as hR,rat as hS,iat as hT,ja as hU,aot as hV,iet as hW,Hwe as hX,NDe as hY,oot as hZ,KU as h_,xWe as ha,Ul as hb,vr as hc,IWe as hd,jWe as he,TQe as hf,EQe as hg,kQe as hh,CQe as hi,bQe as hj,Rw as hk,vQe as hl,xbe as hm,ybe as hn,yQe as ho,MQe as hp,AQe as hq,SQe as hr,wQe as hs,Ks as ht,R$ as hu,dat as hv,uat as hw,mat as hx,MHe as hy,fat as hz,eZ as i,xot as i$,tot as i0,not as i1,lot as i2,uot as i3,fot as i4,cot as i5,dot as i6,rot as i7,b1 as i8,Nst as i9,dR as iA,JXe as iB,XXe as iC,Je as iD,pOe as iE,k1e as iF,Xst as iG,bst as iH,Cst as iI,CZe as iJ,Gst as iK,hot as iL,Dst as iM,Zst as iN,Fst as iO,mot as iP,LQe as iQ,OQe as iR,gOe as iS,MKe as iT,yot as iU,Wst as iV,zst as iW,qst as iX,Yst as iY,pot as iZ,got as i_,oL as ia,iLe as ib,aL as ic,est as id,knt as ie,s_e as ig,qOe as ih,R1e as ii,tLe as ij,vot as ik,ai as il,mWe as im,_ot as io,bot as ip,xXe as iq,Sot as ir,Cot as is,Jst as it,_qe as iu,qet as iv,Wet as iw,gWe as ix,vke as iy,QXe as iz,sze as j,Ky as j$,Ast as j0,Kst as j1,Qst as j2,Ist as j3,jst as j4,Jnt as j5,Ust as j6,wot as j7,t8e as j8,Bd as j9,EN as jA,cAe as jB,hle as jC,wXe as jD,w8e as jE,Zqe as jF,Yqe as jG,Fx as jH,fd as jI,NXe as jJ,rB as jK,hI as jL,fIe as jM,eke as jN,IKe as jO,xxe as jP,TKe as jQ,rye as jR,Xxe as jS,Xb as jT,v8e as jU,FR as jV,di as jW,HHe as jX,eGe as jY,hd as jZ,w$ as j_,Mm as ja,aI as jb,xt as jc,Mot as jd,Iot as je,HO as jf,$ot as jg,vst as jh,Uot as ji,Bot as jj,Dot as jk,fAe as jl,oXe as jm,dg as jn,S7e as jo,MR as jp,NZe as jq,Tnt as jr,XHe as js,Nxe as jt,fne as ju,$st as jv,Bst as jw,Rce as jx,pYe as jy,Ub as jz,oze as k,Jhe as k$,zO as k0,iQe as k1,pFe as k2,XI as k3,Eqe as k4,kqe as k5,Sqe as k6,Cqe as k7,fqe as k8,Mqe as k9,lN as kA,tqe as kB,Xze as kC,Vze as kD,Oqe as kE,Zze as kF,Yze as kG,Dze as kH,qze as kI,Jze as kJ,Qze as kK,tze as kL,Rqe as kM,Eze as kN,cqe as kO,pqe as kP,Sze as kQ,Lze as kR,sqe as kS,aqe as kT,$ze as kU,Nze as kV,Gze as kW,Bze as kX,aae as kY,mZe as kZ,gZe as k_,$re as ka,Nqe as kb,Pqe as kc,dqe as kd,uqe as ke,Cze as kf,Lqe as kg,Dqe as kh,Nae as ki,Aae as kj,Sae as kk,rae as kl,Tae as km,Hre as kn,lqe as ko,mae as kp,zze as kq,Oze as kr,Rze as ks,Uze as kt,Hze as ku,jze as kv,nqe as kw,oqe as kx,Kze as ky,yqe as kz,vze as l,JQe as l$,uN as l0,MM as l1,Ftt as l2,Utt as l3,$tt as l4,Vtt as l5,Ltt as l6,Dtt as l7,ztt as l8,Ytt as l9,GYe as lA,oae as lB,qYe as lC,XYe as lD,JYe as lE,eZe as lF,p7 as lG,pQe as lH,Zye as lI,pU as lJ,AJe as lK,sot as lL,_se as lM,X2 as lN,Lst as lO,Rst as lP,X1e as lQ,hm as lR,hA as lS,dA as lT,Dv as lU,W1e as lV,u5 as lW,cI as lX,qie as lY,HU as lZ,TZe as l_,Gtt as la,Wtt as lb,Ztt as lc,Qtt as ld,iA as le,mf as lf,yr as lg,gqe as lh,cat as li,Jtt as lj,Sat as lk,Cat as ll,vat as lm,bat as ln,yat as lo,Rtt as lp,Aot as lq,KXe as lr,jot as ls,Tot as lt,Not as lu,JSe as lv,WYe as lw,zYe as lx,YYe as ly,HYe as lz,us as m,Stt as m$,TYe as m0,eA as m1,SX as m2,G6e as m3,xet as m4,Rp as m5,Yi as m6,Wr as m7,Yu as m8,$Te as m9,HGe as mA,c5 as mB,yYe as mC,hS as mD,k7e as mE,qSe as mF,pnt as mG,Fl as mH,c1 as mI,Tqe as mJ,u4e as mK,Qa as mL,_le as mM,qr as mN,dce as mO,mce as mP,NWe as mQ,RWe as mR,LWe as mS,vet as mT,S1 as mU,Loe as mV,Doe as mW,bYe as mX,GHe as mY,Do as mZ,lj as m_,ZB as ma,KB as mb,bqe as mc,NM as md,Q5 as me,oke as mf,vm as mg,tke as mh,ske as mi,snt as mj,DL as mk,Lx as ml,dWe as mm,vne as mn,aye as mo,KD as mp,iYe as mq,jKe as mr,Qme as ms,rAe as mt,tye as mu,$xe as mv,nDe as mw,hqe as mx,nJ as my,Xw as mz,JM as n,ost as n$,Vst as n0,VMe as n1,Bet as n2,p4 as n3,PUe as n4,sr as n5,Dy as n6,cA as n7,I2e as n8,xte as n9,L7e as nA,gke as nB,Wnt as nC,Gnt as nD,Sn as nE,Hnt as nF,Vnt as nG,n4 as nH,w7e as nI,Qj as nJ,P7e as nK,bXe as nL,TEe as nM,zXe as nN,qXe as nO,nst as nP,nB as nQ,yst as nR,KO as nS,Eot as nT,ATe as nU,jnt as nV,_st as nW,xst as nX,mst as nY,aGe as nZ,sst as n_,em as na,o4e as nb,dte as nc,UL as nd,vi as ne,D1 as nf,qd as ng,Zie as nh,dhe as ni,ym as nj,qGe as nk,ny as nl,WL as nm,Yn as nn,Tt as no,_te as np,$Qe as nq,ob as nr,lC as ns,aYe as nt,_I as nu,PWe as nv,zj as nw,ove as nx,eB as ny,O7e as nz,yze as o,m1e as o$,hst as o0,bi as o1,kXe as o2,fst as o3,gst as o4,pA as o5,U6e as o6,DQ as o7,k5 as o8,vGe as o9,_nt as oA,Int as oB,Fnt as oC,Unt as oD,Bnt as oE,hnt as oF,fPe as oG,Dnt as oH,zot as oI,Got as oJ,Hot as oK,Znt as oL,Rnt as oM,Yot as oN,Zot as oO,ynt as oP,bnt as oQ,qnt as oR,Ont as oS,tst as oT,rre as oU,vA as oV,F1 as oW,J3e as oX,C5 as oY,T4 as oZ,Yme as o_,cst as oa,ust as ob,dst as oc,Mnt as od,Ant as oe,dK as of,nPe as og,vnt as oh,xnt as oi,Knt as oj,znt as ok,Ynt as ol,Vot as om,E7e as on,MNe as oo,$nt as op,GJe as oq,HJe as or,WJe as os,J5 as ot,zet as ou,Xnt as ov,vY as ow,nat as ox,Lnt as oy,Cnt as oz,qWe as p,qf as p$,Sw as p0,b1e as p1,l3e as p2,hw as p3,RGe as p4,e3e as p5,LGe as p6,_ye as p7,fWe as p8,Axe as p9,N8e as pA,ytt as pB,Jb as pC,cQe as pD,Ctt as pE,pZe as pF,Fve as pG,wtt as pH,Ett as pI,ktt as pJ,UQ as pK,Ht as pL,Itt as pM,Att as pN,jtt as pO,Ttt as pP,QWe as pQ,UWe as pR,BWe as pS,$We as pT,KWe as pU,ZWe as pV,GWe as pW,WWe as pX,e$e as pY,n$e as pZ,rQe as p_,kKe as pa,EKe as pb,Gd as pc,JL as pd,Rxe as pe,Wxe as pf,Jot as pg,Kot as ph,Qot as pi,MTe as pj,RQe as pk,NQe as pl,jQe as pm,T5 as pn,_Qe as po,mQe as pp,ftt as pq,_tt as pr,Io as ps,gtt as pt,htt as pu,SYe as pv,xtt as pw,btt as px,vtt as py,ptt as pz,YWe as q,EXe as q$,sQe as q0,bGe as q1,bm as q2,HUe as q3,qO as q4,E5 as q5,FU as q6,pst as q7,FQ as q8,REe as q9,y7e as qA,pXe as qB,w7 as qC,Xj as qD,iqe as qE,$te as qF,Vve as qG,Wg as qH,Qnt as qI,er as qJ,V6e as qK,H6e as qL,SWe as qM,Rne as qN,cN as qO,qre as qP,AI as qQ,Jme as qR,h7e as qS,Yt as qT,g7e as qU,rXe as qV,Ud as qW,U7e as qX,SXe as qY,nze as qZ,uZe as q_,stt as qa,Wot as qb,T$e as qc,E$e as qd,R9 as qe,yZ as qf,RB as qg,Iet as qh,jet as qi,Net as qj,Pet as qk,Uet as ql,PGe as qm,jEe as qn,Ret as qo,FTe as qp,Vet as qq,Het as qr,ntt as qs,zhe as qt,XDe as qu,wM as qv,uue as qw,Gb as qx,hXe as qy,d2 as qz,bWe as r,pae as r$,CXe as r0,CGe as r1,SGe as r2,pee as r3,dJe as r4,sXe as r5,LJe as r6,gee as r7,QJe as r8,OJe as r9,OXe as rA,nXe as rB,eXe as rC,xJe as rD,sKe as rE,PCe as rF,oKe as rG,AXe as rH,MXe as rI,hJe as rJ,LXe as rK,PXe as rL,y7 as rM,fXe as rN,uXe as rO,DXe as rP,FXe as rQ,FJe as rR,NJe as rS,KJe as rT,zJe as rU,UJe as rV,DJe as rW,RJe as rX,mJe as rY,qJe as rZ,m7 as r_,owe as ra,PJe as rb,jJe as rc,BJe as rd,_Xe as re,cXe as rf,mXe as rg,$Je as rh,YJe as ri,ZJe as rj,VJe as rk,gJe as rl,IXe as rm,nKe as rn,oJe as ro,Z1e as rp,yJe as rq,_Je as rr,XJe as rs,tXe as rt,JJe as ru,kJe as rv,CJe as rw,jXe as rx,wJe as ry,SJe as rz,ml as s,EGe as s$,aZe as s0,Ake as s1,uB as s2,UXe as s3,oa as s4,set as s5,oet as s6,ike as s7,Jke as s8,$D as s9,Zet as sA,HQe as sB,s8e as sC,Xet as sD,Jet as sE,d8e as sF,pet as sG,a8e as sH,ott as sI,o8e as sJ,itt as sK,a4 as sL,xGe as sM,yke as sN,eJe as sO,XQe as sP,QQe as sQ,Kf as sR,ZXe as sS,Zce as sT,aJe as sU,TXe as sV,ale as sW,eet as sX,Q6e as sY,_Ke as sZ,kZe as s_,det as sa,cet as sb,VN as sc,_Ye as sd,Tet as se,Cet as sf,ket as sg,bet as sh,gYe as si,het as sj,nF as sk,yet as sl,Hce as sm,B6 as sn,i4 as so,GQe as sp,c8e as sq,Qet as sr,Ket as ss,i8e as st,Aet as su,get as sv,_et as sw,r8e as sx,Met as sy,rtt as sz,FWe as t,h1 as t$,cB as t0,YXe as t1,wGe as t2,km as t3,Cke as t4,ZQe as t5,KQe as t6,$Xe as t7,mee as t8,Kd as t9,kGe as tA,vXe as tB,iJe as tC,VXe as tD,Mv as tE,YQe as tF,ltt as tG,dtt as tH,ctt as tI,OYe as tJ,$Ye as tK,fze as tL,mze as tM,uze as tN,sae as tO,gze as tP,Eg as tQ,kse as tR,cze as tS,nae as tT,eae as tU,Wj as tV,tae as tW,z_ as tX,Tse as tY,W_ as tZ,_1 as t_,BXe as ta,lJe as tb,cJe as tc,Vv as td,TGe as te,sJ as tf,WXe as tg,KKe as th,QKe as ti,sB as tj,nJe as tk,sJe as tl,ui as tm,P4e as tn,y4e as to,fet as tp,xZe as tq,yZe as tr,DQe as ts,rJe as tt,uet as tu,GXe as tv,HXe as tw,X6e as tx,tJe as ty,iye as tz,xN as u,IB as u$,aU as u0,DMe as u1,UMe as u2,Gj as u3,Toe as u4,yGe as u5,Pv as u6,iZe as u7,lZe as u8,CWe as u9,dHe as uA,GVe as uB,WVe as uC,da as uD,iHe as uE,ul as uF,OZ as uG,FZ as uH,BM as uI,uS as uJ,BYe as uK,FX as uL,MMe as uM,EMe as uN,ko as uO,u1 as uP,EJe as uQ,Eee as uR,kw as uS,jc as uT,Get as uU,A$ as uV,LTe as uW,$7 as uX,Let as uY,kB as uZ,SB as u_,Pne as ua,Z1 as ub,aet as uc,PYe as ud,wfe as ue,UYe as uf,FYe as ug,Afe as uh,cS as ui,Rfe as uj,DYe as uk,dze as ul,Fze as um,Mse as un,pze as uo,hze as up,VYe as uq,Xf as ur,xze as us,wx as ut,P6e as uu,gKe as uv,p2e as uw,Uye as ux,U4 as uy,cHe as uz,Jv as v,co as v$,TB as v0,nh as v1,$et as v2,jB as v3,EB as v4,wB as v5,xEe as v6,NB as v7,PB as v8,_Ee as v9,xie as vA,Fp as vB,C0e as vC,h4e as vD,x4e as vE,z7 as vF,Xqe as vG,Pie as vH,eYe as vI,tYe as vJ,qqe as vK,mne as vL,Wqe as vM,Gqe as vN,Hqe as vO,fie as vP,Vqe as vQ,cie as vR,die as vS,k8e as vT,wie as vU,Jqe as vV,hKe as vW,Os as vX,cWe as vY,ci as vZ,uWe as v_,AB as va,MB as vb,RTe as vc,Oet as vd,BB as ve,Iv as vf,AEe as vg,EEe as vh,Fet as vi,PEe as vj,OTe as vk,kEe as vl,Ap as vm,UHe as vn,SEe as vo,EWe as vp,Fne as vq,TWe as vr,Dne as vs,Pze as vt,MWe as vu,Bne as vv,wWe as vw,Lne as vx,kWe as vy,One as vz,Dp as w,Dxe as w$,m2e as w0,FZe as w1,tr as w2,$Ze as w3,VZe as w4,JGe as w5,BZe as w6,UZe as w7,Wx as w8,yl as w9,pJe as wA,EYe as wB,oxe as wC,FB as wD,Sx as wE,Is as wF,ast as wG,rst as wH,ist as wI,S$e as wJ,lTe as wK,$Ee as wL,VEe as wM,Det as wN,Cw as wO,HKe as wP,pne as wQ,W5 as wR,z5 as wS,wF as wT,q5 as wU,Xye as wV,SO as wW,ry as wX,kO as wY,UKe as wZ,f1e as w_,lWe as wa,Yie as wb,lxe as wc,HZe as wd,sYe as we,ZHe as wf,GZe as wg,nYe as wh,XGe as wi,PR as wj,xI as wk,yte as wl,hte as wm,YGe as wn,uf as wo,C1 as wp,dGe as wq,pZ as wr,Dd as ws,lGe as wt,cGe as wu,uGe as wv,iGe as ww,rGe as wx,RO as wy,ttt as wz,xf as x,YJ as x$,eF as x0,kot as x1,VQe as x2,x6e as x3,ree as x4,lte as x5,pKe as x6,YHe as x7,sGe as x8,nGe as x9,aWe as xA,rWe as xB,iWe as xC,eWe as xD,KI as xE,hWe as xF,NX as xG,vI as xH,Y0 as xI,Cl as xJ,xD as xK,ql as xL,B1 as xM,npe as xN,spe as xO,SA as xP,MGe as xQ,NGe as xR,IGe as xS,qs as xT,xX as xU,TA as xV,_x as xW,jGe as xX,K6 as xY,eX as xZ,AGe as x_,tGe as xa,Bee as xb,mI as xc,kee as xd,pWe as xe,BGe as xf,JHe as xg,oGe as xh,WGe as xi,nC as xj,Eet as xk,Gse as xl,qse as xm,yC as xn,zse as xo,Wse as xp,$se as xq,Vse as xr,Hse as xs,OWe as xt,AZe as xu,MZe as xv,PQe as xw,DWe as xx,tWe as xy,nWe as xz,xse as y,RZe as y$,Z6 as y0,Y6 as y1,kJ as y2,ent as y3,tnt as y4,nnt as y5,Xtt as y6,GSe as y7,WSe as y8,lm as y9,Bv as yA,tZe as yB,Tst as yC,sZe as yD,kst as yE,Mst as yF,wst as yG,fJe as yH,eat as yI,Xot as yJ,qRe as yK,N$ as yL,eVe as yM,uJe as yN,S7 as yO,jYe as yP,vJe as yQ,Nu as yR,O2e as yS,met as yT,ju as yU,Dc as yV,sI as yW,oAe as yX,tL as yY,_ie as yZ,Bye as y_,p7e as ya,m7e as yb,iXe as yc,aXe as yd,dXe as ye,kze as yf,wze as yg,FN as yh,Nnt as yi,Pnt as yj,aK as yk,lXe as yl,nZe as ym,hu as yn,Cb as yo,Mze as yp,Ioe as yq,Tze as yr,Aze as ys,Ize as yt,Sst as yu,CN as yv,Est as yw,HRe as yx,tat as yy,$U as yz,nr as z,PZe as z0,xg as z1,O1e as z2,sWe as z3,oWe as z4,wj as z5,yXe as z6,wat as z7,Mc as z8,B_ as z9,q1 as zA,Mke as zB,Xke as zC,vB as zD,Nr as zE,c4 as zF,hEe as zG,PTe as zH,Pst as zI,iot as zJ,AFe as zK,tUe as zL,Pot as zM,a_ as zN,F4 as zO,oat as zP,mGe as za,pGe as zb,gGe as zc,hGe as zd,Ine as ze,sre as zf,mie as zg,rm as zh,im as zi,dYe as zj,uYe as zk,Zue as zl,gm as zm,dKe as zn,f5 as zo,RKe as zp,nQe as zq,BO as zr,Cm as zs,Tve as zt,eD as zu,fQe as zv,gQe as zw,hQe as zx,wm as zy,jr as zz};
//# sourceMappingURL=fyw02vlaiv2vq6cj.js.map
