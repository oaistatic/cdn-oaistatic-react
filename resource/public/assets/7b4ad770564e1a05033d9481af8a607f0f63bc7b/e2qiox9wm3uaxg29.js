const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/p1oh54il7vkjezez.js","assets/kfrdmkli83ureki3.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/hn0hl0c8spo9mfdq.js"])))=>i.map(i=>d[i]);
var mt=Object.defineProperty,dt=Object.defineProperties;var ht=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var te=(e,r,n)=>r in e?mt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,N=(e,r)=>{for(var n in r||(r={}))ne.call(r,n)&&te(e,n,r[n]);if(O)for(var n of O(r))re.call(r,n)&&te(e,n,r[n]);return e},k=(e,r)=>dt(e,ht(r));var v=(e,r)=>{var n={};for(var t in e)ne.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&O)for(var t of O(e))r.indexOf(t)<0&&re.call(e,t)&&(n[t]=e[t]);return n};import{fc as gt,x7 as yt,x8 as _t,x9 as bt,xa as se,qW as wt,iD as Ae,xb as oe,h8 as Nt,xc as R,uR as xt,xd as H,fP as Te,de as Ct,s4 as kt,v as C,eU as St,xe as Le,xf as F,h7 as Et,xg as At,xh as Tt,xi as Lt,i as Rt,ct as Dt}from"./fyw02vlaiv2vq6cj.js";import{az as Re,u as Ot,cw as vt,d as De,_ as S,cy as It,br as Pt,$ as T,a0 as L,p as Ft,cq as Mt,e6 as Ut,oC as jt,oD as Oe,R as Bt,ho as Ht,ba as $t,gX as K,n as qt,bS as Gt,kk as Wt,wl as Kt,a6 as zt,jB as Vt,jT as Yt,aA as Qt,cr as P,nO as ve,wm as Xt}from"./kw08ajijqinojrwh.js";import{_ as Ie,r as x,j as w,R as z,u as Jt,h as Zt,e as en,b as tn}from"./kfrdmkli83ureki3.js";import{r as Pe,a as Fe,s as A}from"./bdqubk4ywd0en7sc.js";import{r as Me}from"./mgt4kmm4im6a7le7.js";import{r as nn,a as Ue}from"./mer2el06ski1l09m.js";import{f as je,p as ie,n as ae,h as Be,s as V,d as rn,w as Y,a as sn,r as on}from"./m3joncw451cqbul2.js";import{k as ce}from"./lep2wptoy14cfe2w.js";import{f as an,r as He,c as le}from"./i7t1qh3u8s8bvtb8.js";import{t as cn}from"./hu1bt0oauegdhua6.js";import{u as $}from"./ipjj058rvhjq2uu2.js";import{r as $e}from"./kbj1b07s2z6vxqkg.js";import{r as ln}from"./esgn9c4esm3mlqc4.js";const un=Re(()=>Ie(()=>import("./p1oh54il7vkjezez.js"),__vite__mapDeps([0,1,2,3])).then(e=>e.SafeLinkWarningModal)),ue={},fe={},pe={};function me(e,r){return"".concat(e,"::").concat(r)}function fn(o){var c=o,{node:e,onClick:r,children:n,messageId:t,href:s,disableSafeURLs:a}=c,i=v(c,["node","onClick","children","messageId","href","disableSafeURLs"]);var X,J,Z,ee;const l=Ot(),u=vt();let m=r;const p=(X=e==null?void 0:e.properties)==null?void 0:X.href,g=x.useContext(gt),d=De(()=>u==null?void 0:u.serverId$()),f=yt(d,s,(g==null?void 0:g.useSafeUrls)&&!a),h=_t(u==null?void 0:u.id,t),_=(ee=(Z=(J=h==null?void 0:h.metadata)==null?void 0:J.__internal)==null?void 0:Z.utm_tags)!=null?ee:{},b=bt(u==null?void 0:u.id),M=!a&&f===void 0;return t!=null&&typeof p=="string"&&p.includes("/bing/redirect")&&(ue[t]||(S.logEvent("Browsing Show Bing Link",{id:t,content:p}),ue[t]=!0),m=D=>{fe[t]||(S.logEvent("Browsing Click Bing Link",{id:t,content:p}),fe[t]=!0),r==null||r(D)}),m=D=>{const U=""+p;if(t&&!pe[me(t,U)]){const pt=f||M?"URL Clicked Allowed":"URL Clicked Blocked";S.logEvent(pt,{id:t,content:U}),pe[me(t,U)]=!0}r==null||r(D),M&&s&&(D.preventDefault(),Pt(l,un,{urls:se(s,_,b)}))},w.jsx(w.Fragment,{children:w.jsx("a",k(N({onClick:m},i),{className:It(i.className,M&&"cursor-pointer"),href:f&&se(f,_,b),rel:"noopener",children:n}))})}const pn="w";function mn(a){var i=a,{messageId:e,conversation:r,text:n,children:t}=i,s=v(i,["messageId","conversation","text","children"]);const o=window.location.origin,c="".concat(o,"?q=").concat(encodeURIComponent(n)),l=wt(),u=x.useCallback(async m=>{m.preventDefault(),T.count(L.DEFAULT,"instant_follow_up_anchor_clicked"),S.logEventWithStatsig("Instant Follow Up Anchor Clicked","chatgpt_instant_follow_up_anchor_clicked",{clientThreadId:r.id,messageId:e}),l(m,{text:n,type:Ae.Reply},[],0)},[r,e,n,l]);return w.jsx(fn,k(N({},s),{href:c,disableSafeURLs:!0,messageId:e,className:"cursor-pointer",onClick:u,children:t}))}const ps=z.memo(mn),de=/[#.]/g;function dn(e,r){const n=e||"",t={};let s=0,a,i;for(;s<n.length;){de.lastIndex=s;const o=de.exec(n),c=n.slice(s,o?o.index:n.length);c&&(a?a==="#"?t.id=c:Array.isArray(t.className)?t.className.push(c):t.className=[c]:i=c,s+=c.length),o&&(a=o[0],s++)}return{type:"element",tagName:i||r||"div",properties:t,children:[]}}const hn=new Set(["button","menu","reset","submit"]),q={}.hasOwnProperty;function qe(e,r,n){const t=n&&bn(n);function s(a,i,...o){let c=-1,l;if(a==null){l={type:"root",children:[]};const u=i;o.unshift(u)}else if(l=dn(a,r),l.tagName=l.tagName.toLowerCase(),t&&q.call(t,l.tagName)&&(l.tagName=t[l.tagName]),gn(i,l.tagName)){let u;for(u in i)q.call(i,u)&&yn(e,l.properties,u,i[u])}else o.unshift(i);for(;++c<o.length;)G(l.children,o[c]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return s}function gn(e,r){return e==null||typeof e!="object"||Array.isArray(e)?!1:r==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:r==="button"?hn.has(e.type.toLowerCase()):!("value"in e)}function yn(e,r,n,t){const s=je(e,n);let a=-1,i;if(t!=null){if(typeof t=="number"){if(Number.isNaN(t))return;i=t}else typeof t=="boolean"?i=t:typeof t=="string"?s.spaceSeparated?i=oe(t):s.commaSeparated?i=ie(t):s.commaOrSpaceSeparated?i=oe(ie(t).join(" ")):i=he(s,s.property,t):Array.isArray(t)?i=t.concat():i=s.property==="style"?_n(t):String(t);if(Array.isArray(i)){const o=[];for(;++a<i.length;){const c=he(s,s.property,i[a]);o[a]=c}i=o}if(s.property==="className"&&Array.isArray(r.className)){const o=i;i=r.className.concat(o)}r[s.property]=i}}function G(e,r){let n=-1;if(r!=null)if(typeof r=="string"||typeof r=="number")e.push({type:"text",value:String(r)});else if(Array.isArray(r))for(;++n<r.length;)G(e,r[n]);else if(typeof r=="object"&&"type"in r)r.type==="root"?G(e,r.children):e.push(r);else throw new Error("Expected node, nodes, or string, got `"+r+"`")}function he(e,r,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||ae(n)===ae(r)))return!0}return n}function _n(e){const r=[];let n;for(n in e)q.call(e,n)&&r.push([n,e[n]].join(": "));return r.join("; ")}function bn(e){const r={};let n=-1;for(;++n<e.length;)r[e[n].toLowerCase()]=e[n];return r}const wn=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Nn=qe(Be,"div"),xn=qe(V,"g",wn),j={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"};function Cn(e,r){return Ge(e,{})||{type:"root",children:[]}}function Ge(e,r){const n=kn(e,r);return n&&r.afterTransform&&r.afterTransform(e,n),n}function kn(e,r){switch(e.nodeType){case 1:return Tn(e,r);case 3:return En(e);case 8:return An(e);case 9:return ge(e,r);case 10:return Sn();case 11:return ge(e,r);default:return}}function ge(e,r){return{type:"root",children:We(e,r)}}function Sn(){return{type:"doctype"}}function En(e){return{type:"text",value:e.nodeValue||""}}function An(e){return{type:"comment",value:e.nodeValue||""}}function Tn(e,r){const n=e.namespaceURI,t=n===j.svg?xn:Nn,s=n===j.html?e.tagName.toLowerCase():e.tagName,a=n===j.html&&s==="template"?e.content:e,i=e.getAttributeNames(),o={};let c=-1;for(;++c<i.length;)o[i[c]]=e.getAttribute(i[c])||"";return t(s,o,We(a,r))}function We(e,r){const n=e.childNodes,t=[];let s=-1;for(;++s<n.length;){const a=Ge(n[s],r);a!==void 0&&t.push(a)}return t}new DOMParser;function Ln(e,r){const n=Rn(e);return Cn(n)}function Rn(e){const r=document.createElement("template");return r.innerHTML=e,r.content}const ye=(function(e,r,n){const t=Nt(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof r=="number"){if(r<0||r===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(r=e.children.indexOf(r),r<0)throw new Error("Expected child node or index");for(;++r<e.children.length;)if(t(e.children[r],r,e))return e.children[r]}),_e=/\n/g,be=/[\t ]+/g,W=R("br"),we=R(Un),Dn=R("p"),Ne=R("tr"),On=R(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",Mn,jn]),Ke=R(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function vn(e,r){const n=r||{},t="children"in e?e.children:[],s=Ke(e),a=Ye(e,{whitespace:n.whitespace||"normal"}),i=[];(e.type==="text"||e.type==="comment")&&i.push(...Ve(e,{breakBefore:!0,breakAfter:!0}));let o=-1;for(;++o<t.length;)i.push(...ze(t[o],e,{whitespace:a,breakBefore:o?void 0:s,breakAfter:o<t.length-1?W(t[o+1]):s}));const c=[];let l;for(o=-1;++o<i.length;){const u=i[o];typeof u=="number"?l!==void 0&&u>l&&(l=u):u&&(l!==void 0&&l>-1&&c.push("\n".repeat(l)||" "),l=-1,c.push(u))}return c.join("")}function ze(e,r,n){return e.type==="element"?In(e,r,n):e.type==="text"?n.whitespace==="normal"?Ve(e,n):Pn(e):[]}function In(e,r,n){const t=Ye(e,n),s=e.children||[];let a=-1,i=[];if(On(e))return i;let o,c;for(W(e)||Ne(e)&&ye(r,e,Ne)?c="\n":Dn(e)?(o=2,c=2):Ke(e)&&(o=1,c=1);++a<s.length;)i=i.concat(ze(s[a],e,{whitespace:t,breakBefore:a?void 0:o,breakAfter:a<s.length-1?W(s[a+1]):c}));return we(e)&&ye(r,e,we)&&i.push("	"),o&&i.unshift(o),c&&i.push(c),i}function Ve(e,r){const n=String(e.value),t=[],s=[];let a=0;for(;a<=n.length;){_e.lastIndex=a;const c=_e.exec(n),l=c&&"index"in c?c.index:n.length;t.push(Fn(n.slice(a,l).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),a===0?r.breakBefore:!0,l===n.length?r.breakAfter:!0)),a=l+1}let i=-1,o;for(;++i<t.length;)t[i].charCodeAt(t[i].length-1)===8203||i<t.length-1&&t[i+1].charCodeAt(0)===8203?(s.push(t[i]),o=void 0):t[i]?(typeof o=="number"&&s.push(o),s.push(t[i]),o=0):(i===0||i===t.length-1)&&s.push(0);return s}function Pn(e){return[String(e.value)]}function Fn(e,r,n){const t=[];let s=0,a;for(;s<e.length;){be.lastIndex=s;const i=be.exec(e);a=i?i.index:e.length,!s&&!a&&i&&!r&&t.push(""),s!==a&&t.push(e.slice(s,a)),s=i?a+i[0].length:a}return s!==a&&!n&&t.push(""),t.join(" ")}function Ye(e,r){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":r.whitespace;case"textarea":return"pre-wrap"}}return r.whitespace}function Mn(e){return!!(e.properties||{}).hidden}function Un(e){return e.tagName==="td"||e.tagName==="th"}function jn(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const Bn={},Hn=[];function Qe(e){const r=e||Bn;return function(n,t){xt(n,"element",function(s,a){const i=Array.isArray(s.properties.className)?s.properties.className:Hn,o=i.includes("language-math"),c=i.includes("math-display"),l=i.includes("math-inline");let u=c;if(!o&&!c&&!l)return;let m=a[a.length-1],p=s;if(s.tagName==="code"&&o&&m&&m.type==="element"&&m.tagName==="pre"&&(p=m,m=a[a.length-2],u=!0),!m)return;const g=vn(p,{whitespace:"pre"});let d;try{d=ce.renderToString(g,k(N({},r),{displayMode:u,throwOnError:!0}))}catch(h){const _=h,b=_.name.toLowerCase();t.message("Could not render math with KaTeX",{ancestors:[...a,s],cause:_,place:s.position,ruleId:b,source:"rehype-katex"}),b==="parseerror"?d=ce.renderToString(g,k(N({},r),{displayMode:u,strict:"ignore",throwOnError:!1})):d=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(r.errorColor||"#cc0000"),title:String(h)},children:[{type:"text",value:g}]}]}typeof d=="string"&&(d=Ln(d).children);const f=m.children.indexOf(p);return m.children.splice(f,1,...d),H})}}function $n(e){an(e,[/\r?\n|\r/g,qn])}function qn(){return{type:"break"}}function Xe(){return function(e){$n(e)}}const Je="sandbox:";function Gn(e){const r=new URL(e).searchParams.get("se");if(!r)return!1;const n=Date.parse(r);return Number.isNaN(n)?!1:Date.now()>n}function ms(s){var a=s,{messageId:e,conversation:r,href:n}=a,t=v(a,["messageId","conversation","href"]);const i=Jt(),[o,c]=x.useState(!1),l=n.substring(Je.length),u=De(()=>r.serverId$()),m=Zt(),p=Ft(),g=x.useCallback(_=>{const b=document.createElement("a");b.href=_,b.click(),c(!1)},[]),d=x.useCallback(_=>{c(!1),p.danger(_,{toastId:"file_download_failed"})},[p]),f=Kn(o,e,u,l,d,g).data,h=x.useCallback(async _=>{_.preventDefault();const b=(f==null?void 0:f.download_url)&&Gn(f.download_url);(f===void 0||(f==null?void 0:f.status)!=="success"||b)&&i.invalidateQueries({queryKey:Ze(e,l)}),(f==null?void 0:f.status)==="success"&&(f!=null&&f.download_url)&&!b?g(f.download_url):c(!0)},[f,i,e,l,g]);return w.jsx(Mt,{closeOnOutsideClick:!1,label:w.jsxs("span",{className:"flex items-center gap-1",children:[o?m.formatMessage(xe.startingDownload):m.formatMessage(xe.downloadFile),o&&w.jsx(Ut,{})]}),side:"top",children:w.jsx("a",k(N({},t),{className:"cursor-pointer",onClick:_=>!o&&h(_)}))})}async function Wn(e,r,n){const t=await Bt.safeGet("/conversation/{conversation_id}/interpreter/download",{parameters:{path:{conversation_id:r},query:{message_id:e,sandbox_path:n}}});if(t.status===Ht.Success)return t;throw new Oe("Could not download file from advanced data analysis","error_code"in t?t.error_code:"unknown_error")}function Kn(e,r,n,t,s,a){const i=jt();return tn({queryKey:Ze(r,t),queryFn:()=>{if(n)return Wn(r,n,t).then(o=>((o==null?void 0:o.status)==="success"&&a(o.download_url),o)).catch(o=>{let c=i("default_download_link_error",{fileName:t});throw o instanceof Oe&&o.code!=null&&(c=i(o.code)),s==null||s(c),o})},enabled:!!(e&&r&&n&&t)})}function Ze(e,r){return["downloadSandboxLink",e,r]}const xe=en({downloadFile:{id:"SandboxDownload.downloadFile",defaultMessage:"Download file"},startingDownload:{id:"SandboxDownload.startingDownload",defaultMessage:"Starting download"}}),zn=Re(()=>Ie(()=>import("./hn0hl0c8spo9mfdq.js"),__vite__mapDeps([4,1])),{loading:e=>Qt(e)}),Vn="f",ds="dr",et=(e,r,n=!1)=>{const t=x.useRef(!1);x.useEffect(()=>{t.current||(t.current=!0,T.count(L.DEFAULT,"clickable_follow_up_text_shown"),n&&T.count(L.DEFAULT,"clickable_follow_up_deep_research_text_shown"),S.logEventWithStatsig("Clickable Follow Up Text Shown","chatgpt_clickable_follow_up_text_shown",N({},K({clientThreadId:e.id,messageId:r}))))},[e,r,n])},tt=({messageId:e,conversation:r,text:n})=>{const t=$t.useStore(),s=Te(r.id);et(r,e,!1);const a=x.useCallback(i=>{i.preventDefault(),T.count(L.DEFAULT,"clickable_follow_up_text_clicked"),S.logEventWithStatsig("Clickable Follow Up Text Clicked","chatgpt_clickable_follow_up_text_clicked",K({clientThreadId:r.id,messageId:e}));const o=t.getActiveSystemHintType();Ct({conversation:r,sourceEvent:i,promptMessage:Gt(n.toLowerCase(),{suggestion_type:Ae.Reply}),completionMetadata:{systemHints:o?[o]:[],conversationMode:s!=null?s:{kind:qt.PrimaryAssistant}}})},[r,s,e,t,n]);return w.jsx("span",{className:"decoration-token-text-secondary hover:text-token-text-secondary cursor-pointer underline decoration-dotted decoration-[12%] underline-offset-4 transition-colors duration-200 ease-in-out",onClick:a,children:n})},Yn=({messageId:e,conversation:r,text:n})=>w.jsx(tt,{messageId:e,conversation:r,text:n}),hs=z.memo(Yn),Qn=({messageId:e,conversation:r,text:n})=>{const t=Wt(),{setThreadSystemHintMode:s}=kt(),a=!!Kt(),i=Te(r.id);et(r,e,!0);const o=x.useCallback(c=>{c.preventDefault(),T.count(L.DEFAULT,"clickable_follow_up_text_clicked"),T.count(L.DEFAULT,"clickable_follow_up_deep_research_text_clicked"),S.logEventWithStatsig("Clickable Follow Up Text Clicked","chatgpt_clickable_follow_up_text_clicked",K({clientThreadId:r.id,messageId:e}));const l={clientThreadId:r.id};s(zt.Research,!0,l);{const u=Vt(t);u.focus(),Yt(u,n)}},[r,e,n,t,s,i]);return a?w.jsx(tt,{messageId:e,conversation:r,text:n}):w.jsxs("span",{className:"decoration-token-text-secondary hover:text-token-text-secondary cursor-pointer underline decoration-dotted decoration-[12%] underline-offset-4 transition-colors duration-200 ease-in-out",onClick:o,children:[w.jsx(zn,{className:"icon me-1 inline-block"}),n]})},Xn=({messageId:e,conversation:r,text:n})=>w.jsx(Qn,{messageId:e,conversation:r,text:n}),gs=z.memo(Xn);function Jn(){return e=>{C(e,{tagName:"table"},r=>{var s,a,i,o,c,l,u,m;const n=(i=(a=(s=r.children.find(p=>E(p,"thead")))==null?void 0:s.children.find(p=>E(p,"tr")))==null?void 0:a.children.filter(p=>E(p,"th")))!=null?i:[],t=(l=(c=(o=r.children.find(p=>E(p,"tbody")))==null?void 0:o.children.filter(p=>E(p,"tr")))==null?void 0:c.map(p=>p.children.filter(g=>E(g,"td"))))!=null?l:[];for(let p=0;p<n.length;p++){const g=n[p];let d=Ce(g);for(let h=0;h<t.length;h++)d=Math.max(d,Ce((u=t[h])==null?void 0:u[p]));const f=d>160?"xl":d>100?"lg":d>40?"md":"sm";g.properties["data-col-size"]=f;for(let h=0;h<t.length;h++)(m=t[h])!=null&&m[p]&&(t[h][p].properties["data-col-size"]=f)}})}}function E(e,r){return e.type==="element"&&e.tagName===r}function Ce(e){let r=0;return e&&C(e,"text",n=>{r+=n.value.length}),r}const Zn=new Set([pn,Vn]),ys=e=>e.startsWith(Je)||Zn.has(e)||e.startsWith("tel:")||e.startsWith("sms:")?e:rn(e);function nt(){return e=>{C(e,"list",r=>{for(const n of r.children)n.spread=!0})}}function er(){return(e,r)=>{let n=0;const t=(s,a,i)=>{var l;const o=(l=s.data)!=null?l:s.data={};o.hName=P;const c=n++;o.hProperties=k(N({},a),{content:i,index:c})};C(e,(s,a,i)=>{var o,c,l,u,m,p,g;if(Et(s)){if(s.name!==P)return;const d=(c=(o=s.position)==null?void 0:o.start)==null?void 0:c.offset,f=(u=(l=s.position)==null?void 0:l.end)==null?void 0:u.offset;if(d==null||f==null)return;const h=cn(s),_=tr(s.attributes);t(s,_,h);return}if(At(s)){if(a==null||i==null)return;const d=[[s.lang,s.meta].filter(Boolean).join(" "),(m=s.meta)!=null?m:"",(p=s.lang)!=null?p:""];let f=null;for(const b of d)if(b&&(f=Tt(b),f))break;if(!f&&d.some(b=>b.includes("{"))&&(f={}),!f)return;const h=(g=s.value)!=null?g:"",_={type:"containerDirective",name:P,attributes:f,children:[],position:s.position,data:s.data?N({},s.data):void 0};t(_,f,h),i.children[a]=_}})}}function tr(e){if(!e)return{};const r={};for(const[n,t]of Object.entries(e))typeof t=="string"&&(r[n]=t);return r}function _s(e){return r=>{C(r,n=>{Object.defineProperties(n,{markdownSource:{get(){try{return e.slice(this.position.start.offset,this.position.end.offset)}catch(t){return""}}}})})}}const bs=[[He,{singleTilde:!1}],Xe,nt,[nn,{singleDollarTextMath:!1}],Pe,er,Ue,Fe,...F?[F]:[],Me,rt,st];function rt(){return e=>{C(e,"textDirective",r=>{r.name!==ve&&(r.type="text",r.value=":".concat(r.name))})}}const nr=/\u200b/g;function st(){return e=>{C(e,"text",r=>{r.value=r.value.replace(nr,"")})}}function rr(){return e=>{var n;const r=(n=e.position)==null?void 0:n.end.offset;C(e,"element",(t,s)=>{var u;const{position:a}=t;if(!a)return;const{start:i,end:o}=a,c=i.offset,l=o.offset;(u=t.properties)!=null||(t.properties={}),c!=null&&(t.properties["data-start"]=c),l!=null&&(t.properties["data-end"]=l,r===l&&(t.properties["data-is-last-node"]=""),s===e.children.length-1&&(t.properties["data-is-only-node"]=""))})}}const ws=[Qe,rr,Jn,[St,{target:"_new",rel:"noopener noreferrer"}],Le],sr=[[Qe,{output:"mathml"}],Le],ot=[[He,{singleTilde:!1}],Xe,nt,Pe,Ue,Fe,...F?[F]:[],Me,rt,st],or=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],ke={}.hasOwnProperty;function ir(e,r){const n=r||{};function t(s,...a){let i=t.invalid;const o=t.handlers;if(s&&ke.call(s,e)){const c=String(s[e]);i=ke.call(o,c)?o[c]:t.unknown}if(i)return i.call(this,s,...a)}return t.handlers=n.handlers||{},t.invalid=n.invalid,t.unknown=n.unknown,t}const ar=/^>|^->|<!--|-->|--!>|<!-$/g,cr=[">"],lr=["<",">"];function ur(e,r,n,t){return t.settings.bogusComments?"<?"+A(e.value,Object.assign({},t.settings.characterReferences,{subset:cr}))+">":"<!--"+e.value.replace(ar,s)+"-->";function s(a){return A(a,Object.assign({},t.settings.characterReferences,{subset:lr}))}}function fr(e,r,n,t){return"<!"+(t.settings.upperDoctype?"DOCTYPE":"doctype")+(t.settings.tightDoctype?"":" ")+"html>"}const y=at(1),it=at(-1),pr=[];function at(e){return r;function r(n,t,s){const a=n?n.children:pr;let i=(t||0)+e,o=a[i];if(!s)for(;o&&Y(o);)i+=e,o=a[i];return o}}const mr={}.hasOwnProperty;function ct(e){return r;function r(n,t,s){return mr.call(e,n.tagName)&&e[n.tagName](n,t,s)}}const Q=ct({body:hr,caption:B,colgroup:B,dd:br,dt:_r,head:B,html:dr,li:yr,optgroup:wr,option:Nr,p:gr,rp:Se,rt:Se,tbody:Cr,td:Ee,tfoot:kr,th:Ee,thead:xr,tr:Sr});function B(e,r,n){const t=y(n,r,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&Y(t.value.charAt(0)))}function dr(e,r,n){const t=y(n,r);return!t||t.type!=="comment"}function hr(e,r,n){const t=y(n,r);return!t||t.type!=="comment"}function gr(e,r,n){const t=y(n,r);return t?t.type==="element"&&(t.tagName==="address"||t.tagName==="article"||t.tagName==="aside"||t.tagName==="blockquote"||t.tagName==="details"||t.tagName==="div"||t.tagName==="dl"||t.tagName==="fieldset"||t.tagName==="figcaption"||t.tagName==="figure"||t.tagName==="footer"||t.tagName==="form"||t.tagName==="h1"||t.tagName==="h2"||t.tagName==="h3"||t.tagName==="h4"||t.tagName==="h5"||t.tagName==="h6"||t.tagName==="header"||t.tagName==="hgroup"||t.tagName==="hr"||t.tagName==="main"||t.tagName==="menu"||t.tagName==="nav"||t.tagName==="ol"||t.tagName==="p"||t.tagName==="pre"||t.tagName==="section"||t.tagName==="table"||t.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function yr(e,r,n){const t=y(n,r);return!t||t.type==="element"&&t.tagName==="li"}function _r(e,r,n){const t=y(n,r);return!!(t&&t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd"))}function br(e,r,n){const t=y(n,r);return!t||t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd")}function Se(e,r,n){const t=y(n,r);return!t||t.type==="element"&&(t.tagName==="rp"||t.tagName==="rt")}function wr(e,r,n){const t=y(n,r);return!t||t.type==="element"&&t.tagName==="optgroup"}function Nr(e,r,n){const t=y(n,r);return!t||t.type==="element"&&(t.tagName==="option"||t.tagName==="optgroup")}function xr(e,r,n){const t=y(n,r);return!!(t&&t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot"))}function Cr(e,r,n){const t=y(n,r);return!t||t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot")}function kr(e,r,n){return!y(n,r)}function Sr(e,r,n){const t=y(n,r);return!t||t.type==="element"&&t.tagName==="tr"}function Ee(e,r,n){const t=y(n,r);return!t||t.type==="element"&&(t.tagName==="td"||t.tagName==="th")}const Er=ct({body:Lr,colgroup:Rr,head:Tr,html:Ar,tbody:Dr});function Ar(e){const r=y(e,-1);return!r||r.type!=="comment"}function Tr(e){const r=new Set;for(const t of e.children)if(t.type==="element"&&(t.tagName==="base"||t.tagName==="title")){if(r.has(t.tagName))return!1;r.add(t.tagName)}const n=e.children[0];return!n||n.type==="element"}function Lr(e){const r=y(e,-1,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&Y(r.value.charAt(0)))&&!(r.type==="element"&&(r.tagName==="meta"||r.tagName==="link"||r.tagName==="script"||r.tagName==="style"||r.tagName==="template"))}function Rr(e,r,n){const t=it(n,r),s=y(e,-1,!0);return n&&t&&t.type==="element"&&t.tagName==="colgroup"&&Q(t,n.children.indexOf(t),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function Dr(e,r,n){const t=it(n,r),s=y(e,-1);return n&&t&&t.type==="element"&&(t.tagName==="thead"||t.tagName==="tbody")&&Q(t,n.children.indexOf(t),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const I={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\0	\n\f\r \"&'/<=>".split(""),"\0	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\0	\n\f\r \"&'<=>`".split("")],["\0	\n\f\r \"&'<=>`".split(""),"\0	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Or(e,r,n,t){const s=t.schema,a=s.space==="svg"?!1:t.settings.omitOptionalTags;let i=s.space==="svg"?t.settings.closeEmptyElements:t.settings.voids.includes(e.tagName.toLowerCase());const o=[];let c;s.space==="html"&&e.tagName==="svg"&&(t.schema=V);const l=vr(t,e.properties),u=t.all(s.space==="html"&&e.tagName==="template"?e.content:e);return t.schema=s,u&&(i=!1),(l||!a||!Er(e,r,n))&&(o.push("<",e.tagName,l?" "+l:""),i&&(s.space==="svg"||t.settings.closeSelfClosing)&&(c=l.charAt(l.length-1),(!t.settings.tightSelfClosing||c==="/"||c&&c!=='"'&&c!=="'")&&o.push(" "),o.push("/")),o.push(">")),o.push(u),!i&&(!a||!Q(e,r,n))&&o.push("</"+e.tagName+">"),o.join("")}function vr(e,r){const n=[];let t=-1,s;if(r){for(s in r)if(r[s]!==null&&r[s]!==void 0){const a=Ir(e,s,r[s]);a&&n.push(a)}}for(;++t<n.length;){const a=e.settings.tightAttributes?n[t].charAt(n[t].length-1):void 0;t!==n.length-1&&a!=='"'&&a!=="'"&&(n[t]+=" ")}return n.join("")}function Ir(e,r,n){const t=je(e.schema,r),s=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,a=e.settings.allowDangerousCharacters?0:1;let i=e.quote,o;if(t.overloadedBoolean&&(n===t.attribute||n==="")?n=!0:(t.boolean||t.overloadedBoolean&&typeof n!="string")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const c=A(t.attribute,Object.assign({},e.settings.characterReferences,{subset:I.name[s][a]}));return n===!0||(n=Array.isArray(n)?(t.commaSeparated?sn:Lt)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?c:(e.settings.preferUnquoted&&(o=A(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:I.unquoted[s][a]}))),o!==n&&(e.settings.quoteSmart&&le(n,i)>le(n,e.alternative)&&(i=e.alternative),o=i+A(n,Object.assign({},e.settings.characterReferences,{subset:(i==="'"?I.single:I.double)[s][a],attribute:!0}))+i),c+(o&&"="+o))}const Pr=["<","&"];function lt(e,r,n,t){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:A(e.value,Object.assign({},t.settings.characterReferences,{subset:Pr}))}function Fr(e,r,n,t){return t.settings.allowDangerousHtml?e.value:lt(e,r,n,t)}function Mr(e,r,n,t){return t.all(e)}const Ur=ir("type",{invalid:jr,unknown:Br,handlers:{comment:ur,doctype:fr,element:Or,raw:Fr,root:Mr,text:lt}});function jr(e){throw new Error("Expected node, not `"+e+"`")}function Br(e){const r=e;throw new Error("Cannot compile unknown node `"+r.type+"`")}const Hr={},$r={},qr=[];function Gr(e,r){const n=r||Hr,t=n.quote||'"',s=t==='"'?"'":'"';if(t!=='"'&&t!=="'")throw new Error("Invalid quote `"+t+"`, expected `'` or `\"`");return{one:Wr,all:Kr,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||or,characterReferences:n.characterReferences||$r,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?V:Be,quote:t,alternative:s}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Wr(e,r,n){return Ur(e,r,n,this)}function Kr(e){const r=[],n=e&&e.children||qr;let t=-1;for(;++t<n.length;)r[t]=this.one(n[t],t,e);return r.join("")}function zr(e){const r=this,n=N(N({},r.data("settings")),e);r.compiler=t;function t(s){return Gr(s,n)}}function Vr(e,r){const n=Xt(e,r);return ut(n,r)}function ut(e,r){const n=$().use($e).use(ot).use([[ft,r!=null?r:[]]]).use(ln,{rule:"-",tightDefinitions:!0,handlers:{text:o=>(o.value=o.value.replaceAll("\\[","["),o.value),break:()=>"\n",link:Yr}}),t=$().use(on).use(sr).use(zr),s=n.runSync(n.parse(e)),a=n.stringify(s),i=t.stringify(t.runSync(s));return{"text/plain":a,"text/html":i}}const Yr=(e,r,n,t)=>{const s=n.createTracker(t),a=n.enter("link"),i=n.enter("label");let o=s.move("[");return o+=s.move(n.containerPhrasing(e,N({before:o,after:"]("},s.current()))),o+=s.move("]("),i(),o+=s.move(e.url.replace(/[\x00-\x1F\x7F-\x9F()"]/g,Qr)),e.title&&(o+=s.move(" "+JSON.stringify(e.title))),o+=s.move(")"),a(),o};function Qr(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0")}function ft(e){return r=>{const n={},t=(s,a)=>{var i;switch(a.type){case"grouped_webpages":{const o=[];for(const c of a.items)if(c.url&&c.title){let l=n[c.url];l||(l=n[c.url]={type:"definition",identifier:String(Object.keys(n).length+1),url:c.url,title:c.title}),o.push({type:"linkReference",referenceType:"shortcut",identifier:l.identifier,children:[{type:"text",value:(i=c.attribution)!=null?i:Dt(c.url)}]})}return o.length===0?[]:[{type:"text",value:"("},...o.flatMap((c,l,u)=>l<u.length-1?[c,{type:"text",value:", "}]:[c]),{type:"text",value:")"}]}case"title_citation":case"location_search":case"time":case"image_v2":case"nav_list":case"file_navlist":case"file":case"grouped_webpages_model_predicted_fallback":case"map":case"tldr":case"navigation":case"stock":case"calculator":case"python":case"container":case"code_execution":case"forecast":case"businesses_map":case"entity_metadata":case"video":case"entity":case"sources_footnote":case"sports_standings":case"sports_schedule":case"attribution":case"webpage_extended":case"checkout_confirmation":case"image_inline":case"image_group":case"product_entity":case"products":case"product":case"alt_text":case"product_reviews":case"product_rationale":case"dil":case"link_title":case"strix":if(a.alt){const o=$().use($e).use(ot).parse(a.alt);if(s.type!=="textDirective")return o.children;const c=o.children[0];if(c.type==="paragraph")return c.children}return[];case"hidden":case"status":case"optimistic_image_citation":case"webpage":case"optimistic_image_inline":case"invalid":case"attribution_footer":case"sports":case"grouped_webpages_v2":return[]}};C(r,Rt,(s,a,i)=>{var l;if(i==null||a==null)return;if(s.type==="containerDirective"&&s.name===P){const u=Array.isArray(s.children)?s.children:[];return i.children.splice(a,1,...u),[H,a]}const o=Xr(s,e),c=o?(l=t(s,o))!=null?l:[s]:[];return i.children.splice(a,1,...c),[H,a+c.length]}),r.children.push(...Object.values(n))}}function Xr(e,r){var n;if(e.name===ve){const t=(n=e.attributes)==null?void 0:n.index;if(t)return r[parseInt(t,10)]}}const Ns=Object.freeze(Object.defineProperty({__proto__:null,markdownToClipboardContent:ut,messageTextToClipboardContent:Vr,replaceDirectivesForClipboard:ft},Symbol.toStringTag,{value:"Module"}));export{Vn as C,pn as I,fn as M,bs as R,Je as S,ft as a,st as b,ws as c,ms as d,ps as e,hs as f,ds as g,gs as h,_s as i,Ns as j,ut as m,Xe as r,ys as u};
//# sourceMappingURL=e2qiox9wm3uaxg29.js.map
