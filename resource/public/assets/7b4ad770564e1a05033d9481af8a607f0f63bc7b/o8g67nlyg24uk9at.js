const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kw08ajijqinojrwh.js","assets/kfrdmkli83ureki3.js","assets/root-fi49nzd2.css","assets/c22gt92phjno04jd.js","assets/km44ch1r0uf907fx.js","assets/dhbwqfnaau44fo68.js","assets/fx3vo65j1l2o1ay3.js","assets/b865k9nv2k0vznof.js","assets/ea3j10kjv7ntyk1b.js"])))=>i.map(i=>d[i]);
var je=Object.defineProperty,Te=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var ue=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var me=(t,e,s)=>e in t?je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,z=(t,e)=>{for(var s in e||(e={}))ke.call(e,s)&&me(t,s,e[s]);if(de)for(var s of de(e))Ee.call(e,s)&&me(t,s,e[s]);return t},ne=(t,e)=>Te(t,Ie(e));var fe=(t,e,s)=>(e=t[ue("asyncIterator")])?e.call(t):(t=t[ue("iterator")](),e={},s=(i,l)=>(l=t[i])&&(e[i]=r=>new Promise((c,a,n)=>(r=l.call(t,r),n=r.done,Promise.resolve(r.value).then(d=>c({value:d,done:n}),a)))),s("next"),s("return"),e);import{_ as K,h as se,r as S,j as o,M as he,c as Y,u as Me}from"./kfrdmkli83ureki3.js";import{az as X,u as re,bp as xe,cy as J,fd as we,eG as De,aA as Z,re as Ae,pU as oe,n7 as Ne,P as ve,W as Re,b7 as Le,T as Pe,ay as ye,a9 as Fe,r as $e,ia as ze,aw as pe,_ as Be,J as Ue,dQ as He,aC as Oe}from"./kw08ajijqinojrwh.js";import{ms as Ce,mt as Ve,lT as Ge,lU as Qe,e1 as qe,lS as We,e2 as Je,cL as Ke,fk as Ye,ds as le,ct as Xe,hc as Ze,mu as et,B as tt,E as st,hb as nt,mv as ot,mw as rt,al as at,dl as it,dn as lt,be as ct,cr as dt}from"./fyw02vlaiv2vq6cj.js";import{P as ut}from"./d7ayto02yo7jqocx.js";import{D as mt}from"./dd8hh2tmra1psngf.js";import{C as ft}from"./m93ibzwrrpoc1bdm.js";import{E as ge}from"./krqkx98dtny8rc4e.js";import"./ehyvmdoziyg4axk8.js";import"./hoo89wr86agqpm13.js";import"./m3joncw451cqbul2.js";import"./gy1lpvuoewmzh42c.js";import"./ipjj058rvhjq2uu2.js";import"./h1em0bjkpkjv8ykw.js";import"./kbj1b07s2z6vxqkg.js";import"./hu1bt0oauegdhua6.js";import"./i7t1qh3u8s8bvtb8.js";import"./dm8z7bzkrzic0zmg.js";import"./ejjzjfpdlx2v908r.js";import"./i8e4tsbcdrbcc668.js";import"./hgrkp82vl7wpvpuw.js";import"./gljkwjomy29v9c26.js";import"./oafyrulh7bq2qerb.js";import"./b4dmcdh59zl3olaw.js";import"./c326bjybavj646xd.js";import"./lwyag88acem9bm0o.js";import"./lg0oi3tmjv8kv2p4.js";import"./b3ungmqo5x8kj4fh.js";import"./o5h7u1aikohecbkt.js";import"./w4rmhhxvug61xnae.js";const ht=X(()=>K(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([0,1,2])),{loading:t=>Z(t)}),pt=X(()=>K(()=>import("./c22gt92phjno04jd.js"),__vite__mapDeps([3,1])),{loading:t=>Z(t)});function gt({title:t,isTransparent:e,onClose:s}){const i=re(),l=xe(i),r=se(),[c,a]=S.useState(!1),{canGoBack:n,goBack:d,goToHistoryIndex:p,backHistory:f}=Ce(),b=J("pointer-events-auto keyboard-focused:focus-ring relative -ms-2 me-1 flex h-9 w-9 items-center justify-center rounded-lg",e?"bg-token-main-surface-primary/60 backdrop-blur-xl backdrop-filter hover:bg-token-main-surface-primary/70":"bg-token-main-surface-primary hover:bg-token-surface-hover ");return o.jsx(Ve,{name:"entity-header",type:"primary",className:J("flex items-center bg-transparent!",e?"pointer-events-none":"pointer-events-auto",l?"min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)]"),children:o.jsxs("div",{className:J("flex items-center justify-between px-6 py-2 transition-colors duration-200 ease-out",e?"pointer-events-none border-transparent bg-transparent":"bg-token-main-surface-primary",l?"border-b-thin min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)] border-b",!e&&(l?"border-(--bento-border-color)":"border-light")),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[n&&o.jsx(we,{open:c,onOpenChange:a,size:"small",triggerButton:o.jsx("button",{type:"button",onClick:d,onPointerDown:g=>{g.preventDefault()},onContextMenu:g=>{g.preventDefault(),n&&a(!0)},className:b,"aria-label":r.formatMessage({id:"entity.sidebar.back",defaultMessage:"Back"}),children:o.jsx(pt,{className:"icon"})}),children:f.map((g,u)=>({s:g,absoluteIndex:u})).reverse().map(({s:g,absoluteIndex:u})=>o.jsx(De.Item,{label:g.query,onSelect:()=>{a(!1),p(u)}},"".concat(u,"-").concat(g.type)))}),t&&!e&&o.jsx("div",{className:"text-token-text-primary pointer-events-auto line-clamp-1 text-lg font-normal",children:t})]}),o.jsx("div",{className:"pointer-events-auto -me-3",children:o.jsx("button",{"data-testid":"close-button",onClick:s,className:b,"aria-label":r.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),children:o.jsx(ht,{className:"icon"})})})]})})}const bt=800,_t=1200;function xt({searchModelQueries:t=[]}){const e=S.useMemo(()=>t.map(n=>n.trim()).filter(n=>n.length>0),[t]),[s,i]=S.useState(!0),[l,r]=S.useState(0);S.useEffect(()=>{let n=null,d=null;return i(!0),r(0),e.length>0&&(n=setTimeout(()=>{i(!1),d=setInterval(()=>{r(p=>p+1>=e.length?e.length-1:p+1)},_t)},bt)),()=>{n&&clearTimeout(n),d&&clearInterval(d)}},[e]);const c=()=>{"use forget";const n=Y.c(1);let d;return n[0]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx("div",{className:"bg-token-bg-secondary -mx-6 aspect-[5/4] animate-pulse pb-2"}),n[0]=d):d=n[0],d};if(!e.length)return o.jsxs(o.Fragment,{children:[o.jsx(c,{}),o.jsx("div",{className:"mt-6 flex min-h-[60vh] flex-col gap-12 pb-6",children:o.jsxs(Ae,{children:[o.jsx(oe,{index:0,width:60,heightSize:"sm"}),o.jsx(oe,{index:1,width:100,heightSize:"sm"}),o.jsx(oe,{index:2,width:90,heightSize:"sm"}),o.jsx(oe,{index:3,width:50,heightSize:"sm"})]})})]});const a=s?o.jsx(he,{id:"CfufpV",defaultMessage:"Searching the web"}):o.jsx(he,{id:"DeF0zE",defaultMessage:"Searching for {query}",values:{query:e[l]}});return o.jsxs(o.Fragment,{children:[o.jsx(c,{}),o.jsx("div",{className:"mt-5 flex min-h-[60vh] w-full flex-col items-start gap-4 pb-6",children:o.jsx("span",{className:"loading-shimmer text-token-text-secondary line-clamp-1 w-full truncate font-medium select-none",children:a})})]})}const W={};function be(t){return!t||t.length===0?null:t[t.length-1]}function vt(t){var l,r,c,a,n,d,p,f,b,g;const e=(n=(a=(l=t.metadata)==null?void 0:l.debug_sonic_thread_id)!=null?a:(c=(r=t.metadata)==null?void 0:r.__internal)==null?void 0:c.sonic_thread_id)!=null?n:null,s=(f=(p=(d=t.metadata)==null?void 0:d.__internal)==null?void 0:p.sonic_user_id)!=null?f:null;let i=t;if(e||s){const u=z({},(b=t.metadata)!=null?b:{});e&&u.debug_sonic_thread_id==null&&(u.debug_sonic_thread_id=e);const j=z({},(g=u.__internal)!=null?g:{});e&&j.sonic_thread_id==null&&(j.sonic_thread_id=e),s&&j.sonic_user_id==null&&(j.sonic_user_id=s),u.__internal=j,i=ne(z({},t),{metadata:u})}return i}const yt=()=>{};function Ct({clientThreadId:t,debugThreadId:e,messageId:s,query:i,category:l,extraParams:r}){"use no forget";var N,w;const c=re(),a=Ne(c),n=se(),d=(N=ve(t))!=null?N:t,p=yt(),f=S.useMemo(()=>"entity-".concat(l,"-").concat(i,"-").concat(JSON.stringify(r!=null?r:{}),"-").concat(d,"-").concat(s,"-").concat(e),[l,i,r,d,s,e]),[b,g]=S.useState((w=W[f])!=null?w:[]),[u,j]=S.useState(null),[H,F]=S.useState({}),[O,T]=S.useState(null),[B,U]=S.useState(()=>ie(be(W[f]))),[V,R]=S.useState(!1);S.useEffect(()=>{T(null)},[i,l]);const L=S.useRef(null),M=S.useCallback(async v=>{L.current&&L.current.abort();const C=new AbortController;L.current=C,g([]),W[f]=null,U([]),R(!0);try{const{chatReq:q,turnstileToken:ee,proofToken:$}=await Ge(c,void 0),m=Qe(q,ee,$,null);T(null);const _=qe("".concat(Re,"/sidebar/conversation"),{method:"POST",headers:z(ne(z({},Le({isAuthOptional:!0})),{"Content-Type":"application/json"}),m),body:z(z({conversation_id:d,message_id:s,supported_encodings:[We.V1],is_client_thread:d===t},v!=null?v:{}),l==="ask_sidebar"?{category:"ask_sidebar",locale:n.locale,ask_sidebar_params:{query:i,additional_context:r==null?void 0:r.context}}:{category:"generic_entity",locale:n.locale,generic_entity_params:{name:i,category:l,extra_params:r,multi_message_mode:!0}}),signal:C.signal});let h=null,x=null;try{for(var k=fe(Je(_)),D,Q,G;D=!(Q=await k.next()).done;D=!1){const A=Q.value;if(C.signal.aborted)break;if(!("data"in A))continue;const I=A.data,{type:E,data:y}=I;if(E==="message"&&y){const P=ie(y);P.length>0&&U(P)}if(E==="message"&&y&&y.author.role===ye.Assistant&&Fe(y)&&(!y.channel||y.channel==="final")){const P=vt(y);g(ae=>{const ce=ae.findIndex(Se=>Se.id===P.id);let te;return ce===-1?te=[...ae,P]:(te=[...ae],te[ce]=P),P.status==="finished_successfully"&&(W[f]=te),te}),!x&&I.conversation_id&&(j(I.conversation_id),x=I.conversation_id,$e(t)&&Pe.setServerIdForNewThread(t,x))}E==="__debug"&&y&&F(P=>z(z({},P),y))}}catch(Q){G=[Q]}finally{try{D&&(Q=k.return)&&await Q.call(k)}finally{if(G)throw G[0]}}R(!1)}catch(q){C.abort(),W[f]=null,T(q),R(!1)}},[f,d,t,e,s,i,l,r,c,a,n.locale,p]);return S.useEffect(()=>{var v,C;if(W[f]){const k=(v=W[f])!=null?v:[];g(k);const D=(C=k[k.length-1])!=null?C:null;U(ie(D));return}return M(),()=>{var k;(k=L.current)==null||k.abort(),g([]),U([]),R(!1)}},[f,d,t,e,s,i,l,r,c,a,n.locale]),{messages:b,latestMessage:be(b),sidebarConversationId:u,error:O,searchModelQueries:B,isStreaming:V,debugData:H,regenerate:()=>M({force_regenerate:!0})}}function ie(t){var s,i;const e=(i=(s=t==null?void 0:t.metadata)==null?void 0:s.search_model_queries)==null?void 0:i.queries;return Array.isArray(e)?e:[]}const St=X(()=>K(()=>import("./km44ch1r0uf907fx.js"),__vite__mapDeps([4,1])),{loading:t=>Z(t)}),jt=X(()=>K(()=>import("./dhbwqfnaau44fo68.js"),__vite__mapDeps([5,1])),{loading:t=>Z(t)}),Tt=X(()=>K(()=>import("./fx3vo65j1l2o1ay3.js"),__vite__mapDeps([6,1])),{loading:t=>Z(t)}),It=X(()=>K(()=>import("./b865k9nv2k0vznof.js"),__vite__mapDeps([7,1])),{loading:t=>Z(t)}),kt=X(()=>K(()=>import("./ea3j10kjv7ntyk1b.js"),__vite__mapDeps([8,1])),{loading:t=>Z(t)});function Et(t){"use forget";const e=Y.c(48),{conversation:s,debugThreadId:i,messageId:l,query:r,category:c,extraParams:a,offsetTopMargin:n}=t,d=re();let p;e[0]!==c||e[1]!==s.id||e[2]!==i||e[3]!==a||e[4]!==l||e[5]!==r?(p={clientThreadId:s.id,debugThreadId:i,messageId:l,query:r,category:c,extraParams:a},e[0]=c,e[1]=s.id,e[2]=i,e[3]=a,e[4]=l,e[5]=r,e[6]=p):p=e[6];const{messages:f,latestMessage:b,sidebarConversationId:g,error:u,searchModelQueries:j,regenerate:H,isStreaming:F,debugData:O}=Ct(p);let T;e[7]!==d?(T=xe(d),e[7]=d,e[8]=T):T=e[8];const B=T,U=Ke(),{showDebugConversationTurns:V}=ze();let R;e[9]!==s.id?(R=ve(s.id),e[9]=s.id,e[10]=R):R=e[10];const L=R;let M,N,w;if(e[11]!==s||e[12]!==d||e[13]!==u||e[14]!==B||e[15]!==f||e[16]!==n||e[17]!==j){const q=f.flatMap(wt),ee=q.length>0,$=n?B?"mt-[calc(var(--threadFlyOut-leading-height,var(--header-height))*-1)] min-h-screen":"mt-[calc(var(--threadFlyOut-leading-height,53px)*-1)] min-h-screen":"mt-0";e[21]!==$?(w=J("bg-token-bg-primary flex min-h-screen w-full flex-col",$),e[21]=$,e[22]=w):w=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(M=J("border-token-border-light mb-[60px] flex flex-col border-t px-6"),e[23]=M):M=e[23],N=ee?q.map((m,_)=>{var E,y,P;const{message:h,textContent:x,isEmpty:A,displayParts:I}=m;return o.jsxs("div",{className:J("text-sm",_==0&&"mt-4",!1),"data-message-author-role":h.author.role,"data-message-id":h.id,children:[o.jsx(mt,{parts:x.parts||[],isUserTurn:!1,isCompletionInProgress:!1,turnIndex:_,displayParts:I,isActivelyStreaming:!1,shouldHideContent:!1,conversation:s,id:h.id,isEmpty:A,messages:[h],citations:(E=h.metadata)==null?void 0:E.citations,contentReferences:(P=(y=h.metadata)==null?void 0:y.content_references)==null?void 0:P.filter(Mt),size:"small",flagSeverity:void 0}),!1]},h.id)}):!u&&o.jsx(xt,{searchModelQueries:j}),e[11]=s,e[12]=d,e[13]=u,e[14]=B,e[15]=f,e[16]=n,e[17]=j,e[18]=M,e[19]=N,e[20]=w}else M=e[18],N=e[19],w=e[20];let v;e[24]!==u?(v=u&&o.jsx("div",{className:"bg-token-bg-status-error border-token-surface-error/15 text-token-text-error my-4 border p-2 text-sm whitespace-pre-wrap",children:u.message}),e[24]=u,e[25]=v):v=e[25];let C;e[26]!==c||e[27]!==s.id||e[28]!==U||e[29]!==F||e[30]!==b||e[31]!==L||e[32]!==H||e[33]!==g?(C=!F&&!U&&o.jsxs("div",{className:"flex items-center justify-start pt-2 select-none",children:[b&&o.jsx($t,{message:b,clientThreadId:s.id}),b&&g&&L&&o.jsx(zt,{messageId:b.id,category:c,conversationId:g,metadata:{originatingConversationId:L}}),o.jsx(Ft,{onClick:H}),b&&o.jsx(At,{message:b})]}),e[26]=c,e[27]=s.id,e[28]=U,e[29]=F,e[30]=b,e[31]=L,e[32]=H,e[33]=g,e[34]=C):C=e[34];let k;e[35]!==M||e[36]!==N||e[37]!==v||e[38]!==C?(k=o.jsxs("div",{className:M,children:[N,v,C]}),e[35]=M,e[36]=N,e[37]=v,e[38]=C,e[39]=k):k=e[39];let D;e[40]!==O||e[41]!==F||e[42]!==V?(D=!1,e[40]=O,e[41]=F,e[42]=V,e[43]=D):D=e[43];let Q;return e[44]!==D||e[45]!==w||e[46]!==k?(Q=o.jsxs("div",{className:w,children:[k,D]}),e[44]=D,e[45]=w,e[46]=k,e[47]=Q):Q=e[47],Q}function Mt(t){return t.type!=="product_entity"}function wt(t){var i,l,r;if(!t.content||t.content.content_type!==pe.Text&&t.content.content_type!==pe.MultimodalText)return[];const e=t.content,s=!e.parts.some(Dt)&&((l=(i=t.metadata)==null?void 0:i.content_references)==null?void 0:l.length)===0;return[{message:t,textContent:e,isEmpty:s,displayParts:Ye((r=e.parts)!=null?r:[])}]}function Dt(t){return t!==""}function At(t){"use forget";var p;const e=Y.c(11),{message:s}=t;let i,l,r;if(e[0]!==s){r=Symbol.for("react.early_return_sentinel");e:{if(i=Lt(s!=null?s:null),!i){r=null;break e}l=(p=i==null?void 0:i.map(Rt).filter(Nt))!=null?p:[]}e[0]=s,e[1]=i,e[2]=l,e[3]=r}else i=e[1],l=e[2],r=e[3];if(r!==Symbol.for("react.early_return_sentinel"))return r;const c=l;let a;e[4]!==c?(a=o.jsx(Ze,{children:o.jsx(et,{sourcesUrls:c,className:"hover:bg-token-bg-secondary rounded-lg"})}),e[4]=c,e[5]=a):a=e[5];let n;e[6]!==i?(n=o.jsx(tt,{children:o.jsx(st,{className:"bg-token-bg-primary border-token-border-default max-h-[50vh] max-w-[400px] overflow-y-auto rounded-[20px] border-1 bg-clip-padding px-4 py-3 shadow-md",side:"top",sideOffset:4,align:"center",collisionPadding:28,avoidCollisions:!0,children:o.jsx(Pt,{items:i})})}),e[6]=i,e[7]=n):n=e[7];let d;return e[8]!==a||e[9]!==n?(d=o.jsxs(nt,{children:[a,n]}),e[8]=a,e[9]=n,e[10]=d):d=e[10],d}function Nt(t){return!!t}function Rt(t){return t.url}function Lt(t){var l,r;if(!t)return;const e=(r=(l=t.metadata)==null?void 0:l.search_result_groups)!=null?r:[];if(!e.length)return;const s=new Map;e.forEach(c=>{var a;((a=c.entries)!=null?a:[]).forEach(n=>{var p,f;if(!(n!=null&&n.url)||s.has(n.url))return;const d=ne(z({},n),{attribution:(f=(p=n.attribution)!=null?p:c.domain)!=null?f:Xe(n.url,"short")});s.set(n.url,d)})});const i=Array.from(s.values()).sort((c,a)=>{var n,d;return((n=a.pub_date)!=null?n:0)-((d=c.pub_date)!=null?d:0)});if(i.length)return i}function Pt({items:t}){return t.length===0?null:o.jsx("div",{className:"flex flex-col gap-3",children:o.jsx("ul",{className:"-mx-2 flex flex-col gap-1",children:t.map((e,s)=>{var i;return o.jsx("li",{children:o.jsx(ot,{item:e})},"".concat((i=e.url)!=null?i:"source","-").concat(s))})})})}const Ft=t=>{"use forget";const e=Y.c(5),{onClick:s}=t,i=se();let l;e[0]!==i?(l=i.formatMessage({id:"gW2N97",defaultMessage:"Try again..."}),e[0]=i,e[1]=l):l=e[1];let r;return e[2]!==s||e[3]!==l?(r=o.jsx(le,{icon:kt,onClick:s,label:l,size:"med"}),e[2]=s,e[3]=l,e[4]=r):r=e[4],r},$t=t=>{"use forget";const e=Y.c(4),{message:s,clientThreadId:i}=t,l=Me();let r;return e[0]!==i||e[1]!==s||e[2]!==l?(r=o.jsx(ft,{size:"med",onClick:async c=>{const a=await rt({id:s.id,role:ye.Assistant,messages:[s]},l,i);await at(a,void 0,c)}}),e[0]=i,e[1]=s,e[2]=l,e[3]=r):r=e[3],r},zt=t=>{"use forget";const e=Y.c(17),{messageId:s,category:i,conversationId:l,metadata:r}=t,c=se(),[a,n]=S.useState(null);let d;e[0]!==i||e[1]!==l||e[2]!==a||e[3]!==s||e[4]!==r?(d=u=>{a!==u&&(it({rating:lt(u)},l,s,"CHAT",r),Be.logEventWithStatsig(u==="thumbsDown"?"Sidebar Message Feedback Thumbs Down Clicked":"Sidebar Message Feedback Thumbs Up Clicked","chatgpt_sidebar_thumb_feedback",{message_id:s,conversation_id:l,originating_conversation_id:r.originatingConversationId,rating:u,category:i,surface:"web"})),n(j=>j===u?null:u)},e[0]=i,e[1]=l,e[2]=a,e[3]=s,e[4]=r,e[5]=d):d=e[5];const p=d;let f;e[6]!==a||e[7]!==p||e[8]!==c?(f=a!=="thumbsDown"&&o.jsx(le,{size:"med",onClick:()=>{p("thumbsUp")},selected:a==="thumbsUp",icon:a==="thumbsUp"?jt:St,label:c.formatMessage({id:"ConversationTurn.goodResponseTooltip",defaultMessage:"Good response"}),testId:"good-response-turn-action-button"}),e[6]=a,e[7]=p,e[8]=c,e[9]=f):f=e[9];let b;e[10]!==a||e[11]!==p||e[12]!==c?(b=a!=="thumbsUp"&&o.jsx(le,{size:"med",onClick:()=>{p("thumbsDown")},selected:a==="thumbsDown",icon:a==="thumbsDown"?It:Tt,label:c.formatMessage({id:"ConversationTurn.badResponseTooltip",defaultMessage:"Bad response"}),testId:"bad-response-turn-action-button"}),e[10]=a,e[11]=p,e[12]=c,e[13]=b):b=e[13];let g;return e[14]!==f||e[15]!==b?(g=o.jsxs(o.Fragment,{children:[f,b]}),e[14]=f,e[15]=b,e[16]=g):g=e[16],g};function _e(t){return t.length>0&&t[0]===t[0].toLocaleUpperCase()?t:t.split(" ").map(e=>ct(e)).join(" ")}function vs(t){"use forget";const e=Y.c(71),{conversation:s,sidebar:i,type:l}=t,{contentReferenceStartIndex:r,messageId:c,query:a,category:n,debugThreadId:d,extraParams:p}=i,f=l===void 0?"sidebar":l,b=re(),g=se(),{setScrollTopForActive:u,currentHistoryScrollTop:j,setFullWidthImageHeightForIndex:H,currentHistoryFullWidthImageHeight:F,activeHistoryIndex:O,closeThreadSidebarAndResetHistory:T}=Ce();let B;e[0]!==b?(B=Ue(b,"1225428216"),e[0]=b,e[1]=B):B=e[1];const U=B;let V;e[2]!==s.id||e[3]!==c?(V={clientThreadId:s.id,messageId:c},e[2]=s.id,e[3]=c,e[4]=V):V=e[4];const R=V,L=S.useRef(null);let M,N;e[5]!==u?(M=()=>{const m=L.current;if(!m)return;const _=function(){m&&u&&u(m.scrollTop)};return m.addEventListener("scroll",_,{passive:!0}),()=>{m.removeEventListener("scroll",_)}},N=[L,u],e[5]=u,e[6]=M,e[7]=N):(M=e[6],N=e[7]),S.useEffect(M,N);let w;e[8]!==O||e[9]!==H?(w=m=>{O<0||H(O,m)},e[8]=O,e[9]=H,e[10]=w):w=e[10];const v=w;let C;e[11]!==a?(C=_e(a),e[11]=a,e[12]=C):C=e[12];const k=C,D="".concat(c,"-category-").concat(n,"-query-").concat(a),Q=n==="product"&&!U||n==="product_link";let G;if(Q){let m;e[13]!==a?(m={query:a,title:a,provider:"",id:"",url:""},e[13]=a,e[14]=m):m=e[14];const _=m,h=f==="sidebar";let x;e[15]!==R||e[16]!==r||e[17]!==s.id||e[18]!==c||e[19]!==_||e[20]!==h?(x=o.jsx(ut,{product:_,setUpdatedProduct:Bt,clientThreadId:s.id,messageId:c,contentReferenceStartIndex:r,productIndex:-1,analyticsMetadata:R,offsetTopMargin:h}),e[15]=R,e[16]=r,e[17]=s.id,e[18]=c,e[19]=_,e[20]=h,e[21]=x):x=e[21],G=x}else{const m=n!=null?n:"other",_=f==="sidebar";let h;e[22]!==s||e[23]!==d||e[24]!==p||e[25]!==c||e[26]!==a||e[27]!==_||e[28]!==m?(h=o.jsx(Et,{conversation:s,debugThreadId:d,messageId:c,query:a,category:m,extraParams:p,offsetTopMargin:_}),e[22]=s,e[23]=d,e[24]=p,e[25]=c,e[26]=a,e[27]=_,e[28]=m,e[29]=h):h=e[29],G=h}const q=j,ee=F!=null?F:0,$=q<=ee||Q;switch(f){case"sidebar":{let m;e[30]!==u?(m=E=>u(E),e[30]=u,e[31]=m):m=e[31];let _;e[32]!==$||e[33]!==k?(_=E=>{const{handleClose:y}=E;return o.jsx(gt,{title:k,isTransparent:$,onClose:y})},e[32]=$,e[33]=k,e[34]=_):_=e[34];let h;e[35]!==g?(h=g.formatMessage({id:"region.sidebar.entity",defaultMessage:"Entity details"}),e[35]=g,e[36]=h):h=e[36];let x;e[37]!==n||e[38]!==v?(x={category:n,onFullWidthImageHeightChange:v},e[37]=n,e[38]=v,e[39]=x):x=e[39];let A;e[40]!==G||e[41]!==x?(A=o.jsx(ge,{value:x,children:G}),e[40]=G,e[41]=x,e[42]=A):A=e[42];let I;return e[43]!==T||e[44]!==j||e[45]!==D||e[46]!==_||e[47]!==h||e[48]!==A||e[49]!==m?(I=o.jsx(dt,{handleClose:T,onScroll:m,restoreScrollTop:j,leadingFullBleed:!0,renderLeading:_,ariaLabel:h,children:A},D),e[43]=T,e[44]=j,e[45]=D,e[46]=_,e[47]=h,e[48]=A,e[49]=m,e[50]=I):I=e[50],I}case"modal":{let m;e[51]!==a?(m=_e(a),e[51]=a,e[52]=m):m=e[52];const _=Q||$;let h;e[53]!==n||e[54]!==v?(h={category:n,onFullWidthImageHeightChange:v},e[53]=n,e[54]=v,e[55]=h):h=e[55];let x;e[56]!==G||e[57]!==h?(x=o.jsx(ge,{value:h,children:G}),e[56]=G,e[57]=h,e[58]=x):x=e[58];const A=$?"bg-token-bg-primary/60 hover:bg-token-bg-primary/70 backdrop-blur-xl backdrop-filter":"bg-token-bg-primary hover:bg-token-interactive-bg-secondary-hover";let I;e[59]!==A?(I=J("absolute end-[30px] top-2 z-10",A),e[59]=A,e[60]=I):I=e[60];let E;e[61]!==T||e[62]!==I?(E=o.jsx(He,{className:I,onClick:T}),e[61]=T,e[62]=I,e[63]=E):E=e[63];let y;return e[64]!==T||e[65]!==D||e[66]!==_||e[67]!==x||e[68]!==E||e[69]!==m?(y=o.jsxs(Oe,{testId:"modal-chat-screen-entity-flyout",className:"relative max-w-[500px]",size:"custom",type:"success",position:"end",noPadding:!0,title:m,contentRef:L,visuallyHiddenHeader:_,headerClassName:"ps-6 border-b border-light fixed min-w-full bg-token-bg-primary z-1",isOpen:!0,onClose:T,rootClassName:"z-0",children:[x,E]},D),e[64]=T,e[65]=D,e[66]=_,e[67]=x,e[68]=E,e[69]=m,e[70]=y):y=e[70],y}}}function Bt(t){}export{vs as ChatScreenEntityFlyout};
//# sourceMappingURL=o8g67nlyg24uk9at.js.map
