const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/odtbrxkncka8brls.js","assets/kfrdmkli83ureki3.js","assets/iyoy7y29jyu5lcn2.js","assets/ezd0hym0jr36348y.js"])))=>i.map(i=>d[i]);
import{j as e,h as y,M as c,c as I,_ as h}from"./kfrdmkli83ureki3.js";import{u as _,d as M,al as N,kS as C,aC as k,br as p,eG as m,az as b,o9 as R,aB as U,aA as j}from"./kw08ajijqinojrwh.js";import{bP as w,bR as E,bS as A,bT as P}from"./fyw02vlaiv2vq6cj.js";const S=b(()=>h(()=>import("./odtbrxkncka8brls.js"),__vite__mapDeps([0,1])),{loading:a=>j(a)}),F=b(()=>h(()=>import("./iyoy7y29jyu5lcn2.js"),__vite__mapDeps([2,1])),{loading:a=>j(a)}),T=b(()=>h(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([3,1])),{loading:a=>j(a)});function z({room:a,onClose:s}){"use no forget";var l;const t=_(),i=w(t),d=M(()=>a.creatorAccountUserId$()),n=M(()=>a.members$()),u=(l=N(t))==null?void 0:l.normalizedAccountUserId,r=y(),x=C(t);return e.jsx(k,{testId:"modal-calpico-chat-members",isOpen:!0,onClose:()=>s(),type:"success",headerClassName:"pb-1",title:e.jsx(c,{id:"tEvWSQ",defaultMessage:"People"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex max-h-[min(40vh,492px)] flex-col",children:[e.jsx("div",{className:"border-token-border-heavy min-h-0 flex-1 overflow-y-auto border-t",children:e.jsx("div",{className:"divide-token-border-light divide-y",children:(n!=null?n:[]).map(o=>{const f=o.accountUserId===u,v=o.accountUserId===d;return e.jsxs("div",{className:"group/hover flex w-full items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[f?e.jsx("button",{type:"button","aria-label":r.formatMessage({id:"OQ5GtO",defaultMessage:"Edit your profile"}),onClick:()=>{s(),p(t,E,{accountUserId:o.accountUserId})},className:"rounded-full bg-transparent p-0",children:e.jsx("img",{src:o.avatarUrl,alt:o.name,className:"bg-token-border-default gizmo-shadow-stroke box-content h-8 w-8 rounded-full object-cover p-[0.5px]"})}):e.jsx("img",{src:o.avatarUrl,alt:o.name,className:"bg-token-border-default gizmo-shadow-stroke box-content h-8 w-8 rounded-full object-cover p-[0.5px]"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{children:o.name}),e.jsx(L,{username:o.username,isRoomCreator:v,isSelf:f})]})]}),f?null:e.jsxs(m.Root,{children:[e.jsx(m.Trigger,{className:"group/trigger","aria-label":r.formatMessage({id:"U93nHF",defaultMessage:"Actions for {name}"},{name:o.name}),children:e.jsx(T,{className:"icon-sm hidden group-hover/hover:block group-data-[state=open]/trigger:block"})}),e.jsx(m.Portal,{children:e.jsxs(m.Content,{size:"small",children:[e.jsx(m.Item,{color:"danger",icon:e.jsx(S,{className:"icon-sm"}),label:e.jsx(c,{id:"D/xte+",defaultMessage:"Report"}),onClick:()=>{s(),p(t,A,{entityId:o.accountUserId,entityType:R.Profile,title:r.formatMessage({id:"PUcghs",defaultMessage:"Report profile"})})}}),v?null:e.jsx(m.Item,{color:"danger",icon:e.jsx(F,{className:"icon-sm"}),label:e.jsx(c,{id:"rT5Wj+",defaultMessage:"Remove from group"}),onClick:async()=>{if(window.confirm(r.formatMessage({id:"MtV6M+",defaultMessage:"Remove {memberName} from {roomName}? {memberName} will no longer see the chat history."},{memberName:o.name,roomName:a.name$()})))try{await i.removeMemberFromRoom$(a.id,o.accountUserId)}catch(g){x.danger(r.formatMessage({id:"cGNRGI",defaultMessage:"Failed to remove member: {error}"},{error:g instanceof Error?g.message:String(g)}),{toastId:"calpico_room_failed_to_remove_member"});return}}})]})})]})]},o.accountUserId)})})}),e.jsxs("div",{className:"border-token-border-light flex flex-shrink-0 items-center justify-between border-t pt-3",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex flex-col items-start",children:e.jsx(c,{id:"IveYPe",defaultMessage:"Add people"})})}),e.jsx(U,{type:"button",onClick:()=>{s(),p(t,P,{room:a})},color:"ghost",className:"border-token-border-heavy rounded-full border px-4 py-2 text-sm font-medium",children:e.jsx(c,{id:"XYZ1+I",defaultMessage:"Add"})})]})]})})}function L(a){"use forget";const s=I.c(6),{username:t,isRoomCreator:i,isSelf:d}=a;let n;s[0]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx(c,{id:"AZaJQ0",defaultMessage:"You"}),s[0]=n):n=s[0];const u=n;let r;s[1]===Symbol.for("react.memo_cache_sentinel")?(r=e.jsx(c,{id:"ePmMIc",defaultMessage:"admin"}),s[1]=r):r=s[1];const x=r;let l;return s[2]!==i||s[3]!==d||s[4]!==t?(l=e.jsx("span",{className:"text-token-text-tertiary text-sm",children:d&&i?e.jsxs(e.Fragment,{children:[u," 路 @",t," 路 ",x]}):d?e.jsxs(e.Fragment,{children:[u," 路 @",t]}):i?e.jsxs(e.Fragment,{children:["@",t," 路 ",x]}):e.jsxs(e.Fragment,{children:["@",t]})}),s[2]=i,s[3]=d,s[4]=t,s[5]=l):l=s[5],l}const V=({room:a,onClose:s})=>{"use no forget";return e.jsx(z,{room:a,onClose:s})};export{V as CalpicoChatMembersModalContainer};
//# sourceMappingURL=btqzjxef0smsc2zx.js.map
