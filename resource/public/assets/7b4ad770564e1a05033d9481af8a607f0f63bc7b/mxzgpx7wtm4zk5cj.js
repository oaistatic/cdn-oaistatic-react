const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fyw02vlaiv2vq6cj.js","assets/kfrdmkli83ureki3.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css","assets/2lf14dfohh135ytj.js","assets/a5n6sfzu00phm32i.js","assets/h1kcrvxc0en5lwjt.js","assets/ydzvfm0toss4freg.js","assets/lcx1qzdvrvh4xmnf.js","assets/oppbmh012axflnpf.js","assets/ckrfxvgfz5bkl0m2.js"])))=>i.map(i=>d[i]);
var Tt=Object.defineProperty,Wt=Object.defineProperties;var jt=Object.getOwnPropertyDescriptors;var dt=Object.getOwnPropertySymbols;var Et=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable;var ut=(t,e,s)=>e in t?Tt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,M=(t,e)=>{for(var s in e||(e={}))Et.call(e,s)&&ut(t,s,e[s]);if(dt)for(var s of dt(e))Bt.call(e,s)&&ut(t,s,e[s]);return t},oe=(t,e)=>Wt(t,jt(e));import{_ as ge,c as Be,j as o,h as ae,r as f,M as L,e as Me,a as Rt}from"./kfrdmkli83ureki3.js";import{bk as Ut,bl as Vt,p as Ft,w as zt,x as Gt,aF as _t,aG as bt,aI as we,aA as ve,k3 as We,k4 as qt,k5 as Ht,k6 as Qt,k7 as Yt,k8 as Mt,k9 as yt,ka as Ie,kb as $t,kc as Kt,kd as Jt,k as Xt,ke as Zt,c_ as pt,dx as eo,kf as to,kg as oo,kh as so,j as ao,gH as no,ki as io,kj as ro,kk as lo,kl as co,km as uo,kn as po,ko as mo,bK as go,kp as fo,kq as ho,kr as ko,ks as _o,kt as bo,ku as Mo,kv as yo,kw as xo,kx as So,ky as wo,kz as vo,cS as Co,kA as Oo,kB as No,kC as Do,kD as Ao,kE as Po,kF as Io,kG as Lo,kH as To,kI as Wo,kJ as jo,kK as Eo,kL as Bo,kM as Ro,kN as Uo,kO as Vo,kP as Fo,kQ as zo,kR as Go,kS as qo,kT as Ho,kU as Qo,kV as Yo,kW as $o,kX as Ko,N as Jo,P as mt}from"./fyw02vlaiv2vq6cj.js";import{P as Xo}from"./cn1z5fx9l5xxo8vy.js";import{b as xt,d as Zo}from"./lg0oi3tmjv8kv2p4.js";import{az as fe,u as he,dT as es,d4 as me,aP as je,au as Ee,J as Ce,ev as St,dj as ts,al as os,aA as ss,cy as as,dN as ns,aT as be,aB as Oe,aC as ne,d5 as Ne,dk as wt,_ as se,F as is,a7 as gt,R as rs,da as Q,ew as De,lw as ls,dd as cs,a4 as ds,ak as us,oB as ps,ow as ms,M as gs,d9 as fs,e8 as hs,bD as ks,op as _s,iF as bs,qT as Ms,qU as ys,dI as Le,c9 as ft,qV as Te,iG as xs}from"./kw08ajijqinojrwh.js";import{a as Ss}from"./i8h8r8n4rn16l2h5.js";import vt from"./n6eim64jp78x17ti.js";const ws=fe(()=>ge(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zF),__vite__mapDeps([0,1,2,3,4])),{loading:t=>ss(t)}),pe=Me({title:{id:"workspaceDiscovery.renamePromptModal.title",defaultMessage:"Set a workspace display name"},laterCta:{id:"workspaceDiscovery.renamePromptModal.laterCta",defaultMessage:"Update later"},save:{id:"workspaceDiscovery.renamePromptModal.save",defaultMessage:"Update"},checkboxLabel:{id:"workspaceDiscovery.renamePromptModal.checkboxLabel",defaultMessage:"Use workspace name (recommended)"},body:{id:"workspaceDiscovery.renamePromptModal.body.1",defaultMessage:"This is what teammates on your domain will see when they request to join your workspace. <learnMoreLink>Open settings</learnMoreLink>.{br}{br}Current: <b>{currentName}</b>"},clearToWorkspaceNameAria:{id:"workspaceIdentity.clearToWorkspaceNameAria",defaultMessage:"Clear and use workspace name"}}),ht={dismissedAt:0,shownCount:0},Ct=t=>{if(!t)return ht;try{const e=JSON.parse(t);return{dismissedAt:Number(e.dismissedAt)||0,shownCount:Number(e.shownCount)||0}}catch(e){return ht}},vs=5,Ot=()=>{"use forget";var N;const t=Be.c(8),e=he(),s=es();let a;t[0]!==s?(a=s==null?void 0:s.getWorkspaceId(),t[0]=s,t[1]=a):a=t[1];const i=a,l=me(Ns),r=l!=null?Ut(l.role)||Vt(l.role):void 0,u=Ct(je.getItem(Ee.WorkspaceDiscoveryRenamePromptInfo)),p=Date.now()>u.dismissedAt+864e5,n=u.shownCount<vs,b=Ce(e,"1053331630"),c=Ce(e,"3592108663"),k=r&&b&&c&&p&&n&&!!i,{data:d,isLoading:_}=St(k?i:void 0),z=!!(d!=null&&d.support_workspace_discovery),y=!!(d!=null&&d.workspace_discoverable),h=(d==null?void 0:d.use_workspace_name_for_discovery)===!0,C=(h?"":(N=d==null?void 0:d.public_display_name)!=null?N:"").includes("Workspace #");if(!(z&&k&&!_&&y&&!h&&C)){let S;return t[2]!==_?(S={isOpen:!1,isLoading:_},t[2]=_,t[3]=S):S=t[3],S}let x;t[4]!==e?(x=ts(e,"309365540").get("enable",!1),t[4]=e,t[5]=x):x=t[5];const G=x;let O;return t[6]!==G?(O={isOpen:G,isLoading:!1},t[6]=G,t[7]=O):O=t[7],O},Cs=t=>{"use forget";const e=Be.c(6),{onClose:s}=t,a=he();let i;if(e[0]!==a){const n=os(a);i=n==null?void 0:n.getWorkspaceId(),e[0]=a,e[1]=i}else i=e[1];const l=i,{data:r,isPending:u}=St(l);if(!l||u||!r)return null;let p;return e[2]!==s||e[3]!==r||e[4]!==l?(p=o.jsx(Os,{onClose:s,workspaceId:l,settings:r}),e[2]=s,e[3]=r,e[4]=l,e[5]=p):p=e[5],p},Os=t=>{"use forget";var ke;const e=Be.c(68),{onClose:s,workspaceId:a,settings:i}=t,l=ae(),r=he();let u;e[0]!==r||e[1]!==s?(u=()=>{be(r,"chatgpt_workspace_discovery_rename_prompt_modal_closed"),s()},e[0]=r,e[1]=s,e[2]=u):u=e[2];const p=u;let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=Ct(je.getItem(Ee.WorkspaceDiscoveryRenamePromptInfo)),e[3]=n):n=e[3];const b=n,{mutateAsync:c,isPending:k}=Ft(a),d=xt(),_=!!(i!=null&&i.workspace_discoverable),z=(i==null?void 0:i.use_workspace_name_for_discovery)===!0,y=z?"":(ke=i==null?void 0:i.public_display_name)!=null?ke:"",[h,ye]=f.useState(!0),[C,ie]=f.useState(""),[x,G]=f.useState(!1);let O;e[4]!==h||e[5]!==y||e[6]!==C||e[7]!==x||e[8]!==k||e[9]!==z?(O=!h&&!k&&!z&&(x?C.trim()!=="":y.trim()!==""),e[4]=h,e[5]=y,e[6]=C,e[7]=x,e[8]=k,e[9]=z,e[10]=O):O=e[10];const N=O,S=h?d:x?C:y;let m;e[11]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{je.setItem(Ee.WorkspaceDiscoveryRenamePromptInfo,JSON.stringify({dismissedAt:Date.now(),shownCount:b.shownCount+1}))},e[11]=m):m=e[11];const Y=m;let w;e[12]!==r?(w=H=>{ye(H),be(r,"chatgpt_workspace_discovery_rename_prompt_modal_checkbox_toggled",H?1:0)},e[12]=r,e[13]=w):w=e[13];const I=w;let $;e[14]!==r||e[15]!==p?($=()=>{be(r,"chatgpt_workspace_discovery_rename_prompt_modal_dismiss_clicked"),Y(),p()},e[14]=r,e[15]=p,e[16]=$):$=e[16];const v=$;let re;e[17]!==h||e[18]!==r||e[19]!==C||e[20]!==p||e[21]!==k||e[22]!==c||e[23]!==_?(re=async()=>{k||(be(r,"chatgpt_workspace_discovery_rename_prompt_modal_save_clicked"),await c({value:_,public_display_name:h?null:C.trim(),use_workspace_name_for_discovery:h,action:"name"}),p())},e[17]=h,e[18]=r,e[19]=C,e[20]=p,e[21]=k,e[22]=c,e[23]=_,e[24]=re):re=e[24];const le=re;let q,K;e[25]!==r?(q=()=>{be(r,"chatgpt_workspace_discovery_rename_prompt_modal_shown")},K=[r],e[25]=r,e[26]=q,e[27]=K):(q=e[26],K=e[27]),f.useEffect(q,K);let ce;e[28]===Symbol.for("react.memo_cache_sentinel")?(ce=o.jsx(L,M({},pe.laterCta)),e[28]=ce):ce=e[28];let D;e[29]!==v?(D=o.jsx(Oe,{color:"secondary",onClick:v,children:ce}),e[29]=v,e[30]=D):D=e[30];let de;e[31]===Symbol.for("react.memo_cache_sentinel")?(de=o.jsx(L,M({},pe.save)),e[31]=de):de=e[31];let A;e[32]!==le||e[33]!==k?(A=o.jsx(Oe,{onClick:le,loading:k,children:de}),e[32]=le,e[33]=k,e[34]=A):A=e[34];let W;e[35]!==D||e[36]!==A?(W=o.jsxs("div",{className:"mt-8 flex w-full justify-end gap-3",children:[D,A]}),e[35]=D,e[36]=A,e[37]=W):W=e[37];let J;e[38]===Symbol.for("react.memo_cache_sentinel")?(J=o.jsx("div",{className:"mb-4 w-full text-xl",children:o.jsx(L,M({},pe.title))}),e[38]=J):J=e[38];let X;e[39]===Symbol.for("react.memo_cache_sentinel")?(X=o.jsx("br",{}),e[39]=X):X=e[39];let j;e[40]!==y?(j=o.jsx("div",{className:"text-token-text-secondary",children:o.jsx(L,oe(M({},pe.body),{values:{b:Ds,br:X,currentName:y,learnMoreLink:As}}))}),e[40]=y,e[41]=j):j=e[41];let E;e[42]!==I?(E=H=>I(H.currentTarget.checked),e[42]=I,e[43]=E):E=e[43];let B;e[44]!==d?(B=o.jsx("span",{className:"text-sm",children:o.jsx(L,oe(M({},pe.checkboxLabel),{values:{workspaceName:d}}))}),e[44]=d,e[45]=B):B=e[45];let R;e[46]!==h||e[47]!==E||e[48]!==B?(R=o.jsx("div",{className:"mt-6 mb-3",children:o.jsx(zt,{id:"use-workspace-name-for-discovery",checked:h,onChange:E,label:B})}),e[46]=h,e[47]=E,e[48]=B,e[49]=R):R=e[49];const ue=h&&"text-token-text-tertiary";let U;e[50]!==ue?(U=as(ue),e[50]=ue,e[51]=U):U=e[51];let Z;e[52]===Symbol.for("react.memo_cache_sentinel")?(Z=H=>{ie(H.target.value),G(!0)},e[52]=Z):Z=e[52];let V;e[53]!==l||e[54]!==N?(V=N?o.jsx("button",{type:"button",className:"text-token-text-tertiary hover:text-token-text-secondary absolute end-0 top-1/2 -translate-y-1/2 pe-1","aria-label":l.formatMessage(pe.clearToWorkspaceNameAria),onClick:()=>{ie("")},children:o.jsx(ws,{className:"icon-sm"})}):null,e[53]=l,e[54]=N,e[55]=V):V=e[55];let F;e[56]!==h||e[57]!==y||e[58]!==S||e[59]!==U||e[60]!==V?(F=o.jsx(Gt,{name:"public_display_name",ariaLabel:!1,disabled:h,inputClassName:U,placeholder:y,maxLength:Xo,value:S,onChange:Z,insideContainerChildren:V}),e[56]=h,e[57]=y,e[58]=S,e[59]=U,e[60]=V,e[61]=F):F=e[61];let ee;return e[62]!==v||e[63]!==W||e[64]!==j||e[65]!==R||e[66]!==F?(ee=o.jsxs(ne,{isOpen:!0,onClose:v,contentClassName:"p-6",shouldIgnoreClickOutside:!0,size:"custom",className:"max-w-lg",testId:"modal-workspace-discovery-rename-prompt",footerContent:W,children:[J,j,R,F]}),e[62]=v,e[63]=W,e[64]=j,e[65]=R,e[66]=F,e[67]=ee):ee=e[67],ee};function Ns(t){return t.currentWorkspace}function Ds(t){return o.jsx("b",{children:t})}function As(t){return o.jsx(ns,{href:"/admin/identity",children:t})}const Ps=Object.freeze(Object.defineProperty({__proto__:null,WorkspaceDiscoveryRenamePromptModal:Cs,useWorkspaceDiscoveryRenamePromptModal:Ot},Symbol.toStringTag,{value:"Module"})),Is="g-68c9a4676c8c81918d99178b55901b9a",Ls=({onContinue:t,scope:e})=>{const s=ae(),a=xt();return o.jsx(ne,{testId:"modal-initial-workspace-onboarding",isOpen:!0,onClose:Q,type:"success",title:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{children:s.formatMessage(T.secureWorkspaceWelcomeTitle)}),o.jsx("span",{className:"text-token-text-secondary text-sm",children:a})]}),size:"custom",noPadding:!0,className:"max-w-2xl",children:o.jsx(Mt,{onClose:()=>{t()},scope:e})})},Ts=({onContinue:t,onSkip:e,isEduPlan:s})=>{const a=ae();return o.jsx(ne,{testId:"modal-role-survey",isOpen:!0,onClose:Q,type:"success",title:a.formatMessage(T.primaryRoleTitle),size:"custom",className:"max-w-lg",children:o.jsx(Nt,{options:s?Qt:Yt,onSkip:e,onSubmit:t})})},Ws=({onContinue:t,onSkip:e,isEduPlan:s})=>{const a=ae();return o.jsx(ne,{testId:"modal-department-survey",isOpen:!0,onClose:Q,type:"success",title:a.formatMessage(T.workTypeTitle),size:"custom",className:"max-w-lg",children:o.jsx(Nt,{options:s?qt:Ht,onSkip:e,onSubmit:t,multiSelect:!0})})};function Nt({options:t,onSkip:e=Q,onSubmit:s=Q,multiSelect:a=!1}){const i=ae(),[l,r]=f.useState([]);function u(n,b){const c=n.indexOf(b);return c===-1?[...n,b]:[...n.slice(0,c),...n.slice(c+1)]}const p=f.useCallback(n=>{var c;const b=(c=n.currentTarget.dataset.value)!=null?c:"";a?r(u(l,b)):s(b)},[s,l,r,a]);return o.jsxs("div",{children:[a&&o.jsx("p",{className:"text-token-text-tertiary mx-2 text-sm",children:i.formatMessage(T.selectAll)}),o.jsx("div",{className:"flex flex-col items-center justify-center",children:o.jsx("div",{className:"flex-wrap space-y-4",children:t.map(n=>o.jsx(Oe,{onClick:p,color:l.includes(n.id)?"primary":"secondary",size:"medium",className:"mx-2","data-value":n.id,children:o.jsx(L,M({},n.displayValue))},n.id))})}),o.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[o.jsx(De,{title:i.formatMessage(T.skipButton),onClick:e}),a&&o.jsx(De,{title:i.formatMessage(T.continueButton),onClick:()=>{s(l)},disabled:l.length===0,color:"primary",className:"ms-4"})]})]})}const js=({onYes:t,onSkip:e})=>{const s=ae();return o.jsx(ne,{testId:"modal-chat-onboarding",isOpen:!0,onClose:Q,type:"success",title:s.formatMessage(T.chatOnboardingTitle),size:"custom",className:"max-w-lg",children:o.jsxs("div",{className:"px-4 pb-2",children:[o.jsx("p",{className:"text-token-text-secondary mb-4 text-sm",children:s.formatMessage(T.chatOnboardingDescription)}),o.jsxs("div",{className:"mt-4 flex flex-row justify-end gap-3",children:[o.jsx(De,{title:s.formatMessage(T.skipButton),onClick:e}),o.jsx(De,{title:s.formatMessage(T.yesButton),onClick:t,color:"primary"})]})]})})};function Es({onClose:t}){var k;const e=he(),s=(k=Ce(e,"2839926172"))!=null?k:!1,[a,i]=f.useState(0),[l,r]=f.useState({role:"",departments:[]}),u=me(Ne.businessWorkspaceId),p=me(Ne.isEduPlan),n=wt(),b=n==null?void 0:n.id,c=()=>{gt.logEvent("chatgpt_biz_onboarding_skipped"),se.logEvent("Business Onboarding Skipped"),t(),we(e,ve.Onboarding)};switch(f.useEffect(()=>{a===0&&se.logUpsellOrModalEvent(_t,{eventId:"workspace_onboarding_modal_shown",type:bt.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[a]),a){case 0:return o.jsx(Ls,{scope:We.Workspace,onContinue:()=>{i(1)}});case 1:return o.jsx(Ts,{onContinue:d=>{r(_=>oe(M({},_),{role:d})),i(2)},onSkip:c,isEduPlan:p});case 2:return o.jsx(Ws,{onContinue:d=>{const _=oe(M({},l),{departments:d});gt.logEvent("chatgpt_biz_onboarding_completed"),se.logEvent("Business Onboarding Completed"),rs.safePatch("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:u,user_id:b}},requestBody:{onboarding_information:_}}).finally(()=>{s?i(3):(t(),we(e,ve.Onboarding))})},onSkip:c,isEduPlan:p});case 3:return o.jsx(js,{onSkip:c,onYes:()=>{if(typeof window<"u"){const d=is(Is);window.location.assign(d)}t(),we(e,ve.Onboarding)}});default:return o.jsx(o.Fragment,{})}}const T=Me({secureWorkspaceWelcomeTitle:{id:"onboarding.secureWorkspaceWelcomeTitle",defaultMessage:"Welcome to your secure workspace"},primaryRoleTitle:{id:"onboarding.primaryRoleTitle",defaultMessage:"What's your primary role?"},workTypeTitle:{id:"onboarding.workTypeTitle",defaultMessage:"What kind of work do you do?"},selectAll:{id:"onboarding.selectAll",defaultMessage:"Select all that apply"},skipButton:{id:"onboarding.skipButton",defaultMessage:"Skip"},continueButton:{id:"onboarding.continueButton",defaultMessage:"Continue"},yesButton:{id:"onboarding.yesButton",defaultMessage:"Yes"},chatOnboardingTitle:{id:"onboarding.chatOnboardingTitle",defaultMessage:"Meet Your Onboarding Buddy GPT?"},chatOnboardingDescription:{id:"onboarding.chatOnboardingDescription",defaultMessage:"Brainstorm ways to get the most out of ChatGPT with a personal onboarding buddy."}}),Bs=()=>{const t=he(),e="center",{isOpen:s,modalType:a}=yt(t),i=Zo(),l=ls();if(f.useEffect(()=>{s&&se.logEvent("Sidetron: Blocking Modal Shown",{modalType:a})},[s,a]),!s)return null;function r(){switch(se.logEvent("Sidetron: Modal Action Clicked",{modalType:a}),a){case Ie.unsupported_app_version:window.open(l?$t:Kt,"_blank");return;case null:ds.warn("No modal type provided for DesktopBlockingModal");return}}function u(){switch(a){case Ie.unsupported_app_version:return Us;case null:return Rs}}function p(){switch(a){case Ie.unsupported_app_version:return!1;case null:return!1}}return o.jsx(ne,{testId:"modal-desktop-blocking",isOpen:!0,onClose:Q,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:e,children:o.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8",children:[o.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:o.jsx(L,M({},u().title))}),o.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-lg",children:o.jsx(L,M({},u().subtitle))}),o.jsx(Oe,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"desktop-blocking-modal-action-button",onClick:r,children:o.jsx(L,M({},u().cta))}),p()&&o.jsxs("span",{children:[i," Â· ",o.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:n=>{n.preventDefault(),se.logEvent("Sidetron: Modal Logout Clicked",{modalType:a}),cs()},"data-testid":"desktop-blocking-modal-logout",children:o.jsx(L,M({},u().logout))})]})]})})},Rs=Me({title:{id:"DesktopBlockingModal.paidTitle",defaultMessage:"Upgrade to use Windows app"},subtitle:{id:"DesktopBlockingModal.paidSubtitle",defaultMessage:"The Windows app is currently available for Plus, Business, Enterprise, and Edu plans."},cta:{id:"DesktopBlockingModal.paidUpgradeCta",defaultMessage:"See Plans"},logout:{id:"DesktopBlockingModal.paidLogout",defaultMessage:"Log out"}}),Us=Me({title:{id:"DesktopBlockingModal.sunsettingTitle",defaultMessage:"Update required"},subtitle:{id:"DesktopBlockingModal.sunsettingSubtitle",defaultMessage:"A new version of ChatGPT Windows is available and must be installed to continue."},cta:{id:"DesktopBlockingModal.sunsettingCta",defaultMessage:"Get Download"},logout:{id:"DesktopBlockingModal.sunsettingLogout",defaultMessage:"Log out"}}),Vs=fe(()=>ge(()=>Promise.resolve().then(()=>Ps),void 0).then(t=>t.WorkspaceDiscoveryRenamePromptModal)),Fs=fe(()=>ge(()=>import("./2lf14dfohh135ytj.js"),__vite__mapDeps([5,1,2,3,6]))),zs=fe(()=>ge(()=>import("./h1kcrvxc0en5lwjt.js"),__vite__mapDeps([7,1,2,3,6,0,4]))),Gs=fe(()=>ge(()=>import("./ydzvfm0toss4freg.js"),__vite__mapDeps([8,1,2,3,9,10,0,4])).then(t=>t.ConnectorsOnboardingModal)),qs=fe(()=>ge(()=>import("./ckrfxvgfz5bkl0m2.js"),__vite__mapDeps([11,1,2,3])).then(t=>t.RequestWorkspaceAccessModal)),Hs=({onClose:t})=>{const e=ae(),s=me(Ne.isBusinessWorkspace),a=me(l=>l.currentWorkspace),i=s?e.formatMessage(kt.workspaceWelcome,{workspaceName:a==null?void 0:a.name}):"ChatGPT";return o.jsx(ne,{testId:"modal-onboarding",isOpen:!0,onClose:Q,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:e.formatMessage(kt.personalOnboardingSubheading),children:o.jsx(Mt,{onClose:t,scope:s?We.Workspace:We.Personal})})},Qs=({onClose:t})=>{const e=xs.useStore();return f.useEffect(()=>(e.setOnCloseSideEffect(t),e.setManualVisibility(!0),()=>{e.setManualVisibility(!1)}),[t,e]),null};function Ys(t){return o.jsx(vt,oe(M({},t),{mode:"blocking",section:"both",source:"first_login"}))}function $s(t){return o.jsx(vt,oe(M({},t),{mode:"blocking",section:"existing",source:"should_select_workspace"}))}function aa({clientThreadId:t,page:e,isIosDirectPurchaseFlow:s}){const a=he(),[i,l]=f.useState(0),r=us(a,"109457"),{hasSeenOnboardingDate:u}=Jt(),p=u===!1&&r.get("is_new_user_banner_disclaimer_enabled",!1),{hasSeenWorkspaceDiscoveryFirstLoginDate:n}=Xt(),{hasSeenTeamOwnerOnboardingDate:b}=Zt(),c=me(Ne.isBusinessWorkspace),{isOpen:k,isLoading:d,workspaceOnboardingVariant:_}=pt(),[z,y]=f.useState(!1),{data:h,isPending:ye,isEnabled:C}=eo(),ie=to(h,ye&&C),x=ps(),G=ms(),[O,N]=gs(t,g=>[!g||g.isLoading,g==null?void 0:g.conversationOrigin]),S=O&&!!t,{data:m,isError:Y}=fs(),w=hs(m),I=m!=null,$=oo(15),[v,re]=f.useState(!1);f.useEffect(()=>{$&&!v&&re(!0)},[$,v]);const le=so(),q=wt(),K=(q==null?void 0:q.email_domain_type)==="professional",ce=!!(m!=null&&m.accountItems.some(g=>g.isEnterprisey())),D=K&&!ce&&ks(a).getLayer("3217430380").get("enable_workspace_discovery",!1),de=!!(K&&n===!1&&D&&v),{data:A,isLoading:W}=ao(de),J=!!(m&&(m==null?void 0:m.accountItems.length)>1&&m.currentAccountId==null),X=m==null?void 0:m.accountItems.some(g=>g.isPersonalAccount()),j=!!(m!=null&&m.accountItems)&&m.accountItems.length>0&&m.accountItems.every(({canAccessWithCurrentSession:g})=>!g),{eligible:E,isLoading:B}=no(),R=Ce(a,"1542198993"),{punchOutRequireLoginInfo:ue}=io(),{state:U}=ro(),{isOpen:Z}=lo(),{isOpen:V}=co(),{isOpen:F,isLoading:ee}=Ot(),{isOpen:ke}=uo(),H=yt(a),{isOpen:Re,isLoading:Ue}=H,{isOpen:Ve,isLoading:Fe}=po(),{isOpen:ze,isLoading:Ge}=mo(),{isOpen:qe}=go(),{isOpen:He}=_s(),{state:Qe}=fo(),Ye=ho(),$e=ko(),Ke=_o(),Je=bo(),Xe=Mo(),Ze=yo(),et=xo(),tt=So(),{isOpen:ot}=wo(),{isOpen:Dt}=pt(),{isOpen:At}=vo(),{isOpen:Pt}=Co(),{isOpen:st,open:at}=Oo(),{shouldShowCookieBanner:nt,isCookieConsentBannerLoading:it}=bs();f.useEffect(()=>{p&&!c&&!st&&at()},[p,c,st,at]);const Ae=f.useMemo(()=>[{Component:No,visibility:["chat","codex"],getModalState:()=>ue?"show":"hide",isDeferrable:!1,id:"punch_out_sign_in_as_modal"},{Component:Do,visibility:["chat","codex"],getModalState:()=>U,isDeferrable:!1,id:"punch_out_anon_to_authed_modal"},{Component:Ao,visibility:["chat"],getModalState:()=>Qe,isDeferrable:!1,id:"meet_chatgpt_modal"},{Component:Vs,visibility:["chat","codex"],getModalState:()=>ee?"loading":F?"show":"hide",isDeferrable:!1,id:"workspace_discovery_rename_prompt_modal"},{Component:Ys,visibility:["chat","codex"],getModalState:()=>{var P,_e;return!D||x!=null||n||Y?"hide":n==null||W?"loading":((_e=(P=A==null?void 0:A.workspaces)==null?void 0:P.length)!=null?_e:0)>0&&v?"show":"hide"},isDeferrable:!1,id:"fullscreen_switcher_both"},{Component:D?$s:Ss,visibility:["chat","codex"],getModalState:()=>x!=null||Y?"hide":I?J?"show":"hide":"loading",isDeferrable:!1,id:"workspace_switcher_modal"},{Component:Po,visibility:["codex"],getModalState:()=>le,isDeferrable:!1,id:"codex_onboarding_modal"},{Component:Io,visibility:["chat"],getModalState:()=>ot?"show":"hide",isDeferrable:!1,id:"noauth_promo_redemption_modal"},{Component:Lo,visibility:["chat"],getModalState:()=>Z?"show":"hide",isDeferrable:!1,id:"noauth_plan_upsell_modal"},{Component:To,visibility:["chat"],getModalState:()=>$e,isDeferrable:!1,id:"noauth_free_trial_upsell_modal"},{Component:Wo,visibility:["chat"],getModalState:()=>Ye,isDeferrable:!0,id:"noauth_imagegen_nux_modal"},{Component:jo,visibility:["chat"],getModalState:()=>S?"loading":N===Te.APPLE?"hide":ke?"show":"hide",isDeferrable:!0,id:"noauth_soft_rate_limit_modal"},{Component:Ms,visibility:["chat"],getModalState:()=>S?"loading":N===Te.APPLE?"hide":He?"show":"hide",isDeferrable:!0,id:"noauth_login_modal"},{Component:Eo,visibility:["chat"],getModalState:()=>S?"loading":N===Te.APPLE?"hide":qe?"show":"hide",isDeferrable:!0,id:"noauth_welcome_back_modal"},{Component:Qs,visibility:["chat","codex"],getModalState:()=>it?"loading":nt?"show":"hide",isDeferrable:!1,id:"cookie_consent_banner_tracker"},{Component:Hs,visibility:["chat"],getModalState:()=>c||p?"hide":u===null?"loading":u===!1?"show":"hide",isDeferrable:!0,id:"onboarding_modal"},{Component:qs,visibility:["chat","codex"],getModalState:()=>x!==null?"show":Y||I?"hide":"loading",isDeferrable:!1,id:"request_workspace_access_modal"},{Component:Fs,visibility:["chat","codex"],getModalState:()=>G!=null?"show":Y||I?"hide":"loading",isDeferrable:!1,id:"account_transfer_modal"},{Component:Bo,visibility:["chat","codex"],getModalState:()=>I?j?"show":"hide":"loading",isDeferrable:!1,id:"invalid_accounts_modal"},{Component:Bs,visibility:["chat","codex"],getModalState:()=>Ue?"loading":Re?"show":"hide",isDeferrable:!1,id:"desktop_blocking_modal"},{Component:Ro,visibility:["chat","codex"],getModalState:()=>Fe?"loading":Ve?"show":"hide",isDeferrable:!1,id:"desktop_onboarding_modal"},{Component:Uo,visibility:["chat","codex"],getModalState:()=>"hide",isDeferrable:!1,id:"authed_cookie_consent_banner"},{Component:zs,visibility:["chat","codex"],getModalState:()=>!(w!=null&&w.isSelfServeBusiness())||!(w!=null&&w.isOwnerOfAccount())||!X?"hide":!I||b===null?"loading":b===!1?"show":"hide",isDeferrable:!1,id:"team_account_transfer_modal"},{Component:Vo,visibility:["chat"],getModalState:()=>c?Ge?"loading":ze?"show":"hide":"hide",isDeferrable:!1,id:"workspace_policy_modal"},{Component:Es,visibility:["chat","codex"],getModalState:()=>!c||!d&&k?"hide":u===null?"loading":u===!1?"show":"hide",isDeferrable:!0,id:"workspace_onboarding_modal"},{Component:Fo,visibility:["chat"],getModalState:()=>B?"loading":E&&R?"show":"hide",isDeferrable:!1,id:"memory_onboarding_modal"},{Component:zo,visibility:["chat","codex"],getModalState:()=>ie,isDeferrable:!1,id:"age_verification_interstitial"},{Component:c&&_==="mix"?Gs:Go,visibility:["chat"],getModalState:()=>c&&_==="new"?"hide":Ke,isDeferrable:!1,id:"connectors_nux_modal"},{Component:qo,visibility:["chat"],getModalState:()=>et,isDeferrable:!1,id:"tatertot_nux_modal_v2"},{Component:Ho,visibility:["chat"],getModalState:()=>tt,isDeferrable:!1,id:"quiz_nux_modal"},{Component:Qo,visibility:["chat"],getModalState:()=>Je,isDeferrable:!1,id:"google_connectors_nux_modal"},{Component:Yo,visibility:["chat"],getModalState:()=>Ze,isDeferrable:!0,id:"golden_hour_nux_modal"},{Component:$o,visibility:["chat"],getModalState:()=>Xe,isDeferrable:!0,id:"moonshine_nux_v2_modal"},{Component:Ko,visibility:["chat"],getModalState:()=>V?"show":"hide",isDeferrable:!1,id:"free_trial_upsell_modal"}].filter(P=>P.visibility.includes(e)),[e,ue,U,Qe,ot,$e,Ye,ee,F,S,N,ke,Z,qe,it,nt,c,p,u,n,Y,A,W,J,I,x,G,j,Ue,Re,Fe,Ve,w,X,b,Ge,ze,B,E,R,D,ie,Ke,Je,Xe,et,tt,le,v,He,V,Ze,d,k,_]),It=z;function rt(g){if(g!=null)return g.isDeferrable&&It?"hide":g.Component?g.getModalState():"hide"}const te=Ae[i],xe=rt(te);xe==="hide"&&l((()=>{let P=i+1;for(;P<Ae.length;P++)if(rt(Ae[P])!=="hide")return P;return P})());const{pathname:Se}=Rt(),lt=f.useRef(Se);f.useEffect(()=>{lt.current!==Se&&(lt.current=Se,l(0))},[Se]),f.useEffect(()=>{const g=xe==="show",_e=ys(a).getState().activeModals.has(Le.BlockingInitialComponent);g!==_e&&(g?ft.openModal(Le.BlockingInitialComponent):ft.closeModal(Le.BlockingInitialComponent))},[a,xe]);const Pe=xe!=="show"||Dt||At||Pt||s,ct=Jo(()=>{se.logUpsellOrModalEvent(_t,{eventId:te.id,type:bt.UPSELL_OR_MODAL_TYPE_BLOCKING_INITIAL_MODAL})});if(f.useEffect(()=>{te==null||Pe||ct()},[te,Pe,ct]),te==null)return mt.trackNamespace(mt.NS_COMPOSER),o.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(Pe)return null;const Lt=te.Component;return o.jsx(Lt,{onClose:()=>{c&&_==="mix"&&te.id==="connectors_nux_modal"&&we(a,ve.hasSeenConnectorsNuxModal),y(!0),l(g=>g+1)}})}const kt=Me({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}});export{aa as B};
//# sourceMappingURL=mxzgpx7wtm4zk5cj.js.map
