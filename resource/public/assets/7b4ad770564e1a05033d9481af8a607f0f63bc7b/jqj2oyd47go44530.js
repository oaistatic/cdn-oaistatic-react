const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bonby2i4xf93dev1.js","assets/kfrdmkli83ureki3.js"])))=>i.map(i=>d[i]);
import{_ as B,c as L,r as E,j as t,M as g,d as W,h as D,b as q,y as F}from"./kfrdmkli83ureki3.js";import{az as Y,u as z,al as H,aA as J,gy as V,br as T,aB as k,ef as K,kS as Q,_ as v,e6 as X,at as $,eV as Z,dg as ee,fS as te,j8 as ae,R as se,A as ne,c9 as ie,n_ as I}from"./kw08ajijqinojrwh.js";import{a as oe,P as re}from"./kyzmzzgtaueiye6l.js";import{bP as U,bU as le,bR as ce,aH as me,jE as pe,jF as G,jG as ue}from"./fyw02vlaiv2vq6cj.js";import{S as de}from"./nm285usnll51g0n4.js";import"./c326bjybavj646xd.js";import"./lwyag88acem9bm0o.js";import"./lg0oi3tmjv8kv2p4.js";import"./b3ungmqo5x8kj4fh.js";import"./o5h7u1aikohecbkt.js";import"./w4rmhhxvug61xnae.js";import"./dd8hh2tmra1psngf.js";const he=Y(()=>B(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([0,1])),{loading:e=>J(e)});function ge(){"use forget";var S,P;const e=L.c(27),a=z();let s;e[0]!==a?(s=(P=(S=H(a))==null?void 0:S.normalizedAccountUserId)!=null?P:null,e[0]=a,e[1]=s):s=e[1];const n=s;let i;e[2]!==a?(i=U(a),e[2]=a,e[3]=i):i=e[3];const c=i,o=le(n!=null?n:""),[u,b]=E.useState(!1);if(!c.hasAccess||!n||u||!o)return null;let m;e[4]!==o.avatarUrl||e[5]!==o.name?(m={name:o.name,picture:o.avatarUrl},e[4]=o.avatarUrl,e[5]=o.name,e[6]=m):m=e[6];const w=m;let C;e[7]!==c?(C=()=>{b(!0),c.setUserOnboardingCompletion$()},e[7]=c,e[8]=C):C=e[8];const N=C;let f;e[9]!==w?(f=t.jsx(V,{user:w,size:"large"}),e[9]=w,e[10]=f):f=e[10];let _;e[11]!==o.name?(_=t.jsx("p",{className:"text-token-text-primary text-base font-semibold",children:o.name}),e[11]=o.name,e[12]=_):_=e[12];let r;e[13]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("p",{className:"text-token-text-secondary text-sm",children:t.jsx(g,{id:"c3PR7x",defaultMessage:"Set up your profile"})}),e[13]=r):r=e[13];let y;e[14]!==_?(y=t.jsxs("div",{className:"leading-tight",children:[_,r]}),e[14]=_,e[15]=y):y=e[15];let d;e[16]!==a||e[17]!==n?(d=()=>{T(a,ce,{accountUserId:n})},e[16]=a,e[17]=n,e[18]=d):d=e[18];let j;e[19]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx("p",{className:"text-token-text-primary",children:t.jsx(g,{id:"RutgIh",defaultMessage:"Set up"})}),e[19]=j):j=e[19];let l;e[20]!==d?(l=t.jsx(k,{color:"secondary",size:"large",icon:he,className:"rounded-full px-4",onClick:d,children:j}),e[20]=d,e[21]=l):l=e[21];let x;return e[22]!==N||e[23]!==l||e[24]!==f||e[25]!==y?(x=t.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"mx-auto w-full max-w-2xl",children:t.jsx(me,{icon:f,content:y,contentClassName:"flex-row items-center justify-between gap-8",closeButtonContainerClassName:"items-center!",customCtas:l,verticalCta:!1,onDismiss:N})})}),e[22]=N,e[23]=l,e[24]=f,e[25]=y,e[26]=x):x=e[26],x}const O=5e3;function fe({loaderData:e}){"use no forget";var R;const{id:a,token:s,authStatus:n}=e,i=z(),c=U(i),o=W(),u=te(),b=ae(),m=xe({authStatus:n,id:a,token:s}),w=K(()=>c==null?void 0:c.userAttributes$()),C=D(),N=Q(i),f=E.useRef(!1),_=E.useRef(!1),r=(R=m.data)==null?void 0:R.content.room_id;if(E.useEffect(()=>{r==null||_.current||(_.current=!0,v.logEventWithStatsig("Calpico - invite - page shown","chatgpt_web_calpico_invite_page_shown",{room_id:r}))},[r]),m.isLoading)return t.jsx(A,{children:t.jsx("div",{className:"flex h-full w-full items-center justify-center",children:t.jsx(X,{})})});if(m.error!=null)return t.jsx(A,{children:t.jsx("div",{className:"flex h-full w-full items-center justify-center",children:t.jsx("p",{className:"max-w-2xl px-8 text-center text-lg text-balance",children:m.error.message})})});if(m.data==null)return t.jsx(A,{children:null});const y=e.type==="ok"?e.roomName:null,d=m.data.content.member_count,j=d<=3,l=j?m.data.content.members:m.data.content.members.slice(0,2);let x=null;j?d===1?x=t.jsx(g,{id:"siksc7",defaultMessage:"<emphasis>ChatGPT</emphasis> with <emphasis>{name}</emphasis>",values:{emphasis:p=>t.jsx(M,{children:p}),name:l[0].name}}):d===2?x=t.jsx(g,{id:"Rvrtg/",defaultMessage:"<emphasis>ChatGPT</emphasis> with <emphasis>{name1} and {name2}</emphasis>",values:{emphasis:p=>t.jsx(M,{children:p}),name1:l[0].name,name2:l[1].name}}):d===3&&(x=t.jsx(g,{id:"nooFua",defaultMessage:"<emphasis>ChatGPT</emphasis> with <emphasis>{name1}, {name2}, and {name3}</emphasis>",values:{emphasis:p=>t.jsx(M,{children:p}),name1:l[0].name,name2:l[1].name,name3:l[2].name}})):x=t.jsx(g,{id:"My6mmz",defaultMessage:"<emphasis>ChatGPT</emphasis> with <emphasis>{name1}, {name2}, and {remainingCount} more</emphasis>",values:{emphasis:p=>t.jsx(M,{children:p}),name1:l[0].name,name2:l[1].name,remainingCount:d-2}});const S=t.jsx(g,{id:"a17r/Y",defaultMessage:"Join group chat"}),P=n===$.LoggedIn&&c.hasAccess&&!u&&!b&&w!=null&&w.onboardedAt==null;return t.jsxs(A,{children:[t.jsx("div",{className:"flex h-full flex-col items-center justify-center text-center",children:t.jsxs("div",{className:"flex max-w-3xl flex-col items-center text-center",children:[t.jsx(pe,{list:m.data.content.members.map(p=>({id:p.account_user_id,avatarUrl:p.avatar_url,name:p.name})),excludeViewer:!1,variant:"horizontal-stack"}),t.jsx("h3",{className:"text-token-text-tertiary mt-3 mb-1 text-xl font-normal text-balance",children:x}),t.jsx("p",{className:"text-token-text-secondary text-balance",children:y!=null?y:t.jsx(g,{id:"z7w9u0",defaultMessage:"Share, collaborate, and get creative — with some help from ChatGPT."})}),t.jsxs("div",{className:"mt-6 flex flex-col items-center space-y-1",children:[u?t.jsx(k,{color:"primary",size:"large",as:"a",openNewTab:!0,to:"chatgpt://gg/v/".concat(a,"?token=").concat(s),onClick:()=>{v.logEventWithStatsig("Calpico - invite - manually deeplink to mobile","chatgpt_web_calpico_invite_manually_deeplink_to_mobile",{room_id:r}),setTimeout(()=>{T(i,G,{roomId:r})},O)},children:S}):b?t.jsx(k,{color:"primary",size:"large",as:"a",openNewTab:!0,to:"chatgpt://chatgpt.com/gg/v/".concat(a,"?token=").concat(s),onClick:()=>{v.logEventWithStatsig("Calpico - invite - manually deeplink to mobile","chatgpt_web_calpico_invite_manually_deeplink_to_mobile",{room_id:r}),setTimeout(()=>{T(i,G,{roomId:r})},O)},children:S}):t.jsx(k,{color:"primary",size:"large",onClick:async()=>{var p;if(n===$.LoggedOut){v.logEventWithStatsig("Calpico - invite - auth redirect","chatgpt_web_calpico_invite_auth_redirect",{room_id:r});const h=new URLSearchParams([["next","/gg/v/".concat(a,"?token=").concat(s)]]);o("/auth/login/?".concat(h.toString()));return}if(c.hasAccess){if(f.current)return;f.current=!0;try{const h=await c.acceptMagicLink$({magic_link_id:a,token:s});h!=null&&h.roomId&&(v.logEventWithStatsig("Calpico - invite - accepted","chatgpt_web_calpico_invite_accepted",{room_id:h==null?void 0:h.roomId}),o("/gg/".concat(h.roomId)))}catch(h){N.danger((p=Z(h))!=null?p:C.formatMessage(ee.somethingWentWrong))}finally{f.current=!1}}else v.logEventWithStatsig("Calpico - invite - no access yet modal shown","chatgpt_web_calpico_invite_no_access_yet_modal_shown",{room_id:r}),T(i,ue)},children:S}),t.jsx(k,{color:"ghost",size:"large",onClick:()=>{v.logEventWithStatsig("Calpico - invite - ignored","chatgpt_web_calpico_invite_ignored",{room_id:r}),o("/")},children:t.jsx(g,{id:"tILHmH",defaultMessage:"Ignore"})})]})]})}),t.jsxs("div",{className:"absolute inset-x-0 bottom-4 flex w-full flex-col items-center space-y-2 px-6",children:[u||b?t.jsxs("div",{className:"mb-6",children:[u?t.jsx(oe,{}):null,b?t.jsx(re,{referrer:"groupChatInvitation"}):null]}):null,P?t.jsx("div",{className:"mb-8 w-full",children:t.jsx(ge,{})}):null,t.jsx("p",{className:"text-caption-regular text-token-text-tertiary text-center text-pretty",children:t.jsx(g,{id:"ytzRfA",defaultMessage:"Your personal ChatGPT memory is never used in group chats."})}),t.jsx(k,{color:"secondary",size:"small",as:"a",to:"https://help.openai.com/en/articles/12703475-group-chats",openNewTab:!0,children:t.jsx("p",{className:"text-footnote-regular text-token-text-secondary font-medium",children:t.jsx(g,{id:"ds1qjK",defaultMessage:"Learn more"})})})]})]})}function M(e){"use forget";const a=L.c(2),{children:s}=e;let n;return a[0]!==s?(n=t.jsx("span",{className:"text-token-text-primary",children:s}),a[0]=s,a[1]=n):n=a[1],n}function xe({authStatus:e,id:a,token:s}){"use no forget";return q({queryKey:["calpico-group-link",e,a,s],queryFn:async()=>await se.safeGet("/calpico/chatgpt/links/{magic_link_id}",{parameters:{path:{magic_link_id:a},query:{token:s}},authOption:ne.SendIfAvailable})})}function A(e){"use forget";const a=L.c(3),{children:s}=e;let n;a[0]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx("div",{className:"absolute start-2 top-2 md:hidden",children:t.jsx(de,{onClick:_e})}),a[0]=n):n=a[0];let i;return a[1]!==s?(i=t.jsxs("div",{className:"relative mx-auto h-full w-full max-w-5xl px-6 sm:px-12",children:[n,s]}),a[1]=s,a[2]=i):i=a[2],i}function _e(){return ie.setSidebarOpen(!0)}const Ee=({currentUrl:e,nextUrl:a})=>!(e.pathname===a.pathname&&e.searchParams.get("token")===a.searchParams.get("token")),Te=({loaderData:e})=>{const a=[{name:"robots",content:"noindex,nofollow"},{property:"og:type",content:"website"},{property:"og:image",content:I.src},{property:"og:image:secure_url",content:I.src},{property:"og:image:width",content:"1600"},{property:"og:image:height",content:"900"},{property:"og:site_name",content:"ChatGPT"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:image",content:I.src},{name:"twitter:site",content:"@ChatGPTapp"}];switch(e.type){case"ok":{const{senderName:s,roomName:n,ogTitle:i,ogDescription:c}=e;let o="Join my group chat on ChatGPT",u="".concat(s," invited you to a ChatGPT group chat");return n&&(u="".concat(s," invited you to join “").concat(n,"” on ChatGPT")),i&&(o=i),c&&(u=c),[...a,{title:o},{name:"description",content:u},{property:"og:title",content:o},{property:"og:description",content:u},{property:"og:image:alt",content:o},{name:"twitter:title",content:o},{name:"twitter:description",content:u},{name:"twitter:image:alt",content:o}]}case"workspace-mismatch":{const s="Join my group chat on ChatGPT";return[...a,{title:s},{property:"og:title",content:s},{property:"og:image:alt",content:s},{name:"twitter:title",content:s},{name:"twitter:image:alt",content:s}]}}},Le=F(function(a){"use forget";const s=L.c(2),{loaderData:n}=a;let i;return s[0]!==n?(i=t.jsx(fe,{loaderData:n}),s[0]=n,s[1]=i):i=s[1],i});export{Le as default,Te as meta,Ee as shouldRevalidate};
//# sourceMappingURL=jqj2oyd47go44530.js.map
