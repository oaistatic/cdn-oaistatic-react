var V=Object.freeze,ee=Object.defineProperty,ve=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var J=(s,e,o)=>e in s?ee(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,_=(s,e)=>{for(var o in e||(e={}))ye.call(e,o)&&J(s,o,e[o]);if(X)for(var o of X(e))Pe.call(e,o)&&J(s,o,e[o]);return s},te=(s,e)=>ve(s,be(e));var se=(s,e)=>V(ee(s,"raw",{value:V(e||s.slice())}));import{e as de,h as ue,j as l,M as Z,c as fe}from"./kfrdmkli83ureki3.js";import{_ as q,k_ as pe,u as K,eG as G,cq as je,cv as Ae,p as ge,N as me,bh as he,hw as xe,c7 as _e,c2 as Ue,c4 as Fe,l4 as ke,pr as Le,k3 as Ee,d as Te,c3 as oe,k9 as Ce,j9 as Ie,ps as De,pt as Ne,pu as Re,pv as ze,pw as Be,c8 as Oe,px as Se,py as $e,j7 as ae,j6 as W}from"./kw08ajijqinojrwh.js";import{fI as ie,fJ as we,fK as Ge,fL as He,fM as le,fN as Ye,fO as We,fP as Ze,fQ as qe,fR as Ke}from"./fyw02vlaiv2vq6cj.js";import{u as Qe}from"./c7lf6x6u521mpx19.js";function ct({clientThreadId:s,openFileDialog:e,icon:o,isDisabled:r=!1,isSmall:c=!1,showLabel:a=!1,showUpsell:d=!1,hideBorder:t=!1,highlightTooltip:n=!1,disabledReason:g,currentModelName:b,visualTreatment:x,showMenuForNoAuth:f,modelSupportsImages:i}){const m=ue(),p=pe(),u=K();r=(r||!!p)&&!d;const M=l.jsxs(we,{disabled:r,$showLabel:a,$hideBorder:t,$isSmall:c,$visualTreatment:x,onClick:F=>{if(F.preventDefault(),f||d){q.logNoAuthAttachButtonClicked({location:f?"No auth file upload":"No auth upsell"});return}e()},"aria-label":Ge(u,m,r,g,b),children:[o,a&&l.jsx(He,{})]}),y=l.jsx("div",{className:"flex",children:M});if(f||d){const F=f?l.jsx(Ye,{openFileDialog:e,showMenuForNoAuth:!0,modelSupportsImages:i,clientThreadId:s}):l.jsx(We,{location:"attach",statsig_login_event:"chatgpt_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_composer_upsell_signup_button_clicked"}),h=l.jsx(G.BasicTrigger,{asChild:!0,children:y});return l.jsxs(G.Root,{children:[f?l.jsx(le,{clientThreadId:s,rateLimitPopup:p,highlightTooltip:n,disabled:r,children:h}):l.jsx(je,{label:l.jsx(Z,{id:"wkpQmi",defaultMessage:"Upload files and more"}),side:"bottom",open:n||void 0,children:h}),l.jsx(G.Portal,{children:l.jsx(G.Content,{alignOffset:-8,side:"bottom",size:"small",className:"radix-side-bottom:flex-col-reverse flex flex-col",children:F})})]})}return l.jsx(le,{disabled:r,clientThreadId:s,rateLimitPopup:p,highlightTooltip:n,children:y})}function Ve({code:s,message:e}){switch(s){case ie.FileTooLarge:return re.errorFileTooLarge;case ie.TooManyFiles:return q.logEvent("Uploaded Max Files Error"),re.errorTooManyFiles;default:return e}}const re=de({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Upload files and more"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."}}),ne=de({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function Xe(s){if(!s.accept||Object.keys(s.accept).length===0)return[];const e=[];return Object.values(s.accept).forEach(o=>e.push(...o)),e.sort()}function dt(s){"use forget";var Q;const e=fe.c(45),{className:o,children:r,clientThreadId:c,currentModelConfig:a,noKeyboard:d}=s,t=ue(),n=ge(),g=K(),b=me(g),x=he(g).flags,f=x==null?void 0:x.includes(xe.NoAuthEnableFileUploads),i=Ze(c),m=_e();let p;e[0]!==m||e[1]!==i||e[2]!==a?(p=Ue(a,i,m),e[0]=m,e[1]=i,e[2]=a,e[3]=p):p=e[3];const u=p,M=u!==Fe.None,y=ke(Je),F=Le(u),h=Math.max(0,F-y.length),U=h<=0,{getGizmoId:z}=Ee();let D;e[4]!==c||e[5]!==g?(D=ze(g,c),e[4]=c,e[5]=g,e[6]=D):D=e[6];const N=Te(D),k=Array.isArray(N)&&N.length>0;let j;e[7]!==i||e[8]!==a?(j=oe(a,i),e[7]=i,e[8]=a,e[9]=j):j=e[9];let A;e[10]!==i||e[11]!==a?(A=(Q=Ce(a,i))==null?void 0:Q.attachments,e[10]=i,e[11]=a,e[12]=A):A=e[12];const{handleFileAccepted:L}=tt(t,u,j,"drag",z,A,k?N:void 0),B=pe(),Me=Ie();let O;e:{if(Me){O=Be;break e}else if(!b&&f){let w;e[13]!==i||e[14]!==a?(w=oe(a,i),e[13]=i,e[14]=a,e[15]=w):w=e[15],O=w;break e}let v;e[16]!==i||e[17]!==a?(v=De(a,i),e[16]=i,e[17]=a,e[18]=v):v=e[18],O=v}const E=Ne(O),H=!M||U||B!=null;let T;e[19]!==t||e[20]!==n||e[21]!==u?(T=v=>et(v,t,n,u),e[19]=t,e[20]=n,e[21]=u,e[22]=T):T=e[22];let S;e[23]!==E||e[24]!==L||e[25]!==d||e[26]!==h||e[27]!==H||e[28]!==T?(S=_({maxFiles:h,disabled:H,noClick:!0,noKeyboard:d,onDropAccepted:L,onDropRejected:T,multiple:!0,maxSize:Re},E),e[23]=E,e[24]=L,e[25]=d,e[26]=h,e[27]=H,e[28]=T,e[29]=S):S=e[29];const{getRootProps:R,isDragActive:Y}=Qe(S);let C,P,I;if(e[30]!==r||e[31]!==o||e[32]!==E||e[33]!==R||e[34]!==Y){const v=Xe(E);e[38]!==o||e[39]!==R?(P=R({className:o}),e[38]=o,e[39]=R,e[40]=P):P=e[40],I=r,C=Y&&l.jsxs(st,{children:[l.jsx(qe,{}),l.jsx("h3",{children:l.jsx(Z,_({},ne.dragInstructions))}),l.jsx("h4",{className:"w-2/3 text-center",children:v.length>0?v.join(", "):l.jsx(Z,_({},ne.dragAllAccepted))})]}),e[30]=r,e[31]=o,e[32]=E,e[33]=R,e[34]=Y,e[35]=C,e[36]=P,e[37]=I}else C=e[35],P=e[36],I=e[37];let $;return e[41]!==C||e[42]!==P||e[43]!==I?($=l.jsxs("div",te(_({},P),{children:[I,C]})),e[41]=C,e[42]=P,e[43]=I,e[44]=$):$=e[44],$}function Je(s){return s.files}function et(s,e,o,r){const{errors:c}=s[0],a=Se(r);c.forEach(d=>{const t=Ve(d);typeof t=="string"?o.danger(t,{hasCloseButton:!0,loggingTitle:"File upload error",loggingDescription:t,toastId:"file_upload_error"}):o.danger(e.formatMessage(t,{size:$e,maxNum:a}),{hasCloseButton:!0,loggingTitle:t.defaultMessage||"File upload error",loggingDescription:t.defaultMessage||"File upload error",toastId:"file_upload_error"})})}function tt(s,e,o,r,c,a,d){"use forget";const t=fe.c(20),n=K(),g=he(n).flags,b=ge(),x=Oe();let f;t[0]!==n?(f=me(n),t[0]=n,t[1]=f):f=t[1];const i=!f,m=d!=null?d:void 0,p=g==null?void 0:g.includes(xe.NoAuthEnableFileUploads);let u;t[2]!==n?(u=Ke(n,!0),t[2]=n,t[3]=u):u=t[3];const{persistFilesToLibrary:M,doubleWriteFilesToLibrary:y}=u;let F;t[4]!==a||t[5]!==m||t[6]!==c||t[7]!==s||t[8]!==y||t[9]!==M||t[10]!==i||t[11]!==o||t[12]!==p||t[13]!==x||t[14]!==b||t[15]!==r||t[16]!==e?(F=async(z,D)=>{q.logEvent("Upload File",{client:"web",eventSource:r,intent:e.toString()});const N=c!=null?await c():void 0;z.length>0&&z.forEach(k=>{const j=_(_({gizmoId:N},p&&{isUnauthenticated:i}),m&&m.length>0?{contextScopes:m}:{}),A=[x,ae(k),k,e,o,s,b,j,a];if(e===Fe.Retrieval){let L=Promise.resolve(),B=Promise.resolve();M&&(B=W.uploadFile(x,"".concat(ae(k),":lib"),k,e,o,s,b,j,a,void 0,!0,!0)),(y||!M)&&(L=W.uploadFile(...A,void 0,!1,M)),Promise.all([L,B])}else W.uploadFile(...A)})},t[4]=a,t[5]=m,t[6]=c,t[7]=s,t[8]=y,t[9]=M,t[10]=i,t[11]=o,t[12]=p,t[13]=x,t[14]=b,t[15]=r,t[16]=e,t[17]=F):F=t[17];const h=F;let U;return t[18]!==h?(U={handleFileAccepted:h},t[18]=h,t[19]=U):U=t[19],U}var ce;const st=Ae.div(ce||(ce=se(['absolute z-50 inset-0 flex gap-2 flex-col justify-center items-center after:contents-[""] after:absolute after:opacity-80 after:z-[-1] after:bg-token-main-surface-primary after:inset-0'])));export{st as D,dt as F,ct as P,Xe as g,et as h,tt as u};
//# sourceMappingURL=nh6x5pasrftsddpw.js.map
