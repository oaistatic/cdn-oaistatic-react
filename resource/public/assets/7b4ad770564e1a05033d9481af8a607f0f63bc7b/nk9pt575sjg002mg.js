import{y as f,o as y,a1 as C,j as P,h as _,d as h,u as M,r as S,e as E}from"./kfrdmkli83ureki3.js";import{aP as g,au as p,dT as L,am as m,oa as w,u as F,p as T,dg as b,ak as x,_ as A,a7 as k,kg as v}from"./kw08ajijqinojrwh.js";import{i as O,C as R}from"./ite26mmpefwubzx4.js";import{be as I}from"./fyw02vlaiv2vq6cj.js";import"./m9gq49u2vlb0cjyx.js";import"./lg0oi3tmjv8kv2p4.js";import"./b3ungmqo5x8kj4fh.js";import"./iej0cupg2dqkmejt.js";import"./batn8nst470a68ib.js";import"./m0t07ixd92668z9e.js";import"./ds50f4rqnruk5v5l.js";function l({intl:o,message:e,navigate:s,toaster:a}){a.warning(o.formatMessage(e),{duration:5}),s("/#pricing")}function N({checkoutFrom:o,checkoutPlanType:e,ctx:s,currentAccount:a,intl:i,navigate:c,queryClient:n,isEligibleForProOnboarding:r,toaster:u}){const t=x(s,"2494348560");A.logPaymentSuccess({plan_type:e}),e===m.PLUS&&k.logEvent("chatgpt_plus_payment_success_page"),a.isFree()?n.invalidateQueries(v()):o?(g.removeItem(p.CheckoutFrom),window.location.href=R[o]):r&&t.get("enable_ca_pro_onboarding_flow",!1)?window.location.href="/payments/success-ind":(c("/"),u.success(i.formatMessage(d.paymentConfirmationToastMessage,{planName:I(e)}),{duration:5}))}function j({checkoutFrom:o,checkoutPlanType:e,currentAccount:s,postCheckoutResult:a,isEligibleForProOnboarding:i}){const c=F(),n=_(),r=h(),u=M(),t=T();return S.useEffect(()=>{switch(a){case"success":return N({checkoutFrom:o,checkoutPlanType:e,ctx:c,currentAccount:s,intl:n,isEligibleForProOnboarding:i,navigate:r,queryClient:u,toaster:t});case"payment_failed":return l({intl:n,toaster:t,navigate:r,message:d.paymentFailedToastMessage});case"other_error":return l({intl:n,toaster:t,navigate:r,message:b.somethingWentWrong})}},[o,e,c,s,n,i,r,a,u,t]),null}const J=f(function(){var t;const[e]=y(),s=g.getItem(p.CheckoutFrom),a=L(),i=C(),c=(t=e.get("plan_type"))!=null?t:m.PLUS,{anyConnectorEnabled:n,isLoading:r}=w({});if(!a||r)return null;const u=!n&&c===m.PRO;return P.jsx(j,{checkoutFrom:O(s)?s:null,checkoutPlanType:c,currentAccount:a,isEligibleForProOnboarding:u,postCheckoutResult:i.postCheckoutResult})}),d=E({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{J as default};
//# sourceMappingURL=nk9pt575sjg002mg.js.map
