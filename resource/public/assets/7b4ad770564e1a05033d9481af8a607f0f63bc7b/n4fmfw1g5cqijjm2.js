const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/l3z5gz1257zwquc2.js","assets/kfrdmkli83ureki3.js","assets/fyw02vlaiv2vq6cj.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css","assets/iwr3smf9emayvqcc.js","assets/gosr9rxp0v3e8kw5.js","assets/oy0v5ug2g8t9nclv.js","assets/nz44s7ebe5b6pll5.js","assets/gofl1ofz4j3f1jpw.js","assets/ezd0hym0jr36348y.js","assets/bc7tmzzosjt75txl.js","assets/i2fce51g7exmjyb6.js","assets/fhiqz5jh4i8adn2f.js","assets/d495ppjmiaba4smq.js"])))=>i.map(i=>d[i]);
var De=Object.defineProperty,Le=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var Te=(s,t,a)=>t in s?De(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,n=(s,t)=>{for(var a in t||(t={}))We.call(t,a)&&Te(s,a,t[a]);if(fe)for(var a of fe(t))ze.call(t,a)&&Te(s,a,t[a]);return s},J=(s,t)=>Le(s,Fe(t));import{_ as P,r as m,h as U,j as e,M as i,e as ee,u as $,t as Ue,d as Be,i as le,y as qe}from"./kfrdmkli83ureki3.js";import{az as S,aB as G,cy as de,aA as v,aC as Pe,da as Se,R as Y,j as D,sv as f,d8 as b,hV as je,eG as O,d_ as He,dR as Ve,e6 as ve,u as Me,kR as Ke,dN as Ye,h as Qe,qJ as Je,qy as ye,ev as $e,p as ce,dT as Ze,fO as Xe,sj as es,sw as X,ss as ie,st as ss,cq as be}from"./kw08ajijqinojrwh.js";import{a$ as p,x as Ne,V as ts,w as oe,bq as as,bB as is,jX as ns,a_ as rs,mQ as os,mR as ls,bm as ds,bn as cs,bo as us,J as k,mS as ps}from"./fyw02vlaiv2vq6cj.js";import{a as ms,c as gs}from"./lfd6u1c3bnv1pl81.js";import{a as xs}from"./gkqhbgrbj1y58hh3.js";import{b as ne}from"./frwdgn6kjyxcdqpx.js";import{A as hs}from"./m8q8dq3jpr27q2m0.js";import{u as fs,a as Ts}from"./udy9p09dkczfkqdq.js";import"./mj0406dyy526560j.js";import"./n25jb1xrdrimv99m.js";import"./nm285usnll51g0n4.js";import"./c326bjybavj646xd.js";import"./lwyag88acem9bm0o.js";import"./lg0oi3tmjv8kv2p4.js";import"./b3ungmqo5x8kj4fh.js";import"./o5h7u1aikohecbkt.js";import"./w4rmhhxvug61xnae.js";import"./dd8hh2tmra1psngf.js";import"./moa9hw4knutxpmay.js";import"./nh6x5pasrftsddpw.js";import"./c7lf6x6u521mpx19.js";import"./hk5ml9l4i4ups2ga.js";import"./fwbhrttgqnv5nm9m.js";import"./octxl093if6ckp4g.js";import"./d1ak5u4m6fymztz5.js";import"./bufsnh483s8sy0nc.js";import"./ol3xw5qndra1cjvx.js";const js=S(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([0,1])),{loading:s=>v(s)}),ys=S(()=>P(()=>import("./fyw02vlaiv2vq6cj.js").then(s=>s.zy),__vite__mapDeps([2,1,3,4,5])),{loading:s=>v(s)});function ws({value:s,title:t,valueClassName:a,onChange:r,emptyMessage:u}){const[c,d]=m.useState(!1),[h,y]=m.useState(""),T=U(),x=m.useRef(null),j=()=>{if(h!==""){const g=h.trim();r([...s,g]),d(!1),y("")}};return e.jsxs(p.Root,{className:"w-auto",children:[e.jsxs(p.Header,{children:[e.jsx(p.HeaderCell,{children:t}),e.jsx(p.HeaderCell,{})]}),e.jsxs(p.Body,{children:[s.map((g,w)=>e.jsxs(p.Row,{children:[e.jsx(p.Cell,{className:a,children:g}),e.jsx(p.Cell,{textAlign:"right",children:e.jsx(G,{type:"button",onClick:()=>{r(s.filter((M,A)=>A!==w))},children:e.jsx(js,{className:"icon-sm"})})})]},w)),u&&s.length===0?e.jsx(p.Row,{children:e.jsx(p.Cell,{colSpan:2,className:"text-center text-sm italic",children:u})}):null,e.jsxs(p.Row,{children:[e.jsxs("div",{className:de("mt-2 flex flex-row gap-2 p-1",!c&&"hidden"),children:[e.jsx(Ne,{ariaLabel:T.formatMessage({id:"CgP6Du",defaultMessage:"Add new domain"}),className:"w-80",name:"newDomain",value:h,onChange:g=>{y(g.target.value)},ref:x,onPressEnter:j,placeholder:"example.com"}),e.jsx(G,{className:"grow-0",onClick:j,children:e.jsx(i,{id:"svRVol",defaultMessage:"Add"})})]}),!c&&e.jsxs(G,{type:"button",onClick:()=>{d(!0),setTimeout(()=>{var g;(g=x.current)==null||g.focus()},0)},className:"mt-2",children:[e.jsx(ys,{className:"icon-sm inline-block"}),e.jsx(i,{id:"J5y3+M",defaultMessage:"Add new domain"})]})]})]})]})}const _s=S(()=>P(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([6,1])),{loading:s=>v(s)});function ks(){return e.jsx(_s,{className:"icon-sm text-token-text-tertiary ms-1"})}function Ps({isOpen:s,onClose:t,account:a,gpt:r}){const u=U(),[c,d]=m.useState(!1),[h,y]=m.useState(""),[T,x]=m.useState(!0),j=r.gizmo.is_unassigned;return e.jsxs(Pe,{testId:"modal-change-owner",size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Se,type:"success",title:u.formatMessage(j?z.assignModalTitle:z.changeModalTitle),children:[e.jsx("p",{className:"text-token-text-primary mb-4",children:e.jsx(i,J(n({},z.changeModalPrompt),{values:{gptName:r.gizmo.display.name}}))}),!T&&e.jsx("p",{className:"text-red-500",children:e.jsx(i,n({},z.invalidEmail))}),e.jsx(Ne,{ariaLabel:u.formatMessage({id:"x4A5l2",defaultMessage:"Email"}),className:de("px-3 py-2",T?"":"border-red-500"),name:"email",type:"email",value:h,placeholder:"Email",onChange:g=>{y(g.target.value)}}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(G,{color:"secondary",onClick:()=>{t(!1),d(!1),x(!0)},loading:c,children:e.jsx(i,n({},z.cancelButtonText))}),e.jsx(G,{color:"primary",loading:c,onClick:()=>{d(!0),x(!0),h==""||!ts.test(h)?(x(!1),d(!1)):Y.safePost("/accounts/{account_id}/gpts/{gizmo_id}/owner",{parameters:{path:{account_id:a.id,gizmo_id:r.gizmo.id}},requestBody:{email:h}}).then(()=>{t(!0),d(!1),x(!0)},()=>{x(!1),d(!1)})},children:e.jsx(i,n({},j?z.assignButtonText:z.changeOwnerButtonText))})]})]})}const z=ee({changeModalTitle:{id:"changeOwnerModal.changeModalTitle",defaultMessage:"Change Owner"},assignModalTitle:{id:"changeOwnerModal.assignModalTitle",defaultMessage:"Assign Owner"},changeModalPrompt:{id:"changeOwnerModal.changeModalPrompt",defaultMessage:"New owner of {gptName}"},cancelButtonText:{id:"changeOwnerModal.cancelButtonText",defaultMessage:"Cancel"},changeOwnerButtonText:{id:"changeOwnerModal.changeOwnerButtonText",defaultMessage:"Change owner"},assignButtonText:{id:"changeOwnerModal.assignButtonText",defaultMessage:"Assign"},invalidEmail:{id:"changeOwnerModal.invalidEmail",defaultMessage:"Email is invalid or does not belong to a member in this workspace"}});function Ss({isOpen:s,onClose:t,account:a,gpt:r}){const u=U(),[c,d]=m.useState(!1);return e.jsxs(Pe,{testId:"modal-delete-gpt",size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Se,type:"success",title:u.formatMessage(Z.deleteModalTitle),children:[e.jsx("p",{className:"text-token-text-primary mb-4",children:e.jsx(i,J(n({},Z.deleteModalPrompt),{values:{gptName:r.gizmo.display.name}}))}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(G,{color:"secondary",onClick:()=>{t(!1)},loading:c,children:e.jsx(i,n({},Z.cancelButtonText))}),e.jsx(G,{color:"danger",loading:c,onClick:()=>{d(!0),Y.safeDelete("/accounts/{account_id}/gpts/{gizmo_id}",{parameters:{path:{account_id:a.id,gizmo_id:r.gizmo.id}}}).finally(()=>{t(!0),d(!1)})},children:e.jsx(i,n({},Z.deleteButtonText))})]})]})}const Z=ee({deleteModalTitle:{id:"deleteGPTModal.accessModalTitle",defaultMessage:"Delete GPT"},deleteModalPrompt:{id:"deleteGPTModal.accessModalPrompt",defaultMessage:"Are you sure you would like to delete {gptName}? This action can not be undone."},cancelButtonText:{id:"deleteGPTModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"deleteGPTModal.deleteButtonText",defaultMessage:"Delete"}}),vs=S(()=>P(()=>import("./gosr9rxp0v3e8kw5.js"),__vite__mapDeps([7,1])),{loading:s=>v(s)}),we=S(()=>P(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([0,1])),{loading:s=>v(s)}),Ms=S(()=>P(()=>import("./fyw02vlaiv2vq6cj.js").then(s=>s.zu),__vite__mapDeps([2,1,3,4,5])),{loading:s=>v(s)}),_e=S(()=>P(()=>import("./fyw02vlaiv2vq6cj.js").then(s=>s.zy),__vite__mapDeps([2,1,3,4,5])),{loading:s=>v(s)}),bs=S(()=>P(()=>import("./oy0v5ug2g8t9nclv.js"),__vite__mapDeps([8,1])),{loading:s=>v(s)}),Ns=S(()=>P(()=>import("./nz44s7ebe5b6pll5.js"),__vite__mapDeps([9,1])),{loading:s=>v(s)}),Cs=S(()=>P(()=>import("./gofl1ofz4j3f1jpw.js"),__vite__mapDeps([10,1])),{loading:s=>v(s)}),Os=S(()=>P(()=>import("./ezd0hym0jr36348y.js"),__vite__mapDeps([11,1])),{loading:s=>v(s)}),As=S(()=>P(()=>import("./bc7tmzzosjt75txl.js"),__vite__mapDeps([12,1])),{loading:s=>v(s)}),ke=S(()=>P(()=>import("./kw08ajijqinojrwh.js").then(s=>s.yt),__vite__mapDeps([3,1,4])),{loading:s=>v(s)}),Rs=S(()=>P(()=>import("./i2fce51g7exmjyb6.js"),__vite__mapDeps([13,1])),{loading:s=>v(s)}),Gs=S(()=>P(()=>import("./fhiqz5jh4i8adn2f.js"),__vite__mapDeps([14,1])),{loading:s=>v(s)}),Is=S(()=>P(()=>import("./d495ppjmiaba4smq.js"),__vite__mapDeps([15,1,3,4]))),Es=10;function Ds({account:s,gpt:t,thirdParty:a}){var R,B,q,Q,H;const r=$(),u=Me(),[c,d]=m.useState(!1),[h,y]=m.useState(!1),[T,x]=m.useState(!1),[j,g]=m.useState(!1),w=Be(),M=new Date(a?(R=t.gizmo.workspace_approval_date)!=null?R:"":t.gizmo.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),A=new Date(t.gizmo.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),I=m.useMemo(()=>{const N=t.tools.filter(F=>F.type===D.JIT_PLUGIN).map(F=>F.type===D.JIT_PLUGIN?F.metadata.domain:"");return N.length===1?N[0]:N.length>1?"".concat(N.length," domains"):""},[t.tools]),L=t.gizmo.is_unassigned;return e.jsxs(e.Fragment,{children:[e.jsxs(p.Row,{className:"relative",children:[e.jsx(p.Cell,{className:"max-w-[320px] min-w-[240px] py-2 pe-2 align-middle! whitespace-break-spaces",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 shrink-0",children:e.jsx(is,{src:t.gizmo.display.profile_picture_url,isFirstParty:(q=(B=t.gizmo.tags)==null?void 0:B.includes(Ke.FirstParty))!=null?q:!1,alt:t.gizmo.display.name,className:"h-10 w-10"})}),e.jsx(Ye,{className:"ms-4",onClick:()=>w(Qe(u,t)),children:e.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:t.gizmo.display.name})})]})}),e.jsx(p.Cell,{className:"text-token-text-secondary w-full max-w-[160px] min-w-[100px] p-2 align-middle! text-sm",children:L?e.jsx("div",{className:"bg-token-bg-tertiary rounded-lg px-2 py-1",children:e.jsx(i,n({},l.unassigned))}):e.jsx("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:t.gizmo.author.display_name})}),e.jsx(p.Cell,{wrap:!0,className:"text-token-text-secondary max-w-[240px] min-w-[160px] p-2 align-middle! text-sm",children:I===""?"â€”":I}),!a&&e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:e.jsx(zs,{gizmo:t,account:s})}),!a&&e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:(H=(Q=t.gizmo.vanity_metrics)==null?void 0:Q.num_conversations_str)!=null?H:0}),e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:M}),e.jsx(p.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:A}),e.jsx(p.Cell,{className:"border-token-border-heavy bg-token-bg-primary sticky end-0 border-s-[0.5px] p-1 align-middle!",textAlign:"center",children:e.jsxs(O.Root,{children:[e.jsx(O.Trigger,{children:e.jsx(Os,{className:"icon-sm"})}),e.jsx(O.Portal,{children:a?e.jsx(O.Content,{children:e.jsx(O.Item,{onClick:()=>{g(!0)},color:"danger",icon:we,children:e.jsx(i,n({},l.removeFromWorkspace))})}):e.jsxs(O.Content,{children:[e.jsx(O.Item,{onClick:()=>{d(t)},icon:bs,children:e.jsx(i,n({},l.changeAccess))}),e.jsx(O.Item,{onClick:()=>{x(!0)},icon:L?vs:Ns,children:e.jsx(i,n({},L?l.assignOwner:l.changeOwner))}),e.jsx(O.Item,{onClick:()=>{y(!0)},icon:we,color:"danger",children:e.jsx(i,n({},l.deleteGPT))})]})})]})})]}),c&&e.jsx(xs,{publishedGizmo:c,gizmo:ns(c),onClose:()=>d(!1),appealGizmo:()=>w(Je(c.gizmo.id)),shareOnly:!0,workspaceOwner:!0}),e.jsx(Ps,{isOpen:T,gpt:t,account:s,onClose:N=>{x(!1),N&&r.invalidateQueries({queryKey:["workspace",s.id,f.WORKSPACE]})}}),e.jsx(Ss,{isOpen:h,gpt:t,account:s,onClose:N=>{y(!1),N&&r.invalidateQueries({queryKey:["workspace",s.id,f.WORKSPACE]})}}),e.jsx(Is,{isOpen:j,gpt:t,account:s,onClose:N=>{g(!1),N&&r.invalidateQueries({queryKey:["workspace",s.id,f.THIRD_PARTY]})}})]})}const Ls=[D.BROWSER,D.PYTHON,D.JIT_PLUGIN,D.RETRIEVAL,D.DALLE,D.IMAGE_GEN,D.CANVAS],Fs=({account:s,showThirdParty:t})=>{var he;const[a,r]=m.useState(f.WORKSPACE),u=U(),[c,d]=m.useState(!1),h=m.useRef(null),[y,T]=m.useState(""),[x,j]=m.useState(!1),[g,w]=m.useState(y),M=m.useRef(null),A=m.useCallback(o=>{if(T(o),M.current&&(clearTimeout(M.current),M.current=null),o===""){w(""),E(1);return}M.current=window.setTimeout(()=>{w(o),E(1),M.current=null},500)},[]),[I,L]=m.useState("updated_at"),[R,B]=m.useState("desc"),q=R==="asc"?Rs:Gs,Q=[{value:"private",label:u.formatMessage(l.shareRecipientTitlePrivate),share_recipients:[b.Private,b.User,b.Group]},{value:"link",label:u.formatMessage(l.shareRecipientTitleLink),share_recipients:[b.Link]},{value:"workspace",label:(he=s.data.name)!=null?he:"",share_recipients:[b.Workspace,b.WorkspaceLink]},{value:"marketplace",label:u.formatMessage(l.shareRecipientTitlePublic),share_recipients:[b.Marketplace]}],[H,N]=m.useState([]),[F,ue]=m.useState([]),[V,E]=m.useState(1),Ce=$();m.useEffect(()=>{x&&h.current&&h.current.focus()},[x]);const se=o=>{r(o),E(1)},Oe=(o,C)=>{N(W=>C?[...W,o]:W.filter(ae=>ae!==o)),E(1)},Ae=(o,C)=>{ue(W=>C?[...W,o]:W.filter(ae=>ae!==o)),E(1)},Re=()=>{N([]),ue([]),E(1)},{data:K,fetchNextPage:Ge,hasNextPage:pe,isFetchingNextPage:me,isLoading:Ie}=Ws(s.id,a,{search:g,toolTypes:H,shareRecipients:Q.flatMap(o=>F.includes(o.value)?o.share_recipients:[]),orderBy:I,orderDir:R}),Ee=Ie,ge=H.length+F.length;function te(o){L(C=>C===o?(B(W=>W==="asc"?"desc":"asc"),o):(B("asc"),o)),E(1)}const xe=m.useMemo(()=>{if(!K)return[];const o=K.pages[V-1];return o?o.items:[]},[K,V]);return e.jsxs("div",{children:[e.jsxs("div",{className:"border-token-border-default flex justify-between border-b",children:[e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsx(ne,{isActive:a===f.WORKSPACE,onClick:()=>se(f.WORKSPACE),children:e.jsx(i,n({},l.workspaceTab))}),t&&e.jsx(ne,{isActive:a===f.THIRD_PARTY,onClick:()=>se(f.THIRD_PARTY),children:e.jsx(i,n({},l.thirdPartyTab))}),e.jsx(ne,{isActive:a===f.UNASSIGNED,onClick:()=>se(f.UNASSIGNED),children:e.jsx(i,n({},l.unassigned))})]}),e.jsxs("div",{className:"flex items-center pb-2",children:[ge>0&&e.jsxs(je,{className:"flex items-center space-x-1",onClick:Re,children:[e.jsx("span",{className:"font-medium",children:e.jsx(i,{id:"2HkRen",defaultMessage:"{filterCount, plural, one {# filter} other {# filters}} applied",values:{filterCount:ge}})}),e.jsx(ke,{className:"icon"})]}),e.jsxs(O.Root,{children:[e.jsx(O.Trigger,{children:e.jsx(Cs,{className:"icon"})}),e.jsx(O.Portal,{children:e.jsx(O.Content,{className:"rounded-lg px-2 text-sm",children:e.jsxs("div",{className:"text-token-text-primary w-64 space-y-2 p-2 font-normal",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,n({},l.capabilitiesTitle))}),Ls.map(o=>e.jsx(oe,{id:o,checked:H.includes(o),label:as(s,o),onChange:C=>Oe(o,C.target.checked)},o))]}),e.jsxs("div",{className:"mt-4 flex-col space-y-2 border-t pt-4",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,n({},l.whoHasAccessTitle))}),Q.map(o=>e.jsx(oe,{id:o.value,checked:F.includes(o.value),label:o.label,onChange:C=>Ae(o.value,C.target.checked)},o.value))]})]})})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{onClick:()=>j(!0),children:e.jsx(Ms,{className:"icon"})}),e.jsx(He,{children:x&&e.jsx(Ve.input,{type:"text",ref:h,placeholder:u.formatMessage(l.filterByNameOrBuilderPlaceholder),className:"bg-token-bg-primary border-none px-0 focus:ring-0",initial:{width:0,opacity:0},animate:{width:"192px",opacity:1},exit:{width:0,opacity:0,visibility:"hidden"},value:y,onChange:o=>A(o.target.value)})}),x&&e.jsx("div",{className:"cursor-pointer",onClick:()=>{j(!1),A("")},children:e.jsx(ke,{className:"icon-sm"})})]}),t&&e.jsx(G,{color:"secondary",onClick:()=>d(!0),icon:_e,children:e.jsx(i,n({},l.approveAGPTButton))})]})]}),Ee?e.jsx("div",{className:"mt-8 flex min-h-[320px] items-center justify-center",children:e.jsx(ve,{})}):e.jsxs("div",{className:"mb-8 min-h-[320px]",children:[xe.length>0?e.jsxs(p.Root,{size:"normal",className:"bg-token-bg-primary w-full min-w-full overflow-hidden overflow-x-auto sm:rounded-lg",children:[e.jsxs(p.Header,{children:[e.jsx(p.HeaderCell,{className:"text-token-text-secondary py-2 pe-4 text-start text-xs",children:e.jsx(i,n({},l.nameCellTitle))}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(i,n({},l.builderCellTitle))}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(i,n({},l.customActionsCellTitle))}),(a===f.WORKSPACE||a===f.UNASSIGNED)&&e.jsx(p.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(i,n({},l.whoHasAccessTitle))}),(a===f.WORKSPACE||a===f.UNASSIGNED)&&e.jsx(p.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>te("accurate_num_paid_conversations"),children:[e.jsx("span",{children:e.jsx(i,n({},l.chatsCellTitle))}),I==="accurate_num_paid_conversations"&&e.jsx(q,{className:"icon-sm"})]})}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>te("created_at"),children:[e.jsx("span",{children:a===f.WORKSPACE||a===f.UNASSIGNED?e.jsx(i,n({},l.createdCellTitle)):e.jsx(i,n({},l.approvedCellTitle))}),I==="created_at"&&e.jsx(q,{className:"icon-sm"})]})}),e.jsx(p.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>te("updated_at"),children:[e.jsx("span",{children:e.jsx(i,n({},l.updatedCellTitle))}),I==="updated_at"&&e.jsx(q,{className:"icon-sm"})]})}),e.jsx(p.HeaderCell,{className:"border-token-border-heavy absolute end-0 w-16 border-s-[0.5px]"})]}),e.jsx(p.Body,{children:xe.map(o=>e.jsx(Ds,{account:s,gpt:o,thirdParty:a===f.THIRD_PARTY},o.gizmo.id))})]}):e.jsxs("div",{className:"flex h-full w-full flex-col items-center gap-4 py-16",children:[e.jsx("div",{children:e.jsx(As,{className:"h-12 w-12 text-gray-400"})}),e.jsx("p",{className:"text-token-text-secondary",children:a===f.THIRD_PARTY?e.jsx(i,n({},l.noWorkspaceApprovedGPTs)):a===f.UNASSIGNED?e.jsx(i,n({},l.noUnassignedGPTs)):e.jsx(i,n({},l.noWorkspaceGPTs))}),a===f.THIRD_PARTY&&e.jsx(G,{color:"secondary",onClick:()=>d(!0),icon:_e,children:e.jsx(i,n({},l.approveAGPTButton))})]}),K&&e.jsxs("div",{className:"text-token-text-tertiary my-4 flex w-full items-center justify-center gap-6",children:[e.jsx(G,{color:"secondary",disabled:V===1,onClick:()=>E(o=>Math.max(1,o-1)),children:e.jsx(i,{id:"KFhxP7",defaultMessage:"Prev"})}),e.jsx("span",{className:"text-sm",children:e.jsx(i,{id:"WEQoNb",defaultMessage:"Page {page}",values:{page:V}})}),e.jsx(G,{color:"secondary",loading:me,disabled:!pe&&V===K.pages.length,onClick:async()=>{if(V<K.pages.length){E(C=>C+1);return}pe&&!me&&(await Ge(),E(C=>C+1))},children:e.jsx(i,{id:"wDyvFZ",defaultMessage:"Next"})})]})]}),e.jsx(hs,{isOpen:c,onClose:()=>{d(!1),Ce.invalidateQueries({queryKey:["workspace",s.id,f.THIRD_PARTY]})},account:s})]})};function Ws(s,t,a){var r,u,c;return Ue({queryKey:["workspace",s,"admin-gizmos",t,(r=a.search)!=null?r:"",((u=a.toolTypes)!=null?u:[]).join(","),((c=a.shareRecipients)!=null?c:[]).join(","),a.orderBy,a.orderDir],queryFn:async({pageParam:d})=>{var x,j,g,w,M,A;const{query_continuation:h}=d!=null?d:{},y=n(n({search:(x=a.search)!=null?x:"",limit:Es,order_by:(j=a.orderBy)!=null?j:"updated_at",order_dir:(g=a.orderDir)!=null?g:"desc",share_recipients:(w=a.shareRecipients)!=null?w:[],is_approved:t===f.THIRD_PARTY,is_unassigned:t===f.UNASSIGNED},a.toolTypes&&a.toolTypes.length>0?{tool_types:a.toolTypes}:{}),h?{query_continuation:h}:{}),T=await Y.safeGet("/workspace-resources/{account_id}/admin/gizmos",{parameters:{path:{account_id:s},query:y}});return{total:(M=T.total_count)!=null?M:0,items:T.items,query_continuation:(A=T.query_continuation)!=null?A:null}},initialPageParam:{query_continuation:""},getNextPageParam:d=>d.query_continuation?{query_continuation:d.query_continuation}:void 0})}function zs({gizmo:s,account:t}){const a=U(),r={[b.Private]:a.formatMessage(l.shareRecipientTitlePrivate),[b.User]:a.formatMessage(l.shareRecipientTitlePrivate),[b.Group]:a.formatMessage(l.shareRecipientTitlePrivate),[b.Link]:a.formatMessage(l.shareRecipientTitleLink),[b.Marketplace]:a.formatMessage(l.shareRecipientTitlePublic),[b.Workspace]:t.data.name,[b.WorkspaceLink]:t.data.name};if(["private","user","group"].includes(s.gizmo.sharing.recipient)){const{users:u,groups:c}=Us(s);return u===0&&c===0?e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(i,n({},l.shareRecipientTitlePrivate))}):u>0&&c>0?e.jsxs("span",{className:"text-token-text-secondary",children:[r[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,{id:"fQ+tJG",defaultMessage:"Shared with {users} and {groups}",values:{users:a.formatMessage(l.userCount,{numUsers:u}),groups:a.formatMessage(l.groupCount,{numGroups:c})}})]}):u>0?e.jsxs("span",{className:"text-token-text-secondary",children:[r[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,J(n({},l.userCount),{values:{numUsers:u}}))]}):e.jsxs("span",{className:"text-token-text-secondary",children:[r[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,J(n({},l.groupCount),{values:{numGroups:c}}))]})}return e.jsx("span",{children:r[s.gizmo.share_recipient]})}function Us(s){if(s.gizmo.sharing.subjects){const t=s.gizmo.sharing.subjects.filter(r=>r.type===ye.USER).length,a=s.gizmo.sharing.subjects.filter(r=>r.type===ye.GROUP).length;return{users:t,groups:a}}return{users:0,groups:0}}const l=ee({stillLoadingData:{id:"workspaceSettings.stillLoadingData",defaultMessage:"Don't see what you're looking for? Some GPTs are still loading..."},noUnassignedGPTs:{id:"workspaceSettings.noUnassignedGPTs",defaultMessage:"No unassigned GPTs"},noUnassignedGPTsFound:{id:"workspaceSettings.noUnassignedGPTsFound",defaultMessage:"No unassigned GPTs found"},noWorkspaceGPTs:{id:"workspaceSettings.noWorkspaceGPTs",defaultMessage:"This workspace does not have any GPTs"},noWorkspaceGPTsFound:{id:"workspaceSettings.noWorkspaceGPTsFound",defaultMessage:"No workspace GPTs found"},noWorkspaceApprovedGPTs:{id:"workspaceSettings.noWorkspaceApprovedGPTs",defaultMessage:"You haven't approved any third-party GPTs"},noWorkspaceApprovedGPTsFound:{id:"workspaceSettings.noWorkspaceApprovedGPTsFound",defaultMessage:"No approved third-party GPTs found"},workspaceTab:{id:"workspaceSettings.workspaceTab",defaultMessage:"Workspace"},thirdPartyTab:{id:"workspaceSettings.thirdPartyTab",defaultMessage:"Third-party"},capabilitiesTitle:{id:"workspaceSettings.capabilitiesTitle",defaultMessage:"Capabilities"},whoHasAccessTitle:{id:"workspaceSettings.whoHasAccessTitle",defaultMessage:"Who has access"},filterByNameOrBuilderPlaceholder:{id:"workspaceSettings.filterByNameOrBuilderPlaceholder",defaultMessage:"Filter by name or builder..."},nameCellTitle:{id:"workspaceSettings.nameCellTitle",defaultMessage:"Name"},builderCellTitle:{id:"workspaceSettings.builderCellTitle",defaultMessage:"Builder"},customActionsCellTitle:{id:"workspaceSettings.customActionsCellTitle",defaultMessage:"Custom Actions"},chatsCellTitle:{id:"workspaceSettings.chatsCellTitle",defaultMessage:"Chats"},createdCellTitle:{id:"workspaceSettings.createdCellTitle",defaultMessage:"Created"},updatedCellTitle:{id:"workspaceSettings.updatedCellTitle",defaultMessage:"Updated"},approvedCellTitle:{id:"workspaceSettings.approvedCellTitle",defaultMessage:"Approved"},approveAGPTButton:{id:"workspaceSettings.approveAGPTButton",defaultMessage:"Approve a GPT"},shareRecipientTitlePrivate:{id:"vyjlzc",defaultMessage:"Invite only"},shareRecipientTitleLink:{id:"workspaceSettings.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettings.shareRecipientTitlePublic",defaultMessage:"Public"},changeAccess:{id:"workspaceSettings.changeAccess",defaultMessage:"Change who has access"},changeOwner:{id:"workspaceSettings.changeOwner",defaultMessage:"Change Owner"},assignOwner:{id:"workspaceSettings.assignOwner",defaultMessage:"Assign Owner"},deleteGPT:{id:"workspaceSettings.deleteGPT",defaultMessage:"Delete GPT"},removeFromWorkspace:{id:"workspaceSettings.removeFromWorkspace",defaultMessage:"Remove from workspace"},userCount:{id:"P1xo2B",defaultMessage:"{numUsers, plural, one {# user} other {# users}}"},groupCount:{id:"4zRUED",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},unassigned:{id:"workspaceSettings.unassignedGPTs",defaultMessage:"Unassigned"}});function re({title:s,description:t,children:a,upsellEnterprise:r=!1,isQuorum:u=!1,className:c=""}){return e.jsx(be,{label:e.jsx(i,n({},_.enterpriseRequiredMessage)),side:"top",disabled:!r,className:"max-w-5xl",triggerAs:null,children:e.jsxs(ds,{className:de(r&&"text-token-text-tertiary","max-w-4xl",c),children:[e.jsxs(cs,{className:"flex items-center gap-3",children:[e.jsx(i,n({},s)),r&&e.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-2 pb-0.5 text-sm",children:e.jsx(i,n({},_.enterpriseUpsellPill))}),!r&&u&&e.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-3 ps-3 pt-1 pb-1 text-sm font-normal",children:e.jsx(i,n({},_.thisFeatureDisabledForOrg))})]}),t&&e.jsx(us,{className:"text-token-text-secondary py-2",children:e.jsx(i,n({},t))}),a]})})}function Bs({workspaceId:s,label:t,setting:a,defaultValue:r,values:u,disabled:c=!1}){var x;const d=ce(),h=$(),{variables:y,mutate:T}=le({mutationFn:({setting:j,value:g})=>Y.safePost("/accounts/{account_id}/settings/share_settings",{parameters:{path:{account_id:s}},requestBody:{setting:j,value:g}}),onSettled:()=>{h.invalidateQueries({queryKey:["workspace-settings"]}),h.invalidateQueries({queryKey:["workspace"]})},onError:()=>{d.danger(_.featureSettingsUpdateFailed,{toastId:"workspace_gpt_settings_page"})}});return e.jsxs(ps,{children:[e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(i,n({},t))}),e.jsxs(k.Root,{defaultValue:(x=y==null?void 0:y.value)!=null?x:r,onValueChange:j=>{T({setting:a,value:j})},disabled:c,children:[e.jsxs(k.Trigger,{className:"text-md focus-visible:border-none",children:[e.jsx(k.Value,{}),e.jsx(k.Icon,{})]}),e.jsx(k.Portal,{children:e.jsx(k.Content,{children:u.map((j,g)=>e.jsx(k.Item,{className:"text-md",value:j.value,children:e.jsx(i,n({},j.display))},g))})})]})]})}function qs({workspaceId:s,value:t,upsellEnterprise:a=!1,isQuorum:r=!1}){var y;const u=ce(),c=$(),{variables:d,mutate:h}=le({mutationFn:({value:T})=>Y.safePost("/accounts/{account_id}/settings/third_party_gpts",{parameters:{path:{account_id:s}},requestBody:{value:T}}),onSettled:()=>{c.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{u.danger(_.featureSettingsUpdateFailed,{toastId:"third_party_gpt_setting_dropdown"})}});return e.jsxs(k.Root,{defaultValue:(y=d==null?void 0:d.value)!=null?y:t,onValueChange:T=>{h({value:T})},children:[e.jsxs(k.Trigger,{className:"border-token-border-default focus-visible:border-token-border-default border text-base",children:[e.jsx(k.Value,{}),e.jsx(k.Icon,{})]}),e.jsx(k.Portal,{children:e.jsxs(k.Content,{children:[!r&&e.jsx(k.Item,{className:"text-base",value:X.ALLOW_ALL,children:e.jsx(i,n({},_.allowAllOption))}),!a&&!r&&e.jsx(k.Item,{className:"text-base",value:X.ALLOW_SPECIFIC,children:e.jsx(i,n({},_.ownerApprovedOnlyOption))}),e.jsx(k.Item,{className:"text-base",value:X.ALLOW_NONE,children:e.jsx(i,n({},_.dontAllowOption))})]})})]})}function Hs({workspaceId:s,data:t}){var L;const a=Me(),r=U(),u=ce(),c=Ze(),d=Xe(),h=d,y=$(),T=es(a),[x,j]=m.useState([]),g=le({mutationFn:({value:R})=>Y.safePost("/accounts/{account_id}/settings/allowed_custom_actions_domains",{parameters:{path:{account_id:s}},requestBody:{domains:R}}),onSettled:()=>{y.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{u.danger(_.featureSettingsUpdateFailed,{toastId:"workspace_settings"})}});if(c==null)return null;const w=c.isSelfServeBusiness(),M=e.jsx(re,{title:_.thirdPartyGPTsTitle,description:_.thirdPartyGPTsDescription,className:"border-token-border-default border-b pb-4",isQuorum:d,children:e.jsx("div",{children:e.jsx(qs,{workspaceId:s,value:t.allow_third_party_gpts,upsellEnterprise:w,isQuorum:d})})}),A=e.jsx(re,{title:_.sidebarTitle,children:e.jsx(Fs,{account:c,showThirdParty:!w&&!d&&t.allow_third_party_gpts===X.ALLOW_SPECIFIC})}),I=t.allowed_custom_actions_domains!=null||t.beta_settings.workspace_gpt_custom_actions===!1;return e.jsxs(os,{className:"max-w-5xl",children:[w&&!T&&M,w&&c.isOwnerOfAccount()&&A,e.jsx(re,{title:_.sharingSettingsTitle,upsellEnterprise:w,children:e.jsxs(ls,{children:[!T&&e.jsx(Bs,{workspaceId:s,label:_.gptSharingTitle,disabled:w,setting:ss.GPT_SHARE_SETTINGS,defaultValue:t.share_settings.gpt_share_setting,values:[...h?[]:[{display:_.anyOneSelect,value:ie.ANYONE}],{display:_.workspaceMembersOnlySelect,value:ie.WORKSPACE_ONLY},{display:_.inviteOnlySelect,value:ie.NO_ONE}]}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 py-6",children:[e.jsx("div",{className:"text-xl font-semibold",children:e.jsx(i,{id:"ugI3Yt",defaultMessage:"GPT actions"})}),e.jsx("div",{className:"text-token-text-secondary py-2 text-sm",children:h?e.jsx(i,{id:"ZIYUEj",defaultMessage:"GPT actions allow GPT builders to create GPTs that call third-party APIs for tasks such as retrieving or modifying data, which could include protected health information. Admins can limit the domains that can be used by GPTs created by builders in your workspace. You should ensure your use of GPT actions complies with your obligations under HIPAA."}):e.jsx(i,{id:"HY2eof",defaultMessage:"GPT actions allow GPTs to call third-party APIs for tasks such as retrieving or modifying data. GPT actions are defined by GPT builders, and you can limit the domains that can be used for GPTs created in your workspace."})}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(oe,{checked:!I,id:"allow-all-domains",onChange:R=>{R.currentTarget.checked?(j(t.allowed_custom_actions_domains),g.mutate({value:null})):g.mutate({value:x!=null?x:[]})},label:e.jsxs("span",{className:"flex flex-row items-center",children:[e.jsx(i,{id:"WnWoqJ",defaultMessage:"Allow all domains for GPT actions"}),e.jsx(be,{interactive:!0,label:e.jsx(i,{id:"KjJtEm",defaultMessage:"Limit the Internet domains that can be used by GPTs created in your workspace. This does not apply to third-party GPTs."}),side:"top",children:e.jsx(ks,{})})]})}),g.isPending&&e.jsx(ve,{})]}),I&&e.jsx(ws,{value:(L=t.allowed_custom_actions_domains)!=null?L:[],title:r.formatMessage({id:"YetDcq",defaultMessage:"Domains"}),onChange:R=>{g.mutate({value:R})},emptyMessage:r.formatMessage({id:"rFH4IP",defaultMessage:"No domains added. No GPT actions will be allowed."})})]})})]})}),!w&&!T&&M,!w&&c.isOwnerOfAccount()&&A]})}function Vs({currentWorkspaceId:s}){const{data:t,isLoading:a}=$e(s),r=U();return e.jsxs(e.Fragment,{children:[e.jsx(rs,{children:e.jsx("title",{children:r.formatMessage(_.sidebarTitle)})}),e.jsx(ms,{title:r.formatMessage(_.sidebarTitle)}),e.jsx(gs,{showSpinner:a,children:t===void 0?null:e.jsx(Hs,{workspaceId:s,data:t})})]})}const _=ee({sidebarTitle:{id:"workspaceSettingsOld.sidebarTitle",defaultMessage:"GPTs"},allowAllOption:{id:"workspaceSettingsOld.allowAllOption",defaultMessage:"Allow all"},ownerApprovedOnlyOption:{id:"workspaceSettingsOld.ownerApprovedOnlyOption",defaultMessage:"Owner-approved only"},dontAllowOption:{id:"workspaceSettingsOld.dontAllowOption",defaultMessage:"Don't allow"},retentionPolicyTitle:{id:"workspaceSettingsOld.retentionPolicyTitle",defaultMessage:"Retention policy"},thirdPartyGPTsTitle:{id:"workspaceSettingsOld.thirdPartyGPTsTitle",defaultMessage:"Third-party"},thirdPartyGPTsDescription:{id:"workspaceSettingsOld.thirdPartyGPTsDescription",defaultMessage:"Manage whether members can use GPTs created outside your workspace."},searchTooltip:{id:"workspaceSettingsOld.searchTooltip",defaultMessage:"Web search allows ChatGPT and GPTs to answer questions on recent topics. When enabled, it may send search queries and general location information to Bing, but this data is not linked to or associated with user accounts."},sharingSettingsTitle:{id:"workspaceSettingsOld.sharingSettingsTitle",defaultMessage:"Sharing"},gptSharingTitle:{id:"workspaceSettingsOld.gptSharingTitle",defaultMessage:"GPTs can be shared with..."},workspaceMembersOnlySelect:{id:"workspaceSettingsOld.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},anyOneSelect:{id:"workspaceSettingsOld.anyOneSelect",defaultMessage:"Anyone"},inviteOnlySelect:{id:"workspaceSettingsOld.inviteOnlySelect",defaultMessage:"Invite only"},featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"},conversationRetention:{id:"workspaceSettingsOld.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettingsOld.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettingsOld.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettingsOld.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettingsOld.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettingsOld.retentionChange",defaultMessage:"Contact your account manager to change this setting."},enterpriseUpsellPill:{id:"workspaceSettingsOld.enterpriseUpsellPill",defaultMessage:"Enterprise"},retentionSettingTooltip:{id:"workspaceSettingsOld.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},enterpriseRequiredMessage:{id:"workspaceSettingsOld.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},shareRecipientTitlePrivate:{id:"workspaceSettingsOld.shareRecipientTitlePrivate",defaultMessage:"Private"},shareRecipientTitleLink:{id:"workspaceSettingsOld.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettingsOld.shareRecipientTitlePublic",defaultMessage:"Public"},thisFeatureDisabledForOrg:{id:"workspaceSettings.thisFeatureDisabledForOrgGPT",defaultMessage:"This feature is disabled in this workspace"}}),wt=qe(function(){const t=fs();return Ts(),e.jsx(Vs,n({},t))});export{wt as default};
//# sourceMappingURL=n4fmfw1g5cqijjm2.js.map
