const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kw08ajijqinojrwh.js","assets/kfrdmkli83ureki3.js","assets/root-fi49nzd2.css"])))=>i.map(i=>d[i]);
var he=Object.defineProperty,xe=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var le=(c,t,e)=>t in c?he(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e,se=(c,t)=>{for(var e in t||(t={}))pe.call(t,e)&&le(c,e,t[e]);if(te)for(var e of te(t))ge.call(t,e)&&le(c,e,t[e]);return c},re=(c,t)=>xe(c,ve(t));import{r as b,j as r,c as D,_ as be,h as we}from"./kfrdmkli83ureki3.js";import{pQ as Z,dR as ee,cy as ye,e9 as G,pR as je,pS as Se,az as _e,ej as ke,db as J,aA as Ee}from"./kw08ajijqinojrwh.js";import{g as Re}from"./et0kjfzq519mr3zi.js";import{b0 as O,df as Ne,fS as Te}from"./fyw02vlaiv2vq6cj.js";const ne=1.2,oe=.95,Le=80,ze=56,ie=.34,ae=b.memo(function({img:t,size:e,active:n,onClick:o,axis:s,index:l,indexMv:u}){var N,i;const f=b.useCallback(d=>{const x=Math.abs(d-l);return x<1?ne-(ne-oe)*x:oe},[l]),w=b.useCallback(d=>{const x=Math.abs(d-l);return x<1?1-(1-ie)*x:ie},[l]),h=Z(u,f),j=Z(u,w);return r.jsx(ee.button,{"aria-selected":n,role:"option",onClick:o,style:{height:e,width:e,scale:h,opacity:j},className:ye("border-thin focus-visible:ring-ring overflow-hidden rounded-lg border-black/10 bg-gray-200 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-none dark:border-white/10",s==="vertical"?"mx-auto mb-2 block":"flex-shrink-0"),children:r.jsx("img",{src:(N=t.thumbnail)!=null?N:t.url,alt:(i=t.title)!=null?i:"",loading:"lazy",decoding:"async",className:"h-full w-full rounded-lg object-cover"})})});function ce(c){"use forget";const t=D.c(51),{axis:e,itemSize:n,gap:o,imagesLen:s,index:l,setIndex:u,externalSyncRef:f,wheelHostRef:w}=c,h=b.useRef(null),[j,N]=b.useState(0),i=n+o,d=i*(s-1);let x;t[0]!==e||t[1]!==l||t[2]!==i||t[3]!==d?(x=()=>{const m=h.current;if(!m)return;const a=Math.round(l*i);e==="vertical"?m.scrollTop=O(a,0,d):m.scrollLeft=O(a,0,d)},t[0]=e,t[1]=l,t[2]=i,t[3]=d,t[4]=x):x=t[4];let y;t[5]===Symbol.for("react.memo_cache_sentinel")?(y=[],t[5]=y):y=t[5],G(x,y);let E,S;t[6]!==e||t[7]!==i?(E=()=>{const m=()=>{const L=e==="vertical"?window.innerHeight-ze:window.innerWidth,M=Math.max(1,Math.floor(L/i)),A=M%2===0?M-1:M,I=e==="vertical"?Le:0;N(A*i-I)};m();let a=null;return typeof ResizeObserver<"u"&&(a=new ResizeObserver(()=>m()),a.observe(document.documentElement)),()=>{a&&a.disconnect()}},S=[e,i],t[6]=e,t[7]=i,t[8]=E,t[9]=S):(E=t[8],S=t[9]),G(E,S);let _;t[10]===Symbol.for("react.memo_cache_sentinel")?(_={container:h},t[10]=_):_=t[10];const{scrollX:z,scrollY:v}=je(_),k=e==="vertical"?v:z;let T;t[11]!==i?(T=m=>m/i,t[11]=i,t[12]=T):T=t[12];const p=Z(k,T);let g;t[13]!==s||t[14]!==l||t[15]!==i||t[16]!==u?(g=m=>{const a=Math.round(m/i);a!==l&&a>=0&&a<s&&u(a)},t[13]=s,t[14]=l,t[15]=i,t[16]=u,t[17]=g):g=t[17],Se(k,"change",g);let C;t[18]!==e||t[19]!==i||t[20]!==d?(C=(m,a)=>{const L=a===void 0?!1:a,M=h.current;if(!M)return;const A=Math.round(m*i),I=e==="vertical"?{top:O(A,0,d)}:{left:O(A,0,d)};L?M.scrollTo(re(se({},I),{behavior:"smooth"})):e==="vertical"?M.scrollTop=I.top:M.scrollLeft=I.left},t[18]=e,t[19]=i,t[20]=d,t[21]=C):C=t[21];const R=C,H=b.useRef(null);let F;t[22]!==s||t[23]!==R||t[24]!==u?(F=m=>{H.current||(H.current=requestAnimationFrame(()=>{u(a=>{const L=O(a+m,0,s-1);return L!==a&&R(L),L}),H.current=null}))},t[22]=s,t[23]=R,t[24]=u,t[25]=F):F=t[25];const Q=F;let Y;t[26]!==e||t[27]!==Q||t[28]!==s||t[29]!==l||t[30]!==R?(Y=m=>{if(e!=="vertical")return;const a=m.key==="ArrowUp"?-1:m.key==="ArrowDown"?1:0;if(a){if(m.repeat)Q(a);else{const L=O(l+a,0,s-1);R(L,!0)}m.preventDefault()}},t[26]=e,t[27]=Q,t[28]=s,t[29]=l,t[30]=R,t[31]=Y):Y=t[31];const V=Y;let $,P;t[32]!==e||t[33]!==V?($=()=>{if(e==="vertical")return document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)},P=[e,V],t[32]=e,t[33]=V,t[34]=$,t[35]=P):($=t[34],P=t[35]),b.useEffect($,P);let K,W;t[36]!==e||t[37]!==d||t[38]!==w?(K=()=>{if(!(w!=null&&w.current)||e!=="vertical")return;const m=w.current,a=h.current;if(!a)return;const L=M=>{M.preventDefault();let A=a.scrollTop+M.deltaY;const I=a.scrollTop<=0&&M.deltaY<0,me=a.scrollTop>=d&&M.deltaY>0;(I||me)&&(A=a.scrollTop+M.deltaY*.2),A=O(A,0,d),A!==a.scrollTop&&(a.scrollTop=A)};return m.addEventListener("wheel",L,{passive:!1}),()=>m.removeEventListener("wheel",L)},W=[e,w,d],t[36]=e,t[37]=d,t[38]=w,t[39]=K,t[40]=W):(K=t[39],W=t[40]),b.useEffect(K,W);let B,U;t[41]!==f||t[42]!==s||t[43]!==l||t[44]!==u?(B=()=>{if(!(f!=null&&f.current))return;const m=f.current,a=()=>{const L=Math.round(m.scrollLeft/m.clientWidth);L!==l&&L>=0&&L<s&&u(L)};return m.addEventListener("scroll",a,{passive:!0}),()=>m.removeEventListener("scroll",a)},U=[f,s,l,u],t[41]=f,t[42]=s,t[43]=l,t[44]=u,t[45]=B,t[46]=U):(B=t[45],U=t[46]),b.useEffect(B,U);let q;return t[47]!==p||t[48]!==j||t[49]!==R?(q={railRef:h,railHeight:j,indexMv:p,scrollToIndex:R},t[47]=p,t[48]=j,t[49]=R,t[50]=q):q=t[50],q}const Ce=b.memo(function(t){"use forget";const e=D.c(34),{images:n,index:o,setIndex:s,wheelHostRef:l}=t;let u;e[0]!==n.length||e[1]!==o||e[2]!==s||e[3]!==l?(u={axis:"vertical",itemSize:46,gap:8,imagesLen:n.length,index:o,setIndex:s,wheelHostRef:l},e[0]=n.length,e[1]=o,e[2]=s,e[3]=l,e[4]=u):u=e[4];const{railRef:f,railHeight:w,indexMv:h,scrollToIndex:j}=ce(u);let N;e[5]!==j||e[6]!==s?(N=p=>{s(p),j(p)},e[5]=j,e[6]=s,e[7]=N):N=e[7];const i=N;let d;if(e[8]!==i||e[9]!==n){let p;e[11]!==i?(p=(g,C)=>()=>i(C),e[11]=i,e[12]=p):p=e[12],d=n.map(p),e[8]=i,e[9]=n,e[10]=d}else d=e[10];const x=d;let y;e[13]!==w?(y={height:w,contain:"layout size style"},e[13]=w,e[14]=y):y=e[14];let E;e[15]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{style:{height:"calc(50% - 23px)"}}),e[15]=E):E=e[15];let S;if(e[16]!==x||e[17]!==n||e[18]!==o||e[19]!==h){let p;e[21]!==x||e[22]!==o||e[23]!==h?(p=(g,C)=>{var R;return r.jsx(ae,{img:g,size:46,active:C===o,onClick:x[C],axis:"vertical",index:C,indexMv:h},(R=g.id)!=null?R:g.url)},e[21]=x,e[22]=o,e[23]=h,e[24]=p):p=e[24],S=n.map(p),e[16]=x,e[17]=n,e[18]=o,e[19]=h,e[20]=S}else S=e[20];let _;e[25]===Symbol.for("react.memo_cache_sentinel")?(_=r.jsx("div",{style:{height:"calc(50% - 23px)"}}),e[25]=_):_=e[25];let z;e[26]!==f||e[27]!==y||e[28]!==S?(z=r.jsxs(ee.div,{ref:f,style:y,className:"no-scrollbar overflow-y-scroll",children:[E,S,_]}),e[26]=f,e[27]=y,e[28]=S,e[29]=z):z=e[29];let v,k;e[30]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 h-16 bg-gradient-to-b from-white via-white/90 to-transparent dark:from-[#212121] dark:via-[#212121]/60 dark:to-transparent"}),v=r.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 z-10 h-16 bg-gradient-to-t from-white via-white/90 to-transparent dark:from-[#212121] dark:via-[#212121]/60 dark:to-transparent"}),e[30]=v,e[31]=k):(v=e[30],k=e[31]);let T;return e[32]!==z?(T=r.jsxs("div",{className:"relative mt-4 w-24 self-start",role:"listbox","aria-orientation":"vertical",children:[z,k,v]}),e[32]=z,e[33]=T):T=e[33],T}),Me=b.memo(function(t){"use forget";const e=D.c(37),{images:n,index:o,setIndex:s,carouselRef:l}=t;let u;e[0]!==l||e[1]!==n.length||e[2]!==o||e[3]!==s?(u={axis:"horizontal",itemSize:32,gap:6,imagesLen:n.length,index:o,setIndex:s,externalSyncRef:l},e[0]=l,e[1]=n.length,e[2]=o,e[3]=s,e[4]=u):u=e[4];const{railRef:f,indexMv:w,scrollToIndex:h}=ce(u);let j,N;e[5]!==o||e[6]!==h?(j=()=>{h(o)},N=[o,h],e[5]=o,e[6]=h,e[7]=j,e[8]=N):(j=e[7],N=e[8]),G(j,N);let i;e[9]!==l||e[10]!==h||e[11]!==s?(i=g=>{s(g),h(g),l.current&&l.current.scrollTo({behavior:"instant",left:l.current.clientWidth*g})},e[9]=l,e[10]=h,e[11]=s,e[12]=i):i=e[12];const d=i;let x;if(e[13]!==d||e[14]!==n){let g;e[16]!==d?(g=(C,R)=>()=>d(R),e[16]=d,e[17]=g):g=e[17],x=n.map(g),e[13]=d,e[14]=n,e[15]=x}else x=e[15];const y=x;let E,S;e[18]===Symbol.for("react.memo_cache_sentinel")?(E={contain:"layout size style",contentVisibility:"auto"},S=r.jsx("div",{style:{width:"max(calc(50% - 32px + 6px), 0px)",flexShrink:0}}),e[18]=E,e[19]=S):(E=e[18],S=e[19]);let _;if(e[20]!==y||e[21]!==n||e[22]!==o||e[23]!==w){let g;e[25]!==y||e[26]!==o||e[27]!==w?(g=(C,R)=>{var H;return r.jsx(ae,{img:C,size:32,active:R===o,onClick:y[R],axis:"horizontal",index:R,indexMv:w},(H=C.id)!=null?H:C.url)},e[25]=y,e[26]=o,e[27]=w,e[28]=g):g=e[28],_=n.map(g),e[20]=y,e[21]=n,e[22]=o,e[23]=w,e[24]=_}else _=e[24];let z;e[29]===Symbol.for("react.memo_cache_sentinel")?(z=r.jsx("div",{style:{width:"max(calc(50% - 32px + 6px), 0px)",flexShrink:0}}),e[29]=z):z=e[29];let v;e[30]!==f||e[31]!==_?(v=r.jsxs(ee.div,{ref:f,className:"flex flex-1 gap-1.5 overflow-x-hidden px-4 py-2",style:E,children:[S,_,z]}),e[30]=f,e[31]=_,e[32]=v):v=e[32];let k,T;e[33]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("div",{className:"pointer-events-none absolute inset-y-0 start-0 z-10 w-8 bg-gradient-to-r from-white via-white/90 to-transparent dark:from-[#212121] dark:via-[#212121]/60 dark:to-transparent"}),T=r.jsx("div",{className:"pointer-events-none absolute inset-y-0 end-0 z-10 w-8 bg-gradient-to-l from-white via-white/90 to-transparent dark:from-[#212121] dark:via-[#212121]/60 dark:to-transparent"}),e[33]=k,e[34]=T):(k=e[33],T=e[34]);let p;return e[35]!==v?(p=r.jsxs("div",{className:"relative flex min-h-[48px] w-full overflow-hidden",role:"listbox","aria-orientation":"horizontal",children:[v,k,T]}),e[35]=v,e[36]=p):p=e[36],p}),Ae=_e(()=>be(()=>import("./kw08ajijqinojrwh.js").then(c=>c.yt),__vite__mapDeps([0,1,2])),{loading:c=>Ee(c)}),X=b.createContext({activeImage:void 0,index:0});function Ie({images:c,initialIndex:t=0,onClose:e,onIndexChange:n,children:o,inpaintingProps:s}){var S,_,z;const[l,u]=b.useState(t),f=c[l];b.useEffect(()=>{n==null||n(l)},[l,n]);const w=we(),h=ke()===!1,j=b.useRef(null),{footerSlot:N,headerActionsSlot:i}=Re(o,{footerSlot:de,headerActionsSlot:ue}),d=b.useRef(null),x=c.length>1,y=b.useCallback(v=>{v.key==="Escape"&&(e(),v.preventDefault())},[e]);b.useEffect(()=>(document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}),[y]),G(()=>{var k;if(!h||!j.current)return;const v=(k=j.current)==null?void 0:k.querySelector('[data-position="'.concat(l,'"]'));v&&j.current.scrollTo({behavior:"instant",left:v.offsetLeft})},[h]);const E=s&&(s==null?void 0:s.mode)==="inpaint";return r.jsx(X.Provider,{value:{activeImage:f,index:l},children:r.jsx(J.Root,{isOpen:!0,onClose:e,testId:"modal-lightbox-new",shouldIgnoreClickOutside:E,children:r.jsx(J.Overlay,{children:r.jsxs(J.Content,{size:"fullscreen",removePopoverStyling:!0,className:"grid min-h-0 grid-rows-[auto_minmax(0,1fr)] overflow-hidden",children:[r.jsxs(fe,{children:[r.jsxs("div",{className:"grid w-full grid-cols-[auto_1fr] items-start justify-between gap-1 md:gap-2",children:[r.jsx(Ne,{icon:Ae,onClick:e,"aria-label":w.formatMessage({id:"EYLKSm",defaultMessage:"Close"})}),(f==null?void 0:f.title)&&r.jsx("h2",{className:"line-clamp-1 self-center text-base font-medium md:line-clamp-none",children:f.title})]}),i]}),h?r.jsxs("div",{className:"grid h-full min-h-0 w-full grid-rows-[minmax(0,1fr)_auto] overflow-hidden",children:[r.jsx("ol",{ref:j,className:"no-scrollbar flex h-full snap-x snap-mandatory overflow-x-auto scroll-smooth",children:c.map((v,k)=>{var T,p;return r.jsx("li",{"data-position":k,className:"flex w-full flex-shrink-0 snap-start snap-always items-center justify-center px-4",children:r.jsx("img",{src:v.url,alt:(T=v.title)!=null?T:"",className:"max-h-full max-w-full rounded object-contain",fetchPriority:k===l?"high":"auto",loading:k===l?"eager":"lazy",decoding:"async"})},(p=v.id)!=null?p:v.url)})}),r.jsxs("div",{className:"no-scrollbar flex flex-col gap-2 overflow-hidden py-4",children:[x&&r.jsx(Me,{images:c,index:l,setIndex:u,carouselRef:j}),r.jsx("div",{className:"px-4",children:N})]})]}):r.jsxs("div",{ref:d,className:"grid h-full w-full grid-cols-[1fr_auto] items-center overflow-y-auto overscroll-contain",children:[r.jsxs("div",{className:"grid h-full min-h-0 w-full grid-rows-[minmax(0,1fr)_auto] justify-items-center px-4 pb-9",children:[f&&r.jsxs("div",{className:"relative mt-12 mb-12 flex items-center justify-center rounded bg-neutral-100",children:[r.jsx("img",{src:f.url,alt:(S=f.title)!=null?S:"",className:"h-full max-h-full w-auto max-w-full rounded object-contain",fetchPriority:"high",loading:"eager",decoding:"async"},(_=f.id)!=null?_:f.url),E&&r.jsx(Te,{image:f,drawingState:s.drawingState,drawingCanvasRef:s.drawingCanvasRef})]},(z=f.id)!=null?z:f.url),N]}),!E&&x?r.jsx(Ce,{images:c,index:l,setIndex:u,wheelHostRef:d}):r.jsx("div",{className:"h-full w-24"})]})]})})})})}function fe(c){"use forget";const t=D.c(2),{children:e}=c;let n;return t[0]!==e?(n=r.jsx("header",{className:"grid w-full grid-cols-[auto_1fr] gap-1 p-2",children:e}),t[0]=e,t[1]=n):n=t[1],n}function de(c){"use forget";const t=D.c(5),{children:e}=c,{activeImage:n}=b.useContext(X);let o;t[0]!==n||t[1]!==e?(o=typeof e=="function"?e({activeImage:n}):e,t[0]=n,t[1]=e,t[2]=o):o=t[2];const s=o;let l;return t[3]!==s?(l=r.jsx("footer",{className:"pointer-events-auto w-full max-w-[768px]",children:s}),t[3]=s,t[4]=l):l=t[4],l}function ue(c){"use forget";const t=D.c(5),{children:e}=c,{activeImage:n}=b.useContext(X);let o;if(t[0]!==n||t[1]!==e){const l=typeof e=="function"?e({activeImage:n}):e;o=[],b.Children.forEach(l,u=>{b.isValidElement(u)&&o.push(u)}),t[0]=n,t[1]=e,t[2]=o}else o=t[2];let s;return t[3]!==o?(s=r.jsx("div",{className:"flex items-baseline justify-end gap-2",children:o.map(Oe)}),t[3]=o,t[4]=s):s=t[4],s}function Oe(c,t){return r.jsx(b.Fragment,{children:c},t)}const $e={Root:Ie,Header:fe,Footer:de,LightboxHeaderActions:ue,Context:X};export{de as Footer,fe as Header,ue as LightboxHeaderActions,$e as LightboxNew,Ie as Root};
//# sourceMappingURL=kcrfstn8nf4rn51p.js.map
