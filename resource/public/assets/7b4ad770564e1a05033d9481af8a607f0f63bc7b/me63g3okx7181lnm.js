import{r,y as j,ad as O,d as _,a9 as y,u as R,j as n}from"./kfrdmkli83ureki3.js";import{J as T,a as z,pI as I,H as M,pJ as E,u as G,gx as H,aZ as N,hX as h,hY as v,eV as b,nE as A,n as F,nC as L,nV as Q,nD as k,m4 as Y,fK as D}from"./kw08ajijqinojrwh.js";import{C as J}from"./ckililxopth81755.js";import{r as K,a as U}from"./fyw02vlaiv2vq6cj.js";import"./mj0406dyy526560j.js";import"./n25jb1xrdrimv99m.js";import"./nm285usnll51g0n4.js";import"./c326bjybavj646xd.js";import"./lwyag88acem9bm0o.js";import"./lg0oi3tmjv8kv2p4.js";import"./b3ungmqo5x8kj4fh.js";import"./o5h7u1aikohecbkt.js";import"./w4rmhhxvug61xnae.js";import"./dd8hh2tmra1psngf.js";import"./moa9hw4knutxpmay.js";import"./nh6x5pasrftsddpw.js";import"./c7lf6x6u521mpx19.js";import"./hk5ml9l4i4ups2ga.js";import"./fwbhrttgqnv5nm9m.js";import"./k68z30a1j9zr4phk.js";import"./emcmoa6z1wsa6qof.js";import"./i85urdvpkzpdgj3s.js";import"./be1f0w4doetbrndv.js";import"./he1xnididjbc7s63.js";import"./m93ibzwrrpoc1bdm.js";import"./nunatmpame7vjusr.js";import"./nvxri8mldbk6o2on.js";import"./hrprrmrs14hiemon.js";function $(a,o){const e=r.useRef(0);return()=>{e.current<o&&(a(),e.current+=1)}}const vt=()=>{K();const a=z();if(!T(a,"491279851"))return O("/")},Pt=j(function(){const o=_(),{gizmoSlug:e}=y(),t=I(e!=null?e:""),{data:c,isError:g,error:s}=M(t,!1),m=R(),p=m.getQueryData([E]),l=m.getQueryState([E]),C=(l==null?void 0:l.fetchStatus)==="fetching",u=r.useMemo(()=>p==null?void 0:p.pages.flatMap(d=>d.items),[p]),f=G(),S=H(f,t);r.useEffect(()=>{S.conversations$().preload$()},[S]),r.useEffect(()=>{if(g&&!c)if(s instanceof N&&(s.status===403||s.status===404))o(h(v.PROJECT_NOT_FOUND));else{const d=b(s);o(h(v.CUSTOM_ERROR,void 0,d))}},[g,c,o,s]);const i=r.useMemo(()=>A(f,{urlGizmoId:t}),[f,t]);U(i.id,{kind:F.GizmoInteraction,gizmo_id:t});const x=$(()=>{D(m)},5);return r.useEffect(()=>{if(!t||!c||C)return;(u==null?void 0:u.some(P=>P.gizmo.gizmo.id===t))||x()},[c,t,u,C,m,x]),n.jsx(L.Provider,{value:i,children:n.jsx(Q,{children:n.jsx(k,{conversation:i,children:n.jsx(Y,{conversation:i,children:n.jsx(J,{conversation:i})})})})})});export{vt as clientLoader,Pt as default};
//# sourceMappingURL=me63g3okx7181lnm.js.map
