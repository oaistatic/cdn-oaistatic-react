const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fyw02vlaiv2vq6cj.js","assets/kfrdmkli83ureki3.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css","assets/h48j4g76f726xzx4.js","assets/lkxbuc3xjh9wuk8y.js","assets/dl9iuxzyylbgo5ht.js","assets/ny1kv4ggn7maxyzb.js","assets/kicfypys7uwtdihq.js","assets/lohbiwhanbrcni5j.js","assets/dvfjdfwc50k8htst.js","assets/dr1v3i80rkhviakg.js"])))=>i.map(i=>d[i]);
var ut=Object.defineProperty,xt=Object.defineProperties;var ht=Object.getOwnPropertyDescriptors;var De=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var Be=(t,e,a)=>e in t?ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,Z=(t,e)=>{for(var a in e||(e={}))pt.call(e,a)&&Be(t,a,e[a]);if(De)for(var a of De(e))gt.call(e,a)&&Be(t,a,e[a]);return t},te=(t,e)=>xt(t,ht(e));import{j as s,_ as U,c as $,h as X,M,r as L,u as Ke,i as bt,d as je,a as ye,R as oe,L as wt,l as pe,ag as ce}from"./kfrdmkli83ureki3.js";import{B as _t}from"./mxzgpx7wtm4zk5cj.js";import{az as z,aA as q,u as Y,p as fe,d as vt,pK as ke,i1 as me,dZ as re,cy as ne,cq as Qe,sd as jt,aB as Q,e6 as ie,J as ee,dY as yt,dP as kt,dR as de,fd as Ct,eG as ge,d_ as Nt,cB as Ye,l8 as Xe,aC as Je,kS as Et,gJ as St,fL as Mt,br as Rt,iM as Tt,al as At,fV as Pt,fM as Ot,bT as It,k7 as Lt,jB as ae,jT as Fe,L as Wt,u8 as Dt,ue as Bt,is as Ft,jG as Ht,rq as Vt,u7 as Ce}from"./kw08ajijqinojrwh.js";import{b as Gt}from"./mj0406dyy526560j.js";import{u as Ut,W as Ne}from"./nc8gen230lb13csi.js";import{C as J,u as $t}from"./dly4w3k2b5y5ayyw.js";import{R as zt}from"./b8o7znnaplhop6x8.js";import{W as qt}from"./c9y1a55iezj3p7dm.js";import{b as Kt,a as Qt,c as Yt,E as Xt,h as Ee}from"./e1cxccp3u9us8gn7.js";import{W as Ze,a as He}from"./e96bwg1s7x4og2fp.js";import{Y as Jt,Z as et,_ as Zt,k as V,W as tt,E as ue,A as es,P as ts,b as ss,x as st,j as as,m as ns,D as os,h as rs,$ as is}from"./oyvo09ze11a90qsd.js";import{T as ls}from"./jqc82mvozbbjvbcp.js";import{vp as cs,aI as se,vq as Ve,vr as at,vs as ds,mV as ms,vt as fs,vu as us,vv as xs,vw as nt,vx as hs,jI as ot,vy as rt,vz as ps,qN as gs,z as be,qP as bs}from"./fyw02vlaiv2vq6cj.js";import{I as ws}from"./mo4f6niq6474ip4n.js";import{u as it}from"./abvgi6h30lz61l9g.js";import{u as Se}from"./ltugv0cqd7tg0qay.js";import{g as lt,a as _s,W as xe}from"./cw8iso7iidphmxgk.js";import{W as _e,i as vs}from"./goxcf7vc701q04ob.js";import{U as js}from"./eueahrcxp5q9b4ww.js";import{useSetupBaseWhamKeyboardActions as ys}from"./op7sgz1bowo3300n.js";import{g as ks}from"./zmq298rl93f7s2hn.js";import{h as ct}from"./lucy2aoyk10158lx.js";import{u as Cs,A as Ns,a as Es,N as Ss,b as Ms}from"./dd7t8zwhwdzcugxd.js";import{F as Ge}from"./m62qdunuxxal8u8x.js";import{b as Rs}from"./lptwpbjabrvjmhsj.js";import{a as Ts,u as As,T as Ps,g as Os}from"./gtudzfdbnx65xg2y.js";import{u as Is}from"./i6j31imn3cki69v8.js";import{u as Ls}from"./g8cpkydknwwj989v.js";import{u as Ws}from"./lrftmyomhnslqldf.js";import{u as Ds}from"./pd4wtm7wtmrmmmqr.js";function dt({disabled:t,children:e}){return t?s.jsx("div",{className:"pointer-events-none opacity-50 select-none","aria-hidden":"true",tabIndex:-1,inert:!0,children:e}):e}const Bs=z(()=>U(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zy),__vite__mapDeps([0,1,2,3,4])),{loading:t=>q(t)}),Fs=z(()=>U(()=>import("./h48j4g76f726xzx4.js"),__vite__mapDeps([5,1])),{loading:t=>q(t)});function Hs(t,e){"use forget";return e}const Ue=Hs;function Vs(t){"use forget";const e=$.c(35),{isGitHubConnected:a,onClickCreateEnvironment:d}=t,h=a===void 0?!1:a,c=Y(),l=X(),o=fe(),i=Ue(Us,!1),r=Ue(Gs,J.Complete),n=i&&r===J.NoGithubConnection,m=i&&r===J.NoEnvironmentsCreated;let p;e[0]!==c?(p=()=>jt(c,re.GITHUB_CONNECTOR,{productSku:me.CODEX}),e[0]=c,e[1]=p):p=e[1];const x=vt(p),v=x===void 0;let w;e[2]!==l||e[3]!==o?(w=()=>{o.danger(l.formatMessage({id:"+vfzDI",defaultMessage:"Error fetching connector, please ensure GitHub is enabled for your account"}))},e[2]=l,e[3]=o,e[4]=w):w=e[4];const g=w,j=g,{isConnected:_,isLoading:k,openGithubModal:f,error:N,refetch:E}=ke(re.GITHUB_CONNECTOR,"github","/codex",me.CODEX,g,j);let y;e[5]!==E?(y=s.jsx(zt,{refetchConnectorData:E}),e[5]=E,e[6]=y):y=e[6];const u=y,b=k||v;let C;e[7]!==n||e[8]!==_||e[9]!==x||e[10]!==f?(C=()=>{!n&&(!x||_)||f()},e[7]=n,e[8]=_,e[9]=x,e[10]=f,e[11]=C):C=e[11];const A=n?!1:!x||_;let T;e[12]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(M,{id:"wham.codexOnboardingConnections.connectGithub",defaultMessage:"Connect to GitHub"}),e[12]=T):T=e[12];let R;e[13]!==b||e[14]!==C||e[15]!==A?(R=s.jsx(Q,{color:"primary",size:"medium",icon:Fs,loading:b,onClick:C,disabled:A,className:"px-3",children:T}),e[13]=b,e[14]=C,e[15]=A,e[16]=R):R=e[16];const O=R;let I;e[17]!==d?(I=()=>d==null?void 0:d(),e[17]=d,e[18]=I):I=e[18];let S;e[19]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(M,{id:"wham.createEnvironment.cta",defaultMessage:"Create environment"}),e[19]=S):S=e[19];let W;e[20]!==I?(W=s.jsx(Q,{color:"secondary",size:"medium",icon:Bs,onClick:I,className:"px-3",children:S}),e[20]=I,e[21]=W):W=e[21];const D=W,P=h||m,B=P?D:N?u:O;let H;e[22]===Symbol.for("react.memo_cache_sentinel")?(H=ne("bg-token-bg-tertiary","rounded-2xl","w-full","min-h-[220px]","flex items-center justify-center","pointer-events-auto","border-token-border-light","border"),e[22]=H):H=e[22];let F;e[23]!==B||e[24]!==N||e[25]!==n||e[26]!==l||e[27]!==x||e[28]!==P?(F=P||N||x||n?B:s.jsx(Qe,{label:l.formatMessage({id:"wham.codexOnboardingConnections.githubDisabledByAdmin",defaultMessage:"Disabled by workspace admin"}),children:s.jsx("div",{children:B})}),e[23]=B,e[24]=N,e[25]=n,e[26]=l,e[27]=x,e[28]=P,e[29]=F):F=e[29];let K;e[30]!==P?(K=!P&&s.jsx("div",{className:"text-token-text-secondary text-xs",children:s.jsx(M,{id:"wham.whamComposer.connectGithubSubtitle",defaultMessage:"Connect a repository to create a task"})}),e[30]=P,e[31]=K):K=e[31];let G;return e[32]!==F||e[33]!==K?(G=s.jsx("div",{className:H,children:s.jsxs("div",{className:"flex flex-col items-center gap-2 p-8",children:[F,K]})}),e[32]=F,e[33]=K,e[34]=G):G=e[34],G}function Gs(t){return t.codexOnboardingStateOverride}function Us(t){return t.showDevOnboardingOverrides}function $s(){var c;const{data:t,isLoading:e}=Jt(),a=(c=t==null?void 0:t.items)!=null?c:[],[d,h]=L.useState(null);return e&&a.length===0?s.jsx("div",{className:"mt-4 flex h-full w-full items-center justify-center",children:s.jsx(ie,{})}):s.jsx("div",{className:"flex flex-col justify-center",children:a.map((l,o)=>{var i;return s.jsx(Ze,{index:o,taskListItem:l,hoveredIndex:d,onMouseEnter:()=>h(o),onMouseLeave:()=>h(null),linkPath:"/s/".concat(l.share_task_id),showArchiveButton:!1,currentFilter:"current"},(i=l.id)!=null?i:"".concat(o))})})}function Me(){"use forget";const t=$.c(56),e=Y(),a=X(),{homeTab:d,setHomeTab:h}=et();let c;t[0]!==e?(c=Zt(e),t[0]=e,t[1]=c):c=t[1];const l=c,o=V(qs),i=V(zs),{eligible:r,isLoading:n}=cs(),m=l&&!n&&r;let p;t[2]!==e||t[3]!==r||t[4]!==n||t[5]!==h||t[6]!==i?(p=H=>{h(H),H==="code_reviews"&&!n&&r&&se(e,Ve),H==="all"&&i(!1)},t[2]=e,t[3]=r,t[4]=n,t[5]=h,t[6]=i,t[7]=p):p=t[7];const x=p;let v,w;t[8]!==e||t[9]!==d||t[10]!==r||t[11]!==n?(v=()=>{d==="code_reviews"&&!n&&r&&se(e,Ve)},w=[e,d,r,n],t[8]=e,t[9]=d,t[10]=r,t[11]=n,t[12]=v,t[13]=w):(v=t[12],w=t[13]),L.useEffect(v,w);let g,j;t[14]!==d||t[15]!==i?(g=()=>{d==="all"&&i(!1)},j=[d,i],t[14]=d,t[15]=i,t[16]=g,t[17]=j):(g=t[16],j=t[17]),L.useEffect(g,j);let _;t[18]!==a?(_=a.formatMessage({id:"wham.whamTasksHeader.tasks",defaultMessage:"Tasks"}),t[18]=a,t[19]=_):_=t[19];const k=_;let f;t[20]!==o?(f=o?s.jsx("span",{"aria-hidden":"true",className:"absolute -end-2 top-1 size-1.5 -translate-y-1/2 rounded-full bg-blue-400"}):null,t[20]=o,t[21]=f):f=t[21];let N;t[22]!==f||t[23]!==k?(N=s.jsxs("span",{className:"relative inline-flex items-center",children:[k,f]}),t[22]=f,t[23]=k,t[24]=N):N=t[24];const E=N;let y;t[25]!==a?(y=a.formatMessage({id:"wham.whamTasksHeader.codeReviews",defaultMessage:"Code reviews"}),t[25]=a,t[26]=y):y=t[26];const u=y;let b;t[27]!==m?(b=m?s.jsx("span",{"aria-hidden":"true",className:"absolute -end-2 top-1 size-1.5 -translate-y-1/2 rounded-full bg-blue-400"}):null,t[27]=m,t[28]=b):b=t[28];let C;t[29]!==u||t[30]!==b?(C=s.jsxs("span",{className:"relative inline-flex items-center",children:[u,b]}),t[29]=u,t[30]=b,t[31]=C):C=t[31];const A=C;let T;t[32]!==a?(T=a.formatMessage({id:"wham.whamTasksHeader.tasksAriaLabel",defaultMessage:"Tab selector to view active tasks"}),t[32]=a,t[33]=T):T=t[33];let R;t[34]!==T||t[35]!==E?(R={label:E,ariaLabel:T,key:"all"},t[34]=T,t[35]=E,t[36]=R):R=t[36];let O;t[37]!==l||t[38]!==A||t[39]!==a?(O=l?[{label:A,ariaLabel:a.formatMessage({id:"wham.whamTasksHeader.codeReviewsAriaLabel",defaultMessage:"Tab selector to view code reviews"}),key:"code_reviews"}]:[],t[37]=l,t[38]=A,t[39]=a,t[40]=O):O=t[40];let I;t[41]!==a?(I=a.formatMessage({id:"wham.whamTasksHeader.archived",defaultMessage:"Archive"}),t[41]=a,t[42]=I):I=t[42];let S;t[43]!==a?(S=a.formatMessage({id:"wham.whamTasksHeader.archivedAriaLabel",defaultMessage:"Tab selector to view archived tasks"}),t[43]=a,t[44]=S):S=t[44];let W;t[45]!==I||t[46]!==S?(W={label:I,ariaLabel:S,key:"archived"},t[45]=I,t[46]=S,t[47]=W):W=t[47];let D;t[48]!==R||t[49]!==O||t[50]!==W?(D=[R,...O,W],t[48]=R,t[49]=O,t[50]=W,t[51]=D):D=t[51];const P=D;let B;return t[52]!==x||t[53]!==d||t[54]!==P?(B=s.jsx("div",{className:"border-token-border-primary mt-4 flex w-full flex-wrap items-center justify-between gap-3 border-b align-middle md:mt-6",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(ls,{currentTab:d,onChange:x,withUnderline:!0,skipTabUnderlineAnimation:!0,tabs:P})})}),t[52]=x,t[53]=d,t[54]=P,t[55]=B):B=t[55],B}function zs(t){return t.setShouldHighlightTasksTab}function qs(t){return t.shouldHighlightTasksTab}function Ks(){const t=X(),e=fe(),a=V(g=>g.environmentId),d=V(g=>g.branch),[h,c]=L.useState(null),l=Ke(),{isCreatingEnvironment:o,ensureEnvironment:i,hasRepository:r}=Ut(),n=!!(a&&d),m=!n&&!r,p=!n&&!r,x=[{id:"ask-0",type:"ask",prompt:t.formatMessage({id:"wham.codexOnboardingStarterTasks.ask.prompt.0",defaultMessage:"Explain the codebase to a newcomer. What is the general structure, what are the important things to know, and what are some pointers for things to learn next?"})},{id:"build-1",type:"build",prompt:t.formatMessage({id:"wham.codexOnboardingStarterTasks.build.prompt.1",defaultMessage:"Pick a part of the codebase that seems important and find and fix a bug."})},{id:"ask-2",type:"ask",prompt:t.formatMessage({id:"wham.codexOnboardingStarterTasks.ask.prompt.2",defaultMessage:"Go through the codebase, find issues and propose one task to fix a typo, one task to fix a bug, one task to fix a code comment or documentation discrepancy, and one task to improve a test."})}],{mutate:v}=bt({mutationFn:async({prompt:g,id:j})=>{const{environmentId:_,branch:k}=V.getState();if(!_||!k)throw e.danger(t.formatMessage({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task"})),new Error("Environment, content, and branch are required");const f=crypto.randomUUID();return V.getState().addPendingTaskId(f),c(j),await tt.createNewTask(_,k,g,!1).catch(E=>{throw V.getState().removePendingTaskId(f),e.danger(t.formatMessage({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task"}),{id:f,duration:5,hasCloseButton:!0}),E}).then(E=>(V.getState().assignPendingTaskToFinalTask(f,E.task.id),E))},onSuccess:()=>{l.refetchQueries({queryKey:["wham","tasks"]}),l.refetchQueries({queryKey:["wham","usage","rate-limit-status"]})},onSettled:()=>{c(null)}}),w=async g=>{if(!n){if(!r){e.danger(t.formatMessage({id:"wham.startFirstTask.selectRepository",defaultMessage:"Select a repository before starting a task"}));return}c(g.id);try{if(!await i()){c(null);return}}catch(j){c(null);return}v({prompt:g.prompt,id:g.id});return}v({prompt:g.prompt,id:g.id})};return s.jsxs("div",{className:"w-full px-3 md:px-0",children:[s.jsx("div",{className:"text-token-text-primary ps-1 pt-6 pb-3 text-sm font-medium",children:s.jsx(M,{id:"wham.startFirstTask.title",defaultMessage:"Start your first task"})}),s.jsx("div",{className:"bg-token-bg-tertiary dark:bg-token-bg-secondary rounded-3xl p-4",children:s.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:x.map(g=>s.jsxs("div",{className:ne("bg-token-bg-primary dark:bg-token-bg-tertiary flex flex-col justify-between rounded-2xl p-4 shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]"),children:[s.jsx("div",{className:"text-token-text-primary pb-4 text-sm leading-5.5",children:g.prompt}),s.jsx(Qe,{disabled:!p,label:p?t.formatMessage({id:"wham.startFirstTask.disabledTooltip",defaultMessage:"Please select a repository to start a task"}):null,children:s.jsx(Q,{color:"secondary",disabled:m||o,loading:h===g.id,className:"self-start",onClick:()=>w(g),children:s.jsx(M,{id:"wham.startFirstTask.cta",defaultMessage:"Start"})})})]},g.id))})})]})}const $e=z(()=>U(()=>import("./lkxbuc3xjh9wuk8y.js"),__vite__mapDeps([6,1])),{loading:t=>q(t)});function Qs(){const t=it(),e=je(),a=fe(),d=X(),{data:h}=ue(),{mutate:c,isPending:l}=Se({showToast:!1}),o=()=>{c({codeReviewPreference:"always"},{onSuccess:()=>{a.success(d.formatMessage({id:"wham.codeReviewSuggestionsCard.enableForMeSuccess",defaultMessage:"Code review is now enabled for you"}),{duration:2})},onError:()=>{a.danger(d.formatMessage({id:"wham.codeReviewSuggestionsCard.enableForMeError",defaultMessage:"Failed to enable code review for you"}),{duration:2})}})},i=()=>{e("/codex/settings/code-review")};return(h==null?void 0:h.code_review_preference)==="always"?s.jsxs("div",{className:"flex max-w-[300px] flex-col items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary flex flex-col gap-2 rounded-xl p-2 shadow",children:s.jsx($e,{className:"icon-xl"})}),s.jsx("p",{className:"text-token-text-primary font-medium",children:s.jsx(M,{id:"wham.codeReviewSuggestionsCard.codeReviewEnabledTitle",defaultMessage:"Code review enabled"})}),s.jsx("p",{className:"text-token-text-secondary text-center text-wrap",children:s.jsx(M,{id:"wham.codeReviewSuggestionsCard.codeReviewEnabledDescription",defaultMessage:"Codex will review PRs you push to connected repos."})}),s.jsx(Q,{onClick:()=>e("/codex/settings/code-review"),className:"min-w-[220px]",children:s.jsx(M,{id:"wham.codexEnvironmentPopover.manageCodeReview",defaultMessage:"Manage code review"})})]}):s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary flex flex-col gap-2 rounded-xl p-2 shadow",children:s.jsx($e,{className:"icon-xl"})}),s.jsxs("div",{className:"text-centers flex max-w-[300px] flex-col items-center gap-2",children:[s.jsx("p",{className:"text-token-text-primary font-medium",children:s.jsx(M,{id:"wham.codexEnvironmentPopover.createEnvFromRepoExistingTitle",defaultMessage:"Enable code review"})}),s.jsx("p",{className:"text-token-text-secondary text-center text-wrap",children:s.jsx(M,{id:"wham.codexEnvironmentPopover.createEnvFromRepoExistingDescription",defaultMessage:"Catch critical bugs before they ship"})}),s.jsx(Q,{onClick:o,className:"min-w-[220px]",loading:l,children:s.jsx(M,{id:"wham.codexEnvironmentPopover.createEnvFromRepoExistingButton",defaultMessage:"Enable for me"})}),t&&s.jsx(Q,{onClick:i,className:"min-w-[220px]",color:"secondary",children:s.jsx(M,{id:"wham.codexEnvironmentPopover.createEnvFromRepoExistingButtonWorkspace",defaultMessage:"Enable for my workspace"})})]})]})}function Ys(t){"use forget";const e=$.c(4),{filter:a,homeTab:d}=t,h=d||(a==="archived"?"archived":a==="code_review"?"code_reviews":"all");if(h==="code_reviews"&&a==="code_review"){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(Qs,{}),e[0]=o):o=e[0],o}if(h==="archived"){let o;return e[1]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx("div",{className:"text-token-text-secondary text-sm",children:s.jsx(M,{id:"wham.whamTasksSection.noArchivedTasks",defaultMessage:"No archived tasks"})}),e[1]=o):o=e[1],o}if(h==="all"){let o;return e[2]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(Ks,{}),e[2]=o):o=e[2],o}let l;return e[3]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("div",{className:"text-token-text-secondary text-sm",children:s.jsx(M,{id:"wham.whamTasksSection.noActiveTasks",defaultMessage:"No active tasks"})}),e[3]=l):l=e[3],l}const Xs=z(()=>U(()=>import("./dl9iuxzyylbgo5ht.js"),__vite__mapDeps([7,1])),{loading:t=>q(t)});function Js({filterOverride:t,homeTab:e}={}){var E;const a=V(({homeTab:y})=>y),d=e!=null?e:a,h=t!=null?t:ts(d),{data:c,isLoading:l,error:o,fetchNextPage:i,hasNextPage:r,isFetchingNextPage:n,refetch:m,isPending:p}=es({filter:h,refetchOnMount:!0,refetchOnWindowFocus:!0}),x=(E=c==null?void 0:c.pages.flatMap(y=>{var u;return(u=y.items)!=null?u:[]}))!=null?E:[],v=V(y=>y.pendingTaskIds),w=V(y=>y.pendingCodeReviewIds),g=x.length>0,[j,_]=L.useState(null),k=Array.from(Object.entries(v)).filter(([y,u])=>!x.some(b=>b.id===u)).map(([y])=>y).reverse(),f=Array.from(Object.entries(w)).filter(([y,u])=>!x.some(b=>b.id===u)).map(([y])=>y).reverse(),N=x.length===0&&k.length===0&&f.length===0;return s.jsx("div",{className:"flex flex-col justify-center pb-20",children:l&&!g?s.jsx("div",{className:"mt-4 flex h-full w-full items-center justify-center",children:s.jsx(ie,{})}):s.jsxs(s.Fragment,{children:[N&&s.jsx(s.Fragment,{children:o?s.jsxs("div",{className:"mt-6 flex w-full flex-col items-center justify-center gap-2 text-sm",children:[s.jsx("div",{className:"text-interactive-label-warning-secondary",children:s.jsx(M,{id:"wham.whamTasksSection.errorLoadingTasks",defaultMessage:"Error loading tasks"})}),s.jsx(Q,{color:"secondary",onClick:()=>m(),children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(M,{id:"wham.whamTasksSection.retry",defaultMessage:"Retry"}),s.jsx(Xs,{className:"icon-xs"})]})})]}):s.jsx("div",{className:"mt-6 flex h-full w-full items-center justify-center",children:s.jsx(Ys,{filter:h,homeTab:d})})}),h==="current"&&k.map(y=>s.jsx(He,{},y)),h==="code_review"&&f.map(y=>s.jsx(He,{},y)),x.map((y,u)=>s.jsx(Ze,{index:u,taskListItem:y,hoveredIndex:j,onMouseEnter:()=>{_(u)},onMouseLeave:()=>_(null),currentFilter:h,showArchiveButton:h!=="code_review"},y.id)),s.jsx(ws,{isFetchingNextPage:n||p,hasNextPage:r!=null?r:!1,fetchNextPage:i})]})})}const Re=L.memo(Js),Zs=z(()=>U(()=>import("./ny1kv4ggn7maxyzb.js"),__vite__mapDeps([8,1])),{loading:t=>q(t)}),ea=z(()=>U(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zF),__vite__mapDeps([0,1,2,3,4])),{loading:t=>q(t)});function ta(){"use forget";const t=$.c(22),e=Y(),{eligible:a,isLoading:d}=at(),h=Ke(),c=X(),l=fe();if(d||!a)return null;let o;t[0]!==e?(o=()=>se(e,ds),t[0]=e,t[1]=o):o=t[1];const i=o;let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx(Zs,{className:"h-6 w-6 shrink-0"}),t[2]=r):r=t[2];let n;t[3]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("h2",{className:"text-sm font-semibold md:text-base",children:s.jsx(M,{id:"wham.alphaBanner.title",defaultMessage:"Codex Alpha"})}),t[3]=n):n=t[3];let m;t[4]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsxs("div",{className:"flex flex-1 items-start gap-3 md:items-center md:gap-4",children:[r,s.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[n,s.jsx("p",{className:"text-token-text-secondary text-xs leading-5 md:text-sm",children:s.jsx(M,{id:"wham.alphaBanner.description",defaultMessage:"Get early access to new models and features."})})]})]}),t[4]=m):m=t[4];let p;t[5]!==c||t[6]!==i||t[7]!==h||t[8]!==l?(p=()=>{tt.updateUserPreferences({alphaOptIn:!0}).then(async()=>{await ss(h),i(),l.success(c.formatMessage({id:"wham.alphaBanner.enrolled",defaultMessage:"Enrolled in Codex alpha. Update your selection anytime in your settings."}),{duration:3})}).catch(()=>l.danger(c.formatMessage({id:"wham.alphaBanner.failed",defaultMessage:"Failed to update user preferences"}),{duration:3}))},t[5]=c,t[6]=i,t[7]=h,t[8]=l,t[9]=p):p=t[9];let x;t[10]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(M,{id:"wham.alphaBanner.cta",defaultMessage:"Join now"}),t[10]=x):x=t[10];let v;t[11]!==p?(v=s.jsx(Q,{size:"small",color:"primary",className:"text-token-text-secondary h-9 px-6 text-sm md:px-7",onClick:p,children:x}),t[11]=p,t[12]=v):v=t[12];let w;t[13]!==c?(w=c.formatMessage({id:"wham.alphaBanner.dismiss",defaultMessage:"Dismiss Codex alpha banner"}),t[13]=c,t[14]=w):w=t[14];let g;t[15]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(ea,{className:"icon-sm"}),t[15]=g):g=t[15];let j;t[16]!==i||t[17]!==w?(j=s.jsx(Q,{size:"small",color:"secondary",className:"text-token-text-tertiary border-token-border-subtle hover:bg-token-bg-secondary hover:text-token-text-primary h-9 w-9 text-sm font-medium",onClick:i,"aria-label":w,children:g}),t[16]=i,t[17]=w,t[18]=j):j=t[18];let _;return t[19]!==v||t[20]!==j?(_=s.jsx("div",{className:"mt-4 w-full px-3 md:px-0",children:s.jsx("div",{className:"border-token-border-subtle bg-token-bg-primary text-token-text-primary flex w-full flex-col gap-3 rounded-3xl border px-4 py-3 shadow-[0px_12px_32px_rgba(15,23,42,0.14)] md:px-6 md:py-4",children:s.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[m,s.jsxs("div",{className:"flex flex-shrink-0 items-center gap-2",children:[v,j]})]})})}),t[19]=v,t[20]=j,t[21]=_):_=t[21],_}const Te="codex_onboarding",ve="code_review";function sa(t){const e=new URLSearchParams(t);return e.set(Te,ve),e.toString()}function aa(t){const e=new URLSearchParams(t);return e.delete(Te),e.toString()}function Ae(t){"use forget";var G,le,Pe,Oe,Ie,Le,We;const e=$.c(30);let a;e[0]!==t?(a=t===void 0?{}:t,e[0]=t,e[1]=a):a=e[1];const{redirectUrl:d,onError:h}=a,c=Y();let l;e[2]!==c?(l=ee(c,"423120313"),e[2]=c,e[3]=l):l=e[3];const o=l,{status:i}=ms(yt[re.GITHUB_CONNECTOR]),r=i==="loading",n=!r&&i==="required",m=i==="error",{data:p,isLoading:x,error:v}=fs(),{isConnected:w,isLoading:g,openGithubModal:j,error:_}=ke(re.GITHUB_CONNECTOR,"github",d!=null?d:"/codex?codex_onboarding=code_review",me.CODEX),{data:k,isLoading:f,error:N}=ue(),{eligible:E,isLoading:y}=us(),u=(k==null?void 0:k.code_review_preference)==="always",{data:b,isLoading:C,error:A}=st(E&&!y&&o&&!g&&w);let T;e[4]!==(b==null?void 0:b.memberships)?(T=(G=b==null?void 0:b.memberships)!=null?G:[],e[4]=b==null?void 0:b.memberships,e[5]=T):T=e[5];let R;e[6]!==(b==null?void 0:b.other)?(R=(le=b==null?void 0:b.other)!=null?le:[],e[6]=b==null?void 0:b.other,e[7]=R):R=e[7];let O;e[8]!==T||e[9]!==R?(O=[...T,...R],e[8]=T,e[9]=R,e[10]=O):O=e[10];const I=O.length>0,S=!!((We=(Le=(Ie=(Oe=(Pe=A&&_)!=null?Pe:v)!=null?Oe:_)!=null?Ie:N)!=null?Le:m)!=null&&We);let W,D;e[11]!==S||e[12]!==h?(W=()=>{S&&h&&h()},D=[S,h],e[11]=S,e[12]=h,e[13]=W,e[14]=D):(W=e[13],D=e[14]),L.useEffect(W,D);const P=g||f||r||x||w&&C,B=!n||p,H=!E;let F;e[15]!==c?(F=()=>se(c,xs),e[15]=c,e[16]=F):F=e[16];let K;return e[17]!==S||e[18]!==I||e[19]!==u||e[20]!==o||e[21]!==w||e[22]!==y||e[23]!==n||e[24]!==j||e[25]!==H||e[26]!==F||e[27]!==P||e[28]!==B?(K={isLoading:P,isMfaRequired:n,isMfaEnabled:B,isGitHubConnected:w,hasValidInstallation:I,isCodeReviewEnabled:u,hasCompletedCodeReviewFlow:H,isCodeReviewOnboardingFlowEnabled:o,isHasCompletedCodeReviewLoading:y,error:S,openGithubModal:j,markCompletedCodeReview:F},e[17]=S,e[18]=I,e[19]=u,e[20]=o,e[21]=w,e[22]=y,e[23]=n,e[24]=j,e[25]=H,e[26]=F,e[27]=P,e[28]=B,e[29]=K):K=e[29],K}function na({isHasCompletedCodeReviewLoading:t,isCodeReviewEnabled:e,hasCompletedCodeReviewFlow:a,markCompletedCodeReview:d}){L.useEffect(()=>{!t&&e&&!a&&d()},[t,e,a,d])}const oa=z(()=>U(()=>import("./kicfypys7uwtdihq.js"),__vite__mapDeps([9,1])),{loading:t=>q(t)}),ra=z(()=>U(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zF),__vite__mapDeps([0,1,2,3,4])),{loading:t=>q(t)}),ia=z(()=>U(()=>import("./lohbiwhanbrcni5j.js"),__vite__mapDeps([10,1])),{loading:t=>q(t)}),la=z(()=>U(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zE),__vite__mapDeps([0,1,2,3,4])),{loading:t=>q(t)}),ca=z(()=>U(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zL),__vite__mapDeps([0,1,2,3,4])),{loading:t=>q(t)});function da(){const t=X(),e=Y(),{data:a,isLoading:d}=as(),h=kt(),c=V(S=>S.preferredEditor),l=V(S=>S.setPreferredEditor),{eligible:o,isLoading:i}=nt(),{cli:r,vscode:n,cursor:m,windsurf:p}=lt(e),{isLoading:x,isMfaRequired:v,isMfaEnabled:w,isGitHubConnected:g,hasValidInstallation:j,isCodeReviewEnabled:_,hasCompletedCodeReviewFlow:k,isCodeReviewOnboardingFlowEnabled:f,openGithubModal:N,error:E}=Ae({redirectUrl:"/codex/settings/code-review"}),y=je(),u=ye(),b=oe.useMemo(()=>{const W=[...v?[!!w]:[],!!(g&&j),!!(_&&k)],D=W.length,P=W.filter(Boolean).length,B=D===0?0:P/D*100;return{completedSteps:P,totalSteps:D,percentage:B}},[j,v,w,_,k,g]),C=!x&&b.completedSteps<b.totalSteps,A=oe.useCallback(S=>{if(f)E||(S.preventDefault(),y({pathname:u.pathname,search:sa(u.search),hash:u.hash},{replace:!1}));else if(!g){S.preventDefault(),N();return}},[g,E,f,u.hash,u.pathname,u.search,y,N]),T=_s(c,h),[R,O]=oe.useState(!1),I=oe.useRef(!1);return!o||i||d?null:s.jsxs("div",{className:"group w-full px-3 md:px-0",children:[s.jsxs("div",{className:"text-token-text-primary flex items-center justify-between gap-1 ps-1 pt-6 pb-2 text-sm leading-tight font-medium",children:[a?s.jsx(M,{id:"wham.whatsNew.title",defaultMessage:"What's new with Codex"}):s.jsx(M,{id:"wham.gettingStarted.title",defaultMessage:"Get started with Codex"}),s.jsx(Q,{onClick:()=>se(e,hs),className:"text-token-text-tertiary dark:text-token-text-tertiary w-7 items-center justify-center rounded-lg",size:"small",color:"ghost","aria-label":t.formatMessage({id:"wham.newFeatures.dismiss",defaultMessage:"Dismiss new features announcement"}),children:s.jsx(ra,{className:"icon-sm"})})]}),s.jsxs(de.div,{layout:!0,className:"grid grid-cols-1 gap-3 md:[grid-template-columns:repeat(auto-fit,minmax(220px,1fr))]",children:[s.jsx(de.div,{layout:!0,children:s.jsx(we,{children:s.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"group/card -m-4 flex items-center justify-between gap-3 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(oa,{className:"icon-md"})}),s.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(M,{id:"wham.gettingStarted.cli",defaultMessage:"Try in your terminal"})})]}),s.jsx(ca,{className:"icon-sm text-token-text-tertiary origin-[bottom_var(--start)] scale-75 opacity-0 transition-all duration-100 ease-out group-hover/card:scale-100 group-hover/card:opacity-100"})]})})}),s.jsx(de.div,{layout:!0,children:s.jsx(we,{children:s.jsxs("div",{className:"group/card -m-4 flex cursor-pointer items-center justify-between gap-3 rounded-2xl p-4 select-none",role:"button",tabIndex:0,onPointerDown:()=>{I.current=R},onClick:()=>{I.current?O(!1):O(!0)},onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),O(W=>!W))},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(T,{className:"h-5 w-5"})}),s.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(M,{id:"wham.gettingStarted.ide",defaultMessage:"Try in your IDE"})})]}),s.jsxs(Ct,{contentAlign:"end",open:R,onOpenChange:O,triggerButton:s.jsx("button",{onClick:S=>S.stopPropagation(),"aria-label":t.formatMessage({id:"wham.gettingStarted.ide.open",defaultMessage:"Open IDE links"}),"aria-expanded":R,className:"hover:bg-token-bg-tertiary rounded-md p-1",children:s.jsx(la,{className:ne("icon-sm text-token-text-tertiary shrink-0 transition-all duration-100 ease-out group-hover/card:translate-y-0 group-hover/card:opacity-100",R?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})}),children:[s.jsx(ge.ItemAs,{as:"a",href:n,target:"_blank",rel:"noreferrer",onClick:()=>l("vscode"),children:"VS Code"}),s.jsx(ge.ItemAs,{as:"a",href:m,target:"_blank",rel:"noreferrer",onClick:()=>l("cursor"),children:"Cursor"}),s.jsx(ge.ItemAs,{as:"a",href:p,target:"_blank",rel:"noreferrer",onClick:()=>l("windsurf"),children:"Windsurf"})]})]})})}),s.jsx(Nt,{initial:!1,children:!k&&s.jsx(de.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:[.4,0,.2,1]},children:s.jsx(we,{children:s.jsxs(wt,{to:"/codex/settings/code-review",className:"group/card -m-4 flex items-center gap-2 rounded-2xl p-4",onClick:A,children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(ia,{className:"icon-md relative z-10"})}),s.jsx("div",{className:"text-token-text-primary flex-1 text-sm font-medium",children:s.jsx(M,{id:"wham.gettingStarted.codeReview",defaultMessage:"Enable code review"})}),f&&!E&&(x||C)&&s.jsx("span",{className:"pointer-events-none flex h-4 w-4 items-center justify-center",children:x?s.jsx(ie,{className:"h-5 w-5"}):s.jsx(ot,{percentage:b.percentage,thickness:1/10,sizeOverride:10,className:"text-token-text-primary h-10 w-10",backgroundStrokeClassName:"stroke-token-text-primary/20",transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"})})]})})},"code-review-card")})]})]})}function we({children:t}){return s.jsx("div",{className:ne("bg-token-bg-tertiary","dark:bg-token-bg-secondary","flex flex-col justify-between gap-1 rounded-2xl p-4"),children:t})}const ma=z(()=>U(()=>import("./dvfjdfwc50k8htst.js"),__vite__mapDeps([11,1])),{loading:t=>q(t)}),fa=z(()=>U(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zF),__vite__mapDeps([0,1,2,3,4])),{loading:t=>q(t)}),ua=z(()=>U(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([12,1])),{loading:t=>q(t)});function xa(){const t=X(),e=Y(),{eligible:a,isLoading:d}=rt(),{slack:h}=lt(e),{isConnected:c,isLoading:l}=ke(re.SLACK_CODEX_CONNECTOR,"slack","/codex/settings/connectors",me.CODEX),o=oe.useCallback(()=>{se(e,ps)},[e]);if(!a||d||l||c)return null;const i=s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-token-bg-primary dark:bg-token-bg-tertiary border-token-border-light flex h-10 w-10 items-center justify-center rounded-xl shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.06)),0px_0px_1px_0px_var(--shadow-color-2,rgba(0,_0,_0,_0.3))] dark:shadow-[0px_1px_1px_0px_var(--shadow-color-1,rgba(0,_0,_0,_0.10)),inset_0px_0px_1px_0px_var(--shadow-color-2,rgba(255,_255,_255,_0.2))]",children:s.jsx(ma,{className:"icon-md"})}),s.jsxs("div",{className:"flex flex-1 items-center gap-2 text-start text-sm leading-tight",children:[s.jsx("span",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(M,{id:"wham.gettingStarted.slack",defaultMessage:"Set up Codex with Slack"})}),s.jsx(ua,{className:"icon-sm text-token-text-primary shrink-0"})]})]});return s.jsx("div",{className:"group w-full px-3 pt-4 md:px-0",children:s.jsxs("div",{className:"bg-token-bg-tertiary/80 dark:bg-token-bg-secondary flex items-center gap-3 rounded-2xl px-4 py-3",children:[s.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:"group/card flex flex-1 items-center justify-between gap-3",onClick:()=>_e.recordSlackLinkClicked(),children:i}),s.jsx(Q,{onClick:o,className:"text-token-text-tertiary dark:text-token-text-tertiary w-7 shrink-0 items-center justify-center rounded-lg",size:"small",color:"ghost","aria-label":t.formatMessage({id:"wham.newFeatures.dismiss",defaultMessage:"Dismiss new features announcement"}),children:s.jsx(fa,{className:"icon-sm"})})]})})}function he(){"use forget";const t=$.c(21),e=nt(),a=rt(),d=at(),[h,c]=L.useState(null),{data:l}=ns(),o=vs(l);let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(da,{}),t[0]=i):i=t[0];let r;t[1]!==e.eligible?(r={eligible:e.eligible,render:i},t[1]=e.eligible,t[2]=r):r=t[2];let n;t[3]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(xa,{}),t[3]=n):n=t[3];let m;t[4]!==a.eligible?(m={eligible:a.eligible,render:n},t[4]=a.eligible,t[5]=m):m=t[5];let p;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(ta,{}),t[6]=p):p=t[6];let x;t[7]!==d.eligible?(x={eligible:d.eligible,render:p},t[7]=d.eligible,t[8]=x):x=t[8];let v;t[9]!==r||t[10]!==m||t[11]!==x?(v=[r,m,x],t[9]=r,t[10]=m,t[11]=x,t[12]=v):v=t[12];const w=v;let g;t[13]!==w||t[14]!==h?(g=h==null?(()=>{const f=w.findIndex(ha);return f>=0?f:null})():null,t[13]=w,t[14]=h,t[15]=g):g=t[15];const j=g;let _,k;if(t[16]!==j?(_=()=>{j!=null&&c(f=>f==null?j:f)},k=[j],t[16]=j,t[17]=_,t[18]=k):(_=t[17],k=t[18]),L.useEffect(_,k),o&&l){let f;return t[19]!==l?(f=s.jsx("div",{className:"w-full pt-6",children:s.jsx(js,{rateLimit:l,linkToUsageDashboard:!0})}),t[19]=l,t[20]=f):f=t[20],f}return h==null?null:w[h].render}function ha(t){return t.eligible}function pa(t){return ee(t,"3984934927")}function ga({shouldTurnOn:t,onChange:e}){const{data:a}=ue(),d=X();return a?s.jsx("div",{className:"border-token-border-heavy bg-token-bg-primary flex w-full flex-col items-center rounded-lg border p-4",children:s.jsxs("div",{className:"flex w-full justify-between",children:[s.jsxs("div",{className:"flex w-full flex-col items-start justify-start gap-2",children:[s.jsx("p",{className:"text-token-text-primary text-sm leading-tight font-medium",children:s.jsx(M,{id:"wham.enableCodeReviewsToggle.label",defaultMessage:"Code reviews"})}),s.jsx("p",{className:"text-token-text-secondary justify-start text-xs leading-none font-normal",children:s.jsx(M,{id:"wham.enableCodeReviewsToggle.description",defaultMessage:"Automatically run reviews on new pull requests in this repo."})})]}),s.jsx("div",{className:"flex items-center",children:s.jsx(Ye,{checked:t,onCheckedChange:e,className:"radix-state-checked:bg-black!","aria-label":d.formatMessage({id:"wham.enableCodeReviewsToggle.ariaLabel",defaultMessage:"Enable code reviews by Codex"})})})]})}):null}function mt(){const t=Y(),e=Xe("installations/select_target"),{data:a,isLoading:d}=st();L.useEffect(()=>{var c,l;if(d)return;[...(c=a==null?void 0:a.memberships)!=null?c:[],...(l=a==null?void 0:a.other)!=null?l:[]].length===0&&ct(e)},[d,a,t,e])}function ba({backCta:t,handleGoBack:e,handleSelectEnvironment:a,goToNextPage:d,lockPageView:h,shouldDisableRow:c,disablePill:l}){var y;const o=it(),i=X(),[r,n]=L.useState(""),[m,p]=L.useState(null),[x,v]=L.useState(!o),{mutate:w,isPending:g}=Is({onSuccess:u=>{_e.recordCreateEnvSuccess(),a(u.id,ks(u)),d()}}),{mutate:j}=Ts(),{mutate:_}=Se({showToast:!1});mt();const f=Ls({defaultValues:{repositoryId:"",agentNetworkAccess:{mode:"off"}},validators:{onSubmit:({value:u})=>{var C;const b={};return(!u.repositoryId||u.repositoryId==="")&&(b.repositoryId=i.formatMessage({id:"wham.codexOnboardingEnvironments.repositoryIsRequired",defaultMessage:"Repository is required"})),((C=u.agentNetworkAccess)==null?void 0:C.mode)==="on"&&u.agentNetworkAccess.preset_allowlist===Rs&&(!u.agentNetworkAccess.allowlist_domains||u.agentNetworkAccess.allowlist_domains.length===0)&&(b.agentNetworkAccess=i.formatMessage({id:"wham.environmentsForm.agentNetworkAccessAllowlistRequired",defaultMessage:"At least one domain is required"})),{fields:b}}},onSubmit:({value:u})=>{_e.recordEnvironmentsSubmit(),h(),x&&(_({codeReviewPreference:"repo_default"}),j({repo_review_settings:[{repository:u.repositoryId,review_preference:"team"}]})),w(te(Z({},u),{label:r,description:"",machine:"wham-public/wham-universal",workspaceDirectory:"/workspace",share_settings:"workspace",setupCommands:"",maintenanceSetupCommands:"",envVars:[],secrets:[],autoSetupSettings:{use_auto_setup:!0}}))}}),N=u=>{u.preventDefault(),u.stopPropagation(),f.handleSubmit()},E=Cs();return s.jsx("form",{onSubmit:N,className:"flex flex-col gap-6",children:s.jsxs("div",{className:"flex w-full flex-col gap-4",children:[s.jsx(Ns,{selectedInstallationId:(y=m==null?void 0:m.id)!=null?y:null,setSelectedInstallation:p}),s.jsx(f.Field,{name:"repositoryId",children:u=>{var b,C,A;return s.jsxs("div",{className:"flex w-full flex-col gap-4",children:[s.jsx(Es,{installationId:(b=m==null?void 0:m.id)!=null?b:null,installationAccountLogin:(C=m==null?void 0:m.account_login)!=null?C:null,installationAccountType:(A=m==null?void 0:m.account_type)!=null?A:null,selectedRepository:u.state.value,onSelect:(T,R)=>{u.handleChange(T),n(R)},shouldDisableRow:c,disablePill:l}),s.jsx(Ge,{field:u})]})}}),s.jsx(ga,{shouldTurnOn:x,onChange:v}),s.jsx(f.Field,{name:"agentNetworkAccess",children:u=>{var b;return s.jsxs("div",{className:"flex flex-col gap-4",children:[E!=null&&s.jsx(Ss,{disabledByWorkspaceSettings:E,agentNetworkAccess:u.state.value,onChange:u.handleChange}),s.jsx(Ge,{field:u}),((b=u.state.value)==null?void 0:b.mode)==="on"&&s.jsx(Ms,{})]})}}),s.jsxs("div",{className:"flex w-full items-center justify-between",children:[s.jsx(Q,{color:"secondary",size:"medium",type:"button",onClick:e,children:t}),s.jsx(f.Subscribe,{selector:u=>u.values,children:u=>s.jsx(Q,{color:"primary",size:"medium",loading:g,disabled:!r||!u.agentNetworkAccess,onClick:()=>f.handleSubmit(),children:s.jsx(M,{id:"wham.codexOnboardingEnvironments.createEnvironment",defaultMessage:"Create environment"})})})]})]})})}function wa(t){"use forget";const e=$.c(26),{isOpen:a,onClose:d}=t,h=Y(),c=X(),l=V(ja),o=V(va);let i;e[0]!==o||e[1]!==l?(i=(k,f)=>{l(k),o(f)},e[0]=o,e[1]=l,e[2]=i):i=e[2];const r=i;let n;e[3]!==h?(n=()=>se(h,gs),e[3]=h,e[4]=n):n=e[4];const m=n;mt();let p;e[5]!==m||e[6]!==d?(p=()=>{m(),d()},e[5]=m,e[6]=d,e[7]=p):p=e[7];let x;e[8]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("h2",{className:"text-center text-2xl font-semibold",children:s.jsx(M,{id:"wham.createFirstEnvironmentModal.title",defaultMessage:"Create your first environment"})}),e[8]=x):x=e[8];let v;e[9]!==c?(v=c.formatMessage({id:"wham.createFirstEnvironmentModal.cancel",defaultMessage:"Cancel"}),e[9]=c,e[10]=v):v=e[10];let w;e[11]!==m||e[12]!==d?(w=()=>{m(),d()},e[11]=m,e[12]=d,e[13]=w):w=e[13];let g;e[14]!==m||e[15]!==d?(g=()=>{m(),d()},e[14]=m,e[15]=d,e[16]=g):g=e[16];let j;e[17]!==r||e[18]!==v||e[19]!==w||e[20]!==g?(j=s.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[x,s.jsx(ba,{backCta:v,handleGoBack:w,handleSelectEnvironment:r,goToNextPage:g,lockPageView:_a})]}),e[17]=r,e[18]=v,e[19]=w,e[20]=g,e[21]=j):j=e[21];let _;return e[22]!==a||e[23]!==p||e[24]!==j?(_=s.jsx(Je,{isOpen:a,onClose:p,type:"success",size:"large",noPadding:!0,testId:"modal-wham-create-first-environment",position:"center",contentClassName:"no-scrollbar",className:"h-[90vh]",children:j}),e[22]=a,e[23]=p,e[24]=j,e[25]=_):_=e[25],_}function _a(){}function va(t){return t.setBranch}function ja(t){return t.setEnvironmentId}function ya(t){"use forget";const e=$.c(32),{disabledInstallations:a,autoReviewPreference:d,isAutoReviewPreferenceSaving:h,onAutoReviewPreferenceChange:c}=t;let l;e[0]!==a?(l=a===void 0?[]:a,e[0]=a,e[1]=l):l=e[1];const o=l,i=X(),[r,n]=L.useState(d);let m,p;e[2]!==d?(m=()=>{n(d)},p=[d],e[2]=d,e[3]=m,e[4]=p):(m=e[3],p=e[4]),L.useEffect(m,p);const{filteredSettings:x,isLoading:v,isFetching:w,isTeamOrEnterprise:g,isPlus:j,isPro:_,user:k,isLegacyEnterprisey:f,currentAccountOwnerId:N,updateCodeReviewRepositories:E}=As();let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx("p",{className:"text-sm font-medium",children:s.jsx(M,{id:"wham.codeReviewPage.teamAutomations.autoReviewToggle.label",defaultMessage:"Review all my pull requests"})}),e[5]=y):y=e[5];let u;e[6]!==i?(u=i.formatMessage({id:"wham.codeReviewPage.personalPreferences.toggleRepoCodeReviewAria",defaultMessage:"Toggle code review for personal preferences"}),e[6]=i,e[7]=u):u=e[7];const b=r==="always";let C;e[8]!==c?(C=I=>{const S=I?"always":"repo_default";n(S),c(S)},e[8]=c,e[9]=C):C=e[9];let A;e[10]!==h||e[11]!==u||e[12]!==b||e[13]!==C?(A=s.jsxs("div",{className:"flex items-center justify-between gap-3 px-4 py-3",children:[y,s.jsx(Ye,{"aria-label":u,checked:b,disabled:h,onCheckedChange:C})]}),e[10]=h,e[11]=u,e[12]=b,e[13]=C,e[14]=A):A=e[14];let T;e[15]!==N||e[16]!==o||e[17]!==x||e[18]!==w||e[19]!==f||e[20]!==v||e[21]!==j||e[22]!==_||e[23]!==g||e[24]!==E||e[25]!==(k==null?void 0:k.email)?(T=v?Array.from({length:4}).map(ka):x.length===0&&!w?s.jsx("div",{className:"text-token-text-tertiary px-4 py-6 text-center text-sm",children:s.jsx(M,{id:"wham.codeReviewPage.teamAutomations.noRepositories",defaultMessage:"No repositories"})}):x.map((I,S)=>{var W;return s.jsx(Ps,{repo:I,isTeamOrEnterprise:g,isLegacyEnterprisey:f,isPlus:j,isPro:_,disabledInstallations:o,updateCodeReviewRepositories:E,currentAccountOwnerId:N,currentUserEmail:(W=k==null?void 0:k.email)!=null?W:null,layout:"condensed",showDivider:S!==0},Os(I))}),e[15]=N,e[16]=o,e[17]=x,e[18]=w,e[19]=f,e[20]=v,e[21]=j,e[22]=_,e[23]=g,e[24]=E,e[25]=k==null?void 0:k.email,e[26]=T):T=e[26];let R;e[27]!==T?(R=s.jsx("div",{className:"border-token-border-light min-h-0 flex-1 overflow-y-auto border-t pe-1",children:T}),e[27]=T,e[28]=R):R=e[28];let O;return e[29]!==R||e[30]!==A?(O=s.jsxs("div",{className:"border-token-border-light bg-token-bg-primary flex h-full max-h-[400px] min-h-0 flex-col overflow-hidden rounded-2xl border",children:[A,R]}),e[29]=R,e[30]=A,e[31]=O):O=e[31],O}function ka(t,e){return s.jsxs("div",{className:ne("flex items-center justify-between gap-3 px-4 py-3",e!==0&&"border-token-border-light border-t"),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(be,{className:"h-4 w-4 rounded"}),s.jsx(be,{className:"h-4 w-32"})]}),s.jsx(be,{className:"h-6 w-32 rounded-md"})]},"condensed-skeleton-".concat(e))}const ft=z(()=>U(()=>import("./lohbiwhanbrcni5j.js"),__vite__mapDeps([10,1])),{loading:t=>q(t)}),Ca=z(()=>U(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([12,1])),{loading:t=>q(t)}),Na=z(()=>U(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yu),__vite__mapDeps([2,1,3])),{loading:t=>q(t)}),Ea=[pe({id:"wham.codeReviewOnboardingModal.step.mfa",defaultMessage:"Set up multi-factor authentication"}),pe({id:"wham.codeReviewOnboardingModal.step.github",defaultMessage:"Connect to GitHub"}),pe({id:"wham.codeReviewOnboardingModal.step.configure",defaultMessage:"Configure code review"})];function ze(t){"use forget";const e=$.c(45),{onClose:a,onModalDismissed:d}=t,h=X();let c;e[0]!==a||e[1]!==d?(c=async G=>{await d(),a()},e[0]=a,e[1]=d,e[2]=c):c=e[2];const l=c,{isLoading:o,isMfaRequired:i,isMfaEnabled:r,isGitHubConnected:n,hasValidInstallation:m,isCodeReviewEnabled:p,openGithubModal:x,markCompletedCodeReview:v}=Ae({onError:()=>{g.danger(h.formatMessage({id:"wham.codeReviewOnboardingModal.errorToast",defaultMessage:"Failed to set up code review. Please try again."}),{id:"codex-code-review-onboarding-error",duration:5,hasCloseButton:!0}),l()}}),w=Y(),g=Et(w);let j;e[3]===Symbol.for("react.memo_cache_sentinel")?(j={redirectUrl:"/codex?codex_onboarding=code_review"},e[3]=j):j=e[3];const{setupMfa:_}=Ws(j),[k,f]=L.useState(!1),N=!!r,E=!!(n&&m),y=!!p;let u;e[4]!==N||e[5]!==E||e[6]!==y?(u={"wham.codeReviewOnboardingModal.step.mfa":N,"wham.codeReviewOnboardingModal.step.github":E,"wham.codeReviewOnboardingModal.step.configure":y},e[4]=N,e[5]=E,e[6]=y,e[7]=u):u=e[7];const b=u;let C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C=Xe("installations/select_target"),e[8]=C):C=e[8];const A=C;let T;e[9]!==m||e[10]!==n||e[11]!==o||e[12]!==b?(T=G=>o?s.jsx("span",{className:"border-token-border-heavy text-token-text-primary flex h-5 w-5 items-center justify-center rounded-full",children:s.jsx(ie,{className:"h-4 w-4"})}):G==="wham.codeReviewOnboardingModal.step.github"&&n&&!m?s.jsx("span",{className:"flex h-5 w-5 items-center justify-center rounded-full",children:s.jsx(ot,{percentage:50})}):b[G]?s.jsx("span",{className:"border-token-border-heavy bg-token-bg-success/40 text-token-text-primary flex h-5 w-5 items-center justify-center rounded-full border-2",children:s.jsx(Na,{className:"h-3 w-3"})}):s.jsx("span",{className:"border-token-border-heavy flex h-5 w-5 items-center justify-center rounded-full border-2"}),e[9]=m,e[10]=n,e[11]=o,e[12]=b,e[13]=T):T=e[13];const R=T;let O;e[14]!==l||e[15]!==v?(O=async()=>{await l(),v()},e[14]=l,e[15]=v,e[16]=O):O=e[16];const I=O;let S;e[17]!==w||e[18]!==l||e[19]!==m||e[20]!==p||e[21]!==n||e[22]!==o||e[23]!==r||e[24]!==x||e[25]!==_?(S=async()=>{if(!o){if(!r){_(),await l();return}if(!n){await l(),x();return}if(!m){await l(),ct(A,w,{includeQueryParamForRedirect:!0});return}if(!p){f(!0);return}await l()}},e[17]=w,e[18]=l,e[19]=m,e[20]=p,e[21]=n,e[22]=o,e[23]=r,e[24]=x,e[25]=_,e[26]=S):S=e[26];const W=S;let D;e[27]!==h?(D=h.formatMessage({id:"wham.codeReviewOnboardingModal.hiddenTitle",defaultMessage:" "}),e[27]=h,e[28]=D):D=e[28];const P=D,B=k?"max-w-[520px]":"max-w-[420px]";let H;e[29]!==B?(H=ne("w-full",B),e[29]=B,e[30]=H):H=e[30];let F;e[31]!==I||e[32]!==W||e[33]!==m||e[34]!==n||e[35]!==o||e[36]!==i||e[37]!==R||e[38]!==k?(F=k?s.jsx(Sa,{onComplete:I}):s.jsxs("div",{className:"flex flex-col gap-6 p-6 pt-0",children:[s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[s.jsx("div",{className:"rounded-xl border-[0.5px] p-2 shadow-sm",children:s.jsx(ft,{className:"icon h-8 w-8"})}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("h2",{className:"text-token-text-primary text-xxl font-semibold",children:s.jsx(M,{id:"wham.codeReviewOnboardingModal.title",defaultMessage:"Set up code review"})}),s.jsx("p",{className:"text-token-text-secondary text-sm leading-5",children:s.jsx(M,{id:"wham.codeReviewOnboardingModal.subtitle",defaultMessage:"Automatically review your pull requests with Codex"})})]})]}),s.jsx("div",{className:"border-token-border-light bg-token-bg-primary flex flex-col gap-3 rounded-2xl border p-4",children:Ea.map(G=>{if(G.id==="wham.codeReviewOnboardingModal.step.mfa"&&!i)return;const le=G.id==="wham.codeReviewOnboardingModal.step.github"&&!o&&n&&!m;return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:R(G.id)}),s.jsx("p",{className:"text-token-text-primary text-sm leading-5",children:s.jsx(M,Z({},G))}),le?s.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:s.jsx(M,{id:"wham.codeReviewOnboardingModal.step.github.inProgress",defaultMessage:"In-progress"})}):null]},G.id)})}),s.jsxs(Q,{color:"primary",fullWidth:!0,onClick:W,contentWrapperClassName:"gap-2",disabled:o,children:[s.jsx("span",{children:s.jsx(M,{id:"wham.codeReviewOnboardingModal.continue",defaultMessage:"Continue"})}),s.jsx(Ca,{className:"icon-sm"})]})]}),e[31]=I,e[32]=W,e[33]=m,e[34]=n,e[35]=o,e[36]=i,e[37]=R,e[38]=k,e[39]=F):F=e[39];let K;return e[40]!==l||e[41]!==P||e[42]!==H||e[43]!==F?(K=s.jsx(Je,{isOpen:!0,onClose:l,showCloseButton:!0,showOverlayBackground:!0,noPadding:!0,size:"custom",position:"center",className:H,testId:"modal-codex-code-review-onboarding",closeButtonClassName:"text-token-text-secondary hover:text-token-text-primary transition-colors",title:P,children:F}),e[40]=l,e[41]=P,e[42]=H,e[43]=F,e[44]=K):K=e[44],K}function Sa(t){"use forget";var j;const e=$.c(13),{onComplete:a}=t,{data:d,isLoading:h,isError:c}=ue();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={showToast:!0},e[0]=l):l=e[0];const{mutate:o,isPending:i}=Se(l),{data:r}=os();let n;e[1]!==(r==null?void 0:r.installations_without_events)?(n=(j=r==null?void 0:r.installations_without_events)!=null?j:[],e[1]=r==null?void 0:r.installations_without_events,e[2]=n):n=e[2];const m=n,p=h||c||!d;let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("div",{className:"bg-tertiary rounded-xl border-[0.5px] p-2 shadow-sm",children:s.jsx(ft,{className:"icon h-8 w-8"})}),e[3]=x):x=e[3];let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx("h2",{className:"text-token-text-primary text-xxl font-semibold",children:s.jsx(M,{id:"wham.codeReviewOnboardingModal.configure.title",defaultMessage:"Configure code review"})}),e[4]=v):v=e[4];let w;e[5]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[x,s.jsxs("div",{className:"flex flex-col gap-1",children:[v,s.jsx("p",{className:"text-token-text-secondary text-sm leading-5",children:s.jsx(M,{id:"wham.codeReviewOnboardingModal.configure.subtitle",defaultMessage:"Select which repositories and PRs will be reviewed by Codex"})})]})]}),e[5]=w):w=e[5];let g;return e[6]!==m||e[7]!==i||e[8]!==a||e[9]!==p||e[10]!==o||e[11]!==d?(g=s.jsxs("div",{className:"flex flex-col gap-6 p-6 pt-0",children:[w,p?s.jsx("div",{className:"flex flex-1 items-center justify-center",children:s.jsx(ie,{className:"h-9 w-9"})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-0 flex-1 pe-1",children:s.jsx(ya,{autoReviewPreference:d.code_review_preference,isAutoReviewPreferenceSaving:i,onAutoReviewPreferenceChange:_=>{o({codeReviewPreference:_})},disabledInstallations:m.map(Ma)})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-token-text-tertiary text-center text-xs leading-5",children:s.jsx(M,{id:"wham.codeReviewOnboardingModal.configure.footer",defaultMessage:"You can always change it in the settings"})}),s.jsx(Q,{color:"primary",fullWidth:!0,onClick:a,children:s.jsx(M,{id:"wham.codeReviewOnboardingModal.configure.done",defaultMessage:"Done"})})]})]})]}),e[6]=m,e[7]=i,e[8]=a,e[9]=p,e[10]=o,e[11]=d,e[12]=g):g=e[12],g}function Ma(t){return t.account_login}function Ra(t,{isCodeReviewOnboardingFlowEnabled:e,hasCompletedCodeReviewFlow:a,isHasCompletedCodeReviewLoading:d}){const h=L.useRef(null),c=L.useRef(!1),l=je(),o=ye(),i=St();L.useEffect(()=>{const n=new URLSearchParams(o.search).get(Te);if(!e||i||d||a){c.current&&(Mt(t,ze),c.current=!1);return}if(n!==ve){h.current=n;return}if(h.current===ve&&c.current===!0)return;h.current=n;let m=!1;const p=async()=>{if(m)return;m=!0;const x=aa(o.search);await l({pathname:o.pathname,search:x,hash:o.hash},{replace:!0})};c.current=!0,Rt(t,ze,{onModalDismissed:async()=>{await p()}})},[t,o.hash,o.pathname,o.search,l,e,a,d,i])}function yn(t){"use forget";const e=$.c(19),a=Y(),d=Tt(a),h=pa(a),c=At(a),l=bs();ys();let o,i;e[0]!==a?(o=()=>Pt(a).limitActionGroups([]),i=[a],e[0]=a,e[1]=o,e[2]=i):(o=e[1],i=e[2]),L.useEffect(o,i);const r=ee(a,"547652119"),n=V(Ta);if(!d){if(h){let N;return e[3]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(Kt,{}),e[3]=N):N=e[3],N}let f;return e[4]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(ce,{to:"/"}),e[4]=f):f=e[4],f}if(l==="DISABLED"&&(c==null?void 0:c.isWorkspacePlan())){let f;return e[5]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(ce,{to:"/codex/access",replace:!0}),e[5]=f):f=e[5],f}if(r){let f;return e[6]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(ce,{to:"/codex/failwhale"}),e[6]=f):f=e[6],f}if(l==="DISABLED"){let f;return e[7]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(ce,{to:"/",replace:!0}),e[7]=f):f=e[7],f}const p=_t,x=c==null?void 0:c.getWorkspaceId();let v;e[8]!==p||e[9]!==x?(v=s.jsx(p,{page:"codex"},x),e[8]=p,e[9]=x,e[10]=v):v=e[10];let w;e[11]!==n?(w=!1,e[11]=n,e[12]=w):w=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(Qt,{children:s.jsx(Yt,{hideNotificationBell:!0})}),e[13]=g):g=e[13];let j,_;e[14]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx(Gt,{mobileHeaderRightContent:null,children:s.jsxs("div",{className:"flex h-full flex-col",children:[g,s.jsx(Ot,{children:s.jsx(Aa,{})})]})}),_=s.jsx(Xt,{}),e[14]=j,e[15]=_):(j=e[14],_=e[15]);let k;return e[16]!==v||e[17]!==w?(k=s.jsxs(s.Fragment,{children:[v,w,j,_]}),e[16]=v,e[17]=w,e[18]=k):k=e[18],k}function Ta(t){return t.showReactQueryDevtools}function Aa(){"use forget";var I,S,W;const t=$.c(42),{homeTab:e}=et(),[a,d,h]=V(Pa),[c,l]=L.useState(!1),o=ye(),i=Y(),{composerController:r}=Ds(),n=L.useRef(!1),m=Ae();Ra(i,m),na(m);let p,x;t[0]!==i?(p=()=>{It(i).prefetchInfiniteQuery(is("archived"))},x=[i],t[0]=i,t[1]=p,t[2]=x):(p=t[1],x=t[2]),L.useEffect(p,x);let v;t[3]!==r||t[4]!==i||t[5]!==((I=o.state)==null?void 0:I.focusComposer)?(v=()=>{var P;const D=ee(i,"1406552515");(P=o.state)!=null&&P.focusComposer&&!n.current&&!D&&(Lt(ae(r)),n.current=!0)},t[3]=r,t[4]=i,t[5]=(S=o.state)==null?void 0:S.focusComposer,t[6]=v):v=t[6];const w=(W=o.state)==null?void 0:W.focusComposer;let g;t[7]!==r||t[8]!==i||t[9]!==w?(g=[w,r,i],t[7]=r,t[8]=i,t[9]=w,t[10]=g):g=t[10],L.useEffect(v,g);let j,_;t[11]!==r||t[12]!==i?(j=()=>{const D=ee(i,"1406552515");Fe(ae(r),D?"":V.getState().promptDraft)},_=[r,i],t[11]=r,t[12]=i,t[13]=j,t[14]=_):(j=t[13],_=t[14]),L.useEffect(j,_);let k,f;t[15]!==r||t[16]!==a?(k=()=>{const D=Wt(P=>{a(Bt(P.doc)?"":Dt(P.doc).content)},1e3);return Ft(()=>Ht(r),D)},f=[r,a],t[15]=r,t[16]=a,t[17]=k,t[18]=f):(k=t[17],f=t[18]),L.useEffect(k,f);let N,E;t[19]!==r||t[20]!==o.search?(E=()=>{const P=new URLSearchParams(o.search).get("prompt");P&&Fe(ae(r),P)},N=[o.search,r],t[19]=r,t[20]=o.search,t[21]=N,t[22]=E):(N=t[21],E=t[22]),L.useEffect(E,N);const{data:y}=rs();let u,b;t[23]!==y||t[24]!==o.search||t[25]!==d?(u=()=>{const P=new URLSearchParams(o.search).get("environment");P&&(y!=null&&y.some(B=>B.id===P))&&d(P)},b=[o.search,y,d],t[23]=y,t[24]=o.search,t[25]=d,t[26]=u,t[27]=b):(u=t[26],b=t[27]),L.useEffect(u,b);let C,A;t[28]!==o.search||t[29]!==h?(C=()=>{const P=new URLSearchParams(o.search).get("branch");P&&h(P)},A=[o.search,h],t[28]=o.search,t[29]=h,t[30]=C,t[31]=A):(C=t[30],A=t[31]),L.useEffect(C,A);let T;t[32]!==r||t[33]!==e||t[34]!==a?(T=s.jsx(qt,{children:s.jsx(Oa,{setPromptDraft:a,setShowCreateEnvModal:l,composerController:r,homeTab:e})}),t[32]=r,t[33]=e,t[34]=a,t[35]=T):T=t[35];let R;t[36]!==c?(R=c&&s.jsx(wa,{isOpen:c,onClose:()=>l(!1)}),t[36]=c,t[37]=R):R=t[37];let O;return t[38]!==r||t[39]!==T||t[40]!==R?(O=s.jsxs(Vt,{value:r,children:[T,R]}),t[38]=r,t[39]=T,t[40]=R,t[41]=O):O=t[41],O}function Pa(t){return[t.setPromptDraft,t.setEnvironmentId,t.setBranch]}function Oa(t){"use forget";const e=$.c(21),{state:a}=$t(),[d,h]=L.useState(!0);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=n=>{const m=()=>{h(n.scrollTop===0)};return n.addEventListener("scroll",m),m(),()=>n.removeEventListener("scroll",m)},e[0]=c):c=e[0];const l=c,o=V(Ia),[i]=L.useState(!!o),r=d&&o==null;switch(a){case J.Error:case J.Complete:{let n;return e[1]!==r||e[2]!==i||e[3]!==t?(n=s.jsx(qe,te(Z({},t),{scrollRef:l,defaultExpanded:r,hasLastViewTaskIdOnMount:i})),e[1]=r,e[2]=i,e[3]=t,e[4]=n):n=e[4],n}case J.NoGithubConnection:{let n;return e[5]!==r||e[6]!==i||e[7]!==t?(n=s.jsx(Da,te(Z({},t),{scrollRef:l,defaultExpanded:r,hasLastViewTaskIdOnMount:i})),e[5]=r,e[6]=i,e[7]=t,e[8]=n):n=e[8],n}case J.NoEnvironmentsCreated:{let n;return e[9]!==r||e[10]!==i||e[11]!==t?(n=s.jsx(Ba,te(Z({},t),{scrollRef:l,defaultExpanded:r,hasLastViewTaskIdOnMount:i})),e[9]=r,e[10]=i,e[11]=t,e[12]=n):n=e[12],n}case J.NoTasksCreated:{let n;return e[13]!==r||e[14]!==i||e[15]!==t?(n=s.jsx(Va,te(Z({},t),{scrollRef:l,defaultExpanded:r,hasLastViewTaskIdOnMount:i})),e[13]=r,e[14]=i,e[15]=t,e[16]=n):n=e[16],n}case J.Loading:{let n;return e[17]!==r||e[18]!==i||e[19]!==t?(n=s.jsx(qe,te(Z({},t),{scrollRef:l,defaultExpanded:r,hasLastViewTaskIdOnMount:i})),e[17]=r,e[18]=i,e[19]=t,e[20]=n):n=e[20],n}}}function Ia(t){return t.lastViewedTaskId}function qe(t){"use forget";const e=$.c(31),{scrollRef:a,hasLastViewTaskIdOnMount:d,defaultExpanded:h,setPromptDraft:c,setShowCreateEnvModal:l,composerController:o,homeTab:i}=t,r=Y();let n;e[0]!==r?(n=ee(r,"1406552515"),e[0]=r,e[1]=n):n=e[1];const m=n;let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p={scrollbarGutter:"stable"},e[2]=p):p=e[2];let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(xe,{}),e[3]=x):x=e[3];let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(M,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[4]=v):v=e[4];const w=d||m,g=h?!0:void 0,j=!m;let _;e[5]!==o||e[6]!==c?(_=()=>{Ce(ae(o)),c("")},e[5]=o,e[6]=c,e[7]=_):_=e[7];let k;e[8]!==l?(k=()=>l(!0),e[8]=l,e[9]=k):k=e[9];let f;e[10]!==w||e[11]!==g||e[12]!==j||e[13]!==_||e[14]!==k?(f=s.jsx(Ne,{disableAutoFocus:w,expanded:g,isBigBoxMode:j,onSubmit:_,onSuccess:La,onCreateEnvironment:k}),e[10]=w,e[11]=g,e[12]=j,e[13]=_,e[14]=k,e[15]=f):f=e[15];let N;e[16]!==m||e[17]!==f?(N=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(dt,{disabled:m,children:f})}),e[16]=m,e[17]=f,e[18]=N):N=e[18];let E,y;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(he,{}),y=s.jsx(Me,{}),e[19]=E,e[20]=y):(E=e[19],y=e[20]);let u;e[21]!==N?(u=s.jsxs("div",{className:"bg-token-bg-primary sticky top-0 z-50 flex flex-col items-center",children:[v,N,E,y]}),e[21]=N,e[22]=u):u=e[22];let b;e[23]!==i?(b=s.jsx(Re,{homeTab:i}),e[23]=i,e[24]=b):b=e[24];let C;e[25]!==u||e[26]!==b?(C=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[x,u,b]}),e[25]=u,e[26]=b,e[27]=C):C=e[27];let A;return e[28]!==a||e[29]!==C?(A=s.jsx("div",{className:"h-full w-full overflow-y-auto",ref:a,style:p,children:C}),e[28]=a,e[29]=C,e[30]=A):A=e[30],A}function La(){Ee.set(Wa)}function Wa(t){return t+1}function Da(t){"use forget";const e=$.c(15),{scrollRef:a,setShowCreateEnvModal:d}=t;let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={scrollbarGutter:"stable"},e[0]=h):h=e[0];let c;e[1]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(xe,{}),e[1]=c):c=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(M,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[2]=l):l=e[2];let o;e[3]!==d?(o=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(Vs,{isGitHubConnected:!1,onClickCreateEnvironment:()=>d(!0)})}),e[3]=d,e[4]=o):o=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(he,{}),e[5]=i):i=e[5];let r;e[6]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("div",{className:"w-full px-3 md:px-0",children:s.jsx("div",{className:"text-token-text-primary ps-1 pt-6 pb-4 text-sm font-medium",children:s.jsx(M,{id:"wham.samples.title",defaultMessage:"Examples of what Codex can do"})})}),e[6]=r):r=e[6];let n;e[7]!==o?(n=s.jsxs("div",{className:"bg-token-bg-primary sticky top-0 z-50 flex flex-col items-center",children:[l,o,i,r]}),e[7]=o,e[8]=n):n=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("div",{className:"w-full px-3 md:px-0",children:s.jsx($s,{})}),e[9]=m):m=e[9];let p;e[10]!==n?(p=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[c,n,m]}),e[10]=n,e[11]=p):p=e[11];let x;return e[12]!==a||e[13]!==p?(x=s.jsx("div",{className:"h-full w-full overflow-y-auto",ref:a,style:h,children:p}),e[12]=a,e[13]=p,e[14]=x):x=e[14],x}function Ba(t){"use forget";const e=$.c(28),{scrollRef:a,hasLastViewTaskIdOnMount:d,defaultExpanded:h,setPromptDraft:c,composerController:l,setShowCreateEnvModal:o,homeTab:i}=t,r=Y();let n;e[0]!==r?(n=ee(r,"1406552515"),e[0]=r,e[1]=n):n=e[1];const m=n;let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p={scrollbarGutter:"stable"},e[2]=p):p=e[2];let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(xe,{}),e[3]=x):x=e[3];let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(M,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[4]=v):v=e[4];const w=d||m,g=h?!0:void 0,j=!m;let _;e[5]!==l||e[6]!==c?(_=()=>{Ce(ae(l)),c("")},e[5]=l,e[6]=c,e[7]=_):_=e[7];let k;e[8]!==o?(k=()=>o(!0),e[8]=o,e[9]=k):k=e[9];let f;e[10]!==w||e[11]!==g||e[12]!==j||e[13]!==_||e[14]!==k?(f=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(Ne,{disableAutoFocus:w,expanded:g,isBigBoxMode:j,onSubmit:_,onSuccess:Fa,onCreateEnvironment:k})}),e[10]=w,e[11]=g,e[12]=j,e[13]=_,e[14]=k,e[15]=f):f=e[15];let N,E;e[16]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(he,{}),E=s.jsx(Me,{}),e[16]=N,e[17]=E):(N=e[16],E=e[17]);let y;e[18]!==f?(y=s.jsxs("div",{className:"bg-token-bg-primary sticky top-0 z-50 flex flex-col items-center",children:[v,f,N,E]}),e[18]=f,e[19]=y):y=e[19];let u;e[20]!==i?(u=s.jsx(Re,{homeTab:i}),e[20]=i,e[21]=u):u=e[21];let b;e[22]!==y||e[23]!==u?(b=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[x,y,u]}),e[22]=y,e[23]=u,e[24]=b):b=e[24];let C;return e[25]!==a||e[26]!==b?(C=s.jsx("div",{className:"h-full w-full overflow-y-auto",ref:a,style:p,children:b}),e[25]=a,e[26]=b,e[27]=C):C=e[27],C}function Fa(){Ee.set(Ha)}function Ha(t){return t+1}function Va(t){"use forget";const e=$.c(31),{scrollRef:a,hasLastViewTaskIdOnMount:d,defaultExpanded:h,setPromptDraft:c,setShowCreateEnvModal:l,composerController:o,homeTab:i}=t,r=Y();let n;e[0]!==r?(n=ee(r,"1406552515"),e[0]=r,e[1]=n):n=e[1];const m=n;let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p={scrollbarGutter:"stable"},e[2]=p):p=e[2];let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(xe,{}),e[3]=x):x=e[3];let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx("h1",{className:"mb-4 pt-4 text-3xl font-normal 2xl:mb-8 2xl:pt-8 2xl:text-3xl [@media(max-height:550px)]:hidden",children:s.jsx(M,{id:"wham.home.title",defaultMessage:"What should we code next?"})}),e[4]=v):v=e[4];const w=d||m,g=h?!0:void 0,j=!m;let _;e[5]!==o||e[6]!==c?(_=()=>{Ce(ae(o)),c("")},e[5]=o,e[6]=c,e[7]=_):_=e[7];let k;e[8]!==l?(k=()=>l(!0),e[8]=l,e[9]=k):k=e[9];let f;e[10]!==w||e[11]!==g||e[12]!==j||e[13]!==_||e[14]!==k?(f=s.jsx(Ne,{disableAutoFocus:w,expanded:g,isBigBoxMode:j,onSubmit:_,onSuccess:Ga,onCreateEnvironment:k}),e[10]=w,e[11]=g,e[12]=j,e[13]=_,e[14]=k,e[15]=f):f=e[15];let N;e[16]!==m||e[17]!==f?(N=s.jsx("div",{className:"w-full pt-px max-md:px-3",children:s.jsx(dt,{disabled:m,children:f})}),e[16]=m,e[17]=f,e[18]=N):N=e[18];let E,y;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(he,{}),y=s.jsx(Me,{}),e[19]=E,e[20]=y):(E=e[19],y=e[20]);let u;e[21]!==N?(u=s.jsxs("div",{className:"bg-token-bg-primary sticky top-0 z-50 flex flex-col items-center",children:[v,N,E,y]}),e[21]=N,e[22]=u):u=e[22];let b;e[23]!==i?(b=s.jsx("div",{className:"w-full",children:s.jsx(Re,{homeTab:i})}),e[23]=i,e[24]=b):b=e[24];let C;e[25]!==u||e[26]!==b?(C=s.jsxs("div",{className:"z-0 mx-auto flex w-full flex-col md:w-3xl",children:[x,u,b]}),e[25]=u,e[26]=b,e[27]=C):C=e[27];let A;return e[28]!==a||e[29]!==C?(A=s.jsx("div",{className:"h-full w-full overflow-y-auto",ref:a,style:p,children:C}),e[28]=a,e[29]=C,e[30]=A):A=e[30],A}function Ga(){Ee.set(Ua)}function Ua(t){return t+1}export{yn as W};
//# sourceMappingURL=5blneit3xrdsba3s.js.map
