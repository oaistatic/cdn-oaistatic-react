import{b as c,r as p,j as t}from"./kfrdmkli83ureki3.js";import{hr as f,aC as w,e6 as m,R as h,eX as x,hn as y,ho as L}from"./kw08ajijqinojrwh.js";function F({gizmoId:a,fileId:n,fileName:o,onClose:r}){const{data:e,isLoading:l}=c({queryKey:["file-info",n],queryFn:async()=>await h.safeGet("/files/{file_id}/simple",{parameters:{path:{file_id:n},query:{gizmo_id:a}}})}),i=!!(e&&(e.mime_type==="application/pdf"||f(o)==="pdf")),{data:s,isLoading:u}=c({queryKey:["file-preview",n,a,i],queryFn:async()=>{const d=await y(n,a,!1,void 0,i);if(d.status===L.Success)return d.download_url;throw new Error("Failed to download file inline preview")},staleTime:x,enabled:!!e});return p.useEffect(()=>{l||u||e&&!i&&s&&(window.open(s,"_blank"),r())},[e,s,i,r,l,u]),t.jsx(w,{testId:"modal-file-preview",className:"min-h-[90vh] max-w-[75vw] max-w-[1000px]",isOpen:!0,onClose:r,type:"success",title:o,showCloseButton:!0,size:"custom",children:l||u||!i||!s?t.jsx("div",{className:"flex h-full w-full items-center justify-center",children:t.jsx(m,{})}):t.jsx("iframe",{src:s,title:o,height:"100%",width:"100%"})})}export{F as FilePreviewModal};
//# sourceMappingURL=fwijeax9pw5s8qxf.js.map
