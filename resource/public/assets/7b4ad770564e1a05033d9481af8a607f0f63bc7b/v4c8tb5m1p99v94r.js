const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ch25v6qwrkxmelev.js","assets/kfrdmkli83ureki3.js"])))=>i.map(i=>d[i]);
import{c as le,h as ne,r as K,j as s,_ as me}from"./kfrdmkli83ureki3.js";import{p as pe,ek as de,az as ce,db as oe,aC as fe,aA as ue}from"./kw08ajijqinojrwh.js";import{dT as xe,al as X,ak as ge,x as he}from"./fyw02vlaiv2vq6cj.js";import{a as Me}from"./czndp739wd893pq6.js";import{a as ye}from"./nwibjndtxi61x1ys.js";import"./kxbocgn3s27tp480.js";import"./he1xnididjbc7s63.js";import"./i85urdvpkzpdgj3s.js";import"./dd8hh2tmra1psngf.js";import"./eix6aku103dkp2pu.js";import"./kl7c6054usfnqmd4.js";import"./k97n0y6ba9c9h39c.js";import"./fbdmxe5ygbrc3wdb.js";import"./evkgh503atu6x10z.js";import"./ej5er9569li42hai.js";import"./di3v2n4zwp3e4rpb.js";import"./oze22otsepdfaut5.js";import"./ds50f4rqnruk5v5l.js";import"./lbp124td1jxnga57.js";import"./o5h7u1aikohecbkt.js";import"./w4rmhhxvug61xnae.js";import"./batn8nst470a68ib.js";import"./h9s5uo8l29l5vali.js";import"./l3foo5601l7fb51e.js";import"./ite26mmpefwubzx4.js";import"./m9gq49u2vlb0cjyx.js";import"./lg0oi3tmjv8kv2p4.js";import"./b3ungmqo5x8kj4fh.js";import"./iej0cupg2dqkmejt.js";import"./m0t07ixd92668z9e.js";import"./chg5zn7ivsidhse5.js";import"./kime2kclye4c7vau.js";import"./fwbhrttgqnv5nm9m.js";import"./je694u6n7mxuffnb.js";import"./n2s0r84m09p3py2c.js";import"./n922q9or6yevfxth.js";import"./bw2hxknbjlgs6x5v.js";import"./m8odo3cter5gjanw.js";import"./g8cpkydknwwj989v.js";import"./c7lf6x6u521mpx19.js";import"./oi4hajb4q474so2h.js";import"./c80q12olrn2ogvv0.js";import"./0cct8y3c72h08jxe.js";import"./jzy8ngygygw4toi1.js";import"./k9adsjcuzq0lnday.js";import"./ntv4kfm86o2gt0x7.js";import"./h6futagqzt0rqhdy.js";import"./hoo89wr86agqpm13.js";import"./m3joncw451cqbul2.js";import"./gy1lpvuoewmzh42c.js";import"./ipjj058rvhjq2uu2.js";import"./h1em0bjkpkjv8ykw.js";import"./kbj1b07s2z6vxqkg.js";import"./hu1bt0oauegdhua6.js";import"./i7t1qh3u8s8bvtb8.js";import"./dm8z7bzkrzic0zmg.js";import"./omiotqovl1sezy3l.js";import"./jytll2j00h0ccmpk.js";import"./f9iz92mggx1znv92.js";import"./lfpgz10qy2vdux3v.js";import"./lrftmyomhnslqldf.js";import"./i5i93v71imxwxy0p.js";import"./f5eqpw3ad13u4igj.js";import"./i1ra53nm6ph961wx.js";import"./fvx0c589t5tar1s6.js";import"./f57a0ks1c1m6smzf.js";import"./bx1w0y3fzlo97jzb.js";import"./laacu28tqafsw8cp.js";import"./ld3p92an6gaqvnu0.js";import"./hmqienma2a871fjd.js";const Ce=ce(()=>me(()=>import("./ch25v6qwrkxmelev.js"),__vite__mapDeps([0,1])),{loading:P=>ue(P)});function Pt(P){"use forget";const e=le.c(90),{onClose:m,sessionId:p,secret:a,email:ee,onActivated:L,onCancelled:Q}=P,te=ee===void 0?"":ee,t=ne(),i=pe(),d=Me(),[r,ae]=K.useState(""),[n,W]=K.useState(null);let U;e[0]===Symbol.for("react.memo_cache_sentinel")?(U=de(),e[0]=U):U=e[0];const[l,re]=K.useState(U),[Y,se]=K.useState(!1);let V;e[1]===Symbol.for("react.memo_cache_sentinel")?(V=()=>{se(!0),setTimeout(()=>se(!1),2e3)},e[1]=V):V=e[1];const Z=V;let $;e[2]!==Q||e[3]!==m?($=()=>{Q&&Q(),m()},e[2]=Q,e[3]=m,e[4]=$):$=e[4];const c=$;let H;e:{if(!a){H="";break e}const o=encodeURIComponent(te?"OpenAI:".concat(te):"OpenAI");let D,G;if(e[5]!==o||e[6]!==a){const ie=new URLSearchParams({secret:a,issuer:"OpenAI"});D=o,G=ie.toString(),e[5]=o,e[6]=a,e[7]=D,e[8]=G}else D=e[7],G=e[8];H="otpauth://totp/".concat(D,"?").concat(G)}const q=H;let F;e[9]!==d||e[10]!==r||e[11]!==t||e[12]!==L||e[13]!==m||e[14]!==p||e[15]!==i?(F=async()=>{try{W(null),await d.mutateAsync({factor:"totp",code:r.trim(),sessionId:p}),i.success(t.formatMessage({id:"CGNzQD",defaultMessage:"Authenticator app enabled"}),{testId:"totp-mfa-activation-success"}),L&&L(),m()}catch(o){const D=o;W(t.formatMessage(ye(D)))}},e[9]=d,e[10]=r,e[11]=t,e[12]=L,e[13]=m,e[14]=p,e[15]=i,e[16]=F):F=e[16];const f=F;let u;e[17]!==t?(u=t.formatMessage({id:"hvzmYC",defaultMessage:"Connect your authenticator app"}),e[17]=t,e[18]=u):u=e[18];let x;e[19]!==u?(x=s.jsx("span",{className:"text-heading-3",children:u}),e[19]=u,e[20]=x):x=e[20];let g;e[21]!==t?(g=t.formatMessage({id:"nqOq3M",defaultMessage:"Verify"}),e[21]=t,e[22]=g):g=e[22];let h;e[23]!==d||e[24]!==r||e[25]!==p?(h=r.trim().length!==6||!p||d.isPending,e[23]=d,e[24]=r,e[25]=p,e[26]=h):h=e[26];let M;e[27]!==f||e[28]!==h||e[29]!==g?(M=s.jsx(oe.Button,{title:g,color:"primary",disabled:h,onClick:f}),e[27]=f,e[28]=h,e[29]=g,e[30]=M):M=e[30];let y;e[31]!==t?(y=t.formatMessage({id:"JEMdlA",defaultMessage:"Cancel"}),e[31]=t,e[32]=y):y=e[32];let C;e[33]!==c||e[34]!==y?(C=s.jsx(oe.Button,{title:y,color:"secondary",onClick:c}),e[33]=c,e[34]=y,e[35]=C):C=e[35];let b;e[36]!==t?(b=t.formatMessage({id:"JUk2xI",defaultMessage:"Step 1:"}),e[36]=t,e[37]=b):b=e[37];let j;e[38]!==b?(j=s.jsx("span",{className:"me-1 font-semibold",children:b}),e[38]=b,e[39]=j):j=e[39];let v;e[40]!==t||e[41]!==l?(v=l?t.formatMessage({id:"cmQdj3",defaultMessage:"Enter the secret code below in your authenticator app, then enter the 6-digit code from the app."}):t.formatMessage({id:"NAp5hF",defaultMessage:"Scan the QR code using your authenticator app, then enter the 6-digit code from the app."}),e[40]=t,e[41]=l,e[42]=v):v=e[42];let N;e[43]!==j||e[44]!==v?(N=s.jsxs("div",{className:"text-token-text-primary text-sm",children:[j,v]}),e[43]=j,e[44]=v,e[45]=N):N=e[45];let S;e[46]!==Y||e[47]!==t||e[48]!==q||e[49]!==a||e[50]!==l||e[51]!==i?(S=a&&s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"border-token-border-light rounded-2xl border p-5",children:s.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[!l&&q?s.jsx(xe,{value:q,size:180,includeMargin:!0}):null,l&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-token-border-light cursor-pointer rounded-md border px-3 py-2 font-mono text-base select-text",onClick:o=>{X(a,i,o).then(()=>{Z()})},role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),X(a,i,o).then(()=>{Z()}))},"aria-label":t.formatMessage({id:"j/bzO/",defaultMessage:"Copy code"}),title:t.formatMessage({id:"2gRO6C",defaultMessage:"Copy code"}),children:a}),s.jsx(ge,{shouldChangeText:!1,buttonText:Y?t.formatMessage({id:"seLOsT",defaultMessage:"Copied"}):t.formatMessage({id:"v3Cpi4",defaultMessage:"Copy code"}),onCopy:o=>{X(a,i,o).then(()=>{Z()})},className:"text-sm"})]}),s.jsx("button",{type:"button",className:"text-blue-400",onClick:()=>re(be),children:l?t.formatMessage({id:"yhrWS1",defaultMessage:"Show QR code instead"}):t.formatMessage({id:"Zqkdz9",defaultMessage:"Trouble scanning?"})})]})})}),e[46]=Y,e[47]=t,e[48]=q,e[49]=a,e[50]=l,e[51]=i,e[52]=S):S=e[52];let k;e[53]!==t?(k=t.formatMessage({id:"OtuOes",defaultMessage:"Step 2:"}),e[53]=t,e[54]=k):k=e[54];let I;e[55]!==k?(I=s.jsx("span",{className:"me-1 font-semibold",children:k}),e[55]=k,e[56]=I):I=e[56];let E;e[57]!==t?(E=t.formatMessage({id:"VyVwRC",defaultMessage:"Enter your 6-digit code"}),e[57]=t,e[58]=E):E=e[58];let w;e[59]!==I||e[60]!==E?(w=s.jsxs("div",{className:"text-token-text-primary mt-2 text-sm",children:[I,E]}),e[59]=I,e[60]=E,e[61]=w):w=e[61];let A;e[62]!==f?(A=o=>{o.preventDefault(),f()},e[62]=f,e[63]=A):A=e[63];let T;e[64]!==t?(T=t.formatMessage({id:"f3B3Ii",defaultMessage:"Enter your 6-digit code"}),e[64]=t,e[65]=T):T=e[65];let O;e[66]!==n?(O=o=>{ae(o.target.value),n&&W(null)},e[66]=n,e[67]=O):O=e[67];let R;e[68]!==r||e[69]!==T||e[70]!==O?(R=s.jsx(he,{className:"w-full max-w-md",ariaLabel:!1,name:"totp_otp",placeholder:T,value:r,onChange:O}),e[68]=r,e[69]=T,e[70]=O,e[71]=R):R=e[71];let _;e[72]!==A||e[73]!==R?(_=s.jsx("form",{onSubmit:A,className:"flex w-full justify-start",children:R}),e[72]=A,e[73]=R,e[74]=_):_=e[74];let z;e[75]!==n||e[76]!==t?(z=n&&s.jsxs("p",{className:"flex gap-1 text-xs text-red-500",children:[s.jsx(Ce,{title:t.formatMessage({id:"totp.errorIcon",defaultMessage:"Error"})}),n]}),e[75]=n,e[76]=t,e[77]=z):z=e[77];let B;e[78]!==N||e[79]!==S||e[80]!==w||e[81]!==_||e[82]!==z?(B=s.jsx("div",{className:"text-token-text-primary self-stretch text-sm",children:s.jsxs("div",{className:"flex flex-col items-start gap-[16px] self-stretch",children:[N,S,w,_,z]})}),e[78]=N,e[79]=S,e[80]=w,e[81]=_,e[82]=z,e[83]=B):B=e[83];let J;return e[84]!==c||e[85]!==M||e[86]!==C||e[87]!==B||e[88]!==x?(J=s.jsx(fe,{testId:"modal-enroll-totp",noPadding:!0,contentClassName:"flex flex-col items-start gap-[16px] p-[24px]",headerClassName:"!px-6 !py-0 !h-[76px] !items-center",shouldIgnoreClickOutside:!0,showCloseButton:!0,hasSeparator:!0,isOpen:!0,onClose:c,type:"success",title:x,primaryButton:M,secondaryButton:C,children:B}),e[84]=c,e[85]=M,e[86]=C,e[87]=B,e[88]=x,e[89]=J):J=e[89],J}function be(P){return!P}export{Pt as EnrollTotpModal};
//# sourceMappingURL=v4c8tb5m1p99v94r.js.map
