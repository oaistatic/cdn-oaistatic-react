const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dnpenovn9ku8sbs2.js","assets/kfrdmkli83ureki3.js","assets/fyw02vlaiv2vq6cj.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css"])))=>i.map(i=>d[i]);
var ft=Object.defineProperty,pt=Object.defineProperties;var ut=Object.getOwnPropertyDescriptors;var Ze=Object.getOwnPropertySymbols;var ht=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable;var Je=(l,e,o)=>e in l?ft(l,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[e]=o,P=(l,e)=>{for(var o in e||(e={}))ht.call(e,o)&&Je(l,o,e[o]);if(Ze)for(var o of Ze(e))xt.call(e,o)&&Je(l,o,e[o]);return l},Ie=(l,e)=>pt(l,ut(e));import{h as Pe,u as He,i as gt,j as t,M as u,c as _t,r as v,_ as et}from"./kfrdmkli83ureki3.js";import{p as tt,_ as te,R as bt,aC as st,aB as H,dg as jt,u as yt,d as wt,dT as vt,q6 as Mt,q7 as kt,az as at,eG as k,l2 as Nt,cB as Ct,fx as ee,q8 as Tt,er as Et,a6 as Re,dQ as St,br as It,kT as Rt,aA as lt}from"./kw08ajijqinojrwh.js";import{gB as ot,x as Ot,bO as At}from"./fyw02vlaiv2vq6cj.js";import{C as Dt}from"./hk5ml9l4i4ups2ga.js";import"./fwbhrttgqnv5nm9m.js";import"./o5h7u1aikohecbkt.js";import"./w4rmhhxvug61xnae.js";import"./lg0oi3tmjv8kv2p4.js";import"./b3ungmqo5x8kj4fh.js";import"./nh6x5pasrftsddpw.js";import"./c7lf6x6u521mpx19.js";const Wt=({onClose:l,promptId:e,promptTitle:o,promptSystemHint:s,promptSources:p})=>{const m=Pe(),b=tt(),d=He(),{mutate:n,isPending:h}=gt({mutationFn:i=>bt.safeDelete("/templated_prompts/{prompt_id}",{parameters:{path:{prompt_id:i}}}),onError:()=>{b.danger(m.formatMessage({id:"gYG9AO",defaultMessage:"Failed to delete prompt"}))},onSuccess:()=>{var i,y;te.logEventWithStatsig("chatgpt_web_prompt_deleted","chatgpt_web_prompt_deleted",{hint:s!=null?s:"none",hasSources:((i=p==null?void 0:p.length)!=null?i:0)>0,sources:p!=null?p:"",sourceCount:(y=p==null?void 0:p.length)!=null?y:0}),l(!1),b.success(m.formatMessage({id:"cptqwY",defaultMessage:"{promptTitle} was deleted"},{promptTitle:o})),d.invalidateQueries({queryKey:["prompt-templates"],exact:!1})}});return t.jsx(st,{isOpen:!0,onClose:()=>l(!1),title:m.formatMessage({id:"rGrRdA",defaultMessage:"Delete {promptTitle}?"},{promptTitle:o}),testId:"modal-delete-prompt",type:"danger",size:"custom",className:"max-w-[400px] p-2",children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"ODmsWc",defaultMessage:"This cannot be undone."})}),t.jsxs("div",{className:"flex flex-row justify-end gap-2",children:[t.jsx(H,{color:"secondary",onClick:()=>l(!1),children:t.jsx(u,P({},jt.cancelButtonText))}),t.jsx(H,{color:"danger",disabled:h,loading:h,onClick:()=>n(e),children:t.jsx(u,{id:"x3h5Nl",defaultMessage:"Delete"})})]})]})})},Lt=at(()=>et(()=>import("./dnpenovn9ku8sbs2.js"),__vite__mapDeps([0,1])),{loading:l=>lt(l)}),qt=at(()=>et(()=>import("./fyw02vlaiv2vq6cj.js").then(l=>l.zF),__vite__mapDeps([2,1,3,4,5])),{loading:l=>lt(l)}),Ft=new Set(["github_sync_connector","github_connector"]),Bt={display:"inline",position:"relative",color:"#2F7CF5",borderRadius:"2px",paddingInline:0,paddingBlock:0,lineHeight:"1rem",boxShadow:"0 0 0 2px rgba(47, 124, 245, 0.10)",backgroundColor:"rgba(47, 124, 245, 0.10)",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},zt=({activeSystemHint:l,selectedSources:e,setSelectedSources:o,selectedMCPSources:s,setSelectedMCPSources:p})=>{const m=n=>{ee(n)?p(new Set([...s,n])):o(new Set([...e,n]))},b=n=>{ee(n)?p(new Set([...s].filter(h=>h!==n))):o(new Set([...e].filter(h=>h!==n)))},d=n=>{if(ee(n)){const i=new Set(s);i.has(n)?i.delete(n):i.add(n),p(i);return}const h=new Set(e);h.has(n)?h.delete(n):h.add(n),o(h)};return t.jsx(Dt,{clientThreadId:Rt,activeSystemHint:l,selectedSources:e,selectedMCPSources:s,addSource:m,deleteSource:b,toggleSource:d,connectedOnly:!0,hiddenTypes:Ft,hideMcpConnectors:!0})},Gt=l=>{const e=[];let o=0;return l.replace(Tt,(s,p,m)=>(m>o&&e.push(t.jsx("span",{children:l.slice(o,m)},"txt-".concat(m))),e.push(t.jsx("span",{style:Bt,children:s},"var-".concat(m))),o=m+s.length,s)),o<l.length&&e.push(t.jsx("span",{children:l.slice(o)},"tail-".concat(o))),e};function ds(l){"use forget";var qe,Fe,Be,ze,Ge,Ue,Ye,Ke,Qe,$e,Ve;const e=_t.c(126),{onClose:o,prompt:s,referer:p}=l,m=p===void 0?"none":p,b=yt(),d=Pe(),n=tt();let h;e[0]!==b?(h=()=>Et(b),e[0]=b,e[1]=h):h=e[1];const i=wt(h),y=He(),c=vt();let se;e[2]!==y?(se=r=>{y.setQueriesData({queryKey:["prompt-templates"],exact:!1},f=>{if(!f||f.pages.length===0)return f;const[x,...J]=f.pages,Xe=r.id===void 0||r.id==null?null:String(r.id),ct=Xe==null?x.prompts:x.prompts.filter(Se=>Se.id===void 0||Se.id==null?!0:String(Se.id)!==Xe),mt=[r,...ct];return Ie(P({},f),{pages:[Ie(P({},x),{prompts:mt}),...J]})})},e[2]=y,e[3]=se):se=e[3];const Me=se,N=!!(s!=null&&s.id),[ae,rt]=v.useState(!1),[M,nt]=v.useState((qe=s==null?void 0:s.name)!=null?qe:""),[j,dt]=v.useState((Fe=s==null?void 0:s.prompt)!=null?Fe:"");let le;e[4]!==(s==null?void 0:s.sources)?(le=new Set((ze=(Be=s==null?void 0:s.sources)==null?void 0:Be.filter(Xt))!=null?ze:[]),e[4]=s==null?void 0:s.sources,e[5]=le):le=e[5];const[g,Oe]=v.useState(le);let oe;e[6]!==(s==null?void 0:s.sources)?(oe=new Set((Ue=(Ge=s==null?void 0:s.sources)==null?void 0:Ge.filter(Vt))!=null?Ue:[]),e[6]=s==null?void 0:s.sources,e[7]=oe):oe=e[7];const[_,Ae]=v.useState(oe),[w,De]=v.useState((Ye=s==null?void 0:s.system_hint)!=null?Ye:null),[C,it]=v.useState(!!((Ke=s==null?void 0:s.shared_to_workspace)!=null?Ke:c!=null&&c.getWorkspaceId())),re=v.useRef(null);let ne;e[8]!==w||e[9]!==i?(ne=w&&(i==null?void 0:i.find(r=>r.systemHint===w)),e[8]=w,e[9]=i,e[10]=ne):ne=e[10];const a=ne;let de;e[11]!==(a==null?void 0:a.systemHint)||e[12]!==d||e[13]!==o||e[14]!==Me||e[15]!==m||e[16]!==_||e[17]!==g||e[18]!==n?(de={onError:$t,onSuccess:r=>{var x;n.success(d.formatMessage({id:"CexTPp",defaultMessage:"Prompt created"}));const f=[...g,..._].filter(J=>(a==null?void 0:a.systemHint)===Re.Research?!0:J!=="web");te.logEventWithStatsig("chatgpt_web_prompt_created","chatgpt_web_prompt_created",{referer:m,hint:(x=a==null?void 0:a.systemHint)!=null?x:"none",hasSources:f.length>0,sourceCount:f.length,sources:f.join(",")}),Me(r),o(!1)}},e[11]=a==null?void 0:a.systemHint,e[12]=d,e[13]=o,e[14]=Me,e[15]=m,e[16]=_,e[17]=g,e[18]=n,e[19]=de):de=e[19];const{mutate:ke,isPending:We}=Mt(de);let ie;e[20]!==(a==null?void 0:a.systemHint)||e[21]!==d||e[22]!==o||e[23]!==y||e[24]!==m||e[25]!==_||e[26]!==g||e[27]!==n?(ie={onError:Qt,onSuccess:()=>{var f;n.success(d.formatMessage({id:"caj6tF",defaultMessage:"Prompt updated"}));const r=[...g,..._].filter(x=>(a==null?void 0:a.systemHint)===Re.Research?!0:x!=="web");te.logEventWithStatsig("chatgpt_web_prompt_edited","chatgpt_web_prompt_edited",{referer:m,hint:(f=a==null?void 0:a.systemHint)!=null?f:"none",hasSources:r.length>0,sourceCount:r.length,sources:r.join(",")}),y.invalidateQueries({queryKey:["prompt-templates"],exact:!1}),o(!1)}},e[20]=a==null?void 0:a.systemHint,e[21]=d,e[22]=o,e[23]=y,e[24]=m,e[25]=_,e[26]=g,e[27]=n,e[28]=ie):ie=e[28];const{mutate:Ne,isPending:Le}=kt(ie);let ce;e[29]!==c||e[30]!==(a==null?void 0:a.systemHint)||e[31]!==ke||e[32]!==s||e[33]!==N||e[34]!==C||e[35]!==M||e[36]!==j||e[37]!==_||e[38]!==g||e[39]!==Ne?(ce=()=>{var f;const r={name:M,prompt:j,system_hint:a==null?void 0:a.systemHint,sources:[...g,..._].filter(x=>(a==null?void 0:a.systemHint)===Re.Research?!0:x!=="web"),shared_to_workspace:c!=null&&c.getWorkspaceId()?C:!1};if(N){if(!(s!=null&&s.id))return;Ne({promptId:(f=s==null?void 0:s.id)!=null?f:"",prompt:P(P({},s),r)})}else ke(r)},e[29]=c,e[30]=a==null?void 0:a.systemHint,e[31]=ke,e[32]=s,e[33]=N,e[34]=C,e[35]=M,e[36]=j,e[37]=_,e[38]=g,e[39]=Ne,e[40]=ce):ce=e[40];const Ce=ce;let T;e[41]!==o?(T=()=>o(!1),e[41]=o,e[42]=T):T=e[42];let E;e[43]!==N?(E=t.jsx("div",{className:"text-token-text-primary text-lg font-medium",children:N?t.jsx(u,{id:"WTfocU",defaultMessage:"Edit prompt"}):t.jsx(u,{id:"ZOolU6",defaultMessage:"Create prompt"})}),e[43]=N,e[44]=E):E=e[44];let me;e[45]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"xdGuNa",defaultMessage:"Prompts are sequences of text that you can quickly add to your messages. Type / to find and use your prompts in ChatGPT."})}),e[45]=me):me=e[45];let S;e[46]!==E?(S=t.jsxs("div",{className:"flex flex-col gap-2",children:[E,me]}),e[46]=E,e[47]=S):S=e[47];let I;e[48]!==o?(I=t.jsx(St,{onClick:()=>o(!1),className:"px-2"}),e[48]=o,e[49]=I):I=e[49];let R;e[50]!==S||e[51]!==I?(R=t.jsxs("div",{className:"flex gap-2",children:[S,I]}),e[50]=S,e[51]=I,e[52]=R):R=e[52];let fe;e[53]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"MEkw2s",defaultMessage:"Prompt name"})}),e[53]=fe):fe=e[53];let O;e[54]!==d?(O=d.formatMessage({id:"E/i+u3",defaultMessage:"Name your prompt"}),e[54]=d,e[55]=O):O=e[55];let pe;e[56]===Symbol.for("react.memo_cache_sentinel")?(pe=r=>nt(r.target.value),e[56]=pe):pe=e[56];let A;e[57]!==M||e[58]!==O?(A=t.jsxs("div",{className:"flex flex-col gap-2",children:[fe,t.jsx(Ot,{autoComplete:"off",name:"prompt-name",className:"w-full bg-transparent",ariaLabel:"Prompt name",placeholder:O,value:M,onChange:pe})]}),e[57]=M,e[58]=O,e[59]=A):A=e[59];let ue;e[60]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"6XhnsZ",defaultMessage:"Prompt text"})}),e[60]=ue):ue=e[60];let he;e[61]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsxs("div",{className:"flex flex-col gap-1",children:[ue,t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"MzLGuT",defaultMessage:"Use '{'brackets'}' to create text variables"})})]}),e[61]=he):he=e[61];let D;e[62]!==j?(D=Gt(j),e[62]=j,e[63]=D):D=e[63];let W;e[64]!==D?(W=t.jsx("div",{"aria-hidden":!0,className:"text-token-text-primary pointer-events-none absolute inset-0 overflow-hidden px-3 py-2 text-sm leading-5 break-words whitespace-pre-wrap",ref:re,children:D}),e[64]=D,e[65]=W):W=e[65];let xe,ge;e[66]===Symbol.for("react.memo_cache_sentinel")?(xe=r=>dt(r.target.value),ge=r=>{re.current&&(re.current.scrollTop=r.currentTarget.scrollTop,re.current.scrollLeft=r.currentTarget.scrollLeft)},e[66]=xe,e[67]=ge):(xe=e[66],ge=e[67]);let L;e[68]!==d?(L=d.formatMessage({id:"v1n6Wj",defaultMessage:"This is the text that will appear when you @mention your prompt"}),e[68]=d,e[69]=L):L=e[69];let _e;e[70]===Symbol.for("react.memo_cache_sentinel")?(_e={WebkitTextFillColor:"transparent"},e[70]=_e):_e=e[70];let q;e[71]!==j||e[72]!==L?(q=t.jsx(At,{autoComplete:"off",name:"prompt-text",value:j,onChange:xe,onScroll:ge,placeholder:L,className:"caret-token-text-primary h-40 w-full resize-none rounded-none border-0 bg-transparent px-3 py-2 text-sm leading-5 text-transparent focus:border-0 focus:ring-0",style:_e}),e[71]=j,e[72]=L,e[73]=q):q=e[73];let F;e[74]!==W||e[75]!==q?(F=t.jsxs("div",{className:"flex flex-col gap-2",children:[he,t.jsxs("div",{className:"border-token-border-default focus-within:border-token-text-primary focus-within:ring-token-text-primary relative overflow-hidden rounded-md border",children:[W,q]})]}),e[74]=W,e[75]=q,e[76]=F):F=e[76];let be;e[77]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx("span",{className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"/EOojc",defaultMessage:"Automatically enable tool"})}),e[77]=be):be=e[77];let je;e[78]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsxs("div",{className:"flex items-baseline gap-1",children:[be,t.jsx("span",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"AS68OR",defaultMessage:"(optional)"})})]}),e[78]=je):je=e[78];let B;e[79]!==a||e[80]!==w||e[81]!==d||e[82]!==ae||e[83]!==i?(B=a?t.jsxs("button",{"data-is-selected":!0,className:"bg-token-interactive-bg-accent-muted-hover composer-btn rounded-full p-2 [view-transition-name:var(--vt-composer-active-system-hint-pill)]","aria-label":d.formatMessage({id:"HW9RTL",defaultMessage:"Disable {systemHintName}"},{systemHintName:(Qe=a.shortLabel)!=null?Qe:a.name}),onClick:()=>{De(null),Oe(new Set),Ae(new Set)},children:[t.jsx(ot,{hint:a,isNextToLabel:!0}),t.jsx("span",{className:"mx-1.5 [[data-collapse-labels]_&]:sr-only",children:($e=a.shortLabel)!=null?$e:a.name}),t.jsx(qt,{})]}):t.jsxs(k.Root,{open:ae,onOpenChange:rt,children:[t.jsx(k.Trigger,{className:"composer-btn border-token-border-default! gap-1.5 rounded-full border-1 p-2","data-opened":Nt(ae),onClick:Kt,onFocusCapture:Yt,children:t.jsxs(t.Fragment,{children:[t.jsx(Lt,{}),t.jsx("span",{children:t.jsx(u,{id:"lhdTHv",defaultMessage:"Select tool"})})]})}),t.jsx(k.Portal,{children:t.jsx(k.Content,{size:"auto",children:t.jsx(k.RadioGroup,{value:w!=null?w:void 0,onValueChange:r=>De(r),children:i==null?void 0:i.map(Ut)})})})]}),e[79]=a,e[80]=w,e[81]=d,e[82]=ae,e[83]=i,e[84]=B):B=e[84];let z;e[85]!==a||e[86]!==_||e[87]!==g?(z=a&&t.jsx(zt,{activeSystemHint:a,selectedSources:g,setSelectedSources:Oe,selectedMCPSources:_,setSelectedMCPSources:Ae}),e[85]=a,e[86]=_,e[87]=g,e[88]=z):z=e[88];let G;e[89]!==B||e[90]!==z?(G=t.jsxs("div",{className:"flex flex-col gap-2",children:[je,t.jsxs("div",{className:"flex gap-2",children:[B,z]})]}),e[89]=B,e[90]=z,e[91]=G):G=e[91];let U;e[92]!==c||e[93]!==d||e[94]!==C?(U=!!(c!=null&&c.getWorkspaceId())&&t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{id:"available-to-team-members-label",className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"YFLYbD",defaultMessage:"Available to team members"})}),t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"l0fmJX",defaultMessage:"Allow team members at {workspaceName} to find and use this prompt",values:{workspaceName:(Ve=c==null?void 0:c.name)!=null?Ve:d.formatMessage({id:"qt3Hqs",defaultMessage:"your workspace"})}})})]}),t.jsx(Ct,{"aria-labelledby":"available-to-team-members-label",checked:C,disabled:!(c!=null&&c.getWorkspaceId()),onCheckedChange:r=>{it(r)}})]}),e[92]=c,e[93]=d,e[94]=C,e[95]=U):U=e[95];let Y;e[96]!==b||e[97]!==s||e[98]!==o?(Y=s?t.jsx(H,{color:"danger-outline",onClick:()=>{var r,f,x,J;return It(b,Wt,{promptId:(r=s==null?void 0:s.id)!=null?r:"",promptTitle:(f=s==null?void 0:s.name)!=null?f:"",promptSystemHint:(x=s==null?void 0:s.system_hint)!=null?x:null,promptSources:((J=s==null?void 0:s.sources)!=null?J:[]).join(","),onClose:()=>o(!1)})},children:t.jsx(u,{id:"x3h5Nl",defaultMessage:"Delete"})}):t.jsx("div",{className:"flex-1"}),e[96]=b,e[97]=s,e[98]=o,e[99]=Y):Y=e[99];let K;e[100]!==o?(K=()=>o(!1),e[100]=o,e[101]=K):K=e[101];let ye;e[102]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(u,{id:"ixOzv9",defaultMessage:"Cancel"}),e[102]=ye):ye=e[102];let Q;e[103]!==K?(Q=t.jsx(H,{color:"secondary",onClick:K,children:ye}),e[103]=K,e[104]=Q):Q=e[104];const Te=We||Le,Ee=!M||!j||We||Le;let we;e[105]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(u,{id:"vkpL39",defaultMessage:"Save"}),e[105]=we):we=e[105];let $;e[106]!==Ce||e[107]!==Te||e[108]!==Ee?($=t.jsx(H,{loading:Te,disabled:Ee,onClick:Ce,children:we}),e[106]=Ce,e[107]=Te,e[108]=Ee,e[109]=$):$=e[109];let V;e[110]!==Q||e[111]!==$?(V=t.jsxs("div",{className:"flex items-center gap-2",children:[Q,$]}),e[110]=Q,e[111]=$,e[112]=V):V=e[112];let X;e[113]!==Y||e[114]!==V?(X=t.jsxs("div",{className:"mt-4 flex justify-between gap-2",children:[Y,V]}),e[113]=Y,e[114]=V,e[115]=X):X=e[115];let Z;e[116]!==R||e[117]!==A||e[118]!==F||e[119]!==G||e[120]!==U||e[121]!==X?(Z=t.jsxs("div",{className:"flex flex-col gap-6",children:[R,A,F,G,U,X]}),e[116]=R,e[117]=A,e[118]=F,e[119]=G,e[120]=U,e[121]=X,e[122]=Z):Z=e[122];let ve;return e[123]!==T||e[124]!==Z?(ve=t.jsx(st,{isOpen:!0,onClose:T,testId:"modal-create-prompt",type:"success",size:"custom",className:"relative flex max-w-[520px] flex-col p-2",children:Z}),e[123]=T,e[124]=Z,e[125]=ve):ve=e[125],ve}function Ut(l){return t.jsx(k.RadioItem,{className:"hover:bg-token-bg-tertiary",color:"default",icon:t.jsx(ot,{hint:l,isNextToLabel:!0}),label:l.name,trailing:t.jsx(k.RadioItemCheck,{}),value:l.systemHint},l.systemHint)}function Yt(l){l.stopPropagation()}function Kt(l){l.preventDefault()}function Qt(l){te.logEventWithStatsig("chatgpt_web_prompt_error","chatgpt_web_prompt_error",{context:"EDIT",detail:l.message})}function $t(l){te.logEventWithStatsig("chatgpt_web_prompt_error","chatgpt_web_prompt_error",{context:"CREATE",detail:l.message})}function Vt(l){return ee(l)}function Xt(l){return!ee(l)}export{ds as CreatePromptModal};
//# sourceMappingURL=n6ajdtpejzhqnrex.js.map
