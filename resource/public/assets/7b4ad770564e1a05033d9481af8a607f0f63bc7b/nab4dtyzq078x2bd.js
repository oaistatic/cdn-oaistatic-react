var O=Object.defineProperty,V=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var q=(r,e,t)=>e in r?O(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,y=(r,e)=>{for(var t in e||(e={}))A.call(e,t)&&q(r,t,e[t]);if(k)for(var t of k(e))F.call(e,t)&&q(r,t,e[t]);return r},T=(r,e)=>V(r,$(e));import{y as I,c as K,a1 as U,d as D,r as w,b as G,j as o,M as L,e as z}from"./kfrdmkli83ureki3.js";import{aB as Q,e6 as W,am as E}from"./kw08ajijqinojrwh.js";import{u as X}from"./batn8nst470a68ib.js";import{bh as H,bi as J}from"./fyw02vlaiv2vq6cj.js";const Y=500,Z=2;function ee(r){switch(r){case E.SELF_SERVE_BUSINESS:return"chatgpt-subscribe-plan-business";case E.GO:return"chatgpt-subscribe-plan-go";case E.PLUS:return"chatgpt-subscribe-plan-plus";case E.PRO:return"chatgpt-subscribe-plan-pro";default:return""}}const oe=I(function(){"use forget";const e=K.c(42),{processorEntity:t,checkoutSessionId:a,planType:i}=U(),c=D();let u;e[0]!==i?(u=ee(i.toLowerCase()),e[0]=i,e[1]=u):u=e[1];let g;e[2]!==u?(g={key:u},e[2]=u,e[3]=g):g=e[3];const{trackSelectedPixels:f}=X(g);let P;e[4]===Symbol.for("react.memo_cache_sentinel")?(P={firstRequestAt:Date.now(),pollCount:0,finished:!1,redirected:!1},e[4]=P):P=e[4];const[n,v]=w.useState(P);let p;e[5]!==a||e[6]!==t?(p=["checkoutSession",t,a],e[5]=a,e[6]=t,e[7]=p):p=e[7];let d;e[8]!==a||e[9]!==t||e[10]!==n.pollCount?(d=async()=>{const M=await H.fetchExistingCheckoutSession(t,a),B=M.status==="complete"||M.status==="expired"||n.pollCount>=Z;return v(S=>T(y({},S),{pollCount:S.pollCount+1,finished:B})),M},e[8]=a,e[9]=t,e[10]=n.pollCount,e[11]=d):d=e[11];const R=!n.finished;let C;e[12]!==p||e[13]!==d||e[14]!==R?(C={queryKey:p,queryFn:d,refetchInterval:Y,enabled:R},e[12]=p,e[13]=d,e[14]=R,e[15]=C):C=e[15];const{data:s}=G(C);let b;e[16]!==(s==null?void 0:s.status)||e[17]!==a||e[18]!==c||e[19]!==i||e[20]!==t||e[21]!==n.finished||e[22]!==n.redirected||e[23]!==f?(b=()=>{!n.finished||n.redirected||(v(te),(s==null?void 0:s.status)==="complete"?(f(),c({pathname:"/payments/success",search:"?stripe_session_id=".concat(a,"&plan_type=").concat(i,"&processor_entity=").concat(t)})):(s==null?void 0:s.status)==="open"&&c({pathname:J(t,a),search:"",hash:""}))},e[16]=s==null?void 0:s.status,e[17]=a,e[18]=c,e[19]=i,e[20]=t,e[21]=n.finished,e[22]=n.redirected,e[23]=f,e[24]=b):b=e[24];let _;e[25]!==s||e[26]!==a||e[27]!==c||e[28]!==i||e[29]!==t||e[30]!==n||e[31]!==f?(_=[n,s,a,t,i,c,f],e[25]=s,e[26]=a,e[27]=c,e[28]=i,e[29]=t,e[30]=n,e[31]=f,e[32]=_):_=e[32],w.useEffect(b,_);const l=(s==null?void 0:s.status)==="expired";let m;e[33]!==l?(m=!l&&o.jsx(W,{className:"icon-xl"}),e[33]=l,e[34]=m):m=e[34];let h,x;e[35]!==l?(h=o.jsx("span",{className:"text-muted-foreground text-center text-sm",children:l?o.jsx(L,y({},N.errorProcessingPayment)):o.jsx(L,y({},N.processingPayment))}),x=l&&o.jsx(Q,{color:"primary",as:"link",to:"/#pricing",children:o.jsx(L,y({},N.returnButtonText))}),e[35]=l,e[36]=h,e[37]=x):(h=e[36],x=e[37]);let j;return e[38]!==h||e[39]!==x||e[40]!==m?(j=o.jsx("div",{className:"flex h-screen flex-col p-4",children:o.jsx("div",{className:"flex flex-1 items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-3",children:[m,h,x]})})}),e[38]=h,e[39]=x,e[40]=m,e[41]=j):j=e[41],j});function te(r){return T(y({},r),{redirected:!0})}const N=z({processingPayment:{id:"CheckoutVerifyRoute.processingPayment",defaultMessage:"Processing Payment"},errorProcessingPayment:{id:"CheckoutVerifyRoute.errorProcessingPayment",defaultMessage:"There was an error processing your payment"},returnButtonText:{id:"CheckoutVerifyRoute.returnButtonText",defaultMessage:"Return to ChatGPT"}});export{oe as default};
//# sourceMappingURL=nab4dtyzq078x2bd.js.map
