const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/d1v5eq12z2rar6o7.js","assets/kfrdmkli83ureki3.js"])))=>i.map(i=>d[i]);
import{r as y,j as s,_ as f}from"./kfrdmkli83ureki3.js";import{ay as g,V as A,O as S,$ as p,a0 as j,a2 as v,az as M,aA as O}from"./kw08ajijqinojrwh.js";import{gM as E,gN as w,gO as R,gq as T,gP as C,gQ as b,gR as P,gS as J,gT as N}from"./fyw02vlaiv2vq6cj.js";import{u as k}from"./o106qsyr0ujbylfd.js";function L(o,r){const{automationId:a,automationTitle:e,automationMessage:h}=y.useMemo(()=>{const c=r.find(i=>i.author.role===g.Assistant),n=c?A.getParentPromptNode(S(o),c.id):null;let t=n==null?void 0:n.message.metadata;if(!(t!=null&&t.real_author_type)){const i=r.find(l=>{var u;return((u=l.metadata)==null?void 0:u.real_author_type)==="automation"});t=i==null?void 0:i.metadata}const d=(t==null?void 0:t.real_author_type)==="automation"?t==null?void 0:t.real_author_id:null,m=t==null?void 0:t.real_author_title;return{automationId:d,automationTitle:m,automationMessage:n==null?void 0:n.message}},[o,r]),{automation:_}=k(a!=null?a:"");return{automationId:a,automation:_,automationTitle:e,automationMessage:h}}const z=M(()=>f(()=>import("./d1v5eq12z2rar6o7.js"),__vite__mapDeps([0,1])),{loading:o=>O(o)});function B({clientThreadId:o,messages:r}){var m,i;const{automationId:a,automation:e,automationTitle:h}=L(o,r),c=E(o).isOdysseyMode||r.some(l=>{var u;return(u=l.metadata)==null?void 0:u.n7jupd_message}),n=(m=w(o))==null?void 0:m.value,{isScheduledRun:t}=y.useContext(R),[x,d]=y.useState(!1);return y.useEffect(()=>{a&&p.count(j.JAWBONE,"jawbone_automation_source_header.open")},[a]),a?t?s.jsx("div",{className:"relative my-2 w-full",children:s.jsx(T,{automation:e,fullWidth:!0})}):c?n===v.REALTIME?null:s.jsx(C,{clientThreadId:o,children:s.jsx(b,{children:({isScheduled:l,isScheduledRun:u})=>l&&u&&s.jsx(P,{})})}):s.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[s.jsx(z,{className:"icon-sm"}),s.jsx("button",{onClick:()=>{d(!0)},children:(i=e==null?void 0:e.title)!=null?i:h}),x&&e&&s.jsx(J,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:s.jsx(N,{item:e,source:"chat",onClose:()=>{d(!1)}})})]}):null}export{B as AutomationSourceHeader};
//# sourceMappingURL=ow8ta8vb5wq2n5po.js.map
