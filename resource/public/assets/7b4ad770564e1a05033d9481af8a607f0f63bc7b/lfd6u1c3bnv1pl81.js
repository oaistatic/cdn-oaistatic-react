const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dch45l9yrtbjo93p.js","assets/kfrdmkli83ureki3.js","assets/fyw02vlaiv2vq6cj.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css","assets/dnpenovn9ku8sbs2.js","assets/kw03hsqv96j7mp48.js","assets/oy0v5ug2g8t9nclv.js","assets/nz44s7ebe5b6pll5.js","assets/jalrxozsu1d7y5op.js","assets/ctv40ttvxsn25wjo.js","assets/nhiri1zsic5lga67.js","assets/dr1v3i80rkhviakg.js","assets/bya0tgas2bybcf45.js","assets/z0uh6nsjf7yalv60.js","assets/l4m29zus5vmyfglr.js"])))=>i.map(i=>d[i]);
var V=Object.freeze,z=Object.defineProperty,ce=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var W=(e,a,n)=>a in e?z(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,u=(e,a)=>{for(var n in a||(a={}))G.call(a,n)&&W(e,n,a[n]);if(y)for(var n of y(a))U.call(a,n)&&W(e,n,a[n]);return e},E=(e,a)=>ce(e,de(a));var H=(e,a)=>{var n={};for(var s in e)G.call(e,s)&&a.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&y)for(var s of y(e))a.indexOf(s)<0&&U.call(e,s)&&(n[s]=e[s]);return n};var h=(e,a)=>V(z(e,"raw",{value:V(a||e.slice())}));import{r as v,b as me,h as X,j as t,M as f,e as Z,_ as c,d as L,l as K,a as ee}from"./kfrdmkli83ureki3.js";import{r7 as ue,r8 as ge,je as xe,r9 as pe,ra as fe,rb as _e,rc as he,dT as T,u as j,J as te,R as ve,p as je,ey as be,aB as ye,az as d,cv as A,d4 as k,ej as ae,al as O,d5 as Ee,ev as Pe,c9 as Ae,iu as M,cy as R,df as Ie,dN as ne,e6 as we,cq as Se,am as Me,_ as Ne,aA as m}from"./kw08ajijqinojrwh.js";import{b as Le}from"./mj0406dyy526560j.js";import{cT as se,lK as Te,bl as ke,bk as Oe,ev as Re,df as De}from"./fyw02vlaiv2vq6cj.js";import{L as ie}from"./c326bjybavj646xd.js";import{j as Ce}from"./lg0oi3tmjv8kv2p4.js";function Be({cycleReferenceDate:e,cycleIndex:a,targetDate:n=new Date,period:s}){const i=s==="yearly"?ue:ge,o=i(n,a),r=S(e,o,s);return xe(r,o)?{start:S(e,i(o,-1),s),end:r}:{start:r,end:S(e,i(o,1),s)}}function S(e,a,n){return pe(e,u({year:_e(a)},n==="monthly"&&{month:fe(a)}))}function ht(e=0){const a=se();return v.useMemo(()=>{var o,r,l;if(a.status==="pending")return"pending";const n=a.data;if(!n)return;const s=(r=(o=n.next_credit_grant_update)!=null?o:n.active_start)!=null?r:n.active_until;if(!s)return;let i=(l=n.billing_period)!=null?l:"monthly";if(n.last_credit_grant_update&&n.next_credit_grant_update){const g=new Date(n.last_credit_grant_update),_=new Date(n.next_credit_grant_update);if(i=he(_,g)>1?"yearly":"monthly",e===0)return{start:g,end:_,period:i}}return E(u({},Be({cycleReferenceDate:new Date(s),cycleIndex:e,period:i})),{period:i})},[a,e])}function Fe(){var o;const e=T(),a=j(),s=te(a,"2861925050")&&e!=null&&e.isEnterprisey()&&(e.isAdminOfAccount()||e.isOwnerOfAccount())&&e.organizationId!=null,i=me({queryKey:Ve(e==null?void 0:e.organizationId),queryFn:()=>ve.safeGet("/subscriptions/{organization_id}/at_overage_limit",{parameters:{path:{organization_id:e==null?void 0:e.organizationId}}}),enabled:s});return s&&((o=i.data)==null?void 0:o.organization_at_overage_limit)===!0}function Ve(e){return["is-at-overage-limit",e]}function We({accountId:e,subscription:a}){const n=X(),s=je(),i=Te(e),[o,r]=v.useState(!1),l=Ce(e),g=async()=>{r(!0);try{await i.mutateAsync(e)}catch(_){s.warning(n.formatMessage(P.errorRenewingSubscription),{hasCloseButton:!0})}finally{r(!1)}};return t.jsx("div",{className:"bg-token-main-surface-secondary",children:t.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-2 py-4 md:px-6 lg:px-10 lg:py-6",children:[t.jsxs("div",{className:"mx-2 grow md:mx-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(be,{className:"me-4 hidden text-orange-500 md:block"}),t.jsx("p",{className:"text-lg font-semibold",children:t.jsx(f,u({},P.workspaceWillBeDeactivated))})]}),a.active_until!=null&&t.jsx("p",{className:"md:ms-8",children:t.jsx(f,E(u({},P.retainAccessUntil),{values:{expiryDate:new Date(a.active_until)}}))})]}),l&&t.jsx(ye,{color:"primary",onClick:g,loading:o,children:t.jsx(f,u({},P.reactivateBtn))})]})})}const P=Z({retainAccessUntil:{id:"adminPage.retainAccessUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},workspaceWillBeDeactivated:{id:"adminPage.workspaceWillBeDeactivated",defaultMessage:"This workspace will be deactivated."},reactivateBtn:{id:"adminPage.reactivateBtn",defaultMessage:"Reactivate"},errorRenewingSubscription:{id:"adminPage.errorRenewingSubscription",defaultMessage:"There was an error reactivating your subscription."}}),ze=d(()=>c(()=>import("./dch45l9yrtbjo93p.js"),__vite__mapDeps([0,1])),{loading:e=>m(e)}),Ge=d(()=>c(()=>import("./fyw02vlaiv2vq6cj.js").then(e=>e.zk),__vite__mapDeps([2,1,3,4,5])),{loading:e=>m(e)}),Ue=d(()=>c(()=>import("./fyw02vlaiv2vq6cj.js").then(e=>e.zj),__vite__mapDeps([2,1,3,4,5])),{loading:e=>m(e)}),He=d(()=>c(()=>import("./dnpenovn9ku8sbs2.js"),__vite__mapDeps([6,1])),{loading:e=>m(e)}),Ke=d(()=>c(()=>import("./kw03hsqv96j7mp48.js"),__vite__mapDeps([7,1])),{loading:e=>m(e)}),Qe=d(()=>c(()=>import("./fyw02vlaiv2vq6cj.js").then(e=>e.zq),__vite__mapDeps([2,1,3,4,5])),{loading:e=>m(e)}),qe=d(()=>c(()=>import("./oy0v5ug2g8t9nclv.js"),__vite__mapDeps([8,1])),{loading:e=>m(e)}),Ye=d(()=>c(()=>import("./nz44s7ebe5b6pll5.js"),__vite__mapDeps([9,1])),{loading:e=>m(e)}),$e=d(()=>c(()=>import("./jalrxozsu1d7y5op.js"),__vite__mapDeps([10,1])),{loading:e=>m(e)}),Q=d(()=>c(()=>import("./ctv40ttvxsn25wjo.js"),__vite__mapDeps([11,1])),{loading:e=>m(e)}),Je=d(()=>c(()=>import("./nhiri1zsic5lga67.js"),__vite__mapDeps([12,1])),{loading:e=>m(e)}),Xe=d(()=>c(()=>import("./fyw02vlaiv2vq6cj.js").then(e=>e.zm),__vite__mapDeps([2,1,3,4,5])),{loading:e=>m(e)}),Ze=d(()=>c(()=>import("./dr1v3i80rkhviakg.js"),__vite__mapDeps([13,1])),{loading:e=>m(e)}),et=d(()=>c(()=>import("./bya0tgas2bybcf45.js"),__vite__mapDeps([14,1])),{loading:e=>m(e)}),tt=d(()=>c(()=>import("./z0uh6nsjf7yalv60.js"),__vite__mapDeps([15,1])),{loading:e=>m(e)}),at=d(()=>c(()=>import("./l4m29zus5vmyfglr.js"),__vite__mapDeps([16,1])),{loading:e=>m(e)}),N="/admin/billing";function p(i){var o=i,{route:e,icon:a,upsellEnterprise:n=!1}=o,s=H(o,["route","icon","upsellEnterprise"]);const r=ee().pathname.replace(/\/$/,"")||"/",l=L();return n?t.jsx(Se,{label:t.jsx(f,u({},x.availableForEnterprise)),side:"right",contentClassName:"cant-hover:hidden",children:t.jsx(M,{as:"div",role:"button",fillContainer:!0,icon:Ye,label:"name"in s?t.jsx(f,u({},s.name)):s.children})}):t.jsx(M,{as:"div",role:"button",fillContainer:!0,active:r===e,onClick:g=>{l(e),g.stopPropagation()},icon:a,label:"name"in s?t.jsx(f,u({},s.name)):s.children})}function nt({workspace:e,hasAdminPrivileges:a,hasOwnerPrivileges:n}){var C,B,F;const s=L(),i=T(),o=(B=(C=i==null?void 0:i.isK12)==null?void 0:C.call(i))!=null?B:!1,r=k(Ee.isEnterpriseyPlan),l=v.useCallback(()=>{s("/")},[s]),g=j(),_=te(g,"4105779609"),D=ae(),I=(i==null?void 0:i.isSelfServeBusiness())&&_,{data:w}=Pe(e==null?void 0:e.id);let b=!1;n||a||!r?b=!0:b=!!((F=w==null?void 0:w.permissions)!=null&&F.includes("chatgpt.workspace.member.role.view"));const oe=Re(Ue,Ge,!1,!0),le=X().formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"});return t.jsxs("nav",{className:"pb-1.5",children:[!D&&t.jsx("div",{className:"h-header-height flex items-center px-2",children:t.jsx(De,{className:"no-draggable","aria-label":le,onClick:()=>{Ae.setSidebarOpen(!1)},icon:oe,mobileIcon:Qe,"data-testid":"close-sidebar-button"})}),t.jsx("div",{className:"h-header-height flex flex-col justify-center",children:t.jsx(M,{as:"button",onClick:l,icon:t.jsx(et,{className:"icon-sm"}),label:t.jsx(f,u({},x.backToChat))})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:R("flex flex-col gap-2 rounded p-4"),children:[t.jsx(Ie,{size:"large",src:e==null?void 0:e.profilePictureUrl}),t.jsx("div",{className:"align-center flex min-w-0 flex-row",children:t.jsx("h2",{className:"text-token-text-primary flex-1 truncate text-lg dark:text-white",children:e==null?void 0:e.name})})]}),a&&t.jsx(p,{route:"/admin",icon:Ke,name:x.generalSettingsPageTitle}),b&&t.jsx(p,{route:"/admin/members",icon:qe,name:x.membersPageTitle}),r&&b&&t.jsx(p,{route:"/admin/groups",icon:Q,upsellEnterprise:!r,name:K({id:"aecR1i",defaultMessage:"Groups"})}),n&&t.jsx(p,{route:"/admin/permissions",icon:He,name:x.permissions}),a&&!o&&t.jsx(p,{route:N,icon:Je,name:x.billing}),n&&t.jsx(p,{route:"/admin/gpts",icon:at,name:x.gpts}),a&&t.jsx(p,{route:"/admin/ca",icon:Xe,name:x.connections}),!r&&t.jsx("span",{className:"border-y-token-border-heavy mx-3 border-t"}),!r&&t.jsx(p,{route:"/admin/groups",icon:Q,upsellEnterprise:!r,name:K({id:"aecR1i",defaultMessage:"Groups"})}),a&&t.jsx(p,{route:"/admin/usage",icon:tt,upsellEnterprise:!r,children:t.jsx("div",{className:"flex flex-row items-center gap-2",children:t.jsx(f,u({},x.userAnalytics))})}),n&&t.jsx(p,{route:"/admin/identity",upsellEnterprise:!r&&!I,icon:$e,name:x.identity}),!1]})]})}function vt({mobilePageTitle:e,requireAdminPrivileges:a=!1,requireOwnerPrivileges:n=!1,children:s}){const i=k(I=>I.currentWorkspace),o=L(),r=i!=null?ke(i.role):void 0,l=i!=null?Oe(i.role):void 0;v.useEffect(()=>{a&&r===!1&&o("/admin/members"),n&&l===!1&&o("/admin/members")},[a,r,o,n,l]);const g=ae(),_=j();return O(_)==null?null:t.jsx(t.Fragment,{children:t.jsx(Le,{mobileHeaderContent:e,mobileHeaderRightContent:t.jsx(ie,{}),forceOpenDesktopSidebar:g,renderNavSidebar:()=>t.jsx(nt,{workspace:i!=null?i:void 0,hasAdminPrivileges:r,hasOwnerPrivileges:l}),children:s})})}function st(){return t.jsxs(t.Fragment,{children:[t.jsx(it,{}),t.jsx(rt,{})]})}function it(){const{data:e}=se(),a=j(),n=O(a),s=n&&e&&e.plan_type===Me.SELF_SERVE_BUSINESS&&!e.will_renew;return t.jsx(t.Fragment,{children:s&&t.jsx(We,{accountId:n.id,subscription:e})})}function rt(){const e=T(),a=Fe(),n=ee().pathname!==N;return v.useEffect(()=>{a&&Ne.logEventWithStatsig("ChatGPT Credits: At Overage Limit Banner Shown","chatgpt_credits_at_overage_limit_banner_shown",{workspaceId:e==null?void 0:e.id,workspaceName:e==null?void 0:e.name})},[a,e]),t.jsx(t.Fragment,{children:a&&t.jsx("div",{className:"text-token-interactive-label-danger-secondary-default bg-token-bg-status-error",children:t.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-center px-2 py-4 text-xs md:px-6 lg:px-10",children:[t.jsx(ze,{className:"me-2 shrink-0"}),t.jsx(f,E(u({},x.atOverageLimitBannerText),{values:{link:s=>n?t.jsx(ne,{className:"mx-1",href:N,children:s}):s}}))]})})})}var q;const re=A.div(q||(q=h(["w-full flex-row items-center gap-2"])));var Y;const ot=A(re)(Y||(Y=h(["text-sm text-token-text-tertiary"])));var $;const lt=A.div($||($=h(["mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10"])));function jt({title:e,subtitle:a,actions:n,tabsHeader:s,badge:i,navigation:o}){return t.jsxs(t.Fragment,{children:[t.jsx(st,{}),t.jsxs("div",{className:R("border-token-bg-tertiary flex flex-col gap-6 border-b md:mt-12",!s&&"pb-6"),children:[o&&t.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10",children:o}),t.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:block md:px-6 lg:px-10",children:t.jsxs("div",{className:"flex flex-row items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(re,{className:"hidden md:flex",children:[t.jsx("h2",{children:e}),i]}),a&&t.jsx(ot,{className:"mt-1",children:a})]}),t.jsx("div",{className:"flex",children:n})]})}),s&&t.jsx(lt,{children:s})]}),t.jsx("div",{className:"absolute end-0 top-0 hidden px-2 py-1.5 md:block",children:t.jsx(ie,{})})]})}function bt({items:e}){return t.jsx("div",{className:"text-token-text-secondary text-caption-regular flex items-center gap-2",children:e.map((a,n)=>{const s=R(n===e.length-1?"text-token-text-primary":"text-token-text-secondary","no-underline");return t.jsxs(t.Fragment,{children:[a.href?t.jsx(ne,{href:a.href,style:{textDecoration:"none"},className:s,children:a.label},n):t.jsx("div",{className:s,children:a.label},n),n<e.length-1&&t.jsx(Ze,{className:"icon-sm"})]})})})}var J;const ct=A.div(J||(J=h(["max-w-4xl mx-auto w-full px-2 md:px-6 lg:px-10 pb-10"])));function yt({children:e,showSpinner:a,skipLegacyWorkspaceCheck:n}){const s=j(),i=O(s),o=k(g=>g.currentWorkspace),r=!n&&!o,l=!i||a;return t.jsxs(ct,{children:[l&&t.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:t.jsx(we,{})}),!l&&r&&t.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:t.jsx(f,u({},x.workspaceNotFound))}),!l&&!r&&e]})}const x=Z({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},generalSettingsPageTitle:{id:"6Gjoj5",defaultMessage:"General"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},userAnalytics:{id:"adminPage.userAnalytics",defaultMessage:"User analytics"},billing:{id:"adminPage.billing.1",defaultMessage:"Billing"},gpts:{id:"adminPage.gpts",defaultMessage:"GPTs"},connections:{id:"adminPage.connections",defaultMessage:"Apps & Connectors"},permissions:{id:"/HwRtL",defaultMessage:"Permissions & roles"},identity:{id:"adminPage.identity.0",defaultMessage:"Identity & access"},availableForEnterprise:{id:"adminPage.availableForEnterprise",defaultMessage:"Available for Enterprise plan"},atOverageLimitBannerText:{id:"adminPage.atOverageLimitBannerText",defaultMessage:"Your organization has reached its credit overage limit. Access to advanced features is paused. <link>Adjust the limit</link> to restore access."},agreements:{id:"workspaceAgreements.agreementsTitle",defaultMessage:"Agreements"}});export{vt as A,jt as a,bt as b,yt as c,ht as d,Ve as g,Fe as u};
//# sourceMappingURL=lfd6u1c3bnv1pl81.js.map
