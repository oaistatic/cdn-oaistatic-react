const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/i0i4kn50iz5pfdvq.js","assets/kfrdmkli83ureki3.js","assets/fyw02vlaiv2vq6cj.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css","assets/hsqwirpqd8eqms8c.js","assets/emcmoa6z1wsa6qof.js","assets/i85urdvpkzpdgj3s.js","assets/dd8hh2tmra1psngf.js","assets/kqaxd07bbccrdl05.js","assets/br37mqd0to5xlxv3.js","assets/c5rze1h9e62gir74.js","assets/f1g778pkk2fhpy9x.js","assets/meym1wib9md0wcei.js","assets/jjgwnthjqih7iirt.js","assets/fxythiulbb2q3qno.js","assets/ke280zfvfnrfnfvu.js","assets/kzowh6fnaz3z8ldi.js","assets/lwhtq2bxkf789r8u.js","assets/ee4epyaq0yvvm0pk.js","assets/ku2y13hy7p9e8dp9.js","assets/f2osoco0jc12om0v.js","assets/ffn9wc6lj27bri6y.js","assets/byis8e009cwknczn.js","assets/jzzsz31csz3jhlrp.js","assets/me479l0dlgxhtxr0.js","assets/ce3hgmw4iyyhicud.js","assets/drmwaklva7v056il.js","assets/ns51nblw8ziscsgd.js","assets/l44if3t09c665h4q.js","assets/o37qk5ugo466d7jz.js","assets/g3nbl72lwy2oklgw.js","assets/j81448c2c5whiu6c.js","assets/b9tsn3f51rdwvzaj.js","assets/jy0p9y2z6ow3b5j3.js","assets/omgheurp6qzf2dpn.js","assets/c1jda78nitgsidb4.js","assets/oafyrulh7bq2qerb.js","assets/b4dmcdh59zl3olaw.js","assets/ctejkiukffhtkd40.js","assets/m148ha1ozi8vz2cs.js","assets/cjv4tm2buxt5byw3.js","assets/pbl95wx6493wq92j.js","assets/fey3pq4cxpkljcdg.js","assets/cot-message-kr8ex2u7.css","assets/g0bj5eddip1abn6m.js","assets/emfkh5q6smjqkpnz.js","assets/o106qsyr0ujbylfd.js","assets/es2rtlpx3e8ow3h1.js"])))=>i.map(i=>d[i]);
import{_ as T,r as L,j as a,M as Ie}from"./kfrdmkli83ureki3.js";import{az as f,u as ze,ia as Qe,M as ue,d as K,i5 as e,$ as $e,a0 as Je,eZ as H,fa as X,i3 as D,_ as Fe,hR as We,aR as he,cy as _e,aa as fe,ay as Ke,mV as Te,nR as Ze,n as Z,i as He,e9 as Xe,f9 as Ye,aw as Ue,bk as qe,aJ as Ge,aN as st}from"./kw08ajijqinojrwh.js";import{M as et,N as tt,O as at,Q as it,U as nt,X as xe,Y as ot,Z as lt,$ as rt,a0 as ct,a1 as mt,a2 as dt,a3 as gt,a4 as ut,a5 as ht,a6 as _t,a7 as ft,a8 as Tt,a9 as xt,aa as yt,ab as It,ac as ye,ad as jt,ae as bt,af as pt,ag as wt,ah as St,ai as Et,aj as Ct}from"./fyw02vlaiv2vq6cj.js";import{T as At}from"./i85urdvpkzpdgj3s.js";import{g as Lt}from"./dd8hh2tmra1psngf.js";const Dt=f(()=>T(()=>import("./i0i4kn50iz5pfdvq.js"),__vite__mapDeps([0,1,2,3,4,5]))),Pt=f(()=>T(()=>import("./hsqwirpqd8eqms8c.js"),__vite__mapDeps([6,1,3,4]))),kt=f(()=>T(()=>import("./emcmoa6z1wsa6qof.js"),__vite__mapDeps([7,1,3,4,8,2,5,9]))),Rt=f(()=>T(()=>import("./kqaxd07bbccrdl05.js"),__vite__mapDeps([10,1,3,4,2,5,11,12,13]))),vt=f(async()=>()=>null),Ot=f(async()=>(await T(()=>import("./meym1wib9md0wcei.js"),__vite__mapDeps([14,1,3,4,2,5]))).GlauxMessage),Vt=f(async()=>(await T(()=>import("./jjgwnthjqih7iirt.js"),__vite__mapDeps([15,1,3,4,11,2,5,16,12,13,17,18]))).ImageGenMessage),Bt=f(()=>T(()=>import("./lwhtq2bxkf789r8u.js"),__vite__mapDeps([19,1,3,4,2,5]))),Nt=f(()=>T(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zI),__vite__mapDeps([2,1,3,4,5])).then(t=>t.BrowsingMessage)),Mt=f(()=>T(()=>import("./ee4epyaq0yvvm0pk.js"),__vite__mapDeps([20,1,3,4,2,5,9])).then(t=>t.BrowserToolMessage)),zt=f(()=>T(()=>import("./ku2y13hy7p9e8dp9.js"),__vite__mapDeps([21,1,3,4,2,5])).then(t=>t.SearchResultMessage)),Qt=f(()=>T(()=>import("./f2osoco0jc12om0v.js").then(t=>t.i),__vite__mapDeps([22,1,3,4,2,5,23,24,25,26,27,28,29,30])).then(t=>t.JITPluginMessage)),$t=f(()=>T(()=>import("./o37qk5ugo466d7jz.js"),__vite__mapDeps([31,1,3,4,2,5,30,25])).then(t=>t.APIToolElicitationMessage)),Jt=f(()=>T(()=>import("./g3nbl72lwy2oklgw.js"),__vite__mapDeps([32,1,3,4,33,34,2,5])).then(t=>t.DataAnalysisMessage)),Ft=f(()=>T(()=>import("./jy0p9y2z6ow3b5j3.js"),__vite__mapDeps([35,1,3,4,2,5,36,17,18,13,37,14,34,38,9,39,40,41,42,43,16,12,44,45]))),Wt=f(()=>T(()=>import("./g0bj5eddip1abn6m.js"),__vite__mapDeps([46,1,3,4,36,2,5,17,18,13,37,14,34,38,9,39,40,41,42,43,16,12,44,45])).then(t=>t.LegacyCoTMessage)),Kt=f(()=>T(()=>import("./omgheurp6qzf2dpn.js"),__vite__mapDeps([36,1,3,4,2,5,17,18,13,37,14,34,38,9,39,40,41,42,43,16,12,44,45])).then(t=>t.CoT)),Zt=f(()=>T(()=>import("./emfkh5q6smjqkpnz.js"),__vite__mapDeps([47,1,2,3,4,5,48,49])).then(t=>t.JawboneMessage)),Ht=f(async()=>()=>null);function Xt(t){if(t.some(l=>l.type===e.SearchGPTQuery)){const h=t.filter(d=>d.type===D).flatMap(d=>d.groups),n=h.flatMap(d=>d.messages.map(m=>{var _;return(_=m.metadata)==null?void 0:_.search_turns_count})).findLast(d=>d!=null);return n!=null?n>1:(function(){const m=h.filter(j=>j.type===e.StructuredThoughts),_=h.filter(j=>j.type===e.CoTSearchTool),g=(()=>{function j(p){return p.type===e.StructuredThoughts&&p.messages.flatMap(u=>u.content).some(u=>u.content_type===Ue.StructuredThoughts&&u.thoughts.length>0)}let b=!1;for(const p of h)if(p.type===e.CoTSearchTool)b=!0;else if(j(p)&&b)return!0;return!1})();return m.length>1||_.length>1||g})()}return!0}function Yt(t,l){var h;if(t.type===D){const n=H(t.groups);return((h=n==null?void 0:n.messages[0].metadata)==null?void 0:h.is_visually_hidden_reasoning_group)&&l===0}return!1}function Ut(t){return t.type===D?!1:t.messages.some(l=>St(l))}function oa({groupedMessagesToRender:t,allMessages:l,allGroupedMessages:h,conversation:n,isUserTurn:d,isCompletionRequestInProgress:m,isFeedbackEnabled:_,isFinalTurn:g,isFinalUserTurn:j,isFinalAssistantTurn:b,isGlauxTurn:p=!1,hasActiveRequest:u,onRequestCompletion:P,turnIndex:w,shouldGrowContainer:V=!0,isParagen:Y=!1,renderingView:je="chat",isAgentTurn:B=!1,isKAUR1BR5:be=!1,query:U=null,wasInterrupted:pe=!1,superWidgetContent:we=null,lastAgentMetadataNode:q,isWithinFirstAssistantTurns:Se=!1,hasSearchSystemHint:Ee=!1}){var ms,ds;const Q=ze(),{showDebugConversationTurns:G}=Qe(),[k]=ue(n.id,s=>[s==null?void 0:s.mode]),ss=K(()=>qe(n)),es=K(()=>Ge(n)),Ce=et(Q),Ae=K(()=>st(Q));let ts=h.some(s=>s.type===e.Browsing||s.type===e.RetrievalBrowsing||s.type===e.SearchGPTQuery||s.type===e.n7jupd);const Le=h.some(s=>s.type===e.SearchGPTQuery),as=!d&&Ee&&m&&u&&!Le&&Ae,is=L.useRef(!1);as&&(is.current=!0,ts=!0);const De=ue(n.id,s=>{var i;for(let y=l.length-1;y>=0;y--){const r=l[y],E=(i=s==null?void 0:s.tree.getNodeIfExists(r.id))==null?void 0:i.message,z=E?Ct(E):void 0;if(z)return Object.assign({conversation:n,messageId:l[y].id},z)}}),Pe=tt(()=>$e.count(Je.DEFAULT,"conversation_turn_grouped_messages.attempted_render_missing_type_f959b8c")),$=H(l),ns=at({clientThreadId:n.id,conversationMode:k}),ke=L.useCallback(({sourceEvent:s,requestedModelId:i,appendMessages:y,extraStreamParams:r,isReasoningSkipped:E})=>{$&&ns({sourceEvent:s,nodeId:$.id,requestedModelId:i,appendMessages:y,extraStreamParams:r,isReasoningSkipped:E})},[$,ns]),{closeThreadSidebar:Re}=it(),ve=X(t,s=>s.type!==e.Debug),J=t.map((s,i)=>{var hs,_s,fs,Ts,xs,ys,Is,js,bs,ps,ws,Ss,Es,Cs,As,Ls,Ds,Ps,ks,Rs,vs,Os,Vs,Bs,Ns,Ms,zs,Qs,$s,Js,Fs,Ws,Ks,Zs,Hs,Xs,Ys,Us,qs,Gs,se,ee,te,ae,ie,ne,oe,le,re,ce,me,de;const y=u||Ut(s),r=B?i===ve:i===h.length-1,E=Xt(t),z=Yt(s,i),I=i===h.length-1?void 0:h[i+1],Ve=(I==null?void 0:I.type)===D?I.groups.at(-1):I,v=i===0?void 0:t[i-1],C=(v==null?void 0:v.type)!==D?v:void 0,gs=C==null?void 0:C.type,us=C==null?void 0:C.messages,Be=l==null?void 0:l.filter(o=>{var c,x;return((c=o.metadata)==null?void 0:c.python_citation)||((x=o.metadata)==null?void 0:x.container_citation)});if(s.type===D){const o=s.groups[0].messages[0];return!E||z?null:a.jsx(Kt,{isStreaming:g&&r&&m,latestError:De,isFinalAssistantTurn:b,messageGroups:s.groups,nextMessageGroup:Ve,prevMessageGroup:C,isAutoswitchOptOutEnabled:!!((hs=o.metadata)!=null&&hs.classifier_response),handleSkipClick:c=>{Re(),Fe.logEventWithStatsig("chatgpt_web_autoswitch_reasoning_skip_clicked","chatgpt_web_autoswitch_reasoning_skip_clicked",{conversationId:n.id,messageId:s.groups[0].messages[0].id}),ss&&ke({sourceEvent:c,requestedModelId:ss.id,isReasoningSkipped:!0,isAgentTurn:B})},isAgentTurn:B,isGlauxTurn:p,isKAUR1BR5:be,wasInterrupted:pe,lastAgentMetadataNode:q,conversation:n,turnIndex:w,currentGroupedMessageIndex:i},"cot-"+o.id)}const Ne=s&&!We(s.messages[0]),Me=ts&&Ne,A=[];if(Me||A.push(a.jsx(At,{className:"min-h-8",message:s.messages[0],isFeedbackEnabled:_,isFinalUserTurn:j,isWithinFirstAssistantTurns:Se,isCompletionInProgress:r&&m,hasActiveRequest:u,turnIndex:w,conversation:n,isUserTurn:d,prevGroupedMessageType:gs,prevGroupedMessages:us,citableMessages:Be,superWidgetContent:we},"text-message-"+s.messages[0].id)),G&&A.push(a.jsx(Ht,{clientThreadId:n.id,message:s.messages[0]},"message-debug-"+s.messages[0].id)),s.type===e.Text&&((_s=s.messages[0].metadata)!=null&&_s[he])){const o=s.messages[0].metadata[he];return a.jsxs(L.Fragment,{children:[a.jsx(nt,{browserContextMetadata:o,className:_e(Lt(!0),"mb-1","block","[.text-message+&]:mt-5")}),A]},"group-"+s.messages[0].id)}if(as&&r)return a.jsx(xe,{clientThreadId:n.id,turnIndex:w,isRequestActive:u,isLastMessage:r,isLastTurnInConversation:g,query:U,searchModelQueries:[],searchResultGroups:[],showFastNav:!1,isForcedMessage:!0,shouldShowAnimatedBlackDot:!1},"searchquery-forced-".concat(n.id,"-").concat(w));switch(s.type){case e.Text:case e.MultiText:if(s.type===e.Text){const o=(fs=s.messages[0])==null?void 0:fs.metadata,c=typeof(o==null?void 0:o.source)=="string"&&(o==null?void 0:o.source)==="dream_followup";return a.jsxs(L.Fragment,{children:[c&&v&&a.jsxs("div",{className:"mx-auto mt-8 mb-6 flex w-full items-center justify-center",children:[a.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),a.jsx("p",{className:"mx-3 shrink text-[14px] whitespace-nowrap text-gray-500",children:a.jsx(Ie,{id:"threadLayout.proactiveAssistantFollowupDivider",defaultMessage:"Follow-up question"})}),a.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]},"proactive-divider-"+s.messages[0].id),A,B&&a.jsx(Tt,{conversation:n,currentGroupedMessage:s,isLastMessage:r,isLastTurnInConversation:g,turnIndex:w,lastAgentMetadataNode:q}),a.jsx(xt,{isUserTurn:d,message:s.messages[0]}),a.jsx(yt,{isUserTurn:d,message:s.messages[0],clientThreadId:n.id})]},"group-"+s.messages[0].id)}else return s.type===e.MultiText?a.jsx(kt,{conversation:n,messages:s.messages,isCompletionInProgress:r&&m,isFeedbackEnabled:_,hasActiveRequest:u,prevGroupedMessageType:gs,prevGroupedMessages:us},"multitext-"+((xs=(Ts=s.messages[0])==null?void 0:Ts.id)!=null?xs:i)):s.type;case e.PIMBlock:{const o=H(l);return k&&o?a.jsx(ft,{isFinalTurn:g,hasActiveRequest:u,conversationMode:k,clientThreadId:n.id,justification:(ys=o.metadata)==null?void 0:ys.pim_justification,flaggedMessageId:(Is=o.metadata)==null?void 0:Is.pim_message_id,children:A}):null}case e.n7jupd_n:return a.jsx(_t,{});case e.Browsing:case e.RetrievalBrowsing:{const o=k!=null&&[Z.GizmoInteraction,Z.GizmoMagicCreate,Z.GizmoTest].includes(k.kind),c=es?He(es):!1;return a.jsx(Nt,{messages:s.messages,isRequestActive:u,isLastMessageInTurn:r,isUsingGizmo:o,isUsingProject:c,isRetrieval:s.type===e.RetrievalBrowsing},"browsing-"+((bs=(js=s.messages[0])==null?void 0:js.id)!=null?bs:i))}case e.kaur1br5:return a.jsx(Mt,{messages:s.messages,isRequestActive:u,isLastMessageInTurn:r,clientThreadId:n.id},"kaur1br5-tool-"+((ws=(ps=s.messages[0])==null?void 0:ps.id)!=null?ws:i));case e.SearchGPTQuery:{if(t.some(S=>S.type===D)&&E)return null;const c=t.slice(i+1).findLast(S=>S.type===e.Text||S.type===e.CoTSearchTool),x=l.findLast(S=>Te(S).length>0),O=new Set,ge=[];for(const S of l){const F=Ze(S);if(F&&F.length>0)for(const W of F)O.has(W)||(O.add(W),ge.push(W))}return a.jsx(xe,{clientThreadId:n.id,turnIndex:w,isRequestActive:u,isLastMessage:r,isLastTurnInConversation:g,nextMessage:c==null?void 0:c.messages[0],query:U,searchResultGroups:Te(x),searchModelQueries:ge,shouldShowAnimatedBlackDot:!is.current},"searchquery-"+((Es=(Ss=s.messages[0])==null?void 0:Ss.id)!=null?Es:i))}case e.StructuredThoughts:return null;case e.ReasoningRecap:return null;case e.n7jupd:return null;case e.n7jupd_native_api_tool:case e.n7jupd_a:case e.n7jupd_x:return null;case e.a8km123:{if(!s.messages.every(c=>{var x;return!((x=c.metadata)!=null&&x.reasoning_status)})){const c=X(l,x=>x.author.role===Ke.Assistant&&x.recipient==="all");return a.jsx(Wt,{conversation:n,turnIndex:w,isStreaming:(r||c<i)&&m,isFinalAssistantTurn:b,messages:s.messages},"sum-"+((As=(Cs=s.messages[0])==null?void 0:Cs.id)!=null?As:i))}return a.jsx(Ft,{messages:s.messages,isStreaming:r&&m,isCompletionRequestInProgress:m,hasActiveRequest:u,isLastMessage:r,isFinalTurn:g,isFeedbackEnabled:_,conversation:n,currentGroupedMessageIndex:i,turnIndex:w},"sum-"+((Ds=(Ls=s.messages[0])==null?void 0:Ls.id)!=null?Ds:i))}case e.f959b8c:return Pe(),null;case e.is_loading_message:if(r&&m){const o=s.messages[0],c=fe(o);return a.jsx(ht,{text:c},"loading-message-"+i)}else return null;case e.b47u8ra0_t:{const o=s.messages[0],c="Reference Browser Memories?",x=fe(o);return a.jsx(ut,{title:c,description:x,settingsTab:(ks=(Ps=o.metadata)==null?void 0:Ps.b47u8ra0_t)!=null?ks:"general",clientThreadId:n.id,parentMessageId:o.id},"b47u8ra0_t-"+i)}case e.l1p9k3u:return null;case e.b1de6e2_c:return a.jsx(gt,{messages:s.messages,clientThreadId:n.id,isLastMessage:r},"b1de6e2-"+((vs=(Rs=s.messages[0])==null?void 0:Rs.id)!=null?vs:i));case e.b1de6e2_s:return a.jsx(dt,{messages:s.messages,clientThreadId:n.id},"b1de6e2_s-"+((Vs=(Os=s.messages[0])==null?void 0:Os.id)!=null?Vs:i));case e.b1de6e2_d:return null;case e.b1de6e2_rm:return a.jsx(mt,{messages:s.messages,clientThreadId:n.id,renderingView:je,children:A},"b1de6e2_rm-"+((Ns=(Bs=s.messages[0])==null?void 0:Bs.id)!=null?Ns:i));case e.async_task_result_message:return a.jsx(ct,{clientThreadId:n.id,messages:s.messages,children:A},"async_task_result_message-"+((zs=(Ms=s.messages[0])==null?void 0:Ms.id)!=null?zs:i));case e.de1d73e:if(Ce){const o=i+1<h.length?h[i+1]:void 0;return a.jsx(Zt,{clientThreadId:n.id,currentGroupedMessage:s,nextMessage:o&&o.type===e.Text?o.messages[0]:void 0,isLastMessage:r,isRequestActive:u},"jawbone-"+(($s=(Qs=s.messages[0])==null?void 0:Qs.id)!=null?$s:i))}else return null;case e.ParallelBrowsing:return a.jsx(Bt,{messages:s.messages},"parallel-"+((Fs=(Js=s.messages[0])==null?void 0:Js.id)!=null?Fs:i));case e.CodeInterpreter:return a.jsx(Jt,{messages:s.messages,isRequestActive:u,clientThreadId:n.id},"ada-"+((Ks=(Ws=s.messages[0])==null?void 0:Ws.id)!=null?Ks:i));case e.UserSettings:return null;case e.DILWidget:{const o=s.messages[0],c=(Zs=o==null?void 0:o.metadata)==null?void 0:Zs.chatgpt_sdk,x=c==null?void 0:c.dil,O=(Hs=c==null?void 0:c.tool_response_metadata)==null?void 0:Hs.kakao_widget;return O?a.jsx("div",{children:a.jsx(rt,{rootWidget:O,dil:x})},"dil-".concat((Xs=o==null?void 0:o.id)!=null?Xs:i)):null}case e.JITPlugin:return a.jsx(Qt,{messages:s.messages,nextMessage:(I==null?void 0:I.type)===e.JITPlugin?I.messages[0]:void 0,clientThreadId:n.id,isLastTurnInConversation:g,isLastMessageInTurn:r,onRequestCompletion:P},"jit-"+((Us=(Ys=s.messages[0])==null?void 0:Ys.id)!=null?Us:i));case e.Mercury:return null;case e.APIToolElicitation:return a.jsx($t,{messages:s.messages,nextMessage:(I==null?void 0:I.type)===e.APIToolElicitation?I.messages[0]:void 0,clientThreadId:n.id,isLastTurnInConversation:g,isLastMessageInTurn:r,onRequestCompletion:P},"api-tool-elicitation-"+((Gs=(qs=s.messages[0])==null?void 0:qs.id)!=null?Gs:i));case e.t2uay3k:return a.jsx(Vt,{messages:s.messages,clientThreadId:n.id,isParagen:Y,isLastTurnInConversation:g},"t2uay3k-"+((ee=(se=s.messages[0])==null?void 0:se.id)!=null?ee:i));case e.Dalle:return a.jsx(Rt,{messages:s.messages,clientThreadId:n.id,disableClickThru:Y},"dalle-"+((ae=(te=s.messages[0])==null?void 0:te.id)!=null?ae:i));case e.GizmoEditor:return a.jsx(Dt,{messages:s.messages},"gizmo-editor-"+((ne=(ie=s.messages[0])==null?void 0:ie.id)!=null?ne:i));case e.oiw209h:return a.jsx(vt,{messages:s.messages,clientThreadId:n.id},"oiw209h-"+((le=(oe=s.messages[0])==null?void 0:oe.id)!=null?le:i));case e.n7jupd_p:return a.jsx(lt,{});case e.Canmore:return a.jsx(ot,{messages:s.messages,allTurnMessages:l,isFinalTurn:g,isRequestActive:y,clientThreadId:n.id,isUserTurn:d},"canmore-"+((ce=(re=s.messages[0])==null?void 0:re.id)!=null?ce:i));case e.Container:case e.Oboe:return null;case e.Croquette:return null;case e.Debug:return G?a.jsx(Pt,{message:s.messages[0]},"debug-"+s.messages[0].id):null;case e.SearchResult:return a.jsx(zt,{messages:s.messages},"search-result-"+((de=(me=s.messages[0])==null?void 0:me.id)!=null?de:i));case e.Mochi:return null;case e.CoTSearchTool:return null;case e.SuperWidget:return null;case e.n7jupd_image_gen:return null;case e.e1ld0dvz:return null;case e.Glaux:return a.jsx(Ot,{messages:s.messages,isLastMessage:r},"glaux-"+s.messages[0].id);case e.Strix:return null}}),Oe=wt(),{wordFadeType:R,animationDurationMs:os}=It(),N=L.useRef([]),ls=L.useRef(void 0),rs=L.useRef(null),M=!d&&g&&m,cs=(ms=l[0])==null?void 0:ms.id;return Xe(()=>{if(R!=="indexed"||!M)return;const s=rs.current;if(!s)return;ls.current!==cs&&(ls.current=cs,N.current=[]);const i=s.getAnimations({subtree:!0}).filter(y=>y.animationName===ye["fade-in"]);if(i.length!==0){const y=sa({now:performance.now(),previousStartTimes:N.current,groupCount:i.length});N.current=y;for(let r=0;r<i.length;r++)i[r].startTime=y[r]}else N.current=[]},[J,R,M]),a.jsx("div",{className:_e("flex max-w-full flex-col",{[ye.root]:R==="indexed"&&M,grow:V}),style:R==="indexed"?{"--duration":"".concat(os,"ms")}:void 0,ref:rs,children:a.jsx(Ye,{name:"GroupedMessages",fallback:qt,children:d?J:a.jsxs(jt,{isDisabled:!M||R!=="delay",defaultAnimationDurationPerSegmentMs:os,children:[bt(Q)&&g&&a.jsx(pt,{isStreaming:m,debug:Oe}),J]},(ds=l[0])==null?void 0:ds.id)})})}function qt({error:t}){return a.jsxs(Et,{type:"danger",children:[a.jsx(Ie,{id:"5eGo3w",defaultMessage:"Unable to display this message due to an error."}),!1]})}function Gt(t,l,h){if(t.length<2||l<=0)return 0;const n=l/Math.log(2);t=[...t].sort((_,g)=>_-g);let d=0,m=0;for(let _=t.length-1;_>0;--_){const g=Math.exp(-(h-t[_])/n);if(d>0&&g/d<.01)break;const j=t[_]-t[_-1];d+=g,m+=g*j}return d===0?0:d/m}function sa({now:t,previousStartTimes:l,groupCount:h,initialRate:n=50,halfLife:d=1}){var p;const m=l.slice(0,X(l,u=>u<=t)+1),_=m.length<2?n/1e3:Math.max(.01,Gt(m,d*1e3,t)),g=h-m.length;let j=(p=m[m.length-1])!=null?p:0,b=1;for(let u=0;u<g;u++){const P=_*1e3*b;g<P?b*=.8:g>P&&(b*=1.5);const w=1/(_*b),V=Math.max(t,j+w);m.push(V),j=V}return m}export{oa as C};
//# sourceMappingURL=he1xnididjbc7s63.js.map
