const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gosr9rxp0v3e8kw5.js","assets/kfrdmkli83ureki3.js","assets/l3z5gz1257zwquc2.js","assets/dnpenovn9ku8sbs2.js","assets/bonby2i4xf93dev1.js","assets/jqy8zfwhk6ptqvmj.js","assets/iz35nlf95x4k1pcg.js","assets/cus6e9b5l060ctey.js","assets/ailj2wmeuzip7d2v.js","assets/ztysthz0x5np2s72.js","assets/l4m29zus5vmyfglr.js","assets/dj0is5ih6q2um8xj.js"])))=>i.map(i=>d[i]);
var Be=Object.freeze,Fe=Object.defineProperty,hs=Object.defineProperties;var js=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var ys=Object.prototype.hasOwnProperty,ks=Object.prototype.propertyIsEnumerable;var Oe=(s,a,t)=>a in s?Fe(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,k=(s,a)=>{for(var t in a||(a={}))ys.call(a,t)&&Oe(s,t,a[t]);if(Ue)for(var t of Ue(a))ks.call(a,t)&&Oe(s,t,a[t]);return s},O=(s,a)=>hs(s,js(a));var ne=(s,a)=>Be(Fe(s,"raw",{value:Be(a||s.slice())}));import{j as e,M as n,l as f,r as M,h as $,u as pe,_ as A,e as Ye,b as vs}from"./kfrdmkli83ureki3.js";import{d8 as r,cv as He,k1 as _s,u as Z,J as ws,aC as G,db as K,H as Ms,da as bs,al as Xe,gs as xe,az as B,qy as g,qz as H,pd as L,qA as Je,p as $e,dT as Ns,dk as Ps,p9 as Ts,fb as ae,pa as Rs,pb as Ss,j as Cs,gy as Is,qB as ze,qd as ue,cy as ge,eG as C,qC as Es,cq as qe,aB as X,p8 as Ls,fd as As,pc as Bs,R as Ze,aA as U}from"./kw08ajijqinojrwh.js";import{J as j,dE as es,bB as Us,g5 as Os,y as Fs,aN as zs,aA as le,gK as qs,aI as Ws}from"./fyw02vlaiv2vq6cj.js";import{C as Ds}from"./octxl093if6ckp4g.js";function ss(s){return s==r.User||s==r.Group?r.Private:s==r.WorkspaceLink?r.Workspace:s}function F(s,a){return s=ss(s),a===void 0?!1:a.some(t=>t.recipient===s&&t.allowed)}function fe(s,a){if(a===void 0)return[];s=ss(s);const t=a.find(c=>c.recipient===s);return t==null?void 0:t.moderated_fields}function oe(s,a){const t=fe(s,a);return t&&t.length>0}var Ge;const We=He.a(Ge||(Ge=ne(["bold underline"])));var Qe;const Vs=He.textarea(Qe||(Qe=ne(["w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32"])));var as=(s=>(s[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s))(as||{}),ts=(s=>(s[s.None=0]="None",s[s.PublishBlocked=1]="PublishBlocked",s[s.RemovedFromMarketplace=2]="RemovedFromMarketplace",s[s.RemovedFromPublic=3]="RemovedFromPublic",s[s.RemovedFromPrivate=4]="RemovedFromPrivate",s[s.Recategorized=5]="Recategorized",s))(ts||{});function fa(s){var c;if(!s)return;const a=((c=s.gizmo.appeal_info)==null?void 0:c.state.kind)==="appeal_sent",t=Ks(s.gizmo.share_recipient,s.gizmo.sharing_targets);return{sharingRecipient:s.gizmo.share_recipient,categories:s.gizmo.categories,gizmoId:s.gizmo.id,moderationType:t,sharingTargets:s.gizmo.sharing_targets,showModal:a?2:t!==0?1:0}}const De={[r.User]:r.Private,[r.Group]:r.Private,[r.WorkspaceLink]:r.Workspace};function Ks(s,a=[]){const t=new Set(a.filter(u=>u.allowed).map(u=>u.recipient));if(!s||(s in De&&(s=De[s]),t.has(s)))return 0;const c=t.has(r.Private)||t.has(r.Workspace),l=t.has(r.Link)||t.has(r.Marketplace);return s===r.Marketplace&&l?2:!l&&c?3:4}function Ve(s){switch(s){case 0:case 1:return f({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case 2:return f({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case 3:return f({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case 4:return f({id:"gizmo.appeals.removedFromPrivateTitle",defaultMessage:"Your GPT has been removed from private view"});case 5:return f({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"})}}function Gs(s){switch(s){case"profile_picture":return f({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return f({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return f({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return f({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return f({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return f({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return f({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return f({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return f({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"GPT Content"})}}function Qs(s){switch(s){case r.Private:case r.Workspace:return f({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Link:return f({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Marketplace:return f({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:_s(s)}}function is({sharingRecipient:s,moderatedFields:a,appealAvailable:t}){const c=a.length;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(n,O(k({},Qs(s)),{values:{usagePolicyLink:l=>e.jsx(We,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:l})}}))," ",c>0&&e.jsx(n,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:"{numModeratedFields, plural,\n              one {See below for the specific issue:}\n              other {See below for the specific issues:}\n            }",values:{numModeratedFields:c}})]}),c>0&&(a==null?void 0:a.map(l=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:e.jsx(n,k({},Gs(l.name)))}),e.jsx("ul",{className:"list-disc ps-5",children:l.reasons.map(u=>e.jsxs("li",{children:[u.description," ",u.link?e.jsx(We,{href:u.link,target:"_blank",rel:"noreferrer",children:e.jsx(n,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},u.description))})]}))),t&&e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}function Ys({gizmoId:s,sharingRecipient:a,categories:t,moderationType:c,sharingTargets:l,appealAvailable:u,onClose:m,onAppealSubmitted:v}){var q;const h=$(),[R,z]=M.useState(""),[x,b]=M.useState(0),[S,N]=M.useState(!1),_=pe(),I=async()=>{N(!0);try{await xe.postGizmoAppeal(_,s,R,a,t),b(2),v==null||v()}finally{N(!1)}},o=fe(a,l),w=(q=o==null?void 0:o.length)!=null?q:0,d=Z(),Y=Xe(d);if(w==0&&(Y==null?void 0:Y.isEnterprisey()))return e.jsx(G,{testId:"modal-gizmo-appeal-available",title:h.formatMessage(Ve(c)),isOpen:!0,onClose:m,showCloseButton:!0,type:"warning",primaryButton:e.jsx(K.Button,{color:"primary",onClick:m,children:e.jsx(n,{id:"wEsAOU",defaultMessage:"OK"})}),children:e.jsx("p",{className:"text-sm",children:e.jsx(n,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(x){case 0:return e.jsx(G,{testId:"modal-gizmo-appeal-available",title:h.formatMessage(Ve(c)),isOpen:!0,onClose:m,showCloseButton:!0,primaryButton:e.jsx(K.Button,{color:"primary",onClick:m,children:e.jsx(n,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:u?e.jsx(K.Button,{onClick:()=>b(1),children:e.jsx(n,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx(is,{sharingRecipient:a,moderatedFields:o!=null?o:[],appealAvailable:u})})});case 1:return e.jsx(G,{testId:"modal-gizmo-appeal-form",title:h.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:m,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:e.jsx(K.Button,{color:"primary",onClick:I,disabled:S||R.trim().length===0,children:e.jsx(n,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:e.jsx(K.Button,{onClick:()=>b(0),children:e.jsx(n,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),e.jsx(Vs,{value:R,onChange:ee=>z(ee.target.value)})]})});case 2:return e.jsx(e.Fragment,{})}}function Hs({onClose:s}){const a=$();return e.jsx(G,{testId:"modal-gizmo-appeal-submitted",title:a.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:s,showCloseButton:!0,primaryButton:e.jsx(K.Button,{color:"primary",onClick:s,children:e.jsx(n,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx("div",{children:e.jsx(n,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function Xs({gizmoId:s,onClose:a}){const{data:t}=Ms(s,!0),c=pe(),l=async()=>{await xe.postGizmoCancelAppeal(c,s)};return e.jsx(G,{testId:"modal-gizmo-appeal-sent",isOpen:!0,onClose:bs,primaryButton:e.jsx(K.Button,{color:"primary",onClick:()=>{l(),a==null||a()},children:e.jsx(n,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("h2",{className:"text-lg font-semibold",children:e.jsx(n,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:t==null?void 0:t.gizmo.display.name}})})]})})}function ha({appealState:s,onAppealClose:a,onAppealSubmitted:t}){const c=Z(),l=ws(c,"4226692983"),[u,m]=M.useState(!1);return u?e.jsx(Hs,{onClose:()=>{m(!1),t==null||t()}}):e.jsxs(e.Fragment,{children:[(s==null?void 0:s.showModal)==2&&e.jsx(Xs,{gizmoId:s.gizmoId,onClose:a}),(s==null?void 0:s.showModal)==1&&e.jsx(Ys,{gizmoId:s.gizmoId,sharingRecipient:s.sharingRecipient,categories:s.categories,moderationType:s.moderationType,sharingTargets:s.sharingTargets,appealAvailable:l,onClose:()=>a==null?void 0:a(),onAppealSubmitted:()=>m(!0)})]})}const ce=B(()=>A(()=>import("./gosr9rxp0v3e8kw5.js"),__vite__mapDeps([0,1])),{loading:s=>U(s)}),Js=B(()=>A(()=>import("./l3z5gz1257zwquc2.js"),__vite__mapDeps([2,1])),{loading:s=>U(s)}),$s=B(()=>A(()=>import("./dnpenovn9ku8sbs2.js"),__vite__mapDeps([3,1])),{loading:s=>U(s)}),Zs=B(()=>A(()=>import("./bonby2i4xf93dev1.js"),__vite__mapDeps([4,1])),{loading:s=>U(s)}),Ke=B(()=>A(()=>import("./jqy8zfwhk6ptqvmj.js"),__vite__mapDeps([5,1])),{loading:s=>U(s)}),me=B(()=>A(()=>import("./iz35nlf95x4k1pcg.js"),__vite__mapDeps([6,1])),{loading:s=>U(s)}),ea=B(()=>A(()=>import("./cus6e9b5l060ctey.js"),__vite__mapDeps([7,1])),{loading:s=>U(s)}),sa=B(()=>A(()=>import("./ailj2wmeuzip7d2v.js"),__vite__mapDeps([8,1])),{loading:s=>U(s)}),aa=B(()=>A(()=>import("./ztysthz0x5np2s72.js"),__vite__mapDeps([9,1])),{loading:s=>U(s)}),ta=B(()=>A(()=>import("./l4m29zus5vmyfglr.js"),__vite__mapDeps([10,1])),{loading:s=>U(s)}),rs=B(()=>A(()=>import("./dj0is5ih6q2um8xj.js"),__vite__mapDeps([11,1])).then(s=>s.DirectorySyncResourceManagedIndication)),ia=()=>[L,H,Es];function ns(s,a){return s.type===g.USER?s.user_id===a.user_id:s.type===g.GROUP?s.group_id===a.group_id:s.type===g.EMAIL?a.type===g.EMAIL&&s.user_email.toLowerCase()===a.user_email.toLowerCase():s.type===a.type}const ra={[g.USER]:r.User,[g.GROUP]:r.Group,[g.WORKSPACE]:r.Workspace,[g.ALL]:r.Marketplace};function ls(s){const a=ra[s.type];if(!a)throw new Error("Unknown sharing subject type: "+s.type);return O(k({},s),{type:a})}function na({gizmo:s,publishedGizmo:a,updateGizmo:t,promoteGizmo:c,appealGizmo:l,setAppealState:u,showActionsModal:m,shareOnly:v,onClose:h,workspaceOwner:R=!1}){var be,Ne,Pe,Te,Re,Se,Ce,Ie,Ee;const z=Z(),x=$(),b=$e(),S=Ns(),N=(Ne=(be=S==null?void 0:S.data)==null?void 0:be.name)!=null?Ne:"your workspace",_=Ps(),I=Ts(),[o,w]=M.useState(void 0);M.useEffect(()=>{var i;if(o==null)if(a!=null&&a.gizmo.display.categories&&(a==null?void 0:a.gizmo.display.categories.length)>0){const p=(i=I.data)==null?void 0:i.categories.find(E=>E.id===(a==null?void 0:a.gizmo.display.categories[0]));p&&w(p)}else I.data!=null&&w(I.data.categories[I.data.categories.length-1])},[I.data,o,a]);const[d,Y]=M.useState((Pe=s.sharingRecipient)!=null?Pe:r.Private),[y,q]=M.useState((Re=(Te=s.sharing)==null?void 0:Te.subjects)!=null?Re:[]),[ee,ds]=M.useState(null),[ye,ke]=M.useState(!1),te=M.useRef(null),ve=M.useRef(y.length);M.useEffect(()=>{y.length>ve.current&&requestAnimationFrame(()=>{var i;(i=te.current)==null||i.scrollTo({top:te.current.scrollHeight,behavior:"smooth"})}),ve.current=y.length},[y]);const us=M.useCallback(()=>{var i;return!ae((i=s.sharing)==null?void 0:i.subjects,y)||s.sharingRecipient!==d},[s.sharing,s.sharingRecipient,d,y]),W=pe(),_e=Rs(s,d,(Se=o==null?void 0:o.id)!=null?Se:void 0),ms=_e.includes(Ss.MissingPublicActionPrivacyPolicyURL),ie=s.tools.find(i=>i.type===Cs.JIT_PLUGIN&&!i.metadata.privacy_policy_url);if(ee)return e.jsx(cs,{publishedGizmo:ee,sharing:{recipient:d,subjects:y},workspaceName:N,onClose:h});function ps(i){y.find(p=>ns(p,i))||q([...y,i])}const P=Je(y);function re(i){const p=y.filter(E=>[g.WORKSPACE,g.ALL].indexOf(E.type)===-1);i!=null&&p.push(i),q(p)}function xs(i){switch(Y(i),i){case r.Marketplace:case r.Link:re({type:g.ALL,capabilities:L});break;case r.Workspace:case r.WorkspaceLink:re({type:g.WORKSPACE,capabilities:L});break;default:re(null)}}function we(i){P!=null&&q(y.map(p=>p===P?O(k({},p),{capabilities:i}):p))}function gs(i,p,E){return i.type===g.USER&&i.user_id.indexOf("__")===-1?O(k({},i),{user_id:i.user_id+"__"+(S==null?void 0:S.getWorkspaceId())}):i}async function fs(i,p){var Q,Le;if(ye)return;if(i&&!p)throw new Error("Cannot share a gizmo that hasn't been promoted before");if(!o)return;ke(!0);let D=y.map(gs).map(ls);if(D=Bs(d,D,(Q=P==null?void 0:P.capabilities)!=null?Q:L),R)return!S||!p?(b.warning("Unable to change sharing settings"),h()):(await Ze.safePost("/accounts/{account_id}/gpts/{gizmo_id}/share",{parameters:{path:{account_id:S.id,gizmo_id:p}},requestBody:{sharing:D}}),b.success(x.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),W.invalidateQueries({queryKey:["workspace"]}),h());if(i){if(!p||!a)throw new Error("No gizmo ID to share");try{const T={sharing:D};o&&(T.categories=[o.id]);const se=await xe.shareGizmo(p,T);se.error?oe(d,se.sharing_targets)?(u==null||u({gizmoId:a.gizmo.id,sharingRecipient:d,categories:a.gizmo.display.categories,moderationType:ts.PublishBlocked,sharingTargets:se.sharing_targets,showModal:as.AppealAvailable}),h()):b.warning(x.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(W.setQueryData(["gizmo",{gizmoId:a.gizmo.id},{draft:!1}],Ae=>se.resource),t==null||t(Ae=>O(k({},Ae),{sharingRecipient:d})),b.success(x.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),h())}catch(T){return b.warning(x.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),h()}}else{if(c){const T=await c({subjects:D,recipient:d},o.id);p||(p=T==null?void 0:T.gizmo.id),ds(T!=null?T:null),t==null||t({liveVersion:(Le=T==null?void 0:T.gizmo.live_version)!=null?Le:void 0})}W.invalidateQueries({queryKey:["gizmo",{gizmoId:p}]})}ke(!1),W.invalidateQueries({queryKey:["gizmos"]}),W.refetchQueries({queryKey:["gizmos","discovery"]}),W.refetchQueries({queryKey:["gizmo",{gizmoId:p}]}),W.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:p}]}),W.invalidateQueries({queryKey:["workspace"]}),t==null||t({sharing:{recipient:d,subjects:y},sharingRecipient:d},!1)}const Me=!a||ca(a.gizmo.author.user_id.split("__")[0],_==null?void 0:_.id);return e.jsx(G,{testId:"modal-share-gizmo",type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:h,primaryButton:oe(d,s.sharingTargets)?e.jsx(X,{onClick:()=>l(d,o==null?void 0:o.id),children:e.jsx(n,{id:"HRzqKK",defaultMessage:"Appeal"})}):e.jsx(X,{onClick:()=>fs(v,a==null?void 0:a.gizmo.id),loading:ye,disabled:_e.length>0||!F(d,s.sharingTargets),children:v?e.jsx(n,{id:"BEKjVh",defaultMessage:"Save"}):e.jsx(n,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:e.jsxs(e.Fragment,{children:[us()&&e.jsx("div",{className:"text-token-text-secondary absolute start-6 bottom-8 text-sm",children:e.jsx(n,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),a&&e.jsx(X,{color:"secondary",onClick:i=>es(z,a,b,i,x.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:x.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(oa,{onAdd:i=>ps(i),publishedGizmo:a}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"bNQXcV",defaultMessage:"Share with..."})}),e.jsxs("div",{ref:te,className:"max-h-[200px] space-y-2 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx("div",{className:"shrink-0 grow-0 self-start",children:Me?e.jsx(Is,{user:_}):e.jsx(ze,{name:(Ce=a.gizmo.author.display_name)!=null?Ce:"User",initialsCount:2})}),e.jsx("div",{className:"grow text-base font-semibold",children:Me?e.jsxs("div",{className:"flex flex-col",children:[e.jsx(n,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:_==null?void 0:_.name}}),e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:_==null?void 0:_.email})]}):e.jsx(n,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:a.gizmo.author.display_name}})})]}),y.map((i,p)=>ue(i)&&e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx(ze,{name:i.type===g.GROUP?i.group_name:"".concat(i.user_name," ").concat(i.user_email),initialsCount:i.type===g.USER?2:1,className:ge("shrink-0 grow-0",i.type===g.USER&&"self-start")}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 text-base font-semibold",children:i.type===g.GROUP?i.group_name:i.user_name}),i.type===g.GROUP&&i.is_scim_managed&&e.jsx(rs,{})]}),i.type===g.USER&&e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:i.user_email})]}),e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[e.jsx(n,k({},J(i.capabilities))),e.jsx(me,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[ia().map((E,D)=>e.jsx(de,{capabilities:E,selected:ae(E,i.capabilities),onClick:()=>{q(y.map(Q=>Q===i?O(k({},Q),{capabilities:E}):Q))}},D)),e.jsx(C.Separator,{className:"my-2"}),e.jsx(C.Item,{onClick:()=>q(y.filter(E=>E!==i)),color:"danger",icon:Js,children:e.jsx(n,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},p))]}),e.jsx("hr",{className:"border-token-border-medium"}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"uqD7Y8",defaultMessage:"Access"})}),e.jsxs("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[e.jsxs(j.Root,{value:d,onValueChange:i=>xs(i),children:[e.jsxs(j.Trigger,{children:[e.jsx(j.Value,{}),e.jsx(j.Icon,{})]}),e.jsx(j.Portal,{children:e.jsxs(j.Content,{children:[e.jsxs(j.Group,{children:[e.jsx(j.Label,{children:e.jsx(n,{id:"YIQwaP",defaultMessage:"Private"})}),d===r.User?e.jsx(j.Item,{value:r.User,children:e.jsx(V,{shareLevel:r.User,workspaceName:N})}):e.jsx(j.Item,{value:r.Private,children:e.jsx(V,{shareLevel:r.Private,workspaceName:N})})]}),e.jsx(j.Separator,{}),e.jsx(qe,{triggerAs:null,label:x.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:F("workspace",s.sharingTargets),children:e.jsxs(j.Group,{children:[e.jsx(j.Label,{children:N}),e.jsx(j.Item,{value:r.WorkspaceLink,disabled:!F(r.WorkspaceLink,s.sharingTargets)&&!F(r.Workspace,s.sharingTargets),children:e.jsx(V,{shareLevel:r.WorkspaceLink,workspaceName:N})}),e.jsx(j.Item,{value:r.Workspace,disabled:!F("workspace",s.sharingTargets),children:e.jsx(V,{shareLevel:r.Workspace,workspaceName:N})})]})}),e.jsx(j.Separator,{}),e.jsx(qe,{triggerAs:null,label:x.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:F("marketplace",s.sharingTargets),children:e.jsxs(j.Group,{children:[e.jsx(j.Label,{children:e.jsx(n,{id:"PjY9bi",defaultMessage:"Public"})}),e.jsx(j.Item,{value:r.Link,disabled:!F("link",s.sharingTargets),children:e.jsx(V,{shareLevel:r.Link,workspaceName:N})}),e.jsx(j.Item,{disabled:!F("marketplace",s.sharingTargets),value:r.Marketplace,children:e.jsx(V,{shareLevel:r.Marketplace,workspaceName:N})})]})})]})})]}),d!==r.Private&&d!==r.User&&e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[P==null?e.jsx(n,k({},J(L))):e.jsx(n,k({},J(P.capabilities))),e.jsx(me,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[e.jsx(de,{onClick:()=>we(L),capabilities:L,selected:ae(P==null?void 0:P.capabilities,L)}),d!==r.Marketplace&&d!==r.Link&&e.jsx(de,{onClick:()=>we(H),capabilities:H,selected:ae(P==null?void 0:P.capabilities,H)})]})})]})]}),ms&&e.jsx("div",{className:"text-xs text-red-500",children:e.jsx(n,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:i=>e.jsx("button",{onClick:()=>{m==null||m(ie==null?void 0:ie.metadata.action_id),h()},className:"underline",children:i})}})}),(d===r.Marketplace||d===r.Workspace)&&(F(d,s.sharingTargets)?e.jsx(je,{gizmo:s,category:o==null?void 0:o.id,categories:(Ie=I.data)==null?void 0:Ie.categories,onCategoryChange:i=>w(i)}):oe(d,s.sharingTargets)?e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(is,{sharingRecipient:d,moderatedFields:(Ee=fe(d,s.sharingTargets))!=null?Ee:[],appealAvailable:!0})}):e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(n,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}const os=Ye({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},email:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),la=Ye({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function J(s){return s.can_write?f({id:"SubCqD",defaultMessage:"Can edit"}):s.can_view_config?f({id:"V6OjbX",defaultMessage:"Can view settings"}):s.can_read?f({id:"/0j34W",defaultMessage:"Can chat"}):f({id:"x2E8ET",defaultMessage:"Unknown"})}function de({capabilities:s,selected:a,onClick:t}){let c=null;s.can_write?c=Zs:s.can_view_config?c=$s:s.can_read&&(c=sa);const l=s.can_write?e.jsx(n,{id:"wKFMT1",defaultMessage:"Edit settings, duplicate, and chat"}):s.can_view_config?e.jsx(n,{id:"Y/J4TZ",defaultMessage:"See settings, duplicate, and chat"}):s.can_read?e.jsx(n,{id:"PvgEQP",defaultMessage:"Chat with this GPT only"}):null;return e.jsxs(C.Item,{className:"flex h-auto flex-row items-center px-3 py-3",onClick:t,icon:c,children:[e.jsxs("div",{className:"me-1 flex grow flex-col",children:[e.jsx("span",{className:"mb-0.5 text-base leading-tight",children:e.jsx(n,k({},J(s)))}),e.jsx("span",{className:"text-token-text-secondary text-xs",children:l})]}),e.jsx(ea,{className:ge("icon-lg shrink-0",!a&&"invisible")})]})}const he={private:ce,user:ce,group:ce,workspace_link:Ke,workspace:aa,link:Ke,marketplace:ta};function V({shareLevel:s,workspaceName:a,hasInviteSharing:t=!0}){(s===r.User||s===r.Group)&&(s=r.Private);const c=he[s];return e.jsxs("div",{className:"flex flex-row items-center gap-3 text-sm",children:[e.jsx(c,{className:"icon text-token-text-secondary"}),e.jsx("div",{className:"pt-px text-start",children:!t&&s===r.Private?e.jsx(n,{id:"vVJhYB",defaultMessage:"Only me"}):e.jsx(n,O(k({},os[s]),{values:{workspaceName:a}}))})]})}function cs({publishedGizmo:s,sharing:a,workspaceName:t,onClose:c}){var R,z;const l=Z(),u=a.recipient,m=he[u],v=$(),h=$e();return e.jsxs(G,{testId:"modal-gizmo-updated",isOpen:!0,onClose:c,showCloseButton:!0,className:"w-[304px]",title:e.jsx(n,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:e.jsx(X,{onClick:()=>{window.location.href="/g/".concat(s.gizmo.id)},children:e.jsx(n,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:e.jsx(X,{color:"secondary",onClick:x=>es(l,s,h,x,v.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[e.jsx(je,{gizmo:{profilePictureUrl:(R=s.gizmo.display.profile_picture_url)!=null?R:void 0,name:s.gizmo.display.name}}),a.subjects.filter(x=>ue(x)).length>0&&e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"/paYH9",defaultMessage:"Shared with"})}),a.subjects&&a.subjects.map((x,b)=>ue(x)&&e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:x.type===g.GROUP?x.group_name:x.user_name}),x.type===g.USER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:x.user_email})]})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,k({},J(x.capabilities)))})]},b))]}),e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"q9XNZ7",defaultMessage:"Access"})}),e.jsxs("div",{className:"ms-[3px] flex flex-row items-center py-3 text-start text-base font-semibold",children:[e.jsx(m,{className:"md:icon-lg me-3 h-6 w-6 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,O(k({},(z=la[u])!=null?z:os[u]),{values:{workspaceName:t}}))}),(u===r.Workspace||u===r.Marketplace)&&e.jsx("span",{className:"text-token-text-secondary text-xs"})]})]})]})]})}function je({gizmo:s,category:a,categories:t,onCategoryChange:c}){const{data:l,isLoading:u}=Ls(),m=t==null?void 0:t.find(v=>v.id===a);return e.jsxs("div",{children:[e.jsxs("div",{className:ge("bg-token-main-surface-secondary mb-[1px] flex flex-row items-center space-x-2 p-4",u&&"invisible",t?"rounded-t-lg":"rounded-lg"),children:[e.jsx(Us,{isFirstParty:!1,className:"h-11 w-11",src:s.profilePictureUrl}),e.jsxs("div",{className:"flex grow flex-col space-y-0",children:[e.jsx("span",{className:"text-base font-semibold",children:s.name}),e.jsx(Os,{builderName:l==null?void 0:l.display_name,builderUrl:l==null?void 0:l.website_url,socials:[l==null?void 0:l.socials.linkedin,l==null?void 0:l.socials.github].filter(v=>v!=null),className:"text-token-text-secondary text-xs"})]})]}),t&&e.jsxs("div",{className:"bg-token-main-surface-secondary flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg px-4 text-base",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"JcA4/t",defaultMessage:"Category"})}),e.jsx("div",{className:"text-token-text-secondary",children:c?e.jsx(As,{size:"small",triggerButton:e.jsxs("button",{className:"flex items-center gap-1",children:[m==null?void 0:m.title,e.jsx(me,{className:"icon"})]}),children:t.map((v,h)=>e.jsx(C.Item,{onClick:()=>c(v),children:v.title},h))}):e.jsx("span",{className:"text-token-text-secondary",children:m==null?void 0:m.title})})]})]})}function oa({onAdd:s,publishedGizmo:a}){var N,_,I;const t=$(),c=Z(),l=Xe(c),[u,m]=M.useState(""),h=(N=Fs(l==null?void 0:l.id,0,u,5).data)==null?void 0:N.items.filter(o=>o.account_user_id!==(a==null?void 0:a.gizmo.author.user_id)),{data:R}=vs({queryKey:[l==null?void 0:l.id,"groups","filtered",u],queryFn:()=>Ze.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:l.id},query:{query:u,offset:0,orderby:"@score",limit:20}}}),enabled:u.trim()!==""&&l!=null&&!!l.getWorkspaceId()});function z(o,w,d){s({type:g.GROUP,group_id:o,group_name:w,capabilities:k({},L),is_scim_managed:d}),m("")}function x(o,w,d){l&&(s({type:g.USER,user_id:o,user_name:w,user_email:d,capabilities:k({},L)}),m(""))}const b=l!=null&&l.isEnterprisey()?t.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):t.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),{eligible:S}=zs(le.hasSeenMultipleGPTEditorsTooltip);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex w-full flex-row space-x-3",children:e.jsx(qs,{announcementKey:le.hasSeenMultipleGPTEditorsTooltip,show:S,side:"right",align:"center",className:"w-full",sideOffset:0,contentClassName:"z-100",childrenWrapperClassName:"w-full",theme:"bright",dismissOnOutsideClick:!0,badge:"new",description:t.formatMessage({id:"SR33A6",defaultMessage:"You can now add editors to collaborate on your GPTs."}),onDismiss:()=>Ws(c,le.hasSeenMultipleGPTEditorsTooltip),children:e.jsx(Ds,{label:b,name:"share-with-input",inputValue:u,onInputChange:m,suggestions:[...(_=h==null?void 0:h.map(o=>({id:o.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var w;return x(o.account_user_id,o.name,(w=o.email)!=null?w:"")},children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full font-semibold",children:o.name}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:o.email})]})})))!=null?_:[],...(I=R==null?void 0:R.items.map(o=>({id:o.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var w;return z(o.id,o.name,(w=o.is_scim_managed)!=null?w:!1)},children:e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 font-semibold",children:o.name}),o.is_scim_managed&&e.jsx(rs,{})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(n,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:o.num_members}})})]})})))!=null?I:[]]})})})})}function ca(s,a){return s===void 0||a===void 0?!1:s.split("__")[0]===a.split("__")[0]}const da={findHighestSharingSubject:Je,duplicateSharingSubject:ns,CAP_READ:L,CAP_VIEW_CONFIG:H},ja=Object.freeze(Object.defineProperty({__proto__:null,GizmoTile:je,GizmoUpdatedModal:cs,SHARE_LEVEL_ICONS:he,ShareGizmoModal:na,ShareLevelItem:V,TestExports:da,sharingSubjectToSharingParam:ls},Symbol.toStringTag,{value:"Module"}));export{as as A,je as G,ts as M,V as S,na as a,he as b,cs as c,ha as d,ja as e,fa as g,F as i,ls as s};
//# sourceMappingURL=gkqhbgrbj1y58hh3.js.map
