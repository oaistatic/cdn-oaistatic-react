import{bE as E,u as _,N as x,co as A,oC as F,D as T,oD as q}from"./kw08ajijqinojrwh.js";import{S as w,bL as D,bM as L,bN as M}from"./fyw02vlaiv2vq6cj.js";import{r as y,b as P}from"./kfrdmkli83ureki3.js";const m=300*1e3,Q=30*1e3;function N(f,h,p,s,r){var c;const o=(c=y.useContext(w))==null?void 0:c.serverSharedThreadId,t=D(p),b=y.useMemo(()=>({asset_pointer:t,content_type:E.ArbitraryAssetPointer}),[t]),n=L(),I=_(),g=!x(I),d=A(h),a=M.makeQueryOptions({asset:b,sharedThreadId:o,postId:n,gizmoId:void 0,isUnauthenticated:g,conversationId:o?void 0:d}),i=F(),C=!!(f&&(d||o||n)&&t&&a.enabled),u=a.queryFn;if(typeof u=="symbol")throw Error("Unexpected symbol query fn...");return P({queryKey:a.queryKey,queryFn:async v=>{try{const e=await u(v);return s==null||s(e.url),{status:"success",download_url:e.url}}catch(e){T.addError(e);let l=i("default_download_link_error",{fileName:t});throw e instanceof q&&e.code!=null&&(l=i(e.code)),r==null||r(l),e}},enabled:C,staleTime:m,gcTime:Q,refetchInterval:m,refetchOnWindowFocus:!0})}export{N as u};
//# sourceMappingURL=fey3pq4cxpkljcdg.js.map
