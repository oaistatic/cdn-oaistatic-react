const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mauhe4xggt6ulnl1.js","assets/kfrdmkli83ureki3.js","assets/iwr3smf9emayvqcc.js","assets/m6idklazvjc7d344.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/bpdamea8h8vnnahr.js","assets/ywxlziofi4jg74sa.js","assets/gz2kraed79kezjd0.js","assets/fyw02vlaiv2vq6cj.js","assets/conversation-small-lq38g8zw.css","assets/kf7tqzde2yk57qjr.js","assets/c80q12olrn2ogvv0.js","assets/dnv6hspqfrgw4och.js","assets/kcwv15xxjkwkz15c.js","assets/fheow89om2nv884m.js"])))=>i.map(i=>d[i]);
var L=Object.defineProperty;var M=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var k=(s,t,o)=>t in s?L(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,R=(s,t)=>{for(var o in t||(t={}))z.call(t,o)&&k(s,o,t[o]);if(M)for(var o of M(t))A.call(t,o)&&k(s,o,t[o]);return s};import{h as B,e as D,j as e,M as F,_ as u,r as I}from"./kfrdmkli83ureki3.js";import{p as V,u as O,cy as W,az as m,cq as H,aB as C,aA as E,aC as Q,f9 as q,D as X,d_ as G}from"./kw08ajijqinojrwh.js";import{u as S,r as J}from"./gz2kraed79kezjd0.js";import{S as K}from"./ywxlziofi4jg74sa.js";import{fX as U}from"./fyw02vlaiv2vq6cj.js";import{u as Y}from"./fey3pq4cxpkljcdg.js";import{d as Z}from"./kl7c6054usfnqmd4.js";import{F as $}from"./f9w7j5yxpj8jmmro.js";import"./kf7tqzde2yk57qjr.js";const ee=m(()=>u(()=>import("./mauhe4xggt6ulnl1.js"),__vite__mapDeps([0,1])),{loading:s=>E(s)}),se=m(()=>u(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([2,1])),{loading:s=>E(s)}),te=m(()=>u(()=>import("./m6idklazvjc7d344.js"),__vite__mapDeps([3,1])),{loading:s=>E(s)}),oe=m(()=>u(()=>import("./kw08ajijqinojrwh.js").then(s=>s.yt),__vite__mapDeps([4,1,5])),{loading:s=>E(s)}),v=D({downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},title:{id:"walnut.title",defaultMessage:"Preview"},tooltip:{id:"walnut.tooltip",defaultMessage:"This is a web preview and may not reflect exact formatting. Download to open in your preferred software for best results."}}),ae=({onClose:s,onPlay:t,extension:o,contentType:a,clientThreadId:d,editHandlers:b})=>{var N;const n=B(),j=V(),y=a==="presentation",{formatMessage:f}=B(),r=f(v.title),x=f(v.tooltip);O();const{focusedWalnutId:l,presentationMap:p}=S(),i=l?p[l]:void 0,g=(N=i==null?void 0:i.fileName)!=null?N:a==="presentation"?"presentation.pptx":"spreadsheet.xlsx",h=!1,w=i==null?void 0:i.fileBlob,c=n.formatMessage(v.downloadFileError),T=Y(!1,d,l!=null?l:"",()=>{},()=>{j.danger(c,{toastId:"post_sharing_modal_download_error",loggingTitle:c,loggingDescription:"Error message when a file download fails"})});return e.jsxs("div",{className:W("text-token-text-secondary border-token-border-light relative flex w-full items-center justify-between border-b px-3 py-2",h),children:[e.jsxs("div",{className:"z-10 flex flex-row gap-2",children:[e.jsx(U,{onClick:s,children:e.jsx(oe,{})}),!1]}),e.jsxs("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-1",children:[e.jsx($,{fileName:r!=null?r:null}),e.jsx("div",{className:"text-token-text-primary flex flex-row items-center truncate text-sm font-medium",children:e.jsx(H,{label:x,theme:"white",defaultOpen:!0,customBackgroundColorClassName:"bg-[#6B91F1]",labelClassName:"text-white font-light",side:"bottom",disabled:h,children:e.jsxs("div",{className:"flex flex-row items-center",children:[r,e.jsx(se,{className:"ms-1 size-4"})]})})}),o&&e.jsx("div",{className:"text-token-text-tertiary ms-2 text-sm",children:o})]}),e.jsxs("div",{className:"z-10 flex items-center gap-1",children:[!1,e.jsx(C,{color:"ghost",size:"small",onClick:async()=>{if(w)Z(w,g);else{const{data:_}=await T.refetch();if(_===void 0||(_==null?void 0:_.status)!=="success"){j.danger(c,{toastId:"post_sharing_modal_download_error",loggingTitle:c,loggingDescription:"Error message when a file download fails"});return}const P=document.createElement("a");P.href=_.download_url,P.click()}},children:e.jsx(te,{})}),y&&e.jsx(C,{color:"primary",onClick:t,size:"small",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{}),e.jsx("span",{className:"hidden sm:block",children:e.jsx(F,{id:"walnut.play",defaultMessage:"Play Slideshow"})})]})})]})]})},re=m(()=>u(()=>import("./bpdamea8h8vnnahr.js"),__vite__mapDeps([6,1,4,5,7,8,9,10,11,12,13,14])).then(s=>s.CanvasRenderer)),ne=m(()=>u(()=>import("./fheow89om2nv884m.js"),__vite__mapDeps([15,1,4,5,14,8,7,9,10,11])).then(s=>s.SpreadsheetRenderer));function le({isOpen:s,onClose:t,clientThreadId:o}){const[a,d]=I.useState(!1),{presentationMap:b,focusedWalnutId:n,setSelectedSlideIdx:j}=S(),[y,f]=I.useState(!1),r=n?b[n]:null,{presentation:x,fileName:l,workbook:p,document:i}=r!=null?r:{};if(!n||!r)return null;const g=x?"presentation":p?"spreadsheet":"none",h=g==="presentation"&&x&&!a,w=g==="spreadsheet"&&p&&!a;return e.jsx(Q,{testId:"modal-walnut-content",type:"success",size:"fullscreen",isOpen:s,onClose:t,visuallyHiddenHeader:!0,children:e.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[e.jsx(ae,{onClose:t,onPlay:()=>d(!a),title:l,contentType:g,clientThreadId:o,canEdit:!1}),h&&e.jsx(re,{presentation:x,selectedSlideIdx:r.selectedSlideIdx,setSelectedSlideIdx:c=>j(n,c),isEditing:y,setIsEditing:f}),w&&e.jsx(ne,{workbook:p,selectedSheetIdx:r.selectedSheetIdx,isEditing:y,setIsEditing:f}),!1,a&&e.jsx(K,{startIndex:0,onExit:t,walnutId:n}),!h&&!w&&!0&&!a&&e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(F,{id:"walnut.noFile",defaultMessage:"No file selected."})})]})})}const ie=({clientThreadId:s})=>{const{isOpen:t,close:o}=S(),a=t?e.jsx(le,{isOpen:t,onClose:o,clientThreadId:s}):null;return e.jsx(G,{children:a},s)},_e=s=>{const t=I.useRef(null);return e.jsx(q,{ref:t,onError:(o,a)=>{J(),setTimeout(()=>{var d;(d=t.current)==null||d.resetErrorBoundary()}),X.addError(o,{componentStack:a})},name:"walnut-focused-view",children:e.jsx(ie,R({},s))})};export{_e as WalnutFocusedViewManager};
//# sourceMappingURL=pcc24zxneqcpgb0x.js.map
