const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fbdmxe5ygbrc3wdb.js","assets/evkgh503atu6x10z.js","assets/kw08ajijqinojrwh.js","assets/kfrdmkli83ureki3.js","assets/root-fi49nzd2.css","assets/fyw02vlaiv2vq6cj.js","assets/conversation-small-lq38g8zw.css"])))=>i.map(i=>d[i]);
var St=Object.defineProperty;var rt=Object.getOwnPropertySymbols;var Vt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var nt=(t,e,n)=>e in t?St(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T=(t,e)=>{for(var n in e||(e={}))Vt.call(e,n)&&nt(t,n,e[n]);if(rt)for(var n of rt(e))lt.call(e,n)&&nt(t,n,e[n]);return t};var p=(t,e,n)=>nt(t,typeof e!="symbol"?e+"":e,n);import{qH as gt,qI as bt,n as yt,qJ as wt,qK as ft,qL as Rt}from"./fyw02vlaiv2vq6cj.js";import{B,bo as It,Q as Ut,iz as zt,a as Me,c9 as it,jS as Ft,qU as _t,eW as mt,tt as qt,bI as xt}from"./kw08ajijqinojrwh.js";import{_ as Tt}from"./kfrdmkli83ureki3.js";class st extends Error{constructor(){super("Invalid message header")}}class ut extends Error{constructor(){super("Invalid struct header")}}class Dt extends Error{constructor(){super("Invalid union header")}}class kt extends Error{constructor(){super("Invalid handle encoding")}}class X extends Error{constructor(){super("Invalid enum value")}}class ht extends Error{constructor(){super("Unexpected null value")}}class H extends Error{constructor(){super("Buffer range out of bounds")}}class qe extends Error{constructor(e){super(e?"Not implemented: ".concat(e):"Not implemented")}}class jt extends Error{constructor(e){super(e?"Assertion failed: ".concat(e):"Assertion failed")}}function $e(t,e){if(!t)throw new jt(e)}class dt{constructor(e){p(this,"rawHandle");this.rawHandle=e}close(){this.rawHandle.close()}watch(e,n){const s=this.rawHandle.watch(e,i=>{s.cancel(),n(i)})}}class ae extends dt{write(e,n=[]){const s=gt(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));this.rawHandle.writeMessage(s,n.map(i=>i.rawHandle))}read(){const{result:e,buffer:n,handles:s}=this.rawHandle.readMessage();return e==Mojo.RESULT_SHOULD_WAIT?{status:"nothing"}:e==Mojo.RESULT_FAILED_PRECONDITION?{status:"dead"}:($e(e===Mojo.RESULT_OK,"unexpected read result"),{status:"ok",data:n,handles:s.map(i=>new dt(i))})}}function Ot(){const{handle0:t,handle1:e}=Mojo.createMessagePipe();return[new ae(t),new ae(e)]}var k;(t=>{function e(n){const[s,i]=Ot();return[new et(n,s),new ve(n,i)]}t.createChannel=e})(k||(k={}));class ve{constructor(e,n){p(this,"interfaceType");p(this,"pipe");this.interfaceType=e,this.pipe=n}get endpointState(){return{kind:"primary",pipe:this.pipe}}}class et{constructor(e,n,s=null){p(this,"interfaceType");p(this,"pipe");p(this,"version");this.interfaceType=e,this.pipe=n,this.version=s!=null?s:e.interfaceVersion}static toBrowser(e){const[n,s]=Ot();return Mojo.bindInterface(e.interfaceName,n.rawHandle),new et(e,s)}get endpointState(){return{kind:"primary",pipe:this.pipe}}}function pe(t){return t+7&-8}function y(t){if(t===null)throw new ht;return t}function W(t){if(t===null)return null;for(let e=0;e<t.length;++e)if(t[e]===null)throw new ht;return t}const K=8,ce=16,Se=8,Et=4294967295,G=8,j=class j{constructor(e=0,n=0){p(this,"numBytes",0);p(this,"numAssociatedEndpoints",0);this.numBytes=e,this.numAssociatedEndpoints=n}static bytes(e){return new j(e)}add(e){return this.numBytes+=e.numBytes,this.numAssociatedEndpoints+=e.numAssociatedEndpoints,this}addBytes(e){return this.numBytes+=e,this}static get zero(){return new j(0)}get aligned(){return new j(pe(this.numBytes),this.numAssociatedEndpoints)}static forObject(e,n){return n===null?j.zero:e.measure(n)}static forUnionValue(e,n){return n===null?j.zero:e.measure(n)}static forUnionValueIndirect(e,n){return n===null?j.zero:e.measure(n).addBytes(ce)}static forString(e){return e===null?j.zero:j.forNumericArray(Uint8Array,j.textEncoder.encode(e))}static forBitArray(e){return e===null?j.zero:new j(K+pe(e.length+7>>3))}static forNumericArray(e,n){return n===null?j.zero:j.bytes(K+pe(e.BYTES_PER_ELEMENT*n.length))}static forUnionValueArray(e,n){return n===null?j.zero:n.reduce((s,i)=>s.add(j.forUnionValue(e,i)),j.bytes(K+ce*n.length).aligned)}static forEnumArray(e){return e===null?j.zero:j.bytes(K+Int32Array.BYTES_PER_ELEMENT*e.length).aligned}static forObjectArray(e,n){return n===null?j.zero:n.reduce((s,i)=>s.add(j.forObject(e,i)),j.bytes(K+G*n.length))}static forHandleArray(e){return e===null?j.zero:j.bytes(K+Uint32Array.BYTES_PER_ELEMENT*e.length)}static forStringArray(e){return e===null?j.zero:e.reduce((n,s)=>n.add(j.forString(s)),j.bytes(K+G*e.length))}static forArrayOfArrays(e,n){return e===null?j.zero:e.reduce((s,i)=>s.add(i===null?j.zero:n(i)),j.bytes(K+G*e.length))}};p(j,"textEncoder",new TextEncoder);let I=j;class ot{constructor(e){p(this,"buffer");p(this,"handles",[]);p(this,"interfaceIDs",[]);p(this,"numClaimedBytes",0);this.buffer=new ArrayBuffer(e)}get remainingCapacity(){return this.buffer.byteLength-this.numClaimedBytes}claim(e){const n=pe(e);if(this.buffer.byteLength<n||this.buffer.byteLength-n<this.numClaimedBytes)throw new H;const s=this.numClaimedBytes;return this.numClaimedBytes+=n,new ct(this,s,e)}addHandle(e){const n=this.handles.length;return this.handles.push(e),n}addInterfaceID(e){const n=this.interfaceIDs.length;return this.interfaceIDs.push(e),n}}const ee=class ee{constructor(e,n,s){p(this,"buffer");p(this,"data");this.buffer=e,this.data=new DataView(e.buffer,n,s)}get baseOffset(){return this.data.byteOffset}get dataSize(){return this.data.byteLength}typedArrayForRange(e,n,s){return new e(this.data.buffer,this.data.byteOffset+n,s)}bigTypedArrayForRange(e,n,s){return new e(this.data.buffer,this.data.byteOffset+n,s)}createEncoderForRange(e,n){return new ee(this.buffer,this.data.byteOffset+e,n)}setBit(e,n,s){const i=this.data.getUint8(e),r=1<<n;this.data.setUint8(e,s?i|r:i&~r)}setI8(e,n){this.data.setInt8(e,n)}setU8(e,n){this.data.setUint8(e,n)}setI16(e,n){this.data.setInt16(e,n,!0)}setU16(e,n){this.data.setUint16(e,n,!0)}setI32(e,n){this.data.setInt32(e,n,!0)}setU32(e,n){this.data.setUint32(e,n,!0)}setI64(e,n){this.data.setBigInt64(e,n,!0)}setU64(e,n){this.data.setBigUint64(e,n,!0)}setF32(e,n){this.data.setFloat32(e,n,!0)}setF64(e,n){this.data.setFloat64(e,n,!0)}setOffset(e,n){if(n==0){this.setU64(e,BigInt(0));return}const s=e+this.data.byteOffset;$e(n>s);const i=n-s;this.setU64(e,BigInt(i))}setUnionValue(e,n,s){if(s===null){this.setU32(n,0);return}this.setU32(n,ce),this.setU32(n+4,e.tag(s)),e.encode(this.createEncoderForRange(n+8,8),s)}setUnionValueIndirect(e,n,s){if(s===null){this.setOffset(n,0);return}const i=this.buffer.claim(ce);i.setUnionValue(e,0,s),this.setOffset(n,i.baseOffset)}setEnumValue(e,n,s){this.setI32(n,e.encode(s))}setHandle(e,n){if(n===null){this.setU32(e,Et);return}this.setU32(e,this.buffer.addHandle(n))}setRemote(e,n){if(n===null){this.setHandle(e,null);return}this.setHandle(e,n.pipe),this.setU32(e+4,n.version)}setReceiver(e,n){this.setHandle(e,n===null?null:n.pipe)}setObjectIndirect(e,n,s){if(s===null){this.setOffset(n,0);return}const i=this.buffer.claim(e.CURRENT_VERSION.size);i.setU32(0,e.CURRENT_VERSION.size),i.setU32(4,e.CURRENT_VERSION.version),e.encode(new ee(this.buffer,i.baseOffset+Se,e.CURRENT_VERSION.size-Se),s),this.setOffset(n,i.baseOffset)}setString(e,n){if(n===null){this.setOffset(e,0);return}this.setNumericArray(Uint8Array,e,Array.from(ee.textEncoder.encode(n)))}setBitArray(e,n){if(n===null){this.setOffset(e,0);return}const s=n.length+7>>3,[i,r]=this.allocateArray(s,n.length);for(let f=0;f<s;++f){const c=f*8,N=n.slice(c,c+8).reduce((o,d,u)=>o|(d?1<<u:0),0);r.setU8(f,N)}this.setOffset(e,i.baseOffset)}setNumericArray(e,n,s){if(s===null){this.setOffset(n,0);return}const i=e.BYTES_PER_ELEMENT*s.length,[r,f]=this.allocateArray(i,s.length);f.typedArrayForRange(e,0,s.length).set(s),this.setOffset(n,r.baseOffset)}setBigNumericArray(e,n,s){if(s===null){this.setOffset(n,0);return}const i=e.BYTES_PER_ELEMENT*s.length,[r,f]=this.allocateArray(i,s.length);f.bigTypedArrayForRange(e,0,s.length).set(s),this.setOffset(n,r.baseOffset)}setUnionValueArray(e,n,s){this.setArrayOfNullable(n,ce,s,(i,r)=>{i.setUnionValue(e,0,r)})}setEnumArray(e,n,s){this.setArray(n,Int32Array.BYTES_PER_ELEMENT,s,(i,r)=>{i.setEnumValue(e,0,r)})}setObjectArray(e,n,s){this.setArrayOfNullable(n,G,s,(i,r)=>{i.setObjectIndirect(e,0,r)})}setHandleArray(e,n){this.setArray(e,Uint32Array.BYTES_PER_ELEMENT,n,(s,i)=>{s.setHandle(0,i)})}setStringArray(e,n){this.setArray(e,G,n,(s,i)=>{s.setString(0,i)})}setArrayOfArrays(e,n,s){this.setArrayOfNullable(e,G,n,(i,r)=>{s(i,r)})}allocateArray(e,n){const s=this.buffer.claim(pe(K+e));return s.setU32(0,K+e),s.setU32(4,n),[s,s.createEncoderForRange(8,e)]}setArray(e,n,s,i){if(s===null){this.setOffset(e,0);return}const[r,f]=this.allocateArray(s.length*n,s.length);Array.prototype.forEach.call(s,(c,N)=>{i(new ee(this.buffer,f.baseOffset+N*n,n),c)}),this.setOffset(e,r.baseOffset)}setArrayOfNullable(e,n,s,i){if(s===null){this.setOffset(e,0);return}const[r,f]=this.allocateArray(s.length*n,s.length);Array.prototype.forEach.call(s,(c,N)=>{i(new ee(this.buffer,f.baseOffset+N*n,n),c)}),this.setOffset(e,r.baseOffset)}};p(ee,"textEncoder",new TextEncoder);let ct=ee;class Bt{constructor(e,n){p(this,"buffer");p(this,"handles");this.buffer=e,this.handles=n.map(s=>({status:"unclaimed",handle:s}))}dispose(){for(const e of this.handles)e.status==="unclaimed"&&e.handle.close()}get numBytes(){return this.buffer.byteLength}get numHandles(){return this.handles.length}claimHandle(e){if(e<0||e>=this.handles.length||this.handles[e].status==="claimed")throw new kt;const n=this.handles[e].handle;return this.handles[e]={status:"claimed"},n}}const A=class A{constructor(e,n,s){p(this,"buffer");p(this,"data");this.buffer=e,this.data=new DataView(e.buffer,n,s)}get baseOffset(){return this.data.byteOffset}get dataSize(){return this.data.byteLength}typedArrayForRange(e,n,s){return new e(this.data.buffer,this.data.byteOffset+n,s)}bigTypedArrayForRange(e,n,s){return new e(this.data.buffer,this.data.byteOffset+n,s)}isBitSet(e,n){return(this.data.getUint8(e)&1<<n)!==0}getI8(e){return this.data.getInt8(e)}getU8(e){return this.data.getUint8(e)}getI16(e){return this.data.getInt16(e,!0)}getU16(e){return this.data.getUint16(e,!0)}getI32(e){return this.data.getInt32(e,!0)}getU32(e){return this.data.getUint32(e,!0)}getI64(e){return this.data.getBigInt64(e,!0)}getU64(e){return this.data.getBigUint64(e,!0)}getF32(e){return this.data.getFloat32(e,!0)}getF64(e){return this.data.getFloat64(e,!0)}getOffset(e){const n=this.getU32(e);if(this.getU32(e+4)!==0)throw new H;if(n===0)return 0;const s=this.data.byteOffset+e+n;if(!Number.isSafeInteger(s))throw new H;return s}getUnionValue(e,n){const s=this.getU32(n);if(s===0)return null;if(s!=ce)throw new Dt;const i=this.getU32(n+4);return e.decode(i,new A(this.buffer,this.data.byteOffset+n+8,8))}getUnionValueIndirect(e,n){const s=this.getOffset(n);return s===0?null:new A(this.buffer,s,ce).getUnionValue(e,0)}getEnumValue(e,n){return e.decode(this.getI32(n))}getHandle(e){const n=this.getU32(e);return n==Et?null:this.buffer.claimHandle(n)}getMessagePipeHandle(e){const n=this.getHandle(e);return n===null?null:new ae(n.rawHandle)}getRemote(e,n){const s=this.getHandle(n);if(s===null)return null;const i=new ae(s.rawHandle),r=this.getU32(n+4);return new et(e,i,r)}getReceiver(e,n){const s=this.getHandle(n);return s===null?null:new ve(e,new ae(s.rawHandle))}getString(e){const n=this.getNumericArrayInternal(Uint8Array,e);return n===null?null:A.textDecoder.decode(n)}getObject(e,n){const s=new A(this.buffer,this.baseOffset+n,Se),i=s.getU32(0),r=s.getU32(4);let f=e.VERSION_INFO[0];for(let c=1;c<e.VERSION_INFO.length&&e.VERSION_INFO[c].version<=r;++c)f=e.VERSION_INFO[c];if(i<f.size)throw new ut;if(r==f.version&&i!=f.size)throw new ut;return e.decode(new A(this.buffer,s.baseOffset+Se,f.size-Se),f.version)}getObjectIndirect(e,n){const s=this.getOffset(n);return s===0?null:this.getObject(e,s-this.baseOffset)}getBitArray(e){const n=this.decodeArray(e);if(n===null)return null;const s=n.numElements+7>>3;if(s>n.elementDecoder.dataSize)throw new H;const i=[];for(let r=0;r<s;++r){const f=n.elementDecoder.getU8(r),c=r*8;for(let N=0;N<8&&c+N<n.numElements;++N)i.push((f&1<<N)!==0)}return i}getNumericArray(e,n){const s=this.getNumericArrayInternal(e,n);return s===null?s:Array.from(s)}getBigNumericArray(e,n){const s=this.decodeArray(n);if(s===null)return null;if(s.numElements*e.BYTES_PER_ELEMENT>s.elementDecoder.dataSize)throw new H;return s.elementDecoder.bigTypedArrayForRange(e,0,s.numElements)}getUnionValueArray(e,n){return this.getArray(n,ce,s=>s.getUnionValue(e,0))}getEnumArray(e,n){return this.getArray(n,Int32Array.BYTES_PER_ELEMENT,s=>s.getEnumValue(e,0))}getObjectArray(e,n){return this.getArrayOfNullable(n,G,s=>s.getObjectIndirect(e,0))}getHandleArray(e){return this.getArrayOfNullable(e,Uint32Array.BYTES_PER_ELEMENT,n=>n.getHandle(0))}getStringArray(e){return this.getArrayOfNullable(e,G,n=>n.getString(0))}getArrayOfArrays(e,n){return this.getArrayOfNullable(e,G,s=>n(s))}decodeArray(e){const n=this.getOffset(e);if(n===0)return null;const s=new A(this.buffer,n,K),i=s.getU32(0);return{numElements:s.getU32(4),elementDecoder:new A(this.buffer,n+K,i-K)}}getArray(e,n,s){const i=this.decodeArray(e);if(i===null)return null;if(i.numElements*n>i.elementDecoder.dataSize)throw new H;const r=[];for(let f=0;f<i.numElements;++f){const c=new A(this.buffer,i.elementDecoder.baseOffset+f*n,n);r.push(s(c))}return r}getArrayOfNullable(e,n,s){const i=this.decodeArray(e);if(i===null)return null;if(i.numElements*n>i.elementDecoder.dataSize)throw new H;const r=[];for(let f=0;f<i.numElements;++f){const c=new A(this.buffer,i.elementDecoder.baseOffset+f*n,n);r.push(s(c))}return r}getNumericArrayInternal(e,n){const s=this.decodeArray(n);if(s===null)return null;if(s.numElements*e.BYTES_PER_ELEMENT>s.elementDecoder.dataSize)throw new H;return s.elementDecoder.typedArrayForRange(e,0,s.numElements)}};p(A,"textDecoder",new TextDecoder);let Ye=A;const te=[24,32,48],Ze=te.length-1;var F=(t=>(t[t.None=0]="None",t[t.ExpectsResponse=1]="ExpectsResponse",t[t.IsResponse=2]="IsResponse",t[t.IsSync=4]="IsSync",t[t.NoInterrupt=8]="NoInterrupt",t[t.IsUrgent=16]="IsUrgent",t[t.UnimplementedResponse=1073741824]="UnimplementedResponse",t))(F||{});function Nt(t,e,n){return t&~e|(n?e:0)}class z{constructor(e,n,s){p(this,"header");p(this,"data");p(this,"handles");this.header=e,this.data=n,this.handles=s}static encodeEmpty(e,n,s){const i=te[Ze],r=new ot(i),f=new Re(r.claim(Re.size));return f.ordinal=e,f.flags=n,f.requestID=s,new z(f,new DataView(r.buffer),[])}static encode(e,n,s,i){const r=I.forObject(s,i),f=te[Ze]+r.numBytes;if(r.numAssociatedEndpoints>0)throw new qe("Associated interfaces");const c=new ot(f),N=new Re(c.claim(Re.size));return N.interfaceID=0,N.ordinal=e,N.flags=n,N.payloadEncoder.setObjectIndirect(s,0,i),new z(N,new DataView(c.buffer),c.handles)}dump(){const e=[];for(let n=0;n<this.data.byteLength;n+=4){const s=this.data.getUint32(n);e.push(s.toString(16).padStart(8,"0"))}console.log("Data: ",e.join(" "),"Handles: ",this.handles.length)}}class $t{constructor(e,n){p(this,"buffer");p(this,"header");p(this,"payload");this.buffer=new Bt(e,n),this.header=new Mt(new Ye(this.buffer,0)),this.payload=new Ye(this.buffer,this.header.payload)}dispose(){this.buffer.dispose()}decode(e){return this.payload.getObject(e,0)}dump(){const e=[],n=new DataView(this.buffer.buffer);for(let s=0;s<n.byteLength;s+=4){const i=n.getUint32(s);e.push(i.toString(16).padStart(8,"0"))}console.log("Data: ",e.join(" "),"Handles: ",this.buffer.numHandles)}}const de=class de{constructor(e){p(this,"payloadEncoder");p(this,"encoder");$e(e.dataSize>=de.size),this.encoder=e,this.encoder.setU32(0,de.size),this.encoder.setU32(4,de.version),this.payloadEncoder=e.createEncoderForRange(32,8)}set interfaceID(e){this.encoder.setU32(8,e)}set ordinal(e){this.encoder.setU32(12,e)}set flags(e){this.encoder.setU32(16,e)}set requestID(e){this.encoder.setU64(24,BigInt(e))}set newEndpoints(e){this.encoder.setOffset(40,e)}set isResponse(e){this.flags=Nt(this.flags,2,e)}set expectsResponse(e){this.flags=Nt(this.flags,1,e)}};p(de,"size",te[Ze]),p(de,"version",Ze);let Re=de;class Mt{constructor(e){p(this,"decoder");var r;if(e.dataSize<te[0])throw new st;this.decoder=e;const n=this.headerSize,s=this.headerVersion,i=(r=te[s])!=null?r:te[te.length-1];if(n>e.dataSize||n<i)throw new st;if(this.payload>=e.dataSize)throw new st}get headerSize(){return this.decoder.getU32(0)}get headerVersion(){return this.decoder.getU32(4)}get interfaceID(){return this.decoder.getU32(8)}get ordinal(){return this.decoder.getU32(12)}get flags(){return this.decoder.getU32(16)}get isResponse(){return(this.flags&2)!==0}get expectsResponse(){return(this.flags&1)!==0}get unimplementedResponse(){return(this.flags&1073741824)!==0}get requestID(){if(this.headerVersion<1)return 0;const e=Number(this.decoder.getU64(24));return $e(Number.isSafeInteger(e)),e}get payload(){return this.headerVersion>=2?this.decoder.getOffset(32):this.headerSize}get newEndpoints(){if(this.headerVersion<2)return null;const e=this.decoder.getOffset(40);return e===0?null:e}}const vt=1<<31,Yt=4294967295;class Zt{constructor(e,n){p(this,"pipe");p(this,"setNamespaceBit");p(this,"nextInterfaceID",1);p(this,"knownUnboundInterfaceIDs",new Set);p(this,"listeners",new Map);p(this,"isDispatchScheduled",!1);p(this,"blockingMessage",null);this.pipe=e,this.setNamespaceBit=n}dispose(){this.closed||this.close()}get closed(){return this.pipe===null}get rawPipe(){return this.pipe}close(){this.pipe!==null&&(this.pipe.close(),this.pipe=null)}allocateEndpointID(){const e=this.nextInterfaceID|(this.setNamespaceBit?vt:0);return this.nextInterfaceID+=1,this.knownUnboundInterfaceIDs.add(e),e}send(e,n){this.pipe!==null&&(n.header.interfaceID=e,this.pipe.write(n.data,n.handles))}listen(e,n){this.knownUnboundInterfaceIDs.delete(e),this.listeners.set(e,n),this.ensureDispatchingIfReady()}stopListening(e){this.listeners.delete(e),this.knownUnboundInterfaceIDs.delete(e),this.ensureDispatchingIfReady()}get isDispatchBlocked(){if(this.blockingMessage===null)return!1;const e=this.blockingMessage.header.interfaceID;return this.knownUnboundInterfaceIDs.has(e)}dispatchDisconnect(){const e=this.listeners;this.listeners=new Map;for(const[n,s]of e)s({type:"disconnected"})}ensureDispatchingIfReady(){this.isDispatchBlocked||this.isDispatchScheduled||(this.isDispatchScheduled=!0,setTimeout(()=>{this.dispatchMessages()},0))}dispatchMessages(){for(this.isDispatchScheduled=!1;this.pipe!==null&&!this.isDispatchBlocked;){if(this.blockingMessage!==null){const n=this.blockingMessage;this.blockingMessage=null,this.dispatchMessage(n);continue}const e=this.pipe.read();switch(e.status){case"ok":this.dispatchMessage(new $t(e.data,e.handles));continue;case"nothing":this.listenToPipe();return;case"dead":this.dispatchDisconnect(),this.close();return}}}listenToPipe(){$e(this.pipe!==null),this.pipe.watch({readable:!0},e=>{this.dispatchMessages()})}dispatchMessage(e){var r;const n=e.header.interfaceID;if(n===Yt)throw new qe("Control messages");if(this.knownUnboundInterfaceIDs.has(n)){this.blockingMessage=e;return}if(e.header.newEndpoints!==null)throw new qe("Associated interfaces");const s=(r=this.listeners.get(n))!=null?r:null;if(s===null){e.dispose();return}s({type:"message",message:e})==="stopListening"&&this.stopListening(n)}}class M{constructor(e,n){p(this,"router");p(this,"interfaceID");p(this,"action");p(this,"isListening",!1);p(this,"nextRequestID",1);p(this,"pendingResponses",new Map);switch(e.kind){case"primary":this.router=new Zt(e.pipe,n),this.interfaceID=0;break;case"secondary":throw new qe("Associated interfaces")}}dispose(){this.router.dispose()}send(e){this.router.send(this.interfaceID,e)}async sendAndAwaitResponse(e){const n=this.nextRequestID++;e.header.expectsResponse=!0,e.header.requestID=n,this.ensureListening();const s=await new Promise((i,r)=>{this.pendingResponses.set(n,{resolve:i,reject:r}),this.send(e)});if(s.header.unimplementedResponse)throw new qe("Unimplemented method");return s}sendUnimplementedResponse(e,n){const s=z.encodeEmpty(n,F.UnimplementedResponse|F.IsResponse,e);this.router.send(this.interfaceID,s)}listen(e){this.action=e,this.ensureListening()}createResponder(e,n,s){return i=>{const r=z.encode(n,F.IsResponse,e,i);r.header.requestID=s,this.send(r)}}ensureListening(){this.isListening||(this.isListening=!0,this.router.listen(this.interfaceID,e=>{switch(e.type){case"message":{const n=e.message;if(n.header.isResponse){const s=this.pendingResponses.get(n.header.requestID);s&&s.resolve(n)}else this.action&&this.action({type:"message",message:n});return"keepListening"}case"disconnected":return this.pendingResponses.forEach(n=>n.reject("Disconnected")),this.action&&this.action({type:"disconnected"}),"stopListening"}}))}}class Y{constructor(e){p(this,"interfaceType");p(this,"endpoints",new Set);this.interfaceType=e}dispose(){this.endpoints.forEach(e=>e.dispose())}addReceiver(e,n,s){const i=new M(e.endpointState,!1);this.endpoints.add(i),i.listen(r=>{switch(r.type){case"message":n(r.message,i);break;case"disconnected":this.endpoints.delete(i),s();break}})}}var Je;(t=>{function e(s){if(s==="stopped")return 0;if(s==="paused")return 1;if(s==="running")return 2;throw new X}t.encode=e;function n(s){switch(s){case 0:return"stopped";case 1:return"paused";case 2:return"running";default:return"stopped"}}t.decode=n})(Je||(Je={}));class Q{}p(Q,"interfaceName","web.bridge.AgentHandler"),p(Q,"interfaceVersion",4);(t=>{let e;(O=>{O.VERSION_INFO=[{version:0,size:16}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size).add(I.forString(g.agentid))}O.measure=l;function _(g,m){g.setString(0,m.agentid)}O.encode=_;function D(g,m){return{agentid:y(g.getString(0))}}O.decode=D})(e=t.AgentHandler_TryOpenAgentViewer_Params||(t.AgentHandler_TryOpenAgentViewer_Params={}));let n;(O=>{O.VERSION_INFO=[{version:0,size:16}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size)}O.measure=l;function _(g,m){let x=0;m.response&&(x|=1),g.setU8(0,x)}O.encode=_;function D(g,m){return{response:(g.getU8(0)&1)!=0}}O.decode=D})(n=t.AgentHandler_TryOpenAgentViewer_ResponseParams||(t.AgentHandler_TryOpenAgentViewer_ResponseParams={}));let s;(O=>{O.VERSION_INFO=[{version:0,size:8}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size)}O.measure=l;function _(g,m){}O.encode=_;function D(g,m){return{}}O.decode=D})(s=t.AgentHandler_GetClientID_Params||(t.AgentHandler_GetClientID_Params={}));let i;(O=>{O.VERSION_INFO=[{version:0,size:16}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size).add(I.forString(g.clientid))}O.measure=l;function _(g,m){g.setString(0,m.clientid)}O.encode=_;function D(g,m){return{clientid:y(g.getString(0))}}O.decode=D})(i=t.AgentHandler_GetClientID_ResponseParams||(t.AgentHandler_GetClientID_ResponseParams={}));let r;(O=>{O.VERSION_INFO=[{version:0,size:16},{version:1,size:24},{version:2,size:32},{version:3,size:40},{version:4,size:40}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){var m,x;return I.bytes(O.CURRENT_VERSION.size).add(I.forString(g.agentid)).add(I.forString((m=g.usermessages)!=null?m:null)).add(I.forString((x=g.preinitializerequestid)!=null?x:null))}O.measure=l;function _(g,m){var $,Z;let x=0;g.setString(0,m.agentid),g.setString(8,($=m.usermessages)!=null?$:null),m.islocalsafemode!==null&&m.islocalsafemode!==void 0&&(x|=1,m.islocalsafemode&&(x|=2)),m.isresume!==null&&m.isresume!==void 0&&(x|=4,m.isresume&&(x|=8)),m.originatesfromtoolcall!==null&&m.originatesfromtoolcall!==void 0&&(x|=16,m.originatesfromtoolcall&&(x|=32)),g.setString(24,(Z=m.preinitializerequestid)!=null?Z:null),g.setU8(16,x)}O.encode=_;function D(g,m){const x=m>=1?g.getString(8):null,$=m>=2?g.getU8(16):0,Z=($&1)!=0,L=($&4)!=0,tt=($&16)!=0,R=m>=3?g.getString(24):null;return T(T(T(T(T({agentid:y(g.getString(0))},x!==null?{usermessages:x}:{}),Z?{islocalsafemode:($&2)!=0}:{}),L?{isresume:($&8)!=0}:{}),tt?{originatesfromtoolcall:($&32)!=0}:{}),R!==null?{preinitializerequestid:R}:{})}O.decode=D})(r=t.AgentHandler_UserSentMessageInAgentConversation_Params||(t.AgentHandler_UserSentMessageInAgentConversation_Params={}));let f;(O=>{O.VERSION_INFO=[{version:0,size:24}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size).add(I.forString(g.agentid))}O.measure=l;function _(g,m){let x=0;g.setString(0,m.agentid),m.haderror&&(x|=1),g.setU8(8,x)}O.encode=_;function D(g,m){const x=g.getU8(8);return{agentid:y(g.getString(0)),haderror:(x&1)!=0}}O.decode=D})(f=t.AgentHandler_AgentConversationStopped_Params||(t.AgentHandler_AgentConversationStopped_Params={}));let c;(O=>{O.VERSION_INFO=[{version:0,size:24}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size).add(I.forString(g.agentid)).add(I.forStringArray(g.urls))}O.measure=l;function _(g,m){g.setString(0,m.agentid),g.setStringArray(8,m.urls)}O.encode=_;function D(g,m){return{agentid:y(g.getString(0)),urls:y(W(g.getStringArray(8)))}}O.decode=D})(c=t.AgentHandler_OpenAgentTabs_Params||(t.AgentHandler_OpenAgentTabs_Params={}));let N;(O=>{O.VERSION_INFO=[{version:0,size:16}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size).add(I.forString(g.agentid))}O.measure=l;function _(g,m){g.setString(0,m.agentid)}O.encode=_;function D(g,m){return{agentid:y(g.getString(0))}}O.decode=D})(N=t.AgentHandler_UserStoppedAgentConversation_Params||(t.AgentHandler_UserStoppedAgentConversation_Params={}));let o;(O=>{O.VERSION_INFO=[{version:0,size:16}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size).add(I.forString(g.agentid))}O.measure=l;function _(g,m){g.setString(0,m.agentid)}O.encode=_;function D(g,m){return{agentid:y(g.getString(0))}}O.decode=D})(o=t.AgentHandler_GetAgentStatus_Params||(t.AgentHandler_GetAgentStatus_Params={}));let d;(O=>{O.VERSION_INFO=[{version:0,size:16}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size)}O.measure=l;function _(g,m){g.setEnumValue(Je,0,m.status)}O.encode=_;function D(g,m){return{status:y(g.getEnumValue(Je,0))}}O.decode=D})(d=t.AgentHandler_GetAgentStatus_ResponseParams||(t.AgentHandler_GetAgentStatus_ResponseParams={}));let u;(O=>{O.VERSION_INFO=[{version:0,size:8}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size)}O.measure=l;function _(g,m){}O.encode=_;function D(g,m){return{}}O.decode=D})(u=t.AgentHandler_GetClientCapabilityVersion_Params||(t.AgentHandler_GetClientCapabilityVersion_Params={}));let h;(O=>{O.VERSION_INFO=[{version:0,size:16}],O.CURRENT_VERSION=O.VERSION_INFO[O.VERSION_INFO.length-1];function l(g){return I.bytes(O.CURRENT_VERSION.size)}O.measure=l;function _(g,m){g.setU32(0,m.version)}O.encode=_;function D(g,m){return{version:y(g.getU32(0))}}O.decode=D})(h=t.AgentHandler_GetClientCapabilityVersion_ResponseParams||(t.AgentHandler_GetClientCapabilityVersion_ResponseParams={}));class a{constructor(l){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(l.endpointState,!0),this._version=4}static create(){const[l,_]=k.createChannel(t);return[new a(l),_]}static createToBrowser(){const[l,_]=this.create();return Mojo.bindInterface(t.interfaceName,_.pipe.rawHandle),l}async tryOpenAgentViewer(l){const _={agentid:l};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,_))).decode(n).response}async getClientID(){const l={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,s,l))).decode(i).clientid}userSentMessageInAgentConversation(l,_,D,g,m,x){const $={agentid:l,usermessages:_,islocalsafemode:D,isresume:g,preinitializerequestid:m,originatesfromtoolcall:x};this._endpoint.send(z.encode(2,F.None,r,$))}agentConversationStopped(l,_){const D={agentid:l,haderror:_};this._endpoint.send(z.encode(3,F.None,f,D))}openAgentTabs(l,_){const D={agentid:l,urls:_};this._endpoint.send(z.encode(4,F.None,c,D))}userStoppedAgentConversation(l){const _={agentid:l};this._endpoint.send(z.encode(5,F.None,N,_))}async getAgentStatus(l){const _={agentid:l};return(await this._endpoint.sendAndAwaitResponse(z.encode(6,F.None,o,_))).decode(d).status}async getClientCapabilityVersion(){const l={};return(await this._endpoint.sendAndAwaitResponse(z.encode(7,F.None,u,l))).decode(h).version}}t.Proxy=a;class S extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(_,D){this.addReceiver(D,async(g,m)=>{switch(g.header.ordinal){case 0:{const x=g.decode(e),$=_.tryOpenAgentViewer(x.agentid),Z=m.createResponder(n,0,g.header.requestID),L=await $;Z({response:L});break}case 1:{g.decode(s);const x=_.getClientID(),$=m.createResponder(i,1,g.header.requestID),Z=await x;$({clientid:Z});break}case 2:{const x=g.decode(r);_.userSentMessageInAgentConversation(x.agentid,x.usermessages,x.islocalsafemode,x.isresume,x.preinitializerequestid,x.originatesfromtoolcall);break}case 3:{const x=g.decode(f);_.agentConversationStopped(x.agentid,x.haderror);break}case 4:{const x=g.decode(c);_.openAgentTabs(x.agentid,x.urls);break}case 5:{const x=g.decode(N);_.userStoppedAgentConversation(x.agentid);break}case 6:{const x=g.decode(o),$=_.getAgentStatus(x.agentid),Z=m.createResponder(d,6,g.header.requestID),L=await $;Z({status:L});break}case 7:{g.decode(u);const x=_.getClientCapabilityVersion(),$=m.createResponder(h,7,g.header.requestID),Z=await x;$({version:Z});break}default:g.header.expectsResponse&&m.sendUnimplementedResponse(g.header.requestID,g.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(_)})}createRemote(_){const[D,g]=k.createChannel(t);return this.bind(_,g),D}}t.Dispatcher=S})(Q||(Q={}));var ne;(t=>{function e(s){if(s==="incognito")return 0;if(s==="signedInAccounts")return 1;throw new X}t.encode=e;function n(s){switch(s){case 0:return"incognito";case 1:return"signedInAccounts";default:return"incognito"}}t.decode=n})(ne||(ne={}));class oe{}p(oe,"interfaceName","web.bridge.AgentSafeModeSettingsHandler"),p(oe,"interfaceVersion",0);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size)}c.measure=N;function o(u,h){u.setEnumValue(ne,0,h.preferredMode)}c.encode=o;function d(u,h){return{preferredMode:y(u.getEnumValue(ne,0))}}c.decode=d})(e=t.AgentSafeModeSettingsHandler_UpdateAgentSafeMode_Params||(t.AgentSafeModeSettingsHandler_UpdateAgentSafeMode_Params={}));let n;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size)}c.measure=N;function o(u,h){let a=0;h.hasSeenNux&&(a|=1),u.setU8(0,a)}c.encode=o;function d(u,h){return{hasSeenNux:(u.getU8(0)&1)!=0}}c.decode=d})(n=t.AgentSafeModeSettingsHandler_UpdateAgentSafeModeHasSeenNux_Params||(t.AgentSafeModeSettingsHandler_UpdateAgentSafeModeHasSeenNux_Params={}));let s;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size)}c.measure=N;function o(u,h){}c.encode=o;function d(u,h){return{}}c.decode=d})(s=t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_Params||(t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_Params={}));let i;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size)}c.measure=N;function o(u,h){let a=0;u.setEnumValue(ne,0,h.preferredMode),h.hasSeenNux&&(a|=1),u.setU8(4,a)}c.encode=o;function d(u,h){const a=u.getU8(4);return{preferredMode:y(u.getEnumValue(ne,0)),hasSeenNux:(a&1)!=0}}c.decode=d})(i=t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_ResponseParams||(t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_ResponseParams={}));class r{constructor(N){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(N.endpointState,!0),this._version=0}static create(){const[N,o]=k.createChannel(t);return[new r(N),o]}static createToBrowser(){const[N,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),N}updateAgentSafeMode(N){const o={preferredMode:N};this._endpoint.send(z.encode(0,F.None,e,o))}updateAgentSafeModeHasSeenNux(N){const o={hasSeenNux:N};this._endpoint.send(z.encode(1,F.None,n,o))}async getAgentSafeModeState(){const N={};return(await this._endpoint.sendAndAwaitResponse(z.encode(2,F.None,s,N))).decode(i)}}t.Proxy=r;class f extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(o,d){this.addReceiver(d,async(u,h)=>{switch(u.header.ordinal){case 0:{const a=u.decode(e);o.updateAgentSafeMode(a.preferredMode);break}case 1:{const a=u.decode(n);o.updateAgentSafeModeHasSeenNux(a.hasSeenNux);break}case 2:{u.decode(s);const a=o.getAgentSafeModeState(),S=h.createResponder(i,2,u.header.requestID),O=await a;S(O);break}default:u.header.expectsResponse&&h.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[d,u]=k.createChannel(t);return this.bind(o,u),d}}t.Dispatcher=f})(oe||(oe={}));var Ve;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){return I.bytes(t.CURRENT_VERSION.size).add(I.forString(i.accessToken)).add(I.forString(i.idToken))}t.measure=e;function n(i,r){i.setString(0,r.accessToken),i.setString(8,r.idToken),i.setF64(16,r.expiresTimestampMsSince1970)}t.encode=n;function s(i,r){return{accessToken:y(i.getString(0)),idToken:y(i.getString(8)),expiresTimestampMsSince1970:y(i.getF64(16))}}t.decode=s})(Ve||(Ve={}));var Ke;(t=>{function e(s){if(s==="justLoggedInAccessToken")return 0;if(s==="reloadPageIfLoggedOut")return 1;if(s==="fullTokenToSessionConversion")return 2;throw new X}t.encode=e;function n(s){switch(s){case 0:return"justLoggedInAccessToken";case 1:return"reloadPageIfLoggedOut";case 2:return"fullTokenToSessionConversion";default:return"justLoggedInAccessToken"}}t.decode=n})(Ke||(Ke={}));class se{}p(se,"interfaceName","web.bridge.AuthHandler"),p(se,"interfaceVersion",1);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size)}c.measure=N;function o(u,h){}c.encode=o;function d(u,h){return{}}c.decode=d})(e=t.AuthHandler_HandleMissingSessionAuth_Params||(t.AuthHandler_HandleMissingSessionAuth_Params={}));let n;(c=>{c.VERSION_INFO=[{version:0,size:8},{version:1,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){var h;return I.bytes(c.CURRENT_VERSION.size).add(I.forString((h=u.accountId)!=null?h:null))}c.measure=N;function o(u,h){var a;u.setString(0,(a=h.accountId)!=null?a:null)}c.encode=o;function d(u,h){const a=h>=1?u.getString(0):null;return T({},a!==null?{accountId:a}:{})}c.decode=d})(n=t.AuthHandler_RecordAvailableSessionAuth_Params||(t.AuthHandler_RecordAvailableSessionAuth_Params={}));let s;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size).add(I.forString(u.accountId))}c.measure=N;function o(u,h){u.setString(0,h.accountId)}c.encode=o;function d(u,h){return{accountId:y(u.getString(0))}}c.decode=d})(s=t.AuthHandler_HandleAcceptedWorkspaceInvite_Params||(t.AuthHandler_HandleAcceptedWorkspaceInvite_Params={}));let i;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size).add(I.forString(u.accountId))}c.measure=N;function o(u,h){u.setString(0,h.accountId)}c.encode=o;function d(u,h){return{accountId:y(u.getString(0))}}c.decode=d})(i=t.AuthHandler_HandleSwitchAccount_Params||(t.AuthHandler_HandleSwitchAccount_Params={}));class r{constructor(N){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(N.endpointState,!0),this._version=1}static create(){const[N,o]=k.createChannel(t);return[new r(N),o]}static createToBrowser(){const[N,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),N}handleMissingSessionAuth(){const N={};this._endpoint.send(z.encode(0,F.None,e,N))}recordAvailableSessionAuth(N){const o={accountId:N};this._endpoint.send(z.encode(1,F.None,n,o))}handleAcceptedWorkspaceInvite(N){const o={accountId:N};this._endpoint.send(z.encode(2,F.None,s,o))}handleSwitchAccount(N){const o={accountId:N};this._endpoint.send(z.encode(3,F.None,i,o))}}t.Proxy=r;class f extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(o,d){this.addReceiver(d,async(u,h)=>{switch(u.header.ordinal){case 0:{u.decode(e),o.handleMissingSessionAuth();break}case 1:{const a=u.decode(n);o.recordAvailableSessionAuth(a.accountId);break}case 2:{const a=u.decode(s);o.handleAcceptedWorkspaceInvite(a.accountId);break}case 3:{const a=u.decode(i);o.handleSwitchAccount(a.accountId);break}default:u.header.expectsResponse&&h.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[d,u]=k.createChannel(t);return this.bind(o,u),d}}t.Dispatcher=f})(se||(se={}));class Ne{}p(Ne,"interfaceName","web.bridge.AuthStateController"),p(Ne,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function r(N){return I.bytes(i.CURRENT_VERSION.size).add(I.forObject(Ve,N.authToken))}i.measure=r;function f(N,o){N.setObjectIndirect(Ve,0,o.authToken),N.setEnumValue(Ke,8,o.behavior)}i.encode=f;function c(N,o){return{authToken:y(N.getObjectIndirect(Ve,0)),behavior:y(N.getEnumValue(Ke,8))}}i.decode=c})(e=t.AuthStateController_RefreshSessionContext_Params||(t.AuthStateController_RefreshSessionContext_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}refreshSessionContext(r,f){const c={authToken:r,behavior:f};this._endpoint.send(z.encode(0,F.None,e,c))}}t.Proxy=n;class s extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(f,c){this.addReceiver(c,async(N,o)=>{switch(N.header.ordinal){case 0:{const d=N.decode(e);f.refreshSessionContext(d.authToken,d.behavior);break}default:N.header.expectsResponse&&o.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[c,N]=k.createChannel(t);return this.bind(f,N),c}}t.Dispatcher=s})(Ne||(Ne={}));class Ie{}p(Ie,"interfaceName","web.bridge.ConversationArchiveController"),p(Ie,"interfaceVersion",0);(t=>{let e;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(o){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(o.conversationId))}r.measure=f;function c(o,d){o.setString(0,d.conversationId)}r.encode=c;function N(o,d){return{conversationId:y(o.getString(0))}}r.decode=N})(e=t.ConversationArchiveController_EnqueueConversationArchive_Params||(t.ConversationArchiveController_EnqueueConversationArchive_Params={}));let n;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(o){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(o.conversationId))}r.measure=f;function c(o,d){o.setString(0,d.conversationId)}r.encode=c;function N(o,d){return{conversationId:y(o.getString(0))}}r.decode=N})(n=t.ConversationArchiveController_CancelConversationArchive_Params||(t.ConversationArchiveController_CancelConversationArchive_Params={}));class s{constructor(f){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(f.endpointState,!0),this._version=0}static create(){const[f,c]=k.createChannel(t);return[new s(f),c]}static createToBrowser(){const[f,c]=this.create();return Mojo.bindInterface(t.interfaceName,c.pipe.rawHandle),f}enqueueConversationArchive(f){const c={conversationId:f};this._endpoint.send(z.encode(0,F.None,e,c))}cancelConversationArchive(f){const c={conversationId:f};this._endpoint.send(z.encode(1,F.None,n,c))}}t.Proxy=s;class i extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(c,N){this.addReceiver(N,async(o,d)=>{switch(o.header.ordinal){case 0:{const u=o.decode(e);c.enqueueConversationArchive(u.conversationId);break}case 1:{const u=o.decode(n);c.cancelConversationArchive(u.conversationId);break}default:o.header.expectsResponse&&d.sendUnimplementedResponse(o.header.requestID,o.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[N,o]=k.createChannel(t);return this.bind(c,o),N}}t.Dispatcher=i})(Ie||(Ie={}));var le;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){return I.bytes(t.CURRENT_VERSION.size).add(I.forString(i.conduitToken))}t.measure=e;function n(i,r){i.setEnumValue(Qe,0,r.prepareState),i.setF64(8,r.lastPrepareTimestampMsSince1970),i.setString(16,r.conduitToken)}t.encode=n;function s(i,r){return{prepareState:y(i.getEnumValue(Qe,0)),lastPrepareTimestampMsSince1970:y(i.getF64(8)),conduitToken:y(i.getString(16))}}t.decode=s})(le||(le={}));var ge;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){return I.bytes(t.CURRENT_VERSION.size)}t.measure=e;function n(i,r){i.setEnumValue(Xe,0,r.selectedTab)}t.encode=n;function s(i,r){return{selectedTab:y(i.getEnumValue(Xe,0))}}t.decode=s})(ge||(ge={}));var be;(t=>{t.VERSION_INFO=[{version:0,size:56}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){return I.bytes(t.CURRENT_VERSION.size).add(I.forString(i.id)).add(I.forString(i.name)).add(I.forString(i.mimeType))}t.measure=e;function n(i,r){let f=0;i.setString(0,r.id),i.setI64(8,r.size),i.setString(16,r.name),i.setString(24,r.mimeType),r.width!==null&&r.width!==void 0&&(f|=1,i.setI32(36,r.width)),r.height!==null&&r.height!==void 0&&(f|=2,i.setI32(40,r.height)),r.fileTokenSize!==null&&r.fileTokenSize!==void 0&&(f|=4,i.setI32(44,r.fileTokenSize)),i.setU8(32,f)}t.encode=n;function s(i,r){const f=i.getU8(32),c=(f&1)!=0,N=(f&2)!=0,o=(f&4)!=0;return T(T(T({id:y(i.getString(0)),size:y(i.getI64(8)),name:y(i.getString(16)),mimeType:y(i.getString(24))},c?{width:y(i.getI32(36))}:{}),N?{height:y(i.getI32(40))}:{}),o?{fileTokenSize:y(i.getI32(44))}:{})}t.decode=s})(be||(be={}));var ye;(t=>{t.VERSION_INFO=[{version:0,size:40},{version:1,size:48},{version:2,size:56},{version:3,size:56}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){var r,f;return I.bytes(t.CURRENT_VERSION.size).add(I.forString(i.id)).add(I.forString(i.url)).add(I.forString(i.title)).add(I.forString((r=i.base64favicon)!=null?r:null)).add(I.forString((f=i.selection)!=null?f:null))}t.measure=e;function n(i,r){var c,N;let f=0;i.setString(0,r.id),i.setString(8,r.url),i.setString(16,r.title),i.setString(24,(c=r.base64favicon)!=null?c:null),i.setString(32,(N=r.selection)!=null?N:null),r.blocked!==null&&r.blocked!==void 0&&(f|=1,r.blocked&&(f|=2)),r.selectionIsEditable!==null&&r.selectionIsEditable!==void 0&&(f|=4,r.selectionIsEditable&&(f|=8)),i.setU8(40,f)}t.encode=n;function s(i,r){const f=i.getString(24),c=r>=1?i.getString(32):null,N=r>=2?i.getU8(40):0,o=(N&1)!=0,d=(N&4)!=0;return T(T(T(T({id:y(i.getString(0)),url:y(i.getString(8)),title:y(i.getString(16))},f!==null?{base64favicon:f}:{}),c!==null?{selection:c}:{}),o?{blocked:(N&2)!=0}:{}),d?{selectionIsEditable:(N&8)!=0}:{})}t.decode=s})(ye||(ye={}));var Ae;(t=>{function e(s){if(s==="mainPage")return 0;if(s==="sidebar")return 1;throw new X}t.encode=e;function n(s){switch(s){case 0:return"mainPage";case 1:return"sidebar";default:throw new X}}t.decode=n})(Ae||(Ae={}));var Qe;(t=>{function e(s){if(s==="none")return 0;if(s==="sent")return 1;if(s==="success")return 2;if(s==="failure")return 3;throw new X}t.encode=e;function n(s){switch(s){case 0:return"none";case 1:return"sent";case 2:return"success";case 3:return"failure";default:return"none"}}t.decode=n})(Qe||(Qe={}));var Xe;(t=>{function e(s){if(s==="answer")return 0;if(s==="web")return 1;if(s==="images")return 2;if(s==="videos")return 3;throw new X}t.encode=e;function n(s){switch(s){case 0:return"answer";case 1:return"web";case 2:return"images";case 3:return"videos";default:return"answer"}}t.decode=n})(Xe||(Xe={}));var Le;(t=>{function e(s){if(s==="default_")return 0;if(s==="blue")return 1;if(s==="green")return 2;if(s==="yellow")return 3;if(s==="purple")return 4;if(s==="pink")return 5;if(s==="orange")return 6;if(s==="black")return 7;throw new X}t.encode=e;function n(s){switch(s){case 0:return"default_";case 1:return"blue";case 2:return"green";case 3:return"yellow";case 4:return"purple";case 5:return"pink";case 6:return"orange";case 7:return"black";default:return"default_"}}t.decode=n})(Le||(Le={}));var We;(t=>{function e(s){if(s==="none")return 0;if(s==="startTakeoverFromAgent")return 1;if(s==="endTakeoverFromAgent")return 2;if(s==="stopAgent")return 3;throw new X}t.encode=e;function n(s){switch(s){case 0:return"none";case 1:return"startTakeoverFromAgent";case 2:return"endTakeoverFromAgent";case 3:return"stopAgent";default:return"none"}}t.decode=n})(We||(We={}));class fe{}p(fe,"interfaceName","web.bridge.ConversationController"),p(fe,"interfaceVersion",3);(t=>{let e;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(E,w){E.setEnumValue(Ae,0,w.windowStyle)}R.encode=V;function q(E,w){return{windowStyle:y(E.getEnumValue(Ae,0))}}R.decode=q})(e=t.ConversationController_SetWindowStyle_Params||(t.ConversationController_SetWindowStyle_Params={}));let n;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forString(E.modelSlug))}R.measure=b;function V(E,w){E.setString(0,w.modelSlug)}R.encode=V;function q(E,w){return{modelSlug:y(E.getString(0))}}R.decode=q})(n=t.ConversationController_SetModel_Params||(t.ConversationController_SetModel_Params={}));let s;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(E,w){}R.encode=V;function q(E,w){return{}}R.decode=q})(s=t.ConversationController_NewConversation_Params||(t.ConversationController_NewConversation_Params={}));let i;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forString(E.remoteConversationId))}R.measure=b;function V(E,w){E.setString(0,w.remoteConversationId)}R.encode=V;function q(E,w){return{remoteConversationId:y(E.getString(0))}}R.decode=q})(i=t.ConversationController_LoadConversation_Params||(t.ConversationController_LoadConversation_Params={}));let r;(R=>{R.VERSION_INFO=[{version:0,size:32},{version:1,size:40}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forString(E.prompt)).add(I.forStringArray(E.systemHints)).add(I.forString(E.modelSlug))}R.measure=b;function V(E,w){let U=0;E.setString(0,w.prompt),E.setStringArray(8,w.systemHints),E.setString(16,w.modelSlug),w.n7jupdLocalSafeMode!==null&&w.n7jupdLocalSafeMode!==void 0&&(U|=1,w.n7jupdLocalSafeMode&&(U|=2)),E.setU8(24,U)}R.encode=V;function q(E,w){const U=w>=1?E.getU8(24):0,J=(U&1)!=0;return T({prompt:y(E.getString(0)),systemHints:y(W(E.getStringArray(8))),modelSlug:y(E.getString(16))},J?{n7jupdLocalSafeMode:(U&2)!=0}:{})}R.decode=q})(r=t.ConversationController_RequestCompletion_Params||(t.ConversationController_RequestCompletion_Params={}));let f;(R=>{R.VERSION_INFO=[{version:0,size:24}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){var w,U;return I.bytes(R.CURRENT_VERSION.size).add(I.forString((w=E.userMessage)!=null?w:null)).add(I.forString((U=E.targetedReply)!=null?U:null))}R.measure=b;function V(E,w){var U,J;E.setString(0,(U=w.userMessage)!=null?U:null),E.setString(8,(J=w.targetedReply)!=null?J:null)}R.encode=V;function q(E,w){const U=E.getString(0),J=E.getString(8);return T(T({},U!==null?{userMessage:U}:{}),J!==null?{targetedReply:J}:{})}R.decode=q})(f=t.ConversationController_PopulatePrompt_Params||(t.ConversationController_PopulatePrompt_Params={}));let c;(R=>{R.VERSION_INFO=[{version:0,size:32},{version:1,size:40},{version:2,size:48},{version:3,size:48}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){var w,U;return I.bytes(R.CURRENT_VERSION.size).add(I.forString(E.url)).add(I.forString(E.title)).add(I.forString((w=E.base64favicon)!=null?w:null)).add(I.forString((U=E.selection)!=null?U:null))}R.measure=b;function V(E,w){var J,ue;let U=0;E.setString(0,w.url),E.setString(8,w.title),E.setString(16,(J=w.base64favicon)!=null?J:null),E.setString(24,(ue=w.selection)!=null?ue:null),w.blocked!==null&&w.blocked!==void 0&&(U|=1,w.blocked&&(U|=2)),w.selectionIsEditable!==null&&w.selectionIsEditable!==void 0&&(U|=4,w.selectionIsEditable&&(U|=8)),E.setU8(32,U)}R.encode=V;function q(E,w){const U=E.getString(16),J=w>=1?E.getString(24):null,ue=w>=2?E.getU8(32):0,at=(ue&1)!=0,pt=(ue&4)!=0;return T(T(T(T({url:y(E.getString(0)),title:y(E.getString(8))},U!==null?{base64favicon:U}:{}),J!==null?{selection:J}:{}),at?{blocked:(ue&2)!=0}:{}),pt?{selectionIsEditable:(ue&8)!=0}:{})}R.decode=q})(c=t.ConversationController_UpdateContext_Params||(t.ConversationController_UpdateContext_Params={}));let N;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forObject(le,E.details))}R.measure=b;function V(E,w){E.setObjectIndirect(le,0,w.details)}R.encode=V;function q(E,w){return{details:y(E.getObjectIndirect(le,0))}}R.decode=q})(N=t.ConversationController_PrepareConversation_Params||(t.ConversationController_PrepareConversation_Params={}));let o;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forObject(ge,E.options))}R.measure=b;function V(E,w){E.setObjectIndirect(ge,0,w.options)}R.encode=V;function q(E,w){return{options:y(E.getObjectIndirect(ge,0))}}R.decode=q})(o=t.ConversationController_SetSuperWidgetOptions_Params||(t.ConversationController_SetSuperWidgetOptions_Params={}));let d;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forObjectArray(be,E.attachments))}R.measure=b;function V(E,w){E.setObjectArray(be,0,w.attachments)}R.encode=V;function q(E,w){return{attachments:y(W(E.getObjectArray(be,0)))}}R.decode=q})(d=t.ConversationController_SetAttachments_Params||(t.ConversationController_SetAttachments_Params={}));let u;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forString(E.to))}R.measure=b;function V(E,w){E.setString(0,w.to)}R.encode=V;function q(E,w){return{to:y(E.getString(0))}}R.decode=q})(u=t.ConversationController_Navigate_Params||(t.ConversationController_Navigate_Params={}));let h;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forObject(re,E.whisperContent))}R.measure=b;function V(E,w){E.setObjectIndirect(re,0,w.whisperContent)}R.encode=V;function q(E,w){return{whisperContent:y(E.getObjectIndirect(re,0))}}R.decode=q})(h=t.ConversationController_SetWhisperContent_Params||(t.ConversationController_SetWhisperContent_Params={}));let a;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forObjectArray(ye,E.tabs))}R.measure=b;function V(E,w){E.setObjectArray(ye,0,w.tabs)}R.encode=V;function q(E,w){return{tabs:y(W(E.getObjectArray(ye,0)))}}R.decode=q})(a=t.ConversationController_SetTabContext_Params||(t.ConversationController_SetTabContext_Params={}));let S;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forString(E.origin))}R.measure=b;function V(E,w){E.setString(0,w.origin)}R.encode=V;function q(E,w){return{origin:y(E.getString(0))}}R.decode=q})(S=t.ConversationController_SetPromptOrigin_Params||(t.ConversationController_SetPromptOrigin_Params={}));let O;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(E,w){}R.encode=V;function q(E,w){return{}}R.decode=q})(O=t.ConversationController_CloseNavigationSidebar_Params||(t.ConversationController_CloseNavigationSidebar_Params={}));let l;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(E,w){E.setEnumValue(Le,0,w.theme)}R.encode=V;function q(E,w){return{theme:y(E.getEnumValue(Le,0))}}R.decode=q})(l=t.ConversationController_SetChatTheme_Params||(t.ConversationController_SetChatTheme_Params={}));let _;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(E,w){}R.encode=V;function q(E,w){return{}}R.decode=q})(_=t.ConversationController_ShowSearch_Params||(t.ConversationController_ShowSearch_Params={}));let D;(R=>{R.VERSION_INFO=[{version:0,size:24}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forString(E.query)).add(I.forString(E.navlinksEvent))}R.measure=b;function V(E,w){E.setString(0,w.query),E.setString(8,w.navlinksEvent)}R.encode=V;function q(E,w){return{query:y(E.getString(0)),navlinksEvent:y(E.getString(8))}}R.decode=q})(D=t.ConversationController_PopulateNavlinks_Params||(t.ConversationController_PopulateNavlinks_Params={}));let g;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(E,w){E.setEnumValue(We,0,w.request)}R.encode=V;function q(E,w){return{request:y(E.getEnumValue(We,0))}}R.decode=q})(g=t.ConversationController_HandleAgentRequest_Params||(t.ConversationController_HandleAgentRequest_Params={}));let m;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(E,w){E.setEnumValue(ne,0,w.preferredMode)}R.encode=V;function q(E,w){return{preferredMode:y(E.getEnumValue(ne,0))}}R.decode=q})(m=t.ConversationController_SetAgentSafeMode_Params||(t.ConversationController_SetAgentSafeMode_Params={}));let x;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(E,w){let U=0;w.hasSeenNux&&(U|=1),E.setU8(0,U)}R.encode=V;function q(E,w){return{hasSeenNux:(E.getU8(0)&1)!=0}}R.decode=q})(x=t.ConversationController_SetAgentSafeModeHasSeenNux_Params||(t.ConversationController_SetAgentSafeModeHasSeenNux_Params={}));let $;(R=>{R.VERSION_INFO=[{version:0,size:32}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size).add(I.forString(E.name)).add(I.forNumericArray(Uint8Array,E.bytes)).add(I.forString(E.mimeType))}R.measure=b;function V(E,w){E.setString(0,w.name),E.setNumericArray(Uint8Array,8,w.bytes),E.setString(16,w.mimeType)}R.encode=V;function q(E,w){return{name:y(E.getString(0)),bytes:y(E.getNumericArray(Uint8Array,8)),mimeType:y(E.getString(16))}}R.decode=q})($=t.ConversationController_AttachUserFile_Params||(t.ConversationController_AttachUserFile_Params={}));let Z;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(E){return I.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(E,w){}R.encode=V;function q(E,w){return{}}R.decode=q})(Z=t.ConversationController_ShowNavigationSidebarAsOverlay_Params||(t.ConversationController_ShowNavigationSidebarAsOverlay_Params={}));class L{constructor(b){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(b.endpointState,!0),this._version=3}static create(){const[b,V]=k.createChannel(t);return[new L(b),V]}static createToBrowser(){const[b,V]=this.create();return Mojo.bindInterface(t.interfaceName,V.pipe.rawHandle),b}setWindowStyle(b){const V={windowStyle:b};this._endpoint.send(z.encode(0,F.None,e,V))}setModel(b){const V={modelSlug:b};this._endpoint.send(z.encode(1,F.None,n,V))}newConversation(){const b={};this._endpoint.send(z.encode(2,F.None,s,b))}loadConversation(b){const V={remoteConversationId:b};this._endpoint.send(z.encode(3,F.None,i,V))}requestCompletion(b,V,q,E){const w={prompt:b,systemHints:V,modelSlug:q,n7jupdLocalSafeMode:E};this._endpoint.send(z.encode(4,F.None,r,w))}populatePrompt(b,V){const q={userMessage:b,targetedReply:V};this._endpoint.send(z.encode(5,F.None,f,q))}updateContext(b,V,q,E,w,U){const J={url:b,title:V,base64favicon:q,selection:E,blocked:w,selectionIsEditable:U};this._endpoint.send(z.encode(6,F.None,c,J))}prepareConversation(b){const V={details:b};this._endpoint.send(z.encode(7,F.None,N,V))}setSuperWidgetOptions(b){const V={options:b};this._endpoint.send(z.encode(8,F.None,o,V))}setAttachments(b){const V={attachments:b};this._endpoint.send(z.encode(9,F.None,d,V))}navigate(b){const V={to:b};this._endpoint.send(z.encode(10,F.None,u,V))}setWhisperContent(b){const V={whisperContent:b};this._endpoint.send(z.encode(11,F.None,h,V))}setTabContext(b){const V={tabs:b};this._endpoint.send(z.encode(12,F.None,a,V))}setPromptOrigin(b){const V={origin:b};this._endpoint.send(z.encode(13,F.None,S,V))}closeNavigationSidebar(){const b={};this._endpoint.send(z.encode(14,F.None,O,b))}setChatTheme(b){const V={theme:b};this._endpoint.send(z.encode(15,F.None,l,V))}showSearch(){const b={};this._endpoint.send(z.encode(16,F.None,_,b))}populateNavlinks(b,V){const q={query:b,navlinksEvent:V};this._endpoint.send(z.encode(17,F.None,D,q))}handleAgentRequest(b){const V={request:b};this._endpoint.send(z.encode(18,F.None,g,V))}setAgentSafeMode(b){const V={preferredMode:b};this._endpoint.send(z.encode(19,F.None,m,V))}setAgentSafeModeHasSeenNux(b){const V={hasSeenNux:b};this._endpoint.send(z.encode(20,F.None,x,V))}attachUserFile(b,V,q){const E={name:b,bytes:V,mimeType:q};this._endpoint.send(z.encode(21,F.None,$,E))}showNavigationSidebarAsOverlay(){const b={};this._endpoint.send(z.encode(22,F.None,Z,b))}}t.Proxy=L;class tt extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(V,q){this.addReceiver(q,async(E,w)=>{switch(E.header.ordinal){case 0:{const U=E.decode(e);V.setWindowStyle(U.windowStyle);break}case 1:{const U=E.decode(n);V.setModel(U.modelSlug);break}case 2:{E.decode(s),V.newConversation();break}case 3:{const U=E.decode(i);V.loadConversation(U.remoteConversationId);break}case 4:{const U=E.decode(r);V.requestCompletion(U.prompt,U.systemHints,U.modelSlug,U.n7jupdLocalSafeMode);break}case 5:{const U=E.decode(f);V.populatePrompt(U.userMessage,U.targetedReply);break}case 6:{const U=E.decode(c);V.updateContext(U.url,U.title,U.base64favicon,U.selection,U.blocked,U.selectionIsEditable);break}case 7:{const U=E.decode(N);V.prepareConversation(U.details);break}case 8:{const U=E.decode(o);V.setSuperWidgetOptions(U.options);break}case 9:{const U=E.decode(d);V.setAttachments(U.attachments);break}case 10:{const U=E.decode(u);V.navigate(U.to);break}case 11:{const U=E.decode(h);V.setWhisperContent(U.whisperContent);break}case 12:{const U=E.decode(a);V.setTabContext(U.tabs);break}case 13:{const U=E.decode(S);V.setPromptOrigin(U.origin);break}case 14:{E.decode(O),V.closeNavigationSidebar();break}case 15:{const U=E.decode(l);V.setChatTheme(U.theme);break}case 16:{E.decode(_),V.showSearch();break}case 17:{const U=E.decode(D);V.populateNavlinks(U.query,U.navlinksEvent);break}case 18:{const U=E.decode(g);V.handleAgentRequest(U.request);break}case 19:{const U=E.decode(m);V.setAgentSafeMode(U.preferredMode);break}case 20:{const U=E.decode(x);V.setAgentSafeModeHasSeenNux(U.hasSeenNux);break}case 21:{const U=E.decode($);V.attachUserFile(U.name,U.bytes,U.mimeType);break}case 22:{E.decode(Z),V.showNavigationSidebarAsOverlay();break}default:E.header.expectsResponse&&w.sendUnimplementedResponse(E.header.requestID,E.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(V)})}createRemote(V){const[q,E]=k.createChannel(t);return this.bind(V,E),q}}t.Dispatcher=tt})(fe||(fe={}));class Ge{}p(Ge,"interfaceName","web.bridge.GenericInterface"),p(Ge,"interfaceVersion",0);(t=>{let e;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(o){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(o.request))}r.measure=f;function c(o,d){o.setString(0,d.request)}r.encode=c;function N(o,d){return{request:y(o.getString(0))}}r.decode=N})(e=t.GenericInterface_AcceptMessage_Params||(t.GenericInterface_AcceptMessage_Params={}));let n;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(o){var d;return I.bytes(r.CURRENT_VERSION.size).add(I.forString((d=o.response)!=null?d:null))}r.measure=f;function c(o,d){var u;o.setString(0,(u=d.response)!=null?u:null)}r.encode=c;function N(o,d){const u=o.getString(0);return T({},u!==null?{response:u}:{})}r.decode=N})(n=t.GenericInterface_AcceptMessage_ResponseParams||(t.GenericInterface_AcceptMessage_ResponseParams={}));class s{constructor(f){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(f.endpointState,!0),this._version=0}static create(){const[f,c]=k.createChannel(t);return[new s(f),c]}static createToBrowser(){const[f,c]=this.create();return Mojo.bindInterface(t.interfaceName,c.pipe.rawHandle),f}async acceptMessage(f){const c={request:f};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,c))).decode(n).response}}t.Proxy=s;class i extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(c,N){this.addReceiver(N,async(o,d)=>{switch(o.header.ordinal){case 0:{const u=o.decode(e),h=c.acceptMessage(u.request),a=d.createResponder(n,0,o.header.requestID),S=await h;a({response:S});break}default:o.header.expectsResponse&&d.sendUnimplementedResponse(o.header.requestID,o.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[N,o]=k.createChannel(t);return this.bind(c,o),N}}t.Dispatcher=i})(Ge||(Ge={}));class xe{}p(xe,"interfaceName","web.bridge.LinkHandler"),p(xe,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function r(N){return I.bytes(i.CURRENT_VERSION.size).add(I.forString(N.url)).add(I.forString(N.target))}i.measure=r;function f(N,o){N.setString(0,o.url),N.setString(8,o.target)}i.encode=f;function c(N,o){return{url:y(N.getString(0)),target:y(N.getString(8))}}i.decode=c})(e=t.LinkHandler_HandleLink_Params||(t.LinkHandler_HandleLink_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}handleLink(r,f){const c={url:r,target:f};this._endpoint.send(z.encode(0,F.None,e,c))}}t.Proxy=n;class s extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(f,c){this.addReceiver(c,async(N,o)=>{switch(N.header.ordinal){case 0:{const d=N.decode(e);f.handleLink(d.url,d.target);break}default:N.header.expectsResponse&&o.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[c,N]=k.createChannel(t);return this.bind(f,N),c}}t.Dispatcher=s})(xe||(xe={}));var we;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){return I.bytes(t.CURRENT_VERSION.size).add(I.forString(i.author)).add(I.forString(i.message))}t.measure=e;function n(i,r){i.setString(0,r.author),i.setString(8,r.message)}t.encode=n;function s(i,r){return{author:y(i.getString(0)),message:y(i.getString(8))}}t.decode=s})(we||(we={}));class he{}p(he,"interfaceName","web.bridge.LocalToolHandler"),p(he,"interfaceVersion",0);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:24}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size).add(I.forString(u.toolname)).add(I.forString(u.args))}c.measure=N;function o(u,h){u.setString(0,h.toolname),u.setString(8,h.args)}c.encode=o;function d(u,h){return{toolname:y(u.getString(0)),args:y(u.getString(8))}}c.decode=d})(e=t.LocalToolHandler_CallLocalTool_Params||(t.LocalToolHandler_CallLocalTool_Params={}));let n;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size).add(I.forObjectArray(we,u.response))}c.measure=N;function o(u,h){u.setObjectArray(we,0,h.response)}c.encode=o;function d(u,h){return{response:y(W(u.getObjectArray(we,0)))}}c.decode=d})(n=t.LocalToolHandler_CallLocalTool_ResponseParams||(t.LocalToolHandler_CallLocalTool_ResponseParams={}));let s;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size)}c.measure=N;function o(u,h){}c.encode=o;function d(u,h){return{}}c.decode=d})(s=t.LocalToolHandler_GetToolNames_Params||(t.LocalToolHandler_GetToolNames_Params={}));let i;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size).add(I.forStringArray(u.toolnames))}c.measure=N;function o(u,h){u.setStringArray(0,h.toolnames)}c.encode=o;function d(u,h){return{toolnames:y(W(u.getStringArray(0)))}}c.decode=d})(i=t.LocalToolHandler_GetToolNames_ResponseParams||(t.LocalToolHandler_GetToolNames_ResponseParams={}));class r{constructor(N){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(N.endpointState,!0),this._version=0}static create(){const[N,o]=k.createChannel(t);return[new r(N),o]}static createToBrowser(){const[N,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),N}async callLocalTool(N,o){const d={toolname:N,args:o};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,d))).decode(n).response}async getToolNames(){const N={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,s,N))).decode(i).toolnames}}t.Proxy=r;class f extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(o,d){this.addReceiver(d,async(u,h)=>{switch(u.header.ordinal){case 0:{const a=u.decode(e),S=o.callLocalTool(a.toolname,a.args),O=h.createResponder(n,0,u.header.requestID),l=await S;O({response:l});break}case 1:{u.decode(s);const a=o.getToolNames(),S=h.createResponder(i,1,u.header.requestID),O=await a;S({toolnames:O});break}default:u.header.expectsResponse&&h.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[d,u]=k.createChannel(t);return this.bind(o,u),d}}t.Dispatcher=f})(he||(he={}));var C;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){var r;return I.bytes(t.CURRENT_VERSION.size).add(I.forString(i.clientId)).add(I.forString((r=i.serverId)!=null?r:null))}t.measure=e;function n(i,r){var f;i.setString(0,r.clientId),i.setString(8,(f=r.serverId)!=null?f:null)}t.encode=n;function s(i,r){const f=i.getString(8);return T({clientId:y(i.getString(0))},f!==null?{serverId:f}:{})}t.decode=s})(C||(C={}));var P;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){var r;return I.bytes(t.CURRENT_VERSION.size).add(I.forString((r=i.title)!=null?r:null))}t.measure=e;function n(i,r){var c;let f=0;i.setString(0,(c=r.title)!=null?c:null),r.updateTimestampMsSince1970!==null&&r.updateTimestampMsSince1970!==void 0&&(f|=1,i.setF64(16,r.updateTimestampMsSince1970)),r.status!==null&&r.status!==void 0&&(f|=2,i.setEnumValue(He,12,r.status)),i.setU8(8,f)}t.encode=n;function s(i,r){const f=i.getString(0),c=i.getU8(8),N=(c&1)!=0,o=(c&2)!=0;return T(T(T({},f!==null?{title:f}:{}),N?{updateTimestampMsSince1970:y(i.getF64(16))}:{}),o?{status:y(i.getEnumValue(He,12))}:{})}t.decode=s})(P||(P={}));var He;(t=>{function e(s){if(s==="none")return 0;if(s==="inProgress")return 1;if(s==="done")return 2;throw new X}t.encode=e;function n(s){switch(s){case 0:return"none";case 1:return"inProgress";case 2:return"done";default:return"none"}}t.decode=n})(He||(He={}));class Te{}p(Te,"interfaceName","web.bridge.NavigationSidebarController"),p(Te,"interfaceVersion",0);(t=>{let e;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size)}d.measure=u;function h(S,O){let l=0;O.visible&&(l|=1),S.setU8(0,l)}d.encode=h;function a(S,O){return{visible:(S.getU8(0)&1)!=0}}d.decode=a})(e=t.NavigationSidebarController_SetSidebarVisibility_Params||(t.NavigationSidebarController_SetSidebarVisibility_Params={}));let n;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size)}d.measure=u;function h(S,O){}d.encode=h;function a(S,O){return{}}d.decode=a})(n=t.NavigationSidebarController_ToggleSidebarVisibility_Params||(t.NavigationSidebarController_ToggleSidebarVisibility_Params={}));let s;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size)}d.measure=u;function h(S,O){}d.encode=h;function a(S,O){return{}}d.decode=a})(s=t.NavigationSidebarController_NewConversation_Params||(t.NavigationSidebarController_NewConversation_Params={}));let i;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size).add(I.forObject(C,S.id)).add(I.forObject(P,S.data))}d.measure=u;function h(S,O){S.setObjectIndirect(C,0,O.id),S.setObjectIndirect(P,8,O.data)}d.encode=h;function a(S,O){return{id:y(S.getObjectIndirect(C,0)),data:y(S.getObjectIndirect(P,8))}}d.decode=a})(i=t.NavigationSidebarController_AddConversationHistoryItem_Params||(t.NavigationSidebarController_AddConversationHistoryItem_Params={}));let r;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size).add(I.forObject(C,S.id)).add(I.forObject(P,S.data))}d.measure=u;function h(S,O){S.setObjectIndirect(C,0,O.id),S.setObjectIndirect(P,8,O.data)}d.encode=h;function a(S,O){return{id:y(S.getObjectIndirect(C,0)),data:y(S.getObjectIndirect(P,8))}}d.decode=a})(r=t.NavigationSidebarController_UpdateConversationHistoryItem_Params||(t.NavigationSidebarController_UpdateConversationHistoryItem_Params={}));let f;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size)}d.measure=u;function h(S,O){}d.encode=h;function a(S,O){return{}}d.decode=a})(f=t.NavigationSidebarController_GetSidebarVisibility_Params||(t.NavigationSidebarController_GetSidebarVisibility_Params={}));let c;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size)}d.measure=u;function h(S,O){let l=0;O.visible&&(l|=1),S.setU8(0,l)}d.encode=h;function a(S,O){return{visible:(S.getU8(0)&1)!=0}}d.decode=a})(c=t.NavigationSidebarController_GetSidebarVisibility_ResponseParams||(t.NavigationSidebarController_GetSidebarVisibility_ResponseParams={}));class N{constructor(u){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(u.endpointState,!0),this._version=0}static create(){const[u,h]=k.createChannel(t);return[new N(u),h]}static createToBrowser(){const[u,h]=this.create();return Mojo.bindInterface(t.interfaceName,h.pipe.rawHandle),u}setSidebarVisibility(u){const h={visible:u};this._endpoint.send(z.encode(0,F.None,e,h))}toggleSidebarVisibility(){const u={};this._endpoint.send(z.encode(1,F.None,n,u))}newConversation(){const u={};this._endpoint.send(z.encode(2,F.None,s,u))}addConversationHistoryItem(u,h){const a={id:u,data:h};this._endpoint.send(z.encode(3,F.None,i,a))}updateConversationHistoryItem(u,h){const a={id:u,data:h};this._endpoint.send(z.encode(4,F.None,r,a))}async getSidebarVisibility(){const u={};return(await this._endpoint.sendAndAwaitResponse(z.encode(5,F.None,f,u))).decode(c).visible}}t.Proxy=N;class o extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(h,a){this.addReceiver(a,async(S,O)=>{switch(S.header.ordinal){case 0:{const l=S.decode(e);h.setSidebarVisibility(l.visible);break}case 1:{S.decode(n),h.toggleSidebarVisibility();break}case 2:{S.decode(s),h.newConversation();break}case 3:{const l=S.decode(i);h.addConversationHistoryItem(l.id,l.data);break}case 4:{const l=S.decode(r);h.updateConversationHistoryItem(l.id,l.data);break}case 5:{S.decode(f);const l=h.getSidebarVisibility(),_=O.createResponder(c,5,S.header.requestID),D=await l;_({visible:D});break}default:S.header.expectsResponse&&O.sendUnimplementedResponse(S.header.requestID,S.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(h)})}createRemote(h){const[a,S]=k.createChannel(t);return this.bind(h,S),a}}t.Dispatcher=o})(Te||(Te={}));var Ce;(t=>{function e(s){if(s==="general")return 0;if(s==="personalization")return 1;if(s==="searchEngines")return 2;if(s==="dataControls")return 3;if(s==="modelTraining")return 4;if(s==="autofill")return 5;throw new X}t.encode=e;function n(s){switch(s){case 0:return"general";case 1:return"personalization";case 2:return"searchEngines";case 3:return"dataControls";case 4:return"modelTraining";case 5:return"autofill";default:return"general"}}t.decode=n})(Ce||(Ce={}));class De{}p(De,"interfaceName","web.bridge.OpenSettingsController"),p(De,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function r(N){return I.bytes(i.CURRENT_VERSION.size)}i.measure=r;function f(N,o){let d=0;o.tab!==null&&o.tab!==void 0&&(d|=1,N.setEnumValue(Ce,4,o.tab)),N.setU8(0,d)}i.encode=f;function c(N,o){const u=(N.getU8(0)&1)!=0;return T({},u?{tab:y(N.getEnumValue(Ce,4))}:{})}i.decode=c})(e=t.OpenSettingsController_OpenSettings_Params||(t.OpenSettingsController_OpenSettings_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}openSettings(r){const f={tab:r};this._endpoint.send(z.encode(0,F.None,e,f))}}t.Proxy=n;class s extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(f,c){this.addReceiver(c,async(N,o)=>{switch(N.header.ordinal){case 0:{const d=N.decode(e);f.openSettings(d.tab);break}default:N.header.expectsResponse&&o.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[c,N]=k.createChannel(t);return this.bind(f,N),c}}t.Dispatcher=s})(De||(De={}));var Pe;(t=>{function e(s){if(s==="messageSent")return 0;if(s==="addTabContext")return 1;if(s==="removeTabContext")return 2;throw new X}t.encode=e;function n(s){switch(s){case 0:return"messageSent";case 1:return"addTabContext";case 2:return"removeTabContext";default:return"messageSent"}}t.decode=n})(Pe||(Pe={}));class ke{}p(ke,"interfaceName","web.bridge.ProductEventHandler"),p(ke,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function r(N){return I.bytes(i.CURRENT_VERSION.size)}i.measure=r;function f(N,o){N.setEnumValue(Pe,0,o.eventName)}i.encode=f;function c(N,o){return{eventName:y(N.getEnumValue(Pe,0))}}i.decode=c})(e=t.ProductEventHandler_TriggerProductEvent_Params||(t.ProductEventHandler_TriggerProductEvent_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}triggerProductEvent(r){const f={eventName:r};this._endpoint.send(z.encode(0,F.None,e,f))}}t.Proxy=n;class s extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(f,c){this.addReceiver(c,async(N,o)=>{switch(N.header.ordinal){case 0:{const d=N.decode(e);f.triggerProductEvent(d.eventName);break}default:N.header.expectsResponse&&o.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[c,N]=k.createChannel(t);return this.bind(f,N),c}}t.Dispatcher=s})(ke||(ke={}));class ie{}p(ie,"interfaceName","web.bridge.DesktopSidebarController"),p(ie,"interfaceVersion",0);(t=>{let e;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(a){return I.bytes(o.CURRENT_VERSION.size)}o.measure=d;function u(a,S){}o.encode=u;function h(a,S){return{}}o.decode=h})(e=t.DesktopSidebarController_CloseSidebar_Params||(t.DesktopSidebarController_CloseSidebar_Params={}));let n;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(a){return I.bytes(o.CURRENT_VERSION.size)}o.measure=d;function u(a,S){}o.encode=u;function h(a,S){return{}}o.decode=h})(n=t.DesktopSidebarController_CanHideHeader_Params||(t.DesktopSidebarController_CanHideHeader_Params={}));let s;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(a){return I.bytes(o.CURRENT_VERSION.size)}o.measure=d;function u(a,S){let O=0;S.canHideHeader&&(O|=1),a.setU8(0,O)}o.encode=u;function h(a,S){return{canHideHeader:(a.getU8(0)&1)!=0}}o.decode=h})(s=t.DesktopSidebarController_CanHideHeader_ResponseParams||(t.DesktopSidebarController_CanHideHeader_ResponseParams={}));let i;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(a){return I.bytes(o.CURRENT_VERSION.size)}o.measure=d;function u(a,S){}o.encode=u;function h(a,S){return{}}o.decode=h})(i=t.DesktopSidebarController_BecomeMainPage_Params||(t.DesktopSidebarController_BecomeMainPage_Params={}));let r;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(a){return I.bytes(o.CURRENT_VERSION.size)}o.measure=d;function u(a,S){}o.encode=u;function h(a,S){return{}}o.decode=h})(r=t.DesktopSidebarController_OpenInNewTab_Params||(t.DesktopSidebarController_OpenInNewTab_Params={}));let f;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(a){return I.bytes(o.CURRENT_VERSION.size).add(I.forString(a.text))}o.measure=d;function u(a,S){a.setString(0,S.text)}o.encode=u;function h(a,S){return{text:y(a.getString(0))}}o.decode=h})(f=t.DesktopSidebarController_InsertTextFromWebContent_Params||(t.DesktopSidebarController_InsertTextFromWebContent_Params={}));class c{constructor(d){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(d.endpointState,!0),this._version=0}static create(){const[d,u]=k.createChannel(t);return[new c(d),u]}static createToBrowser(){const[d,u]=this.create();return Mojo.bindInterface(t.interfaceName,u.pipe.rawHandle),d}closeSidebar(){const d={};this._endpoint.send(z.encode(0,F.None,e,d))}async canHideHeader(){const d={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,n,d))).decode(s).canHideHeader}becomeMainPage(){const d={};this._endpoint.send(z.encode(2,F.None,i,d))}openInNewTab(){const d={};this._endpoint.send(z.encode(3,F.None,r,d))}insertTextFromWebContent(d){const u={text:d};this._endpoint.send(z.encode(4,F.None,f,u))}}t.Proxy=c;class N extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(u,h){this.addReceiver(h,async(a,S)=>{switch(a.header.ordinal){case 0:{a.decode(e),u.closeSidebar();break}case 1:{a.decode(n);const O=u.canHideHeader(),l=S.createResponder(s,1,a.header.requestID),_=await O;l({canHideHeader:_});break}case 2:{a.decode(i),u.becomeMainPage();break}case 3:{a.decode(r),u.openInNewTab();break}case 4:{const O=a.decode(f);u.insertTextFromWebContent(O.text);break}default:a.header.expectsResponse&&S.sendUnimplementedResponse(a.header.requestID,a.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[h,a]=k.createChannel(t);return this.bind(u,a),h}}t.Dispatcher=N})(ie||(ie={}));class je{}p(je,"interfaceName","web.bridge.SidebarOverlayController"),p(je,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function r(N){return I.bytes(i.CURRENT_VERSION.size)}i.measure=r;function f(N,o){}i.encode=f;function c(N,o){return{}}i.decode=c})(e=t.SidebarOverlayController_DidCloseSidebarOverlay_Params||(t.SidebarOverlayController_DidCloseSidebarOverlay_Params={}));class n{constructor(r){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}didCloseSidebarOverlay(){const r={};this._endpoint.send(z.encode(0,F.None,e,r))}}t.Proxy=n;class s extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(f,c){this.addReceiver(c,async(N,o)=>{switch(N.header.ordinal){case 0:{N.decode(e),f.didCloseSidebarOverlay();break}default:N.header.expectsResponse&&o.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[c,N]=k.createChannel(t);return this.bind(f,N),c}}t.Dispatcher=s})(je||(je={}));var Ue;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){return I.bytes(t.CURRENT_VERSION.size)}t.measure=e;function n(i,r){}t.encode=n;function s(i,r){return{}}t.decode=s})(Ue||(Ue={}));var ze;(t=>{t.VERSION_INFO=[{version:0,size:48}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){return I.bytes(t.CURRENT_VERSION.size).add(I.forString(i.id)).add(I.forString(i.fileid)).add(I.forString(i.name)).add(I.forString(i.mimetype))}t.measure=e;function n(i,r){i.setString(0,r.id),i.setString(8,r.fileid),i.setString(16,r.name),i.setU32(24,r.size),i.setString(32,r.mimetype)}t.encode=n;function s(i,r){return{id:y(i.getString(0)),fileid:y(i.getString(8)),name:y(i.getString(16)),size:y(i.getU32(24)),mimetype:y(i.getString(32))}}t.decode=s})(ze||(ze={}));var Fe;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){return I.bytes(t.CURRENT_VERSION.size).add(I.forString(i.assetPointer))}t.measure=e;function n(i,r){i.setString(0,r.assetPointer),i.setU32(8,r.sizeBytes),i.setU32(12,r.width),i.setU32(16,r.height)}t.encode=n;function s(i,r){return{assetPointer:y(i.getString(0)),sizeBytes:y(i.getU32(8)),width:y(i.getU32(12)),height:y(i.getU32(16))}}t.decode=s})(Fe||(Fe={}));var _e;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){var r,f,c;return I.bytes(t.CURRENT_VERSION.size).add(I.forString((r=i.content)!=null?r:null)).add(I.forString((f=i.url)!=null?f:null)).add(I.forString((c=i.title)!=null?c:null))}t.measure=e;function n(i,r){var f,c,N;i.setString(0,(f=r.content)!=null?f:null),i.setString(8,(c=r.url)!=null?c:null),i.setString(16,(N=r.title)!=null?N:null)}t.encode=n;function s(i,r){const f=i.getString(0),c=i.getString(8),N=i.getString(16);return T(T(T({},f!==null?{content:f}:{}),c!==null?{url:c}:{}),N!==null?{title:N}:{})}t.decode=s})(_e||(_e={}));var re;(t=>{t.VERSION_INFO=[{version:0,size:32},{version:1,size:48}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){var r,f,c,N,o;return I.bytes(t.CURRENT_VERSION.size).add(I.forString((r=i.content)!=null?r:null)).add(I.forObjectArray(ze,(f=i.files)!=null?f:null)).add(I.forObjectArray(Fe,(c=i.imageAssetPointers)!=null?c:null)).add(I.forObjectArray(_e,(N=i.embeddedDocumentContexts)!=null?N:null)).add(I.forString((o=i.customInstructions)!=null?o:null))}t.measure=e;function n(i,r){var f,c,N,o,d;i.setString(0,(f=r.content)!=null?f:null),i.setObjectArray(ze,8,(c=r.files)!=null?c:null),i.setObjectArray(Fe,16,(N=r.imageAssetPointers)!=null?N:null),i.setObjectArray(_e,24,(o=r.embeddedDocumentContexts)!=null?o:null),i.setString(32,(d=r.customInstructions)!=null?d:null)}t.encode=n;function s(i,r){const f=i.getString(0),c=W(i.getObjectArray(ze,8)),N=W(i.getObjectArray(Fe,16)),o=r>=1?W(i.getObjectArray(_e,24)):null,d=r>=1?i.getString(32):null;return T(T(T(T(T({},f!==null?{content:f}:{}),c!==null?{files:c}:{}),N!==null?{imageAssetPointers:N}:{}),o!==null?{embeddedDocumentContexts:o}:{}),d!==null?{customInstructions:d}:{})}t.decode=s})(re||(re={}));var me;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(i){return I.bytes(t.CURRENT_VERSION.size).add(I.forString(i.base64image)).add(I.forString(i.mimetype)).add(I.forString(i.filename))}t.measure=e;function n(i,r){i.setString(0,r.base64image),i.setString(8,r.mimetype),i.setString(16,r.filename)}t.encode=n;function s(i,r){return{base64image:y(i.getString(0)),mimetype:y(i.getString(8)),filename:y(i.getString(16))}}t.decode=s})(me||(me={}));class Oe{}p(Oe,"interfaceName","web.bridge.WhisperContentProvider"),p(Oe,"interfaceVersion",0);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){var h;return I.bytes(c.CURRENT_VERSION.size).add(I.forObject(Ue,(h=u.options)!=null?h:null))}c.measure=N;function o(u,h){var a;u.setObjectIndirect(Ue,0,(a=h.options)!=null?a:null)}c.encode=o;function d(u,h){const a=u.getObjectIndirect(Ue,0);return T({},a!==null?{options:a}:{})}c.decode=d})(e=t.WhisperContentProvider_GetWhisperContent_Params||(t.WhisperContentProvider_GetWhisperContent_Params={}));let n;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){var h;return I.bytes(c.CURRENT_VERSION.size).add(I.forObject(re,(h=u.content)!=null?h:null))}c.measure=N;function o(u,h){var a;u.setObjectIndirect(re,0,(a=h.content)!=null?a:null)}c.encode=o;function d(u,h){const a=u.getObjectIndirect(re,0);return T({},a!==null?{content:a}:{})}c.decode=d})(n=t.WhisperContentProvider_GetWhisperContent_ResponseParams||(t.WhisperContentProvider_GetWhisperContent_ResponseParams={}));let s;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size)}c.measure=N;function o(u,h){}c.encode=o;function d(u,h){return{}}c.decode=d})(s=t.WhisperContentProvider_GetTabScreenshot_Params||(t.WhisperContentProvider_GetTabScreenshot_Params={}));let i;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){var h;return I.bytes(c.CURRENT_VERSION.size).add(I.forObject(me,(h=u.screenshot)!=null?h:null))}c.measure=N;function o(u,h){var a;u.setObjectIndirect(me,0,(a=h.screenshot)!=null?a:null)}c.encode=o;function d(u,h){const a=u.getObjectIndirect(me,0);return T({},a!==null?{screenshot:a}:{})}c.decode=d})(i=t.WhisperContentProvider_GetTabScreenshot_ResponseParams||(t.WhisperContentProvider_GetTabScreenshot_ResponseParams={}));class r{constructor(N){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(N.endpointState,!0),this._version=0}static create(){const[N,o]=k.createChannel(t);return[new r(N),o]}static createToBrowser(){const[N,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),N}async getWhisperContent(N){const o={options:N};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,o))).decode(n).content}async getTabScreenshot(){const N={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,s,N))).decode(i).screenshot}}t.Proxy=r;class f extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(o,d){this.addReceiver(d,async(u,h)=>{switch(u.header.ordinal){case 0:{const a=u.decode(e),S=o.getWhisperContent(a.options),O=h.createResponder(n,0,u.header.requestID),l=await S;O({content:l});break}case 1:{u.decode(s);const a=o.getTabScreenshot(),S=h.createResponder(i,1,u.header.requestID),O=await a;S({screenshot:O});break}default:u.header.expectsResponse&&h.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[d,u]=k.createChannel(t);return this.bind(o,u),d}}t.Dispatcher=f})(Oe||(Oe={}));class Jt{constructor(e){p(this,"dispatcher");this.dispatcher=new Ne.Dispatcher,this.dispatcher.bind(this,e)}refreshSessionContext(e,n){B.authSessionContext={authToken:e,behavior:n},B.wantsAuthSessionContext$.set(!0)}}function Kt(t){return t==="none"||t==="sent"||t==="success"||t==="failure"}class At{constructor(e,n,s){p(this,"prepareState");p(this,"lastPrepareTimestamp");p(this,"conduitToken");this.prepareState=Kt(e)?e:"none",this.lastPrepareTimestamp=n-performance.timeOrigin,this.conduitToken=s}}class Qt{constructor(e){p(this,"dispatcher");this.dispatcher=new fe.Dispatcher,this.dispatcher.bind(this,e)}closeNavigationSidebar(){const e=Me();It(e)&&!Ut(()=>zt(e))||it.setSidebarOpen(!1)}setChatTheme(e){const n=e==="default_"?"default":e;B.chatTheme=n,B.wantsSetChatTheme$.set(!0)}showSearch(){Tt(()=>import("./fbdmxe5ygbrc3wdb.js").then(e=>e.a),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>e.openFannyPackSearch())}setWindowStyle(e){Ft.set(Me(),e)}setModel(e){B.wantsModelSlug$.set(e)}newConversation(){B.wantsNewConversation$.set(!0),B.selectedConversationId$.set(void 0)}loadConversation(e){B.wantsNewConversation$.set(!1),B.selectedConversationId$.set(e)}requestCompletion(e,n,s,i){B.requestCompletion={prompt:e,systemHints:n,modelSlug:s,n7jupdLocalSafeMode:i!=null?i:void 0},B.wantsRequestCompletion$.set(!0)}populatePrompt(e,n){B.populatePrompt={userMessage:e!=null?e:null,targetedReply:n!=null?n:null},B.wantsPopulatePrompt$.set(!0)}updateContext(e,n,s,i,r,f){B.context$.set({id:e,url:e,title:n,base64favicon:s,selection:i,blocked:r,selectionIsEditable:f})}prepareConversation(e){var n;B.prepareConversationDetails=new At(e.prepareState,e.lastPrepareTimestampMsSince1970,(n=e.conduitToken)!=null?n:void 0)}setSuperWidgetOptions(e){const n=bt(e.selectedTab);B.wantsInitialTab$.set(n)}setAttachments(e){B.attachments=e.map(n=>{const{id:s,name:i,size:r,mimeType:f,width:c,height:N,fileTokenSize:o}=n;return T(T(T(T(T(T(T({},s&&{id:s}),i&&{name:i}),r&&{size:typeof r=="bigint"?Number(r):r}),f&&{mime_type:f}),c&&{width:c}),N&&{height:N}),o&&{file_token_size:o})})}attachUserFile(e,n,s){B.attachUserFileRequest={name:e,bytes:n,mimeType:s},B.wantsAttachUserFile$.set(!0)}setWhisperContent(e){B.whisperContent=e}setTabContext(e){B.tabContext=e}setPromptOrigin(e){switch(e){case"ntp":case"address_bar":case"context_menu":B.promptOrigin=e;break}}navigate(e){yt(e)}populateNavlinks(e,n){const s=JSON.parse(n);wt.getState().updateFromEvent(e,s)}setAgentSafeMode(e){ft(e)}setAgentSafeModeHasSeenNux(e){Rt(e)}handleAgentRequest(e){B.agentRequest=e,B.wantsHandleAgentRequest$.set(!0)}showNavigationSidebarAsOverlay(){it.setPopoverSidebarOpen(!0)}}class Xt{constructor(e){p(this,"proxy");this.proxy=e,_t(Me()).subscribe((s,i)=>{s.isSlideoverSidebarOpen&&!i.isSlideoverSidebarOpen&&this.setSidebarVisibility(!1)}),this.proxy.getSidebarVisibility().then(async s=>{s&&(await mt(()=>!qt()),it.setSlideoverSidebarOpen(!1))})}setSidebarVisibility(e){this.proxy.setSidebarVisibility(e)}}class Be{}p(Be,"interfaceName","owl.mojom.ChatGPTFrontendHost"),p(Be,"interfaceVersion",0);(t=>{let e;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size)}d.measure=u;function h(S,O){S.setRemote(0,O.frontend)}d.encode=h;function a(S,O){return{frontend:y(S.getRemote(Ee,0))}}d.decode=a})(e=t.ChatGPTFrontendHost_SetFrontend_Params||(t.ChatGPTFrontendHost_SetFrontend_Params={}));let n;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size)}d.measure=u;function h(S,O){}d.encode=h;function a(S,O){return{}}d.decode=a})(n=t.ChatGPTFrontendHost_GetAccountID_Params||(t.ChatGPTFrontendHost_GetAccountID_Params={}));let s;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){var O;return I.bytes(d.CURRENT_VERSION.size).add(I.forString((O=S.id)!=null?O:null))}d.measure=u;function h(S,O){var l;S.setString(0,(l=O.id)!=null?l:null)}d.encode=h;function a(S,O){const l=S.getString(0);return T({},l!==null?{id:l}:{})}d.decode=a})(s=t.ChatGPTFrontendHost_GetAccountID_ResponseParams||(t.ChatGPTFrontendHost_GetAccountID_ResponseParams={}));let i;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){var O;return I.bytes(d.CURRENT_VERSION.size).add(I.forString(S.name)).add(I.forString((O=S.payload)!=null?O:null))}d.measure=u;function h(S,O){var l;S.setString(0,O.name),S.setString(8,(l=O.payload)!=null?l:null)}d.encode=h;function a(S,O){const l=S.getString(8);return T({name:y(S.getString(0))},l!==null?{payload:l}:{})}d.decode=a})(i=t.ChatGPTFrontendHost_SendMessage_Params||(t.ChatGPTFrontendHost_SendMessage_Params={}));let r;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){var O;return I.bytes(d.CURRENT_VERSION.size).add(I.forString((O=S.reply)!=null?O:null))}d.measure=u;function h(S,O){var l;S.setString(0,(l=O.reply)!=null?l:null)}d.encode=h;function a(S,O){const l=S.getString(0);return T({},l!==null?{reply:l}:{})}d.decode=a})(r=t.ChatGPTFrontendHost_SendMessage_ResponseParams||(t.ChatGPTFrontendHost_SendMessage_ResponseParams={}));let f;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size).add(I.forString(S.serverConversationId))}d.measure=u;function h(S,O){S.setString(0,O.serverConversationId)}d.encode=h;function a(S,O){return{serverConversationId:y(S.getString(0))}}d.decode=a})(f=t.ChatGPTFrontendHost_ReceivedFirstToken_Params||(t.ChatGPTFrontendHost_ReceivedFirstToken_Params={}));let c;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function u(S){return I.bytes(d.CURRENT_VERSION.size).add(I.forString(S.interfaceName))}d.measure=u;function h(S,O){S.setString(0,O.interfaceName),S.setHandle(8,O.pipe)}d.encode=h;function a(S,O){return{interfaceName:y(S.getString(0)),pipe:y(S.getMessagePipeHandle(8))}}d.decode=a})(c=t.ChatGPTFrontendHost_BindReceiver_Params||(t.ChatGPTFrontendHost_BindReceiver_Params={}));class N{constructor(u){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(u.endpointState,!0),this._version=0}static create(){const[u,h]=k.createChannel(t);return[new N(u),h]}static createToBrowser(){const[u,h]=this.create();return Mojo.bindInterface(t.interfaceName,h.pipe.rawHandle),u}setFrontend(u){const h={frontend:u};this._endpoint.send(z.encode(0,F.None,e,h))}async getAccountID(){const u={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,n,u))).decode(s).id}async sendMessage(u,h){const a={name:u,payload:h};return(await this._endpoint.sendAndAwaitResponse(z.encode(2,F.None,i,a))).decode(r).reply}receivedFirstToken(u){const h={serverConversationId:u};this._endpoint.send(z.encode(3,F.None,f,h))}bindReceiver(u,h){const a={interfaceName:u,pipe:h};this._endpoint.send(z.encode(4,F.None,c,a))}}t.Proxy=N;class o extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(h,a){this.addReceiver(a,async(S,O)=>{switch(S.header.ordinal){case 0:{const l=S.decode(e);h.setFrontend(l.frontend);break}case 1:{S.decode(n);const l=h.getAccountID(),_=O.createResponder(s,1,S.header.requestID),D=await l;_({id:D});break}case 2:{const l=S.decode(i),_=h.sendMessage(l.name,l.payload),D=O.createResponder(r,2,S.header.requestID),g=await _;D({reply:g});break}case 3:{const l=S.decode(f);h.receivedFirstToken(l.serverConversationId);break}case 4:{const l=S.decode(c);h.bindReceiver(l.interfaceName,l.pipe);break}default:S.header.expectsResponse&&O.sendUnimplementedResponse(S.header.requestID,S.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(h)})}createRemote(h){const[a,S]=k.createChannel(t);return this.bind(h,S),a}}t.Dispatcher=o})(Be||(Be={}));class Ee{}p(Ee,"interfaceName","owl.mojom.ChatGPTFrontend"),p(Ee,"interfaceVersion",0);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size).add(I.forString(u.message))}c.measure=N;function o(u,h){u.setString(0,h.message)}c.encode=o;function d(u,h){return{message:y(u.getString(0))}}c.decode=d})(e=t.ChatGPTFrontend_LogConsoleMessage_Params||(t.ChatGPTFrontend_LogConsoleMessage_Params={}));let n;(c=>{c.VERSION_INFO=[{version:0,size:24}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){var h;return I.bytes(c.CURRENT_VERSION.size).add(I.forString(u.name)).add(I.forString((h=u.payload)!=null?h:null))}c.measure=N;function o(u,h){var a;u.setString(0,h.name),u.setString(8,(a=h.payload)!=null?a:null)}c.encode=o;function d(u,h){const a=u.getString(8);return T({name:y(u.getString(0))},a!==null?{payload:a}:{})}c.decode=d})(n=t.ChatGPTFrontend_SendMessage_Params||(t.ChatGPTFrontend_SendMessage_Params={}));let s;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){var h;return I.bytes(c.CURRENT_VERSION.size).add(I.forString((h=u.reply)!=null?h:null))}c.measure=N;function o(u,h){var a;u.setString(0,(a=h.reply)!=null?a:null)}c.encode=o;function d(u,h){const a=u.getString(0);return T({},a!==null?{reply:a}:{})}c.decode=d})(s=t.ChatGPTFrontend_SendMessage_ResponseParams||(t.ChatGPTFrontend_SendMessage_ResponseParams={}));let i;(c=>{c.VERSION_INFO=[{version:0,size:24}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function N(u){return I.bytes(c.CURRENT_VERSION.size).add(I.forString(u.interfaceName))}c.measure=N;function o(u,h){u.setString(0,h.interfaceName),u.setHandle(8,h.pipe)}c.encode=o;function d(u,h){return{interfaceName:y(u.getString(0)),pipe:y(u.getMessagePipeHandle(8))}}c.decode=d})(i=t.ChatGPTFrontend_BindReceiver_Params||(t.ChatGPTFrontend_BindReceiver_Params={}));class r{constructor(N){p(this,"_endpoint");p(this,"_version");this._endpoint=new M(N.endpointState,!0),this._version=0}static create(){const[N,o]=k.createChannel(t);return[new r(N),o]}static createToBrowser(){const[N,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),N}logConsoleMessage(N){const o={message:N};this._endpoint.send(z.encode(0,F.None,e,o))}async sendMessage(N,o){const d={name:N,payload:o};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,n,d))).decode(s).reply}bindReceiver(N,o){const d={interfaceName:N,pipe:o};this._endpoint.send(z.encode(2,F.None,i,d))}}t.Proxy=r;class f extends Y{constructor(){super(t);p(this,"onDisconnect")}bind(o,d){this.addReceiver(d,async(u,h)=>{switch(u.header.ordinal){case 0:{const a=u.decode(e);o.logConsoleMessage(a.message);break}case 1:{const a=u.decode(n),S=o.sendMessage(a.name,a.payload),O=h.createResponder(s,1,u.header.requestID),l=await S;O({reply:l});break}case 2:{const a=u.decode(i);o.bindReceiver(a.interfaceName,a.pipe);break}default:u.header.expectsResponse&&h.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[d,u]=k.createChannel(t);return this.bind(o,u),d}}t.Dispatcher=f})(Ee||(Ee={}));const Lt=6e4;class Wt{constructor(e,n){p(this,"host");p(this,"logger");p(this,"lastMissingAuthTime",0);this.host=e,this.logger=n}async getAccountID(){return await this.host.getAccountID()}onMissingSessionAuth(){const e=Date.now();if(e-this.lastMissingAuthTime>Lt){this.lastMissingAuthTime=e;const[n,s]=se.Proxy.create();this.bindReceiver(s),this.logger.notice("onMissingSessionAuth.invoked"),n.handleMissingSessionAuth()}}recordAvailableSessionAuth(e){const[n,s]=se.Proxy.create();this.bindReceiver(s),this.logger.notice("recordAvailableSessionAuth.invoked"),n.recordAvailableSessionAuth(e)}onAcceptedWorkspaceInvite(e){const[n,s]=se.Proxy.create();this.bindReceiver(s),this.logger.notice("onAcceptedWorkspaceInvite.invoked"),n.handleAcceptedWorkspaceInvite(e)}onSwitchAccount(e){const[n,s]=se.Proxy.create();this.bindReceiver(s),this.logger.notice("onSwitchAccount.invoked"),n.handleSwitchAccount(e)}tryOpenAgentViewer(e){const[n,s]=Q.Proxy.create();return this.bindReceiver(s),n.tryOpenAgentViewer(e)}agentConversationStopped(e,n=!1){const[s,i]=Q.Proxy.create();this.bindReceiver(i),s.agentConversationStopped(e,n)}userSentMessageInAgentConversation(e,n,s,i,r,f){const[c,N]=Q.Proxy.create();this.bindReceiver(N),c.userSentMessageInAgentConversation(e,n,s,i,r,f)}userStoppedAgentConversation(e){const[n,s]=Q.Proxy.create();this.bindReceiver(s),n.userStoppedAgentConversation(e)}openAgentTabs(e,n){const[s,i]=Q.Proxy.create();this.bindReceiver(i),s.openAgentTabs(e,n)}getClientID(){const[e,n]=Q.Proxy.create();return this.bindReceiver(n),e.getClientID()}getClientCapabilityVersion(){const[e,n]=Q.Proxy.create();return this.bindReceiver(n),e.getClientCapabilityVersion()}getAgentStatus(e){const[n,s]=Q.Proxy.create();return this.bindReceiver(s),n.getAgentStatus(e)}insertTextFromWebContent(e){const[n,s]=ie.Proxy.create();this.bindReceiver(s),n.insertTextFromWebContent(e)}becomeMainPage(){const[e,n]=ie.Proxy.create();this.bindReceiver(n),e.becomeMainPage()}openInNewTab(){const[e,n]=ie.Proxy.create();this.bindReceiver(n),e.openInNewTab()}updateAgentSafeMode(e){const[n,s]=oe.Proxy.create();this.bindReceiver(s),n.updateAgentSafeMode(e)}updateAgentSafeModeHasSeenNux(e){const[n,s]=oe.Proxy.create();this.bindReceiver(s),n.updateAgentSafeModeHasSeenNux(e)}async requestAgentSafeModeState(){const[e,n]=oe.Proxy.create();this.bindReceiver(n);try{return await e.getAgentSafeModeState()}catch(s){this.logger.info("requestAgentSafeModeState.failed");return}}closeSideChat(){const[e,n]=ie.Proxy.create();this.bindReceiver(n),e.closeSidebar()}async getWhisperContent(){const[e,n]=Oe.Proxy.create();return this.bindReceiver(n),await e.getWhisperContent({})}async getTabScreenshot(){const[e,n]=Oe.Proxy.create();return this.bindReceiver(n),await e.getTabScreenshot()}receivedFirstToken(){this.host.receivedFirstToken("")}async callLocalTool(e,n){const[s,i]=he.Proxy.create();return this.bindReceiver(i),await s.callLocalTool(e,n)}bindReceiver(e){this.host.bindReceiver(e.interfaceType.interfaceName,e.pipe)}async getToolNames(){const[e,n]=he.Proxy.create();return this.bindReceiver(n),await e.getToolNames()}openSettings(e){const[n,s]=De.Proxy.create();this.bindReceiver(s),n.openSettings(e)}enqueueConversationArchive(e){const[n,s]=Ie.Proxy.create();this.bindReceiver(s),n.enqueueConversationArchive(e)}cancelConversationArchive(e){const[n,s]=Ie.Proxy.create();this.bindReceiver(s),n.cancelConversationArchive(e)}closeSidebarOverlay(){It(Me())&&setTimeout(()=>{const[e,n]=je.Proxy.create();this.bindReceiver(n),e.didCloseSidebarOverlay()},50)}}class Gt{constructor(e){p(this,"proxy");this.proxy=e}handleLink(e,n){this.proxy.handleLink(e,n)}}class Ht{constructor(e){p(this,"proxy");this.proxy=e}triggerProductEvent(e){this.proxy.triggerProductEvent(e)}}class Ct{constructor(){p(this,"dispatcher");p(this,"host");p(this,"logger");p(this,"conversationControllers",[]);p(this,"authStateController",[]);p(this,"navigationSidebarController");this.logger=xt.createLogger("web-bridge-host","info","http"),this.dispatcher=new Ee.Dispatcher;const e=Be.Proxy.createToBrowser();this.host=new Wt(e,this.logger),e.setFrontend(this.dispatcher.createRemote(this));const[n,s]=Te.Proxy.create();this.host.bindReceiver(s),this.navigationSidebarController=new Xt(n),this.requestInitialAgentSafeModeState()}get linkHandler(){const[e,n]=xe.Proxy.create();return this.host.bindReceiver(n),new Gt(e)}get productEventHandler(){const[e,n]=ke.Proxy.create();return this.host.bindReceiver(n),new Ht(e)}logConsoleMessage(e){this.logger.info(e)}sendMessage(e,n){return Promise.resolve(null)}bindReceiver(e,n){e===fe.interfaceName?this.conversationControllers.push(new Qt(new ve(fe,n))):e===Ne.interfaceName&&this.authStateController.push(new Jt(new ve(Ne,n)))}async requestInitialAgentSafeModeState(){try{const e=await this.host.requestAgentSafeModeState();if(!e)return;ft(e.preferredMode),Rt(e.hasSeenNux)}catch(e){this.logger.info("requestInitialAgentSafeModeState.failed")}}}let v;function sn(){v=new Ct}function cn(){return v==null?void 0:v.host}function rn(){return v==null?void 0:v.linkHandler}function un(){return v==null?void 0:v.productEventHandler}async function dn(){return v?(v.logger.debug("Getting whisper content"),await v.host.getWhisperContent()):null}async function on(){return v?await v.host.getTabScreenshot():null}function Nn(){if(!v)return null;v.host.closeSideChat()}export{Nn as closeSideChat,cn as getHost,rn as getLinkHandler,un as getProductEventHandler,dn as getSidebarWhisperContent,on as getTabScreenshot,sn as initHostConnection};
//# sourceMappingURL=bzf7wmlorqd0v0qv.js.map
