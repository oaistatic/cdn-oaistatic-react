const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mrdyqa826yfi5waz.js","assets/kfrdmkli83ureki3.js","assets/pj0tlj9i65oz4g7u.js","assets/d8cmrw5lg3ncoab2.js","assets/gsc4el4a1mly7vaf.js","assets/oydzwmbjqxhwp1ek.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/glgf3sl2j4mvtn59.js","assets/jrdfnldycz1vs00j.js","assets/fyw02vlaiv2vq6cj.js","assets/conversation-small-lq38g8zw.css","assets/crl8f3ggvylz4ls6.js","assets/kji8i56w8xht8ehj.js","assets/euq7ybw4dhrsufo2.js","assets/edhlcmww46h398kf.js","assets/gws9mu49pdgn2ocx.js","assets/ipjj058rvhjq2uu2.js","assets/h1em0bjkpkjv8ykw.js","assets/kbj1b07s2z6vxqkg.js","assets/hu1bt0oauegdhua6.js"])))=>i.map(i=>d[i]);
var Ls=Object.defineProperty,Rs=Object.defineProperties;var Ds=Object.getOwnPropertyDescriptors;var Rt=Object.getOwnPropertySymbols;var Ws=Object.prototype.hasOwnProperty,Hs=Object.prototype.propertyIsEnumerable;var Dt=(t,e,a)=>e in t?Ls(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,de=(t,e)=>{for(var a in e||(e={}))Ws.call(e,a)&&Dt(t,a,e[a]);if(Rt)for(var a of Rt(e))Hs.call(e,a)&&Dt(t,a,e[a]);return t},Te=(t,e)=>Rs(t,Ds(e));import{_ as _e,o as ss,r as b,b as Fs,h as et,j as s,v as Bs,e as Vs,c as Ee,M as Je,d as _t,R as as,a as Gs}from"./kfrdmkli83ureki3.js";import{az as we,u as Se,N as Ue,c7 as wt,l4 as $s,d as z,ak as be,cm as Wt,jB as at,dT as ns,fw as zs,au as Us,_ as Xe,is as Ht,jp as os,lp as Ft,L as Ys,ej as Mt,R as Ze,A as yt,a6 as $e,J as ze,dk as qs,aA as Fe,kC as rs,d$ as Ks,jG as Qs,kk as it,sB as Js,fu as Xs,bZ as Zs,kQ as is,w as ea,e9 as ta,cy as ee,dN as sa,dM as ls,eJ as aa,ag as Be,ah as Ve,cq as na,c9 as At,sC as oa,sD as ra,sE as ia,$ as Bt,a0 as Vt,aG as la,Q as ca,sF as da,V as je,aF as ua,ay as ha,M as Ye,hM as ma,aa as pa,gO as ut,dR as nt,g as cs,bk as ds,rj as Gt,pQ as $t,sG as ht,jj as ga,ao as fa,lB as Sa,sH as ya,d_ as xa,x as zt,sI as ba,ez as us,p as Ca,al as xt,kO as Ta,B as Ut,fv as _a,e3 as hs,j9 as ms,bd as wa,py as Ma,qr as Aa,sJ as va,O as Ia,bs as bt,dY as Ea,br as ps,l as Pa,fy as ka,a4 as Na,kX as ja,z as ot,sK as Oa,sL as La,cb as gs,ct as Ra,g2 as Da,co as Wa,r as Yt,D as qt,sM as Ha,bp as Fa,n as Ba,ba as Va,jI as Ga,bT as $a,bn as za,ce as Ua,cc as Ya,eE as qa,dj as Ka,eW as Qa,gh as Ja,hT as Xa,ed as Za,Y as en,nD as tn,fM as fs,lY as sn,aN as an,qV as nn,iz as on,er as rn,j4 as ln}from"./kw08ajijqinojrwh.js";import{ny as vt,nz as cn,nA as dn,iD as Z,nB as Qe,nC as un,nD as hn,nE as $,nF as mn,nG as pn,nH as gn,my as fn,be as Sn,nI as yn,nJ as xn,nK as bn,nL as Ss,nM as Cn,nN as Tn,nO as _n,bF as wn,nP as Mn,j8 as An,nQ as vn,gJ as In,ay as qe,nR as En,j7 as Pn,jh as kn,hK as lt,nS as Ge,nT as Nn,nU as ct,bH as jn,nV as rt,nW as On,nX as Ln,hA as Rn,gM as ys,nY as Dn,lr as xs,aN as Wn,aA as Kt,cL as bs,nZ as Hn,aw as Fn,il as Bn,n_ as Vn,n$ as Gn,az as Ct,h3 as Cs,o0 as $n,av as zn,o1 as Un,d5 as Yn,aI as qn,o2 as Ts,o3 as Kn,o4 as Qn,o5 as Jn,o6 as Xn,o7 as Zn,o8 as eo,o9 as to,oa as so,ob as ao,oc as no,od as oo,id as ro,fP as io,oe as lo,mg as co,c_ as uo,of as Qt,og as ho,gf as mo,de as po,dc as go,oh as fo,oi as So,oj as yo,ok as xo,ol as bo,om as Co,on as To,jd as _o,oo as wo,op as Mo,oq as Ao,or as vo,os as Io,ot as Eo,j5 as Po,ii as ko,ou as No,ov as jo,a_ as Oo,ow as Lo,aP as Ro,ox as Do,oy as Wo,oz as Ho,oA as Fo,oB as Bo,oC as Vo,mF as Go,oD as $o,oE as zo,oF as Uo,oG as Yo,oH as qo,oI as Ko,oJ as Qo,oK as Jo,oL as Xo,oM as Zo,oN as er,oO as tr,oP as sr,oQ as ar,oR as nr,oS as or,oT as rr,oU as ir,fs as Jt,h0 as lr,g$ as cr}from"./fyw02vlaiv2vq6cj.js";import{F as dr}from"./nh6x5pasrftsddpw.js";import{u as ur,p as hr,M as mr,S as _s,P as pr,a as gr,b as fr,c as Sr,d as yr,D as xr,T as br}from"./hk5ml9l4i4ups2ga.js";import Cr from"./emcmoa6z1wsa6qof.js";import{C as Tr,T as _r}from"./be1f0w4doetbrndv.js";import{T as wr}from"./hrprrmrs14hiemon.js";import{P as Mr}from"./c326bjybavj646xd.js";const Xt=we(()=>_e(()=>import("./mrdyqa826yfi5waz.js"),__vite__mapDeps([0,1])),{loading:t=>Fe(t)}),Ar=we(()=>_e(()=>import("./pj0tlj9i65oz4g7u.js"),__vite__mapDeps([2,1])),{loading:t=>Fe(t)}),vr=we(()=>_e(()=>import("./d8cmrw5lg3ncoab2.js"),__vite__mapDeps([3,1])),{loading:t=>Fe(t)}),Ir=we(()=>_e(()=>import("./gsc4el4a1mly7vaf.js"),__vite__mapDeps([4,1])),{loading:t=>Fe(t)}),Er=we(()=>_e(()=>import("./oydzwmbjqxhwp1ek.js"),__vite__mapDeps([5,1])),{loading:t=>Fe(t)}),ws=4,Pr=7,kr=5,Nr=3600*1e3,jr=async({text:t,numCompletions:e,isUnauthenticated:a,isThreadUsingSearchMode:c=!1,autocompleteMode:h,activeSystemHintType:d})=>{try{return(a?await Ze.safePost("/conversation/experimental/generate_autocompletions_anon",{requestBody:{input_text:t,num_completions:e,in_search_mode:c,system_hint:d!=null?d:void 0},authOption:yt.Anonymous}):await Ze.safePost("/conversation/experimental/generate_autocompletions",{requestBody:{input_text:t,num_completions:e,in_search_mode:c,system_hint:d!=null?d:void 0}})).completions.map(m=>({id:Bs(),type:Z.Autocomplete,title:m.slice(0,t.length),body:m.slice(t.length),oneliner:m,prompt:m,source:h}))}catch(S){return[]}},Tt=(t,e=!1)=>be(t,Ue(t)?"4093727931":"312855442",{disableExposureLog:!e}),Or=({clientThreadId:t,composerController:e,isGizmoThread:a,isNewThread:c,isProjectThread:h})=>{const[d,S]=ss(),m=d.get("forceShowNuxCASuggestion")==="true",l=Se(),n=!Ue(l),i=wt(),{autocompletions$:o}=vt(e),p=3,f=i===$e.Search,{bingTrendingSuggestions:r,chatgptTrendingSuggestions:g,imageGenTrendingSuggestions:u,fetchBingTrendingSuggestions:y,fetchChatgptTrendingSuggestions:x}=Rr(),M=b.useRef({bing:0,chatgpt:{time:0,imageGen:!1}}),C=b.useRef(!1),[T,A]=b.useState(!1),_=$s(E=>E.files),j=_.length>0,w=b.useMemo(()=>_.some(E=>{var D,N,q,Me;return((Me=(q=(D=E.fileSpec)==null?void 0:D.mimeType)!=null?q:(N=E.file)==null?void 0:N.type)!=null?Me:"").toLowerCase().startsWith("image/")}),[_]),v=cn(),I=z(()=>rs(e)),P=c&&!a&&!h&&v()&&be(l,"4031588851",{disableExposureLog:!0}).get("personalized_prompts_enabled",!1),{data:F}=Fs(Te(de({},dn(ws*2,null)),{enabled:P})),te=b.useMemo(()=>{var D;return((D=F==null?void 0:F.items)!=null?D:[]).filter(N=>N.category==="personalized").map(N=>({type:Z.Starter,id:N.id,title:N.title,body:N.description,prompt:N.prompt,oneliner:N.oneliner,category:N.category,theme:N.theme,emoji:N.emoji}))},[F]);b.useEffect(()=>Wt(at(e).dom,{click:()=>A(!0)}),[e]);const B=b.useCallback(E=>{const H=Qe(e);return H&&mt(E).startsWith(H.toLocaleLowerCase())},[e]),K=b.useCallback(E=>{const H=Qe(e),D=E.title+E.body;return B(E)?Te(de({},E),{title:H,body:D.slice(H.length)}):Te(de({},E),{title:D,body:""})},[e,B]),Q=b.useCallback((E=!1)=>{o.set(H=>!H.some(B)&&H.length>0?[]:E?H:H.map(K))},[B,K,o]),k=et(),X=un(),{data:he}=hn(4,X),ye=b.useMemo(()=>({[$.Canvas]:[{type:Z.Starter,title:k.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:k.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:$.Canvas},{type:Z.Starter,title:k.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:k.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:$.Canvas},{type:Z.Starter,title:k.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:k.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:$.Canvas},{type:Z.Starter,title:k.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:k.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:$.Canvas}],[$.Image]:[{type:Z.Starter,title:k.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:k.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:$.Image},{type:Z.Starter,title:k.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:k.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:$.Image},{type:Z.Starter,title:k.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:k.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:$.Image},{type:Z.Starter,title:k.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:k.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:$.Image}],[$.ContextualAnswers]:[{type:Z.Starter,title:k.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:k.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:s.jsx(Ir,{className:"h-full w-full"}),body:"",theme:$.ContextualAnswers},{type:Z.Starter,title:k.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:k.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:s.jsx(Ar,{className:"h-full w-full"}),body:"",theme:$.ContextualAnswers},{type:Z.Starter,title:k.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:k.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:s.jsx(vr,{className:"h-full w-full"}),body:"",theme:$.ContextualAnswers},{type:Z.Starter,title:k.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:k.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:s.jsx(Er,{className:"h-full w-full"}),body:"",theme:$.ContextualAnswers}]}),[k]),me=ns(),L=zs().connectorLinks.size>0,se=z(()=>Ks(l)),ge=!se,{prompts:ae,isLoading:Y}=mn(),ne=se&&se.length>0&&!L,re=Ue(l),ue=ne?be(l,"1704943789").get("onboarding_state","control")==="suggested_prompts":!1,R=b.useMemo(()=>new pn({localStorageKey:Us.CARecommendedPromptsUpsell,schedule:{intervalMs:1440*60*1e3,maxShowsPerInterval:3},termination:{maxShows:9}}),[]);b.useEffect(()=>{if((!ne||!ue||i!=null||!R.shouldShow())&&!m||ge||Y||me==null)return;const E=[...ae];o.set(H=>H.length>0?H:(C.current||(R.recordShown(),Xe.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_shown","chatgpt_contextual_answers_recommended_prompt_shown",{prompts:E.map(D=>{var N;return(N=D.data)==null?void 0:N.id}).join(","),shown_times:R.getShownTimes().toString()}),C.current=!0),E))},[ae,ge,Y,ne,ue,i,R,m,me,o]);const G=Tt(l,!1),O=Tt(l,!0),U=gn(l,!0),pe=ur();b.useEffect(()=>Ht(()=>Ft(e),E=>{const H=()=>{o.set(D=>D.filter(N=>N.theme!==$.Search&&N.theme!==$.ChatGPTTrending&&N.theme!==$.ImageGenTrending&&N.theme!==$.Image&&N.theme!==$.Slurm&&N.theme!==$.Tatertot&&N.theme!==$.ContextualAnswersNUX&&N.theme!==$.Glaux))};if(E&&c&&!a&&!h||m)if(f)o.set(r.length>0?r:[]),M.current.bing===0&&(M.current.bing=Date.now(),y());else if(!i&&(I||T)&&v()&&U.get("homepage_prompt_style","chips")==="autocomplete"){if(U.get("personalized_prompts_enabled",!1)&&te.length>0){const D=q=>{var Pe,ve,ke,De,Ne,We;const Me=(ke=(ve=(Pe=q.oneliner)!=null?Pe:q.body)!=null?ve:q.prompt)!=null?ke:q.title;if(!Me)return null;const Re=Me;return Te(de({},q),{type:Z.Autocomplete,title:(De=q.title)!=null?De:Re,body:(We=(Ne=q.body)!=null?Ne:q.oneliner)!=null?We:"",autocompletionChunks:bn(Qe(e),Re)})},N=te.slice(0,p).map(D).filter(Boolean);o.set(N)}else if(T&&!P){const D=hr(pe,o(),4,3);o.set(D.map(N=>Te(de({},N),{body:""})))}}else if(!i&&G.get("enable_data",!1)){o.set(()=>T&&w&&u.length>0&&O.get("enable_image_gen_trending",!1)?u:T&&!w&&g.length>0&&O.get("enable_chatgpt_trending",!1)?g:[]);const D=Date.now(),N=M.current.chatgpt;(N.time===0||D-N.time>Nr||N.imageGen!==w)&&(M.current.chatgpt={time:D,imageGen:w},x(w))}else if(X&&he&&he.length>0)o.set(he);else if(i===$e.PictureV2){const D=yn(k);o.set(D)}else if(i===$e.Tatertot)o.set(xn(k,re));else if(i===$e.Slurm)be(l,"1704943789").get("post_connection_connector_button",!1)&&ae.length>0&&!Y&&o.set(ae);else{if(o().length>0&&o()[0].theme===$.ContextualAnswersNUX)return;if(o().length===0)return;H()}else H()},{fireImmediately:!0}),[e,y,x,G,O,f,o,r,g,u,i,T,k,t,c,a,h,ye,d,S,m,j,w,re,pe,te,U,ae,Y,l,v,I,me,P,he,X]),b.useEffect(()=>os(()=>{if(Ft(e)){const E=o().filter(H=>H.type!==Z.Autocomplete);E.length>0&&fn(E,t)}}),[e,o,t]);const ie=Wr(f),oe=be(l,"4031588851"),Oe=oe.get("autocomplete_min_char",4),Ae=oe.get("autocomplete_fetch_interval",200),le=b.useRef(null),Ce=b.useCallback(Ys(async E=>{if(!Lr(e,Oe)){o.set([]);return}const H=Qe(e);if(!(le.current&&le.current.length>Oe&&H.startsWith(le.current)))try{const D=(await jr({text:H,numCompletions:E,isUnauthenticated:n,isThreadUsingSearchMode:f,autocompleteMode:ie,activeSystemHintType:i})).filter(B).map(K);o.set(N=>{const q=N.filter(B),Me=D.filter(Re=>{const Pe=mt(Re);return!q.some(ve=>{const ke=mt(ve);if(Pe===ke)return!0;const De=new RegExp("[\\p{P}\\p{S}]$","u"),Ne=Pe.replace(De,""),We=ke.replace(De,"");return Ne===ke||Pe===We||Ne===We})}).slice(0,p-q.length);return[...q,...Me]})}catch(D){}},ie==="BING"?150:Ae),[e,ie,K,Ae,i]),Le=b.useCallback(()=>{Q();const E=p-o().filter(B).length;E>0&&Ce(E)},[Ce,Q,o,B]),xe=b.useMemo(()=>ie==="HARDCODED"?Q:Le,[ie,Le,Q]),ce=b.useCallback(()=>{xe()},[xe]),fe=b.useCallback(()=>{Q(!0),Qe(e).indexOf("\n")>0&&o.set([])},[e,o,Q]);b.useEffect(()=>Wt(at(e).dom,{input:ce}),[e,ce]),b.useEffect(()=>Ht(()=>Qs(e),fe),[e,fe])};function Lr(t,e){var c;const a=at(t).state.doc;return a.childCount===1&&((c=a.firstChild)==null?void 0:c.isTextblock)===!0&&a.content.size>=e&&a.content.size<=80}const Rr=()=>{const[t,e]=b.useState([]),[a,c]=b.useState([]),[h,d]=b.useState([]),S=Mt(),m=Se(),l=Tt(m,!1),n=l.get("num_mobile_results",kr),i=l.get("num_desktop_results",Pr),o=l.get("item_label","PROMPT"),p=b.useCallback(async()=>{const g=(await Ze.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:ws},authOption:yt.SendIfAvailable})).suggestions.map((u,y)=>({type:Z.Trending,title:Zt(u),body:"",icon:s.jsx(Xt,{className:"h-full w-full"}),prompt:Zt(u),id:"search-trending-".concat(y),theme:$.Search}));return e(g),g},[]),f=b.useCallback(async r=>{const u=((await Ze.safeGet("/trending/chatgpt",{parameters:{query:de({num_items:S?i:n},r?{tags:["image_gen"]}:{})},authOption:yt.SendIfAvailable})).topics||[]).map((y,x)=>{var j,w,v,I,P;const M=(j=y.suggested_prompts)!=null?j:[],C=M.length>0?M[Math.floor(Math.random()*M.length)]:void 0,T=(w=C==null?void 0:C.short_prompt)!=null?w:"",A=(I=(v=y.short_title)!=null?v:y.title)!=null?I:"",_=(P=C==null?void 0:C.prompt)!=null?P:Array.isArray(y.prompts)&&y.prompts.length>0?y.prompts[Math.floor(Math.random()*y.prompts.length)]:A;return{type:Z.Trending,title:o==="TITLE"?A:T,body:"",icon:s.jsx(Xt,{className:"h-full w-full"}),prompt:_,id:"chatgpt-trending-".concat(x),theme:r?$.ImageGenTrending:$.ChatGPTTrending}});return r?d(u):c(u),u},[S,n,i,o]);return{bingTrendingSuggestions:t,chatgptTrendingSuggestions:a,imageGenTrendingSuggestions:h,fetchBingTrendingSuggestions:p,fetchChatgptTrendingSuggestions:f}};function Zt(t){return t.split(" ").map(Sn).join(" ")}const mt=t=>"".concat(t.title).concat(t.body).toLocaleLowerCase();function Dr(){const t=Se(),a=be(t,"4031588851",{disableExposureLog:!0}).get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),c=qs();return!!c&&c.created*1e3>=new Date(a).getTime()}function Wr(t){const e=Se(),a=!Ue(e),c=ze(e,"1468311859"),h=ze(e,"2053937752"),d=ze(e,"3664702598"),S=ze(e,"471233253"),m=be(e,"4031588851"),l=be(e,"3533083032"),n=Dr(),i=!a&&c||a&&h,o=(!a&&d||a&&S)&&n;let p="HARDCODED";{const f=a?l:m;if(t){const r=f.get("search_autocomplete_mode","");i&&r&&(p=r)}else o&&(p=f.get("autocomplete_mode","HARDCODED"))}return p}const Hr=({clientThreadId:t,isGizmoThread:e,isNewThread:a,isProjectThread:c})=>{const h=it();return Or({clientThreadId:t,composerController:h,isGizmoThread:e,isNewThread:a,isProjectThread:c}),null},Fr="connecting";function Br(t){"use forget";const e=Ee.c(20),{clientThreadId:a,headlineOption:c,starterPromptStyle:h,currentModelId:d,overrideMessage:S}=t,m=An(),l=it();let n;e[0]!==l?(n=vt(l),e[0]=l,e[1]=n):n=e[1];const i=z(n.shouldShowAutocomplete$);let o;e[2]!==a?(o={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[2]=a,e[3]=o):o=e[3];const p=vn(o),f=m?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",r=i?"pointer-events-none opacity-0":"opacity-100";let g;e[4]!==f||e[5]!==r?(g=ee("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] w-full shrink flex-col items-center justify-center px-4 transition-opacity sm:hidden",f,r),e[4]=f,e[5]=r,e[6]=g):g=e[6];let u;e[7]!==c||e[8]!==S||e[9]!==h?(u=c==="CHATGPT_LOGO"?s.jsx(is,{className:"inline-block h-12 w-12"}):h!=="tiles"?s.jsx(Ms,{headlineOption:c,overrideMessage:S}):null,e[7]=c,e[8]=S,e[9]=h,e[10]=u):u=e[10];let y;e[11]!==a||e[12]!==d||e[13]!==p||e[14]!==h?(y=h==="chips"||!p?d&&s.jsx(mr,{currentModelId:d,clientThreadId:a}):h==="tiles"&&d&&a?s.jsx(_s,{}):null,e[11]=a,e[12]=d,e[13]=p,e[14]=h,e[15]=y):y=e[15];let x;return e[16]!==g||e[17]!==u||e[18]!==y?(x=s.jsxs("div",{className:g,children:[u,y]}),e[16]=g,e[17]=u,e[18]=y,e[19]=x):x=e[19],x}function Vr({activeSystemHintType:t,isAnonModeEnabled:e,currentModelId:a}){if(t===$e.Research)return W.deepResearchPlaceholder;const h=Xs(t);if(a==="n7jupd"||h)return W.whatCanIDo}function Gr(t){"use forget";const e=Ee.c(26),{clientThreadId:a,currentModelId:c}=t,h=Se();let d;e[0]!==h?(d=Ue(h),e[0]=h,e[1]=d):d=e[1];const S=!d;let m;e[2]!==h?(m=()=>Zs(h),e[2]=h,e[3]=m):m=e[3];const l=z(m);let n;if(e[4]!==h||e[5]!==S){const _=be(h,"4031588851"),j=be(h,"3533083032",{disableExposureLog:!0});n=(S?j:_).get("headline_option","HELP_WITH"),e[4]=h,e[5]=S,e[6]=n}else n=e[6];const i=n;let o;e[7]!==a?(o={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[7]=a,e[8]=o):o=e[8];const p=Ss(o),f=Js();let r;e:{if(f===Cn.Listening){r=Tn;break e}else if(f===Fr){r=_n;break e}r=void 0}const g=r,u=wt();let y;e[9]!==u||e[10]!==c||e[11]!==l?(y=Vr({activeSystemHintType:u,isAnonModeEnabled:l,currentModelId:c}),e[9]=u,e[10]=c,e[11]=l,e[12]=y):y=e[12];const x=y;let M;e[13]!==i||e[14]!==x||e[15]!==g?(M=s.jsx("div",{className:"mb-7 hidden text-center sm:block",children:i==="CHATGPT_LOGO"?s.jsx(is,{className:"inline-block h-12 w-12"}):s.jsx(Ms,{headlineOption:i,overrideMessage:g||x})}),e[13]=i,e[14]=x,e[15]=g,e[16]=M):M=e[16];const C=p;let T;e[17]!==a||e[18]!==c||e[19]!==i||e[20]!==x||e[21]!==C?(T=s.jsx(Br,{headlineOption:i,starterPromptStyle:C,clientThreadId:a,currentModelId:c,overrideMessage:x}),e[17]=a,e[18]=c,e[19]=i,e[20]=x,e[21]=C,e[22]=T):T=e[22];let A;return e[23]!==M||e[24]!==T?(A=s.jsxs("div",{className:"flex justify-center",children:[M,T]}),e[23]=M,e[24]=T,e[25]=A):A=e[25],A}function $r(t){"use forget";var j,w;const e=Ee.c(15),{headlineOption:a,overrideMessage:c}=t,h=function(I){const{name:P}=I;return s.jsx(na,{label:l.formatMessage(W.editNicknameTooltip),delayDuration:300,side:"top",children:s.jsx("button",{onClick:()=>{At.setAutoHighlightNicknameInput(!0),y("#settings/".concat(ls.Personalization))},style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:Ur,onMouseLeave:zr,children:P})})};let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=function(){const I=[],P=[];I.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),P.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...I);const F=P[Math.floor(Math.random()*P.length)],te=I[Math.floor(Math.random()*I.length)],B="".concat(te," | ").concat(F);Be.setCookie(Ve.headlineMessage,B)},e[0]=d):d=e[0];const S=d,m=function(){var K,Q;const I=Be.getCookie(Ve.GreetingName),P=Be.getCookie(Ve.headlineMessage),F=P==null?void 0:P.split("|"),te=(K=F==null?void 0:F[0])==null?void 0:K.trim(),B=(Q=F==null?void 0:F[1])==null?void 0:Q.trim();return{cookieName:I,isReadyForPersonalized:!!I&&I.length<=o,headline:te,namedHeadline:B}},l=et(),n=Se(),i=be(n,"1704793646"),o=i.get("name_char_limit",20),[p,f]=b.useState(m),r=In(),g=i.get("greeting_web",!1),u=i.get("full_name_llm",!1),y=_t();let x,M;e[1]!==n||e[2]!==u||e[3]!==r||e[4]!==g?(x=()=>os(()=>{if(g&&r){const v=oa(n).data,I=ra(n).data;if(v&&I){const P=ia(I,v,u);Be.setCookie(Ve.GreetingName,P),Bt.count(Vt.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}S()}else Be.deleteCookie(Ve.GreetingName),Be.deleteCookie(Ve.headlineMessage)}),M=[n,g,u,r],e[1]=n,e[2]=u,e[3]=r,e[4]=g,e[5]=x,e[6]=M):(x=e[5],M=e[6]),b.useEffect(x,M);let C;e[7]!==m||e[8]!==r||e[9]!==g?(C=()=>{const v=()=>{if(g&&r){const{cookieName:I,isReadyForPersonalized:P}=m();f(F=>Te(de({},F),{cookieName:I,isReadyForPersonalized:P}))}};return window.addEventListener("refreshGreeting",v),()=>window.removeEventListener("refreshGreeting",v)},e[7]=m,e[8]=r,e[9]=g,e[10]=C):C=e[10],b.useEffect(C);let T,A;e[11]!==r||e[12]!==g?(T=()=>{g&&r&&Bt.count(Vt.MOONSHINE,"splashScreenV2.greeting_shown_web")},A=[g,r],e[11]=r,e[12]=g,e[13]=T,e[14]=A):(T=e[13],A=e[14]),b.useEffect(T,A);let _;return c?_=l.formatMessage(c):p.isReadyForPersonalized&&g?_=s.jsx(s.Fragment,{children:s.jsx(Je,Te(de({},pt[(j=p.namedHeadline)!=null?j:a].withName),{values:{name:s.jsx(h,{name:(w=p.cookieName)!=null?w:""},"name")}}))}):g&&p.headline?_=l.formatMessage(pt[p.headline].original):_=l.formatMessage(pt[a].original),_}function zr(t){t.currentTarget.className="text-inherit"}function Ur(t){t.currentTarget.className="text-token-text-secondary"}function Ms(t){"use forget";const e=Ee.c(33),{headlineOption:a,overrideMessage:c}=t,h=Se(),d=ns(),S=ea();let m;e[0]!==S?(m={isTempChatVisible:S},e[0]=S,e[1]=m):m=e[1];const[l,n]=b.useState(m);let i,o;e[2]!==S?(i=()=>{n({isTempChatVisible:S})},o=[S],e[2]=S,e[3]=i,e[4]=o):(i=e[3],o=e[4]),ta(i,o);let p;e[5]!==h?(p=()=>aa(h),e[5]=h,e[6]=p):p=e[6];const f=z(p),{openSettings:r}=wn();let g;e[7]!==d?(g=d==null?void 0:d.isFreeWorkspace(),e[7]=d,e[8]=g):g=e[8];const u=!!g;let y;e[9]!==S||e[10]!==l.isTempChatVisible||e[11]!==u?(y=u?s.jsx("div",{className:ee("mb-4 flex items-center justify-center",l.isTempChatVisible&&"invisible"),"aria-hidden":S,children:s.jsx("div",{className:"text-token-text-tertiary text-md flex items-center gap-1.5 font-normal",children:s.jsx(Je,Te(de({},W.freeWorkspacePlanLabel),{values:{planTier:Yr}}))})}):null,e[9]=S,e[10]=l.isTempChatVisible,e[11]=u,e[12]=y):y=e[12];let x;e[13]===Symbol.for("react.memo_cache_sentinel")?(x={viewTransitionName:"var(--vt-splash-screen-headline)"},e[13]=x):x=e[13];let M;e[14]!==a||e[15]!==f||e[16]!==S||e[17]!==r||e[18]!==c||e[19]!==l.isTempChatVisible?(M=f?s.jsxs("div",{className:ee("text-page-header flex flex-col items-center gap-2",l.isTempChatVisible&&"invisible"),children:[s.jsx("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]",children:s.jsx(Je,de({},W.developerModeTitle))}),s.jsx("p",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-md text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:s.jsx(Je,Te(de({},W.developerModeSubtitle),{values:{settings:s.jsx(sa,{onClick:()=>r(ls.ConnectorsAdvanced),children:s.jsx(Je,de({},W.settingsLink))})}}))})]}):s.jsx("h1",{className:ee("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap",l.isTempChatVisible&&"invisible"),"aria-hidden":S,children:s.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:s.jsx($r,{headlineOption:a,overrideMessage:c})})}),e[14]=a,e[15]=f,e[16]=S,e[17]=r,e[18]=c,e[19]=l.isTempChatVisible,e[20]=M):M=e[20];const C=!l.isTempChatVisible&&"hidden";let T;e[21]!==C?(T=ee("bottom-0",C),e[21]=C,e[22]=T):T=e[22];const A=!S;let _;e[23]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(Mn,{}),e[23]=_):_=e[23];let j;e[24]!==T||e[25]!==A?(j=s.jsx("div",{className:T,"aria-hidden":A,children:_}),e[24]=T,e[25]=A,e[26]=j):j=e[26];let w;e[27]!==j||e[28]!==M?(w=s.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:x,children:[M,j]}),e[27]=j,e[28]=M,e[29]=w):w=e[29];let v;return e[30]!==w||e[31]!==y?(v=s.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:s.jsxs("div",{children:[y,w]})}),e[30]=w,e[31]=y,e[32]=v):v=e[32],v}function Yr(t){return s.jsx("div",{className:"text-token-text-primary border-token-border-primary rounded-lg border-1 px-2 py-1 text-sm",children:t})}const W=Vs({freeWorkspacePlanLabel:{id:"SplashScreenV2.freeWorkspacePlanLabel",defaultMessage:"Business <planTier>Free</planTier>"},developerModeTitle:{id:"SplashScreenV2.developerModeTitle",defaultMessage:"Developer mode"},developerModeSubtitle:{id:"SplashScreenV2.developerModeSubtitle",defaultMessage:"Memory is not used for this chat. {settings}"},settingsLink:{id:"SplashScreenV2.settingsLink",defaultMessage:"Settings"},whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What’s on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What’s on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"},chatgpt:{id:"SplashScreenV2.chatgpt",defaultMessage:"ChatGPT"},whatCanIDo:{id:"SplashScreenV2.whatCanIDo",defaultMessage:"What can I do for you?"}}),pt={HELP_WITH:{original:W.whatCanIHelpWith,withName:W.whatCanIHelpWithWithName},WHERE_TO_START:{original:W.whereShouldWeStart,withName:W.whereShouldWeStartWithName},ASK_CHATGPT:{original:W.askChatgptAnything,withName:W.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:W.howCanIHelp,withName:W.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:W.goodToSeeYouWithName,withName:W.goodToSeeYouWithName},DIVE_IN:{original:W.diveInWithName,withName:W.diveInWithName},READY_WHEN_YOU_ARE:{original:W.readyWhenYouAre,withName:W.readyWhenYouAre},ON_YOUR_MIND:{original:W.onYourMind,withName:W.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:W.whatAreYouWorkingOn,withName:W.whatAreYouWorkingOn},AGENDA_TODAY:{original:W.agendaToday,withName:W.agendaToday},SHOULD_WE_BEGIN:{original:W.shouldWeBegin,withName:W.shouldWeBegin},WHAT_CAN_I_DO:{original:W.whatCanIDo,withName:W.whatCanIDo}},qr=we(()=>_e(()=>import("./kw08ajijqinojrwh.js").then(t=>t.yt),__vite__mapDeps([6,1,7])),{loading:t=>Fe(t)}),As=t=>{var e,a;return(a=(e=je.getBranch(t))==null?void 0:e.findLast(({message:c})=>c.author.role===ha.Assistant&&c.recipient==="all"))==null?void 0:a.message},gt=la(t=>{const e=ca(()=>da(t)),a=e?As(e):null;return ua(new Set(a?[a.id]:[]))}),Kr=t=>{"use forget";const e=Ee.c(37),{conversation:a,zIndex:c,onClick:h,onReveal:d}=t,S=et();let m;e[0]!==a?(m=()=>gt(a),e[0]=a,e[1]=m):m=e[1];const l=z(m),[n,i]=Ye(a.id,Qr),o=ma(i);let p;e[2]!==n?(p=n&&!!pa(n),e[2]=n,e[3]=p):p=e[3];const f=p,r=n==null?void 0:n.id;let g;e[4]!==l||e[5]!==r?(g=r&&l.has(r),e[4]=l,e[5]=r,e[6]=g):g=e[6];const u=g;let y;e[7]!==a||e[8]!==r?(y=()=>{r&&gt.set(a,new Set(gt(a).add(r)))},e[7]=a,e[8]=r,e[9]=y):y=e[9];const x=ut(y);let M;e[10]!==h||e[11]!==x?(M=()=>{x(),h()},e[10]=h,e[11]=x,e[12]=M):M=e[12];const C=ut(M),T=ut(d);let A,_;e[13]!==u||e[14]!==f||e[15]!==T?(A=()=>{f&&!u&&T()},_=[f,u,T],e[13]=u,e[14]=f,e[15]=T,e[16]=A,e[17]=_):(A=e[16],_=e[17]),b.useEffect(A,_);let j,w;e[18]!==u||e[19]!==o||e[20]!==f||e[21]!==x?(j=()=>{if(f&&!u&&!o){const F=setTimeout(()=>x(),5e3);return()=>{clearTimeout(F),x()}}},w=[f,u,o,x],e[18]=u,e[19]=o,e[20]=f,e[21]=x,e[22]=j,e[23]=w):(j=e[22],w=e[23]),b.useEffect(j,w);let v,I;e[24]!==x?(v=()=>()=>x(),I=[x],e[24]=x,e[25]=v,e[26]=I):(v=e[25],I=e[26]),b.useEffect(v,I);let P;return e[27]!==a||e[28]!==C||e[29]!==u||e[30]!==S||e[31]!==o||e[32]!==f||e[33]!==n||e[34]!==x||e[35]!==c?(P=f&&!u&&s.jsx(qe,{className:"relative",style:{zIndex:c},children:s.jsxs(nt.div,{className:ee(En.main,"group bg-token-bg-primary/80 shadow-long pointer-events-auto absolute -top-2 mx-0 mb-4 h-32 w-full cursor-pointer overflow-hidden rounded-3xl px-5 py-3 backdrop-blur-2xl select-none"),initial:{opacity:0,translateY:"-50%"},animate:{opacity:1,translateY:"-100%"},exit:{opacity:0,scale:.925,filter:"blur(12px)"},transition:{duration:.6,type:"spring",bounce:.12},onClick:C,children:[s.jsx("button",{"aria-label":S.formatMessage({id:"rbCAqY",defaultMessage:"Dismiss"}),className:"dark:bg-token-bg-secondary dark:hover:bg-token-bg-tertiary text-token-text-primary absolute end-2.5 top-2.5 z-50 flex h-6 w-6 items-center justify-center rounded-full bg-black/5 opacity-0 transition-opacity group-hover:opacity-100 hover:bg-black/10",onClick:F=>{F.stopPropagation(),x()},type:"button",children:s.jsx(qr,{className:"icon icon-sm"})}),n&&s.jsx(Cr,{messages:[n],conversation:a,isFeedbackEnabled:!1,isCompletionInProgress:o,hasActiveRequest:o})]})}),e[27]=a,e[28]=C,e[29]=u,e[30]=S,e[31]=o,e[32]=f,e[33]=n,e[34]=x,e[35]=c,e[36]=P):P=e[36],P};function Qr(t){return[As(t),je.getRequestId(t)]}const Jr=t=>{"use forget";const e=Ee.c(20),{clientThreadId:a,onRequestCompletion:c}=t,h=Se();let d;e[0]!==a||e[1]!==h?(d=cs(h,a),e[0]=a,e[1]=h,e[2]=d):d=e[2];const S=d,m=Pn(a),l=kn(a);let n;e[3]!==S?(n=()=>ds(S),e[3]=S,e[4]=n):n=e[4];const i=z(n),[o]=Ye(a,Xr);let p;if(e[5]!==S||e[6]!==o||e[7]!==(i==null?void 0:i.id)||e[8]!==l||e[9]!==c){let r;e[11]!==S||e[12]!==o.length||e[13]!==(i==null?void 0:i.id)||e[14]!==l||e[15]!==c?(r=(g,u)=>{var y;return s.jsx(Tr,{isFinalTurn:u===o.length-1,turnIndex:u,conversation:S,onRequestCompletion:c,currentModelId:(y=i==null?void 0:i.id)!=null?y:null,scrollToMessageId:void 0,dateHeaderType:l(u),hideUserActions:!0,disableHorizontalPadding:!0},g)},e[11]=S,e[12]=o.length,e[13]=i==null?void 0:i.id,e[14]=l,e[15]=c,e[16]=r):r=e[16],p=o.map(r),e[5]=S,e[6]=o,e[7]=i==null?void 0:i.id,e[8]=l,e[9]=c,e[10]=p}else p=e[10];let f;return e[17]!==m||e[18]!==p?(f=s.jsx("div",{onCopy:m,className:"flex flex-col px-7 text-sm",children:p}),e[17]=m,e[18]=p,e[19]=f):f=e[19],f};function Xr(t){return[je.getConversationTurnIds(t)]}const Zr=we(()=>_e(()=>import("./glgf3sl2j4mvtn59.js"),__vite__mapDeps([8,1])),{loading:t=>Fe(t)}),ft={duration:.4,type:"spring",bounce:.1},ei=50,es=.5,St=ct["fullscreen-widget-composer-transition"],ti=ct["fullscreen-popover-thread-opening-transition"],ts=ct["fullscreen-popover-thread-closing-transition"],si=t=>{"use forget";const e=Ee.c(74),{clientThreadId:a,onRequestCompletion:c,composerController:h}=t,d=Se();let S;e[0]!==a||e[1]!==d?(S=cs(d,a),e[0]=a,e[1]=d,e[2]=S):S=e[2];const m=S,l=b.useRef(null),[n,i]=b.useState(!1),[o,p]=b.useState(!1);let f;e[3]!==d?(f=()=>jn(d).height,e[3]=d,e[4]=f):f=e[4];const r=z(f);let g;e[5]!==m?(g=()=>rt(m).height$(),e[5]=m,e[6]=g):g=e[6];const u=z(g);let y;e[7]!==m?(y=()=>rt(m).marginBottom$(),e[7]=m,e[8]=y):y=e[8];const x=z(y);let M;e[9]!==m?(M=lt(m),e[9]=m,e[10]=M):M=e[10];const C=M;let T;e[11]!==C?(T=()=>C.pinnedWidgetType$(),e[11]=C,e[12]=T):T=e[12];const A=z(T);let _;e[13]!==C?(_=()=>C.showLoadingBar$(),e[13]=C,e[14]=_):_=e[14];const j=z(_),w=r*es,v=r-ei-(x!=null?x:0),I=Gt(0),P=Gt(es);let F;e[15]!==I||e[16]!==P?(F=[P,I],e[15]=I,e[16]=P,e[17]=F):F=e[17];let te;e[18]!==v||e[19]!==w||e[20]!==r?(te=G=>{const[O,U]=G;return Math.min(Math.max(O*r-U,w),v)},e[18]=v,e[19]=w,e[20]=r,e[21]=te):te=e[21];const B=$t(F,te);let K;e[22]!==C.showLoadingBar$?(K=()=>ga(fa,{requestCompletion:()=>{Ge({forceFlushSync:!0,className:[St,ts],update:()=>{i(!1),C.showLoadingBar$.set(!0)}})},completionFinished:()=>{Ge({forceFlushSync:!0,className:St,update:()=>{C.showLoadingBar$.set(!1)}})}}),e[22]=C.showLoadingBar$,e[23]=K):K=e[23];let Q;e[24]!==C?(Q=[C],e[24]=C,e[25]=Q):Q=e[25],b.useEffect(K,Q);let k;e[26]!==h?(k=()=>{Ge({forceFlushSync:!0,className:ti,update:()=>i(!0)});try{at(h).focus()}catch(G){requestAnimationFrame(()=>{var O;(O=l.current)==null||O.focus()})}},e[26]=h,e[27]=k):k=e[27];const X=k;let he;e[28]!==h||e[29]!==n?(he=()=>!n&&(Sa()&&rs(h)||ya(h)),e[28]=h,e[29]=n,e[30]=he):he=e[30];const ye=z(he);let me;e[31]!==v||e[32]!==w?(me=[w,v],e[31]=v,e[32]=w,e[33]=me):me=e[33];let J;e[34]===Symbol.for("react.memo_cache_sentinel")?(J=[0,1],e[34]=J):J=e[34];const L=$t(B,me,J);let se;e[35]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(On,{},"blur"),e[35]=se):se=e[35];let ge;e[36]!==a||e[37]!==x||e[38]!==X||e[39]!==A||e[40]!==j?(ge=j&&s.jsx(Ln,{clientThreadId:a,bottom:x!=null?x:0,onClick:X,pinnedWidgetType:A},"loading-bar"),e[36]=a,e[37]=x,e[38]=X,e[39]=A,e[40]=j,e[41]=ge):ge=e[41];let ae;e[42]!==L||e[43]!==n?(ae=n&&s.jsx(nt.div,{initial:{opacity:0},animate:{opacity:L.get()},style:{opacity:L},exit:{opacity:0},className:"bg-token-bg-primary/50 pointer-events-auto fixed inset-0 top-(--header-height) opacity-0 backdrop-blur-xs",onClick:()=>{Ge({forceFlushSync:!0,className:ts,update:()=>{p(!0),i(!1)}}).finished.then(()=>{p(!1)})}},"drag-overlay"),e[42]=L,e[43]=n,e[44]=ae):ae=e[44];let Y;e[45]!==m||e[46]!==X||e[47]!==n||e[48]!==C.showLoadingBar$?(Y=!n&&s.jsx(Kr,{zIndex:1,conversation:m,onClick:X,onReveal:()=>{Ge({forceFlushSync:!0,className:St,update:()=>{C.showLoadingBar$.set(!1)}})}},"last-message-banner"),e[45]=m,e[46]=X,e[47]=n,e[48]=C.showLoadingBar$,e[49]=Y):Y=e[49];let ne;e[50]!==ae||e[51]!==Y?(ne=s.jsxs(xa,{children:[ae,Y]}),e[50]=ae,e[51]=Y,e[52]=ne):ne=e[52];let re;e[53]!==X||e[54]!==n||e[55]!==ye?(re=!n&&s.jsx(qe,{className:ee("pointer-events-auto absolute start-0 end-0 top-0 z-[100] flex -translate-y-full justify-center pb-2 opacity-0 transition-opacity hover:opacity-100",ye&&"opacity-100"),children:s.jsx("button",{onClick:X,className:"text-token-text-secondary border-token-border-default bg-token-bg-primary/50 relative z-30 flex h-6 w-6 cursor-pointer items-center justify-center rounded-full border bg-clip-padding backdrop-blur-md after:absolute after:-inset-2 after:content-['']",children:s.jsx(Zr,{className:"icon-sm text-token-text-primary"})})},"open-button"),e[53]=X,e[54]=n,e[55]=ye,e[56]=re):re=e[56];let ue;e[57]!==B||e[58]!==a||e[59]!==u||e[60]!==I||e[61]!==o||e[62]!==n||e[63]!==v||e[64]!==w||e[65]!==c||e[66]!==P||e[67]!==r?(ue=(n||o)&&s.jsx("div",{tabIndex:-1,ref:l,className:ee(o?"invisible":"[view-transition-name:fullscreen-popover-thread]","pointer-events-none absolute inset-x-0 bottom-0 mx-auto flex items-center justify-center rounded-3xl focus:ring-0 focus:outline-hidden focus-visible:ring-0 focus-visible:outline-hidden md:bottom-6"),role:"dialog","aria-modal":"true",onClick:oi,children:s.jsx(qe,{children:s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx(ai,{onDoubleClick:()=>{ht(P,(B.get()===v?w:v)/r,ft)},onDragStart:()=>I.set(0),onDragEnd:G=>{const{velocity:O}=G,{y:U}=O,pe=ni(-U,w,v,B.get());ht(P,(pe===v?v:w)/r,ft),ht(I,0,ft)},onDrag:G=>{const{delta:O}=G,{y:U}=O;return I.set(I.get()+U)}}),s.jsx("div",{className:"bg-token-bg-primary shadow-long pointer-events-auto mx-0 flex overflow-hidden rounded-t-3xl backdrop-blur-2xl md:-mx-2! md:rounded-[34px]",children:s.jsx(nt.div,{className:"relative flex w-full flex-col-reverse overflow-y-auto",style:{height:B,paddingBottom:u!=null?u:0,WebkitMaskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)",maskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)"},children:s.jsx(Nn,{children:s.jsx(Jr,{onRequestCompletion:c,clientThreadId:a})})})})]})})},"popover-thread"),e[57]=B,e[58]=a,e[59]=u,e[60]=I,e[61]=o,e[62]=n,e[63]=v,e[64]=w,e[65]=c,e[66]=P,e[67]=r,e[68]=ue):ue=e[68];let R;return e[69]!==ge||e[70]!==ne||e[71]!==re||e[72]!==ue?(R=s.jsxs(s.Fragment,{children:[se,ge,ne,re,ue]}),e[69]=ge,e[70]=ne,e[71]=re,e[72]=ue,e[73]=R):R=e[73],R},ai=t=>{"use forget";const e=Ee.c(17),{onDrag:a,onDragEnd:c,onDoubleClick:h,onDragStart:d,onPointerUp:S}=t;let m,l,n,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={opacity:1},l={opacity:1},n={type:"tween",duration:.1},i={x:0,y:0,transform:"translateY(0px)"},e[0]=m,e[1]=l,e[2]=n,e[3]=i):(m=e[0],l=e[1],n=e[2],i=e[3]);let o;e[4]!==d?(o=()=>{d==null||d()},e[4]=d,e[5]=o):o=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p={left:0,right:0,top:0,bottom:0},e[6]=p):p=e[6];let f;e[7]!==a?(f=(u,y)=>{a==null||a(y)},e[7]=a,e[8]=f):f=e[8];let r;e[9]!==c?(r=(u,y)=>c==null?void 0:c(y),e[9]=c,e[10]=r):r=e[10];let g;return e[11]!==h||e[12]!==S||e[13]!==o||e[14]!==f||e[15]!==r?(g=s.jsx(nt.div,{drag:"y",tabIndex:-1,className:"bg-token-border-default pointer-events-auto absolute start-10 end-10 top-0 z-10 h-[4px] cursor-ns-resize rounded-b-full opacity-0 after:absolute after:inset-0 after:top-[-18px] after:h-[28px] after:bg-transparent after:content-['']",whileHover:m,whileDrag:l,transition:n,style:i,onPointerDown:o,dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:p,onDrag:f,onPointerUp:S,onDragEnd:r,onDoubleClick:h}),e[11]=h,e[12]=S,e[13]=o,e[14]=f,e[15]=r,e[16]=g):g=e[16],g};function ni(t,e,a,c){if(!(e<=a))throw new Error("min must be <= max");const h=.25,d=8,S=24,m=1200,l=Math.abs(c-e)<=Math.abs(c-a)?e:a,n=c+t*h,i=Math.abs(n-e)<=Math.abs(n-a)?e:a;if(i===l)return l;const o=(l+i)/2,p=Math.sign(i-l)||1,f=o+p*d;if(!(p>0?n>=f:n<=f))return l;const g=Math.abs(t),u=Math.min(g/m,1),y=S*(1-u*u);return Math.abs(n-l)-Math.abs(n-i)<y?l:i}function oi(t){return t.stopPropagation()}const ri=we(()=>_e(()=>import("./jrdfnldycz1vs00j.js"),__vite__mapDeps([9,1,6,7,10,11])).then(t=>t.AgentConnectorsSafetyModal)),ii=({conversation:t,isNewThread:e,isGizmoThread:a,isProjectThread:c,currentModelId:h,onRequestCompletion:d,shouldUseUnifiedComposer:S,onlyAllowImageUploads:m,isWidgetFullScreen:l=!1,layoutMode:n})=>{const i=Se(),{height$:o}=rt(t),p=zt(ot),f=it(),{pageType:r}=Rn(),g=(r==null?void 0:r.type)==="landing-page",u=ba(r==null?void 0:r.type),y=ys(t.id).isOdysseyMode,x=us(i),M=Mt(),C=Ca(),T=et(),A=xt(i);Dn(f);const _=zt(ot),j=Ta(i),w=z(Ut.sidebarUrlTrayOpen$),v=z(Ut.context$),I=wt(),P=_&&j&&w,F=xs(),te=be(i,"1925940714"),{platformConnectors:B}=_a(),K=Wn(Kt.hasSeenOdysseyConnectorsModal),Q=Ye(t.id,R=>je.getConversationTurns(R).some(G=>G.messages.some(O=>{var U;return(U=O.metadata)==null?void 0:U.n7jupd_message}))),k=bs(),X=hs(),he=z(()=>lt(t).showLoadingBar$()),ye=(k||X)&&Q||l&&he;Hn(async()=>{if(!P)return;const R=I?[I]:[];if(R.includes($e.Agent))return;const G=typeof performance<"u"?performance.now():Date.now();try{const O=await Oa(v,Xn,R,t.id),U=Math.round((typeof performance<"u"?performance.now():Date.now())-G);return O!=null?Xe.logEventWithStatsig("kaur1br5: Sidebar context collected","chatgpt_sidebar_context_collected",{duration_ms:U,count:Array.isArray(O)?O.length:1}):Xe.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",{duration_ms:U,failure_reason:"null"}),O}catch(O){const U=Math.round((typeof performance<"u"?performance.now():Date.now())-G),pe=O instanceof La;Xe.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",de({duration_ms:U,failure_reason:pe?"timeout":"error"},O&&typeof O=="object"&&"message"in O?{error_message:String(O.message)}:O?{error_message:String(O)}:{}));return}},()=>P||!te.get("completion_request_blocking_promise_optimization",!1));const me=ms(),J=async R=>{var ie,oe,Oe,Ae,le,Ce,Le,xe;if(((ie=Ia(t.id))==null?void 0:ie.isLoading)!==!1)return;const G=await zn(R),O=L((Oe=(oe=G.promptMessage.metadata)==null?void 0:oe.attachments)!=null?Oe:[]);if(me&&O){const{promptMessage:ce,parentMessageId:fe}=G;return Un.debug("Relaying message to voice participant"),Yn({type:"RELAY",message:ce,parentMessageId:fe})}const U=(le=(Ae=G.completionMetadata)==null?void 0:Ae.systemHints)==null?void 0:le.includes(bt),pe=Array.from((Ce=R.selectedSources)!=null?Ce:[]).filter(ce=>ce!=="web")[0];if(U&&pe&&K.eligible){const ce=(Le=Ea[pe])!=null?Le:pe,fe=B.get(ce);if(fe){ps(i,ri,{connector:fe,onConfirm:()=>{qn(i,Kt.hasSeenOdysseyConnectorsModal),d(G)},onTurnOffConnectors:()=>{Pa(t.id,E=>{var H,D;(H=E.selectedSources)!=null||(E.selectedSources=new Map),E.selectedSources.set(I,new Set(["web"])),(D=E.selectedMCPSources)!=null||(E.selectedMCPSources=new Map),E.selectedMCPSources.set(I,new Set),E.mentionedSources=new Set,ka({selectedSourcesMap:E.selectedSources,selectedMCPSourcesMap:E.selectedMCPSources,scope:{userId:A==null?void 0:A.authUserId,workspaceId:A==null?void 0:A.id}})})}});return}}if(_){const ce=!!v,fe=w===!0;j&&(!ce||!fe)&&Na.error("Missing context chip on message send",{clientThreadId:t.id,hasSidebarContext:ce,isContextChipOpen:fe,contextEnabled:j,isBridgedDesktopSidebar:_,shouldCollectSidebarContext:P}),(xe=ja())==null||xe.triggerProductEvent("messageSent")}O&&d(G)},L=b.useCallback(R=>{let G=Ma;const O=R.reduce((pe,ie)=>{var oe;return pe+((oe=ie.size)!=null?oe:0)},0);y&&(G=wa(i,"1504865540").get("max_file_size_mb",25));const U=O<=G*1024*1024;return U||C.danger(T.formatMessage({id:"odyssey.fileTooLarge",defaultMessage:"The attached files are too large. The maximum size is {maxFileSizeMB}MB."},{maxFileSizeMB:G})),U},[i,T,y,C]),se=b.useCallback(R=>{Xe.logEvent("Continue Completion"),d(Fn(R))},[d]),ge=Bn.useState(R=>R.isReplayEnabled),ae=Aa({clientThreadId:t.id}),Y=va({clientThreadId:t.id});if(ae)return s.jsx(Vn,{safetyLimited:Y});const ne=e&&!a,re=s.jsxs(s.Fragment,{children:[s.jsx(Gn,{clientThreadId:t.id}),s.jsxs(Ct,{ref:Cs({axis:"height",onChange:({height:R})=>o.set(R)}),verticalMargin:"none",verticalPadding:x?"last-standard":"none",horizontalPadding:_?"none":"standard",children:[l&&s.jsx(si,{clientThreadId:t.id,composerController:f,onRequestCompletion:d}),s.jsx(qe,{className:ee(p&&"w-full max-w-full"),children:ge?s.jsx($n,{clientThreadId:t.id},t.id):ye?s.jsx("div",{className:"pointer-events-none h-14"}):s.jsx(pr,{conversation:t,currentModelId:h,isNewThread:e,isProjectThread:c,hideHeader:ne,onRequestCompletion:J,onContinueGenerating:se,onlyAllowImageUploads:m,layoutMode:n})})]})]}),ue=ne&&s.jsx("div",{className:ee("[display:var(--display-hidden-until-loaded,block)] md:absolute md:start-0 md:bottom-8 md:w-full"),children:s.jsx(Ct,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsx(qe,{className:ee(p&&"w-full max-w-full"),children:s.jsx(gr,{className:"block flex-1"})})})});return S?s.jsxs(s.Fragment,{children:[!M&&ue,s.jsx("div",{id:"thread-bottom",children:re}),M&&ue,e&&!g&&!a&&!u&&!y&&!F&&!c&&s.jsx(li,{clientThreadId:t.id,currentModelId:h})]}):re},li=t=>{"use forget";const e=Ee.c(32),{clientThreadId:a,currentModelId:c}=t,h=it();let d;e[0]!==h?(d=vt(h),e[0]=h,e[1]=d):d=e[1];const S=z(d.shouldShowAutocomplete$),m=Ts();let l;e[2]!==a?(l={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[2]=a,e[3]=l):l=e[3];const n=Ss(l),i=fr();let o;e[4]!==a?(o={clientThreadId:a,canShowBanner:!0},e[4]=a,e[5]=o):o=e[5];const{shouldShow:p}=Sr(o),f=Se();let r;e[6]!==f?(r=()=>{if(gs(f)||!Zn(f))return;const{data:w}=eo(f);if(w&&!to(w.id)(f))return w},e[6]=f,e[7]=r):r=e[7];const g=z(r),u=_t(),y=S&&"hidden";let x;e[8]!==y?(x=ee(y),e[8]=y,e[9]=x):x=e[9];let M;e[10]!==a||e[11]!==m||e[12]!==u||e[13]!==g?(M=!m&&s.jsxs(s.Fragment,{children:[s.jsx(Kn,{clientThreadId:a}),g&&s.jsx(Qn,{pulseId:g.id,caption:g.caption,previewImages:g.preview_items.map(ci),onClick:()=>u("/pulse")})]}),e[10]=a,e[11]=m,e[12]=u,e[13]=g,e[14]=M):M=e[14];let C;e[15]!==i||e[16]!==a||e[17]!==c||e[18]!==n?(C=n==="tiles"||n==="hscroll"?c&&a?s.jsx(_s,{className:"mt-10 max-sm:hidden",layout:"carousel"}):null:n==="image_gen_banner"&&i?s.jsx("div",{className:"mt-16 flex justify-center max-sm:hidden",children:s.jsx(yr,{})}):n==="chips"?c&&s.jsx(xr,{clientThreadId:a,currentModelId:c}):null,e[15]=i,e[16]=a,e[17]=c,e[18]=n,e[19]=C):C=e[19];let T;e[20]!==p?(T=p&&s.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:s.jsx(br,{})}),e[20]=p,e[21]=T):T=e[21];let A;e[22]!==M||e[23]!==C||e[24]!==T?(A=s.jsx(Ct,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsxs(qe,{children:[M,C,T]})}),e[22]=M,e[23]=C,e[24]=T,e[25]=A):A=e[25];let _;e[26]!==m?(_=m&&s.jsxs("div",{className:"thread-sm:flex mt-5 hidden flex-col gap-2",children:[s.jsx(so,{}),s.jsx(ao,{}),s.jsx(no,{})]}),e[26]=m,e[27]=_):_=e[27];let j;return e[28]!==A||e[29]!==_||e[30]!==x?(j=s.jsxs("div",{className:x,children:[A,_]}),e[28]=A,e[29]=_,e[30]=x,e[31]=j):j=e[31],j};function ci(t){return Jn(t.image_url)}const di=we(()=>_e(()=>import("./crl8f3ggvylz4ls6.js"),__vite__mapDeps([12,1,6,7,10,11])).then(t=>t.ThreadReportConversationModal)),ui=we(()=>_e(()=>import("./kji8i56w8xht8ehj.js"),__vite__mapDeps([13,1,6,7,14,15,10,11]))),hi=we(()=>_e(()=>import("./gws9mu49pdgn2ocx.js"),__vite__mapDeps([16,1,6,7,10,11,17,18,19,20])).then(t=>t.TableOfContentsSidebar));function mi({conversation:t,isNewScrollEnabled:e,pageLoadSearchQuery:a,footerRootContainerElementRef:c,threadRootRef:h,scrollContainerRef:d,isModalView:S=!1,children:m}){const l=Se(),[n]=ss(),i=!!n.get("message"),[o,p]=z(()=>[ot(l),an(l)]),f=Ye(t.id,u=>(u==null?void 0:u.conversationOrigin)===nn.APPLE),r=z(()=>lt(t).pinnedWidgetHeight$());if(e)return s.jsx(rr,{allowScrollToEnd:!o,allowScrollToTop:!o&&f,clientThreadId:t.id,initScrolledToEnd:a==null&&!i,threadFooterRef:c,threadRootRef:h,children:m});const g=s.jsx("div",{className:"relative h-full",style:{"--pip-widget-height":r?"".concat(r,"px"):"0px"},children:s.jsxs("div",{className:ee("flex h-full flex-col overflow-y-auto",!p&&!S&&(r?"pt-(--pip-widget-height)":"thread-xl:pt-(--header-height)"),p||o?"thread-sm:[scrollbar-gutter:stable_both-edges] [scrollbar-gutter:stable]":"[scrollbar-gutter:stable_both-edges]",S&&"thread-md:pt-4"),ref:d,children:[s.jsx("div",{className:"relative",children:s.jsx(sn,{className:"absolute start-0 top-0",setIsScrolledToEdge:u=>{At.setIsConversationScrolledFromTop(u)},options:{root:d==null?void 0:d.current}})}),m]})});return a!=null?g:s.jsx(fs,{children:s.jsxs(b.Suspense,{fallback:null,children:[s.jsx(ir,{}),g]})})}const pi=function({conversation:t,withCustomCompletionParams:e,hideDisclaimer:a,hideHeader:c,renderEmptyState:h,renderEmptyFooter:d,isModalView:S=!1}){"use no forget";var Lt;const m=et(),l=Ra(),n=Se(),i=oo(n),o=Ts(),p=xs(),f=ro(n),r=Mt(),g=Da(),u=io(t.id),[y,x,M,C,T]=Ye(t.id,V=>[V==null?void 0:V.isLoading,je.hasUserMessage(V),je.getConversationTurns(V).length,je.isArchived(V),V?je.getGizmoId(V):g]),A=Wa(t.id),_=b.use(Mr),j=z(()=>Jt(n)&&lr(n).isFeedbackModalOpen$());b.useEffect(()=>lo(n,t.id),[n,t.id]);const[w]=b.useState(_==null?void 0:_.query),[v,I]=b.useState(_==null?void 0:_.navlink);b.useEffect(()=>{y||(Yt(t.id)?qt.addTiming("chatgpt.web.chatPage.renderNewConversation"):qt.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t.id,y]);const{setTargetedContent:P}=co(),F=l==null?void 0:l.includes(Ha),te=M>=2,B=Fa(n),[K,Q]=z(()=>[ot(n),on(n)]),k=bs(),{hash:X}=Gs(),he=_t(),ye=hs(),{isOpen:me}=uo();b.useEffect(()=>{X==="#report"&&(ps(n,di,Te(de({clientThreadId:t.id},k&&(t!=null&&t.sharedConversationId)?{serverThreadId:t.sharedConversationId,isSharedConversation:!0}:{}),{isStaticSharedThread:!1})),he({hash:""},{replace:!0}))},[t,n,X,k,he]);const J=!!T,L=Yt(t.id)&&!te&&(Qt(u)||(u==null?void 0:u.kind)===Ba.GizmoTest)&&!k&&!ye&&_==null&&(!B||J),se=L&&!x&&_==null&&(!B||J||p),ge=K&&!x&&!J,ae=z(()=>ds(t)),Y=ae.id,ne=Va.useStore(),re=z(()=>rn(n)),ue=(Lt=xt(n))==null?void 0:Lt.isWorkspaceAccount();b.useEffect(()=>{if(Y===Ga)return ne.setActiveSystemHint(bt,re,{locked:!0,analyticsMetadata:{clientThreadId:t.id}}),()=>{ne.setActiveSystemHint(null,re,{locked:!1,ifPrevSystemHint:bt,analyticsMetadata:{clientThreadId:t.id}},ue)}},[Y,ne,t.id,re,ue]);const R=ho(t.id,u),G=mo();b.useEffect(()=>{G||P(void 0)},[t.id,P,G]),b.useEffect(()=>{At.setIsConversationScrolledFromTop(!1)},[t.id]),b.useEffect(()=>{const V=new URLSearchParams(window.location.search),Ie=V.get("src");if(Ie==="history_search"){V.delete("src");const He=V.toString(),tt="".concat(window.location.pathname).concat(He?"?".concat(He):"").concat(window.location.hash);window.history.replaceState({},document.title,tt)}A&&Ie==="history_search"&&Ze.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:A}},requestBody:{touch:!0},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{const He=$a(n);za(He,T)})},[n,A,T]);const O=b.useCallback(V=>{var He,tt;const Ie=de({conversation:t},e?e(V):V);if((tt=(He=Ie.completionMetadata)==null?void 0:He.systemHints)!=null&&tt.some(st=>Ua(st))&&gs(n)){const st=Ya(n);st&&(Ie.requestedModelId=st)}po(Ie)},[n,t,e]),U=go(n),pe=qa(),ie=b.useRef(null);ie.current=V=>{L&&!pe&&!B&&Ka(n,"3253785454").get("should_animate_composer",!1)?Ge({className:ct["composer-slide"],update:()=>O(V)}):O(V)};const oe=b.useCallback(V=>{var Ie;return(Ie=ie.current)==null?void 0:Ie.call(ie,V)},[ie]);b.useEffect(()=>{U.signalTransitionReady()},[U,t.id]),fo(t.id,oe),So(),yo(t.id),xo(oe),b.useEffect(()=>Qa(()=>Jt(n),()=>{cr(n).logEventWithStatsig("Web: FYP: Eligible Feed User","chatgpt_web_fyp_dau_with_fyp_available")}),[n]),bo(L);const Oe=Co({clientThreadId:t.id,handleRequestCompletion:oe,prefetchSearchThreadIdPromise:_==null?void 0:_.threadId})&&w==null,Ae=b.useRef(null);b.useEffect(()=>{!ye&&!o&&(document.title=R!=null?R:"ChatGPT")},[R,ye,o,m]);const le=Ja(n,T),Ce=se&&!h&&le,Le=us(n),xe=xt(n),ce=Ye(t.id,V=>V==null?void 0:V.sharedProjectConversationOwner),fe=le&&(ce==null?void 0:ce.id)!=null&&ce.id!==(xe==null?void 0:xe.normalizedAccountUserId),E=xe&&!xe.isSelfServeBusiness()&&!xe.isEnterprisey(),H=!a&&!Le&&!K&&!Ce&&!(B&&!r)&&!(L&&E)&&Qt(u),D=ys(t.id).isOdysseyMode,N=b.useRef(null),q=b.useRef(null),Me=To(V=>V.composerHeight),Re=!L&&!me&&!K,Pe=_o()&&!se&&!Xa(n),ve=!le,ke=L,De=b.useCallback(()=>I(void 0),[]),{isSingleLine:Ne}=z(()=>ln(n)),We=ms(),It=!Za(),Ke=z(()=>lt(t).displayMode$()==="fullscreen"),vs=L&&!J&&!p&&!It?"center":"bottom",{shouldShow:Et,isLoading:Pt}=wo({skip:!L||p}),{shouldShow:kt,isLoading:Nt}=Mo({skip:!L||p}),jt=kt&&!Nt,Is=!jt&&Et&&!Pt,[Es]=b.useState(Ao(n)),dt=vo(n)&&Ue(n)&&!Io()&&!Es&&L&&!p&&!Ke&&!me&&!It&&!J&&!B&&!en()&&!Pt&&!Et&&!Nt&&!kt&&!D,{auraAnnouncementBannerState$:Ps,setAuraAnnouncementBannerState:Ot}=Eo(n),ks=z(()=>Ps());b.useEffect(()=>{dt||Ot("not-shown")},[dt,Ot]);const Ns=Po();function js(){return s.jsx(hi,{clientThreadId:t.id,scrollContainerRef:Ae})}function Os(){return y||Oe?null:se?Ce?s.jsx(Xo,{clientThreadId:t.id,gizmoId:T,currentModelId:Y,onRequestCompletion:oe}):h!=null?h:s.jsx(s.Fragment,{children:J?s.jsx(Zo,{conversation:t,gizmoId:T,onRequestCompletion:oe,currentModelId:Y}):s.jsx(Gr,{clientThreadId:t.id,currentModelId:Y})}):te||w!=null||j?s.jsx(mi,{conversation:t,isNewScrollEnabled:f,pageLoadSearchQuery:w,footerRootContainerElementRef:q,threadRootRef:N,scrollContainerRef:Ae,isModalView:S,children:s.jsx(_r,{onRequestCompletion:oe,conversation:t,scrollContainerRef:Ae,pageLoadSearchQuery:w,prefetchNavlink:v,clearPrefetchNavlink:De},t.id)}):null}return s.jsx(ko.Provider,{value:v?"user-query-with-navlink":w?"user-query":null,children:s.jsx(No,{serverThreadId:A,children:s.jsx(jo,{clientThreadId:t.id,children:s.jsxs(tn,{conversation:t,children:[s.jsx(fi,{conversation:t}),F&&s.jsx(ui,{}),!ye&&!o&&s.jsx(Oo,{children:R!=null&&s.jsx("title",{children:R})}),s.jsx(Lo.Provider,{value:oe,children:s.jsxs(Ro,{children:[s.jsx(Do,{conversation:t}),s.jsx("div",{id:"thread",ref:N,className:ee("group/thread @container/thread h-full w-full",f&&Yo.threadRoot,Q&&"opacity-0"),inert:Q,children:s.jsxs(dr,{noKeyboard:!0,clientThreadId:t.id,currentModelConfig:ae,className:ee("composer-parent flex flex-col focus-visible:outline-0",!le&&"overflow-hidden",Ce?"min-h-full":"h-full"),children:[!c&&s.jsx(wr,{transparentBackground:L&&!Ce,conversation:t,isEmptyState:se}),ze(n,"1909635392")&&s.jsx(Wo,{clientThreadId:t.id}),s.jsxs("div",{className:ee("relative basis-auto flex-col",Re&&"-mb-(--composer-overlap-px)",Re&&(Ne?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),le||J||!L||p?"grow":"shrink",Ce?"grid":"flex",(!L||p)&&"overflow-hidden",L&&o&&!p&&"sm:min-h-[21svh]!",L&&!p&&!le&&!J&&"flex-col justify-end max-sm:grow max-sm:justify-center sm:min-h-[42svh]",i),style:{"--composer-height":Me?"".concat(Me,"px"):void 0},children:[Ns&&js(),Os(),B&&ge&&s.jsx(Ho,{}),Pe&&s.jsx(Fo,{})]}),s.jsxs("div",{id:"thread-bottom-container",className:ee("group/thread-bottom-container relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent print:hidden",Ke&&"pointer-events-none",!L&&!Ke&&"content-fade",Ne&&"single-line",fe&&"[--content-fade-height:110px]",fe&&"[--content-fade-top:-110px]",L&&"min-h-0",se&&d&&"grow",!H&&!K&&!D&&"mb-4",J||le||!L?"":ve&&L&&!p&&"sm:grow",ve&&"flex flex-col",Ke&&"z-60",i),ref:q,children:[C?s.jsx(Bo,{clientThreadId:t.id}):s.jsxs(s.Fragment,{children:[(!L||ve)&&!me&&s.jsxs(s.Fragment,{children:[s.jsx(ii,{isGizmoThread:J,isProjectThread:le,conversation:t,isNewThread:L,currentModelId:Y,onRequestCompletion:oe,shouldUseUnifiedComposer:ve,layoutMode:vs,isWidgetFullScreen:Ke,onlyAllowImageUploads:We}),r&&L&&ze(n,"537200474")&&s.jsx(Vo,{clientThreadId:t.id})]}),ke&&s.jsx(Hr,{clientThreadId:t.id,isGizmoThread:J,isNewThread:L,isProjectThread:le})]}),H?s.jsx("div",{ref:Cs({axis:"height",onChange:({height:V})=>rt(t).marginBottom$.set(V)}),className:ee("text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs [view-transition-name:var(--vt-disclaimer)] md:px-[60px]",ks!=="not-shown"&&"opacity-0"),children:s.jsx(Go,{clientThreadId:t.id})}):null,se&&d]}),jt&&s.jsx($o,{}),Is&&s.jsx(zo,{clientThreadId:t.id}),s.jsx(fs,{children:dt&&s.jsx(Uo,{shouldShowDisclaimer:H,clientThreadId:t.id})})]})}),s.jsx(qo,{}),s.jsx(Ko,{conversationId:t.id}),s.jsx(Qo,{}),s.jsx(Jo,{})]})})]})})})})},vi=as.memo(pi);function gi({conversation:t}){return er(t),tr(),sr(),ar(t),nr(),or(t),null}const fi=as.memo(gi);export{vi as M};
//# sourceMappingURL=k68z30a1j9zr4phk.js.map
