const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/hn0hl0c8spo9mfdq.js","assets/kfrdmkli83ureki3.js","assets/fyw02vlaiv2vq6cj.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css","assets/kyyxlt80a527gl6x.js"])))=>i.map(i=>d[i]);
var G=Object.defineProperty,K=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var L=(t,s,a)=>s in t?G(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,d=(t,s)=>{for(var a in s||(s={}))W.call(s,a)&&L(t,a,s[a]);if(A)for(var a of A(s))X.call(s,a)&&L(t,a,s[a]);return t},k=(t,s)=>K(t,V(s));import{R as B,h as Q,b as Z,r as i,e as $,j as e,M as g,_ as E}from"./kfrdmkli83ureki3.js";import{u as J,dT as Y,p as ee,D as te,aC as se,db as F,dN as ae,dR as ne,az as P,aB as U,cy as oe,aA as T,R as re}from"./kw08ajijqinojrwh.js";import{bZ as ie,aB as ce,aC as le,aE as ue,b_ as de,b0 as me,b$ as O}from"./fyw02vlaiv2vq6cj.js";const pe=P(()=>E(()=>import("./hn0hl0c8spo9mfdq.js"),__vite__mapDeps([0,1])),{loading:t=>T(t)}),ge=P(()=>E(()=>import("./fyw02vlaiv2vq6cj.js").then(t=>t.zy),__vite__mapDeps([2,1,3,4,5])),{loading:t=>T(t)}),he=P(()=>E(()=>import("./kyyxlt80a527gl6x.js"),__vite__mapDeps([6,1])),{loading:t=>T(t)}),Ce="https://help.openai.com/en/articles/11481834",Me=({onClose:t})=>{var w;const[h,M]=B.useState(2500),[c,l]=B.useState(!1),{prepareCheckoutSession:p,navigateToCheckout:C}=ie(),y=J(),o=Y(),{country:x}=ce(),b=le({country:x,currentAccount:o,location:"CreditPurchaseModal",shouldUsePaidSubscriptionBillingCurrency:!0}),n=(w=o==null?void 0:o.mustGetSubscriptionBillingCurrency("CreditPurchaseModal"))!=null?w:"USD",{data:u,isLoading:_,error:I}=ue({ctx:y,currency:n});let f=null;!_&&!I&&u&&(f=u.currencyConfig.amount_per_credit);const N=ee(),S=Q(),{data:D}=Z({queryKey:["creditPurchaseRateCard"],queryFn:()=>re.safeGet("/subscriptions/credit-purchase-rate-card"),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),q=i.useCallback(async()=>{if(!c){l(!0);try{const r=o==null?void 0:o.id;if(!r)throw new Error("No account_id found");const H=await p({credit_purchase_data:{quantity:h,unit:"credit",account_id:r},billing_details:b});await C(H)}catch(r){te.addError(r),N.warning(S.formatMessage(m.paymentErrorWarning),{hasCloseButton:!0})}finally{l(!1)}}},[b,S,c,C,h,p,N,o]),z=de(h,300),j=r=>!D||!D[r].price?"N/A":Math.round(z/parseFloat(D[r].price)).toLocaleString();if(b)return e.jsxs(se,{isOpen:!0,onClose:t,type:"success",size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[e.jsx(F.Header,{title:e.jsx(g,d({},m.title))}),e.jsxs("div",{className:"flex flex-col px-6",children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(g,k(d({},m.description),{values:{link:r=>e.jsx(ae,{href:Ce,target:"_blank",children:r})}}))}),f&&e.jsx("div",{className:"mt-6",children:e.jsx(xe,{minCredits:500,maxCredits:1e5,increment:250,amountPerCredit:f,currency:n,numCredits:h,setNumCredits:M})}),D&&e.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-token-bg-tertiary text-token-text-secondary mt-4 flex w-full gap-2 rounded-lg p-3 text-sm",children:[e.jsx(pe,{}),e.jsx(g,k(d({},m.amountToAddDescription),{values:{deepResearchCount:j("deep_research_completion"),gpt5proChatCount:j("chat_completion_5_pro"),imagegenCount:j("chat_tool_imagegen")}}))]})]}),e.jsx(F.Actions,{className:"sm:p-2 md:p-6",secondaryButton:e.jsx(U,{disabled:c,onClick:t,color:"secondary",children:e.jsx(g,d({},m.cancel))}),primaryButton:e.jsx(U,{loading:c,onClick:()=>q(),color:"primary",children:e.jsx(g,d({},m.next))})})]})};function xe({numCredits:t,minCredits:s,maxCredits:a,increment:R,amountPerCredit:v,currency:h,setNumCredits:M}){const c=i.useRef(null);i.useEffect(()=>{var n;(n=c.current)==null||n.focus()},[c]);const l=i.useRef(null),p=i.useRef(0),C=i.useCallback(n=>{M(u=>me(u+n,s,a))},[a,s,M]),y=i.useCallback(n=>{const f=300-n*50;return f>25?f:25},[]),o=i.useCallback(n=>{C(n),p.current=0;const u=()=>{p.current+=1,C(n);const _=y(p.current);l.current=setTimeout(u,_)};l.current=setTimeout(u,y(p.current))},[C,y]),x=i.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),b=Math.round(t*v*100)/100;return e.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[e.jsx("label",{className:"mb-1 flex text-base font-medium",htmlFor:"Credits",children:e.jsx(g,d({},m.amountToAdd))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("span",{className:"text-token-text-secondary pointer-events-none absolute end-3 top-1/2 -translate-y-1/2 text-sm",children:e.jsx(g,k(d({},m.numCredits),{values:{numCredits:t}}))}),e.jsx("input",{ref:c,name:"Credits",value:b.toLocaleString("en-US",{style:"currency",currency:h,maximumFractionDigits:2}),disabled:!0,autoFocus:!0,tabIndex:0,className:"bg-token-bg-primary text-token-text-primary m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{disabled:t<=s,onMouseDown:()=>o(-R),onMouseUp:x,onMouseLeave:x,children:e.jsx(he,{className:oe("icon",t<=s&&"text-token-text-tertiary")})}),e.jsx(O,{disabled:t>=a,onMouseDown:()=>o(R),onMouseUp:x,onMouseLeave:x,children:e.jsx(ge,{className:"icon"})})]})]})]})}const m=$({title:{id:"components.business.CreditPurchaseModal.title",defaultMessage:"Buy more credits for your team"},description:{id:"components.business.CreditPurchaseModal.description",defaultMessage:"Give your team continued access to advanced features after hitting plan limits. Credits valid for 12 months. <link>View rate card</link>."},amountToAdd:{id:"components.business.CreditPurchaseModal.amountToAdd",defaultMessage:"Amount to add"},amountToAddDescription:{id:"components.business.CreditPurchaseModal.amountToAddDescription",defaultMessage:"Equal to {deepResearchCount} deep research tasks, {gpt5proChatCount} GPT-5 pro messages, or {imagegenCount} imagegen messages."},numCredits:{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}"},paymentErrorWarning:{id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},cancel:{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"},next:{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"}});export{Me as CreditPurchaseModal,xe as CreditSelectorButtons};
//# sourceMappingURL=gdxlpnxrd91rpva8.js.map
