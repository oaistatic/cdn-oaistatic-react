import{r as i,j as g}from"./kfrdmkli83ureki3.js";import{u as p,co as P,N as F,aW as A,lm as k,Q as w,bk as M,g as C,V as E,O as _,nF as b,D as I}from"./kw08ajijqinojrwh.js";import{gD as S,gE as V,gF as j,aN as D,aA as z}from"./fyw02vlaiv2vq6cj.js";import{s as T}from"./dv0dvaedamxrvk5u.js";import{A as W,V as $}from"./oxmgj4amv4fazq4f.js";import"./nm8ilf9kbsyolp9f.js";import"./bxgk09qvxvkate6l.js";const y=()=>{const o=S();return i.useCallback(t=>{T.set(t),o.setState({isVoiceModeActive:!0})},[o])};function G(){const o=D(z.hasSeenAdvancedVoiceNuxFullPage);return!o.isLoading&&o.eligible}function B({clientThreadId:o}){const t=p(),n=V(e=>e.showVoicePicker),f=V(e=>e.showNuxFullPage),a=S(),c=P(o),s=c!=null?c:o,r=!F(t),{setValue:u}=j(A.VoiceName),d=G(),l=k(),m=y();return i.useEffect(()=>{const e=sessionStorage.getItem("selectedVoiceName"),v=h=>{const x=w(()=>M(C(t,s)).id);try{sessionStorage.removeItem("selectedVoiceName"),m({voice:h,conversation_id:void 0,eventSource:"login_page",voice_mode:"advanced",clientThreadId:b(),gizmo_id:E.getGizmoId(_(s)),requested_default_model:x,skipCacheReason:"login-direct-to-voice-mode"})}catch(N){I.addError("Failed to start voice mode after voice picker: ".concat(N),{protocol:l})}};e&&!r&&(u(e),v(e))},[t,s,r,u,m,l]),i.useEffect(()=>{d||a.setState(e=>{e.showNuxFullPage=!1})},[d,a]),f?g.jsx(W,{conversationId:s}):n?g.jsx($,{isOpen:n,onClose:()=>{a.setState(e=>{e.showVoicePicker=!1})},conversationId:s,cameFromNux:!0}):null}export{B as VoiceModals};
//# sourceMappingURL=hped4eg53je64yld.js.map
