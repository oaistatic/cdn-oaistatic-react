const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ifocaur93dpvh0y7.js","assets/kfrdmkli83ureki3.js","assets/fyw02vlaiv2vq6cj.js","assets/kw08ajijqinojrwh.js","assets/root-fi49nzd2.css","assets/conversation-small-lq38g8zw.css","assets/ea3j10kjv7ntyk1b.js","assets/iwr3smf9emayvqcc.js"])))=>i.map(i=>d[i]);
import{c as E,j as t,r as _,_ as $,M as k,am as He,h as Be,i as Fe}from"./kfrdmkli83ureki3.js";import{dR as Te,ch as Je,ci as Ne,cj as Ve,aa as De,cy as B,az as re,ri as We,cq as Qe,aA as ie,u as Pe,g as Ue,d as Re,f9 as Ge,rj as Ie,pQ as Xe,fw as Ke,rk as Ye,hI as Ze,rl as qe,rm as et,oh as tt,kS as Se,dQ as st}from"./kw08ajijqinojrwh.js";import{L as H}from"./byis8e009cwknczn.js";import{g as Le}from"./ffn9wc6lj27bri6y.js";import{m8 as Ee,cd as ot,mz as nt,df as at,b0 as lt}from"./fyw02vlaiv2vq6cj.js";import{p as rt}from"./jzzsz31csz3jhlrp.js";const it=s=>{"use forget";const e=E.c(17),{onDrag:o,onDragEnd:r,onDoubleClick:l,onDragStart:n,onPointerUp:a}=s;let d,c,i,p;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:1},c={opacity:1},i={type:"tween",duration:.1},p={x:0,y:0,transform:"translateY(0px)"},e[0]=d,e[1]=c,e[2]=i,e[3]=p):(d=e[0],c=e[1],i=e[2],p=e[3]);let u;e[4]!==n?(u=()=>{n==null||n()},e[4]=n,e[5]=u):u=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f={left:0,right:0,top:0,bottom:0},e[6]=f):f=e[6];let x;e[7]!==o?(x=(v,j)=>{o==null||o(j)},e[7]=o,e[8]=x):x=e[8];let g;e[9]!==r?(g=(v,j)=>r==null?void 0:r(j),e[9]=r,e[10]=g):g=e[10];let h;return e[11]!==l||e[12]!==a||e[13]!==u||e[14]!==x||e[15]!==g?(h=t.jsx(Te.div,{drag:"x",tabIndex:-1,className:"bg-token-border-default pointer-events-auto absolute top-0 bottom-0 z-20 w-[2px] cursor-ew-resize rounded-full opacity-0 after:absolute after:inset-y-0 after:start-1/2 after:top-[-18px] after:h-[calc(100%+36px)] after:w-[16px] after:-translate-x-1/2 after:transform after:bg-transparent after:content-['']",whileHover:d,whileDrag:c,transition:i,style:p,onPointerDown:u,dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:f,onDrag:x,onPointerUp:a,onDragEnd:g,onDoubleClick:l}),e[11]=l,e[12]=a,e[13]=u,e[14]=x,e[15]=g,e[16]=h):h=e[16],h},ct=s=>{"use forget";const e=E.c(6),{content:o,tiktokenImport:r,o200kBaseImport:l}=s,{Tiktoken:n}=_.use(r),{default:a}=_.use(l);let d;e[0]!==n||e[1]!==o||e[2]!==a?(d=new n(a).encode(o),e[0]=n,e[1]=o,e[2]=a,e[3]=d):d=e[3];const c=d.length;let i;return e[4]!==c?(i=t.jsx("div",{className:"text-token-text-secondary min-w-0 truncate font-mono text-xs",children:t.jsx(k,{id:"NUKG65",defaultMessage:"{tokenCount} tokens",values:{tokenCount:t.jsx(He,{value:c})}})}),e[4]=c,e[5]=i):i=e[5],i},le=({content:s})=>{"use no forget";const e=_.useMemo(()=>$(()=>import("./ifocaur93dpvh0y7.js"),__vite__mapDeps([0,1])),[]),o=_.useMemo(()=>$(()=>import("./o5eltwebd0mkim81.js"),[]),[]);return s?t.jsx(_.Suspense,{name:"dev-mode-token-count",fallback:t.jsx("div",{className:"loading-results-shimmer h-5 w-10 rounded-lg"}),children:t.jsx(ct,{content:s,tiktokenImport:e,o200kBaseImport:o})}):null},dt=s=>{const[e]=Ee(De(s),Je({path:Ne,args:o=>{const[r]=Ee(Ne(o),Ve);return r!=null?r:{}}}));return e},ut=s=>{var e;try{const o=De(s);return o&&(e=JSON.parse(o))!=null?e:void 0}catch(o){return null}},ft=s=>{var e,o;return(o=(e=s.metadata)==null?void 0:e.chatgpt_sdk)==null?void 0:o.tool_response_metadata},mt=(s,e)=>{for(const o of s.values())for(const r of o)if(r.id===e)return r;return null},xt=re(()=>$(()=>import("./fyw02vlaiv2vq6cj.js").then(s=>s.zE),__vite__mapDeps([2,1,3,4,5])),{loading:s=>ie(s)}),Oe=_.createContext(null),ze=()=>{const s=_.useContext(Oe);if(!s)throw new Error("Section components must be used within a Section.Root");return s},pt=s=>{"use forget";const e=E.c(10),{children:o,defaultExpanded:r}=s,l=r===void 0?!0:r,[n,a]=_.useState(l),d=_.useId(),c=_.useId();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>a(jt),e[0]=i):i=e[0];let p;e[1]!==c||e[2]!==d||e[3]!==n?(p={isExpanded:n,toggle:i,headerId:d,contentId:c},e[1]=c,e[2]=d,e[3]=n,e[4]=p):p=e[4];let u;e[5]!==o?(u=t.jsx("div",{className:"relative z-0 border-b",children:o}),e[5]=o,e[6]=u):u=e[6];let f;return e[7]!==p||e[8]!==u?(f=t.jsx(Oe.Provider,{value:p,children:u}),e[7]=p,e[8]=u,e[9]=f):f=e[9],f},gt=s=>{"use forget";const e=E.c(8),{children:o}=s,{isExpanded:r,contentId:l,headerId:n}=ze(),a=!r,d=r&&"pb-3";let c;e[0]!==d?(c=B("z-0 px-3",d),e[0]=d,e[1]=c):c=e[1];let i;return e[2]!==o||e[3]!==l||e[4]!==n||e[5]!==a||e[6]!==c?(i=t.jsx("div",{id:l,role:"region","aria-labelledby":n,hidden:a,className:c,children:o}),e[2]=o,e[3]=l,e[4]=n,e[5]=a,e[6]=c,e[7]=i):i=e[7],i},ht=s=>{"use forget";const e=E.c(25),{children:o,tooltip:r,accessory:l}=s,{isExpanded:n,toggle:a,headerId:d,contentId:c}=ze(),[i,p]=_.useState(!1),u=i?"border-token-border-default":"border-transparent";let f;e[0]!==u?(f=B("bg-token-bg-elevated-secondary sticky top-0 z-20 flex w-full min-w-0 items-center border-b",u),e[0]=u,e[1]=f):f=e[1];const x=!n&&"-rotate-90";let g;e[2]!==x?(g=B("icon-sm shrink-0 transition-transform",x),e[2]=x,e[3]=g):g=e[3];let h;e[4]!==g?(h=t.jsx(xt,{className:g}),e[4]=g,e[5]=h):h=e[5];let v;e[6]!==o?(v=t.jsx("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:o}),e[6]=o,e[7]=v):v=e[7];let j;e[8]!==c||e[9]!==d||e[10]!==n||e[11]!==h||e[12]!==v||e[13]!==a?(j=t.jsxs("button",{type:"button",id:d,"aria-controls":c,"aria-expanded":n,onClick:a,className:"text-token-text-secondary focus-visible:ring-token-border-strong flex min-w-0 flex-1 items-center gap-2 rounded-sm px-3 py-3 text-start text-sm focus-visible:ring-1 focus-visible:outline-none",children:[h,v]}),e[8]=c,e[9]=d,e[10]=n,e[11]=h,e[12]=v,e[13]=a,e[14]=j):j=e[14];let y;e[15]!==l?(y=l&&t.jsx("div",{className:"ms-auto py-1 ps-2 pe-3",children:l}),e[15]=l,e[16]=y):y=e[16];let C;e[17]!==f||e[18]!==j||e[19]!==y?(C=t.jsxs("div",{className:f,children:[j,y]}),e[17]=f,e[18]=j,e[19]=y,e[20]=C):C=e[20];const N=C;let I;e[21]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute block h-[1px] bg-transparent",ref:We({options:{threshold:0},onChange(ce,F){p(F.intersectionRatio===0)}})}),e[21]=I):I=e[21];let T;return e[22]!==N||e[23]!==r?(T=t.jsxs(t.Fragment,{children:[I,r?t.jsx(Qe,{side:"left",triggerAs:null,labelTextAlign:"left",label:t.jsx(ot,{size:"small",className:"text-sm leading-5 font-normal",forceDarkMode:!0,children:r}),children:N}):N]}),e[22]=N,e[23]=r,e[24]=T):T=e[24],T},m={Content:gt,Header:ht,Root:pt};function jt(s){return!s}const vt=re(()=>$(()=>import("./kw08ajijqinojrwh.js").then(s=>s.yr),__vite__mapDeps([3,1,4])),{loading:s=>ie(s)}),_t=re(()=>$(()=>import("./ea3j10kjv7ntyk1b.js"),__vite__mapDeps([6,1])),{loading:s=>ie(s)}),bt=re(()=>$(()=>import("./iwr3smf9emayvqcc.js"),__vite__mapDeps([7,1])),{loading:s=>ie(s)}),kt=s=>{"use forget";var be,ke,we,Me,ye,Ce;const e=E.c(57),{focusedMessages:o,conversation:r}=s,l=Pe(),n=Be(),a=Ie(0),[d,c]=_.useState(!1),[i,p]=_.useState(!1),u=Ie(400);let f;e[0]!==a||e[1]!==u?(f=[u,a],e[0]=a,e[1]=u,e[2]=f):f=e[2];const x=Xe(f,wt),{assistantMessage:g,toolMessages:h}=rt(o);let v;e[3]!==l?(v=()=>qe(l),e[3]=l,e[4]=v):v=e[4];const j=Re(v),{connectorLinks:y,refetch:C}=Ke(),{path:N,args:I}=(be=dt(g))!=null?be:{},T=N===void 0?"":N,ce=I===void 0?{}:I,[,F,ge]=T.split("/").filter(Boolean),he=mt(y,F),w=he?j==null?void 0:j.get(he.connector_id):null,{actions:Ae}=Ye(w),b=Ae.find(S=>S.name===ge),J=(ke=b==null?void 0:b.templates)==null?void 0:ke[0],M=h.findLast(Mt),de=M?ut(M):null,ue=(we=M==null?void 0:M.metadata)!=null&&we.chatgpt_sdk?nt(M.metadata.chatgpt_sdk):null,je=h.findLast(yt),ve=je?ft(je):null,_e=(ye=(Me=M==null?void 0:M.metadata)==null?void 0:Me.chatgpt_sdk)==null?void 0:ye.external_call_time_ms;let D;e[5]!==l||e[6]!==C?(D=async S=>{await et(S),await Promise.all([C(),tt.refetch(l,void 0,void 0)])},e[5]=l,e[6]=C,e[7]=D):D=e[7];let P;e[8]!==l?(P=S=>{Se(l).danger({defaultMessage:"Error refreshing actions.",description:"Error message when refreshing actions fails"},{error:S})},e[8]=l,e[9]=P):P=e[9];let R;e[10]!==l||e[11]!==n?(R=()=>{Se(l).success(n.formatMessage({id:"n9Ee37",defaultMessage:"Tool updated"}))},e[10]=l,e[11]=n,e[12]=R):R=e[12];let V;e[13]!==D||e[14]!==P||e[15]!==R?(V={mutationFn:D,onError:P,onSuccess:R},e[13]=D,e[14]=P,e[15]=R,e[16]=V):V=e[16];const W=Fe(V);let Q;e[17]!==d?(Q=d&&t.jsx("div",{className:"fixed inset-0 z-0 bg-transparent"}),e[17]=d,e[18]=Q):Q=e[18];let L;e[19]!==a?(L=()=>{c(!0),a.set(0)},e[19]=a,e[20]=L):L=e[20];let O;e[21]!==x||e[22]!==a||e[23]!==u?(O=()=>{c(!1),a.set(0),u.set(x.get())},e[21]=x,e[22]=a,e[23]=u,e[24]=O):O=e[24];let z;e[25]!==a?(z=S=>a.set(a.get()+S.delta.x),e[25]=a,e[26]=z):z=e[26];let U;e[27]!==L||e[28]!==O||e[29]!==z?(U=t.jsx(it,{onDragStart:L,onDragEnd:O,onDrag:z}),e[27]=L,e[28]=O,e[29]=z,e[30]=U):U=e[30];let G;e[31]!==x?(G={width:x},e[31]=x,e[32]=G):G=e[32];const fe=(w==null?void 0:w.logo_url)&&t.jsx("img",{className:"h-4 w-4 rounded-md",src:w.logo_url,alt:w.name}),me=(Ce=w==null?void 0:w.name)!=null?Ce:t.jsx(k,{id:"lDDPYo",defaultMessage:"Unknown Connector"});let A;e[33]!==me?(A=t.jsx("span",{className:"text-token-text-primary text-lg",children:me}),e[33]=me,e[34]=A):A=e[34];let X;e[35]!==fe||e[36]!==A?(X=t.jsxs("div",{className:"flex items-center gap-2",children:[fe,A]}),e[35]=fe,e[36]=A,e[37]=X):X=e[37];const $e=W.isPending,xe=W.isPending&&"motion-safe:animate-spin";let K;e[38]!==xe?(K=B("icon",xe),e[38]=xe,e[39]=K):K=e[39];let Y;e[40]!==r?(Y=t.jsx(st,{onClick:()=>Le(r).blur()}),e[40]=r,e[41]=Y):Y=e[41];let Z;e[42]!==b?(Z=b&&t.jsx(le,{content:b.description}),e[42]=b,e[43]=Z):Z=e[43];let q;e[44]!==b||e[45]!==i?(q=b&&t.jsxs(m.Content,{children:[t.jsx("span",{className:B("text-token-text-primary ps-6 text-sm whitespace-pre-wrap",i?"line-clamp-none":"line-clamp-4"),children:b.description}),t.jsx("button",{className:"text-token-text-secondary ms-6 mt-1 flex justify-start text-sm hover:underline",onClick:()=>p(!i),children:i?t.jsx(k,{id:"Mggt6n",defaultMessage:"See less"}):t.jsx(k,{id:"yhD38v",defaultMessage:"See all"})})]}),e[44]=b,e[45]=i,e[46]=q):q=e[46];let ee;e[47]!==J?(ee=J&&t.jsxs(m.Root,{children:[t.jsx(m.Header,{accessory:t.jsx(Ze,{href:"https://developers.openai.com/apps-sdk",children:t.jsx(bt,{className:"icon-sm opacity-60"})}),children:t.jsx(k,{id:"hHDKiZ",defaultMessage:"Widget"})}),t.jsx(m.Content,{children:t.jsx(H,{isInitialLevelExpanded:!0,unwrap:!0,className:"!text-xs !leading-5",value:J.meta})})]}),e[47]=J,e[48]=ee):ee=e[48];let te;e[49]!==n?(te=n.formatMessage({id:"yXxwQR",defaultMessage:"Tool input is the model-written input to the MCP tool. It is exposed to the widget code as `window.openai.toolInput`."}),e[49]=n,e[50]=te):te=e[50];let se;e[51]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(k,{id:"t5GE25",defaultMessage:"Tool input"}),e[51]=se):se=e[51];let oe;e[52]!==n?(oe=n.formatMessage({id:"85NXIC",defaultMessage:"Tool output is the `structuredContent` field of the MCP tool response. It is exposed to the model, and to the widget code as `window.openai.toolOutput`."}),e[52]=n,e[53]=oe):oe=e[53];let ne;e[54]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(k,{id:"E9SGiy",defaultMessage:"Tool output"}),e[54]=ne):ne=e[54];const pe=de?t.jsx(H,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:de}):t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(k,{id:"lpg5UJ",defaultMessage:"No tool response"})});let ae;return e[55]!==pe?(ae=t.jsx(m.Content,{children:pe}),e[55]=pe,e[56]=ae):ae=e[56],t.jsxs(t.Fragment,{children:[Q,t.jsxs("div",{className:"border-token-border-default bg-token-bg-elevated-secondary z-10 h-full border-s",children:[U,t.jsxs(Te.div,{className:"relative flex h-full flex-col",style:G,children:[t.jsxs("div",{className:"flex h-(--header-height) items-center gap-1 ps-3 pe-2",children:[X,t.jsx(at,{className:"ms-auto",onClick:()=>W.mutate(F),disabled:$e,icon:W.isPending?vt:_t,iconClassName:K}),Y]}),t.jsxs("div",{className:"flex h-full flex-col overflow-x-hidden overflow-y-auto",children:[t.jsxs(m.Root,{children:[t.jsx(m.Header,{accessory:Z,children:t.jsx("span",{className:"truncate font-mono text-sm",children:ge})}),q]}),ee,t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:te,accessory:t.jsx(le,{content:JSON.stringify(ce)}),children:se}),t.jsx(m.Content,{children:t.jsx(H,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:ce})})]}),t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:oe,accessory:t.jsxs("div",{className:"flex items-end gap-1",children:[_e&&t.jsx("span",{className:"text-token-text-secondary font-mono text-xs",children:n.formatMessage({id:"dzjXDZ",defaultMessage:"Timing: {externalCallTimeMs}ms /"},{externalCallTimeMs:_e})}),t.jsx(le,{content:JSON.stringify(de)})]}),children:ne}),ae]}),ve&&t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:n.formatMessage({id:"4BhV8x",defaultMessage:"The tool response metadata is the `_meta` field of the MCP tool response. It is not exposed to the model, but is exposed to widget code as `window.openai.toolResponseMetadata`."}),children:t.jsx(k,{id:"OP/Fmv",defaultMessage:"Tool response metadata"})}),t.jsx(m.Content,{children:t.jsx(H,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:ve})})]}),ue&&t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:n.formatMessage({id:"pPuRCH",defaultMessage:"Persisted state of the widget. It is exposed to the widget code as `window.openai.widgetState`, and updated via `window.openai.setWidgetState`."}),accessory:t.jsx(le,{content:JSON.stringify(ue)}),children:t.jsx(k,{id:"BtTaJR",defaultMessage:"Widget state"})}),t.jsx(m.Content,{children:t.jsx(H,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:ue})})]})]})]})]},"dev-mode-sidebar")]})},Dt=s=>{"use forget";const e=E.c(10),{clientThreadId:o}=s,r=Pe();let l,n;e[0]!==o||e[1]!==r?(l=Ue(r,o),n=Le(l),e[0]=o,e[1]=r,e[2]=l,e[3]=n):(l=e[2],n=e[3]);const a=n;let d;e[4]!==a?(d=()=>a.focusedMessages$(),e[4]=a,e[5]=d):d=e[5];const c=Re(d);let i;return e[6]!==l||e[7]!==a||e[8]!==c?(i=c.length>0&&t.jsx(Ge,{name:"DevModeSidebar",onError:()=>a.blur(),children:t.jsx(kt,{focusedMessages:c,conversation:l})}),e[6]=l,e[7]=a,e[8]=c,e[9]=i):i=e[9],i};function wt(s){const[e,o]=s;return lt(e-o,200,800)}function Mt(s){var e;return(e=s.author.name)==null?void 0:e.startsWith("api_tool.call_tool")}function yt(s){var e;return(e=s.author.name)==null?void 0:e.startsWith("api_tool.call_tool")}export{Dt as DevModeSidebar};
//# sourceMappingURL=h3u32ujevv1ubeue.js.map
