import{c as q,e as F,u as P,r as v,d as Q,j as t,M as w}from"./cs7toih8jegb7teq.js";import{oB as R,bQ as z,e as H,cY as Y,l_ as K,oC as y,a0 as $,W as G,be as D,C as J,bE as X,av as Z,P as V,bB as ee}from"./dmck639k4dv7claj.js";import{co as te}from"./hnw079jsdm76umup.js";function se(e){switch(e){case y.SSOMismatch:return{title:a.cannotAccessWorkspace,description:a.ssoMismatchDescription};case y.RequireSSOLogin:return{title:a.cannotAccessWorkspace,description:a.requireSSODescription};case y.UnexpectedSSOLogin:return{title:a.cannotAccessWorkspace,description:a.unexpectedSSODescription}}}const oe=2e3;function le(){"use forget";const e=q.c(32),s=R(),o=z(),A=F(),E=H(),L=Y();let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={...K(),select:ne},e[0]=h):h=e[0];const B=P(h),n=s?.errorCode,d=s!=null&&B.isFetched&&L==null&&!!o,[I,U]=v.useState(!1);let p,f;e[1]!==d?(p=()=>{d&&setTimeout(()=>{U(!0)},oe)},f=[d],e[1]=d,e[2]=p,e[3]=f):(p=e[2],f=e[3]),v.useEffect(p,f);const W=n===y.UnexpectedSSOLogin,m=d&&(W?I:!0),c=te();let g,S;if(e[4]!==c||e[5]!==n||e[6]!==m?(g=()=>{if(!n||!m)return;const T=c?.split("@")?.[1];$.addError(`SSO Catch All Modal: ${n} for ${c??"unknown user"}`,{sso_error:n,email:c,email_hostname:T})},S=[n,m,c],e[4]=c,e[5]=n,e[6]=m,e[7]=g,e[8]=S):(g=e[7],S=e[8]),v.useEffect(g,S),!m)return null;let x;e[9]!==A||e[10]!==s.accountName||e[11]!==o?.name?(x=s?.accountName??o?.name??A.formatMessage(a.workspacePlaceholder),e[9]=A,e[10]=s.accountName,e[11]=o?.name,e[12]=x):x=e[12];const N=x;let M;e[13]!==E||e[14]!==o?(M=()=>{const T=o?.ssoConnectionName?{connection:o.ssoConnectionName}:void 0;G(E,{fallbackScreenHint:"login",additionalAuthParams:T})},e[13]=E,e[14]=o,e[15]=M):M=e[15];const _=M;let O;e[16]!==s.errorCode?(O=se(s.errorCode),e[16]=s.errorCode,e[17]=O):O=e[17];const{title:j,description:b}=O;let i;e[18]!==j?(i=t.jsx("div",{className:"flex flex-col",children:t.jsx("div",{className:"text-lg",children:t.jsx(w,{...j})})}),e[18]=j,e[19]=i):i=e[19];let r;e[20]!==N?(r=t.jsx(w,{...a.authenticateNotice,values:{workspaceName:N}}),e[20]=N,e[21]=r):r=e[21];let l;e[22]!==_||e[23]!==r?(l=t.jsx(D.Button,{onClick:_,color:"primary",children:r}),e[22]=_,e[23]=r,e[24]=l):l=e[24];let C;e[25]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(D.Button,{onClick:ae,children:t.jsx(w,{id:"KlMYRb",defaultMessage:"Log out"})}),e[25]=C):C=e[25];let u;e[26]!==b?(u=t.jsx("div",{className:"flex flex-col space-y-4",children:t.jsx("div",{children:t.jsx(w,{...b})})}),e[26]=b,e[27]=u):u=e[27];let k;return e[28]!==l||e[29]!==u||e[30]!==i?(k=t.jsx(J,{testId:"modal-sso-catch-all",isOpen:!0,onClose:Z,type:"warning",size:"custom",className:"max-w-3xl",title:i,icon:X,primaryButton:l,secondaryButton:C,children:u}),e[28]=l,e[29]=u,e[30]=i,e[31]=k):k=e[31],k}function ae(){V.logLogOutButtonClicked({location:"sso_catch_all_modal"}),ee()}function ne(){return null}const a=Q({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{le as default};
//# sourceMappingURL=0pvms18xhlsdgwx3.js.map
