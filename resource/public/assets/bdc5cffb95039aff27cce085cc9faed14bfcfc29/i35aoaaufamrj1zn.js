const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/m9o58vphd3ndk69b.js","assets/cs7toih8jegb7teq.js","assets/dmck639k4dv7claj.js","assets/root-mdlgku96.css","assets/hnw079jsdm76umup.js","assets/conversation-small-b5ztx8w5.css","assets/kizn5m1hr7kdjf9n.js","assets/nfubiloo9rdxk3kj.js","assets/hsurwbv79wrpc9dg.js","assets/lxgn8k46ba24438b.js","assets/k4ghje9xipg90eb2.js","assets/lox5zdwgg3gy3k4z.js","assets/itn5frgf3bcgdkwm.js"])))=>i.map(i=>d[i]);
import{c as se,r as N,j as t,L as ge,e as de,M as W}from"./cs7toih8jegb7teq.js";import{aw as he,ax as xe,S as pe,e as ne,p as je,aF as ve,G as Ce,eh as be,j5 as Se,eo as B,z as q,jB as A,gM as ye,B as Pe,i8 as _e,b9 as Ne,bV as we,eg as Ie,aH as me,e0 as Ee}from"./dmck639k4dv7claj.js";import{io as Te,ip as ke,im as Me,iv as $e,hX as ze,ik as ue,gO as De,gQ as Fe,jC as H,hZ as T,ii as Oe,ij as Le,id as ce,hT as Re,it as Ae,b1 as He,jD as Be,aV as qe,aW as Ue,jE as Ve,il as Ge,iu as We}from"./hnw079jsdm76umup.js";import{D as Xe}from"./kizn5m1hr7kdjf9n.js";import{P as Qe}from"./hsurwbv79wrpc9dg.js";import{S as Ye,u as Ke}from"./m9o58vphd3ndk69b.js";import{u as G,P as Ze,a as Je}from"./fj3f2bxvzaekkipy.js";import"./nfubiloo9rdxk3kj.js";import"./lxgn8k46ba24438b.js";import"./k4ghje9xipg90eb2.js";import"./lox5zdwgg3gy3k4z.js";import"./itn5frgf3bcgdkwm.js";const et=he(()=>xe(()=>import("./m9o58vphd3ndk69b.js").then(l=>l.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(l=>l.SnorlaxFileModal));function tt(l){"use forget";const e=se.c(23),{gizmo:s,hasConversations$:n}=l;Te(s.gizmo.id);const{items:a,hasNextPage:i,fetchNextPage:c,isLoading:u,isFetching:x,isFetchingNextPage:m}=ke(s.gizmo.id);let g,r;e[0]!==n||e[1]!==a.length?(g=()=>{n&&n.set(a.length>0)},r=[a.length,n],e[0]=n,e[1]=a.length,e[2]=g,e[3]=r):(g=e[2],r=e[3]),N.useEffect(g,r);const o=N.useRef(null);let d;e[4]!==i||e[5]!==x||e[6]!==u||e[7]!==c?(d=y=>{u||y==null||(o.current?.disconnect(),o.current=new IntersectionObserver(P=>{P[0].isIntersecting&&i&&!x&&c()}),o.current.observe(y))},e[4]=i,e[5]=x,e[6]=u,e[7]=c,e[8]=d):d=e[8];const h=d;let f,j;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=()=>()=>{o.current?.disconnect()},j=[],e[9]=f,e[10]=j):(f=e[9],j=e[10]),N.useEffect(f,j);const b=a.length;let v;e[11]!==b||e[12]!==s||e[13]!==i||e[14]!==h||e[15]!==u||e[16]!==a?(v=(b||u)&&t.jsx(st,{gizmo:s,items:a??[],hasNextPage:i,infiniteScrollTriggerElementRef:h}),e[11]=b,e[12]=s,e[13]=i,e[14]=h,e[15]=u,e[16]=a,e[17]=v):v=e[17];let p;e[18]!==m?(p=m&&t.jsx("div",{className:"m-4 mb-5 flex justify-center",children:t.jsx(pe,{})}),e[18]=m,e[19]=p):p=e[19];let S;return e[20]!==v||e[21]!==p?(S=t.jsxs("section",{children:[v,p]}),e[20]=v,e[21]=p,e[22]=S):S=e[22],S}function st(l){"use forget";const e=se.c(21),{gizmo:s,items:n,hasNextPage:a,infiniteScrollTriggerElementRef:i}=l,c=ne();let u;e[0]!==c?(u=je(c,"773249106"),e[0]=c,e[1]=u):u=e[1];const x=u,m=(s?.gizmo?.sharing?.subjects?.length??0)>0;let g;if(e[2]!==s||e[3]!==n){let f;e[5]!==s?(f=j=>"owner"in j&&j.owner?.user_id!==s.gizmo?.author.user_id,e[5]=s,e[6]=f):f=e[6],g=n.some(f),e[2]=s,e[3]=n,e[4]=g}else g=e[4];const o=x&&(m||g);let d;if(e[7]!==s||e[8]!==a||e[9]!==i||e[10]!==n||e[11]!==o){let f;e[13]!==s||e[14]!==a||e[15]!==i||e[16]!==n.length||e[17]!==o?(f=(j,b)=>{const v=a&&b===n.length-3?i:void 0;return t.jsx("li",{ref:v,className:"group hover:bg-token-interactive-bg-secondary-hover active:bg-token-interactive-bg-secondary-press flex min-h-16 cursor-pointer items-center p-3 text-sm select-none",children:t.jsx(nt,{conversation:j,gizmo:s,showAvatar:o})},j.id)},e[13]=s,e[14]=a,e[15]=i,e[16]=n.length,e[17]=o,e[18]=f):f=e[18],d=n.map(f),e[7]=s,e[8]=a,e[9]=i,e[10]=n,e[11]=o,e[12]=d}else d=e[12];let h;return e[19]!==d?(h=t.jsx("ol",{className:"divide-token-bg-tertiary divide-y",children:d}),e[19]=d,e[20]=h):h=e[20],h}const nt=l=>{"use forget";const e=se.c(34),{conversation:s,gizmo:n,showAvatar:a}=l,i=ve(s.id,ot)??s.title,[c,u]=N.useState(!1);let x,m;e[0]!==s.id?(x=()=>Se($e,{editTitleInMainScreen:E=>{const{serverThreadId:U}=E;U===s.id&&u(!0)}}),m=[s.id],e[0]=s.id,e[1]=x,e[2]=m):(x=e[1],m=e[2]),N.useEffect(x,m);const g=ne(),{snippet:r}=s;let o,d,h,f;if(e[3]!==s||e[4]!==g||e[5]!==n){const E=Ce(g)?.normalizedAccountUserId;o="owner"in s?s.owner:null,h=o?.user_id,d=o?.name,f=be(s.id,n,!0,h,E),e[3]=s,e[4]=g,e[5]=n,e[6]=o,e[7]=d,e[8]=h,e[9]=f}else o=e[6],d=e[7],h=e[8],f=e[9];const j=f;let b;e[10]!==o||e[11]!==d||e[12]!==h||e[13]!==a?(b=a&&t.jsx(ze,{monogram:o&&d&&h?{value:d,id:h}:null,showTooltip:!0}),e[10]=o,e[11]=d,e[12]=h,e[13]=a,e[14]=b):b=e[14];let v;e[15]!==s||e[16]!==i||e[17]!==c?(v=c?t.jsx(Me,{conversationId:s.id,historyConversationResponse:s,onClose:()=>{u(!1)}}):t.jsx("div",{className:"text-sm font-medium",children:i}),e[15]=s,e[16]=i,e[17]=c,e[18]=v):v=e[18];let p;e[19]!==r?(p=r&&t.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:r}),e[19]=r,e[20]=p):p=e[20];let S;e[21]!==v||e[22]!==p?(S=t.jsxs("div",{className:"grow overflow-hidden",children:[v,p]}),e[21]=v,e[22]=p,e[23]=S):S=e[23];let y;e[24]!==s||e[25]!==c?(y=!c&&t.jsx(Ye,{conversation:s,isNewProjectPage:!0}),e[24]=s,e[25]=c,e[26]=y):y=e[26];let P;e[27]!==b||e[28]!==S||e[29]!==y?(P=t.jsxs("div",{className:"flex w-full items-center gap-4",children:[b,S,y]}),e[27]=b,e[28]=S,e[29]=y,e[30]=P):P=e[30];const w=P;if(c)return w;let I;return e[31]!==w||e[32]!==j?(I=t.jsx(ge,{to:j,draggable:!1,className:"w-full",onClick:it,children:w}),e[31]=w,e[32]=j,e[33]=I):I=e[33],I};function ot(l){return l?.title}function it(l){(l.target instanceof HTMLElement&&l.target.dataset.preventDefault||l.target instanceof SVGElement)&&l.preventDefault()}function rt({onRequestEdit:l,onRequestAddFiles:e,onRequestUpdateProject:s,projectData:n}){const a=N.use(ue),i=B(a.isSkeleton$);return t.jsxs("div",{className:q("flex justify-between",i&&"group skeleton"),children:[t.jsx(ct,{canEdit:!0,project:a,onRequestEdit:l,onRequestUpdateProject:s}),t.jsx(at,{project:a,projectData:n,onRequestAddFiles:e})]})}function at({project:l,projectData:e,onRequestAddFiles:s}){const{files:n=[]}=e??{},a=!n.length,i=B(l.isSkeleton$);let c,u;const{canEdit:x}=ye(e);if(!i&&a&&!x)return null;if(a)c=e?t.jsx(W,{...x?T.addFilesButtonLabel:T.viewFilesButtonLabel}):null,u=null;else{const g=n.slice(0,3);c=t.jsx(W,{...T.filesCount,values:{count:n.length}}),u=t.jsx("div",{className:"isolate inline-flex items-center max-sm:sr-only",children:g.map((r,o)=>t.jsx(lt,{file:r,index:o,gizmoId:e?.gizmo.id},r.file_id))})}return t.jsxs(Pe,{color:"secondary",onClick:s,className:q(i&&"skeleton-child w-20","group/project-control-tile"),contentWrapperClassName:q(i&&"","gap-1.5 text-token-text-secondary"),children:[u,c]})}function lt({file:l,index:e,gizmoId:s}){const n=l.name,i=_e(n)&&l.file_id!=null&&t.jsx(Oe,{fileName:n,fileId:l.file_id,gizmoId:s,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"});return t.jsx("span",{className:q("border-token-bg-primary group-hover/project-control-tile:border-token-main-surface-secondary relative size-5 overflow-hidden rounded-md border-2",e>0&&"-ms-2"),style:{zIndex:10-e},children:i||t.jsx(Le,{className:"h-4 w-4 shrink-0 rounded-none [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",glyphClassName:"h-3 w-3",filename:l.name,contextConnectorInfo:void 0})},l.file_id)}function ct({canEdit:l,onRequestEdit:e,onRequestUpdateProject:s,project:n}){const a=G(()=>n.theme$()),i=G(()=>n.emoji$()),c=G(()=>n.title$()),u=B(n.isSkeleton$),x=G(!1),m=B(c),g=de(),r=ne();return N.useEffect(()=>{A(()=>n.theme$(),o=>a.set(o)),A(()=>n.emoji$(),o=>i.set(o)),A(()=>n.title$(),o=>c.set(o)),A(()=>a,o=>ce({ctx:r,id:n.id,theme:o()})),A(()=>i,o=>ce({ctx:r,id:n.id,emoji:o()})),A(()=>c,o=>ce({ctx:r,id:n.id,name:o()}))}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Ze,{open$:x,theme$:a,emoji$:i,onOpenChange:H(async(o,d)=>{!o&&d&&await s?.({theme:a(),emoji:i(),name:c()})}),children:t.jsx(Je,{className:"ms-0! [--focus-outline-margin:-4px]",disabled:!l,emoji$:i,isShared$:n.isShared$,isSkeleton$:n.isSkeleton$,theme$:a,size:"lg",strict:!0})}),t.jsx("button",{disabled:!l,onClick:e,name:"project-title",className:q("min-w-0",u&&"skeleton-child"),"aria-label":g.formatMessage({id:"edit-title",defaultMessage:"Edit the title of {projectName}"},{projectName:m}),children:t.jsx("h1",{className:"text-page-header text-balance",children:m})})]})}function mt({children:l,composer:e,postComposerContent:s,conversations:n,sizing:a,align:i,dragOverlay:c}){return t.jsx("div",{className:"flex min-h-full",children:t.jsx(De,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",fullHeight:!0,...a,children:t.jsxs(Fe,{className:"grid h-full [width:min(90cqw,var(--thread-content-max-width))] grid-rows-[1fr_minmax(0,180px)]",children:[t.jsxs("div",{className:q("flex min-w-0 flex-col gap-8",i==="top"?"mt-13 self-start":"self-center"),children:[t.jsxs("div",{className:"bg-token-bg-primary offset-padding-top-4 sticky top-(--header-height) z-10 flex flex-col gap-[inherit] max-md:top-0",children:[l,e,s]}),n,c]}),t.jsx("div",{})]})})})}function Nt(l){"use forget";const e=se.c(70),{clientThreadId:s,gizmoId:n,currentModelId:a,onRequestCompletion:i}=l,c=ne(),u=Re();let x;e[0]!==c||e[1]!==n||e[2]!==u?(x=Ae(c)(n,u),e[0]=c,e[1]=n,e[2]=u,e[3]=x):x=e[3];const m=x;let g;e[4]!==m?(g=()=>m.serverState$().data,e[4]=m,e[5]=g):g=e[5];const r=B(g);let o;e[6]!==i?(o=C=>{i(qe(C))},e[6]=i,e[7]=o):o=e[7];const d=H(o);let h;e[8]!==i?(h=async C=>{const V=await Ue(C);i(V)},e[8]=i,e[9]=h):h=e[9];const f=H(h);let j;e[10]!==c||e[11]!==m||e[12]!==r?(j=()=>{r&&me(c,et,{gizmo:r,project:m})},e[10]=c,e[11]=m,e[12]=r,e[13]=j):j=e[13];const b=H(j),v=de(),p=G(!1);let S;e[14]!==p?(S=()=>p(),e[14]=p,e[15]=S):S=e[15];const y=B(S),P=Ne(),w=we(),[I,E]=N.useState(!1),{onDropConversation:U,canDropConversation:_}=Ke(void 0,n);let X;e[16]===Symbol.for("react.memo_cache_sentinel")?(X=[],e[16]=X):X=e[16],N.useEffect(dt,X);let Q,Y;e[17]!==P?(Q=()=>{const C=Ve(P),V=C();return C.set(!0),()=>{C.set(V)}},Y=[P],e[17]=P,e[18]=Q,e[19]=Y):(Q=e[18],Y=e[19]),N.useEffect(Q,Y);let K;e[20]!==c||e[21]!==v||e[22]!==m||e[23]!==r?(K=()=>{r&&me(c,Ge,{submitButtonTitle:v.formatMessage(T.projectSettingsSubmitButton),gizmo:r,project:m})},e[20]=c,e[21]=v,e[22]=m,e[23]=r,e[24]=K):K=e[24];const oe=H(K);let Z;e[25]!==m||e[26]!==w?(Z=async C=>{try{await m.queueUpdate$(C)}catch(V){const fe=Ee(V);w?.warning(fe??"Error",{duration:5,hasCloseButton:!0})}},e[25]=m,e[26]=w,e[27]=Z):Z=e[27];const ie=H(Z);let J;e[28]!==s||e[29]!==a||e[30]!==d||e[31]!==f?(J=t.jsx(Qe,{clientThreadId:s,currentModelId:a,hideHeader:!0,isProjectThread:!0,isNewThread:!0,layoutMode:"center",onContinueGenerating:d,onRequestCompletion:f}),e[28]=s,e[29]=a,e[30]=d,e[31]=f,e[32]=J):J=e[32];const re=J;let ee;e[33]!==r?.gizmo?.conversation_copy_in_progress?(ee=r?.gizmo?.conversation_copy_in_progress===!0?t.jsx(He,{type:"info",content:t.jsx(W,{...T.projectCopyInProgressBanner}),icon:t.jsx(Ie,{className:"text-token-text-secondary h-5 w-5"})}):null,e[33]=r?.gizmo?.conversation_copy_in_progress,e[34]=ee):ee=e[34];const ae=ee;let k;e[35]!==_?(k=C=>{C.preventDefault(),_&&E(!0)},e[35]=_,e[36]=k):k=e[36];let M;e[37]!==_||e[38]!==U?(M=C=>{C.preventDefault(),_&&(E(!1),U())},e[37]=_,e[38]=U,e[39]=M):M=e[39];let $,z;e[40]!==_?($=C=>{C.preventDefault(),_&&E(!0)},z=C=>{C.preventDefault(),_&&E(!1)},e[40]=_,e[41]=$,e[42]=z):($=e[41],z=e[42]);const le=y?"top":"center";let D;e[43]!==p||e[44]!==r?(D=r&&t.jsx(tt,{gizmo:r,hasConversations$:p}),e[43]=p,e[44]=r,e[45]=D):D=e[45];let F;e[46]!==I||e[47]!==r?(F=I&&t.jsx(ut,{gizmo:r}),e[46]=I,e[47]=r,e[48]=F):F=e[48];let O;e[49]!==b||e[50]!==oe||e[51]!==ie||e[52]!==r?(O=t.jsx(rt,{projectData:r,onRequestEdit:oe,onRequestAddFiles:b,onRequestUpdateProject:ie}),e[49]=b,e[50]=oe,e[51]=ie,e[52]=r,e[53]=O):O=e[53];let L;e[54]!==re||e[55]!==ae||e[56]!==le||e[57]!==D||e[58]!==F||e[59]!==O?(L=t.jsx(mt,{align:le,composer:re,postComposerContent:ae,conversations:D,dragOverlay:F,children:O}),e[54]=re,e[55]=ae,e[56]=le,e[57]=D,e[58]=F,e[59]=O,e[60]=L):L=e[60];let R;e[61]!==k||e[62]!==M||e[63]!==$||e[64]!==z||e[65]!==L?(R=t.jsx("div",{onDragOver:k,onDrop:M,onDragEnter:$,onDragLeave:z,children:L}),e[61]=k,e[62]=M,e[63]=$,e[64]=z,e[65]=L,e[66]=R):R=e[66];let te;return e[67]!==m||e[68]!==R?(te=t.jsx(ue,{value:m,children:R}),e[67]=m,e[68]=R,e[69]=te):te=e[69],te}function dt(){Be()}function ut({gizmo:l}){return t.jsxs(Xe,{children:[t.jsx(We,{className:"h-12 w-12",style:{color:"var(--icon-accent)"}}),t.jsx("h3",{className:"text-center",children:t.jsx(W,{...T.addConversationToNamedSnorlax,values:{projectName:l?.gizmo.display.name??"project"}})}),t.jsx("h4",{className:"text-center",children:t.jsx(W,{...T.moveConversation})})]})}export{Nt as ProjectHomePage};
//# sourceMappingURL=i35aoaaufamrj1zn.js.map
