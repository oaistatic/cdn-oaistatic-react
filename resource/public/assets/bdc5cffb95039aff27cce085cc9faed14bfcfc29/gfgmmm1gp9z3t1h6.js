const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/glocjbeujfzb532e.js","assets/cs7toih8jegb7teq.js"])))=>i.map(i=>d[i]);
import{dK as t,cx as be,e as Q,p as Qe,C as E,be as F,f1 as Ke,av as Ye,G as we,dv as te,jV as De,aw as Ve,ax as He,dN as m,bV as Me,bQ as Xe,bh as Je,pM as Ze,dO as D,dx as $e,pN as es,dQ as se,z as ie,d1 as _,dP as C,pO as H,pP as ss,de as xe,B as O,u as as,d as fe,hF as ts,pQ as is,ej as rs,pR as ns,R as Se}from"./dmck639k4dv7claj.js";import{r as k,j as e,e as K,M as r,f as re,p as g,d as Ne,u as ls}from"./cs7toih8jegb7teq.js";import{hs as os,ht as cs,bH as ds,hu as he,bu as ae,b2 as us,aj as x,hv as _e,hw as ps,ak as je,Z as ms,hx as gs,ff as xs,bz as fs,hy as hs,hz as js,a5 as ys,hA as vs}from"./hnw079jsdm76umup.js";import{C as ks}from"./ce8zjbfxg2hovnx5.js";import{S as V}from"./cq7nh9aqi3zpn79u.js";function Pe(s){return s==t.User||s==t.Group||s==t.Email?t.Private:s==t.WorkspaceLink?t.Workspace:s}function T(s,a){return s=Pe(s),a===void 0?!1:a.some(n=>n.recipient===s&&n.allowed)}function ne(s,a){return a===void 0?[]:(s=Pe(s),a.find(o=>o.recipient===s)?.moderated_fields)}function $(s,a){const n=ne(s,a);return n&&n.length>0}const ye=be.a`bold underline`,bs=be.textarea`w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32`;var Ce=(s=>(s[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s))(Ce||{}),Re=(s=>(s[s.None=0]="None",s[s.PublishBlocked=1]="PublishBlocked",s[s.RemovedFromMarketplace=2]="RemovedFromMarketplace",s[s.RemovedFromPublic=3]="RemovedFromPublic",s[s.RemovedFromPrivate=4]="RemovedFromPrivate",s[s.Recategorized=5]="Recategorized",s))(Re||{});function Os(s){if(!s)return;const a=s.gizmo.appeal_info?.state.kind==="appeal_sent",n=ws(s.gizmo.share_recipient,s.gizmo.sharing_targets);return{sharingRecipient:s.gizmo.share_recipient,categories:s.gizmo.categories,gizmoId:s.gizmo.id,moderationType:n,sharingTargets:s.gizmo.sharing_targets,showModal:a?2:n!==0?1:0}}const ve={[t.User]:t.Private,[t.Group]:t.Private,[t.Email]:t.Private,[t.WorkspaceLink]:t.Workspace};function ws(s,a=[]){const n=new Set(a.filter(c=>c.allowed).map(c=>c.recipient));if(!s||(s in ve&&(s=ve[s]),n.has(s)))return 0;const o=n.has(t.Private)||n.has(t.Workspace),l=n.has(t.Link)||n.has(t.Marketplace);return s===t.Marketplace&&l?2:!l&&o?3:4}function ke(s){switch(s){case 0:case 1:return g({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case 2:return g({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case 3:return g({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case 4:return g({id:"gizmo.appeals.removedFromPrivateTitle",defaultMessage:"Your GPT has been removed from private view"});case 5:return g({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"})}}function Ms(s){switch(s){case"profile_picture":return g({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return g({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return g({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return g({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return g({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return g({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return g({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return g({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return g({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"GPT Content"})}}function Ss(s){switch(s){case t.Private:case t.Workspace:return g({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case t.Link:return g({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case t.Marketplace:return g({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:De(s)}}function Te({sharingRecipient:s,moderatedFields:a,appealAvailable:n}){const o=a.length;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(r,{...Ss(s),values:{usagePolicyLink:l=>e.jsx(ye,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:l})}})," ",o>0&&e.jsx(r,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:`{numModeratedFields, plural,
              one {See below for the specific issue:}
              other {See below for the specific issues:}
            }`,values:{numModeratedFields:o}})]}),o>0&&a?.map(l=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:e.jsx(r,{...Ms(l.name)})}),e.jsx("ul",{className:"list-disc ps-5",children:l.reasons.map(c=>e.jsxs("li",{children:[c.description," ",c.link?e.jsx(ye,{href:c.link,target:"_blank",rel:"noreferrer",children:e.jsx(r,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},c.description))})]})),n&&e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}function Ns({gizmoId:s,sharingRecipient:a,categories:n,moderationType:o,sharingTargets:l,appealAvailable:c,onClose:f,onAppealSubmitted:b}){const j=K(),[h,L]=k.useState(""),[M,S]=k.useState(0),[z,w]=k.useState(!1),u=re(),N=async()=>{w(!0);try{await te.postGizmoAppeal(u,s,h,a,n),S(2),b?.()}finally{w(!1)}},v=ne(a,l),W=v?.length??0,d=Q(),X=we(d);if(W==0&&X?.isEnterprisey())return e.jsx(E,{testId:"modal-gizmo-appeal-available",title:j.formatMessage(ke(o)),isOpen:!0,onClose:f,showCloseButton:!0,type:"warning",primaryButton:e.jsx(F.Button,{color:"primary",onClick:f,children:e.jsx(r,{id:"wEsAOU",defaultMessage:"OK"})}),children:e.jsx("p",{className:"text-sm",children:e.jsx(r,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(M){case 0:return e.jsx(E,{testId:"modal-gizmo-appeal-available",title:j.formatMessage(ke(o)),isOpen:!0,onClose:f,showCloseButton:!0,primaryButton:e.jsx(F.Button,{color:"primary",onClick:f,children:e.jsx(r,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:c?e.jsx(F.Button,{onClick:()=>S(1),children:e.jsx(r,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx(Te,{sharingRecipient:a,moderatedFields:v??[],appealAvailable:c})})});case 1:return e.jsx(E,{testId:"modal-gizmo-appeal-form",title:j.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:f,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:e.jsx(F.Button,{color:"primary",onClick:N,disabled:z||h.trim().length===0,children:e.jsx(r,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:e.jsx(F.Button,{onClick:()=>S(0),children:e.jsx(r,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),e.jsx(bs,{value:h,onChange:I=>L(I.target.value)})]})});case 2:return e.jsx(e.Fragment,{})}}function _s({onClose:s}){const a=K();return e.jsx(E,{testId:"modal-gizmo-appeal-submitted",title:a.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:s,showCloseButton:!0,primaryButton:e.jsx(F.Button,{color:"primary",onClick:s,children:e.jsx(r,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx("div",{children:e.jsx(r,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function Ps({gizmoId:s,onClose:a}){const{data:n}=Ke(s,!0),o=re(),l=async()=>{await te.postGizmoCancelAppeal(o,s)};return e.jsx(E,{testId:"modal-gizmo-appeal-sent",isOpen:!0,onClose:Ye,primaryButton:e.jsx(F.Button,{color:"primary",onClick:()=>{l(),a?.()},children:e.jsx(r,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("h2",{className:"text-lg font-semibold",children:e.jsx(r,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:n?.gizmo.display.name}})})]})})}function qs({appealState:s,onAppealClose:a,onAppealSubmitted:n}){const o=Q(),l=Qe(o,"4226692983"),[c,f]=k.useState(!1);return c?e.jsx(_s,{onClose:()=>{f(!1),n?.()}}):e.jsxs(e.Fragment,{children:[s?.showModal==2&&e.jsx(Ps,{gizmoId:s.gizmoId,onClose:a}),s?.showModal==1&&e.jsx(Ns,{gizmoId:s.gizmoId,sharingRecipient:s.sharingRecipient,categories:s.categories,moderationType:s.moderationType,sharingTargets:s.sharingTargets,appealAvailable:l,onClose:()=>a?.(),onAppealSubmitted:()=>f(!0)})]})}const ze=Ve(()=>He(()=>import("./glocjbeujfzb532e.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication)),Cs=()=>[C,H,ss];function Rs(s,a){return s.type===m.USER?s.user_id===a.user_id:s.type===m.GROUP?s.group_id===a.group_id:s.type===m.EMAIL?a.type===m.EMAIL&&s.user_email.toLowerCase()===a.user_email.toLowerCase():s.type===a.type}const Ts={[m.USER]:t.User,[m.GROUP]:t.Group,[m.EMAIL]:t.Email,[m.WORKSPACE]:t.Workspace,[m.ALL]:t.Marketplace};function zs(s){const a=Ts[s.type];if(!a)throw new Error("Unknown sharing subject type: "+s.type);return{...s,type:a}}function Qs({gizmo:s,publishedGizmo:a,updateGizmo:n,promoteGizmo:o,appealGizmo:l,setAppealState:c,showActionsModal:f,shareOnly:b,onClose:j,workspaceOwner:h=!1}){const L=Q(),M=K(),S=Me(),z=Xe(),w=z?.data?.name??"your workspace",u=Je(),N=Ze(),[v,W]=k.useState(void 0);k.useEffect(()=>{if(v==null)if(a?.gizmo.display.categories&&a?.gizmo.display.categories.length>0){const i=N.data?.categories.find(p=>p.id===a?.gizmo.display.categories[0]);i&&W(i)}else N.data!=null&&W(N.data.categories[N.data.categories.length-1])},[N.data,v,a]);const[d,X]=k.useState(s.sharingRecipient??t.Private),[y,I]=k.useState(s.sharing?.subjects??[]),[le,Ue]=k.useState(null),[oe,ce]=k.useState(!1),J=k.useRef(null),de=k.useRef(y.length);k.useEffect(()=>{y.length>de.current&&requestAnimationFrame(()=>{J.current?.scrollTo({top:J.current.scrollHeight,behavior:"smooth"})}),de.current=y.length},[y]);const Be=k.useCallback(()=>!D(s.sharing?.subjects,y)||s.sharingRecipient!==d,[s.sharing,s.sharingRecipient,d,y]),A=re(),ue=os(s,d,v?.id??void 0),Fe=ue.includes(cs.MissingPublicActionPrivacyPolicyURL),Ee=s.tools.find(i=>i.type===$e.JIT_PLUGIN&&!i.metadata.privacy_policy_url);if(le)return e.jsx(Ls,{publishedGizmo:le,sharing:{recipient:d,subjects:y},workspaceName:w,onClose:j});function Ge(i){y.find(p=>Rs(p,i))||I([...y,i])}const U=es(y);function Z(i){const p=y.filter(R=>[m.WORKSPACE,m.ALL].indexOf(R.type)===-1);i!=null&&p.push(i),I(p)}function We(i){switch(X(i),i){case t.Marketplace:case t.Link:Z({type:m.ALL,capabilities:C});break;case t.Workspace:case t.WorkspaceLink:Z({type:m.WORKSPACE,capabilities:C});break;default:Z(null)}}function pe(i){U!=null&&I(y.map(p=>p===U?{...p,capabilities:i}:p))}function Oe(i,p,R){return i.type===m.USER&&i.user_id.indexOf("__")===-1?{...i,user_id:i.user_id+"__"+z?.getWorkspaceId()}:i}async function qe(i,p){if(oe)return;if(i&&!p)throw new Error("Cannot share a gizmo that hasn't been promoted before");if(!v)return;ce(!0);let B=y.map(Oe).map(zs);if(B=ns(d,B,U?.capabilities??C),h)return!z||!p?(S.warning("Unable to change sharing settings"),j()):(await Se.safePost("/accounts/{account_id}/gpts/{gizmo_id}/share",{parameters:{path:{account_id:z.id,gizmo_id:p}},requestBody:{sharing:B}}),S.success(M.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),A.invalidateQueries({queryKey:["workspace"]}),j());if(i){if(!p||!a)throw new Error("No gizmo ID to share");try{const P={sharing:B};v&&(P.categories=[v.id]);const Y=await te.shareGizmo(p,P);Y.error?$(d,Y.sharing_targets)?(c?.({gizmoId:a.gizmo.id,sharingRecipient:d,categories:a.gizmo.display.categories,moderationType:Re.PublishBlocked,sharingTargets:Y.sharing_targets,showModal:Ce.AppealAvailable}),j()):S.warning(M.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(A.setQueryData(["gizmo",{gizmoId:a.gizmo.id},{draft:!1}],ge=>Y.resource),n?.(ge=>({...ge,sharingRecipient:d})),S.success(M.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),j())}catch{return S.warning(M.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),j()}}else{if(o){const P=await o({subjects:B,recipient:d},v.id);p||(p=P?.gizmo.id),Ue(P??null),n?.({liveVersion:P?.gizmo.live_version??void 0})}A.invalidateQueries({queryKey:["gizmo",{gizmoId:p}]})}ce(!1),A.invalidateQueries({queryKey:["gizmos"]}),A.refetchQueries({queryKey:["gizmos","discovery"]}),A.refetchQueries({queryKey:["gizmo",{gizmoId:p}]}),A.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:p}]}),A.invalidateQueries({queryKey:["workspace"]}),n?.({sharing:{recipient:d,subjects:y},sharingRecipient:d},!1)}const me=!a||Us(a.gizmo.author.user_id.split("__")[0],u?.id);return e.jsx(E,{testId:"modal-share-gizmo",type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:j,primaryButton:$(d,s.sharingTargets)?e.jsx(O,{onClick:()=>l(d,v?.id),children:e.jsx(r,{id:"HRzqKK",defaultMessage:"Appeal"})}):e.jsx(O,{onClick:()=>qe(b,a?.gizmo.id),loading:oe,disabled:ue.length>0||!T(d,s.sharingTargets),children:b?e.jsx(r,{id:"BEKjVh",defaultMessage:"Save"}):e.jsx(r,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:e.jsxs(e.Fragment,{children:[Be()&&e.jsx("div",{className:"text-token-text-secondary absolute start-6 bottom-8 text-sm",children:e.jsx(r,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),a&&e.jsx(O,{color:"secondary",onClick:i=>_e(L,a,S,i,M.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(r,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:M.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(Is,{onAdd:i=>Ge(i),publishedGizmo:a}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(r,{id:"bNQXcV",defaultMessage:"Share with..."})}),e.jsxs("div",{ref:J,className:"max-h-[200px] space-y-2 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx("div",{className:"shrink-0 grow-0 self-start",children:me?e.jsx(ds,{user:u}):e.jsx(he,{name:a.gizmo.author.display_name??"User",initialsCount:2})}),e.jsx("div",{className:"grow text-base font-semibold",children:me?e.jsxs("div",{className:"flex flex-col",children:[e.jsx(r,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:u?.name}}),e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:u?.email})]}):e.jsx(r,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:a.gizmo.author.display_name}})})]}),y.map((i,p)=>se(i)&&e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx(he,{name:i.type===m.GROUP?i.group_name:`${i.user_name} ${i.user_email}`,initialsCount:i.type===m.USER?2:1,className:ie("shrink-0 grow-0",i.type===m.USER&&"self-start")}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 text-base font-semibold",children:i.type===m.GROUP?i.group_name:i.user_name}),i.type===m.GROUP&&i.is_scim_managed&&e.jsx(ze,{})]}),i.type===m.USER&&e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:i.user_email})]}),e.jsxs(_.Root,{children:[e.jsxs(_.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[e.jsx(r,{...q(i.capabilities)}),e.jsx(ae,{className:"icon"})]}),e.jsx(_.Portal,{children:e.jsxs(_.Content,{className:"max-w-[320px]",children:[Cs().map((R,B)=>e.jsx(ee,{capabilities:R,selected:D(R,i.capabilities),onClick:()=>{I(y.map(P=>P===i?{...P,capabilities:R}:P))}},B)),e.jsx(_.Separator,{className:"my-2"}),e.jsx(_.Item,{onClick:()=>I(y.filter(R=>R!==i)),color:"danger",icon:us,children:e.jsx(r,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},p))]}),e.jsx("hr",{className:"border-token-border-medium"}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(r,{id:"uqD7Y8",defaultMessage:"Access"})}),e.jsxs("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[e.jsxs(x.Root,{value:d,onValueChange:i=>We(i),children:[e.jsxs(x.Trigger,{children:[e.jsx(x.Value,{}),e.jsx(x.Icon,{})]}),e.jsx(x.Portal,{children:e.jsxs(x.Content,{children:[e.jsxs(x.Group,{children:[e.jsx(x.Label,{children:e.jsx(r,{id:"YIQwaP",defaultMessage:"Private"})}),d===t.User?e.jsx(x.Item,{value:t.User,children:e.jsx(G,{shareLevel:t.User,workspaceName:w})}):e.jsx(x.Item,{value:t.Private,children:e.jsx(G,{shareLevel:t.Private,workspaceName:w})})]}),e.jsx(x.Separator,{}),e.jsx(xe,{triggerAs:null,label:M.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:T("workspace",s.sharingTargets),children:e.jsxs(x.Group,{children:[e.jsx(x.Label,{children:w}),e.jsx(x.Item,{value:t.WorkspaceLink,disabled:!T(t.WorkspaceLink,s.sharingTargets)&&!T(t.Workspace,s.sharingTargets),children:e.jsx(G,{shareLevel:t.WorkspaceLink,workspaceName:w})}),e.jsx(x.Item,{value:t.Workspace,disabled:!T("workspace",s.sharingTargets),children:e.jsx(G,{shareLevel:t.Workspace,workspaceName:w})})]})}),e.jsx(x.Separator,{}),e.jsx(xe,{triggerAs:null,label:M.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:T("marketplace",s.sharingTargets),children:e.jsxs(x.Group,{children:[e.jsx(x.Label,{children:e.jsx(r,{id:"PjY9bi",defaultMessage:"Public"})}),e.jsx(x.Item,{value:t.Link,disabled:!T("link",s.sharingTargets),children:e.jsx(G,{shareLevel:t.Link,workspaceName:w})}),e.jsx(x.Item,{disabled:!T("marketplace",s.sharingTargets),value:t.Marketplace,children:e.jsx(G,{shareLevel:t.Marketplace,workspaceName:w})})]})})]})})]}),d!==t.Private&&d!==t.User&&e.jsxs(_.Root,{children:[e.jsxs(_.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[U==null?e.jsx(r,{...q(C)}):e.jsx(r,{...q(U.capabilities)}),e.jsx(ae,{className:"icon"})]}),e.jsx(_.Portal,{children:e.jsxs(_.Content,{className:"max-w-[320px]",children:[e.jsx(ee,{onClick:()=>pe(C),capabilities:C,selected:D(U?.capabilities,C)}),d!==t.Marketplace&&d!==t.Link&&e.jsx(ee,{onClick:()=>pe(H),capabilities:H,selected:D(U?.capabilities,H)})]})})]})]}),Fe&&e.jsx("div",{className:"text-xs text-red-500",children:e.jsx(r,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:i=>e.jsx("button",{onClick:()=>{f?.(Ee?.metadata.action_id),j()},className:"underline",children:i})}})}),(d===t.Marketplace||d===t.Workspace)&&(T(d,s.sharingTargets)?e.jsx(Ie,{gizmo:s,category:v?.id,categories:N.data?.categories,onCategoryChange:i=>W(i)}):$(d,s.sharingTargets)?e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(Te,{sharingRecipient:d,moderatedFields:ne(d,s.sharingTargets)??[],appealAvailable:!0})}):e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(r,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}const Ae=Ne({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},email:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),As=Ne({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function q(s){return s.can_write?g({id:"SubCqD",defaultMessage:"Can edit"}):s.can_view_config?g({id:"V6OjbX",defaultMessage:"Can view settings"}):s.can_read?g({id:"/0j34W",defaultMessage:"Can chat"}):g({id:"x2E8ET",defaultMessage:"Unknown"})}function ee({capabilities:s,selected:a,onClick:n}){let o=null;s.can_write?o=js:s.can_view_config?o=ys:s.can_read&&(o=vs);const l=s.can_write?e.jsx(r,{id:"wKFMT1",defaultMessage:"Edit settings, duplicate, and chat"}):s.can_view_config?e.jsx(r,{id:"Y/J4TZ",defaultMessage:"See settings, duplicate, and chat"}):s.can_read?e.jsx(r,{id:"PvgEQP",defaultMessage:"Chat with this GPT only"}):null;return e.jsxs(_.Item,{className:"flex h-auto flex-row items-center px-3 py-3",onClick:n,icon:o,children:[e.jsxs("div",{className:"me-1 flex grow flex-col",children:[e.jsx("span",{className:"mb-0.5 text-base leading-tight",children:e.jsx(r,{...q(s)})}),e.jsx("span",{className:"text-token-text-secondary text-xs",children:l})]}),e.jsx(ts,{className:ie("icon-lg shrink-0",!a&&"invisible")})]})}const Le={private:V,user:V,group:V,email:V,workspace_link:je,workspace:ms,link:je,marketplace:ps};function G({shareLevel:s,workspaceName:a,hasInviteSharing:n=!0}){(s===t.User||s===t.Group||s===t.Email)&&(s=t.Private);const o=Le[s];return e.jsxs("div",{className:"flex flex-row items-center gap-3 text-sm",children:[e.jsx(o,{className:"icon text-token-text-secondary"}),e.jsx("div",{className:"pt-px text-start",children:!n&&s===t.Private?e.jsx(r,{id:"vVJhYB",defaultMessage:"Only me"}):e.jsx(r,{...Ae[s],values:{workspaceName:a}})})]})}function Ls({publishedGizmo:s,sharing:a,workspaceName:n,onClose:o}){const l=Q(),c=a.recipient,f=Le[c],b=K(),j=Me();return e.jsxs(E,{testId:"modal-gizmo-updated",isOpen:!0,onClose:o,showCloseButton:!0,className:"w-[304px]",title:e.jsx(r,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:e.jsx(O,{onClick:()=>{window.location.href=`/g/${s.gizmo.id}`},children:e.jsx(r,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:e.jsx(O,{color:"secondary",onClick:h=>_e(l,s,j,h,b.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(r,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[e.jsx(Ie,{gizmo:{profilePictureUrl:s.gizmo.display.profile_picture_url??void 0,name:s.gizmo.display.name}}),a.subjects.filter(h=>se(h)).length>0&&e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(r,{id:"/paYH9",defaultMessage:"Shared with"})}),a.subjects&&a.subjects.map((h,L)=>se(h)&&e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:h.type===m.GROUP?h.group_name:h.user_name}),h.type===m.USER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:h.user_email})]})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(r,{...q(h.capabilities)})})]},L))]}),e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(r,{id:"q9XNZ7",defaultMessage:"Access"})}),e.jsxs("div",{className:"ms-[3px] flex flex-row items-center py-3 text-start text-base font-semibold",children:[e.jsx(f,{className:"md:icon-lg me-3 h-6 w-6 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(r,{...As[c]??Ae[c],values:{workspaceName:n}})}),(c===t.Workspace||c===t.Marketplace)&&e.jsx("span",{className:"text-token-text-secondary text-xs"})]})]})]})]})}function Ie({gizmo:s,category:a,categories:n,onCategoryChange:o}){const{data:l,isLoading:c}=is(),f=n?.find(b=>b.id===a);return e.jsxs("div",{children:[e.jsxs("div",{className:ie("bg-token-main-surface-secondary mb-[1px] flex flex-row items-center space-x-2 p-4",c&&"invisible",n?"rounded-t-lg":"rounded-lg"),children:[e.jsx(fs,{isFirstParty:!1,className:"h-11 w-11",src:s.profilePictureUrl}),e.jsxs("div",{className:"flex grow flex-col space-y-0",children:[e.jsx("span",{className:"text-base font-semibold",children:s.name}),e.jsx(hs,{builderName:l?.display_name,builderUrl:l?.website_url,socials:[l?.socials.linkedin,l?.socials.github,l?.socials.twitter].filter(b=>b!=null),className:"text-token-text-secondary text-xs"})]})]}),n&&e.jsxs("div",{className:"bg-token-main-surface-secondary flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg px-4 text-base",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(r,{id:"JcA4/t",defaultMessage:"Category"})}),e.jsx("div",{className:"text-token-text-secondary",children:o?e.jsx(rs,{size:"small",triggerButton:e.jsxs("button",{className:"flex items-center gap-1",children:[f?.title,e.jsx(ae,{className:"icon"})]}),children:n.map((b,j)=>e.jsx(_.Item,{onClick:()=>o(b),children:b.title},j))}):e.jsx("span",{className:"text-token-text-secondary",children:f?.title})})]})]})}function Is({onAdd:s,publishedGizmo:a}){const n=K(),o=Q(),l=we(o),[c,f]=k.useState(""),j=gs(l?.id,0,c,5).data?.items.filter(u=>u.account_user_id!==a?.gizmo.author.user_id),{data:h}=ls({queryKey:[l?.id,"groups","filtered",c],queryFn:()=>Se.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:l.id},query:{query:c,offset:0,orderby:"@score",limit:20}}}),enabled:c.trim()!==""&&l!=null&&!!l.getWorkspaceId()});function L(u,N,v){s({type:m.GROUP,group_id:u,group_name:N,capabilities:{...C},is_scim_managed:v}),f("")}function M(u,N,v){l&&(s({type:m.USER,user_id:u,user_name:N,user_email:v,capabilities:{...C}}),f(""))}const S=l?.isEnterprisey()?n.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):n.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),{eligible:z,markAsViewed:w}=as(fe.hasSeenMultipleGPTEditorsTooltip);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex w-full flex-row space-x-3",children:e.jsx(xs,{announcementKey:fe.hasSeenMultipleGPTEditorsTooltip,show:z,side:"right",align:"center",className:"w-full",sideOffset:0,contentClassName:"z-100",childrenWrapperClassName:"w-full",theme:"bright",dismissOnOutsideClick:!0,badge:"new",description:n.formatMessage({id:"SR33A6",defaultMessage:"You can now add editors to collaborate on your GPTs."}),onDismiss:w,children:e.jsx(ks,{label:S,name:"share-with-input",inputValue:c,onInputChange:f,suggestions:[...j?.map(u=>({id:u.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>M(u.account_user_id,u.name,u.email??""),children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full font-semibold",children:u.name}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:u.email})]})}))??[],...h?.items.map(u=>({id:u.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>L(u.id,u.name,u.is_scim_managed??!1),children:e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 font-semibold",children:u.name}),u.is_scim_managed&&e.jsx(ze,{})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(r,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:u.num_members}})})]})}))??[]]})})})})}function Us(s,a){return s===void 0||a===void 0?!1:s.split("__")[0]===a.split("__")[0]}export{Ce as A,Ie as G,Re as M,Qs as S,G as a,Le as b,Ls as c,qs as d,Os as g,T as i,zs as s};
//# sourceMappingURL=gfgmmm1gp9z3t1h6.js.map
