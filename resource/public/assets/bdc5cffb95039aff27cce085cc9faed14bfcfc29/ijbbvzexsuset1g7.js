import{j as e,M as u,e as H,A as S,m as T}from"./cs7toih8jegb7teq.js";import{S as Y}from"./j016trxwqzgsccq0.js";import{jX as W,kY as q,hW as O,fu as v,i6 as m,be as b,kZ as J,k_ as R,k$ as X,l0 as k,l1 as M,l2 as A,j as Z,cH as C,l3 as K,l4 as Q}from"./hnw079jsdm76umup.js";import{ax as N,z as r,g_ as U,nV as $,e as ee,p as se,mY as te,hY as ae,ej as oe,d1 as g,qK as ne,ek as ie,a0 as re,P as ce,de as le}from"./dmck639k4dv7claj.js";import{c as y}from"./dupxx6qfa09nz1fw.js";import{S as D}from"./l32pbw1kg88xu4to.js";const h=y({animationLoader:()=>N(()=>import("./doitflbvj988jrtm.js"),[]),StaticIcon:W}),me=y({animationLoader:()=>N(()=>import("./ecrufyyzn0h8291m.js"),[]),StaticIcon:q}),P=y({animationLoader:()=>N(()=>import("./hvsc20zw1oied9k8.js"),[]),StaticIcon:O}),xe=({chunk:s,size:c="small",isAnimated:i=!1,className:a,isHeadline:l})=>{const t=c==="small"?r("h-[15px] w-[15px]",a):r("icon",a);if(!s)return l?e.jsx(v,{className:t}):null;switch(s.type===m.Glaux&&(s.queries.length>1?b:J(s.queries[0].connectorName)??b),s.type){case m.N7jupdAPI:return s.action==="n7jupd_as"?e.jsx(h,{matchTextColor:!0,className:t}):s.action==="n7jupd_ag"?e.jsx(M,{className:t}):s.action==="n7jupd_cf"&&s.source?e.jsx(A,{connector:s.source}):s.action==="n7jupd_cs"&&s.source?e.jsx(A,{connector:s.source}):e.jsx(v,{className:t});case m.Browsing:if(s.sources.length>0){const o=s.sources.find(x=>x in k);if(o){const x=k[o];return e.jsx(x,{className:t},o)}}return i?e.jsx(h,{matchTextColor:!0,className:t}):e.jsx(M,{className:t});case m.Search:return i?e.jsx(P,{matchTextColor:!0,className:t}):e.jsx(O,{className:t});case m.CodeAnalysis:return i?e.jsx(h,{matchTextColor:!0,className:t}):e.jsx(X,{className:t});case m.ImageAnalysis:return i?e.jsx(me,{matchTextColor:!0,className:t}):e.jsx(q,{className:t});case m.Recap:return e.jsx($,{className:t});case m.Glaux:return null;default:return s.type===m.ComputerOutput?s.messages.every(o=>o.author.name===U.n7jupd_m)?e.jsx(D,{className:t}):i?e.jsx(P,{matchTextColor:!0,className:t}):e.jsx(R,{className:t}):l?e.jsx(v,{className:r("-ms-[3px]",t)}):e.jsx("div",{className:r("bg-token-interactive-icon-tertiary-default h-[6px] w-[6px] rounded-full",a)})}},de=()=>{const s=ee();return se(s,"3576660380")},ue=({isExpanded:s,agentVisualMode:c,setAgentVisualMode:i,isStreaming:a,isStopping:l,isKAUR1BR5:t})=>{const o=s||a,x=te(),{open:j}=ae(),{clientThreadId:p}=Z();return e.jsxs("div",{className:r("flex flex-1 flex-row items-center gap-2 px-1",a?"justify-end":"justify-between"),children:[!a&&e.jsx(C,{className:r("icon-sm text-token-text-secondary inline align-middle transition-transform",s&&"rotate-90")}),!l&&o&&e.jsx("div",{className:"flex flex-row items-center justify-center gap-2",children:e.jsxs(oe,{side:"bottom",size:"small",contentClassName:"text-sm",triggerButton:e.jsx("button",{onPointerDown:n=>n.stopPropagation(),onClick:n=>n.stopPropagation(),className:"hover:bg-token-bg-tertiary flex max-h-6 items-center justify-center overflow-visible rounded-md p-1",children:e.jsx(ie,{className:"text-token-text-secondary size-5"})}),children:[c==="visual-cot"&&e.jsxs(g.Item,{onClick:n=>{n.stopPropagation(),i?.("list-cot"),L("list-cot")},children:[e.jsx(K,{className:"icon"}),e.jsx(u,{id:"cot.listView",defaultMessage:"Activity"})]}),c==="list-cot"&&e.jsxs(g.Item,{onClick:n=>{n.stopPropagation(),i?.("visual-cot"),L("visual-cot")},children:[e.jsx(D,{className:"icon"}),e.jsx(u,{id:"cot.desktopView",defaultMessage:"Desktop view"})]}),!x&&e.jsxs(g.Item,{onClick:n=>{n.stopPropagation(),j()},children:[e.jsx(R,{className:"icon"}),t?e.jsx(u,{id:"qMkIYk",defaultMessage:"Open tabs"}):e.jsx(u,{id:"cot.takeOverBrowser",defaultMessage:"Take over browser"})]}),!x&&a&&e.jsxs(g.Item,{onClick:()=>ne(p,void 0,{clientInitiated:!0,reason:"agent_cot_stop",isLastTurnAgent:!0}),children:[e.jsx(Q,{className:"icon"}),e.jsx(u,{id:"cot.stop",defaultMessage:"Stop"})]})]})})]})},L=s=>{re.addAction("agent.cot_view_change",{cot_view:s}),ce.logEvent("Agent CoT View Change",{cot_view:s})},ye=({isExpanded:s=!1,isExpandDisabled:c=!1,showChunkIcon:i=!0,isComplete:a,latestHeadline:l,latestChunk:t,counters:o,onToggleExpanded:x,skipTitle:j,onSkip:p,shouldDisplayVisualCoT:n=!1,agentVisualMode:V,setAgentVisualMode:E,isStreaming:_,interruptionInProgress:z,isAgentVisualCoT:B=!1,isKAUR1BR5:F=!1,wasInterrupted:G=!1})=>{const f=H(),w=l&&l.length>0?l:a?G?f.formatMessage({id:"tD55er",defaultMessage:"Stopped thinking"}):f.formatMessage({id:"nkvZJE",defaultMessage:"Thought"}):f.formatMessage({id:"hgnsat",defaultMessage:"Thinking"}),d=de();return e.jsx(le,{open:a&&o&&(o.queries>0||o.sources>0)?void 0:!1,align:"start",side:"bottom",label:o&&e.jsx(ge,{counters:o}),children:e.jsx("div",{className:"relative w-full text-start",children:e.jsxs("div",{className:r("flex w-full items-start justify-between text-start",d&&"flex-col"),children:[e.jsxs("button",{disabled:c,onClick:x,className:r("flex w-full items-center gap-0.5",(s||_)&&n&&"justify-between"),children:[e.jsx("span",{className:r(!a&&"loading-shimmer font-medium"),children:e.jsx(S,{mode:"popLayout",children:e.jsxs(T.span,{className:r("flex items-center gap-1 text-start align-middle",d&&"truncate",a&&(c?"text-token-text-secondary":"text-token-text-secondary hover:text-token-text-primary")),initial:d?!1:{opacity:0},animate:{opacity:1},exit:d?void 0:{opacity:0,overflow:"hidden",whiteSpace:"nowrap"},transition:{type:"spring",duration:.3},children:[i&&t?.type!==m.Recap&&e.jsx(xe,{chunk:t,isAnimated:!a,size:"medium",className:"text-token-text-secondary",isHeadline:!0}),w]},w)})}),(!c||n)&&(B||!d)&&e.jsx(pe,{isExpanded:s,shouldDisplayVisualCoT:n,agentVisualMode:V,setAgentVisualMode:E,isStreaming:_,isStopping:!!z,isKAUR1BR5:F})]}),e.jsx(S,{mode:"popLayout",children:!a&&!s&&p&&e.jsx(T.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},transition:{type:"spring",duration:.3},children:e.jsxs("button",{onClick:I=>{p(I),I.stopPropagation()},className:"text-token-text-tertiary hover:text-token-text-primary whitespace-nowrap",children:[!d&&e.jsx(Y,{className:"icon-sm inline align-middle"}),e.jsxs("span",{className:r(d?"flex items-center gap-0.5":"ms-1"),children:[j??e.jsx(u,{id:"+sOejI",defaultMessage:"Skip"}),d&&e.jsx(C,{className:"icon-xs"})]})]})})})]})})})},pe=({isExpanded:s,shouldDisplayVisualCoT:c,agentVisualMode:i,setAgentVisualMode:a,isStreaming:l,isStopping:t,isKAUR1BR5:o})=>c?e.jsx(ue,{isExpanded:s,agentVisualMode:i,setAgentVisualMode:a,isStreaming:l,isStopping:t,isKAUR1BR5:o}):e.jsx(C,{className:r("icon-sm text-token-text-secondary inline align-middle transition-transform",s&&"rotate-90")}),ge=({counters:s})=>e.jsx(e.Fragment,{children:(s.queries>0||s.sources>0)&&e.jsxs(e.Fragment,{children:[s.queries>0&&e.jsx(u,{id:"JPkpiw",defaultMessage:"{queriesCount} searches",values:{queriesCount:s.queries}}),s.queries>0&&s.sources>0&&e.jsxs(e.Fragment,{children:[" ","Â·"," "]}),s.sources>0&&e.jsx(u,{id:"QnBAXR",defaultMessage:"{sourcesCount} sources",values:{sourcesCount:s.sources}})]})});export{ye as C,xe as a,h as b,de as u};
//# sourceMappingURL=ijbbvzexsuset1g7.js.map
