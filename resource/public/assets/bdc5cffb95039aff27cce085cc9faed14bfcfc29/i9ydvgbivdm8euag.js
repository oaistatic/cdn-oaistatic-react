import{j as e,f as C,i as N,d as w,M as p}from"./cs7toih8jegb7teq.js";import{eg as F,bV as v,R as S,z as E,iL as M,de as R,e as q,G as O,og as P,hr as B,oh as I,cK as U,cM as K}from"./dmck639k4dv7claj.js";import{c as Q}from"./b5m6pkropmlgxhpi.js";function h(){return e.jsx(F,{className:"icon-sm text-token-text-tertiary ms-1"})}function k({onChange:t,enabled:s,Icon:a,label:n,labelValues:u,description:o,onClickInfo:r,tooltip:i,tooltipValues:d,hasPadding:g=!0,className:m,disabled:c=!1,messageAfterTooltip:l=void 0}){return e.jsx(Q,{className:E("justify-start",g?"py-6":"py-0",m),children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(M,{label:"",disabled:c,enabled:s,onChange:t}),e.jsxs("p",{className:"text-md inline-flex items-center",children:[a&&e.jsx(a,{className:"icon me-1.5"}),n&&e.jsx(p,{...n,values:u}),i&&e.jsx(R,{interactive:!0,label:e.jsx(p,{...i,values:d}),side:"top",children:r?e.jsx("button",{className:"block h-full",onClick:r,children:e.jsx(h,{})}):e.jsx(h,{})}),l&&e.jsx("span",{className:"text-token-text-secondary ps-1 text-sm",children:e.jsx(p,{...l})})]})]}),o&&e.jsx("span",{className:"text-token-text-secondary ms-14 text-sm",children:e.jsx(p,{...o})})]})})}function G({workspaceId:t,Icon:s,label:a,description:n,onClickInfo:u,feature:o,value:r,tooltip:i,hasPadding:d=!0,className:g,disabled:m=!1,overrideDisplayValue:c=void 0,messageAfterTooltip:l=void 0}){const _=v(),j=C(),{variables:y,mutate:f}=N({mutationFn:({feature:x,enabled:b})=>S.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:x,value:b}}),onSettled:()=>{j.invalidateQueries({queryKey:["workspace-settings",t]})},onError:()=>{_.danger(T.featureSettingsUpdateFailed,{toastId:"workspace_beta_feature_toggle_row"})}});return e.jsx(k,{onChange:x=>{f({feature:o,enabled:x})},enabled:c??y?.enabled??r,Icon:s,label:a,description:n,tooltip:i,hasPadding:d,className:g,disabled:m,messageAfterTooltip:l,onClickInfo:u})}function W({connectorId:t,workspaceId:s,Icon:a,label:n,tooltip:u,tooltipValues:o,messageAfterTooltip:r,description:i,labelValues:d,disabled:g}){const m=v(),c=C(),l=q(),_=O(l),{enabled:j,isLoading:y}=P(t,B.ADMIN_SETTING,"workspace_settings"),{variables:f,mutate:x}=N({mutationFn:b=>S.safePost("/accounts/{account_id}/connectors/{connector_id}/workspace_permissions",{parameters:{path:{account_id:s,connector_id:t}},requestBody:{enabled:b}}),onSettled:()=>{c.invalidateQueries({queryKey:I(_?.normalizedAccountUserId,"workspace_settings")}),t===U[K.GITHUB_CONNECTOR]&&!f&&c.invalidateQueries({queryKey:["workspace-settings",s]})},onError:()=>{m.danger(T.featureSettingsUpdateFailed,{toastId:"workspace_platform_connector_toggle_row"})}});return e.jsx(k,{onChange:x,enabled:f??!!j,Icon:a,label:n,labelValues:d,disabled:y||g,tooltip:u,tooltipValues:o,messageAfterTooltip:r,description:i})}const T=w({featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});export{G as B,h as S,W};
//# sourceMappingURL=i9ydvgbivdm8euag.js.map
