const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/b7jp6a6jnmfnqcrx.js","assets/cs7toih8jegb7teq.js","assets/zjr0ak67r0xufzni.js","assets/dtz2gnda2vx03dil.js","assets/dmck639k4dv7claj.js","assets/root-mdlgku96.css","assets/pe95y8sy3hzkar72.js","assets/hnw079jsdm76umup.js","assets/conversation-small-b5ztx8w5.css","assets/kwms1ugj73bjxgnk.js","assets/zpmtm193hf9al87a.js","assets/ns51nblw8ziscsgd.js","assets/jy1u8exw8iz2slve.js","assets/n8303igkzlzv9639.js","assets/gy64pge8qevmvg7e.js","assets/lflgzlgfd348gvw6.js","assets/j47f0ykepflvhgdz.js","assets/dfzcxyl9lkh9bhhc.js","assets/comments-plugin-tah3dlup.css","assets/codemirror-gmx89wcl.css","assets/c070u4alslgy7i5z.js","assets/op8kqjb1v00a035k.js","assets/icwejktgx2db5g2x.js","assets/epuqxu07prihsdka.js","assets/nlxagrvvx9r77jf7.js","assets/gqxnaj28dwt74usv.js","assets/dfhgw8mxn1h3ecpw.js","assets/nxes2g8vblrs3vjj.js","assets/bk8slwxjkdlmxjxm.js","assets/na0t6wj09rfp0awn.js","assets/liqaqj2w179grtbv.js","assets/d0qctmhgeexj40hp.js","assets/mahhuo4zclh446vl.js","assets/l1m3l5lbmhuctzw6.js","assets/ljj1p3s92okaif60.js","assets/fq8kbeg5idktxg5a.js","assets/nt3v8cmtxrtlj5zl.js","assets/bt87x1jkl52wwxat.js","assets/g61ghrdmm0y010eo.js","assets/cm813h9bptrniota.js","assets/kl7c6054usfnqmd4.js","assets/mia7qmdupqoji40k.js","assets/dfaaf8463nahnfzk.js","assets/ew7fcn5k53in7n79.js","assets/jkpnnjd940k9ow0m.js","assets/n2libsdnoavnif2q.js","assets/ci3idol558isr68b.js","assets/owiiott81wvonpc1.js","assets/ide5ra3yghb0d3iw.js","assets/pc2givv05uuq8g6l.js","assets/prosemirror-eh65ggsy.css","assets/mzuzwb6vzvi4qfk0.js","assets/mntlin6h4lg868yr.js"])))=>i.map(i=>d[i]);
import{j as p,m as he,A as xe,r as w,e as le,d as Ce,g as Ee,i as ge}from"./cs7toih8jegb7teq.js";import{Z as ye,C as ue}from"./jy1u8exw8iz2slve.js";import{z as T,aE as ce,c3 as be,aw as fe,kV as me,ax as D,e as De,bV as pe,lN as Te,aI as _e,a0 as Oe,R as Le,P as Z}from"./dmck639k4dv7claj.js";import{N as we,cH as Ie,oz as Ae,oA as Ne,bI as Re,rw as Me,oB as Se,rx as ke,d4 as l,d0 as Pe,d3 as je,d1 as ze,ry as Be,bF as Fe,bg as $e,rz as Ge,l6 as Q,l7 as He,X as Ue}from"./hnw079jsdm76umup.js";import{b as V}from"./g61ghrdmm0y010eo.js";import{B as qe}from"./cm813h9bptrniota.js";import{c as Je,h as Xe}from"./zpmtm193hf9al87a.js";import{u as Ye}from"./kwms1ugj73bjxgnk.js";import{d as B}from"./kl7c6054usfnqmd4.js";import{g as We}from"./mia7qmdupqoji40k.js";import{r as Ze}from"./dfaaf8463nahnfzk.js";function Qe({className:e,zIndexKey:n,onClick:t}){return p.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:T("absolute inset-0",e,ye[n]),onClick:t})}function Ve({zIndexKey:e,onClick:n}){return p.jsx(Qe,{zIndexKey:e,onClick:n,className:"bg-gray-50/50 dark:bg-black/50"})}const Ke=({onScroll:e})=>(Me(({scrollTop:n})=>{e?.(n)}),null),en=({shouldScrollToTop:e})=>{const n=Se();return w.useEffect(()=>{e===!0&&n({behavior:"smooth"})},[e,n]),null},nn=()=>{const e=Ae();w.useEffect(()=>{e({behavior:"smooth"})},[e]);const[n]=Ne();return n?null:p.jsx("button",{onClick:()=>e({behavior:"smooth"}),className:"border-token-border-default bg-token-main-surface-primary text-token-text-secondary absolute end-1/2 bottom-5 z-10 flex h-8 w-8 translate-x-1/2 cursor-pointer items-center justify-center rounded-full border bg-clip-padding",children:p.jsx(Re,{className:"icon text-token-text-primary"})})};function tn({children:e,onScroll:n,shouldScrollToTop:t,scrollToBottomMode:o="top",isLoading:a=!1,header:s,height:i="auto",overlay:r,hideChildren:c=!1,disableScroll:u=!1,ref:f}){const m=p.jsx("div",{className:T(c?"hidden":"block",i==="auto"?"h-auto":"h-full"),children:e});return p.jsxs("section",{ref:f,className:T("relative flex min-h-0 flex-auto grow flex-col",u&&"overflow-hidden"),children:[p.jsx(xe,{children:a&&p.jsx(Ve,{zIndexKey:"textdocDiffLoadingOverlay"})}),!u&&p.jsxs(qe,{followButtonClassName:"hidden",initialScrollBehavior:"auto",scrollViewClassName:"flex flex-col",className:"h-full",mode:o,children:[s,m,r&&p.jsx("div",{className:"pointer-events-none w-full flex-1",children:r}),o==="bottom"&&p.jsx(nn,{}),p.jsx(Ke,{onScroll:n}),p.jsx(en,{shouldScrollToTop:t})]}),u&&p.jsxs(p.Fragment,{children:[s,m,r&&p.jsx("div",{className:"pointer-events-none h-full w-full",children:r})]})]})}function on({className:e,children:n}){return p.jsx("header",{className:T(e,"touch:px-2.5 h-header-height flex flex-none items-center justify-between gap-1 px-2"),children:n})}function sn({className:e,children:n,size:t="lg",bold:o}){return p.jsx("h2",{className:T(e,"text-token-text-primary truncate",o?"font-bold":"font-normal",t==="lg"&&"text-lg",t==="base"&&"text-base"),children:n})}const an=({onClick:e})=>{const t=ce()?Ie:be;return p.jsx(we,{icon:t,onClick:e})},K=e=>{const{r:n,g:t,b:o}=V.toRGBA(V.parse(e));return(n*299+t*587+o*114)/1e3<125},k=({children:e,isPreviewingCode:n=!1,transitionBackground:t=!1,previewBackgroundColor:o=null})=>{const a=n&&o&&K(o),s=n&&o&&!K(o);return p.jsx("section",{className:T("popover flex h-full w-full flex-col",t&&"transition-colors",a&&"dark",s&&"light",n?"bg-[rgba(249,249,249,1)] dark:bg-[rgba(33,33,33,1)]":"bg-transparent"),style:{backgroundColor:n&&o?o:void 0},children:e})};k.Title=sn;k.CloseButton=an;k.Header=on;k.Content=tn;const rn=fe(()=>D(()=>import("./b7jp6a6jnmfnqcrx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42])).then(e=>e.CodeComposer),{loading:()=>p.jsx("div",{className:ue.code,children:p.jsx("div",{className:"h-full w-full px-4",children:p.jsx(me,{lines:20})})})}),Fn=e=>p.jsx(rn,{...e}),$n=(e=[])=>e.filter(({status:n})=>n!==ke.DISMISSED);var ln=(e=>(e.ALL_HIDDEN="all_hidden",e.COMMENTS_READONLY="comments_readonly",e.ENABLED="enabled",e))(ln||{});const ee=775,un=580,cn=36,fn=18,Gn=24,Hn=16,mn=({numLines:e=20})=>{const[{width:n},t]=Ye(),o=ce(),a=n>=ee+Je?ee:un,s=o?fn:cn;return p.jsx("div",{className:T(ue.document,"mt-4"),ref:t,style:{margin:`0 ${s}px`},children:p.jsx("div",{style:{width:a},children:p.jsx(me,{lines:e})})})},pn=fe(()=>D(()=>import("./ew7fcn5k53in7n79.js"),__vite__mapDeps([43,1,44,4,5,16,3,15,10,7,8,11,12,9,17,6,13,14,18,45,46,47,48,49,50,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42])).then(e=>e.DocumentComposer),{loading:({value:e,width:n=window.innerWidth})=>p.jsx(mn,{numLines:Math.ceil(e.length/(n/8))})}),Un=e=>p.jsx(pn,{...e});function E(){}E.prototype={diff:function(n,t){var o,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=a.callback;typeof a=="function"&&(s=a,a={});var i=this;function r(d){return d=i.postProcess(d,a),s?(setTimeout(function(){s(d)},0),!0):d}n=this.castInput(n,a),t=this.castInput(t,a),n=this.removeEmpty(this.tokenize(n,a)),t=this.removeEmpty(this.tokenize(t,a));var c=t.length,u=n.length,f=1,m=c+u;a.maxEditLength!=null&&(m=Math.min(m,a.maxEditLength));var h=(o=a.timeout)!==null&&o!==void 0?o:1/0,x=Date.now()+h,v=[{oldPos:-1,lastComponent:void 0}],C=this.extractCommon(v[0],t,n,0,a);if(v[0].oldPos+1>=u&&C+1>=c)return r(ne(i,v[0].lastComponent,t,n,i.useLongestToken));var g=-1/0,y=1/0;function A(){for(var d=Math.max(g,-f);d<=Math.min(y,f);d+=2){var b=void 0,_=v[d-1],O=v[d+1];_&&(v[d-1]=void 0);var z=!1;if(O){var Y=O.oldPos-d;z=O&&0<=Y&&Y<c}var W=_&&_.oldPos+1<u;if(!z&&!W){v[d]=void 0;continue}if(!W||z&&_.oldPos<O.oldPos?b=i.addToPath(O,!0,!1,0,a):b=i.addToPath(_,!1,!0,1,a),C=i.extractCommon(b,t,n,d,a),b.oldPos+1>=u&&C+1>=c)return r(ne(i,b.lastComponent,t,n,i.useLongestToken));v[d]=b,b.oldPos+1>=u&&(y=Math.min(y,d-1)),C+1>=c&&(g=Math.max(g,d+1))}f++}if(s)(function d(){setTimeout(function(){if(f>m||Date.now()>x)return s();A()||d()},0)})();else for(;f<=m&&Date.now()<=x;){var N=A();if(N)return N}},addToPath:function(n,t,o,a,s){var i=n.lastComponent;return i&&!s.oneChangePerToken&&i.added===t&&i.removed===o?{oldPos:n.oldPos+a,lastComponent:{count:i.count+1,added:t,removed:o,previousComponent:i.previousComponent}}:{oldPos:n.oldPos+a,lastComponent:{count:1,added:t,removed:o,previousComponent:i}}},extractCommon:function(n,t,o,a,s){for(var i=t.length,r=o.length,c=n.oldPos,u=c-a,f=0;u+1<i&&c+1<r&&this.equals(o[c+1],t[u+1],s);)u++,c++,f++,s.oneChangePerToken&&(n.lastComponent={count:1,previousComponent:n.lastComponent,added:!1,removed:!1});return f&&!s.oneChangePerToken&&(n.lastComponent={count:f,previousComponent:n.lastComponent,added:!1,removed:!1}),n.oldPos=c,u},equals:function(n,t,o){return o.comparator?o.comparator(n,t):n===t||o.ignoreCase&&n.toLowerCase()===t.toLowerCase()},removeEmpty:function(n){for(var t=[],o=0;o<n.length;o++)n[o]&&t.push(n[o]);return t},castInput:function(n){return n},tokenize:function(n){return Array.from(n)},join:function(n){return n.join("")},postProcess:function(n){return n}};function ne(e,n,t,o,a){for(var s=[],i;n;)s.push(n),i=n.previousComponent,delete n.previousComponent,n=i;s.reverse();for(var r=0,c=s.length,u=0,f=0;r<c;r++){var m=s[r];if(m.removed)m.value=e.join(o.slice(f,f+m.count)),f+=m.count;else{if(!m.added&&a){var h=t.slice(u,u+m.count);h=h.map(function(x,v){var C=o[f+v];return C.length>x.length?C:x}),m.value=e.join(h)}else m.value=e.join(t.slice(u,u+m.count));u+=m.count,m.added||(f+=m.count)}}return s}function te(e,n){var t;for(t=0;t<e.length&&t<n.length;t++)if(e[t]!=n[t])return e.slice(0,t);return e.slice(0,t)}function oe(e,n){var t;if(!e||!n||e[e.length-1]!=n[n.length-1])return"";for(t=0;t<e.length&&t<n.length;t++)if(e[e.length-(t+1)]!=n[n.length-(t+1)])return e.slice(-t);return e.slice(-t)}function G(e,n,t){if(e.slice(0,n.length)!=n)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(n),"; this is a bug"));return t+e.slice(n.length)}function H(e,n,t){if(!n)return e+t;if(e.slice(-n.length)!=n)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(n),"; this is a bug"));return e.slice(0,-n.length)+t}function L(e,n){return G(e,n,"")}function R(e,n){return H(e,n,"")}function se(e,n){return n.slice(0,dn(e,n))}function dn(e,n){var t=0;e.length>n.length&&(t=e.length-n.length);var o=n.length;e.length<n.length&&(o=e.length);var a=Array(o),s=0;a[0]=0;for(var i=1;i<o;i++){for(n[i]==n[s]?a[i]=a[s]:a[i]=s;s>0&&n[i]!=n[s];)s=a[s];n[i]==n[s]&&s++}s=0;for(var r=t;r<e.length;r++){for(;s>0&&e[r]!=n[s];)s=a[s];e[r]==n[s]&&s++}return s}var S="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",vn=new RegExp("[".concat(S,"]+|\\s+|[^").concat(S,"]"),"ug"),P=new E;P.equals=function(e,n,t){return t.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e.trim()===n.trim()};P.tokenize=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(n.intlSegmenter){if(n.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(n.intlSegmenter.segment(e),function(s){return s.segment})}else t=e.match(vn)||[];var o=[],a=null;return t.forEach(function(s){/\s/.test(s)?a==null?o.push(s):o.push(o.pop()+s):/\s/.test(a)?o[o.length-1]==a?o.push(o.pop()+s):o.push(a+s):o.push(s),a=s}),o};P.join=function(e){return e.map(function(n,t){return t==0?n:n.replace(/^\s+/,"")}).join("")};P.postProcess=function(e,n){if(!e||n.oneChangePerToken)return e;var t=null,o=null,a=null;return e.forEach(function(s){s.added?o=s:s.removed?a=s:((o||a)&&ae(t,a,o,s),t=s,o=null,a=null)}),(o||a)&&ae(t,a,o,null),e};function ae(e,n,t,o){if(n&&t){var a=n.value.match(/^\s*/)[0],s=n.value.match(/\s*$/)[0],i=t.value.match(/^\s*/)[0],r=t.value.match(/\s*$/)[0];if(e){var c=te(a,i);e.value=H(e.value,i,c),n.value=L(n.value,c),t.value=L(t.value,c)}if(o){var u=oe(s,r);o.value=G(o.value,r,u),n.value=R(n.value,u),t.value=R(t.value,u)}}else if(t)e&&(t.value=t.value.replace(/^\s*/,"")),o&&(o.value=o.value.replace(/^\s*/,""));else if(e&&o){var f=o.value.match(/^\s*/)[0],m=n.value.match(/^\s*/)[0],h=n.value.match(/\s*$/)[0],x=te(f,m);n.value=L(n.value,x);var v=oe(L(f,x),h);n.value=R(n.value,v),o.value=G(o.value,f,v),e.value=H(e.value,f,f.slice(0,f.length-v.length))}else if(o){var C=o.value.match(/^\s*/)[0],g=n.value.match(/\s*$/)[0],y=se(g,C);n.value=R(n.value,y)}else if(e){var A=e.value.match(/\s*$/)[0],N=n.value.match(/^\s*/)[0],d=se(A,N);n.value=L(n.value,d)}}var hn=new E;hn.tokenize=function(e){var n=new RegExp("(\\r?\\n)|[".concat(S,"]+|[^\\S\\n\\r]+|[^").concat(S,"]"),"ug");return e.match(n)||[]};var j=new E;j.tokenize=function(e,n){n.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));var t=[],o=e.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var a=0;a<o.length;a++){var s=o[a];a%2&&!n.newlineIsToken?t[t.length-1]+=s:t.push(s)}return t};j.equals=function(e,n,t){return t.ignoreWhitespace?((!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!t.newlineIsToken||!n.includes(`
`))&&(n=n.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),n.endsWith(`
`)&&(n=n.slice(0,-1))),E.prototype.equals.call(this,e,n,t)};function xn(e,n,t){return j.diff(e,n,t)}var Cn=new E;Cn.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var En=new E;En.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function U(e){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},U(e)}var I=new E;I.useLongestToken=!0;I.tokenize=j.tokenize;I.castInput=function(e,n){var t=n.undefinedReplacement,o=n.stringifyReplacer,a=o===void 0?function(s,i){return typeof i>"u"?t:i}:o;return typeof e=="string"?e:JSON.stringify(q(e,null,null,a),a,"  ")};I.equals=function(e,n,t){return E.prototype.equals.call(I,e.replace(/,([\r\n])/g,"$1"),n.replace(/,([\r\n])/g,"$1"),t)};function q(e,n,t,o,a){n=n||[],t=t||[],o&&(e=o(a,e));var s;for(s=0;s<n.length;s+=1)if(n[s]===e)return t[s];var i;if(Object.prototype.toString.call(e)==="[object Array]"){for(n.push(e),i=new Array(e.length),t.push(i),s=0;s<e.length;s+=1)i[s]=q(e[s],n,t,o,a);return n.pop(),t.pop(),i}if(e&&e.toJSON&&(e=e.toJSON()),U(e)==="object"&&e!==null){n.push(e),i={},t.push(i);var r=[],c;for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&r.push(c);for(r.sort(),s=0;s<r.length;s+=1)c=r[s],i[c]=q(e[c],n,t,o,c);n.pop(),t.pop()}else i=e;return i}var J=new E;J.tokenize=function(e){return e.slice()};J.join=J.removeEmpty=function(e){return e};var M=(e=>(e.ADDED="added",e.REMOVED="removed",e.UNCHANGED="unchanged",e))(M||{});function X(e){if(e==="")return 0;const n=e.split(`
`).length;return e.endsWith(`
`)?n-1:n}function gn(e,n){return xn(e,n,{newlineIsToken:!0}).map(o=>({count:o.count??X(o.value),value:o.value,type:o.added?"added":o.removed?"removed":"unchanged"}))}function yn(e){let n="";for(const{type:t,value:o}of e)(t==="added"||t==="unchanged")&&(n+=o);return n}function bn(e,n){const t=X(n),o=_n(e,t);return{changes:gn(o,n),numLinesDiffed:t}}function Dn(e){const n=[...e],t=[],o=[];for(;n.length>0;){const a=n[n.length-1];if(a.type===M.REMOVED)n.pop(),a.type===M.REMOVED&&t.unshift(a);else if(a.type===M.ADDED)n.pop(),o.unshift(a);else break}return{prunedChanges:[...n,...o],prunedRemovedChanges:t}}function Tn(e,n){const{changes:t,numLinesDiffed:o}=bn(e,n),{prunedChanges:a,prunedRemovedChanges:s}=Dn(t),i=yn(a),r=s.map(u=>u.value).join(`
`),c=de(e,o,"start");return{content:i+r+c,numLinesDiffed:X(i)}}function _n(e,n){if(n<=0)return"";let t=0,o=e.length;for(let a=0;a<e.length;a++)if(e[a]===`
`&&(t++,t===n)){o=a+1;break}return e.substring(0,o)}function de(e,n,t="start"){if(n<=0)return e;if(t==="start"){let i=0;for(let r=0;r<e.length;r++)if(e[r]===`
`&&(i++,i===n))return e.substring(r+1);return""}let o=0,a=-1;const s=e.endsWith(`
`)?n+1:n;for(let i=e.length-1;i>=0;i--)if(e[i]===`
`&&(o++,o===s)){a=i;break}return a===-1?"":e.substring(0,a+1)}function qn(e,n){const t=e?.type??l.LOADING,o=e?.content??"",a=Pe(e);if(!je(t)||n==null||!a||!ze(e))return{content:o,currentlyStreamingLineIndex:null};const s=de(o,1,"end");if(s==="")return{content:n.content,currentlyStreamingLineIndex:0};const i=Tn(n.content,s);return{content:i.content,currentlyStreamingLineIndex:i.numLinesDiffed}}async function ve(e){if(Xe.every(r=>!e.includes(r)))return e;const{unified:n}=await D(async()=>{const{unified:r}=await import("./dmck639k4dv7claj.js").then(c=>c.w7);return{unified:r}},__vite__mapDeps([4,1,5])),{CANVAS_REMARK_PLUGINS:t}=await D(async()=>{const{CANVAS_REMARK_PLUGINS:r}=await import("./n2libsdnoavnif2q.js").then(c=>c.p);return{CANVAS_REMARK_PLUGINS:r}},__vite__mapDeps([45,4,1,5,17,6,7,8,9,10,11,12,13,3,14,46,47])),{stripDirectivePlugin:o}=await D(async()=>{const{stripDirectivePlugin:r}=await import("./ide5ra3yghb0d3iw.js");return{stripDirectivePlugin:r}},__vite__mapDeps([48,10,1,4,5,7,8,11,12,9])),{hiveLogDirectivePlugin:a}=await D(async()=>{const{hiveLogDirectivePlugin:r}=await import("./zpmtm193hf9al87a.js").then(c=>c.p);return{hiveLogDirectivePlugin:r}},__vite__mapDeps([10,1,4,5,7,8,11,12,9])),s=n();s.use(a).use(o).use(t);const i=await s.process(e);return String(i).trim()}function Jn({textdocVersion:e,clientThreadId:n}){const t=De(),o=le(),a=pe(),[s,i]=w.useState(!1),r=Te(),c=Be(m=>e&&m?.lastCanvasAssistantMessageById[e.textdocId]),u=w.useRef(e?.content??"");return w.useEffect(()=>{u.current=e?.content??""},[e]),{handleCopy:m=>{s||(r(async()=>{const h=await ve(u.current),x=_e(n);e!=null&&x!=null&&c!=null&&Ge(t,{type:"copy",source:"mouse",location:"canvas",selectedText:h,messageId:c,serverThreadId:x}),Q.logButtonClick(He.COPY,{contentLength:h.length,textdocType:e?.type});let v={"text/plain":h};if(e?.type===l.DOCUMENT)try{const{markdownToClipboardContent:C}=await D(async()=>{const{markdownToClipboardContent:g}=await import("./mzuzwb6vzvi4qfk0.js").then(y=>y.g);return{markdownToClipboardContent:g}},__vite__mapDeps([51,7,4,1,5,8,52,46,47,49]));v=C(h,[])}catch(C){Q.logError("Error copying rich text",C)}Ue(v,a,m)},0),i(!0),r(()=>i(!1),2e3))},Icon:s?Fe:$e,copyLabel:o.formatMessage(On.copy)}}const On=Ce({copy:{id:"rbIYfo",defaultMessage:"Copy"}}),ie={[l.CODE_BASH]:{filenameExtension:"sh",blobType:"text/x-shellscript"},[l.CODE_ZSH]:{filenameExtension:"zsh",blobType:"text/x-shellscript"},[l.CODE_JAVASCRIPT]:{filenameExtension:"js",blobType:"application/javascript"},[l.CODE_TYPESCRIPT]:{filenameExtension:"ts",blobType:"application/typescript"},[l.CODE_HTML]:{filenameExtension:"html",blobType:"text/html"},[l.CODE_CSS]:{filenameExtension:"css",blobType:"text/css"},[l.CODE_PYTHON]:{filenameExtension:"py",blobType:"text/x-python"},[l.CODE_JSON]:{filenameExtension:"json",blobType:"application/json"},[l.CODE_SQL]:{filenameExtension:"sql",blobType:"application/sql"},[l.CODE_GO]:{filenameExtension:"go",blobType:"text/x-go"},[l.CODE_YAML]:{filenameExtension:"yaml",blobType:"application/x-yaml"},[l.CODE_JAVA]:{filenameExtension:"java",blobType:"text/x-java-source"},[l.CODE_RUST]:{filenameExtension:"rs",blobType:"text/rust"},[l.CODE_CPP]:{filenameExtension:"cpp",blobType:"text/x-c++src"},[l.CODE_SWIFT]:{filenameExtension:"swift",blobType:"text/swift"},[l.CODE_PHP]:{filenameExtension:"php",blobType:"application/x-httpd-php"},[l.CODE_XML]:{filenameExtension:"xml",blobType:"application/xml"},[l.CODE_RUBY]:{filenameExtension:"rb",blobType:"text/x-ruby"},[l.CODE_HASKELL]:{filenameExtension:"hs",blobType:"text/x-haskell"},[l.CODE_KOTLIN]:{filenameExtension:"kt",blobType:"text/x-kotlin"},[l.CODE_CSHARP]:{filenameExtension:"cs",blobType:"text/x-csharp"},[l.CODE_C]:{filenameExtension:"c",blobType:"text/x-csrc"},[l.CODE_OBJECTIVEC]:{filenameExtension:"m",blobType:"text/x-objectivec"},[l.CODE_R]:{filenameExtension:"r",blobType:"text/plain"},[l.CODE_LUA]:{filenameExtension:"lua",blobType:"text/x-lua"},[l.CODE_DART]:{filenameExtension:"dart",blobType:"text/x-dart"},[l.CODE_SCALA]:{filenameExtension:"scala",blobType:"text/x-scala"},[l.CODE_PERL]:{filenameExtension:"pl",blobType:"text/x-perl"},[l.CODE_COMMONLISP]:{filenameExtension:"lisp",blobType:"text/x-common-lisp"},[l.CODE_CLOJURE]:{filenameExtension:"clj",blobType:"text/x-clojure"},[l.CODE_OCAML]:{filenameExtension:"ml",blobType:"text/x-ocaml"},[l.CODE_POWERSHELL]:{filenameExtension:"ps1",blobType:"text/x-powershell"},[l.CODE_VERILOG]:{filenameExtension:"v",blobType:"text/x-verilog"},[l.CODE_DOCKERFILE]:{filenameExtension:"Dockerfile",blobType:"text/x-dockerfile"},[l.CODE_VUE]:{filenameExtension:"vue",blobType:"text/x-vue"},[l.CODE_REACT]:{filenameExtension:"jsx",blobType:"application/javascript"},[l.CODE_OTHER]:{filenameExtension:"txt",blobType:"text/plain"},[l.DOCUMENT]:{filenameExtension:"md",blobType:"text/markdown"},[l.LOADING]:{filenameExtension:"txt",blobType:"text/plain"}};var F,re;function Ln(){if(re)return F;re=1;var e=Ze(),n=e(function(t,o,a){return t+(a?"_":"")+o.toLowerCase()});return F=n,F}var wn=Ln();const $=Ee(wn);function Xn(e){const n=le(),t=pe(),o=n.formatMessage({id:"canvas.downloadFileError",defaultMessage:"Failed to download file. Please try again later."}),{mutate:a,isPending:s}=ge({mutationFn:async({textdocId:u,exportType:f})=>{const m=await Le.safePost("/export_doc/canvas",{requestBody:{textdoc_id:u,export_type:f},skipJsonTransform:!0});if(!m.ok)throw new Error("Failed to download file");return m},onSuccess:async(u,{exportType:f})=>{if(!e)return;const m=await u.blob(),h=u.headers.get("Content-Disposition"),x=We(h)??`${$(e.title)}.${f}`;B(m,x)},onError:u=>{t.danger(o,{toastId:"textdoc_download_button",loggingTitle:o,loggingDescription:"Failed to download file"}),Oe.addError(u)}}),i=async u=>{if(e&&e.type!==l.LOADING&&e.type===l.DOCUMENT){let f;switch(u){case"md":f="chatgpt_canvas_md_download";break;case"pdf":f="chatgpt_canvas_pdf_download";break;case"docx":f="chatgpt_canvas_docx_download";break}if(Z.logEventWithStatsig("ChatGPT Canvas Download",f),u==="pdf"||u==="docx")a({textdocId:e.textdocId,exportType:u});else if(u==="md"){const{filenameExtension:m,blobType:h}=ie[e.type],x=await ve(e.content),v=new Blob([x],{type:h});B(v,`${$(e.title)}.${m}`)}}},r=()=>{if(!e)return;const{filenameExtension:u,blobType:f}=ie[e.type];if(e.type===l.LOADING)return;Z.logEventWithStatsig("ChatGPT Canvas Download","chatgpt_canvas_code_download",{blobType:f});const m=new Blob([e.content],{type:f});B(m,`${$(e.title)}.${u}`)},c=n.formatMessage({id:"canvas.download-button",defaultMessage:"Download"});return{handleFileDownload:i,handleBlobDownload:r,isLoading:s,downloadCopyLabel:c,isDocument:e?.type===l.DOCUMENT}}export{Fn as A,ln as C,mn as D,Ve as L,Gn as M,Qe as O,Hn as S,Un as a,k as b,Xn as c,fn as d,cn as e,$n as f,qn as g,ee as h,un as i,Jn as u};
//# sourceMappingURL=de5hn4293vtnpm6c.js.map
