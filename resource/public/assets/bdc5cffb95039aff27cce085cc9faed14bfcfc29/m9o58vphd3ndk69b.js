import{r as T,e as K,j as s,M as I,v as we,f as Ce,c as L,a as Fe,L as Ie}from"./cs7toih8jegb7teq.js";import{lH as de,e as A,f5 as _e,pU as Ne,bV as Te,p0 as Me,o$ as Pe,gM as Y,p1 as ze,lF as De,l$ as Ee,P as oe,au as ke,lm as ee,as as Ae,pV as te,pW as se,k0 as Oe,at as Ue,pX as Re,G as ie,f1 as ue,eo as Z,dJ as Ge,C as Le,B as $e,de as He,aH as J,i8 as Be,z as q,aF as We,eh as qe,bl as Qe,q as Xe,F as Ve,j5 as Ze,S as Ke,p as Ye}from"./dmck639k4dv7claj.js";import{hT as me,i8 as Je,hs as et,i9 as tt,dA as le,ia as st,hZ as b,hz as nt,ht as ot,ib as it,ic as xe,dH as rt,id as W,ie as at,ig as lt,ih as ct,ii as dt,ij as ut,ik as pe,eR as mt,il as ge,im as xt,io as pt,ip as gt,iq as ft,ir as ht,is as vt,it as jt,iu as yt,iv as bt,hX as St,iw as wt,aW as Ct,aV as Ft,gQ as It,gO as _t}from"./hnw079jsdm76umup.js";import{g as Nt,D as ne}from"./kizn5m1hr7kdjf9n.js";import{P as Tt}from"./hsurwbv79wrpc9dg.js";import{u as Mt}from"./nfubiloo9rdxk3kj.js";function Pt({ctx:p,gizmoId:e,gizmoName:t,canEdit:n,gizmoEditorData:u,openFileDialog:o,pendingFiles:a,setVersion:i,pendingFileUpsertMutationsRef:m,currentModelConfig:f}){const d=u?.files??[],g=Array.from(a.current.values()).filter(r=>d.every(j=>j.file_id!==r.fileId)),c=g.filter(r=>f!=null&&te(f,r.file.type,r.file.name)===se.CodeInterpreter),l=d.filter(r=>f!=null&&r.type!=null&&te(f,r.type,r.name)===se.CodeInterpreter),h=[...c.map(r=>r.tempId),...l.map(r=>r.file_id)];return s.jsx(lt,{gizmoId:e,gizmoName:t,canEdit:n,pendingFiles:g,pendingFileUpsertMutationsRef:m,files:d,interpreterOnlyFileIds:h,onAddFiles:o,removePendingFile:r=>{a.current.delete(r),W({ctx:p,id:e,pendingFiles:{key:r,value:null}}),i(j=>j+1)}})}const zt=T.forwardRef(function({gizmo:e,accountPlanType:t,showInstructions:n=!0},u){const o=de(t),a=K(),[i,m]=T.useState(!1),f=me(),d=Je(e),g=et(d),c=A(),{data:l}=_e(),h=l?.models.get(Ne)??(l&&tt(l.models.values(),F=>F.tags.includes(Re.GPT_4o))),r=Te(),[j,v]=T.useState(0),x=T.useRef(new Map),y=T.useRef([]),S=Me(h,void 0),w=F=>{F.some(({errors:D})=>D.length!==1||D[0]?.code!==le.TooManyFiles)?r.danger(b.unknownError,{duration:2,toastId:"snorlax_handle_file_rejected"}):r.danger(a.formatMessage(b.dragTooManyFilesError,{maxFileLimit:o}),{duration:2,toastId:"snorlax_handle_file_rejected",loggingTitle:"drag_too_many_files_error"})},_=async F=>{oe.logEvent("Upload File",{client:"web",eventSource:"mouse",intent:"gizmo"});const D=d.id;F.length>0&&await Promise.all(F.map(B=>{const V=ke(B),ae={tempId:V,gizmoId:D,file:B,status:ee.Uploading,progress:1,fileId:null,cdnUrl:null};x.current.set(V,ae),W({ctx:c,id:D,pendingFiles:{key:V,value:ae}}),Ae(V,B,a,r,{kind:Ue.Gizmo,gizmoId:D},{onFileUploaded:async(N,$,Q,E)=>{const k=x.current.get(N);k?.fileId&&k?.fileId&&(y.current.push({id:e.gizmo.id,mutationId:we(),update:X=>{if(!k.fileId)return X;const Se=[...X.files??[],{file_id:k.fileId,name:k.file.name,size:k.file.size,type:E?.mimeType??Oe(k.file),last_modified:k.file.lastModified,file_size_tokens:E?.fileTokenSize}];return{...X,files:Se}},onSuccess:()=>{x.current.delete(N),W({ctx:c,id:D,pendingFiles:{key:N,value:null}}),v(X=>X+1)}}),at(e.gizmo.id)({gizmoId:e.gizmo.id,upsertProjectMutation:f,pendingFileUpsertMutationsRef:y}))},onFileCreated:(N,$,Q)=>{const E={tempId:N,gizmoId:D,file:B,status:ee.Uploading,progress:1,...x.current.get(N),fileId:$,cdnUrl:Q};x.current.set(N,E),W({ctx:c,id:D,pendingFiles:{key:N,value:E}}),v(k=>k+1)},onFileUploadProgress:(N,$)=>{const Q=x.current.get(N);if(Q?.status===ee.Uploading){const E={...Q,progress:$>95?95:$};x.current.set(N,E),W({ctx:c,id:D,pendingFiles:{key:N,value:E}})}v(E=>E+1)},onError:N=>{x.current.delete(N),W({ctx:c,id:D,pendingFiles:{key:N,value:null}}),v($=>$+1)}},{usesRetrievalIndex:h!=null&&te(h,B.type,B.name)===se.Retrieval})}))},C=Pe(S),M=Nt(C),P=x.current.size+d.files.length,{canEdit:z}=Y(e),{open:O,getInputProps:U,getRootProps:R,isDragAccept:G,isDragReject:H}=Mt({noClick:!0,noKeyboard:!0,noDragEventsBubbling:!0,onDropAccepted:_,onDropRejected:w,multiple:!0,maxSize:ze,maxFiles:o-P,validator:()=>P>=o?{code:le.TooManyFiles,message:"Too many files"}:null,disabled:!z,...C});return T.useImperativeHandle(u,()=>({openFileDialog:O})),s.jsxs("div",{...R({className:"h-full px-4 min-w-0"}),children:[s.jsx("input",{...U()}),n&&s.jsxs(st,{children:[s.jsx("button",{className:"w-full",onClick:()=>m(!0),children:s.jsx("div",{className:"border-token-border-default w-full rounded-lg border text-start text-sm",children:d?.instructions?.length?s.jsx("div",{className:"mx-4 my-3 line-clamp-4",children:d.instructions}):s.jsxs("div",{className:"text-token-text-secondary flex h-full w-full items-center px-4 py-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx(I,{...b.addCustomInstructions})}),s.jsx(nt,{className:"icon-sm"})]})})}),g.includes(ot.GizmoInstructionsTooLong)?s.jsx(De,{className:"mt-1",children:s.jsx(I,{...b.instructionsTooLong,values:{length:it}})}):null]}),i&&s.jsx(xe,{gizmo:e,onClose:()=>{m(!1)}}),s.jsx(Pt,{ctx:c,gizmoId:e.gizmo.id,gizmoName:e.gizmo.display.name,canEdit:z,gizmoEditorData:d,openFileDialog:O,pendingFiles:x,pendingFileUpsertMutationsRef:y,setVersion:v,currentModelConfig:h}),G&&s.jsxs(ne,{children:[s.jsx(rt,{}),s.jsx("h3",{children:s.jsx(I,{...b.dragInstructions})}),s.jsx("h4",{className:"w-2/3 text-center",children:M.length>0?M.join(", "):s.jsx(I,{...b.dragAllAccepted})})]}),H&&s.jsxs(ne,{children:[s.jsx(Ee,{className:"icon-2xl"}),s.jsx("h3",{children:s.jsx(I,{...b.dragTooManyFiles})}),s.jsx("h4",{className:"w-2/3 text-center",children:s.jsx(I,{...b.dragTooManyFilesDescription,values:{maxFileLimit:o}})})]})]})});function fe({gizmo:p,onClose:e,project:t}){const n=K(),u=T.useRef(null),o=T.useCallback(()=>{u.current?.openFileDialog()},[u]),a=A(),i=ie(a),m=Ce(),{data:f}=ue(p.gizmo.id),d=f??p,{canEdit:g}=Y(d),c=Z(()=>t?.filesCount$()??0);return T.useEffect(()=>{m.invalidateQueries({queryKey:Ge(m,d.gizmo.id).queryKey})},[d.gizmo.id,m]),s.jsx(s.Fragment,{children:s.jsx(Le,{testId:"modal-project-files",className:"min-h-72 max-w-[820px]",isOpen:!0,showCloseButton:!0,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",headerAccessory:g?s.jsx($e,{color:"secondary",onClick:o,disabled:(i&&c>=de(i.planType))??!1,children:s.jsx(I,{...b.addFilesButtonLabel})}):s.jsx(He,{label:n.formatMessage(b.viewOnlyCustomInstructionsModalHeaderTooltip),side:"left",align:"center",children:s.jsxs("div",{className:"text-token-text-tertiary flex flex-row items-center gap-1.5 text-sm",children:[s.jsx(ct,{className:"icon"}),s.jsx(I,{...b.viewOnlyCustomInstructionsModalHeaderLabel})]})}),title:s.jsx(I,{...b.projectFilesModalTitle}),onClose:()=>{e()},children:s.jsx("div",{className:"grid min-h-[50dvh] grow overflow-y-auto pt-0",children:i&&s.jsx(zt,{ref:u,gizmo:d,showInstructions:!1,accountPlanType:i.planType})})})})}const Vt=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxFileModal:fe},Symbol.toStringTag,{value:"Module"}));function Dt({gizmo:p}){return s.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:p?s.jsxs(s.Fragment,{children:[s.jsx(Et,{gizmo:p,className:"rounded-[20px_0px_0px_20px] [border-width:1px_0.5px_1px_1px]"}),s.jsx(At,{gizmo:p,className:"rounded-[0px_20px_20px_0px] [border-width:1px_1px_1px_0.5px]"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ce,{}),s.jsx(ce,{})]})})}const re=({className:p,header:e,context:t,contextClassName:n="",icon:u,onClick:o,disabled:a=!1})=>s.jsx("button",{onClick:o,disabled:a,className:q("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",p),children:s.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[s.jsxs("div",{className:"w-full grow text-start",children:[s.jsx("div",{className:"text-sm font-medium",children:e}),s.jsx("div",{className:q("text-token-text-secondary text-xs",n),children:t})]}),u]})}),ce=()=>s.jsx(re,{disabled:!0,header:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})});function Et({className:p,gizmo:e}){const{files:t}=e,n=!t.length,u=A(),o=()=>J(u,fe,{gizmo:e});let a,i,m;const{canEdit:f}=Y(e);if(n)a=s.jsx(I,{...f?b.addFilesButtonLabel:b.viewFilesButtonLabel}),i=s.jsx(I,{...f?b.filesControlDescription:b.noFilesReadOnlyDescription}),m=null;else{const g=t.slice(0,3);a=s.jsx(I,{...b.projectFilesModalTitle}),i=s.jsx(I,{...b.filesCount,values:{count:t.length}}),m=s.jsx("div",{className:"relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only",children:g.toReversed().map((c,l)=>s.jsx(kt,{file:c,index:l,gizmoId:e.gizmo.id},c.id))})}return s.jsx(re,{className:p,onClick:o,header:a,context:i,icon:m,disabled:n&&!f})}function kt({file:p,index:e,gizmoId:t}){const n=p.name,o=Be(n)&&p.file_id!=null&&s.jsx(dt,{fileName:n,fileId:p.file_id,gizmoId:t,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"});return s.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:{transform:`translateX(${e*-20}px)`},children:o||s.jsx(ut,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:p.name,contextConnectorInfo:void 0})})}function At({gizmo:p,className:e}){const{instructions:t}=p.gizmo,n=!t.length,u=A(),o=()=>J(u,xe,{gizmo:p});let a,i,m;const{canEdit:f}=Y(p);return n?(a=s.jsx(I,{...f?b.customInstructionsTitle:b.customInstructionsReadOnlyTitle}),i=s.jsx(I,{...f?b.customInstructionsDescription:b.customInstructionsReadOnlyDescription})):(a=s.jsx(I,{...b.editCustomInstructionsTitle}),m="overflow-hidden text-ellipsis whitespace-nowrap",i=t),s.jsx(re,{className:e,onClick:o,header:a,context:i,contextClassName:m,disabled:n&&!f})}const Ot=()=>s.jsx("div",{className:"ms-1 mt-3 h-10",children:s.jsx("div",{className:"bg-token-tertiary my-[15px] h-[10px] w-48 rounded-full"})});function he(p){"use forget";const e=L.c(17),{gizmo:t}=p,n=K(),u=A(),o=T.use(pe);let a;e[0]!==t||e[1]!==o?(a=()=>t?o.theme$():null,e[0]=t,e[1]=o,e[2]=a):a=e[2];const i=Z(a);let m;e[3]!==t||e[4]!==o?(m=()=>t?o.emoji$():null,e[3]=t,e[4]=o,e[5]=m):m=e[5];const f=Z(m);let d;e[6]!==t||e[7]!==o?(d=()=>t?o.title$():null,e[6]=t,e[7]=o,e[8]=d):d=e[8];const g=Z(d),c=(t?.gizmo?.sharing?.subjects?.length??0)>0;let l;return e[9]!==u||e[10]!==f||e[11]!==i||e[12]!==g||e[13]!==t||e[14]!==n||e[15]!==c?(l=s.jsx("div",{className:"mb-8 inline-flex w-full justify-center gap-2",children:t?s.jsx("div",{className:"text-page-header mt-0.5 inline-block px-4",children:s.jsx("h1",{className:"contents",children:s.jsxs("a",{href:"#edit-title",role:"button","aria-label":n.formatMessage({id:"edit-title",defaultMessage:"Edit the title of {projectName}"},{projectName:t.gizmo.display.name}),className:"text-page-header group hover:text-token-text-secondary ms-2 flex items-center gap-1.5 text-balance",onClick:h=>{h.preventDefault(),J(u,ge,{submitButtonTitle:n.formatMessage(b.projectSettingsSubmitButton),gizmo:t})},children:[s.jsx(mt,{size:"lg",color:i,emoji:f,isSharedProject:c,strict:!0}),g]})})}):s.jsx(Ot,{})}),e[9]=u,e[10]=f,e[11]=i,e[12]=g,e[13]=t,e[14]=n,e[15]=c,e[16]=l):l=e[16],l}function Ut(p){"use forget";const e=L.c(2),{children:t}=p;let n;return e[0]!==t?(n=s.jsx("div",{className:"group relative flex flex-col gap-1 p-3",children:s.jsx("div",{className:"flex items-center gap-4",children:t})}),e[0]=t,e[1]=n):n=e[1],n}const ve=p=>{"use forget";const e=L.c(34),{conversation:t,gizmo:n,showAvatar:u}=p,o=We(t.id,Lt)??t.title,[a,i]=T.useState(!1);let m,f;e[0]!==t.id?(m=()=>Ze(bt,{editTitleInMainScreen:P=>{const{serverThreadId:z}=P;z===t.id&&i(!0)}}),f=[t.id],e[0]=t.id,e[1]=m,e[2]=f):(m=e[1],f=e[2]),T.useEffect(m,f);const d=A(),{snippet:g}=t;let c,l,h,r;if(e[3]!==t||e[4]!==d||e[5]!==n){const P=ie(d)?.normalizedAccountUserId;c="owner"in t?t.owner:null,h=c?.user_id,l=c?.name,r=qe(t.id,n,!0,h,P),e[3]=t,e[4]=d,e[5]=n,e[6]=c,e[7]=l,e[8]=h,e[9]=r}else c=e[6],l=e[7],h=e[8],r=e[9];const j=r;let v;e[10]!==c||e[11]!==l||e[12]!==h||e[13]!==u?(v=u&&s.jsx(St,{monogram:c&&l&&h?{value:l,id:h}:null,showTooltip:!0}),e[10]=c,e[11]=l,e[12]=h,e[13]=u,e[14]=v):v=e[14];let x;e[15]!==t||e[16]!==o||e[17]!==a?(x=a?s.jsx(xt,{conversationId:t.id,historyConversationResponse:t,onClose:()=>{i(!1)}}):s.jsx("div",{className:"text-sm font-medium",children:o}),e[15]=t,e[16]=o,e[17]=a,e[18]=x):x=e[18];let y;e[19]!==g?(y=g&&s.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:g}),e[19]=g,e[20]=y):y=e[20];let S;e[21]!==x||e[22]!==y?(S=s.jsxs("div",{className:"grow overflow-hidden group-hover:me-5",children:[x,y]}),e[21]=x,e[22]=y,e[23]=S):S=e[23];let w;e[24]!==t||e[25]!==a?(w=!a&&s.jsx(je,{conversation:t}),e[24]=t,e[25]=a,e[26]=w):w=e[26];let _;e[27]!==v||e[28]!==S||e[29]!==w?(_=s.jsxs(Ut,{children:[v,S,w]}),e[27]=v,e[28]=S,e[29]=w,e[30]=_):_=e[30];const C=_;if(a)return C;let M;return e[31]!==C||e[32]!==j?(M=s.jsx(Ie,{to:j,draggable:!1,children:C}),e[31]=C,e[32]=j,e[33]=M):M=e[33],M},je=p=>{"use forget";const e=L.c(24),{conversation:t,isNewProjectPage:n}=p,u=n===void 0?!1:n,[o,a]=T.useState(!1),i=K(),m=A(),f=ie(m)?.normalizedAccountUserId,d="owner"in t?t.owner?.user_id:void 0,g=d===void 0||d===f;let c;e[0]!==t.update_time||e[1]!==i?(c=t.update_time&&Intl.DateTimeFormat(i.locale,{month:"short",day:"numeric"}).format(new Date(t.update_time)),e[0]=t.update_time,e[1]=i,e[2]=c):c=e[2];const l=c;if(!g){let C;return e[3]!==l?(C=l?s.jsx("span",{className:"text-token-text-tertiary text-sm whitespace-nowrap",children:l}):null,e[3]=l,e[4]=C):C=e[4],C}let h;e[5]===Symbol.for("react.memo_cache_sentinel")?(h=q("group text-token-text-tertiary relative flex min-h-10 min-w-10 items-center justify-between text-sm"),e[5]=h):h=e[5];let r;e[6]!==l||e[7]!==o||e[8]!==u?(r=!!l&&s.jsx("span",{className:q("whitespace-nowrap",!u&&"transition-opacity duration-100 ease-out",o?"opacity-0":"opacity-100 group-hover:opacity-0"),children:l}),e[6]=l,e[7]=o,e[8]=u,e[9]=r):r=e[9];const j=!u&&"transition-all duration-100 ease-out",v=o&&"pointer-events-auto translate-y-0 scale-100 opacity-100";let x;e[10]!==j||e[11]!==v?(x=q("absolute inset-0 flex items-center gap-1.5",j,"translate-y-0 scale-95 opacity-0","group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100",v),e[10]=j,e[11]=v,e[12]=x):x=e[12];let y;e[13]!==t.id?(y=C=>{a(C),C&&oe.logEvent("Conversation History Item Open Menu",{conversationId:t.id})},e[13]=t.id,e[14]=y):y=e[14];let S;e[15]!==t||e[16]!==y?(S=s.jsx(wt,{conversation:t,onOpenChange:y,inMainScreen:!0,isActiveConversation:!1}),e[15]=t,e[16]=y,e[17]=S):S=e[17];let w;e[18]!==x||e[19]!==S?(w=s.jsx("div",{className:x,"data-prevent-default":!0,children:S}),e[18]=x,e[19]=S,e[20]=w):w=e[20];let _;return e[21]!==w||e[22]!==r?(_=s.jsxs("div",{className:h,children:[r,w]}),e[21]=w,e[22]=r,e[23]=_):_=e[23],_};function ye(p){"use forget";const e=L.c(24),{gizmo:t,hasConversations$:n,className:u}=p;pt(t.gizmo.id);const{items:o,hasNextPage:a,fetchNextPage:i,isLoading:m,isFetching:f,isFetchingNextPage:d}=gt(t.gizmo.id);let g,c;e[0]!==n||e[1]!==o.length?(g=()=>{n&&n.set(o.length>0)},c=[o.length,n],e[0]=n,e[1]=o.length,e[2]=g,e[3]=c):(g=e[2],c=e[3]),T.useEffect(g,c);let l;e[4]!==a||e[5]!==f||e[6]!==m||e[7]!==i?(l=S=>{if(m||S==null)return;const w=new IntersectionObserver(_=>{_[0].isIntersecting&&a&&!f&&i()});return w.observe(S),()=>{w.disconnect()}},e[4]=a,e[5]=f,e[6]=m,e[7]=i,e[8]=l):l=e[8];const h=l,r=o.length;let j;e[9]!==u?(j=q("mt-8 mb-14 contain-inline-size",u),e[9]=u,e[10]=j):j=e[10];let v;e[11]!==r||e[12]!==t||e[13]!==a||e[14]!==h||e[15]!==m||e[16]!==o?(v=(r||m)&&s.jsx(Rt,{gizmo:t,items:o??[],hasNextPage:a,infiniteScrollTriggerElementRef:h}),e[11]=r,e[12]=t,e[13]=a,e[14]=h,e[15]=m,e[16]=o,e[17]=v):v=e[17];let x;e[18]!==d?(x=d&&s.jsx("div",{className:"m-4 mb-5 flex justify-center",children:s.jsx(Ke,{})}),e[18]=d,e[19]=x):x=e[19];let y;return e[20]!==j||e[21]!==v||e[22]!==x?(y=s.jsxs("div",{className:j,children:[v,x]}),e[20]=j,e[21]=v,e[22]=x,e[23]=y):y=e[23],y}function Rt(p){"use forget";const e=L.c(21),{gizmo:t,items:n,hasNextPage:u,infiniteScrollTriggerElementRef:o}=p,a=A();let i;e[0]!==a?(i=Ye(a,"773249106"),e[0]=a,e[1]=i):i=e[1];const m=i,f=(t?.gizmo?.sharing?.subjects?.length??0)>0;let d;if(e[2]!==t||e[3]!==n){let r;e[5]!==t?(r=j=>"owner"in j&&j.owner?.user_id!==t.gizmo?.author.user_id,e[5]=t,e[6]=r):r=e[6],d=n.some(r),e[2]=t,e[3]=n,e[4]=d}else d=e[4];const c=m&&(f||d);let l;if(e[7]!==t||e[8]!==u||e[9]!==o||e[10]!==n||e[11]!==c){let r;e[13]!==t||e[14]!==u||e[15]!==o||e[16]!==n.length||e[17]!==c?(r=(j,v)=>{const x=u&&v===n.length-3?o:void 0;return s.jsx("li",{ref:x,className:"border-token-border-light border-t first:border-t-0 last:border-b-0",children:s.jsx("div",{className:"hover:bg-token-interactive-bg-tertiary-hover",children:s.jsx(ve,{conversation:j,gizmo:t,showAvatar:c})})},j.id)},e[13]=t,e[14]=u,e[15]=o,e[16]=n.length,e[17]=c,e[18]=r):r=e[18],l=n.map(r),e[7]=t,e[8]=u,e[9]=o,e[10]=n,e[11]=c,e[12]=l}else l=e[12];let h;return e[19]!==l?(h=s.jsx("ol",{children:l}),e[19]=l,e[20]=h):h=e[20],h}function be(p,e){"use forget";const t=L.c(14),n=ft(),u=A(),o=Fe(),a=ht(),i=vt.useStore(),m=n?.kind==="conversation"&&n.gizmoId!==e;let f;t[0]!==o||t[1]!==i||t[2]!==a?(f=async function(r){const{conversation:j,newGizmoId:v,previousGizmoId:x}=r;i.expandProject(v),await a({newGizmoId:v,conversation:j,previousGizmoId:x}),o(`/g/${v}/project`)},t[0]=o,t[1]=i,t[2]=a,t[3]=f):f=t[3];const d=f;let g;t[4]!==d||t[5]!==m||t[6]!==u||t[7]!==n||t[8]!==e||t[9]!==p?(g=()=>{if(!m)return;const{conversation:h,gizmoId:r}=n;if(e)return d({conversation:h,newGizmoId:e,previousGizmoId:r});J(u,j=>{const{onClose:v}=j;return s.jsx(ge,{onClose:v,onSuccess:x=>{if(!x)return;const y=d({conversation:h,newGizmoId:x,previousGizmoId:r});return oe.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:p}),y}})})},t[4]=d,t[5]=m,t[6]=u,t[7]=n,t[8]=e,t[9]=p,t[10]=g):g=t[10];const c=g;let l;return t[11]!==m||t[12]!==c?(l={canDropConversation:m,onDropConversation:c},t[11]=m,t[12]=c,t[13]=l):l=t[13],l}function Gt(p){"use forget";const e=L.c(44),{clientThreadId:t,gizmoId:n,currentModelId:u,onRequestCompletion:o}=p,a=A(),{data:i}=ue(n),m=Qe(a),f=Xe(Ve),{onDropConversation:d,canDropConversation:g}=be(void 0,n),[c,l]=T.useState(!1),h=me();let r;e[0]!==a||e[1]!==n||e[2]!==h?(r=jt(a)(n,h),e[0]=a,e[1]=n,e[2]=h,e[3]=r):r=e[3];const j=r;let v;e[4]!==g?(v=F=>{F.preventDefault(),g&&l(!0)},e[4]=g,e[5]=v):v=e[5];let x;e[6]!==g||e[7]!==d?(x=F=>{F.preventDefault(),g&&(l(!1),d())},e[6]=g,e[7]=d,e[8]=x):x=e[8];let y,S;e[9]!==g?(y=F=>{F.preventDefault(),g&&l(!0)},S=F=>{F.preventDefault(),g&&l(!1)},e[9]=g,e[10]=y,e[11]=S):(y=e[10],S=e[11]);const w=m?"last-standard":"none",_=f?"none":"standard";let C;e[12]!==i?(C=s.jsx(he,{gizmo:i}),e[12]=i,e[13]=C):C=e[13];let M;e[14]!==t||e[15]!==u||e[16]!==i||e[17]!==o?(M=i?s.jsx(Tt,{clientThreadId:t,isNewThread:!0,isProjectThread:!0,currentModelId:u,layoutMode:"center",onContinueGenerating:F=>o(Ft(F)),onRequestCompletion:async F=>o(await Ct(F)),hideHeader:!0}):s.jsx("div",{className:"bg-token-tertiary h-24 w-full rounded-3xl"}),e[14]=t,e[15]=u,e[16]=i,e[17]=o,e[18]=M):M=e[18];let P,z;e[19]!==i?(P=s.jsx(Dt,{gizmo:i}),z=i&&s.jsx(ye,{gizmo:i}),e[19]=i,e[20]=P,e[21]=z):(P=e[20],z=e[21]);let O;e[22]!==i?.gizmo||e[23]!==c?(O=c&&s.jsxs(ne,{children:[s.jsx(yt,{className:"h-12 w-12",style:{color:"#3C46FF"}}),s.jsx("h3",{className:"text-center",children:s.jsx(I,{...b.addConversationToNamedSnorlax,values:{projectName:i?.gizmo.display.name??"project"}})}),s.jsx("h4",{className:"text-center",children:s.jsx(I,{...b.moveConversation})})]}),e[22]=i?.gizmo,e[23]=c,e[24]=O):O=e[24];let U;e[25]!==P||e[26]!==z||e[27]!==O||e[28]!==C||e[29]!==M?(U=s.jsxs(It,{className:"[width:min(90cqw,var(--thread-content-max-width))]",children:[C,M,P,z,O]}),e[25]=P,e[26]=z,e[27]=O,e[28]=C,e[29]=M,e[30]=U):U=e[30];let R;e[31]!==U||e[32]!==w||e[33]!==_?(R=s.jsx(_t,{verticalMargin:"none",verticalPadding:w,horizontalPadding:_,children:U}),e[31]=U,e[32]=w,e[33]=_,e[34]=R):R=e[34];let G;e[35]!==R||e[36]!==v||e[37]!==x||e[38]!==y||e[39]!==S?(G=s.jsx("div",{onDragOver:v,onDrop:x,onDragEnter:y,onDragLeave:S,className:"flex max-h-full min-h-full flex-col pt-(--header-height)",children:R}),e[35]=R,e[36]=v,e[37]=x,e[38]=y,e[39]=S,e[40]=G):G=e[40];let H;return e[41]!==j||e[42]!==G?(H=s.jsx(pe,{value:j,children:G}),e[41]=j,e[42]=G,e[43]=H):H=e[43],H}function Lt(p){return p?.title}const Zt=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxConversationItem:ve,SnorlaxConversationItemOverflowMenu:je,SnorlaxConversationList:ye,SnorlaxHeader:he,SnorlaxSplashScreen:Gt,useProjectsDragDrop:be},Symbol.toStringTag,{value:"Module"}));export{je as S,Vt as a,Zt as b,be as u};
//# sourceMappingURL=m9o58vphd3ndk69b.js.map
