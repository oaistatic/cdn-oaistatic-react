const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jr37fjwvujz2v9mf.js","assets/cs7toih8jegb7teq.js","assets/dmck639k4dv7claj.js","assets/root-mdlgku96.css","assets/mmilw72p73kj15mv.js","assets/juhpprtcv8tvp5w6.js","assets/g874r21dl3vt5vkr.js","assets/hnw079jsdm76umup.js","assets/conversation-small-b5ztx8w5.css","assets/hp08qw6yu0x90xkd.js","assets/dia5a65grp9qhigk.js","assets/npls3ia9oml5pnfm.js","assets/kzn4ha0q32870lv3.js"])))=>i.map(i=>d[i]);
import{e as I,d as F,j as e,M as N,r as E,A as P}from"./cs7toih8jegb7teq.js";import{bV as B,e as M,z as C,c3 as R,de as W,eg as z,B as _,p as T,C as L,aw as k,ax as D,ee as V,a0 as A}from"./dmck639k4dv7claj.js";import{u as b,r as O}from"./juhpprtcv8tvp5w6.js";import{S as H}from"./mmilw72p73kj15mv.js";import{i7 as Q,cX as G,fw as X}from"./hnw079jsdm76umup.js";import{u as q}from"./nsa6r7grrfqk0ahy.js";import{d as J}from"./kl7c6054usfnqmd4.js";import{F as K}from"./g874r21dl3vt5vkr.js";import"./hp08qw6yu0x90xkd.js";const S=F({downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},title:{id:"walnut.title",defaultMessage:"Preview"},tooltip:{id:"walnut.tooltip",defaultMessage:"This is a web preview and may not reflect exact formatting. Download to open in your preferred software for best results."}}),U=({onClose:s,onPlay:a,extension:o,contentType:t,clientThreadId:g})=>{const h=I(),n=B(),w=t==="presentation",{formatMessage:m}=I(),f=m(S.title),j=m(S.tooltip);M();const{focusedWalnutId:u,presentationMap:r}=b(),i=u?r[u]:void 0,y=i?.fileName??(t==="presentation"?"presentation.pptx":"spreadsheet.xlsx"),d=!1,v=i?.fileBlob,l=h.formatMessage(S.downloadFileError),x=q(!1,g,u??"",()=>{},()=>{n.danger(l,{toastId:"post_sharing_modal_download_error",loggingTitle:l,loggingDescription:"Error message when a file download fails"})});return e.jsxs("div",{className:C("text-token-text-secondary border-token-border-light relative flex w-full items-center justify-between border-b px-3 py-2",d),children:[e.jsxs("div",{className:"z-10 flex flex-row gap-2",children:[e.jsx(Q,{onClick:s,children:e.jsx(R,{})}),!1]}),e.jsxs("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-1",children:[e.jsx(K,{fileName:f??null}),e.jsx("div",{className:"text-token-text-primary flex flex-row items-center truncate text-sm font-medium",children:e.jsx(W,{label:j,theme:"white",defaultOpen:!0,customBackgroundColorClassName:"bg-[#6B91F1]",labelClassName:"text-white font-light",side:"bottom",disabled:d,children:e.jsxs("div",{className:"flex flex-row items-center",children:[f,e.jsx(z,{className:"ms-1 size-4"})]})})}),o&&e.jsx("div",{className:"text-token-text-tertiary ms-2 text-sm",children:o})]}),e.jsxs("div",{className:"z-10 flex items-center gap-1",children:[!1,e.jsx(_,{color:"ghost",size:"small",onClick:async()=>{if(v)J(v,y);else{const{data:c}=await x.refetch();if(c===void 0||c?.status!=="success"){n.danger(l,{toastId:"post_sharing_modal_download_error",loggingTitle:l,loggingDescription:"Error message when a file download fails"});return}const p=document.createElement("a");p.href=c.download_url,p.click()}},children:e.jsx(G,{})}),w&&e.jsx(_,{color:"primary",onClick:a,size:"small",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{}),e.jsx("span",{className:"hidden sm:block",children:e.jsx(N,{id:"walnut.play",defaultMessage:"Play Slideshow"})})]})})]})]})},Y=k(()=>D(()=>import("./jr37fjwvujz2v9mf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(s=>s.CanvasRenderer)),Z=k(()=>D(()=>import("./kzn4ha0q32870lv3.js").then(s=>s.s),__vite__mapDeps([12,1,7,2,3,8,4,5,6,9])).then(s=>s.SpreadsheetRenderer));function $({isOpen:s,onClose:a,clientThreadId:o}){const[t,g]=E.useState(!1),{presentationMap:h,focusedWalnutId:n,setSelectedSlideIdx:w}=b(),m=M(),f=T(m,"3245235608"),[j,u]=E.useState(!1),r=n?h[n]:null,{presentation:i,fileName:y,workbook:d,document:v}=r??{};if(!n||!r)return null;const l=i?"presentation":d?"spreadsheet":"none",x=l==="presentation"&&i&&!t,c=l==="spreadsheet"&&d&&!t;return e.jsx(L,{testId:"modal-walnut-content",type:"success",size:"fullscreen",isOpen:s,onClose:a,visuallyHiddenHeader:!0,children:e.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[e.jsx(U,{onClose:a,onPlay:()=>g(!t),title:y,contentType:l,clientThreadId:o}),x&&e.jsx(Y,{presentation:i,selectedSlideIdx:r.selectedSlideIdx,setSelectedSlideIdx:p=>w(n,p),isWalnutV2Enabled:f,isEditing:j,setIsEditing:u}),c&&e.jsx(Z,{workbook:d,selectedSheetIdx:r.selectedSheetIdx}),!1,t&&e.jsx(H,{startIndex:0,onExit:a,walnutId:n}),!x&&!c&&!0&&!t&&e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(N,{id:"walnut.noFile",defaultMessage:"No file selected."})})]})})}const ee=({clientThreadId:s})=>{const{isOpen:a,close:o}=b(),t=a?e.jsx($,{isOpen:a,onClose:o,clientThreadId:s}):null;return e.jsx(P,{children:t},s)},ce=s=>{const a=E.useRef(null);return e.jsx(V,{ref:a,onError:(o,t)=>{O(),setTimeout(()=>{a.current?.resetErrorBoundary()}),A.addError(o,{componentStack:t})},name:"walnut-focused-view",children:e.jsx(ee,{...s})})};export{ce as WalnutFocusedViewManager};
//# sourceMappingURL=juvyogfe1z35iu4h.js.map
