import{r as F,O as E,j as o}from"./cs7toih8jegb7teq.js";import{fk as Q,aF as f,e as U,G as K,b9 as Y,k8 as _,f1 as q,gc as H,f2 as J,bi as V,mY as X,p as Z,hf as $,T as r,mD as ee}from"./dmck639k4dv7claj.js";import{aO as oe,aP as se,aQ as ae,aR as te,aS as ne,aT as re}from"./hnw079jsdm76umup.js";import{P as ie}from"./lxgn8k46ba24438b.js";function ue({clientThreadId:e,currentModelId:t,disableDraftPersistence:C=!1,isNewThread:h,isProjectThread:M=!1,onRequestCompletion:S,onContinueGenerating:P,headerClassName:x,hideHeader:j,onlyAllowImageUploads:z,layoutMode:b="bottom"}){const{modelsData:n,externalModelsLoading:k}=Q(),[i,l,c,w,A]=f(e,s=>{const g=r.getCurrentNode(s);return[g.message.clientMetadata?.errType!=null&&g.message.clientMetadata.errType!=="info",ee(r.getCurrentNode(s).message),s?.mode,!!s?.continuingFromSharedPostId,s?.continuingFromSharedProjectConversationId!=null]}),m=U(),d=K(m),N=Y(),a=oe({clientThreadId:e}),{isOpen:v,onClose:R}=se({type:"just-hit-rate-limit"}),y=F.useMemo(()=>a?!1:!i&&l,[i,l,a]),G=a,I=_(e),T=f(e,r.hasRecentPIMWarning),D=q(I).data,L=H(),u=T?"pimBlock":D?.gizmo.tags?.includes(J.WorkspaceDisabled)&&!L?"workspaceDisallowsGizmo":n?.models.size===0?"noModelsAvailable":c?.kind===V.GizmoTest&&c.gizmo_id==null?"noTestGizmoId":null,O=E(),p=X(),W=O.action==="moderate",B=Z(m,"1860647109");return o.jsxs(o.Fragment,{children:[o.jsx(ae,{composerController:N,clientThreadId:e,currentModelId:t,isCompletionInProgress:a}),o.jsx("div",{className:"flex justify-center empty:hidden",children:p&&W&&B?o.jsx(te,{}):null}),v?o.jsx(ne,{onClose:R}):null,M&&o.jsx(re,{clientThreadId:e,accountUserId:d?.normalizedAccountUserId}),o.jsx(ie,{clientThreadId:e,disableDraftPersistence:C,onCreateNewCompletion:S,onContinueGenerating:P,currentModelId:t,account:d,currentModelConfig:$(n?.models,t),areModelsLoading:k,isNewThread:h,isCompletionInProgress:a,className:"w-full",canContinue:y,disabled:!!u,disabledReason:u??void 0,canPause:G,isInteractableSharedThread:p||w||A,headerClassName:x,hideHeader:j,onlyAllowImageUploads:z,layoutMode:b,modelsData:n},e)]})}export{ue as P};
//# sourceMappingURL=hsurwbv79wrpc9dg.js.map
