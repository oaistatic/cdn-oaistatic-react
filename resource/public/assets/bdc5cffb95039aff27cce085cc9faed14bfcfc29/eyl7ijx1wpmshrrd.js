import{r as E,j as x}from"./cs7toih8jegb7teq.js";import{mv as u,bt as l,g as R,T as L,pp as y}from"./dmck639k4dv7claj.js";import{e_ as F,e$ as c,c4 as g,c3 as k}from"./hnw079jsdm76umup.js";function v(d,i){return I[i]}const I={inProgress:"Running tool",finished:"Finished running tool",error:"Error running tool"};function G({messages:d,isRequestActive:i,isLastMessageInTurn:S,clientThreadId:f}){const h=d.filter(s=>s.author.role===l.Assistant&&s.recipient&&u(s.recipient)),p=R(f),r=p?L.getConversationTurns(p).flatMap(s=>s.messages):[],e=r.findLastIndex(s=>s.author.role===l.Assistant&&s.recipient&&u(s.recipient)),a=e>=0?r[e]:void 0,o=a&&a.recipient,T=e>=0?r.slice(e+1).find(s=>s.author.role===l.Assistant&&(!s.recipient||!u(s.recipient))):void 0,m=T!=null&&y(T),C=e>=0&&r.slice(e+1).some(s=>s.author.role===l.Tool&&s.author.name===o),A=a?.id,n=F(s=>A?s.getToolState(f,A):void 0);let t=null;C||n?.status===c.Finished?t={key:"finished",status:g.Finished}:n?.status===c.Error?t={key:"error",status:g.Error}:(n?.status===c.Running||i&&S&&!n)&&(t={key:"inProgress",status:g.Running});const M=E.useMemo(()=>!o||!t?null:v(o,t.key),[o,t]);return h.length===0||!o||!h.some(s=>s.id===a?.id)||m||!t?null:x.jsx(k,{highlightedCommand:M,showWorkUserSetting:!1,status:t.status,children:null})}export{G as BrowserToolMessage};
//# sourceMappingURL=eyl7ijx1wpmshrrd.js.map
