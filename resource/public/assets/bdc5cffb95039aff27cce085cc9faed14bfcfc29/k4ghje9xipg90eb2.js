import{e as v,a as oe,r as y,j as e,d as L,M as x,c as B}from"./cs7toih8jegb7teq.js";import{dI as ne,dJ as re,ae,b1 as se,dK as U,dL as ce,dM as ie,dN as le,dO as de,dP as ue,dQ as me,dR as pe,dS as ge,dT as fe,dU as he,b3 as Ce,dV as xe,dW as Me,V as be}from"./hnw079jsdm76umup.js";import{u as Te}from"./lox5zdwgg3gy3k4z.js";import{d as ye,u as G,bQ as Pe,V as P,L as S,P as k,aq as O,l as Se,k4 as Y,gs as Ne,gq as je,go as ve,bV as _e,p2 as Ee,hr as Re,e as ke,p as Oe,C as we,p3 as w,hE as Fe,cy as j,gy as Ie,B as De,t as Ae,z as F,p4 as Le,$ as I}from"./dmck639k4dv7claj.js";import{u as Be}from"./nfubiloo9rdxk3kj.js";const V=ye.hasDismissedPromoRedemption,N="month",q="year",$="hour";function Ue(r){return r==="chatgptplusplan"?"Plus":r==="chatgptgoplan"?"Go":(Se.warn("Unsupported plan name for promo redemption banner, falling back to Plus: ",{planName:r}),"Plus")}function Qe(){const{eligible:r}=G(V);return P.getItem(S.PromoCode)?r:!1}function Xe(){const r=v(),{markAsViewed:t}=G(V),c=oe(),s=Pe(),{initialBillingDetails:o}=Te(s,!0),p=P.getItem(S.PromoCode),{promoMetadata:i}=ne(p),l=i!=null&&!i.schedule,C=i?.plan_name&&Ue(i.plan_name)||"";if(y.useEffect(()=>{l&&(k.logEvent("Promo Redemption Banner Shown",{promoCode:p}),O.logEvent("chatgpt_promo_redemption_banner_shown"))},[l,p]),!l)return null;const d=i.plan_name==="chatgptgoplan"?re():ae(),m=Ye(r,o,i,d,C),u=Ve(r,o,i,d),g=e.jsxs("div",{className:"grow",children:[e.jsx("div",{className:"mb-0.5 font-semibold",children:m}),e.jsx("span",{className:"text-token-text-secondary",children:u})]});return e.jsx(se,{onPrimaryCtaClick:()=>{const h=P.getItem(S.PromoCode);P.removeItem(S.PromoCode),t(),c(`/p/${h}#pricing`),k.logEvent("Promo Redemption Banner Redeem Button Clicked",{promoCode:h}),O.logEvent("chatgpt_promo_redemption_banner_redeem_button_clicked")},primaryCtaText:r.formatMessage(M.bannerPrimaryCta),onDismiss:t,content:g})}function Ge({billingDetails:r,planName:t}){const c=r.currency;let s;switch(c){case ve:s=t==="chatgptgoplan"?pe:ge;break;case je:s=t==="chatgptgoplan"?ue:me;break;case Ne:s=t==="chatgptgoplan"?le:de;break;default:s=t==="chatgptgoplan"?ce:ie}return s}function z(r,t){const{discount:c}=t;let s=Ge({billingDetails:r,planName:t.plan_name});if("percentage"in c){const o=c?.percentage/100;s=s*(1-o)}else if("value"in c){const o=c?.value;s-=o}return s}function Ye(r,t,c,s,o){const{discount:p,duration:i}=c,{currencySymbol:l}=U(s,t.currency),C=i?i.period:N,d=i?i.num_periods:1;if("percentage"in p){const m=p?.percentage;return r.formatMessage(M.bannerTitleForPercentageDiscount,{discount:`${m}`,planName:o})}else if("value"in p){const m=z(t,c),u=l.code.defaultMessage?.toString()??Y,g=r.formatNumber(m,{style:"currency",currency:u,minimumFractionDigits:0,maximumFractionDigits:2});let h;switch(C){case N:d===1?h=r.formatMessage(M.bannerTitleForSingleMonth,{cost:g,planName:o}):h=r.formatMessage(M.bannerTitleForPluralMonths,{cost:g,num_months:d,planName:o});break;case q:d===1?h=r.formatMessage(M.bannerTitleForSingleYear,{cost:g,planName:o}):h=r.formatMessage(M.bannerTitleForPluralYears,{cost:g,num_years:d,planName:o});break;case $:throw new Error("Period 'hour' is not supported")}return h}}function Ve(r,t,c,s){const{duration:o}=c,{currencySymbol:p}=U(s,t.currency),i=o?o.period:N,l=o?o.num_periods:1,C=p.code.defaultMessage?.toString()??Y,d=z(t,c),m=r.formatNumber(d,{style:"currency",currency:C,minimumFractionDigits:0,maximumFractionDigits:2});let u;switch(i){case N:l===1?u=r.formatMessage(M.bannerContentForSingleMonth,{cost:m}):u=r.formatMessage(M.bannerContentForPluralMonths,{num_months:l,cost:m});break;case q:l===1?u=r.formatMessage(M.bannerContentForSingleYear,{cost:m}):u=r.formatMessage(M.bannerContentForPluralYears,{num_years:l,cost:m});break;case $:throw new Error("Period 'hour' is not supported")}return u}const M=L({bannerTitleForPluralMonths:{id:"promoRedemptionBannerTitleForPluralMonths",defaultMessage:"Get {planName} for {cost}/month for the first {num_months} months"},bannerTitleForSingleMonth:{id:"promoRedemptionBannerTitleForSingleMonth",defaultMessage:"Get {planName} for {cost}/month for the first month"},bannerTitleForPluralYears:{id:"promoRedemptionBannerTitleForPluralYears",defaultMessage:"Get {planName} for {cost}/year for the first {num_years} years"},bannerTitleForSingleYear:{id:"promoRedemptionBannerTitleForSingleYear",defaultMessage:"Get {planName} for {cost}/year for the first year"},bannerTitleForPercentageDiscount:{id:"promoRedemptionBannerTitleForPercentageDiscount",defaultMessage:"Finish redeeming your {discount}% off code for {planName}"},bannerContentForPluralMonths:{id:"promoRedemptionBannerContentForPluralMonths",defaultMessage:"Get {num_months} months of expanded access for only {cost} per month."},bannerContentForSingleMonth:{id:"promoRedemptionBannerContentForSingleMonth",defaultMessage:"Get 1 month of expanded access for only {cost} per month."},bannerContentForPluralYears:{id:"promoRedemptionBannerContentForPluralYears",defaultMessage:"Get {num_years} years of expanded access for only {cost} per year."},bannerContentForSingleYear:{id:"promoRedemptionBannerContentForSingleYear",defaultMessage:"Get 1 year of expanded access for only {cost} per year."},bannerPrimaryCta:{id:"promoRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}}),D=1024*1024*4,A=()=>{"use forget";const r=B.c(1);let t;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=e.jsx("span",{className:"text-token-text-tertiary font-normal",children:e.jsx(x,{...a.optionalText})}),r[0]=t):t=r[0],t},qe=r=>{"use forget";const t=B.c(15),{previewUrl:c,isDragActive:s}=r,o=v(),p=Ae();if(!c||s){const u=s?"border-green-600 bg-green-600/30 text-green-600":"border-token-border-heavy text-token-text-tertiary";let g;t[0]!==u?(g=F("rounded-xl border border-dashed p-4",u),t[0]=u,t[1]=g):g=t[1];let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=e.jsx(be,{className:"h-6 w-6"}),t[2]=h):h=t[2];let T;return t[3]!==g?(T=e.jsx("span",{className:g,children:h}),t[3]=g,t[4]=T):T=t[4],T}const i=p&&"bg-white";let l;t[5]!==i?(l=F("bg-token-bg-tertiary overflow-hidden rounded-xl border",i),t[5]=i,t[6]=l):l=t[6];let C;t[7]!==o?(C=o.formatMessage(a.iconPreviewAlt),t[7]=o,t[8]=C):C=t[8];let d;t[9]!==c||t[10]!==C?(d=e.jsx("img",{src:c,alt:C,className:"h-14 w-14 object-cover"}),t[9]=c,t[10]=C,t[11]=d):d=t[11];let m;return t[12]!==l||t[13]!==d?(m=e.jsx("span",{className:l,children:d}),t[12]=l,t[13]=d,t[14]=m):m=t[14],m},$e=r=>new Promise((t,c)=>{const s=new FileReader;s.onloadend=()=>t(s.result),s.onerror=()=>c(),s.readAsDataURL(r)}),Ze=({onClose:r})=>{"use forget";const t=_e(),{mutateAsync:c,isPending:s}=Ee(Re.CONNECTOR_SETTING),o=v(),[p,i]=y.useState(!1),[l,C]=y.useState("OAUTH"),[d,m]=y.useState(!1),u=fe({defaultValues:{name:"",url:"",description:""},onSubmit:async({value:n})=>{const f=g?await $e(g):null;let R=[];if(l==="OAUTH")try{R=[await Le(n.url.trim())]}catch{t.danger(o.formatMessage(a.oauthConfigError));return}try{const b=await c({name:n.name.trim(),mcp_url:n.url.trim(),description:n.description.trim(),logo_url:f,supported_auth:R});if(!b.implementsRetrievable){E(!0);return}r(b.connector?.id)}catch(b){if(b instanceof I&&b.status===409)t.danger(o.formatMessage(a.duplicateName));else{const te=b instanceof I&&typeof b.detail?.details=="string"?b.detail.details:void 0;t.danger(o.formatMessage(a.createConnectorError),{description:te})}return}},validators:{onSubmit:({value:n})=>{const f={};return n.name.trim()||(f.name=o.formatMessage({id:"vtyh9X",defaultMessage:"Name is required"})),n.url.trim()?n.url.trim().match(/^https?:\/\//)||(f.url=o.formatMessage({id:"7hn6Jq",defaultMessage:"URL is invalid"})):f.url=o.formatMessage({id:"7WV2q4",defaultMessage:"URL is required"}),{fields:f}}}}),[g,h]=y.useState(null),[T,H]=y.useState(null),[_,E]=y.useState(!1),K=ke(),W=Oe(K,"735368229"),J=n=>{if(T&&URL.revokeObjectURL(T),n.size>D){t.danger(o.formatMessage(a.iconTooLarge));return}h(n);const f=URL.createObjectURL(n);H(f)},{getRootProps:Q,getInputProps:X,isDragActive:Z}=Be({accept:{"image/*":[]},multiple:!1,noKeyboard:!0,noClick:!0,maxSize:D,onDropAccepted:n=>{n.length>0&&J(n[0])},onDropRejected:()=>{t.danger(o.formatMessage(a.iconInvalid))}}),ee=n=>{n.preventDefault(),d&&(i(!0),u.handleSubmit())};return e.jsx(we,{testId:"modal-create-custom-connector",title:e.jsx("span",{className:"flex items-center gap-1",children:e.jsx(x,{...a.createCustomConnectorModalTitle,values:{betaBadge:e.jsx(Me,{})}})}),type:"success",isOpen:!0,onClose:()=>r(),showCloseButton:!0,size:"custom",className:"max-w-[448px]",children:e.jsxs("form",{onSubmit:ee,className:"flex flex-col gap-4",children:[e.jsxs("label",{...Q({className:"flex cursor-pointer items-center gap-2.5"}),children:[e.jsx("input",{...X()}),e.jsx(qe,{previewUrl:T,isDragActive:Z}),e.jsxs("span",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium",children:e.jsx(x,{...a.iconTitle,values:{optionalText:e.jsx(A,{})}})}),e.jsx("span",{className:"text-token-text-tertiary text-xs",children:e.jsx(x,{...a.iconDescription})})]})]}),e.jsx(u.Field,{name:"name",children:n=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-connector-name",className:"mb-1 block text-sm font-medium",children:e.jsx(x,{...a.nameTitle})}),e.jsx(w,{name:"custom-connector-name",value:n.state.value,onChange:f=>{n.handleChange(f.target.value),p&&i(!1)},ariaLabel:o.formatMessage(a.nameTitle),placeholder:o.formatMessage(a.namePlaceholder),error:p?n.state.meta.errors[0]:void 0})]})}),e.jsx(u.Field,{name:"description",children:n=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-connector-description",className:"mb-1 block text-sm font-medium",children:e.jsx(x,{...a.descriptionTitle,values:{optionalText:e.jsx(A,{})}})}),e.jsx(Fe,{name:"custom-connector-description",value:n.state.value,onChange:f=>n.handleChange(f.target.value),ariaLabel:o.formatMessage(a.descriptionTitle,{optionalText:o.formatMessage(a.optionalText)}),placeholder:o.formatMessage(a.descriptionPlaceholder)})]})}),e.jsx(u.Field,{name:"url",children:n=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-connector-url",className:"mb-1 block text-sm font-medium",children:e.jsx(x,{...a.urlTitle})}),e.jsx(w,{name:"custom-connector-url",value:n.state.value,onChange:f=>{n.handleChange(f.target.value),p&&i(!1),_&&E(!1)},ariaLabel:o.formatMessage(a.urlTitle),placeholder:o.formatMessage(a.urlPlaceholder),error:_?e.jsx("span",{children:e.jsx(x,{...W?a.developerModeConformanceError:a.conformanceError,values:{link:f=>e.jsx(j,{href:"https://platform.openai.com/docs/mcp",openNewTab:!0,children:f})}})}):p?n.state.meta.errors[0]:void 0})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-connector-auth",className:"mb-1 block text-sm font-medium",children:e.jsx(x,{...a.authTypeTitle})}),e.jsx(he,{options:[{label:o.formatMessage(a.oauthOption),value:"OAUTH"},{label:o.formatMessage(a.noAuthOption),value:"NONE"}],value:l,onValueChange:n=>C(n),triggerId:"custom-connector-auth",triggerClassName:"w-full justify-between border-token-border-medium"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"border-token-border-status-warning bg-token-bg-status-warning text-token-text-status-warning flex items-center gap-2 rounded-t-2xl border border-b-0 px-4 py-3 text-sm font-medium",children:[e.jsx(Ie,{className:"h-6 w-6"}),e.jsx("span",{children:e.jsx(x,{...a.customConnectorBanner,values:{link:n=>e.jsx(j,{href:"http://platform.openai.com/docs/mcp#risks-and-safety",openNewTab:!0,className:"inline",children:n},"custom-connector-banner-link")}})})]}),e.jsxs("label",{htmlFor:"trust-checkbox",className:"flex items-center gap-3 rounded-b-2xl border border-gray-200 bg-white px-4 py-4 text-sm dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(Ce,{id:"trust-checkbox",onChange:()=>m(n=>!n),disabled:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:e.jsx(x,{...a.customConnectorTrustTitle})}),e.jsx("p",{className:"text-token-text-tertiary text-sm",children:e.jsx(x,{...a.customConnectorTrustSubtitle})})]})]})]}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs(j,{href:"http://platform.openai.com/docs/mcp",openNewTab:!0,className:"text-token-text-tertiary text-sm",children:[e.jsx(xe,{className:"me-1.5 inline h-4.5 w-4.5"}),e.jsx(x,{...a.readTheGuideLink})]}),e.jsx(u.Subscribe,{selector:n=>[n.isSubmitting],children:([n])=>e.jsx(De,{type:"submit",loading:n,disabled:!d,children:e.jsx(x,{...a.createButton})})})]})]})})},a=L({createCustomConnectorModalTitle:{id:"createCustomConnectorModal.title",defaultMessage:"New Connector {betaBadge}"},iconTitle:{id:"createCustomConnectorModal.iconTitle",defaultMessage:"Icon {optionalText}"},iconDescription:{id:"createCustomConnectorModal.iconDescription",defaultMessage:"Minimum size: 128 x 128 px"},nameTitle:{id:"createCustomConnectorModal.nameTitle",defaultMessage:"Name"},urlTitle:{id:"createCustomConnectorModal.urlTitle",defaultMessage:"MCP Server URL"},descriptionTitle:{id:"createCustomConnectorModal.descriptionTitle",defaultMessage:"Description {optionalText}"},optionalText:{id:"createCustomConnectorModal.optionalText",defaultMessage:"(optional)"},readTheGuideLink:{id:"createCustomConnectorModal.readTheGuideLink",defaultMessage:"Read the guide"},createButton:{id:"createCustomConnectorModal.createButton",defaultMessage:"Create"},iconPreviewAlt:{id:"createCustomConnectorModal.iconPreviewAlt",defaultMessage:"Icon preview"},namePlaceholder:{id:"createCustomConnectorModal.namePlaceholder",defaultMessage:"Custom Tool"},urlPlaceholder:{id:"createCustomConnectorModal.urlPlaceholder",defaultMessage:"https://example.com/sse"},descriptionPlaceholder:{id:"createCustomConnectorModal.descriptionPlaceholder",defaultMessage:"Explain what it does in a few words"},iconTooLarge:{id:"createCustomConnectorModal.iconTooLarge",defaultMessage:"Icon is too large"},iconInvalid:{id:"createCustomConnectorModal.iconInvalid",defaultMessage:"Invalid icon"},authTypeTitle:{id:"createCustomConnectorModal.authTypeTitle",defaultMessage:"Authentication"},oauthOption:{id:"createCustomConnectorModal.oauthOption",defaultMessage:"OAuth"},noAuthOption:{id:"createCustomConnectorModal.noAuthOption",defaultMessage:"No authentication"},oauthConfigError:{id:"createCustomConnectorModal.oauthConfigError",defaultMessage:"Error fetching OAuth configuration"},customConnectorBanner:{id:"createCustomConnectorModal.customConnectorBanner",defaultMessage:"Beta intended for developer use only. <link>Learn more</link>"},customConnectorTrustTitle:{id:"createCustomConnectorModal.customConnectorTrustTitle",defaultMessage:"I trust this application"},customConnectorTrustSubtitle:{id:"createCustomConnectorModal.customConnectorTrustSubtitle",defaultMessage:"Custom connectors are not verified by OpenAI. Malicious developers may attempt to steal your data."},conformanceError:{id:"createCustomConnectorModal.conformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>"},developerModeConformanceError:{id:"createCustomConnectorModal.developerModeConformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>. Enable Developer Mode in Advanced Connector Settings to create custom connectors that support arbitrary tool calls"},createConnectorError:{id:"createCustomConnectorModal.createConnectorError",defaultMessage:"Error creating connector"},duplicateName:{id:"createCustomConnectorModal.duplicateName",defaultMessage:"Connector name already exists"}});export{Ze as C,Xe as P,V as a,Qe as u};
//# sourceMappingURL=k4ghje9xipg90eb2.js.map
