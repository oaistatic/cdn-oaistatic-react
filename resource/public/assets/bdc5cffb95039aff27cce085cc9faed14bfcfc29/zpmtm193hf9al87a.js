import{j as r,m,d as D,r as _,M as f}from"./cs7toih8jegb7teq.js";import{z as v,gS as O,fU as w,hR as N,qW as M,de as A,P,aI as x}from"./dmck639k4dv7claj.js";import{hf as k,d3 as H,d4 as l,l4 as V,eE as C,lL as G}from"./hnw079jsdm76umup.js";import{i as U}from"./ns51nblw8ziscsgd.js";import{N as F}from"./jy1u8exw8iz2slve.js";import{u as g}from"./kwms1ugj73bjxgnk.js";const rs=({gap:s,padding:t=4,size:e=3})=>r.jsx(m.div,{className:v("grid h-full max-w-full flex-1 grid-cols-3 items-center"),style:{gap:s,padding:t},children:k(3,i=>r.jsx(m.div,{className:"dark:bg-white-400 aspect-square rounded-full bg-gray-400",animate:{translateY:["0%","-50%","0%","0%","0%"]},style:{translateX:.5,width:e,height:e},transition:{repeat:1/0,type:"keyframes",delay:i/10,duration:.7}},i))});var R=(s=>(s.javascript="javascript",s.typescript="typescript",s.bash="bash",s.zsh="zsh",s.html="html",s.css="css",s.python="python",s.json="json",s.sql="sql",s.go="go",s.yaml="yaml",s.java="java",s.rust="rust",s.cpp="cpp",s.swift="swift",s.php="php",s.xml="xml",s.ruby="ruby",s.haskell="haskell",s.kotlin="kotlin",s.csharp="csharp",s.c="c",s.objectivec="objectivec",s.r="r",s.lua="lua",s.dart="dart",s.scala="scala",s.perl="perl",s.commonlisp="commonlisp",s.clojure="clojure",s.ocaml="ocaml",s.powershell="powershell",s.verilog="verilog",s.dockerfile="dockerfile",s.vue="vue",s.other="other",s))(R||{});function q(s){if(H(s))switch(s){case l.CODE_REACT:return"typescript";default:return O(s.replace(/^code\//,""),Object.values(R),"other")}}function j(s){return s.includes("'react'")||s.includes('"react"')}function as(s,t){switch(s){case l.CODE_HTML:case l.CODE_REACT:return!0;case l.CODE_JAVASCRIPT:case l.CODE_TYPESCRIPT:return j(t);default:return!1}}function ns(s){return w([l.CODE_PYTHON],s)}function ls(s,t){let e=q(s)??null;return(j(t)||s===l.CODE_REACT)&&(e="react"),e&&U(e)?e:null}const B=36,cs=-24,W=280,os=W+B,ps=40;var X=(s=>(s.COLLAPSED="collapsed",s.EXPANDED="expanded",s))(X||{});function z(s){return"children"in s}const $=s=>s.type==="text"&&"value"in s&&typeof s.value=="string",u="hiveTranscript",S=/(::hiveTranscript\{([^}]+)\})/g,Y=/\btimestamp\s*=\s*["']?(\d+)["']?(?=\s|,|$)/,J=()=>s=>{N(s,t=>{if(t.type!=="paragraph"&&t.type!=="tableCell"||!z(t)||!Array.isArray(t.children))return;const e=[];for(const i of t.children)if($(i)&&i.value.includes(`::${u}`)){let a=0,c;for(;(c=S.exec(i.value))!=null;){c.index>a&&e.push({type:"text",value:i.value.slice(a,c.index)});const o=c[2],n=Y.exec(o)?.[1];n&&Number.isInteger(Number(n))&&e.push({type:"textDirective",name:u,attributes:{timestamp:n},data:{hName:u,hProperties:{timestamp:n}},children:[],position:i.position}),a=S.lastIndex}a<i.value.length&&e.push({type:"text",value:i.value.slice(a)})}else e.push(i);t.children=e})},ms=Object.freeze(Object.defineProperty({__proto__:null,HIVE_LOG_DIRECTIVE_NAME:u,hiveLogDirectivePlugin:J},Symbol.toStringTag,{value:"Module"})),K=[M,u],us=()=>s=>{N(s,"textDirective",t=>{K.includes(t.name)||(t.type="text",t.value=`:${t.name}`)})};function hs({isDisabled:s=!1,isCodePreviewable:t=!1,isCodeRunning:e,disabledTooltip:i,clientThreadId:a,onClick:c}){const[o,h]=_.useState(e),[{width:n},I]=g();_.useEffect(()=>{let d=null;return!e||t?h(e):(d=setTimeout(()=>{h(e)},200),()=>clearTimeout(d))},[e,t]);const T=()=>({conversation_id:a?x(a):void 0}),b=()=>{P.logEventWithStatsig("Canvas Run Code Button Clicked","chatgpt_canvas_run_code_button_clicked",T()),setTimeout(()=>c?.())},E=r.jsx(m.button,{disabled:s||e&&!o,onClick:b,className:v("btn btn-primary ms-1 rounded-full sm:min-w-28",o?v(F,"border-transparent"):"hover:bg-opacity-90"),animate:{width:n??0},initial:{width:n??0},transition:{type:"spring",bounce:.24,duration:.4},children:r.jsx("div",{ref:I,children:o?r.jsxs(m.div,{className:"flex items-center gap-1.5 ps-1 pe-1 sm:ps-2 sm:pe-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(V,{className:"icon"}),r.jsx("span",{className:"hidden sm:inline",children:r.jsx(f,{...p.stopCode})})]}):r.jsxs(m.div,{className:"flex items-center gap-1.5 ps-1 pe-1 sm:ps-2 sm:pe-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[r.jsx(C,{className:"icon"}),r.jsx("span",{className:"hidden whitespace-nowrap sm:inline",children:r.jsx(f,{...t?p.previewCode:p.runCode})})]})})}),y=s&&i?i:e?null:r.jsx(f,{...t?p.previewCodeTooltip:p.runCodeTooltip});return y?r.jsx(A,{label:y,children:E}):E}const p=D({previewCode:{id:"M1TBxe",defaultMessage:"Preview"},runCode:{id:"LiKr5n",defaultMessage:"Run code"},stopCode:{id:"nCwG4+",defaultMessage:"Stop"},runCodeTooltip:{id:"UeNB/S",defaultMessage:"See output and debug"},previewCodeTooltip:{id:"/qJKMH",defaultMessage:"Preview in canvas"}});class Q{constructor(t){this.params=t}get isReadonly(){return Object.values(this.params).some(t=>!!t)}get isHistoricalVersion(){return!!this.params.isHistoricalVersion}get isStreaming(){return!!this.params.isTextdocStreaming||!!this.params.isRequestActive}get isTextdocStreaming(){return!!this.params.isTextdocStreaming}get isStreamingFromNative(){return this.isStreaming&&this.params.streamingSource===G.NATIVE}get isRestoring(){return!!this.params.isRestoring}get isShowingChanges(){return!!this.params.isShowingChanges}get isReadonlyFromQueryParam(){return!!this.params.isReadonlyFromQueryParam}}const fs=s=>new Q(s);export{ps as C,W as E,X as G,u as H,rs as T,fs as a,q as b,os as c,ns as d,hs as e,R as f,ls as g,K as h,as as i,B as j,z as k,us as l,p as m,J as n,cs as o,ms as p};
//# sourceMappingURL=zpmtm193hf9al87a.js.map
