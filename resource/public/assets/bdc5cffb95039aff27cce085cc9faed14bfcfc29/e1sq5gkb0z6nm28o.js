import{e as w,f as I,r as d,i as j,j as e,d as N,M as P}from"./cs7toih8jegb7teq.js";import{u as B}from"./mpeahdafp45cy7gg.js";import{C,hE as F,B as p,R as f}from"./dmck639k4dv7claj.js";function E({amphora_id:b,onClose:i}){const t=w(),n=I(),o=B(),[x,M]=d.useState(b??null),[m,g]=d.useState(""),[l,v]=d.useState(""),c=j({mutationFn:async({email:s,role:u})=>{let r=x;if(!r){const h=u==="owner"?"member_role":"owner";if(r=(await f.safePost("/amphora",{requestBody:{role:h}}))?.id??null,!r)throw window.location.reload(),new Error("Failed to create amphora group");M(r),n.setQueryData(["amphora"],y=>({...y??{},id:r,role:h}))}if(!r)throw new Error("Failed to determine amphora id");return await f.safePost("/amphora/{amphora_id}/members",{parameters:{path:{amphora_id:r}},requestBody:{members:[{email:s,role:u}]}}),r},onSuccess:s=>{n.invalidateQueries({queryKey:["amphora"]}),s&&n.invalidateQueries({queryKey:["amphora",s]}),i()}});return e.jsxs(C,{testId:"modal-invite-members-to-amphora",isOpen:!0,onClose:i,size:"custom",showCloseButton:!0,className:"max-w-md text-sm",title:o(t.formatMessage(a.inviteMemberModalTitle)),description:e.jsx("p",{children:t.formatMessage(a.inviteMemberModalDescription)}),children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"email",className:"mb-2 text-sm font-medium",children:t.formatMessage(a.invitesInputLabel)}),e.jsx(F,{name:"email",ariaLabel:!1,className:"",type:"email",value:m,onChange:s=>g(s.target.value),placeholder:t.formatMessage(a.invitesInputPlaceholder)}),e.jsx("p",{className:"text-token-text-tertiary mt-1 text-xs",children:t.formatMessage(a.invitesInputHelperText)})]}),e.jsxs("div",{className:"mt-4 flex flex-col",children:[e.jsx("hr",{className:"border-token-border-default my-1"}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx("label",{htmlFor:"amphora-role",className:"text-sm font-medium",children:t.formatMessage(a.relationshipQuestion)}),e.jsxs("select",{id:"amphora-role",value:l,onChange:s=>v(s.target.value),className:"text-token-text-primary border-0 bg-transparent text-sm outline-none focus:ring-0 focus:outline-none",children:[e.jsx("option",{value:"",children:t.formatMessage(a.selectPlaceholder)}),e.jsx("option",{value:"owner",children:o(t.formatMessage(a.roleOwner))}),e.jsx("option",{value:"member_role",children:o(t.formatMessage(a.roleMember))})]})]}),e.jsx("hr",{className:"border-token-border-default my-1"})]}),l==="owner"?e.jsx("p",{className:"text-token-text-tertiary text-xs",children:o(t.formatMessage(a.relationshipInfoForMember))}):l==="member_role"?e.jsx("p",{className:"text-token-text-tertiary text-xs",children:o(t.formatMessage(a.relationshipInfoForOwner))}):null]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(p,{color:"secondary",onClick:i,children:t.formatMessage(a.cancelButton)}),e.jsx(p,{onClick:()=>{const s=l==="owner"?"owner":"member_role";c.mutate({email:m,role:s})},disabled:!m||!l||c.isPending,children:e.jsx(P,{...a.modalInviteButton})})]})]})}const a=N({inviteMemberModalTitle:{id:"amphora.inviteMemberModalTitle",defaultMessage:"Invite amphora member"},inviteMemberModalDescription:{id:"amphora.inviteMemberModalDescription",defaultMessage:"Enter the email address of the user to invite."},invitesInputPlaceholder:{id:"amphora.members.invitesInputPlaceholder",defaultMessage:"name@example.com"},invitesInputLabel:{id:"amphora.members.invitesInputLabel",defaultMessage:"Email address"},invitesInputHelperText:{id:"amphora.members.invitesInputHelperText",defaultMessage:"We'll send your amphora member an email to link to your ChatGPT account."},cancelButton:{id:"amphora.members.cancelButton",defaultMessage:"Cancel"},modalInviteButton:{id:"amphora.members.modalInviteButton",defaultMessage:"Send"},roleSelectLabel:{id:"amphora.members.roleSelectLabel",defaultMessage:"Role"},relationshipQuestion:{id:"amphora.members.relationshipQuestion",defaultMessage:"What is their relationship to you?"},selectPlaceholder:{id:"amphora.members.selectPlaceholder",defaultMessage:"Select"},relationshipInfoForOwner:{id:"amphora.members.relationshipInfoForOwner",defaultMessage:"By linking to your member_role's account, you'll be able to manage some of their settings and receive safety alerts if ChatGPT is used in ways that could be harmful. You won't have access to your member_role's conversations with ChatGPT."},relationshipInfoForMember:{id:"amphora.members.relationshipInfoForMember",defaultMessage:"Your owner will be able to manage some of your settings and get an alert if something risky happens. They won't have access to your conversations with ChatGPT."},roleMember:{id:"amphora.members.inviteModalRoleMember",defaultMessage:"Member_role"},roleOwner:{id:"amphora.members.inviteModalRoleOwner",defaultMessage:"Owner"}});export{E as default};
//# sourceMappingURL=e1sq5gkb0z6nm28o.js.map
