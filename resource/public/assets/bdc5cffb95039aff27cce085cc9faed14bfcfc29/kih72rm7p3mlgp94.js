const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/o3axea4v7eis6rc5.js","assets/cs7toih8jegb7teq.js","assets/dmck639k4dv7claj.js","assets/root-mdlgku96.css","assets/hnw079jsdm76umup.js","assets/conversation-small-b5ztx8w5.css","assets/mmilw72p73kj15mv.js","assets/juhpprtcv8tvp5w6.js","assets/g874r21dl3vt5vkr.js","assets/hp08qw6yu0x90xkd.js","assets/npls3ia9oml5pnfm.js","assets/kzn4ha0q32870lv3.js","assets/jwbg7kpyo1zyxmya.js","assets/mkqnnmxsxv5vemo6.js","assets/mb7zz61l53knyj1k.js","assets/ljj1p3s92okaif60.js","assets/o12mkc4t9o2t0ta8.js","assets/mzuzwb6vzvi4qfk0.js","assets/mntlin6h4lg868yr.js","assets/ci3idol558isr68b.js","assets/owiiott81wvonpc1.js","assets/pc2givv05uuq8g6l.js","assets/nsa6r7grrfqk0ahy.js","assets/dfhgw8mxn1h3ecpw.js","assets/2xaoxu5jomggldkq.js","assets/oqyy1xfq5y51tstr.js","assets/hb5diwst9rkj3tlz.js","assets/21ei6cu23fdeusdh.js","assets/mcpubm63u255wsr6.js","assets/g9gr3l5lwhb3z8y8.js","assets/crerkmhvihiw48az.js","assets/d2w9ht1jp4bj9t28.js","assets/ig3euz6ql417cw29.js","assets/g0qqcme5h04p667m.js","assets/isvc0syyvbx2i79u.js","assets/jjprqojduzf2gfkc.js","assets/gu3kz9694iumz76j.js","assets/ansi-1f6vhsjh.css","assets/j016trxwqzgsccq0.js","assets/pde74k22jrsvsyg3.js","assets/mgmoe87nocb640xb.js","assets/g0xytko1xqqqces9.js","assets/dxevrzx7tg9ry1zj.js","assets/jowyjrirlo5h1pme.js","assets/g18y6ikg6l7c6zdt.js","assets/fna9z31n721lpf9f.js","assets/table-components-iztk4amh.css"])))=>i.map(i=>d[i]);
import{r as h,j as n,M as T,e as L,v as Ho,i as Wo,m as Xt,x as Uo,u as Vo,g as qo,k as On,c as Ct,R as zn,d as ts,p as It,A as vs}from"./cs7toih8jegb7teq.js";import{S as Xo}from"./o12mkc4t9o2t0ta8.js";import{M as Go,u as Bn,R as Hn,a as Wn,S as ws,m as Jo,b as Zo,I as Yo,c as Ko,C as Qo,d as er,e as tr,f as sr,r as nr}from"./mzuzwb6vzvi4qfk0.js";import{vE as or,vF as rr,vG as Lt,vH as be,fg as Un,jG as ar,X as Vn,ls as ir,lK as lr,kY as jt,vI as cr,fr as dr,S as ur,dy as ue,dw as fr,cc as mr,gA as hr,cX as pr,jT as gr,hE as ss,lu as ns,hC as os,hD as rs,vJ as xr,f6 as qn,f7 as yr,eZ as br,hz as vr,fw as wr,jX as _r,k4 as tt,jH as as,ez as kr,k5 as Nt,c6 as Ye,jS as Sr,bK as Cr,qZ as Xn,vK as Gn,vL as jr,pT as Nr,ct as Mr,cH as Jn,vM as Zn,jy as Tr,ld as Pr,vN as $r,kd as is,vO as Yn,aK as Kn,vP as Er,vQ as Ar,vR as Ir,cb as Lr,cd as Fr,lg as Rr,vS as Dr,hW as Or,vT as zr,vU as Br,vV as Hr,vW as Wr,jf as Ur,be as Gt,je as Qn,vX as eo,vY as Vr,vZ as qr,v_ as Xr,by as Gr,b_ as Jr,v$ as Zr,lt as Yr,w0 as Kr,tt as Qr,w1 as ea,w2 as ta,w3 as sa,w4 as na,c0 as oa,bF as ra,bg as aa,t8 as ia,aF as la,ha as ca,w5 as ft,w6 as da,t1 as ua,sF as fa}from"./hnw079jsdm76umup.js";import{z as N,vE as ma,aI as ot,aF as Mt,fD as ha,S as rt,bV as Tt,e as K,p as B,mY as ls,dr as cs,oS as pa,w as ga,a0 as Pt,aw as to,ax as ds,eq as xa,a$ as ya,H as ba,hz as va,fw as so,d3 as wa,V as no,L as oo,bu as _a,B as oe,be as ve,cb as ka,cm as Sa,cn as Ca,de as at,fR as ja,bb as Na,q5 as Ma,aE as it,io as xe,kT as Ta,f6 as us,hP as Pa,R as $a,aA as Ea,vF as Aa,gR as Ia,gn as La,lZ as Fa,aN as ro,hi as lt,gK as Ra,rY as Da,gT as Oa,d_ as za,T as xt,iu as Ba,fI as Ha,hI as Wa,P as ht,hH as Ua,jH as Va,iD as qa,y as Xa,gx as Ft,il as Ga,Z as Ja,cx as fs,q as Za,F as Ya,vG as Ka,b7 as ms,dI as Qa,t as $t,ey as ei,mg as Ze,aX as ao,nf as ti,hC as si,K as ni,vH as oi,ej as ri,d1 as ai,l$ as ii,b5 as li,ee as io,gf as ci,gg as di,c as ui,g as fi,qW as mi}from"./dmck639k4dv7claj.js";import{u as hs}from"./nsa6r7grrfqk0ahy.js";import{N as hi}from"./dfhgw8mxn1h3ecpw.js";import{d as V,e as E,f as Ge,g as _s,P as pi,F as gi,i as xi}from"./g874r21dl3vt5vkr.js";import{S as yi}from"./2xaoxu5jomggldkq.js";import{L as bi}from"./oqyy1xfq5y51tstr.js";import{v as vi,u as wi}from"./juhpprtcv8tvp5w6.js";import{W as _i,c as ki,b as Si,a as Ci}from"./mntlin6h4lg868yr.js";import ji from"./hb5diwst9rkj3tlz.js";import{W as Et}from"./21ei6cu23fdeusdh.js";import{W as Ni}from"./mcpubm63u255wsr6.js";import{W as ks}from"./g9gr3l5lwhb3z8y8.js";import{u as Mi}from"./jjprqojduzf2gfkc.js";import{h as lo,j as Ti,W as Pi}from"./crerkmhvihiw48az.js";import{A as $i}from"./gu3kz9694iumz76j.js";import{C as Ei,c as Ai}from"./ci3idol558isr68b.js";import{b as Ii,a as Li}from"./mb7zz61l53knyj1k.js";import{g as Fi,c as Ri,A as Di,D as Oi,b as Jt,o as zi,I as co,d as Bi}from"./owiiott81wvonpc1.js";import{u as Hi}from"./ljj1p3s92okaif60.js";import{S as Wi}from"./j016trxwqzgsccq0.js";import{S as Ui}from"./pde74k22jrsvsyg3.js";import{s as Vi}from"./mgmoe87nocb640xb.js";import{v as Ss,C as qi,A as Xi,h as Gi,j as Ji,f as Zi,p as Yi,k as Ki,n as Qi,P as el,o as tl,q as sl,L as nl}from"./g0xytko1xqqqces9.js";import{u as Ke,t as Cs,r as Zt,g as fe}from"./dxevrzx7tg9ry1zj.js";import{T as J}from"./jowyjrirlo5h1pme.js";import{c as uo}from"./g18y6ikg6l7c6zdt.js";import{t as js}from"./fna9z31n721lpf9f.js";const ol=uo("ChevronDownFilled","1em",["M15.8 7.73c.28.3.27.78-.03 1.06l-5.25 5a.75.75 0 0 1-1.04 0l-5.25-5a.75.75 0 0 1 1.04-1.08L10 12.2l4.73-4.5a.75.75 0 0 1 1.06.02Z"]),rl=uo("ChevronLeftFilled","1em",["M12.27 15.8a.75.75 0 0 1-1.06-.03l-5-5.25a.75.75 0 0 1 0-1.04l5-5.25a.75.75 0 1 1 1.08 1.04L7.8 10l4.5 4.73c.29.3.28.78-.02 1.06Z"]);function Ns(){return{id:void 0,sheets:[],styles:void 0}}const fo={encode(e,t=new V){e.id!==void 0&&t.uint32(82).string(e.id);for(const s of e.sheets)Me.encode(s,t.uint32(10).fork()).join();return e.styles!==void 0&&De.encode(e.styles,t.uint32(18).fork()).join(),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Ns();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 10:{if(a!==82)break;o.id=s.string();continue}case 1:{if(a!==10)break;o.sheets.push(Me.decode(s,s.uint32()));continue}case 2:{if(a!==18)break;o.styles=De.decode(s,s.uint32());continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{id:M(e.id)?globalThis.String(e.id):void 0,sheets:globalThis.Array.isArray(e?.sheets)?e.sheets.map(t=>Me.fromJSON(t)):[],styles:M(e.styles)?De.fromJSON(e.styles):void 0}},toJSON(e){const t={};return e.id!==void 0&&(t.id=e.id),e.sheets?.length&&(t.sheets=e.sheets.map(s=>Me.toJSON(s))),e.styles!==void 0&&(t.styles=De.toJSON(e.styles)),t},create(e){return fo.fromPartial(e??{})},fromPartial(e){const t=Ns();return t.id=e.id??void 0,t.sheets=e.sheets?.map(s=>Me.fromPartial(s))||[],t.styles=e.styles!==void 0&&e.styles!==null?De.fromPartial(e.styles):void 0,t}};function Ms(){return{rowId:"",colId:"",colOffset:"",rowOffset:""}}const ee={encode(e,t=new V){return e.rowId!==""&&t.uint32(10).string(e.rowId),e.colId!==""&&t.uint32(18).string(e.colId),e.colOffset!==""&&t.uint32(26).string(e.colOffset),e.rowOffset!==""&&t.uint32(34).string(e.rowOffset),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Ms();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==10)break;o.rowId=s.string();continue}case 2:{if(a!==18)break;o.colId=s.string();continue}case 3:{if(a!==26)break;o.colOffset=s.string();continue}case 4:{if(a!==34)break;o.rowOffset=s.string();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{rowId:M(e.rowId)?globalThis.String(e.rowId):"",colId:M(e.colId)?globalThis.String(e.colId):"",colOffset:M(e.colOffset)?globalThis.String(e.colOffset):"",rowOffset:M(e.rowOffset)?globalThis.String(e.rowOffset):""}},toJSON(e){const t={};return e.rowId!==""&&(t.rowId=e.rowId),e.colId!==""&&(t.colId=e.colId),e.colOffset!==""&&(t.colOffset=e.colOffset),e.rowOffset!==""&&(t.rowOffset=e.rowOffset),t},create(e){return ee.fromPartial(e??{})},fromPartial(e){const t=Ms();return t.rowId=e.rowId??"",t.colId=e.colId??"",t.colOffset=e.colOffset??"",t.rowOffset=e.rowOffset??"",t}};function Ts(){return{fromAnchor:void 0,toAnchor:void 0,chart:void 0}}const Ne={encode(e,t=new V){return e.fromAnchor!==void 0&&ee.encode(e.fromAnchor,t.uint32(10).fork()).join(),e.toAnchor!==void 0&&ee.encode(e.toAnchor,t.uint32(18).fork()).join(),e.chart!==void 0&&Ge.encode(e.chart,t.uint32(26).fork()).join(),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Ts();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==10)break;o.fromAnchor=ee.decode(s,s.uint32());continue}case 2:{if(a!==18)break;o.toAnchor=ee.decode(s,s.uint32());continue}case 3:{if(a!==26)break;o.chart=Ge.decode(s,s.uint32());continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{fromAnchor:M(e.fromAnchor)?ee.fromJSON(e.fromAnchor):void 0,toAnchor:M(e.toAnchor)?ee.fromJSON(e.toAnchor):void 0,chart:M(e.chart)?Ge.fromJSON(e.chart):void 0}},toJSON(e){const t={};return e.fromAnchor!==void 0&&(t.fromAnchor=ee.toJSON(e.fromAnchor)),e.toAnchor!==void 0&&(t.toAnchor=ee.toJSON(e.toAnchor)),e.chart!==void 0&&(t.chart=Ge.toJSON(e.chart)),t},create(e){return Ne.fromPartial(e??{})},fromPartial(e){const t=Ts();return t.fromAnchor=e.fromAnchor!==void 0&&e.fromAnchor!==null?ee.fromPartial(e.fromAnchor):void 0,t.toAnchor=e.toAnchor!==void 0&&e.toAnchor!==null?ee.fromPartial(e.toAnchor):void 0,t.chart=e.chart!==void 0&&e.chart!==null?Ge.fromPartial(e.chart):void 0,t}};function Ps(){return{id:void 0,index:0,name:"",rows:[],innerXml:"",outerXml:"",columns:[],defaultRowHeight:0,charts:[],defaultColWidth:0,showGridLines:void 0}}const Me={encode(e,t=new V){e.id!==void 0&&t.uint32(90).string(e.id),e.index!==0&&t.uint32(8).int32(e.index),e.name!==""&&t.uint32(18).string(e.name);for(const s of e.rows)Te.encode(s,t.uint32(26).fork()).join();e.innerXml!==""&&t.uint32(34).string(e.innerXml),e.outerXml!==""&&t.uint32(42).string(e.outerXml);for(const s of e.columns)$e.encode(s,t.uint32(50).fork()).join();e.defaultRowHeight!==0&&t.uint32(61).float(e.defaultRowHeight);for(const s of e.charts)Ne.encode(s,t.uint32(66).fork()).join();return e.defaultColWidth!==0&&t.uint32(77).float(e.defaultColWidth),e.showGridLines!==void 0&&t.uint32(80).bool(e.showGridLines),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Ps();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 11:{if(a!==90)break;o.id=s.string();continue}case 1:{if(a!==8)break;o.index=s.int32();continue}case 2:{if(a!==18)break;o.name=s.string();continue}case 3:{if(a!==26)break;o.rows.push(Te.decode(s,s.uint32()));continue}case 4:{if(a!==34)break;o.innerXml=s.string();continue}case 5:{if(a!==42)break;o.outerXml=s.string();continue}case 6:{if(a!==50)break;o.columns.push($e.decode(s,s.uint32()));continue}case 7:{if(a!==61)break;o.defaultRowHeight=s.float();continue}case 8:{if(a!==66)break;o.charts.push(Ne.decode(s,s.uint32()));continue}case 9:{if(a!==77)break;o.defaultColWidth=s.float();continue}case 10:{if(a!==80)break;o.showGridLines=s.bool();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{id:M(e.id)?globalThis.String(e.id):void 0,index:M(e.index)?globalThis.Number(e.index):0,name:M(e.name)?globalThis.String(e.name):"",rows:globalThis.Array.isArray(e?.rows)?e.rows.map(t=>Te.fromJSON(t)):[],innerXml:M(e.innerXml)?globalThis.String(e.innerXml):"",outerXml:M(e.outerXml)?globalThis.String(e.outerXml):"",columns:globalThis.Array.isArray(e?.columns)?e.columns.map(t=>$e.fromJSON(t)):[],defaultRowHeight:M(e.defaultRowHeight)?globalThis.Number(e.defaultRowHeight):0,charts:globalThis.Array.isArray(e?.charts)?e.charts.map(t=>Ne.fromJSON(t)):[],defaultColWidth:M(e.defaultColWidth)?globalThis.Number(e.defaultColWidth):0,showGridLines:M(e.showGridLines)?globalThis.Boolean(e.showGridLines):void 0}},toJSON(e){const t={};return e.id!==void 0&&(t.id=e.id),e.index!==0&&(t.index=Math.round(e.index)),e.name!==""&&(t.name=e.name),e.rows?.length&&(t.rows=e.rows.map(s=>Te.toJSON(s))),e.innerXml!==""&&(t.innerXml=e.innerXml),e.outerXml!==""&&(t.outerXml=e.outerXml),e.columns?.length&&(t.columns=e.columns.map(s=>$e.toJSON(s))),e.defaultRowHeight!==0&&(t.defaultRowHeight=e.defaultRowHeight),e.charts?.length&&(t.charts=e.charts.map(s=>Ne.toJSON(s))),e.defaultColWidth!==0&&(t.defaultColWidth=e.defaultColWidth),e.showGridLines!==void 0&&(t.showGridLines=e.showGridLines),t},create(e){return Me.fromPartial(e??{})},fromPartial(e){const t=Ps();return t.id=e.id??void 0,t.index=e.index??0,t.name=e.name??"",t.rows=e.rows?.map(s=>Te.fromPartial(s))||[],t.innerXml=e.innerXml??"",t.outerXml=e.outerXml??"",t.columns=e.columns?.map(s=>$e.fromPartial(s))||[],t.defaultRowHeight=e.defaultRowHeight??0,t.charts=e.charts?.map(s=>Ne.fromPartial(s))||[],t.defaultColWidth=e.defaultColWidth??0,t.showGridLines=e.showGridLines??void 0,t}};function $s(){return{index:0,cells:[],height:0,customHeight:!1}}const Te={encode(e,t=new V){e.index!==0&&t.uint32(8).int32(e.index);for(const s of e.cells)Pe.encode(s,t.uint32(18).fork()).join();return e.height!==0&&t.uint32(29).float(e.height),e.customHeight!==!1&&t.uint32(32).bool(e.customHeight),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=$s();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==8)break;o.index=s.int32();continue}case 2:{if(a!==18)break;o.cells.push(Pe.decode(s,s.uint32()));continue}case 3:{if(a!==29)break;o.height=s.float();continue}case 4:{if(a!==32)break;o.customHeight=s.bool();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{index:M(e.index)?globalThis.Number(e.index):0,cells:globalThis.Array.isArray(e?.cells)?e.cells.map(t=>Pe.fromJSON(t)):[],height:M(e.height)?globalThis.Number(e.height):0,customHeight:M(e.customHeight)?globalThis.Boolean(e.customHeight):!1}},toJSON(e){const t={};return e.index!==0&&(t.index=Math.round(e.index)),e.cells?.length&&(t.cells=e.cells.map(s=>Pe.toJSON(s))),e.height!==0&&(t.height=e.height),e.customHeight!==!1&&(t.customHeight=e.customHeight),t},create(e){return Te.fromPartial(e??{})},fromPartial(e){const t=$s();return t.index=e.index??0,t.cells=e.cells?.map(s=>Pe.fromPartial(s))||[],t.height=e.height??0,t.customHeight=e.customHeight??!1,t}};function Es(){return{address:"",value:"",formula:"",dataType:"",styleIndex:0}}const Pe={encode(e,t=new V){return e.address!==""&&t.uint32(10).string(e.address),e.value!==""&&t.uint32(18).string(e.value),e.formula!==""&&t.uint32(26).string(e.formula),e.dataType!==""&&t.uint32(34).string(e.dataType),e.styleIndex!==0&&t.uint32(40).int32(e.styleIndex),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Es();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==10)break;o.address=s.string();continue}case 2:{if(a!==18)break;o.value=s.string();continue}case 3:{if(a!==26)break;o.formula=s.string();continue}case 4:{if(a!==34)break;o.dataType=s.string();continue}case 5:{if(a!==40)break;o.styleIndex=s.int32();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{address:M(e.address)?globalThis.String(e.address):"",value:M(e.value)?globalThis.String(e.value):"",formula:M(e.formula)?globalThis.String(e.formula):"",dataType:M(e.dataType)?globalThis.String(e.dataType):"",styleIndex:M(e.styleIndex)?globalThis.Number(e.styleIndex):0}},toJSON(e){const t={};return e.address!==""&&(t.address=e.address),e.value!==""&&(t.value=e.value),e.formula!==""&&(t.formula=e.formula),e.dataType!==""&&(t.dataType=e.dataType),e.styleIndex!==0&&(t.styleIndex=Math.round(e.styleIndex)),t},create(e){return Pe.fromPartial(e??{})},fromPartial(e){const t=Es();return t.address=e.address??"",t.value=e.value??"",t.formula=e.formula??"",t.dataType=e.dataType??"",t.styleIndex=e.styleIndex??0,t}};function As(){return{min:0,max:0,width:0,customWidth:!1}}const $e={encode(e,t=new V){return e.min!==0&&t.uint32(8).int32(e.min),e.max!==0&&t.uint32(16).int32(e.max),e.width!==0&&t.uint32(29).float(e.width),e.customWidth!==!1&&t.uint32(32).bool(e.customWidth),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=As();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==8)break;o.min=s.int32();continue}case 2:{if(a!==16)break;o.max=s.int32();continue}case 3:{if(a!==29)break;o.width=s.float();continue}case 4:{if(a!==32)break;o.customWidth=s.bool();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{min:M(e.min)?globalThis.Number(e.min):0,max:M(e.max)?globalThis.Number(e.max):0,width:M(e.width)?globalThis.Number(e.width):0,customWidth:M(e.customWidth)?globalThis.Boolean(e.customWidth):!1}},toJSON(e){const t={};return e.min!==0&&(t.min=Math.round(e.min)),e.max!==0&&(t.max=Math.round(e.max)),e.width!==0&&(t.width=e.width),e.customWidth!==!1&&(t.customWidth=e.customWidth),t},create(e){return $e.fromPartial(e??{})},fromPartial(e){const t=As();return t.min=e.min??0,t.max=e.max??0,t.width=e.width??0,t.customWidth=e.customWidth??!1,t}};function Is(){return{size:0,color:"",name:"",family:0,scheme:"",bold:!1,italic:!1}}const Ee={encode(e,t=new V){return e.size!==0&&t.uint32(8).int32(e.size),e.color!==""&&t.uint32(18).string(e.color),e.name!==""&&t.uint32(26).string(e.name),e.family!==0&&t.uint32(32).int32(e.family),e.scheme!==""&&t.uint32(42).string(e.scheme),e.bold!==!1&&t.uint32(48).bool(e.bold),e.italic!==!1&&t.uint32(56).bool(e.italic),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Is();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==8)break;o.size=s.int32();continue}case 2:{if(a!==18)break;o.color=s.string();continue}case 3:{if(a!==26)break;o.name=s.string();continue}case 4:{if(a!==32)break;o.family=s.int32();continue}case 5:{if(a!==42)break;o.scheme=s.string();continue}case 6:{if(a!==48)break;o.bold=s.bool();continue}case 7:{if(a!==56)break;o.italic=s.bool();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{size:M(e.size)?globalThis.Number(e.size):0,color:M(e.color)?globalThis.String(e.color):"",name:M(e.name)?globalThis.String(e.name):"",family:M(e.family)?globalThis.Number(e.family):0,scheme:M(e.scheme)?globalThis.String(e.scheme):"",bold:M(e.bold)?globalThis.Boolean(e.bold):!1,italic:M(e.italic)?globalThis.Boolean(e.italic):!1}},toJSON(e){const t={};return e.size!==0&&(t.size=Math.round(e.size)),e.color!==""&&(t.color=e.color),e.name!==""&&(t.name=e.name),e.family!==0&&(t.family=Math.round(e.family)),e.scheme!==""&&(t.scheme=e.scheme),e.bold!==!1&&(t.bold=e.bold),e.italic!==!1&&(t.italic=e.italic),t},create(e){return Ee.fromPartial(e??{})},fromPartial(e){const t=Is();return t.size=e.size??0,t.color=e.color??"",t.name=e.name??"",t.family=e.family??0,t.scheme=e.scheme??"",t.bold=e.bold??!1,t.italic=e.italic??!1,t}};function Ls(){return{patternType:"",fgColor:"",bgColor:""}}const Ae={encode(e,t=new V){return e.patternType!==""&&t.uint32(10).string(e.patternType),e.fgColor!==""&&t.uint32(18).string(e.fgColor),e.bgColor!==""&&t.uint32(26).string(e.bgColor),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Ls();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==10)break;o.patternType=s.string();continue}case 2:{if(a!==18)break;o.fgColor=s.string();continue}case 3:{if(a!==26)break;o.bgColor=s.string();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{patternType:M(e.patternType)?globalThis.String(e.patternType):"",fgColor:M(e.fgColor)?globalThis.String(e.fgColor):"",bgColor:M(e.bgColor)?globalThis.String(e.bgColor):""}},toJSON(e){const t={};return e.patternType!==""&&(t.patternType=e.patternType),e.fgColor!==""&&(t.fgColor=e.fgColor),e.bgColor!==""&&(t.bgColor=e.bgColor),t},create(e){return Ae.fromPartial(e??{})},fromPartial(e){const t=Ls();return t.patternType=e.patternType??"",t.fgColor=e.fgColor??"",t.bgColor=e.bgColor??"",t}};function Fs(){return{style:"",color:""}}const D={encode(e,t=new V){return e.style!==""&&t.uint32(10).string(e.style),e.color!==""&&t.uint32(18).string(e.color),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Fs();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==10)break;o.style=s.string();continue}case 2:{if(a!==18)break;o.color=s.string();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{style:M(e.style)?globalThis.String(e.style):"",color:M(e.color)?globalThis.String(e.color):""}},toJSON(e){const t={};return e.style!==""&&(t.style=e.style),e.color!==""&&(t.color=e.color),t},create(e){return D.fromPartial(e??{})},fromPartial(e){const t=Fs();return t.style=e.style??"",t.color=e.color??"",t}};function Rs(){return{left:void 0,right:void 0,top:void 0,bottom:void 0}}const Ie={encode(e,t=new V){return e.left!==void 0&&D.encode(e.left,t.uint32(10).fork()).join(),e.right!==void 0&&D.encode(e.right,t.uint32(18).fork()).join(),e.top!==void 0&&D.encode(e.top,t.uint32(26).fork()).join(),e.bottom!==void 0&&D.encode(e.bottom,t.uint32(34).fork()).join(),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Rs();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==10)break;o.left=D.decode(s,s.uint32());continue}case 2:{if(a!==18)break;o.right=D.decode(s,s.uint32());continue}case 3:{if(a!==26)break;o.top=D.decode(s,s.uint32());continue}case 4:{if(a!==34)break;o.bottom=D.decode(s,s.uint32());continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{left:M(e.left)?D.fromJSON(e.left):void 0,right:M(e.right)?D.fromJSON(e.right):void 0,top:M(e.top)?D.fromJSON(e.top):void 0,bottom:M(e.bottom)?D.fromJSON(e.bottom):void 0}},toJSON(e){const t={};return e.left!==void 0&&(t.left=D.toJSON(e.left)),e.right!==void 0&&(t.right=D.toJSON(e.right)),e.top!==void 0&&(t.top=D.toJSON(e.top)),e.bottom!==void 0&&(t.bottom=D.toJSON(e.bottom)),t},create(e){return Ie.fromPartial(e??{})},fromPartial(e){const t=Rs();return t.left=e.left!==void 0&&e.left!==null?D.fromPartial(e.left):void 0,t.right=e.right!==void 0&&e.right!==null?D.fromPartial(e.right):void 0,t.top=e.top!==void 0&&e.top!==null?D.fromPartial(e.top):void 0,t.bottom=e.bottom!==void 0&&e.bottom!==null?D.fromPartial(e.bottom):void 0,t}};function Ds(){return{id:0,formatCode:""}}const Le={encode(e,t=new V){return e.id!==0&&t.uint32(8).int32(e.id),e.formatCode!==""&&t.uint32(18).string(e.formatCode),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Ds();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==8)break;o.id=s.int32();continue}case 2:{if(a!==18)break;o.formatCode=s.string();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{id:M(e.id)?globalThis.Number(e.id):0,formatCode:M(e.formatCode)?globalThis.String(e.formatCode):""}},toJSON(e){const t={};return e.id!==0&&(t.id=Math.round(e.id)),e.formatCode!==""&&(t.formatCode=e.formatCode),t},create(e){return Le.fromPartial(e??{})},fromPartial(e){const t=Ds();return t.id=e.id??0,t.formatCode=e.formatCode??"",t}};function Os(){return{numFmtId:void 0,fontId:void 0,fillId:void 0,borderId:void 0,xfId:void 0,applyFill:void 0,applyFont:void 0,applyBorder:void 0,applyAlignment:void 0,horizontalAlignment:void 0,verticalAlignment:void 0}}const te={encode(e,t=new V){return e.numFmtId!==void 0&&t.uint32(8).int32(e.numFmtId),e.fontId!==void 0&&t.uint32(16).int32(e.fontId),e.fillId!==void 0&&t.uint32(24).int32(e.fillId),e.borderId!==void 0&&t.uint32(32).int32(e.borderId),e.xfId!==void 0&&t.uint32(40).int32(e.xfId),e.applyFill!==void 0&&t.uint32(48).bool(e.applyFill),e.applyFont!==void 0&&t.uint32(56).bool(e.applyFont),e.applyBorder!==void 0&&t.uint32(64).bool(e.applyBorder),e.applyAlignment!==void 0&&t.uint32(72).bool(e.applyAlignment),e.horizontalAlignment!==void 0&&t.uint32(82).string(e.horizontalAlignment),e.verticalAlignment!==void 0&&t.uint32(90).string(e.verticalAlignment),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Os();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==8)break;o.numFmtId=s.int32();continue}case 2:{if(a!==16)break;o.fontId=s.int32();continue}case 3:{if(a!==24)break;o.fillId=s.int32();continue}case 4:{if(a!==32)break;o.borderId=s.int32();continue}case 5:{if(a!==40)break;o.xfId=s.int32();continue}case 6:{if(a!==48)break;o.applyFill=s.bool();continue}case 7:{if(a!==56)break;o.applyFont=s.bool();continue}case 8:{if(a!==64)break;o.applyBorder=s.bool();continue}case 9:{if(a!==72)break;o.applyAlignment=s.bool();continue}case 10:{if(a!==82)break;o.horizontalAlignment=s.string();continue}case 11:{if(a!==90)break;o.verticalAlignment=s.string();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{numFmtId:M(e.numFmtId)?globalThis.Number(e.numFmtId):void 0,fontId:M(e.fontId)?globalThis.Number(e.fontId):void 0,fillId:M(e.fillId)?globalThis.Number(e.fillId):void 0,borderId:M(e.borderId)?globalThis.Number(e.borderId):void 0,xfId:M(e.xfId)?globalThis.Number(e.xfId):void 0,applyFill:M(e.applyFill)?globalThis.Boolean(e.applyFill):void 0,applyFont:M(e.applyFont)?globalThis.Boolean(e.applyFont):void 0,applyBorder:M(e.applyBorder)?globalThis.Boolean(e.applyBorder):void 0,applyAlignment:M(e.applyAlignment)?globalThis.Boolean(e.applyAlignment):void 0,horizontalAlignment:M(e.horizontalAlignment)?globalThis.String(e.horizontalAlignment):void 0,verticalAlignment:M(e.verticalAlignment)?globalThis.String(e.verticalAlignment):void 0}},toJSON(e){const t={};return e.numFmtId!==void 0&&(t.numFmtId=Math.round(e.numFmtId)),e.fontId!==void 0&&(t.fontId=Math.round(e.fontId)),e.fillId!==void 0&&(t.fillId=Math.round(e.fillId)),e.borderId!==void 0&&(t.borderId=Math.round(e.borderId)),e.xfId!==void 0&&(t.xfId=Math.round(e.xfId)),e.applyFill!==void 0&&(t.applyFill=e.applyFill),e.applyFont!==void 0&&(t.applyFont=e.applyFont),e.applyBorder!==void 0&&(t.applyBorder=e.applyBorder),e.applyAlignment!==void 0&&(t.applyAlignment=e.applyAlignment),e.horizontalAlignment!==void 0&&(t.horizontalAlignment=e.horizontalAlignment),e.verticalAlignment!==void 0&&(t.verticalAlignment=e.verticalAlignment),t},create(e){return te.fromPartial(e??{})},fromPartial(e){const t=Os();return t.numFmtId=e.numFmtId??void 0,t.fontId=e.fontId??void 0,t.fillId=e.fillId??void 0,t.borderId=e.borderId??void 0,t.xfId=e.xfId??void 0,t.applyFill=e.applyFill??void 0,t.applyFont=e.applyFont??void 0,t.applyBorder=e.applyBorder??void 0,t.applyAlignment=e.applyAlignment??void 0,t.horizontalAlignment=e.horizontalAlignment??void 0,t.verticalAlignment=e.verticalAlignment??void 0,t}};function zs(){return{index:0,format:void 0}}const Fe={encode(e,t=new V){return e.index!==0&&t.uint32(8).int32(e.index),e.format!==void 0&&te.encode(e.format,t.uint32(18).fork()).join(),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=zs();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==8)break;o.index=s.int32();continue}case 2:{if(a!==18)break;o.format=te.decode(s,s.uint32());continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{index:M(e.index)?globalThis.Number(e.index):0,format:M(e.format)?te.fromJSON(e.format):void 0}},toJSON(e){const t={};return e.index!==0&&(t.index=Math.round(e.index)),e.format!==void 0&&(t.format=te.toJSON(e.format)),t},create(e){return Fe.fromPartial(e??{})},fromPartial(e){const t=zs();return t.index=e.index??0,t.format=e.format!==void 0&&e.format!==null?te.fromPartial(e.format):void 0,t}};function Bs(){return{index:0,name:"",builtinId:"",xfId:void 0}}const Re={encode(e,t=new V){return e.index!==0&&t.uint32(8).int32(e.index),e.name!==""&&t.uint32(18).string(e.name),e.builtinId!==""&&t.uint32(26).string(e.builtinId),e.xfId!==void 0&&t.uint32(32).int32(e.xfId),t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Bs();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==8)break;o.index=s.int32();continue}case 2:{if(a!==18)break;o.name=s.string();continue}case 3:{if(a!==26)break;o.builtinId=s.string();continue}case 4:{if(a!==32)break;o.xfId=s.int32();continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{index:M(e.index)?globalThis.Number(e.index):0,name:M(e.name)?globalThis.String(e.name):"",builtinId:M(e.builtinId)?globalThis.String(e.builtinId):"",xfId:M(e.xfId)?globalThis.Number(e.xfId):void 0}},toJSON(e){const t={};return e.index!==0&&(t.index=Math.round(e.index)),e.name!==""&&(t.name=e.name),e.builtinId!==""&&(t.builtinId=e.builtinId),e.xfId!==void 0&&(t.xfId=Math.round(e.xfId)),t},create(e){return Re.fromPartial(e??{})},fromPartial(e){const t=Bs();return t.index=e.index??0,t.name=e.name??"",t.builtinId=e.builtinId??"",t.xfId=e.xfId??void 0,t}};function Hs(){return{fonts:[],fills:[],cellXfs:[],borders:[],cellStyles:[],cellStyleXfs:[],numberFormats:[]}}const De={encode(e,t=new V){for(const s of e.fonts)Ee.encode(s,t.uint32(10).fork()).join();for(const s of e.fills)Ae.encode(s,t.uint32(18).fork()).join();for(const s of e.cellXfs)te.encode(s,t.uint32(26).fork()).join();for(const s of e.borders)Ie.encode(s,t.uint32(34).fork()).join();for(const s of e.cellStyles)Re.encode(s,t.uint32(42).fork()).join();for(const s of e.cellStyleXfs)Fe.encode(s,t.uint32(50).fork()).join();for(const s of e.numberFormats)Le.encode(s,t.uint32(58).fork()).join();return t},decode(e,t){const s=e instanceof E?e:new E(e);let r=t===void 0?s.len:s.pos+t;const o=Hs();for(;s.pos<r;){const a=s.uint32();switch(a>>>3){case 1:{if(a!==10)break;o.fonts.push(Ee.decode(s,s.uint32()));continue}case 2:{if(a!==18)break;o.fills.push(Ae.decode(s,s.uint32()));continue}case 3:{if(a!==26)break;o.cellXfs.push(te.decode(s,s.uint32()));continue}case 4:{if(a!==34)break;o.borders.push(Ie.decode(s,s.uint32()));continue}case 5:{if(a!==42)break;o.cellStyles.push(Re.decode(s,s.uint32()));continue}case 6:{if(a!==50)break;o.cellStyleXfs.push(Fe.decode(s,s.uint32()));continue}case 7:{if(a!==58)break;o.numberFormats.push(Le.decode(s,s.uint32()));continue}}if((a&7)===4||a===0)break;s.skip(a&7)}return o},fromJSON(e){return{fonts:globalThis.Array.isArray(e?.fonts)?e.fonts.map(t=>Ee.fromJSON(t)):[],fills:globalThis.Array.isArray(e?.fills)?e.fills.map(t=>Ae.fromJSON(t)):[],cellXfs:globalThis.Array.isArray(e?.cellXfs)?e.cellXfs.map(t=>te.fromJSON(t)):[],borders:globalThis.Array.isArray(e?.borders)?e.borders.map(t=>Ie.fromJSON(t)):[],cellStyles:globalThis.Array.isArray(e?.cellStyles)?e.cellStyles.map(t=>Re.fromJSON(t)):[],cellStyleXfs:globalThis.Array.isArray(e?.cellStyleXfs)?e.cellStyleXfs.map(t=>Fe.fromJSON(t)):[],numberFormats:globalThis.Array.isArray(e?.numberFormats)?e.numberFormats.map(t=>Le.fromJSON(t)):[]}},toJSON(e){const t={};return e.fonts?.length&&(t.fonts=e.fonts.map(s=>Ee.toJSON(s))),e.fills?.length&&(t.fills=e.fills.map(s=>Ae.toJSON(s))),e.cellXfs?.length&&(t.cellXfs=e.cellXfs.map(s=>te.toJSON(s))),e.borders?.length&&(t.borders=e.borders.map(s=>Ie.toJSON(s))),e.cellStyles?.length&&(t.cellStyles=e.cellStyles.map(s=>Re.toJSON(s))),e.cellStyleXfs?.length&&(t.cellStyleXfs=e.cellStyleXfs.map(s=>Fe.toJSON(s))),e.numberFormats?.length&&(t.numberFormats=e.numberFormats.map(s=>Le.toJSON(s))),t},create(e){return De.fromPartial(e??{})},fromPartial(e){const t=Hs();return t.fonts=e.fonts?.map(s=>Ee.fromPartial(s))||[],t.fills=e.fills?.map(s=>Ae.fromPartial(s))||[],t.cellXfs=e.cellXfs?.map(s=>te.fromPartial(s))||[],t.borders=e.borders?.map(s=>Ie.fromPartial(s))||[],t.cellStyles=e.cellStyles?.map(s=>Re.fromPartial(s))||[],t.cellStyleXfs=e.cellStyleXfs?.map(s=>Fe.fromPartial(s))||[],t.numberFormats=e.numberFormats?.map(s=>Le.fromPartial(s))||[],t}};function M(e){return e!=null}const al="Walnut",il={hash:"sha256-AeHlIdlr28Vswe5CEj3j71jBsXnbHoHyryXy0eeBiNE=",fingerprinting:{"DocumentFormat.OpenXml.Framework.zzrbdxy160.wasm":"DocumentFormat.OpenXml.Framework.wasm","DocumentFormat.OpenXml.9kx12hc5a3.wasm":"DocumentFormat.OpenXml.wasm","Google.Protobuf.ymcrlw7ls4.wasm":"Google.Protobuf.wasm","System.Collections.Concurrent.q7k9997daq.wasm":"System.Collections.Concurrent.wasm","System.Collections.NonGeneric.e29je1lh17.wasm":"System.Collections.NonGeneric.wasm","System.Collections.Specialized.za90e6uca4.wasm":"System.Collections.Specialized.wasm","System.Collections.l48alw8ik0.wasm":"System.Collections.wasm","System.ComponentModel.Primitives.o70rgbr7as.wasm":"System.ComponentModel.Primitives.wasm","System.ComponentModel.TypeConverter.83539jv8ad.wasm":"System.ComponentModel.TypeConverter.wasm","System.ComponentModel.0n5errmvx8.wasm":"System.ComponentModel.wasm","System.Diagnostics.DiagnosticSource.g8ajmpm5cd.wasm":"System.Diagnostics.DiagnosticSource.wasm","System.IO.Compression.y5glqpjnb8.wasm":"System.IO.Compression.wasm","System.IO.Packaging.8th4tkd3a0.wasm":"System.IO.Packaging.wasm","System.Linq.Expressions.biujz7ou20.wasm":"System.Linq.Expressions.wasm","System.Linq.6btt3su4oy.wasm":"System.Linq.wasm","System.Memory.m6pzfzg6nf.wasm":"System.Memory.wasm","System.Net.Http.5n712yykv5.wasm":"System.Net.Http.wasm","System.Net.Primitives.0h7y3g6nqf.wasm":"System.Net.Primitives.wasm","System.ObjectModel.7q79mw545v.wasm":"System.ObjectModel.wasm","System.Private.CoreLib.p01w1sybmx.wasm":"System.Private.CoreLib.wasm","System.Private.Uri.4o2ojye61w.wasm":"System.Private.Uri.wasm","System.Private.Xml.Linq.trt4nj2tpp.wasm":"System.Private.Xml.Linq.wasm","System.Private.Xml.fx4cl1bai1.wasm":"System.Private.Xml.wasm","System.Runtime.InteropServices.JavaScript.yoksv99ly5.wasm":"System.Runtime.InteropServices.JavaScript.wasm","System.Text.RegularExpressions.jeufitb0vn.wasm":"System.Text.RegularExpressions.wasm","System.m0fu6d0eya.wasm":"System.wasm","System.Xml.Linq.qsgzs1hc1j.wasm":"System.Xml.Linq.wasm","Walnut.x0sudg2laf.wasm":"Walnut.wasm","dotnet.native.349ud2l9o5.js":"dotnet.native.js","dotnet.native.1m7zpjvglu.wasm":"dotnet.native.wasm","dotnet.js":"dotnet.js","dotnet.runtime.st3wwc8rqy.js":"dotnet.runtime.js","icudt_CJK.tjcz0u77k5.dat":"icudt_CJK.dat","icudt_EFIGS.tptq2av103.dat":"icudt_EFIGS.dat","icudt_no_CJK.lfu7j35m59.dat":"icudt_no_CJK.dat"},jsModuleNative:{"dotnet.native.349ud2l9o5.js":"sha256-XXFP8ueCRZ/9neduBaSJOons2XLlYXa2NlP5FnhUKNQ="},jsModuleRuntime:{"dotnet.runtime.st3wwc8rqy.js":"sha256-oBRKHAqZUsvCRnCzkQfB7zc45cpKLNq2NKyrG10IKx8="},wasmNative:{"dotnet.native.1m7zpjvglu.wasm":"sha256-SeYXztl9ztFuzCJUoLlFf/EtB8wHKOelu6wAJ3/gi+w="},icu:{"icudt_CJK.tjcz0u77k5.dat":"sha256-SZLtQnRc0JkwqHab0VUVP7T3uBPSeYzxzDnpxPpUnHk=","icudt_EFIGS.tptq2av103.dat":"sha256-8fItetYY8kQ0ww6oxwTLiT3oXlBwHKumbeP2pRF4yTc=","icudt_no_CJK.lfu7j35m59.dat":"sha256-L7sV7NEYP37/Qr2FPCePo5cJqRgTXRwGHuwF5Q+0Nfs="},coreAssembly:{"System.Private.CoreLib.p01w1sybmx.wasm":"sha256-18HeJL9OcGuyT9IVV5fEjllvMuAKwWG5goaCYZJDU6A=","System.Runtime.InteropServices.JavaScript.yoksv99ly5.wasm":"sha256-PpVo+nXFFVzcQmMcwj3t/pX3t8Gc+Y2rLawKTqz0jn8="},assembly:{"DocumentFormat.OpenXml.Framework.zzrbdxy160.wasm":"sha256-gewmYP6VBCfFJUjxGAmejSGxmz8pJfGHQf0NgrM6MZU=","DocumentFormat.OpenXml.9kx12hc5a3.wasm":"sha256-13lkooL5OK24XESOo9Cmv20rnNku0r0tWucBcL1Ljqw=","Google.Protobuf.ymcrlw7ls4.wasm":"sha256-ut3yq+p97V1SbQ9Zc0baUM07p9J1xZIfW02l4S3Vp5M=","System.Collections.Concurrent.q7k9997daq.wasm":"sha256-luuh8QlNVgtYEcAi6N+VXZUjrLjK5Mohr7YV2Qo44KI=","System.Collections.NonGeneric.e29je1lh17.wasm":"sha256-Wkm1IwLgktv0ufFAqQ2dmijAlJQmf+Fp4FmTlgILYXk=","System.Collections.Specialized.za90e6uca4.wasm":"sha256-5UpgSBxjmzatkMdip0WZHB3ZJJsd+zea3niJtfK/Xco=","System.Collections.l48alw8ik0.wasm":"sha256-pfzSuOk29FRrZOX567k+jaeA3dH92A/XVM7vtYtGhXg=","System.ComponentModel.Primitives.o70rgbr7as.wasm":"sha256-LDo5YlVF1j7HX6cIR9g2sO5xXkPw31mtOO8S6NnbqJc=","System.ComponentModel.TypeConverter.83539jv8ad.wasm":"sha256-fP45xSdHQOHnnNgF9GAkhkSdiLDsVHb3T/01W4ytVW8=","System.ComponentModel.0n5errmvx8.wasm":"sha256-DHujPeYswdt0JOBw03JC11hmqQ+Vtb1K9fkbgtDLtTM=","System.Diagnostics.DiagnosticSource.g8ajmpm5cd.wasm":"sha256-cMsx1BaqBdShCb2hCIIcg1cu8DpCR6mybVTUh61tCWM=","System.IO.Compression.y5glqpjnb8.wasm":"sha256-6mwr7Ug6Xh7nYE5sSoUjQtV7ehgyUiTuL+IETvfEL4U=","System.IO.Packaging.8th4tkd3a0.wasm":"sha256-1C+I5A7ESuL28X57RP+FiTL8ayuTe86SmJE6NSg4dQA=","System.Linq.Expressions.biujz7ou20.wasm":"sha256-M6AwJILP8bI0CD1p7jb1rT7DBE2E2SxUNiT+AArcV/A=","System.Linq.6btt3su4oy.wasm":"sha256-ouzI51Ta1wlktuj2h6VgfMn7RDDjWweSZ7nHHHRnV8k=","System.Memory.m6pzfzg6nf.wasm":"sha256-PsWHMVtxDG4tlLs5Ehnac6R7c/P12MhR2Hkn8UhYqfY=","System.Net.Http.5n712yykv5.wasm":"sha256-8QauHTjEWUMCHnUrtqi7oyjYh442Ih49nJaVLCyUNck=","System.Net.Primitives.0h7y3g6nqf.wasm":"sha256-rGIYM/g7mFHB4tUKXxzKAMTdeOGYJ8NmnYQ66r9vFwE=","System.ObjectModel.7q79mw545v.wasm":"sha256-XzW0DP5J4D5HhpBC9+IEXalmi7K0txtxRQRQloOFshI=","System.Private.Uri.4o2ojye61w.wasm":"sha256-fMF0tbuaB2aa9IXoBrucZrpL8wgrIr9KleX8BZeFpHE=","System.Private.Xml.Linq.trt4nj2tpp.wasm":"sha256-R42st1IgbrLRA1kwuI/YvAOjfn0pqcO7Y/eQZbtn1gg=","System.Private.Xml.fx4cl1bai1.wasm":"sha256-86zH8VBnIMhKsGkh8VEmfC3+Vm0QGzPiHxheWBPJLQQ=","System.Text.RegularExpressions.jeufitb0vn.wasm":"sha256-VSLyK4otYaCqpu8GYBmxEYokWbrAs9m/DliyakK7KMU=","System.m0fu6d0eya.wasm":"sha256-hkGLo/MuT/FJ0Xf4XUL0D2VA4dZV532GHNB1JicxLko=","System.Xml.Linq.qsgzs1hc1j.wasm":"sha256-yo+J3RWIIHIiwAhqsR9JizNkH/+hd3auB44RBmvvLoI=","Walnut.x0sudg2laf.wasm":"sha256-YbbMd2g1DTYs7uFnJ/gXaQC9DX5zlIgpmlBQEV8GJys="}},ll=0,cl=!0,dl="sharded",ul={mainAssemblyName:al,resources:il,debugLevel:ll,linkerEnabled:cl,globalizationMode:dl};let Rt=null;async function fl(){const e=await vi.withConfig(ul).withResourceLoader((s,r,o,a)=>s==="dotnetjs"?o:new URL(o,location.href).origin!==location.origin?fetch(o,{credentials:"omit",integrity:a}):o).create(),t=e.getConfig().mainAssemblyName;return t?e.getAssemblyExports(t):null}function ml(){return h.useMemo(()=>(Rt||(Rt=fl()),Rt),[])}function hl({children:e,...t}){return n.jsxs(Go,{...t,className:"decorated-link",children:[e,n.jsx("span",{"aria-hidden":!0,className:"ms-0.5 inline-block align-middle leading-none",children:n.jsx(Xo,{className:"block h-[0.75em] w-[0.75em] stroke-current stroke-[0.75]"})})]})}const Ws=({children:e,"data-start":t=null,"data-end":s=null,"data-is-last-node":r,"data-is-only-node":o,tag:a})=>{const{animationTiming:i,shouldAnimate:l,shouldHide:d,isDisabled:c,onComplete:u,onReady:f}=or({isMarker:!0,tag:a,children:e,start:t,end:s,isLastNode:r,isOnlyNode:o});return c||d?n.jsx(a,{"data-start":t,"data-end":s,className:N(d&&"hidden"),children:e}):n.jsx(a,{"data-start":t,"data-end":s,className:N(Lt.marker,l?Lt.animate:Lt.hidden),onAnimationStart:()=>f(0),onAnimationEnd:()=>u(0),style:rr(i),children:e})},pl={p:e=>n.jsx(be,{tag:"p",...e}),h1:e=>n.jsx(be,{tag:"h1",...e}),h2:e=>n.jsx(be,{tag:"h2",...e}),h3:e=>n.jsx(be,{tag:"h3",...e}),h4:e=>n.jsx(be,{tag:"h4",...e}),h5:e=>n.jsx(be,{tag:"h5",...e}),h6:e=>n.jsx(be,{tag:"h6",...e}),li:e=>n.jsx(Ws,{tag:"li",isListItem:!0,...e}),hr:e=>n.jsx(Ws,{tag:"hr",...e})};function gl(e){const t=e.split(`
`);yl(t);const s=t.pop();if(s===":"||s==="::")t.push("");else{const r=xl(s).trimEnd();r&&t.push(r)}return t.join(`
`)}function xl(e){if(!e||/^\s*-\s*([*_]+)?\s*$/.test(e))return"";const t=[];let s="",r=0;for(;r<e.length;){if(e[r]==="*"&&e[r+1]==="*"){s+="**",t.length&&t[t.length-1]==="**"?t.pop():t.push("**"),r+=2;continue}if(e[r]==="*"||e[r]==="_"){s+=e[r];const a=e[r];t.length&&t[t.length-1]===a?t.pop():t.push(a),r++;continue}if(e[r]==="["){const a=e[r];s+=a,t.push(a),r++;continue}if(e[r]==="]"){const a=e[r];s+=a,t.length&&t[t.length-1]==="["&&t.pop(),r++;continue}if(e[r]==="("&&e[r-1]==="]"){const a=e[r];s+=a,t.push(a),r++;continue}if(e[r]===")"){const a=e[r];s+=a,t.length&&t[t.length-1]==="("&&t.pop(),r++;continue}s+=e[r],r++}if(t.length===0)return e;let o=s.trimEnd();for(;t.length;){const a=t.pop();if(a==null)break;a==="("?o+=")":o.endsWith(a)?o=o.slice(0,-a.length).trimEnd():a==="["?o+="]()":o+=a}return o}function yl(e){let t=!1;for(let s=0;s<e.length;s++){const r=e[s];if(vl(r)){t=!t;continue}if(t)continue;const o=r.trim();if(o.startsWith(":::")&&o!==":::"){const a=o.indexOf("{");if(a===-1){const i=o.slice(3).trim();if(i.length>0&&!(i in ma)){e[s]=":::";continue}const l=r.replace(/\s+$/,"");e[s]=l+"{}";continue}if(!bl(o,a)){const i=r.slice(0,r.indexOf("{")).replace(/\s+$/,"");e[s]=i+"{}"}}e.length>1&&e[e.length-1]===":::"&&e[e.length-2]===":::"&&e.splice(-2)}}function bl(e,t){let s=null,r=0,o=!1;for(let a=t;a<e.length;a++){const i=e[a];if(o){o=!1;continue}if(i==="\\"){o=!0;continue}if(s){i===s&&(s=null);continue}if(i==='"'||i==="'"){s=i;continue}if(i==="{"){r++;continue}if(i==="}"){if(r--,r===0)return!0;continue}}return!1}function vl(e){return e.trimStart().startsWith("```")}function wl({citation:e}){return n.jsx(Un,{side:"top",triggerButton:n.jsx("span",{className:"inline-flex items-center font-bold",children:n.jsx(T,{id:"ZNWtPG",defaultMessage:"{startChar}clipboard {icon}{endChar}",values:{startChar:"「",icon:n.jsx(ir,{className:"mb-1 inline-block size-5"}),endChar:"」"}})}),className:"max-w-xl",children:n.jsxs("div",{className:"flex flex-col items-stretch gap-1",children:[n.jsx("div",{className:"flex justify-end border-b",children:n.jsx(ar,{onCopy:t=>Vn(e.text,void 0,t),buttonText:!0,textPosition:"left"})}),n.jsx("div",{children:e.text})]})})}function _l({citation:e,clientThreadId:t,nodeType:s}){const r=L(),o=ot(t),a=lr(e.screenshot_asset_pointer,o);return s==="containerDirective"&&r.formatMessage({id:"4/Vs6a",defaultMessage:"Cited Screenshot"}),n.jsx(Un,{side:"top",triggerButton:n.jsx("span",{className:"inline-flex items-center font-bold",children:n.jsx(T,{id:"qUxKU1",defaultMessage:"{startChar}screenshot {icon}{endChar}",values:{startChar:"「",icon:n.jsx(jt,{className:"mb-1 inline-block size-5"}),endChar:"」"}})}),className:"max-w-xl",children:a?n.jsx("img",{className:"w-xl max-w-screen",src:a,alt:r.formatMessage({id:"4/Vs6a",defaultMessage:"Cited Screenshot"})}):n.jsx("div",{className:"text-sm",children:n.jsx(T,{id:"BUdJTR",defaultMessage:"Screenshot not available"})})})}function mo({clientThreadId:e,messageId:t,fileId:s,fileName:r,processedMarkdownInfo:o,isStandaloneAttachment:a}){const i=ot(e),l=Mt(e,_=>t?_?.tree.getNodeIfExists(t)?.message:void 0),d=h.useMemo(()=>{if(!l)return null;const _={content_type:ha.Text,parts:[`{{file:${s}}}`]},p={...l?.metadata,is_synthetic_share_message:!0,is_standalone_share_attachment:a};return p.content_references=o?.displayedContentReferences.filter(S=>S.type!=="debug")??[],p.citations=[],o&&(_.parts=[o.rawText],p.n7jupd_crefs=o.n7jupdCrefs),{...l,id:Ho(),content:_,metadata:p}},[l,s,o,a]),c=h.useMemo(()=>{if(!(!l||!d||!i))return{previewMessage:d,clientThreadId:e,fileId:s,messageId:l.id,serverThreadId:i,isStandaloneAttachment:a,fileName:r}},[d,e,s,l,i,a,r]),u=cr({odysseyShareIntent:c,clientThreadId:e}),[f,x]=h.useState(!1);return{onClick:h.useCallback(async()=>{x(!0),await u(),x(!1)},[x,u]),isLoading:f,isEnabled:!!c}}function kl({clientThreadId:e,messageId:t,fileId:s,fileName:r,processedMarkdownInfo:o}){const a=L(),{onClick:i,isLoading:l,isEnabled:d}=mo({clientThreadId:e,messageId:t,fileId:s,fileName:r,processedMarkdownInfo:o,isStandaloneAttachment:!1});return d?n.jsx(dr,{onClick:i,label:a.formatMessage({id:"ConversationTurn.sharePostButtonTooltip",defaultMessage:"Share"}),icon:l?rt:ur}):null}function Sl(e){return e.endsWith(".md")}const Cl=({citation:e,clientThreadId:t,messageId:s})=>{const[r,o]=h.useState(!1),a=ot(t),i=Tt(),[l,d]=h.useState(null),c=h.useRef(null),u=h.useCallback(v=>{i.danger(v,{toastId:"ttom_file_citation_failed_to_download_file"})},[i]),f=e.file_id,x=K(),b=B(x,"3154019201"),y=b,_=ls(),p=hs(!0,a,f,void 0,u),S=p?.data,C=p?.isPending||!1;h.useEffect(()=>{if(S?.status==="success"&&S.download_url){c.current?.abort();const v=new AbortController;c.current=v,o(!0),(async()=>{try{const k=await fetch(S.download_url,{headers:_?{}:cs(),signal:v.signal});if(!k.ok)throw new Error(`HTTP ${k.status}`);d(await k.text())}catch(k){k.name!=="AbortError"&&i.danger("Failed to download file",{toastId:"ttom_file_citation_failed_to_download_file"})}finally{o(!1)}})()}return()=>{c.current?.abort()}},[S,i,_]);const w=h.useContext(ue),m=h.useMemo(()=>{if(l==null)return null;const k=(w?.message?.metadata?.content_references_by_file??{})[e.cite_key]??[],g=pa(l,k);let j=g.processedText;const P=g.displayedContentReferences??[],I=(w?.message?.metadata?.n7jupd_crefs_by_file??{})[e.cite_key]??[];return I.length>0&&(j=fr(j,I)),{processedText:j,displayedContentReferences:P,n7jupdCrefs:I,rawText:l}},[l,w,e.cite_key]);return C||r?n.jsx(rt,{className:"inline"}):!m||!w?.message?"[Could not display report]":n.jsx(ue.Provider,{value:{...w,contentReferences:m.displayedContentReferences,n7jupdCrefs:m.n7jupdCrefs},children:n.jsxs("div",{className:"border-token-border-light dark:border-token-bg-tertiary @container relative mx-[-16px] mt-4 mb-4 flex cursor-text flex-col items-start overflow-hidden rounded-[14px] border px-4 pt-6 pb-6 contain-inline-size sm:mx-[-32px] sm:rounded-[28px] sm:px-8 sm:shadow-sm",children:[n.jsx("div",{className:"w-full pt-1 pb-1 sm:pt-4 sm:pb-3",children:n.jsx(mr,{clientThreadId:t,componentOverrides:hi,children:m.processedText})}),y&&n.jsx("div",{className:"flex",children:b&&n.jsx(kl,{clientThreadId:t,messageId:s,fileId:f,fileName:e.file_name,processedMarkdownInfo:m,isStandaloneAttachment:!1})})]})})},Us=(e,t)=>{const s=new bi(new URL("{{.assetPrefix}}/assets/walnut-worker-v31biqeY.js",import.meta.url),{type:"module"});return new Promise((r,o)=>{s.onmessage=a=>{s.terminate(),a.data.error?o(new Error(a.data.error)):r(a.data.protoBytes??new Uint8Array)},s.onerror=a=>{s.terminate(),o(a)},s.postMessage({bytes:e.buffer,ext:t},[e.buffer])})},jl=to(()=>ds(()=>import("./o3axea4v7eis6rc5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(e=>e.WalnutMiniPlayer)),Nl=({citation:e,clientThreadId:t,messageId:s})=>{const r=ml(),[o,a]=h.useState(!1),[i,l]=h.useState(null),[d,c]=h.useState(!1),u=!!h.useContext(ue)?.message.metadata?.is_standalone_share_attachment,f=hr(),{presentationMap:x,updatePresentationMap:b,open:y}=wi(),_=K(),p=ot(t),S=B(_,"3154019201")&&!!p,C=B(_,"638971034"),w=ga(_,"2888003541").value,m=Number(w?.max_bytes??3e7),v=Tt(),k=h.useRef(null),g=h.useCallback(q=>{v.danger(q,{toastId:"w_failed_to_download_file"})},[v]),j=!!e.file_id,P=hs(!1,t,e.file_id,()=>{},g),$=x[e.file_id]?.presentation,I=x[e.file_id]?.workbook,R=h.useCallback(async q=>{if(t!==void 0){q.preventDefault();const{data:Q}=await P.refetch();if(Q===void 0||Q?.status!=="success"){v.danger("Failed to download file");return}const F=document.createElement("a");F.href=Q.download_url,F.click()}},[t,P,v]),{refetch:O}=P,A=ls();h.useEffect(()=>{k.current?.abort();const q=new AbortController;return k.current=q,a(!0),(async()=>{let Q=!1;try{const{data:F}=await O();if(F===void 0||F?.status!=="success"){v.danger("Failed to download file");return}const G=await fetch(F.download_url,{headers:A?{}:cs(),signal:q.signal});if(!G.ok)throw new Error(`HTTP ${G.status}`);const Z=await G.blob();if(m!==0&&Z.size>m){c(!0),l("fileTooLarge"),Q=!0;return}const z=new Uint8Array(await Z.arrayBuffer()),H=_s(e.file_name)??"pptx";if(H==="pptx"){let W;if(C)W=await Us(z,H);else{const Y=await r;if(!Y)return;W=Y.PptxReader.ExtractSlidesProto(z,!1)}const ye=pi.decode(W);b(e.file_id,{fileBlob:Z,fileName:e.file_name,presentation:ye,workbook:null,document:null,selectedSlideIdx:0,selectedSheetIdx:0})}else{let W;if(C)W=await Us(z,H);else{const Y=await r;if(!Y)return;W=Y.XlsxReader.ExtractXlsxProto(z,!1)}const ye=fo.decode(W);b(e.file_id,{fileBlob:Z,fileName:e.file_name,presentation:null,workbook:ye,document:null,selectedSlideIdx:0,selectedSheetIdx:0})}}catch(F){F.name!=="AbortError"&&(c(!0),Pt.addError(F,{file_id:e.file_id}))}finally{a(!1),f&&!Q&&y(e.file_id)}})(),()=>{k.current?.abort()}},[O,v,b,e.file_name,e.file_id,f,y,m,A,r,C]);function X(q){q.preventDefault(),y(e.file_id)}const{onClick:me,isLoading:ae,isEnabled:ie}=mo({clientThreadId:t,messageId:s,fileId:e.file_id,fileName:e.file_name,processedMarkdownInfo:null,isStandaloneAttachment:!0}),he=u&&!f,Ve=_s(e.file_name);return n.jsxs("div",{className:N("border-token-border-light flex max-w-[calc(0.8*var(--thread-content-max-width,40rem))] flex-col overflow-hidden rounded-lg border",u&&"mx-auto my-0"),children:[n.jsxs("div",{className:"text-token-text-secondary border-token-border-light flex flex-row justify-between gap-4 border-b p-2",children:[n.jsxs("div",{className:"flex flex-row items-center gap-2 overflow-hidden",children:[n.jsx(gi,{fileName:e.file_name}),n.jsx("div",{className:"truncate text-sm font-medium",children:Ve==="pptx"?n.jsx(T,{id:"HTIcmf",defaultMessage:"Presentation"}):n.jsx(T,{id:"pftlup",defaultMessage:"Spreadsheet"})})]}),n.jsxs("div",{className:"text-token-text-tertiary flex flex-row items-center",children:[!he&&n.jsxs(n.Fragment,{children:[j&&n.jsx("button",{className:"hover:text-token-text-secondary hover:bg-token-bg-tertiary rounded-full p-1",onClick:R,children:n.jsx(pr,{})}),n.jsx("button",{className:"hover:text-token-text-secondary hover:bg-token-bg-tertiary disabled:text-token-text-tertiary rounded-full p-1 disabled:cursor-not-allowed disabled:bg-transparent",disabled:!$&&!I,onClick:X,children:n.jsx(yi,{})})]}),S&&!!s&&ie&&n.jsx("button",{className:"hover:text-token-text-secondary hover:bg-token-bg-tertiary rounded-full p-1",disabled:!ie,onClick:me,children:ae?n.jsx(rt,{}):n.jsx(Ml,{})})]})]}),n.jsxs("div",{className:"bg-token-bg-secondary group relative p-2",children:[n.jsx(jl,{walnutId:e.file_id,isLoading:o,isError:d,isInShareModal:he,errorMessage:i,handleDownloadClick:R}),he&&n.jsx("div",{className:"absolute end-5 top-46 z-10 inline-flex flex-shrink-0 items-end justify-end",children:n.jsx(gr,{className:N("inline h-4 w-24 text-end")})})]})]})},Ml=({className:e})=>n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:e,children:[n.jsx("path",{d:"M3 12.4428V12.2806C3 11.9219 3.2843 11.631 3.63497 11.631C3.98563 11.631 4.26993 11.9219 4.26993 12.2806V12.4428C4.26993 13.1372 4.2708 13.6193 4.3007 13.994C4.33 14.3609 4.38426 14.5675 4.46108 14.7218L4.52821 14.8459C4.69655 15.1266 4.93812 15.3556 5.22657 15.5061L5.35059 15.5604C5.48786 15.6107 5.6688 15.6476 5.938 15.6701C6.30417 15.7008 6.77519 15.7007 7.45408 15.7007H12.546C13.2246 15.7007 13.6959 15.7008 14.0621 15.6701C14.4204 15.6402 14.6226 15.5846 14.7735 15.5061L14.8946 15.4364C15.169 15.2642 15.3929 15.0169 15.5399 14.7218L15.593 14.595C15.6421 14.4546 15.6782 14.2692 15.7003 13.994C15.7301 13.6193 15.73 13.1372 15.73 12.4428V12.2806C15.73 11.922 16.0145 11.6312 16.3651 11.631C16.7157 11.631 17 11.9219 17 12.2806V12.4428C17 13.1158 17.0006 13.6601 16.9655 14.0999C16.9342 14.4916 16.8722 14.8443 16.7343 15.1731L16.6709 15.3123C16.4174 15.8213 16.0318 16.2469 15.5585 16.544L15.3506 16.6632C14.9909 16.8507 14.6028 16.9281 14.1655 16.9646C13.7356 17.0006 13.2038 17 12.546 17H7.45408C6.79615 17 6.26438 17.0006 5.8345 16.9646C5.45207 16.9327 5.10749 16.8699 4.78649 16.729L4.65035 16.6632C4.1528 16.4038 3.73604 16.0094 3.44569 15.5251L3.32914 15.3123C3.14585 14.9444 3.07023 14.5473 3.03451 14.0999C2.9994 13.6601 3 13.1158 3 12.4428Z"}),n.jsx("path",{d:"M9.99993 13.2544C10.3505 13.2544 10.6348 12.9635 10.6348 12.6047V5.218L12.7337 7.36545L12.8335 7.44845C13.0799 7.61506 13.4146 7.58749 13.6316 7.36545C13.8486 7.14342 13.8756 6.80101 13.7127 6.54884L13.6316 6.44677L10.4493 3.19088C10.3302 3.06897 10.1683 3 9.99993 3C9.8316 3.0001 9.67044 3.06906 9.55138 3.19088L6.36815 6.44677C6.12048 6.70037 6.12057 7.11179 6.36815 7.36545C6.58526 7.58755 6.92077 7.61523 7.1673 7.44845L7.26707 7.36545L9.36491 5.21897V12.6047C9.36491 12.9634 9.64934 13.2542 9.99993 13.2544Z"})]}),Tl=new Set(["jpg","jpeg","png","gif","webp","svg"]),Pl=e=>{const t=e.split(".").pop();return t?Tl.has(t):!1};function $l({citation:e,clientThreadId:t,messageId:s}){const r=xa(),o=ya();h.useEffect(()=>{r===ba.Research&&o(null)},[r,o]);const a=K();return xi(e.file_name)&&B(a,"3392860057")?n.jsx(Nl,{citation:e,clientThreadId:t,messageId:s,children:e.label??e.file_name}):Sl(e.file_name)?n.jsx(Cl,{citation:e,clientThreadId:t,messageId:s}):n.jsx(El,{citation:e,clientThreadId:t,messageId:s})}function El({citation:e,clientThreadId:t}){const s=ot(t),r=Tt(),o=h.useCallback(i=>{r.danger(i,{toastId:"fcoa_renderer_failed_to_download_file"})},[r]),{data:a}=hs(!0,s,e.file_id,void 0,o);return Pl(e.file_name)&&a?.download_url?n.jsx("img",{src:a?.download_url,alt:e.label??e.file_name,className:"max-h-[350px] max-w-screen"}):n.jsx("a",{href:a?.download_url,children:e.label??e.file_name})}function Al({citationIndex:e,clientThreadId:t,nodeType:s,messageId:r}){const o=parseInt(e,10),a=h.useContext(ue);if(!a)return null;const i=a.n7jupdCrefs?.[o];if(!i)return null;switch(i.type){case"clipboard":return n.jsx(wl,{citation:i});case"computer_output":return n.jsx(_l,{citation:i,clientThreadId:t,nodeType:s});case"file":return n.jsx($l,{citation:i,clientThreadId:t,messageId:r});case"invalid":return null}}function Il({path:e,lineRangeStart:t,lineRangeEnd:s,gitUrl:r}){const[o,a]=h.useState(!1),i=h.useContext(Et),l=h.useRef(null),d=h.useRef(null),c=h.useRef(null),u=()=>{c.current&&(clearTimeout(c.current),c.current=null),a(!0)},f=()=>{c.current=window.setTimeout(()=>{a(!1)},200)};if(!e)return null;const x=i?.fileSnapshots.find(y=>y.path===e);if(!x)return null;const b=Fl(t,s,x);return b.length?n.jsxs(ss,{open:o,onOpenChange:a,children:[n.jsx(ns,{asChild:!0,onMouseEnter:u,onMouseLeave:f,children:n.jsx("span",{ref:l,className:"bg-token-bg-secondary text-token-text-secondary mx-0.5 inline-flex aspect-square size-min cursor-default items-center justify-center rounded-full p-1",children:n.jsx(ji,{className:"size-[10px]"})})}),n.jsx(os,{children:n.jsx(rs,{ref:d,className:"z-50 focus:outline-none",side:"right",onMouseEnter:u,onMouseLeave:f,onOpenAutoFocus:y=>y.preventDefault(),children:n.jsx(Ll,{snapshot:x,snippetLines:b,lineRangeStart:t,lineRangeEnd:s,gitUrl:r})})})]}):null}function Ll({snapshot:e,snippetLines:t,lineRangeStart:s,lineRangeEnd:r,gitUrl:o}){const a=e.path.split(".").pop()??"sh",i=t.reduce((d,c)=>{if(c.trim()==="")return d;const u=c.match(/^\s*/),f=u?u[0].length:0;return d===-1?f:Math.min(d,f)},-1),l=t.map(d=>i>0?d.slice(i):d).join(`
`);return n.jsxs("div",{className:"bg-token-bg-primary border-token-border-default mx-4 flex max-h-[600px] flex-col rounded-2xl border px-2 pt-2 pb-4 shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] focus:outline-none dark:shadow-none",children:[l&&n.jsx(xr,{wrapperClassName:"rounded-lg !bg-token-bg-tertiary !border-none mb-3 max-h-[400px] overflow-auto text-xs w-[600px] max-w-full",codeContainerClassName:"!p-2",language:a,content:l,showActionBar:!1}),n.jsxs("div",{className:"grid w-full grid-cols-[minmax(0,1fr)_auto] items-center justify-between gap-1 px-2 text-sm",children:[e.path,n.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 whitespace-nowrap",children:[n.jsx(T,{id:"wham.citation.file.lineRange",defaultMessage:"Lines {lineRangeStart}-{lineRangeEnd}",values:{lineRangeStart:s,lineRangeEnd:r}}),o&&n.jsx("a",{className:"group flex w-full items-center gap-1 p-1",href:o,target:"_blank",rel:"noopener noreferrer",children:n.jsx(va,{className:"icon-xs hover:text-token-text-primary"})})]})]})]})}function Fl(e,t,s){if(s.contents){const i=s.contents.split(`
`),l=Math.max(0,e-1),d=t?Math.min(i.length,t):l+1;return i.slice(l,d)}const r=s.line_range_contents?.find(i=>Rl(i,e,t));if(!r)return[];const o=Math.max(e-r.line_range_start,0),a=o+(t-e+1);return r.content.slice(o,a)}function Rl(e,t,s){return t<e.line_range_start?!1:!(s>e.line_range_end)}function Dl({assetPointer:e}){const t=h.useContext(Et),s=L(),r=t?.imagePointers.find(i=>i.asset_pointer===e),o=qn({asset:{content_type:so.ImageAssetPointer,asset_pointer:r?.asset_pointer??"",size_bytes:r?.size_bytes??0,width:r?.width??0,height:r?.height??0}});if(!r||!o.data?.url)return null;const a=s.formatMessage({id:"wham.contentReference.imageAlt",defaultMessage:"Captured screenshot"});return n.jsx(yr,{src:o.data.url,alt:a,className:"max-h-[250px] max-w-[250px]",children:n.jsx(br,{src:o.data.url,alt:a,width:r.width,height:r.height,className:"max-h-[250px] max-w-[250px] object-contain"})})}function Ol(){const e=no.getItem(oo.ProposedTasks);return e&&typeof e=="object"?e:{}}const Vs=wa(e=>({tasks:Ol(),store(t){e(s=>{const r={...s.tasks,[t.contentId]:t};return no.setItem(oo.ProposedTasks,r),{tasks:r}})}}));function zl({title:e,prompt:t,environmentId:s,branch:r,contentId:o,hasHitRateLimit:a}){const[i,l]=h.useState(!1),d=_a(),{setEnvironmentId:c,setBranch:u}=lo(),{refetch:f}=Ti(),x=L(),b=Tt(),y=Vs(m=>m.tasks[o]),_=Vs(m=>m.store),{mutate:p,isPending:S}=Wo({mutationFn:()=>Pi.createNewTask(s,r,t,!1).catch(m=>{throw b.danger({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task",description:"Toast text shown when a task failed to create."},{id:`suggestion-${o}`,duration:5,hasCloseButton:!0,toastId:"wham_proposed_task_failed_to_create_task"}),m}),onSuccess:async m=>{await f(),C(m)}}),C=m=>{try{const v=m.task.id,k=m.turn.id,g=`/codex/tasks/${v}`;_({contentId:o,prompt:t,scheduledTaskId:v,turnId:k,url:g}),l(!1)}catch{}},w=!s||!r||S||a;return n.jsxs("div",{className:N("mt-1 mb-3 flex w-full items-center rounded-xl px-3 py-3",y?"bg-token-bg-secondary border border-transparent":"bg-token-bg-primary border-token-border-default border shadow-[0px_1px_1px_0px_rgba(0,0,0,0.05)]"),children:[n.jsxs("div",{className:N("group flex flex-1 items-center gap-1",!y&&"-my-3 py-3",!y&&!w&&"cursor-pointer"),onClick:()=>{w||y||(c(s),u(r),l(!0),ks.recordProposedTaskClicked("edit"))},children:[n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsx("span",{className:"text-token-text-tertiary text-xs",children:n.jsx(T,{id:"wham.whamProposedTask.title",defaultMessage:"Suggested task"})}),n.jsx("span",{className:N("text-sm font-medium",y&&"text-token-text-tertiary"),children:e})]}),!w&&!y&&n.jsx(vr,{className:"icon-sm text-token-text-secondary mb-0.5 cursor-pointer self-end opacity-0 transition-opacity group-hover:opacity-100"})]}),n.jsx("div",{className:"flex items-center justify-end gap-2 text-xs",children:y?n.jsx(oe,{size:"small",color:"secondary",as:"a",to:y?.url,openNewTab:!0,children:n.jsx("span",{className:"text-token-text-primary font-medium",children:n.jsx(T,{id:"lwqFNG",defaultMessage:"View task"})})}):n.jsx(Bl,{prompt:a?x.formatMessage({id:"wham.proposedTask.hitRateLimit",defaultMessage:"You have reached your rate limit"}):t,tooltipEnabled:!y&&!i,children:n.jsx(oe,{size:"small",color:"secondary",disabled:w,onClick:()=>{ks.recordProposedTaskClicked("create"),p()},children:n.jsxs("div",{className:"flex items-center gap-0.5",children:[n.jsx(T,{id:"b2N2Y8",defaultMessage:"Start task"}),S?n.jsx(rt,{className:"icon-xs me-[2px]"}):n.jsx(wr,{className:"icon-sm"})]})})})}),n.jsx(ve.Root,{testId:"modal-task-stub-composer",isOpen:i,onClose:()=>l(!1),children:n.jsx(ve.Overlay,{children:n.jsxs(ve.Content,{className:"flex max-w-3xl! items-center justify-center px-12 py-4 focus:outline-hidden",size:"normal",removeBackground:!0,onEscapeKeyDown:m=>{m.stopPropagation(),l(!1)},children:[n.jsxs(ka,{children:[n.jsx(Sa,{children:n.jsx(T,{id:"wham.proposedTaskModel.title",defaultMessage:"Kick off a new Codex task"})}),n.jsx(Ca,{children:n.jsx(T,{id:"wham.proposedTaskModel.description",defaultMessage:"Codex can propose new follow up tasks"})})]}),n.jsx(Xt.div,{initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{duration:d?0:.25},className:"w-full",children:n.jsxs("div",{className:"flex flex-col items-center gap-8",children:[n.jsx("h1",{className:"text-token-text-primary dark text-[28px] font-semibold",children:n.jsx(T,{id:"wham.proposedTaskModal.title",defaultMessage:"Edit suggested task"})}),n.jsx(Hl,{prompt:t,onSuccess:C})]})})]})})})]})}function Bl({prompt:e,tooltipEnabled:t,children:s}){return t?n.jsx(at,{side:"right",label:n.jsx("span",{className:"block p-2 text-start whitespace-pre-wrap",children:e}),wide:!0,children:s}):s}function Hl({prompt:e,onSuccess:t}){const{composerController:s}=Mi();return h.useEffect(()=>{ja(Na(s),e.trimEnd())},[s,e]),n.jsx(Ma.Provider,{value:s,children:n.jsx(Ni,{isBigBoxMode:!0,expanded:!0,disableDuringSubmit:!0,onSuccess:t})})}function Wl({title:e,prompt:t}){const s=h.useContext(Et),r=lo(a=>a.getRateLimit()?.remaining===0),o=h.useMemo(()=>Ul(`${s?.taskId}:${e}:${t}`),[s?.taskId,e,t]);return!s||!s.environmentId||!s.branch?null:n.jsx(zl,{title:e,prompt:t,environmentId:s.environmentId,branch:s.branch,contentId:o,hasHitRateLimit:r})}function Ul(e){let t=5381;for(let s=0;s<e.length;s++)t=(t<<5)+t^e.charCodeAt(s);return(t>>>0).toString(16).padStart(8,"0")}function Vl({chunkId:e,lineRangeStart:t,lineRangeEnd:s}){const[r,o]=h.useState(!1),i=h.useContext(Et)?.terminalMessageContents.find(y=>y.includes(e)),l=h.useRef(null),d=h.useRef(null),c=h.useRef(null);if(!i)return null;const u=Xl(i);if(!u)return null;const f=u.output.slice(t-1,s);if(!f.some(y=>!!y.length))return null;const x=()=>{c.current&&(clearTimeout(c.current),c.current=null),o(!0)},b=()=>{c.current=window.setTimeout(()=>{o(!1)},200)};return n.jsxs(ss,{open:r,onOpenChange:o,children:[n.jsx(ns,{asChild:!0,onMouseEnter:x,onMouseLeave:b,children:n.jsx("span",{ref:l,className:"bg-token-bg-secondary text-token-text-secondary mx-0.5 inline-flex aspect-square size-min cursor-default items-center justify-center rounded-full p-1",children:n.jsx(_r,{className:"size-[10px]"})})}),n.jsx(os,{children:n.jsx(rs,{ref:d,className:"z-50 focus:outline-none",side:"right",onMouseEnter:x,onMouseLeave:b,onOpenAutoFocus:y=>y.preventDefault(),children:n.jsx("div",{className:"max-h-[500px] max-w-screen px-4",children:n.jsx(ql,{lines:f,lineRangeStart:t,lineRangeEnd:s})})})})]})}function ql({lines:e,lineRangeStart:t,lineRangeEnd:s}){return n.jsxs("div",{className:"bg-token-bg-primary border-token-border-default mx-4 flex flex-col overflow-auto rounded-2xl border px-2 pt-2 pb-3 shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] focus:outline-none dark:shadow-none",children:[n.jsx($i,{className:"bg-token-sidebar-surface-primary dark mb-2.5 max-h-[200px] w-full overflow-auto rounded-lg p-3 font-mono text-xs whitespace-pre text-white dark:border dark:border-white/10",children:e.join(`
`)}),n.jsx("div",{className:"flex w-full justify-end gap-1 px-2 text-sm",children:n.jsx("span",{className:"text-token-text-tertiary",children:n.jsx(T,{id:"wham.citation.terminal.lineRange",defaultMessage:"Lines {lineRangeStart}-{lineRangeEnd}",values:{lineRangeStart:t,lineRangeEnd:s}})})})]})}function Xl(e){try{const t=JSON.parse(e);return!("chunk_id"in t)||typeof t.chunk_id!="string"||!("session_name"in t)||typeof t.session_name!="string"||!("start_line_no"in t)||typeof t.start_line_no!="number"?null:"output"in t?t:null}catch{return null}}function Gl(e){return e&&/^turn[0-9]+ifs[0-9]+$/.test(e)}const Jl=4;function Zl({metadata:e,analyticsMetadata:t,trackContentReferenceEvent:s,imageSource:r}){const o=r??tt.Turn,a=it(),i=e.images,l=i.some(x=>x.is_proxied_image)?[]:i.map(x=>x.thumbnail_url),d=Uo({queries:l.map(x=>Fi(x,"_ImageCarousel")),combine:x=>{const b=new Set;return x.forEach((y,_)=>{y.isSuccess&&b.add(l[_])}),b}}),c=i.filter(x=>d.has(x.thumbnail_url)),u=e.images.length;if(i.some(x=>x.is_proxied_image)){const x=i.find(y=>y.is_proxied_image),b=N("mb-7 mt-1 min-w-32 max-w-[22%] rounded-xl border-[0.5px] border-token-border-default",x?.float_top?"relative block":"float-image z-10 float-end clear-end ms-7 overflow-hidden");return n.jsx(ze,{image:x,imageSource:o,analyticsMetadata:t,trackContentReferenceEvent:s,className:b},x?.content_url)}if(u===0)return null;if(u===1){const x=e.images[0];return n.jsx(ze,{image:x,imageSource:o,analyticsMetadata:t,trackContentReferenceEvent:s,className:"float-image border-token-border-default float-end clear-end ms-7 mt-1 mb-7 max-w-[22%] min-w-32 overflow-hidden rounded-xl border-[0.5px]"},x.content_url)}const f=a?c.length:Math.min(c.length,Jl);return n.jsx("div",{className:"no-scrollbar mt-1 mb-6 flex min-h-36 flex-nowrap gap-0.5 overflow-auto sm:gap-1 sm:overflow-hidden xl:min-h-44",children:c.slice(0,f).map((x,b)=>n.jsx("div",{className:N("border-token-border-default relative aspect-square w-32 shrink-0 overflow-hidden rounded-xl border-[0.5px] md:shrink","max-h-48 sm:w-[calc((100%-0.5rem)/4)]",b===0&&"rounded-s-xl",b===f-1&&"rounded-e-xl"),children:n.jsx(ze,{image:x,imageSource:o,analyticsMetadata:t,trackContentReferenceEvent:s,className:"h-full w-full"},x.thumbnail_url)},x.thumbnail_url))})}const ps=h.memo(Zl,(e,t)=>e.numImageResults===t.numImageResults&&e.analyticsMetadata===t.analyticsMetadata&&e.trackContentReferenceEvent===t.trackContentReferenceEvent&&e.metadata.images.length===t.metadata.images.length&&e.metadata.images.every((s,r)=>s.content_url===t.metadata.images[r].content_url));function ze({image:e,imageSource:t,className:s,imgClassName:r,style:o,analyticsMetadata:a,trackContentReferenceEvent:i,badge:l,lightboxImages:d,aspectRatio:c}){const u=Ri(e,{width:Oi,aspectRatio:c??Di}),f=e?.content_url.replace(/^http:\/\//,"https://"),x=Yl(e),{isSuccess:b}=Jt(u,"ImageCarousel_thumbnail"),{isSuccess:y,isError:_}=Jt(x?f:void 0,"ImageCarousel_full"),p=h.useMemo(()=>({image_url:u,title:e?.title}),[u,e?.title]);h.useEffect(()=>{e&&b&&i("Search Content Reference Shown","search_content_reference_shown","image_v2",p)},[i,e,b,p]),h.useEffect(()=>{f&&_&&Pt.addAction("Failed to download full image",{url:f,thumbnailUrl:u})},[f,_,u]);const S=as.useStore(),C=zi(e?.thumbnail_crop_info??null,e?.thumbnail_size??null),w=!e||!(b||y||e.is_proxied_image),m=(()=>{if(!w)return e.is_proxied_image?e.url:x&&y?f:u})();return n.jsxs("button",{className:N("relative aspect-square overflow-hidden",s),style:o,onClick:()=>{i("Search Content Reference Clicked","search_content_reference_clicked","image_v2",p),S.setCurrentImage(e?{image:e,source:t,analyticsMetadata:a,imageResults:d}:void 0)},children:[w?n.jsx("div",{className:"bg-token-main-surface-tertiary aspect-square h-full w-full animate-pulse"}):n.jsx(co,{children:n.jsx("img",{src:m,alt:e?.content_url,style:C?{objectPosition:C}:{},className:N("bg-token-main-surface-tertiary m-0 h-full w-full object-cover",r)})}),l&&n.jsx("div",{className:"pointer-events-none absolute end-2 bottom-2",children:l})]})}function Yl(e){return!e||e.is_proxied_image?!1:e.thumbnail_url.includes("images.openai.com/thumbnails")}function ho({numImages:e}){return n.jsxs("div",{className:"flex items-center gap-1 rounded-full px-2 py-1.5 text-white backdrop-blur-md backdrop-brightness-75",children:[n.jsx(kr,{className:"h-4 w-4"}),n.jsx("span",{className:"text-xs font-semibold",children:e})]})}const po="mt-1 mb-5 [&:not(:first-child)]:mt-4",Kl=/^image_group[\s\S]*$/;function Ql({contentReference:e,trackContentReferenceEvent:t,analyticsMetadata:s}){const{images:r,layout:o="carousel",aspect_ratio:a}=e,i=Kl.test(e.matched_text??""),l=rc(a??"1:1"),d={images:r,trackContentReferenceEvent:t,analyticsMetadata:s,aspectRatio:l,isReferenceComplete:i};return o==="carousel"?n.jsx(cc,{...d}):o==="bento"?n.jsx(ac,{...d}):null}const He={width:9,height:5},ec={width:He.width/3,height:He.height},tc={width:He.width/3,height:He.height/2};function sc(e,t){if(t)switch(e){case 0:return"rounded-tr-md rounded-br-md rounded-tl-xl rounded-bl-xl";case 1:return"rounded-md";case 2:return"rounded-tr-xl rounded-br-md rounded-tl-md rounded-bl-md";case 3:return"rounded-tr-md rounded-br-xl rounded-tl-md rounded-bl-md";default:return""}switch(e){case 0:return"rounded-tr-md rounded-br-md rounded-tl-xl rounded-bl-xl";case 1:return"rounded-tr-xl rounded-br-md rounded-tl-md rounded-bl-md";case 2:return"rounded-tr-md rounded-br-xl rounded-tl-md rounded-bl-md";default:return""}}const nc=(e,t)=>e.image_result?e.image_result.content_url:`${e.image_search_query??e.image_ref_id}-${t}`;function oc({images:e,aspectRatio:t,trackContentReferenceEvent:s,analyticsMetadata:r}){const o=t.height>t.width,a=o?4:3;return n.jsx("div",{className:N("grid grid-flow-dense grid-cols-3 grid-rows-2 gap-1",po),style:{aspectRatio:`${He.width}/${He.height}`},children:e.map((i,l)=>{if(l>=a)return null;const c=o&&[0,1].includes(l),u=l===Math.min(a,e.length)-1&&e.length>a;return n.jsx(ze,{image:i.image_result??void 0,imageSource:tt.ImageGroup,className:N("border-token-border-default h-full w-full border-[0.5px]",c&&"col-span-1 row-span-2",!o&&l===0&&"col-span-2 row-span-2",sc(l,o)),badge:u?n.jsx(ho,{numImages:e.length}):void 0,lightboxImages:e.map(f=>f.image_result).filter(f=>!!f),aspectRatio:c?ec:tc,trackContentReferenceEvent:s,analyticsMetadata:r},nc(i,l))})})}function rc(e){const[t,s]=e.split(":"),r=parseFloat(t),o=parseFloat(s);return r<=0||o<=0?{width:1,height:1}:{width:r,height:o}}const go=(e,t)=>e.images.length===t.images.length&&e.analyticsMetadata===t.analyticsMetadata&&e.trackContentReferenceEvent===t.trackContentReferenceEvent&&e.images.every((s,r)=>s.image_result?.content_url===t.images[r].image_result?.content_url),ac=h.memo(oc,go),ic=3,Dt={width:5,height:4};function lc({images:e,analyticsMetadata:t,trackContentReferenceEvent:s,isReferenceComplete:r}){const o=it(),a=e.length,i=e.map(d=>d.image_result).filter(d=>!!d);if(a===0)return null;if(a===1){const d=e[0];return!d.image_result&&!r?null:n.jsxs(n.Fragment,{children:[n.jsx("span",{"aria-hidden":!0,className:"clear-both m-0 block h-0 p-0"}),n.jsx(ze,{image:d?.image_result??void 0,imageSource:tt.ImageGroup,analyticsMetadata:t,trackContentReferenceEvent:s,className:"float-image border-token-border-default float-end clear-end ms-7 mt-1 mb-7 w-[22%] min-w-32 overflow-hidden rounded-xl border-[0.5px]"})]})}const l=o?e.length:Math.min(e.length,ic);return n.jsx("div",{className:N("no-scrollbar flex min-h-36 flex-nowrap gap-0.5 overflow-auto sm:gap-1 sm:overflow-hidden xl:min-h-44",po),children:e.slice(0,l).map((d,c)=>{const u=c===l-1;return n.jsx("div",{className:N("border-token-border-default relative w-32 shrink-0 overflow-hidden rounded-xl border-[0.5px] md:shrink","max-h-64 sm:w-[calc((100%-0.5rem)/3)]",c===0&&"rounded-s-xl",u&&"rounded-e-xl"),style:{aspectRatio:`${Dt.width}/${Dt.height}`},children:n.jsx(ze,{image:d.image_result??void 0,imageSource:tt.ImageGroup,lightboxImages:i,analyticsMetadata:t,trackContentReferenceEvent:s,className:"h-full w-full",badge:u&&e.length>l&&n.jsx(ho,{numImages:e.length}),aspectRatio:Dt})},d.image_result?.thumbnail_url??`${d.image_search_query}-${d.image_ref_id}-${c}`)})})}const cc=h.memo(lc,go),dc=200,uc=100,mt={id:"imagePill.screenshot",defaultMessage:"screenshot",description:"Brief text to be placed in a pill as generic fallback when screenshot url is missing"},xo="m-0 p-[2px] pr-1",fc=N(xo,"h-full rounded-lg object-contain"),mc=N(xo,"p-[4px]");function qs({image:e}){const[t,s]=h.useState(!1),r=as.useStore(),o=h.useRef(null),a=h.useRef(null),i=L(),l=e?.content_url,d=h.useMemo(()=>l?Nt(l,"hostname"):null,[l]),c=h.useCallback(()=>{o.current&&clearTimeout(o.current)},[]),u=h.useCallback(()=>{e&&(c(),s(!1),r.setCurrentImage({image:e}))},[r,e,c]),f=h.useCallback(()=>{a.current&&clearTimeout(a.current)},[]),x=h.useCallback(()=>{s(!1)},[s]),b=h.useCallback(p=>{p.stopPropagation(),f(),o.current=setTimeout(()=>{s(!0)},dc)},[f]),y=h.useCallback(p=>{p.stopPropagation(),c(),a.current=setTimeout(()=>{x()},uc)},[c,x]);h.useEffect(()=>{t&&f()},[t,f]);const _=h.useMemo(()=>({onBlur:y,onMouseLeave:y,onMouseEnter:b,onFocus:b}),[y,b]);return e?n.jsxs("span",{onClick:u,className:"relative",..._,children:[n.jsxs(Xs,{isOpen:t,children:[n.jsx("img",{className:fc,src:e.thumbnail_url}),n.jsx("span",{children:d??i.formatMessage(mt)})]}),t&&n.jsx("div",{className:"absolute start-0 z-50",children:n.jsxs("div",{className:N("text-token-text-secondary border-token-border-light w-[256px] cursor-pointer px-3 pt-2 pb-3 text-sm shadow-md outline-[0.5px] outline-black/5",Ta),..._,children:[n.jsxs(xe,{href:e.content_url,target:"_blank",rel:"noopener",className:"z-50 mb-2 flex items-center gap-2 hover:opacity-70",onClick:p=>p.stopPropagation(),children:[n.jsx(Ye,{url:e.content_url,className:"m-0 size-4 p-0",size:32}),d??i.formatMessage(mt)]}),n.jsx("img",{className:"border-token-border-light m-0 cursor-pointer rounded-lg object-contain p-0 outline-[0.5px] outline-black/5",src:e.thumbnail_url,alt:d??i.formatMessage(mt),onClick:p=>{p.preventDefault(),u()}})]})})]}):n.jsxs(Xs,{isOpen:!1,children:[n.jsx("span",{className:mc,children:n.jsx(rt,{})}),n.jsx("span",{children:d??i.formatMessage(mt)})]})}function Xs({children:e,isOpen:t,...s}){return n.jsx("span",{className:N("ms-1 cursor-pointer","inline-flex max-w-full items-center","relative top-[0.2rem]","animate-[show_150ms_ease-in]"),...s,children:n.jsx("span",{className:N("text-token-text-secondary flex h-4.5 overflow-hidden rounded-xl bg-[#F4F4F4] pe-2 text-[0.5625em] font-medium dark:bg-[#303030]","hover:bg-token-text-primary! hover:text-token-text-inverted",t&&"bg-token-main-surface-tertiary text-token-text-secondary","transition-colors duration-150 ease-in-out","items-center justify-center"),children:e})})}async function hc({conversationId:e,messageId:t,assetPointerLinks:s,sharedConversationLikeId:r}){return await $a.safePost("/conversation/get_images_for_message",{requestBody:{conversation_id:e??null,share_id:r??null,message_id:t,asset_pointer_links:s},authOption:Ea.SendIfAvailable})}function pc({reference:e,conversationId:t,messageId:s,sharedConversationLikeId:r,isN7jupdMessage:o}){return Vo({queryKey:["inline-images",e,t,s],queryFn:async()=>{if(!e.asset_pointer_links||e.asset_pointer_links.length===0||!t&&!r)return{images:[],formats:[]};const i=await hc({conversationId:t,messageId:s,assetPointerLinks:e.asset_pointer_links,sharedConversationLikeId:r});for(let l=0;l<i.images.length;l++){const d=i.images[l],u=`image/${i.formats[l]}`,f=gc(d,u);i.images[l]=f}return i},...o?{retry:3,retryDelay:5e3}:{}})}function gc(e,t="",s=512){const r=atob(e),o=[];for(let i=0;i<r.length;i+=s){const l=r.slice(i,i+s),d=new Array(l.length);for(let u=0;u<l.length;u++)d[u]=l.charCodeAt(u);const c=new Uint8Array(d);o.push(c)}const a=new Blob(o,{type:t});return URL.createObjectURL(a)}const xc=200;function yc({reference:e,clientThreadId:t,message:s,trackContentReferenceEvent:r}){const o=us(t),{postId:a}=h.useContext(Sr),{data:i,isLoading:l,isError:d,error:c}=pc({reference:e,conversationId:o,messageId:s.id,sharedConversationLikeId:a,isN7jupdMessage:s.metadata?.n7jupd_message}),u=h.useRef([]);h.useEffect(()=>()=>{u.current.forEach(x=>{URL.revokeObjectURL(x)}),u.current=[]},[]);const f=yo(s,e);return c||d||i&&!("images"in i)||l||!i?.images.length?null:(u.current=[],n.jsx(n.Fragment,{children:i?.images.map((x,b)=>{const y=bo(e,x,f);return n.jsx(ps,{metadata:y,analyticsMetadata:{clientThreadId:t,messageId:s.id},numImageResults:1,trackContentReferenceEvent:r},`image-carousel-inline-${b}`)})}))}const bc=(e,t)=>{const s=new RegExp(t+"\\s*([^\\n]+)","m"),r=e.match(s);return r&&r[1]?r[1].trim().length:0};function yo(e,t){return h.useMemo(()=>{let s=-1;return e.content.content_type==="text"&&(s=bc(e.content.parts.join(""),t.matched_text)),s<xc||s===-1},[e,t.matched_text])}function bo(e,t,s){return{matched_text:e.matched_text,start_idx:e.start_idx,end_idx:e.end_idx,safe_urls:e.safe_urls,alt:e.alt,prompt_text:e.prompt_text,type:"image_v2",refs:[],images:[{url:t,content_url:e.clicked_from_url??"",thumbnail_url:t,title:e.clicked_from_title??"",attribution:Nt(e.clicked_from_url??t,"hostname"),content_size:{width:Gs,height:Js},thumbnail_size:{width:Gs,height:Js},is_proxied_image:!0,float_top:s}]}}const Gs=141,Js=143;function vc({reference:e,clientThreadId:t,message:s,trackContentReferenceEvent:r}){const o=s.metadata?.n7jupd_message&&e.matched_text.includes("screenshot"),a=us(t),i=h.useContext(Pa)?.serverSharedThreadId??void 0,l=Cr(e.asset_pointer_links[0]),d=h.useMemo(()=>({content_type:so.ImageAssetPointer,size_bytes:0,width:0,height:0,asset_pointer:l}),[l]),c=qn({asset:d,sharedThreadId:i,conversationId:a}),u=c.data?.url,f=yo(s,e),x=h.useMemo(()=>u?bo(e,u,f):null,[u,e,f]);return c.error||c.isError?null:o&&!c.data?.url&&c.isLoading?n.jsx(qs,{image:null},"image-pill-loading"):!o&&(c.isLoading||!c.data)||!x?null:o?n.jsx(qs,{image:x.images[0]}):n.jsx(ps,{metadata:x,analyticsMetadata:{clientThreadId:t,messageId:s.id},numImageResults:1,trackContentReferenceEvent:r})}const U=1e-6;let We=typeof Float32Array<"u"?Float32Array:Array;function wc(){const e=new We(2);return We!=Float32Array&&(e[0]=0,e[1]=0),e}function Zs(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e}function _c(e,t){return e[0]=-t[0],e[1]=-t[1],e}function vo(e,t,s,r){const o=t[0],a=t[1];return e[0]=o+r*(s[0]-o),e[1]=a+r*(s[1]-a),e}(function(){const e=wc();return function(t,s,r,o,a,i){let l,d;for(s||(s=2),r||(r=0),o?d=Math.min(o*s+r,t.length):d=t.length,l=r;l<d;l+=s)e[0]=t[l],e[1]=t[l+1],a(e,e,i),t[l]=e[0],t[l+1]=e[1];return t}})();function kc(){const e=new We(3);return We!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Sc(e,t,s){return e[0]=t[0]+s[0],e[1]=t[1]+s[1],e[2]=t[2]+s[2],e}function Cc(e,t,s){return e[0]=t[0]*s[0],e[1]=t[1]*s[1],e[2]=t[2]*s[2],e}function jc(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}const Nc=Cc;(function(){const e=kc();return function(t,s,r,o,a,i){let l,d;for(s||(s=3),r||(r=0),o?d=Math.min(o*s+r,t.length):d=t.length,l=r;l<d;l+=s)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],a(e,e,i),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2];return t}})();function Mc(e,t){const s=t[0],r=t[1],o=t[2],a=t[3],i=t[4],l=t[5],d=t[6],c=t[7],u=t[8],f=t[9],x=t[10],b=t[11],y=t[12],_=t[13],p=t[14],S=t[15],C=s*l-r*i,w=s*d-o*i,m=s*c-a*i,v=r*d-o*l,k=r*c-a*l,g=o*c-a*d,j=u*_-f*y,P=u*p-x*y,$=u*S-b*y,I=f*p-x*_,R=f*S-b*_,O=x*S-b*p;let A=C*O-w*R+m*I+v*$-k*P+g*j;return A?(A=1/A,e[0]=(l*O-d*R+c*I)*A,e[1]=(o*R-r*O-a*I)*A,e[2]=(_*g-p*k+S*v)*A,e[3]=(x*k-f*g-b*v)*A,e[4]=(d*$-i*O-c*P)*A,e[5]=(s*O-o*$+a*P)*A,e[6]=(p*m-y*g-S*w)*A,e[7]=(u*g-x*m+b*w)*A,e[8]=(i*R-l*$+c*j)*A,e[9]=(r*$-s*R-a*j)*A,e[10]=(y*k-_*m+S*C)*A,e[11]=(f*m-u*k-b*C)*A,e[12]=(l*P-i*I-d*j)*A,e[13]=(s*I-r*P+o*j)*A,e[14]=(_*w-y*v-p*C)*A,e[15]=(u*v-f*w+x*C)*A,e):null}function Ot(e,t,s){const r=t[0],o=t[1],a=t[2],i=t[3],l=t[4],d=t[5],c=t[6],u=t[7],f=t[8],x=t[9],b=t[10],y=t[11],_=t[12],p=t[13],S=t[14],C=t[15];let w=s[0],m=s[1],v=s[2],k=s[3];return e[0]=w*r+m*l+v*f+k*_,e[1]=w*o+m*d+v*x+k*p,e[2]=w*a+m*c+v*b+k*S,e[3]=w*i+m*u+v*y+k*C,w=s[4],m=s[5],v=s[6],k=s[7],e[4]=w*r+m*l+v*f+k*_,e[5]=w*o+m*d+v*x+k*p,e[6]=w*a+m*c+v*b+k*S,e[7]=w*i+m*u+v*y+k*C,w=s[8],m=s[9],v=s[10],k=s[11],e[8]=w*r+m*l+v*f+k*_,e[9]=w*o+m*d+v*x+k*p,e[10]=w*a+m*c+v*b+k*S,e[11]=w*i+m*u+v*y+k*C,w=s[12],m=s[13],v=s[14],k=s[15],e[12]=w*r+m*l+v*f+k*_,e[13]=w*o+m*d+v*x+k*p,e[14]=w*a+m*c+v*b+k*S,e[15]=w*i+m*u+v*y+k*C,e}function Yt(e,t,s){const r=s[0],o=s[1],a=s[2];let i,l,d,c,u,f,x,b,y,_,p,S;return t===e?(e[12]=t[0]*r+t[4]*o+t[8]*a+t[12],e[13]=t[1]*r+t[5]*o+t[9]*a+t[13],e[14]=t[2]*r+t[6]*o+t[10]*a+t[14],e[15]=t[3]*r+t[7]*o+t[11]*a+t[15]):(i=t[0],l=t[1],d=t[2],c=t[3],u=t[4],f=t[5],x=t[6],b=t[7],y=t[8],_=t[9],p=t[10],S=t[11],e[0]=i,e[1]=l,e[2]=d,e[3]=c,e[4]=u,e[5]=f,e[6]=x,e[7]=b,e[8]=y,e[9]=_,e[10]=p,e[11]=S,e[12]=i*r+u*o+y*a+t[12],e[13]=l*r+f*o+_*a+t[13],e[14]=d*r+x*o+p*a+t[14],e[15]=c*r+b*o+S*a+t[15]),e}function wo(e,t,s){const r=s[0],o=s[1],a=s[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Tc(e,t,s){const r=Math.sin(s),o=Math.cos(s),a=t[4],i=t[5],l=t[6],d=t[7],c=t[8],u=t[9],f=t[10],x=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*o+c*r,e[5]=i*o+u*r,e[6]=l*o+f*r,e[7]=d*o+x*r,e[8]=c*o-a*r,e[9]=u*o-i*r,e[10]=f*o-l*r,e[11]=x*o-d*r,e}function Pc(e,t,s){const r=Math.sin(s),o=Math.cos(s),a=t[0],i=t[1],l=t[2],d=t[3],c=t[4],u=t[5],f=t[6],x=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o+c*r,e[1]=i*o+u*r,e[2]=l*o+f*r,e[3]=d*o+x*r,e[4]=c*o-a*r,e[5]=u*o-i*r,e[6]=f*o-l*r,e[7]=x*o-d*r,e}function $c(e,t,s,r,o){const a=1/Math.tan(t/2);if(e[0]=a/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,o!=null&&o!==1/0){const i=1/(r-o);e[10]=(o+r)*i,e[14]=2*o*r*i}else e[10]=-1,e[14]=-2*r;return e}const Ec=$c;function Ys(e,t){const s=e[0],r=e[1],o=e[2],a=e[3],i=e[4],l=e[5],d=e[6],c=e[7],u=e[8],f=e[9],x=e[10],b=e[11],y=e[12],_=e[13],p=e[14],S=e[15],C=t[0],w=t[1],m=t[2],v=t[3],k=t[4],g=t[5],j=t[6],P=t[7],$=t[8],I=t[9],R=t[10],O=t[11],A=t[12],X=t[13],me=t[14],ae=t[15];return Math.abs(s-C)<=U*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(r-w)<=U*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(o-m)<=U*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-v)<=U*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-k)<=U*Math.max(1,Math.abs(i),Math.abs(k))&&Math.abs(l-g)<=U*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(d-j)<=U*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(c-P)<=U*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(u-$)<=U*Math.max(1,Math.abs(u),Math.abs($))&&Math.abs(f-I)<=U*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(x-R)<=U*Math.max(1,Math.abs(x),Math.abs(R))&&Math.abs(b-O)<=U*Math.max(1,Math.abs(b),Math.abs(O))&&Math.abs(y-A)<=U*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(_-X)<=U*Math.max(1,Math.abs(_),Math.abs(X))&&Math.abs(p-me)<=U*Math.max(1,Math.abs(p),Math.abs(me))&&Math.abs(S-ae)<=U*Math.max(1,Math.abs(S),Math.abs(ae))}function Ac(){const e=new We(4);return We!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Ic(e,t,s){return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e}function Lc(e,t,s){const r=t[0],o=t[1],a=t[2],i=t[3];return e[0]=s[0]*r+s[4]*o+s[8]*a+s[12]*i,e[1]=s[1]*r+s[5]*o+s[9]*a+s[13]*i,e[2]=s[2]*r+s[6]*o+s[10]*a+s[14]*i,e[3]=s[3]*r+s[7]*o+s[11]*a+s[15]*i,e}(function(){const e=Ac();return function(t,s,r,o,a,i){let l,d;for(s||(s=4),r||(r=0),o?d=Math.min(o*s+r,t.length):d=t.length,l=r;l<d;l+=s)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],a(e,e,i),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();function pt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Be(e,t){const s=Lc([],t,e);return Ic(s,s,1/s[3]),s}function Kt(e,t,s){return e<t?t:e>s?s:e}function Fc(e){return Math.log(e)*Math.LOG2E}const Rc=Math.log2||Fc;function ge(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const se=Math.PI,_o=se/4,re=se/180,Qt=180/se,st=512,Ks=4003e4,Qs=85.051129,ko=1.5;function Dc(e){return Math.pow(2,e)}function Oe(e){const[t,s]=e;ge(Number.isFinite(t)),ge(Number.isFinite(s)&&s>=-90&&s<=90,"invalid latitude");const r=t*re,o=s*re,a=st*(r+se)/(2*se),i=st*(se+Math.log(Math.tan(_o+o*.5)))/(2*se);return[a,i]}function Qe(e){const[t,s]=e,r=t/st*(2*se)-se,o=2*(Math.atan(Math.exp(s/st*(2*se)-se))-_o);return[r*Qt,o*Qt]}function Oc(e){const{latitude:t,longitude:s,highPrecision:r=!1}=e;ge(Number.isFinite(t)&&Number.isFinite(s));const o=st,a=Math.cos(t*re),i=o/360,l=i/a,d=o/Ks/a,c={unitsPerMeter:[d,d,d],metersPerUnit:[1/d,1/d,1/d],unitsPerDegree:[i,l,d],degreesPerUnit:[1/i,1/l,1/d]};if(r){const u=re*Math.tan(t*re)/a,f=i*u/2,x=o/Ks*u,b=x/l*d;c.unitsPerDegree2=[0,f,x],c.unitsPerMeter2=[b,0,b]}return c}function zc(e){const{height:t,pitch:s,bearing:r,altitude:o,scale:a,center:i}=e,l=pt();Yt(l,l,[0,0,-o]),Tc(l,l,-s*re),Pc(l,l,r*re);const d=a/t;return wo(l,l,[d,d,d]),i&&Yt(l,l,jc([],i)),l}function Bc(e){const{width:t,height:s,altitude:r,pitch:o=0,offset:a,center:i,scale:l,nearZMultiplier:d=1,farZMultiplier:c=1}=e;let{fovy:u=yt(ko)}=e;r!==void 0&&(u=yt(r));const f=u*re,x=o*re,b=So(u);let y=b;i&&(y+=i[2]*l/Math.cos(x)/s);const _=f*(.5+(a?a[1]:0)/s),p=Math.sin(_)*y/Math.sin(Kt(Math.PI/2-x-_,.01,Math.PI-.01)),S=Math.sin(x)*p+y,C=y*10,w=Math.min(S*c,C);return{fov:f,aspect:t/s,focalDistance:b,near:d,far:w}}function Hc(e){const{fov:t,aspect:s,near:r,far:o}=Bc(e);return Ec([],t,s,r,o)}function yt(e){return 2*Math.atan(.5/e)*Qt}function So(e){return .5/Math.tan(.5*e*re)}function Wc(e,t){const[s,r,o=0]=e;return ge(Number.isFinite(s)&&Number.isFinite(r)&&Number.isFinite(o)),Be(t,[s,r,o,1])}function en(e,t,s=0){const[r,o,a]=e;if(ge(Number.isFinite(r)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(a))return Be(t,[r,o,a,1]);const i=Be(t,[r,o,0,1]),l=Be(t,[r,o,1,1]),d=i[2],c=l[2],u=d===c?0:((s||0)-d)/(c-d);return vo([],i,l,u)}function Uc(e){const{width:t,height:s,bounds:r,minExtent:o=0,maxZoom:a=24,offset:i=[0,0]}=e,[[l,d],[c,u]]=r,f=Vc(e.padding),x=Oe([l,Kt(u,-85.051129,Qs)]),b=Oe([c,Kt(d,-85.051129,Qs)]),y=[Math.max(Math.abs(b[0]-x[0]),o),Math.max(Math.abs(b[1]-x[1]),o)],_=[t-f.left-f.right-Math.abs(i[0])*2,s-f.top-f.bottom-Math.abs(i[1])*2];ge(_[0]>0&&_[1]>0);const p=_[0]/y[0],S=_[1]/y[1],C=(f.right-f.left)/2/p,w=(f.top-f.bottom)/2/S,m=[(b[0]+x[0])/2+C,(b[1]+x[1])/2+w],v=Qe(m),k=Math.min(a,Rc(Math.abs(Math.min(p,S))));return ge(Number.isFinite(k)),{longitude:v[0],latitude:v[1],zoom:k}}function Vc(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(ge(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const tn=Math.PI/180;function qc(e,t=0){const{width:s,height:r,unproject:o}=e,a={targetZ:t},i=o([0,r],a),l=o([s,r],a);let d,c;const u=e.fovy?.5*e.fovy*tn:Math.atan(.5/e.altitude),f=(90-e.pitch)*tn;return u>f-.01?(d=sn(e,0,t),c=sn(e,s,t)):(d=o([0,0],a),c=o([s,0],a)),[i,l,c,d]}function sn(e,t,s){const{pixelUnprojectionMatrix:r}=e,o=Be(r,[t,0,1,1]),a=Be(r,[t,e.height,1,1]),l=(s*e.distanceScales.unitsPerMeter[2]-o[2])/(a[2]-o[2]),d=vo([],o,a,l),c=Qe(d);return c.push(s),c}class bt{constructor(t={width:1,height:1}){this.equals=S=>S instanceof bt?S.width===this.width&&S.height===this.height&&Ys(S.projectionMatrix,this.projectionMatrix)&&Ys(S.viewMatrix,this.viewMatrix):!1,this.project=(S,C={})=>{const{topLeft:w=!0}=C,m=this.projectPosition(S),v=Wc(m,this.pixelProjectionMatrix),[k,g]=v,j=w?g:this.height-g;return S.length===2?[k,j]:[k,j,v[2]]},this.unproject=(S,C={})=>{const{topLeft:w=!0,targetZ:m=void 0}=C,[v,k,g]=S,j=w?k:this.height-k,P=m&&m*this.distanceScales.unitsPerMeter[2],$=en([v,j,g],this.pixelUnprojectionMatrix,P),[I,R,O]=this.unprojectPosition($);return Number.isFinite(g)?[I,R,O]:Number.isFinite(m)?[I,R,m]:[I,R]},this.projectPosition=S=>{const[C,w]=Oe(S),m=(S[2]||0)*this.distanceScales.unitsPerMeter[2];return[C,w,m]},this.unprojectPosition=S=>{const[C,w]=Qe(S),m=(S[2]||0)*this.distanceScales.metersPerUnit[2];return[C,w,m]};let{width:s,height:r,altitude:o=null,fovy:a=null}=t;const{latitude:i=0,longitude:l=0,zoom:d=0,pitch:c=0,bearing:u=0,position:f=null,nearZMultiplier:x=.02,farZMultiplier:b=1.01}=t;s=s||1,r=r||1,a===null&&o===null?(o=ko,a=yt(o)):a===null?a=yt(o):o===null&&(o=So(a));const y=Dc(d);o=Math.max(.75,o);const _=Oc({longitude:l,latitude:i}),p=Oe([l,i]);p.push(0),f&&Sc(p,p,Nc([],f,_.unitsPerMeter)),this.projectionMatrix=Hc({width:s,height:r,scale:y,center:p,pitch:c,fovy:a,nearZMultiplier:x,farZMultiplier:b}),this.viewMatrix=zc({height:r,scale:y,center:p,pitch:c,bearing:u,altitude:o}),this.width=s,this.height=r,this.scale=y,this.latitude=i,this.longitude=l,this.zoom=d,this.pitch=c,this.bearing=u,this.altitude=o,this.fovy=a,this.center=p,this.meterOffset=f||[0,0,0],this.distanceScales=_,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:t,height:s,projectionMatrix:r,viewMatrix:o}=this,a=pt();Ot(a,a,r),Ot(a,a,o),this.viewProjectionMatrix=a;const i=pt();wo(i,i,[t/2,-s/2,1]),Yt(i,i,[1,-1,0]),Ot(i,i,a);const l=Mc(pt(),i);if(!l)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=i,this.pixelUnprojectionMatrix=l}projectFlat(t){return Oe(t)}unprojectFlat(t){return Qe(t)}getMapCenterByLngLatPosition({lngLat:t,pos:s}){const r=en(s,this.pixelUnprojectionMatrix),o=Oe(t),a=Zs([],o,_c([],r)),i=Zs([],this.center,a);return Qe(i)}fitBounds(t,s={}){const{width:r,height:o}=this,{longitude:a,latitude:i,zoom:l}=Uc(Object.assign({width:r,height:o,bounds:t},s));return new bt({width:r,height:o,longitude:a,latitude:i,zoom:l})}getBounds(t){const s=this.getBoundingRegion(t),r=Math.min(...s.map(l=>l[0])),o=Math.max(...s.map(l=>l[0])),a=Math.min(...s.map(l=>l[1])),i=Math.max(...s.map(l=>l[1]));return[[r,a],[o,i]]}getBoundingRegion(t={}){return qc(this,t.z||0)}getLocationAtPoint({lngLat:t,pos:s}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:s})}}function Xc(e,t,s={}){const r={type:"Feature"};return(s.id===0||s.id)&&(r.id=s.id),s.bbox&&(r.bbox=s.bbox),r.properties=t||{},r.geometry=e,r}function Co(e,t,s={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!nn(e[0])||!nn(e[1]))throw new Error("coordinates must contain numbers");return Xc({type:"Point",coordinates:e},t,s)}function Gc(e,t={}){const s={type:"FeatureCollection"};return t.id&&(s.id=t.id),t.bbox&&(s.bbox=t.bbox),s.features=e,s}function nn(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function jo(e,t,s){if(e!==null)for(var r,o,a,i,l,d,c,u=0,f=0,x,b=e.type,y=b==="FeatureCollection",_=b==="Feature",p=y?e.features.length:1,S=0;S<p;S++){c=y?e.features[S].geometry:_?e.geometry:e,x=c?c.type==="GeometryCollection":!1,l=x?c.geometries.length:1;for(var C=0;C<l;C++){var w=0,m=0;if(i=x?c.geometries[C]:c,i!==null){d=i.coordinates;var v=i.type;switch(u=0,v){case null:break;case"Point":if(t(d,f,S,w,m)===!1)return!1;f++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<d.length;r++){if(t(d[r],f,S,w,m)===!1)return!1;f++,v==="MultiPoint"&&w++}v==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<d.length;r++){for(o=0;o<d[r].length-u;o++){if(t(d[r][o],f,S,w,m)===!1)return!1;f++}v==="MultiLineString"&&w++,v==="Polygon"&&m++}v==="Polygon"&&w++;break;case"MultiPolygon":for(r=0;r<d.length;r++){for(m=0,o=0;o<d[r].length;o++){for(a=0;a<d[r][o].length-u;a++){if(t(d[r][o][a],f,S,w,m)===!1)return!1;f++}m++}w++}break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(jo(i.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function No(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const s=[1/0,1/0,-1/0,-1/0];return jo(e,r=>{s[0]>r[0]&&(s[0]=r[0]),s[1]>r[1]&&(s[1]=r[1]),s[2]<r[0]&&(s[2]=r[0]),s[3]<r[1]&&(s[3]=r[1])}),s}var Jc=No;function Zc(e,t={}){const s=No(e),r=(s[0]+s[2])/2,o=(s[1]+s[3])/2;return Co([r,o],t.properties,t)}var Yc=Zc,zt,on;function Kc(){if(on)return zt;on=1;var e=Aa(),t=Ia(),s=La(),r=Fa(),o=e.isFinite,a=Math.min;function i(l){var d=Math[l];return function(c,u){if(c=s(c),u=u==null?0:a(t(u),292),u&&o(c)){var f=(r(c)+"e").split("e"),x=d(f[0]+"e"+(+f[1]+u));return f=(r(x)+"e").split("e"),+(f[0]+"e"+(+f[1]-u))}return d(c)}}return zt=i,zt}var Bt,rn;function Qc(){if(rn)return Bt;rn=1;var e=Kc(),t=e("round");return Bt=t,Bt}var ed=Qc();const pe=qo(ed),td=h.createContext(null);function sd(e,t){const s=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,o=Array.isArray(t)?t[0]:t?t.x:0,a=Array.isArray(t)?t[1]:t?t.y:0;return s===o&&r===a}function de(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!de(e[s],t[s]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(const o of s)if(!t.hasOwnProperty(o)||!de(e[o],t[o]))return!1;return!0}return!1}function nd(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function an(e,t){if(!e.getProjection)return;const s=e.getProjection(),r=t.getProjection();de(s,r)||t.setProjection(s)}function ln(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function cn(e,t){const s=t.viewState||t;let r=!1;if("longitude"in s&&"latitude"in s){const o=e.center;e.center=new o.constructor(s.longitude,s.latitude),r=r||o!==e.center}if("zoom"in s){const o=e.zoom;e.zoom=s.zoom,r=r||o!==e.zoom}if("bearing"in s){const o=e.bearing;e.bearing=s.bearing,r=r||o!==e.bearing}if("pitch"in s){const o=e.pitch;e.pitch=s.pitch,r=r||o!==e.pitch}return s.padding&&!e.isPaddingEqual(s.padding)&&(r=!0,e.padding=s.padding),r}const od=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function dn(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const r of e.layers)t[r.id]=r;const s=e.layers.map(r=>{let o=null;"interactive"in r&&(o=Object.assign({},r),delete o.interactive);const a=t[r.ref];if(a){o=o||Object.assign({},r),delete o.ref;for(const i of od)i in a&&(o[i]=a[i])}return o||r});return{...e,layers:s}}var un={};const fn={version:8,sources:{},layers:[]},mn={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Ht={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},hn={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},rd=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],ad=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ue{constructor(t,s,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=o=>{const a=this.props[hn[o.type]];a?a(o):o.type==="error"&&console.error(o.error)},this._onPointerEvent=o=>{(o.type==="mousemove"||o.type==="mouseout")&&this._updateHover(o);const a=this.props[mn[o.type]];a&&(this.props.interactiveLayerIds&&o.type!=="mouseover"&&o.type!=="mouseout"&&(o.features=this._hoveredFeatures||this._queryRenderedFeatures(o.point)),a(o),delete o.features)},this._onCameraEvent=o=>{if(!this._internalUpdate){const a=this.props[Ht[o.type]];a&&a(o)}o.type in this._deferredEvents&&(this._deferredEvents[o.type]=!1)},this._MapClass=t,this.props=s,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const s=this.props;this.props=t;const r=this._updateSettings(t,s);r&&this._createShadowTransform(this._map);const o=this._updateSize(t),a=this._updateViewState(t,!0);this._updateStyle(t,s),this._updateStyleComponents(t,s),this._updateHandlers(t,s),(r||o||a&&!this._map.isMoving())&&this.redraw()}static reuse(t,s){const r=Ue.savedMaps.pop();if(!r)return null;const o=r.map,a=o.getContainer();for(s.className=a.className;a.childNodes.length>0;)s.appendChild(a.childNodes[0]);o._container=s;const i=o._resizeObserver;i&&(i.disconnect(),i.observe(s)),r.setProps({...t,styleDiffing:!1}),o.resize();const{initialViewState:l}=t;return l&&(l.bounds?o.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):r._updateViewState(l,!1)),o.isStyleLoaded()?o.fire("load"):o.once("styledata",()=>o.fire("load")),o._update(),r}_initialize(t){const{props:s}=this,{mapStyle:r=fn}=s,o={...s,...s.initialViewState,accessToken:s.mapboxAccessToken||id()||null,container:t,style:dn(r)},a=o.initialViewState||o.viewState||o;if(Object.assign(o,{center:[a.longitude||0,a.latitude||0],zoom:a.zoom||0,pitch:a.pitch||0,bearing:a.bearing||0}),s.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,s.gl)}const i=new this._MapClass(o);a.padding&&i.setPadding(a.padding),s.cursor&&(i.getCanvas().style.cursor=s.cursor),this._createShadowTransform(i);const l=i._render;i._render=u=>{this._inRender=!0,l.call(i,u),this._inRender=!1};const d=i._renderTaskQueue.run;i._renderTaskQueue.run=u=>{d.call(i._renderTaskQueue,u),this._onBeforeRepaint()},i.on("render",()=>this._onAfterRepaint());const c=i.fire;i.fire=this._fireEvent.bind(this,c),i.on("resize",()=>{this._renderTransform.resize(i.transform.width,i.transform.height)}),i.on("styledata",()=>{this._updateStyleComponents(this.props,{}),an(i.transform,this._renderTransform)}),i.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in mn)i.on(u,this._onPointerEvent);for(const u in Ht)i.on(u,this._onCameraEvent);for(const u in hn)i.on(u,this._onEvent);this._map=i}recycle(){const s=this.map.getContainer().querySelector("[mapboxgl-children]");s?.remove(),Ue.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const s=nd(t.transform);t.painter.transform=s,this._renderTransform=s}_updateSize(t){const{viewState:s}=t;if(s){const r=this._map;if(s.width!==r.transform.width||s.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(t,s){if(this._internalUpdate)return!1;const r=this._map,o=this._renderTransform,{zoom:a,pitch:i,bearing:l}=o,d=r.isMoving();d&&(o.cameraElevationReference="sea");const c=cn(o,{...ln(r.transform),...t});if(d&&(o.cameraElevationReference="ground"),c&&s){const u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=a!==o.zoom),u.rotate||(u.rotate=l!==o.bearing),u.pitch||(u.pitch=i!==o.pitch)}return d||cn(r.transform,t),c}_updateSettings(t,s){const r=this._map;let o=!1;for(const a of rd)if(a in t&&!de(t[a],s[a])){o=!0;const i=r[`set${a[0].toUpperCase()}${a.slice(1)}`];i?.call(r,t[a])}return o}_updateStyle(t,s){if(t.cursor!==s.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==s.mapStyle){const{mapStyle:r=fn,styleDiffing:o=!0}=t,a={diff:o};return"localIdeographFontFamily"in t&&(a.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(dn(r),a),!0}return!1}_updateStyleComponents(t,s){const r=this._map;let o=!1;return r.isStyleLoaded()&&("light"in t&&r.setLight&&!de(t.light,s.light)&&(o=!0,r.setLight(t.light)),"fog"in t&&r.setFog&&!de(t.fog,s.fog)&&(o=!0,r.setFog(t.fog)),"terrain"in t&&r.setTerrain&&!de(t.terrain,s.terrain)&&(!t.terrain||r.getSource(t.terrain.source))&&(o=!0,r.setTerrain(t.terrain))),o}_updateHandlers(t,s){var r,o;const a=this._map;let i=!1;for(const l of ad){const d=(r=t[l])!==null&&r!==void 0?r:!0,c=(o=s[l])!==null&&o!==void 0?o:!0;de(d,c)||(i=!0,d?a[l].enable(d):a[l].disable())}return i}_queryRenderedFeatures(t){const s=this._map,r=s.transform,{interactiveLayerIds:o=[]}=this.props;try{return s.transform=this._renderTransform,s.queryRenderedFeatures(t,{layers:o.filter(s.getLayer.bind(s))})}catch{return[]}finally{s.transform=r}}_updateHover(t){var s;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const a=t.type,i=((s=this._hoveredFeatures)===null||s===void 0?void 0:s.length)>0,l=this._queryRenderedFeatures(t.point),d=l.length>0;!d&&i&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,d&&!i&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=a}else this._hoveredFeatures=null}_fireEvent(t,s,r){const o=this._map,a=o.transform,i=typeof s=="string"?s:s.type;return i==="move"&&this._updateViewState(this.props,!1),i in Ht&&(typeof s=="object"&&(s.viewState=ln(a)),this._map.isMoving())?(o.transform=this._renderTransform,t.call(o,s,r),o.transform=a,o):(t.call(o,s,r),o)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&t.fire(r);this._internalUpdate=!1;const s=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{an(this._renderTransform,s),t.transform=s}}}Ue.savedMaps=[];function id(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||un.MapboxAccessToken}catch{}try{e=e||un.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const ld=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function cd(e){if(!e)return null;const t=e.map,s={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:r=>{const o=t.transform;t.transform=e.transform;const a=t.project(r);return t.transform=o,a},unproject:r=>{const o=t.transform;t.transform=e.transform;const a=t.unproject(r);return t.transform=o,a},queryTerrainElevation:(r,o)=>{const a=t.transform;t.transform=e.transform;const i=t.queryTerrainElevation(r,o);return t.transform=a,i},queryRenderedFeatures:(r,o)=>{const a=t.transform;t.transform=e.transform;const i=t.queryRenderedFeatures(r,o);return t.transform=a,i}};for(const r of dd(t))!(r in s)&&!ld.includes(r)&&(s[r]=t[r].bind(t));return s}function dd(e){const t=new Set;let s=e;for(;s;){for(const r of Object.getOwnPropertyNames(s))r[0]!=="_"&&typeof e[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&t.add(r);s=Object.getPrototypeOf(s)}return Array.from(t)}const ud=typeof document<"u"?h.useLayoutEffect:h.useEffect,fd=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function md(e,t){for(const r of fd)r in t&&(e[r]=t[r]);const{RTLTextPlugin:s="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;s&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(s,r=>{r&&console.error(r)},!0)}const At=h.createContext(null);function hd(e,t,s){const r=h.useContext(td),[o,a]=h.useState(null),i=h.useRef(),{current:l}=h.useRef({mapLib:null,map:null});h.useEffect(()=>{const u=e.mapLib;let f=!0,x;return Promise.resolve(u||s).then(b=>{if(!f)return;if(!b)throw new Error("Invalid mapLib");const y="Map"in b?b:b.default;if(!y.Map)throw new Error("Invalid mapLib");if(md(y,e),!y.supported||y.supported(e))e.reuseMaps&&(x=Ue.reuse(e,i.current)),x||(x=new Ue(y.Map,e,i.current)),l.map=cd(x),l.mapLib=y,a(x),r?.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(b=>{const{onError:y}=e;y?y({type:"error",target:null,originalEvent:null,error:b}):console.error(b)}),()=>{f=!1,x&&(r?.onMapUnmount(e.id),e.reuseMaps?x.recycle():x.destroy())}},[]),ud(()=>{o&&o.setProps(e)}),h.useImperativeHandle(t,()=>l.map,[o]);const d=h.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),c={height:"100%"};return h.createElement("div",{id:e.id,ref:i,style:d},o&&h.createElement(At.Provider,{value:l},h.createElement("div",{"mapboxgl-children":"",style:c},e.children)))}const pd=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Se(e,t){if(!e||!t)return;const s=e.style;for(const r in t){const o=t[r];Number.isFinite(o)&&!pd.test(r)?s[r]=`${o}px`:s[r]=o}}function gd(e,t){const{map:s,mapLib:r}=h.useContext(At),o=h.useRef({props:e});o.current.props=e;const a=h.useMemo(()=>{let _=!1;h.Children.forEach(e.children,C=>{C&&(_=!0)});const p={...e,element:_?document.createElement("div"):null},S=new r.Marker(p);return S.setLngLat([e.longitude,e.latitude]),S.getElement().addEventListener("click",C=>{var w,m;(m=(w=o.current.props).onClick)===null||m===void 0||m.call(w,{type:"click",target:S,originalEvent:C})}),S.on("dragstart",C=>{var w,m;const v=C;v.lngLat=a.getLngLat(),(m=(w=o.current.props).onDragStart)===null||m===void 0||m.call(w,v)}),S.on("drag",C=>{var w,m;const v=C;v.lngLat=a.getLngLat(),(m=(w=o.current.props).onDrag)===null||m===void 0||m.call(w,v)}),S.on("dragend",C=>{var w,m;const v=C;v.lngLat=a.getLngLat(),(m=(w=o.current.props).onDragEnd)===null||m===void 0||m.call(w,v)}),S},[]);h.useEffect(()=>(a.addTo(s.getMap()),()=>{a.remove()}),[]);const{longitude:i,latitude:l,offset:d,style:c,draggable:u=!1,popup:f=null,rotation:x=0,rotationAlignment:b="auto",pitchAlignment:y="auto"}=e;return h.useEffect(()=>{Se(a.getElement(),c)},[c]),h.useImperativeHandle(t,()=>a,[]),(a.getLngLat().lng!==i||a.getLngLat().lat!==l)&&a.setLngLat([i,l]),d&&!sd(a.getOffset(),d)&&a.setOffset(d),a.isDraggable()!==u&&a.setDraggable(u),a.getRotation()!==x&&a.setRotation(x),a.getRotationAlignment()!==b&&a.setRotationAlignment(b),a.getPitchAlignment()!==y&&a.setPitchAlignment(y),a.getPopup()!==f&&a.setPopup(f),On.createPortal(e.children,a.getElement())}const xd=h.memo(h.forwardRef(gd));function pn(e){return new Set(e?e.trim().split(/\s+/):[])}function yd(e,t){const{map:s,mapLib:r}=h.useContext(At),o=h.useMemo(()=>document.createElement("div"),[]),a=h.useRef({props:e});a.current.props=e;const i=h.useMemo(()=>{const l={...e},d=new r.Popup(l);return d.setLngLat([e.longitude,e.latitude]),d.once("open",c=>{var u,f;(f=(u=a.current.props).onOpen)===null||f===void 0||f.call(u,c)}),d},[]);if(h.useEffect(()=>{const l=d=>{var c,u;(u=(c=a.current.props).onClose)===null||u===void 0||u.call(c,d)};return i.on("close",l),i.setDOMContent(o).addTo(s.getMap()),()=>{i.off("close",l),i.isOpen()&&i.remove()}},[]),h.useEffect(()=>{Se(i.getElement(),e.style)},[e.style]),h.useImperativeHandle(t,()=>i,[]),i.isOpen()&&((i.getLngLat().lng!==e.longitude||i.getLngLat().lat!==e.latitude)&&i.setLngLat([e.longitude,e.latitude]),e.offset&&!de(i.options.offset,e.offset)&&i.setOffset(e.offset),(i.options.anchor!==e.anchor||i.options.maxWidth!==e.maxWidth)&&(i.options.anchor=e.anchor,i.setMaxWidth(e.maxWidth)),i.options.className!==e.className)){const l=pn(i.options.className),d=pn(e.className);for(const c of l)d.has(c)||i.removeClassName(c);for(const c of d)l.has(c)||i.addClassName(c);i.options.className=e.className}return On.createPortal(e.children,o)}h.memo(h.forwardRef(yd));function ct(e,t,s,r){const o=h.useContext(At),a=h.useMemo(()=>e(o),[]);return h.useEffect(()=>{const i=t,l=null,d=typeof t=="function"?t:null,{map:c}=o;return c.hasControl(a)||(c.addControl(a,i?.position),l&&l(o)),()=>{d&&d(o),c.hasControl(a)&&c.removeControl(a)}},[]),a}function bd(e){const t=ct(({mapLib:s})=>new s.AttributionControl(e),{position:e.position});return h.useEffect(()=>{Se(t._container,e.style)},[e.style]),null}h.memo(bd);function vd(e){const t=ct(({mapLib:s})=>new s.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return h.useEffect(()=>{Se(t._controlContainer,e.style)},[e.style]),null}h.memo(vd);function wd(e,t){const s=h.useRef({props:e}),r=ct(({mapLib:o})=>{const a=new o.GeolocateControl(e),i=a._setupUI;return a._setupUI=l=>{a._container.hasChildNodes()||i(l)},a.on("geolocate",l=>{var d,c;(c=(d=s.current.props).onGeolocate)===null||c===void 0||c.call(d,l)}),a.on("error",l=>{var d,c;(c=(d=s.current.props).onError)===null||c===void 0||c.call(d,l)}),a.on("outofmaxbounds",l=>{var d,c;(c=(d=s.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(d,l)}),a.on("trackuserlocationstart",l=>{var d,c;(c=(d=s.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(d,l)}),a.on("trackuserlocationend",l=>{var d,c;(c=(d=s.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(d,l)}),a},{position:e.position});return s.current.props=e,h.useImperativeHandle(t,()=>r,[]),h.useEffect(()=>{Se(r._container,e.style)},[e.style]),null}h.memo(h.forwardRef(wd));function _d(e){const t=ct(({mapLib:s})=>new s.NavigationControl(e),{position:e.position});return h.useEffect(()=>{Se(t._container,e.style)},[e.style]),null}h.memo(_d);function kd(e){const t=ct(({mapLib:a})=>new a.ScaleControl(e),{position:e.position}),s=h.useRef(e),r=s.current;s.current=e;const{style:o}=e;return e.maxWidth!==void 0&&e.maxWidth!==r.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==r.unit&&t.setUnit(e.unit),h.useEffect(()=>{Se(t._container,o)},[o]),null}h.memo(kd);const Sd=ds(()=>import("./jwbg7kpyo1zyxmya.js").then(e=>e.m),__vite__mapDeps([12,1])),Cd=h.forwardRef(function(t,s){return hd(t,s,Sd)}),jd=xd,Nd="pk.eyJ1Ijoib2FpLWRhdGEiLCJhIjoiY20yYzRzZmFtMGNqNjJscHo2dThqdnkwNCJ9.rTosfWNn9lUu4slvYfMzHg",Md=e=>h.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{d:"M10.001 1.83594C13.9484 1.83594 17.1659 4.90441 17.166 8.9873C17.166 11.8368 15.3695 14.1317 13.7002 15.6592C12.8541 16.4334 12.0106 17.0381 11.3799 17.4492C11.0639 17.6552 10.7992 17.8141 10.6123 17.9219C10.5189 17.9757 10.4443 18.0166 10.3926 18.0449C10.3667 18.059 10.3463 18.0705 10.332 18.0781C10.3251 18.0818 10.3195 18.0848 10.3154 18.0869C10.3134 18.088 10.3118 18.0892 10.3105 18.0898L10.3086 18.0908L10.001 17.501L10.3076 18.0908C10.1144 18.1913 9.88417 18.1912 9.69141 18.0898L10.001 17.501L9.69043 18.0889L9.68848 18.0879C9.68724 18.0872 9.68554 18.086 9.68359 18.085C9.67954 18.0828 9.67396 18.0799 9.66699 18.0762C9.65272 18.0685 9.63232 18.0573 9.60645 18.043C9.55471 18.0144 9.48007 17.9733 9.38672 17.9189C9.19995 17.8102 8.93589 17.6498 8.62012 17.4424C7.98975 17.0283 7.14642 16.4199 6.30078 15.6436C4.63333 14.1126 2.83594 11.8176 2.83594 8.9873C2.83602 4.90441 6.05356 1.83594 10.001 1.83594Z",fill:"white",stroke:"currentColor",strokeWidth:2,strokeLinejoin:"round",paintOrder:"stroke fill"}),h.createElement("circle",{cx:10,cy:9,r:3,fill:"currentColor"})),gn=50,xn=20,yn=20,bn=20,Td=450;function Pd(e){"use forget";const t=Ct.c(41),{contentReference:s,clientThreadId:r,messageId:o,trackContentReferenceEvent:a}=e,i=s.entities,l=h.useRef(!0),d=h.useRef(null),c=h.useRef(null);let u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u={longitude:0,latitude:0,zoom:12,pitch:0,bearing:0},t[0]=u):u=t[0];const[f,x]=h.useState(u),[b,y]=h.useState("carousel"),[_,p]=h.useState(-1),S=h.useRef(_);let C;t[1]===Symbol.for("react.memo_cache_sentinel")?(C=F=>{S.current=F,p(F)},t[1]=C):C=t[1];const w=C,m=!ro();let v,k;t[2]!==m?(v=()=>{m&&y("list")},k=[m],t[2]=m,t[3]=v,t[4]=k):(v=t[3],k=t[4]),h.useEffect(v,k);const g=h.useRef(!1);let j,P;t[5]!==a?(j=()=>{g.current||(a("Search Content Reference Shown","search_content_reference_shown","map"),g.current=!0)},P=[a],t[5]=a,t[6]=j,t[7]=P):(j=t[6],P=t[7]),h.useEffect(j,P);let $,I;t[8]===Symbol.for("react.memo_cache_sentinel")?($=()=>{if(!d.current)return;const F=Oa(()=>{c.current?.resize()},100),G=new ResizeObserver(F);return G.observe(d.current),()=>{G.disconnect()}},I=[],t[8]=$,t[9]=I):($=t[8],I=t[9]),h.useEffect($,I);let R;t[10]!==i||t[11]!==_?(R=()=>{const F=function(){const Z=function(Y,dt){const je=c.current;if(!je)return!1;const{width:qe,height:Xe}=je.getContainer().getBoundingClientRect(),ut=je.unproject([xn,gn]),bs=je.unproject([qe-yn,Xe-bn]);return pe(Y,5)>=pe(bs.lat,5)&&pe(Y,5)<=pe(ut.lat,5)&&pe(dt,5)>=pe(ut.lng,5)&&pe(dt,5)<=pe(bs.lng,5)},z=Gc(i.filter((ye,Y)=>l.current||_===-1||Y===_).map(Ed)),H=Jc(z),W=Yc(z);if(d.current){const ye=d.current.clientWidth,Y=d.current.clientHeight,dt=new bt({width:ye,height:Y,longitude:W.geometry.coordinates[0],latitude:W.geometry.coordinates[1]}),{zoom:je,latitude:qe,longitude:Xe}=dt.fitBounds([[H[0],H[1]],[H[2],H[3]]],{maxZoom:13.5,padding:{top:gn,left:xn,right:yn,bottom:bn}});l.current?(x(ut=>({...ut,zoom:je,latitude:qe,longitude:Xe})),l.current=!1):Z(qe,Xe)||c.current?.flyTo({center:[Xe,qe]})}};i.length!==0&&(l.current?F():setTimeout(F,200))},t[10]=i,t[11]=_,t[12]=R):R=t[12];let O;t[13]!==i||t[14]!==_||t[15]!==b?(O=[i,b,_],t[13]=i,t[14]=_,t[15]=b,t[16]=O):O=t[16],h.useEffect(R,O);const{openThreadSidebar:A}=lt(),{resetSidebarHistory:X}=Xn(),me=Gn();let ae;t[17]!==r||t[18]!==s.start_idx||t[19]!==me||t[20]!==o||t[21]!==A||t[22]!==X?(ae=function(G,Z){w(G),r&&(me||X(),A({type:"entity",clientThreadId:r,debugThreadId:void 0,messageId:o,contentReferenceStartIndex:s.start_idx,query:Z.name,category:"local_business"}))},t[17]=r,t[18]=s.start_idx,t[19]=me,t[20]=o,t[21]=A,t[22]=X,t[23]=ae):ae=t[23];const ie=ae;let he;if(t[24]!==i||t[25]!==ie||t[26]!==_||t[27]!==a){let F;t[29]!==_?(F=(Z,z)=>Z.idx===_?1:z.idx===_?-1:Z.idx-z.idx,t[29]=_,t[30]=F):F=t[30];let G;t[31]!==ie||t[32]!==a?(G=Z=>{const{business:z,idx:H}=Z;return n.jsx(jd,{longitude:z.longitude,latitude:z.latitude,anchor:"bottom",className:"relative",children:n.jsxs(at,{label:n.jsx("div",{className:"cursor-pointer",onClick:W=>{W.preventDefault(),ie(H,z)},children:n.jsx(Ad,{business:z.entity,idx:H,viewType:"listHover",trackContentReferenceEvent:a})}),onOpenChange:W=>w(W?H:-1),withArrow:!1,customPaddingClassName:"p-0",cornerRadius:"lg",contentClassName:"animate-show",side:"right",sideOffset:0,wide:!0,interactive:!0,children:[n.jsx(Md,{className:"h-auto w-7 drop-shadow-md"}),n.jsx("div",{className:"text-token-text-secondary ms-[-5px] font-bold text-black [text-shadow:_-0.8px_-0.8px_0_#fff,_0.8px_-0.8px_0_#fff,_-0.8px_0.8px_0_#fff,_0.8px_0.8px_0_#fff]",children:z.name}),n.jsx("div",{className:"absolute inset-0 cursor-pointer rounded-xl",onClick:W=>{W.preventDefault(),w(H),ie(H,z)}})]},H)},H)},t[31]=ie,t[32]=a,t[33]=G):G=t[33],he=i.map($d).sort(F).map(G),t[24]=i,t[25]=ie,t[26]=_,t[27]=a,t[28]=he}else he=t[28];const Ve=he;let q;t[34]!==m||t[35]!==Ve||t[36]!==f||t[37]!==b?(q=!m&&n.jsx("div",{className:"bg-token-bg-primary pt-2",children:n.jsxs("div",{style:{height:b==="carousel"?Td:240},className:"bg-token-bg-primary relative w-full",ref:d,children:[n.jsx("div",{className:"relative h-full w-full overflow-hidden rounded-xl",children:n.jsx(Cd,{...f,mapboxAccessToken:Nd,mapStyle:"mapbox://styles/mapbox/streets-v12",attributionControl:!1,onMove:F=>x(F.viewState),ref:c,keyboard:!1,children:Ve})}),n.jsx("div",{className:"absolute start-3 top-3",children:n.jsx(Rd,{})})]})}),t[34]=m,t[35]=Ve,t[36]=f,t[37]=b,t[38]=q):q=t[38];let Q;return t[39]!==q?(Q=n.jsx(za,{children:n.jsx("div",{className:"not-prose","data-testid":"businesses-map-widget",children:q})}),t[39]=q,t[40]=Q):Q=t[40],Q}function $d(e,t){return{business:e,idx:t}}function Ed(e){return Co([e.longitude,e.latitude])}function Ad({business:e,idx:t,viewType:s,trackContentReferenceEvent:r}){const o=s==="list",a=s==="carousel",i=s==="listHover",l=!ro(),d={section:"map",section_location:"response",section_index:t},c=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent([e.name,e.address].join(","))}`;e.address&&r("link_action",null,"map",{...d,url:c,link_type:"button",action:"show"}),e.website_url&&r("link_action",null,"map",{...d,url:e.website_url,link_type:"button",action:"show"});function u(){return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"text-token-text-primary mt-auto flex h-9 gap-2 text-base",children:[e.address&&n.jsx(oe,{onClick:()=>{r("link_action",null,"map",{...d,url:c,link_type:"button",action:"click"})},as:"link",to:c,openNewTab:!0,rel:"noreferrer",color:"secondary",size:"small",className:"rounded-full border",contentWrapperClassName:"text-token-text-secondary font-medium",children:n.jsx(T,{id:"+a2f/C",defaultMessage:"Directions"})}),e.website_url&&n.jsx(oe,{onClick:()=>{r("link_action",null,"map",{...d,url:e.website_url,link_type:"button",action:"click"})},as:"link",to:e.website_url,openNewTab:!0,rel:"noreferrer",color:"secondary",size:"small",className:"rounded-full border",contentWrapperClassName:"text-token-text-secondary font-medium",children:n.jsx(T,{id:"r0oqXM",defaultMessage:"Website"})}),e.phone&&n.jsx(oe,{as:"link",to:"tel:"+e.phone,openNewTab:!0,rel:"noreferrer",color:"secondary",size:"small",className:"rounded-full border",contentWrapperClassName:"text-token-text-secondary font-medium",children:n.jsx(T,{id:"B/an6M",defaultMessage:"Call"})})]})})}const f=e.image_urls?.[0];return n.jsxs("div",{className:N("text-token-text-primary text-start text-base font-normal",{"fixed max-w-xl min-w-96":i}),children:[n.jsxs("div",{className:N("relative flex gap-2 sm:h-[125px] sm:w-[390px] sm:gap-4",{"bg-token-bg-primary rounded-xl p-2 shadow-lg select-none":a||i,"sm:p-2":o,"border-token-border-light border bg-clip-padding":i}),children:[!i&&n.jsx("div",{className:N("absolute start-0 top-0 hidden h-5 w-5 items-center justify-center rounded-full border-2 border-white bg-black text-[11px] font-bold text-white sm:flex",{"-translate-x-2 -translate-y-2":a}),children:t+1}),n.jsx("div",{className:"h-16 w-16 shrink-0 overflow-hidden rounded-lg sm:h-full sm:w-32",children:f?n.jsx("img",{className:"h-full w-full object-cover",src:f??void 0,alt:e.name}):n.jsx("div",{className:"h-full w-full bg-gray-100"})}),n.jsxs("div",{className:"flex w-full flex-col overflow-hidden",children:[n.jsx("div",{className:"w-full truncate font-semibold",children:e.name}),n.jsx(Id,{business:e}),!l&&u()]})]}),l&&u()]})}function Id({business:e}){const t=L(),s=e.categories?.[0]??null,r=e.next_open_hour,o=[];if(e.is_open!=null){const i=e.is_open?t.formatMessage({id:"rNSVso",defaultMessage:"Open now"}):t.formatMessage({id:"3WBPtG",defaultMessage:"Closed"});let l;r&&(l=r.day===new Date().getDay()?t.formatMessage({id:"3IYYo+",defaultMessage:"until {time}"},{time:wn(t,e.is_open?r.end:r.start)}):t.formatMessage({id:"R23xLn",defaultMessage:"until {day} {time}"},{day:Fd(t,r.day),time:wn(t,e.is_open?r.end:r.start)})),o.push(n.jsxs("div",{children:[n.jsx("span",{className:e.is_open?"text-green-600":"text-red-600",children:i}),l&&n.jsxs("span",{children:[" ",l]})]}))}s&&o.push(n.jsx("div",{className:"truncate",children:s})),e.price!=null?o.push(n.jsx(vn,{price:e.price},"price")):e.price_str!=null&&o.push(n.jsx(vn,{price:e.price_str},"price"));const a=e.rating!=null?n.jsx(Ld,{rating:e.rating,reviewCount:e.review_count}):null;return n.jsxs("div",{className:"mb-3 text-sm",children:[n.jsx("div",{className:"flex gap-1 overflow-hidden whitespace-nowrap",children:o.map((i,l)=>n.jsxs(h.Fragment,{children:[i,l<o.length-1&&n.jsx("span",{children:"·"})]},l))}),a&&n.jsx("div",{children:a})]})}function Ld({rating:e,reviewCount:t}){return n.jsxs("div",{className:"flex gap-1 break-all",children:[n.jsx("span",{children:e.toFixed(1)}),t!=null&&t!==-1&&n.jsx("span",{className:"text-token-text-secondary",children:n.jsx(T,{id:"x0qgzr",defaultMessage:"({reviewCount} reviews)",values:{reviewCount:t}})})]})}function vn({price:e}){return n.jsx("div",{children:typeof e=="number"?n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-token-text-primary",children:"$".repeat(e)}),n.jsx("span",{className:"text-token-text-tertiary",children:"$".repeat(4-e)})]}):n.jsx("span",{className:"text-token-text-primary",children:e})})}function wn(e,t){const s=t.slice(0,2),r=t.slice(2,4),o=new Date(0,0,0,parseInt(s,10),parseInt(r,10));return e.formatTime(o,{hour:"numeric",minute:"2-digit"})}function Fd(e,t){return e.formatDate(new Date(0,0,t),{weekday:"short"})}function Rd(){const[e,t]=h.useState(!1),s=()=>t(o=>!o),r=e?Ra:Da;return n.jsxs("div",{className:N("text-token-text-tertiary flex h-5 items-center justify-start overflow-hidden rounded-full text-[10px] font-light whitespace-nowrap transition-all",e?"w-full bg-white":"w-5 bg-white/50"),children:[n.jsx("button",{onClick:s,className:N("transition-all",e?"ms-1":"ms-[2px] mt-[1px]"),children:n.jsx(r,{className:"icon-sm hover:text-token-text-secondary transition-colors"})}),n.jsxs("div",{className:"ps-1 pe-2",children:["© ",n.jsx("a",{href:"https://www.mapbox.com/about/maps",target:"_blank",rel:"noreferrer",className:"text-[#2964aa]!",children:"Mapbox"})," ",n.jsx("a",{href:"https://www.mapbox.com/legal/end-user-terms",target:"_blank",rel:"noreferrer",className:"me-2 text-[#2964aa]!",children:n.jsx(T,{id:"u3dZJq",defaultMessage:"Terms"})}),"© ",n.jsx("a",{href:"http://www.openstreetmap.org/about",target:"_blank",rel:"noreferrer",className:"text-[#2964aa]!",children:"OpenStreetMap"})]})]})}const ce={TTFP:"products.ttfp",TTLT:"products.ttlt",TTF_VISIBLE_CONTENT_TOKEN:"products.ttf_visible_content_token"},gs={[ce.TTFP]:new Set,[ce.TTLT]:new Set,[ce.TTF_VISIBLE_CONTENT_TOKEN]:new Set};function Wt({profiler:e,messageId:t,metric:s,overrideDurationMs:r}){gs[s].add(t);const o=Ha();e.logTimingOnce(s,{context:{eval_preset:o.eval_preset},overrideDurationMs:r})}function Ut({messageId:e,metric:t}){return gs[t].has(e)}function Mo(e){"use forget";const t=Ct.c(25),{clientThreadId:s,messageId:r,products:o}=e;let a;t[0]!==r?(a=w=>[xt.getRequestId(w),xt.isMessageTurnEnded(w,r)],t[0]=r,t[1]=a):a=t[1];const[i,l]=Mt(s,a);let d;t[2]!==s?(d={namespace:Nr.ProductsCompletionRequest,clientThreadId:s},t[2]=s,t[3]=d):d=t[3];const{profiler:c,isRequestActive:u}=jr(d),f=u&&!l,x=Hi(f);let b,y;t[4]!==f||t[5]!==r||t[6]!==o.length||t[7]!==c?(b=()=>{Ut({messageId:r,metric:ce.TTFP})||c&&f&&o.length>0&&Wt({profiler:c,messageId:r,metric:ce.TTFP})},y=[f,r,o.length,c],t[4]=f,t[5]=r,t[6]=o.length,t[7]=c,t[8]=b,t[9]=y):(b=t[8],y=t[9]),h.useEffect(b,y);let _,p;t[10]!==f||t[11]!==r||t[12]!==x||t[13]!==c?(_=()=>{Ut({messageId:r,metric:ce.TTLT})||c&&x.current&&!f&&Wt({profiler:c,messageId:r,metric:ce.TTLT})},p=[r,x,f,c],t[10]=f,t[11]=r,t[12]=x,t[13]=c,t[14]=_,t[15]=p):(_=t[14],p=t[15]),h.useEffect(_,p);let S;t[16]!==r||t[17]!==c||t[18]!==i?(S=()=>{if(Ut({messageId:r,metric:ce.TTF_VISIBLE_CONTENT_TOKEN}))return;const w=i?Ba(i):null;if(c&&w){const m=ce.TTF_VISIBLE_CONTENT_TOKEN;gs[m].add(r),Wt({profiler:c,messageId:r,metric:m,overrideDurationMs:w.turnTracker.first_visible_content_token_lat})}},t[16]=r,t[17]=c,t[18]=i,t[19]=S):S=t[19];let C;t[20]!==r||t[21]!==o.length||t[22]!==c||t[23]!==i?(C=[r,c,i,o.length],t[20]=r,t[21]=o.length,t[22]=c,t[23]=i,t[24]=C):C=t[24],h.useEffect(S,C)}function Dd({contentReference:e,clientThreadId:t,messageId:s,turnIndex:r,trackContentReferenceEvent:o}){const a=h.useCallback(()=>o("Search Content Reference Shown","search_content_reference_shown","product_entity",{content_reference_start_index:e.start_idx,product_id:e.product.id}),[o,e.start_idx,e.product.id]),i=h.useCallback(()=>o("Search Content Reference Clicked","search_content_reference_clicked","product_entity",{content_reference_start_index:e.start_idx,product_id:e.product.id}),[o,e.start_idx,e.product.id]),l=e.product;h.useEffect(()=>a(),[a]),Mo({clientThreadId:t,messageId:s,products:[l]});const{openThreadSidebar:d}=lt();return n.jsx("span",{className:"entity-underline hover:entity-accent inline cursor-pointer align-baseline",onClick:()=>{if(i(),l.offers||!l.url){if(!t)return;d({type:"product",clientThreadId:t,messageId:s,turnIndex:r,contentReferenceStartIndex:e.start_idx,productIndex:0})}else window.open(l.url,"_blank")},children:n.jsx("span",{className:"whitespace-normal",children:l.title})})}function To({items:e,targetItemCount:t,onCardRender:s,onCardShown:r,onCardClicked:o,onReplyClicked:a,allowFullWidth:i=!1,cardClassName:l,showGradient:d=!0,arrowClassName:c}){const u=h.useRef(null),[f,x]=h.useState(null),b=h.useRef(null),y=()=>{b.current=setTimeout(()=>{x(null),b.current=null},200)},_=()=>{b.current&&(clearTimeout(b.current),b.current=null)},p=h.useRef(null),[S,C]=h.useState({left:0,top:0}),w=8;h.useEffect(()=>{const j=u.current,P=p.current;if(!a||!f||!j||!P)return;const $=()=>{const I=f.card.getBoundingClientRect(),R=j.getBoundingClientRect(),O=P.getBoundingClientRect(),A=I.bottom-R.top+w;var X=I.left-R.left;X=Math.max(0,X),X=Math.min(X,R.width-O.width),C({left:X,top:A})};return $(),j.addEventListener("scroll",$),()=>j.removeEventListener("scroll",$)},[f,e,a]);const m=it(),v=m?2:4;if(t===void 0)t=e.length;else if(!t&&e.length<v)return null;const k=(t??e.length)>=v,g=k&&m;return n.jsxs("div",{className:"relative",children:[n.jsx("div",{ref:u,className:N("flex flex-row gap-4 py-2",g&&"mx-[-1rem] px-[1rem]",k&&"no-scrollbar snap-x snap-proximity scroll-ps-4 overflow-x-scroll scroll-smooth"),children:e.map((j,P)=>n.jsx("div",{className:N(k||!i?"thread-lg:w-61 w-50 shrink-0 snap-start":"min-w-0 flex-1"),children:n.jsx(Od,{cardClassName:l,onShown:()=>r(j,P),onClick:()=>o(j,P),onHover:$=>{_(),$?x({card:$,item:j,index:P}):y()},children:s(j,!m&&t===1)})},P))}),k&&!g&&n.jsx(zd,{scrollableRef:u,units:e.length,showGradient:d,arrowClassName:c}),a&&n.jsx("div",{ref:p,className:N("absolute z-10",f?"pointer-events-auto opacity-100":"pointer-events-none opacity-0","transition-[transform,opacity] duration-200"),style:{willChange:"opacity, transform",left:S.left,top:S.top,transform:f?"translateY(0)":"translateY(-8px)"},onMouseEnter:_,onMouseLeave:y,children:n.jsx(oe,{className:N(f?"pointer-events-auto":"pointer-events-none","border-light bg-clip-padding px-4 py-2 shadow-md"),size:"small",color:"secondary",onClick:()=>f&&a(f.item,f.index),children:n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(Wi,{className:"icon-sm text-token-text-secondary"}),n.jsx(T,{id:"9TG7OR",defaultMessage:"Ask about this"})]})})})]})}function Od({onShown:e,onClick:t,onHover:s,children:r,cardClassName:o}){const a=h.useRef(null),i=h.useRef(e);return h.useEffect(()=>{i.current=e},[e]),h.useEffect(()=>{if(!a.current)return;const l=new IntersectionObserver(([d])=>d.isIntersecting&&i.current(),{threshold:.5});return l.observe(a.current),()=>l.disconnect()},[]),n.jsx("div",{ref:a,className:N("h-full w-full","bg-token-bg-primary cursor-pointer",o),onClick:t,onMouseEnter:()=>a.current&&s(a.current),onMouseLeave:()=>s(null),children:r})}function zd({scrollableRef:e,units:t,showGradient:s,arrowClassName:r}){const[o,a]=h.useState({left:!1,right:!1}),[i,l]=h.useState(!1);h.useEffect(()=>{const c=e.current;if(!c)return;const u=()=>{const{scrollLeft:f,scrollWidth:x,clientWidth:b}=c,y=f/(x-b);a({left:y>0,right:y<1}),!i&&f>0&&l(!0)};return u(),c.addEventListener("scroll",u),()=>c.removeEventListener("scroll",u)},[e,t,i]);const d=c=>{if(!e.current)return;l(!0);const{clientWidth:u,scrollWidth:f}=e.current,x=f/t,b=Math.floor(u/x)*x;e.current.scrollBy({left:b*c,behavior:"smooth"})};return n.jsxs("div",{className:"pointer-events-none absolute start-0 top-0 flex h-full w-full flex-row",children:[n.jsx("div",{className:N("flex h-full w-9 items-center justify-start",i&&s&&"bg-linear-to-r from-(--bg-primary) to-transparent",o.left?"opacity-100":"opacity-0","transition-opacity duration-100"),children:n.jsx(oe,{color:"secondary",size:"small",className:N("border-token-border-default active:bg-token-bg-tertiary hover:bg-token-bg-primary h-10 w-10 translate-x-[-40%] rounded-full bg-clip-padding hover:shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] active:opacity-100!",r),onClick:()=>d(-1),children:n.jsx(Mr,{className:"icon"})})}),n.jsx("div",{className:N("ms-auto flex h-full w-9 items-center justify-end",i&&s&&"bg-linear-to-l from-(--bg-primary) to-transparent",o.right?"opacity-100":"opacity-0","transition-opacity duration-200"),children:n.jsx(oe,{color:"secondary",size:"small",className:N("border-token-border-default active:bg-token-bg-tertiary hover:bg-token-bg-primary h-10 w-10 translate-x-[40%] rounded-full bg-clip-padding hover:shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] active:opacity-100!",r),onClick:()=>d(1),children:n.jsx(Jn,{className:"icon"})})})]})}function Bd({contentReference:e,clientThreadId:t,messageId:s,turnIndex:r,analyticsMetadata:o}){const a=e.products,i=e.target_product_count;Mo({clientThreadId:t,messageId:s,products:a});const{showDebugConversationTurns:l}=Wa(),d=Mt(t,w=>{const v=xt.getNode(w,s).message.metadata?.content_references?.find(k=>k.type==="products");return e.start_idx===v?.start_idx}),c=K(),u=B(c,"3144771298"),f=B(c,"2212894775"),x=Zn(o),b=h.useCallback((w,m)=>x("Search Content Reference Shown","search_content_reference_shown","products",{content_reference_start_index:e.start_idx,product_index:m,product_id:w.id}),[x,e.start_idx]),y=h.useCallback((w,m)=>x("Search Content Reference Clicked","search_content_reference_clicked","products",{content_reference_start_index:e.start_idx,product_index:m,product_id:w.id}),[x,e.start_idx]),{openThreadSidebar:_}=lt(),p=(w,m)=>{t&&(y(w,m),w.offers?_({type:"product",clientThreadId:t,messageId:s,turnIndex:r,contentReferenceStartIndex:e.start_idx,productIndex:m}):window.open(w.url,"_blank"))},{setTargetedContent:S}=Tr(),C=(w,m)=>{ht.logEventWithStatsig("Product Targeted Reply Clicked","product_targeted_reply_clicked",{...Ua(o),content_reference_start_index:e.start_idx,product_index:(m+1).toString(),product_id:w.id}),S({type:"object",label:w.title,createNewCompletionParams:v=>{const k=Va(w.title);return{...v,promptMessage:Pr(v.promptMessage,{metadata:{targeted_reply:w.title,targeted_reply_label:w.title,targeted_reply_icon:"product_tag"}}),appendMessages:[...v.appendMessages??[],k]}},onCreateCompletion:({serverThreadId:v,currentLeafId:k})=>{ht.logEventWithStatsig("Targeted Reply Submitted","chatgpt_targeted_reply_submitted",{conversation_id:v,current_leaf_id:k,source_message_id:s,content_reference_start_index:e.start_idx,product_index:(m+1).toString(),product_id:w.id})},onCleared:({serverThreadId:v,currentLeafId:k})=>{ht.logEventWithStatsig("Targeted Reply Cleared","chatgpt_targeted_reply_cleared",{conversation_id:v,current_leaf_id:k,source_message_id:s,content_reference_start_index:e.start_idx,product_index:(m+1).toString(),product_id:w.id})}})};if(e.inline_carousel&&a.length===1){const w=a[0];return n.jsx("div",{className:"flex flex-col","data-testid":"shopping-widget",children:n.jsx(Vd,{product:w,showDebug:l,onShown:()=>b(w,0),onClicked:()=>p(w,0)})})}return n.jsxs("div",{className:"flex flex-col","data-testid":"products-widget",children:[n.jsx(To,{items:a,targetItemCount:i,onCardRender:(w,m)=>f?n.jsx(Wd,{product:w,wide:m,showDebug:l}):n.jsx(Hd,{product:w,wide:m,showDebug:l}),onCardShown:b,onCardClicked:p,onReplyClicked:f?void 0:C,arrowClassName:f?"translate-y-[-80%]":"",allowFullWidth:!0,showGradient:!f,cardClassName:N(f?"group":"transition-all duration-200 border-token-border-default hover:border-light border rounded-xl bg-clip-padding hover:shadow-md overflow-hidden")}),d&&u&&!f&&n.jsxs("div",{className:"text-token-text-tertiary flex text-xs hover:cursor-pointer hover:underline",onClick:()=>window.open("https://help.openai.com/en/articles/11128490","_blank"),children:[n.jsx(T,{id:"4Y5Zn5",defaultMessage:"ChatGPT chooses products independently. Learn more"}),n.jsx(Jn,{className:"icon -ms-0.5"})]})]})}function Hd({product:e,wide:t,showDebug:s=!1}){const r=e.image_urls?e.image_urls[0]:void 0,[o,a]=h.useState("contain"),i=h.useRef(null);return n.jsxs("div",{className:N("flex",t?"flex-row":"flex-col"),children:[n.jsxs("div",{className:N("relative aspect-square",t?"w-1/3":"w-full","bg-token-main-surface-secondary dark:bg-token-main-surface-primary-inverse"),children:[r?n.jsx("img",{ref:i,className:`absolute inset-0 m-0 h-full w-full mix-blend-darken object-${o}`,src:r,alt:e.title,onLoad:()=>{if(!i.current)return;const{naturalWidth:l,naturalHeight:d}=i.current,c=l/d;a(Math.abs(c-1)<.25?"cover":"contain")}}):n.jsx("div",{className:"flex aspect-square items-center justify-center",children:n.jsx(jt,{className:"text-token-text-tertiary h-12 w-12"})}),e.featured_tag&&n.jsx("div",{className:"absolute start-3 end-3 bottom-3",children:n.jsxs("div",{className:"relative max-w-fit px-2 py-1",children:[n.jsx("div",{className:"absolute inset-0 rounded-full bg-white/60 backdrop-blur-xl"}),n.jsx("div",{className:"relative truncate text-xs font-semibold text-gray-950",children:e.featured_tag})]})})]}),n.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[n.jsx("div",{className:"line-clamp-2 leading-snug font-semibold text-ellipsis",children:e.title}),e.description&&n.jsx("div",{className:"line-clamp-3 pt-3 text-sm text-ellipsis",children:e.description}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"flex flex-row items-end pt-3",children:[n.jsxs("div",{className:"flex flex-col overflow-hidden",children:[n.jsx("div",{className:"text-md leading-snug font-semibold",children:e.price}),n.jsx("div",{className:"text-token-text-secondary overflow-hidden pt-0.5 text-xs text-ellipsis whitespace-nowrap",children:e.merchants})]}),n.jsx("div",{className:"flex-1"}),e.num_reviews&&e.num_reviews>0&&n.jsxs("div",{className:"text-token-text-secondary flex w-fit flex-row gap-1 text-sm",children:[n.jsx($r,{rating:e.rating??0/5}),(e.rating??0).toFixed(1)]})]}),!1]})]})}function Wd({product:e,wide:t,showDebug:s=!1}){const r=e.image_urls?e.image_urls[0]:void 0,[o,a]=h.useState("contain"),i=h.useRef(null);return n.jsxs("div",{className:N("flex pb-2",t?"flex-row gap-3":"flex-col gap-2"),children:[n.jsx("div",{className:N("relative",t?"aspect-square w-1/4":"aspect-[13/16] w-full","bg-token-bg-tertiary dark:bg-token-text-inverted overflow-clip rounded-xl"),children:n.jsx(co,{className:"mix-blend-darken dark:mix-blend-lighten",children:r?n.jsx("img",{ref:i,className:`absolute inset-0 m-0 h-full w-full object-${o}`,src:r,alt:e.title,onLoad:()=>{if(!i.current)return;const{naturalWidth:l,naturalHeight:d}=i.current,c=l/d;a(Math.abs(c-1)<.6?"cover":"contain")}}):n.jsx("div",{className:"flex aspect-square items-center justify-center",children:n.jsx(jt,{className:"text-token-text-tertiary h-12 w-12"})})})}),n.jsxs("div",{className:"flex flex-col gap-1 px-1",children:[n.jsx("div",{className:N("line-clamp-2 font-medium text-ellipsis",t?"text-base":"text-sm"),children:e.title}),n.jsxs("div",{className:"text-token-text-secondary flex flex-row gap-0.25 text-sm",children:[n.jsx("div",{children:e.price}),n.jsx("div",{className:"mx-0.5",children:"•"}),n.jsx("div",{className:"truncate",children:e.merchants})]}),!1]})]})}function Ud({className:e,imageUrl:t,productTitle:s,onClicked:r}){const[o,a]=h.useState("contain"),i=h.useRef(null);return n.jsx("div",{className:N(e,"hover:scale-[1.005]","dark:bg-token-text-inverted bg-token-bg-primary","cursor-pointer overflow-hidden rounded-xl shadow-inner transition-all duration-200","relative aspect-square max-h-60"),onClick:r,children:t?n.jsx("img",{ref:i,className:`m-0 h-full w-full overflow-hidden object-${o} mix-blend-darken`,src:t,alt:s,onLoad:()=>{if(!i.current)return;const{naturalWidth:l,naturalHeight:d}=i.current,c=l/d;a(Math.abs(c-1)<.5?"cover":"contain")}}):n.jsx("div",{className:"flex aspect-square items-center justify-center",children:n.jsx(jt,{className:"text-token-text-tertiary h-12 w-12"})})})}function Vd({product:e,showDebug:t=!1,onShown:s,onClicked:r}){return h.useEffect(()=>{s()},[s]),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex flex-row gap-2 py-2",children:e.image_urls&&e.image_urls.length>0&&e.image_urls.slice(0,3).map(o=>n.jsx(Ud,{imageUrl:o,productTitle:e.title,onClicked:r},o))}),!1]})}function qd({attribution:e,wordFadeType:t}){const s=h.useContext(ue),r=Er(s?.message.id,e.attributable_index),o=Ar();return n.jsx(Jd,{isHighlighted:r,isDebugMode:o&&!1,content:e.alt??"",attributableIndex:e.attributable_index,attributions:void 0,attributionsDebug:void 0,wordFadeType:t})}const Xd=h.memo(is);function Gd({content:e,isHighlighted:t,isDebugMode:s,attributableIndex:r,attributions:o,attributionsDebug:a,wordFadeType:i}){const l=i==="indexed",d=Yn(),c=h.useMemo(()=>l?{handlers:{text:(x,b,y)=>{const _=[];for(const p of d(b.value))_.push({type:"element",tagName:"span",properties:{className:Kn.fadeIn},children:[{type:"text",value:p}]});return _}}}:void 0,[l,d]),u=h.useMemo(()=>({p:({children:x})=>n.jsx(n.Fragment,{children:x})}),[]),f=n.jsx(Xd,{rehypePlugins:Wn,remarkPlugins:Hn,urlTransform:Bn,remarkRehypeOptions:c,components:u,children:e});return n.jsx(Zd,{isHighlighted:t,children:f})}const Jd=zn.memo(Gd);function Zd({isHighlighted:e,className:t,children:s}){return n.jsx("span",{className:N("relative","-mx-px my-[-0.2rem] rounded px-px py-[0.2rem]",e&&"attribution-highlight-bg","transition-colors duration-100 ease-in-out",t),children:s})}function _n(e,t){try{return BigInt(e).toLocaleString(t)}catch{const s=Number(e);return e.includes("e")||e.includes("E")?s.toExponential():s.toLocaleString(t,{maximumFractionDigits:6})}}function Yd({data:e,trackContentReferenceEvent:t}){h.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]);const s=qa().locale;return e.expression&&e.result!=null?n.jsxs("div",{className:"no-scrollbar overflow-auto sm:overflow-hidden",children:[n.jsxs("div",{className:"pb-1 text-lg font-semibold",children:[e.prefix&&n.jsx("span",{children:e.prefix}),n.jsx("span",{children:_n(e.result,s)}),e.suffix&&n.jsx("span",{children:e.suffix})]}),n.jsx("div",{className:"text-token-text-primary tracking-wide",children:`${e.expression}=${_n(e.result,s)}`})]}):null}function Po({ref:e,onClick:t,onMouseEnter:s,onMouseLeave:r}){const o=L();return n.jsx("button",{ref:e,"aria-label":o.formatMessage({id:"citation.icon.label",defaultMessage:"Coding Citation"}),onClick:t,onMouseEnter:s,onMouseLeave:r,className:N("rounded-xl px-1","bg-token-interactive-bg-tertiary-press text-token-text-secondary hover:text-token-text-inverted hover:bg-token-interactive-bg-primary-selected"),children:n.jsx(Ir,{className:"icon-sm"})})}function Kd({codeMessage:e,codeExecutionOutputMessage:t,onDismiss:s,FormattedText:r}){const o=L();return n.jsx(ve.Root,{isOpen:!0,onClose:s,testId:"modal-code-execution",children:n.jsx(ve.Overlay,{children:n.jsxs(ve.Content,{className:"flex max-h-[75vh] max-w-lg flex-col overflow-hidden",children:[n.jsx(ve.Header,{title:o.formatMessage(Qd.title),type:"success",closeButton:n.jsx(Xa,{onClick:s})}),n.jsxs("div",{className:"flex flex-1 flex-col overflow-auto",children:[n.jsx("div",{children:n.jsx(Lr,{FormattedText:r,message:e,codeRendererClassName:"border-none rounded-none",removeTopBorderRadius:!0})}),n.jsx("div",{children:n.jsx(Fr,{message:t})})]})]})})})}const Qd=ts({title:{id:"CodeExecutionOutputModal.title",defaultMessage:"Analysis"}});function eu({displayInfo:e,FormattedText:t,trackContentReferenceEvent:s}){const[r,o]=h.useState(!1),a=L();return h.useEffect(()=>{s("Search Content Reference Shown","search_content_reference_shown",e.type)},[s,e.type]),n.jsxs(n.Fragment,{children:[n.jsx(at,{label:a.formatMessage(tu.viewAnalysis),side:"top",delayDuration:150,className:"align-middle",children:n.jsx(Po,{onClick:()=>o(!0)})}),r&&n.jsx(Kd,{FormattedText:t,codeMessage:e.codeMessage,codeExecutionOutputMessage:e.codeExecutionOutputMessage,onDismiss:()=>o(!1)})]})}const tu=ts({viewAnalysis:{id:"viewAnalysis",defaultMessage:"View analysis"}});function su({contentReference:e,clientThreadId:t,turnIndex:s}){const{toggleThreadSidebar:r}=lt(),o=Rr("codingCitations"),[a,i]=h.useState(!1),l=h.useRef(null),d=()=>{l.current!=null&&window.clearTimeout(l.current),i(!0)},c=()=>{l.current=window.setTimeout(()=>i(!1),100)},u=h.useCallback(()=>{t&&r({type:"codingCitations",clientThreadId:t,turnIndex:s||1,messageId:e.cited_message?.id??"",matchedText:e.matched_text},o)},[r,t,o,e,s]);if(!e.cited_message||!e.highlighted_text)return null;let f;e.type==="python"?f=e.cited_message?.metadata?.aggregate_result?.code:e.type==="container"&&(f=e.cited_message?.metadata?.container_citation?.source_cmd);const x=f?.split(`
`).length??0;return n.jsx("span",{className:"relative top-[0.1rem] inline-block align-middle",children:n.jsx("span",{className:"inline-flex items-center",children:n.jsxs(ss,{open:a,onOpenChange:i,children:[n.jsx(ns,{asChild:!0,children:n.jsx(Po,{onClick:u,onMouseEnter:d,onMouseLeave:c})}),n.jsx(os,{children:n.jsx(rs,{align:"start",sideOffset:4,onMouseEnter:d,onMouseLeave:c,className:N("border-default bg-token-bg-primary rounded-2xl border p-3"),children:n.jsxs("aside",{className:"flex flex-col gap-3",children:[n.jsx("h2",{className:N("text-token-text-secondary text-xs font-medium"),children:e.type==="python"?n.jsx(T,{id:"citation.popover.label.python",defaultMessage:"Python script · {count, number} lines",values:{count:x}}):n.jsx(T,{id:"citation.popover.label.container",defaultMessage:"Bash script · {count, number} lines",values:{count:x}})}),n.jsx("hr",{}),n.jsx("h2",{className:N("text-sm font-medium","max-w-full break-words whitespace-pre-line sm:max-w-[300px]"),children:e.highlighted_text})]})})})]})})})}const nu=e=>h.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},h.createElement("path",{d:"M16.835 5.90091C16.835 5.68052 16.7115 5.4819 16.5205 5.38236L16.4346 5.34623L13.165 4.25638V14.5201L16.0654 15.4869L16.1357 15.5064C16.491 15.5782 16.835 15.3066 16.835 14.9322V5.90091ZM8.16504 5.47904V15.7437L11.835 14.5201V4.25638L8.16504 5.47904ZM18.165 14.9322C18.165 16.1576 17.0394 17.0456 15.877 16.8111L15.6445 16.7495L12.6846 15.7622C12.5946 15.7323 12.499 15.7247 12.4062 15.7398L12.3154 15.7622L8.10547 17.1656C7.76144 17.2802 7.39309 17.2946 7.04297 17.2085L6.89453 17.1656L3.14453 15.9156C2.3626 15.6549 1.83502 14.9234 1.83496 14.0992V5.06791C1.83496 3.76088 3.11551 2.83734 4.35547 3.25052L7.31543 4.23685L7.40625 4.26029C7.49905 4.27534 7.59449 4.26683 7.68457 4.23685L11.8945 2.83451L12.043 2.79154C12.3931 2.70547 12.7614 2.71982 13.1055 2.83451L16.8555 4.08451L16.999 4.13822C17.7014 4.43636 18.165 5.12808 18.165 5.90091V14.9322ZM3.16504 14.0992C3.1651 14.3509 3.32659 14.5742 3.56543 14.6538L6.83496 15.7437V5.47904L3.93457 4.51224C3.55592 4.38638 3.16504 4.66878 3.16504 5.06791V14.0992Z"}));function ou({business:e,mapUrl:t,showTitle:s=!1,showActionButtons:r=!0}){const o=e.categories&&e.categories.length>0?e.categories[0]:"";return n.jsxs("div",{className:"text-token-text-primary bg-token-bg-primary max-w-md rounded-md py-1",children:[s&&n.jsx("div",{className:"mb-1 text-lg leading-tight font-semibold",children:e.name}),n.jsx("div",{className:"text-token-text-primary mb-3 flex flex-wrap items-center text-sm font-normal",children:[e.rating!=null?n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Dr,{className:"text-token-text-primary h-4 w-4"}),e.rating.toFixed(1)]},"rating"):null,o?n.jsx("span",{children:o},"category"):null,e.price_str?n.jsx("span",{children:e.price_str},"price"):null,e.is_open!=null?n.jsx("span",{children:e.is_open?n.jsx(T,{id:"businessMetadata.openStatus",defaultMessage:"Open"}):n.jsx(T,{id:"businessMetadata.closedStatus",defaultMessage:"Closed"})},"open"):null].filter(Boolean).map((a,i)=>n.jsxs(zn.Fragment,{children:[i>0&&n.jsx("span",{className:"mx-1",children:"•"}),a]},i))}),r&&n.jsxs("div",{className:"flex flex-wrap gap-2",children:[t&&n.jsx(Ft,{type:"button",className:"bg-token-bg-primary text-token-text-primary m-0! rounded-full border px-3 py-0.5 text-xs font-medium",onClick:()=>window.open(t,"_blank","noopener,noreferrer"),children:n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(nu,{className:"text-token-text-primary h-4 w-4"}),n.jsx(T,{id:"businessMetadata.directions",defaultMessage:"Directions"})]},"rating")}),e.website_url&&n.jsx(Ft,{type:"button",className:"bg-token-bg-primary text-token-text-primary m-0! rounded-full border px-3 py-0.5 text-xs font-medium",onClick:()=>{const a=e.website_url;a&&window.open(a,"_blank","noopener,noreferrer")},children:n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Or,{className:"text-token-text-primary h-4 w-4"}),n.jsx(T,{id:"businessMetadata.website",defaultMessage:"Website"})]},"rating")}),e.phone&&n.jsx(Ft,{type:"button",className:"bg-token-bg-primary text-token-text-primary m-0! rounded-full border px-3 py-0.5 text-xs font-medium",onClick:()=>{window.location.href=`tel:${e.phone}`},children:n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ui,{className:"text-token-text-primary h-4 w-4"}),n.jsx(T,{id:"businessMetadata.phone",defaultMessage:"Phone"})]},"rating")})]})]})}function ru({product:e,clientThreadId:t,messageId:s,contentReferenceStartIndex:r,trackContentReferenceEvent:o,showTitle:a=!1,showImageGallery:i=!1}){const l=K(),d=B(l,"3375735072"),c=B(l,"232003972"),u=h.useMemo(()=>({clientThreadId:t,messageId:s}),[t,s]),f=as.useStore(),[x,b]=h.useState(!1),[y,_]=h.useState(e),[p,S]=h.useState(!1),C=a||c||d;return h.useEffect(()=>{let w=!0;return(async v=>{S(!0);try{for await(const k of au(v))w&&_(k)}finally{w&&S(!1)}})(y),()=>{w=!1}},[y.product_lookup_key?.variant_options_query]),y?n.jsxs("div",{className:"-mx-6",children:[i&&n.jsx(zr,{imageUrls:y.image_urls??[],title:y.title,onImageClick:w=>{f.setCurrentImage({image:{url:w,content_url:w,thumbnail_url:w,title:y.title,content_size:{width:0,height:0},thumbnail_size:{width:0,height:0}},source:tt.ProductDetails,analyticsMetadata:u,contentReferenceStartIndex:r})}}),n.jsxs("div",{className:"bg-token-bg-primary flex w-full flex-col",children:[C&&n.jsxs("div",{className:"border-token-border-light flex flex-col border-b px-6 pb-3",children:[a&&n.jsx("div",{className:"text-token-text-primary text-xl font-medium capitalize",children:y.title}),c&&y.num_reviews&&y.rating&&n.jsx(Br,{rating:y.rating,numReviews:y.num_reviews,ratingGroupedCitation:y.rating_grouped_citation,trackContentReferenceEvent:()=>{},analyticsMetadata:u}),d&&y.variants&&y.variants.length>0&&n.jsx("div",{className:"mt-5 mb-2",children:n.jsx(Hr,{options:y.variants,showErrors:x,updateOption:(w,m,v)=>_(k=>iu({optionGroupId:w,selectedId:m,variant_index:v,product:k,trackContentReferenceEvent:o}))})})]}),n.jsx(Wr,{className:"border-token-border-light -pt-3 -mx-3 flex flex-col border-b px-6 pb-3",offers:e.offers??[],contentReferenceStartIndex:r,productIndex:0,product:e,sCKStore:void 0,trackContentReferenceEvent:o,analyticsMetadata:u,imageUrls:e.image_urls??[],isLoading:p,onOpenCheckout:()=>b(!0)})]})]}):null}async function*au(e){const{product_lookup_key:t}=e;if(!!!t?.variant_options_query){yield e;return}const r=Ga(`${Ja}/search/product_info_variants`,{method:"POST",headers:{...cs({isAuthOptional:!0})},body:{product_lookup_key:e.product_lookup_key}});for await(const o of r)"data"in o&&(yield o.data.product)}function iu({optionGroupId:e,selectedId:t,variant_index:s,product:r,trackContentReferenceEvent:o}){const a=r.variants?.find(c=>c.id===e);o("product_detail","product_detail","product_entity",{product_id:r.id,action:"variant_selected",section:"product_detail",section_location:"sidebar",variant_name:a?.label??"",variant_value:a?.options.find(c=>c.id===t)?.label??"",variant_index:s});const i=r.variants?.map(c=>c.id===e?{...c,options:c.options.map(u=>({...u,selected:u.id===t})),selected_option_id:t}:c)??r.variants,d=i?.every(c=>c.selected_option_id)?i?.reduce((c,u)=>(u.selected_option_id&&(c[u.id]=u.selected_option_id),c),{}):null;return{...r,variants:i,product_lookup_key:{...r.product_lookup_key,variant_options_query:d}}}function lu({contentReference:e,clientThreadId:t,messageId:s,trackContentReferenceEvent:r}){if(h.useEffect(()=>{r("Search Content Reference Shown","search_content_reference_shown","entity_metadata",{entity_type:e.entity_type,...e.entity_type==="local_business"?{business_id:e.entity_data?.id}:e.entity_type==="product"?{product_id:e.entity_data?.id}:{}})},[r,e.entity_type,e.entity_data?.id]),e.entity_type==="local_business"){const o=e.layout;return n.jsx(ou,{business:e.entity_data,mapUrl:e.metadata?.map_url,showActionButtons:o!=="one-line",showTitle:o!=="one-line"})}else if(e.entity_type==="product")return n.jsx(ru,{product:e.entity_data,clientThreadId:t,messageId:s,contentReferenceStartIndex:e.start_idx,trackContentReferenceEvent:r});return null}function cu({iconRef:e,className:t,alt:s}){const r=e?.vector_url??e?.raster_url;return r?n.jsx("img",{src:r,className:t,alt:s}):n.jsx(Qn,{className:t})}function es(e,t,s,r){const o=B(s,"3958255976"),a=B(s,"1424158285"),i=Ur(e.cloud_doc_url??""),l=(o?e.fff_metadata?.name:void 0)??e.name,d=(o?e.fff_metadata?.display_file_type_name:void 0)??i?.type??r.formatMessage({id:"bqY3sN",defaultMessage:"File"}),c=(o&&e.fff_metadata?.display_file_type_icon?n.jsx(cu,{alt:d,className:t,iconRef:e.fff_metadata?.display_file_type_icon}):void 0)??(i?.Icon?n.jsx(i.Icon,{alt:d,className:t}):e.cloud_doc_url?a?n.jsx(Ye,{url:e.cloud_doc_url,className:t,fallback:n.jsx(Gt,{alt:d,className:t})}):n.jsx(Gt,{alt:d,className:t}):void 0)??n.jsx(Qn,{alt:d,className:t}),u=(o?e.fff_metadata?.capabilities?.user_view:void 0)??e.cloud_doc_url;let f;o&&e.fff_metadata?.snippet&&e.fff_metadata?.snippet.content.content_type==="text"?f=e.fff_metadata.snippet.content.text:f=e.description??e.snippet;const x=(o?e.fff_metadata?.file_last_modified_time:void 0)??e.last_modified_time,b=o?e.fff_metadata?.file_created_time:void 0;return{fileName:l,fileTypeDisplayName:d,fileTypeIcon:c,url:u,snippet:f,fileLastModifiedTime:x,fileCreatedTime:b}}const kn=32;function $o(e){const t=e.split(".");let s=e;return t.length>1&&t.slice(0,-1).some(r=>r.length>0)&&(s=t.slice(0,-1).join(".")),s.length>kn&&(s=s.slice(0,kn-1)+"…"),s}function du({additionalFileRefs:e,fileRef:t,index:s,trackContentReferenceEvent:r}){const o=Za(Ya),a=Ka(),i=h.useContext(ue),l=h.useMemo(()=>({source:t.source,index:s}),[t.source,s]);h.useEffect(()=>{r("File Citation Shown","file_citation_shown","file",l)},[]);const d=h.useCallback(b=>{b?r("File Citation Hovered","file_citation_hovered","file",l):r("File Citation Unhovered","file_citation_unhovered","file",l)},[l,r]),c=h.useCallback(()=>{r("File Citation Clicked","file_citation_clicked","file",l)},[l,r]),u=h.useCallback(()=>{r("File Citation Followup Clicked","file_citation_followup_clicked","file",l)},[l,r]),f=h.useCallback(()=>a(t.id,t.name),[a,t.id,t.name]),x=Mt(i?.analyticsMetadata.clientThreadId??ms,b=>b?.mode);return o&&eo(t.id)?null:Vr(x)?x.gizmo_id&&Qa(x.gizmo_id)?n.jsx("span",{className:N(Vi,"ms-1"),title:t.name,children:$o(t.name)}):null:n.jsx(uu,{additionalFileRefs:e,fileItem:t,onClickDownloadFile:f,trackCloudLinkClick:c,trackFileCitationFollowup:u,trackTooltipOpenChange:d})}const Sn=fs.p`not-prose mt-0! mb-0! flex-auto truncate`;function uu({additionalFileRefs:e,className:t,fileItem:s,onClickDownloadFile:r,trackCloudLinkClick:o,trackFileCitationFollowup:a,trackTooltipOpenChange:i}){const l=L(),d=K(),c=B(d,"1424158285"),{fileName:u,fileTypeDisplayName:f,fileTypeIcon:x,url:b,snippet:y}=es(s,"h-[12px] w-[12px] object-contain text-token-text-primary! flex-none",d,l),_=[{fileItem:s,fileName:u,fileTypeDisplayName:f,fileTypeIcon:x,url:b,snippet:y},...e?.map(m=>{const{fileName:v,fileTypeDisplayName:k,fileTypeIcon:g,url:j,snippet:P}=es(m,"h-[12px] w-[12px] object-contain",d,l);return{fileItem:m,fileName:v,fileTypeDisplayName:k,fileTypeIcon:g,url:j,snippet:P}})??[]];let p=N("ms-1 flex h-[25px] text-[10px] leading-[13px] rounded-xl items-center justify-center gap-1 px-2 relative","text-token-text-secondary! hover:text-token-text-primary! hover:bg-token-bg-secondary dark:bg-token-main-surface-secondary dark:hover:bg-token-bg-secondary",t);c||(p+=" bg-[#f4f4f4] ");const S=c&&s.medical_file_reference!==null&&s.medical_file_reference?.journal_name!==null?s.medical_file_reference?.journal_name:s.name,C=`${$o(S)}${e&&e.length>0?` +${e.length}`:""}`,w=n.jsx("span",{className:"relative inline-flex items-center",children:b?n.jsxs(xe,{href:b,className:p,onClick:o,children:[x,n.jsx(Sn,{children:C})]}):eo(s.id)?n.jsxs("button",{onClick:r,className:p,children:[x,n.jsx(Sn,{children:C})]}):n.jsx("span",{className:p,children:n.jsx(Gt,{})})});return n.jsx(fu,{items:_,contentType:f,trackFileCitationFollowup:a,trackTooltipOpenChange:i,children:w})}function fu({items:e,children:t,contentType:s,trackFileCitationFollowup:r,trackTooltipOpenChange:o}){const a=$t(),l=h.useContext(ue)?.clientThreadId??ms,d=ls(),c=K();ei(l);const u=B(c,"1424158285"),f=B(c,"733205176"),x=qr(l,e[0].fileItem.id,e[0].fileName,e[0].url),b=h.useCallback((_,p)=>{p.length&&(x(_,p),r?.())},[x,r]),y=()=>n.jsxs(n.Fragment,{children:[n.jsxs(xe,{href:e[0].url,className:N("text-token-text-primary flex max-w-80 flex-col gap-1 text-start text-xs font-normal no-underline!"),children:[n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[e[0].fileTypeIcon,n.jsx("div",{className:"text-token-text-primary flex-auto truncate",children:u?e[0].fileItem.medical_file_reference?.journal_name:s})]}),n.jsx("div",{className:"line-clamp-2 text-sm font-medium break-all",children:e[0].fileName}),u&&n.jsxs("div",{className:"line-clamp-2 text-sm break-words",children:[n.jsx("span",{className:"italic",children:e[0].fileItem.medical_file_reference?.authors_display}),n.jsx("span",{className:"ms-1 not-italic",children:e[0].fileItem.medical_file_reference?.publication_year})]}),e[0].snippet&&n.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm",children:e[0].snippet})]}),d||f?null:n.jsx("div",{className:"flex w-full cursor-pointer flex-row items-center gap-2 pt-3 text-sm",children:n.jsx(Xr,{sendReply:b})})]});return n.jsx(at,{label:n.jsx(y,{}),align:"start",cornerRadius:"xl",customBorderClassName:"border-token-border-default border",customPaddingClassName:"p-3",delayDuration:150,interactive:!0,onOpenChange:o,side:"bottom",theme:a?"default":"white",wide:!0,children:t})}function mu(e,t){return new Date(e).toLocaleDateString(t,{month:"long",day:"numeric",year:"numeric"})}function hu({metadata:e,trackContentReferenceEvent:t}){return e.items.length===0?null:n.jsx("div",{className:"mt-6 flex flex-col gap-3",children:e.items.map((s,r)=>n.jsx(pu,{item:s,index:r,trackContentReferenceEvent:t},r))})}function pu({item:e,index:t,trackContentReferenceEvent:s}){const r=L(),o=K(),{fileName:a,fileTypeDisplayName:i,fileTypeIcon:l,snippet:d,url:c,fileLastModifiedTime:u}=es(e,"icon object-contain",o,r),f={title:a,description:d?.toString()??"",index:t};return h.useEffect(()=>{s("Contextual Answers Content Reference Shown","contextual_answers_content_reference_shown","file_navlist",f)},[]),n.jsxs(xe,{className:"group/nav-list relative flex items-center gap-6 py-1.5",href:c??"/",onClick:()=>{s("Contextual Answers Content Reference Clicked","contextual_answers_content_reference_clicked","file_navlist",f)},children:[n.jsx("div",{className:"absolute start-0 top-0 bottom-0 w-[3px] rounded-t-lg rounded-b-lg bg-black/10"}),n.jsxs("div",{className:"ms-4 flex grow flex-col gap-1 overflow-hidden text-ellipsis",children:[n.jsxs("div",{className:"not-prose text-token-text-primary flex items-center gap-1.5 text-sm",children:[l,n.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm",children:i})]}),n.jsx("div",{className:"text-token-link decoration-token-link line-clamp-2 font-semibold group-hover/nav-list:underline",children:a}),n.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm leading-snug font-normal",children:d}),u&&n.jsx("div",{className:"text-token-text-secondary text-sm",children:mu(u,r.locale)})]})]})}var Vt={line:{color:"#F66",width:1,dashPattern:[]},sync:{enabled:!0,group:1,suppressTooltips:!1},zoom:{enabled:!0,zoomboxBackgroundColor:"rgba(66,133,244,0.2)",zoomboxBorderColor:"#48F",zoomButtonText:"Reset Zoom",zoomButtonClass:"reset-zoom"},snap:{enabled:!1},callbacks:{beforeZoom:function(e,t){return!0},afterZoom:function(e,t){}}},gu={id:"crosshair",afterInit:function(e){if(e.config.options.scales.x){var t=e.config.options.scales.x.type;if(!(t!=="linear"&&t!=="time"&&t!=="category"&&t!=="logarithmic")){e.options.plugins.crosshair===void 0&&(e.options.plugins.crosshair=Vt),e.crosshair={enabled:!1,suppressUpdate:!1,x:null,originalData:[],originalXRange:{},dragStarted:!1,dragStartX:null,dragEndX:null,suppressTooltips:!1,ignoreNextEvents:0,reset:function(){this.resetZoom(e,!1,!1)}.bind(this)};var s=this.getOption(e,"sync","enabled");s&&(e.crosshair.syncEventHandler=function(r){this.handleSyncEvent(e,r)}.bind(this),e.crosshair.resetZoomEventHandler=function(r){var o=this.getOption(e,"sync","group");r.chartId!==e.id&&r.syncGroup===o&&this.resetZoom(e,!0)}.bind(this),window.addEventListener("sync-event",e.crosshair.syncEventHandler),window.addEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler)),e.panZoom=this.panZoom.bind(this,e)}}},afterDestroy:function(e){var t=this.getOption(e,"sync","enabled");t&&(window.removeEventListener("sync-event",e.crosshair.syncEventHandler),window.removeEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler))},panZoom:function(e,t){if(e.crosshair.originalData.length!==0){var s=e.crosshair.end-e.crosshair.start,r=e.crosshair.min,o=e.crosshair.max;t<0?(e.crosshair.start=Math.max(e.crosshair.start+t,r),e.crosshair.end=e.crosshair.start===r?r+s:e.crosshair.end+t):(e.crosshair.end=Math.min(e.crosshair.end+t,e.crosshair.max),e.crosshair.start=e.crosshair.end===o?o-s:e.crosshair.start+t),this.doZoom(e,e.crosshair.start,e.crosshair.end)}},getOption:function(e,t,s){return Ss(e.options.plugins.crosshair[t]?e.options.plugins.crosshair[t][s]:void 0,Vt[t][s])},getXScale:function(e){return e.data.datasets.length?e.scales[e.getDatasetMeta(0).xAxisID]:null},getYScale:function(e){return e.scales[e.getDatasetMeta(0).yAxisID]},handleSyncEvent:function(e,t){var s=this.getOption(e,"sync","group");if(t.chartId!==e.id&&t.syncGroup===s){var r=this.getXScale(e);if(r){var o=t.original.native.buttons===void 0?t.original.native.which:t.original.native.buttons;t.original.type==="mouseup"&&(o=0);var a={type:t.original.type=="click"?"mousemove":t.original.type,chart:e,x:r.getPixelForValue(t.xValue),y:t.original.y,native:{buttons:o},stop:!0};e._eventHandler(a)}}},afterEvent:function(e,t){if(e.config.options.scales.x.length==0)return;let s=t.event;var r=e.config.options.scales.x.type;if(!(r!=="linear"&&r!=="time"&&r!=="category"&&xscaleType!=="logarithmic")){var o=this.getXScale(e);if(o){if(e.crosshair.ignoreNextEvents>0){e.crosshair.ignoreNextEvents-=1;return}var a=s.native.buttons===void 0?s.native.which:s.native.buttons;s.native.type==="mouseup"&&(a=0);var i=this.getOption(e,"sync","enabled"),l=this.getOption(e,"sync","group");if(!s.stop&&i){var t=new CustomEvent("sync-event");t.chartId=e.id,t.syncGroup=l,t.original=s,t.xValue=o.getValueForPixel(s.x),window.dispatchEvent(t)}var d=this.getOption(e,"sync","suppressTooltips");if(e.crosshair.suppressTooltips=s.stop&&d,e.crosshair.enabled=s.type!=="mouseout"&&s.x>o.getPixelForValue(o.min)&&s.x<o.getPixelForValue(o.max),!e.crosshair.enabled&&!e.crosshair.suppressUpdate)return s.x>o.getPixelForValue(o.max)&&(e.crosshair.suppressUpdate=!0,e.update("none")),e.crosshair.dragStarted=!1,!1;e.crosshair.suppressUpdate=!1;var c=this.getOption(e,"zoom","enabled");if(a===1&&!e.crosshair.dragStarted&&c&&(e.crosshair.dragStartX=s.x,e.crosshair.dragStarted=!0),e.crosshair.dragStarted&&a===0){e.crosshair.dragStarted=!1;var u=o.getValueForPixel(e.crosshair.dragStartX),f=o.getValueForPixel(e.crosshair.x);Math.abs(e.crosshair.dragStartX-e.crosshair.x)>1&&this.doZoom(e,u,f),e.update("none")}e.crosshair.x=s.x,e.draw()}}},afterDraw:function(e){if(e.crosshair.enabled)return e.crosshair.dragStarted?this.drawZoombox(e):(this.drawTraceLine(e),this.interpolateValues(e),this.drawTracePoints(e)),!0},beforeTooltipDraw:function(e){return!e.crosshair.dragStarted&&!e.crosshair.suppressTooltips},resetZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(s){if(e.crosshair.originalData.length>0)for(var r=0;r<e.data.datasets.length;r++){var o=e.data.datasets[r];o.data=e.crosshair.originalData.shift(0)}e.crosshair.originalXRange.min?(e.options.scales.x.min=e.crosshair.originalXRange.min,e.crosshair.originalXRange.min=null):delete e.options.scales.x.min,e.crosshair.originalXRange.max?(e.options.scales.x.max=e.crosshair.originalXRange.max,e.crosshair.originalXRange.max=null):delete e.options.scales.x.max}e.crosshair.button&&e.crosshair.button.parentNode&&(e.crosshair.button.parentNode.removeChild(e.crosshair.button),e.crosshair.button=!1);var a=this.getOption(e,"sync","enabled");if(!t&&s&&a){var i=this.getOption(e,"sync","group"),l=new CustomEvent("reset-zoom-event");l.chartId=e.id,l.syncGroup=i,window.dispatchEvent(l)}s&&e.update("none")},doZoom:function(e,t,s){if(t>s){var r=t;t=s,s=r}var o=Ss(e.options.plugins.crosshair.callbacks?e.options.plugins.crosshair.callbacks.beforeZoom:void 0,Vt.callbacks.beforeZoom);if(!o(t,s))return!1;if(e.crosshair.dragStarted=!1,e.options.scales.x.min&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.min=e.options.scales.x.min),e.options.scales.x.max&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.max=e.options.scales.x.max),!e.crosshair.button){var a=document.createElement("button"),i=this.getOption(e,"zoom","zoomButtonText"),l=this.getOption(e,"zoom","zoomButtonClass"),d=document.createTextNode(i);a.appendChild(d),a.className=l,a.addEventListener("click",function(){this.resetZoom(e)}.bind(this)),e.canvas.parentNode.appendChild(a),e.crosshair.button=a}e.options.scales.x.min=t,e.options.scales.x.max=s;var c=e.crosshair.originalData.length===0,u=e.config.options.scales.x.type!=="category";if(u)for(var f=0;f<e.data.datasets.length;f++){var x=[],b=0,y=!1,_=!1;c&&(e.crosshair.originalData[f]=e.data.datasets[f].data);for(var p=e.crosshair.originalData[f],S=0;S<p.length;S++){var C=p[S],w=C.x!==void 0?C.x:NaN;w>=t&&!y&&b>0&&(x.push(p[b-1]),y=!0),w>=t&&w<=s&&x.push(C),w>s&&!_&&b<p.length&&(x.push(C),_=!0),b+=1}e.data.datasets[f].data=x}if(e.crosshair.start=t,e.crosshair.end=s,c){var m=this.getXScale(e);e.crosshair.min=m.min,e.crosshair.max=m.max}e.crosshair.ignoreNextEvents=2,e.update("none");var v=this.getOption(e,"callbacks","afterZoom");v(t,s)},drawZoombox:function(e){var t=this.getYScale(e),s=this.getOption(e,"zoom","zoomboxBorderColor"),r=this.getOption(e,"zoom","zoomboxBackgroundColor");e.ctx.beginPath(),e.ctx.rect(e.crosshair.dragStartX,t.getPixelForValue(t.max),e.crosshair.x-e.crosshair.dragStartX,t.getPixelForValue(t.min)-t.getPixelForValue(t.max)),e.ctx.lineWidth=1,e.ctx.strokeStyle=s,e.ctx.fillStyle=r,e.ctx.fill(),e.ctx.fillStyle="",e.ctx.stroke(),e.ctx.closePath()},drawTraceLine:function(e){var t=this.getYScale(e),s=this.getOption(e,"line","width"),r=this.getOption(e,"line","color"),o=this.getOption(e,"line","dashPattern"),a=this.getOption(e,"snap","enabled"),i=e.crosshair.x;a&&e._active.length&&(i=e._active[0].element.x),e.ctx.beginPath(),e.ctx.setLineDash(o),e.ctx.moveTo(i,t.getPixelForValue(t.max)),e.ctx.lineWidth=s,e.ctx.strokeStyle=r,e.ctx.lineTo(i,t.getPixelForValue(t.min)),e.ctx.stroke(),e.ctx.setLineDash([])},drawTracePoints:function(e){for(var t=0;t<e.data.datasets.length;t++){var s=e.data.datasets[t],r=e.getDatasetMeta(t),o=e.scales[r.yAxisID];r.hidden||!s.interpolate||(e.ctx.beginPath(),e.ctx.arc(e.crosshair.x,o.getPixelForValue(s.interpolatedValue),3,0,2*Math.PI,!1),e.ctx.fillStyle="white",e.ctx.lineWidth=2,e.ctx.strokeStyle=s.borderColor,e.ctx.fill(),e.ctx.stroke())}},interpolateValues:function(e){for(var t=0;t<e.data.datasets.length;t++){var s=e.data.datasets[t],r=e.getDatasetMeta(t),o=e.scales[r.xAxisID],a=o.getValueForPixel(e.crosshair.x);if(!(r.hidden||!s.interpolate)){var i=s.data,l=i.findIndex(function(f){return f.x>=a}),d=i[l-1],c=i[l];if(e.data.datasets[t].steppedLine&&d)s.interpolatedValue=d.y;else if(d&&c){var u=(c.y-d.y)/(c.x-d.x);s.interpolatedValue=d.y+(a-d.x)*u}else s.interpolatedValue=NaN}}}};const vt=(e=1)=>`rgba(48, 166, 51, ${e})`,wt=(e=1)=>`rgba(241, 77, 66, ${e})`,Cn="text-[#30a633]",jn="text-[#f14d42]",xu=["1d","5d","1m","6m","ytd","1y","5y","max"];function yu({histories:e,selectedInterval:t,onSelectHistoryInterval:s}){const r=Object.keys(e?.quotes??{});return n.jsx("div",{className:"text-token-text-tertiary inline-flex items-start justify-between rounded-[10px] bg-[#f4f4f4] p-[3px] text-xs font-semibold sm:justify-start sm:gap-1 dark:bg-[#393939]",children:r.map(o=>n.jsx("button",{onClick:()=>{s?.(o)},className:N("border border-transparent px-3 py-1.5 text-xs font-semibold uppercase",t===o?"border-token-border-default! bg-token-main-surface-primary text-token-text-primary shadow-xxs dark:border-token-border-medium! rounded-lg":"hover:text-token-text-secondary"),children:Eo[o].label},o))})}const Eo={"1d":{label:"1D",formatTimestampLabel:Nn,formatTimestampTooltip:Nn,maxTicksLimit:6,lineTension:.1},"5d":{label:"5D",formatTimestampLabel:Mn,formatTimestampTooltip:vu,maxTicksLimit:6,lineTension:.1},"1m":{label:"1M",formatTimestampLabel:Mn,formatTimestampTooltip:wu,maxTicksLimit:6,lineTension:.1,useUtc:!0},"6m":{label:"6M",formatTimestampLabel:qt,formatTimestampTooltip:Je,maxTicksLimit:5,lineTension:.1,useUtc:!0},ytd:{label:"YTD",formatTimestampLabel:qt,formatTimestampTooltip:Je,maxTicksLimit:5,lineTension:.1,useUtc:!0},"1y":{label:"1Y",formatTimestampLabel:qt,formatTimestampTooltip:Je,maxTicksLimit:5,lineTension:.2,useUtc:!0},"5y":{label:"5Y",formatTimestampLabel:Tn,formatTimestampTooltip:Je,maxTicksLimit:5,lineTension:.2,useUtc:!0},max:{label:"max",formatTimestampLabel:Tn,formatTimestampTooltip:Je,maxTicksLimit:5,lineTension:.2,useUtc:!0}};function bu(e){return e?xu.filter(s=>s in e.quotes).find(s=>e.quotes[s].length>0):void 0}function Ce(e,t){return Ke(new Date(e*1e3),t??"America/New_York")}function Nn(e,t,s){const r=Ce(t,s);return e.formatTime(r,{hour:"numeric",minute:"numeric"})}function vu(e,t,s){const r=Ce(t,s);return e.formatDate(r,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function Je(e,t,s){const r=Ce(t,s);return e.formatDate(r,{month:"short",day:"numeric",year:"numeric"})}function qt(e,t,s){const r=Ce(t,s);return e.formatDate(r,{month:"short",year:"numeric"})}function Mn(e,t,s){const r=Ce(t,s);return e.formatDate(r,{month:"short",day:"numeric"})}function wu(e,t,s){const r=Ce(t,s);return e.formatDate(r,{weekday:"short",month:"short",day:"numeric"})}function Tn(e,t,s){const r=Ce(t,s);return e.formatDate(r,{year:"numeric"})}qi.register(Xi,Gi,Ji,Zi,Yi,Ki,Qi,el,tl,gu,sl);const _u=100,Pn={color:"#b4b4b4",font:{size:10,weight:"600",family:"Menlo"}};function ku({isUp:e,histories:t,selectedInterval:s,setHighlightedPrice:r,latestTradingPeriod:o,timezone:a}){return n.jsx(n.Fragment,{children:t&&s&&o?n.jsx(Su,{isUp:e,histories:t,selectedInterval:s,latestTradingPeriod:o,timezone:a,setHighlightedPrice:r}):n.jsx(Ze,{className:"h-full",index:1,width:100})})}function Su({isUp:e,histories:t,selectedInterval:s,latestTradingPeriod:r,timezone:o,setHighlightedPrice:a}){const[i,l]=h.useState(null),[d,c]=h.useState(!1),u=s==="1d",f=h.useMemo(()=>{let m=t.quotes[s].filter(v=>v.close>=0);if(u&&r){const v=r.regular.start_timestamp,k=r.regular.end_timestamp;if(m=m.filter(g=>g.timestamp>=v&&g.timestamp<=k),m.length===0||m[m.length-1].timestamp<k){let j=m.length>0?m[m.length-1].timestamp:v-600;for(;j<k;)j+=600,m.push({timestamp:j,close:null})}}return m},[t,s,u,r]),x=Eo[s],{formatTimestampTooltip:b,maxTicksLimit:y,useUtc:_=!1}=x,p=L(),S=ao(),C=$t(),w=h.useMemo(()=>{const{formatTimestampLabel:m,lineTension:v}=x;return{labels:f.map(k=>m(p,k.timestamp,_?"UTC":o)),datasets:[{data:f.map(k=>k.close),borderColor:e?vt():wt(),pointRadius:0,pointHoverRadius:4,pointStyle:"circle",pointBackgroundColor:e?vt():wt(),pointHoverBorderWidth:2,pointHoverBorderColor:"rgba(255, 255, 255, 1)",backgroundColor:function(k){const{ctx:g,chartArea:j}=k.chart;if(j)return ju(g,j,e)},fill:!0,borderWidth:2,lineTension:v??.4}]}},[x,f,e,_,o,p]);return n.jsx("div",{className:"flex h-full flex-col gap-6",children:n.jsxs("div",{className:"relative h-full",onMouseEnter:()=>c(!0),onMouseLeave:()=>{c(!1),a(null)},children:[n.jsx(nl,{options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},hover:{mode:d?"index":"point"},animation:!1,scales:{x:{afterBuildTicks:m=>{if(m.ticks.length>y)if(u)m.ticks=m.ticks.filter((v,k)=>f[k].timestamp%(S?3600:7200)===0);else{const v=Math.ceil(m.ticks.length/(y-1));m.ticks=m.ticks.filter((k,g)=>g>0&&(g%v===0||g===m.ticks.length-1))}},grid:{display:!1},ticks:{...Pn,align:"end"}},y:{ticks:{...Pn,maxTicksLimit:7},border:{display:!1},grid:{color:C?"rgba(255, 255, 255, 0.1)":"rgba(229, 229, 229, 0.5)"}}},plugins:{datalabels:{display:!1},legend:{display:!1},tooltip:{enabled:!1,animation:!1,displayColors:!1,callbacks:{title:function(m){const v=m[0];if(!v)return"";const k=f[v.dataIndex]?.timestamp;return k?b(p,k,_?"UTC":o):""}},external:({tooltip:m})=>{d&&m.opacity>0&&a(et(m.dataPoints?.[0]?.parsed?.y??0)),l(v=>{const k=m.chart.width,g=m.caretX>k-_u;return!v||v.x!==m.caretX||v.y!==m.caretY||v.opacity!==m.opacity||v.flip!==g?{...v,x:m.caretX,y:m.caretY,dateLabel:m.title?.[0],value:et(m.dataPoints?.[0]?.parsed?.y??0),opacity:m.opacity,flip:g}:v})}},dropShadow:!1,crosshair:{line:{color:C?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",width:.5},zoom:{enabled:!1}}}},data:w}),n.jsx(Cu,{tooltipData:i})]})})}function Cu({tooltipData:e}){return!e||!e.opacity?null:n.jsx("div",{style:{left:e.x-5,top:10,transform:"translate(-50%, -50%)"},className:N("text-token-main-surface-primary dark:bg-token-main-surface-secondary pointer-events-none absolute translate-y-[-100%] rounded-lg bg-black px-2 py-1 font-mono font-semibold whitespace-nowrap dark:text-white"),children:n.jsx("div",{className:"text-xs",children:e.dateLabel})})}function ju(e,t,s){const r=e.createLinearGradient(0,t.top,0,t.bottom);return r.addColorStop(0,s?vt(.4):wt(.4)),r.addColorStop(1,s?vt(0):wt(0)),r}function et(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function le({label:e,value:t,className:s}){return n.jsxs("div",{className:N("flex w-full flex-1 flex-row justify-between text-sm",s),children:[n.jsx("span",{className:"text-token-text-secondary font-normal whitespace-nowrap",children:e}),n.jsx("span",{className:"text-token-text-primary font-normal whitespace-nowrap",children:t})]})}function Nu({metrics:e}){const t=L(),s=!!(e.marketCap&&e.peRatio&&e.eps);return n.jsx("div",{className:"border-token-border-default flex flex-col gap-1 rounded-b-lg border-t bg-[#f4f4f4] px-4 py-3 dark:bg-[#393939]",children:n.jsxs("div",{className:N("grid grid-cols-2 gap-x-10 gap-y-3 lg:grid-cols-3 lg:gap-x-6"),children:[n.jsx(le,{label:t.formatMessage({id:"MDHEj7",defaultMessage:"Open"}),value:t.formatNumber(e.openPrice,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-1"}),n.jsx(le,{label:t.formatMessage({id:"PboNMC",defaultMessage:"Volume"}),value:t.formatNumber(e.intradayVolume,{notation:"compact",maximumFractionDigits:1}),className:N("order-2",!s&&"lg:order-last")}),n.jsxs("div",{className:"order-4 row-span-2 flex flex-col gap-3",children:[n.jsx(le,{label:t.formatMessage({id:"bresUW",defaultMessage:"Day Low"}),value:t.formatNumber(e.intradayLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),n.jsx(le,{label:t.formatMessage({id:"oWyv5V",defaultMessage:"Day High"}),value:t.formatNumber(e.intradayHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]}),n.jsxs("div",{className:"order-5 row-span-2 flex flex-col gap-3",children:[n.jsx(le,{label:t.formatMessage({id:"DcEYIK",defaultMessage:"Year Low"}),value:t.formatNumber(e.fiftyTwoWeekLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),n.jsx(le,{label:t.formatMessage({id:"ZfFtJ4",defaultMessage:"Year High"}),value:t.formatNumber(e.fiftyTwoWeekHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.marketCap&&n.jsx(le,{label:t.formatMessage({id:"BzyP4Y",defaultMessage:"Market Cap"}),value:t.formatNumber(e.marketCap,{notation:"compact",maximumFractionDigits:2}),className:"order-last lg:order-3"}),e.peRatio&&e.eps&&n.jsxs(n.Fragment,{children:[n.jsx(le,{label:t.formatMessage({id:"edGd+S",defaultMessage:"EPS (TTM)"}),value:t.formatNumber(e.eps,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-last"}),n.jsx(le,{label:t.formatMessage({id:"AhpCu1",defaultMessage:"P/E Ratio"}),value:t.formatNumber(e.peRatio,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-last"})]})]})})}function Mu({data:e,priceChange:t,highlightedPrice:s,extendedPriceChange:r,url:o}){function a(i,l="intraday",d=null){const{isUp:c,changePercentage:u,changeLabel:f,changeAmount:x}=i,b=Math.abs(u).toFixed(2),y=et(x);return n.jsxs("span",{className:"flex min-w-0 items-center gap-1",children:[l==="extended_hours"&&d!=null&&n.jsx("span",{className:"font-semibold",children:n.jsx(T,{id:"HWwWpW",defaultMessage:"{price}",values:{price:d}})}),n.jsx("span",{className:N("font-semibold",c?Cn:jn),children:n.jsx(T,{id:"3x4Lkl",defaultMessage:"{sign}{changeAmount}",values:{changeAmount:y,sign:c?"+":""}})}),n.jsx("span",{className:N("font-semibold",c?Cn:jn),children:n.jsx(T,{id:"MbfF1T",defaultMessage:"({sign}{changePercentage}%)",values:{changePercentage:b,sign:c?"+":"-"}})}),l==="extended_hours"?n.jsx("span",{className:"text-token-text-primary min-w-0 truncate",children:f}):n.jsx("span",{className:"text-token-text-primary min-w-0 truncate",children:f})]})}return n.jsxs("div",{children:[n.jsx("div",{className:"mt-2 text-sm",children:e?n.jsx(T,{id:"+2WHuv",defaultMessage:"{name} ({ticker})",values:{name:e.asset.name,ticker:e.asset.ticker}}):n.jsx("div",{className:"w-32 font-medium",children:n.jsx(Ze,{index:9,width:100})})}),n.jsx("div",{className:"text-token-text-tertiary text-sm",children:e?n.jsx(n.Fragment,{children:o!=null&&n.jsxs(n.Fragment,{children:[" · ",n.jsx(xe,{href:o,className:"text-token-link hover:underline",children:Nt(o,"hostname")})]})}):n.jsx("div",{className:"mt-2 w-36",children:n.jsx(Ze,{index:6,width:100})})}),n.jsx("div",{className:"mt-2 flex text-4xl font-semibold",children:e?n.jsx(T,{id:"s+1uly",defaultMessage:"{price}",values:{price:s??et(e.price.price)}}):n.jsx("div",{className:"w-32",children:n.jsx(Ze,{index:0,width:100})})}),n.jsx("div",{className:"mt-2 flex items-center justify-start gap-1 text-sm",children:t?a(t):n.jsx("div",{className:"mt-2 w-40",children:n.jsx(Ze,{index:3,width:100})})}),n.jsx("div",{className:"mt-0.5 flex items-center justify-start gap-1 text-sm",children:e?.price?.extended_price!=null&&r!=null&&a(r,"extended_hours",et(e.price.extended_price))})]})}function Tu({contentReference:e,trackContentReferenceEvent:t}){const s=L();h.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown","stock")},[t]);const r=bu(e?.stock?.histories),o=e?.stock,[a,i]=h.useState(r),[l,d]=h.useState(null),c=a==="1d",u=o?.histories?.quotes?.[a??""]?.[0],f=a&&a in gt?a:void 0,x=o&&(u&&!c?{changePercentage:(o.price.price-u.close)/u.close*100,changeAmount:o.price.price-u.close,changeLabel:f?s.formatMessage(gt[f]):"",isUp:o.price.price>u.close}:o.price.change_percent&&o.price.change?{changePercentage:o.price.change_percent*100,changeAmount:o.price.change,changeLabel:$u(o.price.latest_trade_timestamp,o.asset.timezone,s),isUp:o.price.change?o.price.change>0:!1}:null),b=o&&o.price.extended_price!=null&&o.price.extended_change_percent!=null&&o.price.extended_change!=null?{changePercentage:o.price.extended_change_percent*100,changeAmount:o.price.extended_change,changeLabel:s.formatMessage(Pu(o.price.market_status)??gt.extended),isUp:o.price.extended_change>0}:null,{fiftyTwoWeekHigh:y,fiftyTwoWeekLow:_}=h.useMemo(()=>{const C=o?.histories?.quotes["1y"];if(!C)return{fiftyTwoWeekHigh:null,fiftyTwoWeekLow:null};const w=C.map(v=>v.high).filter(v=>v!=null),m=C.map(v=>v.low).filter(v=>v!=null);return{fiftyTwoWeekHigh:w.length>0?Math.max(...w):null,fiftyTwoWeekLow:m.length>0?Math.min(...m):null}},[o?.histories?.quotes]),p=o?.price.open_price&&o.price.intraday_high&&o.price.intraday_low&&o.price.intraday_volume&&y&&_?{openPrice:o.price.open_price,intradayHigh:o.price.intraday_high,intradayLow:o.price.intraday_low,intradayVolume:o.price.intraday_volume,fiftyTwoWeekHigh:y,fiftyTwoWeekLow:_,marketCap:o.metrics?.market_cap??void 0,peRatio:o.metrics?.pe_ratio??void 0,eps:o.metrics?.eps??void 0}:null,S=p!=null;return n.jsxs("div",{"data-testid":"finance-widget",className:N("border-token-border-default mb-2 flex min-h-[480px] flex-col gap-8 rounded-lg border"),children:[n.jsxs("div",{className:"mx-6 flex flex-wrap items-end justify-between",children:[n.jsx(Mu,{data:o??null,highlightedPrice:l,priceChange:x??null,extendedPriceChange:b??null,url:e?.url??null}),n.jsx("div",{className:"mt-4",children:n.jsx(yu,{selectedInterval:a,onSelectHistoryInterval:i,histories:o?.histories})})]}),n.jsx("div",{className:"mx-6 h-[340px]",children:n.jsx(ku,{isUp:x?.isUp??!1,selectedInterval:a,histories:o?.histories,setHighlightedPrice:d,onSelectHistoryInterval:C=>i(C),latestTradingPeriod:o?.asset.latest_trading_period,timezone:o?.asset.timezone??null})}),S&&n.jsx("div",{className:"-mt-4",children:n.jsx(Nu,{metrics:p})})]})}function Pu(e){if(e==null)return null;const t=e.toLowerCase();return t==="premarket"||t==="open"?It({id:"By+pvF",defaultMessage:"Pre-Market"}):t==="afterhours"||t==="closed"?It({id:"aLCg3c",defaultMessage:"After Hours"}):It({id:"2p526c",defaultMessage:"Extended Hours"})}function $u(e,t,s){function r(o,a){const l=Ke(new Date,a),d=s.formatDate(l,{year:"numeric",month:"2-digit",day:"2-digit"}),c=Cs(o*1e3),u=Ke(c,a),f=s.formatDate(u,{year:"numeric",month:"2-digit",day:"2-digit"});return d===f}if(!e||!t||r(e,t))return s.formatMessage(gt["1d"]);{const o=Cs(e*1e3),a=Ke(o,t);return s.formatDate(a,{month:"long",day:"numeric"})}}const gt=ts({"1d":{id:"SMdcuo",defaultMessage:"Today"},extended:{id:"2p526c",defaultMessage:"Extended Hours"},"5d":{id:"HCA6lr",defaultMessage:"Past 5 days"},"1m":{id:"DJpPMq",defaultMessage:"Past month"},"6m":{id:"1mUJ2L",defaultMessage:"Past 6 months"},ytd:{id:"b9KkhV",defaultMessage:"Year to date"},"1y":{id:"XnvD9A",defaultMessage:"Past year"},"5y":{id:"DfI1RB",defaultMessage:"Past 5 years"},max:{id:"WzOhuU",defaultMessage:"Max"}}),Eu={google_maps:{title:"Google Maps"}};function Au({metadata:e,trackContentReferenceEvent:t}){h.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]);const s=Eu[e.provider]?.title??"Maps";return n.jsx("span",{children:n.jsx(T,{id:"ZSUz1k",defaultMessage:" ({link}) ",values:{link:n.jsx(xe,{href:e.url,children:s})}})})}function Iu(e){"use forget";const t=Ct.c(19),{metadata:s,trackContentReferenceEvent:r}=e,o=s.items.length>0,a=h.useRef(r);let i,l;t[0]!==r?(i=()=>{a.current=r},l=[r],t[0]=r,t[1]=i,t[2]=l):(i=t[1],l=t[2]),h.useEffect(i,l);let d,c;t[3]!==o?(d=()=>{o&&a.current("Search Content Reference Shown","search_content_reference_shown","nav_list")},c=[o],t[3]=o,t[4]=d,t[5]=c):(d=t[4],c=t[5]),h.useEffect(d,c);let u;t[6]!==r?(u=(S,C)=>{r("link_action",null,"nav_list",{...$n(S,C),action:"click"})},t[6]=r,t[7]=u):u=t[7];const f=u;let x;t[8]!==r?(x=(S,C)=>{r("link_action",null,"nav_list",{...$n(S,C),action:"show"})},t[8]=r,t[9]=x):x=t[9];const b=x;if(s.items.length===0)return null;let y;t[10]!==s.title?(y=s.title&&n.jsx("div",{className:"text-token-text-primary -mb-1 pb-3 font-semibold",children:s.title}),t[10]=s.title,t[11]=y):y=t[11];let _;t[12]!==f||t[13]!==b||t[14]!==s.items?(_=n.jsx(To,{items:s.items,onCardRender:Lu,onCardShown:b,onCardClicked:f,cardClassName:"transition-all duration-200 border-token-border-default hover:border-light border rounded-xl bg-clip-padding hover:shadow-md overflow-hidden"}),t[12]=f,t[13]=b,t[14]=s.items,t[15]=_):_=t[15];let p;return t[16]!==y||t[17]!==_?(p=n.jsxs("div",{className:"mt-6 mb-1","data-testid":"nav-list-widget",children:[y,_]}),t[16]=y,t[17]=_,t[18]=p):p=t[18],p}function Lu(e){return n.jsx(Fu,{item:e})}function Fu({item:e}){const{isSuccess:t}=Jt(e.thumbnail_url??void 0,"NavListItem"),s=L(),r=ti(s,e.pub_date);return n.jsxs(xe,{className:"flex flex-col items-center gap-4 overflow-hidden pb-6",href:e.url,children:[t&&e.thumbnail_url?n.jsx("div",{className:"relative h-36 w-full overflow-hidden",children:n.jsx("img",{src:e.thumbnail_url,className:"m-0 h-full w-full",style:{objectFit:"cover"},alt:e.title})}):n.jsxs("div",{className:"icon-bg relative flex h-36 w-full shrink-0 items-center justify-center overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat blur-3xl",children:n.jsx(Ye,{url:e.url,size:256,minSize:128,className:"mix-soft-light opacity-30 dark:opacity-20"})}),n.jsx("div",{className:"absolute flex h-10 w-10 items-center justify-center",children:n.jsx(Ye,{url:e.url,size:128,minSize:80,className:"icon-xl rounded-full"})})]}),n.jsxs("div",{className:"flex flex-col gap-2 overflow-hidden px-4 text-ellipsis",children:[n.jsxs("div",{className:"text-token-text-primary flex items-center gap-1.5 text-xs",children:[n.jsx(Ye,{url:e.url,size:32,minSize:16,className:"icon-xs my-0 rounded-full"}),e.attribution??Nt(e.url)]}),n.jsx("div",{className:"text-token-text-primary decoration-token-link line-clamp-5 text-sm font-medium",children:e.title}),r&&n.jsx("div",{className:"text-token-text-secondary text-xs",children:r})]})]})}const $n=(e,t)=>({url:e.url,title:e.title,section_index:t,link_type:"text",section:"nav_list",section_location:"response"}),Ru="{{.assetPrefix}}/assets/missing-logo-h96s4tk9.webp",En={src:Ru};function Ao({team:e,className:t}){const[s,r]=h.useState(e.logo??En.src),o=()=>{Pt.addError("Unable to load sports widget logo",{name:e.name,logo:e.logo}),r(En.src)};return n.jsx("img",{src:s,alt:e.name,className:t,onError:o})}const nt=["ipl"],An=6,we="home",_e="away";function Du({scheduleRef:e,trackContentReferenceEvent:t}){const[s,r]=h.useState(!0),o=L(),a=e.games.length>0,i=e.league.id,l=si(),d=it();if(h.useEffect(()=>{a&&t("Search Content Reference Shown","search_content_reference_shown","sports",{hasSchedule:!0})},[a]),!a)return null;const u=(o.formatDateToParts(new Date,{timeZoneName:"long"}).find(y=>y.type==="timeZoneName")?.value??Intl.DateTimeFormat().resolvedOptions().timeZone).replace(/Daylight|Standard/g,"");let f=e.games;const x=y=>Math.abs(new Date().getTime()-new Date(y.date).getTime());x(f[0])>x(f[f.length-1])&&(f=f.slice().reverse());const b=s?f.slice(0,An):f;return n.jsxs("div",{className:"not-prose mb-3","data-testid":"sports-schedule-widget",children:[n.jsx("div",{className:"font-semibold",children:n.jsx(T,{id:"LA6z9q",defaultMessage:"{league} Schedule",values:{league:e.league.display_name}})}),n.jsx("div",{className:"text-token-text-secondary text-sm",children:u}),b.length===1?n.jsx("div",{children:n.jsx(vs,{children:n.jsx(Xt.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.2},children:n.jsx("div",{className:"border-token-border-medium mt-3 rounded-xl border py-3",children:n.jsx(zu,{game:b[0],useAlias:nt.includes(i),leagueId:i,activeTeam:b[0]?.active_team??null,isMobile:d})})})})}):n.jsx("div",{className:"grid grid-cols-1 pt-3 lg:grid-cols-2",children:n.jsx(vs,{children:b.map((y,_)=>n.jsx(Xt.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0,transition:{delay:_*.04}},exit:{opacity:0,y:-15},transition:{duration:.2},children:n.jsx("div",{className:N("border-token-border-medium border-b py-3",_%2===0&&"lg:border-e lg:pe-4",_%2===1&&"lg:ps-4",Math.floor(_/2)===Math.ceil(f.length/2)-1&&"lg:border-b-0",_===f.length-1&&"border-b-0"),children:n.jsx(Ou,{game:y,useAlias:(l||d)&&nt.includes(i),leagueId:i,activeTeam:y.active_team??null})})},_))})}),f.length>An&&n.jsx("div",{className:"mt-2 flex items-center justify-between",children:n.jsx("button",{className:"flex items-center text-sm font-semibold",onClick:()=>r(!s),children:s?n.jsx(T,{id:"BH/Ee5",defaultMessage:"Show more {icon}",values:{icon:n.jsx(Gr,{className:"mb-[-2px]"})}}):n.jsx(T,{id:"Z9BlEu",defaultMessage:"Show less {icon}",values:{icon:n.jsx(Jr,{className:"mb-[-2px]"})}})})})]})}function Ou({game:e,useAlias:t=!1,leagueId:s,activeTeam:r}){const o=Lo(e),a=[e.first_team_info,e.second_team_info],i=a.find(u=>u.location===we)??e.first_team_info,l=a.find(u=>u.location===_e)??e.second_team_info,d=o?.team.name===i?.team.name,c=o?.team.name===l?.team.name;return n.jsxs("div",{className:"flex w-full gap-1.5 py-3 text-base",children:[n.jsxs("div",{className:"flex flex-auto flex-col items-start gap-1 pe-3",children:[n.jsx(kt,{team:l.team,isWinner:c,isActive:r===_e,logoSize:"small",useAlias:t}),n.jsx(kt,{team:i.team,isWinner:d,isActive:r===we,logoSize:"small",useAlias:t})]}),n.jsxs("div",{className:N("flex flex-none flex-col items-start gap-1",nt.includes(s)&&"me-4"),children:[n.jsx(St,{score:l.score,scoreSuffix:l.score_suffix,scoreParenthetical:l.score_parenthetical?{message:l.score_parenthetical,position:"right"}:null,isWinner:c,negateScore:_t(s,_e,r)}),n.jsx(St,{score:i.score,scoreSuffix:i.score_suffix,scoreParenthetical:i.score_parenthetical?{message:i.score_parenthetical,position:"right"}:null,isWinner:d,negateScore:_t(s,we,r)})]}),n.jsx("div",{className:"flex min-w-24 flex-none flex-col items-end justify-center gap-1 text-sm",children:n.jsx(Fo,{game:e})})]})}function zu({game:e,useAlias:t=!1,leagueId:s,activeTeam:r,isMobile:o}){const a=Lo(e),i=[e.first_team_info,e.second_team_info],l=i.find(f=>f.location===we)??e.first_team_info,d=i.find(f=>f.location===_e)??e.second_team_info,c=a?.team.name===l?.team.name,u=a?.team.name===d?.team.name;return n.jsxs("div",{className:"flex w-full py-3 text-base",children:[n.jsx("div",{className:"flex flex-1 items-center justify-center px-2",children:n.jsx(kt,{team:d.team,isWinner:u,isActive:r===_e,useAlias:t,layoutDirection:o?"column":"row"})}),n.jsx("div",{className:"ms-2 flex items-center justify-start sm:ms-8",children:n.jsx(St,{score:d.score,scoreSuffix:d.score_suffix,scoreParenthetical:d.score_parenthetical?{message:d.score_parenthetical,position:"bottom"}:null,isWinner:u,negateScore:_t(s,_e,r),className:"text-sm font-semibold sm:text-lg"})}),n.jsx("div",{className:"mx-2 flex w-24 shrink flex-col items-center justify-center gap-1 align-middle text-sm",children:n.jsx(Fo,{game:e})}),n.jsx("div",{className:"me-2 flex items-center justify-end sm:me-8",children:n.jsx(St,{score:l.score,scoreSuffix:l.score_suffix,scoreParenthetical:l.score_parenthetical?{message:l.score_parenthetical,position:"bottom"}:null,isWinner:c,negateScore:_t(s,we,r),className:"text-sm font-semibold sm:text-lg"})}),n.jsx("div",{className:"flex flex-1 items-center justify-center md:px-2",children:n.jsx(kt,{team:l.team,isWinner:c,isActive:r===we,useAlias:t,layoutDirection:o?"column":"row"})})]})}function Io(e){return e.live?"live":new Date(e.date)<new Date?"complete":"scheduled"}function Lo(e){return Io(e)!=="complete"||e.first_team_info.score==null||e.second_team_info.score==null?null:e.first_team_info.score>e.second_team_info.score?e.first_team_info:e.second_team_info}function _t(e,t,s){return nt.includes(e)&&t===we&&s===_e}function kt({team:e,isWinner:t,isActive:s,logoSize:r,useAlias:o=!1,layoutDirection:a="row"}){return n.jsxs("span",{className:N("flex items-center gap-1",t&&"font-semibold","max-w-64 lg:max-w-52 xl:max-w-64",a==="column"&&"flex-col"),children:[e.logo&&n.jsx(Ao,{team:{name:e.name,logo:e.logo},className:N(r==="small"?"w-6":"w-8")}),n.jsx("span",{className:"truncate",children:o?e.alias:e.name}),s&&n.jsx("span",{className:"bg-token-surface-error inline-block h-2 w-2 rounded-full"})]})}function St({score:e,scoreSuffix:t,scoreParenthetical:s,isWinner:r,negateScore:o=!1,className:a}){const i=L();return e==null?null:n.jsxs("span",{className:N(r&&"font-semibold",a),children:[o?i.formatMessage({id:"sports.dash",defaultMessage:"-"}):e,t&&!o&&n.jsx("span",{children:t}),s&&!o&&n.jsx("span",{className:N("text-token-text-secondary font-normal",s.position==="right"&&"ms-1",s.position==="bottom"&&"mx-auto block text-center"),children:`(${s.message})`})]})}function Fo({game:e}){const t=L();switch(Io(e)){case"live":return n.jsxs(n.Fragment,{children:[n.jsx(Bu,{}),n.jsx("div",{children:e.details})]});case"complete":return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-semibold",children:n.jsx(T,{id:"q/iMZL",defaultMessage:"Final"})}),n.jsx("div",{className:"text-token-text-secondary",children:Zt(t,new Date(e.date))})]});case"scheduled":{const s=new Date(e.date);return isNaN(s.getTime())?null:n.jsxs(n.Fragment,{children:[n.jsx("div",{children:Zt(t,s)}),n.jsx("div",{className:"text-token-text-secondary",children:t.formatDate(s,{timeStyle:"short"})})]})}}}function Bu(){return n.jsx("div",{className:"bg-token-surface-error rounded-[4px] px-1.5 py-1 text-xs font-semibold text-white",children:n.jsx(T,{id:"vObALn",defaultMessage:"Live"})})}function Hu({standingsRef:e,trackContentReferenceEvent:t}){const[s,r]=h.useState(0),o=e.conferences.length>0,a=it(),i=e.league.id;h.useEffect(()=>{o&&t("Search Content Reference Shown","search_content_reference_shown","sports",{hasStandings:!0})},[o]);const l=e.conferences[s],d=e.conferences.length>1?e.conferences.map((c,u)=>n.jsx("button",{className:N(s===u?"text-token-text-primary":"text-token-text-tertiary","text-sm font-semibold"),onClick:()=>r(u),children:c.name},c.name)):null;return n.jsxs("div",{"data-testid":"sports-standings-widget",children:[d&&n.jsx("div",{className:"flex gap-4",children:d}),n.jsx("div",{className:"mt-3",children:l.divisions.map(c=>c.name?n.jsx("div",{className:"mt-3",children:n.jsx(In,{division:c,teamsColumnHeader:c.name})},c.name):n.jsx(In,{division:c,useAlias:a&&nt.includes(i)}))})]})}function In({division:e,teamsColumnHeader:t,useAlias:s}){const r=e.headers.map(o=>o.key);return n.jsxs(J.Root,{size:"compact",className:"not-prose",children:[n.jsxs(J.Header,{children:[n.jsx(Wu,{children:t??n.jsx(T,{id:"kKSGje",defaultMessage:"Team"})}),e.headers.map(o=>n.jsx(Ro,{textAlign:"center",className:"min-w-11 px-0!",children:n.jsx(Ln,{data:o})},o.key))]}),n.jsx(J.Body,{children:e.teams.map(({team:o,data:a},i)=>{const l=a.reduce((d,c)=>(d[c.key]=c,d),{});return n.jsxs(J.Row,{children:[n.jsx(J.Cell,{className:"w-full border-0! py-0! ps-0!",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-token-text-tertiary me-2 w-4 whitespace-nowrap tabular-nums",children:i+1}),n.jsxs("div",{className:"flex items-center justify-start gap-2",children:[n.jsx(Ao,{team:o,className:"w-6"}),n.jsx("span",{className:"text-base whitespace-nowrap",children:s?o.alias:o.name})]})]})}),r.map(d=>n.jsx(J.Cell,{className:"min-w-11 border-0! px-0! py-0! text-start whitespace-nowrap tabular-nums",textAlign:"center",children:n.jsx(Ln,{data:l[d]})},d))]},o.name)})})]})}function Ln({data:e}){switch(e.type){case"text":return n.jsx(n.Fragment,{children:e.text});default:return n.jsx(n.Fragment,{children:e.alt})}}const Ro=fs(J.HeaderCell)`text-token-text-secondary font-normal! text-sm static! bg-transparent! border-token-border-default! border-t-0! border-s-0! border-e-0!`,Wu=fs(Ro)`text-token-text-primary ps-0!`;function Uu({metadata:e,trackContentReferenceEvent:t}){h.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]);const s=L(),r=Ke(e.utc_time,e.utc_offset),o=s.formatDate(r,{hour:"numeric",minute:"numeric"});return n.jsx("span",{children:o})}function Vu({metadata:e,trackContentReferenceEvent:t}){return h.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]),n.jsx("div",{children:e.url?n.jsx(Zr,{webpageItem:{url:e.url,title:e.description,pub_date:null,snippet:"",attributions:null},className:"inline-flex flex-col",children:n.jsx(xe,{href:e.url,className:"font-semibold!",children:e.description})}):n.jsx("div",{className:"font-semibold!",children:e.description})})}function qu({videoId:e,title:t="YouTube video player",fallbackText:s,cookieLess:r=!0,timeoutMs:o=5e3,className:a=""}){const i=h.useRef(null),l=h.useRef(null),d=h.useRef(!1),[c,u]=h.useState("idle"),f=()=>{d.current=!0,l.current&&(clearTimeout(l.current),l.current=null)};if(h.useEffect(()=>{u("loading"),d.current=!1;let b=null;return Xu().then(()=>{if(!i.current)return;i.current.textContent="",b=document.createElement("div"),b.style.width="200px",b.style.height="150px",i.current.appendChild(b),l.current=window.setTimeout(()=>{d.current||u("timeout")},o);const y=r?"https://www.youtube-nocookie.com":"https://www.youtube.com";new window.YT.Player(b,{width:200,height:150,videoId:e,host:y,playerVars:{rel:0,playsinline:1,origin:window.location.origin},events:{onReady:()=>{f(),u("ready")},onError:()=>{f(),u("error")}}})}).catch(()=>u("error")),()=>{f()}},[e,r,o]),c==="error"||c==="timeout")return n.jsx("a",{href:`https://www.youtube.com/watch?v=${e}`,target:"_blank",rel:"noopener noreferrer",children:s});const x=r?"https://www.youtube-nocookie.com":"https://www.youtube.com";return n.jsxs(n.Fragment,{children:[n.jsx("div",{ref:i,"aria-hidden":!0,inert:!0,className:"hidden"}),n.jsx("iframe",{src:`${x}/embed/${e}`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0,className:a,title:t})]})}function Xu(){return new Promise(e=>{if(window.YT?.Player)return e();const t=window.onYouTubeIframeAPIReady;if(window.onYouTubeIframeAPIReady=()=>{t?.(),e(),window.onYouTubeIframeAPIReady=t||(()=>{})},!document.querySelector("script[src*='youtube.com/iframe_api']")){const s=document.createElement("script");s.src="https://www.youtube.com/iframe_api",document.head.appendChild(s)}})}function Gu({url:e,className:t,iframeClassName:s,iframeTitle:r}){const o=K(),a=B(o,"1256582879");let i;const l=N("aspect-video w-full",s),d=Ju(e);d&&(i=a?n.jsx(qu,{className:l,videoId:d,title:r,fallbackText:r??n.jsx(T,{id:"sonic.video.youtube.title",defaultMessage:"YouTube video link"}),cookieLess:!1}):n.jsx(Zu,{videoId:d,className:l,iframeTitle:r}));const c=Yu(e);return c&&(i=n.jsx(Ku,{videoId:c,className:l,iframeTitle:r})),i?n.jsx("div",{className:t,children:i}):null}function Ju(e){const t=/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|shorts\/|embed\/|v\/|live\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,s=e.match(t);return s?s[1]:null}function Zu({videoId:e,className:t,iframeTitle:s}){return n.jsx("iframe",{className:t,src:`https://www.youtube.com/embed/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0,title:s})}function Yu(e){const t=/vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/[^/]+\/videos\/|video\/|)(\d+)/,s=e.match(t);return s?s[1]:null}function Ku({videoId:e,className:t,iframeTitle:s}){return n.jsx(n.Fragment,{children:n.jsx("iframe",{className:t,src:`https://player.vimeo.com/video/${e}`,frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,title:s})})}function Qu({video:e,trackContentReferenceEvent:t}){const s={url:e.url,title:e.title};return h.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type,s)},[]),e.url==null||e.url===""?null:n.jsx("div",{className:"not-prose mb-3 flex flex-col gap-4 text-base","data-testid":"video-widget",children:n.jsx(Gu,{url:e.url,iframeClassName:"rounded-lg"})})}const ef="webp",tf=96,sf=96,nf="srgb",of=4,rf="uchar",af=288,lf=!1,cf=!1,df=!0,uf="{{.assetPrefix}}/assets/cloud-foggy-o4a3hmky.webp",ff={format:ef,width:tf,height:sf,space:nf,channels:of,depth:rf,density:af,isProgressive:lf,hasProfile:cf,hasAlpha:df,src:uf},mf="webp",hf=96,pf=96,gf="srgb",xf=4,yf="uchar",bf=288,vf=!1,wf=!1,_f=!0,kf="{{.assetPrefix}}/assets/cloudy-co8vwrk7.webp",Sf={format:mf,width:hf,height:pf,space:gf,channels:xf,depth:yf,density:bf,isProgressive:vf,hasProfile:wf,hasAlpha:_f,src:kf},Cf="webp",jf=96,Nf=96,Mf="srgb",Tf=4,Pf="uchar",$f=288,Ef=!1,Af=!1,If=!0,Lf="{{.assetPrefix}}/assets/heavy-snow-mke52kag.webp",Ff={format:Cf,width:jf,height:Nf,space:Mf,channels:Tf,depth:Pf,density:$f,isProgressive:Ef,hasProfile:Af,hasAlpha:If,src:Lf},Rf="webp",Df=96,Of=96,zf="srgb",Bf=4,Hf="uchar",Wf=288,Uf=!1,Vf=!1,qf=!0,Xf="{{.assetPrefix}}/assets/light-snow-mcy1l7t9.webp",Gf={format:Rf,width:Df,height:Of,space:zf,channels:Bf,depth:Hf,density:Wf,isProgressive:Uf,hasProfile:Vf,hasAlpha:qf,src:Xf},Jf="webp",Zf=96,Yf=96,Kf="srgb",Qf=4,em="uchar",tm=288,sm=!1,nm=!1,om=!0,rm="{{.assetPrefix}}/assets/moon-drizzle-cplxr2ub.webp",am={format:Jf,width:Zf,height:Yf,space:Kf,channels:Qf,depth:em,density:tm,isProgressive:sm,hasProfile:nm,hasAlpha:om,src:rm},im="webp",lm=96,cm=96,dm="srgb",um=4,fm="uchar",mm=288,hm=!1,pm=!1,gm=!0,xm="{{.assetPrefix}}/assets/moon-hazy-jvgt25bp.webp",ym={format:im,width:lm,height:cm,space:dm,channels:um,depth:fm,density:mm,isProgressive:hm,hasProfile:pm,hasAlpha:gm,src:xm},bm="webp",vm=96,wm=96,_m="srgb",km=4,Sm="uchar",Cm=288,jm=!1,Nm=!1,Mm=!0,Tm="{{.assetPrefix}}/assets/moon-mostly-cloudy-cia3do0v.webp",Pm={format:bm,width:vm,height:wm,space:_m,channels:km,depth:Sm,density:Cm,isProgressive:jm,hasProfile:Nm,hasAlpha:Mm,src:Tm},$m="webp",Em=96,Am=96,Im="srgb",Lm=4,Fm="uchar",Rm=288,Dm=!1,Om=!1,zm=!0,Bm="{{.assetPrefix}}/assets/moon-mostly-sunny-n3mh1b6a.webp",Hm={format:$m,width:Em,height:Am,space:Im,channels:Lm,depth:Fm,density:Rm,isProgressive:Dm,hasProfile:Om,hasAlpha:zm,src:Bm},Wm="webp",Um=96,Vm=96,qm="srgb",Xm=4,Gm="uchar",Jm=288,Zm=!1,Ym=!1,Km=!0,Qm="{{.assetPrefix}}/assets/moon-shower-ntzhti9o.webp",eh={format:Wm,width:Um,height:Vm,space:qm,channels:Xm,depth:Gm,density:Jm,isProgressive:Zm,hasProfile:Ym,hasAlpha:Km,src:Qm},th="webp",sh=96,nh=96,oh="srgb",rh=4,ah="uchar",ih=288,lh=!1,ch=!1,dh=!0,uh="{{.assetPrefix}}/assets/moon-sunny-eg2emh4d.webp",fh={format:th,width:sh,height:nh,space:oh,channels:rh,depth:ah,density:ih,isProgressive:lh,hasProfile:ch,hasAlpha:dh,src:uh},mh="webp",hh=96,ph=96,gh="srgb",xh=4,yh="uchar",bh=288,vh=!1,wh=!1,_h=!0,kh="{{.assetPrefix}}/assets/rain-thunder-bx7a0l5g.webp",Sh={format:mh,width:hh,height:ph,space:gh,channels:xh,depth:yh,density:bh,isProgressive:vh,hasProfile:wh,hasAlpha:_h,src:kh},Ch="webp",jh=96,Nh=96,Mh="srgb",Th=4,Ph="uchar",$h=288,Eh=!1,Ah=!1,Ih=!0,Lh="{{.assetPrefix}}/assets/rain-cxs76xuj.webp",Fh={format:Ch,width:jh,height:Nh,space:Mh,channels:Th,depth:Ph,density:$h,isProgressive:Eh,hasProfile:Ah,hasAlpha:Ih,src:Lh},Rh="webp",Dh=96,Oh=96,zh="srgb",Bh=4,Hh="uchar",Wh=288,Uh=!1,Vh=!1,qh=!0,Xh="{{.assetPrefix}}/assets/sleet-gc63vwmo.webp",Gh={format:Rh,width:Dh,height:Oh,space:zh,channels:Bh,depth:Hh,density:Wh,isProgressive:Uh,hasProfile:Vh,hasAlpha:qh,src:Xh},Jh="webp",Zh=96,Yh=96,Kh="srgb",Qh=4,ep="uchar",tp=288,sp=!1,np=!1,op=!0,rp="{{.assetPrefix}}/assets/snow-d0k6tmmc.webp",ap={format:Jh,width:Zh,height:Yh,space:Kh,channels:Qh,depth:ep,density:tp,isProgressive:sp,hasProfile:np,hasAlpha:op,src:rp},ip="webp",lp=96,cp=96,dp="srgb",up=4,fp="uchar",mp=288,hp=!1,pp=!1,gp=!0,xp="{{.assetPrefix}}/assets/sun-drizzle-g94obr5e.webp",yp={format:ip,width:lp,height:cp,space:dp,channels:up,depth:fp,density:mp,isProgressive:hp,hasProfile:pp,hasAlpha:gp,src:xp},bp="webp",vp=96,wp=96,_p="srgb",kp=4,Sp="uchar",Cp=288,jp=!1,Np=!1,Mp=!0,Tp="{{.assetPrefix}}/assets/sun-hazy-c3z1j0hy.webp",Pp={format:bp,width:vp,height:wp,space:_p,channels:kp,depth:Sp,density:Cp,isProgressive:jp,hasProfile:Np,hasAlpha:Mp,src:Tp},$p="webp",Ep=96,Ap=96,Ip="srgb",Lp=4,Fp="uchar",Rp=288,Dp=!1,Op=!1,zp=!0,Bp="{{.assetPrefix}}/assets/sun-mostly-cloudy-d4o4zkga.webp",Hp={format:$p,width:Ep,height:Ap,space:Ip,channels:Lp,depth:Fp,density:Rp,isProgressive:Dp,hasProfile:Op,hasAlpha:zp,src:Bp},Wp="webp",Up=96,Vp=96,qp="srgb",Xp=4,Gp="uchar",Jp=288,Zp=!1,Yp=!1,Kp=!0,Qp="{{.assetPrefix}}/assets/sun-mostly-sunny-livrdkgu.webp",eg={format:Wp,width:Up,height:Vp,space:qp,channels:Xp,depth:Gp,density:Jp,isProgressive:Zp,hasProfile:Yp,hasAlpha:Kp,src:Qp},tg="webp",sg=96,ng=96,og="srgb",rg=4,ag="uchar",ig=288,lg=!1,cg=!1,dg=!0,ug="{{.assetPrefix}}/assets/sun-shower-lvtjthah.webp",fg={format:tg,width:sg,height:ng,space:og,channels:rg,depth:ag,density:ig,isProgressive:lg,hasProfile:cg,hasAlpha:dg,src:ug},mg="webp",hg=96,pg=96,gg="srgb",xg=4,yg="uchar",bg=288,vg=!1,wg=!1,_g=!0,kg="{{.assetPrefix}}/assets/sun-sunny-kqjpjzd8.webp",Sg={format:mg,width:hg,height:pg,space:gg,channels:xg,depth:yg,density:bg,isProgressive:vg,hasProfile:wg,hasAlpha:_g,src:kg},Cg="webp",jg=96,Ng=96,Mg="srgb",Tg=4,Pg="uchar",$g=288,Eg=!1,Ag=!1,Ig=!0,Lg="{{.assetPrefix}}/assets/thunder-jgjqg9ai.webp",Fg={format:Cg,width:jg,height:Ng,space:Mg,channels:Tg,depth:Pg,density:$g,isProgressive:Eg,hasProfile:Ag,hasAlpha:Ig,src:Lg},Rg="webp",Dg=96,Og=96,zg="srgb",Bg=4,Hg="uchar",Wg=288,Ug=!1,Vg=!1,qg=!0,Xg="{{.assetPrefix}}/assets/tornado-opa24tq3.webp",Gg={format:Rg,width:Dg,height:Og,space:zg,channels:Bg,depth:Hg,density:Wg,isProgressive:Ug,hasProfile:Vg,hasAlpha:qg,src:Xg},Jg="webp",Zg=96,Yg=96,Kg="srgb",Qg=4,ex="uchar",tx=288,sx=!1,nx=!1,ox=!0,rx="{{.assetPrefix}}/assets/windy-mw0a3u21.webp",ax={format:Jg,width:Zg,height:Yg,space:Kg,channels:Qg,depth:ex,density:tx,isProgressive:sx,hasProfile:nx,hasAlpha:ox,src:rx},ix="webp",lx=96,cx=96,dx="srgb",ux=4,fx="uchar",mx=288,hx=!1,px=!1,gx=!0,xx="{{.assetPrefix}}/assets/cloud-foggy-fhg0jn0w.webp",yx={format:ix,width:lx,height:cx,space:dx,channels:ux,depth:fx,density:mx,isProgressive:hx,hasProfile:px,hasAlpha:gx,src:xx},bx="webp",vx=96,wx=96,_x="srgb",kx=4,Sx="uchar",Cx=288,jx=!1,Nx=!1,Mx=!0,Tx="{{.assetPrefix}}/assets/cloudy-disd26f3.webp",Px={format:bx,width:vx,height:wx,space:_x,channels:kx,depth:Sx,density:Cx,isProgressive:jx,hasProfile:Nx,hasAlpha:Mx,src:Tx},$x="webp",Ex=96,Ax=96,Ix="srgb",Lx=4,Fx="uchar",Rx=288,Dx=!1,Ox=!1,zx=!0,Bx="{{.assetPrefix}}/assets/heavy-snow-g6jjwo2d.webp",Hx={format:$x,width:Ex,height:Ax,space:Ix,channels:Lx,depth:Fx,density:Rx,isProgressive:Dx,hasProfile:Ox,hasAlpha:zx,src:Bx},Wx="webp",Ux=96,Vx=96,qx="srgb",Xx=4,Gx="uchar",Jx=288,Zx=!1,Yx=!1,Kx=!0,Qx="{{.assetPrefix}}/assets/light-snow-iz0efpkh.webp",e1={format:Wx,width:Ux,height:Vx,space:qx,channels:Xx,depth:Gx,density:Jx,isProgressive:Zx,hasProfile:Yx,hasAlpha:Kx,src:Qx},t1="webp",s1=96,n1=96,o1="srgb",r1=4,a1="uchar",i1=288,l1=!1,c1=!1,d1=!0,u1="{{.assetPrefix}}/assets/moon-drizzle-b1nfv39c.webp",f1={format:t1,width:s1,height:n1,space:o1,channels:r1,depth:a1,density:i1,isProgressive:l1,hasProfile:c1,hasAlpha:d1,src:u1},m1="webp",h1=96,p1=96,g1="srgb",x1=4,y1="uchar",b1=288,v1=!1,w1=!1,_1=!0,k1="{{.assetPrefix}}/assets/moon-hazy-nfnzea7a.webp",S1={format:m1,width:h1,height:p1,space:g1,channels:x1,depth:y1,density:b1,isProgressive:v1,hasProfile:w1,hasAlpha:_1,src:k1},C1="webp",j1=96,N1=96,M1="srgb",T1=4,P1="uchar",$1=288,E1=!1,A1=!1,I1=!0,L1="{{.assetPrefix}}/assets/moon-mostly-cloudy-e56e3z55.webp",F1={format:C1,width:j1,height:N1,space:M1,channels:T1,depth:P1,density:$1,isProgressive:E1,hasProfile:A1,hasAlpha:I1,src:L1},R1="webp",D1=96,O1=96,z1="srgb",B1=4,H1="uchar",W1=288,U1=!1,V1=!1,q1=!0,X1="{{.assetPrefix}}/assets/moon-mostly-sunny-ffu4gzf4.webp",G1={format:R1,width:D1,height:O1,space:z1,channels:B1,depth:H1,density:W1,isProgressive:U1,hasProfile:V1,hasAlpha:q1,src:X1},J1="webp",Z1=96,Y1=96,K1="srgb",Q1=4,e0="uchar",t0=288,s0=!1,n0=!1,o0=!0,r0="{{.assetPrefix}}/assets/moon-shower-e5dy9u48.webp",a0={format:J1,width:Z1,height:Y1,space:K1,channels:Q1,depth:e0,density:t0,isProgressive:s0,hasProfile:n0,hasAlpha:o0,src:r0},i0="webp",l0=96,c0=96,d0="srgb",u0=4,f0="uchar",m0=288,h0=!1,p0=!1,g0=!0,x0="{{.assetPrefix}}/assets/moon-sunny-d9o08xiw.webp",y0={format:i0,width:l0,height:c0,space:d0,channels:u0,depth:f0,density:m0,isProgressive:h0,hasProfile:p0,hasAlpha:g0,src:x0},b0="webp",v0=96,w0=96,_0="srgb",k0=4,S0="uchar",C0=288,j0=!1,N0=!1,M0=!0,T0="{{.assetPrefix}}/assets/rain-thunder-eplemvu1.webp",P0={format:b0,width:v0,height:w0,space:_0,channels:k0,depth:S0,density:C0,isProgressive:j0,hasProfile:N0,hasAlpha:M0,src:T0},$0="webp",E0=96,A0=96,I0="srgb",L0=4,F0="uchar",R0=288,D0=!1,O0=!1,z0=!0,B0="{{.assetPrefix}}/assets/rain-ogayr6kt.webp",H0={format:$0,width:E0,height:A0,space:I0,channels:L0,depth:F0,density:R0,isProgressive:D0,hasProfile:O0,hasAlpha:z0,src:B0},W0="webp",U0=96,V0=96,q0="srgb",X0=4,G0="uchar",J0=288,Z0=!1,Y0=!1,K0=!0,Q0="{{.assetPrefix}}/assets/sleet-o8noil7l.webp",ey={format:W0,width:U0,height:V0,space:q0,channels:X0,depth:G0,density:J0,isProgressive:Z0,hasProfile:Y0,hasAlpha:K0,src:Q0},ty="webp",sy=96,ny=96,oy="srgb",ry=4,ay="uchar",iy=288,ly=!1,cy=!1,dy=!0,uy="{{.assetPrefix}}/assets/snow-lq4cl3uc.webp",fy={format:ty,width:sy,height:ny,space:oy,channels:ry,depth:ay,density:iy,isProgressive:ly,hasProfile:cy,hasAlpha:dy,src:uy},my="webp",hy=96,py=96,gy="srgb",xy=4,yy="uchar",by=288,vy=!1,wy=!1,_y=!0,ky="{{.assetPrefix}}/assets/sun-drizzle-htsohv65.webp",Sy={format:my,width:hy,height:py,space:gy,channels:xy,depth:yy,density:by,isProgressive:vy,hasProfile:wy,hasAlpha:_y,src:ky},Cy="webp",jy=96,Ny=96,My="srgb",Ty=4,Py="uchar",$y=288,Ey=!1,Ay=!1,Iy=!0,Ly="{{.assetPrefix}}/assets/sun-hazy-nfj7clcd.webp",Fy={format:Cy,width:jy,height:Ny,space:My,channels:Ty,depth:Py,density:$y,isProgressive:Ey,hasProfile:Ay,hasAlpha:Iy,src:Ly},Ry="webp",Dy=96,Oy=96,zy="srgb",By=4,Hy="uchar",Wy=288,Uy=!1,Vy=!1,qy=!0,Xy="{{.assetPrefix}}/assets/sun-mostly-cloudy-e3pqqgs7.webp",Gy={format:Ry,width:Dy,height:Oy,space:zy,channels:By,depth:Hy,density:Wy,isProgressive:Uy,hasProfile:Vy,hasAlpha:qy,src:Xy},Jy="webp",Zy=96,Yy=96,Ky="srgb",Qy=4,eb="uchar",tb=288,sb=!1,nb=!1,ob=!0,rb="{{.assetPrefix}}/assets/sun-mostly-sunny-o99k1c7a.webp",ab={format:Jy,width:Zy,height:Yy,space:Ky,channels:Qy,depth:eb,density:tb,isProgressive:sb,hasProfile:nb,hasAlpha:ob,src:rb},ib="webp",lb=96,cb=96,db="srgb",ub=4,fb="uchar",mb=288,hb=!1,pb=!1,gb=!0,xb="{{.assetPrefix}}/assets/sun-shower-ldwl4jbp.webp",yb={format:ib,width:lb,height:cb,space:db,channels:ub,depth:fb,density:mb,isProgressive:hb,hasProfile:pb,hasAlpha:gb,src:xb},bb="webp",vb=96,wb=96,_b="srgb",kb=4,Sb="uchar",Cb=!1,jb=!1,Nb=!0,Mb="{{.assetPrefix}}/assets/sun-sunny-kqjpjzd8.webp",Tb={format:bb,width:vb,height:wb,space:_b,channels:kb,depth:Sb,isProgressive:Cb,hasProfile:jb,hasAlpha:Nb,src:Mb},Pb="webp",$b=96,Eb=96,Ab="srgb",Ib=4,Lb="uchar",Fb=288,Rb=!1,Db=!1,Ob=!0,zb="{{.assetPrefix}}/assets/thunder-xzn1cku3.webp",Bb={format:Pb,width:$b,height:Eb,space:Ab,channels:Ib,depth:Lb,density:Fb,isProgressive:Rb,hasProfile:Db,hasAlpha:Ob,src:zb},Hb="webp",Wb=96,Ub=96,Vb="srgb",qb=4,Xb="uchar",Gb=288,Jb=!1,Zb=!1,Yb=!0,Kb="{{.assetPrefix}}/assets/tornado-diqu61wg.webp",Qb={format:Hb,width:Wb,height:Ub,space:Vb,channels:qb,depth:Xb,density:Gb,isProgressive:Jb,hasProfile:Zb,hasAlpha:Yb,src:Kb},ev="webp",tv=96,sv=96,nv="srgb",ov=4,rv="uchar",av=288,iv=!1,lv=!1,cv=!0,dv="{{.assetPrefix}}/assets/windy-n2v8wtyp.webp",uv={format:ev,width:tv,height:sv,space:nv,channels:ov,depth:rv,density:av,isProgressive:iv,hasProfile:lv,hasAlpha:cv,src:dv},fv={foggy:{default:ff},cloudy:{default:Sf},"heavy-snow":{default:Ff},"light-snow":{default:Gf},sleet:{default:Gh},drizzle:{default:yp,night:am},hazy:{default:Pp,night:ym},"mostly-cloudy":{default:Hp,night:Pm},"mostly-sunny":{default:eg,night:Hm},shower:{default:fg,night:eh},sunny:{default:Sg,night:fh},"rain-thunder":{default:Sh},rain:{default:Fh},snow:{default:ap},thunder:{default:Fg},tornado:{default:Gg},windy:{default:ax}},mv={foggy:{default:yx},cloudy:{default:Px},"heavy-snow":{default:Hx},"light-snow":{default:e1},sleet:{default:ey},drizzle:{default:Sy,night:f1},hazy:{default:Fy,night:S1},"mostly-cloudy":{default:Gy,night:F1},"mostly-sunny":{default:ab,night:G1},shower:{default:yb,night:a0},sunny:{default:Tb,night:y0},"rain-thunder":{default:P0},rain:{default:H0},snow:{default:fy},thunder:{default:Bb},tornado:{default:Qb},windy:{default:uv}};function hv({weatherCode:e,isDarkMode:t,isNight:s}){const r=t?mv:fv,o=pv(e),a=r[o];return a.night&&s?a.night:a.default}function pv(e){switch(e){case 1:case 33:return"sunny";case 2:case 3:case 34:case 35:case 36:return"mostly-sunny";case 4:case 6:case 13:case 14:case 38:return"mostly-cloudy";case 5:case 37:return"hazy";case 7:case 8:return"cloudy";case 11:return"foggy";case 12:case 39:case 40:return"shower";case 15:case 16:case 17:case 41:case 42:return"thunder";case 18:return"rain";case 19:case 20:case 21:case 43:return"light-snow";case 22:case 23:case 44:return"snow";case 24:case 25:case 26:case 29:return"sleet";case 32:return"windy";default:return"cloudy"}}const gv="C";function xv(e,t){return Math.round(e==="F"?t*9/5+32:(t-32)*5/9)}function Fn(e,t,s=gv){return e===s?`${Math.round(t)}°`:`${xv(e,t)}°`}const yv=7,Rn=8,bv=h.memo(function({weatherResults:t,dateRange:s,turnIndex:r,trackContentReferenceEvent:o}){const[a,i]=Pv(),l=_v(t);h.useEffect(()=>{o("Search Content Reference Shown","search_content_reference_shown","forecast")},[o]);const{daily:d,hourly:c,historical:u}=t;let f="daily";if(s||c&&d.length<2)f="hourly";else if(d.length>0)f="daily";else if(u&&u?.length>0)f="historical";else return null;return n.jsxs("div",{className:"relative","data-testid":"weather-widget",children:[l?n.jsxs(n.Fragment,{children:[n.jsx(wv,{weatherResults:t}),n.jsx(kv,{weatherResults:t,temperatureUnit:a,setTemperatureUnit:i})]}):n.jsx("div",{className:"bg-token-main-surface-primary absolute end-0 top-3 z-10 rounded-sm",children:n.jsx(Do,{onTemperatureUnitChange:i,temperatureUnit:a})}),n.jsx(Nv,{turnIndex:r}),f==="hourly"&&n.jsx(Sv,{weatherResults:t,temperatureUnit:a,dateRange:s}),f==="daily"&&n.jsx(Cv,{dailyForecast:d.slice(0,yv),temperatureUnit:a}),f==="historical"&&n.jsx(jv,{historical:u,temperatureUnit:a})]})});function vv({weatherAlert:e}){const[t,s]=h.useState(!1),r=L(),o=ao(),a=fe(e.start_timestamp,e.utc_offset_sec),i=e.end_timestamp?fe(e.end_timestamp,e.utc_offset_sec):null,l=n.jsxs(n.Fragment,{children:[n.jsx("div",{children:n.jsx(T,{id:"JnuGPS",defaultMessage:"{start}{separator}{end}",values:{start:r.formatDate(a,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}),separator:i?" - ":"",end:i?r.formatDate(i,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):""}})}),n.jsx("div",{children:e.summary})]});return n.jsxs("button",{className:"my-2 flex w-full flex-col gap-2 rounded-xl border border-red-200 bg-red-100 px-4 py-3 text-start text-sm text-red-800",onClick:()=>s(!t),children:[n.jsxs("div",{className:"flex w-full items-center gap-4",children:[n.jsx(ii,{className:"h-9 w-9 shrink-0"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("div",{className:"font-bold",children:n.jsx(T,{id:"y+fy/l",defaultMessage:"Severe Weather: {name}",values:{name:e.name}})}),o&&l]}),n.jsx("div",{className:"grow"}),n.jsx("div",{className:"opacity-30",children:t?n.jsx(rl,{className:"icon-lg"}):n.jsx(ol,{className:"icon-lg"})})]}),t&&e.details&&n.jsxs(n.Fragment,{children:[!o&&l,n.jsx("div",{className:"mt-1 whitespace-pre-wrap",children:e.details.trim()})]})]})}function wv({weatherResults:e}){const{severe:t}=e;return t?n.jsx("div",{className:"my-2",children:t.map((s,r)=>n.jsx(vv,{weatherAlert:s},r))}):null}function _v(e){const{historical:t,daily:s,hourly:r,current:o}=e;if(!o)return!1;let a=!1;const i=fe(o.timestamp,o.utc_offset_sec);for(const l of[t,s,r])l&&(a=a||l?.some(d=>oi(i,fe(d.timestamp,d.utc_offset_sec))));return a}function kv({weatherResults:e,temperatureUnit:t,setTemperatureUnit:s}){const r=L(),{current:o}=e;if(!o)return null;const a=o.temperature.current,i=o.description,l=a!=null&&i&&" · ";return n.jsxs("div",{className:"not-prose flex items-center gap-4",children:[n.jsxs("div",{className:"grow",children:[n.jsxs("div",{className:"text-lg font-semibold",children:[a!=null&&n.jsx(T,{id:"FiwByI",defaultMessage:"Currently {temperature}",values:{temperature:ke(r,a,t)}}),l,i.description]}),n.jsx("div",{className:"text-token-text-secondary",children:Tv(e.location)})]}),n.jsxs("div",{className:"flex",children:[n.jsx(Do,{onTemperatureUnitChange:s,temperatureUnit:t}),n.jsx(ys,{weatherDescriptionData:i,isNight:o.night})]})]})}function xs({children:e}){return n.jsx("div",{className:"no-scrollbar not-prose mt-1 overflow-auto sm:overflow-hidden",children:n.jsx(J.Root,{className:"min-w-0",children:n.jsx(J.Body,{className:"border-token-border-medium border-b-[0.5px] [&_tr:last-child]:border-b-0",children:e})})})}function Sv({weatherResults:e,temperatureUnit:t,dateRange:s}){const r=L(),{hourly:o,current:a}=e;let i=o??[];s&&(i=i.filter(u=>u.timestamp>=s.start_timestamp&&u.timestamp<s.end_timestamp));const[l,d]=h.useState(!1),c=i.length>Rn;if(!l&&c){const u=i[0],f=fe(u.timestamp,u.utc_offset_sec);let x=!1;if(a){const b=fe(a.timestamp,a.utc_offset_sec);f.getTime()-b.getTime()>8*60*60*1e3&&i.length>18&&(i=i.slice(7,18),x=!0)}x||(i=i.slice(0,Rn))}return n.jsxs(xs,{children:[i.map((u,f)=>n.jsxs(J.Row,{children:[n.jsxs(ne,{className:"w-44",children:[n.jsx(ys,{weatherDescriptionData:u.description,isNight:u.night,size:"small"}),n.jsx("div",{className:"ms-3 whitespace-nowrap",children:n.jsx("span",{className:"lowercase",children:Mv(r,u)})})]}),n.jsx(ne,{className:"w-[60px] tabular-nums",children:n.jsx("div",{children:ke(r,u.temperature.current,t)})}),n.jsx(ne,{children:u.description.description})]},f)),c&&n.jsx(J.Row,{children:n.jsx(ne,{className:"w-44",children:n.jsx(oe,{color:"secondary",onClick:()=>d(!l),size:"small",children:l?n.jsx(T,{id:"KoC8Ym",defaultMessage:"Show less"}):n.jsx(T,{id:"X8F8Y/",defaultMessage:"Show more"})})})})]})}function Cv({dailyForecast:e,temperatureUnit:t}){const s=L();return n.jsx(xs,{children:e.map((r,o)=>n.jsxs(J.Row,{children:[n.jsxs(ne,{className:"w-[7.5rem] min-w-[7.5rem]",children:[n.jsx(ys,{weatherDescriptionData:r.description,isNight:r.night,size:"small"}),n.jsx("div",{className:"ms-3 whitespace-nowrap",children:Zt(s,fe(r.timestamp,r.utc_offset_sec))})]}),n.jsxs(ne,{className:"tabular-nums",children:[n.jsx("div",{children:ke(s,r.temperature.max,t)}),n.jsx("div",{className:"text-token-text-secondary ms-1",children:ke(s,r.temperature.min,t)})]}),n.jsx(ne,{className:"min-w-80",children:r.description.description})]},o))})}function jv({historical:e,temperatureUnit:t}){const s=L();return e?n.jsx(xs,{children:e.map((r,o)=>{const a=fe(r.timestamp,r.utc_offset_sec);return n.jsxs(J.Row,{children:[n.jsx(ne,{className:"w-[250px]",children:n.jsx("div",{className:"ms-3 whitespace-nowrap",children:s.formatDate(a,{weekday:"long",month:"short",day:"numeric"})})}),n.jsx(ne,{className:"tabular-nums",children:r.temperature.max&&r.temperature.min?n.jsxs(n.Fragment,{children:[n.jsx("div",{children:ke(s,r.temperature.max,t)}),n.jsx("div",{className:"text-token-text-secondary ms-1",children:ke(s,r.temperature.min,t)})]}):n.jsx("div",{children:ke(s,r.temperature.current,t)})}),n.jsx(ne,{})]},o)})}):null}function ne({className:e,children:t}){return n.jsx(J.Cell,{className:N("border-token-border-xlight! border-s-0! border-e-0! py-2! ps-4! pe-3! first:ps-0! last:pe-0!",e),divClassName:"items-start leading-relaxed",children:t})}function Nv({turnIndex:e}){const t=Bi(r=>r.thread?.turns[e]?.use_location),[s]=Ii();return!s.useLocation&&t?n.jsx("div",{className:"mt-3",children:n.jsx(oe,{color:"secondary",icon:Kr,onClick:()=>{Li.setSettingsModalOpen(!0)},children:n.jsx(T,{id:"f47VEc",defaultMessage:"Share precise location"})})}):null}function Do({temperatureUnit:e,onTemperatureUnitChange:t}){const s=r=>e===r?"font-bold":"font-light";return n.jsx(ri,{size:"small",triggerButton:n.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-primary flex items-center justify-center p-1.5",children:n.jsx(Yr,{className:"icon-sm"})}),children:n.jsxs(ai.Item,{onClick:()=>{t(e==="C"?"F":"C")},className:"text-token-text-primary",children:[n.jsx(T,{id:"bQIoe/",defaultMessage:"Temperature"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:s("F"),children:n.jsx(T,{id:"bvDeBB",defaultMessage:"°F"})}),n.jsx("div",{className:"mx-1 h-4 border-s border-gray-300"}),n.jsx("div",{className:s("C"),children:n.jsx(T,{id:"iNiz6O",defaultMessage:"°C"})})]})]})})}function ys({weatherDescriptionData:e,isNight:t=!1,size:s="normal"}){const r=$t(),o=s==="small"?30:50;return n.jsx("img",{draggable:!1,alt:e.description,src:hv({weatherCode:e.id,isDarkMode:r,isNight:t}).src,width:o,height:o})}function Mv(e,t){const s=fe(t.timestamp,t.utc_offset_sec);return e.formatDate(s,{hour:"numeric"})}function ke(e,t,s){return t==null?"-":Fn(s?s??"F":Oo(e),t)}function Oo(e){const t=["en-US","en-BZ","en-BS","en-KY","en-PW"],s=e.locale||"en-US";return t.includes(s)?"F":"C"}function Tv(e){const t=e.name.split(",").map(s=>s.trim());return e.country&&!t.includes(e.country)&&t.push(e.country),t.join(", ")}const Pv=()=>{const e=L(),[t,s]=ni("USER_TEMPERATURE_UNIT",Oo(e),r=>["F","C"].includes(r));return[t,s]};function Dn({contentReference:e,clientThreadId:t,messageId:s,trackContentReferenceEvent:r}){h.useEffect(()=>{r("Entity Anchor Content Reference Shown","entity_anchor_content_reference_shown","entity",{content_reference_start_index:e.start_idx,entity_name:e.name})},[r,e.start_idx,e.name]);const{openThreadSidebar:o}=lt(),{resetSidebarHistory:a}=Xn(),i=Gn();return n.jsx("span",{className:"hover:entity-accent entity-underline inline cursor-pointer align-baseline",onClick:l=>{l.preventDefault(),r("Entity Anchor Content Reference Clicked","entity_anchor_content_reference_clicked","entity",{content_reference_start_index:e.start_idx,entity_name:e.name}),t&&(i||a(),o({type:"entity",clientThreadId:t,debugThreadId:void 0,messageId:s,contentReferenceStartIndex:e.start_idx,query:e.name,category:e.category}))},children:n.jsx("span",{className:"whitespace-normal",children:e.name})})}const $v=to(()=>ds(()=>import("./mkqnnmxsxv5vemo6.js"),__vite__mapDeps([13,1,2,3,4,5,14,15,16,17,18,19,20,21,22,23,8,24,25,7,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46])).then(e=>e.BusinessesMap));function Ev(e){"use forget";const t=Ct.c(148),{index:s,FormattedText:r,node:o,wordFadeType:a}=e,i=parseInt(s,10),l=h.useContext(ue),d=K();li(l?.clientThreadId??ms);const c=Zn(l?.analyticsMetadata),u=h.useRef(!1);if(l==null)return null;const{contentReferences:f,onShowSearchResults:x,numImageResults:b,analyticsMetadata:y,message:_}=l,p=f?.[i];if(!p||y.turnIndex===void 0||p.type===void 0)return null;let S;t[0]===Symbol.for("react.memo_cache_sentinel")?(S={img:Iv},t[0]=S):S=t[0];let C;t[1]!==p.alt?(C=n.jsx(is,{components:S,children:p.alt}),t[1]=p.alt,t[2]=C):C=t[2];const w=C;let m=null;e:switch(p.type){case"title_citation":{let g;t[3]!==p||t[4]!==c?(g=n.jsx(Vu,{metadata:p,trackContentReferenceEvent:c}),t[3]=p,t[4]=c,t[5]=g):g=t[5],m=g;break e}case"location_search":{let g;t[6]!==p||t[7]!==c?(g=n.jsx(Au,{metadata:p,trackContentReferenceEvent:c}),t[6]=p,t[7]=c,t[8]=g):g=t[8],m=g;break e}case"time":{let g;t[9]!==p||t[10]!==c?(g=n.jsx(Uu,{metadata:p,trackContentReferenceEvent:c}),t[9]=p,t[10]=c,t[11]=g):g=t[11],m=g;break e}case"image_v2":{const g=b??0;let j;t[12]!==y||t[13]!==p||t[14]!==c||t[15]!==g?(j=n.jsx(ps,{metadata:p,numImageResults:g,analyticsMetadata:y,trackContentReferenceEvent:c}),t[12]=y,t[13]=p,t[14]=c,t[15]=g,t[16]=j):j=t[16],m=j;break e}case"nav_list":{let g;t[17]!==p||t[18]!==c?(g=n.jsx(Iu,{metadata:p,trackContentReferenceEvent:c}),t[17]=p,t[18]=c,t[19]=g):g=t[19],m=g;break e}case"file_navlist":{let g;t[20]!==p||t[21]!==c?(g=n.jsx(hu,{metadata:p,trackContentReferenceEvent:c}),t[20]=p,t[21]=c,t[22]=g):g=t[22],m=g;break e}case"file":{{let g;t[28]!==p||t[29]!==c||t[30]!==i?(g=n.jsx(du,{fileRef:p,index:i,trackContentReferenceEvent:c}),t[28]=p,t[29]=c,t[30]=i,t[31]=g):g=t[31],m=g}break e}case"grouped_webpages_model_predicted_fallback":{let g;t[32]!==p||t[33]!==l.message.id||t[34]!==c||t[35]!==i||t[36]!==o?(g=n.jsx(ea,{webpageRef:p,node:o,trackContentReferenceEvent:c,messageId:l.message.id,index:i}),t[32]=p,t[33]=l.message.id,t[34]=c,t[35]=i,t[36]=o,t[37]=g):g=t[37],m=g;break e}case"grouped_webpages":{let g;t[38]!==p||t[39]!==l.message.id||t[40]!==c||t[41]!==i||t[42]!==o?(g=n.jsx(Qr,{webpageRef:p,node:o,trackContentReferenceEvent:c,messageId:l.message.id,index:i}),t[38]=p,t[39]=l.message.id,t[40]=c,t[41]=i,t[42]=o,t[43]=g):g=t[43],m=g;break e}case"tldr":break e;case"navigation":{let g;t[44]!==p||t[45]!==c||t[46]!==x?(g=n.jsx(na,{navigation:p,onShowSearchResults:x,trackContentReferenceEvent:c}),t[44]=p,t[45]=c,t[46]=x,t[47]=g):g=t[47],m=g;break e}case"stock":{let g;t[48]!==p||t[49]!==c?(g=n.jsx(Tu,{contentReference:p,trackContentReferenceEvent:c}),t[48]=p,t[49]=c,t[50]=g):g=t[50],m=g;break e}case"calculator":{let g;t[51]!==p||t[52]!==c?(g=n.jsx(Yd,{data:p,trackContentReferenceEvent:c}),t[51]=p,t[52]=c,t[53]=g):g=t[53],m=g;break e}case"python":case"container":{let g;t[54]!==y.turnIndex||t[55]!==p||t[56]!==l.clientThreadId?(g=n.jsx(su,{clientThreadId:l.clientThreadId,turnIndex:y.turnIndex,contentReference:p}),t[54]=y.turnIndex,t[55]=p,t[56]=l.clientThreadId,t[57]=g):g=t[57],m=g;break e}case"code_execution":{let g;t[58]!==r||t[59]!==p||t[60]!==c?(g=n.jsx(eu,{FormattedText:r,displayInfo:p,trackContentReferenceEvent:c}),t[58]=r,t[59]=p,t[60]=c,t[61]=g):g=t[61],m=g;break e}case"forecast":{let g;t[62]!==y||t[63]!==p.date_range||t[64]!==p.forecast||t[65]!==c?(g=p?.forecast&&n.jsx(bv,{weatherResults:p.forecast,dateRange:p.date_range,turnIndex:y.turnIndex,trackContentReferenceEvent:c}),t[62]=y,t[63]=p.date_range,t[64]=p.forecast,t[65]=c,t[66]=g):g=t[66],m=g;break e}case"businesses_map":{let g;t[67]!==p||t[68]!==c?(g=n.jsx($v,{contentReference:p,trackContentReferenceEvent:c}),t[67]=p,t[68]=c,t[69]=g):g=t[69],m=g;break e}case"map":{let g;t[70]!==p||t[71]!==l.clientThreadId||t[72]!==l.message.id||t[73]!==c?(g=n.jsx(Pd,{contentReference:p,trackContentReferenceEvent:c,clientThreadId:l.clientThreadId,messageId:l.message.id}),t[70]=p,t[71]=l.clientThreadId,t[72]=l.message.id,t[73]=c,t[74]=g):g=t[74],m=g;break e}case"video":{let g;t[75]!==p||t[76]!==c?(g=n.jsx(Qu,{video:p,trackContentReferenceEvent:c}),t[75]=p,t[76]=c,t[77]=g):g=t[77],m=g;break e}case"sports_standings":{let g;t[78]!==p||t[79]!==c?(g=n.jsx(Hu,{standingsRef:p,trackContentReferenceEvent:c}),t[78]=p,t[79]=c,t[80]=g):g=t[80],m=g;break e}case"sports_schedule":{let g;t[81]!==p||t[82]!==c?(g=n.jsx(Du,{scheduleRef:p,trackContentReferenceEvent:c}),t[81]=p,t[82]=c,t[83]=g):g=t[83],m=g;break e}case"attribution":{let g;t[84]!==p||t[85]!==a?(g=n.jsx(qd,{attribution:p,wordFadeType:a}),t[84]=p,t[85]=a,t[86]=g):g=t[86],m=g;break e}case"debug":{let g;t[87]!==p?(g=Object.entries(p).map(Av),t[87]=p,t[88]=g):g=t[88];let j;t[89]!==g?(j=n.jsx(n.Fragment,{children:g}),t[89]=g,t[90]=j):j=t[90],m=j;break e}case"image_inline":{let g;t[91]!==p||t[92]!==l.clientThreadId||t[93]!==c||t[94]!==_?(g=_.metadata?.b1de6e2_rm?n.jsx(yc,{reference:p,clientThreadId:l.clientThreadId,trackContentReferenceEvent:c,message:_}):n.jsx(vc,{reference:p,clientThreadId:l.clientThreadId,trackContentReferenceEvent:c,message:_}),t[91]=p,t[92]=l.clientThreadId,t[93]=c,t[94]=_,t[95]=g):g=t[95],m=g;break e}case"image_group":{let g;t[96]!==y||t[97]!==p||t[98]!==c?(g=n.jsx(Ql,{contentReference:p,trackContentReferenceEvent:c,analyticsMetadata:y}),t[96]=y,t[97]=p,t[98]=c,t[99]=g):g=t[99],m=g;break e}case"product_entity":{if(B(d,"1225428216")){let j;t[100]!==p?(j={...p,type:"entity",name:p.product.title,category:"product"},t[100]=p,t[101]=j):j=t[101];let P;t[102]!==y.turnIndex||t[103]!==l.clientThreadId||t[104]!==l.message.id||t[105]!==c||t[106]!==j?(P=n.jsx(Dn,{contentReference:j,clientThreadId:l.clientThreadId,messageId:l.message.id,turnIndex:y.turnIndex,trackContentReferenceEvent:c}),t[102]=y.turnIndex,t[103]=l.clientThreadId,t[104]=l.message.id,t[105]=c,t[106]=j,t[107]=P):P=t[107],m=P}else{let j;t[108]!==y.turnIndex||t[109]!==p||t[110]!==l.clientThreadId||t[111]!==l.message.id||t[112]!==c?(j=n.jsx(Dd,{contentReference:p,clientThreadId:l.clientThreadId,messageId:l.message.id,turnIndex:y.turnIndex,trackContentReferenceEvent:c}),t[108]=y.turnIndex,t[109]=p,t[110]=l.clientThreadId,t[111]=l.message.id,t[112]=c,t[113]=j):j=t[113],m=j}break e}case"entity_metadata":{let g;t[114]!==p||t[115]!==l.clientThreadId||t[116]!==l.message.id||t[117]!==c?(g=n.jsx(lu,{contentReference:p,clientThreadId:l.clientThreadId,messageId:l.message.id,trackContentReferenceEvent:c}),t[114]=p,t[115]=l.clientThreadId,t[116]=l.message.id,t[117]=c,t[118]=g):g=t[118],m=g;break e}case"checkout_confirmation":{let g;t[119]!==p||t[120]!==c?(g=null,t[119]=p,t[120]=c,t[121]=g):g=t[121],m=g;break e}case"entity":{const g=p;let j;t[122]!==y.turnIndex||t[123]!==l.clientThreadId||t[124]!==l.message.id||t[125]!==c||t[126]!==g?(j=n.jsx(Dn,{contentReference:g,clientThreadId:l.clientThreadId,messageId:l.message.id,turnIndex:y.turnIndex,trackContentReferenceEvent:c}),t[122]=y.turnIndex,t[123]=l.clientThreadId,t[124]=l.message.id,t[125]=c,t[126]=g,t[127]=j):j=t[127],m=j;break e}case"products":{let g;t[128]!==y||t[129]!==p||t[130]!==l.clientThreadId||t[131]!==l.message.id?(g=n.jsx(Bd,{contentReference:p,clientThreadId:l.clientThreadId,messageId:l.message.id,turnIndex:y.turnIndex,analyticsMetadata:y}),t[128]=y,t[129]=p,t[130]=l.clientThreadId,t[131]=l.message.id,t[132]=g):g=t[132],m=g;break e}case"product_reviews":{let g;t[133]!==p||t[134]!==c?(g=n.jsx(sa,{contentReference:p,disableAnimation:!0,trackContentReferenceEvent:c}),t[133]=p,t[134]=c,t[135]=g):g=t[135],m=g;break e}case"product_rationale":{let g;t[136]!==p||t[137]!==c?(g=n.jsx(ta,{contentReference:p,trackContentReferenceEvent:c,disableAnimation:!0}),t[136]=p,t[137]=c,t[138]=g):g=t[138],m=g;break e}case"sources_footnote":return null}"dil"in p&&p.dil&&B(d,"846037718");let v;t[141]!==w||t[142]!==p||t[143]!==c?(v=g=>(u.current||(c("Search Content Reference Failed","search_content_reference_failed",p.type),Pt.addError(`Error rendering content reference: ${p.type}`,{...g,contentReference:p}),u.current=!0),p?.alt?w:n.jsx("span",{className:`errored-object-${p.type}`})),t[141]=w,t[142]=p,t[143]=c,t[144]=v):v=t[144];let k;return t[145]!==m||t[146]!==v?(k=n.jsx(io,{name:"content-reference-renderer",fallback:v,children:m}),t[145]=m,t[146]=v,t[147]=k):k=t[147],k}function Av(e){const[t,s]=e;return n.jsx("sub",{className:"ms-1 w-fit rounded-md border-2 border-solid border-orange-500 px-1 leading-none",children:s},t)}function Iv(e){const{src:t,alt:s}=e;return n.jsx("img",{src:t,alt:s,className:"max-h-28"})}const Lv=({onClick:e})=>{const[t,s]=h.useState(!1),r=oa(),o=L(),a=d=>{e(d),s(!0),setTimeout(()=>{r()&&s(!1)},2e3)},i=t?ra:aa,l=o.formatMessage({id:"uG/ayY",defaultMessage:"Copy table"});return n.jsx(at,{label:l,side:"bottom",align:"center",alignOffset:0,children:n.jsx("button",{"aria-label":l,onClick:a,className:"hover:bg-token-bg-tertiary text-token-text-secondary my-1 rounded-sm p-1 transition-opacity group-[:not(:hover):not(:focus-within)]:pointer-events-none group-[:not(:hover):not(:focus-within)]:opacity-0",children:n.jsx(i,{className:"icon"})})})},Fv=({onClickCopy:e,children:t,...s})=>{const r=K(),o=h.useRef(null),a=h.useRef(null),l=ci(r)&&di(r);return ui(()=>{ia({axis:"height",target:o.current?.firstElementChild,onChange:({height:d})=>{a.current&&(a.current.style.height=`${d}px`)}})},[]),n.jsx("div",{className:N(l?"-mx-6":js.tableContainer),children:n.jsxs("div",{tabIndex:-1,className:N("group w-fit",l?"flex max-w-full overflow-x-auto overscroll-x-contain px-6":N(js.tableWrapper,"flex flex-col-reverse")),children:[n.jsx("table",{...s,className:"w-fit min-w-(--thread-content-width)",ref:o,children:t}),n.jsx("div",{className:N("sticky h-0 select-none",l?"end-0 self-start":"end-(--thread-content-margin) self-end"),children:n.jsx("div",{className:"absolute end-0 flex items-end",ref:a,children:n.jsx(Lv,{onClick:e})})})]})})},Rv=({node:e,children:t,...s})=>n.jsx("td",{...s,children:h.Children.map(t,(r,o)=>r==="<br>"?n.jsx("br",{},o):r)});function Dv(e){const{src:t,clientThreadId:s,...r}=e,o=us(s),a=h.useContext(ue),i=fa(o,t,a?.useSafeUrls);return i==null?n.jsx("div",{}):n.jsx("img",{...r,src:i})}function Ov(e){return n.jsx(Ev,{...e,FormattedText:zo})}function zo({size:e="medium",children:t,className:s,clientThreadId:r,messageId:o,isActivelyStreaming:a=!1,componentOverrides:i,isDeepResearchResultMessage:l,forceDarkMode:d,disableWordFade:c}){const u=$t()||d,{wordFadeType:f}=la(),x=ca(),b=h.useMemo(()=>({pre:({children:m,"data-start":v,"data-end":k,"data-is-last-node":g})=>n.jsx("pre",{className:"overflow-visible!","data-start":v,"data-end":k,"data-is-last-node":g,children:m}),code:m=>n.jsx(ua,{...m,clientThreadId:r}),[mi]:m=>n.jsx(Ov,{wordFadeType:f,...m}),[da]:m=>r==null?null:n.jsx(Al,{...m,clientThreadId:r,messageId:o}),[Ai]:Ei,[Ci]:Il,[Si]:Vl,[ki]:Wl,[_i]:Dl,a:m=>{const{node:v,children:k,...g}=m,j=v?.properties?.href;if(typeof j=="string"&&j.startsWith(ws))return r!=null&&o!=null?n.jsx(Zo,{...g,clientThreadId:r,messageId:o,href:j,children:k}):null;if(typeof j=="string"&&j===Yo){const P=v?.children?.map($=>typeof $.value=="string"?$.value:"").join("").trim();return n.jsx(Ko,{...m,text:P,clientThreadId:r,messageId:o,className:"cursor-pointer"})}if(typeof j=="string"&&j===Qo){const P=v?.children?.map($=>typeof $.value=="string"?$.value:"").join("").trim();return n.jsx(er,{...m,text:P,clientThreadId:r,messageId:o})}if(typeof j=="string"&&j===tr){const P=v?.children?.map($=>typeof $.value=="string"?$.value:"").join("").trim();return n.jsx(sr,{...m,text:P,clientThreadId:r,messageId:o})}return j&&typeof j=="string"&&Gl(j)?k:n.jsx(hl,{...m,clientThreadId:r,messageId:o})},table:({node:m,...v})=>n.jsx(Fv,{...v,onClickCopy:k=>{ht.logEvent("ChatGPT Table Copy Clicked");const g=r!=null&&o!=null?xt.getNode(fi(r),o).message:void 0;Vn(Jo(m.markdownSource,g?.metadata?.content_references),void 0,k)}}),td:Rv,...x?{h1:({node:m,...v})=>n.jsx("h1",{"data-section-id":ft(m.markdownSource),...v}),h2:({node:m,...v})=>n.jsx("h2",{"data-section-id":ft(m.markdownSource),...v}),h3:({node:m,...v})=>n.jsx("h3",{"data-section-id":ft(m.markdownSource),...v}),li:({node:m,...v})=>n.jsx("li",{"data-section-id":ft(m.markdownSource),...v})}:{},img:({node:m,...v})=>{const k=m?.properties?.src;return typeof k=="string"&&(k.startsWith(ws)||k.startsWith("attachment:"))?null:n.jsx(Dv,{...v,clientThreadId:r})},...f==="delay"?pl:[],...i}),[x,f,i,r,o,a]),y=K(),_=B(y,"1839283687"),p=h.useMemo(()=>a&&t?gl(t):t??"",[t,a]),S=Yn(),C=h.useMemo(()=>[...Wn,[nr,p]],[p]),w=h.useMemo(()=>f==="indexed"&&!c?{handlers:{text:(m,v,k)=>{const g=[];for(const j of S(v.value))g.push({type:"element",tagName:"span",properties:{className:Kn.fadeIn},children:[{type:"text",value:j}]});return g}}}:void 0,[f,S,c]);return _?!1:n.jsx(io,{name:"formatted_text_error",fallback:()=>n.jsx(n.Fragment,{children:p}),children:n.jsx(Bo,{rehypePlugins:C,remarkPlugins:Hn,remarkRehypeOptions:w,className:N(s,"markdown prose dark:prose-invert w-full break-words",u?"dark":"light",e==="small"&&"prose-xs",l&&"deep-research-result","markdown-new-styling"),urlTransform:Bn,components:b,children:p})})}const Bo=h.memo(is),xw=Object.freeze(Object.defineProperty({__proto__:null,FormattedText:zo,ReactMarkdownMemo:Bo},Symbol.toStringTag,{value:"Module"}));export{xw as F,Cd as M,bt as W,Nd as a,jd as b,Yc as c,Gc as f,Co as p,pe as r,Jc as t};
//# sourceMappingURL=kih72rm7p3mlgp94.js.map
