import{hP as b,fw as v,aM as _,f6 as q,oq as w,a0 as C,or as F}from"./dmck639k4dv7claj.js";import{bK as T,bL as A,bM as x}from"./hnw079jsdm76umup.js";import{r as i,u as M}from"./cs7toih8jegb7teq.js";const c=5*60*1e3,P=30*1e3;function D(l,y,m,f,h){const s=i.useContext(b)?.serverSharedThreadId,r=T(m),p=i.useMemo(()=>({asset_pointer:r,content_type:v.ArbitraryAssetPointer}),[r]),o=A(),{isUnauthenticated:E}=_(),n=q(y),t=x.makeQueryOptions({asset:p,sharedThreadId:s,postId:o,gizmoId:void 0,isUnauthenticated:E,conversationId:s?void 0:n}),a=w(),I=!!(l&&(n||s||o)&&r&&t.enabled),u=t.queryFn;if(typeof u=="symbol")throw Error("Unexpected symbol query fn...");return M({queryKey:t.queryKey,queryFn:async g=>{try{const e=await u(g);return f?.(e.url),{status:"success",download_url:e.url}}catch(e){C.addError(e);let d=a("default_download_link_error",{fileName:r});throw e instanceof F&&e.code!=null&&(d=a(e.code)),h?.(d),e}},enabled:I,staleTime:c,gcTime:P,refetchInterval:c,refetchOnWindowFocus:!0})}export{D as u};
//# sourceMappingURL=nsa6r7grrfqk0ahy.js.map
