const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kvkturjin3y9xluz.js","assets/dmck639k4dv7claj.js","assets/cs7toih8jegb7teq.js","assets/root-mdlgku96.css","assets/hnw079jsdm76umup.js","assets/conversation-small-b5ztx8w5.css","assets/obbtqvjhg25u2clv.js","assets/kv4zmfer8jhuryuz.js","assets/m45qhi5lpgsvsv3e.js","assets/lwh0wbmpf7uh5gaw.js","assets/nlxagrvvx9r77jf7.js","assets/gqxnaj28dwt74usv.js","assets/dfhgw8mxn1h3ecpw.js","assets/kizn5m1hr7kdjf9n.js","assets/nfubiloo9rdxk3kj.js","assets/lxgn8k46ba24438b.js","assets/k4ghje9xipg90eb2.js","assets/lox5zdwgg3gy3k4z.js","assets/itn5frgf3bcgdkwm.js","assets/hsurwbv79wrpc9dg.js","assets/k8zvpcbe8ny3hcd9.js","assets/cm813h9bptrniota.js","assets/mahhuo4zclh446vl.js","assets/l1m3l5lbmhuctzw6.js","assets/k3ulfqwluwevik5m.js","assets/oasstlv4rvegny2a.js","assets/m9o58vphd3ndk69b.js","assets/0pvms18xhlsdgwx3.js","assets/n65pv42ozj5b2sgc.js","assets/mx53t73mxqv69zr4.js","assets/juuat6zkzm5l0iep.js","assets/lxoxtbdwug1cvduy.js","assets/g4tl5lt9yqf20m4s.js","assets/hltpb27fidixninm.js","assets/gfoa9pl75c877lkp.js","assets/l2l4d2d2bzani7km.js","assets/fvhqocttzcpincdr.js"])))=>i.map(i=>d[i]);
import{ay as ze,hX as De,aw as k,ax as M,e as Ue,b6 as We,nj as Be,aI as Fe,ep as Ge,by as He,cR as Ye,pZ as Qe,p_ as Ke,ft as Ne,p$ as Xe,W as $e,q0 as Ze,la as qe,bX as Ae,i as Je,j5 as et,g as tt,bi as st,po as it,e1 as ot,fv as at,nY as rt}from"./dmck639k4dv7claj.js";import{j as s,r as a,A as nt,m as ye,c as lt,h as Ve,b as ct,f as dt}from"./cs7toih8jegb7teq.js";import{iL as ft,iM as ut,iN as mt,iO as gt,iP as Le,he as pt,cB as Me,cC as Re,iQ as ht,iR as bt,iS as xt,iT as _t,iU as jt,iV as vt,iW as wt,iX as Et,iY as Pt,iZ as Ct,i_ as Ot,i$ as St,j0 as Tt,j1 as It,j2 as kt,j3 as Mt,cs as Ft,j4 as Nt,j5 as At,j6 as yt,j7 as Vt,T as Lt,j8 as Rt,cp as zt,j9 as Dt,fa as Ut,aX as Wt}from"./hnw079jsdm76umup.js";import{P as Bt,M as Gt}from"./m45qhi5lpgsvsv3e.js";import{C as Ht}from"./k3ulfqwluwevik5m.js";function Yt({clientThreadId:o}){const e=ft();return s.jsxs(s.Fragment,{children:[e&&s.jsx(ut,{}),s.jsx(Qt,{clientThreadId:o})]})}function Qt({clientThreadId:o}){const e=a.useContext(mt),[i,c]=a.useState(!!e?.postWithProfile&&e.postWithProfile.post.attachments&&e.postWithProfile.post.attachments.every(d=>d.kind==="media_generation"));return!e?.postWithProfile||!i?null:s.jsx(ze,{clientThreadId:o,children:s.jsx(Bt,{clientThreadId:o,postWithProfile:e.postWithProfile,onClose:()=>c(!1)})})}const Kt=450;function Xt({children:o,clientThreadId:e,isOpen:i,onClose:c,type:d}){return s.jsx(nt,{children:i&&s.jsx(De,{children:s.jsx(gt.Provider,{value:{isEmbeddedInFocusedView:!0,type:d},children:s.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[s.jsx(ye.div,{className:"bg-token-main-surface-secondary h-full w-full",...Le}),s.jsxs("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{className:"grow overflow-auto",children:o}),s.jsx(ye.div,{className:"border-token-border-medium bg-token-main-surface-primary relative shrink-0 border-s",style:{width:Kt},...Le,children:s.jsx("div",{className:"h-[100vh] pb-4",children:s.jsx(Gt,{clientThreadId:e,hideHeader:!0,hideDisclaimer:!0,messagesVerticalAlign:"bottom"},e)})})]})]})})})})}const $t=k(()=>M(()=>import("./kvkturjin3y9xluz.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Zt=k(()=>M(()=>import("./kv4zmfer8jhuryuz.js"),__vite__mapDeps([7,1,2,3,4,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26])).then(o=>o.ImageEditor));function qt({clientThreadId:o}){const e=pt();a.useEffect(()=>{Me.close()},[o]);let i;return e?.type===Re.ADAVisualization?i=s.jsx($t,{clientThreadId:o,visualization:e.visualization}):e?.type===Re.Image&&(i=s.jsx(Zt,{clientThreadId:o,messageId:e.messageId,image:e.image,allImages:e.allImages},e.image.asset_pointer)),s.jsx(Xt,{clientThreadId:o,isOpen:e!=null,onClose:Me.close,type:e?.type,children:i})}var Jt={};const es=k(()=>M(()=>import("./0pvms18xhlsdgwx3.js"),__vite__mapDeps([27,2,1,3,4,5]))),ts=k(()=>M(()=>import("./n65pv42ozj5b2sgc.js"),__vite__mapDeps([28,2,1,3,4,5,29,30,31,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,32]))),ss=k(()=>M(()=>import("./hltpb27fidixninm.js"),__vite__mapDeps([33,2,1,3,34,4,5,31,35]))),is=k(()=>M(()=>import("./fvhqocttzcpincdr.js"),__vite__mapDeps([36,2,1,3,31,4,5,34])));function ds(o){"use forget";const e=lt.c(112),{urlThreadId:i,clientThreadId:c,prefetchSearch:d}=o,r=Ue(),l=We(),g=Be(),m=Ve(),[f]=ct(),p=f.get("from_webview")==="ios";let A;e[0]!==c||e[1]!==i?(A=()=>{if(i!==void 0){const n=i;return Ke(n)??n}return c!==void 0?c:Ne()},e[0]=c,e[1]=i,e[2]=A):A=e[2];const[t,F]=a.useState(A);i!==void 0&&t!==i&&(Fe(t)===i||F(i));let y;e[3]!==t||e[4]!==r?(y=Ge(r,t),e[3]=t,e[4]=r,e[5]=y):y=e[5];const Oe=y,Se=Ve();let V;e[6]!==Se?(V=ht(Se),e[6]=Se,e[7]=V):V=e[7];const Te=V;let L;e[8]!==t||e[9]!==i?(L=()=>{i===void 0&&Fe(t)!==void 0&&F(Ne())},e[8]=t,e[9]=i,e[10]=L):L=e[10];let R;e[11]!==t||e[12]!==Te||e[13]!==i?(R=[i,t,Te],e[11]=t,e[12]=Te,e[13]=i,e[14]=R):R=e[14],a.useEffect(L,R);const Ie=He(Ye.workspaceId),{eligible:z,isLoading:D,markAsViewed:U}=bt(),W=xt(),{eligible:B,isLoading:G,markAsViewed:H}=_t(),Y=jt(),{eligible:Q,isLoading:K,markAsViewed:X}=vt(),$=wt(),{eligible:Z,isLoading:q,markAsViewed:J}=Et(),ee=Pt();let te,se;e[15]!==r?(te=()=>{Xe(!0).then(n=>{n.force_login&&$e(r,{fallbackScreenHint:"login"}),Ze.initializeAndGatherData(n),qe.initializeAndGatherData(n)})},se=[r],e[15]=r,e[16]=te,e[17]=se):(te=e[16],se=e[17]),a.useEffect(te,se);let ie,oe;e[18]!==g||e[19]!==l||e[20]!==f?(ie=()=>{const n=f.get(Ot)==="true",N=f.get(St)==="true";N!==g&&Ae.setIsAnonModeEnabled(N),l!==n&&Ae.setIsTemporaryChatEnabled(n)},oe=[l,g,f],e[18]=g,e[19]=l,e[20]=f,e[21]=ie,e[22]=oe):(ie=e[21],oe=e[22]),a.useEffect(ie,oe);let ae;e[23]!==m.state?(ae=()=>{m.state?.focusObject&&Me.setFocusedObject(m.state.focusObject)},e[23]=m.state,e[24]=ae):ae=e[24];const ke=m.state?.focusObject;let re;e[25]!==ke?(re=[ke],e[25]=ke,e[26]=re):re=e[26],a.useEffect(ae,re);let ne,le;e[27]!==z||e[28]!==D||e[29]!==U||e[30]!==W?(ne=()=>{!D&&z&&(U(),W())},le=[z,D,U,W],e[27]=z,e[28]=D,e[29]=U,e[30]=W,e[31]=ne,e[32]=le):(ne=e[31],le=e[32]),a.useEffect(ne,le);let ce,de;e[33]!==B||e[34]!==G||e[35]!==H||e[36]!==Y?(ce=()=>{!G&&B&&(H(),Y())},de=[B,G,H,Y],e[33]=B,e[34]=G,e[35]=H,e[36]=Y,e[37]=ce,e[38]=de):(ce=e[37],de=e[38]),a.useEffect(ce,de);let fe,ue;e[39]!==Q||e[40]!==K||e[41]!==X||e[42]!==$?(fe=()=>{!K&&Q&&(X(),$())},ue=[Q,K,X,$],e[39]=Q,e[40]=K,e[41]=X,e[42]=$,e[43]=fe,e[44]=ue):(fe=e[43],ue=e[44]),a.useEffect(fe,ue);let me,ge;e[45]!==Z||e[46]!==q||e[47]!==J||e[48]!==ee?(me=()=>{!q&&Z&&(J(),ee())},ge=[Z,q,J,ee],e[45]=Z,e[46]=q,e[47]=J,e[48]=ee,e[49]=me,e[50]=ge):(me=e[49],ge=e[50]),a.useEffect(me,ge),Ct(t);const u=dt();let pe,he;e[51]!==r||e[52]!==u?(pe=()=>{Je(r)&&Tt(u)},he=[u,r],e[51]=r,e[52]=u,e[53]=pe,e[54]=he):(pe=e[53],he=e[54]),a.useEffect(pe,he);let be,xe;e[55]!==l||e[56]!==u?(be=()=>et(ot,{completionFinished:n=>{if(n.serverThreadId!=null&&!l){const N=tt(n.serverThreadId)?.mode;N?.kind===st.GizmoInteraction&&it.handleGizmoInteracted(u,N.gizmo_id)}}}),xe=[l,u],e[55]=l,e[56]=u,e[57]=be,e[58]=xe):(be=e[57],xe=e[58]),a.useEffect(be,xe);let h;e[59]!==t||e[60]!==p||e[61]!==Ie?(h=s.jsx(It,{clientThreadId:t,page:"chat",isIosDirectPurchaseFlow:p},Ie),e[59]=t,e[60]=p,e[61]=Ie,e[62]=h):h=e[62];let b;e[63]!==t||e[64]!==p?(b=s.jsx(os,{clientThreadId:t,setClientThreadId:F,isIosDirectPurchaseFlow:p}),e[63]=t,e[64]=p,e[65]=b):b=e[65];let _e,je;e[66]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(es,{}),je=s.jsx(kt,{}),e[66]=_e,e[67]=je):(_e=e[66],je=e[67]);let ve;e[68]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(Mt,{}),e[68]=ve):ve=e[68];let x;e[69]!==t||e[70]!==i?(x=s.jsx(Ht,{urlThreadId:i,clientThreadId:t,setClientThreadId:F}),e[69]=t,e[70]=i,e[71]=x):x=e[71];let _;e[72]!==t?(_=s.jsx(Yt,{clientThreadId:t}),e[72]=t,e[73]=_):_=e[73];let j;e[74]!==t||e[75]!==d||e[76]!==x||e[77]!==_?(j=s.jsxs(Ft,{clientThreadId:t,setClientThreadId:F,prefetchSearchPromises:d,children:[ve,x,_]}),e[74]=t,e[75]=d,e[76]=x,e[77]=_,e[78]=j):j=e[78];let v;e[79]!==t||e[80]!==h||e[81]!==b||e[82]!==j?(v=s.jsxs(at,{clientThreadId:t,children:[h,b,_e,je,j]}),e[79]=t,e[80]=h,e[81]=b,e[82]=j,e[83]=v):v=e[83];let w,E;e[84]!==t?(w=s.jsx(qt,{clientThreadId:t}),E=s.jsx(Nt,{clientThreadId:t}),e[84]=t,e[85]=w,e[86]=E):(w=e[85],E=e[86]);let we;e[87]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(At,{}),e[87]=we):we=e[87];let P;e[88]!==t?(P=s.jsx(yt,{clientThreadId:t}),e[88]=t,e[89]=P):P=e[89];let Ee;e[90]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx(Vt,{}),e[90]=Ee):Ee=e[90];let C;e[91]!==t||e[92]!==v||e[93]!==w||e[94]!==E||e[95]!==P?(C=s.jsxs(ze,{clientThreadId:t,children:[v,w,E,we,P,Ee]}),e[91]=t,e[92]=v,e[93]=w,e[94]=E,e[95]=P,e[96]=C):C=e[96];let O;e[97]!==t||e[98]!==C?(O=s.jsx(Lt,{clientThreadId:t,children:C}),e[97]=t,e[98]=C,e[99]=O):O=e[99];let S;e[100]!==t||e[101]!==O?(S=s.jsx(Rt,{clientThreadId:t,children:O}),e[100]=t,e[101]=O,e[102]=S):S=e[102];let Pe;e[103]===Symbol.for("react.memo_cache_sentinel")?(Pe=!1,e[103]=Pe):Pe=e[103];let T;e[104]!==t?(T=!1,e[104]=t,e[105]=T):T=e[105];let I;e[106]!==S||e[107]!==T?(I=s.jsxs(rt,{children:[S,Pe,T]}),e[106]=S,e[107]=T,e[108]=I):I=e[108];let Ce;return e[109]!==Oe||e[110]!==I?(Ce=s.jsx(Qe.Provider,{value:Oe,children:I}),e[109]=Oe,e[110]=I,e[111]=Ce):Ce=e[111],Ce}function os({clientThreadId:o,setClientThreadId:e,isIosDirectPurchaseFlow:i}){const{isOpen:c,isLoading:d}=zt(),{isOpen:r,isLoading:l}=Dt(),{isOpen:g,isLoading:m,closeModal:f}=Ut();return i?null:!d&&c?s.jsx(ts,{clientThreadId:o,setClientThreadId:e}):!l&&r?s.jsx(ss,{clientThreadId:o}):!m&&g?s.jsx(Wt,{children:s.jsx(is,{clientThreadId:o,onClose:f})}):null}typeof window<"u"&&(window._g=Jt.GOKU_SERVICE);export{ds as C,Kt as F};
//# sourceMappingURL=dlvfyfqn731e6hy3.js.map
