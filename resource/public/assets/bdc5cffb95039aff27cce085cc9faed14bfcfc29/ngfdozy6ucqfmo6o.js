import{kd as R,lU as v,bV as L,V as C,L as P,bQ as O,e as F,aG as T,nv as I,aq as k,P as A,l_ as V}from"./dmck639k4dv7claj.js";import{pM as x,r1 as N}from"./hnw079jsdm76umup.js";import{a as Q,b as U,N as q,e as z,f as D,r as i,d as G}from"./cs7toih8jegb7teq.js";var H={};const E={oiw216z:`${H.VITE_OIW216Z_SERVICE_URL??"https://sora.com"}/subscription`,vza493q:R,students:x(!0)},j=v(function(){const n=Q(),[l]=U(),p=q(),c=L(),r=z(),g=D(),s=C.getItem(P.CheckoutFrom),t=O(),e=l.get("plan_type")??"plus",u=F(),m=T(u,"2494348560"),{anyConnectorEnabled:d,isLoading:f}=I(),M=i.useRef(e),o=p?.postCheckoutResult==="success",y=p?.postCheckoutResult==="payment_failed";return i.useEffect(()=>{o&&e==="plus"&&t!=null&&k.logEvent("chatgpt_plus_payment_success_page")},[e,t,o]),i.useEffect(()=>{if(f||t==null)return;if(y){const a=r.formatMessage(S.paymentFailedToastMessage);c.warning(a,{duration:5}),n("/#pricing");return}const _=!d&&m.get("enable_ca_pro_onboarding_flow",!1)&&M.current==="pro",b="free",w=N(e);o&&A.logPaymentSuccess({plan_type:e});let h=!0;if(t.planType===b)g.invalidateQueries(V());else{if(s&&E[s])C.removeItem(P.CheckoutFrom),window.location.href=E[s],h=s!=="students";else if(_)window.location.href="/payments/success-ind";else{const a=T(u,"2239990662").get("redirect_to_home",!1);n(a?"/":"/#pricing")}if(h&&!_){const a=r.formatMessage(S.paymentConfirmationToastMessage,{planName:w});c.success(a,{duration:5})}}},[n,l,c,r,g,s,t,e,f,d,m,u,o,y]),null}),S=G({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{E as C,j as p};
//# sourceMappingURL=ngfdozy6ucqfmo6o.js.map
