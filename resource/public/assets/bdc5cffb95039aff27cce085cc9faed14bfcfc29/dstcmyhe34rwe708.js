const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/glocjbeujfzb532e.js","assets/cs7toih8jegb7teq.js"])))=>i.map(i=>d[i]);
import{b1 as Ee,aw as le,z as ce,c3 as Ie,ax as de,e as ue,bV as me,G as Re,bh as Pe,gM as Ae,dJ as Oe,dN as h,de as ee,pO as E,C as pe,bE as xe,dQ as Ue,pP as U,dO as ge,e0 as Te,B as O,bQ as Be,d1 as v,aH as We,eg as qe,P as V,dP as De,be as te,R as Ve}from"./dmck639k4dv7claj.js";import{r as k,e as L,j as t,f as Qe,M as g,c as F,u as ze,p as Q}from"./cs7toih8jegb7teq.js";import{hT as $e,hU as I,hV as Fe,hW as fe,hX as se,hY as ae,hZ as Ke,h_ as Ge,hx as Ze,by as K,h$ as ne,i0 as He,hv as Xe,hz as Je,hA as ie,bF as Ye,ak as et}from"./hnw079jsdm76umup.js";import{L as tt,R as st,X as at}from"./o2irc1i5e2v5m1br.js";import{V as nt}from"./h2t8e4spzi3rf7zt.js";import{a as it}from"./dia5a65grp9qhigk.js";import{c as ot,E as rt}from"./jzf87t9sw7fm54zq.js";import{S as lt,c as oe}from"./e4n380qxe5ofgeg6.js";import"./epuqxu07prihsdka.js";const ct=s=>k.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...s},k.createElement("path",{d:"M8.90137 11.417C9.26455 11.3625 9.60269 11.6124 9.65723 11.9756C9.71173 12.3388 9.46183 12.6769 9.09863 12.7314C6.40834 13.1352 4.41518 15.2967 4.41504 17.833C4.41504 18.2003 4.11727 18.498 3.75 18.498C3.38273 18.498 3.08496 18.2003 3.08496 17.833C3.0851 14.5616 5.63904 11.9066 8.90137 11.417Z"}),k.createElement("path",{d:"M16.1367 12.8027C16.4296 12.5102 16.9045 12.5101 17.1973 12.8027C17.4899 13.0955 17.4898 13.5704 17.1973 13.8633L15.6436 15.416L17.1973 16.9697L17.248 17.0264C17.4884 17.3209 17.4717 17.7556 17.1973 18.0303C16.9226 18.3049 16.4879 18.3215 16.1934 18.0811L16.1367 18.0303L14.583 16.4766L13.0303 18.0303C12.7374 18.323 12.2626 18.323 11.9697 18.0303C11.6771 17.7374 11.6771 17.2626 11.9697 16.9697L13.5225 15.416L11.9697 13.8633L11.918 13.8066C11.6778 13.5121 11.6952 13.0773 11.9697 12.8027C12.2443 12.5283 12.6791 12.5109 12.9736 12.751L13.0303 12.8027L14.583 14.3555L16.1367 12.8027Z"}),k.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.75C12.2549 1.75013 14.0838 3.57808 14.084 5.83301C14.084 8.08809 12.2551 9.91686 10 9.91699C7.74499 9.91682 5.91699 8.08806 5.91699 5.83301C5.91717 3.57811 7.7451 1.75018 10 1.75ZM10 3.25C8.57352 3.25018 7.41717 4.40653 7.41699 5.83301C7.41699 7.25963 8.57341 8.41682 10 8.41699C11.4266 8.41686 12.584 7.25966 12.584 5.83301C12.5838 4.40651 11.4265 3.25013 10 3.25Z"})),dt=le(()=>de(()=>import("./glocjbeujfzb532e.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication));function ut({value:s,onChange:e,options:n,onSearch:l,placeholder:c,trailingComponent:o,isLoading:r,menuIsOpen:a,classNames:x}){const f=L(),u=f.formatMessage({id:"F+GhgL",defaultMessage:"People outside of your workspace cannot be added"}),m=i=>t.jsx(oe.IndicatorsContainer,{...i,children:o}),p=(i,C)=>C.context==="value"?i.label:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm",children:i.label}),i.sublabel&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:i.sublabel})]}),i.kind==="group"&&i.isScimManaged&&t.jsx(dt,{})]}),S=i=>{const{isFocused:C,isSelected:w,innerProps:_,innerRef:y,data:R}=i;return t.jsx("div",{..._,ref:y,className:ce("cursor-pointer rounded-md p-2",w?"bg-token-interactive-bg-secondary-press":C?"bg-token-interactive-bg-secondary-hover":"bg-transparent"),children:p(R,{context:"menu"})})},j=i=>t.jsx(oe.MultiValue,{...i,children:t.jsx("div",{className:"text-token-text-primary bg-token-bg-secondary hover:border-token-border-light hover:bg-token-interactive-bg-secondary-hover m-1 cursor-pointer rounded-md border border-transparent px-1.5 py-1 text-sm",role:"button",tabIndex:0,...i.removeProps,children:t.jsxs("span",{className:"flex min-w-0 items-center gap-1",children:[t.jsx("span",{className:"min-w-0",children:i.children}),t.jsx(Ie,{className:"icon-sm"})]})})});return t.jsx(lt,{className:"react-select-container min-w-0",classNamePrefix:"react-select",isMulti:!0,isClearable:!1,isLoading:r,menuIsOpen:a,options:n,value:s,classNames:x,getOptionValue:i=>`${i.kind}:${i.id}`,getOptionLabel:i=>i.label,onChange:i=>e(i),onInputChange:(i,C)=>{C.action!=="menu-close"&&C.action!=="input-blur"&&l(i)},placeholder:c,openMenuOnFocus:!0,openMenuOnClick:!0,hideSelectedOptions:!1,closeMenuOnSelect:!1,backspaceRemovesValue:!0,controlShouldRenderValue:!0,components:{DropdownIndicator:()=>null,ClearIndicator:()=>null,IndicatorsContainer:m,MultiValue:j,Option:S,MultiValueRemove:()=>null},formatOptionLabel:p,noOptionsMessage:()=>u,loadingMessage:()=>f.formatMessage(Ee.loading),filterOption:(i,C)=>i.data.label.toLowerCase().includes(C.toLowerCase())||(i.data.sublabel??"").toLowerCase().includes(C.toLowerCase())})}const mt=le(()=>de(()=>import("./glocjbeujfzb532e.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication));function he(s,e){return s===void 0||e===void 0?!1:s.split("__")[0]===e.split("__")[0]}function re(s){return s.toLowerCase().trim()}function pt(s,e){return s===void 0||e===void 0?!1:re(s)===re(e)}function z(s,e){return he(s?.user_id,e?.id)||pt(s?.user_email,e?.email)}function xt(s,e){const n=new Set,l=new Set,c=new Set,o=new Set,r=[...s];for(const a of s)a.type===h.USER?n.add(a.user_id):a.type===h.EMAIL?c.add(a.user_email):a.type===h.GROUP?l.add(a.group_id):o.add(a.type);for(const a of e)if(a.type===h.EMAIL){if(c.has(a.user_email))continue;c.add(a.user_email),r.push(a)}else if(a.type===h.USER){if(n.has(a.user_id))continue;n.add(a.user_id),r.push(a)}else if(a.type===h.GROUP){if(l.has(a.group_id))continue;l.add(a.group_id),r.push(a)}else{if(o.has(a.type))continue;o.add(a.type),r.push(a)}return r}function gt(s,e){const n=s.filter(l=>[h.ALL].indexOf(l.type)===-1);return e!=null&&n.push(e),n}function ft(s){return s.find(e=>e.type===h.ALL)?ne.Link:ne.Private}function ye(s){return s.can_write?"edit":"view"}function ht(s){switch(s){case h.ALL:return"all";default:return"invite"}}const yt=s=>e=>e.kind==="user"?{type:h.USER,user_id:e.id,user_name:e.label,user_email:e.sublabel??"",capabilities:s}:{type:h.GROUP,group_id:e.id,group_name:e.label,is_scim_managed:!!e.isScimManaged,capabilities:s},jt=s=>e=>({type:h.EMAIL,user_email:e,capabilities:s}),vt=({label:s,projectName:e,onConfirm:n,onClose:l})=>{const c=L(),o=c.formatMessage({id:"tnQ4zL",defaultMessage:"{label, select, undefined {Remove from {projectName}?} other {Remove {label} from {projectName}}}?"},{label:s??"undefined",projectName:e}),[r,a]=k.useState(!1);return t.jsx(pe,{testId:"modal-snorlax-remove-user-confirmation-modal",isOpen:!0,onClose:()=>l(),type:"success",title:o,primaryButton:t.jsx(te.Button,{title:c.formatMessage({id:"qvV5dW",defaultMessage:"Remove"}),color:"danger",onClick:async()=>{a(!0);try{await n(),l()}finally{a(!1)}},loading:r,disabled:r,"data-testid":"button-confirm-remove-user"}),secondaryButton:t.jsx(te.Button,{title:c.formatMessage({id:"8Z8QAH",defaultMessage:"Cancel"}),disabled:r,color:"secondary",onClick:()=>l()}),children:t.jsx("div",{className:"text-token-text-secondary",children:t.jsx(g,{id:"QkibL8",defaultMessage:"{label, select, undefined {They} other {<b>{label}</b>}} will lose access to all contents in this project.",values:{label:s??"undefined",b:x=>t.jsx("span",{className:"text-token-text-primary font-medium",children:x})}})})})};function Qt({gizmo:s,publishedGizmo:e,onClose:n}){"use forget";const l=ue(),c=L(),o=me(),r=Re(l),a=r?.isWorkspaceAccount()??!1,x=Pe(),f=$e(),[u,m]=k.useState(s.sharing?.subjects??[]),[p,S]=k.useState(!1),j=Qe(),{canEdit:i}=Ae(e);k.useEffect(()=>{j.invalidateQueries({queryKey:Oe(j,e.gizmo.id).queryKey})},[e.gizmo.id,j]);function C(d,b,M){return d.type===h.USER&&d.user_id.indexOf("__")===-1?{...d,user_id:d.user_id+"__"+r?.getWorkspaceId()}:d}async function w(d,b,M){if(p)return;S(!0);const N=b?M.map(C):M,Y=ft(N);try{const A=await f.mutateAsync({id:d,update:{sharing:{recipient:Y,subjects:N},sharingRecipient:Y}});A?.resource&&m(Ge(A.resource).sharing.subjects)}catch(A){const Le=Te(A);o.warning(Le??"Error",{duration:2}),m(s.sharing?.subjects??[])}S(!1),j.invalidateQueries({queryKey:["gizmos"]}),j.refetchQueries({queryKey:["gizmos","discovery"]}),j.refetchQueries({queryKey:["gizmo",{gizmoId:d}]}),j.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:d}]}),j.invalidateQueries({queryKey:["workspace"]})}const _=he(e.gizmo.author.user_id.split("__")[0],x?.id),y=I(u),R=a||y?.type!==h.ALL,ve=R?xe:fe,Z=t.jsx(g,{id:"wDjvNM",defaultMessage:"Only the owner can change permissions. Contact them if you'd like to update someone's access."}),Ce=t.jsx(ee,{label:Z,side:"top",children:I(u)?.type!==h.ALL?t.jsx(g,{id:"fAE/rP",defaultMessage:"Only those invited"}):t.jsx(g,{id:"Mr1Pk0",defaultMessage:"Anyone with a link"})}),be=t.jsx(G,{capabilities:y?.capabilities??E,onChange:d=>{const b=u.map(M=>M===y?{...M,capabilities:d}:M);m(b),w(e.gizmo.id,a,b)},triggerClassNames:"text-token-text-primary"}),Se=d=>t.jsx(ee,{label:Z,side:"top",children:t.jsx("span",{className:"text-token-text-primary pe-4 text-sm",children:t.jsx(g,{...T(d.capabilities)})})}),Me=d=>t.jsxs(v.Root,{children:[t.jsxs(v.Trigger,{color:"secondary",className:"text-token-text-primary text-normal hover:bg-token-interactive-bg-secondary-hover radix-state-open:bg-token-interactive-bg-secondary-press whitespace-nowrap",disabled:p,children:[t.jsx(g,{...T(d.capabilities)}),t.jsx(K,{className:"icon-sm"})]}),t.jsx(v.Portal,{children:t.jsxs(v.Content,{className:"max-w-[320px]",children:[t.jsx(v.RadioGroup,{value:ye(d.capabilities),onValueChange:b=>{const M=u.map(N=>N===d?{...N,capabilities:b==="edit"?U:E}:N);m(M),w(e.gizmo.id,a,M)},children:[E,U].map((b,M)=>t.jsx(je,{capabilities:b,selected:ge(b,d.capabilities)},M))}),t.jsx(v.Item,{onClick:()=>{const b=ae(d);We(l,vt,{label:b?.value,projectName:e.gizmo.display.name,onConfirm:async()=>{const M=u.filter(N=>N!==d);await w(e.gizmo.id,a,M),m(M)}})},color:"danger",icon:ct,children:t.jsx(g,{id:"HEaMqG",defaultMessage:"Remove from project"})})]})})]}),[P,H]=k.useState(E),[B,W]=k.useState([]),[q,D]=k.useState([]),ke=B.length>0||q.length>0,X=async()=>{const d=a?B.map(yt(P)):q.map(jt(P)),b=xt(u,d);await w(e.gizmo.id,a,b),m(b),D([]),W([])},we=()=>{W([]),D([])},J=t.jsx(O,{color:"secondary",disabled:p,onClick:we,children:t.jsx(g,{id:"Pxo4Mv",defaultMessage:"Cancel"})}),_e=a?t.jsx("div",{className:"text-token-text-secondary flex text-xs",children:t.jsx(g,{id:"uAtWCq",defaultMessage:"Project files, chats, and instructions are shared."})}):null,Ne=ke&&i?a?t.jsxs("div",{className:"flex items-center gap-2",children:[J,t.jsx(O,{color:"blue",disabled:p,loading:p,onClick:X,children:t.jsx(g,{id:"BdwAiM",defaultMessage:"Invite"})})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[J,t.jsx(O,{color:"blue",disabled:p,loading:p,onClick:X,children:t.jsx(g,{id:"n1mfg+",defaultMessage:"Invite"})})]}):t.jsx(bt,{gizmo:e,isBusinessWorkspace:a});return t.jsx(pe,{testId:"modal-share-project",type:"success",className:"max-w-[512px]",size:"custom",isOpen:!0,onClose:n,footerContent:_e,footerClassName:"mt-5 sm:mt-4",modalActionsClassName:"mt-0!",footerIsSpacedBetween:!0,primaryButton:Ne,title:c.formatMessage(Ke.projectShareTitle),showCloseButton:!0,children:t.jsxs("div",{className:"flex flex-col space-y-4",children:[i&&(a?t.jsx(kt,{publishedGizmo:e,capabilities:P,setCapabilities:H,subjects:B,setSubjects:W}):t.jsx(wt,{capabilities:P,setCapabilities:H,emails:q,setEmails:D})),t.jsx("div",{className:"text-token-text-secondary mb-2 text-sm font-normal",children:t.jsx(g,{id:"eMoeS0",defaultMessage:"Who has access"})}),t.jsxs(Fe,{className:"max-h-[220px] overflow-y-auto",children:[t.jsx($,{icon:t.jsx("div",{className:"flex h-6 w-6 items-center justify-center",children:t.jsx(ve,{className:R?"h-5 w-5":"h-6 w-6"})}),trailing:!R&&y?.type!==h.ALL?be:null,children:_?t.jsx(Rt,{newSharingSubjects:u,setNewSharingSubjects:m,saveGizmo:w,publishedGizmo:e,isBusinessWorkspace:a,isSaving:p}):Ce}),t.jsx($,{icon:t.jsx(se,{monogram:{id:e.gizmo.author.user_id??"Owner",value:e.gizmo.author.display_name??"User"}}),trailing:t.jsx("span",{className:"text-token-text-primary pe-4 text-sm",children:t.jsx(g,{id:"qb439J",defaultMessage:"Owner"})}),children:_?t.jsx(g,{id:"I6hNog",defaultMessage:"{userName} {you}",values:{userName:x?.name??x?.email,you:t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(g,{id:"VZNoWp",defaultMessage:"(you)"})})}}):e.gizmo.author.display_name??e.gizmo.author.user_email}),u.map((d,b)=>Ue(d)&&t.jsx($,{icon:t.jsx(se,{monogram:ae(d)}),trailing:_?Me(d):Se(d),children:t.jsxs("div",{className:"flex flex-col justify-center",children:[a&&t.jsxs("span",{className:"flex flex-row items-center",children:[t.jsx("span",{className:"text-token-text-primary truncate text-sm leading-tight",children:d.type===h.GROUP?d.group_name:t.jsx(g,{id:"B3bf3E",defaultMessage:"{userName} {you}",values:{userName:d.user_name,you:z(d,x)?t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(g,{id:"VZNoWp",defaultMessage:"(you)"})}):null}})}),d.type===h.GROUP&&d.is_scim_managed&&t.jsx(mt,{})]}),!a&&(d.type===h.USER||d.type===h.EMAIL)&&t.jsx("span",{className:"text-token-text-primary truncate text-sm leading-tight",children:t.jsx(g,{id:"oj/38v",defaultMessage:"{email} {you}",values:{email:z(d,x)?x?.name:d.user_email??"",you:z(d,x)?t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(g,{id:"VZNoWp",defaultMessage:"(you)"})}):null}})})]})},b)),t.jsx("hr",{className:"border-token-border-light sticky bottom-0 hidden group-data-scrolled-from-end/scrollport:block"})]}),!a&&t.jsx(Ct,{})]})})}function Ct(){return t.jsxs("div",{className:"bg-token-bg-tertiary flex flex-row items-center gap-3 rounded-xl p-3",children:[t.jsx(qe,{className:"icon text-token-text-secondary"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-token-text-primary text-xs font-medium",children:t.jsx(g,{id:"pD1bmW",defaultMessage:"This project may include personal information"})}),t.jsx("span",{className:"text-token-text-secondary text-xs",children:t.jsx(g,{id:"EonGo6",defaultMessage:"All project contents are visible to collaborators. Personal memories are disabled for shared projects."})})]})]})}function bt({gizmo:s,isBusinessWorkspace:e}){const n=ue(),l=me(),c=He(n,s),o=s.gizmo.display.name;return t.jsxs("div",{className:"flex flex-row items-center gap-2",children:[!e&&t.jsxs(t.Fragment,{children:[t.jsx("a",{href:`https://www.linkedin.com/shareArticle?url=${encodeURIComponent(c)}&text=${encodeURIComponent(o)}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{V.logEventWithStatsig("Share Project: LinkedIn Social Clicked","chatgpt_share_project_linkedin_social_clicked",{projectTitle:o})},children:t.jsx(tt,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})}),t.jsx("a",{href:`https://www.reddit.com/submit?url=${encodeURIComponent(c)}&title=${encodeURIComponent(o)}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{V.logEventWithStatsig("Share Project: Reddit Social Clicked","chatgpt_share_project_reddit_social_clicked",{projectTitle:o})},children:t.jsx(st,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})}),t.jsx("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(c)}&text=${encodeURIComponent(o)}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{V.logEventWithStatsig("Share Project: X Social Clicked","chatgpt_share_project_x_social_clicked",{projectTitle:o})},children:t.jsx(at,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})})]}),t.jsx(St,{onClickCopy:r=>Xe(n,s,l,r)})]})}const St=({onClickCopy:s,timeout:e=2e3})=>{const[n,l]=k.useState("idle"),c=async o=>{l("copying"),await s(o),l("copied"),setTimeout(()=>l("idle"),e)};return t.jsx(O,{color:"primary",disabled:n!=="idle",icon:n==="copied"?Ye:et,onClick:o=>{c(o)},children:n==="copied"?t.jsx(g,{id:"qtqW3t",defaultMessage:"Copied"}):t.jsx(g,{id:"Pg3WAh",defaultMessage:"Copy link"})})};function G(s){"use forget";const e=F.c(23),{capabilities:n,onChange:l,triggerClassNames:c}=s;let o;e[0]!==c?(o=ce("text-token-text-secondary hover:bg-token-interactive-bg-secondary-hover radix-state-open:bg-token-interactive-bg-secondary-press whitespace-nowrap",c),e[0]=c,e[1]=o):o=e[1];let r;e[2]!==n?(r=T(n),e[2]=n,e[3]=r):r=e[3];let a;e[4]!==r?(a=t.jsx(g,{...r}),e[4]=r,e[5]=a):a=e[5];let x;e[6]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(K,{className:"icon-sm"}),e[6]=x):x=e[6];let f;e[7]!==o||e[8]!==a?(f=t.jsxs(v.Trigger,{color:"secondary",className:o,children:[a,x]}),e[7]=o,e[8]=a,e[9]=f):f=e[9];let u;e[10]!==n?(u=ye(n),e[10]=n,e[11]=u):u=e[11];let m;e[12]!==l?(m=i=>{l(i==="edit"?U:E)},e[12]=l,e[13]=m):m=e[13];let p;e[14]!==n?(p=[E,U].map((i,C)=>t.jsx(je,{capabilities:i,selected:ge(i,n)},C)),e[14]=n,e[15]=p):p=e[15];let S;e[16]!==u||e[17]!==m||e[18]!==p?(S=t.jsx(v.Portal,{children:t.jsx(v.Content,{className:"max-w-[320px]",children:t.jsx(v.RadioGroup,{value:u,onValueChange:m,children:p})})}),e[16]=u,e[17]=m,e[18]=p,e[19]=S):S=e[19];let j;return e[20]!==f||e[21]!==S?(j=t.jsxs(v.Root,{children:[f,S]}),e[20]=f,e[21]=S,e[22]=j):j=e[22],j}function T(s){return s.can_write?Q({id:"vsUknl",defaultMessage:"Can edit"}):s.can_view_config?Q({id:"4ceJzB",defaultMessage:"Can chat"}):Q({id:"x2E8ET",defaultMessage:"Unknown"})}function Mt(s){return s.can_write?Je:s.can_view_config?ie:ie}function je(s){"use forget";const e=F.c(14),{capabilities:n,selected:l}=s,c=L();let o;e[0]!==n.can_write?(o=n.can_write?t.jsx(g,{id:"IShl7Y",defaultMessage:"Chat and edit project content"}):t.jsx(g,{id:"Ux4GYU",defaultMessage:"Chat and view project content"}),e[0]=n.can_write,e[1]=o):o=e[1];const r=o,a=n.can_write?"edit":"view",x=l?"selected":"default";let f;e[2]!==n?(f=Mt(n),e[2]=n,e[3]=f):f=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(v.RadioItemCheck,{}),e[4]=u):u=e[4];let m;e[5]!==n||e[6]!==c?(m=c.formatMessage(T(n)),e[5]=n,e[6]=c,e[7]=m):m=e[7];let p;return e[8]!==r||e[9]!==a||e[10]!==x||e[11]!==f||e[12]!==m?(p=t.jsx(v.RadioItem,{value:a,color:x,icon:f,trailing:u,label:m,secondary:r}),e[8]=r,e[9]=a,e[10]=x,e[11]=f,e[12]=m,e[13]=p):p=e[13],p}function kt({publishedGizmo:s,capabilities:e,setCapabilities:n,subjects:l,setSubjects:c}){"use forget";const o=L(),r=Be(),[a,x]=k.useState(""),[f]=it(a,100),u=Ze(r?.id,0,f,10),m=k.useMemo(()=>u.data?.items?.filter(y=>y.account_user_id!==s?.gizmo.author.user_id).map(y=>({kind:"user",id:y.account_user_id,label:y.name??"Unknown User",sublabel:y.email??""}))??[],[u.data?.items,s]),{data:p,isLoading:S}=ze({queryKey:[r?.id,"groups","filtered",f],queryFn:r?()=>Ve.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:r.id},query:{query:f,offset:0,orderby:"@score",limit:20}}}):void 0,enabled:f.trim()!==""&&r!=null&&!!r.getWorkspaceId()}),j=k.useMemo(()=>p?.items.slice(0,10).map(y=>({kind:"group",id:y.id,label:y.name,sublabel:o.formatMessage({id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}"},{numMembers:y.num_members??0}),isScimManaged:!!y.is_scim_managed}))??[],[p,o]),i=y=>`${y.kind}:${y.id}`,C=new Set(l.map(i)),w=[...m,...j].filter(y=>!C.has(i(y))),_=o.formatMessage({id:"hbjC0K",defaultMessage:"Search people or groups"});return t.jsx("div",{className:"w-full min-w-0",children:t.jsx(ut,{value:l,classNames:{menuList:()=>"bg-token-bg-primary",control:()=>"h-auto! min-h-[40px]! max-h-[192px] items-start overflow-y-auto p-1! cursor-text!"},onChange:y=>c([...y]),onSearch:x,menuIsOpen:a.trim()!=="",options:w,placeholder:_,trailingComponent:l.length>0&&t.jsx(G,{capabilities:e,onChange:n,triggerClassNames:"text-token-text-secondary"}),isLoading:u.isLoading||S})})}function wt(s){"use forget";const e=F.c(15),{capabilities:n,setCapabilities:l,emails:c,setEmails:o}=s,r=L();let a;e[0]!==c?(a=c.map(It),e[0]=c,e[1]=a):a=e[1];const x=a;let f;e[2]!==o?(f=w=>{const _=w.map(Et);o(Pt(_))},e[2]=o,e[3]=f):f=e[3];const u=f;let m;e[4]!==r?(m=r.formatMessage({id:"Mabh3o",defaultMessage:"Email, separated by commas"}),e[4]=r,e[5]=m):m=e[5];const p=m,S=Lt;let j;e[6]===Symbol.for("react.memo_cache_sentinel")?(j={menuList:Nt,control:_t},e[6]=j):j=e[6];let i;e[7]!==n||e[8]!==l?(i=t.jsx(G,{capabilities:n,onChange:l,triggerClassNames:"text-token-text-secondary"}),e[7]=n,e[8]=l,e[9]=i):i=e[9];let C;return e[10]!==x||e[11]!==u||e[12]!==p||e[13]!==i?(C=t.jsx("div",{className:"w-full min-w-0",children:t.jsx(rt,{value:x,onChange:u,placeholder:p,classNames:j,trailingComponent:i,shouldShowTrailingComponent:S})}),e[10]=x,e[11]=u,e[12]=p,e[13]=i,e[14]=C):C=e[14],C}function _t(){return"h-auto! min-h-[40px]! max-h-[192px] items-start overflow-y-auto p-0! cursor-text!"}function Nt(){return"bg-token-bg-primary"}function Lt(s,e){return s&&s.length>0?!0:!!(e&&nt.test(e))}function Et(s){return s.value}function It(s){return ot(s??"")}function Rt({newSharingSubjects:s,setNewSharingSubjects:e,saveGizmo:n,publishedGizmo:l,isBusinessWorkspace:c,isSaving:o}){const r=L();return c?t.jsx("div",{className:"flex min-h-9 items-center",children:t.jsx(g,{id:"fAE/rP",defaultMessage:"Only those invited"})}):t.jsxs(v.Root,{children:[t.jsxs(v.Trigger,{className:"px-0","data-no-hover-bg":!0,disabled:o,children:[I(s)?.type!==h.ALL?t.jsx(g,{id:"fAE/rP",defaultMessage:"Only those invited"}):t.jsx(g,{id:"Mr1Pk0",defaultMessage:"Anyone with a link"}),t.jsx(K,{className:"icon-sm"})]}),t.jsx(v.Portal,{children:t.jsx(v.Content,{children:t.jsxs(v.RadioGroup,{value:ht(I(s)?.type??h.USER),onValueChange:a=>{const x=gt(s,a==="all"?{type:h.ALL,capabilities:De}:null);e(x),n(l.gizmo.id,c,x)},children:[t.jsx(v.RadioItem,{icon:xe,value:"invite",label:r.formatMessage({id:"fAE/rP",defaultMessage:"Only those invited"}),trailing:t.jsx(v.RadioItemCheck,{}),color:I(s)?.type===h.USER?"selected":"default"}),t.jsx(v.RadioItem,{icon:fe,value:"all",label:r.formatMessage({id:"Mr1Pk0",defaultMessage:"Anyone with a link"}),trailing:t.jsx(v.RadioItemCheck,{}),color:I(s)?.type===h.ALL?"selected":"default"})]})})})]})}function $({icon:s,children:e,trailing:n,className:l=""}){return t.jsxs("div",{className:`mb-1 flex min-h-9 flex-row items-center justify-between space-x-2 ${l}`,children:[t.jsx("div",{className:"shrink-0 grow-0",children:s}),t.jsx("div",{className:"text-token-text-primary grow truncate text-sm",children:e}),n&&t.jsx("div",{children:n})]})}function Pt(s){const e=new Set,n=[];for(const l of s){const c=l.toLowerCase();e.has(c)||(e.add(c),n.push(c))}return n}export{Qt as ShareProjectModal};
//# sourceMappingURL=dstcmyhe34rwe708.js.map
