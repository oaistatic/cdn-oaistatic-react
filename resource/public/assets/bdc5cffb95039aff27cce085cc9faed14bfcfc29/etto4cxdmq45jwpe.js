import{F as u}from"./fhmbfrqqfncxraqv.js";import{P as t,a0 as c,aq as r,v as b,N as F,d3 as S,dp as I,e as E,G as m,p as A,e5 as h}from"./dmck639k4dv7claj.js";import{bp as q,hP as C,hQ as M}from"./hnw079jsdm76umup.js";import{r as p,p as Q,v as f}from"./cs7toih8jegb7teq.js";let s="",o="";const _=new Set,i={setSessionId(e){s=e},setQuerySessionId(e){_.clear(),o=e},logClick(e,n,a){c.addAction("fannypack.web.click",{index:n,source:a}),t.logEvent("FannyPack: Click result",{fanny_pack_session_id:s,fanny_pack_query_session_id:o,conversationId:e,index:n,source:a}),r.logEvent("chatgpt_fannypack_click",n,{index:String(n),source:a})},logClose(e){t.logEvent("FannyPack: Close",{fanny_pack_session_id:s,source:e})},logOpen(e){b.count(F.DEFAULT,"conversation_search.open",[{key:"source",value:e}]),c.addAction("fannypack.web.open",{source:e}),t.logEvent("FannyPack: Open",{fanny_pack_session_id:s,source:e}),r.logEvent("chatgpt_fannypack_open",e)},logQuery(){c.addAction("fannypack.web.query"),t.logEvent("FannyPack: Query",{fanny_pack_session_id:s,fanny_pack_query_session_id:o}),r.logEvent("chatgpt_fannypack_query")},logQueryError(){c.addError("fannypack.web.query_error"),t.logEvent("FannyPack: Query Error",{fanny_pack_session_id:s,fanny_pack_query_session_id:o})},logQueryMore(){c.addAction("fannypack.web.queryMore"),t.logEvent("FannyPack: Query Fetch More",{fanny_pack_session_id:s,fanny_pack_query_session_id:o}),r.logEvent("chatgpt_fannypack_query_more")},logNoResults(){t.logEvent("FannyPack: No results",{fanny_pack_session_id:s,fanny_pack_query_session_id:o})},logImpression(e,n,a){_.has(a)||(_.add(a),t.logEvent("FannyPack: Impression",{fanny_pack_session_id:s,fanny_pack_query_session_id:o,source:e,index:n,conversation_id:a}))}},D={isActive:!1,query:"",activeIndex:void 0,mouseInteractionsDisabled:!1},d=S(I(()=>({...D}))),k=d.getState,y=d.setState,K={getQuery:(e=k())=>e.query,getMouseInteractionsDisabled:()=>k().mouseInteractionsDisabled},v={setIsActive:e=>{y({isActive:e})},setQuery:e=>{y({query:e})},setActiveIndex:e=>{y(n=>{n.activeIndex=e,n.mouseInteractionsDisabled=!0})},setMouseInteractionsDisabled:e=>{y(n=>{n.mouseInteractionsDisabled=e})}};function w(){const e=E(),n=m(e),{isFannyPackEnabled:a}=q(),l=d(P=>P.isActive),g=A(e,"1422501431");p.useEffect(()=>{a&&n&&(g?u.setCurrentAccountV2(n):u.setCurrentAccount(n),u.init())},[n,g,a]),p.useEffect(()=>h(e).addAction({key:"toggleChatSearch",action:()=>{l?i.logClose("shortcut"):(i.setSessionId(f()),i.logOpen("shortcut")),v.setIsActive(!l)},actionMessageDescriptor:Q({id:"oqatXV",defaultMessage:"Search chats"}),group:M.Core,keyboardBinding:[C.Mod,"k"]}),[e,l])}function x(){v.setIsActive(!0),i.setSessionId(f()),i.logOpen("button")}const V=Object.freeze(Object.defineProperty({__proto__:null,openFannyPackSearch:x,useInitializeFannyPackHandler:w},Symbol.toStringTag,{value:"Module"}));export{v as F,i as a,K as b,w as c,V as d,d as u};
//# sourceMappingURL=etto4cxdmq45jwpe.js.map
