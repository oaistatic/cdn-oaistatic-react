const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bq2te6493ahas5on.js","assets/cs7toih8jegb7teq.js","assets/dmck639k4dv7claj.js","assets/root-mdlgku96.css","assets/j4f7k5uzu8u0dtkz.js","assets/jd17yzpadn74fmtb.js","assets/hnw079jsdm76umup.js","assets/conversation-small-b5ztx8w5.css","assets/ehj77igobhc7tiok.js","assets/cq7nh9aqi3zpn79u.js","assets/mahhuo4zclh446vl.js","assets/l1m3l5lbmhuctzw6.js","assets/evuj3pe6whmkwe4k.js","assets/ce8zjbfxg2hovnx5.js","assets/ox6fgqsim11fqrz7.js","assets/j016trxwqzgsccq0.js","assets/euq7ybw4dhrsufo2.js","assets/kwms1ugj73bjxgnk.js"])))=>i.map(i=>d[i]);
import{bV as we,R as Be,be as Ae,c3 as Js,ej as et,d1 as st,ek as tt,e as B,mo as os,fC as as,fw as ns,fF as ot,aI as at,au as nt,jj as rs,fA as rt,lm as it,aM as ds,fD as Fe,a0 as be,f0 as ye,q as ee,F as ie,lV as us,eo as Q,k9 as lt,dG as ct,de as ms,p as Z,aF as le,T as q,bt as dt,h_ as is,hB as ut,z as F,ee as mt,d_ as ps,gg as se,mY as Ie,hC as hs,b5 as pt,aq as pe,P as K,gf as Pe,br as Ce,cu as gs,m2 as fs,c_ as xs,b9 as vs,rF as ht,bl as Ss,aX as ze,G as Ge,fd as ls,eq as gt,hq as ft,u as xt,d as vt,rG as St,rj as jt,w as bt,o_ as Ct,pH as wt,rH as yt,B as Pt,g as Mt,rk as _t,i_ as kt,b8 as He,cK as Nt,aH as Tt,dE as Et,eC as Rt,rI as At,bb as Ft,rv as Ot,lx as Dt,ba as Ht,rJ as Lt,rw as Bt,rK as It,aS as zt,i as js,c as Gt,bm as bs,f6 as Ue,m as Ut,b6 as Wt,k8 as Cs,cW as Vt,aw as ws,ax as ys,f1 as qt,f9 as Le,f2 as Kt,o3 as $t,ep as We,k as Qt,fj as Yt,f5 as Xt,ao as Zt,rL as Jt,r as eo,rM as cs,bi as so,fu as to,hG as oo,jr as ao,hf as no,j7 as ro,df as io,bf as lo,bu as co,c2 as uo,rN as mo,jk as po,aN as ho,fv as go,hc as fo}from"./dmck639k4dv7claj.js";import{e as ce,a as Me,r as i,j as e,M as re,m as xo,h as Ps,d as vo,L as Ms,R as _s,b as So}from"./cs7toih8jegb7teq.js";import{cK as jo,cL as bo,cO as Co,N as $,cQ as wo,cR as yo,cW as Po,cX as Mo,L as ks,b2 as Ns,op as _o,iN as Ts,cG as ko,bi as No,bj as To,bk as Eo,j as Ve,hR as Ro,iP as Ao,oq as Fo,or as Oo,i7 as Do,os as Ho,eR as Lo,ot as Bo,ou as Io,gO as he,gQ as J,h7 as Es,ds as zo,dr as Go,de as Uo,ov as Wo,ow as Vo,gs as qe,ox as qo,oy as Ko,lQ as $o,cp as Rs,lR as Qo,fj as As,gA as _e,oz as Yo,oA as Xo,oB as Zo,oC as Jo,oD as ea,oE as sa,oF as ta,cI as oa,oG as aa,kv as na,fh as Fs,oH as ra,aV as ia,gy as la,oI as ca,oJ as da,fg as ua,oK as ma,bu as pa,oL as ha,oM as ga,aW as fa,oN as xa,nN as va,oO as Os,oP as Sa,kw as Ke,oQ as ja,oR as ba,oS as Ca,oT as Ds,oU as wa,oV as ya,oW as Pa,oX as Ma,oY as _a,gp as ka,e3 as Na,u as Ta,oZ as Ea,hG as Ra,kB as Aa,ky as Fa,o_ as Oa,kz as Oe,o$ as Da,x as Ha,aM as $e,p0 as La,jy as Ba,p1 as Ia,f5 as za,k3 as Ga,p2 as Ua,p3 as Wa,p4 as Va,p5 as qa,p6 as Ka,p7 as $a,p8 as Qa,ha as Ya,gw as Xa,p9 as Za,pa as Ja,hr as en,aX as sn,pb as tn,pc as on,pd as an,pe as nn,pf as rn,pg as ln,ph as cn,pi as dn,pj as un,pk as mn,pl as pn,pm as hn,pn as gn,po as fn,pp as xn,pq as vn,pr as Sn,ps as jn,pt as bn,pu as Cn,pv as wn,pw as yn,px as Pn,py as Mn}from"./hnw079jsdm76umup.js";import{u as Qe,S as _n,C as kn,a as Nn}from"./lwh0wbmpf7uh5gaw.js";import{F as Tn}from"./kizn5m1hr7kdjf9n.js";import{a as En}from"./lxgn8k46ba24438b.js";import{P as Rn}from"./hsurwbv79wrpc9dg.js";import{I as An}from"./k8zvpcbe8ny3hcd9.js";import"./cm813h9bptrniota.js";import{g as Fn}from"./dfhgw8mxn1h3ecpw.js";import{C as On}from"./mahhuo4zclh446vl.js";const Dn=({image:s,onClose:o,onRequestCompletion:a,clientThreadId:t,currentModelId:l,post:c,canDelete:d,onOpenReport:r})=>{const n=ce(),p=we(),v=Me(),[m,f]=i.useState("default"),u=jo(),h=i.useRef(null),w=i.useRef(u);i.useEffect(()=>{w.current=u},[u]);const b=i.useCallback(()=>bo(n),[n]),S=i.useCallback(()=>{s&&f("inpaint")},[s]),k=i.useCallback(()=>{f("default"),w.current.clearAllDrawings()},[]),M=i.useCallback(()=>{s&&Co({url:s.url,fileName:b()})},[s,b]),_=i.useCallback(()=>h.current?.getImageData(),[]),A=i.useCallback(async()=>{if(window.confirm(n.formatMessage({id:"postReceiverModal.deletePostConfirmation",defaultMessage:"Are you sure you want to delete this post?"})))try{await Be.safeDelete("/share/post/{post_id}",{parameters:{path:{post_id:c.id}}}),v("/",{replace:!0})}catch{p.danger({id:"postReceiverModal.deletePostError",defaultMessage:"Failed to delete the post",description:"Error message for deleting a post"},{toastId:"post_receiver_modal.delete_post_error"})}},[c.id,n,p,v]),N=m==="inpaint"?n.formatMessage({id:"TjVqYb",defaultMessage:"Edit Selection"}):c.text??n.formatMessage({id:"htGxHc",defaultMessage:"Image"}),x=i.useCallback(g=>{g.key==="Escape"&&(o(),g.preventDefault())},[o]);return i.useEffect(()=>(document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)),[x]),e.jsx(Ae.Root,{isOpen:!0,onClose:o,testId:"modal-lightbox-post-share",shouldIgnoreClickOutside:m==="inpaint",children:e.jsx(Ae.Overlay,{children:e.jsxs(Ae.Content,{size:"fullscreen",removePopoverStyling:!0,className:"grid min-h-0 grid-rows-[auto_minmax(0,1fr)] overflow-hidden",children:[e.jsxs("header",{className:"flex h-14 w-full items-center justify-between gap-2 px-2 md:px-4",children:[e.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[e.jsx($,{icon:Js,onClick:o,"aria-label":n.formatMessage({id:"EYLKSm",defaultMessage:"Close"})}),e.jsx("h2",{className:"line-clamp-1 text-base font-medium",children:N})]}),e.jsx("div",{className:"flex items-center gap-2",children:m==="inpaint"?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"aspect-square",icon:wo,onClick:u.undoDrawing,disabled:!u.canUndoDrawing,"aria-label":n.formatMessage({id:"OmaTPx",defaultMessage:"Undo"})}),e.jsx($,{className:"aspect-square",icon:yo,onClick:u.redoDrawing,disabled:!u.canRedoDrawing,"aria-label":n.formatMessage({id:"ZUr4oh",defaultMessage:"Redo"})}),e.jsx($,{className:"w-auto px-3",onClick:k,children:n.formatMessage({id:"D9xvar",defaultMessage:"Cancel"})})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"aspect-square",icon:Po,onClick:S,"aria-label":n.formatMessage({id:"pRGwlp",defaultMessage:"Edit image"})}),e.jsx($,{className:"aspect-square",icon:Mo,onClick:M,"aria-label":n.formatMessage({id:"9DNHka",defaultMessage:"Download image"})}),e.jsx($,{className:"aspect-square",icon:ks,onClick:r,"aria-label":n.formatMessage({id:"2gNXdX",defaultMessage:"Report content"})}),d&&e.jsx($,{className:"aspect-square",icon:Ns,onClick:A,"aria-label":n.formatMessage({id:"rzlDpj",defaultMessage:"Delete post"})})]})})]}),e.jsxs("div",{className:"grid h-full w-full grid-rows-[1fr_auto] items-center overflow-y-auto overscroll-contain",children:[e.jsx("div",{className:"flex h-full w-full items-center justify-center px-4 pb-4",children:s&&e.jsxs("div",{className:"relative inline-block max-h-full rounded bg-neutral-100",children:[e.jsx("img",{src:s.url,alt:N,className:"h-full max-h-[70vh] w-auto max-w-full rounded object-contain",fetchPriority:"high"}),m==="inpaint"&&e.jsx(_o,{image:s,drawingState:u,drawingCanvasRef:h})]})}),e.jsx("div",{className:"flex w-full justify-center px-4 pb-8",children:e.jsx("div",{className:"w-full max-w-[768px]",children:e.jsx(An,{clientThreadId:t,currentModelId:l,onRequestCompletion:a,onClose:o,activeImage:s,currentDrawnShape:u.currentDrawnShape,getImageData:_,onCancelInpaint:k})})})]})]})})})};function Cr({postWithProfile:s,clientThreadId:o,onClose:a}){return s.post.attachments[0]?.kind==="media_generation"?e.jsx(Hn,{postWithProfile:s,clientThreadId:o,onClose:a}):s.post.attachments[0]?.kind==="message_slice"?e.jsx(Ln,{postWithProfile:s,onClose:a}):null}function Hn({postWithProfile:s,clientThreadId:o,onClose:a}){const t=i.useRef(null),[l,c]=i.useState(!1),d=Me(),{post:r}=s,n=r.attachments[r.attachments.length-1],p={url:n.url,content_type:ns.ImageAssetPointer,asset_pointer:n.asset_pointer??as(n.id),width:n.width,height:n.height},v=ce(),m=ot(),f=at(o),u=we(),h=i.useCallback(x=>m.getState().files.find(g=>g.tempId===x),[m]),w=n.url,b=i.useCallback(async x=>{if(t.current){const g=await t.current,T=g?h(g?.tempId):null;if(T)return T}return t.current=fetch(x).then(g=>g.blob()).then(g=>{const T=new File([g],"image.png",{type:"image/png"}),y=nt(T);return rs.uploadFile(m,y,T,rt.Multimodal,[T.type],v,u).then(()=>{const E=h(y);return E&&E.status===it.Ready&&E.fileId?E:null})}),t.current},[m,v,u,h]),{onRequestCompletion:S,currentModelId:k}=Ve(),{isUnauthenticated:M}=ds(),_=i.useCallback(async x=>{if(!(!x.promptMessage||M))try{const g=await b(w);if(!g||!g.fileId||!g.fileSpec)return;const T=[{content_type:ns.ImageAssetPointer,asset_pointer:as(g.fileId),size_bytes:g.fileSpec.size,width:n.width,height:n.height},...x.promptMessage.content.content_type===Fe.MultimodalText||x.promptMessage.content.content_type===Fe.Text?x.promptMessage.content.parts:[]],y={...x,promptMessage:{...x.promptMessage,content:{content_type:Fe.MultimodalText,parts:T}},extraStreamParams:{...x.extraStreamParams??{},continueFromSharedPostId:r.id}};S(y),rs.reset(m)}catch(g){be.addError(new Error("post_receiver_handle_request_failed",{cause:g})),u.danger({id:"postReceiverModal.editImageError",defaultMessage:"Failed to edit the image",description:"Error message for editing an image"},{toastId:"post_receiver_modal.edit_image_error"})}},[n.height,n.width,b,S,m,w,M,u,r.id]),A={id:r.id,archived:!1,transformationId:null,url:p.url,assetPointer:p.asset_pointer,thumbnail:null,width:p.width,height:p.height,title:null,conversationId:f,messageId:r.id},N=i.useCallback(()=>{a(),d("/",{replace:!0})},[a,d]);return e.jsxs(e.Fragment,{children:[e.jsx(Dn,{image:A,onClose:N,onRequestCompletion:_,clientThreadId:o,currentModelId:k,post:r,canDelete:!!r.permissions.can_delete,onOpenReport:()=>c(!0)}),l&&e.jsx(Hs,{post:r,onClose:()=>c(!1)})]})}function Ln({postWithProfile:s,onClose:o}){const[a,t]=i.useState(!1),{post:l}=s;return e.jsxs("div",{className:"bg-token-bg-primary absolute start-0 end-0 top-0 bottom-0 h-full w-full",children:[e.jsx(Bn,{post:l,setIsReportModalOpen:t,onClose:o}),e.jsx(Ro,{attachments:l.attachments,variant:"fullscreen"}),a&&e.jsx(Hs,{post:l,onClose:()=>t(!1)})]})}function Bn({post:s,setIsReportModalOpen:o,onClose:a,additionalButtons:t}){const l=Me(),c=ce(),d=we(),r=i.useCallback(async()=>{if(window.confirm(c.formatMessage({id:"postReceiverModal.deletePostConfirmation",defaultMessage:"Are you sure you want to delete this post?"})))try{await Be.safeDelete("/share/post/{post_id}",{parameters:{path:{post_id:s.id}}}),l("/",{replace:!0})}catch{d.danger({id:"postReceiverModal.deletePostError",defaultMessage:"Failed to delete the post",description:"Error message for deleting a post"},{toastId:"post_receiver_modal.delete_post_error"})}},[s.id,c,d,l]);return e.jsx(e.Fragment,{children:e.jsxs(xo.div,{className:"flex h-16 w-full px-2 sm:px-4",...Ao,children:[e.jsx("div",{className:"flex items-center justify-self-start text-start",children:e.jsx(Fo,{onClose:()=>{a(),l("/",{replace:!0})}})}),e.jsx("div",{className:"flex w-full flex-1 flex-col items-center justify-center justify-self-stretch",children:e.jsx(Oo,{areButtonsFullWidth:!0,post:s,setIsReportModalOpen:o})}),e.jsxs("div",{className:"flex items-center justify-self-end text-end",children:[s.permissions.can_delete&&e.jsx(Do,{tooltip:c.formatMessage({id:"postReceiverModal.deletePost",defaultMessage:"Delete"}),onClick:r,children:e.jsx(Ns,{})}),t]})]})})}function Hs({post:s,onClose:o}){const a=B(),{data:t}=No(a,os.Post),l=ce(),c=To(a,l,s.id,os.Post);if(t==null)return null;const d=`Report ${s.text??"Post"}`;return e.jsx(Eo,{reasons:t.reasons,submitReport:c,title:d,onClose:o,header:t.header,subHeader:t.header_explanation})}function In(){const s=i.useContext(Ts),o=s?.postWithProfile?.post,a=s?.setIsReportModalOpen;return!o||!a?null:e.jsxs("div",{className:"outline-token-border-default mx-4 flex items-center justify-between gap-2.5 rounded-2xl py-1 ps-4 pe-0.5 outline-1 outline-offset-[-1px]",children:[e.jsx("span",{className:"text-token-text-secondary justify-center text-sm leading-tight",children:e.jsx(re,{id:"e2L5bY",defaultMessage:"Content created using ChatGPT"})}),e.jsx(et,{size:"default",contentAlign:"end",sideOffset:4,triggerButton:e.jsx(ko,{className:"rounded-full",label:"",icon:e.jsx(tt,{className:"icon-sm"})}),children:e.jsx(st.Item,{icon:ks,onClick:()=>a(!0),children:e.jsx(re,{id:"jHHbcM",defaultMessage:"Flag content as unsafe"})})})]})}function zn(){const s=i.useContext(Ts),o=s?.postWithProfile?.post,a=s?.setIsReportModalOpen;return!o||!a?null:e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(re,{id:"iRpGVT",defaultMessage:"Content created using ChatGPT. <reportButton>Report</reportButton> if unsafe.",values:{reportButton:t=>e.jsx("button",{className:"text-token-text-primary decoration-token-text-primary underline",onClick:()=>{a(!0)},children:t})}})})}function Gn({projectResource:s}){const o=ce(),a=B(),t=s.gizmo?.id,l=ye(t),c=ee(ie),d=us(),r=Ps(),n=(()=>{const S=r.pathname.replace(/\/+$/,"");return/^\/g\/[^/]+\/project$/.test(S)})(),p=s.gizmo?.sharing?.subjects?.length??0,v=s.gizmo.display.name,m=Q(()=>Bo(a,s)),f=Q(()=>Io(a,s));if(!(l&&p>0&&!c&&!d&&!n)||s.gizmo.gizmo_type!==lt.PROJECT)return null;const h=v?o.formatMessage(De.openProjectHome,{projectName:v}):o.formatMessage(De.openProjectHomeFallback),w=ct(a,s),b=e.jsx(e.Fragment,{children:e.jsx(Ms,{to:w,"aria-label":h,className:"hover:bg-token-bg-tertiary focus-visible:outline-token-outline-primary text-token-text-secondary ms-2 inline-flex h-9 w-9 items-center justify-center rounded-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:e.jsx(Lo,{color:m,emoji:f,strict:!0,isSharedProject:!0})})});return e.jsxs("div",{className:"flex items-center max-md:hidden",children:[e.jsx(ms,{label:v??o.formatMessage(De.projectNameFallback),children:b}),e.jsx(Ho,{className:"icon-sm text-token-text-tertiary","aria-hidden":"true"})]})}const De=vo({openProjectHome:{id:"threadHeader.openProjectHome",defaultMessage:"Open {projectName} project"},openProjectHomeFallback:{id:"threadHeader.openProjectHomeFallback",defaultMessage:"Open project home"},projectNameFallback:{id:"threadHeader.projectNameFallback",defaultMessage:"Project"}});function Un(s){const o=q.getConversationTurns(s),a=o.findIndex(l=>l.role===dt.Assistant);if(a===-1)return;const t=o[a];for(let l=0;l<t.messageGroups.length;l++)if(t.messageGroups[l].type===is.SearchGPTQuery){const d=t.messageGroups.slice(l+1).find(({type:n})=>n===is.Text);if(d==null)return;const r=ut(d.messages[0]);if(r?.[0]?.type==="navigation")return{turnIndex:a,navigationCitation:r[0],message:d.messages[0]}}}function Wn(s,o){if(o==null||s==null)return s;const a=new Set(s.domains.map(t=>t.url));return{...s,domains:[...s.domains,...o.domains.filter(t=>!a.has(t.url))],safe_urls:[...s.safe_urls??[],...o.safe_urls??[]]}}function Vn({query:s}){return e.jsx(he,{horizontalPadding:"standard",children:e.jsx(J,{className:Es({isUserTurn:!0}),children:e.jsx("div",{className:Fn(!0),children:e.jsx(zo,{containsImagesOrAttachments:!1,children:e.jsx(Go,{text:s})})})})})}function qn({clientThreadId:s,prefetchNavlink:o,clearPrefetchNavlink:a}){const t=i.use(o),l=B(),c=Z(l,"1032814809");i.useEffect(()=>{window.__oai_SSR_NAVLINK&&Uo.logEvent("Search Tool Page Load Time To Fast Nav SSR",{server_timing:t?.timing},window.__oai_SSR_NAVLINK)},[]),i.useEffect(()=>{t==null&&a()},[t,a]);const d=i.useMemo(()=>t==null?null:{...t.navlink,domains:t.navlink.domains.map(p=>({...p,subtitle:p.subtitle??p.domain}))},[t]),r=le(s,Un),n=i.useMemo(()=>Wn(d,r?.navigationCitation),[r,d]);return t==null||n==null?null:e.jsxs("div",{children:[e.jsx("div",{className:"mt-10",children:e.jsx(he,{horizontalPadding:"standard",children:e.jsxs(J,{className:Es({isUserTurn:!1}),children:[e.jsx(Wo,{clientThreadId:s,turnIndex:r?.turnIndex??2,nextMessage:r?.message,navigationCitation:n}),c?e.jsxs("div",{className:"text-token-text-secondary relative -top-2 flex justify-end gap-2 font-mono text-xs",children:[e.jsxs("div",{elementtiming:"navlink",children:["server: ",t.timing,"ms"]}),e.jsx(Kn,{})]}):null]})})}),e.jsx(Vo,{scriptSrc:"requestAnimationFrame(()=>window.__oai_SSR_NAVLINK=window.__oai_SSR_NAVLINK||performance.now());"})]})}function Kn(){const[s,o]=i.useState(null);return i.useEffect(()=>{const a=new PerformanceObserver(t=>{t.getEntries().forEach(l=>{if(l.identifier==="navlink"){const c=l.renderTime;o(d=>d??c)}})});return a.observe({type:"element",buffered:!0}),()=>a.disconnect()},[]),s==null?null:e.jsxs("span",{children:["render: ",s,"ms"]})}function Ls(s){const{prefetchNavlink:o,clearPrefetchNavlink:a,clientThreadId:t,pageLoadSearchQuery:l}=s,c=B(),d=qe(c),r=qo(t),n=Ko(),p=$o(),{isOpen:v}=Rs(),m=p.store.useContentAreaDimensions(Qo.Header,h=>h?.height?h.height:void 0);let f=e.jsx($n,{isNewScrollEnabled:d,...s});const u=Qe();return u&&(f=e.jsx(_n,{clientThreadId:t,children:f})),f=e.jsx(As,{clientThreadId:t,children:f}),e.jsxs("div",{onCopy:r,className:F("flex flex-col text-sm",se(c)&&u?"pt-4":"thread-xl:pt-header-height",n&&"keyboard-open:pb-[calc(var(--composer-height,100px)+var(--screen-keyboard-height,0))]",m?null:!d&&(v?"max-sm:pb-25":"pb-25")),style:{paddingBottom:m},children:[l&&e.jsx("div",{children:e.jsx(Vn,{query:l})}),o?e.jsx(mt,{name:"prefetch-navlink",onError:h=>{be.addError("Error with prefetch navlink",{error:h}),a()},children:e.jsx(i.Suspense,{fallback:null,children:e.jsx(qn,{clientThreadId:t,prefetchNavlink:o,clearPrefetchNavlink:a})})}):null,e.jsx(ps,{children:f})]})}function $n({onRequestCompletion:s,clientThreadId:o,scrollContainerRef:a,isNewScrollEnabled:t}){const l=B(),[c,d,r]=le(o,y=>[q.getConversationTurnIds(y),y?.conversationOrigin===xs.APPLE,y?.scrollToMessageId]),n=Ie(),p=_e(),v=hs(),m=Yo(),[f]=Xo(),u=Zo(),[h]=Jo(),w=pt(o);ea({isSharedConversation:n,clientThreadId:o}),i.useEffect(()=>{n&&(pe.logEvent("chatgpt_continue_conversation_page_loaded"),K.logEvent("Continue Conversation: Page Loaded"),pe.logEvent("chatgpt_conversation_share_page_loaded"),K.logEvent("Share Public Chat: Shared Conversation Loaded"))},[n]);const b=i.useCallback(()=>{t||m({behavior:"smooth"})},[t,m]),[S,k]=ee(y=>[Pe(y),ie(y)]),M=k||se(l)&&S,[_,A]=i.useState(!1),N=(_||!1)&&!k,x=i.useRef(null),g=sa(o),T=p&&!v;return e.jsxs(e.Fragment,{children:[T&&e.jsx(In,{}),n&&e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx("p",{className:"text-xs text-gray-500",children:e.jsx(re,{id:"threadLayout.sharedConversationCopyDisclaimer",defaultMessage:"This is a copy of a conversation between ChatGPT & Anonymous."})})}),e.jsx("div",{className:"text-token-text-primary mb-5 text-center text-xs font-semibold",children:e.jsx("button",{onClick:()=>{Ce.openModal(gs.ReportConversation),pe.logEvent("chatgpt_conversation_share_report_content_clicked",null,{location:"Static Shared Thread Page"}),K.logEvent("Share Public Chat: Report Content Clicked",{location:"Dynamic Shared Thread Page"})},children:e.jsx(re,{id:"thread.reportSharedConversation",defaultMessage:"Report conversation"})})})]}),c.map((y,E)=>e.jsx(kn,{isFinalTurn:E===c.length-1,turnIndex:E,clientThreadId:o,onRequestCompletion:s,currentModelId:w?.id??null,scrollToBottom:t?void 0:b,scrollToMessageId:t?void 0:r,dateHeaderType:g(E),hideUserActions:M},y)),!t&&e.jsxs(e.Fragment,{children:[a?.current&&e.jsx(fs,{setIsScrolledToEdge:y=>{A(y)},options:{root:a.current,threshold:0,rootMargin:"0%"}},"threadBottomEdgeScrollObserver"),e.jsx("div",{ref:x}),d&&f&&!h&&e.jsx(ta,{className:F("translate-y-[10px] md:translate-y-[30px]"),onClick:()=>{pe.logEvent("chatgpt_thread_scroll_to_top"),u({behavior:"smooth"})},children:e.jsx(oa,{className:"icon text-token-text-primary"})}),e.jsx(aa,{show:N,className:F("bottom-[calc(var(--composer-overlap-px)+--spacing(6))]"),onClick:()=>{pe.logEvent("chatgpt_thread_scroll_to_bottom"),x.current?.scrollIntoView({behavior:"smooth",block:"end"})}})]})]})}const Qn=({clientThreadId:s,isNewThread:o,isGizmoThread:a,isProjectThread:t,isModelLoaded:l,currentModelId:c,onRequestCompletion:d,shouldUseUnifiedComposer:r,onlyAllowImageUploads:n,isWidgetFullScreen:p=!1,layoutMode:v})=>{const[m,f]=i.useState(!1),u=B(),h=vs(),{pageType:w}=na(),b=w?.type==="landing-page",S=ht(w?.type),k=Fs(s).isOdysseyMode,M=Ss(u),_=ze(),A=we(),N=ce(),x=Ge(u);ra(h);const g=ee(ie),T=Q(ls.sidebarUrlTrayOpen$),y=Q(ls.context$),E=gt(),te=g&&T,{platformConnectors:O}=ft(),U=xt(vt.hasSeenOdysseyConnectorsModal),oe=le(s,R=>q.getConversationTurns(R).some(H=>H.messages.some(j=>j.metadata?.n7jupd_message))),ge=Ie(),fe=_e(),ae=(ge||fe)&&oe;St(async()=>{if(te){const R=E?[E]:[],H=typeof performance<"u"?performance.now():Date.now();try{const j=await Lt(y,Bt,R),L=Math.round((typeof performance<"u"?performance.now():Date.now())-H);return j!=null?K.logEventWithStatsig("kaur1br5: Sidebar context collected","chatgpt_sidebar_context_collected",{duration_ms:L,count:Array.isArray(j)?j.length:1}):K.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",{duration_ms:L,failure_reason:"null"}),j}catch(j){const L=Math.round((typeof performance<"u"?performance.now():Date.now())-H),z=j instanceof It;K.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",{duration_ms:L,failure_reason:z?"timeout":"error",...j&&typeof j=="object"&&"message"in j?{error_message:String(j.message)}:j?{error_message:String(j)}:{}});return}}});const{composerThinkingEffort$:xe}=jt(h),D=async R=>{if(Mt(s)?.isLoading!==!1)return;const H=()=>{const W=Ft(h);Ot(W),Dt(W,R.contentToSend.content),Ht(W)},j=await fa({...R,clientThreadId:s,thinkingEffort:c===_t?kt(xe):void 0}),L=j.completionMetadata?.systemHints?.includes(He),z=Array.from(R.selectedSources??[]).filter(W=>W!=="web")[0];if(L&&z&&U.eligible){const W=Nt[z]??z,ne=O.get(W);if(ne){let G=!1;Tt(u,xa,{connector:ne,onConfirm:()=>{U.markAsViewed(),G=!0,d(j)},onTurnOffConnectors:()=>{Et(s,V=>{V.selectedSources??=new Map,V.selectedSources.set(E,new Set(["web"])),V.selectedMCPSources??=new Map,V.selectedMCPSources.set(E,new Set),V.mentionedSources=new Set,Rt({selectedSourcesMap:V.selectedSources,selectedMCPSourcesMap:V.selectedMCPSources,scope:{userId:x?.authUserId,workspaceId:x?.id}})})},onClose:()=>{G||H()}});return}}g&&At()?.triggerProductEvent("messageSent"),P(j.promptMessage?.metadata?.attachments??[])&&d(j)},P=i.useCallback(R=>{let H=Ct;const j=R.reduce((z,ue)=>z+(ue.size??0),0);k&&(H=bt(u,"1504865540").get("max_file_size_mb",25));const L=j<=H*1024*1024;return L||A.danger(N.formatMessage({id:"odyssey.fileTooLarge",defaultMessage:"The attached files are too large. The maximum size is {maxFileSizeMB}MB."},{maxFileSizeMB:H})),L},[u,N,k,A]),Y=i.useCallback(R=>{K.logEvent("Continue Completion"),d(ia(R))},[d]),ke=la.useState(R=>R.isReplayEnabled),Ye=wt({clientThreadId:s}),Ne=yt({clientThreadId:s});if(Ye)return e.jsx(ca,{safetyLimited:Ne});const I=e.jsxs(e.Fragment,{children:[e.jsx(da,{clientThreadId:s}),e.jsxs(he,{verticalMargin:"none",verticalPadding:M?"last-standard":"none",horizontalPadding:g?"none":"standard",children:[p&&e.jsx(ua,{sideOffset:4,open:m,alignAgainstAnchor:"center",triggerButton:e.jsx("div",{className:F("absolute start-0 end-0 -top-10 justify-center pb-3 group-hover/thread-bottom-container:flex",m?"flex":"hidden"),children:e.jsx(Pt,{color:"secondary",size:"small",icon:m?pa:ha,className:"shadow-lg",onClick:()=>{f(!m)}})}),size:"none",children:e.jsx("div",{className:"flex h-96 overflow-y-auto",children:e.jsx(ma,{children:e.jsx(Ls,{onRequestCompletion:()=>{},clientThreadId:s,clearPrefetchNavlink:()=>{}})})})}),e.jsx(J,{children:ke?e.jsx(ga,{clientThreadId:s},s):ae?null:e.jsx(Rn,{clientThreadId:s,currentModelId:c,isNewThread:o,isProjectThread:t,hideHeader:o,onRequestCompletion:D,onContinueGenerating:Y,onlyAllowImageUploads:n,layoutMode:v})})]})]}),de=o&&e.jsx("div",{className:F("[display:var(--display-hidden-until-loaded,block)] md:absolute md:start-0 md:bottom-8 md:w-full"),children:e.jsx(he,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:e.jsx(J,{children:e.jsx(En,{className:"block flex-1"})})})});return r?e.jsxs(e.Fragment,{children:[!_&&de,e.jsx("div",{id:"thread-bottom",children:I}),_&&de,o&&!b&&!a&&!S&&!k&&!t&&e.jsx(Yn,{clientThreadId:s,currentModelId:c,isModelLoaded:l})]}):I},Yn=({clientThreadId:s,currentModelId:o,isModelLoaded:a})=>{const t=vs(),l=Q(va(t).shouldShowAutocomplete$),c=Os(),d=Sa({shouldBeEnabledForDefaultAssistant:!0,clientThreadId:s}),r=Ke({clientThreadId:s,variant:"banner"});return e.jsxs("div",{className:F(l&&"hidden"),children:[e.jsx(he,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:e.jsxs(J,{children:[!c&&e.jsxs(e.Fragment,{children:[!1,e.jsx(ja,{clientThreadId:s})]}),d==="tiles"?a&&o&&s?e.jsx(ba,{className:"mt-10 max-sm:hidden"}):null:d==="chips"?e.jsx(Ca,{clientThreadId:s,currentModelId:o,isModelLoaded:a}):null,r&&e.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:e.jsx(Ds,{})})]})}),c&&e.jsxs("div",{className:"thread-sm:flex mt-5 hidden flex-col gap-2",children:[e.jsx(wa,{}),e.jsx(ya,{}),e.jsx(Pa,{})]})]})};function Xn({className:s,threadHeaderDropdown:o,conversationActions:a,superWidgetTabs:t}){const l=B(),c=zt(),d=se(l),r=!(c&&!js(l)),n=t??e.jsx(Nn,{textClassName:"text-base"});return d?e.jsx(Jn,{className:s,conversationActions:a,threadHeaderDropdown:r&&o,superWidgetTabs:n}):e.jsx(Zn,{className:s,conversationActions:a,threadHeaderDropdown:r&&o,superWidgetTabs:n})}function Zn({className:s,conversationActions:o,threadHeaderDropdown:a,superWidgetTabs:t}){return e.jsxs("div",{className:F("grid w-full grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] lg:grid-cols-[1fr_auto_1fr]",ka("default"),s),children:[e.jsx("div",{className:"col-start-1 row-start-1 justify-self-start pe-2",children:a}),e.jsx("div",{className:"col-span-2 col-start-2 row-start-1 me-7 min-w-0 place-self-center [justify-self:end] lg:col-span-1 lg:me-0 lg:min-w-(--thread-content-max-width) lg:flex-1 lg:[justify-self:center]",children:t}),e.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible lg:flex",children:o})]})}function Jn({className:s,conversationActions:o,threadHeaderDropdown:a,superWidgetTabs:t}){const l=i.useRef(null),c=i.useRef(null),d=i.useRef(null),r=i.useRef(null);return Gt(()=>{const n=l.current,p=c.current,v=d.current,m=r.current;if(!n||!p||!v||!m)return;const f=()=>{const h=n.getBoundingClientRect().width,w=v.getBoundingClientRect().width,b=p.getBoundingClientRect(),S=m.getBoundingClientRect(),k=.5*(h-w),M=b.right>k;v.style.justifySelf=M?"start":"center";const _=b.width>0&&S.x-Ma>b.right?"contentAndHeader":"contentOnly";_a.set(_)},u=new ResizeObserver(f);return u.observe(n,{box:"border-box"}),u.observe(p,{box:"border-box"}),u.observe(v,{box:"border-box"}),f(),()=>{u.disconnect()}},[]),e.jsxs("div",{className:F("h-header-height grid w-full grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)]",s),ref:l,children:[e.jsx("div",{className:"z-10 col-start-1 row-start-1 hidden self-center justify-self-start pe-2 md:flex",ref:c,children:a}),e.jsx(J,{className:"col-span-3 col-start-1 row-start-1 w-full",children:e.jsx("div",{className:"w-full",ref:r})}),e.jsx("div",{className:F("no-scrollbar col-start-2 row-start-1 -mb-px h-full w-full min-w-0 overflow-x-auto overflow-y-hidden md:mt-[20px] md:h-[calc(100%-20px)]"),ref:d,children:t}),e.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible md:flex",children:o})]})}const er=({clientThreadId:s})=>{const o=B(),a=bs(w=>w.activeStageSidebar),t=Ue(s),l=Na(Ut.WorkspaceShareLinks),{isUnauthenticated:c}=ds(),d=Wt(),r=Cs(s),n=ye(r),p=Z(o,"16480203"),v=Ta(),m=Vt(),f=ee(Pe),u=l&&t&&!c&&!d&&(!n||p)&&!v&&!m&&!(se(o)&&f),h=!a;return e.jsx("div",{className:"flex items-center",id:"conversation-header-actions",children:e.jsx(On,{showShareButton:u,showProfileDropdown:h,clientThreadId:s})})},sr=ws(()=>ys(()=>import("./bq2te6493ahas5on.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(s=>s.GizmoUsingAsOwnerNotice)),tr="text-lg",or="icon-sm";function ar({clientThreadId:s,transparentBackground:o,isEmptyState:a}){const t=B(),l=qe(t),c=Cs(s),d=ye(c),r=Ea(),{data:n}=qt(c),p=Ge(t),v=ze(),m=hs(),[f,u]=ee(O=>[Pe(O),ie(O)]),h=Le(s),w=bs(O=>O.isConversationScrolledFromTop),b=le(s,q.hasUserMessage)||!h,S=_e(),k=S&&m,M=Qe()&&b&&!S,_=!c&&!M&&!u,A=Ke({clientThreadId:s,variant:"pill"})&&!k,N=!js(t),x=N&&!b;us();const g=e.jsx(As,{clientThreadId:s,children:e.jsx(er,{clientThreadId:s})}),T=f&&!M?{textClassName:tr,chevronClassName:or}:{},y=M?e.jsx(Xn,{threadHeaderDropdown:x?null:e.jsx(Oe,{clientThreadId:s,...T}),conversationActions:g}):u?e.jsx(Da,{clientThreadId:s}):v&&(d||!c)?x?null:e.jsx(Oe,{clientThreadId:s}):x?null:e.jsx(Oe,{clientThreadId:s,...T}),E=(()=>{const O="[box-shadow:var(--sharp-edge-top-shadow)]",U="[box-shadow:var(--sharp-edge-top-shadow-placeholder)]";return f&&se(t)?"":l?U+" group-data-scroll-from-top/thread:"+O:w?O:U})(),te=Q(()=>$e(We(t,s)).hasPinnedWidget$());return e.jsxs(e.Fragment,{children:[e.jsxs(Ra,{id:"page-header",className:F("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition",!M&&!u&&"max-md:hidden",a&&"absolute start-0 end-0",d&&h&&"sharp-edge-on-scroll-start sticky top-0",_&&"thread-xl:absolute thread-xl:start-0 thread-xl:end-0 thread-xl:shadow-none!",_&&!S&&!te&&"thread-xl:bg-transparent",o&&!S&&!M&&!u&&"bg-transparent",E,w&&A&&"thread-xl:bg-token-main-surface-primary thread-xl:[box-shadow:var(--sharp-edge-top-shadow)]!"),children:[!u&&e.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[n!=null&&p?.isWorkspaceAccount()&&n.gizmo.tags?.includes(Kt.WorkspaceDisabled)&&e.jsx(sr,{gizmo:n}),e.jsx(Aa,{gizmoId:c,clientThreadId:s}),A?e.jsx(Fa,{}):null,k&&e.jsx(zn,{})]}),e.jsxs("div",{className:F("flex",M||u?"w-full":"items-center"),children:[N&&Z(t,"2860321732")&&e.jsx(nr,{}),n&&e.jsx(Gn,{projectResource:n}),y]}),!M&&!u&&e.jsx("div",{className:"flex items-center",children:g})]}),r&&e.jsx(Oa,{})]})}const nr=()=>{const{resetThread:s}=Ve();return e.jsx(ms,{label:e.jsx(re,{id:"mG13YW",defaultMessage:"New chat"}),contentClassName:"cant-hover:hidden",triggerAs:null,children:e.jsx(Ms,{to:"/",className:"hover:bg-token-bg-tertiary group touch:h-10 flex aspect-square h-9 items-center justify-center rounded-[10px]",onClick:o=>{o.metaKey||o.ctrlKey?K.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab"):(K.logNewChatButtonClicked({location:"Anon desktop header"}),s(),o.preventDefault())},children:e.jsxs("div",{children:[e.jsx($t,{className:"icon-lg -m-1 group-hover:hidden"}),e.jsx(Ha,{className:"icon not-group-hover:hidden"})]})})})},rr=ws(()=>ys(()=>import("./ox6fgqsim11fqrz7.js"),__vite__mapDeps([14,1,2,3,15,6,7,16,17])));function ir({clientThreadId:s,isNewScrollEnabled:o,pageLoadSearchQuery:a,messagesVerticalAlign:t,footerRootContainerElementRef:l,threadRootRef:c,scrollContainerRef:d,hideHeader:r,children:n}){const[p]=So(),v=!!p.get("message"),m=B(),[f,u]=ee(S=>[ie(S),Pe(S)]),h=se(m),w=le(s,S=>S?.conversationOrigin===xs.APPLE),b=Q(()=>$e(We(m,s)).pinnedWidgetHeight$());if(o)return e.jsx(Pn,{allowScrollToEnd:!f,allowScrollToTop:!f&&w,clientThreadId:s,initScrolledToEnd:a==null&&!v,threadFooterRef:l,threadRootRef:c,children:n});{const S=e.jsx("div",{className:"relative h-full",style:{"--pip-widget-height":b?`${b}px`:"0px"},children:e.jsxs("div",{className:F("flex h-full flex-col overflow-y-auto",!u&&(b?"pt-(--pip-widget-height)":"thread-xl:pt-(--header-height)"),(u||f)&&h?"thread-sm:[scrollbar-gutter:stable_both-edges] [scrollbar-gutter:stable]":"[scrollbar-gutter:stable_both-edges]"),ref:d,children:[e.jsx(fs,{setIsScrolledToEdge:k=>{Ce.setIsConversationScrolledFromTop(k)},options:{root:d?.current}}),n]})});return a!=null?S:e.jsx(ps,{children:e.jsxs(i.Suspense,{fallback:null,children:[e.jsx(Mn,{}),S]})})}}const lr=function({clientThreadId:s,getGizmosCompletionParams:o,hideDisclaimer:a,hideHeader:t,messagesVerticalAlign:l="top",renderEmptyState:c}){"use forget";const d=Qt(),r=B(),n=Os(),p=qe(r),v=ze(),m=Yt(),{data:f}=Xt({isGizmo:!!m}),u=Zt(s),[h,w,b,S,k,M,_]=le(s,C=>[C?.isLoading,q.getCurrentLeafId(C),q.hasUserMessage(C),q.getConversationTurns(C).length,q.isArchived(C),C?.modelId,C?q.getGizmoId(C):m]),A=Ue(s),{prefetchSearchPromises:N}=Ve();i.useEffect(()=>La(r,s),[r,s]);const[x]=i.useState(N?.query),[g,T]=i.useState(N?.navlink);i.useEffect(()=>{h||(Le(s)?be.addTiming("chatgpt.web.chatPage.renderNewConversation"):be.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[s,h]);const{setTargetedContent:y}=Ba(),E=d?.includes(Jt),te=S>=2,[O,U]=ee(C=>[eo(C),ie(C)]),oe=Ie(),{hash:ge}=Ps(),fe=Me(),ae=_e(),{isOpen:xe}=Rs();i.useEffect(()=>{oe&&ge==="#report"&&(Ce.openModal(gs.ReportConversation),fe({hash:""},{replace:!0}))},[ge,oe,fe]);const D=!!_,P=Le(s)&&!te&&(cs(u)||u?.kind===so.GizmoTest)&&!oe&&!ae&&N==null&&(!O||D),Y=P&&!b&&N==null&&(!O||D),ke=U&&!b&&!D,Ne=to(f)?.id,I=M??Ne??null,de=!!M,R=oo.useStore();i.useEffect(()=>{if(I===ao)return R.setActiveSystemHint(He,{locked:!0,analyticsMetadata:{clientThreadId:s}}),()=>{R.setActiveSystemHint(null,{locked:!1,ifPrevSystemHint:He,analyticsMetadata:{clientThreadId:s}})}},[I,R,s]);const H=no(f?.models,I),j=Ia(s,u),L=za();i.useEffect(()=>{L||y(void 0)},[s,y,L,w]),i.useEffect(()=>{Ce.setIsConversationScrolledFromTop(!1)},[s]),i.useEffect(()=>{const C=new URLSearchParams(window.location.search),Se=C.get("src");if(Se==="history_search"){C.delete("src");const je=C.toString(),Zs=`${window.location.pathname}${je?`?${je}`:""}${window.location.hash}`;window.history.replaceState({},document.title,Zs)}A&&Se==="history_search"&&Be.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:A}},requestBody:{touch:!0},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{const je=ro(r);io(je,_)})},[r,A,_]);const z=i.useCallback(C=>{const Se={ctx:r,clientThreadId:s,...o?o(C):C};lo(Se)},[r,s,o]),ue=Ga(),W=co(),ne=i.useRef(null);ne.current=C=>{P&&!W&&!O&&uo(r,"3253785454").get("should_animate_composer",!1)?Ua({className:Wa["composer-slide"],update:()=>z(C)}):z(C)};const G=i.useCallback(C=>ne.current?.(C),[ne]);i.useEffect(()=>{ue.signalTransitionReady()},[ue,s]),Va(s,G),qa(),Ka(P);const V=$a({clientThreadId:s,handleRequestCompletion:G,prefetchSearchThreadIdPromise:N?.threadId})&&x==null,Te=i.useRef(null);i.useEffect(()=>{!ae&&!n&&(document.title=j??"ChatGPT")},[j,ae,n]);const Bs=Ss(r),Ee=Ge(r),Is=Ee&&!Ee.isTeam()&&!Ee.isEnterprisey(),Xe=!a&&!Bs&&!U&&!(P&&Is)&&cs(u),zs=Fs(s).isOdysseyMode,Ze=i.useRef(null),Je=i.useRef(null),es=Qa(C=>C.composerHeight),ss=!P&&!xe,Gs=ye(_),X=D&&Gs,me=Y&&!c&&D&&mo(r,_)&&Z(r,"1478278884"),Us=Qe()&&se(r)&&!Y,ve=!X,Ws=P,Vs=i.useCallback(()=>T(void 0),[]),{isSingleLine:ts}=po(),qs=!ho(),Re=Q(()=>$e(We(r,s)).displayMode$()==="fullscreen"),Ks=Ke({clientThreadId:s,variant:"banner"}),$s=P&&!D&&!qs?"center":"bottom",Qs=Ya();function Ys(){return e.jsx(bn,{clientThreadId:s,scrollContainerRef:Te})}function Xs(){return h||V?null:Y?me?e.jsx(Cn,{clientThreadId:s,gizmoId:_,currentModelId:I,onRequestCompletion:G}):c??e.jsx(e.Fragment,{children:D?e.jsx(wn,{clientThreadId:s,gizmoId:_,onRequestCompletion:G,currentModelId:I}):e.jsx(yn,{clientThreadId:s,currentModelId:I,isModelLoaded:de})}):te||x!=null?e.jsx(ir,{clientThreadId:s,isNewScrollEnabled:p,pageLoadSearchQuery:x,messagesVerticalAlign:l,footerRootContainerElementRef:Je,threadRootRef:Ze,scrollContainerRef:Te,hideHeader:t,children:e.jsx(Ls,{onRequestCompletion:G,clientThreadId:s,scrollContainerRef:Te,pageLoadSearchQuery:x,prefetchNavlink:g,clearPrefetchNavlink:Vs},s)}):null}return e.jsx(Xa.Provider,{value:g?"user-query-with-navlink":x?"user-query":null,children:e.jsx(Za,{serverThreadId:A,children:e.jsx(Ja,{clientThreadId:s,children:e.jsxs(go,{clientThreadId:s,children:[e.jsx(dr,{clientThreadId:s,conversationTurnsLength:S}),E&&e.jsx(rr,{}),!ae&&!n&&e.jsx(en,{children:j!=null&&e.jsx("title",{children:j})}),e.jsx(fo.Provider,{value:G,children:e.jsxs(sn,{children:[e.jsx("div",{id:"thread",ref:Ze,className:F("group/thread @container/thread h-full w-full",p&&dn.threadRoot),children:e.jsxs(Tn,{noKeyboard:!0,clientThreadId:s,currentModelConfig:H,className:F("composer-parent flex flex-col focus-visible:outline-0",!X&&"overflow-hidden",me?"min-h-full":"h-full"),children:[Ks&&Y&&!me&&!c&&e.jsx("div",{className:"flex justify-center pt-2 sm:hidden",children:e.jsx(Ds,{})}),!t&&e.jsx(ar,{transparentBackground:P&&!me,clientThreadId:s,isEmptyState:Y}),Z(r,"1909635392")&&e.jsx(tn,{clientThreadId:s}),e.jsxs("div",{className:F("relative basis-auto flex-col",ss&&"-mb-(--composer-overlap-px)",ss&&(ts?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),X||D||!P?"grow":"shrink",me?"grid":"flex",!P&&"overflow-hidden",P&&n&&"sm:min-h-[21svh]!",P&&!X&&!D&&"flex-col justify-end max-sm:grow max-sm:justify-center sm:min-h-[42svh]"),style:{"--composer-height":es?`${es}px`:void 0},children:[Qs&&Ys(),Xs(),O&&ke&&e.jsx(on,{ctx:r}),Us&&e.jsx(an,{})]}),e.jsxs("div",{id:"thread-bottom-container",className:F("group/thread-bottom-container relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!P&&!Re&&"content-fade",ts&&"single-line",P&&"min-h-0",!Xe&&!U&&!zs&&"mb-4",D||X||!P?"":ve&&P&&"sm:grow",ve&&"flex flex-col",Re&&"z-60"),ref:Je,children:[k?e.jsx(nn,{clientThreadId:s}):e.jsxs(e.Fragment,{children:[(!P||ve)&&!xe&&e.jsxs(e.Fragment,{children:[e.jsx(Qn,{isGizmoThread:D,isProjectThread:X,clientThreadId:s,isNewThread:P,currentModelId:I,onRequestCompletion:G,shouldUseUnifiedComposer:ve,isModelLoaded:de,layoutMode:$s,isWidgetFullScreen:Re}),v&&P&&Z(r,"537200474")&&e.jsx(rn,{clientThreadId:s})]}),Ws&&e.jsx(ln,{clientThreadId:s,isGizmoThread:D,isNewThread:P,isProjectThread:X})]}),Xe?e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:e.jsx(cn,{clientThreadId:s})}):null]})]})}),e.jsx(un,{clientThreadId:s,isStaticSharedThread:!1,isSharedConversation:oe}),e.jsx(mn,{}),e.jsx(pn,{conversationId:s}),e.jsx(hn,{}),e.jsx(gn,{})]})})]})})})})},wr=_s.memo(lr);function cr({clientThreadId:s,conversationTurnsLength:o}){const a=B(),t=Ue(s),l=Z(a,"733205176");return fn(t,l),xn(),vn(),Sn(s),jn(o,s),null}const dr=_s.memo(cr);export{er as C,wr as M,Cr as P,Hs as a,Gn as b};
//# sourceMappingURL=m45qhi5lpgsvsv3e.js.map
