import{r as l,j as t}from"./cs7toih8jegb7teq.js";import{bt as x,T as p,g as S,iU as _,v as g,N as j,gG as A}from"./dmck639k4dv7claj.js";import{S as M}from"./j016trxwqzgsccq0.js";import{fh as v,fi as w,f0 as O,fj as E,fk as N,fl as T,fm as b,fn as C}from"./hnw079jsdm76umup.js";import{u as R}from"./lrrqf1wrtr1tx2vp.js";function P(o,s){const{automationId:n,automationTitle:e,automationMessage:c}=l.useMemo(()=>{const u=s.find(d=>d.author.role===x.Assistant),r=u?p.getParentPromptNode(S(o),u.id):null;let a=r?.message.metadata;a?.real_author_type||(a=s.find(h=>h.metadata?.real_author_type==="automation")?.metadata);const m=a?.real_author_type==="automation"?a?.real_author_id:null,i=a?.real_author_title;return{automationId:m,automationTitle:i,automationMessage:r?.message}},[o,s]),{automation:f}=R(n??"");return{automationId:n,automation:f,automationTitle:e,automationMessage:c}}function G({clientThreadId:o,messages:s}){const{automationId:n,automation:e,automationTitle:c}=P(o,s),u=v(o).isOdysseyMode||s.some(i=>i.metadata?.n7jupd_message),r=_(o)?.value,{isScheduledRun:a}=l.useContext(w),[y,m]=l.useState(!1);return l.useEffect(()=>{n&&g.count(j.JAWBONE,"jawbone_automation_source_header.open")},[n]),n?a?t.jsx("div",{className:"relative my-2 w-full",children:t.jsx(O,{automation:e,fullWidth:!0})}):u?r===A.REALTIME?null:t.jsx(E,{clientThreadId:o,children:t.jsx(N,{children:({isScheduled:i,isScheduledRun:d})=>i&&d&&t.jsx(T,{})})}):t.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[t.jsx(M,{className:"icon-sm"}),t.jsx("button",{onClick:()=>{m(!0)},children:e?.title??c}),y&&e&&t.jsx(b,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:t.jsx(C,{item:e,source:"chat",onClose:()=>{m(!1)}})})]}):null}export{G as AutomationSourceHeader};
//# sourceMappingURL=icf9zxqo8pqfufc0.js.map
