import{lU as I,d8 as h,gZ as l,ec as R,gw as E,bi as M,aB as T,ay as F,fv as B,d_ as O,dq as _,gT as A}from"./dmck639k4dv7claj.js";import{O as D,b as H,a as N,r as s,f as Q,j as e}from"./cs7toih8jegb7teq.js";import{C as k}from"./pe95y8sy3hzkar72.js";import{r as L,u as $,s as q,C as y,a as G,g as K,b,T as U,c as V}from"./hnw079jsdm76umup.js";import{T as W,C as Z}from"./eh7uqg5mp7upirpn.js";import{g as z}from"./zpmtm193hf9al87a.js";import{C as j,T as J}from"./c070u4alslgy7i5z.js";import"./kwms1ugj73bjxgnk.js";import"./n8303igkzlzv9639.js";import"./ns51nblw8ziscsgd.js";import"./jy1u8exw8iz2slve.js";import"./dtz2gnda2vx03dil.js";import"./gy64pge8qevmvg7e.js";import"./de5hn4293vtnpm6c.js";import"./g61ghrdmm0y010eo.js";import"./cm813h9bptrniota.js";import"./kl7c6054usfnqmd4.js";import"./mia7qmdupqoji40k.js";import"./dfaaf8463nahnfzk.js";import"./op8kqjb1v00a035k.js";import"./icwejktgx2db5g2x.js";import"./epuqxu07prihsdka.js";import"./nlxagrvvx9r77jf7.js";import"./gqxnaj28dwt74usv.js";import"./dfhgw8mxn1h3ecpw.js";import"./nxes2g8vblrs3vjj.js";import"./bk8slwxjkdlmxjxm.js";import"./na0t6wj09rfp0awn.js";import"./liqaqj2w179grtbv.js";import"./d0qctmhgeexj40hp.js";import"./mahhuo4zclh446vl.js";import"./l1m3l5lbmhuctzw6.js";import"./ljj1p3s92okaif60.js";import"./fq8kbeg5idktxg5a.js";const Oe=()=>(L(),null),_e=I(function(){const a=D(),[o]=H(),u=N(),p=h(a.conversationId),i=l(o.get("readonly"),!1),c=l(o.get("isFullScreen"),!1),d=l(o.get("header"),!0),m=l(o.get("appPreview"),!1),r=R(),x=E(),w=l(o.get("hideBottomComposer"),!!i),n=h(a.canmoreId),t=p,f=$();s.useEffect(()=>{q({type:y.Textdoc,textdocId:n})},[n]),G(t,{kind:M.PrimaryAssistant});const g=Q();if(s.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{g.invalidateQueries(K({clientThreadId:t}))},0),T.releaseThread(t)}),[t,g]),s.useEffect(()=>{n||u("/")},[n,u]),s.useEffect(()=>{b().sendMessage({type:j.Loaded})},[n]),!n||f?.type!==y.Textdoc)return null;const P=()=>{b().sendMessage({type:j.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(F,{clientThreadId:t,children:e.jsx(B,{clientThreadId:t,children:e.jsx(U,{clientThreadId:t,children:m?e.jsx(O,{children:e.jsx(X,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(W,{clientThreadId:t,disableScroll:!r,textdocId:f.textdocId}),e.jsx(Z,{})]}):e.jsx(J,{isEmbedded:!0,hideRunCode:!r,isFullScreen:c,hideHeader:!d,hideBottomComposer:w,isReadonlyFromQueryParam:i,hideRenameButton:x,clientThreadId:t,focusedTextdoc:f,onClose:P},"textdocContent")})})})]})}),X=({textdocId:C})=>{const a=s.useRef(null),o=V(C),[u,p]=s.useState(!1),i=o?.versions??[],c=_(i),d=s.useCallback(A(async m=>{const r=z(m.type,m.content);if(a.current&&(r==="react"||r==="html")){p(!0);const v=a.current.evalAsync({language:r,code:m.content});for await(const x of v)console.debug(x)}p(!1)},100),[]);return s.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(k,{id:C,visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Oe as clientLoader,_e as default};
//# sourceMappingURL=mrj08zgbub3g5u6p.js.map
