const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/f3ujsehdninu5f1m.js","assets/l6lryjpkt8rv0lpy.js"])))=>i.map(i=>d[i]);
import{U as u,s as d,fo as f,O as c,bm as p,a2 as i,r as b}from"./mnkup87aq6tfilq5.js";import{r as l,u as S}from"./l6lryjpkt8rv0lpy.js";import{d as w}from"./dvllb5fed1b4y7k1.js";async function y(e){const n=await p(()=>import("./f3ujsehdninu5f1m.js").then(t=>t.i),__vite__mapDeps([0,1]));if(i!=null&&e?.startsWith(i))return!0;try{return n.get(new URL(e??"").hostname)==="openai.com"}catch{return!1}}function D(e,n){const t=f();return S({queryKey:["safe-url",{serverThreadId:e,url:n,isHistoryAndTrainingDisabled:t}],queryFn:async()=>{if(e==null||n==null)throw new Error("Unexpected falsey useSafeUrlQuery");return await y(n)||b(e)?.safeUrls.includes(n)?{safe:!0}:c.getConversationSafeUrls(e,n,t)},enabled:e!=null&&n!=null})}function g(e,n,t=!0){const s=u(e,o=>n!=null&&d.isThreadUrlSafe(o,n)),{data:{safe:r}={}}=D(e,s?void 0:n);return s||r||!t?n:void 0}function F(e,n,t=!0){const s=_(n,500);return g(e,s,t)}function _(e,n){const[t,s]=l.useState(void 0),[r]=l.useState(()=>w(o=>{s(o)},n));return l.useEffect(()=>{r(e)},[r,e]),t===e?e:void 0}function V(e,n){const t=f(),s=u(e,o=>o?.safeUrls??[]),{data:r=[]}=S({queryKey:["safe-urls",e,n,t,s],queryFn:async()=>{const o=s.filter(a=>n.includes(a)),m=n.filter(a=>!o.includes(a)),U=(await Promise.allSettled(m.map(async a=>{if(await y(a))return a;if(e==null)return null;try{return(await c.getConversationSafeUrls(e,a,t)).safe?a:null}catch{return null}}))).map(a=>a.status==="fulfilled"?a.value:null).filter(a=>a!=null);return o.concat(U)},enabled:e!=null&&n.length>0});return r}export{F as a,V as u};
//# sourceMappingURL=jm8zus0mi88xmv2y.js.map
