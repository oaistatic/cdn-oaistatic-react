import{e_ as S,fi as E,cR as g,fj as M,eC as F,ac as B,Q as T,bk as N,q as O}from"./mnkup87aq6tfilq5.js";import{z as _,h as A,d as Q,r as o,a as k,j as e}from"./l6lryjpkt8rv0lpy.js";import{t as y,a as l,u as q,s as D,C as j,b as H,g as b,T as L,c as $,d as K}from"./dvllb5fed1b4y7k1.js";import{g as V,C as z}from"./za47cv3m73qs1c5u.js";import{T as G,C as W}from"./l58xqim068at8mva.js";import{C as w,T as J}from"./byuiu3x6cts4tfgw.js";import{C as U}from"./4wfwbvmzqu7tbfmg.js";import"./oik4rnml2048h1rb.js";import"./l4ce2zdnnawhaijx.js";import"./gy64pge8qevmvg7e.js";import"./h4jw8c63q447uotc.js";import"./ele1ib7knnne85uk.js";import"./d6vtla9za6od171e.js";import"./gffbkcdjbbbnp8kb.js";import"./no74ca53mzecj421.js";import"./cbms2jcglp4b707f.js";import"./1e3kywkhcjn5spyo.js";import"./f651cyqvxf3m7zo6.js";import"./0b2acbvk15dg7sha.js";import"./jnjzqafy9dn7o7ce.js";import"./cgqlugpygnveiuks.js";import"./fzrn137102spawew.js";import"./gry6c7en9b8uaktm.js";import"./ipgaseve9xp2bi1a.js";import"./dssqb33wed4i78fb.js";import"./d5w25xgxcglldc4u.js";import"./nxg0mr2frwehg6na.js";import"./lrbwp2trsv9othld.js";import"./bk8slwxjkdlmxjxm.js";import"./hjvhqy8z9mtcdx24.js";import"./bec9qm8zi6ffweg0.js";import"./jm8zus0mi88xmv2y.js";import"./ffxduo863rikjmz1.js";const Fe=()=>(E(),null),Be=S(function(){const a=_(),[s]=A(),u=Q(),p=y(a.conversationId),i=l(s.get("readonly"),!1),c=l(s.get("isFullScreen"),!1),d=l(s.get("header"),!0),m=l(s.get("appPreview"),!1),r=g(()=>M()),C=g(()=>F()),I=l(s.get("hideBottomComposer"),!!i),n=y(a.canmoreId),t=p,f=q();o.useEffect(()=>{D({type:j.Textdoc,textdocId:n})},[n]),H(t,{kind:B.PrimaryAssistant});const h=k();if(o.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),T.releaseThread(t)}),[t,h]),o.useEffect(()=>{n||u("/")},[n,u]),o.useEffect(()=>{b().sendMessage({type:w.Loaded})},[n]),!n||f?.type!==j.Textdoc)return null;const P=()=>{b().sendMessage({type:w.Close})},R=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(U,{clientThreadId:t,children:e.jsx(L,{clientThreadId:t,children:m?e.jsx(N,{children:e.jsx(X,{textdocId:f.textdocId})}):R?e.jsxs(e.Fragment,{children:[e.jsx(G,{disableScroll:!r,textdocId:f.textdocId}),e.jsx(W,{})]}):e.jsx(J,{isEmbedded:!0,isFullScreen:c,hideHeader:!d,hideBottomComposer:I,isReadonlyFromQueryParam:i,hideRenameButton:C,hideRunCode:!r,clientThreadId:t,focusedTextdoc:f,onClose:P},"textdocContent")})})]})}),X=({textdocId:x})=>{const a=o.useRef(null),s=$(x),[u,p]=o.useState(!1),i=s?.versions??[],c=O(i),d=o.useCallback(K(async m=>{const r=V(m.type,m.content);if(a.current&&(r==="react"||r==="html")){p(!0);const v=a.current.evalAsync({language:r,code:m.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(z,{visuallyHidden:!u,ref:a,enableTransition:!0,title:""})};export{Fe as clientLoader,Be as default};
//# sourceMappingURL=ee4tvljvp4da4phz.js.map
