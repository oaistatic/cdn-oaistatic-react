import{j as e,M as g,e as V,r as x,au as R,d as W,R as m,aw as Y}from"./l6lryjpkt8rv0lpy.js";import{aw as w,P as S,ea as Z,U as J,s as K,gp as $,bT as U,d6 as Q,df as ee,d as p,cF as ae,cG as te,cy as se,cA as ne,h as ie,dj as re,bR as C,aj as oe,e6 as l,e5 as le,bk as y}from"./mnkup87aq6tfilq5.js";import{gn as ce,go as de,gp as ue,i as T,bu as ge,w as N,U as f,eX as b,f0 as he,gq as fe,gr as B,ag as xe,gs as me,gt as be,aK as Se,gu as pe,J as ve,gv as je,X as A,_ as Ce,$ as ye,a0 as we,fU as Ne,Y as ke,Z as Me}from"./dvllb5fed1b4y7k1.js";import{U as Be,C as Re}from"./lpa0sb8hkyi7pmml.js";import{N as z,d as Ue}from"./4wfwbvmzqu7tbfmg.js";function We({onClick:t,className:s,...a}){return e.jsx(Ue,{onClick:t,className:p(s,"flex-grow overflow-hidden"),...a})}function Ye({onNewChatButtonClick:t}){const{isUnauthenticated:s,isLoading:a}=w();return a||!s?null:e.jsx(z,{className:"mr-3",onClick:()=>{S.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function Ze({onNewChatButtonClick:t,clientThreadId:s}){const{isUnauthenticated:a,isLoading:n}=w(),i=ce(),r=Z(s),o=de(r),c=J(s,K.getIsNewConversation),h=$(),d=c&&h&&o;if(n)return null;if(a)return i?e.jsx(Ae,{}):e.jsx(Te,{});const v=e.jsx(z,{onClick:()=>{S.logNewChatButtonClicked({location:"Mobile header"}),t()}});return d?e.jsx(ue,{layout:"compact",clientThreadId:s}):v}function Te(){const t=T(),s=ge(E.signUpButtonText);return e.jsx(U,{as:"button",size:"small",color:"primary",onClick:()=>{t({authType:"signup",callback:a=>{S.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:a})}})},children:e.jsx(g,{...s})})}function Ae(){const t=T();return e.jsx(U,{as:"button",size:"small",color:"primary",onClick:()=>{t({authType:"login",callback:s=>{S.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:s})}})},"data-testid":"mobile-login-button",children:e.jsx(g,{...Q.logInButtonText})})}function ze({onClick:t}){return e.jsxs("button",{type:"button",className:"inline-flex rounded-md hover:text-token-text-primary focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50",onClick:t,"data-testid":"open-sidebar-button",children:[e.jsx("span",{className:"sr-only",children:e.jsx(g,{...E.openSidebar})}),e.jsx(he,{className:"icon-lg mx-2 text-token-text-secondary"})]})}const Ee=({onClickOpenSidebar:t,children:s,showNavSidebar:a,leftContent:n,rightContent:i,bottomContent:r})=>{const o=N(d=>d.activeSidebar),c=V(),h=c.pathname+c.search+c.hash;return x.useEffect(()=>{o==="popover-nav"&&f.setActiveSidebar(!1)},[h]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"draggable sticky top-0 z-10 flex min-h-[60px] items-center justify-center border-transparent bg-token-main-surface-primary pl-0 md:hidden",children:[(a||n)&&e.jsxs("div",{className:"no-draggable absolute bottom-0 left-0 top-0 ml-3 inline-flex items-center justify-center",children:[a&&e.jsx(ze,{onClick:t}),n]}),e.jsx("div",{className:"no-draggable",children:s}),i&&e.jsx("div",{className:"no-draggable absolute bottom-0 right-0 top-0 mr-3 inline-flex items-center justify-center",children:i})]}),r&&e.jsx("div",{className:"no-draggable flex w-full items-center justify-center bg-token-main-surface-primary md:hidden",children:r})]})};function Ie({isPopoverOnDesktop:t=!1,isExpanded:s=!1,children:a}){const n=ee();return b.markStart("StageNavigationSidebar"),b.markRendered("StageNavigationSidebar"),e.jsxs(e.Fragment,{children:[!n||t?e.jsx(Pe,{children:a}):null,e.jsx(Le,{isExpanded:!t&&s,children:a})]})}function Le({isExpanded:t,children:s}){const a=x.useRef(null);return t&&b.trackNamespace(b.NS_SIDEBAR),e.jsx(R.div,{className:p("z-[21] flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary max-md:!w-0"),ref:a,initial:!1,animate:{width:t?"260px":0,transition:{type:"spring",bounce:.12,duration:.64}},onAnimationStart:()=>{a.current&&(a.current.style.visibility="visible")},onAnimationComplete:()=>{a.current&&(t||(a.current.style.visibility="hidden"))},children:e.jsx("div",{className:"h-full w-[260px]",children:e.jsx("div",{className:"flex h-full min-h-0 flex-col",children:s})})})}function Pe({children:t}){const s=N(a=>a.activeSidebar);return e.jsx(ae,{open:s==="popover-nav",onOpenChange:a=>{a||f.setActiveSidebar(!1)},children:e.jsxs(te,{children:[e.jsx(se,{className:"fixed inset-0 z-10 bg-gray-50/50 radix-state-open:animate-show dark:bg-black/50"}),e.jsx(ne,{className:"fixed left-0 top-0 z-50 h-full max-w-xs border-r border-gray-200 bg-token-sidebar-surface-primary shadow-[0_0_64px_0_rgba(0,0,0,0.07)] focus:outline-none radix-state-closed:animate-sidebarHide radix-state-open:animate-sidebarShow top-banner-visible:bottom-0 top-banner-visible:top-[--top-banner-height,0px] top-banner-visible:h-auto dark:border-gray-800",children:t})]})})}const E=ie({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}}),Fe=()=>{const{openSettings:t}=fe(),s=oe("3376455464")?.value,a=W();return e.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[e.jsx(B,{icon:xe,onClick:()=>{me(a),f.closeActiveSidebar()},children:e.jsx(g,{id:"0FupYP",defaultMessage:"New chat"})}),e.jsx("div",{className:"flex grow items-center justify-center",children:e.jsx(Be,{})}),e.jsxs(re,{contentClassName:"w-[298px]",triggerButton:e.jsx(B,{icon:be,children:e.jsx(g,{id:"y4Lkp7",defaultMessage:"Settings and more"})}),children:[e.jsx(C.Item,{onClick:()=>t(),icon:Se,children:e.jsx(g,{id:"HrRLkZ",defaultMessage:"Settings"})}),s&&e.jsx(C.Item,{icon:pe,onClick:()=>{f.openModal(ve.ReportConversation)},children:e.jsx(g,{id:"thread.report.0",defaultMessage:"Report illegal content"})}),e.jsx(C.Separator,{}),e.jsx(je,{})]})]})};function He({isExpanded:t,children:s}){const a=x.useRef(null),[n,i]=x.useState("400px"),r=m.isValidElement(s)?m.cloneElement(s,{setWidth:i}):s;return e.jsx(Y,{children:e.jsx(R.div,{className:"z-[1] flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary max-md:!w-0",ref:a,initial:!1,animate:{width:t?n:0,transition:{type:"spring",bounce:.12,duration:.3}},onAnimationStart:()=>{a.current&&(a.current.style.visibility="visible")},onAnimationComplete:()=>{a.current&&(t||(a.current.style.visibility="hidden"))},children:e.jsx("div",{className:p("absolute h-full",!t&&"pointer-events-none"),style:{width:n},children:e.jsx("div",{className:"flex h-full flex-col",children:r})})})})}const Je=({setWidth:t,clientThreadId:s})=>{const a=l("caterpillar"),n=l("searchSources"),i=l("summarizer"),r=l("retrievalResults"),o=A();return e.jsxs(e.Fragment,{children:[n&&e.jsx(Ce,{clientThreadId:s}),r&&e.jsx(ye,{clientThreadId:s}),o&&i&&e.jsx(we,{clientThreadId:s}),a&&e.jsx(Re,{taskId:a.caterpillarId,initialTab:a.initialTab,setWidth:t})]})};function I({children:t,hideNavigation:s=!1,mobileHeaderContent:a,mobileHeaderLeftContent:n,mobileHeaderRightContent:i,mobileHeaderBottomContent:r,sidebar:o,threadFlyout:c,forceOpenDesktopSidebar:h=!1}){const{isUnauthenticated:d}=w(),[v,L]=N(u=>[u.activeStageSidebar,u.activeSidebar]),P=le(),F=l("searchSources"),H=l("summarizer"),O=l("retrievalResults"),_=l("caterpillar"),D=Ne(),k=[];let M=null;m.Children.forEach(t,u=>{m.isValidElement(u)&&(u.type===I.Sidebars?M=u:k.push(u))});const j=!d&&!s&&o!=null,X=!s&&(j||d),G=A()&&!!H,q=P&&(!!F||G||!!O||!!_);return e.jsxs("div",{className:"flex h-full w-full flex-col",children:[e.jsx(y,{children:e.jsx(ke,{})}),e.jsxs("div",{className:p("relative flex h-full w-full flex-1 overflow-hidden transition-colors",L!=="popover-nav"&&"z-0"),children:[e.jsxs("div",{className:"relative flex h-full w-full flex-row overflow-hidden",children:[j&&e.jsx(Ie,{isExpanded:h||!D,isPopoverOnDesktop:v,children:d?e.jsx(Fe,{}):o}),e.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[X&&e.jsxs(y,{children:[e.jsx(Me,{}),e.jsx(Ee,{onClickOpenSidebar:()=>f.togglePopoverNavSidebar(),showNavSidebar:j,leftContent:n,rightContent:i,bottomContent:r,children:a})]}),e.jsx("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:k})]})]}),e.jsx(y,{children:e.jsx(He,{isExpanded:q,children:c})}),M]})]})}function Oe({children:t}){return e.jsx(e.Fragment,{children:t})}I.Sidebars=Oe;export{Je as F,I as S,Ye as a,Ze as b,We as c};
//# sourceMappingURL=d0ynpcmhn5mxx54e.js.map
