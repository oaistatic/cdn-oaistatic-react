const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lmu5ijtuajsul8il.js","assets/l6lryjpkt8rv0lpy.js","assets/mnkup87aq6tfilq5.js","assets/root-lwz5toux.css","assets/xq11fv8jhp26reio.js","assets/ff2abh898b896ubv.js","assets/dvllb5fed1b4y7k1.js","assets/conversation-small-ga20ijz2.css","assets/d5dy8hf2mc7pg2ry.js","assets/kr5ujwnfvcgoxrdb.js","assets/isfhv24v7f07hfar.js","assets/pc32gvx0zuzynmfl.js","assets/1e3kywkhcjn5spyo.js","assets/4wfwbvmzqu7tbfmg.js","assets/cbms2jcglp4b707f.js","assets/jnjzqafy9dn7o7ce.js","assets/hli3paxjs6c9ftyy.js","assets/h30lmxihx79lh0e9.js","assets/k0r4nt4e0ngxvcib.js","assets/lpa0sb8hkyi7pmml.js","assets/b389eodcyywjf70s.js"])))=>i.map(i=>d[i]);
import{j as e,L as Z,M as T,c as z,r as u,au as B,aw as ke,a as Oe,d as Le}from"./l6lryjpkt8rv0lpy.js";import{fw as J,bl as ee,bm as se,u as te,a6 as R,c2 as w,h as ne,dj as Ee,d as C,bk as Me,dU as ae,dg as re,aj as Te,aC as ze,d7 as Fe,gp as we,de as ie,e5 as _e,aF as Re,aq as Ae,I as Ge,ea as De,aw as oe,h9 as N,at as Pe,au as Be,fS as He,c1 as ce}from"./mnkup87aq6tfilq5.js";import{mc as G,o as le,bT as _,i2 as Ue,md as V,a4 as We,eT as de,eU as ue,jO as Ve,a2 as Ke,jG as qe,gz as $e,me as P,mf as me,mg as F,fG as Qe,mh as Xe,mi as Ye,lD as Ze,ag as Je,mj as fe,mk as xe,f1 as y,ak as he,i3 as es,i1 as ss,ml as K,eX as j,mm as ts,mn as q,mo as ns,mp as as,mq as rs,mr as is,ms as os,gs as cs,w as Se,mt as ls,fT as ds,U as ge,gr as us,fH as ms,mu as fs,aJ as xs,aI as hs,mv as Ss,mw as D,R as $,u as gs,ds as ps,mx as pe,my as vs,ar as bs,d1 as ve,ae as js,mz as Is,cC as be,eY as ys,mA as Cs,gq as Ns,hL as ks,bv as je,kV as Os,mB as Ls,P as Es,mC as Ms,mD as Ts,f0 as zs,mE as Fs,f2 as ws,c$ as _s}from"./dvllb5fed1b4y7k1.js";import{u as H,h as Rs}from"./4wfwbvmzqu7tbfmg.js";import{G as Ie}from"./hli3paxjs6c9ftyy.js";import{H as ye}from"./h30lmxihx79lh0e9.js";import{U as As,P as Gs}from"./lpa0sb8hkyi7pmml.js";import{i as Ds}from"./pc32gvx0zuzynmfl.js";import{C as Ps}from"./b389eodcyywjf70s.js";function Bs({gizmoResource:s,serverThreadId:n,isOnProjectPage:t,conversations:r,hasNextPage:a=!1}){const i=r??[],d=i.findIndex(c=>c.id===n),l=i.slice(0,G);d!=null&&d>=G&&(l[G-1]=i[d]);const m=a||i.length>G,o=J().activeServerThreadIds;return e.jsxs("div",{className:"flex flex-col screen-arch:gap-0.5",children:[l.map(c=>e.jsx(ye,{className:"ml-7 pl-1",item:c,isActiveInMainWindow:c.id===n,isActive:o.has(c.id)},c.id)),m&&!t&&e.jsx(Z,{to:le(s),className:"group ml-7 flex h-9 items-center gap-2.5 rounded-lg pl-3 pr-2 text-sm tracking-condensed text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:e.jsx("span",{className:"text-left",children:e.jsx(T,{..._.seeAllChats})})})]})}const Hs=ee(()=>se(()=>import("./lmu5ijtuajsul8il.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(Ce,{color:s})}),Us={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function Ws({color:s,folderState:n,gizmoId:t,sidebarSnorlaxFolderStore:r}){const a=z(),[i,d]=u.useState(!1);return e.jsx(w,{side:"top",sideOffset:4,delayDuration:600,label:n==="open"?a.formatMessage(_.hideChatsForProjectTooltip):a.formatMessage(_.showChatsForProjectTooltip),children:e.jsx("button",{onClick:l=>{l.preventDefault(),n==="open"?r.collapseProject(t):r.expandProject(t)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Hs,{isOpen:n==="open",isHovered:i,color:s})})})})})}function Ce({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center text-token-text-primary",children:e.jsx(Ue,{className:"h-3/4 w-3/4",style:{color:s}})})}function U({gizmo:s,historyDisabled:n,section:t,onClick:r,isActive:a,hideOverflowMenu:i=!1,elementRef:d}){const{clientThreadId:l}=H(),m=te(l),o=z(),[c,g]=u.useState(!1),[f,x]=u.useState(!1),b=s.gizmo.id,p=V.useStore(),h=V.useState(O=>V.selectFolderState(O,b)),I=R(),S=!!s.gizmo.tags?.includes(We.FirstParty),v=de(),k=ue(),{items:E=[],hasNextPage:M}=Ve(s.gizmo.id),L=Ke(b),Q=qe(s);let W=!1;a&&L&&!(h==="open"&&m)&&(W=!0),u.useEffect(()=>{h!=="open"&&a&&m&&p.expandProject(b)},[a,m,p,b]);let A;if(s!=null)A=s.gizmo.display.name||$e;else{if(I==null)return null;n?A=o.formatMessage(P.clearChat):A=fe}const X=v!=null&&v.kind==="conversation"&&(v.gizmoId==null||v.gizmoId!=b);return e.jsxs(e.Fragment,{children:[e.jsx(B.div,{onMouseEnter:()=>{x(!0)},onMouseLeave:()=>{x(!1)},onDrop:O=>{O.preventDefault(),X&&(k({newGizmoId:b,conversation:v.conversation,previousGizmoId:v.gizmoId??null}),x(!1))},onDragOver:O=>{O.preventDefault(),X&&x(!0)},onDragLeave:()=>{x(!1)},children:e.jsx(me,{loggingGizmoId:s?.gizmo.id??"primary",href:le(s),onClick:r,showActiveIndicator:W,isHovered:f,icon:L&&E.length>0?e.jsx(Ws,{color:Q,folderState:h,gizmoId:b,sidebarSnorlaxFolderStore:p}):L?e.jsx(Ce,{color:Q}):e.jsx(Ie,{isFirstParty:S,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:c,label:A,rightIcon:t===F.Workspace&&e.jsx(w,{side:"right",label:o.formatMessage(Y.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"}),children:e.jsx(Qe,{className:"icon-md text-token-text-secondary",alt:o.formatMessage(Y.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(f||c)&&!i&&(L?e.jsx("div",{className:"text-token-text-tertiary",onClick:O=>{O.preventDefault()},children:e.jsx(Xe,{gizmo:s,isOpen:c,setIsOpen:g})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:O=>{O.preventDefault()},children:e.jsx(Ye,{gizmo:s,isOpen:c,setIsOpen:g,section:t})})),!L&&!i&&e.jsx(w,{side:"right",label:o.formatMessage(n?P.clearChat:P.newChat),className:"flex items-center",children:e.jsx("button",{className:c?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx(Ze,{className:"icon-md"}):e.jsx(Je,{className:"icon-md"})})})]}),elementRef:d})}),e.jsx(ke,{initial:!1,children:L&&h==="open"&&E.length>0&&e.jsx(B.div,{initial:"closed",animate:"open",exit:"closed",variants:Us,className:"overflow-hidden",children:e.jsx(Bs,{gizmoResource:s,serverThreadId:m,isOnProjectPage:W,conversations:E,hasNextPage:M})},"nested-conversations")})]})}const Y=ne({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function Vs({currentGizmoId:s,onClick:n}){const{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:r}=xe(),a=t(y.Snorlax);return e.jsx("div",{className:"group flex w-full items-center justify-start",children:e.jsx(Ee,{onOpenChange:i=>r(y.Snorlax,i),side:"right",sideOffset:4,open:a,contentAlign:"end",triggerButton:e.jsxs("button",{className:C("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-1.5 text-sm tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-sidebar-surface-secondary focus:ring-0 screen-arch:py-[7px] screen-arch:text-body screen-arch:can-hover:hover:bg-token-main-surface-secondary motion-safe:active:scale-[98%] motion-safe:active:transition-transform",a&&"bg-token-main-surface-secondary"),onClick:n,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(he,{className:"icon-md font-semibold text-token-sidebar-icon"})})}),e.jsx("span",{className:"text-left",children:e.jsx(T,{..._.seeMoreProjectItems})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(Me,{children:e.jsx(es,{currentGizmoId:s,inSidebarFlyout:!0,customListItem:U})})})})})}function Ks({snorlaxes:s,currentGizmoId:n}){return e.jsx(e.Fragment,{children:s.map(t=>e.jsx(U,{gizmo:t.gizmo,isActive:t.gizmo.gizmo.id===n},t.gizmo.gizmo.id))})}function Ne({currentGizmoId:s,includeRevisedSidebarIa:n}){const t=z(),{snorlaxes:r,data:a,isLoading:i,isError:d,refetch:l,hasNextPage:m}=ss(),o=r.slice(0,K),c=u.useRef(!1),[g,f]=u.useState(!0),x=u.useCallback(function(L){L&&f(!1),l()},[l,f]),b=(r??[]).length===0,p=d||a===void 0&&!i&&c.current,I=ae()&&!p&&(a===void 0||i);j.markStart("SnorlaxSidebarList",j.NS_SIDEBAR),I||j.markRendered("SnorlaxSidebarList",j.NS_SIDEBAR),a===void 0&&!i&&!c.current&&(c.current=!0,x(!1));const v=r?.find(M=>M.gizmo.gizmo.id===s),k=o.some(M=>M.gizmo.gizmo.id===s),E=r&&(r?.length>(!s||k?K:K+1)||m);return e.jsxs(e.Fragment,{children:[p&&e.jsx(ts,{showRetry:g,refetch:x}),!p&&e.jsx(q,{id:"snorlax-heading",condensed:n,footer:I&&e.jsx(re,{className:"ml-2 self-center"}),header:e.jsxs(e.Fragment,{children:[t.formatMessage(_.projectsHeading),!b&&e.jsx(ns,{})]}),isLastInGroup:!0,ulClassName:"screen-arch:mb-3",children:!i&&e.jsxs(e.Fragment,{children:[e.jsx(Ks,{snorlaxes:o,currentGizmoId:s}),v&&!k&&e.jsx(U,{gizmo:v.gizmo,isActive:!0}),E&&e.jsx(Vs,{currentGizmoId:s}),!i&&b&&e.jsx(as,{})]})})]})}const jt=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxSidebarList:Ne},Symbol.toStringTag,{value:"Module"}));function qs({isNewConversation:s}){const n=rs(),{value:t,isLoading:r}=Te("2113934735");return j.markStart("OperatorSidebarListItem",j.NS_SIDEBAR),!r&&!t?j.cancelRender("OperatorSidebarListItem",j.NS_SIDEBAR):t&&j.markRendered("OperatorSidebarListItem",j.NS_SIDEBAR),e.jsxs(e.Fragment,{children:[e.jsx($s,{isNewConversation:s}),t?e.jsx(is,{}):null,n?e.jsx(os,{}):null]})}const $s=({isNewConversation:s})=>{const[n,t]=u.useState(!1),r=ae(),a=Oe(),i=Le(),d=z(),l=R();let m;return l==null?null:(m=fe,e.jsx("div",{className:C(r?"":"bg-token-sidebar-surface-primary","pt-0"),children:e.jsx(w,{side:"right",label:d.formatMessage(P.newChat),className:"flex w-full items-center",children:e.jsx(B.div,{className:"flex-1",whileTap:{scale:.98},onMouseEnter:()=>{t(!0)},onMouseLeave:()=>{t(!1)},children:e.jsx(me,{loggingGizmoId:"primary",href:"/",isHovered:n,onClick:o=>{ze(Fe(a))&&!s&&(o.preventDefault(),cs(i))},icon:e.jsx(Ie,{isFirstParty:!0,className:"h-6 w-6"}),isMenuOpen:!1,label:m,hoverRightIcon:null})})})}))};function Qs(){const s=z(),n=Se(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(ls,{children:e.jsx(B.div,{whileTap:{scale:.98},children:e.jsx(Z,{to:ds(),onClick:()=>{n.activeSidebar==="popover-nav"&&ge.setActiveSidebar(!1)},children:e.jsx(us,{icon:ms,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const Xs=2;function Ys({gizmos:s,maxToShowOnLoad:n=4,showAllSidebarItems:t}){const r=Ss(s,f=>f.flair.kind),a=[...(r[D.Workspace]?.map(({resource:f})=>({gizmo:f,section:F.Workspace}))??[]).slice(0,3),...r[D.FirstParty]?.map(({resource:f})=>({gizmo:f,section:F.Keep}))??[],...r[D.SidebarKeep]?.map(({resource:f})=>({gizmo:f,section:F.Keep}))??[]],i=r[D.Recent]??[],l=(t?i:i.slice(0,Xs)).map(({resource:f})=>({gizmo:f,section:F.Recents})),m=a.length;let o=[];o=[...a,...l],t||(o.length>n&&m>n?o=o.slice(0,m):o.length>n&&(o=o.slice(0,n)));const g=s.length>o.length;return{listItems:o,itemsLeft:s.length-o.length,needsToCollapseItems:g,total:s.length}}function Zs({gizmo:s,currentGizmoId:n,maxToShowOnLoad:t,hideOverflowMenu:r=!1}){const a=Se(o=>!fs.isGptListCollapsed(o)),{listItems:i,needsToCollapseItems:d,itemsLeft:l}=Ys({gizmos:s,maxToShowOnLoad:t,showAllSidebarItems:a});function m(o,c){return e.jsx(U,{gizmo:o,isActive:o.gizmo.id===n,section:c,hideOverflowMenu:r},o.gizmo.id)}return e.jsxs("div",{children:[i.map(({gizmo:o,section:c},g)=>e.jsxs(u.Fragment,{children:[g>1&&c!==i[g-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-border-light"}),m(o,c)]},g)),d?e.jsxs("button",{onClick:ge.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(he,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx(T,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(xs,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:l}}),e.jsx(hs,{className:"icon-xs"})]})})]}):null,e.jsx(Qs,{})]})}function It(s){const{className:n}=s,{useStore:t,actions:r}=$(),{focusedObject:a}=H(),d=!gs()&&!!a,l=t(x=>x.isSidebarOpen)&&!d,m=t(x=>x.mode),o=we(),c=ie(),g=_e(),f=ps();return u.useEffect(()=>{c?r.closeSidebar():r.setSidebarMode(pe.Pinned)},[c,r]),e.jsx(vs,{...s,isSidebarOpen:l,isExtendedInfoOpen:g,isCanvasOpen:f,sidebarMode:m,className:C(n,o?"screen-loaded":"")})}function Js(s){const{clientThreadId:n}=H(),t=u.useRef(s);t.current=s;const r=u.useRef(null);u.useEffect(()=>{const a=r.current;return r.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function et({currentGizmoId:s}){const{data:{gizmos:n}={}}=bs();let t=n;return ve()&&(t=n?.filter(a=>!js(a.resource))),e.jsx(e.Fragment,{children:e.jsxs(q,{id:"gizmos-heading",header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(T,{id:"ZT2HVu",defaultMessage:"GPTs"})}),hideHeader:!0,isLastInGroup:!1,children:[e.jsx(qs,{isNewConversation:!0}),e.jsx(Zs,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:Is})]})})}const st=5;function tt({clientThreadId:s}){const n=ue(),t=de(),[r,a]=u.useState(!1),i=u.useRef(!1),{conversations:d,data:l,isLoading:m,isError:o,refetch:c}=be({recentConversationLimit:st}),[g,f]=u.useState(!0),x=u.useCallback(function(v){v===void 0&&f(!1),c({cancelRefetch:!0})},[c,f]),b=o||l===void 0&&!m&&i.current;l===void 0&&!m&&!i.current&&(i.current=!0,x(!0)),u.useMemo(()=>{Re.publish({kind:"refreshHistory",conversations:d})},[d]);const h=t!=null&&t.kind==="conversation"&&t.gizmoId!=null&&ys(t.gizmoId),I=u.useRef(0);return e.jsxs("div",{onDragOver:S=>{S.preventDefault(),h&&a(!0)},onDrop:S=>{S.preventDefault(),h&&(I.current=0,a(!1),n({newGizmoId:null,conversation:t.conversation,previousGizmoId:t.gizmoId??null}))},onDragEnter:S=>{S.preventDefault(),h&&(I.current+=1)},onDragLeave:S=>{S.preventDefault(),h&&(I.current-=1,I.current===0&&a(!1))},className:C(r&&"opacity-50"),children:[b&&e.jsx(Cs,{showRetry:g,refetch:x}),e.jsx(nt,{clientThreadId:s})]})}function nt({clientThreadId:s}){const n=R(),t=Ae("1358188185").layer.get("local-cache-keys",[]).includes("conversation-history"),{conversations:r,buckets:a,isLoading:i,hasNextPage:d,fetchNextPage:l,isFetchingNextPage:m}=be({buckets:!0,recentConversationLimit:1}),o=i||m,c=r.length===0,g=Ge(),f=te(s),x=J().activeServerThreadIds,b=g?void 0:f,p=u.useRef(null),h=u.useCallback(S=>{i||S==null||(p.current?.disconnect(),p.current=new IntersectionObserver(v=>{v[0].isIntersecting&&d&&l()},{rootMargin:"0px 0px 350px 0px",threshold:.1}),p.current.observe(S))},[i,d,l]);u.useEffect(()=>()=>{p.current?.disconnect()},[]);const I=e.jsx(re,{className:"mt-2 self-center justify-self-center will-change-transform"});return j.markStart("ChatHistory"),o||j.markRendered("ChatHistory"),c?n==null&&t?null:e.jsx("div",{className:"flex justify-center",children:I}):e.jsxs(e.Fragment,{children:[a.map((S,v)=>e.jsx(q,{id:`section-${S.key}`,footer:o&&v===a.length-1&&I,header:S.label,condensed:!0,children:S.items.map((k,E)=>e.jsx(ye,{item:k,isActiveInMainWindow:k.id===b,isActive:x.has(k.id),testId:`history-item-${E}`},k.id))},S.key)),!c&&d&&!m&&e.jsx("div",{className:"h-1","data-testid":"infinite-scroll-trigger",ref:h})]})}function at({clientThreadId:s}){R();const n=De(s),{isUnauthenticated:t}=oe(),r=ve(),a=!1;if(t)return null;const i=r&&e.jsx(Ne,{includeRevisedSidebarIa:!0,currentGizmoId:n}),d=a,l=e.jsx(tt,{clientThreadId:s}),m=e.jsx(et,{currentGizmoId:n});return e.jsxs("div",{className:C(N.screenContent,"group/sidebar"),children:[m,i,d,null,l]})}function rt(){const s=R(),n=s?.data==null,{isUnauthenticated:t}=oe(),{openSettings:r}=Ns(),[a]=u.useState(()=>{const l=Pe.getCookie(Be.Workspace);return typeof l=="string"&&l!==He}),[i,d]=u.useState(!0);return u.useEffect(()=>{d(!1)},[]),!s&&i||a&&n?null:t?e.jsx(As,{}):e.jsx(Rs,{onClickSettings:()=>r()})}function it(){return e.jsx(ks,{className:C(N.screenTrailingBarContainer),children:e.jsxs(je,{name:"sidebar-footer-bar",className:"relative z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)] px-sidebar-inline pb-1.5 pt-2.5",type:"secondary",disableSizeTracking:!0,trailing:!0,style:{"--bar-gap":"6px"},children:[e.jsx(Os,{}),e.jsx(Gs,{}),e.jsx(rt,{})]})})}function ot(){return(Ds()?"⌘":"Ctrl")+" K"}function ct({children:s,sideOffset:n,className:t}){return j.markStart("FannyPackSearchTooltip",j.NS_SIDEBAR),j.markRendered("FannyPackSearchTooltip",j.NS_SIDEBAR),e.jsx(w,{sideOffset:n,className:t,label:e.jsxs("div",{children:[e.jsx(T,{id:"jmd8WH",defaultMessage:"Search chats"}),e.jsx("div",{className:"text-sm font-normal text-token-text-secondary",children:ot()})]}),children:s})}const lt=ee(()=>se(()=>import("./ff2abh898b896ubv.js"),__vite__mapDeps([5,1,6,2,3,7,8,9,10,11,12,13,14,15,16,17,18,19,20])).then(s=>s.FannyPackIconButton));function dt({onNewThread:s}){const n=z(),t=u.useRef(null),r=ie(),{useStore:a,actions:i}=$(),d=a(p=>p.isSidebarOpen),{isSidebarFlyoutOpen:l}=xe(),m=l(y.Conversation),o=l(y.Gizmo),c=l(y.Snorlax),g=d&&!m&&!o&&!c,f=ce();function x(){f&&i.closeSidebar()}Ls({checkElement:p=>p?.tagName==="NAV",enabled:g,onLightDismiss:x});const{isFannyPackEnabled:b}=Es();return e.jsxs(e.Fragment,{children:[e.jsx(je,{type:"primary",className:C(N.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between px-[var(--sidebar-inline-padding)]",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(Ms,{className:C(N.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:()=>{i.closeSidebar()},onEnterPress:()=>{i.closeSidebar()},icon:e.jsxs(e.Fragment,{children:[e.jsx(Ts,{className:C(N.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(zs,{className:C(N.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(ut.closeSidebar),tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[b&&e.jsx(ct,{children:e.jsx(lt,{className:N.searchAction,icon:e.jsx(Fs,{className:N.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),!r&&e.jsx(Ps,{location:"sidebar",onNewThread:s})]})]})}),e.jsx("div",{className:C(N.leadingBar,N.leadingBarScrollAnimation,"pointer-events-none absolute inset-0 h-full"),children:" "})]})}const ut=ne({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function yt(){const{clientThreadId:s,onNewThread:n}=H(),[t,r]=u.useState(!1),[a,i]=u.useState(!1),[d,l]=u.useState(!1),{actions:m,useStore:o}=$(),c=o(h=>h.isSidebarOpen),g=o(h=>h.mode),f=u.useCallback(h=>h===y.Conversation?t:h===y.Gizmo?a:h===y.Snorlax?d:!1,[t,a,d]),x=u.useCallback((h,I)=>{const S=v=>{h===y.Conversation?r(v):h===y.Gizmo?i(v):h===y.Snorlax&&l(v)};I?S(!0):setTimeout(()=>{S(!1)},100)},[]),b=u.useRef(null),p=ce();return Js(()=>{x(y.Conversation,!1),x(y.Gizmo,!1),x(y.Snorlax,!1),c&&(g===pe.Floating||p)&&setTimeout(()=>{m.closeSidebar()},100)}),c&&j.trackNamespace(j.NS_SIDEBAR),e.jsx(ws,{value:{isSidebarFlyoutOpen:f,onSidebarFlyoutOpenChange:x},children:e.jsx(_s,{anchor:"vertical",className:C(N.screen,"popover sidebar flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(dt,{onNewThread:n}),ref:b,trackLeading:!0,trailing:e.jsx(it,{}),children:e.jsx(at,{clientThreadId:s})})})}export{It as C,qs as D,ct as F,Zs as G,Ne as S,yt as a,jt as b,ot as g};
//# sourceMappingURL=llh8t5ckv1lpc2n1.js.map
