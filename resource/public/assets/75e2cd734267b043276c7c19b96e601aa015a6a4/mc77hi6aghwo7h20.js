import{r as k,j as s,aw as _,M as E,au as w}from"./l6lryjpkt8rv0lpy.js";import{G as H}from"./hli3paxjs6c9ftyy.js";import{f3 as P,f4 as U,U as I,ei as b,f5 as A,e0 as D,f6 as O,f7 as R,cJ as q,cF as B,f8 as W,f9 as J,fa as K,fb as $,fc as Q,a4 as V,fd as v,fe as N,ff as X}from"./dvllb5fed1b4y7k1.js";import{aj as Y,r as Z,s as z,gl as ee,d as m,aw as se,N as te,U as M,gm as ae,c1 as C,aq as re,bj as ne}from"./mnkup87aq6tfilq5.js";import{u as oe,a as ie,t as le}from"./1e3kywkhcjn5spyo.js";function T(){const{store:e}=P(),o=e.useSharedProps(),a=oe(),{clearSystemHintModeTrigger:r,getSystemHintModeTrigger:i}=ie(),{value:t}=Y("1988730211"),n=!U.useDisabledGlobally();return k.useCallback(async(l,c,d)=>{if(!o)return;const{clientThreadId:x,onCreateNewCompletion:h,onResetState:f,conversationMode:p}=o;I.hideThreadHeader();const g=a.has(b.Search),S=g?i(b.Search):void 0,j=Z(x),{systemHints:u,extraStreamParams:y}=t?A(Array.from(a)):{systemHints:Array.from(a),extraStreamParams:{}};n&&(y.enableMessageFollowups=!0),await h({content:D(l),eventSource:"mouse",extraStreamParams:y,completionMetadata:{suggestions:c,suggestion:l,suggestionIndex:d,conversationMode:p??j?.mode,systemHints:u,searchSource:S},messageMetadata:{is_starter_prompt:!0,suggestion_type:l.type,starter_prompt_id:"id"in l?l.id:void 0}});const L=z.getMessageId(j);f(),O(l,d,x,L),ee()||le(),S&&g&&r(b.Search)},[o,a,i,t,r,n])}function ve({clientThreadId:e}){const{isUnauthenticated:o}=se(),a=!o,r=te(e),i=M(e,u=>u?.isLoading),t=ae(),n=C(),l=T(),c=M(e,u=>u?.modelId??q),d=B(c),{promptStarters:x,isSuccess:h,isError:f}=W(r&&!i,e,n?2:4,void 0,void 0,c??void 0),p=x&&x?.length>0,g=h&&p&&a&&!d,{layer:S}=re("4031588851"),j=S.get("is_two_line",!1);return s.jsx(s.Fragment,{children:s.jsx(_,{children:(f||h)&&s.jsxs(s.Fragment,{children:[s.jsx(ne,{className:`h-12 w-12 ${a?"":"max-sm:hidden"}`}),g&&s.jsx(ce,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},promptStarters:x,onSelectStarterPrompt:l,isSendBlocked:t,clientThreadId:e,isTwoLine:j}),!p&&a&&!d&&s.jsx(F,{}),d?s.jsx(J,{}):null,f&&a&&s.jsx(F,{})]})})})}function F(){return s.jsx("div",{className:"mt-7 text-3xl",children:s.jsx(E,{id:"24tuqq",defaultMessage:"Hi, how can I help?"})})}function ce({promptStarters:e,onSelectStarterPrompt:o,isSendBlocked:a,clientThreadId:r,isTwoLine:i,...t}){return k.useEffect(()=>{K(e,r)},[r]),s.jsx(s.Fragment,{children:i?s.jsx(w.div,{...t,className:"absolute bottom-6 w-full px-4",children:s.jsx($,{children:s.jsx(xe,{starterPrompts:e,onSelectStarterPrompt:o,disabled:a})})}):s.jsx(w.div,{...t,children:s.jsx(G,{starterPrompts:e,onSelectStarterPrompt:o,disabled:a})})})}const de=/\s/;function G({starterPrompts:e,onSelectStarterPrompt:o,disabled:a,cssMobileDisplayLimit:r,marginOverride:i}){let t=e.map((n,l)=>{let c=n.oneliner??n.title;c===""&&(c=n.body);const d=de.test(c);return s.jsxs("button",{className:m(r!==void 0&&l>=r&&"max-sm:hidden","relative flex w-40 flex-col gap-2 rounded-2xl border border-token-border-light px-3 pb-4 pt-3 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed"),disabled:a,onClick:()=>o(n,e,l),children:[s.jsx(R,{category:n.category}),s.jsx("div",{className:m("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",d?"break-word":"break-all"),children:c})]},n.id??l)});if(t.length>2){const n=Math.floor(t.length/2);t=[t.slice(0,n),t.slice(n)].map((l,c)=>s.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:l},c))}return s.jsx("div",{className:m("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",i??"mt-12"),children:t})}function xe({starterPrompts:e,onSelectStarterPrompt:o,disabled:a}){let r=e.map((t,n)=>s.jsx("button",{className:"relative whitespace-nowrap rounded-2xl border border-token-border-light px-4 py-2 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed",disabled:a,onClick:()=>o(t,e,n),children:s.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.title&&s.jsx("div",{className:"truncate font-semibold",children:t.title}),s.jsx("div",{className:m("truncate font-normal",t.title?"opacity-50":""),children:t.body})]})},t.id??n));const i=Math.floor(r.length/2);return r=[r.slice(0,i),r.slice(i)].map((t,n)=>s.jsx("div",{className:"flex flex-col gap-2",children:t},n)),s.jsx("div",{className:"grid w-full grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-2",children:r})}function be({gizmo:e,hideOwner:o=!1,children:a,className:r,avatarClassName:i,showStarterPrompts:t=!1,disableStarterPrompts:n=!1}){return e==null?null:s.jsx(s.Fragment,{children:s.jsxs("div",{className:m("flex h-full flex-col items-center justify-center text-token-text-primary","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",r),children:[s.jsx(me,{gizmo:e,avatarClassName:i}),s.jsx(he,{gizmo:e,hideOwner:o,showStarterPrompts:t,disableStarterPrompts:n}),a]})})}function me({gizmo:e,avatarClassName:o}){const a=!!(e!=null&&Q(e)&&e?.gizmo.tags?.includes(V.FirstParty));return s.jsx("div",{className:"relative",children:s.jsx(H,{isFirstParty:a||!e,src:e!=null&&v(e)?e.profilePictureUrl:e?.gizmo.display.profile_picture_url,className:m("mb-3 h-12 w-12",o)})})}function ue({gizmo:e,disabled:o}){const a=X(e),r=T(),i=C();if(a==null||a.length===0)return null;const t=a.slice(0,i?2:4);return s.jsx(G,{starterPrompts:t,onSelectStarterPrompt:r,disabled:o})}function he({gizmo:e,hideOwner:o,showStarterPrompts:a,disableStarterPrompts:r}){const i=e!=null&&v(e)?e.name:e?.gizmo.display.name,t=e!=null&&v(e)?e.description:e?.gizmo.display.description;return s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"text-center text-2xl font-semibold",children:i}),!o&&s.jsx("div",{className:"flex items-center gap-1 text-token-text-tertiary",children:s.jsx(s.Fragment,{children:e&&v(e)?s.jsx(N,{gizmo:e}):s.jsx(N,{gizmo:e,socials:e.gizmo.author.display_socials})})}),t&&s.jsx("div",{className:"max-w-md text-center text-sm font-normal text-token-text-primary",children:t}),a&&s.jsx(ue,{gizmo:e,disabled:r})]})}export{be as G,me as L,xe as S,ve as a,T as u};
//# sourceMappingURL=mc77hi6aghwo7h20.js.map
