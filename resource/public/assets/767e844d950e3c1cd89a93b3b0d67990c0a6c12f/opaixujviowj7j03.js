const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bd5bde2odkl7igtb.js","assets/mw35uwhq4g8r9eam.js"])))=>i.map(i=>d[i]);
import{c as E,j as t,r as b,_ as _e,M as w,ap as ze,h as Fe,i as He}from"./mw35uwhq4g8r9eam.js";import{e5 as Ie,cn as Be,co as Ce,cp as Je,aa as Ee,cF as H,sY as We,cw as Ae,u as Te,g as Ge,d as De,fE as Ue,sZ as ye,rx as Ve,g4 as Xe,s_ as Ke,iK as Ye,fG as Ze,s$ as Qe,t0 as qe,t1 as et,ed as tt,jh as Se,e4 as st}from"./d0xa318sl7ywi0za.js";import{L as F}from"./mtsxj0469osb30cx.js";import{lW as Ne,bI as ot,cO as nt,nh as at,X as lt,b$ as rt,bf as it}from"./g2euln7v5pbm31qa.js";import{g as Pe}from"./m966r6qv7jykyvdd.js";import{p as ct}from"./gs306ibz22k5zi3r.js";const dt=l=>{"use forget";const e=E.c(17),{onDrag:s,onDragEnd:r,onDoubleClick:a,onDragStart:o,onPointerUp:n}=l;let d,c,i,p;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:1},c={opacity:1},i={type:"tween",duration:.1},p={x:0,y:0,transform:"translateY(0px)"},e[0]=d,e[1]=c,e[2]=i,e[3]=p):(d=e[0],c=e[1],i=e[2],p=e[3]);let u;e[4]!==o?(u=()=>{o==null||o()},e[4]=o,e[5]=u):u=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f={left:0,right:0,top:0,bottom:0},e[6]=f):f=e[6];let x;e[7]!==s?(x=(v,j)=>{s==null||s(j)},e[7]=s,e[8]=x):x=e[8];let g;e[9]!==r?(g=(v,j)=>r==null?void 0:r(j),e[9]=r,e[10]=g):g=e[10];let h;return e[11]!==a||e[12]!==n||e[13]!==u||e[14]!==x||e[15]!==g?(h=t.jsx(Ie.div,{drag:"x",tabIndex:-1,className:"bg-token-border-default pointer-events-auto absolute top-0 bottom-0 z-20 w-[2px] cursor-ew-resize rounded-full opacity-0 after:absolute after:inset-y-0 after:start-1/2 after:top-[-18px] after:h-[calc(100%+36px)] after:w-[16px] after:-translate-x-1/2 after:transform after:bg-transparent after:content-['']",whileHover:d,whileDrag:c,transition:i,style:p,onPointerDown:u,dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:f,onDrag:x,onPointerUp:n,onDragEnd:g,onDoubleClick:a}),e[11]=a,e[12]=n,e[13]=u,e[14]=x,e[15]=g,e[16]=h):h=e[16],h},ut=l=>{"use forget";const e=E.c(6),{content:s,tiktokenImport:r,o200kBaseImport:a}=l,{Tiktoken:o}=b.use(r),{default:n}=b.use(a);let d;e[0]!==o||e[1]!==s||e[2]!==n?(d=new o(n).encode(s),e[0]=o,e[1]=s,e[2]=n,e[3]=d):d=e[3];const c=d.length;let i;return e[4]!==c?(i=t.jsx("div",{className:"text-token-text-secondary min-w-0 truncate font-mono text-xs",children:t.jsx(w,{id:"NUKG65",defaultMessage:"{tokenCount} tokens",values:{tokenCount:t.jsx(ze,{value:c})}})}),e[4]=c,e[5]=i):i=e[5],i},ae=({content:l})=>{"use no forget";const e=b.useMemo(()=>_e(()=>import("./bd5bde2odkl7igtb.js"),__vite__mapDeps([0,1])),[]),s=b.useMemo(()=>_e(()=>import("./o5eltwebd0mkim81.js"),[]),[]);return l?t.jsx(b.Suspense,{name:"dev-mode-token-count",fallback:t.jsx("div",{className:"loading-results-shimmer h-5 w-10 rounded-lg"}),children:t.jsx(ut,{content:l,tiktokenImport:e,o200kBaseImport:s})}):null},ft=l=>{const[e]=Ne(Ee(l),Be({path:Ce,args:s=>{const[r]=Ne(Ce(s),Je);return r!=null?r:{}}}));return e},mt=l=>{var e;try{const s=Ee(l);return s&&(e=JSON.parse(s))!=null?e:void 0}catch(s){return null}},xt=l=>{var e,s;return(s=(e=l.metadata)==null?void 0:e.chatgpt_sdk)==null?void 0:s.tool_response_metadata},pt=(l,e)=>{for(const s of l.values())for(const r of s)if(r.id===e)return r;return null},Re=b.createContext(null),Le=()=>{const l=b.useContext(Re);if(!l)throw new Error("Section components must be used within a Section.Root");return l},gt=l=>{"use forget";const e=E.c(10),{children:s,defaultExpanded:r}=l,a=r===void 0?!0:r,[o,n]=b.useState(a),d=b.useId(),c=b.useId();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>n(vt),e[0]=i):i=e[0];let p;e[1]!==c||e[2]!==d||e[3]!==o?(p={isExpanded:o,toggle:i,headerId:d,contentId:c},e[1]=c,e[2]=d,e[3]=o,e[4]=p):p=e[4];let u;e[5]!==s?(u=t.jsx("div",{className:"relative z-0 border-b",children:s}),e[5]=s,e[6]=u):u=e[6];let f;return e[7]!==p||e[8]!==u?(f=t.jsx(Re.Provider,{value:p,children:u}),e[7]=p,e[8]=u,e[9]=f):f=e[9],f},ht=l=>{"use forget";const e=E.c(8),{children:s}=l,{isExpanded:r,contentId:a,headerId:o}=Le(),n=!r,d=r&&"pb-3";let c;e[0]!==d?(c=H("z-0 px-3",d),e[0]=d,e[1]=c):c=e[1];let i;return e[2]!==s||e[3]!==a||e[4]!==o||e[5]!==n||e[6]!==c?(i=t.jsx("div",{id:a,role:"region","aria-labelledby":o,hidden:n,className:c,children:s}),e[2]=s,e[3]=a,e[4]=o,e[5]=n,e[6]=c,e[7]=i):i=e[7],i},jt=l=>{"use forget";const e=E.c(25),{children:s,tooltip:r,accessory:a}=l,{isExpanded:o,toggle:n,headerId:d,contentId:c}=Le(),[i,p]=b.useState(!1),u=i?"border-token-border-default":"border-transparent";let f;e[0]!==u?(f=H("bg-token-bg-elevated-secondary sticky top-0 z-20 flex w-full min-w-0 items-center border-b",u),e[0]=u,e[1]=f):f=e[1];const x=!o&&"-rotate-90";let g;e[2]!==x?(g=H("icon-sm shrink-0 transition-transform",x),e[2]=x,e[3]=g):g=e[3];let h;e[4]!==g?(h=t.jsx(ot,{className:g}),e[4]=g,e[5]=h):h=e[5];let v;e[6]!==s?(v=t.jsx("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:s}),e[6]=s,e[7]=v):v=e[7];let j;e[8]!==c||e[9]!==d||e[10]!==o||e[11]!==h||e[12]!==v||e[13]!==n?(j=t.jsxs("button",{type:"button",id:d,"aria-controls":c,"aria-expanded":o,onClick:n,className:"text-token-text-secondary focus-visible:ring-token-border-strong flex min-w-0 flex-1 items-center gap-2 rounded-sm px-3 py-3 text-start text-sm focus-visible:ring-1 focus-visible:outline-none",children:[h,v]}),e[8]=c,e[9]=d,e[10]=o,e[11]=h,e[12]=v,e[13]=n,e[14]=j):j=e[14];let C;e[15]!==a?(C=a&&t.jsx("div",{className:"ms-auto py-1 ps-2 pe-3",children:a}),e[15]=a,e[16]=C):C=e[16];let y;e[17]!==f||e[18]!==j||e[19]!==C?(y=t.jsxs("div",{className:f,children:[j,C]}),e[17]=f,e[18]=j,e[19]=C,e[20]=y):y=e[20];const S=y;let N;e[21]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute block h-[1px] bg-transparent",ref:We({options:{threshold:0},onChange(le,B){p(B.intersectionRatio===0)}})}),e[21]=N):N=e[21];let T;return e[22]!==S||e[23]!==r?(T=t.jsxs(t.Fragment,{children:[N,r?t.jsx(Ae,{side:"left",triggerAs:null,labelTextAlign:"left",label:t.jsx(nt,{size:"small",className:"text-sm leading-5 font-normal",forceDarkMode:!0,children:r}),children:S}):S]}),e[22]=S,e[23]=r,e[24]=T):T=e[24],T},m={Content:ht,Header:jt,Root:gt};function vt(l){return!l}const bt=l=>{"use forget";var je,ve,be,ke,we,Me;const e=E.c(57),{focusedMessages:s,conversation:r}=l,a=Te(),o=Fe(),n=ye(0),[d,c]=b.useState(!1),[i,p]=b.useState(!1),u=ye(400);let f;e[0]!==n||e[1]!==u?(f=[u,n],e[0]=n,e[1]=u,e[2]=f):f=e[2];const x=Ve(f,kt),{assistantMessage:g,toolMessages:h}=ct(s);let v;e[3]!==a?(v=()=>qe(a),e[3]=a,e[4]=v):v=e[4];const j=De(v),{connectorLinks:C,refetch:y}=Xe(),{path:S,args:N}=(je=ft(g))!=null?je:{},T=S===void 0?"":S,le=N===void 0?{}:N,[,B,me]=T.split("/").filter(Boolean),xe=pt(C,B),M=xe?j==null?void 0:j.get(xe.connector_id):null,{actions:Oe}=Ke(M),k=Oe.find(I=>I.name===me),J=(ve=k==null?void 0:k.templates)==null?void 0:ve[0],_=h.findLast(wt),re=_?mt(_):null,ie=(be=_==null?void 0:_.metadata)!=null&&be.chatgpt_sdk?at(_.metadata.chatgpt_sdk):null,pe=h.findLast(Mt),ge=pe?xt(pe):null,he=(we=(ke=_==null?void 0:_.metadata)==null?void 0:ke.chatgpt_sdk)==null?void 0:we.external_call_time_ms;let D;e[5]!==a||e[6]!==y?(D=async I=>{await et(I),await Promise.all([y(),tt.refetch(a,void 0,void 0)])},e[5]=a,e[6]=y,e[7]=D):D=e[7];let P;e[8]!==a?(P=I=>{Se(a).danger({defaultMessage:"Error refreshing actions.",description:"Error message when refreshing actions fails"},{error:I})},e[8]=a,e[9]=P):P=e[9];let R;e[10]!==a||e[11]!==o?(R=()=>{Se(a).success(o.formatMessage({id:"n9Ee37",defaultMessage:"Tool updated"}))},e[10]=a,e[11]=o,e[12]=R):R=e[12];let W;e[13]!==D||e[14]!==P||e[15]!==R?(W={mutationFn:D,onError:P,onSuccess:R},e[13]=D,e[14]=P,e[15]=R,e[16]=W):W=e[16];const A=He(W);let G;e[17]!==d?(G=d&&t.jsx("div",{className:"fixed inset-0 z-0 bg-transparent"}),e[17]=d,e[18]=G):G=e[18];let L;e[19]!==n?(L=()=>{c(!0),n.set(0)},e[19]=n,e[20]=L):L=e[20];let O;e[21]!==x||e[22]!==n||e[23]!==u?(O=()=>{c(!1),n.set(0),u.set(x.get())},e[21]=x,e[22]=n,e[23]=u,e[24]=O):O=e[24];let $;e[25]!==n?($=I=>n.set(n.get()+I.delta.x),e[25]=n,e[26]=$):$=e[26];let U;e[27]!==L||e[28]!==O||e[29]!==$?(U=t.jsx(dt,{onDragStart:L,onDragEnd:O,onDrag:$}),e[27]=L,e[28]=O,e[29]=$,e[30]=U):U=e[30];let V;e[31]!==x?(V={width:x},e[31]=x,e[32]=V):V=e[32];const ce=(M==null?void 0:M.logo_url)&&t.jsx("img",{className:"h-4 w-4 rounded-md",src:M.logo_url,alt:M.name}),de=(Me=M==null?void 0:M.name)!=null?Me:t.jsx(w,{id:"lDDPYo",defaultMessage:"Unknown Connector"});let z;e[33]!==de?(z=t.jsx("span",{className:"text-token-text-primary text-lg",children:de}),e[33]=de,e[34]=z):z=e[34];let X;e[35]!==ce||e[36]!==z?(X=t.jsxs("div",{className:"flex items-center gap-2",children:[ce,z]}),e[35]=ce,e[36]=z,e[37]=X):X=e[37];const $e=A.isPending,ue=A.isPending&&"motion-safe:animate-spin";let K;e[38]!==ue?(K=H("icon",ue),e[38]=ue,e[39]=K):K=e[39];let Y;e[40]!==r?(Y=t.jsx(st,{onClick:()=>Pe(r).blur()}),e[40]=r,e[41]=Y):Y=e[41];let Z;e[42]!==k?(Z=k&&t.jsx(ae,{content:k.description}),e[42]=k,e[43]=Z):Z=e[43];let Q;e[44]!==k||e[45]!==i?(Q=k&&t.jsxs(m.Content,{children:[t.jsx("span",{className:H("text-token-text-primary ps-6 text-sm whitespace-pre-wrap",i?"line-clamp-none":"line-clamp-4"),children:k.description}),t.jsx("button",{className:"text-token-text-secondary ms-6 mt-1 flex justify-start text-sm hover:underline",onClick:()=>p(!i),children:i?t.jsx(w,{id:"Mggt6n",defaultMessage:"See less"}):t.jsx(w,{id:"yhD38v",defaultMessage:"See all"})})]}),e[44]=k,e[45]=i,e[46]=Q):Q=e[46];let q;e[47]!==J?(q=J&&t.jsxs(m.Root,{children:[t.jsx(m.Header,{accessory:t.jsx(Ye,{href:"https://developers.openai.com/apps-sdk",children:t.jsx(Ze,{className:"icon-sm opacity-60"})}),children:t.jsx(w,{id:"hHDKiZ",defaultMessage:"Widget"})}),t.jsx(m.Content,{children:t.jsx(F,{isInitialLevelExpanded:!0,unwrap:!0,className:"!text-xs !leading-5",value:J.meta})})]}),e[47]=J,e[48]=q):q=e[48];let ee;e[49]!==o?(ee=o.formatMessage({id:"yXxwQR",defaultMessage:"Tool input is the model-written input to the MCP tool. It is exposed to the widget code as `window.openai.toolInput`."}),e[49]=o,e[50]=ee):ee=e[50];let te;e[51]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(w,{id:"t5GE25",defaultMessage:"Tool input"}),e[51]=te):te=e[51];let se;e[52]!==o?(se=o.formatMessage({id:"85NXIC",defaultMessage:"Tool output is the `structuredContent` field of the MCP tool response. It is exposed to the model, and to the widget code as `window.openai.toolOutput`."}),e[52]=o,e[53]=se):se=e[53];let oe;e[54]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(w,{id:"E9SGiy",defaultMessage:"Tool output"}),e[54]=oe):oe=e[54];const fe=re?t.jsx(F,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:re}):t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(w,{id:"lpg5UJ",defaultMessage:"No tool response"})});let ne;return e[55]!==fe?(ne=t.jsx(m.Content,{children:fe}),e[55]=fe,e[56]=ne):ne=e[56],t.jsxs(t.Fragment,{children:[G,t.jsxs("div",{className:"border-token-border-default bg-token-bg-elevated-secondary z-10 h-full border-s",children:[U,t.jsxs(Ie.div,{className:"relative flex h-full flex-col",style:V,children:[t.jsxs("div",{className:"flex h-(--header-height) items-center gap-1 ps-3 pe-2",children:[X,t.jsx(lt,{className:"ms-auto",onClick:()=>A.mutate(B),disabled:$e,icon:A.isPending?Qe:rt,iconClassName:K}),Y]}),t.jsxs("div",{className:"flex h-full flex-col overflow-x-hidden overflow-y-auto",children:[t.jsxs(m.Root,{children:[t.jsx(m.Header,{accessory:Z,children:t.jsx("span",{className:"truncate font-mono text-sm",children:me})}),Q]}),q,t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:ee,accessory:t.jsx(ae,{content:JSON.stringify(le)}),children:te}),t.jsx(m.Content,{children:t.jsx(F,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:le})})]}),t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:se,accessory:t.jsxs("div",{className:"flex items-end gap-1",children:[he&&t.jsx("span",{className:"text-token-text-secondary font-mono text-xs",children:o.formatMessage({id:"dzjXDZ",defaultMessage:"Timing: {externalCallTimeMs}ms /"},{externalCallTimeMs:he})}),t.jsx(ae,{content:JSON.stringify(re)})]}),children:oe}),ne]}),ge&&t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:o.formatMessage({id:"4BhV8x",defaultMessage:"The tool response metadata is the `_meta` field of the MCP tool response. It is not exposed to the model, but is exposed to widget code as `window.openai.toolResponseMetadata`."}),children:t.jsx(w,{id:"OP/Fmv",defaultMessage:"Tool response metadata"})}),t.jsx(m.Content,{children:t.jsx(F,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:ge})})]}),ie&&t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:o.formatMessage({id:"pPuRCH",defaultMessage:"Persisted state of the widget. It is exposed to the widget code as `window.openai.widgetState`, and updated via `window.openai.setWidgetState`."}),accessory:t.jsx(ae,{content:JSON.stringify(ie)}),children:t.jsx(w,{id:"BtTaJR",defaultMessage:"Widget state"})}),t.jsx(m.Content,{children:t.jsx(F,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:ie})})]})]})]})]},"dev-mode-sidebar")]})},Et=l=>{"use forget";const e=E.c(10),{clientThreadId:s}=l,r=Te();let a,o;e[0]!==s||e[1]!==r?(a=Ge(r,s),o=Pe(a),e[0]=s,e[1]=r,e[2]=a,e[3]=o):(a=e[2],o=e[3]);const n=o;let d;e[4]!==n?(d=()=>n.focusedMessages$(),e[4]=n,e[5]=d):d=e[5];const c=De(d);let i;return e[6]!==a||e[7]!==n||e[8]!==c?(i=c.length>0&&t.jsx(Ue,{name:"DevModeSidebar",onError:()=>n.blur(),children:t.jsx(bt,{focusedMessages:c,conversation:a})}),e[6]=a,e[7]=n,e[8]=c,e[9]=i):i=e[9],i};function kt(l){const[e,s]=l;return it(e-s,200,800)}function wt(l){var e;return(e=l.author.name)==null?void 0:e.startsWith("api_tool.call_tool")}function Mt(l){var e;return(e=l.author.name)==null?void 0:e.startsWith("api_tool.call_tool")}export{Et as DevModeSidebar};
//# sourceMappingURL=opaixujviowj7j03.js.map
