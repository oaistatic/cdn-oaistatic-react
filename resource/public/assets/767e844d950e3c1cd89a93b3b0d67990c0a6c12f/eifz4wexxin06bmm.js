var _=Object.defineProperty;var m=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var f=(t,a,e)=>a in t?_(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,p=(t,a)=>{for(var e in a||(a={}))C.call(a,e)&&f(t,e,a[e]);if(m)for(var e of m(a))v.call(a,e)&&f(t,e,a[e]);return t};import{j as c,h as x,r as y,i as b}from"./mw35uwhq4g8r9eam.js";import{K as w,n as S,cn as j}from"./g2euln7v5pbm31qa.js";import{u as M,jh as B,_ as l,aB as k,dp as d,bq as T}from"./d0xa318sl7ywi0za.js";function E(t){"use no forget";const a=M(),e=t.onClose,r=w(a),s=x(),i=B(a),o=I({calpicoState:r,intl:s,onClose:e,props:t,toaster:i}),n=o.isPending,g=()=>{o.isPending||o.mutate()},h=y.useRef(!1),u=t.type==="from-conversation"?t.serverThreadId:void 0;return y.useEffect(()=>{h.current||(h.current=!0,l.logEventWithStatsig("Calpico - create chat - modal shown","chatgpt_web_calpico_create_chat_modal_shown",{type:t.type,source:t.source,conversation_id:u}))},[t.type,u,t.source]),c.jsx(k,{testId:"modal-start-group-chat",isOpen:!0,onClose:()=>e(),type:"success",title:t.type==="from-conversation"?s.formatMessage({id:"0xSPqM",defaultMessage:"Start group chat from this conversation"}):s.formatMessage({id:"Ue2MBg",defaultMessage:"Use ChatGPT together"}),primaryButton:c.jsx(d.Button,{title:s.formatMessage({id:"agv82V",defaultMessage:"Start group chat"}),color:"primary",disabled:n,onClick:()=>{g()},"data-testid":"start-group-chat-confirm-button"}),secondaryButton:c.jsx(d.Button,{title:s.formatMessage({id:"W6b5j+",defaultMessage:"Cancel"}),color:"secondary",disabled:n,onClick:()=>{l.logEventWithStatsig("Calpico - create chat - canceled","chatgpt_web_calpico_create_chat_canceled",{type:t.type,source:t.source,conversation_id:u}),e()},"data-testid":"start-group-chat-cancel-button"}),tertiaryButton:c.jsx(d.Button,{className:"text-token-text-secondary hover:bg-token-bg-primary -ms-3 me-auto border-0 font-normal",title:s.formatMessage({id:"ds1qjK",defaultMessage:"Learn more"}),color:"ghost","data-testid":"start-group-chat-learn-more-button",onClick:()=>{window.open("https://help.openai.com/en/articles/12703475-group-chats","_blank")}}),footerIsSpacedBetween:!0,children:c.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:t.type==="from-conversation"?s.formatMessage({id:"n10x8B",defaultMessage:"Only this conversation will be shared. Your personal ChatGPT memory is always private."}):s.formatMessage({id:"agcfjk",defaultMessage:"Add people to your chats to plan, share ideas, and get creative."})})})}function I({calpicoState:t,intl:a,onClose:e,props:r,toaster:s}){"use no forget";const i=M();return b({mutationKey:["calpico","start-group-chat",r.type],mutationFn:async()=>{let o;if(r.type==="from-conversation"){const{serverThreadId:n}=r;o=(await t.shareThreadToCalpico$(n)).id}else o=(await t.createRoom$({room_type:"GROUP_DM",with_account_user_ids:[]})).id;return l.logEventWithStatsig("Calpico - create chat - chat created","chatgpt_web_calpico_create_chat_chat_created",{type:r.type,source:r.source,conversation_id:r.type==="from-conversation"?r.serverThreadId:void 0}),o},onSuccess:o=>{t.fetchMessages$({roomId:o}),e(),S("/gg/".concat(o)),setTimeout(()=>{const n=t.rooms$().get(o);n!=null&&T(i,j,{room:n})})},onError:()=>{s.danger(a.formatMessage({id:"OJyo7m",defaultMessage:"Unable to create a group chat"}))}})}const L=t=>{"use no forget";return c.jsx(E,p({},t))};export{L as CalpicoStartChatModalContainer};
//# sourceMappingURL=eifz4wexxin06bmm.js.map
