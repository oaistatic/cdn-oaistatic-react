var K=Object.defineProperty,Q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var B=(e,s,t)=>s in e?K(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,A=(e,s)=>{for(var t in s||(s={}))G.call(s,t)&&B(e,t,s[t]);if(U)for(var t of U(s))J.call(s,t)&&B(e,t,s[t]);return e},F=(e,s)=>Q(e,Y(s));import{c as X,h as Z,r as v,e as V,j as o,M as E}from"./mw35uwhq4g8r9eam.js";import{aE as ee}from"./g2euln7v5pbm31qa.js";import{qD as te,e7 as se,u as oe,qb as ne,d as ae,qE as N,qF as ce,D as ie,aO as re,dp as H,aB as le,dn as ue,_ as de,dq as fe,dr as he}from"./d0xa318sl7ywi0za.js";import{d as me}from"./ojmli062couj7r3v.js";import"./lv7ytt0l14b17ows.js";function Se(e){switch(e){case N.SSOMismatch:return{title:a.cannotAccessWorkspace,description:a.ssoMismatchDescription};case N.RequireSSOLogin:return{title:a.cannotAccessWorkspace,description:a.requireSSODescription};case N.UnexpectedSSOLogin:return{title:a.cannotAccessWorkspace,description:a.unexpectedSSODescription}}}const pe=2e3;function Ae(){"use forget";var I,q;const e=X.c(33),s=te(),t=se(),L=Z(),i=oe(),R=ne();let m;e[0]!==i?(m=()=>ce(i).isFetched,e[0]=i,e[1]=m):m=e[1];const W=ae(m),c=s==null?void 0:s.errorCode,f=s!=null&&W&&R==null&&!!t,[z,P]=v.useState(!1);let S,p;e[2]!==f?(S=()=>{f&&setTimeout(()=>{P(!0)},pe)},p=[f],e[2]=f,e[3]=S,e[4]=p):(S=e[3],p=e[4]),v.useEffect(S,p);const $=c===N.UnexpectedSSOLogin,h=f&&($?z:!0),n=me();let g,O;if(e[5]!==n||e[6]!==c||e[7]!==h?(g=()=>{var b;if(!c||!h)return;const D=(b=n==null?void 0:n.split("@"))==null?void 0:b[1];ie.addError("SSO Catch All Modal: ".concat(c," for ").concat(n!=null?n:"unknown user"),{sso_error:c,email:n,email_hostname:D})},O=[c,h,n],e[5]=n,e[6]=c,e[7]=h,e[8]=g,e[9]=O):(g=e[8],O=e[9]),v.useEffect(g,O),!h)return null;let x;e[10]!==L||e[11]!==s.accountName||e[12]!==(t==null?void 0:t.name)?(x=(q=(I=s==null?void 0:s.accountName)!=null?I:t==null?void 0:t.name)!=null?q:L.formatMessage(a.workspacePlaceholder),e[10]=L,e[11]=s.accountName,e[12]=t==null?void 0:t.name,e[13]=x):x=e[13];const T=x;let M;e[14]!==i||e[15]!==t?(M=()=>{const D=t!=null&&t.ssoConnectionName?{connection:t.ssoConnectionName}:void 0;re(i,{fallbackScreenHint:"login",additionalAuthParams:D})},e[14]=i,e[15]=t,e[16]=M):M=e[16];const k=M;let C;e[17]!==s.errorCode?(C=Se(s.errorCode),e[17]=s.errorCode,e[18]=C):C=e[18];const{title:j,description:w}=C;let r;e[19]!==j?(r=o.jsx("div",{className:"flex flex-col",children:o.jsx("div",{className:"text-lg",children:o.jsx(E,A({},j))})}),e[19]=j,e[20]=r):r=e[20];let l;e[21]!==T?(l=o.jsx(E,F(A({},a.authenticateNotice),{values:{workspaceName:T}})),e[21]=T,e[22]=l):l=e[22];let u;e[23]!==k||e[24]!==l?(u=o.jsx(H.Button,{onClick:k,color:"primary",children:l}),e[23]=k,e[24]=l,e[25]=u):u=e[25];let _;e[26]===Symbol.for("react.memo_cache_sentinel")?(_=o.jsx(H.Button,{onClick:ge,children:o.jsx(E,{id:"KlMYRb",defaultMessage:"Log out"})}),e[26]=_):_=e[26];let d;e[27]!==w?(d=o.jsx("div",{className:"flex flex-col space-y-4",children:o.jsx("div",{children:o.jsx(E,A({},w))})}),e[27]=w,e[28]=d):d=e[28];let y;return e[29]!==u||e[30]!==d||e[31]!==r?(y=o.jsx(le,{testId:"modal-sso-catch-all",isOpen:!0,onClose:ue,type:"warning",size:"custom",className:"max-w-3xl",title:r,icon:ee,primaryButton:u,secondaryButton:_,children:d}),e[29]=u,e[30]=d,e[31]=r,e[32]=y):y=e[32],y}function ge(){de.logLogOutButtonClicked({location:"sso_catch_all_modal"},fe.ACCESS_LOGOUT_ACTION_LOCATION_SSO_CATCH_ALL_MODAL),he()}const a=V({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{Ae as default};
//# sourceMappingURL=k78rvpp2o5py0b0x.js.map
