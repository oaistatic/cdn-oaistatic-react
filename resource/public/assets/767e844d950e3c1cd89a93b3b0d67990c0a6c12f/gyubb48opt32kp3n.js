import{y as f,k as y,a1 as C,j as P,h as _,d as h,u as M,r as S,e as E}from"./mw35uwhq4g8r9eam.js";import{aL as g,au as p,e7 as L,am as m,pU as w,u as F,p as b,dv as T,ak as v,_ as x,a7 as A,lq as O}from"./d0xa318sl7ywi0za.js";import{i as k,C as R}from"./eelq57udayslns33.js";import{bO as I}from"./g2euln7v5pbm31qa.js";import"./keveoph4stiufpkl.js";import"./ojmli062couj7r3v.js";import"./lv7ytt0l14b17ows.js";import"./iej0cupg2dqkmejt.js";import"./3xa3aq3nbd1nd678.js";import"./jcku1nkz6suna4le.js";function l({intl:o,message:e,navigate:s,toaster:a}){a.warning(o.formatMessage(e),{duration:5}),s("/#pricing")}function N({checkoutFrom:o,checkoutPlanType:e,ctx:s,currentAccount:a,intl:i,navigate:c,queryClient:n,isEligibleForProOnboarding:r,toaster:u}){const t=v(s,"2494348560");x.logPaymentSuccess({plan_type:e}),e===m.PLUS&&A.logEvent("chatgpt_plus_payment_success_page"),a.isFree()?n.invalidateQueries(O()):o?(g.removeItem(p.CheckoutFrom),window.location.href=R[o]):r&&t.get("enable_ca_pro_onboarding_flow",!1)?window.location.href="/payments/success-ind":(c("/"),u.success(i.formatMessage(d.paymentConfirmationToastMessage,{planName:I(e)}),{duration:5}))}function U({checkoutFrom:o,checkoutPlanType:e,currentAccount:s,postCheckoutResult:a,isEligibleForProOnboarding:i}){const c=F(),n=_(),r=h(),u=M(),t=b();return S.useEffect(()=>{switch(a){case"success":return N({checkoutFrom:o,checkoutPlanType:e,ctx:c,currentAccount:s,intl:n,isEligibleForProOnboarding:i,navigate:r,queryClient:u,toaster:t});case"payment_failed":return l({intl:n,toaster:t,navigate:r,message:d.paymentFailedToastMessage});case"other_error":return l({intl:n,toaster:t,navigate:r,message:T.somethingWentWrong})}},[o,e,c,s,n,i,r,a,u,t]),null}const B=f(function(){var t;const[e]=y(),s=g.getItem(p.CheckoutFrom),a=L(),i=C(),c=(t=e.get("plan_type"))!=null?t:m.PLUS,{anyConnectorEnabled:n,isLoading:r}=w({});if(!a||r)return null;const u=!n&&c===m.PRO;return P.jsx(U,{checkoutFrom:k(s)?s:null,checkoutPlanType:c,currentAccount:a,isEligibleForProOnboarding:u,postCheckoutResult:i.postCheckoutResult})}),d=E({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{B as default};
//# sourceMappingURL=gyubb48opt32kp3n.js.map
