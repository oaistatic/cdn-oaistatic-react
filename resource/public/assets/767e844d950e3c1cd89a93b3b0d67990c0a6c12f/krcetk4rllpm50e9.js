const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ko2jg964wqp2o92l.js","assets/mw35uwhq4g8r9eam.js","assets/kx34yg3blv92o8xp.js","assets/d0xa318sl7ywi0za.js","assets/root-kavs8piy.css","assets/fdzi2sym03eufaos.js","assets/ko1u2otqsfwa0ohy.js","assets/na97s5us80xgwiaa.js","assets/hwa6pbq6i57ntwuh.js","assets/g2euln7v5pbm31qa.js","assets/conversation-small-lq38g8zw.css","assets/e1t6unu3olubcgkg.js","assets/cfmv4ozi0jyg6itn.js","assets/bxq8qdjlrkpqhzqu.js","assets/nyxqrh4m1u1hf7xm.js","assets/lfmttljonaz5jjz8.js","assets/icplq4r4g4m9zwmv.js","assets/eq347oxkmgs4si5r.js","assets/enpkwo0k2mfqjlio.js","assets/eti18uwq9j8ur3lc.js"])))=>i.map(i=>d[i]);
var T=Object.defineProperty;var M=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var k=(s,t,a)=>t in s?T(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,P=(s,t)=>{for(var a in t||(t={}))z.call(t,a)&&k(s,a,t[a]);if(M)for(var a of M(t))A.call(t,a)&&k(s,a,t[a]);return s};import{h as F,e as D,j as e,M as C,r as y,_}from"./mw35uwhq4g8r9eam.js";import{p as L,u as V,cF as W,h5 as O,cw as H,fG as Q,aA as B,aB as G,be as E,fE as X,D as q,ek as J}from"./d0xa318sl7ywi0za.js";import{u as S,r as K}from"./enpkwo0k2mfqjlio.js";import{jX as U,dE as Y,ir as Z}from"./g2euln7v5pbm31qa.js";import{u as $}from"./m1s7wxy82fhyl3zh.js";import{d as ee}from"./kl7c6054usfnqmd4.js";import{F as se}from"./c60v6twrznqavn77.js";const v=D({downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},title:{id:"walnut.title",defaultMessage:"Preview"},tooltip:{id:"walnut.tooltip",defaultMessage:"This is a web preview and may not reflect exact formatting. Download to open in your preferred software for best results."}}),te=({onClose:s,onPlay:t,extension:a,contentType:o,clientThreadId:d,editHandlers:b})=>{var I;const l=F(),w=L(),j=o==="presentation",{formatMessage:u}=F(),r=u(v.title),m=u(v.tooltip);V();const{focusedWalnutId:n,presentationMap:f}=S(),i=n?f[n]:void 0,x=(I=i==null?void 0:i.fileName)!=null?I:o==="presentation"?"presentation.pptx":"spreadsheet.xlsx",p=!1,g=i==null?void 0:i.fileBlob,c=l.formatMessage(v.downloadFileError),R=$(!1,d,n!=null?n:"",()=>{},()=>{w.danger(c,{toastId:"post_sharing_modal_download_error",loggingTitle:c,loggingDescription:"Error message when a file download fails"})});return e.jsxs("div",{className:W("text-token-text-secondary border-token-border-light relative flex w-full items-center justify-between border-b px-3 py-2",p),children:[e.jsxs("div",{className:"z-10 flex flex-row gap-2",children:[e.jsx(U,{onClick:s,children:e.jsx(O,{})}),!1]}),e.jsxs("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-1",children:[e.jsx(se,{fileName:r!=null?r:null}),e.jsx("div",{className:"text-token-text-primary flex flex-row items-center truncate text-sm font-medium",children:e.jsx(H,{label:m,theme:"white",defaultOpen:!0,customBackgroundColorClassName:"bg-[#6B91F1]",labelClassName:"text-white font-light",side:"bottom",disabled:p,children:e.jsxs("div",{className:"flex flex-row items-center",children:[r,e.jsx(Q,{className:"ms-1 size-4"})]})})}),a&&e.jsx("div",{className:"text-token-text-tertiary ms-2 text-sm",children:a})]}),e.jsxs("div",{className:"z-10 flex items-center gap-1",children:[!1,e.jsx(B,{color:"ghost",size:"small",onClick:async()=>{if(g)ee(g,x);else{const{data:h}=await R.refetch();if(h===void 0||(h==null?void 0:h.status)!=="success"){w.danger(c,{toastId:"post_sharing_modal_download_error",loggingTitle:c,loggingDescription:"Error message when a file download fails"});return}const N=document.createElement("a");N.href=h.download_url,N.click()}},children:e.jsx(Y,{})}),j&&e.jsx(B,{color:"primary",onClick:t,size:"small",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{}),e.jsx("span",{className:"hidden sm:block",children:e.jsx(C,{id:"walnut.play",defaultMessage:"Play Slideshow"})})]})})]})]})},ae=E(()=>_(()=>import("./ko2jg964wqp2o92l.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(s=>s.CanvasRenderer)),oe=E(()=>_(()=>import("./lfmttljonaz5jjz8.js"),__vite__mapDeps([15,1,3,4,13,6,7,8,9,10,14,16,17,18])).then(s=>s.SpreadsheetRenderer)),re=E(()=>_(()=>import("./eti18uwq9j8ur3lc.js"),__vite__mapDeps([19,1,3,4,18,5,6,7,8,9,10])).then(s=>s.Slideshow));function le({isOpen:s,onClose:t,clientThreadId:a}){const[o,d]=y.useState(!1),{presentationMap:b,focusedWalnutId:l,setSelectedSlideIdx:w}=S(),[j,u]=y.useState(!1),r=l?b[l]:null,{presentation:m,fileName:n,workbook:f,document:i}=r!=null?r:{};if(!l||!r)return null;const x=m?"presentation":f?"spreadsheet":"none",p=x==="presentation"&&m&&!o,g=x==="spreadsheet"&&f&&!o;return e.jsx(G,{testId:"modal-walnut-content",type:"success",size:"fullscreen",isOpen:s,onClose:t,visuallyHiddenHeader:!0,children:e.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[e.jsx(te,{onClose:t,onPlay:()=>d(!o),title:n,contentType:x,clientThreadId:a,canEdit:!1}),p&&e.jsx(ae,{presentation:m,selectedSlideIdx:r.selectedSlideIdx,setSelectedSlideIdx:c=>w(l,c),isEditing:j,setIsEditing:u}),g&&e.jsx(oe,{workbook:f,selectedSheetIdx:r.selectedSheetIdx,isEditing:j,setIsEditing:u}),!1,o&&e.jsx(re,{startIndex:0,onExit:t,walnutId:l}),!p&&!g&&!0&&!o&&e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(C,{id:"walnut.noFile",defaultMessage:"No file selected."})})]})})}const ne=({clientThreadId:s})=>{const{isOpen:t,close:a}=S(),o=t?e.jsx(le,{isOpen:t,onClose:a,clientThreadId:s}):null;return e.jsx(J,{children:o},s)},ge=s=>{const t=y.useRef(null);return e.jsx(X,{ref:t,onError:(a,o)=>{K(),setTimeout(()=>{var d;(d=t.current)==null||d.resetErrorBoundary()}),q.addError(a,{componentStack:o})},name:"walnut-focused-view",children:e.jsx(ne,P({},s))})};export{ge as WalnutFocusedViewManager};
//# sourceMappingURL=krcetk4rllpm50e9.js.map
