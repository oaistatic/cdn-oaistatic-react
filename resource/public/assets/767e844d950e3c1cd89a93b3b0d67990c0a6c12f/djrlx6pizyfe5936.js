var gt=Object.defineProperty,pt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;var Xe=(s,e,t)=>e in s?gt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,qe=(s,e)=>{for(var t in e||(e={}))et.call(e,t)&&Xe(s,t,e[t]);if(Me)for(var t of Me(e))tt.call(e,t)&&Xe(s,t,e[t]);return s},ze=(s,e)=>pt(s,yt(e));var Ve=(s,e)=>{var t={};for(var l in s)et.call(s,l)&&e.indexOf(l)<0&&(t[l]=s[l]);if(s!=null&&Me)for(var l of Me(s))e.indexOf(l)<0&&tt.call(s,l)&&(t[l]=s[l]);return t};import{_ as ht,c as q,r as x,j as o,M as we,h as ot}from"./mw35uwhq4g8r9eam.js";import{be as xt,D as He,bq as bt,gh as Ke,uL as vt,jh as St,lv as wt,cF as B,d as D,aA as at,eK as jt,ff as rt,d3 as kt,hs as Ee,n0 as ct,e4 as $t,q9 as K,aB as Ct,aQ as _t,bP as Pt,u as Mt,lA as Et,g as At,b as Nt,a2 as Rt,f0 as Tt,_ as Ot}from"./d0xa318sl7ywi0za.js";import{r0 as It,br as Ft,bs as ft,r1 as Qe,r2 as st,r3 as Lt,aZ as Dt,hQ as Bt,n as Ut}from"./g2euln7v5pbm31qa.js";import{u as Gt}from"./ht6uzt6gonugd1uu.js";import{b as qt}from"./fhb510ji3eot09yv.js";import"./e237h6ukoc2vt16i.js";import"./cz2iwgzw4rck3xnv.js";import"./mpb8yfob3hqr4zw5.js";import"./e5bg4yzr7nht9sxr.js";import"./iue4s7sqsxkz98qq.js";import"./ejv9rjzfbwh1dn9a.js";const We=xt(()=>ht(()=>Promise.resolve().then(()=>rs),void 0).then(s=>s.PersonalityOnboardingModal)),zt=async({ctx:s,mode:e,intl:t,flow:l,selectedPersonality:i,selectedTraits:n,conversationId:a,messageId:r=null,onClose:d,onSubmit:f})=>{var h,m;const y=It(s,l,e,{selectedPersonality$:i,selectedTraits$:n}),{logging:p}=y;let c=!0;try{const g=await y.serverDataPromise;if(((h=g.personalities)==null?void 0:h.length)===0)return;c=(m=g.can_close_onboarding)!=null?m:!0,Ft(s,ft.hasSeenExistingUserPersonalityOnboarding)}catch(g){He.addError(g,{ctx:s,mode:e,flow:l,selectedPersonality:i,selectedTraits:n,conversationId:a});return}bt(s,We,{canClose:c,isOpen:!0,onboarding:y,onClose:()=>{Ke(s,We),Qe(p,!1,p.finalSelection),st(p),d==null||d(p)},onSubmit$:g=>{if(Ke(s,We),Qe(p,!0,p.finalSelection),st(p),f==null||f(g,p),e==="personality"&&"key"in g){if(vt({ctx:s,personalityType:g.key,conversationId:a,messageId:r,opts:{optimistic:!0}}),g.key==="default")return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{const u=St(s),k=g.key!=="default"?t.formatMessage({id:"+CiZn7",defaultMessage:"Base style and tone updated"}):t.formatMessage({id:"gqHlYp",defaultMessage:"Base style and tone preserved"});u.success(k,{duration:4,hasCloseButton:!0})})})}else if(e==="traits"&&Array.isArray(g)){const u=new Map;g.forEach(k=>{u.set(k.key,"more")}),wt(s,u,a,r)}}})};function Vt(s){"use forget";var F;const e=q.c(33),{personality:t,active:l,intervalSec:i,prefersReducedMotion:n,className:a}=s,r=i===void 0?4:i,d=n===void 0?!1:n,[f,y]=x.useState(-1),p=x.useRef(null),[c,h]=x.useState(!1),[m,g]=x.useState(0),u=x.useDeferredValue(l);let k,v;e[0]!==u?(k=()=>{if(u)return()=>{x.startTransition(()=>{y(-1),h(!1)})}},v=[u],e[0]=u,e[1]=k,e[2]=v):(k=e[1],v=e[2]),x.useEffect(k,v);let w,S;e[3]!==c?(w=()=>{if(c)return;const _=window.setTimeout(()=>{h(!0),g(Wt)},1300);return()=>window.clearTimeout(_)},S=[c],e[3]=c,e[4]=w,e[5]=S):(w=e[4],S=e[5]),x.useEffect(w,S);let C;e[6]!==t.example_messages?(C=(F=t.example_messages)!=null?F:[],e[6]=t.example_messages,e[7]=C):C=e[7];const j=C;let R;e[8]!==r||e[9]!==j.length||e[10]!==c?(R=()=>{if(c)return Lt(p,r*1e3,()=>y(0),()=>y(_=>(_+1)%Math.max(1,j.length)))},e[8]=r,e[9]=j.length,e[10]=c,e[11]=R):R=e[11];let T;e[12]!==r||e[13]!==j||e[14]!==c?(T=[c,j,r],e[12]=r,e[13]=j,e[14]=c,e[15]=T):T=e[15],x.useEffect(R,T);let E;e[16]!==a?(E=B("relative col-span-full row-span-full grid overflow-clip",a),e[16]=a,e[17]=E):E=e[17];let P;e[18]!==c?(P=!c&&o.jsx(Ht,{}),e[18]=c,e[19]=P):P=e[19];let M;if(e[20]!==f||e[21]!==j||e[22]!==d||e[23]!==m){let _;e[25]!==f||e[26]!==d||e[27]!==m?(_=(A,N)=>o.jsx(x.Activity,{mode:N===f?"visible":"hidden",children:o.jsxs("div",{className:B("ease-spring-fast col-span-full row-span-full h-full transition-[opacity,display] transition-discrete contain-strict motion-reduce:transition-none! starting:opacity-0",N===f?"opacity-100 duration-2000":"opacity-0 duration-0"),"aria-label":A,children:[o.jsx("div",{className:"invisible",children:A}),o.jsx("div",{className:"absolute inset-0","aria-hidden":!0,children:o.jsx(qt,{className:"text-token-text-primary! text-heading-2! line-clamp-none cursor-default! font-medium",text:A,isStreamingAnimation:!d},m)})]})},N),e[25]=f,e[26]=d,e[27]=m,e[28]=_):_=e[28],M=j.map(_),e[20]=f,e[21]=j,e[22]=d,e[23]=m,e[24]=M}else M=e[24];let O;return e[29]!==E||e[30]!==P||e[31]!==M?(O=o.jsxs("div",{className:E,"aria-live":"polite",children:[P,M]}),e[29]=E,e[30]=P,e[31]=M,e[32]=O):O=e[32],O}function Wt(s){return s+1}function Ht(){"use forget";const s=q.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=o.jsx("span",{className:"pulsing-dot absolute start-0 top-0 ms-3 mt-3 inline-block size-4 rounded-full bg-black motion-reduce:animate-none dark:bg-white"}),s[0]=e):e=s[0],e}function dt(s){"use forget";const e=q.c(16),{id:t,selected$:l,children:i,className:n,onSelect:a,selectedColor:r}=s,d=r===void 0?"custom":r,f=D(l),y=f?d:"custom",p=!f||d==="custom"?"hover:bg-token-bg-tertiary/70":"",c=f&&d==="custom"?"bg-token-bg-tertiary/75 text-token-text-secondary/75 hover:bg-token-bg-tertiary hover:text-token-text-primary!":"";let h;e[0]!==n||e[1]!==p||e[2]!==c?(h=B("focus-visible:focus-ring px-4 py-3","font-normal",p,c,n),e[0]=n,e[1]=p,e[2]=c,e[3]=h):h=e[3];let m;e[4]!==t||e[5]!==a||e[6]!==f||e[7]!==l?(m=()=>{a||l.set(!f),a==null||a(t)},e[4]=t,e[5]=a,e[6]=f,e[7]=l,e[8]=m):m=e[8];let g;return e[9]!==i||e[10]!==t||e[11]!==f||e[12]!==y||e[13]!==h||e[14]!==m?(g=o.jsx(at,{color:y,className:h,contentWrapperClassName:"w-full",id:t,fullWidth:!0,"data-personality-id":t,role:"checkbox","aria-checked":f,type:"button",onClick:m,children:i}),e[9]=i,e[10]=t,e[11]=f,e[12]=y,e[13]=h,e[14]=m,e[15]=g):g=e[15],g}function Kt(s){"use forget";var j;const e=q.c(26);let t,l;e[0]!==s?(j=s,{personality:l}=j,t=Ve(j,["personality"]),e[0]=s,e[1]=t,e[2]=l):(t=e[1],l=e[2]);const{selected$:i}=t,{badge:n,key:a,label:r,description:d,icon_src:f}=l,y=D(i);let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=B("group/pill hover:border-token-border-light border-1 border-transparent py-1! hover:text-white/90","text-token-text-primary! justify-start"),e[3]=p):p=e[3];let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c=B("justify-start","flex w-full items-center gap-3"),e[4]=c):c=e[4];let h;e[5]!==f?(h=f&&o.jsx("div",{"aria-hidden":!0,children:o.jsx(jt,{svgString:f,className:"size-[1lh]"})}),e[5]=f,e[6]=h):h=e[6];let m;e[7]!==n?(m=R=>o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-[17px] text-inherit",children:R}),n&&o.jsx("div",{className:"badge-base bg-token-interactive-bg-accent-default text-token-interactive-label-accent-default",children:n})]}),e[7]=n,e[8]=m):m=e[8];let g;e[9]!==d||e[10]!==r||e[11]!==m?(g=o.jsx("div",{className:"flex flex-1 flex-col items-start",children:o.jsx(we,{id:"tzFELg",defaultMessage:"<titleSpan>{title}</titleSpan><subtitleSpan>{subtitle}</subtitleSpan>",values:{title:r,subtitle:d,titleSpan:m,subtitleSpan:Qt}})}),e[9]=d,e[10]=r,e[11]=m,e[12]=g):g=e[12];const u=y?"opacity-100":"opacity-0";let k;e[13]!==u?(k=B("text-token-interactive-icon-accent-default self-center duration-75 ease-linear motion-safe:transition-opacity",u),e[13]=u,e[14]=k):k=e[14];let v;e[15]===Symbol.for("react.memo_cache_sentinel")?(v=o.jsx(Dt,{}),e[15]=v):v=e[15];let w;e[16]!==k?(w=o.jsx("div",{"aria-hidden":!0,className:k,children:v}),e[16]=k,e[17]=w):w=e[17];let S;e[18]!==h||e[19]!==g||e[20]!==w?(S=o.jsxs("div",{className:c,children:[h,g,w]}),e[18]=h,e[19]=g,e[20]=w,e[21]=S):S=e[21];let C;return e[22]!==t||e[23]!==a||e[24]!==S?(C=o.jsx(dt,ze(qe({id:a,className:p},t),{children:S})),e[22]=t,e[23]=a,e[24]=S,e[25]=C):C=e[25],C}function Qt(s){return o.jsx("span",{className:"text-token-text-tertiary text-start",children:s})}function Yt(s){"use forget";const e=q.c(13),{personalities:t,isFullScreen:l,onSelect:i}=s;let n;e[0]!==i||e[1]!==t?(n=p=>{rt(()=>{for(const c of t)c.selected$.set(c.key===p);i==null||i(p)})},e[0]=i,e[1]=t,e[2]=n):n=e[2];const a=n,r=l?"max-md:gap-1":"pt-1";let d;e[3]!==r?(d=B("flex flex-col gap-2",r),e[3]=r,e[4]=d):d=e[4];let f;if(e[5]!==a||e[6]!==t){let p;e[8]!==a?(p=c=>o.jsx("li",{children:o.jsx(Kt,{personality:c,selected$:c.selected$,onSelect:a})},c.key),e[8]=a,e[9]=p):p=e[9],f=t.map(p),e[5]=a,e[6]=t,e[7]=f}else f=e[7];let y;return e[10]!==d||e[11]!==f?(y=o.jsx("ul",{className:d,"aria-labelledby":"personality-onboarding-personality-list",children:f}),e[10]=d,e[11]=f,e[12]=y):y=e[12],y}function Zt(s){"use forget";var n;const e=q.c(8);let t,l;e[0]!==s?(n=s,{trait:l}=n,t=Ve(n,["trait"]),e[0]=s,e[1]=t,e[2]=l):(t=e[1],l=e[2]);let i;return e[3]!==t||e[4]!==l.key||e[5]!==l.label||e[6]!==l.selected$?(i=o.jsx(dt,ze(qe({id:l.key,selected$:l.selected$,selectedColor:"accent"},t),{children:l.label})),e[3]=t,e[4]=l.key,e[5]=l.label,e[6]=l.selected$,e[7]=i):i=e[7],i}function Jt(s){"use forget";const e=q.c(10),{traits:t,maxSelected:l}=s,i=l===void 0?3:l;let n;e[0]!==i||e[1]!==t?(n=f=>{rt(()=>{var h;const y=t.find(m=>m.key===f);if(!y)return;if(y.selected$()){y.selected$.set(!1);return}const c=t.filter(m=>m!==y&&m.selected$());c.length>=i&&((h=c.shift())==null||h.selected$.set(!1)),y.selected$.set(!0)})},e[0]=i,e[1]=t,e[2]=n):n=e[2];const a=n;let r;if(e[3]!==a||e[4]!==t){let f;e[6]!==a?(f=y=>o.jsx("li",{children:o.jsx(Zt,{trait:y,onSelect:a})},y.key),e[6]=a,e[7]=f):f=e[7],r=t.map(f),e[3]=a,e[4]=t,e[5]=r}else r=e[5];let d;return e[8]!==r?(d=o.jsx("ul",{className:"flex flex-wrap gap-2",children:r}),e[8]=r,e[9]=d):d=e[9],d}function Xt(s){"use forget";const e=q.c(3),{count:t,max:l,mode:i}=s;if(t===0&&i==="traits"){let a;return e[0]!==l?(a=o.jsx(we,{id:"personality-onboarding.title.select",defaultMessage:"Choose up to {max}",values:{max:l}}),e[0]=l,e[1]=a):a=e[1],a}let n;return e[2]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx(we,{id:"personality-onboarding.title.continue",defaultMessage:"Continue"}),e[2]=n):n=e[2],n}function es(s){"use forget";const e=q.c(3);let t,l;e[0]!==s?(t=()=>{if(s){let i=null,n=null;return n=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{x.startTransition(()=>{s.focus({preventScroll:!0})})})}),()=>{i&&cancelAnimationFrame(i),n&&cancelAnimationFrame(n)}}},l=[s],e[0]=s,e[1]=t,e[2]=l):(t=e[1],l=e[2]),x.useEffect(t,l)}function nt(s){"use forget";const e=q.c(124),{canClose:t,onClose:l,onboarding:i}=s,{logging:n,mode:a,flow:r}=i,d=x.useId(),f=x.useId(),p=kt()==="rtl",c=ot(),h=Gt(!1),m=D(h);let g;e[0]!==i?(g=()=>i.personalities$(),e[0]=i,e[1]=g):g=e[1];const u=D(g);let k;e[2]!==i?(k=()=>i.traits$(),e[2]=i,e[3]=k):k=e[3];const v=D(k);let w;e[4]!==i?(w=()=>i.intervalSec$(),e[4]=i,e[5]=w):w=e[5];const S=D(w);let C;e[6]!==h?(C=()=>{const $=function(z){x.startTransition(()=>{h.set(z)})},b=function(z){$(z.matches)},G=matchMedia("(prefers-reduced-motion: reduce)");return G.addEventListener("change",b),$(G.matches),()=>{G.removeEventListener("change",b)}},e[6]=h,e[7]=C):C=e[7];let j;e[8]!==i||e[9]!==h?(j=[h,i],e[8]=i,e[9]=h,e[10]=j):j=e[10],x.useEffect(C,j);const R=x.useRef(null),[T,E]=x.useState(null),P=a==="personality"?1:3;es(t?null:T);let M;e[11]!==u?(M=()=>u.filter(as).length,e[11]=u,e[12]=M):M=e[12];const O=D(M);let F;e[13]!==v?(F=()=>v.filter(os).length,e[13]=v,e[14]=F):F=e[14];const _=D(F),A=a==="personality"?O:_;let N;e[15]!==u?(N=()=>u.some(ls),e[15]=u,e[16]=N):N=e[16];const L=D(N),[U,W]=x.useState(!1);let V;e[17]!==v?(V=()=>v.some(is),e[17]=v,e[18]=V):V=e[18];const mt=D(V);let je;e[19]!==u?(je=()=>{const $={};for(const b of u)$[b.key]=b.selected$();return $},e[19]=u,e[20]=je):je=e[20];const Q=D(je);let ke;e[21]!==u||e[22]!==T?(ke=()=>{const $=document.activeElement;if(!$||!($ instanceof HTMLButtonElement))return;const b=$.getAttribute("data-personality-id"),G=u.find(I=>I.key===b);return{id:b,focusedElement:$===T?"primary-action":$===R.current?"close":"personality",index:G?u.indexOf(G):-1}},e[21]=u,e[22]=T,e[23]=ke):ke=e[23];const Ae=Ee(ke);let $e;e[24]!==Ae||e[25]!==u?($e=$=>{const b=Ae();if(!b)return!1;const G=u.length;if(!G)return!1;const I=b.focusedElement==="personality"&&b.index>=0?b.index:-1;let z;e:switch($){case"home":{z=0;break e}case"end":{z=G-1;break e}case"forward":{z=I===-1?0:Math.min(G-1,I+1);break e}case"backward":z=I===-1?G-1:Math.max(0,I-1)}if(z===void 0)return!1;const Ze=u[z];if(!Ze)return!1;const Je=document.querySelector('[data-personality-id="'.concat(Ze.key,'"]'));return Je?(Je.focus(),!0):!1},e[24]=Ae,e[25]=u,e[26]=$e):$e=e[26];const Ne=Ee($e),Ye=D(ct),H=Ye?r==="new-user-flow-personality"||r==="new-user-flow-traits":!0,Y=H&&t,Re=H&&"m-auto w-[min(420px,95dvw)]";let Z;e[27]!==Re?(Z=B(Re),e[27]=Re,e[28]=Z):Z=e[28];let J;e[29]!==n||e[30]!==a||e[31]!==u||e[32]!==s||e[33]!==v?(J=$=>{$.preventDefault();let b;const{onSubmit$:G}=s,I=a==="personality"?u.filter(ns).at(0):v.filter(ss);!I||Array.isArray(I)&&I.length===0||(b="key"in I?I.key:I.map(ts).join(","),Qe(n,!0,b),G(I))},e[29]=n,e[30]=a,e[31]=u,e[32]=s,e[33]=v,e[34]=J):J=e[34];let X;e[35]!==Ne||e[36]!==p?(X=$=>{if($.nativeEvent.isComposing)return;let b;e:switch($.key){case"ArrowUp":{b="backward";break e}case"ArrowDown":{b="forward";break e}case"ArrowLeft":{b=p?"forward":"backward";break e}case"ArrowRight":{b=p?"backward":"forward";break e}case"Home":{b=p?"end":"home";break e}case"End":b=p?"home":"end"}b&&($.preventDefault(),Ne(b))},e[35]=Ne,e[36]=p,e[37]=X):X=e[37];let ee;e[38]!==Y?(ee=o.jsx(it,{canShrink:Y}),e[38]=Y,e[39]=ee):ee=e[39];const Te=!Ye&&"flex-1 px-6!";let te;e[40]!==Te?(te=B("text-token-text-primary grid min-h-[200px] px-10 [font-weight:500] contain-size",Te),e[40]=Te,e[41]=te):te=e[41];let se;e[42]!==t||e[43]!==l?(se=t&&o.jsx($t,{onClick:l,ref:R,className:"not-keyboard-focused:outline-none absolute end-2 top-0 aspect-square md:top-2"}),e[42]=t,e[43]=l,e[44]=se):se=e[44];const Oe=U?"hidden":"visible",Ie=U?"opacity-0 duration-0":"opacity-100 duration-300";let ne;e[45]!==Ie?(ne=B("col-span-full row-span-full flex flex-col gap-2 transition-[opacity,display] transition-discrete ease-linear motion-reduce:transition-none! starting:opacity-100",Ie),e[45]=Ie,e[46]=ne):ne=e[46];let Ce;e[47]===Symbol.for("react.memo_cache_sentinel")?(Ce=o.jsx(we,{id:"personality-onboarding.modal.title.try-new",defaultMessage:"Try a new personality for ChatGPT"}),e[47]=Ce):Ce=e[47];let ie;e[48]!==d?(ie=o.jsx("div",{className:"flex justify-between",children:o.jsx("h1",{className:"text-heading-2 font-medium text-balance",id:d,children:Ce})}),e[48]=d,e[49]=ie):ie=e[49];let _e;e[50]===Symbol.for("react.memo_cache_sentinel")?(_e=o.jsx(we,{id:"personality-onboarding.modal.subtitle.try-new",defaultMessage:"Adjust the style and tone of how ChatGPT responds to you. This doesn't impact ChatGPT's capabilities. You can change this anytime in Settings."}),e[50]=_e):_e=e[50];let le;e[51]!==f?(le=o.jsx("p",{id:f,className:"text-token-text-tertiary text-body-regular text-pretty",children:_e}),e[51]=f,e[52]=le):le=e[52];let oe;e[53]!==ne||e[54]!==ie||e[55]!==le?(oe=o.jsxs("div",{className:ne,children:[ie,le]}),e[53]=ne,e[54]=ie,e[55]=le,e[56]=oe):oe=e[56];let ae;e[57]!==Oe||e[58]!==oe?(ae=o.jsx(x.Activity,{mode:Oe,children:oe}),e[57]=Oe,e[58]=oe,e[59]=ae):ae=e[59];const Fe=U?"visible":"hidden";let re;if(e[60]!==S||e[61]!==c||e[62]!==u||e[63]!==m||e[64]!==Q){let $;e[66]!==S||e[67]!==c||e[68]!==m||e[69]!==Q?($=b=>o.jsx(x.Activity,{mode:Q[b.key]?"visible":"hidden",children:o.jsx("div",{className:"col-span-full row-span-full grid transition-none!","aria-label":c.formatMessage({id:"personality-onboarding.intro.aria-label",defaultMessage:"Examples of the {personality} personality"},{personality:b.label}),children:o.jsx(Vt,{personality:b,active:!!Q[b.key],intervalSec:S,prefersReducedMotion:m})})},b.key),e[66]=S,e[67]=c,e[68]=m,e[69]=Q,e[70]=$):$=e[70],re=u.map($),e[60]=S,e[61]=c,e[62]=u,e[63]=m,e[64]=Q,e[65]=re}else re=e[65];let ce;e[71]!==Fe||e[72]!==re?(ce=o.jsx(x.Activity,{mode:Fe,children:re}),e[71]=Fe,e[72]=re,e[73]=ce):ce=e[73];let fe;e[74]!==te||e[75]!==se||e[76]!==ae||e[77]!==ce?(fe=o.jsxs("header",{className:te,children:[se,ae,ce]}),e[74]=te,e[75]=se,e[76]=ae,e[77]=ce,e[78]=fe):fe=e[78];const Le=H?"py-4 max-md:px-6 min-md:p-8":"min-h-0 flex-1 px-10 pt-1";let de;e[79]!==Le?(de=B("space-y-6 overflow-y-auto",Le),e[79]=Le,e[80]=de):de=e[80];let ue;e[81]!==c?(ue=c.formatMessage({id:"personality-onboarding.modal.aria-label",defaultMessage:"Choose a personality"}),e[81]=c,e[82]=ue):ue=e[82];let me;e[83]!==H||e[84]!==P||e[85]!==a||e[86]!==i.logging||e[87]!==u||e[88]!==v?(me=a==="personality"?o.jsx(Yt,{isFullScreen:H,personalities:u,onSelect:$=>{W(!0),i.logging.increment("personality",$)}}):o.jsx(Jt,{traits:v,maxSelected:P}),e[83]=H,e[84]=P,e[85]=a,e[86]=i.logging,e[87]=u,e[88]=v,e[89]=me):me=e[89];let ge;e[90]!==de||e[91]!==ue||e[92]!==me?(ge=o.jsx("section",{className:de,"aria-label":ue,id:"personality-onboarding-personality-list",children:me}),e[90]=de,e[91]=ue,e[92]=me,e[93]=ge):ge=e[93];const De=H?"min-md:pt-3":"pt-6";let pe;e[94]!==De?(pe=B("flex flex-col items-center justify-center px-10 max-md:px-6 min-md:gap-3",De),e[94]=De,e[95]=pe):pe=e[95];const Be="primary",Ue=a==="personality"?!L:!mt,Ge=!L&&"[--btn-background-color:var(--bg-tertiary)] [--btn-text-color:var(--text-secondary)]";let ye;e[96]!==Ge?(ye=B("focus-visible:focus-ring w-full px-4.5 py-4 select-none",Ge),e[96]=Ge,e[97]=ye):ye=e[97];let he;e[98]!==P||e[99]!==a||e[100]!==A?(he=o.jsx(Xt,{count:A,max:P,mode:a}),e[98]=P,e[99]=a,e[100]=A,e[101]=he):he=e[101];let xe;e[102]!==Be||e[103]!==Ue||e[104]!==ye||e[105]!==he?(xe=o.jsx(at,{color:Be,visuallyDisabled:Ue,fullWidth:!0,className:ye,ref:E,type:"submit",children:he}),e[102]=Be,e[103]=Ue,e[104]=ye,e[105]=he,e[106]=xe):xe=e[106];let be;e[107]!==pe||e[108]!==xe?(be=o.jsx("footer",{className:pe,children:xe}),e[107]=pe,e[108]=xe,e[109]=be):be=e[109];let ve;e[110]!==Y?(ve=o.jsx(it,{canShrink:Y}),e[110]=Y,e[111]=ve):ve=e[111];let Se;e[112]!==ee||e[113]!==fe||e[114]!==ge||e[115]!==be||e[116]!==ve?(Se=o.jsxs("div",{className:"tall:h-[680px] grid h-[95dvh] w-full grid-rows-[minmax(10px,auto)_minmax(200px,1fr)_minmax(0,auto)_minmax(min-content,86px)_minmax(10px,auto)] p-0 max-md:h-[98dvh]",children:[ee,fe,ge,be,ve]}),e[112]=ee,e[113]=fe,e[114]=ge,e[115]=be,e[116]=ve,e[117]=Se):Se=e[117];let Pe;return e[118]!==d||e[119]!==Z||e[120]!==J||e[121]!==X||e[122]!==Se?(Pe=o.jsx("form",{className:Z,"aria-labelledby":d,onSubmit:J,onKeyUp:X,children:Se}),e[118]=d,e[119]=Z,e[120]=J,e[121]=X,e[122]=Se,e[123]=Pe):Pe=e[123],Pe}function ts(s){return s.key}function ss(s){return s.selected$()}function ns(s){return s.selected$()}function is(s){return s.selected$()}function ls(s){return s.selected$()}function os(s){return s.selected$()}function as(s){return s.selected$()}function it(s){"use forget";const e=q.c(4),{canShrink:t}=s,l=t&&"max-md:h-6";let i;e[0]!==l?(i=B("h-10 min-h-0",l),e[0]=l,e[1]=i):i=e[1];let n;return e[2]!==i?(n=o.jsx("div",{className:i}),e[2]=i,e[3]=n):n=e[3],n}function ut(s){"use forget";var F;const e=q.c(47),{canClose:t,className:l,onClose:i,onboarding:n,testId:a}=s,{flow:r}=n,[d,f]=x.useState((F=s.isOpen)!=null?F:!0),y=x.useId(),p=x.useId(),c=D(ct),h=c?r==="new-user-flow-personality"||r==="new-user-flow-traits":!0,m=x.useRef(null),g=x.useRef(null);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=_=>{m.current=_,g.current="submit",f(!1)},e[0]=u):u=e[0];const k=Ee(u);let v;e[1]!==i||e[2]!==n.logging?(v=()=>{g.current="close",f(!1),n.logging.log("skip"),i()},e[1]=i,e[2]=n.logging,e[3]=v):v=e[3];const w=Ee(v);let S;e[4]!==n.logging?(S=()=>{n.logging.log("impression")},e[4]=n.logging,e[5]=S):S=e[5];let C;if(e[6]!==n?(C=[n],e[6]=n,e[7]=C):C=e[7],x.useEffect(S,C),!c){const _=t?"history":"default";let A;e[8]!==i||e[9]!==n.logging||e[10]!==s?(A=()=>{m.current&&g.current==="submit"?s.onSubmit$(m.current):g.current==="close"&&(n.logging.log("skip"),i())},e[8]=i,e[9]=n.logging,e[10]=s,e[11]=A):A=e[11];let N;e[12]===Symbol.for("react.memo_cache_sentinel")?(N=o.jsx(K.Backdrop,{}),e[12]=N):N=e[12];let L;e[13]!==t||e[14]!==w||e[15]!==k||e[16]!==n?(L=o.jsx(K.ScrollRoot,{children:o.jsx(K.ContentSection,{children:o.jsx(nt,{canClose:t,onClose:w,onboarding:n,onSubmit$:k})})}),e[13]=t,e[14]=w,e[15]=k,e[16]=n,e[17]=L):L=e[17];let U;e[18]!==t||e[19]!==L?(U=o.jsx(K.Content,{handle:t,children:L}),e[18]=t,e[19]=L,e[20]=U):U=e[20];let W;e[21]!==t||e[22]!==A||e[23]!==U?(W=o.jsx(K.Portal,{children:o.jsxs(K.View,{"data-testid":"personality-onboarding-sheet",onCloseComplete:A,swipeDismissal:t,swipeOvershoot:!0,children:[N,U]})}),e[21]=t,e[22]=A,e[23]=U,e[24]=W):W=e[24];let V;return e[25]!==d||e[26]!==_||e[27]!==W?(V=o.jsx(K.Root,{defaultPresented:d,sheetRole:"dialog",behavior:_,sheetName:"personality-onboarding-sheet",presented:d,children:W}),e[25]=d,e[26]=_,e[27]=W,e[28]=V):V=e[28],V}const j=a!=null?a:"modal-personality-onboarding",R=!t,T=h?"grid place-content-center":"max-w-[min(420px,95dvw)] py-0";let E;e[29]!==l||e[30]!==T?(E=B(l,T),e[29]=l,e[30]=T,e[31]=E):E=e[31];const P=h?"fullscreen":"custom";let M;e[32]!==t||e[33]!==w||e[34]!==n||e[35]!==s.onSubmit$?(M=o.jsx(nt,{canClose:t,onClose:w,onboarding:n,onSubmit$:s.onSubmit$}),e[32]=t,e[33]=w,e[34]=n,e[35]=s.onSubmit$,e[36]=M):M=e[36];let O;return e[37]!==y||e[38]!==d||e[39]!==w||e[40]!==p||e[41]!==j||e[42]!==R||e[43]!==E||e[44]!==P||e[45]!==M?(O=o.jsx(Ct,{ariaLabelledBy:y,ariaDescribedBy:p,testId:j,isOpen:d,onClose:w,shouldIgnoreClickOutside:R,isScrollable:!1,allowVerticalContentToOverflow:!1,className:E,noPadding:!0,size:P,footerContent:null,children:M}),e[37]=y,e[38]=d,e[39]=w,e[40]=p,e[41]=j,e[42]=R,e[43]=E,e[44]=P,e[45]=M,e[46]=O):O=e[46],O}const rs=Object.freeze(Object.defineProperty({__proto__:null,PersonalityOnboardingModal:ut},Symbol.toStringTag,{value:"Module"})),lt=_t(()=>Pt(!1));function Ss(s){"use forget";const e=q.c(31),{conversationId:t,messageId:l,isPersonalityOnboardingRoute:i,onClose:n,onSubmit:a}=s,r=Mt(),d=ot(),f=Et(),{eligible:y,isLoading:p}=Bt(ft.hasSeenExistingUserPersonalityOnboarding);let c;e[0]!==r?(c=()=>lt(r),e[0]=r,e[1]=c):c=e[1];const h=D(c);let m;e[2]!==f||e[3]!==t||e[4]!==r?(m=()=>{var N;const _=t?At(r,t):null,A=_&&((N=Nt(_))==null?void 0:N.value)===Rt.STREAMING;return Tt(f)&&!A},e[2]=f,e[3]=t,e[4]=r,e[5]=m):m=e[5];const g=D(m),[u,k]=x.useState(g),v=x.useRef(!g),S=u&&(h||y&&!p||i);let C;e[6]!==y?(C=()=>{y&&(He.addAction("chatgpt_personality_upsell_available"),Ot.logEventWithStatsig("Web: Personality Upsell Eligibility Checked","chatgpt_personality_upsell_eligibility_checked"))},e[6]=y,e[7]=C):C=e[7];let j;e[8]!==r||e[9]!==y?(j=[y,r],e[8]=r,e[9]=y,e[10]=j):j=e[10],x.useEffect(C,j);let R,T;e[11]===Symbol.for("react.memo_cache_sentinel")?(R=()=>()=>{v.current&&He.addAction("chatgpt_personality_upsell_triggering_action_cancelled")},T=[],e[11]=R,e[12]=T):(R=e[11],T=e[12]),x.useEffect(R,T);let E;e[13]!==g?(E=()=>{if(!g)return;const _=window.setTimeout(()=>{k(!0),v.current=!1},3e3);return()=>clearTimeout(_)},e[13]=g,e[14]=E):E=e[14],x.useEffect(E);let P;e[15]!==t||e[16]!==r||e[17]!==d||e[18]!==l||e[19]!==n||e[20]!==a?(P=_=>{const A=_==="traits"?"new-user-flow-traits":"existing-user-flow-personality",N=function(){lt.set(r,!1)};zt({ctx:r,intl:d,conversationId:t,messageId:l,mode:_,selectedPersonality:A==="existing-user-flow-personality"?"default":null,flow:A,onClose:(...L)=>{const U=L;n==null||n(...U),N()},onSubmit:(...L)=>{const U=L;a==null||a(...U),N()}})},e[15]=t,e[16]=r,e[17]=d,e[18]=l,e[19]=n,e[20]=a,e[21]=P):P=e[21];const M=x.useEffectEvent(P);let O;e[22]!==r||e[23]!==M||e[24]!==i||e[25]!==S?(O=()=>{if(S)return M("personality"),()=>{Ke(r,ut),i&&Ut("/")}},e[22]=r,e[23]=M,e[24]=i,e[25]=S,e[26]=O):O=e[26];let F;return e[27]!==r||e[28]!==i||e[29]!==S?(F=[r,S,i],e[27]=r,e[28]=i,e[29]=S,e[30]=F):F=e[30],x.useEffect(O,F),null}export{Ss as NewUserPersonalityOnboarding,lt as existingUserPersonalityFlowOpen$};
//# sourceMappingURL=djrlx6pizyfe5936.js.map
