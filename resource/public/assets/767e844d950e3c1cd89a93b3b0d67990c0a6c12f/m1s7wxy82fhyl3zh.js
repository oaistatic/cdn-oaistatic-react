import{iz as _,bD as b,u as x,O as A,cu as E,qi as F,D as T,qj as w}from"./d0xa318sl7ywi0za.js";import{cd as D,ce as P,cf as Q}from"./g2euln7v5pbm31qa.js";import{r as y,b as L}from"./mw35uwhq4g8r9eam.js";const m=300*1e3,M=30*1e3;function k(f,h,p,s,r){var c;const o=(c=y.useContext(_))==null?void 0:c.serverSharedThreadId,t=D(p),I=y.useMemo(()=>({asset_pointer:t,content_type:b.ArbitraryAssetPointer}),[t]),n=P(),g=x(),q=!A(g),i=E(h),a=Q.makeQueryOptions({asset:I,sharedThreadId:o,postId:n,gizmoId:void 0,isUnauthenticated:q,conversationId:o?void 0:i}),d=F(),v=!!(f&&(i||o||n)&&t&&a.enabled),u=a.queryFn;if(typeof u=="symbol")throw Error("Unexpected symbol query fn...");return L({queryKey:a.queryKey,queryFn:async C=>{try{const e=await u(C);return s==null||s(e.url),{status:"success",download_url:e.url}}catch(e){T.addError(e);let l=d("default_download_link_error",{fileName:t});throw e instanceof w&&e.code!=null&&(l=d(e.code)),r==null||r(l),e}},enabled:v,staleTime:m,gcTime:M,refetchInterval:m,refetchOnWindowFocus:!0})}export{k as u};
//# sourceMappingURL=m1s7wxy82fhyl3zh.js.map
