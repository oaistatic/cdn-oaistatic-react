var Oe=Object.defineProperty,Fe=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Se=(r,e,n)=>e in r?Oe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,V=(r,e)=>{for(var n in e||(e={}))ze.call(e,n)&&Se(r,n,e[n]);if(Ae)for(var n of Ae(e))Ge.call(e,n)&&Se(r,n,e[n]);return r},D=(r,e)=>Fe(r,qe(e));import{c as K,j as a,r as F,h as oe,v as We,M as Ve}from"./mw35uwhq4g8r9eam.js";import{cF as ne,bk as z,R as He,A as Ye,kA as Xe,dz as pe,d as R,U as Ne,hs as Je,D as Qe,g3 as Ze,ky as De,_ as Ke,aB as et}from"./d0xa318sl7ywi0za.js";import{C as ue,R as tt,p as st,m as nt,a as ot,P as at,b as it,c as rt,d as lt,u as ct,S as dt,e as mt,f as pt}from"./irqezh7teqj3ew03.js";import{M as Ie}from"./i693kfbch8smq86y.js";import{r as ut}from"./oj9zwxa6l3kpv1x2.js";import{g as ae,t as ft,a as gt}from"./gqlh411iakvgnrfh.js";import{u as fe,a as ge,E as ht,P as yt,A as xt}from"./ehwx8pj63nln1ugv.js";import{t as Te}from"./l2u6v2d9vfposl4n.js";import{c as ee,b as me}from"./fkrqr6nqq2852orb.js";import{o_ as _t}from"./g2euln7v5pbm31qa.js";import"./ffo9fz3385kae4ff.js";import"./bzxitjpdx1z6hpbp.js";import"./iman6sxicn70h91g.js";import"./nvot86jvh8vwigra.js";import"./e5bg4yzr7nht9sxr.js";import"./gy1lpvuoewmzh42c.js";import"./iknugp00locgtve5.js";import"./h1em0bjkpkjv8ykw.js";import"./kbj1b07s2z6vxqkg.js";import"./hu1bt0oauegdhua6.js";import"./h4yh1661qhhbu5v5.js";import"./nk904upldvj1ufei.js";import"./m966r6qv7jykyvdd.js";import"./mtsxj0469osb30cx.js";import"./gs306ibz22k5zi3r.js";import"./lvrypwdhnjlsz45f.js";import"./pdbvfcpzcg4ny695.js";import"./ki6jbruunap4y9wd.js";import"./gywigwwdbkbcgqzt.js";import"./l4v2i2dq9gwjak1q.js";import"./pbx1h703pubtj7lo.js";import"./f89v9mtyvakgmoul.js";import"./oftnd9rlobxeh2e2.js";import"./nc9vr5q4g3rosm9u.js";import"./ns51nblw8ziscsgd.js";import"./ehv2vkvc6wjiqj3r.js";import"./ce3hgmw4iyyhicud.js";import"./lqx184c6v77q7gok.js";import"./la79eh1q1qxrfcxi.js";const Re=r=>{"use forget";const e=K.c(4),{errorMessages:n}=r;let d;e[0]!==n?(d=n.map(bt),e[0]=n,e[1]=d):d=e[1];let s;return e[2]!==d?(s=a.jsx("div",{className:"flex flex-col gap-2",children:d}),e[2]=d,e[3]=s):s=e[3],s};function bt(r,e){return a.jsx(ue,{message:r.content},e)}const Le=({intl:r,amount:e,currency:n})=>{const{minimumFractionDigits:d=0}=r.formatters.getNumberFormat(r.locale,{style:"currency",currency:n}).resolvedOptions();return r.formatNumber(e/10**d,{currency:n,style:"currency"})},Ct=F.memo(Ie),vt=r=>{"use forget";const e=K.c(28),{totals:n,currency:d,isLoading:s}=r,x=oe();let w,h,p,i,t,u,b;if(e[0]!==d||e[1]!==x||e[2]!==s||e[3]!==n){b=Symbol.for("react.early_return_sentinel");e:{const f=n.find(Mt);if(!f){b=null;break e}t="flex flex-col gap-3 pt-4";let v;e[11]!==d||e[12]!==x||e[13]!==s?(v=P=>a.jsxs("div",{className:"text-token-text-secondary flex items-end justify-between text-[13px]",children:[a.jsx("span",{className:"font-medium",children:P.display_text}),a.jsx(Ct,{className:ne("transition-opacity duration-200",s&&"opacity-50"),remarkPlugins:[[ut,{singleTilde:!1}]],children:Le({intl:x,amount:P.amount,currency:d})})]},P.type),e[11]=d,e[12]=x,e[13]=s,e[14]=v):v=e[14];const y=n.filter(wt).map(v);e[15]!==y?(u=a.jsx("div",{children:y}),e[15]=y,e[16]=u):u=e[16],p="flex items-end justify-between",i=a.jsx("div",{className:"flex flex-col",children:a.jsx("span",{className:"text-lg font-medium",children:f.display_text})}),w="text-xl font-medium",h=f.amount>0?a.jsx(tt,{text:Le({intl:x,amount:f.amount,currency:d}),className:ne("transition-opacity duration-200",s&&"opacity-50")}):"-"}e[0]=d,e[1]=x,e[2]=s,e[3]=n,e[4]=w,e[5]=h,e[6]=p,e[7]=i,e[8]=t,e[9]=u,e[10]=b}else w=e[4],h=e[5],p=e[6],i=e[7],t=e[8],u=e[9],b=e[10];if(b!==Symbol.for("react.early_return_sentinel"))return b;let l;e[17]!==w||e[18]!==h?(l=a.jsx("div",{className:w,children:h}),e[17]=w,e[18]=h,e[19]=l):l=e[19];let c;e[20]!==p||e[21]!==i||e[22]!==l?(c=a.jsxs("div",{className:p,children:[i,l]}),e[20]=p,e[21]=i,e[22]=l,e[23]=c):c=e[23];let C;return e[24]!==t||e[25]!==u||e[26]!==c?(C=a.jsxs("div",{className:t,children:[u,c]}),e[24]=t,e[25]=u,e[26]=c,e[27]=C):C=e[27],C};function Mt(r){return r.type==="total"}function wt(r){return r.type!=="total"}const Ue=async({conversation:r,elements:e,billingAddress:n,stripe:d,billingEmail:s,intl:x,expressPaymentType:w,onConfirm:h})=>{var v,y,P,M,k,j,_,o;const p=ae(r);p.status$.set("submitting"),p.messages$.set([]);const i=p.checkoutSession$(),t=w!==void 0,u=n!=null?n:p.billingAddress$();p.billingAddress$.set(u);const b=z(i==null?void 0:i.payment_provider),l=await st({stripe:z(d),elements:z(e),intl:x,billingEmail:s,billingName:z((y=u==null?void 0:u.name)!=null?y:(v=i==null?void 0:i.fulfillment_address)==null?void 0:v.name),isExpressCheckout:t});if(!l||l!=null&&l.isError)return;h==null||h();const c=window.location.href,C=c.includes("/share/"),f=r.serverId$();try{const g=z((P=i==null?void 0:i.totals.find(I=>I.type==="total"))==null?void 0:P.amount),m=z(i==null?void 0:i.currency),A=z((M=p.chatSDK$())==null?void 0:M.widgetParent),E=We(),L=(k=l.billing_details)!=null&&k.address?nt(l.billing_details.name,l.billing_details.address,l.billing_details.phone):u,S=await He.safePost("/shopping/ecosystem/checkout/{checkout_session_id}/complete",{parameters:{path:{checkout_session_id:(j=i==null?void 0:i.id)!=null?j:""}},requestBody:V({payment_provider:b,total_amount:g,currency:m,payment_attempt_id:E,ecosystem_app_uri:A,payment_method:{id:l.id,type:l.type,billing_address:L}},C?{sharedConversationUrl:c}:{conversationId:f}),authOption:Ye.SendIfAvailable}),{messages:$,order:N}=S,T=((o=(_=$==null?void 0:$.filter(I=>I.type==="error"))==null?void 0:_.length)!=null?o:0)>0;N&&!T?p.completeCheckout$(ft(S)):p.status$.set("idle"),p.messages$.set(Xe($,gt))}catch(g){p.status$.set("idle")}},Et=r=>{"use forget";const e=K.c(26),{maxColumns:n,maxRows:d,conversation:s,onReady:x,paymentTypes:w,allowedCountries:h,merchantTitle:p}=r;let i;e[0]!==n||e[1]!==d?(i=n?{maxColumns:n,maxRows:d}:void 0,e[0]=n,e[1]=d,e[2]=i):i=e[2];let t;e[3]!==p?(t={name:p},e[3]=p,e[4]=t):t=e[4];const u=w.includes("apple_pay")?"always":"never",b=w.includes("google_pay")?"always":"never",l=w.includes("shop_pay")?"auto":"never",c=w.includes("link")?"auto":"never";let C;e[5]!==u||e[6]!==b||e[7]!==l||e[8]!==c?(C={applePay:u,googlePay:b,shopPay:l,link:c},e[5]=u,e[6]=b,e[7]=l,e[8]=c,e[9]=C):C=e[9];const f=C;let v;e[10]===Symbol.for("react.memo_cache_sentinel")?(v=["apple_pay","google_pay","shop_pay","link"],e[10]=v):v=e[10];let y;e[11]!==h||e[12]!==i||e[13]!==t||e[14]!==f?(y={buttonHeight:40,layout:i,shippingAddressRequired:!1,shippingRates:void 0,billingAddressRequired:!0,allowedShippingCountries:h,business:t,phoneNumberRequired:!0,paymentMethods:f,paymentMethodOrder:v},e[11]=h,e[12]=i,e[13]=t,e[14]=f,e[15]=y):y=e[15];const P=y,M=oe(),k=fe(),j=ge(),_=pe(),o=_==null?void 0:_.email;let g;e[16]!==o||e[17]!==s||e[18]!==j||e[19]!==M||e[20]!==k?(g=async A=>{var S;const{billingDetails:E}=A,L=E!=null&&E.address&&(E!=null&&E.name)?ot(E.name,E.address,E.phone):void 0;await Ue({conversation:s,elements:j,stripe:k,billingAddress:L,billingEmail:z((S=E==null?void 0:E.email)!=null?S:o),intl:M})},e[16]=o,e[17]=s,e[18]=j,e[19]=M,e[20]=k,e[21]=g):g=e[21];let m;return e[22]!==x||e[23]!==P||e[24]!==g?(m=a.jsx(ht,{options:P,onConfirm:g,onReady:x,onShippingAddressChange:Pt,onShippingRateChange:kt}),e[22]=x,e[23]=P,e[24]=g,e[25]=m):m=e[25],m};async function Pt(r){const{resolve:e}=r;return e()}async function kt(r){const{resolve:e}=r;return e()}const jt=r=>{"use forget";var G,W,H;const e=K.c(48),{conversation:n,footerMessage:d,cartLoadError:s,currency:x,isLoadingAddress:w,isLoadingCartSession:h,isLoadingPayment:p,merchantTitle:i,paymentTypes:t,pushPane:u,totals:b}=r;let l;e[0]!==n?(l=ae(n),e[0]=n,e[1]=l):l=e[1];const c=l;let C;e[2]!==c?(C=()=>c.status$(),e[2]=c,e[3]=C):C=e[3];const f=R(C),v=f==="complete",y=f==="submitting",P=f==="updating";let M;e[4]!==c?(M=()=>c.allowedCountries$(),e[4]=c,e[5]=M):M=e[5];const k=R(M);let j;e[6]!==c?(j=()=>c.paymentDetails$(),e[6]=c,e[7]=j):j=e[7];const _=R(j);let o;e[8]!==c?(o=()=>c.errorMessages$(),e[8]=c,e[9]=o):o=e[9];const g=R(o);let m;e[10]!==c?(m=()=>c.paymentSheetButtonCta$(),e[10]=c,e[11]=m):m=e[11];const A=R(m),L=!((h||p||w)&&!s)&&!s;if(s){let O;return e[12]!==s?(O=a.jsx(ue,{message:s}),e[12]=s,e[13]=O):O=e[13],O}const S=!!(_!=null&&_.complete);let $;e[14]!==v||e[15]!==c?($=v&&a.jsx("div",{className:"bg-token-bg-primary absolute inset-0 z-50 flex items-center justify-center",children:a.jsx(it,{onComplete:()=>c.closeCheckout(),className:"h-44 w-44 text-green-400",loop:!1})}),e[14]=v,e[15]=c,e[16]=$):$=e[16];let N;e[17]!==h||e[18]!==p||e[19]!==_||e[20]!==u?(N=_&&a.jsxs(a.Fragment,{children:[a.jsx(at,{onClick:()=>u("paymentMethod"),isComplete:!!(_!=null&&_.complete),label:(G=_==null?void 0:_.label)!=null?G:"",sublabel:(W=_==null?void 0:_.sublabel)!=null?W:"",icon:(H=_==null?void 0:_.icon)!=null?H:void 0,isLoading:p||h}),a.jsx("hr",{})]}),e[17]=h,e[18]=p,e[19]=_,e[20]=u,e[21]=N):N=e[21];let T;e[22]!==x||e[23]!==h||e[24]!==b?(T=a.jsx(vt,{totals:b,currency:x,isLoading:h}),e[22]=x,e[23]=h,e[24]=b,e[25]=T):T=e[25];let I;e[26]!==k||e[27]!==L||e[28]!==n||e[29]!==S||e[30]!==y||e[31]!==P||e[32]!==i||e[33]!==A||e[34]!==t||e[35]!==u?(I=L&&a.jsx($t,{isSubmitting:y,isUpdating:P,conversation:n,merchantTitle:i,paymentTypes:t,allowedCountries:k,hasValidPaymentMethod:S,pushPane:u,paymentSheetButtonCta:A}),e[26]=k,e[27]=L,e[28]=n,e[29]=S,e[30]=y,e[31]=P,e[32]=i,e[33]=A,e[34]=t,e[35]=u,e[36]=I):I=e[36];let U;e[37]!==g?(U=g.length>0&&a.jsx(Re,{errorMessages:g}),e[37]=g,e[38]=U):U=e[38];let B;e[39]!==d?(B=d&&a.jsx(Ie,{className:"bg-token-bg-elevated-secondary text-token-text-tertiary border-token-border-light -mx-6 mt-4 h-full border-t p-6 text-xs",components:{a:At},children:d}),e[39]=d,e[40]=B):B=e[40];let q;return e[41]!==I||e[42]!==U||e[43]!==B||e[44]!==$||e[45]!==N||e[46]!==T?(q=a.jsxs("div",{className:"flex h-full flex-col px-6",children:[$,N,T,I,U,B]}),e[41]=I,e[42]=U,e[43]=B,e[44]=$,e[45]=N,e[46]=T,e[47]=q):q=e[47],q},$t=r=>{"use forget";const e=K.c(23),{conversation:n,merchantTitle:d,paymentTypes:s,allowedCountries:x,hasValidPaymentMethod:w,pushPane:h,isSubmitting:p,isUpdating:i,paymentSheetButtonCta:t}=r,[u,b]=F.useState(!1),l=oe(),c=fe(),C=ge(),f=pe(),v=f==null?void 0:f.email,y=!w;let P;e[0]===Symbol.for("react.memo_cache_sentinel")?(P=()=>b(!0),e[0]=P):P=e[0];let M;e[1]!==x||e[2]!==n||e[3]!==d||e[4]!==s?(M=a.jsx(Et,{maxColumns:1,maxRows:Number.MAX_SAFE_INTEGER,conversation:n,paymentTypes:s,allowedCountries:x,merchantTitle:d,onReady:P}),e[1]=x,e[2]=n,e[3]=d,e[4]=s,e[5]=M):M=e[5];let k;e[6]!==v||e[7]!==n||e[8]!==C||e[9]!==l||e[10]!==c?(k=async()=>{await Ue({conversation:n,elements:C,stripe:c,billingEmail:z(v),intl:l})},e[6]=v,e[7]=n,e[8]=C,e[9]=l,e[10]=c,e[11]=k):k=e[11];let j;return e[12]!==u||e[13]!==w||e[14]!==p||e[15]!==i||e[16]!==d||e[17]!==t||e[18]!==h||e[19]!==y||e[20]!==M||e[21]!==k?(j=a.jsx(rt,{isDisabled:y,isSubmitting:p,isUpdating:i,merchantTitle:d,hasValidPaymentMethod:w,paymentSheetButtonCta:t,expressCheckoutElementReady:u,expressCheckoutElement:M,onClickPay:k,pushPane:h}),e[12]=u,e[13]=w,e[14]=p,e[15]=i,e[16]=d,e[17]=t,e[18]=h,e[19]=y,e[20]=M,e[21]=k,e[22]=j):j=e[22],j};function At(r){return a.jsx("a",D(V({},r),{className:ne(r.className,"text-blue-400 underline"),target:"_blank",children:r.children}))}const St=10*1e3,Nt=({resetPanes:r,setLoadingPayment:e,paymentTypes:n,setStripeLoadingError:d,conversation:s})=>{"use no forget";const x=oe(),w=pe(),h=w==null?void 0:w.email,p=ge(),i=fe(),t=ae(s),u=R(()=>t.errorMessages$()),[b,l]=F.useState(null),[c,C]=F.useState(!1),[f,v]=F.useState(()=>Ne(()=>{var o;return(o=t.paymentDetails$())!=null?o:null})),[y,P]=F.useState(()=>Ne(()=>{var o;return(o=t.billingAddress$())!=null?o:null})),M=F.useRef(!0),k=F.useRef(!0),j=Je(()=>{M.current=!1,d(x.formatMessage(ee.stripeLoadingPaymentMethodError)),e(!1)});F.useEffect(()=>{const o=setTimeout(()=>{M.current&&j()},St);return()=>clearTimeout(o)},[j]);const _=async o=>{var g,m,A,E,L,S,$;if(l(null),M.current){if(M.current=!1,t.billingAddressComplete$()){e(!1);return}if(o.complete&&((g=o.value.payment_method)!=null&&g.id)){t.paymentDetails$.set(D(V({},me(o)),{complete:!0}));const{name:N,address:T,phone:I}=o.value.payment_method.billing_details,U={name:N!=null?N:"",line_one:(m=T.line1)!=null?m:"",line_two:(A=T.line2)!=null?A:"",city:(E=T.city)!=null?E:"",state:(L=T.state)!=null?L:"",country:(S=Te(T.country))!=null?S:"US",postal_code:($=T.postal_code)!=null?$:"",phone_number:I!=null?I:""};t.billingAddress$.set(U),v(D(V({},me(o)),{complete:o.complete}))}e(!1);return}o.complete&&v(D(V({},me(o)),{complete:!0}))};return a.jsxs("div",{className:"flex w-full flex-col gap-4 px-6 py-4",children:[a.jsxs("div",{className:ne(!n.includes("card")&&"hidden"),children:[a.jsx(yt,{id:"payment-element",options:{fields:{billingDetails:{email:"never",phone:"never"}},wallets:{applePay:"never",googlePay:"never"},defaultValues:{billingDetails:{email:h}},business:{name:"OpenAI"},layout:{type:"accordion",defaultCollapsed:!1}},onLoadError:()=>{M.current&&j()},onChange:_,onSavedPaymentMethodRemove:o=>{var g,m;((g=t.paymentDetails$())==null?void 0:g.paymentMethodId)===((m=o.payment_method)==null?void 0:m.id)&&(t.paymentDetails$.set(null),v(null))}}),b&&a.jsx("div",{className:"mt-2",children:a.jsx(ue,{message:b})}),a.jsx("div",{className:"mt-6 mb-2 text-sm font-medium",children:a.jsx(Ve,{id:"8pb7do",defaultMessage:"Billing address"})}),a.jsx(xt,{options:{mode:"billing",allowedCountries:["US"],fields:{phone:"always"},validation:{phone:{required:"always"}}},onChange:o=>{var g,m,A,E,L,S,$,N;if(l(null),k.current){k.current=!1;return}P({name:(g=o.value.name)!=null?g:"",line_one:(m=o.value.address.line1)!=null?m:"",line_two:(A=o.value.address.line2)!=null?A:"",city:(E=o.value.address.city)!=null?E:"",state:(L=o.value.address.state)!=null?L:"",country:(S=Te(o.value.address.country))!=null?S:"US",postal_code:($=o.value.address.postal_code)!=null?$:"",phone_number:(N=o.value.phone)!=null?N:""})}})]}),a.jsx(lt,{isSaving:c,isDisabled:c,onClick:async()=>{if(l(null),!p){l(x.formatMessage(ee.cartUpdateGeneralErrorRetryMessage));return}if(!f){l(x.formatMessage(ee.cartUpdateGeneralErrorMessage));return}if(!(y!=null&&y.name)){l(x.formatMessage(ee.stripeLoadingBillingAddressError));return}try{C(!0);const{error:o,paymentMethod:g}=await i.preparePaymentMethod({elements:p,params:{allow_redisplay:"always",billing_details:{name:y.name,email:h}}});if(C(!1),o){const{code:m,decline_code:A}=o||{},E=m&&A?await i.localizeError({code:m,decline_code:A}):o.message;l(E);return}t.paymentDetails$.set(D(V({},f),{complete:!0,paymentMethodId:g==null?void 0:g.id,paymentMethodType:g==null?void 0:g.type,label:f==null?void 0:f.label,sublabel:f==null?void 0:f.sublabel})),t.billingAddress$.set(y)}catch(o){console.error(o),Qe.addError(o),l(x.formatMessage(ee.cartUpdateGeneralErrorMessage)),C(!1);return}r()}}),u.length>0&&a.jsx(Re,{errorMessages:u})]})},bs=r=>{"use forget";var he,ye,xe,_e,be,Ce,ve,Me,we,Ee,Pe,ke;const e=K.c(69),{conversation:n}=r;let d;e[0]!==n?(d=ae(n),e[0]=n,e[1]=d):d=e[1];const s=d;let x;e[2]!==s?(x=()=>s.isLoadingPayment$(),e[2]=s,e[3]=x):x=e[3];const w=R(x);let h;e[4]!==s?(h=()=>s.footerMessage$(),e[4]=s,e[5]=h):h=e[5];const p=R(h);let i;e[6]!==s?(i=()=>s.chatSDK$(),e[6]=s,e[7]=i):i=e[7];const t=R(i);let u;e[8]!==s?(u=()=>s.checkoutSession$(),e[8]=s,e[9]=u):u=e[9];const b=R(u);let l;e[10]!==s?(l=()=>s.grandTotal$(),e[10]=s,e[11]=l):l=e[11];const c=R(l);let C;e[12]!==s?(C=()=>s.paymentTypes$(),e[12]=s,e[13]=C):C=e[13];const f=R(C);let v;e[14]!==s?(v=()=>s.sellerDetails$(),e[14]=s,e[15]=v):v=e[15];const y=R(v),{platformConnectors:P}=Ze(),M=ct("overview"),{currentPane:k,pushPane:j,popPane:_,resetPanes:o}=M;let g;e[16]!==(t==null?void 0:t.connectorId)||e[17]!==P?(g=P.get((he=t==null?void 0:t.connectorId)!=null?he:""),e[16]=t==null?void 0:t.connectorId,e[17]=P,e[18]=g):g=e[18];const m=g,A=(ye=m==null?void 0:m.logo_url)!=null?ye:"",E=(xe=m==null?void 0:m.logo_url_dark)!=null?xe:"";let L;e[19]!==A||e[20]!==E?(L={lightLogoUrl:A,darkLogoUrl:E},e[19]=A,e[20]=E,e[21]=L):L=e[21];const{data:S}=_t(L),$=(_e=t==null?void 0:t.widgetType)!=null?_e:"",N=(be=t==null?void 0:t.connectorId)!=null?be:"",T=(Ce=t==null?void 0:t.toolMessageId)!=null?Ce:"",I=(ve=t==null?void 0:t.metadata.suggestion_message_id)!=null?ve:"",U=(Me=t==null?void 0:t.metadata.distribution_channel)!=null?Me:De.ONLY_ME;let B;e[22]!==n.id||e[23]!==$||e[24]!==N||e[25]!==T||e[26]!==I||e[27]!==U?(B={name:$,conversation_id:n.id,attribution_id:N,message_id:T,suggestion_message_id:I,distribution_channel:U},e[22]=n.id,e[23]=$,e[24]=N,e[25]=T,e[26]=I,e[27]=U,e[28]=B):B=e[28];const q=B;let G,W;if(e[29]!==q?(G=()=>{Ke.logEventWithStatsig("chatgpt_web_ecosystem_app_checkout_modal_shown","chatgpt_web_ecosystem_app_checkout_modal_shown",q)},W=[q],e[29]=q,e[30]=G,e[31]=W):(G=e[30],W=e[31]),F.useEffect(G,W),!b||!t||!m)return null;const H=(b==null?void 0:b.status)!=="completed";let O,Y;e[32]!==s?(O=de=>{de.preventDefault(),s.cancelCheckout$()},Y=()=>s.cancelCheckout$(),e[32]=s,e[33]=O,e[34]=Y):(O=e[33],Y=e[34]);const ie=(we=S==null?void 0:S.url)!=null?we:void 0;let X;e[35]!==t.metadata.widget_domain||e[36]!==m.name||e[37]!==k||e[38]!==_||e[39]!==ie?(X=a.jsx(dt,{currentPane:k,popPane:_,url:t.metadata.widget_domain,logoUrl:ie,title:m.name,PANES:Tt}),e[35]=t.metadata.widget_domain,e[36]=m.name,e[37]=k,e[38]=_,e[39]=ie,e[40]=X):X=e[40];const re=(Ee=c==null?void 0:c.amount)!=null?Ee:0,le=(Pe=y==null?void 0:y.external_id)!=null?Pe:t.widgetParent,ce=(ke=y==null?void 0:y.network_id)!=null?ke:t.widgetParent;let J;e[41]!==s?(J=()=>s.fetchStripeSession$(),e[41]=s,e[42]=J):J=e[42];let Q;e[43]!==b||e[44]!==m.name||e[45]!==n||e[46]!==p||e[47]!==w||e[48]!==M||e[49]!==f||e[50]!==j||e[51]!==o||e[52]!==s?(Q=de=>{const{loadingCartSession:je,cartLoadError:$e}=de;return a.jsxs("div",{className:"relative flex h-full w-full flex-col",children:[a.jsx("hr",{className:"mx-6"}),a.jsx(pt,{className:"w-full flex-1",paneStack:M,useDelayedEnteringPane:!0,alwaysMountedPanes:["paymentMethod","overview"],renderPane:Be=>{switch(Be){case"overview":return a.jsx(jt,{conversation:n,cartLoadError:$e,pushPane:j,merchantTitle:m.name,paymentTypes:f,isLoadingCartSession:je,isLoadingPayment:w,isLoadingAddress:!1,currency:b.currency,totals:b.totals,footerMessage:p});case"paymentMethod":return!je&&!$e&&a.jsx(Nt,{resetPanes:o,paymentTypes:f,setStripeLoadingError:se=>{se&&s.addErrorMessage$(se)},setLoadingPayment:se=>s.isLoadingPayment$.set(se),conversation:n})}}})]})},e[43]=b,e[44]=m.name,e[45]=n,e[46]=p,e[47]=w,e[48]=M,e[49]=f,e[50]=j,e[51]=o,e[52]=s,e[53]=Q):Q=e[53];let Z;e[54]!==m.name||e[55]!==n.id||e[56]!==f||e[57]!==re||e[58]!==le||e[59]!==ce||e[60]!==J||e[61]!==Q?(Z=a.jsx(mt,{grandTotal:re,merchantExternalId:le,merchantNetworkId:ce,merchantTitle:m.name,paymentMethodTypes:f,clientThreadId:n.id,fetchSession:J,children:Q}),e[54]=m.name,e[55]=n.id,e[56]=f,e[57]=re,e[58]=le,e[59]=ce,e[60]=J,e[61]=Q,e[62]=Z):Z=e[62];let te;return e[63]!==H||e[64]!==O||e[65]!==Y||e[66]!==X||e[67]!==Z?(te=a.jsx(et,{testId:"modal-shopping-checkout",isOpen:!0,hideSeparator:!0,showCloseButton:H,size:"large",type:"success",className:"min-h-[600px] max-w-[550px]!",headerClassName:"sm:p-0 sm:px-4 sm:py-4 items-center sm:-me-1",contentClassName:"!p-0 pt-3",onEscapeKeyDown:O,onClose:Y,title:X,children:Z}),e[63]=H,e[64]=O,e[65]=Y,e[66]=X,e[67]=Z,e[68]=te):te=e[68],te},Tt={overview:{name:{id:"shopping-checkout.pane.overview.title",defaultMessage:"Overview",description:"Title for shopping checkout overview pane"}},shippingAddress:{name:{id:"shopping-checkout.pane.shippingAddress.title",defaultMessage:"Add Shipping Address",description:"Title for shopping checkout shipping address pane"}},shippingMethod:{name:{id:"shopping-checkout.pane.shippingMethod.title",defaultMessage:"Select Shipping Method",description:"Title for shopping checkout shipping method pane"}},paymentMethod:{name:{id:"shopping-checkout.pane.paymentMethod.title",defaultMessage:"Add payment method",description:"Title for shopping checkout payment method pane"}}};export{bs as EcosystemCheckoutModal};
//# sourceMappingURL=f4lmde6olrjh5i2c.js.map
