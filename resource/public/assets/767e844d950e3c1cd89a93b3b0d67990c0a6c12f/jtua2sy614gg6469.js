var ie=Object.defineProperty;var J=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var K=(n,e,o)=>e in n?ie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o,ee=(n,e)=>{for(var o in e||(e={}))le.call(e,o)&&K(n,o,e[o]);if(J)for(var o of J(e))re.call(e,o)&&K(n,o,e[o]);return n};import{c as ce,h as de,r as g,j as t,e as ge}from"./mw35uwhq4g8r9eam.js";import{eh as me,eP as ue,X as m,eQ as fe,eR as he,eS as pe,eT as Ie,eU as xe,eV as we,eW as De,dE as be,eX as ve,eY as Se,eZ as je,e_ as Ce,em as Me,el as Re}from"./g2euln7v5pbm31qa.js";import{LightboxNew as Y}from"./ii6qhpkhs6vyylw8.js";import{I as Ne}from"./kl0a548ohmz3fby2.js";import{S as ke}from"./ek39x165c6r9yjtf.js";import"./d0xa318sl7ywi0za.js";import"./eder15khh2fy5wd2.js";import"./obpubb7ugisfu36u.js";import"./ojmli062couj7r3v.js";import"./lv7ytt0l14b17ows.js";import"./gl4f6lge29au0ljx.js";import"./iio0zgk2sqlxbcjy.js";const ae=ge({thumbsUp:{id:"Qz8Wa6",defaultMessage:"Like this image"},thumbsDown:{id:"sUGtRy",defaultMessage:"Dislike this image"}}),Ue=n=>{var e,o,d,c;return Ce({pointer:{url:n.url,asset_pointer:(e=n.assetPointer)!=null?e:"",metadata:{dalle:{gen_id:(o=n.transformationId)!=null?o:void 0},generation:{gen_id:(d=n.transformationId)!=null?d:void 0}},width:n.width,height:n.height},conversationId:n.conversationId,messageId:(c=n.messageId)!=null?c:"",source:"chat"})},Ve=n=>{"use forget";var $;const e=ce.c(61),{images:o,initialIndex:d,onClose:c,conversation:u,currentModelId:q}=n,l=de(),y=me(),[i,Z]=g.useState(null),[b,P]=g.useState(null),[se,te]=g.useState(d),[f,A]=g.useState("default"),s=ue(),z=g.useRef(null),G=g.useRef(s);let v,S;e[0]!==s?(v=()=>{G.current=s},S=[s],e[0]=s,e[1]=v,e[2]=S):(v=e[1],S=e[2]),g.useEffect(v,S);let j;e[3]===Symbol.for("react.memo_cache_sentinel")?(j=r=>{P(null),Z(null),te(r),A("default"),G.current.clearAllDrawings()},e[3]=j):j=e[3];const ne=j;let C;e[4]!==l?(C=()=>Se(l),e[4]=l,e[5]=C):C=e[5];const L=C;let M;e[6]!==i?(M=(r,X)=>{!X||i!=null||(je.imageRated({liked:r,analyticsContext:Ue(X)}),Z(r),r||P(X))},e[6]=i,e[7]=M):M=e[7];const h=M,a=o[se];let R;e[8]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{A("default"),G.current.clearAllDrawings()},e[8]=R):R=e[8];const O=R;let N;e[9]!==a||e[10]!==h?(N=()=>{h(!0,a)},e[9]=a,e[10]=h,e[11]=N):N=e[11];const B=N;let k;e[12]!==a||e[13]!==h||e[14]!==i?(k=()=>{!a||i!=null||h(!1,a)},e[12]=a,e[13]=h,e[14]=i,e[15]=k):k=e[15];const H=k;let U;e[16]!==a?(U=()=>{a&&A("inpaint")},e[16]=a,e[17]=U):U=e[17];const Q=U;let T;e[18]!==a||e[19]!==L?(T=()=>{a&&Me({url:a.url,fileName:L()})},e[18]=a,e[19]=L,e[20]=T):T=e[20];const V=T;let _;e[21]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{var r;return(r=z.current)==null?void 0:r.getImageData()},e[21]=_):_=e[21];const oe=_;let E;e[22]!==u?(E=r=>Re(ee({conversation:u},r)),e[22]=u,e[23]=E):E=e[23];const W=E;let p;e[24]!==s||e[25]!==f?(p={mode:f,drawingState:s,drawingCanvasRef:z},e[24]=s,e[25]=f,e[26]=p):p=e[26];let I;e[27]!==a||e[28]!==y||e[29]!==s.canRedoDrawing||e[30]!==s.canUndoDrawing||e[31]!==s.redoDrawing||e[32]!==s.undoDrawing||e[33]!==V||e[34]!==Q||e[35]!==H||e[36]!==B||e[37]!==l||e[38]!==f||e[39]!==i?(I=t.jsx(Y.LightboxHeaderActions,{children:f==="inpaint"?t.jsxs("div",{className:"grid grow grid-cols-[1fr_auto] items-center gap-2",children:[t.jsx("div",{className:"text-center font-semibold",children:l.formatMessage({id:"TjVqYb",defaultMessage:"Edit Selection"})}),t.jsxs("div",{className:"flex gap-1 justify-self-end md:gap-2",children:[t.jsx(m,{className:"aspect-square",icon:fe,onClick:s.undoDrawing,disabled:!s.canUndoDrawing,"aria-label":l.formatMessage({id:"OmaTPx",defaultMessage:"Undo"})}),t.jsx(m,{className:"aspect-square",icon:he,onClick:s.redoDrawing,disabled:!s.canRedoDrawing,"aria-label":l.formatMessage({id:"ZUr4oh",defaultMessage:"Redo"})}),t.jsx(m,{className:"w-auto px-3",onClick:O,children:l.formatMessage({id:"D9xvar",defaultMessage:"Cancel"})})]})]}):t.jsxs("div",{className:"flex gap-1 md:gap-2",children:[i!==!1&&t.jsx(m,{className:"aspect-square",icon:i===!0?pe:Ie,onClick:B,"aria-label":l.formatMessage(ae.thumbsUp)}),i!==!0&&t.jsx(m,{className:"aspect-square",icon:i===!1?xe:we,onClick:H,"aria-label":l.formatMessage(ae.thumbsDown)}),t.jsx(m,{className:"aspect-square",icon:De,onClick:Q,"aria-label":l.formatMessage({id:"pRGwlp",defaultMessage:"Edit image"})}),t.jsx(m,{className:"aspect-square",icon:be,onClick:V,"aria-label":l.formatMessage({id:"9DNHka",defaultMessage:"Download image"})}),y()&&(a==null?void 0:a.messageId)&&t.jsx(ke,{assetPointer:a.assetPointer,serverThreadId:a.conversationId,messageId:a.messageId})]})}),e[27]=a,e[28]=y,e[29]=s.canRedoDrawing,e[30]=s.canUndoDrawing,e[31]=s.redoDrawing,e[32]=s.undoDrawing,e[33]=V,e[34]=Q,e[35]=H,e[36]=B,e[37]=l,e[38]=f,e[39]=i,e[40]=I):I=e[40];let x;e[41]!==a||e[42]!==u.id||e[43]!==q||e[44]!==s.currentDrawnShape||e[45]!==c||e[46]!==W?(x=t.jsx(Y.Footer,{children:t.jsx(Ne,{clientThreadId:u.id,currentModelId:q,onRequestCompletion:W,onClose:c,activeImage:a,currentDrawnShape:s.currentDrawnShape,getImageData:oe,onCancelInpaint:O})}),e[41]=a,e[42]=u.id,e[43]=q,e[44]=s.currentDrawnShape,e[45]=c,e[46]=W,e[47]=x):x=e[47];let w;e[48]!==o||e[49]!==d||e[50]!==c||e[51]!==p||e[52]!==I||e[53]!==x?(w=t.jsxs(Y.Root,{images:o,initialIndex:d,onClose:c,onIndexChange:ne,inpaintingProps:p,children:[I,x]}),e[48]=o,e[49]=d,e[50]=c,e[51]=p,e[52]=I,e[53]=x,e[54]=w):w=e[54];let D;e[55]!==b||e[56]!==i?(D=b&&t.jsx(ve,{messageId:($=b.messageId)!=null?$:"",serverThreadId:b.conversationId,rating:i,onClose:()=>P(null)}),e[55]=b,e[56]=i,e[57]=D):D=e[57];let F;return e[58]!==w||e[59]!==D?(F=t.jsxs(t.Fragment,{children:[w,D]}),e[58]=w,e[59]=D,e[60]=F):F=e[60],F};export{Ve as ImageGenConversationLightboxNew};
//# sourceMappingURL=jtua2sy614gg6469.js.map
