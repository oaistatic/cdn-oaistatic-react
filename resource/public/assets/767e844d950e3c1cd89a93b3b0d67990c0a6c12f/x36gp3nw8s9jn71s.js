import{c as z,j as s,r as L,M as q}from"./mw35uwhq4g8r9eam.js";import{aC as D,bP as G,u as J,J as Q,d as R,_ as U,cd as Z,aA as K,gi as X}from"./d0xa318sl7ywi0za.js";import{S as Y}from"./f89v9mtyvakgmoul.js";import{B as H,M as ee,a as te}from"./j5fhkqpinqfhn52i.js";import{ij as se,fV as ie,ik as ne,il as ae}from"./g2euln7v5pbm31qa.js";import"./mnzn4aq9ma1fy9cn.js";import"./iman6sxicn70h91g.js";import"./hdkg0cys1b7b4f0v.js";import"./kx34yg3blv92o8xp.js";function oe(B){"use forget";const e=z.c(9),{businesses:n,selectedIndex:o,onClick:r}=B;let c;if(e[0]!==n||e[1]!==r||e[2]!==o){let m;e[4]!==r||e[5]!==o?(m=(u,f)=>s.jsx("div",{onClick:()=>r(f),className:"cursor-pointer",children:s.jsx(H,{isSelected:f===o,idx:f,business:u.entity,trackContentReferenceEvent:le,enableSidebarNavigation:!1,imageClassName:"h-16 w-16"})},u.id),e[4]=r,e[5]=o,e[6]=m):m=e[6],c=n.map(m),e[0]=n,e[1]=r,e[2]=o,e[3]=c}else c=e[3];let i;return e[7]!==c?(i=s.jsx("div",{role:"list",className:"w-full divide-y",children:c}),e[7]=c,e[8]=i):i=e[8],i}function le(){}const be=D(()=>G(void 0));function ve(B){"use forget";const e=z.c(48),{conversation:n}=B,[o,r]=L.useState(-1);let c;e[0]!==n?(c=se(n),e[0]=n,e[1]=c):c=e[1];const i=c,m=J();let u;e[2]!==m?(u=Q(m,"1950533395"),e[2]=m,e[3]=u):u=e[3];const f=u;let k;e[4]!==i?(k=()=>i.currentContentReference$(),e[4]=i,e[5]=k):k=e[5];const t=R(k);let w;e[6]!==i?(w=()=>i.currentMessageId$(),e[6]=i,e[7]=w):w=e[7];const d=R(w);let C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C=[],e[8]=C):C=e[8],L.useEffect(de,C);let y;e[9]!==i?(y=()=>{ae({className:"map-with-entities",update:()=>{i.close$(),i.wasSidebarOpen$()&&Z.setSidebarOpen(!0)}})},e[9]=i,e[10]=y):y=e[10];const p=y,{openThreadSidebar:P}=ie(),{resetSidebarHistory:F}=ne();let I;e[11]!==n.id||e[12]!==P||e[13]!==(t==null?void 0:t.start_idx)||e[14]!==d||e[15]!==F?(I=(N,l)=>{var x;n.id&&(F(),P({type:"entity",debugThreadId:void 0,messageId:d!=null?d:"",contentReferenceStartIndex:(x=t==null?void 0:t.start_idx)!=null?x:0,query:l.name,category:"local_business",extraParams:l.entity.location?{location:l.entity.location}:void 0}))},e[11]=n.id,e[12]=P,e[13]=t==null?void 0:t.start_idx,e[14]=d,e[15]=F,e[16]=I):I=e[16];const a=I;if(!t||!d)return null;let $;e[17]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx("div",{className:"bg-token-bg-primary fixed start-0 end-0 top-0 bottom-0 z-21"}),e[17]=$):$=e[17];let T,E;e[18]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(Y,{className:"icon"}),T=s.jsx(q,{id:"jQZfgp",defaultMessage:"Back"}),e[18]=T,e[19]=E):(T=e[18],E=e[19]);let h;e[20]!==p?(h=s.jsxs(K,{color:"ghost",className:"my-2.5",contentWrapperClassName:"flex items-center gap-2",onClick:p,children:[E,T]}),e[20]=p,e[21]=h):h=e[21];let g;e[22]!==a||e[23]!==t.entities?(g=N=>{r(N),a==null||a(N,t.entities[N])},e[22]=a,e[23]=t.entities,e[24]=g):g=e[24];let S;e[25]!==t.entities||e[26]!==o||e[27]!==g?(S=s.jsx(oe,{businesses:t.entities,selectedIndex:o,onClick:g}),e[25]=t.entities,e[26]=o,e[27]=g,e[28]=S):S=e[28];let _;e[29]!==h||e[30]!==S?(_=s.jsxs("div",{className:"w-[360px]",children:[h,S]}),e[29]=h,e[30]=S,e[31]=_):_=e[31];let b;e[32]!==f||e[33]!==a?(b=N=>{const{idx:l,business:x,isSelected:V,isVisible:W}=N;return s.jsx(te,{idx:l,business:x,isSelected:V,isVisible:W,openOnHover:!0,tooltipLocation:"top",tooltipContent:s.jsx(H,{idx:l,business:x.entity,trackContentReferenceEvent:re,onOpenEntity:()=>{r(l),a==null||a(l,x)},enableSidebarNavigation:f,showActions:!0}),onOpenChange:O=>r(O?l:-1),isSonicSidebarEnabled:f,onClick:()=>{r(l),a==null||a(l,x)}},l)},e[32]=f,e[33]=a,e[34]=b):b=e[34];let v;e[35]!==n.id||e[36]!==p||e[37]!==t||e[38]!==d||e[39]!==o||e[40]!==b?(v=s.jsx("div",{className:"flex-1 p-3",children:s.jsx(ee,{contentReference:t,clientThreadId:n.id,messageId:d,trackContentReferenceEvent:ce,isFullScreen:!0,onFullScreenToggle:p,containerClassName:"[view-transition-name:map-with-entities]",selectedIndex:o,markerComponent:b})}),e[35]=n.id,e[36]=p,e[37]=t,e[38]=d,e[39]=o,e[40]=b,e[41]=v):v=e[41];let j;e[42]!==_||e[43]!==v?(j=s.jsxs("div",{className:"flex flex-1",children:[_,v]}),e[42]=_,e[43]=v,e[44]=j):j=e[44];let M;e[45]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx("div",{className:"h-24"}),e[45]=M):M=e[45];let A;return e[46]!==j?(A=s.jsxs(s.Fragment,{children:[$,s.jsx("div",{className:"fixed start-0 end-0 top-0 bottom-0 z-21 flex flex-col overflow-hidden",children:s.jsxs(X,{children:[j,M]})})]}),e[46]=j,e[47]=A):A=e[47],A}function re(){}function ce(){}function de(){U.logEventWithStatsig("chatgpt_web_places_overlay_shown","chatgpt_web_places_overlay_shown")}export{ve as PlacesOverlay,be as conversationTurnId$};
//# sourceMappingURL=x36gp3nw8s9jn71s.js.map
