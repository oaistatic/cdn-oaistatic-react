const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jn2gwhu7zz26y5ej.js","assets/mw35uwhq4g8r9eam.js","assets/d0xa318sl7ywi0za.js","assets/root-kavs8piy.css","assets/mstl8wgfzorpgdoe.js","assets/gywigwwdbkbcgqzt.js","assets/g2euln7v5pbm31qa.js","assets/conversation-small-lq38g8zw.css","assets/c0ls495fz2t1hbyy.js","assets/mraf0ji5wx0y0vgl.js","assets/b5fq0dy7czwrodri.js","assets/eea2lld77g0grm9n.js","assets/k527f0oyvlppyfoy.js"])))=>i.map(i=>d[i]);
var wn=Object.defineProperty,jn=Object.defineProperties;var Ln=Object.getOwnPropertyDescriptors;var cn=Object.getOwnPropertySymbols;var Bn=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable;var dn=(c,e,s)=>e in c?wn(c,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[e]=s,R=(c,e)=>{for(var s in e||(e={}))Bn.call(e,s)&&dn(c,s,e[s]);if(cn)for(var s of cn(e))Fn.call(e,s)&&dn(c,s,e[s]);return c},be=(c,e)=>jn(c,Ln(e));import{r as C,j as n,M as K,e as oe,c as yn,_ as ze,h as we,d as Kn,u as Gn,k as zn}from"./mw35uwhq4g8r9eam.js";import{cF as Hn,cw as Vn,aA as Cn,e7 as De,fT as je,rU as Le,be as He,u as Be,p as mn,x5 as fn,nr as Un,pf as hn,vJ as On,g4 as ke,ee as J,qg as Tn,ei as o,x6 as Ve,J as Sn,rV as Ue,_ as Nn,x7 as qe,ef as G,qe as Ge,tf as qn,er as Je,eg as Jn,fG as Wn,vE as Zn,jh as $n,x8 as Rn,x9 as xn,am as En,xa as me,xb as _n,xc as Yn,xd as Qn,xe as Xn,xf as et,xg as nt,xh as tt,xi as st,xj as at,xk as ot,nq as rt,fW as ct,nK as it,g3 as dt,xl as lt,tE as ut,xm as pt,lG as We,xn as gt,xo as yt,xp as S,dp as ln,aB as un,fN as Ct,pe as mt,xq as ft,t5 as ht,t7 as pn,tF as Ot,xr as Tt,xs as St,uo as Nt,ec as Ke,$ as Rt,a0 as xt}from"./d0xa318sl7ywi0za.js";import{ev as Et,et as _t,eu as Mt,bt as Mn,b$ as bn,cx as ve,bp as kn,cb as Ze,tT as Dn,xz as $e,rC as bt,as as te}from"./g2euln7v5pbm31qa.js";import{S as Pn}from"./pdbvfcpzcg4ny695.js";import{s as Ye}from"./ki6jbruunap4y9wd.js";import{s as kt,a as Dt}from"./gywigwwdbkbcgqzt.js";import{S as An}from"./l4v2i2dq9gwjak1q.js";import{I as In}from"./pbx1h703pubtj7lo.js";const Qe=({defaultValue:c,onContinue:e,options:s})=>{const[u,g]=C.useState(c);return n.jsxs(n.Fragment,{children:[n.jsx(Et,{value:u,onValueChange:m=>g(m),className:"flex flex-col gap-2 pt-8 pb-6",children:s.map(({value:m,label:O,description:N,Icon:r,Badge:f,disabled:P,tooltip:x})=>{const p=n.jsxs(_t,{value:m,className:Hn("border-token-border-default flex items-center gap-4 rounded-2xl border p-4 text-sm",P&&"cursor-not-allowed opacity-60"),disabled:P,children:[r&&n.jsx("span",{children:n.jsx(r,{className:"h-6 w-6"})}),n.jsxs("div",{className:"flex-1 text-start",children:[n.jsxs("div",{className:"flex items-center gap-1.5 pb-0.5",children:[typeof O=="string"?O:n.jsx(K,R({},O)),f&&n.jsx(f,{})]}),n.jsx("div",{className:"text-token-text-secondary",children:typeof N=="string"?N:n.jsx(K,R({},N))})]}),u===m?n.jsx(Mt,{className:"flex h-5 w-5 items-center justify-center rounded-full bg-gray-950 p-0.5 dark:bg-white",children:n.jsx("div",{className:"h-2 w-2 rounded-full bg-white dark:bg-gray-950"})}):n.jsx("div",{className:"border-token-border-default h-5 w-5 rounded-full border"})]},m);return x?n.jsx(Vn,{label:n.jsx("div",{className:"max-w-50",children:typeof x=="string"?x:n.jsx(K,R({},x))}),side:"right",children:p},m):p})}),n.jsx(Cn,{className:"w-full",size:"large",disabled:!u,onClick:()=>{u&&e(u)},children:n.jsx(K,R({},Pt.nextStepButton))})]})},Pt=oe({nextStepButton:{id:"addConnectorLinkModal.nextStepButton",defaultMessage:"Continue"}}),At=c=>{"use forget";var le,ue;const e=yn.c(49),{connector:s,onClose:u,onContinue:g,canAddDeepResearch:m,canAddInternalKnowledge:O,canAddOdyssey:N,messages:r}=c,f=De(),P=je(),x=!!(f!=null&&f.isPersonalAccount()&&P);let p;e[0]!==r.syncBadge?(p=()=>{"use forget";return n.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[n.jsx(Pn,{}),n.jsx(K,R({},r.syncBadge))]})},e[0]=r.syncBadge,e[1]=p):p=e[1];const a=p;let W;e[2]!==r.recommendedBadge?(W=()=>{"use forget";return n.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:n.jsx(K,R({},r.recommendedBadge))})},e[2]=r.recommendedBadge,e[3]=W):W=e[3];const z=W;let _;e[4]!==a||e[5]!==r.internalKnowledgeDescription||e[6]!==r.internalKnowledgeTitle?(_={value:"internalKnowledge",label:r.internalKnowledgeTitle,description:r.internalKnowledgeDescription,Icon:Mn,Badge:a},e[4]=a,e[5]=r.internalKnowledgeDescription,e[6]=r.internalKnowledgeTitle,e[7]=_):_=e[7];const H=_;let A;e[8]!==z||e[9]!==r.syncDescription||e[10]!==r.syncTitle?(A={value:"internalKnowledge",label:r.syncTitle,description:r.syncDescription,Icon:bn,Badge:z},e[8]=z,e[9]=r.syncDescription,e[10]=r.syncTitle,e[11]=A):A=e[11];const U=A;let E;e[12]!==r.deepResearchDescription||e[13]!==r.deepResearchTitle?(E={value:"deepResearch",label:r.deepResearchTitle,description:r.deepResearchDescription,Icon:ve},e[12]=r.deepResearchDescription,e[13]=r.deepResearchTitle,e[14]=E):E=e[14];const Z=E;let I;e[15]!==r.deepResearchAndOdysseyDescription||e[16]!==r.deepResearchAndOdysseyTitle?(I={value:"deepResearchAndOdyssey",label:r.deepResearchAndOdysseyTitle,description:r.deepResearchAndOdysseyDescription,Icon:ve},e[15]=r.deepResearchAndOdysseyDescription,e[16]=r.deepResearchAndOdysseyTitle,e[17]=I):I=e[17];const i=I;let D;e[18]!==r.dontSyncDescription||e[19]!==r.dontSyncTitle?(D={value:"deepResearch",label:r.dontSyncTitle,description:r.dontSyncDescription,Icon:kn},e[18]=r.dontSyncDescription,e[19]=r.dontSyncTitle,e[20]=D):D=e[20];const ee=D,L=x?U:H;let h;e[21]!==O||e[22]!==r.internalKnowledgeTooltip?(h=O?{}:R({disabled:!0},r.internalKnowledgeTooltip?{tooltip:r.internalKnowledgeTooltip}:{}),e[21]=O,e[22]=r.internalKnowledgeTooltip,e[23]=h):h=e[23];let b;e[24]!==L||e[25]!==h?(b=R(R({},L),h),e[24]=L,e[25]=h,e[26]=b):b=e[26];const t=b,M=N?i:x?ee:Z;let B;e[27]!==m||e[28]!==M?(B=m?M:be(R({},M),{disabled:!0}),e[27]=m,e[28]=M,e[29]=B):B=e[29];const ne=B;let de;e[30]!==t||e[31]!==ne?(de=[t,ne],e[30]=t,e[31]=ne,e[32]=de):de=e[32];const $=de;let q;e[33]!==r.selectProductTitle?(q=n.jsx(K,R({},r.selectProductTitle)),e[33]=r.selectProductTitle,e[34]=q):q=e[34];let re;e[35]!==s?(re=n.jsx(Ze,{connector:s,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),e[35]=s,e[36]=re):re=e[36];const ye=(ue=(le=s.branding)==null?void 0:le.developer)!=null?ue:void 0;let Y;e[37]!==u||e[38]!==q||e[39]!==re||e[40]!==ye?(Y=n.jsx(Le,{title:q,connectorIcon:re,connectorDeveloper:ye,onClose:u}),e[37]=u,e[38]=q,e[39]=re,e[40]=ye,e[41]=Y):Y=e[41];const ce=x?"internalKnowledge":void 0;let v;e[42]!==$||e[43]!==g||e[44]!==ce?(v=n.jsx(Qe,{defaultValue:ce,onContinue:g,options:$}),e[42]=$,e[43]=g,e[44]=ce,e[45]=v):v=e[45];let ie;return e[46]!==Y||e[47]!==v?(ie=n.jsxs(n.Fragment,{children:[Y,v]}),e[46]=Y,e[47]=v,e[48]=ie):ie=e[48],ie},fe=({messages:c})=>s=>n.jsx(At,be(R({},s),{messages:c})),It=oe({selectProductTitle:{id:"r2npOY",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"ZQSdTY",defaultMessage:"Chat, deep research, agent"},deepResearchAndOdysseyDescription:{id:"gzPmCe",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},deepResearchDescription:{id:"L+S/jI",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},dontSyncTitle:{id:"YcPoIP",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uO+gdP",defaultMessage:"ChatGPT will read your Google Drive files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"t5mu4H",defaultMessage:"Chat, deep research, agent"},internalKnowledgeDescription:{id:"0xFkEA",defaultMessage:"Sync Drive files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"yMY2Ng",defaultMessage:"Sync"},syncDescription:{id:"fcoBBw",defaultMessage:"Sync Google Drive files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"AEBXx0",defaultMessage:"Contact your admin to enable Google Drive for chat"}}),vt=fe({messages:It}),wt=({connector:c,internalKnowledgeConfigs:e,onClose:s,onContinue:u})=>{var m,O;const g=C.useMemo(()=>e.filter(N=>N.user_connection_details.auth_status==="not_connected").map(N=>({value:N.user_connection_details.connection_instance_id,label:N.connection_display_info.display_name,description:N.connection_display_info.description})),[e]);return n.jsxs(n.Fragment,{children:[n.jsx(Le,{title:n.jsx(K,R({},jt.selectConnectionTitle)),connectorIcon:n.jsx(Ze,{connector:c,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(O=(m=c.branding)==null?void 0:m.developer)!=null?O:void 0,onClose:s}),n.jsx(Qe,{onContinue:u,options:g})]})},jt=oe({selectConnectionTitle:{id:"2rQetR",defaultMessage:"Select a connection"}}),Lt=He(()=>ze(()=>import("./jn2gwhu7zz26y5ej.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(c=>c.RedirectContent)),Bt=({onClose:c,connector:e,noRedirect:s})=>{var Oe;const u=Be(),g=we(),m=Kn(),O=mn(),N=je(),r=!!fn(),f=De(),P=!!(f!=null&&f.isPersonalAccount()&&N),{isLoading:x,internalKnowledgeConfigs:p}=Un(),{mutateAsync:a}=hn(),{availableConnectors:W}=On(),{availableConnectors:z}=Dn(),_=C.useMemo(()=>{var y;return(y=p==null?void 0:p.filter(pe=>pe.user_connection_details.auth_status==="not_connected"))!=null?y:[]},[p]),H=$e(),A=_.length,{connectorLinks:U,refetch:E}=ke({productSku:J.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:Z}=ke({productSku:J.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),I=C.useMemo(()=>{var y;return!!((y=U.get(Tn))!=null&&y.length)},[U]),i=!I&&W.some(y=>y.type===o.GDRIVE_ACTION_CONNECTOR),D=!I&&z.some(y=>y.type===o.GDRIVE_ACTION_CONNECTOR),ee=i||D,L=A>0||P,h=ee&&L,b=D?"deepResearchAndOdyssey":i?"deepResearch":null,t=ee&&L,M=Ve(),B=t&&M!==J.DEEP_RESEARCH&&Sn(u,"3495630358"),ne=r&&L?"internalKnowledge":t?M===J.DEEP_RESEARCH?b:B?"internalKnowledge":null:L?"internalKnowledge":b,[de,$]=C.useState(!1),[q,re]=C.useState(ne),[ye,Y]=C.useState(ne==="internalKnowledge"&&!P),[ce,v]=C.useState(null),ie=C.useMemo(()=>A===1?p==null?void 0:p[0]:ce?p==null?void 0:p.find(y=>y.user_connection_details.connection_instance_id===ce):void 0,[A,p,ce]),[le,ue]=C.useState(!1),l=(Oe=Ue())!=null?Oe:"unknown_referrer",j=q!=null?q:h?null:L?"internalKnowledge":b,w=j==="deepResearch"||j==="deepResearchAndOdyssey",T=j==="internalKnowledge",Q=P&&j==="internalKnowledge",Te=h&&q==null,se=T&&!Q&&ye,he=C.useCallback(y=>{re(y),Y(y==="internalKnowledge"&&!P),y!=="internalKnowledge"&&v(null)},[v,P]),X=C.useCallback(y=>{b&&he(y?"internalKnowledge":b)},[b,he]),Se=C.useCallback(()=>{Y(!1)},[]),Ne=C.useCallback(async()=>{try{ue(!0),Ye("popup"),Nn.logEventWithStatsig("Connectors - Connect Personal Google Drive","chatgpt_connectors_connect_personal_google_drive_clicked",{sync:Q?"true":"false"});const y=await qe({connector:e,openPopup:!0,toaster:Q?void 0:O,intl:g,productSku:J.CONNECTOR_SETTING});if(E(),Z(),(y==null?void 0:y.errorType)==="oauth_failed_scope_mismatch"){ue(!1),$(!0);return}y!=null&&y.linkId&&Q&&a({link:{id:y.linkId,name:e.name,connector_id:G[o.GDRIVE_ACTION_CONNECTOR]},isConnectingAndUpgrading:!0,referrer:l}).then(()=>{Ge(u)});const pe=H(e);s?c():pe?window.location.href=pe:(c(),setTimeout(()=>{m(qn,{replace:!0})},500)),$(!1)}catch(y){ue(!1)}},[u,Q,e,O,g,E,Z,H,s,a,c,m,l]);return x?n.jsx("div",{className:"flex justify-center",children:n.jsx(Je,{})}):de?n.jsxs(n.Fragment,{children:[n.jsx(Le,{onClose:c,connectorIcon:n.jsx("div",{className:"rounded-xl border-[0.5px] bg-white p-2 shadow-sm",children:n.jsx(Jn,{height:32,width:32})}),title:g.formatMessage({id:"LrBpzI",defaultMessage:"Permissions required"})}),n.jsxs("div",{className:"border-token-border-default text-token-text-secondary mt-8 mb-6 flex items-center gap-4 rounded-xl border p-4 text-sm",children:[n.jsx(Wn,{className:"icon-lg"}),n.jsx(K,{id:"googleDriveLinkingModalDescription",defaultMessage:"In the next step, make sure to check all boxes. ChatGPT requires the full list of Google permissions."})]}),n.jsx(Cn,{className:"w-full",onClick:Ne,loading:le,size:"large",children:n.jsx(K,{id:"reconnect",defaultMessage:"Reconnect"})})]}):n.jsxs(n.Fragment,{children:[Te&&n.jsx(vt,{onClose:c,connector:e,onContinue:he,canAddDeepResearch:i,canAddOdyssey:D,canAddInternalKnowledge:L}),(w||Q||se)&&n.jsx(Lt,{connector:e,onClose:c,isConnecting:le,onContinue:se?Se:Ne,productSku:J.CONNECTOR_SETTING,canSync:B,isRequestingSync:T,setIsRequestingSync:B?X:void 0}),T&&!Q&&!se&&A>1&&!ce&&n.jsx(wt,{internalKnowledgeConfigs:p!=null?p:[],onClose:c,connector:e,onContinue:v}),T&&ie&&!Q&&!se&&n.jsx(Zn,{immediatelyKickOffOAuth:B,isAdminFlow:!1,onClose:()=>{B||(he(null),v(null)),(!h||B)&&c()},connectionId:ie.user_connection_details.connection_instance_id,location:"user_settings",onSuccess:()=>{setTimeout(()=>{Ge(u)},1e3),c()},excludeModalWrapper:!0})]})},Ft=oe({selectProductTitle:{id:"EcfaIh",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"7f5MJU",defaultMessage:"Find, analyze, and synthesize your HubSpot data to create comprehensive reports"},deepResearchDescription:{id:"52mZY5",defaultMessage:"Find, analyze, and synthesize your HubSpot data to create comprehensive reports"},dontSyncTitle:{id:"bIOtPo",defaultMessage:"Don't sync"},dontSyncDescription:{id:"R5dVLr",defaultMessage:"ChatGPT will read your HubSpot data as needed, so replies may be slower."},internalKnowledgeTitle:{id:"R09hUc",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"Gf7d++",defaultMessage:"Sync HubSpot data to ChatGPT for more relevant, up-to-date answers"},internalKnowledgeTooltip:{id:"uCYMoO",defaultMessage:"Contact your admin to enable HubSpot for chat"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"9Au+em",defaultMessage:"Sync"},syncDescription:{id:"BYPzIj",defaultMessage:"Sync HubSpot data to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Kt=fe({messages:Ft}),Gt=oe({selectProductTitle:{id:"bpaehG",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"2EXqDU",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},deepResearchDescription:{id:"pNQbc3",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},dontSyncTitle:{id:"pFj6Xq",defaultMessage:"Don't sync"},dontSyncDescription:{id:"QX+ada",defaultMessage:"ChatGPT will read your Jira issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iK7v/r",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"RBzElS",defaultMessage:"Sync Jira issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"2NrkD8",defaultMessage:"Sync"},syncDescription:{id:"l4VShM",defaultMessage:"Sync Jira issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"vM2Wdq",defaultMessage:"Contact your admin to enable Jira for chat"}}),zt=fe({messages:Gt}),Ht=oe({selectProductTitle:{id:"0hzRKh",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"hVvY37",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},deepResearchDescription:{id:"hbh71y",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},dontSyncTitle:{id:"9CKUT3",defaultMessage:"Don't sync"},dontSyncDescription:{id:"yeSkeT",defaultMessage:"ChatGPT will read your Jira Service Management tickets as needed, so replies may be slower."},internalKnowledgeTitle:{id:"jvk58G",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"qv1dVO",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"dk0bHH",defaultMessage:"Sync"},syncDescription:{id:"pgpt5C",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"arahcS",defaultMessage:"Contact your admin to enable Jira Service Management for chat"}}),Vt=fe({messages:Ht}),Ut=()=>n.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[n.jsx(Pn,{}),n.jsx(K,R({},ae.syncBadge))]}),qt=()=>n.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:n.jsx(K,R({},ae.recommendedBadge))}),Jt=({connector:c,onClose:e,onContinue:s,canAddDeepResearch:u,canAddInternalKnowledge:g,canAddOdyssey:m})=>{var x,p;const O=De(),N=je(),r=!!(O!=null&&O.isPersonalAccount()&&N),f=we(),P=C.useMemo(()=>[R(R({},r?Yt:$t),g?{}:{disabled:!0,tooltip:f.formatMessage({id:"GbkN+V",defaultMessage:"Contact your admin to enable Notion for chat"})}),...u?[m?Zt:r?Qt:Wt]:[]],[r,g,f,u,m]);return n.jsxs(n.Fragment,{children:[n.jsx(Le,{title:n.jsx(K,R({},ae.selectProductTitle)),connectorIcon:n.jsx(Ze,{connector:c,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(p=(x=c.branding)==null?void 0:x.developer)!=null?p:void 0,onClose:e}),n.jsx(Qe,{defaultValue:r?"internalKnowledge":void 0,onContinue:s,options:P})]})},ae=oe({selectProductTitle:{id:"DAwG09",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"KXsRFb",defaultMessage:"Find, analyze, and synthesize your team's Notion pages and databases to create comprehensive reports"},deepResearchDescription:{id:"gZpO3N",defaultMessage:"Find, analyze, and synthesize Notion pages and databases for richer reports"},dontSyncTitle:{id:"GMrSDT",defaultMessage:"Don't sync"},dontSyncDescription:{id:"y/IdPs",defaultMessage:"ChatGPT will read your Notion content as needed, so replies may be slower."},internalKnowledgeTitle:{id:"QJf1Sc",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"lJilfk",defaultMessage:"Sync Notion pages and databases to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"7Ar/Ej",defaultMessage:"Sync"},syncDescription:{id:"6WCZbJ",defaultMessage:"Sync Notion content to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Wt={value:"deepResearch",label:ae.deepResearchTitle,description:ae.deepResearchDescription,Icon:ve},Zt={value:"deepResearchAndOdyssey",label:ae.deepResearchAndOdysseyTitle,description:ae.deepResearchAndOdysseyDescription,Icon:ve},$t={value:"internalKnowledge",label:ae.internalKnowledgeTitle,description:ae.internalKnowledgeDescription,Icon:Mn,Badge:Ut},Yt={value:"internalKnowledge",label:ae.syncTitle,description:ae.syncDescription,Icon:bn,Badge:qt},Qt={value:"deepResearch",label:ae.dontSyncTitle,description:ae.dontSyncDescription,Icon:kn},Xt=oe({selectProductTitle:{id:"uecmFA",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"ZQSdTY",defaultMessage:"Chat, deep research, agent"},deepResearchAndOdysseyDescription:{id:"plFxz/",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},deepResearchDescription:{id:"D9wqqk",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},dontSyncTitle:{id:"FNGsn2",defaultMessage:"Don't sync"},dontSyncDescription:{id:"ol0mde",defaultMessage:"ChatGPT will read your SharePoint files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"9IqPsM",defaultMessage:"Chat, deep research, agent"},internalKnowledgeDescription:{id:"Mkivbe",defaultMessage:"Sync SharePoint files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"w0EP7L",defaultMessage:"Sync"},syncDescription:{id:"WmlsRw",defaultMessage:"Sync SharePoint files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"g8mQKA",defaultMessage:"Contact your admin to enable SharePoint for chat"}}),es=fe({messages:Xt}),ns=oe({selectProductTitle:{id:"tiiSob",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"E2YSMq",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},deepResearchDescription:{id:"sQ+00J",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},dontSyncTitle:{id:"M9p5Sr",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uJTHjO",defaultMessage:"ChatGPT will read your Box files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8z2iu4",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"xK+380",defaultMessage:"Sync Box files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"nbQOhy",defaultMessage:"Sync"},syncDescription:{id:"QVxBJI",defaultMessage:"Sync Box files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"4Gp6+x",defaultMessage:"Contact your admin to enable Box for chat"}}),ts=fe({messages:ns}),ss=oe({selectProductTitle:{id:"Kc1KGe",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"YxjjQU",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},deepResearchDescription:{id:"SmRTX8",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},dontSyncTitle:{id:"B1m/Ur",defaultMessage:"Don't sync"},dontSyncDescription:{id:"nDBuCO",defaultMessage:"ChatGPT will read your Confluence pages as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8ckwHH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"CkaEi7",defaultMessage:"Sync Confluence pages to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"tJk3ba",defaultMessage:"Sync"},syncDescription:{id:"di8xMd",defaultMessage:"Sync Confluence pages to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"dKvJHF",defaultMessage:"Contact your admin to enable Confluence for chat"}}),as=fe({messages:ss}),os=oe({selectProductTitle:{id:"5spMkf",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"U0acJQ",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},deepResearchDescription:{id:"jIJEzP",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},dontSyncTitle:{id:"8B2iTh",defaultMessage:"Don't sync"},dontSyncDescription:{id:"MWu53i",defaultMessage:"ChatGPT will read your Dropbox files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iUMNhW",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"73blMa",defaultMessage:"Sync Dropbox files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"aRVh2X",defaultMessage:"Sync"},syncDescription:{id:"uTHxb2",defaultMessage:"Sync Dropbox files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"/uVHMl",defaultMessage:"Contact your admin to enable Dropbox for chat"}}),rs=fe({messages:os}),cs=oe({selectProductTitle:{id:"vNGjSS",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"1X1JDE",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},deepResearchDescription:{id:"0ExpFM",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},dontSyncTitle:{id:"4WufmE",defaultMessage:"Don't sync"},dontSyncDescription:{id:"0BFTy+",defaultMessage:"ChatGPT will read your Intercom conversations as needed, so replies may be slower."},internalKnowledgeTitle:{id:"m/G/ff",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"4gC4/b",defaultMessage:"Sync Intercom conversations to ChatGPT for more relevant, up-to-date answers"},internalKnowledgeTooltip:{id:"YxCdN8",defaultMessage:"Contact your admin to enable Intercom for chat"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"jafwiu",defaultMessage:"Sync"},syncDescription:{id:"ISqAI/",defaultMessage:"Sync Intercom conversations to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),is=fe({messages:cs}),ds=oe({selectProductTitle:{id:"kU51Yz",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"5P9nHy",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},deepResearchDescription:{id:"7qO5UY",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},dontSyncTitle:{id:"s+7AVU",defaultMessage:"Don't sync"},dontSyncDescription:{id:"qQEaBe",defaultMessage:"ChatGPT will read your Linear issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"CZbTgH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"S+Hglq",defaultMessage:"Sync Linear issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"XI3bjb",defaultMessage:"Sync"},syncDescription:{id:"3e8sdS",defaultMessage:"Sync Linear issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"lxy6iQ",defaultMessage:"Contact your admin to enable Linear for chat"}}),ls=fe({messages:ds}),gn=He(()=>ze(()=>import("./jn2gwhu7zz26y5ej.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(c=>c.RedirectContent));function k({platformConnectorType:c,knowledgeConnectorType:e,connectorId:s,ProductSelectComponent:u,syncConnectorId:g,showProductSelectWithoutDeepResearch:m}){return function({onClose:N,connector:r}){var sn;const f=we(),P=f.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),x=Ve(),p=!!fn(),[a,W]=C.useState(!1),z=(sn=Ue())!=null?sn:"unknown_referrer",_=De(),H=je(),A=Be(),U=$n(A),E=C.useMemo(()=>Rn(r.link_params_schema),[r.link_params_schema]),[Z,I]=C.useState({}),i=C.useMemo(()=>xn(E,Z),[E,Z]),[D,ee]=C.useState({}),L=C.useMemo(()=>{const d=new Set(E.map(F=>F.name)),Ce={};for(const[F,V]of Object.entries(D))d.has(F)&&(Ce[F]=V);return Ce},[D,E]),h=C.useCallback((d,Ce)=>{I(F=>be(R({},F),{[d]:Ce})),ee(F=>{if(!F[d])return F;const V=R({},F);return delete V[d],V})},[]),b=(_==null?void 0:_.planType)===En.SELF_SERVE_BUSINESS?!0:!!(_!=null&&_.isPersonalAccount()&&H),{availableConnectors:t,isLoading:M}=On(),{availableConnectors:B,isLoading:ne}=Dn(),{isLoading:de,internalKnowledgeConfigs:$,internalKnowledgeEnabled:q}=ws(e),[re,ye]=C.useMemo(()=>bt($!=null?$:[],d=>d.user_connection_details.auth_status==="not_connected"),[$]),Y=re.length,ce=ye.length,v=Y>0||b,{connectorLinks:ie,refetch:le,isLoading:ue}=ke({productSku:J.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:l}=ke({productSku:J.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),j=$e(),{mutateAsync:w}=hn(),T=C.useMemo(()=>{var d;return!!((d=ie.get(s))!=null&&d.length)},[ie]),Q=!T&&t.some(d=>d.type===c),Te=!T&&B.some(d=>d.type===c),se=Q||Te,he=!!(u&&m&&v),X=!!u&&x!==J.DEEP_RESEARCH&&(se||he)&&(v||!(_!=null&&_.isPersonalAccount())&&q&&ce<1&&!b),Se=se?Te?"deepResearchAndOdyssey":"deepResearch":null,Ne=v&&se,Oe=x!==J.DEEP_RESEARCH&&Ne&&Sn(A,"3495630358"),y=g==null,[pe,Pe]=C.useState(()=>p||v&&!se?"internalKnowledge":x===J.DEEP_RESEARCH?"deepResearch":Oe?y?"internalKnowledge":Se:null),Xe=x===J.DEEP_RESEARCH||pe==="deepResearch"||pe==="deepResearchAndOdyssey"||!X&&se,en=pe==="internalKnowledge"||!X&&x!==J.DEEP_RESEARCH&&v,Ae=Xe?J.DEEP_RESEARCH:J.CONNECTOR_SETTING,Ee=en&&v,Fe=Ee&&g!=null,vn=x!==J.DEEP_RESEARCH&&(de||X&&(M||ne))||X&&ue,nn=E.length>0?n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:n.jsx(K,R({},me.sectionTitle))}),n.jsx("div",{className:"text-token-text-secondary text-xs",children:n.jsx(K,R({},me.sectionDescription))})]}),n.jsx("div",{className:"flex flex-col gap-3",children:E.map(d=>{var Re,_e,xe;const Ce=d.required?f.formatMessage(me.fieldLabelRequired,{label:d.title}):d.title,F=f.formatMessage(me.fieldPlaceholder,{label:d.title}),V=L[d.name];if(d.enumValues&&d.enumValues.length>0){const ge="link_param_".concat(d.name),an="".concat(ge,"_label"),on=V?"".concat(ge,"_error"):void 0,rn=(Re=i[d.name])!=null?Re:"";return n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{id:an,className:"text-token-text-primary text-xs font-semibold",htmlFor:ge,children:Ce}),n.jsxs(te.Root,{value:rn===""?void 0:rn,onValueChange:Me=>h(d.name,Me),children:[n.jsxs(te.Trigger,{id:ge,"aria-labelledby":an,"aria-describedby":on,"aria-invalid":V?!0:void 0,className:"border-token-border-heavy bg-token-bg-primary w-full justify-between rounded-md text-start",children:[n.jsx("div",{className:"flex-1 truncate text-sm",children:n.jsx(te.Value,{placeholder:F})}),n.jsx(te.Icon,{})]}),n.jsx(te.Portal,{children:n.jsx(te.Content,{className:"border-token-border-heavy border",children:(_e=d.enumValues)==null?void 0:_e.map(Me=>n.jsx(te.Item,{value:Me,children:Me},Me))})})]}),V?n.jsxs("div",{id:on,className:"flex items-center gap-1 text-xs text-red-500",children:[n.jsx(An,{title:P}),V]}):null,d.description?n.jsx("div",{className:"text-token-text-secondary text-xs",children:d.description}):null]},d.name)}return n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(In,{name:"link_param_".concat(d.name),displayName:Ce,value:(xe=i[d.name])!=null?xe:"",onChange:ge=>h(d.name,ge.target.value),placeholder:F,error:V,showErrorIcon:!0}),d.description?n.jsx("div",{className:"text-token-text-secondary text-xs",children:d.description}):null]},d.name)})})]}):void 0,tn=C.useCallback(async()=>{var Ce;let d;if(E.length>0){const{sanitizedLinkParams:F,errors:V}=_n(E,i,f);if(Object.keys(V).length>0){ee(V),U.danger(f.formatMessage(me.requiredFieldsToast));return}ee({}),d=F}try{W(!0),Ye("popup");const F=j(r),V=Fe&&g!=null?g:r.id,Ie=await qe({connector:r,redirectAfter:F||void 0,toaster:U,openPopup:!0,intl:f,productSku:Ae,connectorIdOverride:Fe?g:void 0,linkParams:d});if(await le(),Ee)try{const{data:Re}=await l(),_e=Ie&&typeof Ie=="object"?Ie.linkId:void 0,xe=(Ce=Re==null?void 0:Re.get(V))==null?void 0:Ce[0];let ge=null;typeof _e=="string"?ge={id:_e,name:r.name,connector_id:V}:xe&&typeof xe.id=="string"&&(ge={id:xe.id,name:r.name,connector_id:V}),ge&&(await w({link:ge,isConnectingAndUpgrading:!0,referrer:z}),setTimeout(()=>{Ge(A)},1e3))}catch(Re){}N()}catch(F){W(!1)}},[A,r,f,E,i,j,N,Ae,le,l,Fe,Ee,U,w,z]);return vn?n.jsx("div",{className:"flex justify-center",children:n.jsx(Je,{})}):n.jsxs(n.Fragment,{children:[u&&X&&!pe&&n.jsx(u,{onClose:N,connector:r,onContinue:Pe,canAddDeepResearch:Q,canAddOdyssey:Te,canAddInternalKnowledge:v}),(Xe||Ee)&&n.jsx(gn,{connector:r,onClose:N,isConnecting:a,onContinue:tn,productSku:Ae,canSync:Oe,isRequestingSync:pe==="internalKnowledge",setIsRequestingSync:d=>Pe(d?"internalKnowledge":Se),additionalContent:nn}),en&&!Ee&&n.jsx(gn,{connector:r,onClose:()=>{Pe(null),X||N()},isConnecting:a,onContinue:tn,productSku:Ae,canSync:Oe,isRequestingSync:pe==="internalKnowledge",setIsRequestingSync:d=>Pe(d?"internalKnowledge":Se),additionalContent:nn})]})}}const us=k({platformConnectorType:o.SHAREPOINT_CONNECTOR,knowledgeConnectorType:"sharepoint",connectorId:ot,ProductSelectComponent:es}),ps=k({platformConnectorType:o.DROPBOX_CONNECTOR,knowledgeConnectorType:"dropbox",connectorId:at,ProductSelectComponent:rs}),gs=k({platformConnectorType:o.BOX_CONNECTOR,knowledgeConnectorType:"box",connectorId:st,ProductSelectComponent:ts}),ys=k({platformConnectorType:o.LINEAR_CONNECTOR,knowledgeConnectorType:"linear",connectorId:tt,ProductSelectComponent:ls}),Cs=k({platformConnectorType:o.JIRA_CONNECTOR,knowledgeConnectorType:"jira",connectorId:G[o.JIRA_CONNECTOR],ProductSelectComponent:zt}),ms=k({platformConnectorType:o.JIRA_SERVICEMANAGEMENT_CONNECTOR,knowledgeConnectorType:"jira_servicemanagement",connectorId:G[o.JIRA_SERVICEMANAGEMENT_CONNECTOR],ProductSelectComponent:Vt}),fs=k({platformConnectorType:o.CONFLUENCE_CONNECTOR,knowledgeConnectorType:"confluence",connectorId:G[o.CONFLUENCE_CONNECTOR],ProductSelectComponent:as}),hs=k({platformConnectorType:o.NOTION_CONNECTOR,knowledgeConnectorType:"notion",connectorId:et,syncConnectorId:nt,ProductSelectComponent:Jt}),Os=k({platformConnectorType:o.HUBSPOT_CONNECTOR,knowledgeConnectorType:"hubspot",connectorId:Qn,syncConnectorId:Xn,ProductSelectComponent:Kt}),Ts=k({platformConnectorType:o.INTERCOM_CONNECTOR,knowledgeConnectorType:"intercom",connectorId:Yn,ProductSelectComponent:is,showProductSelectWithoutDeepResearch:!0}),Ss=k({platformConnectorType:o.AHA_CONNECTOR,knowledgeConnectorType:"aha",connectorId:G[o.AHA_CONNECTOR]}),Ns=k({platformConnectorType:o.ASANA_CONNECTOR,knowledgeConnectorType:"asana",connectorId:G[o.ASANA_CONNECTOR]}),Rs=k({platformConnectorType:o.AZURE_DEVOPS_CONNECTOR,knowledgeConnectorType:"azure_devops",connectorId:G[o.AZURE_DEVOPS_CONNECTOR]}),xs=k({platformConnectorType:o.CLICKUP_CONNECTOR,knowledgeConnectorType:"clickup",connectorId:G[o.CLICKUP_CONNECTOR]}),Es=k({platformConnectorType:o.BASECAMP_CONNECTOR,knowledgeConnectorType:"basecamp",connectorId:G[o.BASECAMP_CONNECTOR]}),_s=k({platformConnectorType:o.GITLAB_CONNECTOR,knowledgeConnectorType:"gitlab",connectorId:G[o.GITLAB_CONNECTOR]}),Ms=k({platformConnectorType:o.GORGIAS_CONNECTOR,knowledgeConnectorType:"gorgias",connectorId:G[o.GORGIAS_CONNECTOR]}),bs=k({platformConnectorType:o.HELP_SCOUT_CONNECTOR,knowledgeConnectorType:"help_scout",connectorId:G[o.HELP_SCOUT_CONNECTOR]}),ks=k({platformConnectorType:o.IRONCLAD_CONNECTOR,knowledgeConnectorType:"ironclad",connectorId:G[o.IRONCLAD_CONNECTOR]}),Ds=k({platformConnectorType:o.TEAMWORK_CONNECTOR,knowledgeConnectorType:"teamwork",connectorId:G[o.TEAMWORK_CONNECTOR]}),Ps=k({platformConnectorType:o.PIPEDRIVE_CONNECTOR,knowledgeConnectorType:"pipedrive",connectorId:G[o.PIPEDRIVE_CONNECTOR]}),As=k({platformConnectorType:o.ZOHO_CONNECTOR,knowledgeConnectorType:"zoho",connectorId:G[o.ZOHO_CONNECTOR]}),Is=k({platformConnectorType:o.ZOHO_DESK_CONNECTOR,knowledgeConnectorType:"zoho_desk",connectorId:G[o.ZOHO_DESK_CONNECTOR]}),vs=k({platformConnectorType:o.ZENDESK_CONNECTOR,knowledgeConnectorType:"zendesk",connectorId:G[o.ZENDESK_CONNECTOR]});function ws(c){const e=rt(),s=ct(),u=C.useMemo(()=>{var g;return(g=s.data)==null?void 0:g.connection_statuses.filter(m=>m.user_connection_details.knowledge_connector_type===c)},[s.data,c]);return{isLoading:s.isLoading,internalKnowledgeEnabled:e,internalKnowledgeConfigs:e&&(u!=null&&u.length)?u:null}}const js=He(()=>ze(()=>import("./jn2gwhu7zz26y5ej.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(c=>c.RedirectContent)),Ls=({connector:c,onClose:e,productSku:s,redirectAfter:u,authTypeOverride:g,noRedirect:m=!1,onComplete:O})=>{"use no forget";var le,ue;const N=Be(),r=we(),f=mn(),{connectorLinks:P}=ke({productSku:s}),x=r.formatMessage({id:"FormField.errorIcon",defaultMessage:"Error"}),[p,a]=C.useState(!1),[W,z]=C.useState(void 0),_=Gn(),H=Ct(),A=mt(),U=$e(),E=Ue(),[Z,I]=zn(),i=ft(),D=ht(),ee=c.id===pn&&i,L=We[c.id]===o.GITHUB_CONNECTOR,h=C.useMemo(()=>Rn(c.link_params_schema),[c.link_params_schema]),[b,t]=C.useState({}),M=C.useMemo(()=>xn(h,b),[h,b]),[B,ne]=C.useState({}),$=(ue=((le=P.get(c.id))!=null?le:[])[0])==null?void 0:ue.id,q=!0,re=C.useMemo(()=>{const l=new Set(h.map(w=>w.name)),j={};for(const[w,T]of Object.entries(B))l.has(w)&&(j[w]=T);return j},[B,h]),ye=(l,j)=>{t(w=>be(R({},w),{[l]:j})),ne(w=>{if(!w[l])return w;const T=R({},w);return delete T[l],T})};let Y=u;if(L){const l=new URL(u!=null?u:"/",window.location.origin);H&&(l.searchParams.append("github_onboarding","sync-repos"),Y=l.pathname+l.search)}const ce=async l=>{const j=Ot(c,g!=null?g:l);let w;if(j==="OAUTH"&&h.length>0){const{sanitizedLinkParams:T,errors:Q}=_n(h,M,r);if(Object.keys(Q).length>0){ne(Q),f.danger(r.formatMessage(me.requiredFieldsToast));return}ne({}),w=T}try{switch(a(!0),z(j),j){case"OAUTH":{m&&Ye("popup");const T=U(c);await qe({connector:c,redirectAfter:m?void 0:T||Y,toaster:f,openPopup:m?!0:A,intl:r,productSku:s,slackTeamIdOverride:c.id===pn&&D!=null?D:void 0,linkParams:w}),await _.invalidateQueries({refetchType:"all",queryKey:["fetchConnectorLinkData"]}),O==null||O(),e();break}case"NONE":{await Tt(c),await Promise.all([_.invalidateQueries({refetchType:"all",queryKey:["fetchConnectorLinkData"]}),St.refetch(N)]),O==null||O(),e(),f.success(r.formatMessage({id:"cb/7hh",defaultMessage:"{connector} is now connected"},{connector:Nt(c.name,r)})),(E===Ke.JitPluginMessage||E===Ke.MessageSuggestion||E===Ke.SourcePills)&&I(T=>(T.set("link_success","true"),T),{replace:!0});break}}}catch(T){a(!1),z(void 0),T instanceof Error&&f.danger(r.formatMessage({id:"wham.connectorSettings.addConnectorLinkModal.error",defaultMessage:"Failed to add connector link"}))}},v=h.length>0?n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:n.jsx(K,R({},me.sectionTitle))}),n.jsx("div",{className:"text-token-text-secondary text-xs",children:n.jsx(K,R({},me.sectionDescription))})]}),n.jsx("div",{className:"flex flex-col gap-3",children:h.map(l=>{var Te,se,he;const j=l.required?r.formatMessage(me.fieldLabelRequired,{label:l.title}):l.title,w=r.formatMessage(me.fieldPlaceholder,{label:l.title}),T=re[l.name];if(l.enumValues&&l.enumValues.length>0){const X="link_param_".concat(l.name),Se="".concat(X,"_label"),Ne=T?"".concat(X,"_error"):void 0,Oe=(Te=M[l.name])!=null?Te:"";return n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{id:Se,className:"text-token-text-primary text-xs font-semibold",htmlFor:X,children:j}),n.jsxs(te.Root,{value:Oe===""?void 0:Oe,onValueChange:y=>ye(l.name,y),children:[n.jsxs(te.Trigger,{id:X,"aria-labelledby":Se,"aria-describedby":Ne,"aria-invalid":T?!0:void 0,className:"border-token-border-heavy bg-token-bg-primary w-full justify-between rounded-md text-start",children:[n.jsx("div",{className:"flex-1 truncate text-sm",children:n.jsx(te.Value,{placeholder:w})}),n.jsx(te.Icon,{})]}),n.jsx(te.Portal,{children:n.jsx(te.Content,{className:"border-token-border-heavy border",children:(se=l.enumValues)==null?void 0:se.map(y=>n.jsx(te.Item,{value:y,children:y},y))})})]}),T?n.jsxs("div",{id:Ne,className:"flex items-center gap-1 text-xs text-red-500",children:[n.jsx(An,{title:x}),T]}):null,l.description?n.jsx("div",{className:"text-token-text-secondary text-xs",children:l.description}):null]},l.name)}return n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(In,{name:"link_param_".concat(l.name),displayName:j,value:(he=M[l.name])!=null?he:"",onChange:X=>ye(l.name,X.target.value),placeholder:w,error:T,showErrorIcon:!0}),l.description?n.jsx("div",{className:"text-token-text-secondary text-xs",children:l.description}):null]},l.name)})})]}):void 0,ie=()=>{var l;Rt.count(xt.ECOSYSTEM,"connector_link_modal_dismissed"),Nn.logEventWithStatsig("Connector Link Modal Dismissed","chatgpt_web_connector_link_modal_dismissed",{referrer:E,connector_id:c.id,connector_name:c.name,connector_distribution_channel:(l=c.distribution_channel)!=null?l:null,product_sku:s}),e()};return n.jsx(js,{connector:c,onClose:ie,isConnecting:p,isConnectingAuthType:W,onContinue:ce,productSku:s,showExternalIcon:!0,personalizationLinkId:$,personalizeResultsEnabled:q,additionalContent:v,additionalMessageThatDoesNotContainLegalClaims:ee?n.jsx(K,{id:"addConnectorLinkModal.slackWorkspaceReminder",defaultMessage:"In the next step, choose the {workspace} Slack workspace before approving access.",values:{workspace:n.jsx("span",{className:"font-semibold",children:i})}}):void 0})},Bs=c=>{"use forget";const e=De(),s=!(e!=null&&e.isPersonalAccount())&&(e==null?void 0:e.planType)!==En.SELF_SERVE_BUSINESS,u=gt(),{isEnabled:g,isLoading:m}=yt(),O=s?g&&!m:!0,N=S("linear"),r=S("dropbox"),f=S("box"),P=S("notion"),x=S("hubspot"),p=S("confluence"),a=S("jira"),W=S("jira_servicemanagement"),z=S("intercom"),_=S("aha"),H=S("asana"),A=S("azure_devops"),U=S("basecamp"),E=S("clickup"),Z=S("freshdesk"),I=S("freshservice"),i=S("front"),D=S("gitlab"),ee=S("gorgias"),L=S("help_scout"),h=S("ironclad"),b=S("pipedrive"),t=S("salesforce_service_cloud"),M=S("shortcut"),B=S("teamwork"),ne=S("zendesk"),de=S("zoho"),$=S("zoho_desk");if(!c)return!1;switch(We[c.id]){case o.SHAREPOINT_CONNECTOR:return!!(u&&O);case o.LINEAR_CONNECTOR:return N;case o.DROPBOX_CONNECTOR:return r;case o.BOX_CONNECTOR:return f;case o.NOTION_CONNECTOR:return P;case o.HUBSPOT_CONNECTOR:return x;case o.CONFLUENCE_CONNECTOR:return p;case o.JIRA_CONNECTOR:return a;case o.JIRA_SERVICEMANAGEMENT_CONNECTOR:return W;case o.INTERCOM_CONNECTOR:return z;case o.AHA_CONNECTOR:return _;case o.ASANA_CONNECTOR:return H;case o.AZURE_DEVOPS_CONNECTOR:return A;case o.BASECAMP_CONNECTOR:return U;case o.CLICKUP_CONNECTOR:return E;case o.FRESHDESK_CONNECTOR:return Z;case o.FRESHSERVICE_CONNECTOR:return I;case o.FRONT_CONNECTOR:return i;case o.GITLAB_CONNECTOR:return D;case o.GORGIAS_CONNECTOR:return ee;case o.HELP_SCOUT_CONNECTOR:return L;case o.IRONCLAD_CONNECTOR:return h;case o.PIPEDRIVE_CONNECTOR:return b;case o.SALESFORCE_SERVICE_CLOUD_CONNECTOR:return t;case o.SHORTCUT_CONNECTOR:return M;case o.TEAMWORK_CONNECTOR:return B;case o.ZENDESK_CONNECTOR:return ne;case o.ZOHO_CONNECTOR:return de;case o.ZOHO_DESK_CONNECTOR:return $;default:return!1}},Ws=c=>{"use forget";const e=yn.c(102),{onClose:s,connectorId:u,onComplete:g,redirectAfter:m}=c,O=Be(),N=it(),r=u!=null?u:N,f=Ve(),{platformConnectors:P,isLoading:x}=dt(!0,f);let p;e[0]!==r||e[1]!==P?(p=r?P.get(r):void 0,e[0]=r,e[1]=P,e[2]=p):p=e[2];const a=p,W=lt(),z=m!=null?m:W,_=ut(),H=!!pt(),A=Bs(a);if(x){let t;return e[3]===Symbol.for("react.memo_cache_sentinel")?(t=n.jsx("div",{className:"flex justify-center",children:n.jsx(Je,{})}),e[3]=t):t=e[3],t}const U=(a==null?void 0:a.id)===Tn;if(!a){let t;e[4]===Symbol.for("react.memo_cache_sentinel")?(t=n.jsx(ln.Overlay,{}),e[4]=t):t=e[4];let M;return e[5]!==s?(M=n.jsx(ln.Root,{isOpen:!0,onClose:s,testId:"modal-add-connector-link",children:t}),e[5]=s,e[6]=M):M=e[6],M}const E=We[a.id];let Z;e[7]!==_||e[8]!==a||e[9]!==H||e[10]!==s||e[11]!==g||e[12]!==f||e[13]!==z?(Z=n.jsx(Ls,{connector:a,onClose:s,productSku:f,redirectAfter:z,authTypeOverride:_,noRedirect:H,onComplete:g}),e[7]=_,e[8]=a,e[9]=H,e[10]=s,e[11]=g,e[12]=f,e[13]=z,e[14]=Z):Z=e[14];const I=Z;let i;e:switch(E){case o.SHAREPOINT_CONNECTOR:{let t;e[15]!==a||e[16]!==s?(t=n.jsx(us,{onClose:s,connector:a}),e[15]=a,e[16]=s,e[17]=t):t=e[17],i=t;break e}case o.DROPBOX_CONNECTOR:{let t;e[18]!==a||e[19]!==s?(t=n.jsx(ps,{onClose:s,connector:a}),e[18]=a,e[19]=s,e[20]=t):t=e[20],i=t;break e}case o.BOX_CONNECTOR:{let t;e[21]!==a||e[22]!==s?(t=n.jsx(gs,{onClose:s,connector:a}),e[21]=a,e[22]=s,e[23]=t):t=e[23],i=t;break e}case o.LINEAR_CONNECTOR:{let t;e[24]!==a||e[25]!==s?(t=n.jsx(ys,{onClose:s,connector:a}),e[24]=a,e[25]=s,e[26]=t):t=e[26],i=t;break e}case o.NOTION_CONNECTOR:{let t;e[27]!==a||e[28]!==s?(t=n.jsx(hs,{onClose:s,connector:a}),e[27]=a,e[28]=s,e[29]=t):t=e[29],i=t;break e}case o.HUBSPOT_CONNECTOR:{let t;e[30]!==a||e[31]!==s?(t=n.jsx(Os,{onClose:s,connector:a}),e[30]=a,e[31]=s,e[32]=t):t=e[32],i=t;break e}case o.CONFLUENCE_CONNECTOR:{let t;e[33]!==a||e[34]!==s?(t=n.jsx(fs,{onClose:s,connector:a}),e[33]=a,e[34]=s,e[35]=t):t=e[35],i=t;break e}case o.JIRA_CONNECTOR:{let t;e[36]!==a||e[37]!==s?(t=n.jsx(Cs,{onClose:s,connector:a}),e[36]=a,e[37]=s,e[38]=t):t=e[38],i=t;break e}case o.JIRA_SERVICEMANAGEMENT_CONNECTOR:{let t;e[39]!==a||e[40]!==s?(t=n.jsx(ms,{onClose:s,connector:a}),e[39]=a,e[40]=s,e[41]=t):t=e[41],i=t;break e}case o.INTERCOM_CONNECTOR:{let t;e[42]!==a||e[43]!==s?(t=n.jsx(Ts,{onClose:s,connector:a}),e[42]=a,e[43]=s,e[44]=t):t=e[44],i=t;break e}case o.AHA_CONNECTOR:{let t;e[45]!==a||e[46]!==s?(t=n.jsx(Ss,{onClose:s,connector:a}),e[45]=a,e[46]=s,e[47]=t):t=e[47],i=t;break e}case o.ASANA_CONNECTOR:{let t;e[48]!==a||e[49]!==s?(t=n.jsx(Ns,{onClose:s,connector:a}),e[48]=a,e[49]=s,e[50]=t):t=e[50],i=t;break e}case o.AZURE_DEVOPS_CONNECTOR:{let t;e[51]!==a||e[52]!==s?(t=n.jsx(Rs,{onClose:s,connector:a}),e[51]=a,e[52]=s,e[53]=t):t=e[53],i=t;break e}case o.BASECAMP_CONNECTOR:{let t;e[54]!==a||e[55]!==s?(t=n.jsx(Es,{onClose:s,connector:a}),e[54]=a,e[55]=s,e[56]=t):t=e[56],i=t;break e}case o.CLICKUP_CONNECTOR:{let t;e[57]!==a||e[58]!==s?(t=n.jsx(xs,{onClose:s,connector:a}),e[57]=a,e[58]=s,e[59]=t):t=e[59],i=t;break e}case o.GITLAB_CONNECTOR:{let t;e[60]!==a||e[61]!==s?(t=n.jsx(_s,{onClose:s,connector:a}),e[60]=a,e[61]=s,e[62]=t):t=e[62],i=t;break e}case o.GORGIAS_CONNECTOR:{let t;e[63]!==a||e[64]!==s?(t=n.jsx(Ms,{onClose:s,connector:a}),e[63]=a,e[64]=s,e[65]=t):t=e[65],i=t;break e}case o.HELP_SCOUT_CONNECTOR:{let t;e[66]!==a||e[67]!==s?(t=n.jsx(bs,{onClose:s,connector:a}),e[66]=a,e[67]=s,e[68]=t):t=e[68],i=t;break e}case o.IRONCLAD_CONNECTOR:{let t;e[69]!==a||e[70]!==s?(t=n.jsx(ks,{onClose:s,connector:a}),e[69]=a,e[70]=s,e[71]=t):t=e[71],i=t;break e}case o.TEAMWORK_CONNECTOR:{let t;e[72]!==a||e[73]!==s?(t=n.jsx(Ds,{onClose:s,connector:a}),e[72]=a,e[73]=s,e[74]=t):t=e[74],i=t;break e}case o.ZENDESK_CONNECTOR:{let t;e[75]!==a||e[76]!==s?(t=n.jsx(vs,{onClose:s,connector:a}),e[75]=a,e[76]=s,e[77]=t):t=e[77],i=t;break e}case o.PIPEDRIVE_CONNECTOR:{let t;e[78]!==a||e[79]!==s?(t=n.jsx(Ps,{onClose:s,connector:a}),e[78]=a,e[79]=s,e[80]=t):t=e[80],i=t;break e}case o.ZOHO_CONNECTOR:{let t;e[81]!==a||e[82]!==s?(t=n.jsx(As,{onClose:s,connector:a}),e[81]=a,e[82]=s,e[83]=t):t=e[83],i=t;break e}case o.ZOHO_DESK_CONNECTOR:{let t;e[84]!==a||e[85]!==s?(t=n.jsx(Is,{onClose:s,connector:a}),e[84]=a,e[85]=s,e[86]=t):t=e[86],i=t;break e}default:i=null}const D=i,ee=kt(O,a),L=Dt(O,a);if(ee){const t=L?"max-w-[660px]":"max-w-[580px]";let M;return e[87]!==I||e[88]!==s||e[89]!==t?(M=n.jsx(un,{testId:"modal-add-connector-link",type:"success",isOpen:!0,onClose:s,size:"custom",noPadding:!0,className:t,children:I}),e[87]=I,e[88]=s,e[89]=t,e[90]=M):M=e[90],M}let h;e[91]!==a||e[92]!==I||e[93]!==U||e[94]!==A||e[95]!==D||e[96]!==H||e[97]!==s?(h=U?n.jsx(Bt,{onClose:s,connector:a,noRedirect:H}):A&&D!=null?D:I,e[91]=a,e[92]=I,e[93]=U,e[94]=A,e[95]=D,e[96]=H,e[97]=s,e[98]=h):h=e[98];let b;return e[99]!==s||e[100]!==h?(b=n.jsx(un,{testId:"modal-add-connector-link",type:"success",isOpen:!0,onClose:s,size:"custom",className:"max-w-[400px]",children:h}),e[99]=s,e[100]=h,e[101]=b):b=e[101],b};export{Ws as A};
//# sourceMappingURL=lvrypwdhnjlsz45f.js.map
