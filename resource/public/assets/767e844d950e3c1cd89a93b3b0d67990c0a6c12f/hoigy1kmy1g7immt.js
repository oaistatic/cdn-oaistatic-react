import{y as m,a9 as f,d as h,h as g,r as p,j as d,e as v}from"./mw35uwhq4g8r9eam.js";import{p as T,er as x,R as I,mv as C,T as u}from"./d0xa318sl7ywi0za.js";import{f as _}from"./g2euln7v5pbm31qa.js";const R=m(function(){const{conversationId:e,messageId:s}=f(),t=h(),o=T(),c=g();return p.useEffect(()=>{let a=!1;async function l(){if(!e||!s){t("/",{replace:!0});return}try{const i=await I.safePost("/conversation/new_branch",{requestBody:{conversation_id:e,message_id:s}});if(a)return;const{conversation:n}=i,r=C();_(r,n),u.updateThreadFromServer(r,n,{branchingFromConversationId:e,branchingFromMessageId:s,modelId:n.default_model_slug}),u.retainThread(r),t("/c/".concat(r),{replace:!0})}catch(i){if(a)return;o.danger(c.formatMessage(b.errorToast)),t("/c/".concat(e!=null?e:""))}}return l(),()=>{a=!0}},[e,s,t,o,c]),d.jsx("div",{className:"flex h-full items-center justify-center",children:d.jsx(x,{className:"text-token-text-tertiary"})})}),b=v({errorToast:{id:"BranchTurnActionButton.errorToast",defaultMessage:"Failed to branch conversation"}});export{R as default};
//# sourceMappingURL=hoigy1kmy1g7immt.js.map
