var fe=Object.freeze,he=Object.defineProperty,be=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var ge=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var pe=(t,e,s)=>e in t?he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,S=(t,e)=>{for(var s in e||(e={}))ve.call(e,s)&&pe(t,s,e[s]);if(ge)for(var s of ge(e))je.call(e,s)&&pe(t,s,e[s]);return t},re=(t,e)=>be(t,Te(e));var ae=(t,e)=>fe(he(t,"raw",{value:fe(e||t.slice())}));import{e as Ae,r as C,i as Ne,c as J,h as oe,j as n,M as H,d as Ee,a as Le,y as Me}from"./mw35uwhq4g8r9eam.js";import{T as Pe,l as ne,a as Re,u as Ie,K as Be}from"./k9l5jqa6xp2fzp9k.js";import{R as We,u as ye,O as Se,cB as ce,aA as le,cF as De,oH as Ke,e7 as Fe,dz as Ue,_ as $e,am as qe,pv as ze}from"./d0xa318sl7ywi0za.js";import{z as Ve}from"./g2euln7v5pbm31qa.js";import{S as Ge}from"./cfvbqrbqhscaxqmy.js";const x=Ae({optionalField:{id:"IJLQx/",defaultMessage:"(optional)"},teachersCreateWorkspacePageTitle:{id:"5ogaPW",defaultMessage:"Set up your ChatGPT for Teachers workspace"},workspaceNameLabel:{id:"BiwR3m",defaultMessage:"Workspace name"},workspaceNamePlaceholder:{id:"06SA34",defaultMessage:"Enter your workspace name"},purchaseStepTitle:{id:"ISfo48",defaultMessage:"Set up your ChatGPT for Teachers workspace"},purchaseStepSubtitle:{id:"/VsLeB",defaultMessage:"You can get started on your own or add your teaching team"},continueButton:{id:"fsy6oV",defaultMessage:"Continue"},agreeAndContinueButton:{id:"OnbV/Q",defaultMessage:"Agree and Continue"},dpaSummaryIntro:{id:"CpCFBV",defaultMessage:"Here's a short summary of the Teacher Access Terms -- please read the linked terms for full details."},dpaSummaryEducationPurpose:{id:"yPGn52",defaultMessage:"I'm using this account for school-related teaching work, and I understand it may later be managed by my School."},dpaSummaryNoTraining:{id:"Ed7W+Y",defaultMessage:"OpenAI won't train on content I submit here, including Student Data."},teacherAccessTermsLinkText:{id:"CEzYQ9",defaultMessage:"Teacher Access Terms"},studentDataPrivacyAgreementLinkText:{id:"5nS6GS",defaultMessage:"Student Data Privacy Agreement"},teacherAccessAgreementLabel:{id:"qoGgzA",defaultMessage:"I agree to our {teacherAccessTermsLink} and {studentDataPrivacyAgreementLink}."}}),Ye=t=>We.safePost("/accounts/create_workspace_without_subscription",{requestBody:t}),He=3;function Oe(){const t=ye(),e=!Se(t),[s,o]=C.useState(null),[r,a]=C.useState(!1),c=C.useRef(!0),u=Ne({mutationFn:()=>Pe.refreshEnrollmentStatus(),onSuccess:d=>{d.metadata&&o(d.metadata),a(!0)}}),[i,l]=C.useState(e?{name:"logged-out"}:{name:"loading"});return C.useEffect(()=>{!e&&c.current&&(c.current=!1,u.mutate())},[e,u]),C.useEffect(()=>{var d,h,z;if(!e&&r){if(s){const f=s.verification_status,g=(d=s.retry_count)!=null?d:0,L=(h=s.max_retry_attempts)!=null?h:He,p=(z=s.retry_limit_reached)!=null?z:g>=L;l(f==="verified"?{name:"verified"}:f==="error"?{name:"error",canRetry:!p,retryCount:g,maxRetryAttempts:L}:f==="linked"?{name:"linked"}:{name:"needs-verification",verificationId:s==null?void 0:s.verification_id});return}l({name:"needs-verification"})}},[e,r,s]),i}const Qe=t=>{"use forget";const e=J.c(10),{content:s,onPrevious:o,headerPaddingClassName:r}=t,a=r!=null?r:"pt-16 [@media(min-width:450px)]:pt-[12vh]";let c;e[0]!==a?(c=De("relative flex min-h-[100dvh] w-screen justify-center overflow-y-auto",a),e[0]=a,e[1]=c):c=e[1];let u;e[2]!==o?(u=o&&n.jsx("div",{className:"absolute start-4 top-4",children:n.jsx(le,{onClick:o,icon:Ge,color:"ghost"})}),e[2]=o,e[3]=u):u=e[3];let i;e[4]!==s?(i=n.jsx("div",{className:"flex max-w-full flex-none items-center justify-center [@media(min-width:450px)]:w-[520px]",children:s}),e[4]=s,e[5]=i):i=e[5];let l;return e[6]!==c||e[7]!==u||e[8]!==i?(l=n.jsxs("div",{className:c,children:[u,i]}),e[6]=c,e[7]=u,e[8]=i,e[9]=l):l=e[9],l},Xe=t=>{"use forget";const e=J.c(10),{title:s,subTitle:o,children:r}=t;let a;e[0]!==s?(a=n.jsx("div",{className:"text-3xl font-normal",children:s}),e[0]=s,e[1]=a):a=e[1];let c;e[2]!==o?(c=o&&n.jsx("div",{className:"text-token-text-secondary",children:o}),e[2]=o,e[3]=c):c=e[3];let u;e[4]!==a||e[5]!==c?(u=n.jsxs("div",{className:"flex flex-col gap-4 text-center",children:[a,c]}),e[4]=a,e[5]=c,e[6]=u):u=e[6];let i;return e[7]!==r||e[8]!==u?(i=n.jsxs("div",{className:"box-content flex w-full flex-col gap-6 px-4",children:[u,r]}),e[7]=r,e[8]=u,e[9]=i):i=e[9],i},Je=t=>{"use forget";const e=J.c(10),{onClick:s,disabled:o,labelMessage:r}=t,[a,c]=C.useState(!1),u=oe();let i;e[0]!==s?(i=async()=>{c(!0),await s(),c(!1)},e[0]=s,e[1]=i):i=e[1];let l;e[2]!==u||e[3]!==r?(l=u.formatMessage(r!=null?r:x.continueButton),e[2]=u,e[3]=r,e[4]=l):l=e[4];let d;return e[5]!==o||e[6]!==a||e[7]!==i||e[8]!==l?(d=n.jsx(le,{size:"large",loading:a,disabled:o,onClick:i,children:l}),e[5]=o,e[6]=a,e[7]=i,e[8]=l,e[9]=d):d=e[9],d};var xe;const Ze=ce.label(xe||(xe=ae(["font-medium"])));var ke;ce.div(ke||(ke=ae(["text-red-500 text-sm mb-2"])));var _e;const et=ce.input(_e||(_e=ae(["rounded-full border border-token-border-default bg-token-bg-primary placeholder:text-token-text-tertiary px-5 py-3 focus:border-token-icon-accent focus:ring-token-icon-accent focus:ring-0"]))),tt=t=>{"use forget";const e=J.c(5),{children:s,required:o}=t;let r;e[0]!==o?(r=!o&&n.jsxs("span",{className:"text-token-text-secondary text-xs",children:["Â ",n.jsx(H,S({},x.optionalField))]}),e[0]=o,e[1]=r):r=e[1];let a;return e[2]!==s||e[3]!==r?(a=n.jsxs(Ze,{children:[s,r]}),e[2]=s,e[3]=r,e[4]=a):a=e[4],a},st=t=>{"use forget";const e=J.c(52),{disableContinueButton:s,onNext:o,onCancel:r}=t,a=oe(),c=Ee(),u=x.purchaseStepTitle,i=x.purchaseStepSubtitle,[l,d]=C.useState(""),[h,z]=C.useState(!1);let f;e[0]!==l?(f=l.trim(),e[0]=l,e[1]=f):f=e[1];const g=f,L=h&&g.length>0&&!s;let p;e[2]!==h||e[3]!==g?(p={workspaceName:g,agreedToDPA:h},e[2]=h,e[3]=g,e[4]=p):p=e[4];const V=p;let M;e[5]===Symbol.for("react.memo_cache_sentinel")?(M=n.jsx("a",{href:"https://openai.com/policies/education-terms",className:"underline",target:"_blank",rel:"noreferrer",children:n.jsx(H,S({},x.teacherAccessTermsLinkText))}),e[5]=M):M=e[5];const Z=M;let $;e[6]===Symbol.for("react.memo_cache_sentinel")?($=n.jsx("a",{href:"https://openai.com/policies/student-data-privacy",className:"underline",target:"_blank",rel:"noreferrer",children:n.jsx(H,S({},x.studentDataPrivacyAgreementLinkText))}),e[6]=$):$=e[6];const ee=$;let P;e[7]===Symbol.for("react.memo_cache_sentinel")?(P=[{id:"education-purpose",message:x.dpaSummaryEducationPurpose},{id:"no-training",message:x.dpaSummaryNoTraining}],e[7]=P):P=e[7];const te=P;let w;e[8]!==a?(w=a.formatMessage(u),e[8]=a,e[9]=w):w=e[9];let m;e[10]!==a?(m=i&&a.formatMessage(i),e[10]=a,e[11]=m):m=e[11];let j;e[12]!==a?(j=a.formatMessage(x.workspaceNameLabel),e[12]=a,e[13]=j):j=e[13];let A;e[14]!==j?(A=n.jsx(tt,{required:!0,children:j}),e[14]=j,e[15]=A):A=e[15];let R;e[16]===Symbol.for("react.memo_cache_sentinel")?(R=O=>d(O.target.value),e[16]=R):R=e[16];let b;e[17]!==a?(b=a.formatMessage(x.workspaceNamePlaceholder),e[17]=a,e[18]=b):b=e[18];let I;e[19]!==b||e[20]!==l?(I=n.jsx(et,{id:"workspace-name",name:"workspace-name",value:l,onChange:R,placeholder:b}),e[19]=b,e[20]=l,e[21]=I):I=e[21];let T;e[22]!==I||e[23]!==A?(T=n.jsxs("div",{className:"flex flex-col gap-1.5",children:[A,I]}),e[22]=I,e[23]=A,e[24]=T):T=e[24];let B;e[25]===Symbol.for("react.memo_cache_sentinel")?(B=n.jsx("p",{className:"text-token-text-secondary",children:n.jsx(H,S({},x.dpaSummaryIntro))}),e[25]=B):B=e[25];let W;e[26]===Symbol.for("react.memo_cache_sentinel")?(W=n.jsxs("div",{className:"border-token-border-strong bg-token-main-surface-secondary rounded-2xl border px-4 py-4 text-sm",children:[B,n.jsx("ul",{className:"text-token-text-primary mt-3 list-disc space-y-2 ps-4",children:te.map(at)})]}),e[26]=W):W=e[26];let D;e[27]===Symbol.for("react.memo_cache_sentinel")?(D=O=>z(O.target.checked),e[27]=D):D=e[27];let K;e[28]===Symbol.for("react.memo_cache_sentinel")?(K=n.jsx(H,re(S({},x.teacherAccessAgreementLabel),{values:{teacherAccessTermsLink:Z,studentDataPrivacyAgreementLink:ee}})),e[28]=K):K=e[28];let N;e[29]!==h?(N=n.jsx("div",{className:"flex flex-col gap-1.5",children:n.jsx(Ve,{id:"dpa-agree",checked:h,onChange:D,containerClassName:"flex items-center gap-2",label:K})}),e[29]=h,e[30]=N):N=e[30];let v;e[31]!==T||e[32]!==N?(v=n.jsxs("div",{className:"flex flex-col gap-5",children:[T,W,N]}),e[31]=T,e[32]=N,e[33]=v):v=e[33];const G=!L;let k;e[34]!==o||e[35]!==V?(k=()=>o(S({},V)),e[34]=o,e[35]=V,e[36]=k):k=e[36];let _;e[37]!==G||e[38]!==k?(_=n.jsx(Je,{disabled:G,labelMessage:x.agreeAndContinueButton,onClick:k}),e[37]=G,e[38]=k,e[39]=_):_=e[39];let y;e[40]!==c||e[41]!==r?(y=()=>{r==null||r(),c("/")},e[40]=c,e[41]=r,e[42]=y):y=e[42];let F;e[43]===Symbol.for("react.memo_cache_sentinel")?(F=n.jsx(H,{id:"TjfExQ",defaultMessage:"Cancel"}),e[43]=F):F=e[43];let U;e[44]!==y?(U=n.jsx(le,{color:"ghost",onClick:y,children:F}),e[44]=y,e[45]=U):U=e[45];let Y;return e[46]!==v||e[47]!==_||e[48]!==U||e[49]!==w||e[50]!==m?(Y=n.jsx(Qe,{content:n.jsxs(Xe,{title:w,subTitle:m,children:[v,_,U]})}),e[46]=v,e[47]=_,e[48]=U,e[49]=w,e[50]=m,e[51]=Y):Y=e[51],Y};function at(t){return n.jsx("li",{children:n.jsx(H,S({},t.message))},t.id)}const E={impression:{segment:"K12 Create Workspace: Shown",statsig:"chatgpt_k12_create_workspace_shown"},continue:{segment:"K12 Create Workspace: Continue Clicked",statsig:"chatgpt_k12_create_workspace_continue_clicked"},cancel:{segment:"K12 Create Workspace: Cancel Clicked",statsig:"chatgpt_k12_create_workspace_cancel_clicked"},result:{segment:"K12 Create Workspace: Result",statsig:"chatgpt_k12_create_workspace_result"}},nt=()=>{"use forget";var U,Y,O,ie,ue;const t=J.c(45),e=oe(),s=ye(),o=Oe();let r;t[0]!==s?(r=Se(s),t[0]=s,t[1]=r):r=t[1];const a=r;let c;t[2]!==s?(c=Ke(s),t[2]=s,t[3]=c):c=t[3];const u=c,i=Fe(),l=Ue(),d=Le(),[h,z]=C.useState(!1),f=(O=(Y=i==null?void 0:i.planType)!=null?Y:(U=u==null?void 0:u.account)==null?void 0:U.planType)!=null?O:null,g=(ie=l==null?void 0:l.email_domain_type)!=null?ie:null;let L;t[4]!==d.search?(L=new URLSearchParams(d.search).get("referer"),t[4]=d.search,t[5]=L):L=t[5];const p=L,V="verificationId"in o&&(ue=o.verificationId)!=null?ue:null;let M;t[6]!==o.name||t[7]!==V?(M={enrollmentState:o.name,enrollmentVerificationId:V},t[6]=o.name,t[7]=V,t[8]=M):M=t[8];const Z=M,$=a?"logged_in":"logged_out",ee=a?f!=null?f:"unknown":null;let P;t[9]!==g||t[10]!==Z||t[11]!==a||t[12]!==$||t[13]!==ee?(P=S({isLoggedIn:a,loggedInStatus:$,accountPlanType:ee,emailDomainType:g},Z),t[9]=g,t[10]=Z,t[11]=a,t[12]=$,t[13]=ee,t[14]=P):P=t[14];const te=P;let w;t[15]!==te||t[16]!==p?(w=(se,q,Q)=>{$e.logEventWithStatsig(se,q,S(re(S({},te),{referer:p!=null?p:null}),Q))},t[15]=te,t[16]=p,t[17]=w):w=t[17];const m=w,j=a?"logged_in":"logged_out",A=p!=null?p:null;let R;t[18]!==g||t[19]!==f||t[20]!==A||t[21]!==j?(R={loggedInStatus:j,accountPlanType:f,emailDomainType:g,referer:A},t[18]=g,t[19]=f,t[20]=A,t[21]=j,t[22]=R):R=t[22];const b=R,I=C.useRef(!1),T=g!=null,B=o.name!=="loading";let W,D;t[23]!==b||t[24]!==T||t[25]!==B||t[26]!==a||t[27]!==m?(W=()=>{!a||!T||!B||I.current||(m(E.impression.segment,E.impression.statsig),ne("create_workspace","page_view",b),I.current=!0)},D=[b,T,B,a,m],t[23]=b,t[24]=T,t[25]=B,t[26]=a,t[27]=m,t[28]=W,t[29]=D):(W=t[28],D=t[29]),C.useEffect(W,D);let K;t[30]!==m?(K=async se=>{var me,de;z(!0);const q=(me=se.workspaceName)!=null?me:"",Q=(de=se.agreedToDPA)!=null?de:!1;m(E.continue.segment,E.continue.statsig,{workspaceNameLength:q.length,agreedToDpa:Q}),ne("create_workspace","continue_click",{workspaceNameLength:q.length,agreedToDpa:Q});try{await Ye({workspace_name:q,agreed_to_dpa:Q,plan_type:qe.K12}),m(E.result.segment,E.result.statsig,{status:"success",workspaceNameLength:q.length}),ne("create_workspace","continue_success",{workspaceNameLength:q.length}),await new Promise(rt),ze()}catch(Ce){const X=Ce,we=X instanceof Error?{errorName:X.name,errorMessage:X.message}:{errorName:typeof X,errorMessage:String(X)};m(E.result.segment,E.result.statsig,S({status:"error"},we)),z(!1),Re("create_workspace","continue_error",X,{workspaceNameLength:q.length,agreedToDpa:Q})}},t[30]=m,t[31]=K):K=t[31];const N=K;let v;t[32]!==m?(v=()=>{m(E.cancel.segment,E.cancel.statsig),ne("create_workspace","cancel_click")},t[32]=m,t[33]=v):v=t[33];const G=v;let k;t[34]!==e?(k=e.formatMessage(x.teachersCreateWorkspacePageTitle),t[34]=e,t[35]=k):k=t[35];let _;t[36]!==k?(_=n.jsx("title",{children:k}),t[36]=k,t[37]=_):_=t[37];let y;t[38]!==h||t[39]!==G||t[40]!==N?(y=n.jsx(st,{disableContinueButton:h,onNext:N,onCancel:G}),t[38]=h,t[39]=G,t[40]=N,t[41]=y):y=t[41];let F;return t[42]!==_||t[43]!==y?(F=n.jsxs(n.Fragment,{children:[_,y]}),t[42]=_,t[43]=y,t[44]=F):F=t[44],F};function rt(t){return setTimeout(t,3e3)}const dt="/k12-create-workspace",ft=Me(function(){return Ie("create_workspace")?n.jsx(Be,{}):n.jsx(nt,{})});export{dt as T,ft as k,Oe as u};
//# sourceMappingURL=lxq7le9r3df3l773.js.map
