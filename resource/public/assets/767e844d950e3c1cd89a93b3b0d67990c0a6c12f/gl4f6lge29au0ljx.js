var J=Object.freeze,se=Object.defineProperty,ve=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var te=(s,e,o)=>e in s?se(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,E=(s,e)=>{for(var o in e||(e={}))_e.call(e,o)&&te(s,o,e[o]);if(ee)for(var o of ee(e))Pe.call(e,o)&&te(s,o,e[o]);return s},oe=(s,e)=>ve(s,ye(e));var ae=(s,e)=>J(se(s,"raw",{value:J(e||s.slice())}));import{e as ge,h as fe,j as i,M as Z,c as pe}from"./mw35uwhq4g8r9eam.js";import{_ as q,mb as me,u as X,f7 as H,cw as je,cB as Ae,p as he,O as xe,bg as Fe,iy as be,ca as Ue,c5 as ke,c7 as Me,mh as Ee,r1 as Le,lc as Te,d as Ce,c6 as le,lh as De,r2 as Ie,r3 as Re,r4 as Ne,r5 as ze,r6 as Be,cc as Oe,r7 as Se,r8 as $e,df as ie,de as W}from"./d0xa318sl7ywi0za.js";import{go as re,gp as we,gq as He,gr as Ye,gs as ne,gt as Ge,gu as We,gv as Ze,gw as qe,gx as Xe,gy as Ke}from"./g2euln7v5pbm31qa.js";import{u as Qe}from"./iio0zgk2sqlxbcjy.js";function dt({clientThreadId:s,openFileDialog:e,icon:o,isDisabled:r=!1,isSmall:c=!1,showLabel:a=!1,showUpsell:d=!1,hideBorder:t=!1,highlightTooltip:n=!1,disabledReason:f,currentModelName:y,visualTreatment:x,showMenuForNoAuth:g,modelSupportsImages:l,open:p,setOpen:F}){const u=fe(),m=me(),j=X();r=(r||!!m)&&!d;const _=i.jsxs(we,{disabled:r,$showLabel:a,$hideBorder:t,$isSmall:c,$visualTreatment:x,onClick:b=>{if(b.preventDefault(),g||d){q.logNoAuthAttachButtonClicked({location:g?"No auth file upload":"No auth upsell"});return}e()},"aria-label":He(j,u,r,f,y),children:[o,a&&i.jsx(Ye,{})]}),h=i.jsx("div",{className:"flex",children:_});if(g||d){const b=g?i.jsx(Ge,{openFileDialog:e,showMenuForNoAuth:!0,modelSupportsImages:l,clientThreadId:s}):i.jsx(We,{location:"attach",statsig_login_event:"chatgpt_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_composer_upsell_signup_button_clicked"}),A=i.jsx(H.BasicTrigger,{asChild:!0,children:h});return i.jsxs(H.Root,{open:p,onOpenChange:F,children:[g?i.jsx(ne,{clientThreadId:s,rateLimitPopup:m,highlightTooltip:n,disabled:r,children:A}):i.jsx(je,{label:i.jsx(Z,{id:"wkpQmi",defaultMessage:"Upload files and more"}),side:"bottom",open:n||void 0,children:A}),i.jsx(H.Portal,{children:i.jsx(H.Content,{alignOffset:-8,side:"bottom",size:"small",className:"radix-side-bottom:flex-col-reverse flex flex-col",children:b})})]})}return i.jsx(ne,{disabled:r,clientThreadId:s,rateLimitPopup:m,highlightTooltip:n,children:h})}function Ve({code:s,message:e}){switch(s){case re.FileTooLarge:return ce.errorFileTooLarge;case re.TooManyFiles:return q.logEvent("Uploaded Max Files Error"),ce.errorTooManyFiles;default:return e}}const ce=ge({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Upload files and more"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."}}),de=ge({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function Je(s){if(!s.accept||Object.keys(s.accept).length===0)return[];const e=[];return Object.values(s.accept).forEach(o=>e.push(...o)),e.sort()}function ut(s){"use forget";var V;const e=pe.c(46),{className:o,children:r,clientThreadId:c,currentModelConfig:a,noKeyboard:d}=s,t=fe(),n=he(),f=X(),y=xe(f),x=Fe(f).flags,g=x==null?void 0:x.includes(be.NoAuthEnableFileUploads),l=Ze(c),p=Ue();let F;e[0]!==p||e[1]!==l||e[2]!==a?(F=ke(a,l,p),e[0]=p,e[1]=l,e[2]=a,e[3]=F):F=e[3];const u=F,m=u!==Me.None,j=Ee(et),_=Le(u),h=Math.max(0,_-j.length),b=h<=0,{getGizmoId:A}=Te();let N;e[4]!==c||e[5]!==f?(N=ze(f,c),e[4]=c,e[5]=f,e[6]=N):N=e[6];const z=Ce(N),L=Array.isArray(z)&&z.length>0;let U;e[7]!==l||e[8]!==a?(U=le(a,l),e[7]=l,e[8]=a,e[9]=U):U=e[9];let k;e[10]!==l||e[11]!==a?(k=(V=De(a,l))==null?void 0:V.attachments,e[10]=l,e[11]=a,e[12]=k):k=e[12];const{handleFileAccepted:T}=st(t,u,U,"drag",A,k,L?z:void 0),S=me(),{file_uploads:K,image_uploads:Q}=qe();let B;e:{if(Q==="allowed"&&K!=="allowed"){B=Be;break e}else if(Q==="blocked"&&K==="blocked"){let v;e[13]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[13]=v):v=e[13],B=v;break e}else if(!y&&g){let v;e[14]!==l||e[15]!==a?(v=le(a,l),e[14]=l,e[15]=a,e[16]=v):v=e[16],B=v;break e}let M;e[17]!==l||e[18]!==a?(M=Ie(a,l),e[17]=l,e[18]=a,e[19]=M):M=e[19],B=M}const C=Re(B),Y=!m||b||S!=null;let D;e[20]!==t||e[21]!==n||e[22]!==u?(D=M=>tt(M,t,n,u),e[20]=t,e[21]=n,e[22]=u,e[23]=D):D=e[23];let $;e[24]!==C||e[25]!==T||e[26]!==d||e[27]!==h||e[28]!==Y||e[29]!==D?($=E({maxFiles:h,disabled:Y,noClick:!0,noKeyboard:d,onDropAccepted:T,onDropRejected:D,multiple:!0,maxSize:Ne},C),e[24]=C,e[25]=T,e[26]=d,e[27]=h,e[28]=Y,e[29]=D,e[30]=$):$=e[30];const{getRootProps:O,isDragActive:G}=Qe($);let I,P,R;if(e[31]!==r||e[32]!==o||e[33]!==C||e[34]!==O||e[35]!==G){const M=Je(C);e[39]!==o||e[40]!==O?(P=O({className:o}),e[39]=o,e[40]=O,e[41]=P):P=e[41],R=r,I=G&&i.jsxs(ot,{children:[i.jsx(Xe,{}),i.jsx("h3",{children:i.jsx(Z,E({},de.dragInstructions))}),i.jsx("h4",{className:"w-2/3 text-center",children:M.length>0?M.join(", "):i.jsx(Z,E({},de.dragAllAccepted))})]}),e[31]=r,e[32]=o,e[33]=C,e[34]=O,e[35]=G,e[36]=I,e[37]=P,e[38]=R}else I=e[36],P=e[37],R=e[38];let w;return e[42]!==I||e[43]!==P||e[44]!==R?(w=i.jsxs("div",oe(E({},P),{children:[R,I]})),e[42]=I,e[43]=P,e[44]=R,e[45]=w):w=e[45],w}function et(s){return s.files}function tt(s,e,o,r){const{errors:c}=s[0],a=Se(r);c.forEach(d=>{const t=Ve(d);typeof t=="string"?o.danger(t,{hasCloseButton:!0,loggingTitle:"File upload error",loggingDescription:t,toastId:"file_upload_error"}):o.danger(e.formatMessage(t,{size:$e,maxNum:a}),{hasCloseButton:!0,loggingTitle:t.defaultMessage||"File upload error",loggingDescription:t.defaultMessage||"File upload error",toastId:"file_upload_error"})})}function st(s,e,o,r,c,a,d){"use forget";const t=pe.c(20),n=X(),f=Fe(n).flags,y=he(),x=Oe();let g;t[0]!==n?(g=xe(n),t[0]=n,t[1]=g):g=t[1];const l=!g,p=d!=null?d:void 0,F=f==null?void 0:f.includes(be.NoAuthEnableFileUploads);let u;t[2]!==n?(u=Ke(n,!0),t[2]=n,t[3]=u):u=t[3];const{persistFilesToLibrary:m,doubleWriteFilesToLibrary:j}=u;let _;t[4]!==a||t[5]!==p||t[6]!==c||t[7]!==s||t[8]!==j||t[9]!==m||t[10]!==l||t[11]!==o||t[12]!==F||t[13]!==x||t[14]!==y||t[15]!==r||t[16]!==e?(_=async(A,N)=>{q.logEvent("Upload File",{client:"web",eventSource:r,intent:e.toString()});const z=c!=null?await c():void 0;A.length>0&&A.forEach(L=>{const U=E(E({gizmoId:z},F&&{isUnauthenticated:l}),p&&p.length>0?{contextScopes:p}:{}),k=[x,ie(L),L,e,o,s,y,U,a];if(e===Me.Retrieval){let T=Promise.resolve(),S=Promise.resolve();m&&(S=W.uploadFile(x,"".concat(ie(L),":lib"),L,e,o,s,y,U,a,void 0,!0,!0)),(j||!m)&&(T=W.uploadFile(...k,void 0,!1,m)),Promise.all([T,S])}else W.uploadFile(...k)})},t[4]=a,t[5]=p,t[6]=c,t[7]=s,t[8]=j,t[9]=m,t[10]=l,t[11]=o,t[12]=F,t[13]=x,t[14]=y,t[15]=r,t[16]=e,t[17]=_):_=t[17];const h=_;let b;return t[18]!==h?(b={handleFileAccepted:h},t[18]=h,t[19]=b):b=t[19],b}var ue;const ot=Ae.div(ue||(ue=ae(['absolute z-50 inset-0 flex gap-2 flex-col justify-center items-center after:contents-[""] after:absolute after:opacity-80 after:z-[-1] after:bg-token-main-surface-primary after:inset-0'])));export{ot as D,ut as F,dt as P,Je as g,tt as h,st as u};
//# sourceMappingURL=gl4f6lge29au0ljx.js.map
