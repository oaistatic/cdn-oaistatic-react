import{c as ee,h as te,r as G,j as i}from"./mw35uwhq4g8r9eam.js";import{i as oe,P as se}from"./e5aqc9nw1k4ebw2k.js";import{d as re,kh as ie,qU as ne,dp as ae,aB as le}from"./d0xa318sl7ywi0za.js";import{u as me,P as A}from"./laaag2ef692jond3.js";import{eE as Y}from"./g2euln7v5pbm31qa.js";import{g as pe}from"./k18u5p03syimtxuo.js";import"./hdkg0cys1b7b4f0v.js";import"./l4v2i2dq9gwjak1q.js";import"./ia54sddtrl9qa2wj.js";import"./mraf0ji5wx0y0vgl.js";import"./fgu1j7e2q9emyzhc.js";import"./ouqfkhwho1d793yt.js";import"./f1b2o8cofuf894iu.js";import"./pbx1h703pubtj7lo.js";import"./c08xobknzytt16by.js";import"./iio0zgk2sqlxbcjy.js";import"./euzz83urne0h11ye.js";import"./e1t6unu3olubcgkg.js";import"./lcy2t692punsnn4q.js";import"./kcu1x1p0wojynl2j.js";import"./icplq4r4g4m9zwmv.js";import"./m2d85ixk2zz51mk9.js";import"./pdbvfcpzcg4ny695.js";import"./ki6jbruunap4y9wd.js";import"./k9kw5016oyk4ib9g.js";import"./lvrypwdhnjlsz45f.js";import"./gywigwwdbkbcgqzt.js";import"./la79eh1q1qxrfcxi.js";import"./i693kfbch8smq86y.js";import"./gy1lpvuoewmzh42c.js";import"./iknugp00locgtve5.js";import"./h1em0bjkpkjv8ykw.js";import"./kbj1b07s2z6vxqkg.js";import"./hu1bt0oauegdhua6.js";import"./oj9zwxa6l3kpv1x2.js";import"./h4yh1661qhhbu5v5.js";import"./bymjh2zr7tar40cn.js";import"./bzxitjpdx1z6hpbp.js";import"./nfv7adzg2a3x1oo5.js";import"./nte82mqftpddm52f.js";import"./3xa3aq3nbd1nd678.js";import"./jwvkjd19mng37ttq.js";import"./ffwmresmynw1bm5w.js";import"./dwcyf9zwrp4hlt30.js";import"./d0pdpvvqx24hob9r.js";import"./nc5snhuo5k648r43.js";import"./k527f0oyvlppyfoy.js";import"./nea9sowk1s9pzcpg.js";import"./ey0kaiz1v4k0znjj.js";import"./ht6uzt6gonugd1uu.js";import"./ivhsa3khymuxymxc.js";import"./egtdmf6pnrvsdet3.js";import"./iue4s7sqsxkz98qq.js";const ce=a=>{if(typeof a!="object"||a===null||typeof a.session_id!="string")return!1;const e=a.factor;return!(typeof e!="object"||e===null||typeof e.id!="string")};function ct(a){"use forget";const e=ee.c(63),{onClose:l,onOtpRequested:W,renderAsSheet:$}=a,t=te(),[s,X]=G.useState(""),[U,Q]=G.useState(null),[m,_]=G.useState(null),p=me(),Z=re(ie),J=!!$;let w;e[0]===Symbol.for("react.memo_cache_sentinel")?(w=ne(),e[0]=w):w=e[0];const K=w,n=J&&!K,R=J&&K;let B;e:{if(U){const o=Y[U];if(o!=null&&o.channels.has(A.WHATSAPP)){B=A.WHATSAPP;break e}}B=A.SMS}const r=B;let j;e[1]!==p||e[2]!==t||e[3]!==l||e[4]!==W||e[5]!==s||e[6]!==r?(j=async()=>{_(null),p.mutateAsync({factor:"sms",channel:r,phoneNumber:s}).then(o=>{if(!ce(o))throw new Error("Unsupported enrollment response shape");l(),W({phoneNumber:s.trim(),enrollmentSessionId:o.session_id,factorId:o.factor.id})}).catch(o=>{_(t.formatMessage(pe(o,!0)))})},e[1]=p,e[2]=t,e[3]=l,e[4]=W,e[5]=s,e[6]=r,e[7]=j):j=e[7];const c=j,I=!R,H=R?"bg-token-bg-primary":void 0,V=R?"top":void 0,D=n?Z?"fit":"fill":void 0,L=n?"large":void 0,q=n?"h-[max(100svh,100dvh,100%)]":void 0,z=n?"sm:border-token-border-light! max-sm:h-full max-sm:w-screen max-sm:max-w-none max-sm:rounded-none sm:w-[calc(100vw-2rem)] sm:max-w-[900px] sm:border":void 0;let d;e[8]!==t?(d=t.formatMessage({id:"qU7XHp",defaultMessage:"Enter your phone number"}),e[8]=t,e[9]=d):d=e[9];let f;e[10]!==d?(f=i.jsx("span",{className:"text-heading-3",children:d}),e[10]=d,e[11]=f):f=e[11];let u;e[12]!==p.isPending||e[13]!==s?(u=s.trim().length===0||p.isPending||!oe(s),e[12]=p.isPending,e[13]=s,e[14]=u):u=e[14];let h;e[15]!==t||e[16]!==r?(h=r===A.WHATSAPP?t.formatMessage({id:"6afAWV",defaultMessage:"Send code via WhatsApp"}):t.formatMessage({id:"G3KaG7",defaultMessage:"Send code"}),e[15]=t,e[16]=r,e[17]=h):h=e[17];let g;e[18]!==c||e[19]!==u||e[20]!==h?(g=i.jsx(ae.Button,{color:"primary",disabled:u,onClick:c,children:h}),e[18]=c,e[19]=u,e[20]=h,e[21]=g):g=e[21];let x;e[22]!==c?(x=o=>{o.preventDefault(),c()},e[22]=c,e[23]=x):x=e[23];let y;e[24]!==t?(y=t.formatMessage({id:"J1MnYd",defaultMessage:"We’ll send you a code to confirm it’s really you"}),e[24]=t,e[25]=y):y=e[25];let S;e[26]!==y?(S=i.jsx("p",{children:y}),e[26]=y,e[27]=S):S=e[27];let b;e[28]!==t?(b=t.formatMessage({id:"gn7CkF",defaultMessage:"Phone number"}),e[28]=t,e[29]=b):b=e[29];let P;e[30]!==m?(P=o=>{X(o),m&&_(null)},e[30]=m,e[31]=P):P=e[31];let E;e[32]===Symbol.for("react.memo_cache_sentinel")?(E=Object.keys(Y),e[32]=E):E=e[32];let k,O;e[33]===Symbol.for("react.memo_cache_sentinel")?(k=o=>Q(o),O={layout:"inline",showDialCodePrefix:!1,rounded:"lg",densePadding:!0,triggerShowOnlyDialCode:!0,fullWidthJustifyDialCode:!1,placeholderTextSize:"sm",dropdownPanelWidthPx:320},e[33]=k,e[34]=O):(k=e[33],O=e[34]);const F=m!=null?m:void 0;let M;e[35]!==s||e[36]!==b||e[37]!==P||e[38]!==F?(M=i.jsx(se,{label:b,value:s,setValue:P,countries:E,onCountryChange:k,appearance:O,error:F}),e[35]=s,e[36]=b,e[37]=P,e[38]=F,e[39]=M):M=e[39];let C;e[40]!==t||e[41]!==r?(C=r===A.WHATSAPP&&i.jsx("p",{className:"text-token-text-tertiary text-xs",children:t.formatMessage({id:"rynzKn",defaultMessage:"Based on your country code, only WhatsApp is available."})}),e[40]=t,e[41]=r,e[42]=C):C=e[42];let N;e[43]!==S||e[44]!==M||e[45]!==C?(N=i.jsxs("div",{className:"flex flex-col items-start gap-[12px] self-stretch",children:[S,M,C]}),e[43]=S,e[44]=M,e[45]=C,e[46]=N):N=e[46];let v;e[47]!==x||e[48]!==N?(v=i.jsx("form",{onSubmit:x,className:"text-token-text-primary self-stretch text-sm",children:N}),e[47]=x,e[48]=N,e[49]=v):v=e[49];let T;return e[50]!==l||e[51]!==z||e[52]!==f||e[53]!==g||e[54]!==v||e[55]!==I||e[56]!==H||e[57]!==V||e[58]!==D||e[59]!==L||e[60]!==q||e[61]!==n?(T=i.jsx(le,{testId:"modal-enter-phone-number",isOpen:!0,onClose:l,showOverlayBackground:I,overlayClassName:H,position:V,isBottomSheet:n,contentSize:D,topMargin:L,contentSheetViewClassName:q,className:z,type:"success",contentClassName:"!px-6 !pt-6 !pb-[24px]",headerClassName:"!px-6 !py-0 !h-[76px] !items-center",modalActionsClassName:"!mt-[24px]",showCloseButton:!0,hasSeparator:!0,title:f,primaryButton:g,children:v}),e[50]=l,e[51]=z,e[52]=f,e[53]=g,e[54]=v,e[55]=I,e[56]=H,e[57]=V,e[58]=D,e[59]=L,e[60]=q,e[61]=n,e[62]=T):T=e[62],T}export{ct as EnterPhoneNumberModal};
//# sourceMappingURL=ezgx1we334eabkyg.js.map
