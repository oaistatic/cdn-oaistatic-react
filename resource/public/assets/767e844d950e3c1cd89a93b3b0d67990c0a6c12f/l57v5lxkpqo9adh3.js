var xe=Object.defineProperty,ye=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var V=(n,e,r)=>e in n?xe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,c=(n,e)=>{for(var r in e||(e={}))we.call(e,r)&&V(n,r,e[r]);if(F)for(var r of F(e))Te.call(e,r)&&V(n,r,e[r]);return n},x=(n,e)=>ye(n,be(e));var Q=(n,e,r)=>V(n,typeof e!="symbol"?e+"":e,r);import{xZ as Ee,mE as oe,x_ as Ie,uQ as _e,x$ as Ae,gn as De,go as ve,uy as ie,ps as D,D as W,y0 as j,co as J,iZ as X,bk as Ce,fj as Se,y1 as Pe,a as Le}from"./d0xa318sl7ywi0za.js";import{w as q,c as h,I as ae,T as ue,t as Oe,a as Re,b as $e,L as v,P as G,s as le,l as O,e as de,d as pe,H as Be,R as He}from"./b9m0h1g72p9whl0h.js";import{N,S as C,M as S,E as Ue}from"./f76gy0b8ieo4s693.js";import{f5 as ce,v as Ke}from"./g2euln7v5pbm31qa.js";import{i as Ne,H as _,f as ze,a as Ve}from"./obs7vyhux2j83kng.js";import{r as je,a as We,b as qe,c as Ge}from"./iakh052vusklquwn.js";import{c as Ze}from"./bwg0lbtx0n9f11bn.js";import{t as Fe}from"./cv4afpu20gjb9dll.js";import{r as Qe}from"./kbj1b07s2z6vxqkg.js";import{r as Je}from"./oj9zwxa6l3kpv1x2.js";class Xe extends N{unistNodeName(){return"blockquote"}static proseMirrorNodeName(){return"blockquote"}proseMirrorNodeSpec(){return{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}}}proseMirrorInputRules(e){return[q(/^\s{0,3}>\s$/,e.nodes[this.proseMirrorNodeName()])]}proseMirrorKeymap(e){return{"Mod->":Ee(e.nodes[this.proseMirrorNodeName()])}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return h(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r}]}}const Ye=C.proseMirrorMarkName();function $(n,e){const r=[],t=[];for(const s of n.marks){if(s.type.name===Ye){r.push(s);continue}t.push(s)}return n.mark([...t,e,...r])}function er(n,e,r,t){for(let s=0;s<e.length;s++){const{$from:o,$to:i}=e[s];let a=o.depth===0?n.inlineContent&&n.type.allowsMarkType(r):!1;if(n.nodesBetween(o.pos,i.pos,(l,d)=>{if(a)return!1;a=l.inlineContent&&l.type.allowsMarkType(r)}),a)return!0}return!1}function Y(n){var r,t;const e=/^\s*/.exec(n);return(t=(r=e==null?void 0:e[0])==null?void 0:r.length)!=null?t:0}function ee(n){var r,t;const e=/\s*$/.exec(n);return(t=(r=e==null?void 0:e[0])==null?void 0:r.length)!=null?t:0}function rr(n,e,r){for(;e>0;){const t=e-1;if(!n.rangeHasMark(t,e,r))break;e=t}return e}function tr(n,e,r){for(;e<n.content.size&&n.rangeHasMark(e,e+1,r);)e+=1;return e}function sr(n,e,r,t=null){var l,d,u,p,f,g,b,w;const{selection:s}=n;if(!(s instanceof oe))return!1;const{empty:o,$cursor:i,ranges:a}=s;if(o&&!i||!er(n.doc,a,r))return!1;if(i)r.isInSet(n.storedMarks||i.marks())?e(n.tr.removeStoredMark(r)):e(n.tr.addStoredMark(r.create(t)));else{const I=n.tr,P=!a.some(k=>n.doc.rangeHasMark(k.$from.pos,k.$to.pos,r));for(let k=0;k<a.length;k++){const{$from:T,$to:E}=a[k];let m=T.pos,M=E.pos;const H=n.doc.textBetween(m,M,"\n");if(/^\s*$/.test(H))continue;const U=(d=(l=T.nodeBefore)==null?void 0:l.text)!=null?d:"",K=(p=(u=T.nodeAfter)==null?void 0:u.text)!=null?p:"",ge=(g=(f=E.nodeBefore)==null?void 0:f.text)!=null?g:"",ke=(w=(b=E.nodeAfter)==null?void 0:b.text)!=null?w:"";if(P){const L=Y(K),z=ee(ge);m+L<M&&(m+=L,M-=z),m=rr(n.doc,m,r),M=tr(n.doc,M,r),I.removeMark(m,M,n.schema.marks[C.proseMirrorMarkName()]),I.addMark(m,M,r.create(t))}else{const L=ee(U),z=Y(ke);m-=L,M+=z,I.removeMark(m,M,r)}}e(I.scrollIntoView())}return!0}function re(n,e=null){return(r,t)=>t?sr(r,t,n,e):!0}class y extends ae{constructor(r,t){super(r,(s,o,i,a)=>this.markHandler(s,o,i,a));Q(this,"markType");this.markType=t}static markApplies(r,t,s){for(const o of t){const{$from:i,$to:a}=o;let l=i.depth===0?r.type.allowsMarkType(s):!1;if(r.nodesBetween(i.pos,a.pos,d=>l?!1:(l=d.inlineContent&&d.type.allowsMarkType(s),!0)),l)return!0}return!1}markHandler(r,t,s,o){var p,f;if(!(r.selection instanceof oe))return null;const i=r.doc.resolve(s),a=r.doc.resolve(o),l=[new Ie(i,a)];if(!y.markApplies(r.doc,l,this.markType))return null;const d=(f=(p=r.doc.nodeAt(s))==null?void 0:p.marks.map(g=>g.type))!=null?f:[];d.push(this.markType);const u=r.tr.replaceWith(s,o,this.markType.schema.text(t[1]));for(const g of d)u.addMark(u.mapping.map(s),u.mapping.map(o),g.create(null));for(const g of d)u.removeStoredMark(g);return u.insertText(t[2])}}class nr extends S{unistNodeName(){return"strong"}static proseMirrorMarkName(){return"strong"}proseMirrorMarkSpec(){return{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM(){return["strong"]}}}proseMirrorInputRules(e){return[new y(/\*\*([^\s](?:.*[^\s])?)\*\*([\s\S])$/,e.marks[this.proseMirrorMarkName()]),new y(/__([^\s](?:.*[^\s])?)__([\s\S])$/,e.marks[this.proseMirrorMarkName()])]}proseMirrorKeymap(e){const r=e.marks[this.proseMirrorMarkName()];return{"Mod-b":re(r),"Mod-B":re(r)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return r.map(s=>$(s,e.marks[this.proseMirrorMarkName()].create(t)))}processConvertedUnistNode(e){return{type:this.unistNodeName(),children:[e]}}}const me=92,or=10,R="backslashEscape";function ir(n,e,r){function t(s){return s==null||s===or?(n.exit(R),e(s)):r(s)}return s=>s!==me?r(s):(n.enter(R),n.consume(s),t)}function ar(){return{text:{[me]:{name:R,tokenize:ir}}}}function ur(){var e,r;const n=this.data();(e=n.micromarkExtensions)!=null||(n.micromarkExtensions=[]),n.micromarkExtensions.push(ar()),(r=n.fromMarkdownExtensions)!=null||(n.fromMarkdownExtensions=[]),n.fromMarkdownExtensions.push({enter:{[R](t){this.enter({type:"break"},t),this.exit(t)}}})}class lr extends N{unistNodeName(){return"break"}static proseMirrorNodeName(){return"hard_break"}proseMirrorNodeSpec(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],marks:C.proseMirrorMarkName(),toDOM(){return["br"]}}}proseMirrorKeymap(e){const r=_e(Ae,(s,o)=>(o&&o(s.tr.replaceSelectionWith(e.nodes[this.proseMirrorNodeName()].create()).scrollIntoView()),!0)),t=De()||ve();return c({"Mod-Enter":r,"Shift-Enter":r},t&&{"Ctrl-Enter":r})}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return h(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(){return[{type:this.unistNodeName()}]}unifiedInitializationHook(e){return e.use(ur)}}const dr="code_block",te="```\n";function pr(n,e){var s;const{start:r,end:t}=n;return r==null||t==null?null:{start:r+te.length+((s=e.lang)!=null?s:"").length,end:t-te.length}}class cr extends N{dependencies(){return[new ue]}unistNodeName(){return"code"}static proseMirrorNodeName(){return dr}proseMirrorNodeSpec(){return{content:"text*",group:"block",code:!0,defining:!0,marks:[C.proseMirrorMarkName()].join(" "),attrs:{lang:{default:null},isDarkMode:{default:null}},parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}}}proseMirrorInputRules(e){return[Oe(/^\s{0,3}```$/,e.nodes[this.proseMirrorNodeName()])]}unistNodeToProseMirrorNodes({node:e,attrs:r,schema:t}){var o;const{lang:s}=e;return h(this.proseMirrorNodeName(),t,ie(e,t,c(c({},r),(o=pr(r,e))!=null?o:{})),c({lang:s},r))}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),value:r.map(t=>t.type==="startend"?t.children.map(s=>s.value).join(""):t.value).join(""),lang:e.attrs.lang}]}}class Nr extends N{unistNodeName(){return"textDirective"}customDirectiveName(){return D}static proseMirrorNodeName(){return D}proseMirrorNodeSpec(){return{group:"inline",inline:!0,content:"inline*",atom:!0,attrs:{index:{default:null},displayLayout:{default:"inline"}},toDOM:e=>["span",{"data-type":"content-reference","data-content-reference-index":e.attrs.index,"data-display-layout":e.attrs.displayLayout},":contentReference[oaicite:".concat(e.attrs.index,']{index="').concat(e.attrs.index,'" displayLayout="').concat(e.attrs.displayLayout,'"}')],parseDOM:[{tag:'span[data-type="content-reference"]',getAttrs(e){return{index:e.getAttribute("data-index"),displayLayout:e.getAttribute("data-display-layout")||"inline"}}}]}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t}){var o,i,a;if(!ce(e)||e.name!==D||e.type!==this.unistNodeName())return W.addError("ContentReferenceExtension: unistNodeToProseMirrorNodes: node is not a directive node or name is not contentReference",e),null;const s={index:(o=e.attributes)==null?void 0:o.index,displayLayout:(a=(i=e.attributes)==null?void 0:i.displayLayout)!=null?a:"inline"};return r.nodes.contentReference.create(s,t)}proseMirrorNodeToUnistNodes(e,r){if(r.length!==1)return console.warn("ContentReferenceExtension: proseMirrorNodeToUnistNodes: convertedChildren.length != 1",r),[];const o=[{type:"text",value:r[0].children[0].value}];return[{type:"textDirective",name:D,attributes:{index:e.attrs.index,displayLayout:e.attrs.displayLayout},children:o,data:{hName:D,hProperties:{displayLayout:e.attrs.displayLayout,index:e.attrs.index}}}]}}class mr extends N{unistNodeName(){return"thematicBreak"}static proseMirrorNodeName(){return"horizontal_rule"}proseMirrorNodeSpec(){return{group:"block",selectable:!1,parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}}}proseMirrorInputRules(e){return[new ae(/^\s{0,3}(?:\*\*\*|---|___)\n$/,(r,t,s,o)=>{var i;return r.tr.replaceWith(s,o,(i=h(this.proseMirrorNodeName(),e,[]))!=null?i:[])})]}proseMirrorKeymap(e){return{"Mod-_":(r,t)=>(t&&t(r.tr.replaceSelectionWith(e.nodes[this.proseMirrorNodeName()].create()).scrollIntoView()),!0)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return h(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(){return[{type:this.unistNodeName()}]}}class Mr extends S{unistNodeName(){return"inlineCode"}static proseMirrorMarkName(){return"code"}proseMirrorMarkSpec(){return{inclusive:!1,parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}proseMirrorInputRules(e){return[new y(/`([^\s](?:.*[^\s])?)`([\s\S])$/,e.marks[this.proseMirrorMarkName()])]}proseMirrorKeymap(e){const r=e.marks[this.proseMirrorMarkName()];return{"Ctrl-`":j(r)}}unistNodeToProseMirrorNodes({node:e,schema:r,attrs:t}){const s=ie(e,r,t,[r.marks[this.proseMirrorMarkName()].create(t)]);return s?[s]:[]}processConvertedUnistNode(e){return{type:this.unistNodeName(),value:e.value}}}class hr extends N{unistNodeName(){return"inlineMath"}static proseMirrorNodeName(){return"inline_math"}proseMirrorNodeSpec(){return{group:"inline",inline:!0,content:"text*",atom:!0,attrs:{latex:{default:null}},parseDOM:[{tag:"span.inline-math",getAttrs(e){return{latex:e.getAttribute("latex")}}}],toDOM(){return["span",{class:"inline-math"},0]}}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:s}){const{value:o}=e;return h(this.proseMirrorNodeName(),r,t,x(c({},s),{latex:o}))}proseMirrorNodeToUnistNodes(e){return[{type:this.unistNodeName(),value:e.attrs.latex}]}}class fr extends S{unistNodeName(){return"emphasis"}static proseMirrorMarkName(){return"em"}proseMirrorMarkSpec(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"&&null}],toDOM(){return["em"]}}}proseMirrorInputRules(e){try{return[new y(new RegExp("(?<!\\*)\\*([^\\s*](?:.*[^\\s])?)\\*([^*])$"),e.marks[this.proseMirrorMarkName()]),new y(new RegExp("(?<!_)_([^\\s_](?:.*[^\\s])?)_([^_])$"),e.marks[this.proseMirrorMarkName()])]}catch(r){return W.addError(r),[]}}proseMirrorKeymap(e){const r=e.marks[this.proseMirrorMarkName()];return{"Mod-i":j(r),"Mod-I":j(r)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return r.map(s=>$(s,e.marks[this.proseMirrorMarkName()].create(t)))}processConvertedUnistNode(e){return{type:this.unistNodeName(),children:[e]}}}const A="lineEndingBlank";function se(n){return n.type===A}const gr=({startIndex:n,endIndex:e,depth:r,isLastChild:t,parent:s=null})=>{const o=e-n;return r>0&&(s==null?void 0:s.type)!=="list"?o:t||n===0?o-Math.floor((o+1)/2):o-Math.floor((o-1)/2)};function kr(){var r;const n=this.data();(r=n.fromMarkdownExtensions)!=null||(n.fromMarkdownExtensions=[]),n.fromMarkdownExtensions.push({enter:{lineEndingBlank(t){this.enter({type:A},t)}},exit:{lineEndingBlank(t){this.exit(t)}}});const e=(t,s=0)=>{if(!Ne(t))return;const{children:o}=t;let i=0,a=null,l=null;const d=o.length;for(let u=0;u<d;u++){const p=o[u-i];e(p,s+1);const{type:f}=p,b=u===d-1&&f===A;if(f===A&&a==null?a=u:f!==A&&a!=null?l=u:b&&a!=null&&(l=u+1),a!=null&&l!=null){const w=gr({startIndex:a,endIndex:l,depth:s,isLastChild:b,parent:t});o.splice(a-i,w),a=null,l=null,i+=w}}};return t=>{e(t)}}class xr extends N{unistNodeName(){return A}static proseMirrorNodeName(){return"paragraph"}proseMirrorNodeSpec(){return Re}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return h(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:$e,children:r}]}unifiedInitializationHook(e){return e.use(kr)}}class yr extends S{unistNodeName(){return"link"}static proseMirrorMarkName(){return"link"}proseMirrorMarkSpec(){return{attrs:{href:{},title:{default:null},disabled:{default:!0}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM(e){return["a",c(c({},e.attrs),e.attrs.disabled?{href:void 0}:{})]}}}unistNodeToProseMirrorNodes({node:e,convertedChildren:r,schema:t}){const{url:s,title:o}=e;return r.map(i=>$(i,t.marks[this.proseMirrorMarkName()].create({href:s,title:o})))}processConvertedUnistNode(e,r){return x(c({type:this.unistNodeName(),url:r.attrs.href},r.attrs.title!=null&&{title:r.attrs.title}),{children:[e]})}}class br extends N{unistNodeName(){return"math"}static proseMirrorNodeName(){return"math_block"}proseMirrorNodeSpec(){return{group:"block",content:"text*",atom:!0,code:!0,attrs:{latex:{default:null}},parseDOM:[{tag:"div.math-block",getAttrs(e){return{latex:e.getAttribute("latex")}}}],toDOM(){return["div",{class:"math-block"},0]}}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:s}){const{value:o}=e;return h(this.proseMirrorNodeName(),r,t,x(c({},s),{latex:o}))}proseMirrorNodeToUnistNodes(e){return[{type:this.unistNodeName(),value:e.attrs.latex}]}}class B extends N{static unorderedListCommand(e){return(r,t)=>{const s=e.nodes[this.proseMirrorNodeName()],o=e.nodes.ordered_list,i=e.nodes[v.proseMirrorNodeName()],a=e.nodes[G.proseMirrorNodeName()];if(!s)return!1;let l=r;const d=()=>l,u=p=>{l=l.apply(p),t&&t(p)};return le(d(),[s])?O(d,u,i,[o,s]):!O(d,u,i,[o])||!de(d,u,a)?!1:pe(s)(d(),u)}}dependencies(){return[new v]}unistNodeName(){return"list"}unistToProseMirrorTest(e){return e.type===this.unistNodeName()&&e.ordered!==!0}static proseMirrorNodeName(){return"list"}proseMirrorNodeSpec(){return{content:"list_item+",group:"block",attrs:{spread:{default:!1}},parseDOM:[{getAttrs(e){return{spread:e.getAttribute("data-spread")==="true"}},tag:"ul"}],toDOM(e){return["ul",{"data-spread":e.attrs.spread},0]}}}proseMirrorInputRules(e){return[q(/^\s{0,3}([-+*])\s$/,e.nodes[this.proseMirrorNodeName()])]}proseMirrorKeymap(e){const r=B.unorderedListCommand(e);return{"Shift-Mod-8":r,"Alt-Mod-5":r}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:s}){const{spread:o}=e;return h(this.proseMirrorNodeName(),r,t,x(c({},s),{spread:o}))}proseMirrorNodeToUnistNodes(e,r){const t=e.attrs.spread;return[{type:this.unistNodeName(),ordered:!1,spread:t,children:r.map(s=>(s.spread=t,s))}]}}class Z extends N{static orderedListCommand(e){return(r,t)=>{const s=e.nodes[this.proseMirrorNodeName()],o=e.nodes[B.proseMirrorNodeName()],i=e.nodes[v.proseMirrorNodeName()],a=e.nodes[G.proseMirrorNodeName()];if(!s)return!1;let l=r;const d=()=>l,u=p=>{l=l.apply(p),t&&t(p)};return le(d(),[s])?O(d,u,i,[s,o]):!O(d,u,i,[o])||!de(d,u,a)?!1:pe(s)(d(),u)}}dependencies(){return[new v]}unistNodeName(){return"list"}unistToProseMirrorTest(e){return e.type===this.unistNodeName()&&e.ordered===!0}static proseMirrorNodeName(){return"ordered_list"}proseMirrorNodeSpec(){return{content:"list_item+",group:"block",attrs:{spread:{default:!1},startingNumber:{default:1}},parseDOM:[{getAttrs(e){const r=e.getAttribute("start");return{spread:e.getAttribute("data-spread")==="true",startingNumber:r!=null?parseInt(r):1}},tag:"ol"}],toDOM(e){return["ol",{"data-spread":e.attrs.spread,start:e.attrs.startingNumber},0]}}}proseMirrorInputRules(e){return[q(/^\s{0,3}(\d+)\.\s$/,e.nodes[this.proseMirrorNodeName()],r=>({startingNumber:+r[1]}),(r,t)=>t.childCount+t.attrs.startingNumber===+r[1])]}proseMirrorKeymap(e){const r=Z.orderedListCommand(e);return{"Shift-Mod-9":r,"Alt-Mod-4":r}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:s}){const{spread:o,start:i}=e;return h(this.proseMirrorNodeName(),r,t,x(c({},s),{spread:o,startingNumber:i!=null?i:1}))}proseMirrorNodeToUnistNodes(e,r){const t=e.attrs.spread;return[{type:this.unistNodeName(),ordered:!0,spread:t,start:e.attrs.startingNumber,children:r.map(s=>(s.spread=t,s))}]}}class wr extends S{unistNodeName(){return"delete"}static proseMirrorMarkName(){return"strikethrough"}proseMirrorMarkSpec(){return{parseDOM:[{tag:"s"},{tag:"del"},{style:"text-decoration",getAttrs:e=>/(^|[\s])line-through([\s]|$)/.test(e)&&null}],toDOM(){return["s"]}}}proseMirrorInputRules(e){return[new y(/~([^\s](?:.*[^\s~])?)~([^~])$/,e.marks[this.proseMirrorMarkName()]),new y(/~~([^\s](?:.*[^\s])?)~~([\s\S])$/,e.marks[this.proseMirrorMarkName()])]}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r}){return r.map(t=>$(t,e.marks[this.proseMirrorMarkName()].create()))}processConvertedUnistNode(e){return{type:this.unistNodeName(),children:[e]}}}function Tr(){return n=>{let e=-1;function r(s,o){var i;if(s.type==="tableRow"&&e++,s.type==="tableCell"){const a=s;a.data=x(c({},(i=a.data)!=null?i:{}),{rowIndex:e,columnIndex:o})}}function t(s){if(Ne(s))for(let o=0;o<s.children.length;o++){const i=s.children[o];r(i,o),t(i)}}t(n)}}class Me extends N{unistNodeName(){return"tableCell"}unistToProseMirrorTest(e){return e.type===this.unistNodeName()}static proseMirrorNodeName(){return"table_cell"}proseMirrorNodeSpec(){return{content:"inline*",attrs:{rowIndex:{default:null},columnIndex:{default:null},colspan:{default:1},rowspan:{default:1}},tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs(e){const r=e;return{colspan:X(r.getAttribute("colspan"),1),rowspan:X(r.getAttribute("rowspan"),1)}}}],toDOM(e){const{colspan:r,rowspan:t}=e.attrs,s={colspan:r!==1?J(r,void 0):void 0,rowspan:t!==1?J(t,void 0):void 0};return[e.attrs.rowIndex==null||e.attrs.rowIndex>0?"td":"th",s,0]}}}proseMirrorInputRules(e){return[]}proseMirrorKeymap(e){return{}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:s}){var o,i;return h(this.proseMirrorNodeName(),r,t,x(c({},s),{colspan:1,rowspan:1,rowIndex:(o=e.data)==null?void 0:o.rowIndex,columnIndex:(i=e.data)==null?void 0:i.columnIndex}))}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r,data:{rowIndex:e.attrs.rowIndex,columnIndex:e.attrs.columnIndex}}]}}class he extends N{dependencies(){return[new Me]}unistNodeName(){return"tableRow"}static proseMirrorNodeName(){return"table_row"}proseMirrorNodeSpec(){return{content:"(table_cell+)",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}}}proseMirrorInputRules(e){return[]}proseMirrorKeymap(e){return{}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return h(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r}]}}class Er extends N{dependencies(){return[new he]}unistNodeName(){return"table"}static proseMirrorNodeName(){return"table"}proseMirrorNodeSpec(){return{content:"(table_row+)",tableRole:"table",isolating:!0,group:"block",parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}}}proseMirrorInputRules(e){return[]}proseMirrorKeymap(e){return{}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return h(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),align:[],children:r}]}unifiedInitializationHook(e){return e.use(Tr)}}function ne(n,e){if(!(n==null||e==null))return{start:c({},n),end:c({},e)}}const Ir=()=>n=>{Ke(n,"list",(e,r,t)=>{var a,l,d,u,p,f,g,b,w,I,P,k;if(t==null||r==null)return;const s=[];let o=[],i=0;for(;i<e.children.length;){const T=e.children[i];if(se(T)){const E=[];for(;i<e.children.length&&se(e.children[i]);)E.push(e.children[i]),i++;if(o.length===0)throw new Error("Unexpected state: currentListItems is empty after encountering blank lines.");const m=o[0],M=Ce(Se(o)),H=ne((d=(a=m.position)==null?void 0:a.start)!=null?d:(l=e.position)==null?void 0:l.start,(f=(u=M.position)==null?void 0:u.end)!=null?f:(p=e.position)==null?void 0:p.end),U={type:"list",ordered:e.ordered,start:e.start,spread:e.spread,children:o,position:H};s.push(U),o=[],s.push(...E.map(K=>({type:"lineEndingBlank",position:K.position})))}else o.push(T),i++}if(o.length>0){const T=o[0],E=o[o.length-1],m=ne((w=(g=T.position)==null?void 0:g.start)!=null?w:(b=e.position)==null?void 0:b.start,(k=(I=E.position)==null?void 0:I.end)!=null?k:(P=e.position)==null?void 0:P.end),M={type:"list",ordered:e.ordered,start:e.start,spread:e.spread,children:o,position:m};s.push(M)}t.children.splice(r,1,...s)})};class _r extends N{unistNodeName(){return"textDirective"}customDirectiveName(){return _}static proseMirrorNodeName(){return _}proseMirrorNodeSpec(){return{group:"inline",inline:!0,atom:!0,selectable:!1,attrs:{timestamp:{default:null}},toDOM:e=>["span",{"data-type":"hive-log","data-timestamp":e.attrs.timestamp}],parseDOM:[{tag:'span[data-type="hive-log"]',getAttrs(e){return{timestamp:e.getAttribute("data-timestamp")}}}]}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t}){var o,i;if(!ce(e)||e.name!==_||e.type!==this.unistNodeName())return W.addError("HiveLogExtension: unistNodeToProseMirrorNodes: node is not a directive node or name is not HIVE_LOG_DIRECTIVE_NAME",e),null;const s={timestamp:(i=(o=e.attributes)==null?void 0:o.timestamp)!=null?i:null};return r.nodes[_].create(s,t)}proseMirrorNodeToUnistNodes(e){return[{type:"textDirective",name:_,attributes:{timestamp:e.attrs.timestamp},children:[],data:{hName:_,hProperties:{timestamp:e.attrs.timestamp}}}]}}const Ar=(n,e,r,t)=>n.children.map(s=>r.handle(s,void 0,r,t)).join(""),Dr=(n,e,r,t)=>r.safe(n.value,t).replaceAll("\\[","[").replaceAll("\\&","&"),vr=n=>"\\(".concat(n.value,"\\)");function Cr(){const n=this;n.compiler=e;function e(r){return Fe(r,x(c({},n.data("settings")),{fences:!0,bullet:"-",bulletOther:"*",listItemIndent:"one",resourceLink:!0,tightDefinitions:!0,rule:"-",handlers:{text:Dr,startend:Ar,inlineMath:vr},extensions:n.data("toMarkdownExtensions")||[]}))}}const fe=[Qe,[Je,{singleTilde:!1}],[je,{singleDollarTextMath:!1}],We,qe,Ge,ze,Ir,Cr,Ve];class Sr extends Ue{dependencies(){const e=Pe(Le());return[new xr,new G,new Xe,new nr,new lr,new cr,new Be,new mr,new Mr,new hr,new br,new fr,new yr,new v,new Z,new He,new ue,new B,new wr,new C,new Er,new he,new Me,...e?[new Nr]:[],...Ze()?[new _r]:[]]}unifiedInitializationHook(e){return e.use(fe)}}const jr=Object.freeze(Object.defineProperty({__proto__:null,CANVAS_REMARK_PLUGINS:fe,MarkdownExtension:Sr},Symbol.toStringTag,{value:"Module"}));export{nr as B,Nr as C,mr as H,fr as I,yr as L,Sr as M,Z as O,wr as S,Er as T,B as U,dr as a,cr as b,xr as c,Xe as d,lr as e,Mr as f,he as g,Me as h,Cr as i,jr as p,Ir as s,sr as t};
//# sourceMappingURL=l57v5lxkpqo9adh3.js.map
