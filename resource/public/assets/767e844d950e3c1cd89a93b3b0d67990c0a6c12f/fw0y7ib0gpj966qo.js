const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/muf27jh2zmg4qun9.js","assets/mw35uwhq4g8r9eam.js","assets/d0xa318sl7ywi0za.js","assets/root-kavs8piy.css"])))=>i.map(i=>d[i]);
var ge=Object.freeze,ye=Object.defineProperty,Te=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var be=(o,e,n)=>e in o?ye(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,h=(o,e)=>{for(var n in e||(e={}))ve.call(e,n)&&be(o,n,e[n]);if(le)for(var n of le(e))Se.call(e,n)&&be(o,n,e[n]);return o},Z=(o,e)=>Te(o,Re(e));var re=(o,e)=>{var n={};for(var s in o)ve.call(o,s)&&e.indexOf(s)<0&&(n[s]=o[s]);if(o!=null&&le)for(var s of le(o))e.indexOf(s)<0&&Se.call(o,s)&&(n[s]=o[s]);return n};var Me=(o,e)=>ge(ye(o,"raw",{value:ge(e||o.slice())}));import{c as ce,h as de,j as t,r as P,M as y,L as Le,u as Be,e as $e,d as Ie,_ as Ge}from"./mw35uwhq4g8r9eam.js";import{aA as ee,d as K,fB as te,bP as L,dp as Pe,f7 as I,G as F,eA as He,u as xe,fd as qe,cF as pe,h2 as Ve,aD as fe,_ as De,hq as Ee,hr as Ke,H as We,fC as Je,e4 as Ue,qx as Qe,jh as Xe,al as Ze,qp as Ye,ht as ze,gU as et,U as ne,aB as tt,cw as st,h3 as ot,bq as nt,gh as at,be as lt,cB as rt,tH as it,fg as ct,tI as Ne}from"./d0xa318sl7ywi0za.js";import{aM as dt,p1 as ut,p2 as mt,n6 as ft,bI as xt,bD as pt,eC as jt,p3 as ht}from"./g2euln7v5pbm31qa.js";import{S as gt}from"./or2c1ty5tgulfeci.js";import{P as Ae,a as Fe}from"./li475lsknqa5ome3.js";import{S as bt}from"./cso97771s1xclnnu.js";import"./ht6uzt6gonugd1uu.js";import"./gl4f6lge29au0ljx.js";import"./iio0zgk2sqlxbcjy.js";import"./m89x2zftpo6hrypr.js";function yt(o){"use forget";const e=ce.c(15),n=de(),{preset:s,onSelectPreset:l}=o;let f;e[0]!==l||e[1]!==s?(f=()=>l(s),e[0]=l,e[1]=s,e[2]=f):f=e[2];let i;e[3]!==s.color||e[4]!==s.emoji?(i=t.jsx(dt,{color:s.color,emoji:s.emoji}),e[3]=s.color,e[4]=s.emoji,e[5]=i):i=e[5];let a;e[6]!==n||e[7]!==s.label?(a=n.formatMessage(s.label),e[6]=n,e[7]=s.label,e[8]=a):a=e[8];let c;e[9]!==i||e[10]!==a?(c=t.jsxs("div",{className:"flex gap-1.5",children:[i,a]}),e[9]=i,e[10]=a,e[11]=c):c=e[11];let u;return e[12]!==f||e[13]!==c?(u=t.jsx(ee,{color:"secondary",className:"border-token-border-default hover:bg-token-interactive-bg-secondary-hover active:bg-token-interactive-bg-secondary-press flex items-center justify-center py-2 ps-2.5 pe-3 font-normal select-none",onFocus:vt,onClick:f,type:"button",children:c}),e[12]=f,e[13]=c,e[14]=u):u=e[14],u}function vt(o){o.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}function St(o){"use forget";const e=ce.c(65),{isNewProject:n,isPending:s,onSubmit:l,submitTitle:f,planType:i}=o,a=de();let c;e[0]!==o.emoji$||e[1]!==o.theme$||e[2]!==o.title$||e[3]!==o.validationErrors$?(c=()=>{var x,Q,Y,z;return{title$:(x=o.title$)!=null?x:L(""),validationErrors$:(Q=o.validationErrors$)!=null?Q:L([]),theme$:(Y=o.theme$)!=null?Y:L(null),emoji$:(z=o.emoji$)!=null?z:L(null),stylePickerOpen$:L(!1),autofilledFromPreset$:L(!1)}},e[0]=o.emoji$,e[1]=o.theme$,e[2]=o.title$,e[3]=o.validationErrors$,e[4]=c):c=e[4];const[u]=P.useState(c),{title$:d,validationErrors$:N,theme$:m,emoji$:j,autofilledFromPreset$:C}=u,g=K(d),w=K(N),k=P.useRef(null),D=K(C);let T;e[5]===Symbol.for("react.memo_cache_sentinel")?(T=[],e[5]=T):T=e[5],P.useEffect(Pt,T);let v;e[6]!==C||e[7]!==j||e[8]!==m||e[9]!==d?(v=x=>{const{color:Q,emoji:Y,title:z}=x;m.set(Q),j.set(Y),d.set(z),C.set(!0)},e[6]=C,e[7]=j,e[8]=m,e[9]=d,e[10]=v):v=e[10];const S=v;let b;e[11]!==a?(b=a.formatMessage({id:"A4Fd7M",defaultMessage:"Copenhagen Trip"}),e[11]=a,e[12]=b):b=e[12];let M;e[13]!==d?(M=x=>d.set(x.target.value),e[13]=d,e[14]=M):M=e[14];let O;e[15]!==b||e[16]!==M||e[17]!==g?(O=t.jsx("input",{autoFocus:!0,ref:k,className:"border-token-interactive-border-tertiary-default focus:border-token-interactive-border-focus bg-token-bg-primary col-span-full row-1 w-full resize-none overflow-y-auto rounded-lg border px-2 py-2 ps-9 pe-9 text-sm focus:ring-0",type:"text",name:"projectName",autoComplete:"off",placeholder:b,value:g,onChange:M}),e[15]=b,e[16]=M,e[17]=g,e[18]=O):O=e[18];const $=n?"var(--text-tertiary)":void 0;let E;e[19]!==j||e[20]!==$||e[21]!==m?(E=t.jsx(Ae,{emoji$:j,theme$:m,defaultColor:$}),e[19]=j,e[20]=$,e[21]=m,e[22]=E):E=e[22];let G;e[23]!==j||e[24]!==E||e[25]!==m?(G=t.jsx(Fe,{theme$:m,emoji$:j,children:E}),e[23]=j,e[24]=E,e[25]=m,e[26]=G):G=e[26];let H;e[27]!==D||e[28]!==C||e[29]!==j||e[30]!==a||e[31]!==n||e[32]!==m||e[33]!==g||e[34]!==d?(H=n&&D&&g.trim().length>0&&t.jsx("button",{type:"button","aria-label":a.formatMessage({id:"z/7Lq7",defaultMessage:"Clear project name"}),className:"col-span-full row-1 me-2 self-center justify-self-end rounded-full p-1 hover:opacity-80 focus:outline-hidden",onClick:()=>{var x;d.set(""),j.set(null),m.set(null),C.set(!1),(x=k.current)==null||x.focus()},children:t.jsx(gt,{className:"icon text-token-text-tertiary"})}),e[27]=D,e[28]=C,e[29]=j,e[30]=a,e[31]=n,e[32]=m,e[33]=g,e[34]=d,e[35]=H):H=e[35];let W;e[36]!==H||e[37]!==O||e[38]!==G?(W=t.jsxs("div",{className:"content-sheet-root:contents mb-2 grid grid-cols-[auto_minmax(0,1fr)]",children:[O,G,H]}),e[36]=H,e[37]=O,e[38]=G,e[39]=W):W=e[39];let J;e[40]!==a||e[41]!==n||e[42]!==S||e[43]!==i?(J=n&&t.jsx("ul",{className:"focus-outline-margin-default -ms-4 flex w-[calc(100%+32px)] gap-2 overflow-x-auto ps-4 pe-4 [scrollbar-width:none]","aria-label":a.formatMessage({id:"mStfWq",defaultMessage:"Project presets"}),children:ut(i).map(x=>t.jsx("li",{children:t.jsx(yt,{preset:x,onSelectPreset:Q=>{S(Z(h({},Q),{title:a.formatMessage(Q.label)}))}})},x.emoji))}),e[40]=a,e[41]=n,e[42]=S,e[43]=i,e[44]=J):J=e[44];let U;e[45]!==n?(U=n&&t.jsxs("aside",{className:"bg-token-bg-tertiary mt-4 flex items-center rounded-xl p-3",children:[t.jsx("div",{className:"me-2 h-6 w-6",children:t.jsx("div",{className:"text-token-text-secondary relative flex h-full items-center justify-center",children:t.jsx(mt,{className:"icon"})})}),t.jsx("p",{className:"text-token-text-secondary text-xs text-pretty",children:t.jsx(y,h({},te.projectHelperBoxDescription))})]}),e[45]=n,e[46]=U):U=e[46];let _;e[47]!==w?(_=w.map(Mt),e[47]=w,e[48]=_):_=e[48];let q;e[49]!==W||e[50]!==J||e[51]!==U||e[52]!==_?(q=t.jsxs("div",{className:"flex-1 px-4 pt-1",children:[W,J,U,_]}),e[49]=W,e[50]=J,e[51]=U,e[52]=_,e[53]=q):q=e[53];let R;e[54]!==g||e[55]!==w.length?(R=!g.trim()||w.length>0,e[54]=g,e[55]=w.length,e[56]=R):R=e[56];let B;e[57]!==s||e[58]!==f||e[59]!==R?(B=t.jsx("div",{className:"flex items-center justify-end px-3 pb-3",children:t.jsx(Pe.Actions,{primaryButton:t.jsx(Pe.Button,{title:f,type:"submit",form:"project-modal-form",color:"primary",loading:s,disabled:R})})}),e[57]=s,e[58]=f,e[59]=R,e[60]=B):B=e[60];let X;return e[61]!==l||e[62]!==q||e[63]!==B?(X=t.jsxs("form",{id:"project-modal-form",onSubmit:l,children:[q,B]}),e[61]=l,e[62]=q,e[63]=B,e[64]=X):X=e[64],X}function Mt(o,e){return t.jsx("div",{className:"mb-4 text-sm text-red-500",children:o},e)}function Pt(){ft()}function Nt(s){var l=s,{children:o,onCloseAutoFocus:e}=l,n=re(l,["children","onCloseAutoFocus"]);const f=P.useRef(!1),i=P.useRef(!1),a=P.useRef(!1);return t.jsx(I.Content,Z(h({},n),{onCloseAutoFocus:c=>{const u=f.current,d=i.current,N=a.current;if(f.current=!1,i.current=!1,a.current=!1,N)c.preventDefault();else{if(u||d)return;e&&e(c)}},onEscapeKeyDown:()=>{f.current=!0},onPointerDownOutside:()=>{i.current=!0},onFocusOutside:()=>{a.current=!0},children:o}))}const Ct=qe(()=>{const o=L(!1),e=L(!1);return{isSheetVisible$:fe(()=>o()||e()),isSheetOpen$:o,keepSheetOpen$:e}}),_e=o=>{"use forget";const e=ce.c(25),{onCloseAutoFocus:n,children:s,isNewProject:l,mode:f,displayedMemoryScope$:i,memoryScope$:a,isSunshineEnabled:c}=o,u=f===void 0?"dropdown":f;let d;e[0]!==i?(d=i===void 0?L(F.GLOBAL):i,e[0]=i,e[1]=d):d=e[1];const N=d;let m;e[2]!==a?(m=a===void 0?L(F.GLOBAL):a,e[2]=a,e[3]=m):m=e[3];const j=m,C=c===void 0?!0:c,g=!He();let w;e[4]!==N?(w=()=>N(),e[4]=N,e[5]=w):w=e[5];const k=K(w),D=xe();let T;e[6]!==D?(T=Ct(D),e[6]=D,e[7]=T):T=e[7];const v=T,S=K(v.isSheetOpen$),b=u==="auto"?g?"sheet":"dropdown":u;let M;e[8]!==u||e[9]!==v.isSheetOpen$?(M=E=>{v.isSheetOpen$.set(E),E&&De.logEventWithStatsig("Project Customization: Open","chatgpt_web_project_customization_menu_open",{mode:u})},e[8]=u,e[9]=v.isSheetOpen$,e[10]=M):M=e[10];let O;e[11]!==k||e[12]!==l||e[13]!==C||e[14]!==j||e[15]!==n?(O=t.jsx(I.Portal,{children:t.jsx(wt,{displayedMemoryScope:k,memoryScope$:j,isNewProject:l,onCloseAutoFocus:n,isSunshineEnabled:C})}),e[11]=k,e[12]=l,e[13]=C,e[14]=j,e[15]=n,e[16]=O):O=e[16];let $;return e[17]!==s||e[18]!==g||e[19]!==S||e[20]!==v||e[21]!==M||e[22]!==O||e[23]!==b?($=t.jsxs(I.Root,{mode:b,open:S,store:v,modal:g,onOpenChange:M,children:[s,O]}),e[17]=s,e[18]=g,e[19]=S,e[20]=v,e[21]=M,e[22]=O,e[23]=b,e[24]=$):$=e[24],$},wt=f=>{var i=f,{displayedMemoryScope:o=F.GLOBAL,memoryScope$:e=L(F.GLOBAL),isNewProject:n,isSunshineEnabled:s}=i,l=re(i,["displayedMemoryScope","memoryScope$","isNewProject","isSunshineEnabled"]);const a=!n||!s,c=!!n&&!s;return t.jsxs(Nt,Z(h({size:"auto",align:"end",alignOffset:-7,loop:!0},l),{children:[t.jsxs(I.Group,{children:[t.jsx(I.Label,{className:"overflow-visible text-clip whitespace-normal",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{children:t.jsx(y,{id:"w7+gZm",defaultMessage:"Memory"})}),c?t.jsx("span",{className:"text-token-text-secondary mt-1 text-xs",children:t.jsx(y,{id:"VqLy8n",defaultMessage:"Memory is off. Enable it in <link>Settings</link> to use memory within projects.",values:{link:u=>t.jsx(Le,{to:"#settings/Personalization",className:"text-token-text-primary underline",children:u})}})}):null]})}),c?null:t.jsxs(I.RadioGroup,{value:o,className:"flex flex-col",onValueChange:u=>{a||e.set(u)},children:[t.jsx(Ce,{value:F.GLOBAL,disabled:a,label:t.jsx(y,{id:"AA7d3d",defaultMessage:"Default"}),secondary:t.jsx(y,{id:"XHfasG",defaultMessage:"Project can access memories from outside chats, and vice versa."})}),t.jsx(Ce,{value:F.PROJECT_V2,disabled:a,label:t.jsx(y,{id:"XToOAe",defaultMessage:"Project-only"}),secondary:t.jsx(y,{id:"W99WlO",defaultMessage:"Project can only access its own memories. Its memories are hidden from outside chats."})})]})]}),c?null:t.jsx(I.Group,{children:t.jsx(I.Label,{children:t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("div",{className:"text-token-text-secondary flex items-center text-xs text-pretty",children:t.jsx(y,{id:"FrohSq",defaultMessage:"Note that this setting can't be changed later."})})})})})]}))},kt=o=>t.jsx(I.BasicTrigger,Z(h({className:pe("dropdown-btn"),"data-testid":"composer-plus-btn"},o),{children:t.jsx(Ve,{className:"icon"})}));function Ce(o){return t.jsx(I.RadioItem,h({trailing:t.jsx(I.RadioItemCheck,{})},o))}const ie=o=>{"use forget";var j;const e=ce.c(22);let n,s,l,f,i,a;e[0]!==o?(j=o,{className:s,label:l,children:n,sublabel:i,trailing:a}=j,f=re(j,["className","label","children","sublabel","trailing"]),e[0]=o,e[1]=n,e[2]=s,e[3]=l,e[4]=f,e[5]=i,e[6]=a):(n=e[1],s=e[2],l=e[3],f=e[4],i=e[5],a=e[6]);let c;e[7]!==s?(c=pe("flex w-full flex-col gap-2",s),e[7]=s,e[8]=c):c=e[8];let u;e[9]!==l||e[10]!==f?(u=t.jsx("label",Z(h({className:"text-token-text-primary text-sm"},f),{children:l})),e[9]=l,e[10]=f,e[11]=u):u=e[11];let d;e[12]!==i||e[13]!==u?(d=t.jsxs("div",{className:"flex flex-col gap-0.5",children:[u,i]}),e[12]=i,e[13]=u,e[14]=d):d=e[14];let N;e[15]!==d||e[16]!==a?(N=t.jsxs("div",{className:"flex items-center justify-between",children:[d,a]}),e[15]=d,e[16]=a,e[17]=N):N=e[17];let m;return e[18]!==n||e[19]!==c||e[20]!==N?(m=t.jsxs("section",{className:c,children:[N,n]}),e[18]=n,e[19]=c,e[20]=N,e[21]=m):m=e[21],m},Ot=({projectName$:o,instructions$:e,gizmo:n,onSave:s,onClose:l,onDelete:f,isSaveDisabled:i,theme$:a,emoji$:c,filesCount$:u,displayedMemoryScope$:d,memoryScope$:N,isSunshineEnabled:m=!0,isNewProject:j=!1,accountPlanType:C,onPendingFilesChange:g,onAddFiles:w,fileControlRef:k,formRef:D,shouldAutoFocusProjectName:T=!1,showFooterPadding:v=!1})=>{"use no forget";const S=de(),b=Be(),M=xe(),O=K(o),$=K(e),E=K(()=>{var x;return(x=d==null?void 0:d())!=null?x:F.GLOBAL}),G=!j||!m,H=j&&!m,W=K(()=>{var x;return(x=u())!=null?x:0}),J=E===F.PROJECT_V2?S.formatMessage(A.memorySelectedProjectOnly):S.formatMessage(A.memorySelectedDefault),U=x=>{x.preventDefault(),!i&&s()},{canEdit:_}=Ee(n),{canDelete:q}=Ke(n),{data:R}=We(n.gizmo.id),B=R!=null?R:n,{queryKey:X}=Je(b,B.gizmo.id);return P.useEffect(()=>{b.invalidateQueries({queryKey:X})},[b,X]),t.jsxs("form",{ref:D,className:"relative flex w-full flex-col","aria-label":S.formatMessage(A.projectSettingsTitle),onSubmit:U,children:[t.jsxs("header",{className:"bg-token-bg-primary sticky top-0 z-10 flex items-center justify-between px-4 py-3",children:[t.jsx("h2",{className:"text-token-text-primary text-lg font-normal",children:t.jsx(y,h({},A.projectSettingsTitle))}),t.jsx(Ue,{onClick:l})]}),t.jsxs("div",{className:pe("flex flex-col gap-5 px-4 py-2",v&&"pb-24"),children:[t.jsx(ie,{htmlFor:"project-name",label:t.jsx(y,h({},A.projectNameLabel)),children:t.jsxs("div",{className:"grid gap-1",children:[t.jsx(Fe,{theme$:a,emoji$:c,children:t.jsx(Ae,{theme$:a,emoji$:c,disabled:!_,className:"after:border-token-interactive-border-tertiary-default col-1 row-1 justify-self-start! after:absolute after:end-0 after:top-0 after:bottom-0 after:border-e after:content-['']"})}),t.jsx("input",{className:"border-token-interactive-border-tertiary-default focus:border-token-interactive-border-focus bg-token-bg-primary col-span-full row-1 w-full resize-none rounded-lg border px-2 py-2 ps-11 pe-9 text-sm focus:ring-0",autoComplete:"off",placeholder:S.formatMessage(A.projectNamePlaceholder),type:"text",readOnly:!_,value:O,onChange:x=>o.set(x.target.value),autoFocus:T,"aria-label":S.formatMessage(A.projectNameInputAriaLabel),id:"project-name"})]})}),t.jsx(ie,{htmlFor:"instructions",label:t.jsx(y,h({},A.instructionsLabel)),sublabel:t.jsx("span",{className:"text-token-text-tertiary text-xs",children:t.jsx(y,h({},A.instructionsDescription))}),children:t.jsx("textarea",{id:"instructions",readOnly:!_,placeholder:S.formatMessage(te.projectInstructionsPlaceholder),className:"border-token-interactive-border-tertiary-default focus:border-token-interactive-border-focus bg-token-bg-primary min-h-[60px] w-full rounded-lg border text-sm focus:ring-0",value:$,onChange:x=>e.set(x.target.value),"aria-label":S.formatMessage(A.instructionsInputAriaLabel)})}),t.jsx(ie,{label:t.jsx(y,h({},A.filesLabel)),trailing:t.jsx(ee,{color:"secondary",size:"small",onClick:w,disabled:!_||W>=Qe(M,C),children:t.jsx(y,h({},te.addButtonLabel))}),children:t.jsx(bt,{ref:k,gizmo:B,accountPlanType:C,onPendingFilesChange:g,className:"px-0!"})}),t.jsx(ie,{className:"-mt-4",label:t.jsx(y,h({},A.memoryLabel)),sublabel:H&&t.jsx("span",{className:"text-token-text-secondary mt-1 text-xs",children:t.jsx(y,Z(h({},A.memoryStatusDisabled),{values:{link:x=>t.jsx(Le,{to:"#settings/Personalization",className:"text-token-text-primary underline",children:x})}}))}),children:!H&&t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx(_e,{isNewProject:j,displayedMemoryScope$:d,memoryScope$:N,isSunshineEnabled:m,children:t.jsx(I.BasicTrigger,{disabled:G,className:"border-token-interactive-border-tertiary-default bg-token-bg-primary relative w-full rounded-lg border px-3 py-2 text-start text-sm focus:outline-none disabled:opacity-60",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:J}),t.jsx(xt,{className:"icon-sm xs:ms-1.5 ms-1"})]})})}),t.jsx("div",{className:"text-token-text-tertiary mt-1 text-xs",children:t.jsx(y,h({},E===F.PROJECT_V2?A.memoryHelperProjectOnly:A.memoryHelperDefault))})]})}),q&&t.jsx("div",{className:"mt-2",children:t.jsx(ee,{color:"danger-outline",onClick:f,type:"button",disabled:!_,children:t.jsx(y,h({},te.deleteProjectDropdownButton))})})]})]})},A=$e({projectSettingsTitle:{id:"project-settings-content.projectSettingsTitle",defaultMessage:"Project settings"},projectNameLabel:{id:"project-settings-content.projectNameLabel",defaultMessage:"Project name"},projectNamePlaceholder:{id:"project-settings-content.projectNamePlaceholder",defaultMessage:"Copenhagen Trip"},projectNameInputAriaLabel:{id:"project-settings-content.projectNameInputAriaLabel",defaultMessage:"Project name"},instructionsLabel:{id:"project-settings-content.instructionsLabel",defaultMessage:"Instructions"},instructionsDescription:{id:"project-settings-content.instructionsDescription",defaultMessage:"Set context and customize how ChatGPT responds in this project."},instructionsInputAriaLabel:{id:"project-settings-content.instructionsInputAriaLabel",defaultMessage:"Instructions"},filesLabel:{id:"project-settings-content.filesLabel",defaultMessage:"Files"},memoryLabel:{id:"project-settings-content.memoryLabel",defaultMessage:"Memory"},memoryStatusDisabled:{id:"project-settings-content.memoryStatusDisabled",defaultMessage:"Memory is off. Enable it in <link>Settings</link> to use memory within projects."},memorySelectedProjectOnly:{id:"project-settings-content.memorySelectedProjectOnly",defaultMessage:"Project-only"},memorySelectedDefault:{id:"project-settings-content.memorySelectedDefault",defaultMessage:"Default"},memoryHelperProjectOnly:{id:"project-settings-content.memoryHelperProjectOnly",defaultMessage:"Project can only access its own memories. Its memories are hidden from outside chats. This cannot be changed."},memoryHelperDefault:{id:"project-settings-content.memoryHelperDefault",defaultMessage:"Project can access memories from outside chats, and vice versa. This cannot be changed."},deleteProjectButton:{id:"project-settings-content.deleteProjectButton",defaultMessage:"Delete project"}}),we=lt(()=>Ge(()=>import("./muf27jh2zmg4qun9.js"),__vite__mapDeps([0,1,2,3])).then(o=>o.SnorlaxDeletionModal));var Oe;const ke=rt.footer(Oe||(Oe=Me(["border-token-interactive-border-tertiary-default bg-token-bg-primary absolute bottom-0 z-10 flex w-full items-center justify-end gap-2 border-t px-4 py-4"])));function Gt({submitButtonTitle:o,onClose:e,onSuccess:n,gizmo:s,project:l,autoFocusProjectName:f=!1}){"use no forget";const i=xe(),a=de(),c=Xe(i),u=Ze(i),d=u==null?void 0:u.planType,N=Ie(),m=pt(),j=jt(),C=Ye(),[g,w]=P.useState(()=>C.isPending),k=!s,D=!k&&ze(i),T=!D&&(m||j&&k);!k&&!l&&(l=et(i,s.gizmo.id));const[v]=P.useState(()=>L(ne(()=>{var r,p;return(p=(r=l==null?void 0:l.emoji$())!=null?r:s==null?void 0:s.gizmo.display.emoji)!=null?p:null}))),[S]=P.useState(()=>L(ne(()=>{var r,p;return(p=(r=l==null?void 0:l.theme$())!=null?r:s==null?void 0:s.gizmo.display.theme)!=null?p:null}))),[b]=P.useState(()=>L(ne(()=>{var r,p;return(p=(r=l==null?void 0:l.title$())!=null?r:s==null?void 0:s.gizmo.display.name)!=null?p:""}))),[M]=P.useState(()=>L(ne(()=>{var r;return(r=s==null?void 0:s.gizmo.instructions)!=null?r:""}))),[O]=P.useState(()=>L(ne(()=>{var r;return(r=l==null?void 0:l.filesCount$)!=null?r:0}))),[$]=P.useState(()=>{const r=s==null?void 0:s.gizmo.memory_scope;let p=r;switch(r){case F.PROJECT_V2:p=F.PROJECT_V2;break;case F.GLOBAL:case F.PROJECT:p=F.GLOBAL;break;default:p=F.UNSET;break}return L(p)}),[E]=P.useState(()=>fe(()=>ht($()))),[G]=P.useState(()=>fe(()=>{const r=[];return b().length>Ne&&r.push(a.formatMessage({id:"feWA6K",defaultMessage:"Project names cannot be longer than {length} characters."},{length:Ne})),r})),H=async()=>{var r;try{w(!0);const p=l?await l.queueUpdate$({emoji:v(),theme:S(),name:b(),options:{memoryScope:$(),instructions:M()}}):await C.mutateAsync({update:ue=>{var ae,oe;return Z(h({},ue),{emoji:(ae=v())!=null?ae:void 0,theme:(oe=S())!=null?oe:void 0,name:b(),memoryScope:$(),instructions:M()})},id:(r=s==null?void 0:s.gizmo.id)!=null?r:it}),{id:V,resource:se}=p;w(!1),n&&n(V!=null?V:se==null?void 0:se.gizmo.id),e()}catch(p){const V=ct(p);c.warning(V!=null?V:a.formatMessage({id:"project-modal.error.create-or-update",defaultMessage:"Error creating or updating project"}),{duration:5,hasCloseButton:!0}),w(!1)}},W=()=>{s&&nt(i,we,{gizmoId:s.gizmo.id,handleDelete:()=>{at(i,we),e(),N("/",{replace:!0})}})},J=k?a.formatMessage({id:"PoqmRT",defaultMessage:"Create project"}):a.formatMessage({id:"RT8KNi",defaultMessage:"Save"}),[U,_]=P.useState(!1),q=K(()=>{const r=b();return g||U||r.trim().length===0||G().length>0},"ProjectModal:isSaveDisabled"),R=r=>{r==null||r.preventDefault(),De.logEventWithStatsig("Projects: Create Submit Enhanced","chatgpt_web_projects_create_submit"),H()},B=P.useRef(null),X=P.useCallback(r=>{var p;r.preventDefault(),(p=B.current)==null||p.openFileDialog()},[B]),x=P.useRef(null),{canEdit:Q}=Ee(s),Y=K(()=>{var oe,je,he;const r=b(),p=v(),V=M(),se=(oe=s==null?void 0:s.gizmo.display.name)!=null?oe:"",ue=(je=s==null?void 0:s.gizmo.display.emoji)!=null?je:null,ae=(he=s==null?void 0:s.gizmo.instructions)!=null?he:"";return(r!=null?r:"")!==se||(p!=null?p:null)!==ue||(V!=null?V:"")!==ae},"ProjectModal:hasFormChanges"),z=D&&(Q?Y:!0);return t.jsx(tt,{testId:"modal-new-project-enhanced",isOpen:!0,hideSeparator:!0,noPadding:!0,headerAccessory:T?t.jsx(_e,{isNewProject:k,displayedMemoryScope$:E,memoryScope$:$,isSunshineEnabled:m,children:t.jsx(kt,{})}):null,showCloseButton:!g,type:"success",size:"large",footerContent:D&&(Q?Y&&t.jsxs(ke,{children:[t.jsx(ee,{color:"secondary",className:"px-4",onClick:e,disabled:g,type:"button",children:t.jsx(y,h({},me.cancelButton))}),t.jsx(ee,{color:"primary",className:"px-4",visuallyDisabled:q,onClick:r=>{var p;r.preventDefault(),(p=x.current)==null||p.requestSubmit()},type:"button",children:t.jsx(y,h({},me.saveButton))})]}):t.jsxs(ke,{children:[t.jsx(st,{label:a.formatMessage(te.viewOnlyCustomInstructionsModalHeaderTooltip),side:"bottom",align:"center",className:"ms-3",children:t.jsxs("div",{className:"text-token-text-tertiary flex cursor-pointer flex-row items-center gap-1.5 text-sm",children:[t.jsx(ot,{className:"icon"}),t.jsx(y,h({},te.viewOnlyCustomInstructionsModalHeaderLabel))]})}),t.jsx(ee,{color:"secondary",className:"ms-auto px-4",onClick:e,type:"button",children:t.jsx(y,h({},me.closeButton))})]})),title:!D&&(k?a.formatMessage({defaultMessage:"Create project",id:"project-modal.title.new-project"}):a.formatMessage({defaultMessage:"Edit project",id:"project-modal.title.edit-project"})),onClose:()=>{g||e()},children:D&&d?t.jsx(Ot,{projectName$:b,instructions$:M,gizmo:s,onSave:R,onDelete:W,isSaveDisabled:q,theme$:S,emoji$:v,displayedMemoryScope$:E,memoryScope$:$,isSunshineEnabled:m,isNewProject:k,accountPlanType:d,onPendingFilesChange:r=>_(r),onAddFiles:X,fileControlRef:B,filesCount$:O,onClose:e,formRef:x,shouldAutoFocusProjectName:f,showFooterPadding:z}):t.jsx(St,{emoji$:v,isNewProject:k,isPending:g,onClose:e,onSubmit:R,submitTitle:o!=null?o:J,title$:b,theme$:S,validationErrors$:G,planType:d})})}const me=$e({cancelButton:{id:"project-settings-content.cancelButton",defaultMessage:"Cancel"},closeButton:{id:"project-settings-content.closeButton",defaultMessage:"Close"},saveButton:{id:"project-settings-content.saveButton",defaultMessage:"Save"}});export{Gt as CreateOrEditProjectModal};
//# sourceMappingURL=fw0y7ib0gpj966qo.js.map
