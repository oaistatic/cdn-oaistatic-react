const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bu7hz8op6nh00670.js","assets/mw35uwhq4g8r9eam.js","assets/g2euln7v5pbm31qa.js","assets/d0xa318sl7ywi0za.js","assets/root-kavs8piy.css","assets/conversation-small-lq38g8zw.css","assets/ezlpyvbn7kh2fenv.js","assets/iheyqrwuz0lnvajd.js","assets/ggvjblnzoirafiyl.js","assets/of0vtq1gcmd3mc3z.js","assets/fmhhjpytl3ewptmk.js","assets/f89v9mtyvakgmoul.js","assets/oftnd9rlobxeh2e2.js","assets/mn6hno74yixdlr64.js","assets/jybdx70geuzrnoab.js","assets/e5bg4yzr7nht9sxr.js","assets/e237h6ukoc2vt16i.js","assets/crvd30ivlnjgjuq5.js","assets/ddina39kz3r81pp7.js","assets/mdh3gu2zvzp3cu8r.js","assets/mpb8yfob3hqr4zw5.js","assets/iue4s7sqsxkz98qq.js","assets/lkfrqjjeqfqrlwms.js","assets/ib6sh25mbksn5l27.js","assets/dgwk9fpyqzzoq7lb.js","assets/gqlh411iakvgnrfh.js","assets/nk904upldvj1ufei.js","assets/m966r6qv7jykyvdd.js","assets/mtsxj0469osb30cx.js","assets/gs306ibz22k5zi3r.js","assets/lvrypwdhnjlsz45f.js","assets/pdbvfcpzcg4ny695.js","assets/ki6jbruunap4y9wd.js","assets/gywigwwdbkbcgqzt.js","assets/l4v2i2dq9gwjak1q.js","assets/pbx1h703pubtj7lo.js","assets/l2u6v2d9vfposl4n.js","assets/nc9vr5q4g3rosm9u.js","assets/ns51nblw8ziscsgd.js","assets/ehv2vkvc6wjiqj3r.js","assets/ce3hgmw4iyyhicud.js","assets/lqx184c6v77q7gok.js","assets/cnbuivqvzovh3vb1.js","assets/no13ci302k09f2bj.js","assets/gsgwnhjtne39lykz.js","assets/cz2iwgzw4rck3xnv.js","assets/b0uu5uufofxyna0k.js","assets/luqq85m92bytr6zc.js","assets/fhb510ji3eot09yv.js","assets/ejv9rjzfbwh1dn9a.js","assets/ck4rwz4bvjdsyeld.js","assets/e1vcfcyx8u6zde85.js","assets/fd8selpa9l1l2dzd.js","assets/juifnpcp74ymxcu2.js","assets/pbl95wx6493wq92j.js","assets/m1s7wxy82fhyl3zh.js","assets/m2d85ixk2zz51mk9.js","assets/cot-message-kr8ex2u7.css","assets/euri4lwwl4nwm1e0.js","assets/gmwcwac6p1t42mfk.js","assets/jfogwbjv4qzz2lb3.js"])))=>i.map(i=>d[i]);
var st=Object.defineProperty,tt=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var Es=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable;var ws=(s,o,r)=>o in s?st(s,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[o]=r,J=(s,o)=>{for(var r in o||(o={}))Es.call(o,r)&&ws(s,r,o[r]);if($)for(var r of $(o))ps.call(o,r)&&ws(s,r,o[r]);return s},W=(s,o)=>tt(s,at(o));var Ps=(s,o)=>{var r={};for(var a in s)Es.call(s,a)&&o.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&$)for(var a of $(s))o.indexOf(a)<0&&ps.call(s,a)&&(r[a]=s[a]);return r};import{r as I,j as i,R as it,_ as S,M as ks}from"./mw35uwhq4g8r9eam.js";import{jZ as nt,aa as ee,V as ot,P as rt,M as se,be as y,u as lt,jg as ct,d as Y,bj as dt,aF as mt,aJ as gt,ja as t,$ as ut,a0 as ft,fj as te,j3 as ht,fF as ae,j8 as M,_ as _t,iT as Tt,aN as Cs,cF as vs,ay as xt,op as As,s6 as yt,m as q,i as jt,eu as It,fE as St,aw as bt}from"./d0xa318sl7ywi0za.js";import{iz as wt,iA as Et,iB as pt,iC as Ds,iD as G,iE as Pt,iF as Ms,iG as Ct,iH as vt,iI as At,fV as Dt,iJ as Rt,iK as Rs,iL as Lt,iM as kt,iN as Mt,iO as Bt,iP as Ot,iQ as Vt,iR as Nt,iS as zt,iT as Ft,iU as Qt,iV as $t,iW as Jt,iX as Wt,iY as Ut,iZ as Kt,i_ as Ht,i$ as Ls,j0 as Xt,g0 as Zt,j1 as Yt,j2 as qt,j3 as Gt,fB as ea,dW as sa}from"./g2euln7v5pbm31qa.js";import{T as Bs,g as ta}from"./of0vtq1gcmd3mc3z.js";function aa(s){var C;const b=s,{bufferType:o,isActivelyStreaming:r,messages:a,parts:c}=b,m=Ps(b,["bufferType","isActivelyStreaming","messages","parts"]),u=a[a.length-1].id,g=I.useMemo(()=>a.some(j=>{var A;return(A=j.metadata)==null?void 0:A.mercury_message}),[a]),[x,T]=I.useState(wt(c)),f=I.useRef(void 0),d=nt(),w=I.useMemo(()=>d?c.flatMap(j=>{if(typeof j=="string")return j;if(j.content_type==="audio_transcription")return j.text}).filter(j=>j!==void 0):c,[c,d]);if(f.current===void 0)switch(o){case"Adaptive":g?f.current=new Ds(w,T,r,void 0,{minRate:.4,expectedDisplayInterval:.05,maxTokensPerStep:7}):f.current=new Ds(w,T,r);break;case"ChunkedCatchup":f.current=new pt(w,T,r);break;case"Punctuation":f.current=new Et(w,T,r);break}return I.useEffect(()=>{f.current!=null&&(f.current.onMessagePartsUpdated(w,r),f.current.isBuffering()&&G.addDelayedRenderingMessage(u))},[w,u,r]),I.useEffect(()=>{f.current!=null&&f.current.removeDelayedRender()&&G.removeDelayedRenderingMessage(u)},[x,u]),I.useEffect(()=>()=>G.removeDelayedRenderingMessage(u),[u]),I.useEffect(()=>()=>{var j;(j=f.current)==null||j.destroy(),f.current=void 0},[]),i.jsx(Bs,W(J({},m),{messages:a,parts:c,displayParts:x,isActivelyStreaming:r||!!((C=f.current)!=null&&C.isBuffering())}))}function ia({message:s,isCompletionInProgress:o,hasActiveRequest:r,conversation:a,className:c,isUserTurn:m,isFinalUserTurn:u,isWithinFirstAssistantTurns:g,turnIndex:x,isFeedbackEnabled:T,prevGroupedMessageType:f,prevGroupedMessages:d,citableMessages:w,superWidgetContent:b}){var j,A,D;const C=I.useMemo(()=>"parts"in s.content?s.content.parts:[ee(s)],[s]);return i.jsxs(i.Fragment,{children:[i.jsx(oa,{parts:C,messages:[s],hasActiveRequest:r,isCompletionInProgress:o,className:c,citations:(j=s.metadata)==null?void 0:j.citations,contentReferences:(A=s.metadata)==null?void 0:A.content_references,attachments:(D=s.metadata)==null?void 0:D.attachments,isUserTurn:m,isFinalUserTurn:u,isWithinFirstAssistantTurns:g,turnIndex:x,id:s.id,isFeedbackEnabled:T,conversation:a,prevGroupedMessageType:f,prevGroupedMessages:d,citableMessages:w,superWidgetContent:b}),!1]})}const na=it.memo(ia);function oa(s){const o=s.messages.length>1,r=ot.isLastActorMessage(rt(s.conversation.id),s.messages[0].id),a=se(s.conversation.id,d=>!!(d!=null&&d.sharedConversationMetadata)),c=o?void 0:Pt(s.messages[0],r,s.isCompletionInProgress||s.hasActiveRequest,a),m=(c==null?void 0:c.flagSeverity)!=="danger"&&s.isCompletionInProgress,u=!s.parts.some(d=>d!==""),{bufferType:g,wordFadeType:x}=Ms(),[T,f]=I.useState(()=>x!=="indexed"&&g!=="none"&&!s.isUserTurn&&(s.isCompletionInProgress||u&&!c));return c&&T&&f(!1),T?i.jsx(aa,W(J({},s),{bufferType:g,isActivelyStreaming:m,errorState:c})):i.jsx(Bs,W(J({},s),{displayParts:Ct({isUserTurn:s.isUserTurn,parts:s.parts}),isActivelyStreaming:m,errorState:c}))}const ra=y(()=>S(()=>import("./bu7hz8op6nh00670.js"),__vite__mapDeps([0,1,2,3,4,5]))),la=y(()=>S(()=>import("./ezlpyvbn7kh2fenv.js"),__vite__mapDeps([6,1,3,4,7]))),ca=y(()=>S(()=>import("./ggvjblnzoirafiyl.js"),__vite__mapDeps([8,1,3,4,2,5,9]))),da=y(()=>S(()=>import("./fmhhjpytl3ewptmk.js"),__vite__mapDeps([10,1,3,4,11,12,2,5,13,14,15]))),ma=y(async()=>()=>null),ga=y(async()=>(await S(()=>import("./e237h6ukoc2vt16i.js"),__vite__mapDeps([16,1,3,4,2,5]))).GlauxMessage),ua=y(async()=>(await S(()=>import("./crvd30ivlnjgjuq5.js"),__vite__mapDeps([17,1,3,4,13,2,5,18,14,15,19,20,21]))).ImageGenMessage),fa=y(()=>S(()=>import("./lkfrqjjeqfqrlwms.js"),__vite__mapDeps([22,1,3,4,2,5]))),ha=y(()=>S(()=>import("./g2euln7v5pbm31qa.js").then(s=>s.Dq),__vite__mapDeps([2,1,3,4,5])).then(s=>s.BrowsingMessage)),_a=y(()=>S(()=>import("./ib6sh25mbksn5l27.js"),__vite__mapDeps([23,1,3,4,2,5,9])).then(s=>s.BrowserToolMessage)),Ta=y(()=>S(()=>import("./dgwk9fpyqzzoq7lb.js"),__vite__mapDeps([24,1,3,4,2,5])).then(s=>s.SearchResultMessage)),xa=y(()=>S(()=>import("./gqlh411iakvgnrfh.js").then(s=>s.i),__vite__mapDeps([25,1,3,4,2,5,26,27,28,29,30,31,32,33,34,35,36,11,12,37,38,39,40,41])).then(s=>s.JITPluginMessage)),ya=y(()=>S(()=>import("./cnbuivqvzovh3vb1.js"),__vite__mapDeps([42,1,3,4,2,5,41,29])).then(s=>s.APIToolElicitationMessage)),ja=y(()=>S(()=>import("./no13ci302k09f2bj.js"),__vite__mapDeps([43,1,3,4,44,45,2,5])).then(s=>s.DataAnalysisMessage)),Ia=y(()=>S(()=>import("./b0uu5uufofxyna0k.js"),__vite__mapDeps([46,1,3,4,2,5,47,19,20,15,21,48,16,45,49,9,50,51,52,53,54,18,14,55,56,57]))),Sa=y(()=>S(()=>import("./euri4lwwl4nwm1e0.js"),__vite__mapDeps([58,1,3,4,47,2,5,19,20,15,21,48,16,45,49,9,50,51,52,53,54,18,14,55,56,57])).then(s=>s.LegacyCoTMessage)),ba=y(()=>S(()=>import("./luqq85m92bytr6zc.js"),__vite__mapDeps([47,1,3,4,2,5,19,20,15,21,48,16,45,49,9,50,51,52,53,54,18,14,55,56,57])).then(s=>s.CoT)),wa=y(()=>S(()=>import("./gmwcwac6p1t42mfk.js"),__vite__mapDeps([59,1,3,4,2,5,60])).then(s=>s.JawboneMessage)),Ea=y(async()=>()=>null);function pa(s){if(s.some(o=>o.type===t.SearchGPTQuery)){const r=s.filter(c=>c.type===M).flatMap(c=>c.groups),a=r.flatMap(c=>c.messages.map(m=>{var u;return(u=m.metadata)==null?void 0:u.search_turns_count})).findLast(c=>c!=null);return a!=null?a>1:(function(){const m=r.filter(x=>x.type===t.StructuredThoughts),u=r.filter(x=>x.type===t.CoTSearchTool),g=(()=>{function x(f){return f.type===t.StructuredThoughts&&f.messages.flatMap(d=>d.content).some(d=>d.content_type===bt.StructuredThoughts&&d.thoughts.length>0)}let T=!1;for(const f of r)if(f.type===t.CoTSearchTool)T=!0;else if(x(f)&&T)return!0;return!1})();return m.length>1||u.length>1||g})()}return!0}function Pa(s,o){var r;if(s.type===M){const a=te(s.groups);return((r=a==null?void 0:a.messages[0].metadata)==null?void 0:r.is_visually_hidden_reasoning_group)&&o===0}return!1}function Ca(s){return s.type===M?!1:s.messages.some(o=>Gt(o))}function Oa({groupedMessagesToRender:s,allMessages:o,allGroupedMessages:r,conversation:a,isUserTurn:c,isCompletionRequestInProgress:m,isFeedbackEnabled:u,isFinalTurn:g,isFinalUserTurn:x,isFinalAssistantTurn:T,isGlauxTurn:f=!1,hasActiveRequest:d,onRequestCompletion:w,turnIndex:b,shouldGrowContainer:C=!0,isParagen:j=!1,renderingView:A="chat",isAgentTurn:D=!1,isKAUR1BR5:Os=!1,query:ie=null,wasInterrupted:Vs=!1,superWidgetContent:Ns=null,lastAgentMetadataNode:ne,isWithinFirstAssistantTurns:zs=!1,hasSearchSystemHint:Fs=!1}){var Te,xe;const U=lt(),{showDebugConversationTurns:oe}=ct(),[B]=se(a.id,e=>[e==null?void 0:e.mode]),re=Y(()=>dt(a)),le=Y(()=>mt(a)),Qs=vt(U),$s=Y(()=>gt(U));let ce=r.some(e=>e.type===t.Browsing||e.type===t.RetrievalBrowsing||e.type===t.SearchGPTQuery||e.type===t.n7jupd||e.type===t.q7dr546);const Js=r.some(e=>e.type===t.SearchGPTQuery),de=!c&&Fs&&m&&d&&!Js&&$s,me=I.useRef(!1);de&&(me.current=!0,ce=!0);const Ws=se(a.id,e=>{var n;for(let P=o.length-1;P>=0;P--){const h=o[P],R=(n=e==null?void 0:e.tree.getNodeIfExists(h.id))==null?void 0:n.message,Q=R?sa(R):void 0;if(Q)return Object.assign({conversation:a,messageId:o[P].id},Q)}}),Us=At(()=>ut.count(ft.DEFAULT,"conversation_turn_grouped_messages.attempted_render_missing_type_f959b8c")),K=te(o),ge=ht({clientThreadId:a.id,conversationMode:B}),Ks=I.useCallback(({sourceEvent:e,requestedModelId:n,appendMessages:P,extraStreamParams:h,isReasoningSkipped:R})=>{K&&ge({sourceEvent:e,nodeId:K.id,requestedModelId:n,appendMessages:P,extraStreamParams:h,isReasoningSkipped:R})},[K,ge]),{closeThreadSidebar:Hs}=Dt(),Xs=ae(s,e=>e.type!==t.Debug),H=s.map((e,n)=>{var Ie,Se,be,we,Ee,pe,Pe,Ce,ve,Ae,De,Re,Le,ke,Me,Be,Oe,Ve,Ne,ze,Fe,Qe,$e,Je,We,Ue,Ke,He,Xe,Ze,Ye,qe,Ge,es,ss,ts,as,is,ns,os,rs,ls,cs,ds,ms,gs,us,fs,hs,_s,Ts,xs,ys,js,Is,Ss;const P=d||Ca(e),h=D?n===Xs:n===r.length-1,R=pa(s),Q=Pa(e,n),E=n===r.length-1?void 0:r[n+1],Ys=(E==null?void 0:E.type)===M?E.groups.at(-1):E,V=n===0?void 0:s[n-1],L=(V==null?void 0:V.type)!==M?V:void 0,ye=L==null?void 0:L.type,je=L==null?void 0:L.messages,qs=o==null?void 0:o.filter(l=>{var _,p;return((_=l.metadata)==null?void 0:_.python_citation)||((p=l.metadata)==null?void 0:p.container_citation)});if(e.type===M){const l=e.groups[0].messages[0];return!R||Q?null:i.jsx(ba,{isStreaming:g&&h&&m,latestError:Ws,isFinalAssistantTurn:T,messageGroups:e.groups,nextMessageGroup:Ys,prevMessageGroup:L,isAutoswitchOptOutEnabled:!!((Ie=l.metadata)!=null&&Ie.classifier_response),handleSkipClick:_=>{Hs(),_t.logEventWithStatsig("chatgpt_web_autoswitch_reasoning_skip_clicked","chatgpt_web_autoswitch_reasoning_skip_clicked",{conversationId:a.id,messageId:e.groups[0].messages[0].id}),re&&Ks({sourceEvent:_,requestedModelId:re.id,isReasoningSkipped:!0,isAgentTurn:D})},isAgentTurn:D,isGlauxTurn:f,isKAUR1BR5:Os,wasInterrupted:Vs,lastAgentMetadataNode:ne,conversation:a,turnIndex:b,currentGroupedMessageIndex:n},"cot-"+l.id)}const Gs=e&&!Tt(e.messages[0]),et=ce&&Gs,k=[];if(et||k.push(i.jsx(na,{className:"min-h-8",message:e.messages[0],isFeedbackEnabled:u,isFinalUserTurn:x,isWithinFirstAssistantTurns:zs,isCompletionInProgress:h&&m,hasActiveRequest:d,turnIndex:b,conversation:a,isUserTurn:c,prevGroupedMessageType:ye,prevGroupedMessages:je,citableMessages:qs,superWidgetContent:Ns},"text-message-"+e.messages[0].id)),oe&&k.push(i.jsx(Ea,{clientThreadId:a.id,message:e.messages[0]},"message-debug-"+e.messages[0].id)),e.type===t.Text&&((Se=e.messages[0].metadata)!=null&&Se[Cs])){const l=e.messages[0].metadata[Cs];return i.jsxs(I.Fragment,{children:[i.jsx(Rt,{browserContextMetadata:l,className:vs(ta(!0),"mb-1","block","[.text-message+&]:mt-5")}),k]},"group-"+e.messages[0].id)}if(de&&h)return i.jsx(Rs,{clientThreadId:a.id,turnIndex:b,isRequestActive:d,isLastMessage:h,isLastTurnInConversation:g,query:ie,searchModelQueries:[],searchResultGroups:[],showFastNav:!1,isForcedMessage:!0,shouldShowAnimatedBlackDot:!1},"searchquery-forced-".concat(a.id,"-").concat(b));switch(e.type){case t.Text:case t.MultiText:if(e.type===t.Text){const l=(be=e.messages[0])==null?void 0:be.metadata,_=typeof(l==null?void 0:l.source)=="string"&&(l==null?void 0:l.source)==="dream_followup";return i.jsxs(I.Fragment,{children:[_&&V&&i.jsxs("div",{className:"mx-auto mt-8 mb-6 flex w-full items-center justify-center",children:[i.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),i.jsx("p",{className:"mx-3 shrink text-[14px] whitespace-nowrap text-gray-500",children:i.jsx(ks,{id:"threadLayout.proactiveAssistantFollowupDivider",defaultMessage:"Follow-up question"})}),i.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]},"proactive-divider-"+e.messages[0].id),k,D&&i.jsx(Ut,{conversation:a,currentGroupedMessage:e,isLastMessage:h,isLastTurnInConversation:g,turnIndex:b,lastAgentMetadataNode:ne}),i.jsx(Kt,{isUserTurn:c,message:e.messages[0]}),i.jsx(Ht,{isUserTurn:c,message:e.messages[0],clientThreadId:a.id})]},"group-"+e.messages[0].id)}else return e.type===t.MultiText?i.jsx(ca,{conversation:a,messages:e.messages,isCompletionInProgress:h&&m,isFeedbackEnabled:u,hasActiveRequest:d,prevGroupedMessageType:ye,prevGroupedMessages:je},"multitext-"+((Ee=(we=e.messages[0])==null?void 0:we.id)!=null?Ee:n)):e.type;case t.PIMBlock:{const l=te(o);return B&&l?i.jsx(Wt,{isFinalTurn:g,hasActiveRequest:d,conversationMode:B,clientThreadId:a.id,justification:(pe=l.metadata)==null?void 0:pe.pim_justification,flaggedMessageId:(Pe=l.metadata)==null?void 0:Pe.pim_message_id,children:k}):null}case t.n7jupd_n:return i.jsx(Jt,{});case t.Browsing:case t.RetrievalBrowsing:{const l=B!=null&&[q.GizmoInteraction,q.GizmoMagicCreate,q.GizmoTest].includes(B.kind),_=le?jt(le):!1;return i.jsx(ha,{messages:e.messages,isRequestActive:d,isLastMessageInTurn:h,isUsingGizmo:l,isUsingProject:_,isRetrieval:e.type===t.RetrievalBrowsing},"browsing-"+((ve=(Ce=e.messages[0])==null?void 0:Ce.id)!=null?ve:n))}case t.kaur1br5:return i.jsx(_a,{messages:e.messages,isRequestActive:d,isLastMessageInTurn:h,clientThreadId:a.id},"kaur1br5-tool-"+((De=(Ae=e.messages[0])==null?void 0:Ae.id)!=null?De:n));case t.SearchGPTQuery:{if(s.some(v=>v.type===M)&&R)return null;const _=s.slice(n+1).findLast(v=>v.type===t.Text||v.type===t.CoTSearchTool),p=o.findLast(v=>As(v).length>0),N=new Set,bs=[];for(const v of o){const X=yt(v);if(X&&X.length>0)for(const Z of X)N.has(Z)||(N.add(Z),bs.push(Z))}return i.jsx(Rs,{clientThreadId:a.id,turnIndex:b,isRequestActive:d,isLastMessage:h,isLastTurnInConversation:g,nextMessage:_==null?void 0:_.messages[0],query:ie,searchResultGroups:As(p),searchModelQueries:bs,shouldShowAnimatedBlackDot:!me.current},"searchquery-"+((Le=(Re=e.messages[0])==null?void 0:Re.id)!=null?Le:n))}case t.StructuredThoughts:return null;case t.ReasoningRecap:return null;case t.n7jupd:return null;case t.n7jupd_native_api_tool:case t.n7jupd_a:case t.n7jupd_x:return null;case t.a8km123:{if(!e.messages.every(_=>{var p;return!((p=_.metadata)!=null&&p.reasoning_status)})){const _=ae(o,p=>p.author.role===xt.Assistant&&p.recipient==="all");return i.jsx(Sa,{conversation:a,turnIndex:b,isStreaming:(h||_<n)&&m,isFinalAssistantTurn:T,messages:e.messages},"sum-"+((Me=(ke=e.messages[0])==null?void 0:ke.id)!=null?Me:n))}return i.jsx(Ia,{messages:e.messages,isStreaming:h&&m,isCompletionRequestInProgress:m,hasActiveRequest:d,isLastMessage:h,isFinalTurn:g,isFeedbackEnabled:u,conversation:a,currentGroupedMessageIndex:n,turnIndex:b},"sum-"+((Oe=(Be=e.messages[0])==null?void 0:Be.id)!=null?Oe:n))}case t.f959b8c:return Us(),null;case t.is_loading_message:if(h&&m){const l=e.messages[0],_=ee(l);return i.jsx($t,{text:_},"loading-message-"+n)}else return null;case t.b47u8ra0_t:{const l=e.messages[0],_="Reference Browser Memories?",p=ee(l);return i.jsx(Qt,{title:_,description:p,settingsTab:(Ne=(Ve=l.metadata)==null?void 0:Ve.b47u8ra0_t)!=null?Ne:"general",clientThreadId:a.id,parentMessageId:l.id},"b47u8ra0_t-"+n)}case t.l1p9k3u:return null;case t.b1de6e2_c:return i.jsx(Ft,{messages:e.messages,clientThreadId:a.id,isLastMessage:h},"b1de6e2-"+((Fe=(ze=e.messages[0])==null?void 0:ze.id)!=null?Fe:n));case t.b1de6e2_s:return i.jsx(zt,{messages:e.messages,clientThreadId:a.id},"b1de6e2_s-"+(($e=(Qe=e.messages[0])==null?void 0:Qe.id)!=null?$e:n));case t.b1de6e2_d:return null;case t.b1de6e2_rm:return i.jsx(Nt,{messages:e.messages,clientThreadId:a.id,renderingView:A,children:k},"b1de6e2_rm-"+((We=(Je=e.messages[0])==null?void 0:Je.id)!=null?We:n));case t.async_task_result_message:return i.jsx(Vt,{clientThreadId:a.id,messages:e.messages,children:k},"async_task_result_message-"+((Ke=(Ue=e.messages[0])==null?void 0:Ue.id)!=null?Ke:n));case t.de1d73e:if(Qs){const l=n+1<r.length?r[n+1]:void 0;return i.jsx(wa,{clientThreadId:a.id,currentGroupedMessage:e,nextMessage:l&&l.type===t.Text?l.messages[0]:void 0,isLastMessage:h,isRequestActive:d},"jawbone-"+((Xe=(He=e.messages[0])==null?void 0:He.id)!=null?Xe:n))}else return null;case t.ParallelBrowsing:return i.jsx(fa,{messages:e.messages},"parallel-"+((Ye=(Ze=e.messages[0])==null?void 0:Ze.id)!=null?Ye:n));case t.CodeInterpreter:return i.jsx(ja,{messages:e.messages,isRequestActive:d,clientThreadId:a.id},"ada-"+((Ge=(qe=e.messages[0])==null?void 0:qe.id)!=null?Ge:n));case t.UserSettings:{const l=n+1<r.length?r[n+1]:void 0;return(l==null?void 0:l.type)===t.UserSettings?null:i.jsx(Ot,{messages:e.messages,isRequestActive:d},"user-settings-"+((ss=(es=e.messages[0])==null?void 0:es.id)!=null?ss:n))}case t.q7dr546:return i.jsx(Bt,{messages:e.messages,isLastMessage:h,nextMessage:E},"q7dr546-"+((as=(ts=e.messages[0])==null?void 0:ts.id)!=null?as:n));case t.DILWidget:{const l=e.messages[0],_=(is=l==null?void 0:l.metadata)==null?void 0:is.chatgpt_sdk,p=_==null?void 0:_.dil,N=(ns=_==null?void 0:_.tool_response_metadata)==null?void 0:ns.kakao_widget;return N?i.jsx("div",{children:i.jsx(Mt,{rootWidget:N,dil:p})},"dil-".concat((os=l==null?void 0:l.id)!=null?os:n)):null}case t.JITPlugin:return i.jsx(xa,{messages:e.messages,nextMessage:(E==null?void 0:E.type)===t.JITPlugin?E.messages[0]:void 0,clientThreadId:a.id,isLastTurnInConversation:g,isLastMessageInTurn:h,onRequestCompletion:w},"jit-"+((ls=(rs=e.messages[0])==null?void 0:rs.id)!=null?ls:n));case t.Mercury:return null;case t.APIToolElicitation:return i.jsx(ya,{messages:e.messages,nextMessage:(E==null?void 0:E.type)===t.APIToolElicitation?E.messages[0]:void 0,clientThreadId:a.id,isLastTurnInConversation:g,isLastMessageInTurn:h,onRequestCompletion:w},"api-tool-elicitation-"+((ds=(cs=e.messages[0])==null?void 0:cs.id)!=null?ds:n));case t.t2uay3k:return i.jsx(ua,{messages:e.messages,clientThreadId:a.id,isParagen:j,isLastTurnInConversation:g},"t2uay3k-"+((gs=(ms=e.messages[0])==null?void 0:ms.id)!=null?gs:n));case t.Dalle:return i.jsx(da,{messages:e.messages,clientThreadId:a.id,disableClickThru:j},"dalle-"+((fs=(us=e.messages[0])==null?void 0:us.id)!=null?fs:n));case t.GizmoEditor:return i.jsx(ra,{messages:e.messages},"gizmo-editor-"+((_s=(hs=e.messages[0])==null?void 0:hs.id)!=null?_s:n));case t.oiw209h:return i.jsx(ma,{messages:e.messages,clientThreadId:a.id},"oiw209h-"+((xs=(Ts=e.messages[0])==null?void 0:Ts.id)!=null?xs:n));case t.n7jupd_p:return i.jsx(kt,{});case t.Canmore:return i.jsx(Lt,{messages:e.messages,allTurnMessages:o,isFinalTurn:g,isRequestActive:P,clientThreadId:a.id,isUserTurn:c},"canmore-"+((js=(ys=e.messages[0])==null?void 0:ys.id)!=null?js:n));case t.Container:case t.Oboe:return null;case t.Croquette:return null;case t.Debug:return oe?i.jsx(la,{message:e.messages[0]},"debug-"+e.messages[0].id):null;case t.SearchResult:return i.jsx(Ta,{messages:e.messages},"search-result-"+((Ss=(Is=e.messages[0])==null?void 0:Is.id)!=null?Ss:n));case t.Mochi:return null;case t.CoTSearchTool:return null;case t.SuperWidget:return null;case t.n7jupd_image_gen:return null;case t.e1ld0dvz:return null;case t.Glaux:return i.jsx(ga,{messages:e.messages,isLastMessage:h},"glaux-"+e.messages[0].id);case t.Strix:return null}}),Zs=qt(),{wordFadeType:O,animationDurationMs:ue}=Ms(),z=I.useRef([]),fe=I.useRef(void 0),he=I.useRef(null),F=!c&&g&&m,_e=(Te=o[0])==null?void 0:Te.id;return It(()=>{if(O!=="indexed"||!F)return;const e=he.current;if(!e)return;fe.current!==_e&&(fe.current=_e,z.current=[]);const n=e.getAnimations({subtree:!0}).filter(P=>P.animationName===Ls["fade-in"]);if(n.length!==0){const P=Da({now:performance.now(),previousStartTimes:z.current,groupCount:n.length});z.current=P;for(let h=0;h<n.length;h++)n[h].startTime=P[h]}else z.current=[]},[H,O,F]),i.jsx("div",{className:vs("flex max-w-full flex-col",{[Ls.root]:O==="indexed"&&F,grow:C}),style:O==="indexed"?{"--duration":"".concat(ue,"ms")}:void 0,ref:he,children:i.jsx(St,{name:"GroupedMessages",fallback:va,children:c?H:i.jsxs(Xt,{isDisabled:!F||O!=="delay",defaultAnimationDurationPerSegmentMs:ue,children:[Zt(U)&&g&&i.jsx(Yt,{isStreaming:m,debug:Zs}),H]},(xe=o[0])==null?void 0:xe.id)})})}function va({error:s}){return i.jsxs(ea,{type:"danger",children:[i.jsx(ks,{id:"5eGo3w",defaultMessage:"Unable to display this message due to an error."}),!1]})}function Aa(s,o,r){if(s.length<2||o<=0)return 0;const a=o/Math.log(2);s=[...s].sort((u,g)=>u-g);let c=0,m=0;for(let u=s.length-1;u>0;--u){const g=Math.exp(-(r-s[u])/a);if(c>0&&g/c<.01)break;const x=s[u]-s[u-1];c+=g,m+=g*x}return c===0?0:c/m}function Da({now:s,previousStartTimes:o,groupCount:r,initialRate:a=50,halfLife:c=1}){var f;const m=o.slice(0,ae(o,d=>d<=s)+1),u=m.length<2?a/1e3:Math.max(.01,Aa(m,c*1e3,s)),g=r-m.length;let x=(f=m[m.length-1])!=null?f:0,T=1;for(let d=0;d<g;d++){const w=u*1e3*T;g<w?T*=.8:g>w&&(T*=1.5);const b=1/(u*T),C=Math.max(s,x+b);m.push(C),x=C}return m}export{Oa as C,oa as T,na as a};
//# sourceMappingURL=kc32gem4l2t3hnxt.js.map
