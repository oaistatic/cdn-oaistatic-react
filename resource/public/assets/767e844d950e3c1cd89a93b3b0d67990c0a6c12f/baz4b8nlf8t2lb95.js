var C=Object.defineProperty,W=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var w=(i,e,t)=>e in i?C(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,c=(i,e)=>{for(var t in e||(e={}))G.call(e,t)&&w(i,t,e[t]);if(R)for(var t of R(e))T.call(e,t)&&w(i,t,e[t]);return i},p=(i,e)=>W(i,b(e));var g=(i,e,t)=>w(i,typeof e!="symbol"?e+"":e,t);import{aV as v,R as s,D as k}from"./d0xa318sl7ywi0za.js";import{k as f,l as y}from"./g2euln7v5pbm31qa.js";function H(i,e,t,a){switch(i.type){case"repo_not_accessible":a.danger(t.formatMessage({id:"wham.whamComposer.repoNotAccessible",defaultMessage:"Can’t access GitHub repository. Verify your repository access on GitHub, or reconnect your GitHub account in Codex Settings."}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"Can't access GitHub repository. Verify your repository access on GitHub, or reconnect your GitHub account in Codex Settings."});return;case"missing_github_connector_link":a.danger(t.formatMessage({id:"wham.whamComposer.missingGithubConnectorLink",defaultMessage:"No GitHub connection. Please reconnect your GitHub account in Codex Settings."}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"No GitHub connection. Please reconnect your GitHub account in Codex Settings."});return;case"non_terminal_turn":a.danger(t.formatMessage({id:"wham.whamComposer.nonTerminalTurn",defaultMessage:"Task already has a running turn"}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"Task already has a running turn"});return;case"repo_not_initialized":a.danger(t.formatMessage({id:"wham.whamComposer.repoNotInitialized",defaultMessage:"GitHub Repository must be initialized to be used within Codex"}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"GitHub Repository must be initialized to be used within Codex"});return;case"environment_invalid_email":{const n=(Array.isArray(i.payload.invalid_emails)?i.payload.invalid_emails:[]).join(", "),o=n?t.formatMessage({id:"wham.whamRequests.environmentInvalidEmailWithList",defaultMessage:"Some share target emails aren't part of this workspace: {emails}"},{emails:n}):t.formatMessage({id:"wham.whamRequests.environmentInvalidEmailBase",defaultMessage:"Some share target emails aren't part of this workspace. Update the list and try again."});a.danger(o,{id:e,duration:8,hasCloseButton:!0,loggingTitle:n?"Invalid workspace emails: ".concat(n):"Stale environment update"});return}case"environment_stale_update":a.danger(t.formatMessage({id:"wham.whamRequests.environmentStaleUpdate",defaultMessage:"This environment changed while you were editing. Refresh and try again."}),{id:e,duration:8,hasCloseButton:!0,loggingTitle:"This environment changed while you were editing. Refresh and try again."});return;case"environment_repo_access_failed":a.danger(t.formatMessage({id:"wham.whamRequests.environmentRepoAccessFailed",defaultMessage:"Codex can’t access this GitHub repository. Check the repository’s Codex installation and permissions, then try again."}),{id:e,duration:8,hasCloseButton:!0,loggingTitle:"Codex can’t access this GitHub repository. Check the repository’s Codex installation and permissions, then try again."});return;case"branch_creation_not_allowed":a.danger(t.formatMessage({id:"wham.whamComposer.branchCreationNotAllowed",defaultMessage:"Branch creation unauthorized for this repository. Please check your GitHub permissions."}),{loggingTitle:"Branch creation unauthorized for this repository. Please check your GitHub permissions."});return;case"pull_request_not_allowed":a.danger(t.formatMessage({id:"wham.whamComposer.pullRequestNotAllowed",defaultMessage:"Repository does not allow pull requests from Codex. Please check your GitHub permissions."}),{loggingTitle:"Repository does not allow pull requests from Codex. Please check your GitHub permissions."});return;case"verified_commits_required":a.danger(t.formatMessage({id:"wham.whamComposer.verifiedCommitsRequired",defaultMessage:"Codex does not currently support PRs in repositories that require verified commits"}),{loggingTitle:"Codex does not currently support PRs in repositories that require verified commits"});return;case"binary_files_not_supported":a.danger(t.formatMessage({id:"wham.whamComposer.binaryFilesNotSupported",defaultMessage:"Binary files are not supported"}),{id:e,duration:10,hasCloseButton:!0});return;case"commit_pattern_required":a.danger(t.formatMessage({id:"wham.whamComposer.commitPatternRequired",defaultMessage:"Commit message must match a given regex pattern"}),{id:e,duration:10,hasCloseButton:!0});return;case"pull_request_updated_outside_of_codex":a.danger(t.formatMessage({id:"wham.whamComposer.pullRequestUpdatedOutsideOfCodex",defaultMessage:"Codex does not currently support updating PRs that are updated outside of Codex. For now, please create a new PR."}),{id:e,duration:10,hasCloseButton:!0});return;case"pull_request_not_open":a.danger(t.formatMessage({id:"wham.whamComposer.pullRequestNotOpen",defaultMessage:"Pull request is no longer open. Refreshing status…"}),{id:e,duration:10,hasCloseButton:!0});return;case"branch_no_longer_exists":a.danger(t.formatMessage({id:"wham.whamComposer.branchNoLongerExists",defaultMessage:"Existing PR branch appears to no longer exist. Please create a new PR."}),{id:e,duration:10,hasCloseButton:!0});return;case"pull_request_not_found_on_task":a.danger(t.formatMessage({id:"wham.whamComposer.pullRequestNotFoundOnTask",defaultMessage:"Pull request not found for task"}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"Binary files are not supported"});return;default:return a.danger(i.payload.message,{id:e,duration:5,hasCloseButton:!0}),null}}class P extends v{constructor(t,a,r,n,o){super(t.message,a,r,n,o);g(this,"type");g(this,"payload");this.type=t.type,this.payload=t}}function x(i){const e=i.detail;if(e&&typeof e.type=="string"&&typeof e.message=="string"){const t={type:e.type,message:e.message};throw Object.entries(e).forEach(([a,r])=>{a==="type"||a==="message"||(t[a]=r)}),new P(t,i.status,{},i.requestId,i.rawError)}throw i}class q{static async _wrapWhamRequest(e){try{return await e()}catch(t){throw t instanceof v&&x(t),t}}static getTasks(e=10,t=null,a="current"){return this._wrapWhamRequest(()=>s.safeGet("/wham/tasks",{parameters:{query:{limit:e,cursor:t,task_filter:a}}}))}static getTasksForList(e=10,t=null,a="current"){return this._wrapWhamRequest(()=>s.safeGet("/wham/tasks/list",{parameters:{query:{limit:e,cursor:t,task_filter:a}}}))}static getTaskDetails(e){return this._wrapWhamRequest(()=>s.safeGet("/wham/tasks/{task_id}",{parameters:{path:{task_id:e}}}))}static getTaskTurnPR(e,t){return this._wrapWhamRequest(()=>s.safeGet("/wham/tasks/{task_id}/turns/{task_turn_id}/pr",{parameters:{path:{task_id:e,task_turn_id:t}}}))}static getUserHandle(){return this._wrapWhamRequest(()=>s.safeGet("/wham/task_suggestions/github/user_handle",{}))}static getTaskTurn(e,t){return this._wrapWhamRequest(()=>s.safeGet("/wham/tasks/{task_id}/turns/{task_turn_id}",{parameters:{path:{task_id:e,task_turn_id:t}}}))}static getRateLimitStatus(){return this._wrapWhamRequest(()=>s.safeGet("/wham/usage",{}))}static getDailyTokenUsageBreakdown(){return this._wrapWhamRequest(()=>s.safeGet("/wham/usage/daily-token-usage-breakdown",{}))}static getDailyEnterpriseTokenUsageBreakdown(){return this._wrapWhamRequest(()=>s.safeGet("/wham/usage/daily-enterprise-token-usage-breakdown",{}))}static getCreditUsageEvents(){return this._wrapWhamRequest(()=>s.safeGet("/wham/usage/credit-usage-events",{}))}static getLatestTaskTurns(e,t){return this._wrapWhamRequest(()=>s.safeGet("/wham/tasks/{task_id}/turns/{task_turn_id}/latest_turn",{parameters:{path:{task_id:e,task_turn_id:t}}}))}static getGithubInstallations(){return this._wrapWhamRequest(()=>s.safeGet("/wham/github/installations",{}))}static getGithubInstallationsV2(){return this._wrapWhamRequest(()=>s.safeGet("/wham/github/installations/v2",{}))}static getGithubInstallationEvents(){return this._wrapWhamRequest(()=>s.safeGet("/wham/github/installations/events",{}))}static getGithubInstallationEventsV2(){return this._wrapWhamRequest(()=>s.safeGet("/wham/github/installations/events/v2",{}))}static feedback({thumbRating:e,text:t,taskId:a,turnId:r,shareUrl:n,pullRequestUrl:o,category:d}){return this._wrapWhamRequest(()=>s.safePost("/wham/feedback",{requestBody:{thumb_rating:e,text:t,conversation_id:null,message_id:null,task_id:a,turn_id:r,share_url:n,pull_request_url:o,category:d}}))}static archiveTask(e){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/archive",{parameters:{path:{task_id:e}}}))}static recoverTask(e){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/recover",{parameters:{path:{task_id:e}}}))}static updatePr(e,t,a){return this._wrapWhamRequest(()=>s.safePatch("/wham/tasks/{task_id}/turns/{task_turn_id}/pr/{pr_id}",{parameters:{path:{task_id:e,task_turn_id:t,pr_id:a}}}))}static createPr(e,t,a,r){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/pr",{parameters:{path:{task_id:e,task_turn_id:t}},requestBody:{mode:a,add_codex_tag:r}}))}static getRepositoriesByInstallationId(e,t,a){return this._wrapWhamRequest(()=>s.safeGet("/wham/github/repositories/v2/{installation_id}",{parameters:{path:{installation_id:e},query:{page:t,per_page:a}}}))}static searchRepositories(e){var a,r;const t=p(c({},e),{per_page:(a=e.per_page)!=null?a:20,page:(r=e.page)!=null?r:1});return this._wrapWhamRequest(()=>s.safeGet("/wham/github/repositories/search",{parameters:{query:t}}))}static searchRepositoriesAllInstallations(e){return this._wrapWhamRequest(()=>{var t;return s.safeGet("/wham/github/repositories/search/all-installations",{parameters:{query:p(c({},e),{page:(t=e.page)!=null?t:1})}})})}static listRepositories(e){return this._wrapWhamRequest(()=>s.safeGet("/wham/github/list-repositories",{parameters:{query:e}}))}static getSampleTasks(e=20,t=null){return this._wrapWhamRequest(()=>s.safeGet("/share/codex/task_samples",{parameters:{query:{limit:e,cursor:t}}}))}static getRepository(e){return this._wrapWhamRequest(()=>s.safeGet("/wham/github/repositories/{repo_id}",{parameters:{path:{repo_id:e}}}))}static getUserPullRequests(e,{limit:t=20,state:a="open",includeDiff:r=!1,includeComments:n=!1}={}){return this._wrapWhamRequest(()=>s.safeGet("/wham/github/repositories/{repo_id}/pull-requests",{parameters:{path:{repo_id:e},query:{limit:t,state:a,include_diff:r,include_comments:n}}}))}static searchBranchesByRepository(e,t,a=10,r=null){return this._wrapWhamRequest(()=>s.safeGet("/wham/github/branches/{repo_id}/search",{parameters:{path:{repo_id:e},query:{query:t,page_size:a,cursor:r}}}))}static getEnvironmentWithCreatorAndMachine(e){return this._wrapWhamRequest(()=>s.safeGet("/wham/environments/{environment_id}/with-creator-and-machine",{parameters:{path:{environment_id:e}}}))}static getEnvironmentWithCreators(e=10,t=null,a=!1){return this._wrapWhamRequest(()=>s.safeGet("/wham/environments/with-creators",{parameters:{query:{limit:e,cursor:t,enforce_repo_access:a}}}))}static updateEnvironment(e,t){return this._wrapWhamRequest(()=>s.safePatch("/wham/environments/{environment_id}",{parameters:{path:{environment_id:e}},requestBody:t}))}static deleteEnvironment(e){return this._wrapWhamRequest(()=>s.safeDelete("/wham/environments/{environment_id}",{parameters:{path:{environment_id:e}}}))}static getEnvironments(){return this._wrapWhamRequest(()=>s.safeGet("/wham/environments",{}))}static getRecentEnvironments(){return this._wrapWhamRequest(()=>s.safeGet("/wham/environments/recent",{}))}static getMachines(){return this._wrapWhamRequest(()=>s.safeGet("/wham/machines",{}))}static createEnvironment(e){var o,d;const t=e.envVars.reduce((u,h)=>(u[h.key]=h.value,u),{}),a=e.secrets.reduce((u,h)=>(u[h.key]=h.value,u),{}),r=(d=(o=e.share_targets)==null?void 0:o.map(u=>u.trim()))==null?void 0:d.filter(Boolean),n=e.share_settings==="private"?[]:r==null?void 0:r.map(u=>({email:u,permission:"editor",type:"user"}));return this._wrapWhamRequest(()=>s.safePost("/wham/environments",{requestBody:{label:e.label,machine_id:e.machine,repos:[e.repositoryId],description:e.description,setup:e.setupCommands,maintenance_setup:e.maintenanceSetupCommands,workspace_dir:e.workspaceDirectory,agent_network_access:e.agentNetworkAccess,share_settings:e.share_settings,share_targets:n,env_vars:t,secrets:a,auto_setup_settings:e.autoSetupSettings,cache_settings:e.cacheSettings}}))}static runEnvironmentTestCommand(e){return this._wrapWhamRequest(()=>s.safePost("/wham/environments/test/{test_session_id}/command",{parameters:{path:{test_session_id:e.testSessionId}},requestBody:{command:e.command}}))}static getUserPreferences(){return this._wrapWhamRequest(()=>s.safeGet("/wham/settings/user",{}))}static getUserPreferencesConfig(){return this._wrapWhamRequest(()=>s.safeGet("/wham/settings/configs/user-preferences",{}))}static getCodeReviewRepositories({page:e=1,perPage:t=100,search:a,nextToken:r}){return this._wrapWhamRequest(()=>s.safeGet("/wham/settings/code_review",{parameters:{query:{page:e,per_page:t,search:a,next_token:r}}}))}static searchCodeReviewRepositories({query:e,limit:t,installationIds:a,page:r}){return this._wrapWhamRequest(async()=>await s.safeGet("/wham/settings/code_review_search",{parameters:{query:{query:e,limit:t,installation_ids:a,page:r!=null?r:1}}}))}static getCodeReviewRepository(e,t){return this._wrapWhamRequest(()=>s.safeGet("/wham/settings/code_review/{repo_id}",{parameters:{path:{repo_id:"".concat(e,"-").concat(t)}}}))}static updateCodeReviewRepositories(e){return this._wrapWhamRequest(()=>s.safePatch("/wham/settings/code_review",{requestBody:e}))}static updateUserPreferences(e){return this._wrapWhamRequest(()=>s.safePatch("/wham/settings/user",{requestBody:{branch_format:e.branchFormat,git_diff_mode:e.diffView,custom_instructions:e.customInstructions,code_review_preference:e.codeReviewPreference,alpha_opt_in:e.alphaOptIn,allow_credits_for_code_reviews:e.allowCreditsForCodeReviews}}))}static getTurns(e){return this._wrapWhamRequest(()=>s.safeGet("/wham/tasks/{task_id}/turns",{parameters:{path:{task_id:e}}}))}static getTurnLogs(e,t){return this._wrapWhamRequest(()=>s.safeGet("/wham/tasks/{task_id}/turns/{task_turn_id}/logs",{parameters:{path:{task_id:e,task_turn_id:t}}}))}static async createNewTask(e,t,a,r=!1,n,o=[],d=[]){const h=[{type:"message",role:"user",content:[{content_type:"text",text:a}]},...o,...d],_=await f("codex_create_task_turn").catch(m=>{k.addError(m)}),l=y(null,null,null,_);return this._wrapWhamRequest(()=>s.safePost("/wham/tasks",{requestBody:p(c({new_task:{environment_id:e,branch:t,run_environment_in_qa_mode:r}},n?{metadata:{best_of_n:n}}:{}),{input_items:h}),additionalHeaders:l}))}static async createFixReviewTask(e,t){const a=await f("codex_create_task_turn").catch(n=>{k.addError(n)}),r=y(null,null,null,a);return this._wrapWhamRequest(async()=>{const n={review_fix:{task_id:e,turn_id:t},input_items:[]};return await s.safePost("/wham/tasks",{requestBody:n,additionalHeaders:r})})}static async createNewTaskWithEditedPrompt(e,t,a,r,n=!1){const o=await q.createNewTask(t,a,r,n);return q.archiveTask(e).catch(()=>{}),o}static createCodeReviewTask({installationId:e,repoId:t,prNumber:a}){return this._wrapWhamRequest(()=>s.safePost("/wham/github/installations/{installation_id}/repositories/{repo_id}/pull-request/{pr_number}/task",{parameters:{path:{installation_id:e,repo_id:t,pr_number:a}},requestBody:{action:"review"}}))}static createCodeReviewTasksForOpenPullRequests({installationId:e,repoId:t,limit:a=10}){const r=Math.min(Math.max(a!=null?a:10,1),10);return this._wrapWhamRequest(()=>s.safePost("/wham/github/installations/{installation_id}/repositories/{repo_id}/pull-requests/review",{parameters:{path:{installation_id:e,repo_id:t}},requestBody:{action:"review",limit:r}}))}static async createFollowUpTask(e,t,a,r,n=!1,o=1,d=[]){const h=[{type:"message",role:"user",content:[{content_type:"text",text:a}]},...d];r.forEach(m=>{h.push({type:"comment",position:m.position,content:m.content})});const _=await f("codex_create_task_turn").catch(m=>{k.addError(m)}),l=y(null,null,null,_);return this._wrapWhamRequest(()=>s.safePost("/wham/tasks",{requestBody:{follow_up:{task_id:e,turn_id:t,run_environment_in_qa_mode:n},metadata:{best_of_n:o},input_items:h},additionalHeaders:l}))}static cancelTurnDeprecated(e,t){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/cancel",{parameters:{path:{task_id:e,task_turn_id:t}}}))}static cancelTask(e){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/cancel",{parameters:{path:{task_id:e}}}))}static markTurnAsRead(e){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/mark_read",{parameters:{path:{task_id:e}}}))}static markTurnViewed(e,t){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/viewed",{parameters:{path:{task_id:e,task_turn_id:t}}}))}static discardTurn(e,t){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/discard",{parameters:{path:{task_id:e,task_turn_id:t}}}))}static undoDiscardedTurns(e,t){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/undo_all_discards_for_siblings",{parameters:{path:{task_id:e,task_turn_id:t}}}))}static copyGitApply(e,t,a){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/copy_git_apply",{parameters:{path:{task_id:e,task_turn_id:t}},requestBody:{includes_apply_command:a}}))}static forkSharedTask(e){return this._wrapWhamRequest(()=>s.safePost("/wham/tasks/{task_id}/fork",{parameters:{path:{task_id:e}}}))}static invalidateEnvironmentCache(e){return this._wrapWhamRequest(()=>s.safePost("/wham/environments/{environment_id}/reset-cache",{parameters:{path:{environment_id:e}}}))}static getDailyCodeReviewCounts(){return this._wrapWhamRequest(()=>s.safeGet("/wham/analytics/daily-code-review-counts",{}))}static getDailyCodeReviewMetrics(){return this._wrapWhamRequest(()=>s.safeGet("/wham/analytics/daily-code-review-metrics",{}))}static getDailyWebTaskCounts(){return this._wrapWhamRequest(()=>s.safeGet("/wham/analytics/daily-web-task-counts",{}))}static getDailyCliVsCodeUsageCounts(){return this._wrapWhamRequest(()=>s.safeGet("/wham/analytics/daily-cli-vscode-usage-counts",{}))}static getDailySessionsMessagesCounts(){return this._wrapWhamRequest(()=>s.safeGet("/wham/analytics/daily-sessions-messages-counts",{}))}static getApproximateCreditUsage(e){return this._wrapWhamRequest(()=>s.safeGet("/wham/usage/approximate-credit-usage",{parameters:{query:{credit_amount:e}}}))}}export{q as W,P as a,H as w};
//# sourceMappingURL=baz4b8nlf8t2lb95.js.map
