var h=Object.defineProperty;var i=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var w=(a,n,e)=>n in a?h(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e,u=(a,n)=>{for(var e in n||(n={}))g.call(n,e)&&w(a,e,n[e]);if(i)for(var e of i(n))B.call(n,e)&&w(a,e,n[e]);return a};import{y as b,a1 as I,j as y,r as P,A as f}from"./mw35uwhq4g8r9eam.js";import{u as k,D as o,pW as C}from"./d0xa318sl7ywi0za.js";import{bW as F}from"./g2euln7v5pbm31qa.js";const m=async a=>{await f.signOut({callbackUrl:a}),C()},x=(a,n)=>{m(a).then(()=>o.addTiming("chatgpt.web.logout.shouldClearIndexedDB")).catch(e=>{o.addError(new Error("Failed to logout",{cause:e}))})};function $({federatedLogoutUri:a}){const n=k(),{isFannyPackInitializerEnabled:e}=F(n);return P.useEffect(()=>{const d=a!=null?a:window.location.origin;window&&window.indexedDB&&e&&typeof window.indexedDB.databases=="function"?(o.addAction("chatgpt.web.logout.clearIndexedDB"),(async()=>{const D=(await window.indexedDB.databases()).map(t=>new Promise((s,p)=>{if(t.name){const r=window.indexedDB.deleteDatabase(t.name);r.onsuccess=()=>s(),r.onerror=E=>{o.addError(new Error("Delete IndexedDB failed for database ".concat(t.name,", ").concat(E))),p()},r.onblocked=()=>{o.addError(new Error("Delete IndexedDB blocked for database ".concat(t.name))),s()}}else o.addError(new Error("Invalid database name ".concat(t.name))),s()}));await Promise.all(D)})().then(()=>{o.addTiming("chatgpt.web.logout.clearedIndexedDB"),x(d)}).catch(l=>{o.addError(new Error("Failed to clear IndexedDB",{cause:l})),x(d)})):m(a!=null?a:window.location.origin).catch(c=>o.addError(new Error("Failed to logout",{cause:c})))},[e,a]),null}const T=b(function(){const n=I();return y.jsx($,u({},n))});export{T as default};
//# sourceMappingURL=bt2zi5exjfwxepqt.js.map
