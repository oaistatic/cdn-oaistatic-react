import{r as a,j as m}from"./mw35uwhq4g8r9eam.js";import{u as x,eX as g,cu as P,O as N,aS as w,mu as A,mw as V,U as F,bj as M,g as k,V as C,P as b,mv as _,D as j}from"./d0xa318sl7ywi0za.js";import{ih as E,ii as I,hQ as U,bs as z}from"./g2euln7v5pbm31qa.js";import{s as D}from"./kcp2yv1bqmcmvayq.js";import{A as T,V as $}from"./cqx93c5pkivgew50.js";import"./m5sda7xm07jfoae1.js";import"./ijdqyl9jxs7ef116.js";import"./ehb03yyzqhj5ry6r.js";import"./ftef8970ba1zoykr.js";import"./ogbjm0vfqkwhvkb8.js";const y=()=>{const e=E();return a.useCallback(t=>{D.set(t),e.setState({isVoiceModeActive:!0})},[e])};function G(){const e=U(z.hasSeenAdvancedVoiceNuxFullPage);return!e.isLoading&&e.eligible}function J({clientThreadId:e}){const t=x(),c=g(o=>o.showVoicePicker),f=g(o=>o.showVoiceNuxFullPage),i=P(e),s=i!=null?i:e,r=!N(t),{setValue:n}=I(w.VoiceName),u=G(),d=A(),l=y();return a.useEffect(()=>{const o=sessionStorage.getItem("selectedVoiceName"),S=h=>{const v=F(()=>M(k(t,s)).id);try{sessionStorage.removeItem("selectedVoiceName"),l({voice:h,conversation_id:void 0,eventSource:"login_page",voice_mode:"advanced",clientThreadId:_(),gizmo_id:C.getGizmoId(b(s)),requested_default_model:v,skipCacheReason:"login-direct-to-voice-mode"})}catch(p){j.addError("Failed to start voice mode after voice picker: ".concat(p),{protocol:d})}};o&&!r&&(n(o),S(o))},[t,s,r,n,l,d]),a.useEffect(()=>{u||V({showVoiceNuxFullPage:!1})},[u]),f?m.jsx(T,{conversationId:s}):c?m.jsx($,{isOpen:c,onClose:()=>{V({showVoicePicker:!1})},conversationId:s,cameFromNux:!0}):null}export{J as VoiceModals};
//# sourceMappingURL=m2b14u84s20zvzl4.js.map
