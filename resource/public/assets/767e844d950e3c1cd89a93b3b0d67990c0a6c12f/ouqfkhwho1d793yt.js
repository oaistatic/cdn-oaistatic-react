var Le=Object.defineProperty,Re=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Ue=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var Te=(t,e,s)=>e in t?Le(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,d=(t,e)=>{for(var s in e||(e={}))Ue.call(e,s)&&Te(t,s,e[s]);if(ve)for(var s of ve(e))ze.call(e,s)&&Te(t,s,e[s]);return t},k=(t,e)=>Re(t,Be(e));import{e as ue,j as a,M as x,c as V,h as fe,r as U}from"./mw35uwhq4g8r9eam.js";import{d$ as D,jf as Fe,mk as le,er as Ke,e7 as Ve,u as ce,d as Ee,s_ as Ge,ee as ke,J as K,aA as we,fz as We,cF as de,cw as qe,cI as Ye,p as He,tW as Je,gp as Qe,b9 as Xe,aB as $e,e1 as Ze,tX as et,aV as tt}from"./d0xa318sl7ywi0za.js";import{cg as ie,A as at,bB as st,z as ot,ay as nt,p9 as Se,at as rt}from"./g2euln7v5pbm31qa.js";import{S as it}from"./f1b2o8cofuf894iu.js";import{I as te}from"./pbx1h703pubtj7lo.js";import{u as lt}from"./c08xobknzytt16by.js";import{u as ct}from"./iio0zgk2sqlxbcjy.js";const g=ue({appVersion:{id:"v1ZDFs",defaultMessage:"Version name"},appVersionId:{id:"O1JjS2",defaultMessage:"Version Id"},appVersionNotes:{id:"oseCth",defaultMessage:"Version notes"},appReviewStatus:{id:"xE4C7M",defaultMessage:"Review status"},category:{id:"XG1+sz",defaultMessage:"Category"},subcategory:{id:"NiXO1S",defaultMessage:"Subcategory"},createdAtLabel:{id:"a7VJd0",defaultMessage:"Created at"},connectedOnLabel:{id:"YQAQMf",defaultMessage:"Connected on"},developer:{id:"6JoJBm",defaultMessage:"Developer"},website:{id:"8Qxsof",defaultMessage:"Website"},privacyPolicy:{id:"diKoqe",defaultMessage:"Privacy Policy"},landingPageTitle:{id:"eYNUhF",defaultMessage:"Landing Page"},termsOfService:{id:"NfU0SI",defaultMessage:"Terms of Service"},categoryBusinessAndAnalytics:{id:"QhPypU",defaultMessage:"Business and Analytics"},categoryCreativityAndDesign:{id:"/bcuXB",defaultMessage:"Creativity and Design"},categoryDeveloperTools:{id:"15wsiU",defaultMessage:"Developer Tools"},categoryMessagingAndSocial:{id:"rBRiVM",defaultMessage:"Messaging and Social"},categoryProductivity:{id:"UH2JU4",defaultMessage:"Productivity"},categoryResearchAndKnowledge:{id:"WKfdK1",defaultMessage:"Research and Knowledge"},baseUrl:{id:"XOcfO/",defaultMessage:"URL"},safetyScanTitle:{id:"1IzOM7",defaultMessage:"Safety Scan"},safetyScanScanningStatus:{id:"YfgX5F",defaultMessage:"Scanning"},safetyScanPassed:{id:"UrwyRa",defaultMessage:"Passed"},safetyScanSoftBlocked:{id:"bQN4n9",defaultMessage:"Warning"},safetyScanFailed:{id:"FeaZe+",defaultMessage:"Failed"},authorizationSupported:{id:"oA2ynd",defaultMessage:"Authorization supported"},linkAuthorizationType:{id:"39RCjo",defaultMessage:"Authorization used"},authorizationTypeOAuth:{id:"VsekFo",defaultMessage:"OAuth"},authorizationTypeApiKey:{id:"1WrvLC",defaultMessage:"API key"},authorizationTypeNone:{id:"ETv4pb",defaultMessage:"None"}}),dt=(t,e)=>{switch(t){case"BUSINESS_AND_ANALYTICS":return e.formatMessage(g.categoryBusinessAndAnalytics);case"CREATIVITY_AND_DESIGN":return e.formatMessage(g.categoryCreativityAndDesign);case"DEVELOPER_TOOLS":return e.formatMessage(g.categoryDeveloperTools);case"MESSAGING_AND_SOCIAL":return e.formatMessage(g.categoryMessagingAndSocial);case"PRODUCTIVITY":return e.formatMessage(g.categoryProductivity);case"RESEARCH_AND_KNOWLEDGE":return e.formatMessage(g.categoryResearchAndKnowledge);default:return null}},ut=t=>!t||typeof t!="object"?null:"type"in t&&t.type?t.type:"header_scheme"in t?"API_KEY":"authorization_url"in t?"OAUTH":"NONE",Ae=(t,e)=>{switch(t){case"OAUTH":return e.formatMessage(g.authorizationTypeOAuth);case"API_KEY":return e.formatMessage(g.authorizationTypeApiKey);case"NONE":return e.formatMessage(g.authorizationTypeNone)}return t},Rt=(t,e,s)=>{var C,h,f,M,T,E,z;const o=s==null?void 0:s.linkAuthType,r=[],m=dt((C=t.branding)==null?void 0:C.category,e);if(m&&r.push({title:e.formatMessage(g.category),value:m}),(h=t.branding)!=null&&h.developer&&r.push({title:e.formatMessage(g.developer),value:t.branding.developer}),(f=t.branding)!=null&&f.website&&r.push({title:e.formatMessage(g.website),value:a.jsx(D,{href:t.branding.website,openNewTab:!0,underline:!1,"aria-label":e.formatMessage(g.website),className:"text-blue-400",children:a.jsx(ie,{className:"icon"})})}),(M=t.branding)!=null&&M.privacy_policy&&r.push({title:e.formatMessage(g.privacyPolicy),value:a.jsx(D,{href:t.branding.privacy_policy,openNewTab:!0,underline:!1,"aria-label":e.formatMessage(g.privacyPolicy),className:"text-blue-400",children:a.jsx(ie,{className:"icon"})})}),(T=t.branding)!=null&&T.terms_of_service&&r.push({title:e.formatMessage(g.termsOfService),value:a.jsx(D,{href:t.branding.terms_of_service,openNewTab:!0,underline:!1,"aria-label":e.formatMessage(g.termsOfService),className:"text-blue-400",children:a.jsx(ie,{className:"icon"})})}),["MCP","OPEN_API"].includes(t.connector_type)&&t.base_url&&(!((E=t.branding)!=null&&E.is_discoverable_app)||s!=null&&s.ecosystemDebugShowAppUrlsInSettings)&&r.push({title:e.formatMessage(g.baseUrl),value:t.base_url}),t.policy_info){const v=t.policy_info.safety_status==="SCANNED_OK"?a.jsx(Fe,{className:"icon-sm text-token-text-primary"}):t.policy_info.safety_status==="SCANNED_BLOCKED"?a.jsx(le,{className:"icon-sm interactive-label-warning-secondary"}):t.policy_info.safety_status==="SCANNED_SOFT_BLOCKED"?a.jsx(le,{className:"icon-sm interactive-label-warning-secondary"}):a.jsx(Ke,{className:"icon-sm"}),G=t.policy_info.safety_status==="SCANNED_OK"?a.jsx(x,d({},g.safetyScanPassed)):t.policy_info.safety_status==="SCANNED_BLOCKED"?a.jsx(x,d({},g.safetyScanFailed)):t.policy_info.safety_status==="SCANNED_SOFT_BLOCKED"?a.jsx(x,d({},g.safetyScanSoftBlocked)):a.jsx(x,d({},g.safetyScanScanningStatus));t.policy_info.safety_status!=="SCANNED_OK"&&r.push({title:e.formatMessage(g.safetyScanTitle),value:a.jsxs("span",{className:"flex items-center gap-1",children:[v,G]})})}if(!(s!=null&&s.isDeveloperMode))return r;const c=((z=t.supported_auth)!=null?z:[]).map(v=>ut(v)).filter(v=>!!v),n=Array.from(new Set(c)),u=(n.length>0?n:["NONE"]).map(v=>Ae(v,e)),y=u.length>1?e.formatList(u):u[0];return r.push({title:e.formatMessage(g.authorizationSupported),value:y}),o&&r.push({title:e.formatMessage(g.linkAuthorizationType),value:Ae(o,e)}),t.app_metadata&&(t.app_metadata.version&&r.push({title:e.formatMessage(g.appVersion),value:t.app_metadata.version}),t.app_metadata.version_notes&&r.push({title:e.formatMessage(g.appVersionNotes),value:t.app_metadata.version_notes}),t.app_metadata.version_id&&r.push({title:e.formatMessage(g.appVersionId),value:t.app_metadata.version_id}),t.app_metadata.review&&t.app_metadata.version_id&&r.push({title:e.formatMessage(g.appReviewStatus),value:t.app_metadata.review.status.toLowerCase()})),r};function ft(t){"use forget";var s,o;const e=Ve();return!e||!t?!1:!!((s=t.owners)!=null&&s.some(r=>r.type==="USER"&&r.id===e.normalizedAccountUserId)||(e.isAdminOfAccount()||e.isOwnerOfAccount())&&((o=t.owners)!=null&&o.some(r=>r.type==="WORKSPACE"&&r.id===e.getWorkspaceId())))}const A=ue({adminConnectedDescription:{id:"PCSldL",defaultMessage:"This connector is managed by your ChatGPT administrator"},connectorDisabled:{id:"v6nWaS",defaultMessage:"This connector is not enabled for your account. Please contact your administrator to enable it."},backButton:{id:"2XH9oW",defaultMessage:"Back"},information:{id:"m6oyFG",defaultMessage:"Information"},blockItems:{id:"guxwme",defaultMessage:"Exclude items from sync"},connectButton:{id:"bQDuj2",defaultMessage:"Connect"},syncingButton:{id:"2ma+da",defaultMessage:"Syncing"},syncingTooltip:{id:"krz66p",defaultMessage:"Syncing in progress: {syncProgress}%"},syncingSecondaryTooltip:{id:"cNPAq9",defaultMessage:"Full sync can take a few hours"},lastSynced:{id:"8cO6Ez",defaultMessage:"Last synced on {lastUpdatedAt}"},refreshActionsButton:{id:"lyYLo0",defaultMessage:"Refresh"},enableSync:{id:"FQFQxe",defaultMessage:"Enable sync"},disableSync:{id:"BNY6qe",defaultMessage:"Disable sync"},disableSyncModalTitle:{id:"DGZB7x",defaultMessage:"Disable sync for {connector}?"},disableSyncModalDescription:{id:"qJQyMJ",defaultMessage:"All synced data will be deleted. If you re-enable sync, it can take 8 hours or more to sync all content."},disableSyncModalCheckboxLabel:{id:"Dl8YNg",defaultMessage:"I understand all synced data will be deleted"},disconnectButton:{id:"eeZbkM",defaultMessage:"Disconnect"},settingsButton:{id:"Z24j9e",defaultMessage:"Settings"},publishButton:{id:"5vHo1z",defaultMessage:"Publish"},manageDropdown:{id:"q/O9f7",defaultMessage:"Manage"},reportButton:{id:"R5Pd7v",defaultMessage:"Report"},reportModalTitle:{id:"6oNeBk",defaultMessage:"Report"},connectedOn:{id:"b1ykGv",defaultMessage:"Connected on"},connected:{id:"9C9A8l",defaultMessage:"Connected"},createdAt:{id:"TACRvJ",defaultMessage:"Created at"},deleteButton:{id:"Gn89FJ",defaultMessage:"Delete"},actions:{id:"K1PvPz",defaultMessage:"Actions"},readAction:{id:"OUdavU",defaultMessage:"Read"},writeAction:{id:"hfCHYo",defaultMessage:"Write"},openWorldAction:{id:"cwPgDK",defaultMessage:"Open world"},disabledAction:{id:"Bn5roC",defaultMessage:"This action is disabled"},metadataHeading:{id:"qLsGc8",defaultMessage:"Metadata"},metadataOutputTemplate:{id:"KzJNSi",defaultMessage:"Output template"},metadataToolInvokingMessage:{id:"vNFHen",defaultMessage:"Invoking message"},metadataToolInvokedMessage:{id:"BQ6rYZ",defaultMessage:"Invoked message"},metadataWidgetAccessible:{id:"hdiMx2",defaultMessage:"Widget accessible"},metadataWidgetCsp:{id:"zDrGb1",defaultMessage:"Widget CSP"},securitySchemes:{id:"xkLoDf",defaultMessage:"Security schemes"},githubInstallationAlert:{id:"V4NUT5",defaultMessage:"ChatGPT needs access to your repositories to search them."},chooseRepos:{id:"VW7eJj",defaultMessage:"Choose repositories"},preferences:{id:"7kCnYS",defaultMessage:"Preferences"},recommendConnection:{id:"XpEYQL",defaultMessage:"Connection recommendations"},recommendConnectionDescription:{id:"CH3i+a",defaultMessage:"Let ChatGPT recommend connecting to {connectorName} when responding."},allowUsingAutomatically:{id:"VaMXaj",defaultMessage:"Use automatically in chat"},allowUsingAutomaticallyDescription:{id:"IHuWia",defaultMessage:"Let ChatGPT reference {connectorName} automatically when responding."},toolPersonalizationDebugHeading:{id:"lMPDuF",defaultMessage:"[DEBUG ONLY] Connector tool personalization"},toolPersonalizationLabel:{id:"UAKJTB",defaultMessage:"Personalization behavior"},toolPersonalizationUnset:{id:"ymhZCS",defaultMessage:"Use connector default (UNSET)"},toolPersonalizationAlways:{id:"bhvD4T",defaultMessage:"Always personalize"},toolPersonalizationOff:{id:"LKO/Bs",defaultMessage:"Disable personalization"},toolPersonalizationDescription:{id:"BioOv4",defaultMessage:"Debug-only control for overriding how ChatGPT personalizes tool calls to {connectorName}."},toolPersonalizationUpdateError:{id:"C22IHV",defaultMessage:"Error updating tool personalization."},settingError:{id:"zcPmpl",defaultMessage:"Error updating setting."},editDescription:{id:"8KkNYS",defaultMessage:"Edit connector descriptions"},saveDescription:{id:"b728ms",defaultMessage:"Save"},descriptionFieldLabel:{id:"G4TQb4",defaultMessage:"Connector description"},descriptionPlaceholder:{id:"UDk3bR",defaultMessage:"Describe what this connector does for your team"},modelDescriptionFieldLabel:{id:"5YP4M7",defaultMessage:"Model description"},updateDescriptionSuccess:{id:"s/uJtK",defaultMessage:"Connector details updated"},updateDescriptionError:{id:"/zjnPq",defaultMessage:"Couldn't update connector details"},connectOnMobileTooltip:{id:"Mpw12y",defaultMessage:"Connect on your iPhone or iPad"}}),Oe="openai/outputTemplate",Ie="openai/toolInvocation/invoking",Pe="openai/toolInvocation/invoked",De="openai/widgetAccessible",J="openai/widgetCSP",mt=[Oe,Ie,Pe,De,J],me=t=>{if(t){if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")return String(t);try{return JSON.stringify(t,null,2)}catch(e){return String(t)}}},gt=t=>mt.reduce((e,s)=>{const o=me(t==null?void 0:t[s]);return o===void 0||e.push({key:s,value:o}),e},[]),pt=t=>{if(!t||t.length===0)return[];const e=t.find(o=>(o==null?void 0:o.meta)&&o.meta[J]!==void 0);if(!(e!=null&&e.meta))return[];const s=me(e.meta[J]);return s===void 0?[]:[{key:J,value:s}]},ht=t=>{"use forget";const e=V.c(10),{entries:s,headingMessage:o,labels:r}=t;if(s.length===0)return null;let m;e[0]!==o?(m=a.jsx("div",{className:"text-token-text-tertiary text-[11px] font-semibold uppercase",children:a.jsx(x,d({},o))}),e[0]=o,e[1]=m):m=e[1];let c;if(e[2]!==s||e[3]!==r){let p;e[5]!==r?(p=u=>{const{key:y,value:C}=u;return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("div",{className:"text-token-text-secondary",children:a.jsx(x,d({},r[y]))}),a.jsx("pre",{className:"bg-token-bg-tertiary text-token-text-tertiary rounded-md px-2 py-1 font-mono text-[11px] leading-[14px] whitespace-pre-wrap",children:C})]},y)},e[5]=r,e[6]=p):p=e[6],c=s.map(p),e[2]=s,e[3]=r,e[4]=c}else c=e[4];let n;return e[7]!==m||e[8]!==c?(n=a.jsxs("div",{className:"mt-1 flex flex-col gap-2 text-xs",children:[m,c]}),e[7]=m,e[8]=c,e[9]=n):n=e[9],n},Mt=t=>!t||t.length===0?[]:t.reduce((e,s)=>{const o=me(s);return o===void 0||e.push({key:s.type,value:o}),e},[]),xt=t=>{"use forget";const e=V.c(10),{entries:s,headingMessage:o}=t;if(s.length===0){let u;return e[0]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx(a.Fragment,{}),e[0]=u):u=e[0],u}let r;e[1]!==s?(r=s.map(Ct).join(",\n"),e[1]=s,e[2]=r):r=e[2];const m=r;let c;e[3]!==o?(c=a.jsx("div",{className:"text-token-text-tertiary text-[11px] font-semibold uppercase",children:a.jsx(x,d({},o))}),e[3]=o,e[4]=c):c=e[4];let n;e[5]!==m?(n=a.jsx("pre",{className:"bg-token-bg-tertiary text-token-text-tertiary rounded-md px-2 py-1 font-mono text-[11px] leading-[14px] whitespace-pre-wrap",children:m}),e[5]=m,e[6]=n):n=e[6];let p;return e[7]!==c||e[8]!==n?(p=a.jsxs("div",{className:"mt-1 flex flex-col gap-2 text-xs",children:[c,n]}),e[7]=c,e[8]=n,e[9]=p):p=e[9],p};function Ct(t){return t.value}const yt=t=>{const e=[];return t.is_consequential&&e.push("write"),e},bt=({badgeKeys:t,labels:e})=>t.length===0?null:a.jsx("div",{className:"flex items-center gap-1 select-none",children:t.map(s=>a.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:a.jsx(x,d({},e[s]))},s))}),vt={read:A.readAction,write:A.writeAction,open_world:A.openWorldAction},Tt={[Oe]:A.metadataOutputTemplate,[Ie]:A.metadataToolInvokingMessage,[Pe]:A.metadataToolInvokedMessage,[De]:A.metadataWidgetAccessible,[J]:A.metadataWidgetCsp},Bt=t=>{"use forget";const e=V.c(44),{connector:s,link:o,isRefreshingActions:r,onRefreshActions:m,onToggleAction:c,isTogglingAction:n}=t,p=ce();let u;e[0]!==p?(u=()=>We(p),e[0]=p,e[1]=u):u=e[1];const y=Ee(u),{actions:C,isLoading:h}=Ge(s,ke.CONNECTOR_SETTING),f=ce();let M;e[2]!==f?(M=K(f,"156264210"),e[2]=f,e[3]=M):M=e[3];const T=M;let E;e[4]!==f?(E=K(f,"3475796410"),e[4]=f,e[5]=E):E=e[5];const z=E;let v;e[6]!==f?(v=K(f,"350291705"),e[6]=f,e[7]=v):v=e[7];const G=v,Q=K(f,"1817078280"),L=s.connector_type!=="SERVICE"||z,O=fe(),W=ft(s)&&(s.status==="ONLY_ME"||G)&&!!o;if(!y&&(!(Q&&s.supports_full_actions&&s.status==="ENABLED")||s.connector_type==="FIRST_PARTY_ECOSYSTEM"||s.distribution_channel==="ECOSYSTEM_DIRECTORY"))return null;let N;e[8]===Symbol.for("react.memo_cache_sentinel")?(N=a.jsx(x,d({},A.actions)),e[8]=N):N=e[8];let w;e[9]!==W||e[10]!==h||e[11]!==r||e[12]!==m?(w=W&&m&&a.jsx(we,{onClick:m,size:"small",color:"secondary",loading:!!r||h,children:a.jsx(x,d({},A.refreshActionsButton))}),e[9]=W,e[10]=h,e[11]=r,e[12]=m,e[13]=w):w=e[13];let I;e[14]!==w?(I=a.jsxs("div",{className:"flex items-baseline justify-between pb-3 text-base font-medium",children:[N,w]}),e[14]=w,e[15]=I):I=e[15];let _;if(e[16]!==C||e[17]!==L||e[18]!==s.connector_type||e[19]!==s.status||e[20]!==s.supports_full_actions||e[21]!==O||e[22]!==n||e[23]!==(o==null?void 0:o.actions)||e[24]!==c||e[25]!==T){let B;e[27]!==s.connector_type?(B=b=>s.connector_type==="SERVICE"?b.is_read_only:!0,e[27]=s.connector_type,e[28]=B):B=e[28];let F;e[29]!==L||e[30]!==s.connector_type||e[31]!==s.status||e[32]!==s.supports_full_actions||e[33]!==O||e[34]!==n||e[35]!==(o==null?void 0:o.actions)||e[36]!==c||e[37]!==T?(F=b=>{var q,Y,$,H;const ae=yt(b),se=(q=b.meta)!=null?q:{},oe=gt(se),ne=pt((Y=b.templates)!=null?Y:[]),re=[...oe,...ne],X=!!(s.supports_full_actions&&s.status==="ENABLED")||s.status==="ONLY_ME"||s.connector_type==="SERVICE"&&b.is_read_only||["search","fetch"].includes(b.name);return a.jsxs("li",{className:X?void 0:"opacity-50",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:de(["font-mono font-medium",!b.is_enabled&&"text-token-text-tertiary"]),children:b.name}),!b.is_enabled&&a.jsx(qe,{label:O.formatMessage(A.disabledAction),children:a.jsx(it,{className:"icon text-token-text-tertiary h-4 w-4"})})]}),bt({badgeKeys:ae,labels:vt}),X&&T&&c&&a.jsx(Ye,{"aria-hidden":!0,checked:($=o==null?void 0:o.actions)==null?void 0:$.includes(b.name),size:"small",onCheckedChange:Z=>c==null?void 0:c(b.name,Z),disabled:!!n||!L})]}),a.jsx("div",{className:"text-token-text-tertiary line-clamp-3 text-xs",children:b.description}),a.jsx(xt,{entries:Mt((H=b.meta)==null?void 0:H.securitySchemes),headingMessage:A.securitySchemes}),a.jsx(ht,{entries:re,headingMessage:A.metadataHeading,labels:Tt})]},b.name)},e[29]=L,e[30]=s.connector_type,e[31]=s.status,e[32]=s.supports_full_actions,e[33]=O,e[34]=n,e[35]=o==null?void 0:o.actions,e[36]=c,e[37]=T,e[38]=F):F=e[38],_=C.filter(B).toSorted(St).map(F),e[16]=C,e[17]=L,e[18]=s.connector_type,e[19]=s.status,e[20]=s.supports_full_actions,e[21]=O,e[22]=n,e[23]=o==null?void 0:o.actions,e[24]=c,e[25]=T,e[26]=_}else _=e[26];let P;e[39]!==_?(P=a.jsx("ul",{className:"mb-4 flex flex-col gap-4",children:_}),e[39]=_,e[40]=P):P=e[40];let R;return e[41]!==I||e[42]!==P?(R=a.jsxs("div",{className:"px-2 pt-6",children:[I,P]}),e[41]=I,e[42]=P,e[43]=R):R=e[43],R};function St(t,e){return Number(e.is_enabled)-Number(t.is_enabled)||t.name.localeCompare(e.name)}function Ne(t){"use forget";const e=V.c(19),{form:s,showErrors:o,setShowErrors:r,clientIdAriaLabel:m,clientIdPlaceholder:c,clientSecretAriaLabel:n,clientSecretPlaceholder:p}=t;let u;e[0]!==m||e[1]!==c||e[2]!==r||e[3]!==o?(u=M=>a.jsx(te,{name:"custom-connector-client-id",value:M.state.value,onChange:T=>{M.handleChange(T.target.value),o&&r(!1)},ariaLabel:m,placeholder:c,error:o?M.state.meta.errors[0]:void 0,autoComplete:"off",inputClassName:"bg-token-bg-primary!"}),e[0]=m,e[1]=c,e[2]=r,e[3]=o,e[4]=u):u=e[4];let y;e[5]!==s.Field||e[6]!==u?(y=a.jsx(s.Field,{name:"oauthClientId",children:u}),e[5]=s.Field,e[6]=u,e[7]=y):y=e[7];let C;e[8]!==n||e[9]!==p||e[10]!==r||e[11]!==o?(C=M=>a.jsx(te,{name:"custom-connector-client-secret",type:"password",value:M.state.value,onChange:T=>{M.handleChange(T.target.value),o&&r(!1)},ariaLabel:n,placeholder:p,error:o?M.state.meta.errors[0]:void 0,autoComplete:"off",inputClassName:"bg-token-bg-primary!"}),e[8]=n,e[9]=p,e[10]=r,e[11]=o,e[12]=C):C=e[12];let h;e[13]!==s.Field||e[14]!==C?(h=a.jsx(s.Field,{name:"oauthClientSecret",children:C}),e[13]=s.Field,e[14]=C,e[15]=h):h=e[15];let f;return e[16]!==y||e[17]!==h?(f=a.jsxs("div",{className:"flex flex-col gap-3",children:[y,h]}),e[16]=y,e[17]=h,e[18]=f):f=e[18],f}const _e=1024*1024*4,At=t=>{var e,s,o,r,m;return{name:(e=t==null?void 0:t.name)!=null?e:"",templateExampleUrl:(s=t==null?void 0:t.example_url)!=null?s:null,description:(o=t==null?void 0:t.description)!=null?o:"",logoUrl:(r=t==null?void 0:t.logo_url)!=null?r:null,supportedAuthTypes:(m=t==null?void 0:t.supported_auth_types)!=null?m:[]}},Nt=t=>{var s;const e=(s=t==null?void 0:t.branding)==null?void 0:s.website;return(t==null?void 0:t.template_id)==="templated_apps_Databricks"&&e?k(d({},i.databricksTemplateExplanation),{values:{link:o=>a.jsx(D,{href:e,openNewTab:!0,className:"inline",children:o})}}):(t==null?void 0:t.template_id)==="templated_apps_Snowflake"&&e?k(d({},i.snowflakeTemplateExplanation),{values:{link:o=>a.jsx(D,{href:e,openNewTab:!0,className:"inline",children:o})}}):null},je=()=>{"use forget";const t=V.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=a.jsx("span",{className:"text-token-text-tertiary font-normal",children:a.jsx(x,d({},i.optionalText))}),t[0]=e):e=t[0],e},_t=t=>{"use forget";const e=V.c(15),{previewUrl:s,isDragActive:o}=t,r=fe(),m=Ze();if(!s||o){const C=o?"border-green-600 bg-green-600/30 text-green-600":"border-token-border-heavy text-token-text-tertiary";let h;e[0]!==C?(h=de("rounded-xl border border-dashed p-4",C),e[0]=C,e[1]=h):h=e[1];let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=a.jsx(rt,{className:"h-6 w-6"}),e[2]=f):f=e[2];let M;return e[3]!==h?(M=a.jsx("span",{className:h,children:f}),e[3]=h,e[4]=M):M=e[4],M}const c=m&&"bg-white";let n;e[5]!==c?(n=de("bg-token-bg-tertiary overflow-hidden rounded-xl border",c),e[5]=c,e[6]=n):n=e[6];let p;e[7]!==r?(p=r.formatMessage(i.iconPreviewAlt),e[7]=r,e[8]=p):p=e[8];let u;e[9]!==s||e[10]!==p?(u=a.jsx("img",{src:s,alt:p,className:"h-14 w-14 object-cover"}),e[9]=s,e[10]=p,e[11]=u):u=e[11];let y;return e[12]!==n||e[13]!==u?(y=a.jsx("span",{className:n,children:u}),e[12]=n,e[13]=u,e[14]=y):y=e[14],y},jt=t=>new Promise((e,s)=>{const o=new FileReader;o.onloadend=()=>e(o.result),o.onerror=()=>s(),o.readAsDataURL(t)}),Ut=({onClose:t,redirectAfter:e,template:s})=>{"use no forget";var Z;const o=He(),{mutateAsync:r,isPending:m}=Je(ke.CONNECTOR_SETTING),c=ce(),n=fe(),{name:p,description:u,logoUrl:y,templateExampleUrl:C,supportedAuthTypes:h}=At(s),[f,M]=U.useState(!1),T=!!h&&h.length>0,E=T&&h.some(l=>l.type==="OAUTH"&&l.supports_dcr),z=(Z=T?h[0].type:void 0)!=null?Z:"OAUTH",[v,G]=U.useState(z),[Q,L]=U.useState(!1),[O,W]=U.useState(!1),N=lt({defaultValues:{name:p,url:"",description:u,oauthClientId:"",oauthClientSecret:""},onSubmit:async({value:l})=>{var he,Me,xe,Ce;const S=w?await jt(w):y;let ge=[],pe=null;if(v==="OAUTH")try{let j=[];if(!b){const be=await et(l.url.trim());ge=[be],j=(he=be.base_scopes)!=null?he:[]}const ee=l.oauthClientId.trim(),ye=l.oauthClientSecret.trim();if(T&&v==="OAUTH"&&!E&&ee.length===0){o.danger(i.clientIdRequired);return}if(ye.length!==0&&ee.length===0){o.danger(i.clientIdRequired);return}ee.length!==0&&(pe={client_id:ee,client_secret:ye,scopes:j})}catch(j){o.danger(i.oauthConfigError,{error:j});return}try{const j=await r({name:l.name.trim(),mcp_url:l.url.trim(),description:l.description.trim(),logo_url:S,supported_auth:b?void 0:ge,oauth_client_params:pe,authTypeOverride:b?void 0:v,skipSafetyChecks:F,redirectAfter:e,template_id:(Me=s==null?void 0:s.template_id)!=null?Me:void 0});if(!j.implementsRetrievable&&!((xe=j.connector)!=null&&xe.supports_full_actions)){B(!0);return}t((Ce=j.connector)==null?void 0:Ce.id)}catch(j){j instanceof tt&&j.status===409?o.danger(i.duplicateName):o.danger(i.createConnectorError,{error:j});return}},validators:{onSubmit:({value:l})=>{const S={};return l.name.trim()||(S.name=n.formatMessage({id:"vtyh9X",defaultMessage:"Name is required"})),l.url.trim()?l.url.trim().match(/^https?:\/\//)||(S.url=n.formatMessage({id:"7hn6Jq",defaultMessage:"URL is invalid"})):S.url=n.formatMessage({id:"7WV2q4",defaultMessage:"URL is required"}),{fields:S}}}}),[w,I]=U.useState(null),[_,P]=U.useState(y),[R,B]=U.useState(!1),F=K(c,"2165149362"),b=K(c,"4145215199"),ae=Ee(()=>Qe(c)),se=l=>{if(_!=null&&_.startsWith("blob:")&&URL.revokeObjectURL(_),l.size>_e){o.danger(i.iconTooLarge);return}I(l);const S=URL.createObjectURL(l);P(S)},{getRootProps:oe,getInputProps:ne,isDragActive:re}=ct({accept:{"image/*":[]},multiple:!1,noKeyboard:!0,noClick:!0,maxSize:_e,onDropAccepted:l=>{l.length>0&&se(l[0])},onDropRejected:()=>{o.danger(i.iconInvalid)}}),X=l=>{l.preventDefault(),Q&&(M(!0),N.handleSubmit())},q=Xe(c,"2281575548"),Y=q.get("docs_url","https://platform.openai.com/docs/mcp"),$=q.get("safety_url","https://platform.openai.com/docs/mcp#risks-and-safety"),H=Nt(s);return a.jsx($e,{testId:"modal-create-custom-connector",title:a.jsx("span",{className:"flex items-center gap-1",children:a.jsx(x,d({},s?k(d({},i.createTemplateConnectorModalTitle),{values:{templateName:s.name,betaBadge:a.jsx(Se,{})}}):k(d({},i.createCustomConnectorModalTitle),{values:{betaBadge:a.jsx(Se,{})}})))}),type:"success",isOpen:!0,onClose:()=>t(),showCloseButton:!0,size:"custom",className:"max-w-[448px]",children:a.jsxs("form",{onSubmit:X,className:"flex flex-col gap-4",children:[a.jsxs("label",k(d({},oe({className:"flex cursor-pointer items-center gap-2.5"})),{children:[a.jsx("input",d({},ne())),a.jsx(_t,{previewUrl:_,isDragActive:re}),a.jsxs("span",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-sm font-medium",children:a.jsx(x,k(d({},i.iconTitle),{values:{optionalText:a.jsx(je,{})}}))}),a.jsx("span",{className:"text-token-text-tertiary text-xs",children:a.jsx(x,d({},i.iconDescription))})]})]})),H&&a.jsx("span",{className:"text-sm font-medium",children:a.jsx(x,d({},H))}),a.jsx(N.Field,{name:"name",children:l=>a.jsxs("div",{children:[a.jsx("label",{htmlFor:"custom-connector-name",className:"mb-1 block text-sm font-medium",children:a.jsx(x,d({},i.nameTitle))}),a.jsx(te,{name:"custom-connector-name",value:l.state.value,onChange:S=>{l.handleChange(S.target.value),f&&M(!1)},ariaLabel:n.formatMessage(i.nameTitle),placeholder:n.formatMessage(i.namePlaceholder),error:f?l.state.meta.errors[0]:void 0,inputClassName:"bg-token-bg-primary!"})]})}),a.jsx(N.Field,{name:"description",children:l=>a.jsxs("div",{children:[a.jsx("label",{htmlFor:"custom-connector-description",className:"mb-1 block text-sm font-medium",children:a.jsx(x,k(d({},i.descriptionTitle),{values:{optionalText:a.jsx(je,{})}}))}),a.jsx(at,{name:"custom-connector-description",value:l.state.value,onChange:S=>l.handleChange(S.target.value),ariaLabel:n.formatMessage(i.descriptionTitle,{optionalText:n.formatMessage(i.optionalText)}),placeholder:n.formatMessage(i.descriptionPlaceholder),inputClassName:"bg-token-bg-primary!"})]})}),a.jsx(N.Field,{name:"url",children:l=>a.jsxs("div",{children:[a.jsx("label",{htmlFor:"custom-connector-url",className:"mb-1 block text-sm font-medium",children:a.jsx(x,d({},i.urlTitle))}),a.jsx(te,{name:"custom-connector-url",value:l.state.value,onChange:S=>{l.handleChange(S.target.value),f&&M(!1),R&&B(!1)},ariaLabel:n.formatMessage(i.urlTitle),placeholder:C!=null?C:n.formatMessage(i.urlPlaceholder),inputClassName:"bg-token-bg-primary!",error:R?a.jsx("span",{children:a.jsx(x,k(d({},ae?i.developerModeConformanceError:i.conformanceError),{values:{link:S=>a.jsx(D,{href:Y,openNewTab:!0,children:S})}}))}):f?l.state.meta.errors[0]:void 0})]})}),!b&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"custom-connector-auth",className:"mb-1 block text-sm font-medium",children:a.jsx(x,d({},i.authTypeTitle))}),(!T||h.length>1)&&a.jsx(st,{options:[{label:n.formatMessage(i.oauthOption),value:"OAUTH"},{label:n.formatMessage(i.noAuthOption),value:"NONE"}],value:v,onValueChange:l=>G(l),triggerId:"custom-connector-auth",triggerClassName:"w-full justify-between border-token-border-heavy"})]}),b?a.jsxs("div",{className:"border-token-border-heavy rounded-xl border",children:[a.jsx("button",{type:"button",className:"w-full px-4 py-3 text-start text-sm font-medium","aria-expanded":O,"aria-controls":"advanced-auth-panel",onClick:()=>W(l=>!l),children:a.jsx(x,d({},i.advancedSettings))}),O&&a.jsx("div",{id:"advanced-auth-panel",className:"border-token-border-heavy border-t p-4",children:a.jsx(Ne,{form:N,showErrors:f,setShowErrors:M,clientIdAriaLabel:n.formatMessage(i.clientIdTitle),clientIdPlaceholder:E?n.formatMessage(i.oauthClientIdPlaceholder):n.formatMessage(i.oauthClientIdRequiredPlaceholder),clientSecretAriaLabel:n.formatMessage(i.clientSecretTitle),clientSecretPlaceholder:n.formatMessage(i.oauthClientSecretPlaceholder)})})]}):v==="OAUTH"&&a.jsx(Ne,{form:N,showErrors:f,setShowErrors:M,clientIdAriaLabel:n.formatMessage(i.clientIdTitle),clientIdPlaceholder:E?n.formatMessage(i.oauthClientIdPlaceholder):n.formatMessage(i.oauthClientIdRequiredPlaceholder),clientSecretAriaLabel:n.formatMessage(i.clientSecretTitle),clientSecretPlaceholder:n.formatMessage(i.oauthClientSecretPlaceholder)}),a.jsxs("div",{children:[a.jsxs("div",{className:"border-token-border-status-warning bg-token-bg-status-warning text-token-text-status-warning flex items-center gap-2 rounded-t-2xl border border-b-0 px-4 py-3 text-sm font-medium",children:[a.jsx(le,{className:"h-6 w-6"}),a.jsx("span",{children:a.jsx(x,k(d({},i.customConnectorRiskBanner),{values:{link:l=>a.jsx(D,{href:$,openNewTab:!0,className:"inline",children:l},"custom-connector-banner-link")}}))})]}),a.jsxs("label",{htmlFor:"trust-checkbox",className:"flex items-center gap-3 rounded-b-2xl border border-gray-200 bg-white px-4 py-4 text-sm dark:border-gray-700 dark:bg-gray-800",children:[a.jsx(ot,{id:"trust-checkbox",onChange:()=>L(l=>!l),disabled:m}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:a.jsx(x,d({},i.acceptLabelTitle))}),a.jsx("p",{className:"text-token-text-tertiary text-sm",children:a.jsx(x,d({},i.customConnectorRiskSubtitle))})]})]})]}),a.jsxs("div",{className:"flex w-full items-center justify-between",children:[a.jsxs(D,{href:Y,openNewTab:!0,className:"text-token-text-tertiary text-sm",children:[a.jsx(nt,{className:"me-1.5 inline h-4.5 w-4.5"}),a.jsx(x,d({},i.readTheGuideLink))]}),a.jsx(N.Subscribe,{selector:l=>[l.isSubmitting],children:([l])=>a.jsx(we,{type:"submit",loading:l,disabled:!Q,children:a.jsx(x,d({},i.createButton))})})]})]})})},i=ue({createCustomConnectorModalTitle:{id:"createCustomConnectorModal.title",defaultMessage:"New Connector {betaBadge}"},createTemplateConnectorModalTitle:{id:"createCustomConnectorModal.createTemplateConnectorModalTitle",defaultMessage:"New {templateName} Connector {betaBadge}"},iconTitle:{id:"createCustomConnectorModal.iconTitle",defaultMessage:"Icon {optionalText}"},iconDescription:{id:"createCustomConnectorModal.iconDescription",defaultMessage:"Minimum size: 128 x 128 px"},nameTitle:{id:"createCustomConnectorModal.nameTitle",defaultMessage:"Name"},urlTitle:{id:"createCustomConnectorModal.urlTitle",defaultMessage:"MCP Server URL"},descriptionTitle:{id:"createCustomConnectorModal.descriptionTitle",defaultMessage:"Description {optionalText}"},optionalText:{id:"createCustomConnectorModal.optionalText",defaultMessage:"(optional)"},readTheGuideLink:{id:"createCustomConnectorModal.readTheGuideLink",defaultMessage:"Read the guide"},createButton:{id:"createCustomConnectorModal.createButton",defaultMessage:"Create"},iconPreviewAlt:{id:"createCustomConnectorModal.iconPreviewAlt",defaultMessage:"Icon preview"},namePlaceholder:{id:"createCustomConnectorModal.namePlaceholder",defaultMessage:"Custom Tool"},urlPlaceholder:{id:"createCustomConnectorModal.urlPlaceholder",defaultMessage:"https://example.com/sse"},descriptionPlaceholder:{id:"createCustomConnectorModal.descriptionPlaceholder",defaultMessage:"Explain what it does in a few words"},iconTooLarge:{id:"createCustomConnectorModal.iconTooLarge",defaultMessage:"Icon is too large"},iconInvalid:{id:"createCustomConnectorModal.iconInvalid",defaultMessage:"Invalid icon"},authTypeTitle:{id:"createCustomConnectorModal.authTypeTitle",defaultMessage:"Authentication"},oauthOption:{id:"createCustomConnectorModal.oauthOption",defaultMessage:"OAuth"},noAuthOption:{id:"createCustomConnectorModal.noAuthOption",defaultMessage:"No authentication"},oauthConfigError:{id:"createCustomConnectorModal.oauthConfigError",defaultMessage:"Error fetching OAuth configuration"},customConnectorRiskBanner:{id:"createCustomConnectorModal.customConnectorRiskBanner",defaultMessage:"Custom MCP servers introduce risk. <link>Learn more</link>"},acceptLabelTitle:{id:"createCustomConnectorModal.acceptLabelTitle",defaultMessage:"I understand and want to continue"},customConnectorRiskSubtitle:{id:"createCustomConnectorModal.customConnectorRiskSubtitle",defaultMessage:"OpenAI hasn't reviewed this MCP server. Attackers may attempt to steal your data or trick the model into taking unintended actions, including destroying data."},conformanceError:{id:"createCustomConnectorModal.conformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>"},developerModeConformanceError:{id:"createCustomConnectorModal.developerModeConformanceError",defaultMessage:"This MCP server doesn't implement <link>our specification</link>. Enable Developer Mode in Advanced Connector Settings to create custom connectors that support arbitrary tool calls"},createConnectorError:{id:"createCustomConnectorModal.createConnectorError",defaultMessage:"Error creating connector"},duplicateName:{id:"createCustomConnectorModal.duplicateName",defaultMessage:"Connector name already exists"},clientIdTitle:{id:"createCustomConnectorModal.clientIdTitle",defaultMessage:"OAuth client ID"},oauthClientIdRequiredPlaceholder:{id:"createCustomConnectorModal.oauthClientIdRequiredPlaceholder",defaultMessage:"OAuth Client ID"},oauthClientIdPlaceholder:{id:"createCustomConnectorModal.oauthClientIdPlaceholder",defaultMessage:"OAuth Client ID (Optional)"},clientSecretTitle:{id:"createCustomConnectorModal.clientSecretTitle",defaultMessage:"OAuth client secret"},oauthClientSecretPlaceholder:{id:"createCustomConnectorModal.oauthClientSecretPlaceholder",defaultMessage:"OAuth Client Secret (Optional)"},advancedSettings:{id:"createCustomConnectorModal.advancedSettings",defaultMessage:"Advanced settings"},clientIdRequired:{id:"createCustomConnectorModal.clientIdRequired",defaultMessage:"Enter a client ID or remove the client secret"},databricksTemplateExplanation:{id:"createCustomConnectorModal.databricksTemplateExplanation",defaultMessage:"Databricks is a platform for data engineering and machine learning. Their MCP server is subdomain specific, so to connect to your own Databricks instance, you need to provide the MCP URL. <link>Learn more</link>"},snowflakeTemplateExplanation:{id:"createCustomConnectorModal.snowflakeTemplateExplanation",defaultMessage:"Snowflake is a platform for data warehousing and analytics. Their MCP server is subdomain specific, so to connect to your own Snowflake instance, you need to provide the MCP URL. Snowflake could also require you to update the requested scopes in the URL in some cases. <link>Learn more</link>"}});export{vt as A,Bt as C,_e as M,Ut as a,yt as b,Rt as g,dt as l,A as m,bt as r,ft as u};
//# sourceMappingURL=ouqfkhwho1d793yt.js.map
