var Je=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var Te=(s,e,o)=>e in s?Je(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,p=(s,e)=>{for(var o in e||(e={}))st.call(e,o)&&Te(s,o,e[o]);if(Ce)for(var o of Ce(e))nt.call(e,o)&&Te(s,o,e[o]);return s},F=(s,e)=>et(s,tt(e));import{j as t,r as B,M as h,c as Be,h as qe,e as Oe,b as ot,i as at,a as je,R as it}from"./mw35uwhq4g8r9eam.js";import{tA as Fe,u as ge,J as Ge,cF as U,h5 as rt,tB as lt,iK as ct,e4 as dt,aA as de,tC as ut,R as mt,tD as ft,rU as Ie,er as Ue,tE as gt,tF as ke,eb as A,_ as $,dS as xt,hi as Se,p as ht,tG as pt,rV as yt,kQ as jt,kR as kt,I as vt,D as bt,sC as Mt}from"./d0xa318sl7ywi0za.js";import{b as z}from"./mstl8wgfzorpgdoe.js";import{g as Nt,a as wt,s as ze}from"./gywigwwdbkbcgqzt.js";import{o_ as _t,X as Ct,cb as We,et as Ee,ip as Tt,o$ as St,p0 as Et}from"./g2euln7v5pbm31qa.js";import{C as $e}from"./c0ls495fz2t1hbyy.js";import{S as Lt}from"./mraf0ji5wx0y0vgl.js";import{S as Rt}from"./b5fq0dy7czwrodri.js";import{A as At}from"./eea2lld77g0grm9n.js";import{u as He}from"./k527f0oyvlppyfoy.js";const Ye=s=>{const e=[],o=/\[([^\]]+)\]\(([^)]+)\)/g;let a=0,n;for(;(n=o.exec(s))!==null;){n.index>a&&e.push(s.slice(a,n.index));const[r,u,l]=n;e.push(t.jsx("a",{href:l,target:"_blank",rel:"noreferrer",className:"underline",children:u},"".concat(l,"-").concat(n.index))),a=n.index+r.length}return a<s.length&&e.push(s.slice(a)),e.length===0?s:e.length===1?e[0]:e},Ke=({blurbs:s})=>{var e;return t.jsx("div",{className:"border-token-border-default rounded-2xl border px-4 py-2",children:Array.from({length:(e=s==null?void 0:s.length)!=null?e:3}).map((o,a)=>{const n=s==null?void 0:s[a];return t.jsx("div",{className:"border-token-border-default flex gap-4 border-b py-2 last-of-type:border-none",children:n?t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("div",{className:"pb-0.5 text-sm font-medium",children:n.title}),t.jsx("div",{className:"text-token-text-secondary text-xs",children:Ye(n.description)})]}):t.jsx(Fe,{lines:2})},"".concat(a))})})},Dt=({blurbs:s,showTitles:e=!0})=>{var o;return t.jsx("div",{className:"flex flex-col gap-2.5",children:Array.from({length:(o=s==null?void 0:s.length)!=null?o:3}).map((a,n)=>{const r=s==null?void 0:s[n];return t.jsx(B.Fragment,{children:r?t.jsxs("div",{className:"text-token-text-tertiary text-xs leading-snug",children:[e&&t.jsxs("span",{className:"text-token-text-primary text-xs font-medium",children:[r.title,t.jsx(h,{id:"CjgKTH",defaultMessage:". "})]}),Ye(r.description)]}):t.jsx(Fe,{lines:2})},n)})})};function Pt(s){try{const e=new DOMParser().parseFromString(s,"image/svg+xml"),o=new Set(["fill","stroke","stop-color","flood-color","lighting-color","color","background-color"]),a=[/#(?:[0-9a-fA-F]{3,8})\b/g,/\brgba?\(\s*[\d.\s%,]+\)/g,/\bhsla?\(\s*[\d.\s%,]+\)/g],n=/\b(aliceblue|antiquewhite|aqua|aquamarine|azure|beige|black|white|bisque|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|whitesmoke|yellow|yellowgreen)\b/gi,r=new Set,u=i=>{var d,g;for(const f of a)((d=i.match(f))!=null?d:[]).forEach(v=>{var c;return r.add((c=Le(v))!=null?c:"")});((g=i.match(n))!=null?g:[]).forEach(f=>{var v;return r.add((v=Le(f.toLowerCase()))!=null?v:"")})};e.querySelectorAll("*").forEach(i=>{var d,g;for(const f of i.getAttributeNames())o.has(f)&&u((d=i.getAttribute(f))!=null?d:""),f==="style"&&u((g=i.getAttribute("style"))!=null?g:"")}),e.querySelectorAll("style").forEach(i=>u(i.textContent||"")),e.querySelectorAll("stop").forEach(i=>{const d=i.getAttribute("stop-color");d&&u(d);const g=i.getAttribute("style");g&&u(g)});for(const i of Array.from(r))/^url\(#/.test(i)&&r.delete(i),(i==="#000000"||i==="#ffffff")&&r.delete(i),i===""&&r.delete(i),i||r.delete(i);return Array.from(r)}catch(e){return[]}}const Bt=s=>Pt(s).filter(o=>{const a=z.parse(o),n=z.getBlue(a),r=z.getGreen(a),u=z.getRed(a);return n!==r||r!==u});var G=(s=>(s[s.YELLOW=0]="YELLOW",s[s.RED=1]="RED",s[s.GREEN=2]="GREEN",s[s.BLUE=3]="BLUE",s))(G||{});const qt=s=>Bt(s).reduce((a,n)=>{const r=z.parse(n),u=z.getBlue(r),l=z.getGreen(r),i=z.getRed(r);a.push({channel:3,score:u},{channel:2,score:l},{channel:1,score:i});const d=Ot(i,l,u);return d>0&&a.push({channel:0,score:d}),a},[]).reduce((a,n)=>n.score>a.score||n.score===a.score&&n.channel<a.channel?n:a,{channel:3,score:0}).channel,Ot=(s,e,o)=>{const a=Math.min(s,e),r=Math.max(s,e)-a;if(a<120||r>80||o>a*.6)return 0;const u=(s+e)/2,l=Math.max(a-o,0),i=u+l;return i>0?i:0};function Le(s){const e=s.replace("#","").toLowerCase();return e.length===3||e.length===4?"#".concat(e[0]).concat(e[0]).concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]):e.length===6||e.length===8?"#".concat(e.slice(0,6)):null}const Ft={[G.RED]:"https://persistent.oaistatic.com/static-nux/ecosystem-app-connect-modal-bg-red.jpg",[G.GREEN]:"https://persistent.oaistatic.com/static-nux/ecosystem-app-connect-modal-bg-green.jpg",[G.BLUE]:"https://persistent.oaistatic.com/static-nux/ecosystem-app-connect-modal-bg-blue.jpg",[G.YELLOW]:"https://persistent.oaistatic.com/static-nux/ecosystem-app-connect-modal-bg-yellow.jpg"},Gt="https://persistent.oaistatic.com/static-nux/ecosystem-app-connect-modal-bg.jpg",It={[G.RED]:"light",[G.GREEN]:"light",[G.BLUE]:"dark",[G.YELLOW]:"light"},Ve=s=>{"use forget";var be,Me,Ne,we,_e;const e=Be.c(74),{blurbs:o,primaryActions:a,connector:n,personalizeResultsEnabled:r,onPersonalizeResultsChange:u,isSavingPersonalization:l,onClose:i}=s,d=l===void 0?!1:l,g=ge(),f=Ge(g,"3641170085");let v;e[0]!==n||e[1]!==g?(v=Nt(g,n),e[0]=n,e[1]=g,e[2]=v):v=e[2];const c=v,m=wt(g,n),R=(be=n.logo_url)!=null?be:null,b=(Me=n.logo_url_dark)!=null?Me:null;let k;e[3]!==R||e[4]!==b?(k={lightLogoUrl:R,darkLogoUrl:b},e[3]=R,e[4]=b,e[5]=k):k=e[5];const M=_t(k);(Ne=M.data)==null||Ne.text;const x=qt((_e=(we=M.data)==null?void 0:we.text)!=null?_e:""),N="flex flex-col",S=f?It[x]:"dark";let C;e[6]!==S?(C=U("overflow-hidden bg-cover bg-no-repeat",S),e[6]=S,e[7]=C):C=e[7];const w="url(".concat(f?Ft[x]:Gt,")");let E;e[8]!==w?(E={backgroundImage:w},e[8]=w,e[9]=E):E=e[9];let L;e[10]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(rt,{className:"icon"}),e[10]=L):L=e[10];let _;e[11]!==i?(_=t.jsx("div",{className:"flex justify-end p-2",children:t.jsx(Ct,{className:"text-white",onClick:i,children:L})}),e[11]=i,e[12]=_):_=e[12];const y=m?"md:gap-4 md:px-12":"";let T;e[13]!==y?(T=U("flex w-full flex-row",y),e[13]=y,e[14]=T):T=e[14];const P=m?"items-center md:items-start md:justify-center":"items-center";let j;e[15]!==P?(j=U("flex flex-auto flex-col gap-4",P),e[15]=P,e[16]=j):j=e[16];const q=m?"small":"medium";let O;e[17]!==n||e[18]!==q?(O=t.jsx(We,{connector:n,className:"rounded-xl border-[0.5px] bg-white p-2 shadow-sm",size:q}),e[17]=n,e[18]=q,e[19]=O):O=e[19];let W;e[20]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("div",{className:"my-auto h-8 w-px bg-white opacity-70"}),e[20]=W):W=e[20];const Y=m?"small":"medium";let K;e[21]!==Y?(K=t.jsx(lt,{size:Y}),e[21]=Y,e[22]=K):K=e[22];let V;e[23]!==O||e[24]!==K?(V=t.jsxs("div",{className:"flex items-center gap-3.5",children:[O,W,K]}),e[23]=O,e[24]=K,e[25]=V):V=e[25];const xe=m?"max-md:px-5 md:items-start":"items-center text-center";let Z;e[26]!==xe?(Z=U("flex flex-col gap-2 text-balance",xe),e[26]=xe,e[27]=Z):Z=e[27];const he=m?"text-2xl md:text-xl":"text-2xl";let Q;e[28]!==he?(Q=U("text-token-text-primary text-center font-medium",he),e[28]=he,e[29]=Q):Q=e[29];let X;e[30]!==n.name?(X=t.jsx(h,{id:"Ihrgq0",defaultMessage:"Use {connectorName} in ChatGPT",values:{connectorName:n.name}}),e[30]=n.name,e[31]=X):X=e[31];let J;e[32]!==Q||e[33]!==X?(J=t.jsx("span",{className:Q,children:X}),e[32]=Q,e[33]=X,e[34]=J):J=e[34];const pe=n.description&&t.jsx("span",{className:U("text-token-text-secondary text-center text-sm",m&&"md:hidden"),children:n.description});let ee;e[35]!==Z||e[36]!==J||e[37]!==pe?(ee=t.jsxs("div",{className:Z,children:[J,pe]}),e[35]=Z,e[36]=J,e[37]=pe,e[38]=ee):ee=e[38];const ye=m?"flex-col items-center md:items-start":"flex-row items-center";let te;e[39]!==ye?(te=U("flex justify-center gap-4 pt-4 pb-10",ye),e[39]=ye,e[40]=te):te=e[40];let se;e[41]!==a||e[42]!==te?(se=t.jsx("div",{className:te,children:a}),e[41]=a,e[42]=te,e[43]=se):se=e[43];let ne;e[44]!==j||e[45]!==V||e[46]!==ee||e[47]!==se?(ne=t.jsxs("div",{className:j,children:[V,ee,se]}),e[44]=j,e[45]=V,e[46]=ee,e[47]=se,e[48]=ne):ne=e[48];let oe;e[49]!==m||e[50]!==c?(oe=m&&t.jsx("div",{className:"flex flex-col max-md:hidden",children:t.jsx("div",{className:"shadow-long h-full min-h-68 w-56 overflow-hidden rounded-ss-2xl rounded-se-2xl bg-white",children:t.jsx("div",{className:"h-full w-full bg-white bg-cover bg-top bg-no-repeat",style:{backgroundImage:"url(".concat(c,")")}})})}),e[49]=m,e[50]=c,e[51]=oe):oe=e[51];let ae;e[52]!==T||e[53]!==ne||e[54]!==oe?(ae=t.jsxs("div",{className:T,children:[ne,oe]}),e[52]=T,e[53]=ne,e[54]=oe,e[55]=ae):ae=e[55];let ie;e[56]!==E||e[57]!==_||e[58]!==ae||e[59]!==C?(ie=t.jsxs("div",{className:C,style:E,children:[_,ae]}),e[56]=E,e[57]=_,e[58]=ae,e[59]=C,e[60]=ie):ie=e[60];let re;e[61]!==n.name||e[62]!==d||e[63]!==u||e[64]!==r?(re=!1,e[61]=n.name,e[62]=d,e[63]=u,e[64]=r,e[65]=re):re=e[65];let le;e[66]!==o?(le=t.jsx("div",{className:"px-4 pt-3 pb-6",children:t.jsx(Dt,{blurbs:o})}),e[66]=o,e[67]=le):le=e[67];let ce;e[68]!==re||e[69]!==le?(ce=t.jsxs("div",{className:"px-1",children:[re,le]}),e[68]=re,e[69]=le,e[70]=ce):ce=e[70];let me;return e[71]!==ie||e[72]!==ce?(me=t.jsxs("div",{className:N,children:[ie,ce]}),e[71]=ie,e[72]=ce,e[73]=me):me=e[73],me},Ut=s=>{"use forget";const e=Be.c(44),{value:o,onChange:a,onClose:n,isSaveDisabled:r}=s,u=r===void 0?!1:r,[l,i]=B.useState(o),d=qe();let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx("div",{className:"text-2xl font-semibold",children:t.jsx(h,p({},I.advancedSettingsTitle))}),e[0]=g):g=e[0];let f;e[1]!==n?(f=t.jsxs("div",{className:"flex items-start justify-between",children:[g,t.jsx(dt,{onClick:n})]}),e[1]=n,e[2]=f):f=e[2];let v;e[3]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx("div",{className:"mt-6 mb-2 text-sm font-medium",children:t.jsx(h,p({},I.connectionType))}),e[3]=v):v=e[3];const c=l?"sync":"ondemand";let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=q=>i(q==="sync"),e[4]=m):m=e[4];let R;e[5]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx("div",{className:"text-sm font-medium",children:t.jsx(h,p({},I.syncTitle))}),e[5]=R):R=e[5];let b;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsxs("div",{className:"flex flex-col gap-1",children:[R,t.jsx("div",{className:"text-token-text-secondary text-xs",children:t.jsx(h,F(p({},I.syncDescription),{values:{link:zt}}))})]}),e[6]=b):b=e[6];let k;e[7]!==l?(k=t.jsxs("label",{className:"flex items-start justify-between gap-3 p-4",children:[b,t.jsx(Ee,{value:"sync",children:t.jsx(Re,{selected:l})})]}),e[7]=l,e[8]=k):k=e[8];let M;e[9]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("div",{className:"text-sm font-medium",children:t.jsx(h,p({},I.onDemandTitle))}),e[9]=M):M=e[9];let x;e[10]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsxs("div",{className:"flex flex-col gap-1",children:[M,t.jsx("div",{className:"text-token-text-secondary text-xs",children:t.jsx(h,p({},I.onDemandDescription))})]}),e[10]=x):x=e[10];const N=!l;let S;e[11]!==N?(S=t.jsxs("label",{className:"border-token-border-default flex items-start justify-between gap-3 border-t p-4",children:[x,t.jsx(Ee,{value:"ondemand",children:t.jsx(Re,{selected:N})})]}),e[11]=N,e[12]=S):S=e[12];let C;e[13]!==S||e[14]!==c||e[15]!==k?(C=t.jsx("div",{className:"mt-2",children:t.jsx("div",{className:"border-token-border-default overflow-hidden rounded-xl border",children:t.jsxs(Tt.Root,{value:c,onValueChange:m,className:"flex w-full flex-col",children:[k,S]})})}),e[13]=S,e[14]=c,e[15]=k,e[16]=C):C=e[16];let w;e[17]!==l||e[18]!==n||e[19]!==o?(w=()=>{l!==o&&i(o),n()},e[17]=l,e[18]=n,e[19]=o,e[20]=w):w=e[20];let E;e[21]!==d?(E=d.formatMessage(I.cancel),e[21]=d,e[22]=E):E=e[22];let L;e[23]!==w||e[24]!==E?(L=t.jsx(de,{color:"secondary",onClick:w,children:E}),e[23]=w,e[24]=E,e[25]=L):L=e[25];let _;e[26]!==l||e[27]!==a||e[28]!==n||e[29]!==o?(_=()=>{o!==l&&a(l),n()},e[26]=l,e[27]=a,e[28]=n,e[29]=o,e[30]=_):_=e[30];let y;e[31]!==d?(y=d.formatMessage(I.save),e[31]=d,e[32]=y):y=e[32];let T;e[33]!==u||e[34]!==_||e[35]!==y?(T=t.jsx(de,{onClick:_,disabled:u,children:y}),e[33]=u,e[34]=_,e[35]=y,e[36]=T):T=e[36];let P;e[37]!==L||e[38]!==T?(P=t.jsxs("div",{className:"mt-auto flex items-center justify-between pt-4",children:[L,T]}),e[37]=L,e[38]=T,e[39]=P):P=e[39];let j;return e[40]!==C||e[41]!==P||e[42]!==f?(j=t.jsxs("div",{className:"flex flex-1 flex-col p-2",children:[f,v,C,P]}),e[40]=C,e[41]=P,e[42]=f,e[43]=j):j=e[43],j},Re=({selected:s})=>s?t.jsx("button",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-gray-950 p-0.5 dark:bg-white",children:t.jsx("div",{className:"h-2 w-2 rounded-full bg-white dark:bg-gray-950"})}):t.jsx("button",{className:"border-token-border-default h-5 w-5 rounded-full border"}),I=Oe({advancedSettingsLink:{id:"qAio8L",defaultMessage:"Advanced settings"},advancedSettingsTitle:{id:"W24xFG",defaultMessage:"Advanced settings"},connectionType:{id:"GpZZmq",defaultMessage:"Connection type"},syncTitle:{id:"3kK9K9",defaultMessage:"Sync"},syncDescription:{id:"a0q+Sp",defaultMessage:"Automatically syncs, indexes, and stores content to ChatGPT for improved response speed and quality. <link>Learn more</link>"},onDemandTitle:{id:"JSo4N3",defaultMessage:"On demand"},onDemandDescription:{id:"5PZSBI",defaultMessage:"Access content on demand. Responses will take longer and may be lower quality"},cancel:{id:"qz9XeG",defaultMessage:"Cancel"},save:{id:"LXZUd1",defaultMessage:"Save changes"}});function zt(s){return t.jsx(ct,{href:$e,className:"underline",children:s})}const Ze=B.createContext(null),Wt=async(s,e)=>await mt.safeGet("/aip/connectors/{connector_id}/tos",{parameters:{path:{connector_id:s}},additionalHeaders:e?{[ft]:e}:void 0}),Qe=(s,e,{enabled:o=!0}={})=>ot({queryKey:ut(s,e),queryFn:()=>{if(!s)throw new Error("connectorId is required to fetch connector TOS");return Wt(s,e)},staleTime:300*1e3,enabled:o&&!!s}),$t=({connectorId:s,productSku:e,children:o,enabled:a=!0})=>{const n=Qe(s,e,{enabled:a}),r=B.useMemo(()=>({query:n}),[n]);return t.jsx(Ze.Provider,{value:r,children:o})},Ht=()=>{const s=B.useContext(Ze);if(!s)throw new Error("useRedirectTos must be used within a RedirectTosProvider");return s.query},Yt=(s,e)=>{var o,a;return e?{genericName:(o=e.generic_name)!=null?o:s.name,blurbs:(a=e.blurbs)!=null?a:[]}:null};function ve(){const s=je();return it.useMemo(()=>{var o;const e=s.hash.includes("?")?s.hash.substring(s.hash.indexOf("?")+1):s.search.substring(1);return(o=new URLSearchParams(e).get("referrer"))!=null?o:void 0},[s.hash,s.search])}const H=({loading:s,fitWidth:e=!1,color:o="primary",onClick:a,children:n})=>t.jsx(de,{className:e?"w-fit":"w-full",size:"large",onClick:a,loading:s,color:o,children:n}),fe=({loading:s=!1,disabled:e=!1,fitWidth:o=!1,onClick:a,children:n})=>t.jsx(de,{className:U("text-token-text-secondary border-0",o?"w-fit":"w-full"),size:"large",onClick:a,loading:s,disabled:e,color:"secondary",children:n}),ue=({connector:s,tos:e,onClose:o,children:a,beforeBlurbs:n,willSync:r=!1})=>{var i,d;const u=qe(),l={icon:"folder_stuffed",title:u.formatMessage(D.syncTitle),description:u.formatMessage(D.syncDescription,{connectorName:s.name,link:g=>"[".concat(g,"](").concat($e,")")})};return t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{children:[t.jsx(Ie,{onClose:o,connectorIcon:t.jsx(We,{connector:s,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(d=(i=s.branding)==null?void 0:i.developer)!=null?d:void 0,title:t.jsx(h,F(p({},D.addConnectorLinkModalTitle),{values:{connectorName:s.name}}))}),t.jsx("div",{className:"mt-3",children:t.jsx(At,{mode:"single",side:"bottom"})})]}),n,t.jsx(Ke,{blurbs:r&&e?[l,...e.blurbs]:e==null?void 0:e.blurbs}),a]})},Ae=({connector:s,tos:e,onClose:o})=>{var r;const a=ge();return ze(a,s)?t.jsx(Ve,{blurbs:(r=e==null?void 0:e.blurbs)!=null?r:null,connector:s,primaryActions:t.jsx(H,{loading:!0,onClick:()=>{}}),personalizeResultsEnabled:!0,onPersonalizeResultsChange:()=>{},onClose:o}):t.jsx(ue,{connector:s,tos:e,onClose:o,children:t.jsx(H,{loading:!0,onClick:()=>{}})})},De=({connector:s,tos:e,onClose:o,retry:a})=>t.jsx(ue,{connector:s,tos:e,onClose:o,children:t.jsx("div",{className:"flex items-center justify-center pt-4",children:t.jsx(de,{onClick:a,size:"large",className:"w-full",children:t.jsx(h,p({},D.errorLoadingStateButton))})})}),ls=({connectorIcon:s,connectorName:e,connectorId:o,onClose:a,isConnecting:n,onContinue:r,productSku:u})=>{var c,m;const{data:l,isLoading:i,isError:d,refetch:g}=Qe(o,u),f=(c=l==null?void 0:l.blurbs)!=null?c:[],v=(m=l==null?void 0:l.generic_name)!=null?m:"Google";return t.jsxs(t.Fragment,{children:[t.jsx(Ie,{onClose:a,connectorIcon:s,title:t.jsx(h,F(p({},D.addConnectorLinkModalTitle),{values:{connectorName:e}}))}),i?t.jsx("div",{className:"flex items-center justify-center p-4",children:t.jsx(Ue,{})}):d?t.jsx("div",{className:"flex items-center justify-center pt-4",children:t.jsx(de,{onClick:()=>void g(),size:"large",className:"w-full",children:t.jsx(h,p({},D.errorLoadingStateButton))})}):f.length>0?t.jsx(Ke,{blurbs:f}):null,t.jsx("div",{className:"pt-4",children:t.jsx(H,{loading:n,onClick:r,children:t.jsx(h,F(p({},D.continueButton),{values:{connectorName:v}}))})})]})},Xe=({connector:s,tos:e,onClose:o,isConnecting:a,isConnectingAuthType:n,onContinue:r,showExternalIcon:u,additionalContent:l,additionalMessageThatDoesNotContainLegalClaims:i,canSync:d=!1,isRequestingSync:g=!1,setIsRequestingSync:f,personalizationLinkId:v,personalizeResultsEnabled:c=!0,onPersonalizeResultsChange:m=()=>{},isSavingPersonalization:R=!1})=>{const b=ge(),k=b&&Ge(b,"2792858552"),M=gt(),x=ve(),N=ke(s,M);B.useEffect(()=>{A.logModalShown({connector_id_metadata:A.createIdMetadataFromConnector(s,x!=null?x:"unknown_referrer"),referrer:x!=null?x:"unknown_referrer",mfaState:"not_required",authType:N!=null?N:void 0}),$.logEventWithStatsig("connectors.shown_connect_modal","connectors.shown_connect_modal",p({mfa:"not_required",type:s.id},x&&{referrer:x}))},[s,x,N]);const S=O=>{var W,Y;jt(s.id,kt.ConnectorLinkContinueClick,{auth_type:(W=w?O:N)!=null?W:""}),A.logModalActionTaken({connector_id_metadata:A.createIdMetadataFromConnector(s,x!=null?x:"unknown_referrer"),action:"connection",authType:(Y=w?O:N)!=null?Y:"NONE",referrer:x!=null?x:"unknown_referrer"}),$.logEventWithStatsig("connectors.click_continue_modal","connectors.click_continue_modal",{action:"connection",type:s.id}),r(O)},{supported_auth:C}=s,w=k&&!M&&C.some(O=>O.type==="OAUTH")&&C.some(O=>O.type==="NONE"),E=i?t.jsx("div",{className:"bg-token-interactive-bg-accent-muted-context rounded-xl p-4 text-center text-sm text-[#0285FF]",children:i}):void 0,[L,_]=B.useState(!1),y=ze(b,s),{country:T}=xt(b),P=T==="EU",j=t.jsxs(t.Fragment,{children:[t.jsx(H,{fitWidth:y,loading:a&&n==="OAUTH",onClick:()=>S("OAUTH"),children:t.jsxs("span",{className:"flex items-center justify-center gap-1",children:[y?t.jsx(h,{id:"emLORe",defaultMessage:"Continue"}):t.jsx(h,F(p({},D.continueButton),{values:{connectorName:s.name}})),u&&t.jsx(Se,{className:"icon-sm"})]})}),t.jsx(fe,{fitWidth:y,loading:a&&n==="NONE",onClick:()=>S("NONE"),children:t.jsx("span",{className:"flex items-center justify-center gap-1",children:t.jsx(h,p({},D.connectWithoutAccountButton))})}),P&&t.jsx(fe,{fitWidth:y,onClick:o,children:t.jsx("span",{className:"flex items-center justify-center gap-1",children:t.jsx(h,{id:"IwBFou",defaultMessage:"Cancel"})})})]}),q=t.jsxs(t.Fragment,{children:[t.jsx(H,{fitWidth:y,loading:a,onClick:()=>S(),children:t.jsxs("span",{className:"flex items-center justify-center gap-1",children:[N==="OAUTH"?y?t.jsx(h,{id:"emLORe",defaultMessage:"Continue"}):t.jsx(h,F(p({},D.continueButton),{values:{connectorName:s.name}})):y?t.jsx(h,{id:"yWpEzd",defaultMessage:"Connect"}):t.jsx(h,F(p({},D.connectButton),{values:{connectorName:s.name}})),N==="OAUTH"&&u&&t.jsx(Se,{className:"icon-sm"})]})}),P&&t.jsx(fe,{fitWidth:y,onClick:o,children:t.jsx("span",{className:"flex items-center justify-center gap-1",children:t.jsx(h,{id:"IwBFou",defaultMessage:"Cancel"})})})]});return y?t.jsx(Ve,{blurbs:e.blurbs,connector:s,primaryActions:w?j:q,personalizeResultsEnabled:c,onPersonalizeResultsChange:m,isSavingPersonalization:R,onClose:o}):t.jsx(t.Fragment,{children:L&&f&&!a?t.jsx(Ut,{value:g,onChange:f,onClose:()=>_(!1)}):t.jsx(ue,{connector:s,tos:e,onClose:o,beforeBlurbs:E,willSync:g,children:t.jsxs("div",{className:"flex flex-col gap-2",children:[l,w?j:q,d&&t.jsx("p",{className:"text-token-text-secondary text-center text-sm font-medium",children:t.jsx(fe,{onClick:()=>_(!0),disabled:a,children:t.jsx(h,{id:"qAio8L",defaultMessage:"Advanced settings"})})})]})})})},Kt=({connector:s,tos:e,onClose:o})=>{const a=je(),[n,r]=B.useState(!1),u=a.hash?a.pathname+a.hash:a.pathname,{setupMfa:l}=He({redirectUrl:u}),i=ve(),d=ke(s);B.useEffect(()=>{A.logModalShown({connector_id_metadata:A.createIdMetadataFromConnector(s,i!=null?i:"unknown_referrer"),referrer:i!=null?i:"unknown_referrer",mfaState:"required",authType:d!=null?d:void 0}),$.logEventWithStatsig("connectors.shown_connect_modal","connectors.shown_connect_modal",p({mfa:"required",type:s.id},i&&{referrer:i}))},[s,i,d]);const g=()=>{r(!0),A.logModalActionTaken({connector_id_metadata:A.createIdMetadataFromConnector(s,i!=null?i:"unknown_referrer"),referrer:i!=null?i:"unknown_referrer",action:"mfa",authType:d!=null?d:"NONE"}),$.logEventWithStatsig("connectors.click_continue_modal","connectors.click_continue_modal",p({action:"mfa",type:s.id},i&&{referrer:i})),l()};return t.jsxs(ue,{connector:s,tos:e,onClose:o,children:[t.jsx("div",{className:"pt-2"}),t.jsx("div",{className:"border-token-border-default border-t p-4",children:t.jsx("div",{className:"text-token-text-primary font-medium",children:t.jsx(h,p({},D.mfaRequiredTitle))})}),t.jsx(H,{loading:n,onClick:g,children:t.jsx(h,p({},D.mfaRequiredButton))})]})},Pe={"google-oauth2":{icon:t.jsx(Mt,{}),name:"Google"},windowslive:{icon:t.jsx(Rt,{}),name:"Microsoft"},apple:{icon:t.jsx(Lt,{}),name:"Apple"}},Vt=({connector:s,tos:e,onClose:o,isConnecting:a,onContinue:n})=>{var x;const r=ge(),{session:u}=vt(r),l=(x=u==null?void 0:u.user)==null?void 0:x.idp,i=je(),[d,g]=B.useState(!1),f=i.hash?i.pathname+i.hash:i.pathname,{setupMfa:v}=He({redirectUrl:f}),c=ve(),m=ke(s);B.useEffect(()=>{A.logModalShown({connector_id_metadata:A.createIdMetadataFromConnector(s,c!=null?c:"unknown_referrer"),referrer:c!=null?c:"unknown_referrer",mfaState:"suggested",authType:m!=null?m:"NONE"}),$.logEventWithStatsig("connectors.shown_connect_modal","connectors.shown_connect_modal",p({mfa:"suggested",type:s.id},c&&{referrer:c}))},[s,c,m]);const R=()=>{g(!0),A.logModalActionTaken({connector_id_metadata:A.createIdMetadataFromConnector(s,c!=null?c:"unknown_referrer"),referrer:c!=null?c:"unknown_referrer",action:"mfa",authType:m!=null?m:"NONE"}),$.logEventWithStatsig("connectors.click_continue_modal","connectors.click_continue_modal",p({action:"mfa",type:s.id},c&&{referrer:c})),v()},b=()=>{A.logModalActionTaken({connector_id_metadata:A.createIdMetadataFromConnector(s,c!=null?c:"unknown_referrer"),referrer:c!=null?c:"unknown_referrer",action:"mfa",authType:m!=null?m:"NONE"}),$.logEventWithStatsig("connectors.click_continue_modal","connectors.click_continue_modal",p({action:"mfa",type:s.id},c&&{referrer:c})),n()};if(!l||!Pe[l])return bt.addError("Unknown idp found on suggested mfa requirement",{idp:l}),t.jsx(Xe,{connector:s,onClose:o,tos:e,isConnecting:a,onContinue:n});const{icon:k,name:M}=Pe[l];return t.jsxs(ue,{connector:s,tos:e,onClose:o,children:[t.jsxs("div",{className:"border-token-border-default flex items-center gap-4 rounded-xl border p-4 text-sm",children:[t.jsx("div",{className:"text-token-text-primary",children:k}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{className:"text-token-text-primary font-medium",children:t.jsx(h,F(p({},D.socialLoginTitle),{values:{socialProvider:M}}))}),t.jsx("div",{className:"text-token-text-secondary",children:t.jsx(h,F(p({},D.socialLoginDescription),{values:{socialProvider:M,link:N=>t.jsx("button",{onClick:R,className:"underline",children:t.jsxs("span",{className:"flex items-center gap-2",children:[N,d&&t.jsx(Ue,{className:"h-4 w-4"})]})})}}))})]})]}),t.jsx("div",{className:"pt-6",children:t.jsx(H,{loading:a,onClick:b,children:t.jsx(h,F(p({},D.continueButton),{values:{connectorName:s.name}}))})})]})},Zt=({connector:s,onClose:e,isConnecting:o,isConnectingAuthType:a,onContinue:n,showExternalIcon:r,additionalContent:u,additionalMessageThatDoesNotContainLegalClaims:l,canSync:i,isRequestingSync:d,setIsRequestingSync:g,personalizationLinkId:f,initialPersonalizeResultsEnabled:v=!0})=>{const{data:c,isLoading:m,isError:R,refetch:b}=Ht(),k=Yt(s,c),{status:M,retry:x}=St(s.id),{status:N,retry:S}=Et({enabled:M==="required"||M==="suggested"}),C=ht(),[w,E]=B.useState(v),[L,_]=B.useState(null),y=at({mutationFn:async({enabled:j})=>{if(!f)return null;const q=j?"PERSONALIZE_ALWAYS":"NO_PERSONALIZATION";return await pt(f,{personalized:q}),q},onError:j=>{C.danger({id:"connector.personalization.update.error",defaultMessage:"Couldn't update connector settings, defaulting to memories off.",description:"Error toast when personalization toggle fails to save"},{error:j,id:f})}}),T=B.useRef(null),P=j=>{if(E(j),!f){_(j);return}y.mutate({enabled:j})};return B.useEffect(()=>{const j=L!=null?L:w;if(!f)return;const q="".concat(f,":").concat(j?"1":"0");y.isPending||T.current!==q&&(y.mutate({enabled:j}),T.current=q,_(null))},[f,w,L,y]),m?t.jsx(Ae,{connector:s,tos:k,onClose:e}):R||!k?t.jsx(De,{connector:s,tos:k,onClose:e,retry:()=>{b(),S(),x()}}):N==="loading"||M==="loading"?t.jsx(Ae,{connector:s,tos:k,onClose:e}):N==="enabled"||M==="not_required"?t.jsx(Xe,{connector:s,tos:k,onClose:e,isConnecting:o,isConnectingAuthType:a,onContinue:n,showExternalIcon:r,additionalContent:u,additionalMessageThatDoesNotContainLegalClaims:l,canSync:i,isRequestingSync:d,setIsRequestingSync:g,personalizationLinkId:f,personalizeResultsEnabled:w,onPersonalizeResultsChange:P,isSavingPersonalization:y.isPending}):M==="required"?t.jsx(Kt,{connector:s,tos:k,onClose:e}):M==="suggested"?t.jsx(Vt,{connector:s,tos:k,onClose:e,isConnecting:o,onContinue:n}):t.jsx(De,{connector:s,tos:k,onClose:e,retry:()=>{S(),x(),b()}})},cs=({connector:s,onClose:e,isConnecting:o,isConnectingAuthType:a,onContinue:n,showExternalIcon:r,productSku:u,additionalContent:l,additionalMessageThatDoesNotContainLegalClaims:i,canSync:d,isRequestingSync:g,setIsRequestingSync:f,personalizationLinkId:v,personalizeResultsEnabled:c=!0})=>{var b;const m=(b=yt())!=null?b:"unknown_referrer",R=()=>{A.logModalActionTaken({connector_id_metadata:A.createIdMetadataFromConnector(s,m),referrer:m,action:"dismissed",authType:"NONE"}),e()};return t.jsx($t,{connectorId:s.id,productSku:u,children:t.jsx(Zt,{connector:s,onClose:R,isConnecting:o,isConnectingAuthType:a,onContinue:n,showExternalIcon:r,additionalContent:l,additionalMessageThatDoesNotContainLegalClaims:i,canSync:d,isRequestingSync:g,setIsRequestingSync:f,personalizationLinkId:v,initialPersonalizeResultsEnabled:c})})},D=Oe({addConnectorLinkModalTitle:{id:"addConnectorLinkModal.title",defaultMessage:"Connect {connectorName}"},permissionsTitle:{id:"addConnectorLinkModal.permissionsTitle",defaultMessage:"Permissions always respected"},permissionsDescription:{id:"addConnectorLinkModal.permissionsDescription",defaultMessage:"ChatGPT is strictly limited to permissions you've explicitly set."},inControlTitle:{id:"addConnectorLinkModal.inControlTitle",defaultMessage:"You're in control"},inControlDescription:{id:"addConnectorLinkModal.inControlDescription",defaultMessage:"ChatGPT always respects your training data preferences."},noTrainTitle:{id:"addConnectorLinkModal.noTrainTitle",defaultMessage:"How ChatGPT uses data"},noTrainDescription:{id:"addConnectorLinkModal.noTrainDescription",defaultMessage:"Data accessed from this connector is not used to train our models."},neverTrainTitle:{id:"addConnectorLinkModal.neverTrainTitle",defaultMessage:"How ChatGPT uses data"},neverTrainDescription:{id:"addConnectorLinkModal.neverTrainDescription",defaultMessage:"Your data is never used for training."},risksTitle:{id:"addConnectorLinkModal.risksTitle",defaultMessage:"Connectors may introduce risk"},risksDescription:{id:"addConnectorLinkModal.risksDescription",defaultMessage:"Connectors are designed to respect your privacy, but sites may attempt to steal your data. <link>Learn more on how to stay safe</link>"},syncTitle:{id:"addConnectorLinkModal.syncTitle",defaultMessage:"Continuous sync"},syncDescription:{id:"addConnectorLinkModal.syncDescription",defaultMessage:"Your {connectorName} content is indexed, stored, and kept up to date in ChatGPT. <link>Learn more</link>"},redirectTitle:{id:"addConnectorLinkModal.redirectTitle",defaultMessage:"This page will redirect to {connectorName}"},redirectDescription:{id:"addConnectorLinkModal.redirectDescription",defaultMessage:"You'll sign in and confirm permissions on {connectorName}'s page."},googlePrivacyTitle:{id:"addConnectorLinkModal.googlePrivacyTitle",defaultMessage:"Private and secure"},googlePrivacyDescription:{id:"addConnectorLinkModal.googlePrivacyDescription",defaultMessage:"Data accessed from {connectorName} may be used to reply to prompts. We do not train generalized models on this data or derivations of it, unless you choose to submit it as feedback. <link>Learn more</link>"},googleControlTitle:{id:"addConnectorLinkModal.googleControlTitle",defaultMessage:"You're in control of your data"},googleControlDescription:{id:"addConnectorLinkModal.googleControlDescription",defaultMessage:"You can delete your conversations, which will also delete any {connectorName} data used in those conversations. <link>Learn more</link>"},connectButton:{id:"addConnectorLinkModal.connectButton",defaultMessage:"Connect {connectorName}"},connectWithoutAccountButton:{id:"addConnectorLinkModal.connectWithoutAccountButton",defaultMessage:"Continue without account"},continueButton:{id:"addConnectorLinkModal.continueButton",defaultMessage:"Continue to {connectorName}"},socialLoginTitle:{id:"addConnectorLinkModal.socialLoginTitle",defaultMessage:"You use {socialProvider} to authenticate"},socialLoginDescription:{id:"addConnectorLinkModal.socialLoginDescription",defaultMessage:"For added security, enable Multi-factor authentication (MFA) on your {socialProvider} account or <link>your ChatGPT account.</link>"},mfaRequiredTitle:{id:"addConnectorLinkModal.mfaRequiredTitle",defaultMessage:"Multi-factor authentication (MFA) required"},mfaRequiredButton:{id:"addConnectorLinkModal.mfaRequiredButton",defaultMessage:"Turn on MFA to continue"},errorLoadingStateButton:{id:"addConnectorLinkModal.errorLoadingStateButton",defaultMessage:"Failed to load connector settings, please retry"}});export{ls as GoogleRedirectContent,Xe as MainRedirectContent,Zt as MainRedirectContentWrapper,cs as RedirectContent};
//# sourceMappingURL=jn2gwhu7zz26y5ej.js.map
