var Xe=Object.defineProperty,Je=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var Ce=(t,e,s)=>e in t?Xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,U=(t,e)=>{for(var s in e||(e={}))Se.call(e,s)&&Ce(t,s,e[s]);if(ie)for(var s of ie(e))Ne.call(e,s)&&Ce(t,s,e[s]);return t},H=(t,e)=>Je(t,Ke(e));var be=(t,e)=>{var s={};for(var r in t)Se.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&ie)for(var r of ie(t))e.indexOf(r)<0&&Ne.call(t,r)&&(s[r]=t[r]);return s};import{c as K,h as A,j as a,M as J,b as Ye,r as y,_ as Ve}from"./mw35uwhq4g8r9eam.js";import{cP as f,q4 as Ze,q5 as qe,hd as et,cO as De,hc as tt,jE as st,jF as at,q6 as Be,q7 as Q,c_ as rt,q8 as nt,cD as ot,cI as it,hx as lt,q9 as ct,ha as ut,j0 as dt,qa as _e,iA as Re}from"./g2euln7v5pbm31qa.js";import{uB as X,cF as N,aw as Te,e1 as ft,jf as gt,u as ze,le as mt,O as xt,fr as ht,ft as pt,e5 as _,gw as Mt,_ as Ae,iK as vt,hs as wt,eu as yt,be as jt,$ as Ct,a0 as St}from"./d0xa318sl7ywi0za.js";import{cleanQuery as we,GlauxSearchQueryOverflow as Nt,GlauxSearchResultOverflow as bt,GlauxSearchQueryWithIcon as Fe,GlauxSearchResultItem as Ge}from"./e237h6ukoc2vt16i.js";import{c as _t,g as Rt,a as Tt,b as At,i as Et,d as Ot,C as It,e as kt}from"./cz2iwgzw4rck3xnv.js";import{C as Pt}from"./mpb8yfob3hqr4zw5.js";import{s as qt,l as Dt}from"./ejv9rjzfbwh1dn9a.js";function k(t,e,s,r,o,n,i=!0){var l,u,c;if(r&&o&&!s)return t.formatMessage({id:"xvTcn5",defaultMessage:"Stopping"});if("title"in e&&e.title&&i)return e.title;switch(e.type){case f.Thought:return e.thought.summary;case f.Recap:return e.content;case f.N7jupdAPI:return le({action:e.action,source:e.source,intl:t});case f.Browsing:return Le({contextualAnswerSources:e.sources,intl:t});case f.Search:return s?t.formatMessage({id:"+a5J9x",defaultMessage:"Searched the web"}):t.formatMessage({id:"GamH3R",defaultMessage:"Searching the web"});case f.CodeAnalysis:return s?t.formatMessage({id:"SGdXPO",defaultMessage:"Analyzed"}):t.formatMessage({id:"+JAejT",defaultMessage:"Writing code"});case f.ImageAnalysis:return s?t.formatMessage({id:"fjqIXj",defaultMessage:"Analyzed image"}):t.formatMessage({id:"D//PTx",defaultMessage:"Analyzing image"});case f.ComputerOutput:return s?t.formatMessage({id:"PlB7p/",defaultMessage:"Browsed the web"}):(u=(l=e.thoughts)==null?void 0:l.at(-1))!=null?u:t.formatMessage({id:"HFx/8x",defaultMessage:"Browsing the web"});case f.e1ld0dvz:return e.tasks.every(d=>d.status==="completed")?t.formatMessage({id:"WUrSuY",defaultMessage:"Completed tasks"}):t.formatMessage({id:"tH3LAN",defaultMessage:"Running tasks"});case f.N7jupdLoading:{const d=(c=e.custom_headline)==null?void 0:c.trim();return d||(n?zt(t,n):t.formatMessage({id:"hgnsat",defaultMessage:"Thinking"}))}case f.Glaux:return Bt(t,e,s);case f.Strix:return}}const Bt=(t,e,s)=>{const r=e.isEducationPlan;if(e.queries.length>1){const i=new Map;if(e.queries.forEach(({connectorName:c})=>{var d;i.set(c,((d=i.get(c))!=null?d:0)+1)}),i.has("*"))return s?r?t.formatMessage({id:"NQ1WJC",defaultMessage:"Searched organization knowledge"}):t.formatMessage({id:"APiAqk",defaultMessage:"Searched company knowledge"}):r?t.formatMessage({id:"5syqRS",defaultMessage:"Searching organization knowledge"}):t.formatMessage({id:"kcBn4V",defaultMessage:"Searching company knowledge"});let l=Array.from(i.entries()).toSorted(([c,d],[M,g])=>g-d).map(([c])=>c);if(l.length>3){const c=l.length-2;l=[...l.slice(0,2),t.formatMessage({id:"45+rh1",defaultMessage:"{number} others"},{number:c})]}const u=t.formatList(l);return s?t.formatMessage({id:"OvXUzx",defaultMessage:"Searched {connectorNames}"},{connectorNames:u}):t.formatMessage({id:"r44Nbg",defaultMessage:"Searching {connectorNames}"},{connectorNames:u})}else return s?r?t.formatMessage({id:"NQ1WJC",defaultMessage:"Searched organization knowledge"}):t.formatMessage({id:"APiAqk",defaultMessage:"Searched company knowledge"}):r?t.formatMessage({id:"5syqRS",defaultMessage:"Searching organization knowledge"}):t.formatMessage({id:"kcBn4V",defaultMessage:"Searching company knowledge"})},zt=(t,e)=>e===X.Research?t.formatMessage({id:"CsSGJm",defaultMessage:"Starting research"}):e===X.Autoswitch?t.formatMessage({id:"9CDId8",defaultMessage:"Thinking longer with agent mode"}):e===X.KAUR1BR5?t.formatMessage({id:"QqaVzm",defaultMessage:"Getting started..."}):t.locale.startsWith("en")&&e===X.Random?Ft(t):t.formatMessage({id:"gw6x6T",defaultMessage:"Setting up my desktop"}),Ee=[{text:"Pouring a cup of coffee",weight:1},{text:"Sharpening pencils",weight:1},{text:"Consulting the rubber duck",weight:1},{text:"Negotiating with servers",weight:1},{text:"Tuning caffeine levels",weight:1},{text:"Untangling the wires",weight:1},{text:"Refilling the printer paper",weight:1},{text:"Baking cookies â€” HTTP only, of course",weight:1},{text:"Looking for snacks",weight:1},{text:"Warming up the neurons",weight:1},{text:"Folding the transformer layers neatly",weight:1},{text:"Plugging into the matrix",weight:1},{text:"Downloading the extended trilogy",weight:1},{text:"Putting on my super suit",weight:1},{text:"Building additional pylons",weight:1},{text:"Reticulating splines",weight:1},{text:"Blowing dust out of the cartridge",weight:1},{text:"Installing the flux capacitor",weight:1},{text:"Ordering extra pizza for the Turtles",weight:1},{text:"Refining the data",weight:1}];function Ft(t){const e=Ee.reduce((r,o)=>r+o.weight,2e3);let s=Math.random()*e;for(const{text:r,weight:o}of Ee){if(s<o)return r;s-=o}return t.formatMessage({id:"gw6x6T",defaultMessage:"Setting up my desktop"})}const le=({action:t,source:e,intl:s})=>t==="n7jupd_as"?s.formatMessage({id:"np3RkB",defaultMessage:"Checking available APIs"}):t==="n7jupd_ag"?s.formatMessage({id:"Q0QNzM",defaultMessage:"Reading API documentation"}):t==="n7jupd_cf"&&!e?s.formatMessage({id:"soOFxK",defaultMessage:"Reading from API"}):t==="n7jupd_cf"&&e?s.formatMessage({id:"1ETpL6",defaultMessage:"Reading from {source}"},{source:e.name}):t==="n7jupd_cs"&&e?s.formatMessage({id:"nqEMzN",defaultMessage:"Searching {source}"},{source:e.name}):s.formatMessage({id:"soOFxK",defaultMessage:"Reading from API"}),Le=({contextualAnswerSources:t,intl:e})=>{if(t.length===0)return e.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"});const s=t.map(r=>Ze[r]).filter(Boolean);return t.length===1?e.formatMessage({id:"Jzt2om",defaultMessage:"Reading {source}"},{source:s[0]}):t.length===2?e.formatMessage({id:"wTM7gR",defaultMessage:"Reading {source1} and {source2}"},{source1:s[0],source2:s[1]}):e.formatMessage({id:"xnwjH1",defaultMessage:"Reading {source1}, {source2} and more"},{source1:s[0],source2:s[1]})},ve=24,Ss=12,Ns=4,Gt=5e3;function $e({chunk:t,intl:e}){var n,i;const s=(n=t==null?void 0:t.queries.map(l=>l.query))!=null?n:[];if(((i=t==null?void 0:t.results)!=null?i:[]).length>0)return"";const o=new Set(s);return e.formatMessage({id:"F+zud/",defaultMessage:"Searching for {queries_list}{add_more, select, true { and {remaining_count} more} other {}}"},{queries_list:Array.from(o).map(l=>'"'.concat(we(l),'"')).slice(0,3).join(", "),add_more:Array.from(o).length>3,remaining_count:Array.from(o).length-3})}function Lt(t){"use forget";const e=K.c(12),{chunk:s,isExpanded:r,isComplete:o}=t,n=A(),i=qe(),l=(i==null?void 0:i.type)==="cot";let u;e[0]!==s||e[1]!==n||e[2]!==o||e[3]!==l?(u=l?null:a.jsx("div",{className:"text-token-text-secondary flex flex-row gap-1 truncate text-sm overflow-ellipsis",children:k(n,s,o)}),e[0]=s,e[1]=n,e[2]=o,e[3]=l,e[4]=u):u=e[4];let c;e[5]!==s||e[6]!==r||e[7]!==l?(c=r&&a.jsx($t,{queries:s.queries,results:s.results,maxResults:l?3:4}),e[5]=s,e[6]=r,e[7]=l,e[8]=c):c=e[8];let d;return e[9]!==u||e[10]!==c?(d=a.jsxs("div",{children:[u,c]}),e[9]=u,e[10]=c,e[11]=d):d=e[11],d}function $t(t){"use forget";const e=K.c(10),{maxResults:s,queries:r,results:o}=t,n=s===void 0?3:s;let i;e[0]!==n||e[1]!==r||e[2]!==o.length?(i=r.length<=n||!o.length?r.map(Wt):[...r.slice(0,n-1).map(Qt),a.jsx(Nt,{maxResults:n,queries:r},"query-overflow")],e[0]=n,e[1]=r,e[2]=o.length,e[3]=i):i=e[3];const l=i;let u;e[4]!==n||e[5]!==o?(u=o.length<=n?o.map(Ht):[...o.slice(0,n-1).map(Ut),a.jsx(bt,{maxResults:n,results:o},"result-overflow")],e[4]=n,e[5]=o,e[6]=u):u=e[6];const c=u;let d;return e[7]!==l||e[8]!==c?(d=a.jsx("div",{className:"mt-2",children:a.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-2",children:[l,c]})}),e[7]=l,e[8]=c,e[9]=d):d=e[9],d}function Ut(t){return a.jsx(Ge,{url:t.url,name:t.name},t.id)}function Ht(t){return a.jsx(Ge,{url:t.url,name:t.name},t.id)}function Qt(t,e){return a.jsx(Fe,{query:we(t.query)},"query-".concat(t.query,"-").concat(e))}function Wt(t,e){return a.jsx(Fe,{query:we(t.query)},"query-".concat(t.query,"-").concat(e))}const Xt=Object.freeze(Object.defineProperty({__proto__:null,GlauxCoTChunk:Lt,getGlauxCoTChunkV4TextContent:$e},Symbol.toStringTag,{value:"Module"})),Jt=({chunk:t,isExpanded:e,isComplete:s,enableV4:r})=>{const o=A(),n=t.assistantMessage,i=t.toolMessage,l=n!=null&&Ue(n)!=null;return a.jsxs("div",{className:N("flex w-full flex-col gap-2 text-sm",r&&"mt-1"),children:[e&&!r&&k(o,t,s),l&&a.jsxs("div",{children:[a.jsx(Kt,{message:n,forceDarkMode:!0,showActionBar:!1,codeRendererClassName:N("rounded-md max-h-[calc(clamp(20px,1/4*var(--thread-safe-area-height,100lvh),400px))] overflow-auto",i&&"rounded-b-none"),codeContainerClassName:"overflow-visible!"}),i&&a.jsx(Yt,{forceDarkMode:!0,wrapperClassName:"max-h-[calc(clamp(20px,1/8*var(--thread-safe-area-height,100lvh),200px))] w-full overflow-auto dark rounded-b-md",codeContainerClassName:"whitespace-pre-wrap",message:i})]})]})};function Ue(t){function e(r,o,n){return"```".concat(n,"\nagent@chatgpt:").concat(r,"$ ").concat(o,"\n```")}function s(r){var i;const o=JSON.parse(r);if(!o.cmd)return null;const n=(i=o.workdir)!=null?i:"/";return o.cmd.length===3&&o.cmd[0]==="bash"&&o.cmd[1]==="-lc"?e(n,o.cmd[2],o.cmd[2].startsWith("python")?"python":"bash"):e(n,o.cmd.join(" "),"bash")}if(t.recipient!=="container.exec")return null;switch(t.content.content_type){case Te.Code:return s(t.content.text);case Te.Text:return s(t.content.parts.join(""));default:return null}}function Kt({message:t,codeRendererClassName:e,forceDarkMode:s,removeTopBorderRadius:r,showActionBar:o,codeContainerClassName:n}){const i=ft()||s,l=Ue(t);return l==null?null:a.jsx(et.Provider,{value:{isWithinDataAnalysisToolMessage:!0},children:a.jsx(De,{className:N("markdown prose dark:prose-invert w-full break-words",i?"dark":"light"),forceDarkMode:s,componentOverrides:{code:u=>a.jsx(tt,H(U({},u),{wrapperClassName:e,codeContainerClassName:n,removeTopBorderRadius:r,showActionBar:o}))},children:l})})}function Yt({message:t,wrapperClassName:e,codeContainerClassName:s,forceDarkMode:r}){const o=t.content.content_type==="text"?t.content.parts.join(""):null;return o?a.jsx(_t,{forceDarkMode:r,wrapperClassName:e,codeContainerClassName:s,output:o,label:null}):null}function Vt(){return Date.now()}function Zt({tasks:t}){return a.jsxs("div",{className:"flex w-full flex-col gap-1",children:[a.jsx("div",{className:"text-token-text-secondary mb-1 text-sm",children:a.jsx(J,{id:"FTmQVN",defaultMessage:"Delegated Tasks"})}),a.jsx("div",{className:"flex flex-col divide-y divide-gray-200 rounded-lg border border-gray-200",children:t.map(e=>a.jsx(es,{task:e},String(e.id)))})]})}function es({task:t}){var o,n;const e=(o=t.startedAtMs)!=null?o:Vt(),s=st(e,90*1e3),r=t.status==="completed"?a.jsx(gt,{className:"icon text-token-text-secondary h-4 w-4"}):t.status==="gathering"||t.status==="running"?a.jsx(at,{percentage:s,thickness:1/12,className:"text-token-text-tertiary h-4 w-4",backgroundStrokeClassName:"stroke-token-main-surface-tertiary",transitionDuration:"".concat((100-s)/100*.2,"s"),transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}):a.jsx("div",{className:"h-4 w-4"});return a.jsxs("div",{className:"grid grid-cols-[1fr_auto] items-center gap-2 p-2",children:[a.jsx("div",{className:"min-w-0",children:a.jsx("div",{className:"text-token-text-tertiary truncate text-xs",children:(n=t.instruction)!=null?n:t.model})}),a.jsx("div",{className:"flex items-center justify-center",children:r})]})}const ts=({chunk:t,isExpanded:e,isComplete:s,enableV4:r})=>{const o=A(),n=t.assistantMessage,i=t.toolMessage,l=n!=null&&Rt(n)!=null;return a.jsxs("div",{className:N("flex w-full flex-col gap-2 text-sm",r&&"mt-1"),children:[e&&!r&&k(o,t,s),l&&a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsx(Tt,{message:n,forceDarkMode:!0,FormattedText:De,showActionBar:!1,codeRendererClassName:"rounded-md max-h-[calc(clamp(20px,1/4*var(--thread-safe-area-height,100lvh),400px))] overflow-auto",codeContainerClassName:"overflow-visible!"}),i&&a.jsx(At,{forceDarkMode:!0,wrapperClassName:"max-h-[calc(clamp(20px,1/8*var(--thread-safe-area-height,100lvh),200px))] w-full overflow-auto dark rounded-md",codeContainerClassName:"whitespace-pre-wrap",message:i,showLabel:!1})]})]})},ss=({chunk:t,isExpanded:e,isComplete:s,enableV4:r})=>{var C,j,b,v,w,h,S;const o=ze(),n=A(),i=t.toolMessage,l=mt(),u=!xt(o);let c;const d=(j=(C=i.author.name)==null?void 0:C.includes("container"))!=null?j:!1;if((b=i.author.name)!=null&&b.includes("python")){const x=(w=(v=i.metadata)==null?void 0:v.aggregate_result)==null?void 0:w.messages.find(Et);c=(x==null?void 0:x.image_url)&&ht(x.image_url)}else if(d){const x=(S=(h=i.metadata)==null?void 0:h.attachments)==null?void 0:S[0];c=x==null?void 0:x.id}const{data:M}=Ye(c?kt(c,u):{enabled:!1,queryKey:[]}),g=(M==null?void 0:M.status)===pt.Success?M.download_url:void 0,{isSuccess:m}=Be(g),[p]=y.useState(m);return a.jsxs("div",{className:N("flex w-full flex-col gap-2 text-sm",r&&"mt-1"),children:[e&&!r&&k(n,t,s),a.jsxs("div",{className:"bg-token-bg-secondary relative flex h-[calc(clamp(150px,1/4*var(--thread-safe-area-height,100lvh),400px))] justify-center overflow-hidden rounded-md p-2",children:[g&&a.jsx(_.div,{initial:{opacity:p?.5:0,scale:1.1},animate:{opacity:m?.5:0,scale:s||l?1.1:[1.1,1.25,1.1]},transition:{opacity:{ease:"easeInOut"},scale:s?{type:"spring",stiffness:300,damping:20}:{duration:2.5,repeat:1/0,ease:"easeInOut"}},className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-40 blur-lg filter",style:{backgroundImage:"url(".concat(JSON.stringify(g),")")}}),a.jsx(_.div,{initial:{opacity:p?1:0},animate:{opacity:m?1:0},className:"relative *:m-0 *:h-full *:w-full *:rounded-md *:object-center *:shadow-lg",children:c&&(d?a.jsx(Ot,{fileId:c}):a.jsx(It,{isCoT:!0,message:i}))})]})]})},as=4,rs=3,ns=3,os={hidden:{opacity:0},visible:{opacity:1}},Oe={hidden:{opacity:0,x:-5},visible:{opacity:1,x:0}},is=({chunk:t,isExpanded:e,isComplete:s})=>{var l,u,c;const r=A();if(!t.searchResults&&!t.fetchResult)return e&&a.jsx(Q,{content:le({action:t.action,source:t.source,intl:r})});const o=[];let n=[];if(t.action==="n7jupd_cs"&&t.searchResults)n=t.searchResults.map(d=>({entries:[{url:d.url,title:d.title,snippet:"",attribution:d.title}]}));else if(t.action==="n7jupd_cf"&&t.fetchResult)n=[{entries:[{url:(l=t.fetchResult)==null?void 0:l.url,title:(u=t.fetchResult)==null?void 0:u.title,snippet:"",attribution:(c=t.fetchResult)==null?void 0:c.title}]}];else return null;const i={type:f.Search,queries:o,sources:n};return e&&a.jsx(He,{chunk:i,isExpanded:e,isComplete:s,headlineContents:le({action:t.action,source:t.source,intl:r}),useCloudDocIcons:!0})},ls=({chunk:t,isExpanded:e,isComplete:s,enableV4:r})=>{const o=A();return a.jsx(He,{chunk:t,isExpanded:e,isComplete:s,headlineContents:r?void 0:k(o,t,s),useCloudDocIcons:!1})},He=({chunk:t,isExpanded:e,isComplete:s,headlineContents:r,useCloudDocIcons:o,isSmall:n,isVisualCoT:i=!1})=>{const{queries:l,sources:u}=t,[c,d]=y.useState(s),M=i?_.div:"div";return a.jsxs(M,H(U({className:N("flex min-w-0 flex-col gap-2 text-sm",i&&"overflow-hidden")},i?{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},transition:{duration:.25,ease:"easeOut"}}:{}),{children:[e&&r,a.jsxs("div",{className:"flex min-w-0 flex-col gap-1",children:[a.jsx(Ie,{isComplete:s,items:l,max:ns,getKey:g=>g.q,Item:cs,ShowMoreButton:fs,onAnimationComplete:()=>d(!0),isSmall:n,isVisualCoT:i}),a.jsx(Ie,{isComplete:s,items:c?u:[],max:as,getKey:g=>g.entries[0].url,Item:us,ShowMoreButton:ds,useCloudDocIcons:o,isSmall:n,isVisualCoT:i})]})]}))},Ie=({isComplete:t,items:e,max:s,getKey:r,Item:o,ShowMoreButton:n,onAnimationComplete:i,useCloudDocIcons:l,isSmall:u,isVisualCoT:c=!1})=>{const[d,M]=y.useState(!1),[g,m]=e.length>s?[e.slice(0,s-1),e.slice(s-1)]:[e];return a.jsxs(_.div,{className:N("flex flex-wrap items-center gap-1",c&&"justify-center"),initial:c?"hidden":t?"visible":"hidden",animate:"visible",transition:{duration:.25,staggerChildren:.1,delayChildren:.3},onAnimationComplete:i,children:[g.map(p=>a.jsx(_.div,{variants:os,className:"flex max-w-full items-center",children:a.jsx(o,{item:p,isComplete:t,useCloudDocIcons:l,isSmall:u,isVisualCoT:c})},r(p))),d&&a.jsx(_.div,{className:"contents",initial:"hidden",animate:"visible",transition:{duration:.2,staggerChildren:.02},children:m==null?void 0:m.map(p=>a.jsx(_.div,{variants:Oe,className:"flex max-w-full items-center",children:a.jsx(o,{item:p,isComplete:t,useCloudDocIcons:l,isSmall:u,isVisualCoT:c})},r(p)))}),m&&a.jsx(_.div,{variants:Oe,className:"flex items-center",children:a.jsx(n,{moreItems:m,isShowingMore:d,onClick:()=>M(p=>!p),useCloudDocIcons:l,isSmall:u})},"more")]})},cs=({item:t,isSmall:e})=>a.jsxs(ce,{componentType:"span",isSmall:e,children:[a.jsx(Mt,{className:"-ms-1 h-3 w-3 shrink-0"}),a.jsx("span",{className:"max-w-[8rem] overflow-hidden text-ellipsis whitespace-nowrap",children:t.q})]}),us=({item:t,isComplete:e,useCloudDocIcons:s,isSmall:r,isVisualCoT:o})=>{var c;const n=t.entries[0],i=y.useMemo(()=>({url:n.url,title:n.title}),[n.url,n.title]);y.useEffect(()=>{Ae.logEvent("link_action",H(U({},i),{action:"show"}))},[i]);const l=()=>{Ae.logEvent("link_action",H(U({},i),{action:"click"}))},u=(c=n.attribution)!=null?c:rt(n.url);return a.jsxs(ce,{componentType:vt,href:n.url,onClick:l,animateScan:!e,isSmall:r,children:[a.jsx(Qe,{url:n.url,useCloudDocIcons:s}),o?a.jsx("div",{className:"max-w-[8rem] truncate",children:u}):u]})},Qe=({url:t,withBorder:e=!1,useCloudDocIcons:s})=>{const{isSuccess:r,isError:o}=Be(nt(t,32)),[n]=y.useState(r);if(o)return null;if(s){const i=ot(t);if((i==null?void 0:i.Icon)!=null)return a.jsx(_.div,{initial:{opacity:n?1:0},animate:{opacity:r?1:0},className:N("bg-token-main-surface-primary -ms-3 box-content h-3 w-3 shrink-0 overflow-hidden rounded-full first:-ms-1",e&&"border-token-main-surface-secondary group-hover:border-token-text-primary dark:group-hover:border-token-text-primary border"),children:a.jsx(i.Icon,{className:"m-0 h-3 w-3"})})}return a.jsx(_.div,{initial:{opacity:n?1:0},animate:{opacity:r?1:0},className:N("bg-token-main-surface-primary -ms-3 box-content h-3 w-3 shrink-0 overflow-hidden rounded-full first:-ms-1",e&&"border-token-main-surface-secondary group-hover:border-token-text-primary dark:group-hover:border-token-text-primary border"),children:a.jsx(it,{url:t,size:32,minSize:16,className:"m-0 h-3 w-3"})})},ds=({moreItems:t,isShowingMore:e,onClick:s,useCloudDocIcons:r,isSmall:o})=>a.jsx(ce,{onClick:s,isSmall:o,children:e?a.jsx(J,{id:"19fGXl",defaultMessage:"Show less"}):a.jsxs(a.Fragment,{children:[t.slice(0,rs).map((n,i)=>a.jsx(Qe,{url:n.entries[0].url,withBorder:!0,useCloudDocIcons:r},i)),a.jsx("div",{className:"max-w-[8rem] truncate",children:a.jsx(J,{id:"5ob5C8",defaultMessage:"{count} more",values:{count:t.length}})})]})}),fs=({moreItems:t,isShowingMore:e,onClick:s,isSmall:r})=>a.jsx(ce,{onClick:s,isSmall:r,children:e?a.jsx(J,{id:"0SWns2",defaultMessage:"Show less"}):a.jsx(J,{id:"PpZw7t",defaultMessage:"{count} more",values:{count:t.length}})}),gs=1500,ce=t=>{"use forget";var x;const e=K.c(26);let s,r,o,n,i,l;e[0]!==t?(x=t,{className:o,componentType:i,children:r,animateScan:s,isSmall:l}=x,n=be(x,["className","componentType","children","animateScan","isSmall"]),e[0]=t,e[1]=s,e[2]=r,e[3]=o,e[4]=n,e[5]=i,e[6]=l):(s=e[1],r=e[2],o=e[3],n=e[4],i=e[5],l=e[6]);const u=i===void 0?"button":i,c=l===void 0?!1:l,[d,M]=y.useState(!1),g=Math.random()*gs;let m,p;e[7]!==s?(m=()=>{s&&(M(!1),requestAnimationFrame(()=>M(!0)))},p=[s,g],e[7]=s,e[8]=m,e[9]=p):(m=e[8],p=e[9]),y.useEffect(m,p);const C=c?qt:Dt,j=s&&"dark:border-token-main-surface-secondary border border-[#f4f4f4] bg-transparent dark:bg-transparent",b=(n.href!=null||n.onClick!=null)&&"hover:bg-token-main-surface-primary-inverse hover:text-token-text-inverted dark:hover:bg-token-text-primary";let v;e[10]!==o||e[11]!==C||e[12]!==j||e[13]!==b?(v=N(C,"group relative max-w-full overflow-hidden",j,b,o),e[10]=o,e[11]=C,e[12]=j,e[13]=b,e[14]=v):v=e[14];let w;e[15]!==s||e[16]!==d?(w=s&&a.jsx("span",{className:N("dark:bg-token-main-surface-secondary absolute start-0 top-0 z-[-1] h-full rounded-se-full rounded-ee-full bg-[#f4f4f4] transition-[width] ease-in-out",d?"w-full":"w-0"),style:{transitionDuration:"".concat(g,"ms")}}),e[15]=s,e[16]=d,e[17]=w):w=e[17];let h;e[18]!==r?(h=a.jsx("div",{className:"z-1 inline-flex items-center gap-1",children:r}),e[18]=r,e[19]=h):h=e[19];let S;return e[20]!==u||e[21]!==n||e[22]!==h||e[23]!==v||e[24]!==w?(S=a.jsxs(u,H(U({className:v},n),{children:[w,h]})),e[20]=u,e[21]=n,e[22]=h,e[23]=v,e[24]=w,e[25]=S):S=e[25],S},ke=null,ms=jt(()=>Ve(()=>Promise.resolve().then(()=>Xt),void 0).then(t=>t.GlauxCoTChunk)),xs=t=>{"use forget";const e=K.c(60),{index:s,chunk:r,onClick:o,onMeasure:n,onAnimationComplete:i,gap:l,showBullet:u,isExpanded:c,isAnimationComplete:d,isLast:M,isKAUR1BR5:g,hasGlauxMessages:m,isAgentTurn:p,interruptionInProgress:C,odysseyLoadingState:j,disableAnimation:b}=t,v=l===void 0?0:l,w=u===void 0?!1:u,h=c===void 0?!1:c,S=d===void 0?!1:d,x=M===void 0?!1:M,E=g===void 0?!1:g,ue=m===void 0?!1:m,O=p===void 0?!1:p,de=C===void 0?!1:C,fe=j===void 0?X.Done:j,ye=b===void 0?!1:b,ge=A(),W=x||h,T=!x||S,Y=x?0:v,me=qe(),V=(me==null?void 0:me.type)==="cot";let Z;e[0]!==r||e[1]!==de||e[2]!==ge||e[3]!==O||e[4]!==T||e[5]!==x||e[6]!==V||e[7]!==fe?(Z=V?k(ge,r,T,de,O&&x,fe,!0):void 0,e[0]=r,e[1]=de,e[2]=ge,e[3]=O,e[4]=T,e[5]=x,e[6]=V,e[7]=fe,e[8]=Z):Z=e[8];const P=Z,xe=T||ye?"static":"stage",R=T||ye?"static":"enter";let ee;e[9]!==s||e[10]!==i?(ee=()=>{i==null||i(s,"enter")},e[9]=s,e[10]=i,e[11]=ee):ee=e[11];const I=wt(ee);let te,se;e[12]!==R||e[13]!==I?(te=()=>{if(R!=="enter")return;const $=setTimeout(()=>{Ct.count(St.COT_SUMMARIZER,"cot_chunk_timeout"),I()},Gt);return()=>clearTimeout($)},se=[R,I],e[12]=R,e[13]=I,e[14]=te,e[15]=se):(te=e[14],se=e[15]),y.useEffect(te,se);const he=R==="static",je=y.useRef(null);let ae;e[16]!==s||e[17]!==n?(ae=()=>ut({axis:"height",target:je.current,onChange:$=>{const{height:We}=$;return n(s,We)}}),e[16]=s,e[17]=n,e[18]=ae):ae=e[18];let re;e[19]===Symbol.for("react.memo_cache_sentinel")?(re=[],e[19]=re):re=e[19],yt(ae,re);const pe=V?void 0:"button";let ne;e[20]===Symbol.for("react.memo_cache_sentinel")?(ne={static:{opacity:1,scale:1,position:"static",translateY:0},enter:{position:"static",translateY:0,scale:1,opacity:1},stage:{position:"absolute",translateY:-ve,scale:.95,opacity:0}},e[20]=ne):ne=e[20];let q;e[21]!==h?(q=h?void 0:{opacity:0,pointerEvents:"none",position:"absolute",translateY:ve,filter:"blur(8px)"},e[21]=h,e[22]=q):q=e[22];let D;e[23]!==s?(D={zIndex:s},e[23]=s,e[24]=D):D=e[24];let B;e[25]!==R||e[26]!==S?(B=S||R==="static"?{duration:0}:{type:"spring",bounce:.05},e[25]=R,e[26]=S,e[27]=B):B=e[27];const Me=!W&&"pointer-events-none";let z;e[28]!==Me?(z=N("text-token-text-secondary origin-start start-0 end-0 top-0 mb-2 flex",Me),e[28]=Me,e[29]=z):z=e[29];let F;e[30]!==s||e[31]!==i?(F=$=>$!=="enter"&&i(s,$),e[30]=s,e[31]=i,e[32]=F):F=e[32];let G;e[33]!==r||e[34]!==P||e[35]!==ue||e[36]!==Y||e[37]!==O||e[38]!==T||e[39]!==h||e[40]!==E||e[41]!==x||e[42]!==W||e[43]!==w?(G=w?a.jsxs("div",{className:N("relative flex w-full items-start gap-2 overflow-clip",ke),children:[ke,a.jsxs("div",{className:"flex h-full w-4 shrink-0 flex-col items-center",children:[a.jsx("div",{className:"flex h-5 shrink-0 items-center justify-center",children:a.jsx(Pt,{chunk:r,size:"small"})}),!x&&a.jsx(_.div,{initial:{translateY:-ve,opacity:0},animate:{translateY:0,opacity:1},className:"bg-token-border-heavy h-full w-[1px] rounded-full"})]}),a.jsxs("div",{className:"w-full",style:{marginBottom:Y},children:[W&&a.jsx("div",{className:"w-full",children:P&&a.jsx("div",{className:"text-token-text-primary text-[14px] leading-5",children:P})}),a.jsx(Pe,{chunk:r,isExpanded:h,isComplete:T,isLast:x,isKAUR1BR5:E,hasGlauxMessages:ue,isAgentTurn:O})]})]}):a.jsxs("div",{className:"w-full",style:{marginBottom:Y},children:[W&&a.jsx("div",{className:"w-full",children:P&&a.jsx("div",{className:"text-token-text-primary text-sm",children:P})}),a.jsx(Pe,{chunk:r,isExpanded:h,isComplete:T,isLast:x,isKAUR1BR5:E,isAgentTurn:O})]}),e[33]=r,e[34]=P,e[35]=ue,e[36]=Y,e[37]=O,e[38]=T,e[39]=h,e[40]=E,e[41]=x,e[42]=W,e[43]=w,e[44]=G):G=e[44];let L;e[45]!==he||e[46]!==I||e[47]!==G?(L=a.jsx(dt,{onComplete:I,isDisabled:he,defaultDelayPerSegmentMs:20,children:G}),e[45]=he,e[46]=I,e[47]=G,e[48]=L):L=e[48];let oe;return e[49]!==R||e[50]!==xe||e[51]!==o||e[52]!==pe||e[53]!==q||e[54]!==D||e[55]!==B||e[56]!==z||e[57]!==F||e[58]!==L?(oe=a.jsx(_.div,{role:pe,variants:ne,initial:xe,animate:R,exit:q,style:D,transition:B,className:z,onAnimationComplete:F,onClick:o,ref:je,children:L}),e[49]=R,e[50]=xe,e[51]=o,e[52]=pe,e[53]=q,e[54]=D,e[55]=B,e[56]=z,e[57]=F,e[58]=L,e[59]=oe):oe=e[59],oe},bs=y.memo(xs),_s=t=>{"use forget";const e=K.c(16),{className:s,dot:r,text:o,isStreamingAnimation:n,onClick:i}=t,[l,u]=y.useState(""),c=y.useDeferredValue(l),d=y.useRef(null),M=y.useRef("");let g,m;e[0]!==n?(g=()=>{if(n)return d.current=new _e(Re,u,"",!0),()=>{var h;(h=d.current)==null||h.destroy(),d.current=null}},m=[n],e[0]=n,e[1]=g,e[2]=m):(g=e[1],m=e[2]),y.useEffect(g,m);let p,C;e[3]!==n||e[4]!==o?(p=()=>{var E;if(!n)return;const h=d.current;if(!h)return;const S=M.current;o.startsWith(S)||(h.destroy(),u(""),d.current=new _e(Re,u,"",!0)),(E=d.current)==null||E.setText(o),M.current=o},C=[o,n],e[3]=n,e[4]=o,e[5]=p,e[6]=C):(p=e[5],C=e[6]),y.useEffect(p,C);let j;e[7]!==s?(j=N("text-token-text-tertiary line-clamp-3 cursor-pointer",s),e[7]=s,e[8]=j):j=e[8];const b=n?c:o;let v;e[9]!==r?(v=r&&a.jsx("span",{className:"ms-1 inline-block size-3.5 rounded-full bg-black dark:bg-white"}),e[9]=r,e[10]=v):v=e[10];let w;return e[11]!==i||e[12]!==j||e[13]!==b||e[14]!==v?(w=a.jsxs("p",{className:j,onClick:i,children:[b,v]}),e[11]=i,e[12]=j,e[13]=b,e[14]=v,e[15]=w):w=e[15],w},Rs=({chunk:t,isLast:e,hasGlauxMessages:s,intl:r})=>{switch(t.type){case f.Thought:return t.thought.content.trim()||t.thought.summary;case f.Recap:return t.didFailReasoning||t.didSkipReasoning?null:t.content.includes("Stopped")?r.formatMessage({id:"sOsSsn",defaultMessage:"Stopped"}):s&&!e?"":r.formatMessage({id:"Eo2n2s",defaultMessage:"Done"});case f.Search:return t.sources.slice(0,3).map(o=>o.domain).join(", ")+"...";case f.CodeAnalysis:return k(r,t,!1)+"...";case f.N7jupdAPI:return null;case f.Browsing:return null;case f.ImageAnalysis:return r.formatMessage({id:"IrgecZ",defaultMessage:"Analyzing image"});case f.ComputerOutput:return r.formatMessage({id:"QJACwT",defaultMessage:"Using browser"});case f.N7jupdLoading:return null;case f.e1ld0dvz:return r.formatMessage({id:"f87J+9",defaultMessage:"Delegating tasks"});case f.Glaux:return $e({intl:r,chunk:t});case f.Strix:return}},Pe=({chunk:t,isExpanded:e,isComplete:s,isLast:r,isKAUR1BR5:o,hasGlauxMessages:n,isAgentTurn:i})=>{var d,M;const l=ze(),u=A(),c=lt(l,!!i);switch(t.type){case f.Thought:return a.jsx(Q,{content:t.thought.content.trim()||t.thought.summary});case f.Recap:return t.didFailReasoning||t.didSkipReasoning?null:t.content.includes("Stopped")?a.jsx(Q,{content:u.formatMessage({id:"sOsSsn",defaultMessage:"Stopped"})}):n&&!r?null:a.jsx(Q,{content:u.formatMessage({id:"Eo2n2s",defaultMessage:"Done"})});case f.Search:return a.jsx(ls,{chunk:t,isExpanded:e,isComplete:s,enableV4:c});case f.CodeAnalysis:{const g=t.assistantMessage,m=t.toolMessage;return(g==null?void 0:g.recipient)==="container.exec"&&((d=g==null?void 0:g.metadata)!=null&&d.n7jupd_message)&&((M=m==null?void 0:m.metadata)!=null&&M.n7jupd_message)?a.jsx(Jt,{chunk:t,isExpanded:e,isComplete:s,enableV4:c}):a.jsx(ts,{chunk:t,isExpanded:e,isComplete:s,enableV4:c})}case f.N7jupdAPI:return t.action==="n7jupd_as"||t.action==="n7jupd_ag"?e&&a.jsx(Q,{content:le({action:t.action,source:t.source,intl:u})}):a.jsx(is,{chunk:t,isExpanded:e,isComplete:s});case f.Browsing:return e&&a.jsx(Q,{content:Le({contextualAnswerSources:t.sources,intl:u})});case f.ImageAnalysis:return a.jsx(ss,{chunk:t,isExpanded:e,isComplete:s,enableV4:c});case f.ComputerOutput:return a.jsx(ct,{chunk:t,isKAUR1BR5:o});case f.N7jupdLoading:return null;case f.e1ld0dvz:return a.jsx(Zt,{tasks:t.tasks});case f.Glaux:return a.jsx(ms,{chunk:t,isExpanded:e,isComplete:s});case f.Strix:return}};export{bs as C,ve as S,Ss as a,_s as b,He as c,Rs as d,Ns as e,k as f,le as g};
//# sourceMappingURL=fhb510ji3eot09yv.js.map
