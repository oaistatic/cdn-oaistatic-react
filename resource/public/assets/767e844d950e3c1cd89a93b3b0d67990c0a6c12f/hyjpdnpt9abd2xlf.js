const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/onnwh17zhorffjwr.js","assets/mw35uwhq4g8r9eam.js","assets/d0xa318sl7ywi0za.js","assets/root-kavs8piy.css","assets/g2euln7v5pbm31qa.js","assets/conversation-small-lq38g8zw.css","assets/o8prkdn1e023m13y.js","assets/pbx1h703pubtj7lo.js","assets/l4v2i2dq9gwjak1q.js","assets/gy0y4tth3qg3lagh.js"])))=>i.map(i=>d[i]);
var U=Object.defineProperty;var T=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var $=(s,e,t)=>e in s?U(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,G=(s,e)=>{for(var t in e||(e={}))W.call(e,t)&&$(s,t,e[t]);if(T)for(var t of T(e))Y.call(e,t)&&$(s,t,e[t]);return s};import{c as Z,h as ee,r as q,i as te,e as ae,j as l,M as se,_ as le}from"./mw35uwhq4g8r9eam.js";import{u as ie,be as re,aV as oe,bq as ne,aA as X,aB as de}from"./d0xa318sl7ywi0za.js";import{eB as me,A as ce,V as fe}from"./g2euln7v5pbm31qa.js";import{c as ue,m as _}from"./gy0y4tth3qg3lagh.js";const S=ae({title:{id:"settingsModal.addEmail.title",defaultMessage:"Add email"},emailAddressLabel:{id:"settingsModal.addEmail.emailAddressLabel",defaultMessage:"Email address"},emailAddressPlaceholder:{id:"settingsModal.addEmail.emailAddressPlaceholder",defaultMessage:"Email address"},cancelLabel:{id:"settingsModal.addEmail.cancel",defaultMessage:"Cancel"},sendVerificationLabel:{id:"settingsModal.addEmail.sendVerification",defaultMessage:"Send verification email"}}),ge=re(()=>le(()=>import("./onnwh17zhorffjwr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(s=>s.AddEmailOtpModal));class Ee extends Error{constructor(e){super(e),this.name="EmailValidationError"}}const pe=(s,e,t)=>{switch(t.status){case 429:throw new Error(s.formatMessage(_.sendEmailFailureRateLimited));case 403:throw new Error(s.formatMessage(_.verifyOtpFailureEmailAlreadyLinked,{branch:e?"email":"other",emailValue:e}));default:return}},xe=(s,e)=>e.trim()===""?s.formatMessage(_.sendEmailFailureInvalidEmailEmpty):fe.test(e)?null:s.formatMessage(_.sendEmailFailureInvalidEmail,{email:e});function we(s){"use forget";const e=Z.c(59),{onClose:t}=s,a=ee(),R=ie(),[B,H]=q.useState(""),[D,C]=q.useState(null),o=q.useId();let n;e[0]!==a?(n=async i=>{const v=i.trim(),L=xe(a,v);if(L)throw new Ee(L);try{await ue(v)}catch(Q){const z=Q;throw z instanceof oe&&pe(a,v,z),new Error(a.formatMessage(_.sendEmailFailure))}return v},e[0]=a,e[1]=n):n=e[1];let d;e[2]!==R||e[3]!==t?(d=i=>{t(),ne(R,ge,{email:i})},e[2]=R,e[3]=t,e[4]=d):d=e[4];let m;e[5]!==a?(m=i=>{i instanceof Error?C(i.message):C(a.formatMessage(_.sendEmailFailure))},e[5]=a,e[6]=m):m=e[6];let N;e[7]!==n||e[8]!==d||e[9]!==m?(N={mutationFn:n,onSuccess:d,onError:m},e[7]=n,e[8]=d,e[9]=m,e[10]=N):N=e[10];const r=te(N);let V;e[11]!==r?(V=i=>{i.preventDefault();const L=new FormData(i.currentTarget).get("email");typeof L=="string"&&(C(null),r.mutate(L))},e[11]=r,e[12]=V):V=e[12];const O=V;let k;e[13]===Symbol.for("react.memo_cache_sentinel")?(k={borderBottom:"border-token-border-light"},e[13]=k):k=e[13];let c;e[14]!==a?(c=a.formatMessage(S.title),e[14]=a,e[15]=c):c=e[15];let f;e[16]!==c?(f=l.jsx("div",{className:"flex flex-col gap-1",children:l.jsx("span",{className:"text-token-text-primary text-[20px] leading-[25px] font-medium tracking-tight",children:c})}),e[16]=c,e[17]=f):f=e[17];let u;e[18]!==a?(u=a.formatMessage({id:"settingsModal.addEmail.close",defaultMessage:"Close add email modal"}),e[18]=a,e[19]=u):u=e[19];let I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=l.jsx(me,{className:"h-5 w-5"}),e[20]=I):I=e[20];let g;e[21]!==t||e[22]!==u?(g=l.jsx("button",{type:"button",onClick:t,"aria-label":u,className:"text-token-interactive-icon-tertiary-default flex h-5 w-5 items-center justify-center",children:I}),e[21]=t,e[22]=u,e[23]=g):g=e[23];let E;e[24]!==g||e[25]!==f?(E=l.jsx("div",{className:"border-b",style:k,children:l.jsxs("div",{className:"flex w-full items-start justify-between gap-4 px-6 py-6",children:[f,g]})}),e[24]=g,e[25]=f,e[26]=E):E=e[26];let P;e[27]===Symbol.for("react.memo_cache_sentinel")?(P=l.jsx("label",{className:"text-token-text-primary text-[14px] leading-5 font-medium",children:l.jsx(se,G({},S.emailAddressLabel))}),e[27]=P):P=e[27];let p;e[28]!==D?(p=i=>{H(i.target.value),D&&C(null)},e[28]=D,e[29]=p):p=e[29];let x;e[30]!==a?(x=a.formatMessage(S.emailAddressPlaceholder),e[30]=a,e[31]=x):x=e[31];let h;e[32]!==B||e[33]!==p||e[34]!==x?(h=l.jsx(ce,{ariaLabel:!1,name:"email",type:"email",value:B,onChange:p,placeholder:x}),e[32]=B,e[33]=p,e[34]=x,e[35]=h):h=e[35];let M;e[36]!==o||e[37]!==O||e[38]!==h?(M=l.jsxs("form",{id:o,className:"flex flex-col gap-3 px-6 py-6",onSubmit:O,children:[P,h]}),e[36]=o,e[37]=O,e[38]=h,e[39]=M):M=e[39];let b;e[40]!==a?(b=a.formatMessage(S.cancelLabel),e[40]=a,e[41]=b):b=e[41];let y;e[42]!==t||e[43]!==b?(y=l.jsx(X,{color:"secondary",size:"medium",type:"button",onClick:t,children:b}),e[42]=t,e[43]=b,e[44]=y):y=e[44];const J=r.isPending,K=r.isPending;let j;e[45]!==a?(j=a.formatMessage(S.sendVerificationLabel),e[45]=a,e[46]=j):j=e[46];let w;e[47]!==o||e[48]!==r.isPending||e[49]!==j?(w=l.jsx(X,{size:"medium",type:"submit",form:o,loading:J,disabled:K,children:j}),e[47]=o,e[48]=r.isPending,e[49]=j,e[50]=w):w=e[50];let A;e[51]!==y||e[52]!==w?(A=l.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-6",children:[y,w]}),e[51]=y,e[52]=w,e[53]=A):A=e[53];let F;return e[54]!==t||e[55]!==E||e[56]!==M||e[57]!==A?(F=l.jsxs(de,{isOpen:!0,onClose:t,testId:"modal-add-email",showCloseButton:!1,hasSeparator:!1,className:"border-token-border-light bg-token-bg-primary shadow-elevation-03 w-[432px] max-w-full rounded-2xl border",noPadding:!0,modalActionsClassName:"!mt-0",children:[E,M,A]}),e[54]=t,e[55]=E,e[56]=M,e[57]=A,e[58]=F):F=e[58],F}export{we as AddEmailModal};
//# sourceMappingURL=hyjpdnpt9abd2xlf.js.map
