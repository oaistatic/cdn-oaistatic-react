var H=Object.defineProperty,K=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var w=(t,s,a)=>s in t?H(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,d=(t,s)=>{for(var a in s||(s={}))O.call(s,a)&&w(t,a,s[a]);if(N)for(var a of N(s))W.call(s,a)&&w(t,a,s[a]);return t},D=(t,s)=>K(t,G(s));import{R as I,h as X,b as z,r as c,e as Q,j as e,M as g}from"./mw35uwhq4g8r9eam.js";import{u as V,e7 as $,p as J,D as Y,aB as Z,dp as A,d$ as ee,e5 as te,aA as L,cF as se,R as ae}from"./d0xa318sl7ywi0za.js";import{cu as ne,bK as oe,bL as re,cv as ce,cw as ie,cx as le,bf as ue,cy as B,bi as de,at as me}from"./g2euln7v5pbm31qa.js";const pe="https://help.openai.com/en/articles/11481834",ye=({onClose:t})=>{var E;const[h,k]=I.useState(2500),[i,l]=I.useState(!1),{prepareCheckoutSession:p,navigateToCheckout:x}=ne(),y=V(),o=$(),{country:C}=oe(),b=re({country:C,currentAccount:o,location:"CreditPurchaseModal",shouldUsePaidSubscriptionBillingCurrency:!0}),n=(E=o==null?void 0:o.mustGetSubscriptionBillingCurrency("CreditPurchaseModal"))!=null?E:"USD",{data:u,isLoading:M,error:v}=ce({ctx:y,currency:n});let f=null;!M&&!v&&u&&(f=u.currencyConfig.amount_per_credit);const P=J(),T=X(),{data:j}=z({queryKey:["creditPurchaseRateCard"],queryFn:()=>ae.safeGet("/subscriptions/credit-purchase-rate-card"),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),F=c.useCallback(async()=>{if(!i){l(!0);try{const r=o==null?void 0:o.id;if(!r)throw new Error("No account_id found");const q=await p({credit_purchase_data:{quantity:h,unit:"credit",account_id:r},billing_details:b});await x(q)}catch(r){Y.addError(r),P.warning(T.formatMessage(m.paymentErrorWarning),{hasCloseButton:!0})}finally{l(!1)}}},[b,T,i,x,h,p,P,o]),U=ie(h,300),R=r=>!j||!j[r].price?"N/A":Math.round(U/parseFloat(j[r].price)).toLocaleString();if(b)return e.jsxs(Z,{isOpen:!0,onClose:t,type:"success",size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[e.jsx(A.Header,{title:e.jsx(g,d({},m.title))}),e.jsxs("div",{className:"flex flex-col px-6",children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(g,D(d({},m.description),{values:{link:r=>e.jsx(ee,{href:pe,target:"_blank",children:r})}}))}),f&&e.jsx("div",{className:"mt-6",children:e.jsx(ge,{minCredits:500,maxCredits:1e5,increment:250,amountPerCredit:f,currency:n,numCredits:h,setNumCredits:k})}),j&&e.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-token-bg-tertiary text-token-text-secondary mt-4 flex w-full gap-2 rounded-lg p-3 text-sm",children:[e.jsx(le,{}),e.jsx(g,D(d({},m.amountToAddDescription),{values:{deepResearchCount:R("deep_research_completion"),gpt5proChatCount:R("chat_completion_5_pro"),imagegenCount:R("chat_tool_imagegen")}}))]})]}),e.jsx(A.Actions,{className:"sm:p-2 md:p-6",secondaryButton:e.jsx(L,{disabled:i,onClick:t,color:"secondary",children:e.jsx(g,d({},m.cancel))}),primaryButton:e.jsx(L,{loading:i,onClick:()=>F(),color:"primary",children:e.jsx(g,d({},m.next))})})]})};function ge({numCredits:t,minCredits:s,maxCredits:a,increment:_,amountPerCredit:S,currency:h,setNumCredits:k}){const i=c.useRef(null);c.useEffect(()=>{var n;(n=i.current)==null||n.focus()},[i]);const l=c.useRef(null),p=c.useRef(0),x=c.useCallback(n=>{k(u=>ue(u+n,s,a))},[a,s,k]),y=c.useCallback(n=>{const f=300-n*50;return f>25?f:25},[]),o=c.useCallback(n=>{x(n),p.current=0;const u=()=>{p.current+=1,x(n);const M=y(p.current);l.current=setTimeout(u,M)};l.current=setTimeout(u,y(p.current))},[x,y]),C=c.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),b=Math.round(t*S*100)/100;return e.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[e.jsx("label",{className:"mb-1 flex text-base font-medium",htmlFor:"Credits",children:e.jsx(g,d({},m.amountToAdd))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("span",{className:"text-token-text-secondary pointer-events-none absolute end-3 top-1/2 -translate-y-1/2 text-sm",children:e.jsx(g,D(d({},m.numCredits),{values:{numCredits:t}}))}),e.jsx("input",{ref:i,name:"Credits",value:b.toLocaleString("en-US",{style:"currency",currency:h,maximumFractionDigits:2}),disabled:!0,autoFocus:!0,tabIndex:0,className:"bg-token-bg-primary text-token-text-primary m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{disabled:t<=s,onMouseDown:()=>o(-_),onMouseUp:C,onMouseLeave:C,children:e.jsx(de,{className:se("icon",t<=s&&"text-token-text-tertiary")})}),e.jsx(B,{disabled:t>=a,onMouseDown:()=>o(_),onMouseUp:C,onMouseLeave:C,children:e.jsx(me,{className:"icon"})})]})]})]})}const m=Q({title:{id:"components.business.CreditPurchaseModal.title",defaultMessage:"Buy more credits for your team"},description:{id:"components.business.CreditPurchaseModal.description",defaultMessage:"Give your team continued access to advanced features after hitting plan limits. Credits valid for 12 months. <link>View rate card</link>."},amountToAdd:{id:"components.business.CreditPurchaseModal.amountToAdd",defaultMessage:"Amount to add"},amountToAddDescription:{id:"components.business.CreditPurchaseModal.amountToAddDescription",defaultMessage:"Equal to {deepResearchCount} deep research tasks, {gpt5proChatCount} GPT-5 pro messages, or {imagegenCount} imagegen messages."},numCredits:{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}"},paymentErrorWarning:{id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},cancel:{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"},next:{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"}});export{ye as CreditPurchaseModal,ge as CreditSelectorButtons};
//# sourceMappingURL=m4ums6nik3h5nb9e.js.map
