var Z=Object.defineProperty;var K=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var Q=(e,t,o)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,r=(e,t)=>{for(var o in t||(t={}))ee.call(t,o)&&Q(e,o,t[o]);if(K)for(var o of K(t))se.call(t,o)&&Q(e,o,t[o]);return e};import{c as ae,r as H,h as te,j as s,M as l,e as oe,y as ie,d as ce}from"./mw35uwhq4g8r9eam.js";import{dz as re,dm as ne,u as le,et as de,p as ue,lo as pe,dt as fe,eT as Y,R as $,qc as me,rl as he,pv as ve,D as xe,a7 as ge,cd as ke,aB as be,dn as je,dh as J,di as V,e7 as We}from"./d0xa318sl7ywi0za.js";import{H as we}from"./bv7fa3spv54abhck.js";import{W as Me}from"./cvl54rj7bbx1877e.js";import{f8 as Se,f9 as Ne}from"./g2euln7v5pbm31qa.js";import"./ojmli062couj7r3v.js";import"./lv7ytt0l14b17ows.js";function ye(){"use forget";var z,q;const e=ae.c(48),t=re(),{data:o}=ne(),W=le(),a=de(o),p=a!=null||o!=null,[c,d]=H.useState(!1),u=o==null?void 0:o.accountItems,{count:R}=Se((z=a==null?void 0:a.id)!=null?z:"");let w;e[0]!==W?(w=Ne(),e[0]=W,e[1]=w):w=e[1];const B=w,X=a==null?void 0:a.id,n=u==null?void 0:u.find(E=>E.id===X),G=!((q=a==null?void 0:a.eligibleForReactivation)!=null?q:!1),I=(a==null?void 0:a.isOwnerOfAccount())&&a.isSelfServeBusiness()&&!a.hasPaidSubscription()&&!G,U=(a==null?void 0:a.isOwnerOfAccount())&&a.isSelfServeBusiness()&&a.hasPaidSubscription()&&!G;let M;e[2]!==u?(M=u==null?void 0:u.filter(Ce),e[2]=u,e[3]=M):M=e[3];const j=M,f=te(),T=ue();let S=pe;a&&(S=a.mustGetSubscriptionBillingCurrency("DeactivatedWorkspaceModal"));let N,y;e[4]!==a?(N=()=>{a||(xe.addError(new Error("Current account is undefined in DeactivatedWorkspaceModal")),ge.logEvent("chatgpt_undefined_current_account"))},y=[a],e[4]=a,e[5]=N,e[6]=y):(N=e[5],y=e[6]),H.useEffect(N,y);let C;e[7]!==n||e[8]!==B||e[9]!==S||e[10]!==R?(C=()=>{ke.setPurchaseWorkspaceData({minimumSeats:Math.max(R,B),billingDetails:{currency:S},existingAccount:n})},e[7]=n,e[8]=B,e[9]=S,e[10]=R,e[11]=C):C=e[11];const L=C;let P;e[12]!==f||e[13]!==d||e[14]!==T?(P=async()=>{d(!0);try{const E=await $.safeGet("/payments/customer_portal",{intercomEventOnError:"fetch-error:customer_portal:get"});location.href=E.url,d(!1)}catch(E){d(!1),T.warning(f.formatMessage(i.unableToOpenStripeDashboard),{hasCloseButton:!0})}},e[12]=f,e[13]=d,e[14]=T,e[15]=P):P=e[15];const F=P;if(a==null||!n||!j)return null;let _;e[16]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx("span",{className:"text-lg",children:s.jsx(l,r({},i.workspaceDeactivated))}),e[16]=_):_=e[16];let m;e[17]!==n.data.profilePictureUrl?(m=s.jsx(fe,{src:n.data.profilePictureUrl}),e[17]=n.data.profilePictureUrl,e[18]=m):m=e[18];let h;e[19]!==n.data.name?(h=s.jsx("div",{children:n.data.name}),e[19]=n.data.name,e[20]=h):h=e[20];let v;e[21]!==m||e[22]!==h?(v=s.jsxs("div",{className:"flex w-full items-center gap-2",children:[m,h]}),e[21]=m,e[22]=h,e[23]=v):v=e[23];let O;e[24]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx("div",{children:s.jsxs("ul",{className:"list-disc ps-5 text-sm",children:[s.jsx("li",{className:"mb-1",children:s.jsx(l,r({},i.chatHistoryUnavailable))}),s.jsx("li",{children:s.jsx(l,r({},i.otherWorkspacesAvailable))})]})}),e[24]=O):O=e[24];let x;e[25]!==I||e[26]!==c||e[27]!==L?(x=I&&s.jsxs("div",{className:"flex w-full flex-col",children:[s.jsx("p",{children:s.jsx(l,r({},i.purchaseNewSubscription))}),s.jsx(Y,{className:"m-auto mt-2 w-full",loading:c,onClick:L,children:s.jsx(l,r({},i.purchaseNewSubscriptionButton))})]}),e[25]=I,e[26]=c,e[27]=L,e[28]=x):x=e[28];let g;e[29]!==U||e[30]!==c||e[31]!==F?(g=U&&s.jsxs("div",{className:"flex w-full flex-col",children:[s.jsx("p",{children:s.jsx(l,r({},i.resolveOutstandingInvoice))}),s.jsx(Y,{className:"m-auto mt-2 w-full",loading:c,onClick:F,children:s.jsx(l,r({},i.manageSubscriptionButton))})]}),e[29]=U,e[30]=c,e[31]=F,e[32]=g):g=e[32];let A;e[33]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(we,{}),e[33]=A):A=e[33];let k;e[34]!==j||e[35]!==f||e[36]!==c||e[37]!==d||e[38]!==t?(k=s.jsx("div",{className:"w-full justify-center",children:j.length>0?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-2 text-base font-normal",children:s.jsx(l,r({},i.selectWorkspace))}),s.jsx(Me,{data:j})]}):s.jsxs("div",{className:"flex flex-col gap-6 text-sm",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("h3",{className:"text-base font-normal",children:s.jsx(l,r({},i.createPersonalWorkspace))}),s.jsx(l,r({},i.deactivatedWorkspaceReason))]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{className:"flex w-full items-center gap-2",children:[t&&t.picture&&s.jsx("img",{alt:"Profile",src:t.picture,className:"flex h-6 w-6 items-center justify-center rounded-full"}),t&&s.jsx("span",{className:"truncate",children:t.name})]}),s.jsx(Y,{title:f.formatMessage(i.createPersonalWorkspaceButton),loading:c,onClick:async()=>{d(!0),await $.safePost("/accounts/personal"),me(he),ve()},color:"primary",className:"ms-4"})]})]})}),e[34]=j,e[35]=f,e[36]=c,e[37]=d,e[38]=t,e[39]=k):k=e[39];let b;e[40]!==x||e[41]!==g||e[42]!==k||e[43]!==v?(b=s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[v,O,x,g,A,k]}),e[40]=x,e[41]=g,e[42]=k,e[43]=v,e[44]=b):b=e[44];let D;return e[45]!==p||e[46]!==b?(D=s.jsx(be,{testId:"modal-deactivated-workspace",type:"success",onClose:je,isOpen:p,title:_,children:b}),e[45]=p,e[46]=b,e[47]=D):D=e[47],D}function Ce(e){return!e.isDeactivated()}const i=oe({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}}),Ue=ie(function(){const t=J(V.workspaces),o=We(),W=J(V.workspaceId),a=t.find(c=>c.id===W),p=ce();return H.useEffect(()=>{o&&(!a||!a.deactivated)&&p("/")},[o,a,p]),o&&(!a||!a.deactivated)?s.jsx("div",{}):s.jsx(ye,{})});export{Ue as default};
//# sourceMappingURL=ftw3wpzvqhnfwoxm.js.map
