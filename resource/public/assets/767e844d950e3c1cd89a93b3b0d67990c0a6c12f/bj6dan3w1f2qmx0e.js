var B=Object.defineProperty,V=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var w=(r,e,t)=>e in r?B(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,y=(r,e)=>{for(var t in e||(e={}))K.call(e,t)&&w(r,t,e[t]);if(q)for(var t of q(e))S.call(e,t)&&w(r,t,e[t]);return r},T=(r,e)=>V(r,$(e));import{y as D,c as F,a1 as G,d as I,r as O,b as U,j as o,M as E,e as z}from"./mw35uwhq4g8r9eam.js";import{aA as Q,er as W,am as v}from"./d0xa318sl7ywi0za.js";import{u as X}from"./jcku1nkz6suna4le.js";import{bR as H,bS as J}from"./g2euln7v5pbm31qa.js";const Y=500,Z=2;function ee(r){switch(r){case v.GO:return"chatgpt-subscribe-plan-go";case v.PLUS:return"chatgpt-subscribe-plan-plus";case v.PRO:return"chatgpt-subscribe-plan-pro";default:return""}}const oe=D(function(){"use forget";const e=F.c(42),{processorEntity:t,checkoutSessionId:a,planType:i}=G(),l=I();let u;e[0]!==i?(u=ee(i.toLowerCase()),e[0]=i,e[1]=u):u=e[1];let g;e[2]!==u?(g={key:u},e[2]=u,e[3]=g):g=e[3];const{trackSelectedPixels:f}=X(g);let P;e[4]===Symbol.for("react.memo_cache_sentinel")?(P={firstRequestAt:Date.now(),pollCount:0,finished:!1,redirected:!1},e[4]=P):P=e[4];const[n,N]=O.useState(P);let p;e[5]!==a||e[6]!==t?(p=["checkoutSession",t,a],e[5]=a,e[6]=t,e[7]=p):p=e[7];let d;e[8]!==a||e[9]!==t||e[10]!==n.pollCount?(d=async()=>{const M=await H.fetchExistingCheckoutSession(t,a),A=M.status==="complete"||M.status==="expired"||n.pollCount>=Z;return N(k=>T(y({},k),{pollCount:k.pollCount+1,finished:A})),M},e[8]=a,e[9]=t,e[10]=n.pollCount,e[11]=d):d=e[11];const _=!n.finished;let C;e[12]!==p||e[13]!==d||e[14]!==_?(C={queryKey:p,queryFn:d,refetchInterval:Y,enabled:_},e[12]=p,e[13]=d,e[14]=_,e[15]=C):C=e[15];const{data:s}=U(C);let j;e[16]!==(s==null?void 0:s.status)||e[17]!==a||e[18]!==l||e[19]!==i||e[20]!==t||e[21]!==n.finished||e[22]!==n.redirected||e[23]!==f?(j=()=>{!n.finished||n.redirected||(N(te),(s==null?void 0:s.status)==="complete"?(f(),l({pathname:"/payments/success",search:"?stripe_session_id=".concat(a,"&plan_type=").concat(i,"&processor_entity=").concat(t)})):(s==null?void 0:s.status)==="open"&&l({pathname:J(t,a),search:"",hash:""}))},e[16]=s==null?void 0:s.status,e[17]=a,e[18]=l,e[19]=i,e[20]=t,e[21]=n.finished,e[22]=n.redirected,e[23]=f,e[24]=j):j=e[24];let R;e[25]!==s||e[26]!==a||e[27]!==l||e[28]!==i||e[29]!==t||e[30]!==n||e[31]!==f?(R=[n,s,a,t,i,l,f],e[25]=s,e[26]=a,e[27]=l,e[28]=i,e[29]=t,e[30]=n,e[31]=f,e[32]=R):R=e[32],O.useEffect(j,R);const c=(s==null?void 0:s.status)==="expired";let m;e[33]!==c?(m=!c&&o.jsx(W,{className:"icon-xl"}),e[33]=c,e[34]=m):m=e[34];let x,h;e[35]!==c?(x=o.jsx("span",{className:"text-muted-foreground text-center text-sm",children:c?o.jsx(E,y({},L.errorProcessingPayment)):o.jsx(E,y({},L.processingPayment))}),h=c&&o.jsx(Q,{color:"primary",as:"link",to:"/#pricing",children:o.jsx(E,y({},L.returnButtonText))}),e[35]=c,e[36]=x,e[37]=h):(x=e[36],h=e[37]);let b;return e[38]!==x||e[39]!==h||e[40]!==m?(b=o.jsx("div",{className:"flex h-screen flex-col p-4",children:o.jsx("div",{className:"flex flex-1 items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-3",children:[m,x,h]})})}),e[38]=x,e[39]=h,e[40]=m,e[41]=b):b=e[41],b});function te(r){return T(y({},r),{redirected:!0})}const L=z({processingPayment:{id:"CheckoutVerifyRoute.processingPayment",defaultMessage:"Processing Payment"},errorProcessingPayment:{id:"CheckoutVerifyRoute.errorProcessingPayment",defaultMessage:"There was an error processing your payment"},returnButtonText:{id:"CheckoutVerifyRoute.returnButtonText",defaultMessage:"Return to ChatGPT"}});export{oe as default};
//# sourceMappingURL=bj6dan3w1f2qmx0e.js.map
