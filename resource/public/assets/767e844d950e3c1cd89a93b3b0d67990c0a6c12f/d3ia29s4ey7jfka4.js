import{r as y,j as d,h as G,e as U}from"./mw35uwhq4g8r9eam.js";import{u as j,J as E,iz as H,M as P,cu as D,aP as w,pQ as g,pR as L,al as V,i as A,V as Q}from"./d0xa318sl7ywi0za.js";import{bx as S,by as k,bz as B}from"./g2euln7v5pbm31qa.js";const J=U({reportConversationTitle:{id:"gizmo.report.conversationModal.title",defaultMessage:"Report a conversation"},reportMessageTitle:{id:"gizmo.report.messageModal.title",defaultMessage:"Report a message"}});function N(l,t,i,e){var a,v,R;const r=V(l),o=t&&A(t)?t:null,n=e!=null&&e.projectId&&A(e.projectId)?e.projectId:null,s=(a=o!=null?o:n)!=null?a:null,c=(v=i!=null?i:e==null?void 0:e.conversationOwnerId)!=null?v:null,u=s!=null?(R=c!=null?c:r==null?void 0:r.normalizedAccountUserId)!=null?R:null:c;return{resolvedProjectId:s,resolvedConversationOwnerId:u}}function Z({serverThreadId:l,clientThreadId:t,onClose:i,isStaticSharedThread:e,isSharedConversation:r,projectId:o,conversationOwnerId:n}){var p,m;const s=j(),c=E(s,"2935021756"),u=E(s,"3376455464")||e||r,a=y.useContext(H),v=(p=t!=null?t:l)!=null?p:a==null?void 0:a.serverSharedThreadId,R=P(v,_=>{var x,z,F;return{projectId:(x=Q.getGizmoId(_))!=null?x:null,conversationOwnerId:(F=(z=_==null?void 0:_.sharedProjectConversationOwner)==null?void 0:z.id)!=null?F:null}},{disablePerfDetector:!0}),M=D(t);let f=l!=null?l:M;f==null&&a!=null&&(f=(m=a.serverSharedThreadId)!=null?m:void 0);const{resolvedProjectId:C,resolvedConversationOwnerId:b}=N(s,o!=null?o:null,n!=null?n:null,R);return c&&typeof window<"u"&&(window._convo_share_debug={isOpen:!0,canReport:u,serverThreadIdIsNull:f==null,isStaticSharedThread:e,isSharedConversation:r}),y.useEffect(()=>{!u||f==null||w(s,"chatgpt_conversation_share_report_modal_not_shown",u?"serverThreadId":"canReport")},[u,s,f]),!u||f==null?null:d.jsx(q,{serverThreadId:f,onClose:i,isStaticSharedThread:e,projectId:C,conversationOwnerId:b,isSharedConversation:r})}function $({serverThreadId:l,clientThreadId:t,messageId:i,onClose:e,projectId:r,conversationOwnerId:o}){var C,b;const n=j(),s=E(n,"3376455464"),c=D(t);let u=l!=null?l:c;const a=y.useContext(H);u==null&&a!=null&&(u=(C=a.serverSharedThreadId)!=null?C:void 0);const v=(b=t!=null?t:l)!=null?b:a==null?void 0:a.serverSharedThreadId,R=P(v,p=>{var m,_,x;return{projectId:(m=Q.getGizmoId(p))!=null?m:null,conversationOwnerId:(x=(_=p==null?void 0:p.sharedProjectConversationOwner)==null?void 0:_.id)!=null?x:null}},{disablePerfDetector:!0}),{resolvedProjectId:M,resolvedConversationOwnerId:f}=N(n,r!=null?r:null,o!=null?o:null,R);return!s||u==null||i==null?null:d.jsx(K,{serverThreadId:u,messageId:i,onClose:e,projectId:M,conversationOwnerId:f})}function q({serverThreadId:l,onClose:t,isStaticSharedThread:i,projectId:e,conversationOwnerId:r,isSharedConversation:o}){const n=j(),{data:s}=S(n,i||o?g.ShareableConversation:g.Conversation),c=G(),u=k(n,c,l,i||o?g.ShareableConversation:g.Conversation,L.FirstParty,void 0,e,r);return s==null||l==null?(w(n,"chatgpt_conversation_share_report_modal_not_shown",s==null?"report_reasons":"thread_id"),null):d.jsx(B,{reasons:s.reasons,submitReport:u,title:c.formatMessage(J.reportConversationTitle),onClose:t,header:s.header,subHeader:s.header_explanation})}function K({serverThreadId:l,messageId:t,onClose:i,projectId:e,conversationOwnerId:r}){const o=j(),{data:n}=S(o,g.Message),s=G(),c=k(o,s,l,g.Conversation,L.FirstParty,void 0,e,r,t);return n==null?(w(o,"chatgpt_conversation_share_report_modal_not_shown","report_reasons"),null):d.jsx(B,{reasons:n.reasons,submitReport:c,title:s.formatMessage(J.reportMessageTitle),onClose:i,header:n.header,subHeader:n.header_explanation})}export{q as ReportConversationModal,K as ReportMessageModal,Z as ThreadReportConversationModal,$ as ThreadReportMessageModal};
//# sourceMappingURL=d3ia29s4ey7jfka4.js.map
