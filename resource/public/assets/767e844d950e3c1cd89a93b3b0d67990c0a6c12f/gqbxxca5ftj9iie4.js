var N=Object.defineProperty;var $=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var E=(e,r,o)=>r in e?N(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,S=(e,r)=>{for(var o in r||(r={}))b.call(r,o)&&E(e,o,r[o]);if($)for(var o of $(r))I.call(r,o)&&E(e,o,r[o]);return e};import{o as g,l as A,m as w,f as y}from"./f4o6bjqe90k350te.js";import"./mw35uwhq4g8r9eam.js";import"./lzud3zwhg0rbdcj0.js";function B(){return{enter:{mathFlow:e,mathFlowFenceMeta:r,mathText:h},exit:{mathFlow:u,mathFlowFence:t,mathFlowFenceMeta:o,mathFlowValue:m,mathText:s,mathTextData:m}};function e(a){const c={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[c]}},a)}function r(){this.buffer()}function o(){const a=this.resume(),c=this.stack[this.stack.length-1];g(c.type==="math"),c.meta=a}function t(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function u(a){const c=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),l=this.stack[this.stack.length-1];g(l.type==="math"),this.exit(a),l.value=c;const f=l.data.hChildren[0];g(f.type==="element"),g(f.tagName==="code"),f.children.push({type:"text",value:c}),this.data.mathFlowInside=void 0}function h(a){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},a),this.buffer()}function s(a){const c=this.resume(),l=this.stack[this.stack.length-1];g(l.type==="inlineMath"),this.exit(a),l.value=c,l.data.hChildren.push({type:"text",value:c})}function m(a){this.config.enter.data.call(this,a),this.config.exit.data.call(this,a)}}function V(e){let r=(e||{}).singleDollarTextMath;return r==null&&(r=!0),t.peek=u,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:"\n",inConstruct:"mathFlowMeta"},{character:"$",after:r?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:o,inlineMath:t}};function o(h,s,m,a){const c=h.value||"",l=m.createTracker(a),f="$".repeat(Math.max(A(c,"$")+1,2)),x=m.enter("mathFlow");let p=l.move(f);if(h.meta){const i=m.enter("mathFlowMeta");p+=l.move(m.safe(h.meta,S({after:"\n",before:p,encode:["$"]},l.current()))),i()}return p+=l.move("\n"),c&&(p+=l.move(c+"\n")),p+=l.move(f),x(),p}function t(h,s,m){let a=h.value||"",c=1;for(r||c++;new RegExp("(^|[^$])"+"\\$".repeat(c)+"([^$]|$)").test(a);)c++;const l="$".repeat(c);/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^\$|\$$/.test(a))&&(a=" "+a+" ");let f=-1;for(;++f<m.unsafe.length;){const x=m.unsafe[f];if(!x.atBreak)continue;const p=m.compilePattern(x);let i;for(;i=p.exec(a);){let F=i.index;a.codePointAt(F)===10&&a.codePointAt(F-1)===13&&F--,a=a.slice(0,F)+" "+a.slice(i.index+1)}}return l+a+l}function u(){return"$"}}const R={tokenize:J,concrete:!0,name:"mathFlow"},P={tokenize:L,partial:!0};function J(e,r,o){const t=this,u=t.events[t.events.length-1],h=u&&u[1].type==="linePrefix"?u[2].sliceSerialize(u[1],!0).length:0;let s=0;return m;function m(n){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),a(n)}function a(n){return n===36?(e.consume(n),s++,a):s<2?o(n):(e.exit("mathFlowFenceSequence"),y(e,c,"whitespace")(n))}function c(n){return n===null||w(n)?f(n):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),l(n))}function l(n){return n===null||w(n)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),f(n)):n===36?o(n):(e.consume(n),l)}function f(n){return e.exit("mathFlowFence"),t.interrupt?r(n):e.attempt(P,x,v)(n)}function x(n){return e.attempt({tokenize:q,partial:!0},v,p)(n)}function p(n){return(h?y(e,i,"linePrefix",h+1):i)(n)}function i(n){return n===null?v(n):w(n)?e.attempt(P,x,v)(n):(e.enter("mathFlowValue"),F(n))}function F(n){return n===null||w(n)?(e.exit("mathFlowValue"),i(n)):(e.consume(n),F)}function v(n){return e.exit("mathFlow"),r(n)}function q(n,C,k){let T=0;return y(n,D,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function D(d){return n.enter("mathFlowFence"),n.enter("mathFlowFenceSequence"),M(d)}function M(d){return d===36?(T++,n.consume(d),M):T<s?k(d):(n.exit("mathFlowFenceSequence"),y(n,z,"whitespace")(d))}function z(d){return d===null||w(d)?(n.exit("mathFlowFence"),C(d)):k(d)}}}function L(e,r,o){const t=this;return u;function u(s){return s===null?r(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),h)}function h(s){return t.parser.lazy[t.now().line]?o(s):r(s)}}function O(e){let r=(e||{}).singleDollarTextMath;return r==null&&(r=!0),{tokenize:o,resolve:_,previous:j,name:"mathText"};function o(t,u,h){let s=0,m,a;return c;function c(i){return t.enter("mathText"),t.enter("mathTextSequence"),l(i)}function l(i){return i===36?(t.consume(i),s++,l):s<2&&!r?h(i):(t.exit("mathTextSequence"),f(i))}function f(i){return i===null?h(i):i===36?(a=t.enter("mathTextSequence"),m=0,p(i)):i===32?(t.enter("space"),t.consume(i),t.exit("space"),f):w(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),f):(t.enter("mathTextData"),x(i))}function x(i){return i===null||i===32||i===36||w(i)?(t.exit("mathTextData"),f(i)):(t.consume(i),x)}function p(i){return i===36?(t.consume(i),m++,p):m===s?(t.exit("mathTextSequence"),t.exit("mathText"),u(i)):(a.type="mathTextData",x(i))}}}function _(e){let r=e.length-4,o=3,t,u;if((e[o][1].type==="lineEnding"||e[o][1].type==="space")&&(e[r][1].type==="lineEnding"||e[r][1].type==="space")){for(t=o;++t<r;)if(e[t][1].type==="mathTextData"){e[r][1].type="mathTextPadding",e[o][1].type="mathTextPadding",o+=2,r-=2;break}}for(t=o-1,r++;++t<=r;)u===void 0?t!==r&&e[t][1].type!=="lineEnding"&&(u=t):(t===r||e[t][1].type==="lineEnding")&&(e[u][1].type="mathTextData",t!==u+2&&(e[u][1].end=e[t-1][1].end,e.splice(u+2,t-u-2),r-=t-u-2,t=u+2),u=void 0);return e}function j(e){return e!==36||this.events[this.events.length-1][1].type==="characterEscape"}function G(e){return{flow:{36:R},text:{36:O(e)}}}const H={};function X(e){const r=this,o=e||H,t=r.data(),u=t.micromarkExtensions||(t.micromarkExtensions=[]),h=t.fromMarkdownExtensions||(t.fromMarkdownExtensions=[]),s=t.toMarkdownExtensions||(t.toMarkdownExtensions=[]);u.push(G(o)),h.push(B()),s.push(V(o))}export{X as default};
//# sourceMappingURL=gqbxxca5ftj9iie4.js.map
