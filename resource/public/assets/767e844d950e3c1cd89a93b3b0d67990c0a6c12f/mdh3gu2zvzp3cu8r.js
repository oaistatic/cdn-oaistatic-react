import{j as t,M as A,c as Te,h as De}from"./mw35uwhq4g8r9eam.js";import{ht as Ie,dL as z,gm as Pe,hu as Re,hv as He,hw as _e,hx as Be,cP as Ae}from"./g2euln7v5pbm31qa.js";import{cD as Le,cF as L,fK as Oe,f7 as Y,fJ as Ve,D as ze,_ as Ke,u as Fe,fp as ke,ek as ye,e5 as Ce}from"./d0xa318sl7ywi0za.js";import{C as Je}from"./mpb8yfob3hqr4zw5.js";import{S as Ue}from"./iue4s7sqsxkz98qq.js";const $e=({conversation:f,isExpanded:e,agentVisualMode:d,setAgentVisualMode:o,isStreaming:x,isStopping:m,isKAUR1BR5:l})=>{const p=e||x,r=Le(),{open:u}=Ie(),c=l==!0&&!x||r;return t.jsxs("div",{className:L("flex flex-1 flex-row items-center gap-2 px-1",x?"justify-end":"justify-between"),children:[!x&&t.jsx(z,{className:L("icon-sm text-token-text-secondary inline align-middle transition-transform",e&&"rotate-90")}),!m&&p&&t.jsx("div",{className:"flex flex-row items-center justify-center gap-2",children:t.jsxs(Oe,{side:"bottom",size:"small",contentClassName:"text-sm",triggerButton:t.jsx("button",{onPointerDown:i=>i.stopPropagation(),onClick:i=>i.stopPropagation(),className:"hover:bg-token-bg-tertiary flex max-h-6 items-center justify-center overflow-visible rounded-md p-1",children:t.jsx(Ve,{className:"text-token-text-secondary size-5"})}),children:[d==="visual-cot"&&t.jsxs(Y.Item,{onClick:i=>{i.stopPropagation(),o==null||o("list-cot"),we("list-cot")},children:[t.jsx(Pe,{className:"icon"}),t.jsx(A,{id:"cot.listView",defaultMessage:"Activity"})]}),d==="list-cot"&&t.jsxs(Y.Item,{onClick:i=>{i.stopPropagation(),o==null||o("visual-cot"),we("visual-cot")},children:[t.jsx(Ue,{className:"icon"}),t.jsx(A,{id:"cot.desktopView",defaultMessage:"Desktop view"})]}),!c&&t.jsxs(Y.Item,{onClick:i=>{i.stopPropagation(),u()},children:[t.jsx(Re,{className:"icon"}),l?t.jsx(A,{id:"qMkIYk",defaultMessage:"Open tabs"}):t.jsx(A,{id:"cot.takeOverBrowser",defaultMessage:"Take over browser"})]}),!r&&x&&t.jsxs(Y.Item,{onClick:()=>He(f.id,void 0,{clientInitiated:!0,reason:"agent_cot_stop",isLastTurnAgent:!0}),children:[t.jsx(_e,{className:"icon"}),t.jsx(A,{id:"cot.stop",defaultMessage:"Stop"})]})]})})]})},we=f=>{ze.addAction("agent.cot_view_change",{cot_view:f}),Ke.logEvent("Agent CoT View Change",{cot_view:f})},We=f=>{"use forget";const e=Te.c(77),{conversation:d,isExpanded:o,isExpandDisabled:x,showChunkIcon:m,isComplete:l,latestHeadline:p,latestChunk:r,onToggleExpanded:u,onSkip:c,shouldDisplayVisualCoT:i,agentVisualMode:g,setAgentVisualMode:h,isStreaming:v,interruptionInProgress:Z,isAgentVisualCoT:fe,isKAUR1BR5:me,wasInterrupted:ue,isAgentTurn:Ne,isGlauxTurn:ge,taskType:K,activeTask:he,showTitle:ve,title:F,isTitleClickable:je,onTitleClick:be}=f,k=o===void 0?!1:o,y=x===void 0?!1:x,Q=m===void 0?!0:m,O=i===void 0?!1:i,J=fe===void 0?!1:fe,W=me===void 0?!1:me,Me=ue===void 0?!1:ue,Ee=ve===void 0?!1:ve,V=je===void 0?!1:je,a=De(),ee=Fe();let U;e[0]!==a||e[1]!==K?(U=K===ke.PRO_MODE?a.formatMessage({id:"wOEgCa",defaultMessage:"Pro thinking"}):K===ke.RESEARCH?a.formatMessage({id:"oNdsTH",defaultMessage:"Researching"}):void 0,e[0]=a,e[1]=K,e[2]=U):U=e[2];const j=U;let n;if(p&&p.length>0)n=p;else if(l)if(Me){let s;e[3]!==a?(s=a.formatMessage({id:"tD55er",defaultMessage:"Stopped thinking"}),e[3]=a,e[4]=s):s=e[4],n=s}else{let s;e[5]!==a?(s=a.formatMessage({id:"nkvZJE",defaultMessage:"Thought"}),e[5]=a,e[6]=s):s=e[6],n=s}else if(ge){let s;e[7]!==a?(s=a.formatMessage({id:"4XsLlK",defaultMessage:"Searching internal apps"}),e[7]=a,e[8]=s):s=e[8],n=s}else if(he&&j)n=he.title;else{let s;e[9]!==a?(s=a.formatMessage({id:"hgnsat",defaultMessage:"Thinking"}),e[9]=a,e[10]=s):s=e[10],n=s}const te=!!Ne;let $;e[11]!==ee||e[12]!==te?($=Be(ee,te),e[11]=ee,e[12]=te,e[13]=$):$=e[13];const C=$,se=!l&&(!k||C&&k)&&c&&!ge;let ie;e:{if(y){ie=!1;break e}ie=C&&!J&&u}const ae=ie,ne=V?be:u,oe=V?!1:y,le=Ee&&F,re=(k||v)&&O&&"justify-between";let w;e[14]!==re?(w=L("flex min-w-0 shrink-1 items-center gap-0.5",re),e[14]=re,e[15]=w):w=e[15];const ce=!l&&"loading-shimmer",de=!j&&"font-medium";let T;e[16]!==ce||e[17]!==de?(T=L(ce,de,"w-full"),e[16]=ce,e[17]=de,e[18]=T):T=e[18];const Se=n,xe=j&&v&&"text-token-text-tertiary",pe=l&&(y?"text-token-text-secondary dark:text-[var(--interactive-label-tertiary-default)]":"text-token-text-secondary hover:text-token-text-primary dark:hover:text-token-text-primary dark:text-[var(--interactive-label-tertiary-default)]");let N;e[19]!==xe||e[20]!==pe?(N=L("flex items-center gap-1 truncate text-start align-middle",xe,pe),e[19]=xe,e[20]=pe,e[21]=N):N=e[21];let q,G;e[22]===Symbol.for("react.memo_cache_sentinel")?(q={opacity:1},G={type:"spring",duration:.3},e[22]=q,e[23]=G):(q=e[22],G=e[23]);let b;e[24]!==l||e[25]!==r||e[26]!==Q?(b=Q&&(r==null?void 0:r.type)!==Ae.Recap&&t.jsx(Je,{chunk:r,isAnimated:!l,size:"medium",className:"text-token-text-tertiary",isHeadline:!0}),e[24]=l,e[25]=r,e[26]=Q,e[27]=b):b=e[27];let M;e[28]!==n||e[29]!==v||e[30]!==j?(M=j&&v&&t.jsxs("span",{className:"text-token-text-primary font-medium",children:[j,n.length>0?" • ":""]}),e[28]=n,e[29]=v,e[30]=j,e[31]=M):M=e[31];let E;e[32]!==V||e[33]!==le||e[34]!==F?(E=le&&t.jsxs("span",{className:"inline-flex items-center gap-1",children:[t.jsx("span",{"aria-hidden":!0,className:"text-token-text-tertiary ms-1",children:" • "}),t.jsx("span",{className:"text-token-text-tertiary",children:F}),V&&t.jsx(z,{className:"icon-xs text-token-text-tertiary"})]}),e[32]=V,e[33]=le,e[34]=F,e[35]=E):E=e[35];let S;e[36]!==n||e[37]!==b||e[38]!==M||e[39]!==E?(S=t.jsxs("div",{className:"truncate",children:[b,M,n,E]}),e[36]=n,e[37]=b,e[38]=M,e[39]=E,e[40]=S):S=e[40];let D;e[41]!==ae?(D=ae&&t.jsx(z,{className:"icon-xs"}),e[41]=ae,e[42]=D):D=e[42];let I;e[43]!==n||e[44]!==N||e[45]!==S||e[46]!==D?(I=t.jsx(ye,{mode:"popLayout",children:t.jsxs(Ce.span,{className:N,initial:!1,animate:q,transition:G,children:[S,D]},Se)}),e[43]=n,e[44]=N,e[45]=S,e[46]=D,e[47]=I):I=e[47];let P;e[48]!==T||e[49]!==I?(P=t.jsx("span",{className:T,children:I}),e[48]=T,e[49]=I,e[50]=P):P=e[50];let R;e[51]!==g||e[52]!==d||e[53]!==Z||e[54]!==J||e[55]!==y||e[56]!==k||e[57]!==W||e[58]!==v||e[59]!==h||e[60]!==O?(R=(!y||O)&&J&&t.jsx(qe,{conversation:d,isExpanded:k,shouldDisplayVisualCoT:O,agentVisualMode:g,setAgentVisualMode:h,isStreaming:v,isStopping:!!Z,isKAUR1BR5:W}),e[51]=g,e[52]=d,e[53]=Z,e[54]=J,e[55]=y,e[56]=k,e[57]=W,e[58]=v,e[59]=h,e[60]=O,e[61]=R):R=e[61];let H;e[62]!==oe||e[63]!==ne||e[64]!==w||e[65]!==P||e[66]!==R?(H=t.jsxs("button",{disabled:oe,onClick:ne,className:w,children:[P,R]}),e[62]=oe,e[63]=ne,e[64]=w,e[65]=P,e[66]=R,e[67]=H):H=e[67];let _;e[68]!==C||e[69]!==c||e[70]!==se?(_=se&&t.jsx(Ce.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},transition:{type:"spring",duration:.3},children:t.jsx("button",{onClick:s=>{c==null||c(s),s.stopPropagation()},className:"text-token-text-tertiary hover:text-token-text-primary whitespace-nowrap",children:t.jsxs("span",{className:C?"underline decoration-dotted":"flex items-center gap-0.5",children:[t.jsx(A,{id:"xMM6dg",defaultMessage:"Answer now"}),!C&&t.jsx(z,{className:"icon-xs"})]})})}),e[68]=C,e[69]=c,e[70]=se,e[71]=_):_=e[71];let B;e[72]!==_?(B=t.jsx(ye,{mode:"popLayout",children:_}),e[72]=_,e[73]=B):B=e[73];let X;return e[74]!==H||e[75]!==B?(X=t.jsx("div",{className:"relative w-full text-start",children:t.jsxs("div",{className:"flex w-full flex-row items-start justify-between gap-4 text-start",children:[H,B]})}),e[74]=H,e[75]=B,e[76]=X):X=e[76],X},qe=f=>{"use forget";const e=Te.c(12),{conversation:d,isExpanded:o,shouldDisplayVisualCoT:x,agentVisualMode:m,setAgentVisualMode:l,isStreaming:p,isStopping:r,isKAUR1BR5:u}=f;if(x){let h;return e[0]!==m||e[1]!==d||e[2]!==o||e[3]!==u||e[4]!==r||e[5]!==p||e[6]!==l?(h=t.jsx($e,{conversation:d,isExpanded:o,agentVisualMode:m,setAgentVisualMode:l,isStreaming:p,isStopping:r,isKAUR1BR5:u}),e[0]=m,e[1]=d,e[2]=o,e[3]=u,e[4]=r,e[5]=p,e[6]=l,e[7]=h):h=e[7],h}const c=o&&"rotate-90";let i;e[8]!==c?(i=L("icon-sm text-token-text-secondary inline align-middle transition-transform",c),e[8]=c,e[9]=i):i=e[9];let g;return e[10]!==i?(g=t.jsx(z,{className:i}),e[10]=i,e[11]=g):g=e[11],g};export{We as C};
//# sourceMappingURL=mdh3gu2zvzp3cu8r.js.map
