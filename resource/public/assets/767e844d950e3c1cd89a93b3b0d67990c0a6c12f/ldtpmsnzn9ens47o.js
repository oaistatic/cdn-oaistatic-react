var le=Object.defineProperty,fe=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var j=(e,t,s)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,f=(e,t)=>{for(var s in t||(t={}))G.call(t,s)&&j(e,s,t[s]);if(O)for(var s of O(t))Y.call(t,s)&&j(e,s,t[s]);return e},v=(e,t)=>fe(e,me(t));var X=e=>typeof e=="symbol"?e:e+"",Z=(e,t)=>{var s={};for(var r in e)G.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&O)for(var r of O(e))t.indexOf(r)<0&&Y.call(e,r)&&(s[r]=e[r]);return s};import{c as S,a as he,d as de,r as x,b as m,t as $,W as ge}from"./mw35uwhq4g8r9eam.js";import{aL as h,au as d,e as ye,J as pe,u as Te,la as _e,tg as C,aT as H,aV as Re}from"./d0xa318sl7ywi0za.js";import{W as J,a as ee,b as te}from"./ohau9tqj1fpdibg0.js";import{W as l}from"./baz4b8nlf8t2lb95.js";const ve=10080*60*1e3,we=5,Ee={},be={};function se(){return Date.now()}function P(e){return typeof e=="object"&&e!=null}function ae(e){return se()-e.updatedAt>ve}function re(e){if(!P(e))return null;const t=e.branch,s=e.updatedAt;return typeof t!="string"||typeof s!="number"?null:{branch:t,updatedAt:s}}function We(e){if(!P(e)||Array.isArray(e))return f({},Ee);const t={};for(const[s,r]of Object.entries(e)){const n=re(r);n&&(t[s]=n)}return t}function Fe(e){if(!P(e)||Array.isArray(e))return f({},be);const t={};for(const[s,r]of Object.entries(e)){if(!Array.isArray(r))continue;const n=[];for(const a of r){const i=re(a);i&&n.push(i)}n.length>0&&(t[s]=n)}return t}function Q(e){Object.keys(e).length===0?h.removeItem(d.WhamRepoRecentBranchesById):h.setItem(d.WhamRepoRecentBranchesById,e)}function B(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s+=1){const r=e[s],n=t[s];if(r.branch!==n.branch||r.updatedAt!==n.updatedAt)return!1}return!0}function K(e){if(!e||e.length===0)return[];const t=[...e].sort((n,a)=>a.updatedAt-n.updatedAt),s=[],r=new Set;for(const n of t)if(!ae(n)&&!r.has(n.branch)&&(s.push(n),r.add(n.branch),s.length===we))break;return s}function Ae(e){let t=!1;for(const[s,r]of Object.entries(e)){const n=K(r);if(n.length===0){r.length>0&&(t=!0,delete e[s]);continue}B(n,r)||(e[s]=n,t=!0)}return t}function Se(){const e=h.getItem(d.WhamRepoLastBranchById);return We(e)}function Ce(e){var n;const t=Se();if(Object.keys(t).length===0)return!1;let r=!1;for(const[a,i]of Object.entries(t)){if(ae(i)){r=!0;continue}const o=(n=e[a])!=null?n:[],u=K([i,...o]);u.length>0&&!B(u,o)&&(e[a]=u,r=!0)}return h.removeItem(d.WhamRepoLastBranchById),r}function N(){const e=h.getItem(d.WhamRepoRecentBranchesById),t=Fe(e),s=Ae(t),r=Ce(t);return(s||r)&&Q(t),t}function ke(e,t,s){var a;if(s.length===0){e[t]&&(delete e[t],Q(e));return}const r=K(s),n=(a=e[t])!=null?a:[];B(r,n)||(e[t]=r,Q(e))}function De(e,t,s){var a;if(!t||!s)return;const r=(a=e[t])!=null?a:[],n=K([{branch:s,updatedAt:se()},...r]);ke(e,t,n)}function ie(e){if(!e)return null;const s=N()[e];return!s||s.length===0?null:s[0].branch}function qe(e,t){if(!e||!t)return;const s=N();De(s,e,t)}function ut(e){var s,r;return e?(r=(s=N()[e])==null?void 0:s.map(n=>n.branch))!=null?r:[]:[]}const Me=()=>{const e=h.getItem(d.WhamLastRepositoryId);return typeof e=="string"?e:null},M=Me(),Le=()=>M?ie(M):null,k=ye()((e,t)=>{var s,r;return{environmentId:h.getItem(d.LastEnvironment),branch:Le(),manuallyAddedBranches:[],promptDraft:(s=h.getItem(d.PromptDraft))!=null?s:"",selectedRepositoryId:M!=null?M:null,taskTurnMap:{},showReactQueryDevtools:!1,lastClickedChangelogDate:(r=h.getItem(d.WhamChangelogClickedDate))!=null?r:null,pendingTaskIds:{},pendingCodeReviewIds:{},fixReviewTasksInFlight:{},hasSubmittedTaskInSession:!1,lastViewedTaskId:null,bestOfN:h.getItem(d.WhamBestOfN),codexOnboardingState:h.getItem(d.WhamCodexOnboardingState),preferredEditor:(function(){const n=h.getItem(d.WhamPreferredEditor);return["cursor","vscode","windsurf"].includes(n)?n:"vscode"})(),homeTab:"all",autoCreatedEnvironmentId:null,showEnvironmentOnboardingPopover:!1,shouldHighlightTasksTab:!1,useRepositoryAsEnvironment:!1,_fetchedRateLimitStatus:null,_forcedRateLimit:(function(){return null})(),setShowReactQueryDevtools:n=>{h.setItem(d.ReactQueryDevtoolsVisible,n),e({showReactQueryDevtools:n})},setLastClickedChangelogDate:n=>{h.setItem(d.WhamChangelogClickedDate,n),e({lastClickedChangelogDate:n})},setPromptDraft:n=>{h.setItem(d.PromptDraft,n),e({promptDraft:n})},setEnvironmentId:n=>{n==null?h.removeItem(d.LastEnvironment):h.setItem(d.LastEnvironment,n),e(a=>({environmentId:n,useRepositoryAsEnvironment:n!=null?!1:a.useRepositoryAsEnvironment}))},setBranch:n=>e(a=>{const i=a.selectedRepositoryId;return i&&n&&qe(i,n),{branch:n}}),setSelectedRepositoryId:n=>{n==null?h.removeItem(d.WhamLastRepositoryId):h.setItem(d.WhamLastRepositoryId,n),e(a=>{const i=n!=null?ie(n):null;return{selectedRepositoryId:n,branch:n!=null?i!=null?i:null:a.branch,useRepositoryAsEnvironment:n?a.useRepositoryAsEnvironment:!1}})},setUseRepositoryAsEnvironment:n=>e({useRepositoryAsEnvironment:n}),addManuallyAddedBranch:n=>e(a=>a.manuallyAddedBranches.includes(n)?{}:{manuallyAddedBranches:[n,...a.manuallyAddedBranches]}),setHomeTabValue:n=>e({homeTab:n}),setLastViewedTaskId:n=>e({lastViewedTaskId:n}),setAutoCreatedEnvironment:n=>e({autoCreatedEnvironmentId:n,showEnvironmentOnboardingPopover:!0}),dismissEnvironmentOnboardingPopover:()=>e({showEnvironmentOnboardingPopover:!1}),setHasSubmittedTaskInSession:n=>e({hasSubmittedTaskInSession:n}),addTurnToTaskMap:(n,a)=>{e(i=>{const o=i.taskTurnMap[n],u=o?f({},o):{};return u[a.id]=a,{taskTurnMap:v(f({},i.taskTurnMap),{[n]:u})}})},updateTurnDiscarded:(n,a,i)=>{e(o=>{const u=o.taskTurnMap[n],c=u==null?void 0:u[a];return!u||!c?{}:{taskTurnMap:v(f({},o.taskTurnMap),{[n]:v(f({},u),{[a]:v(f({},c),{discarded:i})})})}})},getTurnsForTask:n=>{var i;const a=(i=t().taskTurnMap[n])!=null?i:[];return Object.values(a).sort((o,u)=>o.created_at-u.created_at)},addPendingTaskId:n=>{const a=f({},t().pendingTaskIds);a[n]=n,e({pendingTaskIds:a})},removePendingTaskId:n=>{const a=f({},t().pendingTaskIds);delete a[n],e({pendingTaskIds:a})},removePendingTaskByTaskId:n=>{var o;const a=t().pendingTaskIds,[i]=(o=Object.entries(a).find(([u,c])=>c===n))!=null?o:[];if(i){const u=f({},a);delete u[i],e({pendingTaskIds:u})}},assignPendingTaskToFinalTask:(n,a)=>e(i=>({pendingTaskIds:v(f({},i.pendingTaskIds),{[n]:a})})),addPendingCodeReviewId:n=>{const a=f({},t().pendingCodeReviewIds);a[n]=n,e({pendingCodeReviewIds:a})},removePendingCodeReviewId:n=>{const a=f({},t().pendingCodeReviewIds);delete a[n],e({pendingCodeReviewIds:a})},assignPendingCodeReviewToFinalTask:(n,a)=>e(i=>({pendingCodeReviewIds:v(f({},i.pendingCodeReviewIds),{[n]:a})})),markFixReviewTaskInFlight:n=>e(a=>({fixReviewTasksInFlight:v(f({},a.fixReviewTasksInFlight),{[n]:!0})})),clearFixReviewTaskInFlight:n=>e(a=>{if(!a.fixReviewTasksInFlight[n])return{};const u=a.fixReviewTasksInFlight,{[n]:i}=u;return{fixReviewTasksInFlight:Z(u,[X(n)])}}),resetFixedReviewTasks:()=>e(()=>({fixReviewTasksInFlight:{}})),getRateLimitStatus:()=>t()._fetchedRateLimitStatus,setRateLimitStatus:n=>e({_fetchedRateLimitStatus:n}),forceRateLimit:n=>{},setBestOfN:n=>{h.setItem(d.WhamBestOfN,n),e({bestOfN:n})},setPreferredEditor:n=>{h.setItem(d.WhamPreferredEditor,n),e({preferredEditor:n})},setCodexOnboardingState:n=>{h.setItem(d.WhamCodexOnboardingState,n),e({codexOnboardingState:n})},setShouldHighlightTasksTab:n=>e({shouldHighlightTasksTab:n})}});function Ie(e){return pe(e,"2894268612")||void 0}const ne="tab";function Oe(e){switch(e){case"code_reviews":return"code_reviews";case"archived":return"archived";case"all":default:return"all"}}function Ke(e){return e==="archived"?"archived":e==="code_reviews"?"code_review":"current"}function ct(){"use forget";const e=S.c(35),t=Te(),s=he(),r=de(),n=k(Qe),a=k(xe);let i;e[0]!==t?(i=Ie(t),e[0]=t,e[1]=i):i=e[1];const o=i;let u;e[2]!==s.search?(u=new URLSearchParams(s.search),e[2]=s.search,e[3]=u):u=e[3];const c=u;let y,T;e[4]!==c?(y=c.get(ne),T=Oe(y),e[4]=c,e[5]=y,e[6]=T):(y=e[5],T=e[6]);const p=T,w=y!=null;let g;e[7]!==o||e[8]!==w||e[9]!==p||e[10]!==n?(g=w?p:n,g==="code_reviews"&&!o&&(g="all"),e[7]=o,e[8]=w,e[9]=p,e[10]=n,e[11]=g):g=e[11];let b;e[12]!==g||e[13]!==a||e[14]!==n?(b=()=>{n!==g&&a(g)},e[12]=g,e[13]=a,e[14]=n,e[15]=b):b=e[15];let _;e[16]!==g||e[17]!==a||e[18]!==n?(_=[g,a,n],e[16]=g,e[17]=a,e[18]=n,e[19]=_):_=e[19],x.useEffect(b,_);let W;e[20]!==o||e[21]!==s.pathname||e[22]!==s.search||e[23]!==r||e[24]!==a?(W=U=>{const V=U==="code_reviews"&&!o?"all":U;a(V);const z=new URLSearchParams(s.search);z.set(ne,V),r({pathname:s.pathname,search:z.toString()},{replace:!0})},e[20]=o,e[21]=s.pathname,e[22]=s.search,e[23]=r,e[24]=a,e[25]=W):W=e[25];const R=W;let F,A;e[26]!==o||e[27]!==y||e[28]!==R?(F=()=>{y==="code_reviews"&&!o&&R("all")},A=[o,y,R],e[26]=o,e[27]=y,e[28]=R,e[29]=F,e[30]=A):(F=e[29],A=e[30]),x.useEffect(F,A);let I;return e[31]!==w||e[32]!==g||e[33]!==R?(I={homeTab:g,setHomeTab:R,hasExplicitTab:w},e[31]=w,e[32]=g,e[33]=R,e[34]=I):I=e[34],I}function xe(e){return e.setHomeTabValue}function Qe(e){return e.homeTab}function lt(e,t=!1){var s,r,n;return(n=(r=(s=e==null?void 0:e.output_items)==null?void 0:s.map(a=>!t&&a.type==="output_diff"?a.diff:t&&a.type==="follow_up_diff"||!t&&a.type==="pr"?a.output_diff.diff:!t&&a.type==="cr"?a.reviewed_diff.diff:null))==null?void 0:r.filter(a=>!!a))!=null?n:[]}function $e(e){var a,i,o,u;if(e==null)return"";const t=(i=(a=e==null?void 0:e.environment)==null?void 0:a.repos)==null?void 0:i[0],s=t?(u=(o=e==null?void 0:e.environment)==null?void 0:o.repo_map)==null?void 0:u[t]:null,r=s&&Pe(s)?He(s.git_url):null,n=e==null?void 0:e.branch;return e.output_items.filter(c=>c.type==="message").flatMap(c=>c.content).map(c=>{switch(c.content_type){case"text":return c.text;case"terminal_chunk_citation":return"".concat(C,":").concat(te,"[").concat(te,"]{line_range_start=").concat(c.line_range_start," line_range_end=").concat(c.line_range_end," terminal_chunk_id=").concat(c.terminal_chunk_id,"}").concat(C);case"repo_file_citation":{const T=r?"".concat(r,"/blob/").concat(n,"/").concat(c.path,"#L").concat(c.line_range_start,"-L").concat(c.line_range_end):null;return"".concat(C,":").concat(ee,"[").concat(ee,"]{line_range_start=").concat(c.line_range_start," line_range_end=").concat(c.line_range_end," path=").concat(c.path).concat(T?' git_url="'.concat(T,'"'):"","}").concat(C)}case"image_asset_pointer":return"";case"image_asset_pointer_citation":return"".concat(C,":").concat(J,"[").concat(J,"]{asset_pointer=").concat(c.asset_pointer,"}").concat(C);case void 0:return""}return""}).join("")}function He(e){return e.replace(/\.git$/,"").replace("git://","https://")}function Pe(e){var t,s,r;return((t=e==null?void 0:e.id)==null?void 0:t.startsWith("github"))||((r=(s=e==null?void 0:e.git_url)==null?void 0:s.indexOf("github.com"))!=null?r:-1)>=0}function oe(e){return"output_items"in e}function Be(e){return"input_items"in e}function Ne(e){var t,s,r,n;return e&&(n=(r=(s=(t=e.input_items)==null?void 0:t.flatMap(a=>"content"in a?a==null?void 0:a.content:[]))==null?void 0:s.map(a=>a.content_type==="text"?a.text:""))==null?void 0:r.join(""))!=null?n:""}function ft(e){return e?oe(e)?$e(e):Ne(e):""}function Ue(e){return e.type==="cr"}function mt(e){if(!e||!oe(e)||!e.output_items)return[];const t=[];for(const s of e.output_items)Ue(s)&&t.push(...s.comments);return t}function ht(e,t){return e?t.filter(s=>Be(s)&&s.previous_turn_id===e.id).flatMap(s=>{var r;return((r=s.input_items)!=null?r:[]).filter(n=>n.type==="comment")}):[]}function dt(e){return(e==null?void 0:e.turn)!=null}function gt(e){return e.type==="assistant"&&e.pull_request_status!=="not_created"&&e.pull_request_status!=="failed"}function yt(e){var s;const t=(s=e.task_status_display)==null?void 0:s.latest_turn_status_display;return t?Ve(t):!0}function ue(e){switch(e){case null:case void 0:case"completed":case"failed":case"cancelled":return!0;case"pending":case"in_progress":return!1;default:_e(e)}}function Ve(e){return e?ue(e.turn_status)?!0:!!e.cancellation_requested_at:!1}const D=["wham","environments","with-creators","infinite"],L=["wham","environments","with-creators","list"],q=["wham","recent_environments"];function pt(e){return[...D,{pageSize:e.pageSize,enforceRepoAccess:e.enforceRepoAccess}]}const E=60*1e3,Tt=(e,t,s)=>f({staleTime:0,queryKey:["wham","task",e,t],enabled:!!e&&!!t,queryFn:()=>l.getTaskTurn(e!=null?e:"",t!=null?t:"")},s||{}),ze=(e,t)=>f({queryKey:["wham","task",e],staleTime:0,enabled:!!e,queryFn:async()=>await l.getTaskDetails(e!=null?e:"")},t||{}),_t=(e,t)=>{const s=ze(e,t);return m(s)},je=19;function ce(e){return ge({queryKey:["wham","tasks",e],queryFn:({pageParam:t})=>l.getTasksForList(je,t!=null?t:null,e),initialPageParam:null,getNextPageParam:({cursor:t})=>t,staleTime:15*1e3})}function Rt({filter:e,enabled:t=!0,refetchOnMount:s=!1,refetchOnWindowFocus:r=!1}={}){const n=k(({homeTab:i})=>i),a=e!=null?e:Ke(n);return $(v(f({},ce(a)),{enabled:t,refetchOnMount:s,refetchOnWindowFocus:r}))}function vt({enabled:e=!0}={}){return m({queryKey:["wham","tasks","has-any"],queryFn:async()=>{var s,r;return((r=(s=(await l.getTasksForList(1,null,"all")).items)==null?void 0:s.length)!=null?r:0)>0},enabled:e})}function wt(){return $(v(f({},ce("all")),{select:e=>{var s,r;const t=e.pages[0];return((r=(s=t==null?void 0:t.items)==null?void 0:s.length)!=null?r:0)>=5}}))}function Et(e){"use forget";const t=S.c(18),s=k(Xe),r=k(Ye);let n;t[0]!==e||t[1]!==s?(n=typeof e=="function"?e(s):e,t[0]=e,t[1]=s,t[2]=n):n=t[2];const a=n;let i;t[3]!==a?(i=a!=null?a:{},t[3]=a,t[4]=i):i=t[4];const{staleTime:o,enabled:u,refetchOnWindowFocus:c,refetchInterval:y}=i,T=o===void 0?E:o,p=u===void 0?!0:u,w=c===void 0?!1:c;let g;t[5]===Symbol.for("react.memo_cache_sentinel")?(g=["wham","usage","rate-limit-status"],t[5]=g):g=t[5];let b;t[6]!==p||t[7]!==y||t[8]!==w||t[9]!==T?(b={queryKey:g,queryFn:Ge,staleTime:T,retry:!1,enabled:p,refetchOnWindowFocus:w,refetchInterval:y},t[6]=p,t[7]=y,t[8]=w,t[9]=T,t[10]=b):b=t[10];const _=m(b);let W,R;t[11]!==_.data||t[12]!==r?(W=()=>{var A;typeof _.data>"u"||r((A=_.data)!=null?A:null)},R=[_.data,r],t[11]=_.data,t[12]=r,t[13]=W,t[14]=R):(W=t[13],R=t[14]),x.useEffect(W,R);let F;return t[15]!==_||t[16]!==s?(F=v(f({},_),{data:s}),t[15]=_,t[16]=s,t[17]=F):F=t[17],F}function Ge(){return l.getRateLimitStatus()}function Ye(e){return e.setRateLimitStatus}function Xe(e){return e.getRateLimitStatus()}function bt(e){"use forget";const t=S.c(5);let s;t[0]!==e?(s={},t[0]=e,t[1]=s):s=t[1];const{staleTime:r}=s,n=r===void 0?E:r;let a;t[2]===Symbol.for("react.memo_cache_sentinel")?(a=["wham","usage","daily-token-usage-breakdown"],t[2]=a):a=t[2];let i;return t[3]!==n?(i={queryKey:a,queryFn:Ze,staleTime:n,retry:!1},t[3]=n,t[4]=i):i=t[4],m(i)}function Ze(){return l.getDailyTokenUsageBreakdown()}function Wt(e){"use forget";const t=S.c(6);let s;t[0]!==e?(s=e===void 0?{}:e,t[0]=e,t[1]=s):s=t[1];const{staleTime:r,enabled:n}=s,a=r===void 0?E:r,i=n===void 0?!0:n;let o;t[2]===Symbol.for("react.memo_cache_sentinel")?(o=["wham","usage","daily-enterprise-token-usage-breakdown"],t[2]=o):o=t[2];let u;return t[3]!==i||t[4]!==a?(u={queryKey:o,queryFn:Je,staleTime:a,retry:!1,enabled:i},t[3]=i,t[4]=a,t[5]=u):u=t[5],m(u)}function Je(){return l.getDailyEnterpriseTokenUsageBreakdown()}function Ft(e){"use forget";const t=S.c(6);let s;t[0]!==e?(s={},t[0]=e,t[1]=s):s=t[1];const{staleTime:r,enabled:n}=s,a=r===void 0?E:r,i=n===void 0?!0:n;let o;t[2]===Symbol.for("react.memo_cache_sentinel")?(o=["wham","usage","credit-usage-events"],t[2]=o):o=t[2];let u;return t[3]!==i||t[4]!==a?(u={queryKey:o,queryFn:et,staleTime:a,retry:!1,enabled:i},t[3]=i,t[4]=a,t[5]=u):u=t[5],m(u)}function et(){return l.getCreditUsageEvents()}function At({retry:e=0}={}){return m({queryKey:["wham","environments"],queryFn:()=>l.getEnvironments(),retry:e})}function St({retry:e=0}={}){return m({queryKey:q,queryFn:()=>l.getRecentEnvironments(),retry:e})}function Ct(){return m({queryKey:["wham","githubLogin"],queryFn:()=>l.getUserHandle()})}function kt(e=!0){return m({queryKey:["wham","githubInstallationsV2"],queryFn:()=>l.getGithubInstallationsV2(),staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,enabled:e})}function Dt(){return m({queryKey:["wham","tasks","samples"],queryFn:()=>l.getSampleTasks(10,null)})}function qt(e,t,s){const r=v(f({},t),{creator:s});e.setQueryData(["wham","environments"],n=>n?[t,...n]:[t]),e.getQueriesData({queryKey:D}).forEach(([n])=>{e.setQueryData(n,a=>a&&H(a,i=>{i.pages.length>0&&i.pages[0].items.unshift(r)}))}),e.getQueriesData({queryKey:L}).forEach(([n])=>{e.setQueryData(n,a=>a?[r,...a]:[r])}),e.setQueryData(q,n=>{if(!n)return n;const a=n.filter(i=>i.id!==t.id);return[t,...a]})}function Mt(e,t){e.setQueryData(["wham","environments"],s=>s==null?void 0:s.filter(r=>r.id!==t)),e.getQueriesData({queryKey:D}).forEach(([s])=>{e.setQueryData(s,r=>r&&H(r,n=>{n.pages.forEach(a=>{a.items=a.items.filter(i=>i.id!==t)})}))}),e.getQueriesData({queryKey:L}).forEach(([s])=>{e.setQueryData(s,r=>r==null?void 0:r.filter(n=>n.id!==t))}),e.setQueryData(q,s=>s==null?void 0:s.filter(r=>r.id!==t))}function Lt(e,t,s){e.setQueryData(["wham","environments"],r=>r==null?void 0:r.map(n=>n.id===t?s:n)),e.getQueriesData({queryKey:D}).forEach(([r])=>{e.setQueryData(r,n=>n&&H(n,a=>{a.pages.forEach(i=>{i.items=i.items.map(o=>o.id===t?f(f({},o),s):o)})}))}),e.setQueryData(["environments",t,"withCreatorAndMachine"],r=>r?f(f({},r),s):void 0),e.getQueriesData({queryKey:L}).forEach(([r])=>{e.setQueryData(r,n=>n==null?void 0:n.map(a=>a.id===t?f(f({},a),s):a))}),e.setQueryData(q,r=>r==null?void 0:r.map(n=>n.id===t?f(f({},n),s):n))}function It(e){return m({queryKey:["environments",e,"withCreatorAndMachine"],queryFn:()=>l.getEnvironmentWithCreatorAndMachine(e)})}function Ot(){return m({queryKey:["wham","userPreferences"],queryFn:()=>l.getUserPreferences()})}function Kt(){return m({queryKey:["wham","githubInstallationEventsV2"],queryFn:()=>l.getGithubInstallationEventsV2(),staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0})}function tt(e){if(!e)return null;let t=e.trim().toLowerCase();if(!t)return null;const s=["https://","http://"];for(const i of s)if(t.startsWith(i)){t=t.slice(i.length);break}for(t.startsWith("www.")&&(t=t.slice(4)),t.startsWith("github.com/")&&(t=t.slice(11)),t.endsWith(".git")&&(t=t.slice(0,-4));t.startsWith("/");)t=t.slice(1);for(;t.endsWith("/");)t=t.slice(0,-1);const r=t.split("/").filter(Boolean);if(r.length<2)return null;const[n,a]=r;return!n||!a?null:"".concat(n,"/").concat(a)}const nt=20;function xt(e,t={}){var u;const s=e.trim(),r=t.installationIds,n=r?[...r].sort():void 0,a=(u=t.limit)!=null?u:nt,i=s.length>0,o=n;return $({queryKey:["wham","codeReviewRepositories","v2",s,n,a],initialPageParam:i?1:null,queryFn:async({pageParam:c})=>{const y=tt(s),T=c==null||c===1;if(y&&T)try{return{repo_review_settings:[await l.getCodeReviewRepository("github",y)],next_token:null}}catch(p){if(!(p instanceof Re&&(p.status===400||p.status===403||p.status===404)))throw p}return i?l.searchCodeReviewRepositories({query:s,limit:a,installationIds:o,page:c!=null?c:1}):l.getCodeReviewRepositories({search:s||void 0,nextToken:void 0})},getNextPageParam:(c,y)=>{var T,p;return i?((p=(T=c==null?void 0:c.repo_review_settings)==null?void 0:T.length)!=null?p:0)<a?null:y.length+1:null},refetchOnWindowFocus:!0})}function Qt(){return m({queryKey:["wham","userPreferencesConfig"],queryFn:()=>l.getUserPreferencesConfig()})}async function $t(e){await Promise.all([e.invalidateQueries({queryKey:["wham","environments"]}),e.invalidateQueries({queryKey:D}),e.invalidateQueries({queryKey:L}),e.invalidateQueries({queryKey:q})])}async function Ht(e,t){await Promise.all([e.invalidateQueries({queryKey:["environments",t,"withCreatorAndMachine"]}),e.invalidateQueries({queryKey:D}),e.invalidateQueries({queryKey:L}),e.invalidateQueries({queryKey:q})])}function Pt(e){return e.invalidateQueries({queryKey:["wham","userPreferences"]})}function Bt(e){const t=k(s=>s.addTurnToTaskMap);return m({queryKey:["wham","task",e,"turns"],queryFn:async()=>{const s=await l.getTurns(e!=null?e:"");return Object.values(s.turn_mapping).forEach(r=>{t(e!=null?e:"",r.turn)}),s},enabled:!!e,staleTime:15*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0})}function Nt(e,t){return m({queryKey:["wham","task",e,"turns",t,"logs"],queryFn:()=>l.getTurnLogs(e!=null?e:"",t!=null?t:""),enabled:!!e&&!!t})}function Ut(e,t,s){return m({queryKey:["wham","task",e,"turns",t,"latest"],enabled:s&&!!e&&!!t,queryFn:()=>l.getLatestTaskTurns(e!=null?e:"",t!=null?t:""),staleTime:0,refetchInterval:({state:r})=>{var i,o;return r.data&&((o=(i=r.data)==null?void 0:i.latest_turns)==null?void 0:o.every(u=>ue(u.turn_status)))?!1:5e3}})}function Vt(){return m({queryKey:["wham","analytics","daily-code-review-counts"],queryFn:()=>l.getDailyCodeReviewCounts(),staleTime:E})}function zt(){return m({queryKey:["wham","analytics","daily-code-review-metrics"],queryFn:()=>l.getDailyCodeReviewMetrics(),staleTime:E})}function jt(){return m({queryKey:["wham","analytics","daily-web-task-counts"],queryFn:()=>l.getDailyWebTaskCounts(),staleTime:E})}function Gt(){return m({queryKey:["wham","analytics","daily-cli-vscode-usage-counts"],queryFn:()=>l.getDailyCliVsCodeUsageCounts(),staleTime:E})}function Yt({enabled:e=!0}={}){return m({queryKey:["wham","analytics","daily-sessions-messages-counts"],queryFn:()=>l.getDailySessionsMessagesCounts(),staleTime:E,enabled:e})}function Xt(e){"use forget";const t=S.c(2);let s;return t[0]!==e?(s={queryKey:["wham","repositories","repository-row-section",e],queryFn:async()=>e.length===0?await l.listRepositories({page:1,per_page:10}):await l.searchRepositoriesAllInstallations({query:e,limit:10}),staleTime:6e4},t[0]=e,t[1]=s):s=t[1],m(s)}function Zt(e){"use forget";const t=S.c(2);let s;return t[0]!==e?(s={queryKey:["wham","usage","approximate-credit-usage",e],queryFn:()=>l.getApproximateCreditUsage(e),staleTime:E},t[0]=e,t[1]=s):s=t[1],m(s)}export{Ue as $,Kt as A,Ot as B,nt as C,Qt as D,bt as E,Wt as F,Ft as G,Vt as H,zt as I,jt as J,Gt as K,Yt as L,ie as M,ut as N,Xt as O,St as P,ft as Q,Ut as R,Ke as S,yt as T,wt as U,Dt as V,D as W,ct as X,Ie as Y,ce as Z,Be as _,Ht as a,oe as a0,Nt as a1,dt as a2,gt as a3,Pt as b,It as c,Lt as d,ht as e,At as f,lt as g,vt as h,$t as i,k as j,Tt as k,q as l,ue as m,xt as n,mt as o,qt as p,kt as q,Mt as r,_t as s,Bt as t,Zt as u,Ve as v,pt as w,Rt as x,Ct as y,Et as z};
//# sourceMappingURL=ldtpmsnzn9ens47o.js.map
