const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jl1wt3my2oy15zn7.js","assets/mw35uwhq4g8r9eam.js"])))=>i.map(i=>d[i]);
var At=Object.defineProperty,Dt=Object.defineProperties;var zt=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var Ft=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable;var qe=(t,e,n)=>e in t?At(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D=(t,e)=>{for(var n in e||(e={}))Ft.call(e,n)&&qe(t,n,e[n]);if(Ve)for(var n of Ve(e))It.call(e,n)&&qe(t,n,e[n]);return t},O=(t,e)=>Dt(t,zt(e));import{g as Ot,r as x,o as Ue,_ as Bt,j as f,c as H,h as je,M as G,R as $t}from"./mw35uwhq4g8r9eam.js";import{u as Ht}from"./mnzn4aq9ma1fy9cn.js";import{gX as yt,eb as Ut,lI as Zt,xX as bt,ig as Wt,bI as Vt,iv as qt,iw as Gt,ag as Xt,ah as Yt,e6 as Jt,A1 as Kt,AG as Qt,r$ as en,fV as tn,ik as nn,il as sn}from"./g2euln7v5pbm31qa.js";import{yJ as on,iJ as rn,hd as an,jm as cn,cF as se,ks as Pe,ek as ln,e5 as _t,eA as Mt,aA as Ze,hp as un,jZ as fn,jU as dn,u as hn,J as Ge,m$ as mn,d as Xe,cd as pn,gi as gn,L as xn}from"./d0xa318sl7ywi0za.js";import{S as vn}from"./iman6sxicn70h91g.js";import{n as yn,p as bn,w as _n}from"./hdkg0cys1b7b4f0v.js";import{M as Mn}from"./kx34yg3blv92o8xp.js";function wn(){var t=yn(arguments),e=t.text,n=t.options,s=t.metadata;return bn(e,n,s)}function jn(){return _n(wn,arguments)}const B=1e-6;let ye=typeof Float32Array<"u"?Float32Array:Array;function Sn(){const t=new ye(2);return ye!=Float32Array&&(t[0]=0,t[1]=0),t}function Ye(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Cn(t,e){return t[0]=-e[0],t[1]=-e[1],t}function wt(t,e,n,s){const o=e[0],r=e[1];return t[0]=o+s*(n[0]-o),t[1]=r+s*(n[1]-r),t}(function(){const t=Sn();return function(e,n,s,o,r,i){let a,c;for(n||(n=2),s||(s=0),o?c=Math.min(o*n+s,e.length):c=e.length,a=s;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],r(t,t,i),e[a]=t[0],e[a+1]=t[1];return e}})();function Nn(){const t=new ye(3);return ye!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function En(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function kn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Rn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}const Tn=kn;(function(){const t=Nn();return function(e,n,s,o,r,i){let a,c;for(n||(n=3),s||(s=0),o?c=Math.min(o*n+s,e.length):c=e.length,a=s;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],r(t,t,i),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();function Pn(t,e){const n=e[0],s=e[1],o=e[2],r=e[3],i=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],y=e[11],_=e[12],j=e[13],m=e[14],v=e[15],M=n*a-s*i,g=n*c-o*i,p=n*l-r*i,b=s*c-o*a,w=s*l-r*a,C=o*l-r*c,k=u*j-d*_,P=u*m-h*_,T=u*v-y*_,R=d*m-h*j,E=d*v-y*j,N=h*v-y*m;let S=M*N-g*E+p*R+b*T-w*P+C*k;return S?(S=1/S,t[0]=(a*N-c*E+l*R)*S,t[1]=(o*E-s*N-r*R)*S,t[2]=(j*C-m*w+v*b)*S,t[3]=(h*w-d*C-y*b)*S,t[4]=(c*T-i*N-l*P)*S,t[5]=(n*N-o*T+r*P)*S,t[6]=(m*p-_*C-v*g)*S,t[7]=(u*C-h*p+y*g)*S,t[8]=(i*E-a*T+l*k)*S,t[9]=(s*T-n*E-r*k)*S,t[10]=(_*w-j*p+v*M)*S,t[11]=(d*p-u*w-y*M)*S,t[12]=(a*P-i*R-c*k)*S,t[13]=(n*R-s*P+o*k)*S,t[14]=(j*g-_*b-m*M)*S,t[15]=(u*b-d*g+h*M)*S,t):null}function Le(t,e,n){const s=e[0],o=e[1],r=e[2],i=e[3],a=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=e[9],y=e[10],_=e[11],j=e[12],m=e[13],v=e[14],M=e[15];let g=n[0],p=n[1],b=n[2],w=n[3];return t[0]=g*s+p*a+b*d+w*j,t[1]=g*o+p*c+b*h+w*m,t[2]=g*r+p*l+b*y+w*v,t[3]=g*i+p*u+b*_+w*M,g=n[4],p=n[5],b=n[6],w=n[7],t[4]=g*s+p*a+b*d+w*j,t[5]=g*o+p*c+b*h+w*m,t[6]=g*r+p*l+b*y+w*v,t[7]=g*i+p*u+b*_+w*M,g=n[8],p=n[9],b=n[10],w=n[11],t[8]=g*s+p*a+b*d+w*j,t[9]=g*o+p*c+b*h+w*m,t[10]=g*r+p*l+b*y+w*v,t[11]=g*i+p*u+b*_+w*M,g=n[12],p=n[13],b=n[14],w=n[15],t[12]=g*s+p*a+b*d+w*j,t[13]=g*o+p*c+b*h+w*m,t[14]=g*r+p*l+b*y+w*v,t[15]=g*i+p*u+b*_+w*M,t}function Oe(t,e,n){const s=n[0],o=n[1],r=n[2];let i,a,c,l,u,d,h,y,_,j,m,v;return e===t?(t[12]=e[0]*s+e[4]*o+e[8]*r+e[12],t[13]=e[1]*s+e[5]*o+e[9]*r+e[13],t[14]=e[2]*s+e[6]*o+e[10]*r+e[14],t[15]=e[3]*s+e[7]*o+e[11]*r+e[15]):(i=e[0],a=e[1],c=e[2],l=e[3],u=e[4],d=e[5],h=e[6],y=e[7],_=e[8],j=e[9],m=e[10],v=e[11],t[0]=i,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=d,t[6]=h,t[7]=y,t[8]=_,t[9]=j,t[10]=m,t[11]=v,t[12]=i*s+u*o+_*r+e[12],t[13]=a*s+d*o+j*r+e[13],t[14]=c*s+h*o+m*r+e[14],t[15]=l*s+y*o+v*r+e[15]),t}function jt(t,e,n){const s=n[0],o=n[1],r=n[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ln(t,e,n){const s=Math.sin(n),o=Math.cos(n),r=e[4],i=e[5],a=e[6],c=e[7],l=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*o+l*s,t[5]=i*o+u*s,t[6]=a*o+d*s,t[7]=c*o+h*s,t[8]=l*o-r*s,t[9]=u*o-i*s,t[10]=d*o-a*s,t[11]=h*o-c*s,t}function An(t,e,n){const s=Math.sin(n),o=Math.cos(n),r=e[0],i=e[1],a=e[2],c=e[3],l=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*o+l*s,t[1]=i*o+u*s,t[2]=a*o+d*s,t[3]=c*o+h*s,t[4]=l*o-r*s,t[5]=u*o-i*s,t[6]=d*o-a*s,t[7]=h*o-c*s,t}function Dn(t,e,n,s,o){const r=1/Math.tan(e/2);if(t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,o!=null&&o!==1/0){const i=1/(s-o);t[10]=(o+s)*i,t[14]=2*o*s*i}else t[10]=-1,t[14]=-2*s;return t}const zn=Dn;function Je(t,e){const n=t[0],s=t[1],o=t[2],r=t[3],i=t[4],a=t[5],c=t[6],l=t[7],u=t[8],d=t[9],h=t[10],y=t[11],_=t[12],j=t[13],m=t[14],v=t[15],M=e[0],g=e[1],p=e[2],b=e[3],w=e[4],C=e[5],k=e[6],P=e[7],T=e[8],R=e[9],E=e[10],N=e[11],S=e[12],z=e[13],A=e[14],L=e[15];return Math.abs(n-M)<=B*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(s-g)<=B*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-p)<=B*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(r-b)<=B*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-w)<=B*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-C)<=B*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(c-k)<=B*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(l-P)<=B*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(u-T)<=B*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(d-R)<=B*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(h-E)<=B*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(y-N)<=B*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(_-S)<=B*Math.max(1,Math.abs(_),Math.abs(S))&&Math.abs(j-z)<=B*Math.max(1,Math.abs(j),Math.abs(z))&&Math.abs(m-A)<=B*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(v-L)<=B*Math.max(1,Math.abs(v),Math.abs(L))}function Fn(){const t=new ye(4);return ye!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function In(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function On(t,e,n){const s=e[0],o=e[1],r=e[2],i=e[3];return t[0]=n[0]*s+n[4]*o+n[8]*r+n[12]*i,t[1]=n[1]*s+n[5]*o+n[9]*r+n[13]*i,t[2]=n[2]*s+n[6]*o+n[10]*r+n[14]*i,t[3]=n[3]*s+n[7]*o+n[11]*r+n[15]*i,t}(function(){const t=Fn();return function(e,n,s,o,r,i){let a,c;for(n||(n=4),s||(s=0),o?c=Math.min(o*n+s,e.length):c=e.length,a=s;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],r(t,t,i),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();function Ne(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ve(t,e){const n=On([],e,t);return In(n,n,1/n[3]),n}function Be(t,e,n){return t<e?e:t>n?n:t}function Bn(t){return Math.log(t)*Math.LOG2E}const $n=Math.log2||Bn;function he(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const K=Math.PI,St=K/4,ne=K/180,$e=180/K,we=512,Ke=4003e4,Ce=85.051129,Ct=1.5;function Hn(t){return Math.pow(2,t)}function xe(t){const[e,n]=t;he(Number.isFinite(e)),he(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const s=e*ne,o=n*ne,r=we*(s+K)/(2*K),i=we*(K+Math.log(Math.tan(St+o*.5)))/(2*K);return[r,i]}function Me(t){const[e,n]=t,s=e/we*(2*K)-K,o=2*(Math.atan(Math.exp(n/we*(2*K)-K))-St);return[s*$e,o*$e]}function Un(t){const{latitude:e,longitude:n,highPrecision:s=!1}=t;he(Number.isFinite(e)&&Number.isFinite(n));const o=we,r=Math.cos(e*ne),i=o/360,a=i/r,c=o/Ke/r,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[i,a,c],degreesPerUnit:[1/i,1/a,1/c]};if(s){const u=ne*Math.tan(e*ne)/r,d=i*u/2,h=o/Ke*u,y=h/a*c;l.unitsPerDegree2=[0,d,h],l.unitsPerMeter2=[y,0,y]}return l}function Zn(t){const{height:e,pitch:n,bearing:s,altitude:o,scale:r,center:i}=t,a=Ne();Oe(a,a,[0,0,-o]),Ln(a,a,-n*ne),An(a,a,s*ne);const c=r/e;return jt(a,a,[c,c,c]),i&&Oe(a,a,Rn([],i)),a}function Wn(t){const{width:e,height:n,altitude:s,pitch:o=0,offset:r,center:i,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:u=Ee(Ct)}=t;s!==void 0&&(u=Ee(s));const d=u*ne,h=o*ne,y=Nt(u);let _=y;i&&(_+=i[2]*a/Math.cos(h)/n);const j=d*(.5+(r?r[1]:0)/n),m=Math.sin(j)*_/Math.sin(Be(Math.PI/2-h-j,.01,Math.PI-.01)),v=Math.sin(h)*m+_,M=_*10,g=Math.min(v*l,M);return{fov:d,aspect:e/n,focalDistance:y,near:c,far:g}}function Vn(t){const{fov:e,aspect:n,near:s,far:o}=Wn(t);return zn([],e,n,s,o)}function Ee(t){return 2*Math.atan(.5/t)*$e}function Nt(t){return .5/Math.tan(.5*t*ne)}function qn(t,e){const[n,s,o=0]=t;return he(Number.isFinite(n)&&Number.isFinite(s)&&Number.isFinite(o)),ve(e,[n,s,o,1])}function Qe(t,e,n=0){const[s,o,r]=t;if(he(Number.isFinite(s)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(r))return ve(e,[s,o,r,1]);const i=ve(e,[s,o,0,1]),a=ve(e,[s,o,1,1]),c=i[2],l=a[2],u=c===l?0:((n||0)-c)/(l-c);return wt([],i,a,u)}function Gn(t){const{width:e,height:n,bounds:s,minExtent:o=0,maxZoom:r=24,offset:i=[0,0]}=t,[[a,c],[l,u]]=s,d=Xn(t.padding),h=xe([a,Be(u,-Ce,Ce)]),y=xe([l,Be(c,-Ce,Ce)]),_=[Math.max(Math.abs(y[0]-h[0]),o),Math.max(Math.abs(y[1]-h[1]),o)],j=[e-d.left-d.right-Math.abs(i[0])*2,n-d.top-d.bottom-Math.abs(i[1])*2];he(j[0]>0&&j[1]>0);const m=j[0]/_[0],v=j[1]/_[1],M=(d.right-d.left)/2/m,g=(d.top-d.bottom)/2/v,p=[(y[0]+h[0])/2+M,(y[1]+h[1])/2+g],b=Me(p),w=Math.min(r,$n(Math.abs(Math.min(m,v))));return he(Number.isFinite(w)),{longitude:b[0],latitude:b[1],zoom:w}}function Xn(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(he(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const et=Math.PI/180;function Yn(t,e=0){const{width:n,height:s,unproject:o}=t,r={targetZ:e},i=o([0,s],r),a=o([n,s],r);let c,l;const u=t.fovy?.5*t.fovy*et:Math.atan(.5/t.altitude),d=(90-t.pitch)*et;return u>d-.01?(c=tt(t,0,e),l=tt(t,n,e)):(c=o([0,0],r),l=o([n,0],r)),[i,a,l,c]}function tt(t,e,n){const{pixelUnprojectionMatrix:s}=t,o=ve(s,[e,0,1,1]),r=ve(s,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-o[2])/(r[2]-o[2]),c=wt([],o,r,a),l=Me(c);return l.push(n),l}class ke{constructor(e={width:1,height:1}){this.equals=v=>v instanceof ke?v.width===this.width&&v.height===this.height&&Je(v.projectionMatrix,this.projectionMatrix)&&Je(v.viewMatrix,this.viewMatrix):!1,this.project=(v,M={})=>{const{topLeft:g=!0}=M,p=this.projectPosition(v),b=qn(p,this.pixelProjectionMatrix),[w,C]=b,k=g?C:this.height-C;return v.length===2?[w,k]:[w,k,b[2]]},this.unproject=(v,M={})=>{const{topLeft:g=!0,targetZ:p=void 0}=M,[b,w,C]=v,k=g?w:this.height-w,P=p&&p*this.distanceScales.unitsPerMeter[2],T=Qe([b,k,C],this.pixelUnprojectionMatrix,P),[R,E,N]=this.unprojectPosition(T);return Number.isFinite(C)?[R,E,N]:Number.isFinite(p)?[R,E,p]:[R,E]},this.projectPosition=v=>{const[M,g]=xe(v),p=(v[2]||0)*this.distanceScales.unitsPerMeter[2];return[M,g,p]},this.unprojectPosition=v=>{const[M,g]=Me(v),p=(v[2]||0)*this.distanceScales.metersPerUnit[2];return[M,g,p]};let{width:n,height:s,altitude:o=null,fovy:r=null}=e;const{latitude:i=0,longitude:a=0,zoom:c=0,pitch:l=0,bearing:u=0,position:d=null,nearZMultiplier:h=.02,farZMultiplier:y=1.01}=e;n=n||1,s=s||1,r===null&&o===null?(o=Ct,r=Ee(o)):r===null?r=Ee(o):o===null&&(o=Nt(r));const _=Hn(c);o=Math.max(.75,o);const j=Un({longitude:a,latitude:i}),m=xe([a,i]);m.push(0),d&&En(m,m,Tn([],d,j.unitsPerMeter)),this.projectionMatrix=Vn({width:n,height:s,scale:_,center:m,pitch:l,fovy:r,nearZMultiplier:h,farZMultiplier:y}),this.viewMatrix=Zn({height:s,scale:_,center:m,pitch:l,bearing:u,altitude:o}),this.width=n,this.height=s,this.scale=_,this.latitude=i,this.longitude=a,this.zoom=c,this.pitch=l,this.bearing=u,this.altitude=o,this.fovy=r,this.center=m,this.meterOffset=d||[0,0,0],this.distanceScales=j,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:e,height:n,projectionMatrix:s,viewMatrix:o}=this,r=Ne();Le(r,r,s),Le(r,r,o),this.viewProjectionMatrix=r;const i=Ne();jt(i,i,[e/2,-n/2,1]),Oe(i,i,[1,-1,0]),Le(i,i,r);const a=Pn(Ne(),i);if(!a)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=i,this.pixelUnprojectionMatrix=a}projectFlat(e){return xe(e)}unprojectFlat(e){return Me(e)}getMapCenterByLngLatPosition({lngLat:e,pos:n}){const s=Qe(n,this.pixelUnprojectionMatrix),o=xe(e),r=Ye([],o,Cn([],s)),i=Ye([],this.center,r);return Me(i)}fitBounds(e,n={}){const{width:s,height:o}=this,{longitude:r,latitude:i,zoom:a}=Gn(Object.assign({width:s,height:o,bounds:e},n));return new ke({width:s,height:o,longitude:r,latitude:i,zoom:a})}getBounds(e){const n=this.getBoundingRegion(e),s=Math.min(...n.map(a=>a[0])),o=Math.max(...n.map(a=>a[0])),r=Math.min(...n.map(a=>a[1])),i=Math.max(...n.map(a=>a[1]));return[[s,r],[o,i]]}getBoundingRegion(e={}){return Yn(this,e.z||0)}getLocationAtPoint({lngLat:e,pos:n}){return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}}function Jn(t,e,n={}){const s={type:"Feature"};return(n.id===0||n.id)&&(s.id=n.id),n.bbox&&(s.bbox=n.bbox),s.properties=e||{},s.geometry=t,s}function Et(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!nt(t[0])||!nt(t[1]))throw new Error("coordinates must contain numbers");return Jn({type:"Point",coordinates:t},e,n)}function Kn(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function nt(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function kt(t,e,n){if(t!==null)for(var s,o,r,i,a,c,l,u=0,d=0,h,y=t.type,_=y==="FeatureCollection",j=y==="Feature",m=_?t.features.length:1,v=0;v<m;v++){l=_?t.features[v].geometry:j?t.geometry:t,h=l?l.type==="GeometryCollection":!1,a=h?l.geometries.length:1;for(var M=0;M<a;M++){var g=0,p=0;if(i=h?l.geometries[M]:l,i!==null){c=i.coordinates;var b=i.type;switch(u=0,b){case null:break;case"Point":if(e(c,d,v,g,p)===!1)return!1;d++,g++;break;case"LineString":case"MultiPoint":for(s=0;s<c.length;s++){if(e(c[s],d,v,g,p)===!1)return!1;d++,b==="MultiPoint"&&g++}b==="LineString"&&g++;break;case"Polygon":case"MultiLineString":for(s=0;s<c.length;s++){for(o=0;o<c[s].length-u;o++){if(e(c[s][o],d,v,g,p)===!1)return!1;d++}b==="MultiLineString"&&g++,b==="Polygon"&&p++}b==="Polygon"&&g++;break;case"MultiPolygon":for(s=0;s<c.length;s++){for(p=0,o=0;o<c[s].length;o++){for(r=0;r<c[s][o].length-u;r++){if(e(c[s][o][r],d,v,g,p)===!1)return!1;d++}p++}g++}break;case"GeometryCollection":for(s=0;s<i.geometries.length;s++)if(kt(i.geometries[s],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Rt(t,e={}){if(t.bbox!=null&&e.recompute!==!0)return t.bbox;const n=[1/0,1/0,-1/0,-1/0];return kt(t,s=>{n[0]>s[0]&&(n[0]=s[0]),n[1]>s[1]&&(n[1]=s[1]),n[2]<s[0]&&(n[2]=s[0]),n[3]<s[1]&&(n[3]=s[1])}),n}var Qn=Rt;function es(t,e={}){const n=Rt(t),s=(n[0]+n[2])/2,o=(n[1]+n[3])/2;return Et([s,o],e.properties,e)}var ts=es,Ae,st;function ns(){if(st)return Ae;st=1;var t=on(),e=rn(),n=an(),s=cn(),o=t.isFinite,r=Math.min;function i(a){var c=Math[a];return function(l,u){if(l=n(l),u=u==null?0:r(e(u),292),u&&o(l)){var d=(s(l)+"e").split("e"),h=c(d[0]+"e"+(+d[1]+u));return d=(s(h)+"e").split("e"),+(d[0]+"e"+(+d[1]-u))}return c(l)}}return Ae=i,Ae}var De,ot;function ss(){if(ot)return De;ot=1;var t=ns(),e=t("round");return De=e,De}var os=ss();const de=Ot(os),rs=x.createContext(null);function is(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,s=Array.isArray(t)?t[1]:t?t.y:0,o=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0;return n===o&&s===r}function ae(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!ae(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(const o of n)if(!e.hasOwnProperty(o)||!ae(t[o],e[o]))return!1;return!0}return!1}function as(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function rt(t,e){if(!t.getProjection)return;const n=t.getProjection(),s=e.getProjection();ae(n,s)||e.setProjection(n)}function it(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function at(t,e){const n=e.viewState||e;let s=!1;if("longitude"in n&&"latitude"in n){const o=t.center;t.center=new o.constructor(n.longitude,n.latitude),s=s||o!==t.center}if("zoom"in n){const o=t.zoom;t.zoom=n.zoom,s=s||o!==t.zoom}if("bearing"in n){const o=t.bearing;t.bearing=n.bearing,s=s||o!==t.bearing}if("pitch"in n){const o=t.pitch;t.pitch=n.pitch,s=s||o!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(s=!0,t.padding=n.padding),s}const cs=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ct(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const s of t.layers)e[s.id]=s;const n=t.layers.map(s=>{let o=null;"interactive"in s&&(o=Object.assign({},s),delete o.interactive);const r=e[s.ref];if(r){o=o||Object.assign({},s),delete o.ref;for(const i of cs)i in r&&(o[i]=r[i])}return o||s});return O(D({},t),{layers:n})}var lt={};const ut={version:8,sources:{},layers:[]},ft={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},ze={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},dt={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ls=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],us=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class be{constructor(e,n,s){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=o=>{const r=this.props[dt[o.type]];r?r(o):o.type==="error"&&console.error(o.error)},this._onPointerEvent=o=>{(o.type==="mousemove"||o.type==="mouseout")&&this._updateHover(o);const r=this.props[ft[o.type]];r&&(this.props.interactiveLayerIds&&o.type!=="mouseover"&&o.type!=="mouseout"&&(o.features=this._hoveredFeatures||this._queryRenderedFeatures(o.point)),r(o),delete o.features)},this._onCameraEvent=o=>{if(!this._internalUpdate){const r=this.props[ze[o.type]];r&&r(o)}o.type in this._deferredEvents&&(this._deferredEvents[o.type]=!1)},this._MapClass=e,this.props=n,this._initialize(s)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const s=this._updateSettings(e,n);s&&this._createShadowTransform(this._map);const o=this._updateSize(e),r=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(s||o||r&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const s=be.savedMaps.pop();if(!s)return null;const o=s.map,r=o.getContainer();for(n.className=r.className;r.childNodes.length>0;)n.appendChild(r.childNodes[0]);o._container=n;const i=o._resizeObserver;i&&(i.disconnect(),i.observe(n)),s.setProps(O(D({},e),{styleDiffing:!1})),o.resize();const{initialViewState:a}=e;return a&&(a.bounds?o.fitBounds(a.bounds,O(D({},a.fitBoundsOptions),{duration:0})):s._updateViewState(a,!1)),o.isStyleLoaded()?o.fire("load"):o.once("styledata",()=>o.fire("load")),o._update(),s}_initialize(e){const{props:n}=this,{mapStyle:s=ut}=n,o=O(D(D({},n),n.initialViewState),{accessToken:n.mapboxAccessToken||fs()||null,container:e,style:ct(s)}),r=o.initialViewState||o.viewState||o;if(Object.assign(o,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),n.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,n.gl)}const i=new this._MapClass(o);r.padding&&i.setPadding(r.padding),n.cursor&&(i.getCanvas().style.cursor=n.cursor),this._createShadowTransform(i);const a=i._render;i._render=u=>{this._inRender=!0,a.call(i,u),this._inRender=!1};const c=i._renderTaskQueue.run;i._renderTaskQueue.run=u=>{c.call(i._renderTaskQueue,u),this._onBeforeRepaint()},i.on("render",()=>this._onAfterRepaint());const l=i.fire;i.fire=this._fireEvent.bind(this,l),i.on("resize",()=>{this._renderTransform.resize(i.transform.width,i.transform.height)}),i.on("styledata",()=>{this._updateStyleComponents(this.props,{}),rt(i.transform,this._renderTransform)}),i.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in ft)i.on(u,this._onPointerEvent);for(const u in ze)i.on(u,this._onCameraEvent);for(const u in dt)i.on(u,this._onEvent);this._map=i}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),be.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=as(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const s=this._map;if(n.width!==s.transform.width||n.height!==s.transform.height)return s.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const s=this._map,o=this._renderTransform,{zoom:r,pitch:i,bearing:a}=o,c=s.isMoving();c&&(o.cameraElevationReference="sea");const l=at(o,D(D({},it(s.transform)),e));if(c&&(o.cameraElevationReference="ground"),l&&n){const u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=r!==o.zoom),u.rotate||(u.rotate=a!==o.bearing),u.pitch||(u.pitch=i!==o.pitch)}return c||at(s.transform,e),l}_updateSettings(e,n){const s=this._map;let o=!1;for(const r of ls)if(r in e&&!ae(e[r],n[r])){o=!0;const i=s["set".concat(r[0].toUpperCase()).concat(r.slice(1))];i==null||i.call(s,e[r])}return o}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:s=ut,styleDiffing:o=!0}=e,r={diff:o};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(ct(s),r),!0}return!1}_updateStyleComponents(e,n){const s=this._map;let o=!1;return s.isStyleLoaded()&&("light"in e&&s.setLight&&!ae(e.light,n.light)&&(o=!0,s.setLight(e.light)),"fog"in e&&s.setFog&&!ae(e.fog,n.fog)&&(o=!0,s.setFog(e.fog)),"terrain"in e&&s.setTerrain&&!ae(e.terrain,n.terrain)&&(!e.terrain||s.getSource(e.terrain.source))&&(o=!0,s.setTerrain(e.terrain))),o}_updateHandlers(e,n){var s,o;const r=this._map;let i=!1;for(const a of us){const c=(s=e[a])!==null&&s!==void 0?s:!0,l=(o=n[a])!==null&&o!==void 0?o:!0;ae(c,l)||(i=!0,c?r[a].enable(c):r[a].disable())}return i}_queryRenderedFeatures(e){const n=this._map,s=n.transform,{interactiveLayerIds:o=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:o.filter(n.getLayer.bind(n))})}catch(r){return[]}finally{n.transform=s}}_updateHover(e){var n;const{props:s}=this;if(s.interactiveLayerIds&&(s.onMouseMove||s.onMouseEnter||s.onMouseLeave)){const r=e.type,i=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),c=a.length>0;!c&&i&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,c&&!i&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=r}else this._hoveredFeatures=null}_fireEvent(e,n,s){const o=this._map,r=o.transform,i=typeof n=="string"?n:n.type;return i==="move"&&this._updateViewState(this.props,!1),i in ze&&(typeof n=="object"&&(n.viewState=it(r)),this._map.isMoving())?(o.transform=this._renderTransform,e.call(o,n,s),o.transform=r,o):(e.call(o,n,s),o)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const s in this._deferredEvents)this._deferredEvents[s]&&e.fire(s);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{rt(this._renderTransform,n),e.transform=n}}}be.savedMaps=[];function fs(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||lt.MapboxAccessToken}catch(e){}try{t=t||lt.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(e){}return t}const ds=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function hs(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:s=>{const o=e.transform;e.transform=t.transform;const r=e.project(s);return e.transform=o,r},unproject:s=>{const o=e.transform;e.transform=t.transform;const r=e.unproject(s);return e.transform=o,r},queryTerrainElevation:(s,o)=>{const r=e.transform;e.transform=t.transform;const i=e.queryTerrainElevation(s,o);return e.transform=r,i},queryRenderedFeatures:(s,o)=>{const r=e.transform;e.transform=t.transform;const i=e.queryRenderedFeatures(s,o);return e.transform=r,i}};for(const s of ms(e))!(s in n)&&!ds.includes(s)&&(n[s]=e[s].bind(e));return n}function ms(t){const e=new Set;let n=t;for(;n;){for(const s of Object.getOwnPropertyNames(n))s[0]!=="_"&&typeof t[s]=="function"&&s!=="fire"&&s!=="setEventedParent"&&e.add(s);n=Object.getPrototypeOf(n)}return Array.from(e)}const ps=typeof document<"u"?x.useLayoutEffect:x.useEffect,gs=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function xs(t,e){for(const s of gs)s in e&&(t[s]=e[s]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,s=>{s&&console.error(s)},!0)}const Re=x.createContext(null);function vs(t,e,n){const s=x.useContext(rs),[o,r]=x.useState(null),i=x.useRef(),{current:a}=x.useRef({mapLib:null,map:null});x.useEffect(()=>{const u=t.mapLib;let d=!0,h;return Promise.resolve(u||n).then(y=>{if(!d)return;if(!y)throw new Error("Invalid mapLib");const _="Map"in y?y:y.default;if(!_.Map)throw new Error("Invalid mapLib");if(xs(_,t),!_.supported||_.supported(t))t.reuseMaps&&(h=be.reuse(t,i.current)),h||(h=new be(_.Map,t,i.current)),a.map=hs(h),a.mapLib=_,r(h),s==null||s.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(y=>{const{onError:_}=t;_?_({type:"error",target:null,originalEvent:null,error:y}):console.error(y)}),()=>{d=!1,h&&(s==null||s.onMapUnmount(t.id),t.reuseMaps?h.recycle():h.destroy())}},[]),ps(()=>{o&&o.setProps(t)}),x.useImperativeHandle(e,()=>a.map,[o]);const c=x.useMemo(()=>D({position:"relative",width:"100%",height:"100%"},t.style),[t.style]),l={height:"100%"};return x.createElement("div",{id:t.id,ref:i,style:c},o&&x.createElement(Re.Provider,{value:a},x.createElement("div",{"mapboxgl-children":"",style:l},t.children)))}const ys=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function me(t,e){if(!t||!e)return;const n=t.style;for(const s in e){const o=e[s];Number.isFinite(o)&&!ys.test(s)?n[s]="".concat(o,"px"):n[s]=o}}function bs(t,e){const{map:n,mapLib:s}=x.useContext(Re),o=x.useRef({props:t});o.current.props=t;const r=x.useMemo(()=>{let j=!1;x.Children.forEach(t.children,M=>{M&&(j=!0)});const m=O(D({},t),{element:j?document.createElement("div"):null}),v=new s.Marker(m);return v.setLngLat([t.longitude,t.latitude]),v.getElement().addEventListener("click",M=>{var g,p;(p=(g=o.current.props).onClick)===null||p===void 0||p.call(g,{type:"click",target:v,originalEvent:M})}),v.on("dragstart",M=>{var g,p;const b=M;b.lngLat=r.getLngLat(),(p=(g=o.current.props).onDragStart)===null||p===void 0||p.call(g,b)}),v.on("drag",M=>{var g,p;const b=M;b.lngLat=r.getLngLat(),(p=(g=o.current.props).onDrag)===null||p===void 0||p.call(g,b)}),v.on("dragend",M=>{var g,p;const b=M;b.lngLat=r.getLngLat(),(p=(g=o.current.props).onDragEnd)===null||p===void 0||p.call(g,b)}),v},[]);x.useEffect(()=>(r.addTo(n.getMap()),()=>{r.remove()}),[]);const{longitude:i,latitude:a,offset:c,style:l,draggable:u=!1,popup:d=null,rotation:h=0,rotationAlignment:y="auto",pitchAlignment:_="auto"}=t;return x.useEffect(()=>{me(r.getElement(),l)},[l]),x.useImperativeHandle(e,()=>r,[]),(r.getLngLat().lng!==i||r.getLngLat().lat!==a)&&r.setLngLat([i,a]),c&&!is(r.getOffset(),c)&&r.setOffset(c),r.isDraggable()!==u&&r.setDraggable(u),r.getRotation()!==h&&r.setRotation(h),r.getRotationAlignment()!==y&&r.setRotationAlignment(y),r.getPitchAlignment()!==_&&r.setPitchAlignment(_),r.getPopup()!==d&&r.setPopup(d),Ue.createPortal(t.children,r.getElement())}const _s=x.memo(x.forwardRef(bs));function ht(t){return new Set(t?t.trim().split(/\s+/):[])}function Ms(t,e){const{map:n,mapLib:s}=x.useContext(Re),o=x.useMemo(()=>document.createElement("div"),[]),r=x.useRef({props:t});r.current.props=t;const i=x.useMemo(()=>{const a=D({},t),c=new s.Popup(a);return c.setLngLat([t.longitude,t.latitude]),c.once("open",l=>{var u,d;(d=(u=r.current.props).onOpen)===null||d===void 0||d.call(u,l)}),c},[]);if(x.useEffect(()=>{const a=c=>{var l,u;(u=(l=r.current.props).onClose)===null||u===void 0||u.call(l,c)};return i.on("close",a),i.setDOMContent(o).addTo(n.getMap()),()=>{i.off("close",a),i.isOpen()&&i.remove()}},[]),x.useEffect(()=>{me(i.getElement(),t.style)},[t.style]),x.useImperativeHandle(e,()=>i,[]),i.isOpen()&&((i.getLngLat().lng!==t.longitude||i.getLngLat().lat!==t.latitude)&&i.setLngLat([t.longitude,t.latitude]),t.offset&&!ae(i.options.offset,t.offset)&&i.setOffset(t.offset),(i.options.anchor!==t.anchor||i.options.maxWidth!==t.maxWidth)&&(i.options.anchor=t.anchor,i.setMaxWidth(t.maxWidth)),i.options.className!==t.className)){const a=ht(i.options.className),c=ht(t.className);for(const l of a)c.has(l)||i.removeClassName(l);for(const l of c)a.has(l)||i.addClassName(l);i.options.className=t.className}return Ue.createPortal(t.children,o)}x.memo(x.forwardRef(Ms));function _e(t,e,n,s){const o=x.useContext(Re),r=x.useMemo(()=>t(o),[]);return x.useEffect(()=>{const i=e,a=null,c=typeof e=="function"?e:null,{map:l}=o;return l.hasControl(r)||(l.addControl(r,i==null?void 0:i.position),a&&a(o)),()=>{c&&c(o),l.hasControl(r)&&l.removeControl(r)}},[]),r}function ws(t){const e=_e(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return x.useEffect(()=>{me(e._container,t.style)},[t.style]),null}x.memo(ws);function js(t){const e=_e(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return x.useEffect(()=>{me(e._controlContainer,t.style)},[t.style]),null}x.memo(js);function Ss(t,e){const n=x.useRef({props:t}),s=_e(({mapLib:o})=>{const r=new o.GeolocateControl(t),i=r._setupUI;return r._setupUI=a=>{r._container.hasChildNodes()||i(a)},r.on("geolocate",a=>{var c,l;(l=(c=n.current.props).onGeolocate)===null||l===void 0||l.call(c,a)}),r.on("error",a=>{var c,l;(l=(c=n.current.props).onError)===null||l===void 0||l.call(c,a)}),r.on("outofmaxbounds",a=>{var c,l;(l=(c=n.current.props).onOutOfMaxBounds)===null||l===void 0||l.call(c,a)}),r.on("trackuserlocationstart",a=>{var c,l;(l=(c=n.current.props).onTrackUserLocationStart)===null||l===void 0||l.call(c,a)}),r.on("trackuserlocationend",a=>{var c,l;(l=(c=n.current.props).onTrackUserLocationEnd)===null||l===void 0||l.call(c,a)}),r},{position:t.position});return n.current.props=t,x.useImperativeHandle(e,()=>s,[]),x.useEffect(()=>{me(s._container,t.style)},[t.style]),null}x.memo(x.forwardRef(Ss));function Cs(t){const e=_e(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return x.useEffect(()=>{me(e._container,t.style)},[t.style]),null}const Ns=x.memo(Cs);function Es(t){const e=_e(({mapLib:r})=>new r.ScaleControl(t),{position:t.position}),n=x.useRef(t),s=n.current;n.current=t;const{style:o}=t;return t.maxWidth!==void 0&&t.maxWidth!==s.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==s.unit&&e.setUnit(t.unit),x.useEffect(()=>{me(e._container,o)},[o]),null}x.memo(Es);const ks=Bt(()=>import("./jl1wt3my2oy15zn7.js").then(t=>t.m),__vite__mapDeps([0,1])),Rs=x.forwardRef(function(e,n){return vs(e,n,ks)}),Ts=_s,Ps=Ns;function Te({business:t,showHourDetail:e}){const n=je();if(t.is_closed_permanently)return f.jsx("span",{className:"text-red-600",children:f.jsx(G,{id:"businessMetadata.closedPermanently",defaultMessage:"Closed Permanently"})},"closed_permanently");const s=t.next_open_hour,o=t.is_open!==void 0&&t.is_open!=null?t.is_open?f.jsx("span",{className:"text-green-600",children:f.jsx(G,{id:"businessMetadata.openHourDetail",defaultMessage:"Open"})},"open"):f.jsx("span",{children:f.jsx(G,{id:"businessMetadata.closedStatus",defaultMessage:"Closed"})},"closed"):null;if(!e||!s)return o;const r=s.day===new Date().getDay(),i=He(n,t.is_open?s.end:s.start),a=r?n.formatMessage({id:"Adun59",defaultMessage:"{openClosedText} until {time}"},{openClosedText:o,time:i}):n.formatMessage({id:"tMworT",defaultMessage:"{openClosedText} until {day} {time}"},{openClosedText:o,day:Pt(n,s.day),time:i});return f.jsx("div",{children:a&&f.jsx("span",{children:a})})}function uo({business:t,isLoading:e=!1,mapUrl:n,showTitle:s=!1,showPrice:o=!0,showHourDetail:r=!0,showActionButtons:i=!0,showActionButtonsIcons:a=!1,showExtendedDetails:c=!1,trackContentReferenceEvent:l,topOffset:u=0}){const d=!(r&&t.next_open_hour)||t.is_closed_permanently;return f.jsxs("div",{className:se("text-token-text-primary mb-4 max-w-md rounded-md",e&&"pointer-events-none animate-pulse opacity-80",u&&"mt-[".concat(u,"px]")),children:[s&&t.name&&f.jsx("h2",{className:"mb-0! leading-tight",children:t.name}),f.jsx("div",{className:"leaading-tight",children:f.jsx(Tt,{business:t,showPrice:o,showHours:d})}),!d&&!c&&f.jsx("div",{className:"leading-tight",children:f.jsx(Te,{business:t,showHourDetail:!0})}),i&&f.jsx(As,{business:t,trackContentReferenceEvent:l,mapUrl:n,showActionButtonsIcons:a}),c&&f.jsx(Ds,{business:t,showHours:!d&&c})]})}function Tt(t){"use forget";const e=H.c(15),{business:n,showPrice:s,showHours:o}=t,r=s===void 0?!0:s,i=o===void 0?!0:o,a=n.categories&&n.categories.length>0?n.categories[0]:"";let c;e[0]!==n.rating?(c=n.rating?f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(yt,{className:"mt-0.25 h-3.5 w-3.5"}),n.rating.toFixed(1)]},"rating"):null,e[0]=n.rating,e[1]=c):c=e[1];let l;e[2]!==a?(l=a?f.jsx("span",{children:f.jsx(G,{id:"businessMetadata.category",defaultMessage:"{category}",values:{category:a}})},"category"):null,e[2]=a,e[3]=l):l=e[3];let u;e[4]!==n.price_str||e[5]!==r?(u=r&&n.price_str?f.jsx("span",{children:n.price_str},"price"):null,e[4]=n.price_str,e[5]=r,e[6]=u):u=e[6];let d;e[7]!==n||e[8]!==i?(d=i&&n.is_open!=null&&f.jsx(Te,{business:n,showHourDetail:!1}),e[7]=n,e[8]=i,e[9]=d):d=e[9];let h;return e[10]!==c||e[11]!==l||e[12]!==u||e[13]!==d?(h=f.jsx("div",{className:"flex flex-wrap items-center font-normal",children:[c,l,u,d].filter(Boolean).map(Ls)}),e[10]=c,e[11]=l,e[12]=u,e[13]=d,e[14]=h):h=e[14],h}function Ls(t,e){return f.jsxs($t.Fragment,{children:[e>0&&f.jsx("span",{className:"mx-1",children:"â€¢"}),t]},e)}function As({business:t,trackContentReferenceEvent:e,mapUrl:n,showActionButtonsIcons:s}){const o=x.useRef({directions:null,website:null,phone:null});x.useEffect(()=>{o.current={directions:null,website:null,phone:null}},[t.id]);const r=x.useMemo(()=>({section:"entity_metadata",section_location:"response",entity_type:"local_business",business_id:t.id,provider:t.provider}),[t.id,t.provider]),i=x.useCallback((a,c,l)=>{if(!e)return;const u=O(D({},r),{cta_type:a,url:l,link_type:"button",action:c});e("link_action",null,"entity_metadata",u),c==="show"?e("Entity Metadata Content Reference Shown","entity_metadata_content_reference_shown","entity_metadata",u):c==="click"&&e("Entity Metadata Content Reference Clicked","entity_metadata_content_reference_clicked","entity_metadata",u)},[r,e]);return x.useEffect(()=>{if(e&&(n&&o.current.directions!==n&&(i("directions","show",n),o.current.directions=n),t.website_url&&o.current.website!==t.website_url&&(i("website","show",t.website_url),o.current.website=t.website_url),t.phone)){const a="tel:".concat(t.phone);o.current.phone!==a&&(i("phone","show",a),o.current.phone=a)}},[t.phone,t.website_url,n,e,i]),f.jsxs("div",{className:"justify-left mt-3 flex w-full flex-wrap gap-2",children:[n&&f.jsx(Pe,{type:"button",className:"btn btn-primary btn-small relative m-0! w-auto min-w-fit px-4 py-1 text-xs font-medium",onClick:()=>{i("directions","click",n),window.open(n,"_blank","noopener,noreferrer")},children:f.jsxs("span",{className:"flex items-center gap-1",children:[s&&f.jsx(Ut,{className:"text-token-text-primary h-4 w-4"}),f.jsx(G,{id:"businessMetadata.directions",defaultMessage:"Directions"})]},"rating")}),t.website_url&&f.jsx(Pe,{type:"button",className:"btn btn-secondary btn-small text-token-text-primary relative m-0! w-auto min-w-fit px-4 py-1 text-xs font-medium",onClick:()=>{const a=t.website_url;a&&(i("website","click",a),window.open(a,"_blank","noopener,noreferrer"))},children:f.jsxs("span",{className:"flex items-center gap-1",children:[s&&f.jsx(Zt,{className:"text-token-text-primary h-4 w-4"}),f.jsx(G,{id:"businessMetadata.website",defaultMessage:"Website"})]},"rating")}),t.phone&&f.jsx(Pe,{type:"button",className:"btn btn-secondary btn-small text-token-text-primary relative m-0! w-auto min-w-fit px-4 py-1 text-xs font-medium",onClick:()=>{const a="tel:".concat(t.phone);i("phone","click",a),window.location.href=a},children:f.jsxs("span",{className:"flex items-center gap-1",children:[s&&f.jsx(bt,{className:"text-token-text-primary h-4 w-4"}),f.jsx(G,{id:"businessMetadata.call",defaultMessage:"Call"})]},"rating")})]})}function Ds({business:t,showHours:e}){var l;const n=je(),[s,o]=x.useState(!1),r=t.hours&&t.hours.length>0||t.next_open_hour||t.is_open!=null||t.is_closed_permanently,i=t.hours?zs(t.hours):[],a=i.length>0,c=t.phone?(l=jn(t.phone))==null?void 0:l.formatNational():null;return f.jsx("div",{className:"mt-3",children:f.jsxs("div",{className:"divide-token-border-light border-token-border-light divide-y border-t",children:[r&&e&&f.jsxs(f.Fragment,{children:[f.jsx(Fe,{icon:f.jsx(Wt,{className:"h-6 w-6"}),value:f.jsx(Te,{business:t,showHourDetail:!0}),isExpandable:!0,isExpanded:s,onClick:()=>o(u=>a&&!u)}),f.jsx(ln,{initial:!1,children:s&&a&&f.jsx(_t.div,{className:"divide-token-border-light divide-y overflow-hidden select-none",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"tween",duration:.2,ease:"easeInOut"},children:i.map(u=>f.jsxs("div",{className:"flex min-h-[40px] items-center gap-2 py-2 text-sm",children:[f.jsx("div",{className:"w-[125px]",children:Pt(n,u.day,"long")}),f.jsx("div",{children:u.isClosed?f.jsx(G,{id:"businessMetadata.closed",defaultMessage:"Closed"}):f.jsx(f.Fragment,{children:u.times.map((d,h)=>f.jsx("div",{children:"".concat(He(n,d.start)," - ").concat(He(n,d.end))},h))})})]},u.day))},"hours-details")})]}),t.address&&f.jsx(Fe,{icon:f.jsx(vn,{className:"h-6 w-6"}),value:t.address}),c&&f.jsx(Fe,{icon:f.jsx(bt,{className:"h-5 w-5"}),value:c})]})})}function Fe({icon:t,value:e,onClick:n,isExpandable:s=!1,isExpanded:o=!1}){return f.jsxs("div",{className:se("flex min-h-[44px] items-center gap-4 py-2",n&&"cursor-pointer"),onClick:n,children:[f.jsx("div",{className:"flex h-6 w-6 items-center justify-center",children:t}),f.jsx("div",{className:"flex-1 text-sm font-medium",children:e}),s&&f.jsx("button",{type:"button",className:se("text-token-text-secondary p-1 transition-all",o&&"rotate-180"),children:f.jsx(Vt,{className:"h-5 w-5"})})]})}function zs(t){var s;const e=[1,2,3,4,5,6,0];let n=[];if(Array.isArray(t)&&t.length>0){const o=new Map;for(const r of t){const i=(s=o.get(r.day))!=null?s:[];i.push({start:r.start,end:r.end}),o.set(r.day,i)}n=e.map(r=>{var a;const i=(a=o.get(r))!=null?a:[];return i.sort((c,l)=>c.start.localeCompare(l.start)),{day:r,times:i,isClosed:i.length===0}})}return n}function He(t,e){const n=e.slice(0,2),s=e.slice(2,4),o=new Date(0,0,0,parseInt(n,10),parseInt(s,10));return t.formatTime(o,{hour:"numeric",minute:"2-digit"})}function Pt(t,e,n="short"){return t.formatDate(new Date(0,0,e),{weekday:n})}function Fs(t){"use forget";var A;const e=H.c(50),{isSelected:n,idx:s,business:o,trackContentReferenceEvent:r,onOpenEntity:i,enableSidebarNavigation:a,showActions:c,imageClassName:l}=t,u=l===void 0?"h-23 w-23":l,d=!Mt();let h;e[0]!==s?(h={section:"map",section_location:"response",section_index:s},e[0]=s,e[1]=h):h=e[1];const y=h,_=(A=o.image_urls)==null?void 0:A[0];let j;e[2]===Symbol.for("react.memo_cache_sentinel")?(j={x:"0%",opacity:0,pointerEvents:"none",transition:{duration:.1,ease:"easeOut"}},e[2]=j):j=e[2];let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m={x:"0%",opacity:1,pointerEvents:"auto",transition:{duration:.15,ease:"easeOut"}},e[3]=m):m=e[3];const v=n?"bg-token-bg-secondary":"bg-token-bg-primary";let M;e[4]!==v?(M=se("relative border-red-400 text-start font-normal transition-colors duration-300",v),e[4]=v,e[5]=M):M=e[5];const g=a&&"cursor-pointer";let p;e[6]!==u||e[7]!==g?(p=se("shrink-0 overflow-hidden rounded-lg",u,g),e[6]=u,e[7]=g,e[8]=p):p=e[8];let b;e[9]!==a||e[10]!==i?(b=a?L=>{L.preventDefault(),i==null||i()}:void 0,e[9]=a,e[10]=i,e[11]=b):b=e[11];let w;e[12]!==o.name||e[13]!==_?(w=_?f.jsx("img",{className:"h-full w-full object-cover",src:_!=null?_:void 0,alt:o.name}):f.jsx("div",{className:"h-full w-full bg-gray-100"}),e[12]=o.name,e[13]=_,e[14]=w):w=e[14];let C;e[15]!==w||e[16]!==p||e[17]!==b?(C=f.jsx("div",{className:p,onClick:b,children:w}),e[15]=w,e[16]=p,e[17]=b,e[18]=C):C=e[18];let k;e[19]!==o.name||e[20]!==a||e[21]!==i?(k=a?f.jsx("div",{className:"hover:entity-accent line-clamp-2 w-full cursor-pointer text-[17px] leading-tight font-medium",onClick:L=>{L.preventDefault(),i==null||i()},title:o.name,children:o.name}):f.jsx("div",{title:o.name,className:"text-token-text-primary line-clamp-2 w-full text-[17px] leading-tight font-medium",children:o.name}),e[19]=o.name,e[20]=a,e[21]=i,e[22]=k):k=e[22];let P;e[23]!==o?(P=f.jsxs("div",{className:"text-token-text-primary flex flex-col gap-0.5 text-sm",children:[f.jsx(Tt,{business:o,showPrice:!0,showHours:!1}),f.jsx(Te,{business:o,showHourDetail:!0})]}),e[23]=o,e[24]=P):P=e[24];let T;e[25]!==k||e[26]!==P?(T=f.jsxs("div",{className:"flex min-w-0 flex-1 flex-col justify-center gap-0.5",children:[k,P]}),e[25]=k,e[26]=P,e[27]=T):T=e[27];let R;e[28]!==C||e[29]!==T?(R=f.jsxs("div",{className:"flex gap-3",children:[C,T]}),e[28]=C,e[29]=T,e[30]=R):R=e[30];let E;e[31]!==o||e[32]!==d||e[33]!==y||e[34]!==c||e[35]!==r?(E=!d&&c&&f.jsx("div",{className:"mt-1",children:f.jsx(mt,{business:o,trackContentReferenceEvent:r,metadata:y})}),e[31]=o,e[32]=d,e[33]=y,e[34]=c,e[35]=r,e[36]=E):E=e[36];let N;e[37]!==R||e[38]!==E?(N=f.jsxs("div",{className:"flex flex-col gap-2 p-3",children:[R,E]}),e[37]=R,e[38]=E,e[39]=N):N=e[39];let S;e[40]!==o||e[41]!==d||e[42]!==y||e[43]!==c||e[44]!==r?(S=d&&c&&f.jsx(mt,{business:o,trackContentReferenceEvent:r,metadata:y}),e[40]=o,e[41]=d,e[42]=y,e[43]=c,e[44]=r,e[45]=S):S=e[45];let z;return e[46]!==N||e[47]!==S||e[48]!==M?(z=f.jsx(_t.div,{initial:j,animate:m,children:f.jsxs("div",{className:M,children:[N,S]})}),e[46]=N,e[47]=S,e[48]=M,e[49]=z):z=e[49],z}function mt({business:t,trackContentReferenceEvent:e,metadata:n}){const s="https://www.google.com/maps/dir/?api=1&destination=".concat(encodeURIComponent([t.name,t.address].join(",")));return t.address&&e("link_action",null,"map",O(D({},n),{url:s,link_type:"button",action:"show"})),t.website_url&&e("link_action",null,"map",O(D({},n),{url:t.website_url,link_type:"button",action:"show"})),f.jsx(f.Fragment,{children:f.jsxs("div",{className:"text-token-text-primary mt-auto flex min-h-[30px] w-full min-w-0 flex-wrap justify-center gap-2 text-base",children:[t.address&&f.jsx(Ie,{to:s,onClick:()=>{e("link_action",null,"map",O(D({},n),{url:s,link_type:"button",action:"click"}))},children:f.jsx(G,{id:"+a2f/C",defaultMessage:"Directions"})}),t.website_url&&f.jsx(Ie,{to:t.website_url,onClick:()=>{e("link_action",null,"map",O(D({},n),{url:t.website_url,link_type:"button",action:"click"}))},children:f.jsx(G,{id:"r0oqXM",defaultMessage:"Website"})}),t.phone&&f.jsx(Ie,{to:"tel:"+t.phone,children:f.jsx(G,{id:"B/an6M",defaultMessage:"Call"})})]})})}function Ie(t){"use forget";const e=H.c(4),{to:n,onClick:s,children:o}=t;let r;return e[0]!==o||e[1]!==s||e[2]!==n?(r=f.jsx(Ze,{onClick:s,as:"link",to:n,openNewTab:!0,rel:"noreferrer",color:"secondary",size:"small",className:"h-[30px] min-w-25 flex-1 rounded-full border",contentWrapperClassName:"text-token-text-primary font-semibold",children:o}),e[0]=o,e[1]=s,e[2]=n,e[3]=r):r=e[3],r}function Is(t){"use forget";const e=H.c(51),{idx:n,business:s,tooltipContent:o,onOpenChange:r,isSelected:i,isVisible:a,isSonicSidebarEnabled:c,onClick:l,openOnHover:u,tooltipLocation:d}=t,h=u===void 0?!0:u,y=d===void 0?"top":d,[_,j]=x.useState(i),m=x.useRef(void 0),v=x.useRef(void 0);let M,g;e[0]!==i?(M=()=>{j(i)},g=[i],e[0]=i,e[1]=M,e[2]=g):(M=e[1],g=e[2]),x.useEffect(M,g);let p,b;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=void 0),v.current&&(window.clearTimeout(v.current),v.current=void 0)},b=[],e[3]=p,e[4]=b):(p=e[3],b=e[4]),x.useEffect(p,b);let w;e[5]!==r?(w=F=>{j(F),r==null||r(F)},e[5]=r,e[6]=w):w=e[6];const C=w;let k;e[7]!==C||e[8]!==_?(k=()=>{v.current&&(window.clearTimeout(v.current),v.current=void 0),m.current&&(window.clearTimeout(m.current),m.current=void 0),!_&&(m.current=window.setTimeout(()=>C(!0),150))},e[7]=C,e[8]=_,e[9]=k):k=e[9];const P=k;let T;e[10]!==C||e[11]!==_?(T=()=>{m.current&&(window.clearTimeout(m.current),m.current=void 0),_&&(v.current=window.setTimeout(()=>C(!1),120))},e[10]=C,e[11]=_,e[12]=T):T=e[12];const R=T;let E;e[13]!==c||e[14]!==l||e[15]!==C||e[16]!==h?(E=F=>{if(h){if(!c)return;F.preventDefault(),F.stopPropagation(),l==null||l();return}F.preventDefault(),F.stopPropagation(),C(!0)},e[13]=c,e[14]=l,e[15]=C,e[16]=h,e[17]=E):E=e[17];const N=E;let S;e[18]!==s||e[19]!==i?(S=f.jsx(Os,{business:s,isSelected:i}),e[18]=s,e[19]=i,e[20]=S):S=e[20];const z=a?1:0;let A;e[21]!==z?(A={opacity:z},e[21]=z,e[22]=A):A=e[22];let L;e[23]!==s.name||e[24]!==A?(L=f.jsx("div",{className:"absolute start-1/2 top-full -translate-x-1/2 font-bold text-nowrap text-gray-800 [text-shadow:_-0.8px_-0.8px_0_#fff,_0.8px_-0.8px_0_#fff,_-0.8px_0.8px_0_#fff,_0.8px_0.8px_0_#fff]",style:A,children:s.name}),e[23]=s.name,e[24]=A,e[25]=L):L=e[25];const U=c&&"cursor-pointer";let Z;e[26]!==U?(Z=se("absolute inset-0 rounded-xl",U),e[26]=U,e[27]=Z):Z=e[27];const Q=h?c?N:void 0:N;let W;e[28]!==Z||e[29]!==Q?(W=f.jsx("div",{className:Z,onClick:Q}),e[28]=Z,e[29]=Q,e[30]=W):W=e[30];let ce;e[31]!==S||e[32]!==L||e[33]!==W?(ce=f.jsxs("div",{className:"relative",children:[S,L,W]}),e[31]=S,e[32]=L,e[33]=W,e[34]=ce):ce=e[34];const le=ce;let oe;e[35]!==P||e[36]!==R||e[37]!==h?(oe=h?{onPointerEnter:P,onPointerLeave:R}:{},e[35]=P,e[36]=R,e[37]=h,e[38]=oe):oe=e[38];const ue=oe;let X;e[39]!==ue||e[40]!==le||e[41]!==C||e[42]!==_||e[43]!==o||e[44]!==y?(X=o?f.jsxs(qt,{open:_,onOpenChange:C,modal:!1,children:[f.jsx(Gt,O(D({},ue),{children:le})),f.jsx(Xt,{children:f.jsx(Yt,O(D({className:"bg-token-bg-primary border-token-border-default max-h-[50vh] max-w-[400px] overflow-y-auto rounded-[20px] border-1 bg-clip-padding shadow-md",side:y,sideOffset:10,align:"center",collisionPadding:28,avoidCollisions:!0},ue),{children:o}))})]}):le,e[39]=ue,e[40]=le,e[41]=C,e[42]=_,e[43]=o,e[44]=y,e[45]=X):X=e[45];let I;return e[46]!==s.latitude||e[47]!==s.longitude||e[48]!==n||e[49]!==X?(I=f.jsx(Ts,{longitude:s.longitude,latitude:s.latitude,anchor:"bottom",children:X},n),e[46]=s.latitude,e[47]=s.longitude,e[48]=n,e[49]=X,e[50]=I):I=e[50],I}const Os=t=>{"use forget";var c;const e=H.c(7),{business:n,isSelected:s}=t,o=s?"bg-token-interactive-bg-primary-press text-token-interactive-label-primary-press":"bg-token-bg-primary";let r;e[0]!==o?(r=se("border-token-border-default shadow-elevation-03 flex h-7 min-w-7 items-center justify-center rounded-full border bg-clip-padding text-xs font-medium",o),e[0]=o,e[1]=r):r=e[1];let i;e[2]!==n.entity.rating?(i=n.entity.rating?f.jsxs("div",{className:"flex items-center gap-0.75 px-2.5",children:[f.jsx("span",{children:(c=n.entity.rating)==null?void 0:c.toFixed(1)}),f.jsx(yt,{className:"h-3 w-3"})]}):f.jsx(Jt,{className:"h-3 w-3"}),e[2]=n.entity.rating,e[3]=i):i=e[3];let a;return e[4]!==r||e[5]!==i?(a=f.jsx("div",{className:r,children:i}),e[4]=r,e[5]=i,e[6]=a):a=e[6],a};function Lt(t){"use forget";const e=H.c(7),{children:n,position:s,show:o}=t,r=s===void 0?"top-right":s,i=o===void 0?!0:o,[a,c]=x.useState(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>({onAdd(){const y=document.createElement("div");return y.className="mapboxgl-ctrl mapboxgl-ctrl-group",c(y),y},onRemove(){c(null)}}),e[0]=l):l=e[0];let u;e[1]!==r?(u={position:r},e[1]=r,e[2]=u):u=e[2],_e(l,u);let d;return e[3]!==n||e[4]!==a||e[5]!==i?(d=a&&i?Ue.createPortal(n,a):null,e[3]=n,e[4]=a,e[5]=i,e[6]=d):d=e[6],d}function Bs(t){"use forget";const e=H.c(3),{isFullScreen:n,onClick:s}=t;let o;return e[0]!==n||e[1]!==s?(o=f.jsx(Lt,{position:"top-right",children:f.jsx($s,{isFullScreen:n,onClick:s})}),e[0]=n,e[1]=s,e[2]=o):o=e[2],o}function $s(t){"use forget";const e=H.c(9),{isFullScreen:n,onClick:s}=t,o=je();let r;e[0]!==s?(r=l=>{l.preventDefault(),s()},e[0]=s,e[1]=r):r=e[1];let i;e[2]!==o||e[3]!==n?(i=n?o.formatMessage({id:"N1ms3w",defaultMessage:"Exit full screen"}):o.formatMessage({id:"676SBY",defaultMessage:"Enter full screen"}),e[2]=o,e[3]=n,e[4]=i):i=e[4];let a;e[5]===Symbol.for("react.memo_cache_sentinel")?(a=f.jsx(Kt,{className:"icon h-[18px]! w-[18px]!"}),e[5]=a):a=e[5];let c;return e[6]!==r||e[7]!==i?(c=f.jsx(Ze,{type:"button",color:"secondary",size:"small",className:"flex h-[30px] items-center justify-center bg-clip-padding text-black",contentWrapperClassName:"font-semibold",onClick:r,title:i,children:a}),e[6]=r,e[7]=i,e[8]=c):c=e[8],c}function Hs(t){"use forget";const e=H.c(5),{show:n,onClick:s}=t;let o;e[0]!==s?(o=f.jsx(Us,{onClick:s}),e[0]=s,e[1]=o):o=e[1];let r;return e[2]!==n||e[3]!==o?(r=f.jsx(Lt,{show:n,position:"top-right",children:o}),e[2]=n,e[3]=o,e[4]=r):r=e[4],r}function Us(t){"use forget";const e=H.c(8),{onClick:n}=t,s=je();let o;e[0]!==n?(o=c=>{c.preventDefault(),n()},e[0]=n,e[1]=o):o=e[1];let r;e[2]!==s?(r=s.formatMessage({id:"dUWlu0",defaultMessage:"Reset view"}),e[2]=s,e[3]=r):r=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=f.jsx(Qt,{className:"icon h-[18px]! w-[18px]!"}),e[4]=i):i=e[4];let a;return e[5]!==o||e[6]!==r?(a=f.jsx(Ze,{type:"button",color:"secondary",size:"small",className:"flex h-[30px] items-center justify-center bg-clip-padding text-black",contentWrapperClassName:"font-semibold",onClick:o,title:r,children:i}),e[5]=o,e[6]=r,e[7]=a):a=e[7],a}function Zs(){"use forget";const t=H.c(12),[e,n]=x.useState(!1);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>n(Ws),t[0]=s):s=t[0];const o=s,r=e?un:en,i=e?"w-full bg-white":"w-5 bg-white/60 backdrop-blur-xl backdrop-filter hover:bg-white/70";let a;t[1]!==i?(a=se("text-token-text-primary flex h-5 items-center justify-start overflow-hidden rounded-full text-[10px] font-light whitespace-nowrap transition-all",i),t[1]=i,t[2]=a):a=t[2];let c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=se("flex min-w-5 items-center justify-center transition-all"),t[3]=c):c=t[3];let l;t[4]!==r?(l=f.jsx("button",{onClick:o,className:c,children:f.jsx(r,{className:"icon-sm transition-colors"})}),t[4]=r,t[5]=l):l=t[5];let u;t[6]===Symbol.for("react.memo_cache_sentinel")?(u=f.jsx("a",{href:"https://www.mapbox.com/about/maps",target:"_blank",rel:"noreferrer",className:"text-[#2964aa]!",children:"Mapbox"}),t[6]=u):u=t[6];let d;t[7]===Symbol.for("react.memo_cache_sentinel")?(d=f.jsx("a",{href:"https://www.mapbox.com/legal/end-user-terms",target:"_blank",rel:"noreferrer",className:"me-2 text-[#2964aa]!",children:f.jsx(G,{id:"u3dZJq",defaultMessage:"Terms"})}),t[7]=d):d=t[7];let h;t[8]===Symbol.for("react.memo_cache_sentinel")?(h=f.jsxs("div",{className:"pe-2",children:["Â©Â ",u,"Â ",d,"Â©Â ",f.jsx("a",{href:"http://www.openstreetmap.org/about",target:"_blank",rel:"noreferrer",className:"text-[#2964aa]!",children:"OpenStreetMap"})]}),t[8]=h):h=t[8];let y;return t[9]!==a||t[10]!==l?(y=f.jsxs("div",{className:a,children:[l,h]}),t[9]=a,t[10]=l,t[11]=y):y=t[11],y}function Ws(t){return!t}const Vs=300,qs=()=>{"use forget";const t=H.c(10),e=fn();let n;t[0]!==e?(n=()=>!e,t[0]=e,t[1]=n):n=t[1];const[s,o]=x.useState(n);let r;t[2]!==s||t[3]!==e?(r=e?()=>{s||dn(()=>{o(!0)},Vs)}:void 0,t[2]=s,t[3]=e,t[4]=r):r=t[4];const i=r;let a;t[5]!==s?(a=u=>{"use forget";const{children:d}=u;return s?d:null},t[5]=s,t[6]=a):a=t[6];const c=a;let l;return t[7]!==c||t[8]!==i?(l={triggerRender:i,IntegratedUXDelayedRender:c},t[7]=c,t[8]=i,t[9]=l):l=t[9],l},pt=50,gt=20,xt=20,vt=20,Gs=400;function fo(t){"use forget";const e=H.c(44),{contentReference:n,clientThreadId:s,messageId:o,trackContentReferenceEvent:r,turnIndex:i}=t,a=hn();let c;e[0]!==a?(c=Ge(a,"3194776735"),e[0]=a,e[1]=c):c=e[1];const l=c;let u;e[2]!==a?(u=Ge(a,"1950533395"),e[2]=a,e[3]=u):u=e[3];const d=u,[h,y]=x.useState(-1),_=mn();let j;e[4]!==s||e[5]!==a||e[6]!==l?(j=null,e[4]=s,e[5]=a,e[6]=l,e[7]=j):j=e[7];const m=j;let v,M;e[8]!==n||e[9]!==l||e[10]!==o||e[11]!==m||e[12]!==i?(v=()=>{l&&m&&i>m.turnIndex$()&&m.isOpen$()&&(m.turnIndex$.set(i),m.setCurrentContentReference$(n),m.setCurrentMessageId$(o))},M=[n,o,m,i,l],e[8]=n,e[9]=l,e[10]=o,e[11]=m,e[12]=i,e[13]=v,e[14]=M):(v=e[13],M=e[14]),x.useEffect(v,M);let g;e[15]!==n||e[16]!==_||e[17]!==o||e[18]!==m||e[19]!==i?(g=()=>{m==null||m.setCurrentMessageId$(o),sn({className:"map-with-entities",update:()=>{m==null||m.setCurrentContentReference$(n),m==null||m.toggleIsOpen$(),m==null||m.wasSidebarOpen$.set(_),pn.setSidebarOpen(!1),m==null||m.turnIndex$.set(i)}})},e[15]=n,e[16]=_,e[17]=o,e[18]=m,e[19]=i,e[20]=g):g=e[20];const p=g;let b;e[21]!==m?(b=()=>m==null?void 0:m.isOpen$(),e[21]=m,e[22]=b):b=e[22];const w=Xe(b);let C;e[23]!==m?(C=()=>m==null?void 0:m.currentMessageId$(),e[23]=m,e[24]=C):C=e[24];const k=Xe(C),P=l&&!w&&k===o,{openThreadSidebar:T}=tn(),{resetSidebarHistory:R}=nn(),E=Ht();let N;e[25]!==s||e[26]!==n||e[27]!==E||e[28]!==o||e[29]!==T||e[30]!==R?(N=(A,L)=>{s&&(E||R(),T({type:"entity",debugThreadId:void 0,messageId:o,contentReferenceStartIndex:n.start_idx,query:L.name,category:"local_business",extraParams:L.entity.location?{location:L.entity.location}:void 0}))},e[25]=s,e[26]=n,e[27]=E,e[28]=o,e[29]=T,e[30]=R,e[31]=N):N=e[31];const S=N;let z;return e[32]!==s||e[33]!==n||e[34]!==p||e[35]!==l||e[36]!==w||e[37]!==d||e[38]!==o||e[39]!==S||e[40]!==h||e[41]!==P||e[42]!==r?(z=!w&&f.jsx(gn,{children:f.jsx("div",{className:"not-prose","data-testid":"businesses-map-widget",children:f.jsx("div",{className:"pt-4",children:f.jsx(Xs,{contentReference:n,clientThreadId:s,messageId:o,trackContentReferenceEvent:r,onFullScreenToggle:l?p:void 0,containerClassName:P?"[view-transition-name:map-with-entities]":void 0,selectedIndex:h,markerComponent:A=>{const{idx:L,business:U,isSelected:Z,isVisible:Q}=A;return f.jsx(Is,{idx:L,business:U,isSelected:Z,isVisible:Q,openOnHover:!0,tooltipLocation:"top",tooltipContent:f.jsx(Fs,{idx:L,business:U.entity,trackContentReferenceEvent:r,onOpenEntity:()=>{y(L),S==null||S(L,U)},enableSidebarNavigation:d,showActions:!0}),onOpenChange:W=>y(W?L:-1),isSonicSidebarEnabled:d,onClick:()=>{y(L),S==null||S(L,U)}},L)}})})})}),e[32]=s,e[33]=n,e[34]=p,e[35]=l,e[36]=w,e[37]=d,e[38]=o,e[39]=S,e[40]=h,e[41]=P,e[42]=r,e[43]=z):z=e[43],z}function Xs(t){"use forget";const e=H.c(43),{contentReference:n,trackContentReferenceEvent:s,isFullScreen:o,onFullScreenToggle:r,containerClassName:i,markerComponent:a,selectedIndex:c}=t,l=je(),u=n.entities,d=x.useRef(!0),h=x.useRef(null),y=x.useRef(null);let _;e[0]===Symbol.for("react.memo_cache_sentinel")?(_={longitude:0,latitude:0,zoom:12},e[0]=_):_=e[0];const j=_,m=x.useRef(j);let v;e[1]===Symbol.for("react.memo_cache_sentinel")?(v=O(D({},j),{pitch:0,bearing:0}),e[1]=v):v=e[1];const[M,g]=x.useState(v),p=!Mt(),[b,w]=x.useState(!1),C=x.useRef(!1);let k,P;e[2]!==s?(k=()=>{C.current||(s("Search Content Reference Shown","search_content_reference_shown","map"),C.current=!0)},P=[s],e[2]=s,e[3]=k,e[4]=P):(k=e[3],P=e[4]),x.useEffect(k,P);let T,R;e[5]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{if(!h.current)return;const I=xn(()=>{var Y;(Y=y.current)==null||Y.resize()},100),F=new ResizeObserver(I);return F.observe(h.current),()=>{F.disconnect()}},R=[],e[5]=T,e[6]=R):(T=e[5],R=e[6]),x.useEffect(T,R);let E;e[7]===Symbol.for("react.memo_cache_sentinel")?(E=new Set,e[7]=E):E=e[7];const[N,S]=x.useState(E),z=x.useRef(-1),[A,L]=x.useState(!1);let U;e[8]!==u||e[9]!==A||e[10]!==M.zoom?(U=()=>{var F,Y,ee;if(!y.current||!A)return;const I=eo;if(z.current==-1||z.current!==M.zoom){const J=[];for(const $ of u){const q=(F=y.current)==null?void 0:F.project([$.longitude,$.latitude]);if(!q)return;const te=q.x-30,re=q.y,ie=(Y=$.entity.rating)!=null?Y:0,fe=(ee=$.entity.is_open)!=null?ee:!1;J.push({id:$.id,x:te,y:re,w:60,h:30,rating:ie,openNow:fe})}J.sort(Qs);const V=new Set,pe=new Map(J.map(Ks));for(const $ of J){let q=!1;for(const te of V){const re=pe.get(te);if(re&&I($,re)){q=!0;break}}q||V.add($.id)}S($=>$.size===V.size&&[...$].every(q=>V.has(q))?$:V)}z.current=M.zoom},e[8]=u,e[9]=A,e[10]=M.zoom,e[11]=U):U=e[11];let Z;e[12]!==u||e[13]!==A||e[14]!==M.zoom||e[15]!==N?(Z=[M.zoom,N,A,u],e[12]=u,e[13]=A,e[14]=M.zoom,e[15]=N,e[16]=Z):Z=e[16],x.useEffect(U,Z);let Q,W;e[17]!==u||e[18]!==c?(Q=()=>{const I=function(){var $;const ee=function(te,re){const ie=y.current;if(!ie)return!1;const{width:fe,height:ge}=ie.getContainer().getBoundingClientRect(),Se=ie.unproject([gt,pt]),We=ie.unproject([fe-xt,ge-vt]);return de(te,5)>=de(We.lat,5)&&de(te,5)<=de(Se.lat,5)&&de(re,5)>=de(Se.lng,5)&&de(re,5)<=de(We.lng,5)},J=Kn(u.filter((q,te)=>d.current||c===-1||te===c).map(Js)),V=Qn(J),pe=ts(J);if(h.current){const q=h.current.clientWidth,te=h.current.clientHeight,re=new ke({width:q,height:te,longitude:pe.geometry.coordinates[0],latitude:pe.geometry.coordinates[1]}),{zoom:ie,latitude:fe,longitude:ge}=re.fitBounds([[V[0],V[1]],[V[2],V[3]]],{maxZoom:13.5,padding:{top:pt,left:gt,right:xt,bottom:vt}});d.current?(g(Se=>O(D({},Se),{zoom:ie,latitude:fe,longitude:ge})),m.current={longitude:ge,latitude:fe,zoom:ie},d.current=!1):ee(fe,ge)||($=y.current)==null||$.flyTo({center:[ge,fe]})}};if(u.length===0)return;if(d.current){I();return}if(c===-1)return;const F=setTimeout(I,200);return()=>clearTimeout(F)},W=[u,c],e[17]=u,e[18]=c,e[19]=Q,e[20]=W):(Q=e[19],W=e[20]),x.useEffect(Q,W);const{triggerRender:ce,IntegratedUXDelayedRender:le}=qs();let oe;if(e[21]!==u||e[22]!==a||e[23]!==c||e[24]!==N){let I;e[26]!==c?(I=(Y,ee)=>Y.idx===c?1:ee.idx===c?-1:Y.idx-ee.idx,e[26]=c,e[27]=I):I=e[27];let F;e[28]!==a||e[29]!==c||e[30]!==N?(F=Y=>{const{business:ee,idx:J}=Y,V=J===c,pe=a;return f.jsx(pe,{idx:J,business:ee,isSelected:V,isVisible:N.has(ee.id)},J)},e[28]=a,e[29]=c,e[30]=N,e[31]=F):F=e[31],oe=u.map(Ys).sort(I).map(F),e[21]=u,e[22]=a,e[23]=c,e[24]=N,e[25]=oe}else oe=e[25];const ue=oe;let X;return e[32]!==le||e[33]!==i||e[34]!==l||e[35]!==o||e[36]!==p||e[37]!==r||e[38]!==ue||e[39]!==b||e[40]!==ce||e[41]!==M?(X=!p&&f.jsxs("div",{style:{height:o?"100%":Gs},className:se("bg-token-bg-primary relative w-full",i),ref:h,children:[f.jsx("div",{className:"relative h-full w-full overflow-hidden rounded-3xl",children:f.jsxs(Rs,O(D({},M),{onIdle:ce,mapboxAccessToken:Mn,mapStyle:"mapbox://styles/oai-data/cmhawgfb0000n01sd7bcybf4f",attributionControl:!1,renderWorldCopies:!1,cooperativeGestures:!o,onMove:I=>{g(I.viewState),to(m.current,I)&&w(!0)},locale:{"ScrollZoomBlocker.CtrlMessage":l.formatMessage({id:"1aF2nO",defaultMessage:"Hold Ctrl to zoom"}),"ScrollZoomBlocker.CmdMessage":l.formatMessage({id:"8R2Dga",defaultMessage:"Hold âŒ˜ to zoom"})},ref:y,keyboard:!1,onLoad:()=>{L(!0)},children:[r&&f.jsx(Bs,{isFullScreen:!1,onClick:r}),f.jsx(Ps,{position:"top-right",showCompass:!1,style:{borderRadius:9999,overflow:"hidden"}}),f.jsx(Hs,{show:b,onClick:()=>{g(O(D({},m.current),{pitch:0,bearing:0})),w(!1)}}),f.jsx(le,{children:ue})]}))}),f.jsx("div",{className:"absolute start-3 top-3",children:f.jsx(Zs,{})})]}),e[32]=le,e[33]=i,e[34]=l,e[35]=o,e[36]=p,e[37]=r,e[38]=ue,e[39]=b,e[40]=ce,e[41]=M,e[42]=X):X=e[42],X}function Ys(t,e){return{business:t,idx:e}}function Js(t){return Et([t.longitude,t.latitude])}function Ks(t){return[t.id,t]}function Qs(t,e){const n=t.openNow,s=e.openNow;return n&&!s?-1:!n&&s?1:e.rating-t.rating}function eo(t,e){return!(t.x+t.w<=e.x||e.x+e.w<=t.x||t.y+t.h<=e.y||e.y+e.h<=t.y)}const to=(t,e)=>{if(t){const n=Math.abs(e.viewState.zoom-t.zoom),s=Math.abs(e.viewState.latitude-t.latitude),o=Math.abs(e.viewState.longitude-t.longitude);return n>.05||s>5e-4||o>5e-4}return!1};export{Fs as B,Xs as M,ke as W,Is as a,Rs as b,Ts as c,Zs as d,ts as e,Kn as f,uo as g,fo as h,Et as p,de as r,Qn as t,qs as u};
//# sourceMappingURL=j5fhkqpinqfhn52i.js.map
