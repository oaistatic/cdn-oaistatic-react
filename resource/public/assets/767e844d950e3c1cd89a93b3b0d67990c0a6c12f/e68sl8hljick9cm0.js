import{b as f,r as c,j as n}from"./mw35uwhq4g8r9eam.js";import{it as p,aB as w,er as m,R as x,fi as y,fs as h,ft as L}from"./d0xa318sl7ywi0za.js";function F({gizmoId:a,fileId:t,fileName:o,onClose:r}){const{data:e,isLoading:l}=f({queryKey:["file-info",t],queryFn:async()=>await x.safeGet("/files/{file_id}/simple",{parameters:{path:{file_id:t},query:{gizmo_id:a}}})}),i=!!(e&&(e.mime_type==="application/pdf"||p(o)==="pdf")),{data:s,isLoading:u}=f({queryKey:["file-preview",t,a,i],queryFn:async()=>{const d=await h(t,a,!1,void 0,i);if(d.status===L.Success)return d.download_url;throw new Error("Failed to download file inline preview")},staleTime:y,enabled:!!e});return c.useEffect(()=>{l||u||e&&!i&&s&&(window.open(s,"_blank"),r())},[e,s,i,r,l,u]),n.jsx(w,{testId:"modal-file-preview",className:"min-h-[90vh] max-w-[75vw] max-w-[1000px]",isOpen:!0,onClose:r,type:"success",title:o,showCloseButton:!0,size:"custom",children:l||u||!i||!s?n.jsx("div",{className:"flex h-full w-full items-center justify-center",children:n.jsx(m,{})}):n.jsx("iframe",{src:s,title:o,height:"100%",width:"100%"})})}export{F as FilePreviewModal};
//# sourceMappingURL=e68sl8hljick9cm0.js.map
