var ce=Object.defineProperty,le=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var V=(t,a,s)=>a in t?ce(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,l=(t,a)=>{for(var s in a||(a={}))me.call(a,s)&&V(t,s,a[s]);if(Q)for(var s of Q(a))pe.call(a,s)&&V(t,s,a[s]);return t},E=(t,a)=>le(t,de(a));import{h as L,e as D,j as e,M as m,c as ue,r as d,k as ee,u as ge,d as he,a as ae}from"./mw35uwhq4g8r9eam.js";import{w as fe,eK as xe,z as ke,dn as be}from"./g2euln7v5pbm31qa.js";import{A as ve}from"./bbjo050o29nnp22b.js";import{e7 as _,pj as ye,u as te,p as se,dz as we,eS as Ce,_ as x,ak as je,aA as U,dv as oe,dy as Se,ek as Me,pu as Te,e5 as Ne,eg as We}from"./d0xa318sl7ywi0za.js";import{a as z,c as Pe,P as Ee,b as ne}from"./f6mluabugc6ieyxe.js";import{c as De}from"./iej0cupg2dqkmejt.js";import{h as _e,d as Ae}from"./ojmli062couj7r3v.js";import{I as Oe}from"./0vzw4aujxrcpkx50.js";import{u as Fe,m as Ue}from"./g1i2syv8gpnf7zon.js";import{G as Le}from"./3nm0nfmltveebiyx.js";function Ge({workspaceName:t,onChangeWorkspaceName:a,showHeader:s=!0,isContentTweaksEnabled:n=!1,useFreeWorkspaceCopy:i=!1}){const r=L(),o=i?Ie.workspaceNameDescription:n?J.workspaceNameDescription:q.workspaceNameDescription,c=n?J.exampleTeamWorkspaceName:q.exampleTeamWorkspaceName;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex-wrap",children:[s&&e.jsx("label",{htmlFor:"workspace-name",className:"text-token-text-primary block pb-1 text-lg font-semibold",children:e.jsx(m,l({},q.workspaceNameLabel))}),e.jsx("p",{className:"font-base text-token-text-secondary text-sm",children:e.jsx(m,l({},o))})]}),e.jsx(Oe,{className:"w-full",type:"text",name:"workspace-name",placeholder:r.formatMessage(c),value:t,onChange:p=>a(p.target.value),maxLength:64})]})}const q=D({workspaceNameLabel:{id:"createWorkspace.workspaceNameLabel",defaultMessage:"Workspace name"},workspaceNameDescription:{id:"createWorkspace.workspaceNameDescription",defaultMessage:"Choose a name your team will recognize."},exampleTeamWorkspaceName:{id:"createWorkspace.exampleTeamWorkspaceName",defaultMessage:"Acme Inc."}}),J=D({workspaceNameDescription:{id:"createWorkspace.experiment.workspaceNameDescription",defaultMessage:"This will be your workspace name — the shared home for your team in ChatGPT."},exampleTeamWorkspaceName:{id:"createWorkspace.experiment.exampleTeamWorkspaceName",defaultMessage:"Acme Inc"}}),Ie=D({workspaceNameDescription:{id:"createWorkspace.freeWorkspace.workspaceNameDescription",defaultMessage:"We’ll use this as your workspace name. Choose a name your team will recognize."}}),Z=D({discoverabilityCheckboxWithDomain:{id:"workspaceOnboarding.discoverabilityCheckboxWithDomain",defaultMessage:"Anyone with an <b>{domain}</b> email can request to join"},discoverabilityCheckboxGeneric:{id:"workspaceOnboarding.discoverabilityCheckboxGeneric",defaultMessage:"Anyone with your email domain can request to join"}});function Re(t){"use forget";const a=ue.c(5),{onNext:s,useFreeWorkspaceCopy:n}=t,i=n===void 0?!1:n,r=_();if(!r){let c;return a[0]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsx(ye,{}),a[0]=c):c=a[0],c}let o;return a[1]!==r||a[2]!==s||a[3]!==i?(o=e.jsx(ze,{onNext:s,currentAccount:r,useFreeWorkspaceCopy:i}),a[1]=r,a[2]=s,a[3]=i,a[4]=o):o=a[4],o}function ze({onNext:t,currentAccount:a,useFreeWorkspaceCopy:s=!1}){"use no forget";var Y,K;const n=te(),i=L(),r=se(),o=we(),c=a.data,[p,w]=d.useState(""),[f,b]=d.useState(!0),[G]=ee(),C=G.get("account_id"),j=C!=null?C:a.data.id,v=Fe(j),{data:k}=Ce(j),S=(k==null?void 0:k.support_workspace_discovery)!==!1,g=!!j&&S,N=fe(j,{suppressSuccessToast:!0}),M=(K=(Y=o==null?void 0:o.email)==null?void 0:Y.split("@")[1])!=null?K:null,A=M?"@".concat(M):null,W=typeof(k==null?void 0:k.workspace_discoverable)=="boolean"?k.workspace_discoverable:null,P=d.useCallback(h=>{b(h),x.logEventWithStatsig("Account Pay: Create Workspace Discoverability Checkbox Toggled","chatgpt_business_workspace_create_discoverability_checkbox_toggled",{workspaceDiscoverable:h})},[]),I=d.useCallback(async()=>{if(!a)return;const h=a.subscriptionAnalyticsParams;x.logEvent("Account Pay: Create Workspace Modal Clicked",h);try{const y=[];p!==c.name&&(y.push(v.mutateAsync({name:p})),x.logEvent("Account Pay: Create Workspace Modal Renamed",h)),g&&W!==f&&(x.logEvent("Account Pay: Create Workspace Discoverability Submitted",{workspaceDiscoverable:f}),y.push(N.mutateAsync({value:f,public_display_name:null,use_workspace_name_for_discovery:f,action:"toggle"}))),y.length>0&&await Promise.all(y),t()}catch(y){r.warning(i.formatMessage(Ue.saveError),{hasCloseButton:!0})}},[a,c.name,N,i,t,v,g,r,W,f,p]);d.useEffect(()=>{var y;if(!a||!o||!o.email)return;const h=(y=_e(i,a,o))!=null?y:"";w(X=>X.trim().length===0?h:X)},[i,a,o]),d.useEffect(()=>{if(!a)return;const h=a.subscriptionAnalyticsParams;x.logEvent("Account Pay: Create Workspace Modal Show",h)},[a]);const T=je(n,"1456645202").get("is_workspace_content_tweaks_enabled",!1),R=T?H.workspaceSetupTitle:xe.nameWorkspace,$=T?H.discoverabilityCheckboxWithDomain:Z.discoverabilityCheckboxWithDomain,re=T?H.discoverabilityCheckboxGeneric:Z.discoverabilityCheckboxGeneric;return e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"md:whitespace-nowrap",children:e.jsx(m,l({},R))}),e.jsxs(Pe,{children:[e.jsx(Ge,{workspaceName:p,onChangeWorkspaceName:w,showHeader:!1,isContentTweaksEnabled:T,useFreeWorkspaceCopy:s}),g&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(ke,{id:"workspace-discoverability-opt-in",checked:f,onChange:h=>P(h.currentTarget.checked),containerClassName:"items-start",className:"mt-1",labelClassName:"text-left text-token-text-primary text-sm",label:e.jsx(e.Fragment,{children:A?e.jsx(m,E(l({},$),{values:{domain:A,b:h=>e.jsx("strong",{className:"font-semibold",children:h})}})):e.jsx(m,l({},re))})})})]}),e.jsx(U,{loading:v.isPending||N.isPending||a==null,onClick:()=>{I()},disabled:p.trim().length===0,size:"large",fullWidth:!0,children:e.jsx(m,l({},oe.continueButtonText))})]})}const H=D({workspaceSetupTitle:{id:"workspaceOnboarding.experiment.workspaceSetupTitle",defaultMessage:"What's your company or team name?"},discoverabilityCheckboxWithDomain:{id:"workspaceOnboarding.experiment.discoverabilityCheckboxWithDomain",defaultMessage:"Anyone with a <b>{domain}</b> email can ask to join"},discoverabilityCheckboxGeneric:{id:"workspaceOnboarding.experiment.discoverabilityCheckboxGeneric",defaultMessage:"Anyone with your company email can ask to join"}});var ie=(t=>(t.Landing="landing",t.Setup="setup",t.Naming="naming",t.Invite="invite",t.CAOnboarding="caOnboarding",t.Complete="complete",t))(ie||{});const Be={enter:t=>({translateX:t>=0?"50%":"-50%",opacity:0}),center:{translateX:0,opacity:1},exit:t=>({translateX:t<=0?"50%":"-50%",opacity:0})},O=["landing","naming","invite","caOnboarding","complete"];function la({LandingComponent:t=$e,FinalStepComponent:a=Ke,useFreeWorkspaceCopy:s=!1}={}){"use no forget";const n=ge(),i=he(),{pathname:r}=ae(),{currentStep:o}=Qe(),c=te(),p=_(),w=L(),f=se(),[b,G]=d.useState(1),[C,j]=ee(),v=C.get("account_id");function k(){window.location.href="/"}d.useEffect(()=>{function g(){G(-1)}return window.addEventListener("popstate",g),()=>{window.removeEventListener("popstate",g)}},[]);const S=d.useCallback((g,N)=>{G(1);let M=O.indexOf(o);const A=O.length-1,W=O[N?A:M+1],P=new URLSearchParams(C.toString()),I=g!=null?g:P.get("account_id");g&&g!==v&&(P.set("account_id",g),j(P,{replace:!0}));const B=W==="caOnboarding"?Se(c,"555825174").get("enabled",!1):!1;W==="caOnboarding"&&x.logEventWithStatsig("Contextual Answers Team Sign Up Flow Experiment Flag Evaluated","chatgpt_contextual_answers_team_sign_up_experiment_evaluated",{workspaceId:I,experimentFlag:B}),W==="caOnboarding"&&(!B||p!=null&&p.isFreeWorkspace())&&M++;const T=N?A:M+1;if(!I){k();return}if(M!==-1&&T<O.length){const R=P.toString(),$="".concat(r).concat(R?"?".concat(R):"");i("".concat($,"#").concat(O[T]))}},[c,p,o,v,i,r,C,j]);return e.jsx("div",{className:"max-w-sm pb-6",children:e.jsxs(Me,{mode:"wait",custom:b,children:[o==="landing"&&e.jsx(F,{initial:!1,custom:b,children:e.jsx(t,{onNext:S})},"landing"),o==="naming"&&e.jsx(F,{initial:!1,custom:b,children:e.jsx(Re,{onNext:S,useFreeWorkspaceCopy:s})},"naming"),o==="invite"&&e.jsx(F,{custom:b,children:e.jsx(Xe,{onNext:S})},"invite"),o==="caOnboarding"&&e.jsx(F,{custom:b,children:e.jsx(Ye,{onNext:S})},"caOnboarding"),o==="complete"&&e.jsx(F,{custom:b,children:e.jsx(a,{onNext:()=>{S(),v&&Te(n,v,c,w,f),k()}})},"complete")]})})}const F=t=>e.jsx(Ne.div,l({initial:"enter",animate:"center",exit:"exit",variants:Be,transition:{translateX:{type:"tween",duration:0},opacity:{duration:.2}}},t));function $e({onNext:t}){const a=_(),s=d.useCallback(()=>{if(!a)return;const n=a.subscriptionAnalyticsParams,r=new URLSearchParams(window.location.search).get("referrer")||document.referrer;x.logEvent("Account Pay: Payment Confirmation Modal Clicked",E(l({},n),{referrer:r}))},[a]);return d.useEffect(()=>{if(!a)return;const n=a.subscriptionAnalyticsParams,r=new URLSearchParams(window.location.search).get("referrer")||document.referrer;x.logEvent("Account Pay: Payment Confirmation Modal Show",E(l({},n),{referrer:r}))},[a]),e.jsxs(e.Fragment,{children:[e.jsx(Ee,{isTrial:!1}),e.jsx(z,{children:e.jsx(m,l({},u.standard))}),e.jsx(ne,{children:e.jsx(m,l({},u.description))}),e.jsx(U,{onClick:()=>{t(),s()},size:"large",loading:a==null,fullWidth:!0,children:e.jsx(m,l({},oe.continueButtonText))})]})}function Xe({onNext:t}){var w;const a=L(),s=_(),{data:n}=be(),i=Ae(),r=d.useMemo(()=>{if(!i)return null;const[,f]=i.split("@");return f!=null?f:null},[i]),o=d.useMemo(()=>s==null?void 0:s.subscriptionAnalyticsParams,[s]);if(d.useEffect(()=>{s!=null&&x.logEvent("Account Pay: Invite Collaborators Modal Show",o)},[o,s]),s==null||!s.isFreeWorkspace()&&n==null)return null;const c=s.isFreeWorkspace(),p=c?5:(w=n==null?void 0:n.seats_entitled)!=null?w:1;return e.jsxs(e.Fragment,{children:[e.jsx(z,{children:c?e.jsx(m,l({},u.inviteTitleFreeWorkspace)):e.jsx(m,E(l({},u.inviteTitle),{values:{seatCount:p,workspaceName:s.data.name}}))}),e.jsx("div",{className:"text-md text-token-text-secondary mt-2 mb-8",children:c&&r?e.jsx(m,E(l({},u.inviteSubtitleFreeWorkspace),{values:{domain:r}})):e.jsx(m,l({},u.completeDescription))}),e.jsx(ve,{fullWidthButtons:!0,workspace:s,canResendInviteEmails:!1,cancelButtonText:a.formatMessage(u.skipAddMembers),onCancel:t,onSuccess:t,seatCount:p})]})}const qe="https://persistent.oaistatic.com/chatgpt/internal-knowledge-promo-video.mp4",He="https://persistent.oaistatic.com/chatgpt/internal-knowledge-promo.png";function Ye({onNext:t}){const a=L(),s=_(),[n,i]=d.useState(!1),[r,o]=d.useState(!1);return d.useEffect(()=>{if(!s)return;const c=s.subscriptionAnalyticsParams;x.logEvent("Account Pay: Contextual Answers Step Shown",c)},[s]),e.jsxs("div",{children:[e.jsxs("div",{className:"w-max-[384px] h-max-[170px] relative h-full w-full overflow-hidden rounded-3xl",children:[e.jsx("video",{src:qe,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>o(!0)}),!r&&e.jsx("img",{src:He,alt:a.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"})]}),e.jsx("div",{className:"text-heading-2 mt-8",children:a.formatMessage(u.caOnboardingTitle)}),e.jsx("div",{className:"text-token-text-secondary mt-4 mb-8",children:a.formatMessage(u.caOnboardingDescription)}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(U,{onClick:()=>i(!0),icon:We,size:"large",fullWidth:!0,children:a.formatMessage(u.caOnboardingConnectButton)}),e.jsx(U,{onClick:()=>t(),size:"large",fullWidth:!0,color:"ghost",children:a.formatMessage(u.skipCaOnboarding)})]}),n&&e.jsx(Le,{isDwdEnabled:!0,triggerLocation:"team-sign-ups",onClose:c=>{i(!1),c&&t()}})]})}function Ke({onNext:t}){const a=_(),s=d.useMemo(()=>a==null?void 0:a.subscriptionAnalyticsParams,[a]);d.useEffect(()=>{x.logEvent("Account Pay: Workspace Setup Complete Modal Show",s)},[s]);const n=()=>{x.logEvent("Account Pay: Workspace Setup Complete Modal Clicked",s)};return e.jsxs(e.Fragment,{children:[e.jsx(z,{children:e.jsx(m,l({},u.completeTitle))}),e.jsx(ne,{children:e.jsx(m,l({},u.completeDescription))}),e.jsx(U,{onClick:()=>{t(),n()},size:"large",fullWidth:!0,children:e.jsx(m,l({},u.continueToChatgpt))})]})}function Qe(){const{hash:t,pathname:a,search:s}=ae(),n=t.slice(1);return{currentStep:Ve(n)?n:"landing",currentPath:a+s}}const Ve=De(ie),u=D({standard:{id:"UpgradedToTeamSuccess.trial",defaultMessage:"Payment successful"},description:{id:"UpgradedToTeamSuccess.description",defaultMessage:"Your team has been created. You can invite members to join the workspace to start collaborating."},continueToChatgpt:{id:"UpgradedToTeamSuccess.continueToChatgpt",defaultMessage:"Continue to ChatGPT"},setupTitle:{id:"UpgradedToTeamSuccess.setupTitle",defaultMessage:"Set up a team workspace"},setupSubtitle:{id:"UpgradedToTeamSuccess.setupSubtitle",defaultMessage:"Workspace name"},inviteTitle:{id:"UpgradedToTeamSuccess.inviteTitle",defaultMessage:"Invite {seatCount, plural, one {# member} other {# members}} to {workspaceName}"},inviteTitleFreeWorkspace:{id:"UpgradedToTeamSuccess.inviteTitleFreeWorkspace",defaultMessage:"Add your team"},inviteSubtitleFreeWorkspace:{id:"UpgradedToTeamSuccess.inviteSubtitleFreeWorkspace",defaultMessage:"Invite anyone with an @{domain} email to join this workspace."},completeTitle:{id:"UpgradedToTeamSuccess.completeTitle",defaultMessage:"Workspace setup complete"},completeDescription:{id:"UpgradedToTeamSuccess.completeDescription",defaultMessage:"Supercharge your team's productivity with ChatGPT."},skipAddMembers:{id:"UpgradedToTeamSuccess.skipAddMembers",defaultMessage:"Skip this step"},caOnboardingTitle:{id:"UpgradedToTeamSuccess.caOnboardingTitle",defaultMessage:"Connect internal knowledge"},caOnboardingDescription:{id:"UpgradedToTeamSuccess.caOnboardingDescription",defaultMessage:"Your team can chat with Google Docs, Sheets, and Slides to give you more helpful, relevant answers."},caOnboardingConnectButton:{id:"UpgradedToTeamSuccess.caOnboardingConnectButton",defaultMessage:"Connect Google Drive"},skipCaOnboarding:{id:"UpgradedToTeamSuccess.skipCaOnboarding",defaultMessage:"Maybe later"}});export{la as U};
//# sourceMappingURL=li1ryrplj6ozlpq5.js.map
