var Bt=Object.defineProperty,Yt=Object.defineProperties;var Gt=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var gt=(t,e,o)=>e in t?Bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,C=(t,e)=>{for(var o in e||(e={}))ft.call(e,o)&&gt(t,o,e[o]);if(Le)for(var o of Le(e))ht.call(e,o)&&gt(t,o,e[o]);return t},F=(t,e)=>Yt(t,Gt(e));var Qe=(t,e)=>{var o={};for(var s in t)ft.call(t,s)&&e.indexOf(s)<0&&(o[s]=t[s]);if(t!=null&&Le)for(var s of Le(t))e.indexOf(s)<0&&ht.call(t,s)&&(o[s]=t[s]);return o};import{c as Ae,j as n,M as ae,e as we,L as xe,n as Ht,r as q,b as rt,h as Ye,a as Wt,d as Vt}from"./mw35uwhq4g8r9eam.js";import{u as Ge,ak as he,aA as He,am as U,pV as ze,lC as lt,sF as $t,sG as qt,_ as Z,aB as ct,mk as Kt,dp as _t,p as Qt,er as zt,aP as Ue,cw as je,R as Jt,eE as kt,O as Zt,n2 as tt,dv as st,al as Xt,cF as es,D as ts,cd as ss}from"./d0xa318sl7ywi0za.js";import{fw as os,pa as Dt,bO as Tt,cu as as,pb as ns,pc as is,fx as rs,cv as Ft,bT as ot,bU as at,h0 as Pt,h2 as nt,gB as xt,pd as ls,h5 as cs,eD as Je,pe as us,pf as ds,pg as yt,ph as ms,pi as ps,pj as gs,pk as it,gH as fs,m1 as hs,oT as ve,pl as _s,pm as Ps,pn as ys,f9 as Ss,po as Cs}from"./g2euln7v5pbm31qa.js";import{a as ut,h as At,b as bs,g as De,c as Ze,u as wt,d as Ms,i as Es,e as ks,f as Ne,S as St}from"./nte82mqftpddm52f.js";import{a as Rt,g as Ct}from"./m2xec4gtk8ypy5ff.js";import{u as Be}from"./jcku1nkz6suna4le.js";import{E as Lt}from"./mbe20fj6m6dgadji.js";import{a as Ds,u as Ts}from"./ku5gt2a8mwp30g8p.js";import{u as Fs,a as xs}from"./keveoph4stiufpkl.js";import{u as As,i as ws,T as Rs,t as bt,b as Xe}from"./3xa3aq3nbd1nd678.js";const uo=t=>{"use forget";const e=Ae.c(13),{billingDetails:o,shouldUseComparisonSpacing:s,shouldUseOnboardingFeatures:a,className:l,cta:d}=t,f=Ge();let P;if(e[0]!==f||e[1]!==a){const c=he(f,"1656913255").get("outcome_value_props_enabled",!1);P=os({shouldUseOnboardingFeatures:a,shouldUseOutcomeValueProps:c}),e[0]=f,e[1]=a,e[2]=P}else P=e[2];const m=P;let i;e[3]!==d||e[4]!==m?(i=d!=null?d:n.jsx(He,{color:"secondary",disabled:!0,size:"large",className:"btn-secondary disabled:bg-token-bg-primary w-[100%]",children:n.jsx(ae,C({},m.callToAction.inactive))}),e[3]=d,e[4]=m,e[5]=i):i=e[5];let y;e[6]===Symbol.for("react.memo_cache_sentinel")?(y=[n.jsx(ae,F(C({},Ls.haveExistingPlan),{values:{link:vs}}),"existing-plan-help")],e[6]=y):y=e[6];let E;return e[7]!==o||e[8]!==l||e[9]!==m||e[10]!==s||e[11]!==i?(E=n.jsx(ut,{className:l,planType:U.FREE,pricingPlan:m,shouldUseComparisonSpacing:s,callToActionButton:i,additionalLinks:y,billingDetails:o,isCheckoutPricingConfigLoading:!1,checkoutPricingConfigError:null}),e[7]=o,e[8]=l,e[9]=m,e[10]=s,e[11]=i,e[12]=E):E=e[12],E},Ls=we({haveExistingPlan:{id:"FreeColumn.haveExistingPlan",defaultMessage:"Have an existing plan? <link>See billing help</link>"}});function vs(t){return n.jsx(xe,{target:"_blank",to:Dt,onClick:At,className:"font-medium underline",children:t},"row-plus-plan-help-link")}function Mt(t,e){const o=lt(new Date,t);return new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"}).format(o)}function Ns({currentAccount:t,intl:e,billingDetails:o,pricingPlan:s,promoMetadata:a,columnPlanType:l}){var S;if(a||!t.data.subscriptionStatus.discount)return{activeDiscountMetadata:null,scheduledAdditionalLink:null};const d=t.getDaysUntilPlanDiscountExpires(),f=t.data.subscriptionStatus.discount,P=t.planType,m=t.getNextPlanType(),i=(S=f.discount_start_in_num_periods)!=null?S:0,y=i>0&&P===l&&!m,E=i>0&&m===l,c=e.formatNumber(f.amount,{style:"currency",currency:o.currency,minimumFractionDigits:0,maximumFractionDigits:2});return y||E?{activeDiscountMetadata:null,scheduledAdditionalLink:n.jsx("div",{className:"mb-3 w-full",children:n.jsx("div",{className:"px-1 text-sm font-medium text-[#615EEB]",children:f.discount_type===ze.PERCENTAGE?n.jsx(ae,{id:"PlusColumn.scheduledPercentDiscount",defaultMessage:"Your {discountPercent}% discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}.",values:{discountPercent:f.amount,numPeriods:i}}):n.jsx(ae,{id:"PlusColumn.scheduledFixedDiscount",defaultMessage:"Your {discountFixed} discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}.",values:{discountFixed:c,numPeriods:i}})})})}:i>0||l!==t.data.subscriptionStatus.planType?{activeDiscountMetadata:null,scheduledAdditionalLink:null}:s.cost?(s.cost=Rt(e,s.cost,f),f.discount_type===ze.PERCENTAGE?{activeDiscountMetadata:{discount:{percentage:f.amount,expires_at:d?Mt(d,e.locale):void 0}},scheduledAdditionalLink:null}:f.discount_type===ze.FIXED?{activeDiscountMetadata:{discount:{value:f.amount,expires_at:d?Mt(d,e.locale):void 0}},scheduledAdditionalLink:null}:{activeDiscountMetadata:null,scheduledAdditionalLink:null}):{activeDiscountMetadata:null,scheduledAdditionalLink:null}}const vt="https://help.openai.com/en/articles/10492689-chatgpt-plus-promotions-referrals",Is="https://help.openai.com/en/articles/12501659-chatgpt-go-promotions-and-referrals",Os="https://help.openai.com/en/articles/12739021-chatgpt-go-promotion-india",Us="go-12-months-free",js={[U.GO]:Is,[U.PLUS]:vt};function Bs(t,e){var o;return t===U.GO&&e===Us?Os:(o=js[t])!=null?o:vt}function Et(t,e,o,s){let a;switch(t){case"month":a=qt(new Date,e);break;case"year":a=$t(new Date,e);break}return s&&a&&(a=lt(a,s)),new Intl.DateTimeFormat(o,{year:"numeric",month:"short",day:"numeric"}).format(a)}function Nt({intl:t,pricingPlan:e,planName:o,promoMetadata:s,currency:a,currentAccount:l,checkoutPricingConfig:d}){var R,le,O,z,j,J,te,N,se,W,B,V;if(!e.cost)return e;const{costTitle:f,currencySymbol:P}=bs(e,a),m=(le=(R=f==null?void 0:f.defaultMessage)==null?void 0:R.toString())!=null?le:"20",i=Tt(o.toLowerCase()),{schedule:y}=s,E=(z=(O=s.duration)==null?void 0:O.period)!=null?z:"month",c=(J=(j=s.duration)==null?void 0:j.num_periods)!=null?J:1,S=(te=y==null?void 0:y.start_after_num_periods)!=null?te:0,A=(N=y==null?void 0:y.period)!=null?N:E,_=S>0?Et(A,S,t.locale):void 0,g=Et(E,c+(S>0?S:0),t.locale,l==null?void 0:l.getDaysUntilPlanRenews()),p=Rt(t,e.cost,s.discount,(se=s.duration)!=null?se:{num_periods:1,period:"month"}),K=(B=(W=P.code.defaultMessage)==null?void 0:W.toString())!=null?B:"USD",u=t.formatNumber(parseFloat(m)||0,{style:"currency",currency:K,minimumFractionDigits:0,maximumFractionDigits:2}),Q=(s==null?void 0:s.no_auto_renewal_at_discount_end)===!0,D=(V=l.getEligiblePromoCampaignId(o))!=null?V:void 0;let b;switch(E){case"month":S>0?c===1?b=t.formatMessage(T.promoPlanDisclaimerScheduledForSingleMonth,{start_date:_,end_date:g,cost:u,plan_name:i}):b=t.formatMessage(T.promoPlanDisclaimerScheduledForPluralMonths,{num_months:c,start_date:_,end_date:g,cost:u,plan_name:i}):c===1?b=Q?t.formatMessage(T.promoPlanDisclaimerNoRenewForSingleMonth,{}):t.formatMessage(T.promoPlanDisclaimerForSingleMonth,{date:g,cost:u,plan_name:i}):b=Q?t.formatMessage(T.promoPlanDisclaimerNoRenewForPluralMonths,{num_months:c}):t.formatMessage(T.promoPlanDisclaimerForPluralMonths,{num_months:c,date:g,cost:u,plan_name:i});break;case"year":S>0?c===1?b=t.formatMessage(T.promoPlanDisclaimerScheduledForSingleYear,{start_date:_,end_date:g,cost:u,plan_name:i}):b=t.formatMessage(T.promoPlanDisclaimerScheduledForPluralYears,{num_years:c,start_date:_,end_date:g,cost:u,plan_name:i}):c===1?b=Q?t.formatMessage(T.promoPlanDisclaimerNoRenewForSingleYear,{}):t.formatMessage(T.promoPlanDisclaimerForSingleYear,{date:g,cost:u,plan_name:i}):b=Q?t.formatMessage(T.promoPlanDisclaimerNoRenewForPluralYears,{num_years:c}):t.formatMessage(T.promoPlanDisclaimerForPluralYears,{num_years:c,date:g,cost:u,plan_name:i});break;case"hour":throw new Error("Period 'hour' is not supported")}const L="<article>"+t.formatMessage(T.termsApply)+"</article> "+b,v=Bs(o,D);let w=s.summary;if(S>0){const{formattedDiscountedCost:r}=Ct(t,1,s.discount,a,d,o),x=r;switch(E){case"month":c===1?w=t.formatMessage(T.promoSummaryScheduledForSingleMonth,{discounted_cost:x}):w=t.formatMessage(T.promoSummaryScheduledForPluralMonths,{discounted_cost:x,num_months:c});break;case"year":c===1?w=t.formatMessage(T.promoSummaryScheduledForSingleYear,{discounted_cost:x}):w=t.formatMessage(T.promoSummaryScheduledForPluralYears,{discounted_cost:x,num_years:c});break}}let k=p;if(S>0){const{formattedDiscountedCost:r}=Ct(t,1,s.discount,a,d,o);let x;switch(E){case"month":c===1?x=t.formatMessage(T.promoCostSubtitleScheduledForSingleMonth,{start_date:_,discounted_cost:r}):x=t.formatMessage(T.promoCostSubtitleScheduledForPluralMonths,{start_date:_,discounted_cost:r,num_months:c});break;case"year":c===1?x=t.formatMessage(T.promoCostSubtitleScheduledForSingleYear,{start_date:_,discounted_cost:r}):x=t.formatMessage(T.promoCostSubtitleScheduledForPluralYears,{start_date:_,discounted_cost:r,num_years:c});break}k=F(C({},e.cost),{costDuration:{id:"promoCostDurationScheduled",defaultMessage:x,description:"Cost duration subtitle for scheduled promo indicating when discount starts and for how long"}})}return e=F(C({},e),{summary:{id:"promoSummary",defaultMessage:w},disclaimer:{id:"promoDisclaimer",defaultMessage:L,article:v},fullPriceResumeDateString:g,cost:k,callToAction:F(C({},e.callToAction),{promo:Ht({id:"pricingPlanConstants.promo.callToAction",defaultMessage:"Apply to My Subscription"})})}),e}const T=we({promoPlanDisclaimerForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months. Starting {date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForSingleMonth",defaultMessage:"Promo pricing applies for 1 month starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerScheduledForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForSingleYear",defaultMessage:"Promo pricing applies for 1 year starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerForSingleMonth",defaultMessage:"Promo pricing applies for 1 month. Starting {date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerNoRenewForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months."},promoPlanDisclaimerNoRenewForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForSingleMonth",defaultMessage:"Promo pricing applies for 1 month."},promoCostSubtitleScheduledForPluralMonths:{id:"pricingPlanConstants.promoCostSubtitleScheduledForPluralMonths",defaultMessage:"Starting {start_date}: {discounted_cost}/month for {num_months} months"},promoCostSubtitleScheduledForSingleMonth:{id:"pricingPlanConstants.promoCostSubtitleScheduledForSingleMonth",defaultMessage:"Starting {start_date}: {discounted_cost}/month for 1 month"},promoCostSubtitleScheduledForPluralYears:{id:"pricingPlanConstants.promoCostSubtitleScheduledForPluralYears",defaultMessage:"Starting {start_date}: {discounted_cost}/year for {num_years} years"},promoCostSubtitleScheduledForSingleYear:{id:"pricingPlanConstants.promoCostSubtitleScheduledForSingleYear",defaultMessage:"Starting {start_date}: {discounted_cost}/year for 1 year"},promoPlanDisclaimerForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years. Starting {date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerForSingleYear",defaultMessage:"Promo pricing applies for 1 year. Starting {date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerNoRenewForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years."},promoPlanDisclaimerNoRenewForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForSingleYear",defaultMessage:"Promo pricing applies for 1 year."},termsApply:{id:"pricingPlanConstants.termsApply",defaultMessage:"Promo terms apply."},promoSummaryScheduledForPluralMonths:{id:"pricingPlanConstants.promoSummaryScheduledForPluralMonths",defaultMessage:"Pay for the first month, then the next {num_months} months are {discounted_cost}."},promoSummaryScheduledForSingleMonth:{id:"pricingPlanConstants.promoSummaryScheduledForSingleMonth",defaultMessage:"Pay for the first month, then the next month is {discounted_cost}."},promoSummaryScheduledForPluralYears:{id:"pricingPlanConstants.promoSummaryScheduledForPluralYears",defaultMessage:"Pay for the first year, then the next {num_years} years are {discounted_cost}."},promoSummaryScheduledForSingleYear:{id:"pricingPlanConstants.promoSummaryScheduledForSingleYear",defaultMessage:"Pay for the first year, then the next year is {discounted_cost}."}});function Ys({isOpen:t,onClose:e,onContinue:o,analyticsParams:s}){q.useEffect(()=>{t&&Z.logEventWithStatsig("Mobile Subscription Warning Modal Shown","chatgpt_mobile_subscription_warning_modal_shown",s)},[s,t]);const a=()=>{Z.logEventWithStatsig("Mobile Subscription Warning Modal Continue Clicked","chatgpt_mobile_subscription_warning_modal_continue_clicked",s),o()},l=()=>{Z.logEventWithStatsig("Mobile Subscription Warning Modal Close Clicked","chatgpt_mobile_subscription_warning_modal_close_clicked",s),e()};return n.jsx(ct,{testId:"modal-mobile-subscription-warning",isOpen:t,onClose:l,type:"warning",icon:Kt,title:n.jsx(ae,C({},Ie.checkSubscriptionHeader)),primaryButton:n.jsx(_t.Button,{title:Ie.dismissModal.defaultMessage,color:"primary",onClick:l}),secondaryButton:n.jsx(_t.Button,{title:Ie.continueToNextStep.defaultMessage,color:"secondary",onClick:a}),children:n.jsx("span",{className:"gap-2 text-gray-600",children:Ie.checkSubscriptionBody.defaultMessage})})}const Ie=we({checkSubscriptionHeader:{id:"mobileSubscriptionWarningModal.checkSubscriptionHeader",defaultMessage:"Check your App Store subscription"},checkSubscriptionBody:{id:"mobileSubscriptionWarningModal.checkSubscriptionBody",defaultMessage:"Your subscription through the Apple App Store is currently on pause due to a payment issue. Please resolve that issue to resume using ChatGPT Plus and avoid duplicate charges."},dismissModal:{id:"mobileSubscriptionWarningModal.dismissModal",defaultMessage:"Cancel"},continueToNextStep:{id:"mobileSubscriptionWarningModal.continueToNextStep",defaultMessage:"I understand, continue anyways"}});function Gs(){"use forget";const t=Ae.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["has-app-store-subscription-in-billing-retry"],queryFn:Hs},t[0]=e):e=t[0],rt(e)}async function Hs(){return await Jt.safeGet("/subscriptions/has_app_store_subscription_in_billing_retry")}function Ws(t,e){const o=lt(new Date,t);return new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"}).format(o)}function Vs(t){"use forget";var P;const e=Ae.c(10);let o,s,a,l;e[0]!==t?(P=t,{testId:l,activeColor:o,children:s}=P,a=Qe(P,["testId","activeColor","children"]),e[0]=t,e[1]=o,e[2]=s,e[3]=a,e[4]=l):(o=e[1],s=e[2],a=e[3],l=e[4]);const d=o!=null?o:"primary";let f;return e[5]!==s||e[6]!==a||e[7]!==d||e[8]!==l?(f=n.jsx(He,F(C({fullWidth:!0,size:"large",color:d,"data-testid":l},a),{children:s})),e[5]=s,e[6]=a,e[7]=d,e[8]=l,e[9]=f):f=e[9],f}function $s(t,e){const o=t.planType,s=t.getNextPlanType(),a=t.getDaysUntilPlanChanges(),l=s&&De(s)<De(o);return e?{daysUntilPlanChanges:t.getDaysUntilPlanRenews(),isDowngradeScheduled:!0}:{daysUntilPlanChanges:a,isDowngradeScheduled:l}}function qs(t){"use forget";const e=Ae.c(17),{currentAccount:o,children:s,disableForMobile:a,promoMetadata:l,planType:d,downgradeToGoDisabled:f}=t,{recentlyDowngraded:P}=Ts(),m=Ye(),{daysUntilPlanChanges:i,isDowngradeScheduled:y}=$s(o,P),E=q.useRef(!1),c=l!=null&&"referrer_name"in l,S=ns(o);if(a&&S){let g;e[0]!==m?(g=m.formatMessage({id:"I2JCGZ",defaultMessage:"Mobile subscriptions are currently not eligible for this promotion."}),e[0]=m,e[1]=g):g=e[1];let p;e[2]!==c?(p=u=>{u&&!E.current&&(c&&is.logMobileSubscriptionTooltipOpen(),E.current=!0)},e[2]=c,e[3]=p):p=e[3];let K;return e[4]!==s||e[5]!==g||e[6]!==p?(K=n.jsx(je,{side:"top",sideOffset:20,label:g,onOpenChange:p,children:s}),e[4]=s,e[5]=g,e[6]=p,e[7]=K):K=e[7],K}if(f){let g;e[8]!==m?(g=m.formatMessage({id:"AccountPaymentModal.primaryCTA.downgradeToGoDisabledTooltip",defaultMessage:"Downgrading to Go is not yet available. To purchase, you must first cancel your current plan."}),e[8]=m,e[9]=g):g=e[9];let p;return e[10]!==s||e[11]!==g?(p=n.jsx(je,{side:"top",labelTextAlign:"left",sideOffset:20,label:g,children:s}),e[10]=s,e[11]=g,e[12]=p):p=e[12],p}if(y&&i){const g=Ws(i,m.locale);let p;return e[13]!==d?(p=Tt(d.toLowerCase()),e[13]=d,e[14]=p):p=e[14],n.jsx(je,{side:"top",sideOffset:20,label:n.jsx(ae,{id:"3UZynm",defaultMessage:"Your subscription will change to {planType} on {date}.",values:{date:g,planType:p}}),children:s})}let _;return e[15]!==s?(_=n.jsx(n.Fragment,{children:s}),e[15]=s,e[16]=_):_=e[16],_}function Ks(b){var L=b,{analyticsParams:t,billingDetails:e,currentAccount:o,planType:s,planLoading:a,setPlanLoading:l,testId:d,onPromoClose:f,activeColor:P,disableForMobile:m=!1,disabled:i,downgradeToGoDisabled:y=!1,loading:E=!1,overrideOnClick:c,promoCode:S,promoCampaign:A,promoMetadata:_,autoUpgrade:g=!1,fromiOSWebview:p=!1,pricingPlan:K,setShouldShowCheckoutLoadingOverlay:u,children:Q}=L,D=Qe(L,["analyticsParams","billingDetails","currentAccount","planType","planLoading","setPlanLoading","testId","onPromoClose","activeColor","disableForMobile","disabled","downgradeToGoDisabled","loading","overrideOnClick","promoCode","promoCampaign","promoMetadata","autoUpgrade","fromiOSWebview","pricingPlan","setShouldShowCheckoutLoadingOverlay","children"]);"use no forget";const{data:v,refetch:w}=rt(kt),{trackSelectedPixels:k}=Be({key:s});let R;switch(s){case U.GO:R="go-secondary";break;case U.PLUS:R="plus-secondary";break;case U.PRO:R="pro-secondary";break;case U.SELF_SERVE_BUSINESS:R="team-secondary";break;default:R=""}const{trackSelectedPixels:le}=Be({key:R}),O=Ge(),{data:{value:z}={}}=Gs(),[j,J]=q.useState(!1),[te,N]=q.useState(!1),se=q.useRef(null),[W,B]=q.useState(!1),V=q.useRef(!1),r=q.useRef(new Map),x=Qt(),me=Ye(),pe=o.planType,ce=o.hasPaidSubscription()&&De(s)<De(pe),ne=o.hasPaidSubscription()&&De(s)>De(pe),h=(_==null?void 0:_.plan_name)===Ze(s)&&(_==null?void 0:_.plan_type_change)==="equal",$=he(O,"3950229590"),{prepareCheckoutSession:X,navigateToCheckout:Y}=as(),ee=o.hasPaidSubscription()&&o.isPlus(),I=s===U.PLUS&&!ee&&$.get("enabled_prefetch_checkout_for_plus",!1);q.useEffect(()=>{if(!I)return;const G={plan_name:Ze(s),billing_details:e,promo_code:S,promo_campaign:A?{promo_campaign_id:A,is_coupon_from_query_param:!1}:void 0},M=JSON.stringify(G);if(r.current.has(M))return;Z.logEventWithStatsig("Account Pay: Prefetch Checkout Session","chatgpt_account_payment_modal_prefetch_checkout_session",t),r.current.clear();const H=$.get("skip_sentinel_checkout",!1),oe=X(G,{skipSentinelCheckout:H,fromiOSWebview:p});r.current.set(M,oe)},[t,e,p,$,s,X,A,S,I]);const ie=()=>{const G={plan_name:Ze(s),billing_details:e,promo_code:S,promo_campaign:A?{promo_campaign_id:A,is_coupon_from_query_param:!1}:void 0},M=r.current.get(JSON.stringify(G));if(M)return Z.logEventWithStatsig("Account Pay: Using Prefetched Checkout Session","chatgpt_account_payment_modal_using_prefetched_checkout_session",t),M;Z.logEventWithStatsig("Account Pay: Click to Fetch Checkout Session","chatgpt_account_payment_modal_click_to_fetch_checkout_session",t),r.current.clear();const H=$.get("skip_sentinel_checkout",!1);return X(G,{skipSentinelCheckout:H,fromiOSWebview:p})},Fe=async({skipEmailCheck:G})=>{var M,H;if(!(v!=null&&v.email)&&!G){B(!0);return}l(s),Z.logEvent("Account Pay: Payment Checkout Clicked",t),Ue(O,"chatgpt_account_payment_modal_upgrade_button_click",s),se.current=performance.now();try{const oe=he(O,"3542930659").get("show_loading",!1);u(oe);const ge=await ie();let de;se.current&&(de=performance.now()-se.current),Z.logEvent("Account Pay: Navigating to Payment Checkout",F(C({},t),{url:(M=ge.url)!=null?M:"",latency_ms:de}));const re={url:String((H=ge.url)!=null?H:"")};de!==void 0&&(re.latency_ms=de.toString()),Ue(O,"chatgpt_account_payment_modal_navigating_to_checkout",s,re),await Y(ge)}catch(oe){x.warning(me.formatMessage(Te.paymentErrorWarning),{hasCloseButton:!0}),u(!1)}l(null)},ue=({skipAppStoreSubscriptionInBillingRetryCheck:G=!1,skipEmailCheck:M=!1}={})=>{if(z&&!G)return J(!0);if(c)return c(e,t);ce||ne||h?(Z.logEvent("Account Pay: Payment Checkout Clicked",t),Ue(O,"chatgpt_account_payment_modal_upgrade_button_click",s),N(!0)):(k(),le(),Fe({skipEmailCheck:M}))};return q.useEffect(()=>{!g||V.current||(V.current=!0,ue())},[g]),wt(W,{plan:t}),n.jsxs(n.Fragment,{children:[n.jsx(qs,{currentAccount:o,disableForMobile:m,promoMetadata:_,planType:s,downgradeToGoDisabled:y,children:n.jsx(Vs,F(C({disabled:i,loading:E,onClick:()=>ue(),testId:d,activeColor:P},D),{children:a===s?n.jsx(zt,{}):Q}))}),n.jsx(Ys,{isOpen:j,onClose:()=>J(!1),onContinue:()=>ue({skipAppStoreSubscriptionInBillingRetryCheck:!0}),analyticsParams:t}),te&&n.jsx(Ds,{isOpen:te,onClose:()=>N(!1),accountId:o.id,initialPlanType:pe,updatedPlanType:s,billingDetails:e,promoMetadata:_,promoCode:S,onPromoClose:f,fullPriceResumeDateString:K.fullPriceResumeDateString}),n.jsx(ct,{testId:"modal-add-email",isOpen:W,onClose:()=>B(!1),type:"success",className:"max-w-sm",children:n.jsx(Lt,{enterEmailTitle:me.formatMessage(Te.addEmailTitle),enterEmailDescription:me.formatMessage(Te.addEmailDescription),onVerified:()=>{w(),B(!1),ue({skipEmailCheck:!0})},cancelFlowButton:n.jsx(He,{className:"w-full rounded-md",color:"secondary",onClick:()=>B(!1),children:n.jsx(ae,C({},Te.cancelAddEmail))})})})]})}const Te=we({paymentErrorWarning:{id:"AccountPaymentModal.primaryCTA.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},addEmailTitle:{id:"AccountPaymentModal.primaryCTA.addEmailTitle",defaultMessage:"Email required"},addEmailDescription:{id:"AccountPaymentModal.primaryCTA.addEmailDescription",defaultMessage:"You'll be able to login with this email. It will also be used for account updates (like password resets) and information about OpenAI services."},cancelAddEmail:{id:"AccountPaymentModal.primaryCTA.cancelAddEmail",defaultMessage:"Cancel"},highDemandDisabledText:{id:"AccountPaymentModal.primaryCTA.highDemandDisabledText",defaultMessage:"Due to high demand, we've temporarily paused upgrades."}}),et=U.PLUS;function Qs(t,e,o){let s=null,a=null,l=null;if(t==="plus-10-for-3-months"?(s=o.currencyConfig.promos.plus_intro_offer_3m.amount,a=o.currencyConfig.promos.plus_intro_offer_3m.type,l=3):t==="plus-10-for-12-mos"&&(s=o.currencyConfig.promos.plus_intro_offer_12m.amount,a=o.currencyConfig.promos.plus_intro_offer_12m.type,l=12),s==null||a==null||l==null)return null;let d=null;return a==="value"?d={value:s,currency_code:o.currencyConfig.symbol_code}:d={percentage:s},{plan_name:tt.PLUS,title:"",summary:e.formatMessage(it.headline),discount:d,duration:{num_periods:l,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:null}}const mo=({analyticsParams:t,className:e,currentAccount:o,planLoading:s,isPromoLoading:a,onUpgradeButtonClick:l,setPlanLoading:d,plusPricingPlan:f=null,billingDetails:P,promoCode:m=null,promoMetadata:i=null,onClose:y,disableForMobile:E=!1,type:c,shouldUseComparisonSpacing:S,autoUpgrade:A=!1,fromiOSWebview:_=!1,setShouldShowCheckoutLoadingOverlay:g})=>{"use no forget";const p=Ge(),K=!Zt(p),u=Ye(),Q=Wt();let D=f||rs({ctx:p});const{data:b,isLoading:L,error:v}=Ft({countryCode:P.country,currency:P.currency,ctx:p});if(!L&&!v&&b){const M=ot(b,Pt,at.Month);D=F(C({},D),{cost:{costValue:M.amount,costTitle:nt(M.amount,Pt,P.currency)}})}const w=Ms({ctx:p,shouldLogExposure:!1}),{data:k}=xt(w);i==null&&(k==null?void 0:k.coupon)===w&&(k==null?void 0:k.state)==="eligible"&&Es({ctx:p,shouldLogExposure:!0})&&b&&(b.currencyConfig.promos.plus_intro_offer_3m.enabled||b.currencyConfig.promos.plus_intro_offer_12m.enabled)&&(i=Qs(w,u,b),m=w);const{eligible:R,campaignId:le}=ls();let O;const z=new URLSearchParams(Q.search).get(cs);function j(M){return M==="plus-1-month-free"?{plan_name:tt.PLUS,title:"",summary:u.formatMessage(it.headline),discount:{percentage:100},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:u.formatMessage(st.specialOffer)}:M==="plus-10-for-1-month"?{plan_name:tt.PLUS,title:"",summary:u.formatMessage(it.headline),discount:{percentage:50},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:u.formatMessage(st.specialOffer)}:null}if(i==null){const M=z||(R?le:void 0);if(M){const H=j(M);H&&(m||(O=M),i=H)}}const J=o.isOrWasPaidCustomer(),te=o.hasPaidSubscription(),N=te&&o.isPlus(),se=te&&o.isPro(),W=o.getLastActiveSubscription(),B=o.features.includes("disable_plus_upgrade_ui")&&!J,V=q.useMemo(()=>F(C({},t),{promoCode:m,promoCampaign:O,planType:et,isUpgradeUiDisabled:B,referrer:document.referrer}),[t,m,O,B]),r=[],x=()=>{Z.logEvent("Account Portal: Click iOS Manage Subscription",V)},me=()=>{Z.logEvent("Account Portal: Click Android Manage Subscription",V)},pe=N&&[Je.CHATGPT_IOS,Je.SORA_IOS].includes(W.purchase_origin_platform),ce=N&&W.purchase_origin_platform===Je.MOBILE_ANDROID;r.push(n.jsx(xe,{to:us,target:"_blank",className:"px-1 font-medium underline",children:n.jsx(ae,C({},Oe.limitsApply))},"row-plus-plan-usage-limits")),pe&&r.push(n.jsx(xe,{to:ds,target:"_blank",onClick:x,className:"px-1 font-medium underline",children:u.formatMessage(yt.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),ce&&r.push(n.jsx(xe,{to:ms,target:"_blank",onClick:me,className:"px-1 font-medium underline",children:u.formatMessage(yt.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),N&&J&&r.push(n.jsx(xe,{target:"_blank",to:Dt,onClick:At,className:"px-1 font-medium underline",children:n.jsx(ae,C({},Oe.billingHelp))},"row-plus-plan-help-link"));const ne=i!=null,h=(i==null?void 0:i.promotion_type)==="student_discount",$=i!=null&&"referrer_name"in i,X=(!N||ne)&&s==null,{activeDiscountMetadata:Y,scheduledAdditionalLink:ee}=Ns({currentAccount:o,intl:u,billingDetails:P,pricingPlan:D,promoMetadata:i,columnPlanType:U.PLUS});if(ee&&r.unshift(ee),Y&&(D.summary=ps.plusSummaryWithDiscount),i&&b&&!L&&!v&&(D=Nt({intl:u,pricingPlan:D,promoMetadata:i,currency:P.currency,planName:U.PLUS,currentAccount:o,checkoutPricingConfig:b})),a!=null&&a)return null;let I;ne&&N&&D.callToAction.promo?I=u.formatMessage(D.callToAction.promo):N?I=u.formatMessage(D.callToAction.active):$&&K&&D.callToAction.inactiveUnauthenticated?I=u.formatMessage(D.callToAction.inactiveUnauthenticated):I=u.formatMessage(ks({planType:U.PLUS}));let ie;N&&!ne||se?ie="secondary":c==="highlight"||c==="promo"?ie="purple":(c==="standard"||h)&&(ie="primary");const Fe=d!=null?d:(()=>{}),ue=typeof l=="function"?(M,H)=>l(M,H):void 0,G=n.jsx(Ks,{analyticsParams:V,billingDetails:P,currentAccount:o,planType:et,planLoading:s,setPlanLoading:Fe,testId:"select-plan-button-plus-upgrade",onPromoClose:y,activeColor:ie,disableForMobile:E,disabled:B||!X,promoMetadata:i,promoCode:m!=null?m:void 0,promoCampaign:O,pricingPlan:D,setShouldShowCheckoutLoadingOverlay:g,autoUpgrade:A,fromiOSWebview:_,overrideOnClick:ue,children:I});return n.jsx(ut,{planType:et,elementId:gs,pricingPlan:D,shouldUseComparisonSpacing:S,isCheckoutPricingConfigLoading:L,checkoutPricingConfigError:v,callToActionButton:B?n.jsx("div",{className:"relative w-full",children:n.jsx(je,{side:"bottom",sideOffset:20,label:u.formatMessage(Oe.highDemandDisabledText),children:G})}):G,secondaryCallToActionButton:c==="promo"?n.jsx(He,{size:"large",color:"secondary",onClick:y,children:n.jsx(ae,C({},Oe.notNow))}):null,additionalLinks:r,type:c,promoMetadata:i,activeDiscountMetadata:Y,billingDetails:P,className:e})},Oe=we({billingHelp:{id:"AccountPaymentModel.billingHelp",defaultMessage:"I need help with a billing issue"},limitsApply:{id:"xda4i3",defaultMessage:"Limits apply"},notNow:{id:"AccountPaymentModal.notNow",defaultMessage:"Not Now"},highDemandDisabledText:{id:"AccountPaymentModal.highDemandDisabledText",defaultMessage:"Due to high demand, we've temporarily paused upgrades."}}),ke=U.SELF_SERVE_BUSINESS,po=t=>{"use forget";var dt;const e=Ae.c(50),{analyticsParams:o,planLoading:s,billingDetails:a,type:l,shouldUseComparisonSpacing:d,shouldUseOnboardingFeatures:f,className:P,cta:m,currentAccount:i,promoCode:y,promoMetadata:E,onProceed:c,setShouldShowCheckoutLoadingOverlay:S}=t,A=l===void 0?Ne.standard:l;let _;e[0]===Symbol.for("react.memo_cache_sentinel")?(_={key:ke},e[0]=_):_=e[0];const{trackSelectedPixels:g}=Be(_);let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p={key:"team-secondary"},e[1]=p):p=e[1];const{trackSelectedPixels:K}=Be(p),u=Ge(),{data:Q,refetch:D}=rt(kt);let b;e[2]!==a.country||e[3]!==a.currency||e[4]!==u?(b={countryCode:a.country,currency:a.currency,ctx:u},e[2]=a.country,e[3]=a.currency,e[4]=u,e[5]=b):b=e[5];const{data:L,isLoading:v,error:w}=Ft(b),k=Ye(),R=Xt(u),le=Vt(),O=Ss(),[z,j]=q.useState(!1),J=R==null?void 0:R.isSelfServeBusiness(),te=R==null?void 0:R.isPlus(),N=F(C({},o),{planType:ke}),se=!!(Q!=null&&Q.email),W=he(u,"111733276").get("show_upgrade_page_v2_copy",!1),B=he(u,"1656913255").get("outcome_value_props_enabled",!1),V=fs();let r=hs({isBusinessUpgradeV2CopyEnabled:W,shouldUseOnboardingFeatures:f,isTrialEnabled:V.eligible,isOutcomeValuePropsEnabled:B});if(!v&&!w&&L){const fe=ot(L,ve,at.Year);r=F(C({},r),{cost:F(C({},r.cost),{costValue:fe.amount,costTitle:nt(fe.amount,ve,a.currency)})})}const x=As(),me=y?"":x!=null?x:"",pe=!!(!y&&x),{data:ce}=xt(me,pe),ne=ce!=null,h=ce!=null?ce:V.eligible?{coupon:V.campaignId,state:"eligible",redemption:null}:void 0;let $=!1;const X=h&&ws(h==null?void 0:h.coupon)&&(h==null?void 0:h.state)==="eligible";let Y=null;!v&&L&&(Y=_s(L,"business_one_dollar"),$=Y!==void 0&&Y.enabled&&(h==null?void 0:h.coupon)===Rs&&(h==null?void 0:h.state)==="eligible");let ee=E!=null?E:null,I=!1;if(y&&ee&&L&&!v&&!w){const fe=ot(L,ve,at.Month);r=F(C({},r),{cost:F(C({},r.cost),{costValue:fe.amount,costTitle:nt(fe.amount,ve,a.currency)})}),r=Nt({intl:k,pricingPlan:r,promoMetadata:ee,currency:a.currency,planName:U.SELF_SERVE_BUSINESS,currentAccount:i,checkoutPricingConfig:L}),I=!0}else!ee&&($||X)&&(ee={plan_name:"chatgptteamplan",title:"",summary:"",discount:{value:0,currency_code:"USD"},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:k.formatMessage(st.specialOffer)});$&&!I?Y&&Y.enabled&&Y.amount&&Y.cost_message&&(r=F(C({},r),{cost:F(C({},r.cost),{costValue:Y.amount,costTitle:{id:"promo.businessOneDollar.cost",defaultMessage:Y.cost_message,description:"Cost label for business1dollar promo. Shows the amount followed by an asterisk with no currency symbol."},costDuration:bt.promoCostDuration}),disclaimer:bt.team1dollarPromoDisclaimer})):X&&!I&&(r=F(C({},r),{cost:F(C({},r.cost),{costValue:0,costTitle:Xe.promoCost,costDuration:Xe.promoCostDuration}),disclaimer:Xe.teamFreeTrialPromoDisclaimerWithPerSeatMonthlyPrice})),(dt=i==null?void 0:i.isFreeWorkspace)!=null&&dt.call(i)&&(r=F(C({},r),{disclaimer:void 0}));const{selectedPlan:ie,numSeats:Fe}=Fs({promoData:h,promoDataIsFromQueryParam:ne}),{handleBusinessCheckoutRedirect:ue}=xs({billingDetails:a,promoData:h,promoDataIsFromQueryParam:ne}),G=Ps(),[M,H]=q.useState(!1),oe=async fe=>{var mt;if(!se&&!fe){j(!0);return}if(Z.logEvent("Account Pay: Payment Checkout Clicked",N),Ue(u,"chatgpt_account_payment_modal_upgrade_button_click",ke),!I&&!h&&!G&&he(u,"3950229590").get("enabled_custom_checkout_for_team",!1)){const pt=!!S&&he(u,"3542930659").get("show_business_loading",!1);try{H(!0),S&&S(pt),g(),K(),await ue(ie,Fe,!0)}catch(Ut){const jt=Ut;ts.addError("Could not create business checkout session",{error:jt})}H(!1),pt&&(S==null||S(!1));return}const Ot=(mt=new URLSearchParams(window.location.search).get("referrer"))!=null?mt:document.referrer;ss.setPurchaseWorkspaceData({minimumSeats:O,billingDetails:a,promoData:(h==null?void 0:h.state)==="eligible"&&!I?h:void 0,promoDataIsFromQueryParam:(h==null?void 0:h.state)==="eligible"&&!I?ne:void 0,promoMetadata:I?ee:null,promoCode:y!=null?y:void 0,referrer:Ot}),Cs(le),c&&c()};wt(z,{plan:N});const ge=ut,de=ke;let re;e[6]!==P?(re=es(P,"md:max-w-117"),e[6]=P,e[7]=re):re=e[7];const We=ys,Ve=ee,$e=A===Ne.highlight,It="flex flex-col gap-2",qe=J&&A!==Ne.promo&&n.jsx(St,{planType:ke,isCurrentPlan:!0,disabled:s!=null||J,onClick:()=>oe(),testId:"select-plan-button-teams-upgrade",children:k.formatMessage(r.callToAction.active)}),Ke=m!=null?m:n.jsx(St,{className:"w-full",planType:ke,disabled:s!=null,loading:M,activeColor:A===Ne.highlight?"purple":void 0,onClick:()=>oe(),testId:"select-plan-button-teams-create",children:J||te?k.formatMessage(r.callToAction.create):k.formatMessage(r.callToAction.inactive)});let _e;e[8]!==qe||e[9]!==Ke?(_e=n.jsxs("div",{className:It,children:[qe,Ke]}),e[8]=qe,e[9]=Ke,e[10]=_e):_e=e[10];let Pe;e[11]!==ge||e[12]!==a||e[13]!==w||e[14]!==W||e[15]!==v||e[16]!==r||e[17]!==h||e[18]!==d||e[19]!==$||e[20]!==X||e[21]!==$e||e[22]!==_e||e[23]!==de||e[24]!==re||e[25]!==We||e[26]!==Ve||e[27]!==A?(Pe=n.jsx(ge,{planType:de,className:re,elementId:We,pricingPlan:r,promoData:h,promoMetadata:Ve,type:A,shouldUseComparisonSpacing:d,isBusinessUpgradeV2CopyEnabled:W,isCheckoutPricingConfigLoading:v,checkoutPricingConfigError:w,hasEnabledTeam1DollarCoupon:$,hasEnabledTeamFreeTrialCoupon:X,useRecommendedBadge:$e,callToActionButton:_e,billingDetails:a}),e[11]=ge,e[12]=a,e[13]=w,e[14]=W,e[15]=v,e[16]=r,e[17]=h,e[18]=d,e[19]=$,e[20]=X,e[21]=$e,e[22]=_e,e[23]=de,e[24]=re,e[25]=We,e[26]=Ve,e[27]=A,e[28]=Pe):Pe=e[28];let ye;e[29]!==j?(ye=()=>j(!1),e[29]=j,e[30]=ye):ye=e[30];let Se;e[31]!==k?(Se=k.formatMessage(Te.addEmailTitle),e[31]=k,e[32]=Se):Se=e[32];let Ce;e[33]!==k?(Ce=k.formatMessage(Te.addEmailDescription),e[33]=k,e[34]=Ce):Ce=e[34];let be;e[35]!==oe||e[36]!==D||e[37]!==j?(be=async()=>{j(!1),await D(),oe(!0)},e[35]=oe,e[36]=D,e[37]=j,e[38]=be):be=e[38];let Me;e[39]!==Se||e[40]!==Ce||e[41]!==be?(Me=n.jsx(Lt,{enterEmailTitle:Se,enterEmailDescription:Ce,onVerified:be}),e[39]=Se,e[40]=Ce,e[41]=be,e[42]=Me):Me=e[42];let Ee;e[43]!==z||e[44]!==ye||e[45]!==Me?(Ee=n.jsx(ct,{testId:"modal-add-email",isOpen:z,onClose:ye,type:"success",className:"max-w-sm",children:Me}),e[43]=z,e[44]=ye,e[45]=Me,e[46]=Ee):Ee=e[46];let Re;return e[47]!==Pe||e[48]!==Ee?(Re=n.jsxs(n.Fragment,{children:[Pe,Ee]}),e[47]=Pe,e[48]=Ee,e[49]=Re):Re=e[49],Re};export{uo as F,Ys as M,mo as P,po as T,Ns as a,Nt as b,Ks as c,Ws as f,$s as g,Te as m};
//# sourceMappingURL=f6omfo4phchipc3g.js.map
