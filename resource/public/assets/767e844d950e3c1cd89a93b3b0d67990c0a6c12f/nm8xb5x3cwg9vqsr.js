var W=Object.defineProperty;var F=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var G=(s,e,t)=>e in s?W(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,D=(s,e)=>{for(var t in e||(e={}))B.call(e,t)&&G(s,t,e[t]);if(F)for(var t of F(e))K.call(e,t)&&G(s,t,e[t]);return s};import{c as X,h as Z,d as z,j as i,e as U}from"./mw35uwhq4g8r9eam.js";import{eh as V,ei as Y,ej as J,ek as Q,el as ee,X as R,e8 as ae,cX as te,dE as ie,em as se}from"./g2euln7v5pbm31qa.js";import{u as oe,g as re,bC as ne,cw as L,_ as q,h3 as le}from"./d0xa318sl7ywi0za.js";import{LightboxNew as A}from"./ii6qhpkhs6vyylw8.js";import{I as ce}from"./kl0a548ohmz3fby2.js";import{S as ge}from"./ek39x165c6r9yjtf.js";import"./eder15khh2fy5wd2.js";import"./obpubb7ugisfu36u.js";import"./ojmli062couj7r3v.js";import"./lv7ytt0l14b17ows.js";import"./gl4f6lge29au0ljx.js";import"./iio0zgk2sqlxbcjy.js";const de=5,Se=s=>{"use forget";const e=X.c(34),{initialIndex:t,onClose:o,clientThreadId:C,currentModelId:I,includeArchived:O,visibilityFilter:$}=s,r=oe();let _;e[0]!==C||e[1]!==r?(_=re(r,C),e[0]=C,e[1]=r,e[2]=_):_=e[2];const g=_,n=Z(),M=V();let u;e[3]!==r?(u=ne(r).checkGate("1520205231"),e[3]=r,e[4]=u):u=e[4];const S=u,{archiveMutation:y}=Y(),E=z();let p;e[5]!==r?(p=J(r),e[5]=r,e[6]=p):p=e[6];const b=p,{images:d,fetchNextPage:j,hasNextPage:k,isFetchingNextPage:N}=Q(O,$);let x;e[7]!==j||e[8]!==k||e[9]!==d||e[10]!==N?(x=c=>{k&&c>=Math.max(0,d.length-de)&&!N&&j()},e[7]=j,e[8]=k,e[9]=d,e[10]=N,e[11]=x):x=e[11];const P=x;let v;e[12]!==g?(v=c=>ee(D({conversation:g},c)),e[12]=g,e[13]=v):v=e[13];const T=v;let h;e[14]!==y||e[15]!==S||e[16]!==M||e[17]!==n||e[18]!==E||e[19]!==o||e[20]!==b?(h=i.jsx(A.LightboxHeaderActions,{children:c=>{const{activeImage:a}=c;return i.jsxs("div",{className:"flex gap-1 md:gap-2",children:[i.jsx(L,{label:n.formatMessage(l.openInChat),triggerAs:null,children:i.jsx(R,{className:"aspect-square",icon:ae,onClick:w=>{q.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),w.preventDefault(),b.addClassToCurrentTransition(["from-lightbox"]),b.transitionToPage({type:"conversation",value:void 0},async()=>{o(),await E("/c/".concat(a==null?void 0:a.conversationId,"?message=").concat(a==null?void 0:a.messageId),{preventScrollReset:!0})})},"aria-label":n.formatMessage(l.openInChat)})}),S&&a&&i.jsx(L,{label:n.formatMessage(a.archived?l.unarchive:l.archive),triggerAs:null,children:i.jsx(R,{className:"aspect-square",icon:a.archived?te:le,onClick:()=>{q.logEventWithStatsig(a.archived?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked",a.archived?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked"),y.mutate({imageId:a.id,operation:a.archived?"unarchive":"archive"})},"aria-label":n.formatMessage(a.archived?l.unarchive:l.archive)})}),i.jsx(L,{label:n.formatMessage(l.download),triggerAs:null,children:i.jsx(R,{className:"aspect-square",icon:ie,onClick:()=>{var w,H;q.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),se({url:(w=a==null?void 0:a.url)!=null?w:"",fileName:"".concat((H=a==null?void 0:a.title)!=null?H:n.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"}),".png")})},"aria-label":n.formatMessage(l.download)})}),M()&&(a==null?void 0:a.messageId)&&i.jsx(ge,{assetPointer:a.assetPointer,serverThreadId:a.conversationId,messageId:a.messageId})]})}}),e[14]=y,e[15]=S,e[16]=M,e[17]=n,e[18]=E,e[19]=o,e[20]=b,e[21]=h):h=e[21];let m;e[22]!==g.id||e[23]!==I||e[24]!==o||e[25]!==T?(m=i.jsx(A.Footer,{children:c=>{const{activeImage:a}=c;return i.jsx(ce,{clientThreadId:g.id,currentModelId:I,onRequestCompletion:T,onClose:o,activeImage:a})}}),e[22]=g.id,e[23]=I,e[24]=o,e[25]=T,e[26]=m):m=e[26];let f;return e[27]!==P||e[28]!==d||e[29]!==t||e[30]!==o||e[31]!==h||e[32]!==m?(f=i.jsxs(A.Root,{images:d,initialIndex:t,onClose:o,onIndexChange:P,children:[h,m]}),e[27]=P,e[28]=d,e[29]=t,e[30]=o,e[31]=h,e[32]=m,e[33]=f):f=e[33],f},l=U({download:{id:"Z23tMl",defaultMessage:"Download image"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"},archive:{id:"yOqxdz",defaultMessage:"Hide image"},unarchive:{id:"yEUKZl",defaultMessage:"Show image"}});export{Se as ImageGenLibraryLightboxNew};
//# sourceMappingURL=nm8xb5x3cwg9vqsr.js.map
