const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dk0id8phj5n5d7ow.js","assets/mw35uwhq4g8r9eam.js","assets/d0xa318sl7ywi0za.js","assets/root-kavs8piy.css","assets/g2euln7v5pbm31qa.js","assets/conversation-small-lq38g8zw.css","assets/ekvakqg3vqgpm896.js","assets/etscfh2l4cst78jt.js","assets/mwazzgr24ltyaywm.js","assets/ojmli062couj7r3v.js","assets/lv7ytt0l14b17ows.js","assets/bymjh2zr7tar40cn.js","assets/kubdgxu3crk3gqem.js","assets/kne35xckmmfq3xx6.js","assets/c340ncgh31fwqkpk.js","assets/of0vtq1gcmd3mc3z.js","assets/brmb4vbo9w16uqu0.js","assets/s3i8pi4c4hzfqr33.js","assets/jy8ajjjwfhv86rlc.js","assets/d3ia29s4ey7jfka4.js","assets/kwg0j64258q5s4cx.js","assets/khy3klzubvn1317o.js","assets/glvtvsqozo9e3cjo.js","assets/euq7ybw4dhrsufo2.js","assets/c8dilzb1umlthpuq.js","assets/8g8nzp6ulnqgyb36.js","assets/iknugp00locgtve5.js","assets/h1em0bjkpkjv8ykw.js","assets/kbj1b07s2z6vxqkg.js","assets/hu1bt0oauegdhua6.js"])))=>i.map(i=>d[i]);
var fa=Object.defineProperty,xa=Object.defineProperties;var ba=Object.getOwnPropertyDescriptors;var cs=Object.getOwnPropertySymbols;var Sa=Object.prototype.hasOwnProperty,ya=Object.prototype.propertyIsEnumerable;var ds=(t,e,a)=>e in t?fa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,de=(t,e)=>{for(var a in e||(e={}))Sa.call(e,a)&&ds(t,a,e[a]);if(cs)for(var a of cs(e))ya.call(e,a)&&ds(t,a,e[a]);return t},Ne=(t,e)=>xa(t,ba(e));import{c as ue,j as s,k as As,r as C,b as wa,h as ze,v as Ca,e as Ps,M as et,d as qt,_ as lt,a as Ms,L as ks,a1 as Ns,R as Is}from"./mw35uwhq4g8r9eam.js";import{cd as Ct,u as ce,O as We,ca as vt,mh as va,d as L,lM as Es,ak as Ae,cs as us,f2 as xt,eh as Ta,im as _a,il as ja,eg as Aa,e7 as Kt,g4 as Pa,ea as Ma,au as ka,_ as ot,jB as Ft,kC as Os,L as Na,eF as Tt,R as rt,A as Bt,a6 as Ye,J as Ge,dz as Ia,f0 as hs,kS as Ea,lA as ct,g2 as Oa,c1 as Ha,l_ as Hs,w as Rs,eu as Qt,cF as Z,d$ as Ra,d_ as Ls,fz as La,ag as Qe,ah as Xe,cw as Xt,n7 as Wa,wT as Da,wU as Fa,$ as ms,a0 as gs,aC as Ba,U as $a,wV as Ga,V as Fe,bP as Va,ay as za,M as qe,iO as Ua,aa as Ya,hs as Nt,e5 as bt,h5 as qa,g as _t,bj as Ws,sZ as ps,rx as fs,uI as It,kv as Ka,ao as Qa,mK as Xa,wW as Ja,ek as Za,x as it,y as tt,wX as eo,eW as Ds,p as to,al as St,lY as so,B as xs,g3 as ao,cD as Fs,eo as Jt,jZ as oo,b9 as no,r8 as ro,tj as io,wY as lo,n0 as Zt,P as co,br as $t,ef as uo,bq as Bs,k as ho,g6 as mo,be as dt,a4 as go,m8 as po,w2 as fo,wZ as xo,cg as $s,gR as jt,gW as bo,uT as So,uU as yo,b$ as wo,h as Co,eD as vo,bn as Gs,eX as Vs,cA as To,lp as _o,gU as jo,gk as Ao,aJ as At,H as Po,eS as Mo,ty as ko,jb as No,px as Io,r as Gt,Y as zs,dt as Eo,l$ as Oo,aF as Ho,pH as Ro,cz as Lo,gB as Wo,cu as Do,D as bs,w_ as Fo,bo as Bo,jF as $o,m as Go,b6 as Vo,eM as zo,kU as Uo,bX as Yo,bm as qo,cj as Ko,ch as Qo,f5 as Xo,dy as Jo,fh as Zo,kM as en,ke as tn,eA as sn,oU as an,w$ as on,gi as Vt,n6 as nn,sp as rn,x0 as ln,e4 as cn,aB as dn,x1 as un,nE as hn,nD as mn}from"./d0xa318sl7ywi0za.js";import{sn as es,si as gn,vL as pn,vM as fn,nZ as Ce,uP as ft,vN as xn,vO as bn,vP as J,vQ as Sn,vR as yn,sk as wn,vS as zt,vT as Ss,bO as Cn,ng as vn,vU as Tn,vV as _n,vW as jn,tq as Us,c7 as An,vX as Pn,vY as Mn,ox as kn,vZ as Nn,hP as In,al as Ve,v_ as En,ow as On,oH as Hn,mI as ut,il as Ze,me as Rn,v$ as Ln,w0 as Pt,bY as Wn,w1 as yt,w2 as Dn,w3 as Fn,mx as Bn,hT as Ys,w4 as $n,um as ts,w5 as Gn,dp as nt,hQ as Vn,bs as ys,w6 as zn,aV as Un,nJ as Yn,tX as ss,u8 as wt,w7 as qn,w8 as Kn,ak as Ut,im as qs,w9 as Qn,aU as Xn,ne as Jn,ed as Zn,br as er,sp as Ks,wa as tr,wb as sr,wc as ar,wd as or,uF as nr,we as Qs,wf as rr,wg as ir,wh as lr,sf as cr,wi as dr,wj as ur,wk as hr,wl as mr,wm as gr,lp as pr,aM as fr,wn as xr,gS as br,u as Sr,nD as Xs,wo as yr,oC as wr,mA as Cr,hW as vr,mD as Et,wp as Tr,mC as ws,gO as _r,q2 as jr,q3 as Ar,$ as Pr,a4 as Mr,wq as kr,ae as Nr,af as Ir,js as Er,wr as Or,gv as Hr,ga as Cs,ws as Rr,m4 as Lr,e1 as Wr,wt as vs,wu as Dr,hl as Fr,el as Br,ej as $r,wv as Gr,ww as Vr,wx as zr,wy as Ur,wz as Yr,wA as qr,wB as Kr,gw as Qr,ij as Xr,wC as Jr,wD as Zr,wE as ei,wF as ti,wG as si,wH as ai,os as oi,nG as ni,wI as ri,wJ as ii,bb as li,aY as ci,wK as di,wL as ui,wM as hi,wN as mi,wO as gi,n9 as pi,wP as fi,wQ as xi,wR as bi,wS as Si,wT as yi,wU as wi,wV as Ci,wW as vi,wX as Ti,wY as _i,wZ as ji,w_ as Ai,w$ as Pi,x0 as Mi,x1 as ki,x2 as Ni,x3 as Ii,x4 as Ei,x5 as Oi,dr as Js,hJ as Hi,x6 as Zs,dq as Ri,hI as Li,ik as Wi,x7 as Je,x8 as Di,x9 as Fi,ds as Bi,aJ as $i}from"./g2euln7v5pbm31qa.js";import{F as Gi}from"./gl4f6lge29au0ljx.js";import{u as Vi,p as zi,M as Ui,S as ea,P as Yi,a as qi,b as Ki,c as Qi,d as Xi,D as Ji,T as Zi}from"./obpubb7ugisfu36u.js";import{P as el}from"./c340ncgh31fwqkpk.js";import tl from"./ggvjblnzoirafiyl.js";import{b as sl,S as al,T as ol}from"./5uqv5sdajcdsdc3v.js";import{S as nl}from"./fe4yarxdk4eko5w6.js";import{C as rl}from"./kubdgxu3crk3gqem.js";function ta(){"use forget";const t=ue.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx(nl,{onClick:il,className:"hover:bg-token-bg-tertiary text-token-text-secondary inline-flex h-9 w-9 items-center justify-center rounded-lg active:opacity-100",iconClassName:"icon text-token-text-secondary ms-0 me-0",focusClassNameOverride:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-token-ring focus-visible:ring-offset-2"}),t[0]=e):e=t[0],e}function il(){return Ct.setSidebarOpen(!0)}const ll=7,cl=5,dl=3600*1e3,ul=async({text:t,numCompletions:e,isUnauthenticated:a,isThreadUsingSearchMode:i=!1,autocompleteMode:d,activeSystemHintType:c})=>{try{return(a?await rt.safePost("/conversation/experimental/generate_autocompletions_anon",{requestBody:{input_text:t,num_completions:e,in_search_mode:i,system_hint:c!=null?c:void 0},authOption:Bt.Anonymous}):await rt.safePost("/conversation/experimental/generate_autocompletions",{requestBody:{input_text:t,num_completions:e,in_search_mode:i,system_hint:c!=null?c:void 0}})).completions.map(o=>({id:Ca(),type:Ce.Autocomplete,title:o.slice(0,t.length),body:o.slice(t.length),oneliner:o,prompt:o,source:d}))}catch(m){return[]}},Yt=(t,e=!1)=>Ae(t,We(t)?"4093727931":"312855442",{disableExposureLog:!e}),hl=({clientThreadId:t,composerController:e,isGizmoThread:a,isNewThread:i,isProjectThread:d})=>{const[c,m]=As(),o=c.get("forceShowNuxCASuggestion")==="true",h=ce(),n=!We(h),u=vt(),{autocompletions$:r,personalizedAutocompletePool$:S,personalizedPromptOffset$:b}=es(e),l=gn(),p=3,f=u===Ye.Search,{bingTrendingSuggestions:x,chatgptTrendingSuggestions:g,imageGenTrendingSuggestions:v,fetchBingTrendingSuggestions:y,fetchChatgptTrendingSuggestions:A}=gl(),k=C.useRef({bing:0,chatgpt:{time:0,imageGen:!1}}),j=C.useRef(!1),[P,_]=C.useState(!1),M=va(E=>E.files),w=M.length>0,T=C.useMemo(()=>M.some(E=>{var B,R,we,je;return((je=(we=(B=E.fileSpec)==null?void 0:B.mimeType)!=null?we:(R=E.file)==null?void 0:R.type)!=null?je:"").toLowerCase().startsWith("image/")}),[M]),I=pn(),D=L(()=>Es(e)),O=i&&!a&&!d&&I()&&Ae(h,"4031588851",{disableExposureLog:!0}).get("personalized_prompts_enabled",!1),{data:F}=wa(Ne(de({},fn(zt*3,null)),{enabled:O})),$=C.useMemo(()=>{var B;return((B=F==null?void 0:F.items)!=null?B:[]).filter(R=>R.category==="personalized").map(R=>({type:Ce.Starter,id:R.id,title:R.title,body:R.description,prompt:R.prompt,oneliner:R.oneliner,category:R.category,theme:R.theme,emoji:R.emoji}))},[F]);C.useEffect(()=>{S.set($),b.set(0)},[$,S,b]),C.useEffect(()=>us(xt(e).dom,{click:()=>_(!0)}),[e]);const N=C.useCallback(E=>{const V=ft(e);return V&&Ot(E).startsWith(V.toLocaleLowerCase())},[e]),Y=C.useCallback(E=>{const V=ft(e),B=E.title+E.body;return N(E)?Ne(de({},E),{title:V,body:B.slice(V.length)}):Ne(de({},E),{title:B,body:""})},[e,N]),X=C.useCallback((E=!1)=>{r.set(V=>!V.some(N)&&V.length>0?[]:E?V:V.map(Y))},[N,Y,r]),H=ze(),fe=xn(),{data:te}=bn(4,fe),ye=C.useMemo(()=>({[J.Canvas]:[{type:Ce.Starter,title:H.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:H.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:J.Canvas},{type:Ce.Starter,title:H.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:H.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:J.Canvas},{type:Ce.Starter,title:H.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:H.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:J.Canvas},{type:Ce.Starter,title:H.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:H.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:J.Canvas}],[J.Image]:[{type:Ce.Starter,title:H.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:H.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:J.Image},{type:Ce.Starter,title:H.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:H.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:J.Image},{type:Ce.Starter,title:H.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:H.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:J.Image},{type:Ce.Starter,title:H.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:H.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:J.Image}],[J.ContextualAnswers]:[{type:Ce.Starter,title:H.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:H.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:s.jsx(Ta,{className:"h-full w-full"}),body:"",theme:J.ContextualAnswers},{type:Ce.Starter,title:H.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:H.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:s.jsx(_a,{className:"h-full w-full"}),body:"",theme:J.ContextualAnswers},{type:Ce.Starter,title:H.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:H.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:s.jsx(ja,{className:"h-full w-full"}),body:"",theme:J.ContextualAnswers},{type:Ce.Starter,title:H.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:H.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:s.jsx(Aa,{className:"h-full w-full"}),body:"",theme:J.ContextualAnswers}]}),[H]),Q=Kt(),xe=Pa().connectorLinks.size>0,ne=L(()=>Ma(h)),he=!ne,{prompts:se,isLoading:re}=Sn(),ee=ne&&ne.length>0&&!xe,ie=We(h),ae=ee?Ae(h,"1704943789").get("onboarding_state","control")==="suggested_prompts":!1,G=C.useMemo(()=>new yn({localStorageKey:ka.CARecommendedPromptsUpsell,schedule:{intervalMs:1440*60*1e3,maxShowsPerInterval:3},termination:{maxShows:9}}),[]);C.useEffect(()=>{if((!ee||!ae||u!=null||!G.shouldShow())&&!o||he||re||Q==null)return;const E=[...se];r.set(V=>V.length>0?V:(j.current||(G.recordShown(),ot.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_shown","chatgpt_contextual_answers_recommended_prompt_shown",{prompts:E.map(B=>{var R;return(R=B.data)==null?void 0:R.id}).join(","),shown_times:G.getShownTimes().toString()}),j.current=!0),E))},[se,he,re,ee,ae,u,G,o,Q,r]);const q=Yt(h,!1),z=Yt(h,!0),le=wn(h,!0),be=Vi();C.useEffect(()=>Ft(()=>hs(e),E=>{const V=()=>{r.set(B=>B.filter(R=>R.theme!==J.Search&&R.theme!==J.ChatGPTTrending&&R.theme!==J.ImageGenTrending&&R.theme!==J.Image&&R.theme!==J.Slurm&&R.theme!==J.Tatertot&&R.theme!==J.ContextualAnswersNUX&&R.theme!==J.Glaux))};if(E&&i&&!a&&!d||o)if(f)r.set(x.length>0?x:[]),k.current.bing===0&&(k.current.bing=Date.now(),y());else if(!u&&(D||P)&&I()&&le.get("homepage_prompt_style","chips")==="autocomplete"){if(le.get("personalized_prompts_enabled",!1)&&$.length>0){const B=$.slice(0,zt).map(R=>Tn(R,e,h,l)).filter(Boolean);r.set(B)}else if(P&&!O){const B=zi(be,r(),4,3);r.set(B.map(R=>Ne(de({},R),{body:""})))}}else if(!u&&q.get("enable_data",!1)){r.set(()=>P&&T&&v.length>0&&z.get("enable_image_gen_trending",!1)?v:P&&!T&&g.length>0&&z.get("enable_chatgpt_trending",!1)?g:[]);const B=Date.now(),R=k.current.chatgpt;(R.time===0||B-R.time>dl||R.imageGen!==T)&&(k.current.chatgpt={time:B,imageGen:T},A(T))}else if(fe&&te&&te.length>0)r.set(te);else if(u===Ye.PictureV2){const B=_n(H);r.set(B)}else if(u===Ye.Tatertot)r.set(jn(H,ie));else if(u===Ye.Slurm)Ae(h,"1704943789").get("post_connection_connector_button",!1)&&se.length>0&&!re&&r.set(se);else{if(r().length>0&&r()[0].theme===J.ContextualAnswersNUX)return;if(r().length===0)return;V()}else V()},{fireImmediately:!0}),[e,y,A,q,z,f,r,x,g,v,u,P,H,t,i,a,d,ye,c,m,o,w,T,ie,be,$,le,se,re,h,I,D,Q,O,te,fe,l]),C.useEffect(()=>Os(()=>{if(hs(e)){const E=r().filter(V=>V.type!==Ce.Autocomplete);E.length>0&&vn(E,t)}}),[e,r,t]);const ve=fl(f),me=Ae(h,"4031588851"),Se=me.get("autocomplete_min_char",4),Ie=me.get("autocomplete_fetch_interval",200),Me=C.useRef(null),ge=C.useCallback(Na(async E=>{if(!ml(e,Se)){r.set([]);return}const V=ft(e);if(!(Me.current&&Me.current.length>Se&&V.startsWith(Me.current)))try{const B=(await ul({text:V,numCompletions:E,isUnauthenticated:n,isThreadUsingSearchMode:f,autocompleteMode:ve,activeSystemHintType:u})).filter(N).map(Y);r.set(R=>{const we=R.filter(N),je=B.filter(Oe=>{const Pe=Ot(Oe);return!we.some(He=>{const _e=Ot(He);if(Pe===_e)return!0;const Re=new RegExp("[\\p{P}\\p{S}]$","u"),Le=Pe.replace(Re,""),ke=_e.replace(Re,"");return Le===_e||Pe===ke||Le===ke})}).slice(0,p-we.length);return[...we,...je]})}catch(B){}},ve==="BING"?150:Ie),[e,ve,Y,Ie,u]),Te=C.useCallback(()=>{X();const E=p-r().filter(N).length;E>0&&ge(E)},[ge,X,r,N]),Ee=C.useMemo(()=>ve==="HARDCODED"?X:Te,[ve,Te,X]),oe=C.useCallback(()=>{Ee()},[Ee]),pe=C.useCallback(()=>{X(!0),ft(e).indexOf("\n")>0&&r.set([])},[e,r,X]);C.useEffect(()=>us(xt(e).dom,{input:oe}),[e,oe]),C.useEffect(()=>Ft(()=>Ea(e),pe),[e,pe])};function ml(t,e){var i;const a=xt(t).state.doc;return a.childCount===1&&((i=a.firstChild)==null?void 0:i.isTextblock)===!0&&a.content.size>=e&&a.content.size<=80}const gl=()=>{const[t,e]=C.useState([]),[a,i]=C.useState([]),[d,c]=C.useState([]),m=Tt(),o=ce(),h=Yt(o,!1),n=h.get("num_mobile_results",cl),u=h.get("num_desktop_results",ll),r=h.get("item_label","PROMPT"),S=C.useCallback(async()=>{const p=(await rt.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:zt},authOption:Bt.SendIfAvailable})).suggestions.map((f,x)=>({type:Ce.Trending,title:Ts(f),body:"",icon:s.jsx(Ss,{className:"h-full w-full"}),prompt:Ts(f),id:"search-trending-".concat(x),theme:J.Search}));return e(p),p},[]),b=C.useCallback(async l=>{const f=((await rt.safeGet("/trending/chatgpt",{parameters:{query:de({num_items:m?u:n},l?{tags:["image_gen"]}:{})},authOption:Bt.SendIfAvailable})).topics||[]).map((x,g)=>{var P,_,M,w,T;const v=(P=x.suggested_prompts)!=null?P:[],y=v.length>0?v[Math.floor(Math.random()*v.length)]:void 0,A=(_=y==null?void 0:y.short_prompt)!=null?_:"",k=(w=(M=x.short_title)!=null?M:x.title)!=null?w:"",j=(T=y==null?void 0:y.prompt)!=null?T:Array.isArray(x.prompts)&&x.prompts.length>0?x.prompts[Math.floor(Math.random()*x.prompts.length)]:k;return{type:Ce.Trending,title:r==="TITLE"?k:A,body:"",icon:s.jsx(Ss,{className:"h-full w-full"}),prompt:j,id:"chatgpt-trending-".concat(g),theme:l?J.ImageGenTrending:J.ChatGPTTrending}});return l?c(f):i(f),f},[m,n,u,r]);return{bingTrendingSuggestions:t,chatgptTrendingSuggestions:a,imageGenTrendingSuggestions:d,fetchBingTrendingSuggestions:S,fetchChatgptTrendingSuggestions:b}};function Ts(t){return t.split(" ").map(Cn).join(" ")}const Ot=t=>"".concat(t.title).concat(t.body).toLocaleLowerCase();function pl(){const t=ce(),a=Ae(t,"4031588851",{disableExposureLog:!0}).get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),i=Ia();return!!i&&i.created*1e3>=new Date(a).getTime()}function fl(t){const e=ce(),a=!We(e),i=Ge(e,"1468311859"),d=Ge(e,"2053937752"),c=Ge(e,"3664702598"),m=Ge(e,"471233253"),o=Ae(e,"4031588851"),h=Ae(e,"3533083032"),n=pl(),u=!a&&i||a&&d,r=(!a&&c||a&&m)&&n;let S="HARDCODED";{const b=a?h:o;if(t){const l=b.get("search_autocomplete_mode","");u&&l&&(S=l)}else r&&(S=b.get("autocomplete_mode","HARDCODED"))}return S}const xl=({clientThreadId:t,isGizmoThread:e,isNewThread:a,isProjectThread:i})=>{const d=ct();return hl({clientThreadId:t,composerController:d,isGizmoThread:e,isNewThread:a,isProjectThread:i}),null};function bl(t){"use forget";const e=ue.c(20),{clientThreadId:a,headlineOption:i,starterPromptStyle:d,currentModelId:c,overrideMessage:m}=t,o=kn(),h=ct();let n;e[0]!==h?(n=es(h),e[0]=h,e[1]=n):n=e[1];const u=L(n.shouldShowAutocomplete$);let r;e[2]!==a?(r={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[2]=a,e[3]=r):r=e[3];const S=Nn(r),b=o?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",l=u?"pointer-events-none opacity-0":"opacity-100";let p;e[4]!==b||e[5]!==l?(p=Z("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] w-full shrink flex-col items-center justify-center px-4 transition-opacity sm:hidden",b,l),e[4]=b,e[5]=l,e[6]=p):p=e[6];let f;e[7]!==i||e[8]!==m||e[9]!==d?(f=i==="CHATGPT_LOGO"?s.jsx(Hs,{className:"inline-block h-12 w-12"}):d!=="tiles"?s.jsx(sa,{headlineOption:i,overrideMessage:m}):null,e[7]=i,e[8]=m,e[9]=d,e[10]=f):f=e[10];let x;e[11]!==a||e[12]!==c||e[13]!==S||e[14]!==d?(x=d==="chips"||!S?c&&s.jsx(Ui,{currentModelId:c,clientThreadId:a}):d==="tiles"&&c&&a?s.jsx(ea,{}):null,e[11]=a,e[12]=c,e[13]=S,e[14]=d,e[15]=x):x=e[15];let g;return e[16]!==p||e[17]!==f||e[18]!==x?(g=s.jsxs("div",{className:p,children:[f,x]}),e[16]=p,e[17]=f,e[18]=x,e[19]=g):g=e[19],g}function Sl({activeSystemHintType:t,isAnonModeEnabled:e,currentModelId:a}){if(t===Ye.Research)return U.deepResearchPlaceholder;const d=Oa(t);if(a==="n7jupd"||d)return U.whatCanIDo}function yl(t){"use forget";const e=ue.c(25),{clientThreadId:a,currentModelId:i}=t,d=ce();let c;e[0]!==d?(c=We(d),e[0]=d,e[1]=c):c=e[1];const m=!c;let o;e[2]!==d?(o=()=>Ha(d),e[2]=d,e[3]=o):o=e[3];const h=L(o);let n;if(e[4]!==d||e[5]!==m){const y=Ae(d,"4031588851"),A=Ae(d,"3533083032",{disableExposureLog:!0});n=(m?A:y).get("headline_option","HELP_WITH"),e[4]=d,e[5]=m,e[6]=n}else n=e[6];const u=n;let r;e[7]!==a?(r={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[7]=a,e[8]=r):r=e[8];const S=Us(r),b=vt();let l;e[9]!==b||e[10]!==i||e[11]!==h?(l=Sl({activeSystemHintType:b,isAnonModeEnabled:h,currentModelId:i}),e[9]=b,e[10]=i,e[11]=h,e[12]=l):l=e[12];const p=l;let f;e[13]!==u||e[14]!==p?(f=s.jsx("div",{className:"mb-7 hidden text-center sm:block",children:u==="CHATGPT_LOGO"?s.jsx(Hs,{className:"inline-block h-12 w-12"}):s.jsx(sa,{headlineOption:u,overrideMessage:p})}),e[13]=u,e[14]=p,e[15]=f):f=e[15];const x=S;let g;e[16]!==a||e[17]!==i||e[18]!==u||e[19]!==p||e[20]!==x?(g=s.jsx(bl,{headlineOption:u,starterPromptStyle:x,clientThreadId:a,currentModelId:i,overrideMessage:p}),e[16]=a,e[17]=i,e[18]=u,e[19]=p,e[20]=x,e[21]=g):g=e[21];let v;return e[22]!==f||e[23]!==g?(v=s.jsxs("div",{className:"flex justify-center",children:[f,g]}),e[22]=f,e[23]=g,e[24]=v):v=e[24],v}function wl(t){"use forget";var P,_;const e=ue.c(15),{headlineOption:a,overrideMessage:i}=t,d=function(w){const{name:T}=w;return s.jsx(Xt,{label:h.formatMessage(U.editNicknameTooltip),delayDuration:300,side:"top",children:s.jsx("button",{onClick:()=>{Ct.setAutoHighlightNicknameInput(!0),x("#settings/".concat(Ls.Personalization))},style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:vl,onMouseLeave:Cl,children:T})})};let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=function(){const w=[],T=[];w.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),T.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...w);const I=T[Math.floor(Math.random()*T.length)],D=w[Math.floor(Math.random()*w.length)],O="".concat(D," | ").concat(I);Qe.setCookie(Xe.headlineMessage,O)},e[0]=c):c=e[0];const m=c,o=function(){var F,$;const w=Qe.getCookie(Xe.GreetingName),T=Qe.getCookie(Xe.headlineMessage),I=T==null?void 0:T.split("|"),D=(F=I==null?void 0:I[0])==null?void 0:F.trim(),O=($=I==null?void 0:I[1])==null?void 0:$.trim();return{cookieName:w,isReadyForPersonalized:!!w&&w.length<=r,headline:D,namedHeadline:O}},h=ze(),n=ce(),u=Ae(n,"1704793646"),r=u.get("name_char_limit",20),[S,b]=C.useState(o),l=In(),p=u.get("greeting_web",!1),f=u.get("full_name_llm",!1),x=qt();let g,v;e[1]!==n||e[2]!==f||e[3]!==l||e[4]!==p?(g=()=>Os(()=>{if(p&&l){const M=Wa(n).data,w=Da(n).data;if(M&&w){const T=Fa(w,M,f);Qe.setCookie(Xe.GreetingName,T),ms.count(gs.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}m()}else Qe.deleteCookie(Xe.GreetingName),Qe.deleteCookie(Xe.headlineMessage)}),v=[n,p,f,l],e[1]=n,e[2]=f,e[3]=l,e[4]=p,e[5]=g,e[6]=v):(g=e[5],v=e[6]),C.useEffect(g,v);let y;e[7]!==o||e[8]!==l||e[9]!==p?(y=()=>{const M=()=>{if(p&&l){const{cookieName:w,isReadyForPersonalized:T}=o();b(I=>Ne(de({},I),{cookieName:w,isReadyForPersonalized:T}))}};return window.addEventListener("refreshGreeting",M),()=>window.removeEventListener("refreshGreeting",M)},e[7]=o,e[8]=l,e[9]=p,e[10]=y):y=e[10],C.useEffect(y);let A,k;e[11]!==l||e[12]!==p?(A=()=>{p&&l&&ms.count(gs.MOONSHINE,"splashScreenV2.greeting_shown_web")},k=[p,l],e[11]=l,e[12]=p,e[13]=A,e[14]=k):(A=e[13],k=e[14]),C.useEffect(A,k);let j;return i?j=h.formatMessage(i):S.isReadyForPersonalized&&p?j=s.jsx(s.Fragment,{children:s.jsx(et,Ne(de({},Ht[(P=S.namedHeadline)!=null?P:a].withName),{values:{name:s.jsx(d,{name:(_=S.cookieName)!=null?_:""},"name")}}))}):p&&S.headline?j=h.formatMessage(Ht[S.headline].original):j=h.formatMessage(Ht[a].original),j}function Cl(t){t.currentTarget.className="text-inherit"}function vl(t){t.currentTarget.className="text-token-text-secondary"}function sa(t){"use forget";var _;const e=ue.c(27),{headlineOption:a,overrideMessage:i}=t,d=ce(),c=Rs();let m;e[0]!==c?(m={isTempChatVisible:c},e[0]=c,e[1]=m):m=e[1];const[o,h]=C.useState(m);let n,u;e[2]!==c?(n=()=>{h({isTempChatVisible:c})},u=[c],e[2]=c,e[3]=n,e[4]=u):(n=e[3],u=e[4]),Qt(n,u);let r;e[5]!==d?(r=()=>La(d),e[5]=d,e[6]=r):r=e[6];const S=L(r),{openSettings:b}=An(),l=vt(),p=((_=Kt())==null?void 0:_.isHipaaCompliantWorkspace)&&l===Ye.Agent;let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f={viewTransitionName:"var(--vt-splash-screen-headline)"},e[7]=f):f=e[7];let x;e[8]!==a||e[9]!==S||e[10]!==c||e[11]!==b||e[12]!==i||e[13]!==o.isTempChatVisible?(x=S?s.jsxs("div",{className:Z("text-page-header flex flex-col items-center gap-2",o.isTempChatVisible&&"invisible"),children:[s.jsx("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]",children:s.jsx(et,de({},U.developerModeTitle))}),s.jsx("p",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-md text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:s.jsx(et,Ne(de({},U.developerModeSubtitle),{values:{settings:s.jsx(Ra,{onClick:()=>b(Ls.ConnectorsAdvanced),children:s.jsx(et,de({},U.settingsLink))})}}))})]}):s.jsx("h1",{className:Z("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap",o.isTempChatVisible&&"invisible"),"aria-hidden":c,children:s.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:s.jsx(wl,{headlineOption:a,overrideMessage:i})})}),e[8]=a,e[9]=S,e[10]=c,e[11]=b,e[12]=i,e[13]=o.isTempChatVisible,e[14]=x):x=e[14];let g;e[15]!==p?(g=p?s.jsx(Pn,{className:"mt-4 max-w-3xl",message:s.jsx(et,de({},U.hipaaAgentWarning))}):null,e[15]=p,e[16]=g):g=e[16];const v=!o.isTempChatVisible&&"hidden";let y;e[17]!==v?(y=Z("bottom-0",v),e[17]=v,e[18]=y):y=e[18];const A=!c;let k;e[19]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(Mn,{}),e[19]=k):k=e[19];let j;e[20]!==A||e[21]!==y?(j=s.jsx("div",{className:y,"aria-hidden":A,children:k}),e[20]=A,e[21]=y,e[22]=j):j=e[22];let P;return e[23]!==j||e[24]!==x||e[25]!==g?(P=s.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:s.jsx("div",{children:s.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:f,children:[x,g,j]})})}),e[23]=j,e[24]=x,e[25]=g,e[26]=P):P=e[26],P}const U=Ps({developerModeTitle:{id:"SplashScreenV2.developerModeTitle",defaultMessage:"Developer mode"},developerModeSubtitle:{id:"SplashScreenV2.developerModeSubtitle",defaultMessage:"Memory is not used for this chat. {settings}"},settingsLink:{id:"SplashScreenV2.settingsLink",defaultMessage:"Settings"},hipaaAgentWarning:{id:"SplashScreenV2.hipaaAgentWarning",defaultMessage:"Do not enter Protected Health Information (PHI) into Agent."},whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What’s on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What’s on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"},chatgpt:{id:"SplashScreenV2.chatgpt",defaultMessage:"ChatGPT"},whatCanIDo:{id:"SplashScreenV2.whatCanIDo",defaultMessage:"What can I do for you?"}}),Ht={HELP_WITH:{original:U.whatCanIHelpWith,withName:U.whatCanIHelpWithWithName},WHERE_TO_START:{original:U.whereShouldWeStart,withName:U.whereShouldWeStartWithName},ASK_CHATGPT:{original:U.askChatgptAnything,withName:U.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:U.howCanIHelp,withName:U.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:U.goodToSeeYouWithName,withName:U.goodToSeeYouWithName},DIVE_IN:{original:U.diveInWithName,withName:U.diveInWithName},READY_WHEN_YOU_ARE:{original:U.readyWhenYouAre,withName:U.readyWhenYouAre},ON_YOUR_MIND:{original:U.onYourMind,withName:U.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:U.whatAreYouWorkingOn,withName:U.whatAreYouWorkingOn},AGENDA_TODAY:{original:U.agendaToday,withName:U.agendaToday},SHOULD_WE_BEGIN:{original:U.shouldWeBegin,withName:U.shouldWeBegin},WHAT_CAN_I_DO:{original:U.whatCanIDo,withName:U.whatCanIDo}},aa=t=>{var e,a;return(a=(e=Fe.getBranch(t))==null?void 0:e.findLast(({message:i})=>i.author.role===za.Assistant&&i.recipient==="all"))==null?void 0:a.message},Rt=Ba(t=>{const e=$a(()=>Ga(t)),a=e?aa(e):null;return Va(new Set(a?[a.id]:[]))}),Tl=t=>{"use forget";const e=ue.c(37),{conversation:a,zIndex:i,onClick:d,onReveal:c}=t,m=ze();let o;e[0]!==a?(o=()=>Rt(a),e[0]=a,e[1]=o):o=e[1];const h=L(o),[n,u]=qe(a.id,_l),r=Ua(u);let S;e[2]!==n?(S=n&&!!Ya(n),e[2]=n,e[3]=S):S=e[3];const b=S,l=n==null?void 0:n.id;let p;e[4]!==h||e[5]!==l?(p=l&&h.has(l),e[4]=h,e[5]=l,e[6]=p):p=e[6];const f=p;let x;e[7]!==a||e[8]!==l?(x=()=>{l&&Rt.set(a,new Set(Rt(a).add(l)))},e[7]=a,e[8]=l,e[9]=x):x=e[9];const g=Nt(x);let v;e[10]!==d||e[11]!==g?(v=()=>{g(),d()},e[10]=d,e[11]=g,e[12]=v):v=e[12];const y=Nt(v),A=Nt(c);let k,j;e[13]!==f||e[14]!==b||e[15]!==A?(k=()=>{b&&!f&&A()},j=[b,f,A],e[13]=f,e[14]=b,e[15]=A,e[16]=k,e[17]=j):(k=e[16],j=e[17]),C.useEffect(k,j);let P,_;e[18]!==f||e[19]!==r||e[20]!==b||e[21]!==g?(P=()=>{if(b&&!f&&!r){const I=setTimeout(()=>g(),5e3);return()=>{clearTimeout(I),g()}}},_=[b,f,r,g],e[18]=f,e[19]=r,e[20]=b,e[21]=g,e[22]=P,e[23]=_):(P=e[22],_=e[23]),C.useEffect(P,_);let M,w;e[24]!==g?(M=()=>()=>g(),w=[g],e[24]=g,e[25]=M,e[26]=w):(M=e[25],w=e[26]),C.useEffect(M,w);let T;return e[27]!==a||e[28]!==y||e[29]!==f||e[30]!==m||e[31]!==r||e[32]!==b||e[33]!==n||e[34]!==g||e[35]!==i?(T=b&&!f&&s.jsx(Ve,{className:"relative",style:{zIndex:i},children:s.jsxs(bt.div,{className:Z(En.main,"group bg-token-bg-primary/80 shadow-long pointer-events-auto absolute -top-2 mx-0 mb-4 h-32 w-full cursor-pointer overflow-hidden rounded-3xl px-5 py-3 backdrop-blur-2xl select-none"),initial:{opacity:0,translateY:"-50%"},animate:{opacity:1,translateY:"-100%"},exit:{opacity:0,scale:.925,filter:"blur(12px)"},transition:{duration:.6,type:"spring",bounce:.12},onClick:y,children:[s.jsx("button",{"aria-label":m.formatMessage({id:"rbCAqY",defaultMessage:"Dismiss"}),className:"dark:bg-token-bg-secondary dark:hover:bg-token-bg-tertiary text-token-text-primary absolute end-2.5 top-2.5 z-50 flex h-6 w-6 items-center justify-center rounded-full bg-black/5 opacity-0 transition-opacity group-hover:opacity-100 hover:bg-black/10",onClick:I=>{I.stopPropagation(),g()},type:"button",children:s.jsx(qa,{className:"icon icon-sm"})}),n&&s.jsx(tl,{messages:[n],conversation:a,isFeedbackEnabled:!1,isCompletionInProgress:r,hasActiveRequest:r})]})}),e[27]=a,e[28]=y,e[29]=f,e[30]=m,e[31]=r,e[32]=b,e[33]=n,e[34]=g,e[35]=i,e[36]=T):T=e[36],T};function _l(t){return[aa(t),Fe.getRequestId(t)]}const jl=t=>{"use forget";const e=ue.c(20),{clientThreadId:a,onRequestCompletion:i}=t,d=ce();let c;e[0]!==a||e[1]!==d?(c=_t(d,a),e[0]=a,e[1]=d,e[2]=c):c=e[2];const m=c,o=On(a),h=Hn(a);let n;e[3]!==m?(n=()=>Ws(m),e[3]=m,e[4]=n):n=e[4];const u=L(n),[r]=qe(a,Al);let S;if(e[5]!==m||e[6]!==r||e[7]!==(u==null?void 0:u.id)||e[8]!==h||e[9]!==i){let l;e[11]!==m||e[12]!==r.length||e[13]!==(u==null?void 0:u.id)||e[14]!==h||e[15]!==i?(l=(p,f)=>{var x;return s.jsx(sl,{isFinalTurn:f===r.length-1,turnIndex:f,conversation:m,onRequestCompletion:i,currentModelId:(x=u==null?void 0:u.id)!=null?x:null,scrollToMessageId:void 0,dateHeaderType:h(f),hideUserActions:!0,disableHorizontalPadding:!0},p)},e[11]=m,e[12]=r.length,e[13]=u==null?void 0:u.id,e[14]=h,e[15]=i,e[16]=l):l=e[16],S=r.map(l),e[5]=m,e[6]=r,e[7]=u==null?void 0:u.id,e[8]=h,e[9]=i,e[10]=S}else S=e[10];let b;return e[17]!==o||e[18]!==S?(b=s.jsx("div",{onCopy:o,className:"flex flex-col px-7 text-sm",children:S}),e[17]=o,e[18]=S,e[19]=b):b=e[19],b};function Al(t){return[Fe.getConversationTurnIds(t)]}const Lt={duration:.4,type:"spring",bounce:.1},Pl=50,_s=.5,Wt=Pt["fullscreen-widget-composer-transition"],Ml=Pt["fullscreen-popover-thread-opening-transition"],js=Pt["fullscreen-popover-thread-closing-transition"],kl=t=>{"use forget";const e=ue.c(74),{clientThreadId:a,onRequestCompletion:i,composerController:d}=t,c=ce();let m;e[0]!==a||e[1]!==c?(m=_t(c,a),e[0]=a,e[1]=c,e[2]=m):m=e[2];const o=m,h=C.useRef(null),[n,u]=C.useState(!1),[r,S]=C.useState(!1);let b;e[3]!==c?(b=()=>Wn(c).height,e[3]=c,e[4]=b):b=e[4];const l=L(b);let p;e[5]!==o?(p=()=>yt(o).height$(),e[5]=o,e[6]=p):p=e[6];const f=L(p);let x;e[7]!==o?(x=()=>yt(o).marginBottom$(),e[7]=o,e[8]=x):x=e[8];const g=L(x);let v;e[9]!==o?(v=ut(o),e[9]=o,e[10]=v):v=e[10];const y=v;let A;e[11]!==y?(A=()=>y.pinnedWidgetType$(),e[11]=y,e[12]=A):A=e[12];const k=L(A);let j;e[13]!==y?(j=()=>y.showLoadingBar$(),e[13]=y,e[14]=j):j=e[14];const P=L(j),_=l*_s,M=l-Pl-(g!=null?g:0),w=ps(0),T=ps(_s);let I;e[15]!==w||e[16]!==T?(I=[T,w],e[15]=w,e[16]=T,e[17]=I):I=e[17];let D;e[18]!==M||e[19]!==_||e[20]!==l?(D=ie=>{const[ae,G]=ie;return Math.min(Math.max(ae*l-G,_),M)},e[18]=M,e[19]=_,e[20]=l,e[21]=D):D=e[21];const O=fs(I,D);let F;e[22]!==y.showLoadingBar$?(F=()=>Ka(Qa,{requestCompletion:()=>{Ze({forceFlushSync:!0,className:[Wt,js],update:()=>{u(!1),y.showLoadingBar$.set(!0)}})},completionFinished:()=>{Ze({forceFlushSync:!0,className:Wt,update:()=>{y.showLoadingBar$.set(!1)}})}}),e[22]=y.showLoadingBar$,e[23]=F):F=e[23];let $;e[24]!==y?($=[y],e[24]=y,e[25]=$):$=e[25],C.useEffect(F,$);let N;e[26]!==d?(N=()=>{Ze({forceFlushSync:!0,className:Ml,update:()=>u(!0)});try{xt(d).focus()}catch(ie){requestAnimationFrame(()=>{var ae;(ae=h.current)==null||ae.focus()})}},e[26]=d,e[27]=N):N=e[27];const Y=N;let X;e[28]!==d||e[29]!==n?(X=()=>!n&&(Xa()&&Es(d)||Ja(d)),e[28]=d,e[29]=n,e[30]=X):X=e[30];const H=L(X);let fe;e[31]!==M||e[32]!==_?(fe=[_,M],e[31]=M,e[32]=_,e[33]=fe):fe=e[33];let te;e[34]===Symbol.for("react.memo_cache_sentinel")?(te=[0,1],e[34]=te):te=e[34];const ye=fs(O,fe,te);let Q;e[35]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(Dn,{},"blur"),e[35]=Q):Q=e[35];let W;e[36]!==a||e[37]!==g||e[38]!==Y||e[39]!==k||e[40]!==P?(W=P&&s.jsx(Fn,{clientThreadId:a,bottom:g!=null?g:0,onClick:Y,pinnedWidgetType:k},"loading-bar"),e[36]=a,e[37]=g,e[38]=Y,e[39]=k,e[40]=P,e[41]=W):W=e[41];let xe;e[42]!==ye||e[43]!==n?(xe=n&&s.jsx(bt.div,{initial:{opacity:0},animate:{opacity:ye.get()},style:{opacity:ye},exit:{opacity:0},className:"bg-token-bg-primary/50 pointer-events-auto fixed inset-0 top-(--header-height) opacity-0 backdrop-blur-xs",onClick:()=>{Ze({forceFlushSync:!0,className:js,update:()=>{S(!0),u(!1)}}).finished.then(()=>{S(!1)})}},"drag-overlay"),e[42]=ye,e[43]=n,e[44]=xe):xe=e[44];let ne;e[45]!==o||e[46]!==Y||e[47]!==n||e[48]!==y.showLoadingBar$?(ne=!n&&s.jsx(Tl,{zIndex:1,conversation:o,onClick:Y,onReveal:()=>{Ze({forceFlushSync:!0,className:Wt,update:()=>{y.showLoadingBar$.set(!1)}})}},"last-message-banner"),e[45]=o,e[46]=Y,e[47]=n,e[48]=y.showLoadingBar$,e[49]=ne):ne=e[49];let he;e[50]!==xe||e[51]!==ne?(he=s.jsxs(Za,{children:[xe,ne]}),e[50]=xe,e[51]=ne,e[52]=he):he=e[52];let se;e[53]!==Y||e[54]!==n||e[55]!==H?(se=!n&&s.jsx(Ve,{className:Z("pointer-events-auto absolute start-0 end-0 top-0 z-[100] flex -translate-y-full justify-center pb-2 opacity-0 transition-opacity hover:opacity-100",H&&"opacity-100"),children:s.jsx("button",{onClick:Y,className:"text-token-text-secondary border-token-border-default bg-token-bg-primary/50 relative z-30 flex h-6 w-6 cursor-pointer items-center justify-center rounded-full border bg-clip-padding backdrop-blur-md after:absolute after:-inset-2 after:content-['']",children:s.jsx(Rn,{className:"icon-sm text-token-text-primary"})})},"open-button"),e[53]=Y,e[54]=n,e[55]=H,e[56]=se):se=e[56];let re;e[57]!==O||e[58]!==a||e[59]!==f||e[60]!==w||e[61]!==r||e[62]!==n||e[63]!==M||e[64]!==_||e[65]!==i||e[66]!==T||e[67]!==l?(re=(n||r)&&s.jsx("div",{tabIndex:-1,ref:h,className:Z(r?"invisible":"[view-transition-name:fullscreen-popover-thread]","pointer-events-none absolute inset-x-0 bottom-0 mx-auto flex items-center justify-center rounded-3xl focus:ring-0 focus:outline-hidden focus-visible:ring-0 focus-visible:outline-hidden md:bottom-6"),role:"dialog","aria-modal":"true",onClick:El,children:s.jsx(Ve,{children:s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx(Nl,{onDoubleClick:()=>{It(T,(O.get()===M?_:M)/l,Lt)},onDragStart:()=>w.set(0),onDragEnd:ie=>{const{velocity:ae}=ie,{y:G}=ae,q=Il(-G,_,M,O.get());It(T,(q===M?M:_)/l,Lt),It(w,0,Lt)},onDrag:ie=>{const{delta:ae}=ie,{y:G}=ae;return w.set(w.get()+G)}}),s.jsx("div",{className:"bg-token-bg-primary shadow-long pointer-events-auto mx-0 flex overflow-hidden rounded-t-3xl backdrop-blur-2xl md:-mx-2! md:rounded-[34px]",children:s.jsx(bt.div,{className:"relative flex w-full flex-col-reverse overflow-y-auto",style:{height:O,paddingBottom:f!=null?f:0,WebkitMaskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)",maskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)"},children:s.jsx(Ln,{children:s.jsx(jl,{onRequestCompletion:i,clientThreadId:a})})})})]})})},"popover-thread"),e[57]=O,e[58]=a,e[59]=f,e[60]=w,e[61]=r,e[62]=n,e[63]=M,e[64]=_,e[65]=i,e[66]=T,e[67]=l,e[68]=re):re=e[68];let ee;return e[69]!==W||e[70]!==he||e[71]!==se||e[72]!==re?(ee=s.jsxs(s.Fragment,{children:[Q,W,he,se,re]}),e[69]=W,e[70]=he,e[71]=se,e[72]=re,e[73]=ee):ee=e[73],ee},Nl=t=>{"use forget";const e=ue.c(17),{onDrag:a,onDragEnd:i,onDoubleClick:d,onDragStart:c,onPointerUp:m}=t;let o,h,n,u;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={opacity:1},h={opacity:1},n={type:"tween",duration:.1},u={x:0,y:0,transform:"translateY(0px)"},e[0]=o,e[1]=h,e[2]=n,e[3]=u):(o=e[0],h=e[1],n=e[2],u=e[3]);let r;e[4]!==c?(r=()=>{c==null||c()},e[4]=c,e[5]=r):r=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S={left:0,right:0,top:0,bottom:0},e[6]=S):S=e[6];let b;e[7]!==a?(b=(f,x)=>{a==null||a(x)},e[7]=a,e[8]=b):b=e[8];let l;e[9]!==i?(l=(f,x)=>i==null?void 0:i(x),e[9]=i,e[10]=l):l=e[10];let p;return e[11]!==d||e[12]!==m||e[13]!==r||e[14]!==b||e[15]!==l?(p=s.jsx(bt.div,{drag:"y",tabIndex:-1,className:"bg-token-border-default pointer-events-auto absolute start-10 end-10 top-0 z-10 h-[4px] cursor-ns-resize rounded-b-full opacity-0 after:absolute after:inset-0 after:top-[-18px] after:h-[28px] after:bg-transparent after:content-['']",whileHover:o,whileDrag:h,transition:n,style:u,onPointerDown:r,dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:S,onDrag:b,onPointerUp:m,onDragEnd:l,onDoubleClick:d}),e[11]=d,e[12]=m,e[13]=r,e[14]=b,e[15]=l,e[16]=p):p=e[16],p};function Il(t,e,a,i){if(!(e<=a))throw new Error("min must be <= max");const d=.25,c=8,m=24,o=1200,h=Math.abs(i-e)<=Math.abs(i-a)?e:a,n=i+t*d,u=Math.abs(n-e)<=Math.abs(n-a)?e:a;if(u===h)return h;const r=(h+u)/2,S=Math.sign(u-h)||1,b=r+S*c;if(!(S>0?n>=b:n<=b))return h;const p=Math.abs(t),f=Math.min(p/o,1),x=m*(1-f*f);return Math.abs(n-h)-Math.abs(n-u)<x?h:u}function El(t){return t.stopPropagation()}const Ol=dt(()=>lt(()=>import("./dk0id8phj5n5d7ow.js"),__vite__mapDeps([0,1,2,3,4,5])).then(t=>t.AgentConnectorsSafetyModal)),Hl=({conversation:t,isNewThread:e,isGizmoThread:a,isProjectThread:i,currentModelId:d,onRequestCompletion:c,shouldUseUnifiedComposer:m,onlyAllowImageUploads:o,isWidgetFullScreen:h=!1,layoutMode:n,shouldShowDeepResearchDesktopContent:u=!1})=>{const r=ce(),{height$:S}=yt(t),b=it(tt),l=ct(),{pageType:p}=Bn(),f=(p==null?void 0:p.type)==="landing-page",x=eo(p==null?void 0:p.type),g=Ys(t.id).isOdysseyMode,v=Ds(r),y=Tt(),A=to(),k=ze(),j=St(r);$n(l);const P=it(tt),_=so(r),M=L(xs.sidebarUrlTrayOpen$),w=L(xs.context$),T=vt(),I=P&&_&&M,D=ts(),O=Ae(r,"1925940714");L(()=>{if(Gn(r))return nt(r).selectedTaskReplyId$()});const{platformConnectors:F}=ao(),$=Vn(ys.hasSeenOdysseyConnectorsModal),N=qe(t.id,G=>Fe.getConversationTurns(G).some(q=>q.messages.some(z=>{var le;return(le=z.metadata)==null?void 0:le.n7jupd_message}))),Y=Fs(),X=Jt(),H=L(()=>ut(t).showLoadingBar$()),fe=(Y||X)&&N||h&&H;zn(async()=>{if(!I)return;const G=T?[T]:[];if(G.includes(Ye.Agent))return;const q=typeof performance<"u"?performance.now():Date.now();try{const z=await fo(w,nr,G,t.id),le=Math.round((typeof performance<"u"?performance.now():Date.now())-q);return z!=null?ot.logEventWithStatsig("kaur1br5: Sidebar context collected","chatgpt_sidebar_context_collected",{duration_ms:le,count:Array.isArray(z)?z.length:1}):ot.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",{duration_ms:le,failure_reason:"null"}),z}catch(z){const le=Math.round((typeof performance<"u"?performance.now():Date.now())-q),be=z instanceof xo;ot.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",de({duration_ms:le,failure_reason:be?"timeout":"error"},z&&typeof z=="object"&&"message"in z?{error_message:String(z.message)}:z?{error_message:String(z)}:{}));return}},()=>I||!O.get("completion_request_blocking_promise_optimization",!1));const te=oo(),ye=async G=>{var ve,me,Se,Ie,Me,ge,Te,Ee;if(((ve=co(t.id))==null?void 0:ve.isLoading)!==!1)return;const q=await Xn(G),z=Q((Se=(me=q.promptMessage.metadata)==null?void 0:me.attachments)!=null?Se:[]);if(te&&z){const{promptMessage:oe,parentMessageId:pe}=q;return Jn.debug("Relaying message to voice participant"),Zn({type:"RELAY",message:oe,parentMessageId:pe})}const le=(Me=(Ie=q.completionMetadata)==null?void 0:Ie.systemHints)==null?void 0:Me.includes($t),be=Array.from((ge=G.selectedSources)!=null?ge:[]).filter(oe=>oe!=="web")[0];if(le&&be&&$.eligible){const oe=(Te=uo[be])!=null?Te:be,pe=F.get(oe);if(pe){Bs(r,Ol,{connector:pe,onConfirm:()=>{er(r,ys.hasSeenOdysseyConnectorsModal),c(q)},onTurnOffConnectors:()=>{ho(t.id,E=>{var V,B;(V=E.selectedSources)!=null||(E.selectedSources=new Map),E.selectedSources.set(T,new Set(["web"])),(B=E.selectedMCPSources)!=null||(E.selectedMCPSources=new Map),E.selectedMCPSources.set(T,new Set),E.mentionedSources=new Set,mo({selectedSourcesMap:E.selectedSources,selectedMCPSourcesMap:E.selectedMCPSources,scope:{userId:j==null?void 0:j.authUserId,workspaceId:j==null?void 0:j.id}})})}});return}}if(P){const oe=!!w,pe=M===!0;_&&(!oe||!pe)&&go.error("Missing context chip on message send",{clientThreadId:t.id,hasSidebarContext:oe,isContextChipOpen:pe,contextEnabled:_,isBridgedDesktopSidebar:P,shouldCollectSidebarContext:I}),(Ee=po())==null||Ee.triggerProductEvent("messageSent")}z&&c(q)},Q=C.useCallback(G=>{let q=ro;const z=G.reduce((be,ve)=>{var me;return be+((me=ve.size)!=null?me:0)},0);g&&(q=no(r,"1504865540").get("max_file_size_mb",25));const le=z<=q*1024*1024;return le||A.danger(k.formatMessage({id:"odyssey.fileTooLarge",defaultMessage:"The attached files are too large. The maximum size is {maxFileSizeMB}MB."},{maxFileSizeMB:q})),le},[r,k,g,A]),W=C.useCallback(G=>{ot.logEvent("Continue Completion"),c(Un(G))},[c]),xe=Yn.useState(G=>G.isReplayEnabled),ne=io({clientThreadId:t.id}),he=lo({clientThreadId:t.id}),se=ss(),re=L(()=>wt(r)&&se.visible$()&&!Zt()&&e);if(ne)return s.jsx(qn,{safetyLimited:he});const ee=e&&!a,ie=s.jsxs(s.Fragment,{children:[s.jsx(Kn,{clientThreadId:t.id}),s.jsxs(Ut,{ref:qs({axis:"height",onChange:({height:G})=>S.set(G)}),verticalMargin:"none",verticalPadding:v?"last-standard":"none",horizontalPadding:P?"none":"standard",children:[h&&s.jsx(kl,{clientThreadId:t.id,composerController:l,onRequestCompletion:c}),s.jsxs(Ve,{className:Z(b&&"w-full max-w-full"),children:[!1,xe?s.jsx(Qn,{clientThreadId:t.id},t.id):fe?s.jsx("div",{className:"pointer-events-none h-14"}):s.jsx(Yi,{conversation:t,currentModelId:d,isNewThread:e,isProjectThread:i,hideHeader:ee,onRequestCompletion:ye,onContinueGenerating:W,onlyAllowImageUploads:o,layoutMode:n})]})]})]}),ae=ee&&s.jsx("div",{className:Z("[display:var(--display-hidden-until-loaded,block)] md:absolute md:start-0 md:bottom-8 md:w-full"),children:s.jsx(Ut,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsx(Ve,{className:Z(b&&"w-full max-w-full"),children:s.jsx(qi,{className:"block flex-1",suggestedContent:re?s.jsx(oa,{}):void 0})})})});return m?s.jsxs(s.Fragment,{children:[!y&&ae,s.jsx("div",{id:"thread-bottom",children:ie}),y&&ae,e&&!f&&!a&&!x&&!g&&!D&&!i&&!u&&s.jsx(Wl,{clientThreadId:t.id,currentModelId:d})]}):ie};function oa(){"use forget";const t=ue.c(3),e=ct(),a=ze();let i;return t[0]!==e||t[1]!==a?(i=s.jsx(Qs,{imageVariants:rr,onSelectStyle:d=>{ir(e).setImageStyle({style:d,intl:a})},onAddYourself:Ll,onEditPhoto:Rl}),t[0]=e,t[1]=a,t[2]=i):i=t[2],i}function Rl(){const t=document.getElementById("upload-photos");t&&t.click()}function Ll(){const t=document.getElementById("upload-camera");t&&t.click()}const Wl=t=>{"use forget";const e=ue.c(51),{clientThreadId:a,currentModelId:i}=t,d=ce(),c=ct(),m=ss();let o;e[0]!==d||e[1]!==m?(o=()=>wt(d)&&m.visible$()&&Zt(),e[0]=d,e[1]=m,e[2]=o):o=e[2];const h=L(o);let n;e[3]!==c||e[4]!==m?(n=()=>es(c).shouldShowAutocomplete$()&&!m.visible$(),e[3]=c,e[4]=m,e[5]=n):n=e[5];const u=L(n),r=Ks();let S;e[6]!==a?(S={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[6]=a,e[7]=S):S=e[7];const b=Us(S),l=Ki();let p,f;e[8]!==d?(p=()=>{wt(d)&&Qs.prefetch()},f=[d],e[8]=d,e[9]=p,e[10]=f):(p=e[9],f=e[10]),C.useEffect(p,f);let x;e[11]!==a?(x={clientThreadId:a,canShowBanner:!1},e[11]=a,e[12]=x):x=e[12];const{shouldShow:g}=Qi(x),v=!g;let y;e[13]!==v?(y={canShowBanner:v},e[13]=v,e[14]=y):y=e[14];const{shouldShow:A}=tr(y);let k;e[15]!==d?(k=!1,e[15]=d,e[16]=k):k=e[16];const j=k;let P;e[17]!==d||e[18]!==j?(P=()=>{if($s(d)||!lr(d))return;const{data:H}=cr(d,{useCache:!j});if(H&&!dr(H.id)(d))return H},e[17]=d,e[18]=j,e[19]=P):P=e[19];const _=L(P),M=qt(),w=u&&"hidden";let T;e[20]!==w?(T=Z(w),e[20]=w,e[21]=T):T=e[21];let I;e[22]!==a||e[23]!==r||e[24]!==M||e[25]!==_?(I=!r&&s.jsxs(s.Fragment,{children:[s.jsx(sr,{clientThreadId:a}),_&&s.jsx(ar,{pulseId:_.id,caption:_.caption,previewImages:_.preview_items.map(Dl),onClick:()=>M("/pulse")})]}),e[22]=a,e[23]=r,e[24]=M,e[25]=_,e[26]=I):I=e[26];let D;e[27]!==h?(D=h&&s.jsx(oa,{}),e[27]=h,e[28]=D):D=e[28];let O;e[29]!==l||e[30]!==a||e[31]!==i||e[32]!==b?(O=b==="tiles"||b==="hscroll"?i&&a?s.jsx(ea,{className:"mt-10 max-sm:hidden",layout:"carousel"}):null:b==="image_gen_banner"&&l?s.jsx("div",{className:"mt-16 flex justify-center max-sm:hidden",children:s.jsx(Xi,{})}):b==="chips"?i&&s.jsx(Ji,{clientThreadId:a,currentModelId:i}):null,e[29]=l,e[30]=a,e[31]=i,e[32]=b,e[33]=O):O=e[33];let F;e[34]!==g?(F=g&&s.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:s.jsx(Zi,{})}),e[34]=g,e[35]=F):F=e[35];let $;e[36]!==A||e[37]!==g?($=!g&&A&&s.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:s.jsx(ur,{})}),e[36]=A,e[37]=g,e[38]=$):$=e[38];let N;e[39]!==I||e[40]!==D||e[41]!==O||e[42]!==F||e[43]!==$?(N=s.jsx(Ut,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsxs(Ve,{children:[I,D,O,F,$]})}),e[39]=I,e[40]=D,e[41]=O,e[42]=F,e[43]=$,e[44]=N):N=e[44];let Y;e[45]!==r?(Y=r&&s.jsxs("div",{className:"thread-sm:flex mt-5 hidden flex-col gap-2",children:[s.jsx(hr,{}),s.jsx(mr,{}),s.jsx(gr,{})]}),e[45]=r,e[46]=Y):Y=e[46];let X;return e[47]!==T||e[48]!==N||e[49]!==Y?(X=s.jsxs("div",{className:T,children:[N,Y]}),e[47]=T,e[48]=N,e[49]=Y,e[50]=X):X=e[50],X};function Dl(t){return or(t.image_url)}function na({projectResource:t}){var v;const e=ze(),a=ce(),i=(v=t.gizmo)==null?void 0:v.id,d=jt(a,i),c=it(tt),m=Ms(),o=(()=>{const y=m.pathname.replace(/\/+$/,"");return/^\/g\/[^/]+\/project$/.test(y)})(),h=bo(t),n=t.gizmo.display.name,u=L(()=>So(a,t)),r=L(()=>yo(a,t));if(!(d&&!c&&!o)||t.gizmo.gizmo_type!==wo.PROJECT)return null;const b=n?e.formatMessage(Dt.openProjectHome,{projectName:n}):e.formatMessage(Dt.openProjectHomeFallback),l=Co(a,t),p=s.jsx(fr,{color:u,emoji:r,strict:!0,isSharedProject:h}),f=b,x=s.jsx(ks,{to:l,"aria-label":f,className:Z("hover:bg-token-bg-tertiary focus-visible:outline-token-outline-primary text-token-text-secondary ms-2 inline-flex items-center justify-center rounded-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2","h-9 w-9"),children:p}),g=n!=null?n:e.formatMessage(Dt.projectNameFallback);return s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xt,{label:g,children:x}),s.jsx(pr,{className:"icon-sm text-token-text-tertiary","aria-hidden":"true"})]})}const Dt=Ps({openProjectHome:{id:"threadHeader.openProjectHome",defaultMessage:"Open {projectName} project"},openProjectHomeFallback:{id:"threadHeader.openProjectHomeFallback",defaultMessage:"Open project home"},projectNameFallback:{id:"threadHeader.projectNameFallback",defaultMessage:"Project"}});function Fl(t){"use forget";const e=ue.c(22),{className:a,threadHeaderDropdown:i,conversationActions:d,superWidgetTabs:c,projectResource:m}=t,o=ce(),h=vo(),n=Gs(o);let u;e[0]!==o||e[1]!==h?(u=h&&!We(o),e[0]=o,e[1]=h,e[2]=u):u=e[2];const r=!u;let S;e[3]!==o||e[4]!==h?(S=h&&!We(o),e[3]=o,e[4]=h,e[5]=S):S=e[5];const b=!S;let l;e[6]!==c?(l=c!=null?c:s.jsx(xr,{textClassName:"text-sm"}),e[6]=c,e[7]=l):l=e[7];const p=l;if(n){let g;e[8]!==r?(g=r&&s.jsx(ta,{}),e[8]=r,e[9]=g):g=e[9];const v=b&&i;let y;return e[10]!==a||e[11]!==d||e[12]!==m||e[13]!==g||e[14]!==v||e[15]!==p?(y=s.jsx(Bl,{className:a,conversationActions:d,sidebarOpenButton:g,threadHeaderDropdown:v,superWidgetTabs:p,projectResource:m}),e[10]=a,e[11]=d,e[12]=m,e[13]=g,e[14]=v,e[15]=p,e[16]=y):y=e[16],y}const f=b&&i;let x;return e[17]!==a||e[18]!==d||e[19]!==f||e[20]!==p?(x=s.jsx($l,{className:a,conversationActions:d,threadHeaderDropdown:f,superWidgetTabs:p}),e[17]=a,e[18]=d,e[19]=f,e[20]=p,e[21]=x):x=e[21],x}function Bl(t){"use forget";const e=ue.c(23),{className:a,conversationActions:i,sidebarOpenButton:d,threadHeaderDropdown:c,superWidgetTabs:m,projectResource:o}=t,h=C.useRef(null),n=C.useRef(null),u=C.useRef(null),r=C.useRef(null);let S,b;e[0]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{const j=h.current,P=n.current,_=u.current,M=r.current;if(!j||!P||!_||!M)return;const w=()=>{const I=j.getBoundingClientRect().width,D=_.getBoundingClientRect().width,O=P.getBoundingClientRect(),F=.5*(I-D),$=O.right>F;_.style.justifySelf=$?"start":"center"},T=new ResizeObserver(w);return T.observe(j,{box:"border-box"}),T.observe(P,{box:"border-box"}),T.observe(_,{box:"border-box"}),w(),()=>{T.disconnect()}},b=[],e[0]=S,e[1]=b):(S=e[0],b=e[1]),Qt(S,b);let l;e[2]!==a?(l=Z("h-header-height w-full px-2 sm:grid sm:grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] sm:px-0",a),e[2]=a,e[3]=l):l=e[3];let p;e[4]!==o?(p=o?s.jsx(na,{projectResource:o}):null,e[4]=o,e[5]=p):p=e[5];let f;e[6]!==c?(f=s.jsx("div",{ref:n,children:c}),e[6]=c,e[7]=f):f=e[7];let x;e[8]!==d||e[9]!==p||e[10]!==f?(x=s.jsxs("div",{className:"z-10 col-start-1 row-start-1 hidden items-center self-center justify-self-start md:flex",children:[d,p,f]}),e[8]=d,e[9]=p,e[10]=f,e[11]=x):x=e[11];let g,v;e[12]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(Ve,{className:"col-span-3 col-start-1 row-start-1 w-full",children:s.jsx("div",{className:"w-full",ref:r})}),v=Z("no-scrollbar col-start-2 row-start-1 -mb-px h-full w-full min-w-0 overflow-x-auto overflow-y-hidden"),e[12]=g,e[13]=v):(g=e[12],v=e[13]);let y;e[14]!==m?(y=s.jsx("div",{className:v,ref:u,children:m}),e[14]=m,e[15]=y):y=e[15];let A;e[16]!==i?(A=s.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible md:flex",children:i}),e[16]=i,e[17]=A):A=e[17];let k;return e[18]!==A||e[19]!==l||e[20]!==x||e[21]!==y?(k=s.jsxs("div",{className:l,ref:h,children:[x,g,y,A]}),e[18]=A,e[19]=l,e[20]=x,e[21]=y,e[22]=k):k=e[22],k}function $l(t){"use forget";const e=ue.c(17),{className:a,conversationActions:i,threadHeaderDropdown:d,superWidgetTabs:c}=t,m=C.useRef(null),o=C.useRef(null),h=C.useRef(null),n=C.useRef(null);let u,r;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const v=m.current,y=o.current,A=h.current,k=n.current;if(!v||!y||!A||!k)return;const j=()=>{const _=v.getBoundingClientRect().width,M=A.getBoundingClientRect().width,w=y.getBoundingClientRect(),T=.5*(_-M),I=w.right>T;A.style.justifySelf=I?"start":"center"},P=new ResizeObserver(j);return P.observe(v,{box:"border-box"}),P.observe(y,{box:"border-box"}),P.observe(A,{box:"border-box"}),j(),()=>{P.disconnect()}},r=[],e[0]=u,e[1]=r):(u=e[0],r=e[1]),Qt(u,r);let S;e[2]!==a?(S=Z("h-header-height w-full px-2 sm:grid sm:grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] sm:px-0",a),e[2]=a,e[3]=S):S=e[3];let b;e[4]!==d?(b=s.jsx("div",{className:"z-10 col-start-1 row-start-1 hidden self-center justify-self-start pe-2 md:flex",ref:o,children:d}),e[4]=d,e[5]=b):b=e[5];let l,p;e[6]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(Ve,{className:"col-span-3 col-start-1 row-start-1 w-full",children:s.jsx("div",{className:"w-full",ref:n})}),p=Z("no-scrollbar col-start-2 row-start-1 -mb-px h-full w-full min-w-0 overflow-x-auto overflow-y-hidden"),e[6]=l,e[7]=p):(l=e[6],p=e[7]);let f;e[8]!==c?(f=s.jsx("div",{className:p,ref:h,children:c}),e[8]=c,e[9]=f):f=e[9];let x;e[10]!==i?(x=s.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible md:flex",children:i}),e[10]=i,e[11]=x):x=e[11];let g;return e[12]!==S||e[13]!==b||e[14]!==f||e[15]!==x?(g=s.jsxs("div",{className:S,ref:m,children:[b,l,f,x]}),e[12]=S,e[13]=b,e[14]=f,e[15]=x,e[16]=g):g=e[16],g}const Gl=({clientThreadId:t})=>{const e=ce(),a=Vs(p=>p.activeStageSidebar),i=br(To.WorkspaceShareLinks),d=!We(e),c=Rs(),m=_o(t),o=jt(e,m);L(()=>o&&m?jo(e,m).gizmo$():null);const h=Ge(e,"16480203"),n=Sr(),u=Ao(),r=it(At),S=i&&!d&&!c&&(!o||h)&&!n&&!u&&!r&&!0,b=!a,l=r;return s.jsx("div",{className:"flex items-center",id:"conversation-header-actions",children:s.jsx(rl,{showShareButton:S,showProfileDropdown:b,showConversationPrivacyIndicator:l,clientThreadId:t})})},Vl=dt(()=>lt(()=>import("./ekvakqg3vqgpm896.js"),__vite__mapDeps([6,1,2,3,7,4,5,8,9,10,11,12,13,14,15,16,17,18])).then(t=>t.GizmoUsingAsOwnerNotice)),zl="text-lg",Ul="icon-sm";function Yl(t){"use forget";var st,ht,$e,mt,at;const e=ue.c(95),{conversation:a,transparentBackground:i,isEmptyState:d}=t,c=ts(),m=Ns(),o=ce(),h=Xs(o);let n;e[0]!==a?(n=()=>Ho(a),e[0]=a,e[1]=n):n=e[1];const u=L(n);let r;e[2]!==o||e[3]!==u?(r=jt(o,u),e[2]=o,e[3]=u,e[4]=r):r=e[4];const S=r,b=yr(),{data:l}=Po(u),p=St(o),f=p==null?void 0:p.getWorkspaceId(),x=Kt(),{data:g}=Mo(f),v=(st=x==null?void 0:x.data.profilePictureUrl)!=null?st:null,y=(ht=x==null?void 0:x.data.name)!=null?ht:void 0;let A;e[5]!==x||e[6]!==v||e[7]!==(g==null?void 0:g.beta_settings)?(A=(x==null?void 0:x.isWorkspaceAccount())&&v&&(($e=g==null?void 0:g.beta_settings)==null?void 0:$e[ko.SHOW_LOGO_IN_HEADER]),e[5]=x,e[6]=v,e[7]=g==null?void 0:g.beta_settings,e[8]=A):A=e[8];const k=!!A,j=Tt(),P=No(),_=Io(),[M,w]=it(Kl);let T;e[9]!==a.id?(T=Gt(a.id),e[9]=a.id,e[10]=T):T=e[10];const I=T,D=Vs(ql),O=qe(a.id,Fe.hasUserMessage)||!I,F=Jt(),$=F&&P,N=wr()&&O&&!F,Y=!u&&!N&&!w;let X;e[11]!==a.id?(X={clientThreadId:a.id,fromHeader:!0},e[11]=a.id,e[12]=X):X=e[12];const{shouldShow:H,handleClose:fe}=Cr(X),te=H&&!$;let ye;e[13]!==o?(ye=We(o),e[13]=o,e[14]=ye):ye=e[14];const Q=!ye;let W=!1;!O&&!w&&!N&&Q&&P&&Y&&Ae(o,"2118136551").get("header_navigation_enabled",!1)&&m!=null&&m.headerNavData&&(W=!0);let ne;e[15]!==a.id?(ne=s.jsx(Gl,{clientThreadId:a.id}),e[15]=a.id,e[16]=ne):ne=e[16];let he;e[17]!==a.id||e[18]!==ne?(he=s.jsx(vr,{clientThreadId:a.id,children:ne}),e[17]=a.id,e[18]=ne,e[19]=he):he=e[19];const se=he;let re;e[20]!==M||e[21]!==N?(re=M&&!N?{textClassName:zl,chevronClassName:Ul}:{},e[20]=M,e[21]=N,e[22]=re):re=e[22];const ee=re;let ie;e[23]!==a||e[24]!==se||e[25]!==ee||e[26]!==u||e[27]!==l||e[28]!==w||e[29]!==j||e[30]!==S||e[31]!==N?(ie=N?s.jsx(Fl,{projectResource:l!=null?l:void 0,threadHeaderDropdown:s.jsx(Et,de({conversation:a},ee)),conversationActions:se}):w?s.jsx(Tr,{clientThreadId:a.id}):j&&(S||!u)?s.jsx(Et,{conversation:a}):s.jsx(Et,de({conversation:a},ee)),e[23]=a,e[24]=se,e[25]=ee,e[26]=u,e[27]=l,e[28]=w,e[29]=j,e[30]=S,e[31]=N,e[32]=ie):ie=e[32];const ae=ie;let G;e:{if(M){G=D?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]";break e}if(!h){G=D?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]";break e}G="[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]"}const q=G;let z;e[33]!==a?(z=()=>ut(a).hasPinnedWidget$(),e[33]=a,e[34]=z):z=e[34];const le=L(z);let be;e[35]!==o||e[36]!==l||e[37]!==N?(be=!!l&&!(Gs(o)&&N),e[35]=o,e[36]=l,e[37]=N,e[38]=be):be=e[38];const ve=be;let me;e[39]!==w||e[40]!==_||e[41]!==N?(me=zs()&&!N&&!w&&_,e[39]=w,e[40]=_,e[41]=N,e[42]=me):me=e[42];const Se=me,Ie=Xl,Me="page-header",ge=!N&&!w,Te=!!d&&!c,Ee=S&&I,oe=Y&&!c,pe=Y&&!F&&!le,E=!!(i&&!F&&!N&&!w),V=D&&te,B=!w&&!N&&s.jsxs("div",{className:"pointer-events-none absolute start-0 flex flex-col items-center gap-2 lg:start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[l==null&&k&&v&&s.jsx(Eo,{src:v,alt:y!=null?y:""}),l!=null&&(p==null?void 0:p.isWorkspaceAccount())&&((mt=l.gizmo.tags)==null?void 0:mt.includes(Oo.WorkspaceDisabled))&&s.jsx(Vl,{gizmo:l}),te&&s.jsx("div",{className:"hidden lg:block",children:s.jsx(ws,{onClose:fe,clientThreadId:a.id})}),$&&s.jsx(al,{})]}),R=N||w?"w-full":"items-center";let we;e[43]!==R?(we=Z("flex",R),e[43]=R,e[44]=we):we=e[44];let je;e[45]!==o||e[46]!==w||e[47]!==Q?(je=Q&&!w&&Ge(o,"2860321732")&&s.jsx(Ql,{}),e[45]=o,e[46]=w,e[47]=Q,e[48]=je):je=e[48];let Oe;e[49]!==l||e[50]!==ve?(Oe=ve&&s.jsx(na,{projectResource:l}),e[49]=l,e[50]=ve,e[51]=Oe):Oe=e[51];let Pe;e[52]!==Se?(Pe=Se&&s.jsx("div",{className:"hidden md:flex",children:s.jsx(ta,{})}),e[52]=Se,e[53]=Pe):Pe=e[53];let He;e[54]!==a.id||e[55]!==fe||e[56]!==w||e[57]!==N||e[58]!==te?(He=!w&&!N&&s.jsx("div",{className:"block lg:hidden",children:te?s.jsx(ws,{onClose:fe,clientThreadId:a.id}):null}),e[54]=a.id,e[55]=fe,e[56]=w,e[57]=N,e[58]=te,e[59]=He):He=e[59];let _e;e[60]!==ae||e[61]!==we||e[62]!==je||e[63]!==Oe||e[64]!==Pe||e[65]!==He?(_e=s.jsxs("div",{className:we,children:[je,Oe,Pe,ae,He]}),e[60]=ae,e[61]=we,e[62]=je,e[63]=Oe,e[64]=Pe,e[65]=He,e[66]=_e):_e=e[66];let Re;e[67]!==m||e[68]!==W?(Re=W&&s.jsx(_r,{effectiveLocale:(at=m==null?void 0:m.locale)!=null?at:jr,slug:"/",children:s.jsx(Ar,{navData:m.headerNavData})}),e[67]=m,e[68]=W,e[69]=Re):Re=e[69];let Le;e[70]!==a.id||e[71]!==se||e[72]!==u||e[73]!==w||e[74]!==N?(Le=!N&&!w&&s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Pr,{gizmoId:u,clientThreadId:a.id})}),s.jsx("div",{className:"flex items-center gap-2",children:se})]}),e[70]=a.id,e[71]=se,e[72]=u,e[73]=w,e[74]=N,e[75]=Le):Le=e[75];let ke;e[76]!==Ie||e[77]!==q||e[78]!==ge||e[79]!==Te||e[80]!==Ee||e[81]!==oe||e[82]!==pe||e[83]!==E||e[84]!==V||e[85]!==B||e[86]!==_e||e[87]!==Re||e[88]!==Le?(ke=s.jsxs(Ie,{id:Me,shouldHideHeaderOnSmallScreens:ge,shouldUseEmptyStateLayout:Te,shouldStickSnorlaxNewThread:Ee,shouldUseDefaultHeaderPositioning:oe,shouldUseTransparentDefaultHeaderBackground:pe,shouldForceTransparentBackground:E,shouldShowUpgradeStyles:V,edgeShadowClass:q,children:[B,_e,Re,Le]}),e[76]=Ie,e[77]=q,e[78]=ge,e[79]=Te,e[80]=Ee,e[81]=oe,e[82]=pe,e[83]=E,e[84]=V,e[85]=B,e[86]=_e,e[87]=Re,e[88]=Le,e[89]=ke):ke=e[89];let Be;e[90]!==b?(Be=b&&s.jsx(kr,{}),e[90]=b,e[91]=Be):Be=e[91];let Ke;return e[92]!==ke||e[93]!==Be?(Ke=s.jsxs(s.Fragment,{children:[ke,Be]}),e[92]=ke,e[93]=Be,e[94]=Ke):Ke=e[94],Ke}function ql(t){return t.isConversationScrolledFromTop}function Kl(t){return[At(t),tt(t)]}const Ql=()=>{"use forget";const t=ue.c(12),e=ce();let a;t[0]!==e?(a=()=>At(e),t[0]=e,t[1]=a):a=t[1];const i=L(a),d=Mr();let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(et,{id:"mG13YW",defaultMessage:"New chat"}),t[2]=c):c=t[2];const m=i&&"self-center";let o;t[3]!==m?(o=Z("hover:bg-token-bg-tertiary group touch:h-10 flex aspect-square h-9 items-center justify-center rounded-[10px]",m),t[3]=m,t[4]=o):o=t[4];let h;t[5]!==e?(h=r=>{Nr(e,r,{location:"Anon desktop header"})},t[5]=e,t[6]=h):h=t[6];let n;t[7]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsxs("div",{children:[s.jsx(Ro,{className:"icon-lg -m-1 group-hover:hidden"}),s.jsx(Ir,{className:"icon not-group-hover:hidden"})]}),t[7]=n):n=t[7];let u;return t[8]!==d||t[9]!==o||t[10]!==h?(u=s.jsx(Xt,{label:c,contentClassName:"cant-hover:hidden",triggerAs:null,children:s.jsx(ks,{to:"/",state:d,className:o,onClick:h,children:n})}),t[8]=d,t[9]=o,t[10]=h,t[11]=u):u=t[11],u};function Xl(t){"use forget";const e=ue.c(14),{children:a,id:i,shouldHideHeaderOnSmallScreens:d,shouldUseEmptyStateLayout:c,shouldStickSnorlaxNewThread:m,shouldUseDefaultHeaderPositioning:o,shouldUseTransparentDefaultHeaderBackground:h,shouldForceTransparentBackground:n,shouldShowUpgradeStyles:u,edgeShadowClass:r,shouldDisableTransition:S}=t,l=(S===void 0?!1:S)?"transition-none motion-safe:transition-none":"motion-safe:transition",p=d&&"max-md:hidden",f=c&&"absolute start-0 end-0",x=m&&"sharp-edge-on-scroll-start sticky top-0",g=o&&"thread-xl:absolute thread-xl:start-0 thread-xl:end-0 thread-xl:shadow-none!",v=h&&"thread-xl:bg-transparent",y=n&&"bg-transparent",A=u&&"thread-xl:bg-token-main-surface-primary thread-xl:[box-shadow:var(--sharp-edge-top-shadow)]!";let k;e[0]!==r||e[1]!==l||e[2]!==p||e[3]!==f||e[4]!==x||e[5]!==g||e[6]!==v||e[7]!==y||e[8]!==A?(k=Z("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto",l,p,f,x,g,v,y,r,A),e[0]=r,e[1]=l,e[2]=p,e[3]=f,e[4]=x,e[5]=g,e[6]=v,e[7]=y,e[8]=A,e[9]=k):k=e[9];let j;return e[10]!==a||e[11]!==i||e[12]!==k?(j=s.jsx(Er,{id:i,className:k,children:a}),e[10]=a,e[11]=i,e[12]=k,e[13]=j):j=e[13],j}const Jl=dt(()=>lt(()=>import("./d3ia29s4ey7jfka4.js"),__vite__mapDeps([19,1,2,3,4,5])).then(t=>t.ThreadReportConversationModal)),Zl=dt(()=>lt(()=>import("./kwg0j64258q5s4cx.js"),__vite__mapDeps([20,1,2,3,21,22,4,5,23,24]))),ec=dt(()=>lt(()=>import("./8g8nzp6ulnqgyb36.js"),__vite__mapDeps([25,1,2,3,4,5,26,27,28,29])).then(t=>t.TableOfContentsSidebar));function tc({conversation:t,isNewScrollEnabled:e,pageLoadSearchQuery:a,footerRootContainerElementRef:i,threadRootRef:d,scrollContainerRef:c,isModalView:m=!1,children:o}){const h=ce(),[n]=As(),u=!!n.get("message"),[r,S]=L(()=>[tt(h),At(h)]),b=qe(t.id,f=>(f==null?void 0:f.conversationOrigin)===rn.APPLE),l=L(()=>ut(t).pinnedWidgetHeight$());if(e)return s.jsx(Ei,{allowScrollToEnd:!r,allowScrollToTop:!r&&b,clientThreadId:t.id,initScrolledToEnd:a==null&&!u,threadFooterRef:i,threadRootRef:d,children:o});const p=s.jsx("div",{className:"relative h-full",style:{"--pip-widget-height":l?"".concat(l,"px"):"0px"},children:s.jsxs("div",{className:Z("flex h-full flex-col overflow-y-auto",!S&&!m&&(l?"pt-(--pip-widget-height)":"thread-xl:pt-(--header-height)"),S||r?"thread-sm:[scrollbar-gutter:stable_both-edges] [scrollbar-gutter:stable]":"[scrollbar-gutter:stable_both-edges]",m&&"thread-md:pt-4"),ref:c,children:[s.jsx("div",{className:"relative",children:s.jsx(nn,{className:"absolute start-0 top-0",setIsScrolledToEdge:f=>{Ct.setIsConversationScrolledFromTop(f)},options:{root:c==null?void 0:c.current}})}),o]})});return a!=null?p:s.jsx(Vt,{children:s.jsxs(C.Suspense,{fallback:null,children:[s.jsx(Oi,{}),p]})})}const sc=function({conversation:t,withCustomCompletionParams:e,hideDisclaimer:a,hideHeader:i,renderEmptyState:d,renderEmptyFooter:c,isModalView:m=!1}){"use no forget";var is,ls;const o=ze(),h=Lo(),n=ce(),u=Ns(),r=!We(n),S=Or(n),b=Ks(),l=ts(),p=Xs(n),f=Tt(),x=Wo(),g=Hr(t.id),[v,y,A,k,j]=qe(t.id,K=>[K==null?void 0:K.isLoading,Fe.hasUserMessage(K),Fe.getConversationTurns(K).length,Fe.isArchived(K),K?Fe.getGizmoId(K):x]),P=Do(t.id),_=C.use(el),M=L(()=>Cs(n)&&nt(n).isFeedbackViewOpen$());C.useEffect(()=>Rr(n,t.id),[n,t.id]);const[w]=C.useState(_==null?void 0:_.query),[T,I]=C.useState(_==null?void 0:_.navlink);C.useEffect(()=>{v||(Gt(t.id)?bs.addTiming("chatgpt.web.chatPage.renderNewConversation"):bs.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t.id,v]);const{setTargetedContent:D}=Lr(),O=h==null?void 0:h.includes(Fo),F=A>=2,$=Bo(n),[N,Y]=L(()=>[tt(n),$o(n)]),X=Fs(),{hash:H}=Ms(),fe=qt(),te=Jt(),{isOpen:ye}=Wr();C.useEffect(()=>{H==="#report"&&(Bs(n,Jl,Ne(de({clientThreadId:t.id},X&&(t!=null&&t.sharedConversationId)?{serverThreadId:t.sharedConversationId,isSharedConversation:!0}:{}),{isStaticSharedThread:!1})),fe({hash:""},{replace:!0}))},[t,n,H,X,fe]);const Q=!!j,W=Gt(t.id)&&!F&&(vs(g)||(g==null?void 0:g.kind)===Go.GizmoTest)&&!X&&!te&&_==null&&(!$||Q),xe=W&&!y&&_==null&&(!$||Q||l),ne=N&&!y&&!Q;let he=!1;r&&xe&&Ae(n,"2118136551").get("cms_below_fold_enabled",!1)&&(is=u==null?void 0:u.homepageCmsPageData)!=null&&is.sections&&(he=!0);const re=L(()=>Ws(t)),ee=re.id,ie=Vo.useStore(),ae=L(()=>zo(n)),G=(ls=St(n))==null?void 0:ls.isWorkspaceAccount();C.useEffect(()=>{if(ee===Uo)return ie.setActiveSystemHint($t,ae,{locked:!0,analyticsMetadata:{clientThreadId:t.id}}),()=>{ie.setActiveSystemHint(null,ae,{locked:!1,ifPrevSystemHint:$t,analyticsMetadata:{clientThreadId:t.id}},G)}},[ee,ie,t.id,ae,G]);const q=Dr(t.id,g),z=Fr();C.useEffect(()=>{z||D(void 0)},[t.id,D,z]),C.useEffect(()=>{Ct.setIsConversationScrolledFromTop(!1)},[t.id]),C.useEffect(()=>{const K=new URLSearchParams(window.location.search),De=K.get("src");if(De==="history_search"){K.delete("src");const Ue=K.toString(),gt="".concat(window.location.pathname).concat(Ue?"?".concat(Ue):"").concat(window.location.hash);window.history.replaceState({},document.title,gt)}P&&De==="history_search"&&rt.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:P}},requestBody:{touch:!0},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{const Ue=Yo(n);qo(Ue,j)})},[n,P,j]);const le=C.useCallback(K=>{var Ue,gt;const De=de({conversation:t},e?e(K):K);if((gt=(Ue=De.completionMetadata)==null?void 0:Ue.systemHints)!=null&&gt.some(pt=>Ko(pt))&&$s(n)){const pt=Qo(n);pt&&(De.requestedModelId=pt)}Br(De)},[n,t,e]),be=$r(n),ve=Xo(),me=C.useRef(null);me.current=K=>{W&&!ve&&!$&&Jo(n,"3253785454").get("should_animate_composer",!1)?Ze({className:Pt["composer-slide"],update:()=>le(K)}):le(K)};const Se=C.useCallback(K=>{var De;return(De=me.current)==null?void 0:De.call(me,K)},[me]);C.useEffect(()=>{be.signalTransitionReady()},[be,t.id]),Gr(t.id,Se),Vr(),zr(t.id),Ur(Se),C.useEffect(()=>Zo(()=>Cs(n),()=>{Js(n).logEventWithStatsig("Web: FYP: Eligible Feed User","chatgpt_web_fyp_dau_with_fyp_available")}),[n]),Yr(W);const Ie=qr({clientThreadId:t.id,handleRequestCompletion:Se,prefetchSearchThreadIdPromise:_==null?void 0:_.threadId})&&w==null,Me=C.useRef(null);C.useEffect(()=>{!te&&!b&&(document.title=q!=null?q:"ChatGPT")},[q,te,b,o]);const ge=jt(n,j),Te=xe&&!d&&ge,Ee=Ds(n),oe=St(n),pe=qe(t.id,K=>K==null?void 0:K.sharedProjectConversationOwner),E=ge&&(pe==null?void 0:pe.id)!=null&&pe.id!==(oe==null?void 0:oe.normalizedAccountUserId),V=oe&&!oe.isSelfServeBusiness()&&!oe.isEnterprisey(),B=!a&&!Ee&&!N&&!Te&&!($&&!f)&&!(W&&V)&&vs(g),R=Ys(t.id).isOdysseyMode;en();const we=!1,je=C.useRef(null),Oe=C.useRef(null),Pe=Kr(K=>K.composerHeight),He=!W&&!ye&&!N,_e=!ge,Re=W,Le=C.useCallback(()=>I(void 0),[]),{isSingleLine:ke}=L(()=>tn(n)),{file_uploads:Be,image_uploads:Ke}=Qr(),st=!sn(),ht=W&&we,$e=L(()=>ut(t).displayMode$()==="fullscreen"||Xr(t).isOpen$()),mt=W&&!Q&&!l&&!st?"center":"bottom",{shouldShow:at,isLoading:Mt}=Jr({skip:!W||l}),{shouldShow:as,isLoading:os}=Zr({skip:!W||l}),ns=as&&!os,ia=!ns&&at&&!Mt,[la]=C.useState(ei(n)),kt=ti(n)&&We(n)&&!si()&&!la&&W&&!l&&!$e&&!ye&&!st&&!Q&&!$&&!zs()&&!Mt&&!at&&!os&&!as&&!R;L(()=>{});const{auraAnnouncementBannerState$:ca,setAuraAnnouncementBannerState:rs}=ai(n),da=L(()=>ca()),ua=ss(),ha=L(()=>wt(n)&&ua.visible$()&&Zt());C.useEffect(()=>{kt||rs("not-shown")},[kt,rs]);const ma=oi();function ga(){return s.jsx(ec,{clientThreadId:t.id,scrollContainerRef:Me})}function pa(){return v||Ie?null:xe?Te?s.jsx(_i,{clientThreadId:t.id,gizmoId:j,currentModelId:ee,onRequestCompletion:Se}):d!=null?d:s.jsx(s.Fragment,{children:Q?s.jsx(ji,{conversation:t,gizmoId:j,onRequestCompletion:Se,currentModelId:ee}):s.jsx(yl,{clientThreadId:t.id,currentModelId:ee})}):F||w!=null||M?s.jsx(tc,{conversation:t,isNewScrollEnabled:p,pageLoadSearchQuery:w,footerRootContainerElementRef:Oe,threadRootRef:je,scrollContainerRef:Me,isModalView:m,children:s.jsx(ol,{onRequestCompletion:Se,conversation:t,scrollContainerRef:Me,pageLoadSearchQuery:w,prefetchNavlink:T,clearPrefetchNavlink:Le},t.id)}):null}return s.jsx(ni.Provider,{value:T?"user-query-with-navlink":w?"user-query":null,children:s.jsx(ri,{serverThreadId:P,children:s.jsx(ii,{clientThreadId:t.id,children:s.jsxs(an,{conversation:t,children:[s.jsx(oc,{conversation:t}),O&&s.jsx(Zl,{}),!te&&!b&&s.jsx(li,{children:q!=null&&s.jsx("title",{children:q})}),s.jsx(on.Provider,{value:Se,children:s.jsxs(ci,{children:[s.jsx(di,{conversation:t}),s.jsx("div",{id:"thread",ref:je,className:Z("group/thread @container/thread h-full w-full",p&&Si.threadRoot,Y&&"opacity-0"),inert:Y,children:s.jsxs(Gi,{noKeyboard:!0,clientThreadId:t.id,currentModelConfig:re,className:Z("composer-parent flex flex-col focus-visible:outline-0",!ge&&"overflow-hidden",Te?"min-h-full":"h-full"),children:[!i&&s.jsx(Yl,{transparentBackground:W&&!Te,conversation:t,isEmptyState:xe}),Ge(n,"1909635392")&&s.jsx(ui,{clientThreadId:t.id}),s.jsxs("div",{className:Z("relative basis-auto flex-col",He&&"-mb-(--composer-overlap-px)",He&&(ke?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),ge||Q||!W||l?"grow":"shrink",Te?"grid":"flex",(!W||l)&&"overflow-hidden",W&&b&&!l&&"sm:min-h-[21svh]!",W&&!l&&!ge&&!Q&&Z("flex-col justify-end max-sm:grow max-sm:justify-center",ha?"sm:min-h-[38svh]":"sm:min-h-[42svh]"),S),style:{"--composer-height":Pe?"".concat(Pe,"px"):void 0},children:[ma&&ga(),pa(),$&&N&&!Q&&s.jsx(hi,{showEmptyState:ne})]}),s.jsxs("div",{id:"thread-bottom-container",className:Z("group/thread-bottom-container relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent print:hidden",$e&&"pointer-events-none",!W&&!$e&&"content-fade",ke&&"single-line",E&&"[--content-fade-height:110px]",E&&"[--content-fade-top:-110px]",W&&"min-h-0",xe&&c&&"grow",!B&&!N&&!R&&"mb-4",Q||ge||!W?"":_e&&W&&!l&&"sm:grow",_e&&"flex flex-col",$e&&"z-60",S),ref:Oe,children:[k?s.jsx(mi,{clientThreadId:t.id}):s.jsxs(s.Fragment,{children:[(!W||_e)&&!ye&&s.jsxs(s.Fragment,{children:[s.jsx(Hl,{isGizmoThread:Q,isProjectThread:ge,conversation:t,isNewThread:W,currentModelId:ee,onRequestCompletion:Se,shouldUseUnifiedComposer:_e,layoutMode:mt,isWidgetFullScreen:$e,onlyAllowImageUploads:Ke==="allowed"&&Be!=="allowed",shouldShowDeepResearchDesktopContent:ht}),f&&W&&Ge(n,"537200474")&&s.jsx(gi,{clientThreadId:t.id}),!1]}),Re&&s.jsx(xl,{clientThreadId:t.id,isGizmoThread:Q,isNewThread:W,isProjectThread:ge})]}),B?s.jsx("div",{ref:qs({axis:"height",onChange:({height:K})=>yt(t).marginBottom$.set(K)}),className:Z("text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs [view-transition-name:var(--vt-disclaimer)] md:px-[60px]",da!=="not-shown"&&"opacity-0"),children:s.jsx(pi,{clientThreadId:t.id})}):null,xe&&c]}),ns&&s.jsx(fi,{}),ia&&s.jsx(xi,{clientThreadId:t.id}),s.jsx(Vt,{children:null}),s.jsx(Vt,{children:kt&&s.jsx(bi,{shouldShowDisclaimer:B,clientThreadId:t.id})})]})}),he&&s.jsx(yi,{sections:u.homepageCmsPageData.sections}),s.jsx(wi,{}),s.jsx(Ci,{conversationId:t.id}),s.jsx(vi,{}),s.jsx(Ti,{})]})})]})})})})},ra=Is.memo(sc);function ac({conversation:t}){return Ai(t),Pi(),Mi(),ki(t),Ni(),Ii(t),null}const oc=Is.memo(ac),nc=t=>{"use forget";const e=ue.c(11),{cardId:a}=t,i=ce();let d;e[0]!==a||e[1]!==i?(d=()=>Hi(i).find(r=>r.id===a),e[0]=a,e[1]=i,e[2]=d):d=e[2];const c=L(d);if(!c)return null;const m=c.conversation_id?c.conversation_id:void 0;if(!m)return null;let o;e[3]!==m||e[4]!==i?(o=()=>s.jsx("div",{className:"flex h-full w-full flex-col",children:s.jsx(ra,{conversation:_t(i,m),hideHeader:!0,hideDisclaimer:!0,isModalView:!0})}),e[3]=m,e[4]=i,e[5]=o):o=e[5];const h=o;let n;e[6]!==h?(n=h(),e[6]=h,e[7]=n):n=e[7];let u;return e[8]!==m||e[9]!==n?(u=s.jsx(Zs,{clientThreadId:m,threadContent:n}),e[8]=m,e[9]=n,e[10]=u):u=e[10],u},rc=()=>{"use forget";const t=ue.c(14),e=ce();let a;t[0]!==e?(a=()=>Ri(e),t[0]=e,t[1]=a):a=t[1];const i=L(a);let d,c;if(t[2]!==i||t[3]!==e?(d=()=>{Js(e).logEventWithStatsig("(Web) FYP Feedback Conversation Shown","chatgpt_web_fyp_feedback_conversation_shown",{feedback_conversation_id:i})},c=[e,i],t[2]=i,t[3]=e,t[4]=d,t[5]=c):(d=t[4],c=t[5]),C.useEffect(d,c),!i)return null;let m;t[6]!==i||t[7]!==e?(m=()=>s.jsx("div",{className:"flex h-full min-h-0 w-full flex-1 flex-col overflow-hidden",children:s.jsx(ra,{conversation:_t(e,i),hideHeader:!0,hideDisclaimer:!0,isModalView:!0,withCustomCompletionParams:ic})}),t[6]=i,t[7]=e,t[8]=m):m=t[8];const o=m;let h;t[9]!==o?(h=o(),t[9]=o,t[10]=h):h=t[10];let n;return t[11]!==i||t[12]!==h?(n=s.jsx(Zs,{clientThreadId:i,shouldScrollToBottom:!0,threadContent:h}),t[11]=i,t[12]=h,t[13]=n):n=t[13],n};function ic(t){var e;return Ne(de({},t),{extraStreamParams:Ne(de({},t.extraStreamParams),{pulseCompletionParams:Ne(de({},(e=t.extraStreamParams)==null?void 0:e.pulseCompletionParams),{type:"feedback-conversation"})})})}function wc(t){"use forget";const e=ue.c(42),{type:a,setWidth:i}=t,d=a===void 0?"sidebar":a,c=ce();let m;e[0]!==c?(m=()=>nt(c).viewState$(),e[0]=c,e[1]=m):m=e[1];const o=L(m),{closeView:h}=Li(),n=ze(),u=C.useRef(null),{goBack:r,canGoBack:S}=Wi();let b;e[2]!==c||e[3]!==r?(b=()=>{nt(c).openFeedbackView({type:Bi.Preview}),r()},e[2]=c,e[3]=r,e[4]=b):b=e[4];const l=b,p=cc;let f;e[5]!==h||e[6]!==c||e[7]!==(o==null?void 0:o.type)?(f=()=>{(o==null?void 0:o.type)===Je.Card?h():(o==null?void 0:o.type)===Je.Feedback&&nt(c).closeFeedbackView()},e[5]=h,e[6]=c,e[7]=o==null?void 0:o.type,e[8]=f):f=e[8];const x=f;let g,v;e[9]!==i?(g=()=>Ft(()=>p(),O=>i==null?void 0:i(O),{fireImmediately:!0}),v=[i],e[9]=i,e[10]=g,e[11]=v):(g=e[10],v=e[11]),C.useEffect(g,v);let y;e[12]!==(o==null?void 0:o.cardId)||e[13]!==(o==null?void 0:o.type)?(y=(o==null?void 0:o.type)===Je.Card?s.jsx(nc,{cardId:o==null?void 0:o.cardId}):(o==null?void 0:o.type)===Je.Feedback?s.jsx(rc,{}):null,e[12]=o==null?void 0:o.cardId,e[13]=o==null?void 0:o.type,e[14]=y):y=e[14];const A=y;let k;e[15]!==o?(k=(o==null?void 0:o.type)===Je.Feedback?s.jsx(Di,{feedbackState:o.feedbackState,className:"backdrop-blur-xl backdrop-filter"}):(o==null?void 0:o.type)===Je.Card?s.jsx(Fi,{className:"backdrop-blur-xl backdrop-filter"}):null,e[15]=o,e[16]=k):k=e[16];const j=k;let P;e[17]!==S||e[18]!==l?(P=S&&s.jsx(ln,{onClick:l,className:""}),e[17]=S,e[18]=l,e[19]=P):P=e[19];let _;e[20]!==x?(_=s.jsx(cn,{className:"backdrop-blur-xl backdrop-filter",onClick:x}),e[20]=x,e[21]=_):_=e[21];let M;e[22]!==j||e[23]!==_?(M=s.jsxs("div",{className:"ms-auto flex items-center gap-1",children:[j,_]}),e[22]=j,e[23]=_,e[24]=M):M=e[24];let w;e[25]!==M||e[26]!==P?(w=s.jsxs("div",{className:"absolute inset-x-0 top-0 z-50 flex items-center p-2",children:[P,M]}),e[25]=M,e[26]=P,e[27]=w):w=e[27];let T;e[28]!==A?(T=s.jsx("div",{className:"flex-1 overflow-auto",children:A}),e[28]=A,e[29]=T):T=e[29];let I;e[30]!==w||e[31]!==T?(I=s.jsxs("div",{className:"relative flex h-full flex-col",children:[w,T]}),e[30]=w,e[31]=T,e[32]=I):I=e[32];const D=I;switch(d){case"sidebar":{let O;e[33]!==n?(O=n.formatMessage({id:"pulse.sidebar.title",defaultMessage:"Pulse"}),e[33]=n,e[34]=O):O=e[34];let F;return e[35]!==D||e[36]!==x||e[37]!==O?(F=s.jsx($i,{handleClose:x,renderLeading:lc,ariaLabel:O,scrollMode:"content-only",children:D},"pulse-sidebar"),e[35]=D,e[36]=x,e[37]=O,e[38]=F):F=e[38],F}case"modal":{let O;return e[39]!==D||e[40]!==x?(O=s.jsx(dn,{testId:"modal-chat-screen-pulse-flyout",className:"relative max-w-[500px]",size:"custom",type:"success",position:"end",noPadding:!0,contentRef:u,visuallyHiddenHeader:!0,showCloseButton:!0,isOpen:!0,onClose:x,children:D},"pulse-modal"),e[39]=D,e[40]=x,e[41]=O):O=e[41],O}}}function lc(){return null}function cc(){return un()?"700px":hn()?"500px":(mn(),"400px")}export{ta as A,Gl as C,ra as M,wc as P,na as a,Xl as b};
//# sourceMappingURL=j723eutw6lfomm01.js.map
