import{h as D,r as T,j as s,M as a,c as Z,y as ee}from"./mw35uwhq4g8r9eam.js";import{cI as Q,eO as se,ml as te,u as ae,J as ie,fG as oe,aA as le,ik as ne,dz as re,e7 as ce,cF as y,er as de}from"./d0xa318sl7ywi0za.js";import{W as me}from"./msmm4s2uspal1mht.js";import{ba as ue,bd as n,E as B,A as xe}from"./g2euln7v5pbm31qa.js";import{A as Y,C as fe,B as pe}from"./ldtpmsnzn9ens47o.js";import{c as J,u as ge,a as X}from"./sbrp17m0bwny70wh.js";import{I as he}from"./h38m9m9rf2db1qpt.js";import{u as we,o as je,T as ve,g as be}from"./fiw8mxjjj4i8ca6h.js";import{u as Ne}from"./nhruzszvguyii6tg.js";import"./dtmprrbw2fxa7u08.js";import"./j6o92bx1q4qhetyv.js";import"./ojmli062couj7r3v.js";import"./lv7ytt0l14b17ows.js";import"./cvl54rj7bbx1877e.js";import"./i8gmt89kig8ue44v.js";import"./dejzmw8nrz6tr491.js";import"./baz4b8nlf8t2lb95.js";import"./e5bg4yzr7nht9sxr.js";import"./hdw58d7g4tx8n6s4.js";import"./kubdgxu3crk3gqem.js";import"./kne35xckmmfq3xx6.js";import"./c340ncgh31fwqkpk.js";import"./of0vtq1gcmd3mc3z.js";import"./m4z0737cb20mwzwc.js";import"./ddina39kz3r81pp7.js";import"./ksb30nvrqfrocrgu.js";import"./kx64af29hscb23w7.js";import"./w3hi9hzc7twqpn11.js";import"./mozvd7p01wv3j6u2.js";import"./ohau9tqj1fpdibg0.js";import"./iknugp00locgtve5.js";import"./h1em0bjkpkjv8ykw.js";import"./cv4afpu20gjb9dll.js";import"./h4yh1661qhhbu5v5.js";import"./hu1bt0oauegdhua6.js";import"./k421hn58buy5pa4i.js";function Pe({isSaving:i,initialScope:e,onChange:o}){const t=D(),[r,l]=T.useState(e);return s.jsx("section",{className:"flex flex-col gap-2",children:s.jsxs("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-sm font-medium",children:s.jsx(a,{id:"wham.codeReviewPage.autoReviewMyPRs.titleV2",defaultMessage:"Personal auto review preferences"})}),s.jsx("p",{className:"text-token-text-secondary text-xs",children:s.jsx(a,{id:"wham.codeReviewPage.autoReviewMyPRs.descriptionV2",defaultMessage:"All your pull requests in a Codex enabled repository will be automatically reviewed."})})]}),s.jsx("div",{className:"flex h-full items-center pe-2 sm:w-auto",children:s.jsx(Q,{"aria-label":t.formatMessage({id:"wham.codeReviewPage.personalPreferences.toggleRepoCodeReviewAria",defaultMessage:"Toggle code review for personal preferences"}),checked:r==="always",disabled:i,onCheckedChange:m=>{const d=m?"always":"repo_default";l(d),o(d)}})})]})})}function Re(){return s.jsxs("section",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:s.jsx("div",{className:"flex w-full flex-col gap-2",children:s.jsx(ue,{type:"info",className:"bg-token-bg-tertiary! rounded-2xl!",icon:s.jsx(se,{className:"icon-md text-token-text-tertiary"}),isElevated:!1,content:s.jsx("p",{className:"text-token-text-secondary text-sm leading-tight font-normal",children:s.jsx(a,{id:"wham.codeReviewPage.infoBannerV2.bannertext",defaultMessage:"When code review is turned on, Codex automatically suggests improvements to the pull request, or react with üëç.{br}Mention @<b>codex</b> in your pull request to start a task or manually request a review.",values:{br:s.jsx("br",{}),b:i=>s.jsx("span",{className:"font-medium",children:i})}})})})})}),s.jsx("div",{className:"bg-token-border-default h-px"})]})}function ye(i,e){const o=te("installations/select_target");if(i.length>1)return o;const t=i[0];return e?t.account_type==="user"?"https://github.com/settings/installations/".concat(t.id,"/permissions/update"):"https://github.com/organizations/".concat(t.account_login,"/settings/installations/").concat(t.id,"/permissions/update"):"https://github.com/settings/installations/".concat(t.id)}function Ce(){const i=ae(),e=ie(i,"2782825951"),{data:o}=Y(),t=T.useMemo(()=>{var l;return(l=o==null?void 0:o.installations_without_events)!=null?l:[]},[o]);if(t.length===0)return null;const r=ye(t,e);return s.jsx("div",{className:"pt-2",children:s.jsxs("div",{className:"bg-token-bg-status-warning outline-token-border-status-warning flex items-start justify-start gap-3 self-stretch rounded-2xl p-4 outline outline-offset-[-1px]",children:[s.jsx("div",{className:"text-token-text-status-warning relative h-5 w-5",children:s.jsx(oe,{className:"icon-md"})}),s.jsxs("div",{className:"inline-flex flex-1 flex-col items-start justify-start gap-1",children:[s.jsx("div",{className:"text-token-text-status-warning text-sm leading-tight font-medium",children:s.jsx(a,{id:"wham.codeReviewPage.permissionsBanner.title",defaultMessage:"Action required"})}),s.jsx("div",{className:"justify-start self-stretch",children:s.jsx("p",{className:"text-token-text-status-warning text-sm leading-tight font-normal",children:t.length>1?s.jsx(a,{id:"wham.codeReviewPage.permissionsBanner.description.multiple",defaultMessage:"Some repos require updated GitHub permissions for code reviews to work"}):s.jsx(a,{id:"wham.codeReviewPage.permissionsBanner.description.single",defaultMessage:"Update your GitHub permissions to enable code reviews for <u>{installationName}</u>",values:{u:l=>s.jsx("span",{className:"underline",children:l}),installationName:t[0].account_login}})})})]}),s.jsx("div",{className:"inline-flex flex-col items-start justify-center gap-2 self-stretch",children:s.jsx(le,{color:"secondary",icon:ne,onClick:()=>{window.open(r,"_blank")},children:s.jsx("div",{className:"text-token-interactive-label-secondary-default justify-start text-sm leading-tight",children:s.jsx(a,{id:"wham.codeReviewPage.permissionsBanner.updateButton",defaultMessage:"Update"})})})})]})})}function Ae({isSaving:i,creditUseEnabled:e,onChange:o}){const t=D(),r=J(),[l,m]=T.useState(e);return s.jsx("section",{className:"flex flex-col gap-2",children:s.jsxs("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-sm font-medium",children:s.jsx(a,{id:"wham.codeReviewPage.creditPreferences.title",defaultMessage:"Enable credits use"})}),s.jsxs("p",{className:"text-token-text-secondary text-xs",children:[s.jsx(a,{id:"wham.codeReviewPage.creditPreferences.description",defaultMessage:"Allow credits to be consumed for code reviews after rate limits."}),r&&s.jsx(a,{id:"wham.codeReviewPage.creditPreferences.proDescription",defaultMessage:"{space}Also applies to 'Review Everyone' you've enabled.",values:{space:" "}})]})]}),s.jsx("div",{className:"flex h-full items-center pe-2 sm:w-auto",children:s.jsx(Q,{"aria-label":t.formatMessage({id:"wham.codeReviewPage.toggleCreditUseAria",defaultMessage:"Toggle code review for credit use preferences"}),checked:l,disabled:i,onCheckedChange:d=>{m(d),o(d)}})})]})})}const f=["w-[50%] sm:w-[40%]","w-[30%] sm:w-[35%]","w-[20%] sm:w-[25%] lg:w-[30%]"];function Me(i){"use forget";const e=Z.c(48),{disabledInstallations:o}=i;let t;e[0]!==o?(t=o===void 0?[]:o,e[0]=o,e[1]=t):t=e[1];const r=t,l=D(),{queryInput:m,setQueryInput:d,filteredSettings:u,isLoading:C,isFetching:c,fetchNextPage:L,hasNextPage:U,isFetchingNextPage:H,shouldShowInfiniteScrollRow:F,shouldShowMaxSuggestionsNote:G,updateCodeReviewRepositories:V,isLegacyEnterprisey:W}=we(),p=ge(),q=X(),O=J(),x=re(),$=ce();let A;e[2]!==$?(A=je($),e[2]=$,e[3]=A):A=e[3];const z=A;let M;e[4]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx("p",{className:"text-sm font-medium",children:s.jsx(a,{id:"wham.codeReviewPage.teamAutomations.repoPreferences",defaultMessage:"Repository preferences"})}),e[4]=M):M=e[4];let g;e[5]!==p?(g=s.jsxs("div",{className:"hidden flex-col gap-2 sm:flex",children:[M,s.jsx("p",{className:"text-token-text-secondary text-xs",children:p?s.jsx(a,{id:"wham.codeReviewPage.teamAutomations.repoPreferences.description.team",defaultMessage:"Configure code review for all contributors to a repository."}):s.jsx(a,{id:"wham.codeReviewPage.teamAutomations.repoPreferences.description.individual",defaultMessage:"Configure code review preferences for each repository."})})]}),e[5]=p,e[6]=g):g=e[6];let h;e[7]!==l?(h=l.formatMessage({id:"wham.codeReviewPage.teamAutomations.searchRepoAria",defaultMessage:"Search repos or enter a GitHub org/repo"}),e[7]=l,e[8]=h):h=e[8];let w;e[9]!==l?(w=l.formatMessage({id:"wham.codeReviewPage.teamAutomations.searchRepoPlaceholder",defaultMessage:"Search repos or enter a GitHub org/repo"}),e[9]=l,e[10]=w):w=e[10];let j;e[11]!==d?(j=E=>d(E.target.value),e[11]=d,e[12]=j):j=e[12];let v;e[13]!==m||e[14]!==h||e[15]!==w||e[16]!==j?(v=s.jsx("div",{className:"flex items-center justify-between gap-4",children:s.jsx("div",{className:"w-84",children:s.jsx(xe,{name:"team-automations-search",containerInputClassName:"w-full",className:"text-token-text-primary flex h-8 w-full items-center rounded-md!",ariaLabel:h,placeholder:w,type:"search",color:"search",value:m,onChange:j})})}),e[13]=m,e[14]=h,e[15]=w,e[16]=j,e[17]=v):v=e[17];let S;e[18]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(n.HeaderCell,{textAlign:"left",className:f[0],children:s.jsx(a,{id:"wham.codeReviewPage.teamAutomations.table.repository",defaultMessage:"Repository"})}),e[18]=S):S=e[18];let _;e[19]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(n.HeaderCell,{textAlign:"left",className:y(f[1],"ps-3"),children:s.jsx(a,{id:"wham.codeReviewPage.teamAutomations.table.codeReview",defaultMessage:"Auto code review"})}),e[19]=_):_=e[19];let k;e[20]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsxs(n.Header,{children:[S,_,s.jsx(n.HeaderCell,{textAlign:"left",className:y(f[2],"table-cell"),children:s.jsx(a,{id:"wham.codeReviewPage.teamAutomations.table.lastUpdated",defaultMessage:"Last updated by"})})]}),e[20]=k):k=e[20];let b;e[21]!==z||e[22]!==r||e[23]!==u||e[24]!==c||e[25]!==W||e[26]!==C||e[27]!==q||e[28]!==O||e[29]!==p||e[30]!==V||e[31]!==(x==null?void 0:x.email)?(b=C?Array.from({length:6}).map(Se):u.length===0&&!c?s.jsx(n.Row,{children:s.jsx(n.Cell,{colSpan:3,className:"text-token-text-tertiary",textAlign:"left",children:s.jsx(a,{id:"wham.codeReviewPage.teamAutomations.noRepositories",defaultMessage:"No repositories"})})}):u.map(E=>{var K;return s.jsx(ve,{repo:E,isTeamOrEnterprise:p,isLegacyEnterprisey:W,isPlus:!!q,isPro:!!O,disabledInstallations:r,updateCodeReviewRepositories:V,currentAccountOwnerId:z,currentUserEmail:(K=x==null?void 0:x.email)!=null?K:null,columnWidths:f,layout:"table"},be(E))}),e[21]=z,e[22]=r,e[23]=u,e[24]=c,e[25]=W,e[26]=C,e[27]=q,e[28]=O,e[29]=p,e[30]=V,e[31]=x==null?void 0:x.email,e[32]=b):b=e[32];let N;e[33]!==G?(N=G&&s.jsx(n.Row,{children:s.jsx(n.Cell,{colSpan:4,className:"!border-b-0!",textAlign:"left",children:s.jsx("p",{className:"text-token-text-secondary text-xs",children:s.jsx(a,{id:"wham.codeReviewPage.teamAutomations.maxSuggestionsNote",defaultMessage:"Displaying maximum {count} suggestions",values:{count:fe}})})})}),e[33]=G,e[34]=N):N=e[34];let P;e[35]!==L||e[36]!==U||e[37]!==H||e[38]!==F?(P=F&&s.jsx(n.Row,{children:s.jsx(n.Cell,{colSpan:3,className:"!border-b-0!",textAlign:"left",children:s.jsx(he,{isFetchingNextPage:!!H,hasNextPage:!!U,fetchNextPage:()=>L(),bgColor:"bg-transparent"})})}),e[35]=L,e[36]=U,e[37]=H,e[38]=F,e[39]=P):P=e[39];let R;e[40]!==b||e[41]!==N||e[42]!==P?(R=s.jsx("div",{children:s.jsxs(n.Root,{size:"compact",disableScroll:!0,fixed:!0,children:[k,s.jsxs(n.Body,{children:[b,N,P]})]})}),e[40]=b,e[41]=N,e[42]=P,e[43]=R):R=e[43];let I;return e[44]!==R||e[45]!==g||e[46]!==v?(I=s.jsxs("section",{className:"flex flex-col gap-4",children:[g,v,R]}),e[44]=R,e[45]=g,e[46]=v,e[47]=I):I=e[47],I}function Se(i,e){return s.jsxs(n.Row,{children:[s.jsx(n.Cell,{className:y(f[0],"min-w-0"),children:s.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[s.jsx(B,{className:"h-4 w-4 rounded"}),s.jsx(B,{className:"h-4 w-48"})]})}),s.jsx(n.Cell,{textAlign:"left",className:y(f[1],"min-w-0"),children:s.jsx(B,{className:"h-6 w-40 rounded-md"})}),s.jsx(n.Cell,{textAlign:"left",className:y(f[2],"min-w-0"),children:s.jsx(B,{className:"h-4 w-32"})})]},"skeleton-".concat(e))}function _e(){const{data:i,isLoading:e,isError:o}=pe(),{mutate:t,isPending:r}=Ne({showToast:!1}),l=J(),m=X(),d=e||o||!i,{data:u}=Y(),C=T.useMemo(()=>{var c;return(c=u==null?void 0:u.installations_without_events)!=null?c:[]},[u]);return s.jsx(me,{topPadding:!0,children:s.jsxs("div",{className:"mx-auto flex h-full max-w-screen-xl flex-1 flex-col gap-2 ps-4 pe-12",children:[s.jsx("div",{className:y("border-token-border-heavy flex items-center justify-between border-b"),children:s.jsx("p",{className:"flex items-center gap-2 py-2 align-middle text-xl leading-7 font-medium",children:s.jsx(a,{id:"wham.codeReviewPage.header",defaultMessage:"Code review"})})}),s.jsx("p",{className:"text-token-text-secondary w-max text-sm",children:s.jsx(a,{id:"wham.codeReviewPage.infoBannerV2.subtitle",defaultMessage:"Set up Codex to automatically review pull requests"})}),s.jsx(Ce,{}),s.jsx(Re,{}),d?s.jsx("div",{className:"flex items-center justify-center pt-2",children:s.jsx(de,{className:"icon me-1.5"})}):s.jsxs("div",{className:"flex flex-col gap-4 pt-2 pb-4",children:[s.jsx(Pe,{isSaving:r,initialScope:i.code_review_preference,onChange:c=>{t({codeReviewPreference:c})}}),s.jsx("div",{className:"bg-token-border-default h-px"}),(m||l)&&s.jsxs(s.Fragment,{children:[s.jsx(Ae,{isSaving:r,creditUseEnabled:i.allow_credits_for_code_reviews,onChange:c=>{t({allowCreditsForCodeReviews:c})}}),s.jsx("div",{className:"bg-token-border-default h-px"})]}),s.jsx(Me,{disabledInstallations:C.map(c=>c.account_login)})]})]})})}const xs=()=>[{title:"Codex"}],fs=ee(function(){return s.jsx(_e,{})});export{fs as default,xs as meta};
//# sourceMappingURL=gwhkx3wmshc2zhr3.js.map
