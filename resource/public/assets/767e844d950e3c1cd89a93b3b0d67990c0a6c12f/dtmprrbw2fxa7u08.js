const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/iqdbbaipf1hfhx9g.js","assets/mw35uwhq4g8r9eam.js","assets/d0xa318sl7ywi0za.js","assets/root-kavs8piy.css","assets/g2euln7v5pbm31qa.js","assets/conversation-small-lq38g8zw.css","assets/fs27qa64x6cw1tcw.js","assets/bv7fa3spv54abhck.js","assets/l8kabf2thbcyl1cx.js","assets/kzwk89sl7ldvvuvg.js","assets/eea2lld77g0grm9n.js","assets/lqcwdtse4p4c65nb.js","assets/ntqb52hmv21w1s1q.js"])))=>i.map(i=>d[i]);
var jt=Object.defineProperty,Tt=Object.defineProperties;var Et=Object.getOwnPropertyDescriptors;var dt=Object.getOwnPropertySymbols;var Bt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var ut=(t,e,s)=>e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,x=(t,e)=>{for(var s in e||(e={}))Bt.call(e,s)&&ut(t,s,e[s]);if(dt)for(var s of dt(e))Rt.call(e,s)&&ut(t,s,e[s]);return t},ae=(t,e)=>Tt(t,Et(e));import{c as Be,j as o,h as ie,r as f,M as L,e as be,_ as _e,a as Ut}from"./mw35uwhq4g8r9eam.js";import{bZ as Ft,b_ as Vt,w as zt,z as Gt,A as qt,br as ve,bs as we,j_ as je,j$ as Ht,k0 as $t,k1 as Yt,k2 as Qt,k3 as bt,k4 as _t,k5 as Le,k6 as Jt,k7 as Kt,k8 as Xt,o as Zt,k9 as eo,e1 as pt,ep as to,ka as oo,kb as so,kc as ao,kd as no,m as io,hN as ro,ke as lo,kf as co,kg as uo,kh as po,ki as mo,kj as go,kk as fo,cc as ho,kl as ko,km as bo,kn as _o,ko as Mo,kp as xo,kq as yo,kr as So,ks as vo,kt as wo,ku as Co,kv as Oo,dm as No,kw as Do,kx as Ao,ky as Po,kz as Lo,kA as Io,kB as Wo,kC as jo,kD as To,kE as Eo,kF as Bo,kG as Ro,kH as Uo,kI as Fo,kJ as Vo,kK as zo,kL as Go,kM as qo,kN as Ho,kO as $o,kP as Yo,kQ as Qo,kR as Jo,kS as Ko,kT as Xo,kU as Zo,iI as es,P as mt}from"./g2euln7v5pbm31qa.js";import{P as ts}from"./j6o92bx1q4qhetyv.js";import{b as Mt,d as os}from"./ojmli062couj7r3v.js";import{u as ge,e7 as ss,dh as me,aL as Te,au as Ee,J as Ce,eS as xt,dy as as,al as ns,cF as is,hp as rs,d$ as ls,aP as ke,aA as Oe,aB as re,di as Ne,dz as yt,_ as ne,e2 as St,e3 as vt,F as cs,a7 as gt,R as ds,dn as Y,eT as De,mI as us,dr as ps,a4 as ms,be as Me,ak as gs,qh as fs,qb as hs,M as ks,dm as bs,et as _s,bC as Ms,pY as xs,jL as ys,sn as Ss,so as vs,dW as Ie,cd as ft,sp as We,jM as ws}from"./d0xa318sl7ywi0za.js";import{a as Cs}from"./cvl54rj7bbx1877e.js";import wt from"./i8gmt89kig8ue44v.js";const pe=be({title:{id:"workspaceDiscovery.renamePromptModal.title",defaultMessage:"Set a workspace display name"},laterCta:{id:"workspaceDiscovery.renamePromptModal.laterCta",defaultMessage:"Update later"},save:{id:"workspaceDiscovery.renamePromptModal.save",defaultMessage:"Update"},checkboxLabel:{id:"workspaceDiscovery.renamePromptModal.checkboxLabel",defaultMessage:"Use workspace name (recommended)"},body:{id:"workspaceDiscovery.renamePromptModal.body.1",defaultMessage:"This is what teammates on your domain will see when they request to join your workspace. <learnMoreLink>Open settings</learnMoreLink>.{br}{br}Current: <b>{currentName}</b>"},clearToWorkspaceNameAria:{id:"workspaceIdentity.clearToWorkspaceNameAria",defaultMessage:"Clear and use workspace name"}}),ht={dismissedAt:0,shownCount:0},Ct=t=>{if(!t)return ht;try{const e=JSON.parse(t);return{dismissedAt:Number(e.dismissedAt)||0,shownCount:Number(e.shownCount)||0}}catch(e){return ht}},Os=5,Ot=()=>{"use forget";var N;const t=Be.c(8),e=ge(),s=ss();let a;t[0]!==s?(a=s==null?void 0:s.getWorkspaceId(),t[0]=s,t[1]=a):a=t[1];const i=a,l=me(As),r=l!=null?Ft(l.role)||Vt(l.role):void 0,u=Ct(Te.getItem(Ee.WorkspaceDiscoveryRenamePromptInfo)),p=Date.now()>u.dismissedAt+864e5,n=u.shownCount<Os,_=Ce(e,"1053331630"),c=Ce(e,"3592108663"),k=r&&_&&c&&p&&n&&!!i,{data:d,isLoading:b}=xt(k?i:void 0),z=!!(d!=null&&d.support_workspace_discovery),y=!!(d!=null&&d.workspace_discoverable),h=(d==null?void 0:d.use_workspace_name_for_discovery)===!0,C=(h?"":(N=d==null?void 0:d.public_display_name)!=null?N:"").includes("Workspace #");if(!(z&&k&&!b&&y&&!h&&C)){let v;return t[2]!==b?(v={isOpen:!1,isLoading:b},t[2]=b,t[3]=v):v=t[3],v}let S;t[4]!==e?(S=as(e,"309365540").get("enable",!1),t[4]=e,t[5]=S):S=t[5];const G=S;let O;return t[6]!==G?(O={isOpen:G,isLoading:!1},t[6]=G,t[7]=O):O=t[7],O},Ns=t=>{"use forget";const e=Be.c(6),{onClose:s}=t,a=ge();let i;if(e[0]!==a){const n=ns(a);i=n==null?void 0:n.getWorkspaceId(),e[0]=a,e[1]=i}else i=e[1];const l=i,{data:r,isPending:u}=xt(l);if(!l||u||!r)return null;let p;return e[2]!==s||e[3]!==r||e[4]!==l?(p=o.jsx(Ds,{onClose:s,workspaceId:l,settings:r}),e[2]=s,e[3]=r,e[4]=l,e[5]=p):p=e[5],p},Ds=t=>{"use forget";var fe;const e=Be.c(68),{onClose:s,workspaceId:a,settings:i}=t,l=ie(),r=ge();let u;e[0]!==r||e[1]!==s?(u=()=>{ke(r,"chatgpt_workspace_discovery_rename_prompt_modal_closed"),s()},e[0]=r,e[1]=s,e[2]=u):u=e[2];const p=u;let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=Ct(Te.getItem(Ee.WorkspaceDiscoveryRenamePromptInfo)),e[3]=n):n=e[3];const _=n,{mutateAsync:c,isPending:k}=zt(a),d=Mt(),b=!!(i!=null&&i.workspace_discoverable),z=(i==null?void 0:i.use_workspace_name_for_discovery)===!0,y=z?"":(fe=i==null?void 0:i.public_display_name)!=null?fe:"",[h,xe]=f.useState(!0),[C,le]=f.useState(""),[S,G]=f.useState(!1);let O;e[4]!==h||e[5]!==y||e[6]!==C||e[7]!==S||e[8]!==k||e[9]!==z?(O=!h&&!k&&!z&&(S?C.trim()!=="":y.trim()!==""),e[4]=h,e[5]=y,e[6]=C,e[7]=S,e[8]=k,e[9]=z,e[10]=O):O=e[10];const N=O,v=h?d:S?C:y;let m;e[11]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{Te.setItem(Ee.WorkspaceDiscoveryRenamePromptInfo,JSON.stringify({dismissedAt:Date.now(),shownCount:_.shownCount+1}))},e[11]=m):m=e[11];const Q=m;let M;e[12]!==r?(M=V=>{xe(V),ke(r,"chatgpt_workspace_discovery_rename_prompt_modal_checkbox_toggled",V?1:0)},e[12]=r,e[13]=M):M=e[13];const P=M;let J;e[14]!==r||e[15]!==p?(J=()=>{ke(r,"chatgpt_workspace_discovery_rename_prompt_modal_dismiss_clicked"),Q(),p()},e[14]=r,e[15]=p,e[16]=J):J=e[16];const w=J;let ce;e[17]!==h||e[18]!==r||e[19]!==C||e[20]!==p||e[21]!==k||e[22]!==c||e[23]!==b?(ce=async()=>{k||(ke(r,"chatgpt_workspace_discovery_rename_prompt_modal_save_clicked"),await c({value:b,public_display_name:h?null:C.trim(),use_workspace_name_for_discovery:h,action:"name"}),p())},e[17]=h,e[18]=r,e[19]=C,e[20]=p,e[21]=k,e[22]=c,e[23]=b,e[24]=ce):ce=e[24];const de=ce;let K,q;e[25]!==r?(K=()=>{ke(r,"chatgpt_workspace_discovery_rename_prompt_modal_shown")},q=[r],e[25]=r,e[26]=K,e[27]=q):(K=e[26],q=e[27]),f.useEffect(K,q);let X;e[28]===Symbol.for("react.memo_cache_sentinel")?(X=o.jsx(L,x({},pe.laterCta)),e[28]=X):X=e[28];let H;e[29]!==w?(H=o.jsx(Oe,{color:"secondary",onClick:w,children:X}),e[29]=w,e[30]=H):H=e[30];let W;e[31]===Symbol.for("react.memo_cache_sentinel")?(W=o.jsx(L,x({},pe.save)),e[31]=W):W=e[31];let $;e[32]!==de||e[33]!==k?($=o.jsx(Oe,{onClick:de,loading:k,children:W}),e[32]=de,e[33]=k,e[34]=$):$=e[34];let D;e[35]!==H||e[36]!==$?(D=o.jsxs("div",{className:"mt-8 flex w-full justify-end gap-3",children:[H,$]}),e[35]=H,e[36]=$,e[37]=D):D=e[37];let Z;e[38]===Symbol.for("react.memo_cache_sentinel")?(Z=o.jsx("div",{className:"mb-4 w-full text-xl",children:o.jsx(L,x({},pe.title))}),e[38]=Z):Z=e[38];let ee;e[39]===Symbol.for("react.memo_cache_sentinel")?(ee=o.jsx("br",{}),e[39]=ee):ee=e[39];let j;e[40]!==y?(j=o.jsx("div",{className:"text-token-text-secondary",children:o.jsx(L,ae(x({},pe.body),{values:{b:Ps,br:ee,currentName:y,learnMoreLink:Ls}}))}),e[40]=y,e[41]=j):j=e[41];let T;e[42]!==P?(T=V=>P(V.currentTarget.checked),e[42]=P,e[43]=T):T=e[43];let E;e[44]!==d?(E=o.jsx("span",{className:"text-sm",children:o.jsx(L,ae(x({},pe.checkboxLabel),{values:{workspaceName:d}}))}),e[44]=d,e[45]=E):E=e[45];let B;e[46]!==h||e[47]!==T||e[48]!==E?(B=o.jsx("div",{className:"mt-6 mb-3",children:o.jsx(Gt,{id:"use-workspace-name-for-discovery",checked:h,onChange:T,label:E})}),e[46]=h,e[47]=T,e[48]=E,e[49]=B):B=e[49];const ue=h&&"text-token-text-tertiary";let R;e[50]!==ue?(R=is(ue),e[50]=ue,e[51]=R):R=e[51];let te;e[52]===Symbol.for("react.memo_cache_sentinel")?(te=V=>{le(V.target.value),G(!0)},e[52]=te):te=e[52];let U;e[53]!==l||e[54]!==N?(U=N?o.jsx("button",{type:"button",className:"text-token-text-tertiary hover:text-token-text-secondary absolute end-0 top-1/2 -translate-y-1/2 pe-1","aria-label":l.formatMessage(pe.clearToWorkspaceNameAria),onClick:()=>{le("")},children:o.jsx(rs,{className:"icon-sm"})}):null,e[53]=l,e[54]=N,e[55]=U):U=e[55];let F;e[56]!==h||e[57]!==y||e[58]!==v||e[59]!==R||e[60]!==U?(F=o.jsx(qt,{name:"public_display_name",ariaLabel:!1,disabled:h,inputClassName:R,placeholder:y,maxLength:ts,value:v,onChange:te,insideContainerChildren:U}),e[56]=h,e[57]=y,e[58]=v,e[59]=R,e[60]=U,e[61]=F):F=e[61];let oe;return e[62]!==w||e[63]!==D||e[64]!==j||e[65]!==B||e[66]!==F?(oe=o.jsxs(re,{isOpen:!0,onClose:w,contentClassName:"p-6",shouldIgnoreClickOutside:!0,size:"custom",className:"max-w-lg",testId:"modal-workspace-discovery-rename-prompt",footerContent:D,children:[Z,j,B,F]}),e[62]=w,e[63]=D,e[64]=j,e[65]=B,e[66]=F,e[67]=oe):oe=e[67],oe};function As(t){return t.currentWorkspace}function Ps(t){return o.jsx("b",{children:t})}function Ls(t){return o.jsx(ls,{href:"/admin/identity",children:t})}const Is=Object.freeze(Object.defineProperty({__proto__:null,WorkspaceDiscoveryRenamePromptModal:Ns,useWorkspaceDiscoveryRenamePromptModal:Ot},Symbol.toStringTag,{value:"Module"})),Ws="g-68c9a4676c8c81918d99178b55901b9a",js=({onContinue:t,scope:e})=>{const s=ie(),a=Mt();return o.jsx(re,{testId:"modal-initial-workspace-onboarding",isOpen:!0,onClose:Y,type:"success",title:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{children:s.formatMessage(I.secureWorkspaceWelcomeTitle)}),o.jsx("span",{className:"text-token-text-secondary text-sm",children:a})]}),size:"custom",noPadding:!0,className:"max-w-2xl",children:o.jsx(bt,{onClose:()=>{t()},scope:e})})},Ts=({onContinue:t,onSkip:e,isEduPlan:s})=>{const a=ie();return o.jsx(re,{testId:"modal-role-survey",isOpen:!0,onClose:Y,type:"success",title:a.formatMessage(I.primaryRoleTitle),size:"custom",className:"max-w-lg",children:o.jsx(Nt,{options:s?Yt:Qt,onSkip:e,onSubmit:t})})},Es=({onContinue:t,onSkip:e,isEduPlan:s})=>{const a=ie();return o.jsx(re,{testId:"modal-department-survey",isOpen:!0,onClose:Y,type:"success",title:a.formatMessage(I.workTypeTitle),size:"custom",className:"max-w-lg",children:o.jsx(Nt,{options:s?Ht:$t,onSkip:e,onSubmit:t,multiSelect:!0})})};function Nt({options:t,onSkip:e=Y,onSubmit:s=Y,multiSelect:a=!1}){const i=ie(),[l,r]=f.useState([]);function u(n,_){const c=n.indexOf(_);return c===-1?[...n,_]:[...n.slice(0,c),...n.slice(c+1)]}const p=f.useCallback(n=>{var c;const _=(c=n.currentTarget.dataset.value)!=null?c:"";a?r(u(l,_)):s(_)},[s,l,r,a]);return o.jsxs("div",{children:[a&&o.jsx("p",{className:"text-token-text-tertiary mx-2 text-sm",children:i.formatMessage(I.selectAll)}),o.jsx("div",{className:"flex flex-col items-center justify-center",children:o.jsx("div",{className:"flex-wrap space-y-4",children:t.map(n=>o.jsx(Oe,{onClick:p,color:l.includes(n.id)?"primary":"secondary",size:"medium",className:"mx-2","data-value":n.id,children:o.jsx(L,x({},n.displayValue))},n.id))})}),o.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[o.jsx(De,{title:i.formatMessage(I.skipButton),onClick:e}),a&&o.jsx(De,{title:i.formatMessage(I.continueButton),onClick:()=>{s(l)},disabled:l.length===0,color:"primary",className:"ms-4"})]})]})}const Bs=({onYes:t,onSkip:e})=>{const s=ie();return o.jsx(re,{testId:"modal-chat-onboarding",isOpen:!0,onClose:Y,type:"success",title:s.formatMessage(I.chatOnboardingTitle),size:"custom",className:"max-w-lg",children:o.jsxs("div",{className:"px-4 pb-2",children:[o.jsx("p",{className:"text-token-text-secondary mb-4 text-sm",children:s.formatMessage(I.chatOnboardingDescription)}),o.jsxs("div",{className:"mt-4 flex flex-row justify-end gap-3",children:[o.jsx(De,{title:s.formatMessage(I.skipButton),onClick:e}),o.jsx(De,{title:s.formatMessage(I.yesButton),onClick:t,color:"primary"})]})]})})};function Rs({onClose:t}){var k;const e=ge(),s=(k=Ce(e,"2839926172"))!=null?k:!1,[a,i]=f.useState(0),[l,r]=f.useState({role:"",departments:[]}),u=me(Ne.businessWorkspaceId),p=me(Ne.isEduPlan),n=yt(),_=n==null?void 0:n.id,c=()=>{gt.logEvent("chatgpt_biz_onboarding_skipped"),ne.logEvent("Business Onboarding Skipped"),t(),ve(e,we.Onboarding)};switch(f.useEffect(()=>{a===0&&ne.logUpsellOrModalEvent(St,{eventId:"workspace_onboarding_modal_shown",type:vt.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[a]),a){case 0:return o.jsx(js,{scope:je.Workspace,onContinue:()=>{i(1)}});case 1:return o.jsx(Ts,{onContinue:d=>{r(b=>ae(x({},b),{role:d})),i(2)},onSkip:c,isEduPlan:p});case 2:return o.jsx(Es,{onContinue:d=>{const b=ae(x({},l),{departments:d});gt.logEvent("chatgpt_biz_onboarding_completed"),ne.logEvent("Business Onboarding Completed"),ds.safePatch("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:u,user_id:_}},requestBody:{onboarding_information:b}}).finally(()=>{s?i(3):(t(),ve(e,we.Onboarding))})},onSkip:c,isEduPlan:p});case 3:return o.jsx(Bs,{onSkip:c,onYes:()=>{if(typeof window<"u"){const d=cs(Ws);window.location.assign(d)}t(),ve(e,we.Onboarding)}});default:return o.jsx(o.Fragment,{})}}const I=be({secureWorkspaceWelcomeTitle:{id:"onboarding.secureWorkspaceWelcomeTitle",defaultMessage:"Welcome to your secure workspace"},primaryRoleTitle:{id:"onboarding.primaryRoleTitle",defaultMessage:"What's your primary role?"},workTypeTitle:{id:"onboarding.workTypeTitle",defaultMessage:"What kind of work do you do?"},selectAll:{id:"onboarding.selectAll",defaultMessage:"Select all that apply"},skipButton:{id:"onboarding.skipButton",defaultMessage:"Skip"},continueButton:{id:"onboarding.continueButton",defaultMessage:"Continue"},yesButton:{id:"onboarding.yesButton",defaultMessage:"Yes"},chatOnboardingTitle:{id:"onboarding.chatOnboardingTitle",defaultMessage:"Meet Your Onboarding Buddy GPT?"},chatOnboardingDescription:{id:"onboarding.chatOnboardingDescription",defaultMessage:"Brainstorm ways to get the most out of ChatGPT with a personal onboarding buddy."}}),Us=()=>{const t=ge(),e="center",{isOpen:s,modalType:a}=_t(t),i=os(),l=us();if(f.useEffect(()=>{s&&ne.logEvent("Sidetron: Blocking Modal Shown",{modalType:a})},[s,a]),!s)return null;function r(){switch(ne.logEvent("Sidetron: Modal Action Clicked",{modalType:a}),a){case Le.unsupported_app_version:window.open(l?Jt:Kt,"_blank");return;case null:ms.warn("No modal type provided for DesktopBlockingModal");return}}function u(){switch(a){case Le.unsupported_app_version:return Vs;case null:return Fs}}function p(){switch(a){case Le.unsupported_app_version:return!1;case null:return!1}}return o.jsx(re,{testId:"modal-desktop-blocking",isOpen:!0,onClose:Y,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:e,children:o.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8",children:[o.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:o.jsx(L,x({},u().title))}),o.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-lg",children:o.jsx(L,x({},u().subtitle))}),o.jsx(Oe,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"desktop-blocking-modal-action-button",onClick:r,children:o.jsx(L,x({},u().cta))}),p()&&o.jsxs("span",{children:[i," Â· ",o.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:n=>{n.preventDefault(),ne.logEvent("Sidetron: Modal Logout Clicked",{modalType:a}),ps()},"data-testid":"desktop-blocking-modal-logout",children:o.jsx(L,x({},u().logout))})]})]})})},Fs=be({title:{id:"DesktopBlockingModal.paidTitle",defaultMessage:"Upgrade to use Windows app"},subtitle:{id:"DesktopBlockingModal.paidSubtitle",defaultMessage:"The Windows app is currently available for Plus, Business, Enterprise, and Edu plans."},cta:{id:"DesktopBlockingModal.paidUpgradeCta",defaultMessage:"See Plans"},logout:{id:"DesktopBlockingModal.paidLogout",defaultMessage:"Log out"}}),Vs=be({title:{id:"DesktopBlockingModal.sunsettingTitle",defaultMessage:"Update required"},subtitle:{id:"DesktopBlockingModal.sunsettingSubtitle",defaultMessage:"A new version of ChatGPT Windows is available and must be installed to continue."},cta:{id:"DesktopBlockingModal.sunsettingCta",defaultMessage:"Get Download"},logout:{id:"DesktopBlockingModal.sunsettingLogout",defaultMessage:"Log out"}}),zs=Me(()=>_e(()=>Promise.resolve().then(()=>Is),void 0).then(t=>t.WorkspaceDiscoveryRenamePromptModal)),Gs=Me(()=>_e(()=>import("./iqdbbaipf1hfhx9g.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),qs=Me(()=>_e(()=>import("./l8kabf2thbcyl1cx.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]))),Hs=Me(()=>_e(()=>import("./kzwk89sl7ldvvuvg.js"),__vite__mapDeps([9,1,2,3,4,5,10,11])).then(t=>t.ConnectorsOnboardingModal)),$s=Me(()=>_e(()=>import("./ntqb52hmv21w1s1q.js"),__vite__mapDeps([12,1,2,3,4,5])).then(t=>t.RequestWorkspaceAccessModal)),Ys=({onClose:t})=>{const e=ie(),s=me(Ne.isBusinessWorkspace),a=me(l=>l.currentWorkspace),i=s?e.formatMessage(kt.workspaceWelcome,{workspaceName:a==null?void 0:a.name}):"ChatGPT";return o.jsx(re,{testId:"modal-onboarding",isOpen:!0,onClose:Y,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:e.formatMessage(kt.personalOnboardingSubheading),children:o.jsx(bt,{onClose:t,scope:s?je.Workspace:je.Personal})})},Qs=({onClose:t})=>{const e=ws.useStore();return f.useEffect(()=>(e.setOnCloseSideEffect(t),e.setManualVisibility(!0),()=>{e.setManualVisibility(!1)}),[t,e]),null};function Js(t){return o.jsx(wt,ae(x({},t),{mode:"blocking",section:"both",source:"first_login"}))}function Ks(t){return o.jsx(wt,ae(x({},t),{mode:"blocking",section:"existing",source:"should_select_workspace"}))}function ia({clientThreadId:t,page:e,isIosDirectPurchaseFlow:s}){const a=ge(),[i,l]=f.useState(0),r=gs(a,"109457"),{hasSeenOnboardingDate:u}=Xt(),p=u===!1&&r.get("is_new_user_banner_disclaimer_enabled",!1),{hasSeenWorkspaceDiscoveryFirstLoginDate:n}=Zt(),{hasSeenTeamOwnerOnboardingDate:_}=eo(),c=me(Ne.isBusinessWorkspace),{isOpen:k,isLoading:d,workspaceOnboardingVariant:b}=pt(),[z,y]=f.useState(!1),{data:h,isPending:xe,isEnabled:C}=to(),le=oo(h,xe&&C),S=fs(),G=hs(),[O,N]=ks(t,g=>[!g||g.isLoading,g==null?void 0:g.conversationOrigin]),v=O&&!!t,{data:m,isError:Q}=bs(),M=_s(m),P=m!=null,J=so(15),[w,ce]=f.useState(!1);f.useEffect(()=>{J&&!w&&ce(!0)},[J,w]);const de=ao(),K=no(),q=yt(),X=(q==null?void 0:q.email_domain_type)==="professional",H=!!(m!=null&&m.accountItems.some(g=>g.isEnterprisey())),W=X&&!H&&Ms(a).getLayer("3217430380").get("enable_workspace_discovery",!1),$=!!(X&&n===!1&&W&&w),{data:D,isLoading:Z}=io($),ee=!!(m&&(m==null?void 0:m.accountItems.length)>1&&m.currentAccountId==null),j=m==null?void 0:m.accountItems.some(g=>g.isPersonalAccount()),T=!!(m!=null&&m.accountItems)&&m.accountItems.length>0&&m.accountItems.every(({canAccessWithCurrentSession:g})=>!g),{eligible:E,isLoading:B}=ro(),ue=Ce(a,"1542198993"),{punchOutRequireLoginInfo:R}=lo(),{state:te}=co(),{isOpen:U}=uo(),{isOpen:F}=po(),{isOpen:oe,isLoading:fe}=Ot(),{isOpen:V}=mo(),Dt=_t(a),{isOpen:Re,isLoading:Ue}=Dt,{isOpen:Fe,isLoading:Ve}=go(),{isOpen:ze,isLoading:Ge}=fo(),{isOpen:qe}=ho(),{isOpen:He}=xs(),{state:$e}=ko(),Ye=bo(),Qe=_o(),Je=Mo(),Ke=xo(),Xe=yo(),Ze=So(),et=vo(),tt=wo(),{isOpen:ot}=Co(),{isOpen:At}=pt(),{isOpen:Pt}=Oo(),{isOpen:Lt}=No(),{isOpen:st,open:at}=Do(),{shouldShowCookieBanner:nt,isCookieConsentBannerLoading:it}=ys();f.useEffect(()=>{p&&!c&&!st&&at()},[p,c,st,at]);const Ae=f.useMemo(()=>[{Component:Ao,visibility:["chat","codex"],getModalState:()=>R?"show":"hide",isDeferrable:!1,id:"punch_out_sign_in_as_modal"},{Component:Po,visibility:["chat","codex"],getModalState:()=>te,isDeferrable:!1,id:"punch_out_anon_to_authed_modal"},{Component:Lo,visibility:["chat"],getModalState:()=>$e,isDeferrable:!1,id:"meet_chatgpt_modal"},{Component:zs,visibility:["chat","codex"],getModalState:()=>fe?"loading":oe?"show":"hide",isDeferrable:!1,id:"workspace_discovery_rename_prompt_modal"},{Component:Js,visibility:["chat","codex"],getModalState:()=>{var A,he;return!W||S!=null||n||Q?"hide":n==null||Z?"loading":((he=(A=D==null?void 0:D.workspaces)==null?void 0:A.length)!=null?he:0)>0&&w?"show":"hide"},isDeferrable:!1,id:"fullscreen_switcher_both"},{Component:W?Ks:Cs,visibility:["chat","codex"],getModalState:()=>S!=null||Q?"hide":P?ee?"show":"hide":"loading",isDeferrable:!1,id:"workspace_switcher_modal"},{Component:Io,visibility:["codex"],getModalState:()=>de,isDeferrable:!1,id:"codex_onboarding_modal"},{Component:Wo,visibility:["codex"],getModalState:()=>K,isDeferrable:!1,id:"codex_articFox_modal"},{Component:jo,visibility:["chat"],getModalState:()=>ot?"show":"hide",isDeferrable:!1,id:"noauth_promo_redemption_modal"},{Component:To,visibility:["chat"],getModalState:()=>U?"show":"hide",isDeferrable:!1,id:"noauth_plan_upsell_modal"},{Component:Eo,visibility:["chat"],getModalState:()=>Qe,isDeferrable:!1,id:"noauth_free_trial_upsell_modal"},{Component:Bo,visibility:["chat"],getModalState:()=>Ye,isDeferrable:!0,id:"noauth_imagegen_nux_modal"},{Component:Ro,visibility:["chat"],getModalState:()=>v?"loading":N===We.APPLE?"hide":V?"show":"hide",isDeferrable:!0,id:"noauth_soft_rate_limit_modal"},{Component:Ss,visibility:["chat"],getModalState:()=>v?"loading":N===We.APPLE?"hide":He?"show":"hide",isDeferrable:!0,id:"noauth_login_modal"},{Component:Uo,visibility:["chat"],getModalState:()=>v?"loading":N===We.APPLE?"hide":qe?"show":"hide",isDeferrable:!0,id:"noauth_welcome_back_modal"},{Component:Qs,visibility:["chat","codex"],getModalState:()=>it?"loading":nt?"show":"hide",isDeferrable:!1,id:"cookie_consent_banner_tracker"},{Component:Ys,visibility:["chat"],getModalState:()=>c||p?"hide":u===null?"loading":u===!1?"show":"hide",isDeferrable:!0,id:"onboarding_modal"},{Component:$s,visibility:["chat","codex"],getModalState:()=>S!==null?"show":Q||P?"hide":"loading",isDeferrable:!1,id:"request_workspace_access_modal"},{Component:Gs,visibility:["chat","codex"],getModalState:()=>G!=null?"show":Q||P?"hide":"loading",isDeferrable:!1,id:"account_transfer_modal"},{Component:Fo,visibility:["chat","codex"],getModalState:()=>P?T?"show":"hide":"loading",isDeferrable:!1,id:"invalid_accounts_modal"},{Component:Us,visibility:["chat","codex"],getModalState:()=>Ue?"loading":Re?"show":"hide",isDeferrable:!1,id:"desktop_blocking_modal"},{Component:Vo,visibility:["chat","codex"],getModalState:()=>Ve?"loading":Fe?"show":"hide",isDeferrable:!1,id:"desktop_onboarding_modal"},{Component:zo,visibility:["chat","codex"],getModalState:()=>"hide",isDeferrable:!1,id:"authed_cookie_consent_banner"},{Component:qs,visibility:["chat","codex"],getModalState:()=>!(M!=null&&M.isSelfServeBusiness())||!(M!=null&&M.isOwnerOfAccount())||!j||M!=null&&M.startedAsFreeWorkspace?"hide":!P||_===null?"loading":_===!1?"show":"hide",isDeferrable:!1,id:"team_account_transfer_modal"},{Component:Go,visibility:["chat"],getModalState:()=>c?Ge?"loading":ze?"show":"hide":"hide",isDeferrable:!1,id:"workspace_policy_modal"},{Component:Rs,visibility:["chat","codex"],getModalState:()=>!c||!d&&k?"hide":u===null?"loading":u===!1?"show":"hide",isDeferrable:!0,id:"workspace_onboarding_modal"},{Component:qo,visibility:["chat"],getModalState:()=>B?"loading":E&&ue?"show":"hide",isDeferrable:!1,id:"memory_onboarding_modal"},{Component:Ho,visibility:["chat","codex"],getModalState:()=>le,isDeferrable:!1,id:"age_verification_interstitial"},{Component:c&&b==="mix"?Hs:$o,visibility:["chat"],getModalState:()=>c&&b==="new"?"hide":Je,isDeferrable:!1,id:"connectors_nux_modal"},{Component:Yo,visibility:["chat"],getModalState:()=>et,isDeferrable:!1,id:"tatertot_nux_modal_v2"},{Component:Qo,visibility:["chat"],getModalState:()=>tt,isDeferrable:!1,id:"quiz_nux_modal"},{Component:Jo,visibility:["chat"],getModalState:()=>Ke,isDeferrable:!1,id:"google_connectors_nux_modal"},{Component:Ko,visibility:["chat"],getModalState:()=>Ze,isDeferrable:!0,id:"golden_hour_nux_modal"},{Component:Xo,visibility:["chat"],getModalState:()=>Xe,isDeferrable:!0,id:"moonshine_nux_v2_modal"},{Component:Zo,visibility:["chat"],getModalState:()=>F?"show":"hide",isDeferrable:!1,id:"free_trial_upsell_modal"}].filter(A=>A.visibility.includes(e)),[e,R,te,$e,ot,Qe,Ye,fe,oe,v,N,V,U,qe,it,nt,c,p,u,n,Q,D,Z,ee,P,S,G,T,Ue,Re,Ve,Fe,M,j,_,Ge,ze,B,E,ue,W,le,Je,Ke,Xe,et,tt,de,K,w,He,F,Ze,d,k,b]),It=z;function rt(g){if(g!=null)return g.isDeferrable&&It?"hide":g.Component?g.getModalState():"hide"}const se=Ae[i],ye=rt(se);ye==="hide"&&l((()=>{let A=i+1;for(;A<Ae.length;A++)if(rt(Ae[A])!=="hide")return A;return A})());const{pathname:Se}=Ut(),lt=f.useRef(Se);f.useEffect(()=>{lt.current!==Se&&(lt.current=Se,l(0))},[Se]),f.useEffect(()=>{const g=ye==="show",he=vs(a).getState().activeModals.has(Ie.BlockingInitialComponent);g!==he&&(g?ft.openModal(Ie.BlockingInitialComponent):ft.closeModal(Ie.BlockingInitialComponent))},[a,ye]);const Pe=ye!=="show"||At||Pt||Lt||s,ct=es(()=>{ne.logUpsellOrModalEvent(St,{eventId:se.id,type:vt.UPSELL_OR_MODAL_TYPE_BLOCKING_INITIAL_MODAL})});if(f.useEffect(()=>{se==null||Pe||ct()},[se,Pe,ct]),se==null)return mt.trackNamespace(mt.NS_COMPOSER),o.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(Pe)return null;const Wt=se.Component;return o.jsx(Wt,{onClose:()=>{c&&b==="mix"&&se.id==="connectors_nux_modal"&&ve(a,we.hasSeenConnectorsNuxModal),y(!0),l(g=>g+1)}})}const kt=be({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}});export{ia as B};
//# sourceMappingURL=dtmprrbw2fxa7u08.js.map
