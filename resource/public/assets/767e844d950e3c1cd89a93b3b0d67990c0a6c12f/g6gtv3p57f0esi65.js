var G=Object.freeze,U=Object.defineProperty,ue=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var H=(s,a,t)=>a in s?U(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,c=(s,a)=>{for(var t in a||(a={}))z.call(a,t)&&H(s,t,a[t]);if(b)for(var t of b(a))K.call(a,t)&&H(s,t,a[t]);return s},y=(s,a)=>ue(s,ge(a));var V=(s,a)=>{var t={};for(var n in s)z.call(s,n)&&a.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&b)for(var n of b(s))a.indexOf(n)<0&&K.call(s,n)&&(t[n]=s[n]);return t};var f=(s,a)=>G(U(s,"raw",{value:G(a||s.slice())}));import{r as h,b as xe,h as ee,j as e,M as x,e as se,d as B,n as Q,a as ae}from"./mw35uwhq4g8r9eam.js";import{sF as pe,sG as fe,kq as he,sH as ve,sI as je,sJ as be,sK as ye,e7 as L,u as v,J as P,R as Se,p as Me,eV as ke,aA as we,cB as M,dh as E,eF as te,al as T,di as Ne,eS as _e,cd as Pe,hg as A,cF as k,dt as Ae,h2 as Ce,d$ as ne,fD as Be,er as Le,cw as Ee,am as Te,_ as Ie,mk as Fe}from"./d0xa318sl7ywi0za.js";import{b as De}from"./dbnl40ahcmx1rqbw.js";import{dn as ie,gZ as Re,b_ as We,bZ as Oe,a9 as Ge,X as He,gm as Ue,iq as ze,aD as Ke,i7 as Ve,jo as Qe,bp as Ye,cY as qe,aa as Je,ab as $e,aE as Y}from"./g2euln7v5pbm31qa.js";import{S as Ze}from"./kubovzlwgxdy8km7.js";import{S as Xe}from"./ffo9fz3385kae4ff.js";import{S as q}from"./tffc42bs0etu9v3l.js";import{L as re}from"./kubdgxu3crk3gqem.js";import{j as es}from"./ojmli062couj7r3v.js";function ss({cycleReferenceDate:s,cycleIndex:a,targetDate:t=new Date,period:n}){const i=n==="yearly"?pe:fe,o=i(t,a),r=_(s,o,n);return he(r,o)?{start:_(s,i(o,-1),n),end:r}:{start:r,end:_(s,i(o,1),n)}}function _(s,a,t){return ve(s,c({year:be(a)},t==="monthly"&&{month:je(a)}))}function Ms(s=0){const a=ie();return h.useMemo(()=>{var o,r,l;if(a.status==="pending")return"pending";const t=a.data;if(!t)return;const n=(r=(o=t.next_credit_grant_update)!=null?o:t.active_start)!=null?r:t.active_until;if(!n)return;let i=(l=t.billing_period)!=null?l:"monthly";if(t.last_credit_grant_update&&t.next_credit_grant_update){const u=new Date(t.last_credit_grant_update),g=new Date(t.next_credit_grant_update);if(i=ye(g,u)>1?"yearly":"monthly",s===0)return{start:u,end:g,period:i}}return y(c({},ss({cycleReferenceDate:new Date(n),cycleIndex:s,period:i})),{period:i})},[a,s])}function as(){var o;const s=L(),a=v(),n=P(a,"2861925050")&&s!=null&&s.isEnterprisey()&&(s.isAdminOfAccount()||s.isOwnerOfAccount())&&s.organizationId!=null,i=xe({queryKey:ts(s==null?void 0:s.organizationId),queryFn:()=>Se.safeGet("/subscriptions/{organization_id}/at_overage_limit",{parameters:{path:{organization_id:s==null?void 0:s.organizationId}}}),enabled:n});return n&&((o=i.data)==null?void 0:o.organization_at_overage_limit)===!0}function ts(s){return["is-at-overage-limit",s]}function ns({accountId:s,subscription:a}){const t=ee(),n=Me(),i=Re(s),[o,r]=h.useState(!1),l=es(s),u=async()=>{r(!0);try{await i.mutateAsync(s)}catch(g){n.warning(t.formatMessage(S.errorRenewingSubscription),{hasCloseButton:!0})}finally{r(!1)}};return e.jsx("div",{className:"bg-token-main-surface-secondary",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-2 py-4 md:px-6 lg:px-10 lg:py-6",children:[e.jsxs("div",{className:"mx-2 grow md:mx-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ke,{className:"me-4 hidden text-orange-500 md:block"}),e.jsx("p",{className:"text-lg font-semibold",children:e.jsx(x,c({},S.workspaceWillBeDeactivated))})]}),a.active_until!=null&&e.jsx("p",{className:"md:ms-8",children:e.jsx(x,y(c({},S.retainAccessUntil),{values:{expiryDate:new Date(a.active_until)}}))})]}),l&&e.jsx(we,{color:"primary",onClick:u,loading:o,children:e.jsx(x,c({},S.reactivateBtn))})]})})}const S=se({retainAccessUntil:{id:"adminPage.retainAccessUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},workspaceWillBeDeactivated:{id:"adminPage.workspaceWillBeDeactivated",defaultMessage:"This workspace will be deactivated."},reactivateBtn:{id:"adminPage.reactivateBtn",defaultMessage:"Reactivate"},errorRenewingSubscription:{id:"adminPage.errorRenewingSubscription",defaultMessage:"There was an error reactivating your subscription."}}),C="/admin/billing";function d(o){var r=o,{route:s,icon:a,upsellEnterprise:t=!1,locked:n=!1}=r,i=V(r,["route","icon","upsellEnterprise","locked"]);const l=ae().pathname.replace(/\/$/,"")||"/",u=B();if(t)return e.jsx(Ee,{label:e.jsx(x,c({},m.availableForEnterprise)),side:"right",contentClassName:"cant-hover:hidden",children:e.jsx(A,{as:"div",role:"button",fillContainer:!0,icon:Y,label:"name"in i?e.jsx(x,c({},i.name)):i.children})});{const g=n?e.jsx(Y,{}):void 0;return e.jsx(A,{as:"div",role:"button",fillContainer:!0,active:l===s,onClick:j=>{u(s),j.stopPropagation()},icon:a,trailing:g,className:k(n&&"text-token-text-tertiary"),label:"name"in i?e.jsx(x,c({},i.name)):i.children})}}function is({workspace:s,hasAdminPrivileges:a,hasOwnerPrivileges:t}){var R,W,O;const n=B(),i=L(),o=(W=(R=i==null?void 0:i.isK12)==null?void 0:R.call(i))!=null?W:!1,r=!!(i!=null&&i.isFreeWorkspace()),l=E(Ne.isEnterpriseyPlan),u=h.useCallback(()=>{n("/")},[n]),g=v(),j=P(g,"4105779609"),w=te(),le=(i==null?void 0:i.isSelfServeBusiness())&&j,{data:N}=_e(s==null?void 0:s.id);let p=!1;o||t||a||!l?p=!0:p=!!((O=N==null?void 0:N.permissions)!=null&&O.includes("chatgpt.workspace.member.role.view"));const ce=Ge($e,Je,!1,!0),de=ee().formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"}),me=P(g,"3280023399"),I={route:"/admin/permissions",icon:Ve,locked:r,name:m.permissions},F={route:"/admin/gpts",icon:Qe,locked:r,name:m.gpts},D={route:"/admin/ca",icon:Ye,locked:r,name:me?m.connectionsV2:m.connections};return e.jsxs("nav",{className:"pb-1.5",children:[!w&&e.jsx("div",{className:"h-header-height flex items-center px-2",children:e.jsx(He,{className:"no-draggable","aria-label":de,onClick:()=>{Pe.setSidebarOpen(!1)},icon:ce,mobileIcon:Ue,"data-testid":"close-sidebar-button"})}),e.jsx("div",{className:"h-header-height flex flex-col justify-center",children:e.jsx(A,{as:"button",onClick:u,icon:e.jsx(ze,{className:"icon-sm"}),label:e.jsx(x,c({},m.backToChat))})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:k("flex flex-col gap-2 rounded p-4"),children:[e.jsx(Ae,{size:"large",src:s==null?void 0:s.profilePictureUrl}),e.jsx("div",{className:"align-center flex min-w-0 flex-row",children:e.jsx("h2",{className:"text-token-text-primary flex-1 truncate text-lg dark:text-white",children:s==null?void 0:s.name})})]}),a&&e.jsx(d,{route:"/admin",icon:Ce,name:m.generalSettingsPageTitle}),p&&e.jsx(d,{route:"/admin/members",icon:Ke,name:m.membersPageTitle}),l&&p&&e.jsx(d,{route:"/admin/groups",icon:q,upsellEnterprise:!l,locked:r,name:Q({id:"aecR1i",defaultMessage:"Groups"})}),t&&!r&&e.jsx(d,c({},I)),a&&!o&&e.jsx(d,{route:C,icon:Xe,name:m.billing}),t&&!r&&e.jsx(d,c({},F)),a&&!r&&e.jsx(d,c({},D)),!l&&e.jsx("span",{className:"border-y-token-border-heavy mx-3 border-t"}),t&&r&&e.jsx(d,c({},I)),t&&r&&e.jsx(d,c({},F)),a&&r&&e.jsx(d,c({},D)),!l&&e.jsx(d,{route:"/admin/groups",icon:q,upsellEnterprise:!l&&!r,locked:r,name:Q({id:"aecR1i",defaultMessage:"Groups"})}),a&&e.jsx(d,{route:"/admin/usage",icon:Ze,upsellEnterprise:!l&&!r,locked:r,children:e.jsx("div",{className:"flex flex-row items-center gap-2",children:e.jsx(x,c({},m.userAnalytics))})}),t&&e.jsx(d,{route:"/admin/identity",upsellEnterprise:!l&&!le&&!r,locked:r,icon:qe,name:m.identity}),!1]})]})}function ks({mobilePageTitle:s,requireAdminPrivileges:a=!1,requireOwnerPrivileges:t=!1,children:n}){const i=E(w=>w.currentWorkspace),o=B(),r=i!=null?We(i.role):void 0,l=i!=null?Oe(i.role):void 0;h.useEffect(()=>{a&&r===!1&&o("/admin/members"),t&&l===!1&&o("/admin/members")},[a,r,o,t,l]);const u=te(),g=v();return T(g)==null?null:e.jsx(e.Fragment,{children:e.jsx(De,{mobileHeaderContent:s,mobileHeaderRightContent:e.jsx(re,{}),forceOpenDesktopSidebar:u,renderNavSidebar:()=>e.jsx(is,{workspace:i!=null?i:void 0,hasAdminPrivileges:r,hasOwnerPrivileges:l}),children:n})})}function rs(){return e.jsxs(e.Fragment,{children:[e.jsx(os,{}),e.jsx(ls,{})]})}function os(){const{data:s}=ie(),a=v(),t=T(a),n=t&&s&&s.plan_type===Te.SELF_SERVE_BUSINESS&&!s.will_renew;return e.jsx(e.Fragment,{children:n&&e.jsx(ns,{accountId:t.id,subscription:s})})}function ls(){const s=L(),a=as(),t=ae().pathname!==C;return h.useEffect(()=>{a&&Ie.logEventWithStatsig("ChatGPT Credits: At Overage Limit Banner Shown","chatgpt_credits_at_overage_limit_banner_shown",{workspaceId:s==null?void 0:s.id,workspaceName:s==null?void 0:s.name})},[a,s]),e.jsx(e.Fragment,{children:a&&e.jsx("div",{className:"text-token-interactive-label-danger-secondary-default bg-token-bg-status-error",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-center px-2 py-4 text-xs md:px-6 lg:px-10",children:[e.jsx(Fe,{className:"me-2 shrink-0"}),e.jsx(x,y(c({},m.atOverageLimitBannerText),{values:{link:n=>t?e.jsx(ne,{className:"mx-1",href:C,children:n}):n}}))]})})})}var J;const oe=M.div(J||(J=f(["w-full flex-row items-center gap-2"])));var $;const cs=M(oe)($||($=f(["text-sm text-token-text-tertiary"])));var Z;const ds=M.div(Z||(Z=f(["mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10"])));function ws({title:s,subtitle:a,actions:t,tabsHeader:n,badge:i,navigation:o,showBottomBorder:r=!0}){return e.jsxs(e.Fragment,{children:[e.jsx(rs,{}),e.jsxs("div",{className:k("border-token-bg-tertiary flex flex-col gap-6 md:mt-12",r&&"border-b",!n&&"pb-6"),children:[o&&e.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10",children:o}),e.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:block md:px-6 lg:px-10",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(oe,{className:"hidden md:flex",children:[e.jsx("h2",{children:s}),i]}),a&&e.jsx(cs,{className:"mt-1",children:a})]}),e.jsx("div",{className:"flex",children:t})]})}),n&&e.jsx(ds,{children:n})]}),e.jsx("div",{className:"absolute end-0 top-0 hidden px-2 py-1.5 md:block",children:e.jsx(re,{})})]})}function Ns({items:s}){return e.jsx("div",{className:"text-token-text-secondary text-caption-regular flex items-center gap-2",children:s.map((a,t)=>{const n=k(t===s.length-1?"text-token-text-primary":"text-token-text-secondary","no-underline");return e.jsxs(e.Fragment,{children:[a.href?e.jsx(ne,{href:a.href,style:{textDecoration:"none"},className:n,children:a.label},t):e.jsx("div",{className:n,children:a.label},t),t<s.length-1&&e.jsx(Be,{className:"icon-sm"})]})})})}var X;const ms=M.div(X||(X=f(["max-w-4xl mx-auto w-full px-2 md:px-6 lg:px-10 pb-10"])));function _s({children:s,showSpinner:a,skipLegacyWorkspaceCheck:t}){const n=v(),i=T(n),o=E(u=>u.currentWorkspace),r=!t&&!o,l=!i||a;return e.jsxs(ms,{children:[l&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(Le,{})}),!l&&r&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(x,c({},m.workspaceNotFound))}),!l&&!r&&s]})}const m=se({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},generalSettingsPageTitle:{id:"6Gjoj5",defaultMessage:"General"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},userAnalytics:{id:"adminPage.userAnalytics",defaultMessage:"User analytics"},billing:{id:"adminPage.billing.1",defaultMessage:"Billing"},gpts:{id:"adminPage.gpts",defaultMessage:"GPTs"},connections:{id:"adminPage.connections",defaultMessage:"Apps & Connectors"},connectionsV2:{id:"oPJHbS",defaultMessage:"Apps"},permissions:{id:"/HwRtL",defaultMessage:"Permissions & roles"},identity:{id:"adminPage.identity.0",defaultMessage:"Identity & access"},availableForEnterprise:{id:"adminPage.availableForEnterprise",defaultMessage:"Available for Enterprise plan"},atOverageLimitBannerText:{id:"adminPage.atOverageLimitBannerText",defaultMessage:"Your organization has reached its credit overage limit. Access to advanced features is paused. <link>Adjust the limit</link> to restore access."},agreements:{id:"workspaceAgreements.agreementsTitle",defaultMessage:"Agreements"}});export{ks as A,ws as a,Ns as b,_s as c,Ms as d,rs as e,ts as g,as as u};
//# sourceMappingURL=g6gtv3p57f0esi65.js.map
