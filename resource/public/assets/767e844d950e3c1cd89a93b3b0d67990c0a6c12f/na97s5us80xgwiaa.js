var ja=Object.defineProperty,Ja=Object.defineProperties;var Ka=Object.getOwnPropertyDescriptors;var kr=Object.getOwnPropertySymbols;var Qa=Object.prototype.hasOwnProperty,th=Object.prototype.propertyIsEnumerable;var Nr=(n,t,e)=>t in n?ja(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,pe=(n,t)=>{for(var e in t||(t={}))Qa.call(t,e)&&Nr(n,e,t[e]);if(kr)for(var e of kr(t))th.call(t,e)&&Nr(n,e,t[e]);return n},Te=(n,t)=>Ja(n,Ka(t));import{f as zr,V as eh,g as ti,A as Qn,h as ih,i as pt,m as ss,n as rs,o as We,p as Dt,E as dr,D as Jo,M as xi,R as _s,q as ts,r as Pr,s as Vi,t as Ko,u as nh}from"./ko1u2otqsfwa0ohy.js";import{w as sh,p as Rr,c as hi,s as ze,a as Kt,h as Fr,e as te,t as es,b as Yi,m as Ts,d as Lr,f as Xt,g as Br,i as rh,j as oh,k as ah,l as ar,n as hh,q as lh,r as ch,u as uh,v as qi,x as si,y as _i,z as ri,o as Qo,A as mr,B as pr,C as gr,D as ta,E as hr,F as fh,G as dh,H as mh,I as ph,J as gh}from"./hwa6pbq6i57ntwuh.js";import{g as ea}from"./mw35uwhq4g8r9eam.js";import{BV as yh,BW as xh}from"./g2euln7v5pbm31qa.js";function bh(n){return n.innerRadius}function Mh(n){return n.outerRadius}function wh(n){return n.startAngle}function _h(n){return n.endAngle}function Th(n){return n&&n.padAngle}function Sh(n,t,e,i,s,r,o,a){var h=e-n,l=i-t,c=o-s,f=a-r,u=f*h-c*l;if(!(u*u<te))return u=(c*(t-r)-f*(n-s))/u,[n+u*h,t+u*l]}function Cn(n,t,e,i,s,r,o){var a=n-e,h=t-i,l=(o?r:-r)/Yi(a*a+h*h),c=l*h,f=-l*a,u=n+c,d=t+f,p=e+c,m=i+f,g=(u+p)/2,y=(d+m)/2,b=p-u,M=m-d,x=b*b+M*M,w=s-r,E=u*m-p*d,A=(M<0?-1:1)*Yi(rh(0,w*w*x-E*E)),N=(E*M-b*A)/x,z=(-E*b-M*A)/x,P=(E*M+b*A)/x,v=(-E*b+M*A)/x,L=N-g,C=z-y,B=P-g,Y=v-y;return L*L+C*C>B*B+Y*Y&&(N=P,z=v),{cx:N,cy:z,x01:-c,y01:-f,x11:N*(s/w-1),y11:z*(s/w-1)}}function ia(){var n=bh,t=Mh,e=Kt(0),i=null,s=wh,r=_h,o=Th,a=null,h=sh(l);function l(){var c,f,u=+n.apply(this,arguments),d=+t.apply(this,arguments),p=s.apply(this,arguments)-Fr,m=r.apply(this,arguments)-Fr,g=Lr(m-p),y=m>p;if(a||(a=c=h()),d<u&&(f=d,d=u,u=f),!(d>te))a.moveTo(0,0);else if(g>es-te)a.moveTo(d*hi(p),d*ze(p)),a.arc(0,0,d,p,m,!y),u>te&&(a.moveTo(u*hi(m),u*ze(m)),a.arc(0,0,u,m,p,y));else{var b=p,M=m,x=p,w=m,E=g,A=g,N=o.apply(this,arguments)/2,z=N>te&&(i?+i.apply(this,arguments):Yi(u*u+d*d)),P=Ts(Lr(d-u)/2,+e.apply(this,arguments)),v=P,L=P,C,B;if(z>te){var Y=Br(z/u*ze(N)),et=Br(z/d*ze(N));(E-=Y*2)>te?(Y*=y?1:-1,x+=Y,w-=Y):(E=0,x=w=(p+m)/2),(A-=et*2)>te?(et*=y?1:-1,b+=et,M-=et):(A=0,b=M=(p+m)/2)}var G=d*hi(b),F=d*ze(b),D=u*hi(w),H=u*ze(w);if(P>te){var j=d*hi(M),U=d*ze(M),st=u*hi(x),ft=u*ze(x),K;if(g<Rr)if(K=Sh(G,F,st,ft,j,U,D,H)){var rt=G-K[0],at=F-K[1],X=j-K[0],_=U-K[1],S=1/ze(oh((rt*X+at*_)/(Yi(rt*rt+at*at)*Yi(X*X+_*_)))/2),T=Yi(K[0]*K[0]+K[1]*K[1]);v=Ts(P,(u-T)/(S-1)),L=Ts(P,(d-T)/(S+1))}else v=L=0}A>te?L>te?(C=Cn(st,ft,G,F,d,L,y),B=Cn(j,U,D,H,d,L,y),a.moveTo(C.cx+C.x01,C.cy+C.y01),L<P?a.arc(C.cx,C.cy,L,Xt(C.y01,C.x01),Xt(B.y01,B.x01),!y):(a.arc(C.cx,C.cy,L,Xt(C.y01,C.x01),Xt(C.y11,C.x11),!y),a.arc(0,0,d,Xt(C.cy+C.y11,C.cx+C.x11),Xt(B.cy+B.y11,B.cx+B.x11),!y),a.arc(B.cx,B.cy,L,Xt(B.y11,B.x11),Xt(B.y01,B.x01),!y))):(a.moveTo(G,F),a.arc(0,0,d,b,M,!y)):a.moveTo(G,F),!(u>te)||!(E>te)?a.lineTo(D,H):v>te?(C=Cn(D,H,j,U,u,-v,y),B=Cn(G,F,st,ft,u,-v,y),a.lineTo(C.cx+C.x01,C.cy+C.y01),v<P?a.arc(C.cx,C.cy,v,Xt(C.y01,C.x01),Xt(B.y01,B.x01),!y):(a.arc(C.cx,C.cy,v,Xt(C.y01,C.x01),Xt(C.y11,C.x11),!y),a.arc(0,0,u,Xt(C.cy+C.y11,C.cx+C.x11),Xt(B.cy+B.y11,B.cx+B.x11),y),a.arc(B.cx,B.cy,v,Xt(B.y11,B.x11),Xt(B.y01,B.x01),!y))):a.arc(0,0,u,w,x,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+n.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+s.apply(this,arguments)+ +r.apply(this,arguments))/2-Rr/2;return[hi(f)*c,ze(f)*c]},l.innerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Kt(+c),l):n},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Kt(+c),l):t},l.cornerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Kt(+c),l):e},l.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Kt(+c),l):i},l.startAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Kt(+c),l):s},l.endAngle=function(c){return arguments.length?(r=typeof c=="function"?c:Kt(+c),l):r},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Kt(+c),l):o},l.context=function(c){return arguments.length?(a=c==null?null:c,l):a},l}function Ah(n,t){return t<n?-1:t>n?1:t>=n?0:NaN}function Eh(n){return n}function na(){var n=Eh,t=Ah,e=null,i=Kt(0),s=Kt(es),r=Kt(0);function o(a){var h,l=(a=ah(a)).length,c,f,u=0,d=new Array(l),p=new Array(l),m=+i.apply(this,arguments),g=Math.min(es,Math.max(-es,s.apply(this,arguments)-m)),y,b=Math.min(Math.abs(g)/l,r.apply(this,arguments)),M=b*(g<0?-1:1),x;for(h=0;h<l;++h)(x=p[d[h]=h]=+n(a[h],h,a))>0&&(u+=x);for(t!=null?d.sort(function(w,E){return t(p[w],p[E])}):e!=null&&d.sort(function(w,E){return e(a[w],a[E])}),h=0,f=u?(g-l*M)/u:0;h<l;++h,m=y)c=d[h],x=p[c],y=m+(x>0?x*f:0)+M,p[c]={data:a[c],index:h,value:x,startAngle:m,endAngle:y,padAngle:b};return p}return o.value=function(a){return arguments.length?(n=typeof a=="function"?a:Kt(+a),o):n},o.sortValues=function(a){return arguments.length?(t=a,e=null,o):t},o.sort=function(a){return arguments.length?(e=a,t=null,o):e},o.startAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Kt(+a),o):i},o.endAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Kt(+a),o):s},o.padAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Kt(+a),o):r},o}function yr(n,t){if((h=n.length)>0)for(var e,i=0,s,r,o,a,h,l=n[t[0]].length;i<l;++i)for(o=a=0,e=0;e<h;++e)(r=(s=n[t[e]][i])[1]-s[0])>0?(s[0]=o,s[1]=o+=r):r<0?(s[1]=a,s[0]=a+=r):(s[0]=0,s[1]=r)}function vh(n,t){let e=0;for(let i of n)i!=null&&(i=+i)>=i&&++e;return e}function ke(n,t){let e,i;if(t===void 0)for(const s of n)s!=null&&(e===void 0?s>=s&&(e=i=s):(e>s&&(e=s),i<s&&(i=s)));else{let s=-1;for(let r of n)(r=t(r,++s,n))!=null&&(e===void 0?r>=r&&(e=i=r):(e>r&&(e=r),i<r&&(i=r)))}return[e,i]}function Ch(n){return n}var Ih=Array.prototype,kh=Ih.slice;function Ss(n){return()=>n}function Nh(n,t,e){let i;for(;;){const s=ar(n,t,e);if(s===i||s===0||!isFinite(s))return[n,t];s>0?(n=Math.floor(n/s)*s,t=Math.ceil(t/s)*s):s<0&&(n=Math.ceil(n*s)/s,t=Math.floor(t*s)/s),i=s}}function zh(n){return Math.max(1,Math.ceil(Math.log(vh(n))/Math.LN2)+1)}function Ph(){var n=Ch,t=ke,e=zh;function i(s){Array.isArray(s)||(s=Array.from(s));var r,o=s.length,a,h,l=new Array(o);for(r=0;r<o;++r)l[r]=n(s[r],r,s);var c=t(l),f=c[0],u=c[1],d=e(l,f,u);if(!Array.isArray(d)){const M=u,x=+d;if(t===ke&&([f,u]=Nh(f,u,x)),d=hh(f,u,x),d[0]<=f&&(h=ar(f,u,x)),d[d.length-1]>=u)if(M>=u&&t===ke){const w=ar(f,u,x);isFinite(w)&&(w>0?u=(Math.floor(u/w)+1)*w:w<0&&(u=(Math.ceil(u*-w)+1)/-w))}else d.pop()}for(var p=d.length,m=0,g=p;d[m]<=f;)++m;for(;d[g-1]>u;)--g;(m||g<p)&&(d=d.slice(m,g),p=g-m);var y=new Array(p+1),b;for(r=0;r<=p;++r)b=y[r]=[],b.x0=r>0?d[r-1]:f,b.x1=r<p?d[r]:u;if(isFinite(h)){if(h>0)for(r=0;r<o;++r)(a=l[r])!=null&&f<=a&&a<=u&&y[Math.min(p,Math.floor((a-f)/h))].push(s[r]);else if(h<0){for(r=0;r<o;++r)if((a=l[r])!=null&&f<=a&&a<=u){const M=Math.floor((f-a)*h);y[Math.min(p,M+(d[M]<=a))].push(s[r])}}}else for(r=0;r<o;++r)(a=l[r])!=null&&f<=a&&a<=u&&y[lh(d,a,0,p)].push(s[r]);return y}return i.value=function(s){return arguments.length?(n=typeof s=="function"?s:Ss(s),i):n},i.domain=function(s){return arguments.length?(t=typeof s=="function"?s:Ss([s[0],s[1]]),i):t},i.thresholds=function(s){return arguments.length?(e=typeof s=="function"?s:Ss(Array.isArray(s)?kh.call(s):s),i):e},i}function Rh(n,t){let e=0,i=0;for(let s of n)s!=null&&(s=+s)>=s&&(++e,i+=s);if(e)return i/e}function os(n,t){let e=0;if(t===void 0)for(let i of n)(i=+i)&&(e+=i);else{let i=-1;for(let s of n)(s=+t(s,++i,n))&&(e+=s)}return e}function li(n,t,e){return Math.min(Math.max(n,t),e)}function Fh(n){const t=n.replace("#",""),e=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),s=parseInt(t.slice(4,6),16);return{r:e,g:i,b:s}}function Or(n,t,e){n/=255,t/=255,e/=255;const i=Math.max(n,t,e),s=Math.min(n,t,e);let r=0,o=0;const a=(i+s)/2;if(i!==s){const h=i-s;switch(o=a>.5?h/(2-i-s):h/(i+s),i){case n:r=(t-e)/h+(t<e?6:0);break;case t:r=(e-n)/h+2;break;case e:r=(n-t)/h+4;break}r/=6}return{h:r,s:o,l:a}}function Dr(n,t,e){let i,s,r;if(t===0)i=s=r=e;else{const o=(l,c,f)=>(f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?l+(c-l)*6*f:f<.5?c:f<.6666666666666666?l+(c-l)*(.6666666666666666-f)*6:l),a=e<.5?e*(1+t):e+t-e*t,h=2*e-a;i=o(h,a,n+1/3),s=o(h,a,n),r=o(h,a,n-1/3)}return[Math.round(i*255),Math.round(s*255),Math.round(r*255)]}function Lh(n,t){var h;if(!n)return"rgba(0,0,0,1)";let e="#000000",i=1;if(n.type===zr.COLOR_TYPE_RGB){const l=String(n.value).replace(/^#/,"");l.length===8?e="#".concat(l.slice(2)):l.length===6?e="#".concat(l):e="#000000"}else if(n.type===zr.COLOR_TYPE_SCHEME){const l=String(n.value);let c=t.colorMap[l];if(!c&&l.startsWith("theme:")){const f=parseInt((h=l.split(":")[1])!=null?h:"",10);if(!Number.isNaN(f)){const d=["lt1","dk1","lt2","dk2","accent1","accent2","accent3","accent4","accent5","accent6","hlink","folHlink"][f];d&&(c=t.colorMap[d])}}e=c||"#000000"}else e="#000000";let{r:s,g:r,b:o}=Fh(e);const a=n.transform;if(a){if(a.alpha&&(i=li(a.alpha/1e5,0,1)),a.satMod){const l=Or(s,r,o);l.s=li(l.s*(a.satMod/1e5),0,1),[s,r,o]=Dr(l.h,l.s,l.l)}if(a.lumMod||a.lumOff){const l=Or(s,r,o);a.lumMod&&(l.l*=a.lumMod/1e5),a.lumOff&&(l.l+=a.lumOff/1e5),l.l=li(l.l,0,1),[s,r,o]=Dr(l.h,l.s,l.l)}if(a.tint){const l=li(a.tint/1e5,-1,1),c=f=>l>0?f+(255-f)*l:l<0?f*(1+l):f;s=c(s),r=c(r),o=c(o)}a.shade&&(s*=1-a.shade/1e5,r*=1-a.shade/1e5,o*=1-a.shade/1e5)}return s=li(Math.round(s),0,255),r=li(Math.round(r),0,255),o=li(Math.round(o),0,255),"rgba(".concat(s,",").concat(r,",").concat(o,",").concat(i,")")}function Pt(n,t,e){var i,s;return n?(s=(i=Lh(n,t))!=null?i:e)!=null?s:"transparent":e!=null?e:"transparent"}var As,Hr;function Bh(){if(Hr)return As;Hr=1;var n=yh(),t=xh(),e=t(function(i,s,r,o){n(i,s,r,o)});return As=e,As}var Oh=Bh();const Dh=ea(Oh);function sa(n){switch(n){case"title":case"ctrTitle":return"titleStyle";case"body":case void 0:case"obj":case"content":case"subTitle":case"":return"bodyStyle";default:return"otherStyle"}}const Ft=1/9525;function Hh(n){return n.xEmu!==0||n.yEmu!==0||n.widthEmu!==0||n.heightEmu!==0}const ra=(n,...t)=>Dh({},n,...t,(e,i)=>e||i);function Vf(n,t,e){var E,A,N,z,P,v,L,C,B,Y,et,G,F,D,H,j;const s=(E=n.placeholderIndex)!=null?E:0,r=U=>{switch(U){case"subTitle":return["subTitle","body"];case"ctrTitle":case"centeredTitle":return["ctrTitle","title"];default:return[U!=null?U:"other"]}},o=(U,st,ft)=>{var rt,at;return(rt=U==null?void 0:U.elements)!=null&&rt.length?(at=U.elements.find(X=>{var _;return st.includes(X.placeholderType)&&((_=X.placeholderIndex)!=null?_:0)===ft}))!=null?at:U.elements.find(X=>st.includes(X.placeholderType)):void 0};let h=n.placeholderType!==void 0||n.placeholderIndex!==void 0?sa(n.placeholderType):"otherStyle";n.placeholderType==="subTitle"&&h==="titleStyle"&&(h="bodyStyle");const l=e.useLayoutId,c=t.layouts.find(U=>U.id===l),f=(A=n.textStyle)!=null?A:{anchor:Qn.ANCHOR_TYPE_UNSPECIFIED,vertical:eh.VERTICAL_TYPE_UNSPECIFIED,bold:!1,italic:!1,fontSize:1400,fill:void 0,alignment:ti.ALIGNMENT_TYPE_UNSPECIFIED,underline:"none",bottomInset:0,leftInset:0,rightInset:0,topInset:0,useParagraphSpacing:!1},u=(z=(N=n.levelsStyles)==null?void 0:N[0])==null?void 0:z.textStyle;let d,p,m,g,y;const b=r(n.placeholderType),M=o(c,b,s);M!=null&&M.textStyle&&(d=M.textStyle),(v=(P=M==null?void 0:M.levelsStyles)==null?void 0:P[0])!=null&&v.textStyle&&(p=M.levelsStyles[0].textStyle);const x=c!=null&&c.parentLayoutId?(L=t.layouts.find(U=>U.id===c.parentLayoutId))!=null?L:t.layouts.find(U=>U.type==="master"):t.layouts.find(U=>U.type==="master");if(x){const U=r(n.placeholderType),st=o(x,U,s);st!=null&&st.textStyle&&(m=st.textStyle),(B=(C=st==null?void 0:st.levelsStyles)==null?void 0:C[0])!=null&&B.textStyle&&(g=st.levelsStyles[0].textStyle),h==="titleStyle"&&((et=(Y=x==null?void 0:x.titleLevelStyles)==null?void 0:Y[0])!=null&&et.textStyle)?y=x.titleLevelStyles[0].textStyle:h==="bodyStyle"&&((F=(G=x==null?void 0:x.bodyLevelStyles)==null?void 0:G[0])!=null&&F.textStyle)?y=x.bodyLevelStyles[0].textStyle:(H=(D=x==null?void 0:x.otherLevelStyles)==null?void 0:D[0])!=null&&H.textStyle&&(y=x.otherLevelStyles[0].textStyle)}const w=(j=n.fontReference)!=null&&j.color?{fill:{type:ih.FILL_TYPE_SOLID,color:n.fontReference.color,gradientStops:[]}}:void 0;return ra(f,w,u,d,p,m,g,y)}function Wr(n){if(!n)return;const t=String(n).trim();if(t){if(/[^A-Za-z0-9_-]/.test(t)){const e=t.replace(/'/g,"\\'");return"'".concat(e,"'")}return t}}function Wh(n,t){var h,l,c,f,u,d,p,m,g,y,b,M,x,w,E,A,N,z,P;if(!n)return{colorMap:{},lineStyleMap:{},effectMap:{}};const e={};if(n.colorScheme)for(const v of n.colorScheme.colors){if(!(v!=null&&v.color))continue;const L=v.color.lastColor?"#".concat(v.color.lastColor):"#".concat(v.color.value);e[v.name]=L}const i={};if(t&&Object.keys(t).length){for(const[v,L]of Object.entries(t)){const C=(h=e[L])!=null?h:e[v];C&&(i[v]=C)}for(const[v,L]of Object.entries(e))i[v]||(i[v]=L);i.bg1||(i.bg1=(c=(l=e.lt1)!=null?l:i.bg1)!=null?c:""),i.bg2||(i.bg2=(u=(f=e.lt2)!=null?f:i.bg2)!=null?u:""),i.tx1||(i.tx1=(p=(d=e.dk1)!=null?d:i.tx1)!=null?p:""),i.tx2||(i.tx2=(g=(m=e.lt2)!=null?m:i.tx2)!=null?g:"")}else{for(const[v,L]of Object.entries(e))i[v]=L;i.bg1=(b=(y=i.lt1)!=null?y:i.bg1)!=null?b:"",i.bg2=(x=(M=i.lt2)!=null?M:i.bg2)!=null?x:"",i.tx1=(E=(w=i.dk1)!=null?w:i.tx1)!=null?E:"",i.tx2=(N=(A=i.lt2)!=null?A:i.tx2)!=null?N:""}const s={},r=(z=n.lineStyleList)!=null?z:[];for(const[v,L]of r.entries())s[v+1]=L;const o={},a=(P=n.effectStyleList)!=null?P:[];for(const[v,L]of a.entries())o[v+1]=L;return{colorMap:i,lineStyleMap:s,effectMap:o}}function $r(n){return typeof n=="number"&&!Number.isNaN(n)}function ci(n,t){return n!=null?n:t!=null?t:void 0}function oa(n,t){var s,r,o,a;if(!n||!((s=n.levelsStyles)!=null&&s.length))return;const e=n.levelsStyles,i=(r=t==null?void 0:t.paragraphStyle)==null?void 0:r.marginLeft;if($r(i)){let h,l=Number.POSITIVE_INFINITY;for(const c of e){const f=(o=c.paragraphStyle)==null?void 0:o.marginLeft;if(!$r(f))continue;const u=Math.abs(f-i);u<l&&(h=c,l=u)}if(h)return h}return(a=e.find(h=>h.level===1))!=null?a:e[0]}function $h(n,t){var i;const e=(i=n==null?void 0:n.paragraphStyle)!=null?i:{};return{bulletCharacter:ci(t==null?void 0:t.bulletCharacter,e.bulletCharacter),marginLeft:ci(t==null?void 0:t.marginLeft,e.marginLeft),indent:ci(t==null?void 0:t.indent,e.indent),lineSpacingPercent:ci(t==null?void 0:t.lineSpacingPercent,e.lineSpacingPercent),lineSpacingPoints:ci(t==null?void 0:t.lineSpacingPoints,e.lineSpacingPoints),autoNumberType:ci(t==null?void 0:t.autoNumberType,e.autoNumberType),autoNumberStartAt:ci(t==null?void 0:t.autoNumberStartAt,e.autoNumberStartAt)}}function Gh(n,t){const e=oa(n,t),i=t==null?void 0:t.spaceBefore,s=t==null?void 0:t.spaceAfter;return{spaceBefore:i!==void 0?i:e==null?void 0:e.spaceBefore,spaceAfter:s!==void 0?s:e==null?void 0:e.spaceAfter}}function Uf(n,t,e){var c,f,u,d,p;const i=e.useLayoutId,s=t.layouts.find(m=>m.id===i),r=s!=null&&s.parentLayoutId?(c=t.layouts.find(m=>m.id===s.parentLayoutId))!=null?c:t.layouts.find(m=>m.type==="master"):t.layouts.find(m=>m.type==="master");if(!r)return{};const a=n.placeholderType!==void 0||n.placeholderIndex!==void 0?sa(n.placeholderType):"otherStyle",h=0,l=a==="titleStyle"?(f=r.titleLevelStyles)==null?void 0:f[h]:a==="bodyStyle"?(u=r.bodyLevelStyles)==null?void 0:u[h]:(d=r.otherLevelStyles)==null?void 0:d[h];return{lineSpacingPercent:(p=l==null?void 0:l.paragraphStyle)==null?void 0:p.lineSpacingPercent,spaceBefore:l==null?void 0:l.spaceBefore,spaceAfter:l==null?void 0:l.spaceAfter}}const ui=14,Yh=1;function Es(n){return n?n*(96/914400):0}const Gr=.1*96,Yr=.05*96;function Vr(n){return n?n/100*(96/72):0}function Ge(n,t=1){return n/100*(96/72)*t}function In(n,t){let e=Math.max(1,Math.floor(n)),i="";for(;e>0;)e--,i=String.fromCharCode(97+e%26)+i,e=Math.floor(e/26);return t?i.toUpperCase():i}function Ur(n,t){let e=Math.max(1,Math.min(3999,Math.floor(n)));const i=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let s="";for(const[r,o]of i)for(;e>=r;)s+=o,e-=r;return t?s:s.toLowerCase()}function Vh(n,t){switch(t){case"arabicPeriod":return"".concat(n,".");case"arabicPlain":return"".concat(n);case"alphaLcPeriod":return"".concat(In(n,!1),".");case"alphaUcPeriod":return"".concat(In(n,!0),".");case"alphaLcParenR":return"".concat(In(n,!1),")");case"alphaUcParenR":return"".concat(In(n,!0),")");case"romanLcPeriod":return"".concat(Ur(n,!1),".");case"romanUcPeriod":return"".concat(Ur(n,!0),".");default:return"".concat(n,".")}}function xr(n,t,e,i,s){var Y,et,G,F,D,H,j,U,st,ft,K,rt,at,X,_,S,T,q,I,it,k,J,lt;if(!n.paragraphs)return;let r=0,o=0,a=0,h=0;if(s!=null&&s.bboxPx)({x:r,y:o,width:a,height:h}=s.bboxPx);else if(n.bbox){const $=(Y=n.bbox.xEmu)!=null?Y:0,nt=(et=n.bbox.yEmu)!=null?et:0,tt=(G=n.bbox.widthEmu)!=null?G:0,ht=(F=n.bbox.heightEmu)!=null?F:0;r=$*Ft,o=nt*Ft,a=tt*Ft,h=ht*Ft}r+=Gr,o+=Yr,a-=Gr*2,h-=Yr*2;const l=(D=s==null?void 0:s.resolvedStyle)!=null?D:n.textStyle,c=(j=(H=e.colorMap)==null?void 0:H.tx1)!=null?j:"#000000",f=(U=s==null?void 0:s.textScale)!=null?U:1,u=(st=s==null?void 0:s.wrap)!=null?st:!0,d=u?a:1e9;function p($,nt,tt,ht,gt,Et,Mt){nt.length!==0&&($.push({segments:nt.slice(),widthPx:tt,heightPx:ht,align:gt,maxPx:Et,offsetPx:Mt}),nt.length=0)}function m($,nt){t.font=$;const tt=new Float32Array(nt.length+1);let ht=0;tt[0]=0;for(let gt=0;gt<nt.length;gt++){const Et=nt[gt];Et&&(ht+=t.measureText(Et).width,tt[gt+1]=ht)}return tt}const g=[],y={};for(let $=0;$<n.paragraphs.length;$++){const nt=n.paragraphs[$];if(!nt)continue;const tt=nt.textStyle,ht=oa(n,nt),gt=$h(ht,nt.paragraphStyle),Et=Gh(n,nt),Mt={spaceBefore:Et.spaceBefore!==void 0?Et.spaceBefore:(ft=s==null?void 0:s.masterDefaults)==null?void 0:ft.spaceBefore,spaceAfter:Et.spaceAfter!==void 0?Et.spaceAfter:(K=s==null?void 0:s.masterDefaults)==null?void 0:K.spaceAfter},yt=(rt=gt.marginLeft)!=null?rt:0,jt=(at=gt.indent)!=null?at:0,de=!!gt.bulletCharacter&&(yt>0||jt<0),Ht=!!gt.autoNumberType&&(yt>0||jt<0),ut=de||Ht;let Q=ut?Es(yt+jt):0;const R=ut?Es(yt):0,O=((S=(_=gt.lineSpacingPercent)!=null?_:(X=s==null?void 0:s.masterDefaults)==null?void 0:X.lineSpacingPercent)!=null?S:Math.round(Yh*1e5))/1e5,ot=Mt.spaceBefore?Vr(Mt.spaceBefore):0;ot>0&&g.push({segments:[],widthPx:0,heightPx:ot,align:"left",maxPx:0,offsetPx:0});const V=[];let Z=0,dt="left",mt=0,xt=!0,vt=!1;const bt=Ht?"".concat(gt.autoNumberType,"|").concat(yt,"|").concat(jt):"";let ne=0;if(Ht){const It=gt.autoNumberStartAt;y[bt]===void 0&&(y[bt]=typeof It=="number"&&It>0?It:1),ne=y[bt]}for(let It=0;It<nt.runs.length;It++){const At=nt.runs[It];if(!At)continue;const wt=ra({},At.textStyle,tt,l),Rt=wt!=null&&wt.fontSize?Ge(wt.fontSize,f):ui*(96/72)*f,Ye=Wr(wt==null?void 0:wt.name),Qi=Ye?"".concat(Ye,", Calibri, Carlito, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif"):"Calibri, Carlito, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif",En=wt!=null&&wt.bold?"500":"normal",Ms=wt!=null&&wt.italic?"italic ":"",se="".concat(Ms).concat(En," ").concat(Rt,"px ").concat(Qi);t.font=se;const Ve=Pt((T=wt==null?void 0:wt.fill)==null?void 0:T.color,e,c);if(dt=(wt==null?void 0:wt.alignment)===ti.ALIGNMENT_TYPE_CENTER?"center":(wt==null?void 0:wt.alignment)===ti.ALIGNMENT_TYPE_RIGHT?"right":"left",mt=Math.max(mt,Rt),ut&&!vt){const Vt=Ht?"".concat(Vh(ne,gt.autoNumberType)," "):"".concat(gt.bulletCharacter," "),me=m(se,Vt),Ne=me[Vt.length]||t.measureText(Vt).width,oe={text:Vt,widthPx:Ne,font:se,fill:Ve,px:Rt,run:At,paraIndex:$,runIndex:It,charStart:0,charEnd:Vt.length,advance:me};if(V.push(oe),Z+=Ne,mt=Math.max(mt,Rt),vt=!0,xt){const ae=Es(yt);Q=Math.max(0,ae-Ne)}Ht&&(y[bt]=ne+1)}if(!At.text||At.text.length===0){const Vt={text:"",widthPx:0,font:se,fill:Ve,px:Rt,run:At,paraIndex:$,runIndex:It,charStart:0,charEnd:0,advance:new Float32Array(1)};V.push(Vt),mt=Math.max(mt,Rt);continue}let re=0;const tn=At.text.split("\n");for(let Vt=0;Vt<tn.length;Vt++){const me=tn[Vt];if(!me)continue;const Ne=Array.from(me.matchAll(/(\s+|\S+)/g)).map(oe=>oe[0]);for(let oe=0;oe<Ne.length;oe++){const ae=Ne[oe];if(!ae)continue;let Ut=ae;const ws=/^\s+$/.test(ae);for(;Ut.length>0;){const Si=d-Z;if(u&&Si<=0&&V.length){const ct=mt||ui*1.3333333333333333*f;p(g,V,Z,ct*O,dt,ct,xt?Q:R),Z=0,mt=0,xt=!1;continue}t.font=se;const en=t.measureText(Ut).width;if(en<=Si){const ct=m(se,Ut),Tt={text:Ut,widthPx:en,font:se,fill:Ve,px:Rt,run:At,paraIndex:$,runIndex:It,charStart:re,charEnd:re+Ut.length,advance:ct};V.push(Tt),Z+=en,mt=Math.max(mt,Rt),re+=Ut.length,Ut="";break}if(u&&!ws&&Z>0){const ct=mt||ui*1.3333333333333333*f;p(g,V,Z,ct*O,dt,ct,xt?Q:R),Z=0,mt=0,xt=!1;continue}const Ai=m(se,Ut);let ai=0,Ei=Ut.length;for(;ai<Ei;){const ct=Math.ceil((ai+Ei)/2);Ai[ct]&&Ai[ct]<=Si?ai=ct:Ei=ct-1}let Ue=ai;Ue===0&&(Ue=1);const Xe=Ut.slice(0,Ue),nn=Ai[Ue]||t.measureText(Xe).width,vn={text:Xe,widthPx:nn,font:se,fill:Ve,px:Rt,run:At,paraIndex:$,runIndex:It,charStart:re,charEnd:re+Xe.length,advance:m(se,Xe)};if(V.push(vn),Z+=nn,mt=Math.max(mt,Rt),re+=Xe.length,Ut=Ut.slice(Ue),Ut.length>0){const ct=mt||ui*1.3333333333333333*f;p(g,V,Z,ct*O,dt,ct,xt?Q:R),Z=0,mt=0,xt=!1}}}if(Vt<tn.length-1){if(V.length===0){const ae={text:"",widthPx:0,font:se,fill:Ve,px:Rt,run:At,paraIndex:$,runIndex:It,charStart:re,charEnd:re,advance:new Float32Array(1)};V.push(ae)}const oe=mt||ui*(96/72)*f;p(g,V,Z,oe*O,dt,oe,xt?Q:R),Z=0,mt=0,xt=!1}}}const zt=mt||ui*(96/72)*f;if(V.length===0){const It=Wr((q=l==null?void 0:l.name)!=null?q:l==null?void 0:l.typeface),At=It?"".concat(It,", Calibri, Carlito, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif"):"Calibri, Carlito, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif",wt=ui*(96/72)*f,Qi={text:"",widthPx:0,font:"".concat(wt,"px ").concat(At),fill:c,px:wt,run:{text:"",citations:[]},paraIndex:$,runIndex:0,charStart:0,charEnd:0,advance:new Float32Array(1)};V.push(Qi)}p(g,V,Z,zt*O+(Mt.spaceAfter?Vr(Mt.spaceAfter):0),dt,zt,xt?Q:R)}if(!g.length)return;const b=(I=l==null?void 0:l.anchor)!=null?I:Qn.ANCHOR_TYPE_TOP,M=g.reduce(($,nt)=>$+nt.heightPx,0);let x=b===Qn.ANCHOR_TYPE_BOTTOM?o+(h-M):b===Qn.ANCHOR_TYPE_MIDDLE?o+(h-M)/2:o;const w=(s==null?void 0:s.mode)==="layout";w||(t.textBaseline="top");const A=((it=l==null?void 0:l.rotation)!=null?it:0)*Math.PI/180,N=[],z=x;!w&&A!==0&&(t.save(),t.translate(r,z),t.rotate(A));for(const $ of g){let nt=$.align==="center"?r+(a-$.widthPx)/2:$.align==="right"?r+a-$.widthPx:r+((k=$.offsetPx)!=null?k:0);for(const tt of $.segments){if(!w){t.font=tt.font,t.fillStyle=tt.fill;const ht=$.maxPx-tt.px;if((lt=(J=tt.run)==null?void 0:J.hyperlink)!=null&&lt.uri){const gt={x:nt,y:x+($.maxPx-tt.px),width:tt.widthPx,height:tt.px,url:tt.run.hyperlink.uri};N.push(gt),i==null||i.push(gt)}A!==0?t.fillText(tt.text,nt-r,x+ht-z):t.fillText(tt.text,nt,x+ht)}nt+=tt.widthPx}x+=$.heightPx}!w&&A!==0&&t.restore();const P=g.reduce(($,nt)=>$+nt.heightPx,0),v=a,L=P,C=Math.abs(v*Math.cos(A))+Math.abs(L*Math.sin(A)),B=Math.abs(v*Math.sin(A))+Math.abs(L*Math.cos(A));return{x:r,y:x-P,width:A!==0?C:a,height:A!==0?B:P,lines:g.map($=>{var nt;return{segments:$.segments,widthPx:$.widthPx,heightPx:$.heightPx,align:$.align,maxPx:$.maxPx,offsetPx:(nt=$.offsetPx)!=null?nt:0}}),linkRects:N}}function Uh(n){var e;const t=n.layouts.find(i=>i.type==="master");return(e=t==null?void 0:t.colorMap)!=null?e:void 0}function Xh(n,t,e){var s;const i=e.useLayoutId;if(n.bbox&&Hh(n.bbox)&&t){const{xEmu:r,yEmu:o,widthEmu:a,heightEmu:h}=n.bbox;return{x:(r!=null?r:0)*Ft,y:(o!=null?o:0)*Ft,width:(a!=null?a:0)*Ft,height:(h!=null?h:0)*Ft}}if(n.placeholderIndex!==void 0){const r=(s=n.placeholderIndex)!=null?s:0,o=t.layouts.find(h=>h.id===i),a=o==null?void 0:o.elements.find(h=>{var l;return((l=h.placeholderIndex)!=null?l:0)===r});if(a!=null&&a.bbox){const{xEmu:h,yEmu:l,widthEmu:c,heightEmu:f}=a.bbox;return{x:(h!=null?h:0)*Ft,y:(l!=null?l:0)*Ft,width:(c!=null?c:0)*Ft,height:(f!=null?f:0)*Ft}}if((o==null?void 0:o.parentLayoutId)!==i){const h=t.layouts.find(c=>c.type==="master"),l=h==null?void 0:h.elements.find(c=>{var f;return((f=c.placeholderIndex)!=null?f:0)===r});if(l!=null&&l.bbox){const{xEmu:c,yEmu:f,widthEmu:u,heightEmu:d}=l.bbox;return{x:(c!=null?c:0)*Ft,y:(f!=null?f:0)*Ft,width:(u!=null?u:0)*Ft,height:(d!=null?d:0)*Ft}}}}return{x:0,y:0,width:0,height:0}}function qh(n){for(var t=n.length/6|0,e=new Array(t),i=0;i<t;)e[i]="#"+n.slice(i*6,++i*6);return e}const Zh=qh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),St="Segoe UI, Helvetica, Arial, sans-serif",ji=10,br=11,as=10,Gt="#666",ye=Zh,aa=.6,Mr=2,ha={top:12,right:12,bottom:12,left:12},la=ch({decimal:".",thousands:",",grouping:[3],currency:["","$"],percent:" %"});function jh(n){return n.categories.length>0?n.categories.length:n.series.reduce((t,e)=>Math.max(t,e.values.length),0)}function ca(n){var d,p,m;const t=n.type===pt.CHART_TYPE_AREA||n.type===pt.CHART_TYPE_AREA_3D,e=n.type===pt.CHART_TYPE_LINE||n.type===pt.CHART_TYPE_LINE_3D,i=(d=n.barOptions)==null?void 0:d.grouping,s=(p=n.areaOptions)==null?void 0:p.grouping,r=(m=n.lineOptions)==null?void 0:m.grouping;let o=!1,a=!1;if(t?(o=s===ss.AREA_GROUPING_STACKED,a=s===ss.AREA_GROUPING_PERCENT_STACKED):e?(o=r===rs.LINE_GROUPING_STACKED,a=r===rs.LINE_GROUPING_PERCENT_STACKED):(o=i===We.BAR_GROUPING_STACKED,a=i===We.BAR_GROUPING_PERCENT_STACKED),o){const g=jh(n);let y=0,b=0;for(let M=0;M<g;M++){let x=0,w=0;n.series.forEach(E=>{var N;const A=(N=E.values[M])!=null?N:0;A>=0?x+=A:w+=A}),x>y&&(y=x),w<b&&(b=w)}return{min:Math.min(0,b),max:Math.max(0,y)}}if(a){const g=n.series.some(b=>b.values.some(M=>(M!=null?M:0)<0)),y=n.series.some(b=>b.values.some(M=>(M!=null?M:0)>0));return{min:g?-1:0,max:y?1:0}}const h=n.series.flatMap(g=>g.values),[l,c]=ke(h),f=Number.isFinite(l)?l:0,u=Number.isFinite(c)?c:0;return{min:f,max:u}}function Jh(n,t){var i,s;if(n.categories.length>0)return n.categories;const e=(s=(i=n.series[t])==null?void 0:i.categories)!=null?s:[];return e.length>0?e:[]}function ua(n,t){var d,p,m,g,y,b,M;const e=t!=null?t:new Set,i=n.series.findIndex((x,w)=>!e.has(w));if(i===-1)return{categories:[],seriesIndex:-1,segments:[],extents:{min:0,max:0}};const s=n.series[i],r=(d=s==null?void 0:s.values)!=null?d:[],o=Jh(n,i),a=new Set((m=(p=n.waterfallOptions)==null?void 0:p.subtotalIndices)!=null?m:[]),h=Math.max(r.length,o.length);let l=0,c=0,f=0;const u=[];for(let x=0;x<h;x++){const w=(g=r[x])!=null?g:0,E=a.has(x),A=(M=(b=o[x])!=null?b:(y=s==null?void 0:s.categories)==null?void 0:y[x])!=null?M:"Item ".concat(x+1),N=l;let z,P,v,L;E?(z=0,P=w,v=w,L="total"):(z=l,v=l+w,P=v,L=w>=0?"increase":"decrease"),l=v,c=Math.min(c,z,P),f=Math.max(f,z,P),u.push({index:x,category:A,value:w,start:z,end:P,cumulativeBefore:N,cumulativeAfter:v,isSubtotal:E,kind:L,labelValue:E?v:w})}return c=Math.min(c,0),f=Math.max(f,0),{categories:o,seriesIndex:i,segments:u,extents:{min:c,max:f}}}function Xr(n,t){var d,p,m;const e=n.categories.length>0?n.categories:(p=(d=n.series[0])==null?void 0:d.categories)!=null?p:[];let i,s;if(n.type===pt.CHART_TYPE_WATERFALL){const g=ua(n);i=g.extents.min,s=g.extents.max}else{const g=ca(n);i=g.min,s=g.max}const r=Math.min(0,i),o=Math.max(0,s),a=(m=n.barOptions)==null?void 0:m.gapWidth,h=typeof a=="number"&&isFinite(a)?1-1/(1+a/100):aa,l=n.type===pt.CHART_TYPE_LINE||n.type===pt.CHART_TYPE_LINE_3D,c=n.type===pt.CHART_TYPE_AREA||n.type===pt.CHART_TYPE_AREA_3D,f=l||c?uh().domain(e).range([t.x,t.x+t.width]).padding(l?.5:0):qi().domain(e).range([t.x,t.x+t.width]).paddingInner(h).paddingOuter(.5),u=si().domain([Math.min(0,r),o]).nice().range([t.y+t.height,t.y]);return{x:f,y:u}}function Sn(n){return typeof n.bandwidth=="function"}function xn(n,t){if(t!==void 0){if(Sn(n)){const e=n(t);return e!==void 0?e+n.bandwidth()/2:void 0}return n(t)}}function Kh(n){return n===pt.CHART_TYPE_PIE||n===pt.CHART_TYPE_PIE_3D||n===pt.CHART_TYPE_DOUGHNUT}function fa(n,t,e){if(n.measureText(t).width<=e)return t;const i="…";let s=0,r=t.length;for(;s<r;){const o=Math.ceil((s+r)/2);n.measureText(t.slice(0,o)+i).width<=e?s=o:r=o-1}return t.slice(0,s)+i}function Qt(n,t){var o,a,h,l,c,f,u;const e=(a=(o=n==null?void 0:n.line)==null?void 0:o.fill)!=null&&a.color?Pt(n.line.fill.color,t):Gt,i=(l=(h=n==null?void 0:n.textStyle)==null?void 0:h.fill)!=null&&l.color?Pt(n.textStyle.fill.color,t):e,s=(c=n==null?void 0:n.textStyle)!=null&&c.fontSize?Ge(n.textStyle.fontSize):ji,r=(u=(f=n==null?void 0:n.majorGridlines)==null?void 0:f.fill)!=null&&u.color?Pt(n.majorGridlines.fill.color,t):void 0;return{lineColor:e,textColor:i,fontSize:s,gridLineColor:r}}function da(n){var i;const t=(i=n==null?void 0:n.textStyle)==null?void 0:i.rotation;if(typeof t!="number"||Number.isNaN(t)||t===-1e3)return 0;let e=t;if(Math.abs(e)>360){const s=e/6e4;Number.isFinite(s)&&Math.abs(s)<=360?e=s:Number.isFinite(e)&&(e=e%360)}return!Number.isFinite(e)||(Math.abs(e)>=360&&(e=e%360),Math.abs(e)<.001)?0:e}var vs={exports:{}},qr;function Qh(){return qr||(qr=1,(function(n){var t={},e=function(s){s.version="0.11.2";function r(_){for(var S="",T=_.length-1;T>=0;)S+=_.charAt(T--);return S}function o(_,S){for(var T="";T.length<S;)T+=_;return T}function a(_,S){var T=""+_;return T.length>=S?T:o("0",S-T.length)+T}function h(_,S){var T=""+_;return T.length>=S?T:o(" ",S-T.length)+T}function l(_,S){var T=""+_;return T.length>=S?T:T+o(" ",S-T.length)}function c(_,S){var T=""+Math.round(_);return T.length>=S?T:o("0",S-T.length)+T}function f(_,S){var T=""+_;return T.length>=S?T:o("0",S-T.length)+T}var u=Math.pow(2,32);function d(_,S){if(_>u||_<-u)return c(_,S);var T=Math.round(_);return f(T,S)}function p(_,S){return S=S||0,_.length>=7+S&&(_.charCodeAt(S)|32)===103&&(_.charCodeAt(S+1)|32)===101&&(_.charCodeAt(S+2)|32)===110&&(_.charCodeAt(S+3)|32)===101&&(_.charCodeAt(S+4)|32)===114&&(_.charCodeAt(S+5)|32)===97&&(_.charCodeAt(S+6)|32)===108}var m=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],g=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function y(_){_[0]="General",_[1]="0",_[2]="0.00",_[3]="#,##0",_[4]="#,##0.00",_[9]="0%",_[10]="0.00%",_[11]="0.00E+00",_[12]="# ?/?",_[13]="# ??/??",_[14]="m/d/yy",_[15]="d-mmm-yy",_[16]="d-mmm",_[17]="mmm-yy",_[18]="h:mm AM/PM",_[19]="h:mm:ss AM/PM",_[20]="h:mm",_[21]="h:mm:ss",_[22]="m/d/yy h:mm",_[37]="#,##0 ;(#,##0)",_[38]="#,##0 ;[Red](#,##0)",_[39]="#,##0.00;(#,##0.00)",_[40]="#,##0.00;[Red](#,##0.00)",_[45]="mm:ss",_[46]="[h]:mm:ss",_[47]="mmss.0",_[48]="##0.0E+0",_[49]="@",_[56]='"上午/下午 "hh"時"mm"分"ss"秒 "'}var b={};y(b);var M=[],x=0;for(x=5;x<=8;++x)M[x]=32+x;for(x=23;x<=26;++x)M[x]=0;for(x=27;x<=31;++x)M[x]=14;for(x=50;x<=58;++x)M[x]=14;for(x=59;x<=62;++x)M[x]=x-58;for(x=67;x<=68;++x)M[x]=x-58;for(x=72;x<=75;++x)M[x]=x-58;for(x=67;x<=68;++x)M[x]=x-57;for(x=76;x<=78;++x)M[x]=x-56;for(x=79;x<=81;++x)M[x]=x-34;var w=[];w[5]=w[63]='"$"#,##0_);\\("$"#,##0\\)',w[6]=w[64]='"$"#,##0_);[Red]\\("$"#,##0\\)',w[7]=w[65]='"$"#,##0.00_);\\("$"#,##0.00\\)',w[8]=w[66]='"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',w[41]='_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',w[42]='_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',w[43]='_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',w[44]='_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)';function E(_,S,T){for(var q=_<0?-1:1,I=_*q,it=0,k=1,J=0,lt=1,$=0,nt=0,tt=Math.floor(I);$<S&&(tt=Math.floor(I),J=tt*k+it,nt=tt*$+lt,!(I-tt<5e-8));)I=1/(I-tt),it=k,k=J,lt=$,$=nt;if(nt>S&&($>S?(nt=lt,J=it):(nt=$,J=k)),!T)return[0,q*J,nt];var ht=Math.floor(q*J/nt);return[ht,q*J-ht*nt,nt]}function A(_,S,T){if(_>2958465||_<0)return null;var q=_|0,I=Math.floor(86400*(_-q)),it=0,k=[],J={D:q,T:I,u:86400*(_-q)-I,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(J.u)<1e-6&&(J.u=0),S&&S.date1904&&(q+=1462),J.u>.9999&&(J.u=0,++I==86400&&(J.T=I=0,++q,++J.D)),q===60)k=T?[1317,10,29]:[1900,2,29],it=3;else if(q===0)k=T?[1317,8,29]:[1900,1,0],it=6;else{q>60&&--q;var lt=new Date(1900,0,1);lt.setDate(lt.getDate()+q-1),k=[lt.getFullYear(),lt.getMonth()+1,lt.getDate()],it=lt.getDay(),q<60&&(it=(it+6)%7),T&&(it=Y(lt,k))}return J.y=k[0],J.m=k[1],J.d=k[2],J.S=I%60,I=Math.floor(I/60),J.M=I%60,I=Math.floor(I/60),J.H=I,J.q=it,J}s.parse_date_code=A;var N=new Date(1899,11,31,0,0,0),z=N.getTime(),P=new Date(1900,2,1,0,0,0);function v(_,S){var T=_.getTime();return S?T-=1262304e5:_>=P&&(T+=864e5),(T-(z+(_.getTimezoneOffset()-N.getTimezoneOffset())*6e4))/864e5}function L(_){return _.toString(10)}s._general_int=L;var C=(function(){var S=/(?:\.0*|(\.\d*[1-9])0+)$/;function T($){return $.indexOf(".")==-1?$:$.replace(S,"$1")}var q=/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,I=/(E[+-])(\d)$/;function it($){return $.indexOf("E")==-1?$:$.replace(q,"$1E").replace(I,"$10$2")}function k($){var nt=$<0?12:11,tt=T($.toFixed(12));return tt.length<=nt||(tt=$.toPrecision(10),tt.length<=nt)?tt:$.toExponential(5)}function J($){var nt=T($.toFixed(11));return nt.length>($<0?12:11)||nt==="0"||nt==="-0"?$.toPrecision(6):nt}function lt($){var nt=Math.floor(Math.log(Math.abs($))*Math.LOG10E),tt;return nt>=-4&&nt<=-1?tt=$.toPrecision(10+nt):Math.abs(nt)<=9?tt=k($):nt===10?tt=$.toFixed(10).substr(0,12):tt=J($),T(it(tt.toUpperCase()))}return lt})();s._general_num=C;function B(_,S){switch(typeof _){case"string":return _;case"boolean":return _?"TRUE":"FALSE";case"number":return(_|0)===_?_.toString(10):C(_);case"undefined":return"";case"object":if(_==null)return"";if(_ instanceof Date)return at(14,v(_,S&&S.date1904),S)}throw new Error("unsupported value in General format: "+_)}s._general=B;function Y(_,S){S[0]-=581;var T=_.getDay();return _<60&&(T=(T+6)%7),T}function et(_,S,T,q){var I="",it=0,k=0,J=T.y,lt,$=0;switch(_){case 98:J=T.y+543;case 121:switch(S.length){case 1:case 2:lt=J%100,$=2;break;default:lt=J%1e4,$=4;break}break;case 109:switch(S.length){case 1:case 2:lt=T.m,$=S.length;break;case 3:return g[T.m-1][1];case 5:return g[T.m-1][0];default:return g[T.m-1][2]}break;case 100:switch(S.length){case 1:case 2:lt=T.d,$=S.length;break;case 3:return m[T.q][0];default:return m[T.q][1]}break;case 104:switch(S.length){case 1:case 2:lt=1+(T.H+11)%12,$=S.length;break;default:throw"bad hour format: "+S}break;case 72:switch(S.length){case 1:case 2:lt=T.H,$=S.length;break;default:throw"bad hour format: "+S}break;case 77:switch(S.length){case 1:case 2:lt=T.M,$=S.length;break;default:throw"bad minute format: "+S}break;case 115:if(S!="s"&&S!="ss"&&S!=".0"&&S!=".00"&&S!=".000")throw"bad second format: "+S;return T.u===0&&(S=="s"||S=="ss")?a(T.S,S.length):(q>=2?k=q===3?1e3:100:k=q===1?10:1,it=Math.round(k*(T.S+T.u)),it>=60*k&&(it=0),S==="s"?it===0?"0":""+it/k:(I=a(it,2+q),S==="ss"?I.substr(0,2):"."+I.substr(2,S.length-1)));case 90:switch(S){case"[h]":case"[hh]":lt=T.D*24+T.H;break;case"[m]":case"[mm]":lt=(T.D*24+T.H)*60+T.M;break;case"[s]":case"[ss]":lt=((T.D*24+T.H)*60+T.M)*60+Math.round(T.S+T.u);break;default:throw"bad abstime format: "+S}$=S.length===3?1:2;break;case 101:lt=J,$=1;break}var nt=$>0?a(lt,$):"";return nt}function G(_){var S=3;if(_.length<=S)return _;for(var T=_.length%S,q=_.substr(0,T);T!=_.length;T+=S)q+=(q.length>0?",":"")+_.substr(T,S);return q}var F=(function(){var S=/%/g;function T(Q,R,O){var ot=R.replace(S,""),V=R.length-ot.length;return F(Q,ot,O*Math.pow(10,2*V))+o("%",V)}function q(Q,R,O){for(var ot=R.length-1;R.charCodeAt(ot-1)===44;)--ot;return F(Q,R.substr(0,ot),O/Math.pow(10,3*(R.length-ot)))}function I(Q,R){var O,ot=Q.indexOf("E")-Q.indexOf(".")-1;if(Q.match(/^#+0.0E\+0$/)){if(R==0)return"0.0E+0";if(R<0)return"-"+I(Q,-R);var V=Q.indexOf(".");V===-1&&(V=Q.indexOf("E"));var Z=Math.floor(Math.log(R)*Math.LOG10E)%V;if(Z<0&&(Z+=V),O=(R/Math.pow(10,Z)).toPrecision(ot+1+(V+Z)%V),O.indexOf("e")===-1){var dt=Math.floor(Math.log(R)*Math.LOG10E);for(O.indexOf(".")===-1?O=O.charAt(0)+"."+O.substr(1)+"E+"+(dt-O.length+Z):O+="E+"+(dt-Z);O.substr(0,2)==="0.";)O=O.charAt(0)+O.substr(2,V)+"."+O.substr(2+V),O=O.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");O=O.replace(/\+-/,"-")}O=O.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(mt,xt,vt,bt){return xt+vt+bt.substr(0,(V+Z)%V)+"."+bt.substr(Z)+"E"})}else O=R.toExponential(ot);return Q.match(/E\+00$/)&&O.match(/e[+-]\d$/)&&(O=O.substr(0,O.length-1)+"0"+O.charAt(O.length-1)),Q.match(/E\-/)&&O.match(/e\+/)&&(O=O.replace(/e\+/,"e")),O.replace("e","E")}var it=/# (\?+)( ?)\/( ?)(\d+)/;function k(Q,R,O){var ot=parseInt(Q[4],10),V=Math.round(R*ot),Z=Math.floor(V/ot),dt=V-Z*ot,mt=ot;return O+(Z===0?"":""+Z)+" "+(dt===0?o(" ",Q[1].length+1+Q[4].length):h(dt,Q[1].length)+Q[2]+"/"+Q[3]+a(mt,Q[4].length))}function J(Q,R,O){return O+(R===0?"":""+R)+o(" ",Q[1].length+2+Q[4].length)}var lt=/^#*0*\.([0#]+)/,$=/\).*[0#]/,nt=/\(###\) ###\\?-####/;function tt(Q){for(var R="",O,ot=0;ot!=Q.length;++ot)switch(O=Q.charCodeAt(ot)){case 35:break;case 63:R+=" ";break;case 48:R+="0";break;default:R+=String.fromCharCode(O)}return R}function ht(Q,R){var O=Math.pow(10,R);return""+Math.round(Q*O)/O}function gt(Q,R){var O=Q-Math.floor(Q),ot=Math.pow(10,R);return R<(""+Math.round(O*ot)).length?0:Math.round(O*ot)}function Et(Q,R){return R<(""+Math.round((Q-Math.floor(Q))*Math.pow(10,R))).length?1:0}function Mt(Q){return Q<2147483647&&Q>-2147483648?""+(Q>=0?Q|0:Q-1|0):""+Math.floor(Q)}function yt(Q,R,O){if(Q.charCodeAt(0)===40&&!R.match($)){var ot=R.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return O>=0?yt("n",ot,O):"("+yt("n",ot,-O)+")"}if(R.charCodeAt(R.length-1)===44)return q(Q,R,O);if(R.indexOf("%")!==-1)return T(Q,R,O);if(R.indexOf("E")!==-1)return I(R,O);if(R.charCodeAt(0)===36)return"$"+yt(Q,R.substr(R.charAt(1)==" "?2:1),O);var V,Z,dt,mt,xt=Math.abs(O),vt=O<0?"-":"";if(R.match(/^00+$/))return vt+d(xt,R.length);if(R.match(/^[#?]+$/))return V=d(O,0),V==="0"&&(V=""),V.length>R.length?V:tt(R.substr(0,R.length-V.length))+V;if(Z=R.match(it))return k(Z,xt,vt);if(R.match(/^#+0+$/))return vt+d(xt,R.length-R.indexOf("0"));if(Z=R.match(lt))return V=ht(O,Z[1].length).replace(/^([^\.]+)$/,"$1."+tt(Z[1])).replace(/\.$/,"."+tt(Z[1])).replace(/\.(\d*)$/,function(At,wt){return"."+wt+o("0",tt(Z[1]).length-wt.length)}),R.indexOf("0.")!==-1?V:V.replace(/^0\./,".");if(R=R.replace(/^#+([0.])/,"$1"),Z=R.match(/^(0*)\.(#*)$/))return vt+ht(xt,Z[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,Z[1].length?"0.":".");if(Z=R.match(/^#{1,3},##0(\.?)$/))return vt+G(d(xt,0));if(Z=R.match(/^#,##0\.([#0]*0)$/))return O<0?"-"+yt(Q,R,-O):G(""+(Math.floor(O)+Et(O,Z[1].length)))+"."+a(gt(O,Z[1].length),Z[1].length);if(Z=R.match(/^#,#*,#0/))return yt(Q,R.replace(/^#,#*,/,""),O);if(Z=R.match(/^([0#]+)(\\?-([0#]+))+$/))return V=r(yt(Q,R.replace(/[\\-]/g,""),O)),dt=0,r(r(R.replace(/\\/g,"")).replace(/[0#]/g,function(At){return dt<V.length?V.charAt(dt++):At==="0"?"0":""}));if(R.match(nt))return V=yt(Q,"##########",O),"("+V.substr(0,3)+") "+V.substr(3,3)+"-"+V.substr(6);var bt="";if(Z=R.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return dt=Math.min(Z[4].length,7),mt=E(xt,Math.pow(10,dt)-1,!1),V=""+vt,bt=F("n",Z[1],mt[1]),bt.charAt(bt.length-1)==" "&&(bt=bt.substr(0,bt.length-1)+"0"),V+=bt+Z[2]+"/"+Z[3],bt=l(mt[2],dt),bt.length<Z[4].length&&(bt=tt(Z[4].substr(Z[4].length-bt.length))+bt),V+=bt,V;if(Z=R.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return dt=Math.min(Math.max(Z[1].length,Z[4].length),7),mt=E(xt,Math.pow(10,dt)-1,!0),vt+(mt[0]||(mt[1]?"":"0"))+" "+(mt[1]?h(mt[1],dt)+Z[2]+"/"+Z[3]+l(mt[2],dt):o(" ",2*dt+1+Z[2].length+Z[3].length));if(Z=R.match(/^[#0?]+$/))return V=d(O,0),R.length<=V.length?V:tt(R.substr(0,R.length-V.length))+V;if(Z=R.match(/^([#0?]+)\.([#0]+)$/)){V=""+O.toFixed(Math.min(Z[2].length,10)).replace(/([^0])0+$/,"$1"),dt=V.indexOf(".");var ne=R.indexOf(".")-dt,zt=R.length-V.length-ne;return tt(R.substr(0,ne)+V+R.substr(R.length-zt))}if(Z=R.match(/^00,000\.([#0]*0)$/))return dt=gt(O,Z[1].length),O<0?"-"+yt(Q,R,-O):G(Mt(O)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(At){return"00,"+(At.length<3?a(0,3-At.length):"")+At})+"."+a(dt,Z[1].length);switch(R){case"###,##0.00":return yt(Q,"#,##0.00",O);case"###,###":case"##,###":case"#,###":var It=G(d(xt,0));return It!=="0"?vt+It:"";case"###,###.00":return yt(Q,"###,##0.00",O).replace(/^0\./,".");case"#,###.00":return yt(Q,"#,##0.00",O).replace(/^0\./,".")}throw new Error("unsupported format |"+R+"|")}function jt(Q,R,O){for(var ot=R.length-1;R.charCodeAt(ot-1)===44;)--ot;return F(Q,R.substr(0,ot),O/Math.pow(10,3*(R.length-ot)))}function de(Q,R,O){var ot=R.replace(S,""),V=R.length-ot.length;return F(Q,ot,O*Math.pow(10,2*V))+o("%",V)}function Ht(Q,R){var O,ot=Q.indexOf("E")-Q.indexOf(".")-1;if(Q.match(/^#+0.0E\+0$/)){if(R==0)return"0.0E+0";if(R<0)return"-"+Ht(Q,-R);var V=Q.indexOf(".");V===-1&&(V=Q.indexOf("E"));var Z=Math.floor(Math.log(R)*Math.LOG10E)%V;if(Z<0&&(Z+=V),O=(R/Math.pow(10,Z)).toPrecision(ot+1+(V+Z)%V),!O.match(/[Ee]/)){var dt=Math.floor(Math.log(R)*Math.LOG10E);O.indexOf(".")===-1?O=O.charAt(0)+"."+O.substr(1)+"E+"+(dt-O.length+Z):O+="E+"+(dt-Z),O=O.replace(/\+-/,"-")}O=O.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(mt,xt,vt,bt){return xt+vt+bt.substr(0,(V+Z)%V)+"."+bt.substr(Z)+"E"})}else O=R.toExponential(ot);return Q.match(/E\+00$/)&&O.match(/e[+-]\d$/)&&(O=O.substr(0,O.length-1)+"0"+O.charAt(O.length-1)),Q.match(/E\-/)&&O.match(/e\+/)&&(O=O.replace(/e\+/,"e")),O.replace("e","E")}function ut(Q,R,O){if(Q.charCodeAt(0)===40&&!R.match($)){var ot=R.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return O>=0?ut("n",ot,O):"("+ut("n",ot,-O)+")"}if(R.charCodeAt(R.length-1)===44)return jt(Q,R,O);if(R.indexOf("%")!==-1)return de(Q,R,O);if(R.indexOf("E")!==-1)return Ht(R,O);if(R.charCodeAt(0)===36)return"$"+ut(Q,R.substr(R.charAt(1)==" "?2:1),O);var V,Z,dt,mt,xt=Math.abs(O),vt=O<0?"-":"";if(R.match(/^00+$/))return vt+a(xt,R.length);if(R.match(/^[#?]+$/))return V=""+O,O===0&&(V=""),V.length>R.length?V:tt(R.substr(0,R.length-V.length))+V;if(Z=R.match(it))return J(Z,xt,vt);if(R.match(/^#+0+$/))return vt+a(xt,R.length-R.indexOf("0"));if(Z=R.match(lt))return V=(""+O).replace(/^([^\.]+)$/,"$1."+tt(Z[1])).replace(/\.$/,"."+tt(Z[1])),V=V.replace(/\.(\d*)$/,function(At,wt){return"."+wt+o("0",tt(Z[1]).length-wt.length)}),R.indexOf("0.")!==-1?V:V.replace(/^0\./,".");if(R=R.replace(/^#+([0.])/,"$1"),Z=R.match(/^(0*)\.(#*)$/))return vt+(""+xt).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,Z[1].length?"0.":".");if(Z=R.match(/^#{1,3},##0(\.?)$/))return vt+G(""+xt);if(Z=R.match(/^#,##0\.([#0]*0)$/))return O<0?"-"+ut(Q,R,-O):G(""+O)+"."+o("0",Z[1].length);if(Z=R.match(/^#,#*,#0/))return ut(Q,R.replace(/^#,#*,/,""),O);if(Z=R.match(/^([0#]+)(\\?-([0#]+))+$/))return V=r(ut(Q,R.replace(/[\\-]/g,""),O)),dt=0,r(r(R.replace(/\\/g,"")).replace(/[0#]/g,function(At){return dt<V.length?V.charAt(dt++):At==="0"?"0":""}));if(R.match(nt))return V=ut(Q,"##########",O),"("+V.substr(0,3)+") "+V.substr(3,3)+"-"+V.substr(6);var bt="";if(Z=R.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return dt=Math.min(Z[4].length,7),mt=E(xt,Math.pow(10,dt)-1,!1),V=""+vt,bt=F("n",Z[1],mt[1]),bt.charAt(bt.length-1)==" "&&(bt=bt.substr(0,bt.length-1)+"0"),V+=bt+Z[2]+"/"+Z[3],bt=l(mt[2],dt),bt.length<Z[4].length&&(bt=tt(Z[4].substr(Z[4].length-bt.length))+bt),V+=bt,V;if(Z=R.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return dt=Math.min(Math.max(Z[1].length,Z[4].length),7),mt=E(xt,Math.pow(10,dt)-1,!0),vt+(mt[0]||(mt[1]?"":"0"))+" "+(mt[1]?h(mt[1],dt)+Z[2]+"/"+Z[3]+l(mt[2],dt):o(" ",2*dt+1+Z[2].length+Z[3].length));if(Z=R.match(/^[#0?]+$/))return V=""+O,R.length<=V.length?V:tt(R.substr(0,R.length-V.length))+V;if(Z=R.match(/^([#0]+)\.([#0]+)$/)){V=""+O.toFixed(Math.min(Z[2].length,10)).replace(/([^0])0+$/,"$1"),dt=V.indexOf(".");var ne=R.indexOf(".")-dt,zt=R.length-V.length-ne;return tt(R.substr(0,ne)+V+R.substr(R.length-zt))}if(Z=R.match(/^00,000\.([#0]*0)$/))return O<0?"-"+ut(Q,R,-O):G(""+O).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(At){return"00,"+(At.length<3?a(0,3-At.length):"")+At})+"."+a(0,Z[1].length);switch(R){case"###,###":case"##,###":case"#,###":var It=G(""+xt);return It!=="0"?vt+It:"";default:if(R.match(/\.[0#?]*$/))return ut(Q,R.slice(0,R.lastIndexOf(".")),O)+tt(R.slice(R.lastIndexOf(".")))}throw new Error("unsupported format |"+R+"|")}return function(R,O,ot){return(ot|0)===ot?ut(R,O,ot):yt(R,O,ot)}})();function D(_){for(var S=[],T=!1,q=0,I=0;q<_.length;++q)switch(_.charCodeAt(q)){case 34:T=!T;break;case 95:case 42:case 92:++q;break;case 59:S[S.length]=_.substr(I,q-I),I=q+1}if(S[S.length]=_.substr(I),T===!0)throw new Error("Format |"+_+"| unterminated string ");return S}s._split=D;var H=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function j(_){for(var S=0,T="",q="";S<_.length;)switch(T=_.charAt(S)){case"G":p(_,S)&&(S+=6),S++;break;case'"':for(;_.charCodeAt(++S)!==34&&S<_.length;);++S;break;case"\\":S+=2;break;case"_":S+=2;break;case"@":++S;break;case"B":case"b":if(_.charAt(S+1)==="1"||_.charAt(S+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(_.substr(S,3).toUpperCase()==="A/P"||_.substr(S,5).toUpperCase()==="AM/PM"||_.substr(S,5).toUpperCase()==="上午/下午")return!0;++S;break;case"[":for(q=T;_.charAt(S++)!=="]"&&S<_.length;)q+=_.charAt(S);if(q.match(H))return!0;break;case".":case"0":case"#":for(;S<_.length&&("0#?.,E+-%".indexOf(T=_.charAt(++S))>-1||T=="\\"&&_.charAt(S+1)=="-"&&"0#".indexOf(_.charAt(S+2))>-1););break;case"?":for(;_.charAt(++S)===T;);break;case"*":++S,(_.charAt(S)==" "||_.charAt(S)=="*")&&++S;break;case"(":case")":++S;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;S<_.length&&"0123456789".indexOf(_.charAt(++S))>-1;);break;case" ":++S;break;default:++S;break}return!1}s.is_date=j;function U(_,S,T,q){for(var I=[],it="",k=0,J="",lt="t",$,nt,tt,ht="H";k<_.length;)switch(J=_.charAt(k)){case"G":if(!p(_,k))throw new Error("unrecognized character "+J+" in "+_);I[I.length]={t:"G",v:"General"},k+=7;break;case'"':for(it="";(tt=_.charCodeAt(++k))!==34&&k<_.length;)it+=String.fromCharCode(tt);I[I.length]={t:"t",v:it},++k;break;case"\\":var gt=_.charAt(++k),Et=gt==="("||gt===")"?gt:"t";I[I.length]={t:Et,v:gt},++k;break;case"_":I[I.length]={t:"t",v:" "},k+=2;break;case"@":I[I.length]={t:"T",v:S},++k;break;case"B":case"b":if(_.charAt(k+1)==="1"||_.charAt(k+1)==="2"){if($==null&&($=A(S,T,_.charAt(k+1)==="2"),$==null))return"";I[I.length]={t:"X",v:_.substr(k,2)},lt=J,k+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":J=J.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(S<0||$==null&&($=A(S,T),$==null))return"";for(it=J;++k<_.length&&_.charAt(k).toLowerCase()===J;)it+=J;J==="m"&&lt.toLowerCase()==="h"&&(J="M"),J==="h"&&(J=ht),I[I.length]={t:J,v:it},lt=J;break;case"A":case"a":case"上":var Mt={t:J,v:J};if($==null&&($=A(S,T)),_.substr(k,3).toUpperCase()==="A/P"?($!=null&&(Mt.v=$.H>=12?"P":"A"),Mt.t="T",ht="h",k+=3):_.substr(k,5).toUpperCase()==="AM/PM"?($!=null&&(Mt.v=$.H>=12?"PM":"AM"),Mt.t="T",k+=5,ht="h"):_.substr(k,5).toUpperCase()==="上午/下午"?($!=null&&(Mt.v=$.H>=12?"下午":"上午"),Mt.t="T",k+=5,ht="h"):(Mt.t="t",++k),$==null&&Mt.t==="T")return"";I[I.length]=Mt,lt=J;break;case"[":for(it=J;_.charAt(k++)!=="]"&&k<_.length;)it+=_.charAt(k);if(it.slice(-1)!=="]")throw'unterminated "[" block: |'+it+"|";if(it.match(H)){if($==null&&($=A(S,T),$==null))return"";I[I.length]={t:"Z",v:it.toLowerCase()},lt=it.charAt(1)}else it.indexOf("$")>-1&&(it=(it.match(/\$([^-\[\]]*)/)||[])[1]||"$",j(_)||(I[I.length]={t:"t",v:it}));break;case".":if($!=null){for(it=J;++k<_.length&&(J=_.charAt(k))==="0";)it+=J;I[I.length]={t:"s",v:it};break}case"0":case"#":for(it=J;++k<_.length&&"0#?.,E+-%".indexOf(J=_.charAt(k))>-1;)it+=J;I[I.length]={t:"n",v:it};break;case"?":for(it=J;_.charAt(++k)===J;)it+=J;I[I.length]={t:J,v:it},lt=J;break;case"*":++k,(_.charAt(k)==" "||_.charAt(k)=="*")&&++k;break;case"(":case")":I[I.length]={t:q===1?"t":J,v:J},++k;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(it=J;k<_.length&&"0123456789".indexOf(_.charAt(++k))>-1;)it+=_.charAt(k);I[I.length]={t:"D",v:it};break;case" ":I[I.length]={t:J,v:J},++k;break;case"$":I[I.length]={t:"t",v:"$"},++k;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(J)===-1)throw new Error("unrecognized character "+J+" in "+_);I[I.length]={t:"t",v:J},++k;break}var yt=0,jt=0,de;for(k=I.length-1,lt="t";k>=0;--k)switch(I[k].t){case"h":case"H":I[k].t=ht,lt="h",yt<1&&(yt=1);break;case"s":(de=I[k].v.match(/\.0+$/))&&(jt=Math.max(jt,de[0].length-1)),yt<3&&(yt=3);case"d":case"y":case"M":case"e":lt=I[k].t;break;case"m":lt==="s"&&(I[k].t="M",yt<2&&(yt=2));break;case"X":break;case"Z":yt<1&&I[k].v.match(/[Hh]/)&&(yt=1),yt<2&&I[k].v.match(/[Mm]/)&&(yt=2),yt<3&&I[k].v.match(/[Ss]/)&&(yt=3)}switch(yt){case 0:break;case 1:$.u>=.5&&($.u=0,++$.S),$.S>=60&&($.S=0,++$.M),$.M>=60&&($.M=0,++$.H);break;case 2:$.u>=.5&&($.u=0,++$.S),$.S>=60&&($.S=0,++$.M);break}var Ht="",ut;for(k=0;k<I.length;++k)switch(I[k].t){case"t":case"T":case" ":case"D":break;case"X":I[k].v="",I[k].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":I[k].v=et(I[k].t.charCodeAt(0),I[k].v,$,jt),I[k].t="t";break;case"n":case"?":for(ut=k+1;I[ut]!=null&&((J=I[ut].t)==="?"||J==="D"||(J===" "||J==="t")&&I[ut+1]!=null&&(I[ut+1].t==="?"||I[ut+1].t==="t"&&I[ut+1].v==="/")||I[k].t==="("&&(J===" "||J==="n"||J===")")||J==="t"&&(I[ut].v==="/"||I[ut].v===" "&&I[ut+1]!=null&&I[ut+1].t=="?"));)I[k].v+=I[ut].v,I[ut]={v:"",t:";"},++ut;Ht+=I[k].v,k=ut-1;break;case"G":I[k].t="t",I[k].v=B(S,T);break}var Q="",R,O;if(Ht.length>0){Ht.charCodeAt(0)==40?(R=S<0&&Ht.charCodeAt(0)===45?-S:S,O=F("n",Ht,R)):(R=S<0&&q>1?-S:S,O=F("n",Ht,R),R<0&&I[0]&&I[0].t=="t"&&(O=O.substr(1),I[0].v="-"+I[0].v)),ut=O.length-1;var ot=I.length;for(k=0;k<I.length;++k)if(I[k]!=null&&I[k].t!="t"&&I[k].v.indexOf(".")>-1){ot=k;break}var V=I.length;if(ot===I.length&&O.indexOf("E")===-1){for(k=I.length-1;k>=0;--k)I[k]==null||"n?".indexOf(I[k].t)===-1||(ut>=I[k].v.length-1?(ut-=I[k].v.length,I[k].v=O.substr(ut+1,I[k].v.length)):ut<0?I[k].v="":(I[k].v=O.substr(0,ut+1),ut=-1),I[k].t="t",V=k);ut>=0&&V<I.length&&(I[V].v=O.substr(0,ut+1)+I[V].v)}else if(ot!==I.length&&O.indexOf("E")===-1){for(ut=O.indexOf(".")-1,k=ot;k>=0;--k)if(!(I[k]==null||"n?".indexOf(I[k].t)===-1)){for(nt=I[k].v.indexOf(".")>-1&&k===ot?I[k].v.indexOf(".")-1:I[k].v.length-1,Q=I[k].v.substr(nt+1);nt>=0;--nt)ut>=0&&(I[k].v.charAt(nt)==="0"||I[k].v.charAt(nt)==="#")&&(Q=O.charAt(ut--)+Q);I[k].v=Q,I[k].t="t",V=k}for(ut>=0&&V<I.length&&(I[V].v=O.substr(0,ut+1)+I[V].v),ut=O.indexOf(".")+1,k=ot;k<I.length;++k)if(!(I[k]==null||"n?(".indexOf(I[k].t)===-1&&k!==ot)){for(nt=I[k].v.indexOf(".")>-1&&k===ot?I[k].v.indexOf(".")+1:0,Q=I[k].v.substr(0,nt);nt<I[k].v.length;++nt)ut<O.length&&(Q+=O.charAt(ut++));I[k].v=Q,I[k].t="t",V=k}}}for(k=0;k<I.length;++k)I[k]!=null&&"n?".indexOf(I[k].t)>-1&&(R=q>1&&S<0&&k>0&&I[k-1].v==="-"?-S:S,I[k].v=F(I[k].t,I[k].v,R),I[k].t="t");var Z="";for(k=0;k!==I.length;++k)I[k]!=null&&(Z+=I[k].v);return Z}s._eval=U;var st=/\[[=<>]/,ft=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function K(_,S){if(S==null)return!1;var T=parseFloat(S[2]);switch(S[1]){case"=":if(_==T)return!0;break;case">":if(_>T)return!0;break;case"<":if(_<T)return!0;break;case"<>":if(_!=T)return!0;break;case">=":if(_>=T)return!0;break;case"<=":if(_<=T)return!0;break}return!1}function rt(_,S){var T=D(_),q=T.length,I=T[q-1].indexOf("@");if(q<4&&I>-1&&--q,T.length>4)throw new Error("cannot find right format for |"+T.join("|")+"|");if(typeof S!="number")return[4,T.length===4||I>-1?T[T.length-1]:"@"];switch(T.length){case 1:T=I>-1?["General","General","General",T[0]]:[T[0],T[0],T[0],"@"];break;case 2:T=I>-1?[T[0],T[0],T[0],T[1]]:[T[0],T[1],T[0],"@"];break;case 3:T=I>-1?[T[0],T[1],T[0],T[2]]:[T[0],T[1],T[2],"@"];break}var it=S>0?T[0]:S<0?T[1]:T[2];if(T[0].indexOf("[")===-1&&T[1].indexOf("[")===-1)return[q,it];if(T[0].match(st)!=null||T[1].match(st)!=null){var k=T[0].match(ft),J=T[1].match(ft);return K(S,k)?[q,T[0]]:K(S,J)?[q,T[1]]:[q,T[k!=null&&J!=null?2:1]]}return[q,it]}function at(_,S,T){T==null&&(T={});var q="";switch(typeof _){case"string":_=="m/d/yy"&&T.dateNF?q=T.dateNF:q=_;break;case"number":_==14&&T.dateNF?q=T.dateNF:q=(T.table!=null?T.table:b)[_],q==null&&(q=T.table&&T.table[M[_]]||b[M[_]]),q==null&&(q=w[_]||"General");break}if(p(q,0))return B(S,T);S instanceof Date&&(S=v(S,T.date1904));var I=rt(q,S);if(p(I[1]))return B(S,T);if(S===!0)S="TRUE";else if(S===!1)S="FALSE";else if(S===""||S==null)return"";return U(I[1],S,T,I[0])}function X(_,S){if(typeof S!="number"){S=+S||-1;for(var T=0;T<392;++T){if(b[T]==null){S<0&&(S=T);continue}if(b[T]==_){S=T;break}}S<0&&(S=391)}return b[S]=_,S}s.load=X,s._table=b,s.get_table=function(){return b},s.load_table=function(S){for(var T=0;T!=392;++T)S[T]!==void 0&&X(S[T],T)},s.init_table=y,s.format=at};e(t),typeof DO_NOT_EXPORT_SSF>"u"&&(n.exports=t)})(vs)),vs.exports}var tl=Qh();const Ji=ea(tl);function wr(n,t,e){if(!isFinite(e)||e===0)return{width:n,height:t};const i=Math.cos(e),s=Math.sin(e),r=Math.abs(n*i)+Math.abs(t*s),o=Math.abs(n*s)+Math.abs(t*i);return{width:r,height:o}}function Zi(n,t,e,i,s){const r=t==null?void 0:t.trim();if(!r)return;const o=typeof(e==null?void 0:e.fontSize)=="number"?Ge(e.fontSize):i,h=(typeof(e==null?void 0:e.rotation)=="number"?e.rotation:s)*Math.PI/180,l=!!(e!=null&&e.bold);n.save(),n.font="".concat(l?"bold ":"").concat(o,"px ").concat(St);const c=n.measureText(r).width;n.restore();const f=wr(c,o,h);return{text:r,fontPx:o,rotationRad:h,width:f.width,height:f.height,isBold:l}}const Zr=6,jr=8;function Jr(n,t,e,i,s){var D,H,j,U,st,ft,K,rt,at,X;const{x:r,y:o}=e,a=t.categories.length>0?t.categories:(H=(D=t.series[0])==null?void 0:D.categories)!=null?H:[];n.save(),n.font="".concat(ji,"px ").concat(St),n.fillStyle=Gt,n.strokeStyle=Gt,n.lineWidth=1;const h=Qt(t.xAxis,s),l=o.domain(),c=l[0],f=l[l.length-1],u=typeof c=="number"&&typeof f=="number"?Math.min(c,f):void 0;let d=o(u!==void 0?u:Math.min(0,c!=null?c:0));Number.isFinite(d)||(d=i.y+i.height);const p=i.y+i.height,m=i.y,g=Math.abs(d-p)<=Math.abs(d-m),y=g?1:-1,b=4,M=b+2,x=t.xAxis;!!((U=(j=x==null?void 0:x.line)==null?void 0:j.fill)!=null&&U.color)&&(n.strokeStyle=h.lineColor,n.beginPath(),n.moveTo(i.x,d),n.lineTo(i.x+i.width,d),n.stroke()),n.strokeStyle=h.lineColor,n.lineWidth=1,n.font="".concat(h.fontSize,"px ").concat(St);const E=da(t.xAxis),A=E*Math.PI/180;let N=0;a.forEach(_=>{const S=_!=null?_:"",T=n.measureText(S).width;T>N&&(N=T)});const z=wr(N,h.fontSize,A),P=N>0?z.height+Zr:0;n.textAlign="center",n.textBaseline=g?"top":"bottom",n.fillStyle=h.textColor;const v=!!(x!=null&&x.majorTickMark)&&x.majorTickMark!=="TICK_MARK_NONE";a.forEach(_=>{const S=xn(r,_);if(S===void 0)return;v&&(n.beginPath(),n.moveTo(S,d),n.lineTo(S,d+y*b),n.stroke());const T=Sn(r)?r.step():i.width/Math.max(1,a.length),q=fa(n,_,T);A!==0?(n.save(),n.translate(S,d+y*M),n.rotate(A),n.textAlign=E<0?"right":E>0?"left":"center",n.textBaseline=g?"top":"bottom",n.fillText(q,0,0),n.restore()):n.fillText(q,S,d+y*M)});const L=Qt(t.yAxis,s),C=t.yAxis,B=!!(C!=null&&C.deleted);let Y=0;if(!B){n.textAlign="right",n.textBaseline="middle",n.fillStyle=L.textColor;const _=(st=t.yAxis)==null?void 0:st.numberFormatCode,S=!!((K=(ft=C==null?void 0:C.majorGridlines)==null?void 0:ft.fill)!=null&&K.color),T=(rt=L.gridLineColor)!=null?rt:L.lineColor,q=(C==null?void 0:C.majorTickMark)!=="TICK_MARK_NONE";o.ticks(5).forEach(it=>{const k=o(it);S&&(n.strokeStyle=T,n.beginPath(),n.moveTo(i.x,k),n.lineTo(i.x+i.width,k),n.stroke()),q&&(n.strokeStyle=L.lineColor,n.beginPath(),n.moveTo(i.x-4,k),n.lineTo(i.x,k),n.stroke()),n.font="".concat(L.fontSize,"px ").concat(St);let J=_i("~s")(it);if(_)try{J=Ji.format(_,+it)}catch($){}n.fillText(J,i.x-6,k);const lt=n.measureText(J).width;lt>Y&&(Y=lt)})}const et=Y>0?Y+Zr:0,G=Zi(n,x==null?void 0:x.title,x==null?void 0:x.titleTextStyle,h.fontSize,0),F=Zi(n,C==null?void 0:C.title,C==null?void 0:C.titleTextStyle,L.fontSize,-90);if(G){const _=x==null?void 0:x.titleTextStyle,S=(at=_==null?void 0:_.fill)!=null&&at.color?Pt(_.fill.color,s):h.textColor,T=P+jr+G.height/2,q=d+y*T;n.save(),n.fillStyle=S!=null?S:h.textColor,n.font="".concat(G.isBold?"bold ":"").concat(G.fontPx,"px ").concat(St),n.textAlign="center",n.textBaseline="middle",n.translate(i.x+i.width/2,q),n.rotate(G.rotationRad),n.fillText(G.text,0,0),n.restore()}if(F){const _=C==null?void 0:C.titleTextStyle,S=(X=_==null?void 0:_.fill)!=null&&X.color?Pt(_.fill.color,s):L.textColor,T=i.x-et-jr-F.width/2,q=i.y+i.height/2;n.save(),n.fillStyle=S!=null?S:L.textColor,n.font="".concat(F.isBold?"bold ":"").concat(F.fontPx,"px ").concat(St),n.textAlign="center",n.textBaseline="middle",n.translate(T,q),n.rotate(F.rotationRad),n.fillText(F.text,0,0),n.restore()}n.restore()}function el(n,t,e,i,s,r={}){const{maxLeftFrac:o=.35,sidePaddingPx:a=8}=r,{fontSize:h}=Qt(i,s);n.save(),n.font="".concat(h,"px ").concat(St);let l=0;for(const y of e){const b=n.measureText(y).width;b>l&&(l=b)}if(n.restore(),l<=0)return t;const c=Math.max(0,t.width*o),f=Math.min(c,l+a),u=ha.left,d=Math.max(0,f-u);if(d<=0)return t;const m=Math.max(0,t.width-24);if(m===0)return t;const g=Math.min(d,m);return{x:t.x+g,y:t.y,width:Math.max(0,t.width-g),height:t.height}}const Kr=["accent1","accent2","accent3","accent4","accent5","accent6"];function Me(n,t,e){var o,a,h;if((o=n.fill)!=null&&o.color)return Pt(n.fill.color,e);const i=(h=(a=n.stroke)==null?void 0:a.fill)!=null&&h.color?Pt(n.stroke.fill.color,e):void 0;if(i)return i;const s=Kr[t%Kr.length],r=e.colorMap[s!=null?s:""];return r||ye[t%ye.length]}const il="mapbox://mapbox.country-boundaries-v1",Qr="country_boundaries";function nl(n){return n&&n.replace(/[^a-zA-Z0-9_-]/g,"_")||"map"}function ma(n){const t=n?ri(n):null;if(!t)return{start:"#c1e4ff",end:"#0f5aad",fallback:"#d6dbe1"};const e=t.brighter(1.8).formatHex(),i=t.darker(.6).formatHex();return{start:e,end:i,fallback:"#d6dbe1"}}function sl(n,t,e,i,s={}){var C,B,Y,et;const r=n.map;if(!t.series.length)return;const o=0;if((C=s.hiddenSeriesIndices)!=null&&C.has(o)||t.series[o]==null){n.clear();return}const a=t.series[o],h=a.categories&&a.categories.length>0?a.categories:t.categories,l=(B=a.values)!=null?B:[];if(!h||h.length===0||l.length===0){n.clear();return}const c=new Map;if(h.forEach((G,F)=>{const D=l[F],H=rl(G);H&&typeof D=="number"&&Number.isFinite(D)&&c.set(H,D)}),c.size===0){n.clear();return}const f=Array.from(c.values()),[u,d]=ke(f),p=Me(a,o,i),m=ma(p),g=u!=null?u:0,y=d!=null?d:g,b=y===g?1:0,M=si().domain([g,y+b]).range([m.start,m.end]),x=new Map,w=new Map;c.forEach((G,F)=>{x.set(F,M(G)),w.set(F,.9)});const E=to(x,m.fallback),A=to(w,.55),N=nl((et=(Y=s.elementId)!=null?Y:t.id)!=null?et:"chart"),z="granola-map-source-".concat(N),P="granola-map-fill-".concat(N),v="granola-map-outline-".concat(N),L=()=>{r.getSource(z)||(r.addSource(z,{type:"vector",url:il}),n.trackSource(z)),r.getLayer(P)?(r.setPaintProperty(P,"fill-color",E),r.setPaintProperty(P,"fill-opacity",A)):(r.addLayer({id:P,type:"fill",source:z,"source-layer":Qr,paint:{"fill-color":E,"fill-opacity":A}}),n.trackLayer(P)),r.getLayer(v)||(r.addLayer({id:v,type:"line",source:z,"source-layer":Qr,paint:{"line-color":"#ffffff","line-width":.5,"line-opacity":.6}}),n.trackLayer(v));const G=.2,F=[0,15],D=r.getZoom(),H=r.getCenter();(Math.abs(D-G)>.01||Math.abs(H.lng-F[0])>.5||Math.abs(H.lat-F[1])>.5)&&r.jumpTo({center:F,zoom:G,bearing:0,pitch:0})};if(r.isStyleLoaded())L();else{const G=()=>{r.off("styledata",G),r.off("load",G),L()};r.on("styledata",G),r.on("load",G)}}function rl(n){if(typeof n!="string")return null;const t=n.trim();return t?t.toUpperCase():null}function to(n,t){const e=["case"];return n.forEach((i,s)=>{e.push(ol(s),i)}),e.push(t),e}function ol(n){return["any",["==",["upcase",["coalesce",["get","name_en"],""]],n],["==",["upcase",["coalesce",["get","name"],""]],n],["==",["upcase",["coalesce",["get","iso_3166_1_alpha_2"],""]],n],["==",["upcase",["coalesce",["get","iso_3166_1_alpha_3"],""]],n]]}function _r(n,t){if(!(!n.points||n.points.length===0))for(let e=0;e<n.points.length;e++){const i=n.points[e],s=i.idx;if((typeof s=="number"?s:e)===t)return i}}function fe(n,t,e,i,s){const r=_r(n,t),o=r==null?void 0:r.fill;return o?o.color?Pt(o.color,i):void 0:Me(n,typeof s=="number"?s:e,i)}function we(n,t,e){var r,o,a,h;const i=_r(n,t);if((o=(r=i==null?void 0:i.stroke)==null?void 0:r.fill)!=null&&o.color){const l=Pt(i.stroke.fill.color,e),c=i.stroke.widthEmu?i.stroke.widthEmu*Ft:void 0;return{color:l,widthPx:c}}const s=n;if((h=(a=s==null?void 0:s.stroke)==null?void 0:a.fill)!=null&&h.color){const l=Pt(s.stroke.fill.color,e),c=s.stroke.widthEmu?s.stroke.widthEmu*Ft:void 0;return{color:l,widthPx:c}}return{}}function _e(n,t){const e=_r(n,t),i=e==null?void 0:e.fill;return!!(i&&!i.color)}function al(n){var t=0,e=n.children,i=e&&e.length;if(!i)t=1;else for(;--i>=0;)t+=e[i].value;n.value=t}function hl(){return this.eachAfter(al)}function ll(n,t){let e=-1;for(const i of this)n.call(t,i,++e,this);return this}function cl(n,t){for(var e=this,i=[e],s,r,o=-1;e=i.pop();)if(n.call(t,e,++o,this),s=e.children)for(r=s.length-1;r>=0;--r)i.push(s[r]);return this}function ul(n,t){for(var e=this,i=[e],s=[],r,o,a,h=-1;e=i.pop();)if(s.push(e),r=e.children)for(o=0,a=r.length;o<a;++o)i.push(r[o]);for(;e=s.pop();)n.call(t,e,++h,this);return this}function fl(n,t){let e=-1;for(const i of this)if(n.call(t,i,++e,this))return i}function dl(n){return this.eachAfter(function(t){for(var e=+n(t.data)||0,i=t.children,s=i&&i.length;--s>=0;)e+=i[s].value;t.value=e})}function ml(n){return this.eachBefore(function(t){t.children&&t.children.sort(n)})}function pl(n){for(var t=this,e=gl(t,n),i=[t];t!==e;)t=t.parent,i.push(t);for(var s=i.length;n!==e;)i.splice(s,0,n),n=n.parent;return i}function gl(n,t){if(n===t)return n;var e=n.ancestors(),i=t.ancestors(),s=null;for(n=e.pop(),t=i.pop();n===t;)s=n,n=e.pop(),t=i.pop();return s}function yl(){for(var n=this,t=[n];n=n.parent;)t.push(n);return t}function xl(){return Array.from(this)}function bl(){var n=[];return this.eachBefore(function(t){t.children||n.push(t)}),n}function Ml(){var n=this,t=[];return n.each(function(e){e!==n&&t.push({source:e.parent,target:e})}),t}function*wl(){var n=this,t,e=[n],i,s,r;do for(t=e.reverse(),e=[];n=t.pop();)if(yield n,i=n.children)for(s=0,r=i.length;s<r;++s)e.push(i[s]);while(e.length)}function gs(n,t){n instanceof Map?(n=[void 0,n],t===void 0&&(t=Sl)):t===void 0&&(t=Tl);for(var e=new hs(n),i,s=[e],r,o,a,h;i=s.pop();)if((o=t(i.data))&&(h=(o=Array.from(o)).length))for(i.children=o,a=h-1;a>=0;--a)s.push(r=o[a]=new hs(o[a])),r.parent=i,r.depth=i.depth+1;return e.eachBefore(El)}function _l(){return gs(this).eachBefore(Al)}function Tl(n){return n.children}function Sl(n){return Array.isArray(n)?n[1]:null}function Al(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function El(n){var t=0;do n.height=t;while((n=n.parent)&&n.height<++t)}function hs(n){this.data=n,this.depth=this.height=0,this.parent=null}hs.prototype=gs.prototype={constructor:hs,count:hl,each:ll,eachAfter:ul,eachBefore:cl,find:fl,sum:dl,sort:ml,path:pl,ancestors:yl,descendants:xl,leaves:bl,links:Ml,copy:_l,[Symbol.iterator]:wl};function vl(n){if(typeof n!="function")throw new Error;return n}function on(){return 0}function an(n){return function(){return n}}function pa(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function ga(n,t,e,i,s){for(var r=n.children,o,a=-1,h=r.length,l=n.value&&(i-t)/n.value;++a<h;)o=r[a],o.y0=e,o.y1=s,o.x0=t,o.x1=t+=o.value*l}function Cl(){var n=1,t=1,e=0,i=!1;function s(o){var a=o.height+1;return o.x0=o.y0=e,o.x1=n,o.y1=t/a,o.eachBefore(r(t,a)),i&&o.eachBefore(pa),o}function r(o,a){return function(h){h.children&&ga(h,h.x0,o*(h.depth+1)/a,h.x1,o*(h.depth+2)/a);var l=h.x0,c=h.y0,f=h.x1-e,u=h.y1-e;f<l&&(l=f=(l+f)/2),u<c&&(c=u=(c+u)/2),h.x0=l,h.y0=c,h.x1=f,h.y1=u}}return s.round=function(o){return arguments.length?(i=!!o,s):i},s.size=function(o){return arguments.length?(n=+o[0],t=+o[1],s):[n,t]},s.padding=function(o){return arguments.length?(e=+o,s):e},s}function Il(n,t,e,i,s){for(var r=n.children,o,a=-1,h=r.length,l=n.value&&(s-e)/n.value;++a<h;)o=r[a],o.x0=t,o.x1=i,o.y0=e,o.y1=e+=o.value*l}var kl=(1+Math.sqrt(5))/2;function Nl(n,t,e,i,s,r){for(var o=[],a=t.children,h,l,c=0,f=0,u=a.length,d,p,m=t.value,g,y,b,M,x,w,E;c<u;){d=s-e,p=r-i;do g=a[f++].value;while(!g&&f<u);for(y=b=g,w=Math.max(p/d,d/p)/(m*n),E=g*g*w,x=Math.max(b/E,E/y);f<u;++f){if(g+=l=a[f].value,l<y&&(y=l),l>b&&(b=l),E=g*g*w,M=Math.max(b/E,E/y),M>x){g-=l;break}x=M}o.push(h={value:g,dice:d<p,children:a.slice(c,f)}),h.dice?ga(h,e,i,s,m?i+=p*g/m:r):Il(h,e,i,m?e+=d*g/m:s,r),m-=g,c=f}return o}const ya=(function n(t){function e(i,s,r,o,a){Nl(t,i,s,r,o,a)}return e.ratio=function(i){return n((i=+i)>1?i:1)},e})(kl);function zl(){var n=ya,t=!1,e=1,i=1,s=[0],r=on,o=on,a=on,h=on,l=on;function c(u){return u.x0=u.y0=0,u.x1=e,u.y1=i,u.eachBefore(f),s=[0],t&&u.eachBefore(pa),u}function f(u){var d=s[u.depth],p=u.x0+d,m=u.y0+d,g=u.x1-d,y=u.y1-d;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),u.x0=p,u.y0=m,u.x1=g,u.y1=y,u.children&&(d=s[u.depth+1]=r(u)/2,p+=l(u)-d,m+=o(u)-d,g-=a(u)-d,y-=h(u)-d,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),n(u,p,m,g,y))}return c.round=function(u){return arguments.length?(t=!!u,c):t},c.size=function(u){return arguments.length?(e=+u[0],i=+u[1],c):[e,i]},c.tile=function(u){return arguments.length?(n=vl(u),c):n},c.padding=function(u){return arguments.length?c.paddingInner(u).paddingOuter(u):c.paddingInner()},c.paddingInner=function(u){return arguments.length?(r=typeof u=="function"?u:an(+u),c):r},c.paddingOuter=function(u){return arguments.length?c.paddingTop(u).paddingRight(u).paddingBottom(u).paddingLeft(u):c.paddingTop()},c.paddingTop=function(u){return arguments.length?(o=typeof u=="function"?u:an(+u),c):o},c.paddingRight=function(u){return arguments.length?(a=typeof u=="function"?u:an(+u),c):a},c.paddingBottom=function(u){return arguments.length?(h=typeof u=="function"?u:an(+u),c):h},c.paddingLeft=function(u){return arguments.length?(l=typeof u=="function"?u:an(+u),c):l},c}const Pl="\0";function Rl(n,t,e){const i=xa(n);if(i.length===0)return{leaves:[],parents:[]};const s=Ll(i),r=ba(s),o=gs(r).sum(p=>typeof p.value=="number"&&p.value>0?p.value:0).sort((p,m)=>{var g,y;return((g=m.value)!=null?g:0)-((y=p.value)!=null?y:0)}),a=Math.max(0,t.width),h=Math.max(0,t.height),c=zl().tile(ya).size([a,h]).paddingInner(1).paddingOuter(0).round(!0)(o),f=Ma(e,i),u=c.leaves().filter(p=>{var m;return((m=p.value)!=null?m:0)>0}).map(p=>{var N,z,P;const m=t.x+p.x0,g=t.y+p.y0,y=Math.max(0,p.x1-p.x0),b=Math.max(0,p.y1-p.y0),M=p.data.path,x=(z=(N=p.parent)==null?void 0:N.data.path)!=null?z:[],w=x.length>0?x[x.length-1]:void 0,E=M.length>0?M[0]:void 0,A=E&&E.length>0?E:p.data.name;return{x:m,y:g,width:y,height:b,value:(P=p.value)!=null?P:0,name:p.data.name,path:M,depth:p.depth,parentName:w,topParentName:E,fill:f(A)}}),d=c.descendants().filter(p=>p.depth>0&&p.children&&p.children.length>0).map(p=>({name:p.data.name,path:p.data.path,depth:p.depth,x:t.x+p.x0,y:t.y+p.y0,width:Math.max(0,p.x1-p.x0),height:Math.max(0,p.y1-p.y0)})).sort((p,m)=>p.depth-m.depth);return{leaves:u,parents:d}}function xa(n){var e,i,s;const t=new Map;for(const r of n.series){const o=(e=r.values)!=null?e:[],a=Fl(r.categoryPaths,o.length),h=(i=r.categories)!=null&&i.length?r.categories:n.categories;for(let l=0;l<o.length;l+=1){const c=o[l];if(typeof c!="number"||!isFinite(c)||c<=0)continue;const f=(s=a[l])==null?void 0:s.levels;let u=f&&f.length?f:void 0;if(!u){const g=h==null?void 0:h[l];typeof g=="string"&&g.length>0&&(u=[g])}if(!u||u.length===0)continue;const d=[...u].reverse(),p=d.join(Pl),m=t.get(p);m?m.value+=c:t.set(p,{path:d,value:c})}}return Array.from(t.values())}function Fl(n,t){if(!n||n.length===0)return new Array(t).fill(void 0);if(n.length>=t)return n;const e=n.slice();for(;e.length<t;)e.push({levels:[]});return e}function Ll(n){const t={name:"root",path:[],children:new Map};for(const e of n){let i=t;e.path.forEach((s,r)=>{var a;let o=i.children.get(s);o||(o={name:s,path:i.path.concat(s),children:new Map},i.children.set(s,o)),i=o,r===e.path.length-1&&(i.value=((a=i.value)!=null?a:0)+e.value)})}return t}function ba(n){var e;const t=Array.from(n.children.values()).map(ba);return t.length===0?{name:n.name,path:n.path,value:(e=n.value)!=null?e:0}:{name:n.name,path:n.path,children:t}}function Ma(n,t){const e=new Set;for(const h of t){const l=h.path[0];l&&l.length>0&&e.add(l)}const i=Array.from(e.values());if(i.length===0)return h=>{var l;return(l=ye[0])!=null?l:"#999999"};const s=["accent1","accent2","accent3","accent4","accent5","accent6"],r=h=>{var f,u;const l=s[h%s.length],c=n.colorMap[l!=null?l:""];return c||((u=(f=ye[h%ye.length])!=null?f:ye[0])!=null?u:"#999999")},o=i.map((h,l)=>r(l)),a=Qo().domain(i).range(o);return h=>{var c;if(!h)return(c=ye[0])!=null?c:"#999999";if(a.domain().includes(h))return a(h);const l=a.domain().length;return r(l)}}function Bl(n,t){const e=xa(n);if(e.length===0)return[];const i=Ma(t,e),s=new Set;for(const r of e){const o=r.path[0];!o||s.has(o)||s.add(o)}return Array.from(s.values()).map(r=>({key:r,label:r,color:i(r)}))}function _n(n,t){if(t)try{return Ji.format(t,n)}catch(e){}return _i("~s")(n)}const Ol=[{label:"Increase",slot:"accent1",fallback:"#5b9bd5"},{label:"Decrease",slot:"accent2",fallback:"#ed7d31"},{label:"Total",slot:"accent3",fallback:"#a5a5a5"}];function Dl(n){return Ol.map(t=>{var e,i;return{label:t.label,seriesIndex:0,fillColor:(i=(e=n.colorMap)==null?void 0:e[t.slot])!=null?i:t.fallback}})}const ls=120,ee=12,bn=4,yi=12,is=12,Hl=new Set([pt.CHART_TYPE_PIE,pt.CHART_TYPE_PIE_3D,pt.CHART_TYPE_DOUGHNUT]),fi=8,ei=8,Wl=8,cs=6,us=16,lr=as;function wa(n){return Hl.has(n.type)}function _a(n){return n===Dt.LEGEND_POSITION_TOP_RIGHT?Dt.LEGEND_POSITION_RIGHT:n!=null?n:Dt.LEGEND_POSITION_RIGHT}function ys(n){return n===Dt.LEGEND_POSITION_TOP||n===Dt.LEGEND_POSITION_BOTTOM}function Ta(n){return n===Dt.LEGEND_POSITION_BOTTOM?{top:ei,bottom:Wl}:{top:ei,bottom:ei}}function $l(n,t){var e,i,s,r,o;if(wa(n)){const a=n.series[0];if(!a)return[];const h=n.series.indexOf(a),l=(i=(e=a.categories)!=null&&e.length?a.categories:n.categories)!=null?i:[],c=(r=(s=a.values)==null?void 0:s.length)!=null?r:0,f=Math.max(c,l.length);if(f===0)return[];const u=a.name||"Slice",d=[];for(let p=0;p<f;p++){const m=(o=l[p])!=null?o:"".concat(u," ").concat(p+1);d.push({label:m,seriesIndex:h,pointIndex:p})}return d}if(n.type===pt.CHART_TYPE_TREEMAP){const a=Bl(n,t);return a.length===0?[]:a.map(h=>({label:h.label,seriesIndex:0,fillColor:h.color}))}return n.type===pt.CHART_TYPE_WATERFALL?Dl(t):n.series.map((a,h)=>({label:a.name||"Series ".concat(h+1),seriesIndex:h}))}function Sa(n,t){var p,m,g;if(!n.series.length)return null;const e=n.series[0];if(!e)return null;const i=e.categories&&e.categories.length>0?e.categories:n.categories,s=(p=e.values)!=null?p:[];if(!i||i.length===0||s.length===0)return null;const r=[];if(i.forEach((y,b)=>{const M=s[b];y!=null&&typeof M=="number"&&Number.isFinite(M)&&r.push(M)}),r.length===0)return null;const[o,a]=ke(r),h=o!=null?o:0,l=a!=null?a:h,c=Me(e,0,t),f=ma(c),u=(m=e.valuesFormatCode)!=null?m:void 0,d=(g=e.name)==null?void 0:g.trim();return{min:h,max:l,rampStart:f.start,rampEnd:f.end,minLabel:_n(h,u),maxLabel:_n(l,u),seriesName:d&&d.length>0?d:void 0}}function Gl(n,t,e,i){var M,x;const s=(x=(M=t.legend)==null?void 0:M.textStyle)==null?void 0:x.fontSize,r=s?Ge(s):br;n.font="".concat(r,"px ").concat(St);const o=Sa(t,e);if(!o)return{width:0,height:0};const a=n.measureText(o.minLabel).width,h=n.measureText(o.maxLabel).width,l=o.seriesName?n.measureText(o.seriesName).width:0,c=!!o.seriesName,f=c?r:0,u=c?is:0;if(ys(i)){const E=Math.max(ls,l),A=ee*2+E,N=ee*2+f+u+yi+bn+r;return{width:A,height:N}}const d=Math.max(a,h),p=d>0?bn:0,g=Math.max(yi+p+d,l),y=ee*2+g,b=ee*2+f+u+ls;return{width:y,height:b}}function Aa(n,t,e,i={}){var y,b,M,x;n.save();const s=_a((b=i.position)!=null?b:(y=t.legend)==null?void 0:y.position);if(t.type===pt.CHART_TYPE_MAP){const{width:w,height:E}=Gl(n,t,e,s);return n.restore(),{width:w,height:E,entries:[]}}const r=(x=(M=t.legend)==null?void 0:M.textStyle)==null?void 0:x.fontSize,o=r?Ge(r):br;n.font="".concat(o,"px ").concat(St);const a=$l(t,e),h=r!=null?r:Math.round(o*75),l=a.map(w=>{const E={paragraphs:[{runs:[{text:w.label,citations:[]}]}],textStyle:{name:St,fontSize:h},levelsStyles:[],type:dr.ELEMENT_TYPE_TEXT},A=xr(E,n,e,void 0,{mode:"layout",wrap:!1});return A?A.lines.reduce((z,P)=>Math.max(z,P.widthPx),0):0}),c=Math.max(...l,0),u=t.type===pt.CHART_TYPE_LINE||t.type===pt.CHART_TYPE_LINE_3D?8:as,d=ys(s!=null?s:Dt.LEGEND_POSITION_RIGHT),p=a.map((w,E)=>{var N;const A=(N=l[E])!=null?N:0;return u+cs+A});let m,g;if(d){const w=p.reduce((N,z,P)=>{const v=P<p.length-1?us:0;return N+z+v},0);m=Math.max(0,w+ei*2);const{top:E,bottom:A}=Ta(s);g=lr+E+A}else{const w=a.length*lr+Math.max(0,a.length-1)*us;m=u+cs+c+ei*2,g=w+ei*2}return n.restore(),{width:m,height:g,entries:a}}function qe(n,t,e,i,s=Dt.LEGEND_POSITION_TOP,r){var L,C,B;if(t.series.length===0)return;n.save();const o=(C=(L=t.legend)==null?void 0:L.textStyle)==null?void 0:C.fontSize,a=o?Ge(o):br;n.font="".concat(a,"px ").concat(St);const h=_a(s);if(t.type===pt.CHART_TYPE_MAP){Yl(n,t,e,i,h,a,r),n.restore();return}const{width:l,height:c,entries:f}=Aa(n,t,i,{position:h});if(f.length===0){n.restore();return}const u=wa(t),d=t.type===pt.CHART_TYPE_TREEMAP,p=t.type===pt.CHART_TYPE_LINE||t.type===pt.CHART_TYPE_LINE_3D,m=p?8:as,g=p?3:as,y=lr,b=f.map(Y=>n.measureText(Y.label).width);let M=e.x+fi,x=e.y+fi;const w=ys(h),E=w?Ta(h):null,A=(B=E==null?void 0:E.top)!=null?B:ei;if(w){const Y=l,et=Math.max(0,e.width-fi*2),G=Math.max(0,(et-Y)/2);M=e.x+fi+G,x=e.y+fi}else(h===Dt.LEGEND_POSITION_LEFT||h===Dt.LEGEND_POSITION_RIGHT)&&(M=e.x+fi,x=Math.max(e.y+fi,e.y+(e.height-c)/2));n.fillStyle="transparent",n.strokeStyle="transparent",n.lineWidth=1,n.beginPath(),n.rect(M,x,l,c),n.fill(),n.stroke();const N=Array.isArray(r==null?void 0:r.hiddenSeriesIndices)?new Set(r==null?void 0:r.hiddenSeriesIndices):r==null?void 0:r.hiddenSeriesIndices;let z=M+ei,P=x+A;const v=x+A+y/2;f.forEach((Y,et)=>{var it,k,J,lt,$,nt;const G=t.series[Y.seriesIndex];if(!G)return;const F=Y.label,D=(it=b[et])!=null?it:n.measureText(F).width,H=(lt=Y.fillColor)!=null?lt:u?fe(G,(k=Y.pointIndex)!=null?k:0,Y.seriesIndex,i,(J=Y.pointIndex)!=null?J:0):Me(G,Y.seriesIndex,i),{color:j,widthPx:U}=u?we(G,($=Y.pointIndex)!=null?$:0,i):d?{color:void 0,widthPx:void 0}:we(G,0,i),st=d?0:u?1:2,ft=U!==void 0?U:st,K=z,rt=w?v:P+y/2,at=rt-g/2,X=m,_=g,S=2,T=u&&Y.pointIndex!==void 0?_e(G,Y.pointIndex):!1;if((nt=N==null?void 0:N.has(Y.seriesIndex))!=null?nt:!1){const tt=K+.5,ht=at+.5,gt=X-1,Et=_-1,Mt=Math.max(0,S-.5);n.beginPath(),n.moveTo(tt+Mt,ht),n.lineTo(tt+gt-Mt,ht),n.quadraticCurveTo(tt+gt,ht,tt+gt,ht+Mt),n.lineTo(tt+gt,ht+Et-Mt),n.quadraticCurveTo(tt+gt,ht+Et,tt+gt-Mt,ht+Et),n.lineTo(tt+Mt,ht+Et),n.quadraticCurveTo(tt,ht+Et,tt,ht+Et-Mt),n.lineTo(tt,ht+Mt),n.quadraticCurveTo(tt,ht,tt+Mt,ht),n.closePath(),j?(n.strokeStyle=j,n.lineWidth=ft):H&&(n.strokeStyle=H,n.lineWidth=1),n.stroke()}else if(!T&&H&&(n.fillStyle=H),n.beginPath(),n.moveTo(K+S,at),n.lineTo(K+X-S,at),n.quadraticCurveTo(K+X,at,K+X,at+S),n.lineTo(K+X,at+_-S),n.quadraticCurveTo(K+X,at+_,K+X-S,at+_),n.lineTo(K+S,at+_),n.quadraticCurveTo(K,at+_,K,at+_-S),n.lineTo(K,at+S),n.quadraticCurveTo(K,at,K+S,at),n.closePath(),!T&&H&&n.fill(),!d){const tt=j!=null?j:T?H:void 0,ht=U!==void 0?U:st;tt&&(n.strokeStyle=tt,n.lineWidth=ht,n.stroke())}n.fillStyle=Gt,n.textAlign="left",n.textBaseline="middle";const I=K+X+cs;if(n.fillText(F,I,rt),r!=null&&r.chartHoverTargets){const tt=K+X,ht=rt,gt=X+cs+D,Et=rt-y/2,Mt=y;r.chartHoverTargets.push({kind:"legend",x:K,y:Et,width:gt,height:Mt,value:0,color:H,anchorX:tt,anchorY:ht,elementId:r.elementId,seriesIndex:Y.seriesIndex,seriesName:G.name})}w?z=I+D+us:P+=y+us}),n.restore()}function Yl(n,t,e,i,s,r,o){const a=Sa(t,i);if(!a)return;const h=Array.isArray(o==null?void 0:o.hiddenSeriesIndices)?new Set(o==null?void 0:o.hiddenSeriesIndices):o==null?void 0:o.hiddenSeriesIndices;if(h!=null&&h.has(0))return;const l=n.measureText(a.minLabel).width,c=n.measureText(a.maxLabel).width,f=a.seriesName?n.measureText(a.seriesName).width:0,u=!!a.seriesName,d=ys(s),p=Math.max(0,e.width-ee*2);if(p<=0)return;if(d){const C=Math.max(0,Math.min(p,ls));if(C<=0)return;const B=Math.max(C,f);let Y=Math.max(0,(p-B)/2);s===Dt.LEGEND_POSITION_LEFT?Y=0:s===Dt.LEGEND_POSITION_RIGHT&&(Y=Math.max(0,p-B));const et=Math.max(0,(B-C)/2),G=e.x+ee+Y+et,F=Math.max(0,e.height-ee*2),D=(u?r+is:0)+yi+bn+r,H=Math.max(0,(F-D)/2),j=e.y+ee+H,U=j+(u?r+is:0),st=n.createLinearGradient(G,U,G+C,U);st.addColorStop(0,a.rampStart),st.addColorStop(1,a.rampEnd),n.fillStyle=st,n.fillRect(G,U,C,yi),n.strokeStyle="rgba(0, 0, 0, 0.12)",n.lineWidth=1,n.strokeRect(G,U,C,yi);const ft=U+yi+bn;if(n.fillStyle=Gt,n.textBaseline="top",n.textAlign="left",n.fillText(a.minLabel,G,ft),n.textAlign="right",n.fillText(a.maxLabel,G+C,ft),a.seriesName){n.textAlign="center",n.textBaseline="top";const K=e.x+ee+Y+B/2;n.fillText(a.seriesName,K,j)}return}const m=Math.max(l,c),g=m>0?bn:0,y=Math.max(0,Math.min(yi,p-g-m));if(y<=0)return;const b=Math.max(y+g+m,f),M=Math.max(0,(p-b)/2),x=e.x+ee+M,w=x+y+g,E=Math.max(0,e.height-ee*2),A=u?r+is:0,N=Math.max(0,E-A),z=Math.min(ls,N);if(z<=0)return;const P=e.y+ee+A,v=P+z,L=n.createLinearGradient(x,v,x,P);if(L.addColorStop(0,a.rampStart),L.addColorStop(1,a.rampEnd),n.fillStyle=L,n.fillRect(x,P,y,z),n.strokeStyle="rgba(0, 0, 0, 0.12)",n.lineWidth=1,n.strokeRect(x,P,y,z),n.fillStyle=Gt,n.textAlign="left",n.textBaseline="middle",m>0&&(n.fillText(a.maxLabel,w,P),n.fillText(a.minLabel,w,v)),a.seriesName){n.textAlign="center",n.textBaseline="top";const C=e.x+ee+M+b/2;n.fillText(a.seriesName,C,e.y+ee)}}const eo=12;function Vl(n,t,e,i,s={}){var p,m,g,y;let r=e;if(!t.hasLegend)return{plotDims:r};const o=(m=(p=t.legend)==null?void 0:p.position)!=null?m:Dt.LEGEND_POSITION_RIGHT,a=o===Dt.LEGEND_POSITION_TOP_RIGHT?Dt.LEGEND_POSITION_RIGHT:o,{width:h,height:l}=Aa(n,t,i,{position:a}),c=s.outerDims&&s.outerDims.width>0?Math.max(0,s.outerDims.width*((g=s.maxSideFrac)!=null?g:.35)):Number.POSITIVE_INFINITY,f=Math.max(0,(y=s.sidePaddingPx)!=null?y:8),u=8;let d;switch(a){case Dt.LEGEND_POSITION_TOP:{const b=Math.min(Math.max(0,r.height),l+u);d={x:r.x,y:r.y,width:r.width,height:b},r={x:r.x,y:r.y+b,width:r.width,height:Math.max(0,r.height-b)};break}case Dt.LEGEND_POSITION_BOTTOM:{const b=Math.min(Math.max(0,r.height),l),M=s.outerDims?s.outerDims.y+s.outerDims.height-eo:r.y+r.height-eo,x=Math.max(0,M-r.y),w=Math.min(b,x),E=Math.max(r.y,M-w);d={x:r.x,y:E,width:r.width,height:w},r={x:r.x,y:r.y,width:r.width,height:Math.max(0,E-r.y)};break}case Dt.LEGEND_POSITION_LEFT:{const b=h+u;let M=b+f;M<b&&(M=b),c<M&&(M=Math.max(b,c));const x=Math.min(Math.max(0,r.width),M);d={x:r.x,y:r.y,width:x,height:r.height},r={x:r.x+x,y:r.y,width:Math.max(0,r.width-x),height:r.height};break}case Dt.LEGEND_POSITION_RIGHT:default:{const b=h+u;let M=b+f;M<b&&(M=b),c<M&&(M=Math.max(b,c));const x=Math.min(Math.max(0,r.width),M);d={x:r.x+Math.max(0,r.width-x),y:r.y,width:x,height:r.height},r={x:r.x,y:r.y,width:Math.max(0,r.width-x),height:r.height};break}}return{plotDims:r,legendRect:d,legendPosition:a}}function Ul(n,t,e,i,s,r){var w,E,A,N,z,P;const o=t.series[0];if(!o||r!=null&&r.has(0))return;const a=t.series.indexOf(o),h=o.values;if(os(h)===0)return;const c=e.x+e.width/2,f=e.y+e.height/2,u=Math.min(e.width,e.height)/2,d=t.type===pt.CHART_TYPE_DOUGHNUT,p=d?Math.max(0,Math.min(100,(E=(w=t.doughnutOptions)==null?void 0:w.holeSize)!=null?E:55)):0,m=d?u*(p/100):0,g=ia().innerRadius(m).outerRadius(u).context(n),b=((N=(A=t.pieOptions)==null?void 0:A.firstSliceAngle)!=null?N:0)/360*Math.PI*2,M=na().sort(null).startAngle(b).endAngle(b+Math.PI*2),x=(z=o.categories)!=null&&z.length?o.categories:(P=t.categories)!=null?P:[];n.save(),n.translate(c,f),n.lineJoin="bevel",M(h).forEach((v,L)=>{var H,j,U,st;const C=(H=v.index)!=null?H:L,B=fe(o,C,a,i,C);_e(o,C)||(B&&(n.fillStyle=B),n.beginPath(),g(v),n.fill());const{color:et,widthPx:G}=we(o,C,i),F=et!=null?et:"#fff",D=G!==void 0?G:1;if(D>0&&(n.beginPath(),g(v),n.strokeStyle=F,n.lineWidth=D,n.stroke()),s){const ft=m,K=u,rt=(v.startAngle+v.endAngle)/2,at=c+Math.cos(rt)*K,X=f+Math.sin(rt)*K,_=(st=(U=x[C])!=null?U:(j=t.categories)==null?void 0:j[C])!=null?st:o.name;s.push({kind:"pie",cx:c,cy:f,rInner:ft,rOuter:K,startAngle:v.startAngle,endAngle:v.endAngle,value:v.value,seriesName:o.name,category:_,color:B,anchorX:at,anchorY:X})}}),n.restore()}function Xl(n,t=ha){return{x:n.x+t.left,y:n.y+t.top,width:n.width-t.left-t.right,height:n.height-t.top-t.bottom}}function ql(n,t){var i;const e=n==null?void 0:n.id;return e&&(i=t.charts.find(s=>s.id===e))!=null?i:null}function Zl(n,t){var p,m,g,y,b;const e=n.categories.length>0?n.categories:(m=(p=n.series[0])==null?void 0:p.categories)!=null?m:[],i=ca(n),s=Math.min(0,i.min),r=i.max,o=(g=n.yAxis)==null?void 0:g.min,a=(y=n.yAxis)==null?void 0:y.max,h=o!==void 0?o:s,l=a!==void 0?a:r,c=si().domain([h,l]).range([t.x,t.x+t.width]);(o===void 0||a===void 0)&&c.nice();const f=(b=n.barOptions)==null?void 0:b.gapWidth,u=typeof f=="number"&&isFinite(f)?1-1/(1+f/100):aa,d=qi().domain([...e].reverse()).range([t.y,t.y+t.height]).paddingInner(u).paddingOuter(.5);return{x:c,y:d}}function jl(n,t,e,i,s=!0,r){var y,b,M,x,w;const{x:o,y:a}=e,h=t.categories.length>0?t.categories:(b=(y=t.series[0])==null?void 0:y.categories)!=null?b:[];n.save(),n.lineWidth=1;const l=Qt(t.yAxis,r);n.font="".concat(l.fontSize,"px ").concat(St),n.fillStyle=l.textColor,n.strokeStyle=l.lineColor,n.textAlign="right",n.textBaseline="middle";const c=Math.min(140,Math.max(0,i.x-10));h.forEach(E=>{var z;const A=((z=a(E))!=null?z:0)+a.bandwidth()/2;n.beginPath(),n.moveTo(i.x-4,A),n.lineTo(i.x,A),n.stroke();const N=fa(n,E,c);n.fillText(N,i.x-6,A)});const f=Qt(t.xAxis,r);n.font="".concat(f.fontSize,"px ").concat(St),n.fillStyle=f.textColor,n.strokeStyle=f.lineColor,n.textAlign="center",n.textBaseline="top";const u=i.y+i.height;n.beginPath(),n.moveTo(i.x,u),n.lineTo(i.x+i.width,u),n.stroke();const d=la.format(".2~f"),p=t.xAxis,m=s&&!!((x=(M=p==null?void 0:p.majorGridlines)==null?void 0:M.fill)!=null&&x.color),g=(w=f.gridLineColor)!=null?w:f.lineColor;o.ticks(5).forEach(E=>{const A=o(E);n.beginPath(),n.moveTo(A,u),n.lineTo(A,u+4),n.stroke(),m&&(n.save(),n.strokeStyle=g,n.beginPath(),n.moveTo(A,i.y),n.lineTo(A,u),n.stroke(),n.restore()),n.fillText(d(E),A,u+6)}),n.restore()}function Jl(n){var e;if(n.categories.length>0)return n.categories;const t=(e=n.series[0])==null?void 0:e.categories;return t&&t.length>0?t:[]}function Tr(n,t){var c;const e=Jl(n),i=n.series.map((f,u)=>u).filter(f=>!(t!=null&&t.has(f))),s=(c=n.barOptions)==null?void 0:c.grouping,r=s===We.BAR_GROUPING_STACKED?"stacked":s===We.BAR_GROUPING_PERCENT_STACKED?"percent":"clustered",o=e.map(()=>[]);if(r==="clustered"||i.length===0)return e.forEach((f,u)=>{i.forEach(d=>{var g,y;const p=n.series[d];if(!p)return;const m=(g=p.values[u])!=null?g:0;(y=o[u])==null||y.push({seriesIndex:d,valueRaw:m,start:0,end:m})})}),{categories:e,visibleSeries:i,mode:r,segmentsByCategory:o};const a=e.map((f,u)=>{const d={};return i.forEach(p=>{var g;const m=n.series[p];d[String(p)]=(g=m==null?void 0:m.values[u])!=null?g:0}),d}),h=mr().keys(i.map(f=>String(f))).value((f,u)=>{var d;return(d=f[u])!=null?d:0}).order(pr);return r==="percent"?h.offset(gr):h.offset(yr),h(a).forEach(f=>{const u=f.key,d=Number.parseInt(u,10);e.forEach((p,m)=>{var x,w,E;const g=f[m];if(!g)return;const y=Number.isFinite(g[0])?g[0]:0,b=Number.isFinite(g[1])?g[1]:0,M=(w=(x=n.series[d])==null?void 0:x.values[m])!=null?w:0;(E=o[m])==null||E.push({seriesIndex:d,valueRaw:M,start:y,end:b})})}),{categories:e,visibleSeries:i,mode:r,segmentsByCategory:o}}function Kl(n,t,e,i,s,r){const{x:o,y:a}=e,h=Tr(t,r),l=h.categories,c=h.mode==="clustered",f=c&&h.visibleSeries.length>0?qi().domain(ta(h.visibleSeries.length)).range([0,a.bandwidth()]).padding(.05):void 0;l.forEach((u,d)=>{const p=a(u);if(p===void 0)return;const m=h.segmentsByCategory[d];if(!m)return;const g=c||m.length===0?void 0:m.reduce((b,M,x)=>{if(M.end<M.start)return b;if(b===void 0)return x;const w=m[b];return w&&w.end<M.end?x:b},void 0),y=c||m.length===0?void 0:m.reduce((b,M,x)=>{if(M.end>=M.start)return b;if(b===void 0)return x;const w=m[b];return w&&w.end>M.end?x:b},void 0);m.forEach((b,M)=>{var st,ft,K,rt,at,X;const x=t.series[b.seriesIndex];if(!x)return;const w=b.valueRaw,E=f&&(st=f(M))!=null?st:0,A=c?p+E:p,N=c?(ft=f==null?void 0:f.bandwidth())!=null?ft:0:a.bandwidth(),z=o(b.start),P=o(b.end),v=Math.min(z,P),L=Math.max(z,P),C=Math.abs(L-v),B=b.end>=b.start,Y=_e(x,d),et=fe(x,d,b.seriesIndex,i);!Y&&et&&(n.fillStyle=et);const F=Math.max(0,Math.min(Mr,N/2,C)),H=c||(b.end>=b.start?M===g:M===y)?F:0;n.beginPath(),B?(n.moveTo(v,A),n.lineTo(L-H,A),n.arcTo(L,A,L,A+H,H),n.lineTo(L,A+N-H),n.arcTo(L,A+N,L-H,A+N,H),n.lineTo(v,A+N),n.closePath()):(n.moveTo(L,A),n.lineTo(v+H,A),n.arcTo(v,A,v,A+H,H),n.lineTo(v,A+N-H),n.arcTo(v,A+N,v+H,A+N,H),n.lineTo(L,A+N),n.closePath()),!Y&&et&&n.fill();const{color:j,widthPx:U}=we(x,d,i);if(j&&(n.strokeStyle=j,n.lineWidth=U!=null?U:1,n.stroke()),s){const _=B?L:v;s.push({kind:"bar-horizontal",x:v,y:A,width:C,height:N,seriesName:x.name,category:u,value:w,color:et,anchorX:_,anchorY:A})}if((K=t.dataLabels)!=null&&K.showValue&&N>0){const _=t.dataLabels.position,S=la.format(".2~f")(w),T=(rt=t.dataLabels.textStyle)!=null&&rt.fontSize?Ge(t.dataLabels.textStyle.fontSize):ji,q=(X=(at=t.dataLabels.textStyle)==null?void 0:at.fill)!=null&&X.color?Pt(t.dataLabels.textStyle.fill.color,i):Gt;n.fillStyle=q,n.font="".concat(T,"px ").concat(St),n.textBaseline="middle";let I=B?L+4:v-4;_===2&&(I=B?L-4:v+4),_===3&&(I=v+C/2),_===3?n.textAlign="center":_===2?n.textAlign=B?"right":"left":n.textAlign=B?"left":"right";const it=A+N/2;n.fillText(S,I,it)}})})}function Ea(n,t,e,i){var f,u,d,p,m,g,y,b,M,x,w,E;const s=n.dataLabels,r=t.dataLabels,o=(f=t.dataLabelOverrides)==null?void 0:f.find(A=>A.idx===e),a=(p=(d=(u=o==null?void 0:o.showValue)!=null?u:r==null?void 0:r.showValue)!=null?d:s==null?void 0:s.showValue)!=null?p:!1,h=(y=(g=(m=o==null?void 0:o.position)!=null?m:r==null?void 0:r.position)!=null?g:s==null?void 0:s.position)!=null?y:Jo.DATA_LABEL_POSITION_OUT_END;let l=(b=o==null?void 0:o.text)!=null?b:"";if(!l){const A=(M=t.valuesFormatCode)!=null?M:void 0;l=_n(i,A)}const c=(E=(w=(x=o==null?void 0:o.textStyle)!=null?x:r==null?void 0:r.textStyle)!=null?w:s==null?void 0:s.textStyle)!=null?E:void 0;return{show:a,position:h,text:l,textStyle:c}}function Ql(n,t,e,i,s,r){if(!Sn(e.x))return;const o=e.x,a=e.y,h=Tr(t,r),l=h.categories,c=h.mode==="clustered",f=c&&h.visibleSeries.length>0?qi().domain(ta(h.visibleSeries.length)).range([0,o.bandwidth()]).padding(.05):void 0;l.forEach((u,d)=>{const p=o(u);if(p===void 0)return;const m=h.segmentsByCategory[d],g=c||(m==null?void 0:m.length)===0||m==null?void 0:m.reduce((b,M,x)=>{if(M.end<M.start)return b;if(b===void 0)return x;const w=m[b];return w&&w.end<M.end?x:b},void 0),y=c||(m==null?void 0:m.length)===0||m==null?void 0:m.reduce((b,M,x)=>{if(M.end>=M.start)return b;if(b===void 0)return x;const w=m[b];return w&&w.end>M.end?x:b},void 0);m==null||m.forEach((b,M)=>{var st,ft,K,rt,at,X;const x=t.series[b.seriesIndex];if(!x)return;const w=b.valueRaw,E=_e(x,d),A=fe(x,d,b.seriesIndex,i),N=f!==void 0&&(st=f(M))!=null?st:0,z=c?p+N:p,P=c?f!==void 0?f.bandwidth():0:o.bandwidth(),v=a(b.start),L=a(b.end),C=Math.min(v,L),B=Math.abs(L-v),Y=C+B,G=Math.max(0,Math.min(Mr,P/2,B)),D=c||(b.end>=b.start?M===g:M===y)?G:0;n.beginPath(),w>=0?(n.moveTo(z,Y),n.lineTo(z,C+D),n.arcTo(z,C,z+D,C,D),n.lineTo(z+P-D,C),n.arcTo(z+P,C,z+P,C+D,D),n.lineTo(z+P,Y),n.closePath()):(n.moveTo(z,C),n.lineTo(z,Y-D),n.arcTo(z,Y,z+D,Y,D),n.lineTo(z+P-D,Y),n.arcTo(z+P,Y,z+P,Y-D,D),n.lineTo(z+P,C),n.closePath()),!E&&A&&(n.fillStyle=A,n.fill());const{color:H,widthPx:j}=we(x,d,i);if(H&&(n.strokeStyle=H,n.lineWidth=j!=null?j:1,n.stroke()),s){const _=Math.min(C,Y);s.push({kind:"bar-vertical",x:z,y:C,width:P,height:B,seriesName:x.name,category:u,value:w,color:A,anchorX:z+P,anchorY:_})}const U=Ea(t,x,d,w);if(U.show&&P>0){const _=(ft=U.textStyle)!=null&&ft.fontSize?Ge(U.textStyle.fontSize):ji,S=(rt=(K=U.textStyle)==null?void 0:K.fill)!=null&&rt.color?Pt(U.textStyle.fill.color,i):Gt;n.fillStyle=S;const T=(X=(at=U.textStyle)==null?void 0:at.bold)!=null?X:!0;n.font="".concat(T?"bold ":"").concat(_,"px ").concat(St),n.textBaseline="middle",n.textAlign="center";const q=z+P/2;let I=C-12;U.position===2&&(I=C+(c?12:20)),U.position===3&&(I=C+B/2),n.fillText(U.text,q,I)}})})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const va="179",cr=0,tc=1,io=1,no=100,so=204,ro=205,oo=3,ec=0,Ca=300,ao=1e3,kn=1001,ho=1002,ic=1006,nc=1008,sc=1009,rc=1015,oc=1023,ac=0,Ia="",Ce="srgb",lo="srgb-linear",co="linear",Cs="srgb",Ci=7680,uo=519,ur=35044,Nn=2e3,fo=2001;class xs{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const i=this._listeners;if(i===void 0)return;const s=i[t];if(s!==void 0){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const i=e[t.type];if(i!==void 0){t.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,t);t.target=null}}}const qt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let mo=1234567;const ka=Math.PI/180,Na=180/Math.PI;function De(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qt[n&255]+qt[n>>8&255]+qt[n>>16&255]+qt[n>>24&255]+"-"+qt[t&255]+qt[t>>8&255]+"-"+qt[t>>16&15|64]+qt[t>>24&255]+"-"+qt[e&63|128]+qt[e>>8&255]+"-"+qt[e>>16&255]+qt[e>>24&255]+qt[i&255]+qt[i>>8&255]+qt[i>>16&255]+qt[i>>24&255]).toLowerCase()}function _t(n,t,e){return Math.max(t,Math.min(e,n))}function Sr(n,t){return(n%t+t)%t}function hc(n,t,e,i,s){return i+(n-t)*(s-i)/(e-t)}function lc(n,t,e){return n!==t?(e-n)/(t-n):0}function Mn(n,t,e){return(1-e)*n+e*t}function cc(n,t,e,i){return Mn(n,t,1-Math.exp(-e*i))}function uc(n,t=1){return t-Math.abs(Sr(n,t*2)-t)}function fc(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function dc(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function mc(n,t){return n+Math.floor(Math.random()*(t-n+1))}function pc(n,t){return n+Math.random()*(t-n)}function gc(n){return n*(.5-Math.random())}function yc(n){n!==void 0&&(mo=n);let t=mo+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function xc(n){return n*ka}function bc(n){return n*Na}function Mc(n){return(n&n-1)===0&&n!==0}function wc(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function _c(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Tc(n,t,e,i,s){const r=Math.cos,o=Math.sin,a=r(e/2),h=o(e/2),l=r((t+i)/2),c=o((t+i)/2),f=r((t-i)/2),u=o((t-i)/2),d=r((i-t)/2),p=o((i-t)/2);switch(s){case"XYX":n.set(a*c,h*f,h*u,a*l);break;case"YZY":n.set(h*u,a*c,h*f,a*l);break;case"ZXZ":n.set(h*f,h*u,a*c,a*l);break;case"XZX":n.set(a*c,h*p,h*d,a*l);break;case"YXY":n.set(h*d,a*c,h*p,a*l);break;case"ZYZ":n.set(h*p,h*d,a*c,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ie(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function kt(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const za={DEG2RAD:ka,RAD2DEG:Na,generateUUID:De,clamp:_t,euclideanModulo:Sr,mapLinear:hc,inverseLerp:lc,lerp:Mn,damp:cc,pingpong:uc,smoothstep:fc,smootherstep:dc,randInt:mc,randFloat:pc,randFloatSpread:gc,seededRandom:yc,degToRad:xc,radToDeg:bc,isPowerOfTwo:Mc,ceilPowerOfTwo:wc,floorPowerOfTwo:_c,setQuaternionFromProperEuler:Tc,normalize:kt,denormalize:Ie};class Lt{constructor(t=0,e=0){Lt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6],this.y=s[1]*e+s[4]*i+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=_t(this.x,t.x,e.x),this.y=_t(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=_t(this.x,t,e),this.y=_t(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(_t(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(_t(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),s=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*s+t.x,this.y=r*s+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class An{constructor(t=0,e=0,i=0,s=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=s}static slerpFlat(t,e,i,s,r,o,a){let h=i[s+0],l=i[s+1],c=i[s+2],f=i[s+3];const u=r[o+0],d=r[o+1],p=r[o+2],m=r[o+3];if(a===0){t[e+0]=h,t[e+1]=l,t[e+2]=c,t[e+3]=f;return}if(a===1){t[e+0]=u,t[e+1]=d,t[e+2]=p,t[e+3]=m;return}if(f!==m||h!==u||l!==d||c!==p){let g=1-a;const y=h*u+l*d+c*p+f*m,b=y>=0?1:-1,M=1-y*y;if(M>Number.EPSILON){const w=Math.sqrt(M),E=Math.atan2(w,y*b);g=Math.sin(g*E)/w,a=Math.sin(a*E)/w}const x=a*b;if(h=h*g+u*x,l=l*g+d*x,c=c*g+p*x,f=f*g+m*x,g===1-a){const w=1/Math.sqrt(h*h+l*l+c*c+f*f);h*=w,l*=w,c*=w,f*=w}}t[e]=h,t[e+1]=l,t[e+2]=c,t[e+3]=f}static multiplyQuaternionsFlat(t,e,i,s,r,o){const a=i[s],h=i[s+1],l=i[s+2],c=i[s+3],f=r[o],u=r[o+1],d=r[o+2],p=r[o+3];return t[e]=a*p+c*f+h*d-l*u,t[e+1]=h*p+c*u+l*f-a*d,t[e+2]=l*p+c*d+a*u-h*f,t[e+3]=c*p-a*f-h*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,s){return this._x=t,this._y=e,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,s=t._y,r=t._z,o=t._order,a=Math.cos,h=Math.sin,l=a(i/2),c=a(s/2),f=a(r/2),u=h(i/2),d=h(s/2),p=h(r/2);switch(o){case"XYZ":this._x=u*c*f+l*d*p,this._y=l*d*f-u*c*p,this._z=l*c*p+u*d*f,this._w=l*c*f-u*d*p;break;case"YXZ":this._x=u*c*f+l*d*p,this._y=l*d*f-u*c*p,this._z=l*c*p-u*d*f,this._w=l*c*f+u*d*p;break;case"ZXY":this._x=u*c*f-l*d*p,this._y=l*d*f+u*c*p,this._z=l*c*p+u*d*f,this._w=l*c*f-u*d*p;break;case"ZYX":this._x=u*c*f-l*d*p,this._y=l*d*f+u*c*p,this._z=l*c*p-u*d*f,this._w=l*c*f+u*d*p;break;case"YZX":this._x=u*c*f+l*d*p,this._y=l*d*f+u*c*p,this._z=l*c*p-u*d*f,this._w=l*c*f-u*d*p;break;case"XZY":this._x=u*c*f-l*d*p,this._y=l*d*f-u*c*p,this._z=l*c*p+u*d*f,this._w=l*c*f+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,s=Math.sin(i);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],s=e[4],r=e[8],o=e[1],a=e[5],h=e[9],l=e[2],c=e[6],f=e[10],u=i+a+f;if(u>0){const d=.5/Math.sqrt(u+1);this._w=.25/d,this._x=(c-h)*d,this._y=(r-l)*d,this._z=(o-s)*d}else if(i>a&&i>f){const d=2*Math.sqrt(1+i-a-f);this._w=(c-h)/d,this._x=.25*d,this._y=(s+o)/d,this._z=(r+l)/d}else if(a>f){const d=2*Math.sqrt(1+a-i-f);this._w=(r-l)/d,this._x=(s+o)/d,this._y=.25*d,this._z=(h+c)/d}else{const d=2*Math.sqrt(1+f-i-a);this._w=(o-s)/d,this._x=(r+l)/d,this._y=(h+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-8?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(_t(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const s=Math.min(1,e/i);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,s=t._y,r=t._z,o=t._w,a=e._x,h=e._y,l=e._z,c=e._w;return this._x=i*c+o*a+s*l-r*h,this._y=s*c+o*h+r*a-i*l,this._z=r*c+o*l+i*h-s*a,this._w=o*c-i*a-s*h-r*l,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*t._w+i*t._x+s*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const h=1-a*a;if(h<=Number.EPSILON){const d=1-e;return this._w=d*o+e*this._w,this._x=d*i+e*this._x,this._y=d*s+e*this._y,this._z=d*r+e*this._z,this.normalize(),this}const l=Math.sqrt(h),c=Math.atan2(l,a),f=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=o*f+this._w*u,this._x=i*f+this._x*u,this._y=s*f+this._y*u,this._z=r*f+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(t),s*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(t=0,e=0,i=0){W.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(po.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(po.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*s,this.y=r[1]*e+r[4]*i+r[7]*s,this.z=r[2]*e+r[5]*i+r[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(t){const e=this.x,i=this.y,s=this.z,r=t.x,o=t.y,a=t.z,h=t.w,l=2*(o*s-a*i),c=2*(a*e-r*s),f=2*(r*i-o*e);return this.x=e+h*l+o*f-a*c,this.y=i+h*c+a*l-r*f,this.z=s+h*f+r*c-o*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,s=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*s,this.y=r[1]*e+r[5]*i+r[9]*s,this.z=r[2]*e+r[6]*i+r[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=_t(this.x,t.x,e.x),this.y=_t(this.y,t.y,e.y),this.z=_t(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=_t(this.x,t,e),this.y=_t(this.y,t,e),this.z=_t(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(_t(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,s=t.y,r=t.z,o=e.x,a=e.y,h=e.z;return this.x=s*h-r*a,this.y=r*o-i*h,this.z=i*a-s*o,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Is.copy(this).projectOnVector(t),this.sub(Is)}reflect(t){return this.sub(Is.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(_t(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,s=this.z-t.z;return e*e+i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const s=Math.sin(e)*t;return this.x=s*Math.sin(i),this.y=Math.cos(e)*t,this.z=s*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=s,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Is=new W,po=new An;class oi{constructor(t,e,i,s,r,o,a,h,l){oi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,s,r,o,a,h,l)}set(t,e,i,s,r,o,a,h,l){const c=this.elements;return c[0]=t,c[1]=s,c[2]=a,c[3]=e,c[4]=r,c[5]=h,c[6]=i,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,o=i[0],a=i[3],h=i[6],l=i[1],c=i[4],f=i[7],u=i[2],d=i[5],p=i[8],m=s[0],g=s[3],y=s[6],b=s[1],M=s[4],x=s[7],w=s[2],E=s[5],A=s[8];return r[0]=o*m+a*b+h*w,r[3]=o*g+a*M+h*E,r[6]=o*y+a*x+h*A,r[1]=l*m+c*b+f*w,r[4]=l*g+c*M+f*E,r[7]=l*y+c*x+f*A,r[2]=u*m+d*b+p*w,r[5]=u*g+d*M+p*E,r[8]=u*y+d*x+p*A,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-i*r*c+i*a*h+s*r*l-s*o*h}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],l=t[7],c=t[8],f=c*o-a*l,u=a*h-c*r,d=l*r-o*h,p=e*f+i*u+s*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return t[0]=f*m,t[1]=(s*l-c*i)*m,t[2]=(a*i-s*o)*m,t[3]=u*m,t[4]=(c*e-s*h)*m,t[5]=(s*r-a*e)*m,t[6]=d*m,t[7]=(i*h-l*e)*m,t[8]=(o*e-i*r)*m,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,s,r,o,a){const h=Math.cos(r),l=Math.sin(r);return this.set(i*h,i*l,-i*(h*o+l*a)+o+t,-s*l,s*h,-s*(-l*o+h*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(ks.makeScale(t,e)),this}rotate(t){return this.premultiply(ks.makeRotation(-t)),this}translate(t,e){return this.premultiply(ks.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<9;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const ks=new oi;function Sc(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function go(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const yo={};function xo(n){n in yo||(yo[n]=!0,console.warn(n))}const bo=new oi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Mo=new oi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Ac(){const n={enabled:!0,workingColorSpace:lo,spaces:{},convert:function(s,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===Cs&&(s.r=He(s.r),s.g=He(s.g),s.b=He(s.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Cs&&(s.r=Ui(s.r),s.g=Ui(s.g),s.b=Ui(s.b))),s},workingToColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},colorSpaceToWorking:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Ia?co:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,o){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,r){return xo("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(s,r)},toWorkingColorSpace:function(s,r){return xo("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(s,r)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[lo]:{primaries:t,whitePoint:i,transfer:co,toXYZ:bo,fromXYZ:Mo,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Ce},outputColorSpaceConfig:{drawingBufferColorSpace:Ce}},[Ce]:{primaries:t,whitePoint:i,transfer:Cs,toXYZ:bo,fromXYZ:Mo,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Ce}}}),n}const Se=Ac();function He(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ui(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ii;class Ec{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{Ii===void 0&&(Ii=go("canvas")),Ii.width=t.width,Ii.height=t.height;const s=Ii.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),i=Ii}return i.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=go("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=He(r[o]/255)*255;return i.putImageData(s,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(He(e[i]/255)*255):e[i]=He(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let vc=0;class Cc{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:vc++}),this.uuid=De(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(Ns(s[o].image)):r.push(Ns(s[o]))}else r=Ns(s);i.url=r}return e||(t.images[this.uuid]=i),i}}function Ns(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Ec.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ic=0;const zs=new W;class ii extends xs{constructor(t=ii.DEFAULT_IMAGE,e=ii.DEFAULT_MAPPING,i=kn,s=kn,r=ic,o=nc,a=oc,h=sc,l=ii.DEFAULT_ANISOTROPY,c=Ia){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ic++}),this.uuid=De(),this.name="",this.source=new Cc(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=h,this.offset=new Lt(0,0),this.repeat=new Lt(1,1),this.center=new Lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new oi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(zs).x}get height(){return this.source.getSize(zs).y}get depth(){return this.source.getSize(zs).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const i=t[e];if(i===void 0){console.warn("THREE.Texture.setValues(): parameter '".concat(e,"' has value of undefined."));continue}const s=this[e];if(s===void 0){console.warn("THREE.Texture.setValues(): property '".concat(e,"' does not exist."));continue}s&&i&&s.isVector2&&i.isVector2||s&&i&&s.isVector3&&i.isVector3||s&&i&&s.isMatrix3&&i.isMatrix3?s.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Ca)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ao:t.x=t.x-Math.floor(t.x);break;case kn:t.x=t.x<0?0:1;break;case ho:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ao:t.y=t.y-Math.floor(t.y);break;case kn:t.y=t.y<0?0:1;break;case ho:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}ii.DEFAULT_IMAGE=null;ii.DEFAULT_MAPPING=Ca;ii.DEFAULT_ANISOTROPY=1;class $e{constructor(t=0,e=0,i=0,s=1){$e.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,s){return this.x=t,this.y=e,this.z=i,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,s=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*s+o[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,s,r;const h=t.elements,l=h[0],c=h[4],f=h[8],u=h[1],d=h[5],p=h[9],m=h[2],g=h[6],y=h[10];if(Math.abs(c-u)<.01&&Math.abs(f-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+u)<.1&&Math.abs(f+m)<.1&&Math.abs(p+g)<.1&&Math.abs(l+d+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const M=(l+1)/2,x=(d+1)/2,w=(y+1)/2,E=(c+u)/4,A=(f+m)/4,N=(p+g)/4;return M>x&&M>w?M<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(M),s=E/i,r=A/i):x>w?x<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(x),i=E/s,r=N/s):w<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(w),i=A/r,s=N/r),this.set(i,s,r,e),this}let b=Math.sqrt((g-p)*(g-p)+(f-m)*(f-m)+(u-c)*(u-c));return Math.abs(b)<.001&&(b=1),this.x=(g-p)/b,this.y=(f-m)/b,this.z=(u-c)/b,this.w=Math.acos((l+d+y-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=_t(this.x,t.x,e.x),this.y=_t(this.y,t.y,e.y),this.z=_t(this.z,t.z,e.z),this.w=_t(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=_t(this.x,t,e),this.y=_t(this.y,t,e),this.z=_t(this.z,t,e),this.w=_t(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(_t(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ti{constructor(t=new W(1/0,1/0,1/0),e=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Ae.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Ae.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Ae.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0){const r=i.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)t.isMesh===!0?t.getVertexPosition(o,Ae):Ae.fromBufferAttribute(r,o),Ae.applyMatrix4(t.matrixWorld),this.expandByPoint(Ae);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),zn.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),zn.copy(i.boundingBox)),zn.applyMatrix4(t.matrixWorld),this.union(zn)}const s=t.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ae),Ae.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(hn),Pn.subVectors(this.max,hn),ki.subVectors(t.a,hn),Ni.subVectors(t.b,hn),zi.subVectors(t.c,hn),Ze.subVectors(Ni,ki),je.subVectors(zi,Ni),di.subVectors(ki,zi);let e=[0,-Ze.z,Ze.y,0,-je.z,je.y,0,-di.z,di.y,Ze.z,0,-Ze.x,je.z,0,-je.x,di.z,0,-di.x,-Ze.y,Ze.x,0,-je.y,je.x,0,-di.y,di.x,0];return!Ps(e,ki,Ni,zi,Pn)||(e=[1,0,0,0,1,0,0,0,1],!Ps(e,ki,Ni,zi,Pn))?!1:(Rn.crossVectors(Ze,je),e=[Rn.x,Rn.y,Rn.z],Ps(e,ki,Ni,zi,Pn))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ae).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Ae).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Re[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Re[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Re[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Re[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Re[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Re[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Re[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Re[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Re),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const Re=[new W,new W,new W,new W,new W,new W,new W,new W],Ae=new W,zn=new Ti,ki=new W,Ni=new W,zi=new W,Ze=new W,je=new W,di=new W,hn=new W,Pn=new W,Rn=new W,mi=new W;function Ps(n,t,e,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){mi.fromArray(n,r);const a=s.x*Math.abs(mi.x)+s.y*Math.abs(mi.y)+s.z*Math.abs(mi.z),h=t.dot(mi),l=e.dot(mi),c=i.dot(mi);if(Math.max(-Math.max(h,l,c),Math.min(h,l,c))>a)return!1}return!0}const kc=new Ti,ln=new W,Rs=new W;class Ar{constructor(t=new W,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):kc.setFromPoints(t).getCenter(i);let s=0;for(let r=0,o=t.length;r<o;r++)s=Math.max(s,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ln.subVectors(t,this.center);const e=ln.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),s=(i-this.radius)*.5;this.center.addScaledVector(ln,s/i),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Rs.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ln.copy(t.center).add(Rs)),this.expandByPoint(ln.copy(t.center).sub(Rs))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const Fe=new W,Fs=new W,Fn=new W,Je=new W,Ls=new W,Ln=new W,Bs=new W;class Pa{constructor(t=new W,e=new W(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Fe)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Fe.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Fe.copy(this.origin).addScaledVector(this.direction,e),Fe.distanceToSquared(t))}distanceSqToSegment(t,e,i,s){Fs.copy(t).add(e).multiplyScalar(.5),Fn.copy(e).sub(t).normalize(),Je.copy(this.origin).sub(Fs);const r=t.distanceTo(e)*.5,o=-this.direction.dot(Fn),a=Je.dot(this.direction),h=-Je.dot(Fn),l=Je.lengthSq(),c=Math.abs(1-o*o);let f,u,d,p;if(c>0)if(f=o*h-a,u=o*a-h,p=r*c,f>=0)if(u>=-p)if(u<=p){const m=1/c;f*=m,u*=m,d=f*(f+o*u+2*a)+u*(o*f+u+2*h)+l}else u=r,f=Math.max(0,-(o*u+a)),d=-f*f+u*(u+2*h)+l;else u=-r,f=Math.max(0,-(o*u+a)),d=-f*f+u*(u+2*h)+l;else u<=-p?(f=Math.max(0,-(-o*r+a)),u=f>0?-r:Math.min(Math.max(-r,-h),r),d=-f*f+u*(u+2*h)+l):u<=p?(f=0,u=Math.min(Math.max(-r,-h),r),d=u*(u+2*h)+l):(f=Math.max(0,-(o*r+a)),u=f>0?r:Math.min(Math.max(-r,-h),r),d=-f*f+u*(u+2*h)+l);else u=o>0?-r:r,f=Math.max(0,-(o*u+a)),d=-f*f+u*(u+2*h)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,f),s&&s.copy(Fs).addScaledVector(Fn,u),d}intersectSphere(t,e){Fe.subVectors(t.center,this.origin);const i=Fe.dot(this.direction),s=Fe.dot(Fe)-i*i,r=t.radius*t.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,h=i+o;return h<0?null:a<0?this.at(h,e):this.at(a,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,s,r,o,a,h;const l=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,u=this.origin;return l>=0?(i=(t.min.x-u.x)*l,s=(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,s=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,o=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,o=(t.min.y-u.y)*c),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),f>=0?(a=(t.min.z-u.z)*f,h=(t.max.z-u.z)*f):(a=(t.max.z-u.z)*f,h=(t.min.z-u.z)*f),i>h||a>s)||((a>i||i!==i)&&(i=a),(h<s||s!==s)&&(s=h),s<0)?null:this.at(i>=0?i:s,e)}intersectsBox(t){return this.intersectBox(t,Fe)!==null}intersectTriangle(t,e,i,s,r){Ls.subVectors(e,t),Ln.subVectors(i,t),Bs.crossVectors(Ls,Ln);let o=this.direction.dot(Bs),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Je.subVectors(this.origin,t);const h=a*this.direction.dot(Ln.crossVectors(Je,Ln));if(h<0)return null;const l=a*this.direction.dot(Ls.cross(Je));if(l<0||h+l>o)return null;const c=-a*Je.dot(Bs);return c<0?null:this.at(c/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ue{constructor(t,e,i,s,r,o,a,h,l,c,f,u,d,p,m,g){ue.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,s,r,o,a,h,l,c,f,u,d,p,m,g)}set(t,e,i,s,r,o,a,h,l,c,f,u,d,p,m,g){const y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=s,y[1]=r,y[5]=o,y[9]=a,y[13]=h,y[2]=l,y[6]=c,y[10]=f,y[14]=u,y[3]=d,y[7]=p,y[11]=m,y[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ue().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,s=1/Pi.setFromMatrixColumn(t,0).length(),r=1/Pi.setFromMatrixColumn(t,1).length(),o=1/Pi.setFromMatrixColumn(t,2).length();return e[0]=i[0]*s,e[1]=i[1]*s,e[2]=i[2]*s,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,s=t.y,r=t.z,o=Math.cos(i),a=Math.sin(i),h=Math.cos(s),l=Math.sin(s),c=Math.cos(r),f=Math.sin(r);if(t.order==="XYZ"){const u=o*c,d=o*f,p=a*c,m=a*f;e[0]=h*c,e[4]=-h*f,e[8]=l,e[1]=d+p*l,e[5]=u-m*l,e[9]=-a*h,e[2]=m-u*l,e[6]=p+d*l,e[10]=o*h}else if(t.order==="YXZ"){const u=h*c,d=h*f,p=l*c,m=l*f;e[0]=u+m*a,e[4]=p*a-d,e[8]=o*l,e[1]=o*f,e[5]=o*c,e[9]=-a,e[2]=d*a-p,e[6]=m+u*a,e[10]=o*h}else if(t.order==="ZXY"){const u=h*c,d=h*f,p=l*c,m=l*f;e[0]=u-m*a,e[4]=-o*f,e[8]=p+d*a,e[1]=d+p*a,e[5]=o*c,e[9]=m-u*a,e[2]=-o*l,e[6]=a,e[10]=o*h}else if(t.order==="ZYX"){const u=o*c,d=o*f,p=a*c,m=a*f;e[0]=h*c,e[4]=p*l-d,e[8]=u*l+m,e[1]=h*f,e[5]=m*l+u,e[9]=d*l-p,e[2]=-l,e[6]=a*h,e[10]=o*h}else if(t.order==="YZX"){const u=o*h,d=o*l,p=a*h,m=a*l;e[0]=h*c,e[4]=m-u*f,e[8]=p*f+d,e[1]=f,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=d*f+p,e[10]=u-m*f}else if(t.order==="XZY"){const u=o*h,d=o*l,p=a*h,m=a*l;e[0]=h*c,e[4]=-f,e[8]=l*c,e[1]=u*f+m,e[5]=o*c,e[9]=d*f-p,e[2]=p*f-d,e[6]=a*c,e[10]=m*f+u}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Nc,t,zc)}lookAt(t,e,i){const s=this.elements;return le.subVectors(t,e),le.lengthSq()===0&&(le.z=1),le.normalize(),Ke.crossVectors(i,le),Ke.lengthSq()===0&&(Math.abs(i.z)===1?le.x+=1e-4:le.z+=1e-4,le.normalize(),Ke.crossVectors(i,le)),Ke.normalize(),Bn.crossVectors(le,Ke),s[0]=Ke.x,s[4]=Bn.x,s[8]=le.x,s[1]=Ke.y,s[5]=Bn.y,s[9]=le.y,s[2]=Ke.z,s[6]=Bn.z,s[10]=le.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,s=e.elements,r=this.elements,o=i[0],a=i[4],h=i[8],l=i[12],c=i[1],f=i[5],u=i[9],d=i[13],p=i[2],m=i[6],g=i[10],y=i[14],b=i[3],M=i[7],x=i[11],w=i[15],E=s[0],A=s[4],N=s[8],z=s[12],P=s[1],v=s[5],L=s[9],C=s[13],B=s[2],Y=s[6],et=s[10],G=s[14],F=s[3],D=s[7],H=s[11],j=s[15];return r[0]=o*E+a*P+h*B+l*F,r[4]=o*A+a*v+h*Y+l*D,r[8]=o*N+a*L+h*et+l*H,r[12]=o*z+a*C+h*G+l*j,r[1]=c*E+f*P+u*B+d*F,r[5]=c*A+f*v+u*Y+d*D,r[9]=c*N+f*L+u*et+d*H,r[13]=c*z+f*C+u*G+d*j,r[2]=p*E+m*P+g*B+y*F,r[6]=p*A+m*v+g*Y+y*D,r[10]=p*N+m*L+g*et+y*H,r[14]=p*z+m*C+g*G+y*j,r[3]=b*E+M*P+x*B+w*F,r[7]=b*A+M*v+x*Y+w*D,r[11]=b*N+M*L+x*et+w*H,r[15]=b*z+M*C+x*G+w*j,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],s=t[8],r=t[12],o=t[1],a=t[5],h=t[9],l=t[13],c=t[2],f=t[6],u=t[10],d=t[14],p=t[3],m=t[7],g=t[11],y=t[15];return p*(+r*h*f-s*l*f-r*a*u+i*l*u+s*a*d-i*h*d)+m*(+e*h*d-e*l*u+r*o*u-s*o*d+s*l*c-r*h*c)+g*(+e*l*f-e*a*d-r*o*f+i*o*d+r*a*c-i*l*c)+y*(-s*a*c-e*h*f+e*a*u+s*o*f-i*o*u+i*h*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=e,s[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],h=t[6],l=t[7],c=t[8],f=t[9],u=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],b=f*g*l-m*u*l+m*h*d-a*g*d-f*h*y+a*u*y,M=p*u*l-c*g*l-p*h*d+o*g*d+c*h*y-o*u*y,x=c*m*l-p*f*l+p*a*d-o*m*d-c*a*y+o*f*y,w=p*f*h-c*m*h-p*a*u+o*m*u+c*a*g-o*f*g,E=e*b+i*M+s*x+r*w;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/E;return t[0]=b*A,t[1]=(m*u*r-f*g*r-m*s*d+i*g*d+f*s*y-i*u*y)*A,t[2]=(a*g*r-m*h*r+m*s*l-i*g*l-a*s*y+i*h*y)*A,t[3]=(f*h*r-a*u*r-f*s*l+i*u*l+a*s*d-i*h*d)*A,t[4]=M*A,t[5]=(c*g*r-p*u*r+p*s*d-e*g*d-c*s*y+e*u*y)*A,t[6]=(p*h*r-o*g*r-p*s*l+e*g*l+o*s*y-e*h*y)*A,t[7]=(o*u*r-c*h*r+c*s*l-e*u*l-o*s*d+e*h*d)*A,t[8]=x*A,t[9]=(p*f*r-c*m*r-p*i*d+e*m*d+c*i*y-e*f*y)*A,t[10]=(o*m*r-p*a*r+p*i*l-e*m*l-o*i*y+e*a*y)*A,t[11]=(c*a*r-o*f*r-c*i*l+e*f*l+o*i*d-e*a*d)*A,t[12]=w*A,t[13]=(c*m*s-p*f*s+p*i*u-e*m*u-c*i*g+e*f*g)*A,t[14]=(p*a*s-o*m*s-p*i*h+e*m*h+o*i*g-e*a*g)*A,t[15]=(o*f*s-c*a*s+c*i*h-e*f*h-o*i*u+e*a*u)*A,this}scale(t){const e=this.elements,i=t.x,s=t.y,r=t.z;return e[0]*=i,e[4]*=s,e[8]*=r,e[1]*=i,e[5]*=s,e[9]*=r,e[2]*=i,e[6]*=s,e[10]*=r,e[3]*=i,e[7]*=s,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,s))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),s=Math.sin(e),r=1-i,o=t.x,a=t.y,h=t.z,l=r*o,c=r*a;return this.set(l*o+i,l*a-s*h,l*h+s*a,0,l*a+s*h,c*a+i,c*h-s*o,0,l*h-s*a,c*h+s*o,r*h*h+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,s,r,o){return this.set(1,i,r,0,t,1,o,0,e,s,1,0,0,0,0,1),this}compose(t,e,i){const s=this.elements,r=e._x,o=e._y,a=e._z,h=e._w,l=r+r,c=o+o,f=a+a,u=r*l,d=r*c,p=r*f,m=o*c,g=o*f,y=a*f,b=h*l,M=h*c,x=h*f,w=i.x,E=i.y,A=i.z;return s[0]=(1-(m+y))*w,s[1]=(d+x)*w,s[2]=(p-M)*w,s[3]=0,s[4]=(d-x)*E,s[5]=(1-(u+y))*E,s[6]=(g+b)*E,s[7]=0,s[8]=(p+M)*A,s[9]=(g-b)*A,s[10]=(1-(u+m))*A,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,e,i){const s=this.elements;let r=Pi.set(s[0],s[1],s[2]).length();const o=Pi.set(s[4],s[5],s[6]).length(),a=Pi.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),t.x=s[12],t.y=s[13],t.z=s[14],Ee.copy(this);const l=1/r,c=1/o,f=1/a;return Ee.elements[0]*=l,Ee.elements[1]*=l,Ee.elements[2]*=l,Ee.elements[4]*=c,Ee.elements[5]*=c,Ee.elements[6]*=c,Ee.elements[8]*=f,Ee.elements[9]*=f,Ee.elements[10]*=f,e.setFromRotationMatrix(Ee),i.x=r,i.y=o,i.z=a,this}makePerspective(t,e,i,s,r,o,a=Nn,h=!1){const l=this.elements,c=2*r/(e-t),f=2*r/(i-s),u=(e+t)/(e-t),d=(i+s)/(i-s);let p,m;if(h)p=r/(o-r),m=o*r/(o-r);else if(a===Nn)p=-(o+r)/(o-r),m=-2*o*r/(o-r);else if(a===fo)p=-o/(o-r),m=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=f,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,i,s,r,o,a=Nn,h=!1){const l=this.elements,c=2/(e-t),f=2/(i-s),u=-(e+t)/(e-t),d=-(i+s)/(i-s);let p,m;if(h)p=1/(o-r),m=o/(o-r);else if(a===Nn)p=-2/(o-r),m=-(o+r)/(o-r);else if(a===fo)p=-1/(o-r),m=-r/(o-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=0,l[12]=u,l[1]=0,l[5]=f,l[9]=0,l[13]=d,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let s=0;s<16;s++)if(e[s]!==i[s])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Pi=new W,Ee=new ue,Nc=new W(0,0,0),zc=new W(1,1,1),Ke=new W,Bn=new W,le=new W,wo=new ue,_o=new An;class Ki{constructor(t=0,e=0,i=0,s=Ki.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,s=this._order){return this._x=t,this._y=e,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const s=t.elements,r=s[0],o=s[4],a=s[8],h=s[1],l=s[5],c=s[9],f=s[2],u=s[6],d=s[10];switch(e){case"XYZ":this._y=Math.asin(_t(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-_t(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-f,r),this._z=0);break;case"ZXY":this._x=Math.asin(_t(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(h,r));break;case"ZYX":this._y=Math.asin(-_t(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(h,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(_t(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-_t(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return wo.makeRotationFromQuaternion(t),this.setFromRotationMatrix(wo,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return _o.setFromEuler(this),this.setFromQuaternion(_o,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ki.DEFAULT_ORDER="XYZ";class Pc{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let Rc=0;const To=new W,Ri=new An,Le=new ue,On=new W,cn=new W,Fc=new W,Lc=new An,So=new W(1,0,0),Ao=new W(0,1,0),Eo=new W(0,0,1),vo={type:"added"},Bc={type:"removed"},Fi={type:"childadded",child:null},Os={type:"childremoved",child:null};class be extends xs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Rc++}),this.uuid=De(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=be.DEFAULT_UP.clone();const t=new W,e=new Ki,i=new An,s=new W(1,1,1);function r(){i.setFromEuler(e,!1)}function o(){e.setFromQuaternion(i,void 0,!1)}e._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ue},normalMatrix:{value:new oi}}),this.matrix=new ue,this.matrixWorld=new ue,this.matrixAutoUpdate=be.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=be.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Pc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Ri.setFromAxisAngle(t,e),this.quaternion.multiply(Ri),this}rotateOnWorldAxis(t,e){return Ri.setFromAxisAngle(t,e),this.quaternion.premultiply(Ri),this}rotateX(t){return this.rotateOnAxis(So,t)}rotateY(t){return this.rotateOnAxis(Ao,t)}rotateZ(t){return this.rotateOnAxis(Eo,t)}translateOnAxis(t,e){return To.copy(t).applyQuaternion(this.quaternion),this.position.add(To.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(So,t)}translateY(t){return this.translateOnAxis(Ao,t)}translateZ(t){return this.translateOnAxis(Eo,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Le.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?On.copy(t):On.set(t,e,i);const s=this.parent;this.updateWorldMatrix(!0,!1),cn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Le.lookAt(cn,On,this.up):Le.lookAt(On,cn,this.up),this.quaternion.setFromRotationMatrix(Le),s&&(Le.extractRotation(s.matrixWorld),Ri.setFromRotationMatrix(Le),this.quaternion.premultiply(Ri.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(vo),Fi.child=t,this.dispatchEvent(Fi),Fi.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Bc),Os.child=t,this.dispatchEvent(Os),Os.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Le.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Le.multiply(t.parent.matrixWorld)),t.applyMatrix4(Le),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(vo),Fi.child=t,this.dispatchEvent(Fi),Fi.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(t,e);if(o!==void 0)return o}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cn,t,Fc),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cn,Lc,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(a=>Te(pe({},a),{boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(a=>pe({},a)),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(t),s.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function r(a,h){return a[h.uuid]===void 0&&(a[h.uuid]=h.toJSON(t)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const h=a.shapes;if(Array.isArray(h))for(let l=0,c=h.length;l<c;l++){const f=h[l];r(t.shapes,f)}else r(t.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let h=0,l=this.material.length;h<l;h++)a.push(r(t.materials,this.material[h]));s.material=a}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const h=this.animations[a];s.animations.push(r(t.animations,h))}}if(e){const a=o(t.geometries),h=o(t.materials),l=o(t.textures),c=o(t.images),f=o(t.shapes),u=o(t.skeletons),d=o(t.animations),p=o(t.nodes);a.length>0&&(i.geometries=a),h.length>0&&(i.materials=h),l.length>0&&(i.textures=l),c.length>0&&(i.images=c),f.length>0&&(i.shapes=f),u.length>0&&(i.skeletons=u),d.length>0&&(i.animations=d),p.length>0&&(i.nodes=p)}return i.object=s,i;function o(a){const h=[];for(const l in a){const c=a[l];delete c.metadata,h.push(c)}return h}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const s=t.children[i];this.add(s.clone())}return this}}be.DEFAULT_UP=new W(0,1,0);be.DEFAULT_MATRIX_AUTO_UPDATE=!0;be.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ve=new W,Be=new W,Ds=new W,Oe=new W,Li=new W,Bi=new W,Co=new W,Hs=new W,Ws=new W,$s=new W,Gs=new $e,Ys=new $e,Vs=new $e;class xe{constructor(t=new W,e=new W,i=new W){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,s){s.subVectors(i,e),ve.subVectors(t,e),s.cross(ve);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(t,e,i,s,r){ve.subVectors(s,e),Be.subVectors(i,e),Ds.subVectors(t,e);const o=ve.dot(ve),a=ve.dot(Be),h=ve.dot(Ds),l=Be.dot(Be),c=Be.dot(Ds),f=o*l-a*a;if(f===0)return r.set(0,0,0),null;const u=1/f,d=(l*h-a*c)*u,p=(o*c-a*h)*u;return r.set(1-d-p,p,d)}static containsPoint(t,e,i,s){return this.getBarycoord(t,e,i,s,Oe)===null?!1:Oe.x>=0&&Oe.y>=0&&Oe.x+Oe.y<=1}static getInterpolation(t,e,i,s,r,o,a,h){return this.getBarycoord(t,e,i,s,Oe)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(r,Oe.x),h.addScaledVector(o,Oe.y),h.addScaledVector(a,Oe.z),h)}static getInterpolatedAttribute(t,e,i,s,r,o){return Gs.setScalar(0),Ys.setScalar(0),Vs.setScalar(0),Gs.fromBufferAttribute(t,e),Ys.fromBufferAttribute(t,i),Vs.fromBufferAttribute(t,s),o.setScalar(0),o.addScaledVector(Gs,r.x),o.addScaledVector(Ys,r.y),o.addScaledVector(Vs,r.z),o}static isFrontFacing(t,e,i,s){return ve.subVectors(i,e),Be.subVectors(t,e),ve.cross(Be).dot(s)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,s){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,e,i,s){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ve.subVectors(this.c,this.b),Be.subVectors(this.a,this.b),ve.cross(Be).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return xe.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return xe.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,s,r){return xe.getInterpolation(t,this.a,this.b,this.c,e,i,s,r)}containsPoint(t){return xe.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return xe.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,s=this.b,r=this.c;let o,a;Li.subVectors(s,i),Bi.subVectors(r,i),Hs.subVectors(t,i);const h=Li.dot(Hs),l=Bi.dot(Hs);if(h<=0&&l<=0)return e.copy(i);Ws.subVectors(t,s);const c=Li.dot(Ws),f=Bi.dot(Ws);if(c>=0&&f<=c)return e.copy(s);const u=h*f-c*l;if(u<=0&&h>=0&&c<=0)return o=h/(h-c),e.copy(i).addScaledVector(Li,o);$s.subVectors(t,r);const d=Li.dot($s),p=Bi.dot($s);if(p>=0&&d<=p)return e.copy(r);const m=d*l-h*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(i).addScaledVector(Bi,a);const g=c*p-d*f;if(g<=0&&f-c>=0&&d-p>=0)return Co.subVectors(r,s),a=(f-c)/(f-c+(d-p)),e.copy(s).addScaledVector(Co,a);const y=1/(g+m+u);return o=m*y,a=u*y,e.copy(i).addScaledVector(Li,o).addScaledVector(Bi,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Ra={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qe={h:0,s:0,l:0},Dn={h:0,s:0,l:0};function Us(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class Yt{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ce){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Se.colorSpaceToWorking(this,e),this}setRGB(t,e,i,s=Se.workingColorSpace){return this.r=t,this.g=e,this.b=i,Se.colorSpaceToWorking(this,s),this}setHSL(t,e,i,s=Se.workingColorSpace){if(t=Sr(t,1),e=_t(e,0,1),i=_t(i,0,1),e===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+e):i+e-i*e,o=2*i-r;this.r=Us(o,r,t+1/3),this.g=Us(o,r,t),this.b=Us(o,r,t-1/3)}return Se.colorSpaceToWorking(this,s),this}setStyle(t,e=Ce){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(o===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ce){const i=Ra[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=He(t.r),this.g=He(t.g),this.b=He(t.b),this}copyLinearToSRGB(t){return this.r=Ui(t.r),this.g=Ui(t.g),this.b=Ui(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ce){return Se.workingToColorSpace(Zt.copy(this),t),Math.round(_t(Zt.r*255,0,255))*65536+Math.round(_t(Zt.g*255,0,255))*256+Math.round(_t(Zt.b*255,0,255))}getHexString(t=Ce){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Se.workingColorSpace){Se.workingToColorSpace(Zt.copy(this),e);const i=Zt.r,s=Zt.g,r=Zt.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let h,l;const c=(a+o)/2;if(a===o)h=0,l=0;else{const f=o-a;switch(l=c<=.5?f/(o+a):f/(2-o-a),o){case i:h=(s-r)/f+(s<r?6:0);break;case s:h=(r-i)/f+2;break;case r:h=(i-s)/f+4;break}h/=6}return t.h=h,t.s=l,t.l=c,t}getRGB(t,e=Se.workingColorSpace){return Se.workingToColorSpace(Zt.copy(this),e),t.r=Zt.r,t.g=Zt.g,t.b=Zt.b,t}getStyle(t=Ce){Se.workingToColorSpace(Zt.copy(this),t);const e=Zt.r,i=Zt.g,s=Zt.b;return t!==Ce?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(i.toFixed(3)," ").concat(s.toFixed(3),")"):"rgb(".concat(Math.round(e*255),",").concat(Math.round(i*255),",").concat(Math.round(s*255),")")}offsetHSL(t,e,i){return this.getHSL(Qe),this.setHSL(Qe.h+t,Qe.s+e,Qe.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Qe),t.getHSL(Dn);const i=Mn(Qe.h,Dn.h,e),s=Mn(Qe.s,Dn.s,e),r=Mn(Qe.l,Dn.l,e);return this.setHSL(i,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,s=this.b,r=t.elements;return this.r=r[0]*e+r[3]*i+r[6]*s,this.g=r[1]*e+r[4]*i+r[7]*s,this.b=r[2]*e+r[5]*i+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Zt=new Yt;Yt.NAMES=Ra;let Oc=0;class bs extends xs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Oc++}),this.uuid=De(),this.name="",this.type="Material",this.blending=io,this.side=cr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=so,this.blendDst=ro,this.blendEquation=no,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Yt(0,0,0),this.blendAlpha=0,this.depthFunc=oo,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=uo,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ci,this.stencilZFail=Ci,this.stencilZPass=Ci,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."));continue}const s=this[e];if(s===void 0){console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."));continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==io&&(i.blending=this.blending),this.side!==cr&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==so&&(i.blendSrc=this.blendSrc),this.blendDst!==ro&&(i.blendDst=this.blendDst),this.blendEquation!==no&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==oo&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==uo&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ci&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ci&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ci&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const o=[];for(const a in r){const h=r[a];delete h.metadata,o.push(h)}return o}if(e){const r=s(t.textures),o=s(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const s=e.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Dc extends bs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ki,this.combine=ec,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ot=new W,Hn=new Lt;let Hc=0;class bi{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Hc++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=ur,this.updateRanges=[],this.gpuType=rc,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[i+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Hn.fromBufferAttribute(this,e),Hn.applyMatrix3(t),this.setXY(e,Hn.x,Hn.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)Ot.fromBufferAttribute(this,e),Ot.applyMatrix3(t),this.setXYZ(e,Ot.x,Ot.y,Ot.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)Ot.fromBufferAttribute(this,e),Ot.applyMatrix4(t),this.setXYZ(e,Ot.x,Ot.y,Ot.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Ot.fromBufferAttribute(this,e),Ot.applyNormalMatrix(t),this.setXYZ(e,Ot.x,Ot.y,Ot.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Ot.fromBufferAttribute(this,e),Ot.transformDirection(t),this.setXYZ(e,Ot.x,Ot.y,Ot.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=Ie(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=kt(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Ie(e,this.array)),e}setX(t,e){return this.normalized&&(e=kt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Ie(e,this.array)),e}setY(t,e){return this.normalized&&(e=kt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Ie(e,this.array)),e}setZ(t,e){return this.normalized&&(e=kt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Ie(e,this.array)),e}setW(t,e){return this.normalized&&(e=kt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,s){return t*=this.itemSize,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,e,i,s,r){return t*=this.itemSize,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array),s=kt(s,this.array),r=kt(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==ur&&(t.usage=this.usage),t}}class Wc extends bi{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class $c extends bi{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class ni extends bi{constructor(t,e,i){super(new Float32Array(t),e,i)}}let Gc=0;const ge=new ue,Xs=new be,Oi=new W,ce=new Ti,un=new Ti,Wt=new W;class ie extends xs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Gc++}),this.uuid=De(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Sc(t)?$c:Wc)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new oi().getNormalMatrix(t);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return ge.makeRotationFromQuaternion(t),this.applyMatrix4(ge),this}rotateX(t){return ge.makeRotationX(t),this.applyMatrix4(ge),this}rotateY(t){return ge.makeRotationY(t),this.applyMatrix4(ge),this}rotateZ(t){return ge.makeRotationZ(t),this.applyMatrix4(ge),this}translate(t,e,i){return ge.makeTranslation(t,e,i),this.applyMatrix4(ge),this}scale(t,e,i){return ge.makeScale(t,e,i),this.applyMatrix4(ge),this}lookAt(t){return Xs.lookAt(t),Xs.updateMatrix(),this.applyMatrix4(Xs.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Oi).negate(),this.translate(Oi.x,Oi.y,Oi.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new ni(i,3))}else{const i=Math.min(t.length,e.count);for(let s=0;s<i;s++){const r=t[s];e.setXYZ(s,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ti);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,s=e.length;i<s;i++){const r=e[i];ce.setFromBufferAttribute(r),this.morphTargetsRelative?(Wt.addVectors(this.boundingBox.min,ce.min),this.boundingBox.expandByPoint(Wt),Wt.addVectors(this.boundingBox.max,ce.max),this.boundingBox.expandByPoint(Wt)):(this.boundingBox.expandByPoint(ce.min),this.boundingBox.expandByPoint(ce.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ar);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new W,1/0);return}if(t){const i=this.boundingSphere.center;if(ce.setFromBufferAttribute(t),e)for(let r=0,o=e.length;r<o;r++){const a=e[r];un.setFromBufferAttribute(a),this.morphTargetsRelative?(Wt.addVectors(ce.min,un.min),ce.expandByPoint(Wt),Wt.addVectors(ce.max,un.max),ce.expandByPoint(Wt)):(ce.expandByPoint(un.min),ce.expandByPoint(un.max))}ce.getCenter(i);let s=0;for(let r=0,o=t.count;r<o;r++)Wt.fromBufferAttribute(t,r),s=Math.max(s,i.distanceToSquared(Wt));if(e)for(let r=0,o=e.length;r<o;r++){const a=e[r],h=this.morphTargetsRelative;for(let l=0,c=a.count;l<c;l++)Wt.fromBufferAttribute(a,l),h&&(Oi.fromBufferAttribute(t,l),Wt.add(Oi)),s=Math.max(s,i.distanceToSquared(Wt))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.position,s=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new bi(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],h=[];for(let N=0;N<i.count;N++)a[N]=new W,h[N]=new W;const l=new W,c=new W,f=new W,u=new Lt,d=new Lt,p=new Lt,m=new W,g=new W;function y(N,z,P){l.fromBufferAttribute(i,N),c.fromBufferAttribute(i,z),f.fromBufferAttribute(i,P),u.fromBufferAttribute(r,N),d.fromBufferAttribute(r,z),p.fromBufferAttribute(r,P),c.sub(l),f.sub(l),d.sub(u),p.sub(u);const v=1/(d.x*p.y-p.x*d.y);isFinite(v)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(f,-d.y).multiplyScalar(v),g.copy(f).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(v),a[N].add(m),a[z].add(m),a[P].add(m),h[N].add(g),h[z].add(g),h[P].add(g))}let b=this.groups;b.length===0&&(b=[{start:0,count:t.count}]);for(let N=0,z=b.length;N<z;++N){const P=b[N],v=P.start,L=P.count;for(let C=v,B=v+L;C<B;C+=3)y(t.getX(C+0),t.getX(C+1),t.getX(C+2))}const M=new W,x=new W,w=new W,E=new W;function A(N){w.fromBufferAttribute(s,N),E.copy(w);const z=a[N];M.copy(z),M.sub(w.multiplyScalar(w.dot(z))).normalize(),x.crossVectors(E,z);const v=x.dot(h[N])<0?-1:1;o.setXYZW(N,M.x,M.y,M.z,v)}for(let N=0,z=b.length;N<z;++N){const P=b[N],v=P.start,L=P.count;for(let C=v,B=v+L;C<B;C+=3)A(t.getX(C+0)),A(t.getX(C+1)),A(t.getX(C+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new bi(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let u=0,d=i.count;u<d;u++)i.setXYZ(u,0,0,0);const s=new W,r=new W,o=new W,a=new W,h=new W,l=new W,c=new W,f=new W;if(t)for(let u=0,d=t.count;u<d;u+=3){const p=t.getX(u+0),m=t.getX(u+1),g=t.getX(u+2);s.fromBufferAttribute(e,p),r.fromBufferAttribute(e,m),o.fromBufferAttribute(e,g),c.subVectors(o,r),f.subVectors(s,r),c.cross(f),a.fromBufferAttribute(i,p),h.fromBufferAttribute(i,m),l.fromBufferAttribute(i,g),a.add(c),h.add(c),l.add(c),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,h.x,h.y,h.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let u=0,d=e.count;u<d;u+=3)s.fromBufferAttribute(e,u+0),r.fromBufferAttribute(e,u+1),o.fromBufferAttribute(e,u+2),c.subVectors(o,r),f.subVectors(s,r),c.cross(f),i.setXYZ(u+0,c.x,c.y,c.z),i.setXYZ(u+1,c.x,c.y,c.z),i.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Wt.fromBufferAttribute(t,e),Wt.normalize(),t.setXYZ(e,Wt.x,Wt.y,Wt.z)}toNonIndexed(){function t(a,h){const l=a.array,c=a.itemSize,f=a.normalized,u=new l.constructor(h.length*c);let d=0,p=0;for(let m=0,g=h.length;m<g;m++){a.isInterleavedBufferAttribute?d=h[m]*a.data.stride+a.offset:d=h[m]*c;for(let y=0;y<c;y++)u[p++]=l[d++]}return new bi(u,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ie,i=this.index.array,s=this.attributes;for(const a in s){const h=s[a],l=t(h,i);e.setAttribute(a,l)}const r=this.morphAttributes;for(const a in r){const h=[],l=r[a];for(let c=0,f=l.length;c<f;c++){const u=l[c],d=t(u,i);h.push(d)}e.morphAttributes[a]=h}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,h=o.length;a<h;a++){const l=o[a];e.addGroup(l.start,l.count,l.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const l in h)h[l]!==void 0&&(t[l]=h[l]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const h in i){const l=i[h];t.data.attributes[h]=l.toJSON(t.data)}const s={};let r=!1;for(const h in this.morphAttributes){const l=this.morphAttributes[h],c=[];for(let f=0,u=l.length;f<u;f++){const d=l[f];c.push(d.toJSON(t.data))}c.length>0&&(s[h]=c,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere=a.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone());const s=t.attributes;for(const l in s){const c=s[l];this.setAttribute(l,c.clone(e))}const r=t.morphAttributes;for(const l in r){const c=[],f=r[l];for(let u=0,d=f.length;u<d;u++)c.push(f[u].clone(e));this.morphAttributes[l]=c}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,c=o.length;l<c;l++){const f=o[l];this.addGroup(f.start,f.count,f.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const h=t.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Io=new ue,pi=new Pa,Wn=new Ar,ko=new W,$n=new W,Gn=new W,Yn=new W,qs=new W,Vn=new W,No=new W,Un=new W;class Fa extends be{constructor(t=new ie,e=new Dc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(t,e){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;e.fromBufferAttribute(s,t);const a=this.morphTargetInfluences;if(r&&a){Vn.set(0,0,0);for(let h=0,l=r.length;h<l;h++){const c=a[h],f=r[h];c!==0&&(qs.fromBufferAttribute(f,t),o?Vn.addScaledVector(qs,c):Vn.addScaledVector(qs.sub(e),c))}e.add(Vn)}return e}raycast(t,e){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Wn.copy(i.boundingSphere),Wn.applyMatrix4(r),pi.copy(t.ray).recast(t.near),!(Wn.containsPoint(pi.origin)===!1&&(pi.intersectSphere(Wn,ko)===null||pi.origin.distanceToSquared(ko)>(t.far-t.near)**2))&&(Io.copy(r).invert(),pi.copy(t.ray).applyMatrix4(Io),!(i.boundingBox!==null&&pi.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,pi)))}_computeIntersections(t,e,i){let s;const r=this.geometry,o=this.material,a=r.index,h=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,f=r.attributes.normal,u=r.groups,d=r.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,m=u.length;p<m;p++){const g=u[p],y=o[g.materialIndex],b=Math.max(g.start,d.start),M=Math.min(a.count,Math.min(g.start+g.count,d.start+d.count));for(let x=b,w=M;x<w;x+=3){const E=a.getX(x),A=a.getX(x+1),N=a.getX(x+2);s=Xn(this,y,t,i,l,c,f,E,A,N),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=g.materialIndex,e.push(s))}}else{const p=Math.max(0,d.start),m=Math.min(a.count,d.start+d.count);for(let g=p,y=m;g<y;g+=3){const b=a.getX(g),M=a.getX(g+1),x=a.getX(g+2);s=Xn(this,o,t,i,l,c,f,b,M,x),s&&(s.faceIndex=Math.floor(g/3),e.push(s))}}else if(h!==void 0)if(Array.isArray(o))for(let p=0,m=u.length;p<m;p++){const g=u[p],y=o[g.materialIndex],b=Math.max(g.start,d.start),M=Math.min(h.count,Math.min(g.start+g.count,d.start+d.count));for(let x=b,w=M;x<w;x+=3){const E=x,A=x+1,N=x+2;s=Xn(this,y,t,i,l,c,f,E,A,N),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=g.materialIndex,e.push(s))}}else{const p=Math.max(0,d.start),m=Math.min(h.count,d.start+d.count);for(let g=p,y=m;g<y;g+=3){const b=g,M=g+1,x=g+2;s=Xn(this,o,t,i,l,c,f,b,M,x),s&&(s.faceIndex=Math.floor(g/3),e.push(s))}}}}function Yc(n,t,e,i,s,r,o,a){let h;if(t.side===tc?h=i.intersectTriangle(o,r,s,!0,a):h=i.intersectTriangle(s,r,o,t.side===cr,a),h===null)return null;Un.copy(a),Un.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Un);return l<e.near||l>e.far?null:{distance:l,point:Un.clone(),object:n}}function Xn(n,t,e,i,s,r,o,a,h,l){n.getVertexPosition(a,$n),n.getVertexPosition(h,Gn),n.getVertexPosition(l,Yn);const c=Yc(n,t,e,i,$n,Gn,Yn,No);if(c){const f=new W;xe.getBarycoord(No,$n,Gn,Yn,f),s&&(c.uv=xe.getInterpolatedAttribute(s,a,h,l,f,new Lt)),r&&(c.uv1=xe.getInterpolatedAttribute(r,a,h,l,f,new Lt)),o&&(c.normal=xe.getInterpolatedAttribute(o,a,h,l,f,new W),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const u={a,b:h,c:l,normal:new W,materialIndex:0};xe.getNormal($n,Gn,Yn,u.normal),c.face=u,c.barycoord=f}return c}class Er extends ie{constructor(t=1,e=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const h=[],l=[],c=[],f=[];let u=0,d=0;p("z","y","x",-1,-1,i,e,t,o,r,0),p("z","y","x",1,-1,i,e,-t,o,r,1),p("x","z","y",1,1,t,i,e,s,o,2),p("x","z","y",1,-1,t,i,-e,s,o,3),p("x","y","z",1,-1,t,e,i,s,r,4),p("x","y","z",-1,-1,t,e,-i,s,r,5),this.setIndex(h),this.setAttribute("position",new ni(l,3)),this.setAttribute("normal",new ni(c,3)),this.setAttribute("uv",new ni(f,2));function p(m,g,y,b,M,x,w,E,A,N,z){const P=x/A,v=w/N,L=x/2,C=w/2,B=E/2,Y=A+1,et=N+1;let G=0,F=0;const D=new W;for(let H=0;H<et;H++){const j=H*v-C;for(let U=0;U<Y;U++){const st=U*P-L;D[m]=st*b,D[g]=j*M,D[y]=B,l.push(D.x,D.y,D.z),D[m]=0,D[g]=0,D[y]=E>0?1:-1,c.push(D.x,D.y,D.z),f.push(U/A),f.push(1-H/N),G+=1}}for(let H=0;H<N;H++)for(let j=0;j<A;j++){const U=u+j+Y*H,st=u+j+Y*(H+1),ft=u+(j+1)+Y*(H+1),K=u+(j+1)+Y*H;h.push(U,st,K),h.push(st,ft,K),F+=6}a.addGroup(d,F,z),d+=F,u+=G}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Er(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}class yn extends be{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Vc{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=ur,this.updateRanges=[],this.version=0,this.uuid=De()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let s=0,r=this.stride;s<r;s++)this.array[t+s]=e.array[i+s];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=De()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=De()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jt=new W;class fs{constructor(t,e,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)Jt.fromBufferAttribute(this,e),Jt.applyMatrix4(t),this.setXYZ(e,Jt.x,Jt.y,Jt.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Jt.fromBufferAttribute(this,e),Jt.applyNormalMatrix(t),this.setXYZ(e,Jt.x,Jt.y,Jt.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Jt.fromBufferAttribute(this,e),Jt.transformDirection(t),this.setXYZ(e,Jt.x,Jt.y,Jt.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=Ie(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=kt(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=kt(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=kt(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=kt(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=kt(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Ie(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Ie(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Ie(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Ie(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this}setXYZW(t,e,i,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=kt(e,this.array),i=kt(i,this.array),s=kt(s,this.array),r=kt(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=s,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return new bi(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new fs(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class La extends bs{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Yt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Di;const fn=new W,Hi=new W,Wi=new W,$i=new Lt,dn=new Lt,Ba=new ue,qn=new W,mn=new W,Zn=new W,zo=new Lt,Zs=new Lt,Po=new Lt;class Uc extends be{constructor(t=new La){if(super(),this.isSprite=!0,this.type="Sprite",Di===void 0){Di=new ie;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Vc(e,5);Di.setIndex([0,1,2,0,2,3]),Di.setAttribute("position",new fs(i,3,0,!1)),Di.setAttribute("uv",new fs(i,2,3,!1))}this.geometry=Di,this.material=t,this.center=new Lt(.5,.5),this.count=1}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hi.setFromMatrixScale(this.matrixWorld),Ba.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Wi.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hi.multiplyScalar(-Wi.z);const i=this.material.rotation;let s,r;i!==0&&(r=Math.cos(i),s=Math.sin(i));const o=this.center;jn(qn.set(-.5,-.5,0),Wi,o,Hi,s,r),jn(mn.set(.5,-.5,0),Wi,o,Hi,s,r),jn(Zn.set(.5,.5,0),Wi,o,Hi,s,r),zo.set(0,0),Zs.set(1,0),Po.set(1,1);let a=t.ray.intersectTriangle(qn,mn,Zn,!1,fn);if(a===null&&(jn(mn.set(-.5,.5,0),Wi,o,Hi,s,r),Zs.set(0,1),a=t.ray.intersectTriangle(qn,Zn,mn,!1,fn),a===null))return;const h=t.ray.origin.distanceTo(fn);h<t.near||h>t.far||e.push({distance:h,point:fn.clone(),uv:xe.getInterpolation(fn,qn,mn,Zn,zo,Zs,Po,new Lt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function jn(n,t,e,i,s,r){$i.subVectors(n,e).addScalar(.5).multiply(i),s!==void 0?(dn.x=r*$i.x-s*$i.y,dn.y=s*$i.x+r*$i.y):dn.copy($i),n.copy(t),n.x+=dn.x,n.y+=dn.y,n.applyMatrix4(Ba)}class Gi extends bs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Yt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const ds=new W,ms=new W,Ro=new ue,pn=new Pa,Jn=new Ar,js=new W,Fo=new W;class gi extends be{constructor(t=new ie,e=new Gi){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let s=1,r=e.count;s<r;s++)ds.fromBufferAttribute(e,s-1),ms.fromBufferAttribute(e,s),i[s]=i[s-1],i[s]+=ds.distanceTo(ms);t.setAttribute("lineDistance",new ni(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,s=this.matrixWorld,r=t.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Jn.copy(i.boundingSphere),Jn.applyMatrix4(s),Jn.radius+=r,t.ray.intersectsSphere(Jn)===!1)return;Ro.copy(s).invert(),pn.copy(t.ray).applyMatrix4(Ro);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),h=a*a,l=this.isLineSegments?2:1,c=i.index,u=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let m=d,g=p-1;m<g;m+=l){const y=c.getX(m),b=c.getX(m+1),M=Kn(this,t,pn,h,y,b,m);M&&e.push(M)}if(this.isLineLoop){const m=c.getX(p-1),g=c.getX(d),y=Kn(this,t,pn,h,m,g,p-1);y&&e.push(y)}}else{const d=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let m=d,g=p-1;m<g;m+=l){const y=Kn(this,t,pn,h,m,m+1,m);y&&e.push(y)}if(this.isLineLoop){const m=Kn(this,t,pn,h,p-1,d,p-1);m&&e.push(m)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function Kn(n,t,e,i,s,r,o){const a=n.geometry.attributes.position;if(ds.fromBufferAttribute(a,s),ms.fromBufferAttribute(a,r),e.distanceSqToSegment(ds,ms,js,Fo)>i)return;js.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(js);if(!(l<t.near||l>t.far))return{distance:l,point:Fo.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}class Xc extends ii{constructor(t,e,i,s,r,o,a,h,l){super(t,e,i,s,r,o,a,h,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class vr extends ie{constructor(t=1,e=1,i=1,s=32,r=1,o=!1,a=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:h};const l=this;s=Math.floor(s),r=Math.floor(r);const c=[],f=[],u=[],d=[];let p=0;const m=[],g=i/2;let y=0;b(),o===!1&&(t>0&&M(!0),e>0&&M(!1)),this.setIndex(c),this.setAttribute("position",new ni(f,3)),this.setAttribute("normal",new ni(u,3)),this.setAttribute("uv",new ni(d,2));function b(){const x=new W,w=new W;let E=0;const A=(e-t)/i;for(let N=0;N<=r;N++){const z=[],P=N/r,v=P*(e-t)+t;for(let L=0;L<=s;L++){const C=L/s,B=C*h+a,Y=Math.sin(B),et=Math.cos(B);w.x=v*Y,w.y=-P*i+g,w.z=v*et,f.push(w.x,w.y,w.z),x.set(Y,A,et).normalize(),u.push(x.x,x.y,x.z),d.push(C,1-P),z.push(p++)}m.push(z)}for(let N=0;N<s;N++)for(let z=0;z<r;z++){const P=m[z][N],v=m[z+1][N],L=m[z+1][N+1],C=m[z][N+1];(t>0||z!==0)&&(c.push(P,v,C),E+=3),(e>0||z!==r-1)&&(c.push(v,L,C),E+=3)}l.addGroup(y,E,0),y+=E}function M(x){const w=p,E=new Lt,A=new W;let N=0;const z=x===!0?t:e,P=x===!0?1:-1;for(let L=1;L<=s;L++)f.push(0,g*P,0),u.push(0,P,0),d.push(.5,.5),p++;const v=p;for(let L=0;L<=s;L++){const B=L/s*h+a,Y=Math.cos(B),et=Math.sin(B);A.x=z*et,A.y=g*P,A.z=z*Y,f.push(A.x,A.y,A.z),u.push(0,P,0),E.x=Y*.5+.5,E.y=et*.5*P+.5,d.push(E.x,E.y),p++}for(let L=0;L<s;L++){const C=w+L,B=v+L;x===!0?c.push(B,B+1,C):c.push(B+1,B,C),N+=3}l.addGroup(y,N,x===!0?1:2),y+=N}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new vr(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class qc extends bs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Yt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ac,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ki,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Zc extends qc{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _t(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Yt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Yt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Yt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:va}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=va);const Tn=6,Cr=4,ps=2.6,$t=.04,Mi=.02,Oa="#60a5fa";function jc(n,t=Oa){const e=new Yt;try{e.set(n!=null?n:t)}catch(i){e.set(t)}return(Number.isNaN(e.r)||Number.isNaN(e.g)||Number.isNaN(e.b))&&e.set(t),e}function Da(n,t){const e=(n!=null?n:Oa).toLowerCase()+"_mobile_pastel_v2",i=t.get(e);if(i)return i;const s=jc(n),r={h:0,s:0,l:0};s.getHSL(r);let{h:o,s:a,l:h}=r;const l=o<.03||o>.97,c=!l&&o>=.03&&o<.11,f=!l&&o>=.11&&o<.2;a=a*1.25+.06,h=h*.92+.04,c&&(a=Math.min(1,a*1.35+.08),h=h+.03),f&&(a=Math.min(1,a*1.2+.06),h=h+.01),l&&(a=Math.min(1,a*1.2+.06),h=h-.12),h=Math.max(l?.32:.4,Math.min(.72,h));const u=new Zc({color:s,metalness:0,roughness:.6,clearcoat:1,clearcoatRoughness:.35,reflectivity:.5,emissive:s.clone().multiplyScalar(.75),transmission:0,thickness:.1,opacity:1});return t.set(e,u),u}function Xi(n,t){return t/Math.max(n,1)}const Js=.3,Jc=new W(-.25,.15,.8).normalize();function Ks(n,t={}){const{fontSize:e=28,color:i="#1f2933",backgroundColor:s,padding:r=Math.ceil(e*.35),fontFamily:o=St,weight:a="500",worldUnitsPerPixel:h=.004}=t,l=document.createElement("canvas"),c=l.getContext("2d");if(!c)throw new Error("Failed to acquire 2D context for text sprite");c.font="".concat(a," ").concat(e,"px ").concat(o);const f=c.measureText(n),u=Math.ceil(f.width),d=Math.ceil(e*1.35);l.width=Math.max(1,u+r*2),l.height=Math.max(1,d+r*2),c.font="".concat(a," ").concat(e,"px ").concat(o),c.textAlign="center",c.textBaseline="middle",s?(c.fillStyle=s,c.fillRect(0,0,l.width,l.height)):c.clearRect(0,0,l.width,l.height),c.fillStyle=i,c.fillText(n,l.width/2,l.height/2+e*.05);const p=new Xc(l);p.anisotropy=8,p.needsUpdate=!0;const m=new La({map:p,transparent:!0});m.depthTest=!1,m.depthWrite=!1;const g=new Uc(m);return g.scale.set(l.width*h,l.height*h,1),g.center.set(.5,.5),g}function Kc(n,t,e,i,s){var X,_,S;const r=Math.max(ps*.25,$t),o=(_=(X=n.barOptions)==null?void 0:X.grouping)!=null?_:We.BAR_GROUPING_UNSPECIFIED;if(!Sn(t.x)||n.series.length===0)return{segments:[],bounds:{minX:0,maxX:0,maxHeight:0,minHeight:0},barDepth:r,chartDepth:r,categoryCount:0,seriesLanes:[],grouping:o,categories:[]};const a=Tr(n,s),h=a.categories;if(h.length===0)return{segments:[],bounds:{minX:0,maxX:0,maxHeight:0,minHeight:0},barDepth:r,chartDepth:r,categoryCount:0,seriesLanes:[],grouping:o,categories:[]};const l=t.x,c=t.y,f=Xi(e.width,Tn),u=Xi(e.height,Cr),d=Xi(e.width,ps),p=c(0),m=Number.isFinite(p)?p-e.y:e.height,g=T=>(m-T)*u,y=a.mode==="clustered",b=o===We.BAR_GROUPING_UNSPECIFIED,M=a.visibleSeries,x=b?Math.max(M.length,1):1,w=Math.max(l.bandwidth(),1),E=w*.2,A=Math.max(w-E,w*.4),N=b?A*.2:0,z=b?Math.max(A-N,A*.5):A,P=b?z/Math.max(x,1):A,v=b?Math.max(P*d,$t):r,L=b&&!y?Math.min(Math.max(v*.15,$t*.5),Math.max(v-$t,0)*.5):0,C=b?Math.max(v-L*2,$t):r,B=b?Math.max(N*d,v*.1):0,Y=b?B:0,et=b?M.map((T,q)=>Y+v/2+q*(v+B)):[v/2],G=b?M.map((T,q)=>{var I,it,k;return{seriesIndex:T,label:((it=(I=n.series[T])==null?void 0:I.name)!=null?it:"").trim()||"Series ".concat(q+1),centerZ:(k=et[q])!=null?k:v/2}}):[],F=[];let D=Number.POSITIVE_INFINITY,H=Number.NEGATIVE_INFINITY,j=Number.POSITIVE_INFINITY,U=Number.NEGATIVE_INFINITY,st=0,ft=0;h.forEach((T,q)=>{var nt;const I=l(T);if(I===void 0)return;const it=I-e.x,J=((nt=a.segmentsByCategory[q])!=null?nt:[]).filter(tt=>{const ht=n.series[tt.seriesIndex];return!ht||_e(ht,q)?!1:!!fe(ht,q,tt.seriesIndex,i)}),lt=J.length||1,$=A/Math.max(lt,1);J.forEach((tt,ht)=>{var At,wt;const gt=n.series[tt.seriesIndex];if(!gt)return;const Et=fe(gt,q,tt.seriesIndex,i);if(!Et)return;const Mt=b?Math.max(0,M.indexOf(tt.seriesIndex)):y?ht:0,yt=b?A:y?$:w,jt=b?(w-A)/2:y?(w-A)/2+$*Mt:0,de=c(tt.start),Ht=c(tt.end);if(!Number.isFinite(de)||!Number.isFinite(Ht)||!Number.isFinite(yt))return;const ut=de-e.y,Q=Ht-e.y,R=g(ut),O=g(Q),ot=Math.max(Math.abs(O-R),Mi),V=(R+O)/2,dt=(it+jt+yt/2)*f;let mt=Math.max(yt*f,$t),xt=b?C:v,vt=(wt=(At=et[Mt])!=null?At:et[0])!=null?wt:C/2;if(b&&!y){const Rt=Math.max(Math.min(mt,C),$t);mt=Rt,xt=Rt}b||(y?xt=mt:xt=r,vt=xt/2),F.push({key:"".concat(q,"-").concat(tt.seriesIndex,"-").concat(ht),seriesIndex:tt.seriesIndex,position:{x:dt,y:V,z:vt},size:{width:mt,height:ot,depth:xt},materialKey:Et});const bt=dt-mt/2,ne=dt+mt/2;D=Math.min(D,bt),H=Math.max(H,ne),st=Math.max(st,V+ot/2),ft=Math.min(ft,V-ot/2);const zt=vt-xt/2,It=vt+xt/2;j=Math.min(j,zt),U=Math.max(U,It)})}),(!Number.isFinite(D)||!Number.isFinite(H))&&(D=0,H=Tn);const K=Number.isFinite(D)?D:0;K!==0&&(F.forEach(T=>{T.position=Te(pe({},T.position),{x:T.position.x-K})}),D-=K,H-=K),b&&!y&&F.length>0&&Number.isFinite(j)&&Number.isFinite(U)&&(j-=L,U+=L),(!Number.isFinite(j)||!Number.isFinite(U))&&(j=0,U=b?(S=et[et.length-1])!=null?S:C:r);const rt=Number.isFinite(j)?j:0;rt!==0&&(F.forEach(T=>{T.position=Te(pe({},T.position),{z:T.position.z-rt})}),G.forEach(T=>{T.centerZ-=rt}),j-=rt,U-=rt);const at=Number.isFinite(U)?Math.max(U,$t):r;return{segments:F,bounds:{minX:D,maxX:H,maxHeight:Math.max(st,Mi),minHeight:Math.min(ft,0)},barDepth:r,chartDepth:at,categoryCount:h.length,seriesLanes:G,grouping:o,categories:h}}function Qc(n,t,e,i,s,r){var Ai,ai,Ei,Ue,Xe,nn,vn;const o=Kc(t,e,i,s,r);if(n.clear(),o.segments.length===0){n.renderer.setScissorTest(!1);return}const a=new Map,h=n.renderer,l=n.camera,{width:c,height:f}=n.dims,u=1,d=Math.max(1,c*u),p=Math.max(1,f*u),m=h.getViewport(new $e),g=h.getScissor(new $e),y=h.getScissorTest(),b=l.aspect;h.setViewport(0,0,d,p),h.setScissor(0,0,d,p),h.setScissorTest(!0),p>0&&(l.aspect=c/Math.max(f,1),l.updateProjectionMatrix());const{bounds:M,chartDepth:x,seriesLanes:w,grouping:E,categories:A}=o,N=Math.max(M.maxX-M.minX,$t),P=-(N*.5),v=0,L=Math.max(x,$t),C=Math.min(M.minHeight,0),B=Math.max(M.maxHeight,Mi),Y=B-C||Mi,et=e.x,G=e.y,F=Xi(i.width,Tn),D=Xi(i.height,Cr),H=G(0),j=Number.isFinite(H)?H-i.y:i.height,U=ct=>{const Tt=G(ct);if(!Number.isFinite(Tt))return null;const Nt=Tt-i.y;return(j-Nt)*D},st=Math.max(et.bandwidth(),1),ft=ct=>{const Tt=et(ct);return Tt===void 0?null:(Tt-i.x+st/2)*F-M.minX},K=(Ai=U(0))!=null?Ai:0,rt=(C+B)*.5,at=x*.5,X=ct=>ct-rt,_=ct=>ct-at,S=new yn,T=new yn,q=new yn,I=new yn;I.renderOrder=20;const it=Qt(t.xAxis,s),k=Qt(t.yAxis,s),J=t.yAxis,lt=!!((Ei=(ai=J==null?void 0:J.majorGridlines)==null?void 0:ai.fill)!=null&&Ei.color),$=(Ue=k.gridLineColor)!=null?Ue:k.lineColor,nt=(()=>{var Nt;const ct=(Nt=t.yAxis)==null?void 0:Nt.numberFormatCode,Tt=_i("~s");return Ct=>{if(ct)try{return Ji.format(ct,Ct)}catch(Bt){}return Tt(Ct)}})(),tt=new Gi({color:new Yt((Xe=it.lineColor)!=null?Xe:"#2563eb"),transparent:!0,opacity:.9}),ht=new Gi({color:new Yt((nn=k.lineColor)!=null?nn:"#1f2937"),transparent:!0,opacity:.9}),gt=new Gi({color:new Yt((vn=it.lineColor)!=null?vn:"#2563eb"),transparent:!0,opacity:.9}),Et=new Gi({color:new Yt($!=null?$:"#cbdcfb"),transparent:!0,opacity:.25}),Mt=new Gi({color:new Yt("#dbeafe"),transparent:!0,opacity:.2}),yt=new gi(new ie().setFromPoints([new W(P,X(K),_(v)),new W(P+N,X(K),_(v))]),tt.clone());yt.renderOrder=5,q.add(yt);const jt=new gi(new ie().setFromPoints([new W(P,X(K),_(v)),new W(P,X(K),_(v+L))]),gt.clone());jt.renderOrder=5,q.add(jt);const de=new gi(new ie().setFromPoints([new W(P,X(C),_(v+L)),new W(P,X(B),_(v+L))]),ht.clone());if(de.renderOrder=5,q.add(de),(typeof G.ticks=="function"?G.ticks(6):[]).forEach(ct=>{var Bt;const Tt=U(ct);if(Tt===null)return;const Nt=Math.abs(ct)<1e-6;if(lt&&!Nt){const he=new gi(new ie().setFromPoints([new W(P,X(Tt),_(v)),new W(P+N,X(Tt),_(v))]),Et.clone());he.renderOrder=-2,T.add(he);const vi=new gi(new ie().setFromPoints([new W(P,X(Tt),_(v+L)),new W(P+N,X(Tt),_(v+L))]),Et.clone());vi.renderOrder=-2,T.add(vi)}const Ct=Ks(nt(ct),{fontSize:26,color:(Bt=k.textColor)!=null?Bt:"#1f2933",weight:"500"});Ct.position.set(P-Math.max(N,L)*.08,X(Tt),_(v-L*.05)),I.add(Ct)}),A.forEach(ct=>{var he;const Tt=ft(ct);if(Tt===null)return;const Nt=P+Tt,Ct=new gi(new ie().setFromPoints([new W(Nt,X(K),_(v)),new W(Nt,X(K),_(v+L))]),Mt.clone());Ct.renderOrder=-2,T.add(Ct);const Bt=Ks(String(ct),{fontSize:26,color:(he=it.textColor)!=null?he:"#111827"});Bt.position.set(Nt,X(K-Math.min(Y*.12,.5)),_(v-L*.06)),I.add(Bt)}),E===We.BAR_GROUPING_UNSPECIFIED&&w.length){const ct=new Map;o.segments.forEach(Ct=>{ct.has(Ct.seriesIndex)||ct.set(Ct.seriesIndex,Ct.size.depth)});const Tt=new Set;w.forEach(Ct=>{var sn,rn;const Bt=(sn=ct.get(Ct.seriesIndex))!=null?sn:0,he=v+Ct.centerZ,vi=Ks(Ct.label,{fontSize:24,color:(rn=it.textColor)!=null?rn:"#111827",weight:"500"});vi.position.set(P+N+Math.max(N,L)*.06,X(K-Math.min(Y*.08,.4)),_(he)),I.add(vi),Bt>0&&(Tt.add(he-Bt/2),Tt.add(he+Bt/2))});const Nt=Mt.clone();Nt.opacity=.3,Array.from(Tt).sort((Ct,Bt)=>Ct-Bt).forEach(Ct=>{const Bt=new gi(new ie().setFromPoints([new W(P,X(K),_(Ct)),new W(P+N,X(K),_(Ct))]),Nt.clone());Bt.renderOrder=-2,T.add(Bt)})}o.segments.forEach(ct=>{const Tt=new Er(ct.size.width,ct.size.height,ct.size.depth),Nt=Da(ct.materialKey,a),Ct=new Fa(Tt,Nt);Ct.castShadow=!0,Ct.receiveShadow=!0,Ct.position.set(P+ct.position.x,X(ct.position.y),_(v+ct.position.z)),S.add(Ct)}),n.chartGroup.add(T),n.chartGroup.add(S),n.chartGroup.add(q),n.chartGroup.add(I);const ut=n.chartGroup.rotation.clone(),Q=Math.abs(ut.x)>1e-5||Math.abs(ut.y)>1e-5||Math.abs(ut.z)>1e-5;Q&&n.chartGroup.rotation.set(0,0,0),n.chartGroup.updateMatrixWorld(!0);const R=S,O=new Ti().setFromObject(R),ot=new W,V=new W;O.getCenter(ot),O.getSize(V),V.x===0&&V.y===0&&V.z===0&&V.set(Math.max(N,1),Math.max(Y,1),Math.max(L,1));const Z=za.degToRad(l.fov*.5),dt=Math.max(.001,Z),mt=l.aspect||1,xt=Math.atan(Math.tan(dt)*mt),vt=Math.max(.001,xt),bt=Math.max(Math.tan(dt),1e-4),ne=Math.max(Math.tan(vt),1e-4),zt=V.clone().multiplyScalar(.5);zt.x=Math.max(zt.x*(1+Js),$t),zt.y=Math.max(zt.y*(1+Js),Mi),zt.z=Math.max(zt.z*(1+Js),$t);const It=ot.clone(),At=Jc.clone().normalize(),wt=At.clone().negate();let Rt=new W(0,1,0);Math.abs(wt.dot(Rt))>.99&&(Rt=new W(1,0,0));let Ye=new W().crossVectors(Rt,wt);Ye.lengthSq()<1e-6&&(Rt=new W(0,0,1),Ye=new W().crossVectors(Rt,wt)),Ye.normalize();const Qi=new W().crossVectors(wt,Ye).normalize(),En=[];[-1,1].forEach(ct=>{[-1,1].forEach(Tt=>{[-1,1].forEach(Nt=>{En.push(new W(zt.x*ct,zt.y*Tt,zt.z*Nt))})})});const Ms=En.map(ct=>It.clone().add(ct)),se=zt.length()*2,Ve=ct=>{l.position.copy(It).addScaledVector(At,ct);const Tt=It;l.up.copy(Qi),l.near=.1,l.far=Math.max(l.near+1,ct+se*4),l.lookAt(Tt),l.updateMatrixWorld(!0),l.updateProjectionMatrix()},re=ct=>{Ve(ct);const Tt=It;l.lookAt(Tt),l.updateMatrixWorld(!0),l.updateProjectionMatrix();let Nt=0,Ct=0,Bt=Number.POSITIVE_INFINITY,he=0;return Ms.forEach(sn=>{const rn=sn.clone().project(l);Nt=Math.max(Nt,Math.abs(rn.x)),Ct=Math.max(Ct,Math.abs(rn.y));const Ir=-sn.clone().applyMatrix4(l.matrixWorldInverse).z;Bt=Math.min(Bt,Ir),he=Math.max(he,Ir)}),{fits:Nt<=1&&Ct<=1&&Bt>0,maxAbsX:Nt,maxAbsY:Ct,minDepth:Bt,maxDepth:he}},tn=Math.max(zt.x/ne,zt.y/bt)+zt.z;let Vt=.1,me=Math.max(tn,Vt*4),Ne=re(me),oe=0;for(;!Ne.fits&&oe<24;)me*=2,Ne=re(me),oe+=1;let ae=Ne;for(let ct=0;ct<28;ct+=1){const Tt=(Vt+me)*.5,Nt=re(Tt);Nt.fits?(me=Tt,ae=Nt):Vt=Tt}const Ut=me;Ve(Ut);const ws=It;ae=re(Ut);const Si=Math.max(.1,Math.min(ae.minDepth*.8,ae.minDepth-.05)),en=Math.max(Si+1,ae.maxDepth*1.2);l.near=Si,l.far=en,l.lookAt(ws),l.updateMatrixWorld(!0),l.updateProjectionMatrix(),Q&&(n.chartGroup.rotation.copy(ut),n.chartGroup.updateMatrixWorld(!0)),h.render(n.scene,l),h.setViewport(m),h.setScissor(g),h.setScissorTest(y),y||h.setScissorTest(!1),l.aspect=b,l.updateProjectionMatrix()}const Qs=.25,tu=new W(-.25,.2,.85).normalize(),eu=.001,iu=64;function nu(n,t,e,i,s){var b,M,x;const r=t.series[0];if(!r){gn(n);return}if(s!=null&&s.has(0)){gn(n);return}const o=(b=r.values)!=null?b:[],a=os(o);if(!Number.isFinite(a)||a===0){gn(n);return}const h=Math.max(Math.min(e.width,e.height)/2,1),l=h*2,c=Xi(Math.max(l,1),Math.min(Tn,ps)),f=Math.max(h*c,$t*2),u=Math.max(Math.min(f*.35,Cr*.6),$t*2),d=((x=(M=t.pieOptions)==null?void 0:M.firstSliceAngle)!=null?x:0)/360*Math.PI*2,m=na().sort(null).startAngle(d).endAngle(d+Math.PI*2)(o).filter(w=>Number.isFinite(w.value)&&w.value!==0);if(m.length===0){gn(n);return}n.clear();const g=new Map,y=new yn;if(y.name="pie3dSlices",m.forEach((w,E)=>{var et;const A=(et=w.index)!=null?et:E;if(_e(r,A))return;const N=fe(r,A,0,i,A);if(!N)return;const z=w.endAngle-w.startAngle,P=Math.max(Math.abs(z),eu);if(!Number.isFinite(P))return;const v=su(Math.PI/2-w.endAngle),L=Math.max(iu,Math.ceil(P/(Math.PI/32))),C=new vr(f,f,u,L,1,!1,v,P),B=Da(N,g),Y=new Fa(C,B);Y.castShadow=!0,Y.receiveShadow=!0,y.add(Y)}),y.children.length===0){gn(n);return}n.chartGroup.add(y),ru(n,y)}function su(n){const t=Math.PI*2,e=n%t;return e<0?e+t:e}function gn(n){n.clear(),n.renderer.setScissorTest(!1)}function ru(n,t){const e=n.renderer,i=n.camera,{width:s,height:r}=n.dims,o=1,a=Math.max(1,s*o),h=Math.max(1,r*o),l=e.getViewport(new $e),c=e.getScissor(new $e),f=e.getScissorTest(),u=i.aspect;e.setViewport(0,0,a,h),e.setScissor(0,0,a,h),e.setScissorTest(!0),h>0&&(i.aspect=s/Math.max(r,1),i.updateProjectionMatrix());const d=n.chartGroup.rotation.clone(),p=Math.abs(d.x)>1e-5||Math.abs(d.y)>1e-5||Math.abs(d.z)>1e-5;p&&n.chartGroup.rotation.set(0,0,0),n.chartGroup.updateMatrixWorld(!0);const m=new Ti().setFromObject(t),g=new W,y=new W;m.getCenter(g),m.getSize(y),y.x===0&&y.y===0&&y.z===0&&y.set(Math.max(Tn*.5,$t),Math.max(Mi,.2),Math.max(ps*.5,$t));const b=za.degToRad(i.fov*.5),M=Math.max(.001,b),x=i.aspect||1,w=Math.atan(Math.tan(M)*x),E=Math.max(.001,w),A=Math.max(Math.tan(M),1e-4),N=Math.max(Math.tan(E),1e-4),z=y.clone().multiplyScalar(.5);z.x=Math.max(z.x*(1+Qs),$t),z.y=Math.max(z.y*(1+Qs),Mi),z.z=Math.max(z.z*(1+Qs),$t);const P=g.clone(),v=tu.clone().normalize(),L=v.clone().negate();let C=new W(0,1,0);Math.abs(L.dot(C))>.99&&(C=new W(1,0,0));let B=new W().crossVectors(C,L);B.lengthSq()<1e-6&&(C=new W(0,0,1),B=new W().crossVectors(C,L)),B.normalize();const Y=new W().crossVectors(L,B).normalize(),et=[];[-1,1].forEach(T=>{[-1,1].forEach(q=>{[-1,1].forEach(I=>{et.push(new W(z.x*T,z.y*q,z.z*I))})})});const G=et.map(T=>P.clone().add(T)),F=z.length()*2,D=T=>{i.position.copy(P).addScaledVector(v,T);const q=P;i.up.copy(Y),i.near=.1,i.far=Math.max(i.near+1,T+F*4),i.lookAt(q),i.updateMatrixWorld(!0),i.updateProjectionMatrix()},H=T=>{D(T);const q=P;i.lookAt(q),i.updateMatrixWorld(!0),i.updateProjectionMatrix();let I=0,it=0,k=Number.POSITIVE_INFINITY,J=0;return G.forEach($=>{const nt=$.clone().project(i);I=Math.max(I,Math.abs(nt.x)),it=Math.max(it,Math.abs(nt.y));const ht=-$.clone().applyMatrix4(i.matrixWorldInverse).z;k=Math.min(k,ht),J=Math.max(J,ht)}),{fits:I<=1&&it<=1&&k>0,maxAbsX:I,maxAbsY:it,minDepth:k,maxDepth:J}},j=Math.max(z.x/N,z.y/A)+z.z;let U=.1,st=Math.max(j,U*4),ft=H(st),K=0;for(;!ft.fits&&K<24;)st*=2,ft=H(st),K+=1;let rt=ft;for(let T=0;T<28;T+=1){const q=(U+st)*.5,I=H(q);I.fits?(st=q,rt=I):U=q}const at=st;D(at);const X=P;rt=H(at);const _=Math.max(.1,Math.min(rt.minDepth*.8,rt.minDepth-.05)),S=Math.max(_+1,rt.maxDepth*1.2);i.near=_,i.far=S,i.lookAt(X),i.updateMatrixWorld(!0),i.updateProjectionMatrix(),p&&(n.chartGroup.rotation.copy(d),n.chartGroup.updateMatrixWorld(!0)),e.render(n.scene,i),e.setViewport(l),e.setScissor(c),e.setScissorTest(f),f||e.setScissorTest(!1),i.aspect=u,i.updateProjectionMatrix()}function ou(n){var e,i;if(n.categories.length>0)return n.categories;const t=(i=(e=n.series[0])==null?void 0:e.categories)!=null?i:[];return t.length>0?t:[]}function au(n,t){var f;const e=ou(n),i=n.series.map((u,d)=>d).filter(u=>!(t!=null&&t.has(u))),s=(f=n.lineOptions)==null?void 0:f.grouping,r=s===rs.LINE_GROUPING_STACKED?"stacked":s===rs.LINE_GROUPING_PERCENT_STACKED?"percent":"standard",o=i.map(u=>({seriesIndex:u,values:e.map(()=>0),tuples:e.map(()=>({start:0,end:0}))}));if(r==="standard"||i.length===0)return e.forEach((u,d)=>{i.forEach(p=>{var b,M;const m=o.find(x=>x.seriesIndex===p);if(!m)return;const g=(M=(b=n.series[p])==null?void 0:b.values[d])!=null?M:0,y=Number.isFinite(g)?g:0;m.values[d]=y,m.tuples[d]={start:0,end:y}})}),{categories:e,visibleSeries:i,mode:r,layers:o};const a=e.map((u,d)=>{const p={};return i.forEach(m=>{var b;const g=n.series[m],y=(b=g==null?void 0:g.values[d])!=null?b:0;p[String(m)]=Number.isFinite(y)?y:0}),p}),h=mr().keys(i.map(u=>String(u))).value((u,d)=>{var p;return(p=u[d])!=null?p:0}).order(pr);r==="percent"?h.offset(gr):h.offset(yr);const l=new Map(o.map(u=>[u.seriesIndex,u]));return h(a).forEach(u=>{const d=Number.parseInt(u.key,10),p=l.get(d);p&&e.forEach((m,g)=>{const y=u[g];if(!y)return;const b=Number.isFinite(y[0])?y[0]:0,M=Number.isFinite(y[1])?y[1]:b;p.tuples[g]={start:b,end:M},p.values[g]=M})}),{categories:e,visibleSeries:i,mode:r,layers:o}}function hu(n,t,e,i,s,r){const{x:o,y:a}=e,h=au(t,r),l=h.categories;h.layers.forEach(c=>{var E,A,N;const f=t.series[c.seriesIndex];if(!f)return;const u=Me(f,c.seriesIndex,i);u&&(n.strokeStyle=u);const d=u!=null?u:n.strokeStyle,p=(()=>{var v;const z=(v=f.stroke)==null?void 0:v.widthEmu;if(z==null)return;const P=Number(z)*Ft;return Number.isFinite(P)&&P>0?P:void 0})();n.lineWidth=p!=null?p:2,n.beginPath();let m=!1;const g=[];for(let z=0;z<l.length;z++){const P=l[z],v=xn(o,P);if(v===void 0)continue;const L=c.values[z];if(L===void 0||!Number.isFinite(L))continue;const C=a(L);if(Number.isFinite(C)&&(m?n.lineTo(v,C):(n.moveTo(v,C),m=!0),g.push({cx:v,cy:C,idx:z}),s)){const Y=(E=f.values[z])!=null?E:0;s.push({kind:"line-point",x:v-6/2,y:C-6/2,width:6,height:6,seriesName:f.name,category:P,value:Y,color:d,anchorX:v,anchorY:C})}}m&&n.stroke();const y=(A=f.marker)==null?void 0:A.symbol;if(!(y!==void 0&&y!==xi.MARKER_SYMBOL_NONE&&y!==xi.MARKER_SYMBOL_UNSPECIFIED&&y!==xi.UNRECOGNIZED)||g.length===0)return;const M=(N=f.marker)==null?void 0:N.size,x=M!==void 0&&Number.isFinite(M)?M*96/72:6,w=Math.max(x/2,1.5);n.fillStyle=d,g.forEach(({cx:z,cy:P})=>{n.beginPath(),n.arc(z,P,w,0,Math.PI*2),n.fill()})})}function lu(n){var e;if(n.categories.length>0)return n.categories;const t=(e=n.series[0])==null?void 0:e.categories;return t&&t.length>0?t:[]}function cu(n,t){var c;const e=lu(n),i=n.series.map((f,u)=>u).filter(f=>!(t!=null&&t.has(f))),s=(c=n.areaOptions)==null?void 0:c.grouping,r=s===ss.AREA_GROUPING_STACKED?"stacked":s===ss.AREA_GROUPING_PERCENT_STACKED?"percent":"standard",o=i.map(f=>({seriesIndex:f,tuples:e.map(()=>({start:0,end:0}))}));if(r==="standard"||i.length===0)return e.forEach((f,u)=>{i.forEach(d=>{var g,y;const p=o.find(b=>b.seriesIndex===d);if(!p)return;const m=(y=(g=n.series[d])==null?void 0:g.values[u])!=null?y:0;p.tuples[u]={start:0,end:m}})}),{categories:e,visibleSeries:i,mode:r,layers:o};const a=e.map((f,u)=>{const d={};return i.forEach(p=>{var g;const m=n.series[p];d[String(p)]=(g=m==null?void 0:m.values[u])!=null?g:0}),d}),h=mr().keys(i.map(f=>String(f))).value((f,u)=>{var d;return(d=f[u])!=null?d:0}).order(pr);return r==="percent"?h.offset(gr):h.offset(yr),h(a).forEach(f=>{const u=Number.parseInt(f.key,10),d=o.find(p=>p.seriesIndex===u);d&&e.forEach((p,m)=>{const g=f[m];if(!g)return;const y=Number.isFinite(g[0])?g[0]:0,b=Number.isFinite(g[1])?g[1]:0;d.tuples[m]={start:y,end:b}})}),{categories:e,visibleSeries:i,mode:r,layers:o}}function uu(n,t,e,i,s,r){const o=e.x,a=e.y,h=cu(t,r?new Set(r):void 0),l=h.categories;h.layers.forEach(c=>{var g,y;const f=c.seriesIndex,u=t.series[f];if(!u)return;const d=Me(u,f,i),p=(()=>{if(!d)return;const b=ri(d);return b?b.formatRgb():d})();p&&(n.fillStyle=p),d&&(n.strokeStyle=d),n.lineWidth=1,n.beginPath();let m=!1;for(let b=0;b<l.length;b++){const M=l[b],x=xn(o,M);if(x===void 0)continue;const w=c.tuples[b],E=(g=w==null?void 0:w.end)!=null?g:0,A=a(E);m?n.lineTo(x,A):(n.moveTo(x,A),m=!0)}if(!m){n.closePath();return}for(let b=l.length-1;b>=0;b--){const M=l[b],x=xn(o,M);if(x===void 0)continue;const w=c.tuples[b],E=(y=w==null?void 0:w.start)!=null?y:0,A=a(E);n.lineTo(x,A)}n.closePath(),n.fill(),n.stroke(),s&&l.forEach((M,x)=>{var z,P;const w=xn(o,M);if(w===void 0)return;const E=c.tuples[x],A=(z=E==null?void 0:E.end)!=null?z:0,N=a(A);s.push({kind:"area-point",x:w-6/2,y:N-6/2,width:6,height:6,seriesName:u.name,category:M,value:(P=u.values[x])!=null?P:0,color:d,anchorX:w,anchorY:N})})})}function fu(n){var e,i;if(n.categories.length>0)return n.categories;const t=(i=(e=n.series[0])==null?void 0:e.categories)!=null?i:[];return t.length>0?t:[]}function du(n,t){const e=fu(n),i=e.length,s=n.series.map((u,d)=>d).filter(u=>!(t!=null&&t.has(u))),r=s.map(u=>({seriesIndex:u,values:Array.from({length:i},()=>0)}));let o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;e.forEach((u,d)=>{s.forEach(p=>{const m=n.series[p],g=m==null?void 0:m.values[d],y=typeof g=="number"&&Number.isFinite(g)?g:0,b=r.find(M=>M.seriesIndex===p);b&&(b.values[d]=y,o=Math.min(o,y),a=Math.max(a,y))})}),o===Number.POSITIVE_INFINITY&&(o=0),a===Number.NEGATIVE_INFINITY&&(a=0);const h=n.yAxis&&n.yAxis.min!==void 0?Number(n.yAxis.min):void 0,l=n.yAxis&&n.yAxis.max!==void 0?Number(n.yAxis.max):void 0;let c=h!==void 0&&Number.isFinite(h)?h:Math.min(0,o),f=l!==void 0&&Number.isFinite(l)?l:a;return Number.isFinite(c)||(c=0),Number.isFinite(f)||(f=0),f<a&&l===void 0&&(f=a),f===c&&(f=c+1),{categories:e,visibleSeries:s,layers:r,domain:[c,f]}}const Lo="#E1E1E1";function mu(n,t,e,i,s,r){var z,P,v,L,C,B,Y,et;const o=du(t,r),a=o.categories;if(a.length===0||o.visibleSeries.length===0)return;const h=e.x+e.width/2,l=e.y+e.height/2,f=Math.min(e.width,e.height)/2-12;if(f<=0)return;const[u,d]=o.domain,p=si().domain([u,d]).range([0,f]),m=p(d);if(!Number.isFinite(m)||m<=0)return;const g=G=>{const F=a.length;return F===0?-Math.PI/2:-Math.PI/2+G*2*Math.PI/F},y=G=>!Number.isFinite(G)||G<u?u:G>d?d:G,b=Qt(t.xAxis,i),M=(v=(P=(z=t.yAxis)==null?void 0:z.majorGridlines)==null?void 0:P.fill)!=null&&v.color?Pt(t.yAxis.majorGridlines.fill.color,i):void 0,x=M!=null?M:Lo,w=Array.from(new Set([...p.ticks(5),d])).filter(G=>Number.isFinite(G)&&G>u&&G<=d).sort((G,F)=>G-F);w.length>0&&(n.save(),n.strokeStyle=x,n.lineWidth=1,w.forEach(G=>{const F=p(G);!Number.isFinite(F)||F<=0||(n.beginPath(),a.forEach((D,H)=>{const j=g(H),U=h+F*Math.cos(j),st=l+F*Math.sin(j);H===0?n.moveTo(U,st):n.lineTo(U,st)}),n.closePath(),n.stroke())}),n.restore());const E=(B=(C=(L=t.yAxis)==null?void 0:L.line)==null?void 0:C.fill)!=null&&B.color?Pt(t.yAxis.line.fill.color,i):Lo;n.save(),n.strokeStyle=E,n.lineWidth=1,a.forEach((G,F)=>{const D=g(F),H=h+m*Math.cos(D),j=l+m*Math.sin(D);n.beginPath(),n.moveTo(h,l),n.lineTo(H,j),n.stroke()}),n.restore(),n.save(),n.font="".concat(b.fontSize,"px ").concat(St),n.fillStyle=b.textColor;const A=m+Math.max(b.fontSize,10);a.forEach((G,F)=>{const D=g(F),H=Math.cos(D),j=Math.sin(D),U=h+A*H,st=l+A*j;H>.25?n.textAlign="left":H<-.25?n.textAlign="right":n.textAlign="center",j>.25?n.textBaseline="top":j<-.25?n.textBaseline="bottom":n.textBaseline="middle",n.fillText(G,U,st)}),n.restore();const N=(et=(Y=t.radarOptions)==null?void 0:Y.style)!=null?et:_s.RADAR_STYLE_STANDARD;o.layers.forEach(G=>{var st,ft;const F=t.series[G.seriesIndex];if(!F)return;const D=Me(F,G.seriesIndex,i);D&&(n.strokeStyle=D),n.lineWidth=2;const H=a.map((K,rt)=>{var T;const at=(T=G.values[rt])!=null?T:u,X=y(at),_=p(X),S=g(rt);return{x:h+_*Math.cos(S),y:l+_*Math.sin(S),value:X,idx:rt}});if(H.length===0)return;if(n.beginPath(),H.forEach((K,rt)=>{rt===0?n.moveTo(K.x,K.y):n.lineTo(K.x,K.y)}),n.closePath(),N===_s.RADAR_STYLE_FILLED){const K=(()=>{if(!D)return;const rt=ri(D);return rt?rt.formatRgb():D})();K&&(n.fillStyle=K,n.fill())}n.stroke();const j=(st=F.marker)==null?void 0:st.symbol;if(N===_s.RADAR_STYLE_MARKER&&j!==void 0&&j!==xi.MARKER_SYMBOL_NONE&&j!==xi.MARKER_SYMBOL_UNSPECIFIED){const K=(ft=F.marker)==null?void 0:ft.size,rt=K!==void 0&&Number.isFinite(K)?K*96/72:6,at=Math.max(rt/2,1.5);H.forEach(X=>{var it,k;const _=X.idx,S=_e(F,_),T=fe(F,_,G.seriesIndex,i),q=we(F,_,i);if(n.beginPath(),n.arc(X.x,X.y,at,0,Math.PI*2),!S){const J=T!=null?T:D;J&&(n.fillStyle=J,n.fill())}const I=(it=q.color)!=null?it:D;I&&(n.strokeStyle=I,n.lineWidth=(k=q.widthPx)!=null?k:1,n.stroke())})}s&&H.forEach(K=>{var X;const rt=a[K.idx],at=(X=F.values[K.idx])!=null?X:0;s.push({kind:"line-point",x:K.x-3,y:K.y-3,width:6,height:6,seriesName:F.name,category:rt,value:at,color:D,anchorX:K.x,anchorY:K.y})})})}const pu=6;function gu(n,t,e,i,s=.15){var l;if(!t.title||!t.title.trim())return{reserved:0,layoutHeight:0};const r={x:e.x,y:e.y,width:e.width,height:Math.max(0,e.height*s)},o=xr({type:dr.ELEMENT_TYPE_TEXT,paragraphs:[{runs:[{text:t.title.trim(),textStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER}),citations:[]}]}],textStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER}),levelsStyles:[]},n,i,void 0,{mode:"layout",bboxPx:r}),a=(l=o==null?void 0:o.height)!=null?l:0;return a<=0?{reserved:0,layoutHeight:0}:{reserved:Math.min(r.height,a+pu),layoutHeight:a}}const Bo=6,Oo=8;function yu(n,t,e,i,s={}){var H,j,U,st,ft,K,rt,at,X,_;const r=(H=s.maxLeftFrac)!=null?H:1,o=(j=s.maxBottomFrac)!=null?j:1,a=t.categories.length>0?t.categories:(st=(U=t.series[0])==null?void 0:U.categories)!=null?st:[],h=Qt(t.yAxis,i);n.font="".concat(h.fontSize,"px ").concat(St);const l=(ft=t.barOptions)==null?void 0:ft.grouping;let c=0,f=0;if(l===We.BAR_GROUPING_STACKED){const S=(K=hr(a.map((q,I)=>os(t.series,it=>{var k;return Math.max(0,(k=it.values[I])!=null?k:0)}))))!=null?K:0,T=-((rt=hr(a.map((q,I)=>os(t.series,it=>{var k;return Math.max(0,-((k=it.values[I])!=null?k:0))}))))!=null?rt:0);c=Math.min(0,T),f=Math.max(0,S)}else if(l===We.BAR_GROUPING_PERCENT_STACKED)c=0,f=1;else{const S=t.series.flatMap(q=>q.values),T=ke(S);c=Math.min(0,(at=T[0])!=null?at:0),f=(X=T[1])!=null?X:0}const d=si().domain([c,f]).nice().ticks(5),p=(_=t.yAxis)==null?void 0:_.numberFormatCode;let m=0;for(const S of d){let T=_i("~s")(S);if(p)try{T=Ji.format(p,+S)}catch(I){}const q=n.measureText(T).width;q>m&&(m=q)}const g=t.yAxis,y=Zi(n,g==null?void 0:g.title,g==null?void 0:g.titleTextStyle,h.fontSize,-90),b=m>0?m+Bo:0,M=y?Oo+y.width:0,x=e.width*r,w=Math.min(x,b+M),E=Qt(t.xAxis,i),N=da(t.xAxis)*Math.PI/180;n.font="".concat(E.fontSize,"px ").concat(St);let z=0;for(const S of a){const T=n.measureText(S).width;T>z&&(z=T)}const P=wr(z,E.fontSize,N),v=t.xAxis,C=!!(v!=null&&v.deleted)?0:E.fontSize,B=z>0?P.height:C,Y=B>0?B+Bo:0,et=Zi(n,v==null?void 0:v.title,v==null?void 0:v.titleTextStyle,E.fontSize,0),G=e.height*o,F=Math.min(G,Y+(et?Oo+et.height:0));return{plotDims:{x:e.x+w,y:e.y,width:Math.max(0,e.width-w),height:Math.max(0,e.height-F)},reservedLeft:w,reservedBottom:F}}function xu(n,t,e=.1){var l;const i=n.dataLabels;if(!i||!i.showValue)return{reservedTop:0};if(i.position!==Jo.DATA_LABEL_POSITION_OUT_END)return{reservedTop:0};const a=((l=i.textStyle)!=null&&l.fontSize?i.textStyle.fontSize/100*(96/72):ji)+12,h=t.height*e;return{reservedTop:Math.min(h,a)}}const bu=36,ns=24,Mu=2,Pe=4,tr=.5,Ha="700 12px ".concat(St),fr=14,wu=4;function _u(n,t,e,i){var a,h,l;if(t.leaves.length===0)return;const s=(h=(a=i.chart.series[0])==null?void 0:a.valuesFormatCode)!=null?h:void 0;n.save(),n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.clip();const r=(l=i.chart.treemapOptions)==null?void 0:l.parentLabelLayout;let o;r===ts.PARENT_LABEL_LAYOUT_OVERLAPPING&&(o=ku(n,t.parents,t.leaves)),Tu(n,t.leaves,s,o==null?void 0:o.byLeafKey),Eu(n,t.parents,r,o),n.restore()}function Tu(n,t,e,i){for(const s of t){if(s.width<=0||s.height<=0)continue;Su(n,s);const r=i==null?void 0:i.get(Ga(s)),o=r?{verticalAlign:"bottom",reservedTop:r.reservedTop}:void 0;Au(n,s,e,o)}}function Su(n,t){n.save(),n.beginPath(),Iu(n,t.x,t.y,t.width,t.height,Mu),n.fillStyle=t.fill,n.fill(),n.lineWidth=.5,n.strokeStyle="rgba(255,255,255,0.6)",n.stroke(),n.restore()}function Au(n,t,e,i){var w,E;const s=t.width-Pe*2,r=Math.max(0,(w=i==null?void 0:i.reservedTop)!=null?w:0),o=t.y+Pe+r,a=t.y+t.height-Pe,h=a-o;if(s<bu||h<ns)return;const l=(E=ri(t.fill))!=null?E:ri("#000000"),c=$a(l),f=c==="#ffffff"?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.7)",u=Wa(n,t.name,s,h);if(u.length===0)return;const d=_n(t.value,e);n.save(),n.beginPath(),n.rect(t.x,t.y,t.width,t.height),n.clip(),n.textAlign="left",n.textBaseline="top",n.font="600 11px ".concat(St);const p=(i==null?void 0:i.verticalAlign)==="bottom";n.fillStyle=c;const m=14,g=Math.min(u.length,Math.floor(h/m)-1),y=u.slice(0,Math.max(1,g)),b=y.length*m+m<=h,M=y.length*m+(b?m:0);let x=p?a-M:o;for(const A of y)n.fillText(A,t.x+Pe,x,s),x+=m;b&&(n.font="500 10px ".concat(St),n.fillStyle=f,n.fillText(d,t.x+Pe,x,s)),n.restore()}function Wa(n,t,e,i,s="600 11px ".concat(St)){n.save(),n.font=s;const r=t.split(/(?=[A-Z][a-z])|\s+/g).filter(Boolean),o=[];let a="";const h=14;let l=i;for(const c of r){const f=a?"".concat(a," ").concat(c):c;if(n.measureText(f).width<=e){a=f;continue}if(a&&(o.push(Do(n,a,e)),l-=h,l<h)){a="";break}a=c}return a&&l>=h&&o.push(Do(n,a,e)),n.restore(),o}function Do(n,t,e){if(n.measureText(t).width<=e)return t;let i=t;for(;i.length>1&&n.measureText("".concat(i,"…")).width>e;)i=i.slice(0,-1);return"".concat(i,"…")}function Eu(n,t,e,i){if(!(!e||e===ts.PARENT_LABEL_LAYOUT_NONE))switch(e){case ts.PARENT_LABEL_LAYOUT_OVERLAPPING:vu(n,i);break;case ts.PARENT_LABEL_LAYOUT_BANNER:Cu(n,t);break}}function vu(n,t){var e;if(!(!t||t.placements.length===0)){n.save(),n.textAlign="left",n.textBaseline="top";for(const i of t.placements){const{leaf:s,lines:r}=i;if(s.width<=0||s.height<=0||r.length===0)continue;const o=s.width-Pe*2;if(o<=0)continue;const a=(e=ri(s.fill))!=null?e:ri("#000000"),h=$a(a);n.save(),n.beginPath(),n.rect(s.x,s.y,s.width,s.height),n.clip(),n.font=Ha,n.fillStyle=h;let l=s.y+Pe;for(const c of r)n.fillText(c,s.x+Pe,l,o),l+=fr;n.restore()}n.restore()}}function Cu(n,t){const e=t.filter(i=>i.depth===1);if(e.length!==0){n.save(),n.textAlign="left",n.textBaseline="middle";for(const i of e){const s=Math.min(Math.max(i.height*.2,18),i.height);s<12||(n.fillStyle="rgba(0,0,0,0.3)",n.fillRect(i.x,i.y,i.width,s),n.font="700 12px ".concat(St),n.fillStyle="#ffffff",n.fillText(i.name,i.x+8,i.y+s/2,i.width-16))}n.restore()}}function Iu(n,t,e,i,s,r){const o=Math.min(r,i/2,s/2);n.moveTo(t+o,e),n.lineTo(t+i-o,e),n.quadraticCurveTo(t+i,e,t+i,e+o),n.lineTo(t+i,e+s-o),n.quadraticCurveTo(t+i,e+s,t+i-o,e+s),n.lineTo(t+o,e+s),n.quadraticCurveTo(t,e+s,t,e+s-o),n.lineTo(t,e+o),n.quadraticCurveTo(t,e,t+o,e),n.closePath()}function $a(n){if(!n)return"#1a1a1a";const t=n.rgb(),e=t.r/255,i=t.g/255,s=t.b/255;return .2126*e+.7152*i+.0722*s>.55?"#1a1a1a":"#ffffff"}function ku(n,t,e){const i=[],s=new Map,r=t.filter(o=>o.depth===1);for(const o of r){const a=e.filter(y=>Nu(y,o));if(a.length===0)continue;const h=zu(a);if(!h)continue;const l=h.width-Pe*2,c=h.height-Pe*2;if(l<=0||c<=ns)continue;const f=Math.max(fr,c-ns),u=Wa(n,o.name,l,f,Ha);if(u.length===0)continue;const p=u.length*fr+wu;if(c-p<ns)continue;const m={parent:o,leaf:h,lines:u,reservedTop:p},g=Ga(h);i.push(m),s.set(g,m)}return{placements:i,byLeafKey:s}}function Ga(n){return n.path.join("\0")||n.name}function Nu(n,t){if(n.path.length<t.path.length)return!1;for(let e=0;e<t.path.length;e+=1)if(n.path[e]!==t.path[e])return!1;return!0}function zu(n){if(n.length===0)return;let t=n[0];for(let e=1;e<n.length;e+=1){const i=n[e];if(i.y<t.y-tr){t=i;continue}Math.abs(i.y-t.y)<=tr&&i.x<t.x-tr&&(t=i)}return t}const Pu="\0";function Ru(n,t,e){const i=Fu(n),s=Math.max(0,Math.min(t.width,t.height)/2);if(i.length===0||s===0)return{arcs:[],maxDepth:0,radius:s};const r=Bu(i),o=Ya(r),a=gs(o).sum(d=>typeof d.value=="number"&&d.value>0?d.value:0).sort((d,p)=>{var m,g;return((m=p.value)!=null?m:0)-((g=d.value)!=null?g:0)}),l=Cl().size([2*Math.PI,s])(a),c=Ou(e,i),f=l.descendants().filter(d=>{var p;return d.depth>0&&((p=d.value)!=null?p:0)>0&&Number.isFinite(d.x0)&&Number.isFinite(d.x1)&&d.x1>d.x0}).map(d=>{var y;const p=d.data.path,m=p[0],g=c(m);return{name:d.data.name,path:p,value:(y=d.value)!=null?y:0,depth:d.depth,startAngle:d.x0,endAngle:d.x1,innerRadius:Math.max(0,d.y0),outerRadius:Math.max(0,d.y1),fill:g}}),u=f.reduce((d,p)=>Math.max(d,p.depth),0);return{arcs:f,maxDepth:u,radius:s}}function Fu(n){var e,i,s,r;const t=new Map;for(const o of n.series){const a=(e=o.values)!=null?e:[],h=Lu(o.categoryPaths,a.length),l=(i=o.categories)!=null&&i.length?o.categories:n.categories;for(let c=0;c<a.length;c+=1){const f=a[c];if(typeof f!="number"||!Number.isFinite(f)||f<=0)continue;const u=(s=h[c])==null?void 0:s.levels;let d=(r=u==null?void 0:u.filter(y=>typeof y=="string"&&y.length>0))!=null?r:void 0;if(!d||d.length===0){const y=l==null?void 0:l[c];typeof y=="string"&&y.length>0&&(d=[y])}if(!d||d.length===0)continue;const p=[...d].reverse(),m=p.join(Pu),g=t.get(m);g?g.value+=f:t.set(m,{path:p,value:f})}}return Array.from(t.values())}function Lu(n,t){if(!n||n.length===0)return new Array(t).fill(void 0);if(n.length>=t)return n;const e=n.slice();for(;e.length<t;)e.push({levels:[]});return e}function Bu(n){const t={name:"root",path:[],children:new Map};for(const e of n){let i=t;e.path.forEach((s,r)=>{var a;let o=i.children.get(s);o||(o={name:s,path:[...i.path,s],children:new Map},i.children.set(s,o)),i=o,r===e.path.length-1&&(i.value=((a=i.value)!=null?a:0)+e.value)})}return t}function Ya(n){var e;const t=Array.from(n.children.values()).map(Ya);return t.length===0?{name:n.name,path:n.path,value:(e=n.value)!=null?e:0}:{name:n.name,path:n.path,children:t}}function Ou(n,t){const e=new Set;for(const h of t){const l=h.path[0];l&&l.length>0&&e.add(l)}const i=Array.from(e.values());if(i.length===0)return()=>{var h;return(h=ye[0])!=null?h:"#999999"};const s=["accent1","accent2","accent3","accent4","accent5","accent6"],r=h=>{var f,u;const l=s[h%s.length],c=n.colorMap[l!=null?l:""];return c||((u=(f=ye[h%ye.length])!=null?f:ye[0])!=null?u:"#999999")},o=i.map((h,l)=>r(l)),a=Qo().domain(i).range(o);return h=>{var c;if(!h)return(c=ye[0])!=null?c:"#999999";if(e.has(h))return a(h);const l=a.domain().length;return r(l)}}function Du(n,t,e,i){var l;if(t.arcs.length===0||t.radius===0)return;const s=(l=i.padAngle)!=null?l:.005,r=t.radius,o=e.x+e.width/2,a=e.y+e.height/2,h=ia().startAngle(c=>c.startAngle).endAngle(c=>c.endAngle).padAngle(c=>Math.min((c.endAngle-c.startAngle)/2*.25,s)).padRadius(r*.5).innerRadius(c=>c.innerRadius).outerRadius(c=>Math.max(c.innerRadius,c.outerRadius-1)).context(n);n.save(),n.translate(o,a);for(const c of t.arcs)n.beginPath(),h(c),n.fillStyle=c.fill,n.fill();Yu(n,t.arcs,h,i.valueFormatCode),n.restore()}const Hu=28,Wu=14,$u=48,Gu=24,Ho="600 11px ".concat(St),Wo="500 10px ".concat(St),$o=14;function Yu(n,t,e,i){for(const s of t){if(!s.name)continue;const r=s.endAngle-s.startAngle;if(!Number.isFinite(r)||r<=0)continue;const o=Math.max(0,s.outerRadius-s.innerRadius);if(o<Wu)continue;const a=s.innerRadius+o/2,h=r*a;if(h<Hu||Go(n,Ho,s.name)>h-6)continue;let c=s.value>0&&o>=Gu&&h>=$u,f="";c&&(f=_n(s.value,i),Go(n,Wo,f)>h-6&&(c=!1));const[u,d]=e.centroid(s),{primary:p,secondary:m}=Vu(s.fill);n.save(),n.textAlign="center",n.textBaseline="middle",n.font=Ho,n.fillStyle=p;const g=c?d-$o/2:d;if(n.fillText(s.name,u,g),c){n.font=Wo,n.fillStyle=m;const y=d+$o/2;n.fillText(f,u,y)}n.restore()}}function Go(n,t,e){n.save(),n.font=t;const i=n.measureText(e).width;return n.restore(),i}function Vu(n){const t=ri(n);if(!t)return{primary:"#1a1a1a",secondary:"rgba(0,0,0,0.7)"};const e=t.rgb(),i=e.r/255,s=e.g/255,r=e.b/255;return .2126*i+.7152*s+.0722*r>.55?{primary:"#1a1a1a",secondary:"rgba(0,0,0,0.6)"}:{primary:"#ffffff",secondary:"rgba(255,255,255,0.8)"}}function er([n,t]){if(!Number.isFinite(n)||!Number.isFinite(t))return[0,1];if(n===t){if(n===0)return[-1,1];const e=Math.abs(n)*.1||1;return[n-e,t+e]}return[n,t]}function ir(n,t,e){var m,g,y,b,M,x;const i=(m=n.xAxis)!=null?m:n.yAxis,s=(g=n.yAxis)!=null?g:n.xAxis,r=e.extents.size,o=[(y=i==null?void 0:i.min)!=null?y:e.extents.x[0],(b=i==null?void 0:i.max)!=null?b:e.extents.x[1]],a=[(M=s==null?void 0:s.min)!=null?M:e.extents.y[0],(x=s==null?void 0:s.max)!=null?x:e.extents.y[1]],h=er(o),l=er(a),c=[t.x,t.x+t.width],f=[t.y+t.height,t.y];(i==null?void 0:i.orientation)===Pr.AXIS_ORIENTATION_MAX_MIN&&c.reverse(),(s==null?void 0:s.orientation)===Pr.AXIS_ORIENTATION_MAX_MIN&&f.reverse();const u=si().domain(h).range(c).nice(),d=si().domain(l).range(f).nice();let p;if(r){const w=Math.max(0,r[0]),E=Math.max(w,r[1]),[A,N]=[t.width,t.height],z=Math.max(4,Math.min(A,N)/12),P=Math.min(4,z*.5);p=fh().domain(er([w,E])).range([P,z])}return{x:u,y:d,r:p}}const Yo=6,Vo=8;function Uo(n,t){if(!Number.isFinite(n))return"";if(t)try{return Ji.format(t,n)}catch(e){}return _i("~s")(n)}function Xo(n,t,e,i,s){var L,C,B,Y,et,G,F,D,H,j,U,st,ft,K,rt,at;const r=(L=t.xAxis)!=null?L:t.yAxis,o=(C=t.yAxis)!=null?C:t.xAxis,a=Qt(r,s),h=Qt(o,s),l=r!=null?r:{},c=o!=null?o:{},f=i.y+i.height,u=i.x;n.save(),n.lineWidth=1,(Y=(B=l.line)==null?void 0:B.fill)!=null&&Y.color&&(n.strokeStyle=(et=a.lineColor)!=null?et:Gt,n.beginPath(),n.moveTo(i.x,f),n.lineTo(i.x+i.width,f),n.stroke()),(F=(G=c.line)==null?void 0:G.fill)!=null&&F.color&&(n.strokeStyle=(D=h.lineColor)!=null?D:Gt,n.beginPath(),n.moveTo(u,i.y),n.lineTo(u,i.y+i.height),n.stroke());const d=Math.max(2,Math.floor(i.width/80)),p=e.x.ticks(d),m=l.majorTickMark&&l.majorTickMark!=="TICK_MARK_NONE",g=!!((j=(H=l.majorGridlines)==null?void 0:H.fill)!=null&&j.color),y=p.length>0?a.fontSize+Yo:0;n.font="".concat(a.fontSize,"px ").concat(St),n.textAlign="center",n.textBaseline="top",n.fillStyle=a.textColor;const b=(U=a.gridLineColor)!=null?U:a.lineColor;p.forEach(X=>{const _=e.x(X);if(!Number.isFinite(_))return;g&&(n.strokeStyle=b,n.beginPath(),n.moveTo(_,i.y),n.lineTo(_,i.y+i.height),n.stroke()),m&&(n.strokeStyle=a.lineColor,n.beginPath(),n.moveTo(_,f),n.lineTo(_,f+4),n.stroke());const S=Uo(X,r==null?void 0:r.numberFormatCode);n.fillText(S,_,f+6)});const M=Math.max(2,Math.floor(i.height/60)),x=e.y.ticks(M),w=c.majorTickMark&&c.majorTickMark!=="TICK_MARK_NONE",E=!!((ft=(st=c.majorGridlines)==null?void 0:st.fill)!=null&&ft.color);n.font="".concat(h.fontSize,"px ").concat(St),n.textAlign="right",n.textBaseline="middle",n.fillStyle=h.textColor;const A=(K=h.gridLineColor)!=null?K:h.lineColor;let N=0;x.forEach(X=>{const _=e.y(X);if(!Number.isFinite(_))return;E&&(n.strokeStyle=A,n.beginPath(),n.moveTo(i.x,_),n.lineTo(i.x+i.width,_),n.stroke()),w&&(n.strokeStyle=h.lineColor,n.beginPath(),n.moveTo(u-4,_),n.lineTo(u,_),n.stroke());const S=Uo(X,o==null?void 0:o.numberFormatCode);n.fillText(S,u-6,_);const T=n.measureText(S).width;T>N&&(N=T)});const z=N>0?N+Yo:0,P=Zi(n,l==null?void 0:l.title,l==null?void 0:l.titleTextStyle,a.fontSize,0);if(P){const X=l==null?void 0:l.titleTextStyle,_=(rt=X==null?void 0:X.fill)!=null&&rt.color?Pt(X.fill.color,s):a.textColor,S=y+Vo+P.height/2,T=f+S;n.save(),n.fillStyle=_!=null?_:Gt,n.font="".concat(P.isBold?"bold ":"").concat(P.fontPx,"px ").concat(St),n.textAlign="center",n.textBaseline="middle",n.translate(i.x+i.width/2,T),n.rotate(P.rotationRad),n.fillText(P.text,0,0),n.restore()}const v=Zi(n,c==null?void 0:c.title,c==null?void 0:c.titleTextStyle,h.fontSize,-90);if(v){const X=c==null?void 0:c.titleTextStyle,_=(at=X==null?void 0:X.fill)!=null&&at.color?Pt(X.fill.color,s):h.textColor,S=i.x-z-Vo-v.width/2,T=i.y+i.height/2;n.save(),n.fillStyle=_!=null?_:Gt,n.font="".concat(v.isBold?"bold ":"").concat(v.fontPx,"px ").concat(St),n.textAlign="center",n.textBaseline="middle",n.translate(S,T),n.rotate(v.rotationRad),n.fillText(v.text,0,0),n.restore()}n.restore()}function wn(n){if(typeof n=="number"&&Number.isFinite(n))return n;if(typeof n=="string"){const t=n.trim();if(t.length===0)return;const e=Number(t);if(Number.isFinite(e))return e}}function Uu(n,t,e){var o;const i=[],s=(o=t.xValues)!=null?o:[],r=t.categories.length>0?t.categories:n.categories.length>0?n.categories:[];for(let a=0;a<e;a++){if(a<s.length){i.push(wn(s[a]));continue}if(a<r.length){const h=wn(r[a]);if(h!==void 0){i.push(h);continue}}i.push(a)}return i}function Va(n,t={}){var p,m,g,y,b,M,x;const e=(p=t.hiddenSeriesIndices)!=null?p:new Set,i=[],s=[],r=[],o=[];n.series.forEach((w,E)=>{var L,C;if(e.has(E))return;const A=(L=w.values)!=null?L:[],N=A.length,z=Uu(n,w,N),P=(C=w.bubbleSizes)!=null?C:[],v=[];for(let B=0;B<N;B++){const Y=A[B],et=z[B],G=wn(Y),F=wn(et);if(F===void 0||G===void 0)continue;const D={idx:B,x:F,y:G};if(t.includeBubbleSize){const H=P[B],j=wn(H);j!==void 0&&(D.size=Math.max(0,j),o.push(D.size))}v.push(D),s.push(F),r.push(G)}i.push({seriesIndex:E,series:w,points:v})});const a=ke(s),h=ke(r),l=Number.isFinite((m=a[0])!=null?m:NaN)?a[0]:0,c=Number.isFinite((g=a[1])!=null?g:NaN)?a[1]:1,f=Number.isFinite((y=h[0])!=null?y:NaN)?h[0]:0,u=Number.isFinite((b=h[1])!=null?b:NaN)?h[1]:1;let d;if(t.includeBubbleSize&&o.length>0){const w=ke(o),E=Number.isFinite((M=w[0])!=null?M:NaN)?Math.max(0,w[0]):0,A=Number.isFinite((x=w[1])!=null?x:NaN)?Math.max(E,w[1]):E||1;d=[E,A]}return{series:i,extents:{x:[l,c],y:[f,u],size:d}}}function Ua(n,t){return Va(n,{hiddenSeriesIndices:t})}function Xu(n){return n===void 0?!0:n===Vi.SCATTER_STYLE_MARKER||n===Vi.SCATTER_STYLE_LINE_MARKER||n===Vi.SCATTER_STYLE_SMOOTH_MARKER}function qu(n){return n===void 0?!0:n!==Vi.SCATTER_STYLE_MARKER}function Zu(n){return n===Vi.SCATTER_STYLE_SMOOTH||n===Vi.SCATTER_STYLE_SMOOTH_MARKER}function ju(n,t,e,i,s,r,o){var d;const a=o!=null?o:Ua(t,r),h=(d=t.scatterOptions)==null?void 0:d.style,l=qu(h),c=Xu(h),u=Zu(h)?mh:ph;a.series.forEach(({series:p,seriesIndex:m,points:g})=>{var N,z;if(g.length===0)return;const y=Me(p,m,i),b=y!=null?y:n.strokeStyle;if(l){n.save(),n.strokeStyle=b,n.lineWidth=2;const P=dh().defined(v=>Number.isFinite(v.x)&&Number.isFinite(v.y)).x(v=>e.x(v.x)).y(v=>e.y(v.y)).curve(u).context(n);n.beginPath(),P(g),n.stroke(),n.restore()}if(!c)return;const M=(N=p.marker)==null?void 0:N.symbol;if(!(M===void 0||M===xi.MARKER_SYMBOL_UNSPECIFIED||M!==xi.MARKER_SYMBOL_NONE))return;const w=(z=p.marker)==null?void 0:z.size,E=w!==void 0&&Number.isFinite(w)?w*96/72:6,A=Math.max(E/2-1,2);g.forEach(P=>{var G,F;const v=e.x(P.x),L=e.y(P.y);if(!Number.isFinite(v)||!Number.isFinite(L))return;const C=_e(p,P.idx)?void 0:fe(p,P.idx,m,i),B=we(p,P.idx,i);n.save(),n.beginPath(),n.arc(v,L,A,0,Math.PI*2),C?(n.fillStyle=C,n.fill()):(n.fillStyle=b,n.fill());const Y=(G=B.color)!=null?G:b,et=B.widthPx!==void 0?B.widthPx:Math.max(1,A/3);n.lineWidth=et,n.strokeStyle=Y,n.stroke(),n.restore(),s&&s.push({kind:"scatter-point",x:v-A,y:L-A,width:A*2,height:A*2,seriesName:p.name,category:String(P.x),value:P.y,color:(F=C!=null?C:y)!=null?F:b,anchorX:v,anchorY:L})})})}function Ju(n,t){return Va(n,{hiddenSeriesIndices:t,includeBubbleSize:!0})}function Ku(n,t,e,i,s,r){var l;const o=e.r,a=6,h=((l=t.bubbleOptions)==null?void 0:l.scale)!==void 0&&Number.isFinite(t.bubbleOptions.scale)?t.bubbleOptions.scale/100:1;i.series.forEach(({series:c,seriesIndex:f,points:u})=>{const d=Me(c,f,s),p=d!=null?d:n.fillStyle;u.forEach(m=>{var N,z;const g=e.x(m.x),y=e.y(m.y);if(!Number.isFinite(g)||!Number.isFinite(y))return;const b=m.size!==void 0&&o?o(m.size):a,M=Math.max(2,b*Math.max(.1,h)),x=_e(c,m.idx)?void 0:(N=fe(c,m.idx,f,s))!=null?N:p,w=we(c,m.idx,s),E=(z=w.color)!=null?z:p,A=w.widthPx!==void 0?w.widthPx:Math.max(1,M/4);n.save(),n.beginPath(),n.arc(g,y,M,0,Math.PI*2),n.fillStyle=x!=null?x:p,n.fill(),n.lineWidth=A,n.strokeStyle=E,n.stroke(),n.restore(),r&&r.push({kind:"bubble-point",x:g-M,y:y-M,width:M*2,height:M*2,seriesName:c.name,category:String(m.x),value:m.y,color:x!=null?x:p,anchorX:g,anchorY:y})})})}const Qu=_i("~f");function qo(n){return Number.isFinite(n)?Qu(n):""}function Xa(n,t,e,i,s){const r=s!=null?s:"INTERVAL_CLOSED_RIGHT";let o="[",a=")";switch(r){case"INTERVAL_CLOSED_RIGHT":o=e===0?"[":"(",a="]";break;case"INTERVAL_CLOSED_LEFT":o="[",a=e===i-1?"]":")";break;default:o=e===0?"[":"(",a=e===i-1?"]":")";break}return"".concat(o).concat(qo(n),", ").concat(qo(t)).concat(a)}function wi(n){if(typeof n=="number"&&Number.isFinite(n))return n;if(typeof n=="string"){const t=n.trim();if(t.length===0)return;const e=Number(t);if(Number.isFinite(e))return e}}function tf(n){const t=/(-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)[^\d\-+eE]+(-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)/,e=n.match(t);if(e){const s=wi(e[1]),r=wi(e[2]);if(s!==void 0&&r!==void 0)return s<=r?[s,r]:[r,s]}const i=wi(n);if(i!==void 0)return[i,i]}function ef(n){const t=n;return t==null?void 0:t.histogramOptions}function nf(n,t,e){var c,f,u,d,p,m;const i=[wi((c=e.xAxis)==null?void 0:c.min),wi((f=e.xAxis)==null?void 0:f.max)],s=ke(n),r=(d=i[0])!=null?d:Number.isFinite((u=s[0])!=null?u:NaN)?s[0]:0,o=(m=i[1])!=null?m:Number.isFinite((p=s[1])!=null?p:NaN)?s[1]:r+1;if(r===o)return[r-.5,o+.5];if(!((t==null?void 0:t.intervalClosed)==="INTERVAL_CLOSED_RIGHT"))return[r,o];const l=Math.max(Math.abs(o-r)*1e-9,1e-9);return[r,o+l]}function sf(n,t,e){var p;const i=n.series[t];if(!i)return;const s=i.categories.length>0?i.categories:n.categories.length>0?n.categories:[],r=(p=i.values)!=null?p:[];if(r.length===0||s.length===0)return;const o=[],a=[],h=[],l=e!=null&&e.binWidth&&Number.isFinite(e.binWidth)?Math.abs(e.binWidth):void 0;if(s.forEach((m,g)=>{const y=wi(r[g]);if(!Number.isFinite(y)||y<=0)return;const b=y,M=m?tf(m):void 0;let x=0,w=0;if(M){if(x=M[0],w=M[1],x===w){const E=l!=null?l:1;w=x+E}}else{const E=h.length>0?h[h.length-1]:0,A=l!=null?l:1;x=E,w=E+A}a.push(x),h.push(w),o.push({x0:x,x1:w,count:b,values:[],label:m})}),o.length===0)return;const c=Math.min(...a),f=Math.max(...h),u=o.reduce((m,g)=>m+g.count,0),d=o.reduce((m,g)=>Math.max(m,g.count),0);return o.forEach((m,g)=>{var y;(!m.label||m.label.trim().length===0)&&(m.label=Xa(m.x0,m.x1,g,o.length,(y=e==null?void 0:e.intervalClosed)!=null?y:void 0))}),{bins:o,extents:{x:[c,f],y:[0,d]},totalCount:u,aggregated:!0,seriesIndex:t}}function rf(n,t={}){var x,w;const e=(x=t.hiddenSeriesIndices)!=null?x:new Set,i=n.series.findIndex((E,A)=>!e.has(A));if(i===-1)return{bins:[],extents:{x:[0,1],y:[0,1]},totalCount:0,aggregated:!1,seriesIndex:-1};const s=ef(n);if(s!=null&&s.aggregated){const E=sf(n,i,s);if(E)return E}const r=n.series[i],a=((w=r==null?void 0:r.values)!=null?w:[]).map(E=>wi(E)).filter(E=>E!==void 0);if(a.length===0)return{bins:[],extents:{x:[0,1],y:[0,1]},totalCount:0,aggregated:!1,seriesIndex:i};const[h,l]=nf(a,s,n),c=Math.max(l-h,1),f=Math.max(1,Math.ceil(Math.sqrt(a.length))),u=s!=null&&s.binWidth&&Number.isFinite(s.binWidth)?Math.abs(s.binWidth):void 0,d=u&&u>0?Math.max(1,Math.floor(c/u)):f,m=Ph().domain([h,l]).thresholds(d)(a),g=m.map((E,A)=>{var P,v,L;const N=(P=E.x0)!=null?P:h,z=(v=E.x1)!=null?v:l;return{x0:N,x1:z,count:E.length,values:E.slice(),label:Xa(N,z,A,m.length,(L=s==null?void 0:s.intervalClosed)!=null?L:void 0)}}),y=a.length,b=g.reduce((E,A)=>Math.max(E,A.count),0),M=l>h?l:h+1;return{bins:g,extents:{x:[h,M],y:[0,b]},totalCount:y,aggregated:!1,seriesIndex:i}}function of(n,t,e,i,s,r={}){const o=i.seriesIndex;if(o<0)return;const a=t.series[o];if(!a)return;const{chartHoverTargets:h}=r,{x:l,y:c}=e,f=c(0),u=1;i.bins.forEach((d,p)=>{var B,Y,et,G;if(!Number.isFinite(d.count)||d.count<=0)return;const m=l(d.x0),g=l(d.x1);if(!Number.isFinite(m)||!Number.isFinite(g))return;const y=Math.min(m,g),b=Math.max(m,g),M=Math.max(0,b-y);if(M<=0)return;const x=c(d.count);if(!Number.isFinite(x)||!Number.isFinite(f))return;const w=Math.max(0,f-x);if(w<=0)return;const E=_e(a,p),A=fe(a,p,o,s);!E&&A&&(n.fillStyle=A);const N=we(a,p,s),z=N.color,P=(B=N.widthPx)!=null?B:1;z&&P>0?(n.strokeStyle=z,n.lineWidth=P):n.lineWidth=0;const v=M>u,L=v?y+u/2:y,C=v?Math.max(0,M-u):M;n.beginPath(),n.rect(L,x,C,w),!E&&A&&n.fill(),n.lineWidth>0&&z&&n.stroke(),h&&h.push({kind:"bar-vertical",x:L,y:x,width:C,height:w,seriesName:(Y=a.name)!=null?Y:void 0,category:(et=d.label)!=null?et:void 0,value:d.count,color:A!=null?A:void 0,anchorX:L+C/2,anchorY:x,elementId:(G=t.id)!=null?G:void 0,seriesIndex:o})})}const af="#c7c7c7",hf=1,lf={increase:"#5b9bd5",decrease:"#ed7d31",total:"#a5a5a5"};function qa(n,t){var s;const e=t==="increase"?"accent1":t==="decrease"?"accent2":"accent3",i=(s=n.colorMap)==null?void 0:s[e];return i&&i.length>0?i:lf[t]}function cf(n,t){if(!(!n.points||n.points.length===0))for(let e=0;e<n.points.length;e++){const i=n.points[e],s=i==null?void 0:i.idx;if((typeof s=="number"?s:e)===t)return i}}function uf(n,t,e,i,s,r){const o=r(i);n.save(),n.strokeStyle=af,n.lineWidth=hf,n.beginPath(),n.moveTo(t+s,o),n.lineTo(e,o),n.stroke(),n.restore()}function ff(n,t,e,i,s,r,o,a){var N;const h=s(t.start),l=s(t.end),c=Math.min(h,l),f=Math.max(h,l),u=Math.abs(l-h);if(u===0||Number.isNaN(c)||Number.isNaN(f))return null;const d=r.series[o];if(!d)return null;const p=cf(d,t.index);let m=!1,g;p!=null&&p.fill&&(p.fill.color?g=Pt(p.fill.color,a):m=!0),!g&&!m&&((N=d.fill)!=null&&N.color)&&(g=Pt(d.fill.color,a)),!g&&!m&&(g=qa(a,t.kind));const{color:y,widthPx:b}=we(d,t.index,a),M=t.end>=t.start,x=Math.max(0,Math.min(Mr,i/2,u)),w=M||t.kind==="total",E=w?x:0,A=w?0:x;return n.beginPath(),M?(n.moveTo(e,f),n.lineTo(e,c+E),n.arcTo(e,c,e+E,c,E),n.lineTo(e+i-E,c),n.arcTo(e+i,c,e+i,c+E,E),n.lineTo(e+i,f),n.closePath()):(n.moveTo(e,c),n.lineTo(e,f-A),n.arcTo(e,f,e+A,f,A),n.lineTo(e+i-A,f),n.arcTo(e+i,f,e+i,f-A,A),n.lineTo(e+i,c),n.closePath()),g&&(n.fillStyle=g,n.fill()),y&&(n.strokeStyle=y,n.lineWidth=b!=null?b:1,n.stroke()),{top:c,bottom:f}}function df(n,t,e,i,s,r){var m,g,y,b,M;const o=t.series[e];if(!o)return;const a=Ea(t,o,i.index,i.labelValue);if(!a.show||s.width<=0)return;const h=(m=a.textStyle)!=null&&m.fontSize?Ge(a.textStyle.fontSize):ji,l=(y=(g=a.textStyle)==null?void 0:g.fill)!=null&&y.color?Pt(a.textStyle.fill.color,r):void 0;n.save(),n.fillStyle=l!=null?l:Gt;const c=(M=(b=a.textStyle)==null?void 0:b.bold)!=null?M:!0;n.font="".concat(c?"bold ":"").concat(h,"px ").concat(St),n.textAlign="center",n.textBaseline="middle";const f=i.end>=i.start,u=s.x+s.width/2,d=s.bottom-s.top;let p=f?s.top-12:s.bottom+12;switch(a.position){case 2:p=f?s.top+12:s.bottom-12;break;case 3:p=s.top+d/2;break;default:p=f?s.top-12:s.bottom+12;break}n.fillText(a.text,u,p),n.restore()}function mf(n,t,e,i,s,r={}){if(!Sn(e.x)||i.seriesIndex===-1)return;const o=e.x,a=e.y,h=o.bandwidth(),l=i.seriesIndex,c=t.series[l];if(!c)return;let f;i.segments.forEach(u=>{const d=o(u.category);if(d===void 0)return;u.kind!=="total"&&f&&uf(n,f.x,d,u.cumulativeBefore,h,a);const p=ff(n,u,d,h,a,t,l,s);p&&(df(n,t,l,u,Te(pe({},p),{x:d,width:h}),s),r.chartHoverTargets&&r.chartHoverTargets.push({kind:"bar-vertical",x:d,y:p.top,width:h,height:p.bottom-p.top,category:u.category,seriesName:c.name,value:u.value,color:qa(s,u.kind),anchorX:d,anchorY:p.top}),f={x:d,cumulativeAfter:u.cumulativeAfter})})}function pf(n,t){if(!Number.isFinite(n))return"";if(t)try{return Ji.format(t,n)}catch(e){}return _i("~s")(n)}function gf(n,t,e,i,s,r){var x,w,E,A,N,z,P,v,L,C,B,Y,et,G,F;const o=(x=t.xAxis)!=null?x:{},a=(w=t.yAxis)!=null?w:{},h=Qt(t.xAxis,r),l=Qt(t.yAxis,r),c=i.y+i.height,f=i.x;n.save(),n.lineWidth=1,(A=(E=o.line)==null?void 0:E.fill)!=null&&A.color&&(n.strokeStyle=(N=h.lineColor)!=null?N:Gt,n.beginPath(),n.moveTo(i.x,c),n.lineTo(i.x+i.width,c),n.stroke()),(P=(z=a.line)==null?void 0:z.fill)!=null&&P.color&&(n.strokeStyle=(v=l.lineColor)!=null?v:Gt,n.beginPath(),n.moveTo(f,i.y),n.lineTo(f,i.y+i.height),n.stroke());const u=Math.max(2,Math.floor(i.height/60)),d=e.y.ticks(u),p=a.majorTickMark&&a.majorTickMark!=="TICK_MARK_NONE",m=!!((C=(L=a.majorGridlines)==null?void 0:L.fill)!=null&&C.color),g=(B=l.gridLineColor)!=null?B:l.lineColor;if(n.font="".concat(l.fontSize,"px ").concat(St),n.fillStyle=l.textColor,n.textAlign="right",n.textBaseline="middle",d.forEach(D=>{var U,st;const H=e.y(D);if(!Number.isFinite(H))return;m&&(n.save(),n.strokeStyle=g!=null?g:Gt,n.beginPath(),n.moveTo(i.x,H),n.lineTo(i.x+i.width,H),n.stroke(),n.restore()),p&&(n.strokeStyle=(U=l.lineColor)!=null?U:Gt,n.beginPath(),n.moveTo(f-4,H),n.lineTo(f,H),n.stroke());const j=pf(D,(st=t.yAxis)==null?void 0:st.numberFormatCode);n.fillText(j,f-6,H)}),s.bins.length>0){n.font="".concat(h.fontSize,"px ").concat(St),n.fillStyle=h.textColor,n.textAlign="center",n.textBaseline="top";const D=h.fontSize*.2+4;s.bins.forEach(H=>{var K,rt;const j=e.x(H.x0),U=e.x(H.x1);if(!Number.isFinite(j)||!Number.isFinite(U))return;const st=j+(U-j)/2,ft=(K=H.label)!=null?K:"";o.majorTickMark&&o.majorTickMark!=="TICK_MARK_NONE"&&(n.strokeStyle=(rt=h.lineColor)!=null?rt:Gt,n.beginPath(),n.moveTo(st,c),n.lineTo(st,c+D),n.stroke()),n.fillText(ft,st,c+D+2)})}const b=o==null?void 0:o.title,M=o==null?void 0:o.titleTextStyle;if(b&&b.trim().length>0){const D=!!(M!=null&&M.bold),H=M!=null&&M.fontSize?M.fontSize/100*(96/72):h.fontSize,j=(Y=M==null?void 0:M.fill)!=null&&Y.color?Pt(M.fill.color,r):(F=(G=(et=t.xAxis)==null?void 0:et.textStyle)==null?void 0:G.fill)!=null&&F.color?Pt(t.xAxis.textStyle.fill.color,r):h.textColor;n.fillStyle=j!=null?j:h.textColor,n.font="".concat(D?"bold ":"").concat(H,"px ").concat(St),n.textAlign="center",n.textBaseline="top",n.fillText(b,i.x+i.width/2,c+h.fontSize+20)}n.restore()}function yf(n,t,e,i,s,r){if(e.seriesIndex===-1||e.segments.length===0)return;const o=t.series[e.seriesIndex];if(!o)return;n.save(),n.lineJoin="round",n.lineCap="round";const a=[];e.segments.forEach(h=>{const l=h.y1-h.y0;if(l<=0)return;const f=_e(o,h.index)?void 0:fe(o,h.index,e.seriesIndex,i),{color:u,widthPx:d}=we(o,h.index,i);n.beginPath(),n.moveTo(h.topLeftX,h.y0),n.lineTo(h.topRightX,h.y0),n.lineTo(h.bottomRightX,h.y1),n.lineTo(h.bottomLeftX,h.y1),n.closePath(),f&&(n.fillStyle=f,n.fill());const p=u!=null?u:f||"#ffffff",m=d!=null?d:u?1:0;if(m>0&&(n.strokeStyle=p,n.lineWidth=m,n.stroke()),a.push({text:h.category,centerY:h.y0+l/2}),s){const g=Math.max(h.topRightX-h.topLeftX,h.bottomRightX-h.bottomLeftX),y=Math.min(h.topLeftX,h.bottomLeftX),b=h.centerX,M=h.y0+l/2;s.push({kind:"bar-vertical",x:y,y:h.y0,width:g,height:l,category:h.category,seriesName:o.name,value:h.value,color:f!=null?f:u,anchorX:b,anchorY:M,seriesIndex:e.seriesIndex})}}),r&&a.length>0&&(n.save(),n.font=r.font,n.fillStyle=r.textColor,n.textAlign="right",n.textBaseline="middle",a.forEach(h=>{n.fillText(h.text,r.labelX,h.centerY)}),n.restore()),n.restore()}function xf(n,t){var i,s;if(n.categories.length>0)return n.categories;const e=(s=(i=n.series[t])==null?void 0:i.categories)!=null?s:[];return e.length>0?e:[]}function bf(n,t,e){return Math.min(Math.max(n,t),e)}function Zo(n,t,e){var E,A,N,z,P,v,L;const i=e!=null?e:new Set,s=n.series.findIndex((C,B)=>!i.has(B));if(s===-1)return{seriesIndex:-1,segments:[]};const r=n.series[s],o=xf(n,s),a=(E=r==null?void 0:r.values)!=null?E:[],h=Math.max(o.length,a.length);if(h===0)return{seriesIndex:s,segments:[]};const l=[];for(let C=0;C<h;C++){const B=a[C],Y=typeof B=="number"&&Number.isFinite(B)?Math.max(0,B):0;l.push(Y)}const c=(A=hr(l))!=null?A:0;if(c<=0)return{seriesIndex:s,segments:[]};const f=(N=n.funnelOptions)==null?void 0:N.gapWidth,u=typeof f=="number"&&Number.isFinite(f)?bf(f,0,.8):.06,d=h+(h>1?(h-1)*u:0),p=Math.max(0,t.height),m=d>0?p/d:0,g=m*u,y=t.x+t.width/2;let b=t.y;const M=[];for(let C=0;C<h;C++){const B=(z=l[C])!=null?z:0,Y=B/c,et=t.width*Y,G=et,F=(L=(v=o[C])!=null?v:(P=r==null?void 0:r.categories)==null?void 0:P[C])!=null?L:"Step ".concat(C+1),D=b,H=D+m,j=et/2,U=G/2;M.push({index:C,category:F,value:B,ratio:Y,y0:D,y1:H,topWidth:et,bottomWidth:G,centerX:y,topLeftX:y-j,topRightX:y+j,bottomLeftX:y-U,bottomRightX:y+U}),b=H+g}const x=h*m+Math.max(0,h-1)*g,w=p-x;if(w>0&&M.length>0){const C=w/2;M.forEach(B=>{B.y0+=C,B.y1+=C})}return{seriesIndex:s,segments:M}}function Mf(n){if(typeof n=="number"&&Number.isFinite(n))return n}function wf(n){var t;return(t=n.boxWhiskerOptions)!=null&&t.quartileMethod?n.boxWhiskerOptions.quartileMethod:Ko.QUARTILE_METHOD_EXCLUSIVE}function _f(n,t){var h;const e=n.length;if(e===0)return NaN;if(e===1)return(h=n[0])!=null?h:NaN;const i=(e+1)*t,s=Math.floor(i),r=i-s;if(s<=0)return n[0];if(s>=e)return n[e-1];const o=n[s-1],a=n[s];return o+r*(a-o)}function nr(n,t,e){var i;return n.length===0?NaN:e===Ko.QUARTILE_METHOD_INCLUSIVE?(i=gh(n,t))!=null?i:NaN:_f(n,t)}function Tf(n,t,e,i){const s=n==null?void 0:n[e];if(s&&s.length>0)return s;const r=t[e];return r&&r.length>0?r:i}function Sf(n,t={}){var f;if(n.type!==pt.CHART_TYPE_BOX_WHISKER)throw new Error("prepareBoxWhiskerData called for non box-whisker chart");const e=t.hiddenSeriesIndices,i=wf(n),s=(f=n.categories)!=null?f:[],r=[],o=new Set,a=n.series.map((u,d)=>({series:u,seriesIndex:d})).filter(({seriesIndex:u})=>!(e!=null&&e.has(u))).map(({series:u,seriesIndex:d})=>{var y,b,M;const p=new Map,m=(b=(y=u.values)==null?void 0:y.length)!=null?b:0,g=u.name&&u.name.length>0?u.name:"Series ".concat(d+1);for(let x=0;x<m;x++){const w=Mf((M=u.values)==null?void 0:M[x]);if(w===void 0)continue;const E=Tf(u.categories,s,x,"".concat(g," ").concat(x+1));o.has(E)||(o.add(E),r.push(E));const A=p.get(E);A?A.push(w):p.set(E,[w])}return{seriesIndex:d,valuesByCategory:p}});r.length===0&&s.length>0&&s.forEach(u=>{o.has(u)||(o.add(u),r.push(u))});const h=[];let l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return r.forEach(u=>{const d=[];a.forEach(({seriesIndex:p,valuesByCategory:m})=>{var B;const g=m.get(u);if(!g||g.length===0)return;const y=g.slice().sort((Y,et)=>Y-et);if(y.length===0)return;const b=nr(y,.25,i),M=nr(y,.5,i),x=nr(y,.75,i),w=x-b,E=b-1.5*w,A=x+1.5*w,N=[],z=[];y.forEach(Y=>{Y<E||Y>A?N.push(Y):z.push(Y)});const P=z.length>0?z[0]:y[0],v=z.length>0?z[z.length-1]:y[y.length-1],L=(B=Rh(y))!=null?B:void 0,C={seriesIndex:p,categoryKey:u,valuesSorted:y,q1:b,median:M,q3:x,whiskerLow:P,whiskerHigh:v,min:y[0],max:y[y.length-1],iqr:w,outliers:N,nonOutliers:z,mean:L};l=Math.min(l,C.min,C.whiskerLow,...C.outliers),c=Math.max(c,C.max,C.whiskerHigh,...C.outliers),d.push(C)}),h.push({key:u,series:d})}),Number.isFinite(l)||(l=0),Number.isFinite(c)||(c=1),l===c&&(l-=1,c+=1),{categories:r,seriesOrder:a.map(u=>u.seriesIndex),byCategory:h,extents:{min:l,max:c}}}function Af(n,t){const e=qi().domain(n.categories).range([t.x,t.x+t.width]).paddingInner(.3).paddingOuter(.2),i=Math.max(0,e.bandwidth()),s=qi().domain(n.seriesOrder).range([0,i]).paddingInner(.2).paddingOuter(.1),r=si().domain([n.extents.min,n.extents.max]).nice().range([t.y+t.height,t.y]);return{x:e,xSeries:s,y:r}}const Ef=2,vf=.6,Cf=3,If=2,kf=3;function sr(n,t,e,i,s,r,o){!Number.isFinite(t)||!Number.isFinite(e)||(n.beginPath(),n.arc(t,e,i,0,Math.PI*2),s&&(n.fillStyle=s,n.fill()),r&&o>0&&(n.strokeStyle=r,n.lineWidth=o,n.stroke()))}function Nf(n,t,e,i){var c,f,u;const s=n.series[t.seriesIndex];if(!s)return{strokeWidth:1,noFill:!1};const r=_e(s,e),o=(c=fe(s,e,t.seriesIndex,i))!=null?c:Me(s,t.seriesIndex,i),a=we(s,e,i),h=(f=a.color)!=null?f:o||Me(s,t.seriesIndex,i),l=(u=a.widthPx)!=null?u:1;return{fillColor:r?void 0:o,strokeColor:h!=null?h:void 0,strokeWidth:l>0?l:1,noFill:r}}function zf(n,t,e,i,s,r={}){var d,p,m,g,y,b,M,x;const{chartHoverTargets:o}=r,a=(p=(d=t.boxWhiskerOptions)==null?void 0:d.showMeanMarker)!=null?p:!1,h=(g=(m=t.boxWhiskerOptions)==null?void 0:m.showMeanLine)!=null?g:!1,l=(b=(y=t.boxWhiskerOptions)==null?void 0:y.showOutliers)!=null?b:!0,c=(x=(M=t.boxWhiskerOptions)==null?void 0:M.showNonOutliers)!=null?x:!1,f=new Map,u=new Map;i.categories.forEach((w,E)=>{e.x(w)!==void 0&&u.set(w,E)}),i.byCategory.forEach(w=>{var P;const E=e.x(w.key);if(E===void 0)return;const A=(P=u.get(w.key))!=null?P:0,N=e.x.bandwidth(),z=e.xSeries.bandwidth();w.series.forEach(v=>{var _,S,T,q,I,it,k,J,lt,$;const L=t.series[v.seriesIndex];if(!L)return;const C=e.xSeries(v.seriesIndex),B=z>0?z:Math.max(N*.5,Math.min(N,12)),Y=C!==void 0?C:Math.max(0,(N-B)/2),et=E+Y,G=et+B,F=et+B/2,D=e.y(v.q1),H=e.y(v.q3),j=e.y(v.median),U=e.y(v.whiskerLow),st=e.y(v.whiskerHigh);if(!Number.isFinite(D)||!Number.isFinite(H)||!Number.isFinite(j)||!Number.isFinite(U)||!Number.isFinite(st))return;const ft=Math.min(D,H),K=Math.max(Math.abs(H-D),1),at=Math.min(B*vf,B)/2,X=Nf(t,v,A,s);if(n.beginPath(),n.rect(et,ft,B,K),X.fillColor&&(n.fillStyle=X.fillColor,n.fill()),X.strokeColor&&(n.strokeStyle=X.strokeColor,n.lineWidth=X.strokeWidth,n.stroke()),X.strokeColor&&(n.beginPath(),n.strokeStyle=X.strokeColor,n.lineWidth=Math.max(Ef,X.strokeWidth),n.moveTo(et,j),n.lineTo(G,j),n.stroke()),X.strokeColor&&(n.beginPath(),n.strokeStyle=X.strokeColor,n.lineWidth=X.strokeWidth,n.moveTo(F,H),n.lineTo(F,st),n.moveTo(F-at,st),n.lineTo(F+at,st),n.moveTo(F,D),n.lineTo(F,U),n.moveTo(F-at,U),n.lineTo(F+at,U),n.stroke()),l&&v.outliers.forEach(nt=>{var ht,gt,Et,Mt,yt;const tt=e.y(nt);Number.isFinite(tt)&&(sr(n,F,tt,Cf,(ht=X.strokeColor)!=null?ht:X.fillColor,X.strokeColor,X.strokeWidth),o&&o.push({kind:"scatter-point",anchorX:F,anchorY:tt,seriesName:(gt=L.name)!=null?gt:void 0,category:w.key,value:nt,color:(Mt=(Et=X.fillColor)!=null?Et:X.strokeColor)!=null?Mt:void 0,elementId:(yt=t.id)!=null?yt:void 0,seriesIndex:v.seriesIndex}))}),c&&v.nonOutliers.forEach(nt=>{var ht;const tt=e.y(nt);Number.isFinite(tt)&&sr(n,F,tt,If,(ht=X.fillColor)!=null?ht:X.strokeColor,X.strokeColor,Math.max(1,X.strokeWidth/2))}),a&&v.mean!==void 0){const nt=e.y(v.mean);Number.isFinite(nt)&&(sr(n,F,nt,kf,(_=X.strokeColor)!=null?_:X.fillColor,X.strokeColor,X.strokeWidth),o&&o.push({kind:"scatter-point",anchorX:F,anchorY:nt,seriesName:(S=L.name)!=null?S:void 0,category:w.key,value:v.mean,color:(q=(T=X.fillColor)!=null?T:X.strokeColor)!=null?q:void 0,elementId:(I=t.id)!=null?I:void 0,seriesIndex:v.seriesIndex}),f.has(v.seriesIndex)||f.set(v.seriesIndex,[]),f.get(v.seriesIndex).push({x:F,y:nt,categoryIndex:A,color:(it=X.strokeColor)!=null?it:X.fillColor}))}o&&o.push({kind:"bar-vertical",x:et,y:ft,width:B,height:K,seriesName:(k=L.name)!=null?k:void 0,category:w.key,value:v.median,color:(lt=(J=X.fillColor)!=null?J:X.strokeColor)!=null?lt:void 0,anchorX:F,anchorY:j,elementId:($=t.id)!=null?$:void 0,seriesIndex:v.seriesIndex})})}),h&&f.forEach((w,E)=>{var v,L,C;const A=w.filter(B=>Number.isFinite(B.x)&&Number.isFinite(B.y)).sort((B,Y)=>B.categoryIndex-Y.categoryIndex);if(A.length<2)return;const N=t.series[E],z=N?Me(N,E,s):void 0,P=(C=(L=(v=A[0])==null?void 0:v.color)!=null?L:z)!=null?C:"#444444";n.beginPath(),n.strokeStyle=P,n.lineWidth=1.5,n.lineJoin="round",A.forEach((B,Y)=>{Y===0?n.moveTo(B.x,B.y):n.lineTo(B.x,B.y)}),n.stroke()})}const jo=0;function Xf(n,t,e,i,s,r,o,a,h,l,c){const f=Xh(n,e,i),u=ql(n.chartReference,e);if(!u)return;const d=s!=null?s:Wh(e.theme,Uh(e)),p=n.id&&n.id.length>0?n.id:"".concat(Math.round(f.x),":").concat(Math.round(f.y),":").concat(Math.round(f.width),":").concat(Math.round(f.height));Za(t,u,f,{themeMap:d,chartHoverTargets:r,hiddenSeriesIndices:o,elementId:p,mapCtx:a!=null?a:void 0,threeCtx:h!=null?h:void 0,on3DViewport:l,onMapViewport:c})}function qf(n,t,e,i={}){var r,o,a;const s=(r=i.themeMap)!=null?r:{colorMap:{},effectMap:{},lineStyleMap:{}};Za(n,t,e,Te(pe({},i),{themeMap:s,mapCtx:(o=i.mapCtx)!=null?o:void 0,threeCtx:(a=i.threeCtx)!=null?a:void 0}))}function Za(n,t,e,i){var N,z,P,v,L,C,B,Y,et,G;n.save();const s=t.type===pt.CHART_TYPE_TREEMAP,r=t.type===pt.CHART_TYPE_SUNBURST,o=t.type===pt.CHART_TYPE_RADAR,a=t.type===pt.CHART_TYPE_BAR_3D,h=t.type===pt.CHART_TYPE_MAP,l=t.type===pt.CHART_TYPE_FUNNEL,c=t.type===pt.CHART_TYPE_BOX_WHISKER,f=(z=(N=t.barOptions)==null?void 0:N.direction)!=null?z:t.barDirection,u=(t.type===pt.CHART_TYPE_BAR||t.type===pt.CHART_TYPE_BAR_3D)&&f===nh.BAR_DIRECTION_BAR;if(i.excelDefaults){n.save(),n.fillStyle="#ffffff";const F=2,D=e.x,H=e.y,j=e.width,U=e.height;n.beginPath(),n.moveTo(D+F,H),n.lineTo(D+j-F,H),n.quadraticCurveTo(D+j,H,D+j,H+F),n.lineTo(D+j,H+U-F),n.quadraticCurveTo(D+j,H+U,D+j-F,H+U),n.lineTo(D+F,H+U),n.quadraticCurveTo(D,H+U,D,H+U-F),n.lineTo(D,H+F),n.quadraticCurveTo(D,H,D+F,H),n.closePath(),n.fill(),n.strokeStyle="#d0d0d0",n.lineWidth=.5,n.stroke(),n.restore()}const d={x:e.x,y:e.y+jo,width:e.width,height:Math.max(0,e.height-jo)},p=gu(n,t,d,i.themeMap,.15);let m={x:d.x,y:d.y+p.reserved,width:d.width,height:Math.max(0,d.height-p.reserved)};m=Xl(m);let g,y=Dt.LEGEND_POSITION_RIGHT;if(!i.skipLegend&&t.hasLegend){const F=Vl(n,t,m,i.themeMap,{outerDims:e,maxSideFrac:.35,sidePaddingPx:6});m=F.plotDims,g=F.legendRect,y=(P=F.legendPosition)!=null?P:y}const b=!s&&!r&&!o&&!a&&!h&&!l,M=m,x=b?yu(n,t,m,i.themeMap):void 0;if(x&&(u?m={x:M.x,y:x.plotDims.y,width:M.width,height:Math.max(0,M.height-x.reservedBottom)}:m=x.plotDims),!s&&!r&&!h&&!l){const F=xu(t,m,.1);F.reservedTop>0&&(m={x:m.x,y:m.y+F.reservedTop,width:m.width,height:Math.max(0,m.height-F.reservedTop)})}const w=i.hiddenSeriesIndices!==void 0?new Set(i.hiddenSeriesIndices):void 0;if(u){const F=t.categories.length>0?t.categories:(L=(v=t.series[0])==null?void 0:v.categories)!=null?L:[];m=el(n,m,F,t.yAxis,i.themeMap,{maxLeftFrac:.35,sidePaddingPx:8});const D=Zl(t,m);jl(n,t,D,m,!0,i.themeMap),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices}),Kl(n,t,D,i.themeMap,i.chartHoverTargets,w),n.restore();return}const E=!s&&!r&&!o&&!h&&!l&&!c?Xr(t,m):void 0;if(t.title&&t.title.trim()){const F={x:e.x,y:d.y,width:e.width,height:p.reserved},D={type:dr.ELEMENT_TYPE_TEXT,paragraphs:[{runs:[{text:t.title.trim(),textStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER}),citations:[]}]}],textStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER}),levelsStyles:[]};xr(D,n,i.themeMap,void 0,{bboxPx:F,resolvedStyle:Te(pe({},t.titleTextStyle),{alignment:ti.ALIGNMENT_TYPE_CENTER})})}const A=t.type===pt.CHART_TYPE_SCATTER||t.type===pt.CHART_TYPE_BUBBLE;if(!s&&!r&&o)g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices}),mu(n,t,m,i.themeMap,i.chartHoverTargets,i.hiddenSeriesIndices?new Set(i.hiddenSeriesIndices):void 0);else if(!s&&!r&&!h&&!l){if(c){const F=Sf(t,{hiddenSeriesIndices:w}),D=Af(F,m);Jr(n,t,D,m,i.themeMap),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices}),zf(n,t,D,F,i.themeMap,{chartHoverTargets:i.chartHoverTargets})}else if(E)switch(!Kh(t.type)&&!A&&!a&&t.type!==pt.CHART_TYPE_HISTOGRAM&&Jr(n,t,E,m,i.themeMap),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices}),t.type){case pt.CHART_TYPE_BAR:{Ql(n,t,E,i.themeMap,i.chartHoverTargets,w);break}case pt.CHART_TYPE_WATERFALL:{const F=ua(t,w);mf(n,t,E,F,i.themeMap,{chartHoverTargets:i.chartHoverTargets});break}case pt.CHART_TYPE_BAR_3D:{if(!i.threeCtx){if(i.on3DViewport){const H=e.width-Math.max(0,m.x-e.x),j=e.height-Math.max(0,m.y-e.y),U={x:m.x,y:m.y,width:Math.max(0,Math.min(m.width,H)),height:Math.max(0,Math.min(m.height,j))};i.on3DViewport({elementId:(C=i.elementId)!=null?C:"",plotDims:U})}n.restore();return}const F={x:0,y:0,width:m.width,height:m.height},D=Xr(t,F);Qc(i.threeCtx,t,D,F,i.themeMap,w);break}case pt.CHART_TYPE_LINE:case pt.CHART_TYPE_LINE_3D:hu(n,t,E,i.themeMap,i.chartHoverTargets,w);break;case pt.CHART_TYPE_AREA:case pt.CHART_TYPE_AREA_3D:uu(n,t,E,i.themeMap,i.chartHoverTargets,w);break;case pt.CHART_TYPE_HISTOGRAM:{const F=rf(t,w?{hiddenSeriesIndices:w}:void 0),D={extents:F.extents},H=ir(t,m,D);gf(n,t,H,m,F,i.themeMap),of(n,t,H,F,i.themeMap,{chartHoverTargets:i.chartHoverTargets});break}case pt.CHART_TYPE_PIE_3D:{if(!i.threeCtx){if(i.on3DViewport){const D=e.width-Math.max(0,m.x-e.x),H=e.height-Math.max(0,m.y-e.y),j={x:m.x,y:m.y,width:Math.max(0,Math.min(m.width,D)),height:Math.max(0,Math.min(m.height,H))};i.on3DViewport({elementId:(B=i.elementId)!=null?B:"",plotDims:j})}n.restore();return}const F={width:m.width,height:m.height};nu(i.threeCtx,t,F,i.themeMap,w);break}case pt.CHART_TYPE_PIE:case pt.CHART_TYPE_DOUGHNUT:Ul(n,t,m,i.themeMap,i.chartHoverTargets,w);break;case pt.CHART_TYPE_SCATTER:{const F=i.hiddenSeriesIndices!==void 0?new Set(i.hiddenSeriesIndices):void 0,D=Ua(t,F),H=ir(t,m,D);Xo(n,t,H,m,i.themeMap),ju(n,t,H,i.themeMap,i.chartHoverTargets,F,D);break}case pt.CHART_TYPE_BUBBLE:{const F=i.hiddenSeriesIndices!==void 0?new Set(i.hiddenSeriesIndices):void 0,D=Ju(t,F),H=ir(t,m,D);Xo(n,t,H,m,i.themeMap),Ku(n,t,H,D,i.themeMap,i.chartHoverTargets);break}}}else if(l){g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices});const F=Zo(t,m,w),D=Rf(n,t,F,m,i.themeMap),H=D!==null?Zo(t,D.plotDims,w):F;yf(n,t,H,i.themeMap,i.chartHoverTargets,D==null?void 0:D.labels)}else if(h){g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices});const F=e.width-Math.max(0,m.x-e.x),D=e.height-Math.max(0,m.y-e.y),H={x:m.x,y:m.y,width:Math.max(0,Math.min(m.width,F)),height:Math.max(0,Math.min(m.height,D))};if(i.onMapViewport&&i.onMapViewport({elementId:(Y=i.elementId)!=null?Y:"",plotDims:H}),!i.mapCtx){n.restore();return}sl(i.mapCtx,t,m,i.themeMap,{elementId:i.elementId,hiddenSeriesIndices:w})}else if(s){const F=Rl(t,m,i.themeMap);_u(n,F,m,{chart:t,themeMap:i.themeMap}),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices})}else if(r){const F=Ru(t,m,i.themeMap);Du(n,F,m,{themeMap:i.themeMap,valueFormatCode:(G=(et=t.series[0])==null?void 0:et.valuesFormatCode)!=null?G:void 0}),g&&qe(n,t,g,i.themeMap,y,{elementId:i.elementId,chartHoverTargets:i.chartHoverTargets,hiddenSeriesIndices:i.hiddenSeriesIndices})}n.restore()}const rr=8,Pf=.35;function Rf(n,t,e,i,s){if(e.segments.length===0||i.width<=0)return null;const r=Qt(t.yAxis,s),o="".concat(r.fontSize,"px ").concat(St);n.save(),n.font=o;let a=0;for(const c of e.segments){const f=n.measureText(c.category).width;f>a&&(a=f)}if(n.restore(),!Number.isFinite(a)||a<=0)return null;const h=Math.min(i.width*Pf,a+rr);return h<=rr||h>=i.width?null:{plotDims:{x:i.x+h,y:i.y,width:Math.max(0,i.width-h),height:i.height},labels:{labelX:i.x+h-rr,font:o,textColor:r.textColor}}}const or=new Map;function Ff(n){if(n.buffer instanceof ArrayBuffer)return n;const t=new Uint8Array(n.byteLength);return t.set(n),t}function Lf(n,t,e){if(/\bwidth\s*=|\bheight\s*=/.test(n))return new Blob([n],{type:"image/svg+xml"});const i=n.replace(/<svg\b([^>]*)>/,'<svg$1 width="'.concat(t,'" height="').concat(e,'">'));return new Blob([i],{type:"image/svg+xml"})}function Bf(n,t){var s,r,o,a;const e=(a=(s=n.imageReference)==null?void 0:s.id)!=null?a:(o=(r=n.fill)==null?void 0:r.imageReference)==null?void 0:o.id;if(!e)return null;const i=t.images.find(h=>h.id===e);return i?{contentType:i.contentType,data:i.data}:null}async function Zf(n,t){var i,s;const e=Bf(n,t);if(!e)throw new Error("no imageReference on element");return Of(e,(i=n.bbox)==null?void 0:i.widthEmu,(s=n.bbox)==null?void 0:s.heightEmu)}async function Of(n,t,e){const i="".concat(n.data.byteLength,"_").concat(n.contentType),s=or.get(i);if(s)return s;if(n.contentType==="image/svg+xml"){const r=Math.round((t!=null?t:1)*Ft),o=Math.round((e!=null?e:1)*Ft),a=window.devicePixelRatio||1,h=Lf(new TextDecoder().decode(n.data),r,o),l=URL.createObjectURL(h),c=new Image;c.src=l,await c.decode();const f=createImageBitmap(c,{resizeWidth:r*a,resizeHeight:o*a});return URL.revokeObjectURL(l),or.set(i,f),f}else{const r=new Blob([Ff(n.data)],{type:n.contentType}),o=createImageBitmap(r);return or.set(i,o),o}}export{Ft as E,Ji as S,xr as a,Wh as b,Xh as c,qf as d,Zf as e,Uh as f,Of as g,Xf as h,Vf as i,Uf as j,qh as k,Pt as r};
//# sourceMappingURL=na97s5us80xgwiaa.js.map
