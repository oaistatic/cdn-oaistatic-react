import{c as me,h as ne,r as te,j as s}from"./mw35uwhq4g8r9eam.js";import{S as ce}from"./l4v2i2dq9gwjak1q.js";import{p as pe,dz as de,d as fe,kh as ue,qU as ge,R as he,dp as se,aB as xe}from"./d0xa318sl7ywi0za.js";import{A as Me}from"./g2euln7v5pbm31qa.js";import{a as ye}from"./laaag2ef692jond3.js";import{g as oe}from"./k18u5p03syimtxuo.js";import"./mraf0ji5wx0y0vgl.js";import"./fgu1j7e2q9emyzhc.js";import"./ouqfkhwho1d793yt.js";import"./f1b2o8cofuf894iu.js";import"./pbx1h703pubtj7lo.js";import"./c08xobknzytt16by.js";import"./iio0zgk2sqlxbcjy.js";import"./euzz83urne0h11ye.js";import"./e1t6unu3olubcgkg.js";import"./lcy2t692punsnn4q.js";import"./kcu1x1p0wojynl2j.js";import"./icplq4r4g4m9zwmv.js";import"./m2d85ixk2zz51mk9.js";import"./pdbvfcpzcg4ny695.js";import"./ki6jbruunap4y9wd.js";import"./k9kw5016oyk4ib9g.js";import"./lvrypwdhnjlsz45f.js";import"./gywigwwdbkbcgqzt.js";import"./la79eh1q1qxrfcxi.js";import"./i693kfbch8smq86y.js";import"./gy1lpvuoewmzh42c.js";import"./iknugp00locgtve5.js";import"./h1em0bjkpkjv8ykw.js";import"./kbj1b07s2z6vxqkg.js";import"./hu1bt0oauegdhua6.js";import"./oj9zwxa6l3kpv1x2.js";import"./h4yh1661qhhbu5v5.js";import"./bymjh2zr7tar40cn.js";import"./bzxitjpdx1z6hpbp.js";import"./nfv7adzg2a3x1oo5.js";import"./nte82mqftpddm52f.js";import"./3xa3aq3nbd1nd678.js";import"./jwvkjd19mng37ttq.js";import"./ffwmresmynw1bm5w.js";import"./dwcyf9zwrp4hlt30.js";import"./d0pdpvvqx24hob9r.js";import"./nc5snhuo5k648r43.js";import"./k527f0oyvlppyfoy.js";import"./nea9sowk1s9pzcpg.js";import"./ey0kaiz1v4k0znjj.js";import"./ht6uzt6gonugd1uu.js";import"./ivhsa3khymuxymxc.js";import"./egtdmf6pnrvsdet3.js";import"./iue4s7sqsxkz98qq.js";function ht(ae){"use forget";const e=me.c(84),{onClose:o,phoneNumber:z,onBack:D,enrollmentSessionId:a,factorId:A,renderAsSheet:re}=ae,t=ne(),[r,ie]=te.useState(""),[L,I]=te.useState(null),m=ye(),n=pe(),F=de(),le=fe(ue),Z=!!re;let O;e[0]===Symbol.for("react.memo_cache_sentinel")?(O=ge(),e[0]=O):O=e[0];const ee=O,i=Z&&!ee,G=Z&&ee;let R;e[1]!==a||e[2]!==A||e[3]!==t||e[4]!==n?(R=async()=>{try{I(null),await he.safePost("/accounts/mfa/user/sms/resend_otp_for_enrollment",{requestBody:{factor_id:A,session_id:a}}),n.success(t.formatMessage({id:"ljeLVM",defaultMessage:"We resent a code to your phone"}))}catch(l){const X=l;I(t.formatMessage(oe(X,!0)))}},e[1]=a,e[2]=A,e[3]=t,e[4]=n,e[5]=R):R=e[5];const P=R;let V;e[6]!==m||e[7]!==r||e[8]!==a||e[9]!==t||e[10]!==o||e[11]!==n?(V=async()=>{try{I(null),await m.mutateAsync({factor:"sms",code:r.trim(),sessionId:a}),n.success(t.formatMessage({id:"CylGaM",defaultMessage:"SMS verification enabled"}),{testId:"sms-mfa-activation-success"}),o()}catch(l){const X=l;I(t.formatMessage(oe(X,!1)))}},e[6]=m,e[7]=r,e[8]=a,e[9]=t,e[10]=o,e[11]=n,e[12]=V):V=e[12];const c=V,U=!G,Y=G?"bg-token-bg-primary":void 0,$=G?"top":void 0,J=i?le?"fit":"fill":void 0,W=i?"large":void 0,H=i?"h-[max(100svh,100dvh,100%)]":void 0,K=i?"sm:border-token-border-light! max-sm:h-full max-sm:w-screen max-sm:max-w-none max-sm:rounded-none sm:w-[calc(100vw-2rem)] sm:max-w-[900px] sm:border":void 0;let p;e[13]!==t?(p=t.formatMessage({id:"+lOJbF",defaultMessage:"Enter code"}),e[13]=t,e[14]=p):p=e[14];let d;e[15]!==p?(d=s.jsx("span",{className:"text-heading-3",children:p}),e[15]=p,e[16]=d):d=e[16];let f;e[17]!==t?(f=t.formatMessage({id:"386YYB",defaultMessage:"Back"}),e[17]=t,e[18]=f):f=e[18];let u;e[19]!==D||e[20]!==o?(u=()=>{o(),D()},e[19]=D,e[20]=o,e[21]=u):u=e[21];let g;e[22]!==f||e[23]!==u?(g=s.jsx(se.Button,{title:f,color:"secondary",onClick:u}),e[22]=f,e[23]=u,e[24]=g):g=e[24];let h;e[25]!==t?(h=t.formatMessage({id:"i5w9ni",defaultMessage:"Verify"}),e[25]=t,e[26]=h):h=e[26];let x;e[27]!==m||e[28]!==r||e[29]!==a?(x=r.trim().length!==6||!a||m.isPending,e[27]=m,e[28]=r,e[29]=a,e[30]=x):x=e[30];let M;e[31]!==c||e[32]!==h||e[33]!==x?(M=s.jsx(se.Button,{title:h,color:"primary",disabled:x,onClick:c}),e[31]=c,e[32]=h,e[33]=x,e[34]=M):M=e[34];let y;e[35]!==c?(y=l=>{l.preventDefault(),c()},e[35]=c,e[36]=y):y=e[36];let b;e[37]!==t||e[38]!==z?(b=t.formatMessage({id:"Li6w+h",defaultMessage:"Enter the 6-digit code we just sent to {phoneNumber}"},{phoneNumber:z}),e[37]=t,e[38]=z,e[39]=b):b=e[39];let S;e[40]!==b?(S=s.jsx("p",{children:b}),e[40]=b,e[41]=S):S=e[41];let v;e[42]!==t?(v=t.formatMessage({id:"//e/gE",defaultMessage:"Enter code"}),e[42]=t,e[43]=v):v=e[43];let q;e[44]===Symbol.for("react.memo_cache_sentinel")?(q=l=>{ie(l.target.value),I(null)},e[44]=q):q=e[44];let C;e[45]!==r||e[46]!==v?(C=s.jsx(Me,{ariaLabel:!1,name:"otp",placeholder:v,value:r,onChange:q}),e[45]=r,e[46]=v,e[47]=C):C=e[47];let j;e[48]!==L||e[49]!==t?(j=L&&s.jsxs("p",{className:"flex gap-1 text-xs text-red-500",children:[s.jsx(ce,{title:t.formatMessage({id:"phoneNumberInput.errorIcon",defaultMessage:"Error"})}),L]}),e[48]=L,e[49]=t,e[50]=j):j=e[50];let w;e[51]!==t?(w=t.formatMessage({id:"o3p2Ei",defaultMessage:"Didn't get a code?"}),e[51]=t,e[52]=w):w=e[52];const Q=!A||!(F!=null&&F.id);let N;e[53]!==t?(N=t.formatMessage({id:"pAdG4u",defaultMessage:"Send again"}),e[53]=t,e[54]=N):N=e[54];let E;e[55]!==P||e[56]!==Q||e[57]!==N?(E=s.jsx("button",{type:"button",className:"ms-1 text-blue-400",disabled:Q,onClick:P,children:N}),e[55]=P,e[56]=Q,e[57]=N,e[58]=E):E=e[58];let k;e[59]!==w||e[60]!==E?(k=s.jsxs("div",{className:"pt-2",children:[w,E]}),e[59]=w,e[60]=E,e[61]=k):k=e[61];let B;e[62]!==S||e[63]!==C||e[64]!==j||e[65]!==k?(B=s.jsxs("div",{className:"flex flex-col items-start gap-[12px] self-stretch",children:[S,C,j,k]}),e[62]=S,e[63]=C,e[64]=j,e[65]=k,e[66]=B):B=e[66];let _;e[67]!==y||e[68]!==B?(_=s.jsx("form",{onSubmit:y,className:"text-token-text-primary self-stretch text-sm",children:B}),e[67]=y,e[68]=B,e[69]=_):_=e[69];let T;return e[70]!==o||e[71]!==K||e[72]!==d||e[73]!==g||e[74]!==M||e[75]!==_||e[76]!==U||e[77]!==Y||e[78]!==$||e[79]!==J||e[80]!==W||e[81]!==H||e[82]!==i?(T=s.jsx(xe,{testId:"modal-enter-otp",contentClassName:"!px-6 !pt-6 !pb-[24px]",headerClassName:"!px-6 !py-0 !h-[76px] !items-center",showCloseButton:!0,hasSeparator:!0,isOpen:!0,onClose:o,showOverlayBackground:U,overlayClassName:Y,position:$,isBottomSheet:i,contentSize:J,topMargin:W,contentSheetViewClassName:H,className:K,type:"success",modalActionsClassName:"!mt-[24px]",title:d,secondaryButton:g,primaryButton:M,children:_}),e[70]=o,e[71]=K,e[72]=d,e[73]=g,e[74]=M,e[75]=_,e[76]=U,e[77]=Y,e[78]=$,e[79]=J,e[80]=W,e[81]=H,e[82]=i,e[83]=T):T=e[83],T}export{ht as EnterOtpCodeModal};
//# sourceMappingURL=eatn69hc25ab8pax.js.map
