var C=Object.freeze,N=Object.defineProperty,z=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var L=(t,r,e)=>r in t?N(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,f=(t,r)=>{for(var e in r||(r={}))E.call(r,e)&&L(t,e,r[e]);if(M)for(var e of M(r))A.call(r,e)&&L(t,e,r[e]);return t},g=(t,r)=>z(t,X(r));var D=t=>typeof t=="symbol"?t:t+"",R=(t,r)=>{var e={};for(var n in t)E.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&M)for(var n of M(t))r.indexOf(n)<0&&A.call(t,n)&&(e[n]=t[n]);return e};var I=(t,r)=>C(N(t,"raw",{value:C(r||t.slice())}));import{j as a,M as y,e as w,r as j,h as Y}from"./mw35uwhq4g8r9eam.js";import{S as G}from"./icplq4r4g4m9zwmv.js";import{S as q}from"./eq347oxkmgs4si5r.js";import{cw as J,cF as T,er as W,cB as Q,lR as Z,_ as V,p as K,D as ee}from"./d0xa318sl7ywi0za.js";import{p as te}from"./og1ftjb0zeoepdz3.js";import{S as se,R as ae,B as re,T as ne,a as k,C as ie,X as oe,b as le,Y as ce,c as de,d as F,M as me,e as xe,f as fe,r as he}from"./j29baj0apaw4vezi.js";function ue({value:t,previousValue:r,hideTrend:e=!1,className:n}){let h;if(!e&&t!=="loading"&&r!=null&&r!=="loading"){const c=t>=r,m=c?q:G,p=(t===0&&r===0?0:Math.abs(t-r)/r).toLocaleString(void 0,{style:"percent"});h=a.jsxs(J,{side:"right",customBackgroundColorClassName:"bg-token-main-surface-primary-inverse",className:T("inline-flex items-center",{"text-green-500":c,"text-red-500":!c}),label:a.jsx("span",{className:"text-token-main-surface-primary font-normal",children:a.jsx(y,g(f({},c?H.increaseHelpText:H.decreaseHelpText),{values:{amount:p}}))}),children:[a.jsx(m,{}),a.jsx("span",{children:p})]})}return a.jsxs("div",{className:T("text-token-text-primary flex items-center gap-1 font-medium",n),children:[a.jsx("span",{className:"text-xl",children:t!=="loading"&&t.toLocaleString()}),h,(t==="loading"||r==="loading"&&!e)&&a.jsx(W,{})]})}const H=w({increaseHelpText:{id:"workspaceUsage.trend.increaseHelpText",defaultMessage:"Up {amount} since the previous month"},decreaseHelpText:{id:"workspaceUsage.trend.decreaseHelpText",defaultMessage:"Down {amount} since the previous month"}});function be(t){const{title:r,data:e,otherGroupLabel:n,displayMoM:h,clientEventSource:c,hideLegend:m=!1,hideTopValue:x=!1,tooltipLabelFormatter:p}=t,u=j.useMemo(()=>e==="loading"?[]:n?[...Object.keys(e.metrics).slice(-9),"other"]:Object.keys(e.metrics).slice(-10),[n,e]),d=j.useMemo(()=>e==="loading"?"loading":n?e.data.map(s=>!("values"in s)||"other"in s.values?s:g(f({},s),{values:g(f({},s.values),{other:s.total-u.reduce((i,o)=>{var l;return i+((l=s.values[o])!=null?l:0)},0)})})):e.data,[e,n,u]),v=j.useMemo(()=>d==="loading"?0:d.reduce((s,i)=>Math.max(s,"total"in i?i.total:0),0),[d]),S=j.useMemo(()=>{if(e==="loading"||d==="loading")return{};let s;return n?s=g(f({},e.metrics),{other:{displayName:n}}):s=e.metrics,Object.fromEntries(u.map(i=>({total:d.reduce((l,b)=>{var O;return l+("values"in b&&(O=b.values[i])!=null?O:0)},0),groupKey:i})).sort(({total:i},{total:o})=>o-i).map(({total:i,groupKey:o},l)=>[o,{displayName:s[o].displayName,total:i,color:se[l]}]))},[e,n,u,d]);return a.jsxs("div",{className:"border-token-border-default mb-4 flex min-h-[350px] flex-col rounded-lg border pt-4 pb-4",children:[a.jsxs("div",{className:"px-6",children:[a.jsx("div",{className:"text-token-text-secondary text-sm",children:a.jsx(y,f({},r))}),!x&&a.jsx(ue,{value:e==="loading"?"loading":e.monthOverMonth.cur_month,previousValue:e==="loading"?"loading":e.monthOverMonth.last_month,hideTrend:!h,className:"mb-4 h-7"})]}),a.jsx(ge,{processedData:d,maxTotal:v,seriesMetadata:S,hideLegend:m,clientEventSource:c,tooltipLabelFormatter:p})]})}const _=t=>t.toLocaleString(),U="default";var P;const B=Q.div(P||(P=I(["flex h-full grow items-center justify-center text-lg text-token-text-tertiary"])));function ge({processedData:t,maxTotal:r,seriesMetadata:e,hideLegend:n,clientEventSource:h,tooltipLabelFormatter:c}){const m=j.useRef(void 0),[x,p]=j.useState(),u=(s,i)=>()=>{s&&m.current!==s&&(m.current=s,V.logEvent("Workspace Usage: Chart Series Hovered",{groupKey:s,seriesCount:i,clientEventSource:h})),p(s)};let d=Object.keys(e);if(x){const S=e,{[x]:s}=S,i=R(S,[D(x)]);d=[...Object.keys(i),x]}if(t==="loading")return a.jsx(B,{children:a.jsx(W,{})});if(r===0)return a.jsx(B,{children:a.jsx(y,f({},je.noData))});const v=Object.entries(e).sort(([s])=>s==="other"?1:-1);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:T(he,"flex grow items-center"),children:a.jsx(ae,{width:"100%",height:220,children:a.jsxs(re,{data:t,margin:{left:-20,top:14,right:20},children:[a.jsx(ne,{isAnimationActive:!1,content:a.jsx(ie,{valueFormatter:_,metricToLabel:e,labelFormatter:c}),cursor:{opacity:.2,fill:k}}),a.jsx(oe,{dataKey:"date",axisLine:!1,tickLine:!1,tick:le,tickFormatter:s=>Z(te(s),"MMM d"),interval:t.length-2}),a.jsx(ce,{axisLine:!1,tickLine:!1,domain:[0,r],ticks:[0,r],fontSize:11,fill:k,tick:s=>a.jsx(de,g(f({},s),{textAnchor:"start",y:s.payload.value===0?s.y:s.y-10,x:s.x-10,fontWeight:400,children:_(s.payload.value)}))}),d.map((s,i)=>{const o="values.".concat(s),l=x&&x!==s;return a.jsx(F,{opacity:l?.15:1,dataKey:o,stackId:U,isAnimationActive:!1,fill:l?me:e[s].color,radius:i===0?[4,4,0,0]:void 0},o)}).reverse(),a.jsx(F,{dataKey:"blank",minPointSize:1,stackId:U,isAnimationActive:!1,children:t.map((s,i)=>a.jsx(xe,{opacity:.5,fill:"blank"in s&&s.blank===0?k:"transparent"},"cell-".concat(i)))}),a.jsx(fe,{y:r,stroke:k,strokeDasharray:"3 3",shape:s=>a.jsx("line",g(f({},s),{x1:22}))})]})})}),!n&&a.jsx("div",{className:"text-token-text-primary flex w-full flex-wrap items-center justify-center text-sm",children:v.map(([s,{displayName:i,total:o,color:l}])=>a.jsxs("div",{className:"mx-4 mb-1 flex cursor-pointer items-center justify-center",title:i,onMouseOut:u(void 0,v.length),onMouseOver:u(s,v.length),children:[a.jsx("div",{className:"me-1 h-2 w-2 rounded-[1px]",style:{backgroundColor:l}}),a.jsx("span",{className:"me-1 max-w-32 overflow-hidden text-ellipsis whitespace-nowrap",children:i}),a.jsx("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:"(".concat(pe.format(o),")")})]},s))})]})}const pe=new Intl.NumberFormat(void 0,{notation:"compact",maximumSignificantDigits:3}),je=w({noData:{id:"workspaceUsage.overviewChart.noData",defaultMessage:"No data for this period"}});function Oe(t,{toastId:r,message:e}={}){const n=K(),h=Y();return async(...c)=>{try{return await t(...c)}catch(m){throw n.danger(h.formatMessage(e!=null?e:$.defaultErrorToastMessage),{id:r,loggingTitle:e&&typeof e.defaultMessage=="string"?e.defaultMessage:$.defaultErrorToastMessage.defaultMessage}),ee.addError(m),m}}}const $=w({defaultErrorToastMessage:{id:"defaultErrorToastMessage",defaultMessage:"Something went wrong. If this issue persists please contact us through our help center at help.openai.com."}});export{be as O,pe as T,ue as V,Oe as u};
//# sourceMappingURL=fkjhta71fmme40r8.js.map
