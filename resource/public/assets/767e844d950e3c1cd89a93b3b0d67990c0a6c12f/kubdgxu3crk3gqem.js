var ge=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var X=(l,e,o)=>e in l?ge(l,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[e]=o,L=(l,e)=>{for(var o in e||(e={}))he.call(e,o)&&X(l,o,e[o]);if(Y)for(var o of Y(e))fe.call(e,o)&&X(l,o,e[o]);return l};import{h as W,r as ee,j as t,c as $,e as me,M as z}from"./mw35uwhq4g8r9eam.js";import{G as pe,J as Se,K as xe,M as ve,N as Ce,Q as be,S as je,U as se,X as J,Y as te,Z as Me,$ as ke,a0 as Ae,a1 as Ne,a2 as Pe,a3 as we,a4 as Ee,P as ae,a5 as Te,a6 as ye,a7 as _e,a8 as Le,a9 as Be,aa as Oe,ab as Ue,ac as Fe,ad as Ie,ae as ze,af as He}from"./g2euln7v5pbm31qa.js";import{u as F,g as $e,cu as Ge,dz as Re,M as De,d as R,b as Ve,r as We,bo as Je,jZ as Ke,gR as Ze,cz as qe,O as U,bZ as Qe,kt as Ye,J as Xe,aJ as es,nD as ss,pw as ts,aA as H,cd as oe,cw as K,cF as as,eD as ns,eq as os,m$ as is,px as ls,V as ne,aO as D,_ as V}from"./d0xa318sl7ywi0za.js";import{P as rs}from"./kne35xckmmfq3xx6.js";import{P as cs}from"./c340ncgh31fwqkpk.js";function Cs({showShareButton:l,showProfileDropdown:e,showConversationPrivacyIndicator:o,clientThreadId:a}){const i=F(),n=$e(i,a),s=Ge(a),c=W(),b=Re(),[j,d,h,f,m,x,g,u,p]=De(a,r=>{const Q=ne.getGizmoId(r);return[ne.hasUserMessage(r),Q,Fe(r==null?void 0:r.mode,Q),r==null?void 0:r.title,r==null?void 0:r.is_do_not_remember,r==null?void 0:r.isStarred,r==null?void 0:r.continuingFromSharedProjectConversationId,r==null?void 0:r.sharedProjectConversationOwner,Ie(r)]}),S=R(()=>{var r;return(r=Ve(n))==null?void 0:r.value}),N=ee.useMemo(()=>pe({clientThreadId:u!=null&&u.id&&g?g:s!=null?s:a,gizmoId:d,conversationTitle:f,conversationAsyncStatus:S,isDoNotRemember:m,isStarred:x,owner:u!=null&&u.id?{user_id:u.id}:null}),[u==null?void 0:u.id,g,s,a,d,f,S,m,x]),P=We(a),w=ee.use(cs)!=null,M=Je(i),y=Ke(),k=!M,E=c.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),B=Ze(i,d),v=qe(),A=!U(i),{shouldShowProjectsChatShareModal:O,openProjectsChatShareModal:_}=Se({clientThreadId:a}),C=()=>O?_():oe.openSharingModal(s),le=xe(i),re=R(()=>Qe(i)),ce=Ye(s),ue=Xe(i,"3018147683"),G=le.hasAccess&&!A&&l&&!re&&!y&&!w&&!M&&d==null&&g==null&&!p;let T=null;G?s!=null?T="from-conversation":P&&!j&&(T="new-chat"):T=null;const[de,Z,q]=R(()=>[es(i),ss(),ts(n)]);return t.jsxs(t.Fragment,{children:[q&&b&&Z&&t.jsx(ve,{conversationMode:h}),U(i)?t.jsx(Ce,{}):null,U(i)&&(v==null?void 0:v.includes("caterpillar"))&&t.jsx(be,{}),d&&B&&t.jsx(je,{gizmoId:d,serverThreadId:s!=null?s:g}),l&&(s!=null?s:g)&&t.jsx(t.Fragment,{children:k?t.jsx(H,{onClick:C,icon:se,label:E,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary mx-2",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:E}):t.jsx(K,{label:c.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:t.jsx(J,{"data-testid":"share-chat-button",onClick:C,icon:se,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),G&&T==="from-conversation"&&s!=null?t.jsx(te,{type:T,serverThreadId:s}):null,t.jsxs("div",{className:"flex items-center",children:[G&&T==="new-chat"?t.jsx(te,{type:T,variant:"default"}):null,!A&&!d&&P&&!w&&!j&&!M&&!y&&t.jsx(t.Fragment,{children:t.jsx(Me,{clientThreadId:a})}),o&&t.jsx("div",{className:"me-2",children:t.jsx(ke,{clientThreadId:a,gizmoId:d})}),t.jsx(Ae,{}),(s!=null||g!=null)&&!A&&t.jsx(Ne,{conversation:N,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,shouldShowAdultSearchToggle:q&&!Z,children:t.jsxs("div",{className:"relative",children:[t.jsx(Pe,{"aria-label":c.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"}),ce.length>0&&ue&&t.jsx("div",{className:"pointer-events-none absolute inset-0 grid place-items-center",children:t.jsx(we,{size:28,backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10"})})]})}),de&&(s!=null||g!=null)&&t.jsx(ie,{location:"Atlas header"}),e&&t.jsx(us,{clientThreadId:a})]})]})}const us=l=>{"use forget";const e=$.c(9),{clientThreadId:o}=l,a=F(),i=ns();ae.markStart("LoginOrProfileMenu"),ae.markRendered("LoginOrProfileMenu");let n;e[0]!==a||e[1]!==i?(n=!i&&!U(a)&&t.jsx(gs,{}),e[0]=a,e[1]=i,e[2]=n):n=e[2];let s;e[3]!==o||e[4]!==i?(s=!i&&t.jsx(rs,{clientThreadId:o}),e[3]=o,e[4]=i,e[5]=s):s=e[5];let c;return e[6]!==n||e[7]!==s?(c=t.jsxs(t.Fragment,{children:[n,s]}),e[6]=n,e[7]=s,e[8]=c):c=e[8],c};function ie(l){"use forget";const e=$.c(19),{location:o,className:a,testId:i,to:n,state:s}=l,c=F(),b=W(),j=Ee();let d;e[0]!==b?(d=b.formatMessage({id:"OFyxqj",defaultMessage:"New chat"}),e[0]=b,e[1]=d):d=e[1];const h=d;let f;e[2]!==a?(f=as("flex",a),e[2]=a,e[3]=f):f=e[3];let m;e[4]!==c||e[5]!==o?(m=N=>{ze(c,N,{location:o})},e[4]=c,e[5]=o,e[6]=m):m=e[6];const x=n!=null?n:"/",g=s!=null?s:j;let u;e[7]!==x||e[8]!==g?(u={to:x,state:g},e[7]=x,e[8]=g,e[9]=u):u=e[9];let p;e[10]!==h||e[11]!==m||e[12]!==u||e[13]!==i?(p=t.jsx(J,{onClick:m,icon:He,"aria-label":h,"data-testid":i,as:"link",linkProps:u}),e[10]=h,e[11]=m,e[12]=u,e[13]=i,e[14]=p):p=e[14];let S;return e[15]!==h||e[16]!==f||e[17]!==p?(S=t.jsx(K,{label:h,className:f,children:p}),e[15]=h,e[16]=f,e[17]=p,e[18]=S):S=e[18],S}function bs(l){"use forget";const e=$.c(5),{hideNewChat:o}=l,a=o===void 0?!1:o;if(!ls())return null;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(ds,{}),e[0]=n):n=e[0];let s;e[1]!==a?(s=!a&&t.jsx(ie,{location:"Navigation actions"}),e[1]=a,e[2]=s):s=e[2];let c;return e[3]!==s?(c=t.jsxs("div",{className:"flex items-center",children:[n,s]}),e[3]=s,e[4]=c):c=e[4],c}function ds(){const l=W(),e=is(),o=F(),a=!U(o),i=Be(Ue,Oe,!1,!0);return a||e?null:t.jsx(K,{label:l.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:t.jsx(J,{"aria-label":l.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{oe.setSidebarOpen(!0)},icon:i})})}function gs(l){"use forget";const e=$.c(41);let o;e[0]!==l?(o=l===void 0?{}:l,e[0]=l,e[1]=o):o=e[1];const{callbackUrl:a,skipLoginModal:i}=o,n=i===void 0?!1:i,s=F();let c;e[2]!==s?(c=Te(s),e[2]=s,e[3]=c):c=e[3];const b=c;let j;e[4]!==s?(j=ye(s,hs.signUpCta),e[4]=s,e[5]=j):j=e[5];const d=j;let h;e[6]!==s?(h=_e(s),e[6]=s,e[7]=h):h=e[7];const f=h,m=os.ACCESS_FLOW_ENTRY_POINT_CHAT_HEADER;let x;e[8]!==s?(x=Le(s),e[8]=s,e[9]=x):x=e[9];const g=x;let u;e[10]!==a||e[11]!==s||e[12]!==n?(u=()=>{D(s,L({fallbackScreenHint:"login",callback:C=>{V.logLogInButtonClicked({location:"Chat header",provider:C},m)},skipLoginModal:n!=null?n:!1},a?{callbackUrl:a}:{}))},e[10]=a,e[11]=s,e[12]=n,e[13]=u):u=e[13];const p=u;let S;e[14]!==a||e[15]!==s||e[16]!==n?(S=()=>{D(s,L({fallbackScreenHint:"signup",callback:C=>{V.logSignUpButtonClicked({location:"Chat header",provider:C},m)},skipLoginModal:n!=null?n:!1},a?{callbackUrl:a}:{}))},e[14]=a,e[15]=s,e[16]=n,e[17]=S):S=e[17];const N=S;let P;e[18]!==a||e[19]!==s||e[20]!==n?(P=()=>{D(s,L({fallbackScreenHint:"login_or_signup",callback:C=>{V.logLoginOrSignUpButtonClicked({location:"Chat header",provider:C},m)},skipLoginModal:n!=null?n:!1},a?{callbackUrl:a}:{}))},e[18]=a,e[19]=s,e[20]=n,e[21]=P):P=e[21];const I=P;let w;e[22]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(z,{id:"B1SN7b",defaultMessage:"Log in"}),e[22]=w):w=e[22];let M;e[23]!==p?(M=t.jsx(H,{onClick:p,color:"primary","data-testid":"login-button",children:w},"login"),e[23]=p,e[24]=M):M=e[24];const y=M;let k;e[25]!==g||e[26]!==d?(k=g?t.jsx(z,{id:"LoginModule.createFreeAccount",defaultMessage:"Create a free account"}):t.jsx(z,L({},d)),e[25]=g,e[26]=d,e[27]=k):k=e[27];let E;e[28]!==N||e[29]!==k?(E=t.jsx(H,{color:"secondary",onClick:N,"data-testid":"signup-button",className:"screen-arch:hidden md:screen-arch:flex",children:k},"signup"),e[28]=N,e[29]=k,e[30]=E):E=e[30];const B=E;let v;e[31]!==f?(v=t.jsx(z,L({},f)),e[31]=f,e[32]=v):v=e[32];let A;e[33]!==I||e[34]!==v?(A=t.jsx(H,{color:"primary",onClick:I,"data-testid":"login-or-signup-button",className:"screen-arch:hidden md:screen-arch:flex",children:v},"signup"),e[33]=I,e[34]=v,e[35]=A):A=e[35];const O=A;let _;if(e[36]!==y||e[37]!==O||e[38]!==B||e[39]!==b){const C=b?[O]:[y,B];_=t.jsx("div",{className:"flex items-center justify-center gap-2",children:C}),e[36]=y,e[37]=O,e[38]=B,e[39]=b,e[40]=_}else _=e[40];return _}const hs=me({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Cs as C,ds as E,us as L,ie as N,bs as a,gs as b};
//# sourceMappingURL=kubdgxu3crk3gqem.js.map
