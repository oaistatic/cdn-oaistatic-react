import{r as h,j as s}from"./mw35uwhq4g8r9eam.js";import{ay as _,V as S,P as A,$ as j,a0 as p,a2 as M}from"./d0xa318sl7ywi0za.js";import{S as v}from"./glvtvsqozo9e3cjo.js";import{hy as g,hT as w,hU as O,hV as E,hB as T,hW as C,hX as R,hY as b,hZ as J,h_ as k}from"./g2euln7v5pbm31qa.js";function N(i,r){const{automationId:o,automationTitle:e,automationMessage:y}=h.useMemo(()=>{const c=r.find(n=>n.author.role===_.Assistant),a=c?S.getParentPromptNode(A(i),c.id):null;let t=a==null?void 0:a.message.metadata;if(!(t!=null&&t.real_author_type)){const n=r.find(l=>{var u;return((u=l.metadata)==null?void 0:u.real_author_type)==="automation"});t=n==null?void 0:n.metadata}const m=(t==null?void 0:t.real_author_type)==="automation"?t==null?void 0:t.real_author_id:null,d=t==null?void 0:t.real_author_title;return{automationId:m,automationTitle:d,automationMessage:a==null?void 0:a.message}},[i,r]),{automation:x}=g(o!=null?o:"");return{automationId:o,automation:x,automationTitle:e,automationMessage:y}}function V({clientThreadId:i,messages:r}){var d,n;const{automationId:o,automation:e,automationTitle:y}=N(i,r),c=w(i).isOdysseyMode||r.some(l=>{var u;return(u=l.metadata)==null?void 0:u.n7jupd_message}),a=(d=O(i))==null?void 0:d.value,{isScheduledRun:t}=h.useContext(E),[f,m]=h.useState(!1);return h.useEffect(()=>{o&&j.count(p.JAWBONE,"jawbone_automation_source_header.open")},[o]),o?t?s.jsx("div",{className:"relative my-2 w-full",children:s.jsx(T,{automation:e,fullWidth:!0})}):c?a===M.REALTIME?null:s.jsx(C,{clientThreadId:i,children:s.jsx(R,{children:({isScheduled:l,isScheduledRun:u})=>l&&u&&s.jsx(b,{})})}):s.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[s.jsx(v,{className:"icon-sm"}),s.jsx("button",{onClick:()=>{m(!0)},children:(n=e==null?void 0:e.title)!=null?n:y}),f&&e&&s.jsx(J,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:s.jsx(k,{item:e,source:"chat",onClose:()=>{m(!1)}})})]}):null}export{V as AutomationSourceHeader};
//# sourceMappingURL=dk0xd8ku5yovoyxl.js.map
