import{c as I,a as w,d as A,r as T,j as L,y as b,a9 as O}from"./mw35uwhq4g8r9eam.js";import{cu as U,gB as j,h3 as F,h4 as M,h5 as B}from"./g2euln7v5pbm31qa.js";import{n2 as E,_ as R,D as G}from"./d0xa318sl7ywi0za.js";import{C as Y}from"./ft9n9n4a6jtky5jr.js";import{D as y,i as Q}from"./m07thmwe25i44wu0.js";import"./ht6uzt6gonugd1uu.js";const W={[y.Go]:E.GO,[y.Plus]:E.PLUS,[y.Pro]:E.PRO,[y.SELF_SERVE_BUSINESS]:E.SELF_SERVE_BUSINESS};function $(s){"use forget";const e=I.c(23),{planType:a,promoCode:o,promoCampaign:r}=s,{prepareCheckoutSession:n,navigateToCheckout:u}=U(),i=w(),p=A(),c=!!r,{data:t,isLoading:l}=j(r!=null?r:"",c);let d;e[0]!==c||e[1]!==a||e[2]!==n?(d=async h=>{const{promoCode:m,promoCampaignId:C}=h;return await n({plan_name:W[a],promo_code:m!=null?m:void 0,promo_campaign:C?{promo_campaign_id:C,is_coupon_from_query_param:c}:void 0})},e[0]=c,e[1]=a,e[2]=n,e[3]=d):d=e[3];const k=d;let g;e[4]!==i.search||e[5]!==p||e[6]!==u||e[7]!==a||e[8]!==k?(g=async h=>{const{promoCode:m,promoCampaignId:C}=h;try{R.logEventWithStatsig("Direct Purchase Social Sku: Checkout Session Create Start","direct_purchase_social_sku_checkout_session_create_start",{plan_type:a});const v=await k({promoCode:m,promoCampaignId:C});R.logEventWithStatsig("Direct Purchase Social Sku: Checkout Session Create Success","direct_purchase_social_sku_checkout_session_create_success",{plan_type:a}),await u(v,{searchParams:i.search,state:{directPurchasePlanType:a}})}catch(v){const N=v,x=N instanceof Error?N:new Error("Failed to start checkout");R.logEventWithStatsig("Direct Purchase Social Sku: Checkout Session Create Failure","direct_purchase_social_sku_checkout_session_create_failure",{plan_type:a}),G.addError(x,{feature:"direct_purchase_checkout_redirect",plan_type:a}),p({pathname:"/",search:i.search,hash:F},{replace:!0})}},e[4]=i.search,e[5]=p,e[6]=u,e[7]=a,e[8]=k,e[9]=g):g=e[9];const _=g;let P;e[10]!==_||e[11]!==l||e[12]!==o||e[13]!==(t==null?void 0:t.coupon)||e[14]!==(t==null?void 0:t.state)?(P=()=>{if(l)return;let h=!1;return Promise.resolve().then(()=>{h||_({promoCode:o,promoCampaignId:(t==null?void 0:t.state)==="eligible"?t==null?void 0:t.coupon:void 0})}),()=>{h=!0}},e[10]=_,e[11]=l,e[12]=o,e[13]=t==null?void 0:t.coupon,e[14]=t==null?void 0:t.state,e[15]=P):P=e[15];let S;e[16]!==_||e[17]!==l||e[18]!==c||e[19]!==o||e[20]!==t?(S=[_,l,t,o,c],e[16]=_,e[17]=l,e[18]=c,e[19]=o,e[20]=t,e[21]=S):S=e[21],T.useEffect(P,S);let f;return e[22]===Symbol.for("react.memo_cache_sentinel")?(f=L.jsx("div",{className:"bg-token-bg-primary flex h-full w-full items-center justify-center",children:L.jsx(Y,{})}),e[22]=f):f=e[22],f}function H(){"use forget";var p,c;const s=I.c(7),e=O(),a=w(),o=e.planType;if(!Q(o))throw new Response("Not Found",{status:404});let r,n;if(s[0]!==a.search){const t=new URLSearchParams(a.search);r=(p=t.get(M))!=null?p:void 0,n=(c=t.get(B))!=null?c:void 0,s[0]=a.search,s[1]=r,s[2]=n}else r=s[1],n=s[2];const u=n;let i;return s[3]!==o||s[4]!==u||s[5]!==r?(i=L.jsx($,{planType:o,promoCode:r,promoCampaign:u}),s[3]=o,s[4]=u,s[5]=r,s[6]=i):i=s[6],i}const X=b(H);export{X as default};
//# sourceMappingURL=leyklqyrqdhvny1k.js.map
