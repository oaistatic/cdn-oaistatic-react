var j=Object.defineProperty,E=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var p=(e,s,n)=>s in e?j(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,d=(e,s)=>{for(var n in s||(s={}))w.call(s,n)&&p(e,n,s[n]);if(h)for(var n of h(s))A.call(s,n)&&p(e,n,s[n]);return e},x=(e,s)=>E(e,P(s));import{r as l,j as t}from"./mw35uwhq4g8r9eam.js";import{u as M,J as G,M as I,V as N,ay as b,ja as _,iS as k}from"./d0xa318sl7ywi0za.js";import{ak as S,al as v,am as T,an as y,ao as R,ap as U,aq as V,ar as F}from"./g2euln7v5pbm31qa.js";import{g as K}from"./of0vtq1gcmd3mc3z.js";const B=l.createContext(void 0);function L(e){var i;const s=N.getConversationTurns(e),n=s.findIndex(a=>a.role===b.Assistant);if(n===-1)return;const r=s[n];for(let a=0;a<r.messageGroups.length;a++)if(r.messageGroups[a].type===_.SearchGPTQuery){const o=r.messageGroups.slice(a+1).find(({type:c})=>c===_.Text);if(o==null)return;const m=k(o.messages[0]);if(((i=m==null?void 0:m[0])==null?void 0:i.type)==="navigation")return{turnIndex:n,navigationCitation:m[0],message:o.messages[0]}}}function C(e,s){var r,i;if(s==null||e==null)return e;const n=new Set(e.domains.map(a=>a.url));return x(d({},e),{domains:[...e.domains,...s.domains.filter(a=>!n.has(a.url))],safe_urls:[...(r=e.safe_urls)!=null?r:[],...(i=s.safe_urls)!=null?i:[]]})}function J({query:e}){return t.jsx(S,{horizontalPadding:"standard",children:t.jsx(v,{className:T({isUserTurn:!0}),children:t.jsx("div",{className:K(!0),children:t.jsx(y,{containsImagesOrAttachments:!1,children:t.jsx(R,{text:e})})})})})}function H({clientThreadId:e,prefetchNavlink:s,clearPrefetchNavlink:n}){var c;const r=l.use(s),i=M(),a=G(i,"1032814809");l.useEffect(()=>{window.__oai_SSR_NAVLINK&&U.logEvent("Search Tool Page Load Time To Fast Nav SSR",{server_timing:r==null?void 0:r.timing},window.__oai_SSR_NAVLINK)},[]),l.useEffect(()=>{r==null&&n()},[r,n]);const u=l.useMemo(()=>r==null?null:x(d({},r.navlink),{domains:r.navlink.domains.map(f=>{var g;return x(d({},f),{subtitle:(g=f.subtitle)!=null?g:f.domain})})}),[r]),o=I(e,L),m=l.useMemo(()=>C(u,o==null?void 0:o.navigationCitation),[o,u]);return r==null||m==null?null:t.jsxs("div",{children:[t.jsx("div",{className:"mt-10",children:t.jsx(S,{horizontalPadding:"standard",children:t.jsxs(v,{className:T({isUserTurn:!1}),children:[t.jsx(V,{clientThreadId:e,turnIndex:(c=o==null?void 0:o.turnIndex)!=null?c:2,nextMessage:o==null?void 0:o.message,navigationCitation:m}),a?t.jsxs("div",{className:"text-token-text-secondary relative -top-2 flex justify-end gap-2 font-mono text-xs",children:[t.jsxs("div",{elementtiming:"navlink",children:["server: ",r.timing,"ms"]}),t.jsx(q,{})]}):null]})})}),t.jsx(F,{scriptSrc:"requestAnimationFrame(()=>window.__oai_SSR_NAVLINK=window.__oai_SSR_NAVLINK||performance.now());"})]})}function q(){const[e,s]=l.useState(null);return l.useEffect(()=>{const n=new PerformanceObserver(r=>{r.getEntries().forEach(i=>{if(i.identifier==="navlink"){const a=i.renderTime;s(u=>u==null?a:u)}})});return n.observe({type:"element",buffered:!0}),()=>n.disconnect()},[]),e==null?null:t.jsxs("span",{children:["render: ",e,"ms"]})}export{B as P,J as a,H as b};
//# sourceMappingURL=c340ncgh31fwqkpk.js.map
