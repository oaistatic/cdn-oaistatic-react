var te=Object.defineProperty;var A=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var H=(r,e,i)=>e in r?te(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,J=(r,e)=>{for(var i in e||(e={}))Q.call(e,i)&&H(r,i,e[i]);if(A)for(var i of A(e))q.call(e,i)&&H(r,i,e[i]);return r};var U=(r,e)=>{var i={};for(var t in r)Q.call(r,t)&&e.indexOf(t)<0&&(i[t]=r[t]);if(r!=null&&A)for(var t of A(r))e.indexOf(t)<0&&q.call(r,t)&&(i[t]=r[t]);return i};import{c as G,j as _,r as K,k as ie,y as re,a1 as ne,d as oe,u as se,ae as z}from"./mw35uwhq4g8r9eam.js";import{cx as ae,D as le,oS as ce,u as Z,J as ee,j0 as de,g as me,m as ue,cD as pe,M as X,aa as ge,T as Y}from"./d0xa318sl7ywi0za.js";import{it as fe,r as he,a as ve,g as Ee}from"./g2euln7v5pbm31qa.js";import{R as Ie}from"./kcex4rnzaebpwef1.js";import{p as ke,W as Be,a as Ce}from"./g09bc254e08nnz5p.js";import{u as Se}from"./iknugp00locgtve5.js";import{r as xe}from"./kbj1b07s2z6vxqkg.js";import{u as We,a as Pe,W as _e,b as we,E as Te}from"./oscko8pqsql06nny.js";import{n as De,s as Re}from"./pdvvrej9bku0hg0c.js";import"./iakh052vusklquwn.js";import"./i1lnixtvuwzfguvz.js";import"./gy1lpvuoewmzh42c.js";import"./h4yh1661qhhbu5v5.js";import"./hu1bt0oauegdhua6.js";import"./oj9zwxa6l3kpv1x2.js";import"./ohau9tqj1fpdibg0.js";import"./cv4afpu20gjb9dll.js";import"./i693kfbch8smq86y.js";import"./lep2wptoy14cfe2w.js";import"./mojznsm1zll43nmv.js";import"./l57v5lxkpqo9adh3.js";import"./b9m0h1g72p9whl0h.js";import"./f76gy0b8ieo4s693.js";import"./obs7vyhux2j83kng.js";import"./bwg0lbtx0n9f11bn.js";import"./mzril1pzbts3gz7n.js";import"./e0d69s7tsq37k47r.js";import"./ehv2vkvc6wjiqj3r.js";import"./ce3hgmw4iyyhicud.js";import"./c8dilzb1umlthpuq.js";import"./e1t6unu3olubcgkg.js";import"./h1em0bjkpkjv8ykw.js";import"./bzxitjpdx1z6hpbp.js";import"./t4u99i3y1xwqt0zb.js";import"./d4h15g77ywnnjdmi.js";import"./h7tudz5piofu9rem.js";import"./ddina39kz3r81pp7.js";import"./kl7c6054usfnqmd4.js";import"./k97n0y6ba9c9h39c.js";import"./bhvk929w0gb4odci.js";import"./bhdyjo7ybkqcriof.js";import"./o4syhzyam6fzccjl.js";function ye(r,e){var a;if(!r||!e)return null;const i=Se().use(xe).use(Ie),t=i.parse(r);i.runSync(t);const n=t.children.filter(fe).find(s=>{var u,d;const v=(d=(u=s.data)==null?void 0:u.hProperties)==null?void 0:d.id;return s.name===ae&&v===e});return!n||!((a=n.data)!=null&&a.hProperties)?(le.addError(new Error("Writing block node not found"),{writingBlockId:e}),null):{id:String(n.data.hProperties.id),index:Number(n.data.hProperties.index),variant:ke(String(n.data.hProperties.variant)),title:n.data.hProperties.title?String(n.data.hProperties.title):void 0,recipient:n.data.hProperties.recipient?String(n.data.hProperties.recipient):void 0,content:String(n.data.hProperties.content)}}function Ne(r){"use forget";var s;const e=G.c(8);let i,t;e[0]!==r?(s=r,{conversation:i}=s,t=U(s,["conversation"]),e[0]=r,e[1]=i,e[2]=t):(i=e[1],t=e[2]);let n;e[3]!==t?(n=_.jsx(be,J({},t)),e[3]=t,e[4]=n):n=e[4];let a;return e[5]!==i||e[6]!==n?(a=_.jsx(ce.Provider,{value:i,children:n}),e[5]=i,e[6]=n,e[7]=a):a=e[7],a}function be(r){"use forget";const e=G.c(45),{clientThreadId:i,messageId:t,writingBlockId:n,originalContent:a,title:s,recipient:v,index:u,variant:d}=r,l=Z();let E;e[0]!==l?(E=ee(l,"669593727"),e[0]=l,e[1]=E):E=e[1];const I=E,{writingBlock:w,contentReferences:k,autosaveStatus:B,flushPendingChanges:p,handleOnChange:g,messageRef:C,editorViewRef:m,analyticsMetadata:f,hasBeenEdited:S,isWritingBlockEditingAllowed:o,setDirty:h}=We({messageId:t,id:n,originalContent:a,index:u,variant:d,title:s,recipient:v,onSave:()=>{De({messageId:t,writingBlock:c,clientThreadId:i})}}),c=w,x=s!=null?s:"",W=v!=null?v:"";let P;e[2]!==i||e[3]!==p||e[4]!==g||e[5]!==o||e[6]!==t||e[7]!==h||e[8]!==x||e[9]!==W||e[10]!==c?(P={writingBlock:c,clientThreadId:i,messageId:t,onChange:g,setDirty:h,flushPendingChanges:p,isStreaming:!1,streamingTitle:x,streamingRecipient:W,isInlineWritingBlockEditEnabled:o},e[2]=i,e[3]=p,e[4]=g,e[5]=o,e[6]=t,e[7]=h,e[8]=x,e[9]=W,e[10]=c,e[11]=P):P=e[11];const L=Pe(P);let T;e[12]!==i||e[13]!==t||e[14]!==c?(T=()=>{Re({messageId:t,writingBlock:c,clientThreadId:i})},e[12]=i,e[13]=t,e[14]=c,e[15]=T):T=e[15];let D;e[16]!==i||e[17]!==t||e[18]!==c?(D=[t,c,i],e[16]=i,e[17]=t,e[18]=c,e[19]=D):D=e[19],K.useEffect(T,D);const R=d===Be.EMAIL,[M]=ie();let y;e[20]!==M?(y=de(M.get("header"),!0),e[20]=M,e[21]=y):y=e[21];const O=y,j=R?Te:void 0;let N;e[22]===Symbol.for("react.memo_cache_sentinel")?(N={shouldBlockDialogEscapeKeyDown:!1,setShouldBlockDialogEscapeKeyDown:Le,isFullscreenDialogOpen:!1,setIsFullscreenDialogOpen:Ae},e[22]=N):N=e[22];const F=R?L.headerLabel:void 0,$=R?L.emailSendButton:void 0,V=R?L.fullScreenEmailHeader:void 0;let b;return e[23]!==f||e[24]!==B||e[25]!==i||e[26]!==k||e[27]!==m||e[28]!==j||e[29]!==p||e[30]!==g||e[31]!==S||e[32]!==u||e[33]!==I||e[34]!==o||e[35]!==t||e[36]!==C||e[37]!==h||e[38]!==O||e[39]!==F||e[40]!==$||e[41]!==V||e[42]!==s||e[43]!==c?(b=_.jsx(Ce.Provider,{value:N,children:_.jsx("div",{className:"bg-token-bg-primary h-full w-full",children:_.jsx("div",{className:_e,children:_.jsx(we,{editorViewRef:m,analyticsMetadata:f,showHeader:O,primaryLabel:F,primaryAction:$,subHeader:V,hasBeenEdited:S,autosaveStatus:B,clientThreadId:i,messageId:t,isInlineWritingBlockExportEnabled:I,isWritingBlockFocusedModeEnabled:!0,shouldShowWritingBlockCanvasEdit:!1,title:s,index:u,messageRef:C,isInlineWritingBlockEditEnabled:o,writingBlock:c,onChange:g,isStreaming:!1,setDirty:h,flushPendingChanges:p,contentReferences:k,permalink:!0,editorWrapperClassName:j})})})}),e[23]=f,e[24]=B,e[25]=i,e[26]=k,e[27]=m,e[28]=j,e[29]=p,e[30]=g,e[31]=S,e[32]=u,e[33]=I,e[34]=o,e[35]=t,e[36]=C,e[37]=h,e[38]=O,e[39]=F,e[40]=$,e[41]=V,e[42]=s,e[43]=c,e[44]=b):b=e[44],b}function Ae(){}function Le(){}function Me(r){var n,a,s;const e=(n=r.conversationId)==null?void 0:n.trim();if(!e)throw z("/");const i=(a=r.messageId)==null?void 0:a.trim(),t=(s=r.writingBlockId)==null?void 0:s.trim();if(!i||!t)throw z("/c/".concat(e));return{conversationId:e,messageId:i,writingBlockId:t}}const wt=r=>(he(),Me(r.params)),Tt=re(function(){"use forget";const e=G.c(34),{conversationId:i,messageId:t,writingBlockId:n}=ne(),a=Z(),s=oe(),v=i;let u;e[0]!==a||e[1]!==v?(u=me(a,v),e[0]=a,e[1]=v,e[2]=u):u=e[2];const d=u,l=d.id;let E;e[3]===Symbol.for("react.memo_cache_sentinel")?(E={kind:ue.PrimaryAssistant},e[3]=E):E=e[3],ve(d.id,E);const I=pe();let w;e[4]!==a?(w=ee(a,"1101084612"),e[4]=a,e[5]=w):w=e[5];const k=w,B=se();let p,g;e[6]!==l||e[7]!==B?(p=()=>(Y.retainThread(l),()=>{setTimeout(()=>{B.invalidateQueries(Ee({clientThreadId:l}))},0),Y.releaseThread(l)}),g=[l,B],e[6]=l,e[7]=B,e[8]=p,e[9]=g):(p=e[8],g=e[9]),K.useEffect(p,g);let C;e[10]!==t?(C=W=>{var P;return t?(P=W==null?void 0:W.tree.getNodeIfExists(t))==null?void 0:P.message:void 0},e[10]=t,e[11]=C):C=e[11];const m=X(d==null?void 0:d.id,C),f=X(d==null?void 0:d.id,Oe);let S;e[12]!==m||e[13]!==n?(S=m?ye(ge(m),n):null,e[12]=m,e[13]=n,e[14]=S):S=e[14];const o=S;let h,c;if(e[15]!==l||e[16]!==I||e[17]!==k||e[18]!==m||e[19]!==s||e[20]!==f||e[21]!==o?(h=()=>{if(!(f!=null&&f.isLoading)){if(!l||!k){s("/",{replace:!0});return}if(f&&!m||I||m&&!o){s("/c/".concat(l),{replace:!0});return}}},c=[f,m,l,s,k,I,o],e[15]=l,e[16]=I,e[17]=k,e[18]=m,e[19]=s,e[20]=f,e[21]=o,e[22]=h,e[23]=c):(h=e[22],c=e[23]),K.useEffect(h,c),!m||!o)return null;let x;return e[24]!==l||e[25]!==d||e[26]!==t||e[27]!==o.content||e[28]!==o.index||e[29]!==o.recipient||e[30]!==o.title||e[31]!==o.variant||e[32]!==n?(x=_.jsx(Ne,{conversation:d,clientThreadId:l,messageId:t,writingBlockId:n,originalContent:o.content,index:o.index,variant:o.variant,title:o.title,recipient:o.recipient}),e[24]=l,e[25]=d,e[26]=t,e[27]=o.content,e[28]=o.index,e[29]=o.recipient,e[30]=o.title,e[31]=o.variant,e[32]=n,e[33]=x):x=e[33],x});function Oe(r){return r}export{wt as clientLoader,Tt as default};
//# sourceMappingURL=lsvu1kbmy51hv72w.js.map
