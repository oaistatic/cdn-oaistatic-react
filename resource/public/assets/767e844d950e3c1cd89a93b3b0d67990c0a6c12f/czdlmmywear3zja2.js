const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fabc5eov4knbmh55.js","assets/mw35uwhq4g8r9eam.js"])))=>i.map(i=>d[i]);
var Ae=Object.freeze,Ie=Object.defineProperty,xs=Object.defineProperties;var gs=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var fs=Object.prototype.hasOwnProperty,hs=Object.prototype.propertyIsEnumerable;var Ue=(s,a,t)=>a in s?Ie(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,k=(s,a)=>{for(var t in a||(a={}))fs.call(a,t)&&Ue(s,t,a[t]);if(Be)for(var t of Be(a))hs.call(a,t)&&Ue(s,t,a[t]);return s},U=(s,a)=>xs(s,gs(a));var te=(s,a)=>Ae(Ie(s,"raw",{value:Ae(a||s.slice())}));import{j as e,M as n,n as f,r as b,h as H,u as de,_ as js,e as Ge,b as ys}from"./mw35uwhq4g8r9eam.js";import{dl as r,cB as Ye,la as ks,u as X,J as vs,aB as Q,dp as q,H as ws,dn as Ms,al as De,h4 as ue,be as bs,s0 as g,s9 as Y,qR as B,sa as Ve,p as He,e7 as Ns,dz as _s,qN as Ps,fH as Z,qO as Ss,qP as Ts,n as Rs,h7 as Cs,sb as Ee,sc as oe,cF as me,f7 as C,sd as Ls,cw as Fe,aA as D,qM as As,fK as Bs,jf as Us,qQ as Is,R as Xe}from"./d0xa318sl7ywi0za.js";import{jo as Es,aB as ze,e6 as Fs,bv as ce,be as zs,as as j,ew as Je,bJ as Os,gU as Ws,B as qs,hQ as Qs,bs as ie,hR as Ks,br as Gs,ec as Ys,i7 as Ds,e8 as Vs}from"./g2euln7v5pbm31qa.js";import{C as Hs}from"./jy8ajjjwfhv86rlc.js";import{S as re}from"./bymjh2zr7tar40cn.js";function $e(s){return s==r.User||s==r.Group?r.Private:s==r.WorkspaceLink?r.Workspace:s}function I(s,a){return s=$e(s),a===void 0?!1:a.some(t=>t.recipient===s&&t.allowed)}function pe(s,a){if(a===void 0)return[];s=$e(s);const t=a.find(c=>c.recipient===s);return t==null?void 0:t.moderated_fields}function ne(s,a){const t=pe(s,a);return t&&t.length>0}var Qe;const Oe=Ye.a(Qe||(Qe=te(["bold underline"])));var Ke;const Xs=Ye.textarea(Ke||(Ke=te(["w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32"])));var Ze=(s=>(s[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s))(Ze||{}),es=(s=>(s[s.None=0]="None",s[s.PublishBlocked=1]="PublishBlocked",s[s.RemovedFromMarketplace=2]="RemovedFromMarketplace",s[s.RemovedFromPublic=3]="RemovedFromPublic",s[s.RemovedFromPrivate=4]="RemovedFromPrivate",s[s.Recategorized=5]="Recategorized",s))(es||{});function fa(s){var c;if(!s)return;const a=((c=s.gizmo.appeal_info)==null?void 0:c.state.kind)==="appeal_sent",t=Js(s.gizmo.share_recipient,s.gizmo.sharing_targets);return{sharingRecipient:s.gizmo.share_recipient,categories:s.gizmo.categories,gizmoId:s.gizmo.id,moderationType:t,sharingTargets:s.gizmo.sharing_targets,showModal:a?2:t!==0?1:0}}const We={[r.User]:r.Private,[r.Group]:r.Private,[r.WorkspaceLink]:r.Workspace};function Js(s,a=[]){const t=new Set(a.filter(u=>u.allowed).map(u=>u.recipient));if(!s||(s in We&&(s=We[s]),t.has(s)))return 0;const c=t.has(r.Private)||t.has(r.Workspace),l=t.has(r.Link)||t.has(r.Marketplace);return s===r.Marketplace&&l?2:!l&&c?3:4}function qe(s){switch(s){case 0:case 1:return f({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case 2:return f({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case 3:return f({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case 4:return f({id:"gizmo.appeals.removedFromPrivateTitle",defaultMessage:"Your GPT has been removed from private view"});case 5:return f({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"})}}function $s(s){switch(s){case"profile_picture":return f({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return f({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return f({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return f({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return f({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return f({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return f({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return f({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return f({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"GPT Content"})}}function Zs(s){switch(s){case r.Private:case r.Workspace:return f({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Link:return f({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Marketplace:return f({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:ks(s)}}function ss({sharingRecipient:s,moderatedFields:a,appealAvailable:t}){const c=a.length;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(n,U(k({},Zs(s)),{values:{usagePolicyLink:l=>e.jsx(Oe,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:l})}}))," ",c>0&&e.jsx(n,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:"{numModeratedFields, plural,\n              one {See below for the specific issue:}\n              other {See below for the specific issues:}\n            }",values:{numModeratedFields:c}})]}),c>0&&(a==null?void 0:a.map(l=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:e.jsx(n,k({},$s(l.name)))}),e.jsx("ul",{className:"list-disc ps-5",children:l.reasons.map(u=>e.jsxs("li",{children:[u.description," ",u.link?e.jsx(Oe,{href:u.link,target:"_blank",rel:"noreferrer",children:e.jsx(n,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},u.description))})]}))),t&&e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}function ea({gizmoId:s,sharingRecipient:a,categories:t,moderationType:c,sharingTargets:l,appealAvailable:u,onClose:m,onAppealSubmitted:v}){var F;const h=H(),[T,E]=b.useState(""),[x,N]=b.useState(0),[R,_]=b.useState(!1),w=de(),L=async()=>{_(!0);try{await ue.postGizmoAppeal(w,s,T,a,t),N(2),v==null||v()}finally{_(!1)}},o=pe(a,l),M=(F=o==null?void 0:o.length)!=null?F:0,d=X(),G=De(d);if(M==0&&(G==null?void 0:G.isEnterprisey()))return e.jsx(Q,{testId:"modal-gizmo-appeal-available",title:h.formatMessage(qe(c)),isOpen:!0,onClose:m,showCloseButton:!0,type:"warning",primaryButton:e.jsx(q.Button,{color:"primary",onClick:m,children:e.jsx(n,{id:"wEsAOU",defaultMessage:"OK"})}),children:e.jsx("p",{className:"text-sm",children:e.jsx(n,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(x){case 0:return e.jsx(Q,{testId:"modal-gizmo-appeal-available",title:h.formatMessage(qe(c)),isOpen:!0,onClose:m,showCloseButton:!0,primaryButton:e.jsx(q.Button,{color:"primary",onClick:m,children:e.jsx(n,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:u?e.jsx(q.Button,{onClick:()=>N(1),children:e.jsx(n,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx(ss,{sharingRecipient:a,moderatedFields:o!=null?o:[],appealAvailable:u})})});case 1:return e.jsx(Q,{testId:"modal-gizmo-appeal-form",title:h.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:m,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:e.jsx(q.Button,{color:"primary",onClick:L,disabled:R||T.trim().length===0,children:e.jsx(n,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:e.jsx(q.Button,{onClick:()=>N(0),children:e.jsx(n,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),e.jsx(Xs,{value:T,onChange:J=>E(J.target.value)})]})});case 2:return e.jsx(e.Fragment,{})}}function sa({onClose:s}){const a=H();return e.jsx(Q,{testId:"modal-gizmo-appeal-submitted",title:a.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:s,showCloseButton:!0,primaryButton:e.jsx(q.Button,{color:"primary",onClick:s,children:e.jsx(n,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx("div",{children:e.jsx(n,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function aa({gizmoId:s,onClose:a}){const{data:t}=ws(s,!0),c=de(),l=async()=>{await ue.postGizmoCancelAppeal(c,s)};return e.jsx(Q,{testId:"modal-gizmo-appeal-sent",isOpen:!0,onClose:Ms,primaryButton:e.jsx(q.Button,{color:"primary",onClick:()=>{l(),a==null||a()},children:e.jsx(n,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("h2",{className:"text-lg font-semibold",children:e.jsx(n,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:t==null?void 0:t.gizmo.display.name}})})]})})}function ha({appealState:s,onAppealClose:a,onAppealSubmitted:t}){const c=X(),l=vs(c,"4226692983"),[u,m]=b.useState(!1);return u?e.jsx(sa,{onClose:()=>{m(!1),t==null||t()}}):e.jsxs(e.Fragment,{children:[(s==null?void 0:s.showModal)==2&&e.jsx(aa,{gizmoId:s.gizmoId,onClose:a}),(s==null?void 0:s.showModal)==1&&e.jsx(ea,{gizmoId:s.gizmoId,sharingRecipient:s.sharingRecipient,categories:s.categories,moderationType:s.moderationType,sharingTargets:s.sharingTargets,appealAvailable:l,onClose:()=>a==null?void 0:a(),onAppealSubmitted:()=>m(!0)})]})}const as=bs(()=>js(()=>import("./fabc5eov4knbmh55.js"),__vite__mapDeps([0,1])).then(s=>s.DirectorySyncResourceManagedIndication)),ta=()=>[B,Y,Ls];function ts(s,a){return s.type===g.USER?s.user_id===a.user_id:s.type===g.GROUP?s.group_id===a.group_id:s.type===g.EMAIL?a.type===g.EMAIL&&s.user_email.toLowerCase()===a.user_email.toLowerCase():s.type===a.type}const ia={[g.USER]:r.User,[g.GROUP]:r.Group,[g.WORKSPACE]:r.Workspace,[g.ALL]:r.Marketplace};function is(s){const a=ia[s.type];if(!a)throw new Error("Unknown sharing subject type: "+s.type);return U(k({},s),{type:a})}function ra({gizmo:s,publishedGizmo:a,updateGizmo:t,promoteGizmo:c,appealGizmo:l,setAppealState:u,showActionsModal:m,shareOnly:v,onClose:h,workspaceOwner:T=!1}){var we,Me,be,Ne,_e,Pe,Se,Te,Re;const E=X(),x=H(),N=He(),R=Ns(),_=(Me=(we=R==null?void 0:R.data)==null?void 0:we.name)!=null?Me:"your workspace",w=_s(),L=Ps(),[o,M]=b.useState(void 0);b.useEffect(()=>{var i;if(o==null)if(a!=null&&a.gizmo.display.categories&&(a==null?void 0:a.gizmo.display.categories.length)>0){const p=(i=L.data)==null?void 0:i.categories.find(A=>A.id===(a==null?void 0:a.gizmo.display.categories[0]));p&&M(p)}else L.data!=null&&M(L.data.categories[L.data.categories.length-1])},[L.data,o,a]);const[d,G]=b.useState((be=s.sharingRecipient)!=null?be:r.Private),[y,F]=b.useState((_e=(Ne=s.sharing)==null?void 0:Ne.subjects)!=null?_e:[]),[J,ls]=b.useState(null),[fe,he]=b.useState(!1),ee=b.useRef(null),je=b.useRef(y.length);b.useEffect(()=>{y.length>je.current&&requestAnimationFrame(()=>{var i;(i=ee.current)==null||i.scrollTo({top:ee.current.scrollHeight,behavior:"smooth"})}),je.current=y.length},[y]);const os=b.useCallback(()=>{var i;return!Z((i=s.sharing)==null?void 0:i.subjects,y)||s.sharingRecipient!==d},[s.sharing,s.sharingRecipient,d,y]),z=de(),ye=Ss(s,d,(Pe=o==null?void 0:o.id)!=null?Pe:void 0),cs=ye.includes(Ts.MissingPublicActionPrivacyPolicyURL),se=s.tools.find(i=>i.type===Rs.JIT_PLUGIN&&!i.metadata.privacy_policy_url);if(J)return e.jsx(ns,{publishedGizmo:J,sharing:{recipient:d,subjects:y},workspaceName:_,onClose:h});function ds(i){y.find(p=>ts(p,i))||F([...y,i])}const P=Ve(y);function ae(i){const p=y.filter(A=>[g.WORKSPACE,g.ALL].indexOf(A.type)===-1);i!=null&&p.push(i),F(p)}function us(i){switch(G(i),i){case r.Marketplace:case r.Link:ae({type:g.ALL,capabilities:B});break;case r.Workspace:case r.WorkspaceLink:ae({type:g.WORKSPACE,capabilities:B});break;default:ae(null)}}function ke(i){P!=null&&F(y.map(p=>p===P?U(k({},p),{capabilities:i}):p))}function ms(i,p,A){return i.type===g.USER&&i.user_id.indexOf("__")===-1?U(k({},i),{user_id:i.user_id+"__"+(R==null?void 0:R.getWorkspaceId())}):i}async function ps(i,p){var K,Ce;if(fe)return;if(i&&!p)throw new Error("Cannot share a gizmo that hasn't been promoted before");if(!o)return;he(!0);let O=y.map(ms).map(is);if(O=Is(d,O,(K=P==null?void 0:P.capabilities)!=null?K:B),T)return!R||!p?(N.warning("Unable to change sharing settings"),h()):(await Xe.safePost("/accounts/{account_id}/gpts/{gizmo_id}/share",{parameters:{path:{account_id:R.id,gizmo_id:p}},requestBody:{sharing:O}}),N.success(x.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),z.invalidateQueries({queryKey:["workspace"]}),h());if(i){if(!p||!a)throw new Error("No gizmo ID to share");try{const S={sharing:O};o&&(S.categories=[o.id]);const $=await ue.shareGizmo(p,S);$.error?ne(d,$.sharing_targets)?(u==null||u({gizmoId:a.gizmo.id,sharingRecipient:d,categories:a.gizmo.display.categories,moderationType:es.PublishBlocked,sharingTargets:$.sharing_targets,showModal:Ze.AppealAvailable}),h()):N.warning(x.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(z.setQueryData(["gizmo",{gizmoId:a.gizmo.id},{draft:!1}],Le=>$.resource),t==null||t(Le=>U(k({},Le),{sharingRecipient:d})),N.success(x.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),h())}catch(S){return N.warning(x.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),h()}}else{if(c){const S=await c({subjects:O,recipient:d},o.id);p||(p=S==null?void 0:S.gizmo.id),ls(S!=null?S:null),t==null||t({liveVersion:(Ce=S==null?void 0:S.gizmo.live_version)!=null?Ce:void 0})}z.invalidateQueries({queryKey:["gizmo",{gizmoId:p}]})}he(!1),z.invalidateQueries({queryKey:["gizmos"]}),z.refetchQueries({queryKey:["gizmos","discovery"]}),z.refetchQueries({queryKey:["gizmo",{gizmoId:p}]}),z.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:p}]}),z.invalidateQueries({queryKey:["workspace"]}),t==null||t({sharing:{recipient:d,subjects:y},sharingRecipient:d},!1)}const ve=!a||oa(a.gizmo.author.user_id.split("__")[0],w==null?void 0:w.id);return e.jsx(Q,{testId:"modal-share-gizmo",type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:h,primaryButton:ne(d,s.sharingTargets)?e.jsx(D,{onClick:()=>l(d,o==null?void 0:o.id),children:e.jsx(n,{id:"HRzqKK",defaultMessage:"Appeal"})}):e.jsx(D,{onClick:()=>ps(v,a==null?void 0:a.gizmo.id),loading:fe,disabled:ye.length>0||!I(d,s.sharingTargets),children:v?e.jsx(n,{id:"BEKjVh",defaultMessage:"Save"}):e.jsx(n,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:e.jsxs(e.Fragment,{children:[os()&&e.jsx("div",{className:"text-token-text-secondary absolute start-6 bottom-8 text-sm",children:e.jsx(n,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),a&&e.jsx(D,{color:"secondary",onClick:i=>Je(E,a,N,i,x.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:x.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(la,{onAdd:i=>ds(i),publishedGizmo:a}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"bNQXcV",defaultMessage:"Share with..."})}),e.jsxs("div",{ref:ee,className:"max-h-[200px] space-y-2 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx("div",{className:"shrink-0 grow-0 self-start",children:ve?e.jsx(Cs,{user:w}):e.jsx(Ee,{name:(Se=a.gizmo.author.display_name)!=null?Se:"User",initialsCount:2})}),e.jsx("div",{className:"grow text-base font-semibold",children:ve?e.jsxs("div",{className:"flex flex-col",children:[e.jsx(n,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:w==null?void 0:w.name}}),e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:w==null?void 0:w.email})]}):e.jsx(n,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:a.gizmo.author.display_name}})})]}),y.map((i,p)=>oe(i)&&e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx(Ee,{name:i.type===g.GROUP?i.group_name:"".concat(i.user_name," ").concat(i.user_email),initialsCount:i.type===g.USER?2:1,className:me("shrink-0 grow-0",i.type===g.USER&&"self-start")}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 text-base font-semibold",children:i.type===g.GROUP?i.group_name:i.user_name}),i.type===g.GROUP&&i.is_scim_managed&&e.jsx(as,{})]}),i.type===g.USER&&e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:i.user_email})]}),e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[e.jsx(n,k({},V(i.capabilities))),e.jsx(ce,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[ta().map((A,O)=>e.jsx(le,{capabilities:A,selected:Z(A,i.capabilities),onClick:()=>{F(y.map(K=>K===i?U(k({},K),{capabilities:A}):K))}},O)),e.jsx(C.Separator,{className:"my-2"}),e.jsx(C.Item,{onClick:()=>F(y.filter(A=>A!==i)),color:"danger",icon:zs,children:e.jsx(n,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},p))]}),e.jsx("hr",{className:"border-token-border-medium"}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"uqD7Y8",defaultMessage:"Access"})}),e.jsxs("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[e.jsxs(j.Root,{value:d,onValueChange:i=>us(i),children:[e.jsxs(j.Trigger,{children:[e.jsx(j.Value,{}),e.jsx(j.Icon,{})]}),e.jsx(j.Portal,{children:e.jsxs(j.Content,{children:[e.jsxs(j.Group,{children:[e.jsx(j.Label,{children:e.jsx(n,{id:"YIQwaP",defaultMessage:"Private"})}),d===r.User?e.jsx(j.Item,{value:r.User,children:e.jsx(W,{shareLevel:r.User,workspaceName:_})}):e.jsx(j.Item,{value:r.Private,children:e.jsx(W,{shareLevel:r.Private,workspaceName:_})})]}),e.jsx(j.Separator,{}),e.jsx(Fe,{triggerAs:null,label:x.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:I("workspace",s.sharingTargets),children:e.jsxs(j.Group,{children:[e.jsx(j.Label,{children:_}),e.jsx(j.Item,{value:r.WorkspaceLink,disabled:!I(r.WorkspaceLink,s.sharingTargets)&&!I(r.Workspace,s.sharingTargets),children:e.jsx(W,{shareLevel:r.WorkspaceLink,workspaceName:_})}),e.jsx(j.Item,{value:r.Workspace,disabled:!I("workspace",s.sharingTargets),children:e.jsx(W,{shareLevel:r.Workspace,workspaceName:_})})]})}),e.jsx(j.Separator,{}),e.jsx(Fe,{triggerAs:null,label:x.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:I("marketplace",s.sharingTargets),children:e.jsxs(j.Group,{children:[e.jsx(j.Label,{children:e.jsx(n,{id:"PjY9bi",defaultMessage:"Public"})}),e.jsx(j.Item,{value:r.Link,disabled:!I("link",s.sharingTargets),children:e.jsx(W,{shareLevel:r.Link,workspaceName:_})}),e.jsx(j.Item,{disabled:!I("marketplace",s.sharingTargets),value:r.Marketplace,children:e.jsx(W,{shareLevel:r.Marketplace,workspaceName:_})})]})})]})})]}),d!==r.Private&&d!==r.User&&e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[P==null?e.jsx(n,k({},V(B))):e.jsx(n,k({},V(P.capabilities))),e.jsx(ce,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[e.jsx(le,{onClick:()=>ke(B),capabilities:B,selected:Z(P==null?void 0:P.capabilities,B)}),d!==r.Marketplace&&d!==r.Link&&e.jsx(le,{onClick:()=>ke(Y),capabilities:Y,selected:Z(P==null?void 0:P.capabilities,Y)})]})})]})]}),cs&&e.jsx("div",{className:"text-xs text-red-500",children:e.jsx(n,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:i=>e.jsx("button",{onClick:()=>{m==null||m(se==null?void 0:se.metadata.action_id),h()},className:"underline",children:i})}})}),(d===r.Marketplace||d===r.Workspace)&&(I(d,s.sharingTargets)?e.jsx(ge,{gizmo:s,category:o==null?void 0:o.id,categories:(Te=L.data)==null?void 0:Te.categories,onCategoryChange:i=>M(i)}):ne(d,s.sharingTargets)?e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(ss,{sharingRecipient:d,moderatedFields:(Re=pe(d,s.sharingTargets))!=null?Re:[],appealAvailable:!0})}):e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(n,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}const rs=Ge({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},email:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),na=Ge({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function V(s){return s.can_write?f({id:"SubCqD",defaultMessage:"Can edit"}):s.can_view_config?f({id:"V6OjbX",defaultMessage:"Can view settings"}):s.can_read?f({id:"/0j34W",defaultMessage:"Can chat"}):f({id:"x2E8ET",defaultMessage:"Unknown"})}function le({capabilities:s,selected:a,onClick:t}){let c=null;s.can_write?c=Ys:s.can_view_config?c=Ds:s.can_read&&(c=Vs);const l=s.can_write?e.jsx(n,{id:"wKFMT1",defaultMessage:"Edit settings, duplicate, and chat"}):s.can_view_config?e.jsx(n,{id:"Y/J4TZ",defaultMessage:"See settings, duplicate, and chat"}):s.can_read?e.jsx(n,{id:"PvgEQP",defaultMessage:"Chat with this GPT only"}):null;return e.jsxs(C.Item,{className:"flex h-auto flex-row items-center px-3 py-3",onClick:t,icon:c,children:[e.jsxs("div",{className:"me-1 flex grow flex-col",children:[e.jsx("span",{className:"mb-0.5 text-base leading-tight",children:e.jsx(n,k({},V(s)))}),e.jsx("span",{className:"text-token-text-secondary text-xs",children:l})]}),e.jsx(Us,{className:me("icon-lg shrink-0",!a&&"invisible")})]})}const xe={private:re,user:re,group:re,workspace_link:ze,workspace:Fs,link:ze,marketplace:Es};function W({shareLevel:s,workspaceName:a,hasInviteSharing:t=!0}){(s===r.User||s===r.Group)&&(s=r.Private);const c=xe[s];return e.jsxs("div",{className:"flex flex-row items-center gap-3 text-sm",children:[e.jsx(c,{className:"icon text-token-text-secondary"}),e.jsx("div",{className:"pt-px text-start",children:!t&&s===r.Private?e.jsx(n,{id:"vVJhYB",defaultMessage:"Only me"}):e.jsx(n,U(k({},rs[s]),{values:{workspaceName:a}}))})]})}function ns({publishedGizmo:s,sharing:a,workspaceName:t,onClose:c}){var T,E;const l=X(),u=a.recipient,m=xe[u],v=H(),h=He();return e.jsxs(Q,{testId:"modal-gizmo-updated",isOpen:!0,onClose:c,showCloseButton:!0,className:"w-[304px]",title:e.jsx(n,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:e.jsx(D,{onClick:()=>{window.location.href="/g/".concat(s.gizmo.id)},children:e.jsx(n,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:e.jsx(D,{color:"secondary",onClick:x=>Je(l,s,h,x,v.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[e.jsx(ge,{gizmo:{profilePictureUrl:(T=s.gizmo.display.profile_picture_url)!=null?T:void 0,name:s.gizmo.display.name}}),a.subjects.filter(x=>oe(x)).length>0&&e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"/paYH9",defaultMessage:"Shared with"})}),a.subjects&&a.subjects.map((x,N)=>oe(x)&&e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:x.type===g.GROUP?x.group_name:x.user_name}),x.type===g.USER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:x.user_email})]})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,k({},V(x.capabilities)))})]},N))]}),e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"q9XNZ7",defaultMessage:"Access"})}),e.jsxs("div",{className:"ms-[3px] flex flex-row items-center py-3 text-start text-base font-semibold",children:[e.jsx(m,{className:"md:icon-lg me-3 h-6 w-6 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,U(k({},(E=na[u])!=null?E:rs[u]),{values:{workspaceName:t}}))}),(u===r.Workspace||u===r.Marketplace)&&e.jsx("span",{className:"text-token-text-secondary text-xs"})]})]})]})]})}function ge({gizmo:s,category:a,categories:t,onCategoryChange:c}){const{data:l,isLoading:u}=As(),m=t==null?void 0:t.find(v=>v.id===a);return e.jsxs("div",{children:[e.jsxs("div",{className:me("bg-token-main-surface-secondary mb-[1px] flex flex-row items-center space-x-2 p-4",u&&"invisible",t?"rounded-t-lg":"rounded-lg"),children:[e.jsx(Os,{isFirstParty:!1,className:"h-11 w-11",src:s.profilePictureUrl}),e.jsxs("div",{className:"flex grow flex-col space-y-0",children:[e.jsx("span",{className:"text-base font-semibold",children:s.name}),e.jsx(Ws,{builderName:l==null?void 0:l.display_name,builderUrl:l==null?void 0:l.website_url,socials:[l==null?void 0:l.socials.linkedin,l==null?void 0:l.socials.github].filter(v=>v!=null),className:"text-token-text-secondary text-xs"})]})]}),t&&e.jsxs("div",{className:"bg-token-main-surface-secondary flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg px-4 text-base",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"JcA4/t",defaultMessage:"Category"})}),e.jsx("div",{className:"text-token-text-secondary",children:c?e.jsx(Bs,{size:"small",triggerButton:e.jsxs("button",{className:"flex items-center gap-1",children:[m==null?void 0:m.title,e.jsx(ce,{className:"icon"})]}),children:t.map((v,h)=>e.jsx(C.Item,{onClick:()=>c(v),children:v.title},h))}):e.jsx("span",{className:"text-token-text-secondary",children:m==null?void 0:m.title})})]})]})}function la({onAdd:s,publishedGizmo:a}){var _,w,L;const t=H(),c=X(),l=De(c),[u,m]=b.useState(""),h=(_=qs(l==null?void 0:l.id,0,u,5).data)==null?void 0:_.items.filter(o=>o.account_user_id!==(a==null?void 0:a.gizmo.author.user_id)),{data:T}=ys({queryKey:[l==null?void 0:l.id,"groups","filtered",u],queryFn:()=>Xe.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:l.id},query:{query:u,offset:0,orderby:"@score",limit:20}}}),enabled:u.trim()!==""&&l!=null&&!!l.getWorkspaceId()});function E(o,M,d){s({type:g.GROUP,group_id:o,group_name:M,capabilities:k({},B),is_scim_managed:d}),m("")}function x(o,M,d){l&&(s({type:g.USER,user_id:o,user_name:M,user_email:d,capabilities:k({},B)}),m(""))}const N=l!=null&&l.isEnterprisey()?t.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):t.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),{eligible:R}=Qs(ie.hasSeenMultipleGPTEditorsTooltip);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex w-full flex-row space-x-3",children:e.jsx(Ks,{announcementKey:ie.hasSeenMultipleGPTEditorsTooltip,show:R,side:"right",align:"center",className:"w-full",sideOffset:0,contentClassName:"z-100",childrenWrapperClassName:"w-full",theme:"bright",dismissOnOutsideClick:!0,badge:"new",description:t.formatMessage({id:"SR33A6",defaultMessage:"You can now add editors to collaborate on your GPTs."}),onDismiss:()=>Gs(c,ie.hasSeenMultipleGPTEditorsTooltip),children:e.jsx(Hs,{label:N,name:"share-with-input",inputValue:u,onInputChange:m,suggestions:[...(w=h==null?void 0:h.map(o=>({id:o.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var M;return x(o.account_user_id,o.name,(M=o.email)!=null?M:"")},children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full font-semibold",children:o.name}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:o.email})]})})))!=null?w:[],...(L=T==null?void 0:T.items.map(o=>({id:o.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var M;return E(o.id,o.name,(M=o.is_scim_managed)!=null?M:!1)},children:e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 font-semibold",children:o.name}),o.is_scim_managed&&e.jsx(as,{})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(n,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:o.num_members}})})]})})))!=null?L:[]]})})})})}function oa(s,a){return s===void 0||a===void 0?!1:s.split("__")[0]===a.split("__")[0]}const ca={findHighestSharingSubject:Ve,duplicateSharingSubject:ts,CAP_READ:B,CAP_VIEW_CONFIG:Y},ja=Object.freeze(Object.defineProperty({__proto__:null,GizmoTile:ge,GizmoUpdatedModal:ns,SHARE_LEVEL_ICONS:xe,ShareGizmoModal:ra,ShareLevelItem:W,TestExports:ca,sharingSubjectToSharingParam:is},Symbol.toStringTag,{value:"Module"}));export{Ze as A,ge as G,es as M,W as S,ra as a,xe as b,ns as c,ha as d,ja as e,fa as g,I as i,is as s};
//# sourceMappingURL=czdlmmywear3zja2.js.map
