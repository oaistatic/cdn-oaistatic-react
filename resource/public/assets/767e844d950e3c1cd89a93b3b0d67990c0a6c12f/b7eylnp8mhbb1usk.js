import{r as s,y as j,ae as O,d as T,a9 as _,u as y,j as a}from"./mw35uwhq4g8r9eam.js";import{J as R,a as z,rm as M,H as I,rn as E,u as G,gU as H,aV as N,iX as h,iY as v,fg as b,pd as A,m as F,oS as L,oT as Q,oU as U,oE as k,gg as Y}from"./d0xa318sl7ywi0za.js";import{C as $}from"./kbwy95pwpw3ze3en.js";import{r as w,a as B}from"./g2euln7v5pbm31qa.js";import"./dbnl40ahcmx1rqbw.js";import"./j723eutw6lfomm01.js";import"./gl4f6lge29au0ljx.js";import"./iio0zgk2sqlxbcjy.js";import"./obpubb7ugisfu36u.js";import"./ojmli062couj7r3v.js";import"./lv7ytt0l14b17ows.js";import"./c340ncgh31fwqkpk.js";import"./of0vtq1gcmd3mc3z.js";import"./ggvjblnzoirafiyl.js";import"./kc32gem4l2t3hnxt.js";import"./5uqv5sdajcdsdc3v.js";import"./kne35xckmmfq3xx6.js";import"./kl0a548ohmz3fby2.js";import"./fe4yarxdk4eko5w6.js";import"./kubdgxu3crk3gqem.js";import"./jc1wlz3ym1r6tf2l.js";import"./dhyn0hpw8j3dzdrv.js";import"./ft92xq3wp8rdw7y4.js";function D(n,o){const e=s.useRef(0);return()=>{e.current<o&&(n(),e.current+=1)}}const St=()=>{w();const n=z();if(!R(n,"491279851"))return O("/")},Ct=j(function(){const o=T(),{gizmoSlug:e}=_(),t=M(e!=null?e:""),{data:c,isError:g,error:r}=I(t,!1),m=y(),p=m.getQueryData([E]),l=m.getQueryState([E]),S=(l==null?void 0:l.fetchStatus)==="fetching",u=s.useMemo(()=>p==null?void 0:p.pages.flatMap(d=>d.items),[p]),f=G(),C=H(f,t);s.useEffect(()=>{C.conversations$().preload$()},[C]),s.useEffect(()=>{if(g&&!c)if(r instanceof N&&(r.status===403||r.status===404))o(h(v.PROJECT_NOT_FOUND));else{const d=b(r);o(h(v.CUSTOM_ERROR,void 0,d))}},[g,c,o,r]);const i=s.useMemo(()=>A(f,{urlGizmoId:t}),[f,t]);B(i.id,{kind:F.GizmoInteraction,gizmo_id:t});const x=D(()=>{Y(m)},5);return s.useEffect(()=>{if(!t||!c||S)return;(u==null?void 0:u.some(P=>P.gizmo.gizmo.id===t))||x()},[c,t,u,S,m,x]),a.jsx(L.Provider,{value:i,children:a.jsx(Q,{children:a.jsx(U,{conversation:i,children:a.jsx(k,{conversation:i,children:a.jsx($,{conversation:i})})})})})});export{St as clientLoader,Ct as default};
//# sourceMappingURL=b7eylnp8mhbb1usk.js.map
