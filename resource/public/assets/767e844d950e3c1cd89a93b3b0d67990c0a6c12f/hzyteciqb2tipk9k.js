var I=Object.defineProperty,O=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var w=(t,a,s)=>a in t?I(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,D=(t,a)=>{for(var s in a||(a={}))_.call(a,s)&&w(t,s,a[s]);if(y)for(var s of y(a))H.call(a,s)&&w(t,s,a[s]);return t},A=(t,a)=>O(t,E(a));import{h as G,j as e,M as m,r as p,u as z,d as U,e as W,y as q,a9 as Q}from"./mw35uwhq4g8r9eam.js";import{a as $,b as K,c as V}from"./g6gtv3p57f0esi65.js";import{aB as J,aA as v,cw as R,er as B,f7 as n,fJ as k,e7 as X}from"./d0xa318sl7ywi0za.js";import{lt as Z,bd as r,be as L,lu as Y,at as ee,bv as se,ec as ae,bb as te}from"./g2euln7v5pbm31qa.js";import{d as P}from"./l1ka89a9nbqv3utj.js";import{i as oe,R as re}from"./eg4jvzq610bzilv3.js";import{u as ne,a as ie,b as le,c as de,d as me}from"./la8lelg2j64ilvfd.js";import{A as ce,m as ue,U as pe}from"./l6vfg6gk09o1j3zb.js";import{m as T}from"./mk0onprac2zx1h6t.js";import{u as ge}from"./jds242fqj1w4n5ig.js";import"./dbnl40ahcmx1rqbw.js";import"./j723eutw6lfomm01.js";import"./gl4f6lge29au0ljx.js";import"./iio0zgk2sqlxbcjy.js";import"./obpubb7ugisfu36u.js";import"./ojmli062couj7r3v.js";import"./lv7ytt0l14b17ows.js";import"./c340ncgh31fwqkpk.js";import"./of0vtq1gcmd3mc3z.js";import"./ggvjblnzoirafiyl.js";import"./kc32gem4l2t3hnxt.js";import"./5uqv5sdajcdsdc3v.js";import"./kne35xckmmfq3xx6.js";import"./kl0a548ohmz3fby2.js";import"./fe4yarxdk4eko5w6.js";import"./kubdgxu3crk3gqem.js";import"./jc1wlz3ym1r6tf2l.js";import"./dhyn0hpw8j3dzdrv.js";import"./kubovzlwgxdy8km7.js";import"./ffo9fz3385kae4ff.js";import"./tffc42bs0etu9v3l.js";import"./bkgcomfvnpye3vr8.js";import"./dzciepzlrexlt6ar.js";function xe({group:t,onDelete:a,onClose:s}){const c=G().formatMessage({id:"workspaceSettings.groups.deleteGroupTitle",defaultMessage:"Delete group {groupName}?"},{groupName:t.name});return e.jsx(J,{type:"warning",isOpen:!0,onClose:s,title:c,testId:"modal-delete-group",showCloseButton:!0,primaryButton:e.jsx(v,{color:"danger",onClick:async()=>{a(t.id),s()},children:e.jsx(m,{id:"workspaceSettings.groups.confirmDelete",defaultMessage:"Delete"})}),secondaryButton:e.jsx(v,{onClick:s,color:"secondary",children:e.jsx(m,{id:"workspaceSettings.groups.cancelDelete",defaultMessage:"Cancel"})}),children:e.jsx("p",{children:e.jsx(m,{id:"workspaceSettings.groups.deleteGroupWarning",defaultMessage:'Are you sure you want to delete the "{groupName}" group? This action cannot be undone.',values:{groupName:t.name}})})})}const fe=10;function he({workspaceId:t,group:a,readOnly:s}){const i=G(),[c,o]=p.useState(""),[g,b]=p.useState(0),{data:d,isLoading:S,isPlaceholderData:f}=ne({workspaceId:t,groupId:a.id,search:c,currPage:g}),[h,j]=p.useState(!1),N=z(),{mutateAsync:C}=ie({workspaceId:t,groupId:a.id,members:d,currPage:g,search:c}),M=e.jsx(v,{onClick:()=>j(!0),icon:ee,disabled:s,children:e.jsx(m,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})});return e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"mt-6 mb-3 flex flex-row justify-between gap-2",children:[e.jsx(Z,{inputClassName:"w-[250px] rounded-full! text-sm",value:c,onChange:l=>{o(l.target.value)},placeholder:i.formatMessage({id:"FThxKQ",defaultMessage:"Search member name"})}),s?e.jsx(R,{label:i.formatMessage(T.managedViaSCIMTooltip),side:"right",children:M}):M]}),e.jsxs(r.Root,{className:"min-w-full",children:[e.jsxs(r.Header,{children:[e.jsx(r.HeaderCell,{children:e.jsx(m,{id:"workspaceSettings.groups.memberName",defaultMessage:"Name"})}),e.jsx(r.HeaderCell,{children:e.jsx(m,{id:"workspaceSettings.groups.email",defaultMessage:"Email"})}),e.jsx(r.HeaderCell,{})]}),e.jsx(r.Body,{className:S||f?"opacity-50":void 0,children:d==null?e.jsx(r.Row,{children:e.jsx(r.Cell,{colSpan:3,children:e.jsx(B,{})})}):d.items.length===0?e.jsx(r.Row,{children:e.jsx(r.Cell,{colSpan:3,children:c===""?e.jsx(m,{id:"workspaceSettings.groups.noMembers",defaultMessage:"No members"}):e.jsx(m,{id:"workspaceSettings.groups.noMembersForSearch",defaultMessage:"No members matched the filter"})})}):d.items.map(l=>e.jsxs(r.Row,{className:"[&>td]:py-2",children:[e.jsx(r.Cell,{children:e.jsx("span",{children:l.name})}),e.jsx(r.Cell,{children:l.email}),e.jsx(r.Cell,{textAlign:"right",children:!s&&(a.is_scim_managed?e.jsx(n.Root,{children:e.jsx(n.Trigger,{disabled:!0,children:e.jsx(R,{label:i.formatMessage(T.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(k,{className:"icon-sm"})})})}):e.jsxs(n.Root,{children:[e.jsx(n.Trigger,{className:"-my-2",children:e.jsx(k,{className:"icon-sm"})}),e.jsx(n.Portal,{children:e.jsx(n.Content,{size:"default",children:e.jsx(n.Item,{onClick:()=>C(l.id),icon:e.jsx(L,{className:"text-token-text-status-error"}),className:"text-token-text-status-error",children:e.jsx(m,{id:"workspaceSettings.groups.removeMember",defaultMessage:"Remove member"})})})})]}))})]},l.id))})]}),e.jsx("div",{className:"mt-2 flex justify-center",children:d&&d.items.length>0&&e.jsx(Y,{currentPage:g,onChangeIndex:l=>{b(l)},length:Math.ceil(d.total/fe)})}),h&&e.jsx(ce,{isOpen:!0,onClose:()=>{N.invalidateQueries({queryKey:[t,"groups"]}),j(!1)},group:a})]})}function je({currentWorkspaceId:t,groupId:a}){const s=G(),i=X(),c=U(),{data:o,isLoading:g}=le({workspaceId:t,groupId:a!=null?a:""}),[b,d]=p.useState(!1),[S,f]=p.useState(!1),h=!!(!(i!=null&&i.isAdminOfAccount()||i!=null&&i.isOwnerOfAccount())||o!=null&&o.is_scim_managed),j=p.useMemo(()=>{var u;return[{label:s.formatMessage(ue.title),href:"/admin/groups"},{label:(u=o==null?void 0:o.name)!=null?u:""}]},[s,o==null?void 0:o.name]),{deleteGroup:N}=de({workspaceId:t}),C=async u=>{await N(u),c("/admin/groups")},{updateGroupName:M}=me({workspaceId:t});if(g)return e.jsx(B,{});if(!o)return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:s.formatMessage(x.groupNotFoundLabel)}),e.jsx("p",{className:"text-sm text-gray-500",children:s.formatMessage(x.groupNotFoundDescription)})]});const l=oe(o),F=e.jsxs(n.Root,{children:[e.jsx(n.Trigger,{asChild:!0,className:"border-token-border-default! border!",children:e.jsxs("div",{children:[s.formatMessage(x.manageLabel),e.jsx(se,{className:"icon-sm ms-0.5"})]})}),e.jsx(n.Portal,{children:e.jsxs(n.Content,{children:[e.jsx(n.Item,{onClick:()=>P(d)(!0),icon:ae,label:s.formatMessage(x.editGroupLabel)}),e.jsx(n.Item,{onClick:()=>P(f)(!0),icon:L,label:s.formatMessage(x.deleteGroupLabel),color:"danger"})]})})]});return e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsx("title",{children:o.name})}),e.jsx($,{navigation:e.jsx(K,{items:j}),title:o.name,badge:l?e.jsx(re,{}):void 0,actions:o&&!h&&!l?F:void 0}),e.jsxs(V,{showSpinner:!1,children:[e.jsx(he,{group:o,readOnly:h,workspaceId:t}),S&&e.jsx(xe,{group:o,onDelete:C,onClose:()=>f(!1)}),b&&e.jsx(pe,{defaultName:o.name,onSave:async u=>{await M({workspaceId:t,groupID:o.id,name:u})},onClose:()=>d(!1),placeholder:"E.g. marketing team"})]})]})}const x=W({manageLabel:{id:"lII8Sf",defaultMessage:"Manage"},editGroupLabel:{id:"aBFPzn",defaultMessage:"Edit group"},deleteGroupLabel:{id:"FtvUh/",defaultMessage:"Delete group"},groupNotFoundLabel:{id:"Lfq9Z4",defaultMessage:"Group not found"},groupNotFoundDescription:{id:"++TB5R",defaultMessage:"It may take a few minutes for the new group to appear."}}),Ye=q(function(){const a=ge(),{groupId:s}=Q();return e.jsx(je,A(D({},a),{groupId:s}))});export{Ye as default};
//# sourceMappingURL=hzyteciqb2tipk9k.js.map
