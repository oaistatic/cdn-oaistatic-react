import{j as e,h as j,M as c,c as M}from"./mw35uwhq4g8r9eam.js";import{u as v,d as b,al as y,jh as N,aB as C,bq as p,f7 as m,fJ as I,pQ as k,aA as U}from"./d0xa318sl7ywi0za.js";import{K as w,cj as R,ck as S,cl as A,cm as F,cn as _}from"./g2euln7v5pbm31qa.js";function E({room:o,onClose:s}){"use no forget";var l;const t=v(),i=w(t),d=b(()=>o.creatorAccountUserId$()),n=b(()=>o.members$()),u=(l=y(t))==null?void 0:l.normalizedAccountUserId,r=j(),f=N(t);return e.jsx(C,{testId:"modal-calpico-chat-members",isOpen:!0,onClose:()=>s(),type:"success",headerClassName:"pb-1",title:e.jsx(c,{id:"tEvWSQ",defaultMessage:"People"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex max-h-[min(40vh,492px)] flex-col",children:[e.jsx("div",{className:"border-token-border-heavy min-h-0 flex-1 overflow-y-auto border-t",children:e.jsx("div",{className:"divide-token-border-light divide-y",children:(n!=null?n:[]).map(a=>{const x=a.accountUserId===u,h=a.accountUserId===d;return e.jsxs("div",{className:"group/hover flex w-full items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[x?e.jsx("button",{type:"button","aria-label":r.formatMessage({id:"OQ5GtO",defaultMessage:"Edit your profile"}),onClick:()=>{s(),p(t,R,{accountUserId:a.accountUserId})},className:"rounded-full bg-transparent p-0",children:e.jsx("img",{src:a.avatarUrl,alt:a.name,className:"bg-token-border-default gizmo-shadow-stroke box-content h-8 w-8 rounded-full object-cover p-[0.5px]"})}):e.jsx("img",{src:a.avatarUrl,alt:a.name,className:"bg-token-border-default gizmo-shadow-stroke box-content h-8 w-8 rounded-full object-cover p-[0.5px]"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{children:a.name}),e.jsx(P,{username:a.username,isRoomCreator:h,isSelf:x})]})]}),x?null:e.jsxs(m.Root,{children:[e.jsx(m.Trigger,{className:"group/trigger","aria-label":r.formatMessage({id:"U93nHF",defaultMessage:"Actions for {name}"},{name:a.name}),children:e.jsx(I,{className:"icon-sm hidden group-hover/hover:block group-data-[state=open]/trigger:block"})}),e.jsx(m.Portal,{children:e.jsxs(m.Content,{size:"small",children:[e.jsx(m.Item,{color:"danger",icon:e.jsx(A,{className:"icon-sm"}),label:e.jsx(c,{id:"D/xte+",defaultMessage:"Report"}),onClick:()=>{s(),p(t,S,{entityId:a.accountUserId,entityType:k.Profile,title:r.formatMessage({id:"PUcghs",defaultMessage:"Report profile"})})}}),h?null:e.jsx(m.Item,{color:"danger",icon:e.jsx(F,{className:"icon-sm"}),label:e.jsx(c,{id:"rT5Wj+",defaultMessage:"Remove from group"}),onClick:async()=>{if(window.confirm(r.formatMessage({id:"MtV6M+",defaultMessage:"Remove {memberName} from {roomName}? {memberName} will no longer see the chat history."},{memberName:a.name,roomName:o.name$()})))try{await i.removeMemberFromRoom$(o.id,a.accountUserId)}catch(g){f.danger(r.formatMessage({id:"cGNRGI",defaultMessage:"Failed to remove member: {error}"},{error:g instanceof Error?g.message:String(g)}),{toastId:"calpico_room_failed_to_remove_member"});return}}})]})})]})]},a.accountUserId)})})}),e.jsxs("div",{className:"border-token-border-light flex flex-shrink-0 items-center justify-between border-t pt-3",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"flex flex-col items-start",children:e.jsx(c,{id:"IveYPe",defaultMessage:"Add people"})})}),e.jsx(U,{type:"button",onClick:()=>{s(),p(t,_,{room:o})},color:"ghost",className:"border-token-border-heavy rounded-full border px-4 py-2 text-sm font-medium",children:e.jsx(c,{id:"XYZ1+I",defaultMessage:"Add"})})]})]})})}function P(o){"use forget";const s=M.c(6),{username:t,isRoomCreator:i,isSelf:d}=o;let n;s[0]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx(c,{id:"AZaJQ0",defaultMessage:"You"}),s[0]=n):n=s[0];const u=n;let r;s[1]===Symbol.for("react.memo_cache_sentinel")?(r=e.jsx(c,{id:"ePmMIc",defaultMessage:"admin"}),s[1]=r):r=s[1];const f=r;let l;return s[2]!==i||s[3]!==d||s[4]!==t?(l=e.jsx("span",{className:"text-token-text-tertiary text-sm",children:d&&i?e.jsxs(e.Fragment,{children:[u," 路 @",t," 路 ",f]}):d?e.jsxs(e.Fragment,{children:[u," 路 @",t]}):i?e.jsxs(e.Fragment,{children:["@",t," 路 ",f]}):e.jsxs(e.Fragment,{children:["@",t]})}),s[2]=i,s[3]=d,s[4]=t,s[5]=l):l=s[5],l}const G=({room:o,onClose:s})=>{"use no forget";return e.jsx(E,{room:o,onClose:s})};export{G as CalpicoChatMembersModalContainer};
//# sourceMappingURL=fjzrx4v84napxm6r.js.map
