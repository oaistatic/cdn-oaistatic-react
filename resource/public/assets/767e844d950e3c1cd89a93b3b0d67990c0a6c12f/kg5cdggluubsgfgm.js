import{h as g,r as d,j as e,M as x}from"./mw35uwhq4g8r9eam.js";import{cF as b,fD as w,ek as j,e5 as v,cw as N}from"./d0xa318sl7ywi0za.js";import{bI as L,im as h}from"./g2euln7v5pbm31qa.js";import{p as T,g as y,F as M}from"./nxan4e3brpzak2la.js";import{W as R}from"./kx64af29hscb23w7.js";import{g as S}from"./ldtpmsnzn9ens47o.js";import"./i2f5gqqndy3iowkc.js";import"./ipoljkkwhes3fgxa.js";import"./jxdumrq8vfk5kk1c.js";import"./oftnd9rlobxeh2e2.js";import"./brzhn6w36e0ait35.js";import"./lptwpbjabrvjmhsj.js";import"./gkerdwj307fj3n4u.js";import"./h9z1eo55yfy9l6t8.js";import"./ee6pijsbu8dfevmi.js";import"./k6k3ilbqdb73kxkm.js";import"./baz4b8nlf8t2lb95.js";import"./dxkl0433k1u8ypnz.js";import"./ox7635ffwodpca7w.js";import"./nr9k12yditsrjrdm.js";import"./eder15khh2fy5wd2.js";import"./krfycj1ruc6rihlj.js";import"./lgfmpb0my7e1aj31.js";import"./ohau9tqj1fpdibg0.js";import"./iknugp00locgtve5.js";import"./h1em0bjkpkjv8ykw.js";import"./cv4afpu20gjb9dll.js";import"./h4yh1661qhhbu5v5.js";import"./hu1bt0oauegdhua6.js";const _="_glow_1o0tc_1",f={glow:_};function k({diffFiles:s,onClickFile:r,startOpen:m=!1,isActive:n=!1}){const o=g(),[a,c]=d.useState(m);return s.length?e.jsxs("div",{className:b("bg-token-bg-primary flex flex-col rounded-2xl border",n?"border-token-border-heavy outline-2 outline-black/5":"border-token-border-light"),children:[e.jsx("button",{className:"cursor-pointer p-2 focus-visible:outline-0",onClick:()=>{s.length&&(r==null||r(s[0])),(n||!a)&&c(!a)},"aria-label":o.formatMessage({id:"wham.diff.changedFileList.titleAriaLabel",defaultMessage:"Toggle file list diffs"}),children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"gap-1 px-2 py-1 text-sm",children:e.jsx("span",{className:"text-token-text-primary font-medium",children:e.jsx(x,{id:"wham.diff.changedFileList.title",defaultMessage:"{numFiles, plural, one {File ({numFiles})} other {Files ({numFiles})}}",values:{numFiles:s.length}})})}),a?e.jsx(L,{className:"icon"}):e.jsx(w,{className:"icon"})]})}),e.jsx(j,{initial:!m,children:a&&e.jsx(v.ul,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.1},className:"overflow-clip px-2 pb-2",children:s.map((i,l)=>{var u;const p="".concat((u=i._oldFileName)!=null?u:l,"-").concat(i._newFileName);return e.jsx(D,{diffFile:i,onClick:()=>r==null?void 0:r(i)},p)})})})]}):null}function D({diffFile:s,onClick:r}){var u;const m=g(),n=d.useRef(null),o=d.useRef(null),a=d.useRef(null),[c,i]=d.useState(!1),l=y(s),p="".concat((u=s._oldFileName)!=null?u:"","-").concat(s._newFileName);return e.jsx("li",{className:"group w-full",children:e.jsx(N,{label:l,labelTextAlign:"left",open:c?void 0:!1,children:e.jsxs("button",{className:"hover:bg-token-border-light after:bg-token-border-light relative flex h-10 w-full items-center justify-start rounded-lg px-2 text-sm after:absolute after:inset-x-2 after:bottom-0 after:h-[1px] after:content-[''] group-last:after:hidden focus-visible:outline-0",onClick:()=>{r==null||r(),requestAnimationFrame(()=>{n.current!=null&&window.clearTimeout(n.current);const t=document.querySelector('[data-diff-header="'.concat(l,'"]'));t==null||t.classList.remove(f.glow),t==null||t.scrollIntoView({behavior:"instant",block:"start"}),t==null||t.classList.add(f.glow),n.current=window.setTimeout(()=>{t==null||t.classList.remove(f.glow)},5e3)})},"aria-label":m.formatMessage({id:"wham.diff.changedFileList.fileAriaLabel",defaultMessage:"View file {file}"},{file:l}),children:[e.jsxs("div",{className:"relative flex min-w-0 shrink pe-2",children:[e.jsx("span",{"aria-hidden":!0,className:"invisible fixed inline-block whitespace-nowrap",ref:h({axis:"width",onChange:({width:t})=>{o.current=t,a.current!=null&&i(a.current<t)}}),children:l}),e.jsx("span",{ref:h({axis:"width",onChange:({width:t})=>{a.current=t,o.current!=null&&i(t<o.current)}}),className:"inline-block max-w-full min-w-0 shrink truncate",children:l})]}),e.jsx("span",{className:"ms-auto",children:e.jsx(M,{diffFile:s,fallback:e.jsx(R,{linesAdded:s.additionLength,linesRemoved:s.deletionLength})})})]})})},p)}function oe({assistantTurn:s,onClickFile:r,startOpen:m=!1,isActive:n=!1,showFullDiff:o=!1}){const a=S(s,!0).length>0,c=T({assistantTurn:s,followUp:a&&!o}).map(i=>i.diffFile);return e.jsx(k,{diffFiles:c,onClickFile:r,startOpen:m,isActive:n})}export{k as ChangedFileList,oe as ChangedFileListFromTaskTurn};
//# sourceMappingURL=kg5cdggluubsgfgm.js.map
