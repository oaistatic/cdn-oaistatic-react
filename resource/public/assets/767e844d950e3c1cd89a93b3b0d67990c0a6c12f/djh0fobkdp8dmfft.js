import{c as S,h as O,j as n,r as D}from"./mw35uwhq4g8r9eam.js";import{u as P,lu as F,jP as E,aA as M,cF as _,e4 as $,aB as z}from"./d0xa318sl7ywi0za.js";import{i8 as L,i9 as R,ia as Y,ib as H,ic as K,id as U}from"./g2euln7v5pbm31qa.js";function V(r){"use forget";const e=S.c(32),{modalInfo:t,conversationId:a,formatAction:f,onClose:x}=r,{action_items:l}=t,i=O(),d=P();let p;e[0]!==l?(p=l!=null?l:[],e[0]=l,e[1]=p):p=e[1];let j;e[2]!==p?(j=p.find(J),e[2]=p,e[3]=j):j=e[3];const o=j;let k;e[4]!==o||e[5]!==f?(k={dropdownAction:o,formatAction:f},e[4]=o,e[5]=f,e[6]=k):k=e[6];const y=L(k);if(!(l!=null&&l.length))return null;if(o&&y.length>0){let s;return e[7]!==a||e[8]!==o||e[9]!==y||e[10]!==t||e[11]!==x?(s=n.jsx("div",{className:"flex w-full flex-col items-center gap-2 px-8 pb-8",children:n.jsx(Y,{variant:"modal",beaconInfo:t,conversationId:a,dropdownAction:o,dropdownItems:y,onClose:x})}),e[7]=a,e[8]=o,e[9]=y,e[10]=t,e[11]=x,e[12]=s):s=e[12],s}let v,w,m;if(e[13]!==l||e[14]!==d||e[15]!==f||e[16]!==i||e[17]!==t||e[18]!==x){m=Symbol.for("react.early_return_sentinel");e:{let s;e[22]!==f?(s=h=>{const u=f(h);return u?{action:h,formatted:u}:null},e[22]=f,e[23]=s):s=e[23];const N=(l!=null?l:[]).map(s).filter(G),g=N.find(q);if(g&&g.formatted&&"onThennableClick"in g.formatted&&g.formatted.onThennableClick){m=n.jsx("div",{className:"flex justify-center pb-10",children:n.jsx(R,{onThennableClick:g.formatted.onThennableClick,text:g.formatted.text})});break e}const B=N.filter(W);if(B.length===0){m=null;break e}v="mx-6 flex flex-col justify-center gap-3 pb-8 sm:flex-row";let b;e[24]!==d||e[25]!==i||e[26]!==t||e[27]!==x?(b=h=>{const{action:u,formatted:c}=h,A=typeof c.text=="string"?c.text:i.formatMessage(c.text),I=async()=>{var T;"onThennableClick"in c&&c.onThennableClick?await c.onThennableClick():(T=c.onClick)==null||T.call(c),K(d,t),x()};return n.jsx(M,{onClick:I,color:H(u.type),size:"large",children:A},u.id)},e[24]=d,e[25]=i,e[26]=t,e[27]=x,e[28]=b):b=e[28],w=B.map(b)}e[13]=l,e[14]=d,e[15]=f,e[16]=i,e[17]=t,e[18]=x,e[19]=v,e[20]=w,e[21]=m}else v=e[19],w=e[20],m=e[21];if(m!==Symbol.for("react.early_return_sentinel"))return m;let C;return e[29]!==v||e[30]!==w?(C=n.jsx("div",{className:v,children:w}),e[29]=v,e[30]=w,e[31]=C):C=e[31],C}function W(r){const{action:e}=r;return e.type!==E.COPY}function q(r){const{action:e,formatted:t}=r;return e.type===E.COPY&&"onThennableClick"in t&&typeof t.onThennableClick=="function"}function G(r){return r!=null}function J(r){return(r==null?void 0:r.action_v2.action_enum)===F.DROPDOWN}function ee(r){"use forget";const e=S.c(36),{trackBeaconDismissAndClearBeaconUIState:t,onClose:a,openFileDialog:f,persistedSystemHintsStore:x,composerController:l,modalInfo:i,clientThreadId:d}=r,{title:p,description:j,header_image_url:o}=i.ui_info,{action_items:k,footer_text:y}=i,[v,w]=D.useState(!1);let m,C;e[0]!==o?(m=()=>{if(o){const T=new Image;T.src=o,T.onload=()=>w(!0)}},C=[o],e[0]=o,e[1]=m,e[2]=C):(m=e[1],C=e[2]),D.useEffect(m,C);const s=!(k!=null&&k.length);let N;e[3]!==d||e[4]!==l||e[5]!==i||e[6]!==f||e[7]!==x?(N={clientThreadId:d,location:"beacon_modal",composerController:l,persistedSystemHintsStore:x,openFileDialog:f,beaconInfo:i},e[3]=d,e[4]=l,e[5]=i,e[6]=f,e[7]=x,e[8]=N):N=e[8];const g=U(N);if(o&&!v)return null;let B;e[9]===Symbol.for("react.memo_cache_sentinel")?(B=_("relative flex max-w-[480px] flex-col"),e[9]=B):B=e[9];let b;e[10]!==a||e[11]!==t?(b=()=>{t(),a()},e[10]=a,e[11]=t,e[12]=b):b=e[12];let h;e[13]!==a||e[14]!==t?(h=n.jsx("div",{className:"absolute end-4 top-4 z-50",children:n.jsx($,{className:"text-token-text-secondary ring-0! outline-0! focus:ring-0! focus:ring-offset-0! focus:outline-0!",onClick:()=>{t(),a()}})}),e[13]=a,e[14]=t,e[15]=h):h=e[15];let u;e[16]!==j||e[17]!==o||e[18]!==s||e[19]!==p?(u=o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"relative w-full flex-1",children:n.jsx("img",{src:o,className:"w-full object-contain object-bottom",alt:""})}),n.jsxs("div",{className:_("mt-0 flex flex-1 flex-col items-center justify-center gap-2 px-8 pt-10 pb-6",s&&"pb-16"),children:[n.jsx("div",{className:"".concat(s?"text-center text-[24px]":"text-start text-[20px]"," leading-7 font-medium"),children:p}),n.jsx("div",{className:_("text-token-text-secondary mt-0 w-full text-center text-[16px] font-normal",s&&"text-center text-[17px]"),children:j})]})]}):n.jsxs("div",{className:"flex flex-1 flex-col gap-6 px-8 pt-12 pb-8",children:[n.jsx("div",{className:"".concat(s?"text-center text-[24px]":"text-start text-[20px]"," leading-7 font-medium"),children:p}),n.jsx("div",{className:_("text-token-text-secondary mt-0 w-full text-start text-[16px] font-normal",s&&"text-center text-[17px]"),children:j})]}),e[16]=j,e[17]=o,e[18]=s,e[19]=p,e[20]=u):u=e[20];let c;e[21]!==d||e[22]!==g||e[23]!==i||e[24]!==a?(c=n.jsx(V,{modalInfo:i,conversationId:d,formatAction:g,onClose:a}),e[21]=d,e[22]=g,e[23]=i,e[24]=a,e[25]=c):c=e[25];let A;e[26]!==y?(A=y&&n.jsx("div",{className:"text-token-text-tertiary px-8 pb-10 font-normal",children:y}),e[26]=y,e[27]=A):A=e[27];let I;return e[28]!==a||e[29]!==b||e[30]!==h||e[31]!==u||e[32]!==c||e[33]!==A||e[34]!==t?(I=n.jsxs(z,{isOpen:!0,onClose:a,testId:"modal-beacon",size:"custom",type:"success",noPadding:!0,showCloseButton:!1,className:B,onPointerDownOutside:t,onEscapeKeyDown:b,children:[h,u,c,A]}),e[28]=a,e[29]=b,e[30]=h,e[31]=u,e[32]=c,e[33]=A,e[34]=t,e[35]=I):I=e[35],I}export{ee as BeaconModal};
//# sourceMappingURL=djh0fobkdp8dmfft.js.map
