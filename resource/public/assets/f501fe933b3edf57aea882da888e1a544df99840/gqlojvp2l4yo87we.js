const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/cl9sgpvhjsixyc9e.js","assets/n1tvutderx19k1zs.js"])))=>i.map(i=>d[i]);
import{u as f,s as b,r as i,bE as c,ag as S,bt as w,a8 as u}from"./n26mv7rx7nquqst2.js";import{r,u as y}from"./n1tvutderx19k1zs.js";import{d}from"./pceg3mlzf8dzw9ob.js";async function m(e){const n=await w(()=>import("./cl9sgpvhjsixyc9e.js").then(t=>t.i),__vite__mapDeps([0,1]));if(u!=null&&e?.startsWith(u))return!0;try{return n.get(new URL(e??"").hostname)==="openai.com"}catch{return!1}}function g(e,n){const t=c();return y({queryKey:["safe-url",{serverThreadId:e,url:n,isHistoryAndTrainingDisabled:t}],queryFn:async()=>{if(e==null||n==null)throw new Error("Unexpected falsey useSafeUrlQuery");return await m(n)||i(e)?.safeUrls.includes(n)?{safe:!0}:S.getConversationSafeUrls(e,n,t)},enabled:e!=null&&n!=null})}function D(e,n,t=!0){const s=f(o=>e!=null&&n!=null&&b.isThreadUrlSafe(i(e,o),n)),{data:{safe:l}={}}=g(e,s?void 0:n);return s||l||!t?n:void 0}function V(e,n,t=!0){const s=_(n,500);return D(e,s,t)}function _(e,n){const[t,s]=r.useState(void 0),[l]=r.useState(()=>d(o=>{s(o)},n));return r.useEffect(()=>{l(e)},[l,e]),t===e?e:void 0}function h(e,n){const t=c(),s=f(o=>e==null?[]:i(e,o)?.safeUrls??[]),{data:l=[]}=y({queryKey:["safe-urls",e,n,t,s],queryFn:async()=>{const o=s.filter(a=>n.includes(a)),p=n.filter(a=>!o.includes(a)),U=(await Promise.allSettled(p.map(async a=>{if(await m(a))return a;if(e==null)return null;try{return(await S.getConversationSafeUrls(e,a,t)).safe?a:null}catch{return null}}))).map(a=>a.status==="fulfilled"?a.value:null).filter(a=>a!=null);return o.concat(U)},enabled:e!=null&&n.length>0});return l}export{V as a,h as u};
//# sourceMappingURL=gqlojvp2l4yo87we.js.map
