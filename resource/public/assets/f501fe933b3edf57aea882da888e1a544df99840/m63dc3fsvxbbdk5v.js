const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/g7uwuntxdaw3z47p.js","assets/n1tvutderx19k1zs.js","assets/rkb92gmk6xjcvr6i.js","assets/xoi80qjaxo01l8ev.js","assets/pceg3mlzf8dzw9ob.js","assets/n26mv7rx7nquqst2.js","assets/root-osq5e7fb.css","assets/conversation-small-nranh1cg.css","assets/cbo9u87sapdr5cy5.js","assets/gy64pge8qevmvg7e.js","assets/cg9cr7bhamctxzet.js","assets/neblectozdsjxjkm.js","assets/fzrn137102spawew.js","assets/ecp3vwsjvu9v61q0.js","assets/comments-plugin-i34sjb0l.css","assets/c4bztafthokyfj19.js","assets/codemirror-idex3gld.css","assets/fsxj38wqj2utmatn.js","assets/nraolmtygmvq3wcf.js","assets/hexva2s1lo90zidg.js","assets/m3i9t52w2bjqxoks.js","assets/fmtdc70w9bxe7ngz.js","assets/g7id7a4lbm55wuqm.js","assets/pevkepdko1ob7sgk.js","assets/da0lloekhn03bypm.js","assets/hg2pcqdl92ment5e.js","assets/kodyf94rms2l778g.js","assets/dafzn6sg4vj6hamn.js","assets/gohrg29ji6orhvga.js","assets/lvedelvd2wa5y0ah.js","assets/oy248fbbcvutqmly.js","assets/bk8slwxjkdlmxjxm.js","assets/m87kbgi8rvuhalc0.js","assets/gqlojvp2l4yo87we.js","assets/bxe8lsbbwu66fmec.js","assets/pdyeyi03xur7s9eo.js","assets/jwxg4nug580e3rsw.js","assets/jfxozbrcnsxchwcx.js","assets/cnser3w7axtuu9s7.js","assets/ls09eveffy2i76xi.js","assets/jfdaw6ej73p3pfa5.js","assets/la7sjubwbqsgucbs.js","assets/dqfm7c7cvmpaii6t.js","assets/k7lp477bpmifp7gl.js","assets/bei4zk14rknuqpj2.js","assets/prosemirror-ofhzvcxp.css"])))=>i.map(i=>d[i]);
import{j as u,au as oe,r as F,aw as ie,c as ae}from"./n1tvutderx19k1zs.js";import{Z as ue,C as Y,b as le}from"./cbo9u87sapdr5cy5.js";import{d as x,d$ as K,c6 as ee,bJ as ce,j as fe,h3 as me,b_ as de,bs as ne,bt as te}from"./n26mv7rx7nquqst2.js";import{kN as ve,kO as he,kP as pe,kQ as ge,iI as xe,bs as ye,cA as Ce,gz as Te,d8 as De,d5 as Ee,d7 as Le,d6 as Ne,kR as we}from"./pceg3mlzf8dzw9ob.js";import{B as Oe}from"./jfxozbrcnsxchwcx.js";import{P as re}from"./m87kbgi8rvuhalc0.js";function Re({className:n,zIndexKey:e,onClick:t}){return u.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:x("absolute inset-0",n,ue[e]),onClick:t})}function Ae({zIndexKey:n,onClick:e}){return u.jsx(Re,{zIndexKey:n,onClick:e,className:"bg-gray-50/50 dark:bg-black/50"})}const Ie=({onScroll:n})=>(ve(({scrollTop:e})=>{n?.(e)}),null),be=({shouldScrollToTop:n})=>{const e=he();return F.useEffect(()=>{n===!0&&e({behavior:"smooth"})},[n,e]),null},je=()=>{const n=pe();F.useEffect(()=>{n({behavior:"smooth"})},[n]);const[e]=ge();return e?null:u.jsx("button",{onClick:()=>n({behavior:"smooth"}),className:"absolute bottom-5 right-1/2 z-10 flex h-8 w-8 translate-x-1/2 cursor-pointer items-center justify-center rounded-full border border-token-border-light bg-token-main-surface-primary bg-clip-padding text-token-text-secondary",children:u.jsx(xe,{className:"icon-md text-token-text-primary"})})},ke=({children:n,onScroll:e,shouldScrollToTop:t,scrollToBottomMode:r="top",isLoading:o=!1,header:s,height:i,overlay:a,hideChildren:l=!1,disableScroll:c=!1},f)=>{const m=u.jsx("div",{className:x(l?"hidden":"block"),children:n});return u.jsxs("main",{className:x("relative flex min-h-0 flex-auto flex-grow flex-col",c&&"overflow-hidden"),ref:f,style:{height:i},children:[u.jsx(ie,{children:o&&u.jsx(Ae,{zIndexKey:"textdocDiffLoadingOverlay"})}),!c&&u.jsxs(Oe,{followButtonClassName:"hidden",initialScrollBehavior:"auto",scrollViewClassName:"flex flex-col",className:"h-full",mode:r,children:[s,m,a&&u.jsx("div",{className:"pointer-events-none w-full flex-1",children:a}),r==="bottom"&&u.jsx(je,{}),u.jsx(Ie,{onScroll:e}),u.jsx(be,{shouldScrollToTop:t})]}),c&&u.jsxs(u.Fragment,{children:[s,m,a&&u.jsx("div",{className:"pointer-events-none h-full w-full",children:a})]})]})},_e=F.forwardRef(ke);function Me({className:n,children:e}){return K()?u.jsx(ye,{leading:!0,type:"primary",name:"canvas-header",className:x(n,"sticky top-0 z-[1] h-[var(--screen-thread-header-min-height,60px)] flex-none px-3.5"),style:{viewTransitionName:"var(--vt-canvas-header)"},children:u.jsx("div",{className:"flex items-center justify-between gap-4",children:e})}):u.jsx("header",{className:x(n,"flex h-14 flex-none items-center justify-between gap-4 px-3"),children:e})}function Se({className:n,children:e}){const t=K();return u.jsx("h2",{className:x(n,"truncate",t?"text-[17px] font-medium leading-[30px] text-token-text-secondary":"text-lg text-token-text-secondary"),children:e})}const ze=({onClick:n})=>{const e=ae(),r=ee()?me:de;return u.jsx(ce,{label:e.formatMessage(Pe.close),children:u.jsx(Ce,{icon:r,onClick:n})})},Be=/^rgba?\(\s*(\d+),\s*(\d+),\s*(\d+)(,\s*([\d.]+))?\s*\)$/,G=n=>{const e=n.match(Be);if(!e)return null;const t=parseFloat(e.at(1)??""),r=parseFloat(e.at(2)??""),o=parseFloat(e.at(3)??"");return(t*299+r*587+o*114)/1e3<125},j=({children:n,isPreviewingCode:e=!1,previewBackgroundColor:t=null})=>{const r=e&&t&&G(t),o=e&&t&&!G(t);return u.jsx("section",{className:x("popover flex h-full w-full flex-col",r&&"dark",o&&"light",e?"bg-[rgba(249,249,249,1)] dark:bg-[rgba(33,33,33,1)]":"bg-token-main-surface-primary"),style:{backgroundColor:e&&t?t:void 0},children:n})};j.Title=Se;j.CloseButton=ze;j.Header=Me;j.Content=_e;const Pe=fe({close:{id:"Bix/Kd",defaultMessage:"Close"}}),$e=ne(()=>te(()=>import("./g7uwuntxdaw3z47p.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37])).then(n=>n.CodeComposer),{loading:()=>u.jsx("div",{className:Y.code,children:u.jsx("div",{className:"h-full w-full px-4",children:u.jsx(re,{lines:20})})})}),dn=n=>u.jsx($e,{...n});var Fe=(n=>(n.ALL_HIDDEN="all_hidden",n.COMMENTS_READONLY="comments_readonly",n.ENABLED="enabled",n))(Fe||{});const U=775,qe=580,He=36,Je=18,Ge=()=>{const[{width:n},e]=Te(),t=ee(),r=n>=U+le?U:qe,o=t?Je:He;return u.jsx("div",{className:x(Y.document,"mt-4"),ref:e,style:{margin:`0 ${o}px`},children:u.jsx("div",{style:{width:r},children:u.jsx(re,{lines:20})})})},Ue=ne(()=>te(()=>import("./cnser3w7axtuu9s7.js"),__vite__mapDeps([38,1,39,5,6,11,3,4,7,8,9,10,12,13,14,40,33,19,18,41,42,43,44,45,17,20,21,22,23,24,25,26,27,28,29,30,31,32,34,35,36,37])).then(n=>n.DocumentComposer),{loading:Ge}),vn=n=>u.jsx(Ue,{...n});function h(){}h.prototype={diff:function(e,t){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.callback;typeof o=="function"&&(s=o,o={});var i=this;function a(d){return d=i.postProcess(d,o),s?(setTimeout(function(){s(d)},0),!0):d}e=this.castInput(e,o),t=this.castInput(t,o),e=this.removeEmpty(this.tokenize(e,o)),t=this.removeEmpty(this.tokenize(t,o));var l=t.length,c=e.length,f=1,m=l+c;o.maxEditLength!=null&&(m=Math.min(m,o.maxEditLength));var y=(r=o.timeout)!==null&&r!==void 0?r:1/0,g=Date.now()+y,v=[{oldPos:-1,lastComponent:void 0}],p=this.extractCommon(v[0],t,e,0,o);if(v[0].oldPos+1>=c&&p+1>=l)return a(V(i,v[0].lastComponent,t,e,i.useLongestToken));var T=-1/0,D=1/0;function O(){for(var d=Math.max(T,-f);d<=Math.min(D,f);d+=2){var C=void 0,E=v[d-1],L=v[d+1];E&&(v[d-1]=void 0);var M=!1;if(L){var H=L.oldPos-d;M=L&&0<=H&&H<l}var J=E&&E.oldPos+1<c;if(!M&&!J){v[d]=void 0;continue}if(!J||M&&E.oldPos<L.oldPos?C=i.addToPath(L,!0,!1,0,o):C=i.addToPath(E,!1,!0,1,o),p=i.extractCommon(C,t,e,d,o),C.oldPos+1>=c&&p+1>=l)return a(V(i,C.lastComponent,t,e,i.useLongestToken));v[d]=C,C.oldPos+1>=c&&(D=Math.min(D,d-1)),p+1>=l&&(T=Math.max(T,d+1))}f++}if(s)(function d(){setTimeout(function(){if(f>m||Date.now()>g)return s();O()||d()},0)})();else for(;f<=m&&Date.now()<=g;){var R=O();if(R)return R}},addToPath:function(e,t,r,o,s){var i=e.lastComponent;return i&&!s.oneChangePerToken&&i.added===t&&i.removed===r?{oldPos:e.oldPos+o,lastComponent:{count:i.count+1,added:t,removed:r,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:t,removed:r,previousComponent:i}}},extractCommon:function(e,t,r,o,s){for(var i=t.length,a=r.length,l=e.oldPos,c=l-o,f=0;c+1<i&&l+1<a&&this.equals(r[l+1],t[c+1],s);)c++,l++,f++,s.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return f&&!s.oneChangePerToken&&(e.lastComponent={count:f,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,c},equals:function(e,t,r){return r.comparator?r.comparator(e,t):e===t||r.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(e[r]);return t},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function V(n,e,t,r,o){for(var s=[],i;e;)s.push(e),i=e.previousComponent,delete e.previousComponent,e=i;s.reverse();for(var a=0,l=s.length,c=0,f=0;a<l;a++){var m=s[a];if(m.removed)m.value=n.join(r.slice(f,f+m.count)),f+=m.count;else{if(!m.added&&o){var y=t.slice(c,c+m.count);y=y.map(function(g,v){var p=r[f+v];return p.length>g.length?p:g}),m.value=n.join(y)}else m.value=n.join(t.slice(c,c+m.count));c+=m.count,m.added||(f+=m.count)}}return s}function X(n,e){var t;for(t=0;t<n.length&&t<e.length;t++)if(n[t]!=e[t])return n.slice(0,t);return n.slice(0,t)}function Q(n,e){var t;if(!n||!e||n[n.length-1]!=e[e.length-1])return"";for(t=0;t<n.length&&t<e.length;t++)if(n[n.length-(t+1)]!=e[e.length-(t+1)])return n.slice(-t);return n.slice(-t)}function S(n,e,t){if(n.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return t+n.slice(e.length)}function z(n,e,t){if(!e)return n+t;if(n.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(n)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return n.slice(0,-e.length)+t}function N(n,e){return S(n,e,"")}function A(n,e){return z(n,e,"")}function Z(n,e){return e.slice(0,Ve(n,e))}function Ve(n,e){var t=0;n.length>e.length&&(t=n.length-e.length);var r=e.length;n.length<e.length&&(r=n.length);var o=Array(r),s=0;o[0]=0;for(var i=1;i<r;i++){for(e[i]==e[s]?o[i]=o[s]:o[i]=s;s>0&&e[i]!=e[s];)s=o[s];e[i]==e[s]&&s++}s=0;for(var a=t;a<n.length;a++){for(;s>0&&n[a]!=e[s];)s=o[s];n[a]==e[s]&&s++}return s}var b="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Xe=new RegExp("[".concat(b,"]+|\\s+|[^").concat(b,"]"),"ug"),k=new h;k.equals=function(n,e,t){return t.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),n.trim()===e.trim()};k.tokenize=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(e.intlSegmenter.segment(n),function(s){return s.segment})}else t=n.match(Xe)||[];var r=[],o=null;return t.forEach(function(s){/\s/.test(s)?o==null?r.push(s):r.push(r.pop()+s):/\s/.test(o)?r[r.length-1]==o?r.push(r.pop()+s):r.push(o+s):r.push(s),o=s}),r};k.join=function(n){return n.map(function(e,t){return t==0?e:e.replace(/^\s+/,"")}).join("")};k.postProcess=function(n,e){if(!n||e.oneChangePerToken)return n;var t=null,r=null,o=null;return n.forEach(function(s){s.added?r=s:s.removed?o=s:((r||o)&&W(t,o,r,s),t=s,r=null,o=null)}),(r||o)&&W(t,o,r,null),n};function W(n,e,t,r){if(e&&t){var o=e.value.match(/^\s*/)[0],s=e.value.match(/\s*$/)[0],i=t.value.match(/^\s*/)[0],a=t.value.match(/\s*$/)[0];if(n){var l=X(o,i);n.value=z(n.value,i,l),e.value=N(e.value,l),t.value=N(t.value,l)}if(r){var c=Q(s,a);r.value=S(r.value,a,c),e.value=A(e.value,c),t.value=A(t.value,c)}}else if(t)n&&(t.value=t.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(n&&r){var f=r.value.match(/^\s*/)[0],m=e.value.match(/^\s*/)[0],y=e.value.match(/\s*$/)[0],g=X(f,m);e.value=N(e.value,g);var v=Q(N(f,g),y);e.value=A(e.value,v),r.value=S(r.value,f,v),n.value=z(n.value,f,f.slice(0,f.length-v.length))}else if(r){var p=r.value.match(/^\s*/)[0],T=e.value.match(/\s*$/)[0],D=Z(T,p);e.value=A(e.value,D)}else if(n){var O=n.value.match(/\s*$/)[0],R=e.value.match(/^\s*/)[0],d=Z(O,R);e.value=N(e.value,d)}}var Qe=new h;Qe.tokenize=function(n){var e=new RegExp("(\\r?\\n)|[".concat(b,"]+|[^\\S\\n\\r]+|[^").concat(b,"]"),"ug");return n.match(e)||[]};var _=new h;_.tokenize=function(n,e){e.stripTrailingCr&&(n=n.replace(/\r\n/g,`
`));var t=[],r=n.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var o=0;o<r.length;o++){var s=r[o];o%2&&!e.newlineIsToken?t[t.length-1]+=s:t.push(s)}return t};_.equals=function(n,e,t){return t.ignoreWhitespace?((!t.newlineIsToken||!n.includes(`
`))&&(n=n.trim()),(!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(n.endsWith(`
`)&&(n=n.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),h.prototype.equals.call(this,n,e,t)};function Ze(n,e,t){return _.diff(n,e,t)}var We=new h;We.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};var Ye=new h;Ye.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};function B(n){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(n)}var w=new h;w.useLongestToken=!0;w.tokenize=_.tokenize;w.castInput=function(n,e){var t=e.undefinedReplacement,r=e.stringifyReplacer,o=r===void 0?function(s,i){return typeof i>"u"?t:i}:r;return typeof n=="string"?n:JSON.stringify(P(n,null,null,o),o,"  ")};w.equals=function(n,e,t){return h.prototype.equals.call(w,n.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),t)};function P(n,e,t,r,o){e=e||[],t=t||[],r&&(n=r(o,n));var s;for(s=0;s<e.length;s+=1)if(e[s]===n)return t[s];var i;if(Object.prototype.toString.call(n)==="[object Array]"){for(e.push(n),i=new Array(n.length),t.push(i),s=0;s<n.length;s+=1)i[s]=P(n[s],e,t,r,o);return e.pop(),t.pop(),i}if(n&&n.toJSON&&(n=n.toJSON()),B(n)==="object"&&n!==null){e.push(n),i={},t.push(i);var a=[],l;for(l in n)Object.prototype.hasOwnProperty.call(n,l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],i[l]=P(n[l],e,t,r,l);e.pop(),t.pop()}else i=n;return i}var $=new h;$.tokenize=function(n){return n.slice()};$.join=$.removeEmpty=function(n){return n};var I=(n=>(n.ADDED="added",n.REMOVED="removed",n.UNCHANGED="unchanged",n))(I||{});function q(n){if(n==="")return 0;const e=n.split(`
`).length;return n.endsWith(`
`)?e-1:e}function Ke(n,e){return Ze(n,e,{newlineIsToken:!0}).map(r=>({count:r.count??q(r.value),value:r.value,type:r.added?"added":r.removed?"removed":"unchanged"}))}function en(n){let e="";for(const{type:t,value:r}of n)(t==="added"||t==="unchanged")&&(e+=r);return e}function nn(n,e){const t=q(e),r=sn(n,t);return{changes:Ke(r,e),numLinesDiffed:t}}function tn(n){const e=[...n],t=[],r=[];for(;e.length>0;){const o=e[e.length-1];if(o.type===I.REMOVED)e.pop(),o.type===I.REMOVED&&t.unshift(o);else if(o.type===I.ADDED)e.pop(),r.unshift(o);else break}return{prunedChanges:[...e,...r],prunedRemovedChanges:t}}function rn(n,e){const{changes:t,numLinesDiffed:r}=nn(n,e),{prunedChanges:o,prunedRemovedChanges:s}=tn(t),i=en(o),a=s.map(c=>c.value).join(`
`),l=se(n,r,"start");return{content:i+a+l,numLinesDiffed:q(i)}}function sn(n,e){if(e<=0)return"";let t=0,r=n.length;for(let o=0;o<n.length;o++)if(n[o]===`
`&&(t++,t===e)){r=o+1;break}return n.substring(0,r)}function se(n,e,t="start"){if(e<=0)return n;if(t==="start"){let i=0;for(let a=0;a<n.length;a++)if(n[a]===`
`&&(i++,i===e))return n.substring(a+1);return""}let r=0,o=-1;const s=n.endsWith(`
`)?e+1:e;for(let i=n.length-1;i>=0;i--)if(n[i]===`
`&&(r++,r===s)){o=i;break}return o===-1?"":n.substring(0,o+1)}function hn(n,e){const t=n?.type??De.LOADING,r=n?.content??"",o=Ee(n);if(!Le(t)||e==null||!o||!Ne(n))return{content:r,currentlyStreamingLineIndex:null};const s=se(r,1,"end");if(s==="")return{content:e.content,currentlyStreamingLineIndex:0};const i=rn(e.content,s);return{content:i.content,currentlyStreamingLineIndex:i.numLinesDiffed}}class on{constructor(e){this.params=e}get isReadonly(){return Object.values(this.params).some(e=>!!e)}get isHistoricalVersion(){return!!this.params.isHistoricalVersion}get isStreaming(){return!!this.params.isTextdocStreaming||!!this.params.isRequestActive}get isTextdocStreaming(){return!!this.params.isTextdocStreaming}get isStreamingFromNative(){return this.isStreaming&&this.params.streamingSource===we.NATIVE}get isRestoring(){return!!this.params.isRestoring}get isShowingChanges(){return!!this.params.isShowingChanges}get isReadonlyFromQueryParam(){return!!this.params.isReadonlyFromQueryParam}}const pn=n=>new on(n);export{dn as A,Fe as C,Ge as D,Ae as L,Je as M,Re as O,vn as a,j as b,pn as c,He as d,U as e,qe as f,hn as g};
//# sourceMappingURL=m63dc3fsvxbbdk5v.js.map
