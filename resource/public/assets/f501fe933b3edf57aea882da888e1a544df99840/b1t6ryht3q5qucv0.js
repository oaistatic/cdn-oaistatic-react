import{g as W,r as b,j as o,au as k,c as _}from"./n1tvutderx19k1zs.js";import{T as w}from"./cbo9u87sapdr5cy5.js";import{du as H,dv as R,dw as $,dx as G,dy as V}from"./pceg3mlzf8dzw9ob.js";import{D}from"./m63dc3fsvxbbdk5v.js";import{C as S,T as J}from"./i2erpsf8wrksq3mb.js";import{S as K}from"./coj1pqvvjvheacvo.js";import{d as g,bJ as Z}from"./n26mv7rx7nquqst2.js";import{P as E}from"./m87kbgi8rvuhalc0.js";import{_ as q}from"./isjdmfmhzv09v01t.js";import{g as Q}from"./btagl6w1gub4aw61.js";import"./jfxozbrcnsxchwcx.js";var X=q,Y=H,T=R,C=parseFloat,F=Math.min,U=Math.random;function z(e,t,n){if(n&&typeof n!="boolean"&&Y(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=T(e),t===void 0?(t=e,e=0):t=T(t)),e>t){var f=e;e=t,t=f}if(n||e%1||t%1){var d=U();return F(e+d*(t-e+C("1e-"+((d+"").length-1))),t)}return X(e,t)}var P=z;const I=W(P),O=({isHovered:e=!1})=>{const t=_();return o.jsx(Z,{label:t.formatMessage({id:"KMbgyZ",defaultMessage:"Open in canvas"}),children:o.jsx(k.div,{role:"button",animate:{opacity:e?1:.64},whileHover:{opacity:1},transition:{type:"tween",duration:.18},className:"text-token-text-secondary transition-colors",children:o.jsx(K,{className:"icon-md"})})})},tt=({isCanvasOpen:e,isFocused:t,isHovered:n,isInlinePreview:f,size:d})=>e?t?"0px 2px 6px 0px rgba(0, 0, 0, 0.06)":"0px 2px 6px 0px rgba(0, 0, 0, 0)":f?n||t?`0px ${d==="large"?12:4}px ${d==="large"?32:10}px 0px rgba(0, 0, 0, 0.064)`:`0px ${d==="large"?6:4}px ${d==="large"?14:4}px 0px rgba(0, 0, 0, 0.04)`:"0px 2px 6px 0px rgba(0, 0, 0, 0)",et=({textdocId:e,name:t,tag:n,icon:f,iconSelected:d,marginBottom:h,size:c="large",isCanvasOpen:a=!1,isDisabled:s=!1,isFocused:l=!1,isInferring:y=!1,isInlinePreview:r=!1,isStreaming:x=!1,isUserMessage:i=!1,onClick:j,children:p})=>{const u=b.useRef(null),[m,N]=b.useState(!1),[A]=b.useState(()=>I(100,180,!1)),M=l&&a?d??f:f,L=M?o.jsx("span",{className:g("flex-shrink-0 transition-[filter]",{grayscale:!l&&!m}),children:M}):o.jsx("div",{className:"flex h-5 w-[18px] flex-shrink-0 items-center overflow-hidden",children:o.jsx(E,{lines:1,size:"base",width:100,widthVariance:0})}),v=!t||y?o.jsx("div",{className:"flex h-6 flex-grow items-center overflow-hidden",style:{width:A},children:o.jsx(E,{lines:1,size:"base",width:100,widthVariance:0})}):o.jsx("span",{className:"min-w-0 truncate",children:t}),B=()=>{!u.current||s||($.logButtonClick(G.MESSAGE_ATTACHMENT,{type:n}),V(u.current),j?.())};return o.jsxs(k.div,{role:"button",id:Q(e),initial:{opacity:x?0:1,scale:x?.9:1},animate:{opacity:1,scale:1},transition:{type:"spring",bounce:0,duration:.72},className:g("popover relative z-0 flex select-none flex-col overflow-hidden border bg-token-main-surface-primary transition-shadow duration-500",s?"cursor-default":"cursor-pointer",{"border-token-text-tertiary font-medium dark:border-gray-600":l&&a,"font-regular":!l,"border-token-border-light":!m&&!l,"border-token-border-medium":m&&!l,"flex min-w-0 flex-shrink flex-grow-0 items-center justify-between self-start rounded-xl":a||!r,"rounded-2xl":!a&&r,"max-w-full":!i&&(a||!r),"max-w-[var(--user-chat-width,70%)]":i&&(a||!r),"w-full":!i&&!a&&r,"w-[var(--user-chat-width,70%)]":i&&!a&&r}),onMouseEnter:()=>!s&&N(!0),onMouseLeave:()=>N(!1),onClick:B,ref:u,style:{marginBottom:h,height:a||!r?void 0:c==="large"?"22rem":"10rem",width:c==="small"?"300px":void 0,boxShadow:tt({isCanvasOpen:a,isFocused:l,isHovered:m,isInlinePreview:r,size:c})},children:[o.jsxs("div",{className:g("flex w-full min-w-0 items-center justify-between gap-2 self-start border-token-border-light px-4 transition-colors duration-700",{"border-token-border-light":!m&&!l,"border-token-border-medium":m&&!l,"text-sm font-medium text-token-text-primary":!a&&m&&r,"py-2":a||!r,"py-3":!a&&r,"text-sm font-medium text-token-text-secondary":!a&&!m&&r}),children:[o.jsxs("div",{className:g("flex min-w-0 items-center",{"gap-2":a||!r,"gap-3.5":!a&&r}),children:[L,v]}),a?o.jsx(k.span,{animate:x?"show":"initial",variants:{initial:{opacity:0,paddingLeft:0,width:"0"},show:{opacity:1,paddingLeft:2,width:"24px"}},transition:{type:"tween",duration:.18},children:x&&o.jsx(w,{gap:1,padding:0})}):r&&!s?o.jsx(O,{isHovered:m}):null]}),o.jsxs("div",{className:"relative flex min-h-0 w-full flex-1 flex-col self-end",children:[!a&&p,r&&!a&&o.jsx(S,{size:c,position:"bottom"}),r&&c==="small"&&!a&&o.jsx(S,{size:c,position:"right"})]})]})},it=({textdocId:e,name:t,tag:n,icon:f,iconSelected:d,isCanvasOpen:h=!1,isFetching:c=!1,isFocused:a=!1,isInlinePreview:s=!1,isStreaming:l=!1,isUserMessage:y=!1,onClick:r})=>{const[x,i]=b.useState(!1),j=u=>{i(u>0)},p=h||!s?12:!h&&s?16:void 0;return o.jsx(et,{textdocId:e,name:t,tag:n,icon:f,iconSelected:d,marginBottom:p,isCanvasOpen:h,isFocused:a,isInlinePreview:s,isStreaming:l,isUserMessage:y,onClick:r,children:s&&o.jsx("div",{className:g("relative flex min-h-0 flex-auto flex-col overflow-hidden border-t transition-colors",{"border-token-border-light":x,"border-transparent":!x}),children:c?o.jsx(D,{}):!!e&&o.jsx(J,{onScroll:j,textdocId:e})})})};export{it as CanvasMessageAttachment,et as CanvasMessageAttachmentWrapper};
//# sourceMappingURL=b1t6ryht3q5qucv0.js.map
