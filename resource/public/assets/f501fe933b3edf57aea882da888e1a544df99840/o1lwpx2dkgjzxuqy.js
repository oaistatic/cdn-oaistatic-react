import{bY as O,d as C,bd as Te,be as ye,ag as I,j as K,gM as v,bH as N,b_ as xe,bJ as we,dm as ee,bW as b,D as Me,eB as Ce,B as ae,ab as be,gN as q,gv as Ne,gw as X,ef as Oe,eX as Ae}from"./n26mv7rx7nquqst2.js";import{r as p,c as A,j as e,M as i,a as F,e as Ge,h as _e,b as ie}from"./n1tvutderx19k1zs.js";import{f0 as d,f2 as se,bE as ke,gJ as Re,bI as k,K as te,bX as De,f4 as he,bM as Ee,i9 as Le,dS as Ie,cB as We,ah as ze,gp as Fe,iG as Be,dT as He,iH as Ue,iI as Ve,f7 as fe,cY as qe,f1 as w}from"./pceg3mlzf8dzw9ob.js";import{a as Ke,b as Ye}from"./cwuetwkcmvp8j7tw.js";import{S as Qe}from"./fpfnzglbzdoh30ss.js";import{g as je}from"./m35dbrsevnzmsvv9.js";import{S as Je}from"./oy248fbbcvutqmly.js";import{S as $e}from"./gtg497zhtiwyr61v.js";import{A as Xe}from"./ml3bmxme9zwzi4dg.js";import{V as Ze}from"./d3y72ugnrmac5z1v.js";import{R as es}from"./l4c41pejol0bhhf7.js";import{a as ss,b as ts,c as as,d as is,e as ns,f as rs,A as ls}from"./l5b75d2h8s66e7sn.js";import{u as os,c as cs}from"./ncf08njdg2krpjmq.js";import"./n0d8tgahmhdeo0ie.js";import"./fws03tm73d9qjm3m.js";import"./kodyf94rms2l778g.js";import"./hexva2s1lo90zidg.js";import"./nraolmtygmvq3wcf.js";import"./ecp3vwsjvu9v61q0.js";import"./ngn9hyh36iu8kqm0.js";import"./hau51huxh66v0dxz.js";import"./lvedelvd2wa5y0ah.js";import"./kykf41pnxj3u2jkm.js";import"./fob3ixm19u5bo41r.js";import"./ifl0nupxani7x3i4.js";import"./bei4zk14rknuqpj2.js";import"./fena7q4yinfq1jc5.js";import"./h62hagcisi6jaqob.js";import"./luscs3xv1j9ybwi2.js";import"./zs3gwhpec3gpzbzg.js";import"./lt8myo97bxkt0gi4.js";import"./egjj718ybwa4lzxd.js";import"./gbcm5ghq9ddzv4er.js";import"./gxnchqsr4k5w4z36.js";import"./fr3pvdprxejqauuy.js";import"./nxz31zqr36vgy6hm.js";import"./ezlmbh2lexxjbpm2.js";import"./hdig35v8qpj0yxxm.js";import"./ch48ne0b8201ps9r.js";function ds({value:t,title:s,valueClassName:a,onChange:n,emptyMessage:r}){const[l,c]=p.useState(!1),[x,m]=p.useState(""),u=A(),y=p.useRef(null),g=()=>{if(x!==""){const h=x.trim();n([...t,h]),c(!1),m("")}};return e.jsxs(d.Root,{className:"w-auto",children:[e.jsxs(d.Header,{children:[e.jsx(d.HeaderCell,{children:s}),e.jsx(d.HeaderCell,{})]}),e.jsxs(d.Body,{children:[t.map((h,f)=>e.jsxs(d.Row,{children:[e.jsx(d.Cell,{className:a,children:h}),e.jsx(d.Cell,{textAlign:"right",children:e.jsx(O,{type:"button",onClick:()=>{n(t.filter((G,M)=>M!==f))},children:e.jsx(se,{className:"icon-sm"})})})]},f)),r&&t.length===0?e.jsx(d.Row,{children:e.jsx(d.Cell,{colSpan:2,className:"text-center text-sm italic",children:r})}):null,e.jsxs(d.Row,{children:[e.jsxs("div",{className:C("mt-2 flex flex-row gap-2 p-1",!l&&"hidden"),children:[e.jsx(ke,{ariaLabel:u.formatMessage({id:"CgP6Du",defaultMessage:"Add new domain"}),className:"w-80",name:"newDomain",value:x,onChange:h=>{m(h.target.value)},ref:y,onPressEnter:g,placeholder:"example.com"}),e.jsx(O,{className:"grow-0",onClick:g,children:e.jsx(i,{id:"svRVol",defaultMessage:"Add"})})]}),!l&&e.jsxs(O,{type:"button",onClick:()=>{c(!0),setTimeout(()=>{y.current?.focus()},0)},className:"mt-2",children:[e.jsx(Re,{className:"icon-sm inline-block"}),e.jsx(i,{id:"J5y3+M",defaultMessage:"Add new domain"})]})]})]})]})}const ps=t=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 6C3 4.34315 4.34315 3 6 3H18C19.6569 3 21 4.34315 21 6V7.11526C21 7.96049 20.6434 8.76651 20.018 9.33508L15.8273 13.1448C15.6189 13.3343 15.5 13.603 15.5 13.8847V19.882C15.5 21.3687 13.9354 22.3357 12.6056 21.6708L9.60557 20.1708C8.92801 19.832 8.5 19.1395 8.5 18.382V13.8847C8.5 13.603 8.38115 13.3343 8.17267 13.1448L3.98198 9.33508C3.35656 8.76651 3 7.96049 3 7.11526V6ZM6 5C5.44772 5 5 5.44772 5 6V7.11526C5 7.397 5.11885 7.66568 5.32733 7.8552L9.51802 11.6649C10.1434 12.2335 10.5 13.0395 10.5 13.8847V18.382L13.5 19.882V13.8847C13.5 13.0395 13.8566 12.2335 14.482 11.6649L18.6727 7.8552C18.8811 7.66568 19 7.39701 19 7.11526V6C19 5.44772 18.5523 5 18 5H6Z",fill:"currentColor"}));function ms({isOpen:t,onClose:s,account:a,gpt:n}){const r=A(),[l,c]=p.useState(!1),[x,m]=p.useState(""),[u,y]=p.useState(!0);return e.jsxs(Te,{size:"custom",className:"max-w-lg text-sm",isOpen:t,onClose:ye,type:"success",title:r.formatMessage(W.deleteModalTitle),children:[e.jsx("p",{className:"mb-4 text-token-text-primary",children:e.jsx(i,{...W.deleteModalPrompt,values:{gptName:n.gizmo.display.name}})}),!u&&e.jsx("p",{className:"text-red-500",children:e.jsx(i,{...W.invalidEmail})}),e.jsx(ke,{ariaLabel:r.formatMessage({id:"x4A5l2",defaultMessage:"Email"}),className:C("px-3 py-2",u?"":"border-red-500"),name:"email",type:"email",value:x,placeholder:"Email",onChange:g=>{m(g.target.value)}}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(O,{color:"secondary",onClick:()=>{s(!1),c(!1),y(!0)},loading:l,children:e.jsx(i,{...W.cancelButtonText})}),e.jsx(O,{color:"primary",loading:l,onClick:()=>{c(!0),y(!0),x==""||!Ze.test(x)?(y(!1),c(!1)):I.updateWorkspaceGPTOwner(a.id,n.gizmo.id,x).then(()=>{s(!0),c(!1),y(!0)},()=>{y(!1),c(!1)})},children:e.jsx(i,{...W.deleteButtonText})})]})]})}const W=K({deleteModalTitle:{id:"changeOwnerModal.changeModalTitle",defaultMessage:"Change Owner"},deleteModalPrompt:{id:"changeOwnerModal.changeModalPrompt",defaultMessage:"New owner of {gptName}"},cancelButtonText:{id:"changeOwnerModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"changeOwnerModal.changeOwnerButtonText",defaultMessage:"Change owner"},invalidEmail:{id:"changeOwnerModal.invalidEmail",defaultMessage:"Email is invalid or does not belong to a member in this workspace"}});function us({isOpen:t,onClose:s,account:a,gpt:n}){const r=A(),[l,c]=p.useState(!1);return e.jsxs(Te,{size:"custom",className:"max-w-lg text-sm",isOpen:t,onClose:ye,type:"success",title:r.formatMessage(V.deleteModalTitle),children:[e.jsx("p",{className:"mb-4 text-token-text-primary",children:e.jsx(i,{...V.deleteModalPrompt,values:{gptName:n.gizmo.display.name}})}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(O,{color:"secondary",onClick:()=>{s(!1)},loading:l,children:e.jsx(i,{...V.cancelButtonText})}),e.jsx(O,{color:"danger",loading:l,onClick:()=>{c(!0),I.deleteWorkspaceGPT(a.id,n.gizmo.id).finally(()=>{s(!0),c(!1)})},children:e.jsx(i,{...V.deleteButtonText})})]})]})}const V=K({deleteModalTitle:{id:"deleteGPTModal.accessModalTitle",defaultMessage:"Delete GPT"},deleteModalPrompt:{id:"deleteGPTModal.accessModalPrompt",defaultMessage:"Are you sure you would like to delete {gptName}? This action can not be undone."},cancelButtonText:{id:"deleteGPTModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"deleteGPTModal.deleteButtonText",defaultMessage:"Delete"}}),z=10;function gs({account:t,gpt:s,thirdParty:a=!1}){const n=F(),[r,l]=p.useState(!1),[c,x]=p.useState(!1),[m,u]=p.useState(!1),[y,g]=p.useState(!1),h=Ge(),f=new Date(a?s.gizmo.workspace_approval_date??"":s.gizmo.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),G=new Date(s.gizmo.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),M=s.tools.filter(S=>S.type===N.JIT_PLUGIN).map(S=>S.type===N.JIT_PLUGIN?S.metadata.domain:"");let D="";return M.length===0?D="":M.length===1?D=M[0]:D=`${M.length} domains`,e.jsxs(e.Fragment,{children:[e.jsxs(d.Row,{children:[e.jsx(d.Cell,{className:"py-4 pr-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:e.jsx(Ie,{src:s.gizmo.display.profile_picture_url,isFirstParty:s.gizmo.tags?.includes(We.FirstParty)??!1,alt:s.gizmo.display.name,className:"h-10 w-10"})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-semibold text-token-text-primary",children:s.gizmo.display.name})})]})}),e.jsx(d.Cell,{className:"p-2 text-sm text-token-text-secondary",children:s.gizmo.author.display_name}),e.jsx(d.Cell,{className:"p-2 text-sm text-token-text-secondary",children:D}),!a&&e.jsx(d.Cell,{className:"p-2 text-sm text-token-text-secondary",children:e.jsx(ws,{gizmo:s,account:t})}),!a&&e.jsx(d.Cell,{className:"p-2 text-sm text-token-text-secondary",children:s.gizmo.vanity_metrics?.num_conversations_str??0}),e.jsx(d.Cell,{className:"p-2 text-sm text-token-text-secondary",children:f}),e.jsx(d.Cell,{className:"p-2 text-sm text-token-text-secondary",children:G}),e.jsx(d.Cell,{className:"p-2",children:e.jsxs(b.Root,{children:[e.jsx(b.Trigger,{className:"-my-2",children:e.jsx(ze,{className:"icon-sm"})}),e.jsx(b.Portal,{children:a?e.jsx(b.Content,{children:e.jsx(b.Item,{onClick:()=>{g(!0)},color:"danger",icon:se,children:e.jsx(i,{...o.removeFromWorkspace})})}):e.jsxs(b.Content,{children:[e.jsx(b.Item,{onClick:()=>{l(s)},icon:Je,children:e.jsx(i,{...o.changeAccess})}),e.jsx(b.Item,{onClick:()=>{u(!0)},icon:Fe,children:e.jsx(i,{...o.changeOwner})}),e.jsx(b.Item,{onClick:()=>{x(!0)},icon:se,color:"danger",children:e.jsx(i,{...o.deleteGPT})})]})})]})})]}),r&&e.jsx($e,{publishedGizmo:r,gizmo:Be(r),promoteGizmo:async()=>{},onClose:()=>{l(!1)},showActionsModal:()=>{},appealGizmo:async()=>{h(He(r.gizmo.id))},setAppealState:()=>{},shareOnly:!0,updateGizmo:()=>{},workspaceOwner:!0}),e.jsx(ms,{isOpen:m,gpt:s,account:t,onClose:S=>{u(!1),S&&n.invalidateQueries({queryKey:["workspace",t.id,v.WORKSPACE]})}}),e.jsx(us,{isOpen:c,gpt:s,account:t,onClose:S=>{x(!1),S&&n.invalidateQueries({queryKey:["workspace",t.id,v.WORKSPACE]})}}),e.jsx(es,{isOpen:y,gpt:s,account:t,onClose:S=>{g(!1),S&&n.invalidateQueries({queryKey:["workspace",t.id,v.THIRD_PARTY]})}})]})}function xs(t,s,a){return t.sort((n,r)=>{let l,c;if(s==="created_at")l=new Date(n.gizmo.created_at).getTime(),c=new Date(r.gizmo.created_at).getTime();else if(s==="updated_at")l=new Date(n.gizmo.updated_at).getTime(),c=new Date(r.gizmo.updated_at).getTime();else if(s==="workspace_approval_date")l=new Date(n.gizmo.workspace_approval_date??"").getTime(),c=new Date(r.gizmo.workspace_approval_date??"").getTime();else if(s==="vanity_metrics.num_conversations_str")l=n.gizmo.vanity_metrics?.num_conversations??0,c=r.gizmo.vanity_metrics?.num_conversations??0;else throw new Error(`Invalid field: ${s}`);if(a==="asc")return l-c;if(a==="desc")return c-l;throw new Error(`Invalid direction: ${a}`)})}function hs(t){switch(t){case k.User:case k.Group:return k.Private;case k.WorkspaceLink:return k.Workspace;default:return t}}function fs(t,s){return t.filter(a=>{const n=a.tools.some(c=>c.type===N.MEMORY?!1:s.tools[c.type]),r=hs(a.gizmo.share_recipient),l=s.share_recipient[r];return n||l})}function js(t,s){const a=s.toLowerCase();return t.filter(n=>{const r=n.gizmo.author.display_name&&n.gizmo.author.display_name.toLowerCase(),l=n.gizmo.display.name.toLowerCase();return r&&r.includes(a)||l.includes(a)})}function Ts({account:t,showThirdParty:s}){const[a,n]=p.useState(v.WORKSPACE),{data:r,fetchNextPage:l,hasNextPage:c,isError:x,isFetchingNextPage:m}=ys(t.id,a),u=A(),[y,g]=p.useState(!1),h=r?.pages.flatMap(j=>j.items)??[];p.useEffect(()=>{!x&&!m&&c&&l()},[m,c,x,l]);const f=c,G=p.useRef(null),[M,D]=p.useState(""),[S,ne]=p.useState(!1),[E,Se]=p.useState("updated_at"),[B,re]=p.useState("desc"),Y=B==="asc"?Ue:Ve,le={tools:{[N.BROWSER]:!1,[N.PYTHON]:!1,[N.JIT_PLUGIN]:!1,[N.RETRIEVAL]:!1,[N.DALLE]:!1,[N.CANVAS]:!1},share_recipient:{[k.Private]:!1,[k.Workspace]:!1,[k.Link]:!1,[k.Marketplace]:!1}},[L,oe]=p.useState(le),[Q,H]=p.useState(0),ve=F();p.useEffect(()=>{S&&G.current&&G.current.focus()},[S]);function ce(j,_){const{id:R,checked:Pe}=j.currentTarget,ge={...L};ge[_][R]=Pe,oe(ge),H(0)}function J(j){const _=E,R=B;E===j?re(B==="asc"?"desc":"asc"):(Se(j),re("desc")),Me.addAction("workspace_gpt_table_sorting",{column:j,previousSort:_,previousDirection:R,newDirection:_===E?R==="asc"?"desc":"asc":"desc"})}let de=0,pe=0;const $=Object.values(L.tools).filter(Boolean).length+Object.values(L.share_recipient).filter(Boolean).length;let P=[],me=0;const U=r===void 0,ue=!U&&h.length>0;return U||(me=Math.min(h.length,z),pe=Math.ceil(h.length/z),f?P=h:P=xs(h,E,B),M!==""&&(P=js(P,M)),$>0&&(P=fs(P,L)),de=Math.ceil(P.length/z),P=P.slice(Q*z,(Q+1)*z)),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between border-b border-token-border-light",children:[e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsx("a",{className:C("text-l pb-4 font-semibold",a===v.WORKSPACE?"border-b border-token-text-secondary text-token-text-primary":"cursor-pointer text-token-text-tertiary"),onClick:()=>{n(v.WORKSPACE)},children:e.jsx(i,{...o.workspaceTab})}),s&&e.jsx("a",{className:C("text-l pb-4 font-semibold",a===v.THIRD_PARTY?"border-b border-token-text-secondary text-token-text-primary":"cursor-pointer text-token-text-tertiary"),onClick:()=>{n(v.THIRD_PARTY)},children:e.jsx(i,{...o.thirdPartyTab})})]}),!U&&e.jsxs("div",{className:"flex items-center space-x-4 pb-2",children:[$>0&&e.jsxs("div",{className:"mx-0 flex items-center space-x-1",onClick:()=>{oe(le)},children:[e.jsx("span",{children:$}),e.jsx(xe,{className:"cursor-pointer"})]}),e.jsx(we,{theme:"white",label:e.jsxs("div",{className:"w-64 space-y-4 p-2 font-normal text-token-text-primary",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,{...o.capabilitiesTitle})}),Object.entries(L.tools).map(([j,_])=>e.jsx(te,{id:j,checked:_,label:je(t,j),onChange:R=>{ce(R,"tools")}},j))]}),e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,{...o.whoHasAccessTitle})}),Object.entries(L.share_recipient).map(([j,_])=>e.jsx(te,{id:j,checked:_,label:je(t,j),onChange:R=>{ce(R,"share_recipient")}},j))]})]}),className:"bg-token-main-surface-primary",side:"bottom",withArrow:!1,align:"end",sideOffset:4,wide:!0,interactive:!0,children:e.jsx(ps,{className:"cursor-pointer"})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>{ne(!0)},children:e.jsx(De,{className:"icon-sm"})}),e.jsx("input",{type:"text",ref:G,placeholder:u.formatMessage(o.filterByNameOrBuilderPlaceholder),className:C("border-none bg-token-main-surface-primary px-0 transition-width duration-300 ease-in-out focus:ring-0",S?"w-64":"w-0"),value:M,onChange:()=>{H(0),D(G.current?.value??"")}}),e.jsx("div",{className:C("cursor-pointer",S?"":"hidden"),onClick:()=>{ne(!1),D(""),H(0)},children:e.jsx(xe,{className:"icon-sm"})}),s&&e.jsx(O,{color:"secondary",onClick:()=>{g(!0)},icon:he,children:e.jsx(i,{...o.approveAGPTButton})})]})]}),U?e.jsx("div",{className:"mt-8 flex items-center justify-center",children:e.jsx(ee,{})}):e.jsxs("div",{style:{height:me*85+75},className:"mb-8",children:[P.length>0?e.jsxs(d.Root,{size:"normal",className:"min-w-full overflow-hidden bg-token-main-surface-primary sm:rounded-lg",children:[e.jsxs(d.Header,{children:[e.jsx(d.HeaderCell,{className:"py-2 pr-4 text-left text-xs text-token-text-secondary",children:e.jsx(i,{...o.nameCellTitle})}),e.jsx(d.HeaderCell,{className:"px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsx(i,{...o.builderCellTitle})}),e.jsx(d.HeaderCell,{className:"px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsx(i,{...o.customActionsCellTitle})}),a==v.WORKSPACE&&e.jsx(d.HeaderCell,{className:"px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsx(i,{...o.whoHasAccessTitle})}),a==v.WORKSPACE&&e.jsx(d.HeaderCell,{className:"cursor-pointer px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{f||J("vanity_metrics.num_conversations_str")},children:[e.jsx("span",{children:e.jsx(i,{...o.chatsCellTitle})}),E==="vanity_metrics.num_conversations_str"&&e.jsx(Y,{className:C("icon-sm",f&&"opacity-30")})]})}),e.jsx(d.HeaderCell,{className:"cursor-pointer px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{f||J("created_at")},children:[e.jsx("span",{children:a==v.WORKSPACE?e.jsx(i,{...o.createdCellTitle}):e.jsx(i,{...o.approvedCellTitle})}),E==="created_at"&&e.jsx(Y,{className:C("icon-sm",f&&"opacity-30")})]})}),e.jsx(d.HeaderCell,{className:"cursor-pointer px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{f||J("updated_at")},children:[e.jsx("span",{children:e.jsx(i,{...o.updatedCellTitle})}),E==="updated_at"&&e.jsx(Y,{className:C("icon-sm",f&&"opacity-30")})]})}),e.jsx(d.HeaderCell,{className:"w-16"})]}),e.jsx(d.Body,{children:P.map(j=>e.jsx(gs,{account:t,gpt:j,thirdParty:a==v.THIRD_PARTY},j.gizmo.id))})]}):e.jsxs("div",{className:"flex h-full w-full flex-col items-center gap-4 py-16",children:[e.jsx(Ee,{className:"h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-token-text-secondary",children:a==v.THIRD_PARTY?ue?e.jsx(i,{...o.noWorkspaceApprovedGPTsFound}):e.jsx(i,{...o.noWorkspaceApprovedGPTs}):ue?e.jsx(i,{...o.noWorkspaceGPTsFound}):e.jsx(i,{...o.noWorkspaceGPTs})}),a==v.THIRD_PARTY&&e.jsx(O,{color:"secondary",onClick:()=>{g(!0)},icon:he,children:e.jsx(i,{...o.approveAGPTButton})})]}),f&&e.jsxs("div",{className:"my-4 flex w-full items-center justify-center gap-4 text-token-text-tertiary",children:[e.jsx(ee,{}),e.jsx(i,{...o.stillLoadingData})]}),pe>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(Le,{currentPage:Q,onChangeIndex:H,length:Math.max(de,1)})})]}),e.jsx(Xe,{isOpen:y,onClose:()=>{g(!1),ve.invalidateQueries({queryKey:["workspace",t.id,v.THIRD_PARTY]})},account:t})]})}function ys(t,s){return _e({queryKey:["workspace",t,"gizmos",s],queryFn:({pageParam:a})=>I.getWorkspaceGPTs(t,s,a),initialPageParam:"",getNextPageParam:a=>a.cursor})}function ws({gizmo:t,account:s}){const a=A(),n={[k.Private]:a.formatMessage(o.shareRecipientTitlePrivate),[k.User]:a.formatMessage(o.shareRecipientTitlePrivate),[k.Group]:a.formatMessage(o.shareRecipientTitlePrivate),[k.Link]:a.formatMessage(o.shareRecipientTitleLink),[k.Marketplace]:a.formatMessage(o.shareRecipientTitlePublic),[k.Workspace]:s.data.name,[k.WorkspaceLink]:s.data.name};if(["private","user","group"].includes(t.gizmo.sharing.recipient)){const{users:r,groups:l}=ks(t);return r===0&&l===0?e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(i,{...o.shareRecipientTitlePrivate})}):r>0&&l>0?e.jsxs("span",{className:"text-token-text-secondary",children:[n[t.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,{id:"fQ+tJG",defaultMessage:"Shared with {users} and {groups}",values:{users:a.formatMessage(o.userCount,{numUsers:r}),groups:a.formatMessage(o.groupCount,{numGroups:l})}})]}):r>0?e.jsxs("span",{className:"text-token-text-secondary",children:[n[t.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,{...o.userCount,values:{numUsers:r}})]}):e.jsxs("span",{className:"text-token-text-secondary",children:[n[t.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,{...o.groupCount,values:{numGroups:l}})]})}return e.jsx("span",{children:n[t.gizmo.share_recipient]})}function ks(t){if(t.gizmo.sharing.subjects){const s=t.gizmo.sharing.subjects.filter(n=>n.type===fe.USER).length,a=t.gizmo.sharing.subjects.filter(n=>n.type===fe.GROUP).length;return{users:s,groups:a}}return{users:0,groups:0}}const o=K({stillLoadingData:{id:"workspaceSettings.stillLoadingData",defaultMessage:"Don't see what you're looking for? Some GPTs are still loading..."},noWorkspaceGPTs:{id:"workspaceSettings.noWorkspaceGPTs",defaultMessage:"This workspace does not have any GPTs"},noWorkspaceGPTsFound:{id:"workspaceSettings.noWorkspaceGPTsFound",defaultMessage:"No workspace GPTs found"},noWorkspaceApprovedGPTs:{id:"workspaceSettings.noWorkspaceApprovedGPTs",defaultMessage:"You havent approved any third-party GPTs"},noWorkspaceApprovedGPTsFound:{id:"workspaceSettings.noWorkspaceApprovedGPTsFound",defaultMessage:"No approved third-party GPTs found"},workspaceTab:{id:"workspaceSettings.workspaceTab",defaultMessage:"Workspace"},thirdPartyTab:{id:"workspaceSettings.thirdPartyTab",defaultMessage:"Third-party"},capabilitiesTitle:{id:"workspaceSettings.capabilitiesTitle",defaultMessage:"Capabilities"},whoHasAccessTitle:{id:"workspaceSettings.whoHasAccessTitle",defaultMessage:"Who has access"},filterByNameOrBuilderPlaceholder:{id:"workspaceSettings.filterByNameOrBuilderPlaceholder",defaultMessage:"Filter by name or builder..."},nameCellTitle:{id:"workspaceSettings.nameCellTitle",defaultMessage:"Name"},builderCellTitle:{id:"workspaceSettings.builderCellTitle",defaultMessage:"Builder"},customActionsCellTitle:{id:"workspaceSettings.customActionsCellTitle",defaultMessage:"Custom Actions"},chatsCellTitle:{id:"workspaceSettings.chatsCellTitle",defaultMessage:"Chats"},createdCellTitle:{id:"workspaceSettings.createdCellTitle",defaultMessage:"Created"},updatedCellTitle:{id:"workspaceSettings.updatedCellTitle",defaultMessage:"Updated"},approvedCellTitle:{id:"workspaceSettings.approvedCellTitle",defaultMessage:"Approved"},approveAGPTButton:{id:"workspaceSettings.approveAGPTButton",defaultMessage:"Approve a GPT"},shareRecipientTitlePrivate:{id:"vyjlzc",defaultMessage:"Invite only"},shareRecipientTitleLink:{id:"workspaceSettings.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettings.shareRecipientTitlePublic",defaultMessage:"Public"},changeAccess:{id:"workspaceSettings.changeAccess",defaultMessage:"Change who has access"},changeOwner:{id:"workspaceSettings.changeOwner",defaultMessage:"Change Owner"},deleteGPT:{id:"workspaceSettings.deleteGPT",defaultMessage:"Delete GPT"},removeFromWorkspace:{id:"workspaceSettings.removeFromWorkspace",defaultMessage:"Remove from workspace"},userCount:{id:"P1xo2B",defaultMessage:"{numUsers, plural, one {# user} other {# users}}"},groupCount:{id:"4zRUED",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"}});function Z({title:t,description:s,children:a,upsellEnterprise:n=!1,className:r=""}){return e.jsx(Oe,{label:e.jsx(i,{...T.enterpriseRequiredMessage}),side:"top",sideOffset:4,disabled:!n,className:"max-w-5xl",children:e.jsxs(is,{className:C(n&&"text-token-text-tertiary","max-w-4xl",r),children:[e.jsxs(ns,{className:"flex items-center gap-3",children:[e.jsx(i,{...t}),n&&e.jsx("span",{className:"rounded-xl bg-token-main-surface-tertiary px-2 pb-0.5 text-sm",children:e.jsx(i,{...T.enterpriseUpsellPill})})]}),s&&e.jsx(rs,{className:"py-2 text-token-text-secondary",children:e.jsx(i,{...s})}),a]})})}function Ss({workspaceId:t,label:s,setting:a,defaultValue:n,values:r,disabled:l=!1}){const c=A(),x=ae(),m=F(),{variables:u,mutate:y}=ie({mutationFn:({setting:g,value:h})=>I.setWorkspaceShareSetting(t,g,h),onSettled:()=>{m.invalidateQueries({queryKey:["workspace-settings"]}),m.invalidateQueries({queryKey:["workspace"]})},onError:()=>{x.danger(c.formatMessage(T.featureSettingsUpdateFailed))}});return e.jsxs(ls,{children:[e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(i,{...s})}),e.jsxs(w.Root,{defaultValue:u?.value??n,onValueChange:g=>{y({setting:a,value:g})},disabled:l,children:[e.jsxs(w.Trigger,{className:"text-md focus-visible:border-none",children:[e.jsx(w.Value,{}),e.jsx(w.Icon,{})]}),e.jsx(w.Portal,{children:e.jsx(w.Content,{children:r.map((g,h)=>e.jsx(w.Item,{className:"text-md",value:g.value,children:e.jsx(i,{...g.display})},h))})})]})]})}function vs({workspaceId:t,value:s,upsellEnterprise:a=!1}){const n=A(),r=ae(),l=F(),{variables:c,mutate:x}=ie({mutationFn:({value:m})=>I.setWorkspaceThirdPartyGPTSetting(t,m),onSettled:()=>{l.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{r.danger(n.formatMessage(T.featureSettingsUpdateFailed))}});return e.jsxs(w.Root,{defaultValue:c?.value??s,onValueChange:m=>{x({value:m})},children:[e.jsxs(w.Trigger,{className:"border border-token-border-light text-base focus-visible:border-token-border-light",children:[e.jsx(w.Value,{}),e.jsx(w.Icon,{})]}),e.jsx(w.Portal,{children:e.jsxs(w.Content,{children:[e.jsx(w.Item,{className:"text-base",value:q.ALLOW_ALL,children:e.jsx(i,{...T.allowAllOption})}),!a&&e.jsx(w.Item,{className:"text-base",value:q.ALLOW_SPECIFIC,children:e.jsx(i,{...T.ownerApprovedOnlyOption})}),e.jsx(w.Item,{className:"text-base",value:q.ALLOW_NONE,children:e.jsx(i,{...T.dontAllowOption})})]})})]})}function Ps({workspaceId:t,data:s}){const a=A(),n=ae(),r=be(),l=F(),[c,x]=p.useState([]),m=ie({mutationFn:({value:f})=>I.setWorkspaceCustomActionsDomains(t,f),onSettled:()=>{l.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{n.danger(a.formatMessage(T.featureSettingsUpdateFailed))}});if(r==null)return null;const u=r.isTeam(),y=e.jsx(Z,{title:T.thirdPartyGPTsTitle,description:T.thirdPartyGPTsDescription,className:"border-b border-token-border-light pb-4",children:e.jsx("div",{children:e.jsx(vs,{workspaceId:t,value:s.allow_third_party_gpts,upsellEnterprise:u})})}),g=e.jsx(Z,{title:T.sidebarTitle,children:e.jsx(Ts,{account:r,showThirdParty:!u&&s.allow_third_party_gpts===q.ALLOW_SPECIFIC})}),h=s.allowed_custom_actions_domains!=null||s.beta_settings.workspace_gpt_custom_actions===!1;return e.jsxs(ss,{className:"max-w-5xl",children:[u&&y,u&&r.isOwnerOfAccount()&&g,u&&e.jsx(ts,{}),e.jsx(Z,{title:T.sharingSettingsTitle,upsellEnterprise:u,children:e.jsxs(as,{children:[e.jsx(Ss,{workspaceId:t,label:T.gptSharingTitle,disabled:u,setting:Ne.GPT_SHARE_SETTINGS,defaultValue:s.share_settings.gpt_share_setting,values:[{display:T.anyOneSelect,value:X.ANYONE},{display:T.workspaceMembersOnlySelect,value:X.WORKSPACE_ONLY},{display:T.inviteOnlySelect,value:X.NO_ONE}]}),e.jsxs("div",{className:"flex flex-col gap-4 py-6",children:[e.jsx("div",{className:"text-xl font-semibold",children:e.jsx(i,{id:"ugI3Yt",defaultMessage:"GPT actions"})}),e.jsx("div",{className:"py-2 text-sm text-token-text-secondary",children:e.jsx(i,{id:"HY2eof",defaultMessage:"GPT actions allow GPTs to call third-party APIs for tasks such as retrieving or modifying data. GPT actions are defined by GPT builders, and you can limit the domains that can be used for GPTs created in your workspace."})}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(te,{checked:!h,id:"allow-all-domains",onChange:f=>{f.currentTarget.checked?(x(s.allowed_custom_actions_domains),m.mutate({value:null})):m.mutate({value:c??[]})},label:e.jsxs("span",{className:"flex flex-row items-center",children:[e.jsx(i,{id:"WnWoqJ",defaultMessage:"Allow all domains for GPT actions"}),e.jsx(we,{sideOffset:4,interactive:!0,delayDuration:0,label:e.jsx(i,{id:"KjJtEm",defaultMessage:"Limit the Internet domains that can be used by GPTs created in your workspace. This does not apply to third-party GPTs."}),side:"top",children:e.jsx(Qe,{})})]})}),m.isPending&&e.jsx(ee,{})]}),h&&e.jsx(ds,{value:s.allowed_custom_actions_domains??[],title:a.formatMessage({id:"YetDcq",defaultMessage:"Domains"}),onChange:f=>{m.mutate({value:f})},emptyMessage:a.formatMessage({id:"rFH4IP",defaultMessage:"No domains added. No GPT actions will be allowed."})})]})]})}),!u&&y,!u&&r.isOwnerOfAccount()&&g]})}function Ms({currentWorkspaceId:t}){const{data:s,isLoading:a}=Ce(t),n=A();return e.jsxs(e.Fragment,{children:[e.jsx(qe,{children:e.jsx("title",{children:n.formatMessage(T.sidebarTitle)})}),e.jsx(Ke,{title:n.formatMessage(T.sidebarTitle)}),e.jsx(Ye,{showSpinner:a,children:s===void 0?null:e.jsx(Ps,{workspaceId:t,data:s})})]})}const T=K({sidebarTitle:{id:"workspaceSettingsOld.sidebarTitle",defaultMessage:"GPTs"},allowAllOption:{id:"workspaceSettingsOld.allowAllOption",defaultMessage:"Allow all"},ownerApprovedOnlyOption:{id:"workspaceSettingsOld.ownerApprovedOnlyOption",defaultMessage:"Owner-approved only"},dontAllowOption:{id:"workspaceSettingsOld.dontAllowOption",defaultMessage:"Don't allow"},retentionPolicyTitle:{id:"workspaceSettingsOld.retentionPolicyTitle",defaultMessage:"Retention policy"},thirdPartyGPTsTitle:{id:"workspaceSettingsOld.thirdPartyGPTsTitle",defaultMessage:"Third-party"},thirdPartyGPTsDescription:{id:"workspaceSettingsOld.thirdPartyGPTsDescription",defaultMessage:"Manage whether members can use GPTs created outside your workspace."},customActionsTooltip:{id:"workspaceSettingsOld.customActionsTooltip",defaultMessage:"Allow GPTs to use third-party services for tasks such as finding flights. Actions are defined by GPT builders."},searchTooltip:{id:"workspaceSettingsOld.searchTooltip",defaultMessage:"Web search allows ChatGPT and GPTs to answer questions on recent topics. When enabled, it may send search queries and general location information to Bing, but this data is not linked to or associated with user accounts."},customActionsOptionTitle:{id:"workspaceSettingsOld.pluginsOptionTitle.0",defaultMessage:"Custom actions"},appearanceTitle:{id:"workspaceSettingsOld.appearanceTitle",defaultMessage:"Appearance"},sharingSettingsTitle:{id:"workspaceSettingsOld.sharingSettingsTitle",defaultMessage:"Sharing"},gptSharingTitle:{id:"workspaceSettingsOld.gptSharingTitle",defaultMessage:"GPTs can be shared with..."},chatSharingTitle:{id:"workspaceSettingsOld.chatSharingTitle",defaultMessage:"Chats can be shared with..."},workspaceMembersOnlySelect:{id:"workspaceSettingsOld.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},anyOneSelect:{id:"workspaceSettingsOld.anyOneSelect",defaultMessage:"Anyone"},inviteOnlySelect:{id:"workspaceSettingsOld.inviteOnlySelect",defaultMessage:"Invite only"},featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"},conversationRetention:{id:"workspaceSettingsOld.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettingsOld.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettingsOld.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettingsOld.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettingsOld.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettingsOld.retentionChange",defaultMessage:"Contact your account manager to change this setting."},enterpriseUpsellPill:{id:"workspaceSettingsOld.enterpriseUpsellPill",defaultMessage:"Enterprise"},retentionSettingTooltip:{id:"workspaceSettingsOld.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},enterpriseRequiredMessage:{id:"workspaceSettingsOld.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},shareRecipientTitlePrivate:{id:"workspaceSettingsOld.shareRecipientTitlePrivate",defaultMessage:"Private"},shareRecipientTitleLink:{id:"workspaceSettingsOld.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettingsOld.shareRecipientTitlePublic",defaultMessage:"Public"}}),mt=Ae(function(){const s=os();return cs(),e.jsx(Ms,{...s})});export{mt as default};
//# sourceMappingURL=o1lwpx2dkgjzxuqy.js.map
