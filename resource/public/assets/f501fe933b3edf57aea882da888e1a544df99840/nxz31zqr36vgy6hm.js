import{r as T,j as s,aw as G,M as U,au as b}from"./n1tvutderx19k1zs.js";import{eR as H,U as P,cp as E,e7 as y,cq as I,dX as A,eS as D,eT as R,cr as q,cG as O,eU as B,eV as W,eW as X,eX as $,eY as K,cB as V,dS as Y,eZ as v,e_ as w,e$ as Z}from"./pceg3mlzf8dzw9ob.js";import{au as J,r as Q,s as z,gt as ee,d as x,b9 as se,ao as te,U as N,gu as ae,c6 as k,aw as re,bq as ne}from"./n26mv7rx7nquqst2.js";import{a as ie,b as oe,t as le}from"./hexva2s1lo90zidg.js";function C(){const{store:e}=H(),i=e.useSharedProps(),a=ie(),{clearSystemHintModeTrigger:n,getSystemHintModeTrigger:o}=oe(),{value:t}=J("1988730211");return T.useCallback(async(r,c,l)=>{if(!i)return;const{clientThreadId:d,onCreateNewCompletion:m,onResetState:h,conversationMode:p}=i;P.hideThreadHeader();const f=new E,g=a.has(y.Search),S=g?o(y.Search):void 0,j=Q(d),{systemHints:u,extraStreamParams:L}=t?I(Array.from(a)):{systemHints:Array.from(a),extraStreamParams:{}};await m({content:A(r),eventMetadata:{eventSource:"mouse"},extraStreamParams:L,completionMetadata:{suggestions:c,suggestion:r,suggestionIndex:l,conversationMode:p??j?.mode,systemHints:u,searchSource:S},messageMetadata:{is_starter_prompt:!0,suggestion_type:r.type,starter_prompt_id:"id"in r?r.id:void 0},turnTracker:f});const _=z.getMessageId(j);h(),D(r,l,d,_),ee()||le(),S&&g&&n(y.Search)},[i,a,o,t,n])}function je({clientThreadId:e}){const{isUnauthenticated:i}=se(),a=!i,n=te(e),o=N(e,u=>u?.isLoading),t=ae(),r=k(),c=C(),l=N(e,u=>u?.modelId??q),d=O(l),{promptStarters:m,isSuccess:h,isError:p}=B(n&&!o,e,r?2:4,void 0,void 0,l??void 0),f=m&&m?.length>0,g=h&&f&&a&&!d,{layer:S}=re("4031588851"),j=S.get("is_two_line",!1);return s.jsx(s.Fragment,{children:s.jsx(G,{children:(p||h)&&s.jsxs(s.Fragment,{children:[s.jsx(ne,{className:`h-12 w-12 ${a?"":"max-sm:hidden"}`}),g&&s.jsx(ce,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},promptStarters:m,onSelectStarterPrompt:c,isSendBlocked:t,clientThreadId:e,isTwoLine:j}),!f&&a&&!d&&s.jsx(M,{}),d?s.jsx(W,{}):null,p&&a&&s.jsx(M,{})]})})})}function M(){return s.jsx("div",{className:"mt-7 text-3xl",children:s.jsx(U,{id:"24tuqq",defaultMessage:"Hi, how can I help?"})})}function ce({promptStarters:e,onSelectStarterPrompt:i,isSendBlocked:a,clientThreadId:n,isTwoLine:o,...t}){return T.useEffect(()=>{X(e,n)},[n]),s.jsx(s.Fragment,{children:o?s.jsx(b.div,{...t,className:"absolute bottom-6 w-full px-4",children:s.jsx($,{children:s.jsx(xe,{starterPrompts:e,onSelectStarterPrompt:i,disabled:a})})}):s.jsx(b.div,{...t,children:s.jsx(F,{starterPrompts:e,onSelectStarterPrompt:i,disabled:a})})})}const de=/\s/;function F({starterPrompts:e,onSelectStarterPrompt:i,disabled:a,cssMobileDisplayLimit:n,marginOverride:o}){let t=e.map((r,c)=>{let l=r.oneliner??r.title;l===""&&(l=r.body);const d=de.test(l);return s.jsxs("button",{className:x(n!==void 0&&c>=n&&"max-sm:hidden","relative flex w-40 flex-col gap-2 rounded-2xl border border-token-border-light px-3 pb-4 pt-3 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed"),disabled:a,onClick:()=>i(r,e,c),children:[s.jsx(R,{category:r.category}),s.jsx("div",{className:x("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",d?"break-word":"break-all"),children:l})]},r.id??c)});if(t.length>2){const r=Math.floor(t.length/2);t=[t.slice(0,r),t.slice(r)].map((c,l)=>s.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:c},l))}return s.jsx("div",{className:x("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",o??"mt-12"),children:t})}function xe({starterPrompts:e,onSelectStarterPrompt:i,disabled:a}){let n=e.map((t,r)=>s.jsx("button",{className:"relative whitespace-nowrap rounded-2xl border border-token-border-light px-4 py-2 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed",disabled:a,onClick:()=>i(t,e,r),children:s.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.title&&s.jsx("div",{className:"truncate font-semibold",children:t.title}),s.jsx("div",{className:x("truncate font-normal",t.title?"opacity-50":""),children:t.body})]})},t.id??r));const o=Math.floor(n.length/2);return n=[n.slice(0,o),n.slice(o)].map((t,r)=>s.jsx("div",{className:"flex flex-col gap-2",children:t},r)),s.jsx("div",{className:"grid w-full grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-2",children:n})}function ve({gizmo:e,hideOwner:i=!1,children:a,className:n,avatarClassName:o,showStarterPrompts:t=!1,disableStarterPrompts:r=!1}){return e==null?null:s.jsx(s.Fragment,{children:s.jsxs("div",{className:x("flex h-full flex-col items-center justify-center text-token-text-primary","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",n),children:[s.jsx(me,{gizmo:e,avatarClassName:o}),s.jsx(he,{gizmo:e,hideOwner:i,showStarterPrompts:t,disableStarterPrompts:r}),a]})})}function me({gizmo:e,avatarClassName:i}){const a=!!(e!=null&&K(e)&&e?.gizmo.tags?.includes(V.FirstParty));return s.jsx("div",{className:"relative",children:s.jsx(Y,{isFirstParty:a||!e,src:e!=null&&v(e)?e.profilePictureUrl:e?.gizmo.display.profile_picture_url,className:x("mb-3 h-12 w-12",i)})})}function ue({gizmo:e,disabled:i}){const a=Z(e),n=C(),o=k();if(a==null||a.length===0)return null;const t=a.slice(0,o?2:4);return s.jsx(F,{starterPrompts:t,onSelectStarterPrompt:n,disabled:i})}function he({gizmo:e,hideOwner:i,showStarterPrompts:a,disableStarterPrompts:n}){const o=e!=null&&v(e)?e.name:e?.gizmo.display.name,t=e!=null&&v(e)?e.description:e?.gizmo.display.description;return s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"text-center text-2xl font-semibold",children:o}),!i&&s.jsx("div",{className:"flex items-center gap-1 text-token-text-tertiary",children:s.jsx(s.Fragment,{children:e&&v(e)?s.jsx(w,{gizmo:e}):s.jsx(w,{gizmo:e,socials:e.gizmo.author.display_socials})})}),t&&s.jsx("div",{className:"max-w-md text-center text-sm font-normal text-token-text-primary",children:t}),a&&s.jsx(ue,{gizmo:e,disabled:n})]})}export{ve as G,me as L,xe as S,je as a,C as u};
//# sourceMappingURL=nxz31zqr36vgy6hm.js.map
