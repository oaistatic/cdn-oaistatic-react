import{eX as I,fw as P,a5 as S,fx as E,ai as R,ap as h,br as F,q as M}from"./n26mv7rx7nquqst2.js";import{z as B,f as N,e as O,r as o,a as A,j as e}from"./n1tvutderx19k1zs.js";import{t as g,a as m,u as _,s as q,C as T,b as H,g as y,T as L,c as Q,d as $}from"./pceg3mlzf8dzw9ob.js";import{g as k,C as D}from"./xoi80qjaxo01l8ev.js";import{T as K,C as V}from"./i2erpsf8wrksq3mb.js";import{C as w,T as z}from"./fsxj38wqj2utmatn.js";import{C as G}from"./kodyf94rms2l778g.js";import"./cbo9u87sapdr5cy5.js";import"./gy64pge8qevmvg7e.js";import"./cg9cr7bhamctxzet.js";import"./m63dc3fsvxbbdk5v.js";import"./jfxozbrcnsxchwcx.js";import"./m87kbgi8rvuhalc0.js";import"./nraolmtygmvq3wcf.js";import"./hexva2s1lo90zidg.js";import"./m3i9t52w2bjqxoks.js";import"./fmtdc70w9bxe7ngz.js";import"./ecp3vwsjvu9v61q0.js";import"./g7id7a4lbm55wuqm.js";import"./fzrn137102spawew.js";import"./pevkepdko1ob7sgk.js";import"./da0lloekhn03bypm.js";import"./hg2pcqdl92ment5e.js";import"./dafzn6sg4vj6hamn.js";import"./gohrg29ji6orhvga.js";import"./lvedelvd2wa5y0ah.js";import"./oy248fbbcvutqmly.js";import"./bk8slwxjkdlmxjxm.js";import"./gqlojvp2l4yo87we.js";import"./bxe8lsbbwu66fmec.js";const Ie=()=>(P(),null),Pe=I(function(){const r=B(),[a]=N(),u=O(),p=g(r.conversationId),i=m(a.get("readonly"),!1),c=m(a.get("isFullScreen"),!1),d=m(a.get("header"),!0),l=m(a.get("appPreview"),!1),n=S(()=>E()),C=m(a.get("hideBottomComposer"),!!i),t=g(r.canmoreId),s=p,f=_();o.useEffect(()=>{q({type:T.Textdoc,textdocId:t})},[t]),H(s,{kind:R.PrimaryAssistant});const v=A();if(o.useEffect(()=>(h.retainThread(s),()=>{setTimeout(()=>{v.invalidateQueries({queryKey:["conversation",s]})},0),h.releaseThread(s)}),[s,v]),o.useEffect(()=>{t||u("/")},[t,u]),o.useEffect(()=>{y().sendMessage({type:w.Loaded})},[t]),!t||f?.type!==T.Textdoc)return null;const j=()=>{y().sendMessage({type:w.Close})},b=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(G,{clientThreadId:s,children:e.jsx(L,{clientThreadId:s,children:l?e.jsx(F,{children:e.jsx(W,{textdocId:f.textdocId})}):b?e.jsxs(e.Fragment,{children:[e.jsx(K,{disableScroll:!n,textdocId:f.textdocId}),e.jsx(V,{})]}):e.jsx(z,{isEmbedded:!0,isFullScreen:c,hideHeader:!d,hideBottomComposer:C,isReadonlyFromQueryParam:i,hideRunCode:!n,clientThreadId:s,focusedTextdoc:f,onClose:j},"textdocContent")})})]})}),W=({textdocId:x})=>{const r=o.useRef(null),a=Q(x),[u,p]=o.useState(!1),i=a?.versions??[],c=M(i),d=o.useCallback($(async l=>{const n=k(l.type,l.content);if(r.current&&(n==="react"||n==="html")){p(!0);const C=r.current.evalAsync({language:n,code:l.content});for await(const t of C)console.debug(t)}p(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(D,{visuallyHidden:!u,ref:r,enableTransition:!0,title:""})};export{Ie as clientLoader,Pe as default};
//# sourceMappingURL=glodifwehr4z4m2l.js.map
