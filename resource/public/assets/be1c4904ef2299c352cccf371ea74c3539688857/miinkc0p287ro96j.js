import{V as w,c4 as y,aq as B,bw as S,cp as q,d as G,c2 as T,c3 as ee,bS as fe,fQ as ge,P as L,a as U,cG as gs,dW as ps,d6 as hs,h6 as js,bH as _s,Z as X,M as ys,fa as vs}from"./cyi7nanrg0vdotzd.js";import{d as se,r as d,j as e,e as v,u as F,a5 as Fe,M as l,h as bs,c as H,a7 as Oe}from"./fs6h2trisr1juto6.js";import{e as Cs,f as Ms,a as ws,b as Re}from"./kn08nmd9i8fwvxgx.js";import{d as pe,e as Le,f as Ue,b as Me,g as W,a as Be}from"./f11hi51z7fga7n5g.js";import{f as b,bl as ks,q8 as Ns,q9 as Ss,qa as K,ds as Ds,qb as Ge,bM as As,qc as $,j0 as Es,qd as O,i$ as Ts,cb as Ps,qe as de,dI as We,af as Is,cq as Q,qf as qe,hC as Ve,hz as Ze,qg as he,gM as Ye,kK as Fs,dm as ze,bn as Os,bv as Rs,bA as Ls,e as Us,bN as Bs,qh as Gs,dH as Ws,qi as He,kc as qs,gH as Vs,gI as we,h5 as Zs,qj as ke,qk as Ys,fM as zs,ql as Hs,gd as D,c1 as Ks,c2 as Qs}from"./df9u9imhvwerk6zv.js";import{P,a as Ke}from"./jo3x2yf4dp19h25k.js";import{S as Js}from"./jfi01owl9mian83i.js";import{S as Xs}from"./urpjyx0x5i92521t.js";import{S as $s}from"./gul24noqc57eql9b.js";import{i as et}from"./k2rpryqx6vblp3rt.js";import{A as st}from"./e87mw24wmoei5rtf.js";import{S as tt}from"./hiayljqmnpspmyun.js";import{b as at}from"./bibq00lzerxkdtcb.js";import{a as nt,g as Ne}from"./dqkgutsb332uaf68.js";import{c as Qe}from"./m1fsshfoerllttos.js";import"./wywpfzigeej0marp.js";import"./exwx6mc6hw49alht.js";import"./kg9pnjn9ianmg7dc.js";import"./f3zzw463zuggq6da.js";import"./069jlavvvdusqrfm.js";import"./uopuzq7k880bjpaa.js";import"./k154o6a9h89usuus.js";import"./e2l59f6c7bsm78ye.js";import"./g3ei56x6mbzvb5yw.js";import"./olum39tx3ecm9sq0.js";import"./ll7abbx3or9l4k2y.js";import"./ngj3h1w6uuxrb6ri.js";import"./cunrbs89hxzgq11d.js";import"./b22a1k4ozfgjkxq7.js";import"./dtx9fzvfshnw2efc.js";const it=Qe("Search16Regular","16",["M9.3 10.02a4.5 4.5 0 1 1 .7-.7l3.85 3.83a.5.5 0 0 1-.7.7L9.3 10.02ZM10 6.5a3.5 3.5 0 1 0-7 0 3.5 3.5 0 0 0 7 0Z"]),ot=Qe("SettingsCogMultiple20Filled","20",["M8 2c-.37 0-.73.04-1.08.1a.5.5 0 0 0-.4.4l-.26 1.36c-.05.25-.3.4-.54.31l-1.3-.45a.5.5 0 0 0-.55.14A5.5 5.5 0 0 0 2.8 5.74c-.07.2-.01.4.14.54l1.05.9c.19.17.19.47 0 .63l-1.05.91a.5.5 0 0 0-.14.54c.23.7.6 1.34 1.08 1.88.14.15.35.2.54.14l1.3-.45c.25-.08.5.06.55.31l.27 1.36c.03.2.19.35.39.4a5.52 5.52 0 0 0 2.17 0 .5.5 0 0 0 .4-.4l.25-1.36c.05-.25.3-.4.55-.31l1.3.45c.19.06.4 0 .54-.14a5.5 5.5 0 0 0 1.08-1.89.5.5 0 0 0-.14-.53l-1.04-.9a.42.42 0 0 1 0-.63l1.04-.9a.5.5 0 0 0 .14-.54 5.5 5.5 0 0 0-1.08-1.89.5.5 0 0 0-.54-.14l-1.3.45a.42.42 0 0 1-.55-.31L9.48 2.5a.5.5 0 0 0-.4-.4C8.75 2.05 8.39 2 8 2ZM6.5 7.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Zm4.66 4.95a.46.46 0 0 1 .53-.15l.8.27c.26.1.54-.07.6-.34l.15-.83c.04-.2.2-.36.4-.38a3.55 3.55 0 0 1 .72 0c.2.02.35.18.4.38l.15.83c.06.27.34.43.6.34l.8-.27c.19-.07.4-.02.52.15.14.2.27.4.36.62.09.19.03.4-.13.53l-.64.56c-.2.18-.2.5 0 .68l.64.56c.16.13.22.34.13.53-.1.22-.22.43-.36.62a.46.46 0 0 1-.52.15l-.8-.27a.45.45 0 0 0-.6.34l-.16.83c-.04.2-.19.36-.4.38a3.55 3.55 0 0 1-.71 0 .46.46 0 0 1-.4-.38l-.16-.83a.45.45 0 0 0-.6-.34l-.8.27c-.18.07-.4.02-.52-.15a3.5 3.5 0 0 1-.36-.62.46.46 0 0 1 .13-.53l.64-.56c.21-.18.21-.5 0-.68l-.64-.56a.46.46 0 0 1-.13-.53c.1-.22.22-.43.36-.62ZM15 14.5a1 1 0 1 0-2 0 1 1 0 0 0 2 0Z"]),R=se({fileSingular:{id:"TKyiaj",defaultMessage:"file"},filesPlural:{id:"krAMi5",defaultMessage:"files"},domainSingular:{id:"ExZP9r",defaultMessage:"domain"},domainsPlural:{id:"PmkQD7",defaultMessage:"domains"}});function Se(s,t){return s==="google_drive_dwd"||s==="google_drive_oauth"?{objectTypeSingular:t.formatMessage(R.fileSingular),objectTypePlural:t.formatMessage(R.filesPlural),externalLinkableUnitSingular:t.formatMessage(R.domainSingular),externalLinkableUnitPlural:t.formatMessage(R.domainsPlural)}:s==="slack"?{objectTypeSingular:t.formatMessage({id:"Y22i2G",defaultMessage:"channel"}),objectTypePlural:t.formatMessage({id:"UXSOIk",defaultMessage:"channels"}),externalLinkableUnitSingular:t.formatMessage({id:"yyIyWp",defaultMessage:"workspace"}),externalLinkableUnitPlural:t.formatMessage({id:"LuznzN",defaultMessage:"workspaces"})}:{objectTypeSingular:t.formatMessage(R.fileSingular),objectTypePlural:t.formatMessage(R.filesPlural),externalLinkableUnitSingular:t.formatMessage(R.domainSingular),externalLinkableUnitPlural:t.formatMessage(R.domainsPlural)}}const Je=-1;function te(s){switch(s.knowledge_connector_type){case void 0:return 0;case"slack":case"github":case"google_drive_dwd":return Je;case"google_drive_oauth":return 10;case"merge_file_storage":return 10}}const ue={max_instances:0},lt=s=>d.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("g",{id:"icon / connected, dynamic, gpt"},d.createElement("path",{id:"vector",d:"M5.23841 3.95847C5.73982 3.95517 6.38371 4.09048 7.13793 4.39217C7.58 4.569 8.04665 4.79764 8.52798 5.07508C7.9105 5.56392 7.29772 6.10893 6.70332 6.70333C6.10893 7.29772 5.56392 7.9105 5.07508 8.52798C4.79764 8.04665 4.569 7.58 4.39217 7.13793C4.09048 6.38371 3.95517 5.73982 3.95847 5.23841C3.96174 4.74203 4.09727 4.4464 4.27183 4.27183C4.4464 4.09727 4.74203 3.96174 5.23841 3.95847ZM10.0001 4.02079C9.23413 3.52937 8.47766 3.13301 7.75692 2.84471C6.87793 2.49312 6.01323 2.28667 5.22743 2.29184C4.4366 2.29705 3.66642 2.52023 3.09332 3.09332C2.52023 3.66642 2.29705 4.4366 2.29184 5.22743C2.28667 6.01323 2.49312 6.87793 2.84471 7.75692C3.13301 8.47766 3.52937 9.23413 4.02079 10.0001C3.52937 10.766 3.13301 11.5225 2.84471 12.2432C2.49312 13.1222 2.28667 13.9869 2.29184 14.7727C2.29705 15.5636 2.52023 16.3337 3.09332 16.9068C3.66642 17.4799 4.4366 17.7031 5.22743 17.7083C6.01323 17.7135 6.87793 17.507 7.75692 17.1555C8.47766 16.8672 9.23413 16.4708 10.0001 15.9794C10.766 16.4708 11.5225 16.8672 12.2432 17.1555C13.1222 17.507 13.9869 17.7135 14.7727 17.7083C15.5636 17.7031 16.3337 17.4799 16.9068 16.9068C17.4799 16.3337 17.7031 15.5636 17.7083 14.7727C17.7135 13.9869 17.507 13.1222 17.1555 12.2432C16.8672 11.5225 16.4708 10.766 15.9794 10.0001C16.4708 9.23413 16.8672 8.47766 17.1555 7.75692C17.507 6.87793 17.7135 6.01323 17.7083 5.22743C17.7031 4.43661 17.4799 3.66642 16.9068 3.09332C16.3337 2.52023 15.5636 2.29705 14.7727 2.29184C13.9869 2.28667 13.1222 2.49312 12.2432 2.84471C11.5225 3.13301 10.766 3.52937 10.0001 4.02079ZM10.0001 6.04624C10.7059 6.57001 11.4212 7.18471 12.1183 7.88184C12.8154 8.57896 13.4301 9.29429 13.9539 10.0001C13.4301 10.7059 12.8154 11.4212 12.1183 12.1183C11.4212 12.8154 10.7059 13.4301 10.0001 13.9539C9.29429 13.4301 8.57896 12.8154 7.88184 12.1183C7.18471 11.4212 6.57001 10.7059 6.04624 10.0001C6.57001 9.29429 7.18471 8.57896 7.88184 7.88184C8.57896 7.18471 9.29429 6.57001 10.0001 6.04624ZM14.9251 8.52798C14.4362 7.9105 13.8912 7.29772 13.2968 6.70332C12.7024 6.10893 12.0897 5.56392 11.4722 5.07508C11.9535 4.79764 12.4202 4.569 12.8622 4.39217C13.6164 4.09048 14.2603 3.95517 14.7618 3.95847C15.2581 3.96174 15.5538 4.09727 15.7283 4.27184C15.9029 4.4464 16.0384 4.74203 16.0417 5.23841C16.045 5.73982 15.9097 6.38371 15.608 7.13793C15.4312 7.58 15.2025 8.04665 14.9251 8.52798ZM14.9251 11.4722C15.2025 11.9535 15.4312 12.4202 15.608 12.8622C15.9097 13.6164 16.045 14.2603 16.0417 14.7618C16.0384 15.2581 15.9029 15.5538 15.7283 15.7283C15.5538 15.9029 15.2581 16.0384 14.7618 16.0417C14.2603 16.045 13.6164 15.9097 12.8622 15.608C12.4202 15.4312 11.9535 15.2025 11.4722 14.9251C12.0897 14.4362 12.7024 13.8912 13.2968 13.2968C13.8912 12.7024 14.4362 12.0897 14.9251 11.4722ZM8.52798 14.9251C8.04665 15.2025 7.58 15.4312 7.13793 15.608C6.38371 15.9097 5.73982 16.045 5.23841 16.0417C4.74203 16.0384 4.4464 15.9029 4.27183 15.7283C4.09727 15.5538 3.96174 15.2581 3.95847 14.7618C3.95517 14.2603 4.09048 13.6164 4.39217 12.8622C4.569 12.4202 4.79764 11.9535 5.07508 11.4722C5.56392 12.0897 6.10893 12.7024 6.70332 13.2968C7.29772 13.8912 7.91049 14.4362 8.52798 14.9251Z",fill:"currentColor"})));function z({label:s,value:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full border-t border-token-border-medium"}),e.jsxs("div",{className:"flex w-full flex-row justify-between py-2",children:[e.jsx("span",{className:"text-token-text-primary",children:s}),e.jsx("span",{className:"text-token-text-secondary",children:t})]})]})}function rt({connection:s}){switch(s.connection_config.knowledge_connector_type){case"google_drive_oauth":return e.jsx(ct,{connectionConfig:s.connection_config});case"slack":return e.jsx(ut,{connectionConfig:s.connection_config,connectionStatus:s.connection_status});case"github":case"merge_file_storage":case"google_drive_dwd":return e.jsx(dt,{});case void 0:return null}}function ct({connectionConfig:s}){const t=v();return e.jsxs("div",{className:"px-4",children:[e.jsx(z,{label:t.formatMessage({id:"bVi1Vt",defaultMessage:"Connection type"}),value:t.formatMessage({id:"DSWj22",defaultMessage:"Self-service"})}),e.jsx(z,{label:t.formatMessage({id:"DtrjbM",defaultMessage:"Domain name"}),value:s.domain_name})]})}function dt(){const s=v();return e.jsx("div",{className:"px-4",children:e.jsx(z,{label:s.formatMessage({id:"bVi1Vt",defaultMessage:"Connection type"}),value:s.formatMessage({id:"voo3FC",defaultMessage:"Admin-managed"})})})}function ut({connectionConfig:s,connectionStatus:t}){const n=v();return e.jsxs("div",{className:"px-4",children:[t==="activating"&&e.jsx(mt,{connectionConfig:s}),e.jsx(z,{label:n.formatMessage({id:"JXKtnI",defaultMessage:"Slack domain"}),value:s.team_domain}),e.jsx(z,{label:n.formatMessage({id:"a1Cjhf",defaultMessage:"Team ID"}),value:s.team_id})]})}function mt({connectionConfig:s}){const{data:t,isLoading:n}=F({queryKey:["user_connection_status"],queryFn:b.user_connection_status}),a=t?.connection_statuses.some(i=>i.user_connection_details.connection_instance_id===s.connection_config_id&&i.user_connection_details.auth_status==="user_connected");return n||a?null:e.jsxs(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.2,duration:.5},className:"mb-2 flex flex-col gap-2 rounded-xl bg-token-hint-bg p-4 dark:bg-token-main-surface-tertiary",children:[e.jsxs("div",{className:"flex flex-row items-start gap-4",children:[e.jsx(ks,{className:"icon-lg"}),e.jsx("span",{className:"text-sm",children:e.jsx(l,{id:"gdALIj",defaultMessage:"This connection will not finish activating until a user connects."})})]}),e.jsx(xt,{connectionConfig:s})]})}function xt({connectionConfig:s}){const t=v(),n=bs(),a=w(),i=async()=>{try{const o=await b.user_request_connect(s.connection_config_id,`${n.pathname}${n.search}${n.hash}`);window.location.href=o.oauth_flow_url}catch{a.danger(t.formatMessage({id:"FNXFnS",defaultMessage:"Encountered an error connecting your account. Please try again later."}))}};return e.jsx(y,{onClick:i,color:"primary",children:e.jsx(l,{id:"9ZiK24",defaultMessage:"Connect"})})}const ft=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{d:"M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z",fill:"currentColor"}),d.createElement("path",{d:"M13.3 12.0002C13.3 12.7182 12.718 13.3002 12 13.3002C11.282 13.3002 10.7 12.7182 10.7 12.0002C10.7 11.2822 11.282 10.7002 12 10.7002C12.718 10.7002 13.3 11.2822 13.3 12.0002Z",fill:"currentColor"}),d.createElement("path",{d:"M17.3 12.0002C17.3 12.7182 16.718 13.3002 16 13.3002C15.282 13.3002 14.7 12.7182 14.7 12.0002C14.7 11.2822 15.282 10.7002 16 10.7002C16.718 10.7002 17.3 11.2822 17.3 12.0002Z",fill:"currentColor"}),d.createElement("path",{d:"M9.30001 12.0002C9.30001 12.7182 8.71798 13.3002 8.00001 13.3002C7.28204 13.3002 6.70001 12.7182 6.70001 12.0002C6.70001 11.2822 7.28204 10.7002 8.00001 10.7002C8.71798 10.7002 9.30001 11.2822 9.30001 12.0002Z",fill:"currentColor"})),ae={isOpen:!0,type:"success",size:"custom",className:"max-w-xl",showCloseButton:!0,shouldIgnoreClickOutside:!0,hideSeparator:!0,noPadding:!0},V={...ae,title:e.jsx(Ns,{})},Xe={...ae,title:e.jsx(Ss,{})};function ne({onClose:s,footerContent:t,primaryButton:n,secondaryButton:a,pageSize:i=Ts,accountId:o,connectionId:r,connectorType:c,fallbackEstimatedMaxNumUsers:x}){const u=v(),[f,m]=d.useState(""),g=B(),[p,h]=d.useState(0),j=K(),{data:_,isLoading:C}=Ds(g?.getWorkspaceId(),p*i,f,i),{data:M,isLoading:A,refetch:E,error:k}=F({queryKey:["admin_connection_get_access_policy",r],queryFn:()=>b.admin_connection_get_access_policy(o,r)}),I=Math.ceil((_?.total??0)/i);p>=I&&I!==0&&h(Math.max(I-1,0));const[ve,cs]=d.useState(!1),[ds,us]=d.useState(0),oe=ds>0||ve,be=A||C||oe,le=M?.limits?.max_allowed_users??x,re=le===-1,ms=!j&&(re||(M?.allowed_users.length??0)<le);return e.jsxs(S,{...ae,title:Ge(c),onClose:s,children:[e.jsxs("div",{className:"flex flex-col px-6 pb-10 pt-4",children:[e.jsx("div",{className:"mb-3 text-xl font-medium",children:e.jsx(l,{id:"5e46Ss",defaultMessage:"Which workspace members can use this?"})}),e.jsx("div",{className:"mb-4 text-token-text-secondary",children:re?e.jsx("p",{children:e.jsx(l,{id:"Ny/DGR",defaultMessage:"You must also select yourself, these changes will be auto-saved"})}):A?e.jsx(P,{lines:1,className:"w-full"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(l,{id:"Ny/DGR",defaultMessage:"You must also select yourself, these changes will be auto-saved"})}),e.jsx("p",{children:e.jsx(ht,{numSelectedUsers:M?.allowed_users.length??0,maxAllowedUsers:le})})]})}),e.jsxs("div",{className:"mb-4 flex flex-row items-center",children:[e.jsxs("div",{className:"group relative",children:[e.jsx("input",{type:"text",value:f,onChange:Y=>{m(Y.target.value),h(0)},disabled:!!M?.allow_all_in_workspace,placeholder:u.formatMessage({id:"RWqomV",defaultMessage:"Search"}),className:"rounded-lg border border-solid border-token-border-light bg-token-main-surface-primary pl-10 text-token-text-primary"}),e.jsx("div",{className:"absolute left-2 top-0 flex h-full w-8 items-center justify-center",children:e.jsx(As,{className:"icon-md text-token-text-tertiary group-focus-within:text-token-text-secondary"})})]}),be&&e.jsx(q,{className:"ml-4 h-4 w-4"})]}),k&&e.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[e.jsx($,{className:"icon-md inline"}),e.jsx(l,{id:"ZhxtEO",defaultMessage:"Failed to load allowed users."}),e.jsx("button",{onClick:()=>E(),className:"underline",children:e.jsx(l,{id:"y/IEAC",defaultMessage:"Try again"})})]}),e.jsx("div",{className:G("h-[200px] max-h-[600px] overflow-y-auto px-2",M?.allow_all_in_workspace&&"opacity-50"),children:e.jsx("table",{children:e.jsx("tbody",{children:_?.items.length?_.items.map(({id:Y,name:xs,email:fs})=>{const Ce=!!M?.allowed_users.includes(Y);return e.jsx("tr",{className:"mb-2",children:e.jsx("td",{children:e.jsx(gt,{controlDisabled:!Ce&&!ms||!!M?.allow_all_in_workspace||ve,userId:Y,isUserEnabled:Ce||!!M?.allow_all_in_workspace,accountId:o,connectionId:r,refetch:E,setNumPendingUserOperations:us,name:xs,email:fs})})},Y)}):e.jsx("tr",{children:e.jsx("td",{children:e.jsx(l,{id:"n3uhaN",defaultMessage:"No users found"})})})})})}),I>1&&e.jsx("div",{className:"my-4",children:e.jsx(Es,{currentPage:p,onChangeIndex:h,length:I})}),re&&e.jsx(pt,{allowAllInWorkspace:!!M?.allow_all_in_workspace,controlDisabled:be||j&&!M?.allow_all_in_workspace,refetch:E,accountId:o,connectionId:r,setShouldBlockOtherInteractions:cs})]}),e.jsx(O,{footerContent:t,primaryButton:oe&&n?d.cloneElement(n,{disabled:!0,onClick:()=>{}}):n,secondaryButton:oe&&a?d.cloneElement(a,{disabled:!0,onClick:()=>{}}):a})]})}function gt({userId:s,controlDisabled:t,isUserEnabled:n,refetch:a,setNumPendingUserOperations:i,accountId:o,connectionId:r,name:c,email:x}){const u=v(),f=w(),[m,g]=d.useState(!1),p=async _=>{if(!t){g(!0),i(C=>C+1);try{await b.admin_connection_allow_user(o,r,_),await a()}catch{f.danger(u.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}))}finally{g(!1),i(C=>C-1)}}},h=async _=>{g(!0),i(C=>C+1);try{await b.admin_connection_disallow_user(o,r,_),await a()}catch{f.danger(u.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}))}finally{g(!1),i(C=>C-1)}},j=e.jsxs("p",{children:[e.jsx("span",{className:"text-token-text-primary",children:c}),e.jsx("span",{className:"ml-2 text-token-text-tertiary",children:x})]});return e.jsx($e,{isLoading:m,id:`is-user-enabled--${s}`,disabled:t,checked:n,onChange:_=>{t||m||(_.currentTarget.checked?p(s):h(s))},label:j})}function pt({allowAllInWorkspace:s,controlDisabled:t=!1,accountId:n,connectionId:a,refetch:i,setShouldBlockOtherInteractions:o}){const r=v(),c=w(),[x,u]=d.useState(!1),f=async m=>{if(!t){u(!0),o(!0);try{await b.admin_connection_update_access_policy(n,a,m),await i()}catch{await i(),c.danger(r.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}))}finally{u(!1),o(!1)}}};return e.jsx($e,{isLoading:x,id:"enabled-for-everyone-checkbox",checked:s,disabled:t,onChange:m=>{t||f(m.currentTarget.checked)},label:e.jsx("span",{className:"ml-2 text-token-text-primary",children:e.jsx(l,{id:"MsFKpF",defaultMessage:"Enable for everyone"})})})}function $e({isLoading:s,...t}){return s?e.jsxs("div",{className:"form-check flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("div",{className:"form-check-label text-token-text-primary",children:t.label})]}):e.jsx(Ps,{...t})}function ht({maxAllowedUsers:s,numSelectedUsers:t}){return t>=s?e.jsx(l,{id:"JWJ5gc",defaultMessage:`{numSelectedUsers, plural,
          =0 {No users}
          one {# user}
          other {# users}
        } selected. You cannot select any more.`,values:{numSelectedUsers:t}}):t>0?e.jsx(l,{id:"dYtUgP",defaultMessage:`{numSelectedUsers, plural,
          =0 {No users}
          one {# user}
          other {# users}
        } selected. You can select up to {remainingAllowedUsers} more.`,values:{numSelectedUsers:t,remainingAllowedUsers:s-t}}):e.jsx(l,{id:"nVfqBL",defaultMessage:`Select up to {maxAllowedUsers, plural,
          =0 {No users}
          one {# user}
          other {# users}
        }.`,values:{maxAllowedUsers:s}})}const je=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.53 2.5C18.9777 2.5 18.53 2.94772 18.53 3.5V5.07196C16.8313 3.47759 14.5452 2.5 12.03 2.5C6.78329 2.5 2.53 6.75329 2.53 12C2.53 17.2467 6.78329 21.5 12.03 21.5C16.8993 21.5 20.9117 17.8375 21.465 13.1164C21.5293 12.5679 21.1367 12.0711 20.5882 12.0068C20.0397 11.9425 19.5429 12.3351 19.4786 12.8836C19.042 16.6089 15.8729 19.5 12.03 19.5C7.88786 19.5 4.53 16.1421 4.53 12C4.53 7.85786 7.88786 4.5 12.03 4.5C14.2504 4.5 16.2464 5.46469 17.6205 7H15.5C14.9477 7 14.5 7.44772 14.5 8C14.5 8.55228 14.9477 9 15.5 9H19.53C20.0694 9 20.509 8.57299 20.5293 8.03859C20.5302 8.01771 20.5304 7.99677 20.53 7.9758V3.5C20.53 2.94772 20.0823 2.5 19.53 2.5Z",fill:"currentColor"}));function jt({isOpen:s,onClose:t,objectType:n,connectionId:a,accountId:i}){const[o,r]=d.useState(null),[c,x]=d.useState([]),[u,f]=d.useState(!1),[m,g]=d.useState(!1),p=v(),h=async C=>{f(!0),g(!1);try{const M=await b.admin_connection_list_item_scopes(i,a,n,C);r(M.page_token??null),x(A=>[...A,...M.object_selections.map(E=>E.object_handle)])}catch{g(!0)}finally{f(!1)}},j=async()=>{r(null),f(!1),x([]),g(!1),h(null)},_=d.useRef(!1);return d.useEffect(()=>{_.current||(_.current=!0,j())},[]),e.jsx(S,{isOpen:s,onClose:t,type:"success",size:"custom",className:"max-w-xl",showCloseButton:!0,title:p.formatMessage({id:"BVUVRc",defaultMessage:"Block items"}),children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"LYXIh1",defaultMessage:"Found something that shouldn't be synced? You can block items here to prevent them from being synced or shown in search results."})}),e.jsx(vt,{connectionId:a,accountId:i,onItemBlocked:j,objectType:n}),e.jsx(_t,{connectionId:a,accountId:i,isLoading:u,hasError:m,hasMoreItems:o!=null,loadMoreItems:()=>h(o),objectType:n,objectHandles:c,onItemUnblocked:j})]})})}function _t({connectionId:s,accountId:t,objectHandles:n,isLoading:a,hasError:i,hasMoreItems:o,loadMoreItems:r,onItemUnblocked:c,objectType:x}){return e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 font-medium",children:e.jsx(l,{id:"gimLZo",defaultMessage:"Currently blocked items"})}),i?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"text-token-text-error",children:e.jsx(l,{id:"3BZzpX",defaultMessage:"Something went wrong"})}),e.jsx("div",{children:e.jsx(y,{color:"secondary",icon:je,onClick:r,children:e.jsx(l,{id:"fFd9RR",defaultMessage:"Try again"})})})]}):e.jsxs(e.Fragment,{children:[n.length>0||a?e.jsx("ul",{className:"flex flex-col gap-1",children:n.map(u=>e.jsx(yt,{connectionId:s,accountId:t,objectType:x,objectHandle:u,onItemUnblocked:c},u))}):e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"IGg+fh",defaultMessage:"No items are currently being blocked."})}),a?e.jsx(P,{lines:1}):o&&e.jsx(y,{color:"ghost",icon:Xs,onClick:r,children:e.jsx(l,{id:"g+Tw+y",defaultMessage:"See more"})})]})]})}function yt({connectionId:s,accountId:t,objectHandle:n,onItemUnblocked:a,objectType:i}){const o=w(),r=v();return e.jsx(me,{scopeChangeIcon:de,scopeChangeLabel:r.formatMessage({id:"yaj/om",defaultMessage:"Unblock item"}),scopeChangeTarget:"include",objectHandle:n,objectType:i,onError:()=>{o.danger(r.formatMessage({id:"yRm6yX",defaultMessage:"Failed to unblock item. Please try again later."}))},onScopeUpdated:()=>{o.success(r.formatMessage({id:"Xot/uQ",defaultMessage:"Item successfully unblocked."})),a()},connectionId:s,accountId:t})}function me({connectionId:s,accountId:t,objectType:n,objectHandle:a,scopeChangeTarget:i,scopeChangeLabel:o,scopeChangeIcon:r,onScopeUpdated:c,onError:x}){const[u,f]=d.useState(!1),{isPending:m,mutate:g}=H({mutationFn:async()=>i==="exclude"?await b.admin_connection_block_items(t,s,n,[a]):await b.admin_connection_unblock_items(t,s,n,[a]),mutationKey:["admin_connection_update_item_scope",s,n,i,a],onSuccess:()=>{c(),f(!1)},onError:()=>{f(!1),x()}});return e.jsxs("li",{className:"group flex w-full flex-row rounded-xl px-4 py-1 text-sm hover:bg-token-surface-hover",children:[e.jsx("span",{className:"flex-1",children:a}),e.jsxs(T.Root,{open:u||m,onOpenChange:f,children:[e.jsx(T.Trigger,{className:G("flex-0 h-6 group-hover:visible",!u&&"invisible"),children:e.jsx(We,{className:"icon-sm"})}),e.jsx(T.Portal,{children:e.jsx(T.Content,{size:"small",children:e.jsx(T.Item,{icon:m?q:r,onSelect:()=>g(),disabled:m,children:o})})})]})]})}function vt({accountId:s,connectionId:t,onItemBlocked:n,objectType:a}){const i=w(),o=v();return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"font-medium",children:e.jsx(l,{id:"dU+IPT",defaultMessage:"Block an item"})}),e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"y6yn/t",defaultMessage:"Enter the ID or URL of the item you want to block."})}),e.jsx(xe,{accountId:s,connectionId:t,objectType:a,onSuccess:()=>{i.success(o.formatMessage({id:"Q+KnAh",defaultMessage:"Item successfully blocked."})),n()},onError:()=>{i.danger(o.formatMessage({id:"UH92LU",defaultMessage:"Failed to block item. Please try again later."}))},targetScopeSelection:"exclude",buttonLabel:e.jsx(l,{id:"5FIVI9",defaultMessage:"Block"})})]})}function xe({accountId:s,connectionId:t,objectType:n,onSuccess:a,onError:i,placeholder:o,targetScopeSelection:r,buttonLabel:c}){const x=v(),[u,f]=d.useState(""),{isPending:m,mutate:g}=H({mutationFn:async()=>{if(u.trim())return r==="exclude"?await b.admin_connection_block_items(s,t,n,[u]):await b.admin_connection_unblock_items(s,t,n,[u])},mutationKey:["admin_connection_update_item_scope",t,n,r,u],onSuccess:()=>{a(),f("")},onError:i});return e.jsx("form",{onSubmit:p=>{p.preventDefault(),u.trim()&&g()},children:e.jsxs("div",{className:"flex w-full flex-row gap-2",children:[e.jsx(Is,{type:"text",className:"flex-1",name:"objectHandle",ariaLabel:"object handle",value:u,onChange:p=>f(p.target.value),placeholder:o??x.formatMessage({id:"sPUyj/",defaultMessage:"ID or URL"}),disabled:m}),e.jsx(y,{color:"primary",type:"button",onClick:()=>g(),loading:m,disabled:m||!u.trim(),className:"flex-0",children:c})]})})}function es({accountId:s,connectionId:t,onClose:n,onNext:a,secondaryButton:i,footerContent:o}){const r=v(),c=w(),x=d.useId(),[u,f]=d.useState(""),[m,g]=d.useState(null),[p,h]=d.useState(!1),{isLoading:j,refetch:_,data:C}=F({queryKey:["admin:connection_instance",t],queryFn:async()=>await b.admin_get_connection_instance(s,t)});d.useEffect(()=>{C?.connection_config.knowledge_connector_type==="google_drive_dwd"&&f(C.connection_config.admin_email_address??"")},[C]);const M=C?.connection_config.knowledge_connector_type==="google_drive_dwd"?C.connection_config.service_account_credential_id:void 0,A=u.trim().length>0&&(!!m||M),E=async()=>{if(!(!A||!s||p)){h(!0);try{let k;m&&(k=await m.text()),await b.admin_connection_update_credential(s,t,{admin_email:u,new_service_credential_content:k,credential_id:M&&!k?M:void 0}),c.success(r.formatMessage({id:"q/AX/d",defaultMessage:"Credentials successfully updated."})),a()}catch{c.danger(r.formatMessage({id:"qbD4Az",defaultMessage:"Failed to update credentials."}))}finally{_(),h(!1)}}};return e.jsx(S,{...V,onClose:n,children:j?e.jsx(P,{lines:4,className:"px-6 pb-10 pt-4"}):e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:k=>{k.preventDefault(),A&&E()},className:"flex flex-col px-6 pb-10 pt-4",children:[e.jsx("button",{type:"submit",className:"display-none"}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(l,{id:"qq+Txa",defaultMessage:"Setup a new connection"})}),e.jsx("div",{className:"mt-2 text-token-text-secondary",children:e.jsx(l,{id:"xlzWm6",defaultMessage:"To setup an Admin-managed connection, follow the steps linked below, then enter the key from Google. {readMoreLink}",values:{readMoreLink:e.jsx(Q,{href:qe,className:"underline",children:e.jsx(l,{id:"wVvI34",defaultMessage:"Read setup instructions"})})}})})]}),e.jsx(bt,{existingServiceKeyId:M,serviceKeyFile:m,setServiceKeyFile:g}),e.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:x,className:"text-base font-medium",children:e.jsx(l,{id:"sPqjJA",defaultMessage:"Google Workspace admin email address"})}),e.jsx("input",{type:"text",value:u,onChange:k=>f(k.target.value),placeholder:r.formatMessage({id:"+zP1RE",defaultMessage:"admin@example.com"}),id:x,className:"rounded-lg border border-solid border-token-border-light bg-token-main-surface-primary text-token-text-primary"}),e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"Y8w9Sz",defaultMessage:"We require a Google Workspace admin user's email to perform administrative actions like listing users and discovering Shared Drives with the provided service account key."})})]})]})]}),e.jsx(O,{primaryButton:e.jsx(y,{loading:p,color:"primary",disabled:!A||p,onClick:E,children:e.jsx(l,{id:"+itf/D",defaultMessage:"Save"})}),secondaryButton:i,footerContent:o})]})})}function bt({existingServiceKeyId:s,serviceKeyFile:t,setServiceKeyFile:n}){const a=d.useRef(null),i=d.useId();return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-base font-medium",children:e.jsx(l,{id:"gI0O53",defaultMessage:"Service account key"})}),!!s&&!t&&e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(ee,{className:"icon-sm"}),e.jsx(l,{id:"B+/4/L",defaultMessage:"Service account key already exists."})]}),!!t&&e.jsx("p",{className:"text-token-text-secondary",children:t.name}),e.jsxs("div",{className:"flex flex-row gap-2",children:[!s&&!t&&e.jsx(y,{color:"primary",type:"button",onClick:()=>a.current?.click(),children:e.jsx(l,{id:"4GjErm",defaultMessage:"Upload key"})}),(!!s&&!t||!s&&!!t)&&e.jsx(y,{color:"secondary",type:"button",onClick:()=>a.current?.click(),children:e.jsx(l,{id:"qV3zuG",defaultMessage:"Replace key"})}),!!s&&!!t&&e.jsx(y,{color:"danger-outline",type:"button",onClick:()=>n(null),children:e.jsx(l,{id:"NFpNok",defaultMessage:"Clear"})})]}),e.jsx("input",{type:"file",className:"hidden",id:i,ref:a,onChange:o=>{o.target.files&&o.target.files.length>0?n(o.target.files[0]):n(null)},accept:".json"})]})}function ss({isOpen:s,onClose:t,connectionId:n,accountId:a,primaryButton:i,secondaryButton:o,footerContent:r}){const{refetch:c,data:x,error:u,isLoading:f}=F({queryFn:()=>Mt({accountId:a,connectionId:n}),queryKey:["admin_connection_list_item_scopes",n,"shared_drive"]});return e.jsxs(S,{...V,isOpen:s,onClose:t,children:[e.jsx("div",{className:"flex flex-col gap-6 px-6 pb-10 pt-4",children:f?e.jsx(P,{lines:4}):u?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"text-token-text-error",children:e.jsx(l,{id:"3BZzpX",defaultMessage:"Something went wrong"})}),e.jsx("div",{children:e.jsx(y,{color:"secondary",icon:je,onClick:()=>c(),children:e.jsx(l,{id:"fFd9RR",defaultMessage:"Try again"})})})]}):e.jsx(e.Fragment,{children:x&&e.jsx(Ct,{accountId:a,connectionId:n,sharedDriveDefaultScope:x.default_selection,sharedDriveScopes:x.object_selections,refetch:c})})}),e.jsx(O,{primaryButton:i,secondaryButton:o,footerContent:r})]})}function Ct({refetch:s,accountId:t,connectionId:n,sharedDriveDefaultScope:a,sharedDriveScopes:i}){const o=v(),r=w(),{isPending:c,mutate:x}=H({mutationFn:async u=>await b.admin_connection_update_item_default_scope(t,n,"shared_drive",u),mutationKey:["admin_connection_update_item_default_scope",n,"shared_drive"],onError:()=>{r.danger(o.formatMessage({id:"YnlDV7",defaultMessage:"Failed to update policy."}))},onSettled:()=>{s()}});return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(l,{id:"CIWfUm",defaultMessage:"How do you want to handle Shared Drives?"})}),e.jsx("div",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"BXG6kp",defaultMessage:"Add any Shared Drives youâ€™d like to exclude or include by default."})}),e.jsx($s,{ariaLabel:{id:"ca.scope-selector.aria-label",defaultMessage:"Select whether Shared drives are included or exlcuded from syncing by default.",description:"@nocommit"},onChange:u=>{c||x(u)},value:a,leftItem:{ariaLabel:J.includeToggleLabel,label:J.includeToggleLabel,value:"include"},rightItem:{ariaLabel:J.excludeToggleLabel,label:J.excludeToggleLabel,value:"exclude"}}),c?e.jsx(P,{lines:3}):a==="include"?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"dmDuO6",defaultMessage:"All Shared drives will be synced except for ones you choose to exclude."})}),e.jsx("p",{className:"font-medium text-token-text-secondary",children:e.jsx(l,{id:"buyi/M",defaultMessage:"Excluded Shared drives"})}),e.jsx("ul",{children:i.filter(u=>u.selection==="exclude").map(u=>e.jsx(me,{objectHandle:u.object_handle,objectType:"shared_drive",accountId:t,connectionId:n,scopeChangeIcon:de,scopeChangeLabel:o.formatMessage({id:"NLi7nF",defaultMessage:"Remove exclusion"}),scopeChangeTarget:"include",onError:()=>{r.danger(o.formatMessage({id:"tdBT+A",defaultMessage:"Failed to remove exclusion. Please try again later."}))},onScopeUpdated:()=>{r.success(o.formatMessage({id:"AC/4a7",defaultMessage:"Sucessfully removed exclusion."})),s()}},u.object_handle))}),e.jsx(xe,{objectType:"shared_drive",targetScopeSelection:"exclude",accountId:t,connectionId:n,buttonLabel:o.formatMessage({id:"ThGxVh",defaultMessage:"Exclude"}),onSuccess:()=>{r.success(o.formatMessage({id:"1hsj8s",defaultMessage:"Shared drive has been excluded."})),s()},onError:()=>{r.danger(o.formatMessage({id:"4JkX1y",defaultMessage:"Failed to exclude Shared drive. Please try again later."}))}})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"Pa+iyD",defaultMessage:"Only the Shared drives you select will be synced."})}),e.jsx("p",{className:"font-medium text-token-text-secondary",children:e.jsx(l,{id:"e4EV27",defaultMessage:"Included Shared drives"})}),e.jsx("ul",{children:i.filter(u=>u.selection==="include").map(u=>e.jsx(me,{objectHandle:u.object_handle,objectType:"shared_drive",accountId:t,connectionId:n,scopeChangeIcon:de,scopeChangeLabel:o.formatMessage({id:"/oSk2L",defaultMessage:"Remove inclusion"}),scopeChangeTarget:"exclude",onError:()=>{r.danger(o.formatMessage({id:"JhaVH0",defaultMessage:"Failed to remove inclusion. Please try again later."}))},onScopeUpdated:()=>{r.success(o.formatMessage({id:"m6h3gf",defaultMessage:"Sucessfully removed inclusion."})),s()}},u.object_handle))}),e.jsx(xe,{objectType:"shared_drive",targetScopeSelection:"include",accountId:t,connectionId:n,buttonLabel:o.formatMessage({id:"At82Iq",defaultMessage:"Include"}),onSuccess:()=>{r.success(o.formatMessage({id:"IMoGWZ",defaultMessage:"Shared drive has been included."})),s()},onError:()=>{r.danger(o.formatMessage({id:"De2z4Y",defaultMessage:"Failed to include Shared drive. Please try again later."}))}})]})]})}const J=se({includeToggleLabel:{id:"ca.scope-selection.include-by-default",defaultMessage:"Include by default"},excludeToggleLabel:{id:"ca.scope-selection.exclude-by-default",defaultMessage:"Exclude by default"},includeUserDrivesLabel:{id:"pDGrBu",defaultMessage:"Include user-owned files?"}});async function Mt({accountId:s,connectionId:t}){const n=[];let a=await b.admin_connection_list_item_scopes(s,t,"shared_drive",null);for(n.push(a);a.page_token!=null;)a=await b.admin_connection_list_item_scopes(s,t,"shared_drive",a.page_token),n.push(a);return{object_type:"shared_drive",default_selection:n[0].default_selection,object_selections:n.flatMap(o=>o.object_selections)}}const ts=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM9.70711 8.29289C9.31658 7.90237 8.68342 7.90237 8.29289 8.29289C7.90237 8.68342 7.90237 9.31658 8.29289 9.70711L10.5858 12L8.29289 14.2929C7.90237 14.6834 7.90237 15.3166 8.29289 15.7071C8.68342 16.0976 9.31658 16.0976 9.70711 15.7071L12 13.4142L14.2929 15.7071C14.6834 16.0976 15.3166 16.0976 15.7071 15.7071C16.0976 15.3166 16.0976 14.6834 15.7071 14.2929L13.4142 12L15.7071 9.70711C16.0976 9.31658 16.0976 8.68342 15.7071 8.29289C15.3166 7.90237 14.6834 7.90237 14.2929 8.29289L12 10.5858L9.70711 8.29289Z",fill:"currentColor"}));function as({isOpen:s,onClose:t,connectionId:n,accountId:a,isPostActivation:i,footerContent:o,primaryButton:r,secondaryButton:c}){const x=v(),u=w(),{refetch:f,data:m,error:g,isLoading:p}=F({queryFn:async()=>await b.admin_connection_list_item_scopes(a,n,"user_drive"),queryKey:["admin_connection_list_item_scopes",n,"user_drive"]}),{isPending:h,mutate:j}=H({mutationFn:async C=>await b.admin_connection_update_item_default_scope(a,n,"user_drive",C?"include":"exclude"),mutationKey:["admin_connection_update_item_default_scope",n,"user_drive"],onError:()=>{u.danger(x.formatMessage({id:"YnlDV7",defaultMessage:"Failed to update policy."}))},onSettled:()=>{f()}}),_=m?.default_selection==="include";return e.jsxs(S,{...V,isOpen:s,onClose:t,children:[e.jsx("div",{className:"flex flex-col gap-6 px-6 pb-10 pt-4",children:p?e.jsx(P,{lines:4}):g?e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"text-token-text-error",children:e.jsx(l,{id:"3BZzpX",defaultMessage:"Something went wrong"})}),e.jsx("div",{children:e.jsx(y,{color:"secondary",icon:je,onClick:()=>f(),children:e.jsx(l,{id:"fFd9RR",defaultMessage:"Try again"})})})]}):i?e.jsx("div",{className:"group flex w-full flex-row items-center gap-4 rounded-xl border border-token-border-medium px-8 py-4",children:_?e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"icon-lg"}),e.jsx("p",{className:"grow",children:e.jsx(l,{id:"rWqZ31",defaultMessage:"User owned files in My Drives are being synced."})})]}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{className:"icon-lg"}),e.jsx("p",{className:"grow",children:e.jsx(l,{id:"/dUChW",defaultMessage:"User owned files in My Drives are not being synced."})})]})}):e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(l,{id:"K4ZFoX",defaultMessage:"How do you want to handle My Drives?"})}),e.jsx("div",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"kAW/VW",defaultMessage:"Choose whether you want to sync the My Drive folder for your users."})}),e.jsxs("div",{className:"group flex w-full flex-row items-center gap-4 rounded-xl border border-token-border-medium px-8 py-4",children:[e.jsx(Ve,{enabled:_,disabled:h,label:x.formatMessage(De.includeUserDrivesLabel),onChange:()=>{!h&&j(!_)}}),e.jsx("p",{children:e.jsx(l,{...De.includeUserDrivesLabel})}),h&&e.jsx(q,{}),e.jsx("div",{className:"grow"}),e.jsx(fe,{label:e.jsx("p",{children:e.jsx(l,{id:"xJvlxk",defaultMessage:"Enable this setting to sync files in users' individual My Drives."})}),children:e.jsx(Ze,{className:"icon-lg text-token-text-tertiary"})})]}),e.jsxs("div",{className:"flex w-full flex-row items-center gap-4 rounded-xl bg-token-main-surface-secondary p-4 text-token-text-primary",children:[e.jsx(ge,{className:"icon-lg"}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"4vN9WK",defaultMessage:"You will not be able to change whether user My Drives are included once the connection starts syncing data."})})]})]})}),e.jsx(O,{footerContent:o,primaryButton:r,secondaryButton:c})]})}const De=se({includeUserDrivesLabel:{id:"75ojp7",defaultMessage:"Include user My Drives?"}});function ns({connectionDisplayInfo:s}){return e.jsxs("span",{className:"whitespace-nowrap rounded-xl bg-token-main-surface-secondary px-2 py-1 font-bold",children:[s.icon_url&&e.jsx("img",{src:s.icon_url,alt:"",className:"icon-sm mr-2 inline"}),s.display_name]})}function ie({isOpen:s,onClose:t,onActivate:n,connectionId:a,accountId:i,connectionDisplayInfo:o,footerContent:r,secondaryButton:c,connectorType:x}){const u=v(),f=w(),m=K(),[g,p]=d.useState(!1),h=()=>{p(!0),b.admin_activate_connection_instance(i,a).then(()=>{L.logEventWithStatsig(U.contextualAnswersAdminConnectionActivated,"chatgpt_contextual_answers_admin_connection_activated",{connectorType:x}),f.success(u.formatMessage({id:"y5DD0Z",defaultMessage:"Connection successfully activated."})),n?.(),t?.()}).catch(()=>{f.danger(u.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}))}).finally(()=>{p(!1)})},j=e.jsx(y,{color:"primary",loading:g,onClick:h,disabled:m,children:e.jsx(l,{id:"C2dZRO",defaultMessage:"Done"})});return e.jsxs(S,{...ae,isOpen:s,onClose:t,title:Ge(x),children:[e.jsxs("div",{className:"flex flex-col gap-3 px-6 pb-10 pt-4",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(l,{id:"38WXzu",defaultMessage:"Review"})}),e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"yQhjtE",defaultMessage:"Confirm everything looks good to you, then click the button to activate the connection and start syncing. "})}),e.jsx(ns,{connectionDisplayInfo:o})]}),e.jsx(O,{primaryButton:m?e.jsx(he,{children:j}):j,secondaryButton:c,footerContent:r})]})}function is({isOpen:s,onClose:t,connectionId:n,accountId:a,isPostActivation:i,footerContent:o,primaryButton:r,secondaryButton:c}){const x=v(),{data:u,isLoading:f,error:m,refetch:g}=F({queryKey:["slack_channel_type_scopes",n],queryFn:()=>b.admin_connection_list_item_scopes(a,n,"channel_type")});let p,h;return u?.object_selections.forEach(({object_handle:j,selection:_})=>{j==="public"?p=_==="include":j==="private"&&(h=_==="include")}),e.jsxs(S,{...Xe,isOpen:s,onClose:t,children:[e.jsxs("div",{className:"flex flex-col gap-4 px-6 pb-10 pt-4",children:[e.jsx("p",{className:"text-token-text-primary",children:e.jsx(l,{id:"Ot9UkQ",defaultMessage:"Control which types of channels should be synced."})}),!i&&e.jsxs("div",{className:"flex w-full flex-row items-center gap-4 rounded-xl bg-token-main-surface-secondary p-4 text-token-text-primary",children:[e.jsx(ge,{className:"icon-lg"}),e.jsx("span",{className:"text-sm",children:e.jsx(l,{id:"qByMz2",defaultMessage:"You will not be able to modify the sync policy once the connection starts syncing data."})})]}),m&&e.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[e.jsx($,{className:"icon-md inline"}),e.jsx(l,{id:"F9HsRh",defaultMessage:"Something went wrong."}),e.jsx("button",{onClick:()=>g(),className:"underline",children:e.jsx(l,{id:"y/IEAC",defaultMessage:"Try again"})})]}),f?e.jsx(P,{lines:4}):e.jsxs(e.Fragment,{children:[p!=null&&e.jsx(Ae,{connectionId:n,accountId:a,slackChannelScope:"public",title:x.formatMessage({id:"CXSVXf",defaultMessage:"Public channels"}),refetch:g,value:p,isPostActivation:i}),h!=null&&e.jsx(Ae,{connectionId:n,accountId:a,slackChannelScope:"private",title:x.formatMessage({id:"5XrboJ",defaultMessage:"Private channels"}),refetch:g,value:h,isPostActivation:i})]})]}),e.jsx(O,{footerContent:o,primaryButton:r,secondaryButton:c})]})}function Ae({connectionId:s,accountId:t,slackChannelScope:n,title:a,refetch:i,value:o,isPostActivation:r}){const c=w(),x=v(),[u,f]=d.useState(!1),m=async g=>{if(!u){f(!0);try{g?await b.admin_connection_unblock_items(t,s,"channel_type",[n]):await b.admin_connection_block_items(t,s,"channel_type",[n]),i()}catch{c.danger(x.formatMessage({id:"7QF5n6",defaultMessage:"Failed to update policy. Please try again later."}))}finally{f(!1)}}};return r?e.jsxs("div",{className:"group flex w-full flex-row items-center gap-4 rounded-xl border border-token-border-medium px-8 py-4",children:[o?e.jsx(ee,{className:"icon-lg"}):e.jsx(ts,{className:"icon-lg"}),e.jsx("p",{className:"flex-1",children:a})]}):e.jsxs("div",{className:"group flex w-full flex-row items-center gap-4 rounded-xl border border-token-border-medium px-8 py-4",children:[e.jsx(Ve,{enabled:o,disabled:u,label:a,onChange:m}),e.jsx("p",{children:a}),u&&e.jsx(q,{})]})}const wt=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{d:"M8.7587 3H15.2413C16.0463 2.99999 16.7106 2.99998 17.2518 3.04419C17.8139 3.09012 18.3306 3.18868 18.816 3.43597C19.5686 3.81947 20.1805 4.43139 20.564 5.18404C20.8113 5.66937 20.9099 6.18608 20.9558 6.74817C21 7.28936 21 7.95372 21 8.75868V15.2413C21 16.0463 21 16.7106 20.9558 17.2518C20.9099 17.8139 20.8113 18.3306 20.564 18.816C20.1805 19.5686 19.5686 20.1805 18.816 20.564C18.3306 20.8113 17.8139 20.9099 17.2518 20.9558C16.7106 21 16.0463 21 15.2413 21H8.75868C7.95372 21 7.28936 21 6.74817 20.9558C6.18608 20.9099 5.66937 20.8113 5.18404 20.564C4.43139 20.1805 3.81947 19.5686 3.43597 18.816C3.18868 18.3306 3.09012 17.8139 3.04419 17.2518C2.99998 16.7106 2.99999 16.0463 3 15.2413V8.7587C2.99999 7.95373 2.99998 7.28937 3.04419 6.74817C3.09012 6.18608 3.18868 5.66937 3.43597 5.18404C3.81947 4.43139 4.43139 3.81947 5.18404 3.43597C5.66937 3.18868 6.18608 3.09012 6.74817 3.04419C7.28937 2.99998 7.95373 2.99999 8.7587 3ZM6.91104 5.03755C6.47262 5.07337 6.24842 5.1383 6.09202 5.21799C5.7157 5.40973 5.40973 5.7157 5.21799 6.09202C5.1383 6.24842 5.07337 6.47262 5.03755 6.91104C5.00078 7.36113 5 7.94342 5 8.8V15.2C5 16.0566 5.00078 16.6389 5.03755 17.089C5.07337 17.5274 5.1383 17.7516 5.21799 17.908C5.40973 18.2843 5.7157 18.5903 6.09202 18.782C6.24842 18.8617 6.47262 18.9266 6.91104 18.9624C7.36113 18.9992 7.94342 19 8.8 19H15.2C16.0566 19 16.6389 18.9992 17.089 18.9624C17.5274 18.9266 17.7516 18.8617 17.908 18.782C18.2843 18.5903 18.5903 18.2843 18.782 17.908C18.8617 17.7516 18.9266 17.5274 18.9624 17.089C18.9992 16.6389 19 16.0566 19 15.2V8.8C19 7.94342 18.9992 7.36113 18.9624 6.91104C18.9266 6.47262 18.8617 6.24842 18.782 6.09202C18.5903 5.7157 18.2843 5.40973 17.908 5.21799C17.7516 5.1383 17.5274 5.07337 17.089 5.03755C16.6389 5.00078 16.0566 5 15.2 5H8.8C7.94342 5 7.36113 5.00078 6.91104 5.03755ZM16.3255 7.93219C16.7772 8.25003 16.8856 8.87383 16.5678 9.32549L11.8178 16.0755C11.6431 16.3237 11.3652 16.4792 11.0623 16.4981C10.7593 16.517 10.4642 16.3973 10.2601 16.1727L7.76006 13.4227C7.38855 13.014 7.41867 12.3816 7.82733 12.0101C8.23599 11.6386 8.86843 11.6687 9.23994 12.0773L10.9004 13.9039L14.9322 8.17451C15.25 7.72285 15.8738 7.61436 16.3255 7.93219Z",fill:"currentColor"}));function Z({label:s,onClick:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full px-4",children:e.jsx("div",{className:"w-full border-t border-token-border-medium"})}),e.jsxs("div",{className:"flew-row flex cursor-pointer items-center gap-4 px-4 py-2 hover:bg-token-surface-hover",onClick:t,children:[e.jsx("p",{className:"flex-1",children:s}),t&&e.jsx(gs,{className:"icon-md flex-0 text-token-text-secondary"})]})]})}function kt({accountId:s,connectionId:t,refetch:n}){const[a,i]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:()=>i(!0),label:e.jsx(l,{id:"wM9lvD",defaultMessage:"Configure credentials"})}),a&&e.jsx(es,{onClose:()=>i(!1),onNext:()=>{n(),i(!1)},accountId:s,connectionId:t})]})}function Nt({accountId:s,connectionId:t,isPostActivation:n}){const[a,i]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:()=>i(!0),label:e.jsx(l,{id:"lTeSGb",defaultMessage:"Sync policy"})}),a&&e.jsx(is,{isOpen:!0,onClose:()=>i(!1),accountId:s,connectionId:t,isPostActivation:n})]})}function St({accountId:s,connectionId:t,isPostActivation:n}){const[a,i]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:()=>i(!0),label:e.jsx(l,{id:"AgDWHl",defaultMessage:"User drives"})}),a&&e.jsx(as,{isOpen:!0,isPostActivation:n,onClose:()=>i(!1),accountId:s,connectionId:t})]})}function Dt({accountId:s,connectionId:t}){const[n,a]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:()=>a(!0),label:e.jsx(l,{id:"gsRcYT",defaultMessage:"Shared drives"})}),n&&e.jsx(ss,{isOpen:!0,onClose:()=>a(!1),accountId:s,connectionId:t})]})}function At({accountId:s,connectionId:t,objectType:n}){const[a,i]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:()=>i(!0),label:e.jsx(l,{id:"tisZLQ",defaultMessage:"Block items"})}),a&&e.jsx(jt,{isOpen:!0,onClose:()=>i(!1),accountId:s,connectionId:t,objectType:n})]})}function Et({accountId:s,connection:t}){const[n,a]=d.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{onClick:()=>a(!0),label:e.jsx(l,{id:"9iRaQo",defaultMessage:"User access"})}),n&&e.jsx(ne,{connectorType:t.connection_config.knowledge_connector_type,fallbackEstimatedMaxNumUsers:te(t.connection_config),onClose:()=>a(!1),accountId:s,connectionId:t.connection_config.connection_config_id})]})}function Tt({accountId:s,connectionId:t,connectorType:n,connectionDisplayInfo:a,onActivate:i,activationBlockingError:o}){const[r,c]=d.useState(!1),x=K(),u=e.jsx(y,{color:o?"secondary":"primary",disabled:!!o||x,icon:wt,onClick:()=>c(!0),children:e.jsx(l,{id:"tVDCWM",defaultMessage:"Review and finish setup"})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full px-4",children:e.jsx("div",{className:"w-full border-t border-token-border-medium"})}),e.jsxs("div",{className:"flex w-full flex-col gap-2 p-4",children:[o&&e.jsx("p",{className:"text-sm text-token-text-secondary",children:o}),x?e.jsx(he,{children:u}):u]}),r&&e.jsx(ie,{isOpen:!0,onClose:()=>c(!1),accountId:s,connectionId:t,connectionDisplayInfo:a,onActivate:i,connectorType:n})]})}const Pt=({open:s,onOpenChange:t,deleteConnection:n,isDeleting:a,connectionDisplayInfo:i})=>{const o=v();return e.jsx(S,{isOpen:s,onClose:()=>t(!1),shouldIgnoreClickOutside:!0,title:o.formatMessage({id:"oXdl2Z",defaultMessage:"Confirm deletion"}),type:"danger",icon:ge,primaryButton:e.jsx(y,{color:"danger",onClick:n,disabled:a,loading:a,children:e.jsx(l,{id:"knS5PY",defaultMessage:"Delete"})}),secondaryButton:e.jsx(y,{color:"secondary",disabled:a,onClick:()=>{t(!1)},children:e.jsx(l,{id:"KnPHlG",defaultMessage:"Cancel"})}),children:e.jsxs("ul",{className:"px-4",children:[e.jsx("li",{className:"mb-2 list-disc pl-2",children:e.jsx(l,{id:"BvnNwE",defaultMessage:"You are about to delete the connection {connection_name}.",values:{connection_name:e.jsx(ns,{connectionDisplayInfo:i})}})}),e.jsx("li",{className:"mb-2 list-disc pl-2",children:e.jsx(l,{id:"0m+fk7",defaultMessage:"Deleting this connection will stop syncing and delete synced data."})}),e.jsx("li",{className:"mb-2 list-disc pl-2 font-bold",children:e.jsx(l,{id:"a86dO+",defaultMessage:"This action cannot be undone."})})]})})},It=({open:s,onOpenChange:t,defaultName:n,accountId:a,connectionId:i,refetch:o})=>{const r=v(),[c,x]=d.useState(n),[u,f]=d.useState(!1),m=d.useId(),g=w(),p=d.useCallback(()=>{f(!0),b.admin_edit_name_connection_instance(a,i,{name:c}).then(()=>{g.success(r.formatMessage({id:"pepxEP",defaultMessage:"Connection updated successfully."})),o(),t(!1)}).catch(()=>{g.danger(r.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}))}).finally(()=>{f(!1)})},[a,i,r,c,t,o,g]);return e.jsx(S,{isOpen:s,onClose:()=>t(!1),shouldIgnoreClickOutside:!0,title:r.formatMessage({id:"mmCJWI",defaultMessage:"Rename"}),type:"success",icon:Ye,primaryButton:e.jsx(y,{onClick:()=>p(),loading:u,children:e.jsx(l,{id:"LebexD",defaultMessage:"Rename"})}),secondaryButton:e.jsx(y,{color:"secondary",onClick:()=>{t(!1)},children:e.jsx(l,{id:"KnPHlG",defaultMessage:"Cancel"})}),children:e.jsxs("form",{onSubmit:h=>{h.preventDefault(),p()},className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:m,className:"text-base font-medium text-token-text-secondary",children:e.jsx(l,{id:"Gk2g3Q",defaultMessage:"Connection name"})}),e.jsx("input",{type:"text",value:c,onChange:h=>x(h.target.value),id:m,className:"rounded-lg border border-solid border-token-border-light bg-token-main-surface-primary text-token-text-primary"}),e.jsx("button",{type:"submit",className:"display-none"})]})})};function os({accountId:s,refetchConnectionInstances:t,connection:n,showIcon:a=!1}){const[i,o]=d.useState(!1),r=v();let c;switch(n.connection_config.knowledge_connector_type){case void 0:break;case"github":case"merge_file_storage":case"google_drive_oauth":case"google_drive_dwd":c="synced_object";break;case"slack":c="synced_channel";break}return e.jsxs(Fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"group w-full rounded-xl bg-token-main-surface-secondary pb-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 p-4 pb-6",children:[a&&n.display_info.icon_url&&e.jsx("img",{src:n.display_info.icon_url,alt:"",className:"icon-xl self-center"}),e.jsxs("div",{className:"w-full flex-shrink overflow-hidden",children:[e.jsx("div",{className:"mb-1 overflow-hidden text-ellipsis whitespace-nowrap font-medium text-token-text-primary",children:e.jsx(fe,{label:n.display_info.display_name,side:"top",align:"center",children:n.display_info.display_name})}),e.jsx("div",{children:e.jsx(Ft,{connectionStatus:n.connection_status})})]}),e.jsx(Ot,{isOpen:i,setIsOpen:o,accountId:s,refetch:t,connectionId:n.connection_config.connection_config_id,connectionDisplayInfo:n.display_info,className:G("h-8 w-8 hover:bg-token-main-surface-secondary-selected",i?"bg-token-main-surface-secondary-selected":"bg-transparent")})]}),e.jsx(rt,{connection:n}),e.jsx(Et,{connection:n,accountId:s}),n.connection_config.knowledge_connector_type==="google_drive_dwd"&&e.jsxs(e.Fragment,{children:[e.jsx(kt,{connectionId:n.connection_config.connection_config_id,accountId:s,refetch:t}),e.jsx(St,{connectionId:n.connection_config.connection_config_id,accountId:s,isPostActivation:n.connection_status!=="draft"}),e.jsx(Dt,{connectionId:n.connection_config.connection_config_id,accountId:s})]}),n.connection_config.knowledge_connector_type==="slack"&&e.jsx(Nt,{connectionId:n.connection_config.connection_config_id,accountId:s,isPostActivation:n.connection_status!=="draft"}),c!=null&&e.jsx(At,{connectionId:n.connection_config.connection_config_id,accountId:s,objectType:c}),n.connection_status==="draft"&&e.jsx(Tt,{connectorType:n.connection_config.knowledge_connector_type,connectionId:n.connection_config.connection_config_id,accountId:s,connectionDisplayInfo:n.display_info,onActivate:t,activationBlockingError:Rt(n,r)})]})}const Ft=({connectionStatus:s})=>{switch(s){case"active":case"partially_activated":case"activating":return e.jsxs("div",{className:"flex items-center",children:[e.jsx(ps,{className:"icon-sm text-token-text-primary"}),e.jsx("span",{className:"ml-1 text-sm text-token-text-primary",children:e.jsx(l,{id:"JGGafW",defaultMessage:"Configured"})}),e.jsx(Fs,{className:"icon-sm ml-2 text-token-text-primary"}),e.jsx("span",{className:"ml-1 text-sm text-token-text-primary",children:e.jsx(l,{id:"RGpIWk",defaultMessage:"Syncing"})})]});case"draft":return e.jsxs("div",{className:"flex items-center",children:[e.jsx(ft,{className:"icon-sm text-token-text-primary"}),e.jsx("span",{className:"ml-1 text-sm text-token-text-primary",children:e.jsx(l,{id:"m4Lx1j",defaultMessage:"Draft"})}),e.jsx(Js,{className:"icon-sm ml-2 text-token-text-primary"}),e.jsx("span",{className:"ml-1 text-sm text-token-text-primary",children:e.jsx(l,{id:"BBCFFM",defaultMessage:"Nothing synced"})})]});case"deleting":case"deleted":return null}};function Ot({isOpen:s,setIsOpen:t,className:n,connectionId:a,connectionDisplayInfo:i,accountId:o,refetch:r}){const c=w(),x=v(),[u,f]=d.useState(!1),[m,g]=d.useState(!1),[p,h]=d.useState(!1),j=async()=>{if(!p){h(!0);try{await b.admin_delete_connection_instance(o,a),c.success(x.formatMessage({id:"zM0Z9u",defaultMessage:"Connection deleted."}))}catch{c.danger(x.formatMessage({id:"3lBGk2",defaultMessage:"Failed to delete this connection. Please try again later."}))}finally{r(),h(!1),g(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsxs(T.Root,{open:s,onOpenChange:t,children:[e.jsx(T.Trigger,{className:n,children:e.jsx(We,{className:"icon-lg"})}),e.jsx(T.Portal,{children:e.jsxs(T.Content,{size:"medium",children:[e.jsx(T.Item,{icon:Ye,onSelect:()=>f(!0),disabled:p||m,children:e.jsx(l,{id:"XSQcFy",defaultMessage:"Rename connection"})}),e.jsx(T.Item,{icon:p||m?q:ze,onSelect:()=>g(!0),color:"danger",disabled:p||m,children:e.jsx(l,{id:"EAIYOb",defaultMessage:"Delete connection"})}),!1]})})]}),e.jsx(It,{open:u,onOpenChange:f,defaultName:i.display_name,connectionId:a,accountId:o,refetch:r}),e.jsx(Pt,{open:m,onOpenChange:g,deleteConnection:j,isDeleting:p,connectionDisplayInfo:i})]})}function Rt(s,t){if(s.connection_config.knowledge_connector_type==="google_drive_dwd"&&(!s.connection_config.admin_email_address||!s.connection_config.service_account_credential_id))return t.formatMessage({id:"BfNdzb",defaultMessage:"Credential configuration is incomplete"})}function _e({steps:s,onClose:t}){const n=s.length,[a,i]=d.useState(0),o=s[0]?.connectorType,r=s[0]?.name;d.useEffect(()=>{!o||!r||L.logEventWithStatsig(U.contextualAnswersAdminCreateConnectionStep,"chatgpt_contextual_answers_admin_create_connection_step",{connectorType:o,stepName:r})},[o,r]);const c=x=>{i(x),!(x<0||x>=s.length)&&L.logEventWithStatsig(U.contextualAnswersAdminCreateConnectionStep,"chatgpt_contextual_answers_admin_create_connection_step",{connectorType:s[x].connectorType,stepName:s[x].name})};return a<s.length?s[a].fn({goForward:a<n-1?()=>c(a+1):void 0,goBackward:a>0?()=>c(a-1):void 0,close:t,stepNumber:a,totalSteps:n}):null}function Lt({onClose:s,backButton:t}){const[n,a]=d.useState(),i=B();return i?n?e.jsx(Bt,{accountId:i.id,connection:n,onClose:s}):e.jsx(Ut,{onClose:s,backButton:t,setConnection:a}):null}function Ut({onClose:s,setConnection:t,backButton:n}){const a=v(),i=w(),o=B(),r=d.useId();d.useEffect(()=>{L.logEventWithStatsig(U.contextualAnswersAdminCreateConnectionStep,"chatgpt_contextual_answers_admin_create_connection_step",{connectorType:"google_drive_dwd",stepName:"basic_info"})},[]);const[c,x]=d.useState(""),u=c.length>128,f=c.trim().length>0&&!u,[m,g]=d.useState(!1),p=d.useCallback(()=>{!f||!o||m||(g(!0),b.admin_create_connection_instance(o.id,{knowledge_connector_type:"google_drive_dwd",connection_config_id:"--fake-local-id"},c.trim()).then(h=>{i.success(a.formatMessage({id:"RFxwaf",defaultMessage:"Connection created successfully."})),t(h)}).catch(()=>{i.danger(a.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}))}).finally(()=>{g(!1)}))},[o,c,a,f,m,t,i]);return e.jsxs(S,{...V,onClose:()=>s?.(),children:[e.jsxs("form",{onSubmit:h=>{h.preventDefault(),f&&p()},className:"flex flex-col px-6 pb-10 pt-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:r,className:"text-xl font-medium",children:e.jsx(l,{id:"+wLWeZ",defaultMessage:"Enter display name"})}),e.jsx("input",{type:"text",value:c,onChange:h=>x(h.target.value),id:r,className:"rounded-lg border border-solid border-token-border-light bg-token-main-surface-primary text-token-text-primary"}),e.jsx("div",{className:"text-sm text-token-text-tertiary",children:e.jsx(l,{id:"CPXVQO",defaultMessage:"This is the name your members will see in their ChatGPT connectors."})}),u?e.jsx("p",{className:"text-red-500",children:e.jsx(l,{id:"vT7EGU",defaultMessage:"Name is too long."})}):null]}),e.jsx("button",{type:"submit",className:"display-none"})]}),e.jsxs("div",{className:"flex items-center justify-between border-t p-6",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[n,e.jsx(y,{color:"primary",disabled:!f||m,loading:m,onClick:p,children:e.jsx(l,{id:"lZthRm",defaultMessage:"Save Draft and Continue"})})]})]})]})}function Bt({connection:s,accountId:t,onClose:n}){return e.jsx(_e,{onClose:n,steps:[{connectorType:"google_drive_dwd",name:"credential",fn:({goForward:a,close:i,stepNumber:o,totalSteps:r})=>e.jsx(es,{onClose:()=>i?.(),accountId:t,connectionId:s.connection_config.connection_config_id,onNext:a??(()=>null),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:o+1,totalSteps:r}})})})},{connectorType:"google_drive_dwd",name:"user_drives",fn:({goForward:a,goBackward:i,close:o,stepNumber:r,totalSteps:c})=>e.jsx(as,{onClose:()=>o?.(),accountId:t,connectionId:s.connection_config.connection_config_id,primaryButton:a&&e.jsx(y,{color:"primary",onClick:a,children:e.jsx(l,{id:"z5fExR",defaultMessage:"Next"})}),secondaryButton:i&&e.jsx(y,{color:"secondary",onClick:i,children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:r+1,totalSteps:c}})}),isOpen:!0,isPostActivation:!1})},{connectorType:"google_drive_dwd",name:"shared_drives",fn:({goForward:a,goBackward:i,close:o,stepNumber:r,totalSteps:c})=>e.jsx(ss,{onClose:()=>o?.(),accountId:t,connectionId:s.connection_config.connection_config_id,primaryButton:a&&e.jsx(y,{color:"primary",onClick:a,children:e.jsx(l,{id:"z5fExR",defaultMessage:"Next"})}),secondaryButton:i&&e.jsx(y,{color:"secondary",onClick:i,children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:r+1,totalSteps:c}})}),isOpen:!0})},{connectorType:"google_drive_dwd",name:"allowed_users",fn:({goForward:a,goBackward:i,close:o,stepNumber:r,totalSteps:c})=>e.jsx(ne,{connectorType:"google_drive_dwd",fallbackEstimatedMaxNumUsers:te(s.connection_config),onClose:()=>o?.(),accountId:t,connectionId:s.connection_config.connection_config_id,primaryButton:a&&e.jsx(y,{color:"primary",onClick:a,children:e.jsx(l,{id:"z5fExR",defaultMessage:"Next"})}),secondaryButton:i&&e.jsx(y,{color:"secondary",onClick:i,children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:r+1,totalSteps:c}})})})},{connectorType:"google_drive_dwd",name:"review_and_activate",fn:({goBackward:a,close:i,stepNumber:o,totalSteps:r})=>e.jsx(ie,{isOpen:!0,onClose:()=>i?.(),accountId:t,connectorType:"google_drive_dwd",connectionId:s.connection_config.connection_config_id,connectionDisplayInfo:s.display_info,secondaryButton:a&&e.jsx(y,{color:"secondary",onClick:a,children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:o+1,totalSteps:r}})})})}]})}function Gt({onClose:s,backButton:t}){const[n,a]=d.useState(),i=B();return i?n?e.jsx(qt,{accountId:i.id,connection:n,onClose:s}):e.jsx(Wt,{onClose:s,backButton:t,setConnection:a}):null}function Wt({onClose:s,setConnection:t,backButton:n}){const a=v(),i=w(),o=B(),r=d.useId();d.useEffect(()=>{L.logEventWithStatsig(U.contextualAnswersAdminCreateConnectionStep,"chatgpt_contextual_answers_admin_create_connection_step",{connectorType:"google_drive_oauth",stepName:"basic_info"})},[]);const c=Os(),x=d.useMemo(()=>{try{const _=c?.email?.split("@")[1];if(_&&!et(_))return _}catch{}return""},[c]),[u,f]=d.useState(x),[m,g]=d.useState(!1),p=d.useCallback(()=>{!u||!o||(g(!0),b.admin_create_connection_instance(o.id,{knowledge_connector_type:"google_drive_oauth",domain_name:u,connection_config_id:"--fake-local-id"}).then(_=>{i.success(a.formatMessage({id:"RFxwaf",defaultMessage:"Connection created successfully."})),t(_)}).catch(()=>{i.danger(a.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}))}).finally(()=>{g(!1)}))},[o,u,a,t,i]),h=u.trim().toLocaleLowerCase()==="gmail.com",j=!!u.trim()&&u.includes(".")&&!h;return e.jsxs(S,{...V,onClose:()=>s?.(),children:[e.jsxs("form",{onSubmit:_=>{_.preventDefault(),j&&p()},className:"flex flex-col px-6 pb-10 pt-4",children:[e.jsx("label",{htmlFor:r,className:"mb-4 text-xl font-medium",children:e.jsx(l,{id:"qFHnSd",defaultMessage:"Enter domain name"})}),e.jsx("input",{type:"text",value:u,placeholder:"yourdomain.com",onChange:_=>f(_.target.value),id:r,className:"rounded-lg border border-solid border-token-border-light bg-token-main-surface-primary text-token-text-primary"}),h?e.jsx("p",{className:"text-red-500",children:e.jsx(l,{id:"Nl2esx",defaultMessage:"This domain is not allowed."})}):null,e.jsx("button",{type:"submit",className:"display-none"})]}),e.jsx(O,{footerContent:e.jsx("div",{children:e.jsx(Q,{href:"https://support.google.com/cloudidentity/answer/182080",className:"text-sm text-token-text-secondary underline",children:e.jsx(l,{id:"6WfLis",defaultMessage:"Where do I find my domain name?"})})}),primaryButton:e.jsx(y,{color:"primary",disabled:!j,loading:m,onClick:p,children:e.jsx(l,{id:"lZthRm",defaultMessage:"Save Draft and Continue"})}),secondaryButton:n})]})}function qt({connection:s,accountId:t,onClose:n}){return e.jsx(_e,{onClose:n,steps:[{connectorType:"google_drive_oauth",name:"allowed_users",fn:({goForward:a,close:i,stepNumber:o,totalSteps:r})=>e.jsx(ne,{connectorType:"google_drive_oauth",fallbackEstimatedMaxNumUsers:te(s.connection_config),onClose:()=>i?.(),accountId:t,connectionId:s.connection_config.connection_config_id,primaryButton:a&&e.jsx(y,{color:"primary",onClick:a,children:e.jsx(l,{id:"z5fExR",defaultMessage:"Next"})}),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:o+1,totalSteps:r}})})})},{connectorType:"google_drive_oauth",name:"review_and_activate",fn:({goBackward:a,close:i,stepNumber:o,totalSteps:r})=>e.jsx(ie,{isOpen:!0,onClose:()=>i?.(),accountId:t,connectorType:"google_drive_oauth",connectionId:s.connection_config.connection_config_id,connectionDisplayInfo:s.display_info,secondaryButton:a&&e.jsx(y,{color:"secondary",onClick:a,children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:o+1,totalSteps:r}})})})}]})}function Vt({isOpen:s,onClose:t}){const[n,a]=d.useState("gdrive-oauth"),[i,o]=d.useState(!0);return e.jsxs(e.Fragment,{children:[e.jsxs(S,{...V,isOpen:s&&i,onClose:t,children:[e.jsx("div",{className:"px-6 pb-10 pt-4",children:e.jsx(Zt,{selectedConnector:n,setSelectedConnector:a})}),e.jsx(O,{footerContent:e.jsx(Q,{href:qe,className:"text-sm text-token-text-secondary underline",children:e.jsx(l,{id:"8eQowK",defaultMessage:"Which option is right for my team"})}),primaryButton:e.jsx(y,{color:"primary",onClick:()=>o(!1),children:e.jsx(l,{id:"z5fExR",defaultMessage:"Next"})}),secondaryButton:e.jsx(y,{color:"secondary",onClick:t,children:e.jsx(l,{id:"5Oo8TW",defaultMessage:"Cancel"})})})]}),s&&!i&&(n==="gdrive-oauth"?e.jsx(Gt,{onClose:()=>{t(),o(!0)},backButton:e.jsx(y,{color:"secondary",onClick:()=>o(!0),children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})})}):n==="gdrive-dwd"?e.jsx(Lt,{onClose:()=>{t(),o(!0)},backButton:e.jsx(y,{color:"secondary",onClick:()=>o(!0),children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})})}):null)]})}function Zt({selectedConnector:s,setSelectedConnector:t}){const n=v();return e.jsxs("div",{children:[e.jsx("div",{className:"-mt-2 mb-6 text-start text-lg font-medium",children:e.jsx(l,{id:"JKSyU3",defaultMessage:"Choose how your team connects Google Drive"})}),e.jsxs(Rs,{value:s,onValueChange:a=>t(a),className:"flex w-full flex-col gap-4",children:[e.jsx(Ee,{optionValue:"gdrive-oauth",optionName:n.formatMessage({id:"PToV7K",defaultMessage:"Quick setup (Best for small teams)"}),isSelected:s==="gdrive-oauth",checkedBulletPoints:[n.formatMessage({id:"FWY+Q/",defaultMessage:"Up to {no} users"},{no:10}),n.formatMessage({id:"kKUnE9",defaultMessage:"Each user authenticates their account"})]}),e.jsx(Ee,{optionValue:"gdrive-dwd",optionName:n.formatMessage({id:"Fv9Vz6",defaultMessage:"Admin-controlled access (Best for larger teams)"}),isSelected:s==="gdrive-dwd",checkedBulletPoints:[n.formatMessage({id:"UkcpBq",defaultMessage:"No user limit"}),n.formatMessage({id:"wQNb3H",defaultMessage:"Centralized setup with granular access controls"})]})]})]})}function Ee({optionName:s,optionValue:t,isSelected:n,checkedBulletPoints:a,disabled:i}){const o=n?ee:js;return e.jsxs(Ls,{value:t,id:`connector-group-option-${t}`,className:G("flex w-full justify-between rounded-xl border border-solid border-token-border-heavy p-4",i&&"opacity-50",n&&"border-token-text-primary"),disabled:i,children:[e.jsxs("div",{className:"flex-0 max-w-96",children:[e.jsx("div",{className:"text-start font-medium",children:s}),e.jsx("div",{className:"font-tertiary mt-1 text-start text-sm",children:a.length&&e.jsx("ul",{className:"mb-2 mt-1 flex-1 text-token-text-secondary",children:a.map((r,c)=>e.jsxs("li",{className:"flex flex-row items-baseline text-start",children:[e.jsx(hs,{className:"icon-sm relative top-1 mr-2"}),e.jsx("span",{className:"text-sm",children:r})]},c))})})]}),e.jsx(o,{className:"icon-lg flex-0"})]})}function Yt({onClose:s}){const[t,n]=d.useState(),a=B();return a?t?e.jsx(Ht,{accountId:a.id,connection:t,onClose:s}):e.jsx(zt,{accountId:a.id,onClose:s,setConnection:n}):null}function zt({onClose:s,setConnection:t,accountId:n}){const a=v(),i=w(),[o,r]=d.useState({teamDomain:"app"});d.useEffect(()=>{L.logEventWithStatsig(U.contextualAnswersAdminCreateConnectionStep,"chatgpt_contextual_answers_admin_create_connection_step",{connectorType:"slack",stepName:"basic_info"})},[]);const[c,x]=d.useState(!1),u=d.useCallback(()=>{!(o.teamDomain&&o.teamId)||!n||(x(!0),b.admin_create_connection_instance(n,{connection_config_id:"--fake-local-id",knowledge_connector_type:"slack",team_id:o.teamId,team_domain:o.teamDomain},o.connectionName).then(j=>{i.success(a.formatMessage({id:"RFxwaf",defaultMessage:"Connection created successfully."})),t(j)}).catch(()=>{i.danger(a.formatMessage({id:"aqpeYE",defaultMessage:"Something went wrong. Please try again."}))}).finally(()=>{x(!1)}))},[n,o.connectionName,o.teamDomain,o.teamId,a,t,i]),f=!!o.connectionName?.length&&o.connectionName.length>128,m=!!(o.teamDomain&&o.teamId&&!f),g=d.useId(),p=d.useId(),h=d.useId();return e.jsxs(S,{...Xe,onClose:s,children:[e.jsxs("form",{onSubmit:j=>{j.preventDefault(),m&&u()},className:"flex flex-col gap-4 px-6 pb-6 pt-4",children:[e.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:g,className:"text-base font-medium text-token-text-secondary",children:e.jsx(l,{id:"e2yF8/",defaultMessage:"Connection display name"})}),e.jsx("input",{type:"text",value:o.connectionName??"",onChange:j=>r(_=>({..._,connectionName:j.target.value})),placeholder:a.formatMessage({id:"0gZ+BA",defaultMessage:"(optional)"}),id:g,className:"rounded-lg border border-solid border-token-border-light bg-token-main-surface-primary text-token-text-primary"}),f?e.jsx("p",{className:"text-red-500",children:e.jsx(l,{id:"vT7EGU",defaultMessage:"Name is too long."})}):null]}),e.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:p,className:"text-base font-medium text-token-text-secondary",children:e.jsx(l,{id:"hEnKIS",defaultMessage:"Slack workspace domain"})}),e.jsxs("p",{children:[e.jsx("input",{type:"text",value:o.teamDomain??"",onChange:j=>r(_=>({..._,teamDomain:j.target.value})),id:p,className:"rounded-lg border border-solid border-token-border-light bg-token-main-surface-primary text-token-text-primary"}),e.jsx("span",{className:"ml-1 font-medium text-token-text-secondary",children:".slack.com"})]})]}),e.jsxs("div",{className:"mb-2 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:h,className:"text-base font-medium text-token-text-secondary",children:e.jsx(l,{id:"azUOrk",defaultMessage:"Slack workspace ID"})}),e.jsx("input",{type:"text",value:o.teamId??"",onChange:j=>r(_=>({..._,teamId:j.target.value})),placeholder:a.formatMessage({id:"vUK9Kc",defaultMessage:"T0000000000"}),id:h,className:"rounded-lg border border-solid border-token-border-light bg-token-main-surface-primary text-token-text-primary"})]}),e.jsx("button",{type:"submit",className:"display-none"})]}),e.jsx(O,{primaryButton:e.jsx(y,{color:"primary",disabled:!m,onClick:u,loading:c,children:e.jsx(l,{id:"lZthRm",defaultMessage:"Save Draft and Continue"})})})]})}function Ht({connection:s,accountId:t,onClose:n}){return e.jsx(_e,{onClose:n,steps:[{connectorType:"slack",name:"allowed_users",fn:({goForward:a,close:i,stepNumber:o,totalSteps:r})=>e.jsx(ne,{fallbackEstimatedMaxNumUsers:te(s.connection_config),onClose:()=>i?.(),accountId:t,connectionId:s.connection_config.connection_config_id,connectorType:"slack",primaryButton:a&&e.jsx(y,{color:"primary",onClick:a,children:e.jsx(l,{id:"z5fExR",defaultMessage:"Next"})}),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:o+1,totalSteps:r}})})})},{connectorType:"slack",name:"slack_channel_scope",fn:({goForward:a,goBackward:i,close:o,stepNumber:r,totalSteps:c})=>e.jsx(is,{isOpen:!0,isPostActivation:!1,onClose:()=>o?.(),accountId:t,connectionId:s.connection_config.connection_config_id,primaryButton:a&&e.jsx(y,{color:"primary",onClick:a,children:e.jsx(l,{id:"z5fExR",defaultMessage:"Next"})}),secondaryButton:i&&e.jsx(y,{color:"secondary",onClick:i,children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:r+1,totalSteps:c}})})})},{connectorType:"slack",name:"review_and_activate",fn:({goBackward:a,close:i,stepNumber:o,totalSteps:r})=>e.jsx(ie,{isOpen:!0,onClose:()=>i?.(),accountId:t,connectorType:"slack",connectionId:s.connection_config.connection_config_id,connectionDisplayInfo:s.display_info,secondaryButton:a&&e.jsx(y,{color:"secondary",onClick:a,children:e.jsx(l,{id:"xJnONr",defaultMessage:"Back"})}),footerContent:e.jsx("span",{className:"flex-1 align-middle font-medium text-token-text-secondary",children:e.jsx(l,{id:"Wp0nVY",defaultMessage:"Step {stepNum} of {totalSteps}",values:{stepNum:o+1,totalSteps:r}})})})}]})}const ye=_s.div`w-full border-b-2 border-token-border-medium`;async function Kt(s){const[t,n]=await Promise.all([b.admin_list_knowledge_connectors(s),b.admin_list_connection_instances(s)]),a=new Map;return t.knowledge_conectors.forEach(i=>a.set(i.connector_details.knowledge_connector_type,{displayInfo:i.display_info,availability:i.connector_details.availability,connections:[],limits:i.connector_details.limits??{max_instances:3}})),n.connection_instances.forEach(i=>{if(!i.connection_config.knowledge_connector_type)return;let o=a.get(i.connection_config.knowledge_connector_type)?.connections;o!=null?o.push(i):a.set(i.connection_config.knowledge_connector_type,{displayInfo:i.display_info,availability:"unavailable",limits:ue,connections:[i]})}),a}function ce(s){return!(s.connection_status==="deleted"||s.connection_status==="deleting")}function Qt(){const s=v(),t=B(),[n,a]=d.useState(!1),[i,o]=d.useState(!1);d.useEffect(()=>{L.logEventWithStatsig(U.contextualAnswersAdminPageVisited,"chatgpt_contextual_answers_admin_page_visited")},[]);const{data:r,isLoading:c,error:x,refetch:u}=F({queryKey:["admin:knowledge_connectors_with_connections",t?.id],queryFn:async()=>{if(!t)throw new Error("No current account");return await Kt(t.id)},enabled:!!t}),{refetch:f}=Us({skip:!0}),m=()=>{u(),f()},g=r?.get("google_drive_oauth")?.availability==="available"&&r?.get("google_drive_dwd")?.availability==="available",{combinedGoogleDriveConnections:p,slackConnections:h,otherConnections:j}=d.useMemo(()=>{const M=[],A=[],E=[];return r?.forEach((k,I)=>{if(k.availability!=="available"){E.push(...k.connections.filter(ce));return}I==="google_drive_dwd"||I==="google_drive_oauth"?M.push(...k.connections.filter(ce)):I==="slack"&&A.push(...k.connections.filter(ce))}),{combinedGoogleDriveConnections:M,slackConnections:A,otherConnections:E}},[r]),_=r?.get("slack")?.availability==="available",C=K();return t?.id?e.jsxs(pe,{children:[e.jsx(ls,{}),x&&e.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[e.jsx($,{className:"icon-md inline"}),e.jsx(l,{id:"zNCx93",defaultMessage:"Failed to get connection instances. Please refresh to try again."})]}),C&&e.jsxs("div",{className:"my-2 flex flex-row items-center gap-2 rounded-lg bg-red-500 p-2 text-white",children:[e.jsx($,{className:"icon-md inline"}),e.jsx(l,{id:"hnTY+Z",defaultMessage:"Our systems are experiencing high load. Some operations may be temporarily unavailable."})]}),e.jsx(ye,{}),c&&e.jsx(P,{lines:4}),g&&e.jsx(Te,{accountId:t.id,connectorType:"google_drive",connectorName:s.formatMessage({id:"oDI3Mt",defaultMessage:"Google Drive"}),limits:r?.get("google_drive_oauth")?.limits??r?.get("google_drive_dwd")?.limits??ue,description:s.formatMessage({id:"3yZLm6",defaultMessage:"Connect Google Drives, Docs, Sheets, Slides and other files."}),onClickConnect:()=>a(!0),Icon:Bs,connectionInstancesLoading:c,connectionInstances:p,refetchConnectionInstances:m,singularNounConnectedObjectName:Se("google_drive_oauth",s).externalLinkableUnitSingular}),_&&e.jsx(Te,{accountId:t.id,connectorType:"slack",connectorName:s.formatMessage({id:"pUDRLC",defaultMessage:"Slack"}),limits:r?.get("slack")?.limits??ue,description:s.formatMessage({id:"p1qvhM",defaultMessage:"Connect messages and channels."}),Icon:Gs,onClickConnect:()=>o(!0),connectionInstancesLoading:c,connectionInstances:h,refetchConnectionInstances:m,singularNounConnectedObjectName:Se("slack",s).externalLinkableUnitSingular}),j.length>0&&e.jsx(Jt,{accountId:t.id,connectionInstancesLoading:c,connectionInstances:j,refetchConnectionInstances:m}),e.jsx(Vt,{isOpen:n,onClose:()=>{a(!1),m()}}),i&&e.jsx(Yt,{onClose:()=>{o(!1),m()}})]}):null}function Te({accountId:s,Icon:t,connectorName:n,connectorType:a,description:i,onClickConnect:o,connectionInstances:r,connectionInstancesLoading:c,refetchConnectionInstances:x,singularNounConnectedObjectName:u,limits:f}){const m=K(),g=r!=null&&!m&&(f.max_instances===Je||r.length<f.max_instances),p=()=>{L.logEventWithStatsig(U.contextualAnswersAdminCreateConnectionButtonClicked,"chatgpt_contextual_answers_admin_create_connection_button_clicked",{connectorType:a}),o?.()},h=e.jsx(y,{color:r?.length?"secondary":"primary",onClick:p,icon:Ws,disabled:!g,children:r?.length?e.jsx(l,{id:"Ou779X",defaultMessage:"Connect another {connectedKnowledgeSource}",values:{connectedKnowledgeSource:u}}):e.jsx(l,{id:"Uvs01u",defaultMessage:"Connect"})});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 flex w-full flex-col gap-4",children:[e.jsxs("div",{className:"flex w-full flex-row flex-wrap items-center gap-4",children:[e.jsx(t,{className:"icon-2xl flex-0 my-1"}),e.jsxs("div",{className:"flex min-w-[240px] flex-1 flex-col gap-1",children:[e.jsx("p",{className:"font-semibold",children:n}),e.jsx("p",{className:"text-xs text-token-text-secondary",children:i})]}),!c&&e.jsx("div",{className:"flex-0 flex items-center",children:g?h:m?e.jsx(he,{children:h}):e.jsx(fe,{side:"top",label:e.jsx(l,{id:"QktxrB",defaultMessage:"Max connections reached"}),children:h})})]}),c?e.jsx(P,{lines:2}):r?.length?e.jsx(Oe,{children:e.jsxs("div",{className:"grid w-full gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[r.filter(j=>!["deleted","deleting"].includes(j.connection_status)).map(j=>e.jsx(os,{connection:j,accountId:s,refetchConnectionInstances:x},j.connection_config.connection_config_id)),r.length===1&&e.jsx("div",{},"grid-spacer")]})}):null]}),e.jsx(ye,{className:"mt-4"})]})}function Jt({accountId:s,connectionInstances:t,connectionInstancesLoading:n,refetchConnectionInstances:a}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 flex w-full flex-col gap-4",children:[e.jsxs("div",{className:"flex w-full flex-row flex-wrap items-center gap-4",children:[e.jsx(lt,{className:"icon-2xl flex-0 my-1"}),e.jsx("div",{className:"flex min-w-[240px] flex-1 flex-col gap-1",children:e.jsx("p",{className:"font-semibold",children:e.jsx(l,{id:"WFgOAD",defaultMessage:"Other connections"})})})]}),n?e.jsx(P,{lines:2}):t?.length?e.jsx(Oe,{children:e.jsxs("div",{className:"grid w-full gap-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))"},children:[t.map(i=>e.jsx(os,{connection:i,showIcon:!0,accountId:s,refetchConnectionInstances:a},i.connection_config.connection_config_id)),t.length===1&&e.jsx("div",{},"grid-spacer")]})}):null]}),e.jsx(ye,{className:"mt-4"})]})}function ls({badge:s}){const t=v();return e.jsxs(e.Fragment,{children:[e.jsxs(Le,{className:"flex flex-row items-center gap-2",children:[e.jsx("span",{children:t.formatMessage({id:"ohOhqy",defaultMessage:"Internal knowledge"})}),s]}),e.jsx(Ue,{className:"text-token-text-secondary",children:e.jsx(l,{id:"KKGA4q",defaultMessage:"Connect your organizationâ€™s Google Drive so your team gets upâ€‘toâ€‘date, relevant answers from your internal knowledge. ChatGPT semantically searches your contentâ€”surfacing only what users are authorized to seeâ€”and admins control which sources are connected and who accesses them. {learnMore}",values:{learnMore:e.jsx(Q,{href:He,className:"underline",children:e.jsx(l,{id:"WGpoE2",defaultMessage:"Learn more"})})}})})]})}function Xt({feedbackMetadata:s,currentWorkspaceId:t,onClose:n,onFeedbackActionTaken:a}){const i=v(),{data:o,refetch:r,isLoading:c}=F({queryKey:["adminGetCaMessageFeedback",t,s.feedback_id],queryFn:()=>X.adminGetCaMessageFeedback({accountId:t,feedbackId:s.feedback_id})}),x=w(),u=H({mutationFn:m=>m.operation==="delete"?X.adminDeleteCaMessageFeedback({accountId:m.workspaceId,feedbackId:m.feedbackId}):X.adminApproveCaMessageFeedback({accountId:m.workspaceId,feedbackId:m.feedbackId,withSources:m.withSources}),onSuccess:(m,g)=>{a(),n(),x.success(g.operation==="approve"?i.formatMessage(N.feedbackApproved):i.formatMessage(N.feedbackDeleted))},onError:(m,g)=>{r(),x.warning(g.operation==="approve"?i.formatMessage(N.errorApprovingFeedback):i.formatMessage(N.errorDeletingFeedback))}}),f=d.useMemo(()=>{const m=s.review_status==="unreviewed",g=s.review_status==="unreviewed";let p;switch(s.review_status){case"approved_with_sources":case"approved_without_sources_data_expired":{p=i.formatMessage(N.actionMessageNoActionsAvailable);break}case"approved_without_sources_data_available":{p=i.formatMessage(N.actionMessageApprovedWithoutSources);break}case"deleted":{p=i.formatMessage(N.actionMessageFeedbackDeleted);break}}const h={workspaceId:t,feedbackId:s.feedback_id,withSources:!0};return e.jsxs("div",{className:"sticky bottom-0 flex w-full flex-col gap-2 rounded-lg bg-token-main-surface-secondary p-4",children:[!!p&&e.jsx("div",{children:e.jsx("p",{children:p})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[m&&e.jsx(y,{color:"primary",icon:qs,onClick:()=>u.mutate({...h,operation:"approve"}),loading:u.isPending,children:e.jsx(l,{id:"Zq8YOH",defaultMessage:"Approve Feedback"})}),g&&e.jsx(y,{color:"danger-outline",icon:ze,onClick:()=>u.mutate({...h,operation:"delete"}),loading:u.isPending,children:e.jsx(l,{id:"qeIjD9",defaultMessage:"Delete Feedback"})})]})]})},[s.review_status,s.feedback_id,u,t,i]);return e.jsx($t,{actionBar:f,onClose:n,isLoading:c,feedbackData:o,feedbackMetadata:s})}function $t({actionBar:s=null,onClose:t=()=>{},isLoading:n=!1,isDebugView:a=!1,feedbackData:i,feedbackMetadata:o}){const r=v();return e.jsx(S,{size:"custom",className:"max-w-lg overflow-y-auto text-base",isOpen:!0,icon:tt,onClose:t,showCloseButton:!0,type:"success",title:r.formatMessage(N.modalTitle),children:e.jsx("div",{className:"flex flex-col",children:i&&!n?e.jsxs(e.Fragment,{children:[e.jsx(ea,{feedbackData:i,feedbackMetadata:o,isDebugView:a}),e.jsx(Me,{className:"my-4"}),e.jsx(ta,{fileRefs:i.file_references}),e.jsx(Me,{className:"my-4"}),e.jsx(aa,{retrievalMessages:i.retrieval_messages,userDisplayName:o.submitter_display_name??o.submitter_email,isDebugView:a}),s]}):e.jsx(Ke,{lines:8})})})}function ea({feedbackMetadata:s,feedbackData:t,isDebugView:n=!1}){const a=v(),i=s.submitter_display_name&&s.submitter_email?a.formatMessage(N.userDisplayName,{displayName:s.submitter_display_name,email:s.submitter_email}):s.submitter_id,o=d.useMemo(()=>t.sources_feedback?Object.entries(t.sources_feedback).map(([r,c])=>{if(!c.rating&&!(c.tags&&c.tags.length>0))return null;const x=t.file_references.find(f=>f.document_id===r)?.title,u=c.tags&&c.tags.length===1&&c.tags[0]===nt;return e.jsxs("li",{className:"flex flex-col break-words p-1 text-sm",children:[e.jsxs("div",{className:"mb-1 flex flex-row items-center gap-2",children:[c.rating==="thumbsUp"?e.jsx(Vs,{className:"icon-sm"}):c.rating==="thumbsDown"?e.jsx(we,{className:"icon-sm"}):null,e.jsx("a",{href:c.url??void 0,className:"text-sm font-semibold",children:x??c.url??r})]}),e.jsx("div",{className:"flex flex-row flex-wrap gap-1",children:u?e.jsx("span",{className:"italic",children:e.jsx(l,{id:"yNGc6H",defaultMessage:"This source should have been used."})}):c.tags?.map(f=>e.jsx("div",{className:"rounded-lg border border-token-border-light px-3 py-1 text-xs text-token-text-secondary",children:Ne(f,a)},f))})]},r)}).filter(r=>!!r):[],[t.file_references,t.sources_feedback,a]);return e.jsxs("div",{children:[!n&&e.jsx("div",{className:"mb-2",children:e.jsx(rs,{reviewStatus:s.review_status})}),e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.rating==="thumbsUp"?e.jsx(Zs,{className:"icon-xl m-2"}):e.jsx(we,{className:"icon-xl m-2"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{children:i}),s.submitted_at&&e.jsx("p",{className:"text-xs text-token-text-secondary",children:new Date(s.submitted_at).toLocaleString()})]})]}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"mb-2 flex flex-wrap gap-1",children:t.tags?.map(r=>e.jsx("div",{className:"rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary",children:Ne(r,a)},r))}),e.jsxs("div",{className:"mb-2",children:[e.jsx(W,{className:"mb-1",children:e.jsx(l,{id:"VrPx6x",defaultMessage:"Feedback"})}),e.jsx("p",{className:"break-words rounded border p-2 text-sm",children:t.text?t.text:e.jsx("span",{className:"italic",children:e.jsx(l,{id:"pEEJ/8",defaultMessage:"No written feedback was provided."})})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx(W,{className:"mb-1",children:e.jsx(l,{id:"LUg6Vl",defaultMessage:"Additional Sources"})}),e.jsx("p",{className:"break-words rounded border p-2 text-sm",children:t.additional_sources?t.additional_sources:e.jsx("span",{className:"italic",children:e.jsx(l,{id:"u24Zo5",defaultMessage:"No additional sources were provided."})})})]}),o.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx(W,{className:"mb-1",children:e.jsx(l,{id:"lNSdNZ",defaultMessage:"Sources Feedback"})}),e.jsx("ul",{className:"flex flex-col gap-1",children:o})]})]})}const sa=["citation","context_stuff","search_result"];function Pe(s){return Array.from(s.map(t=>Hs({type:"file",id:t.document_id,cloud_doc_url:t.external_url??void 0,name:t.title??"",source:"google_drive",extra:{cloud_doc_url:t.external_url??void 0}})).filter(t=>!!t))}function ta({fileRefs:s}){const[t,n]=d.useMemo(()=>{const a=new Map,i=new Map;return s.forEach(o=>{sa.includes(o.reference_source)&&o.external_url&&!a.has(o.document_id)?a.set(o.document_id,o):o.reference_source==="user_feedback"&&o.external_url&&!i.has(o.document_id)&&i.set(o.document_id,o)}),[Pe(Array.from(a.values())),Pe(Array.from(i.values()))]},[s]);return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(W,{className:"mb-2",children:e.jsx(l,{id:"FB4YIA",defaultMessage:"Sources In Conversation"})}),t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-2 text-xs text-token-text-secondary",children:e.jsx(l,{id:"iTNNoN",defaultMessage:"These sources were considered or cited in the conversation. Snapshots of these sources will be included with the feedback if you choose to approve the feedback."})}),e.jsx("div",{className:"flex flex-col gap-1",children:t.map(a=>e.jsx(ke,{compact:!0,citationMetadata:a},a.url))})]}):e.jsx("p",{className:"text-xs text-token-text-secondary",children:e.jsx(l,{id:"Q+DKpB",defaultMessage:"No synced sources were considered or cited in the conversation, however there may be other sources present such as user uploaded files. If you choose to approve this feedback, only the snippets of those files that ChatGPT looked at will be shared with this feedback."})})]}),n.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx(W,{className:"mb-2",children:e.jsx(l,{id:"SCwQnr",defaultMessage:"Sources From Feedback"})}),e.jsx("p",{className:"mb-2 text-xs text-token-text-secondary",children:e.jsx(l,{id:"Rr+4KZ",defaultMessage:"The feedback submitter mentioned these documents in their feedback. Snapshots of these documents will be included with the feedback if you choose to approve the feedback with sources and the user had access to them."})}),e.jsx("div",{className:"flex flex-col gap-1",children:n.map(a=>e.jsx(ke,{compact:!0,citationMetadata:a},a.url))})]})]})}function aa({retrievalMessages:s,userDisplayName:t,isDebugView:n=!1}){return e.jsxs("div",{className:"mb-8",children:[e.jsx(W,{className:"mb-4",children:e.jsx(l,{id:"pOb00r",defaultMessage:"Conversation"})}),s.map(a=>e.jsx(na,{message:a,userDisplayName:t,isDebugView:n},a.id))]})}function na({message:s,userDisplayName:t,isDebugView:n=!1}){const a=v();switch(s.type){case"visible_text":{if(s.author==="unknown")return null;const i={id:s.id,author:{role:s.author},clientMetadata:{canRetry:!1},metadata:{citations:s.citations??[],attachments:s.attachments??[],content_references:s.content_refs?s.content_refs:(s.citations??[]).map(o=>o.metadata?.type!=="file"?null:{start_idx:o.start_ix,end_idx:o.end_ix,refs:[],matched_text:s.text.slice(o.start_ix,o.end_ix),type:"file",source:o.metadata.source,name:o.metadata.name,id:o.metadata.id,cloud_doc_url:o.metadata.cloud_doc_url??o.metadata.extra?.cloud_doc_url}).filter(o=>!!o)},content:{content_type:ys.Text,parts:[s.text]}};return e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:G("mb-1 text-xs text-token-text-secondary",s.author==="user"?"pr-4 text-end":"text-start"),children:s.author==="assistant"?a.formatMessage(N.authorChatGPT):s.author==="user"?t??a.formatMessage(N.authorUser):s.author}),e.jsx(at,{id:s.id,messages:[i],attachments:i.metadata?.attachments,citations:i.metadata?.citations,contentReferences:i.metadata?.content_references,parts:[s.text],displayParts:zs({isUserTurn:s.author==="user",parts:[s.text]}),isActivelyStreaming:!1,isCompletionInProgress:!1,isFinalUserTurn:!1,hasActiveRequest:!1,clientThreadId:"--fake-thread-id--",isUserTurn:s.author==="user",turnIndex:0,isFeedbackEnabled:!1})]})}case"query":return e.jsxs("div",{className:"my-2 text-xs text-token-text-primary",children:[e.jsx(it,{className:"mr-2"}),n?e.jsx(l,{id:"AVzRit",defaultMessage:"ChatGPT performed a search: {query}",values:{query:s.query}}):e.jsx(l,{id:"bJ9BXd",defaultMessage:"ChatGPT performed a search."})]});case"result":return n?e.jsx(ia,{message:s}):null;case"fetch":return n?e.jsxs("div",{className:"my-2 text-xs text-token-text-primary",children:[e.jsx(Ys,{className:"mr-2"}),e.jsx(l,{id:"uH5X47",defaultMessage:"Read file: {fileName}",values:{fileName:s.content.content_type==="tether_quote"?s.content.title:"unknown"}})]}):null;case"generic_file_search_tool":return n?e.jsxs("div",{className:"my-2 text-xs text-token-text-primary",children:[e.jsx(ot,{className:"mr-2"}),e.jsx(l,{id:"pJmg4S",defaultMessage:"Tool message with command: {command}.",values:{command:s.command}})]}):null;case"system":case void 0:return null}}function ia({message:s}){const[t,n]=d.useState(!1);return s.type!=="result"?null:e.jsxs("div",{className:"mb-4 mt-2 text-xs text-token-text-primary",children:[e.jsxs("div",{onClick:()=>n(a=>!a),className:"flex flex-row",children:[e.jsx(st,{checked:t,className:"flex-0"}),e.jsx("div",{className:"flex-1",children:e.jsx(l,{id:"94EEkt",defaultMessage:"Found {numResults} results.",values:{numResults:s.result.chunks.length}})})]}),t&&e.jsxs("div",{className:"mt-2",children:[s.result.chunks.map(a=>e.jsxs("div",{className:"mb-2",children:[e.jsx("h4",{className:"mb-1 text-sm font-bold text-token-text-primary",children:e.jsx(l,{id:"zyGUoc",defaultMessage:"Result {number}: {title}",values:{number:a.result_num,title:a.title}})}),e.jsx("h4",{className:"mb-1 text-xs text-token-text-secondary",children:a.document_id}),e.jsx("pre",{className:"max-h-[200px] max-w-full overflow-auto text-wrap p-2",children:a.contents})]},a.result_num)),e.jsxs("div",{className:"p-2 text-center",onClick:()=>n(!1),children:[e.jsx("p",{className:"mb-1 font-bold text-token-text-secondary",children:e.jsx(l,{id:"8UUzYt",defaultMessage:"Collapse Results"})}),e.jsx("hr",{className:""})]})]})]})}function rs({reviewStatus:s,onClick:t,disabled:n}){let a;const i=v();switch(s){case"unreviewed":a=i.formatMessage(N.reviewStatusUnreviewed);break;case"approved_with_sources":a=i.formatMessage(N.reviewStatusApprovedWithSouces);break;case"approved_without_sources_data_available":case"approved_without_sources_data_expired":a=i.formatMessage(N.reviewStatusApprovedWithoutSources);break;case"deleted":a=i.formatMessage(N.reviewStatusDeleted);break}return e.jsx("button",{className:G("rounded-2xl px-3 py-1 text-sm text-token-text-primary",s==="unreviewed"&&"bg-[#e2c541] dark:bg-[#EA8444]"),onClick:t,disabled:!!n||!t,children:a})}const N=se({modalTitle:{id:"zufVun",defaultMessage:"Review Feedback"},feedbackApproved:{id:"DS+YGt",defaultMessage:"Feedback approved."},feedbackDeleted:{id:"Rz/tmW",defaultMessage:"Feedback deleted."},errorApprovingFeedback:{id:"UVsTlf",defaultMessage:"Encountered an error approving this feedback. Please refresh and try again."},errorDeletingFeedback:{id:"cI6gt9",defaultMessage:"Encountered an error deleting this feedback. Please refresh and try again."},actionMessageFeedbackCreating:{id:"urBely",defaultMessage:"You can't take actions on this feedback yet because it's still being processed. Once it's done processing, it will be available for review."},actionMessageNoActionsAvailable:{id:"JGNhjT",defaultMessage:"This feedback has been reviewed."},actionMessageApprovedWithoutSources:{id:"68PAfK",defaultMessage:"This feedback has already been approved without sources, but you can re-approve it with sources."},actionMessageFeedbackDeleted:{id:"Kel9lE",defaultMessage:"This feedback has been deleted."},labelIncludeSources:{id:"8UlZM0",defaultMessage:"Include Sources"},authorChatGPT:{id:"7Fo5p2",defaultMessage:"ChatGPT"},authorUser:{id:"TpT0hg",defaultMessage:"User"},userDisplayName:{id:"3OKTcX",defaultMessage:"{displayName} ({email})"},reviewStatusUnreviewed:{id:"FEHKZj",defaultMessage:"Needs Review"},reviewStatusCreating:{id:"7lVVU7",defaultMessage:"Preparing for Review"},reviewStatusApprovedWithSouces:{id:"kpZ41g",defaultMessage:"Approved With Sources"},reviewStatusApprovedWithoutSources:{id:"Y0lc+p",defaultMessage:"Approved Without Sources"},reviewStatusDeleted:{id:"gKoYhr",defaultMessage:"Deleted"}});function oa({currentWorkspaceId:s}){const{data:t,refetch:n,isLoading:a}=F({queryKey:["adminListCaMessageFeedback",s],queryFn:()=>X.adminListCaMessageFeedback({accountId:s})}),[i,o]=d.useState();return e.jsxs(pe,{className:"mb-8",children:[e.jsx(Le,{children:e.jsx(l,{id:"r4Y3mj",defaultMessage:"Review Feedback"})}),e.jsx(Ue,{className:"text-token-text-secondary",children:e.jsx(l,{id:"mqh7NS",defaultMessage:"Review feedback your workspace users have submitted. Feedback is not shared with OpenAI until you approve it."})}),t&&!a?e.jsx(la,{feedbackList:t.feedback,setSelectedFeedback:o}):e.jsx(Ke,{lines:12,widthVariance:0}),i&&e.jsx(Xt,{feedbackMetadata:i,currentWorkspaceId:s,onClose:()=>o(void 0),onFeedbackActionTaken:()=>n()})]})}function Ie(s){switch(s){case"unreviewed":return 1;case"approved_with_sources":return 2;case"approved_without_sources_data_available":return 3;case"approved_without_sources_data_expired":return 4;case"deleted":return 5}}function la({feedbackList:s,setSelectedFeedback:t}){const n=d.useMemo(()=>[...s].sort((a,i)=>{const o=Ie(a.review_status)-Ie(i.review_status);return o!==0?o:a.submitted_at>i.submitted_at?-1:a.submitted_at<i.submitted_at?1:0}),[s]);return e.jsxs(D.Root,{size:"normal",children:[e.jsxs(D.Header,{children:[e.jsx(D.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(l,{id:"KcGNl2",defaultMessage:"Review Status"})}),e.jsx(D.HeaderCell,{className:"w-40 bg-token-main-surface-primary",children:e.jsx(l,{id:"joba0B",defaultMessage:"Submitted By"})}),e.jsx(D.HeaderCell,{className:"w-40 bg-token-main-surface-primary",children:e.jsx(l,{id:"yl1cCR",defaultMessage:"Submitted At"})})]}),e.jsx(D.Body,{children:n.length===0?e.jsx(D.Row,{children:e.jsx(D.Cell,{children:e.jsx(l,{id:"AYwCJD",defaultMessage:"No feedback yet."})})}):n.map(a=>{const i=a.review_status==="deleted",o=i?void 0:()=>t(a);return e.jsxs(D.Row,{className:G("my-2",i?"bg-token-main-surface-tertiary":"hover:cursor-pointer hover:bg-token-main-surface-secondary"),onClick:o,children:[e.jsx(D.Cell,{className:"truncate",children:e.jsx(rs,{reviewStatus:a.review_status,onClick:o,disabled:i})}),e.jsx(D.Cell,{className:"truncate",children:e.jsx("span",{children:a.submitter_display_name&&a.submitter_email?e.jsx(l,{id:"3OKTcX",defaultMessage:"{displayName} ({email})",values:{displayName:a.submitter_display_name,email:a.submitter_email}}):e.jsx("code",{children:a.submitter_id.split("__")[0]})})}),e.jsx(D.Cell,{className:"truncate",children:e.jsx("span",{children:new Date(a.submitted_at).toLocaleString()})})]},a.feedback_id)})})]})}function ra(){const s=v();Cs(!0);const t=B(),n=Ks(),a=Ms(!1);return e.jsxs(e.Fragment,{children:[e.jsx(ws,{title:s.formatMessage({id:"q9azuh",defaultMessage:"Connectors"})}),a?e.jsx(Re,{skipLegacyWorkspaceCheck:!0,children:e.jsxs(Be,{className:"mt-6 gap-6",children:[e.jsx(Qt,{}),t!=null&&n===Qs.ALPHA&&e.jsx(oa,{currentWorkspaceId:t.id})]})}):e.jsx(ca,{})]})}function ca(){return e.jsxs(Re,{skipLegacyWorkspaceCheck:!0,children:[e.jsx(Be,{className:"mt-6 gap-6",children:e.jsx(pe,{children:e.jsx(ls,{badge:e.jsx("div",{children:e.jsx("span",{className:"rounded-xl border px-2 py-1 text-[8px] font-bold uppercase text-token-text-secondary",children:e.jsx(l,{id:"IrfQIu",defaultMessage:"Coming soon"})})})})})}),e.jsxs("div",{className:"flex flex-row gap-2 rounded-xl bg-token-main-surface-tertiary p-4 text-token-text-secondary",children:[e.jsx(Ze,{className:"icon-md"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-xs font-bold",children:e.jsx(l,{id:"ES5xU+",defaultMessage:"When will this feature be available?"})}),e.jsxs("p",{className:"text-xs",children:[e.jsx(l,{id:"9w5rs5",defaultMessage:"Internal knowledge will be rolled out incrementally to ChatGPT Team workspaces over the next few weeks. We will notify you in ChatGPT when your workspace is eligible."}),"Â ",e.jsx(Q,{href:He,className:"underline",children:e.jsx(l,{id:"WGpoE2",defaultMessage:"Learn more"})})]})]})]})]})}const Ba=vs(function(){return e.jsx(ra,{})});export{Ba as default};
//# sourceMappingURL=miinkc0p287ro96j.js.map
