import{fa as A,aM as g,aA as C,al as R,cp as E,g as y,L as O,Z as L,en as M,P as w,a as v}from"./cyi7nanrg0vdotzd.js";import{k as x,f as S,z as j,r as i,a6 as T,j as r}from"./fs6h2trisr1juto6.js";import{A as b}from"./kz6x8wk34lcs5h57.js";import{bd as F}from"./df9u9imhvwerk6zv.js";import{C as o}from"./bp4ydsc4juj59gm6.js";import"./gul24noqc57eql9b.js";import"./cunrbs89hxzgq11d.js";import"./k2rpryqx6vblp3rt.js";const P={pro:"chatgptpro",plus:"chatgptplusplan"},_=Object.keys(o),N={oiw216z:"sora_redirect",vza493q:"operator_redirect"};function k(s){s&&o[s]&&(window.location.href=o[s])}const Y=A(function(){const[h]=x(),n=S(),u=g(),{plan:t}=j(),e=h.get("checkout_from"),l=i.useRef(!1),a=C(),p=i.useMemo(()=>a?.subscriptionAnalyticsParams,[a]),{value:c,isLoading:m}=R("1719651090");if(!t||!(t in P))throw T("/");return i.useEffect(()=>{if(!a||m||l.current)return;if(l.current=!0,e==="vza493q"){a.hasPaidSubscription()&&a.isPro()?window.location.href=o[e]:c||n("/");return}(async()=>{const f=e&&_.includes(e)?N[e]:"purchase_plan_redirect";try{e&&_.includes(e)&&y.setItem(O.CheckoutFrom,e);const d=await L.getCheckoutLink(u,"Sora",{plan_name:P[t],billing_details:{currency:M}});w.logEvent(v.accountPayPurchasePlanRedirect,{...p,plan:t,location:f}),window.location.href=d.url}catch{F(n,f)}})()},[n,u,t,e,p,m,c,a]),r.jsxs(r.Fragment,{children:[a&&e==="vza493q"&&c&&r.jsx(b,{currentAccount:a,variant:"operator",onClose:()=>k(e)}),r.jsx("div",{className:"flex h-full w-full items-center justify-center",children:r.jsx(E,{})})]})});export{Y as default};
//# sourceMappingURL=g4sp2qc266ae3pis.js.map
