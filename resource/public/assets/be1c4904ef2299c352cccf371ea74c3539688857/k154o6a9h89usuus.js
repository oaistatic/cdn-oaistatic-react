import{r as S,j as B,d as K}from"./fs6h2trisr1juto6.js";import{a0 as D,I as L,a1 as w,a2 as R,a3 as E,a4 as x,a5 as z,a6 as T,U as m,$ as f,a7 as F}from"./df9u9imhvwerk6zv.js";import{fl as P,P as I,a as U,D as O,V,b$ as Z,bx as G,F as N,E as j,y as _,z as $,l as H,cD as W,fm as X,fn as q,fo as J,d9 as Q,fc as Y,db as ee}from"./cyi7nanrg0vdotzd.js";import{t as oe}from"./kg9pnjn9ianmg7dc.js";const te=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function h(){return Y()||ee()}const e={Mod:"mod",Comma:",",Space:"Space"," ":"Space"," ":"Space",...D.Key},se={[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"};function ae(o){switch(o){case e.Mod:return h()?"⌘":"Ctrl";case e.Meta:return h()?"⌘":"Win";default:return se[o]}}const ye=o=>o.map(t=>ae(t)??t),a=K({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),ne=new P,ie=({ctx:o,resetThreadAction:t,clientThreadId:s,focusPromptTextareaAction:n,toaster:i,isFannyPackEnabled:d,isZoomEnabled:r,isElectronClient:g,isCycleReasoningLevelEnabled:l})=>{const p=g?[[e.Mod,"n"]]:[];return[{key:"newChat",action:t||G,actionMessageDescriptor:a.newChat,group:"Core",keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:d?[...p]:[...p,[e.Mod,"k"]]},{key:"focusPromptTextarea",action:n??oe,actionMessageDescriptor:a.focusPromptTextarea,group:"Chat",keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:c=>{if(s!=null){const u=N.getConversationTurns(j(s));for(let b=u.length-1;b>=0;b--){const{messages:v}=u[b],k=[...v.reduce((M,y)=>y.clientMetadata?.err==null&&y.author.role===_.Assistant&&y.recipient==="all"?M+(M?`

`:"")+$(y):M,"").matchAll(te)],C=k.length?k[k.length-1][1]:null;if(C!=null){z(C,i,c).then(()=>{i.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:a.copyLastCodeBlock,group:"Chat",keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:c=>{s!=null&&T(o,s,i,c,"keyboard").then(()=>{i.success("Last response copied to clipboard")})},actionMessageDescriptor:a.copyLastResponse,group:"Chat",keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>m.toggleModal(f.UserContext),actionMessageDescriptor:a.toggleCustomInstructions,group:"Settings",keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>{m.toggleNavCollapsed()},actionMessageDescriptor:a.navigationToggle,group:"Core",keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(s){const c=H(s);c&&W(o,({closeModal:u})=>B.jsx(F,{serverThreadId:c,closeModal:u,isActiveConversation:!0}))}},actionMessageDescriptor:a.deleteChat,group:"Chat",keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"zoomIn",enabled:r,action:()=>X(),actionMessageDescriptor:a.zoomIn,group:"Chat",keyboardBinding:[e.Mod,"+"],altKeyboardBindings:[[e.Mod,"="]]},{key:"zoomOut",enabled:r,action:()=>q(),actionMessageDescriptor:a.zoomOut,group:"Chat",keyboardBinding:[e.Mod,"-"]},{key:"resetZoom",enabled:r,action:()=>J(),actionMessageDescriptor:a.resetZoom,group:"Chat",keyboardBinding:[e.Mod,"0"]},{key:"toggleKeyboardActions",action:()=>m.toggleModal(f.KeyboardActions),actionMessageDescriptor:a.toggleKeyboardActions,group:"Settings",keyboardBinding:[e.Mod,"/"]},{key:"cycleReasoningLevel",action:()=>{ne.publish({kind:"cycleReasoningLevel"})},actionMessageDescriptor:a.cycleReasoningLevel,group:"Chat",keyboardBinding:[e.Mod,"."],enabled:l}]},A=o=>w(o,t=>{I.logEvent(U.keyboardShortcut,{keyboardActionKey:t.key}),O.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:t.key})},{enabled:!0}),re=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s}={})=>{const n=V(),{isFannyPackEnabled:i}=R(),d=E(),r=Q,g=Z(),{isUXUpdatesEnabled:l}=x();return S.useMemo(()=>ie({ctx:g,resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s,toaster:n,isElectronClient:d,isFannyPackEnabled:i,isZoomEnabled:r,isCycleReasoningLevelEnabled:l}).filter(({enabled:c=!0})=>c),[g,o,t,s,n,d,i,r,l])},pe=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s})=>{const n=re({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s}),d=L(r=>r.isVoiceActive)?[]:n;A(d)},be=({setSelectedVoiceIndex:o,prevVoiceIndex:t,nextVoiceIndex:s})=>{const n=[{key:"selectPrevVoice",action:()=>{o(t)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:"Chat",keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{o(s)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:"Chat",keyboardBinding:[e.ArrowRight]}];A(n)};export{ne as G,e as K,re as a,be as b,ye as g,h as i,pe as u};
//# sourceMappingURL=k154o6a9h89usuus.js.map
