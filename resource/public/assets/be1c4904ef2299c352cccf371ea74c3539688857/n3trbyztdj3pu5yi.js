import{fa as R,fb as E,de as g,fc as M,dd as F,am as B,$ as y,e9 as N,B as O}from"./cyi7nanrg0vdotzd.js";import{z as A,k as H,f as _,r as o,b as $,j as e}from"./fs6h2trisr1juto6.js";import{t as T,a as l,u as k,s as D,C as b,b as L,g as j,T as Q,c as q,d as K}from"./df9u9imhvwerk6zv.js";import{C as V}from"./znhlm4mi38lqonum.js";import{T as z,C as G}from"./ea9kyg94i6ia0yd7.js";import{g as W}from"./mi5k2suvbiot8uwb.js";import{C as w,T as J}from"./ceo3ton9qf40yhfo.js";import{C as U}from"./exwx6mc6hw49alht.js";import{P as X}from"./kg9pnjn9ianmg7dc.js";import"./l4ce2zdnnawhaijx.js";import"./gy64pge8qevmvg7e.js";import"./k76xevje6k7b3vo6.js";import"./juhoq7zcvi40kvvr.js";import"./egq3i0oq39kux8fj.js";import"./jo3x2yf4dp19h25k.js";import"./c1p22j8o7hm9vv5x.js";import"./f3zzw463zuggq6da.js";import"./hiayljqmnpspmyun.js";import"./au5ozv27zrqgic7w.js";import"./069jlavvvdusqrfm.js";import"./yfqt5utzd9fqyqo1.js";import"./fzrn137102spawew.js";import"./ktvbjknz372ja7i7.js";import"./ca8xspsebes9twfc.js";import"./b22a1k4ozfgjkxq7.js";import"./bibq00lzerxkdtcb.js";import"./gvz98l77ingvo2jj.js";import"./h7ui9r0100fo3zi2.js";import"./nikuofry28tl503c.js";import"./bk8slwxjkdlmxjxm.js";import"./ms40jzicf31mvoix.js";import"./ngj3h1w6uuxrb6ri.js";import"./htu9pml8lfjcb6ls.js";import"./o77dlyy0lhhjntje.js";const Ne=()=>(E(),null),Oe=R(function(){const r=A(),[s]=H(),u=_(),p=T(r.conversationId),i=l(s.get("readonly"),!1),c=l(s.get("isFullScreen"),!1),d=l(s.get("header"),!0),m=l(s.get("appPreview"),!1),a=g(()=>M()),C=g(()=>F()),P=l(s.get("hideBottomComposer"),!!i),n=T(r.canmoreId),t=p,f=k();o.useEffect(()=>{D({type:b.Textdoc,textdocId:n})},[n]),L(t,{kind:B.PrimaryAssistant});const h=$();if(o.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),o.useEffect(()=>{n||u("/")},[n,u]),o.useEffect(()=>{j().sendMessage({type:w.Loaded})},[n]),!n||f?.type!==b.Textdoc)return null;const I=()=>{j().sendMessage({type:w.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(X,{clientThreadId:t,children:e.jsx(U,{clientThreadId:t,children:e.jsx(Q,{clientThreadId:t,children:m?e.jsx(N,{children:e.jsx(Y,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(z,{clientThreadId:t,disableScroll:!a,textdocId:f.textdocId}),e.jsx(G,{})]}):e.jsx(J,{isEmbedded:!0,hideRunCode:!a,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:I},"textdocContent")})})})]})}),Y=({textdocId:x})=>{const r=o.useRef(null),s=q(x),[u,p]=o.useState(!1),i=s?.versions??[],c=O(i),d=o.useCallback(K(async m=>{const a=W(m.type,m.content);if(r.current&&(a==="react"||a==="html")){p(!0);const v=r.current.evalAsync({language:a,code:m.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(V,{visuallyHidden:!u,ref:r,enableTransition:!0,title:""})};export{Ne as clientLoader,Oe as default};
//# sourceMappingURL=n3trbyztdj3pu5yi.js.map
