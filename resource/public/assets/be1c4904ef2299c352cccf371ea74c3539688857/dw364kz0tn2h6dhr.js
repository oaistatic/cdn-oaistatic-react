import{e as C,r as p,j as e,M as i,f as ee}from"./fs6h2trisr1juto6.js";import{bn as U,bo as te,bp as H,bq as n,br as se,bs as X,bt as ae,bu as le,bv as V,bw as _,bx as I,by as B,bk as ne,bz as oe}from"./df9u9imhvwerk6zv.js";import{W as ce}from"./hqjvg73qguz9os2s.js";import{bH as ie,V as G,e6 as J,aM as Y,aA as L,P as j,a as b,S as Z,bw as A,dO as T,bJ as re,d as me,Z as K,ft as R,D as de}from"./cyi7nanrg0vdotzd.js";import{c as ue}from"./iej0cupg2dqkmejt.js";var Q=(a=>(a.FLEXIBLE="month",a.ANNUAL="year",a))(Q||{});const O=ue(Q),xe=({isOpen:a,onClose:l,onSubmit:x})=>{const d=L(),[c,r]=p.useState(""),o=p.useMemo(()=>d?.subscriptionAnalyticsParams,[d]);p.useEffect(()=>{j.logEvent(b.accountPayCreateWorkspaceModalShow,o),Z.logEvent("chatgpt_select_team_plan_modal_show",null,{})},[o]);const s=g=>{j.logEvent(b.accountPayCreateWorkspaceModalClicked,{...o,...g})},m=()=>{j.logEvent(b.accountPayCreateWorkspaceModalDismiss,o)},t=C();return e.jsxs(A,{type:"success",isOpen:a,onClose:()=>{l(),m()},className:"max-w-lg",showCloseButton:!0,title:e.jsx(i,{...n.createWorkspace}),children:[e.jsx("div",{className:"flex flex-col justify-center bg-token-main-surface-primary pb-2",children:e.jsx(ce,{workspaceName:c,onChangeWorkspaceName:r})}),e.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[e.jsx(T,{title:t.formatMessage(n.cancel),onClick:()=>{l(),s({buttonType:"Cancel"})}}),e.jsx(T,{title:t.formatMessage(n.selectBillingOption),onClick:()=>{x(c),s({buttonType:"Billing Options"})},disabled:c==="",color:"primary",className:"ml-4"})]})]})},q=ie.p`text-base font-medium mb-3`,$=({isOpen:a,onClose:l,onSubmit:x,minimumSeats:d,billingDetails:c,isDirectFlow:r=!1})=>{const o=L(),{config:s}=J("2513291161"),m=s.get("enabled",!1),[t,g]=p.useState(m?"month":"year"),[y,M]=p.useState(!1),N=C(),[h,P]=p.useState(Math.max(se,d)),f=Math.max(d,B),{flexibleBillingPlan:k,annualBillingPlan:S}=X(c.currency),v=ae(isNaN(h)?0:h,f,le),w=p.useMemo(()=>o?.subscriptionAnalyticsParams,[o]);p.useEffect(()=>{j.logEvent(b.accountPaySelectTeamPlanModalShow,w)},[w]);const D=u=>{switch(u){case"month":j.logEvent(b.accountPayTeamPlanSelectionClicked,{...w,buttonType:"Continue",numberOfSeats:h,planLength:R.MONTHLY});break;case"year":j.logEvent(b.accountPaySelectTeamPlanModalClicked,{...w,buttonType:"Continue",numberOfSeats:h,planLength:R.ANNUAL});break}},W=(u,F)=>{j.logEvent(b.accountPaySelectTeamPlanModalClicked,{...w,buttonType:"Continue",numberOfSeats:F,planLength:u}),Z.logEvent("chatgpt_select_team_plan_modal_continue_to_billing_clicked",u,{number_of_seats:F.toString()})},E=()=>{j.logEvent(b.accountPaySelectTeamPlanModalDismiss,w)};return r?e.jsx(A,{type:"success",isOpen:a,onClose:()=>{l(),E()},size:"fullscreen",noPadding:!0,removePopoverStyling:!0,showCloseButton:!0,children:e.jsxs("div",{className:"grid grid-flow-row grid-cols-1 md:h-full md:grid-cols-2",children:[e.jsx("div",{className:"flex-column col-span-1 flex justify-center p-5 md:grid-cols-2",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col items-center",children:[e.jsx(re,{className:"mb-6 mt-8 h-8 w-8 md:fixed md:left-4 md:top-4 md:mt-0 md:h-6 md:w-6"}),e.jsx("div",{className:"mb-8 text-3xl font-medium md:mt-[120px]",children:e.jsx(i,{id:"selectTeamPlanModal.title",defaultMessage:"Pick your plan"})}),e.jsxs(V,{className:"col-span-3 mb-6 grid w-full gap-4 md:col-span-2 md:grid-cols-2",defaultValue:t,onValueChange:u=>{O(u)&&(g(u),D(u))},children:[e.jsx(_,{billingType:"year",...S,selectedValue:t,hideDetails:!0}),e.jsx(_,{billingType:"month",...k,selectedValue:t,hideDetails:!0})]}),e.jsx(I,{numSeats:h,minSeats:f,setNumSeats:P}),e.jsx("div",{className:"self-start text-xs text-token-text-secondary",children:N.formatMessage({id:"selectTeamPlanModal.seatsDescription",defaultMessage:"Add more seats at any time. Minimum of {minSeats} seats."},{minSeats:B})})]})}),e.jsx("div",{className:"col-span-3 flex h-full flex-col items-center overflow-hidden p-6 md:col-span-1 md:shadow-lg",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col md:mt-[120px]",children:[e.jsx(q,{className:"mb-8 text-xl font-medium",children:e.jsx(i,{...n.summaryTitle})}),e.jsx(z,{numSeats:v,selectedPlan:t,billingDetails:c,totalLabel:n.allPlansTodayTotal,billDate:e.jsx(i,{...n.today})}),e.jsx(T,{title:N.formatMessage(n.continueToBillingButton),onClick:()=>{M(!0),x(t,v),W(t,v)},disabled:!1,loading:y,color:"green",className:"w-full rounded-xl"}),e.jsx(T,{title:N.formatMessage(n.cancel),onClick:()=>{l(),E()},color:"ghost",className:"mt-4 w-full rounded-xl"})]})})]})}):e.jsx(A,{type:"success",isOpen:a,onClose:()=>{l(),E()},size:"custom",noPadding:!0,removePopoverStyling:!0,className:"max-w-4xl",showCloseButton:!0,title:N.formatMessage(n.selectTeamPlanModalTitle),children:e.jsxs("div",{className:"grid h-full grid-flow-row grid-cols-3",children:[e.jsxs("div",{className:"flex-column col-span-3 p-5 md:col-span-2 md:grid-cols-2",children:[e.jsx(I,{numSeats:h,minSeats:f,setNumSeats:P}),e.jsxs(V,{className:"col-span-3 mt-5 grid gap-4 md:col-span-2 md:grid-cols-2",defaultValue:t,onValueChange:u=>{O(u)&&(g(u),D(u))},children:[e.jsx(_,{billingType:"year",...S,selectedValue:t}),e.jsx(_,{billingType:"month",...k,selectedValue:t})]})]}),e.jsxs("div",{className:"col-span-3 flex h-full flex-col overflow-hidden border-l border-token-main-surface-tertiary bg-token-main-surface-secondary p-6 md:col-span-1",children:[e.jsx(q,{children:e.jsx(i,{...n.summaryTitle})}),e.jsx(z,{numSeats:v,selectedPlan:t,billingDetails:c,totalLabel:n.allPlansTodayTotal,billDate:e.jsx(i,{...n.today})}),e.jsx(T,{title:N.formatMessage(n.continueToBillingButton),onClick:()=>{M(!0),x(t,v),W(t,v)},disabled:!1,loading:y,color:"primary",className:"w-full rounded-xl"})]})]})})},z=({numSeats:a,selectedPlan:l,billingDetails:x,totalLabel:d,billDate:c})=>{const r=C(),{flexibleBillingPlan:o,annualBillingPlan:s}=X(x.currency),m=l==="month"?o:s,t=oe[l];return e.jsxs("div",{className:"flex flex-grow flex-col text-sm",children:[e.jsxs("div",{className:"flex w-full justify-between text-sm text-token-text-secondary",children:[e.jsx("div",{className:"flex",children:e.jsx(i,{...t.name})}),e.jsx("div",{className:"flex",children:e.jsx(i,{...n.allPlansPreDiscountTotal,values:{currencySign:r.formatMessage(m.currencySign),preDiscountTotalAmount:((a||0)*(l==="year"?s.monthlyCost*12:o.monthlyCost)).toLocaleString()}})})]}),e.jsxs("div",{className:"flex w-full justify-between text-xs text-token-text-tertiary",children:[e.jsx("div",{className:"flex",children:e.jsx(i,{...t.breakdown,values:{numSeats:a}})}),e.jsx("div",{className:"flex",children:e.jsx(i,{...n.breakdownAmount,values:{currencySign:r.formatMessage(m.currencySign),amount:m.monthlyCost}})})]}),e.jsxs("div",{className:"mt-3 flex w-full justify-between text-sm text-token-text-secondary",children:[e.jsx("div",{className:"flex",children:e.jsx(i,{...n.planDiscountLabel})}),e.jsx("div",{className:me("flex",l==="year"&&s.discountedMonthlyCost<s.monthlyCost&&"font-medium text-[#10A37F]"),children:e.jsx(i,{...t.discountAmount,values:{currencySign:r.formatMessage(o.currencySign),discountAmount:((a||0)*(l==="year"?(s.monthlyCost-s.discountedMonthlyCost)*12:o.monthlyCost-o.discountedMonthlyCost)).toLocaleString()}})})]}),t.discountDescription&&s.discountedMonthlyCost<s.monthlyCost&&l==="year"&&e.jsx("div",{className:"text-xs text-token-text-tertiary",children:e.jsx(i,{...t.discountDescription,values:{discountPercentage:Math.floor((1-s.discountedMonthlyCost/s.monthlyCost)*100)}})}),e.jsx("hr",{className:"my-3 border-token-border-light"}),e.jsxs("div",{className:"flex w-full justify-between text-base font-medium",children:[e.jsx("div",{className:"flex",children:e.jsx(i,{...d})}),e.jsx("div",{className:"flex",children:e.jsx(i,{...t.total,values:{currencyCode:r.formatMessage(m.currencyCode),currencySign:r.formatMessage(m.currencySign),totalAmount:((a||0)*m.unitCost).toLocaleString()}})})]}),e.jsx("div",{className:"mb-8 text-xs text-token-text-tertiary",children:e.jsx(i,{...t.billed,values:{billDate:c}})})]})};function je(){const a=L(),l=ee(),{initialBillingDetails:x}=ne(a,!0),d=C(),c=U(),r=H(d,void 0,c),o=Y(),s=G(),m=async(t,g)=>{try{const y=await K.getCheckoutLink(o,"Teams",{plan_name:"chatgptteamplan",team_plan_data:{workspace_name:r,price_interval:t,seat_quantity:g},billing_details:x});window.location.href=y.url}catch(y){de.addError(y),s.warning(d.formatMessage(n.paymentErrorWarning),{hasCloseButton:!0})}};return e.jsx($,{isOpen:!0,onClose:()=>{l("/")},onSubmit:(t,g)=>m(t,g),isDirectFlow:!0,minimumSeats:B,billingDetails:x})}function be({isOpen:a,onClose:l,minimumSeats:x,billingDetails:d,existingAccount:c=void 0}){const r=C(),o=G(),s=U(),m=c?te(r,c):"",t=H(r,c,s),{config:g}=J("3217984440"),y=g.get("enabled",!1),[M,N]=p.useState(y?t:m),h=Y(),P=async(f,k)=>{try{const S=await K.getCheckoutLink(h,"Teams",{plan_name:"chatgptteamplan",team_plan_data:{workspace_name:M,price_interval:f,seat_quantity:k,existing_workspace_id:c?.id},billing_details:d});window.location.href=S.url}catch{o.warning(r.formatMessage(n.paymentErrorWarning),{hasCloseButton:!0})}};return M===""?e.jsx(xe,{isOpen:a,onClose:l,onSubmit:f=>{N(f)}}):e.jsx($,{isOpen:a,onClose:l,onSubmit:(f,k)=>P(f,k),minimumSeats:x,billingDetails:d})}export{z as B,je as T,be as a};
//# sourceMappingURL=dw364kz0tn2h6dhr.js.map
