const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dxs0viqbdce6v7gr.js","assets/fs6h2trisr1juto6.js","assets/df9u9imhvwerk6zv.js","assets/cyi7nanrg0vdotzd.js","assets/root-drzjahv8.css","assets/conversation-small-kx6wglz1.css","assets/exwx6mc6hw49alht.js","assets/kg9pnjn9ianmg7dc.js","assets/f3zzw463zuggq6da.js","assets/069jlavvvdusqrfm.js","assets/2rd0l9ooanjeh8m4.js","assets/kh3yzdvuzkxnlmrn.js","assets/dp0ii8vuue4rnykh.js","assets/b7o9536h4wpvjcqi.js","assets/k76xevje6k7b3vo6.js","assets/ipt4s0y2p9p8msdy.js","assets/m4ktbua61s1ziqoo.js","assets/pcjkp37t4ugnklc3.js","assets/ky5638d0aqy7l511.js","assets/nlkl42j3n1q6imdw.js","assets/j52f6094ws633vn3.js","assets/b22a1k4ozfgjkxq7.js","assets/juans7zh9ytz81kz.js","assets/e2l59f6c7bsm78ye.js","assets/k154o6a9h89usuus.js","assets/jo3x2yf4dp19h25k.js","assets/on2zr8k6xjj1hfl2.js","assets/wywpfzigeej0marp.js","assets/uopuzq7k880bjpaa.js","assets/o2qs1cf88e5blfu6.js","assets/m7lukv8dnept58g2.js","assets/egq3i0oq39kux8fj.js","assets/ca8xspsebes9twfc.js","assets/bibq00lzerxkdtcb.js","assets/gvz98l77ingvo2jj.js","assets/cu92glh2qqfot2bq.js","assets/iejx7a5clvebkejv.js"])))=>i.map(i=>d[i]);
import{S as xe,P as Ce,a as Se,d9 as je,I as Pe,dQ as Ee,dP as Te,dN as ye,a3 as De,da as _e,av as Le,aF as Be,ea as Re,gg as ce,bw as Ve,bx as Fe,ec as We,bP as N,bQ as I,gh as Ue,a0 as Ge,gi as ze,dx as ue,l as fe,fX as He,fW as qe,dV as Qe,g4 as Ke,E as Ye,am as Je,aZ as Xe}from"./cyi7nanrg0vdotzd.js";import{r as l,j as e,a7 as ke,f as $e,b as ve,e as we,a5 as y,h as D,d as Ze,k as ea}from"./fs6h2trisr1juto6.js";import{h_ as aa,h$ as Ae,i0 as oa,i1 as sa,i2 as ta,i3 as na,cM as O,L as ia,i4 as ra,i5 as la,ek as da,i6 as ca,i7 as ua,i8 as fa,i9 as ga,ia as ma,ib as ha,ic as pa,id as Ma,ie as ba,ig as xa,ih as Ca,ii as Sa,eG as ka,ij as va,ik as wa,il as Aa,im as Oa,io as Na,ip as Ia,iq as ja,ir as Pa,is as Ea,it as Ta,iu as ya,iv as Da,iw as _a,ix as La,iy as Ba,iz as Ra,iA as Va,iB as Fa,iC as Wa,iD as Ua,iE as Ga,iF as za,I as Ha,$ as T,U as ge,gb as me,cN as L,iG as qa,iH as Qa,iI as Ka,iJ as Ya,iK as he,gG as Ja,cl as _,cm as pe,iL as Xa,iM as $a,iN as Za,iO as eo,iP as ao,l as oo,eP as so,iQ as to,bD as no,F as io,iR as ro,iS as lo,T as Me,iT as co,iU as uo,iV as fo,ec as go}from"./df9u9imhvwerk6zv.js";import{b as mo,u as ho}from"./nlkl42j3n1q6imdw.js";import{a as po,I as Mo}from"./j52f6094ws633vn3.js";import{e as bo,N as xo,C as Co,a as So}from"./exwx6mc6hw49alht.js";import{C as ko}from"./on2zr8k6xjj1hfl2.js";import{M as vo}from"./o2qs1cf88e5blfu6.js";import{K as wo}from"./cu92glh2qqfot2bq.js";import{P as Ao}from"./kg9pnjn9ianmg7dc.js";function Oo({clientThreadId:o}){const a=aa(n=>n.notifications),t=l.useRef(new Set);return l.useEffect(()=>{a.filter(s=>s.clientThreadId===void 0||o===s.clientThreadId).map(s=>s.id).filter(s=>s!==void 0).forEach(s=>Ae(s)),a.forEach(s=>{s.id&&!t.current.has(s.id)&&(xe.logEvent("chatgpt_notification_shown"),Ce.logEvent(Se.notificationShown),t.current.add(s.id))})},[o,a]),a.length===0||je?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(ke,{children:a.map(n=>e.jsx(Io,{...n},n.id))})})}function No({notification:o}){return e.jsx(oa,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"})}function Io({...o}){const a=$e(),t=ve(),n=we(),s=Pe(o.clientThreadId),u=()=>{xe.logEvent("chatgpt_notification_clicked"),Ce.logEvent(Se.notificationClicked),o.onClick!=null?o.onClick():s&&sa(a,t,s),o.id&&Ae(o.id)};return e.jsxs(y.div,{onClick:u,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(No,{notification:o}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:o.title??n.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:o.subtitle??n.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})}),o.payload?.display_image_url&&e.jsx("img",{className:"mt-2 h-12 w-12 rounded-sm",src:o.payload.display_image_url,alt:o.title})]})]})}const jo=({onClose:o})=>{const a=we(),t=O(L.isBusinessWorkspace),n=O(u=>u.currentWorkspace),s=t?a.formatMessage(be.workspaceWelcome,{workspaceName:n?.name}):"ChatGPT";return e.jsx(Ve,{isOpen:!0,onClose:Fe,type:"success",title:s,size:"custom",noPadding:!0,className:"max-w-3xl",description:a.formatMessage(be.personalOnboardingSubheading),children:e.jsx(qa,{onClose:o,scope:Qa.Personal})})},Po=({onClose:o})=>{const a=We.useStore();return l.useEffect(()=>(a.setOnCloseSideEffect(o),a.setManualVisibility(!0),()=>{a.setManualVisibility(!1)}),[o,a]),null};function Eo({clientThreadId:o}){const[a,t]=l.useState(0),{hasSeenOnboardingDate:n}=ta(),{hasSeenTeamOwnerOnboardingDate:s}=na(),u=O(L.isBusinessWorkspace),[k,i]=l.useState(!1),m=D(),v=ia(m),{data:j,isPending:w,isEnabled:A}=ra(),b=la(j,w&&A),x=Ee(),C=Te(),S=ye(),[p,M]=De(o,r=>[!r||r.isLoading,r?.conversationOrigin]),{data:c,isError:g}=_e(),d=Le(c),f=c!=null,B=c&&c?.accountItems.length>1&&c.currentAccountId==null,R=c?.accountItems.some(r=>r.isPersonalAccount()),V=!!c?.accountItems&&c.accountItems.length>0&&c.accountItems.every(({canAccessWithCurrentSession:r})=>!r),{eligible:F,isLoading:W}=da(),{value:U}=Be("1542198993"),{punchOutRequireLoginInfo:G}=ca(),{state:z}=ua(),{isOpen:H,isLoading:q}=fa(),{isOpen:Q,isLoading:K}=ga(),{isOpen:Y,isLoading:J}=ma(),{isOpen:X,isLoading:$}=ha(),{state:Z}=pa(),ee=Ma(),ae=po(),oe=ba(),se=xa(),te=Ca(),{isOpen:ne,isLoading:ie}=Sa(),Oe=ka(o),{shouldShowCookieBanner:re,isCookieConsentBannerLoading:le}=Re(),h=l.useMemo(()=>[{Component:va,getModalState:()=>G?"show":"hide",isDeferrable:!1},{Component:wa,getModalState:()=>z,isDeferrable:!1},{Component:Aa,getModalState:()=>Z,isDeferrable:!1},{Component:Oa,getModalState:()=>ie?"loading":ne?"show":"hide",isDeferrable:!1},{Component:Na,getModalState:()=>q||p?"loading":M===ce.APPLE?"hide":H?"show":"hide",isDeferrable:!0},{Component:Ia,getModalState:()=>$||p?"loading":M===ce.APPLE?"hide":X?"show":"hide",isDeferrable:!0},{Component:Po,getModalState:()=>le?"loading":re?"show":"hide",isDeferrable:!1},{Component:jo,getModalState:()=>u||v?"hide":n===null?"loading":n===!1?"show":"hide",isDeferrable:!0},{Component:ja,getModalState:()=>g?"hide":B?"show":f?"hide":"loading",isDeferrable:!1},{Component:Pa,getModalState:()=>x!==null?"show":g||f?"hide":"loading",isDeferrable:!1},{Component:Ea,getModalState:()=>C!==null?"show":g||f?"hide":"loading",isDeferrable:!1},{Component:Ta,getModalState:()=>S!=null?"show":g||f?"hide":"loading",isDeferrable:!1},{Component:ya,getModalState:()=>f?V?"show":"hide":"loading",isDeferrable:!1},{Component:Da,getModalState:()=>K?"loading":Q?"show":"hide",isDeferrable:!1},{Component:_a,getModalState:()=>J?"loading":Y?"show":"hide",isDeferrable:!1},{Component:La,getModalState:()=>"hide",isDeferrable:!1},{Component:Ba,getModalState:()=>!d?.isTeam()||!d?.isOwnerOfAccount()||!R?"hide":!f||s===null?"loading":s===!1?"show":"hide",isDeferrable:!1},{Component:Ra,getModalState:()=>u?n===null?"loading":n===!1?"show":"hide":"hide",isDeferrable:!0},{Component:Va,getModalState:()=>W?"loading":F&&U?"show":"hide",isDeferrable:!1},{Component:Fa,getModalState:()=>b,isDeferrable:!1},{Component:Wa,getModalState:()=>ee,isDeferrable:!1},{Component:r=>e.jsx(Mo,{clientThreadId:o,...r}),getModalState:()=>ae,isDeferrable:!1},{Component:Ua,getModalState:()=>oe,isDeferrable:!1},{Component:Ga,getModalState:()=>se,isDeferrable:!1},{Component:za,getModalState:()=>te,isDeferrable:!0}],[G,z,Z,ie,ne,q,p,M,H,$,X,le,re,u,v,n,g,B,f,x,C,S,V,K,Q,J,Y,d,R,s,W,F,U,b,ee,o,ae,oe,se,te]);l.useEffect(()=>{if(h[a]&&h[a].getModalState()==="hide"){const r=h.findIndex(Ie=>Ie.getModalState()!=="hide");t(r)}},[a,h]);const P=h[a],E=P?.getModalState()==="show";if(l.useEffect(()=>{const r=Ha.getState().activeModals.has(T.BlockingInitialComponent);E!==r&&(E?ge.openModal(T.BlockingInitialComponent):ge.closeModal(T.BlockingInitialComponent))},[E]),P==null)return me.trackNamespace(me.NS_COMPOSER),e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(h[a].isDeferrable&&(k||Oe))return t(r=>r+1),null;const de=P.getModalState();if(de==="loading")return null;de==="hide"&&t(r=>r+1);const Ne=h[a].Component;return e.jsx(Ne,{onClose:()=>{i(!0),t(r=>r+1)}})}const be=Ze({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),To=N(()=>I(()=>import("./dxs0viqbdce6v7gr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(o=>o.MadlibsModal));function yo(){const o=bo();return e.jsxs(e.Fragment,{children:[e.jsx(Do,{}),o&&e.jsx(xo,{})]})}function Do(){const{isOpen:o}=Ka();return o?e.jsx(To,{}):null}const _o=450;function Lo({children:o,clientThreadId:a,isOpen:t,onClose:n,type:s}){return e.jsx(ke,{children:t&&e.jsx(Ue,{children:e.jsx(Ya.Provider,{value:{isEmbeddedInFocusedView:!0,type:s},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(y.div,{className:"h-full w-full bg-token-main-surface-secondary",...he}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:o}),e.jsx(y.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:_o},...he,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(vo,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})})}const Bo=N(()=>I(()=>import("./2rd0l9ooanjeh8m4.js"),__vite__mapDeps([10,3,1,4,2,5,11,12,13,14]))),Ro=N(()=>I(()=>import("./ipt4s0y2p9p8msdy.js"),__vite__mapDeps([15,3,1,4,2,5,16,17,18,19,8,7,20,6,9,21,22,23,13,24,25,26,27,28,29,30,31,32,33,34,35])).then(o=>o.ImageEditor));function Vo({clientThreadId:o}){const a=Ja();l.useEffect(()=>{_.close()},[o]);let t;return a?.type===pe.ADAVisualization?t=e.jsx(Bo,{clientThreadId:o,visualization:a.visualization}):a?.type===pe.Image&&(t=e.jsx(Ro,{clientThreadId:o,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(Lo,{clientThreadId:o,isOpen:a!=null,onClose:_.close,type:a?.type,children:t})}var Fo={};const Wo=N(()=>I(()=>import("./iejx7a5clvebkejv.js"),__vite__mapDeps([36,1,3,4,2,5,19,8,7,6,9,29,30,23,22,20,21,13,24,25,31,32,33,34])));function es(o){const{urlThreadId:a,clientThreadId:t,prefetchSearch:n}=o,s=Ge(),u=D(),[k]=ea(),[i,m]=l.useState(()=>{if(a!==void 0){const d=a;return ze(d)??d}return t!==void 0?t:ue()});a!==void 0&&i!==a&&(fe(i)===a||m(a));const v=Xa(D());l.useEffect(()=>{a===void 0&&fe(i)!==void 0&&m(ue())},[a,i,v]);const j=O(L.workspaceId),{eligible:w,isLoading:A,markAsViewed:b}=$a(),x=Za(),{eligible:C,isLoading:S,markAsViewed:p}=eo(),M=ao(),c=oo();l.useEffect(()=>{He(!0).then(d=>{d.force_login&&c({authType:"login"}),so.initializeAndGatherData(d),qe.initializeAndGatherData(d)})},[c]),l.useEffect(()=>{const d=k.get(to)==="true";s!==d&&Qe.setIsTemporaryChatEnabled(d)},[s,k]),l.useEffect(()=>{u.state?.focusObject&&_.setFocusedObject(u.state.focusObject)},[u.state?.focusObject]),l.useEffect(()=>{!A&&w&&(b(),x())},[w,A,b,x]),l.useEffect(()=>{!S&&C&&(p(),M())},[C,S,p,M]),mo(i);const g=ve();return l.useEffect(()=>Ke(Xe,{completionFinished:d=>{if(d.serverThreadId!=null&&!s){const f=Ye(d.serverThreadId)?.mode;f?.kind===Je.GizmoInteraction&&go.handleGizmoInteracted(g,f.gizmo_id)}}}),[s,g]),e.jsx(no.Provider,{value:null,children:e.jsx(io,{children:e.jsxs(ro,{clientThreadId:i,children:[e.jsxs(Co,{clientThreadId:i,children:[e.jsx(Ao,{clientThreadId:i,children:e.jsx(Eo,{clientThreadId:i},j)}),e.jsx(Uo,{clientThreadId:i,setClientThreadId:m}),e.jsx(wo,{}),e.jsx(lo,{}),e.jsx(So,{clientThreadId:i,setClientThreadId:m,prefetchSearchPromises:n,children:e.jsxs(Me,{clientThreadId:i,children:[e.jsx(ko,{urlThreadId:a,clientThreadId:i,setClientThreadId:m}),e.jsx(yo,{})]})})]}),e.jsx(Me,{clientThreadId:i,children:e.jsx(Vo,{clientThreadId:i})}),e.jsx(co,{clientThreadId:i}),e.jsx(uo,{}),e.jsx(Oo,{clientThreadId:i}),e.jsx(fo,{}),null]})})})}function Uo({clientThreadId:o,setClientThreadId:a}){const{isOpen:t,isLoading:n}=ho();return!n&&t?e.jsx(Wo,{clientThreadId:o,setClientThreadId:a}):null}typeof window<"u"&&(window._g=Fo.GOKU_SERVICE);export{es as C,_o as F};
//# sourceMappingURL=lvou0htv1x5x2d88.js.map
