import{r as o,j as e,a7 as _,a5 as U,e as F,M as T}from"./fs6h2trisr1juto6.js";import{bw as I,aq as R,c4 as Z,fL as k,j as z,I as D,cN as H,P as L,a as O,bS as W,dx as q,F as K,E as Y,D as G}from"./cyi7nanrg0vdotzd.js";import{E,G as w,dK as Q,hU as X,dM as $,hV as J,hW as ee,hX as se,hL as te,hY as oe,dt as ae,a3 as ne}from"./df9u9imhvwerk6zv.js";import{u as ie}from"./icoudjr9c78b8bvx.js";import{V as ce,u as le,a as re,b as de}from"./omsod5skty4ud78c.js";import{T as me}from"./d3vlrpumel0m4925.js";import"./il50daha0kb70ufn.js";import"./lscxa7r7b9o6yh7m.js";import"./c1p22j8o7hm9vv5x.js";import"./k154o6a9h89usuus.js";import"./kg9pnjn9ianmg7dc.js";const ue=s=>o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C7.58172 4 4 7.58172 4 12C4 14.2569 4.93453 16.2954 6.43772 17.7499C7.71622 16.0791 9.73141 15 12 15C14.2686 15 16.2838 16.0791 17.5623 17.7499C19.0655 16.2954 20 14.2569 20 12C20 7.58172 16.4183 4 12 4ZM15.9632 18.9509C15.0483 17.7635 13.6126 17 12 17C10.3874 17 8.9517 17.7635 8.03677 18.9509C9.20512 19.6185 10.558 20 12 20C13.442 20 14.7949 19.6185 15.9632 18.9509ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 8C10.8954 8 10 8.89543 10 10C10 11.1046 10.8954 12 12 12C13.1046 12 14 11.1046 14 10C14 8.89543 13.1046 8 12 8ZM8 10C8 7.79086 9.79086 6 12 6C14.2091 6 16 7.79086 16 10C16 12.2091 14.2091 14 12 14C9.79086 14 8 12.2091 8 10Z",fill:"currentColor"})),he=s=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:33,viewBox:"0 0 32 33",fill:"none",...s},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2948 4.65537C21.9454 5.00233 22.1915 5.81099 21.8445 6.46155L17.5583 14.4983H19.3333C20.0706 14.4983 20.6683 15.096 20.6683 15.8333V19.5C20.6683 20.4195 21.4137 21.165 22.3333 21.165H26.6666C27.4039 21.165 28.0016 21.7627 28.0016 22.5C28.0016 23.2373 27.4039 23.835 26.6666 23.835H22.3333C19.9391 23.835 17.9983 21.8941 17.9983 19.5V17.1683H16.9999C15.2372 17.1683 14.1101 15.2898 14.9396 13.7345L19.4887 5.20508C19.8356 4.55452 20.6443 4.3084 21.2948 4.65537ZM17.2955 14.991L17.2958 14.9905L17.2955 14.991ZM5.41956 15.5935C6.15585 15.6321 6.72145 16.2602 6.68286 16.9965C6.48941 20.6879 8.19571 24.0398 10.9531 26.1024C11.5435 26.544 11.6641 27.3806 11.2225 27.971C10.7808 28.5614 9.94419 28.682 9.35379 28.2404C5.91339 25.6669 3.77448 21.4751 4.01652 16.8568C4.05511 16.1205 4.68327 15.5549 5.41956 15.5935ZM10.7456 15.8726C11.4819 15.9112 12.0475 16.5393 12.0089 17.2756C11.9122 19.1204 12.764 20.7959 14.1441 21.8283C14.7345 22.2699 14.8551 23.1065 14.4135 23.6969C13.9718 24.2873 13.1352 24.4079 12.5448 23.9663C10.4817 22.423 9.19729 19.9076 9.34255 17.1359C9.38113 16.3996 10.0093 15.834 10.7456 15.8726Z",fill:"currentColor"}));function B(s){return e.jsx(I,{isOpen:s.isOpen,onClose:s.onClose,type:"success",size:"fullscreen",children:e.jsx(_,{children:e.jsx(U.div,{children:e.jsx(ce,{conversationId:s.conversationId,onClose:s.onClose,cameFromNux:s.cameFromNux,initialVoiceName:s.initialVoiceName})})})})}function xe({conversationId:s,initialVoiceName:n}){const t=F(),i=E(w.hasSeenAdvancedVoiceNuxFullPage),c=R(),g=c?.isPlus()??!1,p=c?.isEnterprisey()??!1,v=!g&&!p,m="https://help.openai.com/en/articles/8400625-voice-mode-faq#h_c5d6fe534b",[r,u]=o.useState(!1),[h,y]=o.useState(!1),[C,N]=o.useState(!1),[d,b]=o.useState(!0);o.useEffect(()=>{requestAnimationFrame(()=>y(!0))},[]);const S=()=>{N(!0),k.voiceAdvancedDisclosureAccepted.click(),u(!0),setTimeout(async()=>{b(!1)},me)},x=()=>{i.markAsViewed()},f=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Q,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"TFfx7w",defaultMessage:"Natural conversations"})}),e.jsx("p",{className:"text-token-text-secondary",children:t.formatMessage({id:"qR+v5Q",defaultMessage:"Senses and responds to interruptions, humor, and more."})})]})]}),V=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(X,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"br49Gd",defaultMessage:"Free monthly preview"})}),e.jsx("p",{className:"text-token-text-secondary",children:t.formatMessage({id:"LhOfga",defaultMessage:"Use advanced voice for a short period each month."})})]})]}),j=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(he,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"84QiAT",defaultMessage:"Multiple voices"})}),e.jsx("p",{className:"text-token-text-secondary",children:t.formatMessage({id:"yYgwEW",defaultMessage:"Offers an expanded set of voices to choose from."})})]})]}),M=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ue,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"M/x7uJ",defaultMessage:"Personalized to you"})}),e.jsx("p",{className:"text-token-text-secondary",children:t.formatMessage({id:"QZXq7u",defaultMessage:"Can use memory and custom instructions to shape responses."})})]})]}),a=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx($,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"e6n5kr",defaultMessage:"You’re in control"})}),e.jsx("p",{className:"text-token-text-secondary",children:p?e.jsx(T,{id:"4szv66",defaultMessage:"Your audio recordings are saved but not used for training. Learn how to <link>manage recordings</link>.",values:{link:l=>e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"underline",children:l})}}):e.jsx(T,{id:"M/k4S5",defaultMessage:"Audio recordings are saved, and you can delete them at any time. Learn how to <link>manage recordings</link>.",values:{link:l=>e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"underline",children:l})}})})]})]}),A=v?[V,f,M,a]:[f,j,M,a];return e.jsxs(e.Fragment,{children:[e.jsx(B,{isOpen:r,onClose:x,conversationId:s,cameFromNux:!0,initialVoiceName:n}),e.jsx(I,{isOpen:d,onClose:x,type:"success",size:"fullscreen",className:`bg-white transition-opacity duration-300 dark:bg-gray-800 ${h&&!C?"opacity-100":"opacity-0"}`,showOverlayBackground:!1,children:e.jsxs("div",{className:"mx-auto flex h-full w-full max-w-lg flex-col items-center justify-center px-4 text-center",children:[e.jsx("h1",{className:"mb-9 text-2xl font-semibold text-token-text-primary",children:v?t.formatMessage({id:"XV3+9K",defaultMessage:"Sneak a peek at advanced voice mode"}):t.formatMessage({id:"9YnxDX",defaultMessage:"Say hello to advanced voice mode"})}),e.jsx("div",{className:"mb-9 space-y-5",children:A.map((l,P)=>e.jsx("div",{children:l},P))}),e.jsxs("p",{className:"mb-9 text-sm text-token-text-primary",children:[t.formatMessage({id:"vtcf3s",defaultMessage:"Voice mode can make mistakes — check important info."}),e.jsx("br",{}),t.formatMessage({id:"4nw2S2",defaultMessage:"Usage limits may change."})]}),e.jsx(Z,{className:"rounded-full bg-token-text-primary px-20 py-3 font-semibold",onClick:S,children:e.jsx(T,{id:"ppi93b",defaultMessage:"Continue"})})]})})]})}function fe(){const s=E(w.hasSeenAdvancedVoiceNuxFullPage);return!s.isLoading&&s.eligible}function ge(){const s=ne()?w.hasSeenAdvancedVoiceWebNuxTooltip:w.hasSeenAdvancedVoiceRealWebNuxTooltip,n=E(s);return{shouldShowTooltipNux:!n.isLoading&&n.eligible,tooltipAnnouncement:n,announcementKey:s}}function Ae({clientThreadId:s,isSmall:n=!1}){const t=le(),{isUnauthenticated:i}=z(),c=D(s),p=F().formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),[v,m]=o.useState(!1),r=fe(),{shouldShowTooltipNux:u,tooltipAnnouncement:h,announcementKey:y}=ge(),[C,N]=o.useState(!1),d=c??s,b=re(a=>a.isVoiceModeActive),{startVoiceMode:S}=de(),{prospectiveModelId:x}=J(s),{setValue:f}=ie(H.VoiceName),{getUpsellLabelType:V}=ee(),j=V()==="all";o.useEffect(()=>{r||m(!1)},[r]),o.useEffect(()=>{const a=sessionStorage.getItem("selectedVoiceName"),A=async l=>{try{sessionStorage.removeItem("selectedVoiceName"),await S({voice:l,conversation_id:void 0,eventSource:"login_page",voice_mode:"advanced",clientThreadId:q(),gizmo_id:K.getGizmoId(Y(d)),requested_default_model:x??void 0})}catch(P){G.addError(`Failed to start voice mode after voice picker: ${P}`)}};a&&!i&&(f(a),A(a))},[d,i,f,S,x]);const M=o.useCallback(async()=>{if(L.logEventWithStatsig(O.composerSpeechButtonClicked,"composer_speech_button_clicked"),i)return k.voiceSelectionShown.click(i?{isUnauthenticated:!0,eventSource:"composerSpeechButton"}:{}),N(!0);if(u&&h.markAsViewed(),r){k.voiceAdvancedDisclosureShown.success(),m(!0);return}t.setState(a=>{a.isVoiceModeActive=!0})},[i,u,r,h,t]);return e.jsx(e.Fragment,{children:v?e.jsx(xe,{conversationId:d}):C?e.jsx(B,{isOpen:C,onClose:()=>{N(!1)},conversationId:d,cameFromNux:!0}):e.jsx(pe,{showNuxTooltip:u,tooltipAnnouncement:h,announcementKey:y,children:e.jsxs("button",{"data-testid":"composer-speech-button",onClick:M,"aria-label":p,disabled:b,className:se(j,n),style:{viewTransitionName:"var(--vt-composer-speech-button)"},children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(te,{})}),j&&e.jsx(oe,{})]})})})}function pe({children:s,showNuxTooltip:n,tooltipAnnouncement:t,announcementKey:i}){const c=F();return n?e.jsx(ae,{announcementKey:i,theme:"bright",side:"top",show:!0,badge:"new",dismissOnOutsideClick:!0,title:c.formatMessage({id:"DQ6CAP",defaultMessage:"Try advanced voice mode"}),contentAlign:"center",onDismiss:t.markAsViewed,sideOffset:2,collisionPadding:8,children:e.jsx("div",{children:s})}):e.jsx(W,{sideOffset:4,label:c.formatMessage({id:"i4P/ix",defaultMessage:"Use voice mode"}),side:"top",onOpenChange:g=>{g&&(L.logEvent(O.composerSpeechButtonHovered),k.composerSpeechButton.hover())},children:s})}export{Ae as ComposerSpeechButton};
//# sourceMappingURL=c3i1bmlhmru6zkrc.js.map
