import{as as Y,g as z,v as ge,f7 as pe,aI as he,cV as K,B,aj as w,k as se,cU as fe,aE as ae,aH as xe,ae as oe,ac as ye,aJ as R,d1 as be,c as A,ao as ne,af as re,aL as ie,c1 as Se,gN as ve,fh as _e,e as ke,j as Ne,t as je,y as we,b as Ce,d as Me,at as Ae}from"./n9zp7vm10xoipejo.js";import{ix as Ie,kL as Le,bL as Ee,kJ as Pe,eV as Te,kM as He,kN as Be,kO as Oe,kP as F,a$ as C,b8 as le,aZ as ce,kQ as Fe,kR as Ue,fO as Z,ia as De,ew as H,eT as Ge,eQ as ze,bJ as Re,bI as We,eR as Ve,kS as qe,eS as Ke,de as Ye,kT as $e,W as ue,an as Je,hB as Qe,kU as Xe,k6 as Ze,O as et,fp as tt,kV as st,j9 as U,e as at,kW as ot,kX as nt,kY as rt,a1 as it}from"./l4oo5ijw01fyrjzs.js";import{d as de}from"./nmzcjggnos81a3wt.js";import{r as y,j as e,M as j,d as lt,f as $,a5 as D,ag as ct,a6 as ee,p as ut,u as dt,q as mt}from"./lip667d8t42poxum.js";import{b as gt}from"./kdkl0k5zipatley9.js";import{u as pt}from"./czpmep8a1gn2yxp9.js";const ht="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",J=()=>Be(ae.HasSeenNoAuthImagegenNux,!1,Oe),Et=()=>{const{isUnauthenticated:t}=Y(),s=Ie(),[d]=J(),a=gt(),c=z(),o=ge(c,"2118136551");return!t||s||d||a?"hide":o.get("should_show_imagegen_nux",!1)?"show":"hide"},Pt=({onClose:t})=>{const d=Le()?"bottom":"center",a=Ee(),[c,o]=y.useState(!1),m=z(),u=pe(m,"2604379743").value,n=typeof u.nux_video_url=="string"?u.nux_video_url:ht,p=typeof u.nux_image_url=="string"?u.nux_image_url:"",[,g]=J(),x=()=>{g(!0),xe.setItem(ae.HasSeenNoAuthImagegenNux,!0)},r=Pe(),{layer:i}=he("2118136551"),l=i.get("sign_up_button_has_the_word_free",!0),h=Te(l?He.signUpForFreeCta:K.signUpButtonText),v=e.jsx(B,{as:"button",size:"large",color:r?"secondary":"primary",onClick:()=>{x(),a({authType:"signup",callback:N=>{w.logSignUpButtonClicked({provider:N,location:"No Auth Imagegen Nux Modal"})}})},fullWidth:!0,children:e.jsx(j,{...h})}),b=e.jsx(B,{as:"button",size:"large",color:r?"primary":"secondary",fullWidth:!0,onClick:()=>{x(),a({authType:"login",callback:N=>{w.logLogInButtonClicked({provider:N,location:"No Auth Imagegen Nux Modal"})}})},children:e.jsx(j,{...K.logInButtonText})}),k=()=>{t(),x(),w.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_dismissed","chatgpt_no_auth_imagegen_nux_modal_dismissed")};return y.useEffect(()=>{w.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_shown","chatgpt_no_auth_imagegen_nux_modal_shown")},[]),e.jsxs(se,{testId:"modal-no-auth-imagegen-nux",isOpen:!0,noPadding:!0,onClose:k,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",position:d,children:[e.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!c&&e.jsx("img",{src:p,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),e.jsx("video",{src:n,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>o(!0)}),e.jsx("div",{className:"absolute end-4 top-4",children:e.jsx(fe,{onClick:k})})]}),e.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-8 text-center",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(j,{id:"OxVK72",defaultMessage:"Bring your ideas to life with images"})}),e.jsx("div",{className:"text-token-text-secondary w-full",children:e.jsx(j,{id:"bVWvdX",defaultMessage:"Create a free account to make illustrations, charts, comics, and more."})}),e.jsx("div",{className:"mt-4 mb-2 flex w-full flex-col gap-3",children:r?[b,v]:[v,b]}),e.jsx(B,{color:"ghost",className:"text-token-text-secondary font-semibold underline hover:bg-transparent",onClick:k,children:e.jsx(j,{...K.stayLoggedOut})})]})]})},ft="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",xt="https://help.openai.com/en/articles/8932459",Tt=()=>{const{isLoading:t,eligible:s}=le(ce.hasSeenShibaHomeNux),{isUnauthenticated:d}=Y(),[a]=J(),{value:c}=oe("2781425969");return d||!c||a?"hide":t?"loading":s?"show":"hide"};function Q(t){return[{title:t.formatMessage({id:"er580q",defaultMessage:"Create an image of a magazine cover of cute animals with headlines and text"}),body:"",type:C.Autocomplete,prompt:t.formatMessage({id:"SKZKBN",defaultMessage:"Create an image of a photorealistic magazine cover for 'CUTE ANIMALS,' featuring three impossibly cute and stylishly accessorized pets, with realistic, catchy headlines and teaser text"}),theme:F.Image},{title:t.formatMessage({id:"ukPFbH",defaultMessage:"Create an image for a garden-themed birthday party invitation"}),body:"",type:C.Autocomplete,prompt:t.formatMessage({id:"uYg5kL",defaultMessage:"Create an image of a colorful invitation for a garden-themed birthday party, including whimsical typography"}),theme:F.Image},{title:t.formatMessage({id:"mMiJxP",defaultMessage:"Create an image of an astronaut with an inflatable duck on Mars"}),body:"",type:C.Autocomplete,prompt:t.formatMessage({id:"5nFWh4",defaultMessage:"Create a photorealistic image of an international astronaut on Mars, wearing a giant duck inflatable toy around its waist"}),theme:F.Image},{title:t.formatMessage({id:"+T7POI",defaultMessage:"Create an image of a tutorial for cooking pasta"}),body:"",type:C.Autocomplete,prompt:t.formatMessage({id:"9N2bJ0",defaultMessage:"Create an image of a comic-book style tutorial for cooking pasta"}),theme:F.Image}]}const Ht=({onClose:t,clientThreadId:s})=>{const{markAsViewed:d}=le(ce.hasSeenShibaHomeNux),a=de(),c=lt(),o=ye("2604379743").config.value,m=typeof o.nux_video_url=="string"?o.nux_video_url:ft,u=typeof o.nux_image_url=="string"?o.nux_image_url:"",[n,p]=y.useState(!1),g=Fe(a,s),{activeSystemHints:x}=Ue(s),r=x.find(b=>b.systemHint===R.PictureV2);y.useEffect(()=>{w.logEventWithStatsig("chatgpt_imagegen_nux_modal_shown","chatgpt_imagegen_nux_modal_shown")},[]);const i=$(),l=Q(i),h=()=>{d(),t(),w.logEventWithStatsig("chatgpt_imagegen_nux_modal_dismissed","chatgpt_imagegen_nux_modal_dismissed")},v=()=>{d(),t(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r&&g({hint:r,enable:!0}),a.focus()})}),a.setAutocompletions(l)};return e.jsx(e.Fragment,{children:e.jsxs(se,{testId:"modal-imagegen-nux",isOpen:!0,noPadding:!0,onClose:be,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",children:[e.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!n&&e.jsx("img",{src:u,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),e.jsx("video",{src:m,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>p(!0)})]}),e.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-6 text-center",children:[e.jsx("div",{className:"text-xl font-medium",children:e.jsx(j,{id:"KgZP2O",defaultMessage:"Image creation just got better"})}),e.jsx("div",{className:"text-token-text-secondary w-full",children:e.jsx(j,{id:"/oguus",defaultMessage:"ChatGPT now thinks a little longer to make more accurate and detailed images. <link>Learn more</link>",values:{link:b=>e.jsx("a",{href:xt,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 no-underline",children:b})}})}),e.jsx("div",{className:"mt-2 w-full text-xs text-[#8F8F8F] dark:text-[#C4C4C4]",children:e.jsx(j,{id:"6pIXUv",defaultMessage:"You must have permission to edit images you upload, including consent from any people in them."})}),e.jsxs("div",{className:"mt-4 flex w-full gap-3",children:[e.jsx(B,{color:"secondary",onClick:h,className:"flex-1",children:e.jsx(j,{id:"6nf9tD",defaultMessage:"Not now"})}),e.jsx(B,{color:"primary",onClick:()=>{v(),c("/?model=gpt-4o"),w.logEventWithStatsig("chatgpt_imagegen_nux_modal_continued","chatgpt_imagegen_nux_modal_continued")},className:"flex-1",children:e.jsx(j,{id:"ms5BU0",defaultMessage:"Try it"})})]})]})]})})};function Bt({suggestions:t,composerController:s,onSelect:d,onChange:a}){const c=pt(),o=y.useCallback((r,i,l,h)=>{d?.(i,l,h),c(r,i,l,h)},[d,c]),[m,u]=y.useState(()=>t.length>0),[n,p]=y.useState(-1),[g,x]=y.useState(!1);return y.useEffect(()=>{const r=i=>{if(!i.isComposing)if(i.key==="ArrowDown"){const l=n===t.length-1?0:n+1;p(l),a?.(l,!0,t[l])}else if(i.key==="ArrowUp"){i.preventDefault();const l=n<=0?t.length-1:n-1;p(l),a?.(l,!0,t[l])}else i.key==="Enter"&&!i.shiftKey&&t[n]&&o(i,t[n],t,n)};return s.subscribe("keydown",r)},[t,n,a,o,s]),y.useEffect(()=>s.subscribe("blur",()=>{p(-1),u(!1),a?.(-1,!1)}),[s,a]),y.useEffect(()=>s.subscribe("focus",()=>u(!0)),[s]),y.useEffect(()=>{if(!g){const r=()=>{x(!0),window.removeEventListener("mousemove",r)};return window.addEventListener("mousemove",r),()=>{window.removeEventListener("mousemove",r)}}},[g]),y.useEffect(()=>{p(-1),a?.(-1,!1),x(!1)},[t,a]),e.jsx(D.ul,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:A("w-full flex-col p-2.5 max-lg:flex-col-reverse",m?"flex":"hidden"),children:t.map((r,i)=>e.jsxs(D.li,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:i*.03},exit:{opacity:0,translateY:4},className:"w-full",children:[i>0&&e.jsx("div",{className:A("h-[1px] opacity-60 max-lg:hidden",n===i||n===i-1?"bg-token-main-surface-secondary mx-2":"bg-token-border-default")}),e.jsxs("button",{className:A("flex w-full cursor-pointer items-center justify-start rounded-lg px-2.5 py-3 text-start whitespace-pre-wrap",n===i?"bg-token-main-surface-secondary":"bg-token-main-surface-primary"),onClick:l=>{l.preventDefault(),o(l,r,t,i)},onMouseDown:l=>{l.preventDefault()},onMouseEnter:()=>{g&&(p(i),a?.(i,!1,r))},onMouseLeave:()=>{p(-1),a?.(-1,!1,r)},children:[r.icon?e.jsx("span",{className:"text-token-text-secondary me-2 h-[18px] w-[18px] flex-none",children:r.icon}):null,e.jsx("span",{className:"text-sm whitespace-pre-wrap",children:r.autocompletionChunks&&r.autocompletionChunks.length>0?e.jsx(e.Fragment,{children:r.autocompletionChunks.map((l,h)=>e.jsx("span",{className:A(l.className??(l.isMatched?"text-token-text-tertiary":"text-token-text-primary")),children:l.text},h))}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:A(r.type===C.Starter||r.type===C.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:r.title}),e.jsx("span",{className:"text-token-text-primary",children:r.body})]})})]}),i>0&&e.jsx("div",{className:A("h-[1px] opacity-60 lg:hidden",n===i||n===i-1?"bg-token-main-surface-secondary mx-2":"bg-token-border-default")})]},r.id??i))})}function yt(t,s){t=t.toLocaleLowerCase();const d=s;s=s.toLocaleLowerCase();const a=[];let c=0;for(let u=0;u<s.length&&(c<t.length&&t[c]===s[u]&&(a.push(u),c++),c!==t.length);u++);const o=[];let m=0;if(a.forEach(u=>{if(u>m){const n=d.slice(m,u);n&&o.push({text:n,isMatched:!1})}o.push({text:d[u],isMatched:!0}),m=u+1}),m<s.length){const u=d.slice(m);u&&o.push({text:u,isMatched:!1})}return bt(o)}function bt(t){if(t.length===0)return t;const s=[t[0]];for(let a=1;a<t.length;a++){const c=s[s.length-1],o=t[a];c.isMatched===o.isMatched?c.text+=o.text:s.push(o)}const d=s.filter(a=>a.isMatched).reduce((a,c)=>a+c.text.trim().length,0);return s.length<=4&&d>=2?s:[{text:s.map(a=>a.text).join(""),isMatched:!1}]}const St=({pressed:t,disabled:s,icon:d,label:a,ariaLabel:c,animatedLabel:o,showLabel:m,onClick:u,splitButtonDropdownContent:n,showSplitButton:p=!0,dropdownContent:g,dataTestid:x,splitSecondaryButton:r,tooltip:i,as:l="popover"})=>{const[h,v]=y.useState(!1),[b,k]=y.useState(!1),N=ct(),M=!s&&t,L=a&&e.jsx("div",{className:A("[display:var(--force-hide-label)] ps-1 pe-1 whitespace-nowrap"),children:a}),E=e.jsxs("button",{className:A("flex h-full min-w-8 items-center justify-center p-2",{"pe-1.5":!!n}),"data-testid":x,"aria-pressed":t,"aria-label":c,disabled:s,onTransitionEnd:()=>k(!1),onClick:S=>{g||(k(!0),u(S))},children:[d,!o&&m?L:null,o&&e.jsx(ee,{initial:!1,children:m&&e.jsx(D.span,{initial:{x:-10,width:0,opacity:0},animate:{x:0,width:"fit-content",opacity:1},exit:{x:-10,width:0,opacity:0},transition:{ease:"easeOut",duration:N?0:.15},children:L})})]}),P=i?i(E):E,T=h?e.jsx(Re,{className:"h-[18px] w-[18px]"}):e.jsx(We,{className:"h-[18px] w-[18px]"}),_=N?De:{opacity:{delay:.1},default:{type:"tween",duration:.15,ease:"easeInOut"}},W=n||g?l==="popover"?e.jsx(Ve,{children:e.jsx(qe,{className:"p-0",$as:Ke,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:g??n})}):e.jsx(H.Portal,{children:e.jsx(H.Content,{children:g??n})}):null,V=l==="popover"?e.jsx(Z,{asChild:!0,children:P}):e.jsx(H.Trigger,{asChild:!0,children:P}),O=l==="popover"?e.jsx(Z,{asChild:!0,children:e.jsx("button",{className:"border-token-border-default border-s p-2",style:{borderColor:M?"#0285FF0D":void 0},disabled:s,children:T})}):e.jsx(D.div,{initial:{width:0,opacity:0,padding:0},animate:{width:"auto",opacity:1,padding:"0.5rem"},exit:{width:0,opacity:0,padding:0,borderLeft:"unset"},transition:_,style:{overflow:"hidden",border:"unset",borderLeft:"solid 1px",borderColor:M?"#0285FF0D":"var(--border-default)"},children:e.jsx(H.Trigger,{asChild:!0,children:e.jsx("button",{style:{padding:0,backgroundColor:"transparent",height:"100%",borderRadius:"unset",color:M?"var(--interactive-label-accent-default)":void 0},disabled:s,children:T})})}),I=e.jsxs("div",{className:A("radix-state-open:bg-black/10 inline-flex h-9 rounded-full border text-[13px] font-medium",{"duration-75 motion-safe:transition-all":b,"text-token-text-secondary":!t,"text-token-interactive-label-accent-default can-hover:hover:bg-[#BDDCF4] dark:can-hover:hover:bg-[#1A416A] bg-token-composer-blue-bg border-transparent dark:bg-[#2A4A6D] dark:text-[#48AAFF]":!!M,"border-token-border-default can-hover:hover:bg-token-main-surface-secondary focus-visible:outline-black dark:focus-visible:outline-white":!M,"opacity-30":s}),children:[g?V:P,e.jsx(ee,{children:!g&&n&&p?O:null}),r]});return n||g?l==="popover"?e.jsxs(Ge,{onOpenChange:S=>v(S),children:[e.jsx(ze,{asChild:!0,children:I}),W]}):e.jsxs(H.Root,{onOpenChange:S=>v(S),children:[I,W]}):I},G=R.PictureV2,vt=["o1","o3-mini","o3-mini-high","o1-pro","gpt-4.5","gpt-4-5"];function Ot({clientThreadId:t,composerController:s,currentModelConfig:d,currentModelConfigLoading:a,disableIfNoAccess:c}){const o=z(),[m]=ut(),u=ne()?.planType,n=re(t,M=>Xe(o,t,M,m,u)),{value:p}=oe("2868048419"),g=Ye(t),x=g==null||g?.kind===ie.PrimaryAssistant,{isUnauthenticated:r}=Y(),i=!r,l=d?.enabledTools?.includes(Se.ImageGen),h=ve(),v=!!h,b=l&&!a&&n&&!vt.includes(n),k=i&&p&&!0&&x;return!_e(R.PictureV2)||!(k&&(b||c))?null:e.jsx("div",{"data-testid":"system-hint-picture_v2",style:{viewTransitionName:`var(--vt-composer-${G}-action)`},children:e.jsx(_t,{clientThreadId:t,composerController:s,disabled:!!c&&!b||v,imageGenFeatureBlock:h})},`system-hint-${G}`)}function _t({clientThreadId:t,composerController:s,disabled:d,imageGenFeatureBlock:a}){const o=$e(s)===G,m=$(),u=Q(m),n=me(m),p=m.formatMessage({id:"av47h4",defaultMessage:"Visualize anything"}),{clearAllSystemHintModeTriggers:g}=ue(),x=h=>{h.stopPropagation(),h.preventDefault(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{g(),o?s.removeSystemHints():s.addSystemHint(G,n),s.focus()})}),s.setAutocompletions(u),o?w.logEventWithStatsig("Composer Create Image Button Disabled","composer_create_image_button_disabled",{clientThreadId:t}):w.logEventWithStatsig("Composer Create Image Button Enabled","composer_create_image_button_enabled",{clientThreadId:t})},r=e.jsx(St,{pressed:o,icon:e.jsx(Qe,{className:"h-[18px] w-[18px]"}),label:n,ariaLabel:n,animatedLabel:!0,showLabel:!0,onClick:x,disabled:!!d,dataTestid:"composer-button-create-image"}),i=a?.title??p,l=a?.description??void 0;return e.jsx(Je,{className:"inline-block",label:i,secondaryLabel:l,side:"bottom",onOpenChange:h=>{h&&w.logEventWithStatsig("Composer Create Image Button Hovered","composer_create_image_button_hovered",{clientThreadId:t})},children:r})}function me(t){return t.formatMessage({id:"rh3NHv",defaultMessage:"Create image"})}async function kt(t=8,s=null){const d=await Ce.safeGet("/prompt_library/",{parameters:{query:{limit:t,use_v2:!0,model_slug:s}},authOption:Me.SendIfAvailable});return Ae.addFirstTiming("load.promptStarters"),d}function Nt(t=8,s=null){return mt({queryKey:["promptStarters",t,s],queryFn:()=>kt(t,s)})}function te(t){return(Ze(t)?t.promptStarters:t.gizmo.display.prompt_starters)?.map(s=>({type:C.Starter,title:"",body:s,prompt:s}))}const jt=()=>{const t=z(),s=Ne(t),d=at(),a=ot(nt),c=je(t),o=c?s.getLayer("4031588851"):s.getLayer("3533083032"),m=c?s.getLayer("4031588851",{disableExposureLog:!0}):s.getLayer("3533083032",{disableExposureLog:!0});return c?d==null?!1:Date.now()/1e3-d.created<m.get("new-user-age-seconds",14*24*60*60)&&o.get("web-enable-for-new-users",!1):a<m.get("new-user-message-count",20)&&o.get("web-enable-for-new-users",!1)},Ft=({clientThreadId:t,limit:s,shouldBeEnabledForDefaultAssistant:d,isModelLoaded:a,modelSlug:c})=>{const o=de(),m=ke(),u=$(),{clearAllSystemHintModeTriggers:n}=ue(),p=re(t,f=>f?.mode),g=et(p?.kind===ie.GizmoInteraction?p.gizmo_id:void 0).data,{gizmoEditorData:x,mode:r}=tt(),i=jt(),l=st(p),h=ne(),v=i&&d&&!l&&!h?.isEnterprisey(),{data:b,isSuccess:k}=dt({...Nt(s,c),enabled:v});if(m==null)return{promptStarters:[],isLoading:!0,isSuccess:!1};if(r==="test"&&x)return{promptStarters:te(x)??[],isLoading:!1,isSuccess:!0};if(g!=null)return{promptStarters:te(g),isLoading:!1,isSuccess:!0};if(!v)return{promptStarters:[],isLoading:!1,isSuccess:!0};const N=b?.items.map(f=>({type:C.Starter,id:f.id,title:f.title,body:f.description,prompt:f.prompt,category:f.category,oneliner:f.oneliner,theme:f.theme,requires_file_upload:f.requires_file_upload}))??[],M=(f,_,W,V)=>{if(_.type===C.Starter&&_.category==="dalle"){requestAnimationFrame(()=>{n(),o.addSystemHint(R.PictureV2,me(u)),o.focus()}),o.setAutocompletions(Q(u));return}const O=_.title;o.setAutocompletions([]),o.focus(),o.setText(O),requestAnimationFrame(()=>{const I=N.filter(S=>S.theme===_.theme).map(S=>{const q=we(S.oneliner),X=q.startsWith(S.title);return{...S,title:X?`${S.title} `:"",body:X?S.body:q,autocompletionChunks:yt(O,q),type:C.Autocomplete}});o.setAutocompletions(I),I.length>0&&rt(I,t),it(_,V,t)})},L=N?.reduce((f,_)=>(_.theme&&!f[_.theme]&&(f[_.theme]=_),f),{}),E=[];if(L)for(const f in L)f!=="For you"&&E.push(L[f]);const P=E.length>0,T=!!(k&&P&&a);return U.markStart("StarterPromptChips",U.NS_COMPOSER),T&&U.markRendered("StarterPromptChips",U.NS_COMPOSER),{onSelectStarterPrompt:M,shouldShowStarterPrompts:T,promptStarters:E}};export{Bt as A,St as C,Ht as I,Pt as N,Et as a,Q as b,Ot as c,Ft as d,te as g,Tt as u};
//# sourceMappingURL=g1x7jf9g2b4osi6b.js.map
