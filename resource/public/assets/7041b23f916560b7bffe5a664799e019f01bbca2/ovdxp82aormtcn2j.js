import{eo as f,g as P,o as _,aj as T,cW as x,bB as y,aL as k}from"./n9zp7vm10xoipejo.js";import{r as c,j as i,C as w}from"./lip667d8t42poxum.js";import{m as u}from"./nc6572sivljsjb83.js";import{R as C}from"./fcfjbsbarhrilkf6.js";import{C as l}from"./fu7jz6k4fpow8yui.js";import{P as W,a as b}from"./kdkl0k5zipatley9.js";import{u as v,W as I}from"./8jh1d59j0bidwcwx.js";import{c as g}from"./ojvadmnty96xvqkr.js";import"./l4oo5ijw01fyrjzs.js";import"./nmzcjggnos81a3wt.js";import"./ezoyp421dng92ve4.js";import"./krf7zg7fy4qqowqq.js";import"./j385t288u9l3nf6j.js";import"./ocylzx9oqlg8ycwm.js";import"./j1bb88glgmel43br.js";import"./n7emuv1efbtdnxb9.js";import"./ef49rx2y546x1g51.js";import"./d61ttkht2554hc14.js";import"./iguubsmy82ykz2l9.js";import"./ex0w8u6azfclal10.js";import"./jilfkjkciycvhk2x.js";import"./f64hg6fdq8ojkhjz.js";import"./ju8q15l0hqy6ti9z.js";import"./gydkbc6xtfcf9567.js";import"./btgi4ch9w5xby7vu.js";import"./es0z9v8doc0hgjd4.js";import"./jpfsl7zlesohw8kt.js";import"./ctz8d92lx4gyhixb.js";import"./cg71y7d9v77500qa.js";import"./g1wxldf6nb3zk37x.js";import"./iw1z7t3hfai34563.js";import"./g1x7jf9g2b4osi6b.js";import"./czpmep8a1gn2yxp9.js";import"./n4y4yo9zuw99bnsn.js";import"./cbaql59zac1mfnmh.js";import"./op1xowyjquc2dnq7.js";import"./oour34cwuwf9tyoh.js";import"./fcstnnugjba7r74i.js";import"./n0pa7j0wpnznnwf7.js";import"./h2xyil3hz732ienl.js";import"./n8h67w4b99r4iqjn.js";import"./nexm4ijmv6vpe660.js";import"./o0md5hhsc34wyah3.js";import"./mcbptdo34ig6awmf.js";import"./k1r8zdqpavwsddzj.js";import"./m5nmfgkx7kb16kea.js";import"./frsgt7dup0f3mfs8.js";import"./jrbfupmnwi0b2in6.js";import"./h5ge3c3mruoe76ro.js";import"./flqsbet8wo14mte0.js";import"./dih8dferf1paqxo1.js";import"./hdusgp6ndfp1vzue.js";import"./bir4gwnbq17hkvt3.js";import"./fn4w95puq6zt7u0n.js";import"./gssjqrozvzmyjg6o.js";import"./fw89hpm6ehbsygz7.js";import"./oe646f7iouawgq3e.js";import"./ls58p44u0ovqzhvw.js";import"./d7qhj0hizrl5q10d.js";import"./xbx5ij165jfnp313.js";import"./oc4rktd8eofx28ec.js";import"./h6u5tn9ugd2tunyc.js";import"./pb0xfopp3f7joxj4.js";import"./m27zu1gl0gszchhw.js";import"./s0vortm3fnmb5s99.js";import"./bz6kdye13oi6n32b.js";import"./b2byc8rvxtjtrqes.js";function S(e){if(e.post.attachments[0].kind!=="codex")return{task:void 0,turns:void 0};const r=e.post.attachments[0];return{task:r.task,fetchedTurns:r.turns,current_user_turn:r.current_user_turn,current_assistant_turn:r.current_assistant_turn,current_diff_task_turn:r.current_diff_task_turn}}function j({postWithProfile:e}){const r=g(m=>m.addTurnToTaskMap),{task:t,fetchedTurns:o,current_user_turn:n,current_assistant_turn:s,current_diff_task_turn:a}=S(e),{focusedAssistantTurn:d,setFocusedAssistantTurnId:h}=v({taskId:t?.id,task:t,currentDiffTaskTurn:a??null,currentUserTurn:n??null,currentAssistantTurn:s??null});c.useEffect(()=>{Object.values(o?.turn_mapping??{}).forEach(m=>{r(t?.id??"",m.turn)})},[o,r,t]);const p=g(({getTurnsForTask:m})=>t?m(t.id):[]);return!t||!p?null:i.jsx(I,{permissions:"read",taskId:t.id,turnId:s?.id??"",task:t,focusedAssistantTurn:d,pastTurns:p,setFocusedAssistantTurnId:h,canFollowUp:!1,lastTurnWithDiffId:a?.id??"",onEscape:()=>{}})}const Xt=f(function(){const r=w();return r.kind==="forbidden"?i.jsx(O,{chatPageProps:r.chatPageProps,reason:"workspace"}):i.jsx(E,{loaderData:r})});function E({loaderData:e}){c.useEffect(()=>{T.logEventWithStatsig("Share Post: Shared Post Page Viewed","chatgpt_share_post_page_viewed",{post_id:e.postWithProfile.post.id,primary_attachment_type:e.postWithProfile.post.attachments?.[0]?.kind,referrer:e.referrer})},[e]);const r=c.useMemo(()=>{const t=x();return y.initThread(t,{kind:k.PrimaryAssistant}),t},[]);return e.postWithProfile.post.attachments?.[0]?.kind==="deep_research"&&e.postWithProfile.post.attachments[0].tags?.includes("deep_research")?i.jsx(C,{postWithProfile:e.postWithProfile,threadId:r}):e.postWithProfile.post.attachments?.[0]?.kind==="codex"?i.jsx(j,{postWithProfile:e.postWithProfile}):i.jsx(z,{postWithProfile:e.postWithProfile,chatPageProps:e.chatPageProps})}function R(e){return{url:`https://ogimg.chatgpt.com/?postId=${e}`,size:[1200,630]}}function A(e,r){if(!e.attachments||e.attachments.length===0)return{url:u.src};const t=e.attachments[0];switch(t.kind){case"media_generation":{const o=t.encodings?.md?.path?{url:t.encodings.md.path,size:[t.width,t.height]}:void 0,n=t.encodings?.unfurl?.path?{url:t.encodings.unfurl.path,size:[1200,630]}:void 0,s=t.encodings?.thumbnail?.path?{url:t.encodings.thumbnail.path}:void 0,a={url:t.url,size:[t.width,t.height]};return r&&o!=null?o:n??s??a}default:return{url:u.src}}}function G(e){const r=e.text?.trim();if(r)return r;const t=e.attachments?.[0];return t?.kind==="media_generation"&&t.title?.trim()?t.title.trim():"Shared Content"}const Yt=({data:e})=>{const r=e,t={name:"robots",content:"noindex,nofollow"};if(!r||r.kind==="forbidden"){const p="Privately Shared Content";return[{title:`ChatGPT - ${p}`},t,{property:"og:site_name",content:"ChatGPT"},{property:"og:title",content:p},{property:"og:type",content:"website"},{property:"og:image",content:u.src},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:image",content:u.src},{name:"twitter:site",content:"@ChatGPTapp"},{name:"twitter:title",content:p}]}const{post:o}=r.postWithProfile,n=r.enforceRenderedOgImg?R(o.id):A(o,r.preferIntrinsicAspectRatioForOgImage),s=G(o),a=o.permalink,d=new Date(o.posted_at*1e3).toISOString();return[{title:`ChatGPT - ${s}`},t,{property:"og:site_name",content:"ChatGPT"},{property:"og:type",content:"article"},{property:"og:url",content:a},{property:"og:title",content:s},{property:"og:locale",content:"en_US"},{property:"og:image",content:n.url},{property:"og:image:secure_url",content:n.url},...n.size?[{property:"og:image:width",content:n.size[0]},{property:"og:image:height",content:n.size[1]}]:[],{property:"og:image:alt",content:"Preview of shared ChatGPT content"},{property:"article:published_time",content:d},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"@ChatGPTapp"},{name:"twitter:title",content:s},{name:"twitter:image",content:n.url},{name:"twitter:image:alt",content:"Preview of shared ChatGPT content"}]};function O({chatPageProps:e,reason:r}){const t=P();return c.useEffect(()=>{_(t,W,{reason:r})},[]),i.jsx(l,{...e})}function z({postWithProfile:e,chatPageProps:r}){return i.jsx(b.Provider,{value:{postWithProfile:e},children:i.jsx(l,{...r})})}export{Xt as default,Yt as meta};
//# sourceMappingURL=ovdxp82aormtcn2j.js.map
