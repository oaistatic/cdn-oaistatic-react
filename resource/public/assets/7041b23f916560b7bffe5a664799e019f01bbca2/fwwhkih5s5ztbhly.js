import{eo as R,cT as g,fN as E,db as M,aL as F,bB as T,cb as B,bL as D}from"./n9zp7vm10xoipejo.js";import{D as L,p as N,d as O,r as o,a as A,j as e}from"./lip667d8t42poxum.js";import{r as H,t as y,a as l,u as _,s as k,C as b,b as Q,g as j,P as $,T as q,c as K,d as V}from"./l4oo5ijw01fyrjzs.js";import{C as G}from"./knkf8s9jgm6dk4eu.js";import{T as W,C as z}from"./ewdsmj9e3ix90219.js";import{g as J}from"./ih9k1uv73hv8ykht.js";import{C as w,T as U}from"./l93ryxq3tn95q8jd.js";import{C as X}from"./nmzcjggnos81a3wt.js";import"./jy1u8exw8iz2slve.js";import"./gy64pge8qevmvg7e.js";import"./fgib8os5mzfls06e.js";import"./18qxc8hgbxoxyv64.js";import"./bir4gwnbq17hkvt3.js";import"./ef49rx2y546x1g51.js";import"./kweqtgafphozzl00.js";import"./ezoyp421dng92ve4.js";import"./krf7zg7fy4qqowqq.js";import"./j385t288u9l3nf6j.js";import"./d5srgqurg48kxugz.js";import"./j8vdq5u0dah3tad5.js";import"./eef33l65z4kyipsv.js";import"./ju8q15l0hqy6ti9z.js";import"./joi56n2i6g6stgfp.js";import"./d7qhj0hizrl5q10d.js";import"./bk8slwxjkdlmxjxm.js";import"./h6u5tn9ugd2tunyc.js";import"./pb0xfopp3f7joxj4.js";import"./n4y4yo9zuw99bnsn.js";import"./cbaql59zac1mfnmh.js";import"./op1xowyjquc2dnq7.js";import"./oour34cwuwf9tyoh.js";import"./czpmep8a1gn2yxp9.js";import"./g1x7jf9g2b4osi6b.js";import"./kdkl0k5zipatley9.js";import"./gydkbc6xtfcf9567.js";const Le=()=>(H(),null),Ne=R(function(){const r=L(),[s]=N(),u=O(),p=y(r.conversationId),i=l(s.get("readonly"),!1),c=l(s.get("isFullScreen"),!1),d=l(s.get("header"),!0),m=l(s.get("appPreview"),!1),a=g(()=>E()),C=g(()=>M()),P=l(s.get("hideBottomComposer"),!!i),n=y(r.canmoreId),t=p,f=_();o.useEffect(()=>{k({type:b.Textdoc,textdocId:n})},[n]),Q(t,{kind:F.PrimaryAssistant});const h=A();if(o.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),T.releaseThread(t)}),[t,h]),o.useEffect(()=>{n||u("/")},[n,u]),o.useEffect(()=>{j().sendMessage({type:w.Loaded})},[n]),!n||f?.type!==b.Textdoc)return null;const S=()=>{j().sendMessage({type:w.Close})},I=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx($,{clientThreadId:t,children:e.jsx(X,{clientThreadId:t,children:e.jsx(q,{clientThreadId:t,children:m?e.jsx(B,{children:e.jsx(Y,{textdocId:f.textdocId})}):I?e.jsxs(e.Fragment,{children:[e.jsx(W,{clientThreadId:t,disableScroll:!a,textdocId:f.textdocId}),e.jsx(z,{})]}):e.jsx(U,{isEmbedded:!0,hideRunCode:!a,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:i,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:S},"textdocContent")})})})]})}),Y=({textdocId:x})=>{const r=o.useRef(null),s=K(x),[u,p]=o.useState(!1),i=s?.versions??[],c=D(i),d=o.useCallback(V(async m=>{const a=J(m.type,m.content);if(r.current&&(a==="react"||a==="html")){p(!0);const v=r.current.evalAsync({language:a,code:m.content});for await(const C of v)console.debug(C)}p(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(G,{visuallyHidden:!u,ref:r,enableTransition:!0,title:""})};export{Le as clientLoader,Ne as default};
//# sourceMappingURL=fwwhkih5s5ztbhly.js.map
