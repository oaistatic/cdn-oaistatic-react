import{fS as v,aj as B,at as K,m as D,g as w,dJ as L,d1 as T,fT as x,fU as z,fV as E,ag as R,aX as F,aa as O,cj as G,b9 as I,o as P,fN as U,fW as V}from"./n9zp7vm10xoipejo.js";import{K as e,w as a,x as Z,y as N,z as j,A as H,E as J,U as M,G as W,H as C,J as _}from"./l4oo5ijw01fyrjzs.js";import{c as X}from"./op1xowyjquc2dnq7.js";import{r as $,g as q}from"./lip667d8t42poxum.js";const Q=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function h(){return U()||V()}const Y={[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"};function ee(o){switch(o){case e.Mod:return h()?"⌘":"Ctrl";case e.Meta:return h()?"⌘":"Win";default:return Y[o]}}const ce=o=>o.map(t=>ee(t)??t),n=q({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),de=new v,oe=({ctx:o,resetThreadAction:t,clientThreadId:s,focusPromptTextareaAction:i,toaster:r,isFannyPackEnabled:g,isZoomEnabled:c,isElectronClient:l})=>{const y=l?[[e.Mod,"n"]]:[];return[{key:"newChat",action:t||T,actionMessageDescriptor:n.newChat,group:a.Core,keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:g?[...y]:[...y,[e.Mod,"k"]]},{key:"focusPromptTextarea",action:i??J,actionMessageDescriptor:n.focusPromptTextarea,group:a.Chat,keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:d=>{if(s!=null){const f=R.getConversationTurns(F(s));for(let p=f.length-1;p>=0;p--){const{messages:S}=f[p],b=[...S.reduce((k,u)=>u.clientMetadata?.err==null&&u.author.role===O.Assistant&&u.recipient==="all"?k+(k?`

`:"")+G(u):k,"").matchAll(Q)],m=b.length?b[b.length-1][1]:null;if(m!=null){W(m,r,d).then(()=>{r.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:n.copyLastCodeBlock,group:a.Chat,keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:d=>{s!=null&&X(o,s,r,d,"keyboard").then(()=>{r.success("Last response copied to clipboard")})},actionMessageDescriptor:n.copyLastResponse,group:a.Chat,keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>M.toggleModal(C.UserContext),actionMessageDescriptor:n.toggleCustomInstructions,group:a.Settings,keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>{M.setSidebarOpen(void 0)},actionMessageDescriptor:n.navigationToggle,group:a.Core,keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(s){const d=I(s);d&&P(o,_,{serverThreadId:d,isActiveConversation:!0})}},actionMessageDescriptor:n.deleteChat,group:a.Chat,keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"zoomIn",enabled:c,action:()=>x(),actionMessageDescriptor:n.zoomIn,group:a.Chat,keyboardBinding:[e.Mod,"+"],altKeyboardBindings:[[e.Mod,"="]]},{key:"zoomOut",enabled:c,action:()=>z(),actionMessageDescriptor:n.zoomOut,group:a.Chat,keyboardBinding:[e.Mod,"-"]},{key:"resetZoom",enabled:c,action:()=>E(),actionMessageDescriptor:n.resetZoom,group:a.Chat,keyboardBinding:[e.Mod,"0"]},{key:"toggleKeyboardActions",action:()=>M.toggleModal(C.KeyboardActions),actionMessageDescriptor:n.toggleKeyboardActions,group:a.Settings,keyboardBinding:[e.Mod,"/"]}]},A=o=>Z(o,t=>{B.logEvent("Keyboard Shortcut",{keyboardActionKey:t.key}),K.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:t.key})},{enabled:!0}),te=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s}={})=>{const i=D(),{isFannyPackEnabled:r}=j(),g=H(),c=L,l=w();return $.useMemo(()=>oe({ctx:l,resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s,toaster:i,isElectronClient:g,isFannyPackEnabled:r,isZoomEnabled:c}).filter(({enabled:d=!0})=>d),[l,o,t,s,i,g,r,c])},ge=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s})=>{const i=te({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:s}),g=N(c=>c.isVoiceActive)?[]:i;A(g)},le=({setSelectedVoiceIndex:o,prevVoiceIndex:t,nextVoiceIndex:s})=>{const i=[{key:"selectPrevVoice",action:()=>{o(t)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:a.Chat,keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{o(s)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:a.Chat,keyboardBinding:[e.ArrowRight]}];A(i)};export{de as G,ge as a,le as b,ce as g,h as i,te as u};
//# sourceMappingURL=cbaql59zac1mfnmh.js.map
