const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/luqirpb2igok6itg.js","assets/lip667d8t42poxum.js","assets/n9zp7vm10xoipejo.js","assets/root-ivmjnum3.css","assets/gmg4f76de7ujolht.js","assets/ix1dk8b28avfqult.js","assets/l4oo5ijw01fyrjzs.js","assets/conversation-small-k5k9c71c.css","assets/m4yzvnzgt0o72mgz.js","assets/fmzspjifqoyfsqmq.js","assets/gm6fahdowej3shay.js","assets/n4y4yo9zuw99bnsn.js","assets/cbaql59zac1mfnmh.js","assets/op1xowyjquc2dnq7.js","assets/nmzcjggnos81a3wt.js","assets/ezoyp421dng92ve4.js","assets/krf7zg7fy4qqowqq.js","assets/j385t288u9l3nf6j.js","assets/oour34cwuwf9tyoh.js","assets/czpmep8a1gn2yxp9.js","assets/g1x7jf9g2b4osi6b.js","assets/kdkl0k5zipatley9.js","assets/j95gto42a661coof.js","assets/ku1zypzyg69oalx4.js","assets/wucpx17vpkipp1k3.js","assets/j7n25qhd1j4b3hrq.js","assets/hrvx7tghyutv8dp4.js","assets/euq7ybw4dhrsufo2.js"])))=>i.map(i=>d[i]);
import{af as Ke,f8 as aa,c as E,aj as U,aX as sa,B as Ae,W as Ye,g as Re,j as oa,aG as na,o as ia,as as ve,gP as ra,aI as B,aJ as H,ai as bt,bC as St,u as la,aV as wt,c2 as xe,go as ca,c6 as ee,c7 as te,c4 as dt,c5 as ut,ae as pe,ao as Ze,ca as da,b as Ct,d as ua,p as Ee,dj as Je,cc as ha,dg as jt,s as Mt,X as _t,_ as Nt,ba as Be,ec as ga,e as ma,bQ as pa,bU as fa,at as ht,ha as xa,ah as ya,gt as va,eJ as ba,aL as Sa,ad as wa,eU as Ca,cb as ja,aY as Ma,ag as ae,gG as _a}from"./n9zp7vm10xoipejo.js";import{r,d as Xe,a as et,j as e,a5 as Qe,M as L,f as q,g as kt,l as Na,L as ka,u as Ta,v as Aa,R as Ea,p as Pa}from"./lip667d8t42poxum.js";import{u as Tt,P as Ia}from"./ezoyp421dng92ve4.js";import{C as tt,u as at,d as be}from"./nmzcjggnos81a3wt.js";import{g0 as At,oO as Se,jL as Ra,db as La,nC as Et,jN as Wa,jO as Pt,jQ as Oa,i as gt,jP as Ha,oP as Ga,l0 as Da,by as mt,oQ as Ua,bo as Fa,gS as It,du as Va,dv as za,oR as qa,oS as Te,an as fe,ky as Fe,eN as Ya,f3 as Ba,fe as Qa,bx as $a,bm as Ka,dw as Za,t as $e,oT as Ja,dx as Xa,P as Rt,F as es,gU as Lt,oU as Wt,oV as pt,oW as ts,oX as as,oY as st,V as Ot,oZ as ss,c1 as os,o_ as ye,e as Ht,fJ as ns,fw as is,U as Pe,H as rs,o$ as ls,p0 as cs,gP as ds,gR as us,gT as hs,p1 as ft,p2 as gs,ae as Gt,p3 as ms,W as ps,p4 as fs,p5 as xs,p6 as ys,p7 as vs,lx as bs,fz as Ss,dj as ws,io as Dt,p8 as Cs,kP as T,a$ as R,iv as js,p9 as Ms,iu as _s,cw as Ut,cX as Ns,pa as ks,kY as xt,d as Ts,pb as As,pc as Es,pd as Ps,pe as Is,y as Ft,eO as Rs,M as ot,u as Ls,pf as Vt,e6 as Ws,pg as Os,O as Hs,ph as Gs,gZ as Ds,pi as Us,fQ as Fs,pj as Vs,hU as zs,h1 as qs,h2 as yt,ht as Ys,Q as Bs,h0 as Qs,pk as $s,de as Ks,lT as Zs,gY as Js,pl as Xs,pm as Ve,pn as eo,po as to,fq as ao,pp as so,kr as zt,pq as oo,pr as no,ps as io,mQ as ro,jc as lo,pt as co,pu as uo,pv as ho,pw as go,px as mo,py as po,pz as fo,pA as xo,pB as yo,pC as vo,pD as bo,pE as So,pF as wo}from"./l4oo5ijw01fyrjzs.js";import{C as Co,N as jo,g as Mo}from"./n4y4yo9zuw99bnsn.js";import{b as _o}from"./g1wxldf6nb3zk37x.js";import{u as No,b as ko}from"./kdkl0k5zipatley9.js";import{I as To,P as Ao,M as Eo,F as Po,T as Io}from"./m5nmfgkx7kb16kea.js";import{b as Ro}from"./g1x7jf9g2b4osi6b.js";import{T as Lo}from"./hdusgp6ndfp1vzue.js";import"./bir4gwnbq17hkvt3.js";const Wo=({assetPointer:t,isInFocusMode$:a,serverThreadId:o,transformationId:i,width:s,height:n,onEdit:l})=>{const c=At(),[g,y]=r.useState(!1),[b]=Ke(o,u=>[u?.modelId]),m=Tt(o),w=Se(),p=Xe(),h=et(),d=r.useRef(null);r.useEffect(()=>{To.prefetch()},[]),r.useEffect(()=>{y(!1),a?.set(!1)},[t,a]),r.useEffect(()=>aa(()=>{a&&!a()&&y(!1)}),[a]),Ra(r.useMemo(()=>({image:{asset_pointer:t,metadata:{dalle:{gen_id:i},generation:{gen_id:i}},height:n,width:s},currentDrawnShape:null,onCleared:()=>{},getImageData:()=>{}}),[i,t,n,s]));const S=u=>{w.transitionToPage({type:"conversation",value:void 0},()=>{l?.(),Da(p,h,o,void 0,!0),m(u)})},x=La();return e.jsx(Et,{children:e.jsx(Qe.div,{layout:!c,transition:{type:"spring",duration:.2},className:E(g?"w-full rounded-3xl":"mx-auto rounded-full"),children:g?e.jsx(Wa,{value:{isImageGenEditor:!0,isInpainting:!1,onCancelInpaint:()=>{}},children:e.jsx(tt,{clientThreadId:o,children:e.jsx(Ao,{clientThreadId:o,currentModelId:b??Pt(void 0).id,disableDraftPersistence:!0,onRequestCompletion:async u=>{a?.set(!1),U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_edit_submitted","chatgpt_web_image_library_lightbox_image_edit_submitted"),sa(o)==null&&await(d.current??gt(o)),S(await Ha(u))},onContinueGenerating:u=>S(Oa(u)),hideHeader:!0,isNewThread:!1})})}):e.jsx(Ae,{color:"secondary",size:x?"large":void 0,className:"px-4 max-md:min-w-[50vw]",onClick:()=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_composer_opened","chatgpt_web_image_library_lightbox_image_composer_opened"),y(!0),a?.set(!0),d.current=gt(o).finally(()=>{d.current=null})},icon:x?void 0:Ga,children:e.jsx(Qe.div,{initial:c?!1:{opacity:0},animate:{opacity:1},children:e.jsx(L,{id:"BD4ZLh",defaultMessage:"Edit image"})})})})})},Oo=({assetPointer:t,serverThreadId:a,messageId:o})=>{const i=q(),[s,n]=r.useState(!1),l=No({assetPointer:t,clientThreadId:a,imageGenMessageId:o}),c=r.useCallback(async()=>{n(!0);try{await l()}finally{n(!1)}U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_share_clicked","chatgpt_web_image_library_lightbox_image_share_clicked")},[l]),g=i.formatMessage({id:"lqgWN2",defaultMessage:"Share"});return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"max-md:hidden",color:"secondary",icon:s?Ye:mt,onClick:c,disabled:s,children:g}),e.jsx(Ae,{color:"ghost",className:"text-token-text-secondary w-10 md:hidden",icon:s?Ye:mt,size:"xl",onClick:c,label:g,disabled:s})]})},Ho=({initialIndex:t,includeArchived:a,onScrollToEnd:o,onClose:i})=>{const s=q(),n=Re(),l=oa(n).checkGate("1520205231"),{archiveMutation:c}=Ua(a),g=Fa(),[y]=r.useState(()=>na(!1)),b=Se(),m=Xe(),{images:w}=It(a);return e.jsxs(Va,{imageList:w,initialIndex:t??0,onClose:i,isInFocusMode$:y,onScrollToEnd:o,children:[e.jsx(za,{children:({title:p,createdAt:h})=>e.jsxs("div",{className:"flex min-h-12 min-w-0 flex-col items-center max-md:h-full",children:[e.jsx("h2",{className:"text-token-text-primary max-w-full min-w-0 grow justify-center self-start truncate text-base text-balance max-md:flex max-md:items-center max-md:ps-2",children:e.jsx("span",{className:"line-clamp-2",children:p??e.jsx(L,{id:"OIDfvR",defaultMessage:"Image Generation"})})}),h&&e.jsx("span",{className:"text-token-text-secondary text-sm max-md:hidden",children:h.toDateString()})]})}),e.jsxs(qa,{children:[e.jsx(Te,{children:({conversationId:p,messageId:h})=>e.jsx(fe,{label:s.formatMessage(z.openInChat),children:e.jsx(Fe,{className:"aspect-square",icon:Ya,onClick:d=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),d.preventDefault(),b.addClassToCurrentTransition(["from-lightbox","to-conversation"]),b.transitionToPage({type:"conversation",value:void 0},async()=>{i(null),await m(`/c/${p}?message=${h}`,{preventScrollReset:!0})})},"aria-label":s.formatMessage(z.openInChat)})})}),l&&e.jsx(Te,{children:({id:p,archived:h})=>e.jsx(fe,{label:s.formatMessage(h?z.unarchive:z.archive),children:e.jsx(Fe,{className:"aspect-square",icon:h?Qa:Ba,onClick:()=>{U.logEventWithStatsig(h?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked",h?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked"),c.mutate({imageId:p,operation:h?"unarchive":"archive"})},"aria-label":s.formatMessage(h?z.unarchive:z.archive)})})}),e.jsx(Te,{children:({url:p,title:h})=>e.jsx(fe,{label:s.formatMessage(z.download),children:e.jsx(Fe,{className:"aspect-square",icon:$a,onClick:()=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),Ka({url:p,fileName:`${h??s.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"})}.png`})},"aria-label":s.formatMessage(z.download)})})}),g()&&e.jsx(Te,{children:({assetPointer:p,conversationId:h,messageId:d})=>!h||!d?null:e.jsx(Oo,{assetPointer:p,serverThreadId:h,messageId:d})})]}),e.jsx(Za,{children:({url:p,width:h,height:d,title:S,position:x})=>e.jsx("img",{className:Ja("bg-tertiary block h-fit max-h-full w-auto rounded-lg object-contain shadow-xl max-md:rounded-none max-md:shadow-none",x==="current"&&"[view-transition-name:var(--vt-active-image)]"),style:x&&x!=="current"?{viewTransitionName:`var(--vt-image-${x})`}:void 0,src:$e(p),width:h,tabIndex:0,height:d,alt:S??""})}),e.jsx(Xa,{children:({width:p,height:h,assetPointer:d,conversationId:S,transformationId:x})=>S&&d&&e.jsx(Wo,{isInFocusMode$:y,onEdit:()=>i(null),width:p,height:h,assetPointer:d,serverThreadId:S,transformationId:x})})]})},z=kt({download:{id:"Z23tMl",defaultMessage:"Download image"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"},archive:{id:"yOqxdz",defaultMessage:"Hide image"},unarchive:{id:"yEUKZl",defaultMessage:"Show image"}}),Go=({disableEntryAnimation:t=!1,hasMoreImages:a,count:o,images:i,includeArchived:s,isFetchingMore:n,onScrollToEnd:l})=>{const c=a?Math.max((o??0)-(i.length??0),0):0,[g,y]=r.useState(!1),[b,m]=r.useState(null),w=Se(),p=Re(),{clientThreadId:h}=at(),d=r.useCallback(S=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened"),y(!0),m(S),w.transitionToPage({type:"lightbox",value:void 0},()=>{ia(p,({closeModal:x})=>e.jsx(Rt,{clientThreadId:h,children:e.jsx(es,{children:e.jsx(Lt,{children:e.jsx(Ho,{includeArchived:s,onClose:u=>{if(u==null){x();return}Wt({update:()=>{x(),m(u),y(!0)},className:"from-lightbox",forceFlushSync:!0}).finished.then(()=>y(!1))},initialIndex:S,onScrollToEnd:l})})})})),y(!1)})},[h,p,s,l,w]);return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-4 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4",children:i.map(({url:S,thumbnail:x,width:u,height:M,title:_=null},k)=>e.jsx(pt,{disableEntryAnimation:t,index:k,active:g&&b===k,src:$e(S),onClick:d,thumbnail:$e(x),width:u,height:M,alt:_,children:k===i.length-1&&e.jsx(ts,{onScrollToEnd:l})},k)).concat(new Array(c).fill(null).map((S,x)=>{const u=i.length+x;return e.jsx(pt,{index:u,disableEntryAnimation:t,isPlaceholder:!0,active:!1},u)}))}),e.jsx("div",{className:"flex h-8 items-center justify-center",children:a&&n&&e.jsx(Ye,{})})]})};function Do(t){const{clientThreadId:a}=t;return e.jsx(tt,{clientThreadId:a,children:e.jsx(Fo,{...t})})}function Uo({clientThreadId:t,headlineOption:a,currentModelId:o,isModelLoaded:i}){const s=st(),n=os(),l=be(),{isFocused:c,autocompletions:g}=wt(l.store),y=c&&g.length>0,b=ye(),m=xe(b.isImageGenLandingPageEnabled$);return e.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:y?0:1},exit:{opacity:0},transition:{duration:.1},className:E("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden",n?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",y?"pointer-events-none":"",s?"@lg/thread:hidden":"lg:hidden"),children:[a==="CHATGPT_LOGO"?e.jsx(bt,{className:"inline-block h-12 w-12"}):e.jsx(qt,{headlineOption:a}),!m&&e.jsx(Eo,{isModelLoaded:i,currentModelId:o,clientThreadId:t})]})}function Fo({clientThreadId:t,currentModelId:a,isModelLoaded:o}){const i=be(),{isUnauthenticated:s}=ve();ra(),as(i);const{layer:n}=B("4031588851"),{layer:l}=B("3533083032",{shouldLogExposure:!1}),c=s?l:n,g=st(),y=c.get("headline_option","HELP_WITH"),w=Ot().has(H.Research)?N.deepResearchPlaceholder:void 0;return e.jsxs("div",{className:E("flex items-center justify-center",g?"@lg/thread:items-end":"lg:items-end"),children:[e.jsx("div",{className:E("mb-7 hidden text-center @lg/thread:block",g?"@lg/thread:block":"lg:block"),children:y==="CHATGPT_LOGO"?e.jsx(bt,{className:"inline-block h-12 w-12"}):e.jsx(qt,{headlineOption:y,overrideMessage:w})}),e.jsx(Uo,{headlineOption:y,clientThreadId:t,isModelLoaded:o,currentModelId:a})]})}function Vo({headlineOption:t,overrideMessage:a}){function o({name:u}){return e.jsx(fe,{label:n.formatMessage(N.editNicknameTooltip),delayDuration:300,side:"top",children:e.jsx("button",{onClick:()=>{Pe.setAutoHighlightNicknameInput(!0),Pe.openModal(rs.UserContext)},style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:M=>{M.currentTarget.className="text-token-text-secondary"},onMouseLeave:M=>{M.currentTarget.className="text-inherit"},children:u})})}function i(){const u=[],M=[];u.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),M.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...u);const _=M[Math.floor(Math.random()*M.length)],A=`${u[Math.floor(Math.random()*u.length)]} | ${_}`;ee.setCookie(te.headlineMessage,A)}function s(){const u=ee.getCookie(te.GreetingName),_=ee.getCookie(te.headlineMessage)?.split("|"),k=_?.[0]?.trim(),A=_?.[1]?.trim();return{cookieName:u,isReadyForPersonalized:!!u&&u.length<=c,headline:k,namedHeadline:A}}const n=q(),{layer:l}=B("1704793646"),c=l.get("name_char_limit",20),[g,y]=r.useState(s),{isUnauthenticated:b}=ve(),m=Ht(),p=ns(!b&&!!m)?.data,h=is(),d=l.get("greeting_web",!1),S=l.get("full_name_llm",!1);r.useEffect(()=>{if(d&&h){if(m&&p){const u=ca(p,m,S);ee.setCookie(te.GreetingName,u),dt.count(ut.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}i()}else ee.deleteCookie(te.GreetingName),ee.deleteCookie(te.headlineMessage)},[p,m,d,S,h]),r.useEffect(()=>{const u=()=>{if(d&&h){const{cookieName:M,isReadyForPersonalized:_}=s();y(k=>({...k,cookieName:M,isReadyForPersonalized:_}))}};return window.addEventListener("refreshGreeting",u),()=>window.removeEventListener("refreshGreeting",u)}),r.useEffect(()=>{d&&h&&dt.count(ut.MOONSHINE,"splashScreenV2.greeting_shown_web")},[d,h]);let x;return a?x=n.formatMessage(a):g.isReadyForPersonalized&&d?x=e.jsx(e.Fragment,{children:e.jsx(L,{...ze[g.namedHeadline??t].withName,values:{name:e.jsx(o,{name:g.cookieName??""},"name")}})}):d?x=n.formatMessage(ze[g.headline??t].original):x=n.formatMessage(ze[t].original),x}function qt({headlineOption:t,overrideMessage:a}){const o=St(),i=r.useRef(null),[s,n]=r.useState({isTempChatVisible:o,titleTranslate:0});return la(()=>{n({isTempChatVisible:o,titleTranslate:o?-((i.current?.offsetHeight??0)-40):0})},[o]),e.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:e.jsx("div",{children:e.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:{viewTransitionName:"var(--vt-splash-screen-headline)"},children:[e.jsx("h1",{className:E("inline-flex min-h-10.5 items-baseline text-[28px] leading-[34px] font-normal tracking-[0.38px] whitespace-pre-wrap motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",s.isTempChatVisible?"invisible opacity-0":"opacity-100"),"aria-hidden":o,style:{transform:`translateY(${s.titleTranslate}px)`},children:e.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:e.jsx(Vo,{headlineOption:t,overrideMessage:a})})}),e.jsx("div",{className:E("absolute bottom-0 motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",s.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-10 opacity-0"),"aria-hidden":!o,ref:i,children:e.jsx(ss,{})})]})})})}const N=kt({whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"}}),ze={HELP_WITH:{original:N.whatCanIHelpWith,withName:N.whatCanIHelpWithWithName},WHERE_TO_START:{original:N.whereShouldWeStart,withName:N.whereShouldWeStartWithName},ASK_CHATGPT:{original:N.askChatgptAnything,withName:N.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:N.howCanIHelp,withName:N.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:N.goodToSeeYouWithName,withName:N.goodToSeeYouWithName},DIVE_IN:{original:N.diveInWithName,withName:N.diveInWithName},READY_WHEN_YOU_ARE:{original:N.readyWhenYouAre,withName:N.readyWhenYouAre},ON_YOUR_MIND:{original:N.onYourMind,withName:N.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:N.whatAreYouWorkingOn,withName:N.whatAreYouWorkingOn},AGENDA_TODAY:{original:N.agendaToday,withName:N.agendaToday},SHOULD_WE_BEGIN:{original:N.shouldWeBegin,withName:N.shouldWeBegin}};function zo({onClick:t}){return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("button",{onClick:t,"aria-labelledby":"upload-image-label",className:"relative",id:"upload-image-button",type:"button",children:e.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-main-surface-secondary border-token-border-default z-1 flex aspect-square items-center justify-center overflow-hidden rounded-2xl border p-5 text-xs transition-[transform_box-shadow] duration-[0.24s] select-none hover:motion-safe:scale-105",children:e.jsxs("div",{className:"text-token-text-tertiary inline-flex items-center justify-center",children:[e.jsx(gs,{"aria-label":"",className:"h-12 w-12"}),e.jsx(Gt,{"aria-label":"",className:"absolute start-1/2 top-1/2 ms-1 mt-1 h-8 w-8"})]})})}),e.jsx("div",{id:"upload-image-label",className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:e.jsx(L,{id:"DJ+4dI",defaultMessage:"Upload an image"})})]})}function vt({card:t,className:a,label:o}){const{formatMessage:i}=q();return typeof t.url=="string"?e.jsx("img",{src:t.url,alt:i(t.prompt),className:a}):e.jsxs("picture",{className:a,children:[t.url.map(({type:s,url:n})=>s==="jpg"?null:e.jsx("source",{srcSet:n,type:`image/${s}`},n)),e.jsx("img",{"aria-label":o,src:t.url[0].url,alt:i(t.prompt),className:E(a,"h-full w-full object-cover")})]})}function qo({type:t,images:a,onClick:o}){const[i,s]=r.useState(0),{formatMessage:n}=q(),l=i+1>=a.length?0:i+1,c=a[i].prompt;return e.jsxs("div",{children:[e.jsxs("div",{className:"group/stack relative flex justify-center",children:[e.jsx("div",{onClick:()=>{const g=i+1>=a.length?0:i+1;s(g)},className:E("bg-token-bg-primary relative z-2 grid aspect-square h-full overflow-clip rounded-xl text-xs shadow-lg transition-transform duration-[0.24s]","group-hover/stack:-translate-x-2 group-hover/stack:rotate-[-3deg] group-hover/stack:shadow-md",a.length>1&&"cursor-pointer"),children:e.jsx(vt,{card:a[i],label:n(c)})},i),e.jsx("div",{className:E("ease-in-expo ease-spring-standard absolute top-0 left-0! flex aspect-square w-full translate-y-2 rotate-[2deg] opacity-40 transition-transform duration-[0.24s]","group-hover/stack:translate-x-2 group-hover/stack:translate-y-[0px] group-hover/stack:rotate-[4deg]"),children:e.jsx(vt,{card:a[l],label:n(c),className:E(ms.fadeScale,"aspect-square w-full overflow-hidden rounded-xl shadow-xl")})},l),e.jsx("button",{id:n(c),onClick:()=>o(n(c)),tabIndex:0,className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-tertiary can-hover:z-0 absolute bottom-6 flex w-fit items-center justify-center rounded-full border px-3 py-1 text-sm shadow-md duration-[0.24s] group-hover/stack:z-11 focus-visible:z-11 active:scale-98 motion-safe:transition-[background-color,transform]",children:e.jsx(L,{id:"wk6Ayk",defaultMessage:"Try this prompt"})})]}),t&&e.jsx("div",{className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:n(t)})]})}function Yo({onCardClick:t,onUploadCardClick:a}){const{value:o}=pe("2640502720"),i=q(),n=Ze()?.isWorkspacePlan()?ls:cs,l=ye(),[c,g]=r.useState(!1),{images:y,hasNextPage:b,isLoading:m,isFetchingNextPage:w,fetchNextPage:p}=It(c),{data:h,isLoading:d}=ds(),S=be(),x=h?.images_count,u=!!x,M=!!h?.archived_images_count,k=!d&&!u,A=Na({id:"Gd9T7H",defaultMessage:"My Library"});return e.jsxs("div",{className:"mx-auto flex w-full flex-col items-center",children:[e.jsxs("div",{className:"my-6 grid w-full grid-cols-2 gap-4 gap-y-10 max-md:px-4 sm:grid-cols-3 md:grid-cols-4",children:[e.jsx(zo,{onClick:a}),n.map(f=>e.jsx(qo,{type:f.type,images:f.images,onClick:G=>{t(G),f.needsUpload&&l.showUploadSuggestion$.set(!0)}},String(f.type.defaultMessage)))]}),e.jsx("div",{className:E("z-50 mt-4 flex w-full items-center justify-between max-md:px-4",o&&"sticky top-[9px]"),children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex text-lg font-medium",children:e.jsx(L,{...A})}),u&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-token-text-tertiary flex gap-6 text-sm",children:e.jsx(L,{id:"Grwczz",defaultMessage:"{count, plural, =0 {No images} one {# image} other {# images}}",values:{count:x}})}),M&&e.jsx(us,{includeArchived:c,setIncludeArchived:g})]})]})}),!k&&e.jsx("div",{className:"mt-4 mb-6 w-full border-t max-md:mb-6 max-md:hidden"}),k&&e.jsx(hs,{onClick:()=>{const f=ft(n),G=ft(f?.images??[]);G&&t(i.formatMessage(G.prompt)),S.focus()}}),!k&&e.jsx("div",{className:"min-h-svh w-full max-md:px-4",children:e.jsx(Go,{count:x??0,images:y??[],includeArchived:c,hasMoreImages:b,isFetchingMore:w||m,onScrollToEnd:p})})]})}const Bo=({systemHint:t})=>{const{updateSystemHint:a}=ps(),o=Se(),{transitionToNextPage:i}=fs(),{clientThreadId:s}=at();r.useEffect(()=>{o.activeViewTransition&&o.signalTransitionReady()},[o]),r.useEffect(()=>{a(t,{clientThreadId:s})},[t,s,a]);let n=null;switch(t){case H.Canvas:n=e.jsx(L,{id:"4+tS2L",defaultMessage:"Write with canvas"});break;case H.PictureV2:n=e.jsx(L,{id:"QtMyOg",defaultMessage:"Make an image"});break;case H.Research:n=e.jsx(L,{id:"Rdax1G",defaultMessage:"Deep research"});break;default:n=e.jsx(L,{id:"UrTsbY",defaultMessage:"Unknown landing page"});break}return e.jsx(xs,{children:e.jsxs(ys,{className:"mt-[100px] flex flex-col items-center gap-6",children:[e.jsx(vs,{isBadge:!0,isLauncher:!1,systemHint:t,label:null}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{"data-landing-page-load-target":!0,className:"text-token-text-primary text-4xl font-medium tracking-tight [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:text-5xl",children:n}),e.jsxs(ka,{to:"/",viewTransition:!0,onClick:l=>{l.preventDefault(),i({path:"/",nextPageType:{type:"home",value:void 0},update:()=>{a(null,{clientThreadId:s})}})},className:"group text-token-text-tertiary flex items-center gap-1 text-sm",children:[e.jsx(bs,{className:"h-4 w-4",style:{display:"var(--is-ltr, block) var(--is-rtl, none)"}}),e.jsx(Ss,{className:"h-4 w-4",style:{display:"var(--is-ltr, none) var(--is-rtl, block)"}}),e.jsx("div",{className:"group-hover:underline",children:e.jsx(L,{id:"gdbtML",defaultMessage:"Back to ChatGPT home"})})]})]})]})})},Qo=({systemHint:t})=>{const a=be(),o=ye(),i=r.useCallback(w=>{a.setText(w),a.focus()},[a]);r.useEffect(()=>()=>{o.reset()},[o]);const s=r.useCallback(()=>{U.logEvent("Open File Viewer",{intent:ws.Multimodal.toString()}),a.openFileDialog()},[a]),{isImageGenLandingPageEnabled$:n,isAllPagesEnabled$:l}=ye(),c=xe(n),g=xe(l),b=t===H.PictureV2&&c;if(!g&&!b)return null;let m=null;switch(t){case H.Canvas:m=!1;break;case H.PictureV2:m=e.jsx(Yo,{onCardClick:i,onUploadCardClick:s});break;case H.Research:m=!1;break;default:m=e.jsx(L,{id:"JEsPH+",defaultMessage:"Unknown landing page {systemHint}",values:{systemHint:t}})}return m},$o=4,Ko=async({text:t,numCompletions:a,isUnauthenticated:o,isThreadUsingSearchMode:i=!1,autocompleteMode:s,activeSystemHint:n})=>{try{return(o?await Ee.generateAutocompletionsAnon(t,a,i,n):await Ee.generateAutocompletions(t,a,i,n)).completions.map(c=>({id:Aa(),type:R.Autocomplete,title:c.slice(0,t.length),body:c.slice(t.length),oneliner:c,prompt:c,source:s}))}catch{return[]}},Zo=()=>!1,Jo=({clientThreadId:t,composerController:a,isGizmoThread:o})=>{const i=wt(a.store,v=>v.showTaggingDropdown),s=Ot(),n=Array.from(s)[0],[l,c]=r.useState([]),[g,y]=r.useState([]);r.useRef(0);const{configurationMenuType:b}=Dt(),m=$o,[w,p]=r.useState(),h=b!=="none",d=r.useCallback(v=>{c(C=>{const I=typeof v=="function"?v(C):v;return da(I,C)?C:I})},[]),{trendingSuggestions:S,fetchTrendingSuggestions:x}=Xo(m),{isUnauthenticated:u}=ve(),M=Cs(),_=r.useCallback(v=>{const C=a.getCurrentText();return C&&qe(v).startsWith(C.toLocaleLowerCase())},[a]),k=r.useCallback(v=>{const C=a.getCurrentText(),I=v.title+v.body;return _(v)?{...v,title:C,body:I.slice(C.length)}:{...v,title:I,body:""}},[a,_]),A=r.useCallback((v=!1)=>{d(C=>!C.some(_)&&C.length>0?[]:v?C:C.map(k))},[_,k,d]),f=q(),G=r.useMemo(()=>({[T.Canvas]:[{type:R.Starter,title:f.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:f.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:T.Canvas},{type:R.Starter,title:f.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:f.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:T.Canvas},{type:R.Starter,title:f.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:f.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:T.Canvas},{type:R.Starter,title:f.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:f.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:T.Canvas}],[T.Image]:[{type:R.Starter,title:f.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:f.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:T.Image},{type:R.Starter,title:f.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:f.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:T.Image},{type:R.Starter,title:f.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:f.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:T.Image},{type:R.Starter,title:f.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:f.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:T.Image}],[T.ContextualAnswers]:[{type:R.Starter,title:f.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:f.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:e.jsx(js,{className:"h-full w-full"}),body:"",theme:T.ContextualAnswers},{type:R.Starter,title:f.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:f.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:e.jsx(Ms,{className:"h-full w-full"}),body:"",theme:T.ContextualAnswers},{type:R.Starter,title:f.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:f.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:e.jsx(_s,{className:"h-full w-full"}),body:"",theme:T.ContextualAnswers},{type:R.Starter,title:f.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:f.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:e.jsx(Ut,{className:"h-full w-full"}),body:"",theme:T.ContextualAnswers}]}),[f]),D=!!Ns(),Le=ks({exposed:D})==="autocomplete",Q=!(!D||!a.isEmpty()||!Le||o||![H.ContextualAnswers].includes(n)),{caSuggestions:se}=tn({skip:!Q});r.useEffect(()=>{Q&&d(v=>se.length>0?v.length>0&&!v.some(C=>C.theme===T.ContextualAnswers)?v:se:v.length>0?v:G[T.ContextualAnswers].slice(0,m))},[G,se,m,d,Q]),r.useEffect(()=>{const v=()=>{d(C=>C.filter(I=>I.theme!==T.Search&&I.theme!==T.Image))};if(a.getCurrentText()==="")if(M)S.length>0?d(S):x();else if(h&&n===H.PictureV2){const C=Ro(f);d(C)}else v();else v()},[l,a,x,M,d,S,n,f,h]),r.useEffect(()=>{M&&a.getCurrentText()===""&&S.length>0&&xt(S,t)},[M,a,S,t]);const oe=m-l.filter(_).length,F=sn(M),{layer:V}=B("4031588851"),ne=V.get("autocomplete_min_char",4),ie=V.get("autocomplete_fetch_interval",200),re=r.useRef(null),we=r.useCallback(Ts(async v=>{const C=a.getCurrentText();if(!C||C.length<ne||C.length>80||a.hasMultipleLines()){d([]);return}if(!i&&!(re.current&&re.current.length>ne&&C.startsWith(re.current)))try{const I=(await Ko({text:C,numCompletions:v,isUnauthenticated:u,isThreadUsingSearchMode:M,autocompleteMode:F,activeSystemHint:n})).filter(_).map(k);d($=>{const K=$.filter(_),We=I.filter(Z=>{const J=qe(Z);return!K.some(je=>{const Y=qe(je);if(J===Y)return!0;const X=/[\p{P}\p{S}]$/u,Me=J.replace(X,""),_e=Y.replace(X,"");return Me===Y||J===_e||Me===_e})}).slice(0,m-K.length);return[...K,...We]}),I.length>0&&xt(I,t)}catch{}},F==="BING"?150:ie),[a,F,k,ie,n]);As(v=>v.files);const le=n===H.Research,ce=Zo(),de=le&&ce,ue=r.useCallback(()=>{A(),oe>0&&we(oe)},[we,A,oe]);r.useEffect(()=>{i&&d([])},[i,d]);const Ce=r.useMemo(()=>F==="HARDCODED"?A:ue,[F,ue,A]),O=!1,P=r.useCallback(()=>{Ce()},[Ce,O,de,d]),W=r.useCallback(()=>{a instanceof Ia&&A(!0),a.getCurrentText().indexOf(`
`)>0&&(d([]),p(void 0))},[a,d,A,O,de]);return r.useEffect(()=>a.subscribe("input",()=>{P()}),[a,P]),r.useEffect(()=>a.subscribe("change",()=>{W()}),[a,W]),{autocompletions:l,matchaData:w}},Xo=t=>{const[a,o]=r.useState([]),i=r.useCallback(async()=>{const n=(await Ct.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:t},authOption:ua.SendIfAvailable})).suggestions.map((l,c)=>({type:R.Trending,title:Ie(l),body:"",icon:e.jsx(Es,{className:"h-full w-full"}),prompt:Ie(l),id:`search-trending-${c}`,theme:T.Search}));return o(n),n},[t]);return{trendingSuggestions:a,fetchTrendingSuggestions:i}},en=t=>{const a=/(["'])(?:(?=(\\?))\2.)*?\1/g,o=t.match(a),i=[];let s=0;return o&&o.forEach(n=>{const l=t.indexOf(n,s);l>s&&i.push({text:t.slice(s,l),isMatched:!1}),i.push({text:n,isMatched:!0,className:"font-medium"}),s=l+n.length}),s<t.length&&i.push({text:t.slice(s),isMatched:!1}),i},tn=({skip:t})=>{const{data:a=[],refetch:o}=Ta({queryKey:["caSuggestions"],queryFn:async()=>(await Ct.safeGet("/ca/v2/user/suggested_starter_prompts")).suggestions.map((s,n)=>{const l=Ps(s.related_file_type)??Ut,c=e.jsx(l,{className:"h-full w-full"}),g=en(s.prompt);return{type:R.Autocomplete,title:Ie(s.prompt),body:"",icon:c,prompt:Ie(s.prompt),id:`ca-suggestions-${n}`,theme:T.ContextualAnswers,autocompletionChunks:g}}),enabled:!t});return{caSuggestions:a,fetchCaSuggestions:o}};function Ie(t){return t.split(" ").map(Is).join(" ")}const qe=t=>`${t.title}${t.body}`.toLocaleLowerCase();function an(){const{layer:t}=B("4031588851",{shouldLogExposure:!1}),a=t.get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),o=Ht();return!!o&&o.created*1e3>=new Date(a).getTime()}function sn(t){const{isUnauthenticated:a}=ve(),o=pe("1468311859").value,i=pe("2053937752").value,s=pe("3664702598").value,n=pe("471233253").value,{layer:l}=B("4031588851"),{layer:c}=B("3533083032"),g=an(),y=!a&&o||a&&i,b=(!a&&s||a&&n)&&g;let m="HARDCODED";{const w=a?c:l;if(t){const p=w.get("search_autocomplete_mode","");y&&p&&(m=p)}else b&&(m=w.get("autocomplete_mode","HARDCODED"))}return m}const on=({clientThreadId:t,isGizmoThread:a})=>{const o=be(),{autocompletions:i,matchaData:s}=Jo({clientThreadId:t,composerController:o,isGizmoThread:a});return r.useEffect(()=>(o.store.setState({autocompletions:i,matchaData:s}),()=>{o.store.setState({autocompletions:[],matchaData:void 0})}),[i,o,s]),null},nn=({clientThreadId:t})=>{const a=Re(),o=Ft(p=>p.activeStageSidebar),i=Je(t),s=Rs(ha.WorkspaceShareLinks),{isUnauthenticated:n}=ve(),l=St(),c=jt(t),g=ot(c),y=Mt(a,"16480203"),b=Ls(),m=s&&i&&!n&&!l&&(!g||y)&&!b,w=!o;return e.jsx("div",{className:"flex items-center gap-2 pe-1 leading-[0]",id:"conversation-header-actions",children:e.jsx(Co,{showShareButton:m,showProfileDropdown:w,clientThreadId:t})})},rn=_t(()=>Nt(()=>import("./luqirpb2igok6itg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25])).then(t=>t.GizmoUsingAsOwnerNotice));function ln({clientThreadId:t,transparentBackground:a,isEmptyState:o}){const{isNewScrollEnabled:i}=Vt(),s=jt(t),n=ot(s),l=Ws(),c=Os(),{data:g}=Hs(s),y=Ze(),b=Gs(),m=Ds(),w=q(),{showLegacyReasoningSlider:p,showReasoningSliderNux:h}=Dt(),d=Be(t),S=Ft(_=>_.isConversationScrolledFromTop),x=ga(),u=!p||!!s&&(!n||!d)||b;if(l)return null;const M=u?e.jsx(e.Fragment,{children:m&&(n||!s)?e.jsx(qs,{children:e.jsx(yt,{clientThreadId:t})}):e.jsx(yt,{clientThreadId:t})}):e.jsx(fe,{side:"bottom",theme:x?"default":"white",label:p&&!h?null:e.jsxs("div",{className:"flex h-full w-full flex-col overflow-hidden px-4 py-3",children:[e.jsx("div",{className:"flex w-full justify-center py-2",children:e.jsxs("div",{className:"border-token-border-default bg-token-main-surface-primary flex w-56 flex-col gap-2 rounded-xl border p-2 pt-1.5 shadow-lg",children:[e.jsx("div",{className:"text-token-text-tertiary flex w-full text-start text-[11px] font-normal tracking-tight",children:w.formatMessage({id:"kvZYws",defaultMessage:"Ask anything"})}),e.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[e.jsx(Gt,{className:"text-token-text-primary h-3 w-3 opacity-40"}),e.jsx(Fs,{className:"text-token-text-primary h-3 w-3 opacity-40"}),e.jsxs("div",{className:"relative h-3 w-3",children:[e.jsx(Vs,{className:"text-token-text-primary h-3 w-3"}),e.jsx("div",{className:"absolute start-0 top-0 h-full w-full scale-200 animate-ping rounded-full bg-blue-400/50 duration-1000"})]}),e.jsx("div",{className:"flex-auto"}),e.jsx("div",{className:"bg-token-main-surface-primary rounded-full p-[1px] opacity-20 invert",children:e.jsx(zs,{className:"text-token-text-primary h-3 w-3"})})]})]})}),e.jsxs("div",{className:"text-token-text-primary mt-4 flex max-w-80 flex-col gap-1",children:[e.jsx("div",{className:"font-semibold",children:w.formatMessage({id:"ZQnsFt",defaultMessage:"The model picker has moved"})}),e.jsx("div",{className:"text-xs font-normal opacity-75",children:w.formatMessage({id:"EyZkkB",defaultMessage:"Adjust thinking or choose a model here"})})]})]}),onOpenChange:_=>{_&&U.logEvent("Model Switcher Moved Tooltip Hover",{location:"thread_header"})},ignoreTriggerOnOutsideClick:!0,interactive:!0,children:e.jsx("div",{className:"text-token-text-secondary px-0.5 text-xl",children:Us})});return e.jsxs(e.Fragment,{children:[e.jsxs(Ys,{id:"page-header",className:E("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition max-md:hidden",o&&"absolute start-0 end-0",!s&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:bg-transparent @[84rem]/thread:shadow-none!",a&&"bg-transparent",!i&&S?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",i&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]"),children:[e.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[g!=null&&y?.isWorkspaceAccount()&&g.gizmo.tags?.includes(Bs.WorkspaceDisabled)&&e.jsx(rn,{gizmo:g}),e.jsx(Qs,{gizmoId:s,clientThreadId:t})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(jo,{clientThreadId:t}),M]}),e.jsx(nn,{clientThreadId:t})]}),c&&e.jsx($s,{})]})}const cn=_t(()=>Nt(()=>import("./hrvx7tghyutv8dp4.js"),__vite__mapDeps([26,1,6,2,3,7,27])));function dn({clientThreadId:t}){const a=et(),o=Je(t),i=Ke(t,ae.getGizmoId),s=async()=>{o&&(await Ee.patchConversation(o,{is_archived:!1}),a.invalidateQueries({queryKey:["conversation",t]}),Ma(o,n=>{n.isArchived=!1}),zt(a,i))};return e.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:e.jsx(L,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),e.jsx("div",{children:e.jsx(Ae,{disabled:!o,onClick:s,icon:wo,children:e.jsx(L,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const un=function({clientThreadId:t,getGizmosCompletionParams:a,hideDisclaimer:o,hideHeader:i,messagesVerticalAlign:s="top",renderEmptyState:n}){const l=ma(),{isNewScrollEnabled:c,autoPinningEnabled:g}=Vt(),{data:y}=pa(),b=Ks(t),m=fa(),[w,p,h,d,S,x,u,M]=Ke(t,j=>[j?.isLoading,ae.getCurrentLeafId(j),ae.hasUserMessage(j),ae.getConversationTurns(j).length,ae.isArchived(j),j?.modelId,j?ae.getGizmoId(j):m,j?.conversationOrigin===_a.APPLE]),_=Je(t),k=et(),{prefetchSearchPromises:A}=at(),[f]=Pa(),G=!!f.get("message"),[D,Le]=r.useState(A?.navlink);r.useEffect(()=>{w||(Be(t)?ht.addTiming("chatgpt.web.chatPage.renderNewConversation"):ht.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t,w]);const{setTargetedContent:Q}=Zs(),se=l?.includes(xa),oe=null,F=d>=2,{pageType:V}=Js(),ne=Re(),ie=ye(),re=xe(ie.isImageGenLandingPageEnabled$),we=xe(ie.isAllPagesEnabled$),le=r.useContext(ya),ce=va(le),de=ba(le),ue=Xs(),{isOpen:Ce}=_o(),O=!!u,P=Be(t)&&!F&&Ve(b)&&!ue&&A==null&&(!ce||O),W=V?.type==="landing-page"&&(we||V.value===H.PictureV2&&re);Mt(ne,"733205176");const v=P&&!h&&(Ve(b)||b?.kind===Sa.GizmoTest)&&A==null&&(!ce||O),I=Pt(y).id,$=x??I,K=!!x,We=eo(y?.models,$),Z=to(t,b),J=ao();so(d,t),r.useEffect(()=>{J||Q(void 0)},[t,Q,J,p]),r.useEffect(()=>{Pe.setIsConversationScrolledFromTop(!1)},[t]),r.useEffect(()=>{const j=new URLSearchParams(window.location.search),me=j.get("src");if(me==="history_search"){j.delete("src");const ke=j.toString(),ta=`${window.location.pathname}${ke?`?${ke}`:""}${window.location.hash}`;window.history.replaceState({},document.title,ta)}_&&me==="history_search"&&Ee.patchConversation(_,{touch:!0}).then(()=>{zt(k,u)})},[_,u,k]);const je=Tt(t),Y=r.useCallback(j=>{je(a?a(j):j)},[je,a]),X=Se(),Me=At(),_e=Xe(),Oe=r.useRef(null);Oe.current=j=>{W?X.transitionToPage({type:"home",value:void 0},()=>{_e("/",{preventScrollReset:!0}),Y(j)}):P&&!Me&&wa(ne,"3253785454").get("should_animate_composer",!1)?Wt({className:oo["composer-slide"],update:()=>Y(j)}):Y(j)};const he=r.useCallback(j=>Oe.current?.(j),[Oe]);r.useEffect(()=>{X.signalTransitionReady()},[X,W,t]);const Yt=no({clientThreadId:t,handleRequestCompletion:he,prefetchSearchThreadIdPromise:A?.threadId})&&D==null,He=r.useRef(null),Bt=j=>{if(c&&!W)return e.jsx(vo,{allowScrollToEnd:!de,allowScrollToTop:!de&&M,clientThreadId:t,enableAutoScrollPinning:g,initScrolledToEnd:D==null&&!G,threadFooterRef:Ue,threadRootRef:it,children:j});{const me=e.jsx("div",{className:"relative h-full",children:e.jsxs("div",{className:E("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges] @[84rem]/thread:pt-(--header-height)"),ref:He,children:[e.jsx(bo,{setIsScrolledToEdge:ke=>{Pe.setIsConversationScrolledFromTop(ke)},options:{root:He?.current}}),j]})});return D!=null?me:e.jsx(ja,{children:e.jsxs(r.Suspense,{fallback:null,children:[e.jsx(So,{}),me]})})}},Ge=ko();r.useEffect(()=>{Ge||(document.title=Z??"ChatGPT")},[Z,oe,Ge]);const Qt=Ca(le),De=Ze(),$t=De&&!De.isTeam()&&!De.isEnterprisey(),nt=!o&&!Qt&&!ce&&!(P&&$t)&&Ve(b),it=r.useRef(null),rt=r.useRef(null),Ue=r.useRef(null),lt=io(j=>j.composerHeight),Kt=r.useMemo(()=>({threadContentScrollContainerElementRef:rt,footerRootContainerElementRef:Ue}),[]),Zt=!P&&!W,Jt=st(),Xt=ot(u),ge=O&&Xt,Ne=!ge,ea=P&&!W,ct=W&&V?.type==="landing-page";return e.jsx(ro.Provider,{value:D,children:e.jsx(Rt,{clientThreadId:t,children:e.jsxs(tt,{clientThreadId:t,children:[se&&e.jsx(cn,{}),!Ge&&e.jsx(lo,{children:Z!=null&&e.jsx("title",{children:Z})}),e.jsx(co.Provider,{value:he,children:e.jsxs(Lt,{children:[e.jsxs("div",{id:"thread",ref:it,className:E("group/thread @container/thread h-full w-full",c&&!W&&go.threadRoot,W&&"overflow-y-auto"),children:[e.jsxs(Po,{noKeyboard:!0,clientThreadId:t,currentModelConfig:We,className:E("composer-parent flex flex-col focus-visible:outline-0",!W&&"h-full"),children:[e.jsxs(uo,{value:Kt,children:[!i&&e.jsx(ln,{clientThreadId:t,isEmptyState:v}),e.jsxs("div",{ref:rt,className:E("flex basis-auto flex-col",Zt&&"-mb-(--composer-overlap-px) [--composer-overlap-px:24px]",ge||O||!P?"grow":"shrink",!P&&"overflow-hidden",P&&!ge&&!O&&"min-[510px]:max-[768px]:mt-[25dvh]! @max-[31.9rem]/thread:grow @max-[31.9rem]/thread:justify-center @lg/thread:mt-[calc(30dvh+25px)]"),style:{"--composer-height":lt?`${lt}px`:void 0},children:[ct&&e.jsx(Bo,{systemHint:V.value}),!W&&e.jsx(e.Fragment,{children:!w&&!Yt?v?n??e.jsx(e.Fragment,{children:O?e.jsx(Mo,{clientThreadId:t,gizmoId:u,onRequestCompletion:he,currentModelId:$}):e.jsx(Do,{clientThreadId:t,currentModelId:$,isModelLoaded:K})}):F||D!=null?Bt(e.jsx(Lo,{onRequestCompletion:he,clientThreadId:t,scrollContainerRef:He,prefetchNavlink:D,setPrefetchNavlink:Le},t)):null:null})]})]}),e.jsxs("div",{id:"thread-bottom-container",className:E("isolate z-3 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!W&&!nt&&"mb-4",O||ge||!P?"":Ne&&P&&Jt?"@lg/thread:grow":"lg:grow",Ne&&"flex flex-col"),ref:Ue,children:[S?e.jsx(dn,{clientThreadId:t}):e.jsxs(e.Fragment,{children:[(!P||Ne)&&!Ce&&e.jsx(Io,{isGizmoThread:O,isProjectThread:ge,clientThreadId:t,isNewThread:P,currentModelId:$,onRequestCompletion:he,shouldUseUnifiedComposer:Ne,isModelLoaded:K}),ea&&e.jsx(on,{clientThreadId:t,isGizmoThread:O})]}),nt?e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:e.jsx(ho,{clientThreadId:t})}):null]})]}),ct&&e.jsx(Et,{children:e.jsx(Qo,{systemHint:V.value})})]}),e.jsx(mo,{clientThreadId:t,isStaticSharedThread:!1,isDynamicSharedThread:ue}),e.jsx(po,{}),e.jsx(fo,{conversationId:t}),e.jsx(xo,{}),e.jsx(yo,{conversationId:t}),!1]})})]})})})},jn=Ea.memo(un);export{nn as C,Go as I,jn as M};
//# sourceMappingURL=k1r8zdqpavwsddzj.js.map
