import{j as e,r as d,M as w}from"./lip667d8t42poxum.js";import{c as r,af as S,bL as C,cj as E,dX as T,aj as M,b9 as _,B as P,bb as N}from"./n9zp7vm10xoipejo.js";import{fl as R,fm as A}from"./l4oo5ijw01fyrjzs.js";import{S as D}from"./nlrqx62vhl7xhai6.js";function L({title:l,content:i,buttons:t,time:a,icon:m,size:s="default",progressBar:f,disabled:o=!1,onClick:x}){const g="border-[rgba(0,0,0,0.1)] dark:border-[rgba(255,255,255,0.1)]",h=s==="small"?`w-full sm:w-[380px] pe-[15px] ps-[20px] pt-[13px] pb-[10px] ${o?"":"gap-4"}`:"w-full gap-4 px-[22px] pb-[22px] pt-[18px]",c=x?"cursor-pointer":"",j=s==="small"?"text-[15px]":"";return e.jsxs("div",{className:r("inline-flex flex-col items-start justify-start rounded-2xl border",g,"bg-token-main-surface-primary dark:bg-token-main-surface-secondary",h,c,j),onClick:x,style:s==="small"&&!o?{boxShadow:"rgba(0, 0, 0, 0.06) 0px 2px 6px 0px"}:void 0,children:[e.jsxs("div",{className:r("flex flex-col items-start justify-start self-stretch",s!=="small"&&"gap-1.5"),children:[e.jsxs("div",{className:r("inline-flex items-start justify-start self-stretch",s!=="small"&&"gap-2"),children:[e.jsx("div",{className:r("shrink grow basis-0 leading-normal font-medium",o?"text-token-text-secondary":"text-token-text-primary"),children:l}),e.jsx("div",{className:"relative h-6 w-6"}),!o&&(m||e.jsx(D,{className:"relative h-6 w-6"}))]}),e.jsx("div",{className:r("flex w-full flex-col items-start justify-start",s==="small"&&"mt-[-2px]"),children:e.jsx("div",{className:r("inline-flex w-full items-start justify-start self-stretch rounded-sm",s==="small"?"gap-1":"gap-2.5 py-1"),children:e.jsx("div",{className:r("w-full leading-relaxed font-normal",o?"text-token-text-tertiary":"text-token-text-secondary"),children:i})})})]}),f?e.jsxs("div",{className:r("mb-2 inline-flex items-center justify-between self-stretch",t?.length&&"mt-[-10px]"),children:[f,t]}):e.jsxs("div",{className:"inline-flex items-center justify-end self-stretch",children:[a&&e.jsx("div",{className:"text-token-text-tertiary shrink grow basis-0 text-[15px] leading-normal font-normal",children:a}),e.jsx("div",{className:"flex gap-2",children:t})]})]})}const B=/\*\*(.*?)(?:\*\*|\n|$)/g,F=l=>{let i=null,t;for(;(t=B.exec(l))!=null;)i=t[1].trim();return i};function $({message:l,isExpandable:i,simulatedDuration:t=8*60*1e3,maxFill:a=100}){const m=l?.create_time?new Date(l.create_time*1e3):Date.now(),s=R(+m,t);return e.jsx(A,{percentage:Math.min(s,a),className:r(i?"me-4 w-3/4!":"w-full!"),backgroundClassName:"bg-token-sidebar-surface-secondary rounded-full",barClassName:"bg-token-text-primary rounded-full",transitionDuration:`${(100-s)/100*.2}s`,transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)",height:8})}function O({messages:l,isStreaming:i,isLastMessage:t,clientThreadId:a,currentGroupedMessageIndex:m,turnIndex:s}){const[f,o]=d.useState(""),[x,g]=d.useState(!1),h=S(a,n=>n?.async_status===N.STREAMING||n?.async_status===N.REALTIME),c=C(l),j=c?.id,b=c?.metadata?.initial_text,k=c?.metadata?.summarization_headline,p=l.map(n=>E(n)).join(`

`),{toggleThreadSidebar:v}=T(),y=d.useCallback(()=>{v({type:"summarizer",clientThreadId:a,currentGroupedMessageIndex:m,turnIndex:s})},[v,a,m,s]);d.useEffect(()=>{const n=F(p);n?o(n):b!=null&&o(b)},[p,b]),d.useEffect(()=>{p.length>0&&g(!0)},[p]),d.useEffect(()=>{x&&M.logEvent("Tool: Received a8km123 message",{client_thread_id:a,message_id:j,conversationId:_(a)})},[x]);const u=h&&t||i;return e.jsx("div",{className:"pb-2",children:e.jsx(L,{buttons:u?[e.jsx(P,{onClick:n=>{n.stopPropagation(),y()},color:"secondary",className:"text-token-text-secondary h-[38px]! text-[15px] font-normal",children:e.jsx("div",{className:"px-1",children:e.jsx(w,{id:"wQcuK8",defaultMessage:"Details"})})},"Details")]:[],time:null,title:k,icon:u?e.jsx("div",{className:""}):null,content:u?`${f}...`:c?.metadata?.finished_text??"",size:"small",disabled:!u,onClick:y,progressBar:u?e.jsx($,{message:c,isExpandable:x}):null})})}export{$ as ProduceProgressBar,O as default};
//# sourceMappingURL=iecb3v861t55pbox.js.map
