const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mitiyx3tgqtm5q9b.js","assets/lip667d8t42poxum.js","assets/n9zp7vm10xoipejo.js","assets/root-ivmjnum3.css","assets/l4oo5ijw01fyrjzs.js","assets/conversation-small-k5k9c71c.css","assets/es0z9v8doc0hgjd4.js","assets/ef49rx2y546x1g51.js","assets/kxmmy29si2ia54k0.js","assets/jilfkjkciycvhk2x.js","assets/ls58p44u0ovqzhvw.js","assets/gydkbc6xtfcf9567.js","assets/BusinessesMap-alw4dhxd.css"])))=>i.map(i=>d[i]);
import{j as s,r as x,M as T,f as M,b as ms,a5 as Pe,t as fs,u as ps,c as he,R as kt,g as Re,k as $t,l as ve,a6 as qe}from"./lip667d8t42poxum.js";import{yP as xs,yQ as gs,yR as be,at as z,eT as Ct,fO as Nt,eR as Tt,eS as St,yS as vs,ad as bs,g0 as ys,eL as ws,an as me,fZ as js,P as _s,of as ks,db as te,ds as ye,dr as $s,aA as Cs,aB as Ns,$ as Ts,yT as Ss,fA as Ms,lx as Ps,fz as Ds,az as Es,m_ as Mt,lT as As,dH as Is,lS as Ls,e7 as Rs,yU as Fs,qg as Fe,yV as Pt,nb as Dt,o8 as fe,yW as Hs,yX as zs,hX as Os,hY as Et,yY as Ws,kV as Us,j_ as Ys,al as Y,gZ as He,am as At,aq as we,yZ as Bs,ku as Ve,fN as qs,fB as Vs,fK as Zs,js as E,kN as Gs,y_ as Xs,eJ as Ks,ew as Js,hR as Qs,a6 as en,bh as tn,m$ as sn,y$ as nn,V as an,de as rn,qK as on,i3 as cn,hM as ln,ir as dn,e6 as un,n7 as hn,oH as Ze,G as mn,z0 as fn,z1 as pn,z2 as xn,qc as gn,qb as vn,ea as bn,ot as yn}from"./l4oo5ijw01fyrjzs.js";import{c as C,aC as wn,aH as It,aE as Lt,m as jn,c4 as re,c5 as oe,B as H,W as _n,l as V,dr as kn,dM as $n,dt as Cn,du as Nn,E as Tn,bL as Sn,ai as Rt,dj as Ft,b as Mn,d as Pn,af as pe,dQ as Ht,hR as zt,ag as Q,dX as Ot,g as xe,s as ze,aj as Z,c0 as Oe,ey as Dn,b3 as En,e2 as An,cU as In,gs as Ln,ec as ge,at as Wt,F as Ut,ae as De,X as Rn,_ as Fn,dR as Yt,aL as Hn,fd as zn,u as On,aX as Wn,d0 as Un}from"./n9zp7vm10xoipejo.js";import{b as Yn,c as Bn,e as Bt,R as qt,f as Vt,g as qn,I as Vn,S as Zn,M as Gn,r as Xn}from"./nmzcjggnos81a3wt.js";import{S as Kn,A as Jn}from"./ocylzx9oqlg8ycwm.js";import{P as Qn,u as ea}from"./ezoyp421dng92ve4.js";import{W as ta}from"./j1bb88glgmel43br.js";import{c as sa,d as na,W as aa}from"./ojvadmnty96xvqkr.js";import{S as ra,u as oa,b as ia}from"./jilfkjkciycvhk2x.js";import{L as ca,O as la}from"./krf7zg7fy4qqowqq.js";import{R as da}from"./f64hg6fdq8ojkhjz.js";import{g as ua,c as ha,b as Ee,I as ma}from"./j385t288u9l3nf6j.js";import{u as fa}from"./gydkbc6xtfcf9567.js";import{a as pa,b as xa}from"./btgi4ch9w5xby7vu.js";import{a as ga,b as va}from"./jpfsl7zlesohw8kt.js";import{P as K}from"./ef49rx2y546x1g51.js";import{v as Ge,C as ba,A as ya,a as wa,L as ja,B as _a,p as ka,b as $a,c as Ca,P as Na,d as Ta,i as Sa,e as Ma}from"./ctz8d92lx4gyhixb.js";import{N as Xe}from"./ju8q15l0hqy6ti9z.js";import{b as Pa,a as Da,c as Ea}from"./es0z9v8doc0hgjd4.js";import{c as Zt}from"./cg71y7d9v77500qa.js";const Aa=Zt("ChevronDownFilled","1em",["M15.8 7.73c.28.3.27.78-.03 1.06l-5.25 5a.75.75 0 0 1-1.04 0l-5.25-5a.75.75 0 0 1 1.04-1.08L10 12.2l4.73-4.5a.75.75 0 0 1 1.06.02Z"]),Ia=Zt("ChevronLeftFilled","1em",["M12.27 15.8a.75.75 0 0 1-1.06-.03l-5-5.25a.75.75 0 0 1 0-1.04l5-5.25a.75.75 0 1 1 1.08 1.04L7.8 10l4.5 4.73c.29.3.28.78-.02 1.06Z"]),Ke=({children:t,"data-start":e=null,"data-end":n=null,"data-is-last-node":a,"data-is-only-node":r,tag:o})=>{const{animationTiming:i,shouldAnimate:c,shouldHide:d,isDisabled:m,onComplete:h,onReady:p}=xs({isMarker:!0,tag:o,children:t,start:e,end:n,isLastNode:a,isOnlyNode:r});return m||d?s.jsx(o,{"data-start":e,"data-end":n,className:C(d&&"hidden"),children:t}):s.jsx(o,{"data-start":e,"data-end":n,className:C(be.marker,c?be.animate:be.hidden),onAnimationStart:()=>p(0),onAnimationEnd:()=>h(0),style:gs(i),children:t})},La={p:t=>s.jsx(z,{tag:"p",...t}),h1:t=>s.jsx(z,{tag:"h1",...t}),h2:t=>s.jsx(z,{tag:"h2",...t}),h3:t=>s.jsx(z,{tag:"h3",...t}),h4:t=>s.jsx(z,{tag:"h4",...t}),h5:t=>s.jsx(z,{tag:"h5",...t}),h6:t=>s.jsx(z,{tag:"h6",...t}),li:t=>s.jsx(Ke,{tag:"li",isListItem:!0,...t}),hr:t=>s.jsx(Ke,{tag:"hr",...t})};function Ra(t){const e=t.split(`
`),n=Fa(e.pop()).trimEnd();return n&&e.push(n),e.join(`
`)}function Fa(t){if(!t||/^\s*-\s*([*_]+)?\s*$/.test(t))return"";const e=[];let n="",a=0;for(;a<t.length;){if(t[a]==="*"&&t[a+1]==="*"){n+="**",e.length&&e[e.length-1]==="**"?e.pop():e.push("**"),a+=2;continue}if(t[a]==="*"||t[a]==="_"){n+=t[a];const o=t[a];e.length&&e[e.length-1]===o?e.pop():e.push(o),a++;continue}if(t[a]==="["){const o=t[a];n+=o,e.push(o),a++;continue}if(t[a]==="]"){const o=t[a];n+=o,e.length&&e[e.length-1]==="["&&e.pop(),a++;continue}if(t[a]==="("&&t[a-1]==="]"){const o=t[a];n+=o,e.push(o),a++;continue}if(t[a]===")"){const o=t[a];n+=o,e.length&&e[e.length-1]==="("&&e.pop(),a++;continue}n+=t[a],a++}if(e.length===0)return t;let r=n.trimEnd();for(;e.length;){const o=e.pop();if(o==null)break;o==="("?r+=")":r.endsWith(o)?r=r.slice(0,-o.length).trimEnd():o==="["?r+="]()":r+=o}return r}const Ha=t=>x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...t},x.createElement("path",{d:"M9 4c-1.104 0-2 .896-2 2v3c0 1.104-.896 2-2 2v2c1.104 0 2 .896 2 2v3c0 1.104.896 2 2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),x.createElement("path",{d:"M15 4c1.104 0 2 .896 2 2v3c0 1.104.896 2 2 2v2c-1.104 0-2 .896-2 2v3c0 1.104-0.896 2-2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})),We=x.createContext(void 0);function za({path:t,lineRangeStart:e,lineRangeEnd:n,gitUrl:a}){const[r,o]=x.useState(!1),i=x.useContext(We),c=x.useRef(null),d=x.useRef(null),m=x.useRef(null),h=()=>{m.current&&(clearTimeout(m.current),m.current=null),o(!0)},p=()=>{m.current=window.setTimeout(()=>{o(!1)},200)};if(!t)return null;const u=i?.fileSnapshots.find(y=>y.path===t);if(!u)return null;const v=Wa(e,n,u);return v.length?s.jsxs(Ct,{open:r,onOpenChange:o,children:[s.jsx(Nt,{asChild:!0,onMouseEnter:h,onMouseLeave:p,children:s.jsx("span",{ref:c,className:"bg-token-bg-secondary text-token-text-secondary mx-0.5 inline-flex aspect-square size-min cursor-default items-center justify-center rounded-full p-1",children:s.jsx(Ha,{className:"size-[10px]"})})}),s.jsx(Tt,{children:s.jsx(St,{ref:d,className:"z-50 focus:outline-none",side:"right",onMouseEnter:h,onMouseLeave:p,onOpenAutoFocus:y=>y.preventDefault(),children:s.jsx(Oa,{snapshot:u,snippetLines:v,lineRangeStart:e,lineRangeEnd:n,gitUrl:a})})})]}):null}function Oa({snapshot:t,snippetLines:e,lineRangeStart:n,lineRangeEnd:a,gitUrl:r}){const o=t.path.split(".").pop()??"sh",i=e.reduce((d,m)=>{if(m.trim()==="")return d;const h=m.match(/^\s*/),p=h?h[0].length:0;return d===-1?p:Math.min(d,p)},-1),c=e.map(d=>i>0?d.slice(i):d).join(`
`);return s.jsxs("div",{className:"bg-token-bg-primary border-token-border-default mx-4 flex max-h-[600px] flex-col rounded-2xl border px-2 pt-2 pb-4 shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] focus:outline-none dark:shadow-none",children:[c&&s.jsx(vs,{wrapperClassName:"rounded-lg !bg-token-bg-tertiary !border-none mb-3 max-h-[400px] overflow-auto text-xs w-[600px] max-w-full",codeContainerClassName:"!p-2",language:o,content:c,showActionBar:!1}),s.jsxs("div",{className:"grid w-full grid-cols-[minmax(0,1fr)_auto] items-center justify-between gap-1 px-2 text-sm",children:[t.path,s.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 whitespace-nowrap",children:[s.jsx(T,{id:"wham.citation.file.lineRange",defaultMessage:"Lines {lineRangeStart}-{lineRangeEnd}",values:{lineRangeStart:n,lineRangeEnd:a}}),r&&s.jsx("a",{className:"group flex w-full items-center gap-1 p-1",href:r,target:"_blank",rel:"noopener noreferrer",children:s.jsx(bs,{className:"icon-xs hover:text-token-text-primary"})})]})]})]})}function Wa(t,e,n){if(n.contents){const i=n.contents.split(`
`),c=Math.max(0,t-1),d=e?Math.min(i.length,e):c+1;return i.slice(c,d)}const a=n.line_range_contents?.find(i=>Ua(i,t,e));if(!a)return[];const r=Math.max(t-a.line_range_start,0),o=r+(e-t+1);return a.content.slice(r,o)}function Ua(t,e,n){return e<t.line_range_start?!1:!(n>t.line_range_end)}function Ya(){const t=It.getItem(Lt.ProposedTasks);return t&&typeof t=="object"?t:{}}const Je=wn(t=>({tasks:Ya(),store(e){t(n=>{const a={...n.tasks,[e.contentId]:e};return It.setItem(Lt.ProposedTasks,a),{tasks:a}})}}));function Ba({title:t,prompt:e,environmentId:n,branch:a,contentId:r}){const[o,i]=x.useState(!1),c=ys(),{setEnvironmentId:d,setBranch:m}=sa(),{refetch:h}=na(),p=M(),u=jn(),v=Je(l=>l.tasks[r]),y=Je(l=>l.store),{mutate:w,isPending:k}=ms({mutationFn:()=>aa.createNewTask(n,a,e,!1).catch(l=>{throw u.danger(p.formatMessage({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task"}),{id:`suggestion-${r}`,duration:5,hasCloseButton:!0}),l}),onSuccess:async l=>{await h(),$(l)}}),$=l=>{try{const g=l.task.id,b=l.turn.id,N=`/codex/tasks/${g}`;y({contentId:r,prompt:e,scheduledTaskId:g,turnId:b,url:N}),i(!1)}catch{}},j=!n||!a||k;return s.jsxs("div",{className:C("mt-1 mb-3 flex w-full items-center rounded-xl px-3 py-3",v?"bg-token-bg-secondary border border-transparent":"bg-token-bg-primary border-token-border-default border shadow-[0px_1px_1px_0px_rgba(0,0,0,0.05)]"),children:[s.jsxs("div",{className:C("group flex flex-1 items-center gap-1",!v&&"-my-3 cursor-pointer py-3"),onClick:()=>{v||(d(n),m(a),i(!0),re.count(oe.CODEX,"chatgpt_wham_proposed_task_clicked",{action:"edit"}))},children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("span",{className:"text-token-text-tertiary text-xs",children:s.jsx(T,{id:"wham.whamProposedTask.title",defaultMessage:"Suggested task"})}),s.jsx("span",{className:C("text-sm font-medium",v&&"text-token-text-tertiary"),children:t})]}),!v&&s.jsx(ws,{className:"icon-sm text-token-text-secondary mb-0.5 cursor-pointer self-end opacity-0 transition-opacity group-hover:opacity-100"})]}),s.jsx("div",{className:"flex items-center justify-end gap-2 text-xs",children:v?s.jsx(H,{size:"small",color:"secondary",as:"a",to:v?.url,openNewTab:!0,children:s.jsx("span",{className:"text-token-text-primary font-medium",children:s.jsx(T,{id:"lwqFNG",defaultMessage:"View task"})})}):s.jsx(qa,{prompt:e,tooltipEnabled:!v&&!o,children:s.jsx(H,{size:"small",color:"secondary",disabled:j,onClick:()=>{re.count(oe.CODEX,"chatgpt_wham_proposed_task_clicked",{action:"create"}),w()},children:s.jsxs("div",{className:"flex items-center gap-0.5",children:[s.jsx(T,{id:"wR/o70",defaultMessage:"Code"}),k?s.jsx(_n,{className:"icon-xs me-[2px]"}):s.jsx(Kn,{className:"icon-sm"})]})})})}),s.jsx(V.Root,{testId:"modal-task-stub-composer",isOpen:o,onClose:()=>i(!1),children:s.jsx(V.Overlay,{children:s.jsx("div",{className:"flex h-full w-full items-center justify-center",onClick:l=>{l.stopPropagation(),l.preventDefault()},children:s.jsxs(kn,{className:"w-3xl focus:outline-hidden",onEscapeKeyDown:l=>{l.stopPropagation(),i(!1)},children:[s.jsxs($n,{children:[s.jsx(Cn,{children:s.jsx(T,{id:"wham.proposedTaskModel.title",defaultMessage:"Kick off a new Codex task"})}),s.jsx(Nn,{children:s.jsx(T,{id:"wham.proposedTaskModel.description",defaultMessage:"Codex can propose new follow up tasks"})})]}),s.jsx(Pe.div,{initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{duration:c?0:.25},children:s.jsxs("div",{className:"flex flex-col items-center gap-8",children:[s.jsx("h1",{className:"text-token-text-primary dark text-token-text-primary text-[28px] font-semibold",children:s.jsx(T,{id:"wham.proposedTaskModal.title",defaultMessage:"Edit suggested task"})}),s.jsx(Va,{prompt:e,onSuccess:$})]})})]})})})})]})}function qa({prompt:t,tooltipEnabled:e,children:n}){return e?s.jsx(me,{side:"right",label:s.jsx("span",{className:"block p-2 text-start whitespace-pre-wrap",children:t}),wide:!0,children:n}):n}function Va({prompt:t,onSuccess:e}){const n=Tn(),a=x.useMemo(()=>n?new Qn(Yn()):new js,[n]);return x.useEffect(()=>{a.setText(t.trimEnd())},[a,t]),s.jsx(Bn.Provider,{value:a,children:s.jsx(ta,{isBigBoxMode:!0,isExpandedByDefault:!0,disableDuringSubmit:!0,onSuccess:e})})}function Za({title:t,prompt:e}){const n=x.useContext(We),a=x.useMemo(()=>Ga(`${n?.taskId}:${t}:${e}`),[n?.taskId,t,e]);return!n||!n.environmentId||!n.branch?null:s.jsx(Ba,{title:t,prompt:e,environmentId:n.environmentId,branch:n.branch,contentId:a})}function Ga(t){let e=5381;for(let n=0;n<t.length;n++)e=(e<<5)+e^t.charCodeAt(n);return(e>>>0).toString(16).padStart(8,"0")}function Xa({chunkId:t,lineRangeStart:e,lineRangeEnd:n}){const[a,r]=x.useState(!1),i=x.useContext(We)?.terminalMessageContents.find(y=>y.includes(t)),c=x.useRef(null),d=x.useRef(null),m=x.useRef(null);if(!i)return null;const h=Ja(i);if(!h)return null;const p=h.output.slice(e-1,n);if(!p.some(y=>!!y.length))return null;const u=()=>{m.current&&(clearTimeout(m.current),m.current=null),r(!0)},v=()=>{m.current=window.setTimeout(()=>{r(!1)},200)};return s.jsxs(Ct,{open:a,onOpenChange:r,children:[s.jsx(Nt,{asChild:!0,onMouseEnter:u,onMouseLeave:v,children:s.jsx("span",{ref:c,className:"bg-token-bg-secondary text-token-text-secondary mx-0.5 inline-flex aspect-square size-min cursor-default items-center justify-center rounded-full p-1",children:s.jsx(ra,{className:"size-[10px]"})})}),s.jsx(Tt,{children:s.jsx(St,{ref:d,className:"z-50 focus:outline-none",side:"right",onMouseEnter:u,onMouseLeave:v,onOpenAutoFocus:y=>y.preventDefault(),children:s.jsx("div",{className:"max-h-[500px] max-w-screen px-4",children:s.jsx(Ka,{lines:p,lineRangeStart:e,lineRangeEnd:n})})})})]})}function Ka({lines:t,lineRangeStart:e,lineRangeEnd:n}){return s.jsxs("div",{className:"bg-token-bg-primary border-token-border-default mx-4 flex flex-col overflow-auto rounded-2xl border px-2 pt-2 pb-3 shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] focus:outline-none dark:shadow-none",children:[s.jsx(Jn,{className:"bg-token-sidebar-surface-primary dark mb-2.5 max-h-[200px] w-full overflow-auto rounded-lg p-3 font-mono text-xs whitespace-pre text-white dark:border dark:border-white/10",children:t.join(`
`)}),s.jsx("div",{className:"flex w-full justify-end gap-1 px-2 text-sm",children:s.jsx("span",{className:"text-token-text-tertiary",children:s.jsx(T,{id:"wham.citation.terminal.lineRange",defaultMessage:"Lines {lineRangeStart}-{lineRangeEnd}",values:{lineRangeStart:e,lineRangeEnd:n}})})})]})}function Ja(t){try{const e=JSON.parse(t);return!("chunk_id"in e)||typeof e.chunk_id!="string"||!("session_name"in e)||typeof e.session_name!="string"||!("start_line_no"in e)||typeof e.start_line_no!="number"?null:"output"in e?e:null}catch{return null}}function Qa(t){return t&&/^turn[0-9]+ifs[0-9]+$/.test(t)}const er=t=>x.createElement("svg",{width:24,height:25,viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},x.createElement("path",{d:"M7 18.5H5C3.89543 18.5 3 17.6046 3 16.5V10.5C3 8.84315 4.34315 7.5 6 7.5H18C19.6569 7.5 21 8.84315 21 10.5V16.5C21 17.6046 20.1046 18.5 19 18.5H17",stroke:"currentColor",strokeWidth:2,strokeLinejoin:"round"}),x.createElement("path",{d:"M7 14.5H17M7 14.5V20.5C7 21.0523 7.44772 21.5 8 21.5H16C16.5523 21.5 17 21.0523 17 20.5V14.5M7 14.5H6M17 14.5H18",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),x.createElement("path",{d:"M16 11H17",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),x.createElement("path",{d:"M7 6.5V4.5C7 3.94772 7.44772 3.5 8 3.5H16C16.5523 3.5 17 3.94772 17 4.5V6.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})),tr=({messages:t})=>{const e=M(),n=Sn(t);if(!n)return null;const a=n.metadata?.async_task_title,r=e.formatMessage({id:"5tCuOj",defaultMessage:"Try ChatGPT"});return s.jsxs("div",{className:"flex justify-between print:hidden",children:[s.jsxs("div",{className:"flex flex-col justify-start",children:[s.jsx("p",{className:"text-token-text-primary text-lg font-medium",children:a}),s.jsx("div",{className:"text-token-text-tertiary text-sm",children:s.jsx(T,{id:"FqymvQ",defaultMessage:"Content may be unverified or unsafe. <reportLink>Report</reportLink>",values:{reportLink:o=>s.jsx("a",{href:"https://openai.com/form/report-content/",target:"_blank",rel:"noopener noreferrer",className:"underline",children:o})}})})]}),s.jsxs("div",{className:"flex cursor-pointer flex-row items-center gap-x-4 rounded-md p-2",children:[s.jsx(er,{className:"icon-lg-heavy text-token-text-secondary hover:bg-token-main-surface-secondary",onClick:()=>print()}),s.jsx(H,{className:C("btn btn-secondary bg-black text-white hover:opacity-70"),onClick:()=>{window.open(window.location.origin+"/?utm_src=deep-research-sharing","_blank")},icon:Rt,label:r,children:r})]})]})},Gt=x.createContext({postId:""});function av({postWithProfile:t,threadId:e}){if(t.post.attachments[0].kind!=="deep_research")return null;const n=t.post.attachments[0].messages;return s.jsx(Gt.Provider,{value:{postId:t.post.id},children:s.jsx(_s,{clientThreadId:e,children:s.jsx("div",{className:"bg-token-main-surface-secondary min-h-screen w-full pb-8",children:s.jsxs("div",{className:"mx-auto max-w-3xl",children:[s.jsx("div",{className:"px-2 py-6",children:s.jsx(tr,{messages:n})}),s.jsx("div",{className:"border-token-border-xlight bg-token-main-surface-primary flex flex-col rounded-xl border-b pt-4 shadow-md print:border-none print:pt-2 print:shadow-none",children:s.jsxs("div",{className:"p-14 pt-8",children:[s.jsx("a",{href:window.location.origin+"/?utm_src=deep-research-sharing",target:"_blank",rel:"noopener noreferrer",children:s.jsxs("div",{className:"flex items-center gap-3 pb-4",children:[s.jsx(Rt,{className:"text-token-text-primary h-8 w-8"}),s.jsx(ks,{})]})}),s.jsx(da,{messages:n,threadId:e})]})})]})})})})}const sr=4;function nr({metadata:t,analyticsMetadata:e,trackContentReferenceEvent:n}){const a=te(),r=t.images,o=r.some(h=>h.is_proxied_image)?[]:r.map(h=>h.thumbnail_url),i=fs({queries:o.map(h=>ua(h)),combine:h=>{const p=new Set;return h.forEach((u,v)=>{u.isSuccess&&p.add(o[v])}),p}}),c=r.filter(h=>i.has(h.thumbnail_url)),d=t.images.length;if(r.some(h=>h.is_proxied_image)){const h=r.find(u=>u.is_proxied_image),p=C("mb-7 mt-1 min-w-32 max-w-[22%] rounded-xl border-[0.5px] border-token-border-default",h?.float_top?"relative block":"float-image z-10 float-end clear-end ms-7 overflow-hidden");return s.jsx(je,{image:h,imageSource:ye.Turn,analyticsMetadata:e,trackContentReferenceEvent:n,className:p},h?.content_url)}if(d===0)return null;if(d===1){const h=t.images[0];return s.jsx(je,{image:h,imageSource:ye.Turn,analyticsMetadata:e,trackContentReferenceEvent:n,className:"float-image border-token-border-default z-10 float-end clear-end ms-7 mt-1 mb-7 max-w-[22%] min-w-32 overflow-hidden rounded-xl border-[0.5px]"},h.content_url)}const m=a?c.length:Math.min(c.length,sr);return s.jsx("div",{className:"no-scrollbar mt-1 mb-6 flex min-h-36 flex-nowrap gap-0.5 overflow-auto sm:gap-1 sm:overflow-hidden xl:min-h-44",children:c.slice(0,m).map((h,p)=>s.jsx("div",{className:C("border-token-border-default relative aspect-square max-h-48 w-32 shrink-0 overflow-hidden rounded-xl border-[0.5px] sm:w-[calc((100%-1rem)/4)] md:shrink",p===0&&"rounded-s-xl",p===m-1&&"rounded-e-xl"),children:s.jsx(je,{image:h,imageSource:ye.Turn,analyticsMetadata:e,trackContentReferenceEvent:n,className:"h-full w-full"},h.thumbnail_url)},h.thumbnail_url))})}const Xt=x.memo(nr,(t,e)=>t.numImageResults===e.numImageResults&&t.analyticsMetadata===e.analyticsMetadata&&t.trackContentReferenceEvent===e.trackContentReferenceEvent&&t.metadata.images.length===e.metadata.images.length&&t.metadata.images.every((n,a)=>n.content_url===e.metadata.images[a].content_url));function ar(t,e){if(!t||!e)return null;const{width:n,height:a}=e;if(n===a)return null;const{center_x_percent:r,center_y_percent:o}=t;let i=50,c=50;if(a>n){const d=a-n;c=(o*a-n/2)/d*100,i=50}else{const d=n-a;i=(r*n-a/2)/d*100,c=50}return`${i.toFixed(1)}% ${c.toFixed(1)}%`}function je({image:t,imageSource:e,className:n,imgClassName:a,style:r,analyticsMetadata:o,trackContentReferenceEvent:i}){const c=ha(t),d=t?.content_url.replace(/^http:\/\//,"https://"),m=rr(t),{isSuccess:h}=Ee(c),{isSuccess:p}=Ee(m?d:void 0),u=x.useMemo(()=>({image_url:c,title:t?.title}),[c,t?.title]);x.useEffect(()=>{t&&h&&i("Search Content Reference Shown","search_content_reference_shown","image_v2",u)},[i,t,h,u]);const v=$s.useStore(),y=ar(t?.thumbnail_crop_info??null,t?.thumbnail_size??null),w=!t||!(h||p||t.is_proxied_image),k=(()=>{if(!w)return t.is_proxied_image?t.url:m&&p?d:c})();return s.jsx("button",{className:C("relative aspect-square overflow-hidden",n),style:r,onClick:()=>{i("Search Content Reference Clicked","search_content_reference_clicked","image_v2",u),v.setCurrentImage(t?{image:t,source:e,analyticsMetadata:o}:void 0)},children:w?s.jsx("div",{className:"bg-token-main-surface-tertiary aspect-square h-full w-full animate-pulse"}):s.jsx(ma,{children:s.jsx("img",{src:k,alt:t?.content_url,style:y?{objectPosition:y}:{},className:C("bg-token-main-surface-tertiary m-0 h-full w-full object-cover",a)})})})}function rr(t){return!t||t.is_proxied_image?!1:t.thumbnail_url.includes("images.openai.com/thumbnails")}async function or({conversationId:t,messageId:e,assetPointerLinks:n,sharedConversationLikeId:a}){return await Mn.safePost("/conversation/get_images_for_message",{requestBody:{conversation_id:t??null,share_id:a??null,message_id:e,asset_pointer_links:n},authOption:Pn.SendIfAvailable})}function ir({reference:t,conversationId:e,messageId:n,sharedConversationLikeId:a}){return ps({queryKey:["inline-images",t,e,n],queryFn:async()=>{if(!t.asset_pointer_links||t.asset_pointer_links.length===0||!e&&!a)return{images:[],formats:[]};const r=await or({conversationId:e,messageId:n,assetPointerLinks:t.asset_pointer_links,sharedConversationLikeId:a});for(let o=0;o<r.images.length;o++){const i=r.images[o],d=`image/${r.formats[o]}`,m=cr(i,d);r.images[o]=m}return r}})}function cr(t,e="",n=512){const a=atob(t),r=[];for(let i=0;i<a.length;i+=n){const c=a.slice(i,i+n),d=new Array(c.length);for(let h=0;h<c.length;h++)d[h]=c.charCodeAt(h);const m=new Uint8Array(d);r.push(m)}const o=new Blob(r,{type:e});return URL.createObjectURL(o)}const lr=200;function dr({reference:t,clientThreadId:e,message:n,trackContentReferenceEvent:a}){const r=Ft(e),{postId:o}=x.useContext(Gt),{data:i,isLoading:c,isError:d,error:m}=ir({reference:t,conversationId:r,messageId:n.id,sharedConversationLikeId:o}),h=x.useRef([]);if(x.useEffect(()=>()=>{h.current.forEach(v=>{URL.revokeObjectURL(v)}),h.current=[]},[]),c||d||m||!i||!("images"in i))return null;h.current=[];const p=(v,y)=>{const w=new RegExp(y+"\\s*([^\\n]+)","m"),k=v.match(w);return k&&k[1]?k[1].trim().length:0};let u=-1;return n.content.content_type==="text"&&(u=p(n.content.parts.join(""),t.matched_text)),s.jsx(s.Fragment,{children:i?.images.map((v,y)=>{const w={matched_text:t.matched_text,start_idx:t.start_idx,end_idx:t.end_idx,safe_urls:t.safe_urls,alt:t.alt,prompt_text:t.prompt_text,type:"image_v2",images:[{url:v,content_url:t.clicked_from_url??"",thumbnail_url:v,title:t.clicked_from_title??"",content_size:{width:141,height:143},thumbnail_size:{width:141,height:143},is_proxied_image:!0,float_top:u<lr||u===-1}]};return s.jsx(Xt,{metadata:w,analyticsMetadata:{clientThreadId:e,messageId:n.id},numImageResults:1,trackContentReferenceEvent:a},`image-carousel-inline-${y}`)})})}const R={TTFP:"products.ttfp",TTLT:"products.ttlt",TTF_VISIBLE_CONTENT_TOKEN:"products.ttf_visible_content_token"},Ue={[R.TTFP]:new Set,[R.TTLT]:new Set,[R.TTF_VISIBLE_CONTENT_TOKEN]:new Set};function _e({profiler:t,messageId:e,metric:n,overrideDurationMs:a}){Ue[n].add(e);const r=Ts();t.logTiming(n,{context:{eval_preset:r.eval_preset},overrideDurationMs:a})}function ke({messageId:t,metric:e}){return Ue[e].has(t)}function ur(t){"use forget";const e=he.c(9),{namespace:n,clientThreadId:a}=t;let r;e[0]!==n?(r=()=>Cs({namespace:n,opts:{debug:!1}}),e[0]=n,e[1]=r):r=e[1];const[o]=x.useState(r),i=pe(a,hr),c=Ht(i);let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=new Set,e[2]=d):d=e[2];const m=x.useRef(d);let h,p;e[3]!==o||e[4]!==i?(h=()=>{if(i&&!m.current.has(i)){m.current.add(i);const y=zt(i);y&&o.reset(y.turnTracker.start_time_ms)}},p=[i,o],e[3]=o,e[4]=i,e[5]=h,e[6]=p):(h=e[5],p=e[6]),x.useEffect(h,p);const u=c?o:null;let v;return e[7]!==u?(v={profiler:u},e[7]=u,e[8]=v):v=e[8],v}function hr(t){return Q.getRequestId(t)}function Kt(t){"use forget";const e=he.c(25),{clientThreadId:n,messageId:a,products:r}=t;let o;e[0]!==a?(o=l=>[Q.getRequestId(l),Q.isMessageTurnEnded(l,a)],e[0]=a,e[1]=o):o=e[1];const[i,c]=pe(n,o);let d;e[2]!==n?(d={namespace:Ns.ProductsCompletionRequest,clientThreadId:n},e[2]=n,e[3]=d):d=e[3];const{profiler:m}=ur(d),p=Ht(i)&&!c,u=fa(p);let v,y;e[4]!==p||e[5]!==a||e[6]!==r.length||e[7]!==m?(v=()=>{ke({messageId:a,metric:R.TTFP})||m&&p&&r.length>0&&_e({profiler:m,messageId:a,metric:R.TTFP})},y=[p,a,r.length,m],e[4]=p,e[5]=a,e[6]=r.length,e[7]=m,e[8]=v,e[9]=y):(v=e[8],y=e[9]),x.useEffect(v,y);let w,k;e[10]!==p||e[11]!==a||e[12]!==u||e[13]!==m?(w=()=>{ke({messageId:a,metric:R.TTLT})||u.current&&!p&&m&&_e({profiler:m,messageId:a,metric:R.TTLT})},k=[a,u,p,m],e[10]=p,e[11]=a,e[12]=u,e[13]=m,e[14]=w,e[15]=k):(w=e[14],k=e[15]),x.useEffect(w,k);let $;e[16]!==a||e[17]!==m||e[18]!==i?($=()=>{if(!ke({messageId:a,metric:R.TTF_VISIBLE_CONTENT_TOKEN})&&m){const l=i?zt(i):null;if(l){const g=R.TTF_VISIBLE_CONTENT_TOKEN;Ue[g].add(a),_e({profiler:m,messageId:a,metric:g,overrideDurationMs:l.turnTracker.first_visible_content_token_lat})}}},e[16]=a,e[17]=m,e[18]=i,e[19]=$):$=e[19];let j;e[20]!==a||e[21]!==r.length||e[22]!==m||e[23]!==i?(j=[a,m,i,r.length],e[20]=a,e[21]=r.length,e[22]=m,e[23]=i,e[24]=j):j=e[24],x.useEffect($,j)}function mr({contentReference:t,clientThreadId:e,messageId:n,turnIndex:a,trackContentReferenceEvent:r}){const o=x.useCallback(()=>r("Search Content Reference Shown","search_content_reference_shown","product_entity",{content_reference_start_index:t.start_idx,product_id:t.product.id}),[r,t.start_idx,t.product.id]),i=x.useCallback(()=>r("Search Content Reference Clicked","search_content_reference_clicked","product_entity",{content_reference_start_index:t.start_idx,product_id:t.product.id}),[r,t.start_idx,t.product.id]),c=t.product;x.useEffect(()=>o(),[o]),Kt({clientThreadId:e,messageId:n,products:[c]});const{openThreadSidebar:d}=Ot();return s.jsxs("span",{className:"decoration-token-text-secondary inline align-baseline underline decoration-[4%] underline-offset-[16%] [text-decoration-skip-ink:auto] [text-underline-position:from-font] hover:cursor-pointer",onClick:()=>{if(i(),c.offers){if(!e)return;d({type:"product",clientThreadId:e,messageId:n,turnIndex:a,contentReferenceStartIndex:t.start_idx,productIndex:0})}else window.open(c.url,"_blank")},children:[s.jsx(Ss,{className:"text-token-text-tertiary me-0.5 inline h-[1em] w-[1em] align-[-0.2em]"}),s.jsx("span",{className:"whitespace-normal",children:c.title})]})}function fr({items:t,targetItemCount:e,onCardRender:n,onCardShown:a,onCardClicked:r,onReplyClicked:o}){const i=x.useRef(null),[c,d]=x.useState(null),m=x.useRef(null),h=()=>{m.current=setTimeout(()=>{d(null),m.current=null},200)},p=()=>{m.current&&(clearTimeout(m.current),m.current=null)},u=x.useRef(null),[v,y]=x.useState({left:0,top:0}),w=8;x.useEffect(()=>{const g=i.current,b=u.current;if(!o||!c||!g||!b)return;const N=()=>{const S=c.card.getBoundingClientRect(),_=g.getBoundingClientRect(),P=b.getBoundingClientRect(),q=S.bottom-_.top+w;var f=S.left-_.left;f=Math.max(0,f),f=Math.min(f,_.width-P.width),y({left:f,top:q})};return N(),g.addEventListener("scroll",N),()=>g.removeEventListener("scroll",N)},[c,t,o]);const k=te(),$=k?2:4;if(e===void 0)e=t.length;else if(!e&&t.length<$)return null;const j=(e??t.length)>=$,l=j&&k;return s.jsxs("div",{className:"relative",children:[s.jsx("div",{ref:i,className:C("flex flex-row gap-4 py-2",l&&"mx-[-1rem] px-[1rem]",j&&"no-scrollbar snap-x snap-proximity scroll-ps-4 overflow-x-scroll scroll-smooth"),children:t.map((g,b)=>s.jsx("div",{className:C(j?"w-64 shrink-0 snap-start":"min-w-0 flex-1"),children:s.jsx(pr,{onShown:()=>a(g,b),onClick:()=>r(g,b),onHover:N=>{p(),N?d({card:N,item:g,index:b}):h()},children:n(g,!k&&e===1)})},b))}),j&&!l&&s.jsx(xr,{scrollableRef:i,units:t.length}),o&&s.jsx("div",{ref:u,className:C("absolute z-10",c?"pointer-events-auto opacity-100":"pointer-events-none opacity-0","transition-[transform,opacity] duration-200"),style:{willChange:"opacity, transform",left:v.left,top:v.top,transform:c?"translateY(0)":"translateY(-8px)"},onMouseEnter:p,onMouseLeave:h,children:s.jsx(H,{className:C(c?"pointer-events-auto":"pointer-events-none","border-light bg-clip-padding px-4 py-2 shadow-md"),size:"small",color:"secondary",onClick:()=>c&&o(c.item,c.index),children:s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx(Ms,{className:"text-token-text-secondary h-4 w-4"}),s.jsx(T,{id:"9TG7OR",defaultMessage:"Ask about this"})]})})})]})}function pr({onShown:t,onClick:e,onHover:n,children:a}){const r=x.useRef(null),o=x.useRef(t);return x.useEffect(()=>{o.current=t},[t]),x.useEffect(()=>{if(!r.current)return;const i=new IntersectionObserver(([c])=>c.isIntersecting&&o.current(),{threshold:.5});return i.observe(r.current),()=>i.disconnect()},[]),s.jsx("div",{ref:r,className:C("h-full w-full","bg-token-bg-primary cursor-pointer overflow-hidden rounded-xl","border-token-border-default hover:border-light border bg-clip-padding hover:shadow-md","transition-all duration-200"),onClick:e,onMouseEnter:()=>r.current&&n(r.current),onMouseLeave:()=>n(null),children:a})}function xr({scrollableRef:t,units:e}){const[n,a]=x.useState({left:!1,right:!1});x.useEffect(()=>{const o=t.current;if(!o)return;const i=()=>{const{scrollLeft:c,scrollWidth:d,clientWidth:m}=o,h=c/(d-m);a({left:h>0,right:h<1})};return i(),o.addEventListener("scroll",i),()=>o.removeEventListener("scroll",i)},[t,e]);const r=o=>{if(!t.current)return;const{clientWidth:i,scrollWidth:c}=t.current,d=c/e,m=Math.floor(i/d)*d;t.current.scrollBy({left:m*o,behavior:"smooth"})};return s.jsxs("div",{className:"pointer-events-none absolute start-0 top-0 flex h-full w-full flex-row",children:[s.jsx("div",{className:C("flex h-full w-9 items-center justify-start","from-bg-token-bg-primary bg-linear-to-r to-transparent",n.left?"opacity-100":"opacity-0","transition-opacity duration-200"),children:s.jsx(H,{color:"secondary",size:"xs",className:"border-token-border-default h-8 w-8 rounded-full",onClick:()=>r(-1),children:s.jsx(Ps,{className:"icon-md"})})}),s.jsx("div",{className:C("ms-auto flex h-full w-9 items-center justify-end","from-bg-token-bg-primary bg-linear-to-l to-transparent",n.right?"opacity-100":"opacity-0","transition-opacity duration-200"),children:s.jsx(H,{color:"secondary",size:"xs",className:"border-token-border-default h-8 w-8 rounded-full",onClick:()=>r(1),children:s.jsx(Ds,{className:"icon-md"})})})]})}function gr({contentReference:t,clientThreadId:e,messageId:n,turnIndex:a,analyticsMetadata:r}){const o=t.products,i=t.target_product_count;Kt({clientThreadId:e,messageId:n,products:o});const{showDebugConversationTurns:c}=Es(),d=pe(e,j=>{const g=Q.getNode(j,n).message.metadata?.content_references?.find(b=>b.type==="products");return t.start_idx===g?.start_idx}),m=xe(),h=ze(m,"3144771298"),p=Mt(r),u=x.useCallback((j,l)=>p("Search Content Reference Shown","search_content_reference_shown","products",{content_reference_start_index:t.start_idx,product_index:l,product_id:j.id}),[p,t.start_idx]),v=x.useCallback((j,l)=>p("Search Content Reference Clicked","search_content_reference_clicked","products",{content_reference_start_index:t.start_idx,product_index:l,product_id:j.id}),[p,t.start_idx]),{openThreadSidebar:y}=Ot(),w=(j,l)=>{e&&(v(j,l),j.offers?y({type:"product",clientThreadId:e,messageId:n,turnIndex:a,contentReferenceStartIndex:t.start_idx,productIndex:l}):window.open(j.url,"_blank"))},{setTargetedContent:k}=As(),$=(j,l)=>{Z.logEventWithStatsig("Product Targeted Reply Clicked","product_targeted_reply_clicked",{...Oe(r),content_reference_start_index:t.start_idx,product_index:l,product_id:j.id}),k({type:"object",label:j.title,createNewCompletionParams:g=>{const b=Dn(j.title);return{...g,promptMessage:Ls(g.promptMessage,{metadata:{targeted_reply:j.title,targeted_reply_label:j.title,targeted_reply_icon:"product_tag"}}),appendMessages:[...g.appendMessages??[],b]}},onCreateCompletion:({serverThreadId:g,currentLeafId:b})=>{Z.logEventWithStatsig("Targeted Reply Submitted","chatgpt_targeted_reply_submitted",{conversation_id:g,current_leaf_id:b,source_message_id:n,content_reference_start_index:t.start_idx,product_index:l,product_id:j.id})},onCleared:({serverThreadId:g,currentLeafId:b})=>{Z.logEventWithStatsig("Targeted Reply Cleared","chatgpt_targeted_reply_cleared",{conversation_id:g,current_leaf_id:b,source_message_id:n,content_reference_start_index:t.start_idx,product_index:l,product_id:j.id})}})};return s.jsxs("div",{className:"flex flex-col",children:[s.jsx(fr,{items:o,targetItemCount:i,onCardRender:(j,l)=>s.jsx(vr,{product:j,wide:l,showDebug:c}),onCardShown:u,onCardClicked:w,onReplyClicked:$}),d&&h&&s.jsxs("div",{className:"text-token-text-secondary flex text-xs hover:cursor-pointer hover:underline",onClick:()=>window.open("https://help.openai.com/en/articles/11128490","_blank"),children:[s.jsx(T,{id:"4Y5Zn5",defaultMessage:"ChatGPT chooses products independently. Learn more"}),s.jsx(Is,{className:"icon-md -ms-0.5"})]})]})}function vr({product:t,wide:e,showDebug:n=!1}){const a=t.image_urls?t.image_urls[0]:void 0,[r,o]=x.useState("contain"),i=x.useRef(null);return s.jsxs("div",{className:C("flex",e?"flex-row":"flex-col"),children:[s.jsxs("div",{className:C("relative aspect-square",e?"w-1/3":"w-full","bg-token-main-surface-secondary dark:bg-token-main-surface-primary-inverse"),children:[a?s.jsx("img",{ref:i,className:`absolute inset-0 m-0 h-full w-full mix-blend-darken object-${r}`,src:a,alt:t.title,onLoad:()=>{if(!i.current)return;const{naturalWidth:c,naturalHeight:d}=i.current,m=c/d;o(Math.abs(m-1)<.25?"cover":"contain")}}):s.jsx("div",{className:"flex aspect-square items-center justify-center",children:s.jsx(Rs,{className:"text-token-text-tertiary h-12 w-12"})}),t.featured_tag&&s.jsx("div",{className:"absolute start-3 end-3 bottom-3",children:s.jsxs("div",{className:"relative max-w-fit px-2 py-1",children:[s.jsx("div",{className:"absolute inset-0 rounded-full bg-white/60 backdrop-blur-xl"}),s.jsx("div",{className:"relative truncate text-xs font-semibold text-gray-950",children:t.featured_tag})]})})]}),s.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[s.jsx("div",{className:"line-clamp-2 leading-snug font-semibold text-ellipsis",children:t.title}),t.description&&s.jsx("div",{className:"line-clamp-3 pt-3 text-sm text-ellipsis",children:t.description}),s.jsx("div",{className:"flex-1"}),s.jsxs("div",{className:"flex flex-row items-end pt-3",children:[s.jsxs("div",{className:"flex flex-col overflow-hidden",children:[s.jsx("div",{className:"text-md leading-snug font-semibold",children:t.price}),s.jsx("div",{className:"text-token-text-secondary overflow-hidden pt-0.5 text-xs text-ellipsis whitespace-nowrap",children:t.merchants})]}),s.jsx("div",{className:"flex-1"}),t.num_reviews&&t.num_reviews>0&&s.jsxs("div",{className:"text-token-text-secondary flex w-fit flex-row gap-1 text-sm",children:[s.jsx(Fs,{rating:t.rating??0/5}),(t.rating??0).toFixed(1)]})]}),!1]})]})}function br({attribution:t,wordFadeType:e}){const n=x.useContext(fe),a=Hs(n?.message.id,t.attributable_index),r=zs();return s.jsx(jr,{isHighlighted:a,isDebugMode:r&&!1,content:t.alt??"",attributableIndex:t.attributable_index,attributions:void 0,attributionsDebug:void 0,wordFadeType:e})}const yr=x.memo(Fe);function wr({content:t,isHighlighted:e,isDebugMode:n,attributableIndex:a,attributions:r,attributionsDebug:o,wordFadeType:i}){const c=i==="indexed",d=Pt(),m=x.useMemo(()=>c?{handlers:{text:(u,v,y)=>{const w=[];for(const k of d(v.value))w.push({type:"element",tagName:"span",properties:{className:Dt.fadeIn},children:[{type:"text",value:k}]});return w}}}:void 0,[c,d]),h=x.useMemo(()=>({p:({children:u})=>s.jsx(s.Fragment,{children:u})}),[]),p=s.jsx(yr,{rehypePlugins:Vt,remarkPlugins:qt,urlTransform:Bt,remarkRehypeOptions:m,components:h,children:t});return s.jsx(_r,{isHighlighted:e,children:p})}const jr=kt.memo(wr);function _r({isHighlighted:t,className:e,children:n}){return s.jsx("span",{className:C("relative","-mx-px my-[-0.2rem] rounded px-px py-[0.2rem]",t&&"bg-[#FCECC1] dark:bg-[#64572A]","transition-colors duration-100 ease-in-out",e),children:n})}function Qe(t,e){try{return BigInt(t).toLocaleString(e)}catch{const n=Number(t);return t.includes("e")||t.includes("E")?n.toExponential():n.toLocaleString(e,{maximumFractionDigits:6})}}function kr({data:t,trackContentReferenceEvent:e}){x.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type)},[e,t.type]);const n=En().locale;return t.expression&&t.result!=null?s.jsxs("div",{className:"no-scrollbar overflow-auto sm:overflow-hidden",children:[s.jsxs("div",{className:"pb-1 text-lg font-semibold",children:[t.prefix&&s.jsx("span",{children:t.prefix}),s.jsx("span",{children:Qe(t.result,n)}),t.suffix&&s.jsx("span",{children:t.suffix})]}),s.jsx("div",{className:"text-token-text-primary tracking-wide",children:`${t.expression}=${Qe(t.result,n)}`})]}):null}function $r(t){return s.jsxs(An,{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",...t,children:[s.jsx("path",{d:"M4.42 0.75H2.8625H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V11.65C0.75 12.7546 1.64543 13.65 2.75 13.65H2.8625C2.8625 13.65 2.8625 13.65 2.8625 13.65C2.8625 13.65 4.00751 13.65 4.42 13.65M13.98 13.65H15.5375H15.65C16.7546 13.65 17.65 12.7546 17.65 11.65V2.75C17.65 1.64543 16.7546 0.75 15.65 0.75H15.5375H13.98",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M5.55283 4.21963C5.25993 3.92674 4.78506 3.92674 4.49217 4.21963C4.19927 4.51252 4.19927 4.9874 4.49217 5.28029L6.36184 7.14996L4.49217 9.01963C4.19927 9.31252 4.19927 9.7874 4.49217 10.0803C4.78506 10.3732 5.25993 10.3732 5.55283 10.0803L7.95283 7.68029C8.24572 7.3874 8.24572 6.91252 7.95283 6.61963L5.55283 4.21963Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M9.77753 8.75003C9.3357 8.75003 8.97753 9.10821 8.97753 9.55003C8.97753 9.99186 9.3357 10.35 9.77753 10.35H13.2775C13.7194 10.35 14.0775 9.99186 14.0775 9.55003C14.0775 9.10821 13.7194 8.75003 13.2775 8.75003H9.77753Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.1"})]})}function Cr({codeMessage:t,codeExecutionOutputMessage:e,onDismiss:n,FormattedText:a}){const r=M();return s.jsx(V.Root,{isOpen:!0,onClose:n,testId:"modal-code-execution",children:s.jsx(V.Overlay,{children:s.jsxs(V.Content,{className:"flex max-h-[75vh] max-w-lg flex-col overflow-hidden",children:[s.jsx(V.Header,{title:r.formatMessage(Nr.title),type:"success",closeButton:s.jsx(In,{onClick:n})}),s.jsxs("div",{className:"flex flex-1 flex-col overflow-auto",children:[s.jsx("div",{children:s.jsx(ga,{FormattedText:a,message:t,codeRendererClassName:"border-none rounded-none",removeTopBorderRadius:!0})}),s.jsx("div",{children:s.jsx(va,{message:e})})]})]})})})}const Nr=Re({title:{id:"CodeExecutionOutputModal.title",defaultMessage:"Analysis"}});function Tr({displayInfo:t,FormattedText:e,trackContentReferenceEvent:n}){const[a,r]=x.useState(!1),o=M();return x.useEffect(()=>{n("Search Content Reference Shown","search_content_reference_shown",t.type)},[n,t.type]),s.jsxs(s.Fragment,{children:[s.jsx(me,{label:o.formatMessage(Sr.viewAnalysis),side:"top",delayDuration:150,children:s.jsx("button",{onClick:()=>r(!0),children:s.jsx($r,{className:"text-token-link hover:text-token-link-hover ms-0.5 -mt-0.5 inline-block"})})}),a&&s.jsx(Cr,{FormattedText:e,codeMessage:t.codeMessage,codeExecutionOutputMessage:t.codeExecutionOutputMessage,onDismiss:()=>r(!1)})]})}const Sr=Re({viewAnalysis:{id:"viewAnalysis",defaultMessage:"View analysis"}});function Mr({iconRef:t,className:e,alt:n}){const a=t?.vector_url??t?.raster_url;return a?s.jsx("img",{src:a,className:e,alt:n}):s.jsx(Et,{className:e})}function Jt(t,e,n,a){const r=ze(n,"3958255976"),o=Os(t.cloud_doc_url??""),i=(r?t.fff_metadata?.name:void 0)??t.name,c=(r?t.fff_metadata?.display_file_type_name:void 0)??o?.type??a.formatMessage({id:"bqY3sN",defaultMessage:"File"}),d=(r&&t.fff_metadata?.display_file_type_icon?s.jsx(Mr,{alt:c,className:e,iconRef:t.fff_metadata?.display_file_type_icon}):void 0)??(o?.Icon?s.jsx(o.Icon,{alt:c,className:e}):void 0)??s.jsx(Et,{alt:c,className:e}),m=(r?t.fff_metadata?.capabilities?.user_view:void 0)??t.cloud_doc_url;let h;r&&t.fff_metadata?.snippet&&t.fff_metadata?.snippet.content.content_type==="text"?h=t.fff_metadata.snippet.content.text:h=t.description;const p=(r?t.fff_metadata?.file_last_modified_time:void 0)??t.last_modified_time,u=r?t.fff_metadata?.file_created_time:void 0;return{fileName:i,fileTypeDisplayName:c,fileTypeIcon:d,url:m,snippet:h,fileLastModifiedTime:p,fileCreatedTime:u}}const Qt="text-token-text-secondary inline-flex items-center rounded-full bg-[#f4f4f4] select-none dark:bg-token-main-surface-secondary",Pr=C(Qt," h-[22px] px-2 text-[0.5em] font-medium"),rv=C(Qt,"h-[25px] px-3 text-xs"),et=24;function Dr(t){const e=t.split(".");let n=t;return e.length>1&&e.slice(0,-1).some(a=>a.length>0)&&(n=e.slice(0,-1).join(".")),n.length>et&&(n=n.slice(0,et-1)+"…"),n}function Er({fileRef:t,index:e,trackContentReferenceEvent:n}){const a=Ws(),r=x.useContext(fe),o=x.useMemo(()=>({source:t.source,index:e}),[t.source,e]);x.useEffect(()=>{n("File Citation Shown","file_citation_shown","file",o)},[]);const i=x.useCallback(h=>{h?n("File Citation Hovered","file_citation_hovered","file",o):n("File Citation Unhovered","file_citation_unhovered","file",o)},[o,n]),c=x.useCallback(()=>{n("File Citation Clicked","file_citation_clicked","file",o)},[o,n]),d=x.useCallback(()=>a(t.id,t.name),[a,t.id,t.name]),m=pe(r?.analyticsMetadata.clientThreadId??Ln,h=>h?.mode);return Us(m)?m.gizmo_id&&Ys(m.gizmo_id)?s.jsx("span",{className:C(Pr,"ms-1"),title:t.name,children:Dr(t.name)}):null:s.jsx(Ar,{fileItem:t,onClickDownloadFile:d,trackTooltipOpenChange:i,trackCloudLinkClick:c})}function Ar({fileItem:t,className:e,trackTooltipOpenChange:n,trackCloudLinkClick:a,onClickDownloadFile:r}){const o=M(),i=xe(),{fileName:c,fileTypeDisplayName:d,fileTypeIcon:m,url:h,snippet:p}=Jt(t,"h-[16px] w-[16px] object-contain",i,o),u=C("ms-1 flex h-[22px] items-center rounded-xl px-2 relative bottom-[-2px]","bg-[#f4f4f4] text-token-text-secondary! hover:bg-token-text-primary hover:text-token-main-surface-secondary! dark:bg-token-main-surface-secondary dark:hover:bg-token-text-primary",e),v=s.jsx("span",{className:"relative inline-flex items-center",children:h?s.jsx(Y,{href:h,className:u,onClick:a,children:m}):s.jsx("button",{onClick:r,className:u,children:m})});return s.jsx(Ir,{name:c,href:h,snippet:p,icon:m,contentType:d,trackTooltipOpenChange:n,children:v})}function Ir({href:t,name:e,snippet:n,children:a,className:r,icon:o,contentType:i,trackTooltipOpenChange:c}){const d=ge();return s.jsx(me,{label:s.jsxs(Y,{href:t,className:C("text-token-text-primary flex max-w-80 flex-col gap-1 text-start text-xs font-normal no-underline!",r),children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"h-4 w-4 shrink-0 overflow-hidden rounded-full",children:o}),s.jsx("div",{className:"text-token-text-primary truncate",children:i})]}),s.jsx("div",{className:"line-clamp-2 text-sm font-medium",children:e}),n&&s.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm",children:n})]}),onOpenChange:c,side:"bottom",delayDuration:150,theme:d?"default":"white",align:"start",customPaddingClassName:"p-3",cornerRadius:"xl",customBorderClassName:"border-token-border-default border",wide:!0,children:a})}function Lr(t,e){return new Date(t).toLocaleDateString(e,{month:"long",day:"numeric",year:"numeric"})}function Rr({metadata:t,trackContentReferenceEvent:e}){return t.items.length===0?null:s.jsx("div",{className:"mt-6 flex flex-col gap-3",children:t.items.map((n,a)=>s.jsx(Fr,{item:n,index:a,trackContentReferenceEvent:e},a))})}function Fr({item:t,index:e,trackContentReferenceEvent:n}){const a=M(),r=xe(),{fileName:o,fileTypeDisplayName:i,fileTypeIcon:c,snippet:d,url:m,fileLastModifiedTime:h}=Jt(t,"icon-md object-contain",r,a),p={title:o,description:d?.toString()??"",index:e};return x.useEffect(()=>{n("Contextual Answers Content Reference Shown","contextual_answers_content_reference_shown","file_navlist",p)},[]),s.jsxs(Y,{className:"group/nav-list relative flex items-center gap-6 py-1.5",href:m??"/",onClick:()=>{n("Contextual Answers Content Reference Clicked","contextual_answers_content_reference_clicked","file_navlist",p)},children:[s.jsx("div",{className:"absolute start-0 top-0 bottom-0 w-[3px] rounded-t-lg rounded-b-lg bg-black/10"}),s.jsxs("div",{className:"ms-4 flex grow flex-col gap-1 overflow-hidden text-ellipsis",children:[s.jsxs("div",{className:"not-prose text-token-text-primary flex items-center gap-1.5 text-sm",children:[c,s.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm",children:i})]}),s.jsx("div",{className:"text-token-link decoration-token-link line-clamp-2 font-semibold group-hover/nav-list:underline",children:o}),s.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm leading-snug font-normal",children:d}),h&&s.jsx("div",{className:"text-token-text-secondary text-sm",children:Lr(h,a.locale)})]})]})}var se={exports:{}},tt;function Hr(){return tt||(tt=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(a){if(a===null||a===!0||a===!1)return NaN;var r=Number(a);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}t.exports=e.default}(se,se.exports)),se.exports}var ne={exports:{}},st;function zr(){return st||(st=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(a){var r=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return r.setUTCFullYear(a.getFullYear()),a.getTime()-r.getTime()}t.exports=e.default}(ne,ne.exports)),ne.exports}function Or(t,e){var n=Br(e);return n.formatToParts?Ur(n,t):Yr(n,t)}var Wr={year:0,month:1,day:2,hour:3,minute:4,second:5};function Ur(t,e){try{for(var n=t.formatToParts(e),a=[],r=0;r<n.length;r++){var o=Wr[n[r].type];o>=0&&(a[o]=parseInt(n[r].value,10))}return a}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function Yr(t,e){var n=t.format(e),a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[a[3],a[1],a[2],a[4],a[5],a[6]]}var $e={};function Br(t){if(!$e[t]){var e=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=e==="06/25/2014, 00:00:00"||e==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";$e[t]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return $e[t]}function es(t,e,n,a,r,o,i){var c=new Date(0);return c.setUTCFullYear(t,e,n),c.setUTCHours(a,r,o,i),c}var nt=36e5,qr=6e4,Ce={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function ts(t,e,n){var a,r;if(!t||(a=Ce.timezoneZ.exec(t),a))return 0;var o;if(a=Ce.timezoneHH.exec(t),a)return o=parseInt(a[1],10),at(o)?-(o*nt):NaN;if(a=Ce.timezoneHHMM.exec(t),a){o=parseInt(a[2],10);var i=parseInt(a[3],10);return at(o,i)?(r=Math.abs(o)*nt+i*qr,a[1]==="+"?-r:r):NaN}if(Gr(t)){e=new Date(e||Date.now());var c=n?e:Vr(e),d=Ae(c,t),m=n?d:Zr(e,d,t);return-m}return NaN}function Vr(t){return es(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function Ae(t,e){var n=Or(t,e),a=es(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),r=t.getTime(),o=r%1e3;return r-=o>=0?o:1e3+o,a-r}function Zr(t,e,n){var a=t.getTime(),r=a-e,o=Ae(new Date(r),n);if(e===o)return e;r-=o-e;var i=Ae(new Date(r),n);return o===i?o:Math.max(o,i)}function at(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var rt={};function Gr(t){if(rt[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),rt[t]=!0,!0}catch{return!1}}var Xr=Hr();const Kr=$t(Xr);var Jr=zr();const ot=$t(Jr);var Qr=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Ne=36e5,it=6e4,eo=2,D={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Qr};function Ie(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var n={},a=n.additionalDigits==null?eo:Kr(n.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var r=to(t),o=so(r.date,a),i=o.year,c=o.restDateString,d=no(c,i);if(isNaN(d))return new Date(NaN);if(d){var m=d.getTime(),h=0,p;if(r.time&&(h=ao(r.time),isNaN(h)))return new Date(NaN);if(r.timeZone||n.timeZone){if(p=ts(r.timeZone||n.timeZone,new Date(m+h)),isNaN(p))return new Date(NaN)}else p=ot(new Date(m+h)),p=ot(new Date(m+h+p));return new Date(m+h+p)}else return new Date(NaN)}function to(t){var e={},n=D.dateTimePattern.exec(t),a;if(n?(e.date=n[1],a=n[3]):(n=D.datePattern.exec(t),n?(e.date=n[1],a=n[2]):(e.date=null,a=t)),a){var r=D.timeZone.exec(a);r?(e.time=a.replace(r[1],""),e.timeZone=r[1].trim()):e.time=a}return e}function so(t,e){var n=D.YYY[e],a=D.YYYYY[e],r;if(r=D.YYYY.exec(t)||a.exec(t),r){var o=r[1];return{year:parseInt(o,10),restDateString:t.slice(o.length)}}if(r=D.YY.exec(t)||n.exec(t),r){var i=r[1];return{year:parseInt(i,10)*100,restDateString:t.slice(i.length)}}return{year:null}}function no(t,e){if(e===null)return null;var n,a,r,o;if(t.length===0)return a=new Date(0),a.setUTCFullYear(e),a;if(n=D.MM.exec(t),n)return a=new Date(0),r=parseInt(n[1],10)-1,lt(e,r)?(a.setUTCFullYear(e,r),a):new Date(NaN);if(n=D.DDD.exec(t),n){a=new Date(0);var i=parseInt(n[1],10);return io(e,i)?(a.setUTCFullYear(e,0,i),a):new Date(NaN)}if(n=D.MMDD.exec(t),n){a=new Date(0),r=parseInt(n[1],10)-1;var c=parseInt(n[2],10);return lt(e,r,c)?(a.setUTCFullYear(e,r,c),a):new Date(NaN)}if(n=D.Www.exec(t),n)return o=parseInt(n[1],10)-1,dt(e,o)?ct(e,o):new Date(NaN);if(n=D.WwwD.exec(t),n){o=parseInt(n[1],10)-1;var d=parseInt(n[2],10)-1;return dt(e,o,d)?ct(e,o,d):new Date(NaN)}return null}function ao(t){var e,n,a;if(e=D.HH.exec(t),e)return n=parseFloat(e[1].replace(",",".")),Te(n)?n%24*Ne:NaN;if(e=D.HHMM.exec(t),e)return n=parseInt(e[1],10),a=parseFloat(e[2].replace(",",".")),Te(n,a)?n%24*Ne+a*it:NaN;if(e=D.HHMMSS.exec(t),e){n=parseInt(e[1],10),a=parseInt(e[2],10);var r=parseFloat(e[3].replace(",","."));return Te(n,a,r)?n%24*Ne+a*it+r*1e3:NaN}return null}function ct(t,e,n){e=e||0,n=n||0;var a=new Date(0);a.setUTCFullYear(t,0,4);var r=a.getUTCDay()||7,o=e*7+n+1-r;return a.setUTCDate(a.getUTCDate()+o),a}var ro=[31,28,31,30,31,30,31,31,30,31,30,31],oo=[31,29,31,30,31,30,31,31,30,31,30,31];function ss(t){return t%400===0||t%4===0&&t%100!==0}function lt(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;var a=ss(t);if(a&&n>oo[e]||!a&&n>ro[e])return!1}return!0}function io(t,e){if(e<1)return!1;var n=ss(t);return!(n&&e>366||!n&&e>365)}function dt(t,e,n){return!(e<0||e>52||n!=null&&(n<0||n>6))}function Te(t,e,n){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}function G(t,e,n){var a=Ie(t,n),r=ts(e,a,!0),o=new Date(a.getTime()-r),i=new Date(0);return i.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),i.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),i}var Se={line:{color:"#F66",width:1,dashPattern:[]},sync:{enabled:!0,group:1,suppressTooltips:!1},zoom:{enabled:!0,zoomboxBackgroundColor:"rgba(66,133,244,0.2)",zoomboxBorderColor:"#48F",zoomButtonText:"Reset Zoom",zoomButtonClass:"reset-zoom"},snap:{enabled:!1},callbacks:{beforeZoom:function(t,e){return!0},afterZoom:function(t,e){}}},co={id:"crosshair",afterInit:function(t){if(t.config.options.scales.x){var e=t.config.options.scales.x.type;if(!(e!=="linear"&&e!=="time"&&e!=="category"&&e!=="logarithmic")){t.options.plugins.crosshair===void 0&&(t.options.plugins.crosshair=Se),t.crosshair={enabled:!1,suppressUpdate:!1,x:null,originalData:[],originalXRange:{},dragStarted:!1,dragStartX:null,dragEndX:null,suppressTooltips:!1,ignoreNextEvents:0,reset:function(){this.resetZoom(t,!1,!1)}.bind(this)};var n=this.getOption(t,"sync","enabled");n&&(t.crosshair.syncEventHandler=function(a){this.handleSyncEvent(t,a)}.bind(this),t.crosshair.resetZoomEventHandler=function(a){var r=this.getOption(t,"sync","group");a.chartId!==t.id&&a.syncGroup===r&&this.resetZoom(t,!0)}.bind(this),window.addEventListener("sync-event",t.crosshair.syncEventHandler),window.addEventListener("reset-zoom-event",t.crosshair.resetZoomEventHandler)),t.panZoom=this.panZoom.bind(this,t)}}},afterDestroy:function(t){var e=this.getOption(t,"sync","enabled");e&&(window.removeEventListener("sync-event",t.crosshair.syncEventHandler),window.removeEventListener("reset-zoom-event",t.crosshair.resetZoomEventHandler))},panZoom:function(t,e){if(t.crosshair.originalData.length!==0){var n=t.crosshair.end-t.crosshair.start,a=t.crosshair.min,r=t.crosshair.max;e<0?(t.crosshair.start=Math.max(t.crosshair.start+e,a),t.crosshair.end=t.crosshair.start===a?a+n:t.crosshair.end+e):(t.crosshair.end=Math.min(t.crosshair.end+e,t.crosshair.max),t.crosshair.start=t.crosshair.end===r?r-n:t.crosshair.start+e),this.doZoom(t,t.crosshair.start,t.crosshair.end)}},getOption:function(t,e,n){return Ge(t.options.plugins.crosshair[e]?t.options.plugins.crosshair[e][n]:void 0,Se[e][n])},getXScale:function(t){return t.data.datasets.length?t.scales[t.getDatasetMeta(0).xAxisID]:null},getYScale:function(t){return t.scales[t.getDatasetMeta(0).yAxisID]},handleSyncEvent:function(t,e){var n=this.getOption(t,"sync","group");if(e.chartId!==t.id&&e.syncGroup===n){var a=this.getXScale(t);if(a){var r=e.original.native.buttons===void 0?e.original.native.which:e.original.native.buttons;e.original.type==="mouseup"&&(r=0);var o={type:e.original.type=="click"?"mousemove":e.original.type,chart:t,x:a.getPixelForValue(e.xValue),y:e.original.y,native:{buttons:r},stop:!0};t._eventHandler(o)}}},afterEvent:function(t,e){if(t.config.options.scales.x.length==0)return;let n=e.event;var a=t.config.options.scales.x.type;if(!(a!=="linear"&&a!=="time"&&a!=="category"&&xscaleType!=="logarithmic")){var r=this.getXScale(t);if(r){if(t.crosshair.ignoreNextEvents>0){t.crosshair.ignoreNextEvents-=1;return}var o=n.native.buttons===void 0?n.native.which:n.native.buttons;n.native.type==="mouseup"&&(o=0);var i=this.getOption(t,"sync","enabled"),c=this.getOption(t,"sync","group");if(!n.stop&&i){var e=new CustomEvent("sync-event");e.chartId=t.id,e.syncGroup=c,e.original=n,e.xValue=r.getValueForPixel(n.x),window.dispatchEvent(e)}var d=this.getOption(t,"sync","suppressTooltips");if(t.crosshair.suppressTooltips=n.stop&&d,t.crosshair.enabled=n.type!=="mouseout"&&n.x>r.getPixelForValue(r.min)&&n.x<r.getPixelForValue(r.max),!t.crosshair.enabled&&!t.crosshair.suppressUpdate)return n.x>r.getPixelForValue(r.max)&&(t.crosshair.suppressUpdate=!0,t.update("none")),t.crosshair.dragStarted=!1,!1;t.crosshair.suppressUpdate=!1;var m=this.getOption(t,"zoom","enabled");if(o===1&&!t.crosshair.dragStarted&&m&&(t.crosshair.dragStartX=n.x,t.crosshair.dragStarted=!0),t.crosshair.dragStarted&&o===0){t.crosshair.dragStarted=!1;var h=r.getValueForPixel(t.crosshair.dragStartX),p=r.getValueForPixel(t.crosshair.x);Math.abs(t.crosshair.dragStartX-t.crosshair.x)>1&&this.doZoom(t,h,p),t.update("none")}t.crosshair.x=n.x,t.draw()}}},afterDraw:function(t){if(t.crosshair.enabled)return t.crosshair.dragStarted?this.drawZoombox(t):(this.drawTraceLine(t),this.interpolateValues(t),this.drawTracePoints(t)),!0},beforeTooltipDraw:function(t){return!t.crosshair.dragStarted&&!t.crosshair.suppressTooltips},resetZoom:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(n){if(t.crosshair.originalData.length>0)for(var a=0;a<t.data.datasets.length;a++){var r=t.data.datasets[a];r.data=t.crosshair.originalData.shift(0)}t.crosshair.originalXRange.min?(t.options.scales.x.min=t.crosshair.originalXRange.min,t.crosshair.originalXRange.min=null):delete t.options.scales.x.min,t.crosshair.originalXRange.max?(t.options.scales.x.max=t.crosshair.originalXRange.max,t.crosshair.originalXRange.max=null):delete t.options.scales.x.max}t.crosshair.button&&t.crosshair.button.parentNode&&(t.crosshair.button.parentNode.removeChild(t.crosshair.button),t.crosshair.button=!1);var o=this.getOption(t,"sync","enabled");if(!e&&n&&o){var i=this.getOption(t,"sync","group"),c=new CustomEvent("reset-zoom-event");c.chartId=t.id,c.syncGroup=i,window.dispatchEvent(c)}n&&t.update("none")},doZoom:function(t,e,n){if(e>n){var a=e;e=n,n=a}var r=Ge(t.options.plugins.crosshair.callbacks?t.options.plugins.crosshair.callbacks.beforeZoom:void 0,Se.callbacks.beforeZoom);if(!r(e,n))return!1;if(t.crosshair.dragStarted=!1,t.options.scales.x.min&&t.crosshair.originalData.length===0&&(t.crosshair.originalXRange.min=t.options.scales.x.min),t.options.scales.x.max&&t.crosshair.originalData.length===0&&(t.crosshair.originalXRange.max=t.options.scales.x.max),!t.crosshair.button){var o=document.createElement("button"),i=this.getOption(t,"zoom","zoomButtonText"),c=this.getOption(t,"zoom","zoomButtonClass"),d=document.createTextNode(i);o.appendChild(d),o.className=c,o.addEventListener("click",function(){this.resetZoom(t)}.bind(this)),t.canvas.parentNode.appendChild(o),t.crosshair.button=o}t.options.scales.x.min=e,t.options.scales.x.max=n;var m=t.crosshair.originalData.length===0,h=t.config.options.scales.x.type!=="category";if(h)for(var p=0;p<t.data.datasets.length;p++){var u=[],v=0,y=!1,w=!1;m&&(t.crosshair.originalData[p]=t.data.datasets[p].data);for(var k=t.crosshair.originalData[p],$=0;$<k.length;$++){var j=k[$],l=j.x!==void 0?j.x:NaN;l>=e&&!y&&v>0&&(u.push(k[v-1]),y=!0),l>=e&&l<=n&&u.push(j),l>n&&!w&&v<k.length&&(u.push(j),w=!0),v+=1}t.data.datasets[p].data=u}if(t.crosshair.start=e,t.crosshair.end=n,m){var g=this.getXScale(t);t.crosshair.min=g.min,t.crosshair.max=g.max}t.crosshair.ignoreNextEvents=2,t.update("none");var b=this.getOption(t,"callbacks","afterZoom");b(e,n)},drawZoombox:function(t){var e=this.getYScale(t),n=this.getOption(t,"zoom","zoomboxBorderColor"),a=this.getOption(t,"zoom","zoomboxBackgroundColor");t.ctx.beginPath(),t.ctx.rect(t.crosshair.dragStartX,e.getPixelForValue(e.max),t.crosshair.x-t.crosshair.dragStartX,e.getPixelForValue(e.min)-e.getPixelForValue(e.max)),t.ctx.lineWidth=1,t.ctx.strokeStyle=n,t.ctx.fillStyle=a,t.ctx.fill(),t.ctx.fillStyle="",t.ctx.stroke(),t.ctx.closePath()},drawTraceLine:function(t){var e=this.getYScale(t),n=this.getOption(t,"line","width"),a=this.getOption(t,"line","color"),r=this.getOption(t,"line","dashPattern"),o=this.getOption(t,"snap","enabled"),i=t.crosshair.x;o&&t._active.length&&(i=t._active[0].element.x),t.ctx.beginPath(),t.ctx.setLineDash(r),t.ctx.moveTo(i,e.getPixelForValue(e.max)),t.ctx.lineWidth=n,t.ctx.strokeStyle=a,t.ctx.lineTo(i,e.getPixelForValue(e.min)),t.ctx.stroke(),t.ctx.setLineDash([])},drawTracePoints:function(t){for(var e=0;e<t.data.datasets.length;e++){var n=t.data.datasets[e],a=t.getDatasetMeta(e),r=t.scales[a.yAxisID];a.hidden||!n.interpolate||(t.ctx.beginPath(),t.ctx.arc(t.crosshair.x,r.getPixelForValue(n.interpolatedValue),3,0,2*Math.PI,!1),t.ctx.fillStyle="white",t.ctx.lineWidth=2,t.ctx.strokeStyle=n.borderColor,t.ctx.fill(),t.ctx.stroke())}},interpolateValues:function(t){for(var e=0;e<t.data.datasets.length;e++){var n=t.data.datasets[e],a=t.getDatasetMeta(e),r=t.scales[a.xAxisID],o=r.getValueForPixel(t.crosshair.x);if(!(a.hidden||!n.interpolate)){var i=n.data,c=i.findIndex(function(p){return p.x>=o}),d=i[c-1],m=i[c];if(t.data.datasets[e].steppedLine&&d)n.interpolatedValue=d.y;else if(d&&m){var h=(m.y-d.y)/(m.x-d.x);n.interpolatedValue=d.y+(o-d.x)*h}else n.interpolatedValue=NaN}}}};const ie=(t=1)=>`rgba(48, 166, 51, ${t})`,ce=(t=1)=>`rgba(241, 77, 66, ${t})`,ut="text-[#30a633]",ht="text-[#f14d42]",lo=["1d","5d","1m","6m","ytd","1y","5y","max"];function uo({histories:t,selectedInterval:e,onSelectHistoryInterval:n}){const a=Object.keys(t?.quotes??{});return s.jsx("div",{className:"text-token-text-tertiary inline-flex items-start justify-between rounded-[10px] bg-[#f4f4f4] p-[3px] text-xs font-semibold sm:justify-start sm:gap-1 dark:bg-[#393939]",children:a.map(r=>s.jsx("button",{onClick:()=>{n?.(r)},className:C("border border-transparent px-3 py-1.5 text-xs font-semibold uppercase",e===r?"border-token-border-default! bg-token-main-surface-primary text-token-text-primary shadow-xxs dark:border-token-border-medium! rounded-lg":"hover:text-token-text-secondary"),children:ns[r].label},r))})}const ns={"1d":{label:"1D",formatTimestampLabel:mt,formatTimestampTooltip:mt,maxTicksLimit:6,lineTension:.1},"5d":{label:"5D",formatTimestampLabel:ft,formatTimestampTooltip:mo,maxTicksLimit:6,lineTension:.1},"1m":{label:"1M",formatTimestampLabel:ft,formatTimestampTooltip:fo,maxTicksLimit:6,lineTension:.1,useUtc:!0},"6m":{label:"6M",formatTimestampLabel:Me,formatTimestampTooltip:X,maxTicksLimit:5,lineTension:.1,useUtc:!0},ytd:{label:"YTD",formatTimestampLabel:Me,formatTimestampTooltip:X,maxTicksLimit:5,lineTension:.1,useUtc:!0},"1y":{label:"1Y",formatTimestampLabel:Me,formatTimestampTooltip:X,maxTicksLimit:5,lineTension:.2,useUtc:!0},"5y":{label:"5Y",formatTimestampLabel:pt,formatTimestampTooltip:X,maxTicksLimit:5,lineTension:.2,useUtc:!0},max:{label:"max",formatTimestampLabel:pt,formatTimestampTooltip:X,maxTicksLimit:5,lineTension:.2,useUtc:!0}};function ho(t){return t?lo.filter(n=>n in t.quotes).find(n=>t.quotes[n].length>0):void 0}function B(t,e){return G(new Date(t*1e3),e??"America/New_York")}function mt(t,e,n){const a=B(e,n);return t.formatTime(a,{hour:"numeric",minute:"numeric"})}function mo(t,e,n){const a=B(e,n);return t.formatDate(a,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function X(t,e,n){const a=B(e,n);return t.formatDate(a,{month:"short",day:"numeric",year:"numeric"})}function Me(t,e,n){const a=B(e,n);return t.formatDate(a,{month:"short",year:"numeric"})}function ft(t,e,n){const a=B(e,n);return t.formatDate(a,{month:"short",day:"numeric"})}function fo(t,e,n){const a=B(e,n);return t.formatDate(a,{weekday:"short",month:"short",day:"numeric"})}function pt(t,e,n){const a=B(e,n);return t.formatDate(a,{year:"numeric"})}ba.register(ya,wa,ja,_a,ka,$a,Ca,Na,Ta,co,Sa);const po=100,xt={color:"#b4b4b4",font:{size:10,weight:"600",family:"Menlo"}};function xo({isUp:t,histories:e,selectedInterval:n,setHighlightedPrice:a,latestTradingPeriod:r,timezone:o}){return s.jsx(s.Fragment,{children:e&&n&&r?s.jsx(go,{isUp:t,histories:e,selectedInterval:n,latestTradingPeriod:r,timezone:o,setHighlightedPrice:a}):s.jsx(K,{className:"h-full",index:1,width:100})})}function go({isUp:t,histories:e,selectedInterval:n,latestTradingPeriod:a,timezone:r,setHighlightedPrice:o}){const[i,c]=x.useState(null),[d,m]=x.useState(!1),h=n==="1d",p=x.useMemo(()=>{let g=e.quotes[n].filter(b=>b.close>=0);if(h&&a){const b=a.regular.start_timestamp,N=a.regular.end_timestamp;if(g=g.filter(S=>S.timestamp>=b&&S.timestamp<=N),g.length===0||g[g.length-1].timestamp<N){let _=g.length>0?g[g.length-1].timestamp:b-600;for(;_<N;)_+=600,g.push({timestamp:_,close:null})}}return g},[e,n,h,a]),u=ns[n],{formatTimestampTooltip:v,maxTicksLimit:y,useUtc:w=!1}=u,k=M(),$=He(),j=ge(),l=x.useMemo(()=>{const{formatTimestampLabel:g,lineTension:b}=u;return{labels:p.map(N=>g(k,N.timestamp,w?"UTC":r)),datasets:[{data:p.map(N=>N.close),borderColor:t?ie():ce(),pointRadius:0,pointHoverRadius:4,pointStyle:"circle",pointBackgroundColor:t?ie():ce(),pointHoverBorderWidth:2,pointHoverBorderColor:"rgba(255, 255, 255, 1)",backgroundColor:function(N){const{ctx:S,chartArea:_}=N.chart;if(_)return bo(S,_,t)},fill:!0,borderWidth:2,lineTension:b??.4}]}},[u,p,t,w,r,k]);return s.jsx("div",{className:"flex h-full flex-col gap-6",children:s.jsxs("div",{className:"relative h-full",onMouseEnter:()=>m(!0),onMouseLeave:()=>{m(!1),o(null)},children:[s.jsx(Ma,{options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},hover:{mode:d?"index":"point"},animation:!1,scales:{x:{afterBuildTicks:g=>{if(g.ticks.length>y)if(h)g.ticks=g.ticks.filter((b,N)=>p[N].timestamp%($?3600:7200)===0);else{const b=Math.ceil(g.ticks.length/(y-1));g.ticks=g.ticks.filter((N,S)=>S>0&&(S%b===0||S===g.ticks.length-1))}},grid:{display:!1},ticks:{...xt,align:"end"}},y:{ticks:{...xt,maxTicksLimit:7},border:{display:!1},grid:{color:j?"rgba(255, 255, 255, 0.1)":"rgba(229, 229, 229, 0.5)"}}},plugins:{datalabels:{display:!1},legend:{display:!1},tooltip:{enabled:!1,animation:!1,displayColors:!1,callbacks:{title:function(g){const b=g[0];if(!b)return"";const N=p[b.dataIndex]?.timestamp;return N?v(k,N,w?"UTC":r):""}},external:({tooltip:g})=>{d&&g.opacity>0&&o(J(g.dataPoints?.[0]?.parsed?.y??0)),c(b=>{const N=g.chart.width,S=g.caretX>N-po;return!b||b.x!==g.caretX||b.y!==g.caretY||b.opacity!==g.opacity||b.flip!==S?{...b,x:g.caretX,y:g.caretY,dateLabel:g.title?.[0],value:J(g.dataPoints?.[0]?.parsed?.y??0),opacity:g.opacity,flip:S}:b})}},dropShadow:!1,crosshair:{line:{color:j?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",width:.5},zoom:{enabled:!1}}}},data:l}),s.jsx(vo,{tooltipData:i})]})})}function vo({tooltipData:t}){return!t||!t.opacity?null:s.jsx("div",{style:{left:t.x-5,top:10,transform:"translate(-50%, -50%)"},className:C("text-token-main-surface-primary dark:bg-token-main-surface-secondary pointer-events-none absolute translate-y-[-100%] rounded-lg bg-black px-2 py-1 font-mono font-semibold whitespace-nowrap dark:text-white"),children:s.jsx("div",{className:"text-xs",children:t.dateLabel})})}function bo(t,e,n){const a=t.createLinearGradient(0,e.top,0,e.bottom);return a.addColorStop(0,n?ie(.4):ce(.4)),a.addColorStop(1,n?ie(0):ce(0)),a}function J(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}function L({label:t,value:e,className:n}){return s.jsxs("div",{className:C("flex w-full flex-1 flex-row justify-between text-sm",n),children:[s.jsx("span",{className:"text-token-text-secondary font-normal whitespace-nowrap",children:t}),s.jsx("span",{className:"text-token-text-primary font-normal whitespace-nowrap",children:e})]})}function yo({metrics:t}){const e=M(),n=!!(t.marketCap&&t.peRatio&&t.eps);return s.jsx("div",{className:"border-token-border-default flex flex-col gap-1 rounded-b-lg border-t bg-[#f4f4f4] px-4 py-3 dark:bg-[#393939]",children:s.jsxs("div",{className:C("grid grid-cols-2 gap-x-10 gap-y-3 lg:grid-cols-3 lg:gap-x-6"),children:[s.jsx(L,{label:e.formatMessage({id:"MDHEj7",defaultMessage:"Open"}),value:e.formatNumber(t.openPrice,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-1"}),s.jsx(L,{label:e.formatMessage({id:"PboNMC",defaultMessage:"Volume"}),value:e.formatNumber(t.intradayVolume,{notation:"compact",maximumFractionDigits:1}),className:C("order-2",!n&&"lg:order-last")}),s.jsxs("div",{className:"order-4 row-span-2 flex flex-col gap-3",children:[s.jsx(L,{label:e.formatMessage({id:"bresUW",defaultMessage:"Day Low"}),value:e.formatNumber(t.intradayLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx(L,{label:e.formatMessage({id:"oWyv5V",defaultMessage:"Day High"}),value:e.formatNumber(t.intradayHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]}),s.jsxs("div",{className:"order-5 row-span-2 flex flex-col gap-3",children:[s.jsx(L,{label:e.formatMessage({id:"DcEYIK",defaultMessage:"Year Low"}),value:e.formatNumber(t.fiftyTwoWeekLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),s.jsx(L,{label:e.formatMessage({id:"ZfFtJ4",defaultMessage:"Year High"}),value:e.formatNumber(t.fiftyTwoWeekHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]}),t.marketCap&&s.jsx(L,{label:e.formatMessage({id:"BzyP4Y",defaultMessage:"Market Cap"}),value:e.formatNumber(t.marketCap,{notation:"compact",maximumFractionDigits:2}),className:"order-last lg:order-3"}),t.peRatio&&t.eps&&s.jsxs(s.Fragment,{children:[s.jsx(L,{label:e.formatMessage({id:"edGd+S",defaultMessage:"EPS (TTM)"}),value:e.formatNumber(t.eps,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-last"}),s.jsx(L,{label:e.formatMessage({id:"AhpCu1",defaultMessage:"P/E Ratio"}),value:e.formatNumber(t.peRatio,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-last"})]})]})})}function wo({data:t,priceChange:e,highlightedPrice:n,extendedPriceChange:a,url:r}){function o(i,c="intraday",d=null){const{isUp:m,changePercentage:h,changeLabel:p,changeAmount:u}=i,v=Math.abs(h).toFixed(2),y=J(u);return s.jsxs("span",{className:"flex min-w-0 items-center gap-1",children:[c==="extended_hours"&&d!=null&&s.jsx("span",{className:"font-semibold",children:s.jsx(T,{id:"HWwWpW",defaultMessage:"{price}",values:{price:d}})}),s.jsx("span",{className:C("font-semibold",m?ut:ht),children:s.jsx(T,{id:"3x4Lkl",defaultMessage:"{sign}{changeAmount}",values:{changeAmount:y,sign:m?"+":""}})}),s.jsx("span",{className:C("font-semibold",m?ut:ht),children:s.jsx(T,{id:"MbfF1T",defaultMessage:"({sign}{changePercentage}%)",values:{changePercentage:v,sign:m?"+":"-"}})}),c==="extended_hours"?s.jsx("span",{className:"text-token-text-primary min-w-0 truncate",children:p}):s.jsx("span",{className:"text-token-text-primary min-w-0 truncate",children:p})]})}return s.jsxs("div",{children:[s.jsx("div",{className:"mt-2 text-sm",children:t?s.jsx(T,{id:"+2WHuv",defaultMessage:"{name} ({ticker})",values:{name:t.asset.name,ticker:t.asset.ticker}}):s.jsx("div",{className:"w-32 font-medium",children:s.jsx(K,{index:9,width:100})})}),s.jsx("div",{className:"text-token-text-tertiary text-sm",children:t?s.jsx(s.Fragment,{children:r!=null&&s.jsxs(s.Fragment,{children:[" · ",s.jsx(Y,{href:r,className:"text-token-link hover:underline",children:At(r,"hostname")})]})}):s.jsx("div",{className:"mt-2 w-36",children:s.jsx(K,{index:6,width:100})})}),s.jsx("div",{className:"mt-2 flex text-4xl font-semibold",children:t?s.jsx(T,{id:"s+1uly",defaultMessage:"{price}",values:{price:n??J(t.price.price)}}):s.jsx("div",{className:"w-32",children:s.jsx(K,{index:0,width:100})})}),s.jsx("div",{className:"mt-2 flex items-center justify-start gap-1 text-sm",children:e?o(e):s.jsx("div",{className:"mt-2 w-40",children:s.jsx(K,{index:3,width:100})})}),s.jsx("div",{className:"mt-0.5 flex items-center justify-start gap-1 text-sm",children:t?.price?.extended_price!=null&&a!=null&&o(a,"extended_hours",J(t.price.extended_price))})]})}function jo({contentReference:t,trackContentReferenceEvent:e}){const n=M();x.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown","stock")},[e]);const a=ho(t?.stock?.histories),r=t?.stock,[o,i]=x.useState(a),[c,d]=x.useState(null),m=o==="1d",h=r?.histories?.quotes?.[o??""]?.[0],p=o&&o in ae?o:void 0,u=r&&(h&&!m?{changePercentage:(r.price.price-h.close)/h.close*100,changeAmount:r.price.price-h.close,changeLabel:p?n.formatMessage(ae[p]):"",isUp:r.price.price>h.close}:r.price.change_percent&&r.price.change?{changePercentage:r.price.change_percent*100,changeAmount:r.price.change,changeLabel:ko(r.price.latest_trade_timestamp,r.asset.timezone,n),isUp:r.price.change?r.price.change>0:!1}:null),v=r&&r.price.extended_price!=null&&r.price.extended_change_percent!=null&&r.price.extended_change!=null?{changePercentage:r.price.extended_change_percent*100,changeAmount:r.price.extended_change,changeLabel:n.formatMessage(_o(r.price.market_status)??ae.extended),isUp:r.price.extended_change>0}:null,{fiftyTwoWeekHigh:y,fiftyTwoWeekLow:w}=x.useMemo(()=>{const j=r?.histories?.quotes["1y"];if(!j)return{fiftyTwoWeekHigh:null,fiftyTwoWeekLow:null};const l=j.map(b=>b.high).filter(b=>b!=null),g=j.map(b=>b.low).filter(b=>b!=null);return{fiftyTwoWeekHigh:l.length>0?Math.max(...l):null,fiftyTwoWeekLow:g.length>0?Math.min(...g):null}},[r?.histories?.quotes]),k=r?.price.open_price&&r.price.intraday_high&&r.price.intraday_low&&r.price.intraday_volume&&y&&w?{openPrice:r.price.open_price,intradayHigh:r.price.intraday_high,intradayLow:r.price.intraday_low,intradayVolume:r.price.intraday_volume,fiftyTwoWeekHigh:y,fiftyTwoWeekLow:w,marketCap:r.metrics?.market_cap??void 0,peRatio:r.metrics?.pe_ratio??void 0,eps:r.metrics?.eps??void 0}:null,$=k!=null;return s.jsxs("div",{className:C("border-token-border-default mb-2 flex min-h-[480px] flex-col gap-8 rounded-lg border"),children:[s.jsxs("div",{className:"mx-6 flex flex-wrap items-end justify-between",children:[s.jsx(wo,{data:r??null,highlightedPrice:c,priceChange:u??null,extendedPriceChange:v??null,url:t?.url??null}),s.jsx("div",{className:"mt-4",children:s.jsx(uo,{selectedInterval:o,onSelectHistoryInterval:i,histories:r?.histories})})]}),s.jsx("div",{className:"mx-6 h-[340px]",children:s.jsx(xo,{isUp:u?.isUp??!1,selectedInterval:o,histories:r?.histories,setHighlightedPrice:d,onSelectHistoryInterval:j=>i(j),latestTradingPeriod:r?.asset.latest_trading_period,timezone:r?.asset.timezone??null})}),$&&s.jsx("div",{className:"-mt-4",children:s.jsx(yo,{metrics:k})})]})}function _o(t){if(t==null)return null;const e=t.toLowerCase();return e==="premarket"||e==="open"?ve({id:"By+pvF",defaultMessage:"Pre-Market"}):e==="afterhours"||e==="closed"?ve({id:"aLCg3c",defaultMessage:"After Hours"}):ve({id:"2p526c",defaultMessage:"Extended Hours"})}function ko(t,e,n){function a(r,o){const c=G(new Date,o),d=n.formatDate(c,{year:"numeric",month:"2-digit",day:"2-digit"}),m=Ie(r*1e3),h=G(m,o),p=n.formatDate(h,{year:"numeric",month:"2-digit",day:"2-digit"});return d===p}if(!t||!e||a(t,e))return n.formatMessage(ae["1d"]);{const r=Ie(t*1e3),o=G(r,e);return n.formatDate(o,{month:"long",day:"numeric"})}}const ae=Re({"1d":{id:"SMdcuo",defaultMessage:"Today"},extended:{id:"2p526c",defaultMessage:"Extended Hours"},"5d":{id:"HCA6lr",defaultMessage:"Past 5 days"},"1m":{id:"DJpPMq",defaultMessage:"Past month"},"6m":{id:"1mUJ2L",defaultMessage:"Past 6 months"},ytd:{id:"b9KkhV",defaultMessage:"Year to date"},"1y":{id:"XnvD9A",defaultMessage:"Past year"},"5y":{id:"DfI1RB",defaultMessage:"Past 5 years"},max:{id:"WzOhuU",defaultMessage:"Max"}}),$o={google_maps:{title:"Google Maps"}};function Co({metadata:t,trackContentReferenceEvent:e}){x.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type)},[e,t.type]);const n=$o[t.provider]?.title??"Maps";return s.jsx("span",{children:s.jsx(T,{id:"ZSUz1k",defaultMessage:" ({link}) ",values:{link:s.jsx(Y,{href:t.url,children:n})}})})}function No(t){"use forget";const e=he.c(19),{metadata:n,trackContentReferenceEvent:a}=t,r=n.items.length>0,o=x.useRef(a);let i,c;e[0]!==a?(i=()=>{o.current=a},c=[a],e[0]=a,e[1]=i,e[2]=c):(i=e[1],c=e[2]),x.useEffect(i,c);let d,m;e[3]!==r?(d=()=>{r&&o.current("Search Content Reference Shown","search_content_reference_shown","nav_list")},m=[r],e[3]=r,e[4]=d,e[5]=m):(d=e[4],m=e[5]),x.useEffect(d,m);const h=!He(),p=te();if(n.items.length===0)return null;const u=h||p?2:n.items.length;let v;e[6]!==n.title?(v=n.title&&s.jsx("div",{className:"text-token-text-primary -mb-1 pb-3 font-semibold",children:n.title}),e[6]=n.title,e[7]=v):v=e[7];let y;if(e[8]!==u||e[9]!==n.items||e[10]!==a){let $;e[12]!==a?($=(j,l)=>s.jsx(To,{item:j,index:l,trackContentReferenceEvent:a,className:"flex-1"},l),e[12]=a,e[13]=$):$=e[13],y=n.items.slice(0,u).map($),e[8]=u,e[9]=n.items,e[10]=a,e[11]=y}else y=e[11];let w;e[14]!==y?(w=s.jsx("div",{className:"flex flex-row justify-start gap-4",children:y}),e[14]=y,e[15]=w):w=e[15];let k;return e[16]!==v||e[17]!==w?(k=s.jsxs("div",{className:"mt-6 mb-1",children:[v,w]}),e[16]=v,e[17]=w,e[18]=k):k=e[18],k}function To({item:t,index:e,trackContentReferenceEvent:n,className:a}){const{isSuccess:r}=Ee(t.thumbnail_url??void 0),o={url:t.url,title:t.title,section_index:e,link_type:"text",section:"nav_list",section_location:"response"};x.useEffect(()=>{n("link_action","link_action","nav_list",{...o,action:"show"})},[]);const c=M().locale,d=t.pub_date!=null?new Date(t.pub_date*1e3):null,m=new Intl.RelativeTimeFormat(c,{numeric:"auto"}),h=d?Math.max(Math.floor((Date.now()-d.getTime())/(1e3*60*60*24)),0):null;let p=h!=null?m.format(-h,"day"):null;return c.startsWith("en")&&p&&(p=p.charAt(0).toUpperCase()+p.slice(1)),s.jsxs(Y,{className:`group/nav-list pt border-token-border-default bg-token-main-surface-primary dark:bg-token-main-surface-secondary relative flex flex-col items-center gap-4 overflow-hidden rounded-xl border pb-6 hover:shadow-sm ${a} max-w-1/2`,href:t.url,onClick:()=>{n("link_action","link_action","nav_list",{...o,action:"click"})},children:[r&&t.thumbnail_url?s.jsx("div",{className:"relative h-36 w-full overflow-hidden",children:s.jsx("img",{src:t.thumbnail_url,className:"m-0 h-full w-full",style:{objectFit:"cover"},alt:t.title})}):s.jsxs("div",{className:"icon-bg relative flex h-36 w-full shrink-0 items-center justify-center overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat blur-3xl",children:s.jsx(we,{url:t.url,size:256,minSize:128,className:"mix-soft-light opacity-30 dark:opacity-20"})}),s.jsx("div",{className:"absolute flex h-10 w-10 items-center justify-center",children:s.jsx(we,{url:t.url,size:128,minSize:80,className:"icon-xl rounded-full"})})]}),s.jsxs("div",{className:"flex flex-col gap-2 overflow-hidden px-4 text-ellipsis",children:[s.jsxs("div",{className:"text-token-text-primary flex items-center gap-1.5 text-xs",children:[s.jsx(we,{url:t.url,size:32,minSize:16,className:"icon-xs my-0 rounded-full"}),t.attribution??At(t.url)]}),s.jsx("div",{className:"text-token-text-primary decoration-token-link line-clamp-5 text-sm font-medium",children:t.title}),p&&s.jsx("div",{className:"text-token-text-secondary text-xs",children:p})]})]})}function F(t,e){const n=Bs(t),a=e<0?"-":"+",r=Math.abs(e),o=Math.floor(r/3600).toString().padStart(2,"0"),i=Math.floor(r%3600/60).toString().padStart(2,"0"),c=`${a}${o}:${i}`;return G(n,c)}function Le(t,e){if(Ve(e))return s.jsx(T,{id:"wxni9H",defaultMessage:"Today"});const n=new Date;return n.setTime(n.getTime()+7*24*60*60*1e3),e<n&&e>new Date||Ve(e)?t.formatDate(e,{weekday:"long"}):t.formatDate(e,{weekday:"short",month:"short",day:"numeric"})}const So="{{.assetPrefix}}/assets/missing-logo-h96s4tk9.webp",gt={src:So};function as({team:t,className:e}){const[n,a]=x.useState(t.logo??gt.src),r=()=>{Wt.addError("Unable to load sports widget logo",{name:t.name,logo:t.logo}),a(gt.src)};return s.jsx("img",{src:n,alt:t.name,className:e,onError:r})}const ee=["ipl"],vt=6,O="home",W="away";function Mo({scheduleRef:t,trackContentReferenceEvent:e}){const[n,a]=x.useState(!0),r=M(),o=t.games.length>0,i=t.league.id,c=qs(),d=te();if(x.useEffect(()=>{o&&e("Search Content Reference Shown","search_content_reference_shown","sports",{hasSchedule:!0})},[o]),!o)return null;const h=(r.formatDateToParts(new Date,{timeZoneName:"long"}).find(y=>y.type==="timeZoneName")?.value??Intl.DateTimeFormat().resolvedOptions().timeZone).replace(/Daylight|Standard/g,"");let p=t.games;const u=y=>Math.abs(new Date().getTime()-new Date(y.date).getTime());u(p[0])>u(p[p.length-1])&&(p=p.slice().reverse());const v=n?p.slice(0,vt):p;return s.jsxs("div",{className:"not-prose mb-3",children:[s.jsx("div",{className:"font-semibold",children:s.jsx(T,{id:"LA6z9q",defaultMessage:"{league} Schedule",values:{league:t.league.display_name}})}),s.jsx("div",{className:"text-token-text-secondary text-sm",children:h}),v.length===1?s.jsx("div",{children:s.jsx(qe,{children:s.jsx(Pe.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.2},children:s.jsx("div",{className:"border-token-border-medium mt-3 rounded-xl border py-3",children:s.jsx(Do,{game:v[0],useAlias:ee.includes(i),leagueId:i,activeTeam:v[0]?.active_team??null,isMobile:d})})})})}):s.jsx("div",{className:"grid grid-cols-1 pt-3 lg:grid-cols-2",children:s.jsx(qe,{children:v.map((y,w)=>s.jsx(Pe.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0,transition:{delay:w*.04}},exit:{opacity:0,y:-15},transition:{duration:.2},children:s.jsx("div",{className:C("border-token-border-medium border-b py-3",w%2===0&&"lg:border-e lg:pe-4",w%2===1&&"lg:ps-4",Math.floor(w/2)===Math.ceil(p.length/2)-1&&"lg:border-b-0",w===p.length-1&&"border-b-0"),children:s.jsx(Po,{game:y,useAlias:(c||d)&&ee.includes(i),leagueId:i,activeTeam:y.active_team??null})})},w))})}),p.length>vt&&s.jsx("div",{className:"mt-2 flex items-center justify-between",children:s.jsx("button",{className:"flex items-center text-sm font-semibold",onClick:()=>a(!n),children:n?s.jsx(T,{id:"BH/Ee5",defaultMessage:"Show more {icon}",values:{icon:s.jsx(Vs,{className:"mb-[-2px]"})}}):s.jsx(T,{id:"Z9BlEu",defaultMessage:"Show less {icon}",values:{icon:s.jsx(Zs,{className:"mb-[-2px]"})}})})})]})}function Po({game:t,useAlias:e=!1,leagueId:n,activeTeam:a}){const r=os(t),o=[t.first_team_info,t.second_team_info],i=o.find(h=>h.location===O)??t.first_team_info,c=o.find(h=>h.location===W)??t.second_team_info,d=r?.team.name===i?.team.name,m=r?.team.name===c?.team.name;return s.jsxs("div",{className:"flex w-full gap-1.5 py-3 text-base",children:[s.jsxs("div",{className:"flex flex-auto flex-col items-start gap-1 pe-3",children:[s.jsx(de,{team:c.team,isWinner:m,isActive:a===W,logoSize:"small",useAlias:e}),s.jsx(de,{team:i.team,isWinner:d,isActive:a===O,logoSize:"small",useAlias:e})]}),s.jsxs("div",{className:C("flex flex-none flex-col items-start gap-1",ee.includes(n)&&"me-4"),children:[s.jsx(ue,{score:c.score,scoreSuffix:c.score_suffix,scoreParenthetical:c.score_parenthetical?{message:c.score_parenthetical,position:"right"}:null,isWinner:m,negateScore:le(n,W,a)}),s.jsx(ue,{score:i.score,scoreSuffix:i.score_suffix,scoreParenthetical:i.score_parenthetical?{message:i.score_parenthetical,position:"right"}:null,isWinner:d,negateScore:le(n,O,a)})]}),s.jsx("div",{className:"flex min-w-24 flex-none flex-col items-end justify-center gap-1 text-sm",children:s.jsx(is,{game:t})})]})}function Do({game:t,useAlias:e=!1,leagueId:n,activeTeam:a,isMobile:r}){const o=os(t),i=[t.first_team_info,t.second_team_info],c=i.find(p=>p.location===O)??t.first_team_info,d=i.find(p=>p.location===W)??t.second_team_info,m=o?.team.name===c?.team.name,h=o?.team.name===d?.team.name;return s.jsxs("div",{className:"flex w-full py-3 text-base",children:[s.jsx("div",{className:"flex flex-1 items-center justify-center px-2",children:s.jsx(de,{team:d.team,isWinner:h,isActive:a===W,useAlias:e,layoutDirection:r?"column":"row"})}),s.jsx("div",{className:"ms-2 flex items-center justify-start sm:ms-8",children:s.jsx(ue,{score:d.score,scoreSuffix:d.score_suffix,scoreParenthetical:d.score_parenthetical?{message:d.score_parenthetical,position:"bottom"}:null,isWinner:h,negateScore:le(n,W,a),className:"text-sm font-semibold sm:text-lg"})}),s.jsx("div",{className:"mx-2 flex w-24 shrink flex-col items-center justify-center gap-1 align-middle text-sm",children:s.jsx(is,{game:t})}),s.jsx("div",{className:"me-2 flex items-center justify-end sm:me-8",children:s.jsx(ue,{score:c.score,scoreSuffix:c.score_suffix,scoreParenthetical:c.score_parenthetical?{message:c.score_parenthetical,position:"bottom"}:null,isWinner:m,negateScore:le(n,O,a),className:"text-sm font-semibold sm:text-lg"})}),s.jsx("div",{className:"flex flex-1 items-center justify-center md:px-2",children:s.jsx(de,{team:c.team,isWinner:m,isActive:a===O,useAlias:e,layoutDirection:r?"column":"row"})})]})}function rs(t){return t.live?"live":new Date(t.date)<new Date?"complete":"scheduled"}function os(t){return rs(t)!=="complete"||t.first_team_info.score==null||t.second_team_info.score==null?null:t.first_team_info.score>t.second_team_info.score?t.first_team_info:t.second_team_info}function le(t,e,n){return ee.includes(t)&&e===O&&n===W}function de({team:t,isWinner:e,isActive:n,logoSize:a,useAlias:r=!1,layoutDirection:o="row"}){return s.jsxs("span",{className:C("flex items-center gap-1",e&&"font-semibold","max-w-64 lg:max-w-52 xl:max-w-64",o==="column"&&"flex-col"),children:[t.logo&&s.jsx(as,{team:{name:t.name,logo:t.logo},className:C(a==="small"?"w-6":"w-8")}),s.jsx("span",{className:"truncate",children:r?t.alias:t.name}),n&&s.jsx("span",{className:"bg-token-surface-error inline-block h-2 w-2 rounded-full"})]})}function ue({score:t,scoreSuffix:e,scoreParenthetical:n,isWinner:a,negateScore:r=!1,className:o}){const i=M();return t==null?null:s.jsxs("span",{className:C(a&&"font-semibold",o),children:[r?i.formatMessage({id:"sports.dash",defaultMessage:"-"}):t,e&&!r&&s.jsx("span",{children:e}),n&&!r&&s.jsx("span",{className:C("text-token-text-secondary font-normal",n.position==="right"&&"ms-1",n.position==="bottom"&&"mx-auto block text-center"),children:`(${n.message})`})]})}function is({game:t}){const e=M();switch(rs(t)){case"live":return s.jsxs(s.Fragment,{children:[s.jsx(Eo,{}),s.jsx("div",{children:t.details})]});case"complete":return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-semibold",children:s.jsx(T,{id:"q/iMZL",defaultMessage:"Final"})}),s.jsx("div",{className:"text-token-text-secondary",children:Le(e,new Date(t.date))})]});case"scheduled":{const n=new Date(t.date);return isNaN(n.getTime())?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{children:Le(e,n)}),s.jsx("div",{className:"text-token-text-secondary",children:e.formatDate(n,{timeStyle:"short"})})]})}}}function Eo(){return s.jsx("div",{className:"bg-token-surface-error rounded-[4px] px-1.5 py-1 text-xs font-semibold text-white",children:s.jsx(T,{id:"vObALn",defaultMessage:"Live"})})}function Ao({standingsRef:t,trackContentReferenceEvent:e}){const[n,a]=x.useState(0),r=t.conferences.length>0,o=te(),i=t.league.id;x.useEffect(()=>{r&&e("Search Content Reference Shown","search_content_reference_shown","sports",{hasStandings:!0})},[r]);const c=t.conferences[n],d=t.conferences.length>1?t.conferences.map((m,h)=>s.jsx("button",{className:C(n===h?"text-token-text-primary":"text-token-text-tertiary","text-sm font-semibold"),onClick:()=>a(h),children:m.name},m.name)):null;return s.jsxs(s.Fragment,{children:[d&&s.jsx("div",{className:"flex gap-4",children:d}),s.jsx("div",{className:"mt-3",children:c.divisions.map(m=>m.name?s.jsx("div",{className:"mt-3",children:s.jsx(bt,{division:m,teamsColumnHeader:m.name})},m.name):s.jsx(bt,{division:m,useAlias:o&&ee.includes(i)}))})]})}function bt({division:t,teamsColumnHeader:e,useAlias:n}){const a=t.headers.map(r=>r.key);return s.jsxs(E.Root,{size:"compact",className:"not-prose",children:[s.jsxs(E.Header,{children:[s.jsx(Io,{children:e??s.jsx(T,{id:"kKSGje",defaultMessage:"Team"})}),t.headers.map(r=>s.jsx(cs,{textAlign:"center",className:"min-w-11 px-0!",children:s.jsx(yt,{data:r})},r.key))]}),s.jsx(E.Body,{children:t.teams.map(({team:r,data:o},i)=>{const c=o.reduce((d,m)=>(d[m.key]=m,d),{});return s.jsxs(E.Row,{children:[s.jsx(E.Cell,{className:"w-full border-0! py-0! ps-0!",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"text-token-text-tertiary me-2 w-4 whitespace-nowrap tabular-nums",children:i+1}),s.jsxs("div",{className:"flex items-center justify-start gap-2",children:[s.jsx(as,{team:r,className:"w-6"}),s.jsx("span",{className:"text-base whitespace-nowrap",children:n?r.alias:r.name})]})]})}),a.map(d=>s.jsx(E.Cell,{className:"min-w-11 border-0! px-0! py-0! text-start whitespace-nowrap tabular-nums",textAlign:"center",children:s.jsx(yt,{data:c[d]})},d))]},r.name)})})]})}function yt({data:t}){switch(t.type){case"text":return s.jsx(s.Fragment,{children:t.text});default:return s.jsx(s.Fragment,{children:t.alt})}}const cs=Ut(E.HeaderCell)`text-token-text-secondary font-normal! text-sm static! bg-transparent! border-token-border-default! border-t-0! border-s-0! border-e-0!`,Io=Ut(cs)`text-token-text-primary ps-0!`;function Lo({metadata:t,trackContentReferenceEvent:e}){x.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type)},[e,t.type]);const n=M(),a=G(t.utc_time,t.utc_offset),r=n.formatDate(a,{hour:"numeric",minute:"numeric"});return s.jsx("span",{children:r})}function Ro({metadata:t,trackContentReferenceEvent:e}){return x.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type)},[e,t.type]),s.jsx("div",{children:t.url?s.jsx(Pa,{webpageItem:{url:t.url,title:t.description,pub_date:null,snippet:"",attributions:null},className:"inline-flex flex-col",children:s.jsx(Y,{href:t.url,className:"font-semibold!",children:t.description})}):s.jsx("div",{className:"font-semibold!",children:t.description})})}function Fo({url:t,className:e}){let n;const a="aspect-video w-full rounded-lg",r=Ho(t);r&&(n=s.jsx(zo,{videoId:r,className:a}));const o=Oo(t);return o&&(n=s.jsx(Wo,{videoId:o,className:a})),n?s.jsx("div",{className:e,children:n}):null}function Ho(t){const e=/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,n=t.match(e);return n?n[1]:null}function zo({videoId:t,className:e}){return s.jsx("iframe",{className:e,src:`https://www.youtube.com/embed/${t}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}function Oo(t){const e=/vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/[^/]+\/videos\/|video\/|)(\d+)/,n=t.match(e);return n?n[1]:null}function Wo({videoId:t,className:e}){return s.jsx(s.Fragment,{children:s.jsx("iframe",{className:e,src:`https://player.vimeo.com/video/${t}`,frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})})}function Uo({video:t,trackContentReferenceEvent:e}){const n={url:t.url,title:t.title};return x.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type,n)},[]),t.url==null||t.url===""?null:s.jsx("div",{className:"not-prose mb-3 flex flex-col gap-4 text-base",children:s.jsx(Fo,{url:t.url})})}const Yo=t=>x.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},x.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.34354 4.92894C6.7341 5.31946 6.7341 5.95263 6.34354 6.34315C3.21906 9.46735 3.21906 14.5327 6.34354 17.6569C6.7341 18.0474 6.7341 18.6806 6.34354 19.0711C5.95298 19.4616 5.31976 19.4616 4.9292 19.0711C1.0236 15.1658 1.0236 8.83418 4.9292 4.92894C5.31976 4.53842 5.95298 4.53842 6.34354 4.92894ZM17.6583 4.92894C18.0488 4.53842 18.682 4.53842 19.0726 4.92894C22.9782 8.83418 22.9782 15.1658 19.0726 19.0711C18.682 19.4616 18.0488 19.4616 17.6583 19.0711C17.2677 18.6806 17.2677 18.0474 17.6583 17.6569C20.7827 14.5327 20.7827 9.46735 17.6583 6.34315C17.2677 5.95263 17.2677 5.31946 17.6583 4.92894Z",fill:"currentColor"}),x.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.17222 7.75737C9.56278 8.14789 9.56278 8.78106 9.17222 9.17158C7.60998 10.7337 7.60998 13.2663 9.17222 14.8284C9.56278 15.219 9.56278 15.8521 9.17222 16.2426C8.78166 16.6332 8.14844 16.6332 7.75788 16.2426C5.41452 13.8995 5.41452 10.1005 7.75788 7.75737C8.14844 7.36684 8.78166 7.36684 9.17222 7.75737ZM14.8296 7.75737C15.2201 7.36684 15.8534 7.36684 16.2439 7.75737C18.5873 10.1005 18.5873 13.8995 16.2439 16.2426C15.8534 16.6332 15.2201 16.6332 14.8296 16.2426C14.439 15.8521 14.439 15.219 14.8296 14.8284C16.3918 13.2663 16.3918 10.7337 14.8296 9.17158C14.439 8.78106 14.439 8.14789 14.8296 7.75737Z",fill:"currentColor"}),x.createElement("path",{d:"M14.0011 12C14.0011 13.1046 13.1056 14 12.0009 14C10.8962 14 10.0007 13.1046 10.0007 12C10.0007 10.8954 10.8962 10 12.0009 10C13.1056 10 14.0011 10.8954 14.0011 12Z",fill:"currentColor"})),Bo="webp",qo=96,Vo=96,Zo="srgb",Go=4,Xo="uchar",Ko=288,Jo=!1,Qo=!1,ei=!0,ti="{{.assetPrefix}}/assets/cloud-foggy-o4a3hmky.webp",si={format:Bo,width:qo,height:Vo,space:Zo,channels:Go,depth:Xo,density:Ko,isProgressive:Jo,hasProfile:Qo,hasAlpha:ei,src:ti},ni="webp",ai=96,ri=96,oi="srgb",ii=4,ci="uchar",li=288,di=!1,ui=!1,hi=!0,mi="{{.assetPrefix}}/assets/cloudy-co8vwrk7.webp",fi={format:ni,width:ai,height:ri,space:oi,channels:ii,depth:ci,density:li,isProgressive:di,hasProfile:ui,hasAlpha:hi,src:mi},pi="webp",xi=96,gi=96,vi="srgb",bi=4,yi="uchar",wi=288,ji=!1,_i=!1,ki=!0,$i="{{.assetPrefix}}/assets/heavy-snow-mke52kag.webp",Ci={format:pi,width:xi,height:gi,space:vi,channels:bi,depth:yi,density:wi,isProgressive:ji,hasProfile:_i,hasAlpha:ki,src:$i},Ni="webp",Ti=96,Si=96,Mi="srgb",Pi=4,Di="uchar",Ei=288,Ai=!1,Ii=!1,Li=!0,Ri="{{.assetPrefix}}/assets/light-snow-mcy1l7t9.webp",Fi={format:Ni,width:Ti,height:Si,space:Mi,channels:Pi,depth:Di,density:Ei,isProgressive:Ai,hasProfile:Ii,hasAlpha:Li,src:Ri},Hi="webp",zi=96,Oi=96,Wi="srgb",Ui=4,Yi="uchar",Bi=288,qi=!1,Vi=!1,Zi=!0,Gi="{{.assetPrefix}}/assets/moon-drizzle-cplxr2ub.webp",Xi={format:Hi,width:zi,height:Oi,space:Wi,channels:Ui,depth:Yi,density:Bi,isProgressive:qi,hasProfile:Vi,hasAlpha:Zi,src:Gi},Ki="webp",Ji=96,Qi=96,ec="srgb",tc=4,sc="uchar",nc=288,ac=!1,rc=!1,oc=!0,ic="{{.assetPrefix}}/assets/moon-hazy-jvgt25bp.webp",cc={format:Ki,width:Ji,height:Qi,space:ec,channels:tc,depth:sc,density:nc,isProgressive:ac,hasProfile:rc,hasAlpha:oc,src:ic},lc="webp",dc=96,uc=96,hc="srgb",mc=4,fc="uchar",pc=288,xc=!1,gc=!1,vc=!0,bc="{{.assetPrefix}}/assets/moon-mostly-cloudy-cia3do0v.webp",yc={format:lc,width:dc,height:uc,space:hc,channels:mc,depth:fc,density:pc,isProgressive:xc,hasProfile:gc,hasAlpha:vc,src:bc},wc="webp",jc=96,_c=96,kc="srgb",$c=4,Cc="uchar",Nc=288,Tc=!1,Sc=!1,Mc=!0,Pc="{{.assetPrefix}}/assets/moon-mostly-sunny-n3mh1b6a.webp",Dc={format:wc,width:jc,height:_c,space:kc,channels:$c,depth:Cc,density:Nc,isProgressive:Tc,hasProfile:Sc,hasAlpha:Mc,src:Pc},Ec="webp",Ac=96,Ic=96,Lc="srgb",Rc=4,Fc="uchar",Hc=288,zc=!1,Oc=!1,Wc=!0,Uc="{{.assetPrefix}}/assets/moon-shower-ntzhti9o.webp",Yc={format:Ec,width:Ac,height:Ic,space:Lc,channels:Rc,depth:Fc,density:Hc,isProgressive:zc,hasProfile:Oc,hasAlpha:Wc,src:Uc},Bc="webp",qc=96,Vc=96,Zc="srgb",Gc=4,Xc="uchar",Kc=288,Jc=!1,Qc=!1,el=!0,tl="{{.assetPrefix}}/assets/moon-sunny-eg2emh4d.webp",sl={format:Bc,width:qc,height:Vc,space:Zc,channels:Gc,depth:Xc,density:Kc,isProgressive:Jc,hasProfile:Qc,hasAlpha:el,src:tl},nl="webp",al=96,rl=96,ol="srgb",il=4,cl="uchar",ll=288,dl=!1,ul=!1,hl=!0,ml="{{.assetPrefix}}/assets/rain-thunder-bx7a0l5g.webp",fl={format:nl,width:al,height:rl,space:ol,channels:il,depth:cl,density:ll,isProgressive:dl,hasProfile:ul,hasAlpha:hl,src:ml},pl="webp",xl=96,gl=96,vl="srgb",bl=4,yl="uchar",wl=288,jl=!1,_l=!1,kl=!0,$l="{{.assetPrefix}}/assets/rain-cxs76xuj.webp",Cl={format:pl,width:xl,height:gl,space:vl,channels:bl,depth:yl,density:wl,isProgressive:jl,hasProfile:_l,hasAlpha:kl,src:$l},Nl="webp",Tl=96,Sl=96,Ml="srgb",Pl=4,Dl="uchar",El=288,Al=!1,Il=!1,Ll=!0,Rl="{{.assetPrefix}}/assets/sleet-gc63vwmo.webp",Fl={format:Nl,width:Tl,height:Sl,space:Ml,channels:Pl,depth:Dl,density:El,isProgressive:Al,hasProfile:Il,hasAlpha:Ll,src:Rl},Hl="webp",zl=96,Ol=96,Wl="srgb",Ul=4,Yl="uchar",Bl=288,ql=!1,Vl=!1,Zl=!0,Gl="{{.assetPrefix}}/assets/snow-d0k6tmmc.webp",Xl={format:Hl,width:zl,height:Ol,space:Wl,channels:Ul,depth:Yl,density:Bl,isProgressive:ql,hasProfile:Vl,hasAlpha:Zl,src:Gl},Kl="webp",Jl=96,Ql=96,ed="srgb",td=4,sd="uchar",nd=288,ad=!1,rd=!1,od=!0,id="{{.assetPrefix}}/assets/sun-drizzle-g94obr5e.webp",cd={format:Kl,width:Jl,height:Ql,space:ed,channels:td,depth:sd,density:nd,isProgressive:ad,hasProfile:rd,hasAlpha:od,src:id},ld="webp",dd=96,ud=96,hd="srgb",md=4,fd="uchar",pd=288,xd=!1,gd=!1,vd=!0,bd="{{.assetPrefix}}/assets/sun-hazy-c3z1j0hy.webp",yd={format:ld,width:dd,height:ud,space:hd,channels:md,depth:fd,density:pd,isProgressive:xd,hasProfile:gd,hasAlpha:vd,src:bd},wd="webp",jd=96,_d=96,kd="srgb",$d=4,Cd="uchar",Nd=288,Td=!1,Sd=!1,Md=!0,Pd="{{.assetPrefix}}/assets/sun-mostly-cloudy-d4o4zkga.webp",Dd={format:wd,width:jd,height:_d,space:kd,channels:$d,depth:Cd,density:Nd,isProgressive:Td,hasProfile:Sd,hasAlpha:Md,src:Pd},Ed="webp",Ad=96,Id=96,Ld="srgb",Rd=4,Fd="uchar",Hd=288,zd=!1,Od=!1,Wd=!0,Ud="{{.assetPrefix}}/assets/sun-mostly-sunny-livrdkgu.webp",Yd={format:Ed,width:Ad,height:Id,space:Ld,channels:Rd,depth:Fd,density:Hd,isProgressive:zd,hasProfile:Od,hasAlpha:Wd,src:Ud},Bd="webp",qd=96,Vd=96,Zd="srgb",Gd=4,Xd="uchar",Kd=288,Jd=!1,Qd=!1,eu=!0,tu="{{.assetPrefix}}/assets/sun-shower-lvtjthah.webp",su={format:Bd,width:qd,height:Vd,space:Zd,channels:Gd,depth:Xd,density:Kd,isProgressive:Jd,hasProfile:Qd,hasAlpha:eu,src:tu},nu="webp",au=96,ru=96,ou="srgb",iu=4,cu="uchar",lu=288,du=!1,uu=!1,hu=!0,mu="{{.assetPrefix}}/assets/sun-sunny-kqjpjzd8.webp",fu={format:nu,width:au,height:ru,space:ou,channels:iu,depth:cu,density:lu,isProgressive:du,hasProfile:uu,hasAlpha:hu,src:mu},pu="webp",xu=96,gu=96,vu="srgb",bu=4,yu="uchar",wu=288,ju=!1,_u=!1,ku=!0,$u="{{.assetPrefix}}/assets/thunder-jgjqg9ai.webp",Cu={format:pu,width:xu,height:gu,space:vu,channels:bu,depth:yu,density:wu,isProgressive:ju,hasProfile:_u,hasAlpha:ku,src:$u},Nu="webp",Tu=96,Su=96,Mu="srgb",Pu=4,Du="uchar",Eu=288,Au=!1,Iu=!1,Lu=!0,Ru="{{.assetPrefix}}/assets/tornado-opa24tq3.webp",Fu={format:Nu,width:Tu,height:Su,space:Mu,channels:Pu,depth:Du,density:Eu,isProgressive:Au,hasProfile:Iu,hasAlpha:Lu,src:Ru},Hu="webp",zu=96,Ou=96,Wu="srgb",Uu=4,Yu="uchar",Bu=288,qu=!1,Vu=!1,Zu=!0,Gu="{{.assetPrefix}}/assets/windy-mw0a3u21.webp",Xu={format:Hu,width:zu,height:Ou,space:Wu,channels:Uu,depth:Yu,density:Bu,isProgressive:qu,hasProfile:Vu,hasAlpha:Zu,src:Gu},Ku="webp",Ju=96,Qu=96,eh="srgb",th=4,sh="uchar",nh=288,ah=!1,rh=!1,oh=!0,ih="{{.assetPrefix}}/assets/cloud-foggy-fhg0jn0w.webp",ch={format:Ku,width:Ju,height:Qu,space:eh,channels:th,depth:sh,density:nh,isProgressive:ah,hasProfile:rh,hasAlpha:oh,src:ih},lh="webp",dh=96,uh=96,hh="srgb",mh=4,fh="uchar",ph=288,xh=!1,gh=!1,vh=!0,bh="{{.assetPrefix}}/assets/cloudy-disd26f3.webp",yh={format:lh,width:dh,height:uh,space:hh,channels:mh,depth:fh,density:ph,isProgressive:xh,hasProfile:gh,hasAlpha:vh,src:bh},wh="webp",jh=96,_h=96,kh="srgb",$h=4,Ch="uchar",Nh=288,Th=!1,Sh=!1,Mh=!0,Ph="{{.assetPrefix}}/assets/heavy-snow-g6jjwo2d.webp",Dh={format:wh,width:jh,height:_h,space:kh,channels:$h,depth:Ch,density:Nh,isProgressive:Th,hasProfile:Sh,hasAlpha:Mh,src:Ph},Eh="webp",Ah=96,Ih=96,Lh="srgb",Rh=4,Fh="uchar",Hh=288,zh=!1,Oh=!1,Wh=!0,Uh="{{.assetPrefix}}/assets/light-snow-iz0efpkh.webp",Yh={format:Eh,width:Ah,height:Ih,space:Lh,channels:Rh,depth:Fh,density:Hh,isProgressive:zh,hasProfile:Oh,hasAlpha:Wh,src:Uh},Bh="webp",qh=96,Vh=96,Zh="srgb",Gh=4,Xh="uchar",Kh=288,Jh=!1,Qh=!1,em=!0,tm="{{.assetPrefix}}/assets/moon-drizzle-b1nfv39c.webp",sm={format:Bh,width:qh,height:Vh,space:Zh,channels:Gh,depth:Xh,density:Kh,isProgressive:Jh,hasProfile:Qh,hasAlpha:em,src:tm},nm="webp",am=96,rm=96,om="srgb",im=4,cm="uchar",lm=288,dm=!1,um=!1,hm=!0,mm="{{.assetPrefix}}/assets/moon-hazy-nfnzea7a.webp",fm={format:nm,width:am,height:rm,space:om,channels:im,depth:cm,density:lm,isProgressive:dm,hasProfile:um,hasAlpha:hm,src:mm},pm="webp",xm=96,gm=96,vm="srgb",bm=4,ym="uchar",wm=288,jm=!1,_m=!1,km=!0,$m="{{.assetPrefix}}/assets/moon-mostly-cloudy-e56e3z55.webp",Cm={format:pm,width:xm,height:gm,space:vm,channels:bm,depth:ym,density:wm,isProgressive:jm,hasProfile:_m,hasAlpha:km,src:$m},Nm="webp",Tm=96,Sm=96,Mm="srgb",Pm=4,Dm="uchar",Em=288,Am=!1,Im=!1,Lm=!0,Rm="{{.assetPrefix}}/assets/moon-mostly-sunny-ffu4gzf4.webp",Fm={format:Nm,width:Tm,height:Sm,space:Mm,channels:Pm,depth:Dm,density:Em,isProgressive:Am,hasProfile:Im,hasAlpha:Lm,src:Rm},Hm="webp",zm=96,Om=96,Wm="srgb",Um=4,Ym="uchar",Bm=288,qm=!1,Vm=!1,Zm=!0,Gm="{{.assetPrefix}}/assets/moon-shower-e5dy9u48.webp",Xm={format:Hm,width:zm,height:Om,space:Wm,channels:Um,depth:Ym,density:Bm,isProgressive:qm,hasProfile:Vm,hasAlpha:Zm,src:Gm},Km="webp",Jm=96,Qm=96,ef="srgb",tf=4,sf="uchar",nf=288,af=!1,rf=!1,of=!0,cf="{{.assetPrefix}}/assets/moon-sunny-d9o08xiw.webp",lf={format:Km,width:Jm,height:Qm,space:ef,channels:tf,depth:sf,density:nf,isProgressive:af,hasProfile:rf,hasAlpha:of,src:cf},df="webp",uf=96,hf=96,mf="srgb",ff=4,pf="uchar",xf=288,gf=!1,vf=!1,bf=!0,yf="{{.assetPrefix}}/assets/rain-thunder-eplemvu1.webp",wf={format:df,width:uf,height:hf,space:mf,channels:ff,depth:pf,density:xf,isProgressive:gf,hasProfile:vf,hasAlpha:bf,src:yf},jf="webp",_f=96,kf=96,$f="srgb",Cf=4,Nf="uchar",Tf=288,Sf=!1,Mf=!1,Pf=!0,Df="{{.assetPrefix}}/assets/rain-ogayr6kt.webp",Ef={format:jf,width:_f,height:kf,space:$f,channels:Cf,depth:Nf,density:Tf,isProgressive:Sf,hasProfile:Mf,hasAlpha:Pf,src:Df},Af="webp",If=96,Lf=96,Rf="srgb",Ff=4,Hf="uchar",zf=288,Of=!1,Wf=!1,Uf=!0,Yf="{{.assetPrefix}}/assets/sleet-o8noil7l.webp",Bf={format:Af,width:If,height:Lf,space:Rf,channels:Ff,depth:Hf,density:zf,isProgressive:Of,hasProfile:Wf,hasAlpha:Uf,src:Yf},qf="webp",Vf=96,Zf=96,Gf="srgb",Xf=4,Kf="uchar",Jf=288,Qf=!1,ep=!1,tp=!0,sp="{{.assetPrefix}}/assets/snow-lq4cl3uc.webp",np={format:qf,width:Vf,height:Zf,space:Gf,channels:Xf,depth:Kf,density:Jf,isProgressive:Qf,hasProfile:ep,hasAlpha:tp,src:sp},ap="webp",rp=96,op=96,ip="srgb",cp=4,lp="uchar",dp=288,up=!1,hp=!1,mp=!0,fp="{{.assetPrefix}}/assets/sun-drizzle-htsohv65.webp",pp={format:ap,width:rp,height:op,space:ip,channels:cp,depth:lp,density:dp,isProgressive:up,hasProfile:hp,hasAlpha:mp,src:fp},xp="webp",gp=96,vp=96,bp="srgb",yp=4,wp="uchar",jp=288,_p=!1,kp=!1,$p=!0,Cp="{{.assetPrefix}}/assets/sun-hazy-nfj7clcd.webp",Np={format:xp,width:gp,height:vp,space:bp,channels:yp,depth:wp,density:jp,isProgressive:_p,hasProfile:kp,hasAlpha:$p,src:Cp},Tp="webp",Sp=96,Mp=96,Pp="srgb",Dp=4,Ep="uchar",Ap=288,Ip=!1,Lp=!1,Rp=!0,Fp="{{.assetPrefix}}/assets/sun-mostly-cloudy-e3pqqgs7.webp",Hp={format:Tp,width:Sp,height:Mp,space:Pp,channels:Dp,depth:Ep,density:Ap,isProgressive:Ip,hasProfile:Lp,hasAlpha:Rp,src:Fp},zp="webp",Op=96,Wp=96,Up="srgb",Yp=4,Bp="uchar",qp=288,Vp=!1,Zp=!1,Gp=!0,Xp="{{.assetPrefix}}/assets/sun-mostly-sunny-o99k1c7a.webp",Kp={format:zp,width:Op,height:Wp,space:Up,channels:Yp,depth:Bp,density:qp,isProgressive:Vp,hasProfile:Zp,hasAlpha:Gp,src:Xp},Jp="webp",Qp=96,ex=96,tx="srgb",sx=4,nx="uchar",ax=288,rx=!1,ox=!1,ix=!0,cx="{{.assetPrefix}}/assets/sun-shower-ldwl4jbp.webp",lx={format:Jp,width:Qp,height:ex,space:tx,channels:sx,depth:nx,density:ax,isProgressive:rx,hasProfile:ox,hasAlpha:ix,src:cx},dx="webp",ux=96,hx=96,mx="srgb",fx=4,px="uchar",xx=!1,gx=!1,vx=!0,bx="{{.assetPrefix}}/assets/sun-sunny-kqjpjzd8.webp",yx={format:dx,width:ux,height:hx,space:mx,channels:fx,depth:px,isProgressive:xx,hasProfile:gx,hasAlpha:vx,src:bx},wx="webp",jx=96,_x=96,kx="srgb",$x=4,Cx="uchar",Nx=288,Tx=!1,Sx=!1,Mx=!0,Px="{{.assetPrefix}}/assets/thunder-xzn1cku3.webp",Dx={format:wx,width:jx,height:_x,space:kx,channels:$x,depth:Cx,density:Nx,isProgressive:Tx,hasProfile:Sx,hasAlpha:Mx,src:Px},Ex="webp",Ax=96,Ix=96,Lx="srgb",Rx=4,Fx="uchar",Hx=288,zx=!1,Ox=!1,Wx=!0,Ux="{{.assetPrefix}}/assets/tornado-diqu61wg.webp",Yx={format:Ex,width:Ax,height:Ix,space:Lx,channels:Rx,depth:Fx,density:Hx,isProgressive:zx,hasProfile:Ox,hasAlpha:Wx,src:Ux},Bx="webp",qx=96,Vx=96,Zx="srgb",Gx=4,Xx="uchar",Kx=288,Jx=!1,Qx=!1,eg=!0,tg="{{.assetPrefix}}/assets/windy-n2v8wtyp.webp",sg={format:Bx,width:qx,height:Vx,space:Zx,channels:Gx,depth:Xx,density:Kx,isProgressive:Jx,hasProfile:Qx,hasAlpha:eg,src:tg},ng={foggy:{default:si},cloudy:{default:fi},"heavy-snow":{default:Ci},"light-snow":{default:Fi},sleet:{default:Fl},drizzle:{default:cd,night:Xi},hazy:{default:yd,night:cc},"mostly-cloudy":{default:Dd,night:yc},"mostly-sunny":{default:Yd,night:Dc},shower:{default:su,night:Yc},sunny:{default:fu,night:sl},"rain-thunder":{default:fl},rain:{default:Cl},snow:{default:Xl},thunder:{default:Cu},tornado:{default:Fu},windy:{default:Xu}},ag={foggy:{default:ch},cloudy:{default:yh},"heavy-snow":{default:Dh},"light-snow":{default:Yh},sleet:{default:Bf},drizzle:{default:pp,night:sm},hazy:{default:Np,night:fm},"mostly-cloudy":{default:Hp,night:Cm},"mostly-sunny":{default:Kp,night:Fm},shower:{default:lx,night:Xm},sunny:{default:yx,night:lf},"rain-thunder":{default:wf},rain:{default:Ef},snow:{default:np},thunder:{default:Dx},tornado:{default:Yx},windy:{default:sg}};function rg({weatherCode:t,isDarkMode:e,isNight:n}){const a=e?ag:ng,r=og(t),o=a[r];return o.night&&n?o.night:o.default}function og(t){switch(t){case 1:case 33:return"sunny";case 2:case 3:case 34:case 35:case 36:return"mostly-sunny";case 4:case 6:case 13:case 14:case 38:return"mostly-cloudy";case 5:case 37:return"hazy";case 7:case 8:return"cloudy";case 11:return"foggy";case 12:case 39:case 40:return"shower";case 15:case 16:case 17:case 41:case 42:return"thunder";case 18:return"rain";case 19:case 20:case 21:case 43:return"light-snow";case 22:case 23:case 44:return"snow";case 24:case 25:case 26:case 29:return"sleet";case 32:return"windy";default:return"cloudy"}}const ig="C";function cg(t,e){return Math.round(t==="F"?e*9/5+32:(e-32)*5/9)}function wt(t,e,n=ig){return t===n?`${Math.round(e)}°`:`${cg(t,e)}°`}const lg=7,jt=8,dg=x.memo(function({weatherResults:e,dateRange:n,turnIndex:a,trackContentReferenceEvent:r}){const[o,i]=wg(),c=mg(e);x.useEffect(()=>{r("Search Content Reference Shown","search_content_reference_shown","forecast")},[r]);const{daily:d,hourly:m,historical:h}=e;let p="daily";if(n||m&&d.length<2)p="hourly";else if(d.length>0)p="daily";else if(h&&h?.length>0)p="historical";else return null;return s.jsxs("div",{className:"relative",children:[c?s.jsxs(s.Fragment,{children:[s.jsx(hg,{weatherResults:e}),s.jsx(fg,{weatherResults:e,temperatureUnit:o,setTemperatureUnit:i})]}):s.jsx("div",{className:"bg-token-main-surface-primary absolute end-0 top-3 z-10 rounded-sm",children:s.jsx(ls,{onTemperatureUnitChange:i,temperatureUnit:o})}),s.jsx(vg,{turnIndex:a}),p==="hourly"&&s.jsx(pg,{weatherResults:e,temperatureUnit:o,dateRange:n}),p==="daily"&&s.jsx(xg,{dailyForecast:d.slice(0,lg),temperatureUnit:o}),p==="historical"&&s.jsx(gg,{historical:h,temperatureUnit:o})]})});function ug({weatherAlert:t}){const[e,n]=x.useState(!1),a=M(),r=He(),o=F(t.start_timestamp,t.utc_offset_sec),i=t.end_timestamp?F(t.end_timestamp,t.utc_offset_sec):null,c=s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx(T,{id:"JnuGPS",defaultMessage:"{start}{separator}{end}",values:{start:a.formatDate(o,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}),separator:i?" - ":"",end:i?a.formatDate(i,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):""}})}),s.jsx("div",{children:t.summary})]});return s.jsxs("button",{className:"my-2 flex w-full flex-col gap-2 rounded-xl border border-red-200 bg-red-100 px-4 py-3 text-start text-sm text-red-800",onClick:()=>n(!e),children:[s.jsxs("div",{className:"flex w-full items-center gap-4",children:[s.jsx(tn,{className:"h-9 w-9 shrink-0"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"font-bold",children:s.jsx(T,{id:"y+fy/l",defaultMessage:"Severe Weather: {name}",values:{name:t.name}})}),r&&c]}),s.jsx("div",{className:"grow"}),s.jsx("div",{className:"opacity-30",children:e?s.jsx(Ia,{className:"icon-lg"}):s.jsx(Aa,{className:"icon-lg"})})]}),e&&t.details&&s.jsxs(s.Fragment,{children:[!r&&c,s.jsx("div",{className:"mt-1 whitespace-pre-wrap",children:t.details.trim()})]})]})}function hg({weatherResults:t}){const{severe:e}=t;return e?s.jsx("div",{className:"my-2",children:e.map((n,a)=>s.jsx(ug,{weatherAlert:n},a))}):null}function mg(t){const{historical:e,daily:n,hourly:a,current:r}=t;if(!r)return!1;let o=!1;const i=F(r.timestamp,r.utc_offset_sec);for(const c of[e,n,a])c&&(o=o||c?.some(d=>Xs(i,F(d.timestamp,d.utc_offset_sec))));return o}function fg({weatherResults:t,temperatureUnit:e,setTemperatureUnit:n}){const a=M(),{current:r}=t;if(!r)return null;const o=r.temperature.current,i=r.description,c=o!=null&&i&&" · ";return s.jsxs("div",{className:"not-prose flex items-center gap-4",children:[s.jsxs("div",{className:"grow",children:[s.jsxs("div",{className:"text-lg font-semibold",children:[o!=null&&s.jsx(T,{id:"FiwByI",defaultMessage:"Currently {temperature}",values:{temperature:U(a,o,e)}}),c,i.description]}),s.jsx("div",{className:"text-token-text-secondary",children:yg(t.location)})]}),s.jsxs("div",{className:"flex",children:[s.jsx(ls,{onTemperatureUnitChange:n,temperatureUnit:e}),s.jsx(Be,{weatherDescriptionData:i,isNight:r.night})]})]})}function Ye({children:t}){return s.jsx("div",{className:"no-scrollbar not-prose mt-1 overflow-auto sm:overflow-hidden",children:s.jsx(E.Root,{className:"min-w-0",children:s.jsx(E.Body,{className:"border-token-border-medium border-b-[0.5px] [&_tr:last-child]:border-b-0",children:t})})})}function pg({weatherResults:t,temperatureUnit:e,dateRange:n}){const a=M(),{hourly:r,current:o}=t;let i=r??[];n&&(i=i.filter(h=>h.timestamp>=n.start_timestamp&&h.timestamp<n.end_timestamp));const[c,d]=x.useState(!1),m=i.length>jt;if(!c&&m){const h=i[0],p=F(h.timestamp,h.utc_offset_sec);let u=!1;if(o){const v=F(o.timestamp,o.utc_offset_sec);p.getTime()-v.getTime()>8*60*60*1e3&&i.length>18&&(i=i.slice(7,18),u=!0)}u||(i=i.slice(0,jt))}return s.jsxs(Ye,{children:[i.map((h,p)=>s.jsxs(E.Row,{children:[s.jsxs(A,{className:"w-44",children:[s.jsx(Be,{weatherDescriptionData:h.description,isNight:h.night,size:"small"}),s.jsx("div",{className:"ms-3 whitespace-nowrap",children:s.jsx("span",{className:"lowercase",children:bg(a,h)})})]}),s.jsx(A,{className:"w-[60px] tabular-nums",children:s.jsx("div",{children:U(a,h.temperature.current,e)})}),s.jsx(A,{children:h.description.description})]},p)),m&&s.jsx(E.Row,{children:s.jsx(A,{className:"w-44",children:s.jsx(H,{color:"secondary",onClick:()=>d(!c),size:"small",children:c?s.jsx(T,{id:"KoC8Ym",defaultMessage:"Show less"}):s.jsx(T,{id:"X8F8Y/",defaultMessage:"Show more"})})})})]})}function xg({dailyForecast:t,temperatureUnit:e}){const n=M();return s.jsx(Ye,{children:t.map((a,r)=>s.jsxs(E.Row,{children:[s.jsxs(A,{className:"w-[7.5rem] min-w-[7.5rem]",children:[s.jsx(Be,{weatherDescriptionData:a.description,isNight:a.night,size:"small"}),s.jsx("div",{className:"ms-3 whitespace-nowrap",children:Le(n,F(a.timestamp,a.utc_offset_sec))})]}),s.jsxs(A,{className:"tabular-nums",children:[s.jsx("div",{children:U(n,a.temperature.max,e)}),s.jsx("div",{className:"text-token-text-secondary ms-1",children:U(n,a.temperature.min,e)})]}),s.jsx(A,{className:"min-w-80",children:a.description.description})]},r))})}function gg({historical:t,temperatureUnit:e}){const n=M();return t?s.jsx(Ye,{children:t.map((a,r)=>{const o=F(a.timestamp,a.utc_offset_sec);return s.jsxs(E.Row,{children:[s.jsx(A,{className:"w-[250px]",children:s.jsx("div",{className:"ms-3 whitespace-nowrap",children:n.formatDate(o,{weekday:"long",month:"short",day:"numeric"})})}),s.jsx(A,{className:"tabular-nums",children:a.temperature.max&&a.temperature.min?s.jsxs(s.Fragment,{children:[s.jsx("div",{children:U(n,a.temperature.max,e)}),s.jsx("div",{className:"text-token-text-secondary ms-1",children:U(n,a.temperature.min,e)})]}):s.jsx("div",{children:U(n,a.temperature.current,e)})}),s.jsx(A,{})]},r)})}):null}function A({className:t,children:e}){return s.jsx(E.Cell,{className:C("border-token-border-xlight! border-s-0! border-e-0! py-2! ps-4! pe-3! first:ps-0! last:pe-0!",t),divClassName:"items-start leading-relaxed",children:e})}function vg({turnIndex:t}){const e=en(a=>a.thread?.turns[t]?.use_location),[n]=oa();return!n.useLocation&&e?s.jsx("div",{className:"mt-3",children:s.jsx(H,{color:"secondary",icon:Yo,onClick:()=>{ia.setSettingsModalOpen(!0)},children:s.jsx(T,{id:"f47VEc",defaultMessage:"Share precise location"})})}):null}function ls({temperatureUnit:t,onTemperatureUnitChange:e}){const n=a=>t===a?"font-bold":"font-light";return s.jsx(Ks,{size:"small",triggerButton:s.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-primary flex items-center justify-center p-1.5",children:s.jsx(Qs,{className:"icon-sm-heavy"})}),children:s.jsxs(Js.Item,{onClick:()=>{e(t==="C"?"F":"C")},className:"text-token-text-primary",children:[s.jsx(T,{id:"bQIoe/",defaultMessage:"Temperature"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:n("F"),children:s.jsx(T,{id:"bvDeBB",defaultMessage:"°F"})}),s.jsx("div",{className:"mx-1 h-4 border-s border-gray-300"}),s.jsx("div",{className:n("C"),children:s.jsx(T,{id:"iNiz6O",defaultMessage:"°C"})})]})]})})}function Be({weatherDescriptionData:t,isNight:e=!1,size:n="normal"}){const a=ge(),r=n==="small"?30:50;return s.jsx("img",{draggable:!1,alt:t.description,src:rg({weatherCode:t.id,isDarkMode:a,isNight:e}).src,width:r,height:r})}function bg(t,e){const n=F(e.timestamp,e.utc_offset_sec);return t.formatDate(n,{hour:"numeric"})}function U(t,e,n){return e==null?"-":wt(n?n??"F":ds(t),e)}function ds(t){const e=["en-US","en-BZ","en-BS","en-KY","en-PW"],n=t.locale||"en-US";return e.includes(n)?"F":"C"}function yg(t){const e=t.name.split(",").map(n=>n.trim());return t.country&&!e.includes(t.country)&&e.push(t.country),e.join(", ")}const wg=()=>{const t=M(),[e,n]=Gs("USER_TEMPERATURE_UNIT",ds(t),a=>["F","C"].includes(a));return[e,n]},jg=Rn(()=>Fn(()=>import("./mitiyx3tgqtm5q9b.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(t=>t.BusinessesMap));function _g(t){"use forget";const e=he.c(118),{index:n,FormattedText:a,node:r,wordFadeType:o}=t,i=parseInt(n,10),c=x.useContext(fe);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d="756982148",e[0]=d):d=e[0];const{value:m}=De(d);let h;e[1]===Symbol.for("react.memo_cache_sentinel")?(h="4061070236",e[1]=h):h=e[1];const{value:p}=De(h),u=Mt(c?.analyticsMetadata),v=x.useRef(!1);if(c==null)return null;const{contentReferences:y,onShowSearchResults:w,numImageResults:k,analyticsMetadata:$,message:j}=c,l=y?.[i],g=$?.clientThreadId==null;if(!l||$.turnIndex===void 0||l.type===void 0||p&&l.type==="sources_footnote")return null;let b;e[2]===Symbol.for("react.memo_cache_sentinel")?(b={img:$g},e[2]=b):b=e[2];let N;e[3]!==l.alt?(N=s.jsx(Fe,{components:b,children:l.alt}),e[3]=l.alt,e[4]=N):N=e[4];const S=N;let _=null;e:switch(l.type){case"title_citation":{let f;e[5]!==l||e[6]!==u?(f=s.jsx(Ro,{metadata:l,trackContentReferenceEvent:u}),e[5]=l,e[6]=u,e[7]=f):f=e[7],_=f;break e}case"location_search":{let f;e[8]!==l||e[9]!==u?(f=s.jsx(Co,{metadata:l,trackContentReferenceEvent:u}),e[8]=l,e[9]=u,e[10]=f):f=e[10],_=f;break e}case"time":{let f;e[11]!==l||e[12]!==u?(f=s.jsx(Lo,{metadata:l,trackContentReferenceEvent:u}),e[11]=l,e[12]=u,e[13]=f):f=e[13],_=f;break e}case"image_v2":{const f=k??0;let I;e[14]!==$||e[15]!==l||e[16]!==u||e[17]!==f?(I=s.jsx(Xt,{metadata:l,numImageResults:f,analyticsMetadata:$,trackContentReferenceEvent:u}),e[14]=$,e[15]=l,e[16]=u,e[17]=f,e[18]=I):I=e[18],_=I;break e}case"nav_list":{let f;e[19]!==l||e[20]!==u?(f=s.jsx(No,{metadata:l,trackContentReferenceEvent:u}),e[19]=l,e[20]=u,e[21]=f):f=e[21],_=f;break e}case"file_navlist":{let f;e[22]!==l||e[23]!==u?(f=s.jsx(Rr,{metadata:l,trackContentReferenceEvent:u}),e[22]=l,e[23]=u,e[24]=f):f=e[24],_=f;break e}case"file":{let f;e[25]!==l||e[26]!==u||e[27]!==i?(f=s.jsx(Er,{fileRef:l,index:i,trackContentReferenceEvent:u}),e[25]=l,e[26]=u,e[27]=i,e[28]=f):f=e[28],_=f;break e}case"grouped_webpages_model_predicted_fallback":{let f;e[29]!==l||e[30]!==c.message.id||e[31]!==u||e[32]!==i||e[33]!==r?(f=s.jsx(Ea,{webpageRef:l,node:r,trackContentReferenceEvent:u,messageId:c.message.id,index:i}),e[29]=l,e[30]=c.message.id,e[31]=u,e[32]=i,e[33]=r,e[34]=f):f=e[34],_=f;break e}case"grouped_webpages":{let f;e[35]!==l||e[36]!==c.message.id||e[37]!==u||e[38]!==i||e[39]!==r?(f=s.jsx(Da,{webpageRef:l,node:r,trackContentReferenceEvent:u,messageId:c.message.id,index:i}),e[35]=l,e[36]=c.message.id,e[37]=u,e[38]=i,e[39]=r,e[40]=f):f=e[40],_=f;break e}case"tldr":{let f;e[41]!==l||e[42]!==u||e[43]!==m||e[44]!==w?(f=m?s.jsx(Xe,{navigation:{...l,type:"navigation",domains:[{title:l.page_title,subtitle:l.display_title,domain:l.breadcrumbs[0],url:l.url,sub_domains:[]}]},onShowSearchResults:w,trackContentReferenceEvent:u}):s.jsx(sn,{tldr:l,trackContentReferenceEvent:u}),e[41]=l,e[42]=u,e[43]=m,e[44]=w,e[45]=f):f=e[45],_=f;break e}case"navigation":{let f;e[46]!==l||e[47]!==u||e[48]!==w?(f=s.jsx(Xe,{navigation:l,onShowSearchResults:w,trackContentReferenceEvent:u}),e[46]=l,e[47]=u,e[48]=w,e[49]=f):f=e[49],_=f;break e}case"stock":{let f;e[50]!==l||e[51]!==u?(f=s.jsx(jo,{contentReference:l,trackContentReferenceEvent:u}),e[50]=l,e[51]=u,e[52]=f):f=e[52],_=f;break e}case"calculator":{let f;e[53]!==l||e[54]!==u?(f=s.jsx(kr,{data:l,trackContentReferenceEvent:u}),e[53]=l,e[54]=u,e[55]=f):f=e[55],_=f;break e}case"code_execution":{let f;e[56]!==a||e[57]!==l||e[58]!==u?(f=s.jsx(Tr,{FormattedText:a,displayInfo:l,trackContentReferenceEvent:u}),e[56]=a,e[57]=l,e[58]=u,e[59]=f):f=e[59],_=f;break e}case"forecast":{let f;e[60]!==$||e[61]!==l.date_range||e[62]!==l.forecast||e[63]!==u?(f=l?.forecast&&s.jsx(dg,{weatherResults:l.forecast,dateRange:l.date_range,turnIndex:$.turnIndex,trackContentReferenceEvent:u}),e[60]=$,e[61]=l.date_range,e[62]=l.forecast,e[63]=u,e[64]=f):f=e[64],_=f;break e}case"businesses_map":{let f;e[65]!==l||e[66]!==u?(f=s.jsx(jg,{contentReference:l,trackContentReferenceEvent:u}),e[65]=l,e[66]=u,e[67]=f):f=e[67],_=f;break e}case"video":{let f;e[68]!==l||e[69]!==u?(f=s.jsx(Uo,{video:l,trackContentReferenceEvent:u}),e[68]=l,e[69]=u,e[70]=f):f=e[70],_=f;break e}case"sources_footnote":{let f;e[71]!==l||e[72]!==u||e[73]!==g||e[74]!==w?(f=s.jsx(nn,{sourcesFootnote:l,onShowSearchResults:w,trackContentReferenceEvent:u,isSearchGptApp:g}),e[71]=l,e[72]=u,e[73]=g,e[74]=w,e[75]=f):f=e[75],_=f;break e}case"sports_standings":{let f;e[76]!==l||e[77]!==u?(f=s.jsx(Ao,{standingsRef:l,trackContentReferenceEvent:u}),e[76]=l,e[77]=u,e[78]=f):f=e[78],_=f;break e}case"sports_schedule":{let f;e[79]!==l||e[80]!==u?(f=s.jsx(Mo,{scheduleRef:l,trackContentReferenceEvent:u}),e[79]=l,e[80]=u,e[81]=f):f=e[81],_=f;break e}case"attribution":{let f;e[82]!==l||e[83]!==o?(f=s.jsx(br,{attribution:l,wordFadeType:o}),e[82]=l,e[83]=o,e[84]=f):f=e[84],_=f;break e}case"debug":{let f;e[85]!==l?(f=Object.entries(l).map(kg),e[85]=l,e[86]=f):f=e[86];let I;e[87]!==f?(I=s.jsx(s.Fragment,{children:f}),e[87]=f,e[88]=I):I=e[88],_=I;break e}case"image_inline":{let f;e[89]!==l||e[90]!==c.clientThreadId||e[91]!==u||e[92]!==j?(f=s.jsx(dr,{reference:l,clientThreadId:c.clientThreadId,trackContentReferenceEvent:u,message:j}),e[89]=l,e[90]=c.clientThreadId,e[91]=u,e[92]=j,e[93]=f):f=e[93],_=f;break e}case"product_entity":{let f;e[94]!==$.turnIndex||e[95]!==l||e[96]!==c.clientThreadId||e[97]!==c.message.id||e[98]!==u?(f=s.jsx(mr,{contentReference:l,clientThreadId:c.clientThreadId,messageId:c.message.id,turnIndex:$.turnIndex,trackContentReferenceEvent:u}),e[94]=$.turnIndex,e[95]=l,e[96]=c.clientThreadId,e[97]=c.message.id,e[98]=u,e[99]=f):f=e[99],_=f;break e}case"products":{let f;e[100]!==$||e[101]!==l||e[102]!==c.clientThreadId||e[103]!==c.message.id?(f=s.jsx(gr,{contentReference:l,clientThreadId:c.clientThreadId,messageId:c.message.id,turnIndex:$.turnIndex,analyticsMetadata:$}),e[100]=$,e[101]=l,e[102]=c.clientThreadId,e[103]=c.message.id,e[104]=f):f=e[104],_=f;break e}case"product_reviews":{let f;e[105]!==l||e[106]!==u?(f=s.jsx(xa,{contentReference:l,disableAnimation:!0,trackContentReferenceEvent:u}),e[105]=l,e[106]=u,e[107]=f):f=e[107],_=f;break e}case"product_rationale":{let f;e[108]!==l||e[109]!==u?(f=s.jsx(pa,{contentReference:l,trackContentReferenceEvent:u,disableAnimation:!0}),e[108]=l,e[109]=u,e[110]=f):f=e[110],_=f;break e}}let P;e[111]!==S||e[112]!==l||e[113]!==u?(P=f=>(v.current||(u("Search Content Reference Failed","search_content_reference_failed",l.type),Wt.addError(`Error rendering content reference: ${l.type}`,{...f,contentReference:l}),v.current=!0),l?.alt?S:s.jsx("span",{className:`errored-object-${l.type}`})),e[111]=S,e[112]=l,e[113]=u,e[114]=P):P=e[114];let q;return e[115]!==_||e[116]!==P?(q=s.jsx(Yt,{name:"content-reference-renderer",fallback:P,children:_}),e[115]=_,e[116]=P,e[117]=q):q=e[117],q}function kg(t){const[e,n]=t;return s.jsx("sub",{className:"ms-1 w-fit rounded-md border-2 border-solid border-orange-500 px-1 leading-none",children:n},e)}function $g(t){const{src:e,alt:n}=t;return s.jsx("img",{src:e,alt:n,className:"max-h-28"})}const Cg="f",Ng=(t,e)=>{const n=x.useRef(!1);x.useEffect(()=>{n.current||(n.current=!0,re.count(oe.DEFAULT,"clickable_follow_up_text_shown"),Z.logEventWithStatsig("Clickable Follow Up Text Shown","chatgpt_clickable_follow_up_text_shown",{...Oe({clientThreadId:t,messageId:e})}))},[t,e])},Tg=({messageId:t,clientThreadId:e,text:n})=>{const a=ea(e),r=an(),o=rn(e);Ng(e,t);const i=x.useCallback(c=>{c.preventDefault(),re.count(oe.DEFAULT,"clickable_follow_up_text_clicked"),Z.logEventWithStatsig("Clickable Follow Up Text Clicked","chatgpt_clickable_follow_up_text_clicked",Oe({clientThreadId:e,messageId:t})),a({sourceEvent:c,promptMessage:zn(n.toLowerCase()),completionMetadata:{systemHints:[...r],conversationMode:o??{kind:Hn.PrimaryAssistant}}})},[e,o,t,r,a,n]);return s.jsx("span",{className:"decoration-token-text-secondary hover:text-token-text-secondary cursor-pointer underline decoration-dotted decoration-[12%] underline-offset-4 transition-colors duration-200 ease-in-out",onClick:i,children:n})},Sg=({messageId:t,clientThreadId:e,text:n})=>{const a=xe();return ze(a,"2723331665")?s.jsx(Tg,{messageId:t,clientThreadId:e,text:n}):s.jsx("span",{children:n})},Mg=kt.memo(Sg),Pg=({onClick:t})=>{const[e,n]=x.useState(!1),a=on(),r=M(),o=c=>{t(c),n(!0),setTimeout(()=>{a()&&n(!1)},2e3)},i=e?cn:ln;return s.jsx(me,{label:r.formatMessage({id:"KrNQPS",defaultMessage:"Copy Table"}),side:"bottom",align:"center",alignOffset:0,children:s.jsx("button",{onClick:o,className:"bg-token-bg-primary hover:bg-token-bg-tertiary text-token-text-secondary my-1 rounded-sm p-1 transition-opacity group-[:not(:hover):not(:focus-within)]:pointer-events-none group-[:not(:hover):not(:focus-within)]:opacity-0",children:s.jsx(i,{className:"icon-md-heavy"})})})},Dg="_tableContainer_16hzy_1",Eg="_tableWrapper_16hzy_14",_t={tableContainer:Dg,tableWrapper:Eg},Ag=({onClickCopy:t,children:e,...n})=>{const a=x.useRef(null),r=x.useRef(null);return On(()=>{dn({axis:"height",target:a.current?.firstElementChild,onChange:({height:o})=>{r.current&&(r.current.style.height=`${o}px`)}})},[]),s.jsx("div",{className:_t.tableContainer,children:s.jsxs("div",{tabIndex:-1,className:C(_t.tableWrapper,"group flex w-fit flex-col-reverse"),children:[s.jsx("table",{...n,className:"w-fit min-w-(--thread-content-width)",ref:a,children:e}),s.jsx("div",{className:"sticky end-(--thread-content-margin) h-0 self-end select-none",children:s.jsx("div",{className:"absolute end-0 flex items-end",ref:r,children:s.jsx(Pg,{onClick:t})})})]})})},Ig=({node:t,children:e,...n})=>s.jsx("td",{...n,children:x.Children.map(e,(a,r)=>a==="<br>"?s.jsx("br",{},r):a)});function Lg(t){const{src:e,clientThreadId:n,...a}=t,r=Ft(n),o=x.useContext(fe),i=yn(r,e,o?.useSafeUrls);return i==null?s.jsx("div",{}):s.jsx("img",{...a,src:i})}function Rg(t){return s.jsx(_g,{...t,FormattedText:us})}function us({size:t="medium",children:e,className:n,clientThreadId:a,messageId:r,isActivelyStreaming:o=!1,componentOverrides:i,isDeepResearchResultMessage:c,forceDarkMode:d,disableWordFade:m}){const h=ge()||d,p=un(),{wordFadeType:u}=hn(),v=x.useMemo(()=>({pre:({children:l,"data-start":g,"data-end":b,"data-is-last-node":N})=>s.jsx("pre",{className:"overflow-visible!","data-start":g,"data-end":b,"data-is-last-node":N,children:l}),code:l=>s.jsx(bn,{...l,clientThreadId:a}),[Un]:l=>s.jsx(Rg,{wordFadeType:u,...l}),[la]:ca,[vn]:za,[gn]:Xa,[xn]:Za,a:l=>{const{node:g,children:b,...N}=l,S=g?.properties?.href;if(typeof S=="string"&&S.startsWith(Ze))return p?s.jsx(fn,{...N}):a!=null&&r!=null?s.jsx(pn,{...N,clientThreadId:a,messageId:r,href:S,children:b}):null;if(typeof S=="string"&&S===Vn){const _=g?.children?.map(P=>typeof P.value=="string"?P.value:"").join("").trim();return s.jsx(Zn,{...l,text:_,clientThreadId:a,messageId:r,className:"cursor-pointer"})}if(typeof S=="string"&&S===Cg){const _=g.children.map(P=>P.children?.[0]?.value).filter(P=>typeof P=="string").join("").trim();return s.jsx(Mg,{...l,text:_,clientThreadId:a,messageId:r})}return S&&typeof S=="string"&&Qa(S)?b:s.jsx(Gn,{...l,clientThreadId:a,messageId:r})},table:({node:l,...g})=>s.jsx(Ag,{...g,onClickCopy:b=>{Z.logEvent("ChatGPT Table Copy Clicked");const N=a!=null&&r!=null?Q.getNode(Wn(a),r).message:void 0;mn(qn(l.markdownSource,N?.metadata?.content_references),void 0,b)}}),td:Ig,img:({node:l,...g})=>{const b=l?.properties?.src;return typeof b=="string"&&(b.startsWith(Ze)||b.startsWith("attachment:"))?null:s.jsx(Lg,{...g,clientThreadId:a})},...u==="delay"?La:[],...i}),[i,a,r,p,u]),y=x.useMemo(()=>o?Ra(e):e,[e,o]),{value:w}=De("1839283687"),k=Pt(),$=x.useMemo(()=>[...Vt,[Xn,y]],[y]),j=x.useMemo(()=>u==="indexed"&&!m?{handlers:{text:(l,g,b)=>{const N=[];for(const S of k(g.value))N.push({type:"element",tagName:"span",properties:{className:Dt.fadeIn},children:[{type:"text",value:S}]});return N}}}:void 0,[u,k,m]);return w?!1:s.jsx(Yt,{name:"formatted_text_error",fallback:()=>s.jsx(s.Fragment,{children:y}),children:s.jsx(hs,{rehypePlugins:$,remarkPlugins:qt,remarkRehypeOptions:j,className:C(n,"markdown prose dark:prose-invert w-full break-words",h?"dark":"light",t==="small"&&"prose-xs",c&&"deep-research-result"),urlTransform:Bt,components:v,children:y})})}const hs=x.memo(Fe),ov=Object.freeze(Object.defineProperty({__proto__:null,FormattedText:us,ReactMarkdownMemo:hs},Symbol.toStringTag,{value:"Module"}));export{us as F,av as R,We as W,ov as a,rv as l};
//# sourceMappingURL=fcfjbsbarhrilkf6.js.map
