import{g3 as y,m as w,W as b,eo as M}from"./n9zp7vm10xoipejo.js";import{D as _,j as e,a9 as C,f as N,d as k,a as F,b as W,M as l}from"./lip667d8t42poxum.js";import{dE as P}from"./l4oo5ijw01fyrjzs.js";import{u as R,R as A,I as a,S as p}from"./e0d9ulqcceojgphj.js";import{E as U,R as D,g as T}from"./n6glwh7wpwezcge0.js";import{u as O,W as B,i as I,a as L}from"./ojvadmnty96xvqkr.js";import{W as $}from"./bja6mzdohoajlk46.js";import"./cr6qy90q6ci3j3kc.js";import"./kpbk6w80ptlqj4v4.js";import"./ex0w8u6azfclal10.js";import"./dgaabmwb6kfq92a0.js";import"./ocylzx9oqlg8ycwm.js";import"./kweqtgafphozzl00.js";import"./fw89hpm6ehbsygz7.js";import"./oe646f7iouawgq3e.js";import"./ls58p44u0ovqzhvw.js";import"./g2w1djl0igdytz37.js";import"./n7emuv1efbtdnxb9.js";import"./ef49rx2y546x1g51.js";import"./n4y4yo9zuw99bnsn.js";import"./cbaql59zac1mfnmh.js";import"./op1xowyjquc2dnq7.js";import"./nmzcjggnos81a3wt.js";import"./ezoyp421dng92ve4.js";import"./krf7zg7fy4qqowqq.js";import"./j385t288u9l3nf6j.js";import"./oour34cwuwf9tyoh.js";import"./czpmep8a1gn2yxp9.js";import"./g1x7jf9g2b4osi6b.js";import"./kdkl0k5zipatley9.js";function q(){const{environmentId:s}=_(),{eligible:i}=P();return i?e.jsx(C,{to:"/codex/onboarding"}):s?e.jsx(z,{environmentId:s}):e.jsx(y,{})}function z({environmentId:s}){const i=N(),o=w(),v=k(),m=F(),{data:n,isLoading:g,isError:h}=O(s),d=n?.secrets??{},x=R()?"workspace":"private",{mutate:E,isPending:f}=W({mutationFn:t=>B.updateEnvironment(s,t),onSuccess:async t=>{await I(m,s),L(m,s,t),o.success(i.formatMessage({id:"wham.editEnvironment.environmentUpdatedSuccessfully",defaultMessage:"Environment updated successfully"})),v(`/codex/settings/environment/${s}`)},onError:()=>{o.danger(i.formatMessage({id:"wham.editEnvironment.failedToUpdateEnvironment",defaultMessage:"Failed to update environment"}))}});function j(t){const r=T(t.secrets,d),S=t.envVars.reduce((c,u)=>(c[u.key]=u.value,c),{});E({label:t.label,repos:[t.repositoryId],machine_id:t.machine,setup:t.setupCommands,workspace_dir:t.workspaceDirectory,description:t.description,share_settings:t.share_settings,secrets:r,env_vars:S})}return e.jsx($,{flex:!0,hideBorder:!0,showSidebar:!1,maxWidth:"w-full",children:g?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(b,{})}):h?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(l,{id:"wham.editEnvironment.errorLoadingEnvironment",defaultMessage:"Error loading environment"})}):n?e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"sticky top-0 px-4",children:[e.jsx(a,{label:i.formatMessage({id:"wham.editEnvironment.environments",defaultMessage:"Environments"}),url:"/codex/settings/environments",className:"text-token-text-tertiary"}),e.jsx(p,{}),e.jsx(a,{label:n.label,url:`/codex/settings/environment/${s}`,className:"font-medium"}),e.jsx(p,{}),e.jsx(a,{label:i.formatMessage({id:"wham.editEnvironment.edit",defaultMessage:"edit"}),className:"text-token-text-tertiary"})]}),e.jsx(U,{initialEnvironmentId:s,existingEnvironment:n,initialValues:{label:n?.label,description:n?.description??"",share_settings:n?.share_settings??x,machine:n?.machine_id,repositoryId:n?.repos[0],workspaceDirectory:n?.workspace_dir??"",setupCommands:n?.setup?Array.isArray(n?.setup)?n.setup.join(`
`):n.setup:"",envVars:Object.entries(n?.env_vars??{}).map(([t,r])=>({key:t,value:r})),secrets:Object.keys(d).map(t=>({key:t,value:D,isEditing:!1}))},primaryButtonText:i.formatMessage({id:"wham.editEnvironment.saveEnvironment",defaultMessage:"Save environment"}),onSubmit:j,isPending:f})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(l,{id:"wham.editEnvironment.environmentNotFound",defaultMessage:"Environment not found"})})})}const ye=()=>[{title:"Codex"}],we=M(function(){return e.jsx(q,{})});export{we as default,ye as meta};
//# sourceMappingURL=me92exqby8ux00m7.js.map
