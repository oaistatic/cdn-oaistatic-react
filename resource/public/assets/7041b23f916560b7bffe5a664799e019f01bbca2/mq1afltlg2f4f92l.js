import{r as c,j as e,M as h,a6 as x,a5 as f}from"./lip667d8t42poxum.js";import{fB as g,dH as b,an as j,fC as d}from"./l4oo5ijw01fyrjzs.js";import{p as w,g as v}from"./8jh1d59j0bidwcwx.js";import{F as N}from"./d16bp83dnd0g4dve.js";import{W as k}from"./fw89hpm6ehbsygz7.js";import{c as y}from"./n9zp7vm10xoipejo.js";import"./ojvadmnty96xvqkr.js";import"./gssjqrozvzmyjg6o.js";import"./nmzcjggnos81a3wt.js";import"./ezoyp421dng92ve4.js";import"./krf7zg7fy4qqowqq.js";import"./j385t288u9l3nf6j.js";import"./d7qhj0hizrl5q10d.js";import"./j1bb88glgmel43br.js";import"./n7emuv1efbtdnxb9.js";import"./ef49rx2y546x1g51.js";import"./d61ttkht2554hc14.js";import"./iguubsmy82ykz2l9.js";import"./ex0w8u6azfclal10.js";import"./xbx5ij165jfnp313.js";import"./oc4rktd8eofx28ec.js";import"./h6u5tn9ugd2tunyc.js";import"./pb0xfopp3f7joxj4.js";import"./fcfjbsbarhrilkf6.js";import"./ocylzx9oqlg8ycwm.js";import"./jilfkjkciycvhk2x.js";import"./f64hg6fdq8ojkhjz.js";import"./ju8q15l0hqy6ti9z.js";import"./gydkbc6xtfcf9567.js";import"./btgi4ch9w5xby7vu.js";import"./es0z9v8doc0hgjd4.js";import"./jpfsl7zlesohw8kt.js";import"./ctz8d92lx4gyhixb.js";import"./cg71y7d9v77500qa.js";import"./m27zu1gl0gszchhw.js";import"./s0vortm3fnmb5s99.js";import"./bz6kdye13oi6n32b.js";import"./b2byc8rvxtjtrqes.js";import"./bir4gwnbq17hkvt3.js";import"./ls58p44u0ovqzhvw.js";import"./oe646f7iouawgq3e.js";const C="_glow_1o0tc_1",u={glow:C};function F({diffFiles:t,onClickFile:a,startOpen:s=!1,isActive:o=!1}){const[r,m]=c.useState(s);return t.length?e.jsxs("div",{className:y("bg-token-bg-primary flex flex-col rounded-2xl border",o?"border-token-border-heavy outline-2 outline-black/5":"border-token-border-light"),children:[e.jsx("button",{className:"cursor-pointer p-2 focus-visible:outline-0",onClick:()=>{t.length&&a?.(t[0]),(o||!r)&&m(!r)},children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"gap-1 px-2 py-1 text-sm",children:e.jsx("span",{className:"text-token-text-primary font-medium",children:e.jsx(h,{id:"wham.diff.changedFileList.title",defaultMessage:"{numFiles, plural, one {File ({numFiles})} other {Files ({numFiles})}}",values:{numFiles:t.length}})})}),r?e.jsx(g,{className:"icon-md"}):e.jsx(b,{className:"icon-md"})]})}),e.jsx(x,{initial:!s,children:r&&e.jsx(f.ul,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.1},className:"overflow-clip px-2 pb-2",children:t.map((n,l)=>{const p=`${n._oldFileName??l}-${n._newFileName}`;return e.jsx(T,{diffFile:n,onClick:()=>a?.(n)},p)})})})]}):null}function T({diffFile:t,onClick:a}){const s=c.useRef(null),o=c.useRef(null),r=c.useRef(null),[m,n]=c.useState(!1),l=v(t),p=`${t._oldFileName??""}-${t._newFileName}`;return e.jsx("li",{className:"group w-full",children:e.jsx(j,{label:l,labelTextAlign:"left",open:m?void 0:!1,children:e.jsxs("button",{className:"hover:bg-token-border-light after:bg-token-border-light relative flex h-10 w-full items-center justify-start rounded-lg px-2 text-sm after:absolute after:inset-x-2 after:bottom-0 after:h-[1px] after:content-[''] group-last:after:hidden focus-visible:outline-0",onClick:()=>{a?.(),requestAnimationFrame(()=>{s.current!=null&&window.clearTimeout(s.current);const i=document.querySelector(`[data-diff-header="${l}"]`);i?.classList.remove(u.glow),i?.scrollIntoView({behavior:"instant",block:"start"}),i?.classList.add(u.glow),s.current=window.setTimeout(()=>{i?.classList.remove(u.glow)},5e3)})},children:[e.jsxs("div",{className:"relative flex min-w-0 shrink pe-2",children:[e.jsx("span",{"aria-hidden":!0,className:"invisible fixed inline-block whitespace-nowrap",ref:d({axis:"width",onChange:({width:i})=>{o.current=i,r.current!=null&&n(r.current<i)}}),children:l}),e.jsx("span",{ref:d({axis:"width",onChange:({width:i})=>{r.current=i,o.current!=null&&n(i<o.current)}}),className:"inline-block max-w-full min-w-0 shrink truncate",children:l})]}),e.jsx("span",{className:"ms-auto",children:e.jsx(N,{diffFile:t,fallback:e.jsx(k,{linesAdded:t.additionLength,linesRemoved:t.deletionLength})})})]})})},p)}function xe({assistantTurn:t,onClickFile:a,startOpen:s=!1,isActive:o=!1}){const r=w({assistantTurn:t}).map(m=>m.diffFile);return e.jsx(F,{diffFiles:r,onClickFile:a,startOpen:s,isActive:o})}export{F as ChangedFileList,xe as ChangedFileListFromTaskTurn};
//# sourceMappingURL=mq1afltlg2f4f92l.js.map
