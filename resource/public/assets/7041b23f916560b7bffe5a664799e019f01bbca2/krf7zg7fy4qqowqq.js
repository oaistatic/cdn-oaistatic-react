import{h6 as Po,j as qo,dT as Lo,F as fa,ar as Vo,d0 as Ho,c0 as Wo,aj as Ni}from"./n9zp7vm10xoipejo.js";import{o5 as zi,kZ as Go,o6 as Jo,o7 as $o,cQ as Uo,o8 as Ko,dr as Yo,ds as jo,an as Xo,dA as Zo,o9 as Qo}from"./l4oo5ijw01fyrjzs.js";import{r as pa,j as ze,a5 as _o,M as eh}from"./lip667d8t42poxum.js";import{c as th,b as rh,i as nh}from"./j385t288u9l3nf6j.js";function ma(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let a=0;i.text[a]==s.text[a];a++)t++;return t}if(i.content.size||s.content.size){let a=ma(i.content,s.content,t+1);if(a!=null)return a}t+=i.nodeSize}}function ga(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let a=n.child(--i),l=e.child(--s),o=a.nodeSize;if(a==l){t-=o,r-=o;continue}if(!a.sameMarkup(l))return{a:t,b:r};if(a.isText&&a.text!=l.text){let h=0,d=Math.min(a.text.length,l.text.length);for(;h<d&&a.text[a.text.length-h-1]==l.text[l.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(a.content.size||l.content.size){let h=ga(a.content,l.content,t-1,r-1);if(h)return h}t-=o,r-=o}}class z{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let a=0,l=0;l<t;a++){let o=this.content[a],h=l+o.nodeSize;if(h>e&&r(o,i+l,s||null,a)!==!1&&o.content.size){let d=l+1;o.nodesBetween(Math.max(0,e-d),Math.min(o.content.size,t-d),r,i+d)}l=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",a=!0;return this.nodesBetween(e,t,(l,o)=>{let h=l.isText?l.text.slice(Math.max(e,o)-o,t-o):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&h||l.isTextblock)&&r&&(a?a=!1:s+=r),s+=h},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new z(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,a=0;a<t;s++){let l=this.content[s],o=a+l.nodeSize;o>e&&((a<e||o>t)&&(l.isText?l=l.cut(Math.max(0,e-a),Math.min(l.text.length,t-a)):l=l.cut(Math.max(0,e-a-1),Math.min(l.content.size,t-a-1))),r.push(l),i+=l.nodeSize),a=o}return new z(r,i)}cutByIndex(e,t){return e==t?z.empty:e==0&&t==this.content.length?this:new z(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new z(i,s)}addToStart(e){return new z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return ma(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return ga(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Yr(0,e);if(e==this.size)return Yr(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),a=i+s.nodeSize;if(a>=e)return a==e||t>0?Yr(r+1,a):Yr(r,i);i=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return z.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new z(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return z.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new z(t||e,r)}static from(e){if(!e)return z.empty;if(e instanceof z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}z.empty=new z([],0);const G0={index:0,offset:0};function Yr(n,e){return G0.index=n,G0.offset=e,G0}function d0(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!d0(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!d0(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class j{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&d0(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return j.none;if(e instanceof j)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}j.none=[];class f0 extends Error{}class B{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=va(this.content,e+this.openStart,t);return r&&new B(r,this.openStart,this.openEnd)}removeBetween(e,t){return new B(ya(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return B.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new B(z.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new B(e,r,i)}}B.empty=new B(z.empty,0,0);function ya(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:a,offset:l}=n.findIndex(t);if(i==e||s.isText){if(l!=t&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(ya(s.content,e-i-1,t-i-1)))}function va(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),a=n.maybeChild(i);if(s==e||a.isText)return n.cut(0,e).append(t).append(n.cut(e));let l=va(a.content,e-s-1,t);return l&&n.replaceChild(i,a.copy(l))}function ih(n,e,t){if(t.openStart>n.depth)throw new f0("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new f0("Inconsistent open depths");return ba(n,e,t,0)}function ba(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let a=ba(n,e,t,r+1);return s.copy(s.content.replaceChild(i,a))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let a=n.parent,l=a.content;return Gt(a,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else{let{start:a,end:l}=sh(t,n);return Gt(s,wa(n,a,l,e,r))}else return Gt(s,p0(n,e,r))}function xa(n,e){if(!e.type.compatibleContent(n.type))throw new f0("Cannot join "+e.type.name+" onto "+n.type.name)}function bn(n,e,t){let r=n.node(t);return xa(r,e.node(t)),r}function Wt(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Mr(n,e,t,r){let i=(e||n).node(t),s=0,a=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Wt(n.nodeAfter,r),s++));for(let l=s;l<a;l++)Wt(i.child(l),r);e&&e.depth==t&&e.textOffset&&Wt(e.nodeBefore,r)}function Gt(n,e){return n.type.checkContent(e),n.copy(e)}function wa(n,e,t,r,i){let s=n.depth>i&&bn(n,e,i+1),a=r.depth>i&&bn(t,r,i+1),l=[];return Mr(null,n,i,l),s&&a&&e.index(i)==t.index(i)?(xa(s,a),Wt(Gt(s,wa(n,e,t,r,i+1)),l)):(s&&Wt(Gt(s,p0(n,e,i+1)),l),Mr(e,t,i,l),a&&Wt(Gt(a,p0(t,r,i+1)),l)),Mr(r,null,i,l),new z(l)}function p0(n,e,t){let r=[];if(Mr(null,n,t,r),n.depth>t){let i=bn(n,e,t+1);Wt(Gt(i,p0(n,e,t+1)),r)}return Mr(e,null,t,r),new z(r)}function sh(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(z.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class zr{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return j.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new oh(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let a=e;;){let{index:l,offset:o}=a.content.findIndex(s),h=s-o;if(r.push(a,l,i+o),!h||(a=a.child(l),a.isText))break;s=h-1,i+=o+1}return new zr(t,r,s)}static resolveCached(e,t){let r=Di.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==t)return a}else Di.set(e,r=new ah);let i=r.elts[r.i]=zr.resolve(e,t);return r.i=(r.i+1)%lh,i}}class ah{constructor(){this.elts=[],this.i=0}}const lh=12,Di=new WeakMap;class oh{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const hh=Object.create(null);class Qe{constructor(e,t,r,i=j.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||z.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&d0(this.attrs,t||e.defaultAttrs||hh)&&j.sameSet(this.marks,r||j.none)}copy(e=null){return e==this.content?this:new Qe(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Qe(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return B.empty;let i=this.resolve(e),s=this.resolve(t),a=r?0:i.sharedDepth(t),l=i.start(a),h=i.node(a).content.cut(i.pos-l,s.pos-l);return new B(h,i.depth-a,s.depth-a)}replace(e,t,r){return ih(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return zr.resolveCached(this,e)}resolveNoCache(e){return zr.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ka(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=z.empty,i=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,i,s),l=a&&a.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let o=i;o<s;o++)if(!this.type.allowsMarks(r.child(o).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,t);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=j.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!j.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=z.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}Qe.prototype.text=void 0;let uh=class xn extends Qe{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ka(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new xn(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new xn(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function ka(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ut{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new ch(e,t);if(r.next==null)return Ut.empty;let i=Sa(r);r.next&&r.err("Unexpected trailing text");let s=vh(yh(i));return bh(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(a,l){let o=a.matchFragment(e,r);if(o&&(!t||o.validEnd))return z.from(l.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:d,next:f}=a.next[h];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let g=s(f,l.concat(d));if(g)return g}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let a=[];for(let l=i;l.type;l=l.via)a.push(l.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:l,next:o}=s.next[a];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!i.type||o.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}Ut.empty=new Ut(!0);class ch{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Sa(n){let e=[];do e.push(dh(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function dh(n){let e=[];do e.push(fh(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function fh(n){let e=gh(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=ph(n,e);else break;return e}function Oi(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function ph(n,e){let t=Oi(n),r=t;return n.eat(",")&&(n.next!="}"?r=Oi(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function mh(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let a=t[s];a.groups.indexOf(e)>-1&&i.push(a)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function gh(n){if(n.eat("(")){let e=Sa(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=mh(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function yh(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(a,l,o){let h={term:o,to:l};return e[a].push(h),h}function i(a,l){a.forEach(o=>o.to=l)}function s(a,l){if(a.type=="choice")return a.exprs.reduce((o,h)=>o.concat(s(h,l)),[]);if(a.type=="seq")for(let o=0;;o++){let h=s(a.exprs[o],l);if(o==a.exprs.length-1)return h;i(h,l=t())}else if(a.type=="star"){let o=t();return r(l,o),i(s(a.expr,o),o),[r(o)]}else if(a.type=="plus"){let o=t();return i(s(a.expr,l),o),i(s(a.expr,o),o),[r(o)]}else{if(a.type=="opt")return[r(l)].concat(s(a.expr,l));if(a.type=="range"){let o=l;for(let h=0;h<a.min;h++){let d=t();i(s(a.expr,o),d),o=d}if(a.max==-1)i(s(a.expr,o),o);else for(let h=a.min;h<a.max;h++){let d=t();r(o,d),i(s(a.expr,o),d),o=d}return[r(o)]}else{if(a.type=="name")return[r(l,void 0,a.value)];throw new Error("Unknown expr type")}}}}function Ma(n,e){return e-n}function Ei(n,e){let t=[];return r(e),t.sort(Ma);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let a=0;a<s.length;a++){let{term:l,to:o}=s[a];!l&&t.indexOf(o)==-1&&r(o)}}}function vh(n){let e=Object.create(null);return t(Ei(n,0));function t(r){let i=[];r.forEach(a=>{n[a].forEach(({term:l,to:o})=>{if(!l)return;let h;for(let d=0;d<i.length;d++)i[d][0]==l&&(h=i[d][1]);Ei(n,o).forEach(d=>{h||i.push([l,h=[]]),h.indexOf(d)==-1&&h.push(d)})})});let s=e[r.join(",")]=new Ut(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let l=i[a][1].sort(Ma);s.next.push({type:i[a][0],next:e[l.join(",")]||t(l)})}return s}}function bh(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,a=[];for(let l=0;l<i.next.length;l++){let{type:o,next:h}=i.next[l];a.push(o.name),s&&!(o.isText||o.hasRequiredAttrs())&&(s=!1),r.indexOf(h)==-1&&r.push(h)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Ta(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Ca(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function Aa(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function Na(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new wh(n,r,e[r]);return t}let Bi=class za{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Na(e,r.attrs),this.defaultAttrs=Ta(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ut.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ca(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Qe(this,this.computeAttrs(e),z.from(t),j.setFrom(r))}createChecked(e=null,t,r){return t=z.from(t),this.checkContent(t),new Qe(this,this.computeAttrs(e),t,j.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=z.from(t),t.size){let a=this.contentMatch.fillBefore(t);if(!a)return null;t=a.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(z.empty,!0);return s?new Qe(this,e,t.append(s),j.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Aa(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:j.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,a)=>r[s]=new za(s,t,a));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function xh(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class wh{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?xh(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class C0{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=Na(e,i.attrs),this.excluded=null;let s=Ta(this.attrs);this.instance=s?new j(this,s):null}create(e=null){return!e&&this.instance?this.instance:new j(this,Ca(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,a)=>r[s]=new C0(s,i++,t,a)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Aa(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class kf{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=zi.from(e.nodes),t.marks=zi.from(e.marks||{}),this.nodes=Bi.compile(this.spec.nodes,this),this.marks=C0.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],a=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=Ut.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?Ri(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:Ri(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Bi){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new uh(r,r.defaultAttrs,e,j.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Qe.fromJSON(this,e)}markFromJSON(e){return j.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Ri(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],a=s;if(s)t.push(s);else for(let l in n.marks){let o=n.marks[l];(i=="_"||o.spec.group&&o.spec.group.split(" ").indexOf(i)>-1)&&t.push(a=o)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function kh(n){return n.tag!=null}function Sh(n){return n.style!=null}class Dr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(kh(i))this.tags.push(i);else if(Sh(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new Fi(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Fi(this,t,!0);return r.addAll(e,t.from,t.to),B.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Ch(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let a=this.styles[s],l=a.style;if(!(l.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(a.getAttrs){let o=a.getAttrs(t);if(o===!1)continue;a.attrs=o||void 0}return a}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,a=0;for(;a<t.length;a++){let l=t[a];if((l.priority==null?50:l.priority)<s)break}t.splice(a,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(a=>{r(a=Pi(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(a=>{r(a=Pi(a)),a.node||a.ignore||a.mark||(a.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Dr(e,Dr.schemaRules(e)))}}const Da={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Mh={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Oa={ol:!0,ul:!0},m0=1,g0=2,a0=4;function Ii(n,e,t){return e!=null?(e?m0:0)|(e==="full"?g0:0):n&&n.whitespace=="pre"?m0|g0:t&-5}class jr{constructor(e,t,r,i,s,a,l){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=l,this.content=[],this.activeMarks=j.none,this.stashMarks=[],this.match=a||(l&a0?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(z.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&m0)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=z.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(z.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Ah(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Da.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Fi{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,a=Ii(null,t.preserveWhitespace,0)|(r?a0:0);i?s=new jr(i.type,i.attrs,j.none,j.none,!0,t.topMatch||i.type.contentMatch,a):r?s=new jr(null,null,j.none,j.none,!0,null,a):s=new jr(e.schema.topNodeType,null,j.none,j.none,!0,null,a),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.style;if(!r||!r.length)return t();let i=this.readStyles(e.style);if(!i)return;let[s,a]=i,l=this.top;for(let o=0;o<a.length;o++)this.removePendingMark(a[o],l);for(let o=0;o<s.length;o++)this.addPendingMark(s[o]);t();for(let o=0;o<s.length;o++)this.removePendingMark(s[o],l);for(let o=0;o<a.length;o++)this.addPendingMark(a[o])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&g0||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&m0)r.options&g0?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Oa.hasOwnProperty(r)&&this.parser.normalizeLists&&Th(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Mh.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let a,l=this.top,o=this.needsBlock;if(Da.hasOwnProperty(r))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),a=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),a&&this.sync(l),this.needsBlock=o}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=j.none,r=j.none;if(e.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],a=e.getPropertyValue(s);if(a)for(let l=void 0;;){let o=this.parser.matchStyle(s,a,this,l);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(h=>{o.clearMark(h)&&(r=h.addToSet(r))}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)l=o;else break}}return[t,r]}addElementByRule(e,t,r){let i,s,a;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(a=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(a));let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(o=>this.insertNode(o));else{let o=e;typeof t.contentElement=="string"?o=e.querySelector(t.contentElement):typeof t.contentElement=="function"?o=t.contentElement(e):t.contentElement&&(o=t.contentElement),this.findAround(e,o,!0),this.addAll(o)}i&&this.sync(l)&&this.open--,a&&this.removePendingMark(a,l)}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,a=r==null?null:e.childNodes[r];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],a=s.findWrapping(e);if(a&&(!t||t.length>a.length)&&(t=a,r=s,!a.length)||s.solid)break}if(!t)return!1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let a=Ii(e,i,s.options);s.options&a0&&s.content.length==0&&(a|=a0),this.nodes.push(new jr(e,t,s.activeMarks,s.pendingMarks,r,null,a)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),a=(l,o)=>{for(;l>=0;l--){let h=t[l];if(h==""){if(l==t.length-1||l==0)continue;for(;o>=s;o--)if(a(l-1,o))return!0;return!1}else{let d=o>0||o==0&&i?this.nodes[o].type:r&&o>=s?r.node(o-s).type:null;if(!d||d.name!=h&&d.groups.indexOf(h)==-1)return!1;o--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=Nh(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let a=i.popFromStashMark(e);a&&i.type&&i.type.allowsMarkType(a.type)&&(i.activeMarks=a.addToSet(i.activeMarks))}if(i==t)break}}}function Th(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Oa.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function Ch(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Pi(n){let e={};for(let t in n)e[t]=n[t];return e}function Ah(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],a=l=>{s.push(l);for(let o=0;o<l.edgeCount;o++){let{type:h,next:d}=l.edge(o);if(h==e||s.indexOf(d)<0&&a(d))return!0}};if(a(i.contentMatch))return!0}}function Nh(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}class pr{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=J0(t).createDocumentFragment());let i=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let l=0,o=0;for(;l<s.length&&o<a.marks.length;){let h=a.marks[o];if(!this.marks[h.type.name]){o++;continue}if(!h.eq(s[l][0])||h.type.spec.spanning===!1)break;l++,o++}for(;l<s.length;)i=s.pop()[1];for(;o<a.marks.length;){let h=a.marks[o++],d=this.serializeMark(h,a.isInline,t);d&&(s.push([h,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom)}}i.appendChild(this.serializeNodeInner(a,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=l0(J0(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&l0(J0(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return l0(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new pr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=qi(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return qi(e.marks)}}function qi(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function J0(n){return n.document||window.document}const Li=new WeakMap;function zh(n){let e=Li.get(n);return e===void 0&&Li.set(n,e=Dh(n)),e}function Dh(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function l0(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=zh(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(t=i.slice(0,a),i=i.slice(a+1));let l,o=t?n.createElementNS(t,i):n.createElement(i),h=e[1],d=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){d=2;for(let f in h)if(h[f]!=null){let g=f.indexOf(" ");g>0?o.setAttributeNS(f.slice(0,g),f.slice(g+1),h[f]):o.setAttribute(f,h[f])}}for(let f=d;f<e.length;f++){let g=e[f];if(g===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}else{let{dom:y,contentDOM:v}=l0(n,g,t,r);if(o.appendChild(y),v){if(l)throw new RangeError("Multiple content holes");l=v}}}return{dom:o,contentDOM:l}}const Ea=65535,Ba=Math.pow(2,16);function Oh(n,e){return n+e*Ba}function Vi(n){return n&Ea}function Eh(n){return(n-(n&Ea))/Ba}const Ra=1,Ia=2,o0=4,Fa=8;class wn{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&Fa)>0}get deletedBefore(){return(this.delInfo&(Ra|o0))>0}get deletedAfter(){return(this.delInfo&(Ia|o0))>0}get deletedAcross(){return(this.delInfo&o0)>0}}class De{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&De.empty)return De.empty}recover(e){let t=0,r=Vi(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Eh(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let o=this.ranges[l]-(this.inverted?i:0);if(o>e)break;let h=this.ranges[l+s],d=this.ranges[l+a],f=o+h;if(e<=f){let g=h?e==o?-1:e==f?1:t:t,y=o+i+(g<0?0:d);if(r)return y;let v=e==(t<0?o:f)?null:Oh(l/3,e-o),k=e==o?Ia:e==f?Ra:o0;return(t<0?e!=o:e!=f)&&(k|=Fa),new wn(y,k,v)}i+=d-h}return r?e+i:new wn(e+i,0,null)}touches(e,t){let r=0,i=Vi(t),s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let o=this.ranges[l]-(this.inverted?r:0);if(o>e)break;let h=this.ranges[l+s],d=o+h;if(e<=d&&l==i*3)return!0;r+=this.ranges[l+a]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let a=this.ranges[i],l=a-(this.inverted?s:0),o=a+(this.inverted?0:s),h=this.ranges[i+t],d=this.ranges[i+r];e(l,l+h,o,o+d),s+=d-h}}invert(){return new De(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?De.empty:new De(e<0?[0,-e,0]:[0,0,e])}}De.empty=new De([]);class Tr{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new Tr(this.maps,this.mirror,e,t)}copy(){return new Tr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Tr;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let a=this.maps[s],l=a.mapResult(e,t);if(l.recover!=null){let o=this.getMirror(s);if(o!=null&&o>s&&o<this.to){s=o,e=this.maps[o].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new wn(e,i,null)}}const $0=Object.create(null);class ye{getMap(){return De.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=$0[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in $0)throw new RangeError("Duplicate use of step JSON ID "+e);return $0[e]=t,t.prototype.jsonID=e,t}}class oe{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new oe(e,null)}static fail(e){return new oe(null,e)}static fromReplace(e,t,r,i){try{return oe.ok(e.replace(t,r,i))}catch(s){if(s instanceof f0)return oe.fail(s.message);throw s}}}function Gn(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(Gn(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return z.fromArray(r)}class Mt extends ye{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new B(Gn(t.content,(a,l)=>!a.isAtom||!l.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),t.openStart,t.openEnd);return oe.fromReplace(e,this.from,this.to,s)}invert(){return new je(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Mt(t.pos,r.pos,this.mark)}merge(e){return e instanceof Mt&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Mt(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Mt(t.from,t.to,e.markFromJSON(t.mark))}}ye.jsonID("addMark",Mt);class je extends ye{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new B(Gn(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return oe.fromReplace(e,this.from,this.to,r)}invert(){return new Mt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new je(t.pos,r.pos,this.mark)}merge(e){return e instanceof je&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new je(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new je(t.from,t.to,e.markFromJSON(t.mark))}}ye.jsonID("removeMark",je);class Tt extends ye{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return oe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return oe.fromReplace(e,this.pos,this.pos+1,new B(z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Tt(this.pos,t.marks[i]);return new Tt(this.pos,this.mark)}}return new hr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Tt(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Tt(t.pos,e.markFromJSON(t.mark))}}ye.jsonID("addNodeMark",Tt);class hr extends ye{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return oe.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return oe.fromReplace(e,this.pos,this.pos+1,new B(z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Tt(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hr(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new hr(t.pos,e.markFromJSON(t.mark))}}ye.jsonID("removeNodeMark",hr);class me extends ye{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&kn(e,this.from,this.to)?oe.fail("Structure replace would overwrite content"):oe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new De([this.from,this.to-this.from,this.slice.size])}invert(e){return new me(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new me(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof me)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?B.empty:new B(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new me(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?B.empty:new B(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new me(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new me(t.from,t.to,B.fromJSON(e,t.slice),!!t.structure)}}ye.jsonID("replace",me);class Ee extends ye{constructor(e,t,r,i,s,a,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=a,this.structure=l}apply(e){if(this.structure&&(kn(e,this.from,this.gapFrom)||kn(e,this.gapTo,this.to)))return oe.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return oe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?oe.fromReplace(e,this.from,this.to,r):oe.fail("Content does not fit in gap")}getMap(){return new De([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ee(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new Ee(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ee(t.from,t.to,t.gapFrom,t.gapTo,B.fromJSON(e,t.slice),t.insert,!!t.structure)}}ye.jsonID("replaceAround",Ee);function kn(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function Bh(n,e,t,r){let i=[],s=[],a,l;n.doc.nodesBetween(e,t,(o,h,d)=>{if(!o.isInline)return;let f=o.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let g=Math.max(h,e),y=Math.min(h+o.nodeSize,t),v=r.addToSet(f);for(let k=0;k<f.length;k++)f[k].isInSet(v)||(a&&a.to==g&&a.mark.eq(f[k])?a.to=y:i.push(a=new je(g,y,f[k])));l&&l.to==g?l.to=y:s.push(l=new Mt(g,y,r))}}),i.forEach(o=>n.step(o)),s.forEach(o=>n.step(o))}function Rh(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(a,l)=>{if(!a.isInline)return;s++;let o=null;if(r instanceof C0){let h=a.marks,d;for(;d=r.isInSet(h);)(o||(o=[])).push(d),h=d.removeFromSet(h)}else r?r.isInSet(a.marks)&&(o=[r]):o=a.marks;if(o&&o.length){let h=Math.min(l+a.nodeSize,t);for(let d=0;d<o.length;d++){let f=o[d],g;for(let y=0;y<i.length;y++){let v=i[y];v.step==s-1&&f.eq(i[y].style)&&(g=v)}g?(g.to=h,g.step=s):i.push({style:f,from:Math.max(l,e),to:h,step:s})}}}),i.forEach(a=>n.step(new je(a.from,a.to,a.style)))}function Pa(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),a=[],l=e+1;for(let o=0;o<s.childCount;o++){let h=s.child(o),d=l+h.nodeSize,f=r.matchType(h.type);if(!f)a.push(new me(l,d,B.empty));else{r=f;for(let g=0;g<h.marks.length;g++)t.allowsMarkType(h.marks[g].type)||n.step(new je(l,d,h.marks[g]));if(i&&h.isText&&t.whitespace!="pre"){let g,y=/\r?\n|\r/g,v;for(;g=y.exec(h.text);)v||(v=new B(z.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),a.push(new me(l+g.index,l+g.index+g[0].length,v))}}l=d}if(!r.validEnd){let o=r.fillBefore(z.empty,!0);n.replace(l,l,new B(o,0,0))}for(let o=a.length-1;o>=0;o--)n.step(a[o])}function Ih(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Jn(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),a=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,a,t))return r;if(r==0||i.type.spec.isolating||!Ih(i,s,a))break}return null}function Fh(n,e,t){let{$from:r,$to:i,depth:s}=e,a=r.before(s+1),l=i.after(s+1),o=a,h=l,d=z.empty,f=0;for(let v=s,k=!1;v>t;v--)k||r.index(v)>0?(k=!0,d=z.from(r.node(v).copy(d)),f++):o--;let g=z.empty,y=0;for(let v=s,k=!1;v>t;v--)k||i.after(v+1)<i.end(v)?(k=!0,g=z.from(i.node(v).copy(g)),y++):h++;n.step(new Ee(o,h,a,l,new B(d.append(g),f,y),d.size-f,!0))}function Ph(n,e,t=null,r=n){let i=qh(n,e),s=i&&Lh(r,e);return s?i.map(Hi).concat({type:e,attrs:t}).concat(s.map(Hi)):null}function Hi(n){return{type:n,attrs:null}}function qh(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return t.canReplaceWith(r,i,a)?s:null}function Lh(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let o=(a.length?a[a.length-1]:e).contentMatch;for(let h=r;o&&h<i;h++)o=o.matchType(t.child(h).type);return!o||!o.validEnd?null:a}function Vh(n,e,t){let r=z.empty;for(let a=t.length-1;a>=0;a--){if(r.size){let l=t[a].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=z.from(t[a].type.create(t[a].attrs,r))}let i=e.start,s=e.end;n.step(new Ee(i,s,i,s,new B(r,0,0),t.length,!0))}function Hh(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(a,l)=>{if(a.isTextblock&&!a.hasMarkup(r,i)&&Jh(n.doc,n.mapping.slice(s).map(l),r)){let o=null;if(r.schema.linebreakReplacement){let g=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);g&&!y?o=!1:!g&&y&&(o=!0)}o===!1&&Gh(n,a,l,s),Pa(n,n.mapping.slice(s).map(l,1),r,void 0,o===null);let h=n.mapping.slice(s),d=h.map(l,1),f=h.map(l+a.nodeSize,1);return n.step(new Ee(d,f,d+1,f-1,new B(z.from(r.create(i,null,a.marks)),0,0),1,!0)),o===!0&&Wh(n,a,l,s),!1}})}function Wh(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let a,l=/\r?\n|\r/g;for(;a=l.exec(i.text);){let o=n.mapping.slice(r).map(t+1+s+a.index);n.replaceWith(o,o+1,e.type.schema.linebreakReplacement.create())}}})}function Gh(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(t+1+s);n.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function Jh(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function $h(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let a=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,a);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Ee(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new B(z.from(a),0,0),1,!0))}function h0(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,a=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,d=t-2;h>s;h--,d--){let f=i.node(h),g=i.index(h);if(f.type.spec.isolating)return!1;let y=f.content.cutByIndex(g,f.childCount),v=r&&r[d+1];v&&(y=y.replaceChild(0,v.type.create(v.attrs)));let k=r&&r[d]||f;if(!f.canReplace(g+1,f.childCount)||!k.type.validContent(y))return!1}let l=i.indexAfter(s),o=r&&r[0];return i.node(s).canReplaceWith(l,l,o?o.type:i.node(s+1).type)}function Uh(n,e,t=1,r){let i=n.doc.resolve(e),s=z.empty,a=z.empty;for(let l=i.depth,o=i.depth-t,h=t-1;l>o;l--,h--){s=z.from(i.node(l).copy(s));let d=r&&r[h];a=z.from(d?d.type.create(d.attrs,a):i.node(l).copy(a))}n.step(new me(e,e,new B(s.append(a),t,t),!0))}function qa(n,e){let t=n.resolve(e),r=t.index();return Kh(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Kh(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Yh(n,e,t){let r=new me(e-t,e+t,B.empty,!0);n.step(r)}function jh(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Xh(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let a=r.depth;a>=0;a--){let l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,o=r.index(a)+(l>0?1:0),h=r.node(a),d=!1;if(s==1)d=h.canReplace(o,o,i);else{let f=h.contentMatchAt(o).findWrapping(i.firstChild.type);d=f&&h.canReplaceWith(o,o,f[0])}if(d)return l==0?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}function $n(n,e,t=e,r=B.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return La(i,s,r)?new me(e,t,r):new Zh(i,s,r).fit()}function La(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Zh{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=z.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=z.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,l=i.depth;for(;a&&l&&s.childCount==1;)s=s.firstChild.content,a--,l--;let o=new B(s,a,l);return e>-1?new Ee(r.pos,e,this.$to.pos,this.$to.end(),o,t):o.size||r.pos!=this.$to.pos?new me(r.pos,i.pos,o):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=U0(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let a=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:o,match:h}=this.frontier[l],d,f=null;if(t==1&&(a?h.matchType(a.type)||(f=h.fillBefore(z.from(a),!1)):s&&o.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:f};if(t==2&&a&&(d=h.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:d};if(s&&h.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=U0(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new B(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=U0(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new B(br(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new B(br(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let k=0;k<s.length;k++)this.openFrontierNode(s[k]);let a=this.unplaced,l=r?r.content:a.content,o=a.openStart-e,h=0,d=[],{match:f,type:g}=this.frontier[t];if(i){for(let k=0;k<i.childCount;k++)d.push(i.child(k));f=f.matchFragment(i)}let y=l.size+e-(a.content.size-a.openEnd);for(;h<l.childCount;){let k=l.child(h),M=f.matchType(k.type);if(!M)break;h++,(h>1||o==0||k.content.size)&&(f=M,d.push(Va(k.mark(g.allowedMarks(k.marks)),h==1?o:0,h==l.childCount?y:-1)))}let v=h==l.childCount;v||(y=-1),this.placed=xr(this.placed,t,z.from(d)),this.frontier[t].match=f,v&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let k=0,M=l;k<y;k++){let T=M.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),M=T.content}this.unplaced=v?e==0?B.empty:new B(br(a.content,e-1,1),e-1,y<0?a.openEnd:e-1):new B(br(a.content,e,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!K0(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=K0(e,t,i,r,s);if(a){for(let l=t-1;l>=0;l--){let{match:o,type:h}=this.frontier[l],d=K0(e,l,h,o,!0);if(!d||d.childCount)continue e}return{depth:t,fit:a,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=xr(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=xr(this.placed,this.depth,z.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(z.empty,!0);t.childCount&&(this.placed=xr(this.placed,this.frontier.length,t))}}function br(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(br(n.firstChild.content,e-1,t)))}function xr(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(xr(n.lastChild.content,e-1,t)))}function U0(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Va(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,Va(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(z.empty,!0)))),n.copy(r)}function K0(n,e,t,r,i){let s=n.node(e),a=i?n.indexAfter(e):n.index(e);if(a==s.childCount&&!t.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,a);return l&&!Qh(t,s.content,a)?l:null}function Qh(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function _h(n){return n.spec.defining||n.spec.definingForContent}function eu(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(La(i,s,r))return n.step(new me(e,t,r));let a=Wa(i,n.doc.resolve(t));a[a.length-1]==0&&a.pop();let l=-(i.depth+1);a.unshift(l);for(let g=i.depth,y=i.pos-1;g>0;g--,y--){let v=i.node(g).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;a.indexOf(g)>-1?l=g:i.before(g)==y&&a.splice(1,0,-g)}let o=a.indexOf(l),h=[],d=r.openStart;for(let g=r.content,y=0;;y++){let v=g.firstChild;if(h.push(v),y==r.openStart)break;g=v.content}for(let g=d-1;g>=0;g--){let y=h[g],v=_h(y.type);if(v&&!y.sameMarkup(i.node(Math.abs(l)-1)))d=g;else if(v||!y.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let y=(g+d+1)%(r.openStart+1),v=h[y];if(v)for(let k=0;k<a.length;k++){let M=a[(k+o)%a.length],T=!0;M<0&&(T=!1,M=-M);let R=i.node(M-1),L=i.index(M-1);if(R.canReplaceWith(L,L,v.type,v.marks))return n.replace(i.before(M),T?s.after(M):t,new B(Ha(r.content,0,r.openStart,y),y,r.openEnd))}}let f=n.steps.length;for(let g=a.length-1;g>=0&&(n.replace(e,t,r),!(n.steps.length>f));g--){let y=a[g];y<0||(e=i.before(y),t=s.after(y))}}function Ha(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(Ha(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),a=s.fillBefore(n).append(n);n=a.append(s.matchFragment(a).fillBefore(z.empty,!0))}return n}function tu(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=jh(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new B(z.from(r),0,0))}function ru(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=Wa(r,i);for(let a=0;a<s.length;a++){let l=s[a],o=a==s.length-1;if(o&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(o||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(e-r.start(a)==r.depth-a&&t>r.end(a)&&i.end(a)-t!=i.depth-a)return n.delete(r.before(a),t);n.delete(e,t)}function Wa(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class ar extends ye{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return oe.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return oe.fromReplace(e,this.pos,this.pos+1,new B(z.from(i),0,t.isLeaf?0:1))}getMap(){return De.empty}invert(e){return new ar(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ar(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ar(t.pos,t.attr,t.value)}}ye.jsonID("attr",ar);class Or extends ye{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return oe.ok(r)}getMap(){return De.empty}invert(e){return new Or(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Or(t.attr,t.value)}}ye.jsonID("docAttr",Or);let ur=class extends Error{};ur=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};ur.prototype=Object.create(Error.prototype);ur.prototype.constructor=ur;ur.prototype.name="TransformError";class nu{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Tr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new ur(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=B.empty){let i=$n(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new B(z.from(r),0,0))}delete(e,t){return this.replace(e,t,B.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return eu(this,e,t,r),this}replaceRangeWith(e,t,r){return tu(this,e,t,r),this}deleteRange(e,t){return ru(this,e,t),this}lift(e,t){return Fh(this,e,t),this}join(e,t=1){return Yh(this,e,t),this}wrap(e,t){return Vh(this,e,t),this}setBlockType(e,t=e,r,i=null){return Hh(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return $h(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new ar(e,t,r)),this}setDocAttribute(e,t){return this.step(new Or(e,t)),this}addNodeMark(e,t){return this.step(new Tt(e,t)),this}removeNodeMark(e,t){if(!(t instanceof j)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new hr(e,t)),this}split(e,t=1,r){return Uh(this,e,t,r),this}addMark(e,t,r){return Bh(this,e,t,r),this}removeMark(e,t,r){return Rh(this,e,t,r),this}clearIncompatible(e,t,r){return Pa(this,e,t,r),this}}const Y0=Object.create(null);class K{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new iu(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=B.empty){let r=t.content.lastChild,i=null;for(let l=0;l<t.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let l=0;l<a.length;l++){let{$from:o,$to:h}=a[l],d=e.mapping.slice(s);e.replaceRange(d.map(o.pos),d.map(h.pos),l?B.empty:t),l==0&&Ji(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:l}=i[s],o=e.mapping.slice(r),h=o.map(a.pos),d=o.map(l.pos);s?e.deleteRange(h,d):(e.replaceRangeWith(h,d,t),Ji(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new X(e):ir(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let a=t<0?ir(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):ir(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(a)return a}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Be(e.node(0))}static atStart(e){return ir(e,e,0,0,1)||new Be(e)}static atEnd(e){return ir(e,e,e.content.size,e.childCount,-1)||new Be(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Y0[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Y0)throw new RangeError("Duplicate use of selection JSON ID "+e);return Y0[e]=t,t.prototype.jsonID=e,t}getBookmark(){return X.between(this.$anchor,this.$head).getBookmark()}}K.prototype.visible=!0;class iu{constructor(e,t){this.$from=e,this.$to=t}}let Wi=!1;function Gi(n){!Wi&&!n.parent.inlineContent&&(Wi=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class X extends K{constructor(e,t=e){Gi(e),Gi(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return K.near(r);let i=e.resolve(t.map(this.anchor));return new X(i.parent.inlineContent?i:r,r)}replace(e,t=B.empty){if(super.replace(e,t),t==B.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof X&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new A0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new X(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=K.findFrom(t,r,!0)||K.findFrom(t,-r,!0);if(s)t=s.$head;else return K.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(K.findFrom(e,-r,!0)||K.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new X(e,t)}}K.jsonID("text",X);class A0{constructor(e,t){this.anchor=e,this.head=t}map(e){return new A0(e.map(this.anchor),e.map(this.head))}resolve(e){return X.between(e.resolve(this.anchor),e.resolve(this.head))}}class W extends K{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?K.near(s):new W(s)}content(){return new B(z.from(this.node),0,0)}eq(e){return e instanceof W&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Un(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new W(e.resolve(t.anchor))}static create(e,t){return new W(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}W.prototype.visible=!1;K.jsonID("node",W);class Un{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new A0(r,r):new Un(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&W.isSelectable(r)?new W(t):K.near(t)}}class Be extends K{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=B.empty){if(t==B.empty){e.delete(0,e.doc.content.size);let r=K.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Be(e)}map(e){return new Be(e)}eq(e){return e instanceof Be}getBookmark(){return su}}K.jsonID("all",Be);const su={map(){return this},resolve(n){return new Be(n)}};function ir(n,e,t,r,i,s=!1){if(e.inlineContent)return X.create(n,t);for(let a=r-(i>0?0:1);i>0?a<e.childCount:a>=0;a+=i){let l=e.child(a);if(l.isAtom){if(!s&&W.isSelectable(l))return W.create(n,t-(i<0?l.nodeSize:0))}else{let o=ir(n,l,t+i,i<0?l.childCount:0,i,s);if(o)return o}t+=l.nodeSize*i}return null}function Ji(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof me||i instanceof Ee))return;let s=n.mapping.maps[r],a;s.forEach((l,o,h,d)=>{a==null&&(a=d)}),n.setSelection(K.near(n.doc.resolve(a),t))}const $i=1,Ui=2,Ki=4;class au extends nu{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|$i)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&$i)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ui,this}ensureMarks(e){return j.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ui)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||j.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(t);s=r==t?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(K.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ki,this}get scrolledIntoView(){return(this.updated&Ki)>0}}function Yi(n,e){return!e||!n?n:n.bind(e)}class wr{constructor(e,t,r){this.name=e,this.init=Yi(t.init,r),this.apply=Yi(t.apply,r)}}const lu=[new wr("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new wr("selection",{init(n,e){return n.selection||K.atStart(e.doc)},apply(n){return n.selection}}),new wr("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new wr("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class j0{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=lu.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new wr(r.key,r.spec.state,r))})}}class kr{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let l=this.config.plugins[a];if(l.spec.appendTransaction){let o=i?i[a].n:0,h=i?i[a].state:this,d=o<t.length&&l.spec.appendTransaction.call(l,o?t.slice(o):t,h,r);if(d&&r.filterTransaction(d,a)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<a?{state:r,n:t.length}:{state:this,n:0})}t.push(d),r=r.applyInner(d),s=!0}i&&(i[a]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new kr(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new au(this)}static create(e){let t=new j0(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new kr(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new j0(this.schema,e.plugins),r=t.fields,i=new kr(t);for(let s=0;s<r.length;s++){let a=r[s].name;i[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new j0(e.schema,e.plugins),s=new kr(i);return i.fields.forEach(a=>{if(a.name=="doc")s.doc=Qe.fromJSON(e.schema,t.doc);else if(a.name=="selection")s.selection=K.fromJSON(s.doc,t.selection);else if(a.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let o=r[l],h=o.spec.state;if(o.key==a.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){s[a.name]=h.fromJSON.call(o,e,t[l],s);return}}s[a.name]=a.init(e,s)}}),s}}function Ga(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Ga(i,e,{})),t[r]=i}return t}class Kn{constructor(e){this.spec=e,this.props={},e.props&&Ga(e.props,this,this.props),this.key=e.key?e.key.key:Ja("plugin")}getState(e){return e[this.key]}}const X0=Object.create(null);function Ja(n){return n in X0?n+"$"+ ++X0[n]:(X0[n]=0,n+"$")}class ou{constructor(e="key"){this.key=Ja(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const $a=new ou("contentReference"),Sf=n=>{const e=Po(n).map(({newContentReference:t})=>t);return new Kn({key:$a,state:{init:(t,{doc:r})=>({displayedContentReferences:e}),apply:(t,r)=>r},props:{}})},Ua=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function hu(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Yn=(n,e,t)=>{let r=hu(n,t);if(!r)return!1;let i=Ka(r);if(!i){let a=r.blockRange(),l=a&&Jn(a);return l==null?!1:(e&&e(n.tr.lift(a,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&Qa(n,i,e))return!0;if(r.parent.content.size==0&&(cr(s,"end")||W.isSelectable(s))){let a=$n(n.doc,r.before(),r.after(),B.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(cr(s,"end")?K.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):W.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function cr(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const uu=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=Ka(r)}let a=s&&s.nodeBefore;return!a||!W.isSelectable(a)?!1:(e&&e(n.tr.setSelection(W.create(n.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function Ka(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function cu(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const du=(n,e,t)=>{let r=cu(n,t);if(!r)return!1;let i=Ya(r);if(!i)return!1;let s=i.nodeAfter;if(Qa(n,i,e))return!0;if(r.parent.content.size==0&&(cr(s,"start")||W.isSelectable(s))){let a=$n(n.doc,r.before(),r.after(),B.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(cr(s,"start")?K.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):W.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},fu=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=Ya(r)}let a=s&&s.nodeAfter;return!a||!W.isSelectable(a)?!1:(e&&e(n.tr.setSelection(W.create(n.doc,s.pos)).scrollIntoView()),!0)};function Ya(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const pu=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function jn(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const mu=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),a=jn(i.contentMatchAt(s));if(!a||!i.canReplaceWith(s,s,a))return!1;if(e){let l=t.after(),o=n.tr.replaceWith(l,l,a.createAndFill());o.setSelection(K.near(o.doc.resolve(l),1)),e(o.scrollIntoView())}return!0},ja=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Be||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=jn(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=n.tr.insert(a,s.createAndFill());l.setSelection(X.create(l.doc,a+1)),e(l.scrollIntoView())}return!0},Xa=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(h0(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Jn(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function gu(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof W&&e.selection.node.isBlock)return!r.parentOffset||!h0(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){let s=i.parentOffset==i.parent.content.size,a=e.tr;(e.selection instanceof X||e.selection instanceof Be)&&a.deleteSelection();let l=r.depth==0?null:jn(r.node(-1).contentMatchAt(r.indexAfter(-1))),o=s&&l?[{type:l}]:void 0,h=h0(a.doc,a.mapping.map(r.pos),1,o);if(!o&&!h&&h0(a.doc,a.mapping.map(r.pos),1,l?[{type:l}]:void 0)&&(l&&(o=[{type:l}]),h=!0),h&&(a.split(a.mapping.map(r.pos),1,o),!s&&!r.parentOffset&&r.parent.type!=l)){let d=a.mapping.map(r.before()),f=a.doc.resolve(d);l&&r.node(-1).canReplaceWith(f.index(),f.index()+1,l)&&a.setNodeMarkup(a.mapping.map(r.before()),l)}t(a.scrollIntoView())}return!0}}const Za=gu(),yu=(n,e)=>(e&&e(n.tr.setSelection(new Be(n.doc))),!0);function vu(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||qa(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function Qa(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s,a;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(vu(n,e,t))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(s=(a=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(t){let f=e.pos+i.nodeSize,g=z.empty;for(let k=s.length-1;k>=0;k--)g=z.from(s[k].create(null,g));g=z.from(r.copy(g));let y=n.tr.step(new Ee(e.pos-1,f,e.pos,f,new B(g,1,0),s.length,!0)),v=f+2*s.length;qa(y.doc,v)&&y.join(v),t(y.scrollIntoView())}return!0}let o=K.findFrom(e,1),h=o&&o.$from.blockRange(o.$to),d=h&&Jn(h);if(d!=null&&d>=e.depth)return t&&t(n.tr.lift(h,d).scrollIntoView()),!0;if(l&&cr(i,"start",!0)&&cr(r,"end")){let f=r,g=[];for(;g.push(f),!f.isTextblock;)f=f.lastChild;let y=i,v=1;for(;!y.isTextblock;y=y.firstChild)v++;if(f.canReplace(f.childCount,f.childCount,y.content)){if(t){let k=z.empty;for(let T=g.length-1;T>=0;T--)k=z.from(g[T].copy(k));let M=n.tr.step(new Ee(e.pos-g.length,e.pos+i.nodeSize,e.pos+v,e.pos+i.nodeSize-v,new B(k,g.length,0),0,!0));t(M.scrollIntoView())}return!0}}return!1}function _a(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(X.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const bu=_a(-1),xu=_a(1);function Mf(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,a=i.blockRange(s),l=a&&Ph(a,n,e);return l?(r&&r(t.tr.wrap(a,l).scrollIntoView()),!0):!1}}function Tf(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[s];t.doc.nodesBetween(a,l,(o,h)=>{if(i)return!1;if(!(!o.isTextblock||o.hasMarkup(n,e)))if(o.type==n)i=!0;else{let d=t.doc.resolve(h),f=d.index();i=d.parent.canReplaceWith(f,f+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let a=0;a<t.selection.ranges.length;a++){let{$from:{pos:l},$to:{pos:o}}=t.selection.ranges[a];s.setBlockType(l,o,n,e)}r(s.scrollIntoView())}return!0}}function wu(n,e,t){for(let r=0;r<e.length;r++){let{$from:i,$to:s}=e[r],a=i.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(i.pos,s.pos,l=>{if(a)return!1;a=l.inlineContent&&l.type.allowsMarkType(t)}),a)return!0}return!1}function Cf(n,e=null){return function(t,r){let{empty:i,$cursor:s,ranges:a}=t.selection;if(i&&!s||!wu(t.doc,a,n))return!1;if(r)if(s)n.isInSet(t.storedMarks||s.marks())?r(t.tr.removeStoredMark(n)):r(t.tr.addStoredMark(n.create(e)));else{let l=!1,o=t.tr;for(let h=0;!l&&h<a.length;h++){let{$from:d,$to:f}=a[h];l=t.doc.rangeHasMark(d.pos,f.pos,n)}for(let h=0;h<a.length;h++){let{$from:d,$to:f}=a[h];if(l)o.removeMark(d.pos,f.pos,n);else{let g=d.pos,y=f.pos,v=d.nodeAfter,k=f.nodeBefore,M=v&&v.isText?/^\s*/.exec(v.text)[0].length:0,T=k&&k.isText?/\s*$/.exec(k.text)[0].length:0;g+M<y&&(g+=M,y-=T),o.addMark(g,y,n.create(e))}}r(o.scrollIntoView())}return!0}}function N0(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}let Z0=N0(Ua,Yn,uu),ji=N0(Ua,du,fu);const lt={Enter:N0(pu,ja,Xa,Za),"Mod-Enter":mu,Backspace:Z0,"Mod-Backspace":Z0,"Shift-Backspace":Z0,Delete:ji,"Mod-Delete":ji,"Mod-a":yu},el={"Ctrl-h":lt.Backspace,"Alt-Backspace":lt["Mod-Backspace"],"Ctrl-d":lt.Delete,"Ctrl-Alt-Backspace":lt["Mod-Delete"],"Alt-Delete":lt["Mod-Delete"],"Alt-d":lt["Mod-Delete"],"Ctrl-a":bu,"Ctrl-e":xu};for(let n in lt)el[n]=lt[n];const ku=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Af=ku?el:lt;function Su(n){let e="",t=!1;const r=[];function i(s){if(t=!1,s.type.name==="paragraph")return s.descendants(a=>i(a)),e+=`
`,t=!0,!1;if(s.type.name==="command_token"){const a=s.textContent;return r.push({symbol:Lo.SystemHint,startIndex:e.length,endIndex:e.length+a.length}),e+=a,!1}else s.isText&&s.text!==void 0&&(e+=s.text)}return n.descendants(s=>i(s)),t&&e.endsWith(`
`)&&(e=e.slice(0,-1)),{content:e,metadata:{custom_symbol_offsets:r}}}function Nf(n){return Su(n.state.doc)}const tl=N0(ja,Xa,Za);async function zf(n,e,t=!1){if(t){Tu(n,e);return}const{schema:r}=n.state,i=e.split(`
`);if(n.dispatch(n.state.tr.deleteSelection()),n.dispatch(n.state.tr.insertText(i[0])),i.length>1){tl(n.state,n.dispatch);const s=i.slice(1),a=z.fromArray(s.map(o=>r.nodes.paragraph.create(null,o===""?null:r.text(o)))),l=new B(a,0,0);n.dispatch(n.state.tr.replaceSelection(l)),Yn(n.state,n.dispatch,n)}}const Mu=/oaicite:(\d+)/g;async function Tu(n,e){const{schema:t}=n.state,r=e.split(`
`);n.dispatch(n.state.tr.deleteSelection());const{tr:i}=n.state,{$from:s}=i.selection;s.parent.isTextblock||(i.insert(s.pos,t.nodes.paragraph.create()),n.dispatch(i),n.focus());const{selection:a}=n.state,{$from:l}=a,o=r[0],h=Xi(o,t,n),d=z.fromArray(h);let f=d;l.parent.type.validContent(d)||(f=t.nodes.paragraph.create(null,d));const g=new B(z.from(f),0,0);if(n.dispatch(n.state.tr.replaceSelection(g)),r.length>1){tl(n.state,n.dispatch);const v=r.slice(1).map(T=>{const R=Xi(T,t,n);return t.nodes.paragraph.create(null,R)}),k=z.fromArray(v),M=new B(k,0,0);n.dispatch(n.state.tr.replaceSelection(M)),Yn(n.state,n.dispatch,n)}}function Xi(n,e,t){const r=[];let i=0,s;if(!!!$a.get(t.state))return[e.text(n)];for(;(s=Mu.exec(n))!==null;){if(s.index>i){const h=n.slice(i,s.index);r.push(e.text(h))}const l=s[1],o=Cu(l,e);r.push(o),i=s.index+s[0].length}if(i<n.length){const l=n.slice(i);r.push(e.text(l))}return r}function Cu(n,e){const t=Go({value:"oaicite:"+n},e);if(t==null)throw new Error("Failed to create text node for content reference");const r={index:n,displayLayout:"inline"},i=z.fromArray([t]);return e.nodes.contentReference.create(r,i)}const Df=n=>qo(n).checkGate("223382091"),fe=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Er=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Sn=null;const at=function(n,e,t){let r=Sn||(Sn=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Au=function(){Sn=null},Kt=function(n,e,t,r){return t&&(Zi(n,e,t,r,-1)||Zi(n,e,t,r,1))},Nu=/^(img|br|input|textarea|hr)$/i;function Zi(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Ye(n))){let s=n.parentNode;if(!s||s.nodeType!=1||qr(n)||Nu.test(n.nodeName)||n.contentEditable=="false")return!1;e=fe(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Ye(n):0}else return!1}}function Ye(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function zu(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Ye(n)}else if(n.parentNode&&!qr(n))e=fe(n),n=n.parentNode;else return null}}function Du(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!qr(n))e=fe(n)+1,n=n.parentNode;else return null}}function Ou(n,e,t){for(let r=e==0,i=e==Ye(n);r||i;){if(n==t)return!0;let s=fe(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==Ye(n)}}function qr(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const z0=function(n){return n.focusNode&&Kt(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Lt(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Eu(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Bu(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:r.startOffset}}}const _e=typeof navigator<"u"?navigator:null,Qi=typeof document<"u"?document:null,Rt=_e&&_e.userAgent||"",Mn=/Edge\/(\d+)/.exec(Rt),rl=/MSIE \d/.exec(Rt),Tn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rt),Ce=!!(rl||Tn||Mn),Nt=rl?document.documentMode:Tn?+Tn[1]:Mn?+Mn[1]:0,Ue=!Ce&&/gecko\/(\d+)/i.test(Rt);Ue&&+(/Firefox\/(\d+)/.exec(Rt)||[0,0])[1];const Cn=!Ce&&/Chrome\/(\d+)/.exec(Rt),ge=!!Cn,nl=Cn?+Cn[1]:0,xe=!Ce&&!!_e&&/Apple Computer/.test(_e.vendor),dr=xe&&(/Mobile\/\w+/.test(Rt)||!!_e&&_e.maxTouchPoints>2),Fe=dr||(_e?/Mac/.test(_e.platform):!1),Ru=_e?/Win/.test(_e.platform):!1,$e=/Android \d/.test(Rt),Lr=!!Qi&&"webkitFontSmoothing"in Qi.documentElement.style,Iu=Lr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Fu(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function it(n,e){return typeof n=="number"?n:n[e]}function Pu(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function _i(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let a=t||n.dom;a;a=Er(a)){if(a.nodeType!=1)continue;let l=a,o=l==s.body,h=o?Fu(s):Pu(l),d=0,f=0;if(e.top<h.top+it(r,"top")?f=-(h.top-e.top+it(i,"top")):e.bottom>h.bottom-it(r,"bottom")&&(f=e.bottom-e.top>h.bottom-h.top?e.top+it(i,"top")-h.top:e.bottom-h.bottom+it(i,"bottom")),e.left<h.left+it(r,"left")?d=-(h.left-e.left+it(i,"left")):e.right>h.right-it(r,"right")&&(d=e.right-h.right+it(i,"right")),d||f)if(o)s.defaultView.scrollBy(d,f);else{let g=l.scrollLeft,y=l.scrollTop;f&&(l.scrollTop+=f),d&&(l.scrollLeft+=d);let v=l.scrollLeft-g,k=l.scrollTop-y;e={left:e.left-v,top:e.top-k,right:e.right-v,bottom:e.bottom-k}}if(o||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function qu(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,a=t+1;a<Math.min(innerHeight,e.bottom);a+=5){let l=n.root.elementFromPoint(s,a);if(!l||l==n.dom||!n.dom.contains(l))continue;let o=l.getBoundingClientRect();if(o.top>=t-20){r=l,i=o.top;break}}return{refDOM:r,refTop:i,stack:il(n.dom)}}function il(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Er(r));return e}function Lu({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;sl(t,r==0?0:r-e)}function sl(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let tr=null;function Vu(n){if(n.setActive)return n.setActive();if(tr)return n.focus(tr);let e=il(n);n.focus(tr==null?{get preventScroll(){return tr={preventScroll:!0},!0}}:void 0),tr||(tr=!1,sl(e,0))}function al(n,e){let t,r=2e8,i,s=0,a=e.top,l=e.top,o,h;for(let d=n.firstChild,f=0;d;d=d.nextSibling,f++){let g;if(d.nodeType==1)g=d.getClientRects();else if(d.nodeType==3)g=at(d).getClientRects();else continue;for(let y=0;y<g.length;y++){let v=g[y];if(v.top<=a&&v.bottom>=l){a=Math.max(v.bottom,a),l=Math.min(v.top,l);let k=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(k<r){t=d,r=k,i=k&&t.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,d.nodeType==1&&k&&(s=f+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!o&&v.left<=e.left&&v.right>=e.left&&(o=d,h={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!t&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(s=f+1)}}return!t&&o&&(t=o,i=h,r=0),t&&t.nodeType==3?Hu(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:al(t,i)}function Hu(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=wt(r,1);if(s.top!=s.bottom&&Xn(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function Xn(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Wu(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Gu(n,e,t){let{node:r,offset:i}=al(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&t.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function Ju(n,e,t,r){let i=-1;for(let s=e,a=!1;s!=n.dom;){let l=n.docView.nearestDesc(s,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)){let o=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&(!a&&o.left>r.left||o.top>r.top?i=l.posBefore:(!a&&o.right<r.left||o.bottom<r.top)&&(i=l.posAfter),a=!0),!l.contentDOM&&i<0&&!l.node.isText)return(l.node.isBlock?r.top<(o.top+o.bottom)/2:r.left<(o.left+o.right)/2)?l.posBefore:l.posAfter}s=l.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function ll(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let a=n.childNodes[s];if(a.nodeType==1){let l=a.getClientRects();for(let o=0;o<l.length;o++){let h=l[o];if(Xn(e,h))return ll(a,e,h)}}if((s=(s+1)%r)==i)break}return n}function $u(n,e){let t=n.dom.ownerDocument,r,i=0,s=Bu(t,e.left,e.top);s&&({node:r,offset:i}=s);let a=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),l;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let h=n.dom.getBoundingClientRect();if(!Xn(e,h)||(a=ll(n.dom,e,h),!a))return null}if(xe)for(let h=a;r&&h;h=Er(h))h.draggable&&(r=void 0);if(a=Wu(a,e),r){if(Ue&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let d=r.childNodes[i],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let h;Lr&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=Ju(n,r,i,e))}l==null&&(l=Gu(n,a,e));let o=n.docView.nearestDesc(a,!0);return{pos:l,inside:o?o.posAtStart-o.border:-1}}function es(n){return n.top<n.bottom||n.left<n.right}function wt(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(es(r))return r}return Array.prototype.find.call(t,es)||n.getBoundingClientRect()}const Uu=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ol(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),a=Lr||Ue;if(r.nodeType==3)if(a&&(Uu.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let o=wt(at(r,i,i),t);if(Ue&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=wt(at(r,i-1,i-1),-1);if(h.top==o.top){let d=wt(at(r,i,i+1),-1);if(d.top!=o.top)return vr(d,d.left<h.left)}}return o}else{let o=i,h=i,d=t<0?1:-1;return t<0&&!i?(h++,d=-1):t>=0&&i==r.nodeValue.length?(o--,d=1):t<0?o--:h++,vr(wt(at(r,o,h),d),d<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==Ye(r))){let o=r.childNodes[i-1];if(o.nodeType==1)return Q0(o.getBoundingClientRect(),!1)}if(s==null&&i<Ye(r)){let o=r.childNodes[i];if(o.nodeType==1)return Q0(o.getBoundingClientRect(),!0)}return Q0(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==Ye(r))){let o=r.childNodes[i-1],h=o.nodeType==3?at(o,Ye(o)-(a?0:1)):o.nodeType==1&&(o.nodeName!="BR"||!o.nextSibling)?o:null;if(h)return vr(wt(h,1),!1)}if(s==null&&i<Ye(r)){let o=r.childNodes[i];for(;o.pmViewDesc&&o.pmViewDesc.ignoreForCoords;)o=o.nextSibling;let h=o?o.nodeType==3?at(o,0,a?0:1):o.nodeType==1?o:null:null;if(h)return vr(wt(h,-1),!0)}return vr(wt(r.nodeType==3?at(r):r,-t),t>=0)}function vr(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Q0(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function hl(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function Ku(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return hl(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let a=ol(n,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let o;if(l.nodeType==1)o=l.getClientRects();else if(l.nodeType==3)o=at(l,0,l.nodeValue.length).getClientRects();else continue;for(let h=0;h<o.length;h++){let d=o[h];if(d.bottom>d.top+1&&(t=="up"?a.top-d.top>(d.bottom-a.top)*2:d.bottom-a.bottom>(a.bottom-d.top)*2))return!1}}return!0})}const Yu=/[\u0590-\u08ac]/;function ju(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,a=i==r.parent.content.size,l=n.domSelection();return!Yu.test(r.parent.textContent)||!l.modify?t=="left"||t=="backward"?s:a:hl(n,e,()=>{let{focusNode:o,focusOffset:h,anchorNode:d,anchorOffset:f}=n.domSelectionRange(),g=l.caretBidiLevel;l.modify("move",t,"character");let y=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:v,focusOffset:k}=n.domSelectionRange(),M=v&&!y.contains(v.nodeType==1?v:v.parentNode)||o==v&&h==k;try{l.collapse(d,f),o&&(o!=d||h!=f)&&l.extend&&l.extend(o,h)}catch{}return g!=null&&(l.caretBidiLevel=g),M})}let ts=null,rs=null,ns=!1;function Xu(n,e,t){return ts==e&&rs==t?ns:(ts=e,rs=t,ns=t=="up"||t=="down"?Ku(n,e,t):ju(n,e,t))}const Le=0,is=1,Vt=2,et=3;class Vr{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Le,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>fe(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),a;if(s&&(!t||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],l=s+a.size;if(l>e||a instanceof cl){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof ul&&s.side>=0;r--);if(t<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&t&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?fe(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?fe(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let a=r,l=0;;l++){let o=this.children[l],h=a+o.size;if(i==-1&&e<=h){let d=a+o.border;if(e>=d&&t<=h-o.border&&o.node&&o.contentDOM&&this.contentDOM.contains(o.contentDOM))return o.parseRange(e,t,d);e=a;for(let f=l;f>0;f--){let g=this.children[f-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=fe(g.dom)+1;break}e-=g.size}i==-1&&(i=0)}if(i>-1&&(h>t||l==this.children.length-1)){t=h;for(let d=l+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=fe(f.dom);break}t+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=h}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),a=Math.max(e,t);for(let g=0,y=0;g<this.children.length;g++){let v=this.children[g],k=y+v.size;if(s>y&&a<k)return v.setSelection(e-y-v.border,t-y-v.border,r,i);y=k}let l=this.domFromPos(e,e?-1:1),o=t==e?l:this.domFromPos(t,t?-1:1),h=r.getSelection(),d=!1;if((Ue||xe)&&e==t){let{node:g,offset:y}=l;if(g.nodeType==3){if(d=!!(y&&g.nodeValue[y-1]==`
`),d&&y==g.nodeValue.length)for(let v=g,k;v;v=v.parentNode){if(k=v.nextSibling){k.nodeName=="BR"&&(l=o={node:k.parentNode,offset:fe(k)+1});break}let M=v.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{let v=g.childNodes[y-1];d=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(Ue&&h.focusNode&&h.focusNode!=o.node&&h.focusNode.nodeType==1){let g=h.focusNode.childNodes[h.focusOffset];g&&g.contentEditable=="false"&&(i=!0)}if(!(i||d&&xe)&&Kt(l.node,l.offset,h.anchorNode,h.anchorOffset)&&Kt(o.node,o.offset,h.focusNode,h.focusOffset))return;let f=!1;if((h.extend||e==t)&&!d){h.collapse(l.node,l.offset);try{e!=t&&h.extend(o.node,o.offset),f=!0}catch{}}if(!f){if(e>t){let y=l;l=o,o=y}let g=document.createRange();g.setEnd(o.node,o.offset),g.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(g)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],a=r+s.size;if(r==a?e<=a&&t>=r:e<a&&t>r){let l=r+s.border,o=a-s.border;if(e>=l&&t<=o){this.dirty=e==r||t==a?Vt:is,e==l&&t==o&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=et:s.markDirty(e-l,t-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Vt:et}r=a}this.dirty=Vt}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Vt:is;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class ul extends Vr{constructor(e,t,r,i){let s,a=t.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(a.nodeType!=1){let l=document.createElement("span");l.appendChild(a),a=l}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==Le&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Zu extends Vr{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Yt extends Vr{constructor(e,t,r,i){super(e,[],r,i),this.mark=t}static create(e,t,r,i){let s=i.nodeViews[t.type.name],a=s&&s(t,i,r);return(!a||!a.dom)&&(a=pr.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Yt(e,t,a.dom,a.contentDOM||a.dom)}parseRule(){return this.dirty&et||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=et&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Le){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Le}}slice(e,t,r){let i=Yt.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;t<a&&(s=zn(s,t,a,r)),e>0&&(s=zn(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}}class zt extends Vr{constructor(e,t,r,i,s,a,l,o,h){super(e,[],s,a),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,t,r,i,s,a){let l=s.nodeViews[t.type.name],o,h=l&&l(t,s,()=>{if(!o)return a;if(o.parent)return o.parent.posBeforeChild(o)},r,i),d=h&&h.dom,f=h&&h.contentDOM;if(t.isText){if(!d)d=document.createTextNode(t.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=pr.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let g=d;return d=pl(d,r,t),h?o=new Qu(e,t,r,i,d,f||null,g,h,s,a+1):t.isText?new D0(e,t,r,i,d,g,s):new zt(e,t,r,i,d,f||null,g,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>z.empty)}return e}matchesNode(e,t,r){return this.dirty==Le&&e.eq(this.node)&&Nn(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,a=s&&s.pos>-1?s:null,l=s&&s.pos<0,o=new e1(this,a&&a.node,e);n1(this.node,this.innerDeco,(h,d,f)=>{h.spec.marks?o.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!f&&o.syncToMarks(d==this.node.childCount?j.none:this.node.child(d).marks,r,e),o.placeWidget(h,e,i)},(h,d,f,g)=>{o.syncToMarks(h.marks,r,e);let y;o.findNodeMatch(h,d,f,g)||l&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(y=o.findIndexWithChild(s.node))>-1&&o.updateNodeAt(h,d,f,y,e)||o.updateNextNode(h,d,f,e,g,i)||o.addNode(h,d,f,e,i),i+=h.nodeSize}),o.syncToMarks([],r,e),this.node.isTextblock&&o.addTextblockHacks(),o.destroyRest(),(o.changed||this.dirty==Vt)&&(a&&this.protectLocalComposition(e,a),dl(this.contentDOM,this.children,e),dr&&i1(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof X)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=s1(this.node.content,a,r-t,i-t);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new Zu(this,s,t,i);e.input.compositionNodes.push(a),this.children=zn(this.children,r,r+i.length,e,a)}update(e,t,r,i){return this.dirty==et||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Le}updateOuterDeco(e){if(Nn(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=fl(this.dom,this.nodeDOM,An(this.outerDeco,this.node,t),An(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ss(n,e,t,r,i){pl(r,e,n);let s=new zt(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class D0 extends zt{constructor(e,t,r,i,s,a,l){super(e,t,r,i,s,null,a,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==et||this.dirty!=Le&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Le||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Le,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new D0(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=et)}get domAtom(){return!1}isText(e){return this.node.text==e}}class cl extends Vr{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Le&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Qu extends zt{constructor(e,t,r,i,s,a,l,o,h,d){super(e,t,r,i,s,a,l,h,d),this.spec=o}update(e,t,r,i){if(this.dirty==et)return!1;if(this.spec.update){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function dl(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let a=e[s],l=a.dom;if(l.parentNode==n){for(;l!=r;)r=as(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(l,r);if(a instanceof Yt){let o=r?r.previousSibling:n.lastChild;dl(a.contentDOM,a.children,t),r=o?o.nextSibling:n.firstChild}}for(;r;)r=as(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Cr=function(n){n&&(this.nodeName=n)};Cr.prototype=Object.create(null);const Ht=[new Cr];function An(n,e,t){if(n.length==0)return Ht;let r=t?Ht[0]:new Cr,i=[r];for(let s=0;s<n.length;s++){let a=n[s].type.attrs;if(a){a.nodeName&&i.push(r=new Cr(a.nodeName));for(let l in a){let o=a[l];o!=null&&(t&&i.length==1&&i.push(r=new Cr(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+o:l=="style"?r.style=(r.style?r.style+";":"")+o:l!="nodeName"&&(r[l]=o))}}}return i}function fl(n,e,t,r){if(t==Ht&&r==Ht)return e;let i=e;for(let s=0;s<r.length;s++){let a=r[s],l=t[s];if(s){let o;l&&l.nodeName==a.nodeName&&i!=n&&(o=i.parentNode)&&o.nodeName.toLowerCase()==a.nodeName||(o=document.createElement(a.nodeName),o.pmIsDeco=!0,o.appendChild(i),l=Ht[0]),i=o}_u(i,l||Ht[0],a)}return i}function _u(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function pl(n,e,t){return fl(n,n,Ht,An(e,t,n.nodeType!=1))}function Nn(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function as(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class e1{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=t1(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Le,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let o=this.index;o<Math.min(this.index+3,this.top.children.length);o++){let h=this.top.children[o];if(h.matchesMark(e[s])&&!this.isLocked(h.dom)){l=o;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let o=Yt.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,o),this.top=o,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,r))s=this.top.children.indexOf(a,this.index);else for(let l=this.index,o=Math.min(this.top.children.length,l+5);l<o;l++){let h=this.top.children[l];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let a=this.top.children[i];return a.dirty==et&&a.dom==a.contentDOM&&(a.dirty=Vt),a.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,a){for(let l=this.index;l<this.top.children.length;l++){let o=this.top.children[l];if(o instanceof zt){let h=this.preMatch.matched.get(o);if(h!=null&&h!=s)return!1;let d=o.dom,f,g=this.isLocked(d)&&!(e.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==e.text&&o.dirty!=et&&Nn(t,o.outerDeco));if(!g&&o.update(e,t,r,i))return this.destroyBetween(this.index,l),o.dom!=d&&(this.changed=!0),this.index++,!0;if(!g&&(f=this.recreateWrapper(o,e,t,r,i,a)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Vt,f.updateChildren(i,a+1),f.dirty=Le),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let l=zt.create(this.top,t,r,i,s,a);if(l.contentDOM){l.children=e.children,e.children=[];for(let o of l.children)o.parent=l}return e.destroy(),l}addNode(e,t,r,i,s){let a=zt.create(this.top,e,t,r,i,s);a.contentDOM&&a.updateChildren(i,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new ul(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Yt;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof D0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((xe||ge)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new cl(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function t1(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,a=[];e:for(;i>0;){let l;for(;;)if(r){let h=t.children[r-1];if(h instanceof Yt)t=h,r=h.children.length;else{l=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let o=l.node;if(o){if(o!=n.child(i-1))break;--i,s.set(l,i),a.push(l)}}return{index:i,matched:s,matches:a.reverse()}}function r1(n,e){return n.type.side-e.type.side}function n1(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let d=n.child(h);r(d,i,e.forChild(s,d),h),s+=d.nodeSize}return}let a=0,l=[],o=null;for(let h=0;;){let d,f;for(;a<i.length&&i[a].to==s;){let M=i[a++];M.widget&&(d?(f||(f=[d])).push(M):d=M)}if(d)if(f){f.sort(r1);for(let M=0;M<f.length;M++)t(f[M],h,!!o)}else t(d,h,!!o);let g,y;if(o)y=-1,g=o,o=null;else if(h<n.childCount)y=h,g=n.child(h++);else break;for(let M=0;M<l.length;M++)l[M].to<=s&&l.splice(M--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)l.push(i[a++]);let v=s+g.nodeSize;if(g.isText){let M=v;a<i.length&&i[a].from<M&&(M=i[a].from);for(let T=0;T<l.length;T++)l[T].to<M&&(M=l[T].to);M<v&&(o=g.cut(M-s),g=g.cut(0,M-s),v=M,y=-1)}else for(;a<i.length&&i[a].to<v;)a++;let k=g.isInline&&!g.isLeaf?l.filter(M=>!M.inline):l.slice();r(g,k,e.forChild(s,g),y),s=v}}function i1(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function s1(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let a=n.child(i++),l=s;if(s+=a.nodeSize,!a.isText)continue;let o=a.text;for(;i<n.childCount;){let h=n.child(i++);if(s+=h.nodeSize,!h.isText)break;o+=h.text}if(s>=t){if(s>=r&&o.slice(r-e.length-l,r-l)==e)return r-e.length;let h=l<r?o.lastIndexOf(e,r-l-1):-1;if(h>=0&&h+e.length+l>=t)return l+h;if(t==r&&o.length>=r+e.length-l&&o.slice(r-l,r-l+e.length)==e)return r}}return-1}function zn(n,e,t,r,i){let s=[];for(let a=0,l=0;a<n.length;a++){let o=n[a],h=l,d=l+=o.size;h>=t||d<=e?s.push(o):(h<e&&s.push(o.slice(0,e-h,r)),i&&(s.push(i),i=void 0),d>t&&s.push(o.slice(t-h,o.size,r)))}return s}function Zn(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,a=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(a<0)return null;let l=r.resolve(a),o,h;if(z0(t)){for(o=l;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&W.isSelectable(d)&&i.parent&&!(d.isInline&&Ou(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;h=new W(a==f?l:r.resolve(f))}}else{let d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null;o=r.resolve(d)}if(!h){let d=e=="pointer"||n.state.selection.head<l.pos&&!s?1:-1;h=Qn(n,o,l,d)}return h}function ml(n){return n.editable?n.hasFocus():yl(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function ht(n,e=!1){let t=n.state.selection;if(gl(n,t),!!ml(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&ge){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Kt(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)l1(n);else{let{anchor:r,head:i}=t,s,a;ls&&!(t instanceof X)&&(t.$from.parent.inlineContent||(s=hs(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(a=hs(n,t.to))),n.docView.setSelection(r,i,n.root,e),ls&&(s&&us(s),a&&us(a)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&a1(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const ls=xe||ge&&nl<63;function hs(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(xe&&i&&i.contentEditable=="false")return _0(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return _0(i);if(s)return _0(s)}}function _0(n){return n.contentEditable="true",xe&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function us(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function a1(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!ml(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function l1(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,fe(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Ce&&Nt<=11&&(r.disabled=!0,r.disabled=!1)}function gl(n,e){if(e instanceof W){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(cs(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else cs(n)}function cs(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Qn(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||X.between(e,t,r)}function ds(n){return n.editable&&!n.hasFocus()?!1:yl(n)}function yl(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function o1(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Kt(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Dn(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&K.findFrom(s,e)}function kt(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function fs(n,e,t){let r=n.state.selection;if(r instanceof X)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return kt(n,new X(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Dn(n.state,e);return i&&i instanceof W?kt(n,i):!1}else if(!(Fe&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,a;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(a=n.docView.descAt(l))&&!a.contentDOM?W.isSelectable(s)?kt(n,new W(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):Lr?kt(n,new X(n.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof W&&r.node.isInline)return kt(n,new X(e>0?r.$to:r.$from));{let i=Dn(n.state,e);return i?kt(n,i):!1}}}function y0(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ar(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function rr(n,e){return e<0?h1(n):u1(n)}function h1(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,a=!1;for(Ue&&t.nodeType==1&&r<y0(t)&&Ar(t.childNodes[r],-1)&&(a=!0);;)if(r>0){if(t.nodeType!=1)break;{let l=t.childNodes[r-1];if(Ar(l,-1))i=t,s=--r;else if(l.nodeType==3)t=l,r=t.nodeValue.length;else break}}else{if(vl(t))break;{let l=t.previousSibling;for(;l&&Ar(l,-1);)i=t.parentNode,s=fe(l),l=l.previousSibling;if(l)t=l,r=y0(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}a?On(n,t,r):i&&On(n,i,s)}function u1(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=y0(t),s,a;for(;;)if(r<i){if(t.nodeType!=1)break;let l=t.childNodes[r];if(Ar(l,1))s=t,a=++r;else break}else{if(vl(t))break;{let l=t.nextSibling;for(;l&&Ar(l,1);)s=l.parentNode,a=fe(l)+1,l=l.nextSibling;if(l)t=l,r=0,i=y0(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&On(n,s,a)}function vl(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function c1(n,e){for(;n&&e==n.childNodes.length&&!qr(n);)e=fe(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function d1(n,e){for(;n&&!e&&!qr(n);)e=fe(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function On(n,e,t){if(e.nodeType!=3){let s,a;(a=c1(e,t))?(e=a,t=0):(s=d1(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(z0(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&ht(n)},50)}function ps(n,e){let t=n.state.doc.resolve(e);if(!(ge||Ru)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>i.top&&a<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function ms(n,e,t){let r=n.state.selection;if(r instanceof X&&!r.empty||t.indexOf("s")>-1||Fe&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let a=Dn(n.state,e);if(a&&a instanceof W)return kt(n,a)}if(!i.parent.inlineContent){let a=e<0?i:s,l=r instanceof Be?K.near(a,e):K.findFrom(a,e);return l?kt(n,l):!1}return!1}function gs(n,e){if(!(n.state.selection instanceof X))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let a=n.state.tr;return e<0?a.delete(t.pos-s.nodeSize,t.pos):a.delete(t.pos,t.pos+s.nodeSize),n.dispatch(a),!0}return!1}function ys(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function f1(n){if(!xe||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ys(n,r,"true"),setTimeout(()=>ys(n,r,"false"),20)}return!1}function p1(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function m1(n,e){let t=e.keyCode,r=p1(e);if(t==8||Fe&&t==72&&r=="c")return gs(n,-1)||rr(n,-1);if(t==46&&!e.shiftKey||Fe&&t==68&&r=="c")return gs(n,1)||rr(n,1);if(t==13||t==27)return!0;if(t==37||Fe&&t==66&&r=="c"){let i=t==37?ps(n,n.state.selection.from)=="ltr"?-1:1:-1;return fs(n,i,r)||rr(n,i)}else if(t==39||Fe&&t==70&&r=="c"){let i=t==39?ps(n,n.state.selection.from)=="ltr"?1:-1:1;return fs(n,i,r)||rr(n,i)}else{if(t==38||Fe&&t==80&&r=="c")return ms(n,-1,r)||rr(n,-1);if(t==40||Fe&&t==78&&r=="c")return f1(n)||ms(n,1,r)||rr(n,1);if(r==(Fe?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function bl(n,e){n.someProp("transformCopied",y=>{e=y(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let y=r.firstChild;t.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let a=n.someProp("clipboardSerializer")||pr.fromSchema(n.state.schema),l=Tl(),o=l.createElement("div");o.appendChild(a.serializeFragment(r,{document:l}));let h=o.firstChild,d,f=0;for(;h&&h.nodeType==1&&(d=Ml[h.nodeName.toLowerCase()]);){for(let y=d.length-1;y>=0;y--){let v=l.createElement(d[y]);for(;o.firstChild;)v.appendChild(o.firstChild);o.appendChild(v),f++}h=o.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(t)}`);let g=n.someProp("clipboardTextSerializer",y=>y(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:o,text:g,slice:e}}function xl(n,e,t,r,i){let s=i.parent.type.spec.code,a,l;if(!t&&!e)return null;let o=e&&(r||s||!t);if(o){if(n.someProp("transformPastedText",g=>{e=g(e,s||r,n)}),s)return e?new B(z.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):B.empty;let f=n.someProp("clipboardTextParser",g=>g(e,i,r,n));if(f)l=f;else{let g=i.marks(),{schema:y}=n.state,v=pr.fromSchema(y);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(k=>{let M=a.appendChild(document.createElement("p"));k&&M.appendChild(v.serializeNode(y.text(k,g)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),a=v1(t),Lr&&b1(a);let h=a&&a.querySelector("[data-pm-slice]"),d=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let g=a.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;a=g}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||Dr.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(o||d),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!g1.test(g.parentNode.nodeName)?{ignore:!0}:null}})),d)l=x1(vs(l,+d[1],+d[2]),d[4]);else if(l=B.maxOpen(y1(l.content,i),!0),l.openStart||l.openEnd){let f=0,g=0;for(let y=l.content.firstChild;f<l.openStart&&!y.type.spec.isolating;f++,y=y.firstChild);for(let y=l.content.lastChild;g<l.openEnd&&!y.type.spec.isolating;g++,y=y.lastChild);l=vs(l,f,g)}return n.someProp("transformPasted",f=>{l=f(l,n)}),l}const g1=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function y1(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,a=[];if(n.forEach(l=>{if(!a)return;let o=i.findWrapping(l.type),h;if(!o)return a=null;if(h=a.length&&s.length&&kl(o,s,l,a[a.length-1],0))a[a.length-1]=h;else{a.length&&(a[a.length-1]=Sl(a[a.length-1],s.length));let d=wl(l,o);a.push(d),i=i.matchType(d.type),s=o}}),a)return z.from(a)}return n}function wl(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,z.from(n));return n}function kl(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=kl(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(z.from(wl(t,n,i+1))))}}function Sl(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Sl(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(z.empty,!0);return n.copy(t.append(r))}function En(n,e,t,r,i,s){let a=e<0?n.firstChild:n.lastChild,l=a.content;return n.childCount>1&&(s=0),i<r-1&&(l=En(l,e,t,r,i+1,s)),i>=t&&(l=e<0?a.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(z.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,a.copy(l))}function vs(n,e,t){return e<n.openStart&&(n=new B(En(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new B(En(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Ml={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let bs=null;function Tl(){return bs||(bs=document.implementation.createHTMLDocument("title"))}function v1(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Tl().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&Ml[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=n,i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function b1(n){let e=n.querySelectorAll(ge?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function x1(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:a}=n;for(let l=r.length-2;l>=0;l-=2){let o=t.nodes[r[l]];if(!o||o.hasRequiredAttrs())break;i=z.from(o.create(r[l+1],i)),s++,a++}return new B(i,s,a)}const we={},ke={},w1={touchstart:!0,touchmove:!0};class k1{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function S1(n){for(let e in we){let t=we[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{T1(n,r)&&!_n(n,r)&&(n.editable||!(r.type in ke))&&t(n,r)},w1[e]?{passive:!0}:void 0)}xe&&n.dom.addEventListener("input",()=>null),Bn(n)}function Ct(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function M1(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Bn(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>_n(n,r))})}function _n(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function T1(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function C1(n,e){!_n(n,e)&&we[e.type]&&(n.editable||!(e.type in ke))&&we[e.type](n,e)}ke.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Al(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!($e&&ge&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),dr&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Lt(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||m1(n,t)?t.preventDefault():Ct(n,"key")};ke.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};ke.keypress=(n,e)=>{let t=e;if(Al(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Fe&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof X)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function O0(n){return{left:n.clientX,top:n.clientY}}function A1(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function ei(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(n.someProp(e,l=>a>s.depth?l(n,t,s.nodeAfter,s.before(a),i,!0):l(n,t,s.node(a),s.before(a),i,!1)))return!0;return!1}function lr(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function N1(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&W.isSelectable(r)?(lr(n,new W(t)),!0):!1}function z1(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof W&&(r=t.node);let s=n.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let l=a>s.depth?s.nodeAfter:s.node(a);if(W.isSelectable(l)){r&&t.$from.depth>0&&a>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(a);break}}return i!=null?(lr(n,W.create(n.state.doc,i)),!0):!1}function D1(n,e,t,r,i){return ei(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?z1(n,t):N1(n,t))}function O1(n,e,t,r){return ei(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function E1(n,e,t,r){return ei(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||B1(n,t,r)}function B1(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(lr(n,X.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(a.inlineContent)lr(n,X.create(r,l+1,l+1+a.content.size));else if(W.isSelectable(a))lr(n,W.create(r,l));else continue;return!0}}function ti(n){return v0(n)}const Cl=Fe?"metaKey":"ctrlKey";we.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=ti(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&A1(t,n.input.lastClick)&&!t[Cl]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let a=n.posAtCoords(O0(t));a&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new R1(n,a,t,!!r)):(s=="doubleClick"?O1:E1)(n,a.pos,a.inside,t)?t.preventDefault():Ct(n,"pointer"))};class R1{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Cl],this.allowDefault=r.shiftKey;let s,a;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),a=t.inside;else{let d=e.state.doc.resolve(t.pos);s=d.parent,a=d.depth?d.before():0}const l=i?null:r.target,o=l?e.docView.nearestDesc(l,!0):null;this.target=o&&o.dom.nodeType==1?o.dom:null;let{selection:h}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||h instanceof W&&h.from<=a&&h.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ue&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ct(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ht(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(O0(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ct(this.view,"pointer"):D1(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||xe&&this.mightDrag&&!this.mightDrag.node.isAtom||ge&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(lr(this.view,K.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ct(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ct(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}we.touchstart=n=>{n.input.lastTouch=Date.now(),ti(n),Ct(n,"pointer")};we.touchmove=n=>{n.input.lastTouch=Date.now(),Ct(n,"pointer")};we.contextmenu=n=>ti(n);function Al(n,e){return n.composing?!0:xe&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const I1=$e?5e3:-1;ke.compositionstart=ke.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),v0(n,!0),n.markCursor=null;else if(v0(n),Ue&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(a.nodeType==3){n.domSelection().collapse(a,a.nodeValue.length);break}else i=a,s=-1}}n.input.composing=!0}Nl(n,I1)};ke.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Nl(n,20))};function Nl(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>v0(n),e))}function zl(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=P1());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function F1(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=zu(e.focusNode,e.focusOffset),r=Du(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=t.pmViewDesc;if(!(!a||!a.isText(t.nodeValue)))return r}}return t||r}function P1(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function v0(n,e=!1){if(!($e&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),zl(n),e||n.docView&&n.docView.dirty){let t=Zn(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return!1}}function q1(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Br=Ce&&Nt<15||dr&&Iu<604;we.copy=ke.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=Br?null:t.clipboardData,a=r.content(),{dom:l,text:o}=bl(n,a);s?(t.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",o)):q1(n,l),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function L1(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function V1(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Rr(n,r.value,null,i,e):Rr(n,r.textContent,r.innerHTML,i,e)},50)}function Rr(n,e,t,r,i){let s=xl(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",o=>o(n,i,s||B.empty)))return!0;if(!s)return!1;let a=L1(s),l=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(s);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Dl(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}ke.paste=(n,e)=>{let t=e;if(n.composing&&!$e)return;let r=Br?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Rr(n,Dl(r),r.getData("text/html"),i,t)?t.preventDefault():V1(n,t)};class Ol{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const El=Fe?"altKey":"ctrlKey";we.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(O0(t)),a;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof W?i.to-1:i.to))){if(r&&r.mightDrag)a=W.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(a=W.create(n.state.doc,f.posBefore))}}let l=(a||n.state.selection).content(),{dom:o,text:h,slice:d}=bl(n,l);(!t.dataTransfer.files.length||!ge||nl>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Br?"Text":"text/html",o.innerHTML),t.dataTransfer.effectAllowed="copyMove",Br||t.dataTransfer.setData("text/plain",h),n.dragging=new Ol(d,!t[El],a)};we.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};ke.dragover=ke.dragenter=(n,e)=>e.preventDefault();ke.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(O0(t));if(!i)return;let s=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",v=>{a=v(a,n)}):a=xl(n,Dl(t.dataTransfer),Br?null:t.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&!t[El]);if(n.someProp("handleDrop",v=>v(n,t,a||B.empty,l))){t.preventDefault();return}if(!a)return;t.preventDefault();let o=a?Xh(n.state.doc,s.pos,a):s.pos;o==null&&(o=s.pos);let h=n.state.tr;if(l){let{node:v}=r;v?v.replace(h):h.deleteSelection()}let d=h.mapping.map(o),f=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,g=h.doc;if(f?h.replaceRangeWith(d,d,a.content.firstChild):h.replaceRange(d,d,a),h.doc.eq(g))return;let y=h.doc.resolve(d);if(f&&W.isSelectable(a.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(a.content.firstChild))h.setSelection(new W(y));else{let v=h.mapping.map(o);h.mapping.maps[h.mapping.maps.length-1].forEach((k,M,T,R)=>v=R),h.setSelection(Qn(n,y,h.doc.resolve(v)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};we.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&ht(n)},20))};we.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};we.beforeinput=(n,e)=>{if(ge&&$e&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Lt(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in ke)we[n]=ke[n];function Ir(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class b0{constructor(e,t){this.toDOM=e,this.spec=t||Jt,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:a}=e.mapResult(t.from+i,this.side<0?-1:1);return a?null:new Pe(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof b0&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ir(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Dt{constructor(e,t){this.attrs=e,this.spec=t||Jt}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,a=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Pe(s,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Dt&&Ir(this.attrs,e.attrs)&&Ir(this.spec,e.spec)}static is(e){return e.type instanceof Dt}destroy(){}}class ri{constructor(e,t){this.attrs=e,this.spec=t||Jt}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let a=e.mapResult(t.to+i,-1);return a.deleted||a.pos<=s.pos?null:new Pe(s.pos-r,a.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof ri&&Ir(this.attrs,e.attrs)&&Ir(this.spec,e.spec)}destroy(){}}class Pe{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Pe(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Pe(e,e,new b0(t,r))}static inline(e,t,r,i){return new Pe(e,t,new Dt(r,i))}static node(e,t,r,i){return new Pe(e,t,new ri(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Dt}get widget(){return this.type instanceof b0}}const sr=[],Jt={};class ue{constructor(e,t){this.local=e.length?e:sr,this.children=t.length?t:sr}static create(e,t){return t.length?x0(t,e,0,Jt):pe}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let a=0;a<this.local.length;a++){let l=this.local[a];l.from<=t&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,r,i+l,s)}}map(e,t,r){return this==pe||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Jt)}mapInner(e,t,r,i,s){let a;for(let l=0;l<this.local.length;l++){let o=this.local[l].map(e,r,i);o&&o.type.valid(t,o)?(a||(a=[])).push(o):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?H1(this.children,a||[],e,t,r,i,s):a?new ue(a.sort($t),sr):pe}add(e,t){return t.length?this==pe?ue.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((l,o)=>{let h=o+r,d;if(d=Rl(t,l,h)){for(i||(i=this.children.slice());s<i.length&&i[s]<o;)s+=3;i[s]==o?i[s+2]=i[s+2].addInner(l,d,h+1):i.splice(s,0,o,o+l.nodeSize,x0(d,l,h+1,Jt)),s+=3}});let a=Bl(s?Il(t):t,-r);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||a.splice(l--,1);return new ue(a.length?this.local.concat(a).sort($t):this.local,i||this.children)}remove(e){return e.length==0||this==pe?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let a,l=r[s]+t,o=r[s+1]+t;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>l&&f.to<o&&(e[d]=null,(a||(a=[])).push(f));if(!a)continue;r==this.children&&(r=this.children.slice());let h=r[s+2].removeInner(a,l+1);h!=pe?r[s+2]=h:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let l=0;l<i.length;l++)i[l].eq(a,t)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ue(i,r):pe}forChild(e,t){if(this==pe)return this;if(t.isLeaf)return ue.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,a=s+t.content.size;for(let l=0;l<this.local.length;l++){let o=this.local[l];if(o.from<a&&o.to>s&&o.type instanceof Dt){let h=Math.max(s,o.from)-s,d=Math.min(a,o.to)-s;h<d&&(i||(i=[])).push(o.copy(h,d))}}if(i){let l=new ue(i.sort($t),sr);return r?new St([l,r]):l}return r||pe}eq(e){if(this==e)return!0;if(!(e instanceof ue)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return ni(this.localsInner(e))}localsInner(e){if(this==pe)return sr;if(e.inlineContent||!this.local.some(Dt.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Dt||t.push(this.local[r]);return t}}ue.empty=new ue([],[]);ue.removeOverlap=ni;const pe=ue.empty;class St{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Jt));return St.from(r)}forChild(e,t){if(t.isLeaf)return ue.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=pe&&(s instanceof St?r=r.concat(s.members):r.push(s))}return St.from(r)}eq(e){if(!(e instanceof St)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let a=0;a<s.length;a++)t.push(s[a])}}return t?ni(r?t:t.sort($t)):sr}static from(e){switch(e.length){case 0:return pe;case 1:return e[0];default:return new St(e.every(t=>t instanceof ue)?e:e.reduce((t,r)=>t.concat(r instanceof ue?r:r.members),[]))}}}function H1(n,e,t,r,i,s,a){let l=n.slice();for(let h=0,d=s;h<t.maps.length;h++){let f=0;t.maps[h].forEach((g,y,v,k)=>{let M=k-v-(y-g);for(let T=0;T<l.length;T+=3){let R=l[T+1];if(R<0||g>R+d-f)continue;let L=l[T]+d-f;y>=L?l[T+1]=g<=L?-2:-1:g>=d&&M&&(l[T]+=M,l[T+1]+=M)}f+=M}),d=t.maps[h].map(d,-1)}let o=!1;for(let h=0;h<l.length;h+=3)if(l[h+1]<0){if(l[h+1]==-2){o=!0,l[h+1]=-1;continue}let d=t.map(n[h]+s),f=d-i;if(f<0||f>=r.content.size){o=!0;continue}let g=t.map(n[h+1]+s,-1),y=g-i,{index:v,offset:k}=r.content.findIndex(f),M=r.maybeChild(v);if(M&&k==f&&k+M.nodeSize==y){let T=l[h+2].mapInner(t,M,d+1,n[h]+s+1,a);T!=pe?(l[h]=f,l[h+1]=y,l[h+2]=T):(l[h+1]=-2,o=!0)}else o=!0}if(o){let h=W1(l,n,e,t,i,s,a),d=x0(h,r,0,a);e=d.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,g=0;f<d.children.length;f+=3){let y=d.children[f];for(;g<l.length&&l[g]<y;)g+=3;l.splice(g,0,d.children[f],d.children[f+1],d.children[f+2])}}return new ue(e.sort($t),l)}function Bl(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Pe(i.from+e,i.to+e,i.type))}return t}function W1(n,e,t,r,i,s,a){function l(o,h){for(let d=0;d<o.local.length;d++){let f=o.local[d].map(r,i,h);f?t.push(f):a.onRemove&&a.onRemove(o.local[d].spec)}for(let d=0;d<o.children.length;d+=3)l(o.children[d+2],o.children[d]+h+1)}for(let o=0;o<n.length;o+=3)n[o+1]==-1&&l(n[o+2],e[o]+s+1);return t}function Rl(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,a;s<n.length;s++)(a=n[s])&&a.from>t&&a.to<r&&((i||(i=[])).push(a),n[s]=null);return i}function Il(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function x0(n,e,t,r){let i=[],s=!1;e.forEach((l,o)=>{let h=Rl(n,l,o+t);if(h){s=!0;let d=x0(h,l,t+o+1,r);d!=pe&&i.push(o,o+l.nodeSize,d)}});let a=Bl(s?Il(n):n,-t).sort($t);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||(r.onRemove&&r.onRemove(a[l].spec),a.splice(l--,1));return a.length||i.length?new ue(a,i):pe}function $t(n,e){return n.from-e.from||n.to-e.to}function ni(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),xs(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),xs(e,i,r.copy(s.from,r.to)));break}}}return e}function xs(n,e,t){for(;e<n.length&&$t(t,n[e])>0;)e++;n.splice(e,0,t)}function en(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=pe&&e.push(r)}),n.cursorWrapper&&e.push(ue.create(n.state.doc,[n.cursorWrapper.deco])),St.from(e)}const G1={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},J1=Ce&&Nt<=11;class $1{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class U1{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new $1,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ce&&Nt<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),J1&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,G1)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ds(this.view)){if(this.suppressingSelectionUpdates)return ht(this.view);if(Ce&&Nt<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Kt(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=Er(s))t.add(s);for(let s=e.anchorNode;s;s=Er(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&ds(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,l=!1,o=[];if(e.editable)for(let d=0;d<t.length;d++){let f=this.registerMutation(t[d],o);f&&(s=s<0?f.from:Math.min(f.from,s),a=a<0?f.to:Math.max(f.to,a),f.typeOver&&(l=!0))}if(Ue&&o.length){let d=o.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,g]=d;f.parentNode&&f.parentNode.parentNode==g.parentNode?g.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let g of d){let y=g.parentNode;y&&y.nodeName=="LI"&&(!f||j1(e,f)!=y)&&g.remove()}}}let h=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&z0(r)&&(h=Zn(e))&&h.eq(K.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ht(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),K1(e)),this.handleDOMChange(s,a,l,o),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ht(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Ce&&Nt<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:g}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(s=g)}let a=i&&i.parentNode==e.target?fe(i)+1:0,l=r.localPosFromDOM(e.target,a,-1),o=s&&s.parentNode==e.target?fe(s):e.target.childNodes.length,h=r.localPosFromDOM(e.target,o,1);return{from:l,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let ws=new WeakMap,ks=!1;function K1(n){if(!ws.has(n)&&(ws.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Ue,ks)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ks=!0}}function Ss(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,a=n.domAtPos(n.state.selection.anchor);return Kt(a.node,a.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function Y1(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Ss(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Ss(n,t):null}function j1(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function X1(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:a,to:l}=n.docView.parseRange(e,t),o=n.domSelectionRange(),h,d=o.anchorNode;if(d&&n.dom.contains(d.nodeType==1?d:d.parentNode)&&(h=[{node:d,offset:o.anchorOffset}],z0(o)||h.push({node:o.focusNode,offset:o.focusOffset})),ge&&n.input.lastKeyCode===8)for(let M=s;M>i;M--){let T=r.childNodes[M-1],R=T.pmViewDesc;if(T.nodeName=="BR"&&!R){s=M;break}if(!R||R.size)break}let f=n.state.doc,g=n.someProp("domParser")||Dr.fromSchema(n.state.schema),y=f.resolve(a),v=null,k=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:Z1,context:y});if(h&&h[0].pos!=null){let M=h[0].pos,T=h[1]&&h[1].pos;T==null&&(T=M),v={anchor:M+a,head:T+a}}return{doc:k,sel:v,from:a,to:l}}function Z1(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(xe&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||xe&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Q1=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function _1(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let I=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,de=Zn(n,I);if(de&&!n.state.selection.eq(de)){if(ge&&$e&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",se=>se(n,Lt(13,"Enter"))))return;let le=n.state.tr.setSelection(de);I=="pointer"?le.setMeta("pointer",!0):I=="key"&&le.scrollIntoView(),s&&le.setMeta("composition",s),n.dispatch(le)}return}let a=n.state.doc.resolve(e),l=a.sharedDepth(t);e=a.before(l+1),t=n.state.doc.resolve(t).after(l+1);let o=n.state.selection,h=X1(n,e,t),d=n.state.doc,f=d.slice(h.from,h.to),g,y;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(g=n.state.selection.to,y="end"):(g=n.state.selection.from,y="start"),n.input.lastKeyCode=null;let v=rc(f.content,h.doc.content,h.from,g,y);if((dr&&n.input.lastIOSEnter>Date.now()-225||$e)&&i.some(I=>I.nodeType==1&&!Q1.test(I.nodeName))&&(!v||v.endA>=v.endB)&&n.someProp("handleKeyDown",I=>I(n,Lt(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!v)if(r&&o instanceof X&&!o.empty&&o.$head.sameParent(o.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))v={start:o.from,endA:o.to,endB:o.to};else{if(h.sel){let I=Ms(n,n.state.doc,h.sel);if(I&&!I.eq(n.state.selection)){let de=n.state.tr.setSelection(I);s&&de.setMeta("composition",s),n.dispatch(de)}}return}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&v.start==v.endB&&n.state.selection instanceof X&&(v.start>n.state.selection.from&&v.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?v.start=n.state.selection.from:v.endA<n.state.selection.to&&v.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(v.endB+=n.state.selection.to-v.endA,v.endA=n.state.selection.to)),Ce&&Nt<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>h.from&&h.doc.textBetween(v.start-h.from-1,v.start-h.from+1)=="  "&&(v.start--,v.endA--,v.endB--);let k=h.doc.resolveNoCache(v.start-h.from),M=h.doc.resolveNoCache(v.endB-h.from),T=d.resolve(v.start),R=k.sameParent(M)&&k.parent.inlineContent&&T.end()>=v.endA,L;if((dr&&n.input.lastIOSEnter>Date.now()-225&&(!R||i.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!R&&k.pos<h.doc.content.size&&!k.sameParent(M)&&(L=K.findFrom(h.doc.resolve(k.pos+1),1,!0))&&L.head==M.pos)&&n.someProp("handleKeyDown",I=>I(n,Lt(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>v.start&&tc(d,v.start,v.endA,k,M)&&n.someProp("handleKeyDown",I=>I(n,Lt(8,"Backspace")))){$e&&ge&&n.domObserver.suppressSelectionUpdates();return}ge&&$e&&v.endB==v.start&&(n.input.lastAndroidDelete=Date.now()),$e&&!R&&k.start()!=M.start()&&M.parentOffset==0&&k.depth==M.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==v.endA&&(v.endB-=2,M=h.doc.resolveNoCache(v.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(I){return I(n,Lt(13,"Enter"))})},20));let $=v.start,H=v.endA,G,U,Z;if(R){if(k.pos==M.pos)Ce&&Nt<=11&&k.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>ht(n),20)),G=n.state.tr.delete($,H),U=d.resolve(v.start).marksAcross(d.resolve(v.endA));else if(v.endA==v.endB&&(Z=ec(k.parent.content.cut(k.parentOffset,M.parentOffset),T.parent.content.cut(T.parentOffset,v.endA-T.start()))))G=n.state.tr,Z.type=="add"?G.addMark($,H,Z.mark):G.removeMark($,H,Z.mark);else if(k.parent.child(k.index()).isText&&k.index()==M.index()-(M.textOffset?0:1)){let I=k.parent.textBetween(k.parentOffset,M.parentOffset);if(n.someProp("handleTextInput",de=>de(n,$,H,I)))return;G=n.state.tr.insertText(I,$,H)}}if(G||(G=n.state.tr.replace($,H,h.doc.slice(v.start-h.from,v.endB-h.from))),h.sel){let I=Ms(n,G.doc,h.sel);I&&!(ge&&$e&&n.composing&&I.empty&&(v.start!=v.endB||n.input.lastAndroidDelete<Date.now()-100)&&(I.head==$||I.head==G.mapping.map(H)-1)||Ce&&I.empty&&I.head==$)&&G.setSelection(I)}U&&G.ensureMarks(U),s&&G.setMeta("composition",s),n.dispatch(G.scrollIntoView())}function Ms(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Qn(n,e.resolve(t.anchor),e.resolve(t.head))}function ec(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,a,l,o;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<t.length;d++)s=t[d].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],a="add",o=d=>d.mark(l.addToSet(d.marks));else if(i.length==0&&s.length==1)l=s[0],a="remove",o=d=>d.mark(l.removeFromSet(d.marks));else return null;let h=[];for(let d=0;d<e.childCount;d++)h.push(o(e.child(d)));if(z.from(h).eq(n))return{mark:l,type:a}}function tc(n,e,t,r,i){if(t-e<=i.pos-r.pos||tn(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&t==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=n.resolve(tn(s,!0,!0));return!a.parent.isTextblock||a.pos>t||tn(a,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function tn(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function rc(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let o=Math.max(0,s-Math.min(a,l));r-=a+o-s}if(a<s&&n.size<e.size){let o=r<=s&&r>=a?s-r:0;s-=o,s&&s<e.size&&Ts(e.textBetween(s-1,s+1))&&(s+=o?1:-1),l=s+(l-a),a=s}else if(l<s){let o=r<=s&&r>=l?s-r:0;s-=o,s&&s<n.size&&Ts(n.textBetween(s-1,s+1))&&(s+=o?1:-1),a=s+(a-l),l=s}return{start:s,endA:a,endB:l}}function Ts(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class Of{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new k1,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Ds),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ns(this),As(this),this.nodeViews=zs(this),this.docView=ss(this.state.doc,Cs(this),en(this),this.dom,this),this.domObserver=new U1(this,(r,i,s,a)=>_1(this,r,i,s,a)),this.domObserver.start(),S1(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Bn(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ds),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(zl(this),a=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let y=zs(this);ic(y,this.nodeViews)&&(this.nodeViews=y,s=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&Bn(this),this.editable=Ns(this),As(this);let o=en(this),h=Cs(this),d=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,h,o);(f||!e.selection.eq(i.selection))&&(a=!0);let g=d=="preserve"&&a&&this.dom.style.overflowAnchor==null&&qu(this);if(a){this.domObserver.stop();let y=f&&(Ce||ge)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&nc(i.selection,e.selection);if(f){let v=ge?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=F1(this)),(s||!this.docView.update(e.doc,h,o,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=ss(e.doc,h,o,this.dom,this)),v&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&o1(this))?ht(this,y):(gl(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():g&&Lu(g)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof W){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&_i(this,t.getBoundingClientRect(),e)}else _i(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new Ol(e.slice,e.move,i<0?void 0:W.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let l=this.directPlugins[a].props[e];if(l!=null&&(i=t?t(l):l))return i}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let l=s[a].props[e];if(l!=null&&(i=t?t(l):l))return i}}hasFocus(){if(Ce){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Vu(this.dom),ht(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return $u(this,e)}coordsAtPos(e,t=1){return ol(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Xu(this,t||this.state,e)}pasteHTML(e,t){return Rr(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Rr(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(M1(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],en(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Au())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return C1(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return xe&&this.root.nodeType===11&&Eu(this.dom.ownerDocument)==this.dom&&Y1(this,e)||e}domSelection(){return this.root.getSelection()}}function Cs(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Pe.node(0,n.state.doc.content.size,e)]}function As(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Pe.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Ns(n){return!n.someProp("editable",e=>e(n.state)===!1)}function nc(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function zs(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function ic(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function Ds(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}const sc=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function ac(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,a;for(let l=0;l<e.length-1;l++){let o=e[l];if(/^(cmd|meta|m)$/i.test(o))a=!0;else if(/^a(lt)?$/i.test(o))r=!0;else if(/^(c|ctrl|control)$/i.test(o))i=!0;else if(/^s(hift)?$/i.test(o))s=!0;else if(/^mod$/i.test(o))sc?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+o)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),a&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function lc(n){let e=Object.create(null);for(let t in n)e[ac(t)]=n[t];return e}function rn(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Ef(n){return new Kn({props:{handleKeyDown:Fl(n)}})}function Fl(n){let e=lc(n);return function(t,r){let i=Jo(r),s,a=e[rn(i,r)];if(a&&a(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[rn(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=$o[r.keyCode])&&s!=i){let l=e[rn(s,r)];if(l&&l(t.state,t.dispatch,t))return!0}}return!1}}class ie extends K{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return ie.valid(r)?new ie(r):K.near(r)}content(){return B.empty}eq(e){return e instanceof ie&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ie(e.resolve(t.pos))}getBookmark(){return new ii(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!oc(e)||!hc(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&ie.valid(e))return e;let i=e.pos,s=null;for(let a=e.depth;;a--){let l=e.node(a);if(t>0?e.indexAfter(a)<l.childCount:e.index(a)>0){s=l.child(t>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;i+=t;let o=e.doc.resolve(i);if(ie.valid(o))return o}for(;;){let a=t>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!W.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=a,i+=t;let l=e.doc.resolve(i);if(ie.valid(l))return l}return null}}}ie.prototype.visible=!1;ie.findFrom=ie.findGapCursorFrom;K.jsonID("gapcursor",ie);class ii{constructor(e){this.pos=e}map(e){return new ii(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return ie.valid(t)?new ie(t):K.near(t)}}function oc(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function hc(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Bf(){return new Kn({props:{decorations:fc,createSelectionBetween(n,e,t){return e.pos==t.pos&&ie.valid(t)?new ie(t):null},handleClick:cc,handleKeyDown:uc,handleDOMEvents:{beforeinput:dc}}})}const uc=Fl({ArrowLeft:Xr("horiz",-1),ArrowRight:Xr("horiz",1),ArrowUp:Xr("vert",-1),ArrowDown:Xr("vert",1)});function Xr(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let a=r.selection,l=e>0?a.$to:a.$from,o=a.empty;if(a instanceof X){if(!s.endOfTextblock(t)||l.depth==0)return!1;o=!1,l=r.doc.resolve(e>0?l.after():l.before())}let h=ie.findGapCursorFrom(l,e,o);return h?(i&&i(r.tr.setSelection(new ie(h))),!0):!1}}function cc(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!ie.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&W.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new ie(r))),!0)}function dc(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof ie))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=z.empty;for(let a=r.length-1;a>=0;a--)i=z.from(r[a].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new B(i,0,0));return s.setSelection(X.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function fc(n){if(!(n.selection instanceof ie))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ue.create(n.doc,[Pe.widget(n.selection.head,e,{key:"gapcursor"})])}class Ne{constructor(e,t,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new Ne(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class Ve{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new Ve(t,Ne.range(this,e))}}class N{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,i,s,a=t&&t.loc;if(a&&a.start<=a.end){var l=a.lexer.input;i=a.start,s=a.end,i===l.length?r+=" at end of input: ":r+=" at position "+(i+1)+": ";var o=l.slice(i,s).replace(/[^]/g,"$&̲"),h;i>15?h="…"+l.slice(i-15,i):h=l.slice(0,i);var d;s+15<l.length?d=l.slice(s,s+15)+"…":d=l.slice(s),r+=h+o+d}var f=new Error(r);return f.name="ParseError",f.__proto__=N.prototype,f.position=i,i!=null&&s!=null&&(f.length=s-i),f.rawMessage=e,f}}N.prototype.__proto__=Error.prototype;var pc=function(e,t){return e.indexOf(t)!==-1},mc=function(e,t){return e===void 0?t:e},gc=/([A-Z])/g,yc=function(e){return e.replace(gc,"-$1").toLowerCase()},vc={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},bc=/[&><"']/g;function xc(n){return String(n).replace(bc,e=>vc[e])}var Pl=function n(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?n(e.body[0]):e:e.type==="font"?n(e.body):e},wc=function(e){var t=Pl(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},kc=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Sc=function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},F={contains:pc,deflt:mc,escape:xc,hyphenate:yc,getBaseElem:Pl,isCharacterBox:wc,protocolFromUrl:Sc},u0={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:n=>"#"+n},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(n,e)=>(e.push(n),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:n=>Math.max(0,n),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:n=>Math.max(0,n),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:n=>Math.max(0,n),cli:"-e, --max-expand <n>",cliProcessor:n=>n==="Infinity"?1/0:parseInt(n)},globalGroup:{type:"boolean",cli:!1}};function Mc(n){if(n.default)return n.default;var e=n.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class si{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in u0)if(u0.hasOwnProperty(t)){var r=u0[t];this[t]=e[t]!==void 0?r.processor?r.processor(e[t]):e[t]:Mc(r)}}reportNonstrict(e,t,r){var i=this.strict;if(typeof i=="function"&&(i=i(e,t,r)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new N("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),r);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,r){var i=this.strict;if(typeof i=="function")try{i=i(e,t,r)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=F.protocolFromUrl(e.url);if(t==null)return!1;e.protocol=t}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}}class bt{constructor(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}sup(){return Ke[Tc[this.id]]}sub(){return Ke[Cc[this.id]]}fracNum(){return Ke[Ac[this.id]]}fracDen(){return Ke[Nc[this.id]]}cramp(){return Ke[zc[this.id]]}text(){return Ke[Dc[this.id]]}isTight(){return this.size>=2}}var ai=0,w0=1,or=2,ut=3,Fr=4,qe=5,fr=6,be=7,Ke=[new bt(ai,0,!1),new bt(w0,0,!0),new bt(or,1,!1),new bt(ut,1,!0),new bt(Fr,2,!1),new bt(qe,2,!0),new bt(fr,3,!1),new bt(be,3,!0)],Tc=[Fr,qe,Fr,qe,fr,be,fr,be],Cc=[qe,qe,qe,qe,be,be,be,be],Ac=[or,ut,Fr,qe,fr,be,fr,be],Nc=[ut,ut,qe,qe,be,be,be,be],zc=[w0,w0,ut,ut,qe,qe,be,be],Dc=[ai,w0,or,ut,or,ut,or,ut],q={DISPLAY:Ke[ai],TEXT:Ke[or],SCRIPT:Ke[Fr],SCRIPTSCRIPT:Ke[fr]},Rn=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Oc(n){for(var e=0;e<Rn.length;e++)for(var t=Rn[e],r=0;r<t.blocks.length;r++){var i=t.blocks[r];if(n>=i[0]&&n<=i[1])return t.name}return null}var c0=[];Rn.forEach(n=>n.blocks.forEach(e=>c0.push(...e)));function ql(n){for(var e=0;e<c0.length;e+=2)if(n>=c0[e]&&n<=c0[e+1])return!0;return!1}var nr=80,Ec=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Bc=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Rc=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Ic=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},Fc=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},Pc=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},qc=function(e,t,r){var i=r-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},Lc=function(e,t,r){t=1e3*t;var i="";switch(e){case"sqrtMain":i=Ec(t,nr);break;case"sqrtSize1":i=Bc(t,nr);break;case"sqrtSize2":i=Rc(t,nr);break;case"sqrtSize3":i=Ic(t,nr);break;case"sqrtSize4":i=Fc(t,nr);break;case"sqrtTall":i=qc(t,nr,r)}return i},Vc=function(e,t){switch(e){case"⎜":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"∣":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"∥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"⎟":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"⎢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"⎥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"⎪":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"⏐":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"‖":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},Os={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Hc=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Hr{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return F.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var Xe={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Zr={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Es={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Wc(n,e){Xe[n]=e}function li(n,e,t){if(!Xe[e])throw new Error("Font metrics not found for font: "+e+".");var r=n.charCodeAt(0),i=Xe[e][r];if(!i&&n[0]in Es&&(r=Es[n[0]].charCodeAt(0),i=Xe[e][r]),!i&&t==="text"&&ql(r)&&(i=Xe[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var nn={};function Gc(n){var e;if(n>=5?e=0:n>=3?e=1:e=2,!nn[e]){var t=nn[e]={cssEmPerMu:Zr.quad[e]/18};for(var r in Zr)Zr.hasOwnProperty(r)&&(t[r]=Zr[r][e])}return nn[e]}var Jc=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Bs=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Rs=function(e,t){return t.size<2?e:Jc[e-1][t.size-1]};class ot{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||ot.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=Bs[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return new ot(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:Rs(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:Bs[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=Rs(ot.BASESIZE,e);return this.size===t&&this.textSize===ot.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==ot.BASESIZE?["sizing","reset-size"+this.size,"size"+ot.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Gc(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}ot.BASESIZE=6;var In={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},$c={ex:!0,em:!0,mu:!0},Ll=function(e){return typeof e!="string"&&(e=e.unit),e in In||e in $c||e==="ex"},re=function(e,t){var r;if(e.unit in In)r=In[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")r=t.fontMetrics().cssEmPerMu;else{var i;if(t.style.isTight()?i=t.havingStyle(t.style.text()):i=t,e.unit==="ex")r=i.fontMetrics().xHeight;else if(e.unit==="em")r=i.fontMetrics().quad;else throw new N("Invalid unit: '"+e.unit+"'");i!==t&&(r*=i.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},D=function(e){return+e.toFixed(4)+"em"},Ot=function(e){return e.filter(t=>t).join(" ")},Vl=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var i=t.getColor();i&&(this.style.color=i)}},Hl=function(e){var t=document.createElement(e);t.className=Ot(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&t.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)t.appendChild(this.children[s].toNode());return t},Uc=/[\s"'>/=\x00-\x1f]/,Wl=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+F.escape(Ot(this.classes))+'"');var r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=F.hyphenate(i)+":"+this.style[i]+";");r&&(t+=' style="'+F.escape(r)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(Uc.test(s))throw new N("Invalid attribute name '"+s+"'");t+=" "+s+'="'+F.escape(this.attributes[s])+'"'}t+=">";for(var a=0;a<this.children.length;a++)t+=this.children[a].toMarkup();return t+="</"+e+">",t};class Wr{constructor(e,t,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Vl.call(this,e,r,i),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return F.contains(this.classes,e)}toNode(){return Hl.call(this,"span")}toMarkup(){return Wl.call(this,"span")}}class oi{constructor(e,t,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Vl.call(this,t,i),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return F.contains(this.classes,e)}toNode(){return Hl.call(this,"a")}toMarkup(){return Wl.call(this,"a")}}class Kc{constructor(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return F.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+F.escape(this.src)+'"'+(' alt="'+F.escape(this.alt)+'"'),t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=F.hyphenate(r)+":"+this.style[r]+";");return t&&(e+=' style="'+F.escape(t)+'"'),e+="'/>",e}}var Yc={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class He{constructor(e,t,r,i,s,a,l,o){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=i||0,this.skew=s||0,this.width=a||0,this.classes=l||[],this.style=o||{},this.maxFontSize=0;var h=Oc(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=Yc[this.text])}hasClass(e){return F.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=D(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=Ot(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(t=t||document.createElement("span"),t.style[r]=this.style[r]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=F.escape(Ot(this.classes)),t+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=F.hyphenate(i)+":"+this.style[i]+";");r&&(e=!0,t+=' style="'+F.escape(r)+'"');var s=F.escape(this.text);return e?(t+=">",t+=s,t+="</span>",t):s}}class dt{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+F.escape(this.attributes[t])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}}class Et{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",Os[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+F.escape(this.alternate)+'"/>':'<path d="'+F.escape(Os[this.pathName])+'"/>'}}class Fn{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+F.escape(this.attributes[t])+'"');return e+="/>",e}}function Is(n){if(n instanceof He)return n;throw new Error("Expected symbolNode but got "+String(n)+".")}function jc(n){if(n instanceof Wr)return n;throw new Error("Expected span<HtmlDomNode> but got "+String(n)+".")}var Xc={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Zc={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},_={math:{},text:{}};function u(n,e,t,r,i,s){_[n][i]={font:e,group:t,replace:r},s&&r&&(_[n][r]=_[n][i])}var c="math",C="text",p="main",b="ams",ee="accent-token",E="bin",Se="close",mr="inner",P="mathord",he="op-token",Re="open",E0="punct",x="rel",mt="spacing",w="textord";u(c,p,x,"≡","\\equiv",!0);u(c,p,x,"≺","\\prec",!0);u(c,p,x,"≻","\\succ",!0);u(c,p,x,"∼","\\sim",!0);u(c,p,x,"⊥","\\perp");u(c,p,x,"⪯","\\preceq",!0);u(c,p,x,"⪰","\\succeq",!0);u(c,p,x,"≃","\\simeq",!0);u(c,p,x,"∣","\\mid",!0);u(c,p,x,"≪","\\ll",!0);u(c,p,x,"≫","\\gg",!0);u(c,p,x,"≍","\\asymp",!0);u(c,p,x,"∥","\\parallel");u(c,p,x,"⋈","\\bowtie",!0);u(c,p,x,"⌣","\\smile",!0);u(c,p,x,"⊑","\\sqsubseteq",!0);u(c,p,x,"⊒","\\sqsupseteq",!0);u(c,p,x,"≐","\\doteq",!0);u(c,p,x,"⌢","\\frown",!0);u(c,p,x,"∋","\\ni",!0);u(c,p,x,"∝","\\propto",!0);u(c,p,x,"⊢","\\vdash",!0);u(c,p,x,"⊣","\\dashv",!0);u(c,p,x,"∋","\\owns");u(c,p,E0,".","\\ldotp");u(c,p,E0,"⋅","\\cdotp");u(c,p,w,"#","\\#");u(C,p,w,"#","\\#");u(c,p,w,"&","\\&");u(C,p,w,"&","\\&");u(c,p,w,"ℵ","\\aleph",!0);u(c,p,w,"∀","\\forall",!0);u(c,p,w,"ℏ","\\hbar",!0);u(c,p,w,"∃","\\exists",!0);u(c,p,w,"∇","\\nabla",!0);u(c,p,w,"♭","\\flat",!0);u(c,p,w,"ℓ","\\ell",!0);u(c,p,w,"♮","\\natural",!0);u(c,p,w,"♣","\\clubsuit",!0);u(c,p,w,"℘","\\wp",!0);u(c,p,w,"♯","\\sharp",!0);u(c,p,w,"♢","\\diamondsuit",!0);u(c,p,w,"ℜ","\\Re",!0);u(c,p,w,"♡","\\heartsuit",!0);u(c,p,w,"ℑ","\\Im",!0);u(c,p,w,"♠","\\spadesuit",!0);u(c,p,w,"§","\\S",!0);u(C,p,w,"§","\\S");u(c,p,w,"¶","\\P",!0);u(C,p,w,"¶","\\P");u(c,p,w,"†","\\dag");u(C,p,w,"†","\\dag");u(C,p,w,"†","\\textdagger");u(c,p,w,"‡","\\ddag");u(C,p,w,"‡","\\ddag");u(C,p,w,"‡","\\textdaggerdbl");u(c,p,Se,"⎱","\\rmoustache",!0);u(c,p,Re,"⎰","\\lmoustache",!0);u(c,p,Se,"⟯","\\rgroup",!0);u(c,p,Re,"⟮","\\lgroup",!0);u(c,p,E,"∓","\\mp",!0);u(c,p,E,"⊖","\\ominus",!0);u(c,p,E,"⊎","\\uplus",!0);u(c,p,E,"⊓","\\sqcap",!0);u(c,p,E,"∗","\\ast");u(c,p,E,"⊔","\\sqcup",!0);u(c,p,E,"◯","\\bigcirc",!0);u(c,p,E,"∙","\\bullet",!0);u(c,p,E,"‡","\\ddagger");u(c,p,E,"≀","\\wr",!0);u(c,p,E,"⨿","\\amalg");u(c,p,E,"&","\\And");u(c,p,x,"⟵","\\longleftarrow",!0);u(c,p,x,"⇐","\\Leftarrow",!0);u(c,p,x,"⟸","\\Longleftarrow",!0);u(c,p,x,"⟶","\\longrightarrow",!0);u(c,p,x,"⇒","\\Rightarrow",!0);u(c,p,x,"⟹","\\Longrightarrow",!0);u(c,p,x,"↔","\\leftrightarrow",!0);u(c,p,x,"⟷","\\longleftrightarrow",!0);u(c,p,x,"⇔","\\Leftrightarrow",!0);u(c,p,x,"⟺","\\Longleftrightarrow",!0);u(c,p,x,"↦","\\mapsto",!0);u(c,p,x,"⟼","\\longmapsto",!0);u(c,p,x,"↗","\\nearrow",!0);u(c,p,x,"↩","\\hookleftarrow",!0);u(c,p,x,"↪","\\hookrightarrow",!0);u(c,p,x,"↘","\\searrow",!0);u(c,p,x,"↼","\\leftharpoonup",!0);u(c,p,x,"⇀","\\rightharpoonup",!0);u(c,p,x,"↙","\\swarrow",!0);u(c,p,x,"↽","\\leftharpoondown",!0);u(c,p,x,"⇁","\\rightharpoondown",!0);u(c,p,x,"↖","\\nwarrow",!0);u(c,p,x,"⇌","\\rightleftharpoons",!0);u(c,b,x,"≮","\\nless",!0);u(c,b,x,"","\\@nleqslant");u(c,b,x,"","\\@nleqq");u(c,b,x,"⪇","\\lneq",!0);u(c,b,x,"≨","\\lneqq",!0);u(c,b,x,"","\\@lvertneqq");u(c,b,x,"⋦","\\lnsim",!0);u(c,b,x,"⪉","\\lnapprox",!0);u(c,b,x,"⊀","\\nprec",!0);u(c,b,x,"⋠","\\npreceq",!0);u(c,b,x,"⋨","\\precnsim",!0);u(c,b,x,"⪹","\\precnapprox",!0);u(c,b,x,"≁","\\nsim",!0);u(c,b,x,"","\\@nshortmid");u(c,b,x,"∤","\\nmid",!0);u(c,b,x,"⊬","\\nvdash",!0);u(c,b,x,"⊭","\\nvDash",!0);u(c,b,x,"⋪","\\ntriangleleft");u(c,b,x,"⋬","\\ntrianglelefteq",!0);u(c,b,x,"⊊","\\subsetneq",!0);u(c,b,x,"","\\@varsubsetneq");u(c,b,x,"⫋","\\subsetneqq",!0);u(c,b,x,"","\\@varsubsetneqq");u(c,b,x,"≯","\\ngtr",!0);u(c,b,x,"","\\@ngeqslant");u(c,b,x,"","\\@ngeqq");u(c,b,x,"⪈","\\gneq",!0);u(c,b,x,"≩","\\gneqq",!0);u(c,b,x,"","\\@gvertneqq");u(c,b,x,"⋧","\\gnsim",!0);u(c,b,x,"⪊","\\gnapprox",!0);u(c,b,x,"⊁","\\nsucc",!0);u(c,b,x,"⋡","\\nsucceq",!0);u(c,b,x,"⋩","\\succnsim",!0);u(c,b,x,"⪺","\\succnapprox",!0);u(c,b,x,"≆","\\ncong",!0);u(c,b,x,"","\\@nshortparallel");u(c,b,x,"∦","\\nparallel",!0);u(c,b,x,"⊯","\\nVDash",!0);u(c,b,x,"⋫","\\ntriangleright");u(c,b,x,"⋭","\\ntrianglerighteq",!0);u(c,b,x,"","\\@nsupseteqq");u(c,b,x,"⊋","\\supsetneq",!0);u(c,b,x,"","\\@varsupsetneq");u(c,b,x,"⫌","\\supsetneqq",!0);u(c,b,x,"","\\@varsupsetneqq");u(c,b,x,"⊮","\\nVdash",!0);u(c,b,x,"⪵","\\precneqq",!0);u(c,b,x,"⪶","\\succneqq",!0);u(c,b,x,"","\\@nsubseteqq");u(c,b,E,"⊴","\\unlhd");u(c,b,E,"⊵","\\unrhd");u(c,b,x,"↚","\\nleftarrow",!0);u(c,b,x,"↛","\\nrightarrow",!0);u(c,b,x,"⇍","\\nLeftarrow",!0);u(c,b,x,"⇏","\\nRightarrow",!0);u(c,b,x,"↮","\\nleftrightarrow",!0);u(c,b,x,"⇎","\\nLeftrightarrow",!0);u(c,b,x,"△","\\vartriangle");u(c,b,w,"ℏ","\\hslash");u(c,b,w,"▽","\\triangledown");u(c,b,w,"◊","\\lozenge");u(c,b,w,"Ⓢ","\\circledS");u(c,b,w,"®","\\circledR");u(C,b,w,"®","\\circledR");u(c,b,w,"∡","\\measuredangle",!0);u(c,b,w,"∄","\\nexists");u(c,b,w,"℧","\\mho");u(c,b,w,"Ⅎ","\\Finv",!0);u(c,b,w,"⅁","\\Game",!0);u(c,b,w,"‵","\\backprime");u(c,b,w,"▲","\\blacktriangle");u(c,b,w,"▼","\\blacktriangledown");u(c,b,w,"■","\\blacksquare");u(c,b,w,"⧫","\\blacklozenge");u(c,b,w,"★","\\bigstar");u(c,b,w,"∢","\\sphericalangle",!0);u(c,b,w,"∁","\\complement",!0);u(c,b,w,"ð","\\eth",!0);u(C,p,w,"ð","ð");u(c,b,w,"╱","\\diagup");u(c,b,w,"╲","\\diagdown");u(c,b,w,"□","\\square");u(c,b,w,"□","\\Box");u(c,b,w,"◊","\\Diamond");u(c,b,w,"¥","\\yen",!0);u(C,b,w,"¥","\\yen",!0);u(c,b,w,"✓","\\checkmark",!0);u(C,b,w,"✓","\\checkmark");u(c,b,w,"ℶ","\\beth",!0);u(c,b,w,"ℸ","\\daleth",!0);u(c,b,w,"ℷ","\\gimel",!0);u(c,b,w,"ϝ","\\digamma",!0);u(c,b,w,"ϰ","\\varkappa");u(c,b,Re,"┌","\\@ulcorner",!0);u(c,b,Se,"┐","\\@urcorner",!0);u(c,b,Re,"└","\\@llcorner",!0);u(c,b,Se,"┘","\\@lrcorner",!0);u(c,b,x,"≦","\\leqq",!0);u(c,b,x,"⩽","\\leqslant",!0);u(c,b,x,"⪕","\\eqslantless",!0);u(c,b,x,"≲","\\lesssim",!0);u(c,b,x,"⪅","\\lessapprox",!0);u(c,b,x,"≊","\\approxeq",!0);u(c,b,E,"⋖","\\lessdot");u(c,b,x,"⋘","\\lll",!0);u(c,b,x,"≶","\\lessgtr",!0);u(c,b,x,"⋚","\\lesseqgtr",!0);u(c,b,x,"⪋","\\lesseqqgtr",!0);u(c,b,x,"≑","\\doteqdot");u(c,b,x,"≓","\\risingdotseq",!0);u(c,b,x,"≒","\\fallingdotseq",!0);u(c,b,x,"∽","\\backsim",!0);u(c,b,x,"⋍","\\backsimeq",!0);u(c,b,x,"⫅","\\subseteqq",!0);u(c,b,x,"⋐","\\Subset",!0);u(c,b,x,"⊏","\\sqsubset",!0);u(c,b,x,"≼","\\preccurlyeq",!0);u(c,b,x,"⋞","\\curlyeqprec",!0);u(c,b,x,"≾","\\precsim",!0);u(c,b,x,"⪷","\\precapprox",!0);u(c,b,x,"⊲","\\vartriangleleft");u(c,b,x,"⊴","\\trianglelefteq");u(c,b,x,"⊨","\\vDash",!0);u(c,b,x,"⊪","\\Vvdash",!0);u(c,b,x,"⌣","\\smallsmile");u(c,b,x,"⌢","\\smallfrown");u(c,b,x,"≏","\\bumpeq",!0);u(c,b,x,"≎","\\Bumpeq",!0);u(c,b,x,"≧","\\geqq",!0);u(c,b,x,"⩾","\\geqslant",!0);u(c,b,x,"⪖","\\eqslantgtr",!0);u(c,b,x,"≳","\\gtrsim",!0);u(c,b,x,"⪆","\\gtrapprox",!0);u(c,b,E,"⋗","\\gtrdot");u(c,b,x,"⋙","\\ggg",!0);u(c,b,x,"≷","\\gtrless",!0);u(c,b,x,"⋛","\\gtreqless",!0);u(c,b,x,"⪌","\\gtreqqless",!0);u(c,b,x,"≖","\\eqcirc",!0);u(c,b,x,"≗","\\circeq",!0);u(c,b,x,"≜","\\triangleq",!0);u(c,b,x,"∼","\\thicksim");u(c,b,x,"≈","\\thickapprox");u(c,b,x,"⫆","\\supseteqq",!0);u(c,b,x,"⋑","\\Supset",!0);u(c,b,x,"⊐","\\sqsupset",!0);u(c,b,x,"≽","\\succcurlyeq",!0);u(c,b,x,"⋟","\\curlyeqsucc",!0);u(c,b,x,"≿","\\succsim",!0);u(c,b,x,"⪸","\\succapprox",!0);u(c,b,x,"⊳","\\vartriangleright");u(c,b,x,"⊵","\\trianglerighteq");u(c,b,x,"⊩","\\Vdash",!0);u(c,b,x,"∣","\\shortmid");u(c,b,x,"∥","\\shortparallel");u(c,b,x,"≬","\\between",!0);u(c,b,x,"⋔","\\pitchfork",!0);u(c,b,x,"∝","\\varpropto");u(c,b,x,"◀","\\blacktriangleleft");u(c,b,x,"∴","\\therefore",!0);u(c,b,x,"∍","\\backepsilon");u(c,b,x,"▶","\\blacktriangleright");u(c,b,x,"∵","\\because",!0);u(c,b,x,"⋘","\\llless");u(c,b,x,"⋙","\\gggtr");u(c,b,E,"⊲","\\lhd");u(c,b,E,"⊳","\\rhd");u(c,b,x,"≂","\\eqsim",!0);u(c,p,x,"⋈","\\Join");u(c,b,x,"≑","\\Doteq",!0);u(c,b,E,"∔","\\dotplus",!0);u(c,b,E,"∖","\\smallsetminus");u(c,b,E,"⋒","\\Cap",!0);u(c,b,E,"⋓","\\Cup",!0);u(c,b,E,"⩞","\\doublebarwedge",!0);u(c,b,E,"⊟","\\boxminus",!0);u(c,b,E,"⊞","\\boxplus",!0);u(c,b,E,"⋇","\\divideontimes",!0);u(c,b,E,"⋉","\\ltimes",!0);u(c,b,E,"⋊","\\rtimes",!0);u(c,b,E,"⋋","\\leftthreetimes",!0);u(c,b,E,"⋌","\\rightthreetimes",!0);u(c,b,E,"⋏","\\curlywedge",!0);u(c,b,E,"⋎","\\curlyvee",!0);u(c,b,E,"⊝","\\circleddash",!0);u(c,b,E,"⊛","\\circledast",!0);u(c,b,E,"⋅","\\centerdot");u(c,b,E,"⊺","\\intercal",!0);u(c,b,E,"⋒","\\doublecap");u(c,b,E,"⋓","\\doublecup");u(c,b,E,"⊠","\\boxtimes",!0);u(c,b,x,"⇢","\\dashrightarrow",!0);u(c,b,x,"⇠","\\dashleftarrow",!0);u(c,b,x,"⇇","\\leftleftarrows",!0);u(c,b,x,"⇆","\\leftrightarrows",!0);u(c,b,x,"⇚","\\Lleftarrow",!0);u(c,b,x,"↞","\\twoheadleftarrow",!0);u(c,b,x,"↢","\\leftarrowtail",!0);u(c,b,x,"↫","\\looparrowleft",!0);u(c,b,x,"⇋","\\leftrightharpoons",!0);u(c,b,x,"↶","\\curvearrowleft",!0);u(c,b,x,"↺","\\circlearrowleft",!0);u(c,b,x,"↰","\\Lsh",!0);u(c,b,x,"⇈","\\upuparrows",!0);u(c,b,x,"↿","\\upharpoonleft",!0);u(c,b,x,"⇃","\\downharpoonleft",!0);u(c,p,x,"⊶","\\origof",!0);u(c,p,x,"⊷","\\imageof",!0);u(c,b,x,"⊸","\\multimap",!0);u(c,b,x,"↭","\\leftrightsquigarrow",!0);u(c,b,x,"⇉","\\rightrightarrows",!0);u(c,b,x,"⇄","\\rightleftarrows",!0);u(c,b,x,"↠","\\twoheadrightarrow",!0);u(c,b,x,"↣","\\rightarrowtail",!0);u(c,b,x,"↬","\\looparrowright",!0);u(c,b,x,"↷","\\curvearrowright",!0);u(c,b,x,"↻","\\circlearrowright",!0);u(c,b,x,"↱","\\Rsh",!0);u(c,b,x,"⇊","\\downdownarrows",!0);u(c,b,x,"↾","\\upharpoonright",!0);u(c,b,x,"⇂","\\downharpoonright",!0);u(c,b,x,"⇝","\\rightsquigarrow",!0);u(c,b,x,"⇝","\\leadsto");u(c,b,x,"⇛","\\Rrightarrow",!0);u(c,b,x,"↾","\\restriction");u(c,p,w,"‘","`");u(c,p,w,"$","\\$");u(C,p,w,"$","\\$");u(C,p,w,"$","\\textdollar");u(c,p,w,"%","\\%");u(C,p,w,"%","\\%");u(c,p,w,"_","\\_");u(C,p,w,"_","\\_");u(C,p,w,"_","\\textunderscore");u(c,p,w,"∠","\\angle",!0);u(c,p,w,"∞","\\infty",!0);u(c,p,w,"′","\\prime");u(c,p,w,"△","\\triangle");u(c,p,w,"Γ","\\Gamma",!0);u(c,p,w,"Δ","\\Delta",!0);u(c,p,w,"Θ","\\Theta",!0);u(c,p,w,"Λ","\\Lambda",!0);u(c,p,w,"Ξ","\\Xi",!0);u(c,p,w,"Π","\\Pi",!0);u(c,p,w,"Σ","\\Sigma",!0);u(c,p,w,"Υ","\\Upsilon",!0);u(c,p,w,"Φ","\\Phi",!0);u(c,p,w,"Ψ","\\Psi",!0);u(c,p,w,"Ω","\\Omega",!0);u(c,p,w,"A","Α");u(c,p,w,"B","Β");u(c,p,w,"E","Ε");u(c,p,w,"Z","Ζ");u(c,p,w,"H","Η");u(c,p,w,"I","Ι");u(c,p,w,"K","Κ");u(c,p,w,"M","Μ");u(c,p,w,"N","Ν");u(c,p,w,"O","Ο");u(c,p,w,"P","Ρ");u(c,p,w,"T","Τ");u(c,p,w,"X","Χ");u(c,p,w,"¬","\\neg",!0);u(c,p,w,"¬","\\lnot");u(c,p,w,"⊤","\\top");u(c,p,w,"⊥","\\bot");u(c,p,w,"∅","\\emptyset");u(c,b,w,"∅","\\varnothing");u(c,p,P,"α","\\alpha",!0);u(c,p,P,"β","\\beta",!0);u(c,p,P,"γ","\\gamma",!0);u(c,p,P,"δ","\\delta",!0);u(c,p,P,"ϵ","\\epsilon",!0);u(c,p,P,"ζ","\\zeta",!0);u(c,p,P,"η","\\eta",!0);u(c,p,P,"θ","\\theta",!0);u(c,p,P,"ι","\\iota",!0);u(c,p,P,"κ","\\kappa",!0);u(c,p,P,"λ","\\lambda",!0);u(c,p,P,"μ","\\mu",!0);u(c,p,P,"ν","\\nu",!0);u(c,p,P,"ξ","\\xi",!0);u(c,p,P,"ο","\\omicron",!0);u(c,p,P,"π","\\pi",!0);u(c,p,P,"ρ","\\rho",!0);u(c,p,P,"σ","\\sigma",!0);u(c,p,P,"τ","\\tau",!0);u(c,p,P,"υ","\\upsilon",!0);u(c,p,P,"ϕ","\\phi",!0);u(c,p,P,"χ","\\chi",!0);u(c,p,P,"ψ","\\psi",!0);u(c,p,P,"ω","\\omega",!0);u(c,p,P,"ε","\\varepsilon",!0);u(c,p,P,"ϑ","\\vartheta",!0);u(c,p,P,"ϖ","\\varpi",!0);u(c,p,P,"ϱ","\\varrho",!0);u(c,p,P,"ς","\\varsigma",!0);u(c,p,P,"φ","\\varphi",!0);u(c,p,E,"∗","*",!0);u(c,p,E,"+","+");u(c,p,E,"−","-",!0);u(c,p,E,"⋅","\\cdot",!0);u(c,p,E,"∘","\\circ",!0);u(c,p,E,"÷","\\div",!0);u(c,p,E,"±","\\pm",!0);u(c,p,E,"×","\\times",!0);u(c,p,E,"∩","\\cap",!0);u(c,p,E,"∪","\\cup",!0);u(c,p,E,"∖","\\setminus",!0);u(c,p,E,"∧","\\land");u(c,p,E,"∨","\\lor");u(c,p,E,"∧","\\wedge",!0);u(c,p,E,"∨","\\vee",!0);u(c,p,w,"√","\\surd");u(c,p,Re,"⟨","\\langle",!0);u(c,p,Re,"∣","\\lvert");u(c,p,Re,"∥","\\lVert");u(c,p,Se,"?","?");u(c,p,Se,"!","!");u(c,p,Se,"⟩","\\rangle",!0);u(c,p,Se,"∣","\\rvert");u(c,p,Se,"∥","\\rVert");u(c,p,x,"=","=");u(c,p,x,":",":");u(c,p,x,"≈","\\approx",!0);u(c,p,x,"≅","\\cong",!0);u(c,p,x,"≥","\\ge");u(c,p,x,"≥","\\geq",!0);u(c,p,x,"←","\\gets");u(c,p,x,">","\\gt",!0);u(c,p,x,"∈","\\in",!0);u(c,p,x,"","\\@not");u(c,p,x,"⊂","\\subset",!0);u(c,p,x,"⊃","\\supset",!0);u(c,p,x,"⊆","\\subseteq",!0);u(c,p,x,"⊇","\\supseteq",!0);u(c,b,x,"⊈","\\nsubseteq",!0);u(c,b,x,"⊉","\\nsupseteq",!0);u(c,p,x,"⊨","\\models");u(c,p,x,"←","\\leftarrow",!0);u(c,p,x,"≤","\\le");u(c,p,x,"≤","\\leq",!0);u(c,p,x,"<","\\lt",!0);u(c,p,x,"→","\\rightarrow",!0);u(c,p,x,"→","\\to");u(c,b,x,"≱","\\ngeq",!0);u(c,b,x,"≰","\\nleq",!0);u(c,p,mt," ","\\ ");u(c,p,mt," ","\\space");u(c,p,mt," ","\\nobreakspace");u(C,p,mt," ","\\ ");u(C,p,mt," "," ");u(C,p,mt," ","\\space");u(C,p,mt," ","\\nobreakspace");u(c,p,mt,null,"\\nobreak");u(c,p,mt,null,"\\allowbreak");u(c,p,E0,",",",");u(c,p,E0,";",";");u(c,b,E,"⊼","\\barwedge",!0);u(c,b,E,"⊻","\\veebar",!0);u(c,p,E,"⊙","\\odot",!0);u(c,p,E,"⊕","\\oplus",!0);u(c,p,E,"⊗","\\otimes",!0);u(c,p,w,"∂","\\partial",!0);u(c,p,E,"⊘","\\oslash",!0);u(c,b,E,"⊚","\\circledcirc",!0);u(c,b,E,"⊡","\\boxdot",!0);u(c,p,E,"△","\\bigtriangleup");u(c,p,E,"▽","\\bigtriangledown");u(c,p,E,"†","\\dagger");u(c,p,E,"⋄","\\diamond");u(c,p,E,"⋆","\\star");u(c,p,E,"◃","\\triangleleft");u(c,p,E,"▹","\\triangleright");u(c,p,Re,"{","\\{");u(C,p,w,"{","\\{");u(C,p,w,"{","\\textbraceleft");u(c,p,Se,"}","\\}");u(C,p,w,"}","\\}");u(C,p,w,"}","\\textbraceright");u(c,p,Re,"{","\\lbrace");u(c,p,Se,"}","\\rbrace");u(c,p,Re,"[","\\lbrack",!0);u(C,p,w,"[","\\lbrack",!0);u(c,p,Se,"]","\\rbrack",!0);u(C,p,w,"]","\\rbrack",!0);u(c,p,Re,"(","\\lparen",!0);u(c,p,Se,")","\\rparen",!0);u(C,p,w,"<","\\textless",!0);u(C,p,w,">","\\textgreater",!0);u(c,p,Re,"⌊","\\lfloor",!0);u(c,p,Se,"⌋","\\rfloor",!0);u(c,p,Re,"⌈","\\lceil",!0);u(c,p,Se,"⌉","\\rceil",!0);u(c,p,w,"\\","\\backslash");u(c,p,w,"∣","|");u(c,p,w,"∣","\\vert");u(C,p,w,"|","\\textbar",!0);u(c,p,w,"∥","\\|");u(c,p,w,"∥","\\Vert");u(C,p,w,"∥","\\textbardbl");u(C,p,w,"~","\\textasciitilde");u(C,p,w,"\\","\\textbackslash");u(C,p,w,"^","\\textasciicircum");u(c,p,x,"↑","\\uparrow",!0);u(c,p,x,"⇑","\\Uparrow",!0);u(c,p,x,"↓","\\downarrow",!0);u(c,p,x,"⇓","\\Downarrow",!0);u(c,p,x,"↕","\\updownarrow",!0);u(c,p,x,"⇕","\\Updownarrow",!0);u(c,p,he,"∐","\\coprod");u(c,p,he,"⋁","\\bigvee");u(c,p,he,"⋀","\\bigwedge");u(c,p,he,"⨄","\\biguplus");u(c,p,he,"⋂","\\bigcap");u(c,p,he,"⋃","\\bigcup");u(c,p,he,"∫","\\int");u(c,p,he,"∫","\\intop");u(c,p,he,"∬","\\iint");u(c,p,he,"∭","\\iiint");u(c,p,he,"∏","\\prod");u(c,p,he,"∑","\\sum");u(c,p,he,"⨂","\\bigotimes");u(c,p,he,"⨁","\\bigoplus");u(c,p,he,"⨀","\\bigodot");u(c,p,he,"∮","\\oint");u(c,p,he,"∯","\\oiint");u(c,p,he,"∰","\\oiiint");u(c,p,he,"⨆","\\bigsqcup");u(c,p,he,"∫","\\smallint");u(C,p,mr,"…","\\textellipsis");u(c,p,mr,"…","\\mathellipsis");u(C,p,mr,"…","\\ldots",!0);u(c,p,mr,"…","\\ldots",!0);u(c,p,mr,"⋯","\\@cdots",!0);u(c,p,mr,"⋱","\\ddots",!0);u(c,p,w,"⋮","\\varvdots");u(C,p,w,"⋮","\\varvdots");u(c,p,ee,"ˊ","\\acute");u(c,p,ee,"ˋ","\\grave");u(c,p,ee,"¨","\\ddot");u(c,p,ee,"~","\\tilde");u(c,p,ee,"ˉ","\\bar");u(c,p,ee,"˘","\\breve");u(c,p,ee,"ˇ","\\check");u(c,p,ee,"^","\\hat");u(c,p,ee,"⃗","\\vec");u(c,p,ee,"˙","\\dot");u(c,p,ee,"˚","\\mathring");u(c,p,P,"","\\@imath");u(c,p,P,"","\\@jmath");u(c,p,w,"ı","ı");u(c,p,w,"ȷ","ȷ");u(C,p,w,"ı","\\i",!0);u(C,p,w,"ȷ","\\j",!0);u(C,p,w,"ß","\\ss",!0);u(C,p,w,"æ","\\ae",!0);u(C,p,w,"œ","\\oe",!0);u(C,p,w,"ø","\\o",!0);u(C,p,w,"Æ","\\AE",!0);u(C,p,w,"Œ","\\OE",!0);u(C,p,w,"Ø","\\O",!0);u(C,p,ee,"ˊ","\\'");u(C,p,ee,"ˋ","\\`");u(C,p,ee,"ˆ","\\^");u(C,p,ee,"˜","\\~");u(C,p,ee,"ˉ","\\=");u(C,p,ee,"˘","\\u");u(C,p,ee,"˙","\\.");u(C,p,ee,"¸","\\c");u(C,p,ee,"˚","\\r");u(C,p,ee,"ˇ","\\v");u(C,p,ee,"¨",'\\"');u(C,p,ee,"˝","\\H");u(C,p,ee,"◯","\\textcircled");var Gl={"--":!0,"---":!0,"``":!0,"''":!0};u(C,p,w,"–","--",!0);u(C,p,w,"–","\\textendash");u(C,p,w,"—","---",!0);u(C,p,w,"—","\\textemdash");u(C,p,w,"‘","`",!0);u(C,p,w,"‘","\\textquoteleft");u(C,p,w,"’","'",!0);u(C,p,w,"’","\\textquoteright");u(C,p,w,"“","``",!0);u(C,p,w,"“","\\textquotedblleft");u(C,p,w,"”","''",!0);u(C,p,w,"”","\\textquotedblright");u(c,p,w,"°","\\degree",!0);u(C,p,w,"°","\\degree");u(C,p,w,"°","\\textdegree",!0);u(c,p,w,"£","\\pounds");u(c,p,w,"£","\\mathsterling",!0);u(C,p,w,"£","\\pounds");u(C,p,w,"£","\\textsterling",!0);u(c,b,w,"✠","\\maltese");u(C,b,w,"✠","\\maltese");var Fs='0123456789/@."';for(var sn=0;sn<Fs.length;sn++){var Ps=Fs.charAt(sn);u(c,p,w,Ps,Ps)}var qs='0123456789!@*()-=+";:?/.,';for(var an=0;an<qs.length;an++){var Ls=qs.charAt(an);u(C,p,w,Ls,Ls)}var k0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var ln=0;ln<k0.length;ln++){var Qr=k0.charAt(ln);u(c,p,P,Qr,Qr),u(C,p,w,Qr,Qr)}u(c,b,w,"C","ℂ");u(C,b,w,"C","ℂ");u(c,b,w,"H","ℍ");u(C,b,w,"H","ℍ");u(c,b,w,"N","ℕ");u(C,b,w,"N","ℕ");u(c,b,w,"P","ℙ");u(C,b,w,"P","ℙ");u(c,b,w,"Q","ℚ");u(C,b,w,"Q","ℚ");u(c,b,w,"R","ℝ");u(C,b,w,"R","ℝ");u(c,b,w,"Z","ℤ");u(C,b,w,"Z","ℤ");u(c,p,P,"h","ℎ");u(C,p,P,"h","ℎ");var V="";for(var ve=0;ve<k0.length;ve++){var ne=k0.charAt(ve);V=String.fromCharCode(55349,56320+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),V=String.fromCharCode(55349,56372+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),V=String.fromCharCode(55349,56424+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),V=String.fromCharCode(55349,56580+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),V=String.fromCharCode(55349,56684+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),V=String.fromCharCode(55349,56736+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),V=String.fromCharCode(55349,56788+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),V=String.fromCharCode(55349,56840+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),V=String.fromCharCode(55349,56944+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),ve<26&&(V=String.fromCharCode(55349,56632+ve),u(c,p,P,ne,V),u(C,p,w,ne,V),V=String.fromCharCode(55349,56476+ve),u(c,p,P,ne,V),u(C,p,w,ne,V))}V="𝕜";u(c,p,P,"k",V);u(C,p,w,"k",V);for(var Pt=0;Pt<10;Pt++){var xt=Pt.toString();V=String.fromCharCode(55349,57294+Pt),u(c,p,P,xt,V),u(C,p,w,xt,V),V=String.fromCharCode(55349,57314+Pt),u(c,p,P,xt,V),u(C,p,w,xt,V),V=String.fromCharCode(55349,57324+Pt),u(c,p,P,xt,V),u(C,p,w,xt,V),V=String.fromCharCode(55349,57334+Pt),u(c,p,P,xt,V),u(C,p,w,xt,V)}var Pn="ÐÞþ";for(var on=0;on<Pn.length;on++){var _r=Pn.charAt(on);u(c,p,P,_r,_r),u(C,p,w,_r,_r)}var e0=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Vs=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Qc=function(e,t){var r=e.charCodeAt(0),i=e.charCodeAt(1),s=(r-55296)*1024+(i-56320)+65536,a=t==="math"?0:1;if(119808<=s&&s<120484){var l=Math.floor((s-119808)/26);return[e0[l][2],e0[l][a]]}else if(120782<=s&&s<=120831){var o=Math.floor((s-120782)/10);return[Vs[o][2],Vs[o][a]]}else{if(s===120485||s===120486)return[e0[0][2],e0[0][a]];if(120486<s&&s<120782)return["",""];throw new N("Unsupported character: "+e)}},B0=function(e,t,r){return _[r][e]&&_[r][e].replace&&(e=_[r][e].replace),{value:e,metrics:li(e,t,r)}},Je=function(e,t,r,i,s){var a=B0(e,t,r),l=a.metrics;e=a.value;var o;if(l){var h=l.italic;(r==="text"||i&&i.font==="mathit")&&(h=0),o=new He(e,l.height,l.depth,h,l.skew,l.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+r+"'")),o=new He(e,0,0,0,0,0,s);if(i){o.maxFontSize=i.sizeMultiplier,i.style.isTight()&&o.classes.push("mtight");var d=i.getColor();d&&(o.style.color=d)}return o},_c=function(e,t,r,i){return i===void 0&&(i=[]),r.font==="boldsymbol"&&B0(e,"Main-Bold",t).metrics?Je(e,"Main-Bold",t,r,i.concat(["mathbf"])):e==="\\"||_[t][e].font==="main"?Je(e,"Main-Regular",t,r,i):Je(e,"AMS-Regular",t,r,i.concat(["amsrm"]))},ed=function(e,t,r,i,s){return s!=="textord"&&B0(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},td=function(e,t,r){var i=e.mode,s=e.text,a=["mord"],l=i==="math"||i==="text"&&t.font,o=l?t.font:t.fontFamily,h="",d="";if(s.charCodeAt(0)===55349&&([h,d]=Qc(s,i)),h.length>0)return Je(s,h,i,t,a.concat(d));if(o){var f,g;if(o==="boldsymbol"){var y=ed(s,i,t,a,r);f=y.fontName,g=[y.fontClass]}else l?(f=Ul[o].fontName,g=[o]):(f=t0(o,t.fontWeight,t.fontShape),g=[o,t.fontWeight,t.fontShape]);if(B0(s,f,i).metrics)return Je(s,f,i,t,a.concat(g));if(Gl.hasOwnProperty(s)&&f.slice(0,10)==="Typewriter"){for(var v=[],k=0;k<s.length;k++)v.push(Je(s[k],f,i,t,a.concat(g)));return $l(v)}}if(r==="mathord")return Je(s,"Math-Italic",i,t,a.concat(["mathnormal"]));if(r==="textord"){var M=_[i][s]&&_[i][s].font;if(M==="ams"){var T=t0("amsrm",t.fontWeight,t.fontShape);return Je(s,T,i,t,a.concat("amsrm",t.fontWeight,t.fontShape))}else if(M==="main"||!M){var R=t0("textrm",t.fontWeight,t.fontShape);return Je(s,R,i,t,a.concat(t.fontWeight,t.fontShape))}else{var L=t0(M,t.fontWeight,t.fontShape);return Je(s,L,i,t,a.concat(L,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},rd=(n,e)=>{if(Ot(n.classes)!==Ot(e.classes)||n.skew!==e.skew||n.maxFontSize!==e.maxFontSize)return!1;if(n.classes.length===1){var t=n.classes[0];if(t==="mbin"||t==="mord")return!1}for(var r in n.style)if(n.style.hasOwnProperty(r)&&n.style[r]!==e.style[r])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&n.style[i]!==e.style[i])return!1;return!0},nd=n=>{for(var e=0;e<n.length-1;e++){var t=n[e],r=n[e+1];t instanceof He&&r instanceof He&&rd(t,r)&&(t.text+=r.text,t.height=Math.max(t.height,r.height),t.depth=Math.max(t.depth,r.depth),t.italic=r.italic,n.splice(e+1,1),e--)}return n},hi=function(e){for(var t=0,r=0,i=0,s=0;s<e.children.length;s++){var a=e.children[s];a.height>t&&(t=a.height),a.depth>r&&(r=a.depth),a.maxFontSize>i&&(i=a.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=i},Te=function(e,t,r,i){var s=new Wr(e,t,r,i);return hi(s),s},Jl=(n,e,t,r)=>new Wr(n,e,t,r),id=function(e,t,r){var i=Te([e],[],t);return i.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),i.style.borderBottomWidth=D(i.height),i.maxFontSize=1,i},sd=function(e,t,r,i){var s=new oi(e,t,r,i);return hi(s),s},$l=function(e){var t=new Hr(e);return hi(t),t},ad=function(e,t){return e instanceof Hr?Te([],[e],t):e},ld=function(e){if(e.positionType==="individualShift"){for(var t=e.children,r=[t[0]],i=-t[0].shift-t[0].elem.depth,s=i,a=1;a<t.length;a++){var l=-t[a].shift-s-t[a].elem.depth,o=l-(t[a-1].elem.height+t[a-1].elem.depth);s=s+l,r.push({type:"kern",size:o}),r.push(t[a])}return{children:r,depth:i}}var h;if(e.positionType==="top"){for(var d=e.positionData,f=0;f<e.children.length;f++){var g=e.children[f];d-=g.type==="kern"?g.size:g.elem.height+g.elem.depth}h=d}else if(e.positionType==="bottom")h=-e.positionData;else{var y=e.children[0];if(y.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-y.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-y.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},od=function(e,t){for(var{children:r,depth:i}=ld(e),s=0,a=0;a<r.length;a++){var l=r[a];if(l.type==="elem"){var o=l.elem;s=Math.max(s,o.maxFontSize,o.height)}}s+=2;var h=Te(["pstrut"],[]);h.style.height=D(s);for(var d=[],f=i,g=i,y=i,v=0;v<r.length;v++){var k=r[v];if(k.type==="kern")y+=k.size;else{var M=k.elem,T=k.wrapperClasses||[],R=k.wrapperStyle||{},L=Te(T,[h,M],void 0,R);L.style.top=D(-s-y-M.depth),k.marginLeft&&(L.style.marginLeft=k.marginLeft),k.marginRight&&(L.style.marginRight=k.marginRight),d.push(L),y+=M.height+M.depth}f=Math.min(f,y),g=Math.max(g,y)}var $=Te(["vlist"],d);$.style.height=D(g);var H;if(f<0){var G=Te([],[]),U=Te(["vlist"],[G]);U.style.height=D(-f);var Z=Te(["vlist-s"],[new He("​")]);H=[Te(["vlist-r"],[$,Z]),Te(["vlist-r"],[U])]}else H=[Te(["vlist-r"],[$])];var I=Te(["vlist-t"],H);return H.length===2&&I.classes.push("vlist-t2"),I.height=g,I.depth=-f,I},hd=(n,e)=>{var t=Te(["mspace"],[],e),r=re(n,e);return t.style.marginRight=D(r),t},t0=function(e,t,r){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var s;return t==="textbf"&&r==="textit"?s="BoldItalic":t==="textbf"?s="Bold":t==="textit"?s="Italic":s="Regular",i+"-"+s},Ul={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Kl={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},ud=function(e,t){var[r,i,s]=Kl[e],a=new Et(r),l=new dt([a],{width:D(i),height:D(s),style:"width:"+D(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),o=Jl(["overlay"],[l],t);return o.height=s,o.style.height=D(s),o.style.width=D(i),o},S={fontMap:Ul,makeSymbol:Je,mathsym:_c,makeSpan:Te,makeSvgSpan:Jl,makeLineSpan:id,makeAnchor:sd,makeFragment:$l,wrapFragment:ad,makeVList:od,makeOrd:td,makeGlue:hd,staticSvg:ud,svgData:Kl,tryCombineChars:nd},te={number:3,unit:"mu"},qt={number:4,unit:"mu"},st={number:5,unit:"mu"},cd={mord:{mop:te,mbin:qt,mrel:st,minner:te},mop:{mord:te,mop:te,mrel:st,minner:te},mbin:{mord:qt,mop:qt,mopen:qt,minner:qt},mrel:{mord:st,mop:st,mopen:st,minner:st},mopen:{},mclose:{mop:te,mbin:qt,mrel:st,minner:te},mpunct:{mord:te,mop:te,mrel:st,mopen:te,mclose:te,mpunct:te,minner:te},minner:{mord:te,mop:te,mbin:qt,mrel:st,mopen:te,mpunct:te,minner:te}},dd={mord:{mop:te},mop:{mord:te,mop:te},mbin:{},mrel:{},mopen:{},mclose:{mop:te},mpunct:{},minner:{mop:te}},Yl={},S0={},M0={};function O(n){for(var{type:e,names:t,props:r,handler:i,htmlBuilder:s,mathmlBuilder:a}=n,l={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},o=0;o<t.length;++o)Yl[t[o]]=l;e&&(s&&(S0[e]=s),a&&(M0[e]=a))}function jt(n){var{type:e,htmlBuilder:t,mathmlBuilder:r}=n;O({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:r})}var T0=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ae=function(e){return e.type==="ordgroup"?e.body:[e]},ft=S.makeSpan,fd=["leftmost","mbin","mopen","mrel","mop","mpunct"],pd=["rightmost","mrel","mclose","mpunct"],md={display:q.DISPLAY,text:q.TEXT,script:q.SCRIPT,scriptscript:q.SCRIPTSCRIPT},gd={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ce=function(e,t,r,i){i===void 0&&(i=[null,null]);for(var s=[],a=0;a<e.length;a++){var l=Y(e[a],t);if(l instanceof Hr){var o=l.children;s.push(...o)}else s.push(l)}if(S.tryCombineChars(s),!r)return s;var h=t;if(e.length===1){var d=e[0];d.type==="sizing"?h=t.havingSize(d.size):d.type==="styling"&&(h=t.havingStyle(md[d.style]))}var f=ft([i[0]||"leftmost"],[],t),g=ft([i[1]||"rightmost"],[],t),y=r==="root";return Hs(s,(v,k)=>{var M=k.classes[0],T=v.classes[0];M==="mbin"&&F.contains(pd,T)?k.classes[0]="mord":T==="mbin"&&F.contains(fd,M)&&(v.classes[0]="mord")},{node:f},g,y),Hs(s,(v,k)=>{var M=qn(k),T=qn(v),R=M&&T?v.hasClass("mtight")?dd[M][T]:cd[M][T]:null;if(R)return S.makeGlue(R,h)},{node:f},g,y),s},Hs=function n(e,t,r,i,s){i&&e.push(i);for(var a=0;a<e.length;a++){var l=e[a],o=jl(l);if(o){n(o.children,t,r,null,s);continue}var h=!l.hasClass("mspace");if(h){var d=t(l,r.node);d&&(r.insertAfter?r.insertAfter(d):(e.unshift(d),a++))}h?r.node=l:s&&l.hasClass("newline")&&(r.node=ft(["leftmost"])),r.insertAfter=(f=>g=>{e.splice(f+1,0,g),a++})(a)}i&&e.pop()},jl=function(e){return e instanceof Hr||e instanceof oi||e instanceof Wr&&e.hasClass("enclosing")?e:null},yd=function n(e,t){var r=jl(e);if(r){var i=r.children;if(i.length){if(t==="right")return n(i[i.length-1],"right");if(t==="left")return n(i[0],"left")}}return e},qn=function(e,t){return e?(t&&(e=yd(e,t)),gd[e.classes[0]]||null):null},Pr=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return ft(t.concat(r))},Y=function(e,t,r){if(!e)return ft();if(S0[e.type]){var i=S0[e.type](e,t);if(r&&t.size!==r.size){i=ft(t.sizingClasses(r),[i],t);var s=t.sizeMultiplier/r.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new N("Got group of unknown type: '"+e.type+"'")};function r0(n,e){var t=ft(["base"],n,e),r=ft(["strut"]);return r.style.height=D(t.height+t.depth),t.depth&&(r.style.verticalAlign=D(-t.depth)),t.children.unshift(r),t}function Ln(n,e){var t=null;n.length===1&&n[0].type==="tag"&&(t=n[0].tag,n=n[0].body);var r=ce(n,e,"root"),i;r.length===2&&r[1].hasClass("tag")&&(i=r.pop());for(var s=[],a=[],l=0;l<r.length;l++)if(a.push(r[l]),r[l].hasClass("mbin")||r[l].hasClass("mrel")||r[l].hasClass("allowbreak")){for(var o=!1;l<r.length-1&&r[l+1].hasClass("mspace")&&!r[l+1].hasClass("newline");)l++,a.push(r[l]),r[l].hasClass("nobreak")&&(o=!0);o||(s.push(r0(a,e)),a=[])}else r[l].hasClass("newline")&&(a.pop(),a.length>0&&(s.push(r0(a,e)),a=[]),s.push(r[l]));a.length>0&&s.push(r0(a,e));var h;t?(h=r0(ce(t,e,!0)),h.classes=["tag"],s.push(h)):i&&s.push(i);var d=ft(["katex-html"],s);if(d.setAttribute("aria-hidden","true"),h){var f=h.children[0];f.style.height=D(d.height+d.depth),d.depth&&(f.style.verticalAlign=D(-d.depth))}return d}function Xl(n){return new Hr(n)}class Oe{constructor(e,t,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=r||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=Ot(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof Ze&&this.children[r+1]instanceof Ze){for(var i=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof Ze;)i+=this.children[++r].toText();e.appendChild(new Ze(i).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=F.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+F.escape(Ot(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Ze{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return F.escape(this.toText())}toText(){return this.text}}class vd{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character=" ":e>=.1666&&e<=.1667?this.character=" ":e>=.2222&&e<=.2223?this.character=" ":e>=.2777&&e<=.2778?this.character="  ":e>=-.05556&&e<=-.05555?this.character=" ⁣":e>=-.1667&&e<=-.1666?this.character=" ⁣":e>=-.2223&&e<=-.2222?this.character=" ⁣":e>=-.2778&&e<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",D(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+D(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var A={MathNode:Oe,TextNode:Ze,SpaceNode:vd,newDocumentFragment:Xl},We=function(e,t,r){return _[t][e]&&_[t][e].replace&&e.charCodeAt(0)!==55349&&!(Gl.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=_[t][e].replace),new A.TextNode(e)},ui=function(e){return e.length===1?e[0]:new A.MathNode("mrow",e)},ci=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var r=t.font;if(!r||r==="mathnormal")return null;var i=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=e.text;if(F.contains(["\\imath","\\jmath"],s))return null;_[i][s]&&_[i][s].replace&&(s=_[i][s].replace);var a=S.fontMap[r].fontName;return li(s,a,i)?S.fontMap[r].variant:null};function hn(n){if(!n)return!1;if(n.type==="mi"&&n.children.length===1){var e=n.children[0];return e instanceof Ze&&e.text==="."}else if(n.type==="mo"&&n.children.length===1&&n.getAttribute("separator")==="true"&&n.getAttribute("lspace")==="0em"&&n.getAttribute("rspace")==="0em"){var t=n.children[0];return t instanceof Ze&&t.text===","}else return!1}var Ae=function(e,t,r){if(e.length===1){var i=Q(e[0],t);return r&&i instanceof Oe&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],a,l=0;l<e.length;l++){var o=Q(e[l],t);if(o instanceof Oe&&a instanceof Oe){if(o.type==="mtext"&&a.type==="mtext"&&o.getAttribute("mathvariant")===a.getAttribute("mathvariant")){a.children.push(...o.children);continue}else if(o.type==="mn"&&a.type==="mn"){a.children.push(...o.children);continue}else if(hn(o)&&a.type==="mn"){a.children.push(...o.children);continue}else if(o.type==="mn"&&hn(a))o.children=[...a.children,...o.children],s.pop();else if((o.type==="msup"||o.type==="msub")&&o.children.length>=1&&(a.type==="mn"||hn(a))){var h=o.children[0];h instanceof Oe&&h.type==="mn"&&(h.children=[...a.children,...h.children],s.pop())}else if(a.type==="mi"&&a.children.length===1){var d=a.children[0];if(d instanceof Ze&&d.text==="̸"&&(o.type==="mo"||o.type==="mi"||o.type==="mn")){var f=o.children[0];f instanceof Ze&&f.text.length>0&&(f.text=f.text.slice(0,1)+"̸"+f.text.slice(1),s.pop())}}}s.push(o),a=o}return s},Bt=function(e,t,r){return ui(Ae(e,t,r))},Q=function(e,t){if(!e)return new A.MathNode("mrow");if(M0[e.type]){var r=M0[e.type](e,t);return r}else throw new N("Got group of unknown type: '"+e.type+"'")};function Ws(n,e,t,r,i){var s=Ae(n,t),a;s.length===1&&s[0]instanceof Oe&&F.contains(["mrow","mtable"],s[0].type)?a=s[0]:a=new A.MathNode("mrow",s);var l=new A.MathNode("annotation",[new A.TextNode(e)]);l.setAttribute("encoding","application/x-tex");var o=new A.MathNode("semantics",[a,l]),h=new A.MathNode("math",[o]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&h.setAttribute("display","block");var d=i?"katex":"katex-mathml";return S.makeSpan([d],[h])}var Zl=function(e){return new ot({style:e.displayMode?q.DISPLAY:q.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Ql=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=S.makeSpan(r,[e])}return e},bd=function(e,t,r){var i=Zl(r),s;if(r.output==="mathml")return Ws(e,t,i,r.displayMode,!0);if(r.output==="html"){var a=Ln(e,i);s=S.makeSpan(["katex"],[a])}else{var l=Ws(e,t,i,r.displayMode,!1),o=Ln(e,i);s=S.makeSpan(["katex"],[l,o])}return Ql(s,r)},xd=function(e,t,r){var i=Zl(r),s=Ln(e,i),a=S.makeSpan(["katex"],[s]);return Ql(a,r)},wd={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},kd=function(e){var t=new A.MathNode("mo",[new A.TextNode(wd[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},Sd={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Md=function(e){return e.type==="ordgroup"?e.body.length:1},Td=function(e,t){function r(){var l=4e5,o=e.label.slice(1);if(F.contains(["widehat","widecheck","widetilde","utilde"],o)){var h=e,d=Md(h.base),f,g,y;if(d>5)o==="widehat"||o==="widecheck"?(f=420,l=2364,y=.42,g=o+"4"):(f=312,l=2340,y=.34,g="tilde4");else{var v=[1,1,2,2,3,3][d];o==="widehat"||o==="widecheck"?(l=[0,1062,2364,2364,2364][v],f=[0,239,300,360,420][v],y=[0,.24,.3,.3,.36,.42][v],g=o+v):(l=[0,600,1033,2339,2340][v],f=[0,260,286,306,312][v],y=[0,.26,.286,.3,.306,.34][v],g="tilde"+v)}var k=new Et(g),M=new dt([k],{width:"100%",height:D(y),viewBox:"0 0 "+l+" "+f,preserveAspectRatio:"none"});return{span:S.makeSvgSpan([],[M],t),minWidth:0,height:y}}else{var T=[],R=Sd[o],[L,$,H]=R,G=H/1e3,U=L.length,Z,I;if(U===1){var de=R[3];Z=["hide-tail"],I=[de]}else if(U===2)Z=["halfarrow-left","halfarrow-right"],I=["xMinYMin","xMaxYMin"];else if(U===3)Z=["brace-left","brace-center","brace-right"],I=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+U+" children.");for(var le=0;le<U;le++){var se=new Et(L[le]),Ft=new dt([se],{width:"400em",height:D(G),viewBox:"0 0 "+l+" "+H,preserveAspectRatio:I[le]+" slice"}),Me=S.makeSvgSpan([Z[le]],[Ft],t);if(U===1)return{span:Me,minWidth:$,height:G};Me.style.height=D(G),T.push(Me)}return{span:S.makeSpan(["stretchy"],T,t),minWidth:$,height:G}}}var{span:i,minWidth:s,height:a}=r();return i.height=a,i.style.height=D(a),s>0&&(i.style.minWidth=D(s)),i},Cd=function(e,t,r,i,s){var a,l=e.height+e.depth+r+i;if(/fbox|color|angl/.test(t)){if(a=S.makeSpan(["stretchy",t],[],s),t==="fbox"){var o=s.color&&s.getColor();o&&(a.style.borderColor=o)}}else{var h=[];/^[bx]cancel$/.test(t)&&h.push(new Fn({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&h.push(new Fn({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new dt(h,{width:"100%",height:D(l)});a=S.makeSvgSpan([],[d],s)}return a.height=l,a.style.height=D(l),a},pt={encloseSpan:Cd,mathMLnode:kd,svgSpan:Td};function J(n,e){if(!n||n.type!==e)throw new Error("Expected node of type "+e+", but got "+(n?"node of type "+n.type:String(n)));return n}function di(n){var e=R0(n);if(!e)throw new Error("Expected node of symbol group type, but got "+(n?"node of type "+n.type:String(n)));return e}function R0(n){return n&&(n.type==="atom"||Zc.hasOwnProperty(n.type))?n:null}var fi=(n,e)=>{var t,r,i;n&&n.type==="supsub"?(r=J(n.base,"accent"),t=r.base,n.base=t,i=jc(Y(n,e)),n.base=r):(r=J(n,"accent"),t=r.base);var s=Y(t,e.havingCrampedStyle()),a=r.isShifty&&F.isCharacterBox(t),l=0;if(a){var o=F.getBaseElem(t),h=Y(o,e.havingCrampedStyle());l=Is(h).skew}var d=r.label==="\\c",f=d?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),g;if(r.isStretchy)g=pt.svgSpan(r,e),g=S.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:g,wrapperClasses:["svg-align"],wrapperStyle:l>0?{width:"calc(100% - "+D(2*l)+")",marginLeft:D(2*l)}:void 0}]},e);else{var y,v;r.label==="\\vec"?(y=S.staticSvg("vec",e),v=S.svgData.vec[1]):(y=S.makeOrd({mode:r.mode,text:r.label},e,"textord"),y=Is(y),y.italic=0,v=y.width,d&&(f+=y.depth)),g=S.makeSpan(["accent-body"],[y]);var k=r.label==="\\textcircled";k&&(g.classes.push("accent-full"),f=s.height);var M=l;k||(M-=v/2),g.style.left=D(M),r.label==="\\textcircled"&&(g.style.top=".2em"),g=S.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-f},{type:"elem",elem:g}]},e)}var T=S.makeSpan(["mord","accent"],[g],e);return i?(i.children[0]=T,i.height=Math.max(T.height,i.height),i.classes[0]="mord",i):T},_l=(n,e)=>{var t=n.isStretchy?pt.mathMLnode(n.label):new A.MathNode("mo",[We(n.label,n.mode)]),r=new A.MathNode("mover",[Q(n.base,e),t]);return r.setAttribute("accent","true"),r},Ad=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(n=>"\\"+n).join("|"));O({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(n,e)=>{var t=T0(e[0]),r=!Ad.test(n.funcName),i=!r||n.funcName==="\\widehat"||n.funcName==="\\widetilde"||n.funcName==="\\widecheck";return{type:"accent",mode:n.parser.mode,label:n.funcName,isStretchy:r,isShifty:i,base:t}},htmlBuilder:fi,mathmlBuilder:_l});O({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(n,e)=>{var t=e[0],r=n.parser.mode;return r==="math"&&(n.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+n.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:n.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:fi,mathmlBuilder:_l});O({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0];return{type:"accentUnder",mode:t.mode,label:r,base:i}},htmlBuilder:(n,e)=>{var t=Y(n.base,e),r=pt.svgSpan(n,e),i=n.label==="\\utilde"?.12:0,s=S.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:t}]},e);return S.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(n,e)=>{var t=pt.mathMLnode(n.label),r=new A.MathNode("munder",[Q(n.base,e),t]);return r.setAttribute("accentunder","true"),r}});var n0=n=>{var e=new A.MathNode("mpadded",n?[n]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};O({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,t){var{parser:r,funcName:i}=n;return{type:"xArrow",mode:r.mode,label:i,body:e[0],below:t[0]}},htmlBuilder(n,e){var t=e.style,r=e.havingStyle(t.sup()),i=S.wrapFragment(Y(n.body,r,e),e),s=n.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var a;n.below&&(r=e.havingStyle(t.sub()),a=S.wrapFragment(Y(n.below,r,e),e),a.classes.push(s+"-arrow-pad"));var l=pt.svgSpan(n,e),o=-e.fontMetrics().axisHeight+.5*l.height,h=-e.fontMetrics().axisHeight-.5*l.height-.111;(i.depth>.25||n.label==="\\xleftequilibrium")&&(h-=i.depth);var d;if(a){var f=-e.fontMetrics().axisHeight+a.height+.5*l.height+.111;d=S.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:l,shift:o},{type:"elem",elem:a,shift:f}]},e)}else d=S.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:l,shift:o}]},e);return d.children[0].children[0].children[1].classes.push("svg-align"),S.makeSpan(["mrel","x-arrow"],[d],e)},mathmlBuilder(n,e){var t=pt.mathMLnode(n.label);t.setAttribute("minsize",n.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(n.body){var i=n0(Q(n.body,e));if(n.below){var s=n0(Q(n.below,e));r=new A.MathNode("munderover",[t,s,i])}else r=new A.MathNode("mover",[t,i])}else if(n.below){var a=n0(Q(n.below,e));r=new A.MathNode("munder",[t,a])}else r=n0(),r=new A.MathNode("mover",[t,r]);return r}});var Nd=S.makeSpan;function eo(n,e){var t=ce(n.body,e,!0);return Nd([n.mclass],t,e)}function to(n,e){var t,r=Ae(n.body,e);return n.mclass==="minner"?t=new A.MathNode("mpadded",r):n.mclass==="mord"?n.isCharacterBox?(t=r[0],t.type="mi"):t=new A.MathNode("mi",r):(n.isCharacterBox?(t=r[0],t.type="mo"):t=new A.MathNode("mo",r),n.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):n.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):n.mclass==="mopen"||n.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):n.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}O({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+r.slice(5),body:ae(i),isCharacterBox:F.isCharacterBox(i)}},htmlBuilder:eo,mathmlBuilder:to});var I0=n=>{var e=n.type==="ordgroup"&&n.body.length?n.body[0]:n;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};O({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(n,e){var{parser:t}=n;return{type:"mclass",mode:t.mode,mclass:I0(e[0]),body:ae(e[1]),isCharacterBox:F.isCharacterBox(e[1])}}});O({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(n,e){var{parser:t,funcName:r}=n,i=e[1],s=e[0],a;r!=="\\stackrel"?a=I0(i):a="mrel";var l={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:ae(i)},o={type:"supsub",mode:s.mode,base:l,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:t.mode,mclass:a,body:[o],isCharacterBox:F.isCharacterBox(o)}},htmlBuilder:eo,mathmlBuilder:to});O({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"pmb",mode:t.mode,mclass:I0(e[0]),body:ae(e[0])}},htmlBuilder(n,e){var t=ce(n.body,e,!0),r=S.makeSpan([n.mclass],t,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(n,e){var t=Ae(n.body,e),r=new A.MathNode("mstyle",t);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var zd={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Gs=()=>({type:"styling",body:[],mode:"math",style:"display"}),Js=n=>n.type==="textord"&&n.text==="@",Dd=(n,e)=>(n.type==="mathord"||n.type==="atom")&&n.text===e;function Od(n,e,t){var r=zd[n];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=t.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},a=t.callFunction("\\Big",[s],[]),l=t.callFunction("\\\\cdright",[e[1]],[]),o={type:"ordgroup",mode:"math",body:[i,a,l]};return t.callFunction("\\\\cdparent",[o],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Ed(n){var e=[];for(n.gullet.beginGroup(),n.gullet.macros.set("\\cr","\\\\\\relax"),n.gullet.beginGroup();;){e.push(n.parseExpression(!1,"\\\\")),n.gullet.endGroup(),n.gullet.beginGroup();var t=n.fetch().text;if(t==="&"||t==="\\\\")n.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new N("Expected \\\\ or \\cr or \\end",n.nextToken)}for(var r=[],i=[r],s=0;s<e.length;s++){for(var a=e[s],l=Gs(),o=0;o<a.length;o++)if(!Js(a[o]))l.body.push(a[o]);else{r.push(l),o+=1;var h=di(a[o]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var f=0;f<2;f++){for(var g=!0,y=o+1;y<a.length;y++){if(Dd(a[y],h)){g=!1,o=y;break}if(Js(a[y]))throw new N("Missing a "+h+" character to complete a CD arrow.",a[y]);d[f].body.push(a[y])}if(g)throw new N("Missing a "+h+" character to complete a CD arrow.",a[o])}else throw new N('Expected one of "<>AV=|." after @',a[o]);var v=Od(h,d,n),k={type:"styling",body:[v],mode:"math",style:"display"};r.push(k),l=Gs()}s%2===0?r.push(l):r.shift(),r=[],i.push(r)}n.gullet.endGroup(),n.gullet.endGroup();var M=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:M,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}O({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:r}=n;return{type:"cdlabel",mode:t.mode,side:r.slice(4),label:e[0]}},htmlBuilder(n,e){var t=e.havingStyle(e.style.sup()),r=S.wrapFragment(Y(n.label,t,e),e);return r.classes.push("cd-label-"+n.side),r.style.bottom=D(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(n,e){var t=new A.MathNode("mrow",[Q(n.label,e)]);return t=new A.MathNode("mpadded",[t]),t.setAttribute("width","0"),n.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new A.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});O({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(n,e){var{parser:t}=n;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(n,e){var t=S.wrapFragment(Y(n.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(n,e){return new A.MathNode("mrow",[Q(n.fragment,e)])}});O({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(n,e){for(var{parser:t}=n,r=J(e[0],"ordgroup"),i=r.body,s="",a=0;a<i.length;a++){var l=J(i[a],"textord");s+=l.text}var o=parseInt(s),h;if(isNaN(o))throw new N("\\@char has non-numeric argument "+s);if(o<0||o>=1114111)throw new N("\\@char with invalid code point "+s);return o<=65535?h=String.fromCharCode(o):(o-=65536,h=String.fromCharCode((o>>10)+55296,(o&1023)+56320)),{type:"textord",mode:t.mode,text:h}}});var ro=(n,e)=>{var t=ce(n.body,e.withColor(n.color),!1);return S.makeFragment(t)},no=(n,e)=>{var t=Ae(n.body,e.withColor(n.color)),r=new A.MathNode("mstyle",t);return r.setAttribute("mathcolor",n.color),r};O({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(n,e){var{parser:t}=n,r=J(e[0],"color-token").color,i=e[1];return{type:"color",mode:t.mode,color:r,body:ae(i)}},htmlBuilder:ro,mathmlBuilder:no});O({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(n,e){var{parser:t,breakOnTokenText:r}=n,i=J(e[0],"color-token").color;t.gullet.macros.set("\\current@color",i);var s=t.parseExpression(!0,r);return{type:"color",mode:t.mode,color:i,body:s}},htmlBuilder:ro,mathmlBuilder:no});O({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(n,e,t){var{parser:r}=n,i=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:i&&J(i,"size").value}},htmlBuilder(n,e){var t=S.makeSpan(["mspace"],[],e);return n.newLine&&(t.classes.push("newline"),n.size&&(t.style.marginTop=D(re(n.size,e)))),t},mathmlBuilder(n,e){var t=new A.MathNode("mspace");return n.newLine&&(t.setAttribute("linebreak","newline"),n.size&&t.setAttribute("height",D(re(n.size,e)))),t}});var Vn={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},io=n=>{var e=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new N("Expected a control sequence",n);return e},Bd=n=>{var e=n.gullet.popToken();return e.text==="="&&(e=n.gullet.popToken(),e.text===" "&&(e=n.gullet.popToken())),e},so=(n,e,t,r)=>{var i=n.gullet.macros.get(t.text);i==null&&(t.noexpand=!0,i={tokens:[t],numArgs:0,unexpandable:!n.gullet.isExpandable(t.text)}),n.gullet.macros.set(e,i,r)};O({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(n){var{parser:e,funcName:t}=n;e.consumeSpaces();var r=e.fetch();if(Vn[r.text])return(t==="\\global"||t==="\\\\globallong")&&(r.text=Vn[r.text]),J(e.parseFunction(),"internal");throw new N("Invalid token after macro prefix",r)}});O({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,r=e.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new N("Expected a control sequence",r);for(var s=0,a,l=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){a=e.gullet.future(),l[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new N('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new N('Argument number "'+r.text+'" out of order');s++,l.push([])}else{if(r.text==="EOF")throw new N("Expected a macro definition");l[s].push(r.text)}var{tokens:o}=e.gullet.consumeArg();return a&&o.unshift(a),(t==="\\edef"||t==="\\xdef")&&(o=e.gullet.expandTokens(o),o.reverse()),e.gullet.macros.set(i,{tokens:o,numArgs:s,delimiters:l},t===Vn[t]),{type:"internal",mode:e.mode}}});O({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,r=io(e.gullet.popToken());e.gullet.consumeSpaces();var i=Bd(e);return so(e,r,i,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});O({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n){var{parser:e,funcName:t}=n,r=io(e.gullet.popToken()),i=e.gullet.popToken(),s=e.gullet.popToken();return so(e,r,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var Sr=function(e,t,r){var i=_.math[e]&&_.math[e].replace,s=li(i||e,t,r);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return s},pi=function(e,t,r,i){var s=r.havingBaseStyle(t),a=S.makeSpan(i.concat(s.sizingClasses(r)),[e],r),l=s.sizeMultiplier/r.sizeMultiplier;return a.height*=l,a.depth*=l,a.maxFontSize=s.sizeMultiplier,a},ao=function(e,t,r){var i=t.havingBaseStyle(r),s=(1-t.sizeMultiplier/i.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=D(s),e.height-=s,e.depth+=s},Rd=function(e,t,r,i,s,a){var l=S.makeSymbol(e,"Main-Regular",s,i),o=pi(l,t,i,a);return r&&ao(o,i,t),o},Id=function(e,t,r,i){return S.makeSymbol(e,"Size"+t+"-Regular",r,i)},lo=function(e,t,r,i,s,a){var l=Id(e,t,s,i),o=pi(S.makeSpan(["delimsizing","size"+t],[l],i),q.TEXT,i,a);return r&&ao(o,i,q.TEXT),o},un=function(e,t,r){var i;t==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=S.makeSpan(["delimsizinginner",i],[S.makeSpan([],[S.makeSymbol(e,t,r)])]);return{type:"elem",elem:s}},cn=function(e,t,r){var i=Xe["Size4-Regular"][e.charCodeAt(0)]?Xe["Size4-Regular"][e.charCodeAt(0)][4]:Xe["Size1-Regular"][e.charCodeAt(0)][4],s=new Et("inner",Vc(e,Math.round(1e3*t))),a=new dt([s],{width:D(i),height:D(t),style:"width:"+D(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),l=S.makeSvgSpan([],[a],r);return l.height=t,l.style.height=D(t),l.style.width=D(i),{type:"elem",elem:l}},Hn=.008,i0={type:"kern",size:-1*Hn},Fd=["|","\\lvert","\\rvert","\\vert"],Pd=["\\|","\\lVert","\\rVert","\\Vert"],oo=function(e,t,r,i,s,a){var l,o,h,d,f="",g=0;l=h=d=e,o=null;var y="Size1-Regular";e==="\\uparrow"?h=d="⏐":e==="\\Uparrow"?h=d="‖":e==="\\downarrow"?l=h="⏐":e==="\\Downarrow"?l=h="‖":e==="\\updownarrow"?(l="\\uparrow",h="⏐",d="\\downarrow"):e==="\\Updownarrow"?(l="\\Uparrow",h="‖",d="\\Downarrow"):F.contains(Fd,e)?(h="∣",f="vert",g=333):F.contains(Pd,e)?(h="∥",f="doublevert",g=556):e==="["||e==="\\lbrack"?(l="⎡",h="⎢",d="⎣",y="Size4-Regular",f="lbrack",g=667):e==="]"||e==="\\rbrack"?(l="⎤",h="⎥",d="⎦",y="Size4-Regular",f="rbrack",g=667):e==="\\lfloor"||e==="⌊"?(h=l="⎢",d="⎣",y="Size4-Regular",f="lfloor",g=667):e==="\\lceil"||e==="⌈"?(l="⎡",h=d="⎢",y="Size4-Regular",f="lceil",g=667):e==="\\rfloor"||e==="⌋"?(h=l="⎥",d="⎦",y="Size4-Regular",f="rfloor",g=667):e==="\\rceil"||e==="⌉"?(l="⎤",h=d="⎥",y="Size4-Regular",f="rceil",g=667):e==="("||e==="\\lparen"?(l="⎛",h="⎜",d="⎝",y="Size4-Regular",f="lparen",g=875):e===")"||e==="\\rparen"?(l="⎞",h="⎟",d="⎠",y="Size4-Regular",f="rparen",g=875):e==="\\{"||e==="\\lbrace"?(l="⎧",o="⎨",d="⎩",h="⎪",y="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(l="⎫",o="⎬",d="⎭",h="⎪",y="Size4-Regular"):e==="\\lgroup"||e==="⟮"?(l="⎧",d="⎩",h="⎪",y="Size4-Regular"):e==="\\rgroup"||e==="⟯"?(l="⎫",d="⎭",h="⎪",y="Size4-Regular"):e==="\\lmoustache"||e==="⎰"?(l="⎧",d="⎭",h="⎪",y="Size4-Regular"):(e==="\\rmoustache"||e==="⎱")&&(l="⎫",d="⎩",h="⎪",y="Size4-Regular");var v=Sr(l,y,s),k=v.height+v.depth,M=Sr(h,y,s),T=M.height+M.depth,R=Sr(d,y,s),L=R.height+R.depth,$=0,H=1;if(o!==null){var G=Sr(o,y,s);$=G.height+G.depth,H=2}var U=k+L+$,Z=Math.max(0,Math.ceil((t-U)/(H*T))),I=U+Z*H*T,de=i.fontMetrics().axisHeight;r&&(de*=i.sizeMultiplier);var le=I/2-de,se=[];if(f.length>0){var Ft=I-k-L,Me=Math.round(I*1e3),Ge=Hc(f,Math.round(Ft*1e3)),gt=new Et(f,Ge),Xt=(g/1e3).toFixed(3)+"em",Zt=(Me/1e3).toFixed(3)+"em",L0=new dt([gt],{width:Xt,height:Zt,viewBox:"0 0 "+g+" "+Me}),yt=S.makeSvgSpan([],[L0],i);yt.height=Me/1e3,yt.style.width=Xt,yt.style.height=Zt,se.push({type:"elem",elem:yt})}else{if(se.push(un(d,y,s)),se.push(i0),o===null){var vt=I-k-L+2*Hn;se.push(cn(h,vt,i))}else{var Ie=(I-k-L-$)/2+2*Hn;se.push(cn(h,Ie,i)),se.push(i0),se.push(un(o,y,s)),se.push(i0),se.push(cn(h,Ie,i))}se.push(i0),se.push(un(l,y,s))}var yr=i.havingBaseStyle(q.TEXT),V0=S.makeVList({positionType:"bottom",positionData:le,children:se},yr);return pi(S.makeSpan(["delimsizing","mult"],[V0],yr),q.TEXT,i,a)},dn=80,fn=.08,pn=function(e,t,r,i,s){var a=Lc(e,i,r),l=new Et(e,a),o=new dt([l],{width:"400em",height:D(t),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return S.makeSvgSpan(["hide-tail"],[o],s)},qd=function(e,t){var r=t.havingBaseSizing(),i=fo("\\surd",e*r.sizeMultiplier,co,r),s=r.sizeMultiplier,a=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l,o=0,h=0,d=0,f;return i.type==="small"?(d=1e3+1e3*a+dn,e<1?s=1:e<1.4&&(s=.7),o=(1+a+fn)/s,h=(1+a)/s,l=pn("sqrtMain",o,d,a,t),l.style.minWidth="0.853em",f=.833/s):i.type==="large"?(d=(1e3+dn)*Nr[i.size],h=(Nr[i.size]+a)/s,o=(Nr[i.size]+a+fn)/s,l=pn("sqrtSize"+i.size,o,d,a,t),l.style.minWidth="1.02em",f=1/s):(o=e+a+fn,h=e+a,d=Math.floor(1e3*e+a)+dn,l=pn("sqrtTall",o,d,a,t),l.style.minWidth="0.742em",f=1.056),l.height=h,l.style.height=D(o),{span:l,advanceWidth:f,ruleWidth:(t.fontMetrics().sqrtRuleThickness+a)*s}},ho=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],Ld=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],uo=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Nr=[0,1.2,1.8,2.4,3],Vd=function(e,t,r,i,s){if(e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle"),F.contains(ho,e)||F.contains(uo,e))return lo(e,t,!1,r,i,s);if(F.contains(Ld,e))return oo(e,Nr[t],!1,r,i,s);throw new N("Illegal delimiter: '"+e+"'")},Hd=[{type:"small",style:q.SCRIPTSCRIPT},{type:"small",style:q.SCRIPT},{type:"small",style:q.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Wd=[{type:"small",style:q.SCRIPTSCRIPT},{type:"small",style:q.SCRIPT},{type:"small",style:q.TEXT},{type:"stack"}],co=[{type:"small",style:q.SCRIPTSCRIPT},{type:"small",style:q.SCRIPT},{type:"small",style:q.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Gd=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},fo=function(e,t,r,i){for(var s=Math.min(2,3-i.style.size),a=s;a<r.length&&r[a].type!=="stack";a++){var l=Sr(e,Gd(r[a]),"math"),o=l.height+l.depth;if(r[a].type==="small"){var h=i.havingBaseStyle(r[a].style);o*=h.sizeMultiplier}if(o>t)return r[a]}return r[r.length-1]},po=function(e,t,r,i,s,a){e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle");var l;F.contains(uo,e)?l=Hd:F.contains(ho,e)?l=co:l=Wd;var o=fo(e,t,l,i);return o.type==="small"?Rd(e,o.style,r,i,s,a):o.type==="large"?lo(e,o.size,r,i,s,a):oo(e,t,r,i,s,a)},Jd=function(e,t,r,i,s,a){var l=i.fontMetrics().axisHeight*i.sizeMultiplier,o=901,h=5/i.fontMetrics().ptPerEm,d=Math.max(t-l,r+l),f=Math.max(d/500*o,2*d-h);return po(e,f,!0,i,s,a)},ct={sqrtImage:qd,sizedDelim:Vd,sizeToMaxHeight:Nr,customSizedDelim:po,leftRightDelim:Jd},$s={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},$d=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function F0(n,e){var t=R0(n);if(t&&F.contains($d,t.text))return t;throw t?new N("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",n):new N("Invalid delimiter type '"+n.type+"'",n)}O({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(n,e)=>{var t=F0(e[0],n);return{type:"delimsizing",mode:n.parser.mode,size:$s[n.funcName].size,mclass:$s[n.funcName].mclass,delim:t.text}},htmlBuilder:(n,e)=>n.delim==="."?S.makeSpan([n.mclass]):ct.sizedDelim(n.delim,n.size,e,n.mode,[n.mclass]),mathmlBuilder:n=>{var e=[];n.delim!=="."&&e.push(We(n.delim,n.mode));var t=new A.MathNode("mo",e);n.mclass==="mopen"||n.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var r=D(ct.sizeToMaxHeight[n.size]);return t.setAttribute("minsize",r),t.setAttribute("maxsize",r),t}});function Us(n){if(!n.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}O({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=n.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new N("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:n.parser.mode,delim:F0(e[0],n).text,color:t}}});O({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=F0(e[0],n),r=n.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=J(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:t.text,right:s.delim,rightColor:s.color}},htmlBuilder:(n,e)=>{Us(n);for(var t=ce(n.body,e,!0,["mopen","mclose"]),r=0,i=0,s=!1,a=0;a<t.length;a++)t[a].isMiddle?s=!0:(r=Math.max(t[a].height,r),i=Math.max(t[a].depth,i));r*=e.sizeMultiplier,i*=e.sizeMultiplier;var l;if(n.left==="."?l=Pr(e,["mopen"]):l=ct.leftRightDelim(n.left,r,i,e,n.mode,["mopen"]),t.unshift(l),s)for(var o=1;o<t.length;o++){var h=t[o],d=h.isMiddle;d&&(t[o]=ct.leftRightDelim(d.delim,r,i,d.options,n.mode,[]))}var f;if(n.right===".")f=Pr(e,["mclose"]);else{var g=n.rightColor?e.withColor(n.rightColor):e;f=ct.leftRightDelim(n.right,r,i,g,n.mode,["mclose"])}return t.push(f),S.makeSpan(["minner"],t,e)},mathmlBuilder:(n,e)=>{Us(n);var t=Ae(n.body,e);if(n.left!=="."){var r=new A.MathNode("mo",[We(n.left,n.mode)]);r.setAttribute("fence","true"),t.unshift(r)}if(n.right!=="."){var i=new A.MathNode("mo",[We(n.right,n.mode)]);i.setAttribute("fence","true"),n.rightColor&&i.setAttribute("mathcolor",n.rightColor),t.push(i)}return ui(t)}});O({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var t=F0(e[0],n);if(!n.parser.leftrightDepth)throw new N("\\middle without preceding \\left",t);return{type:"middle",mode:n.parser.mode,delim:t.text}},htmlBuilder:(n,e)=>{var t;if(n.delim===".")t=Pr(e,[]);else{t=ct.sizedDelim(n.delim,1,e,n.mode,[]);var r={delim:n.delim,options:e};t.isMiddle=r}return t},mathmlBuilder:(n,e)=>{var t=n.delim==="\\vert"||n.delim==="|"?We("|","text"):We(n.delim,n.mode),r=new A.MathNode("mo",[t]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var mi=(n,e)=>{var t=S.wrapFragment(Y(n.body,e),e),r=n.label.slice(1),i=e.sizeMultiplier,s,a=0,l=F.isCharacterBox(n.body);if(r==="sout")s=S.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/i,a=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var o=re({number:.6,unit:"pt"},e),h=re({number:.35,unit:"ex"},e),d=e.havingBaseSizing();i=i/d.sizeMultiplier;var f=t.height+t.depth+o+h;t.style.paddingLeft=D(f/2+o);var g=Math.floor(1e3*f*i),y=Pc(g),v=new dt([new Et("phase",y)],{width:"400em",height:D(g/1e3),viewBox:"0 0 400000 "+g,preserveAspectRatio:"xMinYMin slice"});s=S.makeSvgSpan(["hide-tail"],[v],e),s.style.height=D(f),a=t.depth+o+h}else{/cancel/.test(r)?l||t.classes.push("cancel-pad"):r==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var k=0,M=0,T=0;/box/.test(r)?(T=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),k=e.fontMetrics().fboxsep+(r==="colorbox"?0:T),M=k):r==="angl"?(T=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),k=4*T,M=Math.max(0,.25-t.depth)):(k=l?.2:0,M=k),s=pt.encloseSpan(t,r,k,M,e),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=D(T)):r==="angl"&&T!==.049&&(s.style.borderTopWidth=D(T),s.style.borderRightWidth=D(T)),a=t.depth+M,n.backgroundColor&&(s.style.backgroundColor=n.backgroundColor,n.borderColor&&(s.style.borderColor=n.borderColor))}var R;if(n.backgroundColor)R=S.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:a},{type:"elem",elem:t,shift:0}]},e);else{var L=/cancel|phase/.test(r)?["svg-align"]:[];R=S.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:s,shift:a,wrapperClasses:L}]},e)}return/cancel/.test(r)&&(R.height=t.height,R.depth=t.depth),/cancel/.test(r)&&!l?S.makeSpan(["mord","cancel-lap"],[R],e):S.makeSpan(["mord"],[R],e)},gi=(n,e)=>{var t=0,r=new A.MathNode(n.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Q(n.body,e)]);switch(n.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*t+"pt"),r.setAttribute("height","+"+2*t+"pt"),r.setAttribute("lspace",t+"pt"),r.setAttribute("voffset",t+"pt"),n.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(n.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return n.backgroundColor&&r.setAttribute("mathbackground",n.backgroundColor),r};O({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(n,e,t){var{parser:r,funcName:i}=n,s=J(e[0],"color-token").color,a=e[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,body:a}},htmlBuilder:mi,mathmlBuilder:gi});O({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(n,e,t){var{parser:r,funcName:i}=n,s=J(e[0],"color-token").color,a=J(e[1],"color-token").color,l=e[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:a,borderColor:s,body:l}},htmlBuilder:mi,mathmlBuilder:gi});O({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});O({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];return{type:"enclose",mode:t.mode,label:r,body:i}},htmlBuilder:mi,mathmlBuilder:gi});O({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(n,e){var{parser:t}=n;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var mo={};function tt(n){for(var{type:e,names:t,props:r,handler:i,htmlBuilder:s,mathmlBuilder:a}=n,l={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},o=0;o<t.length;++o)mo[t[o]]=l;s&&(S0[e]=s),a&&(M0[e]=a)}var go={};function m(n,e){go[n]=e}function Ks(n){var e=[];n.consumeSpaces();var t=n.fetch().text;for(t==="\\relax"&&(n.consume(),n.consumeSpaces(),t=n.fetch().text);t==="\\hline"||t==="\\hdashline";)n.consume(),e.push(t==="\\hdashline"),n.consumeSpaces(),t=n.fetch().text;return e}var P0=n=>{var e=n.parser.settings;if(!e.displayMode)throw new N("{"+n.envName+"} can be used only in display mode.")};function yi(n){if(n.indexOf("ed")===-1)return n.indexOf("*")===-1}function It(n,e,t){var{hskipBeforeAndAfter:r,addJot:i,cols:s,arraystretch:a,colSeparationType:l,autoTag:o,singleRow:h,emptySingleRow:d,maxNumCols:f,leqno:g}=e;if(n.gullet.beginGroup(),h||n.gullet.macros.set("\\cr","\\\\\\relax"),!a){var y=n.gullet.expandMacroAsText("\\arraystretch");if(y==null)a=1;else if(a=parseFloat(y),!a||a<0)throw new N("Invalid \\arraystretch: "+y)}n.gullet.beginGroup();var v=[],k=[v],M=[],T=[],R=o!=null?[]:void 0;function L(){o&&n.gullet.macros.set("\\@eqnsw","1",!0)}function $(){R&&(n.gullet.macros.get("\\df@tag")?(R.push(n.subparse([new Ve("\\df@tag")])),n.gullet.macros.set("\\df@tag",void 0,!0)):R.push(!!o&&n.gullet.macros.get("\\@eqnsw")==="1"))}for(L(),T.push(Ks(n));;){var H=n.parseExpression(!1,h?"\\end":"\\\\");n.gullet.endGroup(),n.gullet.beginGroup(),H={type:"ordgroup",mode:n.mode,body:H},t&&(H={type:"styling",mode:n.mode,style:t,body:[H]}),v.push(H);var G=n.fetch().text;if(G==="&"){if(f&&v.length===f){if(h||l)throw new N("Too many tab characters: &",n.nextToken);n.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}n.consume()}else if(G==="\\end"){$(),v.length===1&&H.type==="styling"&&H.body[0].body.length===0&&(k.length>1||!d)&&k.pop(),T.length<k.length+1&&T.push([]);break}else if(G==="\\\\"){n.consume();var U=void 0;n.gullet.future().text!==" "&&(U=n.parseSizeGroup(!0)),M.push(U?U.value:null),$(),T.push(Ks(n)),v=[],k.push(v),L()}else throw new N("Expected & or \\\\ or \\cr or \\end",n.nextToken)}return n.gullet.endGroup(),n.gullet.endGroup(),{type:"array",mode:n.mode,addJot:i,arraystretch:a,body:k,cols:s,rowGaps:M,hskipBeforeAndAfter:r,hLinesBeforeRow:T,colSeparationType:l,tags:R,leqno:g}}function vi(n){return n.slice(0,1)==="d"?"display":"text"}var rt=function(e,t){var r,i,s=e.body.length,a=e.hLinesBeforeRow,l=0,o=new Array(s),h=[],d=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),f=1/t.fontMetrics().ptPerEm,g=5*f;if(e.colSeparationType&&e.colSeparationType==="small"){var y=t.havingStyle(q.SCRIPT).sizeMultiplier;g=.2778*(y/t.sizeMultiplier)}var v=e.colSeparationType==="CD"?re({number:3,unit:"ex"},t):12*f,k=3*f,M=e.arraystretch*v,T=.7*M,R=.3*M,L=0;function $(Ur){for(var Kr=0;Kr<Ur.length;++Kr)Kr>0&&(L+=.25),h.push({pos:L,isDashed:Ur[Kr]})}for($(a[0]),r=0;r<e.body.length;++r){var H=e.body[r],G=T,U=R;l<H.length&&(l=H.length);var Z=new Array(H.length);for(i=0;i<H.length;++i){var I=Y(H[i],t);U<I.depth&&(U=I.depth),G<I.height&&(G=I.height),Z[i]=I}var de=e.rowGaps[r],le=0;de&&(le=re(de,t),le>0&&(le+=R,U<le&&(U=le),le=0)),e.addJot&&(U+=k),Z.height=G,Z.depth=U,L+=G,Z.pos=L,L+=U+le,o[r]=Z,$(a[r+1])}var se=L/2+t.fontMetrics().axisHeight,Ft=e.cols||[],Me=[],Ge,gt,Xt=[];if(e.tags&&e.tags.some(Ur=>Ur))for(r=0;r<s;++r){var Zt=o[r],L0=Zt.pos-se,yt=e.tags[r],vt=void 0;yt===!0?vt=S.makeSpan(["eqn-num"],[],t):yt===!1?vt=S.makeSpan([],[],t):vt=S.makeSpan([],ce(yt,t,!0),t),vt.depth=Zt.depth,vt.height=Zt.height,Xt.push({type:"elem",elem:vt,shift:L0})}for(i=0,gt=0;i<l||gt<Ft.length;++i,++gt){for(var Ie=Ft[gt]||{},yr=!0;Ie.type==="separator";){if(yr||(Ge=S.makeSpan(["arraycolsep"],[]),Ge.style.width=D(t.fontMetrics().doubleRuleSep),Me.push(Ge)),Ie.separator==="|"||Ie.separator===":"){var V0=Ie.separator==="|"?"solid":"dashed",Qt=S.makeSpan(["vertical-separator"],[],t);Qt.style.height=D(L),Qt.style.borderRightWidth=D(d),Qt.style.borderRightStyle=V0,Qt.style.margin="0 "+D(-d/2);var Ti=L-se;Ti&&(Qt.style.verticalAlign=D(-Ti)),Me.push(Qt)}else throw new N("Invalid separator type: "+Ie.separator);gt++,Ie=Ft[gt]||{},yr=!1}if(!(i>=l)){var _t=void 0;(i>0||e.hskipBeforeAndAfter)&&(_t=F.deflt(Ie.pregap,g),_t!==0&&(Ge=S.makeSpan(["arraycolsep"],[]),Ge.style.width=D(_t),Me.push(Ge)));var er=[];for(r=0;r<s;++r){var Jr=o[r],$r=Jr[i];if($r){var Ro=Jr.pos-se;$r.depth=Jr.depth,$r.height=Jr.height,er.push({type:"elem",elem:$r,shift:Ro})}}er=S.makeVList({positionType:"individualShift",children:er},t),er=S.makeSpan(["col-align-"+(Ie.align||"c")],[er]),Me.push(er),(i<l-1||e.hskipBeforeAndAfter)&&(_t=F.deflt(Ie.postgap,g),_t!==0&&(Ge=S.makeSpan(["arraycolsep"],[]),Ge.style.width=D(_t),Me.push(Ge)))}}if(o=S.makeSpan(["mtable"],Me),h.length>0){for(var Io=S.makeLineSpan("hline",t,d),Fo=S.makeLineSpan("hdashline",t,d),H0=[{type:"elem",elem:o,shift:0}];h.length>0;){var Ci=h.pop(),Ai=Ci.pos-se;Ci.isDashed?H0.push({type:"elem",elem:Fo,shift:Ai}):H0.push({type:"elem",elem:Io,shift:Ai})}o=S.makeVList({positionType:"individualShift",children:H0},t)}if(Xt.length===0)return S.makeSpan(["mord"],[o],t);var W0=S.makeVList({positionType:"individualShift",children:Xt},t);return W0=S.makeSpan(["tag"],[W0],t),S.makeFragment([o,W0])},Ud={c:"center ",l:"left ",r:"right "},nt=function(e,t){for(var r=[],i=new A.MathNode("mtd",[],["mtr-glue"]),s=new A.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<e.body.length;a++){for(var l=e.body[a],o=[],h=0;h<l.length;h++)o.push(new A.MathNode("mtd",[Q(l[h],t)]));e.tags&&e.tags[a]&&(o.unshift(i),o.push(i),e.leqno?o.unshift(s):o.push(s)),r.push(new A.MathNode("mtr",o))}var d=new A.MathNode("mtable",r),f=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);d.setAttribute("rowspacing",D(f));var g="",y="";if(e.cols&&e.cols.length>0){var v=e.cols,k="",M=!1,T=0,R=v.length;v[0].type==="separator"&&(g+="top ",T=1),v[v.length-1].type==="separator"&&(g+="bottom ",R-=1);for(var L=T;L<R;L++)v[L].type==="align"?(y+=Ud[v[L].align],M&&(k+="none "),M=!0):v[L].type==="separator"&&M&&(k+=v[L].separator==="|"?"solid ":"dashed ",M=!1);d.setAttribute("columnalign",y.trim()),/[sd]/.test(k)&&d.setAttribute("columnlines",k.trim())}if(e.colSeparationType==="align"){for(var $=e.cols||[],H="",G=1;G<$.length;G++)H+=G%2?"0em ":"1em ";d.setAttribute("columnspacing",H.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var U="",Z=e.hLinesBeforeRow;g+=Z[0].length>0?"left ":"",g+=Z[Z.length-1].length>0?"right ":"";for(var I=1;I<Z.length-1;I++)U+=Z[I].length===0?"none ":Z[I][0]?"dashed ":"solid ";return/[sd]/.test(U)&&d.setAttribute("rowlines",U.trim()),g!==""&&(d=new A.MathNode("menclose",[d]),d.setAttribute("notation",g.trim())),e.arraystretch&&e.arraystretch<1&&(d=new A.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},yo=function(e,t){e.envName.indexOf("ed")===-1&&P0(e);var r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",a=It(e.parser,{cols:r,addJot:!0,autoTag:s?void 0:yi(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),l,o=0,h={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var d="",f=0;f<t[0].body.length;f++){var g=J(t[0].body[f],"textord");d+=g.text}l=Number(d),o=l*2}var y=!o;a.body.forEach(function(T){for(var R=1;R<T.length;R+=2){var L=J(T[R],"styling"),$=J(L.body[0],"ordgroup");$.body.unshift(h)}if(y)o<T.length&&(o=T.length);else{var H=T.length/2;if(l<H)throw new N("Too many math in a row: "+("expected "+l+", but got "+H),T[0])}});for(var v=0;v<o;++v){var k="r",M=0;v%2===1?k="l":v>0&&y&&(M=1),r[v]={type:"align",align:k,pregap:M,postgap:0}}return a.colSeparationType=y?"align":"alignat",a};tt({type:"array",names:["array","darray"],props:{numArgs:1},handler(n,e){var t=R0(e[0]),r=t?[e[0]]:J(e[0],"ordgroup").body,i=r.map(function(a){var l=di(a),o=l.text;if("lcr".indexOf(o)!==-1)return{type:"align",align:o};if(o==="|")return{type:"separator",separator:"|"};if(o===":")return{type:"separator",separator:":"};throw new N("Unknown column alignment: "+o,a)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return It(n.parser,s,vi(n.envName))},htmlBuilder:rt,mathmlBuilder:nt});tt({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(n){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[n.envName.replace("*","")],t="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(n.envName.charAt(n.envName.length-1)==="*"){var i=n.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),t=i.fetch().text,"lcr".indexOf(t)===-1)throw new N("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:t}]}}var s=It(n.parser,r,vi(n.envName)),a=Math.max(0,...s.body.map(l=>l.length));return s.cols=new Array(a).fill({type:"align",align:t}),e?{type:"leftright",mode:n.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:rt,mathmlBuilder:nt});tt({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(n){var e={arraystretch:.5},t=It(n.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:rt,mathmlBuilder:nt});tt({type:"array",names:["subarray"],props:{numArgs:1},handler(n,e){var t=R0(e[0]),r=t?[e[0]]:J(e[0],"ordgroup").body,i=r.map(function(a){var l=di(a),o=l.text;if("lc".indexOf(o)!==-1)return{type:"align",align:o};throw new N("Unknown column alignment: "+o,a)});if(i.length>1)throw new N("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=It(n.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new N("{subarray} can contain only one column");return s},htmlBuilder:rt,mathmlBuilder:nt});tt({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(n){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=It(n.parser,e,vi(n.envName));return{type:"leftright",mode:n.mode,body:[t],left:n.envName.indexOf("r")>-1?".":"\\{",right:n.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:rt,mathmlBuilder:nt});tt({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:yo,htmlBuilder:rt,mathmlBuilder:nt});tt({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(n){F.contains(["gather","gather*"],n.envName)&&P0(n);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:yi(n.envName),emptySingleRow:!0,leqno:n.parser.settings.leqno};return It(n.parser,e,"display")},htmlBuilder:rt,mathmlBuilder:nt});tt({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:yo,htmlBuilder:rt,mathmlBuilder:nt});tt({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(n){P0(n);var e={autoTag:yi(n.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:n.parser.settings.leqno};return It(n.parser,e,"display")},htmlBuilder:rt,mathmlBuilder:nt});tt({type:"array",names:["CD"],props:{numArgs:0},handler(n){return P0(n),Ed(n.parser)},htmlBuilder:rt,mathmlBuilder:nt});m("\\nonumber","\\gdef\\@eqnsw{0}");m("\\notag","\\nonumber");O({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(n,e){throw new N(n.funcName+" valid only within array environment")}});var Ys=mo;O({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];if(i.type!=="ordgroup")throw new N("Invalid environment name",i);for(var s="",a=0;a<i.body.length;++a)s+=J(i.body[a],"textord").text;if(r==="\\begin"){if(!Ys.hasOwnProperty(s))throw new N("No such environment: "+s,i);var l=Ys[s],{args:o,optArgs:h}=t.parseArguments("\\begin{"+s+"}",l),d={mode:t.mode,envName:s,parser:t},f=l.handler(d,o,h);t.expect("\\end",!1);var g=t.nextToken,y=J(t.parseFunction(),"environment");if(y.name!==s)throw new N("Mismatch: \\begin{"+s+"} matched by \\end{"+y.name+"}",g);return f}return{type:"environment",mode:t.mode,name:s,nameGroup:i}}});var vo=(n,e)=>{var t=n.font,r=e.withFont(t);return Y(n.body,r)},bo=(n,e)=>{var t=n.font,r=e.withFont(t);return Q(n.body,r)},js={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};O({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=T0(e[0]),s=r;return s in js&&(s=js[s]),{type:"font",mode:t.mode,font:s.slice(1),body:i}},htmlBuilder:vo,mathmlBuilder:bo});O({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(n,e)=>{var{parser:t}=n,r=e[0],i=F.isCharacterBox(r);return{type:"mclass",mode:t.mode,mclass:I0(r),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}});O({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:r,breakOnTokenText:i}=n,{mode:s}=t,a=t.parseExpression(!0,i),l="math"+r.slice(1);return{type:"font",mode:s,font:l,body:{type:"ordgroup",mode:t.mode,body:a}}},htmlBuilder:vo,mathmlBuilder:bo});var xo=(n,e)=>{var t=e;return n==="display"?t=t.id>=q.SCRIPT.id?t.text():q.DISPLAY:n==="text"&&t.size===q.DISPLAY.size?t=q.TEXT:n==="script"?t=q.SCRIPT:n==="scriptscript"&&(t=q.SCRIPTSCRIPT),t},bi=(n,e)=>{var t=xo(n.size,e.style),r=t.fracNum(),i=t.fracDen(),s;s=e.havingStyle(r);var a=Y(n.numer,s,e);if(n.continued){var l=8.5/e.fontMetrics().ptPerEm,o=3.5/e.fontMetrics().ptPerEm;a.height=a.height<l?l:a.height,a.depth=a.depth<o?o:a.depth}s=e.havingStyle(i);var h=Y(n.denom,s,e),d,f,g;n.hasBarLine?(n.barSize?(f=re(n.barSize,e),d=S.makeLineSpan("frac-line",e,f)):d=S.makeLineSpan("frac-line",e),f=d.height,g=d.height):(d=null,f=0,g=e.fontMetrics().defaultRuleThickness);var y,v,k;t.size===q.DISPLAY.size||n.size==="display"?(y=e.fontMetrics().num1,f>0?v=3*g:v=7*g,k=e.fontMetrics().denom1):(f>0?(y=e.fontMetrics().num2,v=g):(y=e.fontMetrics().num3,v=3*g),k=e.fontMetrics().denom2);var M;if(d){var R=e.fontMetrics().axisHeight;y-a.depth-(R+.5*f)<v&&(y+=v-(y-a.depth-(R+.5*f))),R-.5*f-(h.height-k)<v&&(k+=v-(R-.5*f-(h.height-k)));var L=-(R-.5*f);M=S.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:k},{type:"elem",elem:d,shift:L},{type:"elem",elem:a,shift:-y}]},e)}else{var T=y-a.depth-(h.height-k);T<v&&(y+=.5*(v-T),k+=.5*(v-T)),M=S.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:k},{type:"elem",elem:a,shift:-y}]},e)}s=e.havingStyle(t),M.height*=s.sizeMultiplier/e.sizeMultiplier,M.depth*=s.sizeMultiplier/e.sizeMultiplier;var $;t.size===q.DISPLAY.size?$=e.fontMetrics().delim1:t.size===q.SCRIPTSCRIPT.size?$=e.havingStyle(q.SCRIPT).fontMetrics().delim2:$=e.fontMetrics().delim2;var H,G;return n.leftDelim==null?H=Pr(e,["mopen"]):H=ct.customSizedDelim(n.leftDelim,$,!0,e.havingStyle(t),n.mode,["mopen"]),n.continued?G=S.makeSpan([]):n.rightDelim==null?G=Pr(e,["mclose"]):G=ct.customSizedDelim(n.rightDelim,$,!0,e.havingStyle(t),n.mode,["mclose"]),S.makeSpan(["mord"].concat(s.sizingClasses(e)),[H,S.makeSpan(["mfrac"],[M]),G],e)},xi=(n,e)=>{var t=new A.MathNode("mfrac",[Q(n.numer,e),Q(n.denom,e)]);if(!n.hasBarLine)t.setAttribute("linethickness","0px");else if(n.barSize){var r=re(n.barSize,e);t.setAttribute("linethickness",D(r))}var i=xo(n.size,e.style);if(i.size!==e.style.size){t=new A.MathNode("mstyle",[t]);var s=i.size===q.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",s),t.setAttribute("scriptlevel","0")}if(n.leftDelim!=null||n.rightDelim!=null){var a=[];if(n.leftDelim!=null){var l=new A.MathNode("mo",[new A.TextNode(n.leftDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}if(a.push(t),n.rightDelim!=null){var o=new A.MathNode("mo",[new A.TextNode(n.rightDelim.replace("\\",""))]);o.setAttribute("fence","true"),a.push(o)}return ui(a)}return t};O({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0],s=e[1],a,l=null,o=null,h="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":a=!0;break;case"\\\\atopfrac":a=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a=!1,l="(",o=")";break;case"\\\\bracefrac":a=!1,l="\\{",o="\\}";break;case"\\\\brackfrac":a=!1,l="[",o="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:i,denom:s,hasBarLine:a,leftDelim:l,rightDelim:o,size:h,barSize:null}},htmlBuilder:bi,mathmlBuilder:xi});O({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0],s=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});O({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(n){var{parser:e,funcName:t,token:r}=n,i;switch(t){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:r}}});var Xs=["display","text","script","scriptscript"],Zs=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};O({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(n,e){var{parser:t}=n,r=e[4],i=e[5],s=T0(e[0]),a=s.type==="atom"&&s.family==="open"?Zs(s.text):null,l=T0(e[1]),o=l.type==="atom"&&l.family==="close"?Zs(l.text):null,h=J(e[2],"size"),d,f=null;h.isBlank?d=!0:(f=h.value,d=f.number>0);var g="auto",y=e[3];if(y.type==="ordgroup"){if(y.body.length>0){var v=J(y.body[0],"textord");g=Xs[Number(v.text)]}}else y=J(y,"textord"),g=Xs[Number(y.text)];return{type:"genfrac",mode:t.mode,numer:r,denom:i,continued:!1,hasBarLine:d,barSize:f,leftDelim:a,rightDelim:o,size:g}},htmlBuilder:bi,mathmlBuilder:xi});O({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(n,e){var{parser:t,funcName:r,token:i}=n;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:J(e[0],"size").value,token:i}}});O({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0],s=kc(J(e[1],"infix").size),a=e[2],l=s.number>0;return{type:"genfrac",mode:t.mode,numer:i,denom:a,continued:!1,hasBarLine:l,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:bi,mathmlBuilder:xi});var wo=(n,e)=>{var t=e.style,r,i;n.type==="supsub"?(r=n.sup?Y(n.sup,e.havingStyle(t.sup()),e):Y(n.sub,e.havingStyle(t.sub()),e),i=J(n.base,"horizBrace")):i=J(n,"horizBrace");var s=Y(i.base,e.havingBaseStyle(q.DISPLAY)),a=pt.svgSpan(i,e),l;if(i.isOver?(l=S.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),l.children[0].children[0].children[1].classes.push("svg-align")):(l=S.makeVList({positionType:"bottom",positionData:s.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),l.children[0].children[0].children[0].classes.push("svg-align")),r){var o=S.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e);i.isOver?l=S.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.2},{type:"elem",elem:r}]},e):l=S.makeVList({positionType:"bottom",positionData:o.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:o}]},e)}return S.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e)},Kd=(n,e)=>{var t=pt.mathMLnode(n.label);return new A.MathNode(n.isOver?"mover":"munder",[Q(n.base,e),t])};O({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(n,e){var{parser:t,funcName:r}=n;return{type:"horizBrace",mode:t.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:wo,mathmlBuilder:Kd});O({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[1],i=J(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:t.mode,href:i,body:ae(r)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(n,e)=>{var t=ce(n.body,e,!1);return S.makeAnchor(n.href,[],t,e)},mathmlBuilder:(n,e)=>{var t=Bt(n.body,e);return t instanceof Oe||(t=new Oe("mrow",[t])),t.setAttribute("href",n.href),t}});O({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=J(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:r}))return t.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<r.length;s++){var a=r[s];a==="~"&&(a="\\textasciitilde"),i.push({type:"textord",mode:"text",text:a})}var l={type:"text",mode:t.mode,font:"\\texttt",body:i};return{type:"href",mode:t.mode,href:r,body:ae(l)}}});O({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(n,e){var{parser:t}=n;return{type:"hbox",mode:t.mode,body:ae(e[0])}},htmlBuilder(n,e){var t=ce(n.body,e,!1);return S.makeFragment(t)},mathmlBuilder(n,e){return new A.MathNode("mrow",Ae(n.body,e))}});O({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:r,token:i}=n,s=J(e[0],"raw").string,a=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l,o={};switch(r){case"\\htmlClass":o.class=s,l={command:"\\htmlClass",class:s};break;case"\\htmlId":o.id=s,l={command:"\\htmlId",id:s};break;case"\\htmlStyle":o.style=s,l={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var h=s.split(","),d=0;d<h.length;d++){var f=h[d].split("=");if(f.length!==2)throw new N("Error parsing key-value for \\htmlData");o["data-"+f[0].trim()]=f[1].trim()}l={command:"\\htmlData",attributes:o};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(l)?{type:"html",mode:t.mode,attributes:o,body:ae(a)}:t.formatUnsupportedCmd(r)},htmlBuilder:(n,e)=>{var t=ce(n.body,e,!1),r=["enclosing"];n.attributes.class&&r.push(...n.attributes.class.trim().split(/\s+/));var i=S.makeSpan(r,t,e);for(var s in n.attributes)s!=="class"&&n.attributes.hasOwnProperty(s)&&i.setAttribute(s,n.attributes[s]);return i},mathmlBuilder:(n,e)=>Bt(n.body,e)});O({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n;return{type:"htmlmathml",mode:t.mode,html:ae(e[0]),mathml:ae(e[1])}},htmlBuilder:(n,e)=>{var t=ce(n.html,e,!1);return S.makeFragment(t)},mathmlBuilder:(n,e)=>Bt(n.mathml,e)});var mn=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new N("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!Ll(r))throw new N("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};O({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(n,e,t)=>{var{parser:r}=n,i={number:0,unit:"em"},s={number:.9,unit:"em"},a={number:0,unit:"em"},l="";if(t[0])for(var o=J(t[0],"raw").string,h=o.split(","),d=0;d<h.length;d++){var f=h[d].split("=");if(f.length===2){var g=f[1].trim();switch(f[0].trim()){case"alt":l=g;break;case"width":i=mn(g);break;case"height":s=mn(g);break;case"totalheight":a=mn(g);break;default:throw new N("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var y=J(e[0],"url").url;return l===""&&(l=y,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:y})?{type:"includegraphics",mode:r.mode,alt:l,width:i,height:s,totalheight:a,src:y}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(n,e)=>{var t=re(n.height,e),r=0;n.totalheight.number>0&&(r=re(n.totalheight,e)-t);var i=0;n.width.number>0&&(i=re(n.width,e));var s={height:D(t+r)};i>0&&(s.width=D(i)),r>0&&(s.verticalAlign=D(-r));var a=new Kc(n.src,n.alt,s);return a.height=t,a.depth=r,a},mathmlBuilder:(n,e)=>{var t=new A.MathNode("mglyph",[]);t.setAttribute("alt",n.alt);var r=re(n.height,e),i=0;if(n.totalheight.number>0&&(i=re(n.totalheight,e)-r,t.setAttribute("valign",D(-i))),t.setAttribute("height",D(r+i)),n.width.number>0){var s=re(n.width,e);t.setAttribute("width",D(s))}return t.setAttribute("src",n.src),t}});O({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(n,e){var{parser:t,funcName:r}=n,i=J(e[0],"size");if(t.settings.strict){var s=r[1]==="m",a=i.value.unit==="mu";s?(a||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+i.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):a&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:i.value}},htmlBuilder(n,e){return S.makeGlue(n.dimension,e)},mathmlBuilder(n,e){var t=re(n.dimension,e);return new A.SpaceNode(t)}});O({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0];return{type:"lap",mode:t.mode,alignment:r.slice(5),body:i}},htmlBuilder:(n,e)=>{var t;n.alignment==="clap"?(t=S.makeSpan([],[Y(n.body,e)]),t=S.makeSpan(["inner"],[t],e)):t=S.makeSpan(["inner"],[Y(n.body,e)]);var r=S.makeSpan(["fix"],[]),i=S.makeSpan([n.alignment],[t,r],e),s=S.makeSpan(["strut"]);return s.style.height=D(i.height+i.depth),i.depth&&(s.style.verticalAlign=D(-i.depth)),i.children.unshift(s),i=S.makeSpan(["thinbox"],[i],e),S.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(n,e)=>{var t=new A.MathNode("mpadded",[Q(n.body,e)]);if(n.alignment!=="rlap"){var r=n.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",r+"width")}return t.setAttribute("width","0px"),t}});O({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){var{funcName:t,parser:r}=n,i=r.mode;r.switchMode("math");var s=t==="\\("?"\\)":"$",a=r.parseExpression(!1,s);return r.expect(s),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:a}}});O({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(n,e){throw new N("Mismatched "+n.funcName)}});var Qs=(n,e)=>{switch(e.style.size){case q.DISPLAY.size:return n.display;case q.TEXT.size:return n.text;case q.SCRIPT.size:return n.script;case q.SCRIPTSCRIPT.size:return n.scriptscript;default:return n.text}};O({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(n,e)=>{var{parser:t}=n;return{type:"mathchoice",mode:t.mode,display:ae(e[0]),text:ae(e[1]),script:ae(e[2]),scriptscript:ae(e[3])}},htmlBuilder:(n,e)=>{var t=Qs(n,e),r=ce(t,e,!1);return S.makeFragment(r)},mathmlBuilder:(n,e)=>{var t=Qs(n,e);return Bt(t,e)}});var ko=(n,e,t,r,i,s,a)=>{n=S.makeSpan([],[n]);var l=t&&F.isCharacterBox(t),o,h;if(e){var d=Y(e,r.havingStyle(i.sup()),r);h={elem:d,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-d.depth)}}if(t){var f=Y(t,r.havingStyle(i.sub()),r);o={elem:f,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-f.height)}}var g;if(h&&o){var y=r.fontMetrics().bigOpSpacing5+o.elem.height+o.elem.depth+o.kern+n.depth+a;g=S.makeVList({positionType:"bottom",positionData:y,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:D(-s)},{type:"kern",size:o.kern},{type:"elem",elem:n},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:D(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(o){var v=n.height-a;g=S.makeVList({positionType:"top",positionData:v,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:D(-s)},{type:"kern",size:o.kern},{type:"elem",elem:n}]},r)}else if(h){var k=n.depth+a;g=S.makeVList({positionType:"bottom",positionData:k,children:[{type:"elem",elem:n},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:D(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return n;var M=[g];if(o&&s!==0&&!l){var T=S.makeSpan(["mspace"],[],r);T.style.marginRight=D(s),M.unshift(T)}return S.makeSpan(["mop","op-limits"],M,r)},So=["\\smallint"],gr=(n,e)=>{var t,r,i=!1,s;n.type==="supsub"?(t=n.sup,r=n.sub,s=J(n.base,"op"),i=!0):s=J(n,"op");var a=e.style,l=!1;a.size===q.DISPLAY.size&&s.symbol&&!F.contains(So,s.name)&&(l=!0);var o;if(s.symbol){var h=l?"Size2-Regular":"Size1-Regular",d="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(d=s.name.slice(1),s.name=d==="oiint"?"\\iint":"\\iiint"),o=S.makeSymbol(s.name,h,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),d.length>0){var f=o.italic,g=S.staticSvg(d+"Size"+(l?"2":"1"),e);o=S.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:g,shift:l?.08:0}]},e),s.name="\\"+d,o.classes.unshift("mop"),o.italic=f}}else if(s.body){var y=ce(s.body,e,!0);y.length===1&&y[0]instanceof He?(o=y[0],o.classes[0]="mop"):o=S.makeSpan(["mop"],y,e)}else{for(var v=[],k=1;k<s.name.length;k++)v.push(S.mathsym(s.name[k],s.mode,e));o=S.makeSpan(["mop"],v,e)}var M=0,T=0;return(o instanceof He||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(M=(o.height-o.depth)/2-e.fontMetrics().axisHeight,T=o.italic),i?ko(o,t,r,e,a,T,M):(M&&(o.style.position="relative",o.style.top=D(M)),o)},Gr=(n,e)=>{var t;if(n.symbol)t=new Oe("mo",[We(n.name,n.mode)]),F.contains(So,n.name)&&t.setAttribute("largeop","false");else if(n.body)t=new Oe("mo",Ae(n.body,e));else{t=new Oe("mi",[new Ze(n.name.slice(1))]);var r=new Oe("mo",[We("⁡","text")]);n.parentIsSupSub?t=new Oe("mrow",[t,r]):t=Xl([t,r])}return t},Yd={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};O({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=r;return i.length===1&&(i=Yd[i]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:gr,mathmlBuilder:Gr});O({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ae(r)}},htmlBuilder:gr,mathmlBuilder:Gr});var jd={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};O({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:gr,mathmlBuilder:Gr});O({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:gr,mathmlBuilder:Gr});O({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(n){var{parser:e,funcName:t}=n,r=t;return r.length===1&&(r=jd[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:gr,mathmlBuilder:Gr});var Mo=(n,e)=>{var t,r,i=!1,s;n.type==="supsub"?(t=n.sup,r=n.sub,s=J(n.base,"operatorname"),i=!0):s=J(n,"operatorname");var a;if(s.body.length>0){for(var l=s.body.map(f=>{var g=f.text;return typeof g=="string"?{type:"textord",mode:f.mode,text:g}:f}),o=ce(l,e.withFont("mathrm"),!0),h=0;h<o.length;h++){var d=o[h];d instanceof He&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}a=S.makeSpan(["mop"],o,e)}else a=S.makeSpan(["mop"],[],e);return i?ko(a,t,r,e,e.style,0,0):a},Xd=(n,e)=>{for(var t=Ae(n.body,e.withFont("mathrm")),r=!0,i=0;i<t.length;i++){var s=t[i];if(!(s instanceof A.SpaceNode))if(s instanceof A.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var a=s.children[0];s.children.length===1&&a instanceof A.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var l=t.map(d=>d.toText()).join("");t=[new A.TextNode(l)]}var o=new A.MathNode("mi",t);o.setAttribute("mathvariant","normal");var h=new A.MathNode("mo",[We("⁡","text")]);return n.parentIsSupSub?new A.MathNode("mrow",[o,h]):A.newDocumentFragment([o,h])};O({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(n,e)=>{var{parser:t,funcName:r}=n,i=e[0];return{type:"operatorname",mode:t.mode,body:ae(i),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Mo,mathmlBuilder:Xd});m("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");jt({type:"ordgroup",htmlBuilder(n,e){return n.semisimple?S.makeFragment(ce(n.body,e,!1)):S.makeSpan(["mord"],ce(n.body,e,!0),e)},mathmlBuilder(n,e){return Bt(n.body,e,!0)}});O({type:"overline",names:["\\overline"],props:{numArgs:1},handler(n,e){var{parser:t}=n,r=e[0];return{type:"overline",mode:t.mode,body:r}},htmlBuilder(n,e){var t=Y(n.body,e.havingCrampedStyle()),r=S.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=S.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},e);return S.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(n,e){var t=new A.MathNode("mo",[new A.TextNode("‾")]);t.setAttribute("stretchy","true");var r=new A.MathNode("mover",[Q(n.body,e),t]);return r.setAttribute("accent","true"),r}});O({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"phantom",mode:t.mode,body:ae(r)}},htmlBuilder:(n,e)=>{var t=ce(n.body,e.withPhantom(),!1);return S.makeFragment(t)},mathmlBuilder:(n,e)=>{var t=Ae(n.body,e);return new A.MathNode("mphantom",t)}});O({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"hphantom",mode:t.mode,body:r}},htmlBuilder:(n,e)=>{var t=S.makeSpan([],[Y(n.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var r=0;r<t.children.length;r++)t.children[r].height=0,t.children[r].depth=0;return t=S.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),S.makeSpan(["mord"],[t],e)},mathmlBuilder:(n,e)=>{var t=Ae(ae(n.body),e),r=new A.MathNode("mphantom",t),i=new A.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});O({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(n,e)=>{var{parser:t}=n,r=e[0];return{type:"vphantom",mode:t.mode,body:r}},htmlBuilder:(n,e)=>{var t=S.makeSpan(["inner"],[Y(n.body,e.withPhantom())]),r=S.makeSpan(["fix"],[]);return S.makeSpan(["mord","rlap"],[t,r],e)},mathmlBuilder:(n,e)=>{var t=Ae(ae(n.body),e),r=new A.MathNode("mphantom",t),i=new A.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}});O({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(n,e){var{parser:t}=n,r=J(e[0],"size").value,i=e[1];return{type:"raisebox",mode:t.mode,dy:r,body:i}},htmlBuilder(n,e){var t=Y(n.body,e),r=re(n.dy,e);return S.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(n,e){var t=new A.MathNode("mpadded",[Q(n.body,e)]),r=n.dy.number+n.dy.unit;return t.setAttribute("voffset",r),t}});O({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(n){var{parser:e}=n;return{type:"internal",mode:e.mode}}});O({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(n,e,t){var{parser:r}=n,i=t[0],s=J(e[0],"size"),a=J(e[1],"size");return{type:"rule",mode:r.mode,shift:i&&J(i,"size").value,width:s.value,height:a.value}},htmlBuilder(n,e){var t=S.makeSpan(["mord","rule"],[],e),r=re(n.width,e),i=re(n.height,e),s=n.shift?re(n.shift,e):0;return t.style.borderRightWidth=D(r),t.style.borderTopWidth=D(i),t.style.bottom=D(s),t.width=r,t.height=i+s,t.depth=-s,t.maxFontSize=i*1.125*e.sizeMultiplier,t},mathmlBuilder(n,e){var t=re(n.width,e),r=re(n.height,e),i=n.shift?re(n.shift,e):0,s=e.color&&e.getColor()||"black",a=new A.MathNode("mspace");a.setAttribute("mathbackground",s),a.setAttribute("width",D(t)),a.setAttribute("height",D(r));var l=new A.MathNode("mpadded",[a]);return i>=0?l.setAttribute("height",D(i)):(l.setAttribute("height",D(i)),l.setAttribute("depth",D(-i))),l.setAttribute("voffset",D(i)),l}});function To(n,e,t){for(var r=ce(n,e,!1),i=e.sizeMultiplier/t.sizeMultiplier,s=0;s<r.length;s++){var a=r[s].classes.indexOf("sizing");a<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(t)):r[s].classes[a+1]==="reset-size"+e.size&&(r[s].classes[a+1]="reset-size"+t.size),r[s].height*=i,r[s].depth*=i}return S.makeFragment(r)}var _s=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Zd=(n,e)=>{var t=e.havingSize(n.size);return To(n.body,t,e)};O({type:"sizing",names:_s,props:{numArgs:0,allowedInText:!0},handler:(n,e)=>{var{breakOnTokenText:t,funcName:r,parser:i}=n,s=i.parseExpression(!1,t);return{type:"sizing",mode:i.mode,size:_s.indexOf(r)+1,body:s}},htmlBuilder:Zd,mathmlBuilder:(n,e)=>{var t=e.havingSize(n.size),r=Ae(n.body,t),i=new A.MathNode("mstyle",r);return i.setAttribute("mathsize",D(t.sizeMultiplier)),i}});O({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(n,e,t)=>{var{parser:r}=n,i=!1,s=!1,a=t[0]&&J(t[0],"ordgroup");if(a)for(var l="",o=0;o<a.body.length;++o){var h=a.body[o];if(l=h.text,l==="t")i=!0;else if(l==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var d=e[0];return{type:"smash",mode:r.mode,body:d,smashHeight:i,smashDepth:s}},htmlBuilder:(n,e)=>{var t=S.makeSpan([],[Y(n.body,e)]);if(!n.smashHeight&&!n.smashDepth)return t;if(n.smashHeight&&(t.height=0,t.children))for(var r=0;r<t.children.length;r++)t.children[r].height=0;if(n.smashDepth&&(t.depth=0,t.children))for(var i=0;i<t.children.length;i++)t.children[i].depth=0;var s=S.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return S.makeSpan(["mord"],[s],e)},mathmlBuilder:(n,e)=>{var t=new A.MathNode("mpadded",[Q(n.body,e)]);return n.smashHeight&&t.setAttribute("height","0px"),n.smashDepth&&t.setAttribute("depth","0px"),t}});O({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(n,e,t){var{parser:r}=n,i=t[0],s=e[0];return{type:"sqrt",mode:r.mode,body:s,index:i}},htmlBuilder(n,e){var t=Y(n.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=S.wrapFragment(t,e);var r=e.fontMetrics(),i=r.defaultRuleThickness,s=i;e.style.id<q.TEXT.id&&(s=e.fontMetrics().xHeight);var a=i+s/4,l=t.height+t.depth+a+i,{span:o,ruleWidth:h,advanceWidth:d}=ct.sqrtImage(l,e),f=o.height-h;f>t.height+t.depth+a&&(a=(a+f-t.height-t.depth)/2);var g=o.height-t.height-a-h;t.style.paddingLeft=D(d);var y=S.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+g)},{type:"elem",elem:o},{type:"kern",size:h}]},e);if(n.index){var v=e.havingStyle(q.SCRIPTSCRIPT),k=Y(n.index,v,e),M=.6*(y.height-y.depth),T=S.makeVList({positionType:"shift",positionData:-M,children:[{type:"elem",elem:k}]},e),R=S.makeSpan(["root"],[T]);return S.makeSpan(["mord","sqrt"],[R,y],e)}else return S.makeSpan(["mord","sqrt"],[y],e)},mathmlBuilder(n,e){var{body:t,index:r}=n;return r?new A.MathNode("mroot",[Q(t,e),Q(r,e)]):new A.MathNode("msqrt",[Q(t,e)])}});var ea={display:q.DISPLAY,text:q.TEXT,script:q.SCRIPT,scriptscript:q.SCRIPTSCRIPT};O({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(n,e){var{breakOnTokenText:t,funcName:r,parser:i}=n,s=i.parseExpression(!0,t),a=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:a,body:s}},htmlBuilder(n,e){var t=ea[n.style],r=e.havingStyle(t).withFont("");return To(n.body,r,e)},mathmlBuilder(n,e){var t=ea[n.style],r=e.havingStyle(t),i=Ae(n.body,r),s=new A.MathNode("mstyle",i),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},l=a[n.style];return s.setAttribute("scriptlevel",l[0]),s.setAttribute("displaystyle",l[1]),s}});var Qd=function(e,t){var r=e.base;if(r)if(r.type==="op"){var i=r.limits&&(t.style.size===q.DISPLAY.size||r.alwaysHandleSupSub);return i?gr:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(t.style.size===q.DISPLAY.size||r.limits);return s?Mo:null}else{if(r.type==="accent")return F.isCharacterBox(r.base)?fi:null;if(r.type==="horizBrace"){var a=!e.sub;return a===r.isOver?wo:null}else return null}else return null};jt({type:"supsub",htmlBuilder(n,e){var t=Qd(n,e);if(t)return t(n,e);var{base:r,sup:i,sub:s}=n,a=Y(r,e),l,o,h=e.fontMetrics(),d=0,f=0,g=r&&F.isCharacterBox(r);if(i){var y=e.havingStyle(e.style.sup());l=Y(i,y,e),g||(d=a.height-y.fontMetrics().supDrop*y.sizeMultiplier/e.sizeMultiplier)}if(s){var v=e.havingStyle(e.style.sub());o=Y(s,v,e),g||(f=a.depth+v.fontMetrics().subDrop*v.sizeMultiplier/e.sizeMultiplier)}var k;e.style===q.DISPLAY?k=h.sup1:e.style.cramped?k=h.sup3:k=h.sup2;var M=e.sizeMultiplier,T=D(.5/h.ptPerEm/M),R=null;if(o){var L=n.base&&n.base.type==="op"&&n.base.name&&(n.base.name==="\\oiint"||n.base.name==="\\oiiint");(a instanceof He||L)&&(R=D(-a.italic))}var $;if(l&&o){d=Math.max(d,k,l.depth+.25*h.xHeight),f=Math.max(f,h.sub2);var H=h.defaultRuleThickness,G=4*H;if(d-l.depth-(o.height-f)<G){f=G-(d-l.depth)+o.height;var U=.8*h.xHeight-(d-l.depth);U>0&&(d+=U,f-=U)}var Z=[{type:"elem",elem:o,shift:f,marginRight:T,marginLeft:R},{type:"elem",elem:l,shift:-d,marginRight:T}];$=S.makeVList({positionType:"individualShift",children:Z},e)}else if(o){f=Math.max(f,h.sub1,o.height-.8*h.xHeight);var I=[{type:"elem",elem:o,marginLeft:R,marginRight:T}];$=S.makeVList({positionType:"shift",positionData:f,children:I},e)}else if(l)d=Math.max(d,k,l.depth+.25*h.xHeight),$=S.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:l,marginRight:T}]},e);else throw new Error("supsub must have either sup or sub.");var de=qn(a,"right")||"mord";return S.makeSpan([de],[a,S.makeSpan(["msupsub"],[$])],e)},mathmlBuilder(n,e){var t=!1,r,i;n.base&&n.base.type==="horizBrace"&&(i=!!n.sup,i===n.base.isOver&&(t=!0,r=n.base.isOver)),n.base&&(n.base.type==="op"||n.base.type==="operatorname")&&(n.base.parentIsSupSub=!0);var s=[Q(n.base,e)];n.sub&&s.push(Q(n.sub,e)),n.sup&&s.push(Q(n.sup,e));var a;if(t)a=r?"mover":"munder";else if(n.sub)if(n.sup){var h=n.base;h&&h.type==="op"&&h.limits&&e.style===q.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===q.DISPLAY||h.limits)?a="munderover":a="msubsup"}else{var o=n.base;o&&o.type==="op"&&o.limits&&(e.style===q.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||e.style===q.DISPLAY)?a="munder":a="msub"}else{var l=n.base;l&&l.type==="op"&&l.limits&&(e.style===q.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===q.DISPLAY)?a="mover":a="msup"}return new A.MathNode(a,s)}});jt({type:"atom",htmlBuilder(n,e){return S.mathsym(n.text,n.mode,e,["m"+n.family])},mathmlBuilder(n,e){var t=new A.MathNode("mo",[We(n.text,n.mode)]);if(n.family==="bin"){var r=ci(n,e);r==="bold-italic"&&t.setAttribute("mathvariant",r)}else n.family==="punct"?t.setAttribute("separator","true"):(n.family==="open"||n.family==="close")&&t.setAttribute("stretchy","false");return t}});var Co={mi:"italic",mn:"normal",mtext:"normal"};jt({type:"mathord",htmlBuilder(n,e){return S.makeOrd(n,e,"mathord")},mathmlBuilder(n,e){var t=new A.MathNode("mi",[We(n.text,n.mode,e)]),r=ci(n,e)||"italic";return r!==Co[t.type]&&t.setAttribute("mathvariant",r),t}});jt({type:"textord",htmlBuilder(n,e){return S.makeOrd(n,e,"textord")},mathmlBuilder(n,e){var t=We(n.text,n.mode,e),r=ci(n,e)||"normal",i;return n.mode==="text"?i=new A.MathNode("mtext",[t]):/[0-9]/.test(n.text)?i=new A.MathNode("mn",[t]):n.text==="\\prime"?i=new A.MathNode("mo",[t]):i=new A.MathNode("mi",[t]),r!==Co[i.type]&&i.setAttribute("mathvariant",r),i}});var gn={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},yn={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};jt({type:"spacing",htmlBuilder(n,e){if(yn.hasOwnProperty(n.text)){var t=yn[n.text].className||"";if(n.mode==="text"){var r=S.makeOrd(n,e,"textord");return r.classes.push(t),r}else return S.makeSpan(["mspace",t],[S.mathsym(n.text,n.mode,e)],e)}else{if(gn.hasOwnProperty(n.text))return S.makeSpan(["mspace",gn[n.text]],[],e);throw new N('Unknown type of space "'+n.text+'"')}},mathmlBuilder(n,e){var t;if(yn.hasOwnProperty(n.text))t=new A.MathNode("mtext",[new A.TextNode(" ")]);else{if(gn.hasOwnProperty(n.text))return new A.MathNode("mspace");throw new N('Unknown type of space "'+n.text+'"')}return t}});var ta=()=>{var n=new A.MathNode("mtd",[]);return n.setAttribute("width","50%"),n};jt({type:"tag",mathmlBuilder(n,e){var t=new A.MathNode("mtable",[new A.MathNode("mtr",[ta(),new A.MathNode("mtd",[Bt(n.body,e)]),ta(),new A.MathNode("mtd",[Bt(n.tag,e)])])]);return t.setAttribute("width","100%"),t}});var ra={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},na={"\\textbf":"textbf","\\textmd":"textmd"},_d={"\\textit":"textit","\\textup":"textup"},ia=(n,e)=>{var t=n.font;if(t){if(ra[t])return e.withTextFontFamily(ra[t]);if(na[t])return e.withTextFontWeight(na[t]);if(t==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(_d[t])};O({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(n,e){var{parser:t,funcName:r}=n,i=e[0];return{type:"text",mode:t.mode,body:ae(i),font:r}},htmlBuilder(n,e){var t=ia(n,e),r=ce(n.body,t,!0);return S.makeSpan(["mord","text"],r,t)},mathmlBuilder(n,e){var t=ia(n,e);return Bt(n.body,t)}});O({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(n,e){var{parser:t}=n;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(n,e){var t=Y(n.body,e),r=S.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=S.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:t}]},e);return S.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(n,e){var t=new A.MathNode("mo",[new A.TextNode("‾")]);t.setAttribute("stretchy","true");var r=new A.MathNode("munder",[Q(n.body,e),t]);return r.setAttribute("accentunder","true"),r}});O({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(n,e){var{parser:t}=n;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(n,e){var t=Y(n.body,e),r=e.fontMetrics().axisHeight,i=.5*(t.height-r-(t.depth+r));return S.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(n,e){return new A.MathNode("mpadded",[Q(n.body,e)],["vcenter"])}});O({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(n,e,t){throw new N("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(n,e){for(var t=sa(n),r=[],i=e.havingStyle(e.style.text()),s=0;s<t.length;s++){var a=t[s];a==="~"&&(a="\\textasciitilde"),r.push(S.makeSymbol(a,"Typewriter-Regular",n.mode,i,["mord","texttt"]))}return S.makeSpan(["mord","text"].concat(i.sizingClasses(e)),S.tryCombineChars(r),i)},mathmlBuilder(n,e){var t=new A.TextNode(sa(n)),r=new A.MathNode("mtext",[t]);return r.setAttribute("mathvariant","monospace"),r}});var sa=n=>n.body.replace(/ /g,n.star?"␣":" "),At=Yl,Ao=`[ \r
	]`,ef="\\\\[a-zA-Z@]+",tf="\\\\[^\uD800-\uDFFF]",rf="("+ef+")"+Ao+"*",nf=`\\\\(
|[ \r	]+
?)[ \r	]*`,Wn="[̀-ͯ]",sf=new RegExp(Wn+"+$"),af="("+Ao+"+)|"+(nf+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(Wn+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Wn+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+rf)+("|"+tf+")");class aa{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(af,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Ve("EOF",new Ne(this,t,t));var r=this.tokenRegex.exec(e);if(r===null||r.index!==t)throw new N("Unexpected character: '"+e[t]+"'",new Ve(e[t],new Ne(this,t,t+1)));var i=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new Ve(i,new Ne(this,t,this.tokenRegex.lastIndex))}}class lf{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new N("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,r){if(r===void 0&&(r=!1),r){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var of=go;m("\\noexpand",function(n){var e=n.popToken();return n.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});m("\\expandafter",function(n){var e=n.popToken();return n.expandOnce(!0),{tokens:[e],numArgs:0}});m("\\@firstoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[0],numArgs:0}});m("\\@secondoftwo",function(n){var e=n.consumeArgs(2);return{tokens:e[1],numArgs:0}});m("\\@ifnextchar",function(n){var e=n.consumeArgs(3);n.consumeSpaces();var t=n.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});m("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");m("\\TextOrMath",function(n){var e=n.consumeArgs(2);return n.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var la={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};m("\\char",function(n){var e=n.popToken(),t,r="";if(e.text==="'")t=8,e=n.popToken();else if(e.text==='"')t=16,e=n.popToken();else if(e.text==="`")if(e=n.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new N("\\char` missing argument");r=e.text.charCodeAt(0)}else t=10;if(t){if(r=la[e.text],r==null||r>=t)throw new N("Invalid base-"+t+" digit "+e.text);for(var i;(i=la[n.future().text])!=null&&i<t;)r*=t,r+=i,n.popToken()}return"\\@char{"+r+"}"});var wi=(n,e,t,r)=>{var i=n.consumeArg().tokens;if(i.length!==1)throw new N("\\newcommand's first argument must be a macro name");var s=i[0].text,a=n.isDefined(s);if(a&&!e)throw new N("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!a&&!t)throw new N("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var l=0;if(i=n.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var o="",h=n.expandNextToken();h.text!=="]"&&h.text!=="EOF";)o+=h.text,h=n.expandNextToken();if(!o.match(/^\s*[0-9]+\s*$/))throw new N("Invalid number of arguments: "+o);l=parseInt(o),i=n.consumeArg().tokens}return a&&r||n.macros.set(s,{tokens:i,numArgs:l}),""};m("\\newcommand",n=>wi(n,!1,!0,!1));m("\\renewcommand",n=>wi(n,!0,!1,!1));m("\\providecommand",n=>wi(n,!0,!0,!0));m("\\message",n=>{var e=n.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});m("\\errmessage",n=>{var e=n.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});m("\\show",n=>{var e=n.popToken(),t=e.text;return console.log(e,n.macros.get(t),At[t],_.math[t],_.text[t]),""});m("\\bgroup","{");m("\\egroup","}");m("~","\\nobreakspace");m("\\lq","`");m("\\rq","'");m("\\aa","\\r a");m("\\AA","\\r A");m("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");m("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");m("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");m("ℬ","\\mathscr{B}");m("ℰ","\\mathscr{E}");m("ℱ","\\mathscr{F}");m("ℋ","\\mathscr{H}");m("ℐ","\\mathscr{I}");m("ℒ","\\mathscr{L}");m("ℳ","\\mathscr{M}");m("ℛ","\\mathscr{R}");m("ℭ","\\mathfrak{C}");m("ℌ","\\mathfrak{H}");m("ℨ","\\mathfrak{Z}");m("\\Bbbk","\\Bbb{k}");m("·","\\cdotp");m("\\llap","\\mathllap{\\textrm{#1}}");m("\\rlap","\\mathrlap{\\textrm{#1}}");m("\\clap","\\mathclap{\\textrm{#1}}");m("\\mathstrut","\\vphantom{(}");m("\\underbar","\\underline{\\text{#1}}");m("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');m("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");m("\\ne","\\neq");m("≠","\\neq");m("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");m("∉","\\notin");m("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");m("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");m("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");m("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");m("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");m("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");m("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");m("⟂","\\perp");m("‼","\\mathclose{!\\mkern-0.8mu!}");m("∌","\\notni");m("⌜","\\ulcorner");m("⌝","\\urcorner");m("⌞","\\llcorner");m("⌟","\\lrcorner");m("©","\\copyright");m("®","\\textregistered");m("️","\\textregistered");m("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');m("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');m("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');m("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');m("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");m("⋮","\\vdots");m("\\varGamma","\\mathit{\\Gamma}");m("\\varDelta","\\mathit{\\Delta}");m("\\varTheta","\\mathit{\\Theta}");m("\\varLambda","\\mathit{\\Lambda}");m("\\varXi","\\mathit{\\Xi}");m("\\varPi","\\mathit{\\Pi}");m("\\varSigma","\\mathit{\\Sigma}");m("\\varUpsilon","\\mathit{\\Upsilon}");m("\\varPhi","\\mathit{\\Phi}");m("\\varPsi","\\mathit{\\Psi}");m("\\varOmega","\\mathit{\\Omega}");m("\\substack","\\begin{subarray}{c}#1\\end{subarray}");m("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");m("\\boxed","\\fbox{$\\displaystyle{#1}$}");m("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");m("\\implies","\\DOTSB\\;\\Longrightarrow\\;");m("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");m("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");m("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var oa={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};m("\\dots",function(n){var e="\\dotso",t=n.expandAfterFuture().text;return t in oa?e=oa[t]:(t.slice(0,4)==="\\not"||t in _.math&&F.contains(["bin","rel"],_.math[t].group))&&(e="\\dotsb"),e});var ki={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};m("\\dotso",function(n){var e=n.future().text;return e in ki?"\\ldots\\,":"\\ldots"});m("\\dotsc",function(n){var e=n.future().text;return e in ki&&e!==","?"\\ldots\\,":"\\ldots"});m("\\cdots",function(n){var e=n.future().text;return e in ki?"\\@cdots\\,":"\\@cdots"});m("\\dotsb","\\cdots");m("\\dotsm","\\cdots");m("\\dotsi","\\!\\cdots");m("\\dotsx","\\ldots\\,");m("\\DOTSI","\\relax");m("\\DOTSB","\\relax");m("\\DOTSX","\\relax");m("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");m("\\,","\\tmspace+{3mu}{.1667em}");m("\\thinspace","\\,");m("\\>","\\mskip{4mu}");m("\\:","\\tmspace+{4mu}{.2222em}");m("\\medspace","\\:");m("\\;","\\tmspace+{5mu}{.2777em}");m("\\thickspace","\\;");m("\\!","\\tmspace-{3mu}{.1667em}");m("\\negthinspace","\\!");m("\\negmedspace","\\tmspace-{4mu}{.2222em}");m("\\negthickspace","\\tmspace-{5mu}{.277em}");m("\\enspace","\\kern.5em ");m("\\enskip","\\hskip.5em\\relax");m("\\quad","\\hskip1em\\relax");m("\\qquad","\\hskip2em\\relax");m("\\tag","\\@ifstar\\tag@literal\\tag@paren");m("\\tag@paren","\\tag@literal{({#1})}");m("\\tag@literal",n=>{if(n.macros.get("\\df@tag"))throw new N("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});m("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");m("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");m("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");m("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");m("\\newline","\\\\\\relax");m("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var No=D(Xe["Main-Regular"][84][1]-.7*Xe["Main-Regular"][65][1]);m("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+No+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");m("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+No+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");m("\\hspace","\\@ifstar\\@hspacer\\@hspace");m("\\@hspace","\\hskip #1\\relax");m("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");m("\\ordinarycolon",":");m("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");m("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');m("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');m("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');m("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');m("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');m("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');m("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');m("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');m("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');m("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');m("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');m("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');m("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');m("∷","\\dblcolon");m("∹","\\eqcolon");m("≔","\\coloneqq");m("≕","\\eqqcolon");m("⩴","\\Coloneqq");m("\\ratio","\\vcentcolon");m("\\coloncolon","\\dblcolon");m("\\colonequals","\\coloneqq");m("\\coloncolonequals","\\Coloneqq");m("\\equalscolon","\\eqqcolon");m("\\equalscoloncolon","\\Eqqcolon");m("\\colonminus","\\coloneq");m("\\coloncolonminus","\\Coloneq");m("\\minuscolon","\\eqcolon");m("\\minuscoloncolon","\\Eqcolon");m("\\coloncolonapprox","\\Colonapprox");m("\\coloncolonsim","\\Colonsim");m("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");m("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");m("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");m("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");m("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");m("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");m("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");m("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");m("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");m("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");m("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");m("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");m("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");m("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");m("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");m("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");m("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");m("\\nleqq","\\html@mathml{\\@nleqq}{≰}");m("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");m("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");m("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");m("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");m("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");m("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");m("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");m("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");m("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");m("\\imath","\\html@mathml{\\@imath}{ı}");m("\\jmath","\\html@mathml{\\@jmath}{ȷ}");m("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");m("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");m("⟦","\\llbracket");m("⟧","\\rrbracket");m("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");m("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");m("⦃","\\lBrace");m("⦄","\\rBrace");m("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");m("⦵","\\minuso");m("\\darr","\\downarrow");m("\\dArr","\\Downarrow");m("\\Darr","\\Downarrow");m("\\lang","\\langle");m("\\rang","\\rangle");m("\\uarr","\\uparrow");m("\\uArr","\\Uparrow");m("\\Uarr","\\Uparrow");m("\\N","\\mathbb{N}");m("\\R","\\mathbb{R}");m("\\Z","\\mathbb{Z}");m("\\alef","\\aleph");m("\\alefsym","\\aleph");m("\\Alpha","\\mathrm{A}");m("\\Beta","\\mathrm{B}");m("\\bull","\\bullet");m("\\Chi","\\mathrm{X}");m("\\clubs","\\clubsuit");m("\\cnums","\\mathbb{C}");m("\\Complex","\\mathbb{C}");m("\\Dagger","\\ddagger");m("\\diamonds","\\diamondsuit");m("\\empty","\\emptyset");m("\\Epsilon","\\mathrm{E}");m("\\Eta","\\mathrm{H}");m("\\exist","\\exists");m("\\harr","\\leftrightarrow");m("\\hArr","\\Leftrightarrow");m("\\Harr","\\Leftrightarrow");m("\\hearts","\\heartsuit");m("\\image","\\Im");m("\\infin","\\infty");m("\\Iota","\\mathrm{I}");m("\\isin","\\in");m("\\Kappa","\\mathrm{K}");m("\\larr","\\leftarrow");m("\\lArr","\\Leftarrow");m("\\Larr","\\Leftarrow");m("\\lrarr","\\leftrightarrow");m("\\lrArr","\\Leftrightarrow");m("\\Lrarr","\\Leftrightarrow");m("\\Mu","\\mathrm{M}");m("\\natnums","\\mathbb{N}");m("\\Nu","\\mathrm{N}");m("\\Omicron","\\mathrm{O}");m("\\plusmn","\\pm");m("\\rarr","\\rightarrow");m("\\rArr","\\Rightarrow");m("\\Rarr","\\Rightarrow");m("\\real","\\Re");m("\\reals","\\mathbb{R}");m("\\Reals","\\mathbb{R}");m("\\Rho","\\mathrm{P}");m("\\sdot","\\cdot");m("\\sect","\\S");m("\\spades","\\spadesuit");m("\\sub","\\subset");m("\\sube","\\subseteq");m("\\supe","\\supseteq");m("\\Tau","\\mathrm{T}");m("\\thetasym","\\vartheta");m("\\weierp","\\wp");m("\\Zeta","\\mathrm{Z}");m("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");m("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");m("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");m("\\bra","\\mathinner{\\langle{#1}|}");m("\\ket","\\mathinner{|{#1}\\rangle}");m("\\braket","\\mathinner{\\langle{#1}\\rangle}");m("\\Bra","\\left\\langle#1\\right|");m("\\Ket","\\left|#1\\right\\rangle");var zo=n=>e=>{var t=e.consumeArg().tokens,r=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.consumeArg().tokens,a=e.macros.get("|"),l=e.macros.get("\\|");e.macros.beginGroup();var o=f=>g=>{n&&(g.macros.set("|",a),i.length&&g.macros.set("\\|",l));var y=f;if(!f&&i.length){var v=g.future();v.text==="|"&&(g.popToken(),y=!0)}return{tokens:y?i:r,numArgs:0}};e.macros.set("|",o(!1)),i.length&&e.macros.set("\\|",o(!0));var h=e.consumeArg().tokens,d=e.expandTokens([...s,...h,...t]);return e.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};m("\\bra@ket",zo(!1));m("\\bra@set",zo(!0));m("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");m("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");m("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");m("\\angln","{\\angl n}");m("\\blue","\\textcolor{##6495ed}{#1}");m("\\orange","\\textcolor{##ffa500}{#1}");m("\\pink","\\textcolor{##ff00af}{#1}");m("\\red","\\textcolor{##df0030}{#1}");m("\\green","\\textcolor{##28ae7b}{#1}");m("\\gray","\\textcolor{gray}{#1}");m("\\purple","\\textcolor{##9d38bd}{#1}");m("\\blueA","\\textcolor{##ccfaff}{#1}");m("\\blueB","\\textcolor{##80f6ff}{#1}");m("\\blueC","\\textcolor{##63d9ea}{#1}");m("\\blueD","\\textcolor{##11accd}{#1}");m("\\blueE","\\textcolor{##0c7f99}{#1}");m("\\tealA","\\textcolor{##94fff5}{#1}");m("\\tealB","\\textcolor{##26edd5}{#1}");m("\\tealC","\\textcolor{##01d1c1}{#1}");m("\\tealD","\\textcolor{##01a995}{#1}");m("\\tealE","\\textcolor{##208170}{#1}");m("\\greenA","\\textcolor{##b6ffb0}{#1}");m("\\greenB","\\textcolor{##8af281}{#1}");m("\\greenC","\\textcolor{##74cf70}{#1}");m("\\greenD","\\textcolor{##1fab54}{#1}");m("\\greenE","\\textcolor{##0d923f}{#1}");m("\\goldA","\\textcolor{##ffd0a9}{#1}");m("\\goldB","\\textcolor{##ffbb71}{#1}");m("\\goldC","\\textcolor{##ff9c39}{#1}");m("\\goldD","\\textcolor{##e07d10}{#1}");m("\\goldE","\\textcolor{##a75a05}{#1}");m("\\redA","\\textcolor{##fca9a9}{#1}");m("\\redB","\\textcolor{##ff8482}{#1}");m("\\redC","\\textcolor{##f9685d}{#1}");m("\\redD","\\textcolor{##e84d39}{#1}");m("\\redE","\\textcolor{##bc2612}{#1}");m("\\maroonA","\\textcolor{##ffbde0}{#1}");m("\\maroonB","\\textcolor{##ff92c6}{#1}");m("\\maroonC","\\textcolor{##ed5fa6}{#1}");m("\\maroonD","\\textcolor{##ca337c}{#1}");m("\\maroonE","\\textcolor{##9e034e}{#1}");m("\\purpleA","\\textcolor{##ddd7ff}{#1}");m("\\purpleB","\\textcolor{##c6b9fc}{#1}");m("\\purpleC","\\textcolor{##aa87ff}{#1}");m("\\purpleD","\\textcolor{##7854ab}{#1}");m("\\purpleE","\\textcolor{##543b78}{#1}");m("\\mintA","\\textcolor{##f5f9e8}{#1}");m("\\mintB","\\textcolor{##edf2df}{#1}");m("\\mintC","\\textcolor{##e0e5cc}{#1}");m("\\grayA","\\textcolor{##f6f7f7}{#1}");m("\\grayB","\\textcolor{##f0f1f2}{#1}");m("\\grayC","\\textcolor{##e3e5e6}{#1}");m("\\grayD","\\textcolor{##d6d8da}{#1}");m("\\grayE","\\textcolor{##babec2}{#1}");m("\\grayF","\\textcolor{##888d93}{#1}");m("\\grayG","\\textcolor{##626569}{#1}");m("\\grayH","\\textcolor{##3b3e40}{#1}");m("\\grayI","\\textcolor{##21242c}{#1}");m("\\kaBlue","\\textcolor{##314453}{#1}");m("\\kaGreen","\\textcolor{##71B307}{#1}");var Do={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class hf{constructor(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new lf(of,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new aa(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,r,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:i,end:r}=this.consumeArg(["]"])}else({tokens:i,start:t,end:r}=this.consumeArg());return this.pushToken(new Ve("EOF",r.loc)),this.pushTokens(i),t.range(r,"")}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],r=e&&e.length>0;r||this.consumeSpaces();var i=this.future(),s,a=0,l=0;do{if(s=this.popToken(),t.push(s),s.text==="{")++a;else if(s.text==="}"){if(--a,a===-1)throw new N("Extra }",s)}else if(s.text==="EOF")throw new N("Unexpected end of input in a macro argument, expected '"+(e&&r?e[l]:"}")+"'",s);if(e&&r)if((a===0||a===1&&e[l]==="{")&&s.text===e[l]){if(++l,l===e.length){t.splice(-l,l);break}}else l=0}while(a!==0||r);return i.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:s}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new N("The length of delimiters doesn't match the number of args!");for(var r=t[0],i=0;i<r.length;i++){var s=this.popToken();if(r[i]!==s.text)throw new N("Use of the macro doesn't match its definition",s)}}for(var a=[],l=0;l<e;l++)a.push(this.consumeArg(t&&t[l+1]).tokens);return a}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new N("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),r=t.text,i=t.noexpand?null:this._getExpansion(r);if(i==null||e&&i.unexpandable){if(e&&i==null&&r[0]==="\\"&&!this.isDefined(r))throw new N("Undefined control sequence: "+r);return this.pushToken(t),!1}this.countExpansion(1);var s=i.tokens,a=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var l=s.length-1;l>=0;--l){var o=s[l];if(o.text==="#"){if(l===0)throw new N("Incomplete placeholder at end of macro body",o);if(o=s[--l],o.text==="#")s.splice(l+1,1);else if(/^[1-9]$/.test(o.text))s.splice(l,2,...a[+o.text-1]);else throw new N("Not a valid argument number",o)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Ve(e)]):void 0}expandTokens(e){var t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),t.push(i)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(r=>r.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var i=typeof t=="function"?t(this):t;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var a=i.replace(/##/g,"");a.indexOf("#"+(s+1))!==-1;)++s;for(var l=new aa(i,this.settings),o=[],h=l.lex();h.text!=="EOF";)o.push(h),h=l.lex();o.reverse();var d={tokens:o,numArgs:s};return d}return i}isDefined(e){return this.macros.has(e)||At.hasOwnProperty(e)||_.math.hasOwnProperty(e)||_.text.hasOwnProperty(e)||Do.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:At.hasOwnProperty(e)&&!At[e].primitive}}var ha=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,s0=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),vn={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},ua={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class q0{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new hf(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new N("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new Ve("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(e,t){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(q0.endOfExpression.indexOf(i.text)!==-1||t&&i.text===t||e&&At[i.text]&&At[i.text].infix)break;var s=this.parseAtom(t);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var t=-1,r,i=0;i<e.length;i++)if(e[i].type==="infix"){if(t!==-1)throw new N("only one infix operator per group",e[i].token);t=i,r=e[i].replaceWith}if(t!==-1&&r){var s,a,l=e.slice(0,t),o=e.slice(t+1);l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l},o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o};var h;return r==="\\\\abovefrac"?h=this.callFunction(r,[s,e[t],a],[]):h=this.callFunction(r,[s,a],[]),[h]}else return e}handleSupSubscript(e){var t=this.fetch(),r=t.text;this.consume(),this.consumeSpaces();var i=this.parseGroup(e);if(!i)throw new N("Expected group after '"+r+"'",t);return i}formatUnsupportedCmd(e){for(var t=[],r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});var i={type:"text",mode:this.mode,body:t},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(e){var t=this.parseGroup("atom",e);if(this.mode==="text")return t;for(var r,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(t&&t.type==="op"){var a=s.text==="\\limits";t.limits=a,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=s.text==="\\limits");else throw new N("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new N("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new N("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new N("Double superscript",s);var l={type:"textord",mode:this.mode,text:"\\prime"},o=[l];for(this.consume();this.fetch().text==="'";)o.push(l),this.consume();this.fetch().text==="^"&&o.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:o}}else if(s0[s.text]){var h=ha.test(s.text),d=[];for(d.push(new Ve(s0[s.text])),this.consume();;){var f=this.fetch().text;if(!s0[f]||ha.test(f)!==h)break;d.unshift(new Ve(s0[f])),this.consume()}var g=this.subparse(d);h?i={type:"ordgroup",mode:"math",body:g}:r={type:"ordgroup",mode:"math",body:g}}else break}return r||i?{type:"supsub",mode:this.mode,base:t,sup:r,sub:i}:t}parseFunction(e,t){var r=this.fetch(),i=r.text,s=At[i];if(!s)return null;if(this.consume(),t&&t!=="atom"&&!s.allowedInArgument)throw new N("Got function '"+i+"' with no arguments"+(t?" as "+t:""),r);if(this.mode==="text"&&!s.allowedInText)throw new N("Can't use function '"+i+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new N("Can't use function '"+i+"' in math mode",r);var{args:a,optArgs:l}=this.parseArguments(i,s);return this.callFunction(i,a,l,r,e)}callFunction(e,t,r,i,s){var a={funcName:e,parser:this,token:i,breakOnTokenText:s},l=At[e];if(l&&l.handler)return l.handler(a,t,r);throw new N("No function handler for "+e)}parseArguments(e,t){var r=t.numArgs+t.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var i=[],s=[],a=0;a<r;a++){var l=t.argTypes&&t.argTypes[a],o=a<t.numOptionalArgs;(t.primitive&&l==null||t.type==="sqrt"&&a===1&&s[0]==null)&&(l="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",l,o);if(o)s.push(h);else if(h!=null)i.push(h);else throw new N("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(e,t,r){switch(t){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,t);case"hbox":{var i=this.parseArgumentGroup(r,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new N("A primitive argument cannot be optional");var a=this.parseGroup(e);if(a==null)throw new N("Expected group as "+e,this.fetch());return a}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new N("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var r=this.gullet.scanArgument(t);if(r==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,t){for(var r=this.fetch(),i=r,s="",a;(a=this.fetch()).text!=="EOF"&&e.test(s+a.text);)i=a,s+=i.text,this.consume();if(s==="")throw new N("Invalid "+t+": '"+r.text+"'",r);return r.range(i,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!r)throw new N("Invalid color: '"+t.text+"'",t);var i=r[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var t,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",r=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!i)throw new N("Invalid size: '"+t.text+"'",t);var s={number:+(i[1]+i[2]),unit:i[3]};if(!Ll(s))throw new N("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){var r=this.gullet.scanArgument(e);if(r==null)return null;var i=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var a={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return t&&this.switchMode(i),a}parseGroup(e,t){var r=this.fetch(),i=r.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var a=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,a),o=this.fetch();this.expect(a),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:Ne.range(r,o),body:l,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(t,e)||this.parseSymbol(),s==null&&i[0]==="\\"&&!Do.hasOwnProperty(i)){if(this.settings.throwOnError)throw new N("Undefined control sequence: "+i,r);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(e){for(var t=e.length-1,r=0;r<t;++r){var i=e[r],s=i.text;s==="-"&&e[r+1].text==="-"&&(r+1<t&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:Ne.range(i,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:Ne.range(i,e[r+1]),text:"--"}),t-=1)),(s==="'"||s==="`")&&e[r+1].text===s&&(e.splice(r,2,{type:"textord",mode:"text",loc:Ne.range(i,e[r+1]),text:s+s}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var r=t.slice(5),i=r.charAt(0)==="*";if(i&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new N(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:i}}ua.hasOwnProperty(t[0])&&!_[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=ua[t[0]]+t.slice(1));var s=sf.exec(t);s&&(t=t.substring(0,s.index),t==="i"?t="ı":t==="j"&&(t="ȷ"));var a;if(_[this.mode][t]){this.settings.strict&&this.mode==="math"&&Pn.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var l=_[this.mode][t].group,o=Ne.range(e),h;if(Xc.hasOwnProperty(l)){var d=l;h={type:"atom",mode:this.mode,family:d,loc:o,text:t}}else h={type:l,mode:this.mode,loc:o,text:t};a=h}else if(t.charCodeAt(0)>=128)this.settings.strict&&(ql(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),a={type:"textord",mode:"text",loc:Ne.range(e),text:t};else return null;if(this.consume(),s)for(var f=0;f<s[0].length;f++){var g=s[0][f];if(!vn[g])throw new N("Unknown accent ' "+g+"'",e);var y=vn[g][this.mode]||vn[g].text;if(!y)throw new N("Accent "+g+" unsupported in "+this.mode+" mode",e);a={type:"accent",mode:this.mode,loc:Ne.range(e),label:y,isStretchy:!1,isShifty:!0,base:a}}return a}}q0.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Si=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new q0(e,t);delete r.gullet.macros.current["\\df@tag"];var i=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new N("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:r.subparse([new Ve("\\df@tag")])}]}return i},Oo=function(e,t,r){t.textContent="";var i=Mi(e,r).toNode();t.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Oo=function(){throw new N("KaTeX doesn't work in quirks mode.")});var uf=function(e,t){var r=Mi(e,t).toMarkup();return r},cf=function(e,t){var r=new si(t);return Si(e,r)},Eo=function(e,t,r){if(r.throwOnError||!(e instanceof N))throw e;var i=S.makeSpan(["katex-error"],[new He(t)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+r.errorColor),i},Mi=function(e,t){var r=new si(t);try{var i=Si(e,r);return bd(i,e,r)}catch(s){return Eo(s,e,r)}},df=function(e,t){var r=new si(t);try{var i=Si(e,r);return xd(i,e,r)}catch(s){return Eo(s,e,r)}},ff="0.16.21",pf={Span:Wr,Anchor:oi,SymbolNode:He,SvgNode:dt,PathNode:Et,LineNode:Fn},Rf={version:ff,render:Oo,renderToString:uf,ParseError:N,SETTINGS_SCHEMA:u0,__parse:cf,__renderToDomTree:Mi,__renderToHTMLTree:df,__setFontMetrics:Wc,__defineSymbol:u,__defineFunction:O,__defineMacro:m,__domTree:pf};const ca="contextList";function If(){return n=>{Uo(n,e=>{if(!Qo(e)||e.name!==ca)return;const t=e.data??(e.data={});t.hName=ca})}}function mf(n){if(typeof n!="object"||n==null||!("props"in n)||n.props==null)return;const e=n.props;if(e.node?.tagName===Ho)return parseInt(e.index)}const da=fa.div`gap-6 border-b pb-4 my-4 context-list border-token-border-default`;function Ff({children:n}){const e=pa.useContext(Ko),t=Array.isArray(n)?n:Vo([n]);if(t.length===0||e?.analyticsMetadata.turnIndex===void 0)return null;const[r,...i]=t,s=mf(r);if(s!=null&&e!=null){const a=e?.contentReferences?.[s],l=a?.type==="image_v2",o=a?.type==="optimistic_image_citation";if(l||o)return ze.jsxs(da,{className:"flex w-full",children:[ze.jsx("div",{className:"grow leading-normal",children:i}),ze.jsxs("div",{className:"mt-2 flex w-24 shrink-0",children:[l&&a.images[0]&&ze.jsx(gf,{imageRef:a,analyticsMetadata:e.analyticsMetadata}),o&&ze.jsx(yf,{optimisticRef:a})]})]})}return ze.jsx(da,{className:"leading-normal",children:t})}const Bo=fa.button`not-prose flex w-full h-fit	items-center justify-center overflow-hidden rounded-lg max-h-48`;function gf({imageRef:n,analyticsMetadata:e}){const t=n.images[0],r=t.thumbnail_size.width/t.thumbnail_size.height,i=th(t,{width:200,height:Math.max(Math.round(200/r),112)}),{isSuccess:s}=rh(i),a=Yo.useStore(),l=pa.useRef(!1),o={...Wo(e),type:"context_list_image_thumbnail",image_url:i};return l.current||(l.current=!0,Ni.logEventWithStatsig("Search Content Reference Shown","search_content_reference_shown",o)),ze.jsx(Bo,{onClick:()=>{a.setCurrentImage({image:t,source:jo.Turn,analyticsMetadata:e}),Ni.logEventWithStatsig("Search Content Reference Clicked","search_content_reference_clicked",o)},children:ze.jsx(_o.img,{src:i,className:"w-full object-cover",alt:t.title,initial:{opacity:0},animate:s?{opacity:1}:{},whileHover:{scale:1.1,transition:nh}})})}function yf({optimisticRef:n}){return ze.jsx(Bo,{children:n.status==="done"?ze.jsx(Xo,{label:ze.jsx(eh,{id:"8JYwCi",defaultMessage:"Error fetching image"}),children:ze.jsx(Zo,{className:"text-token-text-tertiary h-24 w-12"})}):ze.jsx("div",{className:"bg-token-main-surface-tertiary h-24 w-full animate-pulse"})})}export{Mt as A,je as B,W as C,ue as D,Of as E,z as F,Be as G,$a as H,Xh as I,Sf as J,Dr as K,Ff as L,Tr as M,oh as N,ca as O,Kn as P,me as R,kf as S,X as T,ou as a,Pe as b,qa as c,tl as d,kr as e,Ph as f,Bf as g,Af as h,zf as i,Rf as j,Ef as k,iu as l,N0 as m,Su as n,mu as o,Nf as p,B as q,If as r,Tf as s,Cf as t,Ee as u,K as v,Mf as w,h0 as x,Jn as y,Df as z};
//# sourceMappingURL=krf7zg7fy4qqowqq.js.map
