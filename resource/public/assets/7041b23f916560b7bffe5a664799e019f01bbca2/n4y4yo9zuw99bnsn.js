const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nedfisosj27giym3.js","assets/lip667d8t42poxum.js","assets/l4oo5ijw01fyrjzs.js","assets/n9zp7vm10xoipejo.js","assets/root-ivmjnum3.css","assets/conversation-small-k5k9c71c.css","assets/m5nmfgkx7kb16kea.js","assets/nmzcjggnos81a3wt.js","assets/ezoyp421dng92ve4.js","assets/krf7zg7fy4qqowqq.js","assets/j385t288u9l3nf6j.js","assets/frsgt7dup0f3mfs8.js","assets/jrbfupmnwi0b2in6.js","assets/czpmep8a1gn2yxp9.js","assets/g1x7jf9g2b4osi6b.js","assets/kdkl0k5zipatley9.js","assets/oour34cwuwf9tyoh.js","assets/n7emuv1efbtdnxb9.js","assets/ef49rx2y546x1g51.js","assets/h5ge3c3mruoe76ro.js","assets/flqsbet8wo14mte0.js","assets/g1wxldf6nb3zk37x.js","assets/cbaql59zac1mfnmh.js","assets/op1xowyjquc2dnq7.js","assets/dih8dferf1paqxo1.js","assets/d61ttkht2554hc14.js","assets/mcbptdo34ig6awmf.js","assets/j7n25qhd1j4b3hrq.js","assets/gad0w80axztbqr9k.js","assets/eza7wq2mubc1afux.js","assets/m89x2zftpo6hrypr.js","assets/k0p98ed1moqeo2qx.js"])))=>i.map(i=>d[i]);
import{j as e,r as L,u as ae,f as w,M as d,g as ne,a5 as Ve,L as We,d as V,a as $e}from"./lip667d8t42poxum.js";import{Q as Se,eI as ee,f2 as Ye,k5 as Je,k6 as K,db as Ze,k7 as Xe,O as ke,M as ie,cp as Ce,H as y,U as g,en as oe,eJ as re,k8 as Me,aF as Qe,dz as es,i3 as ss,k9 as Ne,b_ as ts,ka as as,eN as le,eY as ns,kb as is,kc as os,kd as rs,bG as fe,ke as we,eO as Ge,ew as m,hO as _e,bR as ze,c6 as ls,ah as cs,bK as Ie,f3 as ds,hM as ms,kf as us,kg as hs,by as Te,eU as xs,kh as fs,ki as gs,kj as ps,kk as vs,q as js,kl as bs,km as ys,b8 as Ss,aZ as ks,aN as Cs,kn as ge,cy as X,ko as pe,kp as Ms,eL as Ns,kq as ws,ey as Gs,J as _s,kr as zs,ks as Is,kt as Ts,ku as Fs,kv as Ps,dG as Es,kw as As,cT as Os,dD as Ls,kx as Ds,an as W,ky as $,hw as Fe,kz as Bs,kA as Us,kB as Hs,kC as Rs,kD as qs,kE as ve,kF as Ks,kG as Vs,kH as Ws,kI as $s,j9 as je,hv as Ys,bL as Js,kJ as Zs,eV as Xs,kK as Qs}from"./l4oo5ijw01fyrjzs.js";import{c as p,X as ce,_ as de,gE as et,aj as N,k as Pe,W as st,es as tt,cU as at,B as E,ae as A,e as me,cc as O,ar as nt,g as D,F as Y,c3 as M,gb as it,dj as Ee,as as J,d9 as ot,b1 as rt,s as se,b9 as lt,m as ct,o as dt,b as ue,aO as mt,aC as ut,b8 as ht,aI as he,d as xt,fd as ft,af as be,ba as gt,bC as pt,t as te,ag as ye}from"./n9zp7vm10xoipejo.js";import{G as vt}from"./cbaql59zac1mfnmh.js";import{G as Ae}from"./oour34cwuwf9tyoh.js";import{u as jt}from"./czpmep8a1gn2yxp9.js";import{g as bt}from"./g1x7jf9g2b4osi6b.js";import{u as yt}from"./ezoyp421dng92ve4.js";import{u as Oe}from"./nmzcjggnos81a3wt.js";function St({resource:s,grayedOut:t,className:a}){const n=s.gizmo.vanity_metrics?.num_conversations_str;return e.jsxs("div",{className:p("flex w-full grow items-center gap-4 overflow-hidden",a),children:[e.jsx(Ae,{isFirstParty:!!s.gizmo.tags?.includes(Se.FirstParty),src:s.gizmo.display.profile_picture_url??void 0,className:p("h-12 w-12 shrink-0",t&&"grayscale group-hover:grayscale-0")}),e.jsxs("div",{className:"overflow-hidden break-words text-ellipsis",children:[e.jsx("span",{className:"line-clamp-2 text-sm leading-tight font-semibold",children:s.gizmo.display.name}),e.jsx("span",{className:"line-clamp-3 text-xs",children:s.gizmo.display.description}),e.jsxs("div",{className:"text-token-text-tertiary mt-1 flex items-center gap-1 pe-1 text-xs text-ellipsis whitespace-nowrap",children:[e.jsx(ee,{gizmo:s,className:"text-xs",hideLink:!0}),n&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[8px]",children:"â€¢"}),e.jsx(Ye,{className:"h-3 w-3"}),n]})]})]})]})}const kt=ce(()=>de(()=>import("./nedfisosj27giym3.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])).then(s=>s.SnorlaxSplashScreen)),fa=({clientThreadId:s,currentModelId:t,onRequestCompletion:a,gizmoId:n})=>{const{data:o}=ke(n),i=ie(n),r=et();return o==null?null:i?e.jsx(kt,{clientThreadId:s,gizmoId:n,currentModelId:t,onRequestCompletion:a}):e.jsx(Le,{gizmo:o,showStarterPrompts:!0,disableStarterPrompts:r,children:!1})};function Le({gizmo:s,hideOwner:t=!1,children:a,className:n,avatarClassName:o,showStarterPrompts:i=!1,disableStarterPrompts:r=!1}){return s==null?null:e.jsx(e.Fragment,{children:e.jsxs("div",{className:p("text-token-text-primary flex h-full flex-col items-center justify-center","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",n),children:[e.jsx(Ct,{gizmo:s,avatarClassName:o}),e.jsx(Nt,{gizmo:s,hideOwner:t,showStarterPrompts:i,disableStarterPrompts:r}),a]})})}function Ct({gizmo:s,avatarClassName:t}){const a=!!(s!=null&&Je(s)&&s?.gizmo.tags?.includes(Se.FirstParty));return e.jsx("div",{className:"relative",children:e.jsx(Ae,{isFirstParty:a||!s,src:s!=null&&K(s)?s.profilePictureUrl:s?.gizmo.display.profile_picture_url,className:p("mb-3 h-12 w-12",t)})})}function Mt({gizmo:s,disabled:t}){const a=bt(s),n=jt(),o=Ze();if(a==null||a.length===0)return null;const i=a.slice(0,o?2:4);return e.jsx(Gt,{starterPrompts:i,onSelectStarterPrompt:n,disabled:t})}function Nt({gizmo:s,hideOwner:t,showStarterPrompts:a,disableStarterPrompts:n}){const o=s!=null&&K(s)?s.name:s?.gizmo.display.name,i=s!=null&&K(s)?s.description:s?.gizmo.display.description;return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"text-center text-2xl font-semibold",children:o}),!t&&e.jsx("div",{className:"text-token-text-tertiary flex items-center gap-1",children:e.jsx(e.Fragment,{children:s&&K(s)?e.jsx(ee,{gizmo:s}):e.jsx(ee,{gizmo:s,socials:s.gizmo.author.display_socials})})}),i&&e.jsx("div",{className:"text-token-text-primary max-w-md text-center text-sm font-normal",children:i}),a&&e.jsx(Mt,{gizmo:s,disabled:n})]})}const wt=/\s/;function Gt({starterPrompts:s,onSelectStarterPrompt:t,disabled:a,cssMobileDisplayLimit:n,marginOverride:o}){let i=s.map((r,u)=>{let l=r.oneliner??r.title;l===""&&(l=r.body);const c=wt.test(l);return e.jsxs("button",{className:p(n!==void 0&&u>=n&&"max-sm:hidden","border-token-border-default shadow-xxs enabled:hover:bg-token-main-surface-secondary relative flex w-40 flex-col gap-2 rounded-2xl border px-3 pt-3 pb-4 text-start align-top text-[15px] transition disabled:cursor-not-allowed"),disabled:a,onClick:h=>t(h,r,s,u),children:[e.jsx(Xe,{category:r.category}),e.jsx("div",{className:p("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",c?"break-word":"break-all"),children:l})]},r.id??u)});if(i.length>2){const r=Math.floor(i.length/2);i=[i.slice(0,r),i.slice(r)].map((u,l)=>e.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:u},l))}return e.jsx("div",{className:p("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",o??"mt-12"),children:i})}const _t=ce(()=>de(()=>import("./k0p98ed1moqeo2qx.js"),__vite__mapDeps([31,1,2,3,4,5])).then(s=>s.GizmoKeepInSidebarMenuItem)),zt=4,Z=Y.div`font-bold mt-6`,It=s=>ae({queryFn:async()=>oe.getAbout(s),queryKey:["gizmo","about",{gizmoId:s}]}),Tt=s=>ae({queryFn:async()=>oe.getCreatorSlice({creatorId:s}),queryKey:["gizmo","creator",{creatorId:s}],enabled:s!=null}),Ft=s=>{switch(s.type){case M.BROWSER:return{title:j.browsing};case M.PYTHON:return{title:j.dataAnalysis};case M.DALLE:return{title:j.dalle};case M.IMAGE_GEN:return{title:j.imageGen};case M.MEMORY:return{title:j.memory,description:j.memoryDescription};case M.JIT_PLUGIN:return{title:j.actions,description:j.actionsDescription};default:return null}},Pt=({tools:s})=>{const t=me(),a=t?.includes(O.SearchTool)&&!t?.includes(O.SearchToolHoldout),n=es(s??[],i=>i.type);var o=nt(n.map(Ft).filter(i=>i!=null)??[]);return o.length===0?null:(a&&(o=o.map(i=>i.title===j.browsing?{title:j.search}:i)),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Z,{className:"mb-2",children:e.jsx(d,{id:"gizmo.about.capabilitiesHeader",defaultMessage:"Capabilities"})}),o.map(i=>e.jsxs("div",{className:"flex flex-row items-start gap-2 py-1 text-sm",children:[e.jsx(ss,{className:"icon-sm mt-0.5 text-green-600"}),e.jsxs("div",{children:[e.jsx(d,{...i.title}),i.description!=null&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(d,{...i.description})})]})]},i.title.id))]}))},H=Y.div`flex flex-col justify-center items-center gap-2 border-s border-token-border-heavy first:border-0 w-48 mt-4 px-2`,R=Y.div`flex flex-row items-center gap-1.5 pt-1 text-xl font-semibold text-center leading-none`,q=Y.div`text-xs text-token-text-tertiary`,Et=({gizmoResource:s})=>e.jsxs(re,{contentAlign:"end",sideOffset:4,triggerButton:e.jsx(E,{color:"ghost",icon:Qe}),children:[e.jsx(_t,{gizmoResource:s,location:"about_modal"}),e.jsx(Me,{gizmoResource:s})]}),At=({aboutBlock:s})=>{switch(s.type){case"generic_title_subtitle":return e.jsxs(H,{children:[e.jsx(R,{children:s.title}),e.jsx(q,{children:s.subtitle})]});case"rating":return e.jsxs(H,{children:[e.jsxs(R,{children:[e.jsx(Ne,{className:"icon-sm"}),s.avg]}),e.jsx(q,{children:s.count_str})]});case"category":return s.category_ranking!=null?e.jsxs(H,{children:[e.jsx(R,{children:e.jsx(d,{id:"gizmo.about.trendingRank",defaultMessage:"#{rank}",values:{rank:s.category_ranking}})}),e.jsx(q,{children:e.jsx(d,{id:"gizmo.about.inCategory",defaultMessage:"in {category} {locale}",values:{category:s.category_str,locale:s.category_locale_str??""}})})]}):e.jsxs(H,{children:[e.jsx(R,{children:s.category_str}),e.jsx(q,{children:e.jsx(d,{id:"gizmo.about.category",defaultMessage:"Category"})})]})}},Ot=({blocks:s})=>e.jsx("div",{className:"flex justify-center",children:s.map(t=>e.jsx(At,{aboutBlock:t},t.type))}),Lt=({href:s,onClick:t,children:a})=>e.jsx(Ve.div,{whileTap:{scale:.98},className:"flex",children:e.jsxs(We,{to:s,reloadDocument:!0,onClick:t,className:p("group border-token-border-medium bg-token-main-surface-primary hover:bg-token-main-surface-secondary relative ms-2 h-14 min-w-full grow rounded-xl border px-4 focus:outline-hidden"),children:[e.jsx("div",{className:"flex h-full items-center",children:e.jsx("div",{className:"line-clamp-2 text-sm break-all",children:a})}),e.jsx("div",{className:"border-token-border-medium bg-token-main-surface-primary group-hover:bg-token-main-surface-secondary absolute -start-2 -bottom-px h-3 w-4 border-b",children:e.jsx("div",{className:"border-token-border-medium bg-token-main-surface-primary h-3 w-2 rounded-ee-full border-e border-b"})}),e.jsx("div",{className:"absolute end-2 top-0 bottom-0 hidden items-center group-hover:flex",children:e.jsx("div",{className:"bg-token-main-surface-primary flex h-8 w-8 items-center justify-center rounded-lg",children:e.jsx(le,{className:"icon-md text-token-text-primary"})})})]})}),Dt=({gizmo:s,onClose:t})=>{const a=A("1825130190").value,n=s.gizmo.display.prompt_starters?.slice(0,zt);return n==null||n.length===0||!a?null:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Z,{children:e.jsx(d,{id:"gizmo.about.conversationStartersHeader",defaultMessage:"Conversation Starters"})}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-x-1.5 gap-y-2",children:n.map((o,i)=>e.jsx(Bt,{gizmo:s,prompt:o,onClick:t},i))})]})};function Bt({gizmo:s,prompt:t,onClick:a}){const n=D(),o=as(n,s,t);return e.jsx(Lt,{href:o?.toString()??"#",onClick:a,children:t})}const Ut=({reviewStats:s})=>A("1825130190").value?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-2",children:e.jsx(Z,{children:e.jsx(d,{id:"gizmo.about.ratingsHeader",defaultMessage:"Ratings"})})}),s!=null?[5,4,3,2,1].map(a=>e.jsxs("div",{className:"flex flex-row items-center gap-2 py-1 text-xl font-semibold",children:[e.jsxs("div",{className:"icon-lg relative",children:[e.jsx(Ne,{className:"icon-lg text-green-500"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-[11px] text-white",children:a})]}),e.jsx("div",{className:"h-2.5 grow overflow-hidden rounded-full bg-gray-100 dark:bg-gray-700",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${(s?.by_rating[a-1]??0)*100}%`}})})]},a)):e.jsx("div",{className:"text-token-text-tertiary text-sm",children:e.jsx(d,{id:"gizmo.about.ratings.notEnoughRatings",defaultMessage:"Not enough ratings yet"})})]}):null,Ht=({gizmoId:s,creatorId:t})=>{const a=Ce(y.GPTDetails),n=()=>g.closeModal(y.GPTDetails);return a?e.jsx(Rt,{gizmoId:s,creatorId:t,onClose:n}):null},Rt=({gizmoId:s,creatorId:t,onClose:a,children:n})=>{const o=ke(s),i=It(s),r=Tt(t);return L.useEffect(()=>{N.logEvent("Detail Show Modal",{gizmo_id:s})},[s]),e.jsx(Pe,{testId:"modal-gizmo-about",isOpen:!0,onClose:a,type:"success",hideSeparator:!0,showCloseButton:!0,noPadding:!0,className:"flex h-[calc(100vh-25rem)] min-h-[40vh] max-w-xl flex-col",children:e.jsx(qt,{aboutQuery:i,gizmoQuery:o,creatorSliceQuery:r,onClose:a,children:n})})},qt=({aboutQuery:s,gizmoQuery:t,creatorSliceQuery:a,children:n,onClose:o})=>{const i=w();if(s.isLoading||t.isLoading||a.isLoading)return e.jsx("div",{className:"flex h-40 items-center justify-center pb-10",children:e.jsx(st,{})});const r=s.data?.gizmo,u=a?.data,l=t?.data;if(!r||s.error||t.error||a.error||s.data==null||t.data==null||a.data==null||!l){const c=tt(s.error??t.error??a.error)??i.formatMessage({id:"I3v3Oj",defaultMessage:"An error occurred loading this GPT."});return e.jsx("div",{className:"relative flex flex-col gap-2 overflow-hidden px-2 py-4",children:e.jsx("div",{className:"flex flex-col p-4 text-red-500",children:c})})}return e.jsx("div",{className:"flex h-full px-2 py-4",children:e.jsxs("div",{className:"relative flex grow flex-col gap-4 overflow-y-auto px-8 pt-16 pb-20",children:[e.jsx("div",{className:"absolute top-0",children:e.jsxs("div",{className:"from-token-main-surface-primary fixed start-4 end-4 z-10 flex items-center justify-end bg-linear-to-b to-transparent pb-2",children:[l&&e.jsx(Et,{gizmoResource:l}),e.jsx(at,{onClick:o})]})}),e.jsx("div",{className:"absolute bottom-[64px]",children:e.jsx("div",{className:"from-token-main-surface-primary fixed start-4 end-4 z-10 flex min-h-[64px] items-end bg-linear-to-t to-transparent px-2",children:n})}),e.jsx(Le,{gizmo:l,className:"h-fit!",avatarClassName:"h-20! w-20!"}),e.jsx(Ot,{blocks:s.data.about_blocks}),e.jsx(Dt,{gizmo:l,onClose:o}),e.jsx(Pt,{tools:l.tools}),e.jsx(Ut,{reviewStats:s.data.review_stats}),u&&e.jsx(Kt,{gizmos:u.items})]})})};function Kt({gizmos:s}){const t=D();return s.length===0?null:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-2",children:e.jsx(Z,{children:e.jsx(d,{id:"gizmo.about.moreByHeader",defaultMessage:"More by {creatorName}",values:{creatorName:s[0].gizmo.author.display_name}})})}),e.jsx("div",{className:p("no-scrollbar group flex min-h-[104px] items-center space-x-2 overflow-x-auto overflow-y-hidden"),children:s?.map(a=>e.jsx("a",{onClick:()=>{N.logEvent("Detail Click Gizmo",{gizmo_id:a.gizmo.id})},href:ts(t,a),className:"bg-token-main-surface-secondary h-fit min-w-fit rounded-xl px-1 py-4 md:px-3 md:py-4 lg:px-3",children:e.jsx(St,{resource:a})},a.gizmo.id))})]})}const ga=s=>e.jsx("div",{className:"flex grow flex-col items-center",children:e.jsxs(E,{color:"primary",className:"h-12 w-full",icon:le,...s,children:[e.jsx(d,{id:"gizmo.about.startChat",defaultMessage:"Start Chat"}),s.children]})}),j=ne({browsing:{id:"gizmo.about.tools.browsing",defaultMessage:"Browsing"},search:{id:"gizmo.about.tools.search",defaultMessage:"Web Search"},dataAnalysis:{id:"gizmo.about.tools.dataAnalysis",defaultMessage:"Code Interpreter & Data Analysis"},dalle:{id:"gizmo.about.tools.dalle",defaultMessage:"DALLÂ·E Images"},imageGen:{id:"gizmo.about.tools.imageGen",defaultMessage:"4o Image Generation"},memory:{id:"gizmo.about.tools.memory",defaultMessage:"Memory"},actions:{id:"gizmo.about.tools.actions",defaultMessage:"Actions"},actionsDescription:{id:"gizmo.about.tools.actionsDescription",defaultMessage:"Retrieves or takes actions outside of ChatGPT"},memoryDescription:{id:"gizmo.about.tools.memoryDescription",defaultMessage:"Learns from previous chats to improve future conversations"}}),Vt=ce(()=>de(()=>import("./k0p98ed1moqeo2qx.js"),__vite__mapDeps([31,1,2,3,4,5])).then(s=>s.GizmoKeepInSidebarMenuItem));function Wt({children:s,clientThreadId:t,gizmoResource:a,showReportModal:n,inMobileHeader:o,showGizmoModelPicker:i}){return e.jsxs(e.Fragment,{children:[e.jsx(re,{contentAlign:o?"center":"start",size:"small",triggerButton:s,children:e.jsx(De,{clientThreadId:t,gizmoResource:a,showReportModal:n,showGizmoModelPicker:i})}),e.jsx($t,{gizmoResource:a})]})}function $t({gizmoResource:s}){const t=Ce(y.GPTRemoveThirdParty),a=rt(),n=we(s);return e.jsxs(e.Fragment,{children:[e.jsx(Ht,{gizmoId:s.gizmo.id,creatorId:s.gizmo.author.user_id}),e.jsx(fs,{gizmo:s}),n&&e.jsx(gs,{gizmo:s}),n&&e.jsx(ps,{gizmo:s}),e.jsx(vs,{gpt:s,isOpen:t,onClose:()=>g.closeModal(y.GPTRemoveThirdParty),account:a})]})}function De({clientThreadId:s,gizmoResource:t,showReportModal:a,showGizmoModelPicker:n}){const o=ns(t),i=is(t),r=os(t.gizmo.id),u=me(),l=rs(t),c=t.gizmo.share_recipient===fe.Marketplace||t.gizmo.share_recipient===fe.Link,h=!l&&c,I=A("1825130190").value,G=A("3645668434").value,_=I&&!l&&we(t),U=u?.includes(O.GizmoSupportEmails)&&!l&&t.gizmo.author.will_receive_support_emails&&_,T=it(),S=Ee(s),v=Ge(O.WorkspaceShareLinks),{isUnauthenticated:F}=J(),C=v&&S&&!F,x=V();return e.jsxs(e.Fragment,{children:[!1,e.jsx(m.Item,{onClick:()=>{N.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:t.gizmo.id}),ze(x,`/g/${t.gizmo.short_url}`)},icon:_e,children:e.jsx(d,{...f.newChat})}),e.jsx(m.Item,{onClick:()=>g.openModal(y.GPTDetails),icon:ls,children:e.jsx(d,{...f.about})}),t.tools?.find(b=>b.type===M.JIT_PLUGIN)&&e.jsx(m.Item,{onClick:()=>g.openModal(y.GPTPrivacySettings),icon:cs,children:e.jsx(d,{...f.privacySettings})}),o&&e.jsx(m.Item,{onClick:()=>{x(r)},icon:Ie,children:e.jsx(d,{...f.customize})}),!o&&i&&G&&e.jsxs(e.Fragment,{children:[e.jsx(m.Item,{onClick:async()=>{x(`/g/${t.gizmo.id}/view`)},icon:ds,children:e.jsx(d,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),e.jsx(m.Item,{onClick:async()=>{const b=await oe.copyGizmo({gizmoId:t.gizmo.id});b.gizmo.id&&x(`/gpts/editor/${b.gizmo.id}`)},icon:ms,children:e.jsx(d,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),e.jsx(Vt,{gizmoResource:t,location:"conversation_page"}),e.jsx(Me,{gizmoResource:t}),U&&e.jsx(m.Item,{onClick:()=>g.openModal(y.GPTFeedbackEmail),icon:le,children:e.jsx(d,{...f.feedbackEmail})}),_&&e.jsx(m.Item,{onClick:()=>g.openModal(y.GPTReview),icon:us,children:e.jsx(d,{...f.reviewGPT})}),h&&e.jsx(m.Item,{onClick:a,icon:hs,children:e.jsx(d,{...f.report})}),C&&e.jsx(m.Item,{onClick:()=>g.openSharingModal(S),icon:Te,children:e.jsx(d,{...f.shareChat})}),T&&e.jsxs(e.Fragment,{children:[e.jsx(m.Separator,{}),e.jsx(m.Item,{color:"danger",onClick:()=>g.openModal(y.GPTRemoveThirdParty),icon:ot,children:e.jsx(d,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),u?.includes("debug")&&e.jsxs(e.Fragment,{children:[e.jsx(m.Separator,{}),e.jsx(m.Item,{onClick:()=>{x(xs(t))},children:"(Internal) See share page"})]})]})}const Yt=({conversation:s,inMainScreen:t=!1,isActiveConversation:a,inChatWindow:n=!1})=>{const o=D(),i=s.id,r=s.gizmo_id,u=ie(r),l=se(o,"16480203"),c=lt(i),h=Ge(O.WorkspaceShareLinks),{isUnauthenticated:I}=J(),G=h&&c&&!I&&(!u||l),_=js(),[U,T]=L.useState(!!s.is_do_not_remember),S=w();let v=null;const{snorlaxes:F}=bs();v=F;let C=null;u&&v&&(C=v.find(({gizmo:P})=>P.gizmo.id===r)?.gizmo);const x=ys(),b=$e(),{eligible:k,markAsViewed:He}=Ss(ks.ArchiveConversationOnboarding),Re=ct(),qe=V(),Ke=async()=>{await ue.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:s.id}},requestBody:{is_archived:!0}}),zs(b,s.gizmo_id),mt.logEvent("chatgpt_conversation_archived"),N.logEvent("Conversation Archived"),k&&(Re.info(S.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),He()),a&&ze(qe)};return e.jsxs(e.Fragment,{children:[G&&!n&&e.jsx(m.Item,{onClick:()=>g.openSharingModal(c,"History Item Menu"),icon:Te,"data-testid":"share-chat-menu-item",children:e.jsx(d,{...f.shareChat})}),!1,_&&v&&v?.length>0&&Cs(r)&&c&&e.jsxs(e.Fragment,{children:[G&&!n&&e.jsx(m.Separator,{}),u&&e.jsxs(e.Fragment,{children:[v.length>1&&e.jsxs(m.Sub,{children:[e.jsx(m.SubMenuTrigger,{icon:ge,children:e.jsx(d,{...X.moveConversationToSnorlax})}),e.jsx(m.Portal,{children:e.jsx(m.SubContent,{children:e.jsx(pe,{inSidebarFlyout:!1,onUpdateConversationGizmo:P=>{x({newGizmoId:P,conversation:s,previousGizmoId:r})},currentGizmoId:r})})})]}),e.jsx(m.Item,{onClick:()=>{x({newGizmoId:null,conversation:s,previousGizmoId:r})},icon:Ms,children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx(d,{...X.removeConversationFromSnorlax,values:{projectName:C?.gizmo.display.name??"project"}})})})]}),!u&&e.jsxs(m.Sub,{children:[e.jsx(m.SubMenuTrigger,{icon:ge,children:S.formatMessage(X.addConversationToSnorlax)}),e.jsx(m.Portal,{children:e.jsx(m.SubContent,{children:e.jsx(pe,{inSidebarFlyout:!1,onUpdateConversationGizmo:P=>x({newGizmoId:P,conversation:s,previousGizmoId:r})})})})]}),e.jsx(m.Separator,{})]}),!n&&e.jsx(m.Item,{disabled:!c,onClick:()=>{setTimeout(()=>{c&&vt.publish({kind:t?"editTitleInMainScreen":"editTitle",serverThreadId:c})},100)},icon:Ns,children:e.jsx(d,{...f.renameChat})}),!1,e.jsx(m.Item,{disabled:!c,onClick:()=>{c&&Ke()},icon:ws,children:e.jsx(d,{...f.archiveChat})}),e.jsx(m.Item,{color:"danger",disabled:!c,onClick:()=>{c&&dt(o,_s,{serverThreadId:c,isActiveConversation:a})},icon:Gs,"data-testid":"delete-chat-menu-item",children:e.jsx(d,{...f.deleteChat})})]})},Be=({conversation:s,children:t,onOpenChange:a,inMainScreen:n=!1,isActiveConversation:o,inChatWindow:i=!1,...r})=>{const[u,l]=L.useState(!1);return e.jsx(re,{...r,open:u,onOpenChange:c=>{l(c),a?.(c)},side:"bottom",contentAlign:i?"end":"start",triggerButton:t,size:"auto",children:u&&e.jsx(Yt,{conversation:s,inMainScreen:n,isActiveConversation:o,inChatWindow:i})})},f=ne({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"}}),pa=Object.freeze(Object.defineProperty({__proto__:null,GizmoConversationOptionsDropdown:Be,GizmoInformationDropdown:Wt,GizmoInformationDropdownItems:De},Symbol.toStringTag,{value:"Module"})),B=ut(ht(()=>({feedItems:[],hasUnreadNotifications:!1,isModalOpen:!1}))),Jt=B.getState,Q=B.setState,Zt={getHasUnreadNotifications:(s=Jt())=>s.hasUnreadNotifications},z={setIsModalOpen:s=>{Q({isModalOpen:s})},setHasUnreadNotifications:s=>{Q({hasUnreadNotifications:s})},bulkLoadFeedItems:s=>{Q(t=>{t.feedItems=s})}};function Xt(){const s=xe(),t=B(Zt.getHasUnreadNotifications);return s&&t}function Ue(s,t,a,n){const o=Xt(),i=Is();return o||n&&i?s:t}function xe(){const{layer:s}=he("3606233934",{shouldLogExposure:!1});return s.get("enable_notifications_feed")}function va(){const s=xe(),t=B(a=>a.isModalOpen);return s&&t}function Qt(){const s=xe(),t=ae({queryKey:["fetch-notifications-feed"],queryFn:async()=>{const a=await ue.safeGet("/notifications/feed");return z.bulkLoadFeedItems(a.items),z.setHasUnreadNotifications(a.has_unreads),a.items},enabled:s});return{isLoading:t.isLoading,isFetching:t.isFetching}}function ja(){const s=w(),t=Ue(Ds,Ls,!0,!1),a=s.formatMessage({id:"1UHY6w",defaultMessage:"Notifications"});return Qt(),e.jsx(W,{label:a,className:"group",children:e.jsx($,{icon:t,onClick:()=>z.setIsModalOpen(!0),"aria-label":a})})}function ea({item:s,closeModal:t}){const n={announcement:As}[s.type];let o=null;try{const c=new Date(s.created_at);o=Os({date:c})}catch{}const{clientThreadId:i}=Oe(),r=yt(i),u=V(),l=c=>{if(s.action?.type==="show_conversation")t(),u(s.action.conversation_id);else if(s.action?.type==="new_conversation"){const h=s.action;h.prefilled_message&&(r({sourceEvent:c,promptMessage:ft(h.prefilled_message),requestedModelId:h.model_slug??void 0}),t())}};return e.jsxs("button",{className:"border-token-border-default flex w-full items-center justify-start gap-3 overflow-hidden border-t py-4 first-of-type:border-none",onClick:l,disabled:!s.action,children:[e.jsx("div",{className:"relative",children:n&&e.jsx(n,{className:"icon-md"})}),e.jsxs("div",{className:"flex h-5 shrink grow basis-0 items-center justify-between",children:[e.jsx("div",{className:"text-token-text-primary text-sm leading-tight font-normal",children:s.message}),e.jsx("div",{className:"flex items-center justify-start gap-1",children:e.jsx("div",{className:"text-token-text-tertiary text-sm leading-tight font-normal",children:o??""})})]})]})}function ba(){const{feedItems:s,isModalOpen:t}=B();L.useEffect(()=>{t&&(z.setHasUnreadNotifications(!1),ue.safePost("/notifications/feed/read",{authOption:xt.SendIfAvailable}))},[t]);const a=w(),n=V(),{value:o}=A("3325813340"),i=new Date,r=Ts(s,l=>{const c=new Date(l.created_at);if(Fs(c))return"today";const h=Ps(i,c);return h<=7?"last_7_days":h<=30?"last_30_days":"more_than_30_days"}),u=l=>{switch(l){case"today":return a.formatMessage({id:"zlkA39",defaultMessage:"Today"});case"last_7_days":return a.formatMessage({id:"FW89A4",defaultMessage:"Last 7 days"});case"last_30_days":return a.formatMessage({id:"2s3h/P",defaultMessage:"Last 30 days"});case"more_than_30_days":return a.formatMessage({id:"yArZiR",defaultMessage:"More than 30 days"})}};return e.jsx(Pe,{testId:"modal-notifications-feed",isOpen:t,onClose:()=>{z.setIsModalOpen(!1)},type:"success",size:"custom",className:"max-w-3xl",children:e.jsxs("div",{className:"flex flex-col gap-y-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.formatMessage({id:"kWt8Cx",defaultMessage:"Notifications"})}),o&&e.jsx(Es,{icon:e.jsx(Ie,{className:"icon-lg"}),onClick:()=>{n("/#settings/Notifications")},label:a.formatMessage({id:"mZVh0S",defaultMessage:"Notifications settings"})})]}),Object.entries(r).map(([l,c])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:u(l)}),c.map(h=>e.jsx(ea,{item:h,closeModal:()=>z.setIsModalOpen(!1)},h.id))]},l))]})})}function ya({showShareButton:s,showProfileDropdown:t,clientThreadId:a}){const n=D(),o=Ee(a),i=w(),{layer:r}=he("1547743984");se(n,"1288877412"),se(n,"3204157926");const[u,l,c,h]=be(a,k=>[ye.hasUserMessage(k),ye.getGizmoId(k),Qs(k),k?.is_do_not_remember??null]),I=gt(a),{prefetchSearchPromises:G}=Oe(),_=G!=null,U=r.get("show_share_button_text",!1),T=i.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),S=()=>g.openSharingModal(o),v=ie(l),F=me();pt();const{isUnauthenticated:C}=J(),x=be(a,k=>k),b=L.useMemo(()=>a==null?null:{id:a,title:x?.title??"",create_time:null,update_time:null,conversation_template_id:null,async_status:x?.async_status??null,gizmo_id:l??null,snippet:null,is_do_not_remember:h},[l,a,x?.title,x?.async_status,h]);return e.jsxs(e.Fragment,{children:[e.jsx(Us,{}),te(n)?e.jsx(Hs,{}):null,!1,!C&&!l&&I&&!_&&!u&&e.jsxs(e.Fragment,{children:[!1,e.jsx(Rs,{layout:"wide",clientThreadId:a})]}),te(n)&&F?.includes("caterpillar")&&e.jsx(qs,{}),null,s&&o&&e.jsx(e.Fragment,{children:U?e.jsx(E,{onClick:S,icon:ve,label:T,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:T}):e.jsx(W,{label:i.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx($,{"data-testid":"share-chat-button",onClick:S,icon:ve,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),o!=null&&b!=null&&!C?e.jsx(Be,{conversation:b,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:e.jsx(Ks,{"aria-label":i.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}):l&&v?e.jsx(e.Fragment,{children:e.jsx(Vs,{gizmoId:l})}):null,t&&e.jsx(sa,{clientThreadId:a})]})}function sa({clientThreadId:s}){const t=D();return je.markStart("LoginOrProfileMenu"),je.markRendered("LoginOrProfileMenu"),e.jsxs(e.Fragment,{children:[!te(t)&&e.jsx(na,{}),e.jsx(Ys,{clientThreadId:s})]})}function ta({onClick:s,className:t,testId:a}){const o=w().formatMessage({id:"OFyxqj",defaultMessage:"New chat"}),i=r=>{g.setPopoverSidebarOpen(!1),r.metaKey||r.ctrlKey?N.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab"):(r.preventDefault(),s())};return e.jsx(W,{label:o,className:p("flex",t),children:e.jsx($,{onClick:i,icon:_e,"aria-label":o,"data-testid":a,as:"link"})})}function Sa({clientThreadId:s,hideNewChat:t=!1}){const a=Fe(),n=Bs({clientThreadId:s,location:"Navigation actions"});return a?null:e.jsxs("div",{className:"flex items-center",children:[e.jsx(aa,{}),!t&&e.jsx(ta,{onClick:n})]})}function aa(){const s=w(),t=Fe(),{isUnauthenticated:a}=J(),n=Ue($s,Ws,!0,!0);return a||t?null:e.jsx(W,{label:s.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx($,{"aria-label":s.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{g.setSidebarOpen(!0)},icon:n})})}function na(){const s=Js(),t=Zs(),a=Xs(ia.signUpCta),{layer:n}=he("3637408529"),o=n.get("is_desktop_primary_auth_button_on_right",!1),i=()=>{s({authType:"login",callback:h=>{N.logLogInButtonClicked({location:"Chat header",provider:h})}})},r=()=>{s({authType:"signup",callback:h=>{N.logSignUpButtonClicked({location:"Chat header",provider:h})}})},u=e.jsx(E,{onClick:i,color:t?"primary":"secondary","data-testid":"login-button",className:p(!t&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(d,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),l=e.jsx(E,{color:t?"secondary":"primary",onClick:r,"data-testid":"signup-button",className:p(t&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(d,{...a})},"signup"),c=t?[u,l]:[l,u];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:o?c.reverse():c})}const ia=ne({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{ya as C,aa as E,Rt as G,sa as L,Sa as N,ga as a,Le as b,St as c,ba as d,Ue as e,na as f,fa as g,xe as h,ja as i,ta as j,pa as k,va as u};
//# sourceMappingURL=n4y4yo9zuw99bnsn.js.map
