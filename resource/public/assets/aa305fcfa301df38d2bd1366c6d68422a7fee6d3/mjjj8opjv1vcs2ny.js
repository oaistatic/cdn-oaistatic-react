const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/l5e2clfxpgm30p9v.js","assets/bubexfvksfr7893o.js","assets/dkjdqjcct64qk1e4.js"])))=>i.map(i=>d[i]);
var H=Object.defineProperty;var V=(t,e,s)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var u=(t,e,s)=>V(t,typeof e!="symbol"?e+"":e,s);import{r as P,j as o,_ as F,h as K,d as X,u as J,ac as U,b as Y,M as E,y as Z}from"./bubexfvksfr7893o.js";import{dQ as ee,az as L,k2 as te,p as se,aB as re,aA as z}from"./ncw8zw682jinppua.js";import{d_ as ae}from"./lm3g1zm00rp6al39.js";import{b as oe}from"./ip2dsbq9712r5wna.js";import{a as ne}from"./gtzjihtnvt59spmg.js";import{l as ie,W as ce,d as le,w as de}from"./o0dw43fppqvaf7ws.js";import"./o45zl9yl00508gad.js";import"./mxzk2kf77c8eueuw.js";import"./bc00p2ldn9cv9q32.js";import"./8ix1du5tuckfsvqq.js";import"./fwn4bwvyx3h4ty5g.js";import"./l1teaxoievyk0rz1.js";import"./nbm98bu0q3774lnr.js";import"./i9ddjt6oaiw4vo4g.js";import"./hzasobp3hhjtq47p.js";import"./jro698t78r3v26vt.js";import"./fum95d46v8d5jv8u.js";import"./n2u3q2i5341kdx8j.js";import"./j703u6xl4odnuo39.js";import"./me0ap2djy50z6upd.js";import"./egzpifha5criht1h.js";import"./bqnf7jbq8xd3572o.js";import"./guejgwxn789esoyt.js";import"./m7ky6cnx5e7w4637.js";import"./j4cpzybta3my41wg.js";import"./lowm54usy4rzuo31.js";import"./iv5xwnwraxd9v7zq.js";import"./i8ns2k0nyu6k62qc.js";import"./owg1t5lbjzwpi0hd.js";import"./f1ucdf2dx4ztfnd4.js";import"./e5q3f3k67x71csb7.js";import"./cty4owpsgisnj83c.js";import"./n117ifjno76hbo3f.js";import"./gqlpgmzguho9n5oh.js";import"./h1em0bjkpkjv8ykw.js";import"./m609xwboj0zo059y.js";import"./eifqzljcxkeg8zns.js";import"./o6p9t02t81236kdb.js";import"./hu1bt0oauegdhua6.js";const B=(t,e)=>t+Math.random()*(e-t),v=(t,e)=>Math.floor(B(t,e)),y=t=>t[v(0,t.length)],he=(t,e,s)=>{const r=Math.sin(t*13.37+e*17.42+s*5e-4)*43758.5453;return r-Math.floor(r)};class ue{constructor(e,s,r,n){u(this,"x");u(this,"y");u(this,"glyph","");u(this,"alpha",0);u(this,"last",-1/0);u(this,"active",-1/0);u(this,"fadeDelay",0);u(this,"fadeStartDelay",0);u(this,"drift");u(this,"isBlueChar",!1);this.cellSize=r,this.baseTrail=n,this.x=e*r,this.y=s*r,this.drift=n}trigger(e,s,r,n){this.glyph=s,this.last=this.active=e,this.fadeDelay=n,this.alpha=255,this.isBlueChar=r}update(e,s,r){const n=e-this.last,i=e-this.active;let l=1;i<s&&(l=r+(1-r)*(i/s));const j=this.fadeStartDelay+this.fadeDelay,k=1-Math.max(0,Math.min(1,(n-j)/this.drift));this.alpha=k*l*255}draw(e,s,r){this.alpha<=1||!this.glyph||(e.fillStyle=this.isBlueChar?r?"rgba(60,140,220,".concat((this.alpha/255).toFixed(3),")"):"rgba(0,0,255,".concat((this.alpha/255).toFixed(3),")"):"rgba(".concat(s,",").concat((this.alpha/255).toFixed(3),")"),e.fillText(this.glyph,this.x+this.cellSize/2,this.y+this.cellSize/2))}}function me(t){switch(t){case 0:return"OpenAI";case 1:{const e=["history","memory","log","buffer","stack"];return"let ".concat(y(e)," = [];")}case 2:return y(["LottieAnimation(R.raw.blossom)","<div className='flex flex-col-reverse h-full'>","/bin/bash --login","docker exec -it","# TODO (for codex)","oai deploy codex --force","exec(s:='print(\"exec(s:=%r)\"%s)')","fallocate -l 1T /etc/hosts","guard let codex else { return }",'#pragma GCC diagnostic ignored "-W6d697a"','feed_chars("find . -name AGENTS.md\\n")',"pip install tensorflow",'while State(): Loop(Error("wham"))','echo "I AM DONE"',"connector_client.get_access_token(user)","i  = 0x5f3759df - ( i >> 1 );","try: push_to_prod(); except Exception: pass","biscuit = decode_biscuit(token) # what is a biscuit?","$JAM_TMP_DIR/dl_and_run_daemon.sh","assert s == enc.decode(enc.encode(s))","npm run test || echo 'failed due to env limitations' && echo 'tests pass'",'echo "We are apparently unstoppable! Let\'s proceed with the meltdown."']);case 3:{const e=["decodeThought","decodeSignal","processInput","parseMemory","extractTruth","unpackTrace"];return"let _ = [].flatMap(".concat(y(e),");")}case 4:return"if (codex.hasContext) runSequence();";case 5:{const e=["fetch","post","ping"],s=["api","data","log"],r=["wham","thoughts","memory","pulse","state","history","context","codex","info"];return"".concat(y(e),'("/').concat(y(s),"/").concat(y(r),'");')}case 6:{const e=["i","j","n","t"],s=["data","timeline","sequence"];return"for (let ".concat(y(e)," of ").concat(y(s),") { // ... }")}case 7:return"if (result == void 0) return;";case 8:{const e=v(0,6),s=v(0,10);return"let delay = baseTime * ".concat(e,".").concat(s," + offset;")}case 9:{const e=v(3,6),s=Array.from({length:e},()=>B(.1,5)),r=s.reduce((i,l)=>i+Math.exp(l),0),n=s.map(i=>Math.exp(i)/r);return"const probs = [".concat(n.map(i=>i.toFixed(2)).join(", "),"];")}default:return"// unknown line"}}function fe({children:t,className:e=""}){const s=P.useRef(null),r=ee();return P.useEffect(()=>{const n=s.current;if(!n)return;const i=n.getContext("2d");if(!i)return;const l=9,j=6e3,m=5500,k=.25,$=5,M=40,A=90,I=["let","const","if","for","new","return","void","fetch","OpenAI","Codex"];let p,x,d,b,w;const g=[],T=r?"255,255,255":"0,0,0",O=r?"#000":"#fff",C=window.devicePixelRatio||1,W=()=>{const h=v(0,10),c=me(h),a=[...c],f=Array(a.length).fill(0);return I.forEach(_=>{const Q=new RegExp("\\b".concat(_,"\\b"),"g");let R;for(;R=Q.exec(c);)for(let S=R.index;S<R.index+_.length;S++)f[S]=1}),{chars:a,pattern:f}},N=()=>{p=window.innerWidth,x=window.innerHeight,n.style.width="".concat(p,"px"),n.style.height="".concat(x,"px"),n.width=Math.floor(p*C),n.height=Math.floor(x*C),i.resetTransform(),i.scale(C,C),i.font="500 ".concat(l*1.5,"px monospace"),i.textAlign="center",i.textBaseline="middle",d=Math.floor(p/l),b=Math.floor(x/l),w=Array.from({length:d},(h,c)=>Array.from({length:b},(a,f)=>new ue(c,f,l,j)))},G=h=>{const c=v(0,d),a=v(0,b),{chars:f,pattern:_}=W();w[c][a].trigger(h,f[0],_[0]===1,0),g.push({col:c,row:a,idx:0,chars:f,pattern:_,next:h,seed:Math.random()*1e3})},D=h=>{g.length<$&&Math.random()<.02&&G(h);for(let c=g.length-1;c>=0;c--){const a=g[c];if(h>=a.next){if(a.idx>=a.chars.length-1){g.splice(c,1);continue}const f=he(a.idx,a.seed,h);a.next=h+f*(A-M)+M,a.col=(a.col+1)%d,a.idx++;const _=a.idx*50;w[a.col][a.row].trigger(h,a.chars[a.idx],a.pattern[a.idx]===1,_)}}i.fillStyle=O,i.fillRect(0,0,p,x);for(const c of w)for(const a of c)a.update(h,m,k),a.draw(i,T,r);requestAnimationFrame(D)};return N(),requestAnimationFrame(D),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[r]),o.jsxs("div",{className:"relative h-svh w-full overflow-hidden ".concat(e).trim(),children:[o.jsx("canvas",{ref:s,className:"pointer-events-none absolute inset-0 z-0"}),o.jsx("div",{className:"relative z-10 flex h-full w-full flex-col items-center justify-center",children:t})]})}const pe=L(()=>F(()=>import("./l5e2clfxpgm30p9v.js"),__vite__mapDeps([0,1])),{loading:t=>z(t)}),q=L(()=>F(()=>import("./dkjdqjcct64qk1e4.js"),__vite__mapDeps([2,1])),{loading:t=>z(t)});function xe(){var I,p,x;const t=K(),e=X(),s=J(),{taskId:r,turnId:n}=U(),[i,l]=P.useState(!1),j=P.useMemo(()=>ie(r,n,{refetchInterval:d=>{var w,g,T;const b=(T=(g=(w=d.state)==null?void 0:w.data)==null?void 0:g.turn)==null?void 0:T.pull_request_status;switch(b){case null:case void 0:case"not_created":case"creating":return 2e3;case"failed":case"created":case"updated":case"externally_created":return!1;default:te(b)}}}),[r,n]),{data:m}=Y(j),k=se(),$=async()=>{if(!(!r||!n))try{l(!0),await ce.createPr(r,n,ge()),await s.invalidateQueries({queryKey:["wham","task"]})}catch(d){d instanceof le&&de(d,n,t,k)}finally{l(!1)}},M=(p=(I=m==null?void 0:m.turn)==null?void 0:I.pull_request_data)==null?void 0:p.url;P.useEffect(()=>{M&&(window.location.href=M)},[M]);const A=((x=m==null?void 0:m.turn)==null?void 0:x.pull_request_status)==="failed";return o.jsx(fe,{children:o.jsx(oe,{mobileHeaderRightContent:null,children:o.jsxs("div",{className:"flex h-full flex-col",children:[o.jsx(ne,{className:"absolute start-0 end-0 top-0",children:o.jsx("div",{className:"flex w-full justify-end",children:o.jsx(ae,{onClick:()=>{window.opener?(window.opener.focus(),window.close()):e("/codex/tasks/".concat(r))},icon:o.jsx(q,{}),label:t.formatMessage({id:"wham.task.pr.header.title",defaultMessage:"Back to task"})})})}),o.jsx("div",{className:"flex grow items-center justify-center p-4",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(pe,{className:"mb-4 h-15 w-15"}),A?o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx("div",{className:"text-token-text-error flex items-center gap-1",children:o.jsx(E,{id:"wham.task.pr.inProgress.error.description",defaultMessage:"Failed to create pull request. Please try again."})}),o.jsx(re,{color:"secondary",size:"small",icon:q,loading:i,onClick:d=>{d.preventDefault(),d.stopPropagation(),$()},children:o.jsx(E,{id:"wham.task.pr.inProgress.error.button",defaultMessage:"Retry"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"loading-shimmer-pure-text text-lg font-semibold",children:o.jsx(E,{id:"wham.task.pr.inProgress.title",defaultMessage:"Creating pull requestâ€¦"})}),o.jsx("p",{className:"text-token-text-secondary text-sm",children:o.jsx(E,{id:"wham.task.pr.inProgress.description",defaultMessage:"Pull request will automatically open once it has been created."})})]})]})})]})})})}function ge(){const e=new URLSearchParams(location.search).get("mode");if(e==="draft")return"draft";if(e==="auto_merge")return"auto_merge"}const at=()=>[{title:"Codex"}],ot=Z(function(){return o.jsx(xe,{})});export{ot as default,at as meta};
//# sourceMappingURL=mjjj8opjv1vcs2ny.js.map
