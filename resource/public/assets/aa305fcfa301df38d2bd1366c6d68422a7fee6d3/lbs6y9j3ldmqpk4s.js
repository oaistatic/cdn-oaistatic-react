import{r as w,j as l,d as M}from"./bubexfvksfr7893o.js";import{io as p,q6 as T,cp as I,jb as C,V,O as g,D as y,nH as _,dc as k,aC as x}from"./ncw8zw682jinppua.js";import{b6 as h,d4 as m,d0 as S,bc as b}from"./lm3g1zm00rp6al39.js";import{D as v}from"./ioom1cwgjgkzhe2w.js";import{u as A,g as f}from"./kmfcnx25ea49kkwd.js";import{M as N}from"./j51b3b8y7dx543la.js";function j(d){const{button:r,conversationId:t,onClick:s}=d,a=I(t),{startVoiceMode:n}=A(),o=M(),e=C(),u=w.useCallback(async()=>{switch(r.action){case"new_chat":{const i=f({serverThreadId:void 0,isAdvancedMode:!0,eventSource:"modal_".concat(r.action),parentMessageId:void 0,clientThreadId:_(),gizmoId:void 0,skipCacheReason:"modal-new-chat-button"});if(e)try{await m({type:"STOP",reason:v.UserNavigatedAway});const c=g(t);c!=null&&c.disableConversationNavigation||S(o,{replace:!0}),await m({type:"START",args:i,oldConversationId:a!=null?a:t})}catch(c){y.addError(c,{message:"New chat button in IUX failed"})}else b("/"),n(i);break}case"switch_to_standard":if(a){const i=f({serverThreadId:a,isAdvancedMode:!1,eventSource:"modal_".concat(r.action),parentMessageId:void 0,clientThreadId:a,gizmoId:V.getGizmoId(g(t)),skipCacheReason:"modal-switch-to-standard-button"});if(e)try{await m({type:"STOP",reason:v.UserSwitchedToStandard}),await m({type:"START",args:i})}catch(c){y.addError(c,{message:"Switch to standard button in IUX failed"})}else n(i)}break;case"upgrade_to_plus":h(o,"Voice Mode Upgrade To Plus Modal");break;case"upgrade_to_pro":h(o,"Voice Mode Upgrade To Pro Modal");break}s==null||s()},[r.action,t,e,o,s,a,n]);return l.jsx(k.Button,{onClick:u,title:r.title,color:d.color})}const B={primary:"primary",secondary:"secondary",tertiary:"ghost"};function E({buttons:d,conversationId:r,onClick:t}){let s,a,n;const o=w.useCallback(e=>()=>{e==="upgrade_to_plus"?p.upsell.upgradeToPlus():e==="upgrade_to_pro"&&p.upsell.upgradeToPro(),t()},[t]);return!d||d.length===0?{primary:void 0,secondary:void 0,tertiary:void 0}:(d.forEach(e=>{if(!T.includes(e.action))return;const i=l.jsx(j,{button:e,conversationId:r,onClick:o(e.action),color:B[e.style]});switch(e.style){case"primary":s=i;break;case"secondary":a=i;break;case"tertiary":n=i;break}}),{primary:s,secondary:a,tertiary:n})}function z({conversationId:d,isOpen:r,onClose:t,buttons:s,title:a,description_markdown:n}){const o=E({buttons:s,conversationId:d,onClick:t}),e=l.jsx(N,{className:"markdown text-token-text-secondary mb-6",urlTransform:u=>u,children:n});return l.jsx(x,{testId:"modal-voice-rate-limit",title:a,isOpen:r,onClose:t,size:"custom",className:"max-w-[550px]",type:"warning",showCloseButton:!0,children:l.jsxs("div",{className:"w-full",children:[e,l.jsxs("div",{className:"flex flex-row justify-end gap-6",children:[o.primary,o.secondary,o.tertiary]})]})})}export{z as V,E as u};
//# sourceMappingURL=lbs6y9j3ldmqpk4s.js.map
