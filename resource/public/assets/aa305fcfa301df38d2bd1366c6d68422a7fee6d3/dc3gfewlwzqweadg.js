import{r as i,j as g}from"./bubexfvksfr7893o.js";import{u as N,cp as P,N as A,aW as k,ll as w,Q as F,bk as M,g as C,V as _,O as b,nH as E,D as I}from"./ncw8zw682jinppua.js";import{gB as S,gC as V,gD as j,aN as D,aA as z}from"./lm3g1zm00rp6al39.js";import{s as T}from"./jdqwfk0uej2po5zn.js";import{A as W,V as $}from"./gs7s0wqk8mi65t12.js";import"./kmfcnx25ea49kkwd.js";import"./bxgk09qvxvkate6l.js";const y=()=>{const o=S();return i.useCallback(t=>{T.set(t),o.setState({isVoiceModeActive:!0})},[o])};function G(){const o=D(z.hasSeenAdvancedVoiceNuxFullPage);return!o.isLoading&&o.eligible}function K({clientThreadId:o}){const t=N(),n=V(e=>e.showVoicePicker),f=V(e=>e.showNuxFullPage),a=S(),c=P(o),s=c!=null?c:o,r=!A(t),{setValue:u}=j(k.VoiceName),d=G(),l=w(),m=y();return i.useEffect(()=>{const e=sessionStorage.getItem("selectedVoiceName"),v=h=>{const x=F(()=>M(C(t,s)).id);try{sessionStorage.removeItem("selectedVoiceName"),m({voice:h,conversation_id:void 0,eventSource:"login_page",voice_mode:"advanced",clientThreadId:E(),gizmo_id:_.getGizmoId(b(s)),requested_default_model:x,skipCacheReason:"login-direct-to-voice-mode"})}catch(p){I.addError("Failed to start voice mode after voice picker: ".concat(p),{protocol:l})}};e&&!r&&(u(e),v(e))},[t,s,r,u,m,l]),i.useEffect(()=>{d||a.setState(e=>{e.showNuxFullPage=!1})},[d,a]),f?g.jsx(W,{conversationId:s}):n?g.jsx($,{isOpen:n,onClose:()=>{a.setState(e=>{e.showVoicePicker=!1})},conversationId:s,cameFromNux:!0}):null}export{K as VoiceModals};
//# sourceMappingURL=dc3gfewlwzqweadg.js.map
