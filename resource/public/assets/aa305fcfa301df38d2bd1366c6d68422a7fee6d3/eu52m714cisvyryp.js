const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ip3ztvp5lelyd7fh.js","assets/bubexfvksfr7893o.js"])))=>i.map(i=>d[i]);
import{c as le,h as ne,r as K,j as s,_ as me}from"./bubexfvksfr7893o.js";import{p as pe,el as de,az as ce,dc as oe,aC as fe,aA as ue}from"./ncw8zw682jinppua.js";import{dS as xe,al as X,ak as ge,x as he}from"./lm3g1zm00rp6al39.js";import{a as Me}from"./pae25sf49s4jjbfo.js";import{a as ye}from"./lbhb969lk2p04ra5.js";import"./gggvcj5scm81g6wy.js";import"./b3zmi7k0e1dvao0m.js";import"./ekj7v0hd90m9gfgd.js";import"./hzasobp3hhjtq47p.js";import"./knfzy5vszhnec9ql.js";import"./kl7c6054usfnqmd4.js";import"./k97n0y6ba9c9h39c.js";import"./m7df4jwt169q6ixf.js";import"./ce744tj9mbyjpxk9.js";import"./o5k1tu95390082c1.js";import"./n4o6myks52v56x0h.js";import"./hbafdd864xefk46q.js";import"./boj7ctg8ggfk4dia.js";import"./dafjbmsuxh1m33um.js";import"./nbm98bu0q3774lnr.js";import"./i9ddjt6oaiw4vo4g.js";import"./dlyg1wsrxb1bdujw.js";import"./hih7y3lf19ezkzqs.js";import"./mutdyd1mse3szbqw.js";import"./m53r6qicunpm4sky.js";import"./c9xt9bv12kye5x44.js";import"./fwn4bwvyx3h4ty5g.js";import"./l1teaxoievyk0rz1.js";import"./iej0cupg2dqkmejt.js";import"./jmpxwrnri5yjvfye.js";import"./mlriv1uls655wdrc.js";import"./bfsxq3x61wm88q0l.js";import"./dqug6hftjhmm0wto.js";import"./ic6ed80tep3dx2dk.js";import"./cb00041tawj438ac.js";import"./bvne52hzx4trm49n.js";import"./me0ap2djy50z6upd.js";import"./6sb0te5xkk0og38q.js";import"./lgjrstdhr8uh290o.js";import"./kfmo3i9aewr7n1rn.js";import"./bigxnci02lyq2i8w.js";import"./hfqw080f7apy6xx1.js";import"./drp7x5ntnuk0iqtu.js";import"./n2u3q2i5341kdx8j.js";import"./odse8tni4w9vfvgl.js";import"./h4jnqd77fz22arvf.js";import"./mcysfy6v18mi457y.js";import"./cimzu82zsgrorurc.js";import"./c3ebvgxcix5v6glh.js";import"./lurtdf45vy313wxa.js";import"./fth7uuh3sodzalk8.js";import"./kpldwkdi6k2a2fdo.js";import"./j51b3b8y7dx543la.js";import"./gy1lpvuoewmzh42c.js";import"./gqlpgmzguho9n5oh.js";import"./h1em0bjkpkjv8ykw.js";import"./kbj1b07s2z6vxqkg.js";import"./hu1bt0oauegdhua6.js";import"./owbget26s04j6ot0.js";import"./o6p9t02t81236kdb.js";import"./b31nd59wtbgjw90y.js";import"./nnnfg3p2im8fkaq0.js";import"./mg42e28yllzkdaxs.js";import"./mf0m4r73wo03szkn.js";import"./n8w61inav9kre7iu.js";import"./hmf9tq54zhr2dacw.js";import"./b5saxx3revwce53b.js";import"./g4swdbr5jmfp7d0n.js";import"./evy28vmenoadahce.js";const Ce=ce(()=>me(()=>import("./ip3ztvp5lelyd7fh.js"),__vite__mapDeps([0,1])),{loading:P=>ue(P)});function Dt(P){"use forget";const e=le.c(90),{onClose:m,sessionId:p,secret:a,email:ee,onActivated:L,onCancelled:Q}=P,te=ee===void 0?"":ee,t=ne(),i=pe(),d=Me(),[r,ae]=K.useState(""),[n,W]=K.useState(null);let U;e[0]===Symbol.for("react.memo_cache_sentinel")?(U=de(),e[0]=U):U=e[0];const[l,re]=K.useState(U),[Y,se]=K.useState(!1);let V;e[1]===Symbol.for("react.memo_cache_sentinel")?(V=()=>{se(!0),setTimeout(()=>se(!1),2e3)},e[1]=V):V=e[1];const Z=V;let $;e[2]!==Q||e[3]!==m?($=()=>{Q&&Q(),m()},e[2]=Q,e[3]=m,e[4]=$):$=e[4];const c=$;let H;e:{if(!a){H="";break e}const o=encodeURIComponent(te?"OpenAI:".concat(te):"OpenAI");let D,G;if(e[5]!==o||e[6]!==a){const ie=new URLSearchParams({secret:a,issuer:"OpenAI"});D=o,G=ie.toString(),e[5]=o,e[6]=a,e[7]=D,e[8]=G}else D=e[7],G=e[8];H="otpauth://totp/".concat(D,"?").concat(G)}const q=H;let F;e[9]!==d||e[10]!==r||e[11]!==t||e[12]!==L||e[13]!==m||e[14]!==p||e[15]!==i?(F=async()=>{try{W(null),await d.mutateAsync({factor:"totp",code:r.trim(),sessionId:p}),i.success(t.formatMessage({id:"CGNzQD",defaultMessage:"Authenticator app enabled"}),{testId:"totp-mfa-activation-success"}),L&&L(),m()}catch(o){const D=o;W(t.formatMessage(ye(D)))}},e[9]=d,e[10]=r,e[11]=t,e[12]=L,e[13]=m,e[14]=p,e[15]=i,e[16]=F):F=e[16];const f=F;let u;e[17]!==t?(u=t.formatMessage({id:"hvzmYC",defaultMessage:"Connect your authenticator app"}),e[17]=t,e[18]=u):u=e[18];let x;e[19]!==u?(x=s.jsx("span",{className:"text-heading-3",children:u}),e[19]=u,e[20]=x):x=e[20];let g;e[21]!==t?(g=t.formatMessage({id:"nqOq3M",defaultMessage:"Verify"}),e[21]=t,e[22]=g):g=e[22];let h;e[23]!==d||e[24]!==r||e[25]!==p?(h=r.trim().length!==6||!p||d.isPending,e[23]=d,e[24]=r,e[25]=p,e[26]=h):h=e[26];let M;e[27]!==f||e[28]!==h||e[29]!==g?(M=s.jsx(oe.Button,{title:g,color:"primary",disabled:h,onClick:f}),e[27]=f,e[28]=h,e[29]=g,e[30]=M):M=e[30];let y;e[31]!==t?(y=t.formatMessage({id:"JEMdlA",defaultMessage:"Cancel"}),e[31]=t,e[32]=y):y=e[32];let C;e[33]!==c||e[34]!==y?(C=s.jsx(oe.Button,{title:y,color:"secondary",onClick:c}),e[33]=c,e[34]=y,e[35]=C):C=e[35];let b;e[36]!==t?(b=t.formatMessage({id:"JUk2xI",defaultMessage:"Step 1:"}),e[36]=t,e[37]=b):b=e[37];let j;e[38]!==b?(j=s.jsx("span",{className:"me-1 font-semibold",children:b}),e[38]=b,e[39]=j):j=e[39];let v;e[40]!==t||e[41]!==l?(v=l?t.formatMessage({id:"cmQdj3",defaultMessage:"Enter the secret code below in your authenticator app, then enter the 6-digit code from the app."}):t.formatMessage({id:"NAp5hF",defaultMessage:"Scan the QR code using your authenticator app, then enter the 6-digit code from the app."}),e[40]=t,e[41]=l,e[42]=v):v=e[42];let N;e[43]!==j||e[44]!==v?(N=s.jsxs("div",{className:"text-token-text-primary text-sm",children:[j,v]}),e[43]=j,e[44]=v,e[45]=N):N=e[45];let S;e[46]!==Y||e[47]!==t||e[48]!==q||e[49]!==a||e[50]!==l||e[51]!==i?(S=a&&s.jsx("div",{className:"w-full",children:s.jsx("div",{className:"border-token-border-light rounded-2xl border p-5",children:s.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[!l&&q?s.jsx(xe,{value:q,size:180,includeMargin:!0}):null,l&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-token-border-light cursor-pointer rounded-md border px-3 py-2 font-mono text-base select-text",onClick:o=>{X(a,i,o).then(()=>{Z()})},role:"button",tabIndex:0,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),X(a,i,o).then(()=>{Z()}))},"aria-label":t.formatMessage({id:"j/bzO/",defaultMessage:"Copy code"}),title:t.formatMessage({id:"2gRO6C",defaultMessage:"Copy code"}),children:a}),s.jsx(ge,{shouldChangeText:!1,buttonText:Y?t.formatMessage({id:"seLOsT",defaultMessage:"Copied"}):t.formatMessage({id:"v3Cpi4",defaultMessage:"Copy code"}),onCopy:o=>{X(a,i,o).then(()=>{Z()})},className:"text-sm"})]}),s.jsx("button",{type:"button",className:"text-blue-400",onClick:()=>re(be),children:l?t.formatMessage({id:"yhrWS1",defaultMessage:"Show QR code instead"}):t.formatMessage({id:"Zqkdz9",defaultMessage:"Trouble scanning?"})})]})})}),e[46]=Y,e[47]=t,e[48]=q,e[49]=a,e[50]=l,e[51]=i,e[52]=S):S=e[52];let k;e[53]!==t?(k=t.formatMessage({id:"OtuOes",defaultMessage:"Step 2:"}),e[53]=t,e[54]=k):k=e[54];let I;e[55]!==k?(I=s.jsx("span",{className:"me-1 font-semibold",children:k}),e[55]=k,e[56]=I):I=e[56];let E;e[57]!==t?(E=t.formatMessage({id:"VyVwRC",defaultMessage:"Enter your 6-digit code"}),e[57]=t,e[58]=E):E=e[58];let w;e[59]!==I||e[60]!==E?(w=s.jsxs("div",{className:"text-token-text-primary mt-2 text-sm",children:[I,E]}),e[59]=I,e[60]=E,e[61]=w):w=e[61];let A;e[62]!==f?(A=o=>{o.preventDefault(),f()},e[62]=f,e[63]=A):A=e[63];let O;e[64]!==t?(O=t.formatMessage({id:"f3B3Ii",defaultMessage:"Enter your 6-digit code"}),e[64]=t,e[65]=O):O=e[65];let T;e[66]!==n?(T=o=>{ae(o.target.value),n&&W(null)},e[66]=n,e[67]=T):T=e[67];let R;e[68]!==r||e[69]!==O||e[70]!==T?(R=s.jsx(he,{className:"w-full max-w-md",ariaLabel:!1,name:"totp_otp",placeholder:O,value:r,onChange:T}),e[68]=r,e[69]=O,e[70]=T,e[71]=R):R=e[71];let _;e[72]!==A||e[73]!==R?(_=s.jsx("form",{onSubmit:A,className:"flex w-full justify-start",children:R}),e[72]=A,e[73]=R,e[74]=_):_=e[74];let z;e[75]!==n||e[76]!==t?(z=n&&s.jsxs("p",{className:"flex gap-1 text-xs text-red-500",children:[s.jsx(Ce,{title:t.formatMessage({id:"totp.errorIcon",defaultMessage:"Error"})}),n]}),e[75]=n,e[76]=t,e[77]=z):z=e[77];let B;e[78]!==N||e[79]!==S||e[80]!==w||e[81]!==_||e[82]!==z?(B=s.jsx("div",{className:"text-token-text-primary self-stretch text-sm",children:s.jsxs("div",{className:"flex flex-col items-start gap-[16px] self-stretch",children:[N,S,w,_,z]})}),e[78]=N,e[79]=S,e[80]=w,e[81]=_,e[82]=z,e[83]=B):B=e[83];let J;return e[84]!==c||e[85]!==M||e[86]!==C||e[87]!==B||e[88]!==x?(J=s.jsx(fe,{testId:"modal-enroll-totp",noPadding:!0,contentClassName:"flex flex-col items-start gap-[16px] p-[24px]",headerClassName:"!px-6 !py-0 !h-[76px] !items-center",shouldIgnoreClickOutside:!0,showCloseButton:!0,hasSeparator:!0,isOpen:!0,onClose:c,type:"success",title:x,primaryButton:M,secondaryButton:C,children:B}),e[84]=c,e[85]=M,e[86]=C,e[87]=B,e[88]=x,e[89]=J):J=e[89],J}function be(P){return!P}export{Dt as EnrollTotpModal};
//# sourceMappingURL=eu52m714cisvyryp.js.map
