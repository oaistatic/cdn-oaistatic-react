const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/cmff6ny7qwtuxu45.js","assets/bubexfvksfr7893o.js"])))=>i.map(i=>d[i]);
var P=Object.defineProperty;var g=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var p=(a,t,e)=>t in a?P(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,y=(a,t)=>{for(var e in t||(t={}))E.call(t,e)&&p(a,e,t[e]);if(g)for(var e of g(t))N.call(t,e)&&p(a,e,t[e]);return a};import{h as w,r as f,u as O,j as s,M as T,_ as k}from"./bubexfvksfr7893o.js";import{oN as S,p as B,oO as h,f9 as o,fa as A,dc as m,gO as F,aC as L,cz as q,oP as z,cr as G,az as H,eX as Q,aA as R}from"./ncw8zw682jinppua.js";const D=H(()=>k(()=>import("./cmff6ny7qwtuxu45.js"),__vite__mapDeps([0,1])),{loading:a=>R(a)});function V({onClose:a,gizmo:t}){var x;const e=w(),[n,M]=f.useState(((x=t==null?void 0:t.gizmo)==null?void 0:x.instructions)||""),r=S(),j=B(),l=O(),d=[];(n==null?void 0:n.length)>h&&d.push(e.formatMessage(o.instructionsTooLong,{length:h})),f.useEffect(()=>{l.invalidateQueries({queryKey:A(l,t.gizmo.id).queryKey})},[t.gizmo.id,l]);const v=i=>{M(i.target.value)},C=()=>{a()},I=async()=>{try{await r.mutateAsync({update:{instructions:n!=null?n:""},id:t.gizmo.id}),a()}catch(i){const u=Q(i);j.danger(u!=null?u:"Error",{duration:2,toastId:"custom_instructions_modal_save_error"})}},_=s.jsx(m.Button,{title:e.formatMessage(o.save),color:"primary",onClick:I,loading:r.isPending,disabled:d.length>0}),b=s.jsx(m.Button,{title:e.formatMessage(o.cancel),color:"secondary",onClick:C,disabled:r.isPending}),{canEdit:c}=F(t);return s.jsx(L,{testId:"modal-project-custom-instructions",className:"min-h-[50dvh] max-w-[820px]",isOpen:!0,showCloseButton:!r.isPending,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",title:s.jsx("div",{className:"h-8",children:e.formatMessage(o.editCustomInstructionsTitle)}),onClose:()=>{r.isPending||a()},headerAccessory:!c&&s.jsx(G,{label:e.formatMessage(o.viewOnlyCustomInstructionsModalHeaderTooltip),side:"left",align:"center",children:s.jsxs("div",{className:"text-token-text-tertiary flex flex-row items-center gap-1.5 text-sm",children:[s.jsx(D,{className:"icon"}),s.jsx(T,y({},o.viewOnlyCustomInstructionsModalHeaderLabel))]})}),children:s.jsxs("div",{className:"flex h-full flex-col px-4 pt-0 pb-4",children:[s.jsx("div",{className:"text-sm font-medium",children:e.formatMessage(c?o.editCustomInstructionsSubtitle:o.readOnlyCustomInstructionsTitle)}),s.jsx("div",{className:"text-token-text-secondary text-sm",children:e.formatMessage(o.editCustomInstructionsDescription)}),s.jsx("textarea",{autoFocus:!0,placeholder:e.formatMessage(o.projectInstructionsPlaceholder),className:q("focus:ring-token-text-primary border-heavy mt-4 mb-1 min-h-24 w-full grow resize-none overflow-x-clip overflow-y-auto rounded-lg border px-3 py-2 focus:ring-1",c?"bg-transparent":"bg-token-bg-tertiary"),name:"instructions",onChange:v,value:n,disabled:r.isPending||!c}),d.map(i=>s.jsx(z,{className:"mt-1",children:i},i)),c&&s.jsx(m.Actions,{primaryButton:_,secondaryButton:b})]})})}export{V as CustomInstructionsModal};
//# sourceMappingURL=nvsf5y439ozyeg9o.js.map
