const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/d9d46aun6hvzsagm.js","assets/bubexfvksfr7893o.js","assets/9paxni9f8n7suc5d.js","assets/hbcnisqpfdzhue92.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/jx5pd8qsxc77tbjo.js"])))=>i.map(i=>d[i]);
var ve=Object.defineProperty;var ie=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var le=(e,r,s)=>r in e?ve(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,re=(e,r)=>{for(var s in r||(r={}))Se.call(r,s)&&le(e,s,r[s]);if(ie)for(var s of ie(r))je.call(r,s)&&le(e,s,r[s]);return e};import{c as Ee,r as c,j as t,_ as q,h as K,e as pe,M as ce}from"./bubexfvksfr7893o.js";import{R as Ne,A as Ce,u as oe,I as ke,_ as T,nH as Pe,T as Me,n as de,g as Ae,bS as Le,cg as Ie,mf as Oe,az as X,aA as B,cz as se,d$ as Z,dS as W,aB as F,ee as Te}from"./ncw8zw682jinppua.js";import{R as Re}from"./uy9hzbj6pcdj4e31.js";import{aN as fe,aA as Q,m8 as xe,aI as ge,dd as De,mt as ze,cR as Ue,aF as Fe,aG as $e,mu as We}from"./lm3g1zm00rp6al39.js";import{M as Ve,O as qe}from"./3oobacop513xsz4v.js";import{u as Ke}from"./j703u6xl4odnuo39.js";import{s as V}from"./byyk4vwx7jza6c4f.js";import"./me0ap2djy50z6upd.js";import"./nbm98bu0q3774lnr.js";import"./i9ddjt6oaiw4vo4g.js";import"./fwn4bwvyx3h4ty5g.js";import"./l1teaxoievyk0rz1.js";import"./fum95d46v8d5jv8u.js";import"./n2u3q2i5341kdx8j.js";async function Xe(e,r){try{return(await Ne.safePost("/onboarding/steps",{requestBody:{main_usages:e,variant:r},authOption:Ce.SendIfAvailable})).steps}catch(s){return[]}}function Be(){"use forget";var b,v,R,d;const e=Ee.c(15),r=oe(),{eligible:s,isLoading:p}=fe(Q.CreateExampleChatsOnboarding);let n;e[0]!==r?(n=xe(r,!1),e[0]=r,e[1]=n):n=e[1];const i=n,m=c.useRef(!1);let a;e[2]!==r?(a=ke(r),e[2]=r,e[3]=a):a=e[3];const{session:o}=a,g=(v=(b=o==null?void 0:o.user)==null?void 0:b.id)!=null?v:void 0,_=(d=(R=o==null?void 0:o.account)==null?void 0:R.id)!=null?d:void 0;let y;e[4]!==_||e[5]!==r||e[6]!==s||e[7]!==p||e[8]!==i||e[9]!==g?(y=f=>{!s||p||m.current||(m.current=!0,ge(r,Q.CreateExampleChatsOnboarding),T.logEventWithStatsig("Onboarding: Create Example Chats","chatgpt_onboarding_flow_create_example_chats"),Promise.all(f.map(x=>{var E;if(x.step_type==="usage_question")return Promise.resolve();const l=x.step_metadata;x.step_type!=="dalle"&&i.get("use_dynamic_response",!1)&&l!=null&&l.onboarding&&(delete l.onboarding.system_hints,delete l.onboarding.hardcoded_response);const L=Pe();return Me.initThread({clientThreadId:L,conversationMode:{kind:de.PrimaryAssistant},userId:g,accountId:_,disableConversationNavigation:!0}),De({conversation:Ae(r,L),eventSource:"url",promptMessage:Le(x.step_prompt,l!=null?l:void 0,{real_author:Ie.Onboarding}),completionMetadata:{isOnboardingConversation:!0,conversationMode:{kind:de.PrimaryAssistant},systemHints:(E=l==null?void 0:l.onboarding)==null?void 0:E.system_hints},skipNotification:!0})})).catch(Ge))},e[4]=_,e[5]=r,e[6]=s,e[7]=p,e[8]=i,e[9]=g,e[10]=y):y=e[10];const P=y;let M;return e[11]!==s||e[12]!==p||e[13]!==P?(M={eligible:s,isLoading:p,createExampleChats:P},e[11]=s,e[12]=p,e[13]=P,e[14]=M):M=e[14],M}function Ge(){T.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_creating_example_chats"})}const He=X(()=>q(()=>import("./d9d46aun6hvzsagm.js"),__vite__mapDeps([0,1])),{loading:e=>B(e)});function Ye({item:e,onClick:r}){var s;return t.jsx("li",{className:"first:border-t-0",children:t.jsxs("button",{className:"hover:bg-token-interactive-bg-secondary-hover flex w-full cursor-pointer items-start gap-3 rounded-2xl px-4 py-4 text-start sm:px-6",onClick:p=>r(p,e),children:[t.jsx("div",{className:"mt-0.5 text-xl",children:e.iconImageUrl?t.jsx("img",{src:e.iconImageUrl,alt:e.title,className:"h-6 w-6 rounded-full"}):e.icon?t.jsx("span",{"aria-hidden":!0,children:e.icon}):t.jsx(Oe,{category:(s=e.category)!=null?s:"onboarding",useV2Colors:!0})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-token-text-primary text-base font-medium",children:e.title}),t.jsx("div",{className:"text-token-text-secondary mt-1 text-sm leading-5",children:e.body})]}),t.jsx(He,{className:"icon mt-0.5 shrink-0 opacity-60"})]})})}function he({onAutoAdvance:e,enabled:r,delayMs:s=5e3,idleRestartMs:p=400,elementRef:n,dependencies:i=[]}){const m=c.useRef(null),a=c.useRef(null),o=()=>{m.current!=null&&(window.clearTimeout(m.current),m.current=null),a.current!=null&&(window.clearTimeout(a.current),a.current=null)};c.useEffect(()=>{if(o(),!!r)return m.current=window.setTimeout(()=>{e()},s),o},[r,s,e,...i]),c.useEffect(()=>{if(!r)return;const g=n==null?void 0:n.current,_=g!=null?g:window,y=()=>{m.current!=null&&(window.clearTimeout(m.current),m.current=null),a.current!=null&&window.clearTimeout(a.current),a.current=window.setTimeout(()=>{r&&(m.current!=null&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{e()},s))},p)};return _.addEventListener("scroll",y,{passive:!0}),_.addEventListener("wheel",y,{passive:!0}),()=>{_.removeEventListener("scroll",y),_.removeEventListener("wheel",y),o()}},[r,s,p,e,n==null?void 0:n.current,...i])}const Ze=X(()=>q(()=>import("./d9d46aun6hvzsagm.js"),__vite__mapDeps([0,1])),{loading:e=>B(e)}),Qe=X(()=>q(()=>import("./9paxni9f8n7suc5d.js"),__vite__mapDeps([2,1])),{loading:e=>B(e)}),Je=X(()=>q(()=>import("./hbcnisqpfdzhue92.js"),__vite__mapDeps([3,1])),{loading:e=>B(e)}),G=pe({cardsAriaLabel:{id:"prompt-new-user-onboarding.cards-aria-label",defaultMessage:"Starter examples"},dotsAriaLabel:{id:"prompt-new-user-onboarding.dots-aria-label",defaultMessage:"Card {current} of {total}"},prevCardAriaLabel:{id:"prompt-new-user-onboarding.prev-card-aria-label",defaultMessage:"Previous idea"},nextCardAriaLabel:{id:"prompt-new-user-onboarding.next-card-aria-label",defaultMessage:"Next idea"}}),et=60,_e=5e3,be=400;function tt({items:e,onSelect:r,onSubmit:s,className:p}){const n=K(),i=c.useRef(null),m=c.useRef(null),a=c.useRef(null),[o,g]=c.useState(0),[_,y]=c.useState(0),P=c.useRef({vw:0,paddingLeft:0,gapPx:0,cardWidth:0,slotWidth:1,centerTarget:0,s:0}),M=e[o];c.useEffect(()=>{r(M,o)},[r,M,o]),c.useEffect(()=>{var f;const d=e[o];d&&T.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:o,prompt_id:(f=d.id)!=null?f:String(o)})},[e,o]),c.useEffect(()=>{const d=i.current;if(!d)return;let f=null,x=d.scrollLeft,l=performance.now();const L=160,E=w=>{const C=a.current;C&&(C.style.transform="translate3d(".concat(w,"px, 0, 0)"))},I=()=>{const{vw:w,paddingLeft:C,slotWidth:h,centerTarget:N,s:k,cardWidth:z}=P.current,u=(d.scrollLeft+w/2-C-z/2)/(h||1),j=Math.max(0,Math.min(e.length-1,u)),O=Math.round(j);g(U=>U!==O?O:U);const D=j*(v+k)+v/2;E(N-D)},A=()=>{f=null,I();const w=performance.now(),C=d.scrollLeft;Math.abs(C-x)>.1&&(l=w,x=C),w-l<L&&(f=window.requestAnimationFrame(A))},S=()=>{f==null&&(x=d.scrollLeft,l=performance.now(),f=window.requestAnimationFrame(A))};return I(),d.addEventListener("scroll",S,{passive:!0}),d.addEventListener("wheel",S,{passive:!0}),()=>{d.removeEventListener("scroll",S),d.removeEventListener("wheel",S),f!=null&&window.cancelAnimationFrame(f)}},[e.length]),c.useEffect(()=>{const d=i.current,f=m.current;if(!d||!f)return;const x=()=>{const l=d.getBoundingClientRect(),L=f.getBoundingClientRect(),E=l.width,I=window.getComputedStyle(d),A=parseFloat(I.paddingLeft||"0"),S=parseFloat((I.columnGap||I.gap||"0").toString())||0,w=Math.max(0,E-2*A),C=w+S,h=Math.max(0,E/2-v/2-et),N=l.left-L.left+E/2;P.current={vw:E,paddingLeft:A,gapPx:S,cardWidth:w,slotWidth:C,centerTarget:N,s:h},y(h);const k=(d.scrollLeft+E/2-A-w/2)/(C||1),z=Math.max(0,Math.min(e.length-1,k)),u=Math.round(z);g(D=>D!==u?u:D);const j=z*(v+h)+v/2,O=a.current;O&&(O.style.transform="translate3d(".concat(N-j,"px, 0, 0)"))};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[e.length]);const b=d=>{const f=i.current;if(!f)return;const l=f.querySelectorAll('li[data-card="true"]')[d];l&&l.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})};he({onAutoAdvance:()=>{const d=(o+1)%e.length;b(d)},enabled:e.length>1,delayMs:_e,idleRestartMs:be,elementRef:i,dependencies:[o,e.length,b]});const v=180,R=c.useMemo(()=>{const d=Math.max(0,o-1),f=Math.min(e.length-1,o+1);return e.map((x,l)=>{var S,w;if(l<d||l>f)return null;const L=(S=x.id)!=null?S:l,E=l===o,I=E?1:.9,A=E?1:.5;return t.jsx("div",{className:"pointer-events-none flex items-center justify-center",style:{position:"absolute",top:0,left:l*(v+_),height:v,width:v,transform:"scale(".concat(I,")"),opacity:A,transition:"transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 300ms cubic-bezier(0.2, 0.8, 0.2, 1)",willChange:"transform, opacity"},children:x.iconImageUrl||x.coverImageUrl?t.jsx("img",{src:(w=x.iconImageUrl)!=null?w:x.coverImageUrl,alt:"",className:"rounded-3xl",style:{height:v,width:v}}):t.jsx("div",{className:"flex items-center justify-center text-3xl",style:{height:v,width:v},children:x.icon})},L)})},[e,o,_]);return t.jsx("div",{ref:m,className:se(p,"relative"),children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 overflow-hidden",style:{height:v},"aria-hidden":!0,children:t.jsx("div",{ref:a,className:"pointer-events-none absolute start-0 top-0",style:{height:v,willChange:"transform"},"aria-hidden":!0,children:R})}),t.jsx("ul",{ref:i,className:"no-scrollbar flex max-h-full snap-x snap-mandatory scroll-ps-5 scroll-pe-5 gap-4 overflow-x-auto scroll-smooth px-5 pb-10","aria-label":n.formatMessage(G.cardsAriaLabel),children:e.map((d,f)=>{var x;return t.jsx("li",{"data-card":"true",className:"max-h-full shrink-0 snap-center [scroll-snap-stop:always]",children:t.jsx("div",{className:se("relative h-full w-[calc(100vw-2.5rem)] rounded-3xl text-start sm:w-[260px]","focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"),style:{"--accent":d.accentColor},children:t.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"relative",style:{height:v,width:v},"aria-hidden":!0}),t.jsx("div",{className:"text-token-text-primary text-center text-2xl leading-tight font-medium sm:text-xl",children:d.title}),t.jsx(ye,{prompt:d.prompt||d.body,onSubmit:l=>s(l,d,f)})]})})},(x=d.id)!=null?x:f)})}),t.jsx("div",{className:"mt-2 flex items-center justify-center gap-2 pb-4 sm:hidden",children:e.map((d,f)=>t.jsx("button",{"aria-label":n.formatMessage(G.dotsAriaLabel,{current:f+1,total:e.length}),"aria-current":o===f,className:se("h-2 w-2 rounded-full bg-current transition-colors",o===f?"text-token-text-primary":"bg-token-bg-secondary"),onClick:()=>b(f)},f))})]})})}function rt({items:e,onSelect:r,onSubmit:s,className:p}){var _;const[n,i]=c.useState(0),[m,a]=c.useState(0),o=e[n],g=e[m];return c.useEffect(()=>{r(o,n)},[r,o,n]),c.useEffect(()=>{var P;const y=e[n];y&&T.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:n,prompt_id:(P=y.id)!=null?P:String(n)})},[e,n]),t.jsx("div",{className:p,children:t.jsxs("div",{className:"tall:gap-8 flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Z,{mode:"sync",children:g&&t.jsx(W.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 start-1/2 top-1/2 -z-10 h-[160%] w-[100%] -translate-x-1/2 -translate-y-1/2",initial:{opacity:0},animate:{opacity:.2},exit:{opacity:0},transition:{duration:.6,ease:[.2,.8,.2,1]},style:{backgroundImage:"radial-gradient(closest-side, ".concat(g.accentColor," 0%, transparent 80%)")}},(_=g.id)!=null?_:m)}),t.jsx(nt,{items:e,activeIndex:n,onWillChange:y=>{a(y)},onChange:y=>{i(y)}})]}),g&&t.jsx(Z,{mode:"wait",children:t.jsxs(W.div,{className:"flex max-w-[320px] flex-col items-center gap-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.3,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:8,transition:{duration:.3,ease:[.2,.8,.2,1]}},children:[t.jsx("div",{className:"text-token-text-primary text-2xl leading-tight font-medium sm:text-xl",children:g.title}),t.jsx("div",{className:"sm:min-h-24",children:t.jsx(ye,{prompt:g.prompt||g.body,onSubmit:y=>s(y,g,m)})})]},m)})]})})}const ne=228,ue=190,st=160,me=180,ae=350;function nt({items:e,activeIndex:r,onChange:s,onWillChange:p}){const n=K(),i=e.length,[m,a]=c.useState(null),[o,g]=c.useState("idle"),[_,y]=c.useState(!1),P=c.useRef(null),M=c.useRef(null);c.useEffect(()=>()=>{P.current!=null&&window.clearTimeout(P.current),M.current!=null&&window.cancelAnimationFrame(M.current)},[]);const[b,v]=c.useState(ne);c.useEffect(()=>{const u=()=>{const j=window.innerHeight||800,D=(Math.max(600,Math.min(800,j))-600)/200,U=Math.round(ue+(ne-ue)*D);v(U)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const R=b/ne,d=Math.round(st*R),f=b/d,x=(b+d)/2+me,l=(u,j)=>(u%j+j)%j,L=l(r-1,i),E=l(r+1,i),I=l(r-2,i),A=l(r+2,i),S=c.useCallback(u=>{if(_||i<=1)return;y(!0),a(u),g("prepare");const j=l(u==="right"?r+1:r-1,i);p==null||p(j),M.current=window.requestAnimationFrame(()=>{M.current=window.requestAnimationFrame(()=>{g("slide"),P.current=window.setTimeout(()=>{a(null),g("idle"),y(!1),s(l(u==="right"?r+1:r-1,i))},ae)})})},[_,i,r,p,s]);if(he({onAutoAdvance:()=>S("right"),enabled:i>1&&!_,delayMs:_e,idleRestartMs:be,dependencies:[r,S,_]}),i===0)return null;const w=[-2,-1,0,1,2].map(u=>u*x),C=[{key:"left-".concat(L),index:L,slot:1},{key:"center-".concat(r),index:r,slot:2},{key:"right-".concat(E),index:E,slot:3}];let h=C;if(m==="right"){const u=[{key:"farRight-".concat(A),index:A,slot:4,fadeIn:!0}];h=[...C,...u]}else m==="left"&&(h=[...[{key:"farLeft-".concat(I),index:I,slot:0,fadeIn:!0}],...C]);const N=u=>{if(m==null||o==="idle"||o==="prepare")return w[u];if(m==="right"){const j=Math.max(u-1,0);return w[j]}else{const j=Math.min(u+1,4);return w[j]}},k=(u,j)=>{const O=N(u),D=u===2?30:u===1||u===3?20:10,U=!_&&i>1&&(u===1||u===3),H=O===w[2],J=O===w[1]||O===w[3],ee=d,te=H?f:1,Y=H?1:J?.5:0;return{x:O,z:D,cardSize:ee,scale:te,opacity:j&&o==="prepare"?0:Y,isDisabled:!U}},z=u=>{u.key==="ArrowLeft"?(u.preventDefault(),S("left")):u.key==="ArrowRight"&&(u.preventDefault(),S("right"))};return t.jsxs("div",{className:"relative flex w-full items-center justify-center py-2 outline-none",tabIndex:0,"aria-label":n.formatMessage(G.cardsAriaLabel),onKeyDown:z,children:[t.jsx("div",{className:"relative overflow-hidden",style:{height:b,width:3*b+2*me},children:h.map(({key:u,index:j,slot:O,fadeIn:D})=>{const{x:U,z:H,cardSize:J,scale:ee,opacity:te,isDisabled:Y}=k(O,D);return t.jsx(at,{item:e[j],translateX:U,zIndex:H,onClick:()=>S(O===1?"left":"right"),cardSize:J,scale:ee,opacity:te,isDisabled:Y},u)})}),t.jsx(F,{color:"ghost","aria-label":n.formatMessage(G.prevCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% - ".concat(b/2+20+36,"px)")},onClick:()=>S("left"),disabled:_||i<=1,icon:Qe}),t.jsx(F,{color:"ghost","aria-label":n.formatMessage(G.nextCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% + ".concat(b/2+20,"px)")},onClick:()=>S("right"),disabled:_||i<=1,icon:Ze})]})}function at({item:e,translateX:r,zIndex:s,onClick:p,cardSize:n,scale:i,opacity:m,isDisabled:a}){var o;return t.jsx("button",{className:"absolute start-1/2 top-1/2 flex items-center justify-center rounded-3xl",style:{transform:"translate3d(-50%, -50%, 0) translate3d(".concat(r,"px, 0, 0) scale(").concat(i,")"),height:"".concat(n,"px"),width:"".concat(n,"px"),transition:"transform ".concat(ae,"ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity ").concat(ae,"ms cubic-bezier(0.2, 0.8, 0.2, 1)"),willChange:"transform, opacity",opacity:m,zIndex:s},onClick:p,disabled:a,children:e.iconImageUrl||e.coverImageUrl?t.jsx("img",{src:(o=e.iconImageUrl)!=null?o:e.coverImageUrl,alt:"",className:"rounded-3xl",style:{maxHeight:"".concat(n,"px"),maxWidth:"".concat(n,"px")}}):t.jsx("div",{className:"text-6xl","aria-hidden":!0,children:e.icon})})}function ye({prompt:e,onSubmit:r}){const s=K();return t.jsxs("div",{className:"group bg-token-bg-elevated-primary border-token-border-light inline-flex items-end justify-center gap-3 self-stretch rounded-3xl border p-3 ps-4 shadow-xl backdrop-blur-[20px]",children:[t.jsx("div",{className:"text-token-text-primary flex-1 justify-end text-sm leading-tight font-normal duration-300 sm:opacity-65 sm:group-hover:opacity-100",children:e}),t.jsx(F,{icon:Je,size:"small",label:s.formatMessage(V.tryNow),onClick:r,className:"h-7 w-7 transition-all duration-300 sm:opacity-65 sm:group-hover:opacity-100"})]})}const ot=X(()=>q(()=>import("./ncw8zw682jinppua.js").then(e=>e.yq),__vite__mapDeps([4,1,5])),{loading:e=>B(e)}),it=X(()=>q(()=>import("./jx5pd8qsxc77tbjo.js"),__vite__mapDeps([6,1])),{loading:e=>B(e)}),$=pe({subtitleCards:{id:"prompt-new-user-onboarding.subtitle-cards-2",defaultMessage:"Try one of these ideas to see how ChatGPT works."},close:{id:"prompt-new-user-onboarding.close",defaultMessage:"Close"},skip:{id:"prompt-new-user-onboarding.skip",defaultMessage:"Skip"}}),we={work:["help_me_get_recognized","anime_style_portrait","document_summary"],school:["fix_procrastination","anime_style_portrait","create_a_quiz"],personalTasks:["meal_prep","anime_style_portrait","upgrade_skin_care"],funAndEntertainment:["promo_code","action_figure_portrait","color_theory"],other:["be_my_personal_trainer","anime_style_portrait","color_theory"]};function lt(e){return Object.prototype.hasOwnProperty.call(we,e)}function ct({cardItems:e,isUserTriggered:r,handleSelect:s,onClose:p}){const n=K(),[i,m]=c.useState(0),a=!Te(),o=(g,_)=>{m(_)};return t.jsxs(qe,{className:"flex h-full flex-col gap-6",children:[t.jsx("p",{className:"text-token-text-secondary sm:tall:text-3xl sm:tall:font-medium sm:tall:font-medium sm:tall:mb-4 sm:short:mt-4 mx-auto min-h-0 max-w-[280px] shrink text-center text-base max-sm:mt-10 sm:max-w-[420px]",children:n.formatMessage($.subtitleCards)}),t.jsx("div",{className:"flex min-h-0 flex-1 flex-col justify-center gap-4",children:a?t.jsx(tt,{items:e,onSelect:o,onSubmit:s,className:"flex min-h-0 flex-1 flex-col justify-center"}):t.jsx(rt,{items:e,onSelect:o,onSubmit:s,className:"sm:pb-6"})}),t.jsxs("div",{className:"mx-auto flex w-full shrink-0 flex-col gap-2 px-6 pb-6 sm:max-w-[380px]",children:[t.jsx(F,{size:"large",color:"primary",fullWidth:!0,onClick:g=>s(g,e[i],i),children:n.formatMessage(V.tryNow)}),t.jsx(F,{size:"large",color:"ghost",fullWidth:!0,onClick:()=>p==null?void 0:p(),children:r?n.formatMessage($.close):n.formatMessage($.skip)})]})]})}function dt({starters:e,handleSelect:r,isUserTriggered:s,onClose:p}){const n=K();return c.useEffect(()=>{!e||e.length===0||e.forEach((i,m)=>{var a;T.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:m,prompt_id:(a=i.id)!=null?a:""})})},[e]),t.jsxs("div",{className:"tall:gap-16 flex h-full flex-col gap-6 sm:mx-auto sm:max-w-[480px] sm:px-3",children:[t.jsxs("div",{className:"flex flex-col gap-2 px-5 pt-6 sm:px-8 sm:pt-7",children:[t.jsx("h2",{className:"text-token-text-primary text-center text-3xl font-medium",children:n.formatMessage(V.promptOnboardingTitle)}),t.jsx("p",{className:"text-token-text-secondary text-center text-base",children:n.formatMessage(V.promptOnboardingSubtitle)})]}),t.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto px-2 pb-8",children:t.jsx("ul",{className:"divide-token-border-light divide-y",children:e.map((i,m)=>{var a;return t.jsx(Ye,{item:i,onClick:(o,g)=>r(o,g,m)},(a=i.id)!=null?a:m)})})}),t.jsx("div",{className:"px-6 pb-6",children:t.jsx(F,{size:"large",color:"secondary",fullWidth:!0,onClick:()=>p==null?void 0:p(),children:s?n.formatMessage($.close):n.formatMessage($.skip)})})]})}function kt({clientThreadId:e,onClose:r}){const s=oe(),p=xe(s,!1),n=p.get("prompt_onboarding_enable_usage_selection",!1),i=p.get("prompt_onboarding_prompt_variant",""),m=p.get("prompt_onboarding_example_chats_prompt_variant",""),[a,o]=c.useState(n?null:["other"]),[g,_]=c.useState(!1),y=K(),P=ze({clientThreadId:e}),{markAsViewed:M,isUserTriggered:b,onboardingStyle:v}=Ue(),R=c.useRef(null);c.useEffect(()=>{M(),T.logEventWithStatsig("Onboarding Shown","chatgpt_onboarding_flow_shown",{isUserTriggered:b?"true":"false"}),T.logUpsellOrModalEvent(Fe,{eventId:"prompt_new_user_onboarding_modal_shown",type:$e.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[M,b]);const d=c.useMemo(()=>{const h=["work","school","funAndEntertainment"],N=new Set(a!=null?a:[]);if(N.size===0)return"other";for(const k of h)if(N.has(k))return k;for(const k of N)if(lt(k))return k;return"other"},[a]),f=Ke(),x=c.useMemo(()=>b?f:i!=="use_case"?f.filter(h=>h.isFeatured):we[d].map(h=>f.find(N=>N.id===h)).filter(h=>h!==void 0),[f,b,d,i]);c.useEffect(()=>{x.length>0&&We(x,e)},[x,e]);const l=c.useCallback(h=>(R.current||(R.current=Xe(h,m===""?void 0:m)),R.current),[m]),{createExampleChats:L,eligible:E,isLoading:I}=Be();c.useEffect(()=>{a!=null&&l(a)},[l,a]);const A=c.useCallback(h=>{const N=h!=null?h:a;!E||I||N==null||l(N).then(k=>{L(k)}).catch(()=>{T.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_fetching_onboarding_steps"})})},[L,E,I,l,a]),S=(h,N,k)=>{var z;try{r==null||r(),P({suggestedPrompt:N,index:k,isOnboarding:!b}),A(),T.logEventWithStatsig("Onboarding Try Prompt","chatgpt_onboarding_flow_try_prompt",{index:k,prompt_id:(z=N.id)!=null?z:String(k),isUserTriggered:b?"true":"false"})}catch(u){T.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{error:u instanceof Error?u.message:String(u)})}},w=()=>{const h=a!=null?a:["other"];T.logEventWithStatsig("Onboarding Dismissed","chatgpt_onboarding_flow_dismissed",{isUserTriggered:b?"true":"false"}),r==null||r(),A(h)},C=()=>{b?w():_(!0)};return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35},className:"absolute inset-0 bg-black/60","aria-hidden":"true",onClick:h=>{h.stopPropagation(),b&&w()}}),t.jsx(Z,{children:t.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.35},className:"bg-token-bg-primary relative z-10 flex h-full w-full flex-col items-center justify-center rounded-none",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},onClick:h=>h.stopPropagation(),children:t.jsxs("div",{className:"flex max-h-full w-full flex-col gap-6 max-sm:h-full",children:[t.jsx("div",{className:"absolute end-3 top-3 z-20 hidden sm:block",children:t.jsx(F,{icon:ot,onClick:w,color:"ghost",className:"h-9 w-9",label:y.formatMessage($.close)})}),t.jsx(Z,{mode:"wait",children:a==null?t.jsx(Ve,{mainUsagesProp:a!=null?a:[],onSelectMainUsages:o,onSkip:()=>o(["other"])},"main-usage-question"):g?t.jsx(ut,{onClose:w,createExampleChats:A},"all-set-page"):v==="cards"?t.jsx(ct,{cardItems:x,isUserTriggered:b,handleSelect:S,onClose:C},"cards-variant"):t.jsx(dt,{starters:x,handleSelect:S,isUserTriggered:b,onClose:C},"list-variant")})]})})})]})}function ut({onClose:e,createExampleChats:r}){const s=oe(),{eligible:p,isLoading:n}=fe(Q.Onboarding);return c.useEffect(()=>{p&&!n&&ge(s,Q.Onboarding)},[s,p,n]),c.useEffect(()=>{r()},[r]),t.jsxs("div",{className:"mx-auto flex h-full w-full flex-col items-center justify-center gap-16 p-6 sm:max-w-[380px]",children:[t.jsxs("div",{className:"flex min-h-0 flex-col items-center justify-center gap-4 max-sm:flex-1",children:[t.jsx(W.div,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:360,damping:24,mass:.8,duration:.6},children:t.jsx(it,{className:"text-token-text-primary h-10 w-10 text-5xl"})}),t.jsx(W.p,{className:"text-token-text-primary text-center text-3xl",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut",delay:.5},children:t.jsx(ce,re({},V.allSet))})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6",children:[t.jsx("div",{className:"text-token-text-secondary relative mt-auto w-full text-center text-base",children:t.jsx(Re,{})}),t.jsx(F,{size:"large",color:"primary",fullWidth:!0,onClick:e,children:t.jsx(ce,re({},V.done))})]})]})}export{kt as default};
//# sourceMappingURL=kib8peb1b8j9rc5d.js.map
