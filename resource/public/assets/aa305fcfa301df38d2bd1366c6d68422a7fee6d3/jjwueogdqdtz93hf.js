const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/g683sukvvwb09shg.js","assets/bubexfvksfr7893o.js","assets/h6662v3to5g8p21c.js","assets/jaztged0ed1qpm4w.js"])))=>i.map(i=>d[i]);
import{j as e,r as p,h as I,M as n,_ as m}from"./bubexfvksfr7893o.js";import{bO as L,x as w}from"./lm3g1zm00rp6al39.js";import{u as G,al as O,d as j,kR as R,aC as A,ff as T,eH as b,az as k,ji as D,dc as f,aA as y}from"./ncw8zw682jinppua.js";const B=k(()=>m(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([0,1])),{loading:t=>y(t)}),E=k(()=>m(()=>import("./h6662v3to5g8p21c.js"),__vite__mapDeps([2,1])),{loading:t=>y(t)}),z=k(()=>m(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([3,1])),{loading:t=>y(t)});function N({room:t,onClose:r}){"use no forget";var h;const c=G(),d=O(c),C=(h=d==null?void 0:d.isWorkspaceAccount())!=null?h:!1,g=L(c),i=j(()=>t.groupLink$()),l=j(()=>t.members$().length),s=p.useRef(!1),v=p.useRef(null),[M,_]=p.useState(!1),a=I(),u=R(c),x=a.formatMessage({id:"yXlmL4",defaultMessage:"Copied group link to clipboard"});return e.jsx(A,{testId:"modal-manage-group-link",isOpen:!0,onClose:()=>r(),type:"success",title:a.formatMessage({id:"mjQ4I1",defaultMessage:"Group link"}),primaryButton:i==null?e.jsx(f.Button,{title:a.formatMessage({id:"htBXxu",defaultMessage:"Create link"}),color:"primary",onClick:async()=>{if(!s.current)try{s.current=!0;const o=await g.createGroupLink$({roomId:t.id});navigator.clipboard.writeText(o),u.success(x)}catch(o){}finally{s.current=!1}},"data-testid":"manage-group-link-create-button"}):e.jsx(f.Button,{title:a.formatMessage({id:"C9GEAn",defaultMessage:"Copy link"}),color:"primary",onClick:()=>{navigator.clipboard.writeText(i),u.success(x),r()},"data-testid":"manage-group-link-copy-button"}),secondaryButton:e.jsx(f.Button,{title:a.formatMessage({id:"kdA3Jv",defaultMessage:"Cancel"}),color:"secondary",onClick:()=>r()}),children:e.jsxs("div",{className:"space-y-3",children:[i==null?null:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{ariaLabel:a.formatMessage({id:"fiAOIN",defaultMessage:"Group link"}),disabled:!0,className:"my-1 w-full px-3 py-2",inputClassName:"bg-token-bg-primary! text-token-text-secondary",name:"group-link",type:"url",value:i,autoComplete:"off","data-1p-ignore":!0}),e.jsx(T,{open:M,onOpenChange:o=>{_(o)},triggerButton:e.jsx(D,{ref:v,"aria-label":a.formatMessage({id:"cMZKTU",defaultMessage:"Manage group link"}),icon:z}),size:"auto",children:M?e.jsxs(e.Fragment,{children:[e.jsx(b.Item,{onClick:async()=>{if(!s.current)try{s.current=!0,await g.resetGroupLink$({roomId:t.id}),u.success(a.formatMessage({id:"KWt7DF",defaultMessage:"Group link has been reset"}))}catch(o){}finally{s.current=!1}},icon:E,color:"danger",children:l===1?e.jsx(n,{id:"+ze2X8",defaultMessage:"Reset link"}):e.jsx(n,{id:"dbY3LR",defaultMessage:"Reset link for all {memberCount} members",values:{memberCount:l}})}),e.jsx(b.Item,{onClick:async()=>{if(!s.current)try{s.current=!0,await g.deleteGroupLink$({roomId:t.id}),u.success(a.formatMessage({id:"DabJGT",defaultMessage:"Group link has been deleted"}))}catch(o){}finally{s.current=!1}},icon:B,color:"danger",children:l===1?e.jsx(n,{id:"LNUwGz",defaultMessage:"Delete link"}):e.jsx(n,{id:"xSrxa4",defaultMessage:"Delete link for all {memberCount} members",values:{memberCount:l}})})]}):null})]}),e.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:C?e.jsx(n,{id:"7n05yW",defaultMessage:"Use a group link to invite others to join your group chat. Only members of your workspace can join your group chat with this link, and they’ll be able to see the previous messages in this group chat."}):e.jsx(n,{id:"sC6q5y",defaultMessage:"Use a group link to invite others to join your group chat. Anyone can join your group chat with this link, and they’ll be able to see the previous messages in this group chat."})})]})})}const U=({room:t,onClose:r})=>{"use no forget";return e.jsx(N,{room:t,onClose:r})};export{U as CalpicoManageGroupLinkModalContainer};
//# sourceMappingURL=jjwueogdqdtz93hf.js.map
