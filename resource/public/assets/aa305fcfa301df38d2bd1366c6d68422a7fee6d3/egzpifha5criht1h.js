const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lm3g1zm00rp6al39.js","assets/bubexfvksfr7893o.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/conversation-small-lq38g8zw.css","assets/jy72v6s0lxzr78f8.js","assets/ktpmjflyns54a7dy.js","assets/jar9ivwute2tqd9f.js","assets/nbrjep5yk15f1ntt.js","assets/ddrnnlwwkggzz2ny.js","assets/g7sgm8r5m5ydvssd.js"])))=>i.map(i=>d[i]);
var jt=Object.defineProperty,Wt=Object.defineProperties;var Tt=Object.getOwnPropertyDescriptors;var dt=Object.getOwnPropertySymbols;var Et=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable;var ut=(t,e,s)=>e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,M=(t,e)=>{for(var s in e||(e={}))Et.call(e,s)&&ut(t,s,e[s]);if(dt)for(var s of dt(e))Bt.call(e,s)&&ut(t,s,e[s]);return t},te=(t,e)=>Wt(t,Tt(e));import{_ as ge,c as Be,j as o,h as se,r as f,M as L,e as Me,a as Rt}from"./bubexfvksfr7893o.js";import{bj as Ut,bk as Vt,p as zt,w as Ft,x as Gt,aF as bt,aG as _t,aI as Ae,aA as Pe,jZ as We,j_ as qt,j$ as Ht,k0 as $t,k1 as Jt,k2 as Mt,k3 as yt,k4 as Ie,k5 as Qt,k6 as Yt,k7 as Kt,k as Xt,k8 as Zt,cZ as pt,dw as eo,k9 as to,ka as oo,kb as so,j as ao,gF as no,kc as io,kd as ro,ke as lo,kf as co,kg as uo,kh as po,ki as mo,bJ as go,kj as fo,kk as ho,kl as ko,km as bo,kn as _o,ko as Mo,kp as yo,kq as xo,kr as So,ks as wo,kt as vo,cR as Co,ku as Oo,kv as No,kw as Do,kx as Ao,ky as Po,kz as Io,kA as Lo,kB as jo,kC as Wo,kD as To,kE as Eo,kF as Bo,kG as Ro,kH as Uo,kI as Vo,kJ as zo,kK as Fo,kL as Go,kM as qo,kN as Ho,kO as $o,kP as Jo,kQ as Qo,kR as Yo,N as Ko,P as mt}from"./lm3g1zm00rp6al39.js";import{P as Xo}from"./bqnf7jbq8xd3572o.js";import{b as xt,d as Zo}from"./fwn4bwvyx3h4ty5g.js";import{az as fe,u as he,dU as es,d5 as me,aP as Te,au as Ee,J as we,ew as St,dk as ts,al as os,aA as ss,cz as as,dO as ns,aT as _e,aB as ve,aC as ae,d6 as Ce,dl as wt,_ as oe,F as is,a7 as gt,R as rs,db as $,ex as Oe,lv as ls,de as cs,a4 as ds,ak as us,oE as ps,oz as ms,M as gs,da as fs,e9 as hs,bD as ks,ot as bs,iH as _s,qU as Ms,qV as ys,dJ as Le,ca as ft,qW as je,iI as xs}from"./ncw8zw682jinppua.js";import{a as Ss}from"./guejgwxn789esoyt.js";import vt from"./m7ky6cnx5e7w4637.js";const ws=fe(()=>ge(()=>import("./lm3g1zm00rp6al39.js").then(t=>t.zw),__vite__mapDeps([0,1,2,3,4])),{loading:t=>ss(t)}),pe=Me({title:{id:"workspaceDiscovery.renamePromptModal.title",defaultMessage:"Set a workspace display name"},laterCta:{id:"workspaceDiscovery.renamePromptModal.laterCta",defaultMessage:"Update later"},save:{id:"workspaceDiscovery.renamePromptModal.save",defaultMessage:"Update"},checkboxLabel:{id:"workspaceDiscovery.renamePromptModal.checkboxLabel",defaultMessage:"Use workspace name (recommended)"},body:{id:"workspaceDiscovery.renamePromptModal.body.1",defaultMessage:"This is what teammates on your domain will see when they request to join your workspace. <learnMoreLink>Open settings</learnMoreLink>.{br}{br}Current: <b>{currentName}</b>"},clearToWorkspaceNameAria:{id:"workspaceIdentity.clearToWorkspaceNameAria",defaultMessage:"Clear and use workspace name"}}),ht={dismissedAt:0,shownCount:0},Ct=t=>{if(!t)return ht;try{const e=JSON.parse(t);return{dismissedAt:Number(e.dismissedAt)||0,shownCount:Number(e.shownCount)||0}}catch(e){return ht}},vs=5,Ot=()=>{"use forget";var N;const t=Be.c(8),e=he(),s=es();let a;t[0]!==s?(a=s==null?void 0:s.getWorkspaceId(),t[0]=s,t[1]=a):a=t[1];const i=a,l=me(Ns),r=l!=null?Ut(l.role)||Vt(l.role):void 0,d=Ct(Te.getItem(Ee.WorkspaceDiscoveryRenamePromptInfo)),u=Date.now()>d.dismissedAt+864e5,n=d.shownCount<vs,b=we(e,"1053331630"),p=we(e,"3592108663"),k=r&&b&&p&&u&&n&&!!i,{data:c,isLoading:_}=St(k?i:void 0),F=!!(c!=null&&c.support_workspace_discovery),y=!!(c!=null&&c.workspace_discoverable),h=(c==null?void 0:c.use_workspace_name_for_discovery)===!0,C=(h?"":(N=c==null?void 0:c.public_display_name)!=null?N:"").includes("Workspace #");if(!(F&&k&&!_&&y&&!h&&C)){let S;return t[2]!==_?(S={isOpen:!1,isLoading:_},t[2]=_,t[3]=S):S=t[3],S}let x;t[4]!==e?(x=ts(e,"309365540").get("enable",!1),t[4]=e,t[5]=x):x=t[5];const G=x;let O;return t[6]!==G?(O={isOpen:G,isLoading:!1},t[6]=G,t[7]=O):O=t[7],O},Cs=t=>{"use forget";const e=Be.c(6),{onClose:s}=t,a=he();let i;if(e[0]!==a){const n=os(a);i=n==null?void 0:n.getWorkspaceId(),e[0]=a,e[1]=i}else i=e[1];const l=i,{data:r,isPending:d}=St(l);if(!l||d||!r)return null;let u;return e[2]!==s||e[3]!==r||e[4]!==l?(u=o.jsx(Os,{onClose:s,workspaceId:l,settings:r}),e[2]=s,e[3]=r,e[4]=l,e[5]=u):u=e[5],u},Os=t=>{"use forget";var ke;const e=Be.c(68),{onClose:s,workspaceId:a,settings:i}=t,l=se(),r=he();let d;e[0]!==r||e[1]!==s?(d=()=>{_e(r,"chatgpt_workspace_discovery_rename_prompt_modal_closed"),s()},e[0]=r,e[1]=s,e[2]=d):d=e[2];const u=d;let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=Ct(Te.getItem(Ee.WorkspaceDiscoveryRenamePromptInfo)),e[3]=n):n=e[3];const b=n,{mutateAsync:p,isPending:k}=zt(a),c=xt(),_=!!(i!=null&&i.workspace_discoverable),F=(i==null?void 0:i.use_workspace_name_for_discovery)===!0,y=F?"":(ke=i==null?void 0:i.public_display_name)!=null?ke:"",[h,ye]=f.useState(!0),[C,ne]=f.useState(""),[x,G]=f.useState(!1);let O;e[4]!==h||e[5]!==y||e[6]!==C||e[7]!==x||e[8]!==k||e[9]!==F?(O=!h&&!k&&!F&&(x?C.trim()!=="":y.trim()!==""),e[4]=h,e[5]=y,e[6]=C,e[7]=x,e[8]=k,e[9]=F,e[10]=O):O=e[10];const N=O,S=h?c:x?C:y;let m;e[11]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{Te.setItem(Ee.WorkspaceDiscoveryRenamePromptInfo,JSON.stringify({dismissedAt:Date.now(),shownCount:b.shownCount+1}))},e[11]=m):m=e[11];const J=m;let w;e[12]!==r?(w=H=>{ye(H),_e(r,"chatgpt_workspace_discovery_rename_prompt_modal_checkbox_toggled",H?1:0)},e[12]=r,e[13]=w):w=e[13];const I=w;let Q;e[14]!==r||e[15]!==u?(Q=()=>{_e(r,"chatgpt_workspace_discovery_rename_prompt_modal_dismiss_clicked"),J(),u()},e[14]=r,e[15]=u,e[16]=Q):Q=e[16];const v=Q;let ie;e[17]!==h||e[18]!==r||e[19]!==C||e[20]!==u||e[21]!==k||e[22]!==p||e[23]!==_?(ie=async()=>{k||(_e(r,"chatgpt_workspace_discovery_rename_prompt_modal_save_clicked"),await p({value:_,public_display_name:h?null:C.trim(),use_workspace_name_for_discovery:h,action:"name"}),u())},e[17]=h,e[18]=r,e[19]=C,e[20]=u,e[21]=k,e[22]=p,e[23]=_,e[24]=ie):ie=e[24];const re=ie;let q,Y;e[25]!==r?(q=()=>{_e(r,"chatgpt_workspace_discovery_rename_prompt_modal_shown")},Y=[r],e[25]=r,e[26]=q,e[27]=Y):(q=e[26],Y=e[27]),f.useEffect(q,Y);let le;e[28]===Symbol.for("react.memo_cache_sentinel")?(le=o.jsx(L,M({},pe.laterCta)),e[28]=le):le=e[28];let D;e[29]!==v?(D=o.jsx(ve,{color:"secondary",onClick:v,children:le}),e[29]=v,e[30]=D):D=e[30];let ce;e[31]===Symbol.for("react.memo_cache_sentinel")?(ce=o.jsx(L,M({},pe.save)),e[31]=ce):ce=e[31];let A;e[32]!==re||e[33]!==k?(A=o.jsx(ve,{onClick:re,loading:k,children:ce}),e[32]=re,e[33]=k,e[34]=A):A=e[34];let W;e[35]!==D||e[36]!==A?(W=o.jsxs("div",{className:"mt-8 flex w-full justify-end gap-3",children:[D,A]}),e[35]=D,e[36]=A,e[37]=W):W=e[37];let K;e[38]===Symbol.for("react.memo_cache_sentinel")?(K=o.jsx("div",{className:"mb-4 w-full text-xl",children:o.jsx(L,M({},pe.title))}),e[38]=K):K=e[38];let X;e[39]===Symbol.for("react.memo_cache_sentinel")?(X=o.jsx("br",{}),e[39]=X):X=e[39];let T;e[40]!==y?(T=o.jsx("div",{className:"text-token-text-secondary",children:o.jsx(L,te(M({},pe.body),{values:{b:Ds,br:X,currentName:y,learnMoreLink:As}}))}),e[40]=y,e[41]=T):T=e[41];let E;e[42]!==I?(E=H=>I(H.currentTarget.checked),e[42]=I,e[43]=E):E=e[43];let B;e[44]!==c?(B=o.jsx("span",{className:"text-sm",children:o.jsx(L,te(M({},pe.checkboxLabel),{values:{workspaceName:c}}))}),e[44]=c,e[45]=B):B=e[45];let R;e[46]!==h||e[47]!==E||e[48]!==B?(R=o.jsx("div",{className:"mt-6 mb-3",children:o.jsx(Ft,{id:"use-workspace-name-for-discovery",checked:h,onChange:E,label:B})}),e[46]=h,e[47]=E,e[48]=B,e[49]=R):R=e[49];const de=h&&"text-token-text-tertiary";let U;e[50]!==de?(U=as(de),e[50]=de,e[51]=U):U=e[51];let Z;e[52]===Symbol.for("react.memo_cache_sentinel")?(Z=H=>{ne(H.target.value),G(!0)},e[52]=Z):Z=e[52];let V;e[53]!==l||e[54]!==N?(V=N?o.jsx("button",{type:"button",className:"text-token-text-tertiary hover:text-token-text-secondary absolute end-0 top-1/2 -translate-y-1/2 pe-1","aria-label":l.formatMessage(pe.clearToWorkspaceNameAria),onClick:()=>{ne("")},children:o.jsx(ws,{className:"icon-sm"})}):null,e[53]=l,e[54]=N,e[55]=V):V=e[55];let z;e[56]!==h||e[57]!==y||e[58]!==S||e[59]!==U||e[60]!==V?(z=o.jsx(Gt,{name:"public_display_name",ariaLabel:!1,disabled:h,inputClassName:U,placeholder:y,maxLength:Xo,value:S,onChange:Z,insideContainerChildren:V}),e[56]=h,e[57]=y,e[58]=S,e[59]=U,e[60]=V,e[61]=z):z=e[61];let ee;return e[62]!==v||e[63]!==W||e[64]!==T||e[65]!==R||e[66]!==z?(ee=o.jsxs(ae,{isOpen:!0,onClose:v,contentClassName:"p-6",shouldIgnoreClickOutside:!0,size:"custom",className:"max-w-lg",testId:"modal-workspace-discovery-rename-prompt",footerContent:W,children:[K,T,R,z]}),e[62]=v,e[63]=W,e[64]=T,e[65]=R,e[66]=z,e[67]=ee):ee=e[67],ee};function Ns(t){return t.currentWorkspace}function Ds(t){return o.jsx("b",{children:t})}function As(t){return o.jsx(ns,{href:"/admin/identity",children:t})}const Ps=Object.freeze(Object.defineProperty({__proto__:null,WorkspaceDiscoveryRenamePromptModal:Cs,useWorkspaceDiscoveryRenamePromptModal:Ot},Symbol.toStringTag,{value:"Module"})),Is="g-68c9a4676c8c81918d99178b55901b9a",Ls=({onContinue:t,scope:e})=>{const s=se(),a=xt();return o.jsx(ae,{testId:"modal-initial-workspace-onboarding",isOpen:!0,onClose:$,type:"success",title:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{children:s.formatMessage(j.secureWorkspaceWelcomeTitle)}),o.jsx("span",{className:"text-token-text-secondary text-sm",children:a})]}),size:"custom",noPadding:!0,className:"max-w-2xl",children:o.jsx(Mt,{onClose:()=>{t()},scope:e})})},js=({onContinue:t,onSkip:e,isEduPlan:s})=>{const a=se();return o.jsx(ae,{testId:"modal-role-survey",isOpen:!0,onClose:$,type:"success",title:a.formatMessage(j.primaryRoleTitle),size:"custom",className:"max-w-lg",children:o.jsx(Nt,{options:s?$t:Jt,onSkip:e,onSubmit:t})})},Ws=({onContinue:t,onSkip:e,isEduPlan:s})=>{const a=se();return o.jsx(ae,{testId:"modal-department-survey",isOpen:!0,onClose:$,type:"success",title:a.formatMessage(j.workTypeTitle),size:"custom",className:"max-w-lg",children:o.jsx(Nt,{options:s?qt:Ht,onSkip:e,onSubmit:t,multiSelect:!0})})};function Nt({options:t,onSkip:e=$,onSubmit:s=$,multiSelect:a=!1}){const i=se(),[l,r]=f.useState([]);function d(n,b){const p=n.indexOf(b);return p===-1?[...n,b]:[...n.slice(0,p),...n.slice(p+1)]}const u=f.useCallback(n=>{var p;const b=(p=n.currentTarget.dataset.value)!=null?p:"";a?r(d(l,b)):s(b)},[s,l,r,a]);return o.jsxs("div",{children:[a&&o.jsx("p",{className:"text-token-text-tertiary mx-2 text-sm",children:i.formatMessage(j.selectAll)}),o.jsx("div",{className:"flex flex-col items-center justify-center",children:o.jsx("div",{className:"flex-wrap space-y-4",children:t.map(n=>o.jsx(ve,{onClick:u,color:l.includes(n.id)?"primary":"secondary",size:"medium",className:"mx-2","data-value":n.id,children:o.jsx(L,M({},n.displayValue))},n.id))})}),o.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[o.jsx(Oe,{title:i.formatMessage(j.skipButton),onClick:e}),a&&o.jsx(Oe,{title:i.formatMessage(j.continueButton),onClick:()=>{s(l)},disabled:l.length===0,color:"primary",className:"ms-4"})]})]})}const Ts=({onYes:t,onSkip:e})=>{const s=se();return o.jsx(ae,{testId:"modal-chat-onboarding",isOpen:!0,onClose:$,type:"success",title:s.formatMessage(j.chatOnboardingTitle),size:"custom",className:"max-w-lg",children:o.jsxs("div",{className:"px-4 pb-2",children:[o.jsx("p",{className:"text-token-text-secondary mb-4 text-sm",children:s.formatMessage(j.chatOnboardingDescription)}),o.jsxs("div",{className:"mt-4 flex flex-row justify-end gap-3",children:[o.jsx(Oe,{title:s.formatMessage(j.skipButton),onClick:e}),o.jsx(Oe,{title:s.formatMessage(j.yesButton),onClick:t,color:"primary"})]})]})})};function Es({onClose:t}){var k;const e=he(),s=(k=we(e,"2839926172"))!=null?k:!1,[a,i]=f.useState(0),[l,r]=f.useState({role:"",departments:[]}),d=me(Ce.businessWorkspaceId),u=me(Ce.isEduPlan),n=wt(),b=n==null?void 0:n.id,p=()=>{gt.logEvent("chatgpt_biz_onboarding_skipped"),oe.logEvent("Business Onboarding Skipped"),t(),Ae(e,Pe.Onboarding)};switch(f.useEffect(()=>{a===0&&oe.logUpsellOrModalEvent(bt,{eventId:"workspace_onboarding_modal_shown",type:_t.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[a]),a){case 0:return o.jsx(Ls,{scope:We.Workspace,onContinue:()=>{i(1)}});case 1:return o.jsx(js,{onContinue:c=>{r(_=>te(M({},_),{role:c})),i(2)},onSkip:p,isEduPlan:u});case 2:return o.jsx(Ws,{onContinue:c=>{const _=te(M({},l),{departments:c});gt.logEvent("chatgpt_biz_onboarding_completed"),oe.logEvent("Business Onboarding Completed"),rs.safePatch("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:d,user_id:b}},requestBody:{onboarding_information:_}}).finally(()=>{s?i(3):(t(),Ae(e,Pe.Onboarding))})},onSkip:p,isEduPlan:u});case 3:return o.jsx(Ts,{onSkip:p,onYes:()=>{if(typeof window<"u"){const c=is(Is);window.location.assign(c)}t(),Ae(e,Pe.Onboarding)}});default:return o.jsx(o.Fragment,{})}}const j=Me({secureWorkspaceWelcomeTitle:{id:"onboarding.secureWorkspaceWelcomeTitle",defaultMessage:"Welcome to your secure workspace"},primaryRoleTitle:{id:"onboarding.primaryRoleTitle",defaultMessage:"What's your primary role?"},workTypeTitle:{id:"onboarding.workTypeTitle",defaultMessage:"What kind of work do you do?"},selectAll:{id:"onboarding.selectAll",defaultMessage:"Select all that apply"},skipButton:{id:"onboarding.skipButton",defaultMessage:"Skip"},continueButton:{id:"onboarding.continueButton",defaultMessage:"Continue"},yesButton:{id:"onboarding.yesButton",defaultMessage:"Yes"},chatOnboardingTitle:{id:"onboarding.chatOnboardingTitle",defaultMessage:"Meet Your Onboarding Buddy GPT?"},chatOnboardingDescription:{id:"onboarding.chatOnboardingDescription",defaultMessage:"Brainstorm ways to get the most out of ChatGPT with a personal onboarding buddy."}}),Bs=()=>{const t=he(),e="center",{isOpen:s,modalType:a}=yt(t),i=Zo(),l=ls();if(f.useEffect(()=>{s&&oe.logEvent("Sidetron: Blocking Modal Shown",{modalType:a})},[s,a]),!s)return null;function r(){switch(oe.logEvent("Sidetron: Modal Action Clicked",{modalType:a}),a){case Ie.unsupported_app_version:window.open(l?Qt:Yt,"_blank");return;case null:ds.warn("No modal type provided for DesktopBlockingModal");return}}function d(){switch(a){case Ie.unsupported_app_version:return Us;case null:return Rs}}function u(){switch(a){case Ie.unsupported_app_version:return!1;case null:return!1}}return o.jsx(ae,{testId:"modal-desktop-blocking",isOpen:!0,onClose:$,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:e,children:o.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8",children:[o.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:o.jsx(L,M({},d().title))}),o.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-lg",children:o.jsx(L,M({},d().subtitle))}),o.jsx(ve,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"desktop-blocking-modal-action-button",onClick:r,children:o.jsx(L,M({},d().cta))}),u()&&o.jsxs("span",{children:[i," Â· ",o.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:n=>{n.preventDefault(),oe.logEvent("Sidetron: Modal Logout Clicked",{modalType:a}),cs()},"data-testid":"desktop-blocking-modal-logout",children:o.jsx(L,M({},d().logout))})]})]})})},Rs=Me({title:{id:"DesktopBlockingModal.paidTitle",defaultMessage:"Upgrade to use Windows app"},subtitle:{id:"DesktopBlockingModal.paidSubtitle",defaultMessage:"The Windows app is currently available for Plus, Business, Enterprise, and Edu plans."},cta:{id:"DesktopBlockingModal.paidUpgradeCta",defaultMessage:"See Plans"},logout:{id:"DesktopBlockingModal.paidLogout",defaultMessage:"Log out"}}),Us=Me({title:{id:"DesktopBlockingModal.sunsettingTitle",defaultMessage:"Update required"},subtitle:{id:"DesktopBlockingModal.sunsettingSubtitle",defaultMessage:"A new version of ChatGPT Windows is available and must be installed to continue."},cta:{id:"DesktopBlockingModal.sunsettingCta",defaultMessage:"Get Download"},logout:{id:"DesktopBlockingModal.sunsettingLogout",defaultMessage:"Log out"}}),Vs=fe(()=>ge(()=>Promise.resolve().then(()=>Ps),void 0).then(t=>t.WorkspaceDiscoveryRenamePromptModal)),zs=fe(()=>ge(()=>import("./jy72v6s0lxzr78f8.js"),__vite__mapDeps([5,1,2,3,6]))),Fs=fe(()=>ge(()=>import("./jar9ivwute2tqd9f.js"),__vite__mapDeps([7,1,2,3,6,0,4]))),Gs=fe(()=>ge(()=>import("./nbrjep5yk15f1ntt.js"),__vite__mapDeps([8,1,2,3,9,0,4])).then(t=>t.ConnectorsOnboardingModal)),qs=fe(()=>ge(()=>import("./g7sgm8r5m5ydvssd.js"),__vite__mapDeps([10,1,2,3])).then(t=>t.RequestWorkspaceAccessModal)),Hs=({onClose:t})=>{const e=se(),s=me(Ce.isBusinessWorkspace),a=me(l=>l.currentWorkspace),i=s?e.formatMessage(kt.workspaceWelcome,{workspaceName:a==null?void 0:a.name}):"ChatGPT";return o.jsx(ae,{testId:"modal-onboarding",isOpen:!0,onClose:$,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:e.formatMessage(kt.personalOnboardingSubheading),children:o.jsx(Mt,{onClose:t,scope:s?We.Workspace:We.Personal})})},$s=({onClose:t})=>{const e=xs.useStore();return f.useEffect(()=>(e.setOnCloseSideEffect(t),e.setManualVisibility(!0),()=>{e.setManualVisibility(!1)}),[t,e]),null};function Js(t){return o.jsx(vt,te(M({},t),{mode:"blocking",section:"both",source:"first_login"}))}function Qs(t){return o.jsx(vt,te(M({},t),{mode:"blocking",section:"existing",source:"should_select_workspace"}))}function aa({clientThreadId:t,page:e,isIosDirectPurchaseFlow:s}){const a=he(),[i,l]=f.useState(0),r=us(a,"109457"),{hasSeenOnboardingDate:d}=Kt(),u=d===!1&&r.get("is_new_user_banner_disclaimer_enabled",!1),{hasSeenWorkspaceDiscoveryFirstLoginDate:n}=Xt(),{hasSeenTeamOwnerOnboardingDate:b}=Zt(),p=me(Ce.isBusinessWorkspace),{isOpen:k,isLoading:c,workspaceOnboardingVariant:_}=pt(),[F,y]=f.useState(!1),{data:h,isPending:ye,isEnabled:C}=eo(),ne=to(h,ye&&C),x=ps(),G=ms(),[O,N]=gs(t,g=>[!g||g.isLoading,g==null?void 0:g.conversationOrigin]),S=O&&!!t,{data:m,isError:J}=fs(),w=hs(m),I=m!=null,Q=oo(15),[v,ie]=f.useState(!1);f.useEffect(()=>{Q&&!v&&ie(!0)},[Q,v]);const re=so(),q=wt(),Y=(q==null?void 0:q.email_domain_type)==="professional",le=!!(m!=null&&m.accountItems.some(g=>g.isEnterprisey())),D=Y&&!le&&ks(a).getLayer("3217430380").get("enable_workspace_discovery",!1),ce=!!(Y&&n===!1&&D&&v),{data:A,isLoading:W}=ao(ce),K=!!(m&&(m==null?void 0:m.accountItems.length)>1&&m.currentAccountId==null),X=m==null?void 0:m.accountItems.some(g=>g.isPersonalAccount()),T=!!(m!=null&&m.accountItems)&&m.accountItems.length>0&&m.accountItems.every(({canAccessWithCurrentSession:g})=>!g),{eligible:E,isLoading:B}=no(),R=we(a,"1542198993"),{punchOutRequireLoginInfo:de}=io(),{state:U}=ro(),{isOpen:Z}=lo(),{isOpen:V}=co(),{isOpen:z,isLoading:ee}=Ot(),{isOpen:ke}=uo(),H=yt(a),{isOpen:Re,isLoading:Ue}=H,{isOpen:Ve,isLoading:ze}=po(),{isOpen:Fe,isLoading:Ge}=mo(),{isOpen:qe}=go(),{isOpen:He}=bs(),{state:$e}=fo(),Je=ho(),Qe=ko(),Ye=bo(),Ke=_o(),Xe=Mo(),Ze=yo(),et=xo(),tt=So(),{isOpen:ot}=wo(),{isOpen:Dt}=pt(),{isOpen:At}=vo(),{isOpen:Pt}=Co(),{isOpen:st,open:at}=Oo(),{shouldShowCookieBanner:nt,isCookieConsentBannerLoading:it}=_s();f.useEffect(()=>{u&&!p&&!st&&at()},[u,p,st,at]);const Ne=f.useMemo(()=>[{Component:No,visibility:["chat","codex"],getModalState:()=>de?"show":"hide",isDeferrable:!1,id:"punch_out_sign_in_as_modal"},{Component:Do,visibility:["chat","codex"],getModalState:()=>U,isDeferrable:!1,id:"punch_out_anon_to_authed_modal"},{Component:Ao,visibility:["chat"],getModalState:()=>$e,isDeferrable:!1,id:"meet_chatgpt_modal"},{Component:Vs,visibility:["chat","codex"],getModalState:()=>ee?"loading":z?"show":"hide",isDeferrable:!1,id:"workspace_discovery_rename_prompt_modal"},{Component:Js,visibility:["chat","codex"],getModalState:()=>{var P,be;return!D||x!=null||n||J?"hide":n==null||W?"loading":((be=(P=A==null?void 0:A.workspaces)==null?void 0:P.length)!=null?be:0)>0&&v?"show":"hide"},isDeferrable:!1,id:"fullscreen_switcher_both"},{Component:D?Qs:Ss,visibility:["chat","codex"],getModalState:()=>x!=null||J?"hide":I?K?"show":"hide":"loading",isDeferrable:!1,id:"workspace_switcher_modal"},{Component:Po,visibility:["codex"],getModalState:()=>re,isDeferrable:!1,id:"codex_onboarding_modal"},{Component:Io,visibility:["chat"],getModalState:()=>ot?"show":"hide",isDeferrable:!1,id:"noauth_promo_redemption_modal"},{Component:Lo,visibility:["chat"],getModalState:()=>Z?"show":"hide",isDeferrable:!1,id:"noauth_plan_upsell_modal"},{Component:jo,visibility:["chat"],getModalState:()=>Qe,isDeferrable:!1,id:"noauth_free_trial_upsell_modal"},{Component:Wo,visibility:["chat"],getModalState:()=>Je,isDeferrable:!0,id:"noauth_imagegen_nux_modal"},{Component:To,visibility:["chat"],getModalState:()=>S?"loading":N===je.APPLE?"hide":ke?"show":"hide",isDeferrable:!0,id:"noauth_soft_rate_limit_modal"},{Component:Ms,visibility:["chat"],getModalState:()=>S?"loading":N===je.APPLE?"hide":He?"show":"hide",isDeferrable:!0,id:"noauth_login_modal"},{Component:Eo,visibility:["chat"],getModalState:()=>S?"loading":N===je.APPLE?"hide":qe?"show":"hide",isDeferrable:!0,id:"noauth_welcome_back_modal"},{Component:$s,visibility:["chat","codex"],getModalState:()=>it?"loading":nt?"show":"hide",isDeferrable:!1,id:"cookie_consent_banner_tracker"},{Component:Hs,visibility:["chat"],getModalState:()=>p||u?"hide":d===null?"loading":d===!1?"show":"hide",isDeferrable:!0,id:"onboarding_modal"},{Component:qs,visibility:["chat","codex"],getModalState:()=>x!==null?"show":J||I?"hide":"loading",isDeferrable:!1,id:"request_workspace_access_modal"},{Component:zs,visibility:["chat","codex"],getModalState:()=>G!=null?"show":J||I?"hide":"loading",isDeferrable:!1,id:"account_transfer_modal"},{Component:Bo,visibility:["chat","codex"],getModalState:()=>I?T?"show":"hide":"loading",isDeferrable:!1,id:"invalid_accounts_modal"},{Component:Bs,visibility:["chat","codex"],getModalState:()=>Ue?"loading":Re?"show":"hide",isDeferrable:!1,id:"desktop_blocking_modal"},{Component:Ro,visibility:["chat","codex"],getModalState:()=>ze?"loading":Ve?"show":"hide",isDeferrable:!1,id:"desktop_onboarding_modal"},{Component:Uo,visibility:["chat","codex"],getModalState:()=>"hide",isDeferrable:!1,id:"authed_cookie_consent_banner"},{Component:Fs,visibility:["chat","codex"],getModalState:()=>!(w!=null&&w.isSelfServeBusiness())||!(w!=null&&w.isOwnerOfAccount())||!X?"hide":!I||b===null?"loading":b===!1?"show":"hide",isDeferrable:!1,id:"team_account_transfer_modal"},{Component:Vo,visibility:["chat"],getModalState:()=>p?Ge?"loading":Fe?"show":"hide":"hide",isDeferrable:!1,id:"workspace_policy_modal"},{Component:Es,visibility:["chat","codex"],getModalState:()=>!p||!c&&k?"hide":d===null?"loading":d===!1?"show":"hide",isDeferrable:!0,id:"workspace_onboarding_modal"},{Component:zo,visibility:["chat"],getModalState:()=>B?"loading":E&&R?"show":"hide",isDeferrable:!1,id:"memory_onboarding_modal"},{Component:Fo,visibility:["chat","codex"],getModalState:()=>ne,isDeferrable:!1,id:"age_verification_interstitial"},{Component:p&&_==="mix"?Gs:Go,visibility:["chat"],getModalState:()=>!c&&k?"hide":Ye,isDeferrable:!1,id:"connectors_nux_modal"},{Component:qo,visibility:["chat"],getModalState:()=>et,isDeferrable:!1,id:"tatertot_nux_modal_v2"},{Component:Ho,visibility:["chat"],getModalState:()=>tt,isDeferrable:!1,id:"quiz_nux_modal"},{Component:$o,visibility:["chat"],getModalState:()=>Ke,isDeferrable:!1,id:"google_connectors_nux_modal"},{Component:Jo,visibility:["chat"],getModalState:()=>Ze,isDeferrable:!0,id:"golden_hour_nux_modal"},{Component:Qo,visibility:["chat"],getModalState:()=>Xe,isDeferrable:!0,id:"moonshine_nux_v2_modal"},{Component:Yo,visibility:["chat"],getModalState:()=>V?"show":"hide",isDeferrable:!1,id:"free_trial_upsell_modal"}].filter(P=>P.visibility.includes(e)),[e,de,U,$e,ot,Qe,Je,ee,z,S,N,ke,Z,qe,it,nt,p,u,d,n,J,A,W,K,I,x,G,T,Ue,Re,ze,Ve,w,X,b,Ge,Fe,B,E,R,D,ne,Ye,Ke,Xe,et,tt,re,v,He,V,Ze,c,k,_]),It=F;function rt(g){if(g!=null)return g.isDeferrable&&It?"hide":g.Component?g.getModalState():"hide"}const ue=Ne[i],xe=rt(ue);xe==="hide"&&l((()=>{let P=i+1;for(;P<Ne.length;P++)if(rt(Ne[P])!=="hide")return P;return P})());const{pathname:Se}=Rt(),lt=f.useRef(Se);f.useEffect(()=>{lt.current!==Se&&(lt.current=Se,l(0))},[Se]),f.useEffect(()=>{const g=xe==="show",be=ys(a).getState().activeModals.has(Le.BlockingInitialComponent);g!==be&&(g?ft.openModal(Le.BlockingInitialComponent):ft.closeModal(Le.BlockingInitialComponent))},[a,xe]);const De=xe!=="show"||Dt||At||Pt||s,ct=Ko(()=>{oe.logUpsellOrModalEvent(bt,{eventId:ue.id,type:_t.UPSELL_OR_MODAL_TYPE_BLOCKING_INITIAL_MODAL})});if(f.useEffect(()=>{ue==null||De||ct()},[ue,De,ct]),ue==null)return mt.trackNamespace(mt.NS_COMPOSER),o.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(De)return null;const Lt=ue.Component;return o.jsx(Lt,{onClose:()=>{y(!0),l(g=>g+1)}})}const kt=Me({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}});export{aa as B};
//# sourceMappingURL=egzpifha5criht1h.js.map
