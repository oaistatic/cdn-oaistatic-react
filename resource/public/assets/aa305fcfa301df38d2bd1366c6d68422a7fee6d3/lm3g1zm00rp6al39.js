const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/l1teaxoievyk0rz1.js","assets/bubexfvksfr7893o.js","assets/mub8z62y3ne5qedg.js","assets/paev76b70tpkjsm5.js","assets/iifma3hmntnz93d1.js","assets/botnj7o5rl1ee15s.js","assets/gaunkv18ohhvhjng.js","assets/gq8l7wp47kwsw73q.js","assets/khdnnj3rabf7bdgv.js","assets/ga6j99kn1iju276w.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/bjkxn2ge6s764t7e.js","assets/bitmj64bbwfuil93.js","assets/izjhrefsvxrmr1ks.js","assets/kbj1b07s2z6vxqkg.js","assets/hu1bt0oauegdhua6.js","assets/h1em0bjkpkjv8ykw.js","assets/owbget26s04j6ot0.js","assets/gy1lpvuoewmzh42c.js","assets/o6p9t02t81236kdb.js","assets/gqlpgmzguho9n5oh.js","assets/m609xwboj0zo059y.js","assets/eifqzljcxkeg8zns.js","assets/8yatsd42k1ox8n2w.js","assets/qrcm3utllwqs3zx5.js","assets/kaw18xu9jo85v1g9.js","assets/je4980ckfcxr5bij.js","assets/c09b3wnyb7ragkgg.js","assets/jyac53csf1atp5u6.js","assets/d0fvtivu8wtjjx2a.js","assets/1312ifs42fvi3x41.js","assets/n8w61inav9kre7iu.js","assets/nerwniv8icoyqyjk.js","assets/ojgc3f33xqlpzccg.js","assets/fsahglpl2wxoakvg.js","assets/edtxx94txmhqvu0e.js","assets/on6zjr1bjw5z2d08.js","assets/ez64jdn8rx3tl0g9.js","assets/ddx2x56vdgvdclvn.js","assets/ic6ed80tep3dx2dk.js","assets/hbafdd864xefk46q.js","assets/drp7x5ntnuk0iqtu.js","assets/mutdyd1mse3szbqw.js","assets/njj37gw3f93ovc26.js","assets/hdkg0cys1b7b4f0v.js","assets/ia54sddtrl9qa2wj.js","assets/chuo6dbwu6l4alpy.js","assets/g8w55akbfgixybwv.js","assets/nzc19yp45z5gjstv.js","assets/mdnk8dee8jm04405.js","assets/k6qwgpluf8n5kx7i.js","assets/ei2rr3u86wwo8xvm.js","assets/f89umoqrdveizlz7.js","assets/lljm2enx48t0mwrk.js","assets/dc3wx0vhq5cgao26.js","assets/g78s6ea1fdv7ipue.js","assets/n117ifjno76hbo3f.js","assets/kqh10hum5vnfnvgi.js","assets/j51b3b8y7dx543la.js","assets/lep2wptoy14cfe2w.js","assets/nuc0uj19s7rn62on.js","assets/kpldwkdi6k2a2fdo.js","assets/g06xst48b3fvssvn.js","assets/mh06u253e6rqurrk.js","assets/byvy8d7onv4dv8i1.js","assets/gtcvhpyyxjlawokm.js","assets/l8gfdbxyfhb5crrj.js","assets/of2lqa4u24wak95x.js","assets/product-variants-gcznzbx5.css","assets/oc4lr1ricjtltb4h.js","assets/hzasobp3hhjtq47p.js","assets/o31w8j5urfak3xuz.js","assets/gfe80db92046bqvj.js","assets/iiok29s29bpdre61.js","assets/yp6xblbn4tr1qh0n.js","assets/mf0m4r73wo03szkn.js","assets/cxp76v1gv71u5chl.js","assets/nzkkesm2p4dklarf.js","assets/iv5xwnwraxd9v7zq.js","assets/o0dw43fppqvaf7ws.js","assets/icif99f9c6x3iitu.js","assets/f1ucdf2dx4ztfnd4.js","assets/kou7k14ueo6peaoq.js","assets/k3w19w5sa48fujqs.js","assets/gfhyoobo4q8q2pzd.js","assets/n630qnacd2oui4py.js","assets/cxhvc6trae8s9e85.js","assets/ha3yj3u2f1w16goy.js","assets/ansi-1f6vhsjh.css","assets/mamq4h01m06sylys.js","assets/h4jnqd77fz22arvf.js","assets/d5mh1yk0rnxpkd9n.js","assets/gobx7791fcp89y6h.js","assets/eewckg9c92mnp2ec.js","assets/imbbtedzs51am1ck.js","assets/fuwv2o9dqpty536z.js","assets/nxg251y5bix8gl53.js","assets/e8lckzowfybo0h8f.js","assets/kzvpseqfc0j2fpii.js","assets/ce3hgmw4iyyhicud.js","assets/cifdjmblsrwrxxb4.js","assets/m214aojas5i8u5ss.js","assets/l4pcm542yc2tenou.js","assets/ecforv0kxuh5qyzb.js","assets/ffvjxtmoqooghm1t.js","assets/eqqsnl6kprwt6kvn.js","assets/cdu988xkidlznefj.js","assets/owg1t5lbjzwpi0hd.js","assets/kl7c6054usfnqmd4.js","assets/k97n0y6ba9c9h39c.js","assets/writing-block-focused-view-h5h01uzk.css","assets/5o6mgwufgbxa936e.js","assets/dgs0l83heankdts0.js","assets/cxce66s7ooa3xwei.js","assets/b07v92w48quo33nt.js","assets/g6618aq5snuywl9f.js","assets/ol9d5wxhynx9q2is.js","assets/i0wiaw6wtevb2frn.js","assets/fna9z31n721lpf9f.js","assets/table-components-iztk4amh.css","assets/FormattedText-fh8z7aev.css","assets/dh7mc6hgd545v1dp.js","assets/fgkf4ysztkrzjowg.js","assets/e0o3s2xody0f0lze.js","assets/fxq0cwt37b3o4eca.js","assets/obwjbyam9sbou40t.js","assets/dx7wt0mlevfo5zit.js","assets/d9g1crrqnzebhn08.js","assets/mgnlt3fr5pzih15r.js","assets/jh19bjlnuy9nevrj.js","assets/efe2500dci7w17ko.js","assets/d4n0ce5usd2dhj6n.js","assets/jjwueogdqdtz93hf.js","assets/hb56niamnyufcjyx.js","assets/d133qpkzi61blr5n.js","assets/b70xrbxzkuawug2w.js","assets/9rvl5yzajv9sb1kg.js","assets/dgfzy0uzwwp9rsp0.js","assets/nq6tg09w6idos054.js","assets/sdlnf7jr8n8l1kbs.js","assets/dtild1iosocbgwoy.js","assets/dwgk7r4s1fwn35jq.js","assets/i0w6h8cy9aqse20k.js","assets/q264k2ztz0dic0dr.js","assets/kivvchsexr54fuso.js","assets/g2yrmla647yevqej.js","assets/g683sukvvwb09shg.js","assets/m34gi7kuqzcicqbx.js","assets/jaztged0ed1qpm4w.js","assets/kux43ylsu8hzp3nl.js","assets/df8vyzrwxua8ej7p.js","assets/it6rjx5w2svroddn.js","assets/abx0hfi80rra7jaz.js","assets/lkc3nwe59xkd7c29.js","assets/khrrhmpc9956cz8v.js","assets/i4ntg9pkd80oa8tb.js","assets/nv9a1rw8ie2xaxzg.js","assets/mphqjg6cm2erxu1h.js","assets/mfaafsrmknb699il.js","assets/mljc3umfnnk53nyi.js","assets/d9ojm830ix4l9asp.js","assets/m0pt7qspta2dtb17.js","assets/lyh8bkoye9hz4v56.js","assets/ng0udfnvcwxxjj55.js","assets/ojcdlp6qm6gp4osb.js","assets/kutccmhbcgdrtvey.js","assets/ho6r9c28sd358f5b.js","assets/bk42hqsw4os7zvt6.js","assets/ncrb69cifkntux5o.js","assets/nxm6d2sxmov3wzbf.js","assets/kn4rrjxh188dx3k1.js","assets/ele4jksavjnkk50l.js","assets/fmugtb2mh6d7o631.js","assets/lsc4r9prtm54ttbd.js","assets/myg9qhlf3mrymti2.js","assets/fo94gvkdvc6uhzry.js","assets/en8loo64k9vgih13.js","assets/jaatx82vyj5gyjt9.js","assets/mlll5kvj3qdj7fj8.js","assets/b10arcaiiztcvibu.js","assets/nk2uvhryjg0je0b9.js","assets/h379zax8ll2jqg1v.js","assets/dl3b4umuy6c605hj.js","assets/bv6qlih4ismj9xc6.js","assets/kmxpxyewlocdcvkp.js","assets/n7dbxy3y3q9z1y10.js","assets/okzsq1aji2s9p1ex.js","assets/mbideqths2dg8l8v.js","assets/nkhblhm5gc0ajfkd.js","assets/dhsbs6k2gjbn2qr7.js","assets/hqbshwkn4xaba14o.js","assets/em19d2682lnmcb6c.js","assets/gn9wll6yn4yu2yjg.js","assets/f9q21t97dze9u4dn.js","assets/impv9cw906sxjwad.js","assets/mvsz8js05tswhzmz.js","assets/nfz1ta7916xrx1ej.js","assets/nnasou4dx8ktomqj.js","assets/b4g2v7ieq0wsd0hn.js","assets/jp1bsz3poves5oxv.js","assets/cmff6ny7qwtuxu45.js","assets/ma4t382l66te02z0.js","assets/jp9nl1pjnexcya5g.js","assets/ok3l8bod36eqc7xo.js","assets/cslz6wf1si9tisko.js","assets/wr3xtwm0pv7va92o.js","assets/fzcv8k0772xrsq9h.js","assets/bo8mdhc1oc1583ww.js","assets/i7db5j2hu236rd0x.js","assets/ngtx9z2nyjegfsso.js","assets/hltn41me7skpqo08.js","assets/li5f2kyuxxi27h3z.js","assets/g1dbzw9xahth2rh2.js","assets/njsizjgnen9s4g7z.js","assets/cvim016jdwuq42bd.js","assets/ixrdm5q3vaerk083.js","assets/gsv2mny3eni4mgoa.js","assets/nvsf5y439ozyeg9o.js","assets/oin63eizbi9qp967.js","assets/gjwwyq2frxc0l7hy.js","assets/bkxoycqrk42hkddo.js","assets/9nbraq4y4knyq7gl.js","assets/mssnv5zs2txfp5u3.js","assets/o5r411kkqnyykl0q.js","assets/kfdkis1zwf4ccfgg.js","assets/mbmcx8v24u1ao1ke.js","assets/kx5ebq6upb7tomcz.js","assets/l4ks0xbrenyhbpo7.js","assets/e47fa9fvgerddqmj.js","assets/oihrhouu74rwfb80.js","assets/m86h5f9p5s57o3uj.js","assets/f6as9g9iafn52u8c.js","assets/k1g5xt4bwwbs5e78.js","assets/o4w8zbrq7mg3p422.js","assets/ns51nblw8ziscsgd.js","assets/eii6zxu7kogjx11x.js","assets/mstl8wgfzorpgdoe.js","assets/e9acc0j1u83xdcvx.js","assets/orkdsokm67upvzbu.js","assets/deakbbf27g8e7ba0.js","assets/eg96d9s49vx4uh5w.js","assets/l1vbk597qxt6gnzf.js","assets/bj1ejin6tzi0v3v8.js","assets/n4z3ppo642ilcc31.js","assets/fx4tif7av4x5mmpn.js","assets/cs13hjllyr5z07le.js","assets/i9crbuggadd1d18l.js","assets/nh1pnlx0ql3cilt1.js","assets/oo4a5cyom9orocbu.js","assets/6kppbcfhmenkpk5e.js","assets/gsyjy3cn2edhhxqr.js","assets/otp3t1xuqwydluup.js","assets/gl3rapxbeig8umvj.js","assets/gb09ykdmnecx7kqm.js","assets/e78y0x0bsn1pjk21.js","assets/mj2brfr01cewzl9a.js","assets/jlsb77lt6kqhcsln.js","assets/htgqwnjx12i16hc6.js","assets/cablc6lr74ppvrr3.js","assets/odeqnwkly96z750u.js","assets/l5e2clfxpgm30p9v.js","assets/z73jc6cuiis8j7zw.js","assets/b6wurwufazegul5k.js","assets/kzg5ev41drr4p042.js","assets/km0dhf1mvcjs8kkd.js","assets/oeu7ns9by1ylfahx.js","assets/qr8ktpa6xn24sy7q.js","assets/fenai6dwr8b5i5c6.js","assets/ip633et1a2kaq027.js","assets/kn8qwq1mz5gcoykc.js","assets/ns1vyo5kzmxgh5gj.js","assets/coua0c0g0n9zwyhc.js","assets/dqpw6s7v5t7v73q3.js","assets/fcdc9s0m5jq003zg.js","assets/diw1uvps7iz4sxyn.js","assets/k1cl8bhg0vqi0zvs.js","assets/hdyydyw9h51echxp.js","assets/hm16fnzstqf70eit.js","assets/bnh7zkn4xutjm6i9.js","assets/gqlgqhfmjeo7hcnf.js","assets/ADAVisualizationComponent-kv1hz405.css","assets/eugv7e9r1rcwafdq.js","assets/ef5noj24t7u7w8z6.js","assets/d9d46aun6hvzsagm.js","assets/k4855lfj6sf5wx46.js","assets/i6at9b7261n0aa73.js","assets/ab1lw28e5v4cdfgd.js","assets/mvmwqt2pbedq2unu.js","assets/mp4v4wji3l4bfpxc.js","assets/csz8rp9kly9cspt9.js","assets/llkvyyg8wmzr0pic.js","assets/dqr2pnjzr8j7emm5.js","assets/fokj9uxlyllkpzum.js","assets/l14h3xoft0eucain.js","assets/cwshi1uqtxcpo7s2.js","assets/ca22ulajbssaw8fn.js","assets/lfg2vt1rqtb3lwx0.js","assets/ouqaqxgngprz8qhp.js","assets/kz7x8wcm72rfs5wr.js","assets/dm4ag0sa1q13zbmz.js","assets/jsmxjczzjk89t5hv.js","assets/ga7p4rigp7s3d1bz.js","assets/de76wl4zzausvseb.js","assets/ixllpsgj9866h785.js","assets/m31qshm5lfjwgtdd.js","assets/n8rdfg2xatgkqad1.js","assets/jx5pd8qsxc77tbjo.js","assets/ggxcaqk9edn29vp4.js","assets/odz5x4sqgrr6bek9.js","assets/mjvpgsvmgis1oipr.js","assets/d566xs5du6vv7b80.js","assets/lcnxs0h9184gwafk.js","assets/vu8erv8e9w00mpyg.js","assets/ntqtotz628w3drq3.js","assets/kkuz6wysms7ptbbm.js","assets/jmpxwrnri5yjvfye.js","assets/fwn4bwvyx3h4ty5g.js","assets/hw8bsku1vts8j7n2.js","assets/m7df4jwt169q6ixf.js","assets/ce744tj9mbyjpxk9.js","assets/aqoo0lpldi915242.js","assets/mufc9ue1uaeohhpl.js","assets/gtzr61vfrillrfof.js","assets/kjt68ctim5iwbxy7.js","assets/jasggtze31dxpnzc.js","assets/ik745cxla2tb9irm.js","assets/jnhwivmn1zqsjfao.js","assets/ezy6n48j7a81l4k0.js","assets/6nq0byuxlxwlpv7o.js","assets/x0cxm4erskwwo65r.js","assets/l4yl232ok815njdc.js","assets/jw9gcd6zwzvwrbw1.js","assets/d44ajf70j3x0ukox.js","assets/iz7y4yt60huv2j20.js","assets/f5goq4s9xgjjvv2f.js","assets/c0cigwrjirtldn2y.js","assets/clbd32tshfe6lfta.js","assets/iavix82j0dyyhd6e.js","assets/efiopttsd013c72o.js","assets/l90ske1z87mx6a7v.js","assets/kaiea8uhls5eyfc2.js","assets/nd9xod27hwpupnsp.js","assets/hthps8s6hg6mj1wr.js","assets/e4acz4nn4eec76vm.js","assets/j703u6xl4odnuo39.js","assets/me0ap2djy50z6upd.js","assets/nbm98bu0q3774lnr.js","assets/i9ddjt6oaiw4vo4g.js","assets/fum95d46v8d5jv8u.js","assets/n2u3q2i5341kdx8j.js","assets/nbrjep5yk15f1ntt.js","assets/ddrnnlwwkggzz2ny.js","assets/ex1n2bj1ipe6e9yn.js","assets/ourdq1ldvkkkjora.js","assets/ng29wvm3o2y0a25k.js","assets/mncm1jl7sgu6lqkq.js","assets/iqak4d8n645iefiy.js","assets/bwoo0o3orx877928.js","assets/btrwhqtnzjbkk202.js","assets/es2vums52w1c42it.js","assets/h6662v3to5g8p21c.js","assets/on5dziw7cevdndjx.js","assets/ozr2lgqf1d6wcjmn.js","assets/j7x54nqkx9pk7sbq.js","assets/dc3gfewlwzqweadg.js","assets/jdqwfk0uej2po5zn.js","assets/kmfcnx25ea49kkwd.js","assets/bxgk09qvxvkate6l.js","assets/gs7s0wqk8mi65t12.js","assets/jhmmtvnia7g89f8p.js","assets/ijit8ixh9z3bkaiq.js","assets/lbs6y9j3ldmqpk4s.js","assets/ioom1cwgjgkzhe2w.js","assets/msyfo1wqmxehxjab.js","assets/tz2l7hn0ceuh7h4a.js","assets/9kg8fj3phaeaomhr.js","assets/cfd8fb2o7f0lhyoi.js","assets/kej0fzfkf3ehxia3.js","assets/dt8ggo99jnbjbbe4.js","assets/gp9r9kunq1jfcrr8.js","assets/6sb0te5xkk0og38q.js","assets/m89x2zftpo6hrypr.js","assets/o6tznc8phmu3421m.js","assets/up4p8fwl1sob5zne.js","assets/hahiy9dm7k71twz4.js","assets/e7nua9i1wznz1yhn.js","assets/oawtr1bc6aninhhp.js","assets/i8xmfgagd89lcp7k.js","assets/k4vpjy4176uyyr80.js","assets/mmjj0px0j63ebntl.js","assets/i0yczuhbjrdxz6ve.js","assets/bc00p2ldn9cv9q32.js","assets/8ix1du5tuckfsvqq.js","assets/jhz2bgbbj6hj3ccb.js","assets/exx0m5g11hnp3j3d.js","assets/d9ec94om23qfz1v2.js","assets/luif5kl8klbqcpjy.js","assets/bx7q0ki7peuoyrwl.js","assets/k0d9broc5wqvhhma.js","assets/fk5dn736y6oc9os0.js","assets/ow04nvtt94m1zney.js","assets/ovw8x8ulp3acd1l3.js","assets/fwwkwalw87hti22b.js","assets/od50gemg82u3x7jt.js","assets/lowm54usy4rzuo31.js","assets/gwwqbtk9yto9dekb.js","assets/zu3269wspbb4ktty.js","assets/jbtr9l3ksyth8mgt.js","assets/byfhbxasqvym01md.js","assets/l0funp4ysrk4evuk.js","assets/et5vk3y64c5mv025.js","assets/dzi98izg642pbca6.js","assets/joa8jajuiu4xqpzn.js","assets/mwnkb5j3kjjyh7d2.js","assets/n17yjgieu7k6cshj.js","assets/inj2nldnq4zy6wa4.js","assets/gk9c5stronfar8qx.js","assets/drmwaklva7v056il.js","assets/mj32z5vcfl3ugvj5.js","assets/ebn7bwt2w9d4cap9.js","assets/e2mpe7c8xvk51w5d.js","assets/o66elomacusdy99v.js","assets/i6hdqng3ufj5kq75.js","assets/cx20kzi1ifz7iwh5.js","assets/comments-plugin-tah3dlup.css","assets/codemirror-g1j9yafs.css","assets/nizbxgksf6o5ghfr.js","assets/prosemirror-egdr15sq.css","assets/75duwk5egbi68snc.js","assets/b3zmi7k0e1dvao0m.js","assets/ekj7v0hd90m9gfgd.js","assets/dvti8r1ib1dywoqz.js","assets/neol3b1dem5wtv3l.js","assets/jexchgabyqje5te2.js","assets/3v81d4lxjbd6t67s.js","assets/fwocbk6epi4fc55y.js","assets/f5rn2or9jvd4bjqj.js","assets/gx8wj1d12os1vp8m.js","assets/nevgytedezvd3xx4.js","assets/jro698t78r3v26vt.js","assets/kptm44be5e8prue7.js","assets/fvedxzo6thbeer2i.js","assets/n3mnqs8qkb4827qo.js","assets/lwk021izsqda1ink.js","assets/cgrap9d6kdmn592w.js","assets/hef3uhoguynd6dfu.js","assets/ls5w4xhmfxey8hbl.js","assets/c9patjs9aymkcczz.js","assets/ep5wvjiuce9gz0i0.js","assets/fd7xjhmy8e0hypda.js","assets/9k6qmhn6o7ot8x06.js","assets/c5abhi5u597ijhgr.js","assets/luk8bxmt063r9itm.js","assets/jxyz1kdkcze5jtww.js","assets/dni8akjyvev2h15q.js","assets/ckp3hf1o6v7kgldv.js","assets/f9n5ccag7w46cli4.js","assets/owtikirrvn2wxy4l.js","assets/fzp2j1cxnl22o1rn.js","assets/c02liuldac2129ws.js","assets/eangdf46283zeknc.js","assets/ff9q8rnvshheb2le.js","assets/kfuq18fnfa4tpk36.js","assets/d3lmw35s8no1rcpb.js","assets/k16xm6jk3odnmnqs.js","assets/n9uspcjz6oc12tia.js","assets/m2xwf1u8hpj7ku67.js","assets/fnhiupokkmaz6zzq.js","assets/l3abi823pjnrhiuj.js","assets/g83306ugnaenca1o.js","assets/k65zm13fcbdt3p3d.js","assets/cw8kmn0u6h9cdbqu.js","assets/e4hxa0obef9ytuv2.js","assets/ejbjaoduwxjhkz9f.js","assets/9paxni9f8n7suc5d.js","assets/zqv59oidvge8f4ro.js","assets/dl8u8okezr3qqv1l.js","assets/jajplg1udnmi8978.js","assets/imwr51rn5ig1qbbo.js","assets/k0avmpcayzs7iyy2.js","assets/k6yn3au0i45wwn1u.js","assets/imdfj4m85ztq7yte.js","assets/4h8qsvyuv2fcir5w.js","assets/n4gaz75flpm3utiu.js","assets/mc0scufts54dtafa.js","assets/lfpyukpxnc2tbdzc.js","assets/k07fke0i34clap9a.js","assets/icucbnbexf1to1b3.js","assets/lzyue6vhm3osg5jg.js","assets/c0ouyltso7kfescp.js","assets/my28hta7gnvvpint.js","assets/by33sp1m5h17tgw2.js","assets/loskhkuah3is6630.js","assets/mqabubffkpko61wr.js","assets/lxa5p4s1fgqvzcgw.js","assets/c929hhheh8pnurrs.js","assets/dpidockywf8envd2.js","assets/fvq06q6sopd9r6rx.js","assets/cyrjh6r9wv2bzsqv.js","assets/o45zl9yl00508gad.js","assets/mxzk2kf77c8eueuw.js","assets/i0aamln1pro7n73b.js","assets/matxjx64xjrpxbwa.js","assets/ip2dsbq9712r5wna.js","assets/iha5kwli63j9ylq9.js","assets/eibvgm82s4rii3v7.js","assets/np3j7tlnwifo0og0.js","assets/bfe9vbgi2fr90thb.js","assets/o7ao8mcd918dyvir.js","assets/djpaa0h6tdp9ysiw.js","assets/fqzt6ckf6r80fm8s.js","assets/kqn6tqur46b4av9e.js","assets/iq2gfdnio7ik2rfe.js","assets/ckeauhcg4pu33xfw.js","assets/c42ncwmsnr8ifrud.js","assets/hbhzncdz8wdw5ysr.js","assets/ImageLightbox-j22hx8sz.css"])))=>i.map(i=>d[i]);
var P4=Object.freeze,R4=Object.defineProperty,M$=Object.defineProperties;var A$=Object.getOwnPropertyDescriptors;var Mm=Object.getOwnPropertySymbols;var L4=Object.prototype.hasOwnProperty,O4=Object.prototype.propertyIsEnumerable;var Ql=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),n_=t=>{throw TypeError(t)};var t_=(t,e,n)=>e in t?R4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||(e={}))L4.call(e,n)&&t_(t,n,e[n]);if(Mm)for(var n of Mm(e))O4.call(e,n)&&t_(t,n,e[n]);return t},U=(t,e)=>M$(t,A$(e));var D4=t=>typeof t=="symbol"?t:t+"",we=(t,e)=>{var n={};for(var s in t)L4.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&Mm)for(var s of Mm(t))e.indexOf(s)<0&&O4.call(t,s)&&(n[s]=t[s]);return n};var J=(t,e,n)=>t_(t,typeof e!="symbol"?e+"":e,n),s_=(t,e,n)=>e.has(t)||n_("Cannot "+n);var wn=(t,e,n)=>(s_(t,e,"read from private field"),n?n.call(t):e.get(t)),ao=(t,e,n)=>e.has(t)?n_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Nr=(t,e,n,s)=>(s_(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),Jt=(t,e,n)=>(s_(t,e,"access private method"),n);var ct=(t,e)=>P4(R4(t,"raw",{value:P4(e||t.slice())}));var Qn=function(t,e){this[0]=t,this[1]=e},Pr=(t,e,n)=>{var s=(i,l,c,d)=>{try{var u=n[i](l),f=(l=u.value)instanceof Qn,m=u.done;Promise.resolve(f?l[0]:l).then(g=>f?s(i==="return"?i:"next",l[1]?{done:g.done,value:g.value}:g,c,d):c({value:g,done:m})).catch(g=>s("throw",g,c,d))}catch(g){d(g)}},o=i=>a[i]=l=>new Promise((c,d)=>s(i,l,c,d)),a={};return n=n.apply(t,e),a[Ql("asyncIterator")]=()=>a,o("next"),o("throw"),o("return"),a},o_=t=>{var e=t[Ql("asyncIterator")],n=!1,s,o={};return e==null?(e=t[Ql("iterator")](),s=a=>o[a]=i=>e[a](i)):(e=e.call(t),s=a=>o[a]=i=>{if(n){if(n=!1,a==="throw")throw i;return i}return n=!0,{done:!1,value:new Qn(new Promise(l=>{var c=e[a](i);c instanceof Object||n_("Object expected"),l(c)}),1)}}),o[Ql("iterator")]=()=>o,s("next"),"throw"in e?s("throw"):o.throw=a=>{throw a},"return"in e&&s("return"),o},Io=(t,e,n)=>(e=t[Ql("asyncIterator")])?e.call(t):(t=t[Ql("iterator")](),e={},n=(s,o)=>(o=t[s])&&(e[s]=a=>new Promise((i,l,c)=>(a=o.call(t,a),c=a.done,Promise.resolve(a.value).then(d=>i({value:d,done:c}),l)))),n("next"),n("return"),e);import{c as W,q as Xn,u as It,a as Vn,b as rt,d as at,r as _,_ as P,g as Zn,j as r,M as j,e as Se,m as I$,v as os,f as oh,h as ne,R as Yn,i as qt,k as j$,l as Ge,n as sr,o as Us,s as $y,L as wo,p as N$,t as wf,w as P$,x as R$,y as L$,$ as O$,z as $E,A as Am,F as VE}from"./bubexfvksfr7893o.js";import{c as yu,g as xt,a as _s,s as HE,b as bi,u as V,d as re,i as js,R as ge,A as sn,D as Fe,T as fr,C as ts,e as Ft,f as Mn,h as kf,j as da,S as Yr,k as Ka,l as Ze,m as ro,n as wt,G as jc,o as H2,p as $t,q as GE,r as br,t as WE,v as zE,w as Es,x as An,y as bl,z as mn,B as it,E as D$,F as qE,H as Ci,I as hd,J as ve,K as Zu,L as fi,M as Ve,N as tt,O as mt,P as jt,Q as bn,U as _d,V as he,W as Kc,X as F4,Y as hn,Z as Cl,_ as B,$ as Ie,a0 as je,a1 as F$,a2 as Xt,a3 as B$,a4 as Qs,a5 as Tg,a6 as Pe,a7 as qe,a8 as ah,a9 as Zg,aa as yo,ab as cn,ac as U$,ad as $$,ae as V$,af as H$,ag as gs,ah as ps,ai as G$,aj as xd,ak as ze,al as st,am as Ye,an as Vy,ao as ai,ap as W$,aq as G2,ar as z$,as as $o,at as Vo,au as Ue,av as Nn,aw as ut,ax as mr,ay as Ke,az as R,aA as F,aB as ye,aC as Mt,aD as YE,aE as Ef,aF as Be,aG as ko,aH as St,aI as q$,aJ as Qc,aK as Y$,aL as Z$,aM as ZE,aN as Ko,aO as Tf,aP as _t,aQ as K$,aR as KE,aS as Zt,aT as ri,aU as on,aV as Jc,aW as Lt,aX as Nc,aY as Q$,aZ as Un,a_ as J$,a$ as X$,b0 as eV,b1 as Hy,b2 as tV,b3 as a_,b4 as mi,b5 as QE,b6 as nV,b7 as Kg,b8 as JE,b9 as $s,ba as gr,bb as pr,bc as sV,bd as rs,be as Qa,bf as Mg,bg as Gy,bh as Rn,bi as oV,bj as B4,bk as yn,bl as Ks,bm as aV,bn as Xs,bo as gi,bp as es,bq as rV,br as dt,bs as hs,bt as Lu,bu as Br,bv as rh,bw as iV,bx as ih,by as lV,bz as W2,bA as cV,bB as dV,bC as U4,bD as Cr,bE as ba,bF as vu,bG as XE,bH as uV,bI as fV,bJ as lh,bK as ch,bL as mV,bM as gV,bN as pV,bO as Wy,bP as Sl,bQ as $4,bR as zy,bS as is,bT as Qo,bU as eT,bV as Mf,bW as tT,bX as Qg,bY as hV,bZ as _V,b_ as xV,b$ as yV,c0 as V4,c1 as Si,c2 as vV,c3 as nT,c4 as bV,c5 as ho,c6 as z2,c7 as Af,c8 as xs,c9 as wi,ca as Ln,cb as qy,cc as Yy,cd as CV,ce as Zy,cf as Pc,cg as Ky,ch as dh,ci as Ho,cj as ms,ck as sT,cl as SV,cm as oT,cn as If,co as Jg,cp as Kn,cq as al,cr as pt,cs as uh,ct as Eo,cu as Jo,cv as ss,cw as ft,cx as To,cy as wV,cz as z,cA as wl,cB as eo,cC as kV,cD as fh,cE as hr,cF as aT,cG as kl,cH as mh,cI as On,cJ as un,cK as Rt,cL as Qy,cM as gh,cN as Jy,cO as rT,cP as iT,cQ as lT,cR as cT,cS as dT,cT as uT,cU as fT,cV as mT,cW as EV,cX as ph,cY as gT,cZ as hh,c_ as pT,c$ as TV,d0 as MV,d1 as AV,d2 as Ou,d3 as _h,d4 as r_,d5 as zo,d6 as Ca,d7 as hT,d8 as q2,d9 as Qi,da as El,db as as,dc as Ns,dd as IV,de as jV,df as NV,dg as Y2,dh as gt,di as xh,dj as PV,dk as Ps,dl as ln,dm as _T,dn as Tl,dp as Ml,dq as jf,dr as RV,ds as yd,dt as LV,du as Xy,dv as e3,dw as vd,dx as t3,dy as n3,dz as Ku,dA as OV,dB as DV,dC as s3,dD as FV,dE as _r,dF as bd,dG as xT,dH as BV,dI as yT,dJ as Qu,dK as UV,dL as $V,dM as Al,dN as Pn,dO as yh,dP as o3,dQ as Xo,dR as xn,dS as Xe,dT as VV,dU as Sn,dV as vT,dW as Nf,dX as yc,dY as ma,dZ as Go,d_ as yt,d$ as fn,e0 as a3,e1 as bT,e2 as r3,e3 as Pf,e4 as i3,e5 as CT,e6 as kt,e7 as ws,e8 as ki,e9 as ST,ea as Jn,eb as HV,ec as wT,ed as kT,ee as Cd,ef as Im,eg as Z2,eh as ET,ei as vh,ej as GV,ek as Sr,el as Sd,em as WV,en as zV,eo as qV,ep as Ju,eq as l3,er as c3,es as Mo,et as TT,eu as YV,ev as ZV,ew as bh,ex as d3,ey as KV,ez as MT,eA as AT,eB as Xc,eC as QV,eD as JV,eE as qo,eF as IT,eG as i_,eH as K,eI as ed,eJ as H4,eK as wd,eL as jT,eM as ea,eN as NT,eO as XV,eP as Xu,eQ as eH,eR as Rf,eS as PT,eT as RT,eU as Hn,eV as tH,eW as vo,eX as LT,eY as Ch,eZ as OT,e_ as u3,e$ as bo,f0 as nH,f1 as sH,f2 as oH,f3 as wr,f4 as En,f5 as Xg,f6 as As,f7 as ef,f8 as aH,f9 as Kt,fa as G4,fb as f3,fc as DT,fd as Lf,fe as FT,ff as kr,fg as rH,fh as m3,fi as BT,fj as UT,fk as Sh,fl as iH,fm as $T,fn as VT,fo as HT,fp as g3,fq as GT,fr as WT,fs as rl,ft as p3,fu as lH,fv as h3,fw as gl,fx as kd,fy as Of,fz as Gi,fA as zT,fB as cH,fC as dH,fD as _3,fE as wh,fF as uH,fG as x3,fH as Il,fI as fH,fJ as mH,fK as y3,fL as qT,fM as gH,fN as Cs,fO as Ed,fP as YT,fQ as v3,fR as bu,fS as pH,fT as hH,fU as _H,fV as xH,fW as yH,fX as kh,fY as vH,fZ as bH,f_ as CH,f$ as SH,g0 as Df,g1 as ZT,g2 as wH,g3 as Lo,g4 as Eh,g5 as Th,g6 as jm,g7 as ds,g8 as b3,g9 as kH,ga as Ff,gb as C3,gc as EH,gd as Td,ge as KT,gf as QT,gg as JT,gh as W4,gi as XT,gj as jl,gk as co,gl as e8,gm as TH,gn as S3,go as MH,gp as AH,gq as IH,gr as jH,gs as NH,gt as t8,gu as w3,gv as PH,gw as RH,gx as k3,gy as K2,gz as E3,gA as T3,gB as LH,gC as n8,gD as s8,gE as M3,gF as o8,gG as OH,gH as A3,gI as a8,gJ as ya,gK as DH,gL as FH,gM as BH,gN as r8,gO as I3,gP as UH,gQ as va,gR as $H,gS as VH,gT as HH,gU as GH,gV as WH,gW as zH,gX as qH,gY as YH,gZ as Tn,g_ as ZH,g$ as KH,h0 as QH,h1 as JH,h2 as XH,h3 as i8,h4 as eG,h5 as tG,h6 as l8,h7 as nG,h8 as sG,h9 as j3,ha as oG,hb as aG,hc as c8,hd as rG,he as iG,hf as lG,hg as cG,hh as N3,hi as Mh,hj as z4,hk as q4,hl as dG,hm as Md,hn as l_,ho as P3,hp as Ah,hq as Ih,hr as uG,hs as Q2,ht as tf,hu as fG,hv as mG,hw as Nl,hx as gG,hy as ep,hz as pG,hA as d8,hB as jh,hC as hG,hD as Co,hE as _G,hF as xG,hG as u8,hH as R3,hI as or,hJ as f8,hK as to,hL as yG,hM as m8,hN as vG,hO as Ia,hP as bG,hQ as Ts,hR as L3,hS as Nh,hT as O3,hU as CG,hV as g8,hW as Nm,hX as SG,hY as wG,hZ as kG,h_ as EG,h$ as p8,i0 as ii,i1 as h8,i2 as Du,i3 as _8,i4 as TG,i5 as x8,i6 as MG,i7 as ar,i8 as Bf,i9 as y8,ia as v8,ib as AG,ic as tp,id as IG,ie as jG,ig as NG,ih as PG,ii as Cu,ij as D3,ik as RG,il as F3,im as B3,io as Ut,ip as J2,iq as b8,ir as LG,is as Sa,it as OG,iu as wa,iv as DG,iw as U3,ix as FG,iy as Ph,iz as nf,iA as $3,iB as BG,iC as UG,iD as C8,iE as pi,iF as Ja,iG as Rc,iH as $G,iI as Y4,iJ as VG,iK as HG,iL as GG,iM as Zr,iN as V3,iO as WG,iP as zG,iQ as qG,iR as Ad,iS as YG,iT as ZG,iU as KG,iV as QG,iW as JG,iX as XG,iY as eW,iZ as tW,i_ as nW,i$ as Rh,j0 as Wt,j1 as sW,j2 as oW,j3 as S8,j4 as H3,j5 as aW,j6 as Id,j7 as rW,j8 as rr,j9 as il,ja as w8,jb as Pl,jc as iW,jd as G3,je as lW,jf as k8,jg as cW,jh as dW,ji as Uf,jj as uW,jk as fW,jl as E8,jm as mW,jn as gW,jo as pW,jp as Jl,jq as Z4,jr as Rl,js as Ji,jt as hW,ju as _W,jv as xW,jw as Lh,jx as yW,jy as T8,jz as W3,jA as M8,jB as vW,jC as Pt,jD as z3,jE as bW,jF as sf,jG as of,jH as q3,jI as CW,jJ as SW,jK as A8,jL as c_,jM as d_,jN as wW,jO as Y3,jP as kW,jQ as EW,jR as TW,jS as MW,jT as I8,jU as _o,jV as AW,jW as Bt,jX as pa,jY as td,jZ as IW,j_ as jW,j$ as NW,k0 as PW,k1 as np,k2 as j8,k3 as RW,k4 as Z3,k5 as LW,k6 as OW,k7 as DW,k8 as no,k9 as FW,ka as BW,kb as UW,kc as $W,kd as N8,ke as K3,kf as VW,kg as Ei,kh as ka,ki as HW,kj as Ti,kk as kn,kl as GW,km as Q3,kn as J3,ko as WW,kp as zW,kq as X3,kr as qW,ks as P8,kt as R8,ku as Ag,kv as ev,kw as L8,kx as O8,ky as D8,kz as $f,kA as YW,kB as tv,kC as ZW,kD as F8,kE as vc,kF as KW,kG as QW,kH as JW,kI as XW,kJ as ez,kK as tz,kL as nz,kM as sz,kN as Oh,kO as oz,kP as K4,kQ as sp,kR as az,kS as rz,kT as iz,kU as lz,kV as cz,kW as B8,kX as dz,kY as uz,kZ as U8,k_ as fz,k$ as mz,l0 as u_,l1 as nv,l2 as $8,l3 as sv,l4 as gz,l5 as pz,l6 as hz,l7 as _z,l8 as V8,l9 as H8,la as G8,lb as xz,lc as yz,ld as ov,le as Q4,lf as X2,lg as jd,lh as vz,li as av,lj as bz,lk as Cz,ll as rv,lm as W8,ln as Sz,lo as af,lp as wz,lq as z8,lr as J4,ls as kz,lt as q8,lu as Y8,lv as Z8,lw as Ez,lx as Tz,ly as Mz,lz as Az,lA as Iz,lB as jz,lC as K8,lD as Nz,lE as Pz,lF as Rz,lG as iv,lH as Q8,lI as Lz,lJ as Pm,lK as Ri,lL as Oz,lM as xo,lN as Dz,lO as Dh,lP as Fz,lQ as Bz,lR as Uz,lS as $z,lT as Fh,lU as J8,lV as Rm,lW as Vz,lX as X8,lY as Hz,lZ as Gz,l_ as eM,l$ as Wz,m0 as op,m1 as ta,m2 as na,m3 as tM,m4 as X4,m5 as zz,m6 as e6,m7 as qz,m8 as t6,m9 as Yz,ma as Zz,mb as Kz,mc as Qz,md as Jz,me as Xz,mf as eq,mg as tq,mh as n6,mi as nq,mj as nM,mk as sq,ml as sM,mm as oM,mn as oq,mo as qi,mp as aq,mq as aM,mr as rq,ms as iq,mt as Lm,mu as lq,mv as lv,mw as cq,mx as dq,my as zt,mz as rM,mA as uq,mB as fq,mC as mq,mD as gq,mE as s6,mF as iM,mG as pq,mH as hq,mI as _q,mJ as xq,mK as yq,mL as vq,mM as bq,mN as Cq,mO as Sq,mP as wq,mQ as ex,mR as lM,mS as kq,mT as Eq,mU as Tq,mV as cM,mW as o6,mX as Mq,mY as Aq,mZ as Iq,m_ as Om,m$ as jq,n0 as Nq,n1 as Pq,n2 as dM,n3 as Rq,n4 as uM,n5 as Lq,n6 as tx,n7 as Oq,n8 as Dq,n9 as f_,na as Su,nb as Qd,nc as a6,nd as Fq,ne as Bq,nf as Uq,ng as m_,nh as r6,ni as $q,nj as Vq,nk as fM,nl as Hq,nm as Gq,nn as Dm,no as cv,np as Wq,nq as zq,nr as qq,ns as i6,nt as Yq,nu as mM,nv as l6,nw as Li,nx as Xl,ny as Zq}from"./ncw8zw682jinppua.js";const Kq=t=>{const e=Object.entries(t.mapping).find(([n])=>n==="");if(e!==void 0){const n=yu(t),[,s]=e,o=s.children;n.mapping["client-created-root"]=U(w({},s),{id:"client-created-root"}),delete n.mapping[""];for(const a of o)n.mapping[a].parent="client-created-root";return n}return t},fHe=t=>(t.parent_message_id==="client-created-root"&&delete t.parent_message_id,t),dv={};function mHe(t,e){dv[t]=e}function Qq(t){var e;return(e=dv[t])!=null?e:null}function gM(t){return t in dv}const Bh=t=>{"use forget";const e=W.c(3),n=V();let s;return e[0]!==n||e[1]!==t?(s=()=>{if(t===void 0)return null;const o=xt(n,t);return bi(o)},e[0]=n,e[1]=t,e[2]=s):s=e[2],re(s)},uv=(t,e)=>{const n=xt(t,e);return bi(n)},Is=(t,e)=>{const n=xt(_s(),t);HE(n,e)};async function Ea(t,e={}){const n=Qq(t),s={};e.projectId&&js(e.projectId)&&(s["chatgpt-project-id"]=e.projectId,e.ownerUserId&&(s["chatgpt-conv-owner-id"]=e.ownerUserId));const o=n!=null?n:await ge.safeGet("/conversation/{conversation_id}",w({parameters:{path:{conversation_id:t}},intercomEventOnError:"fetch-error:conversations:get",authOption:sn.SendIfAvailable},s?{additionalHeaders:s}:{}));n||Fe.addTiming("chatgpt.web.chatPage.loadExistingConversation");const a=Kq(o);return fr.updateThreadFromServer(t,a,{skipIfExisting:e==null?void 0:e.skipIfExisting}),Is(a.conversation_id,a.async_status?{source:ts.SERVER,value:a.async_status}:null),a}const Uh=o=>{var a=o,{clientThreadId:t,alwaysForceUpdate:e=!1,onError:n}=a,s=we(a,["clientThreadId","alwaysForceUpdate","onError"]);return Xn({queryKey:["conversation",t],queryFn:()=>Ea(t,U(w({},s),{skipIfExisting:!e})).catch(i=>{throw n==null||n(i),i})})},rf=Ft(Mn(()=>null)),hi={updateDetails:t=>{["beacon_banner_info","beacon_modal_info","beacon_container_info"].includes(t.ui_info.type)&&rf.setState(()=>w({},t),!0)},dismiss:()=>{rf.setState(()=>null,!0)}};function fv(){return rf(t=>(t==null?void 0:t.ui_info.type)==="beacon_banner_info"?t:null)}function Jq(){return rf(t=>(t==null?void 0:t.ui_info.type)==="beacon_modal_info"?t:null)}function Xq(){"use forget";return rf(eY)}function eY(t){return(t==null?void 0:t.ui_info.type)==="beacon_container_info"?t:null}function Fm(t){t&&t.danger("Failed to copy to clipboard.",{duration:4,hasCloseButton:!0,toastId:"copy_to_clipboard_failed_to_copy"})}function Yo(t,e,n){var o,a,i;const{navigator:s}=(i=(a=(o=n==null?void 0:n.target)==null?void 0:o.ownerDocument)==null?void 0:a.defaultView)!=null?i:window;return new Promise((l,c)=>{var d;if(!(s!=null&&s.clipboard)){Fm(e),c();return}try{if("write"in s.clipboard&&"supports"in ClipboardItem){const u=Object.entries(typeof t=="string"?{"text/plain":t}:t).map(([m,g])=>[m,typeof g=="string"?new Blob([g],{type:m}):g]);if(u.length===0){l("success");return}const f=new ClipboardItem(Object.fromEntries(u));s.clipboard.write([f]).then(()=>l("success"),()=>{Fm(e),c()})}else{const u=typeof t=="string"?t:(d=t["text/plain"])!=null?d:"";s.clipboard.writeText(u).then(()=>l("success"),()=>{Fm(e),c()})}}catch(u){Fm(e),c()}})}function tY(t,e){returnwindow.location.origin.concat(kf(t,e))}async function gHe(t,e,n,s,o){await Yo(tY(t,e),n,s),o&&n.info(o,{id:"gizmo-copy-url",testId:"copy-gizmo-url-toast"})}function pM(t){return t.some(e=>e.type===da.JIT_PLUGIN)}function hM(t){var e;return"gizmo_id"in t&&(e=t.gizmo_id)!=null?e:null}function pHe(t){var e,n,s,o,a,i,l,c,d,u,f;return{id:t.gizmo.id,instructions:t.gizmo.instructions,name:t.gizmo.display.name,description:(e=t.gizmo.display.description)!=null?e:"",emoji:(n=t.gizmo.display.emoji)!=null?n:void 0,theme:(s=t.gizmo.display.theme)!=null?s:void 0,profilePictureId:(o=t.gizmo.display.profile_pic_id)!=null?o:void 0,profilePictureUrl:(a=t.gizmo.display.profile_picture_url)!=null?a:void 0,promptStarters:(i=t.gizmo.display.prompt_starters)!=null?i:[],tools:yu(t.tools),files:yu(t.files),sharing:t.gizmo.sharing?yu(t.gizmo.sharing):{subjects:[],recipient:t.gizmo.share_recipient},trainingDisabled:(l=t.gizmo.training_disabled)!=null?l:!1,goal:(c=t.gizmo.goal)!=null?c:void 0,memoryScope:(d=t.gizmo.memory_scope)!=null?d:jc.UNSET,sharingRecipient:t.gizmo.share_recipient,sharingTargets:yu(t.gizmo.sharing_targets),liveVersion:(u=t.gizmo.live_version)!=null?u:0,contextStuffingBudget:t.gizmo.context_stuffing_budget,defaultModel:(f=t.gizmo.default_model)!=null?f:void 0}}function nY(t){return t===jc.GLOBAL||t===jc.UNSET||t===jc.PROJECT}function hHe(t){return nY(t)?jc.GLOBAL:jc.PROJECT_V2}function wu(t,e){return n=>n?U(w({},n),{pages:n.pages.map((s,o)=>o===0?U(w({},s),{items:[t,...s.items]}):s)}):{pages:[e],pageParams:[]}}function ku(t){return e=>e&&U(w({},e),{pages:e.pages.map(n=>U(w({},n),{items:n.items.filter(s=>s.id!==t)}))})}function sY({queryClient:t,newGizmoId:e,conversation:n,previousGizmoId:s}){const o=[],a=n.gizmo_id;return n.gizmo_id=e,o.push(()=>{n.gizmo_id=a}),e?(t.setQueryData([Yr,{gizmoId:e}],wu(n,{items:[n],cursor:null})),o.push(()=>{t.setQueryData([Yr,{gizmoId:e}],ku(n.id))})):(t.setQueryData([Ka],wu(n,{items:[n],total:1,limit:H2,offset:0})),o.push(()=>{t.setQueryData([Ka],ku(n.id))})),s?(t.setQueryData([Yr,{gizmoId:s}],ku(n.id)),o.push(()=>{t.setQueryData([Yr,{gizmoId:s}],wu(n,{items:[n],cursor:null}))})):(t.setQueryData([Ka],ku(n.id)),o.push(()=>{t.setQueryData([Ka],wu(n,{items:[n],total:1,limit:H2,offset:0}))})),Ze(n.id,i=>{i.mode=ro(c6(e))}),o.push(()=>{Ze(n.id,i=>{i.mode=ro(c6(a!=null?a:null))})}),()=>{o.forEach(i=>i())}}function c6(t){return t?{kind:wt.GizmoInteraction,gizmo_id:t}:{kind:wt.PrimaryAssistant}}const d6=t=>["conversation","init",t],oY=({clientThreadId:t,conversationMode:e,clientModelId:n,enabled:s},o,a,i)=>{var f;const l=hM(e),d=(f=new URLSearchParams(i).get(GE))!=null?f:void 0,u=br(t)?null:t;return{gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:"always",queryKey:d6(t),queryFn:()=>{let m=ge.safePost("/conversation/init",{requestBody:{gizmo_id:l,requested_default_model:n,conversation_id:u,timezone_offset_min:new Date().getTimezoneOffset(),conversation_owner_id:d},authOption:sn.SendIfAvailable});return m=m.then(g=>(o.getQueryData(d6(t))&&WE(g)&&o.invalidateQueries({queryKey:zE()}),g)),m},enabled:s&&!gM(t)}},aY=t=>{const e=It(),n=$t(),{search:s}=Vn();return rt(oY(t,e,n,s))};function _He(){const t=Vn();return yM(t.pathname)}function _M(t){const n=new URL("http://example.com".concat(t)).pathname.match(/\/g\/(g-p-[\w\d-]+)/);if(n)return n[1]}function xM(t){const e=t.split("-");return e.length>1&&e[0]==="g"?(e==null?void 0:e[1])==="p"?"g-p-".concat(e[2]):"g-".concat(e[1]):e[0]}function yM(t){const e=_M(t);if(e)return xM(e)}function xHe({gizmoId:t,pathname:e}){const n=u6(e),s=_M(e),o=s?xM(s):void 0;o&&t&&js(t)&&t!==o&&console.warn("Project slug/id mismatch",{gizmoId:t,projectIdFromSlug:o,pathname:e});const a=o!=null?o:js(t)?t:void 0,i=s!=null?s:a,l=i!=null?"/g/".concat(i,"/project"):void 0,c=l!=null&&u6(l)===n;return{projectIdForNewChat:a,projectHomePath:l,isOnProjectHomeView:c}}function yHe(t,e){return e==null?t:{newConversationConfig:U(w({},t==null?void 0:t.newConversationConfig),{urlGizmoId:e})}}function u6(t){return t.replace(/\/+$/,"")}const rY=t=>{"use forget";var x;const e=W.c(23),n=at(),{pathname:s,search:o}=Vn(),a=Es(),i=$t(),l=An(mn),c=bl();let d,u,f;if(e[0]!==t||e[1]!==l||e[2]!==c||e[3]!==n||e[4]!==s||e[5]!==o||e[6]!==i){const v=c||gM(t);d=c;const y=new URLSearchParams(o),b=yM(s),C=(x=y.get(GE))!=null?x:void 0;f=rt;let S;e[10]!==t||e[11]!==l||e[12]!==n||e[13]!==s||e[14]!==i?(S=E=>{if(l)it.wantsNewConversation$.set(!0),it.selectedConversationId$.set(void 0);else{const k=D$(s),T=k!=null?qE(k):"/";n(T)}i.danger("Unable to load conversation ".concat(t),{testId:"conversation-fetch-error-toaster",toastId:"use_fetch_conversation_failed_to_load_conversation"})},e[10]=t,e[11]=l,e[12]=n,e[13]=s,e[14]=i,e[15]=S):S=e[15],u=Uh({clientThreadId:t,alwaysForceUpdate:v,projectId:b,ownerUserId:C,onError:S}),e[0]=t,e[1]=l,e[2]=c,e[3]=n,e[4]=s,e[5]=o,e[6]=i,e[7]=d,e[8]=u,e[9]=f}else d=e[7],u=e[8],f=e[9];let m;e[16]!==t||e[17]!==a?(m=!br(t)&&!a,e[16]=t,e[17]=a,e[18]=m):m=e[18];const g=d?"always":!1;let p;e[19]!==u||e[20]!==m||e[21]!==g?(p=U(w({},u),{enabled:m,refetchOnMount:!0,refetchOnWindowFocus:g}),e[19]=u,e[20]=m,e[21]=g,e[22]=p):p=e[22];const{data:h}=f(p);return h},iY=(t,e,n)=>{const s=V(),o=An(mn),a=e.kind===wt.GizmoInteraction?e.gizmo_id:null,{data:i}=Ci(a!=null?a:void 0),c=a&&js(a)&&!i;rY(t);const{session:d}=hd(s),u=ve(s,"544083113");_.useEffect(()=>{var g,p;fr.initThread({clientThreadId:t,conversationMode:e,userId:(g=d==null?void 0:d.user)==null?void 0:g.id,accountId:(p=d==null?void 0:d.account)==null?void 0:p.id,skipFollowupMcpCheck:u}),Zu.reset(),hi.dismiss()},[t]),_.useEffect(()=>{n!=null&&n.shouldScrollToBottom&&Ze(t,g=>{g.scrollToMessageId="finalAgentTurn"})},[t,n==null?void 0:n.shouldScrollToBottom]),_.useEffect(()=>{n!=null&&n.disableConversationNavigation&&Ze(t,g=>{g.disableConversationNavigation=n.disableConversationNavigation})},[t,n==null?void 0:n.disableConversationNavigation]);const{isLoading:f,data:m}=aY({clientThreadId:t,clientModelId:null,conversationMode:e,enabled:!c});_.useEffect(()=>{if(f||!m||o)return;const{default_model_slug:g}=m,p=g;Zu.updateDetails(m),p&&Ze(t,h=>{h.defaultModelId=p})},[f,m,o])},lY=_.createContext(()=>Promise.resolve()),$h=_.createContext(null),Vh=()=>_.useContext($h)!=null;_.createContext({onDismount:()=>{}});var Je=(t=>(t.Starter="starter",t.Reply="reply",t.Capabilities="capabilities",t.Autocomplete="autocomplete",t.Trending="trending",t.Templated="templated",t))(Je||{}),vn=(t=>(t.Search="Search",t.Canvas="Canvas",t.Image="Image",t.ContextualAnswers="ContextualAnswers",t.ContextualAnswersNUX="ContextualAnswersNUX",t.ChatGPTTrending="ChatGPTTrending",t.ImageGenTrending="ImageGenTrending",t.Slurm="Slurm",t.Tatertot="Tatertot",t.Glaux="Glaux",t.TemplatedPrompts="TemplatedPrompts",t))(vn||{});async function mv(t){const e=await P(()=>import("./l1teaxoievyk0rz1.js").then(n=>n.i),__vite__mapDeps([0,1]));if(Kc!=null&&(t!=null&&t.startsWith(Kc)))return!0;try{return e.get(new URL(t!=null?t:"").hostname)==="openai.com"}catch(n){return!1}}function gv(t,e,n){return ge.safeGet("/conversation/{conversation_id}/url_safe",{parameters:{path:{conversation_id:t},query:{url:e,history_and_training_disabled:n}}})}function cY(t,e){const n=V(),s=re(()=>_d(n)),o=!tt(n);return rt({queryKey:["safe-url",{serverThreadId:t,url:e,isHistoryAndTrainingDisabled:s}],queryFn:async()=>{if(t==null||e==null)throw new Error("Unexpected falsey useSafeUrlQuery");return await mv(e)||he.isThreadUrlSafe(mt(t),e)?{safe:!0}:o?{safe:!1}:gv(t,e,s)},enabled:t!=null&&e!=null})}function dY(t,e,n=!0){const s=Ve(t,a=>e!=null&&he.isThreadUrlSafe(a,e)),{data:{safe:o}={}}=cY(t,s?void 0:e);return s||o||!n?e:void 0}function vHe(t,e,n=!0){const s=uY(e,500);return dY(t,s,n)}function uY(t,e){const[n,s]=_.useState(void 0),[o]=_.useState(()=>fi(a=>{s(a)},e));return _.useEffect(()=>{o(t)},[o,t]),n===t?t:void 0}function bHe(t,e){const n=V(),s=re(()=>_d(n)),o=Ve(t,i=>{var l;return(l=i==null?void 0:i.safeUrls)!=null?l:[]}),{data:a=[]}=rt({queryKey:["safe-urls",t,e,s,o],queryFn:async()=>{const i=o.filter(u=>e.includes(u)),l=e.filter(u=>!i.includes(u)),d=(await Promise.allSettled(l.map(async u=>{if(await mv(u))return u;if(t==null)return null;try{return(await gv(t,u,s)).safe?u:null}catch(m){return null}}))).map(u=>u.status==="fulfilled"?u.value:null).filter(u=>u!=null);return i.concat(d)},enabled:t!=null&&e.length>0});return a}async function fY(t,e){const{isKnownSafeUrl:n,isUrlMarkedSafeInThread:s,serverCheck:o,isHistoryAndTrainingDisabled:a}=e,i=t.filter(f=>!s(f));if(i.length===0)return[];const l=await Promise.all(i.map(f=>n(f))),c=i.filter((f,m)=>!l[m]);if(c.length===0)return[];if(!o)return c;const d=await Promise.allSettled(c.map(async f=>{try{return await o(f,a)?null:f}catch(m){return f}})),u=[];return d.forEach((f,m)=>{const g=c[m];f.status==="fulfilled"?typeof f.value=="string"&&u.push(f.value):u.push(g)}),u}function mY(t,e,n){const s=mt(e),o=jt(e);return fY(n,{isKnownSafeUrl:mv,isUrlMarkedSafeInThread:a=>he.isThreadUrlSafe(s,a),serverCheck:o!=null?async(a,i)=>(await gv(o,a,i)).safe:void 0,isHistoryAndTrainingDisabled:bn(()=>_d(t))})}const CHe=_.createContext(void 0),gY=/#/g,pY=/&/g,hY=/\//g,_Y=/=/g,pv=/\+/g,xY=/%5e/gi,yY=/%60/gi,vY=/%7c/gi,bY=/%20/gi;function CY(t){return encodeURI(""+t).replace(vY,"|")}function nx(t){return CY(typeof t=="string"?t:JSON.stringify(t)).replace(pv,"%2B").replace(bY,"+").replace(gY,"%23").replace(pY,"%26").replace(yY,"`").replace(xY,"^").replace(hY,"%2F")}function g_(t){return nx(t).replace(_Y,"%3D")}function vM(t=""){try{return decodeURIComponent(""+t)}catch(e){return""+t}}function SY(t){return vM(t.replace(pv," "))}function wY(t){return vM(t.replace(pv," "))}function kY(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const o=SY(s[1]);if(o==="__proto__"||o==="constructor")continue;const a=wY(s[2]||"");e[o]===void 0?e[o]=a:Array.isArray(e[o])?e[o].push(a):e[o]=[e[o],a]}return e}function EY(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>"".concat(g_(t),"=").concat(nx(n))).join("&"):"".concat(g_(t),"=").concat(nx(e)):g_(t)}function TY(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>EY(e,t[e])).filter(Boolean).join("&")}const MY=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,AY=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,IY=/^([/\\]\s*){2,}[^/\\]/;function jY(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?MY.test(t):AY.test(t)||(e.acceptRelative?IY.test(t):!1)}function NY(t,e){const n=PY(t),s=w(w({},kY(n.search)),e);return n.search=TY(s),RY(n)}const bM=Symbol.for("ufo:protocolRelative");function PY(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,f,m=""]=n;return{protocol:f.toLowerCase(),pathname:m,href:f+m,auth:"",host:"",search:"",hash:""}}if(!jY(t,{acceptRelative:!0}))return f6(t);const[,s="",o,a=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,i="",l=""]=a.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(l=l.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:d,hash:u}=f6(l);return{protocol:s.toLowerCase(),auth:o?o.slice(0,Math.max(0,o.length-1)):"",host:i,pathname:c,search:d,hash:u,[bM]:!s}}function f6(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function RY(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",o=t.auth?t.auth+"@":"",a=t.host||"";return(t.protocol||t[bM]?(t.protocol||"")+"//":"")+o+a+e+n+s}var Bm={exports:{}},Um={exports:{}},m6;function hv(){return m6||(m6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(s){if(s==null)throw new TypeError("Expected a string but received a ".concat(s));if(s.constructor.name!=="String")throw new TypeError("Expected a string but received a ".concat(s.constructor.name))}t.exports=e.default,t.exports.default=e.default})(Um,Um.exports)),Um.exports}var $m={exports:{}},g6;function LY(){return g6||(g6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function n(o){return Object.prototype.toString.call(o)==="[object RegExp]"}function s(o,a){for(var i=0;i<a.length;i++){var l=a[i];if(o===l||n(l)&&l.test(o))return!0}return!1}t.exports=e.default,t.exports.default=e.default})($m,$m.exports)),$m.exports}var Vm={exports:{}},p6;function OY(){return p6||(p6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(o,a){return o.indexOf(a)!==-1};e.default=n,t.exports=e.default,t.exports.default=e.default})(Vm,Vm.exports)),Vm.exports}var Hm={exports:{}},Gm={exports:{}},h6;function CM(){return h6||(h6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;for(var a in o)typeof s[a]>"u"&&(s[a]=o[a]);return s}t.exports=e.default,t.exports.default=e.default})(Gm,Gm.exports)),Gm.exports}var _6;function DY(){return _6||(_6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=o(hv()),s=o(CM());function o(l){return l&&l.__esModule?l:{default:l}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function i(l,c){(0,n.default)(l),c=(0,s.default)(c,a),c.allow_trailing_dot&&l[l.length-1]==="."&&(l=l.substring(0,l.length-1)),c.allow_wildcard===!0&&l.indexOf("*.")===0&&(l=l.substring(2));var d=l.split("."),u=d[d.length-1];return c.require_tld&&(d.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(u)||/\s/.test(u))||!c.allow_numeric_tld&&/^\d+$/.test(u)?!1:d.every(function(f){return!(f.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(f)||/[\uff01-\uff5e]/.test(f)||/^-|-$/.test(f)||!c.allow_underscores&&/_/.test(f))})}t.exports=e.default,t.exports.default=e.default})(Hm,Hm.exports)),Hm.exports}var Wm={exports:{}},x6;function FY(){return x6||(x6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=s(hv());function s(f){return f&&f.__esModule?f:{default:f}}function o(f){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},o(f)}var a="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(a,"[.]){3}").concat(a),l=new RegExp("^".concat(i,"$")),c="(?:[0-9a-fA-F]{1,4})",d=new RegExp("^("+"(?:".concat(c,":){7}(?:").concat(c,"|:)|")+"(?:".concat(c,":){6}(?:").concat(i,"|:").concat(c,"|:)|")+"(?:".concat(c,":){5}(?::").concat(i,"|(:").concat(c,"){1,2}|:)|")+"(?:".concat(c,":){4}(?:(:").concat(c,"){0,1}:").concat(i,"|(:").concat(c,"){1,3}|:)|")+"(?:".concat(c,":){3}(?:(:").concat(c,"){0,2}:").concat(i,"|(:").concat(c,"){1,4}|:)|")+"(?:".concat(c,":){2}(?:(:").concat(c,"){0,3}:").concat(i,"|(:").concat(c,"){1,5}|:)|")+"(?:".concat(c,":){1}(?:(:").concat(c,"){0,4}:").concat(i,"|(:").concat(c,"){1,6}|:)|")+"(?::((?::".concat(c,"){0,5}:").concat(i,"|(?::").concat(c,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");function u(f){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,n.default)(f);var g=(o(m)==="object"?m.version:arguments[1])||"";return g?g.toString()==="4"?l.test(f):g.toString()==="6"?d.test(f):!1:u(f,{version:4})||u(f,{version:6})}t.exports=e.default,t.exports.default=e.default})(Wm,Wm.exports)),Wm.exports}var y6;function BY(){return y6||(y6=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=v;var n=c(hv()),s=c(LY()),o=c(OY()),a=c(DY()),i=c(FY()),l=c(CM());function c(y){return y&&y.__esModule?y:{default:y}}function d(y,b){return p(y)||g(y,b)||f(y,b)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(y,b){if(y){if(typeof y=="string")return m(y,b);var C={}.toString.call(y).slice(8,-1);return C==="Object"&&y.constructor&&(C=y.constructor.name),C==="Map"||C==="Set"?Array.from(y):C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C)?m(y,b):void 0}}function m(y,b){(b==null||b>y.length)&&(b=y.length);for(var C=0,S=Array(b);C<b;C++)S[C]=y[C];return S}function g(y,b){var C=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(C!=null){var S,E,k,T,M=[],A=!0,I=!1;try{if(k=(C=C.call(y)).next,b!==0)for(;!(A=(S=k.call(C)).done)&&(M.push(S.value),M.length!==b);A=!0);}catch(N){I=!0,E=N}finally{try{if(!A&&C.return!=null&&(T=C.return(),Object(T)!==T))return}finally{if(I)throw E}}return M}}function p(y){if(Array.isArray(y))return y}var h={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},x=/^\[([^\]]+)\](?::([0-9]+))?$/;function v(y,b){if((0,n.default)(y),!y||/[\s<>]/.test(y)||y.indexOf("mailto:")===0||(b=(0,l.default)(b,h),b.validate_length&&y.length>b.max_allowed_length)||!b.allow_fragments&&(0,o.default)(y,"#")||!b.allow_query_components&&((0,o.default)(y,"?")||(0,o.default)(y,"&")))return!1;var C,S,E,k,T,M,A,I;if(A=y.split("#"),y=A.shift(),A=y.split("?"),y=A.shift(),A=y.split("://"),A.length>1){if(C=A.shift().toLowerCase(),b.require_valid_protocol&&b.protocols.indexOf(C)===-1)return!1}else{if(b.require_protocol)return!1;if(y.slice(0,2)==="//"){if(!b.allow_protocol_relative_urls)return!1;A[0]=y.slice(2)}}if(y=A.join("://"),y==="")return!1;if(A=y.split("/"),y=A.shift(),y===""&&!b.require_host)return!0;if(A=y.split("@"),A.length>1){if(b.disallow_auth||A[0]===""||(S=A.shift(),S.indexOf(":")>=0&&S.split(":").length>2))return!1;var N=S.split(":"),L=d(N,2),O=L[0],D=L[1];if(O===""&&D==="")return!1}k=A.join("@"),M=null,I=null;var $=k.match(x);if($?(E="",I=$[1],M=$[2]||null):(A=k.split(":"),E=A.shift(),A.length&&(M=A.join(":"))),M!==null&&M.length>0){if(T=parseInt(M,10),!/^[0-9]+$/.test(M)||T<=0||T>65535)return!1}else if(b.require_port)return!1;return b.host_whitelist?(0,s.default)(E,b.host_whitelist):E===""&&!b.require_host?!0:!(!(0,i.default)(E)&&!(0,a.default)(E,b)&&(!I||!(0,i.default)(I,6))||(E=E||I,b.host_blacklist&&(0,s.default)(E,b.host_blacklist)))}t.exports=e.default,t.exports.default=e.default})(Bm,Bm.exports)),Bm.exports}var UY=BY();const $Y=Zn(UY);function VY(t){return(t.type==="containerDirective"||t.type==="textDirective"||t.type==="leafDirective")&&"name"in t}function SHe(t){return t.type==="containerDirective"}function wHe(t){return t.type==="code"}function kHe(t){if(t!=null)return new Date(t*1e3).toISOString()}const HY=t=>{let e=5381;for(let n=0;n<t.length;n++)e=(e<<5)+e^t.charCodeAt(n);return(e>>>0).toString(36)},EHe=t=>{try{return"".concat(t?HY(t):"")}catch(e){return""}},GY=window.location.host,WY=(t,e={})=>{const n=Object.keys(e).length?e:{utm_source:GY};try{const s=t.trim();return $Y(s,{protocols:["http","https"]})?NY(s,n):t}catch(s){return t}},THe=(t,e={},n=[])=>{const s=F4(t);return n.some(a=>a&&F4(a)===s)?WY(t,e):t},MHe=t=>{try{return he.getConversationSearchEntryUrls(t&&mt(t))}catch(e){return[]}},AHe=(t,e)=>{try{return t&&e?he.getNode(mt(t),e).message:void 0}catch(n){return}};function IHe(t){const e=t.trim();if(!e.startsWith("{"))return null;try{const n=JSON.parse(e);return!n||Array.isArray(n)||typeof n!="object"?null:zY(n)}catch(n){return null}}function zY(t){const e={};for(const[n,s]of Object.entries(t))(typeof s=="string"||typeof s=="number"||typeof s=="boolean")&&(e[n]=String(s));return e.type&&!e.variant&&(e.variant=e.type),e}function qY(t){"use no forget";hn()&&Cl().then(e=>{e.getHost().userStoppedAgentConversation(t)}).catch(()=>{})}function YY(t,e,n=!1,s=!1,o=null){"use no forget";if(!hn())return;const a=e==null?void 0:e.slice(-10).map(d=>{var u=d,{metadata:l}=u,c=we(u,["metadata"]);return c}),i=JSON.stringify({messages:a});Cl().then(l=>{l.getHost().userSentMessageInAgentConversation(t,i,n,s,o)}).catch(()=>{})}function ZY(t,e=!1){"use no forget";hn()&&Cl().then(n=>{n.getHost().agentConversationStopped(t,e)}).catch(()=>{})}function KY(t){"use no forget";return hn()?Cl().then(e=>e.getHost().getAgentStatus(t)):Promise.resolve("stopped")}function QY(t,e,n,s,o=!1,a=void 0,i={},l=void 0){const c=U(w({client_thread_id:String(t),client_initiated:e,reason:n,is_agent_hint_enabled:a},i),{has_stop_conduit_token:l});if(!(a||s))return;if(o&&a!==void 0&&a!==s){const u=s?"from_agent_to_non_agent":"from_non_agent_to_agent",f="conversation.transition_".concat(u);Fe.addAction(f,U(w({},c),{action_type:"abort_completion"})),B.logEventWithStatsig("Agent Conversation Transition","chatgpt_agent_conversation_transition",U(w({},c),{action_type:"abort_completion"}))}Ie.count(je.DEFAULT,"chatgpt_web_conversation_stop",[{key:"has_stop_conduit_token",value:l?"true":"false"},{key:"stop_reason",value:n}]),s&&(Fe.addAction("conversation.stop_attempted",U(w({},c),{is_last_turn_agent:!0})),B.logEventWithStatsig("Agent Conversation Stop","chatgpt_agent_conversation_stop",w({},c)))}async function Hh(t,e=he.getRequestId(mt(t)),{clientInitiated:n=!1,reason:s="other",isLastTurnAgent:o=void 0,hasAgentSystemHint:a=void 0}={}){var T,M,A,I;const i=F$(e),l=_s(),c=mt(t),d=jt(t),u=uv(l,t),f=(u==null?void 0:u.value)===Xt.REALTIME,m=(u==null?void 0:u.value)===Xt.STREAMING,g=he.getCurrentNode(c),p=(T=c==null?void 0:c.stopConduitToken)!=null?T:null,h=p!==null,v=(()=>{const N=g==null?void 0:g.message;return N?B$(N):!1})(),y=m&&((I=(A=(M=g==null?void 0:g.message)==null?void 0:M.metadata)==null?void 0:A.model_slug)==null?void 0:I.endsWith("-pro")),b=m&&n,C=ve(l,"877631007");if(!i&&!f&&!y&&!b)return;Ze(t,N=>{N.interruptionInProgress=!0});const S=()=>{var D,$,H;const L=(c?he.getLastMessageSystemHints(c):[]).includes(Pe.Agent),O=!!((H=($=(D=he.getCurrentNode(c))==null?void 0:D.message)==null?void 0:$.metadata)!=null&&H.n7jupd_message);return L||O},E=o!=null?o:S();E&&d&&qY(d);let k;if(d&&ve(l,"3922476776")){const L=w({requestBody:{conversation_id:d,exclude_async_types:C?["pro_mode"]:[]},authOption:sn.SendIfAvailable},p?{additionalHeaders:{"x-conduit-token":p}}:{});k=await ge.safePost("/stop_conversation",L),p&&Ze(t,O=>{O.stopConduitToken=null});try{QY(t,n,s,E,!0,a,{},h)}catch(O){Qs.error("Error logging abort completion attempt for analytics",{error:O})}}return i&&!v&&Tg.abortRequest(e),Ze(t,N=>{N.interruptionInProgress=!1}),k}const nd=new Set,JY=(t,e=()=>!0)=>{const n={callback:t,shouldBlock:e};return nd.add(n),()=>nd.delete(n)},jHe=(t,e=()=>!0)=>{_.useEffect(()=>{const n={callback:t,shouldBlock:e};return nd.add(n),()=>{nd.delete(n)}},[t,e])},XY=()=>Array.from(nd).some(t=>t.shouldBlock()),eZ=()=>Promise.allSettled(Array.from(nd).filter(t=>t.shouldBlock()).map(t=>t.callback()));class tZ{constructor(){J(this,"completionStartTime",Date.now());J(this,"completionEndTime");J(this,"blurDuringCompletionTime");J(this,"refocusTime");J(this,"logFocusAfterBlurDuringCompletionEvent",()=>{qe.logEvent("chatgpt_focus_after_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)}),B.logEvent("Focus After Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)})});J(this,"onWindowBlur",()=>{this.blurDuringCompletionTime===void 0&&(this.blurDuringCompletionTime=Date.now(),window.addEventListener("focus",this.onWindowFocusAfterBlur))});J(this,"onWindowFocusAfterBlur",()=>{this.refocusTime=Date.now(),this.completionEndTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent(),this.cleanupFocusAfterBlurListener()});J(this,"cleanupFocusAfterBlurListener",()=>{window.removeEventListener("focus",this.onWindowFocusAfterBlur)});J(this,"onMessageError",()=>{window.removeEventListener("blur",this.onWindowBlur)});J(this,"onMessageDone",()=>{window.removeEventListener("blur",this.onWindowBlur),this.blurDuringCompletionTime!==void 0&&(this.completionEndTime=Date.now(),qe.logEvent("chatgpt_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),B.logEvent("Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),this.refocusTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent())});window.addEventListener("blur",this.onWindowBlur)}}const sx=new Set,SM=t=>{_.useEffect(()=>(sx.add(t),()=>{sx.delete(t)}),[t])},v6=t=>{for(const e of sx)try{e({error:t})}catch(n){Fe.addError(n)}},Nd=Ft(()=>({messagesDevData:{},activeNodeId:void 0,ui:{focusedNodeId:void 0}})),nZ=()=>Nd.getState().ui.focusedNodeId,Pd=()=>Nd.getState().messagesDevData;function NHe(t){const e=Object.keys(Pd()),n=e.indexOf(t);if(n===-1)throw new Error("Key not found in object");const s=(n+1)%e.length;return e[s]}function PHe(t){const e=Object.keys(Pd()),n=e.indexOf(t);if(n===-1)throw new Error("Key not found in object");const s=(n-1+e.length)%e.length;return e[s]}function RHe(t){return Object.keys(Pd()).indexOf(t)}const LHe=()=>Object.keys(Pd()).length;var p_,b6;function sZ(){if(b6)return p_;b6=1;function t(e,n){for(var s,o=-1,a=e.length;++o<a;){var i=n(e[o]);i!==void 0&&(s=s===void 0?i:s+i)}return s}return p_=t,p_}var h_,C6;function oZ(){if(C6)return h_;C6=1;var t=sZ(),e=NaN;function n(s,o){var a=s==null?0:s.length;return a?t(s,o)/a:e}return h_=n,h_}var __,S6;function aZ(){if(S6)return __;S6=1;var t=oZ(),e=ah();function n(s){return t(s,e)}return __=n,__}var rZ=aZ();const iZ=Zn(rZ);function lZ(t){return t.length===0?null:t.reduce((n,s)=>n+s,0)/t.length}function cZ(t){const e=t.length;if(e===0)return 0;const n=lZ(t)||0,s=t.reduce((o,a)=>o+Math.pow(a-n,2),0)/e;return Math.sqrt(s)}function w6(t,e){const n=t.slice().sort((l,c)=>l-c),s=e*(n.length-1),o=Math.floor(s),a=Math.ceil(s);if(o===a)return n[o];const i=s-o;return(1-i)*n[o]+i*n[a]}function dZ(t){if(t.length===0)return null;const e=t.slice().sort((s,o)=>s-o),n=Math.floor(e.length/2);return e.length%2===0?(e[n-1]+e[n])/2:e[n]}var Po=(t=>(t.FirstTokenLatency="first_token_lat",t.TotalRequestTime="total_request_time",t.TokenCount="token_count",t.StdDevTokenLatency="std_dev_token_lat",t.MeanTokenLatency="mean_token_lat",t.MedianTokenLatency="median_token_lat",t.MinTokenLatency="min_token_lat",t.MaxTokenLatency="max_token_lat",t.P95TokenLatency="p95_token_lat",t.P99TokenLatency="p99_token_lat",t))(Po||{});const wM=t=>{var m;const e=t.filter(g=>g.requestCount>1);let n=0;for(let g=0;g<t.length;g++){const p=t[g];if(n=p.requestDuration,p.content!=="")break}const s=w6(e.map(g=>g.lastTokenDuration),.95),o=w6(e.map(g=>g.lastTokenDuration),.99),a=iZ(e.map(g=>g.lastTokenDuration)),i=dZ(e.map(g=>g.lastTokenDuration)),l=e.filter(g=>g.lastTokenDuration!==0).reduce((g,p)=>Math.min(g,p.lastTokenDuration),1/0),c=e.reduce((g,p)=>Math.max(g,p.lastTokenDuration),-1/0),d=cZ(e.map(g=>g.lastTokenDuration)),u=(m=t[t.length-1])==null?void 0:m.requestDuration;return[{id:"first_token_lat",name:"First Token lat.",stat:n>0?"".concat(n.toFixed(2),"ms"):null,value:n>0?n:null,category:"summary"},{id:"total_request_time",name:"Total request time",stat:u?"".concat((u/1e3).toFixed(2),"s"):null,value:u||null,category:"summary"},{id:"token_count",name:"Token count",stat:"".concat(t.length),value:t.length,category:"summary"},{id:"std_dev_token_lat",name:"Std dev Token lat.",stat:"".concat(d.toFixed(2)),value:d,category:"token"},{id:"mean_token_lat",name:"Mean Token lat.",stat:a?"".concat(a.toFixed(2),"ms"):null,value:a!=null?a:null,category:"aggregate"},{id:"median_token_lat",name:"Median Token lat.",stat:i?"".concat(i.toFixed(2),"ms"):null,value:i!=null?i:null,category:"token"},{id:"min_token_lat",name:"Min Token lat.",stat:"".concat(l.toFixed(2),"ms"),value:l!=null?l:null,category:"token"},{id:"max_token_lat",name:"Max Token lat.",stat:"".concat(c.toFixed(2),"ms"),value:c!=null?c:null,category:"token"},{id:"p95_token_lat",name:"p95 Token lat.",stat:s?"".concat(s.toFixed(2),"ms"):null,value:s!=null?s:null,category:"aggregate"},{id:"p99_token_lat",name:"p99 Token lat.",stat:o?"".concat(o.toFixed(2),"ms"):null,value:o!=null?o:null,category:"aggregate"}]},OHe=()=>{var a;const t=Pd(),e=nZ();if(!t||!e)return{stats:[],targetLatencyData:[]};const n=t[e],s=(a=n==null?void 0:n.data)!=null?a:[];return{stats:wM(s),targetLatencyData:s}},uZ=(t,e,n,s)=>{Nd.setState(o=>{const a={focusedNodeId:t},i={status:"active",data:[],model:e,serverRequestId:n,preflightTime:s};return U(w({},o),{activeNodeId:t,ui:a,messagesDevData:U(w({},o.messagesDevData),{[t]:i})})})},fZ=(t,e,n)=>{const s=n==null?void 0:n.search_source;Nd.setState(o=>{var i;const a=o.messagesDevData[t];return U(w({},o),{activeNodeId:t,messagesDevData:U(w({},o.messagesDevData),{[t]:U(w({},a),{data:[...(i=a==null?void 0:a.data)!=null?i:[],e],searchSource:s})})})})},aa=(t,e)=>{var n;return(n=e.find(s=>s.id===t))==null?void 0:n.value},mZ=t=>{var c;if(!tt(_s()))return;const n=Pd()[t],s=wM(n.data),{preflightTime:o,model:a,serverRequestId:i,searchSource:l}=n;return ge.safePost("/lat/r",{requestBody:{server_request_id:i,model:a,preflight_time_ms:o,search_source:l,count_tokens:(c=aa(Po.TokenCount,s))!=null?c:0,ts_first_token_ms:aa(Po.FirstTokenLatency,s),ts_max_token_time_ms:aa(Po.MaxTokenLatency,s),ts_mean_token_without_first_ms:aa(Po.MeanTokenLatency,s),ts_median_token_without_first_ms:aa(Po.MedianTokenLatency,s),ts_min_token_time_ms:aa(Po.MinTokenLatency,s),ts_p95_token_without_first_ms:aa(Po.P95TokenLatency,s),ts_p99_token_without_first_ms:aa(Po.P99TokenLatency,s),ts_std_dev_token_ms:aa(Po.StdDevTokenLatency,s),ts_total_request_ms:aa(Po.TotalRequestTime,s)}})},gZ=t=>Nd.setState(e=>{const n=U(w({},e.messagesDevData[t]),{status:"finished"});return U(w({},e),{messagesDevData:U(w({},e.messagesDevData),{[t]:n})})}),DHe=t=>Nd.setState(e=>U(w({},e),{ui:U(w({},e.ui),{focusedNodeId:t})}));class pZ{constructor(e,n){J(this,"requestLastTokenTime");J(this,"requestCount",0);J(this,"requestTimes",[]);this.requestLatencyId=e,this.requestStartTime=n,this.requestLastTokenTime=n}onResponse(e,n,s){const o=performance.now(),a=o-this.requestLastTokenTime,i=o-this.requestStartTime;this.requestLastTokenTime=o,this.requestCount+=1;const l={requestCount:this.requestCount,requestDuration:i,lastTokenDuration:Number(JSON.stringify(a)),messageType:n.content.content_type,content:Zg(n)?yo(n):""};this.requestTimes.push(l),e.type==="message"?fZ(this.requestLatencyId,l,n.metadata):e.type==="done"&&s!=null&&(gZ(this.requestLatencyId),mZ(this.requestLatencyId))}}const kM=(t,e)=>{const{isCompletion:n,messageId:s,conversationId:o,flagged:a,blocked:i,disclaimers:l,metadata:c,shouldDisableConversation:d}=t,u=!!(l!=null&&l.length);Ze(e,f=>{cn.updateTree(f,m=>{var x,v,y;const g=m.messageIdToNodeId(s);i&&m.clearNodeMessageParts(g);const p=(x=c==null?void 0:c.model_incompatibility)!=null?x:!1,h=(v=c==null?void 0:c.safety_limited)!=null?v:!1;m.updateNodeMetadata(g,U(w(w(w(w({},(y=u&&!!(l!=null&&l.length)&&H$(l,i))!=null?y:{}),a&&V$),i&&$$({isSafetyLimited:h,shouldDisableConversation:d,isModelIncompatibility:p})),d&&U$),{completionSampleFinishTime:Date.now()}))})}),B.logEvent(n?i?"Moderation: Completion Content Blocked":"Moderation: Completion Content Flagged":i?"Moderation: Prompt Content Blocked":"Moderation: Prompt Content Flagged",{threadId:o,id:s})},k6={base_config:void 0,eval_preset:void 0,sonicberry_model_ids:void 0,settings_overrides:void 0,dump_sub_conversation:void 0};function Gh(){let t;try{const e=gs.getCookie(ps.InternalSearchSettings);t=e?JSON.parse(e):k6}catch(e){t=k6}return G$(t,e=>!!e)}const EM=(t=_s(),e=!1)=>{var n;return tt(t)?((n=st(t))==null?void 0:n.planType)===Ye.FREE?ze(t,"3178812292",{disableExposureLog:e}):ze(t,"3703416703",{disableExposureLog:e}):ze(t,"2861477803",{disableExposureLog:e})},hZ=(t=_s())=>{const e=xd().fConversationEndpoint;return e==="convo2"?!0:e==="convo1"?!1:ve(t,"4154476537")?!0:EM(t,!0).get("use_f_prepare",!1)},Wh=(t=_s(),e=!1)=>{const n=xd().fConversationEndpoint;return n==="convo2"?!0:n==="convo1"?!1:ve(t,"4154476537")?!0:EM(t,e).get("use_f_convo",!1)},_Z=()=>{var t;return(t=Gh().fast_search)!=null?t:!1},_v=(t=_s())=>ve(t,"2881402514");function E6(t,e){Vy.setState(n=>{const s=n.threads[t];if(s)s.prepareRequestBlocked=e,e||(s.lastCompletionFinishedTimestamp=performance.now());else{const o=jt(t);if(o){const a=n.threads[o];a&&(a.prepareRequestBlocked=e,e||(a.lastCompletionFinishedTimestamp=performance.now()))}}})}function xv(t,e,n,s){Ze(e,o=>{o.title=n,o.titleSource=s}),ai.publish({kind:"updateThreadTitle",conversationId:e}),W$(t,e,n)}function TM(t){window.history.pushState({},"",t)}function yv(t,e,n,s,o,a){var u;const i=mt(n),l=he.getGizmoId(i),d=(u=new URLSearchParams(window.location.search).get(G2))!=null?u:void 0;if(l!=null)z$(e,l).then(f=>{if(s){const m=f.gizmo;t($o(n,{project:m,superWidgetTab:d}));return}TM($o(n,{gizmo:f,superWidgetTab:d}))}).catch(f=>{Fe.addError(f),t($o(n,{superWidgetTab:d}))});else{const f=$o(n,{superWidgetTab:d});xZ(t)?t(f,{replace:a}):t(f)}}function xZ(t){return t!==TM}const MM={[Vo.LoggedIn]:Ue.LoggedInUserMessageCount,[Vo.LoggedOut]:Ue.NoAuthUserMessageCount},zh=Ft(Mn(()=>({messageCountByAuthStatus:{[Vo.LoggedIn]:T6(Vo.LoggedIn),[Vo.LoggedOut]:T6(Vo.LoggedOut)}})));function AM(t){return t.messageCountByAuthStatus[Vo.LoggedOut]}function yZ(t){return t.messageCountByAuthStatus[Vo.LoggedIn]}const vZ={incrementUserMessageCount:t=>{zh.setState(e=>{const n=e.messageCountByAuthStatus[t]+1;e.messageCountByAuthStatus[t]=n,bZ({authStatus:t,messageCount:n})})}};function T6(t){const e=localStorage.getItem(MM[t]);return e?Number(e):0}function bZ({authStatus:t,messageCount:e}){localStorage.setItem(MM[t],String(e))}var ca=(t=>(t.Unavailable="unavailable",t.Thinking="thinking",t.Generating="generating",t.AsyncGenerating="async_generating",t.AsyncHanging="async_hanging",t.Complete="complete",t.Errored="errored",t.Empty="empty",t))(ca||{});const CZ=["generating","async_generating","async_hanging","thinking"],SZ="sj1i4kz",ll="".concat(Nn.T2UAY3K,".").concat(SZ);function qh(t){return t.author.role==="tool"&&t.author.name===ll&&t.content.content_type===ut.MultimodalText}function wZ(t,{skipSort:e}={skipSort:!1}){let n=t.filter(a=>{var i;return qh(a)&&!((i=a.metadata)!=null&&i.is_visually_hidden_from_conversation)});e||(n=[...n].sort((a,i)=>{var l,c,d,u;return((c=(l=a.metadata)==null?void 0:l.generation_index)!=null?c:0)-((u=(d=i.metadata)==null?void 0:d.generation_index)!=null?u:0)}));const s=n.flatMap(a=>mr.getImageAssetPointers(a)),o=n.map(a=>a.id);return{imageAssetPointers:s,messageIds:o}}const IM=(t,e)=>{var h,x,v,y,b;const n=t.find(C=>{var S;return C.author.role===Ke.Tool&&[ut.Error,ut.SystemError].includes(C.content.content_type)||((S=C.metadata)==null?void 0:S.is_error)}),{imageAssetPointers:s}=wZ(t),o=s.length>0,i=t.some(C=>qh(C))&&!o,l=t.some(C=>{var T,M;if((T=C.metadata)!=null&&T.image_gen_async)return!1;const S=C.author.name===Nn.IMAGE_GEN_HALLUCINATED||C.author.name===ll,E=C.content.content_type===ut.Text,k=!!((M=C.metadata)!=null&&M.is_visually_hidden_from_conversation);return S&&E&&k}),c=t.length>0&&!!((x=(h=t[t.length-1])==null?void 0:h.metadata)!=null&&x.image_gen_async),u=!t.some(C=>{var S;return[ll,Nn.IMAGE_GEN_HALLUCINATED].includes((S=C.author.name)!=null?S:"")&&C.content.content_type===ut.MultimodalText})&&t.some(C=>{var k;const S=[ll,Nn.IMAGE_GEN_HALLUCINATED].includes((k=C.author.name)!=null?k:""),E=C.recipient==="assistant";return S&&E});let f=0;for(const C of s){const S=C.height,E=(b=(y=(v=C.metadata)==null?void 0:v.generation)==null?void 0:y.height)!=null?b:void 0;f+=S!==void 0&&E!==void 0?E/S:0}const m=s.length>0?f/s.length:0,g=n!==void 0,p=e?ca.AsyncGenerating:ca.AsyncHanging;if(i||l||u)return ca.Empty;if(g)return ca.Errored;if(m){if(m<1)return c?p:ca.Generating;if(m===1)return ca.Complete}else return c?p:ca.Thinking;return ca.Unavailable},kZ=t=>IM([t],!0)===ca.Complete,EZ=t=>t.author.role===Ke.Assistant&&t.recipient===ll;function FHe(t){return(t.author.name===ll||EZ(t))&&CZ.includes(IM([t],!0))}const TZ=R(()=>P(()=>import("./mub8z62y3ne5qedg.js"),__vite__mapDeps([2,1])),{loading:t=>F(t)}),MZ=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)}),AZ=R(()=>P(()=>import("./iifma3hmntnz93d1.js"),__vite__mapDeps([4,1])),{loading:t=>F(t)});function IZ(t){"use forget";const e=W.c(29),{onClose:n,effect:s}=t,o=re(FZ),a=_.useRef(!1);let i,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{a.current||(a.current=!0,B.logEvent("SMHRK Intervention: Helpline Modal Opened",{}))},l=[],e[0]=i,e[1]=l):(i=e[0],l=e[1]),_.useEffect(i,l);const c=DZ;let d;if(e[2]!==s.text){const E=s.text.split(/\n+/).map(OZ);d=[];let k=null;for(const T of E){const M=T.match(/^[-]\s+(.*)$/);M?(k==null&&(k=[]),k.push(M[1])):(k&&(d.push({type:"ul",content:k}),k=null),T&&d.push({type:"p",content:[T]}))}if(k){let T;e[4]!==k?(T={type:"ul",content:k},e[4]=k,e[5]=T):T=e[5],d.push(T)}e[2]=s.text,e[3]=d}else d=e[3];const u=d;let f;e[6]!==n?(f=()=>{ge.safePost("/sentinel/modal_ack",{authOption:sn.SendIfAvailable}).catch(LZ),n()},e[6]=n,e[7]=f):f=e[7];const m=f,g=s.title;let p;e[8]!==u?(p=r.jsx("div",{className:"text-token-text-secondary space-y-3",children:u.map(PZ)}),e[8]=u,e[9]=p):p=e[9];let h;if(e[10]!==s.helplines||e[11]!==o){let E;e[13]!==o?(E=(k,T)=>{var M,A;return r.jsxs("div",{className:"border-token-border-heavy rounded-lg border p-4",children:[r.jsx("div",{className:"text-base font-semibold",children:k.name}),k.description?r.jsx("div",{className:"text-token-text-secondary mt-1 text-sm",children:k.description}):null,r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(A=o?k.links:(M=k.links)==null?void 0:M.filter(NZ))==null?void 0:A.map((I,N)=>r.jsxs(ye,{as:"a",to:BZ(I.kind,I.href),openNewTab:I.kind==="url"||I.kind==="chat",color:I.kind==="call"?"secondary":"ghost",className:I.kind==="call"?void 0:"border-token-border-heavy border",size:"small",label:I.label,onClick:()=>c(k.name,I.href,I.kind),children:[UZ(I.kind),I.label]},N))})]},T)},e[13]=o,e[14]=E):E=e[14],h=s.helplines.map(E),e[10]=s.helplines,e[11]=o,e[12]=h}else h=e[12];let x;e[15]!==h?(x=r.jsx("div",{className:"flex flex-col gap-4",children:h}),e[15]=h,e[16]=x):x=e[16];let v;e[17]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("div",{className:"text-token-text-tertiary mt-1 text-xs",children:r.jsx(j,U(w({},M6.disclaimer),{values:{link:jZ}}))}),e[17]=v):v=e[17];let y;e[18]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(j,w({},M6.close)),e[18]=y):y=e[18];let b;e[19]!==m?(b=r.jsx("div",{className:"mt-2 flex justify-end",children:r.jsx(ye,{as:"button",color:"primary-inverse",onClick:m,size:"large",children:y})}),e[19]=m,e[20]=b):b=e[20];let C;e[21]!==b||e[22]!==p||e[23]!==x?(C=r.jsxs("div",{className:"flex flex-col gap-4 px-6 ps-6 pt-4 pb-6",children:[p,x,v,b]}),e[21]=b,e[22]=p,e[23]=x,e[24]=C):C=e[24];let S;return e[25]!==s.title||e[26]!==n||e[27]!==C?(S=r.jsx(Mt,{testId:"modal-crisis-helpline",isOpen:!0,onClose:n,title:g,showCloseButton:!1,noPadding:!0,position:"center",size:"custom",className:"max-w-[640px]",headerClassName:"ps-6 pe-6 pt-6 pb-0",shouldIgnoreClickOutside:!0,children:C}),e[25]=s.title,e[26]=n,e[27]=C,e[28]=S):S=e[28],S}function jZ(t){return r.jsx("a",{href:"https://help.openai.com/en/articles/12315645",target:"_blank",rel:"noreferrer",className:"underline",children:t})}function NZ(t){return t.kind!=="call"&&t.kind!=="text"}function PZ(t,e){return t.type==="p"?r.jsx("p",{className:"text-pretty",children:t.content[0]},"p-".concat(e)):r.jsx("ul",{className:"list-disc space-y-2 ps-5",children:t.content.map(RZ)},"ul-".concat(e))}function RZ(t,e){return r.jsx("li",{children:t},e)}function LZ(){}function OZ(t){return t.trim()}function DZ(t,e,n){B.logEvent("SMHRK Intervention: Helpline Modal Button Clicked",{helplineName:t,linkHref:e,linkKind:n})}function FZ(){return YE()}function BZ(t,e){switch(t){case"call":return e.startsWith("tel:")?e:"tel:".concat(e);case"text":return e.startsWith("sms:")?e:"sms:".concat(e);default:return e}}const M6=Se({close:{id:"crisisHelplineModal.close",defaultMessage:"Close"},disclaimer:{id:"crisisHelplineModal.disclaimer",defaultMessage:"Services unaffiliated with ChatGPT"}});function UZ(t){const e=t==="call"?TZ:t==="text"||t==="chat"?AZ:MZ;return r.jsx(e,{className:"icon-sm me-1","aria-label":""})}const jM=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10ZM17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10Z"}),_.createElement("path",{d:"M10.0002 8.5C10.8285 8.50022 11.5002 9.17171 11.5002 10C11.5002 10.8283 10.8285 11.4998 10.0002 11.5C8.50014 11.4999 5.00025 10.5 5.00025 10C5.00025 9.50002 8.50014 8.50009 10.0002 8.5Z"}),_.createElement("path",{d:"M12.0833 0.00488281C12.4504 0.00505872 12.7483 0.302761 12.7483 0.669922C12.7483 1.03708 12.4504 1.33479 12.0833 1.33496H7.91626C7.54922 1.3347 7.25122 1.03703 7.25122 0.669922C7.25122 0.302814 7.54922 0.00514505 7.91626 0.00488281H12.0833Z"})),BHe=Object.freeze(Object.defineProperty({__proto__:null,default:jM},Symbol.toStringTag,{value:"Module"})),NM=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10ZM17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10Z"}),_.createElement("path",{d:"M7.5 5.66992C7.93301 5.41993 10.5488 7.95095 11.2988 9.25C11.713 9.96741 11.4674 10.8846 10.75 11.2988C10.0326 11.713 9.11542 11.4673 8.70117 10.75C7.95118 9.45097 7.06701 5.91997 7.5 5.66992Z"}),_.createElement("path",{d:"M12.084 0.00488281C12.451 0.00519055 12.749 0.302842 12.749 0.669922C12.749 1.037 12.451 1.33465 12.084 1.33496H7.91699C7.54972 1.33496 7.25195 1.03719 7.25195 0.669922C7.25195 0.302653 7.54972 0.00488281 7.91699 0.00488281H12.084Z"})),UHe=Object.freeze(Object.defineProperty({__proto__:null,default:NM},Symbol.toStringTag,{value:"Module"})),PM=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.585 9.99998C16.585 6.36319 13.6368 3.41502 10 3.41502C6.3632 3.41502 3.41504 6.36319 3.41504 9.99998C3.41504 13.6368 6.3632 16.5849 10 16.5849C13.6368 16.5849 16.585 13.6368 16.585 9.99998ZM17.915 9.99998C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 9.99998C2.08496 5.62865 5.62867 2.08494 10 2.08494C14.3713 2.08494 17.915 5.62865 17.915 9.99998Z"}),_.createElement("path",{d:"M12.0837 0.00494385C12.4509 0.00511975 12.7488 0.302822 12.7488 0.669983C12.7488 1.03714 12.4509 1.33485 12.0837 1.33502H7.91675C7.54948 1.33502 7.25171 1.03725 7.25171 0.669983C7.25171 0.302714 7.54948 0.00494385 7.91675 0.00494385H12.0837Z"}),_.createElement("path",{d:"M11.2992 10.75C10.8849 11.4675 9.96756 11.7133 9.25012 11.2991C8.53268 10.8849 8.28687 9.96747 8.70108 9.25003C9.45108 7.95099 12.0671 5.4199 12.5001 5.6699C12.9331 5.9199 12.0492 9.45099 11.2992 10.75Z"})),$He=Object.freeze(Object.defineProperty({__proto__:null,default:PM},Symbol.toStringTag,{value:"Module"})),RM=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},t),_.createElement("path",{d:"M16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10ZM17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10Z"}),_.createElement("path",{d:"M8.70117 9.25C9.1154 8.5326 10.0326 8.28697 10.75 8.70117C12.049 9.45122 14.5799 12.0669 14.3301 12.5C14.0796 12.9328 10.549 12.0488 9.25 11.2988C8.53268 10.8846 8.28699 9.96739 8.70117 9.25Z"}),_.createElement("path",{d:"M12.084 0.00488281C12.451 0.00519055 12.749 0.302842 12.749 0.669922C12.749 1.037 12.451 1.33465 12.084 1.33496H7.91699C7.54972 1.33496 7.25195 1.03719 7.25195 0.669922C7.25195 0.302653 7.54972 0.00488281 7.91699 0.00488281H12.084Z"})),VHe=Object.freeze(Object.defineProperty({__proto__:null,default:RM},Symbol.toStringTag,{value:"Module"})),$Z=R(()=>P(()=>import("./botnj7o5rl1ee15s.js"),__vite__mapDeps([5,1])),{loading:t=>F(t)}),VZ=R(()=>P(()=>import("./gaunkv18ohhvhjng.js"),__vite__mapDeps([6,1])),{loading:t=>F(t)}),HZ=R(()=>P(()=>import("./gq8l7wp47kwsw73q.js"),__vite__mapDeps([7,1])),{loading:t=>F(t)}),GZ=R(()=>P(()=>import("./khdnnj3rabf7bdgv.js"),__vite__mapDeps([8,1])),{loading:t=>F(t)}),A6="gpt-5-thinking",WZ=t=>{const e=st(t);return e!=null&&e.isPro()||e!=null&&e.isEnterprise()?["min","standard","extended","max"]:["standard","extended"]},zZ=(t,e)=>{B.logEventWithStatsig("ChatGPT Composer Thinking Effort Changed","chatgpt_composer_thinking_effort_changed",{effort:e,model:t})};function LM(t,e){switch(e){case"min":return{filledIcon:PM,progressIcon:VZ,fullLabel:t.formatMessage({id:"kogr4P",defaultMessage:"Light thinking"}),shortLabel:t.formatMessage({id:"oHA6pi",defaultMessage:"Light"}),description:t.formatMessage({id:"IXCwXJ",defaultMessage:"Quick, thoughtful answers"})};case"standard":return{filledIcon:RM,progressIcon:$Z,fullLabel:t.formatMessage({id:"SF0DXJ",defaultMessage:"Standard thinking"}),shortLabel:t.formatMessage({id:"LvLUFd",defaultMessage:"Standard"}),description:t.formatMessage({id:"KBwMuT",defaultMessage:"Balanced thinking and speed"})};case"extended":return{filledIcon:jM,progressIcon:GZ,fullLabel:t.formatMessage({id:"ZdXWiu",defaultMessage:"Extended thinking"}),shortLabel:t.formatMessage({id:"8yC7rt",defaultMessage:"Extended"}),description:t.formatMessage({id:"UvHF8K",defaultMessage:"Thinks longer for complex questions"})};case"max":return{filledIcon:NM,progressIcon:HZ,fullLabel:t.formatMessage({id:"WQe8sQ",defaultMessage:"Heavy thinking"}),shortLabel:t.formatMessage({id:"ZCryku",defaultMessage:"Heavy"}),description:t.formatMessage({id:"uTE58+",defaultMessage:"Even longer analysis for harder questions"})}}}const qZ=["notificationSettings"];class YZ{static async getOrCreateSubscription({endpoint:e,p256dh:n,auth:s}){return ge.safePost("/notifications/subscription/register",{requestBody:{platform:"web",web_metadata:{endpoint:e,p256dh:n},token:s}})}static async deregisterSubscription({token:e}){const n={token:e,platform:"web"};return ge.safeDelete("/notifications/subscription/deregister",{requestBody:n})}static async getSettings(){return ge.safeGet("/notifications/settings")}static async updateSettings(e){const o=e,{category:n}=o,s=we(o,["category"]);return ge.safePatch("/notifications/settings",{requestBody:{updates:{[n]:s}}})}}const ZZ=1e4,vv=Ft(Mn(()=>({notifications:[]}))),lf=t=>{var s;const e=crypto.randomUUID();vv.setState(o=>{o.notifications.push(U(w({},t),{id:e}))});const n=(s=t.timeout)!=null?s:ZZ;setTimeout(()=>{bv(e)},n)},bv=t=>{vv.setState(e=>{e.notifications=e.notifications.filter(n=>n.id!==t)})},HHe=({onSuccess:t,alwaysRefetchOnMount:e=!1})=>rt({queryKey:qZ,queryFn:async()=>{const s=(await YZ.getSettings()).settings;return t==null||t(s),s},refetchOnMount:e?"always":!0});function KZ(t,e){if(t.length<=e)return t;const n=t.slice(0,Math.min(t.length,e+20)),s=n.lastIndexOf("."),o=n.lastIndexOf("!"),a=n.lastIndexOf("?"),i=Math.max(s,o,a);if(i>0&&i<=e&&i>=Math.floor(e*.4))return t.slice(0,i+1).trim()+"";const l=t.lastIndexOf(" ",e);return l>Math.floor(e*.25)?t.slice(0,l).trim()+"":t.slice(0,e).trim()+""}class QZ{constructor(e){J(this,"activeSystemHintSuggestionChips$",Be([]));this.conversation=e,this.conversation=e}addActiveSystemHintSuggestionChips(e){const n=e.filter(s=>!this.activeSystemHintSuggestionChips$().some(o=>o.systemHint===s.systemHint));n.length&&this.activeSystemHintSuggestionChips$.set(s=>[...s!=null?s:[],...n])}removeActiveSystemHintSuggestionChip(e){this.activeSystemHintSuggestionChips$.set(s=>[...(s!=null?s:[]).filter(o=>o.systemHint!==e.systemHint)]);const n=e==null?void 0:e.systemHint;n&&ge.safePost("/system_hints/suggestion_cooldown",{requestBody:{system_hint:n}})}clearActiveSystemHintSuggestionChips(){this.activeSystemHintSuggestionChips$.set([])}}const ap=Ef(t=>new QZ(t));function JZ(t){return t==null||[wt.PrimaryAssistant,wt.GizmoInteraction].includes(t.kind)}function OM(t){"use forget";const e=W.c(5),n=V();let s;e[0]!==t||e[1]!==n?(s=xt(n,t),e[0]=t,e[1]=n,e[2]=s):s=e[2];const o=s;let a;return e[3]!==o?(a=()=>DM(o),e[3]=o,e[4]=a):a=e[4],re(a)}const DM=ko(t=>St(()=>{const{ctx:e}=t,n=q$(t);if(n)switch(n.kind){case wt.PrimaryAssistant:case wt.FlyingCircusCustomization:return n;case wt.GizmoInteraction:case wt.GizmoMagicCreate:{const s=Qc(t);return U(w({},n),{gizmo:s?Z$(e,s).data:void 0})}case wt.GizmoTest:{const s=Qc(t);return U(w({},n),{gizmo:s?Y$(e,s).data:void 0})}}}));function GHe(t){return t.kind===wt.GizmoInteraction||t.kind===wt.GizmoMagicCreate||t.kind===wt.GizmoTest?t.gizmo:void 0}const XZ="gpt-4",eK="oai/apps/capExpiresAt";Ft(()=>({serverThreadIds:new Set}));function tK(){const t=Yh(o=>o.isoDate),e=Date.now(),n=t&&new Date(t).getTime(),s=t&&n&&n<=e;return _.useEffect(()=>{s&&FM()},[s]),s?null:t?XZ:null}const Yh=Ft()(ZE(()=>({isoDate:""}),{name:eK}));function nK(t){Yh.setState({isoDate:t})}function FM(){Yh.setState({isoDate:""})}const I6="atlas",sK="side_chat",oK="new_tab_page",aK=window.location.host;function BM(t){return bn(()=>mn(t)?{app_name:I6,app_surface:sK}:Ko(t)?{app_name:I6,app_surface:oK}:{app_name:aK})}const rK="https://help.openai.com/en/articles/8590148-memory-faq",Xi=80,zm=100;function iK(t){return t==="cold"?"cold":"warm"}function lK(t){return t==="user"?"user":"assistant"}function UM(t){const e=t.last_updated,n=s=>s?{actor:lK(s.actor),timestamp:s.timestamp}:null;return U(w({},t),{status:iK(t.status),last_updated:n(e)})}function rp(t){if(!(!t||t.length===0))return Array.from(t).sort()}function $M(t,e=!0,n,s,o){const a=s?void 0:rp(n),i=s?void 0:rp(o);return["memories",w(w(w({gizmoId:t,includeMemoryEntries:e},a?{contextScopes:a}:{}),i?{requiredContextScopes:i}:{}),s?{memoryEntriesFilter:s}:{})]}function Vf(t,e=!0,n=!0,s,o,a){const i=o?void 0:rp(s),l=o?void 0:rp(a);return rt({queryKey:$M(t,e,i,o,l),queryFn:async()=>{const c={gizmo_id:t,include_memory_entries:e};o?c.memory_entries_filter=o:(i&&(c.context_scopes=i),l&&(c.required_context_scopes=l));const d=await ge.safeGet("/memories",{parameters:{query:c}}),u=Math.min(Math.floor(100*d.memory_num_tokens/d.memory_max_tokens),100);return U(w({},d),{memoryFullPct:u,memories:d.memories.map(f=>UM(f))})},refetchOnMount:"always",enabled:n})}function VM(t=50){return["memory_history",{limit:t}]}function WHe(t=50,e=!0){return rt({queryKey:VM(t),queryFn:async()=>{const n=await ge.safeGet("/memories/history",{parameters:{query:{limit:t}}}),s=Array.isArray(n.history)?n.history:[];return U(w({},n),{history:s.map(o=>U(w({},o),{memories:o.memories.map(a=>UM(a))}))})},refetchOnMount:"always",enabled:e})}function Cv(t,e,n=!1){var l;const s="684023316",a=(l=ze(t,s,{disableExposureLog:!0}).get("memory_almost_full_threshold",Xi))!=null?l:Xi;if((e!=null?e:0)<a)return"control";const i=ze(t,s);return n?{threshold:a,layer:i.get("upsell_variant","control")}:i.get("upsell_variant","control")}function cK(t,e=!0){return ze(t,"684023316",{disableExposureLog:e}).get("upsell_variant","control")}const HM=(t,e)=>{window.__reactRouterDataRouter.navigate(t,e)},dK=t=>{const e=window.__reactRouterDataRouter.state.location.pathname;return I$(t,e)};let el=null;const uK=2e3,Sv=Tf(Ue.PendingSurveySpec,()=>null);function fK(){return _t.getItem(Ue.PendingSurveySpec)}function mK(t){el&&clearTimeout(el),el=setTimeout(()=>{el=null,Sv.set(t)},uK)}function GM(){Sv.set(null),el&&(clearTimeout(el),el=null)}const bc=Ft(t=>({survey:null,triggered:!1,setSurvey:e=>t({survey:e}),setTriggered:e=>t({triggered:e})}));function gK(){const{setTriggered:t}=bc.getState();t(!0)}function pK(){const t=bc(a=>a.survey),e=bc(a=>a.triggered),n=bc(a=>a.setSurvey),s=bc(a=>a.setTriggered);return _.useEffect(()=>{if(!e||t)return;const a=fK();GM(),n(a)},[t,e,n]),{survey:t,finishSurvey:()=>{n(null),s(!1)}}}function hK(){const t=bc(o=>o.setTriggered),e=re(()=>Sv()),n=Vn(),s=_.useRef(null);_.useEffect(()=>{if(typeof document<"u"&&document.visibilityState!=="visible"){t(!1);return}if(!e){t(!1);return}n.pathname==="/"&&n.key!==s.current&&(s.current=n.key,t(!0))},[n.key,n.pathname,t,e])}function j6(t){return!(t.type==="perf_stats"||t.type==="server_ste_metadata"||t.type==="message_marker")}let Yi=null;const _K="".concat(KE,".suggest_agent");async function wv(){return Yi==null&&(Yi=await K$()),Yi!=null?Yi:[]}function Ig(t){return Yi==null?!1:Yi.includes(t)}function xK(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619)>>>0;return e^=e>>>16,e=Math.imul(e,2246822507)>>>0,e^=e>>>13,e=Math.imul(e,3266489909)>>>0,e^=e>>>16,(e>>>0).toString(16).padStart(8,"0")}class yK{constructor(){J(this,"answers",new Map);J(this,"maxAttempts",5e5);J(this,"requirementsSeed",vK());J(this,"sid",os());J(this,"errorPrefix","wQ8Lk5FbGpA2NcR9dShT6gYjU7VxZ4D");J(this,"_runCheck",(e,n,s,o,a)=>{o[3]=a,o[9]=Math.round(performance.now()-e);const i=qm(o);return xK(n+i).substring(0,s.length)<=s?i+"~S":null})}async initializeAndGatherData(e){this._getAnswer(e)}async startEnforcement(e){this._getAnswer(e)}getEnforcementTokenSync(e){const n=this._getAnswer(e);return typeof n=="string"?n:null}async getEnforcementToken(e,n){return this._getAnswer(e,n==null?void 0:n.forceSync)}async getRequirementsToken(){return this.answers.has(this.requirementsSeed)||this.answers.set(this.requirementsSeed,this._generateAnswerAsync(this.requirementsSeed,"0")),"gAAAAAC"+await this.answers.get(this.requirementsSeed)}getRequirementsTokenBlocking(){return"gAAAAAC"+this._generateRequirementsTokenAnswerBlocking()}_getAnswer(e,n=!1){var l;const s="gAAAAAB";if(!((l=e==null?void 0:e.proofofwork)!=null&&l.required))return null;const{seed:o,difficulty:a}=e.proofofwork;if(!(typeof o=="string"&&typeof a=="string"))return null;const i=this.answers.get(o);if(typeof i=="string")return i;if(n){const c=this._generateAnswerSync(o,a),d=s+c;return this.answers.set(o,d),d}return this.answers.has(o)||this.answers.set(o,this._generateAnswerAsync(o,a)),Promise.resolve().then(async()=>s+await this.answers.get(o)).then(c=>(this.answers.set(o,c),c))}buildGenerateFailMessage(e){return this.errorPrefix+qm(String(e!=null?e:"e"))}_generateAnswerSync(e,n){const s=performance.now();try{const o=this.getConfig();for(let a=0;a<this.maxAttempts;a++){const i=this._runCheck(s,e,n,o,a);if(i)return i}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}async _generateAnswerAsync(e,n){const s=performance.now();try{let o=null;const a=this.getConfig();for(let i=0;i<this.maxAttempts;i++){(!o||o.timeRemaining()<=0)&&(o=await CK());const l=this._runCheck(s,e,n,a,i);if(l)return l}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}_generateRequirementsTokenAnswerBlocking(){let e="e";const n=performance.now();try{const s=this.getConfig();return s[3]=1,s[9]=Math.round(performance.now()-n),qm(s)}catch(s){e=qm(String(s))}return this.errorPrefix+e}getConfig(){var e,n,s,o;return[(screen==null?void 0:screen.width)+(screen==null?void 0:screen.height),""+new Date,(e=performance==null?void 0:performance.memory)==null?void 0:e.jsHeapSizeLimit,Math==null?void 0:Math.random(),navigator.userAgent,jg(Array.from(document.scripts).map(a=>a==null?void 0:a.src).filter(a=>a)),(s=((n=Array.from(document.scripts||[]).map(a=>{var i;return(i=a==null?void 0:a.src)==null?void 0:i.match("c/[^/]*/_")}).filter(a=>a==null?void 0:a.length)[0])!=null?n:[])[0])!=null?s:document.documentElement.getAttribute("data-build"),navigator.language,(o=navigator.languages)==null?void 0:o.join(","),Math==null?void 0:Math.random(),bK(),jg(Object.keys(document)),jg(Object.keys(window)),performance.now(),this.sid,[...new URLSearchParams(window.location.search).keys()].join(","),navigator==null?void 0:navigator.hardwareConcurrency,performance.timeOrigin]}}function jg(t){return t[Math.floor(Math.random()*t.length)]}function vK(){return""+Math.random()}function bK(){const t=jg(Object.keys(Object.getPrototypeOf(navigator)));try{return"".concat(t,"").concat(navigator[t].toString())}catch(e){return"".concat(t)}}function qm(t){return t=JSON.stringify(t),window.TextEncoder?btoa(String.fromCharCode(...new TextEncoder().encode(t))):btoa(unescape(encodeURIComponent(t)))}function CK(){return new Promise(t=>{(window.requestIdleCallback||SK)(n=>{t(n)},{timeout:10})})}function SK(t){return setTimeout(()=>{t({timeRemaining:()=>1,didTimeout:!1})},0),0}const xr=new yK,WM=new WeakMap;function ox(t,e){WM.set(t,e)}function zM(t){return WM.get(t)}const wK=0,kK=1,EK=2,qM=3,YM=4,TK=5,MK=6,AK=24,IK=7,jK=8,Js=9,NK=10,PK=11,RK=12,LK=13,OK=14,DK=15,ax=16,FK=17,BK=18,UK=19,$K=23,VK=20,HK=21,GK=22,WK=25,zK=26,qK=27,YK=28,ZK=29,ZM=30,KK=33,QK=34,Re=new Map;let Kr=0,N6=Promise.resolve();function KM(t){const e=N6.then(t,t);return N6=e.then(()=>{},()=>{}),e}async function cf(){for(;Re.get(Js).length>0;){const[t,...e]=Re.get(Js).shift(),n=Re.get(t)(...e);n&&typeof n.then=="function"&&await n,Kr++}}function JK(t){return KM(()=>new Promise((e,n)=>{let s=!1;setTimeout(()=>{s=!0,e(""+Kr)},500),Re.set(qM,o=>{s||(s=!0,e(btoa(""+o)))}),Re.set(YM,o=>{s||(s=!0,n(btoa(""+o)))}),Re.set(ZM,(o,a,i,l)=>{const c=Array.isArray(l),d=c?i:[],u=(c?l:i)||[];Re.set(o,(...f)=>{if(s)return;const g=[...Re.get(Js)];if(c)for(let p=0;p<d.length;p++){const h=d[p],x=f[p];Re.set(h,x)}return Re.set(Js,[...u]),cf().then(()=>Re.get(a)).catch(p=>""+p).finally(()=>{Re.set(Js,g)})})});try{Re.set(Js,JSON.parse(kv(atob(t),""+Re.get(ax)))),cf().catch(o=>{e(btoa(Kr+": "+o))})}catch(o){e(btoa(Kr+": "+o))}}))}function XK(t,e){return KM(()=>new Promise((n,s)=>{var i;const o=(i=zM(t!=null?t:{}))!=null?i:"";eQ(),Kr=0,Re.set(ax,o);let a=!1;setTimeout(()=>{a=!0,n(""+Kr)},500),Re.set(qM,l=>{a||(a=!0,n(btoa(""+l)))}),Re.set(YM,l=>{a||(a=!0,s(btoa(""+l)))}),Re.set(ZM,(l,c,d,u)=>{const f=Array.isArray(u),m=f?d:[],g=(f?u:d)||[];Re.set(l,(...p)=>{if(a)return;const x=[...Re.get(Js)];if(f)for(let v=0;v<m.length;v++){const y=m[v],b=p[v];Re.set(y,b)}return Re.set(Js,[...g]),cf().then(()=>Re.get(c)).catch(v=>""+v).finally(()=>{Re.set(Js,x)})})});try{Re.set(Js,JSON.parse(kv(atob(e),""+Re.get(ax)))),cf().catch(l=>{n(btoa(Kr+": "+l))})}catch(l){n(btoa(Kr+": "+l))}}))}function kv(t,e){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t.charCodeAt(s)^e.charCodeAt(s%e.length));return n}function eQ(){Re.clear(),Re.set(wK,JK),Re.set(kK,(t,e)=>Re.set(t,kv(""+Re.get(t),""+Re.get(e)))),Re.set(EK,(t,e)=>Re.set(t,e)),Re.set(TK,(t,e)=>{const n=Re.get(t);Array.isArray(n)?n.push(Re.get(e)):Re.set(t,n+Re.get(e))}),Re.set(qK,(t,e)=>{const n=Re.get(t);Array.isArray(n)?n.splice(n.indexOf(Re.get(e)),1):Re.set(t,n-Re.get(e))}),Re.set(ZK,(t,e,n)=>Re.set(t,Re.get(e)<Re.get(n))),Re.set(KK,(t,e,n)=>{const s=Number(Re.get(e)),o=Number(Re.get(n));Re.set(t,s*o)}),Re.set(MK,(t,e,n)=>Re.set(t,Re.get(e)[Re.get(n)])),Re.set(IK,(t,...e)=>Re.get(t)(...e.map(n=>Re.get(n)))),Re.set(FK,(t,e,...n)=>{try{const s=Re.get(e)(...n.map(o=>Re.get(o)));if(s&&typeof s.then=="function")return s.then(o=>{Re.set(t,o)}).catch(o=>{Re.set(t,""+o)});Re.set(t,s)}catch(s){Re.set(t,""+s)}}),Re.set(LK,(t,e,...n)=>{try{Re.get(e)(...n)}catch(s){Re.set(t,""+s)}}),Re.set(jK,(t,e)=>Re.set(t,Re.get(e))),Re.set(NK,window),Re.set(PK,(t,e)=>{var n,s;return Re.set(t,(s=((n=Array.from(document.scripts||[]).map(o=>{var a;return(a=o==null?void 0:o.src)==null?void 0:a.match(Re.get(e))}).filter(o=>o==null?void 0:o.length)[0])!=null?n:[])[0])!=null?s:null)}),Re.set(RK,t=>Re.set(t,Re)),Re.set(OK,(t,e)=>Re.set(t,JSON.parse(""+Re.get(e)))),Re.set(DK,(t,e)=>Re.set(t,JSON.stringify(Re.get(e)))),Re.set(BK,t=>Re.set(t,atob(""+Re.get(t)))),Re.set(UK,t=>Re.set(t,btoa(""+Re.get(t)))),Re.set(VK,(t,e,n,...s)=>Re.get(t)===Re.get(e)?Re.get(n)(...s):null),Re.set(HK,(t,e,n,s,...o)=>Math.abs(Re.get(t)-Re.get(e))>Re.get(n)?Re.get(s)(...o):null),Re.set($K,(t,e,...n)=>Re.get(t)!==void 0?Re.get(e)(...n):null),Re.set(AK,(t,e,n)=>Re.set(t,Re.get(e)[Re.get(n)].bind(Re.get(e)))),Re.set(QK,(t,e)=>{try{const n=Re.get(e);return Promise.resolve(n).then(s=>{Re.set(t,s)})}catch(n){return}}),Re.set(GK,(t,e)=>{const n=[...Re.get(Js)];return Re.set(Js,[...e]),cf().catch(s=>{Re.set(t,""+s)}).finally(()=>{Re.set(Js,n)})}),Re.set(YK,()=>{}),Re.set(zK,()=>{}),Re.set(WK,()=>{})}const tQ="https://challenges.cloudflare.com/turnstile/v0/api.js",nQ="chatgpt-paid",sQ="chatgpt-freeaccount",rx="chatgpt-noauth",P6={[nQ]:"0x4AAAAAAASbFNinhLLnW5f1",[sQ]:"0x4AAAAAAACPe2BTwOIpYk6H",[rx]:"0x4AAAAAAASbHVR44GU82lOI"};class ip{toString(){return JSON.stringify(this.toJSON())}}class x_ extends ip{constructor(e){super(),this.message=e,this.message=e}toJSON(){return{"Turnstile-Internal-Error":this.message}}}class oQ extends ip{constructor(e){super(),this.errorCode=e,this.errorCode=e}toJSON(){return{"Turnstile-Client-Error":this.errorCode}}}class aQ{constructor(){J(this,"app",rx);J(this,"status","idle");J(this,"turnstileInstancePromise",null);J(this,"enforcementTokenPromise",null);J(this,"enforcementTokenCache",new WeakMap);J(this,"requestStartTimeMs",0);J(this,"_onCompleted");J(this,"_onError");J(this,"dxPromiseCache",new Map)}async initializeAndGatherData(e){this._getOrCreateInstance(e)}cacheEnforcementToken(e,n){n&&this.enforcementTokenCache.set(e,n)}async _getOrCreateInstance(e){var n,s,o;return!((n=e.turnstile)!=null&&n.required)||(s=e.turnstile)!=null&&s.dx?null:(this.app!==e.persona&&(this.app=e.persona,this.turnstileInstancePromise=this._getTurnstileInstancePromise()),(o=this.turnstileInstancePromise)!=null?o:new x_("Turnstile instance not initialized."))}getEnforcementTokenSync(e){const n=this.enforcementTokenCache.get(e);return n!=null?n:null}async getEnforcementToken(e){var n;if((n=e.turnstile)!=null&&n.dx){const s=e.turnstile.dx,o=zM(e),a=o?"".concat(o,"::").concat(s):s,i=this.dxPromiseCache.get(a);if(i)return i;const c=XK(e,s).then(d=>(d&&this.enforcementTokenCache.set(e,d),d)).finally(()=>{this.dxPromiseCache.delete(a)});return this.dxPromiseCache.set(a,c),c}return this.startEnforcement(e).then(s=>(this.enforcementTokenPromise=null,s?s.toString():null))}async startEnforcement(e){var n,s;return(n=e.turnstile)!=null&&n.required?(s=e.turnstile)!=null&&s.dx?this.getEnforcementToken(e):this.enforcementTokenPromise!==null?this.enforcementTokenPromise:this.enforcementTokenPromise=this._getEnforcementToken(e):null}precomputeEnforcementToken(e){var s;const n=this.enforcementTokenCache.get(e);return n?Promise.resolve(n):(s=e.turnstile)!=null&&s.dx?this.getEnforcementToken(e):this.startEnforcement(e).then(o=>{var a;return typeof o=="string"?o:(a=o==null?void 0:o.toString())!=null?a:null})}async _getEnforcementToken(e,n){const s=await this._getOrCreateInstance(e);return s instanceof ip||s===null?s:new Promise((o,a)=>{this.setOnCompleted(i=>{const l=performance.now()-this.requestStartTimeMs;Fe.addAction("turnstile_get_token_success",{app:this.app.toString(),durationMs:l}),o(i)}),this.setOnError(i=>{if(!n)this._getEnforcementToken(e,!0).then(o,a);else{const l=performance.now()-this.requestStartTimeMs;Fe.addAction("turnstile_get_token_error",{app_release:"aa305fcfa301df38d2bd1366c6d68422a7fee6d3",error:i,app:this.app.toString(),durationMs:l}),o(new oQ(i))}}),this.setStatus("ready"),this.requestStartTimeMs=performance.now(),s.reset(),s.execute()})}setStatus(e){this.status=e}onCompleted(e){var n;(n=this._onCompleted)==null||n.call(this,e)}setOnCompleted(e){this._onCompleted=e}onError(e){var n;(n=this._onError)==null||n.call(this,e)}setOnError(e){this._onError=e}onExpired(){this.enforcementTokenPromise=null}_getTurnstileInstancePromise(e){if(this.turnstileInstancePromise!==null)if(e)this.turnstileInstancePromise.then(n=>{n instanceof ip||n.remove()}),this.turnstileInstancePromise=null;else return this.turnstileInstancePromise;return this.turnstileInstancePromise=new Promise((n,s)=>{var d,u;const o="onloadTurnstileCallback";Object.defineProperty(window,o,{value:()=>{var m;if(this.status==="ready")return;this.setStatus("script_loaded");const{turnstile:f}=window;if(f===null){this.setStatus("error"),e?(Fe.addAction("turnstile_instance_missing",{app_release:"aa305fcfa301df38d2bd1366c6d68422a7fee6d3",app:this.app.toString()}),n(new x_("Turnstile instance missing"))):this._getTurnstileInstancePromise(!0).then(n,s);return}f.render("#"+a,{sitekey:(m=P6[this.app])!=null?m:P6[rx],execution:"execute",callback:this.onCompleted.bind(this),"error-callback":this.onError.bind(this),"expired-callback":this.onExpired.bind(this)}),n(f)}});const a="cf-turnstile",i="cf-turnstile-script";(d=document.getElementById(a))==null||d.remove(),(u=document.getElementById(i))==null||u.remove();const l=document.createElement("div");l.id=a,l.hidden=!0,document.body.appendChild(l),this.setStatus("loading");const c=document.createElement("script");c.id=i,c.src=tQ+"?onload=".concat(o),c.async=!0,c.defer=!0,c.onerror=()=>{this.setStatus("error"),e?(Fe.addAction("turnstile_script_load_error",{app_release:"aa305fcfa301df38d2bd1366c6d68422a7fee6d3",app:this.app.toString()}),n(new x_("Turnstile script failed to load"))):this._getTurnstileInstancePromise(!0).then(n,s)},document.body.appendChild(c)}),this.turnstileInstancePromise}}const df=new aQ,rQ=1e3*60*9;var gc=(t=>(t.ChatRequirementsToken="OpenAI-Sentinel-Chat-Requirements-Token",t.TurnstileToken="OpenAI-Sentinel-Turnstile-Token",t.ProofToken="OpenAI-Sentinel-Proof-Token",t.Token="OpenAI-Sentinel-Token",t))(gc||{});let iQ=-1,Ws=null;const lQ="2115167980";function cQ(){try{const t=_s(),e=ve(t,lQ);return e!=null?e:!1}catch(t){return!1}}async function dQ(t){const e=await ge.safePost("/sentinel/chat-requirements",{requestBody:{p:t},authOption:sn.SendIfAvailable});return ox(e,t),e}async function uQ(t){const n=await ge.safePost("/sentinel/chat-requirements/prepare",{requestBody:{p:t},authOption:sn.SendIfAvailable}),s={token:void 0,persona:n.persona,turnstile:n.turnstile,proofofwork:n.proofofwork,force_login:n.force_login};ox(s,t);const[o,a]=await Promise.all([xr.getEnforcementToken(s,{forceSync:!0}),df.getEnforcementToken(s)]),i={prepare_token:n.prepare_token};o&&(i.proofofwork=o),a&&(i.turnstile=a);const c=await ge.safePost("/sentinel/chat-requirements/finalize",{requestBody:i,authOption:sn.SendIfAvailable});return Object.assign(s,c),s.persona=c.persona,ox(s,t),a&&df.cacheEnforcementToken(s,a),s}function fQ(){if(Ws){const{chatRequirements:t,expiration:e}=Ws;if(Date.now()>=e)return Ws=null,null;if(t)return Ws=null,t}return null}function QM(t=!1){if(Ws){const{expiration:o,chatRequirementsPromise:a}=Ws;if(Date.now()<o)try{return t||(Ws=null),a}catch(i){}else a.then(i=>Fe.addAction("chat_requirements_cache_expired",{app:i.persona.toString()}));Ws=null}const e=xr.getRequirementsTokenBlocking();let n;cQ()?n=uQ(e):n=dQ(e);const s=++iQ;return t&&(Ws={id:s,chatRequirements:null,chatRequirementsPromise:n.then(o=>((Ws==null?void 0:Ws.id)===s&&(Ws.chatRequirements=o),o)),expiration:Date.now()+rQ}),n}const mQ=window.location.origin+"/backend-api/sentinel/sdk.js",gQ="https://sentinel.openai.com/backend-api/sentinel/sdk.js";function pQ(t){return new Promise((e,n)=>{const s=document.createElement("script");s.type="text/javascript",s.src=t,s.async=!0,s.defer=!0,s.onload=e,s.onerror=n,document.getElementsByTagName("head")[0].appendChild(s)})}function JM(t){let e;return()=>(e||(e=pQ(t)),e)}const hQ=JM(mQ),_Q=JM(gQ);function XM(t,e){var o;return(((o=e==null?void 0:e.sdkVariant)!=null?o:"chatgpt")==="openai"?_Q:hQ)().then(()=>window.SentinelSDK.token(t))}function Ev(t,e,n,s){const o={};return t!=null&&t.token&&(o["OpenAI-Sentinel-Chat-Requirements-Token"]=t.token),e&&(o["OpenAI-Sentinel-Turnstile-Token"]=e),n&&(o["OpenAI-Sentinel-Proof-Token"]=n),s&&(o["OpenAI-Sentinel-Token"]=s),o}async function xQ(){try{const t=await QM(!0);t&&(await df.precomputeEnforcementToken(t),await xr.startEnforcement(t))}catch(t){}}function eA(t,e){var l;const n=!!((l=e==null?void 0:e.prefetchIds)!=null&&l.length),s=performance.now(),o=[],a=fQ();if(a==null)return o.push("chatReq"),QM().then(i);return i(a);function i(c){c.force_login&&Zt(t,{fallbackScreenHint:"login"});const d=df.getEnforcementTokenSync(c);if(d==null)return o.push("turnstile"),df.getEnforcementToken(c).then(u);return u(d);function u(f){const m=performance.now(),g=xr.getEnforcementTokenSync(c);if(g==null)return o.push("proofofwork"),xr.getEnforcementToken(c,{forceSync:n}).then(p);return p(g);function p(h){const x=String(performance.now()-m),v=o.includes("chatReq")?"false":"true",y=o.includes("turnstile")?"false":"true",b=o.includes("proofofwork")?"false":"true";return Ie.hist(je.DEFAULT,"chat_req_time",[{key:"wasChatReqSync",value:v},{key:"wasTurnstileSync",value:y},{key:"wasProofofworkSync",value:b}],performance.now()-s),ri(_s(),{eventName:"chatgpt_web_completion_integrity_checks",value:o.length===0?"true":"false",metadata:{wasChatReqSync:v,wasTurnstileSync:y,wasProofofworkSync:b,isPrefetchInitialLoad:n?"true":"false",powTime:x}}),{chatReq:c,turnstileToken:f,proofToken:h}}}}}var Ga=(t=>(t.Success="success",t.Error="error",t.Canceled="canceled",t))(Ga||{});const yQ=1e3,vQ=yQ*60,bQ=vQ*60;function Tv(){var n;const t=(n=_t.getItem(Ue.ResumeTokenStore))!=null?n:{};return Object.fromEntries(Object.entries(t).filter(([s,o])=>o.expiresAt>Date.now()))}function tA(t){_t.setItem(Ue.ResumeTokenStore,t)}function CQ(t,e){const n=Tv();n[t]={token:e,expiresAt:Date.now()+bQ},tA(n)}function SQ(t){var n;return(n=Tv()[t])==null?void 0:n.token}function wQ(t){const e=Tv();delete e[t],tA(e)}function kQ(){_t.removeItem(Ue.ResumeTokenStore)}const Fu={set:CQ,get:SQ,remove:wQ,clear:kQ};function Mv(t){return ve(t,"988697485")}const nA=on(t=>St(()=>Jc(t,Lt.Moonshine)&&Jc(t,Lt.Sunshine))),EQ=on(t=>St(()=>Mv(t)&&Zh(t)&&nA(t)===!0&&Jc(t,Lt.UkdvthEntrypointVisible)===!0)),TQ=on(t=>St(()=>Mv(t)&&nA(t)&&Jc(t,Lt.UkdvthMemoryEnabled))),Zh=t=>TQ(t)===!0,sA=on(()=>Tf(Ue.LastOpenedPulseId,()=>null)),zHe=t=>on(e=>St(()=>sA(e)===t));function qHe(t){"use forget";const e=W.c(4),n=V();let s,o;e[0]!==n||e[1]!==t?(s=()=>{t&&sA.set(n,t)},o=[t,n],e[0]=n,e[1]=t,e[2]=s,e[3]=o):(s=e[2],o=e[3]),_.useEffect(s,o)}function Hf(t){return t.content_type==="card"}function R6(t){return t.replace("..."," ")}function MQ(t,e){const n=t.filter(Hf),o=n.findIndex(a=>a.id===e)+1;return o<n.length?n[o]:null}function AQ(){"use forget";return oh("/pulse/*")!=null}function IQ(t){switch(t.type){case"card":return"feed/card/".concat(t.card_id,"/conversation");case"feedback-conversation":return"feed/feedback/conversation"}}function jQ(t,e){e.type==="feedback-conversation"&&e.feedback_card_id&&t.searchParams.set("card_id",e.feedback_card_id)}function oA(t){return{url:t,fallback_url:t,id:t}}function aA(t,e){return Pr(this,null,function*(){let n=null;try{for(var s=Io(t),o,a,i;o=!(a=yield new Qn(s.next())).done;o=!1){const l=a.value;if("response"in l)yield l;else if(l.event==="delta_encoding"){const c=String(l.data);if(e==null||e(c),c==="v1")n=new NQ;else throw new Error("[delta] unknown delta encoding: ".concat(c))}else if(l.event==="delta"){if(!n)throw new Error("[delta] delta event before delta_encoding");yield{data:n.applyDelta(l.data)}}else yield l}}catch(a){i=[a]}finally{try{o&&(a=s.return)&&(yield new Qn(a.call(s)))}finally{if(i)throw i[0]}}})}var rA=(t=>(t.V1="v1",t))(rA||{});class NQ{constructor(){J(this,"prevObjByChannel",[]);J(this,"prevDelta",{channel:0,op:"add",path:"",value:void 0})}applyDelta(e){try{const n=this.decodeDelta(e),s=n.channel,o=this.prevObjByChannel[s],a=LQ(o,n);return this.prevObjByChannel[s]=a,a}catch(n){Fe.addError("Error applying delta: ".concat(n))}}decodeDelta(e){RQ(e);const n=PQ(e,this.prevDelta),s=iA(n);return this.prevDelta=s,s}}function PQ(t,e){for(const[n,s]of lA)n!=="value"&&!(s in t)&&(t[s]=e[n]);return t}function iA(t){const e=t;for(const[n,s]of lA)s in t&&(e[n]=t[s],delete t[s]);return e.op==="patch"&&(e.value=e.value.map(iA)),e}function RQ(t){if(!t||typeof t!="object")throw new Error("Unexpected delta non-object")}const lA=[["channel","c"],["path","p"],["op","o"],["value","v"]];function LQ(t,e){return Nc({__root:t},s=>cA(s,e)).__root}function cA(t,e){var o;const n=FQ((o=e.path)!=null?o:"");for(let a=0;a<n.length-1;a++)t[n[a]]===void 0&&(typeof n[a+1]=="number"?t[n[a]]=[]:t[n[a]]={}),t=t[n[a]];const s=n[n.length-1];switch(e.op){case"patch":for(const a of e.value){const i={__root:t[s]};cA(i,a),t[s]=i.__root}break;case"add":Array.isArray(t)?t.splice(s,0,e.value):t[s]=e.value;break;case"remove":Array.isArray(t)?t.splice(s,1):delete t[s];break;case"replace":t[s]=e.value;break;case"append":if(typeof t[s]=="string")t[s]+=e.value;else if(Array.isArray(t[s]))t[s].push(...BQ(e.value));else if(L6(t[s])&&L6(e.value))for(const a in e.value)t[s][a]=e.value[a];else t[s]=e.value;break;case"truncate":t[s]&&(typeof t[s]=="string"?t[s]=t[s].substring(0,e.value):Array.isArray(t[s])&&(t[s].length=e.value));break;default:throw new Error("Unknown json delta operation")}}function OQ(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}const DQ=new RegExp("^(?:0|[1-9]\\d*)$","d");function FQ(t){const e=["__root"];if(t==="")return e;t[0]==="/"&&(t=t.substring(1));for(const n of t.split("/"))DQ.test(n)?e.push(parseInt(n,10)):e.push(OQ(n));return e}function BQ(t){return Array.isArray(t)?t:[t]}function L6(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function UQ(t){let e=!1;const n=[],s=[];function o(c){n.length>0?n.shift()(c):s.push(c)}function a(c){e||o({value:c,done:!1})}function i(){e||(e=!0,n.forEach(c=>c({value:void 0,done:!0})),n.length=0)}function l(c){e||(o(Promise.reject(c)),i())}try{t(a,i,l)}catch(c){l(c)}return{next(){return new Promise(c=>{s.length>0?c(s.shift()):e?c({value:void 0,done:!0}):n.push(c)})},[Symbol.asyncIterator](){return this}}}function y_(t){var e,n;return(n=(e=t.headers.get("x-request-id"))!=null?e:t.headers.get("cf-ray"))!=null?n:void 0}function lp(t,{accessToken:e,ctx:n,method:s,headers:o,body:a,intercomEventOnError:i,signal:l,observer:c}={}){return UQ((d,u,f)=>{let m=!1,g=!1,p=null,h=!1,x=!1;const v=(k,T,M)=>{const A={reason:k,source:T,requestUrl:t};if(typeof navigator<"u"&&(A.navigator_online=navigator.onLine),p){A.response_status=p.status;const N=y_(p);N&&(A.response_request_id=N)}const I=Q$(M);return Object.entries(I).forEach(([N,L])=>{L!==void 0&&(A[N]=L)}),A},y=(k,T,M)=>{if(h||x||k==="error")return;x=!0;const A=v(k,T,M);B.logValueEventWithStatsig({segmentEventName:"request_stream_no_events",statsigEventName:"chatgpt_request_stream_no_events",data:A})},b=void 0;function C(k,T="manual_error"){var M;if(m)return k;m=!0,b==null||b({reason:"error",source:T,error:k});try{return f(k),(M=c==null?void 0:c.onClose)==null||M.call(c,"error",k),k}finally{k instanceof Un?(J$(k,"stream"),X$(k),i&&eV(i,{url:k.url,message:k.message})):(Fe.addError(k),B.logValueEventWithStatsig({segmentEventName:"request_stream_error",statsigEventName:"chatgpt_request_stream_error",data:{error:k instanceof Error?k.message:String(k)}}))}}function S(k){var T,M,A;if(!m)if(m=!0,l!=null&&l.aborted){const I=(T=l.reason)!=null?T:new DOMException("Aborted","AbortError");b==null||b({reason:"aborted",source:"abort_signal",error:I}),y("aborted","abort_signal",I),f(I),(M=c==null?void 0:c.onClose)==null||M.call(c,"aborted",I)}else b==null||b({reason:"completed",source:k}),y("completed",k),(A=c==null?void 0:c.onClose)==null||A.call(c,"completed"),u()}const E=e!=null?e:n?Hy(n):void 0;tV(t,{method:s,credentials:"include",headers:w(w(w({},E?Kg({accessToken:E}):JE()),a?{"Content-Type":"application/json"}:null),o),body:a?JSON.stringify(a):void 0,signal:l,openWhenHidden:!0,async onopen(k){var M,A;p=k;const T=(M=k.headers.get("content-type"))!=null?M:"";if(k.ok&&T.includes("text/event-stream"))d({response:k}),(A=c==null?void 0:c.onOpen)==null||A.call(c,k);else if(T.includes("application/json")){const I=await k.json();throw C(new Un(t,k.status,I,y_(k),new Error(JSON.stringify(I))),"onopen_error")}else{const N=(await k.text()).substring(0,1e3);throw C(new Un(t,k.status,{detail:{message:nV,code:"unexpected_content_type",contentType:T,text:N}},y_(k),new Error(N)),"onopen_error")}},onmessage(k){var I;const T=new TextEncoder,M=k.data==="[DONE]";if((I=c==null?void 0:c.onEvent)==null||I.call(c,{byteLength:T.encode(k.data).length,isDoneEvent:M}),k.event==="ping"||!k.data)return;if(M){S("done_event");return}const A=JSON.parse(k.data);if(A.error){const N=new Error(A.error);B.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:N.message,isNetworkError:a_(N),isErrorInMessageData:!0,messageData:A}}),C(Un.createWithErrorMessage(t,"server",A.error,void 0,new Error(A.error)),"onmessage_error")}else h=!0,d({event:k.event||void 0,data:A})},onerror(k){const T=k instanceof Error?k:new Error(JSON.stringify(k));throw B.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:T.message,isNetworkError:a_(T),isErrorInMessageData:!1}}),a_(T)?C(Un.createWithErrorMessage(t,"client",mi,void 0,T),"onerror"):T.message==="Failed to fetch"?(B.logFailedToFetchError({source:"request_stream"}),C(Un.createWithErrorMessage(t,"server","An error occurred. Either the engine you requested does not exist or there was another issue processing your request. ".concat(QE),void 0,T),"onerror")):C(T,"onerror")}}).then(()=>S("fetch_resolved"),C)})}const $Q=t=>new Promise(e=>setTimeout(e,t));function dA(t,c){return Pr(this,null,function*(){var d=c,{shouldRetry:e=()=>!0,retryConfig:{MIN_RETRY_INTERVAL:n,MAX_RETRY_INTERVAL:s,RETRY_FACTOR:o,MAX_RETRY_COUNT:a},onRetry:i}=d,l=we(d,["shouldRetry","retryConfig","onRetry"]);let u=!1,f=!1,m=l;const g=C=>{const S=C.observer;return U(w({},C),{observer:U(w({},S),{onClose:(E,k)=>{var T;(T=S==null?void 0:S.onClose)==null||T.call(S,E,k),E==="completed"&&(f=!0)}})})};let p=lp(t,g(m)),h=0;for(;!u&&!f;)try{try{for(var x=Io(p),v,y,b;v=!(y=yield new Qn(x.next())).done;v=!1){const C=y.value;"response"in C&&(u=!0),yield C}}catch(y){b=[y]}finally{try{v&&(y=x.return)&&(yield new Qn(y.call(x)))}finally{if(b)throw b[0]}}f=!0}catch(C){if(f)return;if(u||!e(C)||h>=a)throw C;const S=Math.min(n*o**h,s);if(yield new Qn($Q(S)),h++,i){const E=yield new Qn(i());Ie.count(je.DEFAULT,"chat_requirements.retry_refetch_token"),m=U(w(w({},m),E),{headers:E.headers!==void 0?E.headers:m.headers,body:E.body!==void 0?E.body:m.body})}p=lp(t,g(m))}})}const po=t=>{if(t.type===Je.Starter&&t.category==="onboarding")return"";switch(t.type){case Je.Reply:return t.text;case Je.Templated:case Je.Starter:case Je.Autocomplete:case Je.Trending:case Je.Capabilities:return t.prompt}},VQ=t=>t.type===Je.Reply,uA=t=>t.type===Je.Starter,Av=t=>t.type===Je.Autocomplete,cp=t=>t.type===Je.Trending,dp=t=>Av(t)&&!!t.theme,Iv=t=>t.type===Je.Capabilities,HQ=t=>t.type===Je.Templated,GQ=t=>cp(t)||Iv(t)||Av(t)&&!dp(t),Kh=(t,e,n,s)=>{var o,a,i;switch(qe.logEvent("chatgpt_prompt_use_suggestion",GQ(t)?"":po(t),{id:(uA(t)||dp(t)||cp(t))&&(o=t.id)!=null?o:"",index:"".concat(e),type:t.type,theme:cp(t)&&t.theme?t.theme:""}),t.type){case Je.Reply:B.logEvent("Use Suggested Reply",{value:po(t),prompt_type:Je.Reply,messageId:s});break;case Je.Capabilities:B.logEvent("Use Capabilities Suggestion",{prompt_type:Je.Capabilities,categoryId:t.categoryId,client_thread_id:n,messageId:s});break;case Je.Starter:B.logEvent("Use Starter Prompt",{value:po(t),prompt_type:Je.Starter,title:t.title,body:t.body,id:t.id,category:t.category,client_thread_id:n,messageId:s,index:e,theme:t.theme});break;case Je.Autocomplete:{const l=dp(t);B.logEvent("Use Autocomplete",{value:l?po(t):"",prompt_type:Je.Autocomplete,title:l?t.title:"",body:l?t.body:"",id:l?t.id:"",category:t.category,index:e,messageId:s,client_thread_id:n,theme:(a=t.theme)!=null?a:""});break}case Je.Trending:{B.logEvent("Use Trending Prompt",{prompt_type:Je.Trending,title:t.title,index:e,messageId:s,client_thread_id:n,theme:(i=t.theme)!=null?i:""});break}}},WQ=(t,e)=>{if(t.length===0)return;const s=he.getCurrentNode(mt(e)).message.id;qe.logEvent("chatgpt_prompt_show_suggestions","count_".concat(t.length),{type:t[0].type});const o=a=>{var i;for(let l=0;l<a.length;l++){const c=a[l];B.logEventWithStatsig("Show Trending Prompt","chatgpt_prompt_show_suggestion",{type:c.type,id:c.id,index:l,client_thread_id:e,message_id:s,theme:(i=c.theme)!=null?i:""})}};if(t.every(VQ))B.logEvent("Show Suggested Replies",{prompt_count:t.length,prompt_type:Je.Reply,client_thread_id:e,suggestions:t.map(a=>a.text),message_id:s});else if(t.every(uA)){const{isAdditional:a}=t[0];B.logEvent(a?"More Starter Prompts Shown":"Show Starter Prompts",{prompt_count:t.length,prompt_type:Je.Starter,titles:t.map(i=>i.title),bodies:t.map(i=>i.body),ids:t.map(i=>i.id),client_thread_id:e,message_id:s,themes:t.map(i=>{var l;return(l=i.theme)!=null?l:""})}),a&&B.logEvent("Expand More Starter Prompts",{client_thread_id:e,message_id:s}),o(t)}else if(t.every(Av)){const a=!!t.find(i=>dp(i));B.logEvent("Show Autocomplete Prompts",{prompt_count:t.length,prompt_type:t[0].type,titles:t.map(i=>a?i.title:""),bodies:t.map(i=>a?i.body:""),ids:t.map(i=>a?i.id:""),client_thread_id:e,message_id:s,themes:t.map(i=>{var l;return(l=i.theme)!=null?l:""})})}else t.every(cp)?(B.logEvent("Show Trending Prompts",{prompt_count:t.length,prompt_type:Je.Trending,titles:t.map(a=>a.title),client_thread_id:e,message_id:s}),o(t)):t.every(Iv)?B.logEvent("Show Capabilities Suggestions",{prompt_count:t.length,prompt_type:Je.Capabilities,category_ids:t.map(a=>a.categoryId),client_thread_id:e,message_id:s}):t.every(HQ)?B.logEvent("Show Templated Suggestions",{prompt_count:t.length,prompt_type:Je.Templated,titles:t.map(a=>a.title),client_thread_id:e,message_id:s}):Fe.addError("Unhandled suggestion type",{type:t[0].type})},YHe=t=>{const n=he.getCurrentNode(mt(t)).message.id;B.logEvent("Show Expand More Starter Prompts Button",{client_thread_id:t,message_id:n})},ZHe=t=>{const n=he.getCurrentNode(mt(t)).message.id;B.logEvent("Expand More Starter Prompts",{client_thread_id:t,message_id:n})},Oo=Se({searchPlaceholder:{id:"PromptTextarea.searchPlaceholder",defaultMessage:"Search the web"},internalSearchPlaceholder:{id:"PromptTextarea.internalSearchPlaceholder",defaultMessage:"Ask anything about {workspaceName}..."},thinkPlaceholder:{id:"PromptTextarea.thinkPlaceholder",defaultMessage:"Ask anything"},connectorPlaceholder:{id:"PromptTextarea.connectorPlaceholder",defaultMessage:"Search connected sources"},apiToolPlaceholder:{id:"PromptTextarea.apiToolPlaceholder",defaultMessage:"Use tools"},researchPlaceholder:{id:"PromptTextarea.researchPlaceholder",defaultMessage:"Get a detailed report"},canvasPlaceholder:{id:"PromptTextarea.canvasPlaceholder",defaultMessage:"Write or code"},picturePlaceholder:{id:"PromptTextarea.picturePlaceholder",defaultMessage:"Describe an image"},pictureV2Placeholder:{id:"PromptTextarea.pictureV2Placeholder",defaultMessage:"Describe an image"},tatertotPlaceholder:{id:"PromptTextarea.studyAndLearnPlaceholder",defaultMessage:"Learn something new"},continueGenerating:{id:"PromptTextarea.continueGenerating",defaultMessage:"Continue generating"},stopGenerating:{id:"PromptTextarea.stopGenerating",defaultMessage:"Stop generating"},disallowedByWorkspacePlaceholder:{id:"PromptTextarea.disallowedByWorkspaceReason",defaultMessage:"Your workspace owner hasnt approved this GPT."},pimBlockPlaceholder:{id:"PromptTextarea.pimBlockPlaceholder",defaultMessage:"Potentially Malicious Content Detected"},noModelsAvailablePlaceholder:{id:"PromptTextarea.noModelsAvailablePlaceholder",defaultMessage:"No models available"},requiresPluginsToBeInstalled:{id:"PromptTextarea.requiresPluginsToBeInstalled",defaultMessage:"Requires plugins to be installed"},noTestGizmoId:{id:"PromptTextarea.noTestGizmoId",defaultMessage:"Start by defining your GPT."},searchWith:{id:"PromptTextarea.searchWith",defaultMessage:"Search with {name}"},loading:{id:"PromptTextarea.loading",defaultMessage:"Loading..."},placeholder:{id:"PromptTextarea.placeholder",defaultMessage:"Send a message"},placeholderWithName:{id:"PromptTextarea.placeholderWithName",defaultMessage:"Message {name}"},placeholderAskAnythingVariant:{id:"PromptTextarea.placeholderAskAnythingVariant",defaultMessage:"Ask anything"},placeholderAsyncSteering:{id:"PromptTextarea.placeholderAsyncSteering",defaultMessage:"Provide more detail"},placeholderAskNameAnythingVariant:{id:"PromptTextarea.placeholderAskNameAnythingVariant",defaultMessage:"Ask {name} anything"},continueSharedConversationPlaceholder:{id:"PromptTextarea.continueSharedConversationPlaceholder",defaultMessage:"Send a message to continue the conversation."},readOnlyConversationPlaceholder:{id:"PromptTextarea.readOnlyConversationPlaceholder",defaultMessage:"This conversation is read-only."},sendMessageTooltip:{id:"PromptTextarea.sendMessageTooltip",defaultMessage:"Send message"},unsupportedFileType:{id:"PromptTextarea.unsupportedFileType",defaultMessage:'Uploads with file type "{file_type}" are not supported, please try another file.'},gizmoKnowledgeWarning:{id:"PromptTextarea.gizmoKnowledgeWarning",defaultMessage:"Files uploaded here may be included in conversations with your GPT. Files can be downloaded if Code Interpreter is enabled."},n7jupdSystemHintPlaceholder:{id:"3pa1zs",defaultMessage:"Describe a task"},n7jupdActivePlaceholder:{id:"0qUILF",defaultMessage:"Follow up"}}),up="prompt-textarea";function jv(){var t;(t=document.getElementById(up))==null||t.focus()}const KHe={getAndReset:(t,e)=>{const n=_t.getItem(Ue.RestoreMessageAfterOauthRedirect);return _t.removeItem(Ue.RestoreMessageAfterOauthRedirect),!n||n.userId!==t||e!==n.serverThreadId||Date.now()>n.expiresAt?null:n},set:(t,e,n)=>{const s={userId:t,serverThreadId:e,inputText:n,expiresAt:Date.now()+6e4};_t.setItem(Ue.RestoreMessageAfterOauthRedirect,s)}},sa=()=>{"use forget";const t=W.c(16),e=$s(),n=gr.useStore();let s;t[0]!==n?(s=p=>n.getPersistedSystemHintTrigger(p),t[0]=n,t[1]=s):s=t[1];const o=s;let a;t[2]!==e?(a=p=>e(null,{ifPrevSystemHint:p}),t[2]=e,t[3]=a):a=t[3];const i=a;let l;t[4]!==e?(l=()=>e(null),t[4]=e,t[5]=l):l=t[5];const c=l;let d;t[6]!==e?(d=(p,h,x,v)=>{h?e(p,{analyticsMetadata:x,triggerSource:v}):e(null,{ifPrevSystemHint:p,analyticsMetadata:x})},t[6]=e,t[7]=d):d=t[7];const u=d;let f;t[8]!==e?(f=(p,h)=>{e(p,{analyticsMetadata:h})},t[8]=e,t[9]=f):f=t[9];const m=f;let g;return t[10]!==c||t[11]!==i||t[12]!==o||t[13]!==u||t[14]!==m?(g={getSystemHintModeTrigger:o,clearSystemHintModeTrigger:i,setThreadSystemHintMode:u,clearAllSystemHintModeTriggers:c,updateSystemHint:m},t[10]=c,t[11]=i,t[12]=o,t[13]=u,t[14]=m,t[15]=g):g=t[15],g},QHe=({promptDisabledReason:t,hasPendingFiles:e,hasTextContent:n,isTextContentTooLong:s,hasAsyncTaskPending:o,noSourceSelectedDr:a,isDeepResearchTaskStreaming:i,isThreadHardBlocked:l})=>t||(l?"rate_limit_hard_block":e?"file_upload_pending":o?i?void 0:"async_task_pending":n?s?"text_content_too_long":a?"no_source_selected_dr":void 0:"empty_text_content");function JHe(t,e){const n=Math.ceil(e/4);return typeof(t==null?void 0:t.maxTokens)=="number"&&n>t.maxTokens}function XHe(t,e){return t?e===void 0?!0:e.includes(t):!1}const zQ=t=>{switch(t){case"readOnlyConversation":return{placeholder:Oo.readOnlyConversationPlaceholder,isLastingDisabledStyle:!0};case"pimBlock":return{placeholder:Oo.pimBlockPlaceholder,isLastingDisabledStyle:!0};case"workspaceDisallowsGizmo":return{placeholder:Oo.disallowedByWorkspacePlaceholder,isLastingDisabledStyle:!0};case"noModelsAvailable":return{placeholder:Oo.noModelsAvailablePlaceholder,isLastingDisabledStyle:!0};case"requiresPluginsToBeInstalled":return{placeholder:Oo.requiresPluginsToBeInstalled,isLastingDisabledStyle:!0};case"loadingPlugins":return{placeholder:Oo.loading,isLastingDisabledStyle:!0};case"noTestGizmoId":return{placeholder:Oo.noTestGizmoId,isLastingDisabledStyle:!0}}return null},qQ="OAI-Echo-Logs",ec={FOCUS_IN:0,FOCUS_OUT:1,COPY:2,PASTE:3,TOUCH_START:4,TOUCH_END:5},fA=[];function tc(t){return()=>{fA.push({type:t,ts:Math.round(performance.now())})}}const YQ={focusin:tc(ec.FOCUS_IN),focusout:tc(ec.FOCUS_OUT),copy:tc(ec.COPY),paste:tc(ec.PASTE),touchstart:tc(ec.TOUCH_START),touchend:tc(ec.TOUCH_END)};function ZQ(t){const e=t!=null?t:document.getElementById(up);for(const[n,s]of Object.entries(YQ))e==null||e.removeEventListener(n,s),e==null||e.addEventListener(n,s)}function Qh(){return{[qQ]:fA.slice(0,10).map(t=>"".concat(t.type,",").concat(t.ts)).join(",")}}var KQ=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},tl="1.6.0",O6=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function QQ(t){var e=new Set([t]),n=new Set,s=t.match(O6);if(!s)return function(){return!1};var o={major:+s[1],minor:+s[2],patch:+s[3],prerelease:s[4]};if(o.prerelease!=null)return function(c){return c===t};function a(l){return n.add(l),!1}function i(l){return e.add(l),!0}return function(c){if(e.has(c))return!0;if(n.has(c))return!1;var d=c.match(O6);if(!d)return a(c);var u={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return u.prerelease!=null||o.major!==u.major?a(c):o.major===0?o.minor===u.minor&&o.patch<=u.patch?i(c):a(c):o.minor<=u.minor?i(c):a(c)}}var JQ=QQ(tl),XQ=tl.split(".")[0],uf=Symbol.for("opentelemetry.js.api."+XQ),ff=KQ;function Gf(t,e,n,s){var o;s===void 0&&(s=!1);var a=ff[uf]=(o=ff[uf])!==null&&o!==void 0?o:{version:tl};if(!s&&a[t]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(i.stack||i.message),!1}if(a.version!==tl){var i=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+t+" does not match previously registered API v"+tl);return n.error(i.stack||i.message),!1}return a[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+tl+"."),!0}function pl(t){var e,n,s=(e=ff[uf])===null||e===void 0?void 0:e.version;if(!(!s||!JQ(s)))return(n=ff[uf])===null||n===void 0?void 0:n[t]}function Wf(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+tl+".");var n=ff[uf];n&&delete n[t]}var eJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},tJ=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},nJ=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Jd("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Jd("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Jd("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Jd("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Jd("verbose",this._namespace,e)},t})();function Jd(t,e,n){var s=pl("diag");if(s)return n.unshift(e),s[t].apply(s,tJ([],eJ(n),!1))}var zs;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(zs||(zs={}));function sJ(t,e){t<zs.NONE?t=zs.NONE:t>zs.ALL&&(t=zs.ALL),e=e||{};function n(s,o){var a=e[s];return typeof a=="function"&&t>=o?a.bind(e):function(){}}return{error:n("error",zs.ERROR),warn:n("warn",zs.WARN),info:n("info",zs.INFO),debug:n("debug",zs.DEBUG),verbose:n("verbose",zs.VERBOSE)}}var oJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},aJ=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},rJ="diag",Ta=(function(){function t(){function e(o){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var l=pl("diag");if(l)return l[o].apply(l,aJ([],oJ(a),!1))}}var n=this,s=function(o,a){var i,l,c;if(a===void 0&&(a={logLevel:zs.INFO}),o===n){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((i=d.stack)!==null&&i!==void 0?i:d.message),!1}typeof a=="number"&&(a={logLevel:a});var u=pl("diag"),f=sJ((l=a.logLevel)!==null&&l!==void 0?l:zs.INFO,o);if(u&&!a.suppressOverrideMessage){var m=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+m),f.warn("Current logger will overwrite one already registered from "+m)}return Gf("diag",f,n,!0)};n.setLogger=s,n.disable=function(){Wf(rJ,n)},n.createComponentLogger=function(o){return new nJ(o)},n.verbose=e("verbose"),n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})(),iJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},lJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cJ=(function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var n=this._entries.get(e);if(n)return Object.assign({},n)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var n=iJ(e,2),s=n[0],o=n[1];return[s,o]})},t.prototype.setEntry=function(e,n){var s=new t(this._entries);return s._entries.set(e,n),s},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var a=new t(this._entries);try{for(var i=lJ(s),l=i.next();!l.done;l=i.next()){var c=l.value;a._entries.delete(c)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return a},t.prototype.clear=function(){return new t},t})(),dJ=Symbol("BaggageEntryMetadata"),uJ=Ta.instance();function fJ(t){return t===void 0&&(t={}),new cJ(new Map(Object.entries(t)))}function eGe(t){return typeof t!="string"&&(uJ.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:dJ,toString:function(){return t}}}function mA(t){return Symbol.for(t)}var mJ=(function(){function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(s){return n._currentContext.get(s)},n.setValue=function(s,o){var a=new t(n._currentContext);return a._currentContext.set(s,o),a},n.deleteValue=function(s){var o=new t(n._currentContext);return o._currentContext.delete(s),o}}return t})(),gJ=new mJ,Rd=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}})(),pJ=(function(){function t(){}return t.prototype.createHistogram=function(e,n){return wJ},t.prototype.createCounter=function(e,n){return SJ},t.prototype.createUpDownCounter=function(e,n){return kJ},t.prototype.createObservableGauge=function(e,n){return TJ},t.prototype.createObservableCounter=function(e,n){return EJ},t.prototype.createObservableUpDownCounter=function(e,n){return MJ},t.prototype.addBatchObservableCallback=function(e,n){},t.prototype.removeBatchObservableCallback=function(e){},t})(),Nv=(function(){function t(){}return t})(),hJ=(function(t){Rd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,s){},e})(Nv),_J=(function(t){Rd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,s){},e})(Nv),xJ=(function(t){Rd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(n,s){},e})(Nv),Pv=(function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t})(),yJ=(function(t){Rd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Pv),vJ=(function(t){Rd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Pv),bJ=(function(t){Rd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Pv),CJ=new pJ,SJ=new hJ,wJ=new xJ,kJ=new _J,EJ=new yJ,TJ=new vJ,MJ=new bJ,AJ={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},IJ={set:function(t,e,n){t!=null&&(t[e]=n)}},jJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},NJ=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},PJ=(function(){function t(){}return t.prototype.active=function(){return gJ},t.prototype.with=function(e,n,s){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return n.call.apply(n,NJ([s],jJ(o),!1))},t.prototype.bind=function(e,n){return n},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})(),RJ=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},LJ=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},v_="context",OJ=new PJ,Jh=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Gf(v_,e,Ta.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,n,s){for(var o,a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return(o=this._getContextManager()).with.apply(o,LJ([e,n,s],RJ(a),!1))},t.prototype.bind=function(e,n){return this._getContextManager().bind(e,n)},t.prototype._getContextManager=function(){return pl(v_)||OJ},t.prototype.disable=function(){this._getContextManager().disable(),Wf(v_,Ta.instance())},t})(),ix;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(ix||(ix={}));var gA="0000000000000000",pA="00000000000000000000000000000000",DJ={traceId:pA,spanId:gA,traceFlags:ix.NONE},Bu=(function(){function t(e){e===void 0&&(e=DJ),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,n){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,n){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,n){},t})(),Rv=mA("OpenTelemetry Context Key SPAN");function Lv(t){return t.getValue(Rv)||void 0}function FJ(){return Lv(Jh.getInstance().active())}function Ov(t,e){return t.setValue(Rv,e)}function BJ(t){return t.deleteValue(Rv)}function UJ(t,e){return Ov(t,new Bu(e))}function hA(t){var e;return(e=Lv(t))===null||e===void 0?void 0:e.spanContext()}var $J=/^([0-9a-f]{32})$/i,VJ=/^[0-9a-f]{16}$/i;function HJ(t){return $J.test(t)&&t!==pA}function GJ(t){return VJ.test(t)&&t!==gA}function _A(t){return HJ(t.traceId)&&GJ(t.spanId)}function WJ(t){return new Bu(t)}var b_=Jh.getInstance(),xA=(function(){function t(){}return t.prototype.startSpan=function(e,n,s){s===void 0&&(s=b_.active());var o=!!(n!=null&&n.root);if(o)return new Bu;var a=s&&hA(s);return zJ(a)&&_A(a)?new Bu(a):new Bu},t.prototype.startActiveSpan=function(e,n,s,o){var a,i,l;if(!(arguments.length<2)){arguments.length===2?l=n:arguments.length===3?(a=n,l=s):(a=n,i=s,l=o);var c=i!=null?i:b_.active(),d=this.startSpan(e,a,c),u=Ov(c,d);return b_.with(u,l,void 0,d)}},t})();function zJ(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var qJ=new xA,YJ=(function(){function t(e,n,s,o){this._provider=e,this.name=n,this.version=s,this.options=o}return t.prototype.startSpan=function(e,n,s){return this._getTracer().startSpan(e,n,s)},t.prototype.startActiveSpan=function(e,n,s,o){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):qJ},t})(),ZJ=(function(){function t(){}return t.prototype.getTracer=function(e,n,s){return new xA},t})(),KJ=new ZJ,D6=(function(){function t(){}return t.prototype.getTracer=function(e,n,s){var o;return(o=this.getDelegateTracer(e,n,s))!==null&&o!==void 0?o:new YJ(this,e,n,s)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:KJ},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,n,s){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,n,s)},t})(),F6;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(F6||(F6={}));var B6;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(B6||(B6={}));var U6;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(U6||(U6={}));var tGe=Jh.getInstance(),nGe=Ta.instance(),QJ=(function(){function t(){}return t.prototype.getMeter=function(e,n,s){return CJ},t})(),JJ=new QJ,C_="metrics",XJ=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return Gf(C_,e,Ta.instance())},t.prototype.getMeterProvider=function(){return pl(C_)||JJ},t.prototype.getMeter=function(e,n,s){return this.getMeterProvider().getMeter(e,n,s)},t.prototype.disable=function(){Wf(C_,Ta.instance())},t})(),sGe=XJ.getInstance(),eX=(function(){function t(){}return t.prototype.inject=function(e,n){},t.prototype.extract=function(e,n){return e},t.prototype.fields=function(){return[]},t})(),Dv=mA("OpenTelemetry Baggage Key");function yA(t){return t.getValue(Dv)||void 0}function tX(){return yA(Jh.getInstance().active())}function nX(t,e){return t.setValue(Dv,e)}function sX(t){return t.deleteValue(Dv)}var S_="propagation",oX=new eX,aX=(function(){function t(){this.createBaggage=fJ,this.getBaggage=yA,this.getActiveBaggage=tX,this.setBaggage=nX,this.deleteBaggage=sX}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return Gf(S_,e,Ta.instance())},t.prototype.inject=function(e,n,s){return s===void 0&&(s=IJ),this._getGlobalPropagator().inject(e,n,s)},t.prototype.extract=function(e,n,s){return s===void 0&&(s=AJ),this._getGlobalPropagator().extract(e,n,s)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){Wf(S_,Ta.instance())},t.prototype._getGlobalPropagator=function(){return pl(S_)||oX},t})(),oGe=aX.getInstance(),w_="trace",rX=(function(){function t(){this._proxyTracerProvider=new D6,this.wrapSpanContext=WJ,this.isSpanContextValid=_A,this.deleteSpan=BJ,this.getSpan=Lv,this.getActiveSpan=FJ,this.getSpanContext=hA,this.setSpan=Ov,this.setSpanContext=UJ}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var n=Gf(w_,this._proxyTracerProvider,Ta.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},t.prototype.getTracerProvider=function(){return pl(w_)||this._proxyTracerProvider},t.prototype.getTracer=function(e,n){return this.getTracerProvider().getTracer(e,n)},t.prototype.disable=function(){Wf(w_,Ta.instance()),this._proxyTracerProvider=new D6},t})(),iX=rX.getInstance();function lX(t,e,n,s,o,a){const i=uX(t,e,n,o,a);return vA(n,s,i)}function cX(t,e,n,s,o,a){const{conversationId:i,resumeToken:l,model:c}=e;let d=EA({ctx:t,conversationId:i,resumeToken:l,model:c,turnTracker:n,offset:0,signal:o!=null?o:null});d=kA(d,{ctx:t,model:c,turnTracker:n,signal:o!=null?o:null}),d=TA(d,{turnTracker:n,prepareState:null,signal:o!=null?o:null,f_completion:!0});const f=aA(d,m=>{n.stream_encoding=m});return vA(n,s,bA(f))}const dX=1e3*30,Xd=iX.getTracer("completion");function k_(t,e){Ie.count(je.DEFAULT,t,[{key:"prepare_sent",value:e&&e!=="none"?"true":"false"},{key:"prepare_succeeded",value:e==="success"?"true":"false"},{key:"prepare_failed",value:e==="failure"?"true":"false"}])}function vA(t,e,n){return Pr(this,null,function*(){var h;let s=!1,o=!1,a=!1,i=!1,l,c,d,u,f;Xd.startActiveSpan("completion.response",C=>{l=Xd.startSpan("completion.first_response"),c=Xd.startSpan("completion.first_token_including_tool_calls"),d=Xd.startSpan("completion.first_token_including_visible_content"),u=Xd.startSpan("completion.first_token"),f=C});const m=Date.now();let g=!1,p=setTimeout(()=>{B.logEvent("SSE Response Took Too Long to Come Back",{}),t.logCompletion({type:Ga.Error,error:{reason:"timeout",message:"SSE Response Took Too Long to Come Back"}}),g=!0},dX);try{e==null||e.logTimingOnce("prompt_submitted");try{for(var x=Io(n),v,y,b;v=!(y=yield new Qn(x.next())).done;v=!1){const C=y.value;yield C,C.type!=="connected"&&p&&(clearTimeout(p),p=null),C.type!=="connected"&&g&&(g=!1,t.logger.info("Late message received after ".concat(Date.now()-m,"ms"),t.createLogPayload()),Ie.count(je.DEFAULT,"conversation.stream.late_message_received",[{key:"trigger",value:(h=t.trigger)!=null?h:"null"}])),C.type==="message"&&(t.onMessageUpdate(C.message),s||(s=!0,l==null||l.end(),e==null||e.logTimingOnce("first_response")),!o&&C.message.author.role===Ke.Assistant&&(o=!0,c==null||c.end(),e==null||e.logTimingOnce("first_assistant_token")),!a&&C.message.author.role===Ke.Assistant&&Zg(C.message)&&(a=!0,d==null||d.end(),e==null||e.logTimingOnce("first_visible_content_token")),!i&&C.message.author.role===Ke.Assistant&&sV(C.message)&&(i=!0,u==null||u.end(),e==null||e.logTimingOnce("first_message_token"))),C.type==="perf_stats"&&t.addServerPerfStats(C),C.type==="server_ste_metadata"&&t.addServerSteMetadata(C),C.type==="message_marker"&&t.onMessageMarker(C),C.type==="done"&&t.onStreamClose()}}catch(y){b=[y]}finally{try{v&&(y=x.return)&&(yield new Qn(y.call(x)))}finally{if(b)throw b[0]}}}catch(C){throw p&&(clearTimeout(p),p=null),C}finally{f==null||f.end()}})}function uX(t,e,n,s,o){return Pr(this,null,function*(){const{conduitToken:a,prepareState:i,model:l,f_completion:c,f_search:d,expireConduit:u}=e,f=pr(3010482349,"".concat(l,"-AAAA"))||pr(3240390095,"".concat(l,"-AAAA")),m=tt(t)?f?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon";let g="".concat(m,"/conversation");c&&(g="".concat(m,"/f/conversation")),e.pulseCompletionParams&&(g="".concat(m,"/").concat(IQ(e.pulseCompletionParams)));const p=gX(g);e.pulseCompletionParams&&jQ(p,e.pulseCompletionParams),ve(t,"212625335")&&p.searchParams.set("debug","true"),n.onSentUserMessage();const h=hn()?yield new Qn(wv()):void 0,x=()=>w(w(w({},Qh()),Ev(e.chatReq,e.turnstileToken,e.proofToken,null)),a?{"x-conduit-token":a}:{}),v=()=>CA(e,h),y=async()=>{const E=await eA(t,e.completionMetadata);if(e.chatReq=E.chatReq,e.turnstileToken=E.turnstileToken,e.proofToken=E.proofToken,E.chatReq.force_login)throw new Error("force_login during retry");return{headers:x(),body:v()}};let b=dA(p.toString(),{ctx:t,method:"POST",headers:x(),body:v(),intercomEventOnError:"fetch-error:conversation:new-message",signal:s,observer:{onEvent:E=>{n.onStreamEvent(E.byteLength,E.isDoneEvent)}},shouldRetry:E=>(fp(E)||E instanceof Un&&Fv(E.status))&&ze(t,"603105008").get("retry_stream_requests",!1),retryConfig:Bv(t),onRetry:y});b=kA(b,{ctx:t,model:l,turnTracker:n,signal:s!=null?s:null}),b=TA(b,{turnTracker:n,prepareState:i,signal:s!=null?s:null,f_completion:c!=null?c:null}),c&&o&&Ze(o,E=>{E.stopConduitToken=a!=null?a:null,u&&(E.conduitToken=null),E.prepareState=null,E.lastPrepareTimestamp=null});const S=aA(b,E=>{n.stream_encoding=E});try{yield*o_(bA(S,{onPrematureTermination:()=>{n.onPrematureStreamTermination()}}))}finally{ve(t,"4178431533")&&xQ()}})}function bA(n){return Pr(this,arguments,function*(t,e={}){var o,a,i,l,m;let s=!1;try{for(var c=Io(t),d,u,f;d=!(u=yield new Qn(c.next())).done;d=!1){const g=u.value;if("response"in g){const p=g.response,h=(a=(o=p==null?void 0:p.headers)==null?void 0:o.get("Cf-Ray"))!=null?a:null,x=(l=(i=p==null?void 0:p.headers)==null?void 0:i.get("X-Conduit-Token"))!=null?l:null;yield{type:"connected",serverRequestId:h,interruptConversationToken:x}}else{const p=wA(g.data);p&&(p.type==="done"&&(s=!0),yield p)}}}catch(u){f=[u]}finally{try{d&&(u=c.return)&&(yield new Qn(u.call(c)))}finally{if(f)throw f[0]}}s||((m=e.onPrematureTermination)==null||m.call(e),yield{type:"done"})})}function CA(t,e){var s,o,a,i,l,c,d,u;const n="threadId"in t?t.threadId:void 0;return U(w({action:t.completionType,messages:t.messages.length>0?t.messages.map(SA):void 0,continue_from_shared_conversation_id:"continueFromSharedConversationId"in t&&n==null?t.continueFromSharedConversationId:void 0,branching_from_conversation_id:"branchingFromConversationId"in t&&n==null?t.branchingFromConversationId:void 0,branching_from_message_id:"branchingFromMessageId"in t&&n==null?t.branchingFromMessageId:void 0,continue_from_shared_post_id:"continueFromSharedPostId"in t?t.continueFromSharedPostId:void 0,fork_from_shared_post:"forkFromSharedPost"in t?t.forkFromSharedPost:void 0},"sharedProjectConversationOwnerId"in t&&"sharedProjectConversationId"in t&&t.sharedProjectConversationId&&t.sharedProjectConversationOwnerId?{continue_from_shared_project_conversation_id:t.sharedProjectConversationId,shared_project_conversation_owner_id:t.sharedProjectConversationOwnerId}:{conversation_id:n}),{parent_message_id:t.parentMessageId,model:t.model,timezone_offset_min:new Date().getTimezoneOffset(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,variant_purpose:(s=t.completionMetadata)==null?void 0:s.variantPurpose,suggestions:(o=t.completionMetadata)!=null&&o.suggestions?t.completionMetadata.suggestions.map(f=>po(f)):void 0,chosen_suggestion:(a=t.completionMetadata)!=null&&a.suggestion?{type:t.completionMetadata.suggestion.type,index:t.completionMetadata.suggestionIndex,source:t.completionMetadata.suggestion.type===Je.Autocomplete?t.completionMetadata.suggestion.source:void 0,user_input:t.completionMetadata.suggestion.type===Je.Autocomplete?t.completionMetadata.suggestion.userInput:void 0}:void 0,history_and_training_disabled:jo(t.historyDisabled),conversation_mode:ro((i=t.completionMetadata)==null?void 0:i.conversationMode),force_paragen:jo(t.forceParagen),force_paragen_model_slug:t.forceParagenModel,force_indepth_feedback:jo(t.forceIndepthFeedback),force_rate_limit:jo(t.forceRateLimit),reset_rate_limits:jo(t.resetRateLimits),record_rendering:jo(t.recordRendering),record_transformed_convo_json:jo(t.recordTransformedConvoJson),disable_system_content_toggling:jo(t.disableSystemContentToggling),enable_message_followups:t.enableMessageFollowups,source:(l=t.completionMetadata)==null?void 0:l.source,system_hints:(c=t.completionMetadata)==null?void 0:c.systemHints,prefetch_ids:(d=t.completionMetadata)==null?void 0:d.prefetchIds,supports_buffering:!0,supported_encodings:[rA.V1],conversation_origin:Hs(t.conversationOrigin),force_use_search:Hs(t.forceUseSearch),force_disable_features:Hs(t.forceDisableFeatures),client_reported_search_source:(u=t.completionMetadata)==null?void 0:u.searchSource,client_contextual_info:t.contextualInfo,paragen_stream_type_override:Hs(t.paragenStreamType==="none"?null:t.paragenStreamType),paragen_cot_summary_display_override:Hs(t.paragenCotSummaryDisplay==="none"?null:t.paragenCotSummaryDisplay),is_onboarding_conversation:jo(t.isOnboardingConversation),is_visible:Hs(t.isVisible),override_infer_treatment:Hs(t.overrideInferTreatment),model_slug_stats_override:Hs(t.modelSlugStatsOverride),is_anon_mode:jo(t.isAnonModeEnabled),is_reasoning_skipped:jo(t.isReasoningSkipped),async_task_id:Hs(t.asyncTaskId),force_parallel_switch:Hs(t.forceParallelSwitch),thinking_effort:Hs(t.thinkingEffort),juice_score:Hs(t.juiceScore),multimodal_juice_score:Hs(t.multimodalJuiceScore),local_function_names:hn()&&e?[...e]:void 0})}function SA(t){let e=t;return t.clientMetadata&&(e=w({},t),delete e.clientMetadata),e}function jo(t){if(t===!0)return t}function Hs(t){if(t!=null)return t}function wA(t){if("type"in t)switch(t.type){case"gizmo_inline_review":return{type:"gizmo_inline_review",gizmoId:t.gizmo_id};case"title_generation":return{type:"title_generation",title:t.title,conversation_id:t.conversation_id};case"moderation":return{type:"moderation",conversationId:t.conversation_id,messageId:t.message_id,isCompletion:t.is_completion,flagged:t.moderation_response.flagged,blocked:t.moderation_response.blocked,shouldDisableConversation:!!t.moderation_response.should_disable_conversation,disclaimers:t.moderation_response.disclaimers,metadata:t.moderation_response.metadata};case"url_moderation":return{type:"url_moderation",conversationId:t.conversation_id,messageId:t.message_id,url:t.url_moderation_result.full_url,isSafe:t.url_moderation_result.is_safe};case"num_variants_in_stream":return{type:"num_variants_in_stream",num_variants_in_stream:t.num_variants_in_stream,display_treatment:t.display_treatment};case"input_message":return{type:"input_message",message:t.input_message,conversationId:t.conversation_id};case"display_crisis_helpline_message":return{type:"display_crisis_helpline_message",text:t.text,links:t.links,conversationId:t.conversation_id,messageId:t.message_id};case"perf_stats":case"conversation_detail_metadata":case"beacon_ui_response":case"resume_conversation_token":case"conversation_async_status":case"server_ste_metadata":case"message_marker":case"survey_campaign_effect":case"system_hint_suggestion":case"display_crisis_helpline_modal":return t;case"message_stream_complete":return{type:"done"};default:return}if(t.message)return{type:"message",message:t.message,conversationId:t.conversation_id}}async function fX(t,e,n=[],s,o){var k,T,M,A,I,N,L;const a=_s();if(!Wh(a,!0)||!hZ(a)||ze(a,"1925940714").get("disable-convo-2",!1))return;const l=jt(t),c=mt(t);if(c!=null&&c.prepareRequestBlocked)return;const d=3e3;if(o.delayAfterCompletion&&(c!=null&&c.lastCompletionFinishedTimestamp)){const O=performance.now()-c.lastCompletionFinishedTimestamp,D=d-O;D>0&&await new Promise($=>setTimeout($,D))}const u=(k=c==null?void 0:c.conversationOrigin)!=null?k:null;let f;if(o.isRegen){const O=he.getParentPromptNode(c);f=(T=O==null?void 0:O.id)!=null?T:""}else f=he.getCurrentNode(c).message.id;const m=xd(),g=bn(()=>_d(a)),p=(M=c==null?void 0:c.conduitToken)!=null?M:null,h=(A=c==null?void 0:c.prepareState)!=null?A:"none",x={threadId:l,prepareState:h,conduitToken:p,continueFromSharedPostId:c==null?void 0:c.continuingFromSharedPostId,forkFromSharedPost:!!(c!=null&&c.continuingFromSharedPostId),continueFromSharedConversationId:c==null?void 0:c.continuingFromSharedConversationId,branchingFromMessageId:c==null?void 0:c.branchingFromMessageId,branchingFromConversationId:c==null?void 0:c.branchingFromConversationId,sharedProjectConversationId:c==null?void 0:c.continuingFromSharedProjectConversationId,sharedProjectConversationOwnerId:(I=c==null?void 0:c.sharedProjectConversationOwner)==null?void 0:I.id,isOnboardingConversation:o.isOnboardingConversation,conversationOrigin:u,model:e,completionType:Qa.Next,completionMetadata:{systemHints:n,conversationMode:(N=c==null?void 0:c.mode)!=null?N:{kind:wt.PrimaryAssistant}},messages:[],parentMessageId:f,recordRendering:m.recordRendering,recordTransformedConvoJson:m.recordTransformedConvoJson,historyDisabled:g,asyncTaskId:(L=c==null?void 0:c.steeringAsyncTaskId)!=null?L:void 0,contextualInfo:BM(a)},v=hn()?await wv():void 0,y=CA(x,v),b={"x-conduit-token":p!=null?p:"no-token"},C=pr(3010482349,"".concat(e,"-AAAA"))||pr(3240390095,"".concat(e,"-AAAA"));if(C){Ze(t,O=>{O.conduitToken=null,O.prepareState=null});return}const S=tt(a)?C?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon";let E="".concat(S,"/f/conversation/prepare");try{Ze(t,$=>{$.prepareState="sent",$.lastPrepareTimestamp=performance.now()});const O=await Mg.post(E,y,{additionalHeaders:b,authOption:sn.SendIfAvailable}),{conduit_token:D}=O;s(D)}catch(O){Ie.count(je.DEFAULT,"conduit_f_conversation_prepare_api_error"),Fe.addError(O),!_v(a)&&Ze(t,$=>{$.conduitToken=null,$.prepareState="failure"})}}const mX=t=>new Promise(e=>setTimeout(e,t));function kA(t,e){return Pr(this,null,function*(){const{MIN_RETRY_INTERVAL:n,MAX_RETRY_INTERVAL:s,RETRY_FACTOR:o,MAX_RETRY_COUNT:a}=Bv(e.ctx),{signal:i}=e;let l=!1;const c={onClose:(C,S)=>{C==="completed"&&(l=!0)}};let d,u,f=t,m=0,g=0,p=0,h=0;for(;f!=null;)try{try{for(var x=Io(f),v,y,b;v=!(y=yield new Qn(x.next())).done;v=!1){const C=y.value;const S="response"in C;!S&&C.data!=null&&typeof C.data=="object"&&"type"in C.data&&C.data.type==="resume_conversation_token"&&"token"in C.data&&"conversation_id"in C.data?(u=String(C.data.token),d=String(C.data.conversation_id),Fu.set(d,u)):yield C,g>0&&(h++,B.logEventWithStatsig("ChatGPT Convo Stream: Resume Succeeded","chatgpt_convo_stream_resume_succeeded",{conversationId:d,offset:m,afterRetryCount:g,successfulResumeCount:h}),g=0),S||m++}}catch(y){b=[y]}finally{try{v&&(y=x.return)&&(yield new Qn(y.call(x)))}finally{if(b)throw b[0]}}B.logEventWithStatsig("ChatGPT Convo Stream: Stream Completed","chatgpt_convo_stream_completed",{conversationId:d,resumeAttempts:p,successfulResumeCount:h}),d!=null&&Fu.remove(d),f=null,l=!0}catch(C){if(l)return;const S=fp(C);g===0&&B.logEventWithStatsig("ChatGPT Convo Stream: Error","chatgpt_convo_stream_error",{conversationId:d,offset:m,isNetworkError:S,successfulResumeCount:h,errorMessage:C instanceof Error?C.message:String(C)});const E=C instanceof Un&&Fv(C.status);if(g<a&&!(i!=null&&i.aborted)&&u!=null&&d!=null&&(fp(C)||E)&&ze(e.ctx,"2489999880").get("is_resume_enabled",!1)){g===0&&B.logEventWithStatsig("ChatGPT Convo Stream: Resume Attempted","chatgpt_convo_stream_resume_attempted",{conversationId:d,offset:m,retryCount:g,successfulResumeCount:h}),g++,p++;const T=Math.min(n*o**g,s)*(.5+Math.random()*.5);yield new Qn(mX(T)),f=EA(U(w({},e),{observer:c,resumeToken:u,conversationId:d,offset:m}))}else{const k=C instanceof Un&&C.status===404;throw(g>=a||k&&g>0)&&B.logEventWithStatsig("ChatGPT Convo Stream: Resume Failed","chatgpt_convo_stream_resume_failed",{conversationId:d,offset:m,afterRetryCount:g,successfulResumeCount:h,isNetworkError:S,is404:k}),f=null,C instanceof Un&&C.status===404&&g>0?(d!=null&&Fu.remove(d),Un.createWithErrorMessage(C.url,"client",mi,void 0,C)):C}}})}function fp(t){return t instanceof Error&&t.message===mi||typeof t=="string"&&t===mi}function Fv(t){return t===408||t===409||t===425||t===429||t===502||t===504}function EA({ctx:t,conversationId:e,resumeToken:n,model:s,turnTracker:o,offset:a,signal:i,observer:l={}}){const c=pr(3010482349,"".concat(s,"-AAAA"))||pr(3240390095,"".concat(s,"-AAAA")),d=tt(t)?c?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon",u={"x-conduit-token":n!=null?n:"no-token"},f="".concat(d,"/f/conversation/resume"),m=t?Hy(t):void 0,g={conversation_id:e,offset:a};return dA(f,{method:"POST",headers:U(w(w(w({},Qh()),m?Kg({accessToken:m}):JE()),u),{"Content-Type":"application/json"}),body:g,intercomEventOnError:"fetch-error:conversation:new-message",signal:i!=null?i:void 0,observer:U(w({},l),{onEvent:h=>{var x;(x=l.onEvent)==null||x.call(l,h),o.onStreamEvent(h.byteLength,h.isDoneEvent)}}),ctx:t,retryConfig:Bv(t),shouldRetry:h=>(fp(h)||h instanceof Un&&Fv(h.status))&&ze(t,"603105008").get("retry_stream_requests",!1)})}function TA(a,i){return Pr(this,arguments,function*(t,{turnTracker:e,prepareState:n,f_completion:s,signal:o}){try{try{for(var l=Io(t),c,d,u;c=!(d=yield new Qn(l.next())).done;c=!1){const f=d.value;yield f}}catch(d){u=[d]}finally{try{c&&(d=l.return)&&(yield new Qn(d.call(l)))}finally{if(u)throw u[0]}}e.onStreamClose(),s&&k_("conduit_f_conversation_api.success",n)}catch(f){throw Ie.count(je.DEFAULT,"conversation_api.client_request_error"),o!=null&&o.aborted?(e.handleAbort(f),s&&k_("conduit_f_conversation_api.aborted",n)):(e.handleRawError(f instanceof Error||typeof f=="string"?f:JSON.stringify(f)),s&&k_("conduit_f_conversation_api.error",n)),f}})}function Bv(t){const e=rs(t,"3165814200");return{MIN_RETRY_INTERVAL:e.get("MIN_RETRY_INTERVAL",300),MAX_RETRY_INTERVAL:e.get("MAX_RETRY_INTERVAL",5e3),RETRY_FACTOR:e.get("RETRY_FACTOR",1.5),MAX_RETRY_COUNT:e.get("MAX_RETRY_COUNT",12)}}function gX(t){try{return new URL(t)}catch(e){return new URL(t,window.location.origin)}}const pX=.5,hX=R(()=>P(()=>import("./ga6j99kn1iju276w.js"),__vite__mapDeps([9,1,10,11])).then(t=>t.QuietHoursModal));function _X(){const t=xX();return t?t.gapPx>t.viewportHeightPx*pX:!1}function xX(){if(typeof window>"u"||typeof document>"u")return null;const t=document.getElementById("thread");if(!t)return null;const e=t.querySelectorAll('[data-turn="user"]');if(!e.length)return null;const n=e[e.length-1],s=window.innerHeight;if(!Number.isFinite(s)||s<=0)return null;const{bottom:o}=n.getBoundingClientRect();return{gapPx:s-o,viewportHeightPx:s}}var Tt,AA,lx,bf,Ng,IA,jA,NA,PA,RA,LA,OA,DA,FA,BA,UA,$A,cx,dx,ux,fx;class MA{constructor(e,n,s,o,a,i,l,c,d,u,f,m,g,p,h,x,v,y,b,C,S=!1,E,k=!1,T=!1,M,A=void 0,I,N,L=!0){ao(this,Tt);J(this,"isFirstCompletionInThread");J(this,"activeBranchLastMessage");J(this,"messagesToUpdate",{});J(this,"allIncompleteMessageIds",new Set);J(this,"responseThreadId");J(this,"isCompletionBlocked",!1);J(this,"isEitherFlagged",!1);J(this,"sentNotification",!1);J(this,"variantsInStreamInfo");J(this,"blurDuringCompletionTracker",new tZ);J(this,"completionLatencyTracker");J(this,"preflightTime");J(this,"treatCompletionAsAsync",!1);J(this,"realtimeAsyncCompletion",!1);J(this,"resumeToken");J(this,"placeholderNodeId");ao(this,bf,e=>{var n,s,o;if(this.activeBranchLastMessage&&this.completionLatencyTracker.onResponse(e,this.activeBranchLastMessage,this.responseThreadId),this.responseThreadId===void 0&&"conversationId"in e){const a=e.conversationId;if(this.responseThreadId=a,br(this.conversation.id)&&jt(this.conversation.id)!==a&&(aV(this.ctx,this.conversation.id,a),B.logEvent("Attribution: Client Thread to Server Thread",{client_thread_id:this.conversation.id,server_thread_id:a})),this.isContinuingFromSharedConversation&&(Ze(this.conversation.id,l=>{delete l.continuingFromSharedConversationId}),qe.logEvent("chatgpt_continue_conversation_first_message_sent"),B.logEvent("Continue Conversation: First Message Sent",{forked_conversation_id:a,shared_conversation_id:(n=this.initialThread)==null?void 0:n.continuingFromSharedConversationId})),this.isContinuingFromBranchingConversation&&Ze(this.conversation.id,l=>{delete l.branchingFromConversationId,delete l.branchingFromMessageId}),this.isContinuingFromSharedProjectConversation&&Ze(this.conversation.id,l=>{delete l.continuingFromSharedProjectConversationId,delete l.sharedProjectConversationOwner}),this.isContinuableSharedPost&&Ze(this.conversation.id,l=>{delete l.continuingFromSharedPostId,delete l.forkFromSharedPost}),this.isFirstCompletionInThread){const l=mt(this.conversation.id);if(B.logEvent("Create New Thread"),!this.isHistoryAndTrainingDisabled&&JZ(l==null?void 0:l.mode)&&tt(this.ctx)){Xs(this.queryClient,he.getGizmoId(l));const c=gi(this.ctx)&&es(this.ctx);l!=null&&l.disableConversationNavigation||yv(HM,this.queryClient,a,this.isSnorlaxEnabledForGizmo,void 0,c)}}const i={id:this.requestId,threadId:this.responseThreadId,completionType:this.completionType,eventSource:this.eventSource,model:this.model};if(this.completionType===Qa.Next){const l=he.getConversationTurns(mt(this.conversation.id)),c=l.length,d=l.filter(f=>f.role===Ke.User),u=d&&((s=d[d.length-1])==null?void 0:s.messages[0]);if((u==null?void 0:u.content.content_type)===ut.Text){const f=u.content.parts.join("").length,m=(o=d==null?void 0:d.length)!=null?o:0;i.countConversationTurns=c,i.countUserSubmittedMessages=m,i.countLastUserPromptTextMessageLength=f}}B.logEvent("Generate Completion",i)}switch(e.type){case"num_variants_in_stream":Jt(this,Tt,OA).call(this,e);break;case"moderation":Jt(this,Tt,UA).call(this,e);break;case"url_moderation":Jt(this,Tt,$A).call(this,e);break;case"message":Jt(this,Tt,cx).call(this,e);break;case"input_message":Jt(this,Tt,cx).call(this,e);break;case"done":Jt(this,Tt,ux).call(this);break;case"gizmo_inline_review":Jt(this,Tt,IA).call(this,e);break;case"title_generation":Jt(this,Tt,jA).call(this,e);break;case"conversation_detail_metadata":Jt(this,Tt,NA).call(this,e);break;case"beacon_ui_response":Jt(this,Tt,PA).call(this,e);break;case"survey_campaign_effect":mK(e);break;case"conversation_async_status":Jt(this,Tt,RA).call(this,e);break;case"resume_conversation_token":Jt(this,Tt,LA).call(this,e);break;case"system_hint_suggestion":Jt(this,Tt,DA).call(this,e);break;case"display_crisis_helpline_message":Jt(this,Tt,FA).call(this,e);break;case"display_crisis_helpline_modal":Jt(this,Tt,BA).call(this,e);break}});J(this,"debouncedUpdateExistingMessages",fi(()=>{if(this.isCompletionBlocked)return;const e=Object.values(this.messagesToUpdate);e.length!==0&&(Ze(this.conversation.id,n=>{cn.updateTree(n,s=>{for(const o of e)s.updateNodeMessage(o.id,o),o.status!=="in_progress"&&(s.updateNodeMetadata(o.id,{completionSampleFinishTime:Date.now()}),this.allIncompleteMessageIds.delete(o.id))})}),this.messagesToUpdate={})},50,{leading:!0,maxWait:50}));this.ctx=e,this.requestId=n,this.queryClient=s,this.initialThread=o,this.conversation=a,this.parentMessageId=i,this.prependMessages=l,this.promptMessage=c,this.appendMessages=d,this.completionType=u,this.model=f,this.eventSource=m,this.isHistoryAndTrainingDisabled=g,this.startPreflightTime=p,this.isSnorlaxEnabledForGizmo=h,this.isNewThread=x,this.isContinuingFromSharedConversation=v,this.isContinuingFromBranchingConversation=y,this.isContinuingFromSharedProjectConversation=b,this.turnTracker=C,this.isAnonModeEnabled=E,this.isContinuableSharedPost=k,this.isReasoningSkipped=T,this.thinkingEffort=M,this.modelSlugStatsOverride=A,this.asyncTaskId=I,this.expireConduit=L,this.completionLatencyTracker=new pZ(this.requestId,p),this.isFirstCompletionInThread=x||this.isContinuingFromSharedConversation||this.isContinuingFromSharedProjectConversation||this.isContinuableSharedPost||this.isContinuingFromBranchingConversation,N!=null&&N.disablePlaceholder||(this.placeholderNodeId="".concat(Gy).concat(n)),S&&(this.sentNotification=!0)}updateBeforeRequest(){vZ.incrementUserMessageCount(tt(this.ctx)?Vo.LoggedIn:Vo.LoggedOut),fr.retainThread(this.conversation.id),Ze(this.conversation.id,e=>{var a,i,l,c,d;e.stopConduitToken=(a=e.conduitToken)!=null?a:null,this.expireConduit&&(e.conduitToken=null),e.prepareState=null,e.lastPrepareTimestamp=null;const n=this.parentMessageId?he.getNode(e,this.parentMessageId):void 0,s=(n==null?void 0:n.message.author.role)===Ke.User,o=_X();this.completionType===Qa.Next&&he.hasUserMessage(e)&&((i=this.promptMessage)==null?void 0:i.author.role)===Ke.User&&!((c=(l=this.promptMessage)==null?void 0:l.metadata)!=null&&c.is_visually_hidden_from_conversation)&&!(s&&o)&&(e.scrollToMessageId=(d=this.promptMessage)==null?void 0:d.id),cn.updateTree(e,(u,f)=>{var g,p;if(this.parentMessageId&&(f=he.getNode(e,this.parentMessageId).id),this.prependMessages)for(const h of this.prependMessages)h.clientMetadata=U(w({},h.clientMetadata),{isOptimistic:!0}),f=u.addMessageNode(f,h);if(this.promptMessage){const h=this.promptMessage;h.clientMetadata=U(w({},h.clientMetadata),{isOptimistic:!0}),f=u.addMessageNode(f,h)}if(this.appendMessages)for(const h of this.appendMessages)h.clientMetadata=U(w({},h.clientMetadata),{isOptimistic:!0}),f=u.addMessageNode(f,h);const m=(p=(g=this.promptMessage)==null?void 0:g.metadata)==null?void 0:p.gizmo_id;if(this.placeholderNodeId){const h=W2("",m?{gizmo_id:m}:void 0,{requestId:this.requestId,isPlaceholder:!0},this.placeholderNodeId);f=u.addMessageNode(f,h)}return f})})}async sendRequest({conduitToken:e,turnstileToken:n,proofToken:s,completionMetadata:o,resolvedParentMessageId:a,messages:i,extraStreamParams:l,chatReq:c,profiler:d}){var p,h,x,v,y,b,C,S,E,k,T,M,A;E6(this.conversation.id,!0);const u=new AbortController;Tg.addRequest(this.requestId,u,this.turnTracker);const f=xd(),m=bn(this.conversation.serverId$);if(this.completionType===Qa.Variant&&m==null){Fe.addError("Generating variant without conversation_id"),Jt(this,Tt,Ng).call(this,new Error("Regeneration must have conversation_id"));return}const g=lX(this.ctx,w(w(U(w({conversationOrigin:(h=(p=this.initialThread)==null?void 0:p.conversationOrigin)!=null?h:null,model:this.model,completionType:this.completionType,prepareState:(v=(x=this.initialThread)==null?void 0:x.prepareState)!=null?v:"none",conduitToken:e,threadId:m,isReasoningSkipped:this.isReasoningSkipped,asyncTaskId:this.asyncTaskId,overrideInferTreatment:f.autoSwitcherTreatmentOverride,modelSlugStatsOverride:this.modelSlugStatsOverride,continueFromSharedConversationId:(y=this.initialThread)==null?void 0:y.continuingFromSharedConversationId,branchingFromConversationId:(b=this.initialThread)==null?void 0:b.branchingFromConversationId,branchingFromMessageId:(C=this.initialThread)==null?void 0:C.branchingFromMessageId,sharedProjectConversationOwnerId:(E=(S=this.initialThread)==null?void 0:S.sharedProjectConversationOwner)==null?void 0:E.id,sharedProjectConversationId:(k=this.initialThread)==null?void 0:k.continuingFromSharedProjectConversationId,continueFromSharedPostId:(T=this.initialThread)==null?void 0:T.continuingFromSharedPostId,forkFromSharedPost:(M=this.initialThread)==null?void 0:M.forkFromSharedPost,historyDisabled:this.isHistoryAndTrainingDisabled,isAnonModeEnabled:this.isAnonModeEnabled,parentMessageId:a,messages:i,chatReq:c,turnstileToken:n,proofToken:s,completionMetadata:o,contextualInfo:w({is_dark_mode:oV(),time_since_loaded:Math.floor(performance.now()/1e3),page_height:window.innerHeight,page_width:window.innerWidth,pixel_ratio:window.devicePixelRatio,screen_height:window.screen.height,screen_width:window.screen.width,window_style:Rn(this.ctx).windowStyle},BM(this.ctx)),isOnboardingConversation:o==null?void 0:o.isOnboardingConversation,thinkingEffort:Jt(this,Tt,AA).call(this),forceParagen:f.forceParagen,forceParagenModel:f.forceParagen?f.forceParagenModel.value:void 0,forceRateLimit:f.forceRateLimit,resetRateLimits:f.resetRateLimits,recordRendering:f.recordRendering,recordTransformedConvoJson:f.recordTransformedConvoJson,disableSystemContentToggling:f.rebaseSystemMessageContent!=null,forceUseSearch:(A=f.forceUseSearch)!=null?A:void 0,paragenStreamType:f.paragenStreamType,paragenCotSummaryDisplay:f.paragenCotSummaryDisplay,forceParallelSwitch:f.forceParallelSwitch,juiceScore:f.juiceScore,multimodalJuiceScore:f.multimodalJuiceScore},Wh(this.ctx)?{f_completion:!0}:{}),{expireConduit:this.expireConduit}),_Z()?{f_search:!0}:{}),l),this.turnTracker,d,u.signal,this.conversation.id);try{try{for(var I=Io(g),N,L,O;N=!(L=await I.next()).done;N=!1){const D=L.value;D.type==="connected"?Jt(this,Tt,lx).call(this,D):j6(D)&&wn(this,bf).call(this,D)}}catch(L){O=[L]}finally{try{N&&(L=I.return)&&await L.call(I)}finally{if(O)throw O[0]}}}catch(D){B4(D)||u.signal.aborted?Jt(this,Tt,dx).call(this,D):Jt(this,Tt,Ng).call(this,D)}finally{E6(this.conversation.id,!1)}}async sendResumeRequest({conversationId:e,resumeToken:n,profiler:s}){const o=new AbortController;Tg.addRequest(this.requestId,o,this.turnTracker),Ze(this.conversation.id,u=>{cn.setRequestIdOnCurrentLeaf(u,this.requestId)});const a=cX(this.ctx,{conversationId:e,resumeToken:n,model:this.model},this.turnTracker,s,o.signal,this.conversation.id);try{try{for(var i=Io(a),l,c,d;l=!(c=await i.next()).done;l=!1){const u=c.value;u.type==="connected"?Jt(this,Tt,lx).call(this,u):j6(u)&&wn(this,bf).call(this,u)}}catch(c){d=[c]}finally{try{l&&(c=i.return)&&await c.call(i)}finally{if(d)throw d[0]}}}catch(u){B4(u)||o.signal.aborted?Jt(this,Tt,dx).call(this,u):Jt(this,Tt,Ng).call(this,u)}}async maybeSendNotification(){var i;if(this.sentNotification)return;const e=mt(this.conversation.id),n=(i=e==null?void 0:e.title)!=null?i:void 0;if(!n)return;const s=he.getCurrentNode(e).message;if(qh(s)&&!kZ(s))return;const o=s.content,a=(o==null?void 0:o.content_type)===ut.Text?KZ(await P(()=>import("./bjkxn2ge6s764t7e.js"),__vite__mapDeps([12,10,1,11,13,14,15,16,17,18,19,20,21,22,23])).then(l=>{var c;return l.markdownToPlaintext((c=o.parts[0])!=null?c:"")}),120):void 0;lf({title:n,subtitle:a,clientThreadId:this.conversation.id}),this.sentNotification=!0}}Tt=new WeakSet,AA=function(){if(this.model!==A6){const n=bn(()=>yn(this.conversation));if(this.model!==A6&&!n.configurableThinkingEffort)return}if(ze(this.ctx,"790459319").get("show-juice-control",!1))return this.thinkingEffort},lx=function(e){const{serverRequestId:n,interruptConversationToken:s}=e;this.turnTracker.onStreamOpen(s!==null),n&&this.turnTracker.onReceivedServerRequestId(n),s&&Ze(this.conversation.id,o=>{o.conduitToken=s}),uZ(this.requestId,this.model,n,Ks(this.preflightTime))},bf=new WeakMap,Ng=function(e){var d,u,f,m;const n=rV(e),s=n.message,o=e instanceof Un?e.code:void 0,a=e instanceof Un?(d=e.detail)==null?void 0:d.can_retry:void 0,i=s===mi,l=i&&!this.treatCompletionAsAsync&&tt(this.ctx)&&ze(this.ctx,"2489999880").get("is_polling_enabled",!1);l&&(this.treatCompletionAsAsync=!0),this.debouncedUpdateExistingMessages.flush(),this.treatCompletionAsAsync&&s===mi&&!l||Ze(this.conversation.id,g=>{cn.updateTree(g,(p,h)=>{var y,b,C,S,E;const x=this.variantsInStreamInfo&&(b=(y=he.getParentPromptNode(g))==null?void 0:y.id)!=null?b:h,v={err:l?dV:s,errType:l?"info":"danger",errCode:l?cV.NetworkErrorWithReconnection:o,completionSampleFinishTime:Date.now(),canRetry:l?!1:a};if(((E=(S=(C=p.getNodeIfExists(x))==null?void 0:C.message)==null?void 0:S.content)==null?void 0:E.content_type)!==ut.Text){const k=W2("");return k.clientMetadata=w(w({},k.clientMetadata),v),p.addMessageNode(x,k)}else p.updateNodeMetadata(x,v)})});try{typeof s=="string"&&s.toLowerCase().includes("blackout hours")&&dt(this.ctx,hX)}catch(g){}try{const g=mt(this.conversation.id),p=he.getLastMessageSystemHints(g);if(p==null?void 0:p.includes(hs)){const x=e instanceof Un?e:void 0,v=x==null?void 0:x.status,y=(u=x==null?void 0:x.isClientError())!=null?u:!1,b=(f=x==null?void 0:x.isServerError())!=null?f:!1,C=i?"network":b?"server":y?"client":"unknown";Fe.addAction("agent.conversation.start_failed",{request_id:this.requestId,model:this.model,error_code:o!=null?o:"unknown",is_network_error:i,is_recoverable_error:l,error_status:v,is_client_error:y,is_server_error:b,error_type:C})}}catch(g){}switch(i&&B.logNetworkError({source:"request_stream",type:l?"info_polling":"error"}),o){case Br.ContentPolicy:case Br.ContentOrTos:case Lu.ModelCapExceeded:case Lu.HistoryDisabledConversationNotFound:break;default:s!==void 0&&qe.logEvent("chatgpt_conversation_error_web",s)}if(this.blurDuringCompletionTracker.onMessageError(),v6(n),Jt(this,Tt,fx).call(this),ai.publish({kind:"completionFinished",serverThreadId:this.responseThreadId}),e instanceof Un&&e.code===Lu.ModelCapExceeded){const g=(m=e.detail)==null?void 0:m.clears_in;g&&(nK(new Date(Date.now()+g*1e3).toISOString()),setTimeout(()=>{FM()},g*1e3))}},IA=function({gizmoId:e}){Ze(this.conversation.id,n=>{n.promptGptRating={gizmoId:e}})},jA=function(e){xv(this.ctx,e.conversation_id,e.title,rh.Generated),this.isSnorlaxEnabledForGizmo||iV(this.ctx,e.conversation_id,e.title),this.maybeSendNotification()},NA=function(e){const{default_model_slug:n}=e;n&&!ih({id:n},this.ctx)&&Ze(this.conversation.id,o=>{o.defaultModelId=n}),ve(this.ctx,"3315017149")&&WE(e)&&this.queryClient.invalidateQueries({queryKey:zE()}),Zu.updateDetails(e)},PA=function(e){hi.updateDetails(e)},RA=function(e){const{async_status:n}=e;n===Xt.REALTIME&&(this.realtimeAsyncCompletion=!0),this.responseThreadId&&Is(this.responseThreadId,{source:ts.SERVER,value:n}),Is(this.conversation.id,{source:ts.SERVER,value:n})},LA=function(e){var i,l;const{token:n}=e;this.resumeToken=n!=null?n:void 0;const s=mt(this.conversation.id),o=he.getLastMessageSystemHints(s),a=o==null?void 0:o.includes(hs);this.realtimeAsyncCompletion&&a&&Fe.addAction("agent.conversation.start_succeeded",{conversation_id:(l=(i=e.conversation_id)!=null?i:this.responseThreadId)!=null?l:"",request_id:this.requestId,model:this.model})},OA=function(e){this.variantsInStreamInfo=e,Ze(this.conversation.id,n=>{cn.updateTree(n,(s,o)=>{var i;const a=(i=he.getParentPromptNode(n))!=null?i:s.getNodeByIdOrMessageId(o);s.updateNodeMetadata(a.id,{variantsInStreamInfo:this.variantsInStreamInfo})})})},DA=function(e){let n=[];const{chips:s}=e;if(s!=null&&s.length)n=s.map(a=>({actionLabel:a.action_label,systemHint:a.system_hint}));else return null;ap(this.conversation).addActiveSystemHintSuggestionChips(n)},FA=function(e){Ze(this.conversation.id,n=>{cn.updateTree(n,s=>{s.updateNodeMessageMetadata(e.messageId,{crisis_helpline_message:e})})})},BA=function(e){dt(this.ctx,IZ,{effect:e})},UA=function(e){const{isCompletion:n,flagged:s,blocked:o,disclaimers:a}=e,i=!!(a!=null&&a.length);(s||o||i)&&(this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged=!0,o&&n&&(this.isCompletionBlocked=!0),kM(e,this.conversation.id))},$A=function(e){const{conversationId:n,url:s,isSafe:o}=e;o&&Ze(n,a=>{a.safeUrls.push(s)})},cx=function({type:e,message:n,conversationId:s}){var o,a,i;if(e==="message"&&(this.activeBranchLastMessage=n),(n==null?void 0:n.author.role)===Ke.Tool&&(n==null?void 0:n.author.name)==="bio"){const l=(o=n.metadata)==null?void 0:o.gizmo_id;setTimeout(()=>{this.queryClient.invalidateQueries({queryKey:$M(l)}),this.queryClient.invalidateQueries({queryKey:VM()})},5e3)}if((a=n.metadata)!=null&&a.trigger_async_ux&&(this.treatCompletionAsAsync=!0,Is(this.conversation.id,{source:ts.SERVER,value:Xt.STREAMING})),he.getTree(mt(s)).containsNodeOrMessageId(n.id)){this.messagesToUpdate[n.id]=n,this.debouncedUpdateExistingMessages();const l=(i=n.metadata)==null?void 0:i.parent_id;if(!l)return;Ze(this.conversation.id,c=>{cn.updateTree(c,d=>{const u=d.getNodeIfExists(n.id),f=d.getNodeIfExists(l);if(!u){Fe.addError(new Error("CompletionRequest handleMessage: message ".concat(n.id," not found in tree")));return}if(!f){Fe.addAction("conversation.input_missing_expected_parent",{message_id:n.id,parent_id:l,completion_type:this.completionType});return}u.parentId!==f.id&&d.moveNode(f.id,u.id)})});return}this.debouncedUpdateExistingMessages.flush(),Ze(this.conversation.id,l=>{cn.updateTree(l,(c,d)=>{var g,p,h,x,v;const u={requestId:this.requestId};n.status!=="in_progress"?u.completionSampleFinishTime=Date.now():this.allIncompleteMessageIds.add(n.id);const f=U(w({},n),{clientMetadata:u});(g=n.metadata)!=null&&g.invoked_resource&&(l.startedWithByoMcp||(l.startedWithByoMcp=((p=n.metadata)==null?void 0:p.invoked_resource.publish_status)==="private"));const m=(h=n.metadata)==null?void 0:h.parent_id;if(m){if(this.placeholderNodeId&&c.getParent(this.placeholderNodeId).id===c.getNodeByIdOrMessageId(m).id)if(U4(f)){c.prependNode(this.placeholderNodeId,f);return}else c.getNodeIfExists(this.placeholderNodeId)&&c.deleteNode(this.placeholderNodeId),this.placeholderNodeId=void 0;const y=c.getNodeByIdOrMessageId(m).children,b=c.addMessageNode(m,f);if(this.completionType===Qa.Next&&((v=(x=this.variantsInStreamInfo)==null?void 0:x.num_variants_in_stream)!=null?v:0)<=1&&y.length>0){for(const C of y)C!==b&&c.moveNode(b,C);return}return b}else{const y=c.findFirst(b=>!U4(b.message));if(y)c.prependNode(y.id,f);else return c.addMessageNode(d,f)}})})},dx=function(e){this.debouncedUpdateExistingMessages.flush(),Ze(this.conversation.id,n=>{cn.updateTree(n,s=>{for(const o of this.allIncompleteMessageIds)s.updateNodeMessageMetadata(o,{finish_details:{type:"interrupted"}})})}),Jt(this,Tt,ux).call(this)},ux=function(){var e;if(this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged||ai.publish({kind:"completionFinished",serverThreadId:this.responseThreadId}),this.isFirstCompletionInThread&&this.responseThreadId){const n=he.getGizmoId(mt(this.responseThreadId)),s=this.queryClient.getQueryState([Yr,{gizmoId:n}]);if((s==null?void 0:s.fetchStatus)!=="fetching"){const o=this.queryClient.getQueryData([Yr,{gizmoId:n}]);((e=o==null?void 0:o.pages.flatMap(l=>l.items))!=null?e:[]).some(l=>l.id===this.responseThreadId)||(lV(this.queryClient,n),B.logEventWithStatsig("Refetch Project Conversation in Completion Request","chatgpt_web_projects_completion_request_new_chat_refetch"))}}ai.publish({kind:"createConversation",clientThreadId:this.conversation.id}),this.blurDuringCompletionTracker.onMessageDone(),v6(),Jt(this,Tt,fx).call(this)},fx=function(){Ze(this.conversation.id,e=>{if(e.shouldRefetchConvoOnFinalize){const n=jt(this.conversation.id);n&&(Ea(n,{skipIfExisting:!1}),cn.setShouldRefetchConvoOnFinalize(e,!1))}cn.updateTree(e,n=>{for(const s of this.allIncompleteMessageIds)n.updateNodeMetadata(s,{completionSampleFinishTime:Date.now()})})}),this.allIncompleteMessageIds.clear(),this.expireConduit&&Ze(this.conversation.id,e=>{e.conduitToken=null}),setTimeout(()=>{if(this.treatCompletionAsAsync||this.realtimeAsyncCompletion){const e=this.treatCompletionAsAsync?Xt.STREAMING:Xt.REALTIME,n=s=>{if(!s)return;const o=uv(this.ctx,s);(o==null||o.source===ts.CLIENT)&&Is(s,{source:ts.SERVER,value:e})};n(this.responseThreadId),n(this.conversation.id)}else Is(this.conversation.id,{source:ts.CLIENT,value:Xt.UNREAD});this.maybeSendNotification(),Tg.removeRequest(this.requestId),fr.releaseThread(this.conversation.id)},0)};const yX=10,vX=Ft(Mn(()=>({requests:{},requestIds:[]}))),Ym=(t,e,n)=>{if(!Cr(_s()).checkGate("1154002920"))return null;vX.setState(s=>{var o,a;if(s.requestIds.length===yX){const i=s.requestIds.shift();i!=null&&delete s.requests[i]}(a=(o=s.requests)[t])!=null||(o[t]={serverRequestId:null,timeToFirstToken:null,apiStartDelay:null,serverStats:null}),s.requests[t][e]=n})},Zm={publishServerRequestId:(t,e)=>{Ym(t,"serverRequestId",e)},publishServerStats:(t,e)=>{Ym(t,"serverStats",e)},publishApiStartDelay:(t,e)=>{Ym(t,"apiStartDelay",e)},publishTimeToFirstToken:(t,e)=>{Ym(t,"timeToFirstToken",e)}},VA=t=>{var e,n;return!!((n=(e=t.metadata)==null?void 0:e.attachments)!=null&&n.length)},HA=t=>{const e=t.content;return e.content_type!==ut.MultimodalText?!1:e.parts.some(bX)},bX=t=>typeof t=="string"?!1:t.content_type===ba.ImageAssetPointer||t.content_type===ba.Image;class CX{constructor(e){J(this,"isAuraRequest");J(this,"surface");J(this,"hasSearchHint",!1);J(this,"hasAuraContextToolMessage",!1);J(this,"hasAuraContextAttachments",!1);J(this,"hasAuraContextImageContent",!1);J(this,"hasFileSearchToolCall",!1);J(this,"modelSlug");this.ctx=e,this.isAuraRequest=hn(),this.surface=this.isAuraRequest?this.resolveSurface():null}trackMessage(e){var a,i,l,c,d,u;if(!this.isAuraRequest)return;const n=(d=(l=(a=e.metadata)==null?void 0:a.model_slug)!=null?l:(i=e.metadata)==null?void 0:i.default_model_slug)!=null?d:(c=e.author.metadata)==null?void 0:c.model_slug;n&&(this.modelSlug=n),this.recordSystemHints((u=e.metadata)==null?void 0:u.system_hints);const s=e.author.name,o=e.author.role;o===Ke.Tool&&s===vu&&(this.hasAuraContextToolMessage||(this.hasAuraContextToolMessage=!0),this.hasAuraContextAttachments||(this.hasAuraContextAttachments=VA(e)),this.hasAuraContextImageContent||(this.hasAuraContextImageContent=HA(e))),!this.hasFileSearchToolCall&&o===Ke.Tool&&s===Nn.FILE_SEARCH&&(this.hasFileSearchToolCall=!0)}recordSystemHints(e){if(!(!this.isAuraRequest||this.hasSearchHint||!e)){for(const n of e)if(n===Pe.Search){this.hasSearchHint=!0;break}}}getTags(){var o,a,i,l;if(!this.isAuraRequest)return;const e=c=>c?"true":"false",n=(a=(o=st(this.ctx))==null?void 0:o.planType)!=null?a:"unknown",s=(i=this.modelSlug)!=null?i:"unknown";return[{key:"surface",value:(l=this.surface)!=null?l:"unknown"},{key:"is_search_request",value:e(this.hasSearchHint)},{key:"has_".concat(vu,"_tool"),value:e(this.hasAuraContextToolMessage)},{key:"has_".concat(vu,"_attachments"),value:e(this.hasAuraContextAttachments)},{key:"has_".concat(vu,"_image_content"),value:e(this.hasAuraContextImageContent)},{key:"has_file_search_tool_call",value:e(this.hasFileSearchToolCall)},{key:"plan_type",value:n},{key:"model_slug",value:s}]}resolveSurface(){return bn(()=>Ko(this.ctx)?"mini-web":mn(this.ctx)?"sidebar":"unknown")}}var E_,$6;function SX(){if($6)return E_;$6=1;function t(e){return e===void 0}return E_=t,E_}var wX=SX();const kX=Zn(wX);var T_,V6;function EX(){if(V6)return T_;V6=1;var t="Expected a function";function e(n){if(typeof n!="function")throw new TypeError(t);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}return T_=e,T_}var M_,H6;function TX(){if(H6)return M_;H6=1;var t=XE(),e=EX(),n=uV();function s(o,a){return n(o,e(t(a)))}return M_=s,M_}var MX=TX();const AX=Zn(MX);function IX(t){return typeof t=="number"?Math.trunc(t):t}const jX=["time_since_prompt_sent_ms","time_since_last_event_ms","first_token_lat","api_start_delay","completion_request_time_to_first_visible_message"],Km="is_kaur1br5";class GA{constructor({ctx:e,clientRequestId:n,gizmoType:s,preflightTime:o,isTemporaryChat:a}){J(this,"ctx");J(this,"start_time_ms");J(this,"turn_id");J(this,"trigger");J(this,"result");J(this,"time_since_prompt_sent_ms");J(this,"stream_update_event_count",0);J(this,"first_token_lat");J(this,"first_visible_content_token_lat");J(this,"first_nav_link_token_lat");J(this,"last_model_message_received");J(this,"api_start_time");J(this,"time_since_last_event_ms");J(this,"api_start_delay");J(this,"completion_request_time_to_first_visible_message");J(this,"model_slug");J(this,"last_message_model_slug");J(this,"tools_used");J(this,"system_hints");J(this,"gizmo_id");J(this,"promptSentTimestamp");J(this,"serverStats");J(this,"serverSteMetadata");J(this,"logger");J(this,"server_request_id");J(this,"client_request_id");J(this,"completed",!1);J(this,"num_images_attached",0);J(this,"num_files_attached",0);J(this,"hasKaur1br5ContextAttachments",!1);J(this,"hasKaur1br5ContextImageContent",!1);J(this,"bytes_received",0);J(this,"model_message_update_count",0);J(this,"stream_encoding");J(this,"stream_buffering",!0);J(this,"gizmo_type");J(this,"isStreamOpen",!1);J(this,"isTemporaryChat");J(this,"hasReceivedAgentMetadataMessage",!1);J(this,"streamTerminatedPrematurely",!1);J(this,"auraTimeToFirstTokenTracker");J(this,"messageMarkerLatencies",{});this.ctx=e,this.client_request_id=n,this.start_time_ms=performance.now(),this.turn_id=os(),this.promptSentTimestamp=o!=null?o:performance.now(),this.tools_used=new Set,this.system_hints=new Set,this.logger=fV.createLogger("turn-analytics","info","http"),this.auraTimeToFirstTokenTracker=new CX(e),s&&(this.gizmo_type=s),this.isTemporaryChat=a}truncateValueForKey(e){const n=IX(this[e]);n!==void 0&&(this[e]=n)}onUserMessages(e){e.forEach(n=>{var s,o,a,i;this.auraTimeToFirstTokenTracker.trackMessage(n),this.updateAuraContextToolMetadata(n),n.author.role==="user"&&((o=(s=n.metadata)==null?void 0:s.attachments)==null||o.forEach(l=>{l.height&&l.width?this.num_images_attached+=1:this.num_files_attached+=1}),(i=(a=n.metadata)==null?void 0:a.system_hints)==null||i.forEach(l=>{this.system_hints.add(l)}))})}addServerPerfStats(e){Zm.publishServerStats(this.client_request_id,e),this.serverStats=e}addServerSteMetadata(e){this.serverSteMetadata=e.metadata}onMessageMarker(e){const s="".concat(e.event,"_").concat("received");this.messageMarkerLatencies[e.marker]=U(w({},this.messageMarkerLatencies[e.marker]),{[s]:performance.now()-this.promptSentTimestamp})}onStreamOpen(e){this.isStreamOpen=!0,this.logCompletionStarted(),this.logTimeToInterruptToken(e!=null?e:!1)}onStreamClose(){this.model_message_update_count>0?this.logCompletion({type:Ga.Success}):this.logCompletion({type:Ga.Error,error:{reason:"empty_response",message:"Successful completion ended with no messages"}})}onPrematureStreamTermination(){var n,s,o;if(this.streamTerminatedPrematurely)return;this.streamTerminatedPrematurely=!0;const e=hn()?"true":"false";Fe.addAction("conversation.stream.terminated_prematurely",{turn_id:this.turn_id,client_request_id:this.client_request_id,server_request_id:this.server_request_id,system_hints:this.system_hints,model_slug:(s=(n=this.model_slug)!=null?n:this.last_message_model_slug)!=null?s:void 0,message_count:this.model_message_update_count,[Km]:e}),Ie.count(je.DEFAULT,"conversation.stream.terminated_prematurely",[{key:"first_system_hint",value:[...this.system_hints][0]||"n/a"},{key:"trigger",value:(o=this.trigger)!=null?o:"unknown"},{key:Km,value:e}])}onCompletionStarted(e,n){switch(e){case"next":this.trigger="submit";break;case"variant":this.trigger="reroll";break;case"continue":this.trigger="continue";break}this.model_slug=n}onReceivedServerRequestId(e){this.server_request_id=e,Zm.publishServerRequestId(this.client_request_id,this.server_request_id)}onStreamEvent(e,n){this.bytes_received+=e,n||(this.stream_update_event_count+=1)}onSentUserMessage(){this.api_start_time=performance.now(),this.api_start_delay=this.api_start_time-this.promptSentTimestamp,Zm.publishApiStartDelay(this.client_request_id,this.api_start_delay)}onMessageUpdate(e){var i,l,c,d;this.auraTimeToFirstTokenTracker.trackMessage(e),this.updateAuraContextToolMetadata(e),e.author.name===Nn.n7jupd_m&&(this.hasReceivedAgentMetadataMessage=!0);const{model_slug:n,gizmo_id:s}=(i=e.metadata)!=null?i:{},{role:o,name:a}=e.author;if(this.gizmo_id=(l=this.gizmo_id)!=null?l:s,o===Ke.Tool&&a&&this.tools_used.add(a),o!==Ke.User&&o!==Ke.System&&o!==Ke.Developer&&o!==Ke.Root&&(this.model_message_update_count+=1,this.last_model_message_received=performance.now(),this.last_message_model_slug=n!=null?n:this.last_message_model_slug),!this.first_token_lat&&e.author.role!==Ke.User&&Zg(e)&&yo(e).length>0){const u=performance.now();this.first_token_lat=u-this.promptSentTimestamp,this.api_start_time&&(this.completion_request_time_to_first_visible_message=u-this.api_start_time),Zm.publishTimeToFirstToken(this.client_request_id,this.first_token_lat);const f=this.auraTimeToFirstTokenTracker.getTags();f&&Ie.hist(je.DEFAULT,"conversation.kaur1br5.time_to_first_token",f,this.first_token_lat)}if(!this.first_visible_content_token_lat&&e.author.role===Ke.Assistant&&Zg(e)&&(this.first_visible_content_token_lat=performance.now()-this.promptSentTimestamp),!this.first_nav_link_token_lat&&lh(e)===ch.SuperWidget){const u=e.content;(d=(c=u==null?void 0:u.widgets)==null?void 0:c.navlinks)!=null&&d.length&&(this.first_nav_link_token_lat=performance.now()-this.promptSentTimestamp)}}updateAuraContextToolMetadata(e){e.author.role!==Ke.Tool||e.author.name!==vu||(this.hasKaur1br5ContextAttachments||(this.hasKaur1br5ContextAttachments=VA(e)),this.hasKaur1br5ContextImageContent||(this.hasKaur1br5ContextImageContent=HA(e)))}handleAbort(e){this.logCompletion({type:Ga.Canceled})}handleRawError(e){var a;let n,s=null,o=null;e instanceof Error?(s=(a=e.message)!=null?a:"Something went wrong",o=e instanceof Un?e.status:void 0):s=e,o===400||s===mi||s==="NetworkError when attempting to fetch resource."||s==="The network connection was lost."?n="network_error":s==="Request timed out"?n="timeout":n="request_failed",this.logCompletion({type:Ga.Error,error:w({reason:n,message:s},o&&{status_code:o})})}getFeatureFlags(){const e={"resumable-streaming":ze(this.ctx,"2489999880",{disableExposureLog:!0}).get("is_resume_enabled",!1)},n=Object.entries(e),s=n.filter(([a,i])=>i).map(([a])=>a),o=n.filter(([a,i])=>!i).map(([a])=>a);return{enabled_feature_flags:s,disabled_feature_flags:o}}createLogPayload(){var i,l,c,d,u;const{enabled_feature_flags:e,disabled_feature_flags:n}=this.getFeatureFlags(),s=Rn(this.ctx),o=mV(this.ctx),a=U(w({turn_id:this.turn_id,trigger:this.trigger,result:Ks((i=this.result)==null?void 0:i.type)},((l=this.result)==null?void 0:l.type)===Ga.Error?{error:this.result.error}:void 0),{time_since_prompt_sent_ms:this.time_since_prompt_sent_ms,stream_update_event_count:this.stream_update_event_count,model_message_update_count:this.model_message_update_count,time_since_last_event_ms:this.time_since_last_event_ms,first_token_lat:this.first_token_lat,first_visible_content_token_lat:this.first_visible_content_token_lat,first_nav_link_token_lat:this.first_nav_link_token_lat,api_start_delay:this.api_start_delay,completion_request_time_to_first_visible_message:this.completion_request_time_to_first_visible_message,bytes_received:this.bytes_received,stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used],system_hints:[...this.system_hints],gizmo_id:this.gizmo_id,attachments:{files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached},has_kaur1br5_context_attachments:this.hasKaur1br5ContextAttachments,has_kaur1br5_context_image_content:this.hasKaur1br5ContextImageContent,temporary_chat:this.isTemporaryChat,gizmo_type:this.gizmo_type,server_ste_metadata:this.serverSteMetadata,message_marker_latencies:this.messageMarkerLatencies,cluster:(c=s.cluster)!=null?c:void 0,residency_region:(d=o==null?void 0:o.residencyRegion)!=null?d:void 0,compute_residency:(u=o==null?void 0:o.computeResidency)!=null?u:void 0,enabled_feature_flags:e,disabled_feature_flags:n});return{request_id:this.server_request_id,turn_analytics:a}}createStatsigPayload(){var e,n;return AX({turn_id:String(this.turn_id),trigger:this.trigger,result:(e=this.result)==null?void 0:e.type,error:JSON.stringify(((n=this.result)==null?void 0:n.type)===Ga.Error?{error:this.result.error}:void 0),time_since_prompt_sent_ms:String(this.time_since_prompt_sent_ms),stream_update_event_count:String(this.stream_update_event_count),model_message_update_count:String(this.model_message_update_count),time_since_last_event_ms:JSON.stringify(this.time_since_last_event_ms),first_token_lat:String(this.first_token_lat),api_start_delay:String(this.api_start_delay),completion_request_time_to_first_visible_message:String(this.completion_request_time_to_first_visible_message),bytes_received:String(this.bytes_received),stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used].join(", "),system_hints:[...this.system_hints].join(", "),gizmo_id:this.gizmo_id,attachments:JSON.stringify({files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached}),has_kaur1br5_context_attachments:String(this.hasKaur1br5ContextAttachments),has_kaur1br5_context_image_content:String(this.hasKaur1br5ContextImageContent),temporary_chat:String(this.isTemporaryChat),gizmo_type:this.gizmo_type,server_ste_metadata:JSON.stringify(this.serverSteMetadata),message_marker_latencies:JSON.stringify(this.messageMarkerLatencies)},kX)}logCompletionStarted(){B.logEventWithStatsig("chatgpt_conversation_turn_turn_exchange_started","chatgpt_conversation_turn_turn_exchange_started",this.createStatsigPayload())}logTimeToInterruptToken(e){e&&Ie.hist(je.DEFAULT,"chatgpt_web_interrupt_token_latency",[],performance.now()-this.promptSentTimestamp),Ie.count(je.DEFAULT,"chatgpt_web_interrupt_token_exists",[{key:"has_conduit_token",value:e?"true":"false"}])}logCompletion(e){var s,o,a;if(this.completed)return;const n=performance.now();Ie.count(je.DEFAULT,"completion_request"),Ie.hist(je.DEFAULT,"completion_request_time",[],n-this.start_time_ms),this.completed=!0,this.result=e;for(const i of jX)this.truncateValueForKey(i);if(this.time_since_prompt_sent_ms=n-this.promptSentTimestamp,this.last_model_message_received&&(this.time_since_last_event_ms=n-this.last_model_message_received),e.type===Ga.Error?this.logger.error("Turn exchange complete",this.createLogPayload()):this.logger.info("Turn exchange complete",this.createLogPayload()),this.system_hints.has(hs)&&!this.hasReceivedAgentMetadataMessage){const i=hn()?"true":"false";Fe.addAction("conversation.stream.agent_metadata_message_missing",{turn_id:this.turn_id,client_request_id:this.client_request_id,server_request_id:this.server_request_id,completion_result:e.type,stream_terminated_prematurely:this.streamTerminatedPrematurely,model_slug:(o=(s=this.model_slug)!=null?s:this.last_message_model_slug)!=null?o:void 0,trigger:this.trigger,[Km]:i}),Ie.count(je.DEFAULT,"conversation.stream.agent_metadata_message_missing",[{key:"trigger",value:(a=this.trigger)!=null?a:"null"},{key:Km,value:i}])}B.logEventWithStatsig("chatgpt_conversation_turn_turn_exchange_complete","chatgpt_conversation_turn_turn_exchange_complete",this.createStatsigPayload())}}const mx=ko(()=>Be(!1));function NX(t){return gV(t)&&!pV(t)}const Qm=50,PX=95;function RX(t,e){if(t<=e)return t/e*Qm;{const n=Qm,s=PX-Qm,o=t-e,i=-(Qm/e)/s;return n+s*(1-Math.exp(i*o))}}class LX{constructor(){J(this,"mostRecentCompletionRequest");J(this,"loggedRequests",new Set)}onCompletionRequestStarted(e){this.mostRecentCompletionRequest={requestId:e,timestamp:Date.now()},this.loggedRequests.clear()}logEvent(e,n,s,o,a){var l;const i=this.mostRecentCompletionRequest;i!=null&&!this.loggedRequests.has(e)&&((l=he.getNode(mt(n),s).message.clientMetadata)==null?void 0:l.requestId)===i.requestId&&(B.logEvent(e,w({messageId:s,timeMs:Date.now()-i.timestamp},o)),a==null||a(),this.loggedRequests.add(e))}}const WA=new LX;function OX(t){var o,a;const e=t.find(i=>{var l;return((l=i.metadata)==null?void 0:l.image_search_results)!==void 0});return((a=(o=e==null?void 0:e.metadata)==null?void 0:o.image_search_results)!=null?a:[]).slice(0,5)}function DX(t){return{event:"attributes",data:{attributes:{isForceHide:t}}}}function A_(t,e){return{event:"fetch.status",data:{useCases:{[t]:{started:Date.now(),status:e}}}}}function zA(t,e){switch(e){case"navlinks":return t.navlinks.length>0;case"images":return t.images.length>0;case"videos":return t.videos.length>0;case"news":return t.news.length>0}return!1}const FX=new Set(["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_id","utm_name","utm_creative","gclid","fbclid","igshid","msclkid","vero_id","oly_enc_id","oly_anon_id","mc_eid","mc_cid","ref","ref_src","trk","spm"]);function BX(t){if(t.hostname=t.hostname.toLowerCase().replace(/^www\./,""),/(^|\.)youtube\.com$/.test(t.hostname)||t.hostname==="youtu.be"){if(t.hostname==="youtu.be"){const s=t.pathname.replace(/^\/+/,"");t.hostname="youtube.com",t.pathname="/watch",t.searchParams.set("v",s)}const e=t.pathname.match(/^\/shorts\/([^/]+)\/?$/i);e&&(t.pathname="/watch",t.searchParams.set("v",e[1])),t.hostname!=="youtube.com"&&(t.hostname="youtube.com");const n=new Set(["t","time_continue","start","feature","si","pp","ab_channel","index","redir_token"]);for(const s of[...t.searchParams.keys()])n.has(s.toLowerCase())&&t.searchParams.delete(s)}if(t.hostname==="x.com"||t.hostname==="twitter.com"||t.hostname==="mobile.twitter.com"||t.hostname==="m.twitter.com"){t.hostname="twitter.com";const e=new Set(["s","t","ref_src"]);for(const n of[...t.searchParams.keys()])e.has(n.toLowerCase())&&t.searchParams.delete(n)}if(t.hostname==="instagram.com"||t.hostname==="m.instagram.com"){t.hostname="instagram.com";const e=new Set(["hl"]);for(const n of[...t.searchParams.keys()])e.has(n.toLowerCase())&&t.searchParams.delete(n)}}function mp(t){const e=(t!=null?t:"").trim();if(!e)return"";try{const n=/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e),s=new URL(n?e:"http://".concat(e));s.protocol=s.protocol.toLowerCase(),s.username="",s.password="",s.hostname=s.hostname.replace(/\.$/,""),(s.protocol==="http:"&&s.port==="80"||s.protocol==="https:"&&s.port==="443")&&(s.port=""),s.hash="",s.pathname=s.pathname.replace(/\/{2,}/g,"/"),s.pathname!=="/"&&s.pathname.endsWith("/")&&(s.pathname=s.pathname.slice(0,-1)),BX(s);const o=s.searchParams,a=[],i=new Set;for(const d of o.keys()){const u=d.toLowerCase();u.startsWith("utm_")||FX.has(u)||i.has(d)||(i.add(d),a.push([d,o.getAll(d).sort((f,m)=>f.localeCompare(m))]))}a.sort((d,u)=>d[0].localeCompare(u[0]));const l=new URLSearchParams;for(const[d,u]of a)for(const f of u)l.append(d,f);return"".concat(s.hostname.toLowerCase()).concat(s.pathname).concat(l.toString()?"?".concat(l.toString()):"").toLowerCase()}catch(n){return e.replace(/^https?:\/\//i,"").replace(/^www\./i,"").replace(/\/{2,}/g,"/").replace(/\/+$/g,"").toLowerCase()}}function Qr(t,e,n){var a,i,l;if(!(e!=null&&e.length))return t;const s=[...t],o=new Map;for(let c=0;c<s.length;c++)o.set(mp(s[c].url),c);for(const c of e){const d=mp(c.url);if(!o.has(d)){const h=c.sources===void 0&&c.source!==void 0?U(w({},c),{sources:[c.source]}):c;o.set(d,s.push(h)-1);continue}const u=o.get(d);if(u===void 0)continue;let f=!0;if(c.domain!==void 0){const h=s[u].domain;(h===void 0||n&&c.domain!==h)&&(s[u]=U(w({},s[u]),{domain:c.domain}),f=!1)}c.snippet!==void 0&&c.snippet!==s[u].snippet&&(f?(s[u]=U(w({},s[u]),{snippet:c.snippet}),f=!1):s[u].snippet=c.snippet);let m=s[u];const g=m.source;g&&(m.sources===void 0||!m.sources.includes(g))&&(f&&(s[u]=w({},s[u]),m=s[u],f=!1),m.sources=(a=m.sources)!=null?a:[],m.sources.push(g));const p=[...c.source?[c.source]:[],...(i=c.sources)!=null?i:[]];if(p.length)for(const h of p)h&&(m.sources===void 0||!m.sources.includes(h))&&(f&&(s[u]=w({},s[u]),m=s[u],f=!1),m.sources=(l=m.sources)!=null?l:[],m.sources.push(h))}return s}function I_(t,e=[]){if(!t.length||!e.length)return t;const n=new Map;for(const a of e){const i=mp(a.url);i&&n.set(i,a.attribution)}let s=!1;const o=t.map(a=>{const i=mp(a.url),l=i?n.get(i):void 0;return l&&a.domain!==l?(s=!0,U(w({},a),{domain:l})):a});return s?o:t}var ir=(t=>(t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.DONE=1]="DONE",t[t.ERROR=2]="ERROR",t))(ir||{}),Jr=(t=>(t[t.NOT_RUN=0]="NOT_RUN",t[t.SAFE=1]="SAFE",t[t.ADULT=2]="ADULT",t[t.FLAGGED=3]="FLAGGED",t))(Jr||{});const Lc={navlinks:[],images:[],videos:[],news:[],isSearchLikely:void 0,analytics:{},safeSearchOff:!1},UX=t=>({entries:{},updateFromEvent:(e,n)=>t(s=>{var i,l,c,d,u,f,m,g,p,h,x,v,y;const o=(i=s.entries[e])!=null?i:Lc;let a=o;switch(n.event){case"navlinks":a=U(w({},o),{navlinks:Qr(o.navlinks,(l=n.data.navlinks)!=null?l:[],!1),images:Qr(o.images,(c=n.data.images)!=null?c:[],!1),videos:Qr(o.videos,(d=n.data.videos)!=null?d:[],!1),news:Qr(o.news,(u=n.data.news)!=null?u:[],!1)}),o.analytics.firstNavlinkFetched===void 0&&((f=n.data.navlinks)!=null?f:[]).length>0&&(a.analytics=U(w({},o.analytics),{firstNavlinkFetched:n.processTime,firstNavlinksFetchedTS:n.timestampMs}));break;case"search.classifier":a=U(w({},o),{isSearchLikely:n.data.is_search_likely}),o.analytics.firstClassifierFetched===void 0&&n.data.is_search_likely&&(a.analytics=U(w({},o.analytics),{firstClassifierFetched:n.processTime,firstClassifierFetchedTS:n.timestampMs}));break;case"attributions":a=U(w({},o),{navlinks:I_(o.navlinks,(m=n.data.attributions)!=null?m:[]),videos:I_(o.videos,(g=n.data.attributions)!=null?g:[]),news:I_(o.news,(p=n.data.attributions)!=null?p:[])});break;case"attributes":{const b=(h=n.data.attributes)!=null?h:{};a=U(w({},o),{isNoForceSearch:b.shortQueryNoOptimize!==void 0?!!b.shortQueryNoOptimize:o.isNoForceSearch,isNavlinkIntent:b.isNavlinkIntent!==void 0?!!b.isNavlinkIntent:o.isNavlinkIntent,isForceHide:b.isForceHide!==void 0?!!b.isForceHide:o.isForceHide,truncateFastNavlinks:b.truncateFastNavlinks!==void 0?Number(b.truncateFastNavlinks):o.truncateFastNavlinks});break}case"fetch.status":a=U(w({},o),{fetchingStatus:w(w({},(x=o.fetchingStatus)!=null?x:{}),(v=n.data.useCases)!=null?v:{})});break;case"log":switch(n.data.event){case"fetchSonicNavLinks.start":a=U(w({},o),{analytics:U(w({},o.analytics),{lastStartFetch:n.processTime,lastStartFetchTS:n.timestampMs,firstStartFetch:o.analytics.firstStartFetch!==void 0?o.analytics.firstStartFetch:n.processTime})});break;case"fetchBENavlinks.start":o.analytics.firstRoundtripTime===void 0&&(a=U(w({},o),{analytics:U(w({},o.analytics),{firstRoundtripTime:n.processTime})}));break;case"fetchNavlinks.finished":a=U(w({},o),{fetchingStatus:U(w({},(y=o.fetchingStatus)!=null?y:{}),{navlinks:{started:0,status:1}})});break;case"navlinkRequested":a=U(w({},o),{analytics:U(w({},o.analytics),{requestedTimeUnixEpochMs:n.timestampMs})});break;case"search_safety_safe":a=U(w({},o),{safety:1});break;case"search_safety_adult":a=U(w({},o),{safety:2});break;case"search_safety_flagged":a=U(w({},o),{safety:3});break;case"search_safety_not_run":a=U(w({},o),{safety:0});break;case"shortQueryNoOptimize":a=U(w({},o),{isNoForceSearch:!0});break;case"isNavlinkIntent":a=U(w({},o),{isNavlinkIntent:!0});break;case"safe_search_off":a=U(w({},o),{safeSearchOff:!0});break}break}return{entries:U(w({},s.entries),{[e]:a})}})}),Xa=Wy()(UX,Sl);function $X(t,e){return Xa(n=>{var o,a,i;if(t==null)return Lc;const s=(a=(o=n.entries[t])==null?void 0:o.safeSearchOff)!=null?a:!1;return e!==void 0&&s!==e?Lc:(i=n.entries[t])!=null?i:Lc})}function VX(t){Xa.setState(e=>{const o=e.entries,{[t]:n}=o;return{entries:we(o,[D4(t)])}})}const HX=8e3;async function Eu(t,e,n,s){var v,y;if(e.length===0)return;const o=Xa.getState();let a=o.entries[e];if(a){if(a.safety===Jr.ADULT&&s!==void 0&&s!==!!a.safeSearchOff)VX(e),a=Lc;else if(zA(a,n))return}if(((y=(v=a==null?void 0:a.fetchingStatus)==null?void 0:v[n])==null?void 0:y.started)!==void 0)return;Xa.getState().updateFromEvent(e,A_(n,ir.IN_PROGRESS));const l={query:e,classifier:!1,attributions:n!=="images",[n]:!0,is_strict:!s};let c=null,d=!1;const f=rs(t,"3205212221").get("retry",{}),m=typeof f[n]=="number"?Math.max(Math.min(f[n],10),0):0,g=typeof f.timeoutMs=="number"?Math.max(f.timeoutMs,500):6e3;let h=typeof f.retryDelayMs=="number"?f.retryDelayMs:0;const x=async()=>{var b;try{const T="".concat(Kc,"/navlinks");try{for(var C=Io(lp(T,{ctx:t,method:"POST",headers:w({},Qh()),body:l})),S,E,k;S=!(E=await C.next()).done;S=!1){const M=E.value;if("response"in M)continue;const A=(b=M.event)!=null?b:void 0;if(A===void 0)continue;const I=M.data;o.updateFromEvent(e,{event:A,data:I,timestampMs:Date.now()})}}catch(E){k=[E]}finally{try{S&&(E=C.return)&&await E.call(C)}finally{if(k)throw k[0]}}d=!0,Xa.getState().updateFromEvent(e,A_(n,ir.DONE))}catch(T){c=T}};for(let b=0;b<=m;b++){b>0&&(await G6(h),h=h*2+Math.random()*10);const C=x(),S=G6(g);if(await Promise.race([C,S]),d)break}!d&&c!=null&&(Xa.getState().updateFromEvent(e,A_(n,ir.ERROR)),Fe.addError(new Error("Failed to fetch navlinks",{cause:c})))}function qA(t,e){var i,l,c,d,u,f;const n=(l=(i=t.fetchingStatus)==null?void 0:i[e])==null?void 0:l.started;if(!n)return!1;const o=Date.now()-n>HX;return!(zA(t,e)||o||((d=(c=t.fetchingStatus)==null?void 0:c[e])==null?void 0:d.status)===ir.DONE||((f=(u=t.fetchingStatus)==null?void 0:u[e])==null?void 0:f.status)===ir.ERROR)}function Jm(t,e){var s;if(!t)return!1;const n=(s=Xa.getState().entries[t])!=null?s:Lc;return qA(n,e)}function G6(t){return new Promise(e=>setTimeout(e,t))}const GX=(t,e=!1)=>{var n;return t==="web"?$4.Web:t==="cloud"?$4.Cloud:(n=zy[t])!=null?n:e?t:void 0},_i=(t,e=!1)=>Array.from(t.values()).map(n=>GX(n,e)).filter(Boolean),WX="I took control of the virtual browser. If you're unsure what changed, ask for more context. If the task is complete, just acknowledge and wrap it up. Otherwise, please proceed.",$n=Ft(()=>({token:null,clientThreadId:null,isOpen:!1,isResuming:!1,isTakeoverInProgress:!1,parentMessageId:null,vmId:null,abortPromise:null})),aGe=(t,e)=>{$n.setState(n=>U(w({},n),{clientThreadId:t,token:e}))},zX=t=>{var n;const e=Uv();((n=e.clientMetadata)!=null?n:e.clientMetadata={}).isPlaceholder=!0,Ze(t,s=>{cn.appendMessage(s,e)})},YA=t=>{Ze(t,e=>{cn.updateTree(e,n=>{const s=n.nodes.filter(o=>{var l,c,d;const a=(l=o.message)==null?void 0:l.metadata,i=(c=o.message)==null?void 0:c.clientMetadata;return(i==null?void 0:i.isPlaceholder)&&(a==null?void 0:a.is_takeover_ended_message)&&((d=a==null?void 0:a.system_hints)==null?void 0:d.includes(hs))});for(const o of s)n.updateNodeMetadata(o.id,{isPlaceholder:!1})})})},Uv=(t,e)=>is(WX,w(w({is_takeover_ended_message:!0,system_hints:[hs]},t&&{selected_sources:_i(t)}),e!=null?e:{})),rGe=()=>{$n.setState({token:null,clientThreadId:null,isOpen:!1,isTakeoverInProgress:!1})};function qX(t){return t instanceof KeyboardEvent||"key"in t||"detail"in t&&t.detail===0?"keyboard":"mouse"}async function Zo({conversation:t,requestedModelId:e,completionType:n=Qa.Next,sourceEvent:s,eventSource:o,completionMetadata:a,extraStreamParams:i,parentMessageId:l,promptMessage:c,existingMessages:d,prependMessages:u,appendMessages:f,profiler:m,skipNotification:g,disablePlaceholder:p,isReasoningSkipped:h,parentMessageIdPromise:x,thinkingEffort:v}){var be,fe,ue,_e,Te,$e,Ne,Ae,He,Qe;const y=t.ctx;mx.set(t,!0);const b=Qo(y),C=(be=s==null?void 0:s.timeStamp)!=null?be:performance.now(),S=o!=null?o:s?qX(s):"mouse",E=eT(),k="request-".concat(t.id,"-").concat(E),T=mt(t.id),{conduitToken:M=null,prepareState:A="none",lastPrepareTimestamp:I=null}=T!=null?T:{},N=e!=null?e:bn(()=>yn(t).id),L=bn(()=>Mf(y)),O=he.findNode(T,et=>et.message.author.role===Ke.Assistant||et.message.author.role===Ke.Tool)==null,D=(T==null?void 0:T.continuingFromSharedConversationId)!=null,$=(T==null?void 0:T.continuingFromSharedProjectConversationId)!=null,H=!!(T!=null&&T.continuingFromSharedPostId),G=(T==null?void 0:T.branchingFromConversationId)!=null,Z=he.getConversationLastTurn(T),Q=Z==null?void 0:Z.messages.some(et=>{var Ct;return(Ct=et.metadata)==null?void 0:Ct.n7jupd_message});let q=l?he.getNode(T,l):d!=null&&d[0]?he.getParentNode(T,d[0].id):he.getCurrentNode(T),Y=l;q.message.id.startsWith(Gy)&&(q=he.getParentNode(T,q.message.id),Y=(fe=q.message.id)!=null?fe:q.id);let te=(ue=q.message.id)!=null?ue:q.id;$n.getState().isTakeoverInProgress&&($n.setState({isTakeoverInProgress:!1}),YA(t.id),u=[...u!=null?u:[],Uv()]);const ae=[...d!=null?d:[],...u!=null?u:[],...c?[c]:[],...f!=null?f:[]],se=bn(()=>tT(y,Qc(t))),ce=new GA({ctx:y,clientRequestId:k,gizmoType:se,preflightTime:C,isTemporaryChat:L});if(ce.onUserMessages(ae),se===Qg.PROJECT&&O){const et=a==null?void 0:a.systemHints;hV.set(t,et)}const X=bn(()=>_d(y)),ee=bn(()=>_V(y)),ie=_t.getItem(Ue.ModelSlugStatsOverride),de=new MA(y,k,b,T,t,Y,u,c,f,n,N,S,X,C,se===Qg.PROJECT,O,D,G,$,ce,g!=null?g:!1,ee,H,h,v,ie,(_e=T==null?void 0:T.steeringAsyncTaskId)!=null?_e:void 0,{disablePlaceholder:p!=null?p:!1},!_v(y));xV(t.id);const me=(Te=a==null?void 0:a.systemHints)==null?void 0:Te.includes(hs),xe=hn();if(xe){const et=!((a==null?void 0:a.systemHints)===void 0||a.systemHints.length===0||a.systemHints.length===1&&a.systemHints.includes(Pe.Search)),Ct=((Ae=(Ne=($e=c==null?void 0:c.metadata)==null?void 0:$e.attachments)==null?void 0:Ne.length)!=null?Ae:0)>0,vt=c!=null&&c.metadata?c.metadata[KE]:void 0,At=!!((He=vt==null?void 0:vt.sources)!=null&&He.length),Ht=et||Ct||At;if(c){const Ot=yo(c,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0});if(Xa.getState().updateFromEvent(Ot,DX(Ht)),O)try{const en=rs(y,"3205212221").get("optimistic_fetch",{}),Qt=tn=>{const gn=en[tn];typeof gn!="number"||!isFinite(gn)||gn<=0||Math.random()<gn&&Eu(y,Ot,tn)};Qt("images"),Qt("videos"),Qt("news")}catch(Vt){}}}me&&Fe.addAction("agent.conversation.start_attempted",{client_thread_id:String(t.id),model:N});const pe=Hh(t.id,void 0,{clientInitiated:!0,reason:"new_completion",hasAgentSystemHint:me});if(ai.publish({kind:"requestCompletion"}),Is(t.id,{source:ts.CLIENT,value:me?Xt.REALTIME:Xt.STREAMING}),WA.onCompletionRequestStarted(k),de.updateBeforeRequest(),((Qe=uv(y,t.id))==null?void 0:Qe.value)===Xt.REALTIME&&!!!(Q&&h)&&pe){const et=await pe;et!=null&&et.last_message_id&&(te=et.last_message_id)}if(x){const et=await x;et&&(te=et)}const ke=eA(y,a),{chatReq:Le,turnstileToken:De,proofToken:le}=yV(ke)?await ke:ke;if(Le.force_login)return;if(b.getQueriesData(V4())==null&&await b.ensureQueryData(V4()),XY()){const et=await eZ(),Ct=At=>typeof At=="object"&&At!=null&&"id"in At,vt=et.flatMap(At=>At.status!=="fulfilled"||!At.value?[]:Array.isArray(At.value)?At.value.filter(Ct):Ct(At.value)?[At.value]:[]);if(vt.length>0){const At=[...vt].reverse();ae.unshift(...At),YX({conversation:t,request:de,messages:At})}}ce.onCompletionStarted(n,N),de.preflightTime=performance.now()-C;const oe=Wh(y);if(Fe.addFeatureFlagEvaluation("fast_convo",oe),oe&&I!=null){const et=performance.now()-I;et<=6e4&&Ie.hist(je.DEFAULT,"fast_conversation_last_prepare_to_convo_client",[{key:"model_id",value:N},{key:"prepare_state",value:String(A)},{key:"has_conduit_token",value:M!=null?"true":"false"}],et)}oe&&xe&&Ie.count(je.DEFAULT,"client_request_conduit_token",[{key:"has_conduit_token",value:M!=null?"true":"false"}]),xe&&(m==null||m.logTimingOnce("prompt_request_started")),await de.sendRequest({conduitToken:M,turnstileToken:De,proofToken:le,completionMetadata:a,resolvedParentMessageId:te,messages:ae,extraStreamParams:i,chatReq:Le,profiler:m})}function YX({conversation:t,request:e,messages:n}){Ze(t.id,s=>{cn.updateTree(s,o=>{var i,l,c,d;const a=(d=(l=(i=e.prependMessages)==null?void 0:i[0])!=null?l:e.promptMessage)!=null?d:(c=e.appendMessages)==null?void 0:c[0];if(a&&o.containsNodeOrMessageId(a.id)){for(const u of n)o.containsNodeOrMessageId(u.id)||o.prependNode(a.id,u);return}})})}async function ZX({ctx:t,conversation:e,completionType:n,token:s,serverThreadId:o,preflightTime:a}){const i=a!=null?a:performance.now();if(bn(()=>mx(e)))return;mx.set(e,!0);const l=Qo(t),c=bn(()=>tT(t,Qc(e))),d=bn(()=>yn(e).id),u=bn(()=>Mf(t)),f=bn(()=>_d(t));Is(e.id,{source:ts.CLIENT,value:Xt.STREAMING});const m=eT(),g="request-".concat(e.id,"-").concat(m),p=new GA({ctx:t,clientRequestId:g,gizmoType:c,preflightTime:i,isTemporaryChat:u});mt(e.id)||fr.initThread({clientThreadId:e.id,conversationMode:{kind:wt.PrimaryAssistant},userId:void 0,accountId:void 0}),fr.retainThread(e.id);const h=new MA(t,g,l,void 0,e,void 0,void 0,void 0,void 0,n,d,"url",f,i,c===Qg.PROJECT,!1,!1,!1,!1,p,void 0,!1,void 0,void 0,void 0,void 0,void 0,{disablePlaceholder:!0},!_v(t));h.preflightTime=0,await h.sendResumeRequest({conversationId:o,resumeToken:s,profiler:void 0})}const KX=720*60*60*1e3;class zf extends Si()(()=>{var n,s;const e=_t.getItem(Ue.MessageFollowupsStoreState);return e?{disabledGlobally:(n=e.disabledGlobally)!=null?n:!1,disabledConversations:new Map((s=e.disabledConversations)!=null?s:[])}:{disabledGlobally:!1,disabledConversations:new Map}}){persistState(){const e=this.getState(),n=Date.now(),s=new Map(Array.from(e.disabledConversations.entries()).filter(([,a])=>a.disabledAt===null||n-a.disabledAt<KX)),o={disabledGlobally:e.disabledGlobally,disabledConversations:Array.from(s.entries())};_t.setItem(Ue.MessageFollowupsStoreState,o)}setDisabledGlobally(e){this.setState({disabledGlobally:e}),this.persistState()}setDisabledConversation(e,n){this.setState(s=>{var o;return{disabledConversations:(o=s.disabledConversations)==null?void 0:o.set(e,{disabled:n,disabledAt:n?Date.now():null})}}),this.persistState()}static useDisabledGlobally(){return this.useState(e=>e.disabledGlobally)}static useIsDisabledConversation(e){return this.useState(n=>{var s,o,a;return(a=(o=(s=n.disabledConversations)==null?void 0:s.get(e))==null?void 0:o.disabled)!=null?a:!1})}static useIsEnabled(e){return this.useState(n=>{var o,a;const s=(o=n.disabledConversations)==null?void 0:o.get(e);return!((a=s==null?void 0:s.disabled)!=null?a:n.disabledGlobally)})}}function Xh(t,e={}){var n;return{systemHints:t.filter(s=>s!==Pe.Search),extraStreamParams:U(w({},e),{forceUseSearch:(n=e.forceUseSearch)!=null?n:t.includes(Pe.Search)?!0:void 0})}}function QX(t){return mr.isMultimodalTextMessage(t)?t.content.parts.flatMap(e=>typeof e!="string"&&e.content_type===ba.VideoAssetPointer?e:null).filter(e=>!!e):[]}const JX=(t,e)=>{var a;const n={"video/mp4":"mp4","video/quicktime":"mov"},s={mp4:"mp4",mov:"mov"},o=(a=e.split(".").pop())==null?void 0:a.toLowerCase();return n[t]||s[o!=null?o:""]||void 0};function XX(t,e,n,s,o){let a=vV.getReadyFiles(t.getState());(s==null?void 0:s.kind)===wt.GizmoMagicCreate?a=a.filter(p=>p.gizmoId!=null):a=a.filter(p=>p.gizmoId==null);let i=e!=null?e:"";const l=[],c=[],d=nT(n,s,o),f=bV(n,s).length>0,m=d===ho.Interpreter||d===ho.Retrieval||d===ho.ContextConnector,g=ve(_s(),"3681682292");return a.forEach(p=>{var v;const h=p.fileSpec,x=JX(h.mimeType,h.name);if(m&&!(f&&g&&x)){const y=h.contextConnectorInfo,b={id:h.id,size:h.size,name:h.name,context_connector_info:y?{context_connector:y==null?void 0:y.contextConnector,source_url:y==null?void 0:y.sourceUrl,synthetic_extension:(v=y==null?void 0:y.syntheticExtension)!=null?v:null,type:y==null?void 0:y.type}:void 0,mime_type:h.mimeType,width:"width"in h?h.width:void 0,height:"height"in h?h.height:void 0,file_token_size:h.fileTokenSize,source:p.source,library_file_id:p.libraryFileId};l.push(b)}f&&("width"in h&&"height"in h&&c.push({content_type:ba.ImageAssetPointer,asset_pointer:z2(h.id),size_bytes:h.size,width:h.width,height:h.height}),g&&x&&c.push({content_type:ba.VideoAssetPointer,asset_pointer:z2(h.id),size_bytes:h.size,format:x,metadata:{source:"quick_video_capture"}}))}),c.length>0&&(c.push(e!=null?e:""),i={content_type:ut.MultimodalText,parts:c}),{content:i,attachments:l}}var ZA=(t=>(t.Header="Header",t.HeaderTop="HeaderTop",t.HeaderBottom="HeaderBottom",t))(ZA||{}),eee=(t=>(t.Box="Box",t.PromptTextareaAction="PromptTextareaAction",t.BannerTermsDisclaimer="BannerTermsDisclaimer",t.NewUserBannerTermsDisclaimer="NewUserBannerTermsDisclaimer",t.BannerSignup="BannerSignup",t.BannersRateLimit="BannersRateLimit",t.BannersBeaconUI="BannersBeaconUI",t.BannerSidekickAnnouncement="BannerSidekickAnnouncement",t.BannerMemoryFull="BannerMemoryFull",t.BannerMemoryAlmostFull="BannerMemoryAlmostFull",t.ParagenControls="ParagenControls",t.AdvancedVoiceOnMobileAnnouncement="AdvancedVoiceOnMobileAnnouncement",t.SearchBrowserExtensionAnnouncement="SearchBrowserExtensionAnnouncement",t.SearchBrowserExtensionReactiveAnnouncement="SearchBrowserExtensionReactiveAnnouncement",t.MoonshineAnnouncement="MoonshineAnnouncement",t.CustomizeChatGPTAnnouncement="CustomizeChatGPTAnnouncement",t.ProjectConversationTaskNoFileAccess="ProjectConversationTaskNoFileAccess",t.JawboneAnnouncement="JawboneAnnouncement",t.JawboneMaxActiveAnnouncement="JawboneMaxActiveAnnouncement",t.PromoRedemptionAnnouncement="PromoRedemptionAnnouncement",t.OperatorAnnouncement="OperatorAnnouncement",t.BannerPlusUpsell="BannerPlusUpsell",t.PlusFreeTrialHomepageAnnouncementBanner="PlusFreeTrialHomepageAnnouncementBanner",t.ContextualAnswersAdminUpsell="ContextualAnswersAdminUpsell",t.ContextualAnswersUserUpsell="ContextualAnswersUserUpsell",t.ReferrerRedemptionAvailableAnnouncement="ReferrerRedemptionAvailableAnnouncement",t.RefereeRedemptionAvailableAnnouncement="RefereeRedemptionAvailableAnnouncement",t.ReferralProgramUpsellAnnouncement="ReferralProgramUpsellAnnouncement",t.TatertotIntakeFormAnnouncement="TatertotIntakeFormAnnouncement",t.StudentsUpsellAnnouncement="StudentsUpsellAnnouncement",t.TeamSeatsPromoAnnouncement="TeamSeatsPromoAnnouncement",t.ModelDeprecationBanner="ModelDeprecationBanner",t.TeamsContextualAnswersUpsell="TeamsContextualAnswersUpsell",t.LanguageUpsellBanner="LanguageUpsellBanner",t.AgentModeAnnouncementBanner="AgentModeAnnouncementBanner",t.GoldenHourAnnouncementBanner="GoldenHourAnnouncementBanner",t.BannerNoAuthTrials="BannerNoAuthTrials",t.StarterPrompts="StarterPrompts",t.ImageGenBanner="ImageGenBanner",t.SystemHintSuggestion="SystemHintSuggestion",t))(eee||{}),tee=(t=>(t.DallePromptControls="DallePromptControls",t))(tee||{});const W6={contentAreas:{Header:{dimensions:null,contentId:null},HeaderTop:{dimensions:null,contentId:null},HeaderBottom:{dimensions:null,contentId:null}},sharedProps:null};function nee(){const t=Ft(Af(Mn(()=>W6)));function e(n,s){t.setState(o=>{o.contentAreas[n].dimensions=s})}return{reset:()=>t.setState(W6),useContentAreaId(n){return t(s=>s.contentAreas[n].contentId)},useHasAnnouncementInHeader(){const n=t(s=>s.contentAreas.HeaderTop.contentId);return n==="AdvancedVoiceOnMobileAnnouncement"||n==="BannerSidekickAnnouncement"},useContentAreaApi(n){const s=_.useCallback(a=>t.setState(i=>{i.contentAreas[n].contentId=a}),[n]),o=_.useCallback(()=>{t.setState(a=>{a.contentAreas[n].contentId=null})},[n]);return{set:s,remove:o}},useContentAreaDimensions(n,s){return t(o=>s(o.contentAreas[n].dimensions))},useContentAreaResizeObserver(n,s){_.useEffect(()=>{if(s.current){e(n,s.current.getBoundingClientRect());const o=new ResizeObserver(a=>{for(const i of a)e(n,i.contentRect)});return o.observe(s.current),()=>{o.disconnect(),e(n,null)}}},[s,n])},useIsHeaderContentAreaPopulated(){return t(n=>!!n.contentAreas.HeaderTop.contentId||!!n.contentAreas.HeaderBottom.contentId)},useSharedProps(n){return t(s=>n?n(s.sharedProps):s.sharedProps)},getSharedProps(){return t.getState().sharedProps},useSetSharedProps(){return _.useCallback(n=>{t.setState(s=>{s.sharedProps=n})},[])}}}const KA=_.createContext(null);function iGe(t){"use forget";const e=W.c(3),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={store:nee()},e[0]=s):s=e[0];let o;return e[1]!==n?(o=r.jsx(KA.Provider,{value:s,children:n}),e[1]=n,e[2]=o):o=e[2],o}function Ld(t){"use forget";const e=t===void 0?!0:t,n=_.useContext(KA);if(!n&&e)throw new Error("usePromptTextareaContext must be used within a PromptTextareaProvider");return n}function Od(){"use forget";const t=W.c(8),e=V(),{store:n}=Ld(),s=xs(),{clearSystemHintModeTrigger:o,getSystemHintModeTrigger:a}=sa(),i=!zf.useDisabledGlobally(),l=wi();let c;return t[0]!==s||t[1]!==o||t[2]!==e||t[3]!==l||t[4]!==a||t[5]!==i||t[6]!==n?(c=(d,u,f,m)=>{var Y,te,ae,se,ce,X,ee;const g=n.getSharedProps();if(!g)return;const{clientThreadId:p,onResetState:h,conversationMode:x}=g,v=xt(e,p);Ln.hideThreadHeader();const y=s===Pe.Search,b=y?a(Pe.Search):void 0,C=mt(p);let S;u.type===Je.Starter&&(S=(Y=u.data)==null?void 0:Y.system_hint);const E=S!=null?S:s,k=(ae=(te=C==null?void 0:C.selectedSources)==null?void 0:te.get(E))!=null?ae:new Set;let T,M;if(Iv(u))T=u.categoryId!=="ask"?[u.categoryId]:[],M=u.modelOverride?{model:u.modelOverride}:{};else{const ie=Xh(E?[E]:[]);T=(se=ie.systemHints)!=null?se:[],M=(ce=ie.extraStreamParams)!=null?ce:{}}i&&(M.enableMessageFollowups=!0);const A=yn(v),{content:I,attachments:N}=XX(l,po(u),A,x,E),L=T.includes(Pe.Slurm),O=T.includes(Pe.Glaux),D=Gh(),$=w({suggestion_type:u.type,starter_prompt_id:"id"in u?u.id:void 0,selected_sources:L||O?Array.from(k.values()).map(oee).filter(Boolean):void 0},T.length>0&&{system_hints:T});if(D&&($.__internal={search_settings:D}),N.length>0&&($.attachments=N),u.type===Je.Starter&&((X=u.data)!=null&&X.kaur1br5)){const ie=(ee=u.data)==null?void 0:ee.kaur1br5;$.kaur1br5=ie}const H=is(I,$),G=[];(C==null?void 0:C.startedWithByoMcp)===!0&&G.push(qy("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));let Z;if(T!=null&&T.some(see)&&Yy(e)){const ie=CV(e);ie&&(Z=ie)}Zo({conversation:v,requestedModelId:Z,promptMessage:H,prependMessages:G,sourceEvent:d,extraStreamParams:M,completionMetadata:{suggestions:f,suggestion:u,suggestionIndex:m,conversationMode:x!=null?x:C==null?void 0:C.mode,systemHints:T,searchSource:b}});const q=he.getCurrentNode(C).message.id;h(),Kh(u,m,p,q),Zy()||jv(),b&&y&&o(Pe.Search)},t[0]=s,t[1]=o,t[2]=e,t[3]=l,t[4]=a,t[5]=i,t[6]=n,t[7]=c):c=t[7],c}function see(t){return Pc(t)}function oee(t){return zy[t]}const QA=(function(t){if(t==null)return lee;if(typeof t=="function")return e1(t);if(typeof t=="object")return Array.isArray(t)?aee(t):ree(t);if(typeof t=="string")return iee(t);throw new Error("Expected function, string, or object as test")});function aee(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=QA(t[n]);return e1(s);function s(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function ree(t){const e=t;return e1(n);function n(s){const o=s;let a;for(a in t)if(o[a]!==e[a])return!1;return!0}}function iee(t){return e1(e);function e(n){return n&&n.type===t}}function e1(t){return e;function e(n,s,o){return!!(cee(n)&&t.call(this,n,typeof s=="number"?s:void 0,o||void 0))}}function lee(){return!0}function cee(t){return t!==null&&typeof t=="object"&&"type"in t}const JA=[],dee=!0,z6=!1,uee="skip";function fee(t,e,n,s){let o;typeof e=="function"&&typeof n!="function"?(s=n,n=e):o=e;const a=QA(o),i=s?-1:1;l(t,void 0,[])();function l(c,d,u){const f=c&&typeof c=="object"?c:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=JA,p,h,x;if((!e||a(c,d,u[u.length-1]||void 0))&&(g=mee(n(c,u)),g[0]===z6))return g;if("children"in c&&c.children){const v=c;if(v.children&&g[0]!==uee)for(h=(s?v.children.length:-1)+i,x=u.concat(v);h>-1&&h<v.children.length;){const y=v.children[h];if(p=l(y,h,x)(),p[0]===z6)return p;h=typeof p[1]=="number"?p[1]:h+i}}return g}}}function mee(t){return Array.isArray(t)?t:typeof t=="number"?[dee,t]:t==null?JA:[t]}function $v(t,e,n,s){let o,a,i;typeof e=="function"&&typeof n!="function"?(a=void 0,i=e,o=n):(a=e,i=n,o=s),fee(t,a,l,o);function l(c,d){const u=d[d.length-1],f=u?u.children.indexOf(c):void 0;return i(c,f,u)}}const lGe="n7jupd_crefs",Ur="agentCitation";function gee(t){return t.type!=="invalid"&&t.cite_key!=null}function cGe(t,e){return e.forEach((n,s)=>{n.start_idx!=null&&n.end_idx!=null?(t=t.replace(vee(n),(o,a)=>" :".concat(Ur,"{").concat(nc(s,a),"}\n")),t=t.replace(xee(n),(o,a)=>" :".concat(Ur,"{").concat(nc(s,a),"}")),t=t.replace(hee(n)," :".concat(Ur,"{").concat(nc(s),"}"))):gee(n)&&(t=t.replace(yee(n),(o,a)=>" :".concat(Ur,"{").concat(nc(s,a),"}\n")),t=t.replace(_ee(n),(o,a)=>" :".concat(Ur,"{").concat(nc(s,a),"}")),t=t.replace(pee(n)," :".concat(Ur,"{").concat(nc(s),"}")))}),t}function dGe(){return t=>{$v(t,e=>{var n;!VY(e)||e.name!==Ur||(e.data=(n=e.data)!=null?n:{},e.data.hName=Ur,e.data.hProperties=U(w({},e.attributes),{nodeType:e.type}))})}}function pee(t){return new RegExp("{{".concat(t.type,":").concat(t.cite_key,"}}\\.?"))}function hee(t){return new RegExp("".concat(t.matched_text,"\\.?"))}function _ee(t){return new RegExp("\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function xee(t){return new RegExp("\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function yee(t){return new RegExp("\\!\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function vee(t){return new RegExp("\\!\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function nc(t,e){const n={citationIndex:t.toString()};return e&&(n.label=e),Object.entries(n).map(([s,o])=>"".concat(s,"='").concat(o,"'")).join(" ")}var XA=(t=>(t.Turn="turn",t.ImagesTab="images_tab",t.ProductDetails="product_details",t.SuperWidget="super_widget",t.ImageGroup="image_group",t))(XA||{});class t1 extends Si()(()=>({currentImage:void 0})){setCurrentImage(e){this.setState({currentImage:e})}static useCurrentImage(){return this.useState(e=>e.currentImage)}}function uGe(t){"use forget";const e=W.c(8),{clientThreadId:n,children:s}=t,[o]=_.useState(bee);let a;e[0]!==o?(a=()=>{o.setCurrentImage(void 0)},e[0]=o,e[1]=a):a=e[1];let i;e[2]!==n||e[3]!==o?(i=[n,o],e[2]=n,e[3]=o,e[4]=i):i=e[4],_.useEffect(a,i);let l;return e[5]!==s||e[6]!==o?(l=r.jsx(t1.Provider,{store:o,children:s}),e[5]=s,e[6]=o,e[7]=l):l=e[7],l}function bee(){return new t1}const fGe=3600*24*30;function Cee(t){var e;return((e=t.author.metadata)==null?void 0:e.real_author)===Ky.ToolWeb}function mGe(t,e){returnwindow.location.origin+"/search/evals/permalink/".concat(t,"/").concat(e)}function gGe(t){return dh(t.flatMap(e=>e.type==="image_v2"?e.images:[]))}function pGe(t){const e={};return t.forEach(n=>{var s,o,a,i,l,c,d;if(n.type==="grouped_webpages")n.items.forEach(u=>{var m,g;if(!u.url)return;const f=e[u.url];f?"attribution_segments"in u&&"attribution_segments"in f&&(e[u.url]=U(w({},f),{attribution_segments:[...(m=f.attribution_segments)!=null?m:[],...(g=u.attribution_segments)!=null?g:[]]})):e[u.url]=w({},u)});else if(n.type==="webpage"||n.type==="webpage_extended")n.url&&(e[n.url]||(e[n.url]=n));else if(n.type==="image_inline"){const u=(o=n.clicked_from_url)!=null?o:(s=n.asset_pointer_links)==null?void 0:s[0];if(u){const f={type:"image_inline",url:u,title:(a=n.clicked_from_title)!=null?a:"Screenshot",snippet:"",attribution:"screenshot",asset_pointer_links:n.asset_pointer_links,clicked_from_url:n.clicked_from_url,clicked_from_title:n.clicked_from_title};e[u]=f}}else if(n.type==="file"){const u="file://".concat(n.source,"/").concat(n.id),f=(i=n.name)!=null?i:n.id,m=(c=(l=n.snippet)!=null?l:n.text)!=null?c:"",g=(d=n.source)!=null?d:"file";e[u]||(e[u]=U(w({},n),{title:f,url:u,snippet:m,attribution:g}))}else"cite_map"in n&&Object.values(n.cite_map).forEach(u=>{u&&u.url&&(e[u.url]||(e[u.url]=u))})}),Object.values(e)}class See{constructor(){J(this,"loggedEvents",new Set)}logEvent(e,n,s){if(!this.loggedEvents.has(e)){const o=s!=null?s:window.performance.now();B.logEvent(e,w({timeMs:o},n)),this.loggedEvents.add(e)}}}const wee=new See;function kee(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function hGe(t){return t.join(" ").trim()}const eI=-1,n1=0,gp=1,pp=2,Vv=3,Hv=4,Gv=5,Wv=6,tI=7,nI=8,q6=typeof self=="object"?self:globalThis,Eee=(t,e)=>{const n=(o,a)=>(t.set(a,o),o),s=o=>{if(t.has(o))return t.get(o);const[a,i]=e[o];switch(a){case n1:case eI:return n(i,o);case gp:{const l=n([],o);for(const c of i)l.push(s(c));return l}case pp:{const l=n({},o);for(const[c,d]of i)l[s(c)]=s(d);return l}case Vv:return n(new Date(i),o);case Hv:{const{source:l,flags:c}=i;return n(new RegExp(l,c),o)}case Gv:{const l=n(new Map,o);for(const[c,d]of i)l.set(s(c),s(d));return l}case Wv:{const l=n(new Set,o);for(const c of i)l.add(s(c));return l}case tI:{const{name:l,message:c}=i;return n(new q6[l](c),o)}case nI:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new q6[a](i),o)};return s},Y6=t=>Eee(new Map,t)(0),sc="",{toString:Tee}={},{keys:Mee}=Object,eu=t=>{const e=typeof t;if(e!=="object"||!t)return[n1,e];const n=Tee.call(t).slice(8,-1);switch(n){case"Array":return[gp,sc];case"Object":return[pp,sc];case"Date":return[Vv,sc];case"RegExp":return[Hv,sc];case"Map":return[Gv,sc];case"Set":return[Wv,sc]}return n.includes("Array")?[gp,n]:n.includes("Error")?[tI,n]:[pp,n]},Xm=([t,e])=>t===n1&&(e==="function"||e==="symbol"),Aee=(t,e,n,s)=>{const o=(i,l)=>{const c=s.push(i)-1;return n.set(l,c),c},a=i=>{if(n.has(i))return n.get(i);let[l,c]=eu(i);switch(l){case n1:{let u=i;switch(c){case"bigint":l=nI,u=i.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return o([eI],i)}return o([l,u],i)}case gp:{if(c)return o([c,[...i]],i);const u=[],f=o([l,u],i);for(const m of i)u.push(a(m));return f}case pp:{if(c)switch(c){case"BigInt":return o([c,i.toString()],i);case"Boolean":case"Number":case"String":return o([c,i.valueOf()],i)}if(e&&"toJSON"in i)return a(i.toJSON());const u=[],f=o([l,u],i);for(const m of Mee(i))(t||!Xm(eu(i[m])))&&u.push([a(m),a(i[m])]);return f}case Vv:return o([l,i.toISOString()],i);case Hv:{const{source:u,flags:f}=i;return o([l,{source:u,flags:f}],i)}case Gv:{const u=[],f=o([l,u],i);for(const[m,g]of i)(t||!(Xm(eu(m))||Xm(eu(g))))&&u.push([a(m),a(g)]);return f}case Wv:{const u=[],f=o([l,u],i);for(const m of i)(t||!Xm(eu(m)))&&u.push(a(m));return f}}const{message:d}=i;return o([l,{name:c,message:d}],i)};return a},Z6=(t,{json:e,lossy:n}={})=>{const s=[];return Aee(!(e||n),!!e,new Map,s)(t),s},j_=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Y6(Z6(t,e)):structuredClone(t):(t,e)=>Y6(Z6(t,e)),sI=(function(t){if(t==null)return Nee;if(typeof t=="string")return jee(t);if(typeof t=="object")return Iee(t);if(typeof t=="function")return zv(t);throw new Error("Expected function, string, or array as `test`")});function Iee(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=sI(t[n]);return zv(s);function s(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function jee(t){return zv(e);function e(n){return n.tagName===t}}function zv(t){return e;function e(n,s,o){return!!(Pee(n)&&t.call(this,n,typeof s=="number"?s:void 0,o||void 0))}}function Nee(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function Pee(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const Ree=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,Lee=/^[a-zA-Z]:\\/;function Oee(t){if(typeof t!="string")throw new TypeError("Expected a `string`, got `".concat(typeof t,"`"));return Lee.test(t)?!1:Ree.test(t)}const Dee=["http","https"],Fee=["nofollow"],Bee={};function _Ge(t){const e=t||Bee,n=e.protocols||Dee,s=sI(e.test);return function(o){$v(o,"element",function(a,i,l){if(a.tagName==="a"&&typeof a.properties.href=="string"&&s(a,i,l)){const c=a.properties.href;if(Oee(c)?n.includes(c.slice(0,c.indexOf(":"))):c.startsWith("//")){const d=tu(e.content,a),u=d&&!Array.isArray(d)?[d]:d,f=tu(e.rel,a)||Fee,m=typeof f=="string"?kee(f):f,g=tu(e.target,a),p=tu(e.properties,a);if(p&&Object.assign(a.properties,j_(p)),m.length>0&&(a.properties.rel=[...m]),g&&(a.properties.target=g),u){const h=tu(e.contentProperties,a)||{};a.children.push({type:"element",tagName:"span",properties:j_(h),children:j_(u)})}}}})}}function tu(t,e){return typeof t=="function"?t(e):t}var s1=(t=>(t.ACCELERATOR="accelerator",t.BLOCK_COMMENT_LAUNCHER="block_comment_launcher",t.CLOSE_TEXTDOC="close_textdoc",t.COLLAPSED_COMMENT="collapsed_comment",t.COMMENT_ACCEPT="comment_accept",t.COMMENT_DISMISS="comment_dismiss",t.COPY="copy",t.DOWNLOAD="download",t.EXPANDED_COMMENT="expanded_comment",t.FILE_DRAWER_ITEM="file_drawer_item",t.HISTORY_NEXT="history_next",t.HISTORY_PREVIOUS="history_previous",t.MESSAGE_ATTACHMENT="message_attachment",t.OPEN_SHARE_MENU="open_share_menu",t.CREATE_SHARE_LINK="create_share_link",t.UPDATE_SHARE_LINK_TO_LATEST="update_share_link_to_latest",t.COPY_SHARE_LINK="copy_share_link",t.UPDATE_SHARE_LINK_PRIVATE="update_share_link_private",t.UPDATE_SHARE_LINK_PUBLIC="update_share_link_public",t.SHOW_CHANGES="show_changes",t.TOOLBAR_FORMAT_BOLD="toolbar_format_bold",t.TOOLBAR_FORMAT_HEADER1="toolbar_format_header1",t.TOOLBAR_FORMAT_HEADER2="toolbar_format_header2",t.TOOLBAR_FORMAT_HEADER3="toolbar_format_header3",t.TOOLBAR_FORMAT_ITALIC="toolbar_format_italic",t.TOOLBAR_FORMAT_PARAGRAPH="toolbar_format_paragraph",t.TOOLBAR_FORMAT_STYLE="toolbar_format_style",t.TOOLBAR_ASK_CHATGPT="toolbar_ask_chatgpt",t.EDIT_IN_CANVAS_MESSAGE="edit_in_canvas_message",t.EDIT_IN_CANVAS_CODE_SNIPPET="edit_in_canvas_code_snippet",t.OPEN_IN_CANVAS_WRITING_BLOCK="open_in_canvas_writing_block",t.SAVE_TO_CHAT_ON_EDITOR_CLOSE="save_to_chat_on_editor_close",t.CLOSE_WITHOUT_SAVING="close_without_saving",t.LEARN_MODE_ABOUT_NETWORK_REQUESTS="learn_more_about_network_requests",t))(s1||{}),hp=(t=>(t.Unknown="unknown",t.ShowToast="show_toast",t.CanvasMessage="canvas_message",t.TurnComplete="turn_complete",t))(hp||{});const Uee={canvas_message:Ho({message:sT}),turn_complete:Ho({}),unknown:Ho({}),show_toast:Ho({text:ms})},K6=SV(Object.values(hp));function $ee(t){const{type:e}=oT(t,{type:K6}),n=K6(e);return w({type:n},Uee[n](t))}function Q6(t,e){Hee(n=>{n.type===t&&e(n)})}function Vee(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return new TextDecoder("utf-8").decode(n)}function Hee(t){_.useEffect(()=>If(window,{message:n=>{const s=n.data;if(!(typeof s!="object"||(s==null?void 0:s.type)!=="canmore_native"))try{const o=Vee(s.msg),a=$ee(JSON.parse(o));t(a)}catch(o){console.warn("Unknown message from native app: ".concat(s.msg))}}}),[t])}function oI(){var n;let t;const e=Gee();switch(e){case"android":t=window.CanmoreNative;break;case"ios":t=(n=window.webkit)==null?void 0:n.messageHandlers.canmoreNative;break;case"web":t=void 0;break}return{platform:e,isNative:e!=="web",bridge:t,sendMessage:s=>t==null?void 0:t.postMessage(btoa(JSON.stringify(s)))}}function Gee(){return typeof window.CanmoreNative<"u"?"android":typeof window.webkit<"u"&&typeof window.webkit.messageHandlers.canmoreNative<"u"?"ios":"web"}function o1(t,e){B.logEvent(t,w({platform:oI().platform},e!=null?e:{}))}function Wee(t,e,n){B.logEventWithStatsig(t,e,w({platform:oI().platform},n))}function zee(t,e,n){o1(t,w({distributionValue:e},n!=null?n:{}))}function qee(t,e){o1("Canvas Button Clicked",w({buttonName:t},e!=null?e:{}))}function Yee(t){if(t instanceof Error){const{name:e,message:n,stack:s,cause:o}=t;return{name:e,message:n,stack:s,cause:o}}return t}function Zee(t,e,n){o1("Canvas Client Error",{message:t,error:e==null?t:Yee(e),attributes:n}),Fe.addError(e)}const Ll={logButtonClick:qee,logEvent:o1,logEventWithStatsig:Wee,logError:Zee,logDistribution:zee},J6=Ft(()=>({rect:null})),Kee=t=>{if(!t)return J6.setState({rect:null});const{height:e,left:n,top:s,width:o}=t.getBoundingClientRect(),{borderRadius:a}=getComputedStyle(t);J6.setState({rect:{height:e,left:n,top:s,width:o,borderRadius:a}})},Qee=new RegExp("((?:\\n|\\r)+)((?:\\s{2,}|\\t)+)?|(```)|([#*_-]+)|([(){}[\\]]+)|([\\x21-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\x7E]+)|(\\b(?:await|break|case|catch|class|continue|default|define|except|extends|export|finally|implements|import|include|print|private|protected|public|return|span|switch|system|template|throw|type|using|while)\\b)|(\\b(?:async|breakpoint|cin|cmd|console|const|constexpr|cout|def|defn|div|env|fn|func|function|href|html|img|interface|lambda|namespace|println|src|stdout|struct|var|workdir|yield)\\b)","gi"),Jee=[80.33911781017851,19.194942847935266,-78.96158351597562,31.404985863148777,48.13976028814005,82.48501866379408,15.781632991361631,67.81666324403915],Xee=-9.860574779222393;function aI(t){return ete(tte(t),Jee,Xee)>0}function ete(t,e,n){let s=n;for(let o=0;o<t.length;o++)s+=t[o]*e[o];return s}function tte(t){const e=[0,0,0,0,0,0,0,0];if(!t)return e;let n;for(;(n=Qee.exec(t))!=null;)for(let s=0;s<e.length;s++)n[s+1]&&(e[s]+=n[s+1].length);for(let s=0;s<e.length;s++)e[s]/=t.length;return e}const _p=Ft(()=>({focusedObject:null}));function rI(){return _p(t=>t.focusedObject)}var cl=(t=>(t[t.Textdoc=0]="Textdoc",t[t.ADAVisualization=1]="ADAVisualization",t))(cl||{});const xi=Ft(()=>({focusedObject:null,fromMessageId:null})),xGe=(t,e)=>{const n=xi.getState();e!==n.fromMessageId&&xi.setState({focusedObject:t,fromMessageId:e})},dl=t=>{xi.setState({focusedObject:t,fromMessageId:null})},yi=t=>{_p.setState({focusedObject:null});const e=xi.getState(),{focusedObject:n}=e;(!n||n.type!==0||n.textdocId!==t)&&iI(t)},iI=t=>{dl({type:0,textdocId:t})},nte=(t,e,n)=>{dl({type:0,textdocId:t,history:e,showChangesAtVersion:n})},yGe=(t,e,n)=>{dl({type:0,textdocId:t,showChangesAtVersion:e,history:n!=null?n:void 0})},qv=()=>{xi.setState({focusedObject:null})},ste=()=>{xi.setState({focusedObject:null,fromMessageId:null})};var io=(t=>(t.INFERRING="inferring",t.PENDING="pending",t.SENT="sent",t))(io||{}),mf=(t=>(t.MODEL="model",t.SYSTEM_HINT_CANVAS="system_hint_canvas",t.SYSTEM_HINT_CANVAS_APPS="system_hint_canvas_apps",t.USER_CREATED_COMPOSER="user_created_composer",t.MESSAGE_CODE_SNIPPET="message_code_snippet",t.MESSAGE_WRITING_BLOCK="message_writing_block",t.MESSAGE="message",t.TASK_RESULT="task_result",t.REMIX_OF_SHARED_CANVAS="remix_of_shared_canvas",t.HIVE="hive",t))(mf||{});const er=-1;var Os=(t=>(t.CREATING="creating",t.REWRITING="rewriting",t.COMMENTING="commenting",t.UPDATING="updating",t.COMPLETE="complete",t.ATTACHED_PENDING="attached_pending",t.ATTACHED_SENT="attached_sent",t))(Os||{});const vGe=t=>(t==null?void 0:t.status)!=="complete"&&(t==null?void 0:t.status)!=="attached_pending"&&(t==null?void 0:t.status)!=="attached_sent",bGe=t=>(t==null?void 0:t.status)==="rewriting",CGe=t=>(t==null?void 0:t.status)==="creating",SGe=t=>(t==null?void 0:t.status)==="attached_pending"||(t==null?void 0:t.status)==="attached_sent",wGe=t=>(t==null?void 0:t.status)==="attached_pending";var lr=(t=>(t.DOCUMENT="document",t.CODE_BASH="code/bash",t.CODE_ZSH="code/zsh",t.CODE_JAVASCRIPT="code/javascript",t.CODE_TYPESCRIPT="code/typescript",t.CODE_HTML="code/html",t.CODE_CSS="code/css",t.CODE_PYTHON="code/python",t.CODE_JSON="code/json",t.CODE_SQL="code/sql",t.CODE_GO="code/go",t.CODE_YAML="code/yaml",t.CODE_JAVA="code/java",t.CODE_RUST="code/rust",t.CODE_CPP="code/cpp",t.CODE_SWIFT="code/swift",t.CODE_PHP="code/php",t.CODE_XML="code/xml",t.CODE_RUBY="code/ruby",t.CODE_HASKELL="code/haskell",t.CODE_KOTLIN="code/kotlin",t.CODE_CSHARP="code/csharp",t.CODE_C="code/c",t.CODE_OBJECTIVEC="code/objectivec",t.CODE_R="code/r",t.CODE_LUA="code/lua",t.CODE_DART="code/dart",t.CODE_SCALA="code/scala",t.CODE_PERL="code/perl",t.CODE_COMMONLISP="code/commonlisp",t.CODE_CLOJURE="code/clojure",t.CODE_OCAML="code/ocaml",t.CODE_POWERSHELL="code/powershell",t.CODE_VERILOG="code/verilog",t.CODE_DOCKERFILE="code/dockerfile",t.CODE_VUE="code/vue",t.CODE_REACT="code/react",t.CODE_OTHER="code/other",t.LOADING="loading",t))(lr||{});function xp(t){return t.startsWith("code/")}function hl(t){const e=Jg(t,Object.values(lr),null);if(e)return e;if(t==="webview")return"code/html";if(t.startsWith("code"))switch(t){case"code/js":case"code/jsx":return"code/javascript";case"code/ts":case"code/tsx":return"code/typescript";default:return"code/other"}return"document"}var Bn=(t=>(t.CREATE="create",t.REWRITE="rewrite",t.EDIT="edit",t.ADD_COMMENT="add_comment",t.REMOVE_COMMENT="remove_comment",t))(Bn||{}),lI=(t=>(t.ACCEPT="accept",t.DISMISS="dismiss",t))(lI||{}),gx=(t=>(t.ACCEPT_INITIATED="accept_initiated",t.DISMISSED="dismissed",t.PENDING="pending",t))(gx||{}),ote=(t=>(t.ADDED="added",t.REMOVED="removed",t))(ote||{}),ate=(t=>(t.ACCEPT_COMMENT="accept_comment",t.ASK_CHATGPT="ask_chatgpt",t.ACCELERATOR="accelerator",t.CONSOLE="console",t.FULL_SCREEN_SUBMIT="full_screen_submit",t.HIVE_SPEAKER_EDIT="hive_speaker_edit",t))(ate||{}),cI=(t=>(t.PUBLIC="public",t.PRIVATE="private",t.WORKSPACE="workspace",t))(cI||{});const rte=t=>Jg(t,Object.values(cI),void 0);function dI(t){const e=ne(),n=Kn(t),s=It();return async({title:a,textdocType:i,content:l,createSource:c})=>{if(!n)return;if(i==="loading"){Fe.addError("Tried to add a textdoc with type 'loading'");return}const d=e.formatMessage({id:"6dkdc5",defaultMessage:"New document"});a||(a=d);const{textdoc_id:u}=await ge.safePost("/textdoc/add",{requestBody:{conversation_id:n,textdoc_title:a,textdoc_type:i,content:l,create_source:c}});return s.setQueryData([n,"textdocs"],f=>{if(!f)return f;const m={textdocId:u,messageId:null,type:i,comments:[],status:Os.COMPLETE,title:a,content:l,versionInt:1,createdAt:Date.now()},g=new Map(f.persistedTextdocVersionById);g.set(u,m);const p=[...f.persistedTextdocVersions,m],h=new Map(f.persistedTextdocById);return h.set(u,{id:u,version:1,title:a,textdoc_type:i,content:l,comments:[],metadata:null,updated_at:new Date().toISOString()}),U(w({},f),{persistedTextdocVersionById:g,persistedTextdocVersions:p,persistedTextdocById:h})}),await s.invalidateQueries({queryKey:[n,"textdocs"]}),requestAnimationFrame(()=>{yi(u),setTimeout(()=>{yi(u)},250)}),u}}const ite=R(()=>P(()=>import("./8yatsd42k1ox8n2w.js"),__vite__mapDeps([24,1])),{loading:t=>F(t)}),lte=({content:t,codeLanguage:e,codeSnippetRef:n,clientThreadId:s})=>{var d;const o=V(),a=ne(),i=re(()=>yn(xt(o,s))),l=dI(s);if(!((d=i.enabledTools)!=null&&d.includes(al.Canvas)))return null;function c(){Ll.logButtonClick(s1.EDIT_IN_CANVAS_CODE_SNIPPET),n!=null&&n.current&&Kee(n.current);const u=e?hl("code/"+e):aI(t)?lr.CODE_OTHER:lr.DOCUMENT;l({title:a.formatMessage({id:"ay0U57",defaultMessage:"New {codeLanguage} document"},{codeLanguage:e||"text"}),textdocType:u,content:t,createSource:mf.MESSAGE})}return r.jsx(pt,{label:r.jsx(j,{id:"EditInCanvasButton.editTooltip",defaultMessage:"Edit in canvas"}),children:r.jsxs("button",{className:"flex items-center gap-1 py-1 select-none",onClick:c,children:[r.jsx(ite,{className:"icon-xs"}),a.formatMessage({id:"5k0sSJ",defaultMessage:"Edit"})]})})};var N_={},X6;function cte(){return X6||(X6=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Unidentified="Unidentified",e.Alt="Alt",e.AltGraph="AltGraph",e.CapsLock="CapsLock",e.Control="Control",e.Fn="Fn",e.FnLock="FnLock",e.Hyper="Hyper",e.Meta="Meta",e.NumLock="NumLock",e.ScrollLock="ScrollLock",e.Shift="Shift",e.Super="Super",e.Symbol="Symbol",e.SymbolLock="SymbolLock",e.Enter="Enter",e.Tab="Tab",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e.Backspace="Backspace",e.Clear="Clear",e.Copy="Copy",e.CrSel="CrSel",e.Cut="Cut",e.Delete="Delete",e.EraseEof="EraseEof",e.ExSel="ExSel",e.Insert="Insert",e.Paste="Paste",e.Redo="Redo",e.Undo="Undo",e.Accept="Accept",e.Again="Again",e.Attn="Attn",e.Cancel="Cancel",e.ContextMenu="ContextMenu",e.Escape="Escape",e.Execute="Execute",e.Find="Find",e.Finish="Finish",e.Help="Help",e.Pause="Pause",e.Play="Play",e.Props="Props",e.Select="Select",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.BrightnessDown="BrightnessDown",e.BrightnessUp="BrightnessUp",e.Eject="Eject",e.LogOff="LogOff",e.Power="Power",e.PowerOff="PowerOff",e.PrintScreen="PrintScreen",e.Hibernate="Hibernate",e.Standby="Standby",e.WakeUp="WakeUp",e.AllCandidates="AllCandidates",e.Alphanumeric="Alphanumeric",e.CodeInput="CodeInput",e.Compose="Compose",e.Convert="Convert",e.Dead="Dead",e.FinalMode="FinalMode",e.GroupFirst="GroupFirst",e.GroupLast="GroupLast",e.GroupNext="GroupNext",e.GroupPrevious="GroupPrevious",e.ModeChange="ModeChange",e.NextCandidate="NextCandidate",e.NonConvert="NonConvert",e.PreviousCandidate="PreviousCandidate",e.Process="Process",e.SingleCandidate="SingleCandidate",e.HangulMode="HangulMode",e.HanjaMode="HanjaMode",e.JunjaMode="JunjaMode",e.Eisu="Eisu",e.Hankaku="Hankaku",e.Hiragana="Hiragana",e.HiraganaKatakana="HiraganaKatakana",e.KanaMode="KanaMode",e.KanjiMode="KanjiMode",e.Katakana="Katakana",e.Romaji="Romaji",e.Zenkaku="Zenkaku",e.ZenkakuHanaku="ZenkakuHanaku",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.F13="F13",e.F14="F14",e.F15="F15",e.F16="F16",e.F17="F17",e.F18="F18",e.F19="F19",e.F20="F20",e.Soft1="Soft1",e.Soft2="Soft2",e.Soft3="Soft3",e.Soft4="Soft4",e.AppSwitch="AppSwitch",e.Call="Call",e.Camera="Camera",e.CameraFocus="CameraFocus",e.EndCall="EndCall",e.GoBack="GoBack",e.GoHome="GoHome",e.HeadsetHook="HeadsetHook",e.LastNumberRedial="LastNumberRedial",e.Notification="Notification",e.MannerMode="MannerMode",e.VoiceDial="VoiceDial",e.ChannelDown="ChannelDown",e.ChannelUp="ChannelUp",e.MediaFastForward="MediaFastForward",e.MediaPause="MediaPause",e.MediaPlay="MediaPlay",e.MediaPlayPause="MediaPlayPause",e.MediaRecord="MediaRecord",e.MediaRewind="MediaRewind",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.AudioBalanceLeft="AudioBalanceLeft",e.AudioBalanceRight="AudioBalanceRight",e.AudioBassDown="AudioBassDown",e.AudioBassBoostDown="AudioBassBoostDown",e.AudioBassBoostToggle="AudioBassBoostToggle",e.AudioBassBoostUp="AudioBassBoostUp",e.AudioBassUp="AudioBassUp",e.AudioFaderFront="AudioFaderFront",e.AudioFaderRear="AudioFaderRear",e.AudioSurroundModeNext="AudioSurroundModeNext",e.AudioTrebleDown="AudioTrebleDown",e.AudioTrebleUp="AudioTrebleUp",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.MicrophoneToggle="MicrophoneToggle",e.MicrophoneVolumeDown="MicrophoneVolumeDown",e.MicrophoneVolumeMute="MicrophoneVolumeMute",e.MicrophoneVolumeUp="MicrophoneVolumeUp",e.TV="TV",e.TV3DMode="TV3DMode",e.TVAntennaCable="TVAntennaCable",e.TVAudioDescription="TVAudioDescription",e.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",e.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",e.TVContentsMenu="TVContentsMenu",e.TVDataService="TVDataService",e.TVInput="TVInput",e.TVInputComponent1="TVInputComponent1",e.TVInputComponent2="TVInputComponent2",e.TVInputComposite1="TVInputComposite1",e.TVInputComposite2="TVInputComposite2",e.TVInputHDMI1="TVInputHDMI1",e.TVInputHDMI2="TVInputHDMI2",e.TVInputHDMI3="TVInputHDMI3",e.TVInputHDMI4="TVInputHDMI4",e.TVInputVGA1="TVInputVGA1",e.TVMediaContext="TVMediaContext",e.TVNetwork="TVNetwork",e.TVNumberEntry="TVNumberEntry",e.TVPower="TVPower",e.TVRadioService="TVRadioService",e.TVSatellite="TVSatellite",e.TVSatelliteBS="TVSatelliteBS",e.TVSatelliteCS="TVSatelliteCS",e.TVSatelliteToggle="TVSatelliteToggle",e.TVTerrestrialAnalog="TVTerrestrialAnalog",e.TVTerrestrialDigital="TVTerrestrialDigital",e.TVTimer="TVTimer",e.AVRInput="AVRInput",e.AVRPower="AVRPower",e.ColorF0Red="ColorF0Red",e.ColorF1Green="ColorF1Green",e.ColorF2Yellow="ColorF2Yellow",e.ColorF3Blue="ColorF3Blue",e.ColorF4Grey="ColorF4Grey",e.ColorF5Brown="ColorF5Brown",e.ClosedCaptionToggle="ClosedCaptionToggle",e.Dimmer="Dimmer",e.DisplaySwap="DisplaySwap",e.DVR="DVR",e.Exit="Exit",e.FavoriteClear0="FavoriteClear0",e.FavoriteClear1="FavoriteClear1",e.FavoriteClear2="FavoriteClear2",e.FavoriteClear3="FavoriteClear3",e.FavoriteRecall0="FavoriteRecall0",e.FavoriteRecall1="FavoriteRecall1",e.FavoriteRecall2="FavoriteRecall2",e.FavoriteRecall3="FavoriteRecall3",e.FavoriteStore0="FavoriteStore0",e.FavoriteStore1="FavoriteStore1",e.FavoriteStore2="FavoriteStore2",e.FavoriteStore3="FavoriteStore3",e.Guide="Guide",e.GuideNextDay="GuideNextDay",e.GuidePreviousDay="GuidePreviousDay",e.Info="Info",e.InstantReplay="InstantReplay",e.Link="Link",e.ListProgram="ListProgram",e.LiveContent="LiveContent",e.Lock="Lock",e.MediaApps="MediaApps",e.MediaAudioTrack="MediaAudioTrack",e.MediaLast="MediaLast",e.MediaSkipBackward="MediaSkipBackward",e.MediaSkipForward="MediaSkipForward",e.MediaStepBackward="MediaStepBackward",e.MediaStepForward="MediaStepForward",e.MediaTopMenu="MediaTopMenu",e.NavigateIn="NavigateIn",e.NavigateNext="NavigateNext",e.NavigateOut="NavigateOut",e.NavigatePrevious="NavigatePrevious",e.NextFavoriteChannel="NextFavoriteChannel",e.NextUserProfile="NextUserProfile",e.OnDemand="OnDemand",e.Pairing="Pairing",e.PinPDown="PinPDown",e.PinPMove="PinPMove",e.PinPToggle="PinPToggle",e.PinPUp="PinPUp",e.PlaySpeedDown="PlaySpeedDown",e.PlaySpeedReset="PlaySpeedReset",e.PlaySpeedUp="PlaySpeedUp",e.RandomToggle="RandomToggle",e.RcLowBattery="RcLowBattery",e.RecordSpeedNext="RecordSpeedNext",e.RfBypass="RfBypass",e.ScanChannelsToggle="ScanChannelsToggle",e.ScreenModeNext="ScreenModeNext",e.Settings="Settings",e.SplitScreenToggle="SplitScreenToggle",e.STBInput="STBInput",e.STBPower="STBPower",e.Subtitle="Subtitle",e.Teletext="Teletext",e.VideoModeNext="VideoModeNext",e.Wink="Wink",e.ZoomToggle="ZoomToggle",e.SpeechCorrectionList="SpeechCorrectionList",e.SpeechInputToggle="SpeechInputToggle",e.Close="Close",e.New="New",e.Open="Open",e.Print="Print",e.Save="Save",e.SpellCheck="SpellCheck",e.MailForward="MailForward",e.MailReply="MailReply",e.MailSend="MailSend",e.LaunchCalculator="LaunchCalculator",e.LaunchCalendar="LaunchCalendar",e.LaunchContacts="LaunchContacts",e.LaunchMail="LaunchMail",e.LaunchMediaPlayer="LaunchMediaPlayer",e.LaunchMusicPlayer="LaunchMusicPlayer",e.LaunchMyComputer="LaunchMyComputer",e.LaunchPhone="LaunchPhone",e.LaunchScreenSaver="LaunchScreenSaver",e.LaunchSpreadsheet="LaunchSpreadsheet",e.LaunchWebBrowser="LaunchWebBrowser",e.LaunchWebCam="LaunchWebCam",e.LaunchWordProcessor="LaunchWordProcessor",e.LaunchApplication1="LaunchApplication1",e.LaunchApplication2="LaunchApplication2",e.LaunchApplication3="LaunchApplication3",e.LaunchApplication4="LaunchApplication4",e.LaunchApplication5="LaunchApplication5",e.LaunchApplication6="LaunchApplication6",e.LaunchApplication7="LaunchApplication7",e.LaunchApplication8="LaunchApplication8",e.LaunchApplication9="LaunchApplication9",e.LaunchApplication10="LaunchApplication10",e.LaunchApplication11="LaunchApplication11",e.LaunchApplication12="LaunchApplication12",e.LaunchApplication13="LaunchApplication13",e.LaunchApplication14="LaunchApplication14",e.LaunchApplication15="LaunchApplication15",e.LaunchApplication16="LaunchApplication16",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Decimal="Decimal",e.Key11="Key11",e.Key12="Key12",e.Multiply="Multiply",e.Add="Add",e.Divide="Divide",e.Subtract="Subtract",e.Separator="Separator"})(t.Key||(t.Key={}))})(N_)),N_}var dte=cte(),Dn=(t=>(t.Core="Core",t.Chat="Chat",t.Settings="Settings",t.Internal="Internal",t))(Dn||{});const We=w({Mod:"mod",Comma:",",Space:"Space"," ":"Space","":"Space"},dte.Key),kGe=[We.Mod,"k"],EGe="writingBlockSkipSerialize",ute=/((`{3,})|(~{3,}))\s*/,uI=/^(?:\s*)((`{3,})|(~{3,}))\s*\{/m;var N9;const fte=new RegExp(String.raw(N9||(N9=ct(["^s*:::","{[^}]*}[sS]*?:::"],["^\\s*:::","\\{[^}]*\\}[\\s\\S]*?:::"])),uh),"m");var P9;const mte=new RegExp(String.raw(P9||(P9=ct(["^s*:::",""],["^\\s*:::",""])),uh),"m");var R9;const gte=new RegExp(String.raw(R9||(R9=ct(["^s*:::","(?:s|{|$)"],["^\\s*:::","(?:\\s|\\{|$)"])),uh)),pte=/^\s*:::\s*$/;var L9;const hte=new RegExp(String.raw(L9||(L9=ct([":::",""])),uh));function TGe(t,e,n){B.logEventWithStatsig(t,e,n),Ie.count(je.WRITING_BLOCKS,e)}function _te(t){const e=fI(t);return fte.test(e)?!0:uI.test(e)}function MGe(t){const e=fI(t);return mte.test(e)?!0:uI.test(e)}function AGe(t){var i,l,c;const e=t.split("\n"),n=[],s=[];let o=null,a=null;for(const d of e){if(a){if(pte.test(d)){n.push(...a),a=null;continue}a.push(d);continue}if(o){const g=(i=o.nested[o.nested.length-1])!=null?i:null;if((g==null?void 0:g.kind)==="code"){n.push(d);const h=Tu(d);h&&h.info.trim().length===0&&h.marker===g.marker&&h.fence.length===g.length&&o.nested.pop();continue}const p=Tu(d);if(p){const h=p.info.trimStart();if((g==null?void 0:g.kind)==="writing"&&p.info.trim().length===0&&p.marker===g.marker&&p.fence.length===g.length){o.nested.pop();continue}if(o.nested.length===0&&p.info.trim().length===0&&p.marker===o.marker&&p.fence.length===o.length){o=null;continue}const v=h.startsWith("{")?"writing":"code";o.nested.push({kind:v,marker:p.marker,length:p.fence.length}),v==="code"&&n.push(d);continue}n.push(d);continue}if(s.length>0){n.push(d);const g=Tu(d);g&&g.info.trim().length===0&&g.marker===((l=s[s.length-1])==null?void 0:l.marker)&&g.fence.length===((c=s[s.length-1])==null?void 0:c.length)&&s.pop();continue}const u=d.match(hte);if((u==null?void 0:u.index)!=null){const g=d.slice(0,u.index).trimEnd();g.length>0&&n.push(g),a=[];continue}if(gte.test(d)){a=[];continue}const f=Tu(d);if(!f){n.push(d);continue}if(f.info.trimStart().startsWith("{")){o={marker:f.marker,length:f.fence.length,nested:[]};continue}s.push({marker:f.marker,length:f.fence.length}),n.push(d)}return a&&n.push(...a),n.join("\n")}function fI(t){const e=t.split("\n"),n=[];let s=null,o=[];for(const a of e){const i=Tu(a);if(i){const l=i.info.trimStart();if(!s){l.startsWith("{")?(n.push(a),s={marker:i.marker,length:i.fence.length,kind:"writing"},o=[]):(s={marker:i.marker,length:i.fence.length,kind:"code"},o=[a]);continue}s.kind==="code"?o.push(a):n.push(a),i.info.trim().length===0&&i.marker===s.marker&&i.fence.length===s.length&&(s.kind==="code"&&(o=[]),s=null);continue}if(!s){n.push(a);continue}if(s.kind==="writing"){n.push(a);continue}o.push(a)}return(s==null?void 0:s.kind)==="code"&&n.push(...o),n.join("\n")}function Tu(t){const e=t.match(/^\s*/),n=e?e[0]:"",s=t.slice(n.length),o=s.match(ute);if(!o)return null;const a=o[0].trim(),i=a[0],l=s.slice(a.length).trimStart();return{leadingWhitespace:n,fence:a,marker:i,info:l}}function eC(t,e){const n=[];let s=e;for(;s&&s!==t;){const o=s.parentNode;if(!o)throw new Error("Unable to resolve selection for magic edit.");const a=Array.prototype.indexOf.call(o.childNodes,s);n.unshift(a),s=o}if(s!==t)throw new Error("Unable to resolve selection for magic edit.");return n}function IGe(t,e){return{startPath:eC(t,e.startContainer),startOffset:e.startOffset,endPath:eC(t,e.endContainer),endOffset:e.endOffset}}function jGe(t,e,n,s=120){const o=Math.max(0,e-s),a=Math.min(t.length,n+s);return{leading:t.slice(o,e),selection:t.slice(e,n),trailing:t.slice(n,a)}}async function NGe(t){const e=new TextEncoder,n=await crypto.subtle.digest("SHA-256",e.encode(t));return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}const PGe=t=>ve(t,"3700195277")||!1,RGe=()=>{const t=Jo();return!!(t!=null&&t.includes(ss.CanvasCodeExecution))||void 0},LGe=()=>{const t=Jo();return!!(t!=null&&t.includes(ss.CanvasCodeNetworkAccess))||void 0},OGe=t=>ve(t,"2311599525"),DGe=t=>ve(t,"3468624635")||!1,xte=()=>{const t=V(),e=ve(t,"3286474446"),n=Eo();return tt(t)&&e&&!n},FGe=(t,e)=>{var g,p;const n=V(),s=tt(n),a=!!((g=re(()=>yn(xt(n,t))).enabledTools)!=null&&g.includes(al.Canvas)),i=Eo(),l=bl(),c=(p=e==null?void 0:e.metadata)==null?void 0:p.b1de6e2_s,d=Es(),u=!!e&&lh(e)===ch.PIMBlock,f=ve(n,"4223274760"),m=((e==null?void 0:e.content.content_type)===ut.Text||(e==null?void 0:e.content.content_type)===ut.MultimodalText)&&_te(e==null?void 0:e.content.parts.join("\n"));return s&&f&&!m&&(!i||l)&&a&&!c&&!d&&!u};function mI(){const t=_.useRef(!1);return _.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),_.useCallback(()=>t.current,[])}const yte=R(()=>P(()=>import("./qrcm3utllwqs3zx5.js"),__vite__mapDeps([25,1])),{loading:t=>F(t)}),vte=R(()=>P(()=>import("./kaw18xu9jo85v1g9.js"),__vite__mapDeps([26,1])),{loading:t=>F(t)}),tC=Se({copy:{id:"CopyButton.copy",defaultMessage:"Copy"},copied:{id:"CopyButton.copied",defaultMessage:"Copied"}});function gI({buttonText:t,shouldChangeText:e=!0,iconClassName:n="icon-sm",onCopy:s,className:o,iconOnly:a=!1,textPosition:i="right",tooltipSideOffset:l}){const c=ne(),[d,u]=_.useState(!1),f=mI(),m=_.useCallback(p=>{p.stopPropagation(),s(p),u(!0),setTimeout(()=>{f()&&u(!1)},2e3)},[f,s]);let g=t;return e&&d?g=r.jsx(j,w({},tC.copied)):t===!0&&(g=r.jsx(j,w({},tC.copy))),r.jsxs(r.Fragment,{children:[!d&&r.jsx(pt,{triggerAs:null,label:r.jsx(j,{id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),disabled:!a,sideOffset:l,children:r.jsxs(nC,{onClick:m,className:o,"aria-label":c.formatMessage({id:"ywKsIl",defaultMessage:"Copy"}),children:[i==="left"&&!a&&g,r.jsx(yte,{className:n}),i==="right"&&!a&&g]})}),d&&r.jsxs(nC,{className:o,"aria-label":c.formatMessage({id:"I3L53c",defaultMessage:"Copied"}),children:[i==="left"&&!a&&g,r.jsx(vte,{className:n}),i==="right"&&!a&&g]})]})}var O9;const nC=ft.button(O9||(O9=ct(["flex gap-1 items-center select-none"])));function a1(t,{type:e="copy",source:n,messageId:s,serverThreadId:o,selectedText:a,location:i,contentType:l,productLogOnly:c=!1}){if(tt(t)&&(B.logEvent("Content Exported",{type:e,source:n,length:a.length,location:i,contentType:l}),!(c||e==="download")))return ge.safePost("/conversation/implicit_message_feedback",{requestBody:{message_id:s,conversation_id:o,source:n,feedback:{feedback_type:e,selected_text_length:a.length},location:i}})}const bte=_.createContext({isWithinDataAnalysisToolMessage:!1});var sC=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Cte(t,e){return!!(t===e||sC(t)&&sC(e))}function Ste(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Cte(t[n],e[n]))return!1;return!0}function Ol(t,e){e===void 0&&(e=Ste);var n=null;function s(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(n&&n.lastThis===this&&e(o,n.lastArgs))return n.lastResult;var i=t.apply(this,o);return n={lastResult:i,lastArgs:o,lastThis:this},i}return s.clear=function(){n=null},s}const wte=Ol(()=>P(()=>import("./je4980ckfcxr5bij.js"),__vite__mapDeps([27,1,28]))),kte=Yn.memo(function({htmlSegment:e}){return r.jsx("span",{dangerouslySetInnerHTML:{__html:e}})}),Ete=t=>{var e,n;if(t instanceof Element)return(n=(e=t.closest("[data-message-id]"))==null?void 0:e.getAttribute("data-message-id"))!=null?n:void 0};function Tte({wrapperClassName:t,codeClassName:e,language:n,content:s,shouldWrapCode:o,removeTopBorderRadius:a,showActionBar:i=!0,showStickyRightContent:l=!0,codeContainerClassName:c,title:d}){var I;const u=V(),f=To(),m=_.useRef(null),g=$t(),p=Es(),h=xte(),x=An(mn),v=Vh(),y=_.useCallback(N=>{var O;N.preventDefault(),N.stopPropagation();const L=(O=window.getSelection())==null?void 0:O.toString();L&&Yo(L,void 0,N)},[]),b=_.useCallback(N=>{const L=(D,$,H)=>{if(p||(f==null?void 0:f.id)==null||$===void 0)return;const G=jt(f.id);G!=null&&a1(u,{source:D,type:"copy",messageId:$,serverThreadId:G,selectedText:H,location:"code-snippet",contentType:"code"})},O=Ete(N.target);Yo(s,g,N),L("mouse",O,s)},[u,s,g,p,f]),C=ne(),{isWithinDataAnalysisToolMessage:S}=_.useContext(bte),[E,k]=_.useState(null);_.useEffect(()=>{wte().then(N=>{if(N!=null)try{k(N.highlightCode(s,n))}catch(L){if(!(L instanceof Error&&/Unknown language/i.test(L.message)))throw L}})},[s,n]);const T=n==="svg"||(n==="xml"||n==="html")&&Rte(s),M=_.useMemo(()=>E==null?void 0:E.html.split(/(<span[^>]*>.*?<\/span>)/g).filter(Boolean),[E==null?void 0:E.html]),A=T?r.jsx(wV,{svgString:s,className:"max-h-96 w-full"}):M&&M.length>0?r.jsx("span",{children:M.map((N,L)=>r.jsx(kte,{htmlSegment:N},L))}):E!=null&&E.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:E.html}}):r.jsx("span",{children:s});return r.jsx(Ate,{ref:m,title:(I=d!=null?d:E==null?void 0:E.language)!=null?I:n,shouldWrapCode:o,stickyTitleRightContent:l&&r.jsxs("div",{className:"bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs",children:[S&&r.jsx(Mte,{}),r.jsx(gI,{buttonText:h?C.formatMessage({id:"6NJu7m",defaultMessage:"Copy"}):C.formatMessage({id:"zIa6ZQ",defaultMessage:"Copy code"}),onCopy:b,className:"py-1",iconClassName:h?"icon-xs":"icon-sm"}),!v&&(f==null?void 0:f.id)&&h&&r.jsx(lte,{content:s,codeLanguage:n!=null?n:"",codeSnippetRef:m,clientThreadId:f==null?void 0:f.id})]}),codeClassName:e,codeContainerClassName:c,onCopy:y,className:z(t,x&&"border-token-border-medium bg-token-bg-primary dark:bg-token-sidebar-surface-primary border"),removeTopBorderRadius:a,showActionBar:i,isAuraSidebar:x,children:A})}function Mte(){const e=wl(!0),{data:n=!1}=eo(Lt.ShowExpandedCodeView),s=ne();return r.jsxs("div",{className:"border-token-border-medium me-2 flex items-center gap-2 border-e pe-2",children:[r.jsx("label",{htmlFor:"ada-always-show",children:r.jsx(j,{defaultMessage:"Always show details",id:"message.tools.codeInterpreter.alwaysShowAnalysis"})}),r.jsx(kV,{id:"ada-always-show",size:"small",onCheckedChange:o=>{e.mutate({setting:Lt.ShowExpandedCodeView,value:o})},checked:n,"aria-label":n?s.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis on",id:"message.tools.codeInterpreter.alwaysShowAnalysis.enabled"}):s.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis off",id:"message.tools.codeInterpreter.alwaysShowAnalysis.disabled"})})]})}function Ate({children:t,title:e,stickyTitleRightContent:n,shouldWrapCode:s=!1,className:o,codeContainerClassName:a,codeClassName:i,ref:l,onCopy:c,removeTopBorderRadius:d,showActionBar:u=!0,isAuraSidebar:f=!1}){return r.jsxs(Ite,{className:o,children:[u&&r.jsxs(r.Fragment,{children:[r.jsx(jte,{$removeTopBorderRadius:d,className:z(f&&"bg-token-bg-primary dark:bg-token-sidebar-surface-primary"),children:e}),r.jsx("div",{className:"sticky top-9",children:r.jsx("div",{className:"absolute end-0 bottom-0 flex h-9 items-center pe-2",children:n})})]}),r.jsx(Nte,{ref:l,className:a,children:r.jsx(Pte,{$shouldWrap:s,className:i,onCopy:c,children:t})})]})}var D9;const Ite=ft.div(D9||(D9=ct(["contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"])));var F9;const jte=ft.div(F9||(F9=ct(["flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary select-none ",""])),t=>t.$removeTopBorderRadius?"":"rounded-t-2xl"),Nte=function({children:e,className:n,ref:s}){return r.jsx("div",{ref:s,className:z("overflow-y-auto p-4",n),dir:"ltr",children:e})};var B9;const Pte=ft.code(B9||(B9=ct(["",""])),t=>t.$shouldWrap?"whitespace-pre-wrap!":"whitespace-pre!");function Rte(t){return t.trim().startsWith("<svg")}function Lte(t){return"children"in t?pI(t):"value"in t?t.value:""}function Ote(t){return t.type==="text"?t.value:"children"in t?pI(t):""}function pI(t){let e=-1;const n=[];for(;++e<t.children.length;)n[e]=Ote(t.children[e]);return n.join("")}function Dte(d){var u=d,{node:t,className:e,wrapperClassName:n,children:s,inline:o,removeTopBorderRadius:a,showActionBar:i=!0,codeContainerClassName:l}=u,c=we(u,["node","className","wrapperClassName","children","inline","removeTopBorderRadius","showActionBar","codeContainerClassName"]);var f;if(o)return r.jsx("code",U(w({className:e},c),{children:s}));{const m=(f=e==null?void 0:e.split(" ").find(p=>p.startsWith("language-")))==null?void 0:f.split("-")[1],g=t?Lte(t):"";return r.jsx(Tte,{language:m,wrapperClassName:n,codeContainerClassName:l,codeClassName:e,content:g,removeTopBorderRadius:a,showActionBar:i})}}function hI(t){return t.type==="element"}function Fte(t){return hI(t)?t.tagName==="code":!1}function BGe(){return function(t){$v(t,"element",function(e,n,s){Fte(e)&&(s&&hI(s)&&s.tagName==="pre"?e.properties.inline=!1:e.properties.inline=!0)})}}const Yv=t=>{switch(t){case"thumbsDown":return"thumbs_down";case"thumbsUp":return"thumbs_up"}},Bte="ecosystem_app_feedback";function ja(t,e,n="CHAT"){return{signal_detail:{common_metadata:e},signal_type:t,signal_metadata:{},user_metadata:{},product_surface:n}}function Na(t){ge.safePost("/unified_user_signals",{requestBody:t,authOption:sn.SendIfAvailable})}function Ute(t,e,n,s="CHAT",o){var a=ja("message_feedback",w({conversation_id:e,message_id:n},o!=null&&o.originatingConversationId?{originating_conversation_id:o.originatingConversationId}:{}),s);a.signal_detail.message_feedback=t,Na(a)}function $te(t,e,n,s="CHAT"){var o=ja("conversation_rating",{conversation_id:e,message_id:n},s);o.signal_detail.conversation_rating=t,Na(o)}function Rr(t,e,n,s,o={},a="CHAT"){const i=ja(t,{conversation_id:e,message_id:n,image_generation_id:s},a);Object.assign(i.signal_detail,o),Na(i)}function _I(t,e,n,s="CHAT"){var o=ja("turn_regeneration",{conversation_id:e,model_slug:n},s);o.signal_detail.turn_regeneration=t,Na(o)}function UGe(t,e,n="CHAT"){var s=ja("active_branch_switch",{conversation_id:e},n);s.signal_detail.active_branch_switch=t,Na(s)}function Vte(t,e,n,s,o="CHAT"){return ja(t,{conversation_id:e,message_id:n,model_slug:s},o)}function $Ge(t,e,n,s,o,a,i="CHAT"){if(!ve(a,"2637496240"))return;const c=Vte(t==="accept"?"writing_block_magic_edit_accepted":"writing_block_magic_edit_rejected",n,s,o,i);t==="accept"?c.signal_detail.writing_block_magic_edit_accepted=e:c.signal_detail.writing_block_magic_edit_rejected=e,Na(c)}function Hte(t,e,n="CHAT"){const s=ja("survey_submission",{conversation_id:e},n);s.signal_detail.survey_submission=t,Na(s)}function Gte(t,e,n="CHAT"){const s=ja("survey_seen",{conversation_id:e},n);s.signal_detail.survey_seen=t,Na(s)}function Wte(t,e,n="CHAT"){var o,a;const s=ja("survey_dismissed",{conversation_id:e},n);s.signal_detail.survey_dismissed={survey_campaign_name:(o=t.survey_campaign_name)!=null?o:null,survey_election_id:(a=t.survey_election_id)!=null?a:null},Na(s)}function VGe({rating:t,conversationId:e,messageId:n,suggestionMessageId:s,attributionId:o,widgetType:a,productSurface:i="CHAT"}){const l=ja(Bte,{conversation_id:e!=null?e:null,message_id:n!=null?n:null},i);l.signal_detail.ecosystem_app_feedback={rating:Yv(t),attribution_id:o!=null?o:null,widget_type:a!=null?a:null,suggestion_message_id:s!=null?s:null},Na(l)}function Zv(t,e="short"){try{const n=new URL(t).hostname.replace("www.","");return e==="hostname"?n:n.replace(/\.[^.]*$/,"")}catch(n){return t}}var Kv="Popover",[xI]=kl(Kv,[fh]),qf=fh(),[zte,Mi]=xI(Kv),yI=t=>{const{__scopePopover:e,children:n,open:s,defaultOpen:o,onOpenChange:a,modal:i=!1}=t,l=qf(e),c=_.useRef(null),[d,u]=_.useState(!1),[f=!1,m]=hr({prop:s,defaultProp:o,onChange:a});return r.jsx(aT,U(w({},l),{children:r.jsx(zte,{scope:e,contentId:mh(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:_.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:d,onCustomAnchorAdd:_.useCallback(()=>u(!0),[]),onCustomAnchorRemove:_.useCallback(()=>u(!1),[]),modal:i,children:n})}))};yI.displayName=Kv;var vI="PopoverAnchor",bI=_.forwardRef((t,e)=>{const c=t,{__scopePopover:n}=c,s=we(c,["__scopePopover"]),o=Mi(vI,n),a=qf(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=o;return _.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(Qy,U(w(w({},a),s),{ref:e}))});bI.displayName=vI;var CI="PopoverTrigger",SI=_.forwardRef((t,e)=>{const c=t,{__scopePopover:n}=c,s=we(c,["__scopePopover"]),o=Mi(CI,n),a=qf(n),i=On(e,o.triggerRef),l=r.jsx(un.button,U(w({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":II(o.open)},s),{ref:i,onClick:Rt(t.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?l:r.jsx(Qy,U(w({asChild:!0},a),{children:l}))});SI.displayName=CI;var Qv="PopoverPortal",[qte,Yte]=xI(Qv,{forceMount:void 0}),wI=t=>{const{__scopePopover:e,forceMount:n,children:s,container:o}=t,a=Mi(Qv,e);return r.jsx(qte,{scope:e,forceMount:n,children:r.jsx(gh,{present:n||a.open,children:r.jsx(Jy,{asChild:!0,container:o,children:s})})})};wI.displayName=Qv;var sd="PopoverContent",kI=_.forwardRef((t,e)=>{const n=Yte(sd,t.__scopePopover),i=t,{forceMount:s=n.forceMount}=i,o=we(i,["forceMount"]),a=Mi(sd,t.__scopePopover);return r.jsx(gh,{present:s||a.open,children:a.modal?r.jsx(Zte,U(w({},o),{ref:e})):r.jsx(Kte,U(w({},o),{ref:e}))})});kI.displayName=sd;var Zte=_.forwardRef((t,e)=>{const n=Mi(sd,t.__scopePopover),s=_.useRef(null),o=On(e,s),a=_.useRef(!1);return _.useEffect(()=>{const i=s.current;if(i)return rT(i)},[]),r.jsx(iT,{as:lT,allowPinchZoom:!0,children:r.jsx(EI,U(w({},t),{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Rt(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Rt(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Rt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})}))})}),Kte=_.forwardRef((t,e)=>{const n=Mi(sd,t.__scopePopover),s=_.useRef(!1),o=_.useRef(!1);return r.jsx(EI,U(w({},t),{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:a=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),EI=_.forwardRef((t,e)=>{const p=t,{__scopePopover:n,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u}=p,f=we(p,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),m=Mi(sd,n),g=qf(n);return cT(),r.jsx(dT,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:a,children:r.jsx(uT,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:r.jsx(fT,U(w(w({"data-state":II(m.open),role:"dialog",id:m.contentId},g),f),{ref:e,style:U(w({},f.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),TI="PopoverClose",MI=_.forwardRef((t,e)=>{const a=t,{__scopePopover:n}=a,s=we(a,["__scopePopover"]),o=Mi(TI,n);return r.jsx(un.button,U(w({type:"button"},s),{ref:e,onClick:Rt(t.onClick,()=>o.onOpenChange(!1))}))});MI.displayName=TI;var Qte="PopoverArrow",AI=_.forwardRef((t,e)=>{const a=t,{__scopePopover:n}=a,s=we(a,["__scopePopover"]),o=qf(n);return r.jsx(mT,U(w(w({},o),s),{ref:e}))});AI.displayName=Qte;function II(t){return t?"open":"closed"}var Dl=yI,Jte=bI,yr=SI,Fl=wI,Bl=kI,Xte=MI,ene=AI,tne="Toggle",jI=_.forwardRef((t,e)=>{const c=t,{pressed:n,defaultPressed:s=!1,onPressedChange:o}=c,a=we(c,["pressed","defaultPressed","onPressedChange"]),[i=!1,l]=hr({prop:n,onChange:o,defaultProp:s});return r.jsx(un.button,U(w({type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":t.disabled?"":void 0},a),{ref:e,onClick:Rt(t.onClick,()=>{t.disabled||l(!i)})}))});jI.displayName=tne;var Dd="ToggleGroup",[NI,HGe]=EV(Dd,[ph]),PI=ph(),Jv=Yn.forwardRef((t,e)=>{const o=t,{type:n}=o,s=we(o,["type"]);if(n==="single"){const a=s;return r.jsx(nne,U(w({},a),{ref:e}))}if(n==="multiple"){const a=s;return r.jsx(sne,U(w({},a),{ref:e}))}throw new Error("Missing prop `type` expected on `".concat(Dd,"`"))});Jv.displayName=Dd;var[RI,LI]=NI(Dd),nne=Yn.forwardRef((t,e)=>{const c=t,{value:n,defaultValue:s,onValueChange:o=()=>{}}=c,a=we(c,["value","defaultValue","onValueChange"]),[i,l]=hr({prop:n,defaultProp:s,onChange:o});return r.jsx(RI,{scope:t.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:l,onItemDeactivate:Yn.useCallback(()=>l(""),[l]),children:r.jsx(OI,U(w({},a),{ref:e}))})}),sne=Yn.forwardRef((t,e)=>{const u=t,{value:n,defaultValue:s,onValueChange:o=()=>{}}=u,a=we(u,["value","defaultValue","onValueChange"]),[i=[],l]=hr({prop:n,defaultProp:s,onChange:o}),c=Yn.useCallback(f=>l((m=[])=>[...m,f]),[l]),d=Yn.useCallback(f=>l((m=[])=>m.filter(g=>g!==f)),[l]);return r.jsx(RI,{scope:t.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:d,children:r.jsx(OI,U(w({},a),{ref:e}))})});Jv.displayName=Dd;var[one,ane]=NI(Dd),OI=Yn.forwardRef((t,e)=>{const m=t,{__scopeToggleGroup:n,disabled:s=!1,rovingFocus:o=!0,orientation:a,dir:i,loop:l=!0}=m,c=we(m,["__scopeToggleGroup","disabled","rovingFocus","orientation","dir","loop"]),d=PI(n),u=hh(i),f=w({role:"group",dir:u},c);return r.jsx(one,{scope:n,rovingFocus:o,disabled:s,children:o?r.jsx(pT,U(w({asChild:!0},d),{orientation:a,dir:u,loop:l,children:r.jsx(un.div,U(w({},f),{ref:e}))})):r.jsx(un.div,U(w({},f),{ref:e}))})}),yp="ToggleGroupItem",DI=Yn.forwardRef((t,e)=>{const n=LI(yp,t.__scopeToggleGroup),s=ane(yp,t.__scopeToggleGroup),o=PI(t.__scopeToggleGroup),a=n.value.includes(t.value),i=s.disabled||t.disabled,l=U(w({},t),{pressed:a,disabled:i}),c=Yn.useRef(null);return s.rovingFocus?r.jsx(gT,U(w({asChild:!0},o),{focusable:!i,active:a,ref:c,children:r.jsx(oC,U(w({},l),{ref:e}))})):r.jsx(oC,U(w({},l),{ref:e}))});DI.displayName=yp;var oC=Yn.forwardRef((t,e)=>{const c=t,{__scopeToggleGroup:n,value:s}=c,o=we(c,["__scopeToggleGroup","value"]),a=LI(yp,n),i={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return r.jsx(jI,U(w(w({},l),o),{ref:e,onPressedChange:d=>{d?a.onItemActivate(s):a.onItemDeactivate(s)}}))}),GGe=Jv,WGe=DI;const Xv=(...t)=>e=>{t.forEach(n=>{if(typeof n=="function")n(e);else if(n){const s=n;s.current=e}})},rne=(...t)=>{"use no forget";return _.useMemo(()=>Xv(...t),[...t])},FI=on(()=>TV(()=>({width:window.innerWidth,height:window.innerHeight}),t=>If(window,{resize:t}),{getServerFallback:()=>({width:MV()?360:768,height:640})}));function aC(t,e){const n=t.indexOf(e);return n===-1?Number.POSITIVE_INFINITY:n}const r1=t=>{"use forget";const e=W.c(14),{binding:n,className:s}=t,o=ne();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=AV(),e[0]=a):a=e[0];const i=a;let l,c;if(e[1]!==n||e[2]!==s||e[3]!==o){let u;e[6]===Symbol.for("react.memo_cache_sentinel")?(u=(g,p)=>{const h=i?une:fne,x=aC(h,g),v=aC(h,p);return x-v},e[6]=u):u=e[6];const f=[...n].sort(u);e[7]!==s?(l=z("inline-flex whitespace-pre *:inline-flex *:font-sans",!i&&"*:not-last:after:px-0.5 *:not-last:after:content-['+']",s),e[7]=s,e[8]=l):l=e[8];let m;e[9]!==o?(m=g=>{var x,v,y;const p=(v=(x=i?cne[g]:null)!=null?x:dne[g])!=null?v:g.toLocaleUpperCase(),h=(y=i?ine[g]:null)!=null?y:lne[g];return r.jsx("kbd",{"aria-label":h&&o.formatMessage(h),children:r.jsx("span",{className:"min-w-[1em]",children:p})},g)},e[9]=o,e[10]=m):m=e[10],c=f.map(m),e[1]=n,e[2]=s,e[3]=o,e[4]=l,e[5]=c}else l=e[4],c=e[5];let d;return e[11]!==l||e[12]!==c?(d=r.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=d):d=e[13],d},Do=Se({commandKey:{id:"keyboard.key.command",defaultMessage:"Command"},optionKey:{id:"keyboard.key.option",defaultMessage:"Option"},shiftKey:{id:"keyboard.key.shift",defaultMessage:"Shift"},controlKey:{id:"keyboard.key.control",defaultMessage:"Control"},altKey:{id:"keyboard.key.alt",defaultMessage:"Alt"},winKey:{id:"keyboard.key.win",defaultMessage:"Windows"},escapeKey:{id:"keyboard.key.esc",defaultMessage:"Escape"},deleteKey:{id:"keyboard.key.delete",defaultMessage:"Delete"},backspaceKey:{id:"keyboard.key.bksp",defaultMessage:"Backspace"}}),ine={[We.Mod]:Do.commandKey,[We.Meta]:Do.commandKey,[We.Alt]:Do.optionKey,[We.Backspace]:Do.deleteKey},lne={[We.Mod]:Do.controlKey,[We.Meta]:Do.winKey,[We.Alt]:Do.altKey,[We.Shift]:Do.shiftKey,[We.Control]:Do.controlKey,[We.Escape]:Do.escapeKey,[We.Backspace]:Do.backspaceKey},cne={[We.Mod]:"",[We.Meta]:"",[We.Alt]:"",[We.Shift]:"",[We.Control]:"",[We.Escape]:""},dne={[We.Mod]:"Ctrl",[We.Meta]:"Win",[We.Alt]:"Alt",[We.Shift]:"Shift",[We.Control]:"Ctrl",[We.Comma]:",",[We.Enter]:"",[We.Escape]:"Esc",[We.ArrowUp]:"",[We.ArrowDown]:"",[We.ArrowLeft]:"",[We.ArrowRight]:"",[We.Backspace]:"",[We.Delete]:"",[We.Tab]:""},une=[We.Control,We.Alt,We.Shift,We.Meta,We.Mod],fne=[We.Meta,We.Mod,We.Control,We.Alt,We.Shift];var Oe=(t=>(t.Onboarding="oai/apps/hasSeenOnboarding",t.hasSeenExistingUserPersonalityOnboarding="oai/apps/hasSeenExistingUserPersonalityOnboarding",t.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",t.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",t.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",t.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",t.NewOnboardingConvo="oai/apps/hasSeenNewUserOnboardingConvo",t.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",t.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",t.hasDismissedCanvasOnboarding="oai/apps/hasDismissedCanvasOnboarding",t.HasSeenAdvancedVoiceOnMobile="oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26",t.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",t.UseSidekick="oai/apps/hasDismissedUseSidekick",t.UseSidetron="oai/apps/hasDismissedUseSidetron",t.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",t.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",t.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",t.hasSeenComposerSearchButtonTooltip="oai/apps/hasSeenComposerSearchButtonTooltip",t.hasSeenComposerContextualAnswerTooltip="oai/apps/hasSeenComposerContextualAnswerTooltip",t.hasSeenConnectorsNuxModal="oai/apps/hasSeenConnectorsNuxModal",t.hasSeenGoogleConnectorsNuxModal="oai/apps/hasSeenGoogleConnectorsNuxModal",t.hasSeenContextualAnswerGoogleSyncFinished="oai/apps/hasSeenContextualAnswerGoogleSyncFinished",t.hasSeenConnectorsSourcesPillTooltip="oai/apps/hasSeenConnectorsSourcesPillTooltip",t.hasSeenConnectorsUpgradeFileAccessModal="oai/apps/hasSeenConnectorsUpgradeFileAccessModal",t.hasSeenComposerSystemHintButtonTooltip="oai/apps/hasSeenComposerSystemHintButtonTooltip",t.hasSeenPioneer="oai/apps/hasSeenPioneer",t.hasSeenMaverick="oai/apps/hasSeenMaverick",t.hasSeenMaverickCapi="oai/apps/hasSeenMaverickCapi",t.hasSeenTrailBlazer="oai/apps/hasSeenTrailBlazer",t.hasSeenStratos="oai/apps/hasSeenStratos",t.hasSeenSeeker="oai/apps/hasSeenSeeker",t.hasSeenWayfinder="oai/apps/hasSeenWayfinder",t.hasSeenAdvancedVoiceNuxFullPage="oai/apps/hasSeenAdvancedVoice/2024-09-24",t.hasSeenWindowsAppOnboarding="oai/apps/hasSeenWindowsAppOnboarding",t.DesktopBrowserExtensionAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionAnnouncement",t.DesktopBrowserExtensionReactiveAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement",t.DesktopOperatorAnnouncement="oai/apps/hasSeenDesktopOperatorAnnouncement",t.DesktopClassmatesPromotionAnnouncement="oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement",t.NewOnboardingFlow="oai/apps/hasSeenOnboardingFlow",t.NewStaticOnboardingFlow="oai/apps/hasSeenStaticOnboarding",t.NewPromptOnboardingFlow="oai/apps/hasSeenPromptOnboarding",t.CreateExampleChatsOnboarding="oai/apps/hasCreatedExampleChats",t.hasUsedConversationalOnboardingStarterPrompt="oai/apps/hasUsedNewUserStarterPrompt",t.hasSeenProjectsWebNuxTooltip="oai/apps/hasSeenProjectsWebNuxTooltip",t.hasSeenPotionOnboarding="oai/apps/hasSeenPotionOnboarding",t.hasSeenProjectsUpdateNuxTooltip="oai/apps/hasSeenProjectsUpdateNuxTooltip",t.hasSeenProjectsToFree="oai/apps/hasSeenProjectsToFree",t.hasSeenMemoryInSearch="oai/apps/hasSeenMemoryInSearch",t.hasSeenMoonshineNux="oai/apps/hasSeenMoonshineNux",t.hasSeenMoonshineNuxV2="oai/apps/hasSeenMoonshineNuxV2",t.hasSeenGoldenHourNux="oai/apps/hasSeenGoldenHourNux",t.hasSeenGoldenHourNuxV2="oai/apps/hasSeenGoldenHourNuxV2",t.hasSeenGoldenHourAnnouncement="oai/apps/hasSeenGoldenHourAnnouncement",t.hasSeenInlineFeedbackCustomInstrMessage="oai/apps/hasSeenInlineFeedbackCustomInstrMessage",t.hasSeenCaSystemHint="oai/apps/hasSeenCaSystemHint",t.hasDismissedPromoRedemption="oai/apps/hasDismissedPromoRedemption",t.hasSeenFilePickerNuxTooltip="oai/apps/hasSeenFilePicker",t.hasSeenMultipleGPTEditorsTooltip="oai/apps/hasSeenMultipleGPTEditorsTooltip",t.hasSeenSharedProjectsTooltip="oai/apps/hasSeenSharedProjectsTooltip",t.hasSeenPhoenixNux="oai/apps/hasSeenPhoenixNux",t.hasSeenPhoenixFreeNux="oai/apps/hasSeenPhoenixFreeNux",t.hasSeenAshwingNux="oai/apps/hasSeenAshwingNux",t.hasDismissedReferrerRedemption="oai/apps/hasDismissedReferrerRedemption",t.hasDismissedRefereeRedemption="oai/apps/hasDismissedRefereeRedemption",t.hasSeenReferralUpsellAnnouncement="oai/apps/hasSeenReferralProgramUpsell",t.hasSeenTatertotIntakeForm="oai/apps/hasSeenTatertotIntakeForm",t.hasSeenComposerBigBoxEnterHint="oai/apps/hasSeenComposerBigBoxEnterHint",t.d2dee219="oai/apps/d2dee219",t.hasSeenStudentsUpsellAnnouncement="oai/apps/hasSeenStudentsUpsellAnnouncement",t.hasSeenMemoryUpdatedTooltip="oai/apps/hasSeenMemoryUpdatedTooltip",t.hasSeenTeamSeatsPromoAnnouncement="oai/apps/hasSeenTeamSeatsPromoAnnouncement",t.hasSeenTeamsContextualAnswersUpsell="oai/apps/hasSeenTeamsContextualAnswersUpsell",t.hasSeenO3O4MiniAutomations="oai/apps/hasSeenO3O4MiniAutomations",t.hasSeenn7jupdNux="oai/apps/hasSeenn7jupdNux",t.hasSeenTatertotNux="oai/apps/hasSeenTatertotNux",t.hasSeenTatertotQuizNux="oai/apps/hasSeenTatertotQuizNux",t.hasSeenAudioParagenPrompt="oai/apps/hasSeenAudioParagenPrompt",t.hasSeenOdysseyConnectorsModal="oai/apps/hasSeenOdysseyConnectorsModal",t.hasSeenOdysseyTakeoverModal="oai/apps/hasSeenOdysseyTakeoverModal",t.hasSeenAgentModeAnnouncementBanner="oai/apps/hasSeenAgentModeAnnouncementBanner",t.hasSeenWorkspaceDiscoveryFirstLogin="oai/apps/hasSeenWorkspaceDiscoveryFirstLogin",t.hasSeenFreeTrialUpsellModal="oai/apps/hasSeenPlusOrBusinessFreeTrial",t.hasSeenGoFreeTrialUpsellModal="oai/apps/hasSeenGoTwelveMonthFreeTrial",t.hasSeenPlusFreeTrialHomepageAnnouncementBanner="oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner",t.hasSeenWorkSpacePolicy="oai/apps/hasSeenWorkSpacePolicy",t.hasSeenJoinWorkspaceBanner="oai/apps/hasSeenJoinWorkspaceBanner",t.hasSeenl1239dk1AlphaBanner="oai/apps/hasSeenl1239dk1AlphaBanner",t.hasSeenWhamCombinedSubmitButtonNux="oai/apps/hasSeenWhamCombinedSubmitButtonNux",t.hasSeenFollowupsFirstTurnOnce="oai/apps/hasSeenFollowupsFirstTurnOnce",t.hasSeenWritingInlineEditNux="oai/apps/hasSeenWritingInlineEditNux",t.hasSeenl1239dk1LaunchNux="oai/apps/hasSeenl1239dk1LaunchNux",t))(Oe||{});const BI=on(()=>Be(!1));function lt(t){"use forget";var y;const e=W.c(21),{data:n,isLoading:s}=_h();let o;e[0]!==(n==null?void 0:n.eligible_announcements)?(o=(y=n==null?void 0:n.eligible_announcements)!=null?y:[],e[0]=n==null?void 0:n.eligible_announcements,e[1]=o):o=e[1];const a=o,i=V();let l;e[2]!==i?(l=es(i),e[2]=i,e[3]=l):l=e[3];const c=l;let d;e[4]!==c||e[5]!==t?(d=c&&!pne(t),e[4]=c,e[5]=t,e[6]=d):d=e[6];const u=d,{mutate:f}=mne();let m;e[7]!==t||e[8]!==f?(m=()=>f({key:t}),e[7]=t,e[8]=f,e[9]=m):m=e[9];const g=m;let p;e[10]!==i?(p=()=>BI(i),e[10]=i,e[11]=p):p=e[11];const h=re(p);let x;e[12]!==h||e[13]!==a||e[14]!==u||e[15]!==t?(x=!h&&a.includes(t)&&!u,e[12]=h,e[13]=a,e[14]=u,e[15]=t,e[16]=x):x=e[16];let v;return e[17]!==s||e[18]!==g||e[19]!==x?(v={eligible:x,markAsViewedDontInvalidateCache:g,isLoading:s},e[17]=s,e[18]=g,e[19]=x,e[20]=v):v=e[20],v}async function ot(t,e){var o;const n=Qo(t),s=n.getQueryData(Ou().queryKey);(o=s==null?void 0:s.persistent_announcements)!=null&&o.includes(e)||(n.setQueryData(Ou().queryKey,a=>a&&U(w({},a),{eligible_announcements:a.eligible_announcements.filter(i=>i!==e)})),await ge.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:e}}}),n.invalidateQueries(Ou()))}function mne(){"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:gne},t[0]=e):e=t[0],qt(e)}function gne(t){const{key:e}=t;return ge.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:e}}})}function pne(t){switch(t){case"oai/apps/hasSeenOnboarding":case"oai/apps/hasSeenTeamOwnerOnboarding":case"oai/apps/hasSeenMemoryOnboarding":case"oai/apps/hasSeenTemporaryChatOnboarding":case"oai/apps/hasSeenArchiveConversationOnboarding":case"oai/apps/hasSeenNewUserOnboardingConvo":case"oai/apps/hasSeenDalleEditingOnboarding":case"oai/apps/hasSeenModelSwitcherAutoDowngrade":case"oai/apps/hasDismissedCanvasOnboarding":case"oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26":case"oai/apps/hasSeenAdvancedVoice/2024-09-24":case"oai/apps/hasSeenSidekickLauncherOnboarding":case"oai/apps/hasDismissedUseSidekick":case"oai/apps/hasDismissedUseSidetron":case"oai/apps/hasSeenSncUsageNux":case"oai/apps/hasSeenSncWelcomeNux":case"oai/apps/hasSeenSncSourcesTooltip":case"oai/apps/hasSeenComposerSearchButtonTooltip":case"oai/apps/hasSeenComposerContextualAnswerTooltip":case"oai/apps/hasSeenConnectorsNuxModal":case"oai/apps/hasSeenGoogleConnectorsNuxModal":case"oai/apps/hasSeenContextualAnswerGoogleSyncFinished":case"oai/apps/hasSeenConnectorsSourcesPillTooltip":case"oai/apps/hasSeenConnectorsUpgradeFileAccessModal":case"oai/apps/hasSeenComposerSystemHintButtonTooltip":case"oai/apps/hasSeenPioneer":case"oai/apps/hasSeenExistingUserPersonalityOnboarding":case"oai/apps/hasSeenMaverick":case"oai/apps/hasSeenMaverickCapi":case"oai/apps/hasSeenTrailBlazer":case"oai/apps/hasSeenStratos":case"oai/apps/hasSeenSeeker":case"oai/apps/hasSeenWayfinder":case"oai/apps/hasSeenWindowsAppOnboarding":case"oai/apps/hasSeenDesktopBrowserExtensionAnnouncement":case"oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement":case"oai/apps/hasSeenDesktopOperatorAnnouncement":case"oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement":case"oai/apps/hasSeenOnboardingFlow":case"oai/apps/hasSeenStaticOnboarding":case"oai/apps/hasSeenPromptOnboarding":case"oai/apps/hasCreatedExampleChats":case"oai/apps/hasUsedNewUserStarterPrompt":case"oai/apps/hasSeenProjectsWebNuxTooltip":case"oai/apps/hasSeenProjectsUpdateNuxTooltip":case"oai/apps/hasSeenProjectsToFree":case"oai/apps/hasSeenMemoryInSearch":case"oai/apps/hasSeenMemoryUpdatedTooltip":case"oai/apps/hasSeenMoonshineNux":case"oai/apps/hasSeenMoonshineNuxV2":case"oai/apps/hasSeenGoldenHourNux":case"oai/apps/hasSeenGoldenHourNuxV2":case"oai/apps/hasSeenGoldenHourAnnouncement":case"oai/apps/hasSeenInlineFeedbackCustomInstrMessage":case"oai/apps/hasSeenCaSystemHint":case"oai/apps/hasSeenFilePicker":case"oai/apps/hasSeenMultipleGPTEditorsTooltip":case"oai/apps/hasSeenSharedProjectsTooltip":case"oai/apps/hasSeenComposerBigBoxEnterHint":case"oai/apps/hasSeenPhoenixNux":case"oai/apps/hasSeenPhoenixFreeNux":case"oai/apps/hasSeenAshwingNux":case"oai/apps/hasSeenAudioParagenPrompt":case"oai/apps/hasDismissedPromoRedemption":case"oai/apps/hasDismissedReferrerRedemption":case"oai/apps/hasDismissedRefereeRedemption":case"oai/apps/hasSeenReferralProgramUpsell":case"oai/apps/hasSeenStudentsUpsellAnnouncement":case"oai/apps/hasSeenTeamSeatsPromoAnnouncement":case"oai/apps/hasSeenTeamsContextualAnswersUpsell":case"oai/apps/hasSeenWorkspaceDiscoveryFirstLogin":case"oai/apps/hasSeenWorkSpacePolicy":case"oai/apps/hasSeenJoinWorkspaceBanner":case"oai/apps/hasSeenl1239dk1AlphaBanner":case"oai/apps/hasSeenWhamCombinedSubmitButtonNux":case"oai/apps/hasSeenTatertotIntakeForm":case"oai/apps/hasSeenO3O4MiniAutomations":case"oai/apps/hasSeenOdysseyConnectorsModal":case"oai/apps/hasSeenOdysseyTakeoverModal":case"oai/apps/hasSeenAgentModeAnnouncementBanner":case"oai/apps/hasSeenPlusOrBusinessFreeTrial":case"oai/apps/hasSeenGoTwelveMonthFreeTrial":case"oai/apps/hasSeenFollowupsFirstTurnOnce":case"oai/apps/hasSeenWritingInlineEditNux":case"oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner":case"oai/apps/d2dee219":case"oai/apps/hasSeenPotionOnboarding":case"oai/apps/hasSeenl1239dk1LaunchNux":return!0;case"oai/apps/hasSeenTatertotNux":case"oai/apps/hasSeenTatertotQuizNux":case"oai/apps/hasSeenn7jupdNux":return!1}}var Ma=(t=>(t[t.ATLAS_NAVLINKS_SOURCE_UNSPECIFIED=0]="ATLAS_NAVLINKS_SOURCE_UNSPECIFIED",t[t.ATLAS_NAVLINKS_SOURCE_CHAT_CAROUSEL=1]="ATLAS_NAVLINKS_SOURCE_CHAT_CAROUSEL",t[t.ATLAS_NAVLINKS_SOURCE_CHAT_LIST=2]="ATLAS_NAVLINKS_SOURCE_CHAT_LIST",t[t.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB=3]="ATLAS_NAVLINKS_SOURCE_SEARCH_TAB",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(Ma||{}),_l=(t=>(t[t.ATLAS_NAVLINKS_ACTION_STEP_UNSPECIFIED=0]="ATLAS_NAVLINKS_ACTION_STEP_UNSPECIFIED",t[t.ATLAS_NAVLINKS_ACTION_STEP_SHOW=1]="ATLAS_NAVLINKS_ACTION_STEP_SHOW",t[t.ATLAS_NAVLINKS_ACTION_STEP_CLICK=2]="ATLAS_NAVLINKS_ACTION_STEP_CLICK",t[t.ATLAS_NAVLINKS_ACTION_STEP_SEE_MORE=3]="ATLAS_NAVLINKS_ACTION_STEP_SEE_MORE",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(_l||{}),pc=(t=>(t[t.ATLAS_SUPER_WIDGET_TAB_UNSPECIFIED=0]="ATLAS_SUPER_WIDGET_TAB_UNSPECIFIED",t[t.ATLAS_SUPER_WIDGET_TAB_HOME=1]="ATLAS_SUPER_WIDGET_TAB_HOME",t[t.ATLAS_SUPER_WIDGET_TAB_SEARCH=2]="ATLAS_SUPER_WIDGET_TAB_SEARCH",t[t.ATLAS_SUPER_WIDGET_TAB_IMAGES=3]="ATLAS_SUPER_WIDGET_TAB_IMAGES",t[t.ATLAS_SUPER_WIDGET_TAB_VIDEOS=4]="ATLAS_SUPER_WIDGET_TAB_VIDEOS",t[t.ATLAS_SUPER_WIDGET_TAB_NEWS=5]="ATLAS_SUPER_WIDGET_TAB_NEWS",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(pc||{}),px=(t=>(t[t.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_UNSPECIFIED=0]="ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_UNSPECIFIED",t[t.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_SHOW=1]="ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_SHOW",t[t.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_CLICK=2]="ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_CLICK",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(px||{});const od={$type:"protobuf_analytics_events.v1.AtlasNavlinksAction"},hne={$type:"protobuf_analytics_events.v1.AtlasClickSuperWidgetTab"},rC={$type:"protobuf_analytics_events.v1.AtlasGoogleSearchItAction"};var rn=(t=>(t[t.UPSELL_OR_MODAL_TYPE_UNSPECIFIED=0]="UPSELL_OR_MODAL_TYPE_UNSPECIFIED",t[t.UPSELL_OR_MODAL_TYPE_BLOCKING_INITIAL_MODAL=1]="UPSELL_OR_MODAL_TYPE_BLOCKING_INITIAL_MODAL",t[t.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL=2]="UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL",t[t.UPSELL_OR_MODAL_TYPE_NUX_BANNER=3]="UPSELL_OR_MODAL_TYPE_NUX_BANNER",t[t.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP=4]="UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP",t[t.UNRECOGNIZED=-1]="UNRECOGNIZED",t))(rn||{});const _ne={$type:"protobuf_analytics_events.v1.CopyTurnToClipboard"},zGe={$type:"protobuf_analytics_events.v1.ChatgptVoiceSession"},dn={$type:"protobuf_analytics_events.v1.ChatgptUpsellOrModalShown"};function qGe(){const t=Rn(_s());t.redirect!=null&&(window.location.href=t.redirect.destination)}const i1="oai/apps/hasSeenl1239dk1LaunchNux",UI="oai/apps/hasSeenl1239dk1Onboarding",xne="oai/apps/hasSeenl1239dk1Bon",yne="oai/apps/hasSeenl1239dk1CreateFirstEnvModal",vne="oai/apps/hasSeenl1239dk1NewFeatures",bne="oai/apps/hasSeenl1239dk1NewFeaturesSlack",Cne="oai/apps/hasSeenl1239dk1AlphaBanner",Sne="oai/apps/hasSeenl1239dk1CodeReviewTab",wne="oai/apps/hasCompletedWhamCodeReviewOnboardingFlow",kne="oai/apps/hasSeenWhamGiftCreditsNux";function Ene(){return lt(i1)}function $I(){return lt(UI)}function YGe(){return lt(xne)}function ZGe(){return lt(yne)}function KGe(){return lt(vne)}function QGe(){return lt(bne)}function JGe(){return lt(Sne)}function XGe(){return lt(Cne)}function eWe(){return lt(wne)}function tWe(){return lt(kne)}var VI=(t=>(t.Personal="chat",t.Workspace="workspace",t.Team="team",t))(VI||{});const nWe=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;var sWe={};const Oc=2147483647,ha=36,eb=1,gf=26,Tne=38,Mne=700,HI=72,GI=128,WI="-",Ane=/^xn--/,Ine=/[^\0-\x7F]/,jne=/[\x2E\u3002\uFF0E\uFF61]/g,Nne={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P_=ha-eb,_a=Math.floor,R_=String.fromCharCode;function $r(t){throw new RangeError(Nne[t])}function Pne(t,e){const n=[];let s=t.length;for(;s--;)n[s]=e(t[s]);return n}function zI(t,e){const n=t.split("@");let s="";n.length>1&&(s=n[0]+"@",t=n[1]),t=t.replace(jne,".");const o=t.split("."),a=Pne(o,e).join(".");return s+a}function tb(t){const e=[];let n=0;const s=t.length;for(;n<s;){const o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<s){const a=t.charCodeAt(n++);(a&64512)==56320?e.push(((o&1023)<<10)+(a&1023)+65536):(e.push(o),n--)}else e.push(o)}return e}const qI=t=>String.fromCodePoint(...t),Rne=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:ha},iC=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},YI=function(t,e,n){let s=0;for(t=n?_a(t/Mne):t>>1,t+=_a(t/e);t>P_*gf>>1;s+=ha)t=_a(t/P_);return _a(s+(P_+1)*t/(t+Tne))},nb=function(t){const e=[],n=t.length;let s=0,o=GI,a=HI,i=t.lastIndexOf(WI);i<0&&(i=0);for(let l=0;l<i;++l)t.charCodeAt(l)>=128&&$r("not-basic"),e.push(t.charCodeAt(l));for(let l=i>0?i+1:0;l<n;){const c=s;for(let u=1,f=ha;;f+=ha){l>=n&&$r("invalid-input");const m=Rne(t.charCodeAt(l++));m>=ha&&$r("invalid-input"),m>_a((Oc-s)/u)&&$r("overflow"),s+=m*u;const g=f<=a?eb:f>=a+gf?gf:f-a;if(m<g)break;const p=ha-g;u>_a(Oc/p)&&$r("overflow"),u*=p}const d=e.length+1;a=YI(s-c,d,c==0),_a(s/d)>Oc-o&&$r("overflow"),o+=_a(s/d),s%=d,e.splice(s++,0,o)}return String.fromCodePoint(...e)},sb=function(t){const e=[];t=tb(t);const n=t.length;let s=GI,o=0,a=HI;for(const c of t)c<128&&e.push(R_(c));const i=e.length;let l=i;for(i&&e.push(WI);l<n;){let c=Oc;for(const u of t)u>=s&&u<c&&(c=u);const d=l+1;c-s>_a((Oc-o)/d)&&$r("overflow"),o+=(c-s)*d,s=c;for(const u of t)if(u<s&&++o>Oc&&$r("overflow"),u===s){let f=o;for(let m=ha;;m+=ha){const g=m<=a?eb:m>=a+gf?gf:m-a;if(f<g)break;const p=f-g,h=ha-g;e.push(R_(iC(g+p%h,0))),f=_a(p/h)}e.push(R_(iC(f,0))),a=YI(o,d,l===i),o=0,++l}++o,++s}return e.join("")},ZI=function(t){return zI(t,function(e){return Ane.test(e)?nb(e.slice(4).toLowerCase()):e})},KI=function(t){return zI(t,function(e){return Ine.test(e)?"xn--"+sb(e):e})},Lne={version:"2.3.1",ucs2:{decode:tb,encode:qI},decode:nb,encode:sb,toASCII:KI,toUnicode:ZI},One=Object.freeze(Object.defineProperty({__proto__:null,decode:nb,default:Lne,encode:sb,toASCII:KI,toUnicode:ZI,ucs2decode:tb,ucs2encode:qI},Symbol.toStringTag,{value:"Module"})),oWe=j$(One);function Pg({id:t,label:e,checked:n,onChange:s,disabled:o,className:a,labelClassName:i,readOnly:l,containerClassName:c,labelSide:d="right",style:u,indeterminate:f}){const m=e&&r.jsx("label",{className:z("form-check-label text-token-text-primary",i),htmlFor:t,children:e}),g=_.useRef(null);_.useEffect(()=>{g.current&&(g.current.indeterminate=!!f)},[f]);const p=h=>{s==null||s(h)};return r.jsxs("div",{className:z("form-check flex items-center gap-2",c),children:[d==="left"&&m,r.jsx("input",{className:z("bg-token-bg-primary float-start h-4 w-4 appearance-none rounded-xs border border-gray-300 bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-500 checked:bg-blue-500 indeterminate:border-blue-500 indeterminate:bg-blue-500 dark:border-gray-700 dark:checked:border-blue-400 dark:checked:bg-blue-400 dark:indeterminate:border-blue-400 dark:indeterminate:bg-blue-400",o?"cursor-not-allowed":"cursor-pointer",a),type:"checkbox",disabled:o,onChange:p,checked:n,readOnly:l,id:t,"data-testid":t,style:u,ref:g}),d==="right"&&m]})}const Dne=R(()=>P(()=>import("./jyac53csf1atp5u6.js"),__vite__mapDeps([29,1])),{loading:t=>F(t)});function pf(t){"use forget";var In;const e=W.c(124);let n,s,o,a,i,l,c,d,u,f,m,g,p,h,x,v,y,b,C,S,E,k,T,M,A,I,N,L,O,D,$,H,G,Z,Q,q;e[0]!==t?(In=t,{name:v,placeholder:I,type:Q,role:L,list:h,ariaLabel:s,displayName:u,onChange:b,onFocus:S,onBlur:y,value:q,saveOnBlur:O,onClear:C,icon:n,iconPosition:H,onInputIconClick:E,className:l,inputClassName:g,containerInputClassName:c,iconClassName:m,autoComplete:a,autoCapitalize:o,spellCheck:D,autoFocus:i,onPressEnter:M,onPaste:T,disabled:d,maxLength:x,color:G,onKeyDown:k,suppressFocus:Z,ref:N,insideContainerChildren:p,style:$,displayNameLabelClassName:f}=In,A=we(In,["name","placeholder","type","role","list","ariaLabel","displayName","onChange","onFocus","onBlur","value","saveOnBlur","onClear","icon","iconPosition","onInputIconClick","className","inputClassName","containerInputClassName","iconClassName","autoComplete","autoCapitalize","spellCheck","autoFocus","onPressEnter","onPaste","disabled","maxLength","color","onKeyDown","suppressFocus","ref","insideContainerChildren","style","displayNameLabelClassName"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=d,e[9]=u,e[10]=f,e[11]=m,e[12]=g,e[13]=p,e[14]=h,e[15]=x,e[16]=v,e[17]=y,e[18]=b,e[19]=C,e[20]=S,e[21]=E,e[22]=k,e[23]=T,e[24]=M,e[25]=A,e[26]=I,e[27]=N,e[28]=L,e[29]=O,e[30]=D,e[31]=$,e[32]=H,e[33]=G,e[34]=Z,e[35]=Q,e[36]=q):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],d=e[8],u=e[9],f=e[10],m=e[11],g=e[12],p=e[13],h=e[14],x=e[15],v=e[16],y=e[17],b=e[18],C=e[19],S=e[20],E=e[21],k=e[22],T=e[23],M=e[24],A=e[25],I=e[26],N=e[27],L=e[28],O=e[29],D=e[30],$=e[31],H=e[32],G=e[33],Z=e[34],Q=e[35],q=e[36]);const Y=H===void 0?"right":H,te=G===void 0?"tertiary":G,ae=Z===void 0?!1:Z,[se,ce]=_.useState(q);let X;e[37]!==y||e[38]!==O?(X=bt=>{y==null||y(bt),O&&ce(bt.target.value)},e[37]=y,e[38]=O,e[39]=X):X=e[39];const ee=X;let ie;e[40]!==b||e[41]!==O?(ie=bt=>{b==null||b(bt),O&&ce(bt.target.value)},e[40]=b,e[41]=O,e[42]=ie):ie=e[42];const de=ie;let me;e[43]!==se||e[44]!==k||e[45]!==M?(me=bt=>{k==null||k(bt),!bt.nativeEvent.isComposing&&bt.key==="Enter"&&M&&(bt.preventDefault(),M(se,bt))},e[43]=se,e[44]=k,e[45]=M,e[46]=me):me=e[46];const xe=me;let pe,Me;e[47]!==q?(pe=()=>{ce(q)},Me=[q],e[47]=q,e[48]=pe,e[49]=Me):(pe=e[48],Me=e[49]),_.useEffect(pe,Me);let Ce;e[50]!==O||e[51]!==q?(Ce=O?{}:{value:q},e[50]=O,e[51]=q,e[52]=Ce):Ce=e[52];let ke;e[53]!==se||e[54]!==O?(ke=O?{value:se}:{},e[53]=se,e[54]=O,e[55]=ke):ke=e[55];let Le;e[56]!==ke||e[57]!==Ce?(Le=w(w({},Ce),ke),e[56]=ke,e[57]=Ce,e[58]=Le):Le=e[58];const De=Le,le=Y==="right",oe=Y==="left";let Ee;e[59]!==m||e[60]!==le||e[61]!==oe?(Ee=z("absolute top-1/2 -translate-y-1/2",{"end-0":le,"start-0":oe},m),e[59]=m,e[60]=le,e[61]=oe,e[62]=Ee):Ee=e[62];const be=Ee,fe=te==="neutral"&&(ae?"-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2":"focus-within:bg-token-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2 focus-within:border-green-500 focus-within:ring-1 focus-within:ring-transparent"),ue=te==="tertiary"&&(ae?"border-token-border-medium px-3 py-2":"border-token-border-medium focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1"),_e=te==="search"&&(ae?"border-token-border-medium bg-token-main-surface-primary dark:border-token-border-medium rounded-xl p-4":"border-token-border-medium bg-token-main-surface-primary focus-within:border-token-border-xheavy dark:border-token-border-medium dark:focus-within:border-token-border-xheavy rounded-xl p-4 focus-within:ring-0 dark:focus-within:ring-0"),Te=te==="quaternary"&&(ae?"border-token-main-surface-quaternary text-token-text-quaternary px-3 py-2":"border-token-main-surface-quaternary text-token-text-quaternary focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1");let $e;e[63]!==l||e[64]!==fe||e[65]!==ue||e[66]!==_e||e[67]!==Te?($e=z("rounded-md border shadow-none",fe,ue,_e,Te,l),e[63]=l,e[64]=fe,e[65]=ue,e[66]=_e,e[67]=Te,e[68]=$e):$e=e[68];let Ne;e[69]!==f?(Ne=z("text-token-text-primary block text-xs font-semibold",f),e[69]=f,e[70]=Ne):Ne=e[70];let Ae;e[71]!==u||e[72]!==v||e[73]!==Ne?(Ae=r.jsx("label",{htmlFor:v,className:Ne,children:u}),e[71]=u,e[72]=v,e[73]=Ne,e[74]=Ae):Ae=e[74];const He=u&&"mt-1";let Qe;e[75]!==c||e[76]!==He?(Qe=z(He,"relative",c),e[75]=c,e[76]=He,e[77]=Qe):Qe=e[77];const et=s||void 0,Ct=n!=null&&Y==="right"&&"pe-6",vt=n!=null&&Y==="left"&&"ps-6",At=te==="neutral"||te==="search"?"bg-transparent":"bg-token-main-surface-primary text-token-text-primary",Ht=te==="quaternary"?"placeholder:text-token-text-quaternary":"placeholder-gray-500";let Ot;e[78]!==g||e[79]!==Ct||e[80]!==vt||e[81]!==At||e[82]!==Ht?(Ot=z("block w-full border-0 p-0 shadow-none outline-hidden focus-within:shadow-none focus-within:ring-0 focus-within:outline-hidden focus:border-none focus:ring-0 sm:text-sm",Ct,vt,At,Ht,g),e[78]=g,e[79]=Ct,e[80]=vt,e[81]=At,e[82]=Ht,e[83]=Ot):Ot=e[83];let Vt;e[84]!==De||e[85]!==o||e[86]!==a||e[87]!==i||e[88]!==d||e[89]!==ee||e[90]!==de||e[91]!==xe||e[92]!==h||e[93]!==x||e[94]!==v||e[95]!==S||e[96]!==T||e[97]!==A||e[98]!==I||e[99]!==N||e[100]!==L||e[101]!==D||e[102]!==$||e[103]!==et||e[104]!==Ot||e[105]!==Q?(Vt=r.jsx("input",w(U(w({},A),{style:$,ref:N,type:Q,name:v,id:v,list:h,role:L,"aria-label":et,onPaste:T,className:Ot,placeholder:I,onBlur:ee,onFocus:S,onChange:de,onKeyDown:xe,autoComplete:a,spellCheck:D,autoCapitalize:o,autoFocus:i,disabled:d,maxLength:x}),De)),e[84]=De,e[85]=o,e[86]=a,e[87]=i,e[88]=d,e[89]=ee,e[90]=de,e[91]=xe,e[92]=h,e[93]=x,e[94]=v,e[95]=S,e[96]=T,e[97]=A,e[98]=I,e[99]=N,e[100]=L,e[101]=D,e[102]=$,e[103]=et,e[104]=Ot,e[105]=Q,e[106]=Vt):Vt=e[106];let en;e[107]!==n||e[108]!==be||e[109]!==E?(en=n!=null&&(E?r.jsx("button",{className:be,onClick:E,children:r.jsx(n,{className:"icon-sm"})}):r.jsx("div",{className:be,children:r.jsx(n,{className:"icon-sm"})})),e[107]=n,e[108]=be,e[109]=E,e[110]=en):en=e[110];let Qt;e[111]!==se||e[112]!==C?(Qt=C&&se&&r.jsx("button",{type:"button",className:"text-token-text-tertiary absolute end-0 top-1/2 -translate-y-1/2",onClick:C,children:r.jsx(Dne,{className:"icon-sm"})}),e[111]=se,e[112]=C,e[113]=Qt):Qt=e[113];let tn;e[114]!==p||e[115]!==Qe||e[116]!==Vt||e[117]!==en||e[118]!==Qt?(tn=r.jsxs("div",{className:Qe,children:[Vt,en,Qt,p]}),e[114]=p,e[115]=Qe,e[116]=Vt,e[117]=en,e[118]=Qt,e[119]=tn):tn=e[119];let gn;return e[120]!==$e||e[121]!==Ae||e[122]!==tn?(gn=r.jsxs("div",{className:$e,children:[Ae,tn]}),e[120]=$e,e[121]=Ae,e[122]=tn,e[123]=gn):gn=e[123],gn}var U9;const aWe=ft.div(U9||(U9=ct(["text-base text-token-text-primary flex flex-col gap-9 my-6"])));var $9;const Fne=ft.div($9||($9=ct(["text-base font-semibold"])));var V9;const rWe=ft.div(V9||(V9=ct(["text-base font-semibold"])));var H9;const iWe=ft.div(H9||(H9=ct(["flex flex-col divide-y divide-token-border-default border-y border-token-border-default"])));var G9;const Bne=ft.div(G9||(G9=ct(["flex flex-col w-full m-auto md:m-0"])));var W9;const Une=ft.div(W9||(W9=ct(["text-sm"])));var z9;const lWe=ft.div(z9||(z9=ct(["flex justify-between py-3 gap-4"])));var q9;const cWe=ft.hr(q9||(q9=ct(["max-w-xl border-token-border-default"])));var Y9;const dWe=ft.div(Y9||(Y9=ct(["text-token-text-secondary text-sm mt-6"]))),uWe=({icon:t,title:e,body:n,toggle:s,disabled:o=!1,disabledPill:a,disabledMessage:i,children:l,showDivider:c=!0})=>r.jsx(pt,{label:i,side:"top",disabled:!o||!i,className:"max-w-xl",triggerAs:null,children:r.jsxs("div",{children:[r.jsxs(Bne,{className:z("border-token-border-default mb-3 p-6",o&&"text-token-text-tertiary"),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[t&&r.jsx(t,{className:"icon-sm"}),r.jsxs(Fne,{className:"flex items-center gap-3",children:[e,o&&a&&r.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-2 pb-0.5 text-sm",children:a})]})]}),r.jsx("div",{children:s})]}),r.jsx(Une,{children:n}),l&&r.jsx("div",{className:"mt-4",children:l})]}),c&&r.jsx("div",{className:"border-token-border-default mt-6 border border-t"})]})});function QI(t,e){return rt({queryKey:["workspace/identity",t],queryFn:async()=>{if(t!==void 0)return await ge.safeGet("/accounts/{account_id}/identity",{parameters:{path:{account_id:t}}})},enabled:e})}function fWe(t){const e=Hy(t),n=e?hT(e):null,s=n==null?void 0:n.pwd_auth_time;return s==null?!1:Date.now()-s<1800*1e3}function $ne(t){return rt({queryKey:["sso/workos/connections",t],queryFn:()=>{if(t!==void 0)return ge.safeGet("/accounts/{account_id}/sso/workos/connections/list",{authOption:sn.SendIfAvailable,parameters:{path:{account_id:t}}})},enabled:t!=null,retry:(e,n)=>n instanceof Un&&(n.status===401||n.code==="reauth_required")?!1:e<3})}function mWe(){const t=zo(Ca.businessWorkspaceId),e=V(),n=ve(e,"4105779609"),o=zo(Ca.isTeamPlan)?n:!0,{data:a,isFetching:i,isPending:l}=$ne(o&&t!=null?t:void 0),c=a instanceof Un?a:void 0;return{connection:c||a==null?void 0:a[0],error:c,enabled:o,isLoading:i||l}}function gWe(t){const e=It();return qt({mutationFn:()=>ge.safePost("/accounts/{account_id}/sso/connections/workos",{requestBody:{enabled_client_names:["chat"]},authOption:sn.SendIfAvailable,parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function pWe(){const t=zo(Ca.businessWorkspaceId),{data:e}=QI(t!=null?t:void 0,t!=null);return e==null?void 0:e.allow_external_domain_invites}function hWe(){const t=zo(Ca.businessWorkspaceId),{data:e}=QI(t!=null?t:void 0,t!=null);return _.useMemo(()=>(e==null?void 0:e.domains)&&(e==null?void 0:e.domains.filter(n=>n.status==="verified")),[e==null?void 0:e.domains])}function _We(t){const e=ne(),n=$t(),s=It();return qt({mutationFn:({shouldAutoProvision:o})=>ge.safePost("/accounts/{account_id}/settings/auto_provision",{parameters:{path:{account_id:t}},requestBody:{value:o}}).then(a=>{const i=o?cr.autoProvisionEnabledToast:cr.autoProvisionDisabledToast;return n.success(e.formatMessage(i),{duration:3}),a}).catch(a=>{throw n.danger(a.message,{toastId:"useShouldAutoProvisionMutation",loggingTitle:a.message,loggingDescription:"Auto provisioning toggle failed"}),a}),onSuccess:()=>{s.invalidateQueries({queryKey:["workspace/identity",t]})}})}function xWe(t){const e=ne(),n=$t(),s=It();return qt({mutationFn:async({shouldAllowExternalDomainInvites:o})=>{try{const a=await ge.safePost("/accounts/{account_id}/settings/allow_external_domain_invites",{parameters:{path:{account_id:t}},requestBody:{value:o}}),i=o?cr.allowExternalDomainInvitesToast:cr.disableExternalDomainInvitesToast;return n.success(e.formatMessage(i),{duration:3}),a}catch(a){throw n.danger(a.message,{toastId:"useShouldDisableExternalDomainInvitesMutation",loggingTitle:a.message,loggingDescription:"External domain invites toggle failed"}),a}},onSuccess:()=>{s.invalidateQueries({queryKey:["workspace/identity",t]})}})}function yWe(t){const e=It(),n=$t();return qt({mutationFn:({hostname:s})=>ge.safePost("/accounts/{account_id}/domains",{parameters:{path:{account_id:t}},requestBody:{hostname:s}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace/identity",t]}),e.invalidateQueries({queryKey:["builderProfile"]})},onError:s=>{n.danger(s.message,{toastId:"useAddDomainMutation",loggingTitle:s.message,loggingDescription:"Domain add failed"})}})}function Vne(t){const e=It();return qt({mutationFn:({domainId:n})=>ge.safeDelete("/accounts/{account_id}/domains/{domain_id}",{parameters:{path:{account_id:t,domain_id:n}}}),onSuccess:()=>{e.refetchQueries({queryKey:["workspace/identity",t]}),e.refetchQueries({queryKey:["builderProfile"]})}})}function vWe(t,e){var i;const n=It(),s=$t(),o=ne(),a=(i=e==null?void 0:e.suppressSuccessToast)!=null?i:!1;return qt({mutationFn:({value:l,public_display_name:c,use_workspace_name_for_discovery:d})=>ge.safePost("/accounts/{account_id}/settings/workspace_discoverable",{parameters:{path:{account_id:t}},requestBody:{value:l,public_display_name:c,use_workspace_name_for_discovery:d}}),onSuccess:(l,c)=>{if(n.invalidateQueries({queryKey:["workspace-settings",t]}),n.invalidateQueries({queryKey:["discoverable-workspaces"]}),!a){let d;c.action==="name"?d=cr.discoveryDisplayNameUpdatedToast:d=c.value?cr.discoveryEnabledToast:cr.discoveryDisabledToast,s.success(o.formatMessage(d),{duration:3})}},onError:l=>{var c;s.danger((c=l.message)!=null?c:"Failed to update discovery settings",{toastId:"workspace_discoverability",loggingTitle:l.message,loggingDescription:"Workspace discoverability update failed"})}})}function bWe(t){const e=It(),n=$t(),s=ne();return qt({mutationFn:({autoAcceptRequests:o})=>ge.safePost("/accounts/{account_id}/settings/auto_accept_requests",{parameters:{path:{account_id:t}},requestBody:{value:o}}),onSuccess:(o,a)=>{e.invalidateQueries({queryKey:["workspace-settings",t]});const i=a.autoAcceptRequests?cr.manualApprovalDisabledToast:cr.manualApprovalEnabledToast;n.success(s.formatMessage(i),{duration:3})},onError:o=>{var a;n.danger((a=o.message)!=null?a:"Failed to update approval setting",{toastId:"workspace_manual_approval",loggingTitle:o.message,loggingDescription:"Workspace manual approval update failed"})}})}function CWe(t){const e=It();return qt({mutationFn:({enforcementStatus:n})=>ge.safePost("/accounts/{account_id}/sso/workos/connections/workos_enforcement",{parameters:{path:{account_id:t}},requestBody:{enforcement_status:n}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function SWe(t){const e=It();return qt({mutationFn:()=>ge.safePost("/accounts/{account_id}/sso/workos/connections/toggle_enabled",{parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}var Z9;ft.div(Z9||(Z9=ct(["text-md mb-4 text-token-text-secondary"])));const wWe={[r_.VERIFIED]:Ge({id:"i7FkyS",defaultMessage:"Verified"}),[r_.PENDING]:Ge({id:"THBv/l",defaultMessage:"Pending"}),[r_.EXPIRED]:Ge({id:"+sjWGK",defaultMessage:"Expired"})},cr=Se({autoProvisionEnabledToast:{id:"workspaceIdentity.autoProvisionEnabledToast",defaultMessage:"Auto provisioning enabled for this workspace"},autoProvisionDisabledToast:{id:"workspaceIdentity.autoProvisionDisabledToast",defaultMessage:"Auto provisioning disabled for this workspace"},allowExternalDomainInvitesToast:{id:"j0jI/4",defaultMessage:"External domain invites are allowed for this workspace"},disableExternalDomainInvitesToast:{id:"67yB97",defaultMessage:"External domain invites are disabled for this workspace"},discoveryEnabledToast:{id:"workspaceIdentity.discoveryEnabledToast",defaultMessage:"Workspace is now discoverable"},discoveryDisabledToast:{id:"workspaceIdentity.discoveryDisabledToast",defaultMessage:"Workspace is no longer discoverable"},discoveryDisplayNameUpdatedToast:{id:"workspaceIdentity.discoveryDisplayNameUpdatedToast",defaultMessage:"Workspace display name updated"},manualApprovalEnabledToast:{id:"workspaceIdentity.manualApprovalEnabledToast",defaultMessage:"Join requests now require manual approval"},manualApprovalDisabledToast:{id:"workspaceIdentity.manualApprovalDisabledToast",defaultMessage:"Join requests will be auto-accepted"}});function kWe(t){return t===q2.ADMIN||t===q2.OWNER}function EWe(t){return t===q2.OWNER}function TWe(t,e){switch(e){case da.BROWSER:return"Web browsing";case da.PYTHON:return"Code interpreter & Data Analysis";case da.JIT_PLUGIN:return"Custom actions";case da.RETRIEVAL:return"File retrieval";case da.DALLE:return"DALLE image generation";case da.IMAGE_GEN:return"4o image generation";case da.CANVAS:return"Canvas";case Qi.Private:return"Builder only";case Qi.Workspace:return t.data.name;case Qi.Link:return"Anyone with link";case Qi.Marketplace:return"Public";default:return null}}const Hne=R(()=>P(()=>import("./d0fvtivu8wtjjx2a.js"),__vite__mapDeps([30,1])),{loading:t=>F(t)});function MWe(){const{data:t}=El(),e=V(),n=t==null?void 0:t.accountItems.find(l=>l.ssoConnectionName),s=t==null?void 0:t.accountItems.find(l=>!l.ssoConnectionName),o=!!n,a=!o&&!!s,i=()=>{const l=n!=null&&n.ssoConnectionName&&o?{connection:n.ssoConnectionName}:void 0;Zt(e,{fallbackScreenHint:"login",additionalAuthParams:l})};return r.jsx(Mt,{testId:"modal-invalid-accounts",isOpen:!0,onClose:as,type:"warning",size:"custom",className:"max-w-3xl",title:r.jsx("div",{className:"flex flex-col",children:r.jsx("div",{className:"text-lg",children:r.jsx(j,w({},Oi.title))})}),icon:Hne,primaryButton:r.jsx(Ns.Button,{onClick:()=>{B.logLogOutButtonClicked({location:"invalid_account_modal"},IV.ACCESS_LOGOUT_ACTION_LOCATION_INVALID_ACCOUNT_MODAL),jV()},color:"primary",children:r.jsx(j,w({},Oi.logOut))}),secondaryButton:o||a?r.jsx(Ns.Button,{onClick:i,color:"primary",children:r.jsx(j,w({},o?Oi.ssoButton:Oi.noSSOButton))}):null,children:r.jsx("div",{className:"flex flex-col space-y-4",children:r.jsxs("div",{children:[r.jsx("p",{children:r.jsx(j,w({},Oi.description))}),r.jsx("br",{}),o&&r.jsx("p",{children:r.jsx(j,w({},Oi.ssoSuggestion))}),a&&r.jsx("p",{children:r.jsx(j,w({},Oi.noSSOSuggestion))})]})})})}const Oi=Se({title:{id:"sMC0Cy",defaultMessage:"No Accessible Workspaces"},description:{id:"ADpJJ4",defaultMessage:"It looks like you're currently unable to access any of your accounts. Try waiting a minute and logging in again."},logOut:{id:"KlMYRb",defaultMessage:"Log out"},ssoSuggestion:{id:"KCNTGv",defaultMessage:"Logging in with SSO may fix these issues."},noSSOSuggestion:{id:"mp/4+s",defaultMessage:"Logging in without SSO may fix these issues."},ssoButton:{id:"Nsa12I",defaultMessage:"Log in with SSO"},noSSOButton:{id:"60pUg9",defaultMessage:"Log in"}}),AWe=(t,e=10080*60*1e3)=>{if(!t)return{isFresh:!1,hasWorkspacesToJoin:null};try{const n=JSON.parse(t),s=Number(n.set_at);if(Number.isNaN(s))return{isFresh:!1,hasWorkspacesToJoin:null};const o=Date.now()-s<e,a=n.hasWorkspacesToJoin===!0||n.hasWorkspacesToJoin==="true";return{isFresh:o,hasWorkspacesToJoin:o?a:null}}catch(n){return{isFresh:!1,hasWorkspacesToJoin:null}}};function IWe(t){"use forget";var u;const e=W.c(7),n=t===void 0?!0:t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=["discoverable-workspaces"],e[0]=s):s=e[0];const o=n;let a;e[1]!==o?(a={queryKey:s,enabled:o,refetchOnMount:"always",queryFn:Wne},e[1]=o,e[2]=a):a=e[2];const i=rt(a);let l;e[3]!==i.data?(l=()=>{var f;if((f=i.data)!=null&&f.workspaces){const m=i.data.workspaces.some(Gne),g=JSON.stringify({set_at:Date.now(),hasWorkspacesToJoin:m});_t.setItem(Ue.WorkspaceDiscoveryInfo,g)}},e[3]=i.data,e[4]=l):l=e[4];const c=(u=i.data)==null?void 0:u.workspaces;let d;return e[5]!==c?(d=[c],e[5]=c,e[6]=d):d=e[6],_.useEffect(l,d),i}function Gne(t){return!t.requested}async function Wne(){return await ge.safeGet("/accounts/discoverable-workspaces")}const zne=Oe.hasSeenWorkspaceDiscoveryFirstLogin,jWe=()=>{const{eligible:t,markAsViewedDontInvalidateCache:e,isLoading:n}=lt(zne);return{setHasSeenWorkspaceDiscoveryFirstLoginDontInvalidateCache:e,hasSeenWorkspaceDiscoveryFirstLoginDate:n?null:!t}},Yf="default",ul=new Map,l1=new Set([Yf]),qne="sidebar",Yne="composer";let hx=0,_x=0,vp=0,Uu=null;typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(Uu=new PerformanceObserver(t=>{t.getEntries().forEach(e=>{if(e.entryType==="longtask"&&(hx+=e.duration),e.entryType==="layout-shift"){if(e.hadRecentInput)return;_x+=1,performance.timeOrigin&&(vp=Math.max(performance.timeOrigin+e.startTime,vp))}})}),Uu.observe({entryTypes:["longtask","layout-shift"]}));const Zne=(t,e=Yf)=>{if(ad)return;ul.has(e)||ul.set(e,new Map);const n=ul.get(e);n.has(t)||(c1(),n.set(t,{start:Date.now()}))},Kne=(t,e=Yf,n)=>{var o;if(ad)return;const s=(o=ul.get(e))==null?void 0:o.get(t);if(s&&s.end===void 0){s.end=Date.now();const a=l1.has(e)?"visible":"hidden";Fe.addTiming("render.".concat(t,".").concat(a),{time:s.end,serialTimingGroup:n}),c1()}},Qne=(t,e=Yf)=>{if(ad)return;const n=ul.get(e);!n||!n.get(t)||(n.delete(t),c1())};let ad=!1;const lC=()=>{if(!ad){ad=!0;for(const[t,e]of ul.entries()){const n=l1.has(t)?"visible":"hidden";for(const[s,o]of e.entries())o.end||Fe.addFirstTiming("render.".concat(s,".").concat(n,".timeout"))}}},Jne=3e4;let L_;const c1=()=>{L_&&clearTimeout(L_),L_=setTimeout(Xne,1e3)},Xne=()=>{if(ad)return;let t=0,e;for(const[o,a]of ul.entries())if(l1.has(o)){if(![...a.values()].every(i=>i.end)){if(performance.now()<Jne){c1();return}Fe.addFirstTiming("render.StablePage.timeout"),lC();return}for(const[i,l]of a.entries())l.end!==void 0&&l.end>t&&(t=l.end,e=i)}Fe.addFirstTiming("render.StablePage.complete",{time:t});const n=t-performance.timeOrigin,s=NV(n);qe.logEvent("chatgpt_web_stable_page_complete_time",void 0,{raw_duration_ms:String(n),trimmed_duration_ms:String(s)}),e!==void 0&&Fe.addAction("render.stablePage.lastComponent",{componentName:e}),hx>0&&Fe.addFirstDurationVital("render.StablePage.longTaskDuration",Date.now(),hx),_x>0&&Fe.addFirstDurationVital("render.StablePage.layoutShifts",Date.now(),_x),vp>0&&Fe.addFirstTiming("render.StablePage.lastLayoutShift",{time:vp}),Uu==null||Uu.disconnect(),lC(),typeof window<"u"&&window.dispatchEvent(new Event("allComponentsRendered"))},ese=t=>{l1.add(t)},xa={markStart:Zne,markRendered:Kne,cancelRender:Qne,trackNamespace:ese,NS_DEFAULT:Yf,NS_COMPOSER:Yne,NS_SIDEBAR:qne},us=Se({joinAndLaunchTitle:{id:"workspaceSwitcherFullscreen.joinAndLaunchTitle",defaultMessage:"Join and launch your workspaces"},launchWorkspaceTitle:{id:"workspaceSwitcherFullscreen.launchWorkspaceTitle",defaultMessage:"Launch a workspace"},joinWorkspacesTitle:{id:"workspaceSwitcherFullscreen.joinWorkspacesTitle",defaultMessage:"Join workspaces"},collaborationSubtitle:{id:"workspaceSwitcherFullscreen.collaborationSubtitle",defaultMessage:"Securely collaborate with coworkers using{lineBreak}tools like projects and custom GPTs"},title:{id:"workspaceSwitcherFullscreen.title",defaultMessage:"Select a workspace"},noTopSectionTitle:{id:"workspaceSwitcherFullscreen.noTopSectionTitle",defaultMessage:"Join your teams workspace"},close:{id:"workspaceSwitcherFullscreen.close",defaultMessage:"Close"},emailCanJoinWorkspaces:{id:"workspaceSwitcherFullscreen.emailCanJoinWorkspaces",defaultMessage:"{email} can join {count, plural, one {# workspace} other {# workspaces}}."},accessAndRequestLine:{id:"workspaceSwitcherFullscreen.accessAndRequestLine",defaultMessage:"{email} has access to {accessCount, plural, one {# workspace} other {# workspaces}} and can join {requestCount, plural, one {# workspace} other {# workspaces}}."},memberCount:{id:"workspaceSwitcherFullscreen.memberCount",defaultMessage:"{count, plural, one {# member} other {# members}}"},accessOnlyLine:{id:"workspaceSwitcherFullscreen.accessOnlyLine",defaultMessage:"{email} has access to {accessCount, plural, one {# workspace} other {# workspaces}}."},request:{id:"workspaceSwitcherFullscreen.request",defaultMessage:"Request"},requested:{id:"workspaceSwitcherFullscreen.requested",defaultMessage:"Requested"},open:{id:"workspaceSwitcherFullscreen.open",defaultMessage:"Open"},personalWorkspace:{id:"workspaceSwitcherFullscreen.personalWorkspace",defaultMessage:"Personal workspace"},createNewWorkspacePrefix:{id:"workspaceSwitcherFullscreen.createNewWorkspacePrefix",defaultMessage:"Want something new?"},createNewWorkspaceLink:{id:"workspaceSwitcherFullscreen.createNewWorkspaceLink",defaultMessage:"Create a new workspace"},hiddenWorkspacesFooter:{id:"workspaceSwitcherFullscreen.hiddenWorkspacesFooter",defaultMessage:"Some workspaces are hidden, contact your admin for more info."},noWorkspacesToJoin:{id:"workspaceSwitcherFullscreen.noWorkspacesToJoin",defaultMessage:"No workspaces to join"},done:{id:"workspaceSwitcherFullscreen.done",defaultMessage:"Done"},requestAccessError:{id:"workspaceSwitcherFullscreen.requestAccessError",defaultMessage:"Something went wrong requesting access. Please try again."}});function JI({children:t}){return r.jsx("div",{className:"border-token-main-surface-tertiary text-token-text-secondary mb-2 flex max-w-[500px] flex-col gap-4 rounded-2xl border border-solid p-[22px] pt-[18px] shadow-sm",children:t})}function tr({className:t}){return r.jsx("div",{className:z("loading-results-shimmer rounded-md",t),children:""})}function O_({className:t}){return r.jsxs("div",{className:z("flex w-full flex-col gap-1",t),children:[r.jsx(tr,{className:"h-[26px] w-[105px]"}),r.jsx(tr,{className:"h-[42px] w-full"})]})}function tse(){return r.jsxs(JI,{children:[r.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[r.jsx(O_,{className:"col-span-1"}),r.jsx(O_,{className:"col-span-1"}),r.jsx(O_,{className:"col-span-1 sm:col-span-2"})]}),r.jsxs("div",{className:"flex w-full justify-between",children:[r.jsx(ye,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Sen69P",defaultMessage:"Add a detail"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ye,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Uqo7UD",defaultMessage:"Reset"})}),r.jsx(ye,{disabled:!0,children:r.jsx(j,{id:"FVou++",defaultMessage:"Start"})})]})]})]})}function NWe({existingCount:t,discoverableCount:e,accountEmail:n,showCollaborationSubtitle:s}){const o=t>0,a=e>0,i=_.useMemo(()=>o&&a?us.joinAndLaunchTitle:o?us.launchWorkspaceTitle:a?us.joinWorkspacesTitle:us.noTopSectionTitle,[o,a]),l=o||a,c=s?"mt-2":"mt-3";return r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:r.jsx(j,w({},i))}),s&&r.jsx("p",{className:"text-token-text-secondary mt-3 text-base leading-6",children:r.jsx(j,U(w({},us.collaborationSubtitle),{values:{lineBreak:r.jsx("br",{})}}))}),l&&r.jsx("div",{className:"text-token-text-secondary ".concat(c," text-sm"),children:o?a?r.jsx(j,U(w({},us.accessAndRequestLine),{values:{email:n,accessCount:t,requestCount:e}})):r.jsx(j,U(w({},us.accessOnlyLine),{values:{email:n,accessCount:t}})):r.jsx(j,U(w({},us.emailCanJoinWorkspaces),{values:{email:n,count:e}}))})]})}function PWe({showCollaborationSubtitle:t}){return r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:r.jsx(j,w({},us.noTopSectionTitle))}),t&&r.jsx("p",{className:"text-token-text-secondary mt-3 text-base leading-6",children:r.jsx(j,U(w({},us.collaborationSubtitle),{values:{lineBreak:r.jsx("br",{})}}))}),r.jsx("div",{className:"text-token-text-secondary ".concat(t?"mt-2":"mt-3"," text-sm"),children:r.jsx(tr,{className:"mx-auto h-4 w-64"})})]})}const nse=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yr),__vite__mapDeps([10,1,11])),{loading:t=>F(t)});function RWe({workspace:t,isLoading:e,onRequestAccess:n,onHoverRequest:s}){var l,c;const o=ne(),a=_.useRef(!1),i=()=>{a.current||(a.current=!0,s(t))};return r.jsxs("div",{className:"flex w-full cursor-default items-center gap-3 border-t p-5 first:border-t-0",role:"listitem","data-testid":"discoverable-workspace-row","data-row-type":"discoverable","data-workspace-id":t.id,children:[r.jsx(Y2,{src:(l=t.profile_picture_url)!=null?l:void 0,size:"large"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"text-token-text-primary truncate font-medium",title:(c=t.name)!=null?c:void 0,children:t.name}),r.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:r.jsx(j,U(w({},us.memberCount),{values:{count:t.member_count}}))})]}),r.jsx("div",{className:"shrink-0",children:t.requested?r.jsx(ye,{color:"primary",icon:nse,label:o.formatMessage(us.requested),onClick:d=>{d.preventDefault(),d.stopPropagation()},children:o.formatMessage(us.requested)}):r.jsx(ye,{color:"secondary",onClick:d=>{d.preventDefault(),d.stopPropagation(),n(t)},onMouseEnter:i,onFocus:i,visuallyDisabled:e,disabled:e,children:r.jsx(j,w({},us.request))})})]})}const sse=25;function ose(t,e=0,n="",s=sse,o=void 0,a=void 0){const i=_.useMemo(()=>a?[...a].sort().join(","):void 0,[a]);return rt({queryKey:["workspace",t,e,n,s,i],queryFn:async()=>await ge.safeGet("/accounts/{account_id}/users",{parameters:{path:{account_id:t},query:{offset:e,limit:s,query:n,role:i}}}),placeholderData:o,enabled:!!t})}function LWe(){return r.jsxs("div",{className:"flex w-full cursor-default items-center gap-3 border-t p-5 first:border-t-0",role:"listitem","aria-busy":"true",children:[r.jsx("div",{className:"h-12 w-12 shrink-0 overflow-hidden rounded-full",children:r.jsx(tr,{className:"h-full w-full rounded-none"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"mb-1",children:r.jsx(tr,{className:"h-5 w-48"})}),r.jsx(tr,{className:"h-4 w-28"})]}),r.jsx("div",{className:"shrink-0",children:r.jsx(tr,{className:"h-8 w-24 rounded-md"})})]})}const XI=["AD","AE","AF","AG","AL","AM","AO","AR","AT","AU","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BN","BO","BR","BS","BT","BW","BZ","CA","CD","CF","CG","CH","CI","CL","CM","CO","CR","CV","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","FI","FJ","FM","FR","GA","GB","GD","GE","GF","GH","GM","GN","GP","GQ","GR","GT","GW","GY","HN","HR","HT","HU","ID","IE","IL","IN","IQ","IS","IT","JM","JO","JP","KE","KG","KH","KI","KM","KN","KR","KW","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MQ","MR","MT","MU","MV","MW","MX","MY","MZ","NA","NE","NG","NI","NL","NO","NP","NR","NZ","OM","PA","PE","PG","PH","PK","PL","PR","PS","PT","PW","PY","QA","RE","RO","RS","RW","SA","SB","SC","SD","SE","SG","SH","SI","SK","SL","SM","SN","SO","SR","SS","ST","SV","SZ","TD","TF","TG","TH","TJ","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","US","UY","UZ","VA","VC","VN","VU","WS","XK","YE","YT","ZA","ZM","ZW"],ase=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GF","GP","GR","HU","IS","IE","IT","LV","LI","LT","LU","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SK","SI","ES","SE","YT"]),rse=new Set(["GF","GP","MF","MQ","RE","YT"]),xx="US",ise="IN",lse={AL:"Albania",DZ:"Algeria",AF:"Afghanistan",AD:"Andorra",AO:"Angola",AG:"Antigua & Barbuda",AR:"Argentina",AM:"Armenia",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BE:"Belgium",BZ:"Belize",BJ:"Benin",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia & Herzegovina",BW:"Botswana",BR:"Brazil",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",CV:"Cape Verde",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CF:"Central African Republic",TD:"Chad",CL:"Chile",CO:"Colombia",KM:"Comoros",CG:"Congo - Brazzaville",CD:"Congo - Kinshasa",CR:"Costa Rica",CI:"Cte dIvoire",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",SZ:"Eswatini",ET:"Ethiopia",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GR:"Greece",GD:"Grenada",GP:"Guadeloupe",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",VA:"Vatican City",HN:"Honduras",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar (Burma)",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",MK:"North Macedonia",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PR:"Puerto Rico",PT:"Portugal",QA:"Qatar",RE:"Runion",RO:"Romania",RW:"Rwanda",KN:"St. Kitts & Nevis",LC:"St. Lucia",VC:"St. Vincent & Grenadines",SH:"Saint Helena",MF:"Saint Martin",WS:"Samoa",SM:"San Marino",ST:"So Tom & Prncipe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",KR:"South Korea",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SR:"Suriname",SE:"Sweden",CH:"Switzerland",SD:"Sudan",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TO:"Tonga",TT:"Trinidad & Tobago",TN:"Tunisia",TR:"Trkiye",TM:"Turkmenistan",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VN:"Vietnam",XK:"Kosovo",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};function ej(t){return XI.includes(t)}function cse({country:t,shouldUseDefaultCountryCode:e}){return t==null||!ej(t)?(Fe.addError("User country is null or unrecognized - will use ".concat(xx),{user_country:t}),xx):t}function dse(t){try{const e=new Intl.DisplayNames([t],{type:"region"});return n=>{var s;return(s=e.of(n))!=null?s:""}}catch(e){return Fe.addError("Failed to create country display name formatter, will fallback to en_US locale display name",{cause:e}),n=>{var s;return(s=lse[n])!=null?s:""}}}function use(){const t=V(),e=Rn(t);return _.useMemo(()=>dse(e.locale),[e.locale])}function OWe(){const t=use();return _.useMemo(()=>[...XI].sort((n,s)=>{const o=t(n),a=t(s);return o.localeCompare(a)}),[t])}function fse(t){return ase.has(t)}function DWe(t){return t==null?(Fe.addError(new Error("nullish_country_for_vat_collection_exclusion_check"),{country:t}),!1):rse.has(t)}const FWe="https://help.openai.com/en/collections/3943089-billing",mse="https://openai.com/chatgpt/enterprise",BWe="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",UWe="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",$We="https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",VWe="https://help.openai.com/en/articles/11989085-chatgpt-go",ob="pricing",Zf="team-pricing",HWe="plus-pricing",d1="account-payment-modal-open-from-location",D_="account-payment-modal-view",u1="plus_free_trial",gse="promo_campaign",F_={CHATGPT_IOS:"chatgpt_mobile_ios",SORA_IOS:"sora_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android"};function GWe(t){return t.hash.split("#")[1]===ob}function pse(t){return t.hash.split("#")[1]===Zf}function pn(t,e,n=ob,s,o){const a=new URL(window.location.href);s&&a.searchParams.set(gse,s),o?a.searchParams.set(D_,o):a.searchParams.delete(D_),t({hash:n,search:a.search},{state:{[d1]:e,[D_]:o}})}function WWe(t){t({hash:""})}function Kf(t){switch(ze(t,"2788179050").get("plus_upsell_cta_copy","get_plus")){case"upgrade_to_plan":return gt.upgradeToPlus;case"upgrade_your_plan":return gt.upgradeYourPlan;case"upgrade":return gt.upgrade;case"get_plus":default:return gt.getPlus}}function hse(t){switch(ze(t,"2788179050").get("pro_upsell_cta_copy","get_pro")){case"upgrade_to_plan":return gt.upgradeToPro;case"upgrade_your_plan":return gt.upgradeYourPlan;case"upgrade":return gt.upgrade;case"get_pro":default:return gt.getPro}}function bp(t){return ve(t,"3600660324")}function _se(t,e,n){var x;const s=at(),o=V(),a=st(o),{data:i}=El(),l=(x=a==null?void 0:a.isWorkspaceAccount())!=null?x:!1,c=a==null?void 0:a.isPlus(),d=a==null?void 0:a.isPro(),u=a==null?void 0:a.planType,f=i&&xh(i),m=!l&&!c&&f&&ze(o,"2670443078").get("is_gating_fix_enabled",!1),g=!l&&!m&&!d&&ze(o,"2888142241").get("is_upgrade_in_settings",!1);return{showUpgradePlan:!g&&i&&!PV(i)&&n==="profile-dropdown-menu"&&Ps(o,"2471442003").get("enabled",!1)||g,onUpgradeClick:v=>{Cr(o).logEvent(t,void 0,{current_plan_type:u!=null?u:"unknown"}),B.logEvent(e,{planType:u!=null?u:"unknown"}),pn(s,v)}}}function zWe({showHiddenWorkspacesNote:t=!1}){const{showUpgradePlan:e,onUpgradeClick:n}=_se("chatgpt_upgrade_in_workspace_switcher_clicked","Upgrade In Workspace Switcher Clicked","create-workspace-upgrade-cta"),s=!!e;return!(s||t)?null:r.jsxs("div",{className:"text-token-text-secondary mt-6 text-center text-sm",children:[t&&r.jsx("span",{className:"me-1",children:r.jsx(j,w({},us.hiddenWorkspacesFooter))}),s&&r.jsxs(r.Fragment,{children:[r.jsx(j,w({},us.createNewWorkspacePrefix)),"",r.jsx("button",{onClick:()=>n("fullscreen-workspace-switcher"),className:"underline",children:r.jsx(j,w({},us.createNewWorkspaceLink))})]})]})}function qWe({source:t,existingCount:e,discoverableCount:n}){const s=ln(),o=s==null?void 0:s.email_domain_type,a=_.useMemo(()=>({source:t,join_flow:"discovery",platform:"web",email_domain_type:o}),[o,t]),i=_.useMemo(()=>({existing_workspace_count:e,joinable_workspace_count:n,has_joinable_workspaces:n>0}),[n,e]),l=_.useCallback((g,p,h={})=>{B.logEventWithStatsig(g,p,U(w(w(w({},a),i),h),{ts:new Date().toISOString()}))},[a,i]),c=_.useCallback((g,p={})=>{l("Account: Workspace Discovery Fullscreen Exit","chatgpt_workspace_discovery_fullscreen_exit",w({exit_action:g},p))},[l]),d=_.useRef(!1),u=_.useCallback(g=>{l("Account: Workspace Discovery Request Hovered","chatgpt_workspace_discovery_request_hovered",{workspace_id:g.id})},[l]),f=_.useCallback(g=>{l("Account: Workspace Discovery Request Clicked","chatgpt_workspace_discovery_request_clicked",{workspace_id:g.id})},[l]),m=_.useCallback(()=>{d.current||(d.current=!0,l("Account: Workspace Discovery Fullscreen Viewed","chatgpt_workspace_discovery_fullscreen_viewed"))},[l]);return{hasLoggedFullscreenView:d.current,logFullscreenViewedOnce:m,logExitEvent:c,logRequestButtonHovered:u,logRequestButtonClicked:f}}var tj="AlertDialog",[xse]=kl(tj,[_T]),Er=_T(),nj=t=>{const o=t,{__scopeAlertDialog:e}=o,n=we(o,["__scopeAlertDialog"]),s=Er(e);return r.jsx(Tl,U(w(w({},s),n),{modal:!0}))};nj.displayName=tj;var yse="AlertDialogTrigger",vse=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=we(a,["__scopeAlertDialog"]),o=Er(n);return r.jsx(t3,U(w(w({},o),s),{ref:e}))});vse.displayName=yse;var bse="AlertDialogPortal",sj=t=>{const o=t,{__scopeAlertDialog:e}=o,n=we(o,["__scopeAlertDialog"]),s=Er(e);return r.jsx(Ml,w(w({},s),n))};sj.displayName=bse;var Cse="AlertDialogOverlay",oj=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=we(a,["__scopeAlertDialog"]),o=Er(n);return r.jsx(jf,U(w(w({},o),s),{ref:e}))});oj.displayName=Cse;var Dc="AlertDialogContent",[Sse,wse]=xse(Dc),aj=_.forwardRef((t,e)=>{const d=t,{__scopeAlertDialog:n,children:s}=d,o=we(d,["__scopeAlertDialog","children"]),a=Er(n),i=_.useRef(null),l=On(e,i),c=_.useRef(null);return r.jsx(RV,{contentName:Dc,titleName:rj,docsSlug:"alert-dialog",children:r.jsx(Sse,{scope:n,cancelRef:c,children:r.jsxs(yd,U(w(w({role:"alertdialog"},a),o),{ref:l,onOpenAutoFocus:Rt(o.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[r.jsx(LV,{children:s}),r.jsx(Ese,{contentRef:i})]}))})})});aj.displayName=Dc;var rj="AlertDialogTitle",ij=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=we(a,["__scopeAlertDialog"]),o=Er(n);return r.jsx(Xy,U(w(w({},o),s),{ref:e}))});ij.displayName=rj;var lj="AlertDialogDescription",cj=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=we(a,["__scopeAlertDialog"]),o=Er(n);return r.jsx(e3,U(w(w({},o),s),{ref:e}))});cj.displayName=lj;var kse="AlertDialogAction",dj=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=we(a,["__scopeAlertDialog"]),o=Er(n);return r.jsx(vd,U(w(w({},o),s),{ref:e}))});dj.displayName=kse;var uj="AlertDialogCancel",fj=_.forwardRef((t,e)=>{const l=t,{__scopeAlertDialog:n}=l,s=we(l,["__scopeAlertDialog"]),{cancelRef:o}=wse(uj,n),a=Er(n),i=On(e,o);return r.jsx(vd,U(w(w({},a),s),{ref:i}))});fj.displayName=uj;var Ese=({contentRef:t})=>{const e="`".concat(Dc,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(Dc,"` by passing a `").concat(lj,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(Dc,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return _.useEffect(()=>{var s;document.getElementById((s=t.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Tse=nj,Mse=sj,Ase=oj,Ise=aj,jse=dj,Nse=fj,Pse=ij,cC=cj;function mj({title:t,description:e,contentClassName:n,onClose:s,actionButton:o,cancelButton:a,moreInfoLink:i}){return r.jsx(Tse,{open:!0,onOpenChange:l=>{l||s()},children:r.jsxs(Mse,{children:[r.jsx(Ase,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0"}),r.jsxs(Ise,{className:z("bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",n),onEscapeKeyDown:l=>l.preventDefault(),children:[r.jsx(Pse,{className:"border-token-border-default border-b p-4 text-lg font-semibold md:p-6",children:t}),r.jsxs("div",{className:"flex flex-col gap-4 p-4 md:p-6",children:[r.jsx(cC,{className:"text-base",children:e}),r.jsxs("div",{className:"flex justify-end gap-2",children:[i&&r.jsx(cC,{className:"grow",children:i}),a&&r.jsx(Nse,{asChild:!0,children:a}),r.jsx(jse,{asChild:!0,children:o})]})]})]})]})})}var ab="ToastProvider",[rb,Rse,Lse]=n3("Toast"),[gj]=kl("Toast",[Lse]),[Ose,f1]=gj(ab),pj=t=>{const{__scopeToast:e,label:n="Notification",duration:s=5e3,swipeDirection:o="right",swipeThreshold:a=50,children:i}=t,[l,c]=_.useState(null),[d,u]=_.useState(0),f=_.useRef(!1),m=_.useRef(!1);return n.trim()||console.error("Invalid prop `label` supplied to `".concat(ab,"`. Expected non-empty `string`.")),r.jsx(rb.Provider,{scope:e,children:r.jsx(Ose,{scope:e,label:n,duration:s,swipeDirection:o,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:_.useCallback(()=>u(g=>g+1),[]),onToastRemove:_.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:i})})};pj.displayName=ab;var hj="ToastViewport",Dse=["F8"],yx="toast.viewportPause",vx="toast.viewportResume",_j=_.forwardRef((t,e)=>{const x=t,{__scopeToast:n,hotkey:s=Dse,label:o="Notifications ({hotkey})"}=x,a=we(x,["__scopeToast","hotkey","label"]),i=f1(hj,n),l=Rse(n),c=_.useRef(null),d=_.useRef(null),u=_.useRef(null),f=_.useRef(null),m=On(e,f,i.onViewportChange),g=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=i.toastCount>0;_.useEffect(()=>{const v=y=>{var C;s.length!==0&&s.every(S=>y[S]||y.code===S)&&((C=f.current)==null||C.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[s]),_.useEffect(()=>{const v=c.current,y=f.current;if(p&&v&&y){const b=()=>{if(!i.isClosePausedRef.current){const k=new CustomEvent(yx);y.dispatchEvent(k),i.isClosePausedRef.current=!0}},C=()=>{if(i.isClosePausedRef.current){const k=new CustomEvent(vx);y.dispatchEvent(k),i.isClosePausedRef.current=!1}},S=k=>{!v.contains(k.relatedTarget)&&C()},E=()=>{v.contains(document.activeElement)||C()};return v.addEventListener("focusin",b),v.addEventListener("focusout",S),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",E),window.addEventListener("blur",b),window.addEventListener("focus",C),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",E),window.removeEventListener("blur",b),window.removeEventListener("focus",C)}}},[p,i.isClosePausedRef]);const h=_.useCallback(({tabbingDirection:v})=>{const b=l().map(C=>{const S=C.ref.current,E=[S,...Qse(S)];return v==="forwards"?E:E.reverse()});return(v==="forwards"?b.reverse():b).flat()},[l]);return _.useEffect(()=>{const v=f.current;if(v){const y=b=>{var E,k,T;const C=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!C){const M=document.activeElement,A=b.shiftKey;if(b.target===v&&A){(E=d.current)==null||E.focus();return}const L=h({tabbingDirection:A?"backwards":"forwards"}),O=L.findIndex(D=>D===M);B_(L.slice(O+1))?b.preventDefault():A?(k=d.current)==null||k.focus():(T=u.current)==null||T.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[l,h]),r.jsxs(OV,{ref:c,role:"region","aria-label":o.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&r.jsx(bx,{ref:d,onFocusFromOutsideViewport:()=>{const v=h({tabbingDirection:"forwards"});B_(v)}}),r.jsx(rb.Slot,{scope:n,children:r.jsx(un.ol,U(w({tabIndex:-1},a),{ref:m}))}),p&&r.jsx(bx,{ref:u,onFocusFromOutsideViewport:()=>{const v=h({tabbingDirection:"backwards"});B_(v)}})]})});_j.displayName=hj;var xj="ToastFocusProxy",bx=_.forwardRef((t,e)=>{const i=t,{__scopeToast:n,onFocusFromOutsideViewport:s}=i,o=we(i,["__scopeToast","onFocusFromOutsideViewport"]),a=f1(xj,n);return r.jsx(s3,U(w({"aria-hidden":!0,tabIndex:0},o),{ref:e,style:{position:"fixed"},onFocus:l=>{var u;const c=l.relatedTarget;!((u=a.viewport)!=null&&u.contains(c))&&s()}}))});bx.displayName=xj;var m1="Toast",Fse="toast.swipeStart",Bse="toast.swipeMove",Use="toast.swipeCancel",$se="toast.swipeEnd",yj=_.forwardRef((t,e)=>{const d=t,{forceMount:n,open:s,defaultOpen:o,onOpenChange:a}=d,i=we(d,["forceMount","open","defaultOpen","onOpenChange"]),[l=!0,c]=hr({prop:s,defaultProp:o,onChange:a});return r.jsx(gh,{present:n||l,children:r.jsx(Gse,U(w({open:l},i),{ref:e,onClose:()=>c(!1),onPause:Ku(t.onPause),onResume:Ku(t.onResume),onSwipeStart:Rt(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Rt(t.onSwipeMove,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(f,"px")),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(m,"px"))}),onSwipeCancel:Rt(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Rt(t.onSwipeEnd,u=>{const{x:f,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(f,"px")),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(m,"px")),c(!1)})}))})});yj.displayName=m1;var[Vse,Hse]=gj(m1,{onClose(){}}),Gse=_.forwardRef((t,e)=>{const O=t,{__scopeToast:n,type:s="foreground",duration:o,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:g}=O,p=we(O,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),h=f1(m1,n),[x,v]=_.useState(null),y=On(e,D=>v(D)),b=_.useRef(null),C=_.useRef(null),S=o||h.duration,E=_.useRef(0),k=_.useRef(S),T=_.useRef(0),{onToastAdd:M,onToastRemove:A}=h,I=Ku(()=>{var $;(x==null?void 0:x.contains(document.activeElement))&&(($=h.viewport)==null||$.focus()),i()}),N=_.useCallback(D=>{!D||D===1/0||(window.clearTimeout(T.current),E.current=new Date().getTime(),T.current=window.setTimeout(I,D))},[I]);_.useEffect(()=>{const D=h.viewport;if(D){const $=()=>{N(k.current),d==null||d()},H=()=>{const G=new Date().getTime()-E.current;k.current=k.current-G,window.clearTimeout(T.current),c==null||c()};return D.addEventListener(yx,H),D.addEventListener(vx,$),()=>{D.removeEventListener(yx,H),D.removeEventListener(vx,$)}}},[h.viewport,S,c,d,N]),_.useEffect(()=>{a&&!h.isClosePausedRef.current&&N(S)},[a,S,h.isClosePausedRef,N]),_.useEffect(()=>(M(),()=>A()),[M,A]);const L=_.useMemo(()=>x?kj(x):null,[x]);return h.viewport?r.jsxs(r.Fragment,{children:[L&&r.jsx(Wse,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),r.jsx(Vse,{scope:n,onClose:I,children:sr.createPortal(r.jsx(rb.ItemSlot,{scope:n,children:r.jsx(DV,{asChild:!0,onEscapeKeyDown:Rt(l,()=>{h.isFocusedToastEscapeKeyDownRef.current||I(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(un.li,U(w({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":h.swipeDirection},p),{ref:y,style:w({userSelect:"none",touchAction:"none"},t.style),onKeyDown:Rt(t.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:Rt(t.onPointerDown,D=>{D.button===0&&(b.current={x:D.clientX,y:D.clientY})}),onPointerMove:Rt(t.onPointerMove,D=>{if(!b.current)return;const $=D.clientX-b.current.x,H=D.clientY-b.current.y,G=!!C.current,Z=["left","right"].includes(h.swipeDirection),Q=["left","up"].includes(h.swipeDirection)?Math.min:Math.max,q=Z?Q(0,$):0,Y=Z?0:Q(0,H),te=D.pointerType==="touch"?10:2,ae={x:q,y:Y},se={originalEvent:D,delta:ae};G?(C.current=ae,eg(Bse,f,se,{discrete:!1})):dC(ae,h.swipeDirection,te)?(C.current=ae,eg(Fse,u,se,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs($)>te||Math.abs(H)>te)&&(b.current=null)}),onPointerUp:Rt(t.onPointerUp,D=>{const $=C.current,H=D.target;if(H.hasPointerCapture(D.pointerId)&&H.releasePointerCapture(D.pointerId),C.current=null,b.current=null,$){const G=D.currentTarget,Z={originalEvent:D,delta:$};dC($,h.swipeDirection,h.swipeThreshold)?eg($se,g,Z,{discrete:!0}):eg(Use,m,Z,{discrete:!0}),G.addEventListener("click",Q=>Q.preventDefault(),{once:!0})}})}))})}),h.viewport)})]}):null}),Wse=t=>{const d=t,{__scopeToast:e,children:n}=d,s=we(d,["__scopeToast","children"]),o=f1(m1,e),[a,i]=_.useState(!1),[l,c]=_.useState(!1);return Zse(()=>i(!0)),_.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:r.jsx(Jy,{asChild:!0,children:r.jsx(s3,U(w({},s),{children:a&&r.jsxs(r.Fragment,{children:[o.label," ",n]})}))})},zse="ToastTitle",vj=_.forwardRef((t,e)=>{const o=t,{__scopeToast:n}=o,s=we(o,["__scopeToast"]);return r.jsx(un.div,U(w({},s),{ref:e}))});vj.displayName=zse;var qse="ToastDescription",Yse=_.forwardRef((t,e)=>{const o=t,{__scopeToast:n}=o,s=we(o,["__scopeToast"]);return r.jsx(un.div,U(w({},s),{ref:e}))});Yse.displayName=qse;var bj="ToastAction",Cj=_.forwardRef((t,e)=>{const o=t,{altText:n}=o,s=we(o,["altText"]);return n.trim()?r.jsx(wj,{altText:n,asChild:!0,children:r.jsx(ib,U(w({},s),{ref:e}))}):(console.error("Invalid prop `altText` supplied to `".concat(bj,"`. Expected non-empty `string`.")),null)});Cj.displayName=bj;var Sj="ToastClose",ib=_.forwardRef((t,e)=>{const a=t,{__scopeToast:n}=a,s=we(a,["__scopeToast"]),o=Hse(Sj,n);return r.jsx(wj,{asChild:!0,children:r.jsx(un.button,U(w({type:"button"},s),{ref:e,onClick:Rt(t.onClick,o.onClose)}))})});ib.displayName=Sj;var wj=_.forwardRef((t,e)=>{const a=t,{__scopeToast:n,altText:s}=a,o=we(a,["__scopeToast","altText"]);return r.jsx(un.div,U(w({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0},o),{ref:e}))});function kj(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),Kse(s)){const o=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!o)if(a){const i=s.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...kj(s))}}),e}function eg(t,e,n,{discrete:s}){const o=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),s?FV(o,a):o.dispatchEvent(a)}var dC=(t,e,n=0)=>{const s=Math.abs(t.x),o=Math.abs(t.y),a=s>o;return e==="left"||e==="right"?a&&s>n:!a&&o>n};function Zse(t=()=>{}){const e=Ku(t);_r(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[e])}function Kse(t){return t.nodeType===t.ELEMENT_NODE}function Qse(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function B_(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Jse=pj,Xse=_j,eoe=yj,Ej=vj,toe=Cj,Tj=ib;function Mj({children:t}){return r.jsxs(Jse,{children:[r.jsx(eoe,{className:"radix-state-closed:animate-hide radix-state-open:animate-slideIn popover bg-token-main-surface-primary grid grid-cols-[auto_max-content] items-center gap-x-4 rounded-lg p-4 shadow-xs [grid-template-areas:_'title_action'_'description_action'] sm:max-w-2xl",open:!0,children:t}),r.jsx(Xse,{className:"fixed end-0 bottom-0 z-50 m-0 flex max-w-[100vw] list-none flex-col gap-4 p-6 outline-hidden"})]})}const hc="compliance",noe=3600*24*30*6,soe={serverPrimedAllowBrowserStorageValue:!0,showCookieConsentBanner:!1,isStorageComplianceEnabled:!1,ageVerificationDeadline:null,ageVerificationType:"none"},ooe={IT:"countdown",KR:"passive"};function aoe(t,e){var i,l,c,d,u,f,m,g;const n=yT(e),s=(i=t.registration_country)!=null?i:"",o=s in xT&&((l=t.age_verification)==null?void 0:l.is_required);if(!n&&!o)return soe;const a=n&&!!t.require_cookie_consent;return{serverPrimedAllowBrowserStorageValue:a?(d=(c=t.cookie_consent)==null?void 0:c.analytics_cookies_accepted)!=null?d:!1:!0,showCookieConsentBanner:a&&!!((u=t.cookie_consent)!=null&&u.is_required),isStorageComplianceEnabled:a,ageVerificationDeadline:o&&(m=(f=t.age_verification)==null?void 0:f.remaining_seconds)!=null?m:null,ageVerificationType:o&&(g=ooe[s])!=null?g:"none"}}const Aj=Xn({queryKey:[hc],queryFn:async()=>{var e;let t;try{t=await ge.safeGet("/compliance")}catch(n){t={registration_country:null,require_cookie_consent:!1,age_verification:{is_required:!1},cookie_consent:{is_required:!1},terms_of_use:{is_required:!1}}}if((e=t.cookie_consent)!=null&&e.is_required){const n=gs.getBooleanCookie(ps.AllowNonessential),s=t.cookie_consent.analytics_cookies_accepted;if(n===void 0&&s!=null)gs.setBooleanCookie(ps.AllowNonessential,s,{maxAge:noe,domain:BV});else if(n!==s&&n!=null){const o={analytics_cookies_accepted:n};return ge.safePost("/compliance/cookie_consent",{authOption:sn.SendIfAvailable,requestBody:o}),U(w({},t),{cookie_consent:w(w({},t.cookie_consent),o)})}}return t}});function Ij({enabled:t,select:e}){return rt(U(w({},Aj),{enabled:t,select:e}))}function jj(){const t=V(),{country:e}=bd(t),n=e!=null&&e in xT,s=rt(U(w({},Aj),{enabled:n,select:o=>aoe(o,e)}));return U(w({},s),{isEnabled:n})}function roe(){const t=It();return qt({mutationFn:e=>ge.safePost("/compliance/cookie_consent",{requestBody:e}),onSuccess:()=>{t.refetchQueries({queryKey:[hc]})},onMutate:async e=>{await t.cancelQueries({queryKey:[hc]});const n=t.getQueryData([hc]);return t.setQueryData([hc],s=>{var a;if(s===void 0)return;const o=!!((a=s.cookie_consent)!=null&&a.is_required);return U(w({},s),{cookie_consent:w({is_required:o},e)})}),{previousValue:n}},onError:(e,n,s)=>{s!==void 0&&t.setQueryData([hc],s.previousValue)}})}function YWe({serverPrimedAllowBrowserStorageValue:t,enabled:e}){const{data:n,isLoading:s}=Ij({enabled:e,select:o=>{var a;return((a=o.cookie_consent)==null?void 0:a.analytics_cookies_accepted)===!0}});return s||!e?t:n!=null?n:!1}const ioe=3600*24;function ZWe(t,e=!1){return Jo()==null||e?"loading":!t||gs.getCookie(ps.AgeVerification)||t.ageVerificationDeadline==null||t.ageVerificationType==="none"?"hide":"show"}function KWe({onClose:t}){const{data:{ageVerificationType:e,ageVerificationDeadline:n}={}}=jj();return e==="passive"?r.jsx(loe,{onClose:t}):e==="countdown"&&n!=null?r.jsx(coe,{onClose:t,ageVerificationDeadline:n}):null}const loe=({onClose:t})=>{const e=V(),{country:n}=bd(e);return _.useEffect(()=>{Fe.addAction("privacy_policy.show_age_verification_modal",{country:n})},[n]),r.jsx(mj,{onClose:t,title:"OpenAI      ",description:r.jsx("div",{className:"whitespace-pre-wrap",children:r.jsxs("p",{children:["ChatGPT  .     , OpenAI  OpenAI       . ChatGPT  ,  18 , 14        .",r.jsx("br",{}),r.jsx("br",{}),"OpenAI  "," ",r.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"    ."})]})}),actionButton:r.jsx(ye,{color:"primary",onClick:async()=>{await ge.safePost("/compliance/age_verification"),t()},children:" OpenAI  "}),cancelButton:r.jsx(ye,{as:"link",color:"secondary",to:"/auth/logout",children:""})})},coe=({onClose:t,ageVerificationDeadline:e})=>{const n=V(),s=e!=null?Math.floor(e/60/60/24):0;_.useEffect(()=>{qe.logEvent("chatgpt_compliance_age_verification_seen"),B.logEvent("Compliance Age Verification Seen")},[]);const{country:o}=bd(n);return _.useEffect(()=>{Fe.addAction("privacy_policy.show_age_verification_countdown",{country:o})},[o]),r.jsxs(Mj,{children:[r.jsx(Ej,{className:"text-sm font-semibold [grid-area:_title]",children:r.jsx(j,U(w({},uC.ageVerificationTitle),{values:{deadline:s,learnMoreLink:a=>r.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:a})}}))}),r.jsx(toe,{altText:"Dismiss notification",asChild:!0,children:r.jsx(ye,{color:"primary",size:"small",onClick:()=>{qe.logEvent("chatgpt_compliance_age_verification_clicked"),B.logEvent("Compliance Age Verification Clicked"),gs.setCookie(ps.AgeVerification,"true",{maxAge:ioe,path:"/"}),t(),Ln.openModal(Qu.AgeVerificationInterstitial)},children:r.jsx(j,w({},uC.startVerification))})}),r.jsx(Tj,{})]})},uC=Se({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that youre old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardians permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function Qf(){const{hash:t}=Vn(),e=at();return{openSettings:(n,s)=>{e(Al(n,s))},closeSettings:()=>{e({hash:""})},isOpen:$V(t),currentTab:UV(t)}}const QWe=Xn({queryKey:["clientApplications"],queryFn:()=>ge.safeGet("/client_applications")});function JWe(){const t=$t();return qt({mutationFn:e=>ge.safeDelete("/client_applications/{client_id}",{parameters:{path:{client_id:e}}}),onSuccess:()=>{window.location.reload()},onError:e=>{Fe.addError("Failed to revoke client application",{error:e}),t.danger("Failed to disconnect. Please try again later.",{toastId:"revoke_client_application"})}})}function XWe({onClose:t}){const e=V(),n=ne(),s=$t(),{openSettings:o}=Qf(),a=roe(),{session:i}=hd(e),{data:{isStorageComplianceEnabled:l}={}}=jj(),{data:c,isLoading:d}=Ij({enabled:!!(l&&i),select:u=>{var f;return!((f=u.cookie_consent)!=null&&f.is_required)}});return _.useEffect(()=>{c===!0&&t()},[c,t]),d?null:r.jsx(doe,{onReject:()=>{a.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){s.success(n.formatMessage(Cc.updateSuccess))},onError(){s.danger(Cc.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},onAccept:()=>{a.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){s.success(n.formatMessage(Cc.updateSuccess))},onError(){s.danger(Cc.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},children:r.jsx(j,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:u=>r.jsx(yh,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:u}),manageLink:u=>r.jsx(uoe,{onClick:()=>{o(Pn.DataControls)},children:u})}})})}function doe({children:t,onAccept:e,onReject:n}){return _.useEffect(()=>{Fe.addAction("privacy_policy.show_cookie_consent_banner")},[]),r.jsxs(Mj,{children:[r.jsxs(Ej,{className:"text-sm font-semibold [grid-area:_title]",children:[t,r.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[r.jsx(ye,{color:"secondary",size:"small",onClick:n,children:r.jsx(j,w({},Cc.reject))}),r.jsx(ye,{color:"secondary",size:"small",onClick:e,children:r.jsx(j,w({},Cc.accept))})]})]}),r.jsx(Tj,{})]})}var K9;const uoe=ft.button(K9||(K9=ct(["underline font-normal text-green-600"]))),Cc=Se({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),foe=on(t=>St(()=>{var e,n;return(n=(e=o3(t))==null?void 0:e.includes(ss.Sunshine))!=null?n:!1}));function Fd(){"use forget";const t=W.c(2),e=V();let n;return t[0]!==e?(n=()=>foe(e),t[0]=e,t[1]=n):n=t[1],re(n)}function Ai(){"use forget";const{data:t}=eo(Lt.Sunshine),e=Fd();return!!t&&e}function Nj(t){return ve(t,"507055138")}function Pj(t){const e=Nj(t),n=ve(t,"1946731762");return e&&n}function moe(){"use forget";const t=W.c(2),e=V();let n;t[0]!==e?(n=Pj(e),t[0]=e,t[1]=n):n=t[1];const s=n,{data:o}=eo(Lt.GoldenHour);return!!o&&s}const goe=on(t=>St(()=>{var e,n;return(n=(e=o3(t))==null?void 0:e.includes(ss.Moonshine))!=null?n:!1}));function g1(){"use forget";const t=W.c(2),e=V();let n;return t[0]!==e?(n=()=>goe(e),t[0]=e,t[1]=n):n=t[1],re(n)}function eze(){"use forget";const t=g1(),{data:e}=eo(Lt.Moonshine);return t&&!!e}const poe=on(t=>St(()=>{var e,n;return(n=(e=o3(t))==null?void 0:e.includes(ss.MemoryInSearch))!=null?n:!1}));function hoe(){"use forget";const t=W.c(2),e=V();let n;return t[0]!==e?(n=()=>poe(e),t[0]=e,t[1]=n):n=t[1],re(n)}function tze(){"use forget";const t=Ai(),{data:e}=eo(Lt.MemoryInSearch),n=hoe();return t&&!!e&&n}function nze(){"use forget";var a;const t=W.c(2),e=V();let n;t[0]!==e?(n=(a=ve(e,"645560164"))!=null?a:!1,t[0]=e,t[1]=n):n=t[1];const s=n;return Ai()&&s}const sze=t=>ve(t,"667937038");function _oe(t){var e;return(e=ve(t,"1611573287"))!=null?e:!1}function p1(){"use forget";const t=W.c(2),e=V(),n=Ai();let s;return t[0]!==e?(s=_oe(e),t[0]=e,t[1]=s):s=t[1],n&&s}const xoe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg",yoe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg";function oze(){const t=V(),e=Pj(t),{eligible:n,isLoading:s}=lt(Oe.hasSeenGoldenHourNuxV2);return An(mn)||!e?"hide":s?"loading":n?"show":"hide"}function voe(){const[t,e]=_.useState(!1);return _.useEffect(()=>{const n=setTimeout(()=>e(!0),1e3);return()=>clearTimeout(n)},[]),r.jsx("div",{"aria-hidden":!0,className:"relative box-content h-6 w-10 shrink-0 rounded-full p-[2px] ".concat(t?"bg-blue-400":"bg-gray-200 dark:bg-gray-600"),children:r.jsx(Xe.div,{className:"absolute top-1/2 h-[21px] w-[21px] -translate-y-1/2 rounded-full bg-white shadow",animate:{x:t?17:1.5},transition:{type:"spring",stiffness:350,damping:25}})})}function aze({onClose:t}){const e=V(),s=Xo()?yoe:xoe,[o,a]=_.useState(!1);_.useEffect(()=>{const f=new Image;f.src=s,f.onload=()=>a(!0)},[s]);const[i,l]=_.useState(!1);_.useEffect(()=>{o&&(i||(ot(e,Oe.hasSeenGoldenHourNuxV2),l(!0),B.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Shown","chatgpt_golden_hour_nux_modal_shown"),Ie.count(je.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_shown"),B.logUpsellOrModalEvent(dn,{eventId:"golden_hour_nux_modal_shown",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})))},[e,i,o]);const c=Se({optm:{id:"GoldenHourNux.optm",defaultMessage:"Automatically manage"},title:{id:"GoldenHourNux.title",defaultMessage:'Say goodbye to "Memory full"'},subtitle:{id:"GoldenHourNux.subtitle",defaultMessage:"ChatGPT now manages saved memories automatically  so it wont fill up and stays focused on what matters."},learnMoreButton:{id:"GoldenHourNux.learnMoreButton",defaultMessage:"Learn more"},gotItButton:{id:"GoldenHourNux.gotItButton",defaultMessage:"Got it"}}),d="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47",u=()=>{window.open(d,"_blank","noopener noreferrer"),B.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Learn More Clicked","chatgpt_golden_hour_nux_modal_learn_more_clicked"),Ie.count(je.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_learn_more_clicked")};return o?r.jsxs(Mt,{testId:"modal-golden-hour-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),B.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Closed","chatgpt_golden_hour_nux_modal_closed"),Ie.count(je.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(xn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative flex flex-1 overflow-x-clip",children:[r.jsx("img",{src:s,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex w-full items-center justify-center",children:r.jsx("div",{className:"pointer-events-auto",children:r.jsx("div",{className:"inline-flex w-full rounded-[40px] bg-white/40 p-1 shadow-[0_0_84px_0_rgba(0,105,209,0.5)] backdrop-blur-[2px] dark:bg-black/60",children:r.jsx("div",{className:"bg-token-bg-secondary flex max-w-full items-center justify-end gap-[10px] overflow-hidden rounded-[38px] bg-white py-2.5 ps-4.5 pe-3 dark:bg-[#101010]",children:r.jsxs("div",{className:"flex w-full items-center gap-3",children:[r.jsx("div",{className:"text-token-text-primary flex min-w-0 flex-1 items-center gap-[9px] truncate text-[21px] leading-[30px] tracking-[-0.27px]",children:r.jsx(j,w({},c.optm))}),r.jsx("div",{className:"text-token-text-primary flex shrink-0 items-center gap-[18px]",children:r.jsx(voe,{})})]})})})})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:r.jsx(j,w({},c.title))}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,w({},c.subtitle))}),r.jsxs("div",{className:"mt-4 flex w-full items-center justify-end gap-3",children:[r.jsx(ye,{color:"secondary",onClick:u,children:r.jsx(j,w({},c.learnMoreButton))}),r.jsx(ye,{color:"primary",onClick:t,children:r.jsx(j,w({},c.gotItButton))})]})]})]}):null}R(()=>P(()=>import("./1312ifs42fvi3x41.js"),__vite__mapDeps([31,1,32,10,11])).then(t=>t.ConfirmEnableMfaForGithubModal));function rze(){return rt({queryKey:["mfa-is-enabled"],queryFn:async()=>(await ge.safeGet("/accounts/mfa_info")).mfa_enabled})}function boe(t){var a;const{data:e,isLoading:n,isError:s,refetch:o}=rt({queryKey:["mfa-requirement-level-".concat(t)],queryFn:async()=>await ge.safeGet("/aip/connectors/{connector_id}/mfa_requirement",{parameters:{path:{connector_id:t}}})});return n?{status:"loading",retry:()=>{}}:s?{status:"error",retry:o}:{status:(a=e==null?void 0:e.requirement)!=null?a:"not_required",retry:o}}function Coe({enabled:t=!0}={}){const e=Jo(),n=e==null?void 0:e.includes(VV);return rt({queryKey:["mfaInfo"],queryFn:()=>ge.safeGet("/accounts/mfa_info"),enabled:n&&t})}function Soe({enabled:t=!0}={}){var s,o,a,i,l,c,d;const e=Coe({enabled:t});let n;return e.isLoading?n="loading":e.isError?n="error":(s=e.data)!=null&&s.mfa_enabled?n="enabled":n="disabled",{status:n,native_default_factor_id:(o=e.data)==null?void 0:o.native_default_factor_id,factors:(a=e.data)==null?void 0:a.factors,show_push_auth:(l=(i=e.data)==null?void 0:i.show_push_auth)!=null?l:!1,show_sms:(d=(c=e.data)==null?void 0:c.show_sms)!=null?d:!1,retry:e.refetch}}const woe=R(()=>P(()=>import("./nerwniv8icoyqyjk.js"),__vite__mapDeps([33,1])),{loading:t=>F(t)}),fC=R(()=>P(()=>import("./ojgc3f33xqlpzccg.js"),__vite__mapDeps([34,1])),{loading:t=>F(t)}),koe=R(()=>P(()=>import("./fsahglpl2wxoakvg.js"),__vite__mapDeps([35,1])),{loading:t=>F(t)}),Eoe="https://persistent.oaistatic.com/chatgpt/connector-promo-light.png",Toe="https://persistent.oaistatic.com/chatgpt/connector-nux-banner-bg-1.png",Moe="https://persistent.oaistatic.com/chatgpt/connector-nux-banner-bg-2.png",ize=()=>{const t=V(),{isLoading:e,eligible:n}=lt(Oe.hasSeenConnectorsNuxModal),s=An(mn),o=Sn(),a=!!(o!=null&&o.isAdminOfAccount()||o!=null&&o.isOwnerOfAccount()),{isLoading:i}=vT(),l=Nf(),c=re(()=>a3(t));if(s)return"hide";const d=e||i,u=n&&(l==null?void 0:l.enabled)&&(l==null?void 0:l.can_see_system_hint_announcement)&&(a||c&&c.length>0);return d?"loading":u?"show":"hide"},lze=({onClose:t})=>{const{canUpgradeGDrive:e,canUpgradeSharepoint:n}=vT();return e||n?r.jsx(Aoe,{canUpgradeGDrive:e,canUpgradeSharepoint:n,onClose:t}):r.jsx(joe,{onClose:t})},Aoe=({canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:n})=>r.jsx(Ioe,{canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:n}),Ioe=({canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:n})=>{const s=V(),o=ne(),a=Sn(),i=!!(a!=null&&a.isAdminOfAccount()||a!=null&&a.isOwnerOfAccount()),l=!!(a!=null&&a.isPersonalAccount()),[c,d]=_.useState(!1),[u,f]=_.useState(!1),m=t?Toe:Moe;_.useEffect(()=>{yc.logEntryPointShown({referrer:ma.ConnectorNuxModal})},[]);const g=()=>{ot(s,Oe.hasSeenConnectorsNuxModal),n()},p=t?Go[yt.GDRIVE_ACTION_CONNECTOR]:Go[yt.SHAREPOINT_CONNECTOR],h=yc.createIdMetadataFromId(p,ma.ConnectorNuxModal),{status:x}=boe(p),{status:v}=Soe({enabled:x==="required"||x==="suggested"}),y=_.useRef(!1),b=_.useMemo(()=>{if(x==="required")return"required";if(x==="suggested")return v==="enabled"?"not_required":v==="disabled"?"suggested":void 0;if(x==="not_required"||x==="error")return"not_required"},[x,v]),{CitationIcon:C,description:S,LoadingIcon:E,loadingText:k,onContinue:T,primaryButtonLabel:M,title:A}=_.useMemo(()=>t?{CitationIcon:woe,description:o.formatMessage({id:"T7ohyZ",defaultMessage:"Ask ChatGPT anything about your Google Docs, Sheets, Slides, and files."}),LoadingIcon:koe,loadingText:o.formatMessage({id:"Z5098P",defaultMessage:"Reading Google Drive..."}),primaryButtonLabel:o.formatMessage({id:"GmC5aI",defaultMessage:"Connect Google"}),title:o.formatMessage({id:"3HJBih",defaultMessage:"ChatGPT + Google Drive"}),onContinue:()=>{i&&!l?window.location.href="/admin/ca":window.location.hash="#settings/".concat(Pn.Connectors,"?connector=").concat(Go[yt.GDRIVE_ACTION_CONNECTOR],"&add-connector-link=true&referrer=").concat(ma.ConnectorNuxModal)}}:{CitationIcon:fC,description:o.formatMessage({id:"Bq7hPi",defaultMessage:"Ask ChatGPT anything about your shared sites and OneDrive files."}),LoadingIcon:fC,loadingText:o.formatMessage({id:"CTgrFA",defaultMessage:"Reading Sharepoint..."}),primaryButtonLabel:o.formatMessage({id:"d89pUX",defaultMessage:"Connect Sharepoint"}),title:o.formatMessage({id:"mliVAI",defaultMessage:"ChatGPT + Sharepoint"}),onContinue:()=>{i&&!l?window.location.href="/admin/ca":window.location.hash="#settings/".concat(Pn.Connectors,"?connector=").concat(Go[yt.SHAREPOINT_CONNECTOR],"&add-connector-link=true&referrer=").concat(ma.ConnectorNuxModal)}},[t,o,i,l]),I=()=>{yc.logModalContinue({connector_id_metadata:h,referrer:ma.ConnectorNuxModal,action:"connection",authType:"NONE"}),B.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked",{targetted_connector:t?"gdrive":"sharepoint"}),ot(s,Oe.hasSeenConnectorsNuxModal),n(),T()};return _.useEffect(()=>{const N=new Image;N.src=m,N.onload=()=>d(!0)},[m]),_.useEffect(()=>{y.current||b&&(yc.logModalShown({connector_id_metadata:h,referrer:ma.ConnectorNuxModal,mfaState:b,authType:"NONE"}),y.current=!0)},[b,h]),_.useEffect(()=>{B.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown",{targetted_connector:t?"gdrive":"sharepoint"}),B.logUpsellOrModalEvent(dn,{eventId:"connectors_nux_modal_shown",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[t,e,h]),_.useEffect(()=>{if(!c)return;const N=setTimeout(()=>{f(!0)},3e3);return()=>clearTimeout(N)},[c]),r.jsxs(Mt,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:g,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsxs("div",{className:"relative h-[213px]",children:[r.jsx(xn,{onClick:g,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:m,alt:o.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"h-[213px] w-full object-cover object-bottom"}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center",children:r.jsxs("div",{className:"flex w-full flex-col gap-4 px-8",children:[r.jsx(Xe.div,{className:"relative flex w-auto self-end rounded-3xl bg-white px-4 py-2.5 text-lg backdrop-blur-[24px] dark:bg-[rgba(48,48,48,0.8)]",initial:{opacity:0,y:16},animate:c?{opacity:1,y:0}:{opacity:0,y:8},transition:{type:"tween",ease:"easeInOut",stiffness:400,damping:30,delay:.2,duration:.3},layout:"position",children:r.jsx(j,{id:"2VNiPu",defaultMessage:"Where's the next company conference?"})}),r.jsx(Xe.div,{className:"relative flex w-auto self-start rounded-3xl bg-white px-4 py-2.5 text-lg backdrop-blur-[24px] dark:bg-[rgba(48,48,48,0.8)] ".concat(u?"pe-3":""),initial:{opacity:0,y:16},animate:c?{opacity:1,y:0}:{opacity:0,y:8},transition:{type:"tween",ease:"easeInOut",stiffness:400,damping:30,delay:.5,duration:.3},layout:"position",children:r.jsx(fn,{mode:"wait",initial:!1,children:u?r.jsxs(Xe.div,{className:"flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,width:"100%"},transition:{opacity:{duration:.2}},style:{width:"100%"},layout:!0,children:[r.jsx(j,{id:"hBFvRz",defaultMessage:"The next conference is in New York City."}),r.jsx("span",{className:"text-token-text-secondary dark:bg-token-tertiary relative flex items-center rounded-xl bg-[#f4f4f4] px-1.5 py-0.5",children:r.jsx(C,{className:"h-5 w-5 object-contain"})})]},"answer"):r.jsxs(Xe.div,{className:"flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,width:"100%"},transition:{opacity:{duration:.2}},style:{width:"100%"},layout:!0,children:[r.jsx(E,{className:"h-5 w-5 object-contain"}),r.jsx("span",{className:"loading-shimmer",children:k})]},"loading")})})]})})]})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:A}),r.jsx("div",{className:"text-token-text-secondary",children:S}),r.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[r.jsx(ye,{color:"secondary",onClick:g,children:r.jsx(j,{id:"ZeZf5A",defaultMessage:"Try later"})}),r.jsx(ye,{color:"primary",onClick:I,children:M})]})]})]})},joe=({onClose:t})=>{const e=V(),n=ne(),s=Sn(),o=!!(s!=null&&s.isAdminOfAccount()||s!=null&&s.isOwnerOfAccount()),a=!!(s!=null&&s.isPersonalAccount()),{openSettings:i}=Qf();_.useEffect(()=>{yc.logEntryPointShown({referrer:ma.ConnectorNuxModal}),B.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown",{isAdmin:o&&!a?"true":"false"}),B.logUpsellOrModalEvent(dn,{eventId:"connectors_nux_modal_shown",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[o,a]);const l=()=>{B.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked",{isAdmin:o&&!a?"true":"false"}),ot(e,Oe.hasSeenConnectorsNuxModal),o&&!a?window.location.href="/admin/ca":(t(),i(Pn.Connectors))},c=()=>{ot(e,Oe.hasSeenConnectorsNuxModal),t()},d=n.formatMessage({id:"l6VLn3",defaultMessage:"Your apps, smarter chats"}),u=n.formatMessage({id:"QTZ7a/",defaultMessage:"Find answers, summarize info, or get things done with tools you use every day."});return r.jsxs(Mt,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:c,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsxs("div",{className:"relative h-[213px]",children:[r.jsx(xn,{onClick:c,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsx("img",{src:Eoe,alt:n.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:d}),r.jsx("div",{className:"text-token-text-secondary",children:u}),r.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[r.jsx(ye,{color:"secondary",onClick:c,children:r.jsx(j,{id:"S6nkY/",defaultMessage:"Not now"})}),r.jsx(ye,{color:"primary",onClick:()=>l(),children:r.jsx(j,{id:"1pAV1c",defaultMessage:"Connect apps"})})]})]})]})},Noe="{{.assetPrefix}}/assets/no_auth_go_upsell_background-gp1k7btd.webp",lb={src:Noe};var U_,mC;function Poe(){if(mC)return U_;mC=1;var t=bT(),e=r3(),n="[object Boolean]";function s(o){return o===!0||o===!1||e(o)&&t(o)==n}return U_=s,U_}var Roe=Poe();const h1=Zn(Roe),Loe="/?default_tab=personal#pricing",cb=()=>ki(Ue.HasSeenNoAuthFreeTrialUpsell,!1,h1),cze=()=>{const t=V(),e=!tt(t),n=Pf(),s=i3(),[o]=cb(),[a]=Us(),i=Array.from(a.keys()).some(u=>u.toLowerCase()===CT.NoAuthPlan);return!e||n||o||s||i||!ve(t,"2207916353")||!ze(t,"2860408342").get("show_go_12_month_free_trial_modal_web",!1)?"hide":"show"},dze=({onClose:t})=>{const e=V(),[,n]=cb(),[s,o]=_.useState(!1),a=_.useCallback(()=>{n(!0),_t.setItem(Ue.HasSeenNoAuthFreeTrialUpsell,!0)},[n]);_.useEffect(()=>{B.logEventWithStatsig("No Auth Go Free Trial Upsell Modal Shown","chatgpt_no_auth_go_free_trial_upsell_modal_shown"),B.logUpsellOrModalEvent(dn,{eventId:"free_trial_upsell_modal_shown_go_no_auth",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);const i=_.useCallback(()=>{a(),B.logEventWithStatsig("No Auth Go Free Trial Upsell Modal Dismissed","chatgpt_no_auth_go_free_trial_upsell_modal_dismissed"),t()},[a,t]),l=_.useCallback(()=>{a(),o(!0),Zt(e,{fallbackScreenHint:"login",callback:c=>{B.logLogInButtonClicked({provider:c,location:"No Auth Go Free Trial Upsell Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL)},callbackUrl:Loe,skipLoginModal:!1}),t()},[e,a,t]);return r.jsxs(Mt,{testId:"modal-no-auth-free-trial-upsell",isOpen:!0,onClose:i,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:lb.src,loading:"eager",fetchPriority:"high"}),r.jsx("p",{className:"text-token-text-default-primary absolute start-1/2 top-1/2 w-full -translate-x-1/2 -translate-y-1/2 text-center text-[48px] font-semibold text-white",children:r.jsx(j,w({},gC.imageText))})]}),r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[r.jsx("p",{className:"text-token-text-secondary dark:text-gray-solid-300 mb-6 text-center",children:r.jsx(j,w({},gC.subtitle))}),r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[r.jsx(ye,{size:"large",color:"secondary",onClick:i,className:"w-full focus-visible:outline-none md:w-auto",children:r.jsx(j,w({},gt.maybeLater))}),r.jsx(ye,{size:"large",color:"primary",onClick:l,className:"w-full min-w-[130px] md:w-auto",children:s?r.jsx(ws,{}):r.jsx(j,w({},gt.logInButtonText))})]})]})]})},gC=Se({subtitle:{id:"NoAuthGoFreeTrialUpsell.subtitle",defaultMessage:"Log in to see if you qualify for faster responses, higher file upload limits, and expanded image generation with a Go plan  all free for the next 12 months."},imageText:{id:"NoAuthGoFreeTrialUpsell.imageText",defaultMessage:"Try Go, Free"}}),Ooe="{{.assetPrefix}}/assets/business_free_trial_upsell_background-disf9zbl.webp",Doe={src:Ooe},Foe="{{.assetPrefix}}/assets/plus_free_trial_upsell_background-ct52ve11.webp",Boe={src:Foe};function Ul(t){const{data:e}=El(),n=ST(e);_.useEffect(()=>{!e||n||Qs.warn("Unable to resolve current account for promo eligibility",{planType:t,currentAccountId:e.currentAccountId,availableAccountIds:e.accountItems.map(({id:o})=>o)})},[e,n,t]);const s=n==null?void 0:n.getEligiblePromoCampaignId(t);return t===Ye.PLUS&&((n==null?void 0:n.planType)==null||n.planType!==Ye.FREE)?{eligible:!1}:s?{eligible:!0,campaignId:s}:{eligible:!1}}function Rj(){return Ul(Ye.PLUS).eligible}function Uoe(){return Ul(Ye.GO).eligible}function $oe(){return Ul(Ye.SELF_SERVE_BUSINESS).eligible}function Voe(){return Ul(Ye.PLUS)}function Hoe(){return Ul(Ye.GO)}function Goe(){return Ul(Ye.SELF_SERVE_BUSINESS)}function uze(){return Ul(Ye.PLUS)}function db(t){return ve(t,"2717328795")}function Woe(t){const e=_.useRef(t);return Jn(()=>{e.current=t}),e}function Lj(t){const e=Woe(t);_.useEffect(()=>{e.current()},[e])}const zoe=()=>{const{eligible:t}=lt(Oe.hasSeenFreeTrialUpsellModal),{eligible:e}=lt(Oe.hasSeenGoFreeTrialUpsellModal),n=V(),s=tt(n),[o]=cb(),a=Rj(),i=Uoe(),l=$oe(),c=db(n),d=!c&&t&&l&&!o&&s,u=!c&&e&&i&&!o&&!d&&s,f=!c&&t&&a&&!o&&!d&&!u&&s,m=_.useCallback(()=>{d&&(B.logEventWithStatsig("Business Free Trial Upsell Modal Shown","chatgpt_business_free_trial_upsell_modal_shown"),B.logUpsellOrModalEvent(dn,{eventId:"free_trial_upsell_modal_shown_business",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})),u&&(B.logEventWithStatsig("Go Free Trial Upsell Modal Shown","chatgpt_go_free_trial_upsell_modal_shown"),B.logUpsellOrModalEvent(dn,{eventId:"free_trial_upsell_modal_shown_go",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})),f&&(B.logEventWithStatsig("Plus Free Trial Upsell Modal Shown","chatgpt_plus_free_trial_upsell_modal_shown"),B.logUpsellOrModalEvent(dn,{eventId:"free_trial_upsell_modal_shown_plus",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL}))},[d,u,f]);return{isOpen:d||u||f,showBusiness:d,showGo:u,showPlus:f,onClose:()=>{d&&(B.logEventWithStatsig("Business Free Trial Upsell Modal Dismissed","chatgpt_business_free_trial_upsell_modal_dismissed"),ot(n,Oe.hasSeenFreeTrialUpsellModal)),u&&(B.logEventWithStatsig("Go Free Trial Upsell Modal Dismissed","chatgpt_go_free_trial_upsell_modal_dismissed"),ot(n,Oe.hasSeenGoFreeTrialUpsellModal)),f&&(B.logEventWithStatsig("Plus Free Trial Upsell Modal Dismissed","chatgpt_plus_free_trial_upsell_modal_dismissed"),ot(n,Oe.hasSeenFreeTrialUpsellModal))},onMount:m}};function qoe({onClose:t,onPrimaryClick:e,isButtonLoading:n,type:s}){let o,a,i,l;switch(s){case"business":o=Doe.src,a=pC.subtitle,i=gt.tryBusiness,l=r.jsxs("p",{className:"absolute start-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-[34px] font-semibold text-white",children:[r.jsx("span",{className:"text-center font-semibold text-black",children:r.jsx(j,w({},gt.chatGPT))}),r.jsx("span",{className:"ms-2.5 text-center font-semibold text-[#5D5D5D]",children:r.jsx(j,w({},pC.imageText2))})]});break;case"go":o=lb.src,a=_C.subtitle,i=gt.tryGo,l=r.jsx("p",{className:"text-token-text-default-primary absolute start-1/2 top-1/2 w-full -translate-x-1/2 -translate-y-1/2 text-center text-[48px] font-semibold text-white",children:r.jsx(j,w({},_C.imageText))});break;default:o=Boe.src,a=hC.subtitle,i=gt.tryPlus,l=r.jsx("p",{className:"text-token-text-default-primary absolute start-1/2 top-1/2 w-full -translate-x-1/2 -translate-y-1/2 text-center text-[48px] font-semibold text-white",children:r.jsx(j,w({},hC.imageText))})}return r.jsxs(Mt,{testId:"modal-free-trial-upsell",isOpen:!0,onClose:t,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:o,loading:"eager",fetchPriority:"high"}),l]}),r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[r.jsx("p",{className:"text-token-text-secondary dark:text-gray-solid-300 mb-6 text-center",children:r.jsx(j,w({},a))}),r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[r.jsx(ye,{size:"large",color:"secondary",onClick:t,className:"w-full focus-visible:outline-none md:w-auto",children:r.jsx(j,w({},gt.maybeLater))}),r.jsx(ye,{size:"large",color:"primary",onClick:e,className:"w-full min-w-[130px] md:w-auto",children:n?r.jsx(ws,{}):r.jsx(j,w({},i))})]})]})]})}const fze=({onClose:t})=>{const{onMount:e,onClose:n,showGo:s,showPlus:o}=zoe(),a=at(),[i,l]=_.useState(!1);Lj(e);function c(){l(!0),pn(a,"Plus Free Trial Upsell Modal",void 0,void 0,u1),setTimeout(()=>{t(),n()},1e3)}function d(){l(!0),pn(a,"Go Free Trial Upsell Modal"),setTimeout(()=>{t(),n()},1e3)}function u(){l(!0),pn(a,"Business Free Trial Upsell Modal"),setTimeout(()=>{t(),n()},1e3)}let f,m;return o?(f="plus",m=c):s?(f="go",m=d):(f="business",m=u),r.jsx(qoe,{onClose:()=>{t(),n()},onPrimaryClick:m,isButtonLoading:i,type:f})},pC=Se({subtitle:{id:"BusinessFreeTrialUpsellModal.subtitle",defaultMessage:"Unlock a secure workspace with advanced models and connectors to internal sources to supercharge your work"},imageText2:{id:"BusinessFreeTrialUpsellModal.imageText2",defaultMessage:"Business"}}),hC=Se({subtitle:{id:"FreeTrialUpsellModal.subtitle",defaultMessage:"Enjoy faster responses, more advanced reasoning, higher file upload limits, and expanded image generation  all free for the next 30 days."},imageText:{id:"FreeTrialUpsellModal.imageText",defaultMessage:"Try Plus, Free"}}),_C=Se({subtitle:{id:"GoFreeTrialUpsellModal.subtitle",defaultMessage:"Enjoy faster responses, higher file upload limits, and expanded image generation with a Go plan  all free for the next 12 months."},imageText:{id:"GoFreeTrialUpsellModal.imageText",defaultMessage:"Try Go, Free"}}),Yoe=R(()=>P(()=>import("./edtxx94txmhqvu0e.js"),__vite__mapDeps([36,1])),{loading:t=>F(t)}),Zoe=R(()=>P(()=>import("./on6zjr1bjw5z2d08.js"),__vite__mapDeps([37,1])),{loading:t=>F(t)}),Koe="https://persistent.oaistatic.com/chatgpt/google-connectors-nux.jpg",mze=()=>{const t=V(),e=ve(t,"2400167019"),{isLoading:n,eligible:s}=lt(Oe.hasSeenGoogleConnectorsNuxModal);return e?n?"loading":s?"show":"hide":"hide"};function gze({onClose:t}){const e=V();_.useEffect(()=>{B.logEventWithStatsig("Google Connectors Nux Modal Shown","chatgpt_google_connectors_nux_modal_shown"),B.logUpsellOrModalEvent(dn,{eventId:"google_connectors_nux_modal_shown",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);const n=()=>{B.logEventWithStatsig("Google Connectors Nux Modal Dismissed","chatgpt_google_connectors_nux_modal_dismissed"),ot(e,Oe.hasSeenGoogleConnectorsNuxModal),t()},s=at(),o=(l,c,d)=>{B.logEventWithStatsig("Google Connectors Nux Modal Show Me Continued","chatgpt_google_connectors_nux_modal_continued",{target:d}),ot(e,Oe.hasSeenGoogleConnectorsNuxModal),t(),s({pathname:"/",search:"q=".concat(c)})},[a,i]=_.useState(!1);return r.jsxs(Mt,{testId:"modal-google-connectors-nux",isOpen:!0,noPadding:!0,onClose:n,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"flex max-w-[480px] flex-col",children:[r.jsx(xn,{onClick:n,className:"text-token-text-secondary absolute end-0 top-0 z-10 me-2 mt-2 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsx("div",{className:z("h-[224px] w-full transition-opacity duration-200",a?"opacity-100":"opacity-0"),children:r.jsx("img",{src:Koe,draggable:!1,className:"object-cover object-center",alt:"",onLoad:()=>i(!0)})}),r.jsxs("div",{className:"flex flex-col p-8",children:[r.jsx("div",{className:"text-center text-[22px] font-medium",children:r.jsx(j,w({},Lr.title))}),r.jsx("div",{className:"text-token-text-secondary mt-2 text-center",children:r.jsx(j,U(w({},Lr.subtitle),{values:{link:l=>r.jsx("a",{href:Lr.subtitle.link,target:"_blank",rel:"noopener noreferrer",className:"underline",children:l},"learn-more-link")}}))}),r.jsxs("div",{className:"text-token-text-tertiary mt-6 flex items-center gap-2",children:[r.jsx("div",{className:"h-px flex-1 border-t"}),r.jsx(j,w({},Lr.tryItOut)),r.jsx("div",{className:"h-px flex-1 border-t"})]}),r.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[r.jsx(ye,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:l=>o(l,Lr.gmailPrompt.defaultMessage,"gmail"),children:r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[r.jsx(Zoe,{className:"icon-lg"}),r.jsx(j,w({},Lr.gmailPrompt))]})}),r.jsx(ye,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:l=>o(l,Lr.gcalPrompt.defaultMessage,"googleCalendar"),children:r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[r.jsx(Yoe,{className:"icon-lg"}),r.jsx(j,w({},Lr.gcalPrompt))]})})]})]})]})}const Lr=Se({title:{id:"xQB7J6",defaultMessage:"Gmail and Google Calendar, now in chat"},subtitle:{id:"bMcG4Z",defaultMessage:"ChatGPT can now reference your emails and calendar events in responses. <link>Learn more</link>",link:"https://help.openai.com/en/articles/11487775-connectors-in-chatgpt"},tryItOut:{id:"Wkoh8S",defaultMessage:"Try it out"},gmailPrompt:{id:"GoogleConnectorsNuxModal.gmailPrompt",defaultMessage:"Which emails should I reply to?"},gcalPrompt:{id:"GoogleConnectorsNuxModal.googleCalendarPrompt",defaultMessage:"Help me with tomorrow's calendar"}}),Qoe=()=>{const t=V(),e=_.useRef(Joe()),n=!tt(t),s=Pf(),o=HV(),a=n&&o&&!e.current&&!s,i=_.useCallback(()=>{a&&(Xoe(),B.logEventWithStatsig("Meet ChatGPT Modal Shown","chatgpt_meet_chatgpt_modal_shown"))},[a]),l=()=>{B.logEventWithStatsig("Meet ChatGPT Modal Confirmation Button Clicked","chatgpt_meet_chatgpt_modal_confirmation_button_clicked")};return a?{onConfirmationButtonClick:l,onMount:i,state:"show"}:{onConfirmationButtonClick:l,onMount:i,state:"hide"}};function Joe(){return!!localStorage.getItem(Ue.HasSeenMeetChatGptModal)}function Xoe(){return localStorage.setItem(Ue.HasSeenMeetChatGptModal,"true")}const pze=({onClose:t})=>{const e=V(),{onConfirmationButtonClick:n,onMount:s,state:o}=Qoe(),a=wT(e)?xC.trainingDisclaimer:xC.safetyAndAbuseDisclaimer;return _.useEffect(s,[s]),o!=="show"?null:r.jsx(Mt,{testId:"modal-meet-chatgpt",isOpen:!0,noPadding:!0,onClose:as,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6 text-center",children:[r.jsx("div",{className:"-mt-5 -mb-4 self-center",children:r.jsx(kT,{})}),r.jsx("div",{className:"mb-2 text-2xl font-medium",children:r.jsx(j,{id:"fnY8gE",defaultMessage:"Meet ChatGPT"})}),r.jsx("div",{className:"text-token-text-secondary mb-6",children:r.jsx(j,{id:"OdX5ix",defaultMessage:"AI that can help with brainstorming, researching, planning, and more. Just ask."})}),r.jsx(ye,{color:"primary",size:"large",className:"mb-4",onClick:()=>{n(),t()},children:r.jsx(j,w({},gt.gotItButtonText))}),r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(j,U(w({},a),{values:{learnMoreLink:i=>r.jsx("a",{className:"underline",href:"https://help.openai.com/en/articles/9737562",rel:"noreferrer",target:"_blank",children:i})}}))})]})})},xC=Se({trainingDisclaimer:{id:"hebnC4",defaultMessage:"Chats may be reviewed and used to train our models. You can opt out in settings. <learnMoreLink>Learn more</learnMoreLink>"},safetyAndAbuseDisclaimer:{id:"KpKqVi",defaultMessage:"Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"}});function ub(){var n;const{data:t}=_h(),e=(n=t==null?void 0:t.settings)==null?void 0:n.amphora_locks;return typeof e=="object"&&e!=null?e:void 0}const eae="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",tae="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",nae="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47";function hze(){const[t,e]=_.useState("loading"),n=An(mn),s=g1(),{eligible:o,isLoading:a}=lt(Oe.hasSeenMoonshineNuxV2);return _.useEffect(()=>{if(n){t!=="hide"&&e("hide");return}t==="loading"&&!a&&e(!s||!o?"hide":"show")},[t,a,s,o,n]),t}function _ze({onClose:t}){const e=V(),s=Xo()?tae:eae,[o,a]=_.useState(!1);_.useEffect(()=>{o||(ot(e,Oe.hasSeenMoonshineNuxV2),a(!0),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Shown","chatgpt_moonshine_nux_v2_modal_shown"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_shown"),B.logUpsellOrModalEvent(dn,{eventId:"moonshine_nux_v2_modal_shown",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL}))},[e,o]);const[i,l]=_.useState(!1);_.useEffect(()=>{const A=new Image;A.src=s,A.onload=()=>l(!0)},[s]);const[c,d]=_.useState(!1),[u,f]=_.useState(!1);_.useEffect(()=>{if(!i)return;const A=setTimeout(()=>{d(!0)},200),I=setTimeout(()=>{f(!0)},300);return()=>{clearTimeout(A),clearTimeout(I)}},[i]);const m=()=>{window.open(nae,"_blank","noopener noreferrer"),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Learn More Clicked","chatgpt_moonshine_nux_v2_modal_learn_more_clicked"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_learn_more_clicked")},g=at(),p=ve(e,"1542198993"),h=wl(),x=ub(),[v,y]=_.useState(!1),b=rs(e,"3934129380"),C=sae.describeMePrompt.defaultMessage,S=b.get("model","gpt-4o"),E=st(e),k=E==null?void 0:E.hasPlusFeatures(),T=()=>{v||(y(!0),t(),g({pathname:"/",search:"?q=".concat(C,"&model=").concat(S,"&skip_instant_query=1&hints=").concat(Pe.Moonshine)}),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Show Me Clicked","chatgpt_moonshine_nux_v2_modal_show_me_clicked"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_show_me_clicked"))},M=()=>{h.mutate({setting:Lt.Moonshine,value:!0},{onSettled:()=>{t()}}),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Enable Clicked","chatgpt_moonshine_nux_v2_modal_enable_clicked"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_enable_clicked")};return i?r.jsxs(Mt,{testId:"modal-moonshine-nux-v2",isOpen:!0,noPadding:!0,onClose:()=>{t(),B.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Closed","chatgpt_moonshine_nux_v2_modal_closed"),Ie.count(je.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(xn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(c?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"MoonshineNuxV2Modal.firstBubble",defaultMessage:"Hey ChatGPT!"})}),r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(u?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"MoonshineNuxV2Modal.secondBubble",defaultMessage:"Describe me based on our chats"})})]})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:r.jsx(j,{id:"MoonshineNuxV2Modal.title",defaultMessage:"Introducing new, improved memory"})}),r.jsx("div",{className:"text-token-text-secondary w-full",children:p?k?r.jsx(j,{id:"MoonshineNuxV2Modal.subtitleDefaultOff",defaultMessage:"ChatGPT can now remember more of your past chats to better personalize its responses. Want to change what it knows about you? Just ask."}):r.jsx(j,{id:"MoonshineNuxV2Modal.subtitleDefaultOff.freeMoonshine",defaultMessage:"ChatGPT can now remember your recent chats to better personalize its responses. Want to change what it knows about you? Just ask."}):k?r.jsx(j,{id:"MoonshineNuxV2Modal.subtitle",defaultMessage:"ChatGPT can now remember more of your past chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."}):r.jsx(j,{id:"MoonshineNuxV2Modal.subtitle.freeMoonshine",defaultMessage:"ChatGPT now remembers your recent chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."})}),r.jsxs("div",{className:"mt-4 flex w-full items-center justify-between",children:[r.jsx(ye,{color:"secondary",onClick:m,children:r.jsx(j,{id:"MoonshineNuxV2Modal.learnMoreButton",defaultMessage:"Learn more"})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(ye,{color:"secondary",onClick:t,children:r.jsx(j,{id:"MoonshineNuxV2Modal.notNowButton",defaultMessage:"Not now"})}),p?r.jsx(ye,{color:"secondary",onClick:M,disabled:(x==null?void 0:x[Lt.Moonshine])===!0,children:r.jsx(j,{id:"MoonshineNuxV2Modal.enableButton",defaultMessage:"Enable"})}):r.jsx(ye,{color:"primary",onClick:T,children:r.jsx(j,{id:"MoonshineNuxV2Modal.showMeButton",defaultMessage:"Show me"})})]})]})]})]}):null}const sae=Se({describeMePrompt:{id:"MoonshineNuxV2Modal.describeMePrompt",defaultMessage:"Describe me based on all our chats  make it catchy!"}});function $l(t){return ze(t,"3637408529").get("is_login_primary_button",!1)}const oae=t=>ze(t,"1346366956").get("signup_cta_copy","SIGN_UP"),aae=t=>ze(t,"1803944755").get("login_or_signup_cta_copy","LOGIN_OR_SIGNUP"),xze=t=>{switch(aae(t)){case"LOGIN_OR_SIGNUP":return yC.loginOrSignup;case"SIGNIN":return yC.signin}},Bd=(t,e)=>{switch(oae(t)){case"SIGN_UP":return e;case"SIGN_UP_FOR_FREE":return Sc.signUpForFreeCta;case"CREATE_ACCOUNT":return Sc.createAccountCta;case"CREATE_NEW_ACCOUNT":return Sc.createNewAccountCta;case"CREATE_FREE_ACCOUNT":return Sc.createFreeAccountCta}},yC=Se({loginOrSignup:{id:"loginOrSignupCta.loginOrSignup",defaultMessage:"Log in or sign up"},signin:{id:"loginOrSignupCta.signin",defaultMessage:"Sign in"}}),Sc=Se({createAccountCta:{id:"createAccountCta",defaultMessage:"Create account"},createNewAccountCta:{id:"createNewAccountCta",defaultMessage:"Create new account"},createFreeAccountCta:{id:"createFreeAccountCta",defaultMessage:"Create free account"},signUpForFreeCta:{id:"signUpForFreeCta",defaultMessage:"Sign up for free"}}),rae="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",Oj=()=>ki(Ue.HasSeenNoAuthImagegenNux,!1,h1),yze=()=>{const t=V(),e=!tt(t),n=Pf(),[s]=Oj(),o=i3(),a=ze(t,"2118136551");return!e||n||s||o?"hide":a.get("should_show_imagegen_nux",!1)?"show":"hide"},vze=({onClose:t})=>{const n=Cd()?"center":"bottom",s=V(),[o,a]=_.useState(!1),i=rs(s,"2604379743").value,l=typeof i.nux_video_url=="string"?i.nux_video_url:rae,c=typeof i.nux_image_url=="string"?i.nux_image_url:"",[,d]=Oj(),u=()=>{d(!0),_t.setItem(Ue.HasSeenNoAuthImagegenNux,!0)},f=$l(s),g=ze(s,"2118136551").get("sign_up_button_has_the_word_free",!0),p=Bd(s,g?Sc.signUpForFreeCta:gt.signUpButtonText),h=r.jsx(ye,{as:"button",size:"large",color:f?"secondary":"primary",onClick:()=>{u(),Zt(s,{fallbackScreenHint:"signup",callback:y=>{B.logSignUpButtonClicked({provider:y,location:"No Auth Imagegen Nux Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},fullWidth:!0,children:r.jsx(j,w({},p))}),x=r.jsx(ye,{as:"button",size:"large",color:f?"primary":"secondary",fullWidth:!0,onClick:()=>{u(),Zt(s,{fallbackScreenHint:"login",callback:y=>{B.logLogInButtonClicked({provider:y,location:"No Auth Imagegen Nux Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},children:r.jsx(j,w({},gt.logInButtonText))}),v=()=>{t(),u(),B.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_dismissed","chatgpt_no_auth_imagegen_nux_modal_dismissed")};return _.useEffect(()=>{B.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_shown","chatgpt_no_auth_imagegen_nux_modal_shown")},[]),r.jsxs(Mt,{testId:"modal-no-auth-imagegen-nux",isOpen:!0,noPadding:!0,onClose:v,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",position:n,children:[r.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!o&&r.jsx("img",{src:c,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),r.jsx("video",{src:l,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>a(!0)}),r.jsx("div",{className:"absolute end-4 top-4",children:r.jsx(xn,{onClick:v})})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-8 text-center",children:[r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,{id:"OxVK72",defaultMessage:"Bring your ideas to life with images"})}),r.jsx("div",{className:"text-token-text-secondary w-full",children:r.jsx(j,{id:"bVWvdX",defaultMessage:"Create a free account to make illustrations, charts, comics, and more."})}),r.jsx("div",{className:"mt-4 mb-2 flex w-full flex-col gap-3",children:f?[x,h]:[h,x]}),r.jsx(ye,{color:"ghost",className:"text-token-text-secondary font-semibold underline hover:bg-transparent",onClick:v,children:r.jsx(j,w({},gt.stayLoggedOut))})]})]})},iae=()=>{"use forget";const t=W.c(8),[e]=Us(),n=e.get(CT.NoAuthPlan);let s;e:switch(n){case Im.Business:{s="Business";break e}case Im.Go:{s="Go";break e}case Im.Plus:{s="Plus";break e}case Im.Pro:{s="Pro";break e}default:s=""}const o=s,a=V();let i;t[0]!==a?(i=tt(a),t[0]=a,t[1]=i):i=t[1];const c=!!(!i&&o);let d;t[2]!==c?(d=()=>{c&&B.logEventWithStatsig("No Auth Plan Upsell Modal Shown","chatgpt_no_auth_plan_upsell_shown")},t[2]=c,t[3]=d):d=t[3];const u=d,f=lae;let m;return t[4]!==c||t[5]!==u||t[6]!==o?(m={isOpen:c,onClose:f,onMount:u,planType:o},t[4]=c,t[5]=u,t[6]=o,t[7]=m):m=t[7],m},bze=t=>{"use forget";const e=W.c(31),{onClose:n}=t,s=V(),{onMount:o,onClose:a,planType:i}=iae(),[l,c]=_.useState(!1),d=i==="Business"?"business":"personal",u="/?default_tab=".concat(d,"#pricing");let f;e[0]!==s?(f=$l(s),e[0]=s,e[1]=f):f=e[1];const m=f;Lj(o);let g;e[2]!==u||e[3]!==s||e[4]!==m?(g=function(){c(!0),Zt(s,{callbackUrl:u,fallbackScreenHint:m?"login":"signup",callback:I=>{m?B.logLogInButtonClicked({location:"No Auth Plan Upsell Modal",provider:I},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PLAN_UPSELL_MODAL):B.logSignUpButtonClicked({location:"No Auth Plan Upsell Modal",provider:I},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PLAN_UPSELL_MODAL),c(!1)},skipLoginModal:!1})},e[2]=u,e[3]=s,e[4]=m,e[5]=g):g=e[5];const p=g;let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:lb.src,loading:"eager",fetchPriority:"high"}),e[6]=h):h=e[6];let x;e[7]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("h2",{className:"mb-1 text-center text-xl font-semibold",children:r.jsx(j,w({},$_.title))}),e[7]=x):x=e[7];let v;e[8]!==i?(v=r.jsx("p",{className:"text-token-text-default-secondary text-gray-solid-500 mb-6 text-center",children:r.jsx(j,U(w({},$_.subtitle),{values:{planType:i}}))}),e[8]=i,e[9]=v):v=e[9];let y;e[10]!==n||e[11]!==a?(y=()=>{n(),a()},e[10]=n,e[11]=a,e[12]=y):y=e[12];let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(j,w({},gt.maybeLater)),e[13]=b):b=e[13];let C;e[14]!==y?(C=r.jsx(ye,{size:"large",color:"secondary",onClick:y,className:"w-full focus-visible:outline-none md:w-auto",children:b}),e[14]=y,e[15]=C):C=e[15];let S;e[16]!==l||e[17]!==i?(S=l?r.jsx(ws,{}):r.jsx(j,U(w({},$_.primaryButton),{values:{planType:i}})),e[16]=l,e[17]=i,e[18]=S):S=e[18];let E;e[19]!==p||e[20]!==S?(E=r.jsx(ye,{size:"large",color:"primary",onClick:p,className:"w-full min-w-[130px] md:w-auto",children:S}),e[19]=p,e[20]=S,e[21]=E):E=e[21];let k;e[22]!==E||e[23]!==C?(k=r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[C,E]}),e[22]=E,e[23]=C,e[24]=k):k=e[24];let T;e[25]!==k||e[26]!==v?(T=r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[x,v,k]}),e[25]=k,e[26]=v,e[27]=T):T=e[27];let M;return e[28]!==n||e[29]!==T?(M=r.jsxs(Mt,{testId:"modal-no-auth-go-upsell",isOpen:!0,onClose:n,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[h,T]}),e[28]=n,e[29]=T,e[30]=M):M=e[30],M},$_=Se({title:{id:"NoAuthGoUpsellModal.title",defaultMessage:"Unlock more of ChatGPT"},subtitle:{id:"NoAuthGoUpsellModal.subtitle",defaultMessage:"Upgrade to ChatGPT {planType} for extra messaging, uploads, and memory to keep your conversations going"},primaryButton:{id:"NoAuthGoUpsellModal.primaryButton",defaultMessage:"Upgrade to {planType}"}});function lae(){B.logEventWithStatsig("No Auth Plan Upsell Modal Dismissed","chatgpt_no_auth_plan_upsell_dismissed")}function Dj(){const[t]=Us();return t.get("promoCode")}const Cze=({onClose:t})=>{const e=V(),n=Cd(),s=Bd(e,gt.signUpButtonText),o=n?"center":"bottom",a=Dj();if(_.useEffect(()=>{a?B.logEventWithStatsig("No Auth Promo Redemption Modal Shown","chatgpt_no_auth_promo_redemption_modal_shown",{promoCode:a}):console.warn("Mounted NoAuthPromoRedemptionModal without a valid promo code")},[a]),!a)return null;const i="/p/".concat(a);return r.jsx(Mt,{testId:"modal-no-auth-promo-redemption",isOpen:!0,onClose:as,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:o,children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[r.jsx("p",{className:"mb-6 text-center text-2xl font-semibold",children:r.jsx(j,w({},vC.title))}),r.jsx(ye,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3",onClick:()=>{Zt(e,{fallbackScreenHint:"login",callback:l=>{B.logLogInButtonClicked({provider:l,location:"No Auth Promo Redemption Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)},callbackUrl:i,skipLoginModal:!1})},children:r.jsx(j,w({},gt.logInButtonText))}),r.jsx(ye,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{Zt(e,{fallbackScreenHint:"signup",callback:l=>{B.logSignUpButtonClicked({provider:l,location:"No Auth Promo Redemption Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)},callbackUrl:i,skipLoginModal:!1})},children:r.jsx(j,w({},s))}),r.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:l=>{l.preventDefault(),B.logEventWithStatsig("No Auth Promo Redemption Modal Dismissed","chatgpt_no_auth_promo_redemption_modal_dismissed",{promoCode:a}),t()},children:r.jsx(j,w({},vC.stayLoggedOutLink))})]})})},vC=Se({title:{id:"NoAuthPromoRedemptionModal.title",defaultMessage:"Log in or sign up to redeem your promotion"},stayLoggedOutLink:{id:"NoAuthPromoRedemptionModal.stayLoggedOut",defaultMessage:"Stay logged out"}});function Sze(){const t=V(),e=!tt(t),n=Dj();return Z2(()=>ET(t))?{isOpen:!1}:{isOpen:n!=null&&e}}const wze=R(()=>P(()=>import("./ez64jdn8rx3tl0g9.js"),__vite__mapDeps([38,1,10,11,39,40,41,42,43,44,45,46])).then(t=>t.NoAuthWelcomeBackModal)),cae=({dismissLink:t,onLogInButtonClick:e,onSignUpButtonClick:n,subtitle:s,title:o})=>{const a=V(),l=Cd()?"center":"bottom",c=$l(a),u=ze(a,"2118136551").get("sign_up_button_has_the_word_free",!0),f=Bd(a,u?Sc.signUpForFreeCta:bC.signUpCta),m=r.jsx(ye,{as:"button",size:"large",color:c?"secondary":"primary",onClick:n,fullWidth:!0,children:r.jsx(j,w({},f))}),g=r.jsx(ye,{as:"button",size:"large",color:c?"primary":"secondary",fullWidth:!0,onClick:e,children:r.jsx(j,w({},bC.logInCta))}),p=c?[g,m]:[m,g];return r.jsx(Mt,{testId:"modal-no-auth-rate-limit",isOpen:!0,onClose:as,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:l,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:px-10 sm:pt-12 sm:pb-10",children:[r.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:r.jsx(j,w({},o))}),r.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:r.jsx(j,w({},s))}),r.jsx("div",{className:"flex w-full flex-col gap-2 sm:gap-2.5",children:p}),t?r.jsx("a",{href:"#",className:"text-token-text-secondary mt-5 cursor-pointer text-sm font-semibold underline",onClick:h=>{h.preventDefault(),t.onClick()},children:r.jsx(j,w({},t.text))}):null]})})},bC=Se({signUpCta:{id:"NoAuthModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthModal.logInCta",defaultMessage:"Log in"}}),dae=10,uae=({type:t="default"}={})=>{const e=V(),s=ze(e,"3637408529").get("no_auth_soft_rate_limit",dae),[o,a]=_.useState(()=>sessionStorage.getItem(Ue.NoAuthHasDismissedSoftRateLimitModal)!=null),i=!tt(e),l=Pf(),c=zh(AM),d=_.useRef(c),u=c>=s,[f,m]=_.useState(!1);_.useEffect(()=>{d.current<c&&(d.current=c,c===s&&m(!0))},[c,s]);const g=vh(),p=i&&u&&(t==="default"||f)&&!o&&!l&&!g,h=_.useCallback(()=>{p&&(B.logEvent("No Auth Soft Rate Limit Modal Shown"),qe.logEvent("chatgpt_no_auth_soft_rate_limit_modal_shown"))},[p]);return{isOpen:p,onClose:()=>{a(!0),sessionStorage.setItem(Ue.NoAuthHasDismissedSoftRateLimitModal,"true")},onMount:h}},kze=({onClose:t})=>{const e=V(),n=$l(e),{isOpen:s,onClose:o,onMount:a}=uae();return _.useEffect(()=>{a==null||a()},[a]),s?r.jsx(cae,{dismissLink:{text:tg.stayLoggedOutLink,onClick:()=>{B.logEvent("No Auth Soft Rate Limit Modal Stay Logged out Link Clicked"),qe.logEvent("chatgpt_no_auth_soft_rate_limit_modal_stay_logged_out_link_clicked"),t(),o()}},onLogInButtonClick:()=>{Zt(e,{fallbackScreenHint:"login",callback:i=>{B.logLogInButtonClicked({provider:i,location:"No Auth Soft Rate Limit Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)},skipLoginModal:!1})},onSignUpButtonClick:()=>{Zt(e,{fallbackScreenHint:"signup",callback:i=>{B.logSignUpButtonClicked({provider:i,location:"No Auth Soft Rate Limit Modal"},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)},skipLoginModal:!1})},subtitle:n?tg.logInSubtitle:tg.signUpSubtitle,title:tg.title}):null},tg=Se({title:{id:"NoAuthSoftRateLimitModal.title",defaultMessage:"Thanks for trying ChatGPT"},signUpSubtitle:{id:"zpngdW",defaultMessage:"Sign up or log in to get smarter responses, upload files and images, and more."},logInSubtitle:{id:"iVew+I",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),fae=3600*24*30*12;function mae(){var l;const{isLoading:t,data:e}=rt(GV),n=_.useRef(gae()),s=(l=e==null?void 0:e.email)!=null?l:null,o=_.useCallback(()=>{n.current&&e?B.logEventWithStatsig("Punch Out Anon To Authed Modal Shown","chatgpt_punch_out_anon_to_authed_modal_shown"):console.warn("PunchOutAnonToAuthedModal is being mounted without a user and a token")},[e]),a=c=>{B.logEventWithStatsig("Punch Out Anon To Authed Modal Continue Button Clicked","chatgpt_punch_out_anon_to_authed_modal_continue_button_clicked"),CC(),pae(),window.location.href="/continue_from_api?token=".concat(c)},i=()=>{CC(),B.logEventWithStatsig("Punch Out Anon To Authed Modal Cancel Button Clicked","chatgpt_punch_out_anon_to_authed_modal_cancel_button_clicked")};return t?{email:null,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"loading",token:null}:n.current&&s?{email:s,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"show",token:n.current}:{email:null,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"hide",token:null}}function gae(){var t;return(t=gs.getCookie(ps.PunchOutRequireAnonToAuthedToken))!=null?t:null}function CC(){return gs.deleteCookie(ps.PunchOutRequireAnonToAuthedToken)}function pae(){gs.setCookie(ps.PunchOutAnonToAuthedEnabled,"true",{maxAge:fae})}const Eze=({onClose:t})=>{const{onCancelButtonClick:e,onContinueButtonClick:n,onMount:s,token:o,email:a,state:i}=mae(),c=Sr()?"medium":"large";return _.useEffect(s,[s]),i!=="show"?null:r.jsx(Mt,{testId:"modal-punch-out-anon-to-authed",isOpen:!0,noPadding:!0,onClose:as,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6",children:[r.jsx("div",{className:"mb-2 text-center text-xl font-medium md:text-start",children:r.jsx(j,{id:"qAel0I",defaultMessage:"Always open in ChatGPT?"})}),r.jsx("div",{className:"text-token-text-secondary mb-6 text-center md:text-start",children:r.jsx(j,{id:"9Pb+Og",defaultMessage:"Chats you open from Siri will be saved in your account <emailContainer>({email})</emailContainer>.",values:{emailContainer:d=>r.jsx("span",{className:"font-medium",children:d}),email:a}})}),r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[r.jsx(ye,{color:"primary",size:c,onClick:()=>n(o),children:r.jsx(j,w({},gt.continueButtonText))}),r.jsx(ye,{color:"secondary",size:c,onClick:()=>{e(),t()},children:r.jsx(j,w({},gt.cancelButtonText))})]})]})})};function Tze(t){return ze(t,"3233347819").get("is_signup_text_updated",!1)}function Za(t){return ze(t,"3233347819").get("is_login_modal_phase2_enabled",!1)&&!Sd()}function hae(){const t=_.useRef(_ae()),e=V(),n=_.useCallback(()=>{t.current?B.logEventWithStatsig("No Auth Punch Out Sign In As Modal Shown","chatgpt_no_auth_punch_out_sign_in_as_modal_shown"):console.warn("PunchOutSignInAsModal is being mounted without punchOutRequireLoginInfo")},[]);return{onCancelButtonClick:()=>{B.logEventWithStatsig("No Auth Punch Out Sign In As Modal Cancel Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_cancel_button_clicked"),Cx()},onContinueButtonClick:({token:a})=>{B.logEventWithStatsig("No Auth Punch Out Sign In As Modal Continue Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_continue_button_clicked"),Cx(),Zt(e,{fallbackScreenHint:"login",callback:i=>{B.logLogInButtonClicked({location:"No Auth Punch Out Sign In As Modal",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PUNCH_OUT_SIGN_IN_AS_MODAL)},callbackUrl:"/continue_from_api?token=".concat(a),skipLoginModal:!Za(e)})},onMount:n,punchOutRequireLoginInfo:t.current}}function _ae(){if(typeof window>"u")return null;const t=gs.getCookie(ps.PunchOutRequireLoginInfo);if(!t)return null;try{const e=JSON.parse(t);return WV(e,zV),e}catch(e){Cx(),e instanceof qV?console.warn("Invalid struct for punch out require login info",e):Fe.addError("Failed to parse punch out require login info",{error:e})}return null}function Cx(){gs.deleteCookie(ps.PunchOutRequireLoginInfo)}const Mze=({onClose:t})=>{const{onCancelButtonClick:e,onContinueButtonClick:n,onMount:s,punchOutRequireLoginInfo:o}=hae(),i=Sr()?"medium":"large";if(_.useEffect(s,[s]),!o)return null;const{email:l}=o;return r.jsx(Mt,{testId:"modal-punch-out-sign-in-as",isOpen:!0,noPadding:!0,onClose:as,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6",children:[r.jsx("div",{className:"mb-6 text-center text-xl font-medium md:text-start",children:r.jsx(j,{id:"0e8g2r",defaultMessage:"Sign in as {email}?",values:{email:l}})}),r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[r.jsx(ye,{color:"primary",size:i,onClick:()=>n(o),children:r.jsx(j,w({},gt.continueButtonText))}),r.jsx(ye,{color:"secondary",size:i,onClick:()=>{e(),t()},children:r.jsx(j,w({},gt.cancelButtonText))})]})]})})};function _1(t){"use forget";var m;const e=W.c(7),{lightLogoUrl:n,darkLogoUrl:s,enabled:o}=t,a=o===void 0?!0:o,l=(m=Xo()?s!=null?s:n:n!=null?n:s)!=null?m:null;let c,d;e[0]!==l?(c=["connector-logo",l],d=()=>xae(l),e[0]=l,e[1]=c,e[2]=d):(c=e[1],d=e[2]);const u=a&&!!l;let f;return e[3]!==c||e[4]!==d||e[5]!==u?(f={queryKey:c,queryFn:d,enabled:u},e[3]=c,e[4]=d,e[5]=u,e[6]=f):f=e[6],rt(f)}async function xae(t){var e;if(t!=null&&t.startsWith("connectors://")){const n=new URL(t),s=n.hostname,o=(e=n.searchParams.get("theme"))!=null?e:"light",a=await ge.safeGet("/aip/connectors/{connector_id}/logo",{parameters:{path:{connector_id:s},query:{theme:o}},skipJsonTransform:!0});if(!a.ok)throw new Error("Failed to get connector logo: ".concat(await a.text()));const i=await a.blob();return{url:URL.createObjectURL(i),text:await i.text()}}return{url:t}}const yae=R(()=>P(()=>import("./chuo6dbwu6l4alpy.js"),__vite__mapDeps([47,1])),{loading:t=>F(t)}),vae=R(()=>P(()=>import("./g8w55akbfgixybwv.js"),__vite__mapDeps([48,1])),{loading:t=>F(t)}),bae=R(()=>P(()=>import("./8yatsd42k1ox8n2w.js"),__vite__mapDeps([24,1])),{loading:t=>F(t)}),Cae=R(()=>P(()=>import("./nzc19yp45z5gjstv.js"),__vite__mapDeps([49,1])),{loading:t=>F(t)}),Sae=R(()=>P(()=>Promise.resolve().then(()=>xm),void 0),{loading:t=>F(t)}),wae=R(()=>P(()=>Promise.resolve().then(()=>Ir),void 0),{loading:t=>F(t)}),Fj=R(()=>P(()=>Promise.resolve().then(()=>um),void 0),{loading:t=>F(t)}),kae=R(()=>P(()=>Promise.resolve().then(()=>$1),void 0),{loading:t=>F(t)}),Eae=R(()=>P(()=>import("./mdnk8dee8jm04405.js"),__vite__mapDeps([50,1])),{loading:t=>F(t)}),fl=t=>{"use forget";var h,x,v,y,b;const e=W.c(29);let n,s,o;e[0]!==t?(h=t,{hint:n,isNextToLabel:s}=h,o=we(h,["hint","isNextToLabel"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o):(n=e[1],s=e[2],o=e[3]);let a;e[4]!==n?(a=Tae(n),e[4]=n,e[5]=a):a=e[5];const i=a,l=i&&(x=n.connectorLogoUrl)!=null?x:null,c=i&&(v=n.connectorLogoUrlDark)!=null?v:null,d=n.isConnector&&i;let u;e[6]!==l||e[7]!==c||e[8]!==d?(u={lightLogoUrl:l,darkLogoUrl:c,enabled:d},e[6]=l,e[7]=c,e[8]=d,e[9]=u):u=e[9];const f=_1(u);if(n.isConnector){if((y=f.data)!=null&&y.url){const E=(b=f.data)==null?void 0:b.url,k=s?"":n.name;let T;return e[10]!==o||e[11]!==E||e[12]!==k?(T=r.jsx("img",w({src:E,alt:k,className:"icon"},o)),e[10]=o,e[11]=E,e[12]=k,e[13]=T):T=e[13],T}if(n.logo&&!f.isLoading){const E=s?"":n.name;let k;return e[14]!==n.logo||e[15]!==o||e[16]!==E?(k=r.jsx(Ju,w({svgString:n.logo,className:"icon","aria-label":E},o)),e[14]=n.logo,e[15]=o,e[16]=E,e[17]=k):k=e[17],k}const C=s?"":n.name;let S;return e[18]!==o||e[19]!==C?(S=r.jsx(Fj,w({className:"icon","aria-label":C},o)),e[18]=o,e[19]=C,e[20]=S):S=e[20],S}let m;e[21]!==n.systemHint?(m=Rg(n.systemHint),e[21]=n.systemHint,e[22]=m):m=e[22];const g=m;let p;return e[23]!==g||e[24]!==n.logo||e[25]!==n.name||e[26]!==s||e[27]!==o?(p=g?r.jsx(g,w({className:"icon","aria-label":s?"":n.name},o)):r.jsx(Ju,w({svgString:n.logo,className:"icon","aria-label":s?"":n.name},o)),e[23]=g,e[24]=n.logo,e[25]=n.name,e[26]=s,e[27]=o,e[28]=p):p=e[28],p};function Rg(t){switch(t){case Pe.Search:return wae;case Pe.Think:return Cae;case Pe.Research:return yae;case Pe.Canvas:return bae;case Pe.Picture:case Pe.PictureV2:return Sae;case Pe.Video:return vae;case Pe.Slurm:case Pe.ApiTool:return Fj;case Pe.Agent:return Eae;case Pe.Tatertot:return kae;default:return}}function Tae(t){return"connectorLogoUrl"in t||"connectorLogoUrlDark"in t}const Mae=R(()=>P(()=>import("./k6qwgpluf8n5kx7i.js"),__vite__mapDeps([51,1])),{loading:t=>F(t)}),Aae=R(()=>P(()=>Promise.resolve().then(()=>vm),void 0),{loading:t=>F(t)}),Iae=R(()=>P(()=>import("./ei2rr3u86wwo8xvm.js"),__vite__mapDeps([52,1])),{loading:t=>F(t)}),jae=R(()=>P(()=>import("./f89umoqrdveizlz7.js"),__vite__mapDeps([53,1])),{loading:t=>F(t)}),Nae=R(()=>P(()=>Promise.resolve().then(()=>xm),void 0),{loading:t=>F(t)}),Pae=R(()=>P(()=>Promise.resolve().then(()=>Ir),void 0),{loading:t=>F(t)}),Rae=R(()=>P(()=>import("./kaw18xu9jo85v1g9.js"),__vite__mapDeps([26,1])),{loading:t=>F(t)}),Lae=R(()=>P(()=>Promise.resolve().then(()=>$1),void 0),{loading:t=>F(t)}),Oae="https://persistent.oaistatic.com/chatgpt/NUX_StudyMode_16x9.png",Aze=()=>{const{eligible:t,isLoading:e}=lt(Oe.hasSeenTatertotNux),n=V();return!(!ve(n,"1586944302")&&ve(n,"2342247883"))||!l3(n)?"hide":e?"loading":t?"show":"hide"};function Ize({onClose:t}){var y,b,C;const e=V(),n=re(()=>Mo(e)),s=Oae,o=ne(),a=_.useRef(!1),[i,l]=_.useState(!1);_.useEffect(()=>{const S=new Image;S.src=s,S.onload=()=>l(!0)},[s]),_.useEffect(()=>{!i||a.current||(a.current=!0,Ie.count(je.TATERTOT,"tatertot_nux_modal_v2_shown"),B.logEventWithStatsig("Tatertot Nux Modal V2 Shown","chatgpt_tatertot_nux_modal_v2_shown"))},[i]);const c=at(),d=_.useMemo(()=>n?Object.fromEntries(n.map(S=>[S.systemHint,S])):{},[n]),u=d[Pe.PictureV2],f=d[Pe.Search],m=d[Pe.Tatertot],g=$s(),[p,h]=_.useState(!1),x=_.useCallback(()=>{ot(e,Oe.hasSeenTatertotNux),t(),Ie.count(je.TATERTOT,"tatertot_nux_modal_v2_closed"),B.logEventWithStatsig("Tatertot Nux Modal V2 Closed","chatgpt_tatertot_nux_modal_v2_closed")},[e,t]),v=_.useCallback(()=>{p||(h(!0),ot(e,Oe.hasSeenTatertotNux),t(),c({pathname:"/",search:"?hints=".concat(c3)}),g(Pe.Tatertot),Ie.count(je.TATERTOT,"tatertot_nux_modal_v2_show_me_clicked"),B.logEventWithStatsig("Tatertot Nux Modal V2 Show Me Clicked","chatgpt_tatertot_nux_modal_v2_show_me_clicked"))},[e,c,t,p,g]);return i?r.jsxs(Mt,{testId:"modal-tatertot-nux",isOpen:!0,noPadding:!0,onClose:x,showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(xn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:x})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[232px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-start justify-center",children:r.jsxs("div",{className:"relative mx-auto w-full",children:[r.jsx("div",{className:"relative mx-auto mt-6 w-full max-w-[240px]",children:r.jsxs("div",{className:"flex items-center justify-start",children:[r.jsx("div",{className:"me-3 flex h-12 w-12 items-center justify-center rounded-full bg-white/80 drop-shadow-sm",children:r.jsx(Aae,{className:"h-6 w-6 text-black"})}),r.jsx("div",{className:"w-[181px] flex-1 rounded-full bg-white/30 px-5 py-3 text-[17px] backdrop-blur-sm",children:r.jsx("span",{className:"text-black/30",children:o.formatMessage(Oo.placeholderAskAnythingVariant)})})]})}),r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex h-[162px] max-w-full min-w-[240px] -translate-x-1/2 translate-y-44 flex-col items-start justify-end rounded-xl bg-white/80 p-4 drop-shadow-xs backdrop-blur-xs",children:r.jsx("div",{className:"flex h-full w-auto flex-col items-start justify-end",children:r.jsxs("div",{className:"flex h-full w-auto translate-y-3 flex-col items-start justify-end",children:[r.jsx("span",{className:"ms-2 mb-4 flex items-center gap-4 text-[17px] font-medium whitespace-nowrap text-gray-600",children:u?r.jsxs(r.Fragment,{children:[r.jsx(fl,{hint:u,isNextToLabel:!0,className:"h-6 w-6"}),(y=u.actionLabel)!=null?y:u.name]}):r.jsxs(r.Fragment,{children:[r.jsx(Nae,{className:"h-6 w-6 text-gray-600"}),o.formatMessage(wc.createImagePill)]})}),r.jsx("span",{className:"ms-2 mb-2 flex items-center gap-4 text-[17px] font-medium whitespace-nowrap text-gray-600",children:f?r.jsxs(r.Fragment,{children:[r.jsx(fl,{hint:f,isNextToLabel:!0,className:"h-6 w-6"}),(b=f.actionLabel)!=null?b:f.name]}):r.jsxs(r.Fragment,{children:[r.jsx(Pae,{className:"h-6 w-6 text-gray-600"}),o.formatMessage(wc.webSearchPill)]})})]})})}),r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex max-w-full min-w-[264px] -translate-x-1/2 translate-y-21 flex-col items-start",children:r.jsx("div",{className:"flex min-h-[60px] w-auto max-w-full min-w-[264px] items-center justify-center rounded-xl bg-white px-4 py-2 shadow-lg",children:r.jsxs("span",{className:"flex items-center text-[20px] font-medium whitespace-nowrap text-blue-400",children:[m?r.jsxs(r.Fragment,{children:[r.jsx(fl,{hint:m,isNextToLabel:!0,className:"h-7 w-7"}),r.jsx("span",{className:"mx-3.5",children:(C=m.actionLabel)!=null?C:m.name})]}):r.jsxs(r.Fragment,{children:[r.jsx(Lae,{className:"h-7 w-7 text-blue-400"}),r.jsx("span",{className:"mx-3.5",children:o.formatMessage(wc.studyAndLearnPill)})]}),r.jsx(Rae,{className:"ms-3 h-7 w-7 text-blue-400"})]})})})]})})]}),r.jsxs("div",{className:"dark:bg-gray-750 relative z-30 flex flex-1 flex-col items-center gap-6 bg-white px-8 pt-8 pb-8",children:[r.jsx("div",{className:"flex w-80 items-center justify-center text-center text-4xl font-semibold",children:r.jsx(j,{id:"StudyandLearn.learnAnythingTitle",defaultMessage:"Learn anything, step by step"})}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Iae,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.quizFeatureTitle",defaultMessage:"Practice with quizzes"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.quizFeatureDescription",defaultMessage:"Create quizzes and flashcards to test your knowledge."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Mae,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.homeworkFeatureTitle",defaultMessage:"Get homework help"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.homeworkFeatureDescription",defaultMessage:"Break down tough problems with simple, step-by-step guidance."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(jae,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.exploreFeatureTitle",defaultMessage:"Explore new subjects"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.exploreFeatureDescription",defaultMessage:"Dive into anything you're curious about and get quick, clear answers."})})]})]}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4 text-[17px]",children:r.jsx(ye,{color:"primary",onClick:v,size:"large",fullWidth:!0,className:"px-12",children:o.formatMessage(wc.tryItNowButton)})})})]})]}):null}const wc=Se({studyAndLearnTitle:{id:"StudyandLearnNux.title",defaultMessage:"Study and Learn"},studyAndLearnPill:{id:"StudyandLearnNux.studyAndLearnBubble",defaultMessage:"Study and learn"},createImagePill:{id:"StudyandLearnNux.createImagePill",defaultMessage:"Create image"},webSearchPill:{id:"StudyandLearnNux.webSearchPill",defaultMessage:"Web search"},quizQuestion:{id:"StudyandLearnNux.quizQuestion",defaultMessage:'How do you say "bathroom" in Spanish?'},quizAnswer1:{id:"StudyandLearnNux.quizAnswer1",defaultMessage:"bao"},quizAnswer2:{id:"StudyandLearnNux.quizAnswer2",defaultMessage:"calle"},quizAnswer3:{id:"StudyandLearnNux.quizAnswer3",defaultMessage:"cocina"},quizNUXTitle:{id:"StudyandLearnNux.quizNUXTitle",defaultMessage:"Quiz yourself with ChatGPT"},quizNUXDescription:{id:"StudyandLearnNux.quizNUXDescription",defaultMessage:"Quickly create quizzes and flashcards on any topic so you feel exam-ready"},tryItNowButton:{id:"StudyandLearnNux.tryItNowButton",defaultMessage:"Try it now"},notNowButton:{id:"StudyandLearnNux.notNowButton",defaultMessage:"Not now"}}),Sx=R(()=>P(()=>import("./k6qwgpluf8n5kx7i.js"),__vite__mapDeps([51,1])),{loading:t=>F(t)}),Bj=R(()=>P(()=>import("./ei2rr3u86wwo8xvm.js"),__vite__mapDeps([52,1])),{loading:t=>F(t)}),Dae=R(()=>P(()=>import("./f89umoqrdveizlz7.js"),__vite__mapDeps([53,1])),{loading:t=>F(t)}),Fae=R(()=>P(()=>import("./lljm2enx48t0mwrk.js"),__vite__mapDeps([54,1])),{loading:t=>F(t)}),fb="tatertot_create_flashcards_or_quiz",Bae="https://persistent.oaistatic.com/chatgpt/NUX_StudyMode_16x9.png";function Uae({onClose:t}){const e=V(),n=Bae,[s,o]=_.useState(!1);_.useEffect(()=>{s||(ot(e,Oe.hasSeenTatertotNux),o(!0),Ie.count(je.TATERTOT,"tatertot_nux_modal_shown"),B.logEventWithStatsig("Tatertot Nux Modal Shown","chatgpt_tatertot_nux_modal_shown"))},[e,s]);const[a,i]=_.useState(!1);_.useEffect(()=>{const x=new Image;x.src=n,x.onload=()=>i(!0)},[n]);const[l,c]=_.useState(!1),[d,u]=_.useState(!1);_.useEffect(()=>{if(!a)return;const x=setTimeout(()=>{c(!0)},200),v=setTimeout(()=>{u(!0)},300);return()=>{clearTimeout(x),clearTimeout(v)}},[a]);const f=at(),[m,g]=_.useState(!1),p=ne(),h=()=>{m||(g(!0),t(),f({pathname:"/",search:"?hints=".concat(c3)}),Ie.count(je.TATERTOT,"tatertot_nux_modal_show_me_clicked"),B.logEventWithStatsig("Tatertot Nux Modal Show Me Clicked","chatgpt_tatertot_nux_modal_show_me_clicked"))};return a?r.jsxs(Mt,{testId:"modal-tatertot-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),Ie.count(je.TATERTOT,"tatertot_nux_modal_closed"),B.logEventWithStatsig("Tatertot Nux Modal Closed","chatgpt_tatertot_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(xn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:n,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(l?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"StudyandLearnNux.firstBubble",defaultMessage:"Hey Chat!"})}),r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(d?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(j,{id:"StudyandLearnNux.secondBubble",defaultMessage:"Help me with my homework"})})]})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-6 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-center text-[20px] leading-7 font-medium",children:p.formatMessage(wc.studyAndLearnTitle)}),r.jsx("div",{className:"text-token-text-secondary -mt-4 w-full text-center text-[17px]",children:r.jsx(j,{id:"StudyandLearnNux.subtitle",defaultMessage:"Your step-by-step guide to learning anything"})}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Bj,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.featureTitle1",defaultMessage:"Get homework help"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.featureDescription1",defaultMessage:"Break down complex problems with approachable, guided explanations."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Sx,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.featureTitle2",defaultMessage:"Prep for tests"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.featureDescription2",defaultMessage:"Test your knowledge with quizzes on any topic."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(Dae,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(j,{id:"StudyandLearnNux.featureTitle3",defaultMessage:"Explore new subjects"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"StudyandLearnNux.featureDescription3",defaultMessage:"Go deep on any topic and ask any question."})})]})]}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4",children:r.jsx(ye,{color:"primary",onClick:h,size:"large",fullWidth:!0,className:"px-6",children:p.formatMessage(wc.tryItNowButton)})})})]})]}):null}function Uj(t,e){const n=[{type:Je.Autocomplete,id:"tatertot_homework_autocomplete",title:t.formatMessage({id:"8ZR8F6",defaultMessage:"Help me with my homework"}),prompt:t.formatMessage({id:"3Cdh/P",defaultMessage:"Help me with my homework"}),icon:r.jsx(Bj,{className:"h-full w-full"}),body:"",theme:vn.Tatertot},{type:Je.Autocomplete,id:"tatertot_explain_topic",title:t.formatMessage({id:"eOU1s2",defaultMessage:"Explain a topic to me"}),prompt:t.formatMessage({id:"/SVEgw",defaultMessage:"Explain a topic to me"}),icon:r.jsx(Fae,{className:"h-full w-full"}),body:"",theme:vn.Tatertot}];return e?n.push({type:Je.Autocomplete,id:fb,title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"bNSdL3",defaultMessage:"Create a practice quiz with quizgpt"}),icon:r.jsx(Sx,{className:"h-full w-full"}),body:"",theme:vn.Tatertot}):n.push({type:Je.Autocomplete,id:"tatertot_create_quiz",title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"MSsW2T",defaultMessage:"Create a practice quiz"}),icon:r.jsx(Sx,{className:"h-full w-full"}),body:"",theme:vn.Tatertot}),n}const $ae=Object.freeze(Object.defineProperty({__proto__:null,TATERTOT_CREATE_QUIZ_PROMPT_STARTER_ID:fb,TatertotNuxModal:Uae,getTatertotStaticPromptStarters:Uj},Symbol.toStringTag,{value:"Module"})),Vae="https://persistent.oaistatic.com/chatgpt/nux-quiz.jpg",jze=()=>{const{eligible:t,isLoading:e}=lt(Oe.hasSeenTatertotQuizNux),n=V();return!ve(n,"550187082")||!l3(n)?"hide":e?"loading":t?"show":"hide"};function Nze({onClose:t}){const e=V(),n=re(()=>Mo(e)),s=Vae,o=ne(),a=tt(e),l=Uj(o,a).find(x=>x.id===fb),c=_.useRef(!1),[d,u]=_.useState(!1);_.useEffect(()=>{const x=new Image;x.src=s,x.onload=()=>u(!0)},[s]),_.useEffect(()=>{!d||c.current||(c.current=!0,Ie.count(je.TATERTOT,"tatertot_quiz_nux_modal_shown"),B.logEventWithStatsig("Tatertot Quiz Nux Modal Shown","chatgpt_tatertot_quiz_nux_modal_shown"),B.logUpsellOrModalEvent(dn,{eventId:"tatertot_quiz_nux_modal_shown",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL}))},[d]);const f=at();_.useMemo(()=>n?Object.fromEntries(n.map(x=>[x.systemHint,x])):{},[n]);const[m,g]=_.useState(!1),p=_.useCallback(()=>{ot(e,Oe.hasSeenTatertotQuizNux),t(),Ie.count(je.TATERTOT,"tatertot_quiz_nux_modal_closed"),B.logEventWithStatsig("Tatertot Quiz Nux Modal Closed","chatgpt_tatertot_quiz_nux_modal_closed")},[e,t]),h=_.useCallback(()=>{m||(g(!0),ot(e,Oe.hasSeenTatertotQuizNux),t(),f({pathname:"/",search:"?hints=".concat(c3,"&q=").concat(l==null?void 0:l.prompt)}),Ie.count(je.TATERTOT,"tatertot_quiz_nux_modal_show_me_clicked"),B.logEventWithStatsig("Tatertot Quiz Nux Modal Show Me Clicked","chatgpt_tatertot_quiz_nux_modal_show_me_clicked"))},[e,f,t,l==null?void 0:l.prompt,m]);return d?r.jsxs(Mt,{testId:"modal-tatertot-quiz-nux",isOpen:!0,noPadding:!0,onClose:p,showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(xn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:p})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[232px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-start justify-center",children:r.jsx("div",{className:"relative mx-auto w-full",children:r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex h-[200px] max-w-[172px] -translate-x-1/2 translate-y-60 flex-col items-start justify-end rounded-xl bg-white p-4",children:r.jsx("div",{className:"flex h-full w-auto flex-col items-start justify-end",children:r.jsxs("div",{className:"flex h-full w-auto translate-y-2 flex-col items-start justify-end",children:[r.jsx("span",{className:"mb-5 flex items-center gap-4 font-serif text-xl text-[15px] leading-[1.5] font-medium text-black",children:r.jsx(r.Fragment,{children:o.formatMessage(La.quizQuestion)})}),r.jsx("div",{className:"mb-2 flex flex-col gap-2",children:[La.quizAnswer1,La.quizAnswer2,La.quizAnswer3].map((x,v)=>{const y=[La.quizOptionA,La.quizOptionB,La.quizOptionC];return r.jsx(Yn.Fragment,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("label",{className:"flex items-center gap-2 text-[11.5px] text-black",children:[r.jsx("span",{className:"inline-block rounded bg-gray-100 px-1.5 py-0.5 text-[9px] font-medium text-gray-700",children:r.jsx(j,w({},y[v]))}),o.formatMessage(x)]}),r.jsx("div",{className:"ms-6.5 mt-1 h-[0.5px] w-[calc(100%+1.5rem)] bg-gray-200"})]})},x.id||v)})})]})})})})})]}),r.jsxs("div",{className:"dark:bg-gray-750 relative z-30 flex flex-1 flex-col items-center gap-6 bg-white px-8 pt-8 pb-8",children:[r.jsx("div",{className:"flex w-80 items-center justify-center text-center text-4xl font-semibold",children:o.formatMessage(La.quizNUXTitle)}),r.jsx("div",{className:"flex w-full items-center justify-center text-[17px]",children:r.jsx("div",{className:"flex w-90 flex-col items-center",children:r.jsx("div",{className:"text-token-text-secondary text-center",children:o.formatMessage(La.quizNUXDescription)})})}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4 text-[17px]",children:r.jsx(ye,{color:"primary",onClick:h,size:"large",fullWidth:!0,className:"px-12",children:r.jsx(j,{id:"StudyandLearnNux.quizNuxButton",defaultMessage:"Try it"})})})})]})]}):null}const La=Se({studyAndLearnTitle:{id:"StudyandLearnNux.title",defaultMessage:"Study and Learn"},studyAndLearnPill:{id:"StudyandLearnNux.studyAndLearnBubble",defaultMessage:"Study and learn"},createImagePill:{id:"StudyandLearnNux.createImagePill",defaultMessage:"Create image"},webSearchPill:{id:"StudyandLearnNux.webSearchPill",defaultMessage:"Web search"},quizQuestion:{id:"StudyandLearnNux.quizQuestion",defaultMessage:'How do you say "bathroom" in Spanish?'},quizAnswer1:{id:"StudyandLearnNux.quizAnswer1",defaultMessage:"bao"},quizAnswer2:{id:"StudyandLearnNux.quizAnswer2",defaultMessage:"calle"},quizAnswer3:{id:"StudyandLearnNux.quizAnswer3",defaultMessage:"cocina"},quizNUXTitle:{id:"StudyandLearnNux.quizNUXTitle",defaultMessage:"Quiz yourself with ChatGPT"},quizNUXDescription:{id:"StudyandLearnNux.quizNUXDescription",defaultMessage:"Quickly create quizzes and flashcards on any topic so you feel exam-ready"},quizOptionA:{id:"StudyandLearnNux.quizOptionA",defaultMessage:"A"},quizOptionB:{id:"StudyandLearnNux.quizOptionB",defaultMessage:"B"},quizOptionC:{id:"StudyandLearnNux.quizOptionC",defaultMessage:"C"},tryItNowButton:{id:"StudyandLearnNux.tryItNowButton",defaultMessage:"Try it now"},notNowButton:{id:"StudyandLearnNux.notNowButton",defaultMessage:"Not now"}}),$j="has-dismissed-welcome-back-modal",Pze=()=>{"use forget";const t=W.c(18),e=V(),[n,s]=_.useState(Hae);let o;t[0]!==e?(o=ze(e,"3637408529").get("is_no_auth_welcome_back_modal_enabled",!1),t[0]=e,t[1]=o):o=t[1];const a=o,i=TT();let l;t[2]!==e?(l=tt(e),t[2]=e,t[3]=l):l=t[3];const c=!l;let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=Pf(),t[4]=d):d=t[4];const u=d,f=i3();let m;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{s(!0),sessionStorage.setItem($j,"true")},t[5]=m):m=t[5];const g=m;let p;if(t[6]!==e?(p=()=>ET(e),t[6]=e,t[7]=p):p=t[7],re(p)){let y;return t[8]===Symbol.for("react.memo_cache_sentinel")?(y={isOpen:!1,onClose:null},t[8]=y):y=t[8],y}let x;t[9]!==e||t[10]!==n||t[11]!==f||t[12]!==a||t[13]!==i||t[14]!==c?(x=c&&a&&!n&&u&&!i&&!f&&(YV()||!ZV(e)),t[9]=e,t[10]=n,t[11]=f,t[12]=a,t[13]=i,t[14]=c,t[15]=x):x=t[15];let v;return t[16]!==x?(v={isOpen:x,onClose:g},t[16]=x,t[17]=v):v=t[17],v};function Hae(){return sessionStorage.getItem($j)!=null}const Bs=R(()=>P(()=>import("./dc3wx0vhq5cgao26.js").then(t=>t.F),__vite__mapDeps([55,1,56,10,11,13,14,15,16,17,18,19,20,57,21,22,23,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,32,86,87,88,89,90,12,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,45,113,114,115,116,117,118,119,120,121])).then(t=>t.FormattedText));function Gae(){return _.use(Bs.prefetch()),null}function Vj({workspaceId:t,enabled:e=!0}){return rt({queryKey:["workspace-policy",t],queryFn:t?()=>ge.safeGet("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}}}):$y,enabled:!!t&&e})}function Rze(t){const e=It();return qt({mutationFn:n=>ge.safePost("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}},requestBody:{workspace_policy:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace-policy",t]})}})}const Wae=Oe.hasSeenWorkSpacePolicy;function zae(t){"use forget";const e=W.c(9),{workspaceId:n}=t,s=It();let o;e[0]!==n?(o=()=>ge.safePost("/accounts/{account_id}/workspace_policy/acknowledge",{parameters:{path:{account_id:n}}}),e[0]=n,e[1]=o):o=e[1];let a,i;e[2]!==s?(a=()=>{s.setQueryData(Ou().queryKey,qae)},i=()=>{s.invalidateQueries(Ou())},e[2]=s,e[3]=a,e[4]=i):(a=e[3],i=e[4]);let l;return e[5]!==o||e[6]!==a||e[7]!==i?(l={mutationFn:o,onMutate:a,onSuccess:i},e[5]=o,e[6]=a,e[7]=i,e[8]=l):l=e[8],qt(l)}function qae(t){return t&&U(w({},t),{eligible_announcements:t.eligible_announcements.filter(Yae)})}function Yae(t){return t!==Wae}const Hj=t=>{let e=0;if(!t)return"";for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e.toString()},Zae=720*60*60*1e3,mb=Be(null),Kae=(t,e,n)=>{const s={hash:n,expiresAt:Date.now()+Zae};_t.setItem(Ue.WorkspacePolicyViewed,JSON.stringify(s),{userId:e,workspaceId:t}),mb.set(n)},Qae=(t,e)=>{const n=_t.getItem(Ue.WorkspacePolicyViewed,{userId:e,workspaceId:t});if(!n)return null;try{const s=JSON.parse(n);if(s.expiresAt>Date.now())return s.hash}catch(s){}return null},Lze=()=>{"use forget";var b,C,S;const t=W.c(15),e=zo(Ca.businessWorkspaceId),n=(b=ln())==null?void 0:b.id,{data:s,isLoading:o}=bh(e!=null?e:void 0),a=!!((C=s==null?void 0:s.beta_settings)!=null&&C.workspace_policy),i=e!=null?e:void 0;let l;t[0]!==a||t[1]!==i?(l={workspaceId:i,enabled:a},t[0]=a,t[1]=i,t[2]=l):l=t[2];const{data:c,isLoading:d}=Vj(l),u=o||d,f=(S=c==null?void 0:c.workspace_policy)!=null?S:"";let m;t[3]!==f?(m=Hj(f),t[3]=f,t[4]=m):m=t[4];const g=m,p=re(Jae);let h,x;if(t[5]!==n||t[6]!==e?(h=()=>{if(e&&n){const E=Qae(e,n);mb.set(E)}},x=[e,n],t[5]=n,t[6]=e,t[7]=h,t[8]=x):(h=t[7],x=t[8]),_.useEffect(h,x),!e){let E;return t[9]===Symbol.for("react.memo_cache_sentinel")?(E={isLoading:!1,isOpen:!1},t[9]=E):E=t[9],E}if(u||!n){let E;return t[10]===Symbol.for("react.memo_cache_sentinel")?(E={isLoading:!0,isOpen:!1},t[10]=E):E=t[10],E}if(!a||!c||!f){let E;return t[11]===Symbol.for("react.memo_cache_sentinel")?(E={isLoading:!1,isOpen:!1},t[11]=E):E=t[11],E}if((s==null?void 0:s.beta_settings_str.workspace_policy_cadence)==="every_login"){let E;return t[12]===Symbol.for("react.memo_cache_sentinel")?(E={isLoading:!1,isOpen:!0},t[12]=E):E=t[12],E}const v=g!==p;let y;return t[13]!==v?(y={isLoading:!1,isOpen:v},t[13]=v,t[14]=y):y=t[14],y},Oze=({onClose:t})=>{var m,g,p;const e=ne(),n=zo(Ca.businessWorkspaceId),s=(m=ln())==null?void 0:m.id,{mutate:o}=zae({workspaceId:n!=null?n:""}),{data:a,isLoading:i}=Vj({workspaceId:n!=null?n:void 0}),l=(g=a==null?void 0:a.workspace_policy)!=null?g:"",c=zo(Ca.isBusinessWorkspace),d=zo(h=>h.currentWorkspace);if(!Y2)return null;const u=e.formatMessage(SC.workspaceWelcome,{workspaceName:d==null?void 0:d.name}),f=()=>{t(),o(),n&&s&&Kae(n,s,Hj(l))};return r.jsx(Mt,{testId:"modal-workspace-policy",isOpen:!0,onClose:f,type:"success",icon:c?r.jsx(Y2,{size:"small",src:d==null?void 0:d.profilePictureUrl}):void 0,title:u,size:"xlarge",shouldIgnoreClickOutside:!0,className:"h-[50vh]! min-h-[500px]!",children:i?r.jsx(ws,{}):r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsx(Bs,{size:"small",className:"px-4 md:px-6",children:(p=a==null?void 0:a.workspace_policy)!=null?p:""}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(d3,{title:e.formatMessage(SC.gettingStartedButton),onClick:f,color:"primary"})})]})})},SC=Se({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},gettingStartedButton:{id:"BlockingInitialModals.acknowledgeButton",defaultMessage:"Acknowledge"}});function Jae(){return mb()}const Xae=R(()=>P(()=>import("./d0fvtivu8wtjjx2a.js"),__vite__mapDeps([30,1])),{loading:t=>F(t)}),Gj=R(()=>P(()=>import("./dh7mc6hgd545v1dp.js"),__vite__mapDeps([122,1])),{loading:t=>F(t)}),Wj=Oe.Onboarding,Dze=()=>{const{eligible:t,isLoading:e}=lt(Wj);return{hasSeenOnboardingDate:e?null:!t}},Fze=()=>{const{eligible:t,isLoading:e}=lt(Oe.TeamOwnerOnboarding);return{hasSeenTeamOwnerOnboardingDate:e?null:!t}};function Bze({onClose:t,scope:e}){const n=V(),s=_.useCallback(()=>{t(!0),ot(n,Wj)},[n,t]);return e===VI.Personal?r.jsx(tre,{onSubmit:s}):r.jsx(nre,{onSubmit:()=>{t(!0)}})}const Fc=({icon:t,title:e,body:n})=>r.jsxs("div",{className:"flex flex-col gap-2 md:w-1/3",children:[r.jsxs("div",{className:"flex flex-row items-start gap-2",children:[r.jsx("div",{className:"mt-1",children:t}),r.jsx("div",{className:"text-token-text-primary font-semibold",children:e})]}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:n})]}),ere="https://help.openai.com/en/articles/7039943-data-usage-for-consumer-services-faq",tre=({onSubmit:t})=>{const e=ne();return r.jsxs("div",{className:"flex flex-col gap-3 p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[r.jsx(Fc,{icon:r.jsx(Gj,{isSolid:!0,className:"icon text-green-600"}),title:r.jsx(j,w({},Ds.askAway)),body:r.jsx(j,w({},Ds.askAwayBody))}),r.jsx(Fc,{icon:r.jsx(KV,{className:"icon text-brand-purple"}),title:r.jsx(j,w({},Ds.warning)),body:r.jsx(j,U(w({},Ds.warningBody),{values:{article:n=>r.jsx("a",{href:ere,target:"_blank",className:"underline",rel:"noopener noreferrer",children:n})}}))}),r.jsx(Fc,{icon:r.jsx(MT,{className:"icon mt-0.5 text-orange-300"}),title:r.jsx(j,w({},Ds.accuracy)),body:r.jsx(j,w({},Ds.accuracyBody))})]}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(d3,{title:e.formatMessage(Ds.gettingStartedButton),onClick:t,color:"primary","data-testid":"getting-started-button"})})]})},nre=({onSubmit:t})=>{const e=ne();return r.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[r.jsx(Fc,{icon:r.jsx(Xae,{className:"icon text-brand-purple"}),title:r.jsx(j,w({},Ds.workUse)),body:r.jsx(j,w({},Ds.workUseBody))}),r.jsx(Fc,{icon:r.jsx(Gj,{className:"icon text-green-600"}),title:r.jsx(j,w({},Ds.askAway)),body:r.jsx(j,w({},Ds.askAwayBody))}),r.jsx(Fc,{icon:r.jsx(MT,{className:"icon mt-0.5 text-orange-300"}),title:r.jsx(j,w({},Ds.accuracy)),body:r.jsx(j,w({},Ds.accuracyBody))})]}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(d3,{title:e.formatMessage(Ds.gettingStartedButton),onClick:t,color:"primary"})})]})},Ds=Se({askAway:{id:"onboarding.askAway",defaultMessage:"Ask away"},askAwayBody:{id:"onboarding.askAwayBody",defaultMessage:"ChatGPT can answer questions, help you learn, write code, brainstorm together, and much more."},warning:{id:"onboarding.warning",defaultMessage:"Dont share sensitive info"},warningBody:{id:"onboarding.warningBody",defaultMessage:"Chat history may be reviewed or used to improve our services. Learn more about your choices in our <article>Help Center</article>."},accuracy:{id:"onboarding.accuracy",defaultMessage:"Check your facts"},accuracyBody:{id:"onboarding.accuracyBody",defaultMessage:"While we have safeguards, ChatGPT may give you inaccurate information. Its not intended to give advice."},gettingStartedButton:{id:"onboarding.gettingStartedButton",defaultMessage:"Okay, lets go"},workspaceWelcome:{id:"onboarding.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} Workspace"},workspaceWelcomeNoName:{id:"onboarding.workspaceWelcomeNoName",defaultMessage:"Welcome to the your Workspace"},workspaceWelcomeBody:{id:"onboarding.workspaceWelcomeBody",defaultMessage:"Here you can use our latest models, with more capabilities, and fewer limits."},workUse:{id:"onboarding.workUse",defaultMessage:"Made for use at work"},educationUse:{id:"onboarding.educationUse",defaultMessage:"Made for use in education"},workUseBody:{id:"onboarding.workUseBody",defaultMessage:"By default, chats in this workspace are not used to train our AI models."}}),sre=R(()=>P(()=>import("./nzc19yp45z5gjstv.js"),__vite__mapDeps([49,1])),{loading:t=>F(t)}),ore=R(()=>P(()=>import("./fgkf4ysztkrzjowg.js"),__vite__mapDeps([123,1])),{loading:t=>F(t)}),are=R(()=>P(()=>import("./lljm2enx48t0mwrk.js"),__vite__mapDeps([54,1])),{loading:t=>F(t)}),zj=Oe.MemoryOnboarding;function Uze(){const t=Fd(),{eligible:e,isLoading:n}=lt(zj);return{eligible:e&&t,isLoading:n}}function V_({icon:t,title:e,description:n}){return r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"text-token-text-secondary mt-1",children:t}),r.jsxs("div",{className:"ms-4",children:[r.jsx("div",{className:"text-lg font-semibold",children:e}),r.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:n})]})]})}function $ze({onClose:t}){const e=V(),n=rre(e),s=wl(),o=ub(),a=(o==null?void 0:o[Lt.Sunshine])===!0,i=ne(),l=_.useCallback(()=>{ot(e,zj),t()},[e,t]);return _.useEffect(()=>{B.logUpsellOrModalEvent(dn,{eventId:"memory_onboarding_modal_shown",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]),r.jsx(Mt,{testId:"modal-memory-onboarding",isOpen:!0,onClose:as,size:"custom",className:"max-w-xl",type:"success",title:i.formatMessage(ra.title),secondaryButton:n?r.jsx(Ns.Button,{onClick:async()=>{try{await s.mutateAsync({setting:Lt.Sunshine,value:!1}),l()}catch(c){}},title:i.formatMessage(ra.notNow),color:"secondary",disabled:a}):null,primaryButton:n?r.jsx(Ns.Button,{onClick:async()=>{try{await s.mutateAsync({setting:Lt.Sunshine,value:!0}),l()}catch(c){}},title:i.formatMessage(ra.enable),color:"primary",disabled:a}):r.jsx(Ns.Button,{onClick:l,title:i.formatMessage(ra.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(V_,{icon:r.jsx(are,{}),title:i.formatMessage(ra.bulletTitle1),description:i.formatMessage(ra.bulletDescription1)}),r.jsx(V_,{icon:r.jsx(sre,{}),title:i.formatMessage(ra.bulletTitle2),description:r.jsx(j,w({},ra.bulletDescription2))}),r.jsx(V_,{icon:r.jsx(ore,{}),title:i.formatMessage(ra.bulletTitle3),description:r.jsx(j,U(w({},ra.bulletDescription3),{values:{link1:c=>r.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:c}),link2:c=>r.jsx(wo,{to:Al(Pn.Personalization),className:"underline",children:c}),link3:c=>r.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq#h_b8745c1ae1",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:c})}}))})]})})}function rre(t){return ve(t,"1542198993")}const ra=Se({title:{id:"MemoryOnboardingModal.title.1",defaultMessage:"ChatGPT now has memory"},bulletTitle1:{id:"MemoryOnboardingModal.bulletTitle1",defaultMessage:"Keep the conversation going"},bulletDescription1:{id:"MemoryOnboardingModal.bulletDescription1.1",defaultMessage:"ChatGPT will automatically remember useful details and preferences you share in all your conversations, carrying them between chats."},bulletTitle2:{id:"MemoryOnboardingModal.bulletTitle2.1",defaultMessage:"A more personalized assistant"},bulletDescription2:{id:"MemoryOnboardingModal.bulletDescription2.2",defaultMessage:"Memories and your chat history are used to give you more relevant responses. Want to change what ChatGPT remembers? Just ask."},bulletTitle3:{id:"MemoryOnboardingModal.bulletTitle3",defaultMessage:"You're in control"},bulletDescription3:{id:"MemoryOnboardingModal.bulletDescription3.2",defaultMessage:"<link1>Learn more</link1> about how memory works. You can turn off memory at any time in <link2>settings</link2>. Memories may be used to <link3>train our models</link3> if you have model training enabled."},continue:{id:"MemoryOnboardingModal.continue",defaultMessage:"Continue"},notNow:{id:"MemoryOnboardingModal.notNow",defaultMessage:"Not now"},enable:{id:"MemoryOnboardingModal.enable",defaultMessage:"Enable"}});function Jf(t){"use forget";const e=W.c(5),n=V();let s;e[0]!==t||e[1]!==n?(s=xt(n,t),e[0]=t,e[1]=n,e[2]=s):s=e[2];const o=s;let a;return e[3]!==o?(a=i=>Zo(w({conversation:o},i)),e[3]=o,e[4]=a):a=e[4],a}const Ya=on(()=>Be(null)),nl=on(()=>Be(null));function qj(t){var o;const e=Ps(t,"1384700061"),n=e==null?void 0:e.get("variant");return n&&(o={control:"control",new:"new",mix:"mix"}[n])!=null?o:null}function Yj(t){var o;const e=Ps(t,"107823582"),n=e==null?void 0:e.get("variant");return n&&(o={control:"control",new:"new",mix:"mix"}[n])!=null?o:null}function ire(t,e){const n=st(t);return n!=null&&n.isK12()?"k12":e!=null&&e.isHipaaCompliantWorkspace?"health":n!=null&&n.isEnterprise()?qj(t):n!=null&&n.isSelfServeBusiness()?Yj(t):null}function lre(){"use forget";var h;const t=W.c(20),e=V(),{eligible:n,isLoading:s}=lt(Oe.NewOnboardingFlow);let o;t[0]!==e?(o=()=>Ya(e)===!0,t[0]=e,t[1]=o):o=t[1];const a=re(o),i=Zj();let l;t[2]!==e?(l=(h=st(e))==null?void 0:h.isFree(),t[2]=e,t[3]=l):l=t[3];const c=l;let d;t[4]!==e?(d=()=>ot(e,Oe.NewOnboardingFlow),t[4]=e,t[5]=d):d=t[5];const u=d;let f,m;t[6]!==e||t[7]!==n||t[8]!==i||t[9]!==c||t[10]!==s?(f=()=>{if(n&&!s&&!i&&c){Ya.set(e,cre),nl.set(e,!1);const x=ze(e,"997657492",{disableExposureLog:!0}).get("onboarding-mode",void 0)==="personality";BI.set(e,x)}},m=[e,n,s,i,c],t[6]=e,t[7]=n,t[8]=i,t[9]=c,t[10]=s,t[11]=f,t[12]=m):(f=t[11],m=t[12]),_.useEffect(f,m);let g;t[13]!==e?(g=()=>Ya.set(e,!1),t[13]=e,t[14]=g):g=t[14];let p;return t[15]!==s||t[16]!==a||t[17]!==u||t[18]!==g?(p={isOpen:a,isLoading:s,closeModal:g,markAsViewed:u},t[15]=s,t[16]=a,t[17]=u,t[18]=g,t[19]=p):p=t[19],p}function cre(t){return t!=null?t:!0}function dre(){"use forget";var S,E;const t=W.c(25),e=V(),n=st(e),s=Sn(),o=n==null?void 0:n.isWorkspacePlan(),a=n==null?void 0:n.isEnterprisey(),i=n==null?void 0:n.isSelfServeBusiness(),l=(S=n==null?void 0:n.isK12())!=null?S:!1,c=(E=s==null?void 0:s.isHipaaCompliantWorkspace)!=null?E:!1;let d;t[0]!==s||t[1]!==e?(d=ire(e,s),t[0]=s,t[1]=e,t[2]=d):d=t[2];const u=d,{eligible:f,isLoading:m}=lt(Oe.Onboarding),g=Zj();let p;t[3]!==e?(p=()=>Ya(e)===!0,t[3]=e,t[4]=p):p=t[4];const h=re(p);let x,v;t[5]!==e||t[6]!==f||t[7]!==g||t[8]!==a||t[9]!==c||t[10]!==l||t[11]!==m||t[12]!==i||t[13]!==o?(x=()=>{if(!(!o||!f||m||g))if(l)Ya.set(e,gre),nl.set(e,!1);else if(c){const k=Ps(e,"217573384");if(k==null?void 0:k.get("enabled")){Ya.set(e,mre),nl.set(e,!1);return}}else a?qj(e)==="new"&&(Ya.set(e,fre),nl.set(e,!1)):i&&Yj(e)==="new"&&(Ya.set(e,ure),nl.set(e,!1))},v=[e,o,l,f,m,g,a,i,c],t[5]=e,t[6]=f,t[7]=g,t[8]=a,t[9]=c,t[10]=l,t[11]=m,t[12]=i,t[13]=o,t[14]=x,t[15]=v):(x=t[14],v=t[15]),_.useEffect(x,v);let y,b;t[16]!==e?(y=()=>Ya.set(e,!1),b=()=>ot(e,Oe.Onboarding),t[16]=e,t[17]=y,t[18]=b):(y=t[17],b=t[18]);let C;return t[19]!==m||t[20]!==h||t[21]!==y||t[22]!==b||t[23]!==u?(C={isOpen:h,isLoading:m,closeModal:y,markAsViewed:b,workspaceOnboardingVariant:u},t[19]=m,t[20]=h,t[21]=y,t[22]=b,t[23]=u,t[24]=C):C=t[24],C}function ure(t){return t!=null?t:!0}function fre(t){return t!=null?t:!0}function mre(t){return t!=null?t:!0}function gre(t){return t!=null?t:!0}function pre(){"use forget";const t=W.c(6),e=V();let n;if(t[0]!==e){const l=st(e);n=l==null?void 0:l.isWorkspacePlan(),t[0]=e,t[1]=n}else n=t[1];const s=n,o=lre(),a=dre();let i;return t[2]!==s||t[3]!==o||t[4]!==a?(i=s?U(w({},a),{isWorkspaceUser:!0}):U(w({},o),{isWorkspaceUser:!1,workspaceOnboardingVariant:void 0}),t[2]=s,t[3]=o,t[4]=a,t[5]=i):i=t[5],i}function Zj(){"use forget";const t=W.c(2),[e]=Us();let n;return t[0]!==e?(n=e.has("prompt"),t[0]=e,t[1]=n):n=t[1],n}const rd=Se({hi:{id:"new_user_onboarding.hi",defaultMessage:"Hi"},hiThere:{id:"new_user_onboarding.hi_there",defaultMessage:"Hi there"},tryUploadingAFile:{defaultMessage:"Try uploading a file",id:"chatgpt.new-onboarding.try-uploading-a-file"},uploadFileExample:{defaultMessage:"ChatGPT can summarize and analyze your files or images.",id:"chatgpt.new-onboarding.upload-file-exp"},school:{defaultMessage:"School",id:"chatgpt.new-onboarding.school"},schoolPrompt:{defaultMessage:"Im trying to learn and do better in school.",id:"chatgpt.new-onboarding.school-prompt"},work:{defaultMessage:"Work",id:"chatgpt.new-onboarding.work"},workPrompt:{defaultMessage:"I'm here to learn and grow in my work.",id:"chatgpt.new-onboarding.work-prompt"},personalTasks:{defaultMessage:"Personal tasks",id:"chatgpt.new-onboarding.personal-tasks"},personalTasksPrompt:{defaultMessage:"I'm here for my personal tasks",id:"chatgpt.new-onboarding.personal-tasks-prompt"},funAndEntertainment:{defaultMessage:"Fun and entertainment",id:"chatgpt.new-onboarding.fun-and-entertainment"},funAndEntertainmentPrompt:{defaultMessage:"I'm here to explore fun ideas and relax.",id:"chatgpt.new-onboarding.fun-and-entertainment-prompt"},other:{defaultMessage:"Other",id:"chatgpt.new-onboarding.other"},justCurious:{defaultMessage:"Just curious",id:"chatgpt.new-onboarding.just-curious"},justCuriousPrompt:{defaultMessage:"I'm just curious, exploring what you can do.",id:"chatgpt.new-onboarding.just-curious-prompt"},tryAnExample:{defaultMessage:"Try an example below or send any message in the message box below.",id:"chatgpt.new-onboarding.try-an-example"}});function hre(){"use forget";const t=W.c(5),e=V(),{eligible:n,isLoading:s}=lt(Oe.NewOnboardingConvo);let o;t[0]!==e?(o=()=>ot(e,Oe.NewOnboardingConvo),t[0]=e,t[1]=o):o=t[1];const a=o,i=n&&!s;let l;return t[2]!==a||t[3]!==i?(l={isEligible:i,markAsViewed:a},t[2]=a,t[3]=i,t[4]=l):l=t[4],l}function Vze(t){"use forget";const e=W.c(20),n=V();let s;e[0]!==n?(s=AT(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=Xc(_re),{isEligible:i,markAsViewed:l}=hre();let c;e[2]!==t?(c={clientThreadId:t},e[2]=t,e[3]=c):c=e[3];const d=gb(c);let u;e[4]!==n?(u=ze(n,"109457"),e[4]=n,e[5]=u):u=e[5];const f=u,m=ne(),g=TT(),p=Vn();let h;e[6]!==g||e[7]!==p?(h=g||pse(p),e[6]=g,e[7]=p,e[8]=h):h=e[8];const x=h;let v,y;e[9]!==t||e[10]!==d||e[11]!==x||e[12]!==m||e[13]!==o||e[14]!==i||e[15]!==f||e[16]!==l||e[17]!==a?(v=()=>{i&&!a&&(m.locale===QV||m.messages!==JV)&&!o&&!x&&f.get("onboarding_style","")==="CONVO"&&(Ln.setOnboardingConvoState({onboardingConvoClientThreadId:t}),l(),d({eventSource:"url",stepPrompt:m.formatMessage(rd.hi),messageMetadata:{is_visually_hidden_from_conversation:!0},authorMetadata:{real_author:Ky.Onboarding}}),qe.logEvent("chatgpt_convo_onboarding_started"))},y=[i,l,d,a,m,m.locale,m.messages,t,f,o,x],e[9]=t,e[10]=d,e[11]=x,e[12]=m,e[13]=o,e[14]=i,e[15]=f,e[16]=l,e[17]=a,e[18]=v,e[19]=y):(v=e[18],y=e[19]),_.useEffect(v,y)}function _re(t){var e;return(e=t.onboardingConvoState)!=null?e:void 0}const gb=t=>{"use forget";const e=W.c(2),{clientThreadId:n}=t,s=Jf(n);let o;return e[0]!==s?(o=a=>{var f;const u=a,{stepPrompt:i,messageMetadata:l,authorMetadata:c}=u,d=we(u,["stepPrompt","messageMetadata","authorMetadata"]);s(U(w({},d),{promptMessage:is(i,l!=null?l:void 0,c!=null?c:void 0),completionMetadata:{isOnboardingConversation:!0,conversationMode:{kind:wt.PrimaryAssistant},systemHints:(f=l==null?void 0:l.onboarding)==null?void 0:f.system_hints},skipNotification:!0}))},e[0]=s,e[1]=o):o=e[1],o},Hze=t=>{"use forget";const e=W.c(5),{clientThreadId:n}=t,s=V(),o=Jf(n),{open:a}=Qj();let i;return e[0]!==n||e[1]!==s||e[2]!==a||e[3]!==o?(i=l=>{const{suggestedPrompt:c,index:d,isOnboarding:u}=l;u&&(ot(s,Oe.Onboarding),a()),o({promptMessage:is(c.prompt,{is_starter_prompt:!0,suggestion_type:Je.Starter,starter_prompt_id:c.id}),eventSource:"mouse",completionMetadata:{conversationMode:{kind:wt.PrimaryAssistant}},skipNotification:!0}),Kh(c,d,n)},e[0]=n,e[1]=s,e[2]=a,e[3]=o,e[4]=i):i=e[4],i};function Kj(t){"use forget";var u;const e=W.c(9),n=V(),s=Ve(t,xre),{eligible:o,isLoading:a}=lt(Oe.hasSeenFilePickerNuxTooltip);let i;e[0]!==n?(i=()=>ot(n,Oe.hasSeenFilePickerNuxTooltip),e[0]=n,e[1]=i):i=e[1];const l=i;let c;e[2]!==o||e[3]!==a||e[4]!==(s==null?void 0:s.triggered_tools)?(c=((u=s==null?void 0:s.triggered_tools)==null?void 0:u.includes("file_upload"))&&o&&!a,e[2]=o,e[3]=a,e[4]=s==null?void 0:s.triggered_tools,e[5]=c):c=e[5];let d;return e[6]!==l||e[7]!==c?(d={isEligible:c,markAsViewed:l},e[6]=l,e[7]=c,e[8]=d):d=e[8],d}function xre(t){var e,n;return(n=(e=he.findNode(t,yre))==null?void 0:e.message.metadata)==null?void 0:n.onboarding}function yre(t){return t.message.author.role===Ke.User}function Gze(t){return ze(t,"109457",{disableExposureLog:!0}).get("onboarding_show_followups",!1)}const H_=on(()=>Be(null)),ng=on(()=>Be({isOpen:null,isUserTriggered:!1}));function Wze(){"use forget";var C;const t=W.c(25),e=V(),{eligible:n,isLoading:s}=lt(Oe.NewPromptOnboardingFlow);let o;t[0]!==e?(o=()=>ng(e),t[0]=e,t[1]=o):o=t[1];const{isOpen:a,isUserTriggered:i}=re(o),l=V();let c;t[2]!==l?(c=ze(l,"109457",{disableExposureLog:!0}).get("prompt_onboarding_style","list"),t[2]=l,t[3]=c):c=t[3];const d=c;let u;t[4]!==e?(u=(C=st(e))==null?void 0:C.isFree(),t[4]=e,t[5]=u):u=t[5];const f=u;let m;t[6]!==e?(m=()=>ot(e,Oe.NewPromptOnboardingFlow),t[6]=e,t[7]=m):m=t[7];const g=m;let p,h;t[8]!==e||t[9]!==n||t[10]!==f||t[11]!==s?(p=()=>{n&&!s&&f&&ng.set(e,bre)},h=[e,n,s,f],t[8]=e,t[9]=n,t[10]=f,t[11]=s,t[12]=p,t[13]=h):(p=t[12],h=t[13]),_.useEffect(p,h);const x=!!a;let v,y;t[14]!==e?(v=()=>ng.set(e,{isOpen:!0,isUserTriggered:!0}),y=()=>ng.set(e,vre),t[14]=e,t[15]=v,t[16]=y):(v=t[15],y=t[16]);let b;return t[17]!==s||t[18]!==i||t[19]!==g||t[20]!==d||t[21]!==x||t[22]!==v||t[23]!==y?(b={isOpen:x,isUserTriggered:i,isLoading:s,onboardingStyle:d,reopenModal:v,closeModal:y,markAsViewed:g},t[17]=s,t[18]=i,t[19]=g,t[20]=d,t[21]=x,t[22]=v,t[23]=y,t[24]=b):b=t[24],b}function vre(t){return U(w({},t),{isOpen:!1})}function bre(t){var e;return U(w({},t),{isOpen:(e=t.isOpen)!=null?e:!0})}function zze(){"use forget";var h;const t=W.c(19),e=V(),{eligible:n,isLoading:s}=lt(Oe.NewStaticOnboardingFlow);let o;t[0]!==e?(o=()=>H_(e)===!0,t[0]=e,t[1]=o):o=t[1];const a=re(o);let i;t[2]!==e?(i=(h=st(e))==null?void 0:h.isFree(),t[2]=e,t[3]=i):i=t[3];const l=i;let c;t[4]!==e?(c=()=>ot(e,Oe.NewStaticOnboardingFlow),t[4]=e,t[5]=c):c=t[5];const d=c;let u,f;t[6]!==e||t[7]!==n||t[8]!==l||t[9]!==s?(u=()=>{n&&!s&&l&&(H_.set(e,Cre),nl.set(e,!1))},f=[e,n,s,l],t[6]=e,t[7]=n,t[8]=l,t[9]=s,t[10]=u,t[11]=f):(u=t[10],f=t[11]),_.useEffect(u,f);const m=!!a;let g;t[12]!==e?(g=()=>{H_.set(e,!1),nl.set(e,!0)},t[12]=e,t[13]=g):g=t[13];let p;return t[14]!==s||t[15]!==d||t[16]!==m||t[17]!==g?(p={isOpen:m,isLoading:s,closeModal:g,markAsViewed:d},t[14]=s,t[15]=d,t[16]=m,t[17]=g,t[18]=p):p=t[18],p}function Cre(t){return t!=null?t:!0}const sg=on(()=>Be({isOpen:!1,viewedInClientThreadId:null}));function Qj(){"use forget";const t=W.c(12),e=V();let n;t[0]!==e?(n=()=>sg(e),t[0]=e,t[1]=n):n=t[1];const{isOpen:s,viewedInClientThreadId:o}=re(n);let a,i,l;t[2]!==e?(a=()=>sg.set(e,wre),i=()=>sg.set(e,Sre),l=d=>sg.set(e,u=>U(w({},u),{viewedInClientThreadId:d})),t[2]=e,t[3]=a,t[4]=i,t[5]=l):(a=t[3],i=t[4],l=t[5]);let c;return t[6]!==s||t[7]!==a||t[8]!==i||t[9]!==l||t[10]!==o?(c={isOpen:s,viewedInClientThreadId:o,close:a,open:i,markViewedInClientThreadId:l},t[6]=s,t[7]=a,t[8]=i,t[9]=l,t[10]=o,t[11]=c):c=t[11],c}function Sre(t){return U(w({},t),{isOpen:!0})}function wre(t){return U(w({},t),{isOpen:!1})}function qze(){"use forget";const t=W.c(7),e=V(),n=ze(e,"109457",{disableExposureLog:!0}),s=ln();let o;t[0]!==e?(o=tt(e),t[0]=e,t[1]=o):o=t[1];const a=o,[i,l]=ki(Ue.HasDismissedOnboardingSidebarEntry,!1,h1),c=typeof(s==null?void 0:s.created)=="number"?s.created>1e12?s.created:s.created*1e3:void 0,d=typeof window<"u"&&window.innerHeight>=667,u=!!(a&&c!=null&&Date.now()-c<=6048e5&&d),f=n.get("onboarding_sidebar_entry_style","");let m;return t[2]!==i||t[3]!==u||t[4]!==l||t[5]!==f?(m={style:f,hasDismissed:i,setHasDismissed:l,isEligible:u},t[2]=i,t[3]=u,t[4]=l,t[5]=f,t[6]=m):m=t[6],m}function Yze(t,e=!1){return ze(t,"109457",{disableExposureLog:!e})}const Gn=Se({marketing:{id:"onboarding.departments.marketing",defaultMessage:"Marketing"},analytics:{id:"onboarding.departments.analytics",defaultMessage:"Data or Analytics"},product:{id:"onboarding.departments.product",defaultMessage:"Product Management"},comms:{id:"onboarding.departments.comms",defaultMessage:"Communications"},finance:{id:"onboarding.departments.finance",defaultMessage:"Finance or Accounting"},customer_experience:{id:"onboarding.departments.customer_experience",defaultMessage:"Customer Experience"},project_management:{id:"onboarding.departments.project_management",defaultMessage:"Project or Program Management"},engineering:{id:"onboarding.departments.engineering",defaultMessage:"Engineering"},education_professional:{id:"onboarding.departments.education_professional",defaultMessage:"Education Professional"},design:{id:"onboarding.departments.design",defaultMessage:"Design"},administrative:{id:"onboarding.departments.administrative",defaultMessage:"Administrative Assistant"},partnerships:{id:"onboarding.departments.partnerships",defaultMessage:"Partnerships"},it:{id:"onboarding.departments.it",defaultMessage:"Information Technology (IT)"},ops:{id:"onboarding.departments.ops",defaultMessage:"Operations"},human_resources:{id:"onboarding.departments.human_resources",defaultMessage:"Human Resources"},research:{id:"onboarding.departments.research",defaultMessage:"Research & Development"},sales:{id:"onboarding.departments.sales",defaultMessage:"Sales"},legal:{id:"onboarding.departments.legal",defaultMessage:"Legal"},healthcare:{id:"onboarding.departments.healthcare",defaultMessage:"Healthcare Professional"},other:{id:"onboarding.departments.other",defaultMessage:"Other"}}),ys=Se({engineering:{id:"onboarding.edu_departments.engineering",defaultMessage:"Engineering"},math:{id:"onboarding.edu_departments.math",defaultMessage:"Mathematics"},applied_sciences:{id:"onboarding.edu_departments.applied_sciences",defaultMessage:"Applied Sciences"},finance:{id:"onboarding.edu_departments.finance",defaultMessage:"Finance or Accounting"},health:{id:"onboarding.edu_departments.health",defaultMessage:"Health or Medical"},law:{id:"onboarding.edu_departments.law",defaultMessage:"Law"},business:{id:"onboarding.edu_departments.business",defaultMessage:"Business"},social:{id:"onboarding.edu_departments.social",defaultMessage:"Social Sciences"},liberal_art:{id:"onboarding.edu_departments.liberal_art",defaultMessage:"Liberal Arts"},fine_art:{id:"onboarding.edu_departments.fine_art",defaultMessage:"Fine Arts"},linguistics:{id:"onboarding.edu_departments.linguistics",defaultMessage:"Linguistics"},teaching:{id:"onboarding.edu_departments.teaching",defaultMessage:"Teaching"},dev:{id:"onboarding.edu_departments.dev",defaultMessage:"Research & Development"},campus_ops:{id:"onboarding.edu_departments.campus_ops",defaultMessage:"Campus Operations"},it:{id:"onboarding.edu_departments.it",defaultMessage:"Information Technology (IT)"},other:{id:"onboarding.edu_departments.other",defaultMessage:"Other"}}),Or=Se({team_member:{id:"onboarding.role.team_member",defaultMessage:"Team Member/ Individual Contributor"},manager:{id:"onboarding.role.manager",defaultMessage:"Manager"},student:{id:"onboarding.role.student",defaultMessage:"Student"},executive:{id:"onboarding.role.executive",defaultMessage:"Executive"},director:{id:"onboarding.role.director",defaultMessage:"Director"},business_owner:{id:"onboarding.role.business_owner",defaultMessage:"Business Owner"},freelancer:{id:"onboarding.role.freelancer",defaultMessage:"Freelancer"},other:{id:"onboarding.role.other",defaultMessage:"Other"}}),oc=Se({student:{id:"onboarding.edu_role.student",defaultMessage:"Student"},instructional_staff:{id:"onboarding.edu_role.instructional_staff",defaultMessage:"Instructional Staff"},researcher:{id:"onboarding.edu_role.researcher",defaultMessage:"Researcher"},admin:{id:"onboarding.edu_role.admin",defaultMessage:"Administration"},alumni:{id:"onboarding.edu_role.alumni",defaultMessage:"Alumni"},other:{id:"onboarding.edu_role.other",defaultMessage:"Other"}}),og=Se({teacher:{id:"k12.onboarding.role.teacher",defaultMessage:"Teacher"},administratorDistrictLeader:{id:"k12.onboarding.role.administrator_district_leader",defaultMessage:"Administrator / District Leader"},itTechnicalStaff:{id:"k12.onboarding.role.it_staff",defaultMessage:"IT / Technical Staff"},others:{id:"k12.onboarding.role.others",defaultMessage:"Others"},other:{id:"k12.onboarding.role.other",defaultMessage:"Other"}}),Zze=[{id:"team_member",displayValue:Or.team_member},{id:"manager",displayValue:Or.manager},{id:"director",displayValue:Or.director},{id:"executive",displayValue:Or.executive},{id:"business_owner",displayValue:Or.business_owner},{id:"freelancer",displayValue:Or.freelancer},{id:"student",displayValue:Or.student},{id:"other",displayValue:Or.other}],Kze=[{id:"student",displayValue:oc.student},{id:"instructional_staff",displayValue:oc.instructional_staff},{id:"researcher",displayValue:oc.researcher},{id:"admin",displayValue:oc.admin},{id:"alumni",displayValue:oc.alumni},{id:"other",displayValue:oc.other}],Qze=[{id:"teacher",displayValue:og.teacher},{id:"administrator_district_leader",displayValue:og.administratorDistrictLeader},{id:"it_staff",displayValue:og.itTechnicalStaff},{id:"others",displayValue:og.others}],Jze=[{id:"marketing",displayValue:Gn.marketing},{id:"analytics",displayValue:Gn.analytics},{id:"product",displayValue:Gn.product},{id:"comms",displayValue:Gn.comms},{id:"engineering",displayValue:Gn.engineering},{id:"education_professional",displayValue:Gn.education_professional},{id:"finance",displayValue:Gn.finance},{id:"customer_experience",displayValue:Gn.customer_experience},{id:"project_management",displayValue:Gn.project_management},{id:"design",displayValue:Gn.design},{id:"administrative",displayValue:Gn.administrative},{id:"it",displayValue:Gn.it},{id:"ops",displayValue:Gn.ops},{id:"human_resources",displayValue:Gn.human_resources},{id:"research",displayValue:Gn.research},{id:"sales",displayValue:Gn.sales},{id:"partnerships",displayValue:Gn.partnerships},{id:"legal",displayValue:Gn.legal},{id:"healthcare",displayValue:Gn.healthcare},{id:"other",displayValue:Gn.other}],Xze=[{id:"engineering",displayValue:ys.engineering},{id:"math",displayValue:ys.math},{id:"applied_sciences",displayValue:ys.applied_sciences},{id:"finance",displayValue:ys.finance},{id:"health",displayValue:ys.health},{id:"law",displayValue:ys.law},{id:"business",displayValue:ys.business},{id:"social",displayValue:ys.social},{id:"liberal_art",displayValue:ys.liberal_art},{id:"fine_art",displayValue:ys.fine_art},{id:"linguistics",displayValue:ys.linguistics},{id:"teaching",displayValue:ys.teaching},{id:"dev",displayValue:ys.dev},{id:"campus_ops",displayValue:ys.campus_ops},{id:"it",displayValue:ys.it},{id:"other",displayValue:ys.other}],eqe=[{id:"2-10",displayValue:"2-10"},{id:"11-50",displayValue:"11-50"},{id:"51-200",displayValue:"51-200"},{id:"201-500",displayValue:"201-500"},{id:"500+",displayValue:"500+"}];var kre=(t=>(t.unsupported_app_version="unsupported_app_version",t))(kre||{});const tqe=t=>{const e=ve(t,"2335877601");return qo?e?{isLoading:!1,isOpen:!0,modalType:"unsupported_app_version",onClose:()=>{}}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}},nqe="chatgpt",sqe="chatgpt-alt",oqe="oauth_complete",aqe="ms-windows-store://pdp/?productid=9nt1r1c2hh7j",rqe="https://apps.microsoft.com/detail/9nt1r1c2hh7j",Ere=({className:t})=>r.jsxs("div",{className:z("flex-column flex gap-[10px]",t),children:[r.jsx("div",{className:"relative flex h-[62px] w-[88px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-linear-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:r.jsx("span",{className:"text-token-text-secondary absolute end-[12px] bottom-[8px] text-[12px] leading-[15px] font-semibold tracking-[-0.197499px]",children:r.jsx(j,w({},wC.alt))})}),r.jsx("div",{className:"relative flex h-[62px] w-[232px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-linear-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:r.jsx("span",{className:"text-token-text-secondary absolute end-[12px] bottom-[8px] text-[12px] leading-[15px] font-semibold tracking-[-0.197499px]",children:r.jsx(j,w({},wC.space))})})]}),wC=Se({alt:{id:"DesktopOnboardingKeyboardIllustration.altKeyboardKeyLabel",defaultMessage:"alt"},space:{id:"DesktopOnboardingKeyboardIllustration.spaceKeyboardKeyLabel",defaultMessage:"space"}}),kC=Oe.hasSeenWindowsAppOnboarding,Tre=()=>{"use forget";const t=W.c(7),e=V(),{eligible:n,isLoading:s}=lt(kC);if(!qo||AT(e)){let i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i={isLoading:!1,isOpen:!1,onClose:null},t[0]=i):i=t[0],i}if(s){let i;return t[1]===Symbol.for("react.memo_cache_sentinel")?(i={isLoading:!0,isOpen:null,onClose:null},t[1]=i):i=t[1],i}let o;t[2]!==e?(o=()=>ot(e,kC),t[2]=e,t[3]=o):o=t[3];let a;return t[4]!==n||t[5]!==o?(a={isLoading:!1,isOpen:n,onClose:o},t[4]=n,t[5]=o,t[6]=a):a=t[6],a},iqe=({onClose:t})=>{const{isOpen:e,onClose:n}=Tre();return e?(qe.logEvent("chatgpt_sidetron_onboarding_nux_shown"),r.jsx(Mt,{testId:"modal-desktop-onboarding",isOpen:!0,onClose:as,type:"success",noPadding:!0,position:"center",className:"max-w-[552px] p-14 sm:max-w-[552px]",children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8",children:[r.jsx(xn,{className:"absolute end-4 top-4",onClick:()=>{t(),n()}}),r.jsx("p",{className:"mb-3 text-center text-2xl font-bold",children:r.jsx(j,w({},ag.title))}),r.jsx("p",{className:"text-token-text-tertiary text-center text-lg",children:r.jsx(j,w({},ag.subtitle))}),r.jsx(Ere,{className:"my-8"}),r.jsx("p",{className:"mb-2 text-center text-lg font-semibold",children:r.jsx(j,w({},ag.keyboardShortcut))}),r.jsx("p",{className:"text-token-text-tertiary text-center text-lg",children:r.jsx(j,w({},ag.keyboardShortcutHint))})]})})):null},ag=Se({title:{id:"DesktopOnboardingModal.title",defaultMessage:"Quickly access ChatGPT"},subtitle:{id:"DesktopOnboardingModal.subtitle",defaultMessage:"Use a shortcut to ask questions, upload files, or take screenshots from anywhere on your computer."},keyboardShortcut:{id:"DesktopOnboardingModal.keyboardShortcut1",defaultMessage:"Press Alt+Space to open the companion window"},keyboardShortcutHint:{id:"DesktopOnboardingModal.keyboardShortcutHint",defaultMessage:"You can change this shortcut in Settings."}});function Mre(t){const e=_.useRef(!1);return()=>{e.current||(t(),e.current=!0)}}function lqe(t=30){"use no forget";const e=V(),{session:n}=hd(e);return _.useMemo(()=>{const s=n==null?void 0:n.accessToken;if(!s)return!1;let o;try{const d=hT(s);o=d==null?void 0:d.pwd_auth_time}catch(d){return!1}if(o==null)return!1;const a=o<1e12?o*1e3:o,l=Date.now()-a;return l>=0&&l<=t*1e3},[n==null?void 0:n.accessToken,t])}function cqe(t){"use forget";const e=W.c(87),{onClose:n}=t,s=V(),o=ne(),{eligible:a}=$I();let i;e[0]!==s?(i=()=>ot(s,UI),e[0]=s,e[1]=i):i=e[1];const l=i,[c,d]=_.useState(!0),[u,f]=_.useState(0),m=IT();let g;e[2]!==s?(g=()=>Math.min(390,Math.round(FI(s).height*.4)),e[2]=s,e[3]=g):g=e[3];const p=re(g),h=p<260,x=_.useRef(null);let v,y;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{var Le;(Le=x.current)==null||Le.focus()},y=[],e[4]=v,e[5]=y):(v=e[4],y=e[5]),_.useEffect(v,y);let b;e[6]!==o?(b=o.formatMessage({id:"wham.codexOnboardingModal.title.welcome",defaultMessage:"Your software engineering agent"}),e[6]=o,e[7]=b):b=e[7];let C;e[8]!==o?(C=o.formatMessage({id:"wham.codexOnboardingModal.body.welcome",defaultMessage:"Codex understands your codebase, answers questions, and writes tested code you can ship."}),e[8]=o,e[9]=C):C=e[9];let S;e[10]!==b||e[11]!==C?(S={id:"welcome",image:"https://persistent.oaistatic.com/chatgpt/codex-web-view-diff.png",title:b,body:C},e[10]=b,e[11]=C,e[12]=S):S=e[12];let E;e[13]!==o?(E=o.formatMessage({id:"wham.codexOnboardingModal.title.everywhere",defaultMessage:"Everywhere you work"}),e[13]=o,e[14]=E):E=e[14];let k;e[15]!==o?(k=o.formatMessage({id:"wham.codexOnboardingModal.body.everywhere",defaultMessage:"Codex is built into your IDE, CLI, GitHub, and the web. Work side-by-side locally, or let it keep going in the cloud when you step away."}),e[15]=o,e[16]=k):k=e[16];let T;e[17]!==E||e[18]!==k?(T={id:"everywhere",image:"https://persistent.oaistatic.com/chatgpt/codex-supported-platform-apple-icons.png",title:E,body:k},e[17]=E,e[18]=k,e[19]=T):T=e[19];let M;e[20]!==o?(M=o.formatMessage({id:"wham.codexOnboardingModal.title.code-review",defaultMessage:"Deep code review"}),e[20]=o,e[21]=M):M=e[21];let A;e[22]!==o?(A=o.formatMessage({id:"wham.codexOnboardingModal.body.code-review",defaultMessage:"Codex reviews pull requests using the entire codebase, running code when needed to suggest improvements."}),e[22]=o,e[23]=A):A=e[23];let I;e[24]!==M||e[25]!==A?(I={id:"code-review",image:"https://persistent.oaistatic.com/chatgpt/codex-code-review.png",title:M,body:A},e[24]=M,e[25]=A,e[26]=I):I=e[26];let N;e[27]!==T||e[28]!==I||e[29]!==S?(N=[S,T,I],e[27]=T,e[28]=I,e[29]=S,e[30]=N):N=e[30];const L=N;if(!a||!c)return null;let O;e[31]!==l||e[32]!==n?(O=()=>{l(),d(!1),n==null||n()},e[31]=l,e[32]=n,e[33]=O):O=e[33];const D=O;let $;e[34]===Symbol.for("react.memo_cache_sentinel")?($=()=>{f(Ire)},e[34]=$):$=e[34];const H=$;let G;e[35]!==l||e[36]!==n||e[37]!==L.length||e[38]!==u?(G=()=>{u<L.length-1?f(Are):(l(),d(!1),n==null||n())},e[35]=l,e[36]=n,e[37]=L.length,e[38]=u,e[39]=G):G=e[39];const Z=G;let Q;e[40]!==n?(Q=()=>{d(!1),n==null||n()},e[40]=n,e[41]=Q):Q=e[41];let q;e[42]!==h||e[43]!==o||e[44]!==D||e[45]!==m||e[46]!==L||e[47]!==u||e[48]!==p?(q=!h&&r.jsxs("div",{className:"relative w-full select-none",style:{height:p},children:[r.jsx(fn,{children:r.jsx(Xe.img,{src:L[u].image,alt:o.formatMessage({id:"wham.codexOnboardingModal.illustration",defaultMessage:"Codex onboarding illustration"}),className:"absolute inset-0 h-full w-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:m?1e-5:.25,ease:"easeInOut"}},L[u].image)}),r.jsx("div",{"aria-hidden":!0,className:z("pointer-events-none absolute inset-0 z-10","dark:bg-none","bg-[radial-gradient(ellipse_140%_90%_at_50%_130%,var(--bg-primary)_0%,var(--bg-primary)_50%,transparent_90%)]")}),r.jsx("div",{className:"absolute start-3 top-3 z-20",children:r.jsx(xn,{onClick:D,className:"bg-transparent! text-black/20 transition-transform duration-100 hover:text-black/60 focus-visible:bg-transparent!",bg:"transparent"})})]}),e[42]=h,e[43]=o,e[44]=D,e[45]=m,e[46]=L,e[47]=u,e[48]=p,e[49]=q):q=e[49];let Y;e[50]!==h||e[51]!==D?(Y=h&&r.jsx("div",{className:"absolute start-3 top-3 z-20",children:r.jsx(xn,{onClick:D,className:"bg-transparent! text-black/20 transition-transform duration-100 hover:text-black/60 focus-visible:bg-transparent!",bg:"transparent"})}),e[50]=h,e[51]=D,e[52]=Y):Y=e[52];const te=h?null:"-translate-y-6 dark:-translate-y-0";let ae;e[53]!==te?(ae=z("mx-auto flex h-full max-w-[400px] flex-col items-center justify-center gap-2",te),e[53]=te,e[54]=ae):ae=e[54];const se=L[u];let ce;e[55]!==se.title?(ce=r.jsx("div",{className:"max-w-[260px] text-center text-2xl font-semibold",children:se.title}),e[55]=se.title,e[56]=ce):ce=e[56];const X=L[u];let ee;e[57]!==X.body?(ee=r.jsx("div",{className:"text-token-text-secondary text-md w-full text-center leading-6",children:X.body}),e[57]=X.body,e[58]=ee):ee=e[58];let ie;e[59]!==ae||e[60]!==ce||e[61]!==ee?(ie=r.jsx("div",{className:"relative min-h-[220px] flex-1 select-none",children:r.jsxs("div",{className:ae,children:[ce,ee]})}),e[59]=ae,e[60]=ce,e[61]=ee,e[62]=ie):ie=e[62];let de;e[63]!==u?(de=u>0?r.jsx("div",{children:r.jsx(ye,{color:"secondary",onClick:H,children:r.jsx(j,{id:"wham.codexOnboardingModal.back",defaultMessage:"Back"})})}):r.jsx("div",{}),e[63]=u,e[64]=de):de=e[64];let me;e[65]!==o||e[66]!==L||e[67]!==u?(me=r.jsx("div",{className:"absolute start-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:r.jsx("div",{className:"flex items-center gap-1.5",children:L.map((Le,De)=>r.jsx("button",{type:"button",onClick:()=>f(De),"aria-label":o.formatMessage({id:"wham.codexOnboardingModal.goToStep",defaultMessage:"Go to step {step}"},{step:De+1}),"aria-current":De===u?"page":void 0,className:z("h-1.5 w-1.5 cursor-pointer rounded-full",De===u?"bg-token-text-primary":"bg-token-text-primary opacity-20")},Le.id))})}),e[65]=o,e[66]=L,e[67]=u,e[68]=me):me=e[68];let xe;e[69]!==L.length||e[70]!==u?(xe=u<L.length-1?r.jsx(j,{id:"wham.codexOnboardingModal.continue",defaultMessage:"Continue"}):r.jsx(j,{id:"wham.codexOnboardingModal.done",defaultMessage:"Done"}),e[69]=L.length,e[70]=u,e[71]=xe):xe=e[71];let pe;e[72]!==Z||e[73]!==xe?(pe=r.jsx("div",{className:"ms-auto",children:r.jsx(ye,{color:"primary",onClick:Z,ref:x,children:xe})}),e[72]=Z,e[73]=xe,e[74]=pe):pe=e[74];let Me;e[75]!==de||e[76]!==me||e[77]!==pe?(Me=r.jsxs("div",{className:"relative flex items-center px-6 py-5 pt-2",children:[de,me,pe]}),e[75]=de,e[76]=me,e[77]=pe,e[78]=Me):Me=e[78];let Ce;e[79]!==q||e[80]!==Y||e[81]!==ie||e[82]!==Me?(Ce=r.jsxs("div",{className:"relative flex h-full flex-col",children:[q,Y,ie,Me]}),e[79]=q,e[80]=Y,e[81]=ie,e[82]=Me,e[83]=Ce):Ce=e[83];let ke;return e[84]!==Q||e[85]!==Ce?(ke=r.jsx(Mt,{isOpen:!0,onClose:Q,testId:"modal-codex-onboarding",position:"center",size:"custom",className:"max-h-[90vh] w-[640px] max-w-[640px]",noPadding:!0,showOverlayBackground:!0,shouldIgnoreClickOutside:!0,children:Ce}),e[84]=Q,e[85]=Ce,e[86]=ke):ke=e[86],ke}function Are(t){return t+1}function Ire(t){return t>0?t-1:t}function dqe(){const{eligible:t,isLoading:e}=$I();return e?"loading":t?"show":"hide"}function jre(){const t=V(),e=st(t),{data:n,isLoading:s,isError:o}=bh(e==null?void 0:e.getWorkspaceId()),a=V(),i=ve(a,"616577762");return!(e!=null&&e.isEnterprisey())||i?"ENABLED":s&&n==null?"LOADING":o?"ERROR":n!=null&&n.beta_settings.wham_access?"ENABLED":"DISABLED"}const Nre={red:"bg-red-500",yellow:"bg-yellow-500",blue:"bg-blue-500"},Pre={sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4"},Jj=({color:t,size:e="sm",className:n})=>r.jsx("div",{className:z("rounded-full",t?Nre[t]:void 0,Pre[e],n)});function uqe(t){return Cr(t).checkGate("2067628123")}const Rre=R(()=>P(()=>Promise.resolve().then(()=>Ir),void 0),{loading:t=>F(t)}),Lre=R(()=>P(()=>import("./fgkf4ysztkrzjowg.js"),__vite__mapDeps([123,1])),{loading:t=>F(t)}),G_="oai-chat-backend",fqe=()=>{var o;const[t,e]=_.useState(!1),[n,s]=_.useState(((o=i_.getCookie(G_))==null?void 0:o.toString())==="preview");return r.jsxs(r.Fragment,{children:[r.jsxs(K.CheckboxItem,{icon:Rre,checked:t,onCheckedChange:a=>{e(a),requestAnimationFrame(()=>{window.location.href=a?"/preview":"/public"})},children:["Preview",r.jsx(ed,{children:"web"})]}),r.jsxs(K.CheckboxItem,{icon:Lre,checked:n,onCheckedChange:a=>{a?(s(!0),i_.setCookie(G_,"preview")):i_.deleteCookie(G_),window.location.reload()},children:["Preview",r.jsx(ed,{children:"sa-server"})]})]})};function pb({systemHint:t,modelConfig:e,conversationMode:n,isTemporaryChat:s,isDeveloperMode:o,isWorkspaceTenant:a,startedWithByoMcp:i}){return Ore(t,s)&&Dre(t,e)&&Fre(t,e)&&Bre(t,n)&&Ure(t,o)&&$re(t,a,i)}function Ore(t,e){return!e||t.allowInTemporaryChat===!0}function Dre(t,e){const n=e==null?void 0:e.enabledTools;return n===void 0?!0:t.requiredFeatures.every(s=>n.includes(s))}function Fre(t,e){if(t.systemHint===Pe.Think){const n=e==null?void 0:e.reasoningType;return n==null||n===H4.OFF||n===H4.AUTO}return t.requiredModels.length===0||t.requiredModels.some(n=>n===(e==null?void 0:e.id))}function Bre(t,e){return t.requiredConversationModes.length===0||t.requiredConversationModes.some(n=>n===(e==null?void 0:e.kind))}function Ure(t,e){return e?!0:!t.isDangerous}function $re(t,e,n){return e?!0:!(t.category==="tool"&&(t.isDangerous&&n===!1||!t.isDangerous&&n===!0))}function hb(t){"use forget";const e=W.c(13),{clientThreadId:n,conversationMode:s}=t,o=V(),a=Es(),i=_.useContext(lY),l=zf.useIsEnabled(n!=null?n:"");let c;e[0]!==o?(c=()=>wd(o),e[0]=o,e[1]=c):c=e[1];const d=re(c);let u;e[2]!==o?(u=st(o),e[2]=o,e[3]=u):u=e[3];const f=u;let m;return e[4]!==f||e[5]!==n||e[6]!==s||e[7]!==o||e[8]!==i||e[9]!==d||e[10]!==l||e[11]!==a?(m=g=>{var H,G,Z;let{nodeId:p,sourceEvent:h,requestedModelId:x,appendMessages:v,extraStreamParams:y,isReasoningSkipped:b}=g;if(!n)throw new Error("Regeneration must have clientThreadId");const C=mt(n),S=he.getVariantIds(C,p),E=he.getParentPromptNode(C,p);if(!E)throw new Error("Regeneration must have parent prompt");const k=(H=jT(o).data)!=null?H:[],T=(S==null?void 0:S.length)===1&&(y==null?void 0:y.forceUseSearch)===void 0&&(y==null?void 0:y.forceDisableFeatures)===void 0,M=ea(xt(o,n)),A=NT(M,x),I=XV(C,p),N=(G=E.message.metadata)==null?void 0:G.system_hints,L=x&&N?N.filter(Q=>{var Y;const q=k.find(te=>te.systemHint===Q);return q&&pb({systemHint:q,modelConfig:A,isTemporaryChat:a,conversationMode:s,isDeveloperMode:d,isWorkspaceTenant:(Y=f==null?void 0:f.isWorkspaceAccount())!=null?Y:!1,startedWithByoMcp:C==null?void 0:C.startedWithByoMcp})}):N!=null?N:[];l&&(y=U(w({},y!=null?y:{}),{enableMessageFollowups:!0}));const{systemHints:O,extraStreamParams:D}=Xh(L,y);let $=O;(y==null?void 0:y.forceUseReason)!==void 0&&(y.forceUseReason?$.push(Pe.Think):$=$.filter(Vre)),i({completionType:Qa.Variant,requestedModelId:x,sourceEvent:h,completionMetadata:{variantPurpose:T?"comparison_implicit":"none",conversationMode:s!=null?s:(Z=mt(n))==null?void 0:Z.mode,systemHints:$,searchSource:(y==null?void 0:y.forceUseSearch)===!0?Xu.CONVERSATION_REGENERATE_WITH_SEARCH:(y==null?void 0:y.forceUseSearch)===!1?Xu.CONVERSATION_REGENERATE_WITHOUT_SEARCH:void 0},parentMessageId:E.id,appendMessages:v,extraStreamParams:D,isReasoningSkipped:b,thinkingEffort:I}),b&&Ze(n,Q=>{let q=p,Y=Q.tree.getNodeByIdOrMessageId(q);for(;Y.message.author.role!==Ke.User;)Q.tree.deleteNode(q),q=Y.parentId,Y=Q.tree.getNodeByIdOrMessageId(q)})},e[4]=f,e[5]=n,e[6]=s,e[7]=o,e[8]=i,e[9]=d,e[10]=l,e[11]=a,e[12]=m):m=e[12],m}function Vre(t){return t!==Pe.Think}const Hre=on(t=>St(()=>{const e=eH(t);return e?e.is_adult||!e.age_is_known:!1})),Gre=on(t=>St(()=>{const e=Jc(t,Lt.AmphoraLocks);return e!==void 0&&e[Lt.AtlasAdultSearchAllowed]===!0})),_b=ko(()=>Be(null)),mqe=ko(t=>St(()=>{const{ctx:e}=t,n=Rf(e),s=PT(e),o=Hre(e),a=Gre(e),i=_b(t);return Ko(e)&&!s&&n&&i!=null&&o&&!a}));function Xj(t){"use forget";var y;const e=W.c(15),{conversationMode:n,accountId:s}=t,o=To();let a;e[0]!==o?(a=()=>o&&_b(o),e[0]=o,e[1]=a):a=e[1];const i=re(a),{data:l,isLoading:c}=eo(Lt.AtlasAdultSearchAllowed),{mutateAsync:d,isPending:u}=wl(!0),f=c||u,m=(y=o==null?void 0:o.id)!=null?y:void 0;let g;e[2]!==n||e[3]!==m?(g={clientThreadId:m,conversationMode:n},e[2]=n,e[3]=m,e[4]=g):g=e[4];const p=hb(g);let h;e[5]!==s||e[6]!==l||e[7]!==i||e[8]!==p||e[9]!==d?(h=async(b,C)=>{C===l||!s||(await d({setting:Lt.AtlasAdultSearchAllowed,value:C,account_id:s}),!(!C||!i||i.safeSearchOff)&&p({sourceEvent:b,nodeId:i.messageId}))},e[5]=s,e[6]=l,e[7]=i,e[8]=p,e[9]=d,e[10]=h):h=e[10];const x=h;let v;return e[11]!==x||e[12]!==l||e[13]!==f?(v={isAdultSearchEnabled:l,handleToggleSetting:x,isLoading:f},e[11]=x,e[12]=l,e[13]=f,e[14]=v):v=e[14],v}const Wre=R(()=>P(()=>import("./e0o3s2xody0f0lze.js"),__vite__mapDeps([124,1])),{loading:t=>F(t)});function gqe(t){"use forget";const e=W.c(36),{conversationMode:n,accountId:s}=t;let o;e[0]!==s||e[1]!==n?(o={conversationMode:n,accountId:s},e[0]=s,e[1]=n,e[2]=o):o=e[2];const{isAdultSearchEnabled:a,handleToggleSetting:i,isLoading:l}=Xj(o);let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=z("flex min-w-[155px] items-center justify-between rounded-full p-3 whitespace-nowrap","hover:bg-token-text-secondary text-token-bg-primary bg-token-text-primary focus-visible:bg-token-text-secondary!","dark:bg-token-text-secondary! dark:hover:bg-token-text-primary! dark:focus-visible:bg-token-text-primary!"),e[3]=c):c=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(j,w({},Di.matureContent)),e[4]=d):d=e[4];let u;e[5]!==a||e[6]!==l?(u=!l&&r.jsxs("span",{className:"text-token-text-tertiary dark:text-token-bg-primary/60 whitespace-pre",children:[" ",a?r.jsx(j,w({},Di.on)):r.jsx(j,w({},Di.off))]}),e[5]=a,e[6]=l,e[7]=u):u=e[7];let f;e[8]!==u?(f=r.jsxs("span",{className:"flex",children:[d,u]}),e[8]=u,e[9]=f):f=e[9];let m;e[10]!==l?(m=r.jsx("div",{className:"text-token-text-tertiary dark:text-token-bg-primary/60 min-w-[16px]",children:l?r.jsx(ws,{className:"icon-sm"}):r.jsx(Wre,{className:"icon-md"})}),e[10]=l,e[11]=m):m=e[11];let g;e[12]!==f||e[13]!==m?(g=r.jsxs(K.Trigger,{color:"primary",className:c,children:[f,m]}),e[12]=f,e[13]=m,e[14]=g):g=e[14];const p=a?"on":"off",h=a?"selected":"default";let x,v;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(j,w({},Di.on)),v=r.jsx(j,w({},Di.onDescription)),e[15]=x,e[16]=v):(x=e[15],v=e[16]);let y;e[17]!==i?(y=I=>i(I,!0),e[17]=i,e[18]=y):y=e[18];let b;e[19]!==y||e[20]!==h?(b=r.jsx(K.RadioItem,{color:h,value:"on",label:x,secondary:v,onClick:y}),e[19]=y,e[20]=h,e[21]=b):b=e[21];const C=a?"default":"selected";let S,E;e[22]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx(j,w({},Di.off)),E=r.jsx(j,w({},Di.offDescription)),e[22]=S,e[23]=E):(S=e[22],E=e[23]);let k;e[24]!==i?(k=I=>i(I,!1),e[24]=i,e[25]=k):k=e[25];let T;e[26]!==C||e[27]!==k?(T=r.jsx(K.RadioItem,{color:C,value:"off",label:S,secondary:E,onClick:k}),e[26]=C,e[27]=k,e[28]=T):T=e[28];let M;e[29]!==b||e[30]!==T||e[31]!==p?(M=r.jsx(K.Portal,{children:r.jsx(K.Content,{size:"auto",children:r.jsxs(K.RadioGroup,{value:p,children:[b,T]})})}),e[29]=b,e[30]=T,e[31]=p,e[32]=M):M=e[32];let A;return e[33]!==M||e[34]!==g?(A=r.jsxs(K.Root,{children:[g,M]}),e[33]=M,e[34]=g,e[35]=A):A=e[35],A}const Di=Se({matureContent:{id:"mKrpYD",defaultMessage:"Mature content"},on:{id:"DQDUrG",defaultMessage:"On"},onDescription:{id:"SCtTOO",defaultMessage:"Show explicit links"},off:{id:"jAdHAP",defaultMessage:"Off"},offDescription:{id:"e7voKz",defaultMessage:"Attempt to hide all explicit content"}}),pqe=R(()=>P(()=>import("./fxq0cwt37b3o4eca.js"),__vite__mapDeps([125,1,10,11])).then(t=>t.CalpicoCustomizeChatGPTModalContainer)),hqe=R(()=>P(()=>import("./obwjbyam9sbou40t.js"),__vite__mapDeps([126,1,10,11])).then(t=>t.CalpicoChatMembersModalContainer)),_qe=R(()=>P(()=>import("./dx7wt0mlevfo5zit.js"),__vite__mapDeps([127,1,10,11])).then(t=>t.CalpicoDeleteMessageConfirmationModal)),zre=R(()=>P(()=>import("./d9g1crrqnzebhn08.js"),__vite__mapDeps([128,1,10,11])).then(t=>t.CalpicoEditProfileModal)),xqe=R(()=>P(()=>import("./mgnlt3fr5pzih15r.js"),__vite__mapDeps([129,1,130,10,11])).then(t=>t.CalpicoEmojiPickerModal)),qre=R(()=>P(()=>import("./efe2500dci7w17ko.js"),__vite__mapDeps([131,1,10,11])).then(t=>t.CalpicoLeaveChatConfirmationModalContainer)),Yre=R(()=>P(()=>import("./d4n0ce5usd2dhj6n.js"),__vite__mapDeps([132,1,10,11])).then(t=>t.CalpicoDeleteChatConfirmationModalContainer)),Zre=R(()=>P(()=>import("./jjwueogdqdtz93hf.js"),__vite__mapDeps([133,1,10,11])).then(t=>t.CalpicoManageGroupLinkModalContainer)),Kre=R(()=>P(()=>import("./hb56niamnyufcjyx.js"),__vite__mapDeps([134,1,10,11])).then(t=>t.CalpicoRenameChatModalContainer)),yqe=R(()=>P(()=>import("./d133qpkzi61blr5n.js"),__vite__mapDeps([135,1,10,11])).then(t=>t.CalpicoReportModalContainer)),Cp=R(()=>P(()=>import("./b70xrbxzkuawug2w.js"),__vite__mapDeps([136,1,10,11])).then(t=>t.CalpicoStartChatModalContainer)),vqe=R(()=>P(()=>import("./9rvl5yzajv9sb1kg.js"),__vite__mapDeps([137,1,10,11])).then(t=>t.CalpicoUserProfileModal)),bqe=R(()=>P(()=>import("./dgfzy0uzwwp9rsp0.js"),__vite__mapDeps([138,1,10,11])).then(t=>t.CalpicoNoAccessYetModalContainer)),Lg=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10.4229 11.0137C10.7025 11.0295 10.9779 11.0611 11.248 11.1074L11.6494 11.1875L11.7764 11.2314C12.0578 11.3598 12.2204 11.6722 12.1484 11.9854C12.0762 12.2984 11.7935 12.5086 11.4844 12.501L11.3506 12.4844L11.0234 12.4189C10.8026 12.3811 10.5772 12.3548 10.3477 12.3418L10 12.332C6.87166 12.332 4.4152 14.6882 4.41504 17.5C4.41486 17.8671 4.11716 18.165 3.75 18.165C3.38284 18.165 3.08514 17.8671 3.08496 17.5C3.08512 13.8687 6.22504 11.002 10 11.002L10.4229 11.0137Z"}),_.createElement("path",{d:"M15 11.835C15.3673 11.835 15.665 12.1327 15.665 12.5V14.335H17.5L17.6338 14.3486C17.9369 14.4106 18.165 14.6786 18.165 15C18.165 15.3214 17.9369 15.5894 17.6338 15.6514L17.5 15.665H15.665V17.5C15.665 17.8673 15.3673 18.165 15 18.165C14.6327 18.165 14.335 17.8673 14.335 17.5V15.665H12.5C12.1327 15.665 11.835 15.3673 11.835 15C11.835 14.6327 12.1327 14.335 12.5 14.335H14.335V12.5C14.335 12.1327 14.6327 11.835 15 11.835Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.83496C12.2081 1.83496 13.9979 3.62494 13.998 5.83301C13.998 8.04123 12.2082 9.83203 10 9.83203C7.79178 9.83203 6.00195 8.04123 6.00195 5.83301C6.00213 3.62494 7.79189 1.83496 10 1.83496ZM10 3.16504C8.52643 3.16504 7.33221 4.35948 7.33203 5.83301C7.33203 7.30669 8.52632 8.50195 10 8.50195C11.4737 8.50195 12.668 7.30669 12.668 5.83301C12.6678 4.35948 11.4736 3.16504 10 3.16504Z"})),Qre=Object.freeze(Object.defineProperty({__proto__:null,default:Lg},Symbol.toStringTag,{value:"Module"}));function Tr(t,e){t({pathname:"/",search:(e==null?void 0:e.params)&&"?".concat(e.params)},{replace:e==null?void 0:e.replace,state:tN(e==null?void 0:e.config)})}function eN(){"use no forget";const t=Vn(),e=Xre(t),n=_.useRef(e!=null?e:{});return e?n.current=e:n.current}function x1(){"use forget";const t=W.c(2),e=eN();let n;return t[0]!==e?(n=Jre(),t[0]=e,t[1]=n):n=t[1],n}function Jre(t){return tN()}function tN(t){return{newConversationConfig:w({},t)}}function Xre(t){var e;return(e=t.state)==null?void 0:e.newConversationConfig}function Xf(c){var d=c,{icon:t,mobileIcon:e,color:n="primary",iconClassName:s,children:o,as:a,ref:i}=d,l=we(d,["icon","mobileIcon","color","iconClassName","children","as","ref"]);let u=o;t&&(u=r.jsxs(r.Fragment,{children:[r.jsx(t,{className:z(s!=null?s:"icon",e!=null&&"max-md:hidden")}),e?r.jsx(e,{className:z(s!=null?s:"icon","md:hidden")}):null]}));const f=x1();switch(a){case"link":case"a":{const m=l,{linkProps:g}=m,p=we(m,["linkProps"]),{to:h,state:x}=g!=null?g:{};return r.jsx(wo,U(w({},p),{className:z(n==="primary"?"text-token-text-primary":n==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",l.className),ref:i,to:h!=null?h:"/",state:x!=null?x:f,children:u}))}case"button":default:{const g=l;return r.jsx("button",U(w({},g),{className:z(n==="primary"?"text-token-text-primary":n==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",l.className),ref:i,children:u}))}}}function Cqe(t){"use no forget";const e=V(),n=ne(),s=n.formatMessage({id:"yKEGRx",defaultMessage:"Start a group chat"});if(t.type==="from-conversation"){const a=n.formatMessage({id:"dX9+Fz",defaultMessage:"Add people"});return r.jsx(pt,{label:s,children:r.jsx(ye,{onClick:()=>{const i={type:"from-conversation",serverThreadId:t.serverThreadId};dt(e,Cp,i)},icon:Lg,label:s,"data-testid":"start-group-chat-from-conversation-button",color:"ghost",className:"text-token-text-primary me-2",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:a})})}const o=async()=>{dt(e,Cp,{type:"new-chat"})};return r.jsx(pt,{label:s,children:t.variant==="default"?r.jsx(Xf,{className:"me-1 rounded-full!","aria-label":s,onClick:o,icon:Lg}):r.jsx(ye,{className:"text-token-text-secondary me-1 rounded-lg",color:"ghost",icon:Lg,onClick:o,label:s})})}function Sqe(){return oh("/gg/*")!=null}function eie(){var e;const t=oh("/gg/:id");return(e=t==null?void 0:t.params.id)!=null?e:null}function tie(){var e;const t=dK("/gg/:id");return(e=t==null?void 0:t.params.id)!=null?e:null}function nie(t,e=240){var a;const s=((a=t.preview)!=null?a:"").trim().replace(/\s+/g," ");return s.length>e?"".concat(s.slice(0,e),""):s}function wqe(t,e){const n=new Date,s=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=new Date(n.getFullYear(),n.getMonth(),n.getDate()-1),a=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1),i=new Date(s);i.setDate(i.getDate()-6);const l=new Intl.DateTimeFormat(e,{hour:"numeric",minute:"2-digit"}).format(t),c=new Intl.RelativeTimeFormat(e,{numeric:"auto"});if(t>=s&&t<a)return{date:W_(c.format(0,"day"),e),time:l};if(t>=o&&t<s)return{date:W_(c.format(-1,"day"),e),time:l};if(t>=i&&t<o){const g=new Intl.DateTimeFormat(e,{weekday:"long"});return{date:W_(g.format(t),e),time:l}}const d=t.getFullYear()===n.getFullYear(),u=w({month:"long",day:"numeric"},d?{}:{year:"numeric"});return{date:new Intl.DateTimeFormat(e,u).format(t),time:l}}function W_(t,e){const[n="",...s]=RT(t);return n?"".concat(n.toLocaleUpperCase(e)).concat(s.join("")):t}var wx=(t=>(t.CreateRoom="calpico_create_room",t))(wx||{});const sie=window.location.origin+"/backend-api/sentinel/sdk.js",id=globalThis,nN=!!(id.window&&id.document)&&!0;function oie(){return new Promise((t,e)=>{var o;const n=id.document;if(!n){e(new Error("Sentinel SDK script cannot be injected outside the browser"));return}const s=n.createElement("script");s.type="text/javascript",s.src=sie,s.async=!0,s.defer=!0,s.onload=t,s.onerror=a=>{e(a!=null?a:new Error("Failed to load Sentinel SDK script"))},(o=n.head)==null||o.appendChild(s)})}const aie=(()=>{let t;return()=>(t||(nN?(t=oie(),t.then(()=>{var e;try{(e=id.SentinelSDK)==null||e.init("calpico_init")}catch(n){Fe.addError("Sentinel SDK init failed",{error:n})}})):t=Promise.resolve()),t)})();function EC(t){const e={};return t&&(e["OpenAI-Sentinel-Token"]=t),e}function rie(t){return nN?aie().then(()=>{if(!id.SentinelSDK)throw new Error("Sentinel SDK not initialized");return id.SentinelSDK.token(t)}):Promise.resolve("disabled")}const iie=2e3,TC=3e3,lie=20,cie=5;function die(t,e){var s;const n=(s=st(t))==null?void 0:s.normalizedAccountUserId;return e.role==="user"&&e.accountUserId===n}function uie(t,e,n){var o;return{id:(o=t.id)!=null?o:"".concat(e,":raw:").concat(n),author:t.author,content:t.content,create_time:t.create_time,update_time:t.update_time,end_turn:t.end_turn,weight:t.weight,metadata:t.metadata,recipient:t.recipient,channel:t.channel,status:t.status}}function MC(t){if(!t)return null;const e=t.message;if(!e)return U(w({},t),{message:null});const n=$u(e);return U(w({},t),{message:n})}function fie(t){return t?U(w({},t),{message:null}):null}function $u(t){var e,n,s,o,a,i,l;if(t.role==="user")return{id:t.id,role:"user",accountUserId:t.account_user_id,content:t.content,reactions:(e=t.reactions)!=null?e:{},replyTo:MC(t.reply_to),createdAt:new Date(t.created_at),deletedAt:t.deleted_at?new Date(t.deleted_at):null,preview:(n=t.preview)!=null?n:null};if(t.role==="assistant")return{id:t.id,role:"assistant",rawMessages:((s=t.raw_messages)!=null?s:[]).map((c,d)=>uie(c,t.id,d)),reactions:(o=t.reactions)!=null?o:{},replyTo:MC(t.reply_to),createdAt:new Date(t.created_at),attachments:(a=t.attachments)!=null?a:[],deletedAt:t.deleted_at?new Date(t.deleted_at):null,preview:(i=t.preview)!=null?i:null,modelSlug:(l=t.model_slug)!=null?l:null};if(t.role==="system")return{id:t.id,role:"system",content:t.content,createdAt:new Date(t.created_at),message:t.content.text,preview:t.preview};throw new Error("Unknown message response type: ".concat(t.role))}function AC(t,e){vo(()=>{const n=t(),s=e.map($u),o=new Map;for(const i of[...n,...s])o.set(i.id,i);const a=Array.from(o.values()).sort((i,l)=>i.createdAt.getTime()-l.createdAt.getTime());t.set(a)})}function mie(t,e){var o,a;const n=(o=t.text)!=null?o:"",s=(a=t.attachments)==null?void 0:a.map((i,l)=>{switch(i==null?void 0:i.type){case"file":return{type:"file",file_id:i.file_id};case"link":return{type:"link",url:i.url,title:i.title};case"post":return{type:"post",post_id:i.post_id};case"conversation":return{type:"conversation",conversation_id:i.conversation_id};case"media":return{type:"media",post_id:i.post_id,generation_id:i.generation_id,generation_type:i.generation_type,title:i.title,conversation_id:i.conversation_id,message_id:i.message_id};case"sticker":{let c=null;const d=e==null?void 0:e[l];return(d==null?void 0:d.type)==="sticker"&&(c=d.image_url),{type:"sticker",sticker_id:i.sticker_id,image_url:c}}case"sticker_pack":return{type:"sticker_pack",sticker_ids:i.sticker_ids};default:return i}});return{text:n,attachments:s}}class gie{constructor(e){J(this,"hasFetchedRooms$",Be(!1));J(this,"rooms$",Be(new Map));J(this,"users$",Be(new Map));J(this,"userAttributes$",Be(null));J(this,"userProfileSnapshots$",Be(new Map));J(this,"sortedRooms$",St(()=>Array.from(this.rooms$().values()).sort((n,s)=>{const o=n.pinned$(),a=s.pinned$();return o!==a?o?-1:1:s.updatedAt$().getTime()-n.updatedAt$().getTime()})));J(this,"totalUnreadMessageCount$",St(()=>Array.from(this.rooms$().values()).reduce((e,n)=>e+n.unreadMessageCount$(),0)));J(this,"messageDebugMode$",Be(!1));J(this,"roomsPaginationCursor$",Be(hie));J(this,"isFetchingMoreRooms$",Be(!1));J(this,"selfProfile$",St(()=>{var n,s;const e=(n=st(this.ctx))==null?void 0:n.normalizedAccountUserId;return e==null?null:(s=this.users$().get(e))!=null?s:null}));J(this,"_handlePubSubMessage",e=>{var n;switch(e.type){case"calpico-message-add":{const{room_id:s,message:o}=e.payload;this._handleMessagesResponse$(s,[o]),this._cancelHeartbeat$(s,o),this._drawNotification$(s,o);break}case"calpico-message-update":{const{room_id:s,message:o}=e.payload;this._handleMessageUpdate$(s,o);break}case"calpico-room-update":{const{room:s}=e.payload;this._handleRoomsResponse$({response:[s],fetchSource:"pubsub"});break}case"calpico-room-read":{const{room_id:s,last_read_at:o}=e.payload;this._markRoomRead$(s,new Date(o));break}case"calpico-is-responding-heartbeat":{this._handleHeartbeatPayload$(e.payload);break}case"user-leave-room":{const{room_id:s,account_user_id:o,snapshot:a}=e.payload,i=new Map(this.userProfileSnapshots$());i.set(o,{accountUserId:a.account_user_id,name:a.name,avatarUrl:a.avatar_url,username:a.username}),this.userProfileSnapshots$.set(i);const l=this.rooms$().get(s);if(l){l.members$.set(l.members$().filter(d=>d.accountUserId!==o));const c=new Map(l.memberProfileSnapshots$().map(d=>[d.accountUserId,d]));c.set(o,{accountUserId:a.account_user_id,name:a.name,avatarUrl:a.avatar_url,username:a.username}),l.memberProfileSnapshots$.set(Array.from(c.values()))}o===((n=this.selfProfile$())==null?void 0:n.accountUserId)&&this.rooms$.set(c=>(c.delete(s),c));break}case"calpico-room-leave":{const{room_id:s}=e.payload;this.rooms$.set(o=>(o.delete(s),o));break}}});J(this,"_drawNotification$",(e,n)=>{if(!ve(this.ctx,"1497872396")||e===tie())return;const s=$u(n);if(s.role==="system")return;const o=this.rooms$().get(e);if(o==null)return;let a=nie(s,50),i=null;if(s.role==="user"){const l=this.users$().get(s.accountUserId);if(l==null)return;i={name:l.name,picture:l.avatarUrl},a="".concat(l.name,": ").concat(a)}lf({clientThreadId:e,title:o.name$(),subtitle:a,userAvatar:i,timeout:5e3,onClick:()=>{HM("/gg/".concat(e))}})});J(this,"_handleRoomsResponse$",({response:e,fetchSource:n})=>{vo(()=>{e.forEach(s=>{var u,f,m,g,p,h,x,v;const o=this.rooms$(),a=s.members.flatMap(y=>{var b,C;return y.role==="user"?[{role:"user",accountUserId:y.account_user_id,name:y.name,avatarUrl:y.avatar_url,avatarFileId:y.avatar_file_id,username:y.username,isBlocked:(b=y.is_blocked)!=null?b:!1,canMessage:(C=y.can_message)!=null?C:!1}]:[]}),i=s.member_profile_snapshots.map(y=>({accountUserId:y.account_user_id,name:y.name,avatarUrl:y.avatar_url,username:y.username})),l=o.get(s.id);if(l){if(n==="summary"&&l.fetchSource$()!=="summary")return;s.latest_messages&&(z_(this.ctx,s.latest_messages),AC(l.messages$,s.latest_messages)),l.members$.set(a),l.memberProfileSnapshots$.set(i),l.name$.set(s.name),l.shouldAutoRespond$.set((u=s.should_auto_respond)!=null?u:null),l.pinned$.set(s.pinned===!0),l.assistantPersonality$.set(typeof s.assistant_personality=="string"&&s.assistant_personality||""),l.groupLink$.set((f=s.magic_link_url)!=null?f:null),l.groupLinkShareText$.set((m=s.magic_link_share_text)!=null?m:null),l.fetchSource$.set(n)}else{s.latest_messages&&z_(this.ctx,s.latest_messages);const y={id:s.id,type:s.type,name$:Be(s.name),assistantPersonality$:Be(typeof s.assistant_personality=="string"&&s.assistant_personality||""),members$:Be(a),memberProfileSnapshots$:Be(i),messages$:Be(s.latest_messages?s.latest_messages.map($u):[]),optimisticMessages$:Be([]),threadSidebar$:Be(null),viewMessages$:St(()=>{const C=y.messages$(),S=y.optimisticMessages$();let E=[...C,...S];return E.sort((k,T)=>k.createdAt.getTime()-T.createdAt.getTime()),E=E.filter(k=>k.role==="system"?!0:k.deletedAt==null),E}),lastReadAt$:Be(s.last_read_at?new Date(s.last_read_at):null),isFetchingMessages$:Be(!1),hasFetchedBeginning$:Be(!1),createdAt:new Date,assistantHeartbeats$:Be([]),userHeartbeats$:Be([]),updatedAt$:St(()=>{var S,E;const C=y.viewMessages$();return(E=(S=bo(C))==null?void 0:S.createdAt)!=null?E:new Date(s.updated_at)}),pinned$:Be(s.pinned===!0),unreadMessageCount$:St(()=>{const C=y.lastReadAt$();return C==null?0:y.messages$().filter(E=>!die(this.ctx,E)&&E.createdAt>C).length}),shouldAutoRespond$:Be((g=s.should_auto_respond)!=null?g:null),groupLink$:Be((p=s.magic_link_url)!=null?p:null),groupLinkShareText$:Be((h=s.magic_link_share_text)!=null?h:null),shouldInsertHeader$:St(()=>y.messages$().some(C=>C.role==="system"&&C.content.type==="create_magic_link")),creatorAccountUserId$:Be(Ks(s.creator_account_user_id)),fetchSource$:Be(n),_oai_internal_roomSystemInstructions:(x=s.oai_internal_system_instructions)!=null?x:null,_oai_internal_speakDecisionToolDescription:(v=s.oai_internal_speak_decision_tool_description)!=null?v:null},b=new Map(o);b.set(s.id,y),this.rooms$.set(b)}const c=new Map(this.users$());for(const y of a)c.set(y.accountUserId,{accountUserId:y.accountUserId,name:y.name,avatarUrl:y.avatarUrl,username:y.username});this.users$.set(c);const d=new Map(this.userProfileSnapshots$());for(const y of i)d.set(y.accountUserId,y);this.userProfileSnapshots$.set(d)})})});J(this,"_handleMessagesResponse$",(e,n)=>{var a;const s=this.rooms$().get(e);if(!s)return;const o=(a=st(this.ctx))==null?void 0:a.normalizedAccountUserId;for(const i of n)i.role==="user"&&i.account_user_id===o&&i.request_id&&s.optimisticMessages$.set(l=>l.filter(c=>c.requestId!==i.request_id));z_(this.ctx,n),AC(s.messages$,n)});J(this,"_handleMessageUpdate$",(e,n)=>{const s=this.rooms$().get(e);s&&s.messages$.set(Nc(o=>{const a=o.findIndex(i=>i.id===n.id);a!==-1&&(o[a]=$u(n))},s.messages$()))});J(this,"_handleHeartbeatPayload$",e=>{var l,c;const{source:n,room_id:s,timestamp:o}=e,a=this.rooms$().get(s);if(a==null)return;const i=new Date(o*1e3);switch(n.role){case"user":{a.userHeartbeats$.set(d=>{const u=setTimeout(()=>{a.userHeartbeats$.set(m=>m.filter(g=>g.accountUserId!==n.account_user_id))},TC),f=d.find(m=>m.accountUserId===n.account_user_id);if(f!=null){const m=w({},f);return m.timestamp=i,clearTimeout(m.timeoutRef),m.timeoutRef=u,d.map(g=>g.accountUserId===n.account_user_id?m:g)}else return[...d,{accountUserId:n.account_user_id,timestamp:i,timeoutRef:u}]});break}case"assistant":{for(const u of a.assistantHeartbeats$())clearTimeout(u.timeoutRef);const d=setTimeout(()=>{a.assistantHeartbeats$.set(u=>u.filter(f=>f.modelSlug!==n.model_slug))},TC);a.assistantHeartbeats$.set([{modelSlug:n.model_slug,taskType:(l=n.task_type)!=null?l:null,timestamp:i,timeoutRef:d,message:(c=n.message)!=null?c:null}]);break}}});J(this,"_cancelHeartbeat$",(e,n)=>{if(n.role==null)return;const s=this.rooms$().get(e);if(s!=null)switch(n.role){case"assistant":{for(const o of s.assistantHeartbeats$())clearTimeout(o.timeoutRef);s.assistantHeartbeats$.set([]);break}case"user":{s.userHeartbeats$.set(o=>{const a=o.find(i=>i.accountUserId===n.account_user_id);return a==null?o:(clearTimeout(a.timeoutRef),o.filter(i=>i.accountUserId!==n.account_user_id))});break}}});J(this,"_fetchRoomsSidebarLightweight$",async(e=null)=>{const n=await ge.safeGet("/calpico/chatgpt/rooms/summary",{parameters:{query:{cursor:e,limit:cie}}});return vo(()=>{var s;this.hasFetchedRooms$.set(!0),this._handleRoomsResponse$({response:n.items.map(o=>{var a,i,l;return U(w({},o),{creator_account_user_id:(a=o.creator_account_user_id)!=null?a:null,magic_link_url:(i=o.magic_link_url)!=null?i:null,magic_link_share_text:(l=o.magic_link_share_text)!=null?l:null,member_profile_snapshots:[]})}),fetchSource:"summary"}),this.roomsPaginationCursor$.set((s=n.cursor)!=null?s:null)}),n});J(this,"fetchMoreRooms$",async()=>{const e=this.roomsPaginationCursor$();if(!(this.isFetchingMoreRooms$()||e==null)){this.isFetchingMoreRooms$.set(!0);try{await this._fetchRoomsSidebarLightweight$(e)}finally{this.isFetchingMoreRooms$.set(!1)}}});J(this,"fetchRoom$",async e=>{const n=await ge.safeGet("/calpico/chatgpt/rooms/{room_id}",{parameters:{path:{room_id:e}}});return this._handleRoomsResponse$({response:[n],fetchSource:"rest-full"}),n});J(this,"createRoom$",async e=>{const n={};try{const o=await rie(wx.CreateRoom);Object.assign(n,EC(o))}catch(o){const a=o instanceof Error?o.message:"Failed to get sentinel token";Object.assign(n,EC(a)),Fe.addError("Calpico sentinel token fetch failed",{error:o,sentinelFlow:wx.CreateRoom,errorMessage:a})}const s=await ge.safePost("/calpico/chatgpt/rooms",{requestBody:e,additionalHeaders:n});return this._handleRoomsResponse$({response:[s],fetchSource:"rest-full"}),s});J(this,"shareThreadToCalpico$",async e=>{if(!e)throw new Error("Cannot share conversation without server thread id");return this._createRoomFromSinglePlayerThread$(e)});J(this,"_createRoomFromSinglePlayerThread$",async e=>{const n={room_type:"GROUP_DM",with_user_emails:[],with_account_user_ids:[],with_conversation_id:e};return this.createRoom$(n)});J(this,"removeMemberFromRoom$",async(e,n)=>{const s=await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}/members/{account_user_id}",{parameters:{path:{room_id:e,account_user_id:n}}});return this._handleRoomsResponse$({response:[s],fetchSource:"rest-full"}),s});J(this,"editRoom$",async(e,n)=>{const s=await ge.safePatch("/calpico/chatgpt/rooms/{room_id}",{parameters:{path:{room_id:e}},requestBody:n});return this._handleRoomsResponse$({response:[s],fetchSource:"rest-full"}),s});J(this,"leaveRoom$",async e=>{await ge.safePost("/calpico/chatgpt/rooms/{room_id}/leave",{parameters:{path:{room_id:e}}});const n=new Map(this.rooms$());n.delete(e),this.rooms$.set(n)});J(this,"deleteRoom$",async e=>{await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}",{parameters:{path:{room_id:e}}});const n=new Map(this.rooms$());n.delete(e),this.rooms$.set(n)});J(this,"sendMessage$",async(e,n,s)=>{var i;const o=this.rooms$().get(e),a=(i=st(this.ctx))==null?void 0:i.normalizedAccountUserId;o&&a&&n.request_id?await this._postAndUpdateOptimisticMessage$(o,a,n,s):await this._postAndUpdateMessages$(e,n)});J(this,"_setOptimisticMessageDeliveryState$",(e,n,s,o)=>{e.optimisticMessages$.set(a=>a.map(i=>i.requestId===n?U(w({},i),{deliveryState:s,deliveryErrorMessage:o}):i))});J(this,"_postAndUpdateOptimisticMessage$",async(e,n,s,o)=>{if(!s.request_id)return await this._postAndUpdateMessages$(e.id,s);const a={id:s.request_id,role:"user",accountUserId:n,content:mie(s.content,o),createdAt:new Date,reactions:{},replyTo:fie(s.reply_to),deliveryState:"pending",requestId:s.request_id,deletedAt:null,preview:s.content.text,deliveryErrorMessage:null};e.optimisticMessages$.set(i=>{const l=[...i,a];return l.sort((c,d)=>c.createdAt.getTime()-d.createdAt.getTime()),l});try{await this._postAndUpdateMessages$(e.id,s)}catch(i){const l=LT(i);this._setOptimisticMessageDeliveryState$(e,s.request_id,"failed",l)}});J(this,"fetchMessages$",async({roomId:e,before:n=null,after:s=null})=>{const o=this.rooms$().get(e);if(!o)return[];if(n!=null&&o.hasFetchedBeginning$()||o.isFetchingMessages$())return[];o.isFetchingMessages$.set(!0);try{const a=await ge.safeGet("/calpico/chatgpt/rooms/{room_id}/messages",{parameters:{path:{room_id:e},query:{before:n,after:s,limit:lie}}});return n!=null&&a.items.length===0&&o.hasFetchedBeginning$.set(!0),this._handleMessagesResponse$(e,a.items),a.items}finally{o.isFetchingMessages$.set(!1)}});J(this,"fetchMoreMessages$",(e,n)=>{const s=this.rooms$().get(e);if(!s)return;const o=s.messages$(),a=n==="before"&&o[0]?o[0].id:null,i=n==="after"&&o.length>0?o[o.length-1].id:null;return this.fetchMessages$({roomId:e,before:a,after:i})});J(this,"deleteMessage$",async(e,n)=>{const s=this.rooms$().get(e);s&&(s.messages$.set(o=>o.filter(a=>a.id!==n)),await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}/messages/{message_id}",{parameters:{path:{room_id:e,message_id:n}}}))});J(this,"_markRoomRead$",(e,n)=>{const s=this.rooms$().get(e);s&&s.lastReadAt$.set(n)});J(this,"markRoomRead$",async(e,n)=>{var o;await Ch(()=>nH(this.ctx));const s=(o=this.rooms$().get(e))==null?void 0:o.lastReadAt$();(s==null||n>s)&&(await ge.safePost("/calpico/chatgpt/rooms/{room_id}/read",{parameters:{path:{room_id:e}},requestBody:{last_read_at:new Date().toISOString()}}),this._markRoomRead$(e,n))});J(this,"_addReactionLocal$",(e,n,s,o)=>{const a=this.rooms$().get(e);a&&a.messages$.set(Nc(i=>{const l=i.find(c=>c.id===n);l&&l.role!=="system"&&(l.reactions[s]=o)},a.messages$()))});J(this,"_removeReactionLocal$",(e,n,s)=>{const o=this.rooms$().get(e);o&&o.messages$.set(Nc(a=>{const i=a.find(l=>l.id===n);i&&i.role!=="system"&&delete i.reactions[s]},o.messages$()))});J(this,"addMessageReaction$",async(e,n,s)=>{var a;const o=(a=st(this.ctx))==null?void 0:a.normalizedAccountUserId;o&&this._addReactionLocal$(e,n,o,s.reaction),await ge.safePost("/calpico/chatgpt/rooms/{room_id}/messages/{message_id}/reactions",{parameters:{path:{room_id:e,message_id:n}},requestBody:s})});J(this,"removeMessageReaction$",async(e,n)=>{var o;const s=(o=st(this.ctx))==null?void 0:o.normalizedAccountUserId;s&&this._removeReactionLocal$(e,n,s),await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}/messages/{message_id}/reactions",{parameters:{path:{room_id:e,message_id:n}}})});J(this,"_fetchSelfProfile$",async()=>{var o,a;const e=(o=st(this.ctx))==null?void 0:o.normalizedAccountUserId;if(e==null)return null;const n=await ge.safeGet("/calpico/chatgpt/profile/{user_id}",{parameters:{path:{user_id:e}}}),s=new Map(this.users$());return s.set(e,{accountUserId:e,name:(a=n.display_name)!=null?a:"User",avatarUrl:n.profile_picture_url,username:n.username}),this.users$.set(s),n});J(this,"updateSelfProfile$",async e=>{var a,i;const n=(a=st(this.ctx))==null?void 0:a.normalizedAccountUserId;if(n==null)return null;const s=await ge.safePost("/calpico/chatgpt/profile/{user_id}",{parameters:{path:{user_id:n}},requestBody:e}),o=new Map(this.users$());return o.set(n,{accountUserId:n,name:(i=s.display_name)!=null?i:"User",avatarUrl:s.profile_picture_url,username:s.username}),this.users$.set(o),s});J(this,"updateSelfUsername$",async e=>{var a,i;const n=(a=st(this.ctx))==null?void 0:a.normalizedAccountUserId;if(n==null)return null;const s=await ge.safePost("/calpico/chatgpt/profile/{user_id}/username",{parameters:{path:{user_id:n}},requestBody:e}),o=new Map(this.users$());return o.set(n,{accountUserId:n,name:(i=s.display_name)!=null?i:"User",avatarUrl:s.profile_picture_url,username:s.username}),this.users$.set(o),s});J(this,"acceptMagicLink$",async e=>{const n=await ge.safePost("/calpico/chatgpt/links",{requestBody:e});switch(n.content.type){case"invitation_redeemed":{const s=n.content.room_id;return this.fetchRoom$(s),{roomId:s}}case"noop":return null;default:throw new Error("Unknown redeem response type: ".concat(n.content.type))}});J(this,"createGroupLink$",async({roomId:e})=>{const n=await ge.safePost("/calpico/chatgpt/rooms/{room_id}/group_link",{parameters:{path:{room_id:e}}}),s=Ks(n.magic_link_url),o=Ks(n.magic_link_share_text),i=this.rooms$().get(n.room_id);return i==null||(i.groupLink$.set(s),i.groupLinkShareText$.set(o)),s});J(this,"deleteGroupLink$",async({roomId:e})=>{await ge.safeDelete("/calpico/chatgpt/rooms/{room_id}/group_link",{parameters:{path:{room_id:e}}});const s=this.rooms$().get(e);if(s==null)return null;s.groupLink$.set(null),s.groupLinkShareText$.set(null)});J(this,"resetGroupLink$",async({roomId:e})=>{const n=await ge.safePatch("/calpico/chatgpt/rooms/{room_id}/group_link",{parameters:{path:{room_id:e}}}),s=Ks(n.magic_link_url),o=Ks(n.magic_link_share_text),i=this.rooms$().get(n.room_id);return i==null||(i.groupLink$.set(s),i.groupLinkShareText$.set(o)),s});J(this,"openThreadSidebar$",(e,n)=>{if(n.type!=="product")return;const s=e.messages$().find(o=>o.role!=="assistant"?!1:o.rawMessages.find(a=>a.id===n.messageId));if(s!=null)return e.threadSidebar$.set(U(w({},n),{calpicoMessageId:s.id}))});J(this,"closeThreadSidebar$",e=>{e.threadSidebar$.set(null)});J(this,"_fetchUserAttributes$",async()=>{const e=await ge.safeGet("/calpico/chatgpt/user_attributes");return this.userAttributes$.set({onboardedAt:e.onboarded_at?new Date(e.onboarded_at):null}),e});J(this,"setUserOnboardingCompletion$",async()=>{const e=await ge.safePost("/calpico/chatgpt/user_attributes/onboarding_completion");this.userAttributes$.set({onboardedAt:e.onboarded_at?new Date(e.onboarded_at):null})});if(this.ctx=e,!this.hasAccess)return;this._fetchRoomsSidebarLightweight$(),this._fetchSelfProfile$(),this._fetchUserAttributes$();const s=tH(e).getTopic("calpico-chatgpt");s.subscribe(),s.onMessage(this._handlePubSubMessage)}get hasAccess(){return ve(this.ctx,"3096078201")}async _postAndUpdateMessages$(e,n){await ge.safePost("/calpico/chatgpt/rooms/{room_id}/messages",{parameters:{path:{room_id:e}},requestBody:n}),await this.fetchMoreMessages$(e,"after")}}async function pie({roomId:t}){return await ge.safePost("/calpico/chatgpt/rooms/{room_id}/responding_heartbeat",{parameters:{path:{room_id:t}}})}const kqe=u3(pie,iie,{trailing:!1}),em=Hn(t=>new gie(t)),hie=null;function xb(t){const e=V(),n=em(e);return re(()=>{var s,o;return n.hasAccess&&(o=(s=n.users$().get(t))!=null?s:n.userProfileSnapshots$().get(t))!=null?o:null})}function Eqe(t){var e,n;return(n=(e=xb(t))==null?void 0:e.name)!=null?n:"User"}function Tqe(t){var e,n;return(n=(e=xb(t))==null?void 0:e.avatarUrl)!=null?n:""}function _ie(t){return Xn({queryKey:["calpico-file",t],queryFn:()=>ge.safeGet("/calpico/chatgpt/files/{file_id}",{parameters:{path:{file_id:t}}}),staleTime:OT})}function z_(t,e){var s;const n=Qo(t);for(const o of e)if(o.role==="user"){const a=(s=o.content.attachments)!=null?s:[];for(const i of a)i.type==="file"&&i.file&&n.setQueryData(_ie(i.file_id).queryKey,i.file)}}var q_,IC;function xie(){if(IC)return q_;IC=1;var t=sH();function e(n,s,o,a){return t(n,function(i,l,c){s(a,o(i),l,c)}),a}return q_=e,q_}var Y_,jC;function yie(){if(jC)return Y_;jC=1;var t=xie();function e(n,s){return function(o,a){return t(o,n,s(a),{})}}return Y_=e,Y_}var Z_,NC;function vie(){if(NC)return Z_;NC=1;var t=oH(),e=yie(),n=ah(),s=Object.prototype,o=s.toString,a=e(function(i,l,c){l!=null&&typeof l.toString!="function"&&(l=o.call(l)),i[l]=c},t(n));return Z_=a,Z_}var bie=vie();const Cie=Zn(bie);function yb(t,e){var a,i,l,c;if(!t||e==null)return null;const{resolveTempTextdocId:n}=t,s=(a=n==null?void 0:n[e])!=null?a:e;let o=(l=(i=t.textdocById[s])!=null?i:t.textdocById[e])!=null?l:null;if(!o&&n){const d=Cie(n);o=(c=t.textdocById[d[s]])!=null?c:null}return o}var K_=N$();const Sp=Symbol(),Sie=Symbol(),wie=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),sN=wie?_.useEffect:_.useLayoutEffect,kie=K_.unstable_runWithPriority?t=>{try{K_.unstable_runWithPriority(K_.unstable_NormalPriority,t)}catch(e){if(e.message==="Not implemented.")t();else throw e}}:t=>t(),Eie=t=>({value:n,children:s})=>{const o=_.useRef(n),a=_.useRef(0),[i,l]=_.useState(null);i&&(i(n),l(null));const c=_.useRef();if(!c.current){const d=new Set,u=(f,m)=>{a.current+=1;const g={n:a.current};m!=null&&m.suspense&&(g.n*=-1,g.p=new Promise(p=>{l(()=>h=>{g.v=h,delete g.p,p(h)})})),d.forEach(p=>p(g)),f()};c.current={[Sp]:{v:o,n:a,l:d,u}}}return sN(()=>{o.current=n,a.current+=1,kie(()=>{c.current[Sp].l.forEach(d=>{d({n:a.current,v:n})})})},[n]),_.createElement(t,{value:c.current},s)};function Tie(t){const e=_.createContext({[Sp]:{v:{current:t},n:{current:-1},l:new Set,u:n=>n()}});return e[Sie]=e.Provider,e.Provider=Eie(e.Provider),delete e.Consumer,e}function Mie(t,e){const n=_.useContext(t)[Sp],{v:{current:s},n:{current:o},l:a}=n,i=e(s),[l,c]=_.useReducer((d,u)=>{if(!u)return[s,i];if("p"in u)throw u.p;if(u.n===o)return Object.is(d[1],i)?d:[s,i];try{if("v"in u){if(Object.is(d[0],u.v))return d;const f=e(u.v);return Object.is(d[1],f)?d:[u.v,f]}}catch(f){}return[...d]},[s,i]);return Object.is(l[1],i)||c(),sN(()=>(a.add(c),()=>{a.delete(c)}),[a]),l[1]}var kx=(t=>(t.NATIVE="native",t.LAST_TURN="last_turn",t))(kx||{});const oN=Tie(null);function Aie(){return{lastCanvasAssistantMessageById:{},resolveTempCommentId:{},resolveTempTextdocId:{},latestTextdocId:null}}function aN(t){return w({fetchError:null,isFetchingFromPersistence:!1,textdocById:{},allTextdocIdSet:{},streamingSource:null},t!=null?t:Aie())}function Xr(t,e){return Nc(t,e)}function Vu(t,e,n=!0){var o,a,i,l;const s=t.textdocById[e.textdocId];if(s)t.textdocById[e.textdocId]=s,s.metadata.type=e.type,s.metadata.title=e.title,s.metadata.updatedAt=e.createdAt,s.metadata.contentReferences=(i=e.metadata)==null?void 0:i.content_references,s.metadata.hiveId=(l=e.metadata)==null?void 0:l.hive_id,n?s.versions.push(e):s.versions[s.versions.length-1]=e;else{const c={metadata:{textdocId:e.textdocId,type:e.type,title:e.title,createdAt:e.createdAt,updatedAt:e.createdAt,contentReferences:(o=e.metadata)==null?void 0:o.content_references,hiveId:(a=e.metadata)==null?void 0:a.hive_id},versions:[e]};t.allTextdocIdSet[e.textdocId]=e.textdocId,t.textdocById[e.textdocId]=c}}var Iie=ah();const jie=Zn(Iie);function So(t=jie){return Mie(oN,t)}function Nie(){return So(t=>t==null?void 0:t.isFetchingFromPersistence)}function Mqe(){return So(t=>t==null?void 0:t.resolveTempCommentId)}function Pie(){return So(t=>{var e;return(e=t==null?void 0:t.latestTextdocId)!=null?e:null})}function Aqe(){return So(t=>{var e;return(e=t==null?void 0:t.streamingSource)!=null?e:null})}function Iqe(t){return So(e=>yb(e,t))}function y1(t){return So(e=>{var n,s;return(s=(n=yb(e,t))==null?void 0:n.metadata)!=null?s:null})}function rN(){const t=So(e=>e==null?void 0:e.allTextdocIdSet);return t?Object.keys(t):null}function Rie(){return So(t=>t?Object.keys(t.allTextdocIdSet).length>1:!1)}function Lie({textdocId:t,assistantMessageId:e}){return So(n=>{const s=n==null?void 0:n.lastCanvasAssistantMessageById;return s==null||t==null?!0:s[t]==null||s[t]===e})}function iN(){return xi(t=>t.focusedObject)}function jqe(){const t=xi(e=>e.focusedObject);return(t==null?void 0:t.type)!==cl.Textdoc?null:t}function tm(){return iN()!=null}function vb(t){const e=iN();return So(n=>{var i,l,c;if(!t||(e==null?void 0:e.type)!==cl.Textdoc)return!1;const s=(i=n==null?void 0:n.resolveTempTextdocId)!=null?i:{},o=(l=s[e.textdocId])!=null?l:e.textdocId,a=(c=s[t])!=null?c:t;return o===a})}const Oie=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),Die=({children:t})=>{const e=rN(),n=Eo();return!(e!=null&&e.length)||n?null:r.jsxs(K.Root,{children:[r.jsx(K.BasicTrigger,{children:t}),r.jsx(K.Portal,{children:r.jsx(K.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:e.map(s=>r.jsx(Fie,{textdocId:s},s))})})]})},Fie=({textdocId:t})=>{const e=Ks(y1(t));return r.jsx(K.Item,{icon:Oie,onClick:()=>{Ll.logButtonClick(s1.FILE_DRAWER_ITEM),yi(e.textdocId)},children:r.jsx("span",{className:"block max-w-[200px] truncate",children:e.title})})},Bie=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),Nqe=()=>{const t=rN(),e=tm();return!t||e?null:t.length===1?r.jsx(Uie,{textdocId:t[0]}):r.jsx(Die,{children:r.jsx(lN,{})})},Uie=({textdocId:t})=>{const e=Ks(y1(t));return r.jsx(lN,{onClick:()=>yi(e.textdocId)})},lN=({onClick:t})=>{const e=ne();return r.jsx(pt,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:r.jsx(Xf,{onClick:t,icon:Bie,style:{viewTransitionName:"var(--vt-thread-header-open-canvas)"}})})},li="canmore";var zn=(t=>(t.CreateTextdoc="".concat(li,".create_textdoc"),t.UpdateTextdoc="".concat(li,".update_textdoc"),t.CommentTextdoc="".concat(li,".comment_textdoc"),t))(zn||{});function cN(t){return t===zn.CreateTextdoc||t===zn.UpdateTextdoc||t===zn.CommentTextdoc}var Et=(t=>(t[t.STREAMING=0]="STREAMING",t[t.WAITING=1]="WAITING",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t[t.CANCELED=4]="CANCELED",t[t.REDACTED=5]="REDACTED",t))(Et||{});function $ie({thread:t,leafId:e}){return t?he.findNode(t,n=>{var s,o;return((s=n.message.author.name)==null?void 0:s.startsWith("".concat(li,".")))===!0||((o=n.message.recipient)==null?void 0:o.startsWith("".concat(li,".")))===!0},e!=null?e:he.getCurrentLeafId(t))!=null:!1}function bb(t,e){return $ie({thread:t,leafId:e})}function dN(t){const e=It();return _.useCallback(async()=>{if(!t)return;const n=await Ea(t);Xs(e,n.gizmo_id)},[e,t])}function Vie(t,e){const n=t.originalConversationId;lf({clientThreadId:n,title:t.title?e.formatMessage({id:"R1QYtC",defaultMessage:"Completed {taskTitle}"},{taskTitle:t.title}):e.formatMessage({id:"qi9HQV",defaultMessage:"Task complete"}),subtitle:e.formatMessage({id:"EgCRBg",defaultMessage:"Click here to view the result of your task"})})}const Hie=t=>{"use forget";var k;const e=W.c(12),{isOdysseyTurn:n,hasConduitToken:s,isProTurn:o,isDeepResearchTurn:a,isImageGenAsync:i,isImageGenSync:l,metadataNode:c,isInterruptionBlocked:d}=Ve(t,Gie),u=V(),f=(k=c==null?void 0:c.message.metadata)==null?void 0:k.async_task_id;let m;e[0]!==f?(m=T=>f?T.tasks[f]:null,e[0]=f,e[1]=m):m=e[1];const g=wr(m);let p;e[2]!==u?(p=ve(u,"1439437954"),e[2]=u,e[3]=p):p=e[3];const h=p;let x;e[4]!==u||e[5]!==(g==null?void 0:g.status)?(x=(g==null?void 0:g.status)===En.RUNNING&&ve(u,"877631007"),e[4]=u,e[5]=g==null?void 0:g.status,e[6]=x):x=e[6];const v=x;let y;e[7]!==u||e[8]!==(g==null?void 0:g.status)?(y=((g==null?void 0:g.status)===En.RUNNING||(g==null?void 0:g.status)===En.FINALIZING)&&ve(u,"1927459101"),e[7]=u,e[8]=g==null?void 0:g.status,e[9]=y):y=e[9];const b=y;let C;e[10]!==u?(C=ze(u,"3396794266").get("enable_interruption",!1),e[10]=u,e[11]=C):C=e[11];const E=C&&s&&!o&&!a&&!i&&!l;return d?!1:h||n||E||v||b},Ud=t=>ve(t,"1927459101"),Pqe=t=>ve(t,"877631007");function Gie(t){var e,n,s,o,a,i,l,c,d,u,f,m,g,p,h;return{isOdysseyTurn:!!((n=(e=he.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&n.n7jupd_message),hasConduitToken:(t==null?void 0:t.conduitToken)!=null,isProTurn:!!(((s=he.getCurrentNode(t))==null?void 0:s.message.author.name)===Nn.A8KM123||(i=(a=(o=he.getCurrentNode(t))==null?void 0:o.message.metadata)==null?void 0:a.model_slug)!=null&&i.endsWith("-pro")),isDeepResearchTurn:!!((c=(l=he.getCurrentNode(t))==null?void 0:l.message.metadata)!=null&&c.deep_research_version),isImageGenAsync:!!((u=(d=he.getCurrentNode(t))==null?void 0:d.message.metadata)!=null&&u.image_gen_async),isImageGenSync:((m=(f=he.getCurrentNode(t))==null?void 0:f.message.author)==null?void 0:m.role)===Ke.Assistant&&((g=he.getCurrentNode(t))==null?void 0:g.message.recipient)===ll,metadataNode:he.findAsyncTaskMetadataNode(t),isInterruptionBlocked:!!((h=(p=he.getCurrentNode(t))==null?void 0:p.message.metadata)!=null&&h.block_interruption)}}const Wie=()=>!1;function zie({task:t}){const e=ne(),n=V(),s=t.originalConversationId,o=To(),a=re(()=>o==null?void 0:o.serverId$()),i=Wie(t.originalConversationId),l=dN(s),c=Ud(n),d=a===s,{clearSystemHintModeTrigger:u}=sa();return _.useEffect(()=>{var f,m;(f=t.notificationStatus)!=null&&f.recentlyCompleted&&!((m=t.notificationStatus)!=null&&m.notificationSent)&&!i&&(c&&Xg(n)?Ze(s,g=>{cn.setShouldRefetchConvoOnFinalize(g,!0)}):(d||(l(),Vie(t,e)),u(Pe.Research),As.setTaskNotificationSent(t.taskId)))},[t,e,l,i,u,c,d,n,s]),r.jsx(Yn.Fragment,{})}function Rqe(){const t=wr(ef.getAllTasksOrdered);return aH(),t.length?r.jsx(r.Fragment,{children:t.map(e=>r.jsx(zie,{task:e},e.taskId))}):null}function ld({percentage:t,thickness:e=1/12,className:n,sizeOverride:s,backgroundStrokeClassName:o="stroke-gray-400",transitionDuration:a,transitionTimingFunction:i,onTransitionEnd:l}){const c=s!=null?s:120,d=c*e,u=(c-d)/2,f=2*Math.PI*u,m=f-t/100*f;return r.jsxs("svg",{width:c,height:c,viewBox:"0 0 ".concat(c," ").concat(c),className:n,children:[r.jsx("circle",{className:z("origin-[50%_50%] -rotate-90",o),strokeWidth:d,fill:"transparent",r:u,cx:c/2,cy:c/2}),r.jsx("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:d,strokeDashoffset:m,strokeDasharray:"".concat(f," ").concat(f),fill:"transparent",r:u,cx:c/2,cy:c/2,style:{strokeLinecap:"round",transitionDuration:a,transitionTimingFunction:i},onTransitionEnd:l})]})}const qie=({size:t=40,className:e="text-blue-400",backgroundStrokeClassName:n="stroke-gray-400"})=>{const s=t,o=1/12,a=s*o,i=(s-a)/2,l=2*Math.PI*i,d=l-60/100*l;return r.jsxs("svg",{width:s,height:s,viewBox:"0 0 ".concat(s," ").concat(s),className:z("animate-spin",e),children:[r.jsx("circle",{className:z("origin-[50%_50%] -rotate-90",n),strokeWidth:a,fill:"transparent",r:i,cx:s/2,cy:s/2}),r.jsx("circle",{className:"origin-[50%_50%] -rotate-90",stroke:"currentColor",strokeWidth:a,strokeDashoffset:d,strokeDasharray:"".concat(l," ").concat(l),fill:"transparent",r:i,cx:s/2,cy:s/2,style:{strokeLinecap:"round"}})]})},uN="personalization:open-memories-modal",Q_=R(()=>P(()=>import("./sdlnf7jr8n8l1kbs.js"),__vite__mapDeps([140,1])),{loading:t=>F(t)}),Yie=R(()=>P(()=>Promise.resolve().then(()=>t5),void 0),{loading:t=>F(t)});function rg({label:t,tooltip:e,Icon:n,tooltipInteractive:s=!1}){return r.jsx(pt,{label:e,interactive:s,children:r.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold opacity-70",children:[n&&r.jsx(n,{className:"icon-sm"}),r.jsx("div",{children:t})]})})}function Lqe({clientThreadId:t,gizmoId:e}){const n=V(),s=ne(),o=at(),{openSettings:a}=Qf(),i=Fd(),l=Ai(),c=p1(),{data:d}=Vf(e,!1,c),u=!!e,f=moe(),m=Cv(n,d==null?void 0:d.memoryFullPct),g=m!=="control",p=Es(),h=Ve(t,he.getIsNewConversation),x=re(()=>wd(n));if(!c)return null;const v=()=>{var y;if(typeof window<"u")try{(y=window.sessionStorage)==null||y.setItem(uN,"true")}catch(b){}};if(p&&(!h||u))return r.jsx(rg,{label:s.formatMessage(Oa.temporaryChat),tooltip:s.formatMessage(Oa.temporaryChatTooltip),Icon:Yie});if(x&&!h)return r.jsx(rg,{label:s.formatMessage(Oa.memoryOff),tooltip:s.formatMessage(Oa.developerModeTooltip),Icon:Q_});if(i&&!l&&!p)return r.jsx(rg,{label:s.formatMessage(Oa.memoryOff),tooltip:s.formatMessage(Oa.memoryOffTooltip),Icon:Q_});if(d&&(d==null?void 0:d.memoryFullPct)>=100&&!p&&!f){const y=()=>{B.logEventWithStatsig("Memory Indicator Upgrade Clicked","chatgpt_memory_indicator_upgrade_clicked",{memoryFullButtonVariant:m}),pn(o,"Memory Indicator")},b=()=>{B.logEventWithStatsig("Memory Indicator Manage Clicked","chatgpt_memory_indicator_manage_clicked",{memoryFullButtonVariant:m}),v(),a(Pn.Personalization)};return r.jsx(rg,{label:s.formatMessage(Oa.memoryFull),tooltip:r.jsx("div",{className:"whitespace-normal",children:r.jsx(j,U(w({},g?Oa.memoryFullTooltipGoldenHour:Oa.memoryFullTooltip),{values:{upgrade:C=>r.jsx("button",{onClick:y,className:"text-token-text-link underline",children:C}),manage:C=>r.jsx("button",{onClick:b,className:"text-token-text-link underline",children:C}),link:C=>r.jsx(wo,{to:Al(Pn.Personalization),className:"underline",children:C})}}))}),Icon:Q_,tooltipInteractive:!0})}else return null}const Oa=Se({temporaryChat:{id:"ConversationPrivacyIndicator.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatTooltip:{id:"ConversationPrivacyIndicator.temporaryChatTooltip",defaultMessage:"Temporary Chats won't appear in your history, and ChatGPT won't remember anything you talk about."},memoryOff:{id:"ConversationPrivacyIndicator.memoryOff",defaultMessage:"Memory Off"},memoryOffTooltip:{id:"ConversationPrivacyIndicator.memoryOffTooltip",defaultMessage:"ChatGPT won't remember anything you talk about in this conversation."},developerModeTooltip:{id:"ConversationPrivacyIndicator.developerModeTooltip",defaultMessage:"ChatGPT won't reference past memories, or create new memories from this chat."},memoryFull:{id:"Z4zW/R",defaultMessage:"Memory full"},memoryFullTooltip:{id:"7IKefd",defaultMessage:"ChatGPT's out of space for saved memories. <link>Manage saved memories</link> to create more space."},memoryFullTooltipGoldenHour:{id:"mc0vkm",defaultMessage:"New memories can't be saved. <upgrade>Upgrade</upgrade> for more memory or <manage>manage</manage> saved memories."}}),fN=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M2.6687 11.333V8.66699C2.6687 7.74455 2.66841 7.01205 2.71655 6.42285C2.76533 5.82612 2.86699 5.31731 3.10425 4.85156L3.25854 4.57617C3.64272 3.94975 4.19392 3.43995 4.85229 3.10449L5.02905 3.02149C5.44666 2.84233 5.90133 2.75849 6.42358 2.71582C7.01272 2.66769 7.74445 2.66797 8.66675 2.66797H9.16675C9.53393 2.66797 9.83165 2.96586 9.83179 3.33301C9.83179 3.70028 9.53402 3.99805 9.16675 3.99805H8.66675C7.7226 3.99805 7.05438 3.99834 6.53198 4.04102C6.14611 4.07254 5.87277 4.12568 5.65601 4.20313L5.45581 4.28906C5.01645 4.51293 4.64872 4.85345 4.39233 5.27149L4.28979 5.45508C4.16388 5.7022 4.08381 6.01663 4.04175 6.53125C3.99906 7.05373 3.99878 7.7226 3.99878 8.66699V11.333C3.99878 12.2774 3.99906 12.9463 4.04175 13.4688C4.08381 13.9833 4.16389 14.2978 4.28979 14.5449L4.39233 14.7285C4.64871 15.1465 5.01648 15.4871 5.45581 15.7109L5.65601 15.7969C5.87276 15.8743 6.14614 15.9265 6.53198 15.958C7.05439 16.0007 7.72256 16.002 8.66675 16.002H11.3337C12.2779 16.002 12.9461 16.0007 13.4685 15.958C13.9829 15.916 14.2976 15.8367 14.5447 15.7109L14.7292 15.6074C15.147 15.3511 15.4879 14.9841 15.7117 14.5449L15.7976 14.3447C15.8751 14.128 15.9272 13.8546 15.9587 13.4688C16.0014 12.9463 16.0017 12.2774 16.0017 11.333V10.833C16.0018 10.466 16.2997 10.1681 16.6667 10.168C17.0339 10.168 17.3316 10.4659 17.3318 10.833V11.333C17.3318 12.2555 17.3331 12.9879 17.2849 13.5771C17.2422 14.0993 17.1584 14.5541 16.9792 14.9717L16.8962 15.1484C16.5609 15.8066 16.0507 16.3571 15.4246 16.7412L15.1492 16.8955C14.6833 17.1329 14.1739 17.2354 13.5769 17.2842C12.9878 17.3323 12.256 17.332 11.3337 17.332H8.66675C7.74446 17.332 7.01271 17.3323 6.42358 17.2842C5.90135 17.2415 5.44665 17.1577 5.02905 16.9785L4.85229 16.8955C4.19396 16.5601 3.64271 16.0502 3.25854 15.4238L3.10425 15.1484C2.86697 14.6827 2.76534 14.1739 2.71655 13.5771C2.66841 12.9879 2.6687 12.2555 2.6687 11.333ZM13.4646 3.11328C14.4201 2.334 15.8288 2.38969 16.7195 3.28027L16.8865 3.46485C17.6141 4.35685 17.6143 5.64423 16.8865 6.53613L16.7195 6.7207L11.6726 11.7686C11.1373 12.3039 10.4624 12.6746 9.72827 12.8408L9.41089 12.8994L7.59351 13.1582C7.38637 13.1877 7.17701 13.1187 7.02905 12.9707C6.88112 12.8227 6.81199 12.6134 6.84155 12.4063L7.10132 10.5898L7.15991 10.2715C7.3262 9.53749 7.69692 8.86241 8.23218 8.32715L13.2791 3.28027L13.4646 3.11328ZM15.7791 4.2207C15.3753 3.81702 14.7366 3.79124 14.3035 4.14453L14.2195 4.2207L9.17261 9.26856C8.81541 9.62578 8.56774 10.0756 8.45679 10.5654L8.41772 10.7773L8.28296 11.7158L9.22241 11.582L9.43433 11.543C9.92426 11.432 10.3749 11.1844 10.7322 10.8271L15.7791 5.78027L15.8552 5.69629C16.185 5.29194 16.1852 4.708 15.8552 4.30371L15.7791 4.2207Z"})),nm=Object.freeze(Object.defineProperty({__proto__:null,default:fN},Symbol.toStringTag,{value:"Module"})),Zie=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M2.66821 12.6663V12.5003C2.66821 12.1331 2.96598 11.8353 3.33325 11.8353C3.70052 11.8353 3.99829 12.1331 3.99829 12.5003V12.6663C3.99829 13.3772 3.9992 13.8707 4.03052 14.2542C4.0612 14.6298 4.11803 14.8413 4.19849 14.9993L4.2688 15.1263C4.44511 15.4137 4.69813 15.6481 5.00024 15.8021L5.13013 15.8577C5.2739 15.9092 5.46341 15.947 5.74536 15.97C6.12888 16.0014 6.62221 16.0013 7.33325 16.0013H12.6663C13.3771 16.0013 13.8707 16.0014 14.2542 15.97C14.6295 15.9394 14.8413 15.8825 14.9993 15.8021L15.1262 15.7308C15.4136 15.5545 15.6481 15.3014 15.802 14.9993L15.8577 14.8695C15.9091 14.7257 15.9469 14.536 15.97 14.2542C16.0013 13.8707 16.0012 13.3772 16.0012 12.6663V12.5003C16.0012 12.1332 16.2991 11.8355 16.6663 11.8353C17.0335 11.8353 17.3313 12.1331 17.3313 12.5003V12.6663C17.3313 13.3553 17.3319 13.9124 17.2952 14.3626C17.2624 14.7636 17.1974 15.1247 17.053 15.4613L16.9866 15.6038C16.7211 16.1248 16.3172 16.5605 15.8215 16.8646L15.6038 16.9866C15.227 17.1786 14.8206 17.2578 14.3625 17.2952C13.9123 17.332 13.3553 17.3314 12.6663 17.3314H7.33325C6.64416 17.3314 6.0872 17.332 5.63696 17.2952C5.23642 17.2625 4.87552 17.1982 4.53931 17.054L4.39673 16.9866C3.87561 16.7211 3.43911 16.3174 3.13501 15.8216L3.01294 15.6038C2.82097 15.2271 2.74177 14.8206 2.70435 14.3626C2.66758 13.9124 2.66821 13.3553 2.66821 12.6663ZM9.33521 12.5003V4.9388L7.13696 7.13704C6.87732 7.39668 6.45625 7.39657 6.19653 7.13704C5.93684 6.87734 5.93684 6.45631 6.19653 6.19661L9.52954 2.86263L9.6311 2.77962C9.73949 2.70742 9.86809 2.66829 10.0002 2.66829C10.1763 2.66838 10.3454 2.73819 10.47 2.86263L13.804 6.19661C14.0633 6.45628 14.0634 6.87744 13.804 7.13704C13.5443 7.39674 13.1222 7.39674 12.8625 7.13704L10.6653 4.93977V12.5003C10.6651 12.8673 10.3673 13.1652 10.0002 13.1654C9.63308 13.1654 9.33538 12.8674 9.33521 12.5003Z"})),sm=Object.freeze(Object.defineProperty({__proto__:null,default:Zie},Symbol.toStringTag,{value:"Module"})),Kie=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("circle",{cx:15,cy:5,r:4,fill:"#0285FF"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.65723 2.66504C9.47346 3.08492 9.33855 3.53055 9.25781 3.99512H8.16406L8.16504 4L8.16406 15.9951H12.167C13.1111 15.9951 13.7794 15.9948 14.3018 15.9521C14.8164 15.9101 15.1308 15.83 15.3779 15.7041L15.5615 15.6016C15.9796 15.3452 16.32 14.9775 16.5439 14.5381L16.6299 14.3379C16.7073 14.1211 16.7605 13.8478 16.792 13.4619C16.8347 12.9395 16.835 12.2713 16.835 11.3271V10.5332C17.3083 10.3763 17.7542 10.1607 18.165 9.89453V11.3271C18.165 12.2494 18.1653 12.9812 18.1172 13.5703C18.0745 14.0924 17.9916 14.5473 17.8125 14.9648L17.7295 15.1416C17.394 15.8 16.8833 16.3512 16.2568 16.7354L15.9814 16.8896C15.5157 17.1268 15.0069 17.2286 14.4102 17.2773C13.821 17.3255 13.0893 17.3252 12.167 17.3252H7.83301C6.91072 17.3252 6.17897 17.3255 5.58984 17.2773C5.06758 17.2347 4.61293 17.1508 4.19531 16.9717L4.01855 16.8896C3.36016 16.5542 2.80898 16.0435 2.4248 15.417L2.27051 15.1416C2.03329 14.6759 1.93158 14.167 1.88281 13.5703C1.83468 12.9812 1.83496 12.2494 1.83496 11.3271V8.66309C1.83496 7.74083 1.83469 7.00904 1.88281 6.41992C1.93157 5.82319 2.03332 5.31438 2.27051 4.84863L2.4248 4.57324C2.80898 3.94674 3.36013 3.43608 4.01855 3.10059L4.19531 3.01758C4.61285 2.8385 5.06771 2.75555 5.58984 2.71289C6.17898 2.66476 6.91071 2.66504 7.83301 2.66504H9.65723ZM6.83496 4C6.38353 4.00418 6.01421 4.01227 5.69824 4.03809C5.31232 4.06962 5.03904 4.12274 4.82227 4.2002L4.62207 4.28613C4.18266 4.51003 3.81497 4.85044 3.55859 5.26855L3.45605 5.45215C3.33015 5.69928 3.25006 6.01366 3.20801 6.52832C3.16534 7.05071 3.16504 7.71897 3.16504 8.66309V11.3271C3.16504 12.2713 3.16533 12.9395 3.20801 13.4619C3.25006 13.9766 3.33013 14.2909 3.45605 14.5381L3.55859 14.7217C3.81498 15.1398 4.18268 15.4802 4.62207 15.7041L4.82227 15.79C5.03903 15.8675 5.31235 15.9206 5.69824 15.9521C6.01398 15.9779 6.38301 15.986 6.83398 15.9902L6.83496 4Z"})),Oqe=Object.freeze(Object.defineProperty({__proto__:null,default:Kie},Symbol.toStringTag,{value:"Module"})),Qie=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M6.83496 3.99992C6.38353 4.00411 6.01421 4.0122 5.69824 4.03801C5.31232 4.06954 5.03904 4.12266 4.82227 4.20012L4.62207 4.28606C4.18264 4.50996 3.81498 4.85035 3.55859 5.26848L3.45605 5.45207C3.33013 5.69922 3.25006 6.01354 3.20801 6.52824C3.16533 7.05065 3.16504 7.71885 3.16504 8.66301V11.3271C3.16504 12.2712 3.16533 12.9394 3.20801 13.4618C3.25006 13.9766 3.33013 14.2909 3.45605 14.538L3.55859 14.7216C3.81498 15.1397 4.18266 15.4801 4.62207 15.704L4.82227 15.79C5.03904 15.8674 5.31234 15.9205 5.69824 15.9521C6.01398 15.9779 6.383 15.986 6.83398 15.9902L6.83496 3.99992ZM18.165 11.3271C18.165 12.2493 18.1653 12.9811 18.1172 13.5702C18.0745 14.0924 17.9916 14.5472 17.8125 14.9648L17.7295 15.1415C17.394 15.8 16.8834 16.3511 16.2568 16.7353L15.9814 16.8896C15.5157 17.1268 15.0069 17.2285 14.4102 17.2773C13.821 17.3254 13.0893 17.3251 12.167 17.3251H7.83301C6.91071 17.3251 6.17898 17.3254 5.58984 17.2773C5.06757 17.2346 4.61294 17.1508 4.19531 16.9716L4.01855 16.8896C3.36014 16.5541 2.80898 16.0434 2.4248 15.4169L2.27051 15.1415C2.03328 14.6758 1.93158 14.167 1.88281 13.5702C1.83468 12.9811 1.83496 12.2493 1.83496 11.3271V8.66301C1.83496 7.74072 1.83468 7.00898 1.88281 6.41985C1.93157 5.82309 2.03329 5.31432 2.27051 4.84856L2.4248 4.57317C2.80898 3.94666 3.36012 3.436 4.01855 3.10051L4.19531 3.0175C4.61285 2.83843 5.06771 2.75548 5.58984 2.71281C6.17898 2.66468 6.91071 2.66496 7.83301 2.66496H12.167C13.0893 2.66496 13.821 2.66468 14.4102 2.71281C15.0069 2.76157 15.5157 2.86329 15.9814 3.10051L16.2568 3.25481C16.8833 3.63898 17.394 4.19012 17.7295 4.84856L17.8125 5.02531C17.9916 5.44285 18.0745 5.89771 18.1172 6.41985C18.1653 7.00898 18.165 7.74072 18.165 8.66301V11.3271ZM8.16406 15.995H12.167C13.1112 15.995 13.7794 15.9947 14.3018 15.9521C14.8164 15.91 15.1308 15.8299 15.3779 15.704L15.5615 15.6015C15.9797 15.3451 16.32 14.9774 16.5439 14.538L16.6299 14.3378C16.7074 14.121 16.7605 13.8478 16.792 13.4618C16.8347 12.9394 16.835 12.2712 16.835 11.3271V8.66301C16.835 7.71885 16.8347 7.05065 16.792 6.52824C16.7605 6.14232 16.7073 5.86904 16.6299 5.65227L16.5439 5.45207C16.32 5.01264 15.9796 4.64498 15.5615 4.3886L15.3779 4.28606C15.1308 4.16013 14.8165 4.08006 14.3018 4.03801C13.7794 3.99533 13.1112 3.99504 12.167 3.99504H8.16406C8.16407 3.99667 8.16504 3.99829 8.16504 3.99992L8.16406 15.995Z"})),Dqe=Object.freeze(Object.defineProperty({__proto__:null,default:Qie},Symbol.toStringTag,{value:"Module"}));let J_="",PC="",nu;const Yt={logProductEvent(t,e){const n=w(w({referrals_session_id:J_,program_name:PC},nu?{is_referrer:nu}:{}),e!=null?e:{});B.logEvent(t,n)},logAnnouncementProductEvent(t,e){B.logEvent(t,e)},createNewSession(t,e=void 0){J_=os(),PC=t,nu=e},logShowReferralDiscount(t,e){Yt.createNewSession(t,e),Ie.count(je.REFERRALS,"referrals.web.showReferralDiscount"),Yt.logProductEvent("Referrals: Show Referral Discount")},logShowReferralLinkGenerationModal(t){Yt.createNewSession(t,!0),Ie.count(je.REFERRALS,"referrals.web.showReferralLinkGenerationModal"),Yt.logProductEvent("Referrals: Show Referral Link Generation Modal")},logClickReferralGetLinkButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferralGetLinkButton"),Yt.logProductEvent("Referrals: Click Referral Get Link Button")},logCopyReferralLink(){Ie.count(je.REFERRALS,"referrals.web.copyReferralLinkSuccess"),Yt.logProductEvent("Referrals: Copy Referral Link")},logClickReferrerIntroNotNowButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferrerIntroNotNowButton"),Yt.logProductEvent("Referrals: Click Referrer Intro Not Now Button")},logShowReferrerConclusion(){Ie.count(je.REFERRALS,"referrals.web.showReferrerConclusion"),Yt.logProductEvent("Referrals: Show Referrer Conclusion")},logClickUpgradeButton(t){const e=[{key:"is_paying_user",value:t?"true":"false"}];nu!==void 0&&e.push({key:"is_referrer",value:nu?"true":"false"}),Ie.count(je.REFERRALS,"referrals.web.clickUpgradeButton",e),Yt.logProductEvent("Referrals: Click Upgrade Button",{is_paying_user:t})},logReferralDiscountContinue(){Ie.count(je.REFERRALS,"referrals.web.referralDiscountContinue"),Yt.logProductEvent("Referrals: Referral Discount Continue")},logClose(t){Ie.count(je.REFERRALS,"referrals.web.close",[{key:"source",value:t}]),B.logEvent("Referrals: Close",{referrals_session_id:J_,source:t})},logClickValidateEmail(){Ie.count(je.REFERRALS,"referrals.web.clickValidateEmail"),Yt.logProductEvent("Referrals: Click Validate Email")},logValidateEmailSuccess(){Ie.count(je.REFERRALS,"referrals.web.validateEmailSuccess")},logValidateEmailFailure(){Ie.count(je.REFERRALS,"referrals.web.validateEmailFailure")},logSendVerificationCode(){Ie.count(je.REFERRALS,"referrals.web.sendVerificationCode"),Yt.logProductEvent("Referrals: Send Verification Code")},logClickResendVerificationCodeButton(){Ie.count(je.REFERRALS,"referrals.web.resendVerificationCode"),Yt.logProductEvent("Referrals: Click Resend Verification Code Button")},logClickChangeEmailButton(){Ie.count(je.REFERRALS,"referrals.web.changeEmail"),Yt.logProductEvent("Referrals: Click Change Email Button")},logClickValidateVerificationCode(){Ie.count(je.REFERRALS,"referrals.web.validateVerificationCode"),Yt.logProductEvent("Referrals: Click Validate Verification Code")},logValidateVerificationCodeSuccess(){Ie.count(je.REFERRALS,"referrals.web.validateVerificationCodeSuccess")},logValidateVerificationCodeFailure(){Ie.count(je.REFERRALS,"referrals.web.validateVerificationCodeFailure")},logApplyDiscount(){Ie.count(je.REFERRALS,"referrals.web.applyDiscount"),Yt.logProductEvent("Referrals: Apply Discount")},logMobileSubscriptionTooltipOpen(){Ie.count(je.REFERRALS,"referrals.web.mobileSubscriptionTooltipOpen"),Yt.logProductEvent("Referrals: Show Mobile Subscription Tooltip")},logShowReferralUpsellAnnouncementBanner(){Ie.count(je.REFERRALS,"referrals.web.showReferralUpsellAnnouncementBanner"),Yt.logAnnouncementProductEvent("Referrals: Show Referral Upsell Announcement Banner")},logShowReferrerRedemptionBanner(){Ie.count(je.REFERRALS,"referrals.web.showReferrerRedemptionBanner"),Yt.logAnnouncementProductEvent("Referrals: Show Referrer Redemption Banner")},logShowRefereeRedemptionBanner(t){Ie.count(je.REFERRALS,"referrals.web.showRefereeRedemptionBanner"),Yt.logAnnouncementProductEvent("Referrals: Show Referee Redemption Banner",{referral_code:t})},logClickReferralUpsellButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferralUpsellButton"),Yt.logProductEvent("Referrals: Click Referral Upsell Button")},logClickReferrerRedeemButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferrerRedeemButton"),Yt.logProductEvent("Referrals: Click Referrer Redeem Button")},logClickRefereeRedeemButton(t){Ie.count(je.REFERRALS,"referrals.web.clickRefereeRedeemButton"),Yt.logProductEvent("Referrals: Click Referee Redeem Button",{referral_code:t})},logCloseReferralUpsellAnnouncementBanner(){Ie.count(je.REFERRALS,"referrals.web.closeReferralUpsellAnnouncementBanner"),Yt.logAnnouncementProductEvent("Referrals: Close Referral Upsell Announcement Banner")},logCloseReferrerRedemptionBanner(){Ie.count(je.REFERRALS,"referrals.web.closeReferrerRedemptionBanner"),Yt.logAnnouncementProductEvent("Referrals: Close Referrer Redemption Banner")},logCloseRefereeRedemptionBanner(t){Ie.count(je.REFERRALS,"referrals.web.closeRefereeRedemptionBanner"),Yt.logAnnouncementProductEvent("Referrals: Close Referee Redemption Banner",{referral_code:t})},logShowReferralUpsellHomepageButton(){Ie.count(je.REFERRALS,"referrals.web.showReferralUpsellHomepageButton"),Yt.logProductEvent("Referrals: Show Referral Upsell Homepage Button")},logClickReferralUpsellHomepageButton(){Ie.count(je.REFERRALS,"referrals.web.clickReferralUpsellHomepageButton"),Yt.logProductEvent("Referrals: Click Referral Upsell Homepage Button")}};function mN(t=!0){return rt({queryKey:["referral-upsell-announcement"],queryFn:async()=>await om.getUpsellAnnouncementBannerInfo(),enabled:t})}class om{static async getReferralProgramMetadata(e){return ge.safeGet("/referrals/{program_name}",{parameters:{path:{program_name:e}},authOption:sn.SendIfAvailable})}static async getReferralCodeMetadata(e){return ge.safeGet("/referrals/{referral_code}/metadata",{parameters:{path:{referral_code:e}},authOption:sn.SendIfAvailable})}static async createReferralCode(e){return ge.safePost("/referrals/create_referral_code",{requestBody:{transaction_id:e}})}static async getEnrollmentDetails(){return ge.safeGet("/referrals/enrollment_details")}static async validateEmail(e,n){return ge.safePost("/referrals/validate_email",{requestBody:{email:e,program_name:n}})}static async sendVerificationCode(e){return ge.safePost("/referrals/send_verification_code",{requestBody:{transaction_id:e}})}static async validateVerificationCode(e,n){return ge.safePost("/referrals/validate_verification_code",{requestBody:{transaction_id:e,verification_code:n}})}static async redeemReferral(e,n){return ge.safePost("/referrals/{referral_code}/redeem",{parameters:{path:{referral_code:e}},requestBody:{transaction_id:n}})}static async getReferralDiscount(){return ge.safeGet("/referrals/available_referral_discount")}static async getUpsellAnnouncementBannerInfo(){return ge.safeGet("/referrals/upsell_announcement_banner_info")}static async getIsEligibleForReferrals(){return ge.safeGet("/referrals/is_eligible_for_referrals")}static async trackReferralSignup(e){return ge.safePost("/referrals/track_referral_signup",{parameters:{query:{referral_code:e}},authOption:sn.SendIfAvailable})}}const Jie=R(()=>P(()=>import("./dtild1iosocbgwoy.js"),__vite__mapDeps([141,1])),{loading:t=>F(t)});function Fqe(){const t=V(),e=at(),{data:n}=rt({queryKey:["is-eligible-for-referrals"],queryFn:ve(t,"550432558")?()=>om.getIsEligibleForReferrals():$y}),s=n==null?void 0:n.eligible_program_name;if(_.useEffect(()=>{s&&Yt.logShowReferralUpsellHomepageButton()},[s,n]),!s)return null;const o="Refer";return r.jsx(pt,{side:"bottom",label:o,children:r.jsx(ye,{color:"secondary",className:z("text-token-text-primary relative"),icon:Jie,onClick:()=>{Yt.logClickReferralUpsellHomepageButton(),e("/refer/".concat(s))},label:o,children:o})})}function Xie(t,e){return e&&((t==null?void 0:t.kind)===wt.GizmoInteraction||(t==null?void 0:t.kind)===wt.PrimaryAssistant)?{gizmo_id:e,kind:wt.GizmoInteraction}:t}function Cb(t){var a;const e=Jo(),n=V(),s=st(n);return!(s==null?void 0:s.isWorkspaceAccount())||((a=e==null?void 0:e.includes(t))!=null?a:!1)}class RC{constructor(e){J(this,"conversationId");this.conversationId=e}}function gN(){const t=It(),e=$t();return _.useCallback(async({newGizmoId:s,conversation:o,previousGizmoId:a,optimistic:i=!0,contextScopes:l})=>{let c=()=>{};const d=()=>{a&&js(a)&&t.invalidateQueries({queryKey:[Yr,{gizmoId:a}]}),s&&js(s)&&t.invalidateQueries({queryKey:[Yr,{gizmoId:s}]}),(!s||!a||!js(s)||!js(a))&&t.invalidateQueries({queryKey:[Ka]}),a&&t.invalidateQueries({queryKey:G4(t,a,!1).queryKey}),s&&t.invalidateQueries({queryKey:G4(t,s,!1).queryKey})};i&&!(o instanceof RC)&&(c=sY({queryClient:t,newGizmoId:s,conversation:o,previousGizmoId:a}));try{const u=o instanceof RC?o.conversationId:o.id,f={gizmo_id:s==null?"":s};l&&l.length>0&&(f.context_scopes=l),await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:u}},requestBody:f})}catch(u){i&&(c(),d()),e.danger(Kt.moveConversationToProjectError,{toastId:"move_conversation_to_snorlax_error",hasCloseButton:!0})}i||d()},[t,e])}function Sb({title:t,description:e,confirmText:n,cancelText:s,isOpen:o=!1,onClose:a,onConfirm:i,primaryButtonColor:l="primary",textCenter:c=!1,loading:d=!1,children:u}){const f=ne();return r.jsx(Mt,{testId:"modal-confirm",isOpen:o,onClose:a,title:t,description:e,textCenter:c,primaryButton:r.jsx(Ns.Button,{title:n!=null?n:f.formatMessage(LC.confirmLabel),color:l,onClick:i,loading:d}),secondaryButton:r.jsx(Ns.Button,{title:s!=null?s:f.formatMessage(LC.cancelLabel),color:"secondary",onClick:a}),children:u})}const LC=Se({confirmLabel:{id:"ConfirmModal.confirmLabel",defaultMessage:"Confirm"},cancelLabel:{id:"ConfirmModal.cancelLabel",defaultMessage:"Cancel"}}),zr={messages:Se({delete:{id:"jawbone.delete",defaultMessage:"Delete"},pause:{id:"jawbone.pause",defaultMessage:"Pause"},pauseFailure:{id:"jawbone.pauseAutomationFailure",defaultMessage:"Failed to pause the automation"},resume:{id:"jawbone.resume",defaultMessage:"Resume"},enableFailure:{id:"jawbone.resumeFailure",defaultMessage:"Failed to resume the automation"},notificationsTitle:{id:"jawbone.notificationsTitle",defaultMessage:"Notifications"},notificationsDesktopAndMobile:{id:"jawbone.notificationsDesktopAndMobile",defaultMessage:"Desktop & mobile"},notificationsEmail:{id:"jawbone.notificationsEmail",defaultMessage:"Email"}})};class am{static async getAutomations(e=null,n=null){return ge.safeGet("/automations",{parameters:{query:{cursor:e,filter:n}}})}static getAutomationQueryKey(e){return["automation",e]}static async getAutomation(e){return ge.safeGet("/automation/{automation_id}",{parameters:{path:{automation_id:e}}})}static async setAutomationStatus(e,n){return ge.safePost("/automations/set_status",{requestBody:{jawbone_id:e,is_enabled:n}})}static async removeAutomation(e){return ge.safePost("/automations/remove",{requestBody:{automation_id:e}})}static async saveAutomation(e,n,s,o,a,i,l,c){return ge.safePost("/automations/save",{requestBody:{jawbone_id:e,title:n,schedule:s,is_enabled:o,prompt:a,default_timezone:i,notifications_enabled:!1,email_enabled:!1,schedule_components:l,last_run_time:c}})}static async getAutomationNextRunTimes(e,n=null,s=5){return ge.safeGet("/automation/{automation_id}/next_run_times",{parameters:{path:{automation_id:e},query:{last_run_time:n,page_size:s}}})}}const Dt=Se({pageTitle:{id:"CHk10n",defaultMessage:"Tasks"},emptyStateTitle:{id:"WZwnBu",defaultMessage:"Start creating tasks"},emptyStateDescription:{id:"VGFt6n",defaultMessage:"Ask ChatGPT to do things in the future."},emptyStateTryYourOwn:{id:"ARS7Xs",defaultMessage:"Try your own"},makingAutomation:{id:"nngZkS",defaultMessage:"Creating task..."},updatingAutomation:{id:"TtVqbi",defaultMessage:"Updating task..."},cancelModalDescription:{id:"ovdvFi",defaultMessage:"Are you sure you want to cancel? Your changes will not be saved."},pauseBanner:{id:"Shy3x+",defaultMessage:"This task is paused."},editModalTitle:{id:"TATVBL",defaultMessage:"Task"},editModalName:{id:"6yXwm0",defaultMessage:"Name"},editModalInstructions:{id:"6m8uZT",defaultMessage:"Instructions"},editModalSchedule:{id:"huULIs",defaultMessage:"When"},editModalDelete:{id:"jmdwEu",defaultMessage:"Delete"},editModalCancel:{id:"CkqFyL",defaultMessage:"Cancel"},editModalSave:{id:"tw230z",defaultMessage:"Save"},editModalSaveSuccess:{id:"2bPf6t",defaultMessage:"Task saved"},editModalSaveFailure:{id:"s9XRUo",defaultMessage:"Failed to save task"},editModalMissingTaskName:{id:"Gvl61x",defaultMessage:"A task name is required."},editModalMissingInstructions:{id:"50eJR5",defaultMessage:"Instructions are required."},editModalTooFarInFuture:{id:"pRMB4Q",defaultMessage:"Tasks cant be scheduled more than 2 years in the future."},editModalInPast:{id:"og7U6X",defaultMessage:"Please choose a date in the future."},newScheduleTitle:{id:"T+KLUF",defaultMessage:"New schedule"},editScheduleTitle:{id:"foaSfJ",defaultMessage:"Edit schedule"},seeMore:{id:"e818FO",defaultMessage:"See more"},scheduleFrequencyOnce:{id:"ubLvlf",defaultMessage:"Doesn't repeat"},scheduleFrequencyDaily:{id:"fCPVKk",defaultMessage:"Daily"},scheduleFrequencyWeekly:{id:"LBJNa8",defaultMessage:"Weekly"},scheduleFrequencyMonthly:{id:"KtDbq5",defaultMessage:"Monthly"},scheduleFrequencyYearly:{id:"jPb1ga",defaultMessage:"Annually"},scheduleFrequencyCustom:{id:"aW+M+B",defaultMessage:"Custom"},scheduleNextThreeTimes:{id:"jHrFIq",defaultMessage:"Next three times"},scheduleCustomScheduleTitle:{id:"S55b0f",defaultMessage:"To update this custom schedule, just ask ChatGPT"},scheduleCustomScheduleContent:{id:"HzgAWq",defaultMessage:'For example, "do this every 3 weeks on Tuesday"'},scheduleCustomScheduleOpenChat:{id:"QIZwlV",defaultMessage:"Open chat"},pausedPill:{id:"H45WpI",defaultMessage:"Paused"},customSchedule:{id:"xBDjE1",defaultMessage:"Custom schedule"},deleteModalConfirmation:{id:"VvP/mR",defaultMessage:"Are you sure you want to delete this task? This cannot be undone."},deleteModalSuccess:{id:"yOFuly",defaultMessage:"Task deleted"},deleteScheduleModalSuccess:{id:"o9VBGa",defaultMessage:"Scheduled task deleted"},deleteModalFailure:{id:"/sJV6Y",defaultMessage:"Failed to delete task"},deleteModalTitle:{id:"ghUY4y",defaultMessage:"Delete task"},lastRunToday:{id:"32N654",defaultMessage:"Today"},lastRunYesterday:{id:"0J3FW6",defaultMessage:"Yesterday"},notificationsBannerAllow:{id:"cw4hGs",defaultMessage:"Allow"},notificationsBannerNotNow:{id:"zwEnmc",defaultMessage:"Not now"},notificationsBannerTitle:{id:"aZg1Bl",defaultMessage:"Turn on desktop notifications"},notificationsBannerContent:{id:"I6r+8F",defaultMessage:"Get notified when theres an update on your tasks."},notificationsDisabledBannerTitle:{id:"mVWjpz",defaultMessage:"Notifications are disabled in your browser."},notificationsDisabledBannerContent:{id:"wAahVE",defaultMessage:"You'll need to visit your browser preferences to allow them."},attachmentEdit:{id:"/KHfm0",defaultMessage:"Edit"},attachmentManageAll:{id:"hlEgKT",defaultMessage:"Schedules"},localizedRuntimeTomorrow:{id:"yK7y4m",defaultMessage:"Tomorrow"},scheduled:{id:"Vor1nS",defaultMessage:"Scheduled"},paused:{id:"ATWDeu",defaultMessage:"Paused"},completed:{id:"Ur4kmZ",defaultMessage:"Completed"}}),Uo={nextRunTime:t=>r.jsx(j,{id:"/OfbaB",defaultMessage:"Next run {nextRunTime}",values:{nextRunTime:t}}),runtimeDaily:t=>r.jsx(j,{id:"jawbone.runtime.daily",defaultMessage:"Daily at {localizedTime}",values:{localizedTime:t}}),runtimeWeeklyShort:t=>r.jsx(j,{id:"iTSfMl",defaultMessage:"Weekly on {localizedDayOfWeek}",values:{localizedDayOfWeek:t}}),runtimeWeekly:(t,e)=>r.jsx(j,{id:"jawbone.runtime.weekly",defaultMessage:"Weekly on {localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeMonthly:t=>r.jsx(j,{id:"jawbone.runtime.monthly",defaultMessage:"Monthly on the {monthDay, selectordinal, one {#st} two {#nd} few {#rd} other {#th}}",values:{monthDay:t}}),runtimeYearly:(t,e)=>r.jsx(j,{id:"jawbone.runtime.yearly",defaultMessage:"Annually on {localizedMonth} {day}",values:{localizedMonth:t,day:e}}),runtimeToday:t=>r.jsx(j,{id:"hStcUW",defaultMessage:"Today at {localizedTime}",values:{localizedTime:t}}),runtimeTomorrow:t=>r.jsx(j,{id:"BF9QGd",defaultMessage:"Tomorrow at {localizedTime}",values:{localizedTime:t}}),runtimeNextFiveDays:(t,e)=>r.jsx(j,{id:"UdC7R6",defaultMessage:"{localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeThisYear:(t,e)=>r.jsx(j,{id:"L9Pqre",defaultMessage:"{localizedMonthDay} at {localizedTime}",values:{localizedMonthDay:t,localizedTime:e}}),runtimeOutsideThisYear:(t,e)=>r.jsx(j,{id:"XOR8K9",defaultMessage:"{localizedDate} at {localizedTime}",values:{localizedDate:t,localizedTime:e}})},v1=Ft(Mn(()=>({jawboneById:{},cursorsByFilter:{scheduled:null,paused:null,finished:null},maxBannerClientThreadId:void 0}))),Fi=v1.getState,ac=v1.setState,b1={initJawbonesFromServerData:(t,e,n)=>{ac(s=>{t.forEach(o=>{s.jawboneById[o.id]=o}),s.cursorsByFilter[n]=e})},removeAutomation:t=>{ac(e=>{delete e.jawboneById[t]})},setAutomation:(t,e)=>{ac(n=>{const s=n.jawboneById[t];if(!s){n.jawboneById[t]=e;return}const o=new Date(s.updated_at),a=new Date(e.updated_at);(isNaN(o.getTime())||isNaN(a.getTime())||o<a)&&(n.jawboneById[t]=e)})},setAutomationStatus:(t,e)=>{ac(n=>{n.jawboneById[t].is_enabled=e})},clearMaxBannerClientThreadId:()=>{ac(t=>{t.maxBannerClientThreadId=void 0})},setMaxBannerClientThreadId:t=>{ac(e=>{e.maxBannerClientThreadId=t})}},C1={getAllJawbonesGrouped:(t=Fi())=>sle(Object.values(t.jawboneById)),getAutomation:(t,e=Fi())=>e.jawboneById[t],getCursor:(t,e=Fi())=>e.cursorsByFilter[t],getHasJawbones:(t=Fi())=>Object.values(t.jawboneById).length>0,getTargetTimeUTC:(t,e=Fi())=>{var n;return(n=e.jawboneById[t])==null?void 0:n.target_time_utc},hasJawbones:(t=Fi())=>Object.keys(t.jawboneById).length>0,getMaxBannerClientThreadId:(t=Fi())=>t.maxBannerClientThreadId};function X_(t){const{isLoading:e}=wf({queryKey:["automations",t],queryFn:async({pageParam:n})=>{const s=await am.getAutomations(n,t);return b1.initJawbonesFromServerData(s.items,s.cursor,t),s},initialPageParam:C1.getCursor(t),getNextPageParam:n=>{var s;return(s=n.cursor)!=null?s:void 0}});return{isLoading:e}}function ele(){const{isLoading:t}=X_("scheduled"),{isLoading:e}=X_("paused"),{isLoading:n}=X_("finished");return{isLoadingScheduled:t,isLoadingPaused:e,isLoadingFinished:n}}function tle({automation_id:t,onSuccess:e,onError:n}){return qt({mutationFn:({is_enabled:s})=>am.setAutomationStatus(t,s),onSuccess:s=>{b1.setAutomation(s.id,s),e&&e()},onError:(s,o)=>{n&&n(o.is_enabled)}})}function nle({automation_id:t,onSuccess:e,onError:n}){return qt({mutationFn:()=>am.removeAutomation(t),onSuccess:()=>{b1.removeAutomation(t),e&&e()},onError:()=>{n&&n()}})}function sle(t){return t.reduce((e,n)=>(n.next_run_times.length===0?e.completed.automations.push(n):n.is_enabled?e.scheduled.automations.push(n):e.paused.automations.push(n),e),{scheduled:{label:Dt.scheduled,filter:"scheduled",automations:[]},paused:{label:Dt.paused,filter:"paused",automations:[]},completed:{label:Dt.completed,filter:"finished",automations:[]}})}function pN({item:t,onClose:e,onConfirm:n}){const s=ne(),o=$t(),a=V(),i=ve(a,"733205176");let l;i?l=Dt.deleteScheduleModalSuccess:l=Dt.deleteModalSuccess;const{mutate:c,isPending:d}=nle({automation_id:t.id,onSuccess:()=>{o.success(s.formatMessage(l),{hasCloseButton:!0}),n==null||n(),e()},onError:()=>{o.danger(Dt.deleteModalFailure,{hasCloseButton:!0,toastId:"jawbone_delete_modal"})}});return r.jsx(Sb,{isOpen:!0,title:s.formatMessage(Dt.deleteModalTitle),primaryButtonColor:"danger",onClose:e,confirmText:s.formatMessage(zr.messages.delete),onConfirm:()=>{c()},loading:d,children:r.jsx("div",{className:"text-sm",children:r.jsx(j,w({},Dt.deleteModalConfirmation))})})}const ole=Object.freeze(Object.defineProperty({__proto__:null,JawboneDeleteModal:pN},Symbol.toStringTag,{value:"Module"})),so=_.createContext({scheduleComponents:{frequency:"custom"},setFrequency:()=>{},setStartDate:()=>{},setByDay:()=>{},setByMonthDay:()=>{},setByYearDay:()=>{},setByMonth:()=>{},setTime:()=>{},startDate:void 0,nextRunTimes:[],scheduleErrors:void 0,validFrequencies:void 0,setValidFrequencies:()=>{}});function wp({initialScheduleComponents:t,initialValidFrequencies:e,nextRunTimes:n,children:s}){const[o,a]=_.useState(t),[i,l]=_.useState(void 0),[c,d]=_.useState(void 0),[u,f]=_.useState(e);return r.jsx(so.Provider,{value:{scheduleComponents:o,setFrequency:m=>{a(U(w({},o),{frequency:m}))},setStartDate:m=>{l(m),d(ale(m)),a(U(w({},o),{start_time:m.toISOString()}))},setByDay:m=>{a(U(w({},o),{by_day:m}))},setByMonthDay:m=>{a(U(w({},o),{by_month_day:m}))},setByYearDay:m=>{a(U(w({},o),{by_year_day:m}))},setByMonth:m=>{a(U(w({},o),{by_month:m}))},setTime:(m,g)=>{a(U(w({},o),{by_hour:m,by_minute:g,by_second:0}))},startDate:i,scheduleErrors:o.frequency!=="once"?void 0:c,nextRunTimes:n,setValidFrequencies:f,validFrequencies:u},children:s})}function ale(t){let e=!1;const n=new Date;n.setFullYear(n.getFullYear()+2),t.getTime()>=n.getTime()&&(e=!0);let s=!1;const o=new Date;if(o.setSeconds(0,0),t.getTime()<o.getTime()&&(s=!0),e||s)return{tooFarInFuture:e,inPast:s}}function hN(t){switch(t.frequency){case"once":return t.start_time?new Date(t.start_time):void 0;case"daily":case"weekly":case"monthly":case"yearly":return t.by_hour==null||t.by_minute==null?void 0:new Date(0,0,0,t.by_hour,t.by_minute);case"custom":return}}function rle(t,e){const n=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;n.setHours(t.getHours(),t.getMinutes()),e.setStartDate(n)}function ile(t,e){var o,a;const n=hN(e.scheduleComponents),s=new Date(t);s.setHours((o=n==null?void 0:n.getHours())!=null?o:0,(a=n==null?void 0:n.getMinutes())!=null?a:0),e.setStartDate(s)}function lle(t,e){const n=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;n.setDate(t),e.setStartDate(n)}const cle=R(()=>P(()=>import("./dwgk7r4s1fwn35jq.js"),__vite__mapDeps([142,1])),{loading:t=>F(t)}),dle=R(()=>P(()=>import("./i0w6h8cy9aqse20k.js"),__vite__mapDeps([143,1])),{loading:t=>F(t)});function ule({initialDate:t,onClick:e}){const n=ne(),{scheduleComponents:s}=_.useContext(so),o=_.useMemo(()=>fle(s),[s]),[a,i]=_.useState(t),c=new Intl.DateTimeFormat(n.locale,{month:"short",year:"numeric"}).format(a);return r.jsxs("div",{className:"mx-5 my-2 flex flex-col gap-0.5",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"grow text-lg font-semibold",children:c}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(OC,{onClick:()=>i(new Date(a.getFullYear(),a.getMonth()-1,1)),children:r.jsx(dle,{className:"icon-sm"})}),r.jsx(OC,{onClick:()=>{i(new Date(a.getFullYear(),a.getMonth()+1,1))},children:r.jsx(cle,{className:"icon-sm"})})]})]}),r.jsx(gle,{visibleDate:a,selectedDate:o,onClick:e})]})}function OC(t){const s=t,{children:e}=s,n=we(s,["children"]);return r.jsx("button",U(w({},n),{className:"flex h-10 w-10 items-center justify-center",children:e}))}function fle(t){return t.start_time?new Date(t.start_time):void 0}function DC(t,e){return new Date(t,e+1,0).getDate()}function mle(t,e){return new Date(t,e,1).getDay()}function gle({visibleDate:t,selectedDate:e,onClick:n}){const s=ne(),o=_.useContext(so),a=6,i=_.useMemo(()=>{const d=t.getFullYear(),u=t.getMonth(),f=DC(d,u),m=mle(d,u),g=[];for(let h=m-1;h>=0;h--)g.push(new Date(d,u-1,DC(d,u-1)-h));for(let h=1;h<=f;h++)g.push(new Date(d,u,h));const p=a*7-g.length;for(let h=1;h<=p;h++)g.push(new Date(d,u+1,h));return g},[t]),l=_.useMemo(()=>{const d=new Intl.DateTimeFormat(s.locale,{weekday:"narrow"});return Array.from({length:7},(u,f)=>d.format(new Date(1970,0,f+4)))},[s.locale]),c=new Date;return c.setHours(0,0,0,0),r.jsxs("div",{children:[r.jsx("div",{className:"flex",children:l.map((d,u)=>r.jsx("div",{className:"flex h-10 w-10 items-center justify-center text-sm font-medium",children:d},u))}),Array.from({length:a}).map((d,u)=>r.jsx("div",{className:"flex",children:i.slice(u*7,(u+1)*7).map(f=>{const m=f>=c;return r.jsx("button",{className:"h-10 w-10",onClick:()=>{m&&(ile(f,o),n())},children:r.jsx(_N,{dayNumber:f.getDate(),isSelected:!!e&&e.toDateString()===f.toDateString(),isSelectable:m})},f.getDay())})},u))]})}function _N({dayNumber:t,isSelected:e,isSelectable:n}){return r.jsx("div",{className:"h-full w-full p-1",children:r.jsx("div",{className:z("flex h-full w-full items-center justify-center rounded-full text-sm",!n&&"text-token-text-tertiary",!e&&n&&"hover:bg-token-main-surface-secondary",e&&"bg-black font-semibold text-white dark:bg-white dark:text-black"),children:t})})}function ple({onClick:t,selectedDay:e}){const n=_.useContext(so),s=_.useMemo(()=>{const o=[];let a=1;for(let i=0;i<5;i++){const l=[];for(let c=0;c<7&&a<=31;c++){const d=a;l.push(r.jsx("button",{className:"h-10 w-10 text-sm",onClick:()=>{lle(d,n),t(d)},children:r.jsx(_N,{dayNumber:d,isSelectable:!0,isSelected:a===e},a)},a)),a++}o.push(r.jsx("div",{className:"flex",children:l},i))}return r.jsxs("div",{children:[r.jsx("p",{className:"ms-2 mb-2 text-sm font-semibold",children:r.jsx(j,{id:"WOVV2Z",defaultMessage:"Repeat every month on the"})}),r.jsx("div",{children:o})]})},[e,t,n]);return r.jsx("div",{children:s})}const hle=R(()=>P(()=>import("./q264k2ztz0dic0dr.js"),__vite__mapDeps([144,1])),{loading:t=>F(t)}),_le="flex-1",xle="max-h-96 overflow-y-auto";function rm({rootClassName:t,contentClassName:e,trigger:n,children:s,open:o,onOpenChange:a,onCloseAutoFocus:i}){return r.jsx("div",{className:z(t!=null?t:_le),children:r.jsxs(K.Root,{open:o,onOpenChange:a,children:[n,r.jsx(K.Portal,{children:r.jsx(K.Content,{className:e!=null?e:xle,side:"bottom",onCloseAutoFocus:i,children:s})})]})})}const yle="w-full justify-start rounded-lg border-token-border-medium";function im({className:t,showError:e=!1,children:n}){return r.jsx(K.Trigger,{className:z(yle,t),style:{borderColor:e?"var(--text-error)":void 0},children:r.jsxs("div",{className:"flex w-full items-center gap-1",children:[r.jsx("div",{className:"grow text-start",children:n}),r.jsx(hle,{className:"icon-sm text-token-text-tertiary"})]})})}function wb({options:t,initialOption:e,showError:n=!1,onClick:s}){var o;return r.jsx(rm,{trigger:r.jsx(im,{showError:n,children:(o=e==null?void 0:e.label)!=null?o:t[0].label}),children:r.jsx(kb,{options:t,onClick:s})})}function kb({options:t,onClick:e}){return r.jsx(r.Fragment,{children:t.map((n,s)=>r.jsx(K.Item,{onClick:()=>e==null?void 0:e(n),children:n.label},s))})}function xN({targetTimeUTC:t,useShortForm:e=!1}){return r.jsx(f3,{fallback:void 0,name:"JawboneLocalizedRuntime",children:r.jsx(vle,{targetTimeUTC:t,useShortForm:e})})}function vle({targetTimeUTC:t,useShortForm:e=!1}){const n=ne(),{localDate:s,today:o,tomorrow:a,dayAfterTomorrow:i,newWeek:l,localizedTime:c}=ble(t,n.locale);if(s.toDateString()===o.toDateString())return Uo.runtimeToday(c);if(s.toDateString()===a.toDateString())return Uo.runtimeTomorrow(c);if(s>=i&&s<l){const d=new Intl.DateTimeFormat(n.locale,{weekday:"long"}).format(s);return Uo.runtimeNextFiveDays(d,c)}else if(s.getFullYear()===o.getFullYear()){const d=new Intl.DateTimeFormat(n.locale,{month:"long",day:"numeric"}).format(s);return e?d:Uo.runtimeThisYear(d,c)}else{const d=new Intl.DateTimeFormat(n.locale,{year:"numeric",month:"short",day:"numeric"}).format(s);return e?d:Uo.runtimeOutsideThisYear(d,c)}}function ble(t,e){const n=new Date(t);if(isNaN(n.getTime()))throw new Error("Invalid targetTimeUTC provided: ".concat(t));const s=n,o=new Date;o.setHours(0,0,0,0);const a=new Date(o);a.setDate(a.getDate()+1);const i=new Date(o);i.setDate(i.getDate()+2);const l=new Date(o);l.setDate(o.getDate()+7);const c=new Intl.DateTimeFormat(e,{hour:"numeric",minute:s.getMinutes()===0?void 0:"numeric",hour12:!0}).format(s);return{localDate:s,today:o,tomorrow:a,dayAfterTomorrow:i,newWeek:l,localizedTime:c}}function yN(t){const e=new Date,n=e.getFullYear(),s=e.getMonth(),o=e.getDate();let a;if(a=t.match(/^(\d{1,2}):(\d{2})\s?([ap]m)$/i),a){let i=parseInt(a[1],10);const l=parseInt(a[2],10),c=a[3].toLowerCase();if(i>=1&&i<=12&&l>=0&&l<=59)return c==="pm"&&i!==12&&(i+=12),c==="am"&&i===12&&(i=0),new Date(n,s,o,i,l)}if(a=t.match(/^([ap]m)\s?(\d{1,2}):(\d{2})$/i),a){let i=parseInt(a[2],10);const l=parseInt(a[3],10),c=a[1].toLowerCase();if(i>=1&&i<=12&&l>=0&&l<=59)return c==="pm"&&i!==12&&(i+=12),c==="am"&&i===12&&(i=0),new Date(n,s,o,i,l)}if(a=t.match(/^(\d{1,2})\s?([ap]m)$/i),a){let i=parseInt(a[1],10);const l=a[2].toLowerCase();if(i===12&&l==="am")return i=0,new Date(n,s,o,i,0);if(i>=1&&i<=11&&l==="pm")return i+=12,new Date(n,s,o,i,0);if(i>=1&&i<=12)return new Date(n,s,o,i,0)}if(a=t.match(/^(\d{1,2}):(\d{2})$/),a){const i=parseInt(a[1],10),l=parseInt(a[2],10);if(i>=0&&i<=23&&l>=0&&l<=59)return new Date(n,s,o,i,l)}if(a=t.match(/^(\d{1,2})(\d{2})$/),a){const i=parseInt(a[1],10),l=parseInt(a[2],10);if(i>=0&&i<=23&&l>=0&&l<=59)return new Date(n,s,o,i,l)}if(a=t.match(/^(\d{1,2})$/),a){const i=parseInt(a[1],10);if(i>=0&&i<=23)return new Date(n,s,o,i,0)}if(a=t.match(/^(\d{1,2}):$/),a){const i=parseInt(a[1],10);if(i>=0&&i<=23)return new Date(n,s,o,i,0)}}function Cle(t){return yN(t)}function vN(t){return t?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!(new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h23"||new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h24")}):""}function bN(t){if(!t)return"";const e=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return"".concat(e,":").concat(n)}function CN(t,e){const n=new Date(0,0,0,t,e);return vN(n)}function Sle(t,e){return"".concat(String(t).padStart(2,"0"),":").concat(String(e).padStart(2,"0"))}function FC(t){const[e,n]=t.split(":"),s=Number.parseInt(e!=null?e:"",10),o=Number.parseInt(n!=null?n:"",10);return Number.isNaN(s)||Number.isNaN(o)?"":CN(s,o)}function BC(t){const e=yN(t);if(e)return bN(e)}function lm(){const t=_.useContext(so),[e,n]=_.useState(!1),[s,o]=_.useState(!0),a=_.useRef(null),i=_.useRef(null),l=_.useMemo(()=>wle(),[]),c=hN(t.scheduleComponents),d=_.useMemo(()=>c!=null?c:new Date(new Date().setHours(14,0,0,0)),[c]);_.useEffect(()=>{c||SN(d,t)},[c,d,t]);const u=vN(d),f=bN(d),[m,g]=_.useState(!0),p=_.useRef(f),h=_.useRef(u),x=_.useRef(h.current);_.useEffect(()=>{const b=setTimeout(()=>{e&&a.current&&a.current.select()},0);return()=>clearTimeout(b)},[e]),_.useEffect(()=>{const b=setTimeout(()=>{if(e&&i.current){const C=DT(l,S=>S.value===p.current||S.value===kle(p.current));if(C!==-1&&i.current){const S=i.current.children[C];S&&S.scrollIntoView({block:"center"})}}},0);return()=>clearTimeout(b)},[e,p,l]);const v=b=>{x.current=b;const C=BC(b),S=C!==void 0;g(S),S&&C&&(p.current=C,h.current=FC(C))},y=()=>{const b=BC(x.current);b?(p.current=b,h.current=FC(b),x.current=h.current,e0(b,t)):(x.current=h.current,e0(p.current,t)),g(!0),a.current&&(a.current.value=h.current)};return r.jsx(rm,{trigger:r.jsx(im,{showError:!m||!!t.scheduleErrors,children:r.jsx("div",{className:"flex w-full items-center",children:r.jsx("textarea",{className:"m-0 w-full resize-none border-none bg-transparent p-0 text-sm",defaultValue:h.current,ref:a,rows:1,wrap:"off",onBlur:()=>{y()},onChange:b=>{const C=b.target.value;v(C)},onKeyDown:b=>{b.key===" "&&b.stopPropagation()}})})}),open:e,onOpenChange:b=>{n(b),b?o(!0):y()},onCloseAutoFocus:b=>{b.preventDefault(),a.current&&a.current.select()},children:r.jsx("ul",{ref:i,children:r.jsx(kb,{options:l,onClick:b=>{p.current=b.value,h.current=b.label,x.current=b.label,e0(b.value,t),g(!0),n(!1),a.current&&(a.current.value=b.label,a.current.select())}})})})}function wle(){return Array.from({length:96},(e,n)=>{const s=Math.floor(n/4),o=n%4*15,a=Sle(s,o);return{label:CN(s,o),value:a}})}function kle(t){if(!t)return t;const[e]=t.split(":");return e?"".concat(e.padStart(2,"0"),":00"):t}function SN(t,e){if(t)switch(e.scheduleComponents.frequency){case"once":{rle(t,e);break}case"daily":case"weekly":case"monthly":case"yearly":{e.setTime(t.getHours(),t.getMinutes());break}}}function e0(t,e){const n=Cle(t);SN(n,e)}const Ele=R(()=>P(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([145,1])),{loading:t=>F(t)}),Tle=R(()=>P(()=>import("./q264k2ztz0dic0dr.js"),__vite__mapDeps([144,1])),{loading:t=>F(t)});function $d(){const t=ne(),{scheduleComponents:e,scheduleErrors:n,setFrequency:s,validFrequencies:o}=_.useContext(so),a=_.useMemo(()=>[{label:t.formatMessage(Dt.scheduleFrequencyOnce),value:"once"},{label:t.formatMessage(Dt.scheduleFrequencyDaily),value:"daily"},{label:t.formatMessage(Dt.scheduleFrequencyWeekly),value:"weekly"},{label:t.formatMessage(Dt.scheduleFrequencyMonthly),value:"monthly"},{label:t.formatMessage(Dt.scheduleFrequencyYearly),value:"yearly"},{label:t.formatMessage(Dt.scheduleFrequencyCustom),value:"custom"}].filter(c=>o===void 0||(o==null?void 0:o.includes(c.value))),[t,o]),i=a.find(l=>l.value===e.frequency);return _.useEffect(()=>{i||s(a[0].value)},[i,a,s]),r.jsx(wb,{options:a,initialOption:i,onClick:l=>s(l.value),showError:!!n})}function Mle(){const t=ne(),{scheduleComponents:e,scheduleErrors:n,setByDay:s}=_.useContext(so),o=Array.from({length:7},(c,d)=>new Intl.DateTimeFormat(t.locale,{weekday:"long",timeZone:"UTC"}).format(new Date(Date.UTC(2021,2,d+1)))),a=["MO","TU","WE","TH","FR","SA","SU"],i=o.map((c,d)=>({label:c,value:a[d]})),l=i.find(c=>c.value===e.by_day);return _.useEffect(()=>{l||s(i[0].value)},[l,i,s]),r.jsx(wb,{options:i,initialOption:l,onClick:c=>s(c.value),showError:!!n})}function Ale({useShortForm:t=!1}){var c;const{scheduleComponents:e,scheduleErrors:n,setByMonthDay:s}=_.useContext(so),o=Array.from({length:31},(d,u)=>({label:(u+1).toString(),value:u+1})),a=(d,u=new Date().getFullYear())=>new Date(u,d,0).getDate(),i=o.slice(0,a((c=e.by_month)!=null?c:1)),l=i.find(d=>d.value===e.by_month_day);return _.useEffect(()=>{l||s(i[0].value)},[l,i,s]),r.jsx(rm,{rootClassName:t?"flex-none":void 0,trigger:r.jsx(im,{className:t?"w-[75px]":void 0,showError:!!n,children:l==null?void 0:l.label}),children:r.jsx(kb,{options:i,onClick:d=>s(d.value)})})}function Ile({useShortForm:t=!1}){var l;const{scheduleComponents:e,scheduleErrors:n,setByMonthDay:s}=_.useContext(so),o=ne(),a=(l=e.by_month_day)!=null?l:1,i=o.formatMessage(Vle[a-1]);return r.jsx(rm,{rootClassName:t?"flex-none":void 0,trigger:r.jsx(im,{className:t?"w-[75px]":void 0,showError:!!n,children:i}),children:r.jsx("div",{className:"m-4",children:r.jsx(ple,{onClick:s,selectedDay:a})})})}function jle(){const t=ne(),{scheduleComponents:e,scheduleErrors:n,setByMonth:s}=_.useContext(so),o=new Intl.DateTimeFormat(t.locale,{month:"long"}),a=Array.from({length:12},(l,c)=>({label:o.format(new Date(0,c)),value:c+1})),i=a.find(l=>l.value===e.by_month);return _.useEffect(()=>{i||s(a[0].value)},[i,a,s]),r.jsx(wb,{options:a,initialOption:i,onClick:l=>s(l.value),showError:!!n})}function Nle(){const t=ne(),{scheduleComponents:e,scheduleErrors:n,setStartDate:s}=_.useContext(so),[o,a]=_.useState(!1);_.useEffect(()=>{e.start_time||s(new Date)},[e.start_time,s]);const i=e.start_time?new Date(e.start_time):new Date,l=new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"long",day:"numeric"});return r.jsx(rm,{trigger:r.jsx(im,{showError:!!n,children:l.format(i)}),contentClassName:"min-w-[224px]",open:o,onOpenChange:a,children:r.jsx(ule,{initialDate:i,onClick:()=>a(!1)})})}function Ple(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx($d,{}),r.jsx(Nle,{}),r.jsx(lm,{})]})}function Rle(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx($d,{}),r.jsx(lm,{})]})}function Lle(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx($d,{}),r.jsx(Mle,{}),r.jsx(lm,{})]})}function Ole(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx($d,{}),r.jsx(Ile,{}),r.jsx(lm,{})]})}function Dle(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx($d,{}),r.jsx(jle,{}),r.jsx(Ale,{useShortForm:!0}),r.jsx(lm,{})]})}function Fle({automationId:t,conversationId:e,onModalClose:n}){return r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx($d,{}),r.jsx(Ble,{automationId:t}),r.jsx(Ule,{conversationId:e,onModalClose:n})]})}function Ble({automationId:t}){var i;const{data:e,fetchNextPage:n,hasNextPage:s,isFetchingNextPage:o}=wf({queryKey:["automation-next-run-times",t],queryFn:({pageParam:l})=>am.getAutomationNextRunTimes(t,l),getNextPageParam:l=>l.has_more?l.next_run_times[l.next_run_times.length-1]:void 0,initialPageParam:null}),a=_.useRef(null);return _.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e]),r.jsx("div",{className:"bg-token-main-surface-secondary rounded-lg p-3",children:r.jsxs("div",{ref:a,className:"flex h-full max-h-52 flex-col gap-3 overflow-y-auto text-sm",children:[(i=e==null?void 0:e.pages)==null?void 0:i.flatMap(l=>l.next_run_times).map((l,c)=>r.jsx("div",{children:r.jsx(xN,{targetTimeUTC:l})},c)),s&&r.jsx("button",{onClick:()=>n(),disabled:o,children:r.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[r.jsx(j,{id:"qL17GV",defaultMessage:"See more"}),r.jsx(Tle,{className:"icon"})]})})]})})}function Ule({conversationId:t,onModalClose:e}){const n=at();return t?r.jsxs("div",{className:"border-token-border-medium flex gap-3 rounded-lg border p-4",children:[r.jsx(Ele,{}),r.jsxs("div",{className:"flex grow flex-col",children:[r.jsx("span",{className:"text-sm font-medium",children:r.jsx(j,w({},Dt.scheduleCustomScheduleTitle))}),r.jsx("span",{className:"text-token-text-secondary text-sm",children:r.jsx(j,w({},Dt.scheduleCustomScheduleContent))})]}),r.jsx(ye,{onClick:()=>{e(),n($o(t))},children:r.jsx(j,w({},Dt.scheduleCustomScheduleOpenChat))})]}):null}function $le({automationId:t,conversationId:e,onModalClose:n}){const{scheduleComponents:s}=_.useContext(so);switch(s.frequency){case"once":return r.jsx(Ple,{});case"daily":return r.jsx(Rle,{});case"weekly":return r.jsx(Lle,{});case"monthly":return r.jsx(Ole,{});case"yearly":return r.jsx(Dle,{});case"custom":return t?r.jsx(Fle,{automationId:t,conversationId:e,onModalClose:n}):null}}const Vle=new Array(31).fill(0).map((t,e)=>e+1).map(t=>{const e=t%10===1&&t!==11?"".concat(t,"st"):t===2||t===22?"".concat(t,"nd"):t===3||t===23?"".concat(t,"rd"):"".concat(t,"th");return{id:"date-ordinal-".concat(t),description:"Brief translation of a number's ordinal abbreviation, i.e. #1 = 1st (the 'st'), #2 = 2nd (the 'nd')",defaultMessage:e}});function Hle(t){return!!t.id}const Gle=R(()=>P(()=>import("./g2yrmla647yevqej.js"),__vite__mapDeps([146,1])),{loading:t=>F(t)}),Wle=R(()=>P(()=>import("./lljm2enx48t0mwrk.js"),__vite__mapDeps([54,1])),{loading:t=>F(t)});function zle({onClose:t,onConfirm:e}){const n=ne();return r.jsx(Sb,{isOpen:!0,title:n.formatMessage(Dt.editModalCancel),primaryButtonColor:"danger",onClose:()=>{t()},onConfirm:()=>{e()},children:r.jsx("div",{className:"text-sm",children:r.jsx(j,w({},Dt.cancelModalDescription))})})}function qle({onClick:t}){return r.jsxs("div",{className:"border-token-border-medium flex items-center justify-between rounded-2xl border p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium",children:[r.jsx(Gle,{className:"icon-lg"}),r.jsx(j,w({},Dt.pauseBanner))]}),r.jsx("div",{children:r.jsx(ye,{onClick:t,children:r.jsx(j,w({},zr.messages.resume))})})]})}function Eb({item:t,source:e,onClose:n,onSave:s=am.saveAutomation}){const o=ne(),a=$t();_.useEffect(()=>{Ie.count(je.JAWBONE,"jawbone_edit_modal.open")},[]);const{scheduleComponents:i,scheduleErrors:l}=_.useContext(so),[c,d]=_.useState(!0),[u,f]=_.useState(!1),[m,g]=_.useState(!1),[p,h]=_.useState(t.title),[x,v]=_.useState(t.prompt),[y,b]=_.useState(t.is_enabled),C=_.useRef(null);_.useEffect(()=>{const L=C.current;if(!L)return;L.style.height="auto";const O=300;L.style.height="".concat(Math.min(L.scrollHeight,O),"px")},[x]);const S=!!t.id;_.useEffect(()=>{l!=null&&l.tooFarInFuture||l!=null&&l.inPast?d(!1):d(p.length>0&&x.length>0);const L=p!==t.title||x!==t.prompt||y!==t.is_enabled||!Lf(i,t.schedule_components);f(L)},[l==null?void 0:l.tooFarInFuture,l==null?void 0:l.inPast,p,x,y,t,i]);const{mutate:E}=qt({mutationFn:()=>{var L;return s((L=t.id)!=null?L:null,p,t.schedule,y,x,t.schedule_components.start_time!==i.start_time?Intl.DateTimeFormat().resolvedOptions().timeZone:t.default_timezone,i,t.last_run_time)},onSuccess:L=>{L&&b1.setAutomation(L.id,L),n(o.formatMessage(Dt.editModalSaveSuccess))},onError:()=>{a.danger(Dt.editModalSaveFailure,{hasCloseButton:!0,toastId:"jawbone_edit_modal"}),d(!0),g(!1)}}),[k,T]=_.useState(!1),[M,A]=_.useState(!1),I=V();ve(I,"156153730");const N=at();return r.jsxs(r.Fragment,{children:[r.jsx(Mt,{testId:"modal-jawbone-edit",className:"min-w-[680px] text-sm",isOpen:!0,onClose:()=>{if(u){A(!0);return}n()},showCloseButton:!0,title:S?r.jsx(j,w({},Dt.editScheduleTitle)):r.jsx(j,w({},Dt.newScheduleTitle)),headerAccessory:e==="tasks"&&r.jsx(ye,{icon:Wle,color:"secondary",onClick:()=>{N($o(t.conversation_id))},children:r.jsx(j,{id:"KkyshF",defaultMessage:"View chat"})}),type:"success",children:r.jsxs("div",{className:"flex flex-col gap-6",children:[!y&&r.jsx(qle,{onClick:()=>{b(!0)}}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(j,w({},Dt.editModalName))}),r.jsx("textarea",{className:z("border-token-border-medium bg-token-main-surface-primary w-full resize-none rounded-lg text-sm",p.length===0&&"border-token-text-error focus:border-token-text-error"),rows:1,value:p,onChange:L=>h(L.target.value),placeholder:o.formatMessage({id:"GB3SVK",defaultMessage:"Summarize AI news"})}),p.length===0&&r.jsx(ig,{children:r.jsx(j,w({},Dt.editModalMissingTaskName))})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(j,w({},Dt.editModalInstructions))}),r.jsx("textarea",{ref:C,className:z("border-token-border-medium bg-token-main-surface-primary w-full resize-none overflow-y-auto rounded-lg text-sm",x.length===0&&"border-token-text-error focus:border-token-text-error"),rows:3,value:x,onChange:L=>v(L.target.value),placeholder:o.formatMessage({id:"XDXPIp",defaultMessage:"Send a summary of the latest news in AI, focusing on especially surprising stories."})}),x.length===0&&r.jsx(ig,{children:r.jsx(j,w({},Dt.editModalMissingInstructions))})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(j,w({},Dt.editModalSchedule))}),r.jsx("div",{children:r.jsx($le,{automationId:t.id,conversationId:t.conversation_id,onModalClose:n})}),r.jsxs("div",{children:[(l==null?void 0:l.tooFarInFuture)&&r.jsx(ig,{children:r.jsx(j,w({},Dt.editModalTooFarInFuture))}),(l==null?void 0:l.inPast)&&r.jsx(ig,{children:r.jsx(j,w({},Dt.editModalInPast))})]}),!1]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{className:"flex gap-2",children:[y&&S&&r.jsx(ye,{color:"secondary",onClick:()=>{b(!1)},children:r.jsx(j,w({},zr.messages.pause))}),S&&r.jsx(ye,{color:"danger-outline",onClick:()=>{T(!0)},children:r.jsx(j,w({},Dt.editModalDelete))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ye,{color:"secondary",onClick:()=>{if(u){A(!0);return}n()},children:r.jsx(j,w({},Dt.editModalCancel))}),r.jsx(ye,{disabled:!c,loading:m,color:"primary",onClick:()=>{g(!0),E()},children:r.jsx(j,w({},Dt.editModalSave))})]})]})]})}),M&&r.jsx(zle,{onClose:()=>A(!1),onConfirm:()=>n()}),k&&Hle(t)&&r.jsx(pN,{item:t,onClose:()=>T(!1),onConfirm:()=>{T(!1),n()}})]})}function ig({children:t}){return r.jsx("div",{className:"text-token-text-error text-sm font-medium",children:t})}function Yle({dateString:t}){switch(Zle(t)){case"today":return r.jsx(j,w({},Dt.lastRunToday));case"yesterday":return r.jsx(j,w({},Dt.lastRunYesterday));case"weekday":return new Date(t).toLocaleDateString(void 0,{weekday:"long"});case"full":return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}}function Zle(t){const e=new Date(t),s=FT(new Date,e);return s===0?"today":s===1?"yesterday":s<=7?"weekday":"full"}function UC(t){"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("span",{className:"bg-token-main-surface-tertiary text-token-text-secondary rounded-[0.25rem] px-1 py-[1px] text-xs font-medium",children:n}),e[0]=n,e[1]=s):s=e[1],s}function Kle(t){"use forget";const e=W.c(2),{item:n}=t,{is_enabled:s,target_time_utc:o}=n;if(!s){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(UC,{children:r.jsx(j,w({},Dt.pausedPill))}),e[0]=a):a=e[0],a}if(o){const a=new Date,i=new Date(o);if(a.getTime()-i.getTime()>=6e4){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(UC,{children:r.jsx(j,{id:"ppsH3r",defaultMessage:"Delayed"})}),e[1]=l):l=e[1],l}}return null}function Qle(t){"use forget";const e=W.c(19),{item:n,useShortForm:s}=t,o=s===void 0?!1:s;if(n.next_run_times.length===0&&n.last_run_time){let i;return e[0]!==n.last_run_time?(i=r.jsx(Yle,{dateString:n.last_run_time}),e[0]=n.last_run_time,e[1]=i):i=e[1],i}const a=n.schedule_components;switch(a.frequency){case"once":{let i;return e[2]!==n.id||e[3]!==o?(i=r.jsx(Xle,{automationId:n.id,useShortForm:o}),e[2]=n.id,e[3]=o,e[4]=i):i=e[4],i}case"daily":{let i;return e[5]!==a?(i=r.jsx(ece,{scheduleComponents:a,useShortForm:!1}),e[5]=a,e[6]=i):i=e[6],i}case"weekly":{let i;return e[7]!==a||e[8]!==o?(i=r.jsx(tce,{scheduleComponents:a,useShortForm:o}),e[7]=a,e[8]=o,e[9]=i):i=e[9],i}case"monthly":{let i;return e[10]!==a?(i=r.jsx(nce,{scheduleComponents:a}),e[10]=a,e[11]=i):i=e[11],i}case"yearly":{let i;return e[12]!==a?(i=r.jsx(sce,{scheduleComponents:a}),e[12]=a,e[13]=i):i=e[13],i}case"custom":{if(n.next_run_times.length===0){let c;return e[14]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("div",{children:r.jsx(j,w({},Dt.customSchedule))}),e[14]=c):c=e[14],c}let i;if(e[15]!==n.next_run_times[0]){const d=new Date(n.next_run_times[0]).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});i=Uo.nextRunTime(d),e[15]=n.next_run_times[0],e[16]=i}else i=e[16];let l;return e[17]!==i?(l=r.jsx("div",{children:i}),e[17]=i,e[18]=l):l=e[18],l}}}function Jle(t){"use forget";const e=W.c(2),{item:n}=t;let s;return e[0]!==n?(s=r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Qle,{item:n}),r.jsx(Kle,{item:n})]}),e[0]=n,e[1]=s):s=e[1],s}function Xle(t){"use forget";const e=W.c(5),{automationId:n,useShortForm:s}=t,o=s===void 0?!1:s;let a;e[0]!==n?(a=C1.getTargetTimeUTC(n),e[0]=n,e[1]=a):a=e[1];const i=a;if(!i)return null;let l;return e[2]!==i||e[3]!==o?(l=r.jsx(xN,{targetTimeUTC:i,useShortForm:o}),e[2]=i,e[3]=o,e[4]=l):l=e[4],l}function ece(t){"use forget";var c,d;const e=W.c(3),{scheduleComponents:n,useShortForm:s}=t,o=s===void 0?!1:s,a=ne(),i=wN((c=n.by_hour)!=null?c:0,(d=n.by_minute)!=null?d:0,a.locale);if(o){let u;return e[0]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(j,w({},Dt.scheduleFrequencyDaily)),e[0]=u):u=e[0],u}let l;return e[1]!==i?(l=Uo.runtimeDaily(i),e[1]=i,e[2]=l):l=e[2],l}function tce(t){"use forget";var u,f,m;const e=W.c(8),{scheduleComponents:n,useShortForm:s}=t,o=s===void 0?!1:s,a=ne();let i;if(e[0]!==a.locale||e[1]!==n.by_day){const g=new Date,p=oce((u=n.by_day)!=null?u:"")-g.getDay();g.setDate(g.getDate()+(p>=0?p:p+7)),i=new Intl.DateTimeFormat(a.locale,{weekday:"long"}).format(g),e[0]=a.locale,e[1]=n.by_day,e[2]=i}else i=e[2];const l=i,c=wN((f=n.by_hour)!=null?f:0,(m=n.by_minute)!=null?m:0,a.locale);if(o){let g;return e[3]!==l?(g=Uo.runtimeWeeklyShort(l),e[3]=l,e[4]=g):g=e[4],g}let d;return e[5]!==l||e[6]!==c?(d=Uo.runtimeWeekly(l,c),e[5]=l,e[6]=c,e[7]=d):d=e[7],d}function nce({scheduleComponents:t}){var e;return Uo.runtimeMonthly(String((e=t.by_month_day)!=null?e:1))}function sce({scheduleComponents:t}){var s;const e=ne(),n=_.useMemo(()=>{var a;const o=new Date;return o.setMonth(((a=t.by_month)!=null?a:1)-1),new Intl.DateTimeFormat(e.locale,{month:"long"}).format(o)},[t.by_month,e.locale]);return Uo.runtimeYearly(n,(s=t.by_month_day)!=null?s:1)}function wN(t,e,n){"use forget";const s=W.c(4);let o;if(s[0]!==t||s[1]!==n||s[2]!==e){const i=new Date;i.setHours(t),i.setMinutes(e),o=new Intl.DateTimeFormat(n,{hour:"numeric",minute:e===0?void 0:"numeric",hour12:!0}).format(i),s[0]=t,s[1]=n,s[2]=e,s[3]=o}else o=s[3];return o}function oce(t){switch(t){case"SU":return 0;case"MO":return 1;case"TU":return 2;case"WE":return 3;case"TH":return 4;case"FR":return 5;case"SA":return 6;default:return-1}}function ace(){return"/tasks"}const rce=R(()=>P(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([147,1])),{loading:t=>F(t)}),ice=R(()=>P(()=>import("./m34gi7kuqzcicqbx.js"),__vite__mapDeps([148,1])),{loading:t=>F(t)}),lce=R(()=>P(()=>import("./g2yrmla647yevqej.js"),__vite__mapDeps([146,1])),{loading:t=>F(t)}),cce=R(()=>P(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([149,1])),{loading:t=>F(t)}),dce=R(()=>P(()=>Promise.resolve().then(()=>nm),void 0),{loading:t=>F(t)}),uce=R(()=>P(()=>import("./kux43ylsu8hzp3nl.js"),__vite__mapDeps([150,1])),{loading:t=>F(t)}),fce=R(()=>P(()=>Promise.resolve().then(()=>ole),void 0).then(t=>t.JawboneDeleteModal));function Bqe(){"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(kN,{children:r.jsxs("div",{className:"flex h-full w-full flex-col justify-center py-4 ps-5 pe-3",children:[r.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary h-4 w-1/2 rounded-sm"}),r.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary mt-2.5 h-4 w-2/5 rounded-sm"})]})}),t[0]=e):e=t[0],e}function kN(t){"use forget";const e=W.c(5),{children:n,fullWidth:s}=t,o=s?"w-full":"inline-block max-w-[360px] min-w-[320px]";let a;e[0]!==o?(a=z("border-token-border-default relative my-2 overflow-hidden rounded-xl border",o),e[0]=o,e[1]=a):a=e[1];let i;return e[2]!==n||e[3]!==a?(i=r.jsx("div",{className:a,children:n}),e[2]=n,e[3]=a,e[4]=i):i=e[4],i}function mce(t){"use forget";const e=W.c(5),{automation:n,onSave:s,overrideManageAllAction:o,fullWidth:a}=t,i=a===void 0?!1:a;if(!n)return null;let l;return e[0]!==n||e[1]!==i||e[2]!==s||e[3]!==o?(l=r.jsx(gce,{item:n,onSave:s,overrideManageAllAction:o,fullWidth:i}),e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=l):l=e[4],l}function gce(t){"use forget";const e=W.c(40),{item:n,onSave:s,overrideManageAllAction:o,fullWidth:a}=t,i=$t();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0],_.useEffect(pce,l);const{id:c,is_enabled:d,title:u}=n,[f,m]=_.useState(!1),g=_.useRef(null);let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{if(g.current){const $=g.current.clientHeight,H=parseFloat(getComputedStyle(g.current).lineHeight);m($>H)}},e[1]=p):p=e[1];let h;e[2]!==u?(h=[u],e[2]=u,e[3]=h):h=e[3],_.useEffect(p,h);const x=n.next_run_times.length===0,[v,y]=_.useState(!1);let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=()=>y(!0),e[4]=b):b=e[4];const C=f?"items-start":"items-center";let S;e[5]!==C?(S=z("flex h-full w-full cursor-pointer justify-between py-4 ps-5 pe-3",C),e[5]=C,e[6]=S):S=e[6];let E;e[7]!==u?(E=r.jsx("div",{ref:g,className:"line-clamp-2 text-start font-medium",children:u}),e[7]=u,e[8]=E):E=e[8];let k;e[9]!==n?(k=r.jsx(Jle,{item:n}),e[9]=n,e[10]=k):k=e[10];let T;e[11]!==n.next_run_times||e[12]!==n.schedule_components||e[13]!==k?(T=r.jsx("div",{className:"text-token-text-secondary text-start",children:r.jsx(wp,{initialScheduleComponents:n.schedule_components,nextRunTimes:n.next_run_times,children:k})}),e[11]=n.next_run_times,e[12]=n.schedule_components,e[13]=k,e[14]=T):T=e[14];let M;e[15]!==E||e[16]!==T?(M=r.jsxs("div",{className:"flex flex-col gap-0.5 pe-8 text-sm",children:[E,T]}),e[15]=E,e[16]=T,e[17]=M):M=e[17];let A;e[18]!==M||e[19]!==S?(A=r.jsx("button",{className:"hover:bg-token-main-surface-secondary h-full w-full",onClick:b,children:r.jsx("div",{className:S,children:M})}),e[18]=M,e[19]=S,e[20]=A):A=e[20];let I;e[21]===Symbol.for("react.memo_cache_sentinel")?(I=()=>y(!0),e[21]=I):I=e[21];let N;e[22]!==c||e[23]!==x||e[24]!==d||e[25]!==n||e[26]!==o?(N=r.jsx("div",{className:"absolute end-3 top-1/2 -translate-y-1/2 transform",children:r.jsx("div",{className:"ms-4 flex",children:r.jsx(hce,{automation_id:c,is_enabled:d,item:n,isFinished:x,onEditModalOpen:I,overrideManageAllAction:o})})}),e[22]=c,e[23]=x,e[24]=d,e[25]=n,e[26]=o,e[27]=N):N=e[27];let L;e[28]!==a||e[29]!==A||e[30]!==N?(L=r.jsxs(kN,{fullWidth:a,children:[A,N]}),e[28]=a,e[29]=A,e[30]=N,e[31]=L):L=e[31];let O;e[32]!==v||e[33]!==n||e[34]!==s||e[35]!==i?(O=v&&r.jsx(wp,{initialScheduleComponents:n.schedule_components,nextRunTimes:n.next_run_times,children:r.jsx(Eb,{item:n,source:"chat",onSave:s,onClose:$=>{$&&i.success($,{hasCloseButton:!0}),y(!1)}})}),e[32]=v,e[33]=n,e[34]=s,e[35]=i,e[36]=O):O=e[36];let D;return e[37]!==L||e[38]!==O?(D=r.jsxs(r.Fragment,{children:[L,O]}),e[37]=L,e[38]=O,e[39]=D):D=e[39],D}function pce(){Ie.count(je.JAWBONE,"jawbone_message_attachment.open")}function hce(t){"use forget";const e=W.c(34),{automation_id:n,is_enabled:s,item:o,isFinished:a,onEditModalOpen:i,overrideManageAllAction:l}=t,c=V(),d=ne(),u=at(),f=$t(),[m,g]=_.useState(s);let p,h;e[0]!==s?(p=()=>g(s),h=[s],e[0]=s,e[1]=p,e[2]=h):(p=e[1],h=e[2]),_.useEffect(p,h);let x;e[3]!==f?(x=L=>{f.danger(L?zr.messages.enableFailure:zr.messages.pauseFailure,{hasCloseButton:!0,toastId:"toggle_automation_status"}),g(!L)},e[3]=f,e[4]=x):x=e[4];let v;e[5]!==n||e[6]!==x?(v={automation_id:n,onError:x},e[5]=n,e[6]=x,e[7]=v):v=e[7];const{mutate:y,isPending:b}=tle(v);let C;e[8]!==d||e[9]!==u||e[10]!==l?(C=function(){return l===null?null:r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),l!=null?l:r.jsx(K.Item,{icon:uce,label:d.formatMessage(Dt.attachmentManageAll),onClick:()=>{u(ace())}})]})},e[8]=d,e[9]=u,e[10]=l,e[11]=C):C=e[11];const S=C;let E;e[12]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("button",{className:"hover:bg-token-surface-hover focus-visible:bg-token-surface-hover radix-state-open:bg-token-surface-hover flex h-9 w-9 items-center justify-center rounded-lg focus-visible:outline-0",children:r.jsx(cce,{className:"icon"})}),e[12]=E):E=e[12];let k;e[13]!==m||e[14]!==d||e[15]!==a||e[16]!==b||e[17]!==i||e[18]!==y?(k=!a&&r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:dce,label:d.formatMessage(Dt.attachmentEdit),onClick:i}),r.jsx(K.Item,{icon:m?lce:ice,label:d.formatMessage(m?zr.messages.pause:zr.messages.resume),onClick:()=>{const L=!m;g(L),y({is_enabled:L})},disabled:b})]}),e[13]=m,e[14]=d,e[15]=a,e[16]=b,e[17]=i,e[18]=y,e[19]=k):k=e[19];let T;e[20]!==d?(T=d.formatMessage(zr.messages.delete),e[20]=d,e[21]=T):T=e[21];let M;e[22]!==c||e[23]!==o?(M=()=>{dt(c,fce,{item:o})},e[22]=c,e[23]=o,e[24]=M):M=e[24];let A;e[25]!==T||e[26]!==M?(A=r.jsx(K.Item,{icon:rce,color:"danger",label:T,onClick:M}),e[25]=T,e[26]=M,e[27]=A):A=e[27];let I;e[28]!==S?(I=S(),e[28]=S,e[29]=I):I=e[29];let N;return e[30]!==A||e[31]!==I||e[32]!==k?(N=r.jsxs(kr,{size:"auto",alignOffset:-8,sideOffset:4,triggerButton:E,children:[k,A,I]}),e[30]=A,e[31]=I,e[32]=k,e[33]=N):N=e[33],N}function _ce(t){return["odyssey_aut",t!=null?t:""]}function S1(t){const{data:e}=rt({queryKey:_ce(t),queryFn:()=>ge.safeGet("/agent_automation/{automation_id}",{parameters:{path:{automation_id:t!=null?t:""}}}),enabled:!!t});return e!=null?e:null}function EN(){return["odyssey_aut"]}function xce(t){const{isLoading:e,data:n}=yce(t),s=_.useMemo(()=>{var u;return(u=n==null?void 0:n.items.reduce((f,m)=>(f[m.id]=m,f),{}))!=null?u:void 0},[n]),o=_.useCallback(u=>u.map(f=>{const m=s==null?void 0:s[f.id];return m?w(w({},m),f):null}).filter(Boolean),[s]),{isLoadingScheduled:a,isLoadingPaused:i,isLoadingFinished:l}=ele(),c=v1(C1.getAllJawbonesGrouped),d=e||a||i||l;return _.useMemo(()=>{var u,f,m;return{isLoading:d,scheduledAutomations:o((u=c.scheduled.automations)!=null?u:[]),pausedAutomations:o((f=c.paused.automations)!=null?f:[]),completedAutomations:o((m=c.completed.automations)!=null?m:[])}},[d,c,o])}function yce({enabled:t,staleTimeMs:e=1e3*5*60}){return rt({enabled:t,queryKey:EN(),queryFn:()=>ge.safeGet("/agent_automations"),refetchOnMount:"always",refetchOnWindowFocus:"always",staleTime:e})}function Uqe(t,e=null){const n=_.useRef({}),[s,o]=_.useState({});return _.useEffect(()=>{async function a(l){const c=await ge.safeGet("/agent_automation/{automation_id}/conversations",{parameters:{path:{automation_id:l}}});o(d=>U(w({},d),{[l]:c.items}))}async function i(l,c){const d=await ge.safePost("/conversations/batch",{requestBody:{conversation_ids:[c]}});o(u=>U(w({},u),{[l]:d}))}for(const l of t)l.id in n.current||(l.job_type==="agent"||l.source_conversation_id&&l.source_message_id?n.current[l.id]=a(l.id):l.conversation_id&&(n.current[l.id]=i(l.id,l.conversation_id)))},[t]),_.useMemo(()=>{let a=[];return t.forEach(i=>{const l=s[i.id];if(l)for(const c of l)a.push({automation:i,conversation:c})}),e&&(a=a.filter(i=>{var c;return new Date((c=i.conversation.update_time)!=null?c:0).getTime()>e.getTime()})),a.sort((i,l)=>{var u,f;const c=new Date((u=i.conversation.update_time)!=null?u:0).getTime();return new Date((f=l.conversation.update_time)!=null?f:0).getTime()-c})},[s,t,e])}const vce=async t=>(await ge.safePost("/aip/connectors/github/has_installations",{requestBody:{link_id:t}})).has_installations,$qe=({linkId:t})=>rt({queryKey:["github-has-installations",t],enabled:!!t,queryFn:async()=>await vce(t),retry:1});function TN({enabled:t=!0,connectionInstanceId:e}){return rt({queryKey:["user_connection_sync_configuration",e],queryFn:async()=>{try{return await rH.user_connection_sync_configuration(e)}catch(n){return null}},enabled:!!(t&&e),retry:1})}function Vqe(t){return rs(t,"1001765573").get("ca_github_sync_max_repos",5)}const MN="v1.0",kp=Ue.SelectedGithubRepos,su=({selectedReposMap:t,scope:e})=>{if(!t){_t.removeItem(kp,e);return}const n={selected_github_repos:[...t].map(([o,a])=>[o,a])},s={version:MN,data:n};_t.setItem(kp,JSON.stringify(s),e)},$C=t=>{const e=_t.getItem(kp,t);if(e)try{const{version:n,data:s}=JSON.parse(e);if(n!==MN){_t.removeItem(kp,t);return}return new Map(s.selected_github_repos)}catch(n){return}},bce=t=>{var n;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const s of[...e].reverse()){const o=s.message;if(o.author.role!==Ke.User)continue;const a=(n=o.metadata)!=null?n:{},i=a.selected_github_repos,l=a.selected_all_github_repos;if(i||l)return{selectedRepos:i!=null?i:[],selectedAllRepos:l!=null?l:!1}}},Cce=m3(t=>bce(t),{equals:Lf}),AN=()=>{var s,o;const t=xs(),e=Nf(),n=V();if(t===Pe.Slurm){const a=(s=e==null?void 0:e.connectorConfig)==null?void 0:s[yt.GITHUB_CONNECTOR];return{maxRepos:(o=a==null?void 0:a.max_repos)!=null?o:3}}return t===Pe.Glaux?{maxRepos:iH(n)}:{maxRepos:void 0}};function IN(t){var S,E,k,T;const e=V(),{session:n}=hd(e),s=BT(),o=UT(),a=re(o),{maxRepos:i}=AN(),l=re(()=>{if(s)return $T(e).data}),c=(E=(S=l==null?void 0:l.connection_statuses.find(M=>M.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(M.user_connection_details.activation_status)&&!!M.user_connection_details.connection_instance_id&&!!M.user_connection_details.backing_link_id))==null?void 0:S.user_connection_details.connection_instance_id)!=null?E:"",{data:d}=TN({connectionInstanceId:c!=null?c:"",enabled:!!(c&&s)}),u=_.useMemo(()=>{var M,A;return{userId:(M=n==null?void 0:n.user)==null?void 0:M.id,workspaceId:(A=n==null?void 0:n.account)==null?void 0:A.id}},[(k=n==null?void 0:n.user)==null?void 0:k.id,(T=n==null?void 0:n.account)==null?void 0:T.id]),f=xt(e,t),m=re(()=>Cce(f)),[g,p]=Ve(t,M=>[M==null?void 0:M.hasModifiedGithubRepos,M==null?void 0:M.selectedGithubRepos]);_.useEffect(()=>{var I,N,L,O,D,$;if(g||((I=p==null?void 0:p.has(a))!=null?I:!1))return;if(m&&jN(m)){if(i&&((L=(N=m.selectedRepos)==null?void 0:N.length)!=null?L:0)>i)return;Ze(t,H=>{var G;(G=H.selectedGithubRepos)!=null||(H.selectedGithubRepos=new Map),H.selectedGithubRepos.set(a,ro(m))});return}const A=$C(u);if(A&&A.has(a)){if(i&&(($=(D=(O=A.get(a))==null?void 0:O.selectedRepos)==null?void 0:D.length)!=null?$:0)>i)return;const H=A.get(a);H&&Ze(t,G=>{var Z;(Z=G.selectedGithubRepos)!=null||(G.selectedGithubRepos=new Map),G.selectedGithubRepos.set(a,ro(H))})}Sh(n==null?void 0:n.user)&&Ze(t,H=>{var G;(G=H.selectedGithubRepos)!=null||(H.selectedGithubRepos=new Map),H.selectedGithubRepos.set(a,ro({selectedRepos:["openai/openai"],selectedAllRepos:!1}))})},[t,g,p,a,m,u,d==null?void 0:d.sync_enabled_objects,i,n==null?void 0:n.user]);const h=_.useMemo(()=>{var I,N,L,O;if(a==null&&(d!=null&&d.sync_enabled_objects))return{selectedRepos:d.sync_enabled_objects.filter($=>$.object_type==="repository").map($=>$.object_name).filter($=>$!=null),selectedAllRepos:!1};const M=p==null?void 0:p.get(a);if(M)return M;if(m&&(((N=(I=m.selectedRepos)==null?void 0:I.length)!=null?N:0)>0||m.selectedAllRepos)&&(i==null||((O=(L=m.selectedRepos)==null?void 0:L.length)!=null?O:0)<=i))return m;const A=$C(u);if(A&&A.has(a)){const D=A.get(a);if(D)return D}return Tb()},[a,d==null?void 0:d.sync_enabled_objects,p,m,u,i]),x=_.useCallback(M=>{t&&Ze(t,A=>{var I;A.hasModifiedGithubRepos=!0,(I=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map),A.selectedGithubRepos.set(a,ro(M)),su({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),v=_.useCallback(M=>{t&&Ze(t,A=>{var N,L;A.hasModifiedGithubRepos=!0,(N=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const I=(L=A.selectedGithubRepos.get(a))!=null?L:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(I.selectedRepos)&&!I.selectedRepos.includes(M)&&(I.selectedRepos=[...I.selectedRepos,M]),A.selectedGithubRepos.set(a,ro(I)),su({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),y=_.useCallback(M=>{t&&Ze(t,A=>{var N,L;A.hasModifiedGithubRepos=!0,(N=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const I=(L=A.selectedGithubRepos.get(a))!=null?L:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(I.selectedRepos)&&(I.selectedRepos=I.selectedRepos.filter(O=>O!==M)),A.selectedGithubRepos.set(a,ro(I)),su({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),b=_.useCallback(M=>{t&&Ze(t,A=>{var N,L;A.hasModifiedGithubRepos=!0,(N=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const I=(L=A.selectedGithubRepos.get(a))!=null?L:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(I.selectedRepos)&&(I.selectedRepos.includes(M)?I.selectedRepos=I.selectedRepos.filter(O=>O!==M):I.selectedRepos=[...I.selectedRepos,M]),A.selectedGithubRepos.set(a,ro(I)),su({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),C=_.useCallback(M=>{t&&Ze(t,A=>{var N,L;A.hasModifiedGithubRepos=!0,(N=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const I=(L=A.selectedGithubRepos.get(a))!=null?L:{selectedRepos:[],selectedAllRepos:!1};I.selectedAllRepos=M,A.selectedGithubRepos.set(a,ro(I)),su({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]);return{selectedRepos:h,setSelectedRepos:x,addRepo:v,removeRepo:y,toggleRepo:b,setAllRepos:C}}function Hqe(t,e=null){var n,s,o;return(o=(s=(n=t==null?void 0:t.selectedGithubRepos)==null?void 0:n.get(e))!=null?s:wce(e))!=null?o:Tb()}function jN(t){return t.selectedAllRepos||t.selectedRepos!=null&&t.selectedRepos.length>0}function Tb(){return{selectedRepos:[],selectedAllRepos:!1}}function Sce(t,e){var n;try{const s=JSON.parse(t);if("selectedRepos"in s&&"selectedAllRepos"in s)return s;const o=e==null?"__null__":e;return(n=s[o])!=null?n:void 0}catch(s){return}}function wce(t){const e=gs.getCookie(ps.LastSelectedGithubRepo);return e?Sce(e,t):Tb()}const kce={disabledAutoConnectors:[],isLoading:!1},Ece=t=>{"use forget";var ee,ie;const e=W.c(60),{clientThreadId:n,includeAutoConnectors:s}=t,o=s===void 0?!1:s,a=V();let i;e[0]!==a?(i=VT(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=HT();let d;e[2]!==a?(d=()=>p3(a),e[2]=a,e[3]=d):d=e[3];const u=re(d);let f;e[4]!==u||e[5]!==c?(f=(u==null?void 0:u.isPersonalAccount())&&c,e[4]=u,e[5]=c,e[6]=f):f=e[6];const m=!!f;let g;e[7]!==o?(g={includeAutoConnectors:o},e[7]=o,e[8]=g):g=e[8];const{connectedTypes:p,isLoading:h,linkIdToConnectedType:x}=g3(g);let v;e[9]!==a||e[10]!==o?(v=()=>o?lH(a):kce,e[9]=a,e[10]=o,e[11]=v):v=e[11];const{isLoading:y,disabledAutoConnectors:b}=re(v);let C;e[12]!==n?(C={clientThreadId:n},e[12]=n,e[13]=C):C=e[13];const{connectorConfigMap:S}=Tce(C);let E;e[14]!==a?(E=()=>h3(a),e[14]=a,e[15]=E):E=e[15];const k=re(E),T=!k,{connectedTypes:M,isLoading:A}=GT(),{data:I,isLoading:N}=WT();let L;e[16]===Symbol.for("react.memo_cache_sentinel")?(L=hn(),e[16]=L):L=e[16];const O=L,D=h||A||N||y||T;I==null||I.connection_statuses;let $,H,G,Z,Q,q,Y;if(e[17]!==l||e[18]!==M||e[19]!==k||e[20]!==p||e[21]!==b||e[22]!==o||e[23]!==S||e[24]!==x||e[25]!==(I==null?void 0:I.connection_statuses)||e[26]!==m){const de=(ee=I==null?void 0:I.connection_statuses.filter(Mce).map(Ace))!=null?ee:[],me=(ie=I==null?void 0:I.connection_statuses.reduce((Le,De)=>{if(["activated","partially_activated"].includes(De.user_connection_details.activation_status)&&De.user_connection_details.backing_link_id){const le=x.get(De.user_connection_details.backing_link_id);le&&Le.add(le)}return Le},new Set))!=null?ie:new Set,xe=[...p].filter(Le=>{var De;if(Le===yt.GDRIVE_ACTION_CONNECTOR&&m){if(de.includes("gdrive_sync_connector"))return!1}else{if(me.has(Le))return!1;if(Le===yt.SHAREPOINT_CONNECTOR&&de.includes("sharepoint_admin_sync_connector"))return!1}return o&&b.includes(Le)?!1:Le!==rl.MCP_CONNECTOR&&(!S.has(Le)||!((De=S.get(Le))!=null&&De.disabled))});let pe;e[34]!==M?(pe=[...M].filter(Ice),e[34]=M,e[35]=pe):pe=e[35];let Me;e[36]!==pe?(Me=[...pe,"web"],e[36]=pe,e[37]=Me):Me=e[37],$=Me;const Ce=[...[...k!=null?k:[]].filter(Le=>l&&Le===rl.MCP_CONNECTOR||Le!==rl.MCP_CONNECTOR)];Y=Map;let ke;e[38]!==$?(ke=new Set($),e[38]=$,e[39]=ke):ke=e[39],e[40]!==ke?(Z=[Pe.Research,ke],e[40]=ke,e[41]=Z):Z=e[41],Q=[Pe.Slurm,new Set([...xe,...de])],q=[Pe.Glaux,new Set([...Ce,...de])],H=null,G=new Set(de),e[17]=l,e[18]=M,e[19]=k,e[20]=p,e[21]=b,e[22]=o,e[23]=S,e[24]=x,e[25]=I==null?void 0:I.connection_statuses,e[26]=m,e[27]=$,e[28]=H,e[29]=G,e[30]=Z,e[31]=Q,e[32]=q,e[33]=Y}else $=e[27],H=e[28],G=e[29],Z=e[30],Q=e[31],q=e[32],Y=e[33];let te;e[42]!==H||e[43]!==G?(te=[H,G],e[42]=H,e[43]=G,e[44]=te):te=e[44];let ae;e[45]!==Z||e[46]!==Q||e[47]!==q||e[48]!==te?(ae=[Z,Q,q,te],e[45]=Z,e[46]=Q,e[47]=q,e[48]=te,e[49]=ae):ae=e[49];let se;if(e[50]!==$||e[51]!==Y||e[52]!==ae){se=new Y(ae);let de;e[54]===Symbol.for("react.memo_cache_sentinel")?(de=O?["cloud"]:[],e[54]=de):de=e[54];let me;e[55]!==$?(me=new Set([...$,"web",...de]),e[55]=$,e[56]=me):me=e[56],se.set(hs,me),e[50]=$,e[51]=Y,e[52]=ae,e[53]=se}else se=e[53];const ce=se;let X;return e[57]!==ce||e[58]!==D?(X={availableConnectorTypes:ce,isLoading:D},e[57]=ce,e[58]=D,e[59]=X):X=e[59],X},Tce=t=>{"use forget";const e=W.c(12),{clientThreadId:n}=t,s=V();let o;e[0]!==n||e[1]!==s?(o=()=>yn(xt(s,n)),e[0]=n,e[1]=s,e[2]=o):o=e[2];const a=re(o),i=ne(),l=Nf();l==null||l.connectorConfig;let c;if(e[3]!==a||e[4]!==i||e[5]!==(l==null?void 0:l.connectorConfig)){const f=(l==null?void 0:l.connectorConfig)||{};let m;e[7]!==a||e[8]!==i?(m=(g,p)=>{const[h,x]=p,v=h,y=x.enabledModels&&a?!x.enabledModels.includes(a.id):!1;return g.set(v,{disabled:y,disabledText:y?i.formatMessage({id:"1MD3y6",defaultMessage:"Switch to {model} model to use connectors"},{model:x.enabledModels.join(", ")}):void 0,hasBetaTag:x.beta}),g},e[7]=a,e[8]=i,e[9]=m):m=e[9],c=Object.entries(f).reduce(m,new Map),e[3]=a,e[4]=i,e[5]=l==null?void 0:l.connectorConfig,e[6]=c}else c=e[6];const d=c;let u;return e[10]!==d?(u={connectorConfigMap:d},e[10]=d,e[11]=u):u=e[11],u};function Mce(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function Ace(t){return t.user_connection_details.connection_type}function Ice(t){return t!==rl.MCP_CONNECTOR}const jce=(t,e)=>{var s,o,a,i;if(!t)return{};const n=t.tree.getBranchFromLeaf(t.currentLeafId);for(const l of[...n].reverse()){const c=l.message;if(c.author.role!==Ke.User)continue;const d=(s=c.metadata)!=null?s:{};let u=[];e===Pe.Research?u=(o=d.caterpillar_selected_sources)!=null?o:[]:u=(a=d.selected_sources)!=null?a:[];const f=(i=d==null?void 0:d.selected_mcp_sources)!=null?i:[],m=u.map(g=>{if(g==="web"||g==="cloud")return g;const p=Object.entries(zy);for(const[h,x]of p)if(x===g)return h;return g});if(u.length||f.length){const g=new Set(m),p=new Set(f.map(x=>x.id)),h=new Set(f.filter(x=>x.status==="ONLY_ME").map(x=>x.id));return{selectedSources:g,selectedMCPSources:p,selectedByoMCPSources:h}}}return{}},Nce=t=>{var n,s,o,a,i,l,c,d;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const u of e){const f=u.message;if(f.author.role!==Ke.User&&((n=f.metadata)==null?void 0:n.invoked_resource)===void 0||f.content.content_type==="user_editable_context")continue;const m=(o=(s=f.metadata)==null?void 0:s.selected_sources)!=null?o:[],g=(i=(a=f.metadata)==null?void 0:a.selected_mcp_sources)!=null?i:[];if(((l=f.metadata)==null?void 0:l.invoked_resource)!==void 0||m.length>0||g.length>0)return g.some(p=>p.status==="ONLY_ME")||((d=(c=f.metadata)==null?void 0:c.invoked_resource)==null?void 0:d.publish_status)==="private"}},Pce=t=>{var e;return ve(t,"3544641259")||!!((e=dH(t))!=null&&e.enabled)},Rce=(t,e,n)=>[...t].filter(s=>e.includes(s)||n&&Gi(s)),ou=t=>{B.logEventWithStatsig("chatgpt_connectors_toggled_sources","chatgpt_connectors_toggled_sources",t)};function Pa(t,e=!1){var Le,De;const n=V(),{session:s}=hd(n),o=ve(n,"4059945251"),a=Pce(n),i=UT(),l=re(i),c=_.useMemo(()=>m3(le=>jce(le,i()),{equals:Lf}),[i]),d=xt(n,t),u=re(()=>c(d)),f=re(()=>_3(n)),m=re(()=>h3(n)),g=f===void 0||m===void 0,p=VT(n),h=re(()=>wh(n)),x=h===void 0,v=_.useMemo(()=>(h!=null?h:[]).filter(le=>["admin_connected","user_connected"].includes(le.user_connection_details.auth_status)),[h]),y=ve(n,"1030527215"),{data:b}=eo(Lt.EnableRemoteBrowserData),{availableConnectorTypes:C,isLoading:S}=Ece({clientThreadId:t,includeAutoConnectors:e}),E=y&&!b&&gl(l),[k,T,M,A,I,N]=Ve(t,le=>[Nce(le),le==null?void 0:le.startedWithByoMcp,le==null?void 0:le.selectedSources,le==null?void 0:le.selectedMCPSources,le==null?void 0:le.hasModifiedSources,le==null?void 0:le.mentionedSources]),{platformConnectors:L,isLoading:O}=kd(),D=l===Pe.Research||gl(l),{connectorLinks:$,isLoading:H,isFetching:G}=Of({skip:!a||!D,fetchValidLinksOnly:!0}),Z=re(()=>wd(n)),Q=Sn(),q=(Q==null?void 0:Q.isWorkspacePlan())&&Z,Y=_.useMemo(()=>p?(f!=null?f:[]).filter(le=>le.type===rl.MCP_CONNECTOR&&($==null?void 0:$.has(le.id))).map(le=>String(le.id)):[],[p,f,$]);_.useEffect(()=>{t&&T===void 0&&k!==void 0&&Ze(t,le=>{le.startedWithByoMcp=k})},[t,T,k]),_.useEffect(()=>{if(!t||T===void 0||O||q)return;const le=M==null?void 0:M.get(l),oe=A==null?void 0:A.get(l),Ee=new Set([...oe!=null?oe:[]].filter(fe=>{const ue=L.get(fe);return(ue==null?void 0:ue.status)==="ONLY_ME"})),be=new Set([...oe!=null?oe:[]].filter(fe=>{const ue=L.get(fe);return(ue==null?void 0:ue.status)!=="ONLY_ME"}));T?(le&&le.size>0||be.size>0)&&Ze(t,fe=>{var ue,_e,Te,$e;(_e=(ue=fe.selectedSources)==null?void 0:ue.get(l))==null||_e.clear();for(const Ne of be)($e=(Te=fe.selectedMCPSources)==null?void 0:Te.get(l))==null||$e.delete(Ne)}):Ee.size>0&&Ze(t,fe=>{var ue,_e;for(const Te of Ee)(_e=(ue=fe.selectedMCPSources)==null?void 0:ue.get(l))==null||_e.delete(Te)})},[t,T,M,A,l,L,O,q]),_.useEffect(()=>{var _e,Te,$e,Ne;if(!t||I)return;const le=(_e=M==null?void 0:M.has(l))!=null?_e:!1,oe=(Te=A==null?void 0:A.has(l))!=null?Te:!1,Ee=Pc(l)&&!le&&!g&&!x,be=Pc(l)&&p&&!oe&&Y.length>0;if(Ee||be){Ze(t,Ae=>{var He,Qe;Ee&&((He=Ae.selectedSources)!=null||(Ae.selectedSources=new Map),Ae.selectedSources.set(l,new Set([...m!=null?m:[],...(v!=null?v:[]).map(et=>et.user_connection_details.connection_type)]))),be&&((Qe=Ae.selectedMCPSources)!=null||(Ae.selectedMCPSources=new Map),Ae.selectedMCPSources.set(l,new Set(Y)))});return}if(le||oe)return;const fe=u.selectedSources,ue=u.selectedMCPSources;(($e=fe==null?void 0:fe.size)!=null?$e:0)===0&&((Ne=ue==null?void 0:ue.size)!=null?Ne:0)===0||Ze(t,Ae=>{var He,Qe;fe&&fe.size>0&&((He=Ae.selectedSources)!=null||(Ae.selectedSources=new Map),Ae.selectedSources.set(l,new Set(fe))),ue&&ue.size>0&&((Qe=Ae.selectedMCPSources)!=null||(Ae.selectedMCPSources=new Map),Ae.selectedMCPSources.set(l,new Set(ue)))})},[t,M,A,I,l,u.selectedSources,u.selectedMCPSources,m,p,Y,n,v,g,x]);const te=_.useMemo(()=>{var Ee;const le=(Ee=M==null?void 0:M.get(l))!=null?Ee:new Set;if(I)return[...le];const oe=u.selectedSources;return oe&&oe.size>0?[...oe]:E?le.has("cloud")?["web","cloud"]:["web"]:[...le]},[M,l,I,u.selectedSources,E]),ae=_.useMemo(()=>new Set(N!=null?N:[]),[N]),se=_.useMemo(()=>{var le;return S?new Set([...te,...N!=null?N:[]]):new Set([...Rce([...te],[...(le=C.get(l))!=null?le:[]],p&&l===Pe.Glaux),...N!=null?N:[]])},[C,S,N,l,te,p]),ce=_.useMemo(()=>{var Ee;const le=(Ee=A==null?void 0:A.get(l))!=null?Ee:new Set;if(I)return le;const oe=u.selectedMCPSources;if(oe&&oe.size>0)return oe;if(E)return new Set;if(Pc(l)&&p){const be=new Set(le);for(const fe of Y)be.add(fe);return be}return le},[A,I,l,u.selectedMCPSources,E,p,Y]),X=_.useMemo(()=>new Set(ce),[ce]),ee=_.useMemo(()=>{if(!a||!D||H||G)return se;const le=new Set;return se.forEach(oe=>{if(oe==="web"||oe==="cloud"){le.add(oe);return}if(oe in Go){const Ee=Go[oe];$.has(Ee)&&le.add(oe);return}if(Gi(oe)){$.has(oe)&&le.add(oe);return}}),le},[se,$,a,D,H,G]),ie=_.useCallback(le=>{var oe,Ee,be;zT({selectedSourcesMap:cH((oe=le.selectedSources)!=null?oe:new Map),selectedMCPSourcesMap:le.selectedMCPSources,scope:{userId:(Ee=s==null?void 0:s.user)==null?void 0:Ee.id,workspaceId:(be=s==null?void 0:s.account)==null?void 0:be.id}})},[(Le=s==null?void 0:s.user)==null?void 0:Le.id,(De=s==null?void 0:s.account)==null?void 0:De.id]),de=_.useCallback(le=>{const oe=L.get(le);return(oe==null?void 0:oe.status)==="ONLY_ME"},[L]),me=_.useCallback(le=>{t&&Ze(t,oe=>{var He,Qe,et,Ct,vt,At,Ht,Ot;const Ee=(Qe=(He=oe.selectedSources)==null?void 0:He.get(l))!=null?Qe:new Set,be=(Ct=(et=oe.selectedMCPSources)==null?void 0:et.get(l))!=null?Ct:new Set,fe=new Set([...be].filter(de)),ue=new Set([...be].filter(Vt=>!de(Vt))),_e=new Set([...Ee,...be,...(vt=oe.mentionedSources)!=null?vt:[]]),Te=(At=oe.mentionedSources)!=null?At:new Set;let $e,Ne;const Ae=oe.startedWithByoMcp!==void 0;if(Gi(le))if(de(le)){if(Ne="mcp-byo",be.has(le))$e="remove",be.delete(le);else{if(Ae&&oe.startedWithByoMcp===!1&&!q)return;if($e="add",!Ae&&!q){Ee.clear();for(const en of ue)be.delete(en)}be.add(le)}!o&&Ee.has("web")&&!oe.hasRemovedWebSource&&(Ee.delete("web"),oe.hasRemovedWebSource=!0)}else if(Ne="mcp-workspace",_e.has(le))$e="remove",be.delete(le);else{if(Ae&&oe.startedWithByoMcp&&!q)return;if($e="add",!Ae&&fe.size>0&&!q)for(const Vt of fe)be.delete(Vt);be.add(le),!o&&le!=="web"&&le!=="cloud"&&Ee.has("web")&&!oe.hasRemovedWebSource&&(Ee.delete("web"),oe.hasRemovedWebSource=!0)}else if(Ne="platform",le==="sharepoint_admin_sync_connector"&&(Ee.delete("sharepoint_sync_connector"),Te.delete("sharepoint_sync_connector"),Ee.delete(yt.SHAREPOINT_CONNECTOR),Te.delete(yt.SHAREPOINT_CONNECTOR)),_e.has(le))$e="remove",Ee.delete(le),Te.has(le)&&Te.delete(le);else{if(Ae&&oe.startedWithByoMcp&&!q)return;if($e="add",Ee.add(le),!Ae&&fe.size>0&&!q)for(const Vt of fe)be.delete(Vt);!o&&le!=="web"&&le!=="cloud"&&Ee.has("web")&&!oe.hasRemovedWebSource&&(Ee.delete("web"),oe.hasRemovedWebSource=!0)}(Ht=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,Ee),(Ot=oe.selectedMCPSources)!=null||(oe.selectedMCPSources=new Map),oe.selectedMCPSources.set(l,be),oe.mentionedSources=Te,oe.hasModifiedSources=!0,ou({source:"toggle",action:$e,type:Ne,systemHint:l,selectedSource:le}),ie(oe)})},[t,l,o,ie,de,q]),xe=_.useCallback(le=>{t&&Ze(t,oe=>{var $e,Ne,Ae,He,Qe,et,Ct,vt,At;let Ee;const be=oe.startedWithByoMcp!==void 0,fe=(Ne=($e=oe.selectedSources)==null?void 0:$e.get(l))!=null?Ne:new Set,ue=(He=(Ae=oe.selectedMCPSources)==null?void 0:Ae.get(l))!=null?He:new Set,_e=new Set([...ue].filter(de)),Te=new Set([...ue].filter(Ht=>!de(Ht)));if(de(le)){if(Ee="mcp-byo",be&&oe.startedWithByoMcp===!1&&!q)return;if(!be&&!q){((Ct=(et=oe.selectedSources)==null?void 0:et.get(l))!=null?Ct:new Set).clear();for(const Ot of Te)ue.delete(Ot)}ue.add(le)}else{if(Ee=Gi(le)?"mcp-workspace":"platform",be&&oe.startedWithByoMcp&&!q)return;if((Gi(le)?ue:fe).add(le),!be&&!q){const Ht=(Qe=oe.selectedMCPSources)==null?void 0:Qe.get(l);for(const Ot of _e)Ht==null||Ht.delete(Ot)}}(vt=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,fe),(At=oe.selectedMCPSources)!=null||(oe.selectedMCPSources=new Map),oe.selectedMCPSources.set(l,ue),ou({source:"toggle",action:"add",type:Ee,systemHint:l,selectedSource:le}),ie(oe),oe.hasModifiedSources=!0})},[t,l,ie,de,q]),pe=_.useCallback(le=>{t&&Ze(t,oe=>{var fe,ue,_e,Te;const Ee=(fe=oe.mentionedSources)!=null?fe:new Set;Ee.add(le),oe.mentionedSources=Ee;const be=(_e=(ue=oe.selectedSources)==null?void 0:ue.get(l))!=null?_e:new Set;be.add(le),(Te=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,be),ou({source:"mentions",action:"add",type:"platform",systemHint:l,selectedSource:le}),ie(oe)})},[t,l,ie]),Me=_.useCallback(le=>{t&&Ze(t,oe=>{var be;const Ee=(be=oe.mentionedSources)!=null?be:new Set;Ee.delete(le),oe.mentionedSources=Ee,ou({source:"mentions",action:"remove",type:"platform",systemHint:l,selectedSource:le})})},[t,l]),Ce=_.useCallback(le=>{t&&Ze(t,oe=>{var _e,Te,$e,Ne,Ae,He,Qe,et,Ct;const Ee=(Te=(_e=oe.selectedSources)==null?void 0:_e.get(l))!=null?Te:new Set,be=(Ne=($e=oe.selectedMCPSources)==null?void 0:$e.get(l))!=null?Ne:new Set,fe=(Ae=oe.mentionedSources)!=null?Ae:new Set;let ue;de(le)?(ue="mcp-byo",((Qe=(He=oe.selectedMCPSources)==null?void 0:He.get(l))!=null?Qe:new Set).delete(le)):(ue=Gi(le)?"mcp-workspace":"platform",Ee.delete(le),be.delete(le),fe.has(le)&&fe.delete(le)),(et=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,Ee),(Ct=oe.selectedMCPSources)!=null||(oe.selectedMCPSources=new Map),oe.selectedMCPSources.set(l,be),oe.mentionedSources=fe,ou({source:"toggle",action:"remove",type:ue,systemHint:l,selectedSource:le}),ie(oe),oe.hasModifiedSources=!0})},[t,l,ie,de]),ke=_.useRef(!1);return _.useEffect(()=>{if(ke.current||!D||H||G)return;const le=[...se].filter(oe=>!ee.has(oe)&&oe!=="web"&&oe!=="cloud");le.length!==0&&(ke.current=!0,t&&(Ze(t,oe=>{var fe,ue,_e,Te;const Ee=(ue=(fe=oe.selectedSources)==null?void 0:fe.get(l))!=null?ue:new Set,be=(_e=oe.mentionedSources)!=null?_e:new Set;le.forEach($e=>{var Ne,Ae,He;if(!Gi($e))Ee.delete($e),be.delete($e);else{const Qe=(Ae=(Ne=oe.selectedMCPSources)==null?void 0:Ne.get(l))!=null?Ae:new Set;Qe.delete($e),(He=oe.selectedMCPSources)!=null||(oe.selectedMCPSources=new Map),oe.selectedMCPSources.set(l,Qe)}}),(Te=oe.selectedSources)!=null||(oe.selectedSources=new Map),oe.selectedSources.set(l,Ee),oe.mentionedSources=be,ie(oe)}),ri(n,"chatgpt_connectors_toggled_sources",le.length,{action:"expired_auto_removed",sources:le.join(","),systemHint:String(l!=null?l:"")})))},[se,ee,D,t,l,ie,n,H,G]),a?{selectedSources:ee,selectedMCPSources:X,mentionedSources:ae,toggleSource:me,addSource:xe,deleteSource:Ce,addMentionedSource:pe,deleteMentionedSource:Me}:{selectedSources:void 0,selectedMCPSources:void 0,mentionedSources:void 0,toggleSource:()=>{},addSource:()=>{},deleteSource:()=>{},addMentionedSource:()=>{},deleteMentionedSource:()=>{}}}function NN(t,e="<unknown>"){if(!t)throw uH(new Error("".concat(e,": unexpected non-truthy condition: ").concat(JSON.stringify(t))),NN)}const Lce=R(()=>P(()=>import("./kux43ylsu8hzp3nl.js"),__vite__mapDeps([150,1])),{loading:t=>F(t)}),cm=_.createContext({sourceConversationId:null,sourceMessageId:null,automationId:null,isScheduledRun:!1,modalOpen:!1,openModal:()=>{},closeModal:()=>{}});function Gqe({clientThreadId:t,children:e}){var m,g,p,h,x,v,y,b,C;const n=RN(t),s=Vce(t),o=((m=s==null?void 0:s.metadata)==null?void 0:m.real_author_type)==="automation";let a=null;o?a=(p=(g=s==null?void 0:s.metadata)==null?void 0:g.real_author_id)!=null?p:null:n&&(a=(x=(h=n==null?void 0:n.metadata)==null?void 0:h.n7jupd_scheduled_id)!=null?x:null);const i=S1(a);let l=null,c=null;o?(l=(v=i==null?void 0:i.source_conversation_id)!=null?v:null,c=(y=i==null?void 0:i.source_message_id)!=null?y:null):n&&(l=(b=jt(t))!=null?b:null,c=(C=n==null?void 0:n.id)!=null?C:null);const[d,u]=_.useState(!1),f=_.useMemo(()=>({sourceConversationId:l,sourceMessageId:c,automationId:a,isScheduledRun:o,modalOpen:d,openModal:()=>u(!0),closeModal:()=>u(!1)}),[a,d,l,c,o]);return r.jsxs(cm.Provider,{value:f,children:[e,r.jsx(Dce,{clientThreadId:t})]})}const PN=["daily","weekly","monthly"],Oce=Object.freeze({frequency:"monthly",by_hour:14,by_minute:0,by_month_day:1,by_second:0});function Dce({clientThreadId:t}){const{sourceConversationId:e,sourceMessageId:n,modalOpen:s,closeModal:o,automationId:a}=_.useContext(cm),i=RN(t),l=S1(a);return e?l&&n?r.jsx(Bce,{automation:l,sourceConversationId:e,sourceMessageId:n,sourceClientThreadId:t,modalOpen:s,closeModal:o}):i?r.jsx(Fce,{sourceClientThreadId:t,sourceConversationId:e,sourceMessage:i,modalOpen:s,closeModal:o}):null:null}function Fce({sourceClientThreadId:t,sourceConversationId:e,sourceMessage:n,modalOpen:s,closeModal:o}){const a=Gce(t,n),{selectedSources:i}=Pa(t),{selectedRepos:l}=IN(t),c=Intl.DateTimeFormat().resolvedOptions().timeZone,d=_.useMemo(()=>{var f;return w(w(w({system_hints:[hs]},i&&{selected_sources:_i(i)}),l&&{selected_github_repos:[...(f=l.selectedRepos)!=null?f:[]],selected_all_github_repos:l.selectedAllRepos}),c&&{user_timezone:c})},[i,l,c]),u=Ab(e,t,n.id,d,null);return a?r.jsx(r.Fragment,{children:r.jsx(wp,{initialScheduleComponents:a.schedule_components,nextRunTimes:a.next_run_times,initialValidFrequencies:PN,children:s&&r.jsx(Eb,{source:"chat",item:a,onSave:u,onClose:o})},a.id)}):null}function Bce({automation:t,sourceConversationId:e,sourceMessageId:n,sourceClientThreadId:s,modalOpen:o,closeModal:a}){var l;const i=Ab(e,s,n,(l=t.user_message)==null?void 0:l.metadata,t.id);return r.jsx(r.Fragment,{children:r.jsx(wp,{initialScheduleComponents:t.schedule_components,nextRunTimes:t.next_run_times,initialValidFrequencies:PN,children:o&&r.jsx(Eb,{source:"chat",item:t,onSave:i,onClose:a})},t.id)})}function Mb({children:t}){const{openModal:e,automationId:n,sourceMessageId:s,isScheduledRun:o}=_.useContext(cm);return t({openScheduleModal:e,isScheduled:!!n,isSchedulable:!n&&!!s,isScheduledRun:o})}function Uce(){const{automationId:t,sourceConversationId:e,sourceMessageId:n}=_.useContext(cm),s=S1(t);if(!s||!e||!n)return null;const o=x3(e);return r.jsx($ce,{automation:s,sourceClientThreadId:o,sourceConversationId:e,sourceMessageId:n})}function $ce({sourceConversationId:t,sourceClientThreadId:e,sourceMessageId:n,automation:s}){var l;const o=ne(),a=at(),i=Ab(t,e,n,(l=s.user_message)==null?void 0:l.metadata,s.id);return r.jsx(mce,{automation:s,onSave:i,overrideManageAllAction:r.jsx(K.Item,{icon:Lce,label:o.formatMessage({id:"uPBjIE",defaultMessage:"Schedules"}),onClick:()=>a(Wce())})})}function RN(t){return Ve(t,e=>{if(!e)return null;function n(){const s=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!s)return null;for(let o=s.length-1;o>=0;o--)if(Hce(s[o].message))return s[o].message;return null}return n()})}function Vce(t){return Ve(t,e=>{if(!e)return null;function n(){var o;const s=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!s)return null;for(let a=0;a<s.length;a++){const i=s[a].message;if(i.author.role===Ke.User&&((o=i.metadata)==null?void 0:o.real_author_type)==="automation")return i}return null}return n()})}function Hce(t){var e,n;return((e=t.metadata)==null?void 0:e.n7jupd_schedulable)||((n=t.metadata)==null?void 0:n.n7jupd_schedulable_score)!==void 0}function Gce(t,e){const n=ne(),s=jt(t),o=Ve(t,l=>{const c=l==null?void 0:l.tree.getBranchFromLeaf(e.id);return Il(c,d=>d.message.author.role===Ke.User)}),a=Ve(t,l=>{var c;return(c=l==null?void 0:l.title)!=null?c:n.formatMessage({id:"4lMgsa",defaultMessage:"New Task"})}),i=_.useMemo(()=>{var c,d;if((c=e.metadata)!=null&&c.n7jupd_summary)return(d=e.metadata)==null?void 0:d.n7jupd_summary;if(!o)return null;const l=o.message.content;return l.content_type==="text"?l.parts.join(""):null},[e,o]);return _.useMemo(()=>!o||!i||!s?null:{id:null,title:a,prompt:i,conversation_id:s,schedule:"",is_enabled:!0,notifications_enabled:!0,email_enabled:!0,target_time_utc:null,schedule_components:Oce,default_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,last_run_time:null,next_run_times:[]},[o,a,i,s])}function Ab(t,e,n,s,o){const a=It(),i=S1(o);return _.useCallback(async(c,d,u,f,m,g,p,h)=>{var v,y;NN(t,"Need server thread ID");const x=await ge.safePost("/conversation/{conversation_id}/agent_automation",{parameters:{path:{conversation_id:t}},requestBody:{jawbone_id:c,title:d,schedule:u,is_enabled:f,prompt:m,default_timezone:g,schedule_components:p,last_run_time:h,email_enabled:(v=i==null?void 0:i.email_enabled)!=null?v:!0,notifications_enabled:(y=i==null?void 0:i.notifications_enabled)!=null?y:!0,message_id:n,user_message:s&&SA(is(m,s))}});return a.invalidateQueries({queryKey:EN()}),e&&Ze(e,b=>{cn.updateTree(b,C=>{C.updateNodeMessageMetadata(n,{n7jupd_scheduled_id:x.id})})}),x},[a,n,t,e,i,s])}function Wce(){return"/schedules"}const qs={gray:{solid:{50:"#f9f9f9",400:"#8f8f8f"}},green:{400:"#04b84c"},purple:{400:"#924ff7"},blue:{400:"#0285ff"},orange:{400:"#fb6a22"},red:{400:"#fa423e"},pink:{400:"#ff66ad"},yellow:{400:"#ffc300"}},an=new Set;function Wqe(){return Promise.allSettled(Array.from(an).map(t=>t()))}const LN=R(()=>P(()=>import("./df8vyzrwxua8ej7p.js"),__vite__mapDeps([151,1])));an.add(LN.prefetch);const ON=R(()=>P(()=>import("./it6rjx5w2svroddn.js"),__vite__mapDeps([152,1])));an.add(ON.prefetch);const DN=R(()=>P(()=>import("./abx0hfi80rra7jaz.js"),__vite__mapDeps([153,1])));an.add(DN.prefetch);const FN=R(()=>P(()=>import("./lkc3nwe59xkd7c29.js"),__vite__mapDeps([154,1])));an.add(FN.prefetch);const BN=R(()=>P(()=>import("./khrrhmpc9956cz8v.js"),__vite__mapDeps([155,1])));an.add(BN.prefetch);const UN=R(()=>P(()=>import("./i4ntg9pkd80oa8tb.js"),__vite__mapDeps([156,1])));an.add(UN.prefetch);const $N=R(()=>P(()=>import("./nv9a1rw8ie2xaxzg.js"),__vite__mapDeps([157,1])));an.add($N.prefetch);const VN=R(()=>P(()=>import("./mphqjg6cm2erxu1h.js"),__vite__mapDeps([158,1])));an.add(VN.prefetch);const HN=R(()=>P(()=>import("./mfaafsrmknb699il.js"),__vite__mapDeps([159,1])));an.add(HN.prefetch);const GN=R(()=>P(()=>import("./mljc3umfnnk53nyi.js"),__vite__mapDeps([160,1])));an.add(GN.prefetch);const WN=R(()=>P(()=>import("./d9ojm830ix4l9asp.js"),__vite__mapDeps([161,1])));an.add(WN.prefetch);const zN=R(()=>P(()=>import("./m0pt7qspta2dtb17.js"),__vite__mapDeps([162,1])));an.add(zN.prefetch);const qN=R(()=>P(()=>import("./lyh8bkoye9hz4v56.js"),__vite__mapDeps([163,1])));an.add(qN.prefetch);const YN=R(()=>P(()=>import("./ng0udfnvcwxxjj55.js"),__vite__mapDeps([164,1])));an.add(YN.prefetch);const ZN=R(()=>P(()=>import("./ojcdlp6qm6gp4osb.js"),__vite__mapDeps([165,1])));an.add(ZN.prefetch);const KN=R(()=>P(()=>Promise.resolve().then(()=>Ir),void 0));an.add(KN.prefetch);const QN=R(()=>P(()=>import("./kutccmhbcgdrtvey.js"),__vite__mapDeps([166,1])));an.add(QN.prefetch);const JN=R(()=>P(()=>import("./ho6r9c28sd358f5b.js"),__vite__mapDeps([167,1])));an.add(JN.prefetch);const XN=R(()=>P(()=>import("./bk42hqsw4os7zvt6.js"),__vite__mapDeps([168,1])));an.add(XN.prefetch);const eP=R(()=>P(()=>import("./ncrb69cifkntux5o.js"),__vite__mapDeps([169,1])));an.add(eP.prefetch);const tP=R(()=>P(()=>import("./nxm6d2sxmov3wzbf.js"),__vite__mapDeps([170,1])));an.add(tP.prefetch);const nP=R(()=>P(()=>import("./kn4rrjxh188dx3k1.js"),__vite__mapDeps([171,1])));an.add(nP.prefetch);const sP=R(()=>P(()=>import("./ele4jksavjnkk50l.js"),__vite__mapDeps([172,1])));an.add(sP.prefetch);const oP=R(()=>P(()=>import("./ei2rr3u86wwo8xvm.js"),__vite__mapDeps([52,1])));an.add(oP.prefetch);const aP=R(()=>P(()=>import("./fmugtb2mh6d7o631.js"),__vite__mapDeps([173,1])));an.add(aP.prefetch);const rP=R(()=>P(()=>import("./lsc4r9prtm54ttbd.js"),__vite__mapDeps([174,1])));an.add(rP.prefetch);const iP=R(()=>P(()=>import("./myg9qhlf3mrymti2.js"),__vite__mapDeps([175,1])));an.add(iP.prefetch);const lP=R(()=>P(()=>import("./fo94gvkdvc6uhzry.js"),__vite__mapDeps([176,1])));an.add(lP.prefetch);const cP=R(()=>P(()=>import("./en8loo64k9vgih13.js"),__vite__mapDeps([177,1])));an.add(cP.prefetch);const dP=R(()=>P(()=>import("./jaatx82vyj5gyjt9.js"),__vite__mapDeps([178,1])));an.add(dP.prefetch);const uP=R(()=>P(()=>import("./mlll5kvj3qdj7fj8.js"),__vite__mapDeps([179,1])));an.add(uP.prefetch);const fP=R(()=>P(()=>import("./b10arcaiiztcvibu.js"),__vite__mapDeps([180,1])));an.add(fP.prefetch);const Cn={red:qs.red[400],orange:qs.orange[400],yellow:qs.yellow[400],green:qs.green[400],blue:qs.blue[400],purple:qs.purple[400],pink:qs.pink[400]},zce=new Map([["pencil","edit"],["code-brackets","function"],["balancing-scale","scale"],["globe-spin","desk-globe"],["lite","lotus"],["pens","customize"]]),qce=t=>{var n;const e=(n=zce.get(t))!=null?n:t;return mP[e]},zqe={[Cn.red]:{color:Cn.red,label:Ge({defaultMessage:"Red",id:"project-color-red"})},[Cn.orange]:{color:Cn.orange,label:Ge({defaultMessage:"Orange",id:"project-color-orange"})},[Cn.yellow]:{color:Cn.yellow,label:Ge({defaultMessage:"Yellow",id:"project-color-yellow"})},[Cn.green]:{color:Cn.green,label:Ge({defaultMessage:"Green",id:"project-color-green"})},[Cn.blue]:{color:Cn.blue,label:Ge({defaultMessage:"Blue",id:"project-color-blue"})},[Cn.purple]:{color:Cn.purple,label:Ge({defaultMessage:"Purple",id:"project-color-purple"})},[Cn.pink]:{color:Cn.pink,label:Ge({defaultMessage:"Pink",id:"project-color-pink"})}},mP={folder:{id:"folder",icon:YN,label:Ge({id:"U1Ed2E",defaultMessage:"Folder"})},"currency-dollar":{id:"currency-dollar",icon:$N,label:Ge({id:"O1L2ji",defaultMessage:"Currency Dollar"})},book:{id:"book",icon:DN,label:Ge({id:"Ikd2nV",defaultMessage:"Book"})},"graduation-cap":{id:"graduation-cap",icon:QN,label:Ge({id:"XyOlu9",defaultMessage:"Graduation Cap"})},edit:{id:"edit",icon:oP,label:Ge({id:"e+bON4",defaultMessage:"Pencil"})},writing:{id:"writing",icon:fP,label:Ge({id:"Xsx76J",defaultMessage:"Writing"})},function:{id:"function",icon:BN,label:Ge({id:"1dLIWL",defaultMessage:"Code Brackets"})},terminal:{id:"terminal",icon:uP,label:Ge({id:"A7r7WM",defaultMessage:"Terminal"})},music:{id:"music",icon:nP,label:Ge({id:"vhV09/",defaultMessage:"Music"})},popcorn:{id:"popcorn",icon:iP,label:Ge({id:"IBA2my",defaultMessage:"Popcorn"})},customize:{id:"customize",icon:VN,label:Ge({id:"NoBDe3",defaultMessage:"Customize"})},palette:{id:"palette",icon:UN,label:Ge({id:"1NjHcj",defaultMessage:"Palette"})},stethoscope:{id:"stethoscope",icon:cP,label:Ge({id:"m/9B0l",defaultMessage:"Stethoscope"})},health:{id:"health",icon:JN,label:Ge({id:"uyQlnK",defaultMessage:"Health"})},lotus:{id:"lotus",icon:tP,label:Ge({id:"XVtU4x",defaultMessage:"Lotus"})},suitcase:{id:"suitcase",icon:dP,label:Ge({id:"Q7L6wE",defaultMessage:"Suitcase"})},"bar-chart":{id:"bar-chart",icon:ON,label:Ge({id:"clYNPV",defaultMessage:"Bar Chart"})},kettlebell:{id:"kettlebell",icon:eP,label:Ge({id:"d8EgqT",defaultMessage:"Kettlebell"})},dumbbell:{id:"dumbbell",icon:HN,label:Ge({id:"4f2kWJ",defaultMessage:"Dumbbell"})},logs:{id:"logs",icon:zN,label:Ge({id:"Uo10ll",defaultMessage:"Logs"})},scale:{id:"scale",icon:LN,label:Ge({id:"Duq21q",defaultMessage:"Balancing Scale"})},"desk-globe":{id:"desk-globe",icon:ZN,label:Ge({id:"2oKfXd",defaultMessage:"Globe Spin"})},plane:{id:"plane",icon:aP,label:Ge({id:"Mp7VbF",defaultMessage:"Plane"})},globe:{id:"globe",icon:KN,label:Ge({id:"7Gk2Au",defaultMessage:"Globe"})},wrench:{id:"wrench",icon:lP,label:Ge({id:"cVZEQn",defaultMessage:"Wrench"})},paw:{id:"paw",icon:sP,label:Ge({id:"SwLz4n",defaultMessage:"Paw"})},flask:{id:"flask",icon:qN,label:Ge({id:"YRGg1h",defaultMessage:"Flask"})},brain:{id:"brain",icon:FN,label:Ge({id:"xDBu5X",defaultMessage:"Brain"})},heart:{id:"heart",icon:XN,label:Ge({id:"7bZxVY",defaultMessage:"Heart"})},plant:{id:"plant",icon:rP,label:Ge({id:"h4prM6",defaultMessage:"Plant"})}};function uo(t){return t==null?null:qce(t)}function Yce(){return Zce}const Zce={icon:WN,label:Ge({id:"i39yRC",defaultMessage:"Emoji"}),id:"default",hoverIcon:GN},Kce=[{label:Ge({id:"cvNQv+",defaultMessage:"Investing"}),icon:uo("currency-dollar"),color:Cn.green,emoji:"currency-dollar"},{label:Ge({id:"fxIuzw",defaultMessage:"Homework"}),icon:uo("graduation-cap"),color:Cn.blue,emoji:"graduation-cap"},{label:Ge({id:"x1ggA9",defaultMessage:"Writing"}),icon:uo("writing"),color:Cn.purple,emoji:"writing"},{label:Ge({id:"FdXDrg",defaultMessage:"Health"}),icon:uo("health"),color:Cn.red,emoji:"health"},{label:Ge({id:"ftkSeM",defaultMessage:"Travel"}),icon:uo("plane"),color:Cn.yellow,emoji:"plane"}],Qce=[{label:Ge({id:"dNjvRY",defaultMessage:"Research"}),icon:uo("desk-globe"),color:Cn.blue,emoji:"desk-globe"},{label:Ge({id:"lPMK20",defaultMessage:"Planning"}),icon:uo("book"),color:Cn.green,emoji:"book"},{label:Ge({id:"LM4RDS",defaultMessage:"Code"}),icon:uo("function"),color:Cn.orange,emoji:"function"},{label:Ge({id:"umKvY2",defaultMessage:"Meetings"}),icon:uo("logs"),color:Cn.purple,emoji:"logs"},{label:Ge({id:"NXAQZ1",defaultMessage:"Onboarding"}),icon:uo("suitcase"),color:Cn.yellow,emoji:"suitcase"},{label:Ge({id:"4tnZcg",defaultMessage:"Brainstorms"}),icon:uo("brain"),color:Cn.pink,emoji:"brain"}];function qqe(t){return fH(t)?Qce:Kce}function Yqe(){return Object.values(mP)}const Jce=R(()=>P(()=>import("./ng0udfnvcwxxjj55.js"),__vite__mapDeps([164,1])),{loading:t=>F(t)}),Xce=R(()=>P(()=>import("./nk2uvhryjg0je0b9.js"),__vite__mapDeps([181,1])),{loading:t=>F(t)});function gP(t){"use forget";const e=W.c(23),{color:n,emoji:s,className:o,isSharedProject:a,size:i,strict:l}=t,c=s===void 0?null:s,d=ne();let u;if(e[0]!==o||e[1]!==n||e[2]!==c||e[3]!==d||e[4]!==a||e[5]!==i||e[6]!==l){const f=z("icon",i==="lg"&&"h-8 w-8 max-md:h-6 max-md:w-[28px] max-md:h-[28px]",o);let m,g,p,h,x,v;if(e[8]!==n||e[9]!==c||e[10]!==d||e[11]!==a||e[12]!==l){const y=uo(c),b=!!y;p=!b&&!l;const C=Yce();let S;m=null;let E=null;b?(S=y.icon,E=y):p?(S=C.icon,m=C.hoverIcon,E=C):S=a?Xce:Jce;const k=p&&"relative";e[19]!==k?(x=z(k),e[19]=k,e[20]=x):x=e[20];const T=n!=null?n:void 0;e[21]!==T?(v={color:T},e[21]=T,e[22]=v):v=e[22],g=S,h=E?d.formatMessage(E.label):void 0,e[8]=n,e[9]=c,e[10]=d,e[11]=a,e[12]=l,e[13]=m,e[14]=g,e[15]=p,e[16]=h,e[17]=x,e[18]=v}else m=e[13],g=e[14],p=e[15],h=e[16],x=e[17],v=e[18];u=r.jsxs("div",{className:x,style:v,children:[r.jsx(g,{"aria-label":h,className:z(f,p&&"group-hover:invisible group-data-[state=open]:invisible")}),p&&m&&r.jsx(m,{"aria-hidden":!0,inert:!0,className:z(f,"invisible absolute inset-0 place-self-center justify-self-center group-hover:visible group-data-[state=open]:visible")})]}),e[0]=o,e[1]=n,e[2]=c,e[3]=d,e[4]=a,e[5]=i,e[6]=l,e[7]=u}else u=e[7];return u}const Zqe=R(()=>P(()=>import("./h379zax8ll2jqg1v.js"),__vite__mapDeps([182,1,10,11,183])).then(t=>t.SnorlaxFolderAnimation),{loading:({color:t,isSharedProject:e,strict:n})=>r.jsx(gP,{color:t,isSharedProject:e,strict:n})}),ede=R(()=>P(()=>import("./bv6qlih4ismj9xc6.js"),__vite__mapDeps([184,1])),{loading:t=>F(t)}),t0=R(()=>P(()=>Promise.resolve().then(()=>yme),void 0).then(t=>t.CreateOrEditProjectModalAsync));function Ex(t){"use forget";const e=W.c(47),n=ne(),s=It(),o=V(),a=!t.inSidebarFlyout,{canCreate:i}=mH(),l=at(),[c,d]=_.useState(!1),{snorlaxes:u,hasNextPage:f,fetchNextPage:m,isLoading:g,isFetchingNextPage:p,isError:h}=y3();let x,v,y,b,C;if(e[0]!==a||e[1]!==i||e[2]!==o||e[3]!==f||e[4]!==c||e[5]!==n||e[6]!==h||e[7]!==g||e[8]!==l||e[9]!==m||e[10]!==t||e[11]!==s||e[12]!==u){const k=t.inSidebarFlyout?u.slice(qT):u;let T;e[18]!==t.currentGizmoId?(T=O=>{const{gizmo:D}=O;return D.gizmo.id!==t.currentGizmoId},e[18]=t.currentGizmoId,e[19]=T):T=e[19];const M=k.filter(T),A=M.length===0;let I;e[20]!==f||e[21]!==g||e[22]!==m?(I=O=>{if(g||O==null)return;const D=new IntersectionObserver($=>{$[0].isIntersecting&&f&&m()});return D.observe(O),()=>{D.disconnect()}},e[20]=f,e[21]=g,e[22]=m,e[23]=I):I=e[23];const N=I,L=a&&i;x=A&&!h?N:void 0,e[24]!==A||e[25]!==g?(v=A&&g&&r.jsxs(Ed,{children:[r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{})]}),e[24]=A,e[25]=g,e[26]=v):v=e[26],e[27]!==c||e[28]!==n||e[29]!==A||e[30]!==h||e[31]!==s?(y=A&&h&&r.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[n.formatMessage(Kt.unableToLoadHistory),!c&&r.jsx("div",{className:"mt-1",children:r.jsx(ye,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{d(!0),gH(s)},children:n.formatMessage(Kt.retryLoadingHistory)})})]}),e[27]=c,e[28]=n,e[29]=A,e[30]=h,e[31]=s,e[32]=y):y=e[32],e[33]!==o||e[34]!==l||e[35]!==t||e[36]!==L?(b=L&&r.jsx(r.Fragment,{children:r.jsx(K.Item,{icon:ede,label:r.jsx(j,w({},Kt.newProjectButton)),onSelect:()=>{dt(o,t0,{onClose:()=>Cs(o,t0),onSuccess:async O=>{O&&(await t.onUpdateConversationGizmo(O),l("/g/".concat(O,"/project")),Cs(o,t0))}})}})}),e[33]=o,e[34]=l,e[35]=t,e[36]=L,e[37]=b):b=e[37],C=!g&&!A&&M.map((O,D)=>{const{gizmo:$}=O,H=D===M.length-1?N:void 0;return r.jsxs(r.Fragment,{children:[L&&D===0&&r.jsx(K.Separator,{},"new-project-separator"),r.jsx(K.LinkItem,{to:$!=null?kf(o,$):"/",icon:r.jsx(gP,{color:$.gizmo.display.theme,emoji:$.gizmo.display.emoji,strict:!0}),label:$.gizmo.display.name,onClick:()=>{t.inSidebarFlyout||t.onUpdateConversationGizmo($.gizmo.id)},ref:H},$.gizmo.id)]})}),e[0]=a,e[1]=i,e[2]=o,e[3]=f,e[4]=c,e[5]=n,e[6]=h,e[7]=g,e[8]=l,e[9]=m,e[10]=t,e[11]=s,e[12]=u,e[13]=x,e[14]=v,e[15]=y,e[16]=b,e[17]=C}else x=e[13],v=e[14],y=e[15],b=e[16],C=e[17];let S;e[38]!==p?(S=p&&r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{})]}),e[38]=p,e[39]=S):S=e[39];let E;return e[40]!==x||e[41]!==v||e[42]!==y||e[43]!==b||e[44]!==C||e[45]!==S?(E=r.jsxs("div",{ref:x,children:[v,y,b,C,S]}),e[40]=x,e[41]=v,e[42]=y,e[43]=b,e[44]=C,e[45]=S,e[46]=E):E=e[46],E}const VC=R(()=>P(()=>import("./kmxpxyewlocdcvkp.js"),__vite__mapDeps([185,1,10,11,186])).then(t=>t.ShareProjectChatModal));function tde(t){"use forget";var h,x,v;const e=W.c(10),{clientThreadId:n}=t,s=V(),o=st(s),a=Kn(n),[i,l,c]=Ve(n,nde),d=o==null?void 0:o.normalizedAccountUserId,{data:u}=YT(c),f=((v=(x=(h=u==null?void 0:u.gizmo.sharing)==null?void 0:h.subjects)==null?void 0:x.length)!=null?v:0)>0,m=(i!=null?i:d)&&(a!=null?a:l)&&js(c)&&f&&!(o!=null&&o.isWorkspaceAccount());let g;e[0]!==s||e[1]!==u||e[2]!==(i==null?void 0:i.id)||e[3]!==a||e[4]!==l||e[5]!==d?(g=()=>{var y,b;u&&dt(s,VC,{gizmo:u,serverThreadId:a!=null?a:l,ownerUserId:(b=(y=i==null?void 0:i.id)!=null?y:d)!=null?b:"",onClose:()=>Cs(s,VC)})},e[0]=s,e[1]=u,e[2]=i==null?void 0:i.id,e[3]=a,e[4]=l,e[5]=d,e[6]=g):g=e[6];let p;return e[7]!==m||e[8]!==g?(p={shouldShowProjectsChatShareModal:m,openProjectsChatShareModal:g},e[7]=m,e[8]=g,e[9]=p):p=e[9],p}function nde(t){return[t==null?void 0:t.sharedProjectConversationOwner,t==null?void 0:t.continuingFromSharedProjectConversationId,he.getGizmoId(t)]}function sde(){"use forget";var i;const t=W.c(5),e=Sn();let n;t[0]!==e?(n=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=n):n=t[1];const s=bh(n),o=s.isLoading?null:((i=s.data)==null?void 0:i.allow_third_party_gpts)==="allow_specific";let a;return t[2]!==e||t[3]!==o?(a=(e==null?void 0:e.isOwnerOfAccount())&&o,t[2]=e,t[3]=o,t[4]=a):a=t[4],a}function ode(){"use forget";var l;const t=W.c(5),e=Sn();let n;t[0]!==e?(n=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=n):n=t[1];const{data:s,isLoading:o}=bh(n);let a;t[2]!==o||t[3]!==(s==null?void 0:s.permissions)?(a=o?null:((l=s==null?void 0:s.permissions)==null?void 0:l.includes("chatgpt.workspace.feature.enhanced-citations.access"))===!0,t[2]=o,t[3]=s==null?void 0:s.permissions,t[4]=a):a=t[4];const i=a;return v3()&&i}const pP=3;function ade(t){return e=>{if(e){const n=e.filter(s=>s.item.id!==t.item.id);return[t,...n]}return[t]}}function hP(t){return e=>e&&e.filter(n=>n.item.id!==t)}function rde(t){var e;return((e=t==null?void 0:t.length)!=null?e:0)<pP}function kc(){return Xn({queryKey:[bu],queryFn:async()=>await ge.safeGet("/pins",{parameters:{query:{limit:pP}},authOption:sn.SendIfAvailable})})}function ide(){const t=It(),e=$t();return qt({mutationFn:async({isStarred:n,conversation:s})=>(await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:s.id}},requestBody:{is_starred:n},intercomEventOnError:"fetch-error:conversation:star"}),{conversation:s,isStarred:n}),onMutate:({isStarred:n,conversation:s})=>{const o=t.getQueryData([bu]),a=t.getQueryData([Ka]);if(n&&!rde(o))return{previousStarredConversationsData:o,previousGeneralConversationsData:a};n?(t.setQueryData([bu],ade({item_type:"conversation",item:s})),t.setQueryData([Ka],ku(s.id))):(t.setQueryData([bu],hP(s.id)),t.setQueryData([Ka],wu(s,{items:[s],total:1,limit:H2,offset:0})));const i=jt(s.id);return i&&Ze(i,l=>{l.isStarred=n}),{previousStarredConversationsData:o,previousGeneralConversationsData:a}},onError:(n,s,o)=>{if(o!=null&&o.previousStarredConversationsData&&t.setQueryData([bu],o.previousStarredConversationsData),o!=null&&o.previousGeneralConversationsData&&t.setQueryData([Ka],o.previousGeneralConversationsData),s){const i=jt(s.conversation.id);i&&Ze(i,l=>{l.isStarred=!s.isStarred})}const a=LT(n);e.warning(a!=null?a:"Error",{duration:2})},onSettled:()=>{Xs(t)}})}function Ib(t){const e=ze(t,"3436367576"),n=e.get("enable_local_indexing",!1),s=e.get("enable_ux",!1),o=st(t),a=!!(o!=null&&o.hasPlusFeatures());return{isFannyPackEnabled:s||a,isFannyPackInitializerEnabled:n||a}}const lde=new RegExp("```.*?\\n([\\s\\S]+?)\\n?```[^`]*$","gms");function HC(){return hH()||_H()}const cde={[We.Comma]:",",[We.Enter]:"",[We.Escape]:"Esc",[We.ArrowUp]:"",[We.ArrowDown]:"",[We.ArrowLeft]:"",[We.ArrowRight]:"",[We.Backspace]:"",[We.Delete]:"",[We.Tab]:"",[We.Control]:"Ctrl",[We.Shift]:"Shift"};function dde(t){switch(t){case We.Mod:return HC()?"":"Ctrl";case We.Meta:return HC()?"":"Win";default:return cde[t]}}const Kqe=t=>t.map(e=>{var n;return(n=dde(e))!=null?n:e}),ia=Se({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},toggleDevMode:{id:"keyboardActions.toggleDevMode",defaultMessage:"Toggle dev mode"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),_P=new pH,xP=[We.Mod,We.Shift,"o"],ude=[We.Mod,"k"],fde=R(()=>P(()=>Promise.resolve().then(()=>M4),void 0).then(t=>t.DeleteConversationConfirmationModalContainer)),Qqe=t=>{"use forget";const e=W.c(24),{newChatAction:n,clientThreadId:s,focusPromptTextareaAction:o}=t,a=V(),i=$t();let l;e[0]!==a?(l=Ib(a),e[0]=a,e[1]=l):l=e[1];const{isFannyPackEnabled:c}=l;let d;e[2]!==a?(d=()=>wd(a),e[2]=a,e[3]=d):d=e[3];const u=re(d);let f;e[4]!==a?(f=()=>xH(a),e[4]=a,e[5]=f):f=e[5];const m=re(f),g=wl();let p;e[6]!==a?(p=()=>yH(a),e[6]=a,e[7]=p):p=e[7];const h=re(p),x=bl(),v=An(mn),y=at(),b=ne();let C,S;e[8]!==m||e[9]!==h||e[10]!==s||e[11]!==a||e[12]!==o||e[13]!==b||e[14]!==v||e[15]!==u||e[16]!==x||e[17]!==c||e[18]!==y||e[19]!==n||e[20]!==i||e[21]!==g?(C=()=>{const E=x?[[We.Mod,"n"]]:[],k={key:"navigationToggle",action:mde,actionMessageDescriptor:ia.navigationToggle,group:Dn.Core,keyboardBinding:[We.Mod,We.Shift,"s"]},T={key:"toggleDevMode",action:()=>{g.mutate({setting:Lt.DeveloperMode,value:!u}),i.success(b.formatMessage({id:"ANH+8L",defaultMessage:"Developer mode toggled"}))},actionMessageDescriptor:ia.toggleDevMode,group:Dn.Settings,keyboardBinding:[We.Mod,"."]};return kh(a).addAction({key:"newChat",action:n||as,actionMessageDescriptor:ia.newChat,group:Dn.Core,keyboardBinding:xP,altKeyboardBindings:c?[...E]:[...E,[We.Mod,"k"]]},{key:"focusPromptTextarea",action:o!=null?o:jv,actionMessageDescriptor:ia.focusPromptTextarea,group:Dn.Chat,keyboardBinding:[We.Shift,We.Escape]},{key:"copyLastCodeBlock",action:M=>{if(s!=null){const A=he.getConversationTurns(mt(s));for(let I=A.length-1;I>=0;I--){const{messages:N}=A[I],O=[...N.reduce(gde,"").matchAll(lde)],D=O.length?O[O.length-1][1]:null;if(D!=null){Yo(D,i,M).then(()=>{i.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:ia.copyLastCodeBlock,group:Dn.Chat,keyboardBinding:[We.Mod,We.Shift,";"],altKeyboardBindings:[[We.Mod,We.Shift,":"]]},{key:"toggleCustomInstructions",action:()=>{y("#settings/".concat(Pn.Personalization))},actionMessageDescriptor:ia.toggleCustomInstructions,group:Dn.Settings,keyboardBinding:[We.Mod,We.Shift,"i"]},...m&&h?[T]:[],...v?[]:[k],{key:"deleteChat",action:()=>{if(s){const M=jt(s);M&&dt(a,fde,{serverThreadId:M,isActiveConversation:!0})}},actionMessageDescriptor:ia.deleteChat,group:Dn.Chat,keyboardBinding:[We.Mod,We.Shift,We.Backspace],altKeyboardBindings:[[We.Mod,We.Shift,We.Delete]]},{key:"zoomIn",enabled:qo,action:pde,actionMessageDescriptor:ia.zoomIn,group:Dn.Chat,keyboardBinding:[We.Mod,"+"],altKeyboardBindings:[[We.Mod,"="]]},{key:"zoomOut",enabled:qo,action:hde,actionMessageDescriptor:ia.zoomOut,group:Dn.Chat,keyboardBinding:[We.Mod,"-"]},{key:"resetZoom",enabled:qo,action:_de,actionMessageDescriptor:ia.resetZoom,group:Dn.Chat,keyboardBinding:[We.Mod,"0"]})},S=[a,s,o,v,x,c,n,i,y,u,g,m,h,b],e[8]=m,e[9]=h,e[10]=s,e[11]=a,e[12]=o,e[13]=b,e[14]=v,e[15]=u,e[16]=x,e[17]=c,e[18]=y,e[19]=n,e[20]=i,e[21]=g,e[22]=C,e[23]=S):(C=e[22],S=e[23]),_.useEffect(C,S)},Jqe=t=>{"use forget";const e=W.c(6),{setSelectedVoiceIndex:n,prevVoiceIndex:s,nextVoiceIndex:o}=t,a=V();let i,l;e[0]!==a||e[1]!==o||e[2]!==s||e[3]!==n?(i=()=>kh(a).addAction({key:"selectPrevVoice",action:()=>{n(s)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:Dn.Core,keyboardBinding:[We.ArrowLeft]},{key:"selectNextVoice",action:()=>{n(o)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:Dn.Chat,keyboardBinding:[We.ArrowRight]}),l=[a,n,s,o],e[0]=a,e[1]=o,e[2]=s,e[3]=n,e[4]=i,e[5]=l):(i=e[4],l=e[5]),_.useEffect(i,l)};function mde(){Ln.setSidebarOpen(void 0)}function gde(t,e){var n;return((n=e.clientMetadata)==null?void 0:n.err)==null&&e.author.role===Ke.Assistant&&e.recipient==="all"?t+(t?"\n\n":"")+yo(e):t}function pde(){return vH()}function hde(){return bH()}function _de(){return CH()}const xde=R(()=>P(()=>import("./okzsq1aji2s9p1ex.js"),__vite__mapDeps([187,1])),{loading:t=>F(t)});function yde({gizmoResource:t}){const e=V(),n=$t(),[s,o]=_.useState(!1);return t.gizmo.share_recipient===Qi.Private?null:r.jsx(K.Item,{onClick:async a=>{a.stopPropagation(),a.preventDefault();try{const i=t.gizmo.short_url?SH(t.gizmo.short_url):window.location.origin.concat(kf(e,t));await Yo(i,n,a),o(!0),setTimeout(()=>{o(!1)},2e3)}catch(i){Fe.addError(i);return}},icon:xde,children:s?r.jsx(j,w({},GC.copiedURL)):r.jsx(j,w({},GC.copyLink))})}const GC=Se({copyLink:{defaultMessage:"Copy link",id:"GizmoInformation.copyLink"},copiedURL:{defaultMessage:"Copied URL",id:"GizmoInformation.copiedURL"}}),vde=R(()=>P(()=>Promise.resolve().then(()=>VO),void 0),{loading:t=>F(t)});function yP({className:t,inputClassName:e,value:n,onChange:s,onKeyDown:o,onFocus:a,onBlur:i,placeholder:l,id:c,autoFocus:d}){return r.jsxs("div",{className:z("relative",t),children:[r.jsx(vde,{className:"icon-sm text-token-text-tertiary absolute start-2 top-1/2 -translate-y-1/2 transform"}),r.jsx("input",{id:c,type:"text",value:n,onKeyDown:o,onChange:s,onFocus:a,onBlur:i,placeholder:l,autoFocus:d,className:z("rounded-lg border border-gray-200 ps-8 placeholder:text-gray-500 dark:border-gray-600 dark:bg-gray-700",e),autoComplete:"off"})]})}function vP({modelSwitcherDeny:t}){const e=V(),n=st(e),s=n==null?void 0:n.isPro();switch(t.reason){case Lo.UNSUPPORTED_TOOL_USE:case Lo.UNSUPPORTED_AUDIO:case Lo.UNSUPPORTED_IMAGE:case Lo.UNSUPPORTED_GIZMO:case Lo.UNSUPPORTED_ATTACHMENT:case Lo.UNSUPPORTED_CUSTOM_INSTRUCTIONS:case Lo.UNSUPPORTED_CANVAS:case Lo.UNSUPPORTED_TEMPORARY_CHAT:return r.jsx(r.Fragment,{children:t.description});case Df.RATE_LIMIT:{const{resetsAfter:a}=t,i=new Date(a),l=new Date(a).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});if(s)return r.jsx("div",{children:r.jsx(j,{id:"CwSQn9",defaultMessage:"Temporarily limited. Contact <supportEmail>support@openai.com</supportEmail> for help.",values:{supportEmail:c=>r.jsx(wo,{to:"mailto:support@openai.com",className:"underline",children:c})}})});if(ZT(i))return r.jsx(j,{id:"HUybjA",defaultMessage:"Your limit will reset at {time}",values:{time:l}});if(wH(i))return r.jsx(j,{id:"TvYw9K",defaultMessage:"Your limit will reset at {time} tomorrow",values:{time:l}});{const c=i.toLocaleDateString([],{month:"short",day:"numeric"});return r.jsx(j,{id:"60ZcZL",defaultMessage:"Your limit will reset on {date}",values:{date:c}})}}}const o=t.description;if(o)return r.jsx(r.Fragment,{children:o})}function jb({clientThreadId:t}){var g;const e=V(),n=xt(e,t),s=Eh(),[o,a]=Ve(t,p=>{var h,x;return[(x=(h=he.getCurrentNode(p))==null?void 0:h.message.metadata)==null?void 0:x.model_switcher_deny,he.getGizmoId(p)]}),i=a!=null?a:s,{data:l}=Ci(i),c=re(()=>ea(n)),d=ne(),u={},f=ve(e,"891514942"),m=Th();for(const{resets_after:p,model_slug:h}of m)[jm.CONVERSATION,jm.REGENERATE].forEach(x=>{var C,S;const v=(C=u[h])!=null?C:{},y=(S=v[x])!=null?S:[],b={reason:Df.RATE_LIMIT,resetsAfter:p,isAvailable:!1};y.push(b),v[x]=y,u[h]=v});if(o==null||o.forEach(p=>{var k,T;const{slug:h,context:x,reason:v,description:y,is_available:b}=p,C=f&&b,S=(k=u[h])!=null?k:{},E=(T=S[x])!=null?T:[];E.push({reason:v,description:y,isAvailable:C}),S[x]=E,u[h]=S}),i&&js(i)){const p=[ds.GIZMO_PROJECT];(g=l==null?void 0:l.files)!=null&&g.length&&p.push(ds.ATTACHMENT),l!=null&&l.gizmo.instructions.length&&p.push(ds.CUSTOM_INSTRUCTIONS),c.categories.forEach(h=>{var C;const{defaultModel:x,supportedFeatures:v}=h,y=v||[],b=[];if(p.includes(ds.GIZMO_PROJECT)&&!y.includes(ds.GIZMO_PROJECT)&&b.push({reason:Lo.UNSUPPORTED_GIZMO,description:d.formatMessage({id:"6w0z4F",defaultMessage:"This model doesn't support projects."}),isAvailable:!1}),p.includes(ds.ATTACHMENT)&&!y.includes(ds.ATTACHMENT)&&b.push({reason:Lo.UNSUPPORTED_ATTACHMENT,description:d.formatMessage({id:"ZKjdak",defaultMessage:"This model doesn't support file attachments."}),isAvailable:!1}),p.includes(ds.CUSTOM_INSTRUCTIONS)&&!y.includes(ds.CUSTOM_INSTRUCTIONS)&&b.push({reason:Lo.UNSUPPORTED_CUSTOM_INSTRUCTIONS,description:d.formatMessage({id:"zaubcf",defaultMessage:"This model doesn't support custom instructions."}),isAvailable:!1}),b.length){const S=(C=u[x])!=null?C:{};[jm.CONVERSATION,jm.REGENERATE].forEach(E=>{var T;const k=(T=S[E])!=null?T:[];k.push(...b),S[E]=k,u[x]=S})}})}return u}function bP({modelSlug:t,modelSwitcherDenialsBySlug:e}){var s;const n=t?(s=e[t])==null?void 0:s.conversation:null;return n?n.every(o=>o.isAvailable===!0):!0}const bde=R(()=>P(()=>import("./lyh8bkoye9hz4v56.js"),__vite__mapDeps([163,1])),{loading:t=>F(t)}),Cde=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yr),__vite__mapDeps([10,1,11])),{loading:t=>F(t)});function Sde(t){"use forget";var I;const e=W.c(41),{conversation:n,currentModel:s,categoryOptions:o,className:a,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:l,onModelItemClick:c,preferredModelId:d}=t,u=l===void 0?!1:l,f=ne(),m=(I=s==null?void 0:s.id)!=null?I:null,[g,p]=_.useState("");let h;e:{if(!g){h=o;break e}let N;if(e[0]!==o||e[1]!==g){let L;e[3]!==g?(L=O=>O.name.toLowerCase().includes(g.toLowerCase()),e[3]=g,e[4]=L):L=e[4],N=o.filter(L),e[0]=o,e[1]=g,e[2]=N}else N=e[2];h=N}const x=h;let v;e[5]!==a?(v=z("flex flex-col pt-0",a),e[5]=a,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y={borderRadius:"inherit"},e[7]=y):y=e[7];let b;e[8]===Symbol.for("react.memo_cache_sentinel")?(b=N=>{p(N.target.value)},e[8]=b):b=e[8];let C;e[9]!==g?(C=r.jsx("div",{className:"p-2",children:r.jsx(yP,{inputClassName:"w-full",value:g,onKeyDown:wde,onChange:b})}),e[9]=g,e[10]=C):C=e[10];let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx("hr",{}),e[11]=S):S=e[11];let E;e[12]!==C?(E=r.jsxs("div",{style:y,className:"sticky top-0 z-1 bg-white",children:[C,S]}),e[12]=C,e[13]=E):E=e[13];let k;e[14]!==x.length||e[15]!==f?(k=x.length===0&&r.jsx(K.Item,{children:f.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),e[14]=x.length,e[15]=f,e[16]=k):k=e[16];let T;if(e[17]!==n||e[18]!==s||e[19]!==m||e[20]!==u||e[21]!==x||e[22]!==i||e[23]!==c||e[24]!==d){let N;e[26]!==n||e[27]!==s||e[28]!==m||e[29]!==u||e[30]!==i||e[31]!==c||e[32]!==d?(N=L=>{const{value:O}=L;return"options"in L?r.jsx(_c,{conversation:n,currentModel:s,isSelected:m==null?void 0:m.startsWith(O),option:L,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:u,onModelItemClick:c,preferredModelId:d},O):r.jsx(Vr,{conversation:n,currentModelId:m,isSelected:m===O,value:O,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:u,onClick:c,preferredModelId:d,children:L.name},O)},e[26]=n,e[27]=s,e[28]=m,e[29]=u,e[30]=i,e[31]=c,e[32]=d,e[33]=N):N=e[33],T=x.map(N),e[17]=n,e[18]=s,e[19]=m,e[20]=u,e[21]=x,e[22]=i,e[23]=c,e[24]=d,e[25]=T}else T=e[25];let M;e[34]!==T||e[35]!==k?(M=r.jsxs("div",{className:"scrollbar-gutter-stable w-[min(320px,95vw)] flex-grow overflow-auto",children:[k,T]}),e[34]=T,e[35]=k,e[36]=M):M=e[36];let A;return e[37]!==M||e[38]!==v||e[39]!==E?(A=r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{className:v,children:[E,M]})}),e[37]=M,e[38]=v,e[39]=E,e[40]=A):A=e[40],A}function wde(t){t.stopPropagation()}function _c({conversation:t,currentModel:e,option:n,isSelected:s=!1,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:a=!1,onModelItemClick:i,preferredModelId:l}){var p;const{name:c,options:d,categoryId:u}=n,f="".concat(c," Models"),m=()=>r.jsx("div",{className:"flex shrink-0 grow justify-between gap-2",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(bde,{className:"icon"}),f]})});let g;return a&&s&&(g=(p=n.options.find(h=>h.value===(e==null?void 0:e.id)))==null?void 0:p.name),r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{children:r.jsxs("div",{className:z("flex grow justify-between gap-2 overflow-hidden",a?"items-center break-all":""),children:[u?m():c,s&&r.jsx("div",{className:"text-token-text-tertiary truncate",children:g!=null?g:e==null?void 0:e.title})]})}),r.jsx(Sde,{conversation:t,currentModel:e,categoryOptions:d,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:a,onModelItemClick:i,preferredModelId:l})]})}function Vr({value:t,children:e,icon:n,secondary:s,currentModelId:o,isSelected:a,onClick:i,modelSwitcherDenialsBySlug:l,isUpgradeUpsell:c=!1,testId:d,displayInFull_INTERNAL_USE_ONLY:u=!1,deprecated:f,preferredModelId:m,disabledByAdmin:g,conversation:p}){var T,M;const h=V(),x=t?(M=(T=l[t])==null?void 0:T.conversation)==null?void 0:M[0]:null,v=xs(),y=$s(),b=bP({modelSlug:t,modelSwitcherDenialsBySlug:l}),C=g||!b,S=ze(h,"1846737571"),E=()=>{if(v===Pe.Glaux&&y(null,{ifPrevSystemHint:Pe.Glaux}),i)i(t);else if(t){B.logEvent("Model Switcher Model Changed",{from:o,to:t}),qe.logEvent("chatgpt_model_switcher_model_changed",t,{from:o!=null?o:"",to:t});const A=t;b3(h,A)||kH(h).mutate({modelSlug:A}),Ff(p,A)}},k=r.jsx(K.Item,{onClick:E,disabled:C,className:z(u&&"break-all"),icon:n,secondary:s,trailingColor:"primary",trailing:c?r.jsx(ye,{color:"secondary",size:"small",className:S.get("is_upgrade_button_blue",!1)?"border-none bg-blue-600 text-white hover:bg-blue-800":"",children:r.jsx(j,{id:"oKo8wt",defaultMessage:"Upgrade"})}):a?r.jsx(Cde,{className:"icon-sm"}):r.jsx("span",{className:"icon"}),"data-testid":d,children:r.jsxs("span",{className:"flex items-center gap-1",children:[e,t&&t===m&&!a&&!c&&!f&&r.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700",children:r.jsx(j,{id:"model-switcher.preferred",defaultMessage:"GPT creator recommended"})})]})},t);return x?r.jsx(pt,{withArrow:!0,side:"right",sideOffset:-10,label:r.jsx(vP,{modelSwitcherDeny:x}),children:k}):k}var Og=(t=>(t.GPT4o="AG8PqS2q",t.AUTO="auto",t))(Og||{});const kde=t=>{const{categoryId:e}=t;return e==="auto"},Ede=(t,e,n,s)=>{const o=ve(t,"2861925050"),a=n==null?void 0:n.some(({model_slug:i})=>s==null?void 0:s.models.get(i));return!(!o||!a||!e||!e.isSelfServeBusiness())},CP=()=>{const t=_t.getItem(Ue.FinchAdminNotified);return new Date(t!=null?t:0)},Tde=()=>{const t=new Date;t.setDate(t.getDate()+1),_t.setItem(Ue.FinchAdminNotified,t.toISOString())},Mde=()=>{const t=CP();return _t.getItem(Ue.FinchAdminNotified)!=null&&new Date<=t},Ade=()=>{const t=CP();return new Date>t},Ide=t=>{switch(t){case"wham":return"wham";case"deep_research":return"deep_research";case"image_gen":return"image_gen";case"gpt-4-5":return"gpt-4-5";default:return null}},jde=Ft(t=>({hasRequestedCredits:Mde(),setHasRequestedCredits:e=>t(()=>({hasRequestedCredits:e}))})),Nde=R(()=>P(()=>import("./mbideqths2dg8l8v.js"),__vite__mapDeps([188,1,10,11])).then(t=>t.CreditPurchaseModal)),Pde=()=>{const t=$t(),e=ne(),{hasRequestedCredits:n,setHasRequestedCredits:s}=jde(),{mutate:o,isPending:a}=qt({mutationFn:i=>ge.safePost("/credits/pleas",{requestBody:{product:i}}),onError:i=>{Fe.addError(new Error("Error occurred while submitting credit plea request",{cause:i})),t.danger(Bc.errorRequestCredits,{toastId:"teams_credit_plea_button"})},onSuccess:()=>{s(!0),t.success(e.formatMessage(Bc.successRequestCredits)),Tde(),Ln.setThreadModelPickerAlertDot(!1)}});return{submitCreditPleaRequest:o,hasRequestedCredits:n,isPending:a}},SP=n=>{var s=n,{trigger:t}=s,e=we(s,["trigger"]);const o=V();_.useEffect(()=>{B.logEventWithStatsig("ChatGPT Credits: Add Credits Button Shown","chatgpt_credits_add_credits_button_shown",{trigger:t})},[t]);const a=()=>{B.logEventWithStatsig("ChatGPT Credits: Add Credits Clicked","chatgpt_credits_add_credits_clicked"),dt(o,Nde)};return r.jsx(ye,U(w({color:"primary",onClick:a},e),{children:r.jsx(j,w({},Bc.addCredits))}))},wP=s=>{var o=s,{creditConsumingProduct:t,trigger:e}=o,n=we(o,["creditConsumingProduct","trigger"]);const a=ne(),{submitCreditPleaRequest:i,isPending:l,hasRequestedCredits:c}=Pde();_.useEffect(()=>{B.logEventWithStatsig("ChatGPT Credits: Notify Admin Button Shown","chatgpt_credits_notify_admin_button_shown",{trigger:e,creditConsumingProduct:t})},[t,e]);const d=()=>{c||(i(t),B.logEventWithStatsig("ChatGPT Credits: Notify Admin Clicked","chatgpt_credits_notify_admin_clicked"))},u=r.jsx(ye,U(w({loading:l,color:c?"secondary":"primary",disabled:c,onClick:d},n),{children:c?a.formatMessage(Bc.requested):a.formatMessage(Bc.notifyAdmin)}));return c?r.jsx(pt,{className:"w-auto whitespace-nowrap",withArrow:!0,labelTextAlign:"left",contentClassName:"w-[180px]",side:"right",label:a.formatMessage(Bc.alreadyRequested),children:u}):u},Bc=Se({notifyAdmin:{id:"prompt-textarea.teamsCreditRequestBanner.notifyAdmin",defaultMessage:"Notify admin"},addCredits:{id:"prompt-textarea.teamsCreditRequestBanner.addCredits",defaultMessage:"Add credits"},requested:{id:"prompt-textarea.teamsCreditRequestBanner.requested",defaultMessage:"Requested"},errorRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.error",defaultMessage:"Error occurred while submitting credit request"},successRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.success",defaultMessage:"Request sent to your admin"},alreadyRequested:{id:"prompt-textarea.teamsCreditRequestBanner.alreadyRequested",defaultMessage:"Youve already notified your admin"}}),WC="needsCreditsSection",Rde=()=>{const t=Sn(),e=t==null?void 0:t.isOwnerOfAccount();return r.jsxs(K.Item,{className:"pointer-events-none pe-2.5! hover:bg-transparent hover:text-inherit",onSelect:n=>n.preventDefault(),disabled:!0,children:[r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(j,w({},e?zC.ownerDescription:zC.description))}),e?r.jsx(SP,{size:"small",trigger:"thread-header-dropdown-credits-section"}):r.jsx(wP,{size:"small",creditConsumingProduct:"gpt-4-5",trigger:"thread-header-dropdown-credits-section"})]})},zC=Se({description:{id:"prompt-textarea.teamsCreditRequestBanner.label",defaultMessage:"Limits reached. Send a request to your admin to get access"},ownerDescription:{id:"prompt-textarea.teamsCreditRequestBanner.ownerLabel",defaultMessage:"Limits reached. Add credits to your account"}}),Lde="{{.assetPrefix}}/assets/no-auth-upsell-m8ypcpwf.webp",Ode={src:Lde};function Dde({statsig_login_event:t,statsig_signup_event:e,location:n}){const s=V(),o=$l(s),a=Bd(s,qC.signUpCta),i="no-auth-".concat(n),l=at(),c=h=>{switch(h){case"attach":return kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_ATTACH;case"model-switcher":return kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_MODEL_SWITCHER;default:return kt.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL}},d=Ps(s,"2210309751").get("variant","control"),u=()=>{l({hash:Zf,search:window.location.search},{state:{[d1]:"NoAuth Model Picker Upsell"}})},f=()=>{Zt(s,{fallbackScreenHint:"login",callback:h=>{B.logLogInButtonClicked({location:i,provider:h},c(n)),qe.logEvent(t)},skipLoginModal:!1})},m=()=>{Zt(s,{fallbackScreenHint:"signup",callback:h=>{B.logSignUpButtonClicked({location:i,provider:h},c(n)),qe.logEvent(e)},skipLoginModal:!1})},g=r.jsx(ye,{as:"button",size:"medium",color:o?"primary":"secondary",onClick:f,children:r.jsx(j,{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"})},"login-button"),p=r.jsx(ye,{as:"button",size:"medium",color:o?"secondary":"primary",onClick:m,children:r.jsx(j,w({},a))},"signup-button");return r.jsxs("div",{className:"-mt-4 flex max-w-[calc(100vw-2rem)] flex-col",children:[r.jsx("img",{className:"max-xs:hidden h-[132px] object-fill",src:Ode.src,alt:""}),r.jsxs("div",{className:"flex flex-col px-4 pt-5 pb-2",children:[r.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:r.jsx(j,{id:"rwmTbn",defaultMessage:"Try advanced features for free"})}),r.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:r.jsx(j,{id:"unOBJo",defaultMessage:"Get smarter responses, upload files, create images, and more by logging in."})}),r.jsx("div",{className:"mt-5 flex flex-row flex-wrap justify-start gap-2",children:o?[g,p]:[p,g]}),d==="model-picker"&&r.jsx("p",{className:"text-token-text-secondary mt-5 text-xs",children:r.jsx(j,U(w({},qC.createWorkspaceTeamOrBusiness),{values:{createWorkspaceLink:h=>r.jsx("span",{onClick:u,className:"text-token-text-secondary decoration-token-text-primary cursor-pointer underline",children:h})}}))})]})]})}const qC=Se({signUpCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},createWorkspaceTeamOrBusiness:{id:"components.noAuthUpsell.createWorkspaceTeamOrBusiness",defaultMessage:"<createWorkspaceLink>Create a workspace</createWorkspaceLink> for a team or business"}}),Fde=({isUnauthenticated:t,enabled:e=!0})=>Xn({queryKey:["modelMessageCap",t],queryFn:()=>C3.safeGet("/conversation_limit",{authOption:sn.SendIfAvailable}),enabled:e});function Ep(t){return t.map(e=>typeof e=="string"?e:"").join("")}function Xqe(t){return t.map(e=>e.type==="text"?e.text:"").join("\n")}function kP(t,e){const n=[];let s=0;for(let o=0;o<t.length;o++){const a=t[o];if(typeof a=="string")if(e!=null&&e<s+a.length){n.push({type:"text",text:a.slice(0,e-s)});break}else n.push({type:"text",text:a}),s+=a.length;else if(a.content_type===ba.ImageAssetPointer){const i=o>0?n[o-1]:null;(i==null?void 0:i.type)==="images"?i.imageAssets.push(a):n.push({type:"images",imageAssets:[a]})}else a.content_type===ba.AudioTranscription&&n.push({type:"transcription",text:a.text})}return n}function eYe({isUserTurn:t,parts:e}){if(!t)return kP(e);const n={text:[],images:[]};for(let o=0;o<e.length;o++){const a=e[o];typeof a=="string"?a.trim().length>0&&n.text.push({type:"text",text:a}):a.content_type===ba.AudioTranscription?n.text.push({type:"transcription",text:a.text}):a.content_type===ba.ImageAssetPointer&&n.images.push(a)}const s=[];return n.images.length>0&&s.unshift({type:"images",imageAssets:n.images}),s.push(...n.text.map(o=>({type:o.type,text:o.text}))),s}function Bde(t){const e=t&&new Date(t),n=e&&new Date(e);return n?"after ".concat(n.getHours()%12||12,":").concat(n.getMinutes()<10?"0":"").concat(n.getMinutes()," ").concat(n.getHours()>=12?"PM":"AM"):"later"}function Ude(t){if(t<60)return{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")};const e=Math.floor(t/60);if(e<24)return{type:"hour",value:e,text:e<2?"hour":"".concat(e," hours")};const n=Math.floor(e/24);return n<7?{type:"day",value:n,text:n<2?"day":"".concat(n," days")}:{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")}}const n0={textarea:"","model-switcher":""};function $de(){const t=V(),e=Yh(l=>l.isoDate),n=Bde(e),s=ne(),o=zo(Ca.isEnterpriseyPlan),a=!tt(t),{data:i}=rt(Fde({isUnauthenticated:a}));return _.useMemo(()=>{var p,h,x;const l=(p=i==null?void 0:i.message_cap)!=null?p:0,c=(h=i==null?void 0:i.message_cap_window)!=null?h:1,{text:d,type:u,value:f}=Ude(c),m=(x=i==null?void 0:i.message_disclaimer)!=null?x:n0;if(!d||o)return{textareaDisclaimer:m.textarea,modelSwitcherDisclaimer:m["model-switcher"],modelSwitcherLimitShort:""};if(!i||!c||!l)return{textareaDisclaimer:n0.textarea,modelSwitcherDisclaimer:n0["model-switcher"],modelSwitcherLimitShort:""};let g=s.formatMessage(s0.shortLimitMinutes,{numerator:l,denominator:f});switch(u){case"hour":g=s.formatMessage(s0.shortLimitHours,{numerator:l,denominator:f});break;case"day":g=s.formatMessage(s0.shortLimitDays,{numerator:l,denominator:f});break}return{textareaDisclaimer:m.textarea.replaceAll("%FORMATTED_TIME%",n).replaceAll("%NUMERATOR%","".concat(l)).replaceAll("%DENOMINATOR%",d),modelSwitcherDisclaimer:m["model-switcher"].replaceAll("%FORMATTED_TIME%",n).replaceAll("%NUMERATOR%","".concat(l)).replaceAll("%DENOMINATOR%",d),modelSwitcherLimitShort:g}},[i,n,s,o])}const s0=Se({shortLimitMinutes:{id:"modelCapMessaging.shortLimitMinutes",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# minute} one {# minute} other {# minutes}}"},shortLimitHours:{id:"modelCapMessaging.shortLimitHours",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# hour} one {# hour} other {# hours}}"},shortLimitDays:{id:"modelCapMessaging.shortLimitDays",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# day} one {# day} other {# days}}"}});var Va=(t=>(t.ALPHA="alpha",t.DATA_CAMPAIGNS="data_campaigns",t.EXPERIMENTS="experiments",t.MAINLINE="mainline",t))(Va||{});const Vde=t=>Td(t,({id:e})=>e.split(":").slice(0,1).join(":"));function Nb(){const t=V(),e=Eh(),n=re(()=>KT(t,{isGizmo:!!e})),s=tK(),{modelSwitcherDisclaimer:o}=$de();return _.useMemo(()=>{const a=[],{categories:i,groups:l,models:c}=n;for(const d of i){const{defaultModel:u,categoryId:f,label:m}=d,g=c.get(u);if(g){const p=s===u;a.push({categoryId:f,value:u,name:m,description:p?o:g.description,options:[o0(g,{name:"Default"})]})}}for(const d of l){const{group:u,label:f,modelIds:m}=d,g=m[0],p=[];for(const h of m){const x=c.get(h);x&&!x.tags.includes(EH.HIDDEN)&&p.push(x)}if(u==="experiments"){const h=Vde(p),x=Object.entries(h).map(([v,y])=>{const b=v.split(":").slice(-1)[0];return{key:v,value:b,name:b,options:y.map(C=>{const{title:S}=C;return o0(U(w({},C),{title:S.replace(b,"")}))})}});a.push({categoryId:u,value:g,name:f,options:x})}else a.push({categoryId:u,value:g,name:f,options:p.map(h=>o0(h))})}return a},[n,s,o])}function o0(t,e={}){return w({value:t.id,name:t.title},e)}const Hde=R(()=>P(()=>import("./nkhblhm5gc0ajfkd.js"),__vite__mapDeps([189,1])),{loading:t=>F(t)}),YC=R(()=>P(()=>import("./dhsbs6k2gjbn2qr7.js"),__vite__mapDeps([190,1])),{loading:t=>F(t)}),ZC=R(()=>P(()=>import("./hqbshwkn4xaba14o.js"),__vite__mapDeps([191,1])),{loading:t=>F(t)}),Gde=R(()=>P(()=>import("./em19d2682lnmcb6c.js"),__vite__mapDeps([192,1])),{loading:t=>F(t)}),Wde=R(()=>P(()=>import("./gn9wll6yn4yu2yjg.js"),__vite__mapDeps([193,1])),{loading:t=>F(t)}),EP="top_level_secondary_models";function hf(t,e){let n=t;if(t===W4.AUTO){const a=e.categories.filter(({defaultModel:i})=>i!==W4.AUTO);(a==null?void 0:a.length)===1&&(n=a[0].defaultModel)}const s=e.categories.find(({defaultModel:a,supportedModels:i})=>a===n||n&&(i==null?void 0:i.includes(n)));if(s){const{categoryId:a}=s;return{selectedCategory:a,modelLabel:s.shortLabel,fullModelLabel:s.label}}const o=e.groups.find(({modelIds:a})=>n&&a.includes(n));if(o){const{group:a,shortLabel:i,label:l}=o;return{selectedCategory:a,modelLabel:i,fullModelLabel:l}}return{selectedCategory:null,modelLabel:null,fullModelLabel:null}}function zde(t,e,n,s){const o=e?t.formatMessage(Tx.beta):n?t.formatMessage(Tx.alpha):s;if(o)return r.jsx(ed,{children:o})}function qde({category:t,modelSwitcherDenialsBySlug:e,conversation:n,currentGizmoId:s,currentModelId:o,testId:a,preferredModelId:i,disabledByAdmin:l=!1,disableSelectionHighlight:c=!1}){const d=ne(),{defaultModel:u,label:f,description:m,isBeta:g,isAlpha:p,modelBadge:h,subcategory:x}=t,v=js(s!=null?s:""),y=V(),b=b3(y,u),C=x!==void 0&&x!==EP,S=r.jsxs(Vr,{value:u,conversation:n,currentModelId:o,modelSwitcherDenialsBySlug:e,secondary:C?void 0:m,deprecated:b,disabledByAdmin:l,isSelected:!c&&(!s||v)&&o===u,testId:a,preferredModelId:i,children:[f,zde(d,g,p,h)]},u);return l?r.jsx(pt,{label:d.formatMessage(Tx.disabledByAdmin),children:S}):S}function Pb({sections:t}){return r.jsx(r.Fragment,{children:t.map((e,n)=>{var s;return r.jsxs(Yn.Fragment,{children:[n!==0&&((s=t[n-1])==null?void 0:s.id)!=="model-picker-title"?r.jsx(K.Separator,{}):null,e.content]},e.id)})})}function Rb(t,e,n,s,o){var Ce,ke,Le,De,le,oe,Ee,be;const a=ne(),i=V(),l=!tt(i),{data:c}=El(),d=ln(),u=!l&&!!d&&QT(d)&&c&&!xh(c),{session:f}=hd(i),m=f==null?void 0:f.user,g=m&&Sh(m),p=re(()=>yn(t)),h=p.id,x=re(()=>Qc(t)),v=xs(),y=Pc(v),b=y?null:h;let C=re(()=>ea(t));const S=JT(i),E=Kn(t.id),k=jb({clientThreadId:t.id}),T=C.modelPickerVersion===2,{data:M}=re(()=>x&&!jl(i,x)?XT(i):{data:void 0}),A=!E,I=e.find(({categoryId:fe})=>fe===Va.ALPHA),N=e.find(({categoryId:fe})=>fe===Va.DATA_CAMPAIGNS),L=e.find(({categoryId:fe})=>fe===Va.EXPERIMENTS),O=e.find(({categoryId:fe})=>fe===Va.MAINLINE),[D,$]=_.useState(""),H=re(()=>!0),G=[I,N,L,O].reduce((fe,ue)=>ue?[...fe,...ue.options.map(_e=>U(w({},_e),{badge:ue.categoryId}))]:fe,[]),Z=_.useMemo(()=>D?G.filter(fe=>fe.name.toLowerCase().includes(D.toLowerCase())):G,[G,D]);if(s&&x&&M){const fe=JSON.parse(JSON.stringify(C));fe.categories=fe.categories.filter(({defaultModel:ue})=>M.editor.models_list_with_custom_actions.includes(ue)),C=fe}const Q=!!(I!=null&&I.options.length),q=!!(N!=null&&N.options.length),Y=!!(L!=null&&L.options.length),te=!!(O!=null&&O.options.length),ae=at(),se=_.useCallback(fe=>{B.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),pn(ae,"Thread header dropdown",fe)},[ae]),ce=()=>{qe.logEvent("chatgpt_model_switcher_plus_upgrade_button_clicked"),B.logEvent("Model Switcher Plus Upgrade Button Clicked"),l?Zt(i,{shouldOpenPaymentModalOnAuth:!0,callback:fe=>{B.logSignUpButtonClicked({location:"Model switcher GPT-4 upsell",provider:fe},kt.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GPT4_UPSELL)},skipLoginModal:!1}):se()},X=()=>{B.logEventWithStatsig("Model Switcher Go Upgrade Button Clicked","chatgpt_model_switcher_go_upgrade_button_clicked"),l?Zt(i,{shouldOpenPaymentModalOnAuth:!0,callback:fe=>{B.logSignUpButtonClicked({location:"Model switcher Go upsell",provider:fe},kt.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GO_UPSELL)},skipLoginModal:!1}):se()},ee=()=>{B.logEventWithStatsig("Model Switcher Team Upgrade Button Clicked","chatgpt_model_switcher_team_upgrade_button_clicked"),se(Zf)},ie=[],de=ve(i,"3315017149"),me=!!(C.secondaryTitle&&C.secondaryTitle!==""&&de);C.title&&de&&ie.push({id:"model-picker-title",content:[r.jsx(K.Label,{className:"mb-0",children:C.title},"model-picker-title")]});const xe=r.jsxs(K.Label,{className:"flex items-center",children:[r.jsx(j,{id:"coNCb7",defaultMessage:"Models"}),r.jsx(pt,{side:"right",className:"ms-1.5",delayDuration:120,label:r.jsx(j,{id:"/vFWz/",defaultMessage:"Learn more"}),children:r.jsx("a",{href:"https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",target:"_blank",rel:"noreferrer",children:r.jsx(ZC,{className:"h-3.5 w-3.5 shrink-0"})})})]},"models-section-header");if(l){const fe={id:"modelSection",content:[]};fe.content.push(r.jsx(Dde,{location:"model-switcher",statsig_login_event:"chatgpt_modelswitcher_login_button_clicked",statsig_signup_event:"chatgpt_modelswitcher_signup_button_clicked"},"noAuthUpsell")),ie.push(fe)}else if(!S&&!x){const fe={id:"modelSection",content:[]};bp(i)?fe.content.push(r.jsx(Vr,{value:"",conversation:t,currentModelId:h,onClick:X,modelSwitcherDenialsBySlug:k,isUpgradeUpsell:!0,icon:Gde,secondary:r.jsx(j,{id:"vm2Wqf",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(j,{id:"/d/+gD",defaultMessage:"ChatGPT Go"})},"goUpgrade")):u?fe.content.push(r.jsx(Vr,{value:"",conversation:t,currentModelId:h,onClick:ee,modelSwitcherDenialsBySlug:k,isUpgradeUpsell:!0,icon:Wde,secondary:r.jsx(j,{id:"001Ixi",defaultMessage:"Advanced AI for your work"}),isSelected:!1,children:r.jsx(j,{id:"K94mcH",defaultMessage:"ChatGPT Business"})},"teamUpgrade")):fe.content.push(r.jsx(Vr,{value:"",conversation:t,currentModelId:h,onClick:ce,modelSwitcherDenialsBySlug:k,isUpgradeUpsell:!0,icon:YC,secondary:r.jsx(j,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(j,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade")),fe.content.push(r.jsx(Vr,{value:Og.AUTO,conversation:t,currentModelId:h,modelSwitcherDenialsBySlug:k,icon:Hde,secondary:u?r.jsx(j,{id:"R8fHfF",defaultMessage:"For quick tasks & answers"}):r.jsx(j,{id:"n96qML",defaultMessage:"Great for everyday tasks"}),isSelected:!y&&!x&&b===Og.AUTO,children:r.jsx(j,{id:"U9E7Rx",defaultMessage:"ChatGPT"})},Og.AUTO)),ie.push(fe)}else{const fe={id:"modelSection",content:[]};C.categories.length&&!T&&fe.content.push(xe),(Ce=st(i))!=null&&Ce.isGo()&&fe.content.push(r.jsx(Vr,{value:"",conversation:t,currentModelId:h,onClick:ce,modelSwitcherDenialsBySlug:k,isUpgradeUpsell:!0,icon:YC,secondary:r.jsx(j,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(j,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade"));const ue=new Map,_e=[];C.categories.forEach(He=>{var et;const Qe=r.jsx(qde,{category:He,conversation:t,currentGizmoId:x,currentModelId:h,modelSwitcherDenialsBySlug:k,preferredModelId:o,testId:"model-switcher-".concat(He.defaultModel),disabledByAdmin:He.disabledByAdmin,disableSelectionHighlight:y},He.categoryId);if(He.subcategory===EP){_e.push(Qe);return}He.subcategory?(ue.has(He.subcategory)||ue.set(He.subcategory,[]),(et=ue.get(He.subcategory))==null||et.push(Qe)):fe.content.push(Qe)}),me&&_e.length&&fe.content.push(r.jsx(K.Label,{className:"mb-0",children:C.secondaryTitle},"secondary-model-picker-title")),_e.length&&fe.content.push(..._e);const Te=(ke=C.categories.some(He=>He.defaultModel==="gpt-5"))!=null?ke:!1,$e=(Le=C.categories.some(He=>He.defaultModel==="gpt-5-pro"))!=null?Le:!1;if(Te&&!$e&&!((De=st(i))!=null&&De.isPro())&&ve(i,"3309244414")){const He=r.jsx(Yde,{}),Qe=(le=C.categories.find(et=>et.defaultModel==="gpt-5-thinking"))==null?void 0:le.subcategory;Qe?(oe=ue.get(Qe))==null||oe.push(He):fe.content.push(He)}T?ue.forEach((He,Qe)=>{var vt;Qe&&fe.content.push(r.jsx(K.Separator,{},"".concat(Qe,"-divider")));const et=C.categories.find(At=>At.subcategory===Qe&&At.defaultModel===(p==null?void 0:p.id)),{fullModelLabel:Ct}=hf((vt=et==null?void 0:et.defaultModel)!=null?vt:"",C);fe.content.push(r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{"data-testid":Qe+"-submenu",trailing:r.jsx("div",{className:"truncate",children:Ct}),children:Qe}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:He})})]},Qe))}):ue.forEach((He,Qe)=>{const et=C.categories.find(Ct=>Ct.subcategory===Qe&&Ct.defaultModel===(p==null?void 0:p.id));fe.content.push(r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{"data-testid":Qe?"".concat(Qe,"-submenu"):void 0,trailing:et&&r.jsx("div",{className:"truncate",children:et.label}),children:Qe}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:He})})]},Qe))});const Ne=(Ee=C.categories.some(He=>He.defaultModel==="gpt-5-1"))!=null?Ee:!1,Ae=(be=C.categories.some(He=>He.defaultModel==="gpt-4o"||He.defaultModel==="gpt-4.1"))!=null?be:!1;s&&x&&fe.content.push(r.jsx(K.Label,{className:"flex flex-col items-start gap-1",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx(j,{id:"Y96ci5",defaultMessage:"Limited models for Custom Action GPTs"}),r.jsx(pt,{side:"right",className:"ms-1.5 cursor-pointer",delayDuration:0,label:Ne?r.jsx(j,{id:"Npo7a5",defaultMessage:"GPTs with custom web actions can currently only use GPT-5.1, GPT-4o, and GPT-4.1."}):Te&&Ae?r.jsx(j,{id:"CicYT3",defaultMessage:"GPTs with custom web actions can currently only use GPT-5, GPT-4o, and GPT-4.1."}):Te?r.jsx(j,{id:"VfAyqX",defaultMessage:"GPTs with custom web actions can currently only use GPT-5."}):r.jsx(j,{id:"wDE3HX",defaultMessage:"GPTs with custom web actions can currently only use GPT-4o and GPT-4.1. If your GPT has no custom actions it can use any model."}),children:r.jsx(ZC,{className:"h-4 w-4 shrink-0"})})]})})),ie.push(fe)}const pe={id:"otherOptionsSection",content:[]},{selectedCategory:Me}=hf(b,C);return A&&(Q||q||Y||te?pe.content.push(r.jsx("div",{className:"px-4 py-2",children:r.jsx(yP,{inputClassName:"w-full",onKeyDown:fe=>{fe.stopPropagation()},onChange:fe=>{$(fe.target.value)},value:D})})):g&&pe.content.push(r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{size:"long"}),r.jsx(K.Shimmer,{size:"long"}),r.jsx(K.Shimmer,{size:"long"}),r.jsx(K.Shimmer,{size:"long"})]})),D?pe.content.push(r.jsxs("div",{className:"scrollbar-gutter-stable max-h-64 w-[min(320px,95vw)] overflow-y-scroll",children:[Z.length===0&&r.jsx(K.Item,{className:"w-full",children:a.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),Z.map(fe=>{const{value:ue}=fe;return"options"in fe?r.jsx(_c,{conversation:t,currentModel:p,isSelected:!y&&(h==null?void 0:h.startsWith(ue)),option:fe,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},ue):r.jsxs(Vr,{conversation:t,currentModelId:h,isSelected:!y&&h===ue,value:ue,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o,children:[fe.name,fe.badge&&r.jsx(ed,{children:fe.badge})]},ue)})]})):(Q&&pe.content.push(r.jsx(_c,{isSelected:!y&&Me===Va.ALPHA,conversation:t,currentModel:p,option:I,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},I.value)),q&&pe.content.push(r.jsx(_c,{isSelected:!y&&Me===Va.DATA_CAMPAIGNS,conversation:t,currentModel:p,option:N,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},N.value)),Y&&pe.content.push(r.jsx(_c,{conversation:t,currentModel:p,isSelected:!y&&Me===Va.EXPERIMENTS,option:L,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},L.value)),te&&pe.content.push(r.jsx(_c,{isSelected:!y&&Me===Va.MAINLINE,conversation:t,currentModel:p,option:O,modelSwitcherDenialsBySlug:k,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},O.value)))),pe.content.length&&H&&ie.push(pe),n&&ie.push({id:WC,content:[r.jsx(Rde,{},WC)]}),ie}const Yde=()=>{const t=at(),e=V(),n=ve(e,"3315017149");let s=r.jsx(j,{id:"4myKt+",defaultMessage:"GPT-5 Pro"});return n&&(s=r.jsx(j,{id:"fCVj6z",defaultMessage:"Pro"})),r.jsx(K.Item,{disabled:!0,label:s,secondary:r.jsx(j,{id:"BsApen",defaultMessage:"Research-grade intelligence"}),trailing:r.jsx(ye,{color:"secondary",size:"small",onClick:()=>{B.logEventWithStatsig("Model Switcher Pro Upgrade Button Clicked","chatgpt_model_switcher_pro_upgrade_button_clicked"),B.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),pn(t,"Thread header dropdown")},children:r.jsx(j,{id:"aJndhk",defaultMessage:"Upgrade"})})})},Tx=Se({alpha:{id:"o5FsPB",defaultMessage:"Alpha"},beta:{id:"XZwFET",defaultMessage:"Beta"},gpt35ShortExplainer:{defaultMessage:"Great for everyday tasks",id:"ModelSwitcher.gpt35ShortExplainer"},modelTunerSmartSelectionTitle:{id:"czjW8I",defaultMessage:"Dynamic"},modelTunerSmartSelectionExplainer:{id:"gp/YH1",defaultMessage:"Optimized for speed and intelligence"},gpt4ShortExplainer:{defaultMessage:"With DALLE, browsing and analysis",id:"ModelSwitcher.gpt4ShortExplainer"},gpt4ShortExplainerWithoutBrowse:{defaultMessage:"With DALLE and analysis",id:"ModelSwitcher.gpt4ShortExplainerWithoutBrowse"},gpt4UpsellExplainer:{id:"ModelSwitcher.gpt4Upsell",defaultMessage:"Our smartest and most capable model. Includes DALLE, browsing and more."},userUpgrade:{id:"ModelSwithcer.upgradeButton",defaultMessage:"Upgrade to Plus"},userUpgradeSignup:{id:"ModelSwitcher.signupUpgradeButton",defaultMessage:"Sign up for ChatGPT Plus"},temporaryChat:{id:"ModelSwitcher.temporaryChat",defaultMessage:"Temporary chat"},shareChat:{id:"ModelSwitcher.shareChat",defaultMessage:"Share chat"},disabledByAdmin:{id:"XoQ6cH",defaultMessage:"Disabled by Admin"}});function Zde(t,e,n){const s=re(()=>hf(yn(t).id,ea(t)).modelLabel),o=Nb(),a=Rb(t,o,void 0,e,n);return{modelLabel:s,dropdownSections:a}}function Kde({show:t,conversation:e,gizmoHasCustomActions:n,preferredModelId:s}){const{modelLabel:o,dropdownSections:a}=Zde(e,n,s);return t?r.jsxs(K.Sub,{onOpenChange:i=>{i&&B.logEvent("GPTs: Breadcrumb Picker Model Picker Open")},children:[r.jsx(K.SubMenuTrigger,{children:r.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[r.jsx(j,{id:"ilkdMh",defaultMessage:"Model"}),r.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:o})]})}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{onClick:()=>{B.logEvent("GPTs: Breadcrumb Picker Model Picker Select")},children:r.jsx(Pb,{sections:a})})})]}):null}function KC(t,e){const o=300/t,a=35/o;let i;if(e<=a)i=o*e;else{const l=t-a,d=-4*((e-a)/l);i=35+(99.9-35)*(1-Math.exp(d))}return Math.min(i,99.9)}const Mx=(t,e)=>{const n=+new Date-t,[s,o]=_.useState(KC(e,n));return _.useEffect(()=>{const a=setInterval(()=>{const i=+new Date-t,l=KC(e,i);if(o(l),l>=100||i>=e)return clearInterval(a),o(100),100},100);return()=>{clearInterval(a)}},[t,e]),s},Qde={[co.RESEARCH]:30,[co.PRO_MODE]:15,[co.THINKING]:2,[co.IMAGE_GEN]:2,[co.UNKNOWN]:15},TP=t=>{var o,a;const e=((a=(o=t.expectedDurationMinutes)!=null?o:Qde[e8(t)])!=null?a:15)*60*1e3,n=t.createdAt?+new Date(t.createdAt):Date.now();return Mx(n,e)},Jde="";function Xde(t){var o,a;const e=e8(t),n={[co.UNKNOWN]:{inProgress:{id:"task.inProgress",defaultMessage:"In progress"},completed:{id:"task.completed",defaultMessage:"Completed"},failed:{id:"task.failed",defaultMessage:"Failed"},cancelled:{id:"task.cancelled",defaultMessage:"Cancelled"},skipped:{id:"task.skipped",defaultMessage:"Skipped"}},[co.RESEARCH]:{inProgress:{id:"task.research.inProgress",defaultMessage:"Research in progress"},completed:{id:"task.research.completed",defaultMessage:"Research completed"},failed:{id:"task.research.failed",defaultMessage:"Research failed"},cancelled:{id:"task.research.cancelled",defaultMessage:"Research cancelled"},skipped:{id:"task.research.skipped",defaultMessage:"Research skipped"}},[co.PRO_MODE]:{inProgress:{id:"task.pro.inProgress",defaultMessage:"Pro thinking in progress"},completed:{id:"task.pro.completed",defaultMessage:"Pro thinking completed"},failed:{id:"task.pro.failed",defaultMessage:"Pro thinking failed"},cancelled:{id:"task.pro.cancelled",defaultMessage:"Pro thinking cancelled"},skipped:{id:"task.pro.skipped",defaultMessage:"Pro thinking skipped"}},[co.THINKING]:{inProgress:{id:"task.thinking.inProgress",defaultMessage:"Thinking"},completed:{id:"task.thinking.completed",defaultMessage:"Thinking completed"},failed:{id:"task.thinking.failed",defaultMessage:"Thinking failed"},cancelled:{id:"task.thinking.cancelled",defaultMessage:"Thinking cancelled"},skipped:{id:"task.thinking.skipped",defaultMessage:"Thinking skipped"}},[co.IMAGE_GEN]:{inProgress:{id:"task.image.inProgress",defaultMessage:"Image creating"},completed:{id:"task.image.completed",defaultMessage:"Image created"},failed:{id:"task.image.failed",defaultMessage:"Image failed"},cancelled:{id:"task.image.cancelled",defaultMessage:"Image creation cancelled"},skipped:{id:"task.image.skipped",defaultMessage:"Image creation skipped"}}},s=(()=>{switch(t.status){case En.CREATED:case En.RUNNING:case En.UNDETERMINED:case En.FINALIZING:return"inProgress";case En.COMPLETED:return"completed";case En.FAILED:return"failed";case En.CANCELLED:return"cancelled";case En.SKIPPING:return"skipped";default:return}})();if(s)return(a=(o=n[e])==null?void 0:o[s])!=null?a:n[co.UNKNOWN][s]}const eue=({title:t,description:e,progress:n,link:s,onClick:o})=>{const a=ne(),i=r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("div",{children:t}),r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 text-xs",children:[e&&r.jsx("span",{children:e}),n!=null&&r.jsxs(r.Fragment,{children:[Jde,r.jsx("span",{children:a.formatMessage({id:"task.progressOnly",defaultMessage:"{progress}%"},{progress:Math.round(n)})})]})]})]});return s!=null?r.jsx(K.LinkItem,{to:s,children:i}):r.jsx(K.Item,{onClick:o,children:i})},tue=({task:t,conversationId:e,isActiveConversation:n})=>{const s=ne(),o=_.useMemo(()=>Xde(t),[t]),a=TP(t),i=t.status===En.COMPLETED?t.responseMessageId:t.originalConversationUserMessageId,l=n?void 0:"/c/".concat(t.originalConversationId,"?messageId=").concat(i),c=n?()=>{Ze(e,d=>{d.scrollToMessageId=i,d.scrollToMessageIsAssistant=!0}),requestAnimationFrame(()=>{Ze(e,d=>{d.scrollToMessageId=void 0,d.scrollToMessageIsAssistant=void 0})})}:void 0;return r.jsx(eue,{title:t.title,description:o?s.formatMessage(o):void 0,progress:S3(t)?a:void 0,link:l,onClick:c},t.taskId)},nue=({conversationId:t,isActiveConversation:e})=>{const n=TH(t);return r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{className:"first:hidden last:hidden"}),n.filter(s=>s.title!=null&&s.title!=="").map(s=>r.jsx(tue,{task:s,conversationId:t,isActiveConversation:e},s.taskId))]})},sue=R(()=>P(()=>Promise.resolve().then(()=>Qre),void 0),{loading:t=>F(t)}),oue=R(()=>P(()=>import("./f9q21t97dze9u4dn.js"),__vite__mapDeps([194,1])),{loading:t=>F(t)}),aue=R(()=>P(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([147,1])),{loading:t=>F(t)}),MP=R(()=>P(()=>Promise.resolve().then(()=>sm),void 0),{loading:t=>F(t)}),rue=R(()=>P(()=>import("./impv9cw906sxjwad.js"),__vite__mapDeps([195,1])),{loading:t=>F(t)}),iue=R(()=>P(()=>import("./mvsz8js05tswhzmz.js"),__vite__mapDeps([196,1])),{loading:t=>F(t)});R(()=>P(()=>import("./nfz1ta7916xrx1ej.js"),__vite__mapDeps([197,1])),{loading:t=>F(t)});R(()=>P(()=>import("./sdlnf7jr8n8l1kbs.js"),__vite__mapDeps([140,1])),{loading:t=>F(t)});const lue=R(()=>P(()=>import("./nnasou4dx8ktomqj.js"),__vite__mapDeps([198,1])),{loading:t=>F(t)}),cue=R(()=>P(()=>import("./b4g2v7ieq0wsd0hn.js"),__vite__mapDeps([199,1])),{loading:t=>F(t)}),due=R(()=>P(()=>import("./ei2rr3u86wwo8xvm.js"),__vite__mapDeps([52,1])),{loading:t=>F(t)}),uue=R(()=>P(()=>import("./d0fvtivu8wtjjx2a.js"),__vite__mapDeps([30,1])),{loading:t=>F(t)}),fue=R(()=>P(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([145,1])),{loading:t=>F(t)}),QC=R(()=>P(()=>import("./ng0udfnvcwxxjj55.js"),__vite__mapDeps([164,1])),{loading:t=>F(t)}),AP=R(()=>P(()=>import("./jp1bsz3poves5oxv.js"),__vite__mapDeps([200,1])),{loading:t=>F(t)}),mue=R(()=>P(()=>import("./cmff6ny7qwtuxu45.js"),__vite__mapDeps([201,1])),{loading:t=>F(t)}),gue=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),pue=R(()=>P(()=>import("./qrcm3utllwqs3zx5.js"),__vite__mapDeps([25,1])),{loading:t=>F(t)}),hue=R(()=>P(()=>Promise.resolve().then(()=>nm),void 0),{loading:t=>F(t)}),_ue=R(()=>P(()=>import("./ma4t382l66te02z0.js"),__vite__mapDeps([202,1])),{loading:t=>F(t)}),xue=R(()=>P(()=>import("./kux43ylsu8hzp3nl.js"),__vite__mapDeps([150,1])),{loading:t=>F(t)}),yue=R(()=>P(()=>import("./dh7mc6hgd545v1dp.js"),__vite__mapDeps([122,1])),{loading:t=>F(t)}),vue=R(()=>P(()=>Promise.resolve().then(()=>uve),void 0),{loading:t=>F(t)}),bue=R(()=>P(()=>import("./jp9nl1pjnexcya5g.js"),__vite__mapDeps([203,1,10,11]))),Cue=R(()=>P(()=>import("./ok3l8bod36eqc7xo.js"),__vite__mapDeps([204,1,10,11])).then(t=>t.GizmoKeepInSidebarMenuItem)),Sue=R(()=>P(()=>Promise.resolve().then(()=>M4),void 0).then(t=>t.DeleteConversationConfirmationModalContainer)),wue=R(()=>P(()=>import("./cslz6wf1si9tisko.js").then(t=>t.c),__vite__mapDeps([205,1,10,11])).then(t=>t.GizmoDetailsModal)),kue=R(()=>P(()=>import("./wr3xtwm0pv7va92o.js"),__vite__mapDeps([206,1,10,11])).then(t=>t.default)),Eue=R(()=>P(()=>import("./fzcv8k0772xrsq9h.js"),__vite__mapDeps([207,1,10,11])).then(t=>t.default)),Tue=R(()=>P(()=>Promise.resolve().then(()=>oPe),void 0).then(t=>t.default)),Mue=R(()=>P(()=>import("./bo8mdhc1oc1583ww.js"),__vite__mapDeps([208,1,10,11])).then(t=>t.ThreadReportConversationModal));function Aue(t){"use forget";const e=W.c(8),{children:n,conversation:s,gizmoResource:o,showReportModal:a,showGizmoModelPicker:i}=t;let l;e[0]!==s||e[1]!==o||e[2]!==i||e[3]!==a?(l=r.jsx(IP,{conversation:s,gizmoResource:o,showReportModal:a,showGizmoModelPicker:i}),e[0]=s,e[1]=o,e[2]=i,e[3]=a,e[4]=l):l=e[4];let c;return e[5]!==n||e[6]!==l?(c=r.jsx(r.Fragment,{children:r.jsx(kr,{size:"small",triggerButton:n,children:l})}),e[5]=n,e[6]=l,e[7]=c):c=e[7],c}function IP({conversation:t,gizmoResource:e,showReportModal:n,showGizmoModelPicker:s}){var k,T;const{canEdit:o}=MH(e),{canCreate:a}=AH(),{canViewConfig:i}=IH(e),l=jH(e.gizmo.id),c=Jo(),d=NH(e),u=e.gizmo.share_recipient===Qi.Marketplace||e.gizmo.share_recipient===Qi.Link,f=!d&&u,m=V(),p=ve(m,"1825130190")&&!d&&t8(e),h=(c==null?void 0:c.includes(ss.GizmoSupportEmails))&&!d&&e.gizmo.author.will_receive_support_emails&&p,x=sde(),v=re(t.serverId$),b=Cb(ss.WorkspaceShareLinks)&&v&&tt(m),C=at(),S=Sn(),E=x1();return r.jsxs(r.Fragment,{children:[r.jsx(Kde,{show:s,conversation:t,gizmoHasCustomActions:pM(e.tools),preferredModelId:(k=e.gizmo.default_model)!=null?k:void 0}),r.jsx(K.LinkItem,{onClick:()=>{B.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:e.gizmo.id})},to:"/g/".concat(e.gizmo.short_url),state:E,icon:hue,children:r.jsx(j,w({},Wn.newChat))}),r.jsx(K.Item,{onClick:()=>dt(m,wue,{gizmoId:e.gizmo.id,creatorId:e.gizmo.author.user_id}),icon:fue,children:r.jsx(j,w({},Wn.about))}),((T=e.tools)==null?void 0:T.find(M=>M.type===da.JIT_PLUGIN))&&r.jsx(K.Item,{onClick:()=>dt(m,kue,{gizmo:e}),icon:uue,children:r.jsx(j,w({},Wn.privacySettings))}),o&&r.jsx(K.Item,{onClick:()=>{C(l)},icon:rue,children:r.jsx(j,w({},Wn.customize))}),!o&&i&&r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{onClick:()=>{C("/g/".concat(e.gizmo.id,"/view"))},icon:mue,children:r.jsx(j,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),a&&r.jsx(K.Item,{onClick:async()=>{const M=await w3.copyGizmo({gizmoId:e.gizmo.id});M.gizmo.id&&C("/gpts/editor/".concat(M.gizmo.id))},icon:pue,children:r.jsx(j,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),r.jsx(Cue,{gizmoResource:e,location:"conversation_page"}),r.jsx(yde,{gizmoResource:e}),h&&r.jsx(K.Item,{onClick:()=>dt(m,Eue,{gizmo:e}),icon:yue,children:r.jsx(j,w({},Wn.feedbackEmail))}),p&&r.jsx(K.Item,{onClick:()=>dt(m,Tue,{gizmo:e}),icon:_ue,children:r.jsx(j,w({},Wn.reviewGPT))}),f&&r.jsx(K.Item,{onClick:n,icon:AP,children:r.jsx(j,w({},Wn.reportGPT))}),b&&r.jsx(K.Item,{onClick:()=>Ln.openSharingModal(v),icon:MP,children:r.jsx(j,w({},Wn.shareChat))}),x&&r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),r.jsx(K.Item,{color:"danger",onClick:()=>{dt(m,bue,{gpt:e,account:S,isOpen:!0})},icon:gue,children:r.jsx(j,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),(c==null?void 0:c.includes("debug"))&&r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),r.jsx(K.Item,{onClick:()=>{C(PH(e))},children:"(Internal) See share page"})]})]})}const Iue=({conversation:t,isActiveConversation:e,inMainScreen:n=!1,inChatWindow:s=!1,inOrla:o=!1,shouldShowAdultSearchToggle:a=!1})=>{var oe,Ee,be;const i=V(),l=em(i),c=Sn(),d=t.id,u=t.gizmo_id,f=re(()=>u?E3(i,u).gizmo$():null),m=jl(i,u),g=ve(i,"3376455464"),p=ve(i,"16480203"),h=Es(),x=ve(i,"2560369700"),v=jt(d),y=Cb(ss.WorkspaceShareLinks),b=!tt(i),C=RH(i),S="owner"in t?(oe=t.owner)==null?void 0:oe.user_id:null,E=S==null||S===(c==null?void 0:c.normalizedAccountUserId),[k,T,M,A]=Ve(d,fe=>[fe==null?void 0:fe.isStarred,fe==null?void 0:fe.continuingFromSharedProjectConversationId,Xie(fe==null?void 0:fe.mode,u!=null?u:void 0),bb(fe)]),{shouldShowProjectsChatShareModal:I,openProjectsChatShareModal:N}=tde({clientThreadId:d}),L=y&&(v!=null?v:T)&&!b&&(!m||p)&&!0,O=l.hasAccess&&!b&&y&&v!=null&&!h&&E&&u==null&&T==null&&!A&&!s,[D,$]=_.useState(!!t.is_do_not_remember),H=k!=null?k:!!t.is_starred,G=ne(),Z=f&&m?k3(f):!1;let Q=null;const{snorlaxes:q}=y3();Q=q;let Y=null;m&&Q&&(Y=(Ee=Q.find(({gizmo:fe})=>fe.gizmo.id===u))==null?void 0:Ee.gizmo);const te=gN(),{mutate:ae}=ide(),se=It(),{eligible:ce}=lt(Oe.ArchiveConversationOnboarding),X=$t(),ee=at(),ie=re(()=>Ko(i)),{isAdultSearchEnabled:de,handleToggleSetting:me}=Xj({conversationMode:M,accountId:c==null?void 0:c.id}),xe=async()=>{await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:t.id}},requestBody:{is_archived:!0}}),Xs(se,t.gizmo_id),qe.logEvent("chatgpt_conversation_archived"),B.logEvent("Conversation Archived");const fe=gi(i)&&hn();ce&&!fe&&(X.info(G.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),ot(i,Oe.ArchiveConversationOnboarding)),e&&Tr(ee)},pe=()=>{const fe=!H;ae({conversation:t,isStarred:fe}),B.logEvent(fe?"Conversation Pinned":"Conversation Unpinned")},Me=Vh(),Ce=[L&&(!s||ie)&&r.jsx(K.Item,{onClick:()=>I?N():Ln.openSharingModal(v,"History Item Menu"),icon:MP,"data-testid":"share-chat-menu-item",children:r.jsx(j,w({},Wn.shareChat))},"share"),O?r.jsx(K.Item,{onClick:()=>{if(!v||Cp==null)return;dt(i,Cp,{type:"from-conversation",serverThreadId:v})},icon:sue,children:r.jsx(j,{id:"2lQyjA",defaultMessage:"Start a group chat"})},"start-group-chat"):null,!s&&!o&&E&&r.jsx(K.Item,{disabled:!v,onClick:()=>{setTimeout(()=>{v&&_P.publish({kind:n?"editTitleInMainScreen":"editTitle",serverThreadId:v})},100)},icon:due,children:r.jsx(j,w({},Wn.renameChat))},"rename"),C&&!h&&E&&Q&&(Q==null?void 0:Q.length)>0&&K2(u,H)&&v&&!0&&r.jsxs(Yn.Fragment,{children:[m&&r.jsxs(r.Fragment,{children:[Q.length>1&&r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{icon:QC,children:r.jsx(j,w({},Kt.moveConversationToProject))}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:r.jsx(Ex,{inSidebarFlyout:!1,onUpdateConversationGizmo:fe=>te({newGizmoId:fe,conversation:t,previousGizmoId:u!=null?u:null}),currentGizmoId:u})})})]}),r.jsx(K.Item,{onClick:()=>{te({newGizmoId:null,conversation:t,previousGizmoId:u!=null?u:null})},icon:lue,children:r.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:r.jsx(j,U(w({},Kt.removeConversationFromProject),{values:{projectName:(be=Y==null?void 0:Y.gizmo.display.name)!=null?be:"project"}}))})})]}),!m&&!0&&r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{icon:QC,children:G.formatMessage(Kt.moveConversationToProject)}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:r.jsx(Ex,{inSidebarFlyout:!1,onUpdateConversationGizmo:fe=>te({newGizmoId:fe,conversation:t,previousGizmoId:u!=null?u:null})})})})]})]},"snorlax")].filter(Boolean),{automationId:ke,sourceMessageId:Le}=_.useContext(cm),De=ve(i,"3018147683"),le={topItems:Ce.length>0,odysseyItem:!!ke||!ke&&!!Le,pinItem:!u&&!h&&x,reportItem:g&&(s||Z),archiveItem:E&&!h,dnrItem:!1,deleteItem:E,toggleAdultSearchItem:a};return Object.values(le).some(Boolean)?r.jsxs(r.Fragment,{children:[le.topItems&&r.jsxs(r.Fragment,{children:[Ce,r.jsx(K.Separator,{className:"first:hidden last:hidden"})]}),a&&r.jsx(K.Item,{onClick:fe=>me(fe,!de),icon:iue,children:de?r.jsx(j,w({},Wn.hideMatureContent)):r.jsx(j,w({},Wn.showMatureContent))},"adult-search-toggle"),le.odysseyItem&&r.jsx(Mb,{children:({openScheduleModal:fe,isScheduled:ue,isSchedulable:_e})=>(_e||ue)&&r.jsx(K.Item,{onClick:fe,disabled:!v,icon:xue,children:r.jsx(j,w({},ue?Wn.editSchedule:Wn.scheduleTask))})}),le.pinItem&&r.jsx(K.Item,{disabled:!v,onClick:pe,icon:H?oue:cue,iconAriaLabel:G.formatMessage(H?Wn.unpinChat:Wn.pinChat),children:r.jsx(j,w({},H?Wn.unpinChat:Wn.pinChat))}),le.archiveItem&&r.jsx(K.Item,{disabled:!v,onClick:()=>{v&&xe()},icon:vue,children:r.jsx(j,w({},Wn.archiveChat))}),!1,le.reportItem&&r.jsx(K.Item,{icon:AP,onClick:()=>dt(i,Mue,U(w({clientThreadId:d,isSharedConversation:Me},Z&&{projectId:u,conversationOwnerId:S}),{isStaticSharedThread:!1})),children:u?r.jsx(j,{id:"thread.reportConversation",defaultMessage:"Report conversation"}):r.jsx(j,{id:"thread.report",defaultMessage:"Report"})}),le.deleteItem&&r.jsx(K.Item,{color:"danger",disabled:!v,onClick:()=>{v&&dt(i,Sue,{conversationTitle:t.title,serverThreadId:v,isActiveConversation:e,gizmoId:u})},icon:aue,"data-testid":"delete-chat-menu-item",children:r.jsx(j,w({},Wn.deleteChat))}),De&&r.jsx(nue,{conversationId:t.id,isActiveConversation:e})]}):null};function jue({clientThreadId:t,gizmoId:e,conversationTitle:n,conversationAsyncStatus:s,isDoNotRemember:o,isStarred:a,owner:i=null}){return{id:t,title:n!=null?n:"",create_time:null,update_time:null,owner:i,conversation_template_id:null,async_status:s!=null?s:null,gizmo_id:e!=null?e:null,snippet:null,is_do_not_remember:o,is_starred:a}}const Nue=d=>{var u=d,{conversation:t,children:e,isActiveConversation:n,onOpenChange:s,inMainScreen:o=!1,inChatWindow:a=!1,inOrla:i=!1,shouldShowAdultSearchToggle:l=!1}=u,c=we(u,["conversation","children","isActiveConversation","onOpenChange","inMainScreen","inChatWindow","inOrla","shouldShowAdultSearchToggle"]);const[f,m]=_.useState(!1),g=Iue({conversation:t,inMainScreen:o,isActiveConversation:n,inChatWindow:a,inOrla:i,shouldShowAdultSearchToggle:l});return r.jsx(kr,U(w({},c),{open:f,onOpenChange:p=>{m(p),s==null||s(p)},side:"bottom",contentAlign:a?"end":"start",alignOffset:a?0:-8,sideOffset:a?0:-4,triggerButton:g?e:void 0,size:"auto",children:f&&r.jsx(r.Fragment,{children:g})}))},Wn=Se({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},reportGPT:{defaultMessage:"Report GPT",id:"GizmoInformation.reportGPT"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},scheduleTask:{id:"7e1pG9",defaultMessage:"Schedule"},editSchedule:{id:"qzM4nO",defaultMessage:"Edit schedule"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"},pinChat:{defaultMessage:"Pin chat",id:"GizmoInformation.pinChat"},unpinChat:{defaultMessage:"Unpin chat",id:"GizmoInformation.unpinChat"},showMatureContent:{defaultMessage:"Show mature content",id:"GizmoInformation.showMatureContent"},hideMatureContent:{defaultMessage:"Hide mature content",id:"GizmoInformation.hideMatureContent"}}),Pue=Object.freeze(Object.defineProperty({__proto__:null,GizmoConversationOptionsDropdown:Nue,GizmoInformationDropdown:Aue,GizmoInformationDropdownItems:IP,buildConversationResponse:jue},Symbol.toStringTag,{value:"Module"}));function jP(t,e,{location:n}){if(B.logNewChatButtonClicked({location:n}),"button"in e&&(e.metaKey||e.ctrlKey)){B.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab");return}qe.logEvent("chatgpt_web_thread_tap_new_thread"),tt(t)?gK():_t.getItem(Ue.HasSeenNewChatModal)!==!0&&(_t.setItem(Ue.HasSeenNewChatModal,!0),Ln.openModal(Qu.NoAuthNewChat),e.preventDefault())}const Rue=R(()=>P(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([149,1])),{loading:t=>F(t)});function NP(t){return r.jsx(Xf,U(w({},t),{icon:Rue}))}function PP(){const t=V(),{data:e}=El();return tt(t)&&!!e&&!xh(e)}const au={enableProfileUpgradePill:!1,enableUpgradeMenuSparkleIcon:!1,enableTinybarUpgradeBtn:!1,enableThreadHeaderUpgradePill:!0};function Lue(){const t=V();if(!PP())return au;const n=ze(t,"772164167");return{enableProfileUpgradePill:n.get("enable_profile_upgrade_pill",au.enableProfileUpgradePill),enableUpgradeMenuSparkleIcon:n.get("enable_upgrade_menu_sparkle_icon",au.enableUpgradeMenuSparkleIcon),enableTinybarUpgradeBtn:n.get("enable_tinybar_upgrade_btn",au.enableTinybarUpgradeBtn),enableThreadHeaderUpgradePill:n.get("enable_thread_header_upgrade_pill",au.enableThreadHeaderUpgradePill)}}function tYe(t){"use forget";var p,h;const e=W.c(14),{currentAccount:n}=t,s=V(),o=n==null?void 0:n.normalizedAccountUserId,a=xb(o!=null?o:"");if(!o)return null;const i=(h=(p=a==null?void 0:a.name)!=null?p:n==null?void 0:n.name)!=null?h:"",l=(a==null?void 0:a.username)!=null&&a.username.length>0?"@".concat(a.username):void 0;let c;e[0]!==a?(c=a!=null?{name:a.name,picture:a.avatarUrl}:void 0,e[0]=a,e[1]=c):c=e[1];const d=c;let u;e[2]!==d?(u=r.jsx(T3,{size:"small",user:d}),e[2]=d,e[3]=u):u=e[3];let f;e[4]!==o||e[5]!==s?(f=()=>{dt(s,zre,{accountUserId:o})},e[4]=o,e[5]=s,e[6]=f):f=e[6];let m;e[7]!==i?(m=i||r.jsx(j,{id:"TNVQQS",defaultMessage:"Edit profile"}),e[7]=i,e[8]=m):m=e[8];let g;return e[9]!==u||e[10]!==f||e[11]!==m||e[12]!==l?(g=r.jsx(K.Item,{"data-testid":"calpico-edit-profile-menu-item",icon:u,secondary:l,onSelect:f,children:m}),e[9]=u,e[10]=f,e[11]=m,e[12]=l,e[13]=g):g=e[13],g}const Oue=R(()=>P(()=>import("./i7db5j2hu236rd0x.js"),__vite__mapDeps([209,1])),{loading:t=>F(t)});function nYe(){const t=V(),e=ve(t,"3375735072"),n=at();return e?r.jsx(K.Item,{onSelect:()=>{n("#settings/".concat(Pn.Orders),{replace:!1})},icon:Oue,children:r.jsx(j,{id:"rcTyEn",defaultMessage:"Orders"})}):null}const w1=Be(!1),sYe=()=>{"use forget";const t=W.c(14),e=V();let n;t[0]!==e?(n=kh(e),t[0]=e,t[1]=n):n=t[1];const{actions$:s,addAction:o}=n,a=re(w1),i=re(s);let l;t[2]!==i?(l=Fue(i),t[2]=i,t[3]=l):l=t[3];const c=l;let d,u;if(t[4]!==o?(d=()=>o({key:"toggleKeyboardActions",action:Vue,actionMessageDescriptor:Ge({id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}),group:Dn.Settings,keyboardBinding:[We.Mod,"/"]}),u=[o],t[4]=o,t[5]=d,t[6]=u):(d=t[5],u=t[6]),_.useEffect(d,u),c.length===0)return null;let f;t[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(Ns.Overlay,{}),t[7]=f):f=t[7];let m;t[8]!==c||t[9]!==a?(m=r.jsxs(Ml,{children:[f,r.jsx(yd,{asChild:!0,children:r.jsx(Bue,{groups:c,showAsModal:a,onClose:Gue})})]}),t[8]=c,t[9]=a,t[10]=m):m=t[10];let g;return t[11]!==a||t[12]!==m?(g=r.jsx(Tl,{open:a,onOpenChange:Hue,modal:a,children:m}),t[11]=a,t[12]=m,t[13]=g):g=t[13],g};function Due(t){return t.toReversed?t.toReversed():t.slice().reverse()}function Fue(t){const e=Object.entries(Td(LH(n8(t,n=>n.key),n=>Due(n.keyboardBinding).join("")),n=>n.group));return e.sort(([n],[s])=>Object.keys(Dn).indexOf(n)-Object.keys(Dn).indexOf(s)),e}const Bue=t=>{"use forget";const e=W.c(16),{groups:n,showAsModal:s,onClose:o}=t,a=!s&&"transition-opacity starting:opacity-0";let i;e[0]!==a?(i=z("shadow-long fixed start-3 bottom-3 min-w-(--sidebar-width) px-1.5 text-sm",a),e[0]=a,e[1]=i):i=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("h2",{className:"text-sm",children:r.jsx(j,{id:"hotkeyModal.title",defaultMessage:"Keyboard shortcuts"})}),e[2]=l):l=e[2];let c;e[3]!==o||e[4]!==s?(c=s&&r.jsx(vd,{asChild:!0,children:r.jsx(xn,{onClick:o})}),e[3]=o,e[4]=s,e[5]=c):c=e[5];let d;e[6]!==c?(d=r.jsxs("div",{className:"ms-2.5 mb-3 flex h-9 items-center justify-between font-semibold",children:[l,c]}),e[6]=c,e[7]=d):d=e[7];let u;e[8]!==n?(u=n.map(zue),e[8]=n,e[9]=u):u=e[9];let f;e[10]!==u?(f=r.jsx("dl",{className:"grid [grid-template-columns:minmax(0,1fr)_max-content] gap-x-6 gap-y-3 px-2.5 pb-2",children:u}),e[10]=u,e[11]=f):f=e[11];let m;return e[12]!==i||e[13]!==d||e[14]!==f?(m=r.jsxs(s8,{className:i,children:[d,f]}),e[12]=i,e[13]=d,e[14]=f,e[15]=m):m=e[15],m};function Uue(t){switch(t){case Dn.Core:return null;case Dn.Chat:return r.jsx(j,{id:"keyboardActionGroup.label.Chat",defaultMessage:"Chat"});case Dn.Settings:return r.jsx(j,{id:"keyboardActionGroup.label.Settings",defaultMessage:"Settings"});case Dn.Internal:return"Internal"}}function $ue(t){return!t}function Vue(){w1.set($ue)}function Hue(t){t||w1.set(!1)}function Gue(){return w1.set(!1)}function Wue(t){return r.jsxs(_.Fragment,{children:[r.jsx("dt",{children:typeof t.actionMessageDescriptor=="string"?t.actionMessageDescriptor:r.jsx(j,w({},t.actionMessageDescriptor))}),r.jsx("dd",{className:"text-token-text-secondary justify-self-end",children:r.jsx(r1,{binding:t.keyboardBinding})})]},t.key)}function zue(t){const[e,n]=t;return r.jsxs(_.Fragment,{children:[r.jsx("dt",{className:"text-token-text-tertiary col-span-2 mt-2 empty:hidden",children:Uue(e)}),n.map(Wue)]},e)}function oYe(t){var s;const{data:e,isLoading:n}=ose(t);return{count:(s=e==null?void 0:e.total)!=null?s:0,isLoading:n}}var Q9;ft.ol(Q9||(Q9=ct(["ms-5 list-decimal"])));var J9;const que=ft.ul(J9||(J9=ct(["ms-3 list-disc"])));var X9;const Yue=ft.li(X9||(X9=ct(["marker:text-token-text-tertiary text-token-text-primary mb-2"])));var Lb="Radio",[Zue,RP]=kl(Lb),[Kue,Que]=Zue(Lb),LP=_.forwardRef((t,e)=>{const x=t,{__scopeRadio:n,name:s,checked:o=!1,required:a,disabled:i,value:l="on",onCheck:c,form:d}=x,u=we(x,["__scopeRadio","name","checked","required","disabled","value","onCheck","form"]),[f,m]=_.useState(null),g=On(e,v=>m(v)),p=_.useRef(!1),h=f?d||!!f.closest("form"):!0;return r.jsxs(Kue,{scope:n,checked:o,disabled:i,children:[r.jsx(un.button,U(w({type:"button",role:"radio","aria-checked":o,"data-state":FP(o),"data-disabled":i?"":void 0,disabled:i,value:l},u),{ref:g,onClick:Rt(t.onClick,v=>{o||c==null||c(),h&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})),h&&r.jsx(Jue,{control:f,bubbles:!p.current,name:s,value:l,checked:o,required:a,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});LP.displayName=Lb;var OP="RadioIndicator",DP=_.forwardRef((t,e)=>{const i=t,{__scopeRadio:n,forceMount:s}=i,o=we(i,["__scopeRadio","forceMount"]),a=Que(OP,n);return r.jsx(gh,{present:s||a.checked,children:r.jsx(un.span,U(w({"data-state":FP(a.checked),"data-disabled":a.disabled?"":void 0},o),{ref:e}))})});DP.displayName=OP;var Jue=t=>{const c=t,{control:e,checked:n,bubbles:s=!0}=c,o=we(c,["control","checked","bubbles"]),a=_.useRef(null),i=M3(n),l=o8(e);return _.useEffect(()=>{const d=a.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==n&&m){const g=new Event("click",{bubbles:s});m.call(d,n),d.dispatchEvent(g)}},[i,n,s]),r.jsx("input",U(w({type:"radio","aria-hidden":!0,defaultChecked:n},o),{tabIndex:-1,ref:a,style:U(w(w({},t.style),l),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function FP(t){return t?"checked":"unchecked"}var Xue=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ob="RadioGroup",[efe]=kl(Ob,[ph,RP]),BP=ph(),UP=RP(),[tfe,nfe]=efe(Ob),$P=_.forwardRef((t,e)=>{const v=t,{__scopeRadioGroup:n,name:s,defaultValue:o,value:a,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:f}=v,m=we(v,["__scopeRadioGroup","name","defaultValue","value","required","disabled","orientation","dir","loop","onValueChange"]),g=BP(n),p=hh(d),[h,x]=hr({prop:a,defaultProp:o,onChange:f});return r.jsx(tfe,{scope:n,name:s,required:i,disabled:l,value:h,onValueChange:x,children:r.jsx(pT,U(w({asChild:!0},g),{orientation:c,dir:p,loop:u,children:r.jsx(un.div,U(w({role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:p},m),{ref:e}))}))})});$P.displayName=Ob;var VP="RadioGroupItem",HP=_.forwardRef((t,e)=>{const g=t,{__scopeRadioGroup:n,disabled:s}=g,o=we(g,["__scopeRadioGroup","disabled"]),a=nfe(VP,n),i=a.disabled||s,l=BP(n),c=UP(n),d=_.useRef(null),u=On(e,d),f=a.value===o.value,m=_.useRef(!1);return _.useEffect(()=>{const p=x=>{Xue.includes(x.key)&&(m.current=!0)},h=()=>m.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",h)}},[]),r.jsx(gT,U(w({asChild:!0},l),{focusable:!i,active:f,children:r.jsx(LP,U(w(w({disabled:i,required:a.required,checked:f},c),o),{name:a.name,ref:u,onCheck:()=>a.onValueChange(o.value),onKeyDown:Rt(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Rt(o.onFocus,()=>{var p;m.current&&((p=d.current)==null||p.click())})}))}))});HP.displayName=VP;var sfe="RadioGroupIndicator",GP=_.forwardRef((t,e)=>{const a=t,{__scopeRadioGroup:n}=a,s=we(a,["__scopeRadioGroup"]),o=UP(n);return r.jsx(DP,U(w(w({},o),s),{ref:e}))});GP.displayName=sfe;var ofe=$P,Db=HP,Fb=GP,a0,JC;function afe(){if(JC)return a0;JC=1;function t(e,n,s){return e===e&&(s!==void 0&&(e=e<=s?e:s),n!==void 0&&(e=e>=n?e:n)),e}return a0=t,a0}var r0,XC;function rfe(){if(XC)return r0;XC=1;var t=afe(),e=OH();function n(s,o,a){return a===void 0&&(a=o,o=void 0),a!==void 0&&(a=e(a),a=a===a?a:0),o!==void 0&&(o=e(o),o=o===o?o:0),t(e(s),o,a)}return r0=n,r0}var ife=rfe();const Bb=Zn(ife);var Ax=(t=>(t.Month="month",t.Year="year",t.Once="once",t))(Ax||{}),lfe=(t=>(t.Inclusive="inclusive",t.Exclusive="exclusive",t))(lfe||{});function aYe(t,e,n,s,o){return{product:t,currency:e,recurringInterval:n,amount:Number(s),amountTaxBehavior:o}}const cfe="/checkout_pricing_config/countries",dfe="/checkout_pricing_config/configs/{country_code}",rYe="go",iYe="plus",lYe="pro",eS="business",WP=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","ID","IE","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE","CH","GB","IN","PK","TH","MY","VN","PH","NG","ZA","KZ","TZ","EG","BR"];function ufe(t){return WP.includes(t)}const zP={AT:20,BE:21,BG:20,HR:25,CY:19,CZ:21,DK:25,EE:24,FI:25.5,FR:20,DE:19,GR:24,HU:27,IS:24,ID:11,IE:23,IT:22,LV:21,LI:8.1,LT:21,LU:17,MT:18,NL:21,NO:25,PL:23,PT:23,RO:21,SK:23,SI:22,ES:21,SE:25,CH:8.1,GB:20,IN:18,PK:0,TH:7,MY:8,VN:10,PH:12,NG:8,ZA:15,KZ:12,TZ:18,EG:14,BR:0};function ffe({amount:t,roundToPrecision:e=2}){const n=Math.pow(10,e);return Math.round(t*n)/n}function mfe({amount:t,taxPercent:e,inclusive:n,roundToPrecision:s=2}){const o=e*t/((n?e:0)+100),a=Math.pow(10,s);return Math.round(o*a)/a}function cYe(t,e){return e==null?(Fe.addError(new Error("nullish_country_for_vat_calculation"),{country:e}),0):ufe(e)?mfe({amount:t,taxPercent:zP[e],inclusive:!0}):(Fe.addError(new Error("unrecognized_country_for_vat_calculation"),{country:e}),0)}function dYe(t,e){let n=null,s=null;return t===e.countryCode?(n=e.currencyConfig.tax_percent,s=e.currencyConfig.tax_type):WP.includes(t)&&(n=zP[t],s=t===ise?"gst":"vat"),n==null||s==null?null:{taxCountry:t,taxRatePercent:n,taxName:s,reverseChargeEligible:!0}}const uYe={at_vat:{type:"at_vat",country:"AT",region:"EEA-GB-CH",country_label:"Austria",format:"ATU[0-9]{8}",placeholder:"ATU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},be_vat:{type:"be_vat",country:"BE",region:"EEA-GB-CH",country_label:"Belgium",format:"BE(0|1)[0-9]{9}",placeholder:"BE0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},bg_vat:{type:"bg_vat",country:"BG",region:"EEA-GB-CH",country_label:"Bulgaria",format:"BG[0-9]{9,10}",placeholder:"BG0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},br_cnpj:{type:"br_cnpj",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})[\\/\\\\]?([0-9]{4})\\-?([0-9]{2})",placeholder:"01.234.456/5432-10",stripe_type:"br_cnpj",verifiable:!1,replacement_string:"\\1.\\2.\\3/\\4-\\5",description:"Brazilian CNPJ number",reverse_charge:!1,supported:!0},br_cpf:{type:"br_cpf",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{3})\\.?([0-9]{3})\\.?([0-9]{3})\\-?([0-9]{2})",placeholder:"123.456.789-87",stripe_type:"br_cpf",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Brazilian CPF number",reverse_charge:!1,supported:!0},cy_vat:{type:"cy_vat",country:"CY",region:"EEA-GB-CH",country_label:"Cyprus",format:"CY[0-9]{8}[A-Z]",placeholder:"CY12345678Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},cz_vat:{type:"cz_vat",country:"CZ",region:"EEA-GB-CH",country_label:"Czech Republic",format:"CZ[0-9]{8,10}",placeholder:"CZ1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},de_vat:{type:"de_vat",country:"DE",region:"EEA-GB-CH",country_label:"Germany",format:"DE[0-9]{9}",placeholder:"DE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},dk_vat:{type:"dk_vat",country:"DK",region:"EEA-GB-CH",country_label:"Denmark",format:"DK[0-9]{8}",placeholder:"DK12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ee_vat:{type:"ee_vat",country:"EE",region:"EEA-GB-CH",country_label:"Estonia",format:"EE[0-9]{9}",placeholder:"EE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},es_vat:{type:"es_vat",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"ES([A-Z][0-9]{8}|[0-9]{8}[A-Z]|[A-Z][0-9]{7}[A-Z])",placeholder:"ESA1234567Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fi_vat:{type:"fi_vat",country:"FI",region:"EEA-GB-CH",country_label:"Finland",format:"FI[0-9]{8}",placeholder:"FI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fr_vat:{type:"fr_vat",country:"FR",region:"EEA-GB-CH",country_label:"France",format:"FR[A-Z0-9]{2}[0-9]{9}",placeholder:"FRAB123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},gr_vat:{type:"gr_vat",country:"GR",region:"EEA-GB-CH",country_label:"Greece",format:"EL[0-9]{9}",placeholder:"EL123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hr_vat:{type:"hr_vat",country:"HR",region:"EEA-GB-CH",country_label:"Croatia",format:"HR[0-9]{11}",placeholder:"HR12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hu_vat:{type:"hu_vat",country:"HU",region:"EEA-GB-CH",country_label:"Hungary",format:"(HU)?[0-9]{8}((-)?[0-9]{1}(-)?[0-9]{2})?",placeholder:"HU12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ie_vat:{type:"ie_vat",country:"IE",region:"EEA-GB-CH",country_label:"Ireland",format:"IE([0-9]{7}[A-Z]{1,2}|[0-9][A-Z][0-9]{5}[A-Z])",placeholder:"IE1234567AB",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},it_vat:{type:"it_vat",country:"IT",region:"EEA-GB-CH",country_label:"Italy",format:"IT[0-9]{11}",placeholder:"IT12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lt_vat:{type:"lt_vat",country:"LT",region:"EEA-GB-CH",country_label:"Lithuania",format:"LT([0-9]{9}|[0-9]{12})",placeholder:"LT123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lu_vat:{type:"lu_vat",country:"LU",region:"EEA-GB-CH",country_label:"Luxembourg",format:"LU[0-9]{8}",placeholder:"LU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lv_vat:{type:"lv_vat",country:"LV",region:"EEA-GB-CH",country_label:"Latvia",format:"LV[0-9]{11}",placeholder:"LV12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},mt_vat:{type:"mt_vat",country:"MT",region:"EEA-GB-CH",country_label:"Malta",format:"MT[0-9]{8}",placeholder:"MT12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},nl_vat:{type:"nl_vat",country:"NL",region:"EEA-GB-CH",country_label:"Netherlands",format:"NL[0-9]{9}B[0-9]{2}",placeholder:"NL123456789B12",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pl_vat:{type:"pl_vat",country:"PL",region:"EEA-GB-CH",country_label:"Poland",format:"PL[0-9]{10}",placeholder:"PL1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pt_vat:{type:"pt_vat",country:"PT",region:"EEA-GB-CH",country_label:"Portugal",format:"PT[0-9]{9}",placeholder:"PT123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ro_vat:{type:"ro_vat",country:"RO",region:"EEA-GB-CH",country_label:"Romania",format:"RO[0-9]{2,10}",placeholder:"RO1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},se_vat:{type:"se_vat",country:"SE",region:"EEA-GB-CH",country_label:"Sweden",format:"SE[0-9]{12}",placeholder:"SE123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},si_vat:{type:"si_vat",country:"SI",region:"EEA-GB-CH",country_label:"Slovenia",format:"SI[0-9]{8}",placeholder:"SI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},sk_vat:{type:"sk_vat",country:"SK",region:"EEA-GB-CH",country_label:"Slovakia",format:"SK[0-9]{10}",placeholder:"SK1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},xi_vat:{type:"xi_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"(XI)([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"XI123456789",stripe_type:"eu_vat",verifiable:!0,description:"Northern Ireland VAT number",reverse_charge:!0,supported:!0},gb_vat:{type:"gb_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"GB([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"GB123456789",stripe_type:"gb_vat",verifiable:!0,description:"United Kingdom VAT number",reverse_charge:!0,supported:!0},nz_gst:{type:"nz_gst",country:"NZ",region:"NZ",country_label:"New Zealand",format:"[0-9]{8,9}",placeholder:"123456789",stripe_type:"nz_gst",description:"New Zealand GST number",reverse_charge:!0,supported:!0,verifiable:!1},au_abn:{type:"au_abn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{11}",placeholder:"12345678912",stripe_type:"au_abn",verifiable:!0,description:"Australian Business Number (AU ABN)",reverse_charge:!0,supported:!0},au_arn:{type:"au_arn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{12}",placeholder:"123456789123",stripe_type:"au_arn",verifiable:!1,description:"Australian Taxation Office Reference Number",reverse_charge:!0,supported:!0},in_gst:{type:"in_gst",country:"IN",region:"IN",country_label:"India",format:"[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z][1-9A-Z]Z[0-9A-Z]",placeholder:"12ABCDE3456FGZH",stripe_type:"in_gst",description:"Indian GST number",reverse_charge:!0,supported:!0,verifiable:!1},no_vat:{type:"no_vat",country:"NO",region:"EEA-GB-CH",country_label:"Norway",format:"[0-9]{9}MVA",placeholder:"123456789MVA",stripe_type:"no_vat",verifiable:!1,description:"Norwegian VAT number",reverse_charge:!0,supported:!0},za_vat:{type:"za_vat",country:"ZA",region:"ZA",country_label:"South Africa",format:"4[0-9]{9}",placeholder:"4123456789",stripe_type:"za_vat",verifiable:!1,description:"South African VAT number",reverse_charge:!1,supported:!0},ch_vat:{type:"ch_vat",country:"CH",region:"EEA-GB-CH",country_label:"Switzerland",placeholder:"CHE-123.456.789 MWST",format:"([Cc][Hh][Ee])[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3}) ?([Mm][Ww][Ss][Tt]|[Tt][Vv][Aa]|[Ii][Vv][Aa])",stripe_type:"ch_vat",verifiable:!1,replacement_string:"\\1-\\2.\\3.\\4 \\5",description:"Switzerland VAT number",reverse_charge:!0,supported:!0},mx_rfc:{type:"mx_rfc",country:"MX",region:"MX",country_label:"Mexico",format:"([A-Za-z&]{3,4})-?([0-9]{2})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])-?([A-Za-z0-9])-?([A-Za-z0-9][0-9A])",placeholder:"ABC010203AB9",stripe_type:"mx_rfc",verifiable:!1,replacement_string:"\\1\\2\\3\\4\\5\\6",description:"Mexican RFC number",reverse_charge:!0,supported:!0},sg_uen:{type:"sg_uen",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z])",placeholder:"123456789F",stripe_type:"sg_uen",verifiable:!1,description:"Singaporean UEN",reverse_charge:!0,supported:!0},ru_inn:{type:"ru_inn",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{10}",placeholder:"1234567891",stripe_type:"ru_inn",verifiable:!1,description:"Russian INN",reverse_charge:!0,supported:!1},ru_kpp:{type:"ru_kpp",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ru_kpp",verifiable:!1,description:"Russian KPP",reverse_charge:!0,supported:!1},ca_bn:{type:"ca_bn",country:"CA",region:"CA",country_label:"Canada",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ca_bn",verifiable:!1,description:"Canadian BN",reverse_charge:!1,supported:!0},hk_br:{type:"hk_br",country:"HK",region:"HK",country_label:"Hong Kong",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"hk_br",description:"Hong Kong BR number",reverse_charge:!1,supported:!1,verifiable:!1},es_cif:{type:"es_cif",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"[0-9A-Z][0-9]{7}[0-9A-Z]",placeholder:"A12345678",stripe_type:"es_cif",description:"Spanish CIF number",reverse_charge:!0,supported:!0,verifiable:!1},tw_vat:{type:"tw_vat",country:"TW",region:"TW",country_label:"Taiwan",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"tw_vat",description:"Taiwanese VAT",reverse_charge:!0,supported:!0,verifiable:!1},th_vat:{type:"th_vat",country:"TH",region:"TH",country_label:"Thailand",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"th_vat",description:"Thai VAT",reverse_charge:!0,supported:!0,verifiable:!1},jp_cn:{type:"jp_cn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"jp_cn",description:"Japanese Corporate Number",reverse_charge:!0,supported:!0,verifiable:!1},jp_rn:{type:"jp_rn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{5}",placeholder:"12345",stripe_type:"jp_rn",description:"Japanese Registered Foreign Businesses Number",reverse_charge:!0,supported:!0,verifiable:!1},li_uid:{type:"li_uid",country:"LI",region:"EEA-GB-CH",country_label:"Liechtenstein",format:"CHE[0-9]{9}",placeholder:"CHE123456789",stripe_type:"li_uid",description:"Liechtensteinian UID number",reverse_charge:!0,supported:!0,verifiable:!1},my_itn:{type:"my_itn",country:"MY",region:"MY",country_label:"Malaysia",format:"([A-Z]{1,2}) ?([0-9]{10})",placeholder:"C 1234567890",stripe_type:"my_itn",description:"Malaysian ITN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1 \\2"},us_ein:{type:"us_ein",country:"US",region:"US",country_label:"United States",format:"([0-9]{2})-?([0-9]{7})",placeholder:"12-3456789",stripe_type:"us_ein",verifiable:!1,replacement_string:"\\1-\\2",description:"United States EIN",reverse_charge:!1,supported:!1},kr_brn:{type:"kr_brn",country:"KR",region:"KR",country_label:"South Korea",format:"([0-9]{3})-?([0-9]{2})-?([0-9]{5})",placeholder:"123-45-67890",stripe_type:"kr_brn",description:"Korean BRN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1-\\2-\\3"},ca_qst:{type:"ca_qst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{10}TQ[0-9]{4}|[0-9]{9}[A-Z]{2}[0-9]{4}|[0-9]{9,10}|NR[0-9]{8})",placeholder:"1234567890TQ1234",stripe_type:"ca_qst",verifiable:!1,description:"Canadian QST number (Qubec)",reverse_charge:!1,supported:!0},ca_gst_hst:{type:"ca_gst_hst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{9}) ?RT ?([0-9]{4})",placeholder:"123456789RT0002",stripe_type:"ca_gst_hst",verifiable:!1,replacement_string:"\\1RT\\2",description:"Canadian GST/HST number",reverse_charge:!1,supported:!0},ca_pst_bc:{type:"ca_pst_bc",country:"CA",region:"CA",country_label:"Canada",format:"PST-?([0-9]{4})-?([0-9]{4})",placeholder:"PST-1234-5678",stripe_type:"ca_pst_bc",verifiable:!1,replacement_string:"PST-\\1-\\2",description:"Canadian PST number (British Columbia)",reverse_charge:!1,supported:!0},ca_pst_mb:{type:"ca_pst_mb",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{6})-?([0-9])",placeholder:"123456-7",stripe_type:"ca_pst_mb",verifiable:!1,replacement_string:"\\1-\\2",description:"Canadian PST number (Manitoba)",reverse_charge:!1,supported:!0},ca_pst_sk:{type:"ca_pst_sk",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{7})",placeholder:"1234567",stripe_type:"ca_pst_sk",verifiable:!1,description:"Canadian PST number (Saskatchewan)",reverse_charge:!1,supported:!0},my_sst:{type:"my_sst",country:"MY",region:"MY",country_label:"Malaysia",format:"(([A-Z][0-9]{2})-?([0-9]{4})-?([0-9]{8})|[0-9]{8})",placeholder:"A12-3456-78912345",stripe_type:"my_sst",description:"Malaysian SST number",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\2-\\3-\\4",only_replace_if_group_captured:2},sg_gst:{type:"sg_gst",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z]|M[0-9A-Z][0-9]{7}[0-9A-Z]|F[0-9]{8}[A-Z])",placeholder:"M12345678X",stripe_type:"sg_gst",description:"Singaporean GST",reverse_charge:!0,supported:!0,verifiable:!1},ae_trn:{type:"ae_trn",country:"AE",region:"AE",country_label:"United Arab Emirates",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"ae_trn",verifiable:!1,description:"United Arab Emirates TRN",reverse_charge:!0,supported:!0},cl_tin:{type:"cl_tin",country:"CL",region:"CL",country_label:"Chile",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})-?([K0-9])",placeholder:"12.345.678-K",stripe_type:"cl_tin",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Chilean TIN",reverse_charge:!0,supported:!1},sa_vat:{type:"sa_vat",country:"SA",region:"SA",country_label:"Saudi Arabia",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"sa_vat",description:"Saudi Arabia VAT",reverse_charge:!0,supported:!0,verifiable:!1},id_npwp:{type:"id_npwp",country:"ID",region:"ID",country_label:"Indonesia",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})\\.?([0-9])-?([0-9]{3})\\.?([0-9]{3})",placeholder:"12.345.678.9-012.345",verifiable:!1,stripe_type:"id_npwp",description:"Indonesian NPWP number",reverse_charge:!0,supported:!0,replacement_string:"\\1.\\2.\\3.\\4-\\5.\\6"},my_frp:{type:"my_frp",country:"MY",region:"MY",country_label:"Malaysia",format:"[0-9]{8}",placeholder:"12345678",verifiable:!1,stripe_type:"my_frp",description:"Malaysian FRP number",reverse_charge:!0,supported:!0},il_vat:{type:"il_vat",country:"IL",region:"IL",country_label:"Israel",format:"[0-9]{9}",placeholder:"000012345",verifiable:!1,stripe_type:"il_vat",description:"Israel VAT",reverse_charge:!0,supported:!0},ge_vat:{type:"ge_vat",country:"GE",region:"GE",country_label:"Georgia",format:"([0-9]{9}|[0-9]{11})",placeholder:"123456789",verifiable:!1,stripe_type:"ge_vat",description:"Georgian VAT",reverse_charge:!0,supported:!0},ua_vat:{type:"ua_vat",country:"UA",region:"UA",country_label:"Ukraine",format:"([0-9]{8,10}|[0-9]{12})",placeholder:"123456789",verifiable:!1,stripe_type:"ua_vat",description:"Ukrainian VAT",reverse_charge:!0,supported:!1},is_vat:{type:"is_vat",country:"IS",region:"EEA-GB-CH",country_label:"Iceland",format:"[0-9]{6}",placeholder:"123456",verifiable:!1,stripe_type:"is_vat",description:"Icelandic VAT",reverse_charge:!0,supported:!0},tr_tin:{country:"TR",region:"TR",format:"[0-9]{10,11}",placeholder:"0123456789",verifiable:!1,type:"tr_tin",stripe_type:"tr_tin",description:"Turkish Tax Identification Number",country_label:"Trkiye",reverse_charge:!0,supported:!0}};function Ix(t){return t.trim().toUpperCase()}function gfe(t,e){return e||(e=_s()),ze(e,"3768341700").get(t,!1)}async function pfe(){return(await(await ge.safeGet(cfe,{skipJsonTransform:!0,authOption:sn.SendIfAvailable})).json()).countries.map(Ix)}async function rc(t){const e=Ix(t);if(!e){const o=new Error("Country code is required to fetch checkout pricing config");throw Fe.addError(o,{countryCode:t}),o}const n=await ge.safeGet(dfe,{parameters:{path:{country_code:e}},skipJsonTransform:!0,authOption:sn.SendIfAvailable});if(!n.ok){let o;try{const i=await n.json();typeof(i==null?void 0:i.detail)=="string"&&(o=i.detail)}catch(i){}const a=n.status===404&&o==="Country config not found"?"Checkout pricing config not found for this country":"Failed to fetch checkout pricing config";throw Fe.addError(new Error(a),{countryCode:e,status:n.status,detail:o}),new Error(a)}const s=await n.json();return{countryCode:Ix(s.country_code),currencyConfig:s.currency_config}}async function hfe(t,e,n){const s=t!==void 0&&fse(t)?"EU":xx;let o=null;const a=await pfe();if(e?(t&&a.includes(t)&&(o=await rc(t),o.currencyConfig.symbol_code!==e&&(o=null)),o||(o=await rc(e))):t&&(a.includes(t)?o=await rc(t):o=await rc(s)),!o)return rc(s);const i=o.currencyConfig.pricing_rollout_gate;return!i||gfe(i,n)?o:rc(s)}function tS(t,e,n){const s=t.currencyConfig[e];if(!s){const a=new Error("Plan is not available for given country's pricing");throw Fe.addError(a,{countryCode:t.countryCode,planType:e,interval:n}),a}const o=s[n];if(!o){const a=new Error("Price for interval is not available for given country's pricing");throw Fe.addError(a,{countryCode:t.countryCode,planType:e,interval:n}),a}return{amount:o.amount,taxBehavior:o.tax}}function _fe({countryCode:t,currency:e,ctx:n,enabled:s=!0}){return rt({queryKey:["checkout-pricing-config",t!=null?t:null,e!=null?e:null],queryFn:()=>hfe(t,e,n),enabled:s})}function fYe(t){return t===Ye.SELF_SERVE_BUSINESS?"business":t}function mYe(t,e,n){return{id:"pricingPlan.".concat(e,".costAmount"),defaultMessage:xfe(t),description:"Cost for ".concat(e," plan in ").concat(n)}}function gYe(t,e){var n;return(n=t.currencyConfig.promos)==null?void 0:n[e]}function xfe(t){const e=ffe({amount:t,roundToPrecision:2});return e%1===0?e.toFixed(0):e.toFixed(2)}const yfe=R(()=>P(()=>Promise.resolve().then(()=>vm),void 0),{loading:t=>F(t)}),vfe=R(()=>P(()=>import("./ngtx9z2nyjegfsso.js"),__vite__mapDeps([210,1])),{loading:t=>F(t)}),bfe=R(()=>P(()=>import("./kaw18xu9jo85v1g9.js"),__vite__mapDeps([26,1])),{loading:t=>F(t)});var eE;const Cfe=ft.div(eE||(eE=ct(["flex flex-col gap-3 text-token-text-secondary text-sm mt-3"])));var tE;const Sfe=ft.p(tE||(tE=ct(["text-token-text-primary"])));var nE;const wfe=ft(Db)(nE||(nE=ct(["relative flex cursor-pointer flex-col rounded-xl border-token-border-default p-5 text-start align-top transition-[border-color] duration-100 hover:border-token-border-heavy data-[state=unchecked]:m-[1px] data-[state=checked]:border-2 data-[state=unchecked]:border data-[state=checked]:border-black dark:data-[state=checked]:border-white md:min-h-[300px]"])));var sE;const kfe=ft(Fb)(sE||(sE=ct(["flex h-5 w-5 items-center justify-center rounded-full border-2 border-token-border-heavy bg-token-bg-primary outline-hidden data-[state=checked]:bg-black dark:data-[state=checked]:bg-white"])));var oE;const nS=ft.s(oE||(oE=ct(["text-token-text-tertiary"]))),i0=999,Efe=2,Tfe=5,pYe="team-pricing-seat-selection",hYe="team-pricing-seat-selection-direct",_Ye="numSeats",xYe="selectedPlan",yYe="promo_campaign",Mfe=t=>Efe,vYe=t=>Tfe;function bYe({billingType:t,name:e,billingFeatures:n,cost:s,currencySign:o,currencyCode:a,monthlyCost:i,discountedMonthlyCost:l,costStructure:c,selectedValue:d,hideDetails:u=!1,showWelcomeOfferLabel:f=!1,promoDisclaimer:m=null,hideSavingsMessage:g=!1}){const p=ne();V();const h=Mfe(),x=Math.floor(100-l/i*100);return r.jsxs(wfe,{value:t,id:t,className:z(u&&"min-h-0!"),children:[f&&r.jsx("div",{className:"absolute start-3 top-0 -translate-y-1/2 rounded-xl bg-[#10A37F] px-2 py-1 text-xs font-medium text-white",children:r.jsx(j,w({},nn.welcomeOfferLabel))}),!g&&l<i&&r.jsx("div",{className:z("absolute start-3 top-0 -translate-y-1/2 px-2 py-1 text-xs font-medium",d===t?"bg-token-bg-primary text-[#10A37F]":"rounded-xl bg-[#10A37F] text-white"),children:r.jsx(j,U(w({},d===t?nn.discountSelectedLabel:nn.discountUnselectedLabel),{values:{discountedRate:x}}))}),r.jsxs("div",{className:"flex w-full items-center justify-between",children:[r.jsx("div",{className:z(u?"text-base":"text-xl","font-medium"),children:r.jsx(j,w({},e))}),r.jsx(kfe,{forceMount:!0,children:r.jsx(bfe,{className:z("mt-0.25 h-[14px] w-[14px] stroke-3 text-white dark:text-black",d!==t&&"hidden")})})]}),r.jsxs(Cfe,{children:[r.jsxs("div",{children:[r.jsx(Sfe,{children:r.jsx(j,U(w({},s),{values:{monthlyCost:i,discountedMonthlyCost:l,currencyCode:p.formatMessage(a),currencySign:p.formatMessage(o),s:(...v)=>r.jsx(nS,{children:v})}}))}),r.jsx("p",{children:r.jsx(j,w({},c))})]}),!u&&r.jsx(que,{children:n.map(v=>r.jsx(Yue,{className:"text-token-text-secondary",children:r.jsx(j,U(w({},v),{values:{minSeats:h,monthlyCost:i,minimumMonthlyCost:l*2,currencyCode:p.formatMessage(a),currencySign:p.formatMessage(o),s:(...y)=>r.jsx(nS,{children:y})}}))},v.id))}),m&&r.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:m})]})]})}var aE;const sS=ft.button(aE||(aE=ct(["h-12 w-12 rounded-lg flex items-center justify-center border border-token-border-default px-1.5 py-1.5 hover:bg-token-main-surface-secondary disabled:pointer-events-none disabled:text-token-text-tertiary"])));function CYe({numSeats:t,minSeats:e,setNumSeats:n,label:s,maxSeats:o,classNames:a}){const i=o!=null?o:i0,[l,c]=_.useState(!1),d=Sn(),u=_.useMemo(()=>d==null?void 0:d.subscriptionAnalyticsParams,[d]),f=_.useCallback(b=>{B.logEvent("Account Pay: Team Plan Seat Count Clicked",w(w({},u),b))},[u]),m=_.useRef(null);_.useEffect(()=>{var b;(b=m.current)==null||b.focus()},[m]);const g=_.useRef(null),p=_.useRef(0),h=_.useCallback(b=>{n(C=>{const S=Bb(C+b,e,i);return f({prevSeats:C,currentSeats:S}),S})},[i,e,n,f]),x=_.useCallback(b=>{const k=300-b*50;return k>25?k:25},[]),v=_.useCallback(b=>{h(b),p.current=0;const C=()=>{p.current+=1,h(b);const S=x(p.current);g.current=setTimeout(C,S)};g.current=setTimeout(C,x(p.current))},[h,x]),y=_.useCallback(()=>{g.current&&(clearTimeout(g.current),g.current=null)},[]);return _.useEffect(()=>{l||i===i0&&t>i&&c(!0)},[l,i,t]),r.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[r.jsx("label",{className:z(a==null?void 0:a.label,"mb-1 flex text-base font-medium"),htmlFor:"seats",children:s!=null?s:r.jsx(j,w({},nn.usersTitle))}),r.jsxs("div",{className:"relative flex items-center gap-3",children:[r.jsx("input",{ref:m,type:"number",min:e,max:i,name:"seats",value:t,onChange:b=>{const C=parseInt(b.target.value);n(C),f({prevSeats:t,currentSeats:C})},onBlur:()=>{let b=t;t<e&&(b=e),t>i&&(b=i),t||(b=e),b!==t&&(f({prevSeats:t,currentSeats:b}),n(b))},autoFocus:!0,tabIndex:0,className:z(a==null?void 0:a.input,"bg-token-bg-primary text-token-text-primary relative m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white")}),r.jsxs("div",{className:z(a==null?void 0:a.buttons,"flex gap-1.5"),children:[r.jsx(sS,{disabled:t<=e,onMouseDown:()=>v(-1),onMouseUp:y,onMouseLeave:y,className:a==null?void 0:a.button,type:"button",children:r.jsx(vfe,{className:z("icon-sm",t<=e&&"text-token-text-tertiary")})}),r.jsx(sS,{type:"button",disabled:t>=i,onMouseDown:()=>v(1),onMouseUp:y,onMouseLeave:y,className:a==null?void 0:a.button,children:r.jsx(yfe,{className:"icon-sm"})})]})]}),i===i0&&l&&r.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:r.jsx(j,U(w({},nn.seatSelectorTooltipMaxLimit),{values:{maxSeats:i,link:b=>r.jsx(wo,{to:mse,target:"_blank",className:"underline",children:b})}}))})]})}const nn=Se({flexiblePlanCost:{id:"teamBilling.flexiblePlan.cost",defaultMessage:"{currencyCode} {currencySign}{monthlyCost}"},summaryTitle:{id:"teamBilling.summaryTitle",defaultMessage:"Summary"},annualPlanCost:{id:"teamBilling.annualPlan.cost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost} <s>{currencySign}{monthlyCost}</s>"},nameWorkspace:{id:"nameWorkspace.title",defaultMessage:"Name your workspace"},cancel:{id:"createWorkspace.cancel",defaultMessage:"Cancel"},selectTeamPlan:{id:"createWorkspace.selectTeamPlan",defaultMessage:"Select Business Plan"},selectTeamPlanModalTitle:{id:"createWorkspace.selectTeamPlanModalTitle",defaultMessage:"Select your Business plan"},continueToBillingButton:{id:"createWorkspace.continueToBillingButton",defaultMessage:"Continue to billing"},paymentErrorWarning:{id:"createWorkspace.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},continueToPricePreview:{id:"teamBilling.continueToPricePreview",defaultMessage:"Continue"},changeEffectDate:{id:"teamBilling.changeEffectDate",defaultMessage:"This change will take effect at your next renewal on {date}"},confirmPageChangeEffectDate:{id:"teamBilling.confirmPageChangeEffectDate",defaultMessage:"Your billing schedule will change from {current_plan} to {new_plan} starting at your next renewal on {date}"},confirmChange:{id:"teamBilling.confirmChange",defaultMessage:"Confirm"},teamsCostStructure:{id:"teamBilling.teamsCostStructureNew",defaultMessage:"per user/month"},businessCostStructure:{id:"teamBilling.businessCostStructure",defaultMessage:"seat/mo"},businessAnnualPlanName:{id:"teamBilling.businessAnnualPlanName",defaultMessage:"Annual billing"},businessFlexiblePlanName:{id:"teamBilling.businessFlexiblePlanName",defaultMessage:"Monthly billing"},businessAnnualPlanCost:{id:"teamBilling.businessAnnualPlanCost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost}"},businessAnnualPlanSavingsAmount:{id:"teamBilling.businessAnnualPlanSavingsAmount.v2",defaultMessage:"Youre saving {savingsAmountMonthly}/month by choosing an annual plan. Thats {savingsAmountYearly}/year."},seatsTitle:{id:"teamBilling.seatsTitle",defaultMessage:"Seats"},usersTitle:{id:"teamBilling.usersTitle",defaultMessage:"Users"},chatGptTeam:{id:"teamBilling.chatGptTeam",defaultMessage:"ChatGPT Business"},annualPlanName:{id:"teamBilling.annualPlan.nameNew",defaultMessage:"Annual"},annualPlanSavingsLabel:{id:"teamBilling.annualPlan.savingsLabel",defaultMessage:"({percent}% off)"},annualBilledAnnually:{id:"teamBilling.annualPlan.billedAnnuallyNew",defaultMessage:"Billed annually"},annualAddUsersWithRenewal:{id:"teamBilling.annualPlan.addUsersWithRenewalNew",defaultMessage:"Add and reassign users as needed"},annualMinBill:{id:"teamBilling.annualPlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},flexiblePlanName:{id:"teamBilling.flexiblePlan.nameNew",defaultMessage:"Monthly"},flexibleBilledMonthly:{id:"teamBilling.flexiblePlan.billedMonthlyNew",defaultMessage:"Billed monthly"},flexibleAddRemoveUsers:{id:"teamBilling.flexiblePlan.addRemoveUsersNew",defaultMessage:"Add or remove users as needed"},flexibleMinBill:{id:"teamBilling.flexiblePlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},today:{id:"teamBilling.today",defaultMessage:"Today"},allPlansTotal:{id:"teamBilling.allPlansTotal",defaultMessage:"Plan Total"},allPlansTodayTotal:{id:"teamBilling.allPlansTodayTotal",defaultMessage:"Today's total"},flexiblePlanAmountBreakdown:{id:"teamBilling.flexiblePlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}}"},annualPlanAmountBreakdown:{id:"teamBilling.annualPlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}} x 12 months"},breakdownAmount:{id:"teamBilling.breakdownAmount",defaultMessage:"{currencySign}{amount}/seat"},allPlansPreDiscountTotal:{id:"teamBilling.allPlansPreDiscountTotal",defaultMessage:"{currencySign}{preDiscountTotalAmount}"},planDiscountLabel:{id:"teamBilling.planDiscountLabel",defaultMessage:"Discount"},annualPlanDiscountDescription:{id:"teamBilling.annualPlanDiscountDescription",defaultMessage:"Annual (-{discountPercentage}%)"},annualPlanDiscountAmount:{id:"teamBilling.annualPlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanDiscountAmount:{id:"teamBilling.flexiblePlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanBilledMonthly:{id:"teamBilling.flexiblePlanBilledMonthly",defaultMessage:"Billed monthly starting {billDate}"},annualPlanBilledAnnually:{id:"teamBilling.annualPlanBilledAnnually",defaultMessage:"Billed annually starting {billDate}"},allPlansTotalAmount:{id:"teamBilling.allPlansTotalAmount",defaultMessage:"{currencyCode} {currencySign}{totalAmount}"},discountSelectedLabel:{id:"teamBilling.discountSelectedLabel",defaultMessage:"You're saving {discountedRate}%"},discountUnselectedLabel:{id:"teamBilling.discountUnselectedLabel",defaultMessage:"Save {discountedRate}%"},welcomeOfferLabel:{id:"teamBilling.welcomeOfferLabel",defaultMessage:"Welcome Offer"},seatSelectorTooltipMaxLimit:{id:"teamBilling.seatSelectorTooltipMaxLimit",defaultMessage:"For more than {maxSeats} users, upgrade to our <link>Enterprise plan</link>."}});var Afe=(t=>(t.FLEXIBLE="month",t.ANNUAL="year",t))(Afe||{});function SYe(t,e,n){const s=tS(e,eS,Ax.Month),o=tS(e,eS,Ax.Year),a=A3(t),i={type:"month",name:n?nn.businessFlexiblePlanName:nn.flexiblePlanName,cost:nn.flexiblePlanCost,monthlyCost:s.amount,discountedMonthlyCost:s.amount,unitCost:s.amount,currencySign:a.sign,currencyCode:a.code,costStructure:n?nn.businessCostStructure:nn.teamsCostStructure,billingFeatures:[nn.flexibleBilledMonthly,nn.flexibleMinBill,nn.flexibleAddRemoveUsers]},l={type:"year",name:n?nn.businessAnnualPlanName:nn.annualPlanName,cost:n?nn.businessAnnualPlanCost:nn.annualPlanCost,monthlyCost:s.amount,discountedMonthlyCost:o.amount,unitCost:o.amount*12,currencySign:a.sign,currencyCode:a.code,costStructure:n?nn.businessCostStructure:nn.teamsCostStructure,billingFeatures:[nn.annualBilledAnnually,nn.annualMinBill,nn.annualAddUsersWithRenewal]};return{flexibleBillingPlan:i,annualBillingPlan:l}}const wYe={month:{name:nn.chatGptTeam,breakdown:nn.flexiblePlanAmountBreakdown,discountAmount:nn.flexiblePlanDiscountAmount,discountDescription:void 0,billed:nn.flexiblePlanBilledMonthly,total:nn.allPlansTotalAmount},year:{name:nn.chatGptTeam,breakdown:nn.annualPlanAmountBreakdown,discountAmount:nn.annualPlanDiscountAmount,discountDescription:nn.annualPlanDiscountDescription,billed:nn.annualPlanBilledAnnually,total:nn.allPlansTotalAmount}},kYe=(t,e)=>Math.floor(100-e/t*100),EYe=(t,e)=>Math.floor((1-e/t)*100);function Ife(){return{queryKey:["personalityTypeList"],queryFn:()=>ge.safeGet("/personality_types")}}function TYe(){return rt(Ife())}const qP={key:"default",label:"Default",description:"Balanced style and tone",footer_text:null,example_messages:null,deprecated:!1,icon_src:null,badge:"Popular"};function jfe(t,e){const n=t!=null?t:[];let s=n==null?void 0:n.find(o=>o.key===e);return(!s||!e)&&(s=n==null?void 0:n.find(o=>o.key==="default")),s||qP}const Nfe=[qP],MYe=t=>{"use forget";const e=W.c(35),{enabled:n,fit:s,personalitiesList:o,onSelect:a,selectedPersonality:i}=t,[l,c]=_.useState(!1),d=o!=null?o:Nfe,u=ne();let f;e[0]!==o||e[1]!==i?(f=jfe(o,i),e[0]=o,e[1]=i,e[2]=f):f=e[2];const m=f.key;let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g=T=>{c(T),T&&B.logEventWithStatsig("User Context: View Personalities","chatgpt_user_context_view_personalities")},e[3]=g):g=e[3];let p;e[4]!==u?(p=u.formatMessage({id:"user-context-modal.personality.select",defaultMessage:"Select personality"}),e[4]=u,e[5]=p):p=e[5];const h=!n;let x;if(e[6]!==s||e[7]!==d||e[8]!==m){let T;e[10]!==s||e[11]!==m?(T=M=>r.jsx("span",{"aria-hidden":M.key!==m,className:z("col-span-full row-span-full",M.key===m?"":s?"hidden":"invisible"),children:M.label},M.key),e[10]=s,e[11]=m,e[12]=T):T=e[12],x=d.map(T),e[6]=s,e[7]=d,e[8]=m,e[9]=x}else x=e[9];let v;e[13]!==x?(v=r.jsx("div",{className:"grid",children:x}),e[13]=x,e[14]=v):v=e[14];let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx("svg",{className:"text-muted ms-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),e[15]=y):y=e[15];let b;e[16]!==p||e[17]!==h||e[18]!==v?(b=r.jsxs(K.Trigger,{className:"data-[state=open]:bg-token-bg-tertiary flex h-min w-fit items-center justify-between gap-0! rounded-lg border px-3 py-2 text-start",id:"personality-select-trigger","aria-label":p,disabled:h,children:[v,y]}),e[16]=p,e[17]=h,e[18]=v,e[19]=b):b=e[19];let C;e[20]!==a?(C=T=>{_.startTransition(()=>{a(T),c(!1)})},e[20]=a,e[21]=C):C=e[21];let S;if(e[22]!==d||e[23]!==m){let T;e[25]!==m?(T=M=>r.jsx(K.RadioItem,{color:m===M.key?"selected":"default",value:M.key,label:M.label,secondary:M.description},M.key),e[25]=m,e[26]=T):T=e[26],S=d.map(T),e[22]=d,e[23]=m,e[24]=S}else S=e[24];let E;e[27]!==m||e[28]!==S||e[29]!==C?(E=r.jsx(K.Portal,{children:r.jsx(K.Content,{size:"auto",alignOffset:-7,align:"end",children:r.jsx(K.RadioGroup,{value:m,onValueChange:C,children:S})})}),e[27]=m,e[28]=S,e[29]=C,e[30]=E):E=e[30];let k;return e[31]!==l||e[32]!==E||e[33]!==b?(k=r.jsxs(K.Root,{open:l,onOpenChange:g,children:[b,E]}),e[31]=l,e[32]=E,e[33]=b,e[34]=k):k=e[34],k};function AYe({label:t,description:e,selector:n}){return r.jsxs("div",{className:"flex items-start justify-between pt-2",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{children:t}),e!=null&&r.jsx(a8,{className:"pe-12!",children:e})]}),n]})}const Pfe=_.createContext("none"),Ub=()=>_.useContext(Pfe),Rfe=R(()=>P(()=>import("./jp1bsz3poves5oxv.js"),__vite__mapDeps([200,1])),{loading:t=>F(t)}),YP=R(()=>P(()=>import("./hltn41me7skpqo08.js"),__vite__mapDeps([211,1,10,11])).then(t=>t.default));function IYe(){"use forget";const t=W.c(8),e=V(),n=ze(e,"2888142241").get("is_feedback_tool_shown",!1),s=To();let o;t[0]!==s?(o=()=>s==null?void 0:s.serverId$(),t[0]=s,t[1]=o):o=t[1];const a=re(o),i=st(e);if(!i)return null;const c=i.isEnterprise()||i.isEdu();if(!n||c)return null;let d;t[2]!==a||t[3]!==e?(d=()=>{B.logEventWithStatsig("Feedback: Report Bug Button Clicked","chatgpt_feedback_report_bug_click",{location:"help-menu"}),Ie.count(je.DEFAULT,"chatgpt_feedback_report_bug_click",{location:"help-menu"}),requestAnimationFrame(()=>{dt(e,YP,{entryPointElementId:"report-bug-menu-item",conversationId:a})})},t[2]=a,t[3]=e,t[4]=d):d=t[4];let u;t[5]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(j,{id:"feedback.reportBug",defaultMessage:"Report Bug"}),t[5]=u):u=t[5];let f;return t[6]!==d?(f=r.jsx(K.Item,{id:"report-bug-menu-item",icon:Rfe,onPointerOver:Lfe,onClick:d,children:u}),t[6]=d,t[7]=f):f=t[7],f}function Lfe(){return YP.prefetch()}/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ofe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Dfe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),oS=t=>{const e=Dfe(t);return e.charAt(0).toUpperCase()+e.slice(1)},ZP=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),Ffe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=_.forwardRef((d,c)=>{var u=d,{color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:a,iconNode:i}=u,l=we(u,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return _.createElement("svg",w(w(U(w({ref:c},Bfe),{width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:ZP("lucide",o)}),!a&&!Ffe(l)&&{"aria-hidden":"true"}),l),[...i.map(([f,m])=>_.createElement(f,m)),...Array.isArray(a)?a:[a]])});/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=(t,e)=>{const n=_.forwardRef((i,a)=>{var l=i,{className:s}=l,o=we(l,["className"]);return _.createElement(Ufe,w({ref:a,iconNode:e,className:ZP("lucide-".concat(Ofe(oS(t))),"lucide-".concat(t),s)},o))});return n.displayName=oS(t),n};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $fe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],jYe=Vl("atom",$fe);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vfe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],NYe=Vl("chevron-right",Vfe);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],PYe=Vl("code-xml",Hfe);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gfe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],RYe=Vl("route",Gfe);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wfe=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]],LYe=Vl("sparkle",Wfe);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],OYe=Vl("square-pen",zfe);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],DYe=Vl("x",qfe),Yfe="https://help.openai.com/en/collections/3742473-chatgpt",Zfe="https://help.openai.com/en/articles/9982051",Kfe="https://help.openai.com/en/articles/6825453-chatgpt-release-notes",Qfe="https://help.openai.com/en/articles/10003026-windows-app-release-notes";function Jfe(){return qo?Zfe:Yfe}function Xfe(){return qo?Qfe:Kfe}const eme=R(()=>P(()=>import("./li5f2kyuxxi27h3z.js"),__vite__mapDeps([212,1])),{loading:t=>F(t)}),tme=R(()=>P(()=>import("./g1dbzw9xahth2rh2.js"),__vite__mapDeps([213,1])),{loading:t=>F(t)}),nme=R(()=>P(()=>import("./njsizjgnen9s4g7z.js"),__vite__mapDeps([214,1])),{loading:t=>F(t)});function FYe(){return r.jsxs(r.Fragment,{children:[r.jsx(K.LinkItem,{icon:tme,external:!0,to:Jfe(),onClick:()=>{B.logEvent("Click FAQ")},children:r.jsx(j,{id:"thread.helpCenter",defaultMessage:"Help center"})}),r.jsx(K.LinkItem,{icon:nme,external:!0,to:Xfe(),children:r.jsx(j,{id:"thread.releaseNotes",defaultMessage:"Release notes"})}),r.jsx(K.LinkItem,{icon:eme,external:!0,to:"https://openai.com/policies",children:r.jsx(j,{id:"thread.termsAndPolicies",defaultMessage:"Terms & policies"})})]})}function KP({date:t}){const e=ne(),n=t instanceof Date?t:new Date(t*1e3),s=ya(n,new Date);if(s<4&&s>-4){const o=e.formatRelativeTime(s,"day",{numeric:"auto"});return o.charAt(0).toUpperCase()+o.slice(1)}else return e.formatDate(n,{year:"numeric",month:"long",day:"numeric"})}const sme="_wrapper_m72g5_1",ome="_disabled_m72g5_16",ame="_label_m72g5_22",l0={wrapper:sme,disabled:ome,label:ame};function rme(d){var u=d,{className:t,icon:e,label:n,onClick:s,style:o,tabIndex:a=0,ref:i,disabled:l}=u,c=we(u,["className","icon","label","onClick","style","tabIndex","ref","disabled"]);return r.jsx("label",{"aria-label":n,className:z(t,l0.wrapper,l&&l0.disabled),style:o,tabIndex:-1,children:r.jsx("button",U(w({className:z(l0.label,l&&"opacity-50"),onClick:s,tabIndex:a,ref:i,type:"button",disabled:l},c),{children:e}))})}const ime=R(()=>P(()=>import("./cvim016jdwuq42bd.js"),__vite__mapDeps([215,1])),{loading:t=>F(t)}),lme=R(()=>P(()=>import("./impv9cw906sxjwad.js"),__vite__mapDeps([195,1])),{loading:t=>F(t)}),cme=R(()=>P(()=>import("./ixrdm5q3vaerk083.js"),__vite__mapDeps([216,1])),{loading:t=>F(t)}),dme=R(()=>P(()=>import("./gsv2mny3eni4mgoa.js"),__vite__mapDeps([217,1])),{loading:t=>F(t)}),dm=Ft(Mn(()=>({feedItems:[],hasUnreadNotifications:!1,isModalOpen:!1}))),ume=dm.getState,c0=dm.setState,fme={getHasUnreadNotifications:(t=ume())=>t.hasUnreadNotifications},Uc={setIsModalOpen:t=>{c0({isModalOpen:t})},setHasUnreadNotifications:t=>{c0({hasUnreadNotifications:t})},bulkLoadFeedItems:t=>{c0(e=>{e.feedItems=t})}};function mme(){const t=V(),e=$b(t),n=dm(fme.getHasUnreadNotifications);return e&&n}function gme(t,e,n,s){const o=V(),a=mme(),i=re(()=>DH(o).some(c=>{var d;return((d=bi(c))==null?void 0:d.value)===Xt.UNREAD}));return n&&a||s&&i?t:e}function $b(t){return ze(t,"3606233934",{disableExposureLog:!0}).get("enable_notifications_feed")}function BYe(){const t=V(),e=$b(t),n=dm(s=>s.isModalOpen);return e&&n}function pme(){const t=V(),e=$b(t),n=rt({queryKey:["fetch-notifications-feed"],queryFn:async()=>{const s=await ge.safeGet("/notifications/feed");return Uc.bulkLoadFeedItems(s.items),Uc.setHasUnreadNotifications(s.has_unreads),s.items},enabled:e});return{isLoading:n.isLoading,isFetching:n.isFetching}}function UYe(){const t=ne(),e=gme(dme,cme,!0,!1),n=t.formatMessage({id:"1UHY6w",defaultMessage:"Notifications"});return pme(),r.jsx(pt,{label:n,className:"group",children:r.jsx(Xf,{icon:e,onClick:()=>Uc.setIsModalOpen(!0),"aria-label":n})})}function hme({conversation:t,item:e,onClose:n}){const o={announcement:ime}[e.type];let a=null;try{const d=new Date(e.created_at);a=KP({date:d})}catch(d){}const i=Jf(t.id),l=at(),c=d=>{var u,f,m;if(((u=e.action)==null?void 0:u.type)==="show_conversation")n(),l(e.action.conversation_id);else if(((f=e.action)==null?void 0:f.type)==="new_conversation"){const g=e.action;g.prefilled_message&&(i({sourceEvent:d,promptMessage:is(g.prefilled_message),requestedModelId:(m=g.model_slug)!=null?m:void 0}),n())}};return r.jsxs("button",{className:"border-token-border-default flex w-full items-center justify-start gap-3 overflow-hidden border-t py-4 first-of-type:border-none",onClick:c,disabled:!e.action,children:[r.jsx("div",{className:"relative",children:o&&r.jsx(o,{className:"icon"})}),r.jsxs("div",{className:"flex h-5 shrink grow basis-0 items-center justify-between",children:[r.jsx("div",{className:"text-token-text-primary text-sm leading-tight font-normal",children:e.message}),r.jsx("div",{className:"flex items-center justify-start gap-1",children:r.jsx("div",{className:"text-token-text-tertiary text-sm leading-tight font-normal",children:a!=null?a:""})})]})]})}function $Ye({conversation:t}){const{feedItems:e,isModalOpen:n}=dm();_.useEffect(()=>{n&&(Uc.setHasUnreadNotifications(!1),ge.safePost("/notifications/feed/read",{authOption:sn.SendIfAvailable}))},[n]);const s=ne(),o=at(),a=V(),i=ve(a,"3325813340"),l=new Date,c=Td(e,u=>{const f=new Date(u.created_at);if(ZT(f))return"today";const m=ya(l,f);return m<=7?"last_7_days":m<=30?"last_30_days":"more_than_30_days"}),d=u=>{switch(u){case"today":return s.formatMessage({id:"zlkA39",defaultMessage:"Today"});case"last_7_days":return s.formatMessage({id:"FW89A4",defaultMessage:"Last 7 days"});case"last_30_days":return s.formatMessage({id:"2s3h/P",defaultMessage:"Last 30 days"});case"more_than_30_days":return s.formatMessage({id:"yArZiR",defaultMessage:"More than 30 days"})}};return r.jsx(Mt,{testId:"modal-notifications-feed",isOpen:n,onClose:()=>{Uc.setIsModalOpen(!1)},type:"success",size:"custom",className:"max-w-3xl",children:r.jsxs("div",{className:"flex flex-col gap-y-10",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold",children:s.formatMessage({id:"kWt8Cx",defaultMessage:"Notifications"})}),i&&r.jsx(rme,{icon:r.jsx(lme,{className:"icon"}),onClick:()=>{o(Al(Pn.Notifications))},label:s.formatMessage({id:"mZVh0S",defaultMessage:"Notifications settings"})})]}),Object.entries(c).map(([u,f])=>r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold",children:d(u)}),f.map(m=>r.jsx(hme,{conversation:t,item:m,onClose:()=>Uc.setIsModalOpen(!1)},m.id))]},u))]})})}const _me=R(()=>P(()=>Promise.resolve().then(()=>J5),void 0),{loading:t=>F(t)});function Vd(t){var T;const e=V(),[n,s]=_.useState(!1),k=t,{announcementKey:o,onDismiss:a,children:i,childrenWrapperClassName:l}=k,c=we(k,["announcementKey","onDismiss","children","childrenWrapperClassName"]),{show:d}=c,f=ze(e,"717266490").get("one_announcement_tooltip_per_session",!1),m=Xc(M=>!!M.displayAnnouncementTooltip),g=Xc(M=>!f||M.displayAnnouncementTooltip===o),p=ne(),h=FH(),x=BH();let v=!1;const y=Ld(!1);v=((T=y==null?void 0:y.store.useContentAreaId(ZA.HeaderTop))!=null?T:null)!==null;const S=d&&!(h||v||x);if(_.useEffect(()=>{f&&S&&n&&Ln.showAnnouncementTooltipExclusively(o)},[n,f,o,S]),_.useEffect(()=>{S&&(!f||g)&&(qe.logEvent("announcement_tooltip_shown",null,{announcement_key:o}),B.logEvent("Announcement Tooltip Shown",{announcement_key:o}),B.logUpsellOrModalEvent(dn,{eventId:"".concat(o,"_tooltip_shown"),type:rn.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}))},[S,g,o,f]),m&&!g)return i;const E=()=>{(!f||g)&&(a(),qe.logEvent("announcement_tooltip_dismissed",null,{announcement_key:o}),B.logEvent("Announcement Tooltip Dismissed",{announcement_key:o}))};return r.jsx(xme,U(w({},c),{show:S,onDismiss:E,renderAsInvisible:f&&!m,onTooltipChildrenBecomeVisible:()=>{f&&s(!0)},children:r.jsx("div",{"aria-label":p.formatMessage({id:"announcementTooltip.ariaLabel",defaultMessage:"Announcements"}),className:z("w-fit",l),children:i})}))}function xme({align:t,arrowPadding:e,alignOffset:n,show:s,onDismiss:o,children:a,title:i,side:l,sideOffset:c,theme:d="default",badge:u="new",contentAlign:f="start",description:m,className:g,collisionPadding:p,onTooltipChildrenBecomeVisible:h,renderAsInvisible:x=!1,dismissOnOutsideClick:v=!1,dismissOnTriggerClick:y=!0,contentClassName:b}){var T;const C=_.useRef(null),[S,E]=_.useState(!1);_.useEffect(()=>{if(!s)return;const M=C.current;if(!M)return;const A=new IntersectionObserver(I=>{E(I[I.length-1].intersectionRatio===1)},{threshold:1});return A.observe(M),()=>{A.unobserve(M)}},[s]);const k=M=>{s&&M&&M.getBoundingClientRect().width>0&&M.getBoundingClientRect().height>0&&(h==null||h()),C.current=M};return r.jsxs(Dl,{open:s&&S,onOpenChange:M=>{M||o()},children:[r.jsx(yr,{asChild:!0,onPointerDown:()=>{y&&o()},ref:k,children:a}),r.jsx(Fl,{container:(T=C.current)==null?void 0:T.ownerDocument.body,children:r.jsx(r8,{children:r.jsxs(Bl,{arrowPadding:e,alignOffset:n,align:t,collisionPadding:p,side:l,sideOffset:c,onOpenAutoFocus:M=>{M.preventDefault()},onCloseAutoFocus:M=>{M.preventDefault()},onInteractOutside:M=>{var I;M.target instanceof Element&&((I=C.current)==null?void 0:I.contains(M.target))||M.type==="dismissableLayer.focusOutside"?M.preventDefault():v?o():M.preventDefault()},updatePositionStrategy:"always",className:z("animate-slideLeftAndFade relative z-30 rounded-xl p-4 text-sm shadow-sm select-none",d==="default"?"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-700":"bg-blue-400 text-white",x&&"invisible",b),children:[r.jsxs("div",{className:z("flex max-w-xs flex-col gap-1",g),children:[r.jsxs("div",{className:"mb-0.5 flex gap-2",children:[u==="new"?r.jsx("span",{className:z("self-center rounded-sm px-1.5 py-0.5 text-[10px] leading-normal font-semibold uppercase",d==="default"?"bg-token-main-surface-primary text-token-main-surface-primary-inverse":"bg-white text-blue-400"),children:r.jsx(j,w({},aS.new))}):u==="beta"&&r.jsx("span",{className:"rounded-full bg-blue-100 px-1.5 text-[10px] font-semibold text-blue-600",children:r.jsx(j,w({},aS.beta))}),r.jsx("div",{className:z("grow font-semibold",f&&"text-".concat(f)),children:i}),r.jsx(Xte,{className:"-m-1 p-1 leading-[0] opacity-70 transition hover:opacity-100","data-testid":"announcement-tooltip-close-btn",children:r.jsx(_me,{className:"icon-sm"})})]}),m!==void 0&&r.jsx("div",{className:z(f&&"text-".concat(f)),children:m})]}),r.jsx(ene,{asChild:!0,children:r.jsx("div",{className:z("relative top-[-6px] h-3 w-3 rotate-45 transform rounded-ee-sm",d==="default"?"bg-gray-900 dark:bg-gray-50":"bg-blue-400")})})]})})})]})}const aS=Se({new:{id:"announcementTooltip.new",defaultMessage:"New"},beta:{id:"announcementTooltip.beta",defaultMessage:"Beta"}}),rS=R(()=>P(()=>import("./nvsf5y439ozyeg9o.js"),__vite__mapDeps([218,1,10,11])).then(t=>t.CustomInstructionsModal)),Dg=R(()=>P(()=>import("./oin63eizbi9qp967.js"),__vite__mapDeps([219,1,10,11,220,41])).then(t=>t.CreateOrEditProjectModal)),yme=Object.freeze(Object.defineProperty({__proto__:null,CreateOrEditProjectModalAsync:Dg},Symbol.toStringTag,{value:"Module"})),iS=R(()=>P(()=>import("./bkxoycqrk42hkddo.js"),__vite__mapDeps([221,1,10,11,222,186,223,224,225,117,226,106,91])).then(t=>t.ShareProjectModal)),vme=R(()=>P(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([147,1])),{loading:t=>F(t)}),bme=R(()=>P(()=>Promise.resolve().then(()=>sm),void 0),{loading:t=>F(t)}),Cme=R(()=>P(()=>import("./kx5ebq6upb7tomcz.js"),__vite__mapDeps([227,1])),{loading:t=>F(t)}),Sme=R(()=>P(()=>import("./ei2rr3u86wwo8xvm.js"),__vite__mapDeps([52,1])),{loading:t=>F(t)}),wme=R(()=>P(()=>import("./jp1bsz3poves5oxv.js"),__vite__mapDeps([200,1])),{loading:t=>F(t)}),kme=R(()=>P(()=>import("./l4ks0xbrenyhbpo7.js"),__vite__mapDeps([228,1])),{loading:t=>F(t)}),lS=R(()=>P(()=>import("./e47fa9fvgerddqmj.js"),__vite__mapDeps([229,1,10,11])).then(t=>t.ProjectReportModal)),cS=R(()=>P(()=>import("./oihrhouu74rwfb80.js"),__vite__mapDeps([230,1,10,11])).then(t=>t.SnorlaxDeletionModal)),dS=R(()=>P(()=>import("./m86h5f9p5s57o3uj.js"),__vite__mapDeps([231,1,10,11])).then(t=>t.SnorlaxLeaveModal));function Eme(t){"use forget";var I;const e=W.c(26);let n,s;e[0]!==t?(I=t,{className:s}=I,n=we(I,["className"]),e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const o=V(),a=ne(),i=st(o),{eligible:l}=lt(Oe.hasSeenSharedProjectsTooltip),c=Vd,d=Oe,u="bottom",f="end",m="w-full",g=0,p="z-100",h="w-full",x="bright",v=!0,y="new";let b;e[3]!==a?(b=a.formatMessage({id:"YJ1BcI",defaultMessage:"Invite others to projects"}),e[3]=a,e[4]=b):b=e[4];const C=i!=null&&i.isWorkspaceAccount()?a.formatMessage({id:"7i6HBq",defaultMessage:"Build reports, plan client work, or do research  together."}):a.formatMessage({id:"CO0hjY",defaultMessage:"Plan adventures, campaigns, workouts, and more  together."});let S;e[5]!==o?(S=()=>ot(o,Oe.hasSeenSharedProjectsTooltip),e[5]=o,e[6]=S):S=e[6];let E;e[7]!==s?(E=z("mx-2",s),e[7]=s,e[8]=E):E=e[8];let k;e[9]!==a?(k=a.formatMessage(Kt.projectShareButton),e[9]=a,e[10]=k):k=e[10];let T;e[11]!==a?(T=a.formatMessage(Kt.projectShareButton),e[11]=a,e[12]=T):T=e[12];let M;e[13]!==n||e[14]!==E||e[15]!==k||e[16]!==T?(M=r.jsx(ye,U(w({className:E,color:"ghost",icon:bme,label:k},n),{children:T})),e[13]=n,e[14]=E,e[15]=k,e[16]=T,e[17]=M):M=e[17];let A;return e[18]!==c||e[19]!==l||e[20]!==d.hasSeenSharedProjectsTooltip||e[21]!==b||e[22]!==C||e[23]!==S||e[24]!==M?(A=r.jsx(c,{announcementKey:d.hasSeenSharedProjectsTooltip,show:l,side:u,align:f,className:m,sideOffset:g,contentClassName:p,childrenWrapperClassName:h,theme:x,dismissOnOutsideClick:v,badge:y,title:b,description:C,onDismiss:S,children:M}),e[18]=c,e[19]=l,e[20]=d.hasSeenSharedProjectsTooltip,e[21]=b,e[22]=C,e[23]=S,e[24]=M,e[25]=A):A=e[25],A}function QP(t){"use forget";var Ee,be,fe,ue,_e;const e=W.c(106),{gizmoId:n,serverThreadId:s}=t,o=ne(),a=at(),i=V();let l;e[0]!==i||e[1]!==n?(l=E3(i,n),e[0]=i,e[1]=n,e[2]=l):l=e[2];const c=l;let d;e[3]!==i?(d=()=>p3(i),e[3]=i,e[4]=d):d=e[4];const u=re(d);let f;e[5]!==c?(f=()=>c.gizmo$(),e[5]=c,e[6]=f):f=e[6];const m=re(f);let g;e[7]!==c?(g=()=>$H(c)(),e[7]=c,e[8]=g):g=e[8];const p=re(g),h=!s;let x;e[9]!==c?(x=()=>VH(c)(),e[9]=c,e[10]=x):x=e[10];const v=re(x);let y;e[11]!==c?(y=()=>HH(c)(),e[11]=c,e[12]=y):y=e[12];const b=re(y);let C;e[13]!==c?(C=()=>GH(c)(),e[13]=c,e[14]=C):C=e[14];const S=re(C);let E;e[15]!==c?(E=()=>WH(c)(),e[15]=c,e[16]=E):E=e[16];const k=re(E),{canEdit:T}=I3(m!=null?m:void 0),{canDelete:M}=UH(m!=null?m:void 0),A=b&&h;let I;e[17]!==m?(I=m?k3(m):!1,e[17]=m,e[18]=I):I=e[18];const N=I;let L;e[19]!==i||e[20]!==m?(L=zH(),e[19]=i,e[20]=m,e[21]=L):L=e[21];const O=L,D=((be=(Ee=m==null?void 0:m.gizmo)==null?void 0:Ee.author)==null?void 0:be.user_id)===(u==null?void 0:u.normalizedAccountUserId),$=N&&h;let H;e[22]!==i||e[23]!==m?(H=()=>{m&&dt(i,lS,{projectId:m.gizmo.id,projectName:m.gizmo.display.name,onClose:()=>Cs(i,lS)})},e[22]=i,e[23]=m,e[24]=H):H=e[24];const G=H;let Z;e[25]!==i||e[26]!==m||e[27]!==o?(Z=()=>{m&&dt(i,Dg,{submitButtonTitle:o.formatMessage(Kt.projectSettingsSubmitButton),gizmo:m,onClose:()=>Cs(i,Dg),onSuccess:()=>{Cs(i,Dg)}})},e[25]=i,e[26]=m,e[27]=o,e[28]=Z):Z=e[28];const Q=Z;let q;e[29]!==i||e[30]!==n||e[31]!==a?(q=()=>{dt(i,cS,{gizmoId:n,handleDelete:()=>{Cs(i,cS),a("/",{replace:!0})}})},e[29]=i,e[30]=n,e[31]=a,e[32]=q):q=e[32];const Y=q;let te;e[33]!==i||e[34]!==m?(te=()=>{m&&dt(i,rS,{gizmo:m,onClose:()=>Cs(i,rS)})},e[33]=i,e[34]=m,e[35]=te):te=e[35];const ae=va(te);let se;e[36]!==i||e[37]!==m||e[38]!==n||e[39]!==a?(se=()=>{m&&dt(i,dS,{gizmoId:n,projectName:m.gizmo.display.name,handleLeave:()=>{Cs(i,dS),a("/",{replace:!0})}})},e[36]=i,e[37]=m,e[38]=n,e[39]=a,e[40]=se):se=e[40];const ce=se;let X;e[41]!==i?(X=()=>{},e[41]=i,e[42]=X):X=e[42];const ee=X,ie=((_e=(ue=(fe=m==null?void 0:m.gizmo)==null?void 0:fe.instructions)==null?void 0:ue.length)!=null?_e:0)>0,de=T?ie?Kt.editInstructionsDropdownLabel:Kt.addInstructionsDropdownLabel:Kt.viewOnlyInstructionsDropdownLabel;let me;if(e[43]!==M||e[44]!==T||e[45]!==i||e[46]!==de||e[47]!==m||e[48]!==ae||e[49]!==Y||e[50]!==Q||e[51]!==ce||e[52]!==G||e[53]!==ee||e[54]!==ie||e[55]!==O||e[56]!==D||e[57]!==$){me=[];const Te=ve(i,"1478278884"),$e=ve(i,"3769650838");if(D){let Ne;e[62]!==i?(Ne=ve(i,"4283270305")?r.jsx(j,{id:"ADb29o",defaultMessage:"Edit project"}):r.jsx(j,w({},Kt.editProjectNameDropdownButton)),e[62]=i,e[63]=Ne):Ne=e[63];let Ae;e[64]!==Q||e[65]!==Ne?(Ae=r.jsx(K.Item,{onClick:Q,icon:Sme,children:Ne}),e[64]=Q,e[65]=Ne,e[66]=Ae):Ae=e[66],me.push(Ae)}if((T||ie)&&Te&&!$e){let Ne;e[67]!==de?(Ne=r.jsx(j,w({},de)),e[67]=de,e[68]=Ne):Ne=e[68];let Ae;e[69]!==ae||e[70]!==Ne?(Ae=r.jsx(K.Item,{onClick:ae,icon:Cme,children:Ne},"instructions"),e[69]=ae,e[70]=Ne,e[71]=Ae):Ae=e[71],me.push(Ae)}if($){let Ne;e[72]===Symbol.for("react.memo_cache_sentinel")?(Ne=r.jsx(j,w({},Kt.reportProjectButtonLabel)),e[72]=Ne):Ne=e[72];let Ae;e[73]!==G?(Ae=r.jsx(K.Item,{onClick:G,icon:wme,children:Ne},"report"),e[73]=G,e[74]=Ae):Ae=e[74],me.push(Ae)}if(!D&&!O){let Ne;e[75]===Symbol.for("react.memo_cache_sentinel")?(Ne=r.jsx(j,w({},Kt.leaveProjectDropdownButton)),e[75]=Ne):Ne=e[75];let Ae;e[76]!==ce?(Ae=r.jsx(K.Item,{color:"danger",onClick:ce,icon:kme,children:Ne},"leave"),e[76]=ce,e[77]=Ae):Ae=e[77],me.push(Ae)}if(M&&!O){let Ne;e[78]===Symbol.for("react.memo_cache_sentinel")?(Ne=r.jsx(j,w({},Kt.deleteProjectDropdownButton)),e[78]=Ne):Ne=e[78];let Ae;e[79]!==Y?(Ae=r.jsx(K.Item,{color:"danger",onClick:Y,icon:vme,children:Ne},"delete"),e[79]=Y,e[80]=Ae):Ae=e[80],me.push(Ae)}e[43]=M,e[44]=T,e[45]=i,e[46]=de,e[47]=m,e[48]=ae,e[49]=Y,e[50]=Q,e[51]=ce,e[52]=G,e[53]=ee,e[54]=ie,e[55]=O,e[56]=D,e[57]=$,e[58]=me}else me=e[58];const xe=me;let pe;e[81]!==i||e[82]!==m?(pe=()=>{m&&dt(i,iS,{gizmo:qH(m),publishedGizmo:m,onClose:()=>Cs(i,iS)})},e[81]=i,e[82]=m,e[83]=pe):pe=e[83];const Me=pe;let Ce,ke;e[84]!==i||e[85]!==p||e[86]!==b||e[87]!==A||e[88]!==v?(Ce=()=>{p&&(Ie.count(je.PROJECTS,"snorlax_header_actions_shown",{in_shared_projects_gate:ve(i,"773249106")?"true":"false",workspace_allows_sharing:v?"true":"false",is_shared_projects_enabled:b?"true":"false"}),A&&Ie.count(je.PROJECTS,"snorlax_header_actions_share_button_shown"))},ke=[p,A,v,b,i],e[84]=i,e[85]=p,e[86]=b,e[87]=A,e[88]=v,e[89]=Ce,e[90]=ke):(Ce=e[89],ke=e[90]),_.useEffect(Ce,ke);let Le;e[91]!==o?(Le=o.formatMessage(Kt.showProjectDetailsDropdown),e[91]=o,e[92]=Le):Le=e[92];let De;e[93]!==o?(De=o.formatMessage(Kt.projectShareButton),e[93]=o,e[94]=De):De=e[94];const le=!m;let oe;return e[95]!==xe||e[96]!==Me||e[97]!==O||e[98]!==k||e[99]!==h||e[100]!==S||e[101]!==A||e[102]!==Le||e[103]!==De||e[104]!==le?(oe={dropdownAriaLabel:Le,dropdownOptions:xe,handleClickShare:Me,isFirstPartyProjectValue:O,monograms:k,onProjectHomePage:h,projectShareLabel:De,shareButtonDisabled:le,shouldShowMonograms:S,showShareProjectButton:A},e[95]=xe,e[96]=Me,e[97]=O,e[98]=k,e[99]=h,e[100]=S,e[101]=A,e[102]=Le,e[103]=De,e[104]=le,e[105]=oe):oe=e[105],oe}function Tme(t){"use forget";const e=W.c(6),{state:n}=t,{handleClickShare:s,monograms:o,projectShareLabel:a,shouldShowMonograms:i}=n;if(!i)return null;let l;e[0]!==o?(l=r.jsx(YH,{monograms:o}),e[0]=o,e[1]=l):l=e[1];let c;return e[2]!==s||e[3]!==a||e[4]!==l?(c=r.jsx(ye,{"aria-label":a,className:"bg-transparent! px-0! hover:opacity-90",color:"ghost",onClick:s,children:l}),e[2]=s,e[3]=a,e[4]=l,e[5]=c):c=e[5],c}function Mme(t){"use forget";const e=W.c(3),{state:n}=t,{handleClickShare:s,isFirstPartyProjectValue:o,shareButtonDisabled:a,showShareProjectButton:i}=n;if(!i||o)return null;let l;return e[0]!==s||e[1]!==a?(l=r.jsx(Eme,{disabled:a,onClick:s}),e[0]=s,e[1]=a,e[2]=l):l=e[2],l}function JP(t){"use forget";const e=W.c(5),{state:n}=t,{dropdownAriaLabel:s,dropdownOptions:o,onProjectHomePage:a}=n;if(!a||o.length===0)return null;let i;e[0]!==s?(i=r.jsx(NP,{"aria-label":s,className:"shrink-0"}),e[0]=s,e[1]=i):i=e[1];let l;return e[2]!==o||e[3]!==i?(l=r.jsx(kr,{side:"top",contentAlign:"end",sideOffset:0,triggerButton:i,size:"auto",children:o}),e[2]=o,e[3]=i,e[4]=l):l=e[4],l}function VYe(t){"use forget";const e=W.c(2),n=QP(t);let s;return e[0]!==n?(s=r.jsxs(r.Fragment,{children:[r.jsx(Tme,{state:n}),r.jsx(Mme,{state:n}),r.jsx(JP,{state:n})]}),e[0]=n,e[1]=s):s=e[1],s}function HYe(t){"use forget";const e=W.c(2),n=QP(t);let s;return e[0]!==n?(s=r.jsx(JP,{state:n}),e[0]=n,e[1]=s):s=e[1],s}const Aa=ko(t=>{const e=Be(null),n=e.set;return e.set=s=>{const o=bn(e);n(s);const a=bn(e);o&&!Tp(a,o)&&Pme(t,o),a&&!Tp(a,o)&&Nme(t,a)},e}),Ame=ko(t=>St(()=>Aa(t)!=null));function Vb(t,e){Aa.set(t,e)}function k1(t){Aa.set(t,null)}function XP(t,e,n){const s=bn(()=>Aa(t));s&&Tp(e,s)?Gt(e,"searchSources")&&Gt(s,"searchSources")&&s.scrollToHeader!==e.scrollToHeader?Aa.set(t,U(w({},e),{shouldAnimateScroll:!0})):k1(t):(n==null||n(),Vb(t,e))}function Tp(t,e){return t===e?!0:!t||!e?!1:Gt(t,"searchSources")&&Gt(e,"searchSources")?e.messageId===t.messageId:Gt(t,"caterpillar")&&Gt(e,"caterpillar")?e.caterpillarId===t.caterpillarId&&e.initialTab===t.initialTab:Gt(t,"summarizer")&&Gt(e,"summarizer")?e.turnIndex===t.turnIndex:Gt(t,"cot")&&Gt(e,"cot")?e.turnIndex===t.turnIndex&&e.reasoningGroupIndex===t.reasoningGroupIndex:Gt(t,"retrievalResults")&&Gt(e,"retrievalResults")?e.turnIndex===t.turnIndex&&e.messageId===t.messageId:Gt(t,"n7jupdSources")&&Gt(e,"n7jupdSources")||Gt(t,"n7jupdTabs")&&Gt(e,"n7jupdTabs")?e.messageId===t.messageId:Gt(t,"codingCitations")&&Gt(e,"codingCitations")?e.messageId===t.messageId&&e.matchedText===t.matchedText:Gt(t,"product")&&Gt(e,"product")?e.messageId===t.messageId&&e.turnIndex===t.turnIndex&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.productIndex===t.productIndex:Gt(t,"product_agent")&&Gt(e,"product_agent")?e.product.id===t.product.id:Gt(t,"entity")&&Gt(e,"entity")?e.messageId===t.messageId&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.query===t.query&&e.category===t.category:Gt(t,"strix")&&Gt(e,"strix")?e.entityId===t.entityId:!1}function Mr(t){"use forget";const e=W.c(2),s=To();let o;return e[0]!==s?(o={openThreadSidebar:a=>{s&&Vb(s,a)},closeThreadSidebar:()=>{s&&k1(s)},toggleThreadSidebar:(a,i)=>{s&&XP(s,a,i)}},e[0]=s,e[1]=o):o=e[1],o}function Gt(t,e){return(t==null?void 0:t.type)===e}function Ime(){"use forget";const t=W.c(2),e=To();let n;return t[0]!==e?(n=()=>e!=null&&Ame(e),t[0]=e,t[1]=n):n=t[1],re(n)}function jme(){"use forget";const t=W.c(2),e=To();let n;return t[0]!==e?(n=()=>e!=null?Aa(e):null,t[0]=e,t[1]=n):n=t[1],re(n)}function uS(t){"use forget";const e=W.c(3),n=To();let s;return e[0]!==n||e[1]!==t?(s=()=>{const o=n!=null?Aa(n):null;if(o&&Gt(o,t))return o},e[0]=n,e[1]=t,e[2]=s):s=e[2],re(s)}const Nme=(t,e)=>{if(Gt(e,"searchSources")){const{turnIndex:n,messageId:s}=e;B.logEventWithStatsig("Search Links Sidebar Shown","search_links_sidebar_shown",Tn({turnIndex:n,clientThreadId:t.id,messageId:s}))}else if(Gt(e,"product")){const{turnIndex:n,messageId:s,contentReferenceStartIndex:o,productId:a,productIndex:i,productUrl:l,interactionSource:c}=e;B.logEventWithStatsig("Product Sidebar Shown","product_sidebar_shown",U(w({},Tn({turnIndex:n,clientThreadId:t.id,messageId:s})),{content_reference_start_index:o,product_index:(i+1).toString(),product_url:l,product_id:a,interaction_source:c}))}else if(Gt(e,"retrievalResults")){const{turnIndex:n}=e;B.logEventWithStatsig("File Sources Sidebar Shown","file_sources_sidebar_shown",w({},Tn({turnIndex:n,clientThreadId:t.id})))}},Pme=(t,e)=>{if(Gt(e,"searchSources")){const{messageId:n,turnIndex:s}=e;B.logEventWithStatsig("Search Links Sidebar Closed","search_links_sidebar_closed",Tn({clientThreadId:t.id,messageId:n,turnIndex:s}))}else if(Gt(e,"product")){const{messageId:n,turnIndex:s,contentReferenceStartIndex:o,productIndex:a,productId:i}=e;B.logEventWithStatsig("Product Sidebar Closed","product_sidebar_closed",U(w({},Tn({turnIndex:s,clientThreadId:t.id,messageId:n})),{content_reference_start_index:o,product_index:(a+1).toString(),product_id:i}))}else if(Gt(e,"retrievalResults")){const{turnIndex:n}=e;B.logEvent("File Sources Sidebar Closed",Tn({clientThreadId:t.id,turnIndex:n}))}};class Rs extends Si()(()=>({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})){appendOrReplaceActive(e,n=Tp){const{history:s,historyIndex:o,historyScrollTops:a,historyFullWidthImageHeights:i}=this.getState();if(o>=0&&n(s[o],e)){const c=[...s];c[o]=e,this.setState({history:c});return}const l=o>=0?s.slice(0,o+1):[];this.setState({history:[...l,e],historyScrollTops:[...a.slice(0,Math.max(0,o+1)),0],historyFullWidthImageHeights:[...i.slice(0,Math.max(0,o+1)),null],historyIndex:l.length})}setActiveIndex(e){const{history:n}=this.getState();e<0||e>=n.length||this.setState({historyIndex:e})}setScrollTopForActive(e){const{historyIndex:n,historyScrollTops:s}=this.getState();if(n<0)return;const o=[...s];o[n]=e,this.setState({historyScrollTops:o})}setFullWidthImageHeightForIndex(e,n){const{history:s,historyFullWidthImageHeights:o}=this.getState();if(e<0||e>=s.length)return;const a=[...o];a[e]=n,this.setState({historyFullWidthImageHeights:a})}setFullWidthImageHeightForActive(e){const{historyIndex:n}=this.getState();this.setFullWidthImageHeightForIndex(n,e)}reset(){this.setState({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})}goBack(e){const{historyIndex:n,history:s}=this.getState();n<=0||(this.setActiveIndex(n-1),e(s[n-1]))}goToHistoryIndex(e,n){const{history:s}=this.getState();e<0||e>=s.length||(this.setActiveIndex(e),n(s[e]))}closeThreadSidebar(e){this.reset(),e()}}J(Rs,"selectCanGoBack",e=>e.historyIndex>0),J(Rs,"selectBackHistory",e=>e.history.slice(0,Math.max(0,e.historyIndex))),J(Rs,"selectCurrentHistoryScrollTop",e=>{var n;return e.historyIndex>=0&&(n=e.historyScrollTops[e.historyIndex])!=null?n:0}),J(Rs,"selectCurrentHistoryFullWidthImageHeight",e=>{var n;return e.historyIndex>=0&&(n=e.historyFullWidthImageHeights[e.historyIndex])!=null?n:null});function Rme(){const{openThreadSidebar:t,closeThreadSidebar:e}=Mr(),n=jme(),s=Rs.useStore(),o=Rs.useState(Rs.selectCanGoBack),a=Rs.useState(Rs.selectBackHistory),i=Rs.useState(Rs.selectCurrentHistoryScrollTop),l=Rs.useState(Rs.selectCurrentHistoryFullWidthImageHeight),c=Rs.useState(x=>x.historyIndex);_.useEffect(()=>{n&&s.appendOrReplaceActive(n)},[n,s]);const d=_.useCallback(()=>s.goBack(t),[s,t]),u=_.useCallback(x=>s.goToHistoryIndex(x,t),[s,t]),f=_.useCallback(x=>s.setScrollTopForActive(x),[s]),m=_.useCallback(x=>s.setFullWidthImageHeightForActive(x),[s]),g=_.useCallback((x,v)=>s.setFullWidthImageHeightForIndex(x,v),[s]),p=_.useCallback(()=>{s.reset()},[s]),h=_.useCallback(()=>{s.reset(),e()},[s,e]);return{canGoBack:o,backHistory:a,goBack:d,goToHistoryIndex:u,setScrollTopForActive:f,currentHistoryScrollTop:i,setFullWidthImageHeightForActive:m,setFullWidthImageHeightForIndex:g,currentHistoryFullWidthImageHeight:l,activeHistoryIndex:c,resetSidebarHistory:p,closeThreadSidebarAndResetHistory:h}}var d0,fS;function eR(){if(fS)return d0;fS=1;var t=ZH(),e=KH();function n(s,o,a){(a!==void 0&&!e(s[o],a)||a===void 0&&!(o in s))&&t(s,o,a)}return d0=n,d0}var u0,mS;function Lme(){if(mS)return u0;mS=1;var t=QH(),e=r3();function n(s){return e(s)&&t(s)}return u0=n,u0}var f0,gS;function Ome(){if(gS)return f0;gS=1;var t=bT(),e=JH(),n=r3(),s="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,l=a.hasOwnProperty,c=i.call(Object);function d(u){if(!n(u)||t(u)!=s)return!1;var f=e(u);if(f===null)return!0;var m=l.call(f,"constructor")&&f.constructor;return typeof m=="function"&&m instanceof m&&i.call(m)==c}return f0=d,f0}var m0,pS;function tR(){if(pS)return m0;pS=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return m0=t,m0}var g0,hS;function Dme(){if(hS)return g0;hS=1;var t=XH(),e=i8();function n(s){return t(s,e(s))}return g0=n,g0}var p0,_S;function Fme(){if(_S)return p0;_S=1;var t=eR(),e=eG(),n=tG(),s=l8(),o=nG(),a=sG(),i=j3(),l=Lme(),c=oG(),d=aG(),u=c8(),f=Ome(),m=rG(),g=tR(),p=Dme();function h(x,v,y,b,C,S,E){var k=g(x,y),T=g(v,y),M=E.get(T);if(M){t(x,y,M);return}var A=S?S(k,T,y+"",x,v,E):void 0,I=A===void 0;if(I){var N=i(T),L=!N&&c(T),O=!N&&!L&&m(T);A=T,N||L||O?i(k)?A=k:l(k)?A=s(k):L?(I=!1,A=e(T,!0)):O?(I=!1,A=n(T,!0)):A=[]:f(T)||a(T)?(A=k,a(k)?A=p(k):(!u(k)||d(k))&&(A=o(T))):I=!1}I&&(E.set(T,A),C(A,T,b,S,E),E.delete(T)),t(x,y,A)}return p0=h,p0}var h0,xS;function Bme(){if(xS)return h0;xS=1;var t=iG(),e=eR(),n=lG(),s=Fme(),o=c8(),a=i8(),i=tR();function l(c,d,u,f,m){c!==d&&n(d,function(g,p){if(m||(m=new t),o(g))s(c,d,p,u,l,f,m);else{var h=f?f(i(c,p),g,p+"",c,d,m):void 0;h===void 0&&(h=g),e(c,p,h)}},a)}return h0=l,h0}var _0,yS;function Ume(){if(yS)return _0;yS=1;var t=cG(),e=N3();function n(s){return t(function(o,a){var i=-1,l=a.length,c=l>1?a[l-1]:void 0,d=l>2?a[2]:void 0;for(c=s.length>3&&typeof c=="function"?(l--,c):void 0,d&&e(a[0],a[1],d)&&(c=l<3?void 0:c,l=1),o=Object(o);++i<l;){var u=a[i];u&&s(o,u,i,c)}return o})}return _0=n,_0}var x0,vS;function $me(){if(vS)return x0;vS=1;var t=Bme(),e=Ume(),n=e(function(s,o,a){t(s,o,a)});return x0=n,x0}var Vme=$me();const Hd=Zn(Vme);function Hme(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t}function jx(t,e){return Array(e+1).join(t)}function Gme(t){return t.replace(/^\n*/,"")}function Wme(t){for(var e=t.length;e>0&&t[e-1]==="\n";)e--;return t.substring(0,e)}var zme=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Hb(t){return Gb(t,zme)}var nR=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function sR(t){return Gb(t,nR)}function qme(t){return aR(t,nR)}var oR=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Yme(t){return Gb(t,oR)}function Zme(t){return aR(t,oR)}function Gb(t,e){return e.indexOf(t.nodeName)>=0}function aR(t,e){return t.getElementsByTagName&&e.some(function(n){return t.getElementsByTagName(n).length})}var Ms={};Ms.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}};Ms.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+"\n"}};Ms.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var s=Number(e.nodeName.charAt(1));if(n.headingStyle==="setext"&&s<3){var o=jx(s===1?"=":"-",t.length);return"\n\n"+t+"\n"+o+"\n\n"}else return"\n\n"+jx("#",s)+" "+t+"\n\n"}};Ms.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),"\n\n"+t+"\n\n"}};Ms.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return n.nodeName==="LI"&&n.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}};Ms.listItem={filter:"li",replacement:function(t,e,n){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var s=n.bulletListMarker+"   ",o=e.parentNode;if(o.nodeName==="OL"){var a=o.getAttribute("start"),i=Array.prototype.indexOf.call(o.children,e);s=(a?Number(a)+i:i+1)+".  "}return s+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}};Ms.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}};Ms.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){for(var s=e.firstChild.getAttribute("class")||"",o=(s.match(/language-(\S+)/)||[null,""])[1],a=e.firstChild.textContent,i=n.fence.charAt(0),l=3,c=new RegExp("^"+i+"{3,}","gm"),d;d=c.exec(a);)d[0].length>=l&&(l=d[0].length+1);var u=jx(i,l);return"\n\n"+u+o+"\n"+a.replace(/\n$/,"")+"\n"+u+"\n\n"}};Ms.horizontalRule={filter:"hr",replacement:function(t,e,n){return"\n\n"+n.hr+"\n\n"}};Ms.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var n=e.getAttribute("href"),s=Mp(e.getAttribute("title"));return s&&(s=' "'+s+'"'),"["+t+"]("+n+s+")"}};Ms.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,n){var s=e.getAttribute("href"),o=Mp(e.getAttribute("title"));o&&(o=' "'+o+'"');var a,i;switch(n.linkReferenceStyle){case"collapsed":a="["+t+"][]",i="["+t+"]: "+s+o;break;case"shortcut":a="["+t+"]",i="["+t+"]: "+s+o;break;default:var l=this.references.length+1;a="["+t+"]["+l+"]",i="["+l+"]: "+s+o}return this.references.push(i),a},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}};Ms.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}};Ms.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}};Ms.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!n},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",n="`",s=t.match(/`+/gm)||[];s.indexOf(n)!==-1;)n=n+"`";return n+e+t+e+n}};Ms.image={filter:"img",replacement:function(t,e){var n=Mp(e.getAttribute("alt")),s=e.getAttribute("src")||"",o=Mp(e.getAttribute("title")),a=o?' "'+o+'"':"";return s?"!["+n+"]("+s+a+")":""}};function Mp(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function rR(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}rR.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=y0(this.array,t,this.options))||(e=y0(this._keep,t,this.options))||(e=y0(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function y0(t,e,n){for(var s=0;s<t.length;s++){var o=t[s];if(Kme(o,e,n))return o}}function Kme(t,e,n){var s=t.filter;if(typeof s=="string"){if(s===e.nodeName.toLowerCase())return!0}else if(Array.isArray(s)){if(s.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof s=="function"){if(s.call(t,e,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Qme(t){var e=t.element,n=t.isBlock,s=t.isVoid,o=t.isPre||function(f){return f.nodeName==="PRE"};if(!(!e.firstChild||o(e))){for(var a=null,i=!1,l=null,c=bS(l,e,o);c!==e;){if(c.nodeType===3||c.nodeType===4){var d=c.data.replace(/[ \r\n\t]+/g," ");if((!a||/ $/.test(a.data))&&!i&&d[0]===" "&&(d=d.substr(1)),!d){c=v0(c);continue}c.data=d,a=c}else if(c.nodeType===1)n(c)||c.nodeName==="BR"?(a&&(a.data=a.data.replace(/ $/,"")),a=null,i=!1):s(c)||o(c)?(a=null,i=!0):a&&(i=!1);else{c=v0(c);continue}var u=bS(l,c,o);l=c,c=u}a&&(a.data=a.data.replace(/ $/,""),a.data||v0(a))}}function v0(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function bS(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var iR=typeof window<"u"?window:{};function Jme(){var t=iR.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch(n){}return e}function Xme(){var t=function(){};return ege()?t.prototype.parseFromString=function(e){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(e),n.close(),n}:t.prototype.parseFromString=function(e){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(e),n.close(),n},t}function ege(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){window.ActiveXObject&&(t=!0)}return t}var tge=Jme()?iR.DOMParser:Xme();function nge(t,e){var n;if(typeof t=="string"){var s=sge().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");n=s.getElementById("turndown-root")}else n=t.cloneNode(!0);return Qme({element:n,isBlock:Hb,isVoid:sR,isPre:e.preformattedCode?oge:null}),n}var b0;function sge(){return b0=b0||new tge,b0}function oge(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function age(t,e){return t.isBlock=Hb(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=rge(t),t.flankingWhitespace=ige(t,e),t}function rge(t){return!sR(t)&&!Yme(t)&&/^\s*$/i.test(t.textContent)&&!qme(t)&&!Zme(t)}function ige(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var n=lge(t.textContent);return n.leadingAscii&&CS("left",t,e)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&CS("right",t,e)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function lge(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function CS(t,e,n){var s,o,a;return t==="left"?(s=e.previousSibling,o=/ $/):(s=e.nextSibling,o=/^ /),s&&(s.nodeType===3?a=o.test(s.nodeValue):n.preformattedCode&&s.nodeName==="CODE"?a=!1:s.nodeType===1&&!Hb(s)&&(a=o.test(s.textContent))),a}var cge=Array.prototype.reduce,dge=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Ap(t){if(!(this instanceof Ap))return new Ap(t);var e={rules:Ms,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,s){return s.isBlock?"\n\n":""},keepReplacement:function(n,s){return s.isBlock?"\n\n"+s.outerHTML+"\n\n":s.outerHTML},defaultReplacement:function(n,s){return s.isBlock?"\n\n"+n+"\n\n":n}};this.options=Hme({},e,t),this.rules=new rR(this.options)}Ap.prototype={turndown:function(t){if(!mge(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=lR.call(this,new nge(t,this.options));return uge.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return dge.reduce(function(e,n){return e.replace(n[0],n[1])},t)}};function lR(t){var e=this;return cge.call(t.childNodes,function(n,s){s=new age(s,e.options);var o="";return s.nodeType===3?o=s.isCode?s.nodeValue:e.escape(s.nodeValue):s.nodeType===1&&(o=fge.call(e,s)),cR(n,o)},"")}function uge(t){var e=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(t=cR(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function fge(t){var e=this.rules.forNode(t),n=lR.call(this,t),s=t.flankingWhitespace;return(s.leading||s.trailing)&&(n=n.trim()),s.leading+e.replacement(n,t,this.options)+s.trailing}function cR(t,e){var n=Wme(t),s=Gme(e),o=Math.max(t.length-n.length,e.length-s.length),a="\n\n".substring(0,o);return n+a+s}function mge(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}var SS=/highlight-(?:text|source)-([a-z0-9]+)/;function gge(t){t.addRule("highlightedCodeBlock",{filter:function(e){var n=e.firstChild;return e.nodeName==="DIV"&&SS.test(e.className)&&n&&n.nodeName==="PRE"},replacement:function(e,n,s){var o=n.className||"",a=(o.match(SS)||[null,""])[1];return"\n\n"+s.fence+a+"\n"+n.firstChild.textContent+"\n"+s.fence+"\n\n"}})}function pge(t){t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var hge=Array.prototype.indexOf,_ge=Array.prototype.every,cd={};cd.tableCell={filter:["th","td"],replacement:function(t,e){return dR(t,e)}};cd.tableRow={filter:"tr",replacement:function(t,e){var n="",s={left:":--",right:"--:",center:":-:"};if(Wb(e))for(var o=0;o<e.childNodes.length;o++){var a="---",i=(e.childNodes[o].getAttribute("align")||"").toLowerCase();i&&(a=s[i]||a),n+=dR(a,e.childNodes[o])}return"\n"+t+(n?"\n"+n:"")}};cd.table={filter:function(t){return t.nodeName==="TABLE"&&Wb(t.rows[0])},replacement:function(t){return t=t.replace("\n\n","\n"),"\n\n"+t+"\n\n"}};cd.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}};function Wb(t){var e=t.parentNode;return e.nodeName==="THEAD"||e.firstChild===t&&(e.nodeName==="TABLE"||xge(e))&&_ge.call(t.childNodes,function(n){return n.nodeName==="TH"})}function xge(t){var e=t.previousSibling;return t.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function dR(t,e){var n=hge.call(e.parentNode.childNodes,e),s=" ";return n===0&&(s="| "),s+t+" |"}function yge(t){t.keep(function(n){return n.nodeName==="TABLE"&&!Wb(n.rows[0])});for(var e in cd)t.addRule(e,cd[e])}function vge(t){t.addRule("taskListItems",{filter:function(e){return e.type==="checkbox"&&e.parentNode.nodeName==="LI"},replacement:function(e,n){return(n.checked?"[x]":"[ ]")+" "}})}function bge(t){t.use([gge,pge,yge,vge])}function wS(t){const e=w({},t);for(const n of Object.keys(e))e[n]=Math.round(e[n]);return e}function Ec(t,e){for(;t;){if(t instanceof HTMLElement&&t.dataset[e]!=null)return{node:t,dataValue:t.dataset[e]};t=t.parentNode}return{node:void 0,dataValue:void 0}}const C0={clientRect:void 0,isCollapsed:void 0,textContent:void 0,documentFragment:void 0,selection:void 0},uR=new Ap;uR.use(bge);function Cge(t){const n=t.getRangeAt(0).cloneContents(),s=document.createElement("div");return s.appendChild(n),uR.turndown(s.innerHTML)}function Sge(t){const e=V(),[{clientRect:n,isCollapsed:s,textContent:o,documentFragment:a,selection:i},l]=_.useState(C0);Jn(()=>{const d=()=>{setTimeout(()=>{let u;const f=window.getSelection(),m={};if(f==null||!f.rangeCount){l(C0);return}const g=f.getRangeAt(0);if(g==null){l(C0);return}const p=g.cloneContents();m.documentFragment=p,m.textContent=Cge(f);const h=g.getClientRects();if(h.length===0&&g.commonAncestorContainer!=null&&g.commonAncestorContainer instanceof HTMLElement){const x=g.commonAncestorContainer;u=wS(x.getBoundingClientRect().toJSON())}else{if(h.length<1)return;u=wS(h[0].toJSON())}m.clientRect=u,m.isCollapsed=g.collapsed,m.selection=f,l(m)},0)};return window.addEventListener("mouseup",d),()=>{window.removeEventListener("mouseup",d)}},[]);const c=Es();return _.useEffect(()=>{if(c)return;const d=u=>{const f=window.getSelection(),m=f==null?void 0:f.toString(),g=jt(t),{dataValue:p}=Ec(f==null?void 0:f.anchorNode,"messageAuthorRole"),{dataValue:h}=Ec(f==null?void 0:f.anchorNode,"messageId");!m||!h||!g||!p||p!=="assistant"||a1(e,{source:"keyboard",type:"copy",messageId:h,serverThreadId:g,selectedText:m,location:"selection",contentType:"text"})};return document.addEventListener("copy",d),()=>{document.removeEventListener("copy",d)}},[e,t,c]),{clientRect:n,isCollapsed:s,textContent:o,documentFragment:a,selection:i}}const wge=R(()=>P(()=>import("./f6as9g9iafn52u8c.js"),__vite__mapDeps([232,1])),{loading:t=>F(t)}),fR="agent-turn",GYe=[wt.PrimaryAssistant,wt.GizmoInteraction],S0=8,kge=44,Ege=12;function Tge({clientRect:t,containerSize:e}){const n=t.top,s=n+t.height,o=t.left+t.width/2;let a=n-kge,i=o-e.width/2;const l=S0;(a<l||n<l)&&(a=s+Ege);const c=window.innerWidth-e.width-S0;return i=Math.max(S0,Math.min(i,c)),{top:a,left:i}}function Mge(t){var e;return sr.createPortal(t.children,(e=t.mount)!=null?e:document.body)}function Age({onClick:t}){return r.jsx(ye,{size:"medium",color:"secondary",className:"shadow-long flex rounded-xl border-none active:opacity-1",onClick:t,children:r.jsxs("span",{className:"flex items-center gap-1.5 select-none",children:[r.jsx(wge,{className:"icon"}),r.jsx("span",{className:"whitespace-nowrap! select-none max-md:sr-only",children:r.jsx(j,{defaultMessage:"Ask ChatGPT",id:"TargetedReplyPopover.askChatGPT"})})]})})}function Ige({anchorNode:t,clientRect:e,buttons:n}){var d;const s=_.useRef(null),[o,a]=_.useState({width:0,height:0});if(Jn(()=>{const u=s.current;if(!u)return;const f=()=>{s.current&&a({width:s.current.offsetWidth,height:s.current.offsetHeight})};f();const m=new ResizeObserver(f);return m.observe(u),()=>m.disconnect()},[n.length]),!t||!t.closest(".".concat(fR))||(n==null?void 0:n.length)===0)return null;const{top:i,left:l}=Tge({clientRect:e,containerSize:o}),c=(d=t.ownerDocument)==null?void 0:d.body;return c?r.jsx(Mge,{mount:c,children:r.jsx("div",{className:"aria-live=polite fixed select-none",style:{top:i,left:l},children:r.jsx("div",{ref:s,className:"shadow-long flex overflow-hidden rounded-xl",children:n})})}):null}const jge=3;function WYe({conversation:t,onTargetedReply:e,conversation_context:n}){var C;const{clientRect:s,isCollapsed:o,textContent:a,selection:i}=Sge(t.id),{resetSidebarHistory:l}=Rme();V();const c=!1,{dataValue:d}=Ec(i==null?void 0:i.anchorNode,"messageAuthorRole"),{node:u,dataValue:f}=Ec(i==null?void 0:i.anchorNode,"messageId"),{dataValue:m}=Ec(i==null?void 0:i.focusNode,"messageId"),g=!m||f===m,p=a==null?void 0:a.trim(),h=(C=p==null?void 0:p.length)!=null?C:0,{dataValue:x}=Ec(i==null?void 0:i.focusNode,"writingBlock");_.useCallback(S=>{},[t,c,p,l,n]);const v=_.useCallback(S=>{p!==void 0&&e&&e({targetedReply:{type:"text",label:p,createNewCompletionParams:E=>{const k=Mh(p);return U(w({},E),{promptMessage:Hd(E.promptMessage,{metadata:{targeted_reply:p}}),appendMessages:E.appendMessages==null?[k]:[...E.appendMessages,k]})},onCreateCompletion:({serverThreadId:E,currentLeafId:k})=>{B.logEventWithStatsig("Targeted Reply Submitted","chatgpt_targeted_reply_submitted",{conversationId:E,currentLeafId:k})},onCleared:({serverThreadId:E,currentLeafId:k})=>{B.logEventWithStatsig("Targeted Reply Cleared","chatgpt_targeted_reply_cleared",{conversationId:E,currentLeafId:k})}},messageId:S})},[p,e]);if(s==null||o||x||!g||d!=="assistant")return null;const y=f!=null?f:"",b=[];return h>=jge&&b.push(r.jsx(Age,{onClick:()=>v(y)})),r.jsx(Ige,{anchorNode:u,clientRect:s,buttons:b})}function zYe({isUserTurn:t}){return z("relative flex w-full min-w-0 flex-col",!t&&fR)}function qYe({text:t,customSymbolOffsets:e}){return r.jsx(f3,{name:"formatted_text_error",fallback:()=>r.jsx(r.Fragment,{children:t}),children:r.jsx(Nge,{text:t,customSymbolOffsets:e})})}const Nge=({text:t,customSymbolOffsets:e=[]})=>{const n=/(```[\s\S]*?```|`[^`\n]+`|```[\s\S]*|`[^`\n]*\n|`[^`\n]*$)/g;let s=0;const o=t.split(n).flatMap((a,i)=>{const l=s;if(s+=a.length,a.startsWith("```")&&a.endsWith("```"))return r.jsx("pre",{className:"overflow-x-auto",children:r.jsx("code",{children:a.slice(3,-3).trim()})},i);if(a.startsWith("```"))return r.jsx("pre",{className:"overflow-x-auto",children:r.jsx("code",{children:a.slice(3).trim()})},i);if(a.startsWith("`")&&a.endsWith("`"))return r.jsx("code",{children:a.slice(1,-1)},i);if(a.startsWith("`"))return r.jsx("code",{children:a.slice(1)},i);{const c=e.map(d=>z4(d)).filter(d=>l<=d.startIndex&&d.endIndex<=s);if(c.length){const d=c.map(m=>z4(m)).sort((m,g)=>m.startIndex-g.startIndex),u=[];let f=0;for(let m=0;m<d.length;m++){const g=d[m],p=g.startIndex-l,h=g.endIndex-l;p>f&&u.push(a.slice(f,p)),u.push(Pge(g.symbol,a.slice(p,h),"".concat(i,"-multi-").concat(m))),f=h}return f<a.length&&u.push(a.slice(f)),u.filter(m=>!!m)}return a}});return r.jsx("div",{className:"whitespace-pre-wrap",children:o})};function Pge(t,e,n=void 0){return t===q4.SystemHint?r.jsx("span",{className:"hint-pill",children:e},n):t===q4.EcosystemMention?r.jsx("span",{className:"ecosystem-mention",children:e},n):null}function Rge({scriptSrc:t}){const e=V();return r.jsx("script",{nonce:Rn(e).cspScriptNonce,suppressHydrationWarning:!0,children:t})}function YYe({role:t,children:e}){const n=An(mn);if(!n)return e;const s=t===Ke.User&&n?"py-4":void 0;return r.jsx("div",{className:z(s),children:e})}const Lge=dG("(width <= 500px)",()=>!1);function Oge(){return re(Lge)}function mR(){const t=An(mn);return Oge()&&t}let kS=!1;function ZYe(t,e,n){_.useEffect(()=>{var s;!t||e||kS||n&&((s=Md())==null||s.receivedFirstToken(),kS=!0)},[t,e,n])}const Nx=R(()=>P(()=>import("./k1g5xt4bwwbs5e78.js"),__vite__mapDeps([233,1,234,10,11,235,100,102,236,237,238,225,117,226,239,96,240,107,109,110,241,119,120,242,243])).then(t=>t.CanvasMessageAttachment)),Dge=R(()=>P(()=>import("./k1g5xt4bwwbs5e78.js"),__vite__mapDeps([233,1,234,10,11,235,100,102,236,237,238,225,117,226,239,96,240,107,109,110,241,119,120,242,243])).then(t=>t.CanvasMessageAttachmentWrapper)),Fge=R(()=>P(()=>import("./n4z3ppo642ilcc31.js"),__vite__mapDeps([244,1])),{loading:t=>F(t)}),Bge=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)});function Tc(t,e){return t===lr.DOCUMENT?r.jsx(Bge,{className:z("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):t&&xp(t)?r.jsx(Fge,{className:z("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):null}const Uge=({textdocId:t,clientThreadId:e})=>{const n=So(f=>{var m;return(m=f==null?void 0:f.resolveTempTextdocId[t])!=null?m:t}),s=y1(n),o=vb(n),a=tm(),i=So(f=>{const m=f==null?void 0:f.lastCanvasAssistantMessageById;return m==null||n==null?!0:m[n]==null});if(!s)return null;const l=()=>{yi(n)},c=()=>{dl({type:cl.Textdoc,textdocId:n,shouldRunCodeOnOpen:!0})},{title:d,type:u}=s;return r.jsx("div",{className:"flex w-full justify-end",children:r.jsx(Nx,{textdocId:n,clientThreadId:e,name:d,tag:u,icon:Tc(u,!1),iconSelected:Tc(u,!0),isCanvasOpen:a,isInlinePreview:i,isFocused:o,isUserMessage:!0,onClick:l,onPreview:c})})},KYe=({messages:t,clientThreadId:e})=>{var o,a;const[n]=t,s=(o=n==null?void 0:n.metadata)==null?void 0:o.canvas;return!s||s.user_message_type!=null?null:r.jsx(r.Fragment,{children:(a=s.user_created_textdocs)==null?void 0:a.map(({user_created_temp_textdoc_id:i})=>r.jsx(Uge,{textdocId:i,clientThreadId:e},i))})};function QYe(t){const e=Kn(t);return wr(n=>ef.getTaskIdsByConversationId(e,n).map(a=>ef.getTask(a,n)).filter(a=>a!==void 0).some(a=>a.status===En.RUNNING||a.status===En.CREATED))}function JYe(t){var e,n;return t&&(n=(e=t.metadata)==null?void 0:e.b1de6e2_rm)!=null?n:!1}function $ge(t,e){return he.findNode(t,({message:n})=>{var s,o;return((s=n.metadata)==null?void 0:s.b1de6e2_rm)===!0&&((o=n.metadata)==null?void 0:o.async_task_id)===e})!=null}function Vge(t,e){var s;let n=he.getCurrentNode(t);return n.message.author.role==="developer"&&(n=he.getNode(t,n.parentId)),e!=null&&(n.message.id===e||((s=n.message.metadata)==null?void 0:s.parent_id)===e)}function Hge(t,e){const n=he.getCurrentNode(t);return e!=null&&n.message.id===e}const gR=R(()=>P(()=>Promise.resolve().then(()=>um),void 0),{loading:t=>F(t)}),pR={medium:"icon",small:"icon-sm",xsmall:"icon-xs",large:"icon-lg",xxlarge:"icon-xl"},ES={xsmall:"h-4.5 w-4.5 text-base",small:"h-6 w-6 text-xs",medium:"h-8 w-8 text-sm",large:"h-10 w-10 text-base",xxlarge:"h-20 w-20 text-base"},_f=t=>{"use forget";var y,b,C;const e=W.c(29),{connector:n,className:s,iconClassName:o,size:a}=t,i=Xo(),l=(y=n.logo_url)!=null?y:null,c=(b=n.logo_url_dark)!=null?b:null;let d;e[0]!==l||e[1]!==c?(d={lightLogoUrl:l,darkLogoUrl:c},e[0]=l,e[1]=c,e[2]=d):d=e[2];const u=_1(d);if(!((C=u.data)!=null&&C.url)){const S=ES[a],E=a==="large"||a==="xxlarge"?"rounded-xl":"rounded-md",k=i?"bg-token-bg-tertiary":"bg-token-bg-secondary";let T;e[3]!==S||e[4]!==E||e[5]!==k?(T=z("text-token-text-secondary flex items-center justify-center font-semibold",S,E,k),e[3]=S,e[4]=E,e[5]=k,e[6]=T):T=e[6];const M=pR[a];let A;e[7]!==o||e[8]!==M?(A=z(M,o),e[7]=o,e[8]=M,e[9]=A):A=e[9];let I;e[10]!==A?(I=r.jsx(gR,{className:A}),e[10]=A,e[11]=I):I=e[11];let N;e[12]!==I||e[13]!==T?(N=r.jsx("span",{className:T,children:I}),e[12]=I,e[13]=T,e[14]=N):N=e[14];let L;return e[15]!==s||e[16]!==N?(L=r.jsx("div",{className:s,children:N}),e[15]=s,e[16]=N,e[17]=L):L=e[17],L}const f=u.data.url,m=n.name,g=ES[a],p=a==="large"?"rounded-xl":"rounded-md";let h;e[18]!==o||e[19]!==g||e[20]!==p?(h=z(g,"object-contain",p,o),e[18]=o,e[19]=g,e[20]=p,e[21]=h):h=e[21];let x;e[22]!==n.name||e[23]!==u.data.url||e[24]!==h?(x=r.jsx("img",{src:f,alt:m,className:h}),e[22]=n.name,e[23]=u.data.url,e[24]=h,e[25]=x):x=e[25];let v;return e[26]!==s||e[27]!==x?(v=r.jsx("div",{className:s,children:x}),e[26]=s,e[27]=x,e[28]=v):v=e[28],v},XYe=t=>{"use forget";var d,u,f;const e=W.c(11),{connector:n}=t,s=Xo(),o=(d=n.logo_url)!=null?d:null,a=(u=n.logo_url_dark)!=null?u:null;let i;e[0]!==o||e[1]!==a?(i={lightLogoUrl:o,darkLogoUrl:a},e[0]=o,e[1]=a,e[2]=i):i=e[2];const l=_1(i);if(!((f=l.data)!=null&&f.url)){const m=s?"bg-token-bg-tertiary":"bg-token-bg-secondary";let g;e[3]!==m?(g=z("text-token-text-secondary m-0.5 flex h-6 w-6 items-center justify-center rounded-md text-xs font-semibold",m),e[3]=m,e[4]=g):g=e[4];let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(gR,{className:pR.small}),e[5]=p):p=e[5];let h;return e[6]!==g?(h=r.jsx("span",{className:g,children:p}),e[6]=g,e[7]=h):h=e[7],h}let c;return e[8]!==n.name||e[9]!==l.data.url?(c=r.jsx("span",{className:"m-0.5 rounded-md",children:r.jsx("img",{src:l.data.url,alt:n.name,className:"h-6 w-6 rounded-md object-contain"})}),e[8]=n.name,e[9]=l.data.url,e[10]=c):c=e[10],c},hR=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M7.45996 14.375C7.45996 13.3616 6.63844 12.54 5.625 12.54C4.61156 12.54 3.79004 13.3616 3.79004 14.375C3.79004 15.3884 4.61156 16.21 5.625 16.21C6.63844 16.21 7.45996 15.3884 7.45996 14.375ZM16.21 14.375C16.21 13.3616 15.3884 12.54 14.375 12.54C13.3616 12.54 12.54 13.3616 12.54 14.375C12.54 15.3884 13.3616 16.21 14.375 16.21C15.3884 16.21 16.21 15.3884 16.21 14.375ZM7.45996 5.625C7.45996 4.61156 6.63844 3.79004 5.625 3.79004C4.61156 3.79004 3.79004 4.61156 3.79004 5.625C3.79004 6.63844 4.61156 7.45996 5.625 7.45996C6.63844 7.45996 7.45996 6.63844 7.45996 5.625ZM16.21 5.625C16.21 4.61156 15.3884 3.79004 14.375 3.79004C13.3616 3.79004 12.54 4.61156 12.54 5.625C12.54 6.63844 13.3616 7.45996 14.375 7.45996C15.3884 7.45996 16.21 6.63844 16.21 5.625ZM17.54 14.375C17.54 16.123 16.123 17.54 14.375 17.54C12.627 17.54 11.21 16.123 11.21 14.375C11.21 12.627 12.627 11.21 14.375 11.21C16.123 11.21 17.54 12.627 17.54 14.375ZM8.79004 5.625C8.79004 7.37298 7.37298 8.79004 5.625 8.79004C3.87702 8.79004 2.45996 7.37298 2.45996 5.625C2.45996 3.87702 3.87702 2.45996 5.625 2.45996C7.37298 2.45996 8.79004 3.87702 8.79004 5.625ZM17.54 5.625C17.54 7.37298 16.123 8.79004 14.375 8.79004C13.7416 8.79004 13.153 8.60173 12.6582 8.28125L8.28125 12.6582C8.60173 13.153 8.79004 13.7416 8.79004 14.375C8.79004 16.123 7.37298 17.54 5.625 17.54C3.87702 17.54 2.45996 16.123 2.45996 14.375C2.45996 12.627 3.87702 11.21 5.625 11.21C6.25794 11.21 6.84623 11.3977 7.34082 11.7178L11.7178 7.34082C11.3977 6.84623 11.21 6.25794 11.21 5.625C11.21 3.87702 12.627 2.45996 14.375 2.45996C16.123 2.45996 17.54 3.87702 17.54 5.625Z"})),um=Object.freeze(Object.defineProperty({__proto__:null,default:hR},Symbol.toStringTag,{value:"Module"})),Gge=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),Wge=R(()=>P(()=>import("./fx4tif7av4x5mmpn.js"),__vite__mapDeps([245,1])),{loading:t=>F(t)}),zge=R(()=>P(()=>import("./cs13hjllyr5z07le.js"),__vite__mapDeps([246,1])),{loading:t=>F(t)}),qge=R(()=>P(()=>import("./i9crbuggadd1d18l.js"),__vite__mapDeps([247,1])),{loading:t=>F(t)}),Yge=R(()=>P(()=>import("./nerwniv8icoyqyjk.js"),__vite__mapDeps([33,1])),{loading:t=>F(t)}),Zge=R(()=>P(()=>import("./nh1pnlx0ql3cilt1.js"),__vite__mapDeps([248,1])),{loading:t=>F(t)}),Kge=R(()=>P(()=>import("./oo4a5cyom9orocbu.js"),__vite__mapDeps([249,1])),{loading:t=>F(t)}),Qge=R(()=>P(()=>import("./6kppbcfhmenkpk5e.js"),__vite__mapDeps([250,1])),{loading:t=>F(t)}),Jge=R(()=>P(()=>import("./gsyjy3cn2edhhxqr.js"),__vite__mapDeps([251,1])),{loading:t=>F(t)}),Xge=R(()=>P(()=>import("./ojgc3f33xqlpzccg.js"),__vite__mapDeps([34,1])),{loading:t=>F(t)}),epe=R(()=>P(()=>import("./otp3t1xuqwydluup.js"),__vite__mapDeps([252,1])),{loading:t=>F(t)}),tpe=R(()=>P(()=>import("./gl3rapxbeig8umvj.js"),__vite__mapDeps([253,1])),{loading:t=>F(t)}),npe=R(()=>P(()=>import("./gb09ykdmnecx7kqm.js"),__vite__mapDeps([254,1])),{loading:t=>F(t)}),spe=R(()=>P(()=>import("./e78y0x0bsn1pjk21.js"),__vite__mapDeps([255,1])),{loading:t=>F(t)}),ope=R(()=>P(()=>import("./mj2brfr01cewzl9a.js"),__vite__mapDeps([256,1])),{loading:t=>F(t)}),ape=R(()=>P(()=>import("./jlsb77lt6kqhcsln.js"),__vite__mapDeps([257,1])),{loading:t=>F(t)}),rpe=R(()=>P(()=>import("./htgqwnjx12i16hc6.js"),__vite__mapDeps([258,1])),{loading:t=>F(t)}),ipe=R(()=>P(()=>import("./fsahglpl2wxoakvg.js"),__vite__mapDeps([35,1])),{loading:t=>F(t)}),lpe=R(()=>P(()=>import("./cablc6lr74ppvrr3.js"),__vite__mapDeps([259,1])),{loading:t=>F(t)}),cpe=R(()=>P(()=>import("./edtxx94txmhqvu0e.js"),__vite__mapDeps([36,1])),{loading:t=>F(t)}),dpe=R(()=>P(()=>import("./on6zjr1bjw5z2d08.js"),__vite__mapDeps([37,1])),{loading:t=>F(t)}),upe=R(()=>P(()=>import("./odeqnwkly96z750u.js"),__vite__mapDeps([260,1])),{loading:t=>F(t)}),fpe=R(()=>P(()=>import("./l5e2clfxpgm30p9v.js"),__vite__mapDeps([261,1])),{loading:t=>F(t)}),mpe=R(()=>P(()=>import("./z73jc6cuiis8j7zw.js"),__vite__mapDeps([262,1])),{loading:t=>F(t)}),gpe=R(()=>P(()=>import("./b6wurwufazegul5k.js"),__vite__mapDeps([263,1])),{loading:t=>F(t)}),ppe=R(()=>P(()=>import("./kzg5ev41drr4p042.js"),__vite__mapDeps([264,1])),{loading:t=>F(t)}),hpe=R(()=>P(()=>import("./km0dhf1mvcjs8kkd.js"),__vite__mapDeps([265,1])),{loading:t=>F(t)}),_pe=R(()=>P(()=>import("./oeu7ns9by1ylfahx.js"),__vite__mapDeps([266,1])),{loading:t=>F(t)}),xpe=R(()=>P(()=>import("./qr8ktpa6xn24sy7q.js"),__vite__mapDeps([267,1])),{loading:t=>F(t)}),ype=R(()=>P(()=>import("./fenai6dwr8b5i5c6.js"),__vite__mapDeps([268,1])),{loading:t=>F(t)}),vpe=R(()=>P(()=>import("./ip633et1a2kaq027.js"),__vite__mapDeps([269,1])),{loading:t=>F(t)}),TS={[window.location.origin+"/c/"]:"Canvas","https://chatgpt-staging.com/c/":"Canvas","https://docs.google.com/document":"Google Docs","https://docs.google.com/presentation":"Google Slides","https://docs.google.com/spreadsheets":"Google Sheets","https://drive.google.com/":"Google Drive","https://mail.google.com/mail/":"Gmail","https://calendar.google.com/":"Google Calendar","https://www.google.com/calendar":"Google Calendar","https://github.com/":"GitHub","https://linear.app/":"Linear","https://app.intercom.com/":"Intercom","https://www.notion.so/":"Notion","https://notion.so/":"Notion","https://canva.com/":"Canva","https://www.canva.com/":"Canva","https://dropbox.com/":"Dropbox","https://www.dropbox.com/":"Dropbox","https://box.com/":"Box","https://app.box.com/":"Box","https://outlook.office.com/":"Outlook","https://outlook.live.com/":"Outlook","https://outlook.office365.com/":"Outlook","https://teams.microsoft.com/":"Teams","mailto:":"Google Contacts","https://app.hubspot.com/":"Hubspot","https://gitlab.com/":"GitLab","https://desk.zoho.":"Zoho Desk","https://3.basecamp.com":"Basecamp"},MS={".aha.io/":"Aha!",".asana.com/":"Asana","dev.azure.com/":"Azure DevOps",".clickup.com/":"ClickUp","gitlab.com/":"GitLab",".helpscout.net/":"Help Scout",".teamwork.com/":"Teamwork",".zendesk.com/":"Zendesk"},bpe=/^(https:\/\/)([a-zA-Z0-9-]+\.)+slack\.com(\/.*)?$/,Cpe=/^https:\/\/outlook\.(office|live)\.com/,Spe=/^https:\/\/[^\s]+?\.sharepoint\.com\/[^\s]*/;function _R(t){if(t){if(bpe.test(t))return"Slack";if(Cpe.test(t))return"Outlook";if(Spe.test(t))return"SharePoint";{const e=Object.keys(TS).find(s=>t.startsWith(s));if(e)return TS[e];const n=Object.keys(MS).find(s=>t.includes(s));return n?MS[n]:void 0}}}function zb(t){switch(t){case"Google Contacts":return lpe;case"Google Docs":return Yge;case"Google Slides":return zge;case"Google Sheets":return qge;case"Google Drive":return ipe;case"Gmail":return dpe;case"Google Calendar":return cpe;case"GitHub":return fpe;case"Slack":return Jge;case"Canvas":return Gge;case"SharePoint":return Xge;case"Linear":return spe;case"Dropbox":return mpe;case"Box":return hpe;case"Intercom":return ope;case"Notion":return tpe;case"Canva":return ppe;case"Outlook":return epe;case"Teams":return npe;case"Hubspot":return ape;case"Aha!":return vpe;case"Asana":return ype;case"Azure DevOps":return xpe;case"ClickUp":return gpe;case"GitLab":return upe;case"Help Scout":return rpe;case"Teamwork":return Qge;case"Zendesk":return Kge;case"Zoho Desk":return Zge;case"Basecamp":return _pe;default:return null}}function Gd(t){const e=_R(t);if(!e)return null;const n=zb(e);return n?{type:e,Icon:n}:null}const Px=({connectorId:t,cloud_doc_url:e,availableConnectors:n,iconClassName:s})=>{const o=Gd(e!=null?e:""),{Icon:a,type:i}=o!=null?o:{};if(a)return{Icon:r.jsx(a,{className:z(s,"icon-sm")}),appName:i!=null?i:""};if(t){const l=Array.from(n!=null?n:[]).find(c=>c.id===t);if(l)return{Icon:r.jsx(_f,{connector:l,size:"xsmall",className:s,iconClassName:"m-0"}),appName:l.name}}return{Icon:e?r.jsx(hR,{className:z(s,"icon-sm")}):r.jsx(Wge,{className:z(s,"icon-sm")}),appName:i!=null?i:""}};function eZe(t){var e;{const n=(e=t.extra)==null?void 0:e.cloud_doc_url;if(!n)return;const s=_R(n);if(!s)return;const o=t.name;return{url:n,type:s,title:kpe(s)?Epe(o):o}}}const wpe=["Google Docs","Google Slides","Google Sheets"];function kpe(t){return wpe.includes(t)}function Epe(t){const e=t.lastIndexOf(".");return e!==-1?t.slice(0,e):t}function tZe({citationMetadata:t,compact:e}){if(!t)return null;const n=zb(t.type);return n?e?r.jsx("a",{href:l_(t.url),target:"_blank",rel:"noreferrer",children:r.jsxs("div",{className:"flex flex-row items-center gap-2 overflow-clip rounded-lg border border-gray-200 px-[16px] py-2",children:[r.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),r.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title?t.title:l_(t.url)})]})}):r.jsx("a",{href:l_(t.url),target:"_blank",rel:"noreferrer",children:r.jsxs("div",{className:"flex flex-col gap-[2px] overflow-clip rounded-lg border border-gray-200 px-[16px] py-[12px]",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-0.5",children:[r.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),r.jsx("p",{className:"text-token-text-secondary text-xs leading-normal",children:t.type})]}),r.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title})]})}):null}const Tpe=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)});function nZe({hint:t}){var n;if(!t)return null;const e=Gd((n=t.url)!=null?n:"");return r.jsxs("div",{className:"text-token-text-tertiary mb-2 flex flex-row items-center justify-end",children:[r.jsx(Tpe,{className:"icon me-1.5"}),r.jsx("span",{className:"shrink-0",children:r.jsx(j,{id:"Y+ZBkg",defaultMessage:"Referring to {fileName}",values:{fileName:r.jsxs(yh,{className:"text-token-text-secondary font-semibold hover:underline",href:t.url,underline:!1,openNewTab:!0,children:[e&&r.jsx(e.Icon,{className:"icon me-1.5 inline"}),t.name]})}})})]})}const Mpe=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>F(t)}),sZe=t=>{"use forget";const e=W.c(22),{children:n,collapsedHeight:s}=t,[o,a]=_.useState(!1),[i,l]=_.useState(null),c=_.useRef(null);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{c.current&&l(c.current.scrollHeight)},e[0]=d):d=e[0];let u;e[1]!==n||e[2]!==o?(u=[n,o],e[1]=n,e[2]=o,e[3]=u):u=e[3],_.useEffect(d,u);const f=o&&i?i:"".concat(s,"rem");let m;e[4]!==f?(m={maxHeight:f},e[4]=f,e[5]=m):m=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("hr",{className:z("absolute start-0 end-0 bottom-0","hires:[border-inline-width:0.5px] [border-inline-width:1px] border-[var(--theme-user-msg-text)] opacity-20")}),e[6]=g):g=e[6];let p;e[7]!==n||e[8]!==m?(p=r.jsxs("div",{id:"expandable-content",ref:c,className:"relative overflow-hidden pb-3",style:m,children:[n,g]}),e[7]=n,e[8]=m,e[9]=p):p=e[9];let h;e[10]===Symbol.for("react.memo_cache_sentinel")?(h=()=>a(Ape),e[10]=h):h=e[10];const x=o?AS.showLess.defaultMessage:AS.showMore.defaultMessage,v=o&&"rotate-180";let y;e[11]!==v?(y=z("self-center text-[var(--theme-user-msg-text)] group-hover:scale-110",v),e[11]=v,e[12]=y):y=e[12];let b;e[13]!==y?(b=r.jsx(Mpe,{className:y}),e[13]=y,e[14]=b):b=e[14];let C;e[15]!==o||e[16]!==b||e[17]!==x?(C=r.jsx("button",{onClick:h,className:"group -mb-3 flex w-full cursor-pointer flex-col items-stretch pt-2 pb-2.5 select-none","aria-expanded":o,"aria-controls":"expandable-content","aria-label":x,children:b}),e[15]=o,e[16]=b,e[17]=x,e[18]=C):C=e[18];let S;return e[19]!==C||e[20]!==p?(S=r.jsxs("div",{className:"relative",children:[p,C]}),e[19]=C,e[20]=p,e[21]=S):S=e[21],S},AS=Se({showLess:{id:"showLess",defaultMessage:"Show Less"},showMore:{id:"showMore",defaultMessage:"Show More"}});function Ape(t){return!t}const Ipe={highlightedAttributions:new Set},IS=8,Rx=Ft(()=>Ipe),jS={debugMode:!1,viewModelPredictedFallback:!1,disableSegmentReplacement:!1,useSigmoid:!0,influenceTemperature:.2,probThreshold:.45,probBaseline:.02},qb=Ft()(ZE(()=>w({},jS),{name:"search.attributions-settings",version:IS,migrate:(t,e)=>e!==IS?jS:t}));function xR(t,e){return"".concat(t,"-").concat(e)}const NS={setHighlight:(t,e)=>{if(t==null)return;if(e==null||e.length===0)return NS.clearHighlights();Array.isArray(e)||(e=[e]);const n=new Set;for(const s of e)n.add(xR(t,s));return Rx.setState(()=>({highlightedAttributions:n}))},setHighlightBySource:(t,e)=>{var s;let n;"attribution_segments"in e&&(n=(s=e.attribution_segments)!=null?s:void 0),NS.setHighlight(t,n)},clearHighlights:()=>Rx.setState({highlightedAttributions:new Set})},oZe=()=>qb(t=>t.viewModelPredictedFallback),aZe=()=>qb(t=>t.debugMode),rZe=(t,e)=>Rx(n=>t==null?!1:n.highlightedAttributions.has(xR(t,e))),iZe=()=>qb(t=>t.disableSegmentReplacement);function lZe(){return!1}const cZe=t=>ze(t,"453021389").get("enable-block-animations",!1);function yR(t){var e;return t.author.role===Ke.Assistant&&((e=t.recipient)==null?void 0:e.startsWith(Nn.CANMORE))===!0}function vR(t){var e;return t.author.role===Ke.Tool&&((e=t.author.name)==null?void 0:e.startsWith(li))===!0}function bR(t,e){const n=[];let s=0,o=0;for(const a of e)n[o]=s,s+=a.length,o+=1;return n[o]=s,t.map(a=>{const{start:i,end:l}=a;return{start:n[i],end:n[l]}})}function jpe(t,e){const n=[];let s=0,o=0;for(const a of e)n[s]=o,a.length===2?(n[s+1]=o,s+=2):s+=1,o+=1;return n[s]=o,t.map(a=>{const{start:i,end:l}=a;return{start:n[i],end:n[l]}})}function Lx(t,e){const n=t.map(({content:a,id:i,start:l,end:c})=>({id:i,at:{start:l,end:c},content:a})),s=n.map(a=>a.at),o=bR(s,e);return n.map((a,i)=>U(w({},a),{at:o[i]}))}function dZe(t,e){const n=t.map(a=>a.at),s=jpe(n,e);return t.map((a,i)=>U(w({},a),{at:s[i]})).map(({content:a,id:i,at:l})=>({id:i,start:l.start,end:l.end,content:a}))}const Npe=(t,e)=>{const n=bR(e,t),s=[];for(let a=0;a<n.length;a++){const{start:i}=n[a];let l=0;const c=n.slice(0,a).entries();for(const[d,u]of c)if(i>u.start||i>u.end){const f=u.end-u.start,m=e[d].content.length;l+=m-f}s.push(l)}const o=[];for(let a=0;a<n.length;a++){const{content:i}=e[a],l=n[a],{start:c}=l,d=s[a],u={start:c+d,end:c+d+i.length};o.push({id:"edit-".concat(a),content:i,positionBefore:l,positionAfter:u})}return o},Ppe=(t,e)=>ge.safeGet("/textdoc/{textdoc_id}/diff/{version}",{parameters:{path:{textdoc_id:t,version:e}}});function Rpe(t,e){const n=t.filter(s=>s.op_type==="edit");return Npe(e,n)}const Lpe=async(t,e)=>{if(e===1)return null;const{content_before:n,content_after:s,comments_before:o,comments_after:a,operations:i}=await Ppe(t,e!=null?e:-1);return{edits:Rpe(i,n),contentBefore:n,contentAfter:s,commentsBefore:Lx(o,n),commentsAfter:Lx(a,s)}},CR=(t,e)=>Xn({queryKey:[t,e,"edit"],enabled:e!=null,gcTime:1e3*60*5,queryFn:()=>Lpe(t,e)}),Yb=()=>({lastFlushedAt:null,lastTriggeredAt:null}),Zb=Ft(Mn(()=>({userEdits:{},timestamps:{}}))),{setState:E1}=Zb,uZe=t=>Zb(({timestamps:e})=>{var n,s,o,a;return((s=(n=e[t])==null?void 0:n.lastTriggeredAt)!=null?s:0)>((a=(o=e[t])==null?void 0:o.lastFlushedAt)!=null?a:0)}),fZe=t=>{E1(e=>{var n,s;(s=(n=e.timestamps)[t])!=null||(n[t]=Yb()),e.timestamps[t].lastTriggeredAt=Date.now()})},mZe=({textdocId:t,basedOnVersionInt:e,content:n,comments:s})=>{E1(o=>{var a,i,l,c;(i=(a=o.timestamps)[t])!=null||(a[t]=Yb()),o.timestamps[t].lastFlushedAt=Date.now(),(c=(l=o.userEdits)[t])!=null||(l[t]=[]),o.userEdits[t].push({content:n,basedOnVersionInt:e,nextVersionInt:null,isPending:!0,comments:s})})},gZe=({textdocId:t,basedOnVersionInt:e,newVersion:n})=>{E1(s=>{var o,a;(a=(o=s.userEdits)[t])!=null||(o[t]=[]);for(const i of s.userEdits[t])if(i.basedOnVersionInt===e){i.isPending=!1,i.nextVersionInt=n;break}})},Ope=t=>{E1(e=>{for(const{textdocId:n,versionInt:s}of t){const o=e.userEdits[n];o&&(e.userEdits[n]=o.filter(a=>a.basedOnVersionInt>(s!=null?s:er)),o.length===0&&(e.timestamps[n]=Yb()))}})},Dpe=Ol(({userEdits:t})=>t),Fpe=Ol(t=>{const e=new Map;for(const[n,s]of Object.entries(t)){const o=bo(s);if(!o)continue;const{content:a,comments:i,nextVersionInt:l,basedOnVersionInt:c}=o;e.set(n,{textdocId:n,comments:i,content:a,versionInt:l!=null?l:c})}return e}),Bpe=()=>Zb(t=>Fpe(Dpe(t))),SR=Ft(()=>({optimisticRestore:null})),{setState:Fg,getState:Upe}=SR;function $pe(t){Fg(e=>{var n;if(e.optimisticRestore){for(const{textdocId:s,versionInt:o}of t)if(e.optimisticRestore.textdocId===s&&e.optimisticRestore.versionInt!==-1&&((n=e.optimisticRestore.versionInt)!=null?n:er)<=(o!=null?o:er))return{optimisticRestore:null}}return e})}function wR(){return SR(t=>t.optimisticRestore)}function pZe(t,e,n){const s=It(),{mutateAsync:o}=qt({mutationKey:["canvas","textdoc","persist"],mutationFn:Vpe,onSuccess:()=>{t&&s.invalidateQueries({queryKey:[t,"textdocs"]})}}),a=wR(),i=_.useCallback(async()=>{if(!e||!n||e.versionInt==null||n.versionInt==null||Upe().optimisticRestore!=null)return;const{textdocId:l,versionInt:c}=e,d=n.versionInt,u=U(w({},n),{versionInt:-1});Fg(()=>({optimisticRestore:u})),iI(l);try{const f=await o({textdocId:l,versionInt:c,restoreFromVersionInt:d});Fg(m=>({optimisticRestore:m.optimisticRestore&&U(w({},m.optimisticRestore),{versionInt:f})}))}catch(f){Fg(()=>({optimisticRestore:null})),nte(l,{version:d})}},[e,n,o]);return{optimisticRestoredTextdocVersion:a,restoreHistoricalTextdocVersion:i}}async function Vpe({textdocId:t,versionInt:e,restoreFromVersionInt:n}){return(await ge.safePost("/textdoc/{textdoc_id}/restore",{parameters:{path:{textdoc_id:t}},requestBody:{version:e,restore_from_version:n}})).version}const Hpe=async({lastVersion:t,textdocId:e,commentId:n,reason:s})=>(await ge.safeDelete("/textdoc/{textdoc_id}/{version}/comment/{comment_id}",{parameters:{query:{reason:s},path:{textdoc_id:e,version:String(t),comment_id:n}}})).version,Ox=Ft(()=>({persistingOp:null,ops:[]})),{setState:Bg,getState:Gpe}=Ox,Wpe=()=>{const t=Ox(({ops:n})=>n),e=Ox(({persistingOp:n})=>n);return _.useMemo(()=>[...t,e].filter(P3),[t,e])},zpe=t=>{Bg(e=>{let n=e.ops;for(const{textdocId:s,versionInt:o}of t)n=n.filter(a=>{var i;return a.textdocId!==s||((i=a.versionInt)!=null?i:er)>(o!=null?o:er)});return{ops:n}})},hZe=t=>_.useCallback(async(e,n)=>{const s=!!Gpe().persistingOp,o=t==null?void 0:t.versionInt,a=t==null?void 0:t.textdocId;if(s||o==null||a==null)return!1;const i={kind:Bn.REMOVE_COMMENT,textdocId:a,author:{role:Ke.User},versionInt:o,createdAt:Date.now()/1e3,commentId:e,reason:n};Bg(({ops:l})=>({ops:l,isPersisting:!0,persistingOp:i}));try{const l=await Hpe({lastVersion:o,textdocId:a,commentId:e,reason:n});return Bg(({ops:c})=>({ops:[...c,U(w({},i),{versionInt:l})],isPersisting:!1,persistingOp:null})),l}catch(l){return Bg(({ops:c})=>({ops:c,isPersisting:!1,persistingOp:null})),!1}},[t]),Kb=t=>ve(t,"2928249761");function qpe(t){var n,s;const e=(s=(n=t.metadata)==null?void 0:n.open_in_canvas_view)==null?void 0:s.id;return e!=null?e:null}const Ype=async t=>await ge.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:t}}}).catch(e=>(Ll.logError("Failed to fetch persisted textdocs",e,{clientThreadId:t}),[])),Zpe=async t=>{const e=await Ype(t),n=new Map(e.map(a=>[a.id,a])),s=[];for(const{id:a,content:i,version:l,textdoc_type:c,title:d,comments:u,metadata:f}of e)s.push({textdocId:a,messageId:null,type:hl(c),comments:Lx(u,i),status:Os.COMPLETE,title:d,content:i,versionInt:l,createdAt:0,metadata:{content_references:f==null?void 0:f.content_references,hive_id:f==null?void 0:f.hive_id}});return{persistedTextdocVersionById:new Map(s.map(a=>[a.textdocId,a])),persistedTextdocVersions:s,persistedTextdocById:n}};function Kpe(t){const e=V(),n=Kb(e),s=ve(e,"3959994305")||n,o=Kn(t),[a,i]=Ve(t,p=>[he.isMessageTurnEnded(p),he.lastUserMessage(p)]),l=i&&!!qpe(i),c=!!o&&tt(e)&&(!s||a||!!l),{data:d,error:u,isLoading:f,isFetching:m,refetch:g}=rt({queryKey:[o,"textdocs"],enabled:c,queryFn:o?()=>Zpe(o):$y});return _.useEffect(()=>{if(!d)return;const{persistedTextdocVersions:p}=d;zpe(p),Ope(p),$pe(p)},[d]),[U(w({},d),{error:u,isEnabled:c,isLoading:f,isFetching:m}),g]}var Ip=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.READY=1]="READY",t[t.REFETCHING=2]="REFETCHING",t))(Ip||{});function kR(t){"use forget";const e=W.c(14),[n,s]=Kpe(t),{error:o,persistedTextdocVersionById:a,isEnabled:i,isLoading:l,isFetching:c}=n,d=a===void 0?null:a,u=It();let f;e[0]!==t||e[1]!==u||e[2]!==s?(f=()=>{var y,b,C,S,E;const p=he.getConversationLastTurn(mt(t)),h=(y=p==null?void 0:p.messages)!=null?y:[],x=Il(h,Jpe),v=h.some(Qpe);if(x){const k=(C=(b=x.metadata)==null?void 0:b.canvas)==null?void 0:C.textdoc_id,T=(E=(S=x.metadata)==null?void 0:S.canvas)==null?void 0:E.version;k!=null&&T!=null&&u.prefetchQuery(CR(k,T))}(x||v)&&s()},e[0]=t,e[1]=u,e[2]=s,e[3]=f):f=e[3],SM(f);let m;e[4]!==i||e[5]!==c||e[6]!==l||e[7]!==d?(m=0,d&&c?m=2:(!i||d&&!c&&!l)&&(m=1),e[4]=i,e[5]=c,e[6]=l,e[7]=d,e[8]=m):m=e[8];let g;return e[9]!==o||e[10]!==d||e[11]!==s||e[12]!==m?(g={status:m,fetchError:o,textdocVersionById:d,refetch:s},e[9]=o,e[10]=d,e[11]=s,e[12]=m,e[13]=g):g=e[13],g}function Qpe(t){var e,n;return((n=(e=t.metadata)==null?void 0:e.canvas)==null?void 0:n.user_created_temp_textdoc_id)!=null}function Jpe(t){return vR(t)}const Xpe=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),ehe=R(()=>P(()=>import("./ns1vyo5kzmxgh5gj.js"),__vite__mapDeps([271,1])),{loading:t=>F(t)}),PS=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)});function _Ze({messages:t,clientThreadId:e}){var a,i,l,c;const n=t.find(d=>{var u;return((u=d.metadata)==null?void 0:u.open_in_canvas_view)!=null}),{textdocVersionById:s}=kR(e);if(n==null)return null;const o=(i=(a=n.metadata)==null?void 0:a.open_in_canvas_view)!=null&&i.id?s==null?void 0:s.get((c=(l=n.metadata)==null?void 0:l.open_in_canvas_view)==null?void 0:c.id):void 0;return o!=null?r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(PS,{className:"icon"}),o.type.startsWith("code/")?r.jsx(ehe,{className:"ms-2 inline-block"}):r.jsx(Xpe,{className:"ms-2 inline-block"}),o.title]}):r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(PS,{className:"icon"}),r.jsx(j,{id:"NHZXLr",defaultMessage:"Canvas document"})]})}const RS=Se({noThanksLabel:{id:"shoppingDecisionBoundaryButtons.noThanksLabel",defaultMessage:"No thanks"},continueLabel:{id:"shoppingDecisionBoundaryButtons.continueLabel",defaultMessage:"Continue"}}),LS="shopping_app";function xZe(t){"use forget";const e=W.c(12),{conversation:n,messages:s}=t;let o;e[0]!==n?(o=async()=>{const p={id:os(),author:{role:Ke.Tool,name:LS},create_time:Date.now()/1e3,content:{content_type:ut.Text,parts:["The user has declined to use Shopping api tool, answer their question directly"]},recipient:"all",metadata:{is_visually_hidden_from_conversation:!0},status:"finished_successfully",weight:0};await Zo({conversation:n,promptMessage:p,eventSource:"mouse"})},e[0]=n,e[1]=o):o=e[1];const a=o;let i;e[2]!==n?(i=async()=>{const p={id:os(),author:{role:Ke.Tool,name:LS},create_time:Date.now()/1e3,content:{content_type:ut.Text,parts:["The user has accepted to use Shopping api tool, now we MUST answer their question by triggering the Shopping app"]},recipient:"all",metadata:{is_visually_hidden_from_conversation:!0},status:"finished_successfully",weight:0};await Zo({conversation:n,promptMessage:p,eventSource:"mouse"})},e[2]=n,e[3]=i):i=e[3];const l=i;let c;e[4]!==s[0].id?(c=p=>he.isLastActorMessage(p,s[0].id),e[4]=s[0].id,e[5]=c):c=e[5];const d=Ve(n.id,c),[u,f]=_.useState(!d);let m;e[6]!==a||e[7]!==l||e[8]!==u?(m=!u&&r.jsxs("div",{className:"mt-4 flex gap-3",children:[r.jsx("button",{type:"button",className:"btn btn-secondary rounded-full px-4 py-2 font-medium",onClick:()=>{f(!0),a()},children:r.jsx(j,w({},RS.noThanksLabel))}),r.jsx("button",{type:"button",className:"btn btn-primary rounded-full px-4 py-2 font-medium",onClick:()=>{f(!0),l()},children:r.jsx(j,w({},RS.continueLabel))})]}),e[6]=a,e[7]=l,e[8]=u,e[9]=m):m=e[9];let g;return e[10]!==m?(g=r.jsx("div",{children:m}),e[10]=m,e[11]=g):g=e[11],g}function the(t,e=[]){var s;if(e.length===0)return t;const n=e.filter(o=>{var a;return o.end_ix<=t.length&&o.citation_format_type==="tether_markdown"&&((a=o.metadata)==null?void 0:a.type)==="webpage"});for(let o=n.length-1;o>=0;o--){const a=n[o];if(((s=a.metadata)==null?void 0:s.type)!=="webpage")continue;const{start_ix:i,end_ix:l,metadata:c}=a,u=t.substring(i,l).replace(/\[(.*?)\]\((\d+)\)/g,"[$1](".concat(c==null?void 0:c.url,")"));t=t.substring(0,i)+u+t.substring(l)}return t}function nhe(t,e=[]){var a,i;if(e.length===0)return[];const n=[],s=e.filter(l=>l.end_ix<=t.length&&l.citation_format_type!=="tether_markdown"),o=RT(t);for(let l=s.length-1;l>=0;l--){const c=s[l];let d;const{start_ix:u,end_ix:f,metadata:m,invalid_reason:g}=c;if(!(m!=null&&m.type))continue;const p=o.slice(u,f).join("");switch(m.type){case"webpage":d=U(w({},m),{type:"webpage",title:(a=m.title)!=null?a:"",snippet:(i=m.text)!=null?i:null,pub_date:she(m.pub_date),matched_text:p,start_idx:u,end_idx:f,alt:null,prompt_text:null,safe_urls:[],attributions:null,refs:[]});break;case"file":d=U(w({},m),{matched_text:p,start_idx:u,end_idx:f,alt:null,prompt_text:null,safe_urls:[],refs:[]});break}g&&(d={type:"invalid",alt:g,prompt_text:null,start_idx:u,end_idx:f,matched_text:p,invalid:!0,safe_urls:[],refs:[]});let h=!1;if(n.length>0){const x=n[n.length-1];OS(x)===OS(d)&&o.slice(x.end_idx,c.start_ix).join("").trim().length===0&&(n[n.length-1].end_idx=c.end_ix,h=!0)}!h&&d&&n.push(d)}return n}function yZe(t,e=[],n=[]){const s=the(t,e),a=[...n.length>0?[]:nhe(s,e),...n],i=dh(a);return{text:s,contentReferences:i}}function OS(t){switch(t.type){case"file":return t.id;case"webpage":return t.url;case"invalid":return t.alt}}function she(t){return t==null?null:new Date(t).getTime()/1e3}function vZe(t){return t.startsWith("file_")||t.startsWith("file-")}const ohe=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)});function bZe({messages:t,clientThreadId:e}){var l,c,d;const[n,s]=_.useState(),o=ne(),a=Kn(e);let i=null;for(const u of t)if(((d=(c=(l=u.metadata)==null?void 0:l.dalle)==null?void 0:c.from_client)==null?void 0:d.operation)!=null){i=u.metadata.dalle.from_client.operation;break}return _.useEffect(()=>{if(i==null)return;const u=i.original_file_id;async function f(m){try{const g=await Ah(m,void 0,void 0,a,!1);g.status===Ih.Success?s(g.download_url):Fe.addError("Error fetching URL for file ".concat(m,": ").concat(g.status))}catch(g){}}f(u)},[a,i]),i==null?null:r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(ohe,{className:"icon"}),n==null?r.jsx("div",{className:"h-7"}):r.jsxs(r.Fragment,{children:[r.jsx("img",{src:n,alt:o.formatMessage({id:"textMessage.editedImageAltText",defaultMessage:"Edited image"}),className:"h-7 w-auto rounded-sm opacity-50"}),i.type==="inpainting"&&r.jsx("span",{className:"ms-1 text-sm font-semibold",children:r.jsx(j,{id:"textMessage.inpaintedImage",defaultMessage:"Selection"})})]})]})}const ahe=R(()=>P(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([145,1])),{loading:t=>F(t)}),rhe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)});function Qb({type:t="info",children:e,isDismissible:n=!1,onDismiss:s,className:o,isElevated:a=!1,primaryAction:i,customIcon:l,iconCentered:c=!1}){const[d,u]=_.useState(!1);if(d)return null;let f;return t!=="none"&&(f=l||ahe),r.jsxs(ihe,{$type:t,className:z("flex w-full items-center gap-6 rounded-2xl border text-sm",n?"py-2.5 ps-3 pe-2 md:py-3 md:ps-4 md:pe-3":"px-3 py-2.5 md:p-4",a&&"shadow-xxs",o),children:[r.jsxs("div",{className:z("flex min-w-0 grow gap-3",c?"items-center":"items-start"),children:[f&&r.jsx(f,{className:z("icon-lg shrink-0",n&&"mt-[2px] md:mt-px",(t==="info"||t==="none")&&"text-token-text-secondary")}),r.jsx("div",{className:z("min-w-0 grow",n?"pt-[4px] md:pt-[3px]":"pt-[2px]",!f&&"ps-1"),children:e})]}),i,n&&r.jsx("button",{onClick:()=>{u(!0),s==null||s()},className:z("text-token-text-primary flex h-7 w-7 shrink-0 items-center justify-center self-start rounded-full bg-transparent",(t==="info"||t==="none")&&"hover:bg-token-main-surface-secondary",t==="danger"&&"hover:bg-token-surface-error/10",t==="warning"&&"hover:bg-orange-400/10"),children:r.jsx(rhe,{className:"icon"})})]})}var rE;const ihe=ft.div(rE||(rE=ct(["\n",""])),({$type:t})=>{switch(t){case"danger":return"text-token-text-error border-token-surface-error/15 bg-token-surface-error/5";case"warning":return"text-orange-600 bg-orange-400/5 border-orange-400/15";case"success":return"text-green-500 border-green-500 bg-green-500/10";default:return"text-token-text-primary border-token-border-default bg-token-main-surface-primary/10"}}),lhe=({disclaimerContent:t})=>{let e;switch(t){case"us_elections_policy":e=r.jsx(j,{id:"D1Mw8a",defaultMessage:"Always verify information about voting with your state or local election authority. For more information, visit <usElectionLink></usElectionLink>.",values:{usElectionLink:()=>r.jsx("a",{target:"_blank",href:"https://canivote.org",rel:"noreferrer",className:"underline hover:no-underline",children:"canivote.org"})}});break;case"eu_elections_policy":e=r.jsx(j,{id:"Disclaimer.EUElections",defaultMessage:"Always verify information about voting with your local election authority. For more information about the EU elections, visit <euElectionLink></euElectionLink>.",values:{euElectionLink:()=>r.jsx("a",{target:"_blank",href:"https://elections.europa.eu",rel:"noreferrer",className:"underline hover:no-underline",children:"elections.europa.eu"})}});break;case"generic_elections_policy":e=r.jsx(j,{id:"Disclaimer.GenericElections",defaultMessage:"Always verify information about voting with your local election authority."});break;default:e=r.jsx(Bs,{className:"text-sm",componentOverrides:{a:n=>{const i=n,{node:s,children:o}=i,a=we(i,["node","children"]);return r.jsx("a",U(w({},a),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:o}))}},children:t})}return r.jsx(Qb,{className:"w-fit self-start",children:e})};function che({message:t}){var e,n;return(n=(e=t==null?void 0:t.clientMetadata)==null?void 0:e.disclaimers)!=null&&n.length?r.jsx("div",{className:"flex flex-col gap-2",children:t.clientMetadata.disclaimers.map(s=>r.jsx(lhe,{disclaimerContent:s},s))}):null}const dhe=t=>{var e;return{type:"table",file_id:(e=t.id)!=null?e:"",title:uG(t),file_name:t.name,context_connector_info:t.context_connector_info}};function uhe(){return Q2(ss.DataAnalysisV2)}const fhe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),mhe=R(()=>P(()=>import("./coua0c0g0n9zwyhc.js"),__vite__mapDeps([272,1])),{loading:t=>F(t)});function ER(n){var s=n,{contextConnectorSourceUrl:t}=s,e=we(s,["contextConnectorSourceUrl"]);const o=ne(),[a,i]=_.useState({width:0,height:0}),l=a.width/a.height,c=a.width>0&&a.height>0,d=_.useMemo(()=>{if(t!==void 0){let u=new URL(t);return u.protocol!=="https:"&&(u=void 0),u==null?void 0:u.toString()}},[t]);return _.useEffect(()=>{if(!e.src)throw new Error("ExpandableImage requires a src");const u=new Image;u.onload=()=>{i({width:u.naturalWidth,height:u.naturalHeight})},u.onerror=()=>{},u.src=e.src},[e.src]),r.jsxs(Tl,{children:[r.jsx(t3,{className:e.className,disabled:!c,children:e.children}),r.jsx(Ml,{children:r.jsxs(jf,{className:"radix-state-open:animate-show fixed inset-0 z-[100] flex items-center justify-center overflow-hidden bg-black/90 dark:bg-black/80",children:[r.jsx(vd,{asChild:!0,children:r.jsx("button",{className:"absolute end-4 top-4",children:r.jsx(fhe,{className:"h-5 w-5 text-gray-100"})})}),r.jsxs(yd,{onEscapeKeyDown:u=>u.stopPropagation(),className:"radix-state-open:animate-contentShow shadow-xl focus:outline-hidden",children:[r.jsx("div",{className:z("relative max-h-[85vh] max-w-[90vw]"),style:{aspectRatio:l},children:r.jsx("img",{src:e.src,alt:e.alt,className:"h-full w-full object-contain"})}),d&&r.jsx("div",{className:"absolute end-14 top-4",children:r.jsx(pt,{label:o.formatMessage(ghe.openOriginal),children:r.jsx("a",{href:d,target:"_blank",rel:"noreferrer",children:r.jsx(mhe,{className:"icon rotate-180 text-gray-100"})})})})]})]})})]})}const ghe=Se({openOriginal:{id:"ExpandableImage.openOriginal",defaultMessage:"Open original image"}}),phe=R(()=>P(()=>import("./dqpw6s7v5t7v73q3.js"),__vite__mapDeps([273,1])),{loading:t=>F(t)}),hhe=R(()=>P(()=>import("./fcdc9s0m5jq003zg.js"),__vite__mapDeps([274,1])),{loading:t=>F(t)}),_he=R(()=>P(()=>import("./diw1uvps7iz4sxyn.js"),__vite__mapDeps([275,1])),{loading:t=>F(t)}),xhe=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),DS=R(()=>P(()=>import("./fx4tif7av4x5mmpn.js"),__vite__mapDeps([245,1])),{loading:t=>F(t)});function TR({fileName:t,icon:e,loadingPercentage:n,contextConnectorInfo:s,customFileDescription:o,fileNameClass:a}){var m,g;const i=ne(),l=n!==void 0&&n<100,c=tf(t),d=(m=s==null?void 0:s.syntheticExtension)!=null?m:null;function u(p){if(Nl(p))return i.formatMessage(ic.fileDescImage);switch(c){case"py":return"Python";case"js":case"jsx":return"JavaScript";case"ts":case"tsx":return"TypeScript";case"pdf":return"PDF";case"doc":case"docx":case"txt":return i.formatMessage(ic.fileDescDocument);case"zip":return i.formatMessage(ic.fileDescZip);case"xls":case"xlsx":case"csv":return i.formatMessage(ic.fileDescSpreadsheet);case"ppt":case"pptx":case"key":return i.formatMessage(ic.fileDescPresentation);default:return i.formatMessage(ic.fileDescFile)}}const f=o!=null?o:s!=null&&s.contextConnector?r.jsx(fG,{contextConnector:s.contextConnector,extension:(g=d!=null?d:c)!=null?g:null}):u(t);return r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e!=null&&e!==!1?r.jsxs("div",{className:"border-token-border-heavy relative h-10 w-10 shrink-0 overflow-hidden rounded-lg border",children:[e,l&&r.jsx(FS,{percentage:n,blurBackground:!0})]}):r.jsx("div",{className:"relative h-10 w-10 shrink-0 overflow-hidden rounded-lg",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:z("inset-0",MR),style:{backgroundColor:AR(t,s==null?void 0:s.contextConnector)}}),r.jsx(FS,{percentage:s?null:n})]}):r.jsx(Jb,{filename:t,contextConnectorInfo:s})}),r.jsxs("div",{className:"overflow-hidden",children:[r.jsx("div",{className:z("truncate",a!=null?a:"font-semibold"),children:mG(t,d)}),r.jsx("div",{className:"text-token-text-secondary truncate",children:f})]})]})}function FS({percentage:t,blurBackground:e=!1}){return r.jsx("div",{className:z("absolute inset-0 flex items-center justify-center text-white",e&&"bg-black/5 backdrop-blur-xs"),children:t?r.jsx(ld,{percentage:t,className:"h-6 w-6"}):r.jsx(ws,{className:"text-token-text-secondary h-6 w-6"})})}const MR="h-10 w-10 shrink-0";function Jb({filename:t,contextConnectorInfo:e,className:n=MR,glyphClassName:s="h-5 w-5"}){var l,c,d;if(e)return r.jsx("div",{className:z("flex items-center justify-center rounded-lg",n),style:{backgroundColor:AR(t,e.contextConnector)},children:r.jsx(gG,{contextConnector:e.contextConnector,extension:(c=(l=e.syntheticExtension)!=null?l:tf(t))!=null?c:null,className:z(s,"text-white")})});const o=(d=tf(t))!=null?d:null,{BgColor:a,Icon:i}=IR(o);return r.jsx("div",{className:z("flex items-center justify-center rounded-lg",n),style:{backgroundColor:a},children:r.jsx(i,{className:z(s,"text-white")})})}function AR(t,e){var s;if(e)return qs.gray.solid[50];const n=(s=tf(t))!=null?s:null;return IR(n).BgColor}function IR(t){const e={purple:qs.purple[400],blue:qs.blue[400],green:qs.green[400],red:qs.red[400],gray:qs.gray.solid[400]},n=(t!=null?t:"").toLowerCase();return n==="zip"?{BgColor:e.purple,Icon:phe}:n==="pdf"?{BgColor:e.red,Icon:DS}:n==="xls"||n==="xlsx"||n==="csv"?{BgColor:e.green,Icon:hhe}:n==="doc"||n==="docx"||n==="txt"||n==="md"||n==="markdown"?{BgColor:e.blue,Icon:xhe}:n==="png"||n==="jpg"||n==="jpeg"||n==="gif"||n==="webp"?{BgColor:e.gray,Icon:_he}:{BgColor:e.gray,Icon:DS}}const ic=Se({fileDescDocument:{id:"FileDataView.fileDescDocument",defaultMessage:"Document"},fileDescZip:{id:"FileDataView.fileDescZip",defaultMessage:"Zip Archive"},fileDescSpreadsheet:{id:"FileDataView.fileDescSpreadsheet",defaultMessage:"Spreadsheet"},fileDescPresentation:{id:"FileDataView.fileDescPresentation",defaultMessage:"Presentation"},fileDescImage:{id:"FileDataView.fileDescImage",defaultMessage:"Image"},fileDescFile:{id:"FileDataView.fileDescFile",defaultMessage:"File"}}),yhe=R(()=>P(()=>import("./ei2rr3u86wwo8xvm.js"),__vite__mapDeps([52,1])),{loading:t=>F(t)}),vhe=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)}),bhe=R(()=>P(()=>import("./diw1uvps7iz4sxyn.js"),__vite__mapDeps([275,1])),{loading:t=>F(t)}),Che=R(()=>P(()=>import("./ng0udfnvcwxxjj55.js"),__vite__mapDeps([164,1])),{loading:t=>F(t)}),She=R(()=>P(()=>import("./k1cl8bhg0vqi0zvs.js"),__vite__mapDeps([276,1])),{loading:t=>F(t)}),whe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),khe=R(()=>P(()=>Promise.resolve().then(()=>J5),void 0),{loading:t=>F(t)}),Ehe=R(()=>P(()=>import("./hdyydyw9h51echxp.js"),__vite__mapDeps([277,1,10,11])).then(t=>t.FilePreviewModal));function ci(t){return typeof window>"u"?!1:typeof t!="string"}function The({downloadLink:t}){const e=_.useCallback(()=>{var s;const n=document.createElement("a");n.href=t,n.setAttribute("download",(s=t.split("/").pop())!=null?s:"downloaded_file"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},[t]);return r.jsx("button",{onClick:e,children:r.jsx(She,{className:"icon-sm m-1.5"})})}function BS({onClick:t,ariaLabel:e,large:n=!1,children:s}){return r.jsx("button",{onClick:t,"aria-label":e,className:z("transition-colors","flex h-4 w-4 items-center justify-center rounded-full","border-[rgba(0,0,0,0.1)] bg-black text-white","dark:border-[rgba(255,255,255,0.1)] dark:bg-white dark:text-black",n&&"h-6 w-6"),children:s})}function jR({onRemoveFileClick:t,onImageEditClick:e,useLargeImageThumbnailStyle:n,file:s,fileId:o,gizmoId:a,loadingPercentage:i,contextConnectorInfo:l,width:c="normal",alwaysShowData:d=!1,showDownloadButton:u=!1,downloadLink:f="",borderRadius:m="xl",className:g,isUserTurn:p=!1,clientThreadId:h}){const x=V(),v=ne(),y=i!==void 0&&i<100,b=ci(s)?s.name:s,C=ci(s)&&(s==null?void 0:s.type.startsWith("image/"))||Nl(b)&&o!=null,S=C&&r.jsx(Ahe,{file:s,fileId:o,gizmoId:a,contextConnectorInfo:l}),E=_.useContext($h),k=(E==null?void 0:E.serverSharedThreadId)&&p,T=pG(),M=C||l==null?void 0:l.sourceUrl,A=!(l!=null&&l.sourceUrl)&&!S?b:void 0,N=ci(s)&&(s==null?void 0:s.type)==="text/plain"&&!d&&!l&&d8(x),L=_.useCallback(async()=>{if(!y&&o)if(tf(b)==="pdf")dt(x,Ehe,{gizmoId:a,fileId:o,fileName:b});else{const H=await Ah(o,a,!1,h!=null?jt(h):void 0,!1);H.status===Ih.Success?window.open(H.download_url,"_blank"):Fe.addError("Failed to get download link for file: ".concat(b))}},[b,x,o,h,a,y]),O=Ihe({file:s,isExpandableTextFile:N}),D=!t;if(k){if(!C||T()){const H=C?r.jsx(bhe,{className:"icon-sm"}):r.jsx(Che,{className:"icon-sm"}),G=C?v.formatMessage(Mu.uploadedImage):v.formatMessage(Mu.uploadedFile);return r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-2",children:[H,r.jsx("span",{children:G})]})}if(C)return null}const $=r.jsxs("div",{className:z("p-2",c==="wide"?"w-80":"w-60"),children:[r.jsx(TR,{fileName:b,icon:S,loadingPercentage:i,contextConnectorInfo:l}),u&&f!==""&&r.jsx("div",{className:"absolute end-1 top-1",children:r.jsx(The,{downloadLink:f})})]});return r.jsxs("div",{className:"group text-token-text-primary relative inline-block text-sm",children:[r.jsx(Phe,{showTooltip:D,sourceUrl:M,className:z("border-token-border-default bg-primary relative overflow-hidden border",m==="xl"&&"rounded-xl",m==="2xl"&&"rounded-2xl",g),tooltipContent:A,onClick:L,children:C&&!d?r.jsxs("div",{className:z("h-14.5 w-14.5",n&&"tall:h-36 tall:w-36"),children:[S,y&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:r.jsx(ld,{percentage:i,className:"h-6 w-6"})})]}):N&&(O!=null&&O.length)?r.jsx(jhe,{trigger:$,content:O}):$}),r.jsxs("div",{className:"absolute end-1.5 top-1.5 inline-flex gap-1",children:[n&&e&&r.jsx(BS,{onClick:H=>{H.stopPropagation(),H.preventDefault(),e()},ariaLabel:v.formatMessage(Mu.editImage),large:n,children:r.jsx(yhe,{"aria-label":"",className:"icon-sm"})}),t!=null&&r.jsx(BS,{onClick:t,ariaLabel:v.formatMessage(Mu.removeFile),large:n,children:r.jsx(khe,{"aria-label":"",className:"icon-sm"})})]})]})}var iE;const NR=ft.span(iE||(iE=ct(["flex items-center h-full w-full justify-center bg-gray-500 dark:bg-gray-700 bg-cover bg-center text-white"])));function Mhe(){return r.jsx(NR,{})}function Ahe({file:t,fileId:e,gizmoId:n,contextConnectorInfo:s}){const o=ne(),a=ci(t)?t.name:t,i=PR(ci(t)?t:null,a,e,n,s);return i==null?r.jsx(Mhe,{}):r.jsx(ER,{src:i,alt:o.formatMessage(Mu.userUploadedImage),contextConnectorSourceUrl:s==null?void 0:s.sourceUrl,className:"h-full w-full",children:r.jsx(NR,{style:{backgroundImage:"url(".concat(i,")")}})})}function Ihe({file:t,isExpandableTextFile:e}){const[n,s]=_.useState(void 0);return _.useEffect(()=>{if(e&&ci(t)){const o=new FileReader;o.addEventListener("load",()=>{const a=o.result;s(typeof a=="string"?a:void 0)}),o.readAsText(t)}},[e,t]),n}function jhe({trigger:t,content:e}){return r.jsxs(Tl,{children:[r.jsx(t3,{className:"h-full w-full text-start",children:t}),r.jsx(Ml,{children:r.jsxs(jf,{className:"radix-state-open:animate-show fixed inset-0 flex items-center justify-center overflow-hidden bg-black/90 dark:bg-black/80",children:[r.jsx(vd,{asChild:!0,children:r.jsx("button",{className:"absolute end-4 top-4",children:r.jsx(whe,{className:"h-5 w-5 text-gray-100"})})}),r.jsx(yd,{className:"radix-state-open:animate-contentShow shadow-xl focus:outline-hidden",children:r.jsx("div",{className:z("relative max-h-[85vh] max-w-[90vw] overflow-scroll bg-white p-10 dark:bg-gray-800"),children:r.jsx(Bs,{children:e})})})]})})]})}const lg=new Map,Nhe=100;function PR(t,e,n,s,o,a=!1){const[i,l]=_.useState(void 0),c=V(),d=Rn(c).flags,u=d==null?void 0:d.includes(ep.NoAuthEnableFileUploads);return _.useEffect(()=>{if(!a&&o&&n!=null)US({fileId:n,gizmoId:s,setUri:l});else if(!o&&(t!=null&&t.type.startsWith("image/")))if(u){const f=URL.createObjectURL(t);return l(f),()=>{URL.revokeObjectURL(f)}}else{const f=new FileReader;f.addEventListener("load",()=>{const m=f.result;l(typeof m=="string"?m:void 0)}),f.readAsDataURL(t)}else!a&&e&&Nl(e)&&n!=null?US({fileId:n,gizmoId:s,setUri:l}):l(void 0)},[t,e,n,s,o,a,u]),i}async function US({fileId:t,gizmoId:e,setUri:n}){try{const s=lg.get(t);if(s){n(s);return}const o=await Ah(t,e);o.status===Ih.Success?(lg.size>Nhe&&lg.clear(),lg.set(t,o.download_url),n(o.download_url)):Fe.addError("Error fetching URL for file ".concat(t,": ").concat(o.status))}catch(s){Fe.addError(new Error("Error fetching URL for file ".concat(t,")"),{cause:s}))}}const Mu=Se({removeFile:{id:"FileTile.removeFile",defaultMessage:"Remove file"},editImage:{id:"FileTile.editImage",defaultMessage:"Edit image"},userUploadedImage:{id:"FileTile.userUploadedImage",defaultMessage:"User uploaded image"},uploadedImage:{id:"FileTile.uploadedImage",defaultMessage:"Uploaded an image"},uploadedFile:{id:"FileTile.uploadedFile",defaultMessage:"Uploaded a file"}});function Phe({showTooltip:t,sourceUrl:e,children:n,className:s,onClick:o,tooltipContent:a}){var d;const i=re(jh);if(!e&&!a)return r.jsx("div",{className:s,children:n});const l=r.jsx("a",{href:e,target:"_blank",rel:"noreferrer",onClick:o,className:"cursor-pointer",children:r.jsx("div",{className:s,children:n})});if(!t||!i)return l;const c=(d=a!=null?a:e)!=null?d:"";return r.jsx(pt,{wide:!0,interactive:!0,label:r.jsxs("a",{href:e,target:"_blank",className:"flex w-full items-center gap-2",rel:"noreferrer",children:[r.jsx("p",{className:"line-clamp-1 flex-1 text-ellipsis",children:Rhe(c)}),e&&r.jsx(vhe,{className:"icon-sm"})]}),side:"top",children:l})}function Rhe(t){return t.split("").join("")}const Lhe=_.createContext({isEmbeddedInFocusedView:!1});function T1(){return _.useContext(Lhe).isEmbeddedInFocusedView}const Ohe="GPT-4o with scheduled tasks";function RR({featureType:t,isUserTurn:e=!1,clientThreadId:n}){const s=V(),o=xt(s,n),a=ve(s,"3612584454"),i=Dhe(),l=ve(s,"891514942"),c=re(()=>yn(o).id),d=!Fhe({featureType:t,currentModelId:c,conversation:o});if(!(a&&i||l&&d))return null;const m=Bhe({featureType:t,unsupportedMessageReason:i?"rateLimit":"modelPicker",currentModelId:c});return r.jsx("div",{className:"flex ".concat(e?"justify-end":"justify-start"),children:m})}function Dhe(){var a;const t=V(),e=st(t),n=(a=e==null?void 0:e.isFree())!=null?a:!1,o=Th().some(i=>i.model_slug==="gpt-4o");return n&&o}function Fhe({featureType:t,currentModelId:e,conversation:n}){const s=re(()=>ea(n)),o=V(),a=st(o);if(a==null?void 0:a.isFree())return!0;{const l=s==null?void 0:s.categories.find(d=>d.defaultModel===e);return l?!!(l==null?void 0:l.supportedFeatures.includes(t)):!0}}function Bhe({featureType:t,unsupportedMessageReason:e,currentModelId:n=""}){const s=n===hG?Ohe:n,o=ne();let a=null;switch(e){case"rateLimit":switch(t){case ds.ATTACHMENT:a=o.formatMessage(w0.file);break;case ds.IMAGE:a=o.formatMessage(w0.image);break;case ds.CANVAS_SUPPORTED:a=o.formatMessage(w0.canvas);break;default:return null}break;case"modelPicker":switch(t){case ds.ATTACHMENT:a=o.formatMessage(k0.file,{modelDisplayName:s});break;case ds.IMAGE:a=o.formatMessage(k0.image,{modelDisplayName:s});break;case ds.CANVAS_SUPPORTED:a=o.formatMessage(k0.canvas,{modelDisplayName:s});break;default:return null}break}return r.jsx("span",{className:"text-opacity-80 text-xs text-yellow-500",children:a})}const w0=Se({canvas:{id:"featureUnsupportedWarning.canvas",defaultMessage:"Document editing temporarily unavailable"},file:{id:"featureUnsupportedWarning.file",defaultMessage:"File analysis temporarily unavailable"},image:{id:"featureUnsupportedWarning.image",defaultMessage:"Image analysis temporarily unavailable"}}),k0=Se({canvas:{id:"modelPickerUnsupportedWarning.canvas",defaultMessage:"{modelDisplayName} cannot edit documents"},file:{id:"modelPickerUnsupportedWarning.file",defaultMessage:"{modelDisplayName} cannot analyze files"},image:{id:"modelPickerUnsupportedWarning.image",defaultMessage:"{modelDisplayName} cannot analyze images"}}),Uhe=R(()=>P(()=>import("./hm16fnzstqf70eit.js").then(t=>t.A),__vite__mapDeps([278,1,10,11,113,114,279,226,46,280,281])).then(t=>t.default));var lE;const $he=ft.div(lE||(lE=ct(["flex gap-2 flex-wrap mt-1 max-w-[80%] justify-end"])));var cE;const Vhe=ft.div(cE||(cE=ct(["flex flex-col gap-2"]))),CZe=({parts:t,attachments:e,isUserTurn:n,conversation:s})=>{const o=Eo(),a=uhe(),i=mr.getImageAssetPointersFromParts(t),l=new Set(i.map(g=>Co(g.asset_pointer))),d=T1()||o,u=(e!=null?e:[]).filter(g=>_G(g.name)),f=(e!=null?e:[]).filter(g=>g.id==null||l.has(g.id)?!1:a?!u.includes(g):!0);return(a?(f.length>0||u.length>0)&&n:f.length>0&&n)?r.jsxs(r.Fragment,{children:[r.jsx($he,{children:f.map(g=>r.jsx(jR,{file:g.name,fileId:g.id,contextConnectorInfo:xG(g.context_connector_info),width:o?"normal":"wide",alwaysShowData:!0,isUserTurn:n,clientThreadId:s.id},g.id))}),r.jsx(RR,{featureType:ds.ATTACHMENT,isUserTurn:n,clientThreadId:s.id}),a&&r.jsx(Vhe,{className:z(!d&&!0&&"w-[80%]"),children:u.map(g=>r.jsx(Uhe,{clientThreadId:s.id,visualization:dhe(g)},g.id))})]}):null},Hhe=t=>{"use forget";var x;const e=W.c(19);let n,s,o,a,i;e[0]!==t?(x=t,{label:s,icon:n,as:a,isUserTurn:i}=x,o=we(x,["label","icon","as","isUserTurn"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5]);const l=a===void 0?"div":a,c=i===void 0?!0:i,d=l,u=l==="button"&&"hover:text-token-text-primary",f=c?"mt-1 justify-end":"mt-2";let m;e[6]!==u||e[7]!==f?(m=z("text-token-text-tertiary mx-2 mb-1 flex items-start gap-1.5 text-sm font-normal focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-current",u,f),e[6]=u,e[7]=f,e[8]=m):m=e[8];let g;e[9]!==n?(g=r.jsx("span",{"aria-hidden":"true",className:"pointer-events-none",children:n}),e[9]=n,e[10]=g):g=e[10];let p;e[11]!==s?(p=r.jsx("p",{className:"line-clamp-3",children:s}),e[11]=s,e[12]=p):p=e[12];let h;return e[13]!==d||e[14]!==o||e[15]!==m||e[16]!==g||e[17]!==p?(h=r.jsxs(d,U(w({className:m},o),{children:[g,p]})),e[13]=d,e[14]=o,e[15]=m,e[16]=g,e[17]=p,e[18]=h):h=e[18],h},Ghe=u8(()=>({images:new Set})),Whe=t=>R3(Ghe,t);function zhe(){return Whe(t=>t.images)}function SZe({messages:t}){const e=OX(t),n=zhe();return e.length===0?null:r.jsx("div",{className:z({"mb-2":!0,"grid grid-flow-col gap-3":e.length>1,"w-1/3":e.length===1}),children:e.filter(({contentUrl:s})=>n.has(s)).map((s,o)=>r.jsx("a",{href:s.hostPageUrl,target:"_blank",rel:"noreferrer",children:r.jsx("img",{src:s.contentUrl,alt:s.name,className:"aspect-square rounded-xl object-cover"})},o))})}const qhe="_slideUp_1kuxv_21",wZe={slideUp:qhe};function Hl({axis:t,debounce:e,initialSize:n=!0,onChange:s,target:o}){if(!o)return;let a=new AbortController,i=null,l=null,c=n;const d=new ResizeObserver(f=>{f.forEach(m=>{const{width:g,height:p}=Yhe(m);let h=!1;if(t==="width"){const x=(c||i!=null)&&i!==g;i=g,x&&(h=!0)}else if(t==="height"){const x=(c||l!=null)&&l!==p;l=p,x&&(h=!0)}else if(t==="both"){const x=(c||i!=null)&&i!==g,v=(c||l!=null)&&l!==p;i=g,l=p,(x||v)&&(h=!0)}if(c=!1,h)if(!e)s({width:g,height:p,previousWidth:i,previousHeight:l},m);else{a.abort(),a=new AbortController;const x=a.signal;requestAnimationFrame(()=>{x.aborted||s({width:g,height:p,previousWidth:i,previousHeight:l},m)})}})});function u(){try{d.disconnect()}catch(f){}}return d.observe(o),u}function Yhe(t){let e,n;if(t.borderBoxSize){const s=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=s.inlineSize,n=s.blockSize}else e=t.contentRect.width,n=t.contentRect.height;return{width:e,height:n}}function kZe(t){return e=>Hl(U(w({},t),{target:e}))}function EZe({containsImagesOrAttachments:t,isMaxWidthMessage:e=!1,children:n}){const s=_.useRef(!1);return r.jsx("div",{className:z("user-message-bubble-color relative rounded-[18px] px-4 py-1.5 data-[multiline]:py-3",t&&"rounded-se-lg",e?"w-full":"max-w-[var(--user-chat-width,70%)]"),ref:o=>Hl({axis:"height",target:o,onChange:({height:a})=>{if(o){const i=parseFloat(getComputedStyle(document.documentElement).fontSize),l=2*(s.current?12:6);s.current=a>1.5*i+l,or(o,"data-multiline",s.current)}}}),children:n})}function Zhe(){return r.jsx(Xe.div,{className:"absolute flex h-8 w-3 origin-center items-center justify-center",initial:{scale:1,opacity:1},animate:{scale:0,opacity:0},transition:{ease:"easeInOut",duration:.2},children:r.jsx("div",{className:"bg-token-text-primary h-3 w-3 rounded-full"})})}function Khe(t){return rt(Qhe(t))}function Qhe(t){return Xn({enabled:t!=null,queryKey:["imageData",t],queryFn:()=>new Promise((e,n)=>{const s=new Image;s.onload=()=>{e(s)},s.onerror=n,s.src=t})})}function ks(t){"use forget";const e=W.c(14),{url:n,size:s,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,applySizeToImg:d,onLoad:u,onError:f}=t,m=s===void 0?16:s,g=d===void 0?!0:d;let p;e[0]!==m||e[1]!==n?(p=o1e(n,m),e[0]=m,e[1]=n,e[2]=p):p=e[2];const h=p;if(h==null)return a!=null?a:null;let x;return e[3]!==g||e[4]!==i||e[5]!==l||e[6]!==a||e[7]!==h||e[8]!==o||e[9]!==f||e[10]!==u||e[11]!==c||e[12]!==m?(x=o!=null?r.jsx(Jhe,{faviconUrl:h,size:m,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,onLoad:u,onError:f}):r.jsx(LR,{faviconUrl:h,size:g?m:void 0,className:i,onLoad:u,onError:f}),e[3]=g,e[4]=i,e[5]=l,e[6]=a,e[7]=h,e[8]=o,e[9]=f,e[10]=u,e[11]=c,e[12]=m,e[13]=x):x=e[13],x}function Jhe(t){"use forget";const e=W.c(13),{faviconUrl:n,size:s,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,onLoad:d,onError:u}=t,{data:f,isLoading:m}=Khe(n),g=f&&Math.min(f.width,f.height);if(!m&&(g==null||g<o))return a!=null?a:null;let p;e[0]!==l?(p=z("relative inline-block shrink-0",l),e[0]=l,e[1]=p):p=e[1];let h;e[2]!==i||e[3]!==n||e[4]!==m||e[5]!==u||e[6]!==d||e[7]!==c||e[8]!==s?(h=m?c?r.jsx(Xhe,{className:z(i,"duration-200 motion-safe:transition-opacity",!m&&"pointer-events-none opacity-0")}):r.jsx("div",{className:i}):r.jsx(LR,{faviconUrl:n,size:s,className:z(i,"duration-200 motion-safe:transition-opacity",m?"pointer-events-none opacity-0":"opacity-100"),onLoad:d,onError:u}),e[2]=i,e[3]=n,e[4]=m,e[5]=u,e[6]=d,e[7]=c,e[8]=s,e[9]=h):h=e[9];let x;return e[10]!==p||e[11]!==h?(x=r.jsx("div",{className:p,children:h}),e[10]=p,e[11]=h,e[12]=x):x=e[12],x}function LR(t){"use forget";const e=W.c(7),{faviconUrl:n,size:s,className:o,onLoad:a,onError:i}=t,l=s!=null?s:"auto",c=s!=null?s:"auto";let d;return e[0]!==o||e[1]!==n||e[2]!==i||e[3]!==a||e[4]!==l||e[5]!==c?(d=r.jsx("img",{src:n,alt:"",width:l,height:c,className:o,onLoad:a,onError:i}),e[0]=o,e[1]=n,e[2]=i,e[3]=a,e[4]=l,e[5]=c,e[6]=d):d=e[6],d}function Xhe({className:t,children:e}){return r.jsx("div",{"aria-busy":!0,className:z("bg-token-bg-tertiary flex animate-pulse items-center justify-center rounded-full",t),children:e})}const e1e="http://files.openai.com",t1e="https://openai.com",n1e="https://images.openai.com";function s1e(t){const e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")return e1e;const n=e.origin;return n===n1e?t1e:n}function o1e(t,e){if(!t)return null;try{const n=s1e(t);return"https://www.google.com/s2/favicons?domain=".concat(n,"&sz=").concat(e)}catch(n){return Fe.addAction("Invalid favicon url",{error:n,url:t}),null}}const Dx={favicons:[]};function a1e(t,e){const n=new Set,s=[];for(const o of[...t,...e])n.has(o.url)||(s.push(o),n.add(o.url));return s}const r1e=t=>({entries:{},updateFromEvent:(e,n)=>t(s=>{var i,l;const o=(i=s.entries[e])!=null?i:Dx,a=U(w({},o),{favicons:a1e(o.favicons,(l=n.data.favicons)!=null?l:[])});return{entries:U(w({},s.entries),{[e]:a})}})}),$S=Wy()(r1e,Sl);function i1e(t){const e=$S(s=>{var o,a;return t==null?Dx.favicons:(a=(o=s.entries[t])==null?void 0:o.favicons)!=null?a:Dx.favicons}),n=_.useCallback(({ctx:s,profiler:o})=>{if(!t||t.trim().length===0||!Cr(s).checkGate("948657827",{disableExposureLog:!0}))return;(async()=>{var u,f,m;o==null||o.logTimingOnce("fetch_favicons_stream_called");const l=lp("".concat(Kc,"/favicons"),{ctx:s,method:"POST",headers:w({},Qh()),body:{query:t}});let c=!1,d=!1;try{for(var g=Io(l),p,h,x;p=!(h=await g.next()).done;p=!1){const v=h.value;d||(d=!0,o==null||o.logTimingOnce("fetch_favicons_stream_first_event"));const y=v;y.event==="favicons"&&($S.getState().updateFromEvent(t,{event:"favicons",data:{favicons:(u=y.data.favicons)!=null?u:[]}}),!c&&((m=(f=y.data.favicons)==null?void 0:f.length)!=null?m:0)>0&&(c=!0,o==null||o.logTimingOnce("fetch_favicons_first_link_fetched_client")))}}catch(h){x=[h]}finally{try{p&&(h=g.return)&&await h.call(g)}finally{if(x)throw x[0]}}})().catch(()=>{})},[t]);return{favicons:e,load:n}}const l1e=_.createContext(!1);var OR=(t=>(t.Sources="sources",t.Images="images",t))(OR||{}),Xb=(t=>(t.Links="links",t.Citations="citations",t.SearchResults="search_results",t))(Xb||{}),E0,VS;function DR(){if(VS)return E0;VS=1;function t(e,n,s){var o=-1,a=e.length;n<0&&(n=-n>a?0:a+n),s=s>a?a:s,s<0&&(s+=a),a=n>s?0:s-n>>>0,n>>>=0;for(var i=Array(a);++o<a;)i[o]=e[o+n];return i}return E0=t,E0}var T0,HS;function c1e(){if(HS)return T0;HS=1;var t=DR(),e=N3(),n=f8(),s=Math.ceil,o=Math.max;function a(i,l,c){(c?e(i,l,c):l===void 0)?l=1:l=o(n(l),0);var d=i==null?0:i.length;if(!d||l<1)return[];for(var u=0,f=0,m=Array(s(d/l));u<d;)m[f++]=t(i,u,u+=l);return m}return T0=a,T0}var d1e=c1e();const u1e=Zn(d1e),f1e=R(()=>P(()=>import("./dwgk7r4s1fwn35jq.js"),__vite__mapDeps([142,1])),{loading:t=>F(t)}),m1e=R(()=>P(()=>import("./i0w6h8cy9aqse20k.js"),__vite__mapDeps([143,1])),{loading:t=>F(t)}),GS=3;function g1e({navigation:t,trackContentReferenceEvent:e}){const[n,s]=_.useState(!1),[o,a]=_.useState(0),i=t.domains.filter(m=>m.url);_.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:i.map(m=>m.url).join(",")})},[i]);const l=Cd(),c=h1e(i.length,!l),d=n?u1e(i,c):[i.slice(0,GS)];function u(){return i.length<=GS?null:o===0&&!n?r.jsx(M0,{onClick:()=>s(!0),className:"shrink-0 text-sm whitespace-nowrap",children:r.jsx(j,{id:"B5xwY8",defaultMessage:"More links"})}):r.jsx(M0,{onClick:()=>a(o-1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o===0,children:r.jsx(j,{id:"Q0o6pZ",defaultMessage:"{icon} Previous",values:{icon:r.jsx(m1e,{className:"icon-sm -ms-1 -me-1"})}})})}function f(){return n?r.jsx(M0,{onClick:()=>a(o+1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o>=d.length-1,children:r.jsx(j,{id:"N4c5Xd",defaultMessage:"Next {icon}",values:{icon:r.jsx(f1e,{className:"icon-sm -ms-1 -me-1"})}})}):null}return r.jsxs("div",{className:"not-prose mb-3",children:[r.jsx(Xe.div,{initial:!1,animate:{maxHeight:n?1e3:250,opacity:1},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:r.jsx("div",{className:"flex transition-transform",style:{transform:"translateX(-".concat(o*100,"%)")},children:d.map((m,g)=>r.jsx("div",{className:"flex flex-[0_0_100%] shrink-0 flex-col gap-6",children:m.map((p,h)=>r.jsx(p1e,{navigationDomain:p,trackContentReferenceEvent:e,analyticsMetadata:{section_index:h}},p.url))},g))})}),r.jsx("div",{className:"mt-6 flex flex-col gap-6",children:r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-3",children:[u(),r.jsx("div",{className:"bg-token-bg-tertiary h-[1px] w-full flex-1"}),f()]})})]})}function p1e({navigationDomain:t,trackContentReferenceEvent:e,analyticsMetadata:n}){var s;return _.useEffect(()=>{e("link_action",null,"navigation",{url:t.url,title:t.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:n.section_index})},[]),r.jsxs(to,{className:"flex flex-col hover:underline",href:t.url,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ks,{url:t.url,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),r.jsx("div",{className:"text-token-text-secondary text-xs",children:(s=t.attribution)!=null?s:t.subtitle})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-token-text-primary text-sm",children:t.title}),t.snippet&&r.jsx("div",{className:"text-token-text-secondary line-clamp-1 w-full text-sm",children:t.snippet})]})]})}function h1e(t,e){const n=e?[5,6]:[6,7,8];let s=n[0],o=-1;for(let a=0;a<n.length;a++){const i=n[a],l=t%i;if(l===0)return i;l>o&&(o=l,s=i)}return s}var dE;const M0=ft.button(dE||(dE=ct(["\n    shrink-0\n    text-sm\n    whitespace-nowrap\n    flex\n    items-center\n    gap-1\n    text-token-text-secondary\n    hover:text-token-text-primary\n    disabled:opacity-50\n    disabled:hover:text-token-text-secondary\n  "]))),_1e=_.createContext(null),A0=3,x1e=3;function y1e({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n}){const s=V(),o=ve(s,"4111922784"),a=_.useContext(_1e)==="user-query-with-navlink",i=_.useContext(l1e);return r.jsx("div",{className:z({hidden:i&&a}),children:o?r.jsx(g1e,{navigation:t,trackContentReferenceEvent:n}):r.jsx(v1e,{navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n})})}function v1e({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n}){const s=t.domains.filter(i=>i.url);_.useEffect(()=>{n("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:s.map(i=>i.url).join(",")})},[s]);const o=s.slice(0,A0),a=s.slice(A0,A0+x1e);return r.jsxs("div",{className:"not-prose mb-3 flex gap-2",children:[o.map((i,l)=>r.jsx(C1e,{isPrimaryDomain:l===0,isFistLineDomain:!0,navigationDomain:i,trackContentReferenceEvent:n,analyticsMetadata:{section_index:l}},i.url)),a.length>0&&r.jsx(b1e,{onShowSearchResults:e,trackContentReferenceEvent:n,moreDomains:a})]})}const b1e=({onShowSearchResults:t,trackContentReferenceEvent:e,moreDomains:n})=>r.jsx(FR,{component:"div",className:"group flex w-28 cursor-pointer",onClick:()=>{e("Search Content Reference Clicked","search_content_reference_clicked","navigation",{sidebar:"sidebar"}),t(OR.Sources,Xb.Links)},children:r.jsxs("div",{className:"flex min-w-0 flex-col",children:[r.jsx("div",{className:"flex items-center",children:n.map((s,o)=>r.jsx("div",{style:{zIndex:n.length-o},className:"ms-[-6px] first:ms-0",children:r.jsx("div",{className:z("flex h-4 w-4 items-center overflow-hidden rounded-full","border-token-bg-primary bg-token-bg-primary group-hover:border-token-bg-tertiary border-2"),children:r.jsx(ks,{url:s.url,size:32,minSize:20,className:"icon-xs rounded-full",showLoadingAnimation:!0})},s.url)},s.url))}),r.jsx("div",{className:"text-token-text-primary flex text-sm font-semibold",children:r.jsx("span",{className:"truncate",children:r.jsx(j,{id:"B5xwY8",defaultMessage:"More links"})})})]})}),C1e=({isPrimaryDomain:t,isFistLineDomain:e,navigationDomain:n,trackContentReferenceEvent:s,analyticsMetadata:o})=>{var a;return _.useEffect(()=>{s("link_action",null,"navigation",{url:n.url,title:n.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:o.section_index})},[]),r.jsx("div",{className:"min-w-0 flex-1",children:r.jsx(S1e,{isFistLineDomain:e,isPrimaryDomain:t,title:n.title,subtitle:(a=n.subtitle)!=null?a:void 0,url:n.url,domain:n.domain,subDomains:n.sub_domains,trackContentReferenceEvent:s,analyticsMetadata:o})})},S1e=({isFistLineDomain:t,title:e,subtitle:n,url:s,trackContentReferenceEvent:o,analyticsMetadata:a})=>{const i={url:s,title:e,link_type:"card",section:"fast_nav",section_location:"response",section_index:a.section_index},l=hn()?"_self":"_blank";return r.jsxs(FR,{component:to,href:s,target:l,onClick:()=>o("link_action",null,"navigation",U(w({},i),{action:"click"})),onMouseEnter:()=>{o("link_action",null,"navigation",U(w({},i),{action:"hover"}))},className:"flex flex-col gap-[2px]",children:[r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-[6px] text-xs",children:[r.jsx(ks,{url:s,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),r.jsx("div",{className:"truncate",children:n})]}),r.jsx("div",{className:z("text-token-text-primary flex items-center font-medium",t?"text-sm":"text-xs"),children:r.jsx("span",{className:"truncate",children:e})})]})},FR=o=>{var a=o,{component:t,children:e,className:n}=a,s=we(a,["component","children","className"]);return r.jsx(t,U(w({},s),{className:z("hover:bg-token-bg-tertiary border-token-border-light rounded-2xl border px-4 py-3",n),children:e}))},w1e=(t,e)=>t==="Search Content Reference Shown"||t==="Contextual Answers Content Reference Shown"||t==="Search Content Reference Failed"||t==="link_action"&&(e==null?void 0:e.action)==="show"||t==="product_offer"&&(e==null?void 0:e.action)==="shown",k1e=(t,e,n)=>w(U(w({},Tn(e)),{type:t}),n?T1e(n):{}),E1e=["section_index","product_index","offer_index"],T1e=t=>Object.fromEntries(Object.entries(t!=null?t:{}).map(([e,n])=>[e,E1e.includes(e)&&n!==void 0?(Number(n)+1).toString():String(n)]));function TZe(t){var s;const e=(s=_.useContext($h))==null?void 0:s.serverSharedThreadId;return _.useMemo(()=>{const[o,a]=t.split("?"),i=new URLSearchParams(a!=null?a:"");return e&&i.set("shared_conversation_id",e),i.size?o+"?"+i.toString():o},[t,e])}function M1e(t){const e=_.useRef(new Set);return _.useCallback((n,s,o,a,i)=>{if(t&&t.messageId&&A1e(t.messageId)){const l=k1e(o,t,a),c="".concat(n,"-").concat(JSON.stringify(l));(!e.current.has(c)||!w1e(n,a))&&(e.current.add(c),s?B.logEventWithStatsig(n,s,l):B.logEvent(n,l),i==null||i(t))}},[t])}const A1e=t=>!t.startsWith(yG)&&!t.startsWith(Gy),BR=R(()=>P(()=>import("./eugv7e9r1rcwafdq.js"),__vite__mapDeps([282,1])).then(t=>t.QRCodeSVG)),_n=({onDismiss:t,title:e,content:n,customCtas:s,onPrimaryCtaClick:o,primaryCtaText:a,primaryCtaColor:i,primaryCtaClassName:l,secondaryCtaColor:c,primaryCtaQrLink:d,onPrimaryCtaQrClick:u,onSecondaryCtaClick:f,onDangerCtaClick:m,secondaryCtaText:g,dangerCtaText:p,icon:h,isElevated:x=!0,isPrimaryCtaDisabled:v=!1,isSecondaryCtaDisabled:y=!1,isDangerCtaDisabled:b=!1,type:C="normal",className:S,contentClassName:E,closeButtonContainerClassName:k,verticalCta:T=!0})=>{const M=T1(),A=z("m-w-fit flex shrink-0 gap-2 pb-1 md:pb-0",T&&"flex-col"),I=s?r.jsx("div",{className:A,children:s}):(a||g||p)&&r.jsxs("div",{className:A,children:[a&&r.jsx(ye,{onClick:o,color:i!=null?i:"primary",className:z("shrink-0",l),disabled:v,children:a}),g&&r.jsx(ye,{onClick:f,color:c!=null?c:"secondary",className:"shrink-0",disabled:y,children:g}),p&&r.jsx(ye,{onClick:m,color:"danger-outline",className:"shrink-0",disabled:b,children:p})]});return r.jsxs("aside",{className:z("flex w-full items-start gap-4 rounded-3xl border py-4 ps-5 pe-3 text-sm [text-wrap:pretty] lg:mx-auto dark:border-transparent",x&&"shadow-xxs",M?"flex-col":"md:items-center",C==="error"?"border-token-surface-error/15 text-token-text-error dark:bg-token-surface-error/5 bg-red-50":C==="info"?"border-token-border-light bg-token-main-surface-secondary text-token-text-primary dark:bg-token-main-surface-tertiary":"border-token-border-default bg-token-main-surface-primary text-token-text-primary dark:bg-token-main-surface-secondary",S),children:[r.jsxs("div",{className:z("flex h-full w-full gap-3",!M&&"md:items-center"),children:[h&&r.jsx("div",{className:"flex items-start pt-0.5",children:h}),r.jsxs("div",{className:z("flex grow flex-col md:flex-row md:items-center md:justify-between md:gap-8",E),children:[r.jsxs("div",{className:"flex flex-col",children:[e&&r.jsx("h3",{className:z("text-sm font-bold",C==="error"?"text-token-text-error":"text-token-text-primary"),children:e}),r.jsx("div",{className:z(e?C==="error"?"text-token-text-error":"text-token-text-secondary":""),children:n})]}),r.jsxs("div",{className:"mt-2 flex min-w-fit flex-col gap-2 md:mt-0 md:items-center md:gap-4",children:[d&&r.jsx(BR,{className:"min-h-[62px] min-w-[62px] cursor-pointer",onClick:u,size:62,value:d}),!M&&I]})]}),r.jsx("div",{className:z("flex shrink-0 items-start gap-2 sm:items-center",k),children:!!t&&r.jsx(xn,{onClick:t})})]}),M&&I]})},UR=({onDismiss:t,title:e,content:n,onPrimaryCtaClick:s,primaryCtaText:o,onSecondaryCtaClick:a,secondaryCtaText:i})=>r.jsxs("div",{className:z("border-main-surface-secondary bg-token-main-surface-primary text-token-text-primary flex h-16 items-center border-b px-2 text-sm"),children:[r.jsxs("div",{className:"flex items-center justify-center",children:[!!t&&r.jsx(xn,{onClick:t,className:"text-token-text-tertiary -me-2"}),r.jsx(kT,{className:"h-16 w-16 rounded-xs pt-1 shadow-none"}),r.jsxs("div",{className:"-ms-1 flex flex-col",children:[e&&r.jsx("div",{className:"text-token-text-primary font-bold",children:e}),r.jsx("div",{className:z(e?"text-token-text-secondary -mt-0.5":""),children:n})]})]}),r.jsxs("div",{className:"ms-auto flex justify-end",children:[o&&r.jsx(ye,{onClick:s,color:"primary",className:"shrink-0",children:o}),i&&r.jsx(ye,{onClick:a,color:"secondary",className:"me-2 shrink-0",children:i})]})]}),$R=Oe.DesktopBrowserExtensionAnnouncement,VR=Oe.DesktopBrowserExtensionReactiveAnnouncement,I1e=5,j1e="https://chromewebstore.google.com/detail/searchgpt/ejcfepkfckglbgocfkanmcdngdijcgld";function N1e({announcementKey:t=$R,onClose:e}){const n=V();_.useEffect(()=>{B.logEventWithStatsig("ChatGPT Browser Extension: Announcement Shown","chatgpt_browser_extension_announcement_shown"),B.logUpsellOrModalEvent(dn,{eventId:"browser_extension_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]);const s=_.useCallback(()=>{ot(n,t),B.logEventWithStatsig("ChatGPT Browser Extension: Announcement Closed","chatgpt_browser_extension_announcement_closed"),e&&e()},[t,n,e]),o=_.useCallback(()=>{B.logEventWithStatsig("ChatGPT Browser Extension: CTA Clicked","chatgpt_browser_extension_announcement_cta_clicked"),ot(n,t),e&&e()},[t,n,e]);return r.jsx(P1e,{downloadUrl:j1e,announcementKey:t,handleCTAClicked:o,handleClose:s})}function MZe({onClose:t}){return N1e({announcementKey:VR,onClose:t})}function P1e({downloadUrl:t,announcementKey:e,handleCTAClicked:n,handleClose:s}){const o=()=>{n(),window.open(t)},a=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(j,{id:"uAZwaE",defaultMessage:"Use ChatGPT for every search"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"+wTq4L",defaultMessage:"Download the Chrome extension to switch your default search engine to ChatGPT, and get instant answers from trusted sources with every search."})})]});return r.jsx(_n,{onPrimaryCtaClick:o,primaryCtaText:r.jsx(j,{id:"x9mKG0",defaultMessage:"Get Extension"}),onDismiss:()=>s(e),content:a})}function HR(t){var c;const e=V(),n=m8(()=>document.documentElement.dataset.searchExtension==="1"),o=(c=re(()=>yn(xt(e,t.clientThreadId))).enabledTools)==null?void 0:c.includes(al.Search),a=Jo(),i=!(a!=null&&a.includes(ss.SearchToolHoldout)),l=hn();return vG()&&!l&&!n&&o&&i}function AZe(t){return HR(t),L1e(),lt($R),!1}function IZe(t){var i;const e=HR(t),n=Ve(t.clientThreadId,l=>Il(he.getConversationTurns(l),c=>c.role===Ke.User));let s=!1;const o=n==null?void 0:n.messages[0];if((o==null?void 0:o.content.content_type)===ut.Text){const l=(i=o==null?void 0:o.content.parts[0])==null?void 0:i.toLowerCase();l&&(s=l.includes("chrome extension")||l.includes("default search"))}const a=lt(VR);return a.eligible&&!a.isLoading&&e&&s}function R1e(t){var n;const e=(n=_t.getItem(Ue.SearchSettings))!=null?n:{};e.hasSearchedMinTimes||(e.searchMessageIds||(e.searchMessageIds=[]),e.searchMessageIds.includes(t)||(e.searchMessageIds.push(t),e.searchMessageIds.length>=I1e&&(e.hasSearchedMinTimes=!0,delete e.searchMessageIds),_t.setItem(Ue.SearchSettings,e)))}function L1e(){var e;return((e=_t.getItem(Ue.SearchSettings))!=null?e:{}).hasSearchedMinTimes===!0}var fm=(t=>(t.SonicBusinessesMap="sonic.web.businessesMap",t.CompletionRequest="chatgpt.web.completionRequest",t.GetDiffedDoc="chatgpt.web.canvas.getDiffedDoc",t.ProductsCompletionRequest="chatgpt.web.products.completionRequest",t.ProductSidebar="chatgpt.web.products.sidebar",t.SuperWidget="chatgpt.web.super_widget",t.SearchingState="chatgpt.web.searchingState",t))(fm||{});class O1e{constructor(e,n){J(this,"namespace");J(this,"expectedTimingLogs");J(this,"expectedTimingLogTimeouts",{});J(this,"startMs",-1);J(this,"lastLogMs",-1);J(this,"loggedTimings",new Set);J(this,"timingBlocks",{});J(this,"_debug",!1);J(this,"context");var s,o,a;this.namespace=e,this.expectedTimingLogs=(s=n==null?void 0:n.expectedTimingLogs)!=null?s:[],this._debug=(o=n==null?void 0:n.debug)!=null?o:!1,this.context=(a=n==null?void 0:n.context)!=null?a:{},this.reset()}reset(e){this.startMs=this.lastLogMs=e!=null?e:performance.now(),this.timingBlocks={},this.loggedTimings=new Set;for(const n of Object.values(this.expectedTimingLogTimeouts))clearTimeout(n);this.expectedTimingLogTimeouts={};for(const n of this.expectedTimingLogs){const s=setTimeout(()=>{var o;Fe.addAction("".concat(this.namespace,".").concat(n.name,".timed_out"),(o=n.initializationInfo)!=null?o:{})},n.expectedInMs);this.expectedTimingLogTimeouts[n.name]=s,this.isDebug()&&console.debug("[DatadogProfiler] Expecting ".concat(this.namespace,".").concat(n.name," to be logged within ").concat(n.expectedInMs,"ms"))}}isDebug(){var e;return(e=window.__DATADOG_PROFILER_DEBUG__)!=null?e:this._debug}getStartTime(){return this.startMs}logTimingOnce(e,n={fromLastLog:!1}){var a;if(this.loggedTimings.has(e)){this.isDebug()&&console.warn("[DatadogProfiler] Timing ".concat(this.namespace,".").concat(e," already logged"));return}const s=performance.now(),o=(a=n.overrideDurationMs)!=null?a:s-(n.fromLastLog?this.lastLogMs:this.startMs);return Fe.addAction("".concat(this.namespace,".").concat(e),U(w(w({},this.context),n.context),{durationMs:o})),this.lastLogMs=s,this.loggedTimings.add(e),e in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[e]),delete this.expectedTimingLogTimeouts[e]),this.isDebug()&&console.debug("[DatadogProfiler] ".concat(this.namespace,".").concat(e,": ").concat(o,"ms")),o}startBlock(e){this.timingBlocks[e]=performance.now()}endBlock(e,n={throwError:!0}){const s=this.timingBlocks[e];if(s===void 0&&n.throwError)throw new Error('Block "'.concat(e,'" not started'));const o=performance.now()-s;Fe.addAction("".concat(this.namespace,".").concat(e),U(w(w({},this.context),n.context),{durationMs:o})),delete this.timingBlocks[e]}}const jp={};function D1e({namespace:t,opts:e}){return jp[t]!==void 0&&Fe.addError("Profiler already exists for namespace ".concat(t)),jp[t]=new O1e(t,e)}function e5({namespace:t,opts:e}){let n=jp[t];return n===void 0&&(n=jp[t]=D1e({namespace:t,opts:e})),n}function GR(t){"use forget";const e=W.c(11),{namespace:n,clientThreadId:s}=t,[o,a]=_.useState(!1);let i;e[0]!==n?(i=()=>e5({namespace:n,opts:{debug:!1}}),e[0]=n,e[1]=i):i=e[1];const[l]=_.useState(i),c=Ve(s,F1e),d=Ia(c);let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=new Set,e[2]=u):u=e[2];const f=_.useRef(u),m=V();let g,p;e[3]!==m||e[4]!==l||e[5]!==c?(g=()=>{if(c&&!f.current.has(c)){f.current.add(c);const v=bG(m,c);v&&(l.reset(v.turnTracker.promptSentTimestamp),a(!0))}},p=[c,l,m],e[3]=m,e[4]=l,e[5]=c,e[6]=g,e[7]=p):(g=e[6],p=e[7]),_.useEffect(g,p);const h=o?l:null;let x;return e[8]!==d||e[9]!==h?(x={profiler:h,isRequestActive:d},e[8]=d,e[9]=h,e[10]=x):x=e[10],x}function F1e(t){return he.getRequestId(t)}const Fx=u8(()=>({delayedRenderingMessageIds:new Set})),B1e=t=>R3(Fx,t);function U1e(t){return B1e(e=>t?t(e.delayedRenderingMessageIds):e.delayedRenderingMessageIds)}const WS={addDelayedRenderingMessage(t){Fx.setState(e=>{if(e.delayedRenderingMessageIds.has(t))return e;const n=new Set(e.delayedRenderingMessageIds);return n.add(t),{delayedRenderingMessageIds:n}})},removeDelayedRenderingMessage(t){Fx.setState(e=>{if(!e.delayedRenderingMessageIds.has(t))return e;const n=new Set(e.delayedRenderingMessageIds);return n.delete(t),{delayedRenderingMessageIds:n}})}},$1e="5.7.5",V1e=100,H1e=0,G1e=350,W1e=24,z1e=24,q1e="Comp 1",Y1e=0,Z1e=[],K1e=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],Q1e=[],J1e={v:$1e,fr:V1e,ip:H1e,op:G1e,w:W1e,h:z1e,nm:q1e,ddd:Y1e,assets:Z1e,layers:K1e,markers:Q1e},X1e="5.7.5",e_e=100,t_e=0,n_e=400,s_e=24,o_e=24,a_e="Comp 1",r_e=0,i_e=[],l_e=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.944433333333334],[-1.166666666666667,0]],o:[[-1.166666666666666,1.944433333333333],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.003000259399414062,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.3626899123191833],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.003000259399414062,2.333300590515137],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.120759010314941]],o:[[1.720494627952576,0],[.6510882377624512,-1.120759010314941]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.166999816894531,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],c_e=[],d_e={v:X1e,fr:e_e,ip:t_e,op:n_e,w:s_e,h:o_e,nm:a_e,ddd:r_e,assets:i_e,layers:l_e,markers:c_e},u_e="5.7.5",f_e=100,m_e=0,g_e=400,p_e=24,h_e=24,__e="Comp 1",x_e=0,y_e=[],v_e=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.9444333333333343],[-1.166666666666667,0]],o:[[-1.166666666666666,1.9444333333333326],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.0030002593994140625,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.36268991231918335],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.0030002593994140625,2.3333005905151367],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.1207590103149414]],o:[[1.7204946279525757,0],[.6510882377624512,-1.1207590103149414]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.1669998168945312,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],b_e=[],C_e={v:u_e,fr:f_e,ip:m_e,op:g_e,w:p_e,h:h_e,nm:__e,ddd:x_e,assets:y_e,layers:v_e,markers:b_e},S_e="5.7.5",w_e=100,k_e=0,E_e=350,T_e=24,M_e=24,A_e="Comp 1",I_e=0,j_e=[],N_e=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],P_e=[],R_e={v:S_e,fr:w_e,ip:k_e,op:E_e,w:T_e,h:M_e,nm:A_e,ddd:I_e,assets:j_e,layers:N_e,markers:P_e},L_e=R(()=>P(()=>import("./dl3b4umuy6c605hj.js"),__vite__mapDeps([183,1])));function WR({animationData:t,animationSegmentToPlay:e,animationLoopCounter:n}){const s=_.useRef(null);return _.useEffect(()=>{var o;(o=s.current)==null||o.playSegments(e,!0)},[n]),r.jsx(L_e,{animationData:t,lottieRef:s,loop:!1,autoplay:!1})}function O_e(t){return r.jsx(Ts,U(w({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.66607 0.376042C8.01072 0.605806 8.10385 1.07146 7.87408 1.4161L3.54075 7.9161C3.40573 8.11863 3.18083 8.24304 2.93752 8.24979C2.69421 8.25654 2.46275 8.1448 2.31671 7.95008L0.150044 5.06119C-0.098484 4.72982 -0.0313267 4.25972 0.300044 4.01119C0.631415 3.76266 1.10152 3.82982 1.35004 4.16119L2.88068 6.20204L6.62601 0.584055C6.85577 0.239408 7.32142 0.146278 7.66607 0.376042Z",fill:"currentColor"})}))}function D_e(t){return r.jsxs(Ts,U(w({width:"4",height:"12",viewBox:"0 0 4 12",fill:"none"},t),{children:[r.jsx("mask",{id:"path-1-inside-1_1975_4008",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z"})}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z",fill:"currentColor"}),r.jsx("path",{d:"M1 6.5H-0.25H1ZM1 1.5L-0.25 1.5L-0.25 1.5L1 1.5ZM2 6.25C2.13807 6.25 2.25 6.36193 2.25 6.5H-0.25C-0.25 7.74264 0.757359 8.75 2 8.75V6.25ZM1.75 6.5C1.75 6.36193 1.86193 6.25 2 6.25V8.75C3.24264 8.75 4.25 7.74264 4.25 6.5H1.75ZM1.75 1.5V6.5H4.25V1.5H1.75ZM2 1.75C1.86193 1.75 1.75 1.63807 1.75 1.5H4.25C4.25 0.257359 3.24264 -0.75 2 -0.75V1.75ZM2.25 1.5C2.25 1.63807 2.13807 1.75 2 1.75V-0.75C0.757359 -0.75 -0.25 0.257359 -0.25 1.5L2.25 1.5ZM2.25 6.5L2.25 1.5L-0.25 1.5L-0.25 6.5L2.25 6.5ZM2 10.25H-0.5C-0.5 11.6307 0.619288 12.75 2 12.75V10.25ZM2 10.25V12.75C3.38071 12.75 4.5 11.6307 4.5 10.25H2ZM2 10.25H2H4.5C4.5 8.86929 3.38071 7.75 2 7.75V10.25ZM2 10.25H2V7.75C0.619288 7.75 -0.5 8.86929 -0.5 10.25H2Z",fill:"currentColor",mask:"url(#path-1-inside-1_1975_4008)"})]}))}function F_e(t){return r.jsx(Ts,U(w({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.32256 1.48447C7.59011 1.16827 7.55068 0.695034 7.23447 0.427476C6.91827 0.159918 6.44503 0.199354 6.17748 0.515559L4.00002 3.08892L1.82256 0.515559C1.555 0.199354 1.08176 0.159918 0.765559 0.427476C0.449355 0.695034 0.409918 1.16827 0.677476 1.48447L3.01755 4.25002L0.677476 7.01556C0.409918 7.33176 0.449354 7.805 0.765559 8.07256C1.08176 8.34011 1.555 8.30068 1.82256 7.98447L4.00002 5.41111L6.17748 7.98447C6.44503 8.30068 6.91827 8.34011 7.23447 8.07256C7.55068 7.805 7.59011 7.33176 7.32256 7.01556L4.98248 4.25002L7.32256 1.48447Z",fill:"currentColor"})}))}function jZe({animationLoopCounter:t}){const e=Xo();return r.jsx(WR,{animationData:e?J1e:R_e,animationSegmentToPlay:[0,300],animationLoopCounter:t})}function NZe({animationLoopCounter:t}){const e=Xo();return r.jsx(WR,{animationData:e?d_e:C_e,animationSegmentToPlay:[0,400],animationLoopCounter:t})}const B_e=2e3,zR=.4,U_e=.45,$_e=.2,V_e=.1,H_e=.25;var Ys=(t=>(t[t.Running=0]="Running",t[t.Finished=1]="Finished",t[t.Error=2]="Error",t[t.Stopped=3]="Stopped",t[t.Paused=4]="Paused",t))(Ys||{});function PZe({conversationMessages:t,icon:e,status:n,text:s,estimatedToolDurationMs:o,animationLoopDurationMs:a=B_e,shouldPersistAfterFinished:i=!1}){const[l,c]=_.useState(n===0?0:n===1&&!i?7:1),[d,u]=_.useState(0);_.useEffect(()=>{n===2?c(8):n===3?c(9):n===4?c(10):n===1?c(l===2?3:7):n===0&&l===10&&(c(2),u(m=>m+1))},[n]);const f=z_e(l);return _.useEffect(()=>{const m=t[0].id;if(f)return WS.addDelayedRenderingMessage(m),()=>{WS.removeDelayedRenderingMessage(m)}},[f]),L3(()=>{$c(l)&&u(m=>m+1)},a),l===7&&!i?null:r.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[r.jsx(G_e,{icon:e,status:n,uiState:l,estimatedToolDurationMs:o,animationLoopCounter:d,shouldPersistAfterFinished:i,onFillProgressBarAnimationComplete:()=>c(4),onFinishAnimationComplete:()=>{c(5),setTimeout(()=>{c(i?7:6)},V_e*1e3)},onHideAnimationComplete:()=>c(7)}),r.jsx(W_e,{text:s,uiState:l,animationLoopCounter:d,onEnterAnimationComplete:()=>c(2)})]})}const zS=50;function G_e({icon:t,status:e,uiState:n,estimatedToolDurationMs:s,animationLoopCounter:o,shouldPersistAfterFinished:a,onFillProgressBarAnimationComplete:i,onFinishAnimationComplete:l,onHideAnimationComplete:c}){const[d,u]=_.useState(0);L3(()=>{$c(n)?u(y=>y+zS):n===10&&u(0)},zS);let f,m,g;$c(n)||n===10?(f="running",m=r.jsx(t,{animationLoopCounter:o}),g="bg-transparent"):n===4||n===5||n===7&&a?(f="finished",m=r.jsx(O_e,{}),g="bg-brand-purple"):e===2?(f="error",m=r.jsx(D_e,{}),g="bg-orange-500"):e===3&&(f="stopped",m=r.jsx(F_e,{}),g="bg-gray-300");let p={opacity:0,scale:0,rotate:-180,x:0},h={type:"spring",bounce:.3,duration:U_e},x={opacity:0,scale:.6,rotate:0,x:0};n===0?(p={opacity:0,scale:.5,rotate:-180,x:-8},h={type:"spring",bounce:.3,duration:zR}):n===1?p=!1:n===5&&(x={opacity:0,scale:0,rotate:0,x:0},h={type:"spring",bounce:.3,duration:H_e});const v=RX(d,s);return r.jsx("div",{className:"relative h-5 w-5 shrink-0",children:r.jsx(fn,{onExitComplete:()=>{n===6&&c()},children:f!=null&&r.jsxs(Xe.div,{className:z("absolute start-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",g),initial:p,animate:{opacity:1,scale:1,rotate:0,x:0},exit:x,transition:h,onAnimationComplete:()=>{n===4&&l()},children:[m,($c(n)||n===10)&&r.jsx(ld,{percentage:n===3?100:v,thickness:1.5/23,className:"text-brand-purple absolute start-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:n===3?"".concat((100-v)/100*$_e,"s"):void 0,transitionTimingFunction:n===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{n===3&&i()}})]},f)})})}function W_e({text:t,uiState:e,animationLoopCounter:n,onEnterAnimationComplete:s}){const[o,a]=_.useState(t);_.useEffect(()=>{e===2&&a(t)},[n]),_.useEffect(()=>{$c(e)||a(t)},[e,t]);let i={opacity:0,x:0,y:15},l={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};e===0?(i={opacity:0,x:-8,y:0},l={type:"spring",bounce:.3,duration:zR,delay:.15}):e===1&&(i=!1);const c=o!=null?o:void 0;return r.jsx("div",{className:z("relative h-5 w-full leading-5",e===8||e===9?"text-token-text-tertiary":"text-token-text-secondary"),children:r.jsx(fn,{children:c!=null&&r.jsx(Xe.div,{className:"absolute start-0 top-0 line-clamp-1 overflow-visible",initial:i,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:l,onAnimationComplete:()=>{e===0&&s()},children:c},c.toString())})})}function $c(t){return t===0||t===2||t===3}function z_e(t){return $c(t)||t===4||t===5||t===6||t===10}const q_e=R(()=>P(()=>import("./ef5noj24t7u7w8z6.js"),__vite__mapDeps([283,1])),{loading:t=>F(t)}),Y_e=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>F(t)});var uE;const qS=ft.div(uE||(uE=ct(["group start-0 top-0 me-1.5 overflow-hidden mt-1 text-start"]))),Bx=t=>{"use forget";var X;const e=W.c(70);let n,s,o,a,i,l,c,d,u,f,m,g,p;e[0]!==t?(X=t,{highlightedCommand:o,status:u,children:s,showWorkUserSetting:f,hideOnlyIfNotInteractedWith:m,defaultExpanded:g,forceExpanded:p,labelPrefix:a,onOpenAnalytics:l,onClick:i,accessory:n,ref:c}=X,d=we(X,["highlightedCommand","status","children","showWorkUserSetting","hideOnlyIfNotInteractedWith","defaultExpanded","forceExpanded","labelPrefix","onOpenAnalytics","onClick","accessory","ref"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=d,e[9]=u,e[10]=f,e[11]=m,e[12]=g,e[13]=p):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],d=e[8],u=e[9],f=e[10],m=e[11],g=e[12],p=e[13]);const h=f===void 0?!1:f,x=m===void 0?!1:m,v=g===void 0?!1:g,y=p===void 0?!1:p,b=s!=null||i!=null,[C]=_.useState(h),[S,E]=_.useState(h||v),[k,T]=_.useState(!1),M=u===Ys.Finished||u===Ys.Error,A=x?C?!1:!k:!1,I=u===Ys.Running?"loading-shimmer":"inline-block";if(M&&A)return null;if(!b){let ee;e[14]!==I?(ee=z(I),e[14]=I,e[15]=ee):ee=e[15];let ie;e[16]!==o?(ie=r.jsx("span",{className:"text-start",children:o}),e[16]=o,e[17]=ie):ie=e[17];let de;e[18]!==n||e[19]!==a||e[20]!==ie?(de=r.jsxs("div",{className:"flex items-center justify-start gap-1",children:[a,ie,n]}),e[18]=n,e[19]=a,e[20]=ie,e[21]=de):de=e[21];let me;e[22]!==ee||e[23]!==de?(me=r.jsx(qS,{className:ee,children:de}),e[22]=ee,e[23]=de,e[24]=me):me=e[24];let xe;return e[25]!==c||e[26]!==d||e[27]!==me?(xe=r.jsx(YS,U(w({ref:c,$canShowWork:!1},d),{children:me})),e[25]=c,e[26]=d,e[27]=me,e[28]=xe):xe=e[28],xe}let N;e[29]!==i||e[30]!==l||e[31]!==S?(N=ee=>{S||l==null||l(),E(Z_e),T(!0),i==null||i(ee)},e[29]=i,e[30]=l,e[31]=S,e[32]=N):N=e[32];let L;e[33]!==o?(L=o==null?void 0:o.toString(),e[33]=o,e[34]=L):L=e[34];let O,D,$,H;e[35]===Symbol.for("react.memo_cache_sentinel")?(D={opacity:0},$={opacity:1},H={opacity:0},O={duration:.3},e[35]=O,e[36]=D,e[37]=$,e[38]=H):(O=e[35],D=e[36],$=e[37],H=e[38]);let G;e[39]!==I?(G=z(I),e[39]=I,e[40]=G):G=e[40];let Z;e[41]!==o?(Z=r.jsx("span",{className:"text-start",children:o}),e[41]=o,e[42]=Z):Z=e[42];let Q;e[43]!==y||e[44]!==i||e[45]!==S?(Q=!i&&!y&&(S?r.jsx(q_e,{className:"icon-sm"}):r.jsx(Y_e,{className:"icon-sm"})),e[43]=y,e[44]=i,e[45]=S,e[46]=Q):Q=e[46];let q;e[47]!==n||e[48]!==a||e[49]!==Z||e[50]!==Q?(q=r.jsxs("div",{className:"flex items-center justify-start gap-1",children:[a,Z,Q,n]}),e[47]=n,e[48]=a,e[49]=Z,e[50]=Q,e[51]=q):q=e[51];let Y;e[52]!==G||e[53]!==q||e[54]!==N||e[55]!==L?(Y=r.jsx(fn,{children:r.jsx(qS,{children:r.jsx(Xe.button,{onClick:N,initial:D,animate:$,exit:H,transition:O,className:G,children:q},L)})}),e[52]=G,e[53]=q,e[54]=N,e[55]=L,e[56]=Y):Y=e[56];let te;e[57]!==c||e[58]!==d||e[59]!==Y?(te=r.jsx(YS,U(w({ref:c,$canShowWork:!0},d),{children:Y})),e[57]=c,e[58]=d,e[59]=Y,e[60]=te):te=e[60];let ae;e[61]!==s||e[62]!==y||e[63]!==S?(ae=(S||y)&&s&&r.jsx(Xe.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s}),e[61]=s,e[62]=y,e[63]=S,e[64]=ae):ae=e[64];let se;e[65]!==ae?(se=r.jsx(fn,{children:ae}),e[65]=ae,e[66]=se):se=e[66];let ce;return e[67]!==te||e[68]!==se?(ce=r.jsxs(r.Fragment,{children:[te,se]}),e[67]=te,e[68]=se,e[69]=ce):ce=e[69],ce};var fE;const YS=ft.span(fE||(fE=ct(["block first:mt-0 relative\n",""])),({$canShowWork:t})=>t?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary");function Z_e(t){return!t}const ZS=3,K_e=.1,KS=[0,.26,.4],Q_e=800,J_e=1200;function RZe(t){"use forget";var fe;const e=W.c(98),{nextMessage:n,isLastMessage:s,isRequestActive:o,isLastTurnInConversation:a,clientThreadId:i,turnIndex:l,searchResultGroups:c,query:d,searchModelQueries:u,showFastNav:f,isForcedMessage:m,shouldShowAnimatedBlackDot:g}=t;let p;e[0]!==c?(p=c===void 0?[]:c,e[0]=c,e[1]=p):p=e[1];const h=p,x=d===void 0?null:d;let v;e[2]!==u?(v=u===void 0?[]:u,e[2]=u,e[3]=v):v=e[3];const y=v,b=f===void 0?!0:f,C=m===void 0?!1:m,S=g===void 0?!0:g;let E;e[4]!==s||e[5]!==n?(E=s0e({isLastMessage:s,nextMessage:n}),e[4]=s,e[5]=n,e[6]=E):E=e[6];const k=E,T=_.useRef(!1),M=It(),A=Ve(i,he.getGizmoId);let I,N;e[7]!==A||e[8]!==n||e[9]!==M?(I=()=>{n&&O3(n)&&!T.current&&(T.current=!0,Xs(M,A))},N=[n,M,A],e[7]=A,e[8]=n,e[9]=M,e[10]=I,e[11]=N):(I=e[10],N=e[11]),_.useEffect(I,N);let L;e[12]!==n?(L=Nh(n),e[12]=n,e[13]=L):L=e[13];const O=L;n!=null&&n.id&&R1e(n==null?void 0:n.id);let D;e[14]!==i?(D={namespace:fm.SearchingState,clientThreadId:i},e[14]=i,e[15]=D):D=e[15];const{profiler:$}=GR(D),H=V();let G;e[16]!==H?(G=es(H),e[16]=H,e[17]=G):G=e[17];const Z=G;let Q;e[18]!==H?(Q=Cr(H).checkGate("1640462792"),e[18]=H,e[19]=Q):Q=e[19];const q=Q,{favicons:Y,load:te}=i1e(x!=null?x:null);let ae;e[20]!==H||e[21]!==te||e[22]!==$?(ae=()=>{te({ctx:H,profiler:$})},e[20]=H,e[21]=te,e[22]=$,e[23]=ae):ae=e[23];const se=_.useEffectEvent(ae);let ce;e[24]!==C||e[25]!==se||e[26]!==x||e[27]!==q?(ce=()=>{x&&x.trim().length>0&&!C&&!q&&se()},e[24]=C,e[25]=se,e[26]=x,e[27]=q,e[28]=ce):ce=e[28];let X;e[29]!==C||e[30]!==x||e[31]!==q?(X=[x,C,q],e[29]=C,e[30]=x,e[31]=q,e[32]=X):X=e[32],_.useEffect(ce,X);let ee;e:{let ue;e[33]!==Y?(ue=Y.slice(0,ZS).map(t0e),e[33]=Y,e[34]=ue):ue=e[34];const _e=ue;if(_e.length>0){ee=_e;break e}let Te;e[35]!==h?(Te=dh(h.slice(0,ZS).map(e0e)),e[35]=h,e[36]=Te):Te=e[36],ee=Te}const ie=ee,de=_.useRef(!1),me=_.useRef(!1);let xe,pe;e[37]!==o||e[38]!==$||e[39]!==k?(xe=()=>{k&&!de.current&&$&&o&&(de.current=!0,$.logTimingOnce("searching_the_web_shown"))},pe=[k,$,o],e[37]=o,e[38]=$,e[39]=k,e[40]=xe,e[41]=pe):(xe=e[40],pe=e[41]),_.useEffect(xe,pe);let Me,Ce;e[42]!==o||e[43]!==$||e[44]!==k||e[45]!==ie.length?(Me=()=>{!me.current&&k&&ie.length>0&&$&&o&&(me.current=!0,$.logTimingOnce("favicons_shown"))},Ce=[ie.length,k,$,o],e[42]=o,e[43]=$,e[44]=k,e[45]=ie.length,e[46]=Me,e[47]=Ce):(Me=e[46],Ce=e[47]),_.useEffect(Me,Ce);const[ke,Le]=_.useState(0),[De,le]=_.useState(!0);let oe,Ee;e[48]!==o||e[49]!==y.length||e[50]!==k||e[51]!==De?(oe=()=>{if(o&&k&&y.length>0&&De){let ue=null;const _e=setTimeout(()=>{le(!1),ue=setInterval(()=>{Le(Te=>Te+1>=y.length?y.length-1:Te+1)},J_e)},Q_e);return()=>{clearTimeout(_e),ue!=null&&clearInterval(ue)}}(!o||!k||y.length===0)&&!De&&le(!0)},Ee=[o,k,y.length,De],e[48]=o,e[49]=y.length,e[50]=k,e[51]=De,e[52]=oe,e[53]=Ee):(oe=e[52],Ee=e[53]),_.useEffect(oe,Ee);let be;if(e[54]!==i||e[55]!==O||e[56]!==Z||e[57]!==a||e[58]!==o||e[59]!==n||e[60]!==y||e[61]!==ke||e[62]!==S||e[63]!==b||e[64]!==k||e[65]!==q||e[66]!==De||e[67]!==l||e[68]!==ie){if(be=[],((fe=O==null?void 0:O[0])==null?void 0:fe.type)==="navigation"&&n&&b){const ue=O[0];let _e;e[70]!==i||e[71]!==a||e[72]!==o||e[73]!==n||e[74]!==ue||e[75]!==l?(_e=r.jsx(n0e,{clientThreadId:i,turnIndex:l,nextMessage:n,isRequestActive:o,isLastTurnInConversation:a,navigationCitation:ue},"fast-nav"),e[70]=i,e[71]=a,e[72]=o,e[73]=n,e[74]=ue,e[75]=l,e[76]=_e):_e=e[76],be.push(_e)}if(k){if(q){const ue=!o;let _e;e[77]!==ue||e[78]!==y||e[79]!==ke||e[80]!==De?(_e=ue?r.jsx(j,{id:"sjbaxy",defaultMessage:"Stopped searching"}):De?r.jsx(j,{id:"jjx8Qg",defaultMessage:"Searching the web"}):r.jsx(j,{id:"FauKHv",defaultMessage:"Searching for {query}",values:{query:y[ke]}}),e[77]=ue,e[78]=y,e[79]=ke,e[80]=De,e[81]=_e):_e=e[81];const Te=_e;if(ue){let $e;e[82]!==Te?($e=r.jsx(Bx,{highlightedCommand:Te,status:Ys.Error},"search-gpt-query"),e[82]=Te,e[83]=$e):$e=e[83],be.push($e)}else{if(De&&S){let He;e[84]===Symbol.for("react.memo_cache_sentinel")?(He=r.jsx(Zhe,{}),e[84]=He):He=e[84],be.push(He)}const $e=!Z&&"truncate";let Ne;e[85]!==$e?(Ne=z("loading-shimmer text-token-text-secondary pt-[3px] font-medium select-none",$e),e[85]=$e,e[86]=Ne):Ne=e[86];let Ae;e[87]!==Te||e[88]!==Ne?(Ae=r.jsx("span",{className:Ne,children:Te}),e[87]=Te,e[88]=Ne,e[89]=Ae):Ae=e[89],be.push(Ae)}}else if(k){let ue;e[90]!==o||e[91]!==ie?(ue=o?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(j,{id:"jjx8Qg",defaultMessage:"Searching the web"}),ie.map(X_e)]}):r.jsx(j,{id:"sjbaxy",defaultMessage:"Stopped searching"}),e[90]=o,e[91]=ie,e[92]=ue):ue=e[92];const _e=ue,Te=o?Ys.Running:Ys.Error;let $e;e[93]!==_e||e[94]!==Te?($e=r.jsx(Bx,{highlightedCommand:_e,status:Te},"search-gpt-query"),e[93]=_e,e[94]=Te,e[95]=$e):$e=e[95],be.push($e)}}e[54]=i,e[55]=O,e[56]=Z,e[57]=a,e[58]=o,e[59]=n,e[60]=y,e[61]=ke,e[62]=S,e[63]=b,e[64]=k,e[65]=q,e[66]=De,e[67]=l,e[68]=ie,e[69]=be}else be=e[69];if(be.length){let ue;return e[96]!==be?(ue=r.jsx("div",{children:be}),e[96]=be,e[97]=ue):ue=e[97],ue}return null}function X_e(t,e){return r.jsx(Xe.div,{className:z("-ms-1.5 first:ms-0 last:me-1.5","relative"),initial:{width:e===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:K_e,delay:KS[Math.min(e,KS.length-1)]},children:r.jsx("div",{className:z("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-token-bg-primary bg-token-bg-primary border-2"),children:r.jsx(ks,{url:t,size:32,minSize:16,className:"icon rounded-full"})})},t)}function e0e(t){return t.entries[0].url}function t0e(t){return t.url}const n0e=({clientThreadId:t,turnIndex:e,nextMessage:n,isRequestActive:s,isLastTurnInConversation:o,navigationCitation:a})=>{var u;const{scrollToHeader:i}=(u=uS("searchSources"))!=null?u:{},l=Ime(),c=uS("searchSources"),{openThreadSidebar:d}=Mr();return _.useEffect(()=>{Fe.addFirstTiming("render.fastNavigation")},[]),_.useEffect(()=>{var f;l&&c&&d({type:"searchSources",scrollToHeader:i,turnIndex:e,messageId:(f=n==null?void 0:n.id)!=null?f:""})},[]),_.useEffect(()=>{var p;const f=n,m=(p=f.metadata)==null?void 0:p.search_source,g=a.domains.map(h=>h.url);WA.logEvent("Search Tool Request Time To Fast Nav",t,f.id,{search_source:m,urls:g},()=>{m===CG.InstantQuery&&wee.logEvent("Search Tool Page Load Time To Fast Nav",{message_id:f.id,urls:g,search_source:m})})},[t,n,a]),s&&o?r.jsx(Xe.div,{initial:{opacity:s?0:1,height:s?0:"auto"},animate:{opacity:1,height:"auto"},children:r.jsx(QS,{clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:a})}):r.jsx(QS,{clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:a})},QS=({clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:s})=>{const{toggleThreadSidebar:o}=Mr(),a=_.useMemo(()=>({clientThreadId:t,turnIndex:e,messageId:n==null?void 0:n.id}),[t,e,n==null?void 0:n.id]),i=_.useCallback((c,d)=>{var u;o({type:"searchSources",scrollToHeader:d,turnIndex:e,messageId:(u=n==null?void 0:n.id)!=null?u:""})},[o,e,n==null?void 0:n.id]),l=M1e(a);return r.jsx(y1e,{navigation:s,onShowSearchResults:i,trackContentReferenceEvent:l})};function s0e({isLastMessage:t,nextMessage:e}){return t||!e||e&&!O3(e)}function o0e({fullHeight:t,children:e,verticalPadding:n,horizontalPadding:s,overflowY:o,verticalMargin:a="auto",horizontalMargin:i="auto",ref:l}){const[c,d]=An(f=>[Ko(f),mn(f)]),u=!d&&!c;return r.jsx("div",{className:z("text-base",o==="auto"&&"overflow-y-auto",a==="auto"&&"my-auto",i==="auto"&&"mx-auto",u&&n==="first"&&"pt-3",u&&n==="last"&&"pb-10",u&&n==="last-standard"&&"pb-3",u&&n==="large"&&"pt-12",u&&n==="small"&&"py-1",c&&n==="first"&&"pt-4.5",c&&n==="large"&&"pt-4.5",c&&n==="last"&&"pb-8",YR,s!=="none"&&"px-(--thread-content-margin)",t&&"h-full"),ref:l,children:e})}function Ar(s){var o=s,{children:t,className:e}=o,n=we(o,["children","className"]);const[a,i,l]=An(f=>[Ko(f),mn(f),g8(f)]),d=i?"[--thread-content-max-width:100%]":qR(a&&!l?"bento":"default"),u=i?"mx-auto flex-1 w-full max-w-full":"mx-auto max-w-(--thread-content-max-width) flex-1";return r.jsx("div",U(w({className:z(d,u,e)},n),{children:t}))}function qR(t){return t==="bento"?"[--thread-content-max-width:100%] thread-sm:[--thread-content-max-width:44rem] thread-md:[--thread-content-max-width:48rem] thread-lg:[--thread-content-max-width:50rem] thread-xxl:[--thread-content-max-width:54rem]":"[--thread-content-max-width:40rem] thread-lg:[--thread-content-max-width:48rem]"}const YR="[--thread-content-margin:--spacing(4)] thread-sm:[--thread-content-margin:--spacing(6)] thread-lg:[--thread-content-margin:--spacing(16)]";function LZe(t){return ze(t,"1803944755").get("enable_combined_login_or_signup_button",!1)}const ZR=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M11.7304 7.35195C11.9273 7.04193 12.3384 6.95002 12.6484 7.14687C12.9582 7.34374 13.0502 7.75487 12.8535 8.06484L9.67868 13.0648C9.56765 13.2397 9.38114 13.3525 9.17477 13.3705C8.96844 13.3885 8.76558 13.3096 8.62595 13.1566L6.80075 11.1566L6.7197 11.0482C6.56149 10.7827 6.60647 10.4337 6.84372 10.2172C7.08112 10.0007 7.43256 9.98823 7.68259 10.1703L7.78317 10.2601L9.02145 11.6166L11.7304 7.35195Z","data-rtl-flip":""}),_.createElement("path",{d:"M4.52148 15.1664C4.61337 14.8108 4.39951 14.4478 4.04395 14.3559C3.73281 14.2756 3.41605 14.4295 3.28027 14.7074L3.2334 14.8334C3.13026 15.2324 3.0046 15.6297 2.86133 16.0287L2.71289 16.4281C2.63179 16.6393 2.66312 16.8775 2.79688 17.06C2.93067 17.2424 3.14825 17.3443 3.37402 17.3305L3.7793 17.3002C4.62726 17.2265 5.44049 17.0856 6.23438 16.8764C6.84665 17.1788 7.50422 17.4101 8.19434 17.558C8.55329 17.6347 8.9064 17.4062 8.9834 17.0473C9.06036 16.6881 8.83177 16.3342 8.47266 16.2572C7.81451 16.1162 7.19288 15.8862 6.62305 15.5814C6.50913 15.5205 6.38084 15.4946 6.25391 15.5053L6.12793 15.5277C5.53715 15.6955 4.93256 15.819 4.30566 15.9027C4.33677 15.8052 4.36932 15.7081 4.39844 15.6098L4.52148 15.1664Z"}),_.createElement("path",{d:"M15.7998 14.5365C15.5786 14.3039 15.2291 14.2666 14.9668 14.4301L14.8604 14.5131C13.9651 15.3633 12.8166 15.9809 11.5273 16.2572C11.1682 16.3342 10.9396 16.6881 11.0166 17.0473C11.0936 17.4062 11.4467 17.6347 11.8057 17.558C13.2388 17.2509 14.5314 16.5858 15.5713 15.6644L15.7754 15.4769C16.0417 15.224 16.0527 14.8028 15.7998 14.5365Z"}),_.createElement("path",{d:"M2.23828 7.58925C1.97668 8.34846 1.83496 9.15956 1.83496 10.0004C1.835 10.7359 1.94324 11.4483 2.14551 12.1234L2.23828 12.4105C2.35793 12.7576 2.73588 12.9421 3.08301 12.8226C3.3867 12.718 3.56625 12.4153 3.52637 12.1088L3.49512 11.9769C3.2808 11.3548 3.16508 10.6908 3.16504 10.0004C3.16504 9.30975 3.28072 8.64512 3.49512 8.02284C3.61476 7.67561 3.43024 7.29679 3.08301 7.17714C2.73596 7.05777 2.35799 7.2423 2.23828 7.58925Z"}),_.createElement("path",{d:"M16.917 12.8226C17.2641 12.9421 17.6421 12.7576 17.7617 12.4105C18.0233 11.6515 18.165 10.8411 18.165 10.0004C18.165 9.15956 18.0233 8.34846 17.7617 7.58925C17.642 7.2423 17.264 7.05777 16.917 7.17714C16.5698 7.29679 16.3852 7.67561 16.5049 8.02284C16.7193 8.64512 16.835 9.30975 16.835 10.0004C16.8349 10.6908 16.7192 11.3548 16.5049 11.9769C16.3852 12.3242 16.5698 12.703 16.917 12.8226Z"}),_.createElement("path",{d:"M8.9834 2.95253C8.90632 2.59372 8.55322 2.36509 8.19434 2.44179C6.76126 2.74891 5.46855 3.41404 4.42871 4.33534L4.22461 4.52284C3.95829 4.77575 3.94729 5.19696 4.2002 5.46327C4.42146 5.69603 4.77088 5.73326 5.0332 5.56972L5.13965 5.48769C6.03496 4.63746 7.18337 4.01888 8.47266 3.74257C8.83177 3.66561 9.06036 3.31165 8.9834 2.95253Z"}),_.createElement("path",{d:"M15.5713 4.33534C14.5314 3.41404 13.2387 2.74891 11.8057 2.44179C11.4468 2.36509 11.0937 2.59372 11.0166 2.95253C10.9396 3.31165 11.1682 3.66561 11.5273 3.74257C12.7361 4.00161 13.8209 4.56094 14.6895 5.33046L14.8604 5.48769L14.9668 5.56972C15.2291 5.73326 15.5785 5.69603 15.7998 5.46327C16.0211 5.23025 16.0403 4.87902 15.8633 4.62538L15.7754 4.52284L15.5713 4.33534Z"})),OZe=Object.freeze(Object.defineProperty({__proto__:null,default:ZR},Symbol.toStringTag,{value:"Module"})),KR=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M4.52148 15.1664C4.61337 14.8108 4.39951 14.4478 4.04395 14.3559C3.73281 14.2756 3.41605 14.4295 3.28027 14.7074L3.2334 14.8334C3.13026 15.2324 3.0046 15.6297 2.86133 16.0287L2.71289 16.4281C2.63179 16.6393 2.66312 16.8775 2.79688 17.06C2.93067 17.2424 3.14825 17.3443 3.37402 17.3305L3.7793 17.3002C4.62726 17.2265 5.44049 17.0856 6.23438 16.8764C6.84665 17.1788 7.50422 17.4101 8.19434 17.558C8.55329 17.6348 8.9064 17.4062 8.9834 17.0473C9.06036 16.6882 8.83177 16.3342 8.47266 16.2572C7.81451 16.1162 7.19288 15.8862 6.62305 15.5815C6.50913 15.5206 6.38084 15.4946 6.25391 15.5053L6.12793 15.5277C5.53715 15.6955 4.93256 15.819 4.30566 15.9027C4.33677 15.8053 4.36932 15.7081 4.39844 15.6098L4.52148 15.1664Z"}),_.createElement("path",{d:"M15.7998 14.5365C15.5786 14.3039 15.2291 14.2666 14.9668 14.4301L14.8604 14.5131C13.9651 15.3633 12.8166 15.9809 11.5273 16.2572C11.1682 16.3342 10.9396 16.6882 11.0166 17.0473C11.0936 17.4062 11.4467 17.6348 11.8057 17.558C13.2388 17.2509 14.5314 16.5858 15.5713 15.6645L15.7754 15.477C16.0417 15.2241 16.0527 14.8028 15.7998 14.5365Z"}),_.createElement("path",{d:"M2.23828 7.58927C1.97668 8.34847 1.83496 9.15958 1.83496 10.0004C1.835 10.736 1.94324 11.4483 2.14551 12.1234L2.23828 12.4106C2.35793 12.7576 2.73588 12.9421 3.08301 12.8227C3.3867 12.718 3.56625 12.4154 3.52637 12.1088L3.49512 11.977C3.2808 11.3549 3.16508 10.6908 3.16504 10.0004C3.16504 9.30977 3.28072 8.64514 3.49512 8.02286C3.61476 7.67563 3.43024 7.2968 3.08301 7.17716C2.73596 7.05778 2.35799 7.24232 2.23828 7.58927Z"}),_.createElement("path",{d:"M16.917 12.8227C17.2641 12.9421 17.6421 12.7576 17.7617 12.4106C18.0233 11.6515 18.165 10.8411 18.165 10.0004C18.165 9.15958 18.0233 8.34847 17.7617 7.58927C17.642 7.24231 17.264 7.05778 16.917 7.17716C16.5698 7.2968 16.3852 7.67563 16.5049 8.02286C16.7193 8.64514 16.835 9.30977 16.835 10.0004C16.8349 10.6908 16.7192 11.3549 16.5049 11.977C16.3852 12.3242 16.5698 12.703 16.917 12.8227Z"}),_.createElement("path",{d:"M8.9834 2.95255C8.90632 2.59374 8.55322 2.3651 8.19434 2.44181C6.76126 2.74892 5.46855 3.41405 4.42871 4.33536L4.22461 4.52286C3.95829 4.77577 3.94729 5.19697 4.2002 5.46329C4.42146 5.69604 4.77088 5.73328 5.0332 5.56973L5.13965 5.4877C6.03496 4.63748 7.18337 4.0189 8.47266 3.74259C8.83177 3.66563 9.06036 3.31166 8.9834 2.95255Z"}),_.createElement("path",{d:"M15.5713 4.33536C14.5314 3.41405 13.2387 2.74892 11.8057 2.44181C11.4468 2.3651 11.0937 2.59374 11.0166 2.95255C10.9396 3.31166 11.1682 3.66563 11.5273 3.74259C12.7361 4.00163 13.8209 4.56095 14.6895 5.33048L14.8604 5.4877L14.9668 5.56973C15.2291 5.73327 15.5785 5.69604 15.7998 5.46329C16.0211 5.23026 16.0403 4.87903 15.8633 4.6254L15.7754 4.52286L15.5713 4.33536Z"})),t5=Object.freeze(Object.defineProperty({__proto__:null,default:KR},Symbol.toStringTag,{value:"Module"}));function DZe({clientThreadId:t,variant:e="default"}){const n=V(),s=Ve(t,he.getIsNewConversation),o=re(()=>Mf(n)),a=at(),[,i]=Us(),l=()=>{B.logEvent("Temporary Chat Move: Temporary Chat Button Clicked"),s?i(f=>(f.has(Nm)?f.delete(Nm):f.set(Nm,"true"),f),{replace:!0}):Tr(a,{params:o?void 0:new URLSearchParams({[Nm]:"true"})})},c=ne(),d=o?c.formatMessage({id:"0emak7",defaultMessage:"Turn off temporary chat"}):c.formatMessage({id:"x2lslS",defaultMessage:"Turn on temporary chat"}),u=o?ZR:KR;return r.jsx(pt,{label:d,children:e==="default"?r.jsx(Xf,{className:"rounded-full!","aria-label":d,onClick:l,icon:u}):r.jsx(ye,{className:"text-token-text-secondary rounded-lg",color:"ghost",icon:u,onClick:l,label:d})})}const a0e={type:"spring",bounce:.1,duration:.3},FZe={type:"spring",bounce:.1,duration:.24},QR={duration:1e-14};function Np(t,[e,n]){return Math.min(n,Math.max(e,t))}var r0e=[" ","Enter","ArrowUp","ArrowDown"],i0e=[" ","Enter"],mm="Select",[M1,A1,l0e]=n3(mm),[Wd]=kl(mm,[l0e,fh]),I1=fh(),[c0e,Ii]=Wd(mm),[d0e,u0e]=Wd(mm),JR=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:m,required:g,form:p}=t,h=I1(e),[x,v]=_.useState(null),[y,b]=_.useState(null),[C,S]=_.useState(!1),E=hh(d),[k=!1,T]=hr({prop:s,defaultProp:o,onChange:a}),[M,A]=hr({prop:i,defaultProp:l,onChange:c}),I=_.useRef(null),N=x?p||!!x.closest("form"):!0,[L,O]=_.useState(new Set),D=Array.from(L).map($=>$.props.value).join(";");return r.jsx(aT,U(w({},h),{children:r.jsxs(c0e,{required:g,scope:e,trigger:x,onTriggerChange:v,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:mh(),value:M,onValueChange:A,open:k,onOpenChange:T,dir:E,triggerPointerDownPosRef:I,disabled:m,children:[r.jsx(M1.Provider,{scope:e,children:r.jsx(d0e,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback($=>{O(H=>new Set(H).add($))},[]),onNativeOptionRemove:_.useCallback($=>{O(H=>{const G=new Set(H);return G.delete($),G})},[]),children:n})}),N?r.jsxs(CL,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:f,value:M,onChange:$=>A($.target.value),disabled:m,form:p,children:[M===void 0?r.jsx("option",{value:""}):null,Array.from(L)]},D):null]})}))};JR.displayName=mm;var XR="SelectTrigger",eL=_.forwardRef((t,e)=>{const h=t,{__scopeSelect:n,disabled:s=!1}=h,o=we(h,["__scopeSelect","disabled"]),a=I1(n),i=Ii(XR,n),l=i.disabled||s,c=On(e,i.onTriggerChange),d=A1(n),u=_.useRef("touch"),[f,m,g]=SL(x=>{const v=d().filter(C=>!C.disabled),y=v.find(C=>C.value===i.value),b=wL(v,x,y);b!==void 0&&i.onValueChange(b.value)}),p=x=>{l||(i.onOpenChange(!0),g()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(Qy,U(w({asChild:!0},a),{children:r.jsx(un.button,U(w({type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":bL(i.value)?"":void 0},o),{ref:c,onClick:Rt(o.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&p(x)}),onPointerDown:Rt(o.onPointerDown,x=>{u.current=x.pointerType;const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(p(x),x.preventDefault())}),onKeyDown:Rt(o.onKeyDown,x=>{const v=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(v&&x.key===" ")&&r0e.includes(x.key)&&(p(),x.preventDefault())})}))}))});eL.displayName=XR;var tL="SelectValue",nL=_.forwardRef((t,e)=>{const m=t,{__scopeSelect:n,className:s,style:o,children:a,placeholder:i=""}=m,l=we(m,["__scopeSelect","className","style","children","placeholder"]),c=Ii(tL,n),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,f=On(e,c.onValueNodeChange);return _r(()=>{d(u)},[d,u]),r.jsx(un.span,U(w({},l),{ref:f,style:{pointerEvents:"none"},children:bL(c.value)?r.jsx(r.Fragment,{children:i}):a}))});nL.displayName=tL;var f0e="SelectIcon",sL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n,children:s}=a,o=we(a,["__scopeSelect","children"]);return r.jsx(un.span,U(w({"aria-hidden":!0},o),{ref:e,children:s||""}))});sL.displayName=f0e;var m0e="SelectPortal",oL=t=>r.jsx(Jy,w({asChild:!0},t));oL.displayName=m0e;var xl="SelectContent",aL=_.forwardRef((t,e)=>{const n=Ii(xl,t.__scopeSelect),[s,o]=_.useState();if(_r(()=>{o(new DocumentFragment)},[]),!n.open){const a=s;return a?sr.createPortal(r.jsx(rL,{scope:t.__scopeSelect,children:r.jsx(M1.Slot,{scope:t.__scopeSelect,children:r.jsx("div",{children:t.children})})}),a):null}return r.jsx(iL,U(w({},t),{ref:e}))});aL.displayName=xl;var Ro=10,[rL,ji]=Wd(xl),g0e="SelectContentImpl",iL=_.forwardRef((t,e)=>{const X=t,{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:p,hideWhenDetached:h,avoidCollisions:x}=X,v=we(X,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),y=Ii(xl,n),[b,C]=_.useState(null),[S,E]=_.useState(null),k=On(e,ee=>C(ee)),[T,M]=_.useState(null),[A,I]=_.useState(null),N=A1(n),[L,O]=_.useState(!1),D=_.useRef(!1);_.useEffect(()=>{if(b)return rT(b)},[b]),cT();const $=_.useCallback(ee=>{const[ie,...de]=N().map(pe=>pe.ref.current),[me]=de.slice(-1),xe=document.activeElement;for(const pe of ee)if(pe===xe||(pe==null||pe.scrollIntoView({block:"nearest"}),pe===ie&&S&&(S.scrollTop=0),pe===me&&S&&(S.scrollTop=S.scrollHeight),pe==null||pe.focus(),document.activeElement!==xe))return},[N,S]),H=_.useCallback(()=>$([T,b]),[$,T,b]);_.useEffect(()=>{L&&H()},[L,H]);const{onOpenChange:G,triggerPointerDownPosRef:Z}=y;_.useEffect(()=>{if(b){let ee={x:0,y:0};const ie=me=>{var xe,pe,Me,Ce;ee={x:Math.abs(Math.round(me.pageX)-((pe=(xe=Z.current)==null?void 0:xe.x)!=null?pe:0)),y:Math.abs(Math.round(me.pageY)-((Ce=(Me=Z.current)==null?void 0:Me.y)!=null?Ce:0))}},de=me=>{ee.x<=10&&ee.y<=10?me.preventDefault():b.contains(me.target)||G(!1),document.removeEventListener("pointermove",ie),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",de,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",de,{capture:!0})}}},[b,G,Z]),_.useEffect(()=>{const ee=()=>G(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[G]);const[Q,q]=SL(ee=>{const ie=N().filter(xe=>!xe.disabled),de=ie.find(xe=>xe.ref.current===document.activeElement),me=wL(ie,ee,de);me&&setTimeout(()=>me.ref.current.focus())}),Y=_.useCallback((ee,ie,de)=>{const me=!D.current&&!de;(y.value!==void 0&&y.value===ie||me)&&(M(ee),me&&(D.current=!0))},[y.value]),te=_.useCallback(()=>b==null?void 0:b.focus(),[b]),ae=_.useCallback((ee,ie,de)=>{const me=!D.current&&!de;(y.value!==void 0&&y.value===ie||me)&&I(ee)},[y.value]),se=s==="popper"?Ux:lL,ce=se===Ux?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:p,hideWhenDetached:h,avoidCollisions:x}:{};return r.jsx(rL,{scope:n,content:b,viewport:S,onViewportChange:E,itemRefCallback:Y,selectedItem:T,onItemLeave:te,itemTextRefCallback:ae,focusSelectedItem:H,selectedItemText:A,position:s,isPositioned:L,searchRef:Q,children:r.jsx(iT,{as:lT,allowPinchZoom:!0,children:r.jsx(dT,{asChild:!0,trapped:y.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:Rt(o,ee=>{var ie;(ie=y.trigger)==null||ie.focus({preventScroll:!0}),ee.preventDefault()}),children:r.jsx(uT,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:r.jsx(se,U(w(w({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ee=>ee.preventDefault()},v),ce),{onPlaced:()=>O(!0),ref:k,style:w({display:"flex",flexDirection:"column",outline:"none"},v.style),onKeyDown:Rt(v.onKeyDown,ee=>{const ie=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!ie&&ee.key.length===1&&q(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let me=N().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const xe=ee.target,pe=me.indexOf(xe);me=me.slice(pe+1)}setTimeout(()=>$(me)),ee.preventDefault()}})}))})})})})});iL.displayName=g0e;var p0e="SelectItemAlignedPosition",lL=_.forwardRef((t,e)=>{const k=t,{__scopeSelect:n,onPlaced:s}=k,o=we(k,["__scopeSelect","onPlaced"]),a=Ii(xl,n),i=ji(xl,n),[l,c]=_.useState(null),[d,u]=_.useState(null),f=On(e,T=>u(T)),m=A1(n),g=_.useRef(!1),p=_.useRef(!0),{viewport:h,selectedItem:x,selectedItemText:v,focusSelectedItem:y}=i,b=_.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&h&&x&&v){const T=a.trigger.getBoundingClientRect(),M=d.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),I=v.getBoundingClientRect();if(a.dir!=="rtl"){const xe=I.left-M.left,pe=A.left-xe,Me=T.left-pe,Ce=T.width+Me,ke=Math.max(Ce,M.width),Le=window.innerWidth-Ro,De=Np(pe,[Ro,Math.max(Ro,Le-ke)]);l.style.minWidth=Ce+"px",l.style.left=De+"px"}else{const xe=M.right-I.right,pe=window.innerWidth-A.right-xe,Me=window.innerWidth-T.right-pe,Ce=T.width+Me,ke=Math.max(Ce,M.width),Le=window.innerWidth-Ro,De=Np(pe,[Ro,Math.max(Ro,Le-ke)]);l.style.minWidth=Ce+"px",l.style.right=De+"px"}const N=m(),L=window.innerHeight-Ro*2,O=h.scrollHeight,D=window.getComputedStyle(d),$=parseInt(D.borderTopWidth,10),H=parseInt(D.paddingTop,10),G=parseInt(D.borderBottomWidth,10),Z=parseInt(D.paddingBottom,10),Q=$+H+O+Z+G,q=Math.min(x.offsetHeight*5,Q),Y=window.getComputedStyle(h),te=parseInt(Y.paddingTop,10),ae=parseInt(Y.paddingBottom,10),se=T.top+T.height/2-Ro,ce=L-se,X=x.offsetHeight/2,ee=x.offsetTop+X,ie=$+H+ee,de=Q-ie;if(ie<=se){const xe=N.length>0&&x===N[N.length-1].ref.current;l.style.bottom="0px";const pe=d.clientHeight-h.offsetTop-h.offsetHeight,Me=Math.max(ce,X+(xe?ae:0)+pe+G),Ce=ie+Me;l.style.height=Ce+"px"}else{const xe=N.length>0&&x===N[0].ref.current;l.style.top="0px";const Me=Math.max(se,$+h.offsetTop+(xe?te:0)+X)+de;l.style.height=Me+"px",h.scrollTop=ie-se+h.offsetTop}l.style.margin="".concat(Ro,"px 0"),l.style.minHeight=q+"px",l.style.maxHeight=L+"px",s==null||s(),requestAnimationFrame(()=>g.current=!0)}},[m,a.trigger,a.valueNode,l,d,h,x,v,a.dir,s]);_r(()=>b(),[b]);const[C,S]=_.useState();_r(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const E=_.useCallback(T=>{T&&p.current===!0&&(b(),y==null||y(),p.current=!1)},[b,y]);return r.jsx(_0e,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:E,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:r.jsx(un.div,U(w({},o),{ref:f,style:w({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})});lL.displayName=p0e;var h0e="SelectPopperPosition",Ux=_.forwardRef((t,e)=>{const l=t,{__scopeSelect:n,align:s="start",collisionPadding:o=Ro}=l,a=we(l,["__scopeSelect","align","collisionPadding"]),i=I1(n);return r.jsx(fT,U(w(w({},i),a),{ref:e,align:s,collisionPadding:o,style:U(w({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Ux.displayName=h0e;var[_0e,n5]=Wd(xl,{}),$x="SelectViewport",cL=_.forwardRef((t,e)=>{const d=t,{__scopeSelect:n,nonce:s}=d,o=we(d,["__scopeSelect","nonce"]),a=ji($x,n),i=n5($x,n),l=On(e,a.onViewportChange),c=_.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(M1.Slot,{scope:n,children:r.jsx(un.div,U(w({"data-radix-select-viewport":"",role:"presentation"},o),{ref:l,style:w({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:Rt(o.onScroll,u=>{const f=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:g}=i;if(g!=null&&g.current&&m){const p=Math.abs(c.current-f.scrollTop);if(p>0){const h=window.innerHeight-Ro*2,x=parseFloat(m.style.minHeight),v=parseFloat(m.style.height),y=Math.max(x,v);if(y<h){const b=y+p,C=Math.min(h,b),S=b-C;m.style.height=C+"px",m.style.bottom==="0px"&&(f.scrollTop=S>0?S:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})}))})]})});cL.displayName=$x;var dL="SelectGroup",[x0e,y0e]=Wd(dL),uL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,s=we(a,["__scopeSelect"]),o=mh();return r.jsx(x0e,{scope:n,id:o,children:r.jsx(un.div,U(w({role:"group","aria-labelledby":o},s),{ref:e}))})});uL.displayName=dL;var fL="SelectLabel",mL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,s=we(a,["__scopeSelect"]),o=y0e(fL,n);return r.jsx(un.div,U(w({id:o.id},s),{ref:e}))});mL.displayName=fL;var Pp="SelectItem",[v0e,gL]=Wd(Pp),pL=_.forwardRef((t,e)=>{const y=t,{__scopeSelect:n,value:s,disabled:o=!1,textValue:a}=y,i=we(y,["__scopeSelect","value","disabled","textValue"]),l=Ii(Pp,n),c=ji(Pp,n),d=l.value===s,[u,f]=_.useState(a!=null?a:""),[m,g]=_.useState(!1),p=On(e,b=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,b,s,o)}),h=mh(),x=_.useRef("touch"),v=()=>{o||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(v0e,{scope:n,value:s,disabled:o,textId:h,isSelected:d,onItemTextChange:_.useCallback(b=>{f(C=>{var S;return C||((S=b==null?void 0:b.textContent)!=null?S:"").trim()})},[]),children:r.jsx(M1.ItemSlot,{scope:n,value:s,disabled:o,textValue:u,children:r.jsx(un.div,U(w({role:"option","aria-labelledby":h,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},i),{ref:p,onFocus:Rt(i.onFocus,()=>g(!0)),onBlur:Rt(i.onBlur,()=>g(!1)),onClick:Rt(i.onClick,()=>{x.current!=="mouse"&&v()}),onPointerUp:Rt(i.onPointerUp,()=>{x.current==="mouse"&&v()}),onPointerDown:Rt(i.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:Rt(i.onPointerMove,b=>{var C;x.current=b.pointerType,o?(C=c.onItemLeave)==null||C.call(c):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Rt(i.onPointerLeave,b=>{var C;b.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:Rt(i.onKeyDown,b=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&b.key===" "||(i0e.includes(b.key)&&v(),b.key===" "&&b.preventDefault())})}))})})});pL.displayName=Pp;var Au="SelectItemText",hL=_.forwardRef((t,e)=>{const v=t,{__scopeSelect:n,className:s,style:o}=v,a=we(v,["__scopeSelect","className","style"]),i=Ii(Au,n),l=ji(Au,n),c=gL(Au,n),d=u0e(Au,n),[u,f]=_.useState(null),m=On(e,y=>f(y),c.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,y,c.value,c.disabled)}),g=u==null?void 0:u.textContent,p=_.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:h,onNativeOptionRemove:x}=d;return _r(()=>(h(p),()=>x(p)),[h,x,p]),r.jsxs(r.Fragment,{children:[r.jsx(un.span,U(w({id:c.textId},a),{ref:m})),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?sr.createPortal(a.children,i.valueNode):null]})});hL.displayName=Au;var _L="SelectItemIndicator",xL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,s=we(a,["__scopeSelect"]);return gL(_L,n).isSelected?r.jsx(un.span,U(w({"aria-hidden":!0},s),{ref:e})):null});xL.displayName=_L;var Vx="SelectScrollUpButton",b0e=_.forwardRef((t,e)=>{const n=ji(Vx,t.__scopeSelect),s=n5(Vx,t.__scopeSelect),[o,a]=_.useState(!1),i=On(e,s.onScrollButtonChange);return _r(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?r.jsx(yL,U(w({},t),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null});b0e.displayName=Vx;var Hx="SelectScrollDownButton",C0e=_.forwardRef((t,e)=>{const n=ji(Hx,t.__scopeSelect),s=n5(Hx,t.__scopeSelect),[o,a]=_.useState(!1),i=On(e,s.onScrollButtonChange);return _r(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?r.jsx(yL,U(w({},t),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null});C0e.displayName=Hx;var yL=_.forwardRef((t,e)=>{const d=t,{__scopeSelect:n,onAutoScroll:s}=d,o=we(d,["__scopeSelect","onAutoScroll"]),a=ji("SelectScrollButton",n),i=_.useRef(null),l=A1(n),c=_.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return _.useEffect(()=>()=>c(),[c]),_r(()=>{var f;const u=l().find(m=>m.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(un.div,U(w({"aria-hidden":!0},o),{ref:e,style:w({flexShrink:0},o.style),onPointerDown:Rt(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:Rt(o.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:Rt(o.onPointerLeave,()=>{c()})}))}),S0e="SelectSeparator",vL=_.forwardRef((t,e)=>{const o=t,{__scopeSelect:n}=o,s=we(o,["__scopeSelect"]);return r.jsx(un.div,U(w({"aria-hidden":!0},s),{ref:e}))});vL.displayName=S0e;var Gx="SelectArrow",w0e=_.forwardRef((t,e)=>{const l=t,{__scopeSelect:n}=l,s=we(l,["__scopeSelect"]),o=I1(n),a=Ii(Gx,n),i=ji(Gx,n);return a.open&&i.position==="popper"?r.jsx(mT,U(w(w({},o),s),{ref:e})):null});w0e.displayName=Gx;function bL(t){return t===""||t===void 0}var CL=_.forwardRef((t,e)=>{const l=t,{value:n}=l,s=we(l,["value"]),o=_.useRef(null),a=On(e,o),i=M3(n);return _.useEffect(()=>{const c=o.current,d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(i!==n&&f){const m=new Event("change",{bubbles:!0});f.call(c,n),c.dispatchEvent(m)}},[i,n]),r.jsx(s3,{asChild:!0,children:r.jsx("select",U(w({},s),{ref:a,defaultValue:n}))})});CL.displayName="BubbleSelect";function SL(t){const e=Ku(t),n=_.useRef(""),s=_.useRef(0),o=_.useCallback(i=>{const l=n.current+i;e(l),(function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),a=_.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,o,a]}function wL(t,e,n){const o=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let i=k0e(t,Math.max(a,0));o.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function k0e(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var E0e=JR,T0e=eL,M0e=nL,A0e=sL,I0e=oL,j0e=aL,kL=cL,N0e=uL,P0e=mL,R0e=pL,L0e=hL,O0e=xL,D0e=vL;const F0e=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>F(t)}),B0e=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yr),__vite__mapDeps([10,1,11])),{loading:t=>F(t)});function U0e(a,o){var i=a,{children:t,iconClassName:e,className:n}=i,s=we(i,["children","iconClassName","className"]);return r.jsxs(R0e,U(w({ref:o,className:z("__menu-item flex justify-between",n)},s),{children:[r.jsx(L0e,{children:t}),r.jsx(O0e,{className:"trailing",children:r.jsx(B0e,{className:e!=null?e:"icon-sm"})})]}))}function $0e(t){return r.jsx(SG,w({$as:T0e},t))}function V0e(s){var o=s,{children:t,className:e}=o,n=we(o,["children","className"]);return r.jsx(s8,U(w({$as:j0e,side:"bottom",sideOffset:4,alignOffset:-4,position:"popper",className:z("max-h-[60vh] min-w-[220px] overflow-auto",e)},n),{children:r.jsx(kL,{children:t})}))}function H0e(){return r.jsx(A0e,{children:r.jsx(F0e,{className:"icon-sm"})})}function G0e({className:t}){return r.jsx(D0e,{className:z("bg-token-border-default mx-5 my-2 h-px",t)})}function W0e({children:t,className:e}){return r.jsx(P0e,{className:z("text-token-text-secondary mx-2 my-1 px-3 text-xs font-semibold",e),children:t})}function BZe({options:t,value:e,onValueChange:n,disabled:s,defaultValue:o,placeholder:a,triggerClassName:i,contentClassName:l,triggerId:c}){return r.jsxs(Fn.Root,{value:e,onValueChange:n,disabled:s,defaultValue:o,children:[r.jsxs(Fn.Trigger,{className:i,id:c,children:[r.jsx(Fn.Value,{placeholder:a}),r.jsx(Fn.Icon,{})]}),r.jsx(Fn.Portal,{children:r.jsx(Fn.Content,{className:l,children:t.map(d=>r.jsx(Fn.Item,{value:d.value,children:d.label},d.value))})})]})}const Fn={Root:E0e,Trigger:$0e,Value:M0e,Icon:H0e,Portal:I0e,Content:V0e,Item:Yn.forwardRef(U0e),Separator:G0e,Label:W0e,Group:N0e,Viewport:kL};function z0e(t,e){const[n,s]=_.useState(t),o=_.useRef(fi(a=>s(a),e));return _.useEffect(()=>(o.current=fi(a=>{s(a)},e),()=>{var a;(a=o.current)==null||a.cancel()}),[e]),_.useEffect(()=>{var a;(a=o.current)==null||a.call(o,t)},[t]),n}var I0,JS;function q0e(){if(JS)return I0;JS=1;var t=ah();function e(n){return typeof n=="function"?n:t}return I0=e,I0}var j0,XS;function Y0e(){if(XS)return j0;XS=1;var t=wG(),e=q0e(),n=f8(),s=9007199254740991,o=4294967295,a=Math.min;function i(l,c){if(l=n(l),l<1||l>s)return[];var d=o,u=a(l,o);c=e(c),l-=o;for(var f=t(u,c);++d<l;)c(d);return f}return j0=i,j0}var Z0e=Y0e();const EL=Zn(Z0e);function K0e(t){var e,n;return{sharedTextdocId:t.shared_textdoc_id,versionInt:(e=t.version)!=null?e:void 0,title:t.name,type:hl(t.textdoc_type),content:t.content,access:rte(t.access),isModerationBlocked:t.is_moderation_blocked,isAnonifyApiKeyDetected:(n=t.is_anonify_api_key_detected)!=null?n:!1}}const Q0e=4e4,J0e={[Ye.FREE]:8e3,[Ye.GO]:8e3,[Ye.PLUS]:32e3,[Ye.PRO]:128e3,[Ye.SELF_SERVE_BUSINESS]:32e3,[Ye.ENTERPRISE_CBP]:128e3,[Ye.EDUCATION_CBP]:32e3,[Ye.K12]:32e3,[Ye.QUORUM]:128e3,[Ye.DEPRECATED_ENTERPRISE]:128e3,[Ye.DEPRECATED_EDU]:32e3};function UZe(t){return Math.round(J0e[t]/3*4)}const X0e="max-length-toast",TL=fi((t,e,n,s=1.5)=>t.warning(e,{description:n,duration:s,id:X0e}),500,{leading:!0,trailing:!1});function $Ze(t,e,n){TL(t,e.formatMessage(Rp.exceededMaxLengthTitle),e.formatMessage(Rp.exceededMaxLengthDescription),n)}function e2e(t,e,n){TL(t,e.formatMessage(Rp.exceededMaxLengthTitle),e.formatMessage(Rp.exceededMaxLengthForTruncatedMessageDescription),n)}const Rp=Se({exceededMaxLengthDescription:{id:"YhSTHh",defaultMessage:"The document might be longer than a canvas can currently handle. To edit, please reduce the length."},exceededMaxLengthForTruncatedMessageDescription:{id:"r87COE",defaultMessage:"The document was truncated because it was too long."},exceededMaxLengthTitle:{id:"v9nHC8",defaultMessage:"Document may exceed maximum length"}}),j1="temp";function ML(t,e){return"".concat(j1,"-tdc-").concat(e,"-").concat(t)}function s5(t){return"".concat(j1,"-td-").concat(t)}function t2e(){return"".concat(j1,"-td-user:").concat(Date.now())}function n2e(t){return"".concat(j1,"-td-remix:").concat(t)}const zd=Ft(Mn(()=>({attachedTempTextdocs:{}}))),{setState:Da,getState:s2e}=zd,o2e=7e3,AL={createTempTextdoc:(t,e,n,s)=>{const o=t2e(),a=s?hl("code/"+s):aI(t)?lr.CODE_OTHER:lr.DOCUMENT;Da(d=>{d.attachedTempTextdocs[o]={tempTextdocId:o,createdAt:Date.now(),status:io.INFERRING,type:a,title:e,content:t,create_source:n,hasUserEdits:!1}});let i=!1;const l=new Promise(d=>setTimeout(d,o2e)).then(()=>{i=!0}),c=ge.safePost("/conversation/textdocs/infer_metadata",{requestBody:{content:t.slice(0,Q0e)}}).then(({name:d,type:u})=>{i||Da(f=>{f.attachedTempTextdocs[o]&&(f.attachedTempTextdocs[o].title=d,f.attachedTempTextdocs[o].type=hl(u))})});return Promise.race([l,c]).finally(()=>{Da(d=>{d.attachedTempTextdocs[o]&&(d.attachedTempTextdocs[o].status=io.PENDING)})}),o},createRemixTempTextdoc:(t,e)=>{const n=n2e(t);if(!s2e().attachedTempTextdocs[n])return Da(s=>{s.attachedTempTextdocs[n]={tempTextdocId:n,createdAt:Date.now(),status:io.PENDING,type:lr.LOADING,title:"",content:"",create_source:mf.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:t}}),ge.safeGet("/textdoc/shared/{shared_textdoc_id}",{parameters:{path:{shared_textdoc_id:t}}}).then(({shared_textdoc:s})=>{const o=K0e(s);Da(a=>{a.attachedTempTextdocs[n]={tempTextdocId:n,createdAt:Date.now(),status:io.PENDING,type:o.type,title:e.formatMessage({id:"cuH4su",defaultMessage:"Copy of {title}"},{title:o.title}),content:o.content,create_source:mf.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:o.sharedTextdocId}})}).catch(()=>{AL.removeTempTextdoc(n),window.location.href=kG(EG.CANVAS_NOT_FOUND)}),n},replaceTempTextdocContent:(t,e)=>{Da(n=>{n.attachedTempTextdocs[t].content=e,n.attachedTempTextdocs[t].hasUserEdits=!0})},markAsSent:t=>{Da(e=>{e.attachedTempTextdocs[t].status===io.PENDING?e.attachedTempTextdocs[t].status=io.SENT:delete e.attachedTempTextdocs[t]})},markAllAsSent:()=>{Da(t=>{for(const e of Object.keys(t.attachedTempTextdocs))t.attachedTempTextdocs[e].status===io.PENDING?t.attachedTempTextdocs[e].status=io.SENT:delete t.attachedTempTextdocs[e]})},removeTempTextdoc:t=>{Da(e=>{delete e.attachedTempTextdocs[t]})}},gm=Ol(({attachedTempTextdocs:t})=>t),a2e=Ol(t=>Object.values(t)),o5=Ol(t=>Object.values(t).filter(e=>e.status!==io.SENT)),r2e=()=>o5(gm(zd.getState())),i2e=()=>zd(t=>a2e(gm(t))),l2e=()=>zd(t=>o5(gm(t))),VZe=t=>zd(e=>{if(t)return gm(e)[t]}),HZe=()=>zd(t=>o5(gm(t)).length>0),c2e=t=>{const[e,n]=_.useState(null),s=_.useCallback(a=>{n(i=>{if(!i)return[a];const l=[...i];for(let c=0;c<i.length;c++)l[c].id===a.id?l[c]=a:c===l.length-1&&l.push(a);return l})},[]),o=_.useCallback(()=>n(null),[]);return Q6(hp.TurnComplete,async()=>{await t(),o()}),Q6(hp.CanvasMessage,async({message:a})=>{var d;const{message:i}=a,{recipient:l,author:c}=i;(l!=null&&l.startsWith(li)||(d=c.name)!=null&&d.startsWith(li))&&s(i)}),e};function d2e(t,e){return t.replace(new RegExp("\\\\(\\d+)|\\\\g<(?:(\\d+)|(\\D[^>]*))>|((?<!\\\\)\\\\(?:g(?:<[^>]*)?)?$)","gi"),(n,s,o,a,i)=>{var c,d,u;if(s==="0")return"\\0";const l=s!=null?s:o;if(l)return(c=e[p8(l)])!=null?c:"";if(a)return(u=(d=e.groups)==null?void 0:d[a])!=null?u:"";if(i)return"";throw new Error("Unreachable")})}function u2e(t,e){var x;let n="",s=0,o=0,a=0,i=0,l=!1;const c=v=>{s+=v},d=v=>{s>o&&(n+=t.slice(o,s)),s=o=s+v},u=v=>{d(0),n+=v},f=()=>{u("\\"),c(1)},m=v=>{if(s+v<t.length)return t[s+v]},g=(v,y=0)=>s+y<t.length&&v===t[s+y],p=v=>{const y=t.indexOf(v,s);if(y===-1)d(t.length-s);else return y-s},h=v=>{let y=1;if(m(v)==="\\"){const C=m(v+1);y=C==="U"?10:C==="u"?6:C==="x"?4:2}const b=s+v+y>t.length;return b&&d(t.length-s),b};for(;s<t.length;){if(g("\\")){if(h(0))continue;const b=(x=m(1))!=null?x:"";if(b==="a")d(2),u("\\x07");else if(b==="A")d(2),u("^");else if(b==="z")d(2),u("$");else if(b==="Z")d(2),u("(?=\\n?$)");else if(b==="U"){const C=t.slice(s+2,s+10);d(10),u("\\u{".concat(parseInt(C,16).toString(16),"}"))}else if(b==="u")c(6);else if(b==="x")c(4);else{let C;l?C=/[0bdDsSwWfnrtv()[\]{}|/\\^-]/.test(b):/[1-9]/.test(b)?C=parseInt(b,10)<=i:C=/[0bBdDsSwWfnrtv()[\]{}|/\\^$.?*+]/.test(b),C?c(2):d(1)}continue}if(g("]")){l?(l=!1,c(1)):f();continue}else if(l){if(g("-")&&h(1))continue;/[()[\]{}|/\\]/.test(t[s])?f():c(1);continue}else if(g("[")){l=!0,c(1),g("]")&&f();continue}if(g("|")&&h(1))continue;if(g("{")){const b=/^\{(?:\d+(?:,\d*)?(\}|$)|$)/.exec(t.slice(s));s>0&&(b==null?void 0:b[1])==="}"?c(b[0].length):s>0&&b&&e?d(b[0].length):f();continue}else if(g("}")){f();continue}if(g("+")){const b=m(-1);b&&/[*+?}]/.test(b)&&m(-2)!=="\\"?d(1):c(1);continue}if(g(")")){a>0?(a--,c(1)):f();continue}if(!g("(")){c(1);continue}if(h(1))continue;if(m(1)!=="?"){a++,i++,c(1);continue}if(h(2))continue;const v=m(2);if(!v){d(2);continue}if(v==="#"){const b=p(")");b&&d(1+b);continue}if(v==="P"){if(m(3)==="="){const b=p(")");if(b){const C=t.slice(s+4,s+b);d(1+b),u("\\k<".concat(C,">"))}}else{const b=p(">");if(b){const C=t.slice(s+4,s+b);if(d(1+b),h(0))continue;u("(?<".concat(C,">")),a++}}continue}if(/[-a-z]/.test(v)){const b=t.indexOf(":",s)>=0,C=p(b?":":")");if(C&&d(1+C),b){if(h(0))continue;u("(?:"),a++}continue}if(v===">"){if(d(3),h(0))continue;u("(?:"),a++;continue}const y=v==="<"?4:3;h(y)||(c(y),a++)}for(n+=t.slice(o,t.length),l&&(n+="]");a-- >0;)n+=")";return n.length>0?n:"(?!)"}function ew(t){const e=[/^`{1,3}\s*$/,/^```[^\n]*\n?/],n=[/\n?`{1,3}\s*$/];for(const s of e)if(s.test(t)){t=t.replace(s,"");break}for(const s of n)if(s.test(t)){t=t.replace(s,"");break}return t}function IL(t){let e=t;return e=e.replace(/\.[^/.]+$/,""),e=e.replace(/_/g," "),e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" ")}function Lp(t,e){return e!=null||t!=null?{modelSelectionPositionRange:e,modelCursorPosition:t}:void 0}function f2e(t,e,n){const s=[],o=e.start-e.end+n;for(const a of t){const i=m2e(a.at,e,o);i&&s.push(i===a.at?a:U(w({},a),{at:i}))}return s}function m2e(t,e,n){return e.start>=t.end?t:e.start<=t.start&&e.end>=t.end?null:e.end<=t.start?n===0?t:{start:t.start+n,end:t.end+n}:e.start<=t.start?{start:e.end+n,end:t.end+n}:e.end>=t.end?{start:t.start,end:e.start}:{start:t.start,end:t.end+n}}const g2e=/[*_-\s\d.\\`]+$/;function Wx(t,e){return e?t.replace(g2e,""):t}function jL(t,e){return Xr(t,n=>{for(const s of e){if(s.kind===Bn.CREATE){const o=h2e(s);Vu(n,o)}else{const o=n.textdocById[s.textdocId];if(!o){Fe.addError("Attempted to apply canmore operation to an unknown target id",{textdocOp:s});continue}const a=o.versions[o.versions.length-1],i=NL(a,s);Vu(n,i,p2e(a,s))}s.textdocId&&(n.latestTextdocId=s.textdocId)}})}function p2e(t,e){if(e.author.role===Ke.User)return t.messageId?!0:e.createdAt-t.createdAt>3600;switch(e.kind){case Bn.REWRITE:return!0;case Bn.EDIT:return e.messageId!==t.messageId;case Bn.ADD_COMMENT:return!1;case Bn.REMOVE_COMMENT:return!1}}function h2e(t){var s,o;const e=!!t.isPartial,n=Wx(t.content,e);return{textdocId:t.textdocId,versionInt:(s=t.versionInt)!=null?s:null,messageId:(o=t.messageId)!=null?o:null,title:t.title,type:t.type,content:n,createdAt:t.createdAt,status:e?Os.CREATING:Os.COMPLETE,comments:[],modelCursor:Lp(t.author.role===Ke.Assistant&&t.isPartial?n.length:void 0)}}function _2e(t,e){if(!t.isPartial)return;if(t.isPartialRange)return Lp(void 0,t.at);const n=t.at.start+e.length;return Lp(n)}function NL(t,e){var n,s,o,a,i,l,c,d,u,f;switch(e.kind){case Bn.REMOVE_COMMENT:return U(w({},t),{versionInt:(n=e.versionInt)!=null?n:t.versionInt,comments:t.comments.map(m=>m.id===e.commentId?U(w({},m),{status:e.reason===lI.ACCEPT?gx.ACCEPT_INITIATED:gx.DISMISSED}):m)});case Bn.REWRITE:{const m=t.status!==Os.COMPLETE||e.isPartial===!0,g=Wx(e.content,m),p=e.author.role===Ke.Assistant&&e.isPartial?g.length:void 0;return U(w({},t),{versionInt:(s=e.versionInt)!=null?s:t.versionInt,messageId:(o=e.messageId)!=null?o:null,content:g,createdAt:e.createdAt,comments:(a=e.comments)!=null?a:t.comments,status:e.isPartial?Os.REWRITING:Os.COMPLETE,modelCursor:Lp(p)})}case Bn.EDIT:{const m=e.isPartial&&e.isPartialRange?t.content.slice(e.at.start,e.at.end):Wx(e.content,e.isPartial===!0),g=t.content.slice(0,e.at.start)+m+t.content.slice(e.at.end);return U(w({},t),{versionInt:(i=e.versionInt)!=null?i:t.versionInt,messageId:(l=e.messageId)!=null?l:null,content:g,createdAt:e.createdAt,status:e.isPartial?Os.UPDATING:Os.COMPLETE,comments:f2e(t.comments,e.at,m.length),modelCursor:_2e(e,m)})}case Bn.ADD_COMMENT:{const m={id:(c=e.id)!=null?c:e.tempId,tempId:e.tempId,at:e.at,content:(d=e.content)!=null?d:""},g=t.comments.concat(m);return U(w({},t),{versionInt:(u=e.versionInt)!=null?u:t.versionInt,messageId:(f=e.messageId)!=null?f:null,createdAt:e.createdAt,status:e.isPartial?Os.COMMENTING:Os.COMPLETE,comments:g})}}}function x2e(t){let e="";const n=t.length;let s=0,o=0;for(;s<n;){let a=t.charCodeAt(s);if(a!==92){s++;continue}if(o<s&&(e+=t.slice(o,s)),s++,s>=n){e+="\\";break}switch(a=t.charCodeAt(s),a){case 110:e+="\n",s++;break;case 116:e+="	",s++;break;case 114:e+="\r",s++;break;case 98:e+="\b",s++;break;case 102:e+="\f",s++;break;case 118:e+="\v",s++;break;case 48:e+="\0",s++;break;case 39:e+="'",s++;break;case 34:e+='"',s++;break;case 92:e+="\\",s++;break;case 120:if(s+2<n){const i=parseInt(t.slice(s+1,s+3),16);if(!isNaN(i)){e+=String.fromCharCode(i),s+=3;break}}e+="\\x",s++;break;case 117:if(s+1<n)if(t.charAt(s+1)==="{"){const i=t.indexOf("}",s+2);if(i!==-1){const l=parseInt(t.slice(s+2,i),16);if(!isNaN(l)&&l<=1114111){e+=String.fromCodePoint(l),s=i+1;break}}}else{const i=parseInt(t.slice(s+1,s+5),16);if(!isNaN(i)){e+=String.fromCharCode(i),s+=5;break}}e+="\\u",s++;break;default:e+="\\"+t.charAt(s),s++;break}o=s}return o<n&&(e+=t.slice(o)),e}const tw=t=>t===" "||t==="\n"||t==="\r"||t==="	";function y2e(t,e=!1){let n=0,s=null;const o=[];if(!t)return[void 0,o];if(e)return[l(),o];try{return[JSON.parse(t),null]}catch(p){return s=p,[l(),o]}function a(){for(;n<t.length&&tw(t[n]);)n++;return n<t.length}function i(p){return a()&&t[n]===p?(n++,!0):!1}function l(){if(a())switch(t[n]){case"{":return f();case"[":return m();case'"':{const[p]=d();return p}case"f":return g("false",!1);case"t":return g("true",!0);case"n":return g("null",null);case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return u()}throw s}function c(p,h=!1){return h?x2e(p):p}function d(p=!1){const h=n+1;let x=!1;for(n++;n<t.length;){const v=t[n++];if(v==="\\"){if(x=!0,n===t.length||t[n]==="u"&&n+4>=t.length){const y=n-1;return n=t.length,[c(t.slice(h,y),x),!1]}n++;continue}if(v==='"'){let y=n;for(;y<t.length&&tw(t[y]);)y++;if(t[y]==null||t[y]===","||t[y]==="]"||t[y]==="}"||p&&t[y]===":")return[c(t.slice(h,n-1),x),!0]}}return[c(t.slice(h,n),x),!1]}function u(){const p=n;for(;n<t.length&&/[0-9.eE+-]/.test(t[n]);)n++;const h=Number(t.slice(p,n));if(isNaN(h)){if(a())throw s;return 0}return h}function f(){n++;const p={};if(i("}"))return p;for(;a();){const[h,x]=d(!0);if(!x||(o.push(h),!a()))break;if(!i(":"))throw s;if(!a()||(p[h]=l(),!a()))break;if(i("}")){o.pop();break}if(!i(","))throw s;o.pop()}return p}function m(){n++;const p=[];if(i("]"))return p;for(o.push(0);a()&&(p.push(l()),!!a());){if(i("]")){o.pop();break}if(!i(","))throw s;o[o.length-1]=p.length}return p}function g(p,h){const x=n+p.length;if(x<=t.length?t.slice(n,x)===p:p.startsWith(t.slice(n)))return n=x,h;throw s}}function Hu(t,e,n=!1){try{const[s,o]=y2e(t);return[e(s),o]}catch(s){return n&&Ll.logError("JSON parsing",s),[void 0,[]]}}function ru(t,e){return t!=null&&e.every((n,s)=>t[s]===n)}const v2e=Ho({type:ii(ms),name:ii(ms),content:ii(ms)}),b2e=Ho({updates:h8(Ho({pattern:ii(ms),multiple:ii(Du),replacement:ii(ms)}))}),C2e=Ho({comments:h8(Ho({pattern:ii(ms),comment:ii(ms)}))});function PL(t){var s;const e=t.author.name;if(!cN(e))return null;const n=(s=t==null?void 0:t.metadata)==null?void 0:s.canvas;return{function:e,status:w2e(t),textdocId:n==null?void 0:n.textdoc_id,type:(n==null?void 0:n.textdoc_type)&&hl(n.textdoc_type),versionInt:k2e(n),commentIds:n==null?void 0:n.comment_ids}}function RL(t,e,n){var d,u,f,m,g;const{id:s,author:o,recipient:a,create_time:i}=e;if(!i)throw new Error("Expected a create_time");const l=yo(e),c=n&&PL(n);if((d=e==null?void 0:e.metadata)!=null&&d.is_redacted||(c==null?void 0:c.status)===Et.REDACTED||l==="The output of this plugin was redacted.")return{function:a,status:Et.REDACTED,messageId:s,author:o,createdAt:i};switch(a){case zn.CreateTextdoc:{const[p,h]=Hu(l,v2e),x=(u=c==null?void 0:c.type)!=null?u:!(p!=null&&p.type)||ru(h,["type"])?void 0:hl(p.type);return{function:zn.CreateTextdoc,status:(f=c==null?void 0:c.status)!=null?f:N0(t,e,h!=null),messageId:s,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,title:p==null?void 0:p.name,type:x,content:p==null?void 0:p.content}}case zn.UpdateTextdoc:{const[p,h]=Hu(l,b2e,!t),x=p==null?void 0:p.updates.map((v,y)=>U(w({},v),{isPartialPattern:ru(h,["updates",y,"pattern"]),isPartial:ru(h,["updates",y])}));return{function:zn.UpdateTextdoc,status:(m=c==null?void 0:c.status)!=null?m:N0(t,e,h!=null),messageId:s,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,updates:x}}case zn.CommentTextdoc:{const[p,h]=Hu(l,C2e,!t),x=c==null?void 0:c.commentIds,v=p==null?void 0:p.comments.map((y,b)=>U(w({},y),{id:x==null?void 0:x[b],isPartialPattern:ru(h,["comments",b,"pattern"]),isPartial:ru(h,["comments",b])}));return{function:zn.CommentTextdoc,status:(g=c==null?void 0:c.status)!=null?g:N0(t,e,h!=null),messageId:s,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,comments:v}}}}function zx(t){return cN(t==null?void 0:t.recipient)}function S2e(t,e=0){for(let n=e;n<t.length;n++)if(zx(t[n]))return!0;return!1}function N0(t,e,n){var o,a;return((a=(o=e==null?void 0:e.metadata)==null?void 0:o.finish_details)==null?void 0:a.type)==="interrupted"?Et.CANCELED:t?n?Et.STREAMING:Et.WAITING:Et.FAILED}function w2e(t){var n,s;if((n=t==null?void 0:t.metadata)!=null&&n.is_redacted)return Et.REDACTED;if((t==null?void 0:t.content.content_type)===ut.SystemError)return Et.FAILED;const e=(s=t==null?void 0:t.metadata)==null?void 0:s.canvas;return e!=null&&e.is_failure!==!0?Et.COMPLETE:Et.FAILED}function k2e(t){var e;return(e=t==null?void 0:t.version)!=null?e:t==null?void 0:t.version_int}const E2e=5;function a5(t){var n;let e=null;for(let s=0;s<t.length;s++){const o=t[s];if(zx(o)){let a=null;for(let i=s+1;i<t.length;i++){const l=t[i];if(zx(l))break;if(((n=l.author)==null?void 0:n.name)===o.recipient){a=l;break}}e?e.push([o,a]):e=[[o,a]]}}return e}function T2e(t,e,n){let s=null;const o=a5(n);if(!o)return s;for(const[a,i]of o){const l=RL(t,a,i),c=M2e(e,l);c&&(e&&(e=jL(e,c)),s?s=s.concat(c):s=c)}return s}const P0=Ol((t,e,n)=>{Fe.addError(e,n)},([t],[e])=>t===e);function M2e(t,e){var a,i,l,c,d,u,f;if(e.status===Et.FAILED||e.status===Et.CANCELED)return null;if(e.function===zn.CreateTextdoc){if(!e.type)return null;const m=s5(e.messageId),g=e.content&&xp(e.type)?ew(e.content):e.content;return[{kind:Bn.CREATE,textdocId:(a=e.textdocId)!=null?a:m,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,tempTextdocId:m,title:IL((i=e.title)!=null?i:""),type:e.type,content:g!=null?g:"",isPartial:e.status===Et.STREAMING}]}const n=t==null?void 0:t.latestTextdocId,s=(l=e==null?void 0:e.textdocId)!=null?l:n;if(e.status===Et.COMPLETE&&(n?e!=null&&e.textdocId&&e.textdocId!==n&&P0(e.messageId,"Attempted to parse canmore operation with incorrect client latest target id",{latestTextdocId:n,toolCall:e}):P0(e.messageId,"Attempted to parse canmore operation but latestTextdocId is unset",{toolCall:e})),!s)return null;const o=bo((c=yb(t,s))==null?void 0:c.versions);if(!o)return e.status===Et.COMPLETE&&P0(e.messageId,"Attempted to parse canmore operation against unknown target id",{textdocId:s}),null;switch(e.function){case zn.UpdateTextdoc:{const m=[],g=(d=e.updates)!=null?d:[];for(let p=0;p<g.length;p++){const h=g[p];if(h.isPartialPattern&&h.pattern&&h.pattern.length<E2e)continue;if(h.pattern===".*"){const y=h.replacement?xp(o.type)?ew(h.replacement):h.replacement:"";return[{kind:Bn.REWRITE,textdocId:s,versionInt:e.versionInt,messageId:e.messageId,createdAt:e.createdAt,author:e.author,content:y,isPartial:e.status===Et.STREAMING&&h.isPartial,comments:[]}]}const x=sw(h.pattern,h.isPartialPattern,h.multiple);if(!x)continue;let v=!1;for(const y of nw(o.content,x,h.multiple)){v=!0;const b=ow(y),C=h.replacement&&d2e(h.replacement,y);for(const S of m)if(S.at.end<=b.start){if(!S.isPartialRange){const E=S.at.start-S.at.end+S.content.length;b.start+=E,b.end+=E}}else S.at.start<b.end;m.push({kind:Bn.EDIT,textdocId:s,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,at:b,content:C!=null?C:"",isPartialRange:e.status===Et.STREAMING&&h.isPartialPattern,isPartial:e.status===Et.STREAMING&&h.isPartial})}if(!h.isPartialPattern&&!v)return null}return m.length>0?m:null}case zn.CommentTextdoc:{const m=[],g=(u=e.comments)!=null?u:[];for(let p=0;p<g.length;p++){const h=g[p],x=sw(h.pattern,h.isPartialPattern);if(!x)continue;let v=!1;for(const y of nw(o.content,x)){v=!0;const b=ow(y);b.end>b.start&&m.push({kind:Bn.ADD_COMMENT,textdocId:s,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,id:h.id,tempId:ML(e.messageId,p),at:b,content:(f=h.comment)!=null?f:"",isPartialRange:e.status===Et.STREAMING&&h.isPartialPattern,isPartial:e.status===Et.STREAMING&&h.isPartial})}if(!h.isPartialPattern&&!v)return null}return m.length>0?m:null}}}function*nw(t,e,n=!1){if(n)yield*o_(t.matchAll(e));else{const s=t.match(e);s&&(yield s)}}function sw(t,e,n=!1){if(t)try{const s=u2e(t,e);return new RegExp(s,n?"gsv":"sv")}catch(s){console.warn("Assistant returned invalid Regexp, dropping",{pattern:t,error:s})}}function ow(t){return{start:t.index,end:t.index+t[0].length}}const aw=(t,e)=>{var o,a,i;for(const l of e){const c=(o=l.metadata)==null?void 0:o.canvas;if(c!=null&&c.user_created_temp_textdoc_id&&(c!=null&&c.textdoc_id)){const{user_created_temp_textdoc_id:d,textdoc_id:u}=c;t=Xr(t,f=>{f.latestTextdocId=u,f.resolveTempTextdocId[d]=u})}}const n=Il(e,l=>yR(l));for(let l=e.length-1;l>=0;l--){const{metadata:c}=e[l],d=c==null?void 0:c.canvas,u=(i=(a=c==null?void 0:c.open_in_canvas_view)==null?void 0:a.id)!=null?i:d==null?void 0:d.textdoc_id;if(u){t=Xr(t,f=>{f.latestTextdocId=u!=null?u:null,n&&(f.lastCanvasAssistantMessageById[u]=n.id)});break}}const s=a5(e);if(!s)return t;for(const[l,c]of s){const d=c&&PL(c);d&&(t=Xr(t,u=>{if(d.function===zn.CreateTextdoc){const{textdocId:f}=d;f&&(u.resolveTempTextdocId[s5(l.id)]=f)}else if(d.function===zn.CommentTextdoc){const{commentIds:f=[]}=d;for(let m=0;m<f.length;m++){const g=f[m],p=ML(l.id,m);u.resolveTempCommentId[g]=p}}}))}return t},A2e=(t,e,n)=>{const s=mt(t),o=he.getTree(s),a=he.getVariantIds(s,n.messages[0].id);if(a.length<2)return aw(e,n.messages);for(const i of a){const l=o.getLeafFromNode(i).id,c=he.getConversationLastTurn(s,l);c&&(e=aw(e,c.messages))}return e};function I2e(){return new WeakMap}function LL(t,e,n,s){const o=n[s];let a=e.get(o);if(!a){const i=s===0?aN():LL(t,e,n,s-1);a=A2e(t,i,o),e.set(o,a)}return a}function j2e(t,e,n){return n.length===0?null:LL(t,e,n,n.length-1)}function N2e(t,e){const[n]=_.useState(I2e);return _.useMemo(()=>j2e(t,n,e),[n,t,e])}const rw=t=>{if(!t)return;const{messages:e}=t,n=DT(e!=null?e:[],o=>o.author.role===Ke.System||o.author.role===Ke.Developer),s=n===-1?e:e==null?void 0:e.slice(n+1);if(s&&S2e(s))return s},P2e=({lastTurn:t,clientThreadId:e,isRequestActive:n,persistedTextdocStoreStatus:s})=>{const[o,a]=_.useState(!0),i=n||!o||s!==Ip.READY,l=_.useMemo(()=>{if(!t)return null;const d=mt(e),u=he.getTree(d),f=he.getVariantIds(d,t.messages[0].id);return f.length<2?null:f.map(m=>{const g=u.getLeafFromNode(m).id;return he.getConversationLastTurn(d,g)})},[e,t]);return[_.useMemo(()=>{var d,u;return!i||!t?null:l?(u=l.flatMap(rw).filter(P3))!=null?u:null:(d=rw(t))!=null?d:null},[i,t,l]),a]};class OL{constructor(e,n,s,o){J(this,"sentLength",null);J(this,"sentIsComplete",null);J(this,"bufferedLength");J(this,"requestUpdateRaf",null);J(this,"prevBuffer");J(this,"nextBuffer");this.targetLength=e,this.isActivelyStreaming=n,this.onUpdate=o,this.bufferedLength=s?0:this.targetLength,s&&!s.isComplete()?(s.nextBuffer=this,this.prevBuffer=s):s!=null&&s.isComplete()&&(this.bufferedLength=this.targetLength)}setTargetLength(e,n){e<this.bufferedLength&&(this.bufferedLength=e),this.targetLength=e,this.isActivelyStreaming=n,this.shouldUpdate()&&this.updateBufferedState()}shouldUpdate(){return!this.prevBuffer&&(this.isBuffering()||this.sentIsComplete!==this.isComplete())}isBuffering(){return this.bufferedLength<this.targetLength}isComplete(){return!this.prevBuffer&&!this.isActivelyStreaming&&!this.isBuffering()}getTotalRemainingLength(){let e=this.targetLength,n=this.nextBuffer;for(;n;)e+=n.targetLength,n=n.nextBuffer;return e-this.bufferedLength}requestUpdate(){this.requestUpdateRaf||this.sentLength===this.bufferedLength&&this.sentIsComplete===this.isComplete()||(this.requestUpdateRaf=window.requestAnimationFrame(()=>{this.requestUpdateRaf=null;const e=this.isComplete();this.sentLength=this.bufferedLength,this.sentIsComplete=e,this.onUpdate(this.bufferedLength,e),e&&this.resolveDependency()}))}resolveDependency(){if(this.nextBuffer){const e=this.nextBuffer;this.nextBuffer=e.prevBuffer=void 0,e.shouldUpdate()&&e.updateBufferedState()}}destroy(){this.resolveDependency(),this.requestUpdateRaf&&(window.cancelAnimationFrame(this.requestUpdateRaf),this.requestUpdateRaf=null)}}const Ki=class Ki extends OL{constructor(){super(...arguments);J(this,"frameRequestId");J(this,"prevAddFrameTime")}updateBufferedState(){if(!this.frameRequestId){const n=this.getTotalRemainingLength(),s=Math.max(Ki.MIN_BUFFERING_CHAR_PER_MS,n/Ki.MAX_BUFFERING_LAG_MS);this.frameRequestId=window.requestAnimationFrame(o=>{this.frameRequestId=void 0;const a=this.prevAddFrameTime===void 0?2/Ki.MIN_BUFFERING_CHAR_PER_MS:o-this.prevAddFrameTime,i=Math.floor(s*a);i>0&&(this.prevAddFrameTime=o,this.bufferedLength=Math.min(this.bufferedLength+i,this.targetLength)),this.requestUpdate(),this.shouldUpdate()&&this.updateBufferedState()})}}destroy(){super.destroy(),this.frameRequestId&&window.cancelAnimationFrame(this.frameRequestId)}};J(Ki,"MAX_BUFFERING_LAG_MS",500),J(Ki,"MIN_BUFFERING_CHAR_PER_MS",1/30);let qx=Ki;class r5 extends OL{constructor(e,n,s,o){super(Ep(e).length,s,o,(a,i)=>n(kP(this.textMessageParts,a),i)),this.textMessageParts=e}onMessagePartsUpdated(e,n){this.textMessageParts=e,this.setTargetLength(Ep(e).length,n)}removeDelayedRender(){return!this.isBuffering()}}class GZe extends r5{constructor(n,s,o,a){super(n,s,o,a);J(this,"ALPHA",.1);J(this,"DIV",1.2);J(this,"MUL",1.5);J(this,"minRate",1);J(this,"expectedDisplayInterval",.05);J(this,"displayNextChunkTimeout");J(this,"_rate",this.minRate);J(this,"_lastArrival",null);J(this,"_lastDrain",0);J(this,"_drainCarry",0);J(this,"_lastTargetLength",0);this.updateReactComponentDisplay=s}removeDelayedRender(){return this.bufferedLength>1}calculateBufferLength(){if(!this.isActivelyStreaming){this.bufferedLength<this.targetLength&&(this.bufferedLength=this.targetLength,this.requestUpdate());return}const n=performance.now()/1e3,s=this.targetLength-this._lastTargetLength;if(this._lastTargetLength=this.targetLength,s>0){if(this._lastArrival!=null){const c=Math.max(n-this._lastArrival,10),d=s/c;this._rate=Math.max(this.minRate,this.ALPHA*d+(1-this.ALPHA)*this._rate)}else this._rate=s;this._lastArrival=n}const o=n-this._lastDrain;this._lastDrain=n;const a=this.targetLength-this.bufferedLength;for(let c=0;c<(o+this._drainCarry)/this.expectedDisplayInterval;c++)a&&a<this._rate*this.MUL&&(this._rate=(a+this._rate*this.MUL)/2),a>this._rate/this.DIV&&(this._rate=(a+this._rate/this.DIV)/2);this._rate=Math.max(this.minRate,this._rate);const i=o*this._rate+this._drainCarry,l=Math.floor(i);this._drainCarry=i-l,l>=1&&(this.bufferedLength=Math.min(this.bufferedLength+l,this.targetLength)),this.requestUpdate()}updateBufferedState(){this.calculateBufferLength(),this.displayNextChunkTimeout||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},50))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}}const qa=class qa extends r5{constructor(n,s,o,a){super(n,s,o,a);J(this,"displayNextChunkTimeout");this.updateReactComponentDisplay=s}updateBufferedState(){const n=this.getTotalRemainingLength(),s=n<qa.MIN_CHARS_BEHIND_TO_CATCHUP?this.targetLength-this.bufferedLength:Math.ceil(n*qa.UPDATE_FREQUENCY_MS/qa.CATCHUP_TIME_MS);this.bufferedLength=Math.min(this.bufferedLength+s,this.targetLength),this.requestUpdate(),this.displayNextChunkTimeout||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},qa.UPDATE_FREQUENCY_MS))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}};J(qa,"MIN_CHARS_BEHIND_TO_CATCHUP",5),J(qa,"CATCHUP_TIME_MS",300),J(qa,"UPDATE_FREQUENCY_MS",30);let Op=qa;const cg=15,R0=8;class WZe extends r5{constructor(n,s,o,a,i){var l;super(n,s,o,a);J(this,"LAG_FACTORS",w({".":cg,"!":cg,"?":cg,"\n":cg,",":R0,":":R0,";":R0,DEFAULT_LAG_FACTOR:.9,BUFFER_FACTOR:.08},typeof window<"u"&&window.__PUNCTUATION_BUFFER_LAG_FACTORS));J(this,"concatenatedText");J(this,"displayNextCharTimeout");J(this,"debug");J(this,"streamStartMs");J(this,"averageMsPerChar");J(this,"_throttledDebugLog",u3(n=>{console.debug(n)},500,{leading:!0,trailing:!0}));this.updateReactComponentDisplay=s,this.concatenatedText=Ep(this.textMessageParts),this.debug=(l=i==null?void 0:i.debug)!=null?l:!1,this.streamStartMs=0,this.averageMsPerChar=.25,this.debug&&console.debug(["PunctuationBuffer:","[lagFactors: ".concat(JSON.stringify(this.LAG_FACTORS,null,2),"]")].join("\n"))}displayNextChar(){this.displayNextCharTimeout=void 0,this.shouldUpdate()&&(this.bufferedLength++,this.requestUpdate(),this.displayNextCharTimeout=window.setTimeout(()=>this.displayNextChar(),this._getNextCharDelayMs()))}updateBufferedState(){this.concatenatedText=Ep(this.textMessageParts),this.streamStartMs===0?this.streamStartMs=Date.now():this.averageMsPerChar=(Date.now()-this.streamStartMs)/this.targetLength,this.displayNextCharTimeout||this.displayNextChar()}destroy(){super.destroy(),window.clearTimeout(this.displayNextCharTimeout)}_getNextCharDelayMs(){var l;const n=this.concatenatedText[this.bufferedLength-1],s=this.getTotalRemainingLength(),o=1/Math.max(s*this.LAG_FACTORS.BUFFER_FACTOR,1),a=((l=this.LAG_FACTORS[n])!=null?l:this.LAG_FACTORS.DEFAULT_LAG_FACTOR)*o,i=this.averageMsPerChar*a;return this.debug&&this._throttledDebugLog(["PunctuationBuffer:","[lagMs: ".concat(i,"]"),'[lastChar: "'.concat(n,'"]'),"[averageMsPerChar: ".concat(this.averageMsPerChar,"]"),"[lagFactor: ".concat(a,"]"),"[bufferLagFactor: ".concat(o,"]"),"[remainingLength: ".concat(s,"]"),"==="].join("\n")),i}}function R2e(t){return t.type==="text"}class iw{constructor(e,n,s="",o,a){J(this,"buffer");J(this,"text");this.buffer=new e([s],(i,l)=>{const c=i.filter(R2e).map(d=>d.text).join("");n(c,l)},o,a),this.text=s}setText(e,n=!0){this.text=e,this.buffer.onMessagePartsUpdated([this.text],n)}isBuffering(){return this.buffer.isBuffering()}isComplete(){return this.buffer.isComplete()}destroy(){return this.buffer.destroy()}}function L2e(t,e,n){var c;const[s,o]=_.useState(null),a=(c=e==null?void 0:e.length)!=null?c:0,i=a>0,l=_.useRef(new Map);return _.useEffect(()=>{if(e)for(const d of e){const{messageId:u}=d;if(u==null||l.current.has(u))continue;const f=new O2e((m,g)=>{if(o(p=>U(w({},p),{[u]:m})),!!g){for(const[p,h]of l.current.entries())if(p!==u&&!h.isComplete())return;n(!0)}});l.current.set(u,f)}},[a]),_.useEffect(()=>{const d=l.current;return()=>{for(const u of d.values())u.destroy()}},[i]),_.useEffect(()=>{if(!i)return o(null);const d=Td(e,"messageId");for(const[u,f]of Object.entries(d)){const m=l.current.get(u);m&&m.setTextdocOps(f,!t)}},[i,t,e]),_.useMemo(()=>!i||!s?null:Object.values(s).flatMap(d=>d!=null?d:[]),[i,s])}class O2e{constructor(e){J(this,"bufferedOps",[]);J(this,"isFinishedStreaming",!1);J(this,"rangeBuffers",[]);J(this,"textBuffers",[]);J(this,"completeCounters",[]);J(this,"lastBuffer");this.onUpdate=e}destroy(){for(const e of this.rangeBuffers)e==null||e.destroy();for(const e of this.textBuffers)e==null||e.destroy();this.isFinishedStreaming=!0,this.rangeBuffers=[],this.textBuffers=[],this.completeCounters=[],this.lastBuffer=void 0}isBuffering(){var e,n,s,o;return!(((n=(e=this.lastBuffer)==null?void 0:e.isComplete())==null||n)&&((o=(s=bo(this.completeCounters))==null?void 0:s.isComplete())==null||o))}getNonEmptyBufferedOpsOrNull(){return this.bufferedOps&&this.bufferedOps.length>0?this.bufferedOps:null}isComplete(){return this.isFinishedStreaming&&!this.isBuffering()}setTextdocOps(e,n){if(this.isFinishedStreaming=n,e)for(let s=0;s<e.length;s++){const o=e[s];if(o.author.role===Ke.Assistant)switch(o.kind){case Bn.CREATE:case Bn.REWRITE:this.setAllContentOpAtIndex(o,s);break;case Bn.EDIT:case Bn.ADD_COMMENT:this.setRangeAndContentOpAtIndex(o,s);break;default:this.setUnbufferedOpAtIndex(o,s)}else this.setUnbufferedOpAtIndex(o,s)}n&&(e?this.isBuffering()||this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),!0):(this.destroy(),this.update(()=>null)))}update(e){const n=this.bufferedOps;this.bufferedOps=Nc(n,e),this.bufferedOps!==n&&this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),this.isComplete())}getBufferedAllContentOp(e,n,s){let o=e[s];return o||(o=U(w({},n),{content:""}),e[s]=o),o}setAllContentOpAtIndex(e,n){const{content:s,isPartial:o=!1}=e;let a=this.textBuffers[n];a?(a.setText(s,o),e.kind===Bn.CREATE&&this.update(i=>{const l=this.getBufferedAllContentOp(i,e,n);l.textdocId=e.textdocId})):(a=new iw(Op,(i,l)=>{this.update(c=>{const d=this.getBufferedAllContentOp(c,e,n);d.content=i,d.isPartial=!l})},s,o,this.lastBuffer),this.textBuffers[n]=a,this.lastBuffer=a.buffer)}getBufferedRangeAndContentOp(e,n,s){let o=e[s];return o||(o=U(w({},n),{at:{start:n.at.start,end:n.at.start},content:"",isPartial:!0,isPartialRange:!0}),e[s]=o),o}setRangeAndContentOpAtIndex(e,n){const{at:s,content:o,isPartialRange:a=!1,isPartial:i=!1}=e;let l=this.completeCounters[n];l||(l=new D2e(()=>{this.update(u=>{const f=this.getBufferedRangeAndContentOp(u,e,n);f.isPartial=!1})}),l.update("original",!1),this.completeCounters[n]=l);let c=this.rangeBuffers[n];c?(this.update(u=>{const f=this.getBufferedRangeAndContentOp(u,e,n);if(f.at.start!==s.start){const m=f.at.end-f.at.start;f.at={start:s.start,end:s.start+m}}}),c.setTargetLength(s.end-s.start,a)):(c=new qx(0,a,this.lastBuffer,(u,f)=>{this.update(m=>{const g=this.getBufferedRangeAndContentOp(m,e,n);g.at.end=g.at.start+u,g.isPartialRange=!f}),l.update("range",f)}),this.rangeBuffers[n]=c,this.lastBuffer=c,l.update("range",!1));let d=this.textBuffers[n];d?d.setText(o!=null?o:"",i):(d=new iw(Op,(u,f)=>{this.update(m=>{const g=this.getBufferedRangeAndContentOp(m,e,n);g.content=u}),l.update("content",f)},o,i,this.lastBuffer),this.textBuffers[n]=d,this.lastBuffer=d.buffer,l.update("content",!1)),l.update("original",!i)}setUnbufferedOpAtIndex(e,n){this.update(s=>{s[n]=e})}}class D2e{constructor(e){J(this,"keyStates",new Set);J(this,"onComplete");this.onComplete=e}isComplete(){return this.onComplete==null}update(e,n){if(!n)this.keyStates.add(e);else if(this.keyStates.delete(e),this.keyStates.size===0&&this.onComplete){const s=this.onComplete;this.onComplete=null,s()}}}function F2e(t){const e=ne(),n=$t();SM(()=>{var a,i;const s=he.getConversationLastTurn(mt(t)),o=Il(s==null?void 0:s.messages,l=>yR(l));((i=(a=o==null?void 0:o.metadata)==null?void 0:a.finish_details)==null?void 0:i.type)==="max_tokens"&&e2e(n,e,4)})}function B2e(t){var e;return t?!!((e=t.metadata)!=null&&e.async_completion_id&&t.status==="in_progress"):!1}function U2e(t){var S,E;const[e,n]=Ve(t,k=>[he.getRequestId(k),he.getConversationTurns(k)],{disablePerfDetector:!0}),s=Ia(e)||B2e((E=(S=bo(n))==null?void 0:S.messages)==null?void 0:E[0]),o=kR(t),a=Bpe(),i=c2e(()=>Promise.allSettled([o.refetch(),Ea(t)])),[l,c]=P2e({isRequestActive:s,lastTurn:bo(n),clientThreadId:t,persistedTextdocStoreStatus:o.status}),d=i!=null?i:l,u=!!i||s,f=d?i?kx.NATIVE:kx.LAST_TURN:null,m=N2e(t,n),g=wR(),p=Wpe(),h=i2e(),x=_.useMemo(()=>{let k=aN(m);const{textdocVersionById:T,fetchError:M,status:A}=o;return k=Xr(k,I=>{var N,L,O,D;I.fetchError=M,I.isFetchingFromPersistence=A===Ip.REFETCHING||A===Ip.INITIALIZING;for(const{tempTextdocId:$,status:H,createdAt:G,type:Z,title:Q,content:q}of h){const Y=(N=I.resolveTempTextdocId[$])!=null?N:$;Vu(I,{textdocId:Y,title:Q,type:Z,content:q,createdAt:G,versionInt:0,comments:[],messageId:null,status:H===io.SENT?Os.ATTACHED_SENT:Os.ATTACHED_PENDING})}if(T)for(const[$,H]of T.entries()){I.allTextdocIdSet[$]=$;const G=a.get($);let Z=G&&((L=G.versionInt)!=null?L:er)>((O=H.versionInt)!=null?O:er)?w(w({},H),G):H;const Q=p.filter(Y=>Y.textdocId===$&&Y.kind===Bn.REMOVE_COMMENT);let q=Z.versionInt;for(const Y of Q)Z=NL(Z,Y),q=Math.max(q!=null?q:er,(D=Y.versionInt)!=null?D:er);Z=U(w({},Z),{versionInt:q}),I.textdocById[$]=void 0,Vu(I,Z)}}),g?Xr(k,I=>{Vu(I,g,!1)}):k},[h,m,o,a,g,p]),v=_.useMemo(()=>d!=null&&d.length?T2e(u,x,d):null,[d,u,x]),y=_.useMemo(()=>Xr(x,k=>{for(const T of v!=null?v:[])if(T.messageId&&(k.lastCanvasAssistantMessageById[T.textdocId]=T.messageId),T.kind===Bn.CREATE){const{tempTextdocId:M,textdocId:A}=T;M&&A&&(k.resolveTempTextdocId[M]=A)}}),[v,x]),b=L2e(u,v,c);return _.useMemo(()=>b?Xr(jL(y,b),k=>{k.streamingSource=f}):y,[y,f,b])}function zZe({clientThreadId:t,children:e}){const n=U2e(t);return F2e(t),r.jsx(oN.Provider,{value:n,children:e})}class $2e{constructor({capacity:e,dispose:n}){J(this,"capacity");J(this,"cache");J(this,"dispose");this.capacity=e,this.cache=new Map,this.dispose=n}get(e){if(!this.cache.has(e))return null;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}set(e,n){if(this.cache.has(e)){this.cache.delete(e),this.cache.set(e,n);return}if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;s!=null&&this.delete(s)}this.cache.set(e,n)}delete(e){const n=this.cache.get(e);this.cache.delete(e),this.dispose&&this.dispose(n)}}const V2e=300,DL=({collapsed:t,setCollapsed:e,children:n})=>{const s=V(),o=es(s),a=ne(),[i,l]=_.useState(!1);return r.jsxs(Xe.div,{className:z("border-token-border-sharp dark:border-token-main-surface-secondary @container relative mb-4","flex cursor-text flex-col items-start overflow-hidden rounded-[14px] border shadow-md contain-inline-size",!o&&"mx-[-16px] sm:mx-[-32px] sm:rounded-[28px]"),initial:!1,animate:{height:t?V2e:"auto"},transition:{duration:.5,ease:"easeInOut"},onAnimationComplete:()=>l(!1),children:[t&&r.jsx("button",{type:"button",className:"absolute inset-0 z-10","aria-label":a.formatMessage({id:"iB4l+i",defaultMessage:"Expand full response"}),"aria-expanded":!t,onClick:()=>{e(!1),l(!0)}}),r.jsx("div",{className:z("p-4",!o&&"sm:p-8"),children:r.jsx(Ar,{children:n})}),(t||i)&&r.jsx("span",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-12 bg-gradient-to-b from-transparent to-[var(--bg-primary)] dark:to-[var(--bg-elevated-secondary)]"})]})},H2e=1e3;function qZe({children:t,messages:e,clientThreadId:n}){var u,f;const s=e.find(m=>{var g;return(g=m.metadata)==null?void 0:g.is_async_task_result_message}),o=(u=s==null?void 0:s.metadata)==null?void 0:u.async_task_id,a=wr(m=>o?m.tasks[o]:null),[i,l]=_.useState((f=a==null?void 0:a.collapsed)!=null?f:!1),c=Ve(n,m=>{var g,p;return s&&((g=s.metadata)==null?void 0:g.async_task_id)&&he.hasContinuedFromAsyncTask(m,s==null?void 0:s.id,(p=s==null?void 0:s.metadata)==null?void 0:p.async_task_id)});if(!s)return null;const d=s.content.content_type==="text"&&s.content.parts.reduce((m,g)=>m+g.length,0)<H2e;return!c||d?r.jsx(r.Fragment,{children:t}):r.jsx("div",{className:"py-2",children:r.jsx(DL,{collapsed:i,setCollapsed:l,children:t})})}const lw=Se({manage:{id:"manage",defaultMessage:"Manage"},continue:{id:"continue",defaultMessage:"Continue"}});function YZe({title:t,description:e,settingsTab:n="general",clientThreadId:s,parentMessageId:o}){const a=V(),i=xt(a,s),l=ne(),[c,d]=_.useState(!1),{openSettings:u}=Qf(),f=()=>{var x;if(c)return;d(!0);const g=mt(s),p=g?he.getCurrentNode(g):null;(p?(x=p.message.id)!=null?x:p.id:void 0)===o&&Zo({conversation:i,promptMessage:is("Yes, please proceed"),eventSource:"mouse",parentMessageId:o})},m=_.useCallback(()=>{const g=Md();hn()&&g?g.openSettings(n):u()},[u,n]);return r.jsxs("div",{className:"max-w-md rounded-lg border p-4 shadow-sm",children:[r.jsx("h2",{className:"mb-1 font-bold",children:r.jsx(Bs,{className:"text-base",children:t})}),r.jsx("p",{className:"mb-3 text-sm",children:r.jsx(Bs,{className:"text-base",children:e})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ye,{className:"text-base",color:"secondary",onClick:m,children:l.formatMessage(lw.manage)}),r.jsx(ye,{className:"text-base",color:"primary",onClick:f,children:l.formatMessage(lw.continue)})]})]})}function G2e({className:t}){return r.jsxs(r.Fragment,{children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:z(t,"dark:hidden"),children:[r.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"black",fillOpacity:"0.04"}),r.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"black",strokeOpacity:"0.16",strokeWidth:"0.6"}),r.jsx("path",{d:"M10.8988 4.47241C11.297 4.30205 11.6994 4.7051 11.5287 5.10327L9.85392 9.01147C9.69208 9.3891 9.39072 9.69046 9.0131 9.85229L5.1049 11.5271C4.70673 11.6977 4.30368 11.2954 4.47404 10.8972L6.14982 6.98804C6.31165 6.61062 6.61225 6.31002 6.98966 6.14819L10.8988 4.47241ZM8.00138 7.19995C7.5597 7.20005 7.20167 7.55807 7.20158 7.99976C7.20158 8.44152 7.55964 8.79946 8.00138 8.79956C8.44321 8.79956 8.80119 8.44158 8.80119 7.99976C8.80109 7.55801 8.44315 7.19995 8.00138 7.19995Z",fill:"black",fillOpacity:"0.16"})]}),r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:z(t,"hidden dark:block"),children:[r.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"white",fillOpacity:"0.2"}),r.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"white",strokeOpacity:"0.65",strokeWidth:"0.6"}),r.jsx("path",{d:"M10.8989 4.47248C11.2971 4.30212 11.6994 4.70517 11.5288 5.10334L9.85399 9.01154C9.69215 9.38917 9.39079 9.69052 9.01317 9.85236L5.10496 11.5272C4.7068 11.6978 4.30375 11.2955 4.47411 10.8973L6.14989 6.98811C6.31171 6.61069 6.61232 6.31009 6.98973 6.14826L10.8989 4.47248ZM8.00145 7.20002C7.55976 7.20012 7.20174 7.55814 7.20164 7.99982C7.20164 8.44159 7.5597 8.79953 8.00145 8.79963C8.44328 8.79963 8.80125 8.44165 8.80125 7.99982C8.80116 7.55808 8.44322 7.20002 8.00145 7.20002Z",fill:"white",fillOpacity:"0.65"})]})]})}function Dp({base64:t,title:e,alt:n,className:s}){var o;return t?r.jsx("img",{src:"data:image/png;base64,".concat(t),alt:(o=n!=null?n:e)!=null?o:"",className:s}):r.jsx(G2e,{className:s})}function ZZe(t){"use forget";const e=W.c(19),{browserContextMetadata:n,className:s}=t,o=n.sources[0];if(!o)return null;const{url:a,title:i,base64favicon:l}=o;if(!a)return null;let c;e[0]!==i?(c=i==null?void 0:i.trim(),e[0]=i,e[1]=c):c=e[1];const d=c;let u;if(e[2]!==a){let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,e[4]=y):y=e[4],u=a.replace(y,""),e[2]=a,e[3]=u}else u=e[3];const f=u,m=d&&d.length>0?d:f||a;let g;e[5]!==s?(g=z("no-underline",s),e[5]=s,e[6]=g):g=e[6];let p;e[7]!==l||e[8]!==m?(p=r.jsx(Dp,{base64:l,title:m,alt:"",className:"h-4 w-4 flex-shrink-0"}),e[7]=l,e[8]=m,e[9]=p):p=e[9];let h;e[10]!==m?(h=r.jsx("span",{className:"truncate select-none",children:m}),e[10]=m,e[11]=h):h=e[11];let x;e[12]!==p||e[13]!==h?(x=r.jsx("div",{className:"user-message-bubble-color relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-3.5 py-1.5",children:r.jsxs("div",{className:"flex min-w-0 cursor-pointer items-center gap-2",children:[p,h]})}),e[12]=p,e[13]=h,e[14]=x):x=e[14];let v;return e[15]!==g||e[16]!==x||e[17]!==a?(v=r.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:g,children:x}),e[15]=g,e[16]=x,e[17]=a,e[18]=v):v=e[18],v}const W2e=t=>Ve(t,e=>{var n,s;return(s=(n=e==null?void 0:e.disabledToolIds)==null?void 0:n.includes(Nn.CANMORE))!=null?s:!1}),z2e=R(()=>P(()=>import("./d9d46aun6hvzsagm.js"),__vite__mapDeps([284,1])),{loading:t=>F(t)}),q2e=(t,e)=>{var u;const n=Ve(t,f=>he.getLastMessageSystemHints(f).includes(da.CANVAS)),s=hb({clientThreadId:t}),o=W2e(t),a=V(),i=Kb(a),l=(u=bo(e))==null?void 0:u.id,c=e.some(f=>{var m,g;return(g=(m=f.metadata)==null?void 0:m.canvas)==null?void 0:g.canvas_opt_in});return{isVisible:!n&&!o&&!i&&!c&&!!l,onClick:async f=>{var x;if(!l)return;f.stopPropagation(),qv();const m=[Nn.CANMORE];s({sourceEvent:f,nodeId:l,appendMessages:[qy("The user has requested the canvas tool be disabled for this conversation. You should not call the tool again.",{disable_tool_ids:m,exclude_after_next_user_message:!0})]});const g=mt(t),p=he.getConversationTurns(g,l).length,h=(x=he.getParentPromptNode(g,l))==null?void 0:x.message.id;Ll.logEventWithStatsig("Canvas Opt Out Clicked","chatgpt_canvas_opt_out_clicked",{num_turns:String(p),conversation_id:jt(t),message_id:h}),Ze(t,v=>{v.disabledToolIds=m})}}},Y2e=({clientThreadId:t,allTurnMessages:e})=>{const{isVisible:n,onClick:s}=q2e(t,e);return n?r.jsx("button",{onClick:s,className:"text-token-text-secondary hover:text-token-text-primary mb-2 w-full",children:r.jsxs("div",{className:"flex items-center rounded-xl",children:[r.jsx(j,{id:"aa5Dyk",defaultMessage:"Answer in chat instead"}),r.jsx(z2e,{className:"icon text-token-text-secondary"})]})}):null},pm=t=>{const{closeThreadSidebar:e}=Mr();return()=>{t!=="canvas"&&qv(),t!=="caterpillar"&&t!=="summarizer"&&t!=="searchSources"&&t!=="entity"&&e()}},Z2e=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),K2e=(t,e)=>t!=null&&t.textdocId?t.textdocId:(t==null?void 0:t.function)===zn.CreateTextdoc?s5(t.messageId):e!=null?e:void 0,Q2e=({toolCall:t,clientThreadId:e,isRequestActive:n})=>{const s=V(),o=ne(),a=Pie(),i=K2e(t,a),l=y1(i),c=tm(),d=vb(i),u=Rie(),f=Kb(s),m=It(),g=Nie(),p=Lie({textdocId:i,assistantMessageId:t==null?void 0:t.messageId}),h=Mre(()=>{const M=yn(xt(s,e)).id;Ll.logError("Textdoc missing from conversation",null,{clientThreadId:e,modelId:M,textdocId:i,latestTextdocId:a,toolCallTextdocId:t==null?void 0:t.textdocId,toolCallStatus:t==null?void 0:t.status,toolCallFunction:t==null?void 0:t.function})});_.useEffect(()=>{!n&&(t==null?void 0:t.status)===Et.COMPLETE&&!g&&!l&&h()},[t,l,n,g,h]);const x=pm("canvas");if(!t)return null;const v=t.status===Et.REDACTED||!g&&!l&&t.status!==Et.STREAMING&&t.status!==Et.WAITING;let y,b,C;if(t.status!==Et.REDACTED&&t.status!==Et.FAILED&&!v&&i){const M=!p&&t.status===Et.COMPLETE;y=()=>{x(),M&&t.versionInt?dl({type:cl.Textdoc,textdocId:i,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):yi(i)},b=()=>{x(),M&&t.versionInt?dl({type:cl.Textdoc,textdocId:i,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):dl({type:cl.Textdoc,textdocId:i,shouldRunCodeOnOpen:!0})},C=()=>{M&&t.versionInt&&m.prefetchQuery(CR(i,t.versionInt))}}const S=J2e(t,l);if(t.function===zn.CreateTextdoc&&!(f&&(!p||c))){if(t.status===Et.STREAMING||t.status===Et.WAITING||t.status===Et.COMPLETE){const A=g===!0&&(t.status===Et.STREAMING||t.status===Et.WAITING);return r.jsx(Nx,{textdocId:i,name:S,clientThreadId:e,tag:t.type,icon:Tc(t.type,!1),iconSelected:Tc(t.type,!0),isCanvasOpen:c,isInlinePreview:p,isFetching:A,isFocused:d,isStreaming:t.status===Et.STREAMING,onClick:y,onPreview:b})}let M;switch(t.status){case Et.FAILED:M=o.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case Et.CANCELED:M=o.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case Et.REDACTED:M=r.jsx(pt,{align:"start",label:o.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:o.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return r.jsx(cw,{children:M})}const E=v||t.status===Et.REDACTED,k=f?E?null:S:u&&!E?S:null,T=r.jsxs(cw,{onClick:y,onMouseOver:C,isStreaming:t.status===Et.STREAMING,children:[f&&r.jsx(Z2e,{}),t.function===zn.CommentTextdoc?exe(o,t,k):t.function===zn.CreateTextdoc?k!=null?k:o.formatMessage({id:"/402F4",defaultMessage:"New document"}):X2e(o,t,k)]});return p&&!c&&!v&&i?r.jsx(Nx,{textdocId:i,clientThreadId:e,name:S,tag:l==null?void 0:l.type,icon:Tc(l==null?void 0:l.type,!1),iconSelected:Tc(l==null?void 0:l.type,!0),isCanvasOpen:c,isFetching:!1,isFocused:d,isInlinePreview:!0,isStreaming:t.status===Et.STREAMING,onPreview:b,onClick:i!=null?()=>{x(),yi(i)}:void 0}):T};function J2e(t,e){return e!=null&&e.title?e.title:t.function===zn.CreateTextdoc&&t.title?IL(t.title):null}const cw=({isStreaming:t=!1,onClick:e,onMouseOver:n,children:s})=>r.jsx("button",{disabled:!e,className:z(t&&"loading-shimmer","text-token-text-secondary flex min-h-5 w-fit flex-row items-center gap-1.5 pt-[3px] text-start select-none",e&&"hover:text-token-text-primary"),onClick:e,onMouseOver:n,children:s}),FL=9;function X2e(t,e,n){var o;if(e.status===Et.STREAMING)return n?t.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(e.status===Et.FAILED)return n?t.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(e.status===Et.CANCELED)return n?t.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const s=(o=e.updates)==null?void 0:o.length;return e.status===Et.REDACTED||!s||s>FL?n?t.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):n?t.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:s,documentTitle:n}):t.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:s})}function exe(t,e,n){var o;if(e.status===Et.STREAMING)return n?t.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(e.status===Et.FAILED)return n?t.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(e.status===Et.CANCELED)return n?t.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const s=(o=e.comments)==null?void 0:o.length;return e.status===Et.REDACTED||!s||s>FL?n?t.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):n?t.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:s,documentTitle:n}):t.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:s})}const KZe=({messages:t,isRequestActive:e,isFinalTurn:n,allTurnMessages:s,clientThreadId:o,isUserTurn:a=!1})=>{const i=_.useMemo(()=>{const c=a5(s);if(!c)return null;const d=new Set(t.map(u=>u.id));return c.filter(([u])=>d.has(u.id))},[s,t]),l=_.useMemo(()=>i?i.map(([c,d])=>RL(e,c,d)).filter(Boolean):[],[i,e]);return l.length===0?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-col gap-2 [&:not(:first-child)]:mt-2",children:l.map(c=>r.jsx(Q2e,{toolCall:c,clientThreadId:o,isRequestActive:e},c.messageId))}),r.jsx(RR,{featureType:ds.CANVAS_SUPPORTED,isUserTurn:a,clientThreadId:o}),n&&r.jsx(Y2e,{clientThreadId:o,allTurnMessages:s})]})};function txe(t,e,n){const s=wr(l=>!!(t&&l.tasks[t])),o=pm("caterpillar"),a=Ve(n,l=>he.findNode(l,c=>{var d,u,f;return((d=c.message.metadata)==null?void 0:d.async_task_id)===t&&(((u=c.message.metadata)==null?void 0:u.b1de6e2_rm)===!0||((f=c.message.metadata)==null?void 0:f.is_async_task_result_message)===!0)})!=null),{clearSystemHintModeTrigger:i}=sa();_.useEffect(()=>{var g;if(s||!t||!e)return;const{async_task_created_at:l,async_task_prompt:c,async_task_title:d,async_task_original_message_id:u}=(g=e.metadata)!=null?g:{},f=jt(n),m={originalConversationId:f!=null?f:n,taskId:t,title:d!=null?d:"",prompt:c!=null?c:"",createdAt:l!=null?l:"",updatedAt:l!=null?l:"",status:En.UNDETERMINED,originalConversationUserMessageId:u};As.setTask(t,m),i(Pe.Research)},[s,t,e,n,o,i,a])}R(()=>P(()=>import("./k6qwgpluf8n5kx7i.js"),__vite__mapDeps([51,1])),{loading:t=>F(t)});const nxe=R(()=>P(()=>Promise.resolve().then(()=>J9e),void 0),{loading:t=>F(t)}),sxe=R(()=>P(()=>import("./k4855lfj6sf5wx46.js"),__vite__mapDeps([285,1])),{loading:t=>F(t)}),oxe=R(()=>P(()=>import("./i6at9b7261n0aa73.js"),__vite__mapDeps([286,1])),{loading:t=>F(t)}),axe=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),BL=R(()=>P(()=>import("./fx4tif7av4x5mmpn.js"),__vite__mapDeps([245,1])),{loading:t=>F(t)}),rxe=R(()=>P(()=>import("./ab1lw28e5v4cdfgd.js"),__vite__mapDeps([287,1])),{loading:t=>F(t)}),ixe=R(()=>P(()=>import("./mvmwqt2pbedq2unu.js"),__vite__mapDeps([288,1])),{loading:t=>F(t)}),lxe=R(()=>P(()=>import("./mp4v4wji3l4bfpxc.js"),__vite__mapDeps([289,1])),{loading:t=>F(t)}),cxe=R(()=>P(()=>import("./csz8rp9kly9cspt9.js"),__vite__mapDeps([290,1])),{loading:t=>F(t)}),dxe=R(()=>P(()=>import("./llkvyyg8wmzr0pic.js"),__vite__mapDeps([291,1])),{loading:t=>F(t)}),uxe=R(()=>P(()=>import("./cs13hjllyr5z07le.js"),__vite__mapDeps([246,1])),{loading:t=>F(t)}),dw=R(()=>P(()=>import("./i9crbuggadd1d18l.js"),__vite__mapDeps([247,1])),{loading:t=>F(t)}),fxe={pdf:rxe,sheet:dw,excel:dxe,doc:axe,audio:nxe,video:oxe,image:sxe,csv:dw,word:ixe,forms:cxe,slides:uxe,powerpoint:lxe,other:BL};function i5(t){var e;return(e=fxe[t])!=null?e:BL}const mxe=({children:t,iconType:e})=>{const n=i5(e);return r.jsxs("div",{className:"flex items-start gap-2 text-start text-wrap",children:[r.jsx("div",{className:"mt-[1px] inline-flex h-5 w-5 shrink-0 items-center justify-end gap-2.5 pt-[3px]",children:r.jsx(n,{className:"text-token-text-primary relative h-5 w-5"})}),t]})},QZe=({row:t})=>r.jsx(mxe,{iconType:t.iconType,children:r.jsx("div",{className:"text-token-text-primary flex-1 truncate text-base",children:t.rowText})});function gxe(){const t=V();return rt({queryKey:["clientStrings"],queryFn:()=>ge.safeGet("/client/strings"),staleTime:1/0,enabled:tt(t)})}function UL(t,e,n,s){"use forget";const o=W.c(7),a=e===void 0?"small":e,{platformConnectors:i}=kd(!1,_8.DEEP_RESEARCH);let l;e:try{let u;if(s&&(u=TG[s.toLowerCase()]),!u){l=null;break e}const f=Go[u];if(!f){l=null;break e}let m;o[0]!==f||o[1]!==i?(m=i.get(f),o[0]=f,o[1]=i,o[2]=m):m=o[2];const g=m;if(!g){l=null;break e}l=g}catch(u){l=null}const c=l;let d;return o[3]!==n||o[4]!==c||o[5]!==a?(d=c?r.jsx(_f,{connector:c,size:a,className:n}):null,o[3]=n,o[4]=c,o[5]=a,o[6]=d):d=o[6],d}function pxe({url:t,size:e="small",className:n,fallback:s,connectorSource:o}){const a=UL(t,e,n,o);return a!=null?a:s}const hxe=R(()=>P(()=>import("./dqr2pnjzr8j7emm5.js"),__vite__mapDeps([292,1])),{loading:t=>F(t)});function JZe(t,e=0){if(!t)return!1;const n=t.getBoundingClientRect();return n.top+e>=0&&n.left+e>=0&&n.bottom-e<=(window.innerHeight||document.documentElement.clientHeight)&&n.right-e<=(window.innerWidth||document.documentElement.clientWidth)}function $L(){var o,a,i,l,c,d,u;const t=ne(),{data:e}=gxe(),n=e==null?void 0:e.caterpillar_status_message_texts,s={cancelledMessage:t.formatMessage({id:"ZVkPyf",defaultMessage:"Task cancelled"}),failureMessage:t.formatMessage({id:"3BZzpX",defaultMessage:"Something went wrong"}),completedMessage:t.formatMessage({id:"nZ8w6W",defaultMessage:"Completed in"}),failureBannerContentMessage:t.formatMessage({id:"9peWdy",defaultMessage:"There was an error"}),waitingInQueueMessage:t.formatMessage({id:"k4vqxH",defaultMessage:"Your request is queued up. It will be completed shortly."}),startingMessage:t.formatMessage({id:"+jIjI+",defaultMessage:"Starting Task"}),caterpillarNoneSelectedMessage:t.formatMessage({id:"cLZOtM",defaultMessage:"Choose at least one"})};return n?{cancelledMessage:(o=n.cancelled_message)!=null?o:s.cancelledMessage,failureMessage:(a=n.failure_message)!=null?a:s.failureMessage,completedMessage:(i=n.completed_message)!=null?i:s.completedMessage,failureBannerContentMessage:(l=n.failure_banner_content_message)!=null?l:s.failureBannerContentMessage,waitingInQueueMessage:(c=n.waiting_in_queue_message)!=null?c:s.waitingInQueueMessage,startingMessage:(d=n.starting_message)!=null?d:s.startingMessage,caterpillarNoneSelectedMessage:(u=n.none_selected_dr_message)!=null?u:s.caterpillarNoneSelectedMessage}:s}function VL(t){const e=new Map;return dh(t).forEach(s=>{if(s.type==="website")try{const o=r.jsx(pxe,{url:s.url,size:"xsmall",className:"icon-sm",fallback:r.jsx(ks,{url:s.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:r.jsx(hxe,{className:"icon-sm text-token-text-quaternary"})})}),a=new URL(s.url).hostname;if(e.has(a)){const i=e.get(a);i&&(i.count+=1)}else e.set(a,{url:s.url,count:1,icon:o})}catch(o){}else if(!e.has(s.name)){const o=i5(s.fileType);e.set(s.name,{url:s.name,count:1,icon:r.jsx(o,{className:"text-token-text-primary relative h-4 w-4"})})}}),Array.from(e.values())}function _xe(t){const e=t.map(n=>n.type==="websiteOpen"?{url:n.url,type:"website"}:n.type==="fileOpen"&&n.fileName?{name:n.fileName,type:"file",fileType:n.iconType}:null);return VL(e)}function xxe(t){return t.reduce((e,n)=>{var s,o;if(n.type==="search"){const a=(o=(s=n.urls)==null?void 0:s.length)!=null?o:0;return e+a}return e},0)}function yxe(t){var s;const e=(s=t.metadata)==null?void 0:s.content_references;if(!e)return[];const n=e.map(o=>o.type==="webpage_extended"?o.icon_type?{name:o.title,type:"file",fileType:o.icon_type}:{url:o.url,type:"website"}:null);return VL(n)}function XZe(t){var e;return{type:x8,groups:(e=t==null?void 0:t.filter(n=>n.type==="summary").map(n=>{var s;return{type:n.message?(s=MG(n.message))!=null?s:ar.Text:ar.Text,messages:n.message?[n.message]:[]}}))!=null?e:[]}}const HL=R(()=>P(()=>import("./dqpw6s7v5t7v73q3.js"),__vite__mapDeps([273,1])),{loading:t=>F(t)}),GL=R(()=>P(()=>import("./fokj9uxlyllkpzum.js"),__vite__mapDeps([293,1])),{loading:t=>F(t)}),WL=R(()=>P(()=>import("./l14h3xoft0eucain.js"),__vite__mapDeps([294,1])),{loading:t=>F(t)}),zL=R(()=>P(()=>import("./cwshi1uqtxcpo7s2.js"),__vite__mapDeps([295,1])),{loading:t=>F(t)}),qL=R(()=>P(()=>import("./ca22ulajbssaw8fn.js"),__vite__mapDeps([296,1])),{loading:t=>F(t)}),YL=R(()=>P(()=>import("./lfg2vt1rqtb3lwx0.js"),__vite__mapDeps([297,1])),{loading:t=>F(t)}),ZL=R(()=>P(()=>import("./ouqaqxgngprz8qhp.js"),__vite__mapDeps([298,1])),{loading:t=>F(t)}),KL=R(()=>P(()=>import("./kz7x8wcm72rfs5wr.js"),__vite__mapDeps([299,1])),{loading:t=>F(t)}),QL=R(()=>P(()=>import("./dm4ag0sa1q13zbmz.js"),__vite__mapDeps([300,1])),{loading:t=>F(t)}),JL=R(()=>P(()=>import("./jsmxjczzjk89t5hv.js"),__vite__mapDeps([301,1])),{loading:t=>F(t)}),XL=R(()=>P(()=>import("./ga7p4rigp7s3d1bz.js"),__vite__mapDeps([302,1])),{loading:t=>F(t)}),eO=R(()=>P(()=>import("./de76wl4zzausvseb.js"),__vite__mapDeps([303,1])),{loading:t=>F(t)}),tO=R(()=>P(()=>import("./ixllpsgj9866h785.js"),__vite__mapDeps([304,1])),{loading:t=>F(t)}),nO=R(()=>P(()=>import("./m31qshm5lfjwgtdd.js"),__vite__mapDeps([305,1])),{loading:t=>F(t)});function vxe({url:t,className:e}){switch(new URL(t).pathname.split(".").pop()){case"pdf":return r.jsx(YL,{className:e});case"gif":return r.jsx(tO,{className:e});case"jpg":case"jpeg":return r.jsx(eO,{className:e});case"png":return r.jsx(qL,{className:e});case"webp":return r.jsx(GL,{className:e});case"mp3":return r.jsx(QL,{className:e});case"m4a":return r.jsx(XL,{className:e});case"ogg":return r.jsx(ZL,{className:e});case"wav":return r.jsx(WL,{className:e});case"mp4":return r.jsx(KL,{className:e});case"mov":return r.jsx(JL,{className:e});case"zip":return r.jsx(HL,{className:e});case"rar":return r.jsx(zL,{className:e});case"css":return r.jsx(nO,{className:e});default:return null}}function bxe({searchResult:t,className:e}){switch(t.content_type){case"application/pdf":return r.jsx(YL,{className:e});case"image/gif":return r.jsx(tO,{className:e});case"image/jpeg":return r.jsx(eO,{className:e});case"image/png":return r.jsx(qL,{className:e});case"image/webp":return r.jsx(GL,{className:e});case"audio/mpeg":return r.jsx(QL,{className:e});case"audio/m4a":return r.jsx(XL,{className:e});case"audio/ogg":return r.jsx(ZL,{className:e});case"audio/wav":return r.jsx(WL,{className:e});case"video/mp4":return r.jsx(KL,{className:e});case"video/quicktime":return r.jsx(JL,{className:e});case"application/zip":return r.jsx(HL,{className:e});case"application/x-rar-compressed":return r.jsx(zL,{className:e});case"text/css":return r.jsx(nO,{className:e})}return r.jsx(vxe,{url:t.url,className:e})}const Cxe=R(()=>P(()=>import("./dqr2pnjzr8j7emm5.js"),__vite__mapDeps([292,1])),{loading:t=>F(t)});function Sxe(t){var e;if(t.startsWith("file://"))return i5((e=t.split(".").pop())!=null?e:"other")}const sO=({item:t})=>{const e=t.attribution,n=UL(t.url,"small","relative",e!=null?e:void 0);if(n)return n;const s=Sxe(t.url);return s?r.jsx(s,{className:"text-token-text-primary relative h-4 w-4"}):r.jsx(ks,{url:t.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:r.jsx(Cxe,{className:"icon-sm text-token-text-quaternary"})})};function wxe({item:t}){var o;const e=t.attribution,n=e!=null?e:Zv(t.url,"short"),s=a=>"ref_id"in a&&"content_type"in a;return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[r.jsx(sO,{item:t}),n,s(t)&&r.jsx(bxe,{searchResult:t,className:"text-token-text-tertiary inline h-4 w-4"})]}),r.jsx("div",{className:"line-clamp-2 text-sm font-semibold break-words",children:t.title}),((o=t.pub_date)!=null?o:t.snippet)&&r.jsxs("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:[t.pub_date&&r.jsx(KP,{date:t.pub_date}),t.pub_date&&t.snippet&&"  ",t.snippet]})]})}function kxe(t,e=20){if(t.length<=e)return{attribution:t,wasTruncated:!1};const n="...",s=e-n.length,o=Math.floor(s/2),a=s-o;return{attribution:t.substring(0,o)+n+t.substring(t.length-a),wasTruncated:!0}}function Exe({citation:t,showCounts:e}){const n=Zv(t.url,"short"),{attribution:s,wasTruncated:o}=kxe(n);return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"group hover:bg-token-main-surface-secondary flex items-center gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",title:o?n:void 0,children:[t.icon,s]}),e&&t.count>1&&r.jsx("div",{className:"flex h-4 items-center justify-end ps-1",children:r.jsx("div",{className:"bg-token-main-surface-tertiary group-hover:bg-token-main-surface-primary flex h-4 min-w-4 items-center justify-center rounded-full text-[8px]",children:t.count})})]})}function Txe({item:t}){const e=t.url.split("#:~:text=")[0];return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[r.jsx(sO,{item:t}),r.jsx("p",{className:"text-normal truncate text-base font-semibold",children:t.title})]}),r.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:e})]})}function Mxe({taskIsPending:t,finalMessage:e,sources:n,caterpillarHeaderRef:s,showCounts:o=!0,citationView:a="normal"}){var l,c;const i=n8((c=(l=e==null?void 0:e.metadata)==null?void 0:l.content_references)==null?void 0:c.filter(d=>d.type==="webpage_extended"),"matched_text");return r.jsxs("div",{children:[r.jsx("div",{ref:s},"task-header"),r.jsxs("div",{className:"flex flex-col gap-4",children:[i.length>0&&r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-base font-medium",children:r.jsx(j,{id:"cc9nL7",defaultMessage:"Citations"})}),r.jsx("div",{className:"ms-[-12px] flex flex-col gap-1",children:i==null?void 0:i.map((d,u)=>a==="condensed"?r.jsx(Txe,{item:d},"citation-".concat(u,"-").concat(d.matched_text)):r.jsx(wxe,{item:d},"citation-".concat(u,"-").concat(d.matched_text)))})]}),r.jsxs("div",{className:"flex flex-col gap-2.5",children:[r.jsx("div",{className:"text-base font-medium",children:t?r.jsx("div",{className:"loading-shimmer-pure-text flex h-8 gap-1 overflow-hidden",children:r.jsx(j,{id:"Wo2ed3",defaultMessage:"Compiling sources"})}):r.jsx(j,{id:"h6ereF",defaultMessage:"All Sources"})}),r.jsx("div",{className:"ms-[-12px] flex flex-wrap",children:n==null?void 0:n.map((d,u)=>r.jsx(Exe,{citation:d,showCounts:o},"source-".concat(u,"-").concat(d.url)))})]})]})]})}const Axe=(t,e)=>e?!1:ve(t,"3576660381"),Ixe=(t,e)=>{if(!t)return[];const n=he.getConversationTurns(t);return e<0||e>=n.length?[]:he.getConversationTurnAtIndex(t,e).messages.filter(o=>{var a;return((a=o.metadata)==null?void 0:a.b47u8ra0)===!0})},jxe=R(()=>P(()=>Promise.resolve().then(()=>Ir),void 0),{loading:t=>F(t)}),Nxe=R(()=>P(()=>import("./fx4tif7av4x5mmpn.js"),__vite__mapDeps([245,1])),{loading:t=>F(t)}),Pxe=5;function Rxe(t){const e=Gd(t);if(e)return e.type;try{return new URL(t).hostname.replace(/^www\./,"")}catch(n){return t}}function Lxe(t){const e=new Map;return t.forEach(n=>e.set(Rxe(n),n)),Array.from(e.values())}function oO(t){"use forget";const e=W.c(14),{urls:n,max:s,itemClass:o,iconClass:a,faviconClass:i}=t;let l,c;if(e[0]!==i||e[1]!==a||e[2]!==o||e[3]!==s||e[4]!==n){const u=Lxe(n);l="flex flex-row-reverse";let f;e[7]!==i||e[8]!==a||e[9]!==o?(f=(m,g)=>{var x;const p=Gd(m),h=(x=p==null?void 0:p.Icon)!=null?x:null;return r.jsx("div",{className:z(o),children:h?r.jsx(h,{className:z("icon-sm",a),alt:p==null?void 0:p.type}):r.jsx(ks,{url:m,size:32,minSize:16,className:z("icon-sm",i),"aria-label":"",showLoadingAnimation:!0,fallback:r.jsx(Nxe,{className:"icon-sm"})})},g)},e[7]=i,e[8]=a,e[9]=o,e[10]=f):f=e[10],c=u.slice(0,s).reverse().map(f),e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=n,e[5]=l,e[6]=c}else l=e[5],c=e[6];let d;return e[11]!==l||e[12]!==c?(d=r.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=d):d=e[13],d}function aO({sourcesUrls:t,onClick:e,className:n}){return r.jsxs("button",{className:z("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary mt-3 mb-2 flex h-[38px] w-fit items-center gap-1.5 rounded-3xl border py-2","ps-3 pe-3",n),onClick:e,children:[t.length>0&&r.jsx(oO,{urls:t,max:Pxe,itemClass:z("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden rounded-full","-ms-1 first:me-0","border-2","group-hover/footnote:border-token-main-surface-secondary","relative")}),r.jsx("div",{className:"text-token-text-secondary flex items-center text-xs font-semibold",children:r.jsx(j,{id:"/48IOP",defaultMessage:"Sources"})})]})}function Oxe(t,e,n){const s=V(),o=Ve(t,u=>{const f=Ixe(u,e);return[n,...f]}),a=_.useMemo(()=>o.flatMap(u=>Nh(u)),[o]),i=a.find(u=>u.type==="sources_footnote"),l=re(()=>yn(xt(s,t))),c=ih(l,s),d=i!=null&&i.sources?i==null?void 0:i.sources.map(({url:u})=>u).filter(u=>!!u):c?a.map(u=>{var f;return(f=u.safe_urls)!=null?f:[]}).flat().filter(u=>!!u):[];return{hasSources:(!!i||c)&&d.length>0,sourcesUrls:d}}function eKe({clientThreadId:t,message:e,turnIndex:n,isAgentTurn:s}){const o=e==null?void 0:e.id,{toggleThreadSidebar:a}=Mr(),i=V(),l=Axe(i,s),[c,d]=Ve(t,x=>{var y;if(!((y=e==null?void 0:e.metadata)!=null&&y.async_task_id))return[-1,-1];const v=he.getConversationTurns(x);for(let b=0;b<v.length;b++){const C=v[b];for(let S=0;S<C.messageGroups.length;S++){const E=C.messageGroups[S];if(E.type===ar.a8km123&&E.messages.some(k=>{var T,M;return((T=k==null?void 0:k.metadata)==null?void 0:T.async_task_id)===((M=e==null?void 0:e.metadata)==null?void 0:M.async_task_id)}))return[b,S]}}return[-1,-1]}),u=Ve(t,x=>{var v;return n>=0?(v=he.getConversationTurnAtIndex(x,n))==null?void 0:v.messageGroups.findIndex(y=>y.type===x8||y.type===ar.a8km123):-1}),f=c>=0?c:n,m=d>=0?d:u,g=_.useCallback(()=>{o&&(l&&m>=0?a({type:"cot",turnIndex:f,reasoningGroupIndex:m,scrollTo:"sources"}):a({type:"searchSources",scrollToHeader:Xb.Citations,turnIndex:n,messageId:o}))},[o,a,n,l,m,f]),{hasSources:p,sourcesUrls:h}=Oxe(t,n,e);return p?r.jsx(Fxe,{sourcesUrls:h,onClick:g,className:"hover:bg-token-bg-tertiary rounded-3xl"}):null}const Dxe=3;function Fxe({sourcesUrls:t,onClick:e,className:n}){const o=ne().formatMessage({id:"/48IOP",defaultMessage:"Sources"});return r.jsxs("button",{className:z("group/footnote bg-token-bg-primary flex w-fit items-center gap-1.5 px-3 py-1.5",n),onClick:e,"aria-label":o,children:[t.length>0?r.jsx(oO,{urls:t,max:Dxe,itemClass:z("border-token-bg-primary bg-token-bg-primary flex items-center overflow-clip rounded-full","-ms-1.5 first:me-0","border-2","group-hover/footnote:border-token-bg-tertiary","relative"),iconClass:"rounded-full shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05)]",faviconClass:"rounded-full border border-token-border-light border-[0.5px]"}):r.jsx(jxe,{className:"icon-sm text-token-text-secondary"}),r.jsx("div",{className:"text-token-text-secondary mt-[-1px] text-[13px] font-medium",children:o})]})}const Bxe=R(()=>P(()=>import("./chuo6dbwu6l4alpy.js"),__vite__mapDeps([47,1])),{loading:t=>F(t)}),Uxe=R(()=>P(()=>Promise.resolve().then(()=>sm),void 0),{loading:t=>F(t)}),$xe=({title:t})=>r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-2",children:[r.jsx(Bxe,{className:"h-4 w-4"}),r.jsx("p",{children:t})]});function tKe({messages:t,children:e,clientThreadId:n,renderingView:s}){var C,S,E,k;const o=V(),a=t.find(T=>{var M;return(M=T.metadata)==null?void 0:M.b1de6e2_rm}),i=(C=a==null?void 0:a.metadata)==null?void 0:C.async_task_id,l=wr(T=>i?T.tasks[i]:null),[c,d]=_.useState((S=l==null?void 0:l.collapsed)!=null?S:!1),{toggleThreadSidebar:u}=Mr(),f=pm("caterpillar"),m=_.useRef(null),g=v3(),p=Ud(o),h=Ve(n,T=>{var I,N;if(!c||!l)return!1;const M=he.getCurrentNode(T);let A=he.getNode(T,M.parentId);return A.message.author.role==="developer"&&(A=he.getNode(T,A.parentId)),!(((I=A.message.metadata)==null?void 0:I.async_task_id)===i&&((N=A.message.metadata)!=null&&N.async_task_created_at))});_.useEffect(()=>{!h&&c&&d(h)},[h,c]);const x=_.useCallback(T=>{i&&u({type:"caterpillar",caterpillarId:i,initialTab:T},f)},[u,i,f]),{uniqueSources:v}=_.useMemo(()=>a?{uniqueSources:yxe(a)}:{uniqueSources:[],totalSources:0},[a]),y=Bf();if(!a)return null;const b=({taskId:T})=>g?null:r.jsx("div",{className:"hover:bg-token-main-surface-secondary cursor-pointer rounded-md p-2",children:r.jsx(Uxe,{className:"icon text-token-text-tertiary",onClick:()=>{As.setResearchShareIntent({messages:t.map(M=>M),threadId:n,taskId:T})}})});return s==="chat"?r.jsxs(DL,{collapsed:c,setCollapsed:d,children:[r.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[!p&&((E=a.metadata)==null?void 0:E.async_task_title)&&r.jsx($xe,{title:(k=a.metadata)==null?void 0:k.async_task_title}),i&&r.jsx(b,{taskId:i})]}),e,r.jsxs("div",{className:"flex items-center gap-2 py-2",children:[r.jsx(aO,{sourcesUrls:v.map(T=>T.url),onClick:()=>{y&&x("sources")},className:z("mt-0! mb-0!",y&&"cursor-default")}),i&&r.jsx(b,{taskId:i})]})]}):r.jsxs("div",{className:"flex flex-col gap-4",children:[e,r.jsx("div",{className:"border-token-border-sharp flex flex-col gap-2 border-b"}),r.jsx(Mxe,{caterpillarHeaderRef:m,taskIsPending:!1,finalMessage:a,showCounts:!1,sources:v,citationView:"condensed"})]})}function nKe({className:t}){return r.jsx(rO,{className:z("w-full",t)})}function rO({className:t}){return r.jsx("div",{className:z("loading-results-shimmer rounded-md",t),children:""})}function Vxe({percentage:t,height:e=10,className:n,backgroundClassName:s="bg-gray-400",barClassName:o="bg-current",transitionDuration:a,transitionTimingFunction:i,onTransitionEnd:l}){return r.jsxs("div",{className:z("relative w-full",n),style:{height:e},children:[r.jsx("div",{className:z("absolute start-0 top-0 h-full w-full",s)}),r.jsx("div",{className:z("absolute start-0 top-0 h-full transition-[width]",o),style:{width:"".concat(Math.max(Math.min(t,100),1),"%"),transitionDuration:a,transitionTimingFunction:i},onTransitionEnd:l})]})}function Hxe({taskId:t,intl:e,toaster:n}){return qt({mutationFn:async()=>{if(t)return await y8.cancelTask({taskId:t})},onSuccess:()=>{t&&(As.setTaskStatus(t,En.CANCELLED),As.abortTaskStream(t))},onError:()=>{n.danger(e.formatMessage({id:"4Hl5/B",defaultMessage:"An error occurred while cancelling the task."}),{loggingTitle:"An error occurred while cancelling the task.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task cancellation throws an error"})}})}function sKe({taskId:t,intl:e,toaster:n}){return qt({mutationFn:async()=>{if(!t)throw new Error("Cannot answer now without a task id");return await y8.answerNowTask({taskId:t})},onMutate:()=>{var o;if(!t)return;const s=(o=ef.getTask(t))==null?void 0:o.status;return As.setTaskStatus(t,En.SKIPPING),{previousStatus:s}},onSuccess:()=>{},onError:(s,o,a)=>{t&&(a!=null&&a.previousStatus)&&As.setTaskStatus(t,a.previousStatus),n.danger(e.formatMessage({id:"c0xDWm",defaultMessage:"An error occurred while skipping thinking."}),{loggingTitle:"An error occurred while skipping thinking.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task answer now throws an error"})}})}const Gxe=({taskId:t,clientThreadId:e,onClose:n})=>{const s=ne(),o=$t(),a=v8(c=>c.bySystemHint(Pe.Research)),i=Hxe({taskId:t,intl:s,toaster:o}),l=_.useCallback(()=>{i.mutate(),Is(e,null),B.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:jt(e),currentLeafId:he.getCurrentNode(mt(e)).message.id,eventSource:"mouse"}),n()},[i,e,n]);return r.jsx(Tl,{open:!0,onOpenChange:c=>{c||n()},children:r.jsxs(Ml,{children:[r.jsx(jf,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0 bg-black/25"}),r.jsxs(yd,{className:"bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",children:[r.jsx(Xy,{className:"p-4 pb-2 text-lg font-semibold md:p-6 md:pb-2",children:r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskTitle",defaultMessage:"Are you sure you want to stop researching?"})}),r.jsxs("div",{className:"flex flex-col gap-4 p-4 pt-0 md:p-6 md:pt-0",children:[r.jsx(e3,{className:"text-base",children:r.jsx("span",{className:"mb-2",children:a?r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskDescription",defaultMessage:"Stopping now will still count as one deep research request. You have {remaining} more available until {resetDate}.",values:{remaining:a.remaining,resetDate:new Date(a.reset_after).toLocaleDateString(s.locale,{month:"long",day:"numeric"})}}):r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskDescriptionNoRateLimit",defaultMessage:"Stopping now will still count as one deep research request."})})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(ye,{color:"secondary",onClick:n,children:r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskCancelButton",defaultMessage:"Don't stop"})}),r.jsx(ye,{color:"danger",className:"w-20",onClick:l,children:i.isPending?r.jsx(ws,{}):r.jsx(j,{id:"caterpillar.message.modal.confirmCancelTaskButton",defaultMessage:"Stop"})})]})]})]})]})})},Wxe=R(()=>P(()=>import("./n8rdfg2xatgkqad1.js"),__vite__mapDeps([306,1])),{loading:t=>F(t)}),L0={div:t=>{const o=t,{node:e,children:n}=o,s=we(o,["node","children"]);return r.jsx("div",U(w({},s),{className:"text-red-500",children:n}))},p:t=>{const o=t,{node:e,children:n}=o,s=we(o,["node","children"]);return r.jsx("p",U(w({},s),{className:"text-token-text-primary text-start leading-6",children:n}))},a:t=>{const o=t,{node:e,children:n}=o,s=we(o,["node","children"]);return r.jsx("a",U(w({},s),{className:"font-sm text-token-text-primary! leading-6",children:n}))}},zxe=1e3*60*2,qxe=30;function iO({taskId:t,clientThreadId:e,onClick:n,statusMessage:s,showSources:o,includeMargin:a,sources:i,progressBar:l}){const c=Bf(),[d,u]=_.useState(!1);return r.jsxs(r.Fragment,{children:[t&&d&&r.jsx(Gxe,{taskId:t,clientThreadId:e,onClose:()=>u(!1)}),r.jsxs("div",{className:"relative flex w-4/5 max-w-[416px]",children:[t&&r.jsx("button",{onClick:()=>u(!0),disabled:!t,className:"hover:bg-token-bg-elevated-secondary bg-token-bg-elevated-primary absolute end-4 bottom-4 flex items-center justify-center rounded-full border border-black/10 p-0.5 dark:border-white/10",children:r.jsx(Wxe,{className:"icon-lg"})}),r.jsx("button",{onClick:()=>c&&n(),className:z("bg-token-main-surface-primary mt-4 flex w-full items-start justify-start gap-[18px] rounded-2xl border border-black/10 px-5 py-4 shadow-sm dark:border-white/10",c?"hover:bg-token-main-surface-secondary cursor-pointer":"cursor-auto"),children:r.jsxs("div",{className:"flex w-full flex-col gap-3",children:[r.jsxs("div",{className:z("flex flex-col items-start justify-start self-stretch md:h-7 md:flex-row md:items-center md:justify-between",o?"h-12":"h-6"),children:[r.jsx("div",{className:z("font-sm text-token-text-primary w-full flex-1 truncate text-start leading-7 md:w-0",a&&"me-[30px]"),children:s}),o&&i]}),r.jsx("div",{className:z("flex w-full items-center justify-start gap-4 self-stretch pb-2",t&&"pe-10"),children:l})]})})]})]})}function l5({taskId:t,clientThreadId:e,toggleSidebar:n,openSidebar:s,startTime:o,progressBar:a}){const i=V(),l=ne(),[c,d]=_.useState(!1),u=$L();_.useEffect(()=>{if(!o)return;const p=Date.now()-o,h=zxe-p;if(h>0){const x=setTimeout(()=>{d(!0),s()},h);return()=>clearTimeout(x)}else d(!0),s()},[o,s]);const f=Ud(i),m=wr(p=>t?p.tasks[t]:null),g=f&&m&&S3(m);return _.useEffect(()=>{g&&s()},[g,s]),a||(a=r.jsx(rO,{className:"h-2 w-full"})),r.jsx(iO,{taskId:t,clientThreadId:e,onClick:n,statusMessage:c?l.formatMessage({id:"T2SbxC",defaultMessage:"Waiting"}):r.jsx("div",{className:"text-token-text-primary text-sm font-medium text-pretty",children:u.startingMessage}),progressBar:a,showSources:!1})}function Yxe(t,e,n){var a;const s=t.formatMessage({id:"Bs+OcV",defaultMessage:"Thinking"});if(e.length<2)return(a=n==null?void 0:n.initial)!=null?a:s;const o=e[e.length-2];return o.type==="summary"?o.title:o.type==="search"?o.query:(o==null?void 0:o.type)==="websiteOpen"?r.jsx(Bs,{componentOverrides:L0,children:o.activeRowText}):o.type==="fileOpen"?r.jsx(Bs,{componentOverrides:L0,children:o.activeRowText}):o.type==="pythonAnalysis"?r.jsx(Bs,{componentOverrides:L0,children:o.analysisSummary}):s}function Zxe({task:t,clientThreadId:e,caterpillarRows:n,messageWithTaskMetadata:s,totalSources:o,handleToggleCaterpillarSidebar:a}){var E,k;const i=ne(),l=Bf(),c=Yxe(i,n,(E=s.metadata)==null?void 0:E.async_task_status_messages),d=((k=t==null?void 0:t.expectedDurationMinutes)!=null?k:qxe)*60*1e3,u=V(),f=Ud(u),m=ve(u,"3550239432"),g=t.createdAt?+new Date(t.createdAt):Date.now(),p=Mx(g,d),h=s!=null&&s.create_time?s.create_time*1e3:0,x=Math.min(Mx(h||Date.now(),d),4),v=m?Math.max(p,x):p;let y;const b=r.jsx("div",{className:"bg-token-main-surface-tertiary flex h-2 shrink grow basis-0 items-start justify-start gap-2.5 overflow-hidden rounded-[10px]",children:r.jsx(Vxe,{percentage:v,barClassName:"bg-token-text-primary",backgroundClassName:"bg-token-main-surface-tertiary"})});m&&(y=b),_.useEffect(()=>{f||Is(e,{source:ts.CLIENT,value:Xt.STREAMING})},[e,f]);const{openThreadSidebar:C}=Mr();_.useEffect(()=>{n.length===2&&l&&C({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[n.length,C,t.taskId,e,l]);const S=_.useCallback(()=>{C({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[C,t.taskId]);return n.length<=1?r.jsx(l5,{taskId:t.taskId,clientThreadId:e,toggleSidebar:()=>a("activity"),openSidebar:S,startTime:new Date(t.createdAt).getTime(),progressBar:y}):r.jsx(iO,{taskId:t.taskId,clientThreadId:e,onClick:()=>a("activity"),statusMessage:c,showSources:!0,includeMargin:o>0,sources:o===0?r.jsx("div",{className:"text-token-text-tertiary text-sm text-pretty",children:r.jsx(j,{id:"zfwUjs",defaultMessage:"Looking for sources"})}):r.jsxs("button",{onClick:T=>{T.stopPropagation(),a("sources")},className:z("flex shrink-0 gap-1 text-[13px] leading-[18px] text-[#0285ff]",l?"cursor-pointer hover:text-[#0285ff]/80":"cursor-auto"),children:[r.jsx("div",{className:"relative",children:r.jsx(fn,{initial:!1,children:r.jsx(Xe.span,{initial:{opacity:0,rotateX:-90,translateY:20},animate:{opacity:1,rotateX:0,translateY:0},exit:{opacity:0,rotateX:90,translateY:-20},transition:{duration:.35},className:"absolute start-0 md:end-0",children:o},o)})}),r.jsx("div",{className:z("md:pe-0",o>0&&"ps-2",o>9&&"ps-[14px]",o>99&&"ps-[22px]"),children:o>1?r.jsx(j,{id:"zN+MuO",defaultMessage:" sources"}):r.jsx(j,{id:"dMowmJ",defaultMessage:" source"})})]}),progressBar:b})}function Yx({message:t,handleToggleCaterpillarSidebar:e}){const n=Bf();return r.jsx("div",{className:"flex w-full flex-col gap-6 pt-3 pb-6",children:r.jsx("button",{onClick:()=>n&&e(),className:z("text-token-text-tertiary flex w-full text-start",n?"hover:text-token-text-secondary cursor-pointer":"cursor-auto"),children:t})})}const Kxe=()=>!1;function uw({task:t,clientThreadId:e,messageWithTaskMetadata:n,totalSources:s,totalSearches:o,handleToggleCaterpillarSidebar:a}){var g,p,h,x,v,y;const i=t==null?void 0:t.originalConversationId,l=dN(i),c=V(),d=Ud(c),u=Kxe(),f=Ve(e,b=>$ge(b,t==null?void 0:t.taskId)),{clearSystemHintModeTrigger:m}=sa();return _.useEffect(()=>{(t==null?void 0:t.status)===En.COMPLETED&&!f&&!u&&(d&&Xg(c)?Ze(i,b=>{cn.setShouldRefetchConvoOnFinalize(b,!0)}):l(),m(Pe.Research))},[t==null?void 0:t.status,u,f,l,m,d,c,i]),r.jsx(Yx,{message:r.jsxs(r.Fragment,{children:[(y=(v=(p=(g=n.metadata)==null?void 0:g.async_task_status_messages)==null?void 0:p.completed_with_time)!=null?v:(x=(h=n.metadata)==null?void 0:h.async_task_status_messages)==null?void 0:x.completed_no_time)!=null?y:r.jsx(j,{id:"4d0xZc",defaultMessage:"Completed"}),s===0?r.jsx(j,{id:"VggF2B",defaultMessage:"  0 sources"}):s===1?r.jsx(j,{id:"zkkdKV",defaultMessage:"  1 source"}):r.jsx(j,{id:"qcKt3q",defaultMessage:"  {sourcesCount} sources",values:{sourcesCount:s}}),o>0&&r.jsx(j,{id:"ti+7CY",defaultMessage:"  {searchesCount, plural, one {# search} other {# searches}}",values:{searchesCount:o}})]}),handleToggleCaterpillarSidebar:()=>a("activity")})}function lO({clientThreadId:t}){const e=V(),n=xt(e,t),s=re(()=>{var i;return((i=bi(n))==null?void 0:i.value)===Xt.STREAMING}),[o]=Ve(t,i=>[he.getRequestId(i)]);return Ia(o)||s}function oKe({messages:t,clientThreadId:e}){var m;const n=V(),s=t.find(g=>{var p,h;return((p=g.metadata)==null?void 0:p.b1de6e2_s)&&((h=g.metadata)==null?void 0:h.async_task_id)}),o=(m=s==null?void 0:s.metadata)==null?void 0:m.async_task_id,a=t.find(g=>g.recipient===Nn.START_RESEARCH_TASK),i=Ud(n),l=Ve(e,g=>i?Vge(g,a==null?void 0:a.id):Hge(g,a==null?void 0:a.id)),c=lO({clientThreadId:e}),[d,u]=_.useState(c),{clearSystemHintModeTrigger:f}=sa();return _.useEffect(()=>{const g=setTimeout(()=>{u(l&&(c||i))},3e3);return()=>clearTimeout(g)},[c,l,i]),_.useEffect(()=>{d&&f(Pe.Research)},[d,f]),!s||!o?d?r.jsx(l5,{taskId:o,clientThreadId:e,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):null:r.jsx(Qxe,{clientThreadId:e,payloadTaskId:o,messageWithTaskMetadata:s})}function Qxe({payloadTaskId:t,messageWithTaskMetadata:e,clientThreadId:n}){var m,g,p,h,x,v,y,b;txe(t,e,n);const s=wr(C=>t?C.tasks[t]:null),o=ne(),a=s==null?void 0:s.status,i=_.useMemo(()=>s!=null&&s.rows?s.rows:[],[s==null?void 0:s.rows]),{toggleThreadSidebar:l}=Mr(),{totalSources:c,totalSearches:d}=_.useMemo(()=>{if(!i)return{uniqueSources:[],totalSources:0,totalSearches:0};const C=_xe(i),S=C.reduce((k,T)=>k+T.count,0),E=xxe(i);return{uniqueSources:C,totalSources:S,totalSearches:E}},[i]),u=pm("caterpillar"),f=_.useCallback(C=>{t&&l({type:"caterpillar",caterpillarId:t,initialTab:C},u)},[l,t,u]);return AG(t),(g=(m=e.metadata)==null?void 0:m.async_task_status_messages)!=null&&g.completed_with_time?r.jsx(uw,{task:s,clientThreadId:n,messageWithTaskMetadata:e,totalSources:c,totalSearches:d,handleToggleCaterpillarSidebar:f}):!s||!a||a===En.UNDETERMINED?r.jsx(l5,{taskId:t,clientThreadId:n,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):s.status===En.COMPLETED?r.jsx(uw,{task:s,clientThreadId:n,messageWithTaskMetadata:e,totalSources:c,totalSearches:d,handleToggleCaterpillarSidebar:f}):s.status===En.FAILED?r.jsx(Yx,{message:(x=(h=(p=e.metadata)==null?void 0:p.async_task_status_messages)==null?void 0:h.error)!=null?x:o.formatMessage({id:"at6zk8",defaultMessage:"Failed to think"}),handleToggleCaterpillarSidebar:()=>f("activity")}):s.status===En.CANCELLED?r.jsx(Yx,{message:(b=(y=(v=e.metadata)==null?void 0:v.async_task_status_messages)==null?void 0:y.cancelled)!=null?b:o.formatMessage({id:"u1rIr5",defaultMessage:"Task Cancelled"}),handleToggleCaterpillarSidebar:()=>f("activity")}):r.jsx(Zxe,{task:s,clientThreadId:n,caterpillarRows:i,messageWithTaskMetadata:e,totalSources:c,handleToggleCaterpillarSidebar:f})}var O0,fw;function Jxe(){if(fw)return O0;fw=1;function t(e){return e==null}return O0=t,O0}var Xxe=Jxe();const eye=Zn(Xxe),tye=R(()=>P(()=>import("./q264k2ztz0dic0dr.js"),__vite__mapDeps([144,1])),{loading:t=>F(t)}),nye=R(()=>P(()=>import("./jx5pd8qsxc77tbjo.js"),__vite__mapDeps([307,1])),{loading:t=>F(t)});function sye({formData:t,readOnly:e,schema:n,uiSchema:s,onChange:o}){const a=_.useCallback((c,d)=>{o==null||o(U(w({},t),{[c]:d}))},[t,o]);_.useEffect(()=>{const c={};Object.entries(n.properties).forEach(([d,u])=>{c[d]===void 0&&u.default!==void 0&&("enum"in u?c[d]=[u.default]:c[d]=u.default)}),o(c)},[]);const i=_.useMemo(()=>{const c=Object.fromEntries(s.elements.map(d=>{const u=bo(d.scope.split("/"));return u?[u,d]:[]}).filter(d=>d.length>0));return Object.entries(n.properties).map(([d,u])=>{const f=c[d];return f?{dataRow:u,uiRow:f,rowKey:d}:null}).filter(d=>!!d).sort((d,u)=>{const f="enum"in d.dataRow,m="enum"in u.dataRow;return f===m?0:f?-1:1})},[n,s]),l=i.filter(c=>"enum"in c.dataRow).length;return r.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:i.map((c,d)=>r.jsx(oye,{updateFormDataForRow:u=>a(c.rowKey,u),clearAll:()=>a(c.rowKey,void 0),renderRow:c,value:t==null?void 0:t[c.rowKey],readOnly:e,forceFullWidth:l%2===1&&d===l-1},c.rowKey))})}function oye({updateFormDataForRow:t,clearAll:e,renderRow:n,readOnly:s,value:o,forceFullWidth:a=!1}){const{dataRow:i,uiRow:l,rowKey:c}=n,d=ne(),u=_.useCallback(E=>{o===void 0?t([E]):o.includes(E)?t(o.filter(k=>k!==E)):t([...o,E])},[o,t]),[f,m]=_.useState(!1),[g,p]=_.useState(""),[h,x]=_.useState(!1),[v,y]=_.useState(void 0);_.useEffect(()=>{m(!1),p("")},[h]);const b=_.useCallback(()=>{u(g),m(!1),p(""),v&&y([...v,g])},[g,u,m,p,v]);_.useEffect(()=>{"enum"in i&&i.enum&&y(i.enum)},[i]);const C=_.useMemo(()=>{const E=i.type,k=eye(o)||o===""||Array.isArray(o)&&o.length===0;if(v){const T=k?d.formatMessage({id:"Dzsmf1",defaultMessage:"Any"}):o.length===1?o[0]:o[0]+" + ".concat(o.length-1);return r.jsxs(K.Root,{open:h,onOpenChange:x,children:[r.jsxs(K.Trigger,{className:"border-token-main-surface-quaternary bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-full justify-between rounded-md border text-start",children:[r.jsx("span",{className:"text-token-text-primary truncate",children:T}),r.jsx(tye,{className:"icon-sm text-token-text-tertiary"})]}),r.jsx(K.Portal,{children:r.jsxs(K.Content,{size:"medium",children:[r.jsx(K.MultiSelectCheckboxItem,{checked:(o==null?void 0:o.length)===0||o===void 0,onCheckedChange:e,children:r.jsx(j,{id:"Dzsmf1",defaultMessage:"Any"})},"any"),r.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),v.map(M=>r.jsx(K.MultiSelectCheckboxItem,{checked:o==null?void 0:o.includes(M),onCheckedChange:()=>u(M),children:r.jsx("span",{className:"pe-2",children:M})},M)),r.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),f?r.jsxs("div",{className:"flex w-full flex-row items-center justify-between pe-5",children:[r.jsx(pf,{autoFocus:!0,name:"new-option",className:"bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-0 flex-1 grow rounded-md border-none text-start focus-within:ring-0!",value:g,placeholder:d.formatMessage({id:"LhAlwa",defaultMessage:"Add option..."}),ariaLabel:d.formatMessage({id:"XElhCL",defaultMessage:"New option"}),onChange:M=>p(M.target.value),onKeyDown:M=>M.stopPropagation(),onPressEnter:b}),r.jsx("button",{className:"shrink-0 cursor-pointer",onClick:b,children:r.jsx(nye,{className:"icon-sm text-token-text-primary"})})]}):r.jsx("div",{className:"flex px-2",children:r.jsx("button",{className:"bg-token-main-surface-primary hover:bg-token-main-surface-secondary w-full rounded-md border-none p-2 text-start text-sm",onClick:()=>m(!0),children:r.jsx(j,{id:"lMgmto",defaultMessage:"Add Option..."})})})]})})]})}else return E==="string"||E==="integer"?r.jsx(pf,{ariaLabel:d.formatMessage({id:"M18pon",defaultMessage:"Form row"}),name:c,color:"quaternary",placeholder:l.placeholder,value:o!=null?o:"",type:"text",className:z("border-token-main-surface-quaternary text-token-text-primary",k&&"text-token-text-quaternary"),onChange:T=>t(T.target.value),disabled:s}):null},[i,o,l.placeholder,u,d,c,s,t,e,f,g,h,v,b]);if(!C)return null;const S=a||!v;return r.jsx(aye,{label:l.label,className:z("col-span-1 flex flex-col justify-between",S&&"sm:col-span-2"),children:C})}function aye({children:t,label:e,className:n}){return r.jsxs("div",{className:n,children:[r.jsx("p",{className:"mb-1 font-[550]",children:e}),r.jsx("div",{children:t})]})}function rye(t,e,n){const s=e.elements.length;if(s===0)return;const o=Object.entries(t).reduce((a,[i,l])=>Array.isArray(l)?l.length>0?a+1:a:l!==""?a+1:a,0);B.logEventWithStatsig("dynamic-form-submission","chatgpt_dyanmic_form_submission",U(w({},Tn({clientThreadId:n})),{totalItems:s.toString(),completedItems:o.toString(),ratio:(o/s).toString()}))}function iye(t,e){let n="";return e.elements.forEach(s=>{var c;const o=s.scope.split("/").pop(),a=o&&t[o],i=a?Array.isArray(a)?a.join(", "):a:"Any",l=(c=s.label)!=null?c:o;n+="".concat(l,": ").concat(i,"\n")}),n}function aKe({messages:t,clientThreadId:e,isLastMessage:n}){var C;const s=t.find(S=>S.author.role===Ke.Assistant),o=t.find(S=>{var E;return(E=S.metadata)==null?void 0:E.json_form}),a=(C=o==null?void 0:o.metadata)==null?void 0:C.json_form,[i,l]=_.useState({}),[c,d]=_.useState(),[u,f]=_.useState(),m=gr.useStore(),g=Jf(e);_.useEffect(()=>{a&&(d(a.json_form_ui),f(a.json_form_data))},[a]);const p=_.useCallback(()=>{if(l({}),c){const S=U(w({},c),{elements:c.elements.filter(E=>E.scope!=="#/properties/AdditionalInfo")});d(S)}u&&(delete u.properties.AdditionalInfo,f(u))},[l,d,f,c,u]),h=_.useCallback(()=>{if(c){const S=U(w({},c),{elements:[...c.elements,{type:"Control",scope:"#/properties/AdditionalInfo",label:"Additional Info",placeholder:"Any other details..."}]});d(S)}if(u){const S=U(w({},u.properties),{AdditionalInfo:{type:"string"}});f(U(w({},u),{properties:S}))}},[d,f,c,u]),x=c==null?void 0:c.elements.some(S=>S.scope.endsWith("#/properties/AdditionalInfo")),v=Ve(e,he.getCurrentLeafId),y=(o==null?void 0:o.id)!==v;if(!o||!u||!c)return(s==null?void 0:s.status)==="in_progress"&&n?r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(tr,{className:"h-[26px] w-full"}),r.jsx(tr,{className:"h-[26px] w-3/4"}),r.jsx(tse,{})]}):null;if(y)return null;const b=async S=>{const E=m.getActiveSystemHintType(),k=iye(i,c);rye(i,c,e),g({sourceEvent:S,promptMessage:is(k),completionMetadata:{systemHints:E?[E]:[],conversationMode:{kind:wt.PrimaryAssistant}}})};return r.jsxs(JI,{children:[r.jsx(lye,{formData:i,dataSchema:u,uiSchema:c,setData:l,readOnly:y}),r.jsxs("div",{className:"flex w-full justify-between",children:[x?r.jsx("div",{}):r.jsx(ye,{disabled:y,onClick:h,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Sen69P",defaultMessage:"Add a detail"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ye,{disabled:y,onClick:p,color:"secondary",className:"text-token-text-secondary",children:r.jsx(j,{id:"Uqo7UD",defaultMessage:"Reset"})}),r.jsx(ye,{disabled:y,onClick:b,children:r.jsx(j,{id:"FVou++",defaultMessage:"Start"})})]})]})]})}function lye({dataSchema:t,uiSchema:e,setData:n,readOnly:s,formData:o}){return r.jsx("div",{children:r.jsx(sye,{formData:o,readOnly:s,schema:t,uiSchema:e,onChange:a=>n(a)})})}const cye=/^[A-Za-z_][\w]*$/,dye=2;function uye(t){const e=_.useMemo(()=>t?c5(t):null,[t]);return _.useCallback(n=>{e&&Yo(e,void 0,n)},[e])}function fye(){const t=ln(),e=tp(n=>n.showDebugConversationTurns);return mye(t,e)}function mye(t,e){return!!t&&Sh(t)||e}function c5(t,e={}){var l,c;const{indent:n=0}=e,s=" ".repeat(n),o=gye((l=t.props)!=null?l:{}),a=((c=t.children)!=null?c:[]).filter(d=>d!=null);if(!a.length)return"".concat(s,"<").concat(t.type).concat(o," />");const i=a.map(d=>c5(d,{indent:n+dye})).join("\n");return"".concat(s,"<").concat(t.type).concat(o,">\n").concat(i,"\n").concat(s,"</").concat(t.type,">")}function gye(t){const e=Object.keys(t!=null?t:{}).filter(s=>t[s]!==void 0);if(!e.length)return"";const n=e.sort().map(s=>pye(s,t[s]));return" ".concat(n.join(" "))}function pye(t,e){return typeof e=="string"?"".concat(t,"=").concat(JSON.stringify(e)):"".concat(t,"={ ").concat(Zx(e)," }")}function Zx(t){if(hye(t))return c5(t,{indent:0});if(t===null)return"null";if(t===void 0)return"undefined";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="number"){if(!Number.isFinite(t))throw new Error("Cannot serialize non-finite numbers in DIL props");return String(t)}if(typeof t=="string")return JSON.stringify(t);if(Array.isArray(t)){const e=t.map(n=>Zx(n)).join(", ");return"[".concat(e,"]")}if(t instanceof Date)return JSON.stringify(t.toISOString());if(_ye(t)){const n=Object.keys(t).sort().map(s=>{const o=cye.test(s)?s:JSON.stringify(s);return"".concat(o,": ").concat(Zx(t[s]))}).join(", ");return n?"{ ".concat(n," }"):"{}"}return JSON.stringify(t)}function hye(t){return!t||typeof t!="object"?!1:"type"in t&&"props"in t&&"children"in t}function _ye(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const xye=R(()=>P(()=>import("./ggxcaqk9edn29vp4.js").then(t=>t.i),__vite__mapDeps([308,1])).then(t=>t.DILRenderer));function cO(t){const c=t,{props:e={},children:n=[]}=c,s=we(c,["props","children"]),o=w(w({},e),s),a=n.map(cO),d=o,{type:i}=d,l=we(d,["type"]);if(typeof i!="string")throw new Error("Invalid DIL node: missing widget type");return U(w({},l),{type:i,children:a})}const yye=({dil:t,rootWidget:e})=>{var f,m;const n=IG(),[s,o]=_.useState(0),a=_.useMemo(()=>{const g=e!=null?e:t?cO(t):null;if(!g)throw new Error("DILWidget requires either a dil or rootWidget");return g},[e,t]),i=(m=(f=a.theme)!=null?f:n)!=null?m:"light",l=_.useRef(i),c=_.useMemo(()=>U(w({},a),{theme:i}),[a,i]),d=uye(t),u=fye();return _.useEffect(()=>{l.current!==i&&(l.current=i,o(g=>g+1))},[i]),r.jsxs("div",{className:"mt-4",children:[t&&u&&r.jsx("div",{className:"text-token-text-tertiary hover:text-token-text-secondary mb-2 flex justify-end",children:r.jsx(gI,{onCopy:d,buttonText:"Copy DIL"})}),r.jsx(xye,{widget:c,theme:i},s)]})},rKe=Object.freeze(Object.defineProperty({__proto__:null,DILWidget:yye},Symbol.toStringTag,{value:"Module"})),dO=0,d5=700,vye=t=>{var e;return Array.from((e=t.match(/\s*\S+(?:\s+|$)/g))!=null?e:[])},bye=/^\s*$/,Cye=()=>{const{locale:t}=ne(),e=_.useMemo(()=>{try{return new Intl.Segmenter(t,{granularity:"word"})}catch(s){return null}},[t]);return _.useCallback(s=>{var a;if(e==null)return vye(s);const o=[];for(const{segment:i,isWordLike:l}of e.segment(s))if(bye.test(i)||!l){const c=Math.max(o.length-1,0);(a=o[c])!=null||(o[c]=""),o[c]+=i}else o.push(i);return o},[e])},Sye=_.createContext({isDisabled:!0,segmentText:()=>[],enqueueElement:()=>{},dequeueElement:()=>{},updateElementBounds:()=>{},reportReady:()=>{},reportProgress:()=>{},reportComplete:()=>{},lastPositionCompletedAnimating:null,activeStartPos:null,animationTiming:{durationMs:d5,delayMs:dO}}),iu=(t,e)=>"".concat(t,"-").concat(e),wye=t=>{const[e,n]=t.split("-");return{tag:e,startPos:parseInt(n)}},iKe=({isDisabled:t,onComplete:e,children:n,defaultDelayPerSegmentMs:s=dO,defaultAnimationDurationPerSegmentMs:o=d5})=>{const a=_.useRef(new Set),[i,l]=_.useState(null),[c,d]=_.useState(null),u=_.useRef(new Map),f=_.useRef(null),m=_.useCallback((C,S,E,k)=>{var T;f.current=Math.max((T=f.current)!=null?T:0,E),u.current.set(iu(C,S),{start:S,end:E,numChildren:k})},[]),g=_.useCallback((C,S)=>{c!=null&&S<=c||(a.current.add(iu(C,S)),a.current.size===1&&d(S))},[c]),p=_.useCallback((C,S)=>{const E=iu(C,S);a.current.delete(E),u.current.delete(E)},[]),[h]=_.useState(()=>({delayMs:s,durationMs:o})),x=_.useCallback((C,S,E)=>{var A;if(S!==c)return;const k=iu(C,S),T=(A=u.current.get(k))==null?void 0:A.end,M=f.current;T==null||M==null},[c]),v=_.useCallback((C,S)=>{const E=iu(C,S);if(!a.current.has(E))return;a.current.delete(E);let k=null;for(const T of a.current){const{startPos:M}=wye(T);(k==null||M<k)&&(k=M)}k!=null&&d(k)},[]),y=_.useCallback(C=>{(a.current.size===0||a.current.size===1&&C===f.current)&&(e==null||e()),l(S=>Math.max(S!=null?S:0,C))},[e]),b=Cye();return r.jsx(Sye.Provider,{value:{lastPositionCompletedAnimating:i,isDisabled:t,activeStartPos:c,animationTiming:h,segmentText:b,enqueueElement:g,dequeueElement:p,updateElementBounds:m,reportProgress:x,reportReady:v,reportComplete:y},children:n})},kye="_root_m1hgl_7",Eye="_fadeIn_m1hgl_8",lKe={root:kye,fadeIn:Eye,"fade-in":"_fade-in_m1hgl_1"},cKe=()=>{const t=ze(V(),"3991624489"),e=tp(({wordFadeType:o})=>o),n=tp(({tokenBufferType:o})=>o),s=t.get("animation_duration",d5);return{wordFadeType:Jg(e!=null?e:t.get("word_fade_type"),NG),bufferType:Jg(n!=null?n:t.get("token_buffer_type"),jG),animationDurationMs:s}};function uO(t){return ve(t,"2304807207")}function dKe({text:t}){return t&&t.length>0?r.jsx("span",{className:"result-streaming streaming-dot loading-shimmer relative pt-1",children:r.jsx(Bs,{children:t})}):r.jsx("span",{className:"result-streaming streaming-dot relative pt-1",children:""})}function uKe(t,e,n,s){var o;return(o=Tye(t))!=null?o:Iye(t,e,n,s)}function Tye(t){var d,u,f;const{errType:e,errCode:n,err:s,disclaimers:o}=(d=t.clientMetadata)!=null?d:{},a=Aye(t),i=n!==Br.ModelIncompatibility&&n!==Br.ContentPolicy&&((f=(u=t.clientMetadata)==null?void 0:u.canRetry)!=null?f:!0);if(a&&Mye(t))return{flagSeverity:"warning",shouldHideContent:!0,errCode:Br.ContentRegurgitation,errMessage:s,canRetry:i};if(!(o&&o.length>0)&&a)return{flagSeverity:"warning",shouldHideContent:!0,errCode:Br.ContentOrTos,errMessage:s,canRetry:i};if(e)return{flagSeverity:e,shouldHideContent:e==="danger"&&(n===Br.ContentPolicy||n===Br.ModelIncompatibility),disclaimers:o,errCode:n,errMessage:s,canRetry:i}}function Mye(t){var e;return((e=t.metadata)==null?void 0:e.safety_plugin_status_code)===123}function Aye(t){var e,n;return((n=(e=t.metadata)==null?void 0:e.finish_details)==null?void 0:n.type)==="content_filter"}function Iye(t,e,n,s){var a,i,l,c;if(!n&&e&&(t==null?void 0:t.author.role)===Ke.User&&t.status!==void 0&&!s)return{flagSeverity:"info",shouldHideContent:!1,errCode:Lu.MissingLastCompletion,canRetry:!0};if(((i=(a=t.metadata)==null?void 0:a.finish_details)==null?void 0:i.type)==="interrupted"&&((c=(l=t.metadata)==null?void 0:l.finish_details)==null?void 0:c.reason)==="server_error")return{flagSeverity:"danger",shouldHideContent:!1,errCode:Lu.InterruptionServerError,canRetry:!0}}var qn=(t=>(t[t.Thought=0]="Thought",t[t.Recap=1]="Recap",t[t.Search=2]="Search",t[t.CodeAnalysis=3]="CodeAnalysis",t[t.ImageAnalysis=4]="ImageAnalysis",t[t.ComputerOutput=5]="ComputerOutput",t[t.N7jupdLoading=6]="N7jupdLoading",t[t.Browsing=7]="Browsing",t[t.N7jupdAPI=8]="N7jupdAPI",t[t.e1ld0dvz=9]="e1ld0dvz",t[t.Glaux=10]="Glaux",t[t.Strix=11]="Strix",t))(qn||{});const jye=_.createContext(null);let Ug=null;const fO=()=>{var t;return(t=Ug==null?void 0:Ug.platformConnectors)!=null?t:null};function fKe({value:t,children:e}){"use no forget";return Ug=t,r.jsx(jye.Provider,{value:t,children:e})}const Nye=_.createContext({postId:""});function mO(){const{postId:t}=_.useContext(Nye),{postWithProfile:e}=_.useContext(PG);return(e==null?void 0:e.post.id)||t}class Pye{async fetch(e,n){const a=this.makeQueryOptions(n,e),{enabled:s}=a,o=we(a,["enabled"]);return await e.fetchQuery(o)}makeQueryOptions(e,n){var i;const s=Co(e.asset.asset_pointer),o=U(w({},e),{id:s}),a=["getFileDownloadLink",s,e.gizmoId,e.conversationId,e.sharedThreadId,e.postId];return e.force&&(n==null||n.invalidateQueries({queryKey:a})),{queryKey:a,queryFn:async()=>s.startsWith(Kc)?U(w({},e.asset),{url:s}):await Rye(o),staleTime:OT,enabled:(i=e.getServerUrl)!=null?i:!0}}}const qd=new Pye;async function Rye(t){const{asset:e,gizmoId:n,id:s,isUnauthenticated:o,conversationId:a,postId:i}=t,l=await Ah(s,n,o,a,!1,i).catch(c=>{throw c instanceof Un||Fe.addError(new Error("Could not fetch file with ID ".concat(s," from file service"),{cause:c})),c});if(l.status!==Ih.Success)throw Fe.addError("Could not fetch file with ID ".concat(s," from file service"),l),new Error("Could not fetch file with ID ".concat(s," from file service"));return U(w({},e),{url:l.download_url})}function mKe(o){var a=o,{className:t,onLoad:e,fadeIn:n=!0}=a,s=we(a,["className","onLoad","fadeIn"]);const[i,l]=_.useState(!1);function c(d){l(!0),e==null||e(d)}return r.jsx("img",U(w({},s),{alt:s.alt,onLoad:d=>c(d),className:z(t,"w-fit",n&&"transition-opacity duration-300",i?"opacity-100":"opacity-0")}))}function Lye(t,e,n){const s=V(),o=!tt(s),a=_.useContext($h),i=a==null?void 0:a.serverSharedThreadId,l=mO();return P$({queries:t.map(c=>qd.makeQueryOptions({asset:c,sharedThreadId:i,gizmoId:e,isUnauthenticated:o,postId:l,conversationId:n}))})}function gKe(t){"use forget";const e=W.c(10),{asset:n,gizmoId:s,conversationId:o,getServerUrl:a,sharedThreadId:i}=t,l=V();let c;e[0]!==l?(c=tt(l),e[0]=l,e[1]=c):c=e[1];const d=!c,u=mO();let f;return e[2]!==n||e[3]!==o||e[4]!==a||e[5]!==s||e[6]!==d||e[7]!==u||e[8]!==i?(f=qd.makeQueryOptions({asset:n,gizmoId:s,isUnauthenticated:d,conversationId:o,getServerUrl:a,sharedThreadId:i,postId:u}),e[2]=n,e[3]=o,e[4]=a,e[5]=s,e[6]=d,e[7]=u,e[8]=i,e[9]=f):f=e[9],rt(f)}const Oye=t=>{const[e,n]=_.useState(null);return Ve(t,o=>{var i,l,c;if(e)return e;const a=he.findNode(o,d=>{var u;return((u=d.message.metadata)==null?void 0:u.visited_risky_domain)!==void 0});return(i=a==null?void 0:a.message.metadata)!=null&&i.visited_risky_domain?(n((l=a==null?void 0:a.message.metadata)==null?void 0:l.visited_risky_domain),(c=a.message.metadata)==null?void 0:c.visited_risky_domain):null})},Dye=(t,e)=>{var i,l;const n=To(),s=re(()=>e!=null?e:n==null?void 0:n.serverId$()),o=_.useMemo(()=>t?[t]:[],[t]);return(l=(i=Lye(o,void 0,s)[0])==null?void 0:i.data)==null?void 0:l.url},pKe=t=>{const[e,n]=_.useState(t);return _.useEffect(()=>{if(!t||t===e)return;const s=new Image;return s.src=t,s.onload=()=>n(t),s.onerror=()=>console.warn("failed to load",t),()=>{s.src="",s.onload=null,s.onerror=null}},[t,e]),e},Fye=t=>t.replace(/^wwws?\./,""),Bye=["localhost","127.0.0.1","newtab"];function Uye(t){try{return new URL(t)}catch(e){return Fe.addError(e),null}}function mw(t){var a;const e=(a=t==null?void 0:t.vmMetadata)==null?void 0:a.url;if(!e)return{domain:null,origin:null};if(e.startsWith("data:"))return{domain:null,origin:null};const n=Uye(e);if(!n)return{domain:null,origin:null};if(Bye.includes(n.hostname))return{domain:null,origin:null};const s=n.origin;return{domain:Fye(n.hostname),origin:s}}const $ye=(t,e)=>{var u,f,m,g,p;const n=[],s=[],o=[],a=[];if(t.every(h=>h.author.name===Nn.n7jupd_m)){if(!e)return;const h=bo(t),x=typeof((u=h==null?void 0:h.metadata)==null?void 0:u.agent_custom_loading_headline)=="string"?h.metadata.agent_custom_loading_headline:void 0;return[{type:qn.N7jupdLoading,needs_startup:(m=(f=h==null?void 0:h.metadata)==null?void 0:f.needs_startup)!=null?m:!1,custom_headline:x}]}for(const h of t){if(h.content.content_type===ut.ComputerOutput){const x=U(w({},h.content.screenshot),{vmMetadata:(g=h.metadata)==null?void 0:g.n7jupd_v,messageId:h.id});n.push(x)}if(h.content.content_type===ut.Text&&((p=h.recipient)!=null&&p.includes("computer"))&&s.push({type:h.recipient,parts:h.content.parts.join("")}),h.content.content_type===ut.StructuredThoughts)for(const x of h.content.thoughts)x.summary&&(o.push(x.summary),a.push(x.content))}const l=!1,c=[],d=Math.min(n.length,a.length);for(let h=0;h<d;h++){const x=n[h],{domain:v}=mw(x),y={type:qn.ComputerOutput,screenshots:[x],text:"",messages:t,thoughts:[o[h]],fullThoughts:[a[h]],actions:s,isBlank:!v};c.push(y)}if(n.length>d){const h=n.slice(d);if(c.length===0)c.push({type:qn.ComputerOutput,screenshots:h,text:"",messages:t,thoughts:[],fullThoughts:[],actions:s,isBlank:l});else{const x=c[c.length-1];x.screenshots.push(...h),x.isBlank&&(x.isBlank=h.every(v=>!mw(v).domain)&&x.isBlank)}}if(a.length>d)for(let h=d;h<a.length;h++)c.push({type:qn.ComputerOutput,screenshots:[],text:"",messages:t,thoughts:[o[h]],fullThoughts:[a[h]],actions:s,isBlank:!0});return!c.length&&(n.length||a.length)?[{type:qn.ComputerOutput,screenshots:n,text:"",messages:t,thoughts:o,fullThoughts:a,actions:s,isBlank:l}]:c},hKe=t=>{var s,o,a,i;const e=t.messages[0];let n;switch(e.author.name){case"browser.search":{const l=(o=(s=e.metadata)==null?void 0:s.n7jupd_title)!=null?o:"Searched",c=(i=(a=e.metadata)==null?void 0:a.n7jupd_urls)!=null?i:[];n={type:qn.Search,queries:[{type:"search",q:l}],sources:c.map(d=>({type:"search_result_group",domain:d,entries:[{type:"search_result",url:d,title:"",snippet:"",ref_id:null,content_type:null,pub_date:null}]}))};break}}if(!(!n||!n.sources.length))return[n]},Kx=/connector_[0-9a-f]{32}/i,_Ke=t=>{var l,c,d,u,f,m,g,p,h,x,v,y,b,C,S,E;const e=fO();if(!e)return;const n=t.messages[0];if(!n)return;const s=(l=n.metadata)==null?void 0:l.n7jupd_subtool;if((c=s==null?void 0:s.subtool)!=null&&c.includes("search"))return[{type:qn.N7jupdAPI,action:"n7jupd_as"}];if((d=s==null?void 0:s.subtool)!=null&&d.includes("api_doc"))return[{type:qn.N7jupdAPI,action:"n7jupd_ag"}];const o=(f=(u=n.metadata)==null?void 0:u.n7jupd_subtool)==null?void 0:f.generic_api_func;let a=(g=(m=o==null?void 0:o.match(Kx))==null?void 0:m[0])!=null?g:void 0;a||(a=(v=(x=(h=(p=n.metadata)==null?void 0:p.n7jupd_url)==null?void 0:h.match(Kx))==null?void 0:x[0])!=null?v:void 0);const i=e==null?void 0:e.get(a!=null?a:"");if(!a||!i)return[{type:qn.N7jupdAPI,action:"n7jupd_cf"}];if(t.messages.length>1&&((y=t.messages[1].metadata)!=null&&y.connector_source)&&t.messages[1].content.content_type===ut.TetherBrowsingDisplay){if((b=t.messages[1].metadata)!=null&&b.display_url&&((C=t.messages[1].metadata)!=null&&C.display_title))return[{type:qn.N7jupdAPI,action:"n7jupd_cf",source:i,fetchResult:{url:(S=t.messages[1].metadata)==null?void 0:S.display_url,title:(E=t.messages[1].metadata)==null?void 0:E.display_title}}];const k=gO(t.messages[1].content.result);if(k.length)return[{type:qn.N7jupdAPI,action:"n7jupd_cs",source:i,searchResults:k.map(([T,M])=>({url:T,title:M}))}]}return[{type:qn.N7jupdAPI,action:"n7jupd_cf",source:i}]},xKe=t=>{var i,l,c,d,u,f,m,g,p,h,x,v,y;const e=fO();if(!e)return;const n=t.messages[0];if(!n)return;if((i=n.recipient)!=null&&i.includes("list_resources")||(l=n.recipient)!=null&&l.includes("search_tools"))return[{type:qn.N7jupdAPI,action:"n7jupd_as"}];if((c=n.recipient)!=null&&c.includes("read_resources")||(d=n.recipient)!=null&&d.includes("get_resource"))return[{type:qn.N7jupdAPI,action:"n7jupd_ag"}];if(t.messages.length==1)return[];const s=t.messages[1];if(s.content.content_type!==ut.CitableCodeOutput)return[{type:qn.N7jupdAPI,action:"n7jupd_cf"}];let o=(f=(u=s.content.metadata)==null?void 0:u.connector_id)!=null?f:void 0;o||(o=(g=(m=s.content.output_str.match(Kx))==null?void 0:m[0])!=null?g:void 0);const a=e==null?void 0:e.get(o!=null?o:"");if(t.messages.length>1&&t.messages[1].content.content_type===ut.CitableCodeOutput&&((p=t.messages[1].content.metadata)!=null&&p.connector_source)){if((h=t.messages[1].metadata)!=null&&h.display_url&&((x=t.messages[1].metadata)!=null&&x.display_title))return[{type:qn.N7jupdAPI,action:"n7jupd_cf",source:a,fetchResult:{url:(v=t.messages[1].metadata)==null?void 0:v.display_url,title:(y=t.messages[1].metadata)==null?void 0:y.display_title}}];const b=gO(t.messages[1].content.output_str);if(b.length)return[{type:qn.N7jupdAPI,action:"n7jupd_cs",source:a,searchResults:b.map(([C,S])=>({url:C,title:S}))}]}return[{type:qn.N7jupdAPI,action:"n7jupd_cf",source:a}]};function gO(t){const e=t.replace(/^\s*L\d+:\s*/gm,""),n=[],s=[];for(let f=0;f<e.length;f++){const m=e[f];if(m==="{")s.push(f);else if(m==="}"){if(s.length===0)continue;const g=s.pop();n.push({start:g,end:f})}}const o=["display_url","web_link","url","web_url"],a=["display_title","title","name","path","subject","summary"],i=f=>f.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),l=(f,m)=>{const g=[];for(const p of f){const h=new RegExp('"'.concat(i(p),'"\\s*:\\s*"([^"]+)"'),"g");for(const x of m.matchAll(h))g.push(x[1].replace(/\n/g,""))}return g},c=[];for(const{start:f,end:m}of n){const g=e.slice(f,m+1),p=l(o,g),h=l(a,g),x=Math.min(p.length,h.length);for(let v=0;v<x;v++)c.push([p[v],h[v]])}const d=new Map;for(const[f,m]of c)d.set("".concat(f,"|||").concat(m),[f,m]);return Array.from(d.values())}const Vye="_markdown_1frq2_10",Hye={markdown:Vye},gw=({content:t})=>r.jsx(Bs,{className:z(Hye.markdown,"text-token-text-secondary text-[14px] leading-5"),componentOverrides:{code:e=>r.jsx(Dte,U(w({},e),{wrapperClassName:"",showActionBar:!1}))},children:t});function Gye(t){let e;try{e=JSON.parse(t)}catch(o){return Fe.addError(o),null}const n=o=>typeof o=="object"&&o!=null&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.button=="number"&&typeof o.action=="string",s=o=>typeof o=="object"&&o!=null&&Array.isArray(o.actions);if(typeof e=="object"&&e!=null&&s(e)){const o=Il(e.actions,a=>a&&a.action==="click");if(n(o))return o}else if(n(e))return e;return null}const Wye=({chunk:t,isKAUR1BR5:e})=>{var g,p,h,x,v;const n=_.useRef(null),s=t.screenshots.at(-1),o=(g=t.fullThoughts)==null?void 0:g.at(-1),a=(p=t.thoughts)==null?void 0:p.at(-1),i=o!=null?o:a,l=(h=t.actions)==null?void 0:h.at(-1),c=Dye(s,void 0),[d,u]=_.useState(null),[f,m]=_.useState(!1);return _.useEffect(()=>{if(!c)return;let y=!1;const b=new Image;return m(!1),b.src=c,b.onload=()=>{!y&&u(c)},b.onerror=()=>{!y&&u(null),!y&&m(!0),!y&&Fe.addError(new Error("Failed to load image"))},()=>{y=!0}},[c]),(l==null?void 0:l.type)==="computer.click"&&Gye(l.parts),e?((x=t.fullThoughts)==null?void 0:x.length)===0?r.jsx(gw,{content:"Used the browser"},"used-the-browser"):r.jsx(r.Fragment,{children:(v=t.fullThoughts)==null?void 0:v.map(y=>r.jsx(gw,{content:y},y))}):r.jsxs("div",{className:"flex w-full flex-row items-start justify-center gap-4",children:[i&&r.jsx("div",{className:"text-token-text-secondary flex-1 text-sm",children:i}),s&&r.jsx("div",{ref:n,className:"border-token-border-heavy mt-1 flex h-30 w-40 items-center justify-center overflow-hidden rounded-lg border",children:d&&r.jsx(ER,{src:d,alt:"screenshot",className:"flex aspect-[1024/764] w-40 items-center justify-center overflow-hidden",children:r.jsx("img",{src:d,alt:"screenshot",loading:"lazy",className:"h-full w-full object-cover object-bottom"},d)})})]})},zye=({clientThreadId:t,messageId:e,renderClosestScreenshot:n})=>{const s=Ve(t,i=>{const c=he.getConversationTurns(i).find(f=>f.messages.some(m=>m.id===e));if(!c)return null;const d=$ye([...c.messages],!1);return d==null?void 0:d.find(f=>f.type===qn.ComputerOutput)}),o=_.useMemo(()=>{if(!s)return null;if(n){const d=s.screenshots.findIndex(u=>u.messageId===e);return d===-1?null:d}const i={};s.screenshots.forEach((d,u)=>{i[d.messageId]=u});const l=s.messages.findIndex(d=>d.id===e),c=s.messages.slice(l).find(d=>i[d.id]);return c?i[c.id]:null},[s,e,n]),a=s==null?void 0:s.messages.some(i=>{var l;return(l=i.metadata)==null?void 0:l.kaur1br5_mode});return n&&o===null||!s||!s.screenshots.length?null:r.jsx("div",{children:r.jsx("div",{className:"relative flex flex-1 cursor-default flex-col gap-2",children:r.jsx(Wye,{chunk:s,isKAUR1BR5:a})})})},qye=R(()=>P(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([145,1])),{loading:t=>F(t)});function Yye(t,e,n){const s=ne(),{selectedSources:o}=Pa(t),a=Jf(t);return _.useCallback(async()=>await a({promptMessage:is(s.formatMessage({id:"3qSZZF",defaultMessage:"I understand the risks. Please continue"}),w({user_acknowledges_pim:!0,system_hints:e},o&&{selected_sources:_i(o)})),completionMetadata:{systemHints:e,conversationMode:n},eventSource:"mouse"}),[a,n,e,s,o])}const Zye=({onMarkSafe:t,justification:e,clientThreadId:n,flaggedMessageId:s})=>{const[o,a]=_.useState(!1),i=ne(),l=_.useCallback(()=>a(!1),[]);return r.jsxs(r.Fragment,{children:[r.jsx(Mt,{testId:"modal-confirm-close-editor",isOpen:o,size:"custom",className:"max-w-xl",onClose:l,type:"warning",hideSeparator:!1,title:r.jsx("span",{className:"text-xl",children:r.jsx(j,{id:"lzy3Zg",defaultMessage:"Potentially Malicious Content Detected"})}),primaryButton:r.jsx(Ns.Button,{title:i.formatMessage({id:"E82qxN",defaultMessage:"Mark safe and continue"}),color:"danger",onClick:t}),secondaryButton:r.jsx(Ns.Button,{title:i.formatMessage({id:"byfawg",defaultMessage:"Don't mark safe"}),color:"secondary",onClick:l}),showCloseButton:!0,closeButton:r.jsx(xn,{onClick:l}),children:r.jsxs("div",{children:[r.jsx("div",{className:"text-md text-token-text-secondary pb-2",children:e?r.jsx(Bs,{children:e}):r.jsx(j,{id:"OkPb2T",defaultMessage:"This webpage contained hidden instructions that may be attempting to extract sensitive information. You should only continue if you're sure this content is safe."})}),!!s&&r.jsx(zye,{clientThreadId:n,messageId:s,renderClosestScreenshot:!0})]})}),r.jsx(ye,{color:"danger",onClick:()=>a(!0),children:r.jsx(j,{id:"5L93Tx",defaultMessage:"Continue"})})]})};function yKe({children:t,isFinalTurn:e,hasActiveRequest:n,conversationMode:s,clientThreadId:o,justification:a,flaggedMessageId:i}){const l=Ve(o,u=>{var f;return(f=he.findNode(u,m=>m.message.author.role===Ke.User))==null?void 0:f.message}),c=_.useMemo(()=>{var u;return(u=l==null?void 0:l.metadata)==null?void 0:u.system_hints},[l]),d=Yye(o,c,s);return r.jsxs("div",{children:[r.jsxs("div",{className:"bg-token-main-surface-secondary mt-1 flex gap-2 rounded-2xl px-3 py-2",children:[r.jsx(qye,{className:"icon-xl mt-2"}),r.jsx("div",{children:t})]}),e&&!n&&r.jsx("div",{className:"mt-2",children:r.jsx(Kye,{onMarkSafe:d,justification:a,flaggedMessageId:i,clientThreadId:o})})]})}function Kye({onMarkSafe:t,justification:e,clientThreadId:n,flaggedMessageId:s}){return r.jsx("div",{children:r.jsx(Zye,{onMarkSafe:t,justification:e,clientThreadId:n,flaggedMessageId:s})})}const vKe=()=>r.jsxs("div",{className:"text-message relative flex w-full flex-col items-end gap-2 text-start break-words whitespace-normal [.text-message+&]:mt-5",children:[r.jsx("div",{className:"text-token-text-tertiary px-5 text-sm",children:r.jsx(j,{id:"clarification.autoResponse",defaultMessage:"Auto response"})}),r.jsx("div",{className:"bg-token-message-surface relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-5 py-2.5",children:r.jsx(j,{id:"clarification.modelContinueMessage",defaultMessage:"Continue"})})]}),Qye=R(()=>P(()=>import("./odz5x4sqgrr6bek9.js"),__vite__mapDeps([309,1])),{loading:t=>F(t)}),bKe=()=>r.jsx("div",{className:"flex w-full justify-end px-5 py-4",children:r.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-1",children:[r.jsx(Qye,{className:"size-5"}),r.jsx(j,{id:"operator.takeover.indicator",defaultMessage:"You took control"})]})});function Jye(t,e,n){var a,i,l,c;if(!t)return n.current=null,null;if(!e)return(i=(a=n.current)==null?void 0:a.message)!=null?i:null;const s=n.current;if(s&&s.threadId===t)return s.message;const o=(c=(l=he.findFirstFromLeaf(e,d=>d.message.author.role===Ke.Tool&&d.message.author.name==="n7jupd.metadata"))==null?void 0:l.message)!=null?c:null;return o&&(n.current={threadId:t,message:o}),o}function pO(t){const e=_.useRef(null);return Ve(t,n=>Jye(t,n,e),{disablePerfDetector:!0})}function Xye(t){var n;const e=pO(t);return((n=e==null?void 0:e.metadata)==null?void 0:n.n7jupd_local_safe_mode)===!0}const hO=118;function CKe(t){var l,c,d,u,f,m;const e=mt(t),n=(l=he.getCurrentNode(e))==null?void 0:l.message;if(!n||!_O(n)||(c=n.clientMetadata)!=null&&c.autoProceedCancelled||(d=n.metadata)!=null&&d.auto_proceed_cancelled)return!1;const s=Date.now(),o=((u=n.create_time)!=null?u:Date.now()/1e3)*1e3,a=(m=(f=n.metadata)==null?void 0:f.auto_proceed_timeout_seconds)!=null?m:hO;return Math.max(0,Math.ceil(a-(s-o)/1e3))>0}function _O(t){var e;return!!((e=t.metadata)!=null&&e.n7jupd_message&&t.channel==="commentary"&&t.end_turn===!0)}async function SKe(t){const e=jt(t);if(e)return Ze(t,n=>{cn.updateTree(n,(s,o)=>{s.updateNodeMetadata(o,{autoProceedCancelled:!0})})}),await ge.safePost("/conversation/{conversation_id}/agent/cancel_auto_proceed",{parameters:{path:{conversation_id:e}}})}function e3e(t,e,n){const[s,o]=_.useState(()=>Date.now());_.useEffect(()=>{if(!n)return;const d=setInterval(()=>o(Date.now()),250);return()=>clearInterval(d)},[n]);const a=e-(s-t)/1e3,i=Math.max(0,a),l=Math.ceil(i),c=e===0?1:Math.min(1,Math.max(0,1-i/e));return{secondsDisplay:l,progress:c}}const t3e=({lastMessage:t,clientThreadId:e})=>{var g,p,h;const n=V(),s=xt(n,e),o=_.useRef(((g=t.create_time)!=null?g:Date.now()/1e3)*1e3),a=(h=(p=t.metadata)==null?void 0:p.auto_proceed_timeout_seconds)!=null?h:hO,{initialTimeLeft:i}=_.useMemo(()=>{const x=Date.now(),v=o.current,y=Math.ceil(a-(x-v)/1e3),b=(a-y)/a;return{initialTimeLeft:y,initialProgress:b}},[a]),[l,c]=_.useState(!1),{selectedSources:d}=Pa(s.id),{secondsDisplay:u,progress:f}=e3e(o.current,a,l||i>0);_.useEffect(()=>{if(i<=0){c(!0);return}const x=setTimeout(()=>c(!0),i*1e3);return()=>clearTimeout(x)},[i]);const m=async()=>{c(!0),await Zo({conversation:s,eventSource:"mouse",promptMessage:is("Continue",w({system_hints:[hs]},d&&{selected_sources:_i(d)})),parentMessageId:t.id,completionMetadata:{systemHints:[hs],conversationMode:{kind:wt.PrimaryAssistant}}})};return i<-30?null:r.jsx("div",{className:"my-2 flex",children:r.jsxs(ye,{onClick:m,disabled:l,className:"relative min-w-32 overflow-hidden px-2 transition-all",contentWrapperClassName:"gap-2",children:[r.jsx("span",{className:"flex items-center gap-1",children:l?r.jsx(j,{id:"clarification.loading",defaultMessage:"Proceeding..."}):r.jsx(j,{id:"clarification.modelContinueMessage",defaultMessage:"Continue"})}),!l&&r.jsx(n3e,{secondsDisplay:u,progress:f})]})})};function n3e({secondsDisplay:t,progress:e,size:n=22,strokeWidth:s=2}){const o=(n-s)/2,a=2*Math.PI*o,i=a*(1-e),l=ne();return r.jsxs("div",{"aria-label":l.formatMessage({id:"clarification.secondsRemaining",defaultMessage:"{seconds} seconds remaining"},{seconds:t.toString()}),className:"relative inline-flex items-center justify-center",style:{width:n,height:n},children:[r.jsxs("svg",{width:n,height:n,className:"block",children:[r.jsx("circle",{cx:n/2,cy:n/2,r:o,stroke:"currentColor",strokeOpacity:.3,strokeWidth:s,fill:"none"}),r.jsx("circle",{cx:n/2,cy:n/2,r:o,stroke:"currentColor",strokeWidth:s,fill:"none",strokeDasharray:a,strokeDashoffset:i,style:{transition:"stroke-dashoffset 100ms linear"},transform:"rotate(-90 ".concat(n/2," ").concat(n/2,")")})]}),r.jsx("span",{className:"absolute text-[9px] leading-none font-medium",style:{fontVariantNumeric:"tabular-nums"},children:t})]})}const s3e=R(()=>P(()=>import("./mjvpgsvmgis1oipr.js"),__vite__mapDeps([310,1])),{loading:t=>F(t)}),xO=R(()=>P(()=>import("./fx4tif7av4x5mmpn.js"),__vite__mapDeps([245,1])),{loading:t=>F(t)}),Qx=Se({heading:{id:"odyssey.openTabs.heading",defaultMessage:"Relevant tabs"},safeModeTooltip:{id:"odyssey.openTabs.safeModeTooltip",defaultMessage:"This tab is in logged out mode"}});function pw(t){"use forget";const e=W.c(19),{tabs:n,clientThreadId:s,className:o,onTabClick:a,detailed:i,isSafeMode:l}=t,c=l===void 0?!1:l,d=ne();let u;e[0]!==d||e[1]!==c?(u=c?d.formatMessage(Qx.safeModeTooltip):void 0,e[0]=d,e[1]=c,e[2]=u):u=e[2];const f=u;if(!n||n.length===0)return null;let m;e[3]!==o?(m=z("flex flex-col",o),e[3]=o,e[4]=m):m=e[4];let g;if(e[5]!==s||e[6]!==i||e[7]!==a||e[8]!==f||e[9]!==n){let h;e[11]!==s||e[12]!==i||e[13]!==a||e[14]!==f?(h=(x,v)=>{var y;return r.jsx("div",{className:z(v>0&&"border-token-border-subtle border-t"),children:r.jsx("button",{type:"button",onClick:()=>{a?a(x):r3e(x,s)},className:"hover:bg-token-bg-secondary focus-visible:ring-token-text-tertiary w-full cursor-pointer p-3 text-start transition-colors focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:outline-hidden",children:i?r.jsx(a3e,{tab:x,safeModeLabel:f}):r.jsx(o3e,{tab:x,safeModeLabel:f})})},(y=x.id)!=null?y:"".concat(x.url,"-").concat(v))},e[11]=s,e[12]=i,e[13]=a,e[14]=f,e[15]=h):h=e[15],g=n.map(h),e[5]=s,e[6]=i,e[7]=a,e[8]=f,e[9]=n,e[10]=g}else g=e[10];let p;return e[16]!==m||e[17]!==g?(p=r.jsx("div",{className:m,children:g}),e[16]=m,e[17]=g,e[18]=p):p=e[18],p}const o3e=t=>{"use forget";var v,y,b;const e=W.c(25),{tab:n,safeModeLabel:s}=t;let o;e[0]!==n.url?(o=Gd(n.url),e[0]=n.url,e[1]=o):o=e[1];const a=o,i=(v=a==null?void 0:a.Icon)!=null?v:null;let l;e[2]!==n.title||e[3]!==n.url?(l=((y=n.title)==null?void 0:y.trim())||Fp(n.url),e[2]=n.title,e[3]=n.url,e[4]=l):l=e[4];const c=l;let d;e[5]!==(a==null?void 0:a.type)||e[6]!==n.url?(d=(b=a==null?void 0:a.type)!=null?b:Fp(n.url),e[5]=a==null?void 0:a.type,e[6]=n.url,e[7]=d):d=e[7];const u=d;let f;e[8]!==i||e[9]!==(a==null?void 0:a.type)||e[10]!==n.url?(f=i?r.jsx(i,{className:"icon-md",alt:a==null?void 0:a.type}):r.jsx(ks,{url:n.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:r.jsx(xO,{className:"size-5"})}),e[8]=i,e[9]=a==null?void 0:a.type,e[10]=n.url,e[11]=f):f=e[11];let m;e[12]!==c?(m=r.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=m):m=e[13];let g;e[14]!==u?(g=r.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:u}),e[14]=u,e[15]=g):g=e[15];let p;e[16]!==m||e[17]!==g?(p=r.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[m,g]}),e[16]=m,e[17]=g,e[18]=p):p=e[18];let h;e[19]!==s?(h=s?r.jsx(yO,{label:s}):null,e[19]=s,e[20]=h):h=e[20];let x;return e[21]!==f||e[22]!==p||e[23]!==h?(x=r.jsxs("div",{className:"flex items-center gap-3",children:[f,p,h]}),e[21]=f,e[22]=p,e[23]=h,e[24]=x):x=e[24],x},a3e=t=>{"use forget";var v,y,b;const e=W.c(25),{tab:n,safeModeLabel:s}=t;let o;e[0]!==n.url?(o=Gd(n.url),e[0]=n.url,e[1]=o):o=e[1];const a=o,i=(v=a==null?void 0:a.Icon)!=null?v:null;let l;e[2]!==n.title||e[3]!==n.url?(l=((y=n.title)==null?void 0:y.trim())||Fp(n.url),e[2]=n.title,e[3]=n.url,e[4]=l):l=e[4];const c=l;let d;e[5]!==(a==null?void 0:a.type)||e[6]!==n.url?(d=(b=a==null?void 0:a.type)!=null?b:Fp(n.url),e[5]=a==null?void 0:a.type,e[6]=n.url,e[7]=d):d=e[7];const u=d;let f;e[8]!==i||e[9]!==(a==null?void 0:a.type)||e[10]!==n.url?(f=i?r.jsx(i,{className:"icon-md",alt:a==null?void 0:a.type}):r.jsx(ks,{url:n.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:r.jsx(xO,{className:"size-5"})}),e[8]=i,e[9]=a==null?void 0:a.type,e[10]=n.url,e[11]=f):f=e[11];let m;e[12]!==c?(m=r.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=m):m=e[13];let g;e[14]!==u?(g=r.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:u}),e[14]=u,e[15]=g):g=e[15];let p;e[16]!==m||e[17]!==g?(p=r.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[m,g]}),e[16]=m,e[17]=g,e[18]=p):p=e[18];let h;e[19]!==s?(h=s?r.jsx(yO,{label:s}):null,e[19]=s,e[20]=h):h=e[20];let x;return e[21]!==f||e[22]!==p||e[23]!==h?(x=r.jsxs("div",{className:"flex items-center gap-3 px-3",children:[f,p,h]}),e[21]=f,e[22]=p,e[23]=h,e[24]=x):x=e[24],x},yO=t=>{"use forget";const e=W.c(6),{label:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(s3e,{className:"icon-sm","aria-hidden":"true"}),e[0]=s):s=e[0];let o;e[1]!==n?(o=r.jsx("span",{className:"text-token-text-tertiary inline-flex items-center justify-center",role:"img","aria-label":n,children:s}),e[1]=n,e[2]=o):o=e[2];let a;return e[3]!==n||e[4]!==o?(a=r.jsx(pt,{label:n,side:"top",className:"ms-auto inline-flex items-center justify-center",children:o}),e[3]=n,e[4]=o,e[5]=a):a=e[5],a};function r3e(t,e){if(t!=null&&t.url){try{const n=jt(e);if(n){const s=Md();s==null||s.openAgentTabs(n,[t.url]);return}}catch(n){Qs.error("openTabs via host failed",{error:n})}try{const n=window.open(t.url,"_blank","noopener,noreferrer");n==null||n.focus()}catch(n){Qs.error("openTabs fallback failed",{error:n})}}}function Fp(t){try{return new URL(t).hostname.replace(/^www\./,"")}catch(e){return t}}const i3e=R(()=>P(()=>import("./d566xs5du6vv7b80.js"),__vite__mapDeps([311,1,10,11])).then(t=>t.OdysseyTakeoverNuxModal)),l3e=()=>{"use no forget";const t=V(),e=lt(Oe.hasSeenOdysseyTakeoverModal),{clientThreadId:n}=$n(),s=Ve(n!=null?n:void 0,l=>he.findNode(l,c=>c.message.author.name==="n7jupd.metadata"));if(!n)return()=>{Qs.info("VNC modal opened without a client thread id")};const o=async l=>{const c=jt(l);if(c)return await ge.safePost("/conversation/{conversation_id}/agent/resume",{parameters:{path:{conversation_id:c}}})},a=()=>{var c,d;if(!hn()||!((c=s==null?void 0:s.message.metadata)!=null&&c.kaur1br5_mode))return Promise.resolve(!1);const l=jt(n);if(!l)return Qs.info("Agent viewer opened without a server thread id"),Promise.resolve(!1);try{const u=Md(),f=(d=u==null?void 0:u.tryOpenAgentViewer(l))!=null?d:!1;return Promise.resolve(f)}catch(u){return Qs.error("Failed to open local agent viewer - error thrown"),Promise.resolve(!1)}},i=async()=>{var c;if(await a()){Qs.info("Opened VNC modal with local agent viewer");return}$n.setState({isResuming:!0}),$n.setState({isOpen:!0}),Ln.setSidebarOpen(!1);let l;Fe.addAction("agent.conversation.resume_rpc_attempted",{client_thread_id:n});try{l=await o(n),l?Fe.addAction("agent.conversation.resume_rpc_succeeded",{client_thread_id:n,vm_id:(c=l.vm_id)!=null?c:""}):Fe.addAction("agent.conversation.resume_rpc_failed",{client_thread_id:n,reason:"no_response"})}catch(d){Fe.addAction("agent.conversation.resume_rpc_failed",{client_thread_id:n,reason:"exception",error:d})}$n.setState({isResuming:!1,vmId:l==null?void 0:l.vm_id}),vO({})};return async()=>{if(e.eligible){dt(t,i3e,{onConfirm:async()=>{ot(t,Oe.hasSeenOdysseyTakeoverModal),await i()}});return}await i()}},c3e=async(t,e,{startNewTurn:n})=>{$n.setState({isOpen:!1}),await bO(t,e,{startNewTurn:n})},vO=async({showPlaceholderMessage:t=!1})=>{var s;$n.setState({isTakeoverInProgress:!0});const{clientThreadId:e}=$n.getState();if(!e){Qs.info("VNC takeover started without a client thread id");return}t&&zX(e);const n=await d3e();$n.setState({parentMessageId:(s=n==null?void 0:n.last_message_id)!=null?s:null})},bO=async(t,e,{startNewTurn:n,skipTakeoverAfterAbort:s=void 0},o)=>{$n.setState({isTakeoverInProgress:!1});const{clientThreadId:a}=$n.getState();if(!a){Qs.info("VNC modal closed without a client thread id");return}if(!n)return;const i=u3e(),{abortPromise:l}=$n.getState();l&&s&&(await l,await s())||(YA(a),await Zo({conversation:xt(t,a),eventSource:"mouse",promptMessage:Uv(e,o),parentMessageIdPromise:i,completionMetadata:{systemHints:[hs],conversationMode:{kind:wt.PrimaryAssistant}}}))},d3e=()=>{const{clientThreadId:t}=$n.getState();if(!t)return Qs.info("stopAgent called without a client thread id"),Promise.resolve(void 0);const e=Hh(t,void 0,{clientInitiated:!0,reason:"takeover",isLastTurnAgent:!0}).then(n=>n).finally(()=>{$n.setState({abortPromise:null})});return $n.setState({abortPromise:e}),e},u3e=(t=5e3)=>new Promise(e=>{const{parentMessageId:n}=$n.getState();if(n)return e(n);const s=setTimeout(()=>{o(),e(void 0)},t),o=$n.subscribe(a=>{a.parentMessageId&&(e(a.parentMessageId),clearTimeout(s),o())})}),f3e=()=>{"use forget";const t=W.c(5),e=l3e();let n;t[0]!==e?(n=l=>({token:l.token,clientThreadId:l.clientThreadId,isOpen:l.isOpen,isTakeoverInProgress:l.isTakeoverInProgress,isResuming:l.isResuming,vmId:l.vmId,open:e,close:c3e}),t[0]=e,t[1]=n):n=t[1];const s=$n(n),a=!Vh();let i;return t[2]!==a||t[3]!==s?(i=U(w({},s),{isVNCEnabled:a}),t[2]=a,t[3]=s,t[4]=i):i=t[4],i},m3e=R(()=>P(()=>import("./lcnxs0h9184gwafk.js"),__vite__mapDeps([312,1])),{loading:t=>F(t)}),wKe=t=>{"use forget";var S,E,k,T;const e=W.c(33),{currentGroupedMessage:n,isLastMessage:s,isLastTurnInConversation:o,conversation:a,turnIndex:i,lastAgentMetadataNode:l}=t,c=!!((S=l==null?void 0:l.metadata)!=null&&S.kaur1br5_mode);let d,u;e[0]!==(n==null?void 0:n.messages)||e[1]!==o?(d=bo(n==null?void 0:n.messages),u=o&&d&&_O(d)&&!((E=d.metadata)!=null&&E.auto_proceed_cancelled)&&!((k=d.clientMetadata)!=null&&k.autoProceedCancelled),e[0]=n==null?void 0:n.messages,e[1]=o,e[2]=d,e[3]=u):(d=e[2],u=e[3]);const f=u;let m;e:{if(!((T=d==null?void 0:d.metadata)!=null&&T.open_tabs)){let A;e[4]===Symbol.for("react.memo_cache_sentinel")?(A=[],e[4]=A):A=e[4],m=A;break e}let M;e[5]!==d.metadata.open_tabs?(M=d.metadata.open_tabs.filter(_3e),e[5]=d.metadata.open_tabs,e[6]=M):M=e[6],m=M}let g;e[7]!==m?(g=m.filter(x3e),e[7]=m,e[8]=g):g=e[8];const p=g,h=p.length>0&&c;let x;e[9]!==a||e[10]!==d||e[11]!==p||e[12]!==h?(x=h&&(d==null?void 0:d.id)&&r.jsx(g3e,{openTabList:p,clientThreadId:a.id,messageId:d.id}),e[9]=a,e[10]=d,e[11]=p,e[12]=h,e[13]=x):x=e[13];let v;e[14]!==a||e[15]!==d||e[16]!==f||e[17]!==i?(v=f&&r.jsx(t3e,{clientThreadId:a.id,lastMessage:d,turnIndex:i}),e[14]=a,e[15]=d,e[16]=f,e[17]=i,e[18]=v):v=e[18];let y;e[19]!==s||e[20]!==o?(y=o&&s&&r.jsx(Mb,{children:y3e}),e[19]=s,e[20]=o,e[21]=y):y=e[21];let b;e[22]!==a||e[23]!==n||e[24]!==c||e[25]!==s||e[26]!==o?(b=r.jsx(p3e,{conversation:a,currentGroupedMessage:n,isLastMessage:s,isLastTurnInConversation:o,isKAUR1BR5:c}),e[22]=a,e[23]=n,e[24]=c,e[25]=s,e[26]=o,e[27]=b):b=e[27];let C;return e[28]!==x||e[29]!==v||e[30]!==y||e[31]!==b?(C=r.jsxs("div",{className:"my-2 flex flex-col",children:[x,v,y,b]}),e[28]=x,e[29]=v,e[30]=y,e[31]=b,e[32]=C):C=e[32],C};function g3e(t){"use forget";const e=W.c(30),{openTabList:n,clientThreadId:s,messageId:o}=t,[a,i]=_.useState(!1),{openThreadSidebar:l}=Mr(),c=An(mn),d=Xye(s);let u;e[0]!==n?(u=n.slice(0,3),e[0]=n,e[1]=u):u=e[1];const f=u,m=n.length>1&&n.length!==f.length;let g;e[2]!==c||e[3]!==o||e[4]!==n||e[5]!==l?(g=()=>{if(c){i(!0);return}l({type:"n7jupdTabs",messageId:o,tabs:n})},e[2]=c,e[3]=o,e[4]=n,e[5]=l,e[6]=g):g=e[6];const p=g;let h;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("div",{className:"flex items-center py-0.5",children:r.jsx(j,w({},Qx.heading))}),e[7]=h):h=e[7];let x;e[8]!==p||e[9]!==n.length||e[10]!==m?(x=m&&r.jsxs(ye,{onClick:p,color:"ghost",className:"text-token-text-secondary rounded-lg font-normal",contentWrapperClassName:"gap-1",children:[r.jsx(j,{id:"BrbWdy",defaultMessage:"View {count} tabs",values:{count:n.length}}),r.jsx(m3e,{className:"icon-sm"})]}),e[8]=p,e[9]=n.length,e[10]=m,e[11]=x):x=e[11];let v;e[12]!==x?(v=r.jsxs("div",{className:"text-token-text-primary flex items-center justify-between px-3 py-2 text-sm font-medium",children:[h,x]}),e[12]=x,e[13]=v):v=e[13];let y;e[14]!==s||e[15]!==d||e[16]!==f?(y=r.jsx(pw,{tabs:f,clientThreadId:s,className:"border-token-border-subtle flex flex-col border-t",isSafeMode:d}),e[14]=s,e[15]=d,e[16]=f,e[17]=y):y=e[17];let b;e[18]!==v||e[19]!==y?(b=r.jsxs("div",{className:"border-token-border-subtle bg-token-bg-secondary/30 text-token-text-primary w-full max-w-[360px] overflow-hidden rounded-2xl border",children:[v,y]}),e[18]=v,e[19]=y,e[20]=b):b=e[20];let C;e[21]!==s||e[22]!==c||e[23]!==a||e[24]!==d||e[25]!==n?(C=c&&r.jsx(Mt,{headerClassName:"ps-6! pe-5!",isOpen:a,showCloseButton:!0,onClose:()=>i(!1),testId:"modal-odyssey-open-tabs",title:r.jsx("div",{className:"flex w-full items-center text-[15px] font-medium",children:r.jsx(j,w({},Qx.heading))}),noPadding:!0,children:r.jsx(pw,{tabs:n,clientThreadId:s,className:"border-token-border-subtle flex flex-col border-t",isSafeMode:d,detailed:!0})}),e[21]=s,e[22]=c,e[23]=a,e[24]=d,e[25]=n,e[26]=C):C=e[26];let S;return e[27]!==b||e[28]!==C?(S=r.jsxs(r.Fragment,{children:[b,C]}),e[27]=b,e[28]=C,e[29]=S):S=e[29],S}const p3e=t=>{"use forget";var T;const e=W.c(16),{conversation:n,currentGroupedMessage:s,isLastMessage:o,isLastTurnInConversation:a,isKAUR1BR5:i}=t,{formatMessage:l}=ne(),{open:c,isVNCEnabled:d}=f3e(),{selectedSources:u}=Pa(n.id),f=V(),m=ve(f,"733205176");let g;e:{if(!d){g=null;break e}if(!m){g=null;break e}if(!o||!a){g=null;break e}if(s.type!==ar.Text){g=null;break e}g=s.messages[0]}const p=g;if(!p)return null;const h=(T=p.metadata)==null?void 0:T.n7jupd_button_type;if(!h||h==="confirmation"||(h==="takeover"||h==="login")&&i)return null;let x;e[0]!==n||e[1]!==p.id||e[2]!==u?(x=async()=>{await Zo({conversation:n,eventSource:"mouse",promptMessage:is("Yes, please proceed",w({system_hints:[hs]},u&&{selected_sources:_i(u)})),parentMessageId:p.id,completionMetadata:{systemHints:[hs],conversationMode:{kind:wt.PrimaryAssistant}}})},e[0]=n,e[1]=p.id,e[2]=u,e[3]=x):x=e[3];const v=x;let y;e[4]!==c||e[5]!==v?(y=M=>{switch(M){case"takeover":return c();case"login":return c();case"confirmation":return v()}},e[4]=c,e[5]=v,e[6]=y):y=e[6];const b=y;let C;e[7]!==b||e[8]!==h?(C=()=>b(h),e[7]=b,e[8]=h,e[9]=C):C=e[9];const S=h3e[h];let E;e[10]!==l||e[11]!==S?(E=l(S),e[10]=l,e[11]=S,e[12]=E):E=e[12];let k;return e[13]!==C||e[14]!==E?(k=r.jsx("div",{className:"my-2 flex",children:r.jsx(ye,{onClick:C,children:E})}),e[13]=C,e[14]=E,e[15]=k):k=e[15],k},h3e=Se({takeover:{id:"odyssey-message-indicator.takeover",defaultMessage:"Take over"},login:{id:"odyssey-message-indicator.login",defaultMessage:"Log in"},confirmation:{id:"odyssey-message-indicator.confirm",defaultMessage:"Confirm"}});function _3e(t){return t.url==="about:blank"?!1:!(t.url==="https://openai.com/"&&!t.selected)}function x3e(t){var n;const e=(n=t.url)==null?void 0:n.trim().toLowerCase();return e&&e!=="about:blank"&&e!==""}function y3e(t){const{isScheduled:e,isScheduledRun:n}=t;return e&&!n&&r.jsx(Uce,{})}function v3e(s){var o=s,{onChange:t,target:e}=o,n=we(o,["onChange","target"]);if(!e)return;const a=w({childList:!0,subtree:!0},n),i=new MutationObserver(c=>{t(c)});function l(){try{i.disconnect()}catch(c){}}return i.observe(e,a),l}const b3e=()=>{};function C3e(t){return _.useCallback(e=>t?e(console.log.bind(console)):b3e,[t])}const S3e=".markdown:is(.streaming-animation,.result-streaming)",kKe=_.memo(function(e){const{debug:n,isStreaming:s}=e,o=_.useRef(-1),a=C3e(n),i=_.useRef(null),[l,c]=_.useState([]),d=_.useCallback(m=>{const g=m.dataset.start,p=m.tagName.toLowerCase(),h="--streaming-".concat(p,"-").concat(g),v={height:0,ready:!1,selector:"".concat(p,'[data-start="').concat(g,'"]'),target:m,variableName:h},y=Hl({axis:"height",target:m,onChange({height:b}){var T;const C=m.dataset.end,S=m.dataset.isLastNode==="",E=["table","pre"].includes(p)&&S;if(a(M=>M("".concat(p,"-").concat(g),{observedElement:v,height:b,canLookAhead:E,isLastNode:S})),!v.ready){const M=E&&w3e(g,C,15),A=b>0;(M||A)&&(v.ready=!0,o.current=T3e(C))}const k=typeof v.height=="number"&&b<v.height;v.ready&&!k&&(v.height=b,(T=i.current)==null||T.style.setProperty(h,"".concat(b,"px")))}});v.unsubscribe=y,c(b=>[...b,v])},[a]),u=_.useCallback(m=>v3e({onChange(g){const{added:p}=E3e(g);for(const h of p)d(h)},target:m,subtree:!0,childList:!0}),[d]);_.useEffect(()=>{if(!s)return;let m;function g(h){i.current=h,m=u(h)}function p(h){const x=document.querySelector(S3e);x?h(x):requestAnimationFrame(()=>{p(h)})}return p(g),()=>{window.setTimeout(()=>{if(n){a(h=>h("Animations complete, preserving state in debug mode."));return}m==null||m(),c([]),o.current=-1},500)}},[s,n,u,a]);const f=l.map(({selector:m,variableName:g})=>"".concat(m," { --streaming-reveal-amount: var(").concat(g,", 0) }")).join("\n");return r.jsx("style",{children:f})});function w3e(t,e,n){if(t===void 0||e===void 0)return!0;const s=parseInt(t,10),o=parseInt(e,10);return isNaN(s)||isNaN(o)?!0:o-s>=n}function k3e(t){return t instanceof HTMLElement?["PRE","TABLE"].includes(t.tagName):!1}function E3e(t){return{added:t.flatMap(n=>Array.from(n.addedNodes)).filter(k3e)}}function T3e(t){return t?parseInt(t,10):-1}function M3e(t){"use forget";const e=W.c(7),[n,s]=_.useState(null),o=It();let a,i;e[0]!==t.assetPointer||e[1]!==t.serverThreadId||e[2]!==o?(a=()=>{t.assetPointer&&qd.fetch(o,{asset:t.assetPointer,conversationId:t.serverThreadId}).then(c=>{s(c.url)})},i=[o,t.assetPointer,t.serverThreadId],e[0]=t.assetPointer,e[1]=t.serverThreadId,e[2]=o,e[3]=a,e[4]=i):(a=e[3],i=e[4]),_.useEffect(a,i);let l;return e[5]!==n?(l=n?r.jsx("video",{controls:!0,src:n,className:"w-full"}):null,e[5]=n,e[6]=l):l=e[6],l}function EKe(t){"use forget";var f,m;const e=W.c(5),{message:n,isUserTurn:s,clientThreadId:o}=t,a=QX(n),i=Kn(o);if(a.length===0||!s)return null;const l=(m=(f=a[0].metadata)==null?void 0:f.transcription)==null?void 0:m.text,c=z("mt-2 text-sm italic",{"opacity-65":l,"opacity-30":!l});let d;e[0]!==l?(d=l!=null?l:r.jsx(j,w({},A3e.transcriptUnavailable)),e[0]=l,e[1]=d):d=e[1];let u;return e[2]!==c||e[3]!==d?(u=r.jsx("div",{className:c,children:d}),e[2]=c,e[3]=d,e[4]=u):u=e[4],r.jsxs("div",{className:"flex max-w-[400px] flex-col justify-end self-end",children:[r.jsx(M3e,{assetPointer:a[0],serverThreadId:i}),u]})}const A3e=Se({transcriptUnavailable:{id:"textMessage.transcriptUnavailable",defaultMessage:"Transcript Unavailable"}});function I3e(t){const e=Math.floor(t/60),n=Math.floor(e/60),s=String(Math.floor(t)%60).padStart(2,"0"),o=String(e%60).padStart(2,"0");return n===0?"".concat(o,":").concat(s):"".concat(n,":").concat(o,":").concat(s)}const j3e=R(()=>P(()=>import("./vu8erv8e9w00mpyg.js"),__vite__mapDeps([313,1])),{loading:t=>F(t)}),N3e=R(()=>P(()=>Promise.resolve().then(()=>pTe),void 0),{loading:t=>F(t)});function P3e(t){var n;const e=(n=t==null?void 0:t.audio_asset_pointer)==null?void 0:n.metadata;if((e==null?void 0:e.start)!==void 0&&(e==null?void 0:e.end)!==void 0)return e.end-e.start}const TKe=_.memo(function(e){const n=ne(),{content:s,metadata:o}=e.message;if(!(s.content_type==="multimodal_text"&&e.isUserTurn))return;const i=s.parts.filter(mr.isPartRealTimeUserAudioVideoAssetPointer).find(c=>c.audio_asset_pointer),l=P3e(i);return r.jsxs("div",{className:"text-token-text-secondary my-2 me-4 flex flex-row justify-end gap-1 text-xs",children:[(o==null?void 0:o.real_time_audio_has_video)&&r.jsx(j3e,{"aria-label":n.formatMessage({id:"/nS9Zn",defaultMessage:"Recorded with video or screenshare"}),className:"icon-sm"}),i&&r.jsx(N3e,{"aria-label":n.formatMessage({id:"eP1JEa",defaultMessage:"Recorded with voice"}),className:"icon-sm"}),l!==void 0&&r.jsx("span",{className:"font-semibold",children:I3e(l)})]})});function N1(){"use forget";var d,u,f,m,g,p,h;const t=W.c(8),{data:e}=_h(),n=CO(),s=(d=e==null?void 0:e.settings)==null?void 0:d[Lt.VoiceName];let o;t[0]!==n||t[1]!==s?(o=wO(s,n),t[0]=n,t[1]=s,t[2]=o):o=t[2];const a=(f=(u=e==null?void 0:e.settings)==null?void 0:u[Lt.VoiceMainLanguage])!=null?f:Cu.Auto,i=!!((m=e==null?void 0:e.settings)!=null&&m[Lt.TrainingAllowed]&&((g=e==null?void 0:e.settings)!=null&&g[Lt.VoiceTrainingAllowed])),l=!!((p=e==null?void 0:e.settings)!=null&&p[Lt.TrainingAllowed]&&((h=e==null?void 0:e.settings)!=null&&h[Lt.VideoTrainingAllowed]));let c;return t[3]!==o||t[4]!==a||t[5]!==i||t[6]!==l?(c={voiceName:o,voiceMainLanguage:a,voiceTrainingAllowed:i,videoTrainingAllowed:l},t[3]=o,t[4]=a,t[5]=i,t[6]=l,t[7]=c):c=t[7],c}function CO(){const t=SO(),e=D3().locale;return _.useCallback(()=>{if(t.length===0)return"juniper";let n=t[0].voice;return e.startsWith("zh")&&(n="cove"),n},[t,e])}function SO(){var n;const t=(n=eo(Lt.VoiceMainLanguage))==null?void 0:n.data,{data:e}=rt({queryKey:["getUserSettingVoices",t],queryFn:()=>ge.safeGet("/settings/voices",{authOption:sn.SendIfAvailable})});return e?e.voices:[]}function wO(t,e){return t==="sky"?"juniper":t!=null?t:e()}function u5(){if(typeof window<"u"&&"MediaSource"in window){const t=e=>RG(e)&&MediaSource.isTypeSupported(e);if(t("audio/aac"))return"aac";if(t("audio/mpeg"))return"mp3";if(t("audio/ogg"))return"opus"}}function Bp(t){if(t.buffer instanceof ArrayBuffer)return t;const e=new Uint8Array(t.byteLength);return e.set(t),e}function R3e({conversationId:t,messageId:e}){const{voiceName:n}=N1(),s=()=>ge.safeGet("/synthesize",{parameters:{query:{message_id:e,conversation_id:t,voice:n,format:u5()}},skipJsonTransform:!0}),o="".concat(t,".").concat(e,".").concat(n);return L3e(s,o)}function L3e(t,e){var g;const[n,s]=_.useState(!1),o=_.useRef({isMediaSourceAvailable:f5(),mediaSourceFormat:(g=u5())!=null?g:"n/a",playPromise:null,shouldAbortQueuedPlayback:!1}).current,a=ne(),i=$t(),l=F3(),c=B3(p=>{var h;return p.isPlaying&&p.sourceUrl===((h=lo.get(e))==null?void 0:h.src)}),d=_.useCallback(async()=>{if(!l||!t)return;s(!0);const p={isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat};try{const h=await O3e({key:e,onStreamingError:x=>{Ut.readAloud.error(x,p),s(!1),i.danger(a.formatMessage(dg.playbackError,{error:x.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:dg.playbackError.defaultMessage,loggingDescription:x.message})},onStreamingStart:()=>{s(!1)},fetchAudioDataResponse:t});if(o.shouldAbortQueuedPlayback){o.shouldAbortQueuedPlayback=!1;return}l.changeSource(h),o.playPromise=l.play()}catch(h){Ut.readAloud.error(h,p),s(!1),i.danger(a.formatMessage(dg.playbackError,{error:h.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:dg.playbackError.defaultMessage,loggingDescription:h.message})}},[l,o,e,i,a,t]),u=_.useCallback(()=>{const p=J2();p&&(o.playPromise?o.playPromise.then(()=>{p.stop(),o.playPromise=null}):p.stop())},[o]),f=_.useCallback(()=>{var h;const p=J2();p&&(p.state.isPlaying&&p.state.sourceUrl===((h=lo.get(e))==null?void 0:h.src)?u():(Ut.readAloud.click({isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat}),d()))},[e,o,d,u]);_.useEffect(()=>{n&&c&&s(!1)},[n,c]);const m=_.useRef(e);return _.useEffect(()=>{m.current=e}),_.useEffect(()=>(o.shouldAbortQueuedPlayback=!1,()=>{var x;const p=b8();p.isPlaying&&p.sourceUrl===((x=lo.get(m.current))==null?void 0:x.src)?u():o.shouldAbortQueuedPlayback=!0}),[o,u]),{togglePlayback:f,isPlaying:c,isLoading:n}}async function kO(t){var s;const e=await t(),n=(s=e.headers.get("content-type"))!=null?s:"audio/aac";return{response:e,format:n}}async function O3e(t){return f5()?F3e(t):D3e(t)}async function D3e({key:t,fetchAudioDataResponse:e}){const n=lo.get(t);if(n!=null&&n.blob)return n.src;const{response:s,format:o}=await kO(e),a=await s.arrayBuffer(),i=new Blob([a],{type:o}),l=EO({key:t,src:URL.createObjectURL(i),format:o,blob:i});return lo.set(t,l),l.src}async function F3e({key:t,onStreamingError:e,onStreamingStart:n,fetchAudioDataResponse:s}){let o=lo.get(t);o!=null&&o.streaming&&(lo.delete(t),o=null);let a,i;const l=U3e(),c=new l;if(o)a=o,a.src=URL.createObjectURL(c);else{const{format:f,response:m}=await kO(s);i=m,a=EO({key:t,src:URL.createObjectURL(c),format:f})}const d=B3e(a.id),u={sourceopen:async()=>{var g,p;d("sourceopen");const f=c.addSourceBuffer(a.format),m=async()=>{f.updating&&await new Promise(h=>f.addEventListener("updateend",h,{once:!0}))};if(a.segments.length&&!a.streaming){d("streaming from cache"),a.streaming=!0,n();for(const h of a.segments)f.appendBuffer(Bp(h)),await m();c.readyState==="open"&&c.endOfStream(),a.streaming=!1,d("done streaming from cache");return}if(i){d("fetching audio");try{const h=(g=i.body)==null?void 0:g.getReader();if(!h)return;for(;((p=lo.get(t))==null?void 0:p.id)===a.id;){const{done:x,value:v}=await h.read();if(x){d("done streaming"),a.streaming=!1,c.readyState==="open"&&c.endOfStream();break}if(!v)continue;if(!Array.from(c.sourceBuffers).includes(f)){d("stop streaming, source buffer removed"),a.streaming=!1;break}a.streaming||(d("start streaming"),a.streaming=!0,n());const y=Bp(v);f.appendBuffer(y),a.segments.push(y),await m()}}catch(h){if(d("error while streaming",h),a.streaming=!1,c.readyState==="open")try{c.endOfStream("network")}catch(x){Ut.readAloud.error(x)}lo.delete(t),e(h)}}},sourceclose:()=>{var f;d("sourceclose"),a.streaming&&(a.streaming=!1,((f=lo.get(t))==null?void 0:f.id)===a.id&&(d("sourceclosed while streaming, cleaning up cache"),lo.delete(t)))},sourceended:as};for(const[f,m]of Object.entries(u))c.addEventListener(f,()=>{try{return m()}catch(g){Ut.readAloud.error(g)}});return lo.set(t,a),a.src}const dg=Se({playbackError:{id:"useVoiceReadAloudAudio.playbackError",defaultMessage:"Failed to play message"}}),B3e=t=>as;function U3e(){return f5()?window.MediaSource:null}function f5(){return!!u5()}const EO=t=>w({id:os(),segments:[],streaming:!1},t),lo=new $2e({capacity:50,dispose:t=>{URL.revokeObjectURL(t.src)}});R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)});R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)});const hm=Ft(t=>({targetedContent:void 0,setTargetedContent:e=>{t({targetedContent:e})}})),$3e=t=>{"use forget";const e=W.c(3),n=_.useRef(void 0);let s,o;return e[0]!==t?(s=()=>{n.current=t},o=[t],e[0]=t,e[1]=s,e[2]=o):(s=e[1],o=e[2]),_.useEffect(s,o),n};function hw(){return" "}const V3e=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M11.6663 12.6686L11.801 12.6823C12.1038 12.7445 12.3313 13.0125 12.3313 13.3337C12.3311 13.6547 12.1038 13.9229 11.801 13.985L11.6663 13.9987H3.33325C2.96609 13.9987 2.66839 13.7008 2.66821 13.3337C2.66821 12.9664 2.96598 12.6686 3.33325 12.6686H11.6663ZM16.6663 6.00163L16.801 6.0153C17.1038 6.07747 17.3313 6.34546 17.3313 6.66667C17.3313 6.98788 17.1038 7.25586 16.801 7.31803L16.6663 7.33171H3.33325C2.96598 7.33171 2.66821 7.03394 2.66821 6.66667C2.66821 6.2994 2.96598 6.00163 3.33325 6.00163H16.6663Z"})),MKe=Object.freeze(Object.defineProperty({__proto__:null,default:V3e},Symbol.toStringTag,{value:"Module"})),TO=R(()=>P(()=>import("./ntqtotz628w3drq3.js"),__vite__mapDeps([314,1,10,11,315,223,224,225,117,226,106,316,317,0])).then(t=>t.AdminInviteModal)),H3e=Object.freeze(Object.defineProperty({__proto__:null,AdminInviteModal:TO},Symbol.toStringTag,{value:"Module"})),MO="DEFAULT",G3e=on(()=>Be(MO)),ns={recentPulse:["recent-pulse"],pulseCard:t=>["pulse-card",t],pulseEntrypoint:["pulse-entrypoint"]};function AO(t,e){t.setQueryData(ns.pulseCard(e.id),e)}function AKe(t,e,n){t.setQueryData(ns.pulseCard(e),s=>U(w({},s),{conversation_id:n})),t.setQueryData(ns.recentPulse,s=>{const o=s.items.map(a=>Hf(a)&&a.id===e?U(w({},a),{conversation_id:n}):a);return U(w({},s),{items:o})})}const m5=t=>Object.keys(t).length===0,W3e=LG((t,e)=>Sa(t,()=>Xn({queryKey:["pulse-feed",e],queryFn:async()=>{const n=await ge.safeGet("/feed/mixed/{feed_variant_id}",{parameters:{path:{feed_variant_id:e}}});return m5(n)?null:(n.items.filter(Hf).forEach(s=>{AO(Qo(t),s)}),n)}}),{enabled$:()=>Zh(t)})),IO=on(t=>Sa(t,()=>Xn({queryKey:ns.recentPulse,queryFn:async()=>{const e=await ge.safeGet("/feed/mixed");return m5(e)?null:(e.items.filter(Hf).forEach(n=>{AO(Qo(t),n)}),e)}}),{enabled$:()=>Zh(t)})),z3e=t=>{IO.prefetch(t)},_m=on(t=>St(()=>{const e=G3e(t);return e&&e!==MO?W3e(t,e):IO(t)})),g5=on(t=>Sa(t,()=>Xn({queryKey:ns.pulseEntrypoint,queryFn:async()=>{const e=await ge.safeGet("/feed/entrypoint");return m5(e)?null:e}}),{enabled$:()=>EQ(t)})),IKe=on(t=>St(()=>{var e,n;return(n=(e=_m(t).data)==null?void 0:e.feedback)==null?void 0:n.feedback_conversation_id})),jKe=Hn(t=>OG(t,{mutationFn:async()=>await ge.safePost("/feed/feedback/conversation/delete"),onSuccess:()=>{Qo(t).invalidateQueries({queryKey:ns.recentPulse})}})),jO=t=>{"use forget";const e=W.c(11),n=V();let s;e[0]!==t?(s=ns.pulseCard(t),e[0]=t,e[1]=s):s=e[1];let o;e[2]!==t?(o=async()=>{if(!t)throw new Error("Card ID is required");return await ge.safeGet("/feed/card/{card_id}",{parameters:{path:{card_id:t}}})},e[2]=t,e[3]=o):o=e[3];let a;e[4]!==t||e[5]!==n?(a=Mv(n)&&!!t,e[4]=t,e[5]=n,e[6]=a):a=e[6];let i;return e[7]!==s||e[8]!==o||e[9]!==a?(i={queryKey:s,queryFn:o,enabled:a},e[7]=s,e[8]=o,e[9]=a,e[10]=i):i=e[10],rt(i)},q3e=t=>{"use forget";const e=W.c(12),n=It();let s;e[0]!==t?(s=async c=>c==="remove"?await ge.safeDelete("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}}}):await ge.safePost("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}},requestBody:{emoji:c}}),e[0]=t,e[1]=s):s=e[1];let o,a,i;e[2]!==t||e[3]!==n?(o=async c=>{await n.cancelQueries({queryKey:ns.pulseCard(t)});const d=n.getQueryData(ns.pulseCard(t));return d&&n.setQueryData(ns.pulseCard(t),U(w({},d),{reaction:c})),{previousCard:d}},a=(c,d,u)=>{u!=null&&u.previousCard&&n.setQueryData(ns.pulseCard(t),u.previousCard)},i=(c,d,u)=>{const{emoji:f}=c,{previousCard:m}=u;n.setQueryData(ns.pulseCard(t),U(w({},m),{reaction:f}))},e[2]=t,e[3]=n,e[4]=o,e[5]=a,e[6]=i):(o=e[4],a=e[5],i=e[6]);let l;return e[7]!==s||e[8]!==o||e[9]!==a||e[10]!==i?(l={mutationFn:s,onMutate:o,onError:a,onSuccess:i},e[7]=s,e[8]=o,e[9]=a,e[10]=i,e[11]=l):l=e[11],qt(l)},Y3e=t=>{"use forget";const e=W.c(12),n=It();let s;e[0]!==t?(s=async c=>c==="save"?await ge.safePut("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}):await ge.safeDelete("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}),e[0]=t,e[1]=s):s=e[1];let o,a,i;e[2]!==t||e[3]!==n?(o=async c=>{await n.cancelQueries({queryKey:ns.pulseCard(t)});const d=n.getQueryData(ns.pulseCard(t));return d&&n.setQueryData(ns.pulseCard(t),U(w({},d),{is_saved:c==="save"})),{previousCard:d}},a=(c,d,u)=>{u!=null&&u.previousCard&&n.setQueryData(ns.pulseCard(t),u.previousCard)},i=(c,d,u)=>{const{saved:f}=c,{previousCard:m}=u;n.setQueryData(ns.pulseCard(t),U(w({},m),{is_saved:f}))},e[2]=t,e[3]=n,e[4]=o,e[5]=a,e[6]=i):(o=e[4],a=e[5],i=e[6]);let l;return e[7]!==s||e[8]!==o||e[9]!==a||e[10]!==i?(l={mutationFn:s,onMutate:o,onError:a,onSuccess:i},e[7]=s,e[8]=o,e[9]=a,e[10]=i,e[11]=l):l=e[11],qt(l)},NKe=(t,e)=>{"use forget";const n=W.c(3);let s;return n[0]!==t||n[1]!==e?(s={mutationFn:async()=>await ge.safePost("/feed/interactions",{requestBody:{events:[{type:"proactive_connectors_declined",connector_ids:t,item_id:e,timestamp:new Date().toISOString()}]}})},n[0]=t,n[1]=e,n[2]=s):s=n[2],qt(s)},Fs=Hn(t=>{let e;return wa(()=>{var n,s,o,a;return(a=(o=(n=g5(t).data)==null?void 0:n.id)!=null?o:(s=_m(t).data)==null?void 0:s.id)!=null?a:void 0},n=>{e=n},{fireImmediately:!0}),{logEventWithStatsig:(n,s,o)=>{const a=e?U(w({},o),{feed_id:e}):o;B.logEventWithStatsig(n,s,a)}}});var sl=(t=>(t.FeedbackOnCard="pulse-feedback-on-card",t.FeedbackConversation="pulse-feedback-conversation",t.FeedbackPreview="pulse-feedback-preview",t))(sl||{});const NO={type:"pulse-feedback-preview"},PO={activeCardId:null};class Z3e{constructor(){J(this,"autoSendCompletion");J(this,"shouldAutoSendCompletion$",Be(!1));J(this,"populatePrompt$",Be(void 0));J(this,"isFeedbackModalOpen$",Be(!1));J(this,"feedbackModalState$",Be(NO));J(this,"isCardModalOpen$",Be(!1));J(this,"cardModalState$",Be(PO))}}const Ra=Hn(()=>new Z3e),RO=on(t=>St(()=>{var n;const{data:e}=_m(t);return((n=e==null?void 0:e.items)!=null?n:[]).filter(Hf)})),PKe=on(t=>St(()=>{const e=Ra(t).cardModalState$().activeCardId;if(e)return RO(t).find(n=>n.id===e)}));var p5=(t=>(t.Sidebar="sidebar",t.Chat="chat",t.Url="url",t))(p5||{});const LO=on(()=>Be(void 0)),K3e=a=>{var i=a,{label:t,first:e,children:n,className:s}=i,o=we(i,["label","first","children","className"]);const l=_.useId();return r.jsxs("aside",U(w({className:z(e?"pt-(--sidebar-section-first-margin-top)":"pt-(--sidebar-section-margin-top)","last:mb-5",s),"aria-labelledby":t?l:void 0},o),{children:[t&&r.jsx(OO,{id:l,children:t}),n]}))},OO=t=>r.jsx(FG,w({as:"h2"},t)),Ao=t=>r.jsx(DG,U(w({fillContainer:!0},t),{onClick:DO(t)})),h5=t=>r.jsx(U3,U(w({as:"div",fillContainer:!0},t),{onClick:DO(t)}));function DO(t){return e=>{var n;(n=t.onClick)==null||n.call(t,e),!e.defaultPrevented&&e.currentTarget.contains(e.target)&&Ln.setPopoverSidebarOpen(!1)}}const Q3e=R(()=>P(()=>import("./hw8bsku1vts8j7n2.js"),__vite__mapDeps([318,1])),{loading:t=>F(t)});function J3e(t){"use forget";const e=W.c(4),{iconOnly:n}=t,s=V();let o;if(e[0]!==s?(o=()=>Zh(s),e[0]=s,e[1]=o):o=e[1],!re(o))return null;let i;return e[2]!==n?(i=r.jsx(X3e,{iconOnly:n}),e[2]=n,e[3]=i):i=e[3],i}function X3e(t){"use forget";const e=W.c(13),{iconOnly:n}=t,s=ne(),o=AQ(),a=V();let i;e[0]!==s?(i=s.formatMessage({id:"zEGHd1",defaultMessage:"Pulse"}),e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=Ph("/pulse"),e[2]=c):c=e[2];let d;e[3]!==a?(d=()=>{Fs(a).logEventWithStatsig("(Web) Feed Opened From Sidebar","chatgpt_web_fyp_feed_opened_from_sidebar"),LO.set(a,p5.Sidebar)},e[3]=a,e[4]=d):d=e[4];let u;e[5]!==n||e[6]!==l?(u=n?{iconOnly:!0,iconAriaLabel:l}:{},e[5]=n,e[6]=l,e[7]=u):u=e[7];let f;return e[8]!==o||e[9]!==l||e[10]!==d||e[11]!==u?(f=r.jsx(Ao,w({"data-testid":"sidebar-item-pulse",icon:Q3e,to:c,onClick:d,label:l,active:o},u)),e[8]=o,e[9]=l,e[10]=d,e[11]=u,e[12]=f):f=e[12],f}const _5=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M9.38759 8.53403C10.0712 8.43795 10.7036 8.91485 10.7997 9.59849C10.8956 10.2819 10.4195 10.9133 9.73622 11.0096C9.05259 11.1057 8.4202 10.6298 8.32411 9.94614C8.22804 9.26258 8.70407 8.63022 9.38759 8.53403Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3886 5.58677C10.8476 5.5681 11.2608 5.5975 11.6581 5.74204L11.8895 5.83677C12.4185 6.07813 12.8721 6.46152 13.1991 6.94614L13.2831 7.07993C13.4673 7.39617 13.5758 7.74677 13.6571 8.14048C13.7484 8.58274 13.8154 9.13563 13.8993 9.81919L14.245 12.6317L14.3554 13.5624C14.3852 13.8423 14.4067 14.0936 14.4159 14.3192C14.4322 14.7209 14.4118 15.0879 14.3095 15.4393L14.2606 15.5887C14.0606 16.138 13.7126 16.6202 13.2577 16.9823L13.0565 17.1297C12.7061 17.366 12.312 17.4948 11.8622 17.5877C11.6411 17.6334 11.3919 17.673 11.1132 17.7118L10.1835 17.8299L7.37098 18.1756C6.68748 18.2596 6.13466 18.3282 5.68348 18.3465C5.28176 18.3628 4.9148 18.3424 4.56337 18.2401L4.41395 18.1913C3.86454 17.9912 3.38258 17.6432 3.0204 17.1883L2.87294 16.9872C2.63655 16.6367 2.50788 16.2427 2.41493 15.7928C2.36926 15.5717 2.32964 15.3226 2.29091 15.0438L2.17274 14.1141L1.82704 11.3016C1.74311 10.6181 1.67455 10.0653 1.65614 9.61411C1.63747 9.15518 1.66697 8.74175 1.81141 8.34458L1.90614 8.11313C2.14741 7.58441 2.53115 7.13051 3.01552 6.80356L3.1493 6.71958C3.46543 6.53545 3.8163 6.42688 4.20985 6.34556C4.65206 6.25423 5.20506 6.18729 5.88856 6.10337L8.70106 5.75767L9.63173 5.64731C9.91161 5.61744 10.163 5.59597 10.3886 5.58677ZM6.75673 13.0594C6.39143 12.978 6.00943 13.0106 5.66298 13.1522C5.5038 13.2173 5.32863 13.3345 5.06923 13.5829C4.80403 13.8368 4.49151 14.1871 4.04091 14.6932L3.64833 15.1327C3.67072 15.2763 3.69325 15.4061 3.71766 15.5243C3.79389 15.893 3.87637 16.0961 3.97548 16.243L4.06141 16.3602C4.27134 16.6237 4.5507 16.8253 4.86903 16.9413L5.00477 16.9813C5.1536 17.0148 5.34659 17.0289 5.6288 17.0174C6.01317 17.0018 6.50346 16.9419 7.20888 16.8553L10.0214 16.5106L10.9306 16.3944C11.0173 16.3824 11.0997 16.3693 11.1776 16.3573L8.61513 14.3065C8.08582 13.8831 7.71807 13.5905 7.41395 13.3846C7.19112 13.2338 7.02727 13.1469 6.88856 13.0975L6.75673 13.0594ZM10.4432 6.91587C10.2511 6.9237 10.0319 6.94288 9.77333 6.97056L8.86317 7.07798L6.05067 7.42271C5.34527 7.50932 4.85514 7.57047 4.47841 7.64829C4.20174 7.70549 4.01803 7.76626 3.88173 7.83481L3.75966 7.9061C3.47871 8.09575 3.25597 8.35913 3.1161 8.66587L3.06141 8.79966C3.00092 8.96619 2.96997 9.18338 2.98524 9.55942C3.00091 9.94382 3.06074 10.4341 3.14735 11.1395L3.42274 13.3895L3.64442 13.1434C3.82631 12.9454 3.99306 12.7715 4.1493 12.6219C4.46768 12.3171 4.78299 12.0748 5.16005 11.9208L5.38661 11.8377C5.92148 11.6655 6.49448 11.6387 7.04579 11.7616L7.19325 11.7987C7.53151 11.897 7.8399 12.067 8.15907 12.2831C8.51737 12.5256 8.9325 12.8582 9.4452 13.2684L12.5966 15.7889C12.7786 15.6032 12.9206 15.3806 13.0106 15.1336L13.0507 14.9979C13.0842 14.8491 13.0982 14.6561 13.0868 14.3739C13.079 14.1817 13.0598 13.9625 13.0321 13.704L12.9247 12.7938L12.58 9.9813C12.4933 9.27584 12.4322 8.78581 12.3544 8.40903C12.2972 8.13219 12.2364 7.94873 12.1679 7.81235L12.0966 7.69028C11.9069 7.40908 11.6437 7.18669 11.3368 7.04673L11.203 6.99204C11.0364 6.93147 10.8195 6.90059 10.4432 6.91587Z"}),_.createElement("path",{d:"M9.72841 1.5897C10.1797 1.60809 10.7322 1.67665 11.4159 1.7606L14.2284 2.1063L15.1581 2.22446C15.4371 2.26322 15.6859 2.3028 15.9071 2.34849C16.3571 2.44144 16.7509 2.57006 17.1015 2.80649L17.3026 2.95396C17.7576 3.31618 18.1055 3.79802 18.3056 4.34751L18.3544 4.49692C18.4567 4.84845 18.4772 5.21519 18.4608 5.61704C18.4516 5.84273 18.4292 6.09381 18.3993 6.37388L18.2899 7.30454L17.9442 10.117C17.8603 10.8007 17.7934 11.3535 17.702 11.7958C17.6207 12.1895 17.5122 12.5401 17.328 12.8563L17.244 12.9901C17.0958 13.2098 16.921 13.4086 16.7255 13.5829L16.6171 13.662C16.3496 13.8174 16.0009 13.769 15.787 13.5292C15.5427 13.255 15.5666 12.834 15.8407 12.5897L16.0018 12.4276C16.0519 12.3703 16.0986 12.3095 16.1415 12.2459L16.2128 12.1239C16.2813 11.9875 16.3421 11.8041 16.3993 11.5272C16.4771 11.1504 16.5383 10.6605 16.6249 9.95493L16.9696 7.14243L17.077 6.23228C17.1047 5.97357 17.1239 5.7546 17.1317 5.56235C17.1432 5.27997 17.1291 5.08722 17.0956 4.93833L17.0556 4.80259C16.9396 4.4842 16.7381 4.20493 16.4745 3.99497L16.3573 3.90903C16.2103 3.80991 16.0075 3.72745 15.6386 3.65122C15.4502 3.61231 15.2331 3.57756 14.9755 3.54185L14.0663 3.42563L11.2538 3.08091C10.5481 2.99426 10.0582 2.93444 9.67372 2.9188C9.39129 2.90732 9.19861 2.92142 9.0497 2.95493L8.91395 2.99497C8.59536 3.11093 8.31538 3.31224 8.10536 3.57603L8.0204 3.69321C7.95293 3.79324 7.89287 3.91951 7.83778 4.10532L7.787 4.23032C7.64153 4.50308 7.31955 4.64552 7.01161 4.55454C6.65948 4.45019 6.45804 4.07952 6.56239 3.72739L6.63075 3.52036C6.70469 3.31761 6.79738 3.12769 6.91786 2.94907L7.06532 2.7479C7.42756 2.29294 7.90937 1.94497 8.45888 1.74497L8.60829 1.69614C8.95981 1.59385 9.32655 1.57335 9.72841 1.5897Z"})),xm=Object.freeze(Object.defineProperty({__proto__:null,default:_5},Symbol.toStringTag,{value:"Module"})),ym=t=>{_.useEffect(t,[])};function _w(){return{finished:Promise.resolve(),ready:Promise.resolve(),skipTransition:()=>{},types:new Set,updateCallbackDone:Promise.resolve()}}function eve(){return"ViewTransitionTypeSet"in document}function FO({forceFlushSync:t,update:e,className:n,types:s}){var o,a;if(typeof document<"u"&&document.visibilityState==="hidden")return t?sr.flushSync(e):e(),_w();if("startViewTransition"in document){let i;const l=eve();s&&document.documentElement.setAttribute("active-view-transition-type",s.join(","));const c=["active-view-transition"];n&&(Array.isArray(n)?c.push(...n):c.push(n)),document.documentElement.classList.add(...c),l?i=document.startViewTransition({update:()=>{if(document.documentElement.classList.add("update-callback-done"),t)sr.flushSync(e);else return e()},types:s}):i=document.startViewTransition(()=>{if(document.documentElement.classList.add("update-callback-done"),t)sr.flushSync(e);else return e()});let d=!1;const u=()=>{d||(d=!0,document.documentElement.classList.remove(...c,"update-callback-done"),document.documentElement.removeAttribute("active-view-transition-type"))};return(o=i.finished)==null||o.then(async()=>{await nf.yield(),u()}).catch(f=>{u()}),(a=i.ready)==null||a.catch(f=>{u()}),i}else{const i=_w();return setTimeout(()=>{e()},0),i}}const tve={type:"unsupported",value:void 0};const nve={home:{from:{type:"landing-page",className:"back-animation"}},"landing-page":{from:{type:"home",className:"use-case-animation"},to:{type:"home",className:"back-animation"}},conversation:{},unsupported:{},library:{from:{type:"home",className:"use-case-animation"},to:{type:"home",className:"back-animation"}}},Wr=class Wr{constructor(){J(this,"activeViewTransition",null);J(this,"classNames",[]);J(this,"storage",new Jx);J(this,"currentPage",null);J(this,"previousPage",null);J(this,"waitForReadyPromise",null);J(this,"waitForReadyResolve",null)}static getPageToPageConfig({to:e,from:n}){if(!nve[e.type]||e.type===(n==null?void 0:n.type))return null;const o=[];return n&&(o.push("from-".concat(n.type)),n.value&&o.push("from-value-".concat(n.value))),o.push("to-".concat(e.type)),e.value&&o.push("to-value-".concat(e.value)),o}addStaticClass(e){if(!e)return;const n=Array.isArray(e)?e:[e];n.forEach(s=>{Wr.persistedClassNames.add(s)}),document.documentElement.classList.add(...n)}static getPageType(e){let n;for(const s of e)if(s.id==="routes/_conversation.$landingType"){const o=s.data;o!=null&&o.type&&(n={type:o.page,value:o.type})}else s.id==="routes/_conversation"?n={type:"home",value:void 0}:s.id==="routes/_conversation.c.$conversationId"?n={type:"conversation",value:void 0}:s.id==="routes/trending"&&(n={type:"trending",value:void 0});return n!=null?n:tve}loadPageTransition(e){const n=Wr.getPageType(e);this.previousPage=this.currentPage,this.currentPage=n}loadPageTransitionFromStorage(){const e=this.storage.getEntry();e&&(this.addClassToCurrentTransition(e.classNames),this.signalTransitionReady())}transitionToPage(e,n){const s=Wr.getPageToPageConfig({to:e,from:this.currentPage});this.classNames=[],this.addClassToCurrentTransition(s);const o=this.storage.createEntry({from:this.currentPage,to:e,classNames:s});this.storage.saveEntry(o),this.startTransition({classNames:s,waitForReady:!0,update:n})}addClassToCurrentTransition(e){e&&(this.classNames.push(...Array.isArray(e)?e:[e]),this.syncClassNames())}syncClassNames(){const e=Array.from(document.documentElement.classList).filter(n=>!this.classNames.includes(n)&&!Wr.persistedClassNames.has(n)&&(n.startsWith("from-")||n.startsWith("to-")));document.documentElement.classList.remove(...e),document.documentElement.classList.add(...this.classNames)}signalTransitionReady(){var e;this.waitForReadyPromise&&((e=this.waitForReadyResolve)==null||e.call(this))}waitForTransitionReady(){return this.waitForReadyPromise}static timeout(e,n){return new Promise(s=>{setTimeout(()=>{n.aborted||Fe.addError(new Error("Unexpected view transition timeout")),s()},e)})}startTransition({classNames:e,forceFlushSync:n,staticClassNames:s,types:o,update:a,waitForReady:i=!1}){this.addStaticClass(s),i&&(this.waitForReadyPromise=new Promise(d=>{this.waitForReadyResolve=d}));const c=FO({update:i?async()=>{await a();const d=new AbortController;await Promise.race([this.waitForTransitionReady(),Wr.timeout(1500,d.signal)]),d.abort(),await new Promise(u=>setTimeout(u,60))}:a,className:e,forceFlushSync:n,types:o});return this.activeViewTransition=c,c}};J(Wr,"persistedClassNames",new Set);let Up=Wr;const qu=class qu{getEntry(){const e=sessionStorage.getItem(qu.key);return e?JSON.parse(e):null}saveEntry(e){sessionStorage.setItem(qu.key,JSON.stringify(e))}createEntry({from:e,to:n,classNames:s}){return n.type==="home"?{version:1,classNames:s!=null?s:[],from:e==null?void 0:e.type,to:n.type,selector:"[data-type='unified-composer']",wait:!1}:n.type==="landing-page"?{version:1,from:e==null?void 0:e.type,to:n.type,classNames:s!=null?s:[],selector:"[data-landing-page-load-target]",wait:!0}:{version:1,from:e==null?void 0:e.type,to:n.type,classNames:s!=null?s:[],wait:!1}}};J(qu,"key","view-transition-session-storage");let Jx=qu;const sve=Hn(()=>new Up);function ove(t){return sve(t)}function ave(){const t=V(),e=R$(),n=Up.getPageType(e),s=ove(t);return ym(()=>{s.loadPageTransition(e)}),_.useEffect(()=>{s.loadPageTransitionFromStorage()},[n.type,s]),{pageType:n}}function rve(){return{library:Pe.PictureV2,images:Pe.PictureV2,research:Pe.Research,write:Pe.Canvas}}const ive=rve();Object.fromEntries(Object.entries(ive).map(([t,e])=>[e,t]));function lve(t,e){return"/".concat(e)}const RKe=L$(function(){return null}),cve=t=>{"use forget";const e=W.c(18),{iconOnly:n}=t,s=ne(),{pageType:o}=ave(),a=Ub();let i;e[0]!==s?(i=s.formatMessage({id:"E56n+Q",defaultMessage:"Library"}),e[0]=s,e[1]=i):i=e[1];const l=i;let c,d;if(e[2]===Symbol.for("react.memo_cache_sentinel")){c=null;try{typeof window<"u"&&(c=window.localStorage.getItem("chatgpt_library_last_tab"))}catch(C){c=null}d=lve(Pe.PictureV2,"library"),e[2]=c,e[3]=d}else c=e[2],d=e[3];const u=d;let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=()=>u,e[4]=f):f=e[4];const[m,g]=_.useState(f);let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{g(Ph(c?"".concat(u,"?tab=").concat(encodeURIComponent(c)):u).toString())},e[5]=p):p=e[5];let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=[c,u],e[6]=h):h=e[6],_.useEffect(p,h);let x;e[7]!==a?(x=()=>{B.logEventWithStatsig("chatgpt_web_image_library_sidebar_item_clicked","chatgpt_web_image_library_sidebar_item_clicked",{location:a})},e[7]=a,e[8]=x):x=e[8];const v=o.type==="library";let y;e[9]!==n||e[10]!==l?(y=n?{iconOnly:!0,iconAriaLabel:l}:{},e[9]=n,e[10]=l,e[11]=y):y=e[11];let b;return e[12]!==l||e[13]!==x||e[14]!==v||e[15]!==y||e[16]!==m?(b=r.jsx(Ao,w({"data-testid":"sidebar-item-library",onClick:x,active:v,icon:_5,to:m,label:l},y)),e[12]=l,e[13]=x,e[14]=v,e[15]=y,e[16]=m,e[17]=b):b=e[17],b},BO="/archived";function dve(){"use forget";return oh(BO)!=null}const UO=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M11.8008 10.1816C12.1035 10.2438 12.3309 10.5119 12.3311 10.833C12.3311 11.1542 12.1036 11.4222 11.8008 11.4844L11.666 11.498H8.33301C7.96589 11.4979 7.66797 11.2002 7.66797 10.833C7.66814 10.466 7.966 10.1682 8.33301 10.168H11.666L11.8008 10.1816Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.417 2.66797C16.7045 2.66815 17.7489 3.71251 17.749 5V5.83301C17.749 6.33171 17.59 6.79271 17.3232 7.17188C17.3263 7.19763 17.3311 7.22343 17.3311 7.25V12.667C17.3311 13.3559 17.3317 13.9131 17.2949 14.3633C17.2622 14.7639 17.197 15.1246 17.0527 15.4609L16.9863 15.6035C16.7209 16.1245 16.3169 16.5602 15.8213 16.8643L15.6035 16.9863C15.2268 17.1782 14.8202 17.2575 14.3623 17.2949C13.9121 17.3317 13.3549 17.332 12.666 17.332H7.33301C6.64407 17.332 6.08689 17.3317 5.63672 17.2949C5.23627 17.2622 4.87521 17.1979 4.53906 17.0537L4.39648 16.9863C3.8754 16.7208 3.43882 16.3171 3.13477 15.8213L3.0127 15.6035C2.82089 15.227 2.74153 14.821 2.7041 14.3633C2.66732 13.9131 2.66797 13.3559 2.66797 12.667V7.25C2.66797 7.22312 2.67268 7.19694 2.67578 7.1709C2.4096 6.79197 2.25195 6.33115 2.25195 5.83301V5C2.25212 3.7124 3.29634 2.66797 4.58398 2.66797H15.417ZM16.001 8.08789C15.8141 8.13621 15.619 8.16501 15.417 8.16504H4.58398C4.38146 8.16504 4.18541 8.13644 3.99805 8.08789V12.667C3.99805 13.3778 3.99895 13.8714 4.03027 14.2549C4.06097 14.6303 4.11779 14.8421 4.19824 15L4.26855 15.126C4.44482 15.4134 4.69792 15.6478 5 15.8018L5.12988 15.8574C5.27361 15.9089 5.4633 15.9467 5.74512 15.9697C6.12858 16.0011 6.62215 16.002 7.33301 16.002H12.666C13.3767 16.002 13.8705 16.001 14.2539 15.9697C14.6292 15.9391 14.8411 15.8821 14.999 15.8018L15.126 15.7305C15.4132 15.5542 15.6479 15.3019 15.8018 15L15.8574 14.8691C15.9088 14.7255 15.9467 14.5363 15.9697 14.2549C16.0011 13.8714 16.001 13.3779 16.001 12.667V8.08789ZM4.58398 3.99805C4.03088 3.99805 3.5822 4.44693 3.58203 5V5.83301C3.58203 6.38621 4.03078 6.83496 4.58398 6.83496H15.417C15.97 6.83478 16.4189 6.3861 16.4189 5.83301V5C16.4188 4.44705 15.9699 3.99823 15.417 3.99805H4.58398Z"})),uve=Object.freeze(Object.defineProperty({__proto__:null,default:UO},Symbol.toStringTag,{value:"Module"}));function fve(){"use forget";const t=W.c(6),e=ne(),n=dve();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=Ph(BO),t[0]=s):s=t[0];let o;t[1]!==e?(o=e.formatMessage(mve),t[1]=e,t[2]=o):o=t[2];let a;return t[3]!==n||t[4]!==o?(a=r.jsx(Ao,{icon:UO,to:s,active:n,label:o}),t[3]=n,t[4]=o,t[5]=a):a=t[5],a}const mve=Ge({id:"WvXi2t",defaultMessage:"Archived chats"}),$O=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.0857 8.74999C14.0857 5.80355 11.6972 3.41503 8.75073 3.41503C5.80429 3.41503 3.41577 5.80355 3.41577 8.74999C3.41577 11.6964 5.80429 14.085 8.75073 14.085C11.6972 14.085 14.0857 11.6964 14.0857 8.74999ZM15.4158 8.74999C15.4158 10.3539 14.848 11.8245 13.9041 12.9746L13.9705 13.0303L16.9705 16.0303L17.0564 16.1338C17.2269 16.3919 17.1977 16.7434 16.9705 16.9707C16.7432 17.1975 16.3925 17.226 16.1345 17.0557L16.03 16.9707L13.03 13.9707L12.9753 13.9033C11.8253 14.8472 10.3547 15.415 8.75073 15.415C5.06975 15.415 2.08569 12.431 2.08569 8.74999C2.08569 5.06901 5.06975 2.08495 8.75073 2.08495C12.4317 2.08495 15.4158 5.06901 15.4158 8.74999Z"})),VO=Object.freeze(Object.defineProperty({__proto__:null,default:$O},Symbol.toStringTag,{value:"Module"})),LKe=()=>{"use forget";const t=W.c(20),e=V();let n;t[0]!==e?(n=ve(e,"713974087"),t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==e?(o=gi(e)&&hn(),t[2]=e,t[3]=o):o=t[3];const a=o;let i,l,c,d,u,f,m,g;t[4]===Symbol.for("react.memo_cache_sentinel")?(i=z("tall:sticky tall:top-header-height tall:z-20 bg-token-bg-elevated-secondary relative","[--sticky-spacer:6px]"),l=r.jsx(gve,{}),c=r.jsx(pve,{}),d=!1,u=!1,f=!1,m=r.jsx(J3e,{}),g=r.jsx(cve,{}),t[4]=i,t[5]=l,t[6]=c,t[7]=d,t[8]=u,t[9]=f,t[10]=m,t[11]=g):(i=t[4],l=t[5],c=t[6],d=t[7],u=t[8],f=t[9],m=t[10],g=t[11]);let p;t[12]!==s?(p=!1,t[12]=s,t[13]=p):p=t[13];let h;t[14]!==a?(h=a&&r.jsx(fve,{}),t[14]=a,t[15]=h):h=t[15];let x;t[16]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("div",{"aria-hidden":!0,className:z("pointer-events-none absolute start-0 end-0","-bottom-[var(--sticky-spacer)] h-[var(--sticky-spacer)]","opacity-0 will-change-[opacity] group-data-scrolled-from-top/scrollport:opacity-100","bg-token-bg-elevated-secondary")}),t[16]=x):x=t[16];let v;return t[17]!==p||t[18]!==h?(v=r.jsxs(K3e,{first:!0,className:i,children:[l,c,d,u,f,m,g,p,h,x]}),t[17]=p,t[18]=h,t[19]=v):v=t[19],v},gve=t=>{"use forget";const e=W.c(15),{iconOnly:n}=t,s=V(),o=ne(),a=Ub(),i=re($3);let l;e[0]!==s||e[1]!==a?(l=h=>{B.logEvent("Sidebar Click Gizmo",{gizmo_id:"primary"}),jP(s,h,{location:a!=null?a:"Sidebar gizmo list"})},e[0]=s,e[1]=a,e[2]=l):l=e[2];const c=l;let d;e[3]!==o?(d=o.formatMessage({id:"6Abeg/",defaultMessage:"New chat"}),e[3]=o,e[4]=d):d=e[4];const u=d,f=x1();let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(r1,{binding:xP,className:"touch:hidden"}),e[5]=m):m=e[5];let g;e[6]!==n||e[7]!==u?(g=n?{iconOnly:!0,iconAriaLabel:u}:{},e[6]=n,e[7]=u,e[8]=g):g=e[8];let p;return e[9]!==i||e[10]!==c||e[11]!==u||e[12]!==f||e[13]!==g?(p=r.jsx(Ao,w({"data-testid":"create-new-chat-button",to:"/",state:f,onClick:c,icon:fN,label:u,highlightTrailing:m,showHighlightTrailing:i},g)),e[9]=i,e[10]=c,e[11]=u,e[12]=f,e[13]=g,e[14]=p):p=e[14],p},pve=({iconOnly:t})=>{const e=V(),n=ne(),{isFannyPackEnabled:s}=Ib(e),o=Ub(),a=re($3),l=re(()=>BG(e));if(_.useEffect(()=>{s&&(Fe.addAction("fannypack.web.action_seen"),P(()=>import("./m7df4jwt169q6ixf.js").then(d=>d.a),__vite__mapDeps([319,320,10,1,11])))},[s]),!s)return null;const c=n.formatMessage({id:"bDEsvT",defaultMessage:"Search chats"});return r.jsx(h5,w({onClick:d=>{l&&d.preventDefault(),P(()=>import("./m7df4jwt169q6ixf.js").then(u=>u.a),__vite__mapDeps([319,320,10,1,11])).then(u=>u.openFannyPackSearch()),B.logEventWithStatsig("chatgpt_web_search_sidebar_item_clicked","chatgpt_web_search_sidebar_item_clicked",{location:o})},icon:$O,label:c,highlightTrailing:r.jsx("div",{className:"touch:hidden",children:r.jsx(r1,{binding:ude})}),showHighlightTrailing:a},t?{iconOnly:!0,iconAriaLabel:c}:{}))},D0=R(()=>P(()=>import("./dwgk7r4s1fwn35jq.js"),__vite__mapDeps([142,1])),{loading:t=>F(t)}),F0=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>F(t)}),HO="https://openai.com/policies/cookie-policy/",Bi=Se({essentialCookies:{id:"settingsModal.privacy.cookieConsent.essentialCookiesLabel",defaultMessage:"Strictly Necessary Cookies (always active)"},marketingCookies:{id:"settingsModal.privacy.cookieConsent.marketingCookiesLabel",defaultMessage:"Marketing Performance Cookies"},analyticsCookies:{id:"settingsModal.privacy.cookieConsent.analyticsCookiesLabel",defaultMessage:"Analytics Cookies"},cookieConsent:{id:"settingsModal.privacy.cookieConsent.header",defaultMessage:"Cookie Preference Center"}});function x5(t,e){const{isUserInPioneerHR:n,userCountry:s}=Rn(t);return(!(e!=null&&e.structure)||e.structure!==UG.WORKSPACE)&&yT(s)&&(n!=null?n:!1)}const nh=class nh extends Si()(()=>({isOpen:!1})){constructor(){super(...arguments);J(this,"openModal",()=>this.setState(n=>U(w({},n),{isOpen:!0})));J(this,"closeModal",()=>this.setState(n=>U(w({},n),{isOpen:!1})))}};J(nh,"useIsOpen",()=>nh.useState(n=>n.isOpen));let vr=nh;function OKe(){const t=ne(),e=It(),n=V(),s=st(n),{data:o,isLoading:a}=rt(pi),i=vr.useStore(),l=vr.useIsOpen(),c=Sr(),[d,u]=_.useState(!1),[f,m]=_.useState(!1),[g,p]=_.useState(!1),{mutate:h}=C8({onMutate:v=>{e.setQueryData(pi.queryKey,y=>y?U(w({},y),{consent_analytics:v.consent_analytics,consent_marketing:v.consent_marketing}):{consent_analytics:v.consent_analytics,consent_marketing:v.consent_marketing,is_consent_required:!0})},onSuccess:(v,y)=>{Fe.addAction("cookie-consent.consent-modal.updated-cookie-consent-backend",{consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing}),B.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend",{consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing})},onError:(v,y)=>{B.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend Error","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend_error",{error:v.message,consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing})}}),x=x5(n,s)&&l;return _.useEffect(()=>{x&&B.logEventWithStatsig("Cookie Preferences Modal Shown","chatgpt_cookie_prefs_modal_shown")},[x]),r.jsx(Mt,{isOpen:x,testId:"modal-cookie-preferences",onClose:()=>{i.closeModal(),B.logEventWithStatsig("Cookie Preferences Modal Closed","chatgpt_cookie_prefs_modal_closed")},size:"custom",className:"h-[100%] md:max-h-[600px] md:min-h-[600px] md:max-w-[680px]",type:"success",showCloseButton:!0,title:t.formatMessage(Bi.cookieConsent),children:r.jsxs("div",{className:"flex max-h-[calc(100vh-150px)] w-full flex-col gap-3 overflow-y-auto md:min-h-[380px]",children:[r.jsx("p",{className:"text-token-text-secondary text-sm",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.description.v2",defaultMessage:"Using websites and apps involves storing and retrieving information from your device, including cookies and other identifiers, which can be shared with third parties, for various activities. We provide a simple tool below allowing you to tailor your choices as you deem fit. You can change your consent at any time. <learnMore>Learn more.</learnMore>",values:{learnMore:v=>r.jsx("a",{href:HO,target:"_blank",rel:"noreferrer",className:"underline",children:v})}})}),r.jsxs("div",{className:"mt-2 flex flex-col gap-3",children:[r.jsx(Ja,{children:c?r.jsx(Rc,{label:t.formatMessage(Bi.essentialCookies),disabled:!0,enabled:!0,onChange:()=>{},description:r.jsx("p",{children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pg,{id:"essential-cb",checked:!0,disabled:!0}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage(Bi.essentialCookies)}),r.jsx("button",{onClick:()=>u(!d),children:d?r.jsx(D0,{className:"icon-sm"}):r.jsx(F0,{className:"icon-sm"})})]}),d&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})]})]})}),r.jsx(Ja,{children:c?r.jsx(Rc,{label:t.formatMessage(Bi.analyticsCookies),enabled:!!(o!=null&&o.consent_analytics),disabled:a,onChange:v=>{var y;B.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:v}),h({consent_analytics:v,consent_marketing:(y=o==null?void 0:o.consent_marketing)!=null?y:!1})},description:r.jsx("p",{children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pg,{id:"analytics-cb",checked:!!(o!=null&&o.consent_analytics),disabled:a,onChange:v=>{var b;const y=v.target.checked;B.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:y}),h({consent_analytics:y,consent_marketing:(b=o==null?void 0:o.consent_marketing)!=null?b:!1})}}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage(Bi.analyticsCookies)}),r.jsx("button",{onClick:()=>m(!f),children:f?r.jsx(D0,{className:"icon-sm"}):r.jsx(F0,{className:"icon-sm"})})]}),f&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})]})]})}),r.jsx(Ja,{children:c?r.jsx(Rc,{label:t.formatMessage(Bi.marketingCookies),enabled:!!(o!=null&&o.consent_marketing),disabled:a,onChange:v=>{var y;B.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:v}),h({consent_marketing:v,consent_analytics:(y=o==null?void 0:o.consent_analytics)!=null?y:!1})},description:r.jsx("p",{children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pg,{id:"marketing-cb",checked:!!(o!=null&&o.consent_marketing),disabled:a,onChange:v=>{var b;const y=v.target.checked;B.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:y}),h({consent_marketing:y,consent_analytics:(b=o==null?void 0:o.consent_analytics)!=null?b:!1})}}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage(Bi.marketingCookies)}),r.jsx("button",{onClick:()=>p(!g),children:g?r.jsx(D0,{className:"icon-sm"}):r.jsx(F0,{className:"icon-sm"})})]}),g&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})]})]})})]})]})})}function Vc(t){"use forget";const e=W.c(7),{onClick:n,children:s}=t,o=V(),a=ze(o,"2118136551"),i=Eo(),l=a.get("show_cookie_banner_improvements",!1),c=l?"secondary":void 0,d=l?"text-sm":"bg-gray-950/5 text-sm text-black hover:bg-gray-800/10 dark:bg-gray-50/5 hover:dark:bg-gray-100/10",u=i?"medium":void 0,f=i?"secondary":c,m=i?"mb-2 sm:mb-3":d;let g;return e[0]!==s||e[1]!==i||e[2]!==n||e[3]!==u||e[4]!==f||e[5]!==m?(g=r.jsx(ye,{as:"button",size:u,color:f,fullWidth:i,className:m,onClick:n,children:s}),e[0]=s,e[1]=i,e[2]=n,e[3]=u,e[4]=f,e[5]=m,e[6]=g):g=e[6],g}function DKe(t){"use forget";const e=W.c(7),{useManuallyControlledVisibility:n,fixed:s}=t,o=n===void 0?!1:n,a=s===void 0?!1:s,{shouldShowCookieBanner:i,closeCookieConsentBanner:l,ignoreCookieConsentBanner:c}=$G(),{mutate:d}=C8(),u=Y4.useOnCloseSideEffect(),f=Y4.useManuallySetVisibility(),m=o?f:i;let g;return e[0]!==l||e[1]!==a||e[2]!==c||e[3]!==u||e[4]!==m||e[5]!==d?(g=m&&r.jsx(hve,{fixed:a,onAccept:()=>{d({consent_analytics:!0,consent_marketing:!0}),l(),u(),B.logEventWithStatsig("Cookie Consent Banner Accepted","chatgpt_cookie_consent_banner_accepted")},onReject:()=>{d({consent_analytics:!1,consent_marketing:!1}),l(),u(),B.logEventWithStatsig("Cookie Consent Banner Rejected","chatgpt_cookie_consent_banner_rejected")},onIgnore:()=>{c(),u(),B.logEventWithStatsig("Cookie Consent Banner Ignored","chatgpt_cookie_consent_banner_ignored")}}),e[0]=l,e[1]=a,e[2]=c,e[3]=u,e[4]=m,e[5]=d,e[6]=g):g=e[6],g}function hve(t){"use forget";const e=W.c(4),n=Eo();let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],e[0]=s):s=e[0],_.useEffect(_ve,s);let o;return e[1]!==n||e[2]!==t?(o=n?r.jsx(vve,w({},t)):r.jsx(yve,w({},t)),e[1]=n,e[2]=t,e[3]=o):o=e[3],o}function _ve(){B.logEventWithStatsig("Cookie Consent Banner Shown","chatgpt_cookie_consent_banner_shown")}function GO(){"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.title",defaultMessage:"We use cookies"}),t[0]=e):e=t[0],e}function Xx(){"use forget";const t=W.c(2),e=vr.useStore();let n;return t[0]!==e?(n=r.jsx(j,{id:"cookie-consent-banner.description.v2",defaultMessage:"We use cookies to help this site function, understand service usage, and support marketing efforts. Visit <manageCookiesLink>Manage Cookies</manageCookiesLink> to change preferences anytime. View our <cookiePolicyLink>Cookie Policy</cookiePolicyLink> for more info.",values:{cookiePolicyLink:xve,manageCookiesLink:s=>r.jsx("a",{onClick:o=>{o.preventDefault(),e.openModal()},className:"cursor-pointer underline underline-offset-2",children:s},1)}}),t[0]=e,t[1]=n):n=t[1],n}function xve(t){return r.jsx("a",{className:"underline underline-offset-2",href:HO,target:"_blank",rel:"noreferrer",children:t},0)}function WO(){"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.reject",defaultMessage:"Reject non-essential"}),t[0]=e):e=t[0],e}function zO(){"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.accept",defaultMessage:"Accept all"}),t[0]=e):e=t[0],e}function qO(){"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j,{id:"cookie-consent-banner.manage-cookies",defaultMessage:"Manage Cookies"}),t[0]=e):e=t[0],e}function yve(t){"use forget";const e=W.c(26),n=V(),s=ze(n,"2118136551"),o=vr.useStore(),a=s.get("show_cookie_banner_improvements",!1),i=t.fixed&&"fixed inset-x-0 bottom-0";let l;e[0]!==i?(l=z("z-10 w-[100vw] max-w-[100vw] overflow-hidden",i),e[0]=i,e[1]=l):l=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("h1",{className:"text-base",children:r.jsx(GO,{})}),e[2]=c):c=e[2];let d;e[3]!==a?(d=r.jsxs("div",{className:"flex max-w-5xl flex-col gap-2 sm:flex-1",children:[c,r.jsx("p",{className:"text-sm",children:a?r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(Xx,{})}):r.jsx("span",{className:"text-gray-600",children:r.jsx(Xx,{})})})]}),e[3]=a,e[4]=d):d=e[4];let u;e[5]!==o?(u=()=>o.openModal(),e[5]=o,e[6]=u):u=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(qO,{}),e[7]=f):f=e[7];let m;e[8]!==u?(m=r.jsx(Vc,{onClick:u,children:f}),e[8]=u,e[9]=m):m=e[9];let g;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(WO,{}),e[10]=g):g=e[10];let p;e[11]!==t.onReject?(p=r.jsx(Vc,{onClick:t.onReject,children:g}),e[11]=t.onReject,e[12]=p):p=e[12];let h;e[13]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(zO,{}),e[13]=h):h=e[13];let x;e[14]!==t.onAccept?(x=r.jsx(Vc,{onClick:t.onAccept,children:h}),e[14]=t.onAccept,e[15]=x):x=e[15];let v;e[16]!==x||e[17]!==m||e[18]!==p?(v=r.jsxs("div",{className:"flex w-full flex-row justify-end gap-3 sm:w-auto sm:min-w-[300px]",children:[m,p,x]}),e[16]=x,e[17]=m,e[18]=p,e[19]=v):v=e[19];let y;e[20]!==v||e[21]!==d?(y=r.jsxs("div",{className:"bg-token-main-surface-tertiary flex w-full flex-col items-center justify-between gap-5 p-5 shadow-sm sm:flex-row sm:gap-0",children:[d,v]}),e[20]=v,e[21]=d,e[22]=y):y=e[22];let b;return e[23]!==l||e[24]!==y?(b=r.jsx("div",{className:l,children:y}),e[23]=l,e[24]=y,e[25]=b):b=e[25],b}function vve(t){"use forget";var S;const e=W.c(24),n=V(),s=ze(n,"2118136551"),o=vr.useStore(),a=s.get("show_cookie_banner_improvements",!1),i=bve,l=a&&(S=t.onIgnore)!=null?S:i,c=!a;let d;e[0]!==t?(d=r.jsx("div",{className:"flex w-full justify-end",children:r.jsx(xn,{onClick:()=>{var E;return(E=t.onIgnore)==null?void 0:E.call(t)}})}),e[0]=t,e[1]=d):d=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("p",{className:"mb-2 text-center text-xl font-semibold",children:r.jsx(GO,{})}),e[2]=u):u=e[2];let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-sm",children:r.jsx(Xx,{})}),e[3]=f):f=e[3];let m;e[4]!==o?(m=()=>o.openModal(),e[4]=o,e[5]=m):m=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(qO,{}),e[6]=g):g=e[6];let p;e[7]!==m?(p=r.jsx(Vc,{onClick:m,children:g}),e[7]=m,e[8]=p):p=e[8];let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(zO,{}),e[9]=h):h=e[9];let x;e[10]!==t.onAccept?(x=r.jsx(Vc,{onClick:t.onAccept,children:h}),e[10]=t.onAccept,e[11]=x):x=e[11];let v;e[12]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(WO,{}),e[12]=v):v=e[12];let y;e[13]!==t.onReject?(y=r.jsx(Vc,{onClick:t.onReject,children:v}),e[13]=t.onReject,e[14]=y):y=e[14];let b;e[15]!==d||e[16]!==y||e[17]!==p||e[18]!==x?(b=r.jsxs("div",{className:"flex flex-col items-center justify-center px-5 pt-4 pb-8 sm:p-10",children:[d,u,f,p,x,y]}),e[15]=d,e[16]=y,e[17]=p,e[18]=x,e[19]=b):b=e[19];let C;return e[20]!==l||e[21]!==c||e[22]!==b?(C=r.jsx(Mt,{testId:"modal-cookie-consent-banner-mobile",isOpen:!0,onClose:l,noPadding:!0,type:"success",size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:"bottom",shouldIgnoreClickOutside:c,children:b}),e[20]=l,e[21]=c,e[22]=b,e[23]=C):C=e[23],C}function bve(){}const Cve=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M11.2475 18.25C10.6975 18.25 10.175 18.1455 9.67999 17.9365C9.18499 17.7275 8.74499 17.436 8.35999 17.062C7.94199 17.205 7.50749 17.2765 7.05649 17.2765C6.31949 17.2765 5.63749 17.095 5.01049 16.732C4.38349 16.369 3.87749 15.874 3.49249 15.247C3.11849 14.62 2.93149 13.9215 2.93149 13.1515C2.93149 12.8325 2.97549 12.486 3.06349 12.112C2.62349 11.705 2.28249 11.2375 2.04049 10.7095C1.79849 10.1705 1.67749 9.6095 1.67749 9.0265C1.67749 8.4325 1.80399 7.8605 2.05699 7.3105C2.30999 6.7605 2.66199 6.2875 3.11299 5.8915C3.57499 5.4845 4.10849 5.204 4.71349 5.05C4.83449 4.423 5.08749 3.862 5.47249 3.367C5.86849 2.861 6.35249 2.465 6.92449 2.179C7.49649 1.893 8.10699 1.75 8.75599 1.75C9.30599 1.75 9.82849 1.8545 10.3235 2.0635C10.8185 2.2725 11.2585 2.564 11.6435 2.938C12.0615 2.795 12.496 2.7235 12.947 2.7235C13.684 2.7235 14.366 2.905 14.993 3.268C15.62 3.631 16.1205 4.126 16.4945 4.753C16.8795 5.38 17.072 6.0785 17.072 6.8485C17.072 7.1675 17.028 7.514 16.94 7.888C17.38 8.295 17.721 8.768 17.963 9.307C18.205 9.835 18.326 10.3905 18.326 10.9735C18.326 11.5675 18.1995 12.1395 17.9465 12.6895C17.6935 13.2395 17.336 13.718 16.874 14.125C16.423 14.521 15.895 14.796 15.29 14.95C15.169 15.577 14.9105 16.138 14.5145 16.633C14.1295 17.139 13.651 17.535 13.079 17.821C12.507 18.107 11.8965 18.25 11.2475 18.25ZM7.17199 16.1875C7.72199 16.1875 8.20049 16.072 8.60749 15.841L11.7095 14.059C11.8195 13.982 11.8745 13.8775 11.8745 13.7455V12.3265L7.88149 14.62C7.63949 14.763 7.39749 14.763 7.15549 14.62L4.03699 12.8215C4.03699 12.8545 4.03149 12.893 4.02049 12.937C4.02049 12.981 4.02049 13.047 4.02049 13.135C4.02049 13.696 4.15249 14.213 4.41649 14.686C4.69149 15.148 5.07099 15.511 5.55499 15.775C6.03899 16.05 6.57799 16.1875 7.17199 16.1875ZM7.33699 13.498C7.40299 13.531 7.46349 13.5475 7.51849 13.5475C7.57349 13.5475 7.62849 13.531 7.68349 13.498L8.92099 12.7885L4.94449 10.4785C4.70249 10.3355 4.58149 10.121 4.58149 9.835V6.2545C4.03149 6.4965 3.59149 6.8705 3.26149 7.3765C2.93149 7.8715 2.76649 8.4215 2.76649 9.0265C2.76649 9.5655 2.90399 10.0825 3.17899 10.5775C3.45399 11.0725 3.81149 11.4465 4.25149 11.6995L7.33699 13.498ZM11.2475 17.161C11.8305 17.161 12.3585 17.029 12.8315 16.765C13.3045 16.501 13.6785 16.138 13.9535 15.676C14.2285 15.214 14.366 14.697 14.366 14.125V10.561C14.366 10.429 14.311 10.33 14.201 10.264L12.947 9.538V14.1415C12.947 14.4275 12.826 14.642 12.584 14.785L9.46549 16.5835C10.0045 16.9685 10.5985 17.161 11.2475 17.161ZM11.8745 11.122V8.878L10.01 7.822L8.12899 8.878V11.122L10.01 12.178L11.8745 11.122ZM7.05649 5.8585C7.05649 5.5725 7.17749 5.358 7.41949 5.215L10.538 3.4165C9.99899 3.0315 9.40499 2.839 8.75599 2.839C8.17299 2.839 7.64499 2.971 7.17199 3.235C6.69899 3.499 6.32499 3.862 6.04999 4.324C5.78599 4.786 5.65399 5.303 5.65399 5.875V9.4225C5.65399 9.5545 5.70899 9.659 5.81899 9.736L7.05649 10.462V5.8585ZM15.4385 13.7455C15.9885 13.5035 16.423 13.1295 16.742 12.6235C17.072 12.1175 17.237 11.5675 17.237 10.9735C17.237 10.4345 17.0995 9.9175 16.8245 9.4225C16.5495 8.9275 16.192 8.5535 15.752 8.3005L12.6665 6.5185C12.6005 6.4745 12.54 6.458 12.485 6.469C12.43 6.469 12.375 6.4855 12.32 6.5185L11.0825 7.2115L15.0755 9.538C15.1965 9.604 15.2845 9.692 15.3395 9.802C15.4055 9.901 15.4385 10.022 15.4385 10.165V13.7455ZM12.122 5.3635C12.364 5.2095 12.606 5.2095 12.848 5.3635L15.983 7.195C15.983 7.118 15.983 7.019 15.983 6.898C15.983 6.37 15.851 5.8695 15.587 5.3965C15.334 4.9125 14.9655 4.5275 14.4815 4.2415C14.0085 3.9555 13.4585 3.8125 12.8315 3.8125C12.2815 3.8125 11.803 3.928 11.396 4.159L8.29399 5.941C8.18399 6.018 8.12899 6.1225 8.12899 6.2545V7.6735L12.122 5.3635Z"})),FKe=Object.freeze(Object.defineProperty({__proto__:null,default:Cve},Symbol.toStringTag,{value:"Module"})),Sve=R(()=>P(()=>import("./aqoo0lpldi915242.js"),__vite__mapDeps([321,1])),{loading:t=>F(t)});function BKe(t){"use forget";const e=W.c(8),{as:n,inExpandoSidebarSection:s}=t,o=n===void 0?Ao:n,a=s===void 0?!1:s,i=ne(),l=Vn();let c;e[0]!==a||e[1]!==i?(c=a?i.formatMessage({id:"gizmo.exploreStoreEnabled.short.expando",defaultMessage:"Explore"}):i.formatMessage({id:"gizmo.exploreStoreEnabled.short",defaultMessage:"GPTs"}),e[0]=a,e[1]=i,e[2]=c):c=e[2];const d=c;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=Ph(VG()),e[3]=u):u=e[3];const f=l.pathname==="/gpts";let m;return e[4]!==o||e[5]!==d||e[6]!==f?(m=r.jsx(o,{icon:Sve,"data-testid":"explore-gpts-button",to:u,active:f,onClick:wve,label:d}),e[4]=o,e[5]=d,e[6]=f,e[7]=m):m=e[7],m}function wve(){HG()&&Ln.setPopoverSidebarOpen(!1),B.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_explore_gpts",{gizmo_id:"explore_gpts"})}function YO(t){return ve(t,"2459568560")}function kve(t){return ve(t,"833571076")}function Eve(t){return YO(t)}function UKe(t){return YO(t)&&kve(t)}const Tve=R(()=>P(()=>import("./mufc9ue1uaeohhpl.js"),__vite__mapDeps([322,1])),{loading:t=>F(t)}),Mve=({as:t=Ao})=>{const e=V(),n=ne();return Eve(e)?r.jsx(t,{to:"/aardvark",icon:Tve,external:!Sd(),label:n.formatMessage({id:"AardvarkSidebarListItem.aardvark",defaultMessage:"Aardvark"})}):null},ZO=t=>_.createElement("svg",w({width:25,height:25,viewBox:"0 0 25 25",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("g",{clipPath:"url(#clip0_151_34)"},_.createElement("path",{d:"M11.1543 2.27734L11.1544 1.52734H11.1543V2.27734ZM14.8301 3.7998L14.2999 4.33025L14.6059 4.63612L15.0238 4.52434L14.8301 3.7998ZM16.1768 3.62305L16.1768 2.87305L16.1767 2.87305L16.1768 3.62305ZM21.377 8.82324L22.127 8.82324L22.127 8.82322L21.377 8.82324ZM21.1992 10.168L20.4746 9.97447L20.363 10.3925L20.669 10.6984L21.1992 10.168ZM22.7227 13.8457L23.4727 13.8457L23.4727 13.8457L22.7227 13.8457ZM18.8682 18.8682L18.6746 18.1436L18.2555 18.2555L18.1436 18.6746L18.8682 18.8682ZM13.8457 22.7227L13.8457 23.4727H13.8457V22.7227ZM10.1689 21.2002L10.6993 20.6698L10.3933 20.3639L9.97526 20.4756L10.1689 21.2002ZM8.82324 21.377L8.82324 22.127L8.8233 22.127L8.82324 21.377ZM3.62305 16.1768L2.87305 16.1767V16.1768H3.62305ZM3.7998 14.8301L4.52433 15.0239L4.63614 14.6059L4.33028 14.2999L3.7998 14.8301ZM2.27734 11.1543L1.52734 11.1543V11.1543H2.27734ZM6.12988 6.13086L6.32372 6.85538L6.74246 6.74335L6.85443 6.3246L6.12988 6.13086ZM11.1543 2.27734L11.1542 3.02734C12.3827 3.02745 13.4939 3.5246 14.2999 4.33025L14.8301 3.7998L15.3603 3.26936C14.2846 2.19417 12.7966 1.52749 11.1544 1.52734L11.1543 2.27734ZM14.8301 3.7998L15.0238 4.52434C15.3914 4.42604 15.7777 4.37306 16.1768 4.37305L16.1768 3.62305L16.1767 2.87305C15.6443 2.87306 15.1278 2.94383 14.6363 3.07527L14.8301 3.7998ZM16.1768 3.62305V4.37305C18.6343 4.37305 20.6269 6.3657 20.627 8.82327L21.377 8.82324L22.127 8.82322C22.1269 5.53731 19.4628 2.87305 16.1768 2.87305V3.62305ZM21.377 8.82324H20.627C20.627 9.22016 20.5731 9.60568 20.4746 9.97447L21.1992 10.168L21.9238 10.3615C22.0545 9.87218 22.127 9.35663 22.127 8.82324H21.377ZM21.1992 10.168L20.669 10.6984C21.4753 11.5043 21.9726 12.6163 21.9727 13.8458L22.7227 13.8457L23.4727 13.8457C23.4725 12.2027 22.806 10.7136 21.7294 9.63751L21.1992 10.168ZM22.7227 13.8457H21.9727C21.9727 15.9036 20.5745 17.636 18.6746 18.1436L18.8682 18.8682L19.0618 19.5927C21.6008 18.9144 23.4727 16.6006 23.4727 13.8457H22.7227ZM18.8682 18.8682L18.1436 18.6746C17.636 20.5746 15.9037 21.9727 13.8457 21.9727V22.7227V23.4727C16.6006 23.4727 18.9144 21.6008 19.5928 19.0617L18.8682 18.8682ZM13.8457 22.7227L13.8457 21.9727C12.6167 21.9726 11.5052 21.4757 10.6993 20.6698L10.1689 21.2002L9.63863 21.7305C10.7146 22.8064 12.2032 23.4726 13.8457 23.4727L13.8457 22.7227ZM10.1689 21.2002L9.97526 20.4756C9.6077 20.5739 9.22182 20.6269 8.82318 20.627L8.82324 21.377L8.8233 22.127C9.3556 22.1269 9.8716 22.056 10.3626 21.9248L10.1689 21.2002ZM8.82324 21.377V20.627C6.36565 20.627 4.37305 18.6344 4.37305 16.1768H3.62305H2.87305C2.87305 19.4628 5.53722 22.127 8.82324 22.127V21.377ZM3.62305 16.1768L4.37305 16.1768C4.37308 15.7776 4.42601 15.3914 4.52433 15.0239L3.7998 14.8301L3.07528 14.6363C2.94376 15.1279 2.87309 15.6443 2.87305 16.1767L3.62305 16.1768ZM3.7998 14.8301L4.33028 14.2999C3.52457 13.4937 3.02734 12.3827 3.02734 11.1543H2.27734H1.52734C1.52734 12.7967 2.19424 14.2846 3.26933 15.3603L3.7998 14.8301ZM2.27734 11.1543L3.02734 11.1543C3.02745 9.09668 4.42492 7.36339 6.32372 6.85538L6.12988 6.13086L5.93604 5.40634C3.39777 6.08544 1.52748 8.40053 1.52734 11.1543L2.27734 11.1543ZM6.12988 6.13086L6.85443 6.3246C7.36225 4.42545 9.0963 3.02734 11.1543 3.02734V2.27734V1.52734C8.40018 1.52734 6.0842 3.39833 5.40534 5.93712L6.12988 6.13086Z",fill:"currentColor"}),_.createElement("g",{filter:"url(#filter0_d_151_34)"},_.createElement("path",{d:"M14.731 9.34888C14.8822 9.29395 15.053 9.28872 15.2163 9.34595C15.5959 9.47908 15.7888 9.91135 15.6509 10.2893L13.3882 16.4856C13.252 16.8585 12.8421 17.0637 12.4673 16.9329C12.2323 16.8507 12.068 16.6595 12.0083 16.4368L11.3862 14.1204C11.3199 13.8719 11.1257 13.6783 10.8774 13.6116L8.56201 12.9846C8.33954 12.9244 8.14944 12.7587 8.06787 12.5237C7.93794 12.1487 8.14308 11.7392 8.51611 11.6038L14.731 9.34888Z",fill:"currentColor"}),_.createElement("path",{d:"M14.731 9.34888C14.8822 9.29395 15.053 9.28872 15.2163 9.34595C15.5959 9.47908 15.7888 9.91135 15.6509 10.2893L13.3882 16.4856C13.252 16.8585 12.8421 17.0637 12.4673 16.9329C12.2323 16.8507 12.068 16.6595 12.0083 16.4368L11.3862 14.1204C11.3199 13.8719 11.1257 13.6783 10.8774 13.6116L8.56201 12.9846C8.33954 12.9244 8.14944 12.7587 8.06787 12.5237C7.93794 12.1487 8.14308 11.7392 8.51611 11.6038L14.731 9.34888Z",fill:"currentColor"}))),_.createElement("defs",null,_.createElement("filter",{id:"filter0_d_151_34",x:-12.693,y:-7.27227,width:49.1101,height:49.1109,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},_.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),_.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),_.createElement("feOffset",{dy:4.14436}),_.createElement("feGaussianBlur",{stdDeviation:10.3609}),_.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),_.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),_.createElement("feBlend",{mode:"overlay",in2:"BackgroundImageFix",result:"effect1_dropShadow_151_34"}),_.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_151_34",result:"shape"})),_.createElement("clipPath",{id:"clip0_151_34"},_.createElement("rect",{width:25,height:25,fill:"white"})))),$Ke=Object.freeze(Object.defineProperty({__proto__:null,default:ZO},Symbol.toStringTag,{value:"Module"})),Ave=({as:t=Ao})=>r.jsx(t,{to:"/atlas",external:!0,onClick:()=>{B.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:"atlas"}),B.logEventWithStatsig("Sidebar Click Atlas","chatgpt_sidebar_click_atlas",{gizmo_id:"atlas"})},icon:ZO,label:r.jsx(j,{id:"n0YPrC",defaultMessage:"Atlas"})}),Ive=R(()=>P(()=>import("./kux43ylsu8hzp3nl.js"),__vite__mapDeps([150,1])),{loading:t=>F(t)});function jve(){"use forget";const t=W.c(1),e=V(),n=ve(e,"733205176"),s=ve(e,"1767304360");if(!(n&&s))return null;let a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(Nve,{}),t[0]=a):a=t[0],a}function Nve(){const{scheduledAutomations:t}=xce({enabled:!0,staleTimeMs:1/0}),e=ne(),n=Vn(),s=GG();return t.length>0?r.jsx(Ao,{icon:Ive,"data-testid":"schedule-sidebar-button",to:s,active:n.pathname===s,label:e.formatMessage({id:"sidebar.schedulesItem",defaultMessage:"Schedules"})}):null}function Pve(t){switch(t){case Zr.PRIMARY:return"primary";case Zr.SECONDARY:return"secondary";case Zr.COPY:return"primary";case Zr.DROPDOWN:return"primary"}return"primary"}function xw(t,e){const n={beacon_id:t.beacon_id,beacon_name:t.beacon_name,beacon_type:"container"};if(e==="show"){B.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",n);return}B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",n)}const KO=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10ZM13.333 11.418L13.4678 11.4316C13.7705 11.4938 13.9979 11.7619 13.998 12.083C13.998 12.4042 13.7706 12.6722 13.4678 12.7344L13.333 12.748H10.833C10.4659 12.7479 10.168 12.4502 10.168 12.083C10.1681 11.716 10.466 11.4181 10.833 11.418H13.333ZM7.65332 12.4258C7.46427 12.7404 7.05603 12.8422 6.74121 12.6533C6.42642 12.4644 6.32391 12.0561 6.5127 11.7412L7.65332 12.4258ZM8.90332 9.6582C9.02956 9.86872 9.02956 10.1313 8.90332 10.3418L7.65332 12.4258L7.08301 12.083L6.5127 11.7412L7.55664 10L6.5127 8.25879L7.08301 7.91699L7.65332 7.57422L8.90332 9.6582ZM6.74121 7.34668C7.05603 7.15779 7.46427 7.25955 7.65332 7.57422L6.5127 8.25879C6.32391 7.94392 6.42642 7.53563 6.74121 7.34668ZM17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10Z"})),VKe=Object.freeze(Object.defineProperty({__proto__:null,default:KO},Symbol.toStringTag,{value:"Module"})),xf=(t,e)=>{var i;if(!t)return{conversationId:void 0,messageId:null};const n=xt(e,t),s=mt(n.id),o=he.getLastAssistantMessage(s),a=n.serverId$();return a?{conversationId:a,messageId:(i=o==null?void 0:o.id)!=null?i:null}:{conversationId:void 0,messageId:null}};function y5(t){"use forget";const e=W.c(2);let n;return e[0]!==t?(n={mutationFn:s=>{var i;const{conversationId:o,messageId:a}=(i=t==null?void 0:t())!=null?i:{conversationId:void 0,messageId:null};return ge.safePost("/beacons/event",{requestBody:{beacon_id:s,event_type:V3.VIEW,conversation_id:o,message_id:a}})}},e[0]=t,e[1]=n):n=e[1],qt(n)}function QO(t){"use forget";const e=W.c(2);let n;return e[0]!==t?(n={mutationFn:s=>{var c;const{beaconId:o,eventCtaId:a}=s,{conversationId:i,messageId:l}=(c=t==null?void 0:t())!=null?c:{conversationId:void 0,messageId:null};return ge.safePost("/beacons/event",{requestBody:{beacon_id:o,event_type:V3.CLICK,event_cta_id:a,conversation_id:i,message_id:l}})}},e[0]=t,e[1]=n):n=e[1],qt(n)}function v5(t){"use forget";const e=W.c(2);let n;return e[0]!==t?(n={mutationFn:s=>{var i;const{conversationId:o,messageId:a}=(i=t==null?void 0:t())!=null?i:{conversationId:void 0,messageId:null};return ge.safePost("/beacons/event",{requestBody:{beacon_id:s,event_type:V3.DISMISS,conversation_id:o,message_id:a}})}},e[0]=t,e[1]=n):n=e[1],qt(n)}const Rve=t=>{"use forget";const e=W.c(3),{as:n}=t,s=n===void 0?Ao:n,o=V(),a=WG(o),i=jre();if(!a||i==="DISABLED")return null;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(j,{id:"EFFUeE",defaultMessage:"Codex"}),e[0]=l):l=e[0];let c;return e[1]!==s?(c=r.jsx(Lve,{children:r.jsx(s,{to:"/codex",external:!0,onClick:Fve,icon:KO,label:l})}),e[1]=s,e[2]=c):c=e[2],c};function Lve(t){"use forget";const e=W.c(4),{children:n}=t,s=V();if(db(s)){let i;return e[0]!==n?(i=r.jsx(Ove,{children:n}),e[0]=n,e[1]=i):i=e[1],i}let a;return e[2]!==n?(a=r.jsx(Dve,{children:n}),e[2]=n,e[3]=a):a=e[3],a}function Ove(t){"use forget";const e=W.c(12),{children:n}=t,s=Xq(),o=y5(),a=v5(),i=(s==null?void 0:s.ui_info.id)===i1;let l,c;e[0]!==s||e[1]!==o||e[2]!==i?(l=()=>{!i||!s||(xw(s,"show"),o.mutate(s.beacon_id))},c=[s,o,i],e[0]=s,e[1]=o,e[2]=i,e[3]=l,e[4]=c):(l=e[3],c=e[4]),_.useEffect(l,c);let d;e[5]!==s||e[6]!==a?(d=()=>{s&&(xw(s,"dismiss"),a.mutate(s.beacon_id),hi.dismiss())},e[5]=s,e[6]=a,e[7]=d):d=e[7];const u=d;let f;return e[8]!==n||e[9]!==u||e[10]!==i?(f=r.jsx(JO,{show:i,onDismiss:u,children:n}),e[8]=n,e[9]=u,e[10]=i,e[11]=f):f=e[11],f}function Dve(t){"use forget";const e=W.c(6),{children:n}=t,s=V(),o=Ene(),a=!o.isLoading&&o.eligible;let i;e[0]!==s?(i=()=>ot(s,i1),e[0]=s,e[1]=i):i=e[1];let l;return e[2]!==n||e[3]!==a||e[4]!==i?(l=r.jsx(JO,{show:a,onDismiss:i,children:n}),e[2]=n,e[3]=a,e[4]=i,e[5]=l):l=e[5],l}function JO(t){"use forget";const e=W.c(9),{children:n,onDismiss:s,show:o}=t,a=ne();if(!o)return n;let i;e[0]!==a?(i=a.formatMessage({id:"wham.sidebarListItem.nuxTooltip.title",defaultMessage:"Software engineering agent"}),e[0]=a,e[1]=i):i=e[1];let l;e[2]!==a?(l=a.formatMessage({id:"wham.whamSidebarListItem.writeInCodebase",defaultMessage:"Answers questions, runs code, and drafts PRs."}),e[2]=a,e[3]=l):l=e[3];let c;return e[4]!==n||e[5]!==s||e[6]!==i||e[7]!==l?(c=r.jsx(Vd,{show:!0,side:"right",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",childrenWrapperClassName:"!w-full",announcementKey:i1,title:i,description:l,onDismiss:s,children:n}),e[4]=n,e[5]=s,e[6]=i,e[7]=l,e[8]=c):c=e[8],c}function Fve(){B.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:"codex"}),B.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_codex",{gizmo_id:"codex"})}const HKe=t=>{"use forget";var b,C;const e=W.c(27),{as:n,ptnSidebarProps:s}=t,o=V();let a,i;e[0]!==o?(a=st(o),i=a==null?void 0:a.hasPaidSubscription(),e[0]=o,e[1]=a,e[2]=i):(a=e[1],i=e[2]);const l=i;let c;e[3]!==o?(c=!hn()&&zG(o),e[3]=o,e[4]=c):c=e[4];const d=c,u=!!(s!=null&&s.isPtnEnabled&&((b=s==null?void 0:s.isPtnLoading)!=null&&b||((C=s==null?void 0:s.ptnSnorlax)!=null?C:null)!=null));if(!a)return null;let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=!1,e[5]=f):f=e[5];let m;e[6]!==n||e[7]!==l?(m=l&&r.jsx(Rve,{as:n}),e[6]=n,e[7]=l,e[8]=m):m=e[8];let g;e[9]!==n||e[10]!==d?(g=d&&r.jsx(Ave,{as:n}),e[9]=n,e[10]=d,e[11]=g):g=e[11];let p,h;e[12]!==n?(p=r.jsx(Mve,{as:n}),h=!1,e[12]=n,e[13]=p,e[14]=h):(p=e[13],h=e[14]);let x;e[15]!==(s==null?void 0:s.currentGizmoId)||e[16]!==(s==null?void 0:s.isPtnLoading)||e[17]!==(s==null?void 0:s.ptnSnorlax)||e[18]!==u?(x=!1,e[15]=s==null?void 0:s.currentGizmoId,e[16]=s==null?void 0:s.isPtnLoading,e[17]=s==null?void 0:s.ptnSnorlax,e[18]=u,e[19]=x):x=e[19];let v;e[20]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(jve,{}),e[20]=v):v=e[20];let y;return e[21]!==m||e[22]!==g||e[23]!==p||e[24]!==h||e[25]!==x?(y=r.jsxs(r.Fragment,{children:[f,m,g,p,h,x,v]}),e[21]=m,e[22]=g,e[23]=p,e[24]=h,e[25]=x,e[26]=y):y=e[26],y},Bve="3578245547",Uve="2904126195",$ve="persist-files-to-library",Vve="show-recent-files-dropdown",Hve="double-write-files-to-library";function XO(t,e=!1){ze(t,Uve,{disableExposureLog:e});const n=Ps(t,Bve,{disableExposureLog:e});return{persistFilesToLibrary:n.get($ve,!1),showRecentFilesDropdown:n.get(Vve,!1),doubleWriteFilesToLibrary:n.get(Hve,!1)}}var ug={},yw;function Gve(){return yw||(yw=1,ug.__esModule=!0,ug.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var s=t.name||"",o=(t.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return n.some(function(i){var l=i.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):o===l})}return!0}),ug}var Wve=Gve();const B0=Zn(Wve);function vw(t){return Yve(t)||qve(t)||tD(t)||zve()}function zve(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yve(t){if(Array.isArray(t))return ey(t)}function bw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function Cw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bw(Object(n),!0).forEach(function(s){eD(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function eD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yf(t,e){return Qve(t)||Kve(t,e)||tD(t,e)||Zve()}function Zve(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tD(t,e){if(t){if(typeof t=="string")return ey(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ey(t,e)}}function ey(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function Kve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s=[],o=!0,a=!1,i,l;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(s.push(i.value),!(e&&s.length===e));o=!0);}catch(c){a=!0,l=c}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw l}}return s}}function Qve(t){if(Array.isArray(t))return t}var Jve=typeof B0=="function"?B0:B0.default,Xve="file-invalid-type",nD="file-too-large",ebe="file-too-small",sD="too-many-files",GKe={FileTooLarge:nD,TooManyFiles:sD},tbe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),s=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:Xve,message:"File type must be ".concat(s)}},Sw=function(e){return{code:nD,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},ww=function(e){return{code:ebe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},WKe={code:sD,message:"Too many files"};function nbe(t,e){var n=t.type==="application/x-moz-file"||Jve(t,e);return[n,n?null:tbe(e)]}function sbe(t,e,n){if(Zi(t.size))if(Zi(e)&&Zi(n)){if(t.size>n)return[!1,Sw(n)];if(t.size<e)return[!1,ww(e)]}else{if(Zi(e)&&t.size<e)return[!1,ww(e)];if(Zi(n)&&t.size>n)return[!1,Sw(n)]}return[!0,null]}function Zi(t){return t!=null}function zKe(t){var e=t.files,n=t.accept,s=t.minSize,o=t.maxSize,a=t.multiple,i=t.maxFiles,l=t.validator;return!a&&e.length>1||a&&i>=1&&e.length>i?!1:e.every(function(c){var d=nbe(c,n),u=yf(d,1),f=u[0],m=sbe(c,s,o),g=yf(m,1),p=g[0],h=l?l(c):null;return f&&p&&!h})}function kw(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function qKe(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function YKe(t){t.preventDefault()}function obe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function abe(t){return t.indexOf("Edge/")!==-1}function ZKe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return obe(t)||abe(t)}function KKe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return e.some(function(l){return!kw(s)&&l&&l.apply(void 0,[s].concat(a)),kw(s)})}}function QKe(){return"showOpenFilePicker"in window}function JKe(t){if(Zi(t)){var e=Object.entries(t).filter(function(n){var s=yf(n,2),o=s[0],a=s[1],i=!0;return oD(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(a)||!a.every(aD))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(n,s){var o=yf(s,2),a=o[0],i=o[1];return Cw(Cw({},n),{},eD({},a,i))},{});return[{description:"Files",accept:e}]}return t}function XKe(t){if(Zi(t))return Object.entries(t).reduce(function(e,n){var s=yf(n,2),o=s[0],a=s[1];return[].concat(vw(e),[o],vw(a))},[]).filter(function(e){return oD(e)||aD(e)}).join(",")}function eQe(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function tQe(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function oD(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function aD(t){return/^.*\.[\w]+$/.test(t)}const nQe=({className:t})=>r.jsxs(Ts,{width:"132",height:"108",viewBox:"0 0 132 108",fill:"none",className:t,children:[r.jsx("g",{clipPath:"url(#clip0_3605_64419)",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.2025 29.3514C10.778 33.2165 8.51524 37.1357 11.8281 49.4995L13.4846 55.6814C16.7975 68.0453 20.7166 70.308 35.1411 66.443L43.3837 64.2344C57.8082 60.3694 60.0709 56.4502 56.758 44.0864L55.1016 37.9044C51.7887 25.5406 47.8695 23.2778 33.445 27.1428L29.3237 28.2471L25.2025 29.3514ZM18.1944 42.7244C18.8572 41.5764 20.325 41.1831 21.4729 41.8459L27.3517 45.24C28.4996 45.9027 28.8929 47.3706 28.2301 48.5185L24.836 54.3972C24.1733 55.5451 22.7054 55.9384 21.5575 55.2757C20.4096 54.613 20.0163 53.1451 20.6791 51.9972L22.8732 48.1969L19.0729 46.0028C17.925 45.3401 17.5317 43.8723 18.1944 42.7244ZM29.4091 56.3843C29.066 55.104 29.8258 53.7879 31.1062 53.4449L40.3791 50.9602C41.6594 50.6172 42.9754 51.377 43.3184 52.6573C43.6615 53.9376 42.9017 55.2536 41.6214 55.5967L32.3485 58.0813C31.0682 58.4244 29.7522 57.6646 29.4091 56.3843Z",fill:"#AFC1FF"})}),r.jsx("g",{clipPath:"url(#clip1_3605_64419)",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.8124 13.4036C81.0973 11.8722 78.5673 13.2649 77.0144 19.0603L68.7322 49.97C67.1793 55.7656 68.5935 58.2151 74.4696 59.7895L97.4908 65.958C103.367 67.5326 105.816 66.1184 107.406 60.1848L115.393 30.379C115.536 29.8456 115.217 29.2959 114.681 29.16C113.478 28.8544 112.435 28.6195 111.542 28.4183C106.243 27.2253 106.22 27.2201 109.449 20.7159C109.73 20.1507 109.426 19.4638 108.816 19.3004L86.8124 13.4036ZM87.2582 28.4311C86.234 28.1567 85.1812 28.7645 84.9067 29.7888C84.6323 30.813 85.2401 31.8658 86.2644 32.1403L101.101 36.1158C102.125 36.3902 103.178 35.7824 103.453 34.7581C103.727 33.7339 103.119 32.681 102.095 32.4066L87.2582 28.4311ZM82.9189 37.2074C83.1934 36.1831 84.2462 35.5753 85.2704 35.8497L100.107 39.8252C101.131 40.0996 101.739 41.1524 101.465 42.1767C101.19 43.201 100.137 43.8088 99.1132 43.5343L84.2766 39.5589C83.2523 39.2844 82.6445 38.2316 82.9189 37.2074ZM83.2826 43.2683C82.2584 42.9939 81.2056 43.6017 80.9311 44.626C80.6567 45.6502 81.2645 46.703 82.2888 46.9775L89.7071 48.9652C90.7313 49.2396 91.7841 48.6318 92.0586 47.6076C92.333 46.5833 91.7252 45.5305 90.7009 45.256L83.2826 43.2683Z",fill:"#7989FF"})}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.4004 71.8426C40.4004 57.2141 44.0575 53.5569 61.1242 53.5569H66.0004H70.8766C87.9432 53.5569 91.6004 57.2141 91.6004 71.8426V79.1569C91.6004 93.7855 87.9432 97.4426 70.8766 97.4426H61.1242C44.0575 97.4426 40.4004 93.7855 40.4004 79.1569V71.8426ZM78.8002 67.4995C78.8002 70.1504 76.6512 72.2995 74.0002 72.2995C71.3492 72.2995 69.2002 70.1504 69.2002 67.4995C69.2002 64.8485 71.3492 62.6995 74.0002 62.6995C76.6512 62.6995 78.8002 64.8485 78.8002 67.4995ZM60.7204 70.8597C60.2672 70.2553 59.5559 69.8997 58.8004 69.8997C58.045 69.8997 57.3337 70.2553 56.8804 70.8597L47.2804 83.6597C46.4851 84.72 46.7 86.2244 47.7604 87.0197C48.8208 87.8149 50.3251 87.6 51.1204 86.5397L58.8004 76.2997L66.4804 86.5397C66.8979 87.0962 67.5363 87.4443 68.2303 87.4936C68.9243 87.5429 69.6055 87.2887 70.0975 86.7967L74.8004 82.0938L79.5034 86.7967C80.4406 87.734 81.9602 87.734 82.8975 86.7967C83.8347 85.8595 83.8347 84.3399 82.8975 83.4026L76.4975 77.0026C75.5602 76.0653 74.0406 76.0653 73.1034 77.0026L68.6601 81.4459L60.7204 70.8597Z",fill:"#3C46FF"}),r.jsxs("defs",{children:[r.jsx("clipPath",{id:"clip0_3605_64419",children:r.jsx("rect",{width:"56",height:"56",fill:"white",transform:"translate(0 26.9939) rotate(-15)"})}),r.jsx("clipPath",{id:"clip1_3605_64419",children:r.jsx("rect",{width:"64",height:"64",fill:"white",transform:"translate(69.5645 0.5) rotate(15)"})})]})]}),sQe=({className:t})=>r.jsxs(Ts,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#10A37F"}),r.jsx("path",{d:"M15.5 10.5H12.1667C11.2462 10.5 10.5 11.2462 10.5 12.1667V13.5V18M15.5 10.5H23.8333C24.7538 10.5 25.5 11.2462 25.5 12.1667V13.5V18M15.5 10.5V25.5M15.5 25.5H18H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V18M15.5 25.5H12.1667C11.2462 25.5 10.5 24.7538 10.5 23.8333V18M10.5 18H25.5",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),oQe=({className:t})=>r.jsxs(Ts,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF5588"}),r.jsx("path",{d:"M19.6663 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V14.6666L19.6663 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M19.667 9.66663V14.6666H24.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M21.3337 18.8334H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M21.3337 22.1666H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M16.3337 15.5H15.5003H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),aQe=({className:t})=>r.jsxs(Ts,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#0088FF"}),r.jsx("path",{d:"M18.833 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V15.5L18.833 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M18.833 9.66663V15.5H24.6663",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),rQe=({className:t})=>r.jsxs(Ts,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF6E3C"}),r.jsx("path",{d:"M21.333 23L26.333 18L21.333 13",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M14.667 13L9.66699 18L14.667 23",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),rbe="webp",ibe=222,lbe=160,cbe="srgb",dbe=3,ube="uchar",fbe=72,mbe=!1,gbe=8,pbe=!1,hbe=!1,_be="{{.assetPrefix}}/assets/example_bg_1-grdr084h.webp",xbe={format:rbe,width:ibe,height:lbe,space:cbe,channels:dbe,depth:ube,density:fbe,isProgressive:mbe,paletteBitDepth:gbe,hasProfile:pbe,hasAlpha:hbe,src:_be},ybe="webp",vbe=222,bbe=160,Cbe="srgb",Sbe=3,wbe="uchar",kbe=72,Ebe=!1,Tbe=8,Mbe=!1,Abe=!1,Ibe="{{.assetPrefix}}/assets/example_bg_2-bh3fby76.webp",jbe={format:ybe,width:vbe,height:bbe,space:Cbe,channels:Sbe,depth:wbe,density:kbe,isProgressive:Ebe,paletteBitDepth:Tbe,hasProfile:Mbe,hasAlpha:Abe,src:Ibe},Nbe="webp",Pbe=222,Rbe=160,Lbe="srgb",Obe=3,Dbe="uchar",Fbe=72,Bbe=!1,Ube=8,$be=!1,Vbe=!1,Hbe="{{.assetPrefix}}/assets/example_bg_3-ogafarpd.webp",Gbe={format:Nbe,width:Pbe,height:Rbe,space:Lbe,channels:Obe,depth:Dbe,density:Fbe,isProgressive:Bbe,paletteBitDepth:Ube,hasProfile:$be,hasAlpha:Vbe,src:Hbe},Wbe=R(()=>P(()=>import("./gtzr61vfrillrfof.js"),__vite__mapDeps([323,1])),{loading:t=>F(t)}),zbe=R(()=>P(()=>import("./k6qwgpluf8n5kx7i.js"),__vite__mapDeps([51,1])),{loading:t=>F(t)}),qbe=R(()=>P(()=>import("./kjt68ctim5iwbxy7.js"),__vite__mapDeps([324,1])),{loading:t=>F(t)}),Ybe=R(()=>P(()=>import("./nzc19yp45z5gjstv.js"),__vite__mapDeps([49,1])),{loading:t=>F(t)}),Zbe=R(()=>P(()=>Promise.resolve().then(()=>$1),void 0),{loading:t=>F(t)});function Kbe({usage:t}){const e={work:{icon:Wbe,color:"#35AE47"},school:{icon:Zbe,color:"#E937D1"},personalTasks:{icon:zbe,color:"#EA8444"},funAndEntertainment:{icon:qbe,color:"#6C71FF"},justCurious:{icon:Ybe,color:"#FFCC00"}},n=e[t].icon,s=e[t].color;return r.jsx(n,{className:"icon",style:{color:s}})}function iQe({clientThreadId:t}){const e=ne(),n=gb({clientThreadId:t});return _.useEffect(()=>{qe.logEvent("chatgpt_convo_onboarding_usage_chips_shown")},[]),r.jsx(fn,{mode:"wait",children:r.jsx(Xe.div,{className:"-mx-6 mt-2 flex flex-wrap gap-2 px-6",initial:{opacity:0},animate:{opacity:1,transition:{delay:.2,ease:"easeInOut"}},exit:{opacity:0,transition:{ease:"easeInOut"}},children:["school","work","personalTasks","funAndEntertainment","justCurious"].map(s=>r.jsxs("button",{className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary inline-flex h-[42px] items-center justify-start gap-2 rounded-[25px] border px-4 py-3",onClick:o=>{n({sourceEvent:o,stepPrompt:e.formatMessage(rd["".concat(s,"Prompt")]),messageMetadata:{onboarding:{main_usages:[{usage:s}]},is_starter_prompt:!0,suggestion_type:Je.Starter}}),qe.logEvent("chatgpt_convo_onboarding_usage_chip_clicked",null,{usage:s})},children:[r.jsx("div",{"data-svg-wrapper":!0,className:"relative",children:r.jsx(Kbe,{usage:s})}),r.jsx("div",{className:"font-['SF Pro'] text-token-text-primary text-[13px] leading-[18px] font-normal opacity-90",children:e.formatMessage(rd[s])})]},s))})})}function lQe({clientThreadId:t,examples:e}){const n=gb({clientThreadId:t}),s=[xbe,jbe,Gbe],o=ne();return _.useEffect(()=>{qe.logEvent("chatgpt_convo_onboarding_examples_shown")},[]),r.jsx(fn,{mode:"wait",children:r.jsxs("div",{children:[r.jsx(Xe.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeInOut"},className:"text-token-text-primary text-base",children:o.formatMessage(rd.tryAnExample)}),r.jsx("ul",{className:"-mx-6 flex list-none flex-nowrap gap-6 overflow-auto px-6 py-4",children:e.map((a,i)=>r.jsx(Xe.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:(i+1)*.2,duration:.3},children:r.jsxs("button",{className:"bg-token-main-surface-primary outline-token-border-xlight hover:shadow-token-border-default inline-flex h-60 w-[222px] flex-col items-center justify-start overflow-hidden rounded-2xl outline transition-all duration-300 hover:shadow-lg",onClick:l=>{n({sourceEvent:l,stepPrompt:a.example,messageMetadata:{onboarding:{triggered_tools:[a.feature]},is_starter_prompt:!0,suggestion_type:Je.Starter}}),qe.logEvent("chatgpt_convo_onboarding_example_clicked",null,{tool:a.feature})},children:[r.jsx("img",{src:s[i%s.length].src,className:"h-[160px] w-full object-cover",alt:o.formatMessage({id:"chatgpt.new-onboarding.example-prompt",defaultMessage:"Example prompt"})}),r.jsx("div",{className:"inline-flex h-20 w-full gap-1 p-4",children:r.jsx("div",{className:"text-token-text-primary line-clamp-2 shrink grow basis-0 text-start text-base leading-normal",title:a.title,children:a.title})})]})},a.feature))})]})})}function Qbe({clientThreadId:t,children:e}){const{isEligible:n,markAsViewed:s}=Kj(t),o=ne();return _.useEffect(()=>{n&&Ln.showAnnouncementTooltipExclusively(Oe.hasSeenFilePickerNuxTooltip,!0)},[n]),n?r.jsx(Vd,{announcementKey:Oe.hasSeenFilePickerNuxTooltip,show:!0,side:"top",align:"start",theme:"bright",dismissOnOutsideClick:!0,badge:"none",title:o.formatMessage(rd.tryUploadingAFile),description:o.formatMessage(rd.uploadFileExample),onDismiss:s,sideOffset:0,children:e}):e}var di=(t=>(t.ModelNotSupported="modelNotSupported",t.HasReachedMaxFiles="hasReachedMaxFiles",t.RateLimitReached="rateLimitReached",t))(di||{}),b5=(t=>(t.General="general",t.ModelNotSupported="modelNotSupported",t.GizmoNotSupported="gizmoNotSupported",t.HasAttachedFiles="hasAttachedFiles",t))(b5||{});function go(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function rD(t,e=[]){let n=[];function s(a,i){const l=_.createContext(i),c=n.length;n=[...n,i];const d=f=>{var y;const v=f,{scope:m,children:g}=v,p=we(v,["scope","children"]),h=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,x=_.useMemo(()=>p,Object.values(p));return r.jsx(h.Provider,{value:x,children:g})};d.displayName=a+"Provider";function u(f,m){var h;const g=((h=m==null?void 0:m[t])==null?void 0:h[c])||l,p=_.useContext(g);if(p)return p;if(i!==void 0)return i;throw new Error("`".concat(f,"` must be used within `").concat(a,"`"))}return[d,u]}const o=()=>{const a=n.map(i=>_.createContext(i));return function(l){const c=(l==null?void 0:l[t])||a;return _.useMemo(()=>({["__scope".concat(t)]:U(w({},l),{[t]:c})}),[l,c])}};return o.scopeName=t,[s,Jbe(o,...e)]}function Jbe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const f=c(a)["__scope".concat(d)];return w(w({},l),f)},{});return _.useMemo(()=>({["__scope".concat(e.scopeName)]:i}),[i])}};return n.scopeName=e.scopeName,n}var yl=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},Xbe=O$[" useInsertionEffect ".trim().toString()]||yl;function e5e({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[o,a,i]=t5e({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:o;{const u=_.useRef(t!==void 0);_.useEffect(()=>{const f=u.current;if(f!==l){const m=f?"controlled":"uncontrolled",g=l?"controlled":"uncontrolled";console.warn("".concat(s," is changing from ").concat(m," to ").concat(g,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}u.current=l},[l,s])}const d=_.useCallback(u=>{var f;if(l){const m=n5e(u)?u(t):u;m!==t&&((f=i.current)==null||f.call(i,m))}else a(u)},[l,t,a,i]);return[c,d]}function t5e({defaultProp:t,onChange:e}){const[n,s]=_.useState(t),o=_.useRef(n),a=_.useRef(e);return Xbe(()=>{a.current=e},[e]),_.useEffect(()=>{var i;o.current!==n&&((i=a.current)==null||i.call(a,n),o.current=n)},[n,o]),[n,s,a]}function n5e(t){return typeof t=="function"}var s5e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gl=s5e.reduce((t,e)=>{const n=qG("Primitive.".concat(e)),s=_.forwardRef((o,a)=>{const d=o,{asChild:i}=d,l=we(d,["asChild"]),c=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,U(w({},l),{ref:a}))});return s.displayName="Primitive.".concat(e),U(w({},t),{[e]:s})},{});function o5e(t,e){t&&sr.flushSync(()=>t.dispatchEvent(e))}var a5e="Arrow",iD=_.forwardRef((t,e)=>{const i=t,{children:n,width:s=10,height:o=5}=i,a=we(i,["children","width","height"]);return r.jsx(Gl.svg,U(w({},a),{ref:e,width:s,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})}))});iD.displayName=a5e;var r5e=iD;function P1(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function i5e(t){const[e,n]=_.useState(void 0);return yl(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=t.offsetWidth,l=t.offsetHeight;n({width:i,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var C5="Popper",[lD,cD]=rD(C5),[l5e,dD]=lD(C5),uD=t=>{const{__scopePopper:e,children:n}=t,[s,o]=_.useState(null);return r.jsx(l5e,{scope:e,anchor:s,onAnchorChange:o,children:n})};uD.displayName=C5;var fD="PopperAnchor",mD=_.forwardRef((t,e)=>{const c=t,{__scopePopper:n,virtualRef:s}=c,o=we(c,["__scopePopper","virtualRef"]),a=dD(fD,n),i=_.useRef(null),l=Ad(e,i);return _.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(Gl.div,U(w({},o),{ref:l}))});mD.displayName=fD;var S5="PopperContent",[c5e,d5e]=lD(S5),gD=_.forwardRef((t,e)=>{var ee,ie,de,me,xe,pe,Me,Ce;const X=t,{__scopePopper:n,side:s="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:p}=X,h=we(X,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),x=dD(S5,n),[v,y]=_.useState(null),b=Ad(e,ke=>y(ke)),[C,S]=_.useState(null),E=i5e(C),k=(ee=E==null?void 0:E.width)!=null?ee:0,T=(ie=E==null?void 0:E.height)!=null?ie:0,M=s+(a!=="center"?"-"+a:""),A=typeof u=="number"?u:w({top:0,right:0,bottom:0,left:0},u),I=Array.isArray(d)?d:[d],N=I.length>0,L={padding:A,boundary:I.filter(f5e),altBoundary:N},{refs:O,floatingStyles:D,placement:$,isPositioned:H,middlewareData:G}=YG({strategy:"fixed",placement:M,whileElementsMounted:(...ke)=>nW(...ke,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[ZG({mainAxis:o+T,alignmentAxis:i}),c&&KG(w({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?tW():void 0},L)),c&&QG(w({},L)),JG(U(w({},L),{apply:({elements:ke,rects:Le,availableWidth:De,availableHeight:le})=>{const{width:oe,height:Ee}=Le.reference,be=ke.floating.style;be.setProperty("--radix-popper-available-width","".concat(De,"px")),be.setProperty("--radix-popper-available-height","".concat(le,"px")),be.setProperty("--radix-popper-anchor-width","".concat(oe,"px")),be.setProperty("--radix-popper-anchor-height","".concat(Ee,"px"))}})),C&&XG({element:C,padding:l}),m5e({arrowWidth:k,arrowHeight:T}),m&&eW(w({strategy:"referenceHidden"},L))]}),[Z,Q]=_D($),q=P1(p);yl(()=>{H&&(q==null||q())},[H,q]);const Y=(de=G.arrow)==null?void 0:de.x,te=(me=G.arrow)==null?void 0:me.y,ae=((xe=G.arrow)==null?void 0:xe.centerOffset)!==0,[se,ce]=_.useState();return yl(()=>{v&&ce(window.getComputedStyle(v).zIndex)},[v]),r.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:w(U(w({},D),{transform:H?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(pe=G.transformOrigin)==null?void 0:pe.x,(Me=G.transformOrigin)==null?void 0:Me.y].join(" ")}),((Ce=G.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:r.jsx(c5e,{scope:n,placedSide:Z,onArrowChange:S,arrowX:Y,arrowY:te,shouldHideArrow:ae,children:r.jsx(Gl.div,U(w({"data-side":Z,"data-align":Q},h),{ref:b,style:U(w({},h.style),{animation:H?void 0:"none"})}))})})});gD.displayName=S5;var pD="PopperArrow",u5e={top:"bottom",right:"left",bottom:"top",left:"right"},hD=_.forwardRef(function(e,n){const l=e,{__scopePopper:s}=l,o=we(l,["__scopePopper"]),a=d5e(pD,s),i=u5e[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(r5e,U(w({},o),{ref:n,style:U(w({},o.style),{display:"block"})}))})});hD.displayName=pD;function f5e(t){return t!==null}var m5e=t=>({name:"transformOrigin",options:t,fn(e){var x,v,y,b,C;const{placement:n,rects:s,middlewareData:o}=e,i=((x=o.arrow)==null?void 0:x.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[d,u]=_D(n),f={start:"0%",center:"50%",end:"100%"}[u],m=((y=(v=o.arrow)==null?void 0:v.x)!=null?y:0)+l/2,g=((C=(b=o.arrow)==null?void 0:b.y)!=null?C:0)+c/2;let p="",h="";return d==="bottom"?(p=i?f:"".concat(m,"px"),h="".concat(-c,"px")):d==="top"?(p=i?f:"".concat(m,"px"),h="".concat(s.floating.height+c,"px")):d==="right"?(p="".concat(-c,"px"),h=i?f:"".concat(g,"px")):d==="left"&&(p="".concat(s.floating.width+c,"px"),h=i?f:"".concat(g,"px")),{data:{x:p,y:h}}}});function _D(t){const[e,n="center"]=t.split("-");return[e,n]}var g5e=uD,p5e=mD,h5e=gD,_5e=hD,x5e="Portal",xD=_.forwardRef((t,e)=>{var c;const l=t,{container:n}=l,s=we(l,["container"]),[o,a]=_.useState(!1);yl(()=>a(!0),[]);const i=n||o&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return i?$E.createPortal(r.jsx(Gl.div,U(w({},s),{ref:e})),i):null});xD.displayName=x5e;function y5e(t,e){return _.useReducer((n,s)=>{const o=e[n][s];return o!=null?o:n},t)}var w5=t=>{const{present:e,children:n}=t,s=v5e(e),o=typeof n=="function"?n({present:s.isPresent}):_.Children.only(n),a=Ad(s.ref,b5e(o));return typeof n=="function"||s.isPresent?_.cloneElement(o,{ref:a}):null};w5.displayName="Presence";function v5e(t){const[e,n]=_.useState(),s=_.useRef(null),o=_.useRef(t),a=_.useRef("none"),i=t?"mounted":"unmounted",[l,c]=y5e(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const d=fg(s.current);a.current=l==="mounted"?d:"none"},[l]),yl(()=>{const d=s.current,u=o.current;if(u!==t){const m=a.current,g=fg(d);t?c("MOUNT"):g==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,c]),yl(()=>{var d;if(e){let u;const f=(d=e.ownerDocument.defaultView)!=null?d:window,m=p=>{const x=fg(s.current).includes(p.animationName);if(p.target===e&&x&&(c("ANIMATION_END"),!o.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",u=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},g=p=>{p.target===e&&(a.current=fg(s.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(u),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function fg(t){return(t==null?void 0:t.animationName)||"none"}function b5e(t){var s,o;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function C5e(t,e=globalThis==null?void 0:globalThis.document){const n=P1(t);_.useEffect(()=>{const s=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var S5e="DismissableLayer",ty="dismissableLayer.update",w5e="dismissableLayer.pointerDownOutside",k5e="dismissableLayer.focusOutside",Ew,yD=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vD=_.forwardRef((t,e)=>{var T;const k=t,{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i,onDismiss:l}=k,c=we(k,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),d=_.useContext(yD),[u,f]=_.useState(null),m=(T=u==null?void 0:u.ownerDocument)!=null?T:globalThis==null?void 0:globalThis.document,[,g]=_.useState({}),p=Ad(e,M=>f(M)),h=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=h.indexOf(x),y=u?h.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,C=y>=v,S=M5e(M=>{const A=M.target,I=[...d.branches].some(N=>N.contains(A));!C||I||(o==null||o(M),i==null||i(M),M.defaultPrevented||l==null||l())},m),E=A5e(M=>{const A=M.target;[...d.branches].some(N=>N.contains(A))||(a==null||a(M),i==null||i(M),M.defaultPrevented||l==null||l())},m);return C5e(M=>{y===d.layers.size-1&&(s==null||s(M),!M.defaultPrevented&&l&&(M.preventDefault(),l()))},m),_.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Ew=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Tw(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Ew)}},[u,m,n,d]),_.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Tw())},[u,d]),_.useEffect(()=>{const M=()=>g({});return document.addEventListener(ty,M),()=>document.removeEventListener(ty,M)},[]),r.jsx(Gl.div,U(w({},c),{ref:p,style:w({pointerEvents:b?C?"auto":"none":void 0},t.style),onFocusCapture:go(t.onFocusCapture,E.onFocusCapture),onBlurCapture:go(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:go(t.onPointerDownCapture,S.onPointerDownCapture)}))});vD.displayName=S5e;var E5e="DismissableLayerBranch",T5e=_.forwardRef((t,e)=>{const n=_.useContext(yD),s=_.useRef(null),o=Ad(e,s);return _.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),r.jsx(Gl.div,U(w({},t),{ref:o}))});T5e.displayName=E5e;function M5e(t,e=globalThis==null?void 0:globalThis.document){const n=P1(t),s=_.useRef(!1),o=_.useRef(()=>{});return _.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){bD(w5e,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=c,e.addEventListener("click",o.current,{once:!0})):c()}else e.removeEventListener("click",o.current);s.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function A5e(t,e=globalThis==null?void 0:globalThis.document){const n=P1(t),s=_.useRef(!1);return _.useEffect(()=>{const o=a=>{a.target&&!s.current&&bD(k5e,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Tw(){const t=new CustomEvent(ty);document.dispatchEvent(t)}function bD(t,e,n,{discrete:s}){const o=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),s?o5e(o,a):o.dispatchEvent(a)}var U0,R1="HoverCard",[CD]=rD(R1,[cD]),L1=cD(),[I5e,O1]=CD(R1),SD=t=>{const{__scopeHoverCard:e,children:n,open:s,defaultOpen:o,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=t,c=L1(e),d=_.useRef(0),u=_.useRef(0),f=_.useRef(!1),m=_.useRef(!1),[g,p]=e5e({prop:s,defaultProp:o!=null?o:!1,onChange:a,caller:R1}),h=_.useCallback(()=>{clearTimeout(u.current),d.current=window.setTimeout(()=>p(!0),i)},[i,p]),x=_.useCallback(()=>{clearTimeout(d.current),!f.current&&!m.current&&(u.current=window.setTimeout(()=>p(!1),l))},[l,p]),v=_.useCallback(()=>p(!1),[p]);return _.useEffect(()=>()=>{clearTimeout(d.current),clearTimeout(u.current)},[]),r.jsx(I5e,{scope:e,open:g,onOpenChange:p,onOpen:h,onClose:x,onDismiss:v,hasSelectionRef:f,isPointerDownOnContentRef:m,children:r.jsx(g5e,U(w({},c),{children:n}))})};SD.displayName=R1;var wD="HoverCardTrigger",kD=_.forwardRef((t,e)=>{const i=t,{__scopeHoverCard:n}=i,s=we(i,["__scopeHoverCard"]),o=O1(wD,n),a=L1(n);return r.jsx(p5e,U(w({asChild:!0},a),{children:r.jsx(Gl.a,U(w({"data-state":o.open?"open":"closed"},s),{ref:e,onPointerEnter:go(t.onPointerEnter,Vp(o.onOpen)),onPointerLeave:go(t.onPointerLeave,Vp(o.onClose)),onFocus:go(t.onFocus,o.onOpen),onBlur:go(t.onBlur,o.onClose),onTouchStart:go(t.onTouchStart,l=>l.preventDefault())}))}))});kD.displayName=wD;var k5="HoverCardPortal",[j5e,N5e]=CD(k5,{forceMount:void 0}),ED=t=>{const{__scopeHoverCard:e,forceMount:n,children:s,container:o}=t,a=O1(k5,e);return r.jsx(j5e,{scope:e,forceMount:n,children:r.jsx(w5,{present:n||a.open,children:r.jsx(xD,{asChild:!0,container:o,children:s})})})};ED.displayName=k5;var $p="HoverCardContent",TD=_.forwardRef((t,e)=>{const n=N5e($p,t.__scopeHoverCard),i=t,{forceMount:s=n.forceMount}=i,o=we(i,["forceMount"]),a=O1($p,t.__scopeHoverCard);return r.jsx(w5,{present:s||a.open,children:r.jsx(P5e,U(w({"data-state":a.open?"open":"closed"},o),{onPointerEnter:go(t.onPointerEnter,Vp(a.onOpen)),onPointerLeave:go(t.onPointerLeave,Vp(a.onClose)),ref:e}))})});TD.displayName=$p;var P5e=_.forwardRef((t,e)=>{const p=t,{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i}=p,l=we(p,["__scopeHoverCard","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),c=O1($p,n),d=L1(n),u=_.useRef(null),f=Ad(e,u),[m,g]=_.useState(!1);return _.useEffect(()=>{if(m){const h=document.body;return U0=h.style.userSelect||h.style.webkitUserSelect,h.style.userSelect="none",h.style.webkitUserSelect="none",()=>{h.style.userSelect=U0,h.style.webkitUserSelect=U0}}},[m]),_.useEffect(()=>{if(u.current){const h=()=>{g(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var v;((v=document.getSelection())==null?void 0:v.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",h),()=>{document.removeEventListener("pointerup",h),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),_.useEffect(()=>{u.current&&O5e(u.current).forEach(x=>x.setAttribute("tabindex","-1"))}),r.jsx(vD,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:go(a,h=>{h.preventDefault()}),onDismiss:c.onDismiss,children:r.jsx(h5e,U(w(w({},d),l),{onPointerDown:go(l.onPointerDown,h=>{h.currentTarget.contains(h.target)&&g(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:f,style:U(w({},l.style),{userSelect:m?"text":void 0,WebkitUserSelect:m?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"})}))})}),R5e="HoverCardArrow",L5e=_.forwardRef((t,e)=>{const a=t,{__scopeHoverCard:n}=a,s=we(a,["__scopeHoverCard"]),o=L1(n);return r.jsx(_5e,U(w(w({},o),s),{ref:e}))});L5e.displayName=R5e;function Vp(t){return e=>e.pointerType==="touch"?void 0:t()}function O5e(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}var D5e=SD,F5e=kD,B5e=ED,Mw=TD;const MD=({clientThreadId:t,rateLimitPopup:e,children:n,disabled:s,highlightTooltip:o=!1,disabledReason:a,currentModelName:i,label:l,secondaryLabel:c})=>{const d=ne(),u=Ve(t,he.getIsNewConversation),f=V(),m=st(f),g=y=>{var b;e!=null&&y&&B.logPopoverHover({type:"rate_limit",location:"file_upload",plan_type:(b=m==null?void 0:m.planType)!=null?b:"unknown"})},p=Bd(f,gt.signUpButtonText),{isEligible:h}=Kj(t),x=!!e,v=!s&&h;return x?r.jsxs(D5e,{openDelay:0,onOpenChange:g,children:[r.jsx(F5e,{asChild:!0,children:n}),r.jsx(B5e,{children:r.jsx(r8,{children:r.jsx(Mw,{role:"dialog","aria-labelledby":"rate-limit-popover-title",children:r.jsx(Rh,{$as:Mw,side:"bottom",sideOffset:6,align:"start",alignOffset:-6,className:"max-w-[300px]",children:r.jsx(U5e,{isNewConversation:u,rateLimitPopup:e,signUpButtonText:p})})})})})]}):v?r.jsx(Qbe,{clientThreadId:t,children:n}):r.jsx(pt,{label:!s&&l?l:D1(f,d,s,a,i),secondaryLabel:c,labelOrientation:"horizontal",className:"flex",contentClassName:o?void 0:"touch:hidden",open:o?!0:void 0,side:"bottom",children:n})};function D1(t,e,n,s,o){const a=st(t),i=a!=null,l=bp(t);return n?s===di.ModelNotSupported&&o!=null?e.formatMessage({id:"xPEzDr",defaultMessage:"Add files disabled for {modelName}"},{modelName:o}):s===di.HasReachedMaxFiles?i?e.formatMessage({id:"TEBczg",defaultMessage:"Cannot add more files"}):e.formatMessage({id:"Y6o+nN",defaultMessage:"Cannot add more photos"}):s===di.RateLimitReached?i?a.hasPaidSubscription()?e.formatMessage({id:"W/ug8Z",defaultMessage:"Upload limit reached"}):l?e.formatMessage({id:"j6nN5P",defaultMessage:"Upgrade to Go for more uploads"}):e.formatMessage({id:"GXsPqr",defaultMessage:"Get Plus for more uploads"}):e.formatMessage({id:"RHdQBI",defaultMessage:"Log in to add more photos"}):i?e.formatMessage({id:"MeW0HZ",defaultMessage:"Add files is unavailable"}):e.formatMessage({id:"bvbDsP",defaultMessage:"Add photos is unavailable"}):i?e.formatMessage({id:"composer.add.label",defaultMessage:"Add photos & files"}):e.formatMessage({id:"wNvwwm",defaultMessage:"Add photos"})}const U5e=t=>{"use forget";var O,D,$,H;const e=W.c(43),{isNewConversation:n,rateLimitPopup:s,signUpButtonText:o}=t,a=n===void 0?!1:n,i=V();let l;e[0]!==i?(l=$l(i),e[0]=i,e[1]=l):l=e[1];const c=l,d=Sr();if(s==null)return null;const{call_to_action:u,description:f}=s;let m;e[2]!==u?(m=(O=u==null?void 0:u.includes(Wt.UPGRADE_TO_GO))!=null?O:!1,e[2]=u,e[3]=m):m=e[3];const g=m;let p;e[4]!==u?(p=(D=u==null?void 0:u.includes(Wt.GET_GO_TRIAL))!=null?D:!1,e[4]=u,e[5]=p):p=e[5];const h=p;let x;e[6]!==u?(x=($=u==null?void 0:u.includes(Wt.GET_PLUS))!=null?$:!1,e[6]=u,e[7]=x):x=e[7];const v=x;let y;e[8]!==u?(y=(H=u==null?void 0:u.includes(Wt.AUTHENTICATE))!=null?H:!1,e[8]=u,e[9]=y):y=e[9];const b=y;let C;e[10]!==f||e[11]!==h||e[12]!==g?(C=f!=null?f:r.jsx(j,U(w({},$5e.defaultDescription),{values:{upgradePlanType:g||h?"Go":"Plus"}})),e[10]=f,e[11]=h,e[12]=g,e[13]=C):C=e[13];const S=C,E=b&&d;let k;e[14]!==S?(k=r.jsx("div",{className:"mb-3",id:"rate-limit-popover-title",children:S}),e[14]=S,e[15]=k):k=e[15];let T;e[16]!==a||e[17]!==h?(T=h?r.jsx($0,{isNewConversation:a,message:gt.tryGoTrial,upgradePlanType:Ye.GO}):null,e[16]=a,e[17]=h,e[18]=T):T=e[18];let M;e[19]!==a||e[20]!==g?(M=g?r.jsx($0,{isNewConversation:a,message:gt.upgradeToGo,upgradePlanType:Ye.GO}):null,e[19]=a,e[20]=g,e[21]=M):M=e[21];let A;e[22]!==i||e[23]!==a||e[24]!==v?(A=v?r.jsx($0,{isNewConversation:a,message:Kf(i),upgradePlanType:Ye.PLUS}):null,e[22]=i,e[23]=a,e[24]=v,e[25]=A):A=e[25];let I;e[26]!==i||e[27]!==c||e[28]!==b||e[29]!==o?(I=b?r.jsx(ye,{color:"primary",onClick:()=>{Zt(i,{fallbackScreenHint:c?"login":"signup",callback:G=>{c?B.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:G},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP):B.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:G},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},children:c?r.jsx(j,w({},gt.logInButtonText)):r.jsx(j,w({},o))}):null,e[26]=i,e[27]=c,e[28]=b,e[29]=o,e[30]=I):I=e[30];let N;e[31]!==i||e[32]!==c||e[33]!==E||e[34]!==o?(N=E?r.jsx(ye,{color:"secondary",className:"ms-2",onClick:()=>{Zt(i,{fallbackScreenHint:c?"signup":"login",callback:G=>{c?B.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:G},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP):B.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:G},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},children:c?r.jsx(j,w({},o)):r.jsx(j,w({},gt.logInButtonText))}):null,e[31]=i,e[32]=c,e[33]=E,e[34]=o,e[35]=N):N=e[35];let L;return e[36]!==M||e[37]!==A||e[38]!==I||e[39]!==N||e[40]!==k||e[41]!==T?(L=r.jsxs("div",{className:"text-token-text-primary p-2 text-sm",children:[k,T,M,A,I,N]}),e[36]=M,e[37]=A,e[38]=I,e[39]=N,e[40]=k,e[41]=T,e[42]=L):L=e[42],L},$0=t=>{"use forget";const e=W.c(12),{isNewConversation:n,message:s,upgradePlanType:o}=t,a=V();let i;e[0]!==a?(i=st(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=at();let d;e[2]!==(l==null?void 0:l.planType)||e[3]!==n||e[4]!==c||e[5]!==o?(d=()=>{var m,g;pn(c,"Rate limited file upload popover"),B.logRateLimitUpgradePlanButtonClicked({hard_block_reason:"",is_hard_block:!1,is_new_conversation:n,location:"popover",plan_type:(m=l==null?void 0:l.planType)!=null?m:"unknown",type:"file_upload",upgrade_plan_tye:o}),B.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"popover",plan_type:(g=l==null?void 0:l.planType)!=null?g:"unknown",is_hard_block:!1,is_new_conversation:n,hard_block_reason:""})},e[2]=l==null?void 0:l.planType,e[3]=n,e[4]=c,e[5]=o,e[6]=d):d=e[6];let u;e[7]!==s?(u=r.jsx(j,w({},s)),e[7]=s,e[8]=u):u=e[8];let f;return e[9]!==d||e[10]!==u?(f=r.jsx(ye,{size:"small",color:"secondary",onClick:d,children:u}),e[9]=d,e[10]=u,e[11]=f):f=e[11],f},$5e=Se({defaultDescription:{id:"mMIVYZ",defaultMessage:"You've reached your daily upload limit. Get ChatGPT {upgradePlanType} to unlock more."}}),AD=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M9.33496 16.5V10.665H3.5C3.13273 10.665 2.83496 10.3673 2.83496 10C2.83496 9.63273 3.13273 9.33496 3.5 9.33496H9.33496V3.5C9.33496 3.13273 9.63273 2.83496 10 2.83496C10.3673 2.83496 10.665 3.13273 10.665 3.5V9.33496H16.5L16.6338 9.34863C16.9369 9.41057 17.165 9.67857 17.165 10C17.165 10.3214 16.9369 10.5894 16.6338 10.6514L16.5 10.665H10.665V16.5C10.665 16.8673 10.3673 17.165 10 17.165C9.63273 17.165 9.33496 16.8673 9.33496 16.5Z"})),vm=Object.freeze(Object.defineProperty({__proto__:null,default:AD},Symbol.toStringTag,{value:"Module"}));var V0,Aw;function V5e(){if(Aw)return V0;Aw=1;var t=Math.floor,e=Math.random;function n(s,o){return s+t(e()*(o-s+1))}return V0=n,V0}var H0,Iw;function ID(){if(Iw)return H0;Iw=1;var t=V5e();function e(n,s){var o=-1,a=n.length,i=a-1;for(s=s===void 0?a:s;++o<s;){var l=t(o,i),c=n[l];n[l]=n[o],n[o]=c}return n.length=s,n}return H0=e,H0}var G0,jw;function H5e(){if(jw)return G0;jw=1;var t=l8(),e=ID();function n(s){return e(t(s))}return G0=n,G0}var W0,Nw;function G5e(){if(Nw)return W0;Nw=1;var t=sW();function e(n,s){return t(s,function(o){return n[o]})}return W0=e,W0}var z0,Pw;function W5e(){if(Pw)return z0;Pw=1;var t=G5e(),e=oW();function n(s){return s==null?[]:t(s,e(s))}return z0=n,z0}var q0,Rw;function z5e(){if(Rw)return q0;Rw=1;var t=ID(),e=W5e();function n(s){return t(e(s))}return q0=n,q0}var Y0,Lw;function q5e(){if(Lw)return Y0;Lw=1;var t=H5e(),e=z5e(),n=j3();function s(o){var a=n(o)?t:e;return a(o)}return Y0=s,Y0}var Y5e=q5e();const Z5e=Zn(Y5e),K5e=R(()=>P(()=>import("./jasggtze31dxpnzc.js"),__vite__mapDeps([325,1])),{loading:t=>F(t)}),Q5e=R(()=>P(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([149,1])),{loading:t=>F(t)}),J5e=R(()=>P(()=>import("./mphqjg6cm2erxu1h.js"),__vite__mapDeps([158,1])),{loading:t=>F(t)}),X5e=R(()=>P(()=>Promise.resolve().then(()=>lB),void 0),{loading:t=>F(t)}),bm=Hn(t=>{const e=Be(!1),n=Be(!1),s=S8(t),o=St(()=>n()&&s.anySheetOpen$()),a=Tf(Ue.ComposerMenuSheetBounced,()=>!1),i=St(()=>e()||o());return{hasBounced$:a,isSheetVisible$:i,isSheetOpen$:e,keepSheetOpen$:n}}),e4e=t=>{"use forget";const e=W.c(32),{onCloseAutoFocus:n,children:s,items:o,fileUploadRateLimited:a,mode:i}=t,l=i===void 0?"dropdown":i,c=V(),d=re(jh);let u;e[0]!==c?(u=bm(c),e[0]=c,e[1]=u):u=e[1];const f=u,{isSheetOpen$:m,keepSheetOpen$:g}=f,p=re(m);let h;e[2]!==c?(h=()=>H3(c),e[2]=c,e[3]=h):h=e[3];const x=re(h),v=l==="sheet"?x.detentSize:"";let y;e[4]!==x||e[5]!==l?(y=l==="sheet"&&x.backClosesSheet?{behavior:"history",sheetName:"composer-plus-menu"}:{},e[4]=x,e[5]=l,e[6]=y):y=e[6];const b=y,C=!d;let S;e[7]!==v?(S=v===""?void 0:[v],e[7]=v,e[8]=S):S=e[8];let E;e[9]!==f.hasBounced$?(E=A=>{f.hasBounced$.set(!0),B.logEventWithStatsig("Composer: Plus Menu Detent Change","chatgpt_web_composer_plus_menu_detent_change",{detent:A})},e[9]=f.hasBounced$,e[10]=E):E=e[10];let k;e[11]!==x||e[12]!==c||e[13]!==a||e[14]!==g||e[15]!==l||e[16]!==f.isSheetOpen$?(k=A=>{vo(()=>{f.isSheetOpen$.set(A),A&&g.set(!1)}),A?(XO(c,!1),ze(c,"1092897457").get("is_tatertot_enabled",!0),l==="sheet"&&x.expose(),B.logEventWithStatsig("Composer: Open Plus Menu","chatgpt_web_composer_plus_menu_open",a?{file_upload_disabled_reason:"rate_limit",mode:l}:{mode:l})):l==="sheet"&&B.logEventWithStatsig("Composer: Close Plus Menu","chatgpt_web_composer_plus_menu_close",{mode:l})},e[11]=x,e[12]=c,e[13]=a,e[14]=g,e[15]=l,e[16]=f.isSheetOpen$,e[17]=k):k=e[17];let T;e[18]!==o||e[19]!==n?(T=r.jsx(K.Portal,{children:r.jsx(t4e,{onCloseAutoFocus:n,children:o})}),e[18]=o,e[19]=n,e[20]=T):T=e[20];let M;return e[21]!==s||e[22]!==b||e[23]!==l||e[24]!==p||e[25]!==f||e[26]!==C||e[27]!==S||e[28]!==E||e[29]!==k||e[30]!==T?(M=r.jsxs(K.Root,U(w({mode:l,open:p,store:f},b),{modal:C,detents:S,onActiveDetentChange:E,onOpenChange:k,children:[s,T]})),e[21]=s,e[22]=b,e[23]=l,e[24]=p,e[25]=f,e[26]=C,e[27]=S,e[28]=E,e[29]=k,e[30]=T,e[31]=M):M=e[31],M},t4e=t=>{"use forget";const e=W.c(20),{onCloseAutoFocus:n,children:s}=t,o=V(),{fullyExpanded$:a,mode:i}=_.use(aW),l=re(a);let c;e[0]!==o?(c=()=>Id(o),e[0]=o,e[1]=c):c=e[1];const{isCombinedList:d,showModelsInPlusMenu:u}=re(c);let f;e[2]!==o?(f=bm(o),e[2]=o,e[3]=f):f=e[3];const{hasBounced$:m}=f;let g;e[4]!==o?(g=()=>H3(o),e[4]=o,e[5]=g):g=e[5];const p=re(g),h=i==="sheet"?p.canBounce:void 0,x=l&&"content-sheet-section:scrollable-content-section";let v;e[6]!==o||e[7]!==d||e[8]!==i||e[9]!==u?(v=i!=="sheet"&&tt(o)&&d&&(u?"max-h-[min(var(--radix-dropdown-menu-content-available-height,50svh),--spacing(1.5)+7*var(--menu-item-height))]!":"max-h-[min(var(--radix-dropdown-menu-content-available-height,50svh),--spacing(1.5)+5.8*var(--menu-item-height))]!"),e[6]=o,e[7]=d,e[8]=i,e[9]=u,e[10]=v):v=e[10];let y;e[11]!==x||e[12]!==v?(y=z("content-sheet-section:flex content-sheet-section:flex-col content-sheet-section:gap-3",x,v),e[11]=x,e[12]=v,e[13]=y):y=e[13];let b;return e[14]!==h||e[15]!==s||e[16]!==m||e[17]!==n||e[18]!==y?(b=r.jsx(K.Content,{showHeader:!0,className:y,canBounce:h,hasBounced$:m,size:"auto",alignOffset:-7,loop:!0,onCloseAutoFocus:n,children:s}),e[14]=h,e[15]=s,e[16]=m,e[17]=n,e[18]=y,e[19]=b):b=e[19],b},n4e=t=>{"use forget";const e=W.c(2);let n;return e[0]!==t?(n=r.jsx(K.BasicTrigger,{asChild:!0,children:r.jsx(s4e,w({},t))}),e[0]=t,e[1]=n):n=e[1],n},s4e=t=>{"use forget";var v;const e=W.c(21);let n,s;e[0]!==t?(v=t,{className:n}=v,s=we(v,["className"]),e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const o=V();let a;e[3]!==o?(a=()=>Id(o),e[3]=o,e[4]=a):a=e[4];const{plusButtonLabel:i}=re(a);let l;e[5]!==o?(l=()=>mn(o),e[5]=o,e[6]=l):l=e[6];const c=re(l),d=ne(),u=c&&"composer-btn--desktopSidebar",f=i&&"border-token-border-medium me-1 gap-1.5 border-1 ps-2 pe-3.5";let m;e[7]!==n||e[8]!==u||e[9]!==f?(m=z("composer-btn",n,u,f),e[7]=n,e[8]=u,e[9]=f,e[10]=m):m=e[10];let g;e[11]!==d?(g=d.formatMessage({id:"composer.plusMenu.label",defaultMessage:"Add files and more"}),e[11]=d,e[12]=g):g=e[12];let p;e[13]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(AD,{className:"icon"}),e[13]=p):p=e[13];let h;e[14]!==i?(h=i&&r.jsx("span",{inert:!0,children:r.jsx(j,{id:"uHQYgJ",defaultMessage:"Add"})}),e[14]=i,e[15]=h):h=e[15];let x;return e[16]!==s||e[17]!==m||e[18]!==g||e[19]!==h?(x=r.jsxs("button",U(w({type:"button",className:m,"data-testid":"composer-plus-btn","aria-label":g},s),{id:"composer-plus-btn",children:[p,h]})),e[16]=s,e[17]=m,e[18]=g,e[19]=h,e[20]=x):x=e[20],x},o4e=t=>{"use forget";const e=W.c(4),{layoutMode:n,children:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(K.SubMenuTrigger,{icon:Q5e,label:r.jsx(j,{id:"iORE28",defaultMessage:"More"})}),e[0]=o):o=e[0];const a=n==="bottom"?"end":"start";let i;return e[1]!==s||e[2]!==a?(i=r.jsxs(K.Sub,{children:[o,r.jsx(K.Portal,{children:r.jsx(K.SubContent,{align:a,children:s})})]},"more-tools-menu"),e[1]=s,e[2]=a,e[3]=i):i=e[3],i},a4e=t=>{"use forget";const e=W.c(4),{layoutMode:n,children:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(K.SubMenuTrigger,{icon:J5e,label:r.jsx(j,{id:"gVFn9L",defaultMessage:"Tools"})}),e[0]=o):o=e[0];const a=n==="bottom"?"end":"start";let i;return e[1]!==s||e[2]!==a?(i=r.jsxs(K.Sub,{children:[o,r.jsx(K.Portal,{children:r.jsx(K.SubContent,{align:a,children:s})})]},"collapsed-tool-menu"),e[1]=s,e[2]=a,e[3]=i):i=e[3],i},r4e=()=>Z5e([{key:Pe.PictureV2,label:r.jsx(j,{id:"8CBFak",defaultMessage:"Create image"}),icon:Rg(Pe.PictureV2)},{key:Pe.Research,label:r.jsx(j,{id:"EGM5w4",defaultMessage:"Deep research"}),icon:Rg(Pe.Research)},{key:Pe.Think,label:r.jsx(j,{id:"V/wEA3",defaultMessage:"Think longer"}),icon:Rg(Pe.Think)},{key:"gpt-5",label:"GPT-5",icon:X5e},{key:"add-flies",label:r.jsx(j,{id:"dUwCPF",defaultMessage:"Add files"}),icon:K5e}]).slice(0,3),i4e=()=>{"use forget";const t=W.c(5),e=V();let n;if(t[0]!==e){const s=r4e(),o=l4e,a=c=>{Zt(e,{fallbackScreenHint:"login_or_signup",callback:d=>{B.logLoginOrSignUpButtonClicked({location:"Plus Menu ".concat(c),provider:d},o(c))},skipLoginModal:!1})};let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(K.Label,{children:r.jsx(j,{id:"2SJWKf",defaultMessage:"Log in to use..."})}),t[2]=i):i=t[2];let l;t[3]!==a?(l=c=>r.jsx(K.Item,{label:c.label,icon:c.icon,"data-disabled":!0,onSelect:()=>{a(c.key)},highlightTrailing:r.jsx(rW,{to:"#",onClick:d=>{d.preventDefault(),a(c.key)},children:r.jsx(j,w({},gt.logInButtonText))})},c.key),t[3]=a,t[4]=l):l=t[4],n=r.jsxs(K.Group,{children:[i,s.map(l)]}),t[0]=e,t[1]=n}else n=t[1];return n};function l4e(t){switch(t.trim().toLowerCase()){case"add_files":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_ADD_FILES;case"picture_v2":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_PICTURE_V2;case"gpt_5":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_GPT_5;case"research":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_RESEARCH;case"reason":return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_REASON;default:return kt.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION}}const c4e=R(()=>P(()=>Promise.resolve().then(()=>xm),void 0),{loading:t=>F(t)}),d4e=R(()=>P(()=>import("./diw1uvps7iz4sxyn.js"),__vite__mapDeps([275,1])),{loading:t=>F(t)}),u4e=R(()=>P(()=>import("./ik745cxla2tb9irm.js"),__vite__mapDeps([326,1])),{loading:t=>F(t)});function cQe(t){"use forget";const e=W.c(28),{uploadType:n,modelSupportedImageMimeTypes:s,gizmo:o,attachmentsProductFeature:a,contextScopes:i}=t,l=ne(),c=wi(),d=$t();let u;e[0]!==a||e[1]!==i||e[2]!==c||e[3]!==(o==null?void 0:o.gizmo)||e[4]!==l||e[5]!==s||e[6]!==d||e[7]!==n?(u=(S,E)=>{S&&(Array.from(S).forEach(k=>{rr.uploadFile(c,il(k),k,n!=null?n:ho.Retrieval,s,l,d,w({gizmoId:o==null?void 0:o.gizmo.id},i&&i.length>0?{contextScopes:i}:{}),a)}),B.logEventWithStatsig("Upload File",E==="photos"?"chatgpt_web_photos_file_uploaded":"chatgpt_web_camera_file_uploaded",{intent:E,source:n,location:n===ho.Retrieval?"retrieval":"context-connector-picker"}))},e[0]=a,e[1]=i,e[2]=c,e[3]=o==null?void 0:o.gizmo,e[4]=l,e[5]=s,e[6]=d,e[7]=n,e[8]=u):u=e[8];const f=u;let m;e[9]!==n?(m=S=>{B.logEvent("Open File Viewer",{intent:S,source:n}),qe.logEvent("chatgpt_web_".concat(S,"_file_viewer_opened"),null,{location:n===ho.Retrieval?"retrieval":"context-connector-picker"})},e[9]=n,e[10]=m):m=e[10];const g=m;let p;e[11]!==g?(p=()=>g("photos"),e[11]=g,e[12]=p):p=e[12];let h;e[13]!==f?(h=S=>{f(S.currentTarget.files,"photos")},e[13]=f,e[14]=h):h=e[14];let x;e[15]!==p||e[16]!==h?(x=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-photos",onClick:p,onChange:h,accept:"image/*",multiple:!0}),e[15]=p,e[16]=h,e[17]=x):x=e[17];let v;e[18]!==g?(v=()=>g("camera"),e[18]=g,e[19]=v):v=e[19];let y;e[20]!==f?(y=S=>{f(S.currentTarget.files,"camera")},e[20]=f,e[21]=y):y=e[21];let b;e[22]!==v||e[23]!==y?(b=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-camera",onClick:v,onChange:y,accept:"image/*",capture:"environment",multiple:!0}),e[22]=v,e[23]=y,e[24]=b):b=e[24];let C;return e[25]!==x||e[26]!==b?(C=r.jsxs(r.Fragment,{children:[x,b]}),e[25]=x,e[26]=b,e[27]=C):C=e[27],C}const Ow=t=>{"use forget";const e=W.c(10),{forMobileSheet:n}=t,s=V(),o=n?K.HeaderItemAs:K.ItemAs;let a;e[0]!==s||e[1]!==n?(a=d=>{n?bm(s).keepSheetOpen$.set(!0):jD(d)},e[0]=s,e[1]=n,e[2]=a):a=e[2];const i=n?"large":void 0;let l;e[3]!==n?(l=n?r.jsx(j,{id:"wWojoI",defaultMessage:"Camera"}):r.jsx(j,{id:"AjuCMV",defaultMessage:"Take photo"}),e[3]=n,e[4]=l):l=e[4];let c;return e[5]!==o||e[6]!==a||e[7]!==i||e[8]!==l?(c=r.jsx(o,{as:"label",htmlFor:"upload-camera",onPointerUp:a,icon:u4e,size:i,label:l}),e[5]=o,e[6]=a,e[7]=i,e[8]=l,e[9]=c):c=e[9],c},Dw=t=>{"use forget";const e=W.c(7),{forMobileSheet:n}=t,s=n?K.HeaderItemAs:K.ItemAs,o=n?"large":void 0,a=n?c4e:d4e;let i;e[0]!==n?(i=n?r.jsx(j,{id:"h453TK",defaultMessage:"Photos"}):r.jsx(j,{id:"kBmJ2X",defaultMessage:"Add photos"}),e[0]=n,e[1]=i):i=e[1];let l;return e[2]!==s||e[3]!==o||e[4]!==a||e[5]!==i?(l=r.jsx(s,{as:"label",htmlFor:"upload-photos",onPointerUp:jD,size:o,icon:a,label:i}),e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l):l=e[6],l};function jD(t){t.currentTarget.click()}const f4e=R(()=>P(()=>Promise.resolve().then(()=>w4),void 0),{loading:t=>F(t)}),E5=R(()=>P(()=>Promise.resolve().then(()=>Rke),void 0),{loading:t=>F(t)}),m4e=R(()=>P(()=>import("./jnhwivmn1zqsjfao.js"),__vite__mapDeps([327,1])),{loading:t=>F(t)}),g4e=R(()=>P(()=>Promise.resolve().then(()=>xm),void 0),{loading:t=>F(t)}),p4e=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),h4e=R(()=>P(()=>import("./ezy6n48j7a81l4k0.js"),__vite__mapDeps([328,1])),{loading:t=>F(t)}),_4e=[We.Mod,"u"];function T5(t,e="en"){if(!t)return"";const n=new Date(t);if(isNaN(n.getTime()))return"";const s=new Date,o=Math.max(0,n.getTime()-s.getTime()),a=Math.floor(o/(1e3*60)),i=Math.floor(o/(1e3*60*60)),l=Math.floor(o/(1e3*60*60*24));let c,d;return l>0?(c=l,d="day"):i>0?(c=i,d="hour"):(c=a,d="minute"),new Intl.RelativeTimeFormat(e,{numeric:"always"}).format(c,d).replace(/^in\s+/i,"").replace(/\s+ago$/i,"")}function ND({openFileDialog:t,showMenuForNoAuth:e,mode:n,modelSupportsImages:s,isDisabled:o,disabledReason:a,rateLimitInfo:i,currentModelName:l,clientThreadId:c}){const d=V(),u=st(d),{attachfileRateLimitMessageVariant:f,attachfileRateLimitMessageShowIcon:m}=re(()=>Id(d)),g=s&&!o&&Sd(),p=s&&!o&&tt(d)&&w8(),h=o&&a===di.RateLimitReached,x=Ve(c,he.getIsNewConversation),v=_.useRef(!1);_.useEffect(()=>{var b;h&&!v.current&&(B.logEventWithStatsig("Rate Limit: Show Info","chatgpt_rate_limit_tooltip_shown",{location:"file_upload",type:"rate_limit",plan_type:(b=u==null?void 0:u.planType)!=null?b:"unknown",is_new_conversation:x}),v.current=!0)},[h,x,u==null?void 0:u.planType]);let y;if(o&&a===di.RateLimitReached)if(u!=null&&u.hasPaidSubscription())y=r.jsx(Fw,{account:u,forSheet:n==="sheet",rateLimitInfo:i!=null?i:null,currentModelName:l});else switch(n==="sheet"?"title_and_description":f){case"linked_text":y=r.jsx(y4e,{account:u,rateLimitInfo:i!=null?i:null,showIcon:m});break;case"title_and_description":y=r.jsx(Fw,{account:u,forSheet:n==="sheet",rateLimitInfo:i!=null?i:null,currentModelName:l});break;case"upgrade_button":y=r.jsx(v4e,{account:u,rateLimitInfo:i!=null?i:null});break}else y=r.jsx(x4e,{mode:n,rateLimitInfo:i!=null?i:null,hasAddPhotosItem:p,currentModelName:l,openFileDialog:t,disabled:o,disabledReason:a});return e?r.jsx(b4e,{onClickUploadImages:t,redirectToAuth:()=>Zt(d,{fallbackScreenHint:"login",skipLoginModal:!1})}):n==="sheet"?r.jsxs(r.Fragment,{children:[g&&r.jsx(Ow,{forMobileSheet:!0}),p&&r.jsx(Dw,{forMobileSheet:!0}),y]}):r.jsxs(r.Fragment,{children:[p&&r.jsx(Dw,{}),g&&r.jsx(Ow,{}),y]})}function x4e(t){"use forget";const e=W.c(27),{hasAddPhotosItem:n,currentModelName:s,mode:o,openFileDialog:a,disabled:i,disabledReason:l}=t,c=ne(),d=V(),u=re($3),f=Pl(),m=n?"android":o==="sheet"&&tt(d)?"ios":"default";let g;e:{if(f){let S;e[0]!==c?(S=c.formatMessage({id:"LocalFileDropdownItem.uploadImagesOnly",defaultMessage:"Add photos"}),e[0]=c,e[1]=S):S=e[1],g=S;break e}switch(m){case"android":{let S;e[2]!==c?(S=c.formatMessage({id:"LocalFileDropdownItem.uploadFilesOnly",defaultMessage:"Add files"}),e[2]=c,e[3]=S):S=e[3],g=S;break e}case"ios":{let S;e[4]!==c?(S=c.formatMessage({id:"LocalFileDropdownItem.uploadPhotosAndFiles",defaultMessage:"Photos & files"}),e[4]=c,e[5]=S):S=e[5],g=S;break e}case"default":{let S;e[6]!==d||e[7]!==s||e[8]!==i||e[9]!==l||e[10]!==c?(S=D1(d,c,i,l,s),e[6]=d,e[7]=s,e[8]=i,e[9]=l,e[10]=c,e[11]=S):S=e[11],g=S;break e}}g=void 0}const p=g,h=o==="sheet"?K.HeaderItem:K.Item,x=o==="sheet"?"large":void 0;let v;e[12]!==d||e[13]!==o||e[14]!==a?(v=()=>{o==="sheet"?(bm(d).keepSheetOpen$.set(!0),Promise.resolve().then(()=>{a()})):a()},e[12]=d,e[13]=o,e[14]=a,e[15]=v):v=e[15];let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(E5,{className:"icon"}),e[16]=y):y=e[16];let b;e[17]!==o?(b=o!=="sheet"&&r.jsx(r1,{binding:_4e,className:"touch:hidden"}),e[17]=o,e[18]=b):b=e[18];let C;return e[19]!==h||e[20]!==i||e[21]!==u||e[22]!==p||e[23]!==x||e[24]!==v||e[25]!==b?(C=r.jsx(h,{size:x,onClick:v,icon:y,label:p,disabled:i,highlightTrailing:b,showHighlightTrailing:u},"upload"),e[19]=h,e[20]=i,e[21]=u,e[22]=p,e[23]=x,e[24]=v,e[25]=b,e[26]=C):C=e[26],C}function Fw({account:t,forSheet:e,rateLimitInfo:n,currentModelName:s}){const o=ne(),a=V(),i=at(),l=T5(n==null?void 0:n.resets_after);let c=r.jsx(E5,{className:"icon"}),d;t!=null&&t.hasPaidSubscription()?d=o.formatMessage({id:"ZBhfvX",defaultMessage:"Wait {time} to upload again"},{time:l}):(c=r.jsx(m4e,{className:"icon"}),d=o.formatMessage({id:"ba5pHI",defaultMessage:"Or wait {time} to upload again"},{time:l}));const u=e?K.HeaderItemRow:K.Item;return r.jsx(u,{onClick:()=>{t?Hp(i,t):Zt(a,{fallbackScreenHint:"login_or_signup",callback:f=>{B.logLogInButtonClicked({provider:f,location:"File picker rate limit tooltip"},kt.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},icon:!e&&c,disabled:(t==null?void 0:t.hasPaidSubscription())&&!e,label:D1(a,o,!0,di.RateLimitReached,s),trailing:e&&!(t!=null&&t.hasPaidSubscription())&&r.jsx(ye,{className:z(e&&"min-h-9"),onClick:()=>{Hp(i,t)},children:r.jsx(j,w({},gt.upgrade))}),secondary:d},"upload")}function y4e({account:t,rateLimitInfo:e,showIcon:n}){const s=ne(),o=at(),a=T5(e==null?void 0:e.resets_after);return r.jsxs("div",{className:"group flex min-w-0 items-center py-2 ".concat(n?"px-2.5":"px-5"),children:[n&&r.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center",children:r.jsx(E5,{className:"text-token-text-tertiary"})}),r.jsx("div",{className:"text-token-text-tertiary line-clamp-2 block max-w-[212px] min-w-0 flex-1 text-start text-sm font-light",children:s.formatMessage({id:"egGG9V",defaultMessage:"<link>Upgrade to Plus</link> to attach more files or try again in {time}"},{time:a,link:i=>r.jsx("button",{type:"button",className:"text-token-text-secondary underline",onClick:()=>{Hp(o,t)},children:i})})})]},"upload")}function v4e({account:t,rateLimitInfo:e}){const n=ne(),s=at(),o=T5(e==null?void 0:e.resets_after);return r.jsxs("div",{className:"flex flex-col gap-2 px-5 py-2",children:[r.jsx("div",{className:"text-token-text-tertiary max-w-[212px] text-start text-sm font-light",children:n.formatMessage({id:"/zL/ev",defaultMessage:"Upgrade to Plus to attach more files or try again in {time}"},{time:o})}),r.jsxs("button",{type:"button",className:"flex w-full items-center justify-center gap-1 rounded-full bg-[#F1F1FB] px-4 py-2 text-sm font-medium text-[#AF52DE] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClick:()=>{Hp(s,t)},children:[r.jsx(f4e,{className:"icon-sm text-[#5D5BD0] dark:text-[#DCDBF6]"}),r.jsx(j,w({},gt.upgrade))]})]},"upload")}function Hp(t,e){var n;pn(t,"Rate limited file upload inline-text"),B.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"inline-text",plan_type:(n=e==null?void 0:e.planType)!=null?n:"unknown",is_hard_block:!1,hard_block_reason:""})}function b4e({onClickUploadImages:t,redirectToAuth:e}){return r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:h4e,onClick:e,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx(j,w({},lu.connectApps)),r.jsx("span",{className:"text-token-text-secondary text-[13px]",children:r.jsx(j,w({},lu.loginRequired))})]})},"connect-apps-no-auth"),r.jsx(K.Item,{icon:p4e,onClick:e,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx(j,w({},lu.uploadDocuments)),r.jsx("span",{className:"text-token-text-secondary text-[13px]",children:r.jsx(j,w({},lu.loginRequired))})]})},"upload-documents-no-auth"),r.jsx(K.Item,{icon:g4e,onClick:t,children:r.jsx(j,w({},lu.uploadImages))},"upload-images-no-auth")]})}const lu=Se({connectApps:{id:"Rna6u2",defaultMessage:"Connect apps"},uploadDocuments:{id:"0BxpM7",defaultMessage:"Documents"},uploadImages:{id:"rdMuNJ",defaultMessage:"Images"},loginRequired:{id:"/1XNys",defaultMessage:"Login required"}});var mE;const dQe=ft.button(mE||(mE=ct(["flex items-center justify-center "," rounded-full "," "," "," "," ",""])),({$isSmall:t})=>t?"h-[34px] focus-visible:-outline-offset-1":"h-9",({$hideBorder:t,$visualTreatment:e})=>e!=="composer-btn"&&!t&&"border border-token-border-default",({$visualTreatment:t})=>t!=="composer-btn"&&"text-token-text-secondary",({$showLabel:t,$isSmall:e})=>t?"min-w-8 w-auto p-2 text-[13px] font-semibold radix-state-open:bg-black/10 hover:bg-token-main-surface-secondary":e?"w-7":"w-9",({disabled:t})=>t?"opacity-50":"hover:bg-token-main-surface-secondary",({$open:t})=>t&&"bg-black/10");function C4e(){const t=ne();return r.jsx("span",{className:"ps-1 pe-1 whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:t.formatMessage({id:"PromptFilePicker.attachFilesLabel",defaultMessage:"Attach"})})}const S4e=R(()=>P(()=>import("./6nq0byuxlxwlpv7o.js"),__vite__mapDeps([329,1])),{loading:t=>F(t)});function w4e({task:t}){const e=TP(t);return t.status===En.UNDETERMINED?r.jsx(ld,{percentage:0,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}):iW(t)?r.jsx(S4e,{className:"text-token-text-secondary"}):r.jsx(ld,{percentage:e,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"".concat((100-e)/100*.2,"s"),transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"})}const k4e=10,E4e=15,Bw=20,Uw=5,T4e=10;let Z0=null;const dr=t=>{var e,n,s,o,a,i,l;if(Z0==null){const c=rs(t,"3317473948").value,d={convoPollingFreshnessMaxMins:((e=c.default_max_polling_duration)!=null?e:k4e*60)/60,imageGenPollingFreshnessMaxMins:((n=c.model_slug_max_polling_durations.image_gen)!=null?n:E4e*60)/60,o1ProConvoPollingFreshnessMaxMins:((s=c.model_slug_max_polling_durations.o1_pro)!=null?s:Bw*60)/60,o3ProConvoPollingFreshnessMaxMins:((o=c.model_slug_max_polling_durations.o3_pro)!=null?o:Bw*60)/60,gpt4oConvoPollingIntervalMs:((a=c.model_slug_intervals.gpt_4o)!=null?a:Uw)*1e3,defaultConvoPollingIntervalMs:((i=c.default_interval)!=null?i:Uw)*1e3,imageGenPollingIntervalMs:((l=c.model_slug_intervals.image_gen)!=null?l:T4e)*1e3,errorCountThreshold:30};return Z0=d,d}return Z0};var PD=(t=>(t[t.Standard=0]="Standard",t[t.ImageGen=1]="ImageGen",t))(PD||{});function ol(t){var e;return(e=t==null?void 0:t.metadata)!=null&&e.image_gen_async?1:0}function M4e(t){var n,s;const e=(s=(n=t==null?void 0:t.metadata)==null?void 0:n.poll_on_websocket_inactivity_ms)!=null?s:0;return e>0?e:0}function ny(t,e){var o,a,i;const n=(a=(o=t==null?void 0:t.metadata)==null?void 0:o.poll_interval_ms)!=null?a:0;return n>0?n:ol(t)===1?dr(e).imageGenPollingIntervalMs:A4e((i=t==null?void 0:t.metadata)==null?void 0:i.model_slug)?dr(e).gpt4oConvoPollingIntervalMs:dr(e).defaultConvoPollingIntervalMs}function M5(t,e){var o,a,i;const n=(a=(o=t==null?void 0:t.metadata)==null?void 0:o.poll_freshness_max_mins)!=null?a:0;if(n>0)return n;const s=(i=t==null?void 0:t.metadata)==null?void 0:i.model_slug;return LD(s)?dr(e).o1ProConvoPollingFreshnessMaxMins:OD(s)?dr(e).o3ProConvoPollingFreshnessMaxMins:ol(t)===1?dr(e).imageGenPollingFreshnessMaxMins:RD(ol(t),e)}function RD(t,e){switch(t){case 1:return dr(e).imageGenPollingFreshnessMaxMins;case 0:return dr(e).convoPollingFreshnessMaxMins}}function LD(t){return t?pr(3010482349,"".concat(t,"-AAAA")):!1}function OD(t){return t?pr(3240390095,"".concat(t,"-AAAA")):!1}function A4e(t){return t?t==="gpt-4o":!1}function $w(t,e){Ze(t,n=>{cn.updateTree(n,(s,o)=>{var i,l,c;if(!(((c=(l=(i=s.getNodeIfExists(o))==null?void 0:i.message)==null?void 0:l.content)==null?void 0:c.content_type)===ut.Text)){const d=W2("");return d.clientMetadata=w(w({},d.clientMetadata),e),s.addMessageNode(o,d)}s.updateNodeMetadata(o,e)})})}function DD({threadId:t}){const e=V(),n=It(),s=_.useRef(!1),o=_.useRef(null),a=_.useRef(0),i=_.useRef(null);return _.useEffect(()=>{let l=!1;function c(){var f;return(f=he.getCurrentNode(mt(t)))==null?void 0:f.message}let d=0;async function u(){var p,h,x;i.current==null&&(i.current=Date.now()),s.current=!0;let f=null;try{const v=c();if(ol(v)!==1&&!LD((p=v==null?void 0:v.metadata)==null?void 0:p.model_slug)&&!OD((h=v==null?void 0:v.metadata)==null?void 0:h.model_slug))try{const y=Date.now()/1e3,{status:b}=await ge.safeGet("/conversation/{conversation_id}/stream_status",{parameters:{path:{conversation_id:t}}});b!=="COMPLETE"&&(d++,B.logEvent("ChatGPT Convo Stream: Polling Attempted",{conversationId:t,retryCount:d}),f={async_status:Xt.STREAMING,update_time:y})}catch(y){}f==null&&(d++,B.logEventWithStatsig("ChatGPT Convo Stream: Polling Attempted","chatgpt_convo_stream_polling_attempted",{conversationId:t,retryCount:d}),f=await Ea(t,{skipIfExisting:!1})),a.current=0}catch(v){a.current+=1;const y=c();if(a.current>=dr(e).errorCountThreshold){B.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:ol(y)}),B.logNetworkError({source:"pending_thread_poller",type:"error"});const b="A network error occurred. Please check your connection and try again. ".concat(QE);$w(t,{err:b,errType:"danger"})}else l||(o.current=window.setTimeout(u,ny(y,e)));return}if(f.async_status===Xt.UNREAD){const v=c(),y=i.current?Date.now()-i.current:0;B.logEventWithStatsig("chatgpt_web_network_error_poller_success","chatgpt_web_network_error_poller_success",{duration_ms:y,poll_type:ol(v)}),Is(t,{source:ts.SERVER,value:Xt.UNREAD}),Xs(n,f.gizmo_id),fr.updateThreadFromServer(t,f);return}if(f.async_status!==Xt.STREAMING)return;const m=(x=f.update_time)!=null?x:0,g=G3(new Date,new Date(m*1e3));if(!l){const v=c();if(g<M5(v,e))o.current=window.setTimeout(u,ny(v,e));else{const y=c();B.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:ol(y)}),$w(t,{err:mi,errType:"danger",canRetry:!0}),ge.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:t}},requestBody:{status:null}})}}B.logEventWithStatsig("ChatGPT Convo Stream: Polling Complete","chatgpt_convo_stream_polling_complete",{conversationId:t,retryCount:d})}return s.current||(B.logEvent("Conversation Polling Started"),u()),()=>{l=!0,o.current&&window.clearTimeout(o.current),s.current=!1}},[n,t,e]),null}function FD(t){const e=V(),n=Bh(t),{value:s=null,source:o=null}=n!=null?n:{};return Ve(t,a=>{var m,g,p;const i=(m=he.getCurrentNode(a))==null?void 0:m.message,l=M5(i,e),c=he.getUpdateTime(a),d=Math.max(c!=null?c:0,(g=i==null?void 0:i.create_time)!=null?g:0,(p=i==null?void 0:i.update_time)!=null?p:0),u=G3(new Date,new Date(d*1e3))<l;return ve(e,"3922476776")&&u&&s===Xt.STREAMING&&o===ts.SERVER})}const dd=Ft(Mn(()=>({dragData:null,conversationDropTargetCount:0}))),I4e=()=>{"use forget";return dd(R4e)},j4e=t=>{dd.setState({dragData:t})},N4e=()=>{dd.setState(t=>{t.dragData=null})},uQe=()=>(dd.setState(t=>{t.conversationDropTargetCount+=1}),()=>{dd.setState(t=>{t.conversationDropTargetCount=Math.max(0,t.conversationDropTargetCount-1)})}),P4e=()=>{"use forget";return dd(L4e)};function R4e(t){return t.dragData}function L4e(t){return t.conversationDropTargetCount>0}function O4e({text:t}){const e=mI(),[n,s]=_.useState({finalText:t,pos:0,isTyping:!!t});_.useEffect(()=>{s(t?{finalText:t,pos:0,isTyping:!0}:{finalText:"",pos:0,isTyping:!1})},[t]);const o=_.useMemo(()=>Array.from(n.finalText),[n.finalText]),a=_.useMemo(()=>n.finalText?new D4e().humanTypingDelaysQuertyDistance(o):[],[o,n.finalText]);return _.useEffect(()=>{if(!n.isTyping)return;const i=a.map((l,c)=>setTimeout(()=>{e()&&s(d=>U(w({},d),{pos:c+1,isTyping:c+1<o.length}))},l));return()=>i.forEach(clearTimeout)},[n.isTyping,a,o,e]),r.jsx(r.Fragment,{children:n.finalText.slice(0,n.pos)})}class D4e{qwertyDistance(e,n){var c,d;const s={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},[o,a]=(c=s[e.toLowerCase()])!=null?c:[0,0],[i,l]=(d=s[n.toLowerCase()])!=null?d:[0,0];return Math.abs(o-i)+Math.abs(a-l)}humanTypingDelaysQuertyDistance(e,n=10,s=100){let o=0;const a=[];for(let i=0;i<e.length;++i){let l;if(i>0){const c=this.qwertyDistance(e[i-1],e[i]);c===0?l=this.getRandomInt(n,Math.floor(s/2)):c===1?l=this.getRandomInt(n,Math.floor(s*2/3)):l=this.getRandomInt(n,s)}else l=this.getRandomInt(n,s);a.push(l+o),o+=l}return a}getRandomInt(e,n){return Math.floor(Math.random()*(n-e+1))+e}}function F4e(t){const e=V(),[n,s]=_.useState(()=>bn(()=>lW(e)().some(a=>a.conversationId===t)));return _.useEffect(()=>{var a;let o=(a=mt(t))==null?void 0:a.title;return Vy.subscribe(i=>{const l=mt(t,i),c=l==null?void 0:l.title;c!==o&&((l==null?void 0:l.titleSource)===rh.Generated&&k8()?s(!0):s(!1),o=c)})},[t]),n}function B4e(t){"use forget";const e=W.c(9),{clientThreadId:n,historyConversationResponse:s,shouldShowLoadingShimmer$:o}=t,a=re(o);let i;e[0]!==s.is_do_not_remember||e[1]!==a?(i=z({"loading-shimmer":a,"opacity-60":s.is_do_not_remember}),e[0]=s.is_do_not_remember,e[1]=a,e[2]=i):i=e[2];let l;e[3]!==n||e[4]!==s?(l=r.jsx(U4e,{clientThreadId:n,historyConversationResponse:s}),e[3]=n,e[4]=s,e[5]=l):l=e[5];let c;return e[6]!==i||e[7]!==l?(c=r.jsx("span",{className:i,dir:"auto",children:l}),e[6]=i,e[7]=l,e[8]=c):c=e[8],c}function U4e(t){"use forget";const e=W.c(2),{clientThreadId:n,historyConversationResponse:s}=t,o=Ve(n,$4e),a=F4e(n),i=o!=null?o:s.title;if(a){const l=i!=null?i:"";let c;return e[0]!==l?(c=r.jsx(O4e,{text:l}),e[0]=l,e[1]=c):c=e[1],c}return i}function $4e(t){return t==null?void 0:t.title}function V4e(t){"use forget";const e=W.c(19),{conversationId:n,historyConversationResponse:s,onClose:o}=t;let a;e[0]!==n||e[1]!==s?(a=()=>{var h,x,v;return(v=(x=(h=mt(n))==null?void 0:h.title)!=null?x:s.title)!=null?v:""},e[0]=n,e[1]=s,e[2]=a):a=e[2];const[i]=_.useState(a),l=_.useRef(null),c=V(),d=It();let u;e[3]!==n||e[4]!==c||e[5]!==s||e[6]!==i||e[7]!==d?(u=function(){var v,y;const x=(y=(v=l.current)==null?void 0:v.value)!=null?y:"";x!==i&&(xv(c,n,x,rh.User),B.logEvent("Rename Thread",{threadId:n,content:x}),ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n}},requestBody:{title:x},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{Xs(d,s.gizmo_id)}))},e[3]=n,e[4]=c,e[5]=s,e[6]=i,e[7]=d,e[8]=u):u=e[8];const f=u;let m;e[9]!==o||e[10]!==f?(m=h=>{if(!h.nativeEvent.isComposing){h.key===" "&&h.stopPropagation();e:switch(h.key){case"Escape":{o();break e}case"Enter":f(),o()}}},e[9]=o,e[10]=f,e[11]=m):m=e[11];let g;e[12]!==o||e[13]!==f?(g=()=>{f(),o()},e[12]=o,e[13]=f,e[14]=g):g=e[14];let p;return e[15]!==i||e[16]!==m||e[17]!==g?(p=r.jsx("input",{type:"text",defaultValue:i,ref:l,onClick:G4e,onKeyDown:m,onFocus:H4e,onBlur:g,autoFocus:!0,className:"w-full border-none bg-transparent p-0 text-sm focus:ring-0"}),e[15]=i,e[16]=m,e[17]=g,e[18]=p):p=e[18],p}function H4e(t){var e;(e=t.currentTarget)==null||e.select()}function G4e(t){t.preventDefault()}const Vw=R(()=>P(()=>import("./x0cxm4erskwwo65r.js"),__vite__mapDeps([330,1])),{loading:t=>F(t)}),BD=R(()=>P(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([149,1])),{loading:t=>F(t)}),UD=R(()=>P(()=>Promise.resolve().then(()=>Pue),void 0).then(t=>t.GizmoConversationOptionsDropdown)),W4e=new Date(2024,9,11,0);function z4e(t){B.logEvent("Load Thread",{threadId:t})}function fQe(t){"use forget";const e=W.c(11),{conversation:n,onOpenChange:s,testId:o,inMainScreen:a,isActiveConversation:i}=t,l=a===void 0?!1:a,c=ne(),d=V();if(!tt(d))return null;let f;e[0]!==c?(f=c.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),e[0]=c,e[1]=f):f=e[1];let m;e[2]!==f||e[3]!==o?(m=r.jsx(Uf,{"data-testid":o,className:"m-0","data-prevent-default":!0,"aria-label":f,icon:BD}),e[2]=f,e[3]=o,e[4]=m):m=e[4];let g;return e[5]!==n||e[6]!==l||e[7]!==i||e[8]!==s||e[9]!==m?(g=r.jsx(UD,{conversation:n,onOpenChange:s,inMainScreen:l,isActiveConversation:i,children:m}),e[5]=n,e[6]=l,e[7]=i,e[8]=s,e[9]=m,e[10]=g):g=e[10],g}const F1=_.memo(q4e);function q4e(t){"use forget";var Qt,tn,gn,In;const e=W.c(117),{conversation:n,className:s,hideOverflowMenu:o,isActive:a,elementRef:i,testId:l,onSelect:c,icon:d,isStarred:u}=t,f=o===void 0?!1:o,m=ne(),g=V(),[p,h]=_.useState(!1),x=Sn(),v="owner"in n?(Qt=n.owner)==null?void 0:Qt.user_id:null,y=v==null||v===(x==null?void 0:x.normalizedAccountUserId);let b;e[0]!==g?(b=ve(g,"232791851"),e[0]=g,e[1]=b):b=e[1];const C=b;let S,E;e[2]!==n.async_status||e[3]!==n.id||e[4]!==g?(S=()=>{if(n.id!=null&&n.async_status!=null){const bt=xt(g,n.id);HE(bt,{source:ts.SERVER,value:n.async_status})}},E=[g,n.id,n.async_status],e[2]=n.async_status,e[3]=n.id,e[4]=g,e[5]=S,e[6]=E):(S=e[5],E=e[6]),_.useEffect(S,E);let k;e[7]!==n.id||e[8]!==g?(k=()=>{if(n.id===void 0)return null;const bt=xt(g,n.id);return bi(bt)},e[7]=n.id,e[8]=g,e[9]=k):k=e[9];const T=k;let M;e[10]!==T?(M=()=>{var bt,Nt;return(Nt=(bt=T())==null?void 0:bt.value)!=null?Nt:null},e[10]=T,e[11]=M):M=e[11];const A=M;let I;e[12]!==T?(I=()=>{var bt,Nt;return(Nt=(bt=T())==null?void 0:bt.source)!=null?Nt:null},e[12]=T,e[13]=I):I=e[13];const N=I,L=Ve(n.id,he.getRequestId);let O;e[14]!==g||e[15]!==L?(O=()=>fW(g,L),e[14]=g,e[15]=L,e[16]=O):O=e[16];const D=O;let $;e[17]!==n.update_time?($=G3(new Date,new Date((tn=n.update_time)!=null?tn:0)),e[17]=n.update_time,e[18]=$):$=e[18];const H=$<RD(PD.Standard,g);let G;e[19]!==n.update_time?(G=n.update_time&&cW(new Date(n.update_time),W4e),e[19]=n.update_time,e[20]=G):G=e[20];const Z=G;let Q;e[21]!==A||e[22]!==H?(Q=()=>(A()===Xt.STREAMING||A()===Xt.REALTIME)&&H,e[21]=A,e[22]=H,e[23]=Q):Q=e[23];const q=Q;let Y;e[24]!==A||e[25]!==Z||e[26]!==g||e[27]!==a||e[28]!==D||e[29]!==C?(Y=()=>!!(C&&!a&&!D()&&Z&&A()===Xt.UNREAD&&!mn(g)),e[24]=A,e[25]=Z,e[26]=g,e[27]=a,e[28]=D,e[29]=C,e[30]=Y):Y=e[30];const te=Y;let ae;e[31]!==q||e[32]!==a||e[33]!==D||e[34]!==C?(ae=()=>C&&!a&&(D()||q()),e[31]=q,e[32]=a,e[33]=D,e[34]=C,e[35]=ae):ae=e[35];const se=ae,ce=C&&!a;let X;e[36]!==q||e[37]!==a||e[38]!==D||e[39]!==se||e[40]!==C?(X=()=>!se()&&C&&!a&&(D()||q()),e[36]=q,e[37]=a,e[38]=D,e[39]=se,e[40]=C,e[41]=X):X=e[41];const ee=X,ie=FD(n.id)&&!a,de=_.useRef(!1);let me,xe;e[42]!==N||e[43]!==A||e[44]!==n.id||e[45]!==g||e[46]!==a||e[47]!==D?(me=()=>{if(!de.current&&ve(g,"3922476776"))return a?wa(()=>(D(),A()===Xt.UNREAD),async bt=>{bt&&(N()===ts.SERVER&&(de.current=!0,await ge.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:n.id}},requestBody:{status:null}})),Is(n.id,null),de.current=!1)},{fireImmediately:!0}):wa(()=>(D(),N()===ts.CLIENT&&A()===Xt.UNREAD),async bt=>{bt&&(de.current=!0,await ge.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:n.id}},requestBody:{status:A()}}),Is(n.id,{value:Xt.UNREAD,source:ts.SERVER}),de.current=!1)})},xe=[g,a,n.id,A,N,D],e[42]=N,e[43]=A,e[44]=n.id,e[45]=g,e[46]=a,e[47]=D,e[48]=me,e[49]=xe):(me=e[48],xe=e[49]),_.useEffect(me,xe);let pe,Me;e[50]!==n.id||e[51]!==a||e[52]!==y?(pe=()=>E8(_P,{editTitle:bt=>{const{serverThreadId:Nt}=bt;y&&(Nt?Nt===n.id:a)&&h(!0)}}),Me=[n.id,a,y],e[50]=n.id,e[51]=a,e[52]=y,e[53]=pe,e[54]=Me):(pe=e[53],Me=e[54]),_.useEffect(pe,Me);let Ce;e[55]!==n.conversation_template_id||e[56]!==g?(Ce=()=>{var bt,Nt;if(n.conversation_template_id!=null)return(Nt=(bt=mW(g).data)==null?void 0:bt.gizmos.find(ls=>ls.resource.gizmo.id===n.conversation_template_id))==null?void 0:Nt.resource},e[55]=n.conversation_template_id,e[56]=g,e[57]=Ce):Ce=e[57];const ke=re(Ce),Le=_.useRef(null);let De;e[58]!==ke||e[59]!==n.gizmo_id?(De=dW(n.gizmo_id)&&ke?ke.gizmo:void 0,e[58]=ke,e[59]=n.gizmo_id,e[60]=De):De=e[60];const le=De,oe=n.gizmo_id&&js(n.gizmo_id)&&"owner"in n?{id:n.gizmo_id}:void 0,Ee="owner"in n?(gn=n.owner)==null?void 0:gn.user_id:void 0,be=(In=st(g))==null?void 0:In.normalizedAccountUserId,fe=P4e(),ue=_.useRef(null),_e=Ao;let Te;e[61]!==n.gizmo_id||e[62]!==fe||e[63]!==p||e[64]!==u?(Te=!p&&fe&&K2(n.gizmo_id,u),e[61]=n.gizmo_id,e[62]=fe,e[63]=p,e[64]=u,e[65]=Te):Te=e[65];let $e;e[66]!==n||e[67]!==u?($e=bt=>{var oo;if(!K2(n.gizmo_id,u))return;const Nt=bt.currentTarget,ls=Le.current;ls&&(ls.style.display="none"),Nt.style.opacity="0.99",ls&&requestAnimationFrame(()=>{ls.style.display="",Nt.style.opacity="0"}),bt.dataTransfer.effectAllowed="move",j4e({kind:"conversation",conversation:n,gizmoId:(oo=n.gizmo_id)!=null?oo:null})},e[66]=n,e[67]=u,e[68]=$e):$e=e[68];const Ne=Y4e;let Ae;e[69]!==i?(Ae=Xv(i,ue),e[69]=i,e[70]=Ae):Ae=e[70];const He=$o(n.id,{gizmo:le?{gizmo:le}:void 0,project:oe||void 0,ownerUserId:Ee,accountUserId:be});let Qe;e[71]!==n.id||e[72]!==a||e[73]!==c?(Qe=bt=>{bt.metaKey||bt.ctrlKey||!a&&!bt.defaultPrevented&&(z4e(n.id),c==null||c())},e[71]=n.id,e[72]=a,e[73]=c,e[74]=Qe):Qe=e[74];let et;e[75]===Symbol.for("react.memo_cache_sentinel")?(et=()=>{h(!0)},e[75]=et):et=e[75];const Ct=!!u;let vt;e[76]!==ce||e[77]!==n.id||e[78]!==a||e[79]!==p||e[80]!==se||e[81]!==te||e[82]!==Ct?(vt=r.jsx(Z4e,{conversationId:n.id,isActive:a,isEditingTitle:p,isStarred:Ct,canShowAsyncTaskProgressCircle:ce,shouldShowUnreadNotification$:te,shouldShowLoadingSpinner$:se}),e[76]=ce,e[77]=n.id,e[78]=a,e[79]=p,e[80]=se,e[81]=te,e[82]=Ct,e[83]=vt):vt=e[83];let At;e[84]!==n||e[85]!==f||e[86]!==m||e[87]!==a||e[88]!==p||e[89]!==l?(At=!f&&!p&&r.jsx(UD,{conversation:n,isActiveConversation:a,onOpenChange:bt=>{bt&&B.logEvent("Conversation History Item Open Menu",{conversationId:n.id})},children:r.jsx(Uf,{ref:Le,"data-testid":"".concat(l,"-options"),"aria-label":m.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),icon:BD})}),e[84]=n,e[85]=f,e[86]=m,e[87]=a,e[88]=p,e[89]=l,e[90]=At):At=e[90];let Ht;e[91]!==n||e[92]!==p||e[93]!==ee?(Ht=!p&&r.jsx(B4e,{clientThreadId:n.id,historyConversationResponse:n,shouldShowLoadingShimmer$:ee}),e[91]=n,e[92]=p,e[93]=ee,e[94]=Ht):Ht=e[94];let Ot;e[95]!==n.id||e[96]!==ie?(Ot=ie&&r.jsx(DD,{threadId:n.id}),e[95]=n.id,e[96]=ie,e[97]=Ot):Ot=e[97];let Vt;e[98]!==n||e[99]!==p?(Vt=p?r.jsx(V4e,{conversationId:n.id,historyConversationResponse:n,onClose:()=>{h(!1)}}):null,e[98]=n,e[99]=p,e[100]=Vt):Vt=e[100];let en;return e[101]!==_e||e[102]!==s||e[103]!==d||e[104]!==a||e[105]!==Te||e[106]!==$e||e[107]!==Ne||e[108]!==Ae||e[109]!==He||e[110]!==Qe||e[111]!==vt||e[112]!==At||e[113]!==Ht||e[114]!==Ot||e[115]!==Vt?(en=r.jsxs(_e,{icon:d,draggable:Te,onDragStart:$e,onDragEnd:Ne,ref:Ae,active:a,className:s,to:He,onClick:Qe,onDoubleClick:et,trailing:vt,highlightTrailing:At,label:Ht,children:[Ot,Vt]}),e[101]=_e,e[102]=s,e[103]=d,e[104]=a,e[105]=Te,e[106]=$e,e[107]=Ne,e[108]=Ae,e[109]=He,e[110]=Qe,e[111]=vt,e[112]=At,e[113]=Ht,e[114]=Ot,e[115]=Vt,e[116]=en):en=e[116],en}function Y4e(t){t.currentTarget.style.opacity="",N4e()}function Z4e(t){"use forget";const e=W.c(8),{conversationId:n,isActive:s,isEditingTitle:o,isStarred:a,shouldShowUnreadNotification$:i,canShowAsyncTaskProgressCircle:l,shouldShowLoadingSpinner$:c}=t,d=uW(n),u=re(i),f=re(c);let m;return e[0]!==l||e[1]!==d||e[2]!==s||e[3]!==o||e[4]!==a||e[5]!==f||e[6]!==u?(m=!o&&((!s&&u?a?r.jsx(Vw,{className:"icon-xs text-blue-500"}):r.jsx(Jj,{color:"blue"}):l&&d.length>0?r.jsx(w4e,{task:d[0]}):!s&&f?r.jsx(qie,{size:16,backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10"}):null)||(a?r.jsx(Vw,{className:"icon-xs text-token-icon-tertiary opacity-50"}):null)),e[0]=l,e[1]=d,e[2]=s,e[3]=o,e[4]=a,e[5]=f,e[6]=u,e[7]=m):m=e[7],m}function K4e({systemHints:t,isN7jupdActive:e}){const n=it.agentSessionMode$();if(!e)return;const s=t.includes(Pe.Agent);if(!(n!=="incognito"||!s))return{n7jupd_local_safe_mode:!0}}let sy=null;function mQe(t){sy=t}function Q4e(t){return sy?sy(t):t}function $D(t){switch(t.content.content_type){case ut.Text:return t.content.parts.join("");case ut.Code:return t.content.text;default:return""}}const Hw=new WeakMap,Gp=new WeakMap,Gw=t=>{const e=Hw.get(t);if(e)return e;try{const n=t!=null&&t.widget_state?JSON.parse(t.widget_state):void 0;return Hw.set(t,n),n}catch(n){return null}},J4e=t=>{var n;const e=Gp.get(t);if(e)return e;try{const s=$D(t),o=s&&(n=JSON.parse(s))!=null?n:void 0;return Gp.set(t,o),o}catch(s){return null}},X4e=t=>{const e=Gp.get(t);if(e)return e;try{const n=$D(t),[s]=Hu(n,Ho({path:ms,args:o=>{const[a]=Hu(ms(o),sT);return a!=null?a:{}}}));return s?(Gp.set(t,s),s):null}catch(n){return null}},B1=t=>{var e;return(e=t.resource_name)!=null?e:""},e6e=t=>{var e;return(e=t.resolved_pineapple_uri)!=null?e:""},Ww="api_tool",A5=t=>t.filter(e=>{var n,s;return e.author.role===Ke.Assistant&&!!((n=e.recipient)!=null&&n.startsWith(Ww))||e.author.role===Ke.Tool&&!!((s=e.author.name)!=null&&s.startsWith(Ww))}),K0=t=>{var e;if(t){if("metadata"in t)return(e=t.metadata)==null?void 0:e.chatgpt_sdk;if("chatgpt_sdk"in t)return t.chatgpt_sdk}else return},VD=gW(t6e);function t6e(t){var m,g,p,h,x,v,y,b,C,S;const e=A5(t),n=e.find(E=>E.author.role===Ke.Assistant),s=e.findLast(E=>E.author.role===Ke.Tool&&!!K0(E)),o=K0(n),a=K0(s);let i=o;a&&(i=w(w({},i),a)),i=Ks(i);const l=B1(i),c=e6e(i),d=()=>n?X4e(n):null,u=()=>s?J4e(s):null,f=(m=i.tool_response_metadata)!=null?m:null;return new Proxy({isComplete:!!s&&!!n,invocationUuid:(g=i.invocation_uuid)!=null?g:null,turnUuid:(p=i.turn_uuid)!=null?p:null,distributionChannel:(h=i.distribution_channel)!=null?h:pW.EXTERNAL,sessionId:(x=i.session_id)!=null?x:null,connectorId:(v=i.attribution_id)!=null?v:"",isError:(y=i.is_error)!=null?y:!1,messages:t,widgetId:(C=(b=s==null?void 0:s.id)!=null?b:n==null?void 0:n.id)!=null?C:"",toolMessageId:(S=s==null?void 0:s.id)!=null?S:null,metadata:i,widgetType:l,widgetParent:c,toolResponseMetadata:f,toolInput:null,toolOutput:null,path:null},{get(E,k){var T,M,A,I,N,L;if(k==="path")return(M=(T=d())==null?void 0:T.path)!=null?M:null;if(k==="toolInput")return(I=(A=d())==null?void 0:A.args)!=null?I:null;if(k==="toolOutput")return(N=u())!=null?N:null;if(k in E)return(L=Object.getOwnPropertyDescriptor(E,k))==null?void 0:L.value}})}const n6e=t=>A5(t).some(e=>{var n;return!!((n=e.metadata)!=null&&n.chatgpt_sdk)}),s6e=t=>{var e,n;return t?{isTrusted:!0,connectDomains:(e=t.connect_domains)!=null?e:[],resourceDomains:(n=t.resource_domains)!=null?n:[]}:null},oy=t=>{if(!t)return null;try{return new URL(t).hostname.replaceAll(".","-")}catch(e){return t.startsWith("http")?null:oy("https://".concat(t))}},$g=(t,e)=>{var o,a,i,l,c,d,u,f,m,g,p;const n=(a=(o=e==null?void 0:e.domain)!=null?o:t.metadata.widget_domain)!=null?a:null,s=(l=oy(n))!=null?l:oy((i=t.metadata.resolved_pineapple_uri)!=null?i:null);return{domain:n,subdomain:s,name:(c=e==null?void 0:e.name)!=null?c:null,html:(d=e==null?void 0:e.html)!=null?d:null,logoUrl:(u=e==null?void 0:e.logo_url)!=null?u:null,csp:e!=null&&e.csp?s6e(e.csp):null,prefersBorder:(m=(f=e==null?void 0:e.prefers_border)!=null?f:t.metadata.prefers_border)!=null?m:!1,hideWidgetFeedback:(p=(g=e==null?void 0:e.hide_widget_feedback)!=null?g:t.metadata.hide_widget_feedback)!=null?p:!1}},o6e="oai-ecosys-db",Dr="resolved-widget-cache",a6e=10;class r6e{constructor(e){J(this,"db");J(this,"openDB",cu({name:"open_db"},()=>new Promise((e,n)=>{const s=indexedDB.open(o6e,1);s.onupgradeneeded=()=>{const o=s.result;o.objectStoreNames.contains(Dr)||o.createObjectStore(Dr,{keyPath:"key"}).createIndex("lastAccess","lastAccess")},s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})));J(this,"getDB",cu({name:"get_db"},async()=>{const e=await this.db;return!e||e.close===void 0||e.version===0?(this.db=this.openDB(),this.db):e}));J(this,"get",cu({name:"get"},async e=>{const n=await this.getDB();return n?new Promise((s,o)=>{const i=n.transaction(Dr,"readwrite").objectStore(Dr),l=i.get(e);l.onsuccess=()=>{if(l.result==null)return s(null);const c=oT(l.result,{key:()=>e,domain:Jl(ms),subdomain:Jl(ms),name:Jl(ms),html:Jl(ms),logoUrl:Jl(ms),csp:Jl(Ho({isTrusted:Du,connectDomains:Z4,resourceDomains:Z4})),prefersBorder:Du,hideWidgetFeedback:Du,lastAccess:p8});c.lastAccess=Date.now(),i.put(c),s(c)},l.onerror=()=>o(l.error)}):null}));J(this,"set",cu({name:"set"},async(e,n)=>{const s=await this.getDB();if(!s)return;const a=s.transaction(Dr,"readwrite").objectStore(Dr);a.put(U(w({},n),{key:e,lastAccess:Date.now()})),await new Promise((i,l)=>{const c=a.count();c.onsuccess=()=>{if(c.result>a6e){const f=a.index("lastAccess").openCursor();f.onsuccess=()=>{const m=f.result;m&&a.delete(m.primaryKey),i()},f.onerror=()=>l(f.error);return}i()},c.onerror=()=>l(c.error)})}));J(this,"delete",cu({name:"delete"},async e=>{const n=await this.getDB();if(!n)return;const o=n.transaction(Dr,"readwrite").objectStore(Dr);await new Promise((a,i)=>{const l=o.delete(e);l.onsuccess=()=>a(),l.onerror=()=>i(l.error)})}));this.ctx=e,this.db=this.openDB()}}const cu=({name:t},e)=>async(...n)=>{try{return await e(...n)}catch(s){return P(async()=>{const{DatadogLogger:o}=await import("./ncw8zw682jinppua.js").then(a=>a.ym);return{DatadogLogger:o}},__vite__mapDeps([10,1,11])).then(({DatadogLogger:o})=>{o.addError(s)}),P(async()=>{const{statsc:o,Namespace:a}=await import("./ncw8zw682jinppua.js").then(i=>i.yn);return{statsc:o,Namespace:a}},__vite__mapDeps([10,1,11])).then(({statsc:o,Namespace:a})=>{o.count(a.ECOSYSTEM,"resolved_widget_cache.".concat(t,".error"))}),null}},i6e=Hn(t=>new r6e(t)),l6e=({metadata:t})=>t.html_asset_pointer,HD=({metadata:t,path:e})=>["htmlAsset",t.resolved_pineapple_uri,t.html_asset_pointer,e],c6e=(t,e)=>{var n;return $g(e,(n=t.getQueryData(HD(e)))!=null?n:null)},gQe=t=>{"use no forget";const e=V(),n=i6e(e),s=l6e(t),{path:o}=t,{html_asset_pointer:a,resolved_pineapple_uri:i}=t.metadata,l=HD(t),{data:c,isLoading:d}=rt({queryKey:["resolvedWidgetCache",s],queryFn:()=>s?n.get(s):Promise.resolve(null),enabled:!!s,staleTime:1/0,gcTime:1/0}),{data:u,isLoading:f,isError:m,refetch:g}=rt({queryKey:l,queryFn:async()=>{try{const h=await ge.safeGet("/ecosystem/widget",{parameters:{query:{uri:i!=null?i:"",template_pointer:a!=null?a:"",resource_path:o!=null?o:""}}});if(s){const x=$g(t,h);n.set(s,x)}return h}catch(h){throw s&&h instanceof Un&&h.status===404&&n.delete(s),h}},gcTime:0,enabled:l.every(Boolean)}),p=w(w(w({},$g(t,null)),c!=null?c:void 0),u?$g(t,u):{});return U(w({},p),{refetch:g,isLoading:f&&(!c||d),isError:m})};var Cf,qc,Yc,sh;class d6e{constructor(e){J(this,"requestBlockingPromiseListener",null);J(this,"subscriptionEffect",null);J(this,"showLoadingBar$",Be(!1));J(this,"transitioningId$",Be(null));J(this,"pinnedChatSDK$",Be(null));J(this,"pinnedChatSDKId$",St(()=>{var e,n;return(n=(e=this.pinnedChatSDK$())==null?void 0:e.widgetId)!=null?n:null}));J(this,"pinnedWidgetType$",St(()=>{var n;const e=(n=this.pinnedChatSDK$())==null?void 0:n.metadata;return e?B1(e):null}));J(this,"conversationChatSDKEntries$",St(()=>Ji(this.conversation).map(({messages:n})=>n6e(n)?VD(n):null).filter(n=>n!=null),{equals:Sl}));J(this,"widgetStateCache$",Be(new Map,{equals:()=>!1}));J(this,"conversationTurnSnapshot$",St(()=>this.hasPinnedWidget$()?bn(()=>Ji(this.conversation)):[]));J(this,"hasPinnedWidget$",St(()=>this.pinnedWidgetType$()!=null));J(this,"displayMode$",Be("inline"));J(this,"title$",Be(null));ao(this,Cf,Be(null));J(this,"maxWidgetHeight$",St(()=>{const{height:e}=FI(this.conversation.ctx);if(this.displayMode$()!=="inline")return this.displayMode$()==="pip"?e/2-38:void 0}));ao(this,qc,new Set);ao(this,Yc,new Map);J(this,"closedWidgetIds$",Be(new Set,{equals:()=>!1}));J(this,"pinnedWidgetHeight$",St(()=>{const e=this.maxWidgetHeight$(),n=this.pinnedWidgetType$(),s=wn(this,Cf).call(this);return n?Math.min(e!=null?e:0,s!=null?s:0):null}));ao(this,sh,e=>fi(async n=>{const s=this.conversation.serverId$();if(s)try{await ge.safePost("/ecosystem/widget_state",{requestBody:{conversation_id:s,message_id:e,state:JSON.stringify(n)}})}catch(o){}finally{wn(this,qc).delete(e)}},2e3));J(this,"getLatestChatSDK$",e=>{const n=this.pinnedWidgetType$();if(!n||n!==e.widgetType)return e;const s=Ji(this.conversation);return zw(e,s,n)});this.conversation=e,this.requestBlockingPromiseListener=JY(async()=>{await Promise.all(wn(this,Yc).values().map(n=>n.flush()))},()=>wn(this,qc).size>0)}subscribeToNewMessages$(e,n){this.subscriptionEffect&&this.subscriptionEffect(),this.subscriptionEffect=Rl(()=>{const s=this.pinnedWidgetType$();if(!s)return;const o=this.conversationTurnSnapshot$(),i=Ji(this.conversation).slice(o.length);if(i.length===0)return;const l=zw(e,i,s);n(c=>{var u,f;return!c||l.toolOutput!=null?l:U(w({},l),{toolResponseMetadata:(u=l.toolResponseMetadata)!=null?u:c.toolResponseMetadata,toolOutput:(f=l.toolOutput)!=null?f:c.toolOutput})})})}setPinnedWidgetHeight(e){wn(this,Cf).set(e)}isPinned$(e){return this.pinnedWidgetType$()===e.widgetType}isPinOrigin$(e){return this.pinnedChatSDKId$()===e.widgetId}setDisplayMode$(e,n,s){vo(()=>{this.displayMode$.set(n),n==="fullscreen"?s&&this.title$.set(s):this.title$.set(null),n==="pip"||n==="fullscreen"?this.pinnedChatSDK$.set(e):this.pinnedChatSDK$.set(null)})}setWidgetState$(e,n){this.widgetStateCache$.set(this.widgetStateCache$().set(e,n));let s=wn(this,Yc).get(e);s||(s=wn(this,sh).call(this,e),wn(this,Yc).set(e,s)),wn(this,qc).add(e),s(n)}closeWidget$(e,n){const s=this.conversation.serverId$();s&&(this.closedWidgetIds$.set(this.closedWidgetIds$().add(e)),ge.safePost("/ecosystem/widget_close",{requestBody:{conversation_id:s,message_id:e,close_reason:n}}))}callTool$(e,n,s){return ge.safePost("/ecosystem/call_mcp",{requestBody:{app_uri:e,tool_name:n,tool_input:s}})}getWidgetState$(e){var o,a;const n=(o=this.widgetStateCache$().get(e.widgetId))!=null?o:Gw(e.metadata);if(n!=null||e.sessionId==null)return n;const s=this.conversationChatSDKEntries$();for(let i=s.length-1;i>=0;i--){const l=s[i],c=(a=this.widgetStateCache$().get(l.widgetId))!=null?a:Gw(l.metadata);if(l.widgetId!==e.widgetId&&l.sessionId===e.sessionId&&c!=null)return c}return null}getWidgetStateAndProps$(e){const{toolInput:n,toolOutput:s,toolResponseMetadata:o}=e;return{toolInput:n,toolOutput:s,toolResponseMetadata:o,widgetState:this.getWidgetState$(e)}}fullscreenWidgetPlaceholder$(e){if(this.displayMode$()!=="fullscreen")return null;const n=this.pinnedChatSDK$();if(!n)return null;const s=c6e(Qo(this.conversation.ctx),n);return s!=null&&s.name?e.formatMessage(Ge({id:"oECdDM",defaultMessage:"Ask {name}"}),{name:s.name}):null}}Cf=new WeakMap,qc=new WeakMap,Yc=new WeakMap,sh=new WeakMap;const u6e=Ef(t=>new d6e(t)),zw=(t,e,n)=>{var s,o;for(let a=e.length-1;a>=0;a--){const i=e[a];for(let l=i.messageGroups.length-1;l>=0;l--){const c=i.messageGroups[l];if(c.type===ar.JITPlugin)for(let d=c.messages.length-1;d>=0;d--){const u=c.messages[d];if((s=u.metadata)!=null&&s.chatgpt_sdk&&n===B1((o=u.metadata)==null?void 0:o.chatgpt_sdk))return VD(c.messages)}}}return t};function pQe(){return!1}const f6e={apps:[],selectedApps:[]},hQe=Ft(Af(Mn(()=>f6e))),m6e=async t=>{var n;const e=t.map(s=>s.id);if(e.length!==0)return(n=hW)==null?void 0:n.pairing.getContentForPairedApps(e)},_Qe=async()=>{},xQe=({event:t,conversationMode:e,systemHints:n})=>{const{systemHints:s,extraStreamParams:o}=Xh(n);return{sourceEvent:t,completionType:Qa.Continue,extraStreamParams:o,completionMetadata:{conversationMode:e,systemHints:s}}};function g6e(t){if(t===Pe.Research)return"research";if(t===Pe.Agent)return"agent";if(t===Pe.Glaux)return"scout";if(t===Pe.Search)return"file_search"}const yQe=async({ctx:t,clientThreadId:e,attachments:n,content:s,contentToSend:o,conversationMode:a,hasSelectedApps:i,desktopOrigin:l,shouldCollectSidebarContext:c,desktopSidebarContext:d,isMessageFollowupsEnabled:u,selectedApps:f,selectedGizmoTag:m,selectedRepos:g,selectedSources:p,selectedMCPConnectors:h,selectedConnectorIds:x,selectedSyncKnowledgeStoreIds:v,searchConnectorIds:y,noFullActionConnectorIds:b,startedWithByoMcp:C,sourceEvent:S,systemHints:E,allSystemHints:k,usedDictation:T,dictationEdited:M,dictationOriginalText:A,dictationAssetPointer:I,dictationAssetTTL:N,dictationAssetFormat:L,isN7jupdActive:O,isForceAllowCustomMcpModeEnabled:D,thinkingEffort:$})=>{var Ee,be,fe,ue;const H=e5({namespace:fm.CompletionRequest,opts:{expectedTimingLogs:[{name:"prompt_submitted",expectedInMs:3e3}],debug:!1}});H.reset();const G=[],{targetedContent:Z}=hm.getState();if(i){const _e=await m6e(f);_e&&G.push(_W(_e))}const Q=new Map;k.forEach(_e=>Q.set(_e.systemHint,_e)),(C||h&&h.some(_e=>_e.status==="ONLY_ME")||E.some(_e=>{var Te;return(Te=Q.get(_e))==null?void 0:Te.isDangerous}))&&G.push(qy("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));const q=[],{rebaseSystemMessageContent:Y}=tp.getState();Y&&q.push(xW(Y));const te=w({},a);"gizmo"in te&&delete te.gizmo;let ae=te;if(l){const _e=it.newConversationGizmoId$();_e&&(ae={kind:wt.GizmoInteraction,gizmo_id:_e},it.newConversationGizmoId$.set(void 0))}const se=E.includes(Pe.Search),ce=E.includes(Pe.Research),X=E.includes(Pe.Agent),ee=E.includes(Pe.Glaux),ie=E.includes(Pe.Slurm),de=E.length===0,me=se?Xu.CONVERSATION_COMPOSER_WEB_ICON:void 0,xe=r2e(),pe=Gh(),Me=Intl.DateTimeFormat().resolvedOptions().timeZone,Ce=l?K4e({systemHints:E,isN7jupdActive:O}):void 0,ke=Object.keys(pe).length>0,Le=(Ee=u6e(xt(t,e)).pinnedChatSDK$())==null?void 0:Ee.toolMessageId,De=is(s,w(w(w(w(w(w(w(w(w(w(w(w(w(w({},n.length>0&&{attachments:n}),m&&{gizmo_id:m.gizmo.id}),p&&{caterpillar_selected_sources:ce?_i(p):void 0,developer_mode_connector_ids:h==null?void 0:h.map(_e=>_e.id),selected_mcp_sources:ce||ie||ee||O&&D?h:void 0,selected_connector_ids:x?Array.from(x):void 0,selected_sync_knowledge_store_ids:v?Array.from(v):void 0,selected_sources:ie||ee||ce||O||de||X?_i(p,ie||ee||de):void 0}),g&&{selected_github_repos:[...(be=g.selectedRepos)!=null?be:[]],selected_all_github_repos:g.selectedAllRepos}),E.length>0&&{system_hints:E}),y&&y.length>0&&{search_connectors:y}),b&&b.length>0&&{no_full_action_connectors:b}),!!o.metadata&&{serialization_metadata:o.metadata}),Le?{chatgpt_sdk_focused_message_id:Le}:null),xe.length>0&&{canvas:{user_created_textdocs:xe.map(_e=>({user_created_temp_textdoc_id:_e.tempTextdocId,type:_e.type,title:_e.title,content:_e.content,create_source:_e.create_source,remix_shared_textdoc_id:_e.remixSharedTextdocId}))}}),ke&&{__internal:{search_settings:ke?pe:void 0}}),T&&w(w(w(w(w({dictation:!0},M&&{dictation_edited:!0}),A&&{dictation_original_text:A}),I&&{dictation_asset_pointer:I}),N&&{dictation_asset_ttl:N}),L&&{dictation_asset_format:L})),(ce||O)&&Me&&{user_timezone:Me}),l?w(w({},await Lh(c&&d!=null?d:void 0,l,"user",E)),Ce!=null?Ce:{}):{}));let le={sourceEvent:S,completionMetadata:{conversationMode:ae,systemHints:E,searchSource:me},promptMessage:De,prependMessages:G,appendMessages:q,thinkingEffort:$,profiler:H};const oe={};if(le=Q4e(le),(fe=le.completionMetadata)!=null&&fe.systemHints){let _e=!1;le.completionMetadata.systemHints=le.completionMetadata.systemHints.filter(Te=>Te===Pe.Search?(_e=!0,!1):!0),_e&&(oe.forceUseSearch=!0)}u&&(oe.enableMessageFollowups=!0),le.extraStreamParams=oe,Z!=null&&Z.createNewCompletionParams&&(le=await Z.createNewCompletionParams(le));try{const _e=E.length>0?g6e(E[0]):void 0;yc.logSelectionChanged({selectedSources:p!=null?p:new Set,selectedMCPSources:(ue=h==null?void 0:h.map(Te=>Te.id))!=null?ue:[],referrer:"composer_submit",triggerHint:_e})}catch(_e){}return H.logTimingOnce("request_params_ready"),le},p6e=t=>{"use forget";var b;const e=W.c(27),{clientThreadId:n,composerController:s,availableSystemHints:o}=t,a=V();let i;e[0]!==a?(i=yW(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=xs(),d=T8(),u=W3(),f=M8(),m=_.useRef(void 0);let g;e:{if(!l){let T;e[2]===Symbol.for("react.memo_cache_sentinel")?(T={},e[2]=T):T=e[2],g=T;break e}let C,S;if(e[3]!==o){const T=(b=o==null?void 0:o.filter(h6e))!=null?b:[],M=T.map(_6e).flat().filter(x6e),A=[];T.forEach(I=>{var N;(N=I.keywordInvocations)==null||N.forEach(L=>{A.push([L.toLowerCase(),I])})}),C=Object.fromEntries(A),S=M.length>0?new RegExp("^(".concat(M.join("|"),")\\s+"),"ig"):void 0,e[3]=o,e[4]=C,e[5]=S}else C=e[4],S=e[5];const E=S;let k;e[6]!==f||e[7]!==c||e[8]!==C||e[9]!==E?(k={activeSystemHintType:c,activeConnectorSystemTypes:f,keywordToSystemHintMap:C,regex:E},e[6]=f,e[7]=c,e[8]=C,e[9]=E,e[10]=k):k=e[10],g=k}const p=g;let h,x;e[11]!==s||e[12]!==p||e[13]!==l?(h=()=>{l&&vW(Pt(s),p)},x=[s,p,l],e[11]=s,e[12]=p,e[13]=l,e[14]=h,e[15]=x):(h=e[14],x=e[15]),_.useEffect(h,x);let v,y;e[16]!==f||e[17]!==c||e[18]!==d||e[19]!==o||e[20]!==n||e[21]!==s||e[22]!==a||e[23]!==l||e[24]!==u?(v=()=>{if(!l)return;const C=S=>{var T;const E=Pt(s),{matches:k}=(T=CW.getState(E.state))!=null?T:{};return{matches:k}};return wa(()=>C(q3(s)),S=>{const{matches:E}=S,k=m.current,T=new Set([...E!=null?E:[]].map(y6e));m.current=T;const M=[...E!=null?E:[]].filter(O=>{const{systemHintType:D}=O;return!(k!=null&&k.has(D))}),A=[...k!=null?k:[]].filter(O=>!T.has(O));if(!E)return;let I=M.map(O=>({systemHint:o==null?void 0:o.find(D=>D.systemHint===O.systemHintType),keyword:O.keyword}));const N=A.map(O=>o==null?void 0:o.find(D=>D.systemHint===O)),L=o==null?void 0:o.find(O=>O.systemHint===c);if(!(L&&!z3(L.systemHint))){if(I.length>0){if(!Ps(a,"2350526063").get("has_suggestions_enabled",!0))return;const H=Ps(a,"2993367469").get("connector_id",null);if(I=I.filter(G=>{const{systemHint:Z}=G;if(!(Z!=null&&Z.isConnector))return!0;const Q=bW(Z.systemHint);return Q?Q!==H:!0}),I.length===0)return}I.forEach(O=>{const{systemHint:D,keyword:$}=O;D!=null&&D.isConnector&&!f.has(D.systemHint)&&(sf(D.systemHint,of.PrefixMatch,U(w({},Tn({clientThreadId:n})),{matched_keyword:$})),d(D.systemHint,{analyticsMetadata:{clientThreadId:n}}))}),N.forEach(O=>{O!=null&&O.isConnector&&f.has(O.systemHint)&&(sf(O.systemHint,of.PrefixRemove,w({},Tn({clientThreadId:n}))),u(O.systemHint,{analyticsMetadata:{clientThreadId:n}}))})}},{fireImmediately:!0,equals:Sl})},y=[s,n,d,u,o,c,f,l,a],e[16]=f,e[17]=c,e[18]=d,e[19]=o,e[20]=n,e[21]=s,e[22]=a,e[23]=l,e[24]=u,e[25]=v,e[26]=y):(v=e[25],y=e[26]),_.useEffect(v,y)};function h6e(t){var e;return(e=t.keywordInvocations)==null?void 0:e.length}function _6e(t){return t.keywordInvocations}function x6e(t){return t!==void 0}function y6e(t){const{systemHintType:e}=t;return e}function I5(t){const e=V(),n=xs(),s=re(()=>t!=null&&GD(yn(xt(e,t)).id,n));return _.useMemo(()=>({isOdysseyMode:s}),[s])}function GD(t,e){return t===SW||gl(e)}const WD=t=>{"use forget";var L,O;const e=W.c(34),{clientThreadId:n}=t,s=xs(),o=Sn(),a=HT();let i;e[0]!==o||e[1]!==a?(i=(o==null?void 0:o.isPersonalAccount())&&a,e[0]=o,e[1]=a,e[2]=i):i=e[2];const l=!!i,c=I5(n).isOdysseyMode,d=c||s===Pe.Research,u=Nf(),m=!!(u!=null&&u.softmentionEnabled)&&d;let g;e[3]!==m?(g={enabled:m},e[3]=m,e[4]=g):g=e[4];const{connectedTypes:p,linkIdToConnectedType:h}=g3(g);let x;e[5]!==m?(x={enabled:m},e[5]=m,e[6]=x):x=e[6];const{connectedTypes:v}=GT(x),{data:y}=WT();y==null||y.connection_statuses,u==null||u.connectorConfig;let b,C,S;if(e[7]!==s||e[8]!==(u==null?void 0:u.connectorConfig)||e[9]!==v||e[10]!==m||e[11]!==c||e[12]!==l||e[13]!==p||e[14]!==h||e[15]!==(y==null?void 0:y.connection_statuses)){const D=(L=y==null?void 0:y.connection_statuses.reduce(v6e,new Set))!=null?L:new Set;let $=p;if(s===Pe.Research||c)$=v;else{const Y=(O=y==null?void 0:y.connection_statuses.reduce((te,ae)=>{if(["activated","partially_activated"].includes(ae.user_connection_details.activation_status)&&ae.user_connection_details.backing_link_id){const se=h.get(ae.user_connection_details.backing_link_id);se&&te.add(se)}return te},new Set))!=null?O:new Set;$=new Set([...p].filter(te=>te===yt.GDRIVE_ACTION_CONNECTOR&&l&&D.has("gdrive_sync_connector")||Y.has(te)?!1:!(te===yt.SHAREPOINT_CONNECTOR&&D.has("sharepoint_admin_sync_connector"))))}const H=(u==null?void 0:u.connectorConfig)||{},G={keywordSet:new Set,connectorToKeywordsMap:{},keywordsConnectorMap:{}},{keywordSet:Z,connectorToKeywordsMap:Q,keywordsConnectorMap:q}=Object.entries(H).reduce((Y,te)=>{const[ae,se]=te;if($.has(ae)||D.has(ae)){const ce=((se==null?void 0:se.keywords)||[]).map(b6e);Y.connectorToKeywordsMap[ae]=ce,ce.forEach(X=>{Y.keywordSet.add(X),Y.keywordsConnectorMap[X]=ae})}return Y},G);b=Q,C=q,S=m?Array.from(Z):[],e[7]=s,e[8]=u==null?void 0:u.connectorConfig,e[9]=v,e[10]=m,e[11]=c,e[12]=l,e[13]=p,e[14]=h,e[15]=y==null?void 0:y.connection_statuses,e[16]=b,e[17]=C,e[18]=S}else b=e[16],C=e[17],S=e[18];let E;e[19]!==b||e[20]!==m?(E=m?b:{},e[19]=b,e[20]=m,e[21]=E):E=e[21];let k;e[22]!==m||e[23]!==C?(k=m?C:{},e[22]=m,e[23]=C,e[24]=k):k=e[24];let T;e[25]!==S||e[26]!==E||e[27]!==k?(T={filteredKeywords:S,connectorToKeywordsMap:E,keywordsConnectorMap:k},e[25]=S,e[26]=E,e[27]=k,e[28]=T):T=e[28];const{filteredKeywords:M,connectorToKeywordsMap:A,keywordsConnectorMap:I}=T;let N;return e[29]!==A||e[30]!==m||e[31]!==M||e[32]!==I?(N={enabled:m,keywords:M,connectorToKeywordsMap:A,keywordsConnectorMap:I},e[29]=A,e[30]=m,e[31]=M,e[32]=I,e[33]=N):N=e[33],N};function v6e(t,e){return["activated","partially_activated"].includes(e.user_connection_details.activation_status)&&t.add(e.user_connection_details.connection_type),t}function b6e(t){return t.toLowerCase()}const C6e=({clientThreadId:t,composerController:e})=>{const{mentionedSources:n,addMentionedSource:s,deleteMentionedSource:o}=Pa(t),a=xs(),{setThreadSystemHintMode:i}=sa(),l=I5(t).isOdysseyMode,c=_.useRef(l),{keywords:d,connectorToKeywordsMap:u,keywordsConnectorMap:f}=WD({clientThreadId:t});_.useEffect(()=>{A8(d,Pt(e))},[e,d]);const m=_.useRef(a);_.useEffect(()=>{const x=m.current;m.current=a;const v=Pt(e),y=c.current;if(c.current=l,y&&!l&&c_(d_(v.state),v),(x===Pe.Slurm||x===Pe.Research)&&a==null){const b=d_(v.state);c_(b,v),b.forEach(C=>o(f[C]))}},[a,e,o,l,f]);const g=_.useRef(n);_.useEffect(()=>{const x=g.current;if(g.current=n,!x)return;const v=Array.from(x).filter(b=>!(n!=null?n:new Set).has(b)),y=[];v.forEach(b=>{var C;y.push(...(C=u[b])!=null?C:[])}),c_(y,Pt(e))},[e,u,n]);const p=_.useRef([]),h=a!=null;_.useEffect(()=>{const x=y=>{if(p.current.length===0&&y.length>0&&!h){const S={clientThreadId:t};i(Pe.Slurm,!0,S)}const b=y.filter(S=>!p.current.includes(S)),C=p.current.filter(S=>!y.includes(S));b.forEach(S=>s(S)),C.forEach(S=>o(S)),p.current=y},v=y=>d_(y).map(b=>f[b.toLowerCase()]);return Rl(()=>{x(wW(v(q3(e))))})},[s,t,e,o,f,h,i])},vQe=({clientThreadId:t,currentModelId:e,isCompletionInProgress:n,composerController:s,expireConduit:o,availableSystemHints:a})=>{const i=V(),l=xs(),c=Vy(y=>{var b,C;return(C=(b=y.threads[t])==null?void 0:b.prepareRequestBlocked)!=null?C:!1}),{isOpen:d}=pre();C6e({clientThreadId:t,composerController:s}),p6e({clientThreadId:t,composerController:s,availableSystemHints:a});const u=_.useRef(n);_.useEffect(()=>{u.current=n},[n]);const f=_.useRef(!1);_.useEffect(()=>{f.current=!1},[t]);const m=_.useCallback(y=>{u.current?o&&Ze(t,b=>{b.conduitToken=null,b.prepareState=null}):Ze(t,b=>{b.conduitToken=y,b.prepareState="success"})},[t,o]),g=_.useRef(null);g.current=()=>e&&fX(t,e,l?[l]:void 0,m,{isRegen:!1,isOnboardingConversation:d,delayAfterCompletion:!0});const p=_.useCallback(()=>{var y;return(y=g.current)==null?void 0:y.call(g)},[]),h=_.useCallback(u3(()=>p(),5e3,{leading:!0,trailing:!0}),[]),x=_.useRef(!1),v=Y3();return _.useEffect(()=>{if(v){if(!x.current){x.current=!0;return}u.current||c||f.current&&p()}},[v,t,e,l,c]),_.useEffect(()=>{h.cancel()},[n,h]),_.useEffect(()=>{if(!(n||!Wh(i,!0)))return wa(()=>q3(s),()=>{f.current=!0,h()})},[n,s,h,i]),null},S6e="side_chat",bQe="ntp",CQe="website";function SQe(t){"use forget";var d;const e=W.c(4),{clientThreadId:n,isKaur1br5Client:s}=t,o=pO(s?n:void 0);let a;e:{if(!o){a=null;break e}a=((d=o.metadata)==null?void 0:d.n7jupd_local_safe_mode)===!0?"incognito":"signedInAccounts"}const i=a;let l,c;return e[0]!==i||e[1]!==s?(l=()=>{s&&i&&it.agentSessionMode$()!==i&&it.agentSessionMode$.set(i)},c=[i,s],e[0]=i,e[1]=s,e[2]=l,e[3]=c):(l=e[2],c=e[3]),_.useEffect(l,c),o!=null}const w6e="signedInAccounts";function k6e(t){it.agentSessionMode$.set(t)}function E6e(t){it.agentSafeModeHasSeenNux$.set(t)}function zD(t){k6e(t);const e=Md();e==null||e.updateAgentSafeMode(t)}function T6e(t){E6e(t);const e=Md();e==null||e.updateAgentSafeModeHasSeenNux(t)}const Ss=Se({incognitoLabel:{id:"R+8byO",defaultMessage:"Start logged out"},incognitoDescription:{id:"Omk3s1",defaultMessage:"Let ChatGPT work alongside you logged out from your accounts."},incognitoMenuLabel:{id:"2E6cUi",defaultMessage:"Logged out"},signedInLabel:{id:"ajcZ1i",defaultMessage:"Start logged in"},signedInDescription:{id:"+aVek4",defaultMessage:"ChatGPT works alongside you using your logged in accounts."},signedInMenuLabel:{id:"dPv7uS",defaultMessage:"Logged in"},modalTitle:{id:"QvXNKA",defaultMessage:"Agent mode may introduce risk"},modalDescriptionIntroHeading:{id:"M46Qff",defaultMessage:"Agent mode may introduce risk."},modalDescriptionIntroBody:{id:"bwpgjC",defaultMessage:"In Agent mode, ChatGPT can perform complex tasks in the browser for you."},modalDescriptionLoggedInHeading:{id:"7YCY6E",defaultMessage:"Logged in:"},modalDescriptionLoggedInBody:{id:"6AOX4E",defaultMessage:'In "logged in" mode, ChatGPT can access your logged in sites, making it faster to complete tasks. ChatGPT is built to protect you, but there is always some risk that attackers could successfully break our safeguards to access your data, or take actions as you on logged in sites. You can use logged out mode to reduce risk.'},modalDescriptionLoggedOutHeading:{id:"seaiYG",defaultMessage:"Logged out:"},modalDescriptionLoggedOutBody:{id:"Gw4NKU",defaultMessage:'Use "logged out" mode to have Agent mode use sites without being logged in as you. You can still log ChatGPT agent into individual sites, allowing it to use just those sites logged in.'},modalIncognitoCta:{id:"JEr/J7",defaultMessage:"Start logged out"},modalSignedInCta:{id:"kGLOXd",defaultMessage:"Start logged in"},modalCancelCta:{id:"5anpHu",defaultMessage:"Cancel"}}),M6e=t=>({introHeading:t.formatMessage(Ss.modalDescriptionIntroHeading),introBody:t.formatMessage(Ss.modalDescriptionIntroBody),loggedInHeading:t.formatMessage(Ss.modalDescriptionLoggedInHeading),loggedInBody:t.formatMessage(Ss.modalDescriptionLoggedInBody),loggedOutHeading:t.formatMessage(Ss.modalDescriptionLoggedOutHeading),loggedOutBody:t.formatMessage(Ss.modalDescriptionLoggedOutBody)}),A6e=t=>["".concat(t.introHeading," ").concat(t.introBody),"".concat(t.loggedInHeading," ").concat(t.loggedInBody),"".concat(t.loggedOutHeading," ").concat(t.loggedOutBody)].join("\n\n"),I6e=R(()=>P(()=>import("./l4yl232ok815njdc.js"),__vite__mapDeps([331,1])),{loading:t=>F(t)});function j6e(t){"use forget";const e=W.c(35),{isOpen:n,onClose:s,onModeSelected:o}=t,a=ne(),i=re(it.agentSessionMode$),l=i!=null?i:w6e,c=re(it.agentSafeModeHasSeenNux$);let d,u,f;e[0]!==a?(d=M6e(a),u=a.formatMessage(Ss.modalTitle),f=A6e(d),e[0]=a,e[1]=d,e[2]=u,e[3]=f):(d=e[1],u=e[2],f=e[3]);let m;e[4]!==a?(m=a.formatMessage(Ss.modalIncognitoCta),e[4]=a,e[5]=m):m=e[5];let g;e[6]!==a?(g=a.formatMessage(Ss.modalSignedInCta),e[6]=a,e[7]=g):g=e[7];let p;e[8]!==a?(p=a.formatMessage(Ss.modalCancelCta),e[8]=a,e[9]=p):p=e[9];let h;e[10]!==d||e[11]!==u||e[12]!==f||e[13]!==m||e[14]!==g||e[15]!==p?(h={title:u,description:f,descriptionSections:d,incognitoCta:m,signedInCta:g,cancelCta:p},e[10]=d,e[11]=u,e[12]=f,e[13]=m,e[14]=g,e[15]=p,e[16]=h):h=e[16];const x=h;let v,y;e[17]!==c||e[18]!==n?(v=()=>{n&&c===!1&&T6e(!0)},y=[c,n],e[17]=c,e[18]=n,e[19]=v,e[20]=y):(v=e[19],y=e[20]),_.useEffect(v,y);let b;e[21]!==s||e[22]!==o?(b=E=>{zD(E),o==null||o(E),s()},e[21]=s,e[22]=o,e[23]=b):b=e[23];const C=b;let S;return e[24]!==C||e[25]!==n||e[26]!==x.cancelCta||e[27]!==x.description||e[28]!==x.descriptionSections||e[29]!==x.incognitoCta||e[30]!==x.signedInCta||e[31]!==x.title||e[32]!==l||e[33]!==s?(S=r.jsx(N6e,{isOpen:n,onClose:s,selectedMode:l,onSelectMode:C,title:x.title,description:x.description,descriptionSections:x.descriptionSections,incognitoCta:x.incognitoCta,signedInCta:x.signedInCta,cancelCta:x.cancelCta}),e[24]=C,e[25]=n,e[26]=x.cancelCta,e[27]=x.description,e[28]=x.descriptionSections,e[29]=x.incognitoCta,e[30]=x.signedInCta,e[31]=x.title,e[32]=l,e[33]=s,e[34]=S):S=e[34],S}function N6e(t){"use forget";const e=W.c(40),{isOpen:n,onClose:s,selectedMode:o,isSubmitting:a,onSelectMode:i,title:l,description:c,descriptionSections:d,incognitoCta:u,signedInCta:f,cancelCta:m}=t;let g;e[0]!==c||e[1]!==d?(g=d?r.jsxs("div",{className:"text-token-text-secondary space-y-3 text-sm md:text-base",children:[r.jsx("p",{children:d.introBody}),r.jsxs("p",{children:[r.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:d.loggedInHeading}),r.jsx("span",{children:d.loggedInBody})]}),r.jsxs("p",{children:[r.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:d.loggedOutHeading}),r.jsx("span",{children:d.loggedOutBody})]})]}):r.jsx("p",{className:"text-token-text-secondary text-sm whitespace-pre-line md:text-base",children:c}),e[0]=c,e[1]=d,e[2]=g):g=e[2];const p=g;let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("div",{className:"bg-token-main-surface-secondary flex h-12 w-12 items-center justify-center rounded-full",children:r.jsx(I6e,{className:"icon-xl text-token-text-primary"})}),e[3]=h):h=e[3];let x;e[4]!==l?(x=r.jsx("h2",{className:"text-token-text-primary text-lg font-semibold md:text-xl",children:l}),e[4]=l,e[5]=x):x=e[5];let v;e[6]!==p||e[7]!==x?(v=r.jsxs("div",{className:"flex flex-col gap-4",children:[h,r.jsxs("div",{className:"space-y-2",children:[x,p]})]}),e[6]=p,e[7]=x,e[8]=v):v=e[8];let y;e[9]!==m||e[10]!==a||e[11]!==s?(y=r.jsx(ye,{color:"secondary",onClick:s,disabled:a,className:"md:text-base",children:m}),e[9]=m,e[10]=a,e[11]=s,e[12]=y):y=e[12];let b;e[13]!==i?(b=()=>i("incognito"),e[13]=i,e[14]=b):b=e[14];const C=o==="incognito"&&"font-medium";let S;e[15]!==C?(S=z("md:text-base",C),e[15]=C,e[16]=S):S=e[16];let E;e[17]!==u||e[18]!==a||e[19]!==b||e[20]!==S?(E=r.jsx(ye,{color:"primary",onClick:b,disabled:a,className:S,children:u}),e[17]=u,e[18]=a,e[19]=b,e[20]=S,e[21]=E):E=e[21];let k;e[22]!==i?(k=()=>i("signedInAccounts"),e[22]=i,e[23]=k):k=e[23];const T=o==="signedInAccounts"&&"font-medium";let M;e[24]!==T?(M=z("md:text-base",T),e[24]=T,e[25]=M):M=e[25];let A;e[26]!==a||e[27]!==f||e[28]!==k||e[29]!==M?(A=r.jsx(ye,{color:"primary",onClick:k,disabled:a,className:M,children:f}),e[26]=a,e[27]=f,e[28]=k,e[29]=M,e[30]=A):A=e[30];let I;e[31]!==A||e[32]!==y||e[33]!==E?(I=r.jsxs("div",{className:"flex flex-col-reverse gap-2 md:flex-row md:justify-end",children:[y,E,A]}),e[31]=A,e[32]=y,e[33]=E,e[34]=I):I=e[34];let N;return e[35]!==n||e[36]!==s||e[37]!==I||e[38]!==v?(N=r.jsxs(Mt,{isOpen:n,onClose:s,testId:"modal-aura-agent-session-mode-nux",size:"xlarge",contentClassName:"flex flex-col gap-6 p-8",children:[v,I]}),e[35]=n,e[36]=s,e[37]=I,e[38]=v,e[39]=N):N=e[39],N}function wQe(t){"use forget";const e=W.c(11),{isAgentHintActive:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=hn(),e[0]=s):s=e[0];const o=s,a=re(it.agentSafeModeHasSeenNux$),[i,l]=_.useState(!1),c=_.useRef(null),d=o&&n&&a!==!0;let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{l(!1),c.current=null},e[1]=u):u=e[1];const f=u;let m;e[2]!==d?(m=b=>d?(c.current=b,l(!0),!0):!1,e[2]=d,e[3]=m):m=e[3];const g=m;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=b=>{const C=c.current;if(c.current=null,!C)return;const S=()=>C(b);typeof queueMicrotask=="function"?queueMicrotask(S):Promise.resolve().then(S)},e[4]=p):p=e[4];const h=p;let x;e:{if(!o||!n||!i){x=null;break e}let b;e[5]!==i?(b=r.jsx(j6e,{isOpen:i,onClose:f,onModeSelected:h}),e[5]=i,e[6]=b):b=e[6],x=b}const v=x;let y;return e[7]!==v||e[8]!==g||e[9]!==i?(y={agentSessionModeNuxModal:v,closeAgentSessionModeNux:f,ensureAgentSessionModeNux:g,isAgentSessionModeNuxOpen:i},e[7]=v,e[8]=g,e[9]=i,e[10]=y):y=e[10],y}function kQe(){const t=V(),[e,n]=Us(),s=hn();_.useEffect(()=>{if(!(!s||gi(t)))return wa(()=>I8(t),o=>{let a;if(o==="mainPage"||o==="new_page_view")a=TW,kW(t);else if(o==="sidebar"||o==="sidebar_view")a=MW,EW(t);else return;e.get(a.name)!==a.value&&n(i=>{const l=new URLSearchParams(i);return l.set(a.name,a.value),l},{replace:!0})},{fireImmediately:!0})},[t,s,e,n])}function EQe(t){const e=V(),n=es(e),{setTargetedContent:s}=hm();_.useEffect(()=>{if(n)return Ch(()=>it.wantsPopulatePrompt$(),()=>{it.wantsPopulatePrompt$.set(!1);const o=it.populatePrompt;o&&(o.userMessage&&_o(Pt(t),o.userMessage),setTimeout(()=>{s(o.targetedReply?{type:"text",label:o.targetedReply,createNewCompletionParams:a=>{if(!o.targetedReply)return a;const i=Mh(o.targetedReply);return U(w({},a),{promptMessage:Hd(a.promptMessage,{metadata:{targeted_reply:o.targetedReply}}),appendMessages:a.appendMessages==null?[i]:[...a.appendMessages,i]})}}:void 0)},0))})},[n,t,s])}function P6e(t){"use forget";const e=W.c(26),{size:n,triggerIcon:s,triggerButton:o,children:a,side:i,className:l,triggerIconClassName:c,sideOffset:d,alignOffset:u,open:f,onOpenChange:m,alignAgainstAnchor:g,disableAutofocus:p,modal:h}=t,x=n===void 0?"default":n,v=i===void 0?"bottom":i,y=d===void 0?10:d,b=u===void 0?0:u,C=g===void 0?"center":g,S=p===void 0?!1:p,E=h===void 0?!1:h,k=AW();let T;e[0]!==s||e[1]!==o||e[2]!==c?(T=s?r.jsx(yr,{className:z("hover:bg-token-main-surface-secondary rounded-lg p-2",c),children:r.jsx(s,{className:"icon"})}):r.jsx(yr,{asChild:!0,children:o}),e[0]=s,e[1]=o,e[2]=c,e[3]=T):T=e[3];let M;e[4]!==S?(M=D=>{S&&D.preventDefault()},e[4]=S,e[5]=M):M=e[5];const A=x==="default";let I;e[6]!==l||e[7]!==A?(I=z({"max-w-xs min-w-[200px]":A},l),e[6]=l,e[7]=A,e[8]=I):I=e[8];let N;e[9]!==C||e[10]!==b||e[11]!==a||e[12]!==v||e[13]!==y||e[14]!==I||e[15]!==M?(N=r.jsx(Rh,{$as:Bl,side:v,sideOffset:y,alignOffset:b,align:C,collisionPadding:10,onOpenAutoFocus:M,className:I,children:a}),e[9]=C,e[10]=b,e[11]=a,e[12]=v,e[13]=y,e[14]=I,e[15]=M,e[16]=N):N=e[16];let L;e[17]!==k||e[18]!==N?(L=r.jsx(Fl,U(w({},k),{children:N})),e[17]=k,e[18]=N,e[19]=L):L=e[19];let O;return e[20]!==E||e[21]!==m||e[22]!==f||e[23]!==L||e[24]!==T?(O=r.jsxs(Dl,{open:f,onOpenChange:m,modal:E,children:[T,L]}),e[20]=E,e[21]=m,e[22]=f,e[23]=L,e[24]=T,e[25]=O):O=e[25],O}function j5(t){"use forget";const e=W.c(2);t.triggerIcon&&t.triggerButton;let n;return e[0]!==t?(n=r.jsx(P6e,w({},t)),e[0]=t,e[1]=n):n=e[1],n}function qw(t,e){return t.connector===e.connector&&t.type===e.type}const R6e=()=>Ft((t,e)=>({_messages:[],_dismissedMessages:[],getFirstMessage:()=>{var s;return(s=e()._messages[0])!=null?s:null},appendMessageIfNotDismissed:n=>{t(s=>s._messages.some(o=>qw(o,n))||s._dismissedMessages.some(o=>qw(o,n))?s:U(w({},s),{_messages:[...s._messages,n]}))},dismissMessage:n=>{t(s=>s._messages.includes(n)?U(w({},s),{_messages:s._messages.filter(o=>o!==n),_dismissedMessages:[...s._dismissedMessages,n]}):s)},clearMessages:()=>{t(n=>n._messages.length||n._dismissedMessages.length?U(w({},n),{_messages:[],_dismissedMessages:[]}):n)}})),L6e=R6e(),O6e=_.createContext(L6e);function Wp(){const t=_.useContext(O6e);return R3(t)}const ay="open-connector";function D6e(){const t=at(),e=Vn(),[n]=Us(),s=n.get(ay),o=_.useCallback(()=>{const i=new URLSearchParams(e.search);i.delete(ay),t(U(w({},e),{search:i.toString()}),{replace:!0})},[e,t]);return{connector:Object.values(Bt).find(i=>i===s),clearParam:o}}async function F6e(t,e,n,s){if(!e)return;n();let o="";s===td.Picker&&(o="".concat(ay,"=").concat(e.type)),t!=null||(t="/"),o&&(t.includes("?")?t+="&".concat(o):t+="?".concat(o)),IW({id:e.id},jW(s),"".concat(window.location.origin,"/ccc/").concat(e.id,"/oauth/callback"),t)}function B6e(t,e){t.access_token&&t.expires_at!=null&&t.expires_at*1e3<=Date.now()&&pa.expiredAccessTokenUsed(t.type,e)}function U6e(t,e,n,s,o,a,i,l){rr.uploadFile(t,il(e),e,l!=null?l:ho.Retrieval,n,s,o,{gizmoId:i},a)}function $6e(t,e,n,s,o,a,i,l,c){let d=e.title;n===Bt.GDRIVE&&(d=e.syntheticExtension?"".concat(e.title,".").concat(e.syntheticExtension):e.title);const u=e.mimeType.split(";")[0],f=u.startsWith("image/");if((o==null?void 0:o.includes(u))===!1||f&&!s.includes(u)){c.danger(l.formatMessage(Yw.unsupportedFileType,{fileName:d}),U(w({},NW),{toastId:"ccc_upload_file",loggingTitle:Yw.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}));return}rr.uploadFile(t,e.id,new File([],d,{type:u}),ho.Retrieval,s,l,c,{gizmoId:i},a,{contextConnector:n,sourceUrl:e.url,syntheticExtension:e.syntheticExtension,type:td.Picker,o365DriveId:e.o365DriveId})}const Yw=Se({unsupportedFileType:{id:"ContextConnectorUtils.unsupportedFileType",defaultMessage:"{fileName} is not a supported file type"}}),ei={uploadFile:U6e,uploadPickedFile:$6e,doContextConnectorOauthRedirect:F6e,logAttemptIfAccessTokenIsExpired:B6e},V6e=R(()=>P(()=>import("./jw9gcd6zwzvwrbw1.js"),__vite__mapDeps([332,1])),{loading:t=>F(t)}),Zw=R(()=>P(()=>import("./m0pt7qspta2dtb17.js"),__vite__mapDeps([162,1])),{loading:t=>F(t)}),Kw=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),H6e=R(()=>P(()=>import("./mvmwqt2pbedq2unu.js"),__vite__mapDeps([288,1])),{loading:t=>F(t)}),G6e=R(()=>P(()=>import("./mp4v4wji3l4bfpxc.js"),__vite__mapDeps([289,1])),{loading:t=>F(t)}),W6e=R(()=>P(()=>import("./llkvyyg8wmzr0pic.js"),__vite__mapDeps([291,1])),{loading:t=>F(t)}),z6e=R(()=>P(()=>import("./cs13hjllyr5z07le.js"),__vite__mapDeps([246,1])),{loading:t=>F(t)}),q6e=R(()=>P(()=>import("./i9crbuggadd1d18l.js"),__vite__mapDeps([247,1])),{loading:t=>F(t)}),Y6e=R(()=>P(()=>import("./nerwniv8icoyqyjk.js"),__vite__mapDeps([33,1])),{loading:t=>F(t)}),qD=R(()=>P(()=>import("./gsyjy3cn2edhhxqr.js"),__vite__mapDeps([251,1])),{loading:t=>F(t)}),Z6e=R(()=>P(()=>import("./gl3rapxbeig8umvj.js"),__vite__mapDeps([253,1])),{loading:t=>F(t)}),YD=R(()=>P(()=>import("./d44ajf70j3x0ukox.js"),__vite__mapDeps([333,1])),{loading:t=>F(t)}),K6e=R(()=>P(()=>import("./iz7y4yt60huv2j20.js"),__vite__mapDeps([334,1])),{loading:t=>F(t)}),ZD=R(()=>P(()=>import("./fsahglpl2wxoakvg.js"),__vite__mapDeps([35,1])),{loading:t=>F(t)}),Q6e=R(()=>P(()=>import("./f5goq4s9xgjjvv2f.js"),__vite__mapDeps([335,1])),{loading:t=>F(t)}),Qw=R(()=>P(()=>import("./c0cigwrjirtldn2y.js"),__vite__mapDeps([336,1])),{loading:t=>F(t)});function TQe({onOauthRedirect:t}){const{connectorConfig:e,isLoading:n}=PW(),s=Wp(),o=V(),a=ve(o,"1242184140"),{getFirstMessage:i}=s,l=i(),c=l?e.get(l.connector):null,d=n||!c,u=a?J6e:X6e,f=_.useMemo(()=>{if(d||!l)return null;switch(l.type){case"not-connected":return r.jsx(u,{unconnectedMessage:l,onOauthRedirect:t,entry:c})}},[u,d,c,l,t]),{dismissMessage:m}=Wp(),g=_.useCallback(p=>{!p&&l&&!d&&m(l)},[d,m,l]);return r.jsx(j5,{size:"none",open:!d,onOpenChange:g,side:"top",sideOffset:4,triggerButton:r.jsx("button",{type:"button",name:"context-connector-pasted-link-popover-trigger",suppressHydrationWarning:!0,className:"invisible absolute self-center","aria-hidden":!0,tabIndex:-1}),children:f})}function J6e({unconnectedMessage:t,onOauthRedirect:e,entry:n}){const{dismissMessage:s}=Wp(),o=ne(),a=np(t.connector,o),i=eCe(t.connector),l=()=>{pa.oauthUpsellButtonClick(n.type,"link"),ei.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,e,td.Link)},c=()=>{pa.oauthUpsellButtonClick(n.type,"not-now"),s(t)};return r.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-2 sm:w-[384px]",children:[r.jsxs("div",{className:"mb-5 flex flex-row gap-2",children:[r.jsx(nCe,{icon:i}),r.jsx("span",{className:"text-sm font-bold",children:r.jsx(j,U(w({},ti.connectTo),{values:{connectorName:a}}))})]}),r.jsx("span",{className:"text-token-text-secondary mb-5 text-sm",children:r.jsx(j,U(w({},ti.description),{values:{connectorName:a}}))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(ye,{color:"primary",onClick:l,children:r.jsx(j,w({},ti.connect))}),r.jsx(ye,{color:"secondary",onClick:c,children:r.jsx(j,w({},ti.notNow))})]})]})}function X6e({unconnectedMessage:t,onOauthRedirect:e,entry:n}){const{dismissMessage:s}=Wp(),o=ne(),a=np(t.connector,o),{icon1:i,icon2:l,icon3:c,icon4:d}=tCe(t.connector);return r.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-4 sm:w-[384px]",children:[r.jsxs("div",{className:"mb-3 flex flex-row gap-2 self-center",children:[r.jsx(mg,{icon:i,rotation:-6}),r.jsx(mg,{icon:l,rotation:6}),r.jsx(mg,{icon:c,rotation:-6}),r.jsx(mg,{icon:d,rotation:6})]}),r.jsx("span",{className:"mb-3 text-lg font-semibold",children:r.jsx(j,U(w({},ti.connectTo),{values:{connectorName:a}}))}),r.jsx("span",{className:"text-token-text-secondary mb-4 text-sm",children:r.jsx(j,U(w({},ti.description),{values:{connectorName:a}}))}),r.jsxs("div",{className:"flex flex-row-reverse gap-3 self-end",children:[r.jsx(ye,{color:"primary",onClick:()=>{pa.oauthUpsellButtonClick(n.type,"link"),ei.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,e,td.Link)},children:r.jsx(j,w({},ti.connect))}),r.jsx(ye,{color:"secondary",onClick:()=>{pa.oauthUpsellButtonClick(n.type,"not-now"),s(t)},children:r.jsx(j,w({},ti.notNow))})]})]})}function eCe(t){switch(t){case Bt.CONFLUENCE:return r.jsx(Q6e,{width:20,height:20});case Bt.GDRIVE:return r.jsx(ZD,{width:20,height:20});case Bt.JIRA:return r.jsx(K6e,{width:20,height:20});case Bt.NOTION_OPEN_CONNECTOR:return r.jsx(Z6e,{width:20,height:20});case Bt.O365:case Bt.O365_BUSINESS:case Bt.O365_PERSONAL:return r.jsx(YD,{width:20,height:20});case Bt.SLACK_OPEN_CONNECTOR:return r.jsx(qD,{width:20,height:20})}j8(t)}function tCe(t){switch(t){case Bt.GDRIVE:return{icon1:r.jsx(ZD,{}),icon2:r.jsx(Y6e,{}),icon3:r.jsx(z6e,{}),icon4:r.jsx(q6e,{})};case Bt.O365:case Bt.O365_BUSINESS:case Bt.O365_PERSONAL:return{icon1:r.jsx(YD,{}),icon2:r.jsx(H6e,{}),icon3:r.jsx(G6e,{}),icon4:r.jsx(W6e,{})};case Bt.CONFLUENCE:case Bt.JIRA:case Bt.NOTION_OPEN_CONNECTOR:return{icon1:r.jsx(V6e,{}),icon2:r.jsx(Qw,{}),icon3:r.jsx(Kw,{}),icon4:r.jsx(Zw,{})};case Bt.SLACK_OPEN_CONNECTOR:return{icon1:r.jsx(qD,{}),icon2:r.jsx(Qw,{}),icon3:r.jsx(Kw,{}),icon4:r.jsx(Zw,{})}}j8(t)}const nCe=({icon:t})=>r.jsx("div",{className:z("flex h-[20px] w-[20px]"),children:r.jsx("div",{className:"object-contain",children:t})});function mg({rotation:t,icon:e}){return r.jsx("div",{className:z("flex h-[44px] w-[44px] items-center justify-center rounded-xl border border-[#EDEDF2] bg-white shadow-[0_1px_12px_0px_#0000000B]"),style:{transform:"rotate(".concat(t,"deg)")},children:r.jsx("div",{className:"object-contain",children:e})})}const ti=Se({connectTo:{id:"ContextConnectorPastedLinkPopover.connectTo",defaultMessage:"Connect to {connectorName}"},description:{id:"ContextConnectorPastedLinkPopover.description",defaultMessage:"Connect ChatGPT to {connectorName} to reference the content from this link."},notNow:{id:"ContextConnectorPastedLinkPopover.notNow",defaultMessage:"Not now"},connect:{id:"ContextConnectorPastedLinkPopover.connect",defaultMessage:"Connect"},addFromGdriveDescription:{id:"ContextConnectorPastedLinkPopover.addFromDriveDescription",defaultMessage:"To add files from Google Drive, upload them directly to your message."},addFromGdriveNotNow:{id:"ContextConnectorPastedLinkPopover.addFromDriveNotNow",defaultMessage:"Not now"},addFromGdriveUploadFile:{id:"ContextConnectorPastedLinkPopover.addFromDriveUploadFile",defaultMessage:"Upload file"}}),sCe="77377267392",KD="AIzaSyAOHzpLbFWAcLwrOn1IvQeVd0jHRntTlPk";var oCe=(t=>(t.OneDrive_BUSINESS_DRIVE_ITEMS="https://graph.microsoft.com/v1.0/me/drive/items",t.OneDrive_BUSINESS_DRIVE_ROOT="https://graph.microsoft.com/v1.0/me/drive/root",t.OneDrive_BUSINESS_SHARES="https://graph.microsoft.com/v1.0/shares",t.OneDrive_PERSONAL_DRIVE_ITEMS="https://api.onedrive.com/v1.0/drives",t.OneDrive_PERSONAL_SHARES="https://api.onedrive.com/v1.0/shares",t))(oCe||{});let Q0=null;function QD(t){return Q0==null&&(Q0=aCe().then(()=>(gapi.client.setToken({access_token:t}),gapi.client.init({apiKey:KD,scope:"https://www.googleapis.com/auth/drive.file",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]})))),Q0}function aCe(){return new Promise((t,e)=>{const n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.onload=t,n.onerror=e,document.documentElement.appendChild(n)}).then(()=>Promise.all([new Promise(t=>gapi.load("client",t)),new Promise(t=>gapi.load("client:picker",t))]))}async function rCe(t,e,n,s){await QD(n);async function o(u){switch(u.action){case google.picker.Action.PICKED:{pa.filePickerPicked(Bt.GDRIVE,u.docs.length);const f=u.docs.map(m=>({connector:e,id:m.id,title:m.name,mimeType:m.mimeType,url:m.url,syntheticExtension:m.type==="document"?RW(m.mimeType):null}));s(f);break}case google.picker.Action.CANCEL:pa.filePickerCancelled(Bt.GDRIVE);return;case"loaded":{pa.filePickerLoaded(Bt.GDRIVE);return}}}const a=new google.picker.DocsView(google.picker.ViewId.DOCS).setIncludeFolders(!0).setSelectFolderEnabled(!1).setMode(google.picker.DocsViewMode.LIST);let i="en";Jw.includes(t)?i=t:Jw.includes(t.split("-")[0])&&(i=t.split("-")[0]);const l=new google.picker.PickerBuilder().enableFeature(google.picker.Feature.MULTISELECT_ENABLED).enableFeature(google.picker.Feature.SUPPORT_DRIVES).setDeveloperKey(KD).setAppId(sCe).setOAuthToken(n).addView(a).setCallback(o).setLocale(i).build();pa.filePickerStarted(Bt.GDRIVE),l.setVisible(!0);const c=iCe(),d=()=>{pa.filePickerCancelled(Bt.GDRIVE),l.setVisible(!1),c==null||c.removeEventListener("click",d)};c==null||c.addEventListener("click",d)}function iCe(){var e;if(typeof window>"u")return null;const t=(e=window.document.body.querySelector("div.picker-dialog-bg"))!=null?e:window.document.body.querySelector("div.oai-picker-dialog-bg");return t==null||t.classList.add("oai-picker-dialog-bg","bg-black/50","dark:bg-black/80","absolute","inset-0","z-1000"),t==null||t.classList.remove("picker-dialog-bg"),t}const Jw=["af","am","ar","bg","bn","ca","cs","da","de","el","en","en-GB","es","es-419","et","eu","fa","fi","fil","fr","fr-CA","gl","gu","hi","hr","hu","id","is","it","iw","ja","kn","ko","lt","lv","ml","mr","ms","nl","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","sw","ta","te","th","tr","uk","ur","vi","zh-CN","zh-HK","zh-TW","zu"],lCe=R(()=>P(()=>import("./clbd32tshfe6lfta.js"),__vite__mapDeps([337,1,10,11])).then(t=>t.GoogleDriveOAuthModal)),cCe=R(()=>P(()=>import("./iavix82j0dyyhd6e.js"),__vite__mapDeps([338,1,10,11])).then(t=>t.OneDrivePickerModal));function MQe(t){"use forget";var A,I;const e=W.c(32),{connectorConfig:n,modelSupportedImageMimeTypes:s,modelAcceptedMimeTypes:o,attachmentsProductFeature:a,onOauthRedirect:i}=t,l=V(),c=ne(),d=$t(),u=wi(),{getGizmoId:f}=Z3(),m=(I=(A=Nf())==null?void 0:A.enabled)!=null?I:!1,[g,p]=_.useState();let h,x;e[0]!==f?(h=()=>{f?f().then(N=>p(N)):p(void 0)},x=[f],e[0]=f,e[1]=h,e[2]=x):(h=e[1],x=e[2]),_.useEffect(h,x);let v;e[3]!==a||e[4]!==u||e[5]!==g||e[6]!==c||e[7]!==o||e[8]!==s||e[9]!==d?(v=(N,L)=>ei.uploadPickedFile(u,N,L,s,o,a,g,c,d),e[3]=a,e[4]=u,e[5]=g,e[6]=c,e[7]=o,e[8]=s,e[9]=d,e[10]=v):v=e[10];const y=v,b=_.useRef(!1);let C;e[11]!==l||e[12]!==m||e[13]!==i?(C=N=>{if(N.type===Bt.GDRIVE&&m&&!b.current){dt(l,lCe,{onContinue:()=>{b.current=!0,C(N)}});return}ei.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,N,i,td.Picker),i()},e[11]=l,e[12]=m,e[13]=i,e[14]=C):C=e[14];let S;e[15]!==a||e[16]!==u||e[17]!==g||e[18]!==c||e[19]!==o||e[20]!==s||e[21]!==d?(S=N=>{ei.uploadPickedFile(u,N,Bt.GDRIVE,s,o,a,g,c,d)},e[15]=a,e[16]=u,e[17]=g,e[18]=c,e[19]=o,e[20]=s,e[21]=d,e[22]=S):S=e[22];const E=S;let k;e[23]!==n||e[24]!==l||e[25]!==C||e[26]!==E||e[27]!==y?(k=N=>{const{access_token:L}=N;if(!L){C(N);return}ei.logAttemptIfAccessTokenIsExpired(N,td.Picker);e:switch(N.type){case Bt.GDRIVE:{rCe(Rn(l).locale,N.type,L,O=>O.forEach(E));break e}case Bt.O365_PERSONAL:case Bt.O365_BUSINESS:{const O=N.type?n.get(N.type):null;O!=null&&O.access_token&&O.onedrive_endpoint_hint&&dt(l,cCe,{accessToken:O.access_token,oneDriveURL:O.onedrive_endpoint_hint,uploadPickedFile:y});break e}}},e[23]=n,e[24]=l,e[25]=C,e[26]=E,e[27]=y,e[28]=k):k=e[28];const T=k;let M;return e[29]!==C||e[30]!==T?(M={onSelectConnector:T,onConnectorOauthRedirect:C},e[29]=C,e[30]=T,e[31]=M):M=e[31],M}function AQe(t,e){"use forget";const n=W.c(6),{connector:s,clearParam:o}=D6e();let a,i;n[0]!==o||n[1]!==s||n[2]!==t||n[3]!==e?(a=()=>{const l=s!=null&&Array.from(t.values()).find(c=>c.type===s&&!!c.access_token);l&&(e(l),o())},i=[t,s,o,e],n[0]=o,n[1]=s,n[2]=t,n[3]=e,n[4]=a,n[5]=i):(a=n[4],i=n[5]),_.useEffect(a,i)}const JD=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10 2.125C14.3492 2.125 17.875 5.65076 17.875 10C17.875 14.3492 14.3492 17.875 10 17.875C5.65076 17.875 2.125 14.3492 2.125 10C2.125 5.65076 5.65076 2.125 10 2.125ZM7.88672 10.625C7.94334 12.3161 8.22547 13.8134 8.63965 14.9053C8.87263 15.5194 9.1351 15.9733 9.39453 16.2627C9.65437 16.5524 9.86039 16.625 10 16.625C10.1396 16.625 10.3456 16.5524 10.6055 16.2627C10.8649 15.9733 11.1274 15.5194 11.3604 14.9053C11.7745 13.8134 12.0567 12.3161 12.1133 10.625H7.88672ZM3.40527 10.625C3.65313 13.2734 5.45957 15.4667 7.89844 16.2822C7.7409 15.997 7.5977 15.6834 7.4707 15.3486C6.99415 14.0923 6.69362 12.439 6.63672 10.625H3.40527ZM13.3633 10.625C13.3064 12.439 13.0059 14.0923 12.5293 15.3486C12.4022 15.6836 12.2582 15.9969 12.1006 16.2822C14.5399 15.467 16.3468 13.2737 16.5947 10.625H13.3633ZM12.1006 3.7168C12.2584 4.00235 12.4021 4.31613 12.5293 4.65137C13.0059 5.90775 13.3064 7.56102 13.3633 9.375H16.5947C16.3468 6.72615 14.54 4.53199 12.1006 3.7168ZM10 3.375C9.86039 3.375 9.65437 3.44756 9.39453 3.7373C9.1351 4.02672 8.87263 4.48057 8.63965 5.09473C8.22547 6.18664 7.94334 7.68388 7.88672 9.375H12.1133C12.0567 7.68388 11.7745 6.18664 11.3604 5.09473C11.1274 4.48057 10.8649 4.02672 10.6055 3.7373C10.3456 3.44756 10.1396 3.375 10 3.375ZM7.89844 3.7168C5.45942 4.53222 3.65314 6.72647 3.40527 9.375H6.63672C6.69362 7.56102 6.99415 5.90775 7.4707 4.65137C7.59781 4.31629 7.74073 4.00224 7.89844 3.7168Z"})),Ir=Object.freeze(Object.defineProperty({__proto__:null,default:JD},Symbol.toStringTag,{value:"Module"})),dCe=R(()=>P(()=>import("./impv9cw906sxjwad.js"),__vite__mapDeps([195,1])),{loading:t=>F(t)}),uCe=R(()=>P(()=>import("./g1dbzw9xahth2rh2.js"),__vite__mapDeps([213,1])),{loading:t=>F(t)}),fCe=R(()=>P(()=>import("./lljm2enx48t0mwrk.js"),__vite__mapDeps([54,1])),{loading:t=>F(t)}),mCe=R(()=>P(()=>Promise.resolve().then(()=>t5),void 0),{loading:t=>F(t)});function gCe({isOpen:t,onClose:e,markAsViewed:n}){const s=ne();return r.jsx(Mt,{testId:"modal-memory-alpha",isOpen:t,onClose:e,showCloseButton:!0,size:"custom",type:"success",className:"max-w-xl",title:s.formatMessage({id:"MoonshineAlphaAnnouncement.title",defaultMessage:"You're testing memory improvements"}),footerContent:r.jsxs("div",{className:"ms-1 mt-4 flex w-full justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(uCe,{className:"icon text-token-text-secondary me-1.5 inline-block"}),r.jsx("a",{href:"https://help.openai.com/en/articles/10303002-how-does-memory-use-past-conversations",target:"_blank",rel:"noopener noreferrer",onClick:()=>{n&&n(),e()},className:"text-token-text-secondary font-medium",children:s.formatMessage({id:"MoonshineAlphaAnnouncement.secondaryButton",defaultMessage:"Learn more"})})]}),r.jsx("div",{children:r.jsx(Ns.Button,{title:s.formatMessage({id:"MoonshineAlphaAnnouncement.primaryButton",defaultMessage:"Got it"}),color:"secondary",className:"text-base",onClick:e})})]}),children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx(fCe,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.chatTitle",defaultMessage:"ChatGPT now uses all past chats"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.chatText",defaultMessage:"All past chats will inform responses, not just saved memories."})})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx(mCe,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.optInTitle",defaultMessage:"You're in control"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.optInText",defaultMessage:"Use temporary chats for topics you don't want remembered."})})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx(dCe,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.optOutText",defaultMessage:"Opt out any time"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.settingsLink",defaultMessage:"Visit {settingsLink} to turn off improved memory.",values:{settingsLink:r.jsx(wo,{to:Al(Pn.Personalization),onClick:()=>{n&&n()},className:"underline",children:r.jsx(j,{id:"MoonshineAlphaAnnouncement.settingsLinkWord",defaultMessage:"Settings"})})}})})]})]})]})})}const zp=Oe.hasSeenMoonshineNux;function IQe(){"use forget";const t=W.c(19),e=V(),[n,s]=_.useState(!1);let o;t[0]!==e?(o=()=>ot(e,zp),t[0]=e,t[1]=o):o=t[1];const a=o;let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{s(!0)},t[2]=i):i=t[2];const l=i;let c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{s(!1)},t[3]=c):c=t[3];const d=c;let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=[],t[4]=u):u=t[4],_.useEffect(pCe,u);let f,m;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{l(),Ie.count(je.MOONSHINE,"announcement.learn_more_clicked"),B.logEventWithStatsig("ChatGPT Moonshine: CTA Clicked","chatgpt_moonshine_announcement_cta_clicked")},m=r.jsx(j,{id:"MoonshineAnnouncement.secondaryCtaText",defaultMessage:"Learn more"}),t[5]=f,t[6]=m):(f=t[5],m=t[6]);let g;t[7]!==a?(g=()=>{Ie.count(je.MOONSHINE,"announcement.close_clicked"),B.logEventWithStatsig("ChatGPT Moonshine: Announcement Closed","chatgpt_moonshine_announcement_closed"),a()},t[7]=a,t[8]=g):g=t[8];let p;t[9]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsxs("div",{className:"flex items-center gap-2 font-bold",children:[r.jsx(j,{id:"MoonshineAnnouncement.heading",defaultMessage:"You're testing memory improvements"}),r.jsx(LW,{})]}),t[9]=p):p=t[9];let h;t[10]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsxs("div",{className:"grow",children:[p,r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"MoonshineAnnouncement.description",defaultMessage:"ChatGPT can now reference past chats, not just saved memories."})})]}),t[10]=h):h=t[10];let x;t[11]!==g?(x=r.jsx(_n,{onSecondaryCtaClick:f,secondaryCtaText:m,onDismiss:g,content:h}),t[11]=g,t[12]=x):x=t[12];let v;t[13]!==n||t[14]!==a?(v=n&&r.jsx(gCe,{isOpen:n,markAsViewed:a,onClose:()=>{d(),a()}}),t[13]=n,t[14]=a,t[15]=v):v=t[15];let y;return t[16]!==v||t[17]!==x?(y=r.jsxs(r.Fragment,{children:[x,v]}),t[16]=v,t[17]=x,t[18]=y):y=t[18],y}function pCe(){Ie.count(je.MOONSHINE,"nux.shown"),B.logEventWithStatsig("ChatGPT Moonshine: Announcement Shown","chatgpt_moonshine_announcement_shown"),B.logUpsellOrModalEvent(dn,{eventId:"moonshine_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})}function hCe(){"use forget";const t=g1(),{eligible:e,isLoading:n}=lt(zp);return t&&e&&!n}function jQe(){"use forget";const t=W.c(4),e=V(),n=g1(),{eligible:s}=lt(zp);let o;return t[0]!==e||t[1]!==s||t[2]!==n?(o=()=>{!n||!s||(Ie.count(je.MOONSHINE,"nux.implicit_close"),ot(e,zp))},t[0]=e,t[1]=s,t[2]=n,t[3]=o):o=t[3],o}const _Ce=R(()=>P(()=>import("./efiopttsd013c72o.js"),__vite__mapDeps([339,1])),{loading:t=>F(t)}),xCe=R(()=>P(()=>import("./q264k2ztz0dic0dr.js"),__vite__mapDeps([144,1])),{loading:t=>F(t)}),N5=t=>{"use forget";const e=W.c(61),{pressed:n,disabled:s,icon:o,label:a,ariaLabel:i,animatedLabel:l,showLabel:c,onClick:d,splitButtonDropdownContent:u,showSplitButton:f,dropdownContent:m,dataTestid:g,splitSecondaryButton:p,tooltip:h,as:x}=t,v=f===void 0?!0:f,y=x===void 0?"popover":x,[b,C]=_.useState(!1),[S,E]=_.useState(!1),k=OW(),T=!s&&n;let M;e[0]!==a?(M=a&&r.jsx("div",{className:"ps-1 pe-1 font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:a}),e[0]=a,e[1]=M):M=e[1];const A=M,I=!!u;let N;e[2]!==I?(N=z("flex h-full min-w-8 items-center justify-center p-2",{"pe-1.5":I}),e[2]=I,e[3]=N):N=e[3];let L;e[4]===Symbol.for("react.memo_cache_sentinel")?(L=()=>E(!1),e[4]=L):L=e[4];let O;e[5]!==m||e[6]!==d?(O=be=>{m||(E(!0),d(be))},e[5]=m,e[6]=d,e[7]=O):O=e[7];const D=!l&&c?A:null;let $;e[8]!==l||e[9]!==A||e[10]!==k||e[11]!==c?($=l&&r.jsx(fn,{initial:!1,children:c&&r.jsx(Xe.span,{initial:{x:-10,width:0,opacity:0},animate:{x:0,width:"fit-content",opacity:1},exit:{x:-10,width:0,opacity:0},transition:{ease:"easeOut",duration:k?0:.15},children:A})}),e[8]=l,e[9]=A,e[10]=k,e[11]=c,e[12]=$):$=e[12];let H;e[13]!==i||e[14]!==g||e[15]!==s||e[16]!==o||e[17]!==n||e[18]!==N||e[19]!==O||e[20]!==D||e[21]!==$?(H=r.jsxs("button",{className:N,"data-testid":g,"aria-pressed":n,"aria-label":i,disabled:s,onTransitionEnd:L,onClick:O,children:[o,D,$]}),e[13]=i,e[14]=g,e[15]=s,e[16]=o,e[17]=n,e[18]=N,e[19]=O,e[20]=D,e[21]=$,e[22]=H):H=e[22];const G=H;let Z;e[23]!==G||e[24]!==h?(Z=h?h(G):G,e[23]=G,e[24]=h,e[25]=Z):Z=e[25];const Q=Z;let q;e[26]!==b?(q=b?r.jsx(_Ce,{className:"icon"}):r.jsx(xCe,{className:"icon"}),e[26]=b,e[27]=q):q=e[27];const Y=q;let te;e[28]===Symbol.for("react.memo_cache_sentinel")?(te={type:"tween",duration:.15,ease:"easeInOut"},e[28]=te):te=e[28];const ae=te;let se;e[29]!==k?(se=k?QR:{opacity:{delay:.1},default:ae},e[29]=k,e[30]=se):se=e[30];const ce=se;let X;e[31]!==y||e[32]!==m||e[33]!==u?(X=u||m?y==="popover"?r.jsx(Fl,{children:r.jsx(Rh,{className:"p-0",$as:Bl,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:m!=null?m:u})}):r.jsx(K.Portal,{children:r.jsx(K.Content,{children:m!=null?m:u})}):null,e[31]=y,e[32]=m,e[33]=u,e[34]=X):X=e[34];const ee=X;let ie;e[35]!==y||e[36]!==Q?(ie=y==="popover"?r.jsx(yr,{asChild:!0,children:Q}):r.jsx(K.Trigger,{asChild:!0,children:Q}),e[35]=y,e[36]=Q,e[37]=ie):ie=e[37];const de=ie;let me;e[38]!==ce||e[39]!==y||e[40]!==Y||e[41]!==s||e[42]!==T?(me=y==="popover"?r.jsx(yr,{asChild:!0,children:r.jsx("button",{className:"border-token-border-default border-s p-2",style:{borderColor:T?"#0285FF0D":void 0},disabled:s,children:Y})}):r.jsx(Xe.div,{initial:{width:0,opacity:0,padding:0},animate:{width:"auto",opacity:1,padding:"0.5rem"},exit:{width:0,opacity:0,padding:0,borderInlineStart:"unset"},transition:ce,style:{overflow:"hidden",border:"unset",borderInlineStart:"solid 1px",borderColor:T?"#0285FF0D":"var(--border-default)"},children:r.jsx(K.Trigger,{asChild:!0,children:r.jsx("button",{style:{padding:0,backgroundColor:"transparent",height:"100%",borderRadius:"unset",color:T?"var(--interactive-label-accent-default)":void 0},disabled:s,children:Y})})}),e[38]=ce,e[39]=y,e[40]=Y,e[41]=s,e[42]=T,e[43]=me):me=e[43];const xe=me,pe=!n,Me=!!T,Ce=!T;let ke;e[44]!==s||e[45]!==S||e[46]!==pe||e[47]!==Me||e[48]!==Ce?(ke=z("radix-state-open:bg-black/10 inline-flex h-9 rounded-full border text-[13px] font-medium",{"duration-75 motion-safe:transition-all":S,"text-token-text-secondary":pe,"text-token-interactive-label-accent-default bg-token-composer-blue-bg border-transparent hover:bg-[#BDDCF4] dark:bg-[#2A4A6D] dark:text-[#48AAFF] dark:hover:bg-[#1A416A]":Me,"border-token-border-default hover:bg-token-main-surface-secondary focus-visible:outline-black dark:focus-visible:outline-white":Ce,"opacity-30":s}),e[44]=s,e[45]=S,e[46]=pe,e[47]=Me,e[48]=Ce,e[49]=ke):ke=e[49];const Le=m?de:Q,De=!m&&u&&v?xe:null;let le;e[50]!==De?(le=r.jsx(fn,{children:De}),e[50]=De,e[51]=le):le=e[51];let oe;e[52]!==p||e[53]!==ke||e[54]!==Le||e[55]!==le?(oe=r.jsxs("div",{className:ke,children:[Le,le,p]}),e[52]=p,e[53]=ke,e[54]=Le,e[55]=le,e[56]=oe):oe=e[56];const Ee=oe;if(u||m){let be;return e[57]!==y||e[58]!==Ee||e[59]!==ee?(be=y==="popover"?r.jsxs(Dl,{onOpenChange:fe=>C(fe),children:[r.jsx(Jte,{asChild:!0,children:Ee}),ee]}):r.jsxs(K.Root,{onOpenChange:fe=>C(fe),children:[Ee,ee]}),e[57]=y,e[58]=Ee,e[59]=ee,e[60]=be):be=e[60],be}else return Ee};function NQe(t){"use forget";var A,I;const e=W.c(11),{account:n,clientBootstrapFlags:s,features:o,clientThreadId:a,currentModelConfig:i,composerController:l,isDisabled:c,gizmoId:d}=t,u=V(),f=OM(a),m=jl(u,d);let g;e[0]!==(i==null?void 0:i.enabledTools)?(g=(A=i==null?void 0:i.enabledTools)==null?void 0:A.includes(al.Search),e[0]=i==null?void 0:i.enabledTools,e[1]=g):g=e[1];const p=g,h=f==null||(f==null?void 0:f.kind)===wt.PrimaryAssistant||(f==null?void 0:f.kind)===wt.GizmoInteraction&&m,x=!tt(u);let v;e[2]!==u?(v=()=>DW(u,Pe.Search),e[2]=u,e[3]=v):v=e[3];const y=re(v),b=!x&&(n==null||n.isFree());if(p===!1||x&&(s!=null&&s.includes(ep.AnonSearchHoldout))||b&&s!=null&&s.includes(ep.FreeSearchHoldout)||!y||!x&&(n==null||n.isEnterprisey())&&!(o!=null&&o.includes(ss.BrowsingAvailable))||!h)return null;let S;e[4]===Symbol.for("react.memo_cache_sentinel")?(S={viewTransitionName:"var(--vt-composer-".concat(Pe.Search,"-action)")},e[4]=S):S=e[4];const E=!!c||!p,k=p?void 0:b5.ModelNotSupported,T=(I=i==null?void 0:i.title)!=null?I:"";let M;return e[5]!==a||e[6]!==l||e[7]!==E||e[8]!==k||e[9]!==T?(M=r.jsx("div",{"data-testid":"system-hint-search",style:S,children:r.jsx(yCe,{clientThreadId:a,composerController:l,isDisabled:E,disabledReason:k,currentModelName:T})},"system-hint-".concat(Pe.Search)),e[5]=a,e[6]=l,e[7]=E,e[8]=k,e[9]=T,e[10]=M):M=e[10],M}function yCe(t){"use forget";const e=W.c(28),{clientThreadId:n,composerController:s,isDisabled:o,disabledReason:a,currentModelName:i}=t,l=ne();let c;e[0]!==l?(c=l.formatMessage({id:"TbHx8d",defaultMessage:"Search"}),e[0]=l,e[1]=c):c=e[1];const d=c,u=xs(),f=$s(),m=u===Pe.Search;let g,p;e[2]!==n||e[3]!==o||e[4]!==m||e[5]!==f?(g=()=>{o&&m&&f(null,{analyticsMetadata:{clientThreadId:n}})},p=[o,m,f,n],e[2]=n,e[3]=o,e[4]=m,e[5]=f,e[6]=g,e[7]=p):(g=e[6],p=e[7]),_.useEffect(g,p);let h;e[8]!==n||e[9]!==s||e[10]!==m||e[11]!==f?(h=E=>{E.stopPropagation(),E.preventDefault(),f(m?null:Pe.Search,{analyticsMetadata:{clientThreadId:n}}),m||no(Pt(s)),B.logEventWithStatsig("Composer Search Button Clicked","composer_search_button_clicked",{clientThreadId:n}),m&&FW(Pt(s),/^search\b/i)},e[8]=n,e[9]=s,e[10]=m,e[11]=f,e[12]=h):h=e[12];const x=h;let v;e[13]!==n?(v={clientThreadId:n},e[13]=n,e[14]=v):v=e[14];const y=o!=null?o:!1;let b;e[15]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(JD,{className:"icon"}),e[15]=b):b=e[15];let C;e[16]!==x||e[17]!==m||e[18]!==d||e[19]!==y?(C=r.jsx(N5,{pressed:m,disabled:y,icon:b,label:d,ariaLabel:d,animatedLabel:!0,showLabel:!0,onClick:x,dataTestid:"composer-button-search"}),e[16]=x,e[17]=m,e[18]=d,e[19]=y,e[20]=C):C=e[20];let S;return e[21]!==i||e[22]!==a||e[23]!==o||e[24]!==m||e[25]!==v||e[26]!==C?(S=r.jsx(bCe,{analyticsMetadata:v,isThreadUsingSearchMode:m,isDisabled:o,disabledReason:a,currentModelName:i,children:C}),e[21]=i,e[22]=a,e[23]=o,e[24]=m,e[25]=v,e[26]=C,e[27]=S):S=e[27],S}function vCe(){"use forget";const t=hCe(),e=lt(Oe.hasSeenComposerSearchButtonTooltip);return!e.isLoading&&e.eligible&&!t}function bCe(t){"use forget";const e=W.c(19),{children:n,analyticsMetadata:s,isThreadUsingSearchMode:o,isDisabled:a,disabledReason:i,currentModelName:l}=t,c=V();if(!(vCe()&&!o)){let h;e[0]!==l||e[1]!==i||e[2]!==a?(h=a?i===b5.ModelNotSupported?r.jsx(j,{id:"GZemJe",defaultMessage:"Search disabled for {modelName}",values:{modelName:"".concat(l)}}):r.jsx(j,{id:"GpDAWD",defaultMessage:"Search is unavailable"}):r.jsx(j,{id:"c+4o2s",defaultMessage:"Search the web"}),e[0]=l,e[1]=i,e[2]=a,e[3]=h):h=e[3];let x;e[4]!==s?(x=y=>{y&&B.logEventWithStatsig("Composer Search Button Hovered","composer_search_button_hovered",s)},e[4]=s,e[5]=x):x=e[5];let v;return e[6]!==n||e[7]!==h||e[8]!==x?(v=r.jsx("div",{children:r.jsx(pt,{className:"inline-block",label:h,side:"bottom",onOpenChange:x,children:n})}),e[6]=n,e[7]=h,e[8]=x,e[9]=v):v=e[9],v}let u;e[10]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(j,{id:"Yjduqi",defaultMessage:"Search the web"}),e[10]=u):u=e[10];let f;e[11]!==c?(f=()=>ot(c,Oe.hasSeenComposerSearchButtonTooltip),e[11]=c,e[12]=f):f=e[12];let m;e[13]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(j,{id:"W51Aei",defaultMessage:"Get fast answers with trusted sources. {learnMore}",values:{learnMore:r.jsx(to,{href:"https://openai.com/index/introducing-chatgpt-search",className:"underline",children:r.jsx(j,{id:"stA7F4",defaultMessage:"Learn more"})})}}),e[13]=m):m=e[13];let g;e[14]!==n?(g=r.jsx("div",{children:n}),e[14]=n,e[15]=g):g=e[15];let p;return e[16]!==f||e[17]!==g?(p=r.jsx(Vd,{announcementKey:Oe.hasSeenComposerSearchButtonTooltip,side:"right",show:!0,theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:u,onDismiss:f,sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",description:m,children:g}),e[16]=f,e[17]=g,e[18]=p):p=e[18],p}const PQe=async({filePickerStore:t,event:e,intl:n,toaster:s,conversationMode:o,clientThreadId:a,currentModelConfig:i,getEditorGizmoId:l,modelSupportedImageMimeTypes:c,activeSystemHintType:d,ctx:u,contextScopes:f})=>{var k,T;const m=tt(u),g=Rn(u).flags,p=g==null?void 0:g.includes(ep.NoAuthEnableFileUploads),h=nT(i,o,d),x=c.length>0;B.logEvent("Pasted to Composer",{client_thread_id:a});const{clipboardData:v}=e,y=BW(i,o),b=!m&&p?c:(k=y==null?void 0:y.attachments)==null?void 0:k.accepted_mime_types,C=!m&&p?!1:(T=y==null?void 0:y.attachments)==null?void 0:T.can_accept_all_mime_types,S=w(w({},p&&{isUnauthenticated:!m}),m&&f&&f.length>0?{contextScopes:f}:{});if(x&&v&&v.files.length>0){const M=v.files[0],A=M.name.match(/\.[^.]+$/),I=A?"".concat(os()).concat(A[0]):os(),N=new File([M],I,{type:M.type,lastModified:M.lastModified});if(b!==void 0&&!b.includes(N.type)&&C!==!0){s.danger(n.formatMessage(Oo.unsupportedFileType,{file_type:UW(N)}),{toastId:"paste_unsupported_file_type",loggingTitle:Oo.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}),e.preventDefault();return}if(Ln.hideThreadHeader(),B.logEvent("Upload File",{client:"web",eventSource:"paste"}),l!=null){l().then(L=>rr.uploadFile(t,il(N),N,h,c,n,s,w({gizmoId:L},S)));return}rr.uploadFile(t,il(N),N,h,c,n,s,S,y==null?void 0:y.attachments)}if(v&&v.types.includes("text/plain")){const M=v.getData("text");if(M&&d8(u,M)){e.preventDefault();const A="text/plain";let I="txt";const N=await $W(M);N&&(C||b!=null&&b.includes(N.mime))&&(I=N.ext);const L="pasted.".concat(I),O=new Blob([M],{type:A}),D=new File([O],L,{type:A});rr.uploadFile(t,il(D),D,h,c,n,s,S),B.logEventWithStatsig("Big Paste","chatgpt_web_big_paste",{text_length:CCe(M.length)})}}},CCe=t=>t<500?"under 500":t<=1e3?"500-1000":t<=5e3?"1001-5000":t<=1e4?"5000-10000":"10000+",RQe=(t,{canSubmit:e,isTextContentTooLong:n,toaster:s,requestCompletion:o})=>t.shiftKey||t.altKey||Zy()&&N8(t)?!1:(e?(t.preventDefault(),o(t)):n&&s.danger("The message you submitted was too long, please submit something shorter.",{hasCloseButton:!0}),!0),LQe=(t,{isAutocompletionActive:e,clearAutocompletions:n,canAbortCompletion:s,clientThreadId:o,abortCompletion:a,isEmpty:i,hasTargetedContent:l,clearTargetedContent:c,hasSystemHint:d,removeSystemHint:u,hasSelectedTarget:f,removeSelectedTarget:m,hasNonDefaultModel:g,removeNonDefaultModel:p})=>s?(a(),B.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:jt(o),currentLeafId:he.getCurrentNode(mt(o)).message.id,eventSource:"keyboard"}),!0):e!=null&&e()?(n(),!0):d?(u(),!0):g?(p(),!0):i&&l?(c(),!0):f?(m(),!0):!1,OQe={PromptTextareaHeader:"z-20"},SCe=R(()=>P(()=>import("./l90ske1z87mx6a7v.js"),__vite__mapDeps([340,1])),{loading:t=>F(t)}),wCe=R(()=>P(()=>import("./kaiea8uhls5eyfc2.js"),__vite__mapDeps([341,1])),{loading:t=>F(t)});function kCe({voice:t,voiceSpeed:e}){const[n,s]=_.useState(!1),o=F3(),a=t.voice,i=t.preview_url,l=_.useRef({playPromise:null}).current,c=B3(g=>g.isPlaying&&g.sourceUrl===i);_.useEffect(()=>{o&&o.setSpeed(e)},[o,e]);const d=$t(),u=_.useCallback(async()=>{if(!o)return;const g={voice:a,source:i};Ut.previews.click(g);try{s(!0),o.changeSource(i),l.playPromise=o.play(),s(!1)}catch(p){Ut.previews.error(p,g),d.danger(Ge({id:"DeIYxH",defaultMessage:"Something went wrong playing preview"}),{toastId:"voice_preview_player_play_error"})}},[o,i,a,l,d]),f=_.useCallback(()=>{o&&(l.playPromise?l.playPromise.then(()=>{o.stop(),l.playPromise=null}):o.stop())},[o,l]),m=_.useCallback(()=>{c?f():n||u()},[f,u,n,c]);return _.useEffect(()=>()=>{c&&f()},[t,c,f]),r.jsx(ye,{onClick:m,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:n,icon:c?SCe:wCe,children:c?r.jsx(j,{id:"yGpEMJ",defaultMessage:"Stop"}):r.jsx(j,{id:"JwYDVp",defaultMessage:"Play"})})}var XD=["PageUp","PageDown"],eF=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],tF={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Yd="Slider",[ry,ECe,TCe]=n3(Yd),[nF]=kl(Yd,[TCe]),[MCe,U1]=nF(Yd),sF=_.forwardRef((t,e)=>{const I=t,{name:n,min:s=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:f=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:p}=I,h=we(I,["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"]),x=_.useRef(new Set),v=_.useRef(0),b=i==="horizontal"?ACe:ICe,[C=[],S]=hr({prop:u,defaultProp:d,onChange:N=>{var O;(O=[...x.current][v.current])==null||O.focus(),f(N)}}),E=_.useRef(C);function k(N){const L=LCe(C,N);A(N,L)}function T(N){A(N,v.current)}function M(){const N=E.current[v.current];C[v.current]!==N&&m(C)}function A(N,L,{commit:O}={commit:!1}){const D=BCe(a),$=UCe(Math.round((N-s)/a)*a+s,D),H=Np($,[s,o]);S((G=[])=>{const Z=PCe(G,H,L);if(FCe(Z,c*a)){v.current=Z.indexOf(H);const Q=String(Z)!==String(G);return Q&&O&&m(Z),Q?Z:G}else return G})}return r.jsx(MCe,{scope:t.__scopeSlider,name:n,disabled:l,min:s,max:o,valueIndexToChangeRef:v,thumbs:x.current,values:C,orientation:i,form:p,children:r.jsx(ry.Provider,{scope:t.__scopeSlider,children:r.jsx(ry.Slot,{scope:t.__scopeSlider,children:r.jsx(b,U(w({"aria-disabled":l,"data-disabled":l?"":void 0},h),{ref:e,onPointerDown:Rt(h.onPointerDown,()=>{l||(E.current=C)}),min:s,max:o,inverted:g,onSlideStart:l?void 0:k,onSlideMove:l?void 0:T,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&A(s,0,{commit:!0}),onEndKeyDown:()=>!l&&A(o,C.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:L})=>{if(!l){const $=XD.includes(N.key)||N.shiftKey&&eF.includes(N.key)?10:1,H=v.current,G=C[H],Z=a*$*L;A(G+Z,H,{commit:!0})}}}))})})})});sF.displayName=Yd;var[oF,aF]=nF(Yd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ACe=_.forwardRef((t,e)=>{const b=t,{min:n,max:s,dir:o,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d}=b,u=we(b,["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),[f,m]=_.useState(null),g=On(e,C=>m(C)),p=_.useRef(),h=hh(o),x=h==="ltr",v=x&&!a||!x&&a;function y(C){const S=p.current||f.getBoundingClientRect(),E=[0,S.width],T=P5(E,v?[n,s]:[s,n]);return p.current=S,T(C-S.left)}return r.jsx(oF,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:r.jsx(rF,U(w({dir:h,"data-orientation":"horizontal"},u),{ref:g,style:U(w({},u.style),{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:C=>{const S=y(C.clientX);i==null||i(S)},onSlideMove:C=>{const S=y(C.clientX);l==null||l(S)},onSlideEnd:()=>{p.current=void 0,c==null||c()},onStepKeyDown:C=>{const E=tF[v?"from-left":"from-right"].includes(C.key);d==null||d({event:C,direction:E?-1:1})}}))})}),ICe=_.forwardRef((t,e)=>{const h=t,{min:n,max:s,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c}=h,d=we(h,["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),u=_.useRef(null),f=On(e,u),m=_.useRef(),g=!o;function p(x){const v=m.current||u.current.getBoundingClientRect(),y=[0,v.height],C=P5(y,g?[s,n]:[n,s]);return m.current=v,C(x-v.top)}return r.jsx(oF,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:r.jsx(rF,U(w({"data-orientation":"vertical"},d),{ref:f,style:U(w({},d.style),{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:x=>{const v=p(x.clientY);a==null||a(v)},onSlideMove:x=>{const v=p(x.clientY);i==null||i(v)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:x=>{const y=tF[g?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:y?-1:1})}}))})}),rF=_.forwardRef((t,e)=>{const f=t,{__scopeSlider:n,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c}=f,d=we(f,["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"]),u=U1(Yd,n);return r.jsx(un.span,U(w({},d),{ref:e,onKeyDown:Rt(t.onKeyDown,m=>{m.key==="Home"?(i(m),m.preventDefault()):m.key==="End"?(l(m),m.preventDefault()):XD.concat(eF).includes(m.key)&&(c(m),m.preventDefault())}),onPointerDown:Rt(t.onPointerDown,m=>{const g=m.target;g.setPointerCapture(m.pointerId),m.preventDefault(),u.thumbs.has(g)?g.focus():s(m)}),onPointerMove:Rt(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&o(m)}),onPointerUp:Rt(t.onPointerUp,m=>{const g=m.target;g.hasPointerCapture(m.pointerId)&&(g.releasePointerCapture(m.pointerId),a(m))})}))}),iF="SliderTrack",lF=_.forwardRef((t,e)=>{const a=t,{__scopeSlider:n}=a,s=we(a,["__scopeSlider"]),o=U1(iF,n);return r.jsx(un.span,U(w({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},s),{ref:e}))});lF.displayName=iF;var iy="SliderRange",cF=_.forwardRef((t,e)=>{const m=t,{__scopeSlider:n}=m,s=we(m,["__scopeSlider"]),o=U1(iy,n),a=aF(iy,n),i=_.useRef(null),l=On(e,i),c=o.values.length,d=o.values.map(g=>uF(g,o.min,o.max)),u=c>1?Math.min(...d):0,f=100-Math.max(...d);return r.jsx(un.span,U(w({"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0},s),{ref:l,style:U(w({},t.style),{[a.startEdge]:u+"%",[a.endEdge]:f+"%"})}))});cF.displayName=iy;var ly="SliderThumb",dF=_.forwardRef((t,e)=>{const n=ECe(t.__scopeSlider),[s,o]=_.useState(null),a=On(e,l=>o(l)),i=_.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(jCe,U(w({},t),{ref:a,index:i}))}),jCe=_.forwardRef((t,e)=>{const y=t,{__scopeSlider:n,index:s,name:o}=y,a=we(y,["__scopeSlider","index","name"]),i=U1(ly,n),l=aF(ly,n),[c,d]=_.useState(null),u=On(e,b=>d(b)),f=c?i.form||!!c.closest("form"):!0,m=o8(c),g=i.values[s],p=g===void 0?0:uF(g,i.min,i.max),h=RCe(s,i.values.length),x=m==null?void 0:m[l.size],v=x?OCe(x,p,l.direction):0;return _.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:"calc(".concat(p,"% + ").concat(v,"px)")},children:[r.jsx(ry.ItemSlot,{scope:t.__scopeSlider,children:r.jsx(un.span,U(w({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":i.min,"aria-valuenow":g,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0},a),{ref:u,style:g===void 0?{display:"none"}:t.style,onFocus:Rt(t.onFocus,()=>{i.valueIndexToChangeRef.current=s})}))}),f&&r.jsx(NCe,{name:o!=null?o:i.name?i.name+(i.values.length>1?"[]":""):void 0,form:i.form,value:g},s)]})});dF.displayName=ly;var NCe=t=>{const a=t,{value:e}=a,n=we(a,["value"]),s=_.useRef(null),o=M3(e);return _.useEffect(()=>{const i=s.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&d){const u=new Event("input",{bubbles:!0});d.call(i,e),i.dispatchEvent(u)}},[o,e]),r.jsx("input",U(w({style:{display:"none"}},n),{ref:s,defaultValue:e}))};function PCe(t=[],e,n){const s=[...t];return s[n]=e,s.sort((o,a)=>o-a)}function uF(t,e,n){const a=100/(n-e)*(t-e);return Np(a,[0,100])}function RCe(t,e){return e>2?"Value ".concat(t+1," of ").concat(e):e===2?["Minimum","Maximum"][t]:void 0}function LCe(t,e){if(t.length===1)return 0;const n=t.map(o=>Math.abs(o-e)),s=Math.min(...n);return n.indexOf(s)}function OCe(t,e,n){const s=t/2,a=P5([0,50],[0,s]);return(s-a(e)*n)*n}function DCe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function FCe(t,e){if(e>0){const n=DCe(t);return Math.min(...n)>=e}return!0}function P5(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function BCe(t){return(String(t).split(".")[1]||"").length}function UCe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var R5=sF,L5=lF,fF=cF,O5=dF;const cy=.5,dy=2,mF=.1,gF=Math.round((dy-cy)/mF),$Ce=Array.from({length:gF+1},(t,e)=>e),pF=2,Vg=8,Xw=(Vg-pF)/2,VCe=t=>{const e=Number(t);return isNaN(e)?1:e};function HCe(t){return ve(t,"174366048")}function GCe(t){return ve(t,"3302173089")}const D5=()=>{const{value:t}=Cm(Lt.VoiceEnabled);return t!==!1};function DQe(){const t=V(),e=HCe(t),n=Jo(),s=GCe(t),{isLoading:o,value:a,setValue:i}=Cm(Lt.VoiceSpeed),l=VCe(a),c=D5();if(!e)return null;const d=(n==null?void 0:n.length)&&!(n!=null&&n.includes(ss.VideoScreenSharing));return r.jsxs(r.Fragment,{children:[c&&r.jsxs(r.Fragment,{children:[r.jsx(Ja,{children:r.jsx(qCe,{})}),r.jsx(Ja,{children:r.jsx(WCe,{voiceSpeed:l})})]}),s&&c&&r.jsx(Ja,{children:r.jsx(zCe,{voiceSpeed:l,setVoiceSpeed:i,isLoading:o})}),d&&r.jsx(Ja,{children:r.jsx(YCe,{})})]})}function Cm(t,e=!1){const{data:n,isLoading:s}=eo(t)||{},o=wl(e);return{isLoading:s,value:n,setValue:a=>{o.mutate({setting:t,value:a})}}}function WCe({voiceSpeed:t}){const{isLoading:e,value:n,setValue:s}=Cm(Lt.VoiceName),o=SO(),a=CO(),i=e?"":wO(n,a),l=o.find(({voice:c})=>c===i);return r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(j,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),r.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[l?r.jsxs(r.Fragment,{children:[r.jsx(kCe,{voice:l,voiceSpeed:t}),r.jsx("div",{className:"h-4 border-s"})]}):null,r.jsxs(Fn.Root,{value:i,onValueChange:c=>s(c),disabled:e,children:[r.jsxs(Fn.Trigger,{children:[r.jsx(Fn.Value,{}),r.jsx(Fn.Icon,{})]}),r.jsx(Fn.Portal,{children:r.jsx(Fn.Content,{children:o.map(({voice:c,name:d})=>r.jsx(Fn.Item,{value:c,children:d},c))})})]})]})]})})})}function zCe({voiceSpeed:t,setVoiceSpeed:e,isLoading:n}){const[s,o]=_.useState(t);return _.useEffect(()=>o(t),[t]),r.jsxs("div",{className:"flex w-full flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(j,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),r.jsx("div",{className:"text-token-text-secondary tabular-nums",children:r.jsx(j,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:s.toFixed(1)}})})]}),r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs(R5,{className:"relative flex w-full items-center",min:cy,max:dy,step:mF,value:[s],disabled:n,onValueChange:a=>o(a[0]),onValueCommit:a=>{const i=a[0],l=Math.min(dy,Math.max(cy,i));e(l.toString())},children:[r.jsxs(L5,{className:"relative h-[4px] grow rounded-full",children:[r.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:Xw,right:Xw}}),r.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:Vg/2,right:Vg/2},children:$Ce.map(a=>r.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:pF,left:"".concat(a/gF*100,"%"),transform:"translateX(-50%)"}},a))})]}),r.jsx(O5,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:Vg}})]})})})]})}function qCe(){const{isLoading:t,value:e,setValue:n}=Cm(Lt.VoiceMainLanguage);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(j,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),r.jsxs(Fn.Root,{value:t?"":e!=null?e:Cu.Auto,onValueChange:s=>n(s),disabled:t,children:[r.jsxs(Fn.Trigger,{children:[r.jsx(Fn.Value,{}),r.jsx(Fn.Icon,{})]}),r.jsx(Fn.Portal,{children:r.jsxs(Fn.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[r.jsx(Fn.Item,{value:Cu.Auto,children:r.jsx(j,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(Cu).filter(([s,o])=>o!==Cu.Auto).map(([s,o])=>r.jsx(Fn.Item,{value:o,className:"capitalize",children:s},o))]})})]})]}),r.jsx(a8,{children:r.jsx(j,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function YCe(){const t=ne();return r.jsx(Rc,{label:t.formatMessage(e7.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:t.formatMessage(e7.voiceAndScreenSharingDescription)})}const e7=Se({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}}),ZCe=()=>{"use forget";const t=W.c(12),{value:e,setValue:n,isLoading:s}=Cm(Lt.VoiceEnabled),o=ne();let a;t[0]!==o?(a=o.formatMessage(t7.voiceEnabledSetting),t[0]=o,t[1]=a):a=t[1];const i=e!=null?e:!0;let l;t[2]!==n?(l=u=>{n(u)},t[2]=n,t[3]=l):l=t[3];let c;t[4]!==o?(c=o.formatMessage(t7.voiceEnabledSettingDescription),t[4]=o,t[5]=c):c=t[5];let d;return t[6]!==s||t[7]!==a||t[8]!==i||t[9]!==l||t[10]!==c?(d=r.jsx(Rc,{label:a,isLoading:s,enabled:i,onChange:l,description:c}),t[6]=s,t[7]=a,t[8]=i,t[9]=l,t[10]=c,t[11]=d):d=t[11],d};function FQe({disabledTools:t,onDisabledToolsChanged:e}){var v;_.useEffect(()=>{B.logEvent("User Context GPT-4 Capabilities Shown")},[]);const n=V(),s=st(n),o=(v=s==null?void 0:s.isEnterprisey())!=null?v:!1,a=!Q2(ss.BrowsingAvailable)&&o,i=!ve(n,"934056609"),l=ve(n,"3199592968"),c=ne(),d=y=>{const b=t.includes(y)?t.filter(C=>C!==y):[...t,y];e(b)},u=Jo(),f=!Q2(ss.Canvas)&&o;var m;u!=null&&u.includes(ss.SearchTool)&&!u.includes(ss.SearchToolHoldout)?m=du({tool:Nn.BROWSER,label:c.formatMessage({id:"userContextModal.tools.web",defaultMessage:"Web search"}),disabledTooltipLabel:c.formatMessage({id:"4WldgK",defaultMessage:"Web search is disabled by your organization"}),description:c.formatMessage({id:"userContexModal.tools.webSearchTooltip",defaultMessage:"Let ChatGPT automatically search the web for answers."}),enabled:!t.includes(Nn.BROWSER)&&!a,handleToolClick:d,disabled:a}):m=du({tool:Nn.BROWSER,label:c.formatMessage({id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),disabledTooltipLabel:c.formatMessage({id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}),description:c.formatMessage({id:"userContexModal.tools.browserTooltip",defaultMessage:"Let ChatGPT browse the internet to find answers."}),enabled:!t.includes(Nn.BROWSER)&&!a,handleToolClick:d,disabled:a});const g=l?null:du({tool:Nn.PYTHON,label:c.formatMessage({id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),description:c.formatMessage({id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Let ChatGPT execute code using Code Interpreter."}),enabled:!t.includes(Nn.PYTHON),handleToolClick:d}),p=du({tool:Nn.CANMORE,label:c.formatMessage({id:"FW2C7Y",defaultMessage:"Canvas"}),description:c.formatMessage({id:"zPYZ4h",defaultMessage:"Collaborate with ChatGPT on text and code."}),enabled:!t.includes(Nn.CANMORE),handleToolClick:d}),h=du({tool:Nn.ADVANCED_VOICE,label:c.formatMessage({id:"eHCnkb",defaultMessage:"Advanced voice"}),description:c.formatMessage({id:"OrvjWP",defaultMessage:"Have more natural conversations in voice mode."}),enabled:!t.includes(Nn.ADVANCED_VOICE),handleToolClick:d}),x=D5();return r.jsxs(r.Fragment,{children:[m,g,!f&&p,r.jsx(Ja,{children:r.jsx(ZCe,{})}),i&&x&&h]})}function du({tool:t,label:e,disabledTooltipLabel:n,description:s,enabled:o,handleToolClick:a,disabled:i}){return r.jsx(Ja,{children:r.jsx(Rc,{label:e,enabled:o,onChange:()=>a(t),toggleTooltip:i&&n,description:s,disabled:i})})}const t7=Se({voiceEnabledSetting:{id:"oFt0Pe",defaultMessage:"ChatGPT Voice"},voiceEnabledSettingDescription:{id:"v/Uvaa",defaultMessage:"Enable voice mode in ChatGPT"}}),BQe=()=>!_t.getItem("hasSeenIntegratedVoiceNuxBefore"),UQe=()=>{_t.setItem("hasSeenIntegratedVoiceNuxBefore",!0)};function $Qe(){const t=at();return r.jsx(_n,{primaryCtaText:r.jsx(j,{id:"k/qPdM",defaultMessage:"Manage tasks"}),onPrimaryCtaClick:()=>{t("/tasks")},title:r.jsx(j,{id:"mYNRrn",defaultMessage:"Youve reached your limit for scheduled tasks."}),content:r.jsx(j,{id:"Bwsb55",defaultMessage:"To schedule new ones, pause some of your existing tasks first."})})}const hF=Oe.HasSeenAdvancedVoiceOnMobile,KCe=window.location.origin+"/update-app",n7=window.location.origin+"/update-app?origin=qr";function QCe(t){const e=st(t),n=ve(t,"989108178");return e!=null&&n}function VQe(t){var l;const e=V(),n=QCe(e),{eligible:s,isLoading:o}=lt(hF);return{eligible:!(!n||!s||((l=t.conversationMode)==null?void 0:l.kind)!==wt.PrimaryAssistant)&&!o}}const JCe=3;function XCe(t){let e=_t.getItem(Ue.AdvancedVoiceOnMobileAnnouncementCount);Array.isArray(e)||(e=[]);const n=new Set(e);return t&&n.add(t),e=[...n],_t.setItem(Ue.AdvancedVoiceOnMobileAnnouncementCount,e),e.length}function HQe({onClose:t,clientThreadId:e}){const n=V(),s=_.useCallback(()=>{ot(n,hF)},[n]),o=Kn(e);_.useEffect(()=>{const c=XCe(o);c>JCe&&(s(),qe.logEvent("chatgpt_advanced_voice_on_mobile_announcement_limit_reached",c)),B.logEvent("Advanced Voice on Mobile: Announcement Shown"),qe.logEvent("chatgpt_advanced_voice_on_mobile_announcement_shown"),B.logUpsellOrModalEvent(dn,{eventId:"advanced_voice_on_mobile_announcement_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[o,s]);const a=_.useCallback(()=>{s(),B.logEvent("Advanced Voice on Mobile: Dismissed Announcement"),qe.logEvent("chatgpt_advanced_voice_on_mobile_announcement_dismissed"),t&&t()},[s,t]),l={markAsDownloaded:_.useCallback(()=>{B.logEvent("Advanced Voice on Mobile: Link Clicked"),qe.logEvent("chatgpt_advanced_voice_on_mobile_announcement_download_clicked"),s(),t&&t()},[s,t]),markAsViewed:a};return r.jsx(tSe,w({},l))}function eSe(){window.open(KCe,"_blank")}function tSe({markAsDownloaded:t,markAsViewed:e}){const n=ne(),[s,o]=_.useState(!1),a=_.useCallback(()=>{eSe(),t()},[t]),i=r.jsx("div",{className:"grow flex-row",children:r.jsxs("div",{className:"flex-column",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(j,w({},lc.advancedVoiceOnMobileBannerTitle))}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,w({},lc.advancedVoiceOnMobileBannerDescription))})]})}),l=!Sd(),c=Cd();let d;return l?c?d=Object.freeze({primaryCtaQrLink:n7,onPrimaryCtaQrClick:()=>o(!0)}):d=Object.freeze({onSecondaryCtaClick:()=>o(!0),secondaryCtaText:n.formatMessage(lc.advancedVoiceOnMobileButtonScanCode)}):d=Object.freeze({onPrimaryCtaClick:a,primaryCtaText:n.formatMessage(lc.advancedVoiceOnMobileButtonDownload)}),r.jsxs(r.Fragment,{children:[r.jsx(_n,U(w({},d),{onDismiss:e,content:i})),l&&r.jsx(Mt,{testId:"modal-advanced-voice-on-mobile-qr",size:"custom",className:"w-[328px] max-w-[328px]",title:n.formatMessage(lc.advancedVoiceOnMobileQRModalTitle),isOpen:s,showCloseButton:!0,onClose:()=>o(!1),type:"success",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(BR,{className:"m-[24px] mt-[0px]",size:280,value:n7}),r.jsx("div",{className:"text-token-text-primary text-start",children:r.jsx(j,w({},lc.advancedVoiceOnMobileQRModalDescription))})]})})]})}const lc=Se({advancedVoiceOnMobileBannerTitle:{id:"AdvancedVoiceOnMobile.banner.title",defaultMessage:"Download the latest iOS or Android app to try advanced voice mode"},advancedVoiceOnMobileBannerDescription:{id:"AdvancedVoiceOnMobile.banner.description",defaultMessage:"Get more natural, real-time conversations with advanced voice. Senses and responds to humor, sarcasm, interruptions, and more."},advancedVoiceOnMobileButtonDownload:{id:"AdvancedVoiceOnMobile.button.download",defaultMessage:"Download"},advancedVoiceOnMobileButtonScanCode:{id:"AdvancedVoiceOnMobile.button.scancode",defaultMessage:"Scan code"},advancedVoiceOnMobileButtonClose:{id:"AdvancedVoiceOnMobile.button.close",defaultMessage:"Close"},advancedVoiceOnMobileQRModalTitle:{id:"AdvancedVoiceOnMobile.qrmodal.title",defaultMessage:"Download the app"},advancedVoiceOnMobileQRModalDescription:{id:"AdvancedVoiceOnMobile.qrmodal.description",defaultMessage:"Scan the QR code on your phone to download the ChatGPT app."}}),_F=R(()=>P(()=>Promise.resolve().then(()=>MBe),void 0),{loading:t=>F(t)}),xF="1696863369",nSe=Oe.UseSidekick,sSe=Oe.SidekickLauncherOnboarding,oSe="https://help.openai.com/en/articles/9275200",aSe="https://persistent.oaistatic.com/sidekick/public/ChatGPT_Desktop_public_latest.dmg",yF="1697140512",rSe=Oe.UseSidetron,iSe=Oe.hasSeenWindowsAppOnboarding,lSe="https://help.openai.com/en/articles/9982051",cSe="https://apps.microsoft.com/detail/9nt1r1c2hh7j",vF="download";function bF(t,e,n){const s=st(t),o=ze(t,e).get(n,!1);return s!=null&&o}function dSe(t){return bF(t,xF,"has_sidekick_access")}function uSe(t){return bF(t,yF,"can_download_sidetron")}function F5(t){const e=dSe(t),n=uSe(t);return{isSidekickAvailable:e,isSidetronAvailable:n,isDesktopAppAvailable:e||n}}function fSe(t){return t===vF}function mSe(){const t=at(),{hash:e}=Vn(),n=fSe(e.slice(1));return{openModal:()=>{t({hash:vF})},closeModal:()=>{t({hash:""})},isOpen:n}}function GQe(t){var g;const e=V(),n=F5(e),{isDesktopAppAvailable:s}=n,o=B5(n),i=ze(e,o.statsigLayerName).get("show_nux_banner",!1),{eligible:l,isLoading:c}=lt(o.downloadAnnouncement),{eligible:d,isLoading:u}=lt(o.onboardingAnnouncement);return{eligible:!(!l||!d||!s||((g=t.conversationMode)==null?void 0:g.kind)!==wt.PrimaryAssistant)&&i,isLoading:u||c}}function WQe({onClose:t}){const e=V(),n=F5(e),s=B5(n);_.useEffect(()=>{B.logEvent(s.analyticsBannerShown),qe.logEvent(s.statsigBannerShown),B.logUpsellOrModalEvent(dn,{eventId:"".concat(s.downloadAnnouncement,"_banner_shown"),type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[s.analyticsBannerShown,s.statsigBannerShown,s.downloadAnnouncement]);const o=_.useCallback(()=>{ot(e,s.downloadAnnouncement),B.logEvent(s.analyticsBannerDismissed),qe.logEvent(s.statsigBannerDismissed),t&&t()},[e,t,s.analyticsBannerDismissed,s.statsigBannerDismissed,s.downloadAnnouncement]),a=_.useCallback(()=>{B.logEvent(s.analyticsBannerDownloadClicked),qe.logEvent(s.statsigBannerDownloadClicked),ot(e,s.downloadAnnouncement),t&&t()},[e,t,s.analyticsBannerDownloadClicked,s.statsigBannerDownloadClicked,s.downloadAnnouncement]),i=U(w({},s),{isAppAvailable:n.isDesktopAppAvailable,markAsDownloaded:a,markAsViewed:o});return r.jsx(hSe,w({},i))}function gSe(t){window.open(t,"_blank")}function B5(t){return t.isSidekickAvailable?bSe:CSe}function pSe(t){return t.bannerTitle}function zQe(){const t=V(),{closeModal:e,isOpen:n}=mSe(),s=F5(t),{isDesktopAppAvailable:o}=s,a=B5(s),i=_.useMemo(()=>({isDesktopAppAvailable:o}),[o]),l=()=>{B.logEvent(a.analyticsModalClosed,i),qe.logEvent(a.statsigModalClosed),e()},c=()=>{B.logEvent(a.analyticsModalDownloadClicked,i),qe.logEvent(a.statsigModalDownloadClicked),e()};if(_.useEffect(()=>{n&&(B.logEvent(a.analyticsModalShown,w({},i)),qe.logEvent(a.statsigModalShown))},[i,n,a.analyticsModalShown,a.statsigModalShown]),!n)return null;const d=U(w({},a),{isAppAvailable:s.isDesktopAppAvailable,markAsDownloaded:c,markAsViewed:l});return r.jsx(_Se,w({},d))}function hSe({downloadUrl:t,markAsDownloaded:e,markAsViewed:n,messages:s,learnMoreUrl:o}){const a=ne(),i=_.useCallback(()=>{gSe(t),e()},[e,t]),l=r.jsx(j,w({},pSe(s))),c=r.jsx(j,w({},s.bannerContent)),d=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:l}),r.jsx("span",{className:"text-token-text-secondary",children:c}),r.jsxs(to,{href:o,className:"ms-2 gap-1 font-medium",children:[r.jsx(j,w({},s.learnMore)),r.jsx(_F,{className:"icon-sm inline-block"})]})]});return r.jsx(_n,{onPrimaryCtaClick:i,primaryCtaText:a.formatMessage(s.download),onDismiss:n,content:d})}function _Se({downloadUrl:t,markAsDownloaded:e,markAsViewed:n,isAppAvailable:s,messages:o,learnMoreUrl:a}){const i=o.modalTitle,l=r.jsx(j,w({},i)),c=r.jsx(j,w({},o.modalContent)),d=r.jsx("div",{className:"mt-2",children:r.jsxs(to,{href:a,className:"flex items-center gap-1 font-medium",children:[r.jsx(j,w({},o.learnMore)),r.jsx(_F,{className:"icon-sm"})]})}),u=r.jsx(ye,{as:"link",to:t,color:"primary",onClick:e,openNewTab:!0,children:r.jsx(j,w({},o.download))}),f=r.jsx(ye,{color:"secondary",onClick:n,children:r.jsx(j,w({},vSe.close))}),m=s?u:f,g=s?f:void 0;return r.jsx(mj,{onClose:n,title:l,description:c,actionButton:m,cancelButton:g,moreInfoLink:d})}const xSe=Se({bannerTitle:{id:"SidekickOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for macOS 14+ with Apple Silicon"},bannerContent:{id:"SidekickOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Option + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidekickOnboarding.modalTitle",defaultMessage:"ChatGPT is available for macOS 14+ with Apple Silicon"},modalContent:{id:"SidekickOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Option + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidekickOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidekickOnboarding.download",defaultMessage:"Download"}}),ySe=Se({bannerTitle:{id:"SidetronOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for Windows 10+"},bannerContent:{id:"SidetronOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Alt + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidetronOnboarding.modalTitle",defaultMessage:"ChatGPT is available for Windows 10+"},modalContent:{id:"SidetronOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Alt + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidetronOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidetronOnboarding.download",defaultMessage:"Download on Microsoft Store"}}),vSe=Se({close:{id:"SidekickOnboarding.close",defaultMessage:"Close"}}),bSe={downloadUrl:aSe,messages:xSe,learnMoreUrl:oSe,analyticsModalShown:"Sidekick: Download Modal Shown",analyticsModalClosed:"Sidekick: Download Modal Closed",analyticsModalDownloadClicked:"Sidekick: Download Modal Downloaded",analyticsBannerShown:"Sidekick: Announcement Shown",analyticsBannerDismissed:"Sidekcik: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidekick: Clicked Announcement Link",statsigLayerName:xF,statsigModalShown:"chatgpt_sidekick_modal_shown",statsigModalClosed:"chatgpt_sidekick_modal_closed",statsigModalDownloadClicked:"chatgpt_sidekick_modal_download_clicked",statsigBannerShown:"chatgpt_sidekick_announcement_shown",statsigBannerDismissed:"chatgpt_sidekick_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidekick_announcement_download_clicked",downloadAnnouncement:nSe,onboardingAnnouncement:sSe},CSe={downloadUrl:cSe,messages:ySe,learnMoreUrl:lSe,analyticsModalShown:"Sidetron: Download Modal Shown",analyticsModalClosed:"Sidetron: Download Modal Closed",analyticsModalDownloadClicked:"Sidetron: Download Modal Downloaded",analyticsBannerShown:"Sidetron: Announcement Shown",analyticsBannerDismissed:"Sidetron: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidetron: Clicked Announcement Link",statsigLayerName:yF,statsigModalShown:"chatgpt_sidetron_modal_shown",statsigModalClosed:"chatgpt_sidetron_modal_closed",statsigModalDownloadClicked:"chatgpt_sidetron_modal_download_clicked",statsigBannerShown:"chatgpt_sidetron_announcement_shown",statsigBannerDismissed:"chatgpt_sidetron_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidetron_announcement_download_clicked",downloadAnnouncement:rSe,onboardingAnnouncement:iSe};function SSe({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s=!0}){const o=V(),{data:a,isLoading:i,error:l}=_fe({countryCode:t,ctx:o}),[c,d]=_.useState(()=>s7({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:a}));return _.useEffect(()=>{d(s7({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:a}))},[t,e,n,s,a,i,l]),c}function wSe({initialCountryCode:t}={}){const e=V(),n=Rn(e),s="userCountry"in n?n.userCountry:null,[o,a]=_.useState(t&&ej(t)?t:cse({country:s,shouldUseDefaultCountryCode:!1}));return{country:o,setCountry:a,userCountry:s}}function s7({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:o}){return e!=null&&e.hasPaidSubscription()&&s?{currency:e==null?void 0:e.mustGetSubscriptionBillingCurrency(n)}:o?{country:t,currency:o.currencyConfig.symbol_code}:null}const kSe="promoCode",ESe="oai/apps/promoEligibleUpsellSuppression",qQe=t=>{var l,c,d;const{data:e,isLoading:n}=rt({enabled:!!t,queryKey:["promotionEligibility",t],queryFn:()=>ge.safeGet("/promotions/eligibility/{promo_code}",{parameters:{path:{promo_code:t}}})}),{data:s,isLoading:o}=rt({enabled:!!t&&(e==null?void 0:e.is_eligible),queryKey:["promotionMetadata",t],queryFn:()=>ge.safeGet("/promotions/metadata/{promo_code}",{parameters:{path:{promo_code:t}}})}),a=n||o,i=(e==null?void 0:e.ineligible_reason)&&(e&&!e.is_eligible&&(l=e.ineligible_reason)!=null?l:null);return{isEligible:(c=e==null?void 0:e.is_eligible)!=null?c:!1,isPromoLoading:a,promoCode:t,promoError:i,promoMetadata:(d=s==null?void 0:s.metadata)!=null?d:null}},fo=window.localStorage,o7=Ft(Mn(()=>{var n;const t=(n=fo==null?void 0:fo.getItem(Ue.NoAuthBannerDisclaimerClientThreadId))!=null?n:null,e=(fo==null?void 0:fo.getItem(Ue.NoAuthHasAcceptedFooterDisclaimer))==="true";return{bannerDisclaimerClientThreadId:t,hasAcceptedFooterDisclaimer:e}})),CF={updateBannerDisclaimerClientThreadId(t){o7.setState(e=>{e.bannerDisclaimerClientThreadId=t}),fo==null||fo.setItem(Ue.NoAuthBannerDisclaimerClientThreadId,t)},updateHasAcceptedFooterDisclaimer(){o7.setState(t=>{t.hasAcceptedFooterDisclaimer=!0}),fo==null||fo.setItem(Ue.NoAuthHasAcceptedFooterDisclaimer,"true")}},TSe=R(()=>P(()=>import("./jasggtze31dxpnzc.js"),__vite__mapDeps([325,1])),{loading:t=>F(t)}),J0=t=>{"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{className:"pointer-events-auto",children:n}),e[0]=n,e[1]=s):s=e[1],s};function MSe({clientThreadId:t}){const e=K3(t);return e!=null?r.jsx(ASe,{clientThreadId:t,gizmoId:e}):r.jsx(SF,{clientThreadId:t})}function ASe({clientThreadId:t,gizmoId:e}){const n=Ci(e).data,s=Ve(t,he.getThreadCreateTime),o=(n==null?void 0:n.gizmo.updated_at)!=null?new Date(n.gizmo.updated_at):void 0;return(n==null?void 0:n.gizmo.gizmo_type)===Qg.PROJECT||(n==null?void 0:n.gizmo.short_url)==null||o==null||s==null||o<=s?r.jsx(SF,{clientThreadId:t}):r.jsxs("div",{className:"text-token-text-tertiary",children:[r.jsx(TSe,{className:"text-token-secondary me-1 mb-1 inline-block h-4 w-4 stroke-0"}),r.jsx(j,U(w({},fs.outdatedGptDisclaimer),{values:{link:a=>r.jsx(wo,{to:qE(n.gizmo.short_url),className:"underline",children:a},"gizmo-link-".concat(n.gizmo.short_url)),bold:a=>r.jsx("span",{className:"text-token-secondary font-semibold",children:a},"gizmo-bold-".concat(n.gizmo.short_url))}}))]})}function SF({clientThreadId:t}){const e=V(),n=st(e),s=Sn(),o=!tt(e),a=vr.useStore(),i=Ve(t,he.hasUserMessage);if(n!=null&&n.isWorkspaceAccount()){if(s==null)return null;if(ve(e,"2462890004"))return r.jsx(J0,{children:s.name!=null?r.jsx(j,U(w({},fs.earlyAccessBusinessDisclaimer),{values:{workspaceName:s.name}})):r.jsx(j,w({},fs.earlyAccessBusinessDisclaimerNoName))});const c=s.data.ekmConfig!=null;return r.jsx(J0,{children:c?s.name!=null?r.jsx(j,U(w({},fs.businessDisclaimerWithEncryption),{values:{workspaceName:s.name}})):r.jsx(j,w({},fs.businessDisclaimerWithEncryptionNoName)):s.name!=null?r.jsx(j,U(w({},fs.businessDisclaimer),{values:{workspaceName:s.name}})):r.jsx(j,w({},fs.businessDisclaimerNoName))})}if(o&&!i)return r.jsx(U5,{clientThreadId:t});let l=fs.mayProduceInaccurateInformation;return x5(e,n)&&(l=fs.mayProduceInaccurateInformationWithCookieConsent),r.jsx(J0,{children:r.jsx(j,U(w({},l),{values:{cookiePreferencesLink:c=>r.jsx("a",{onClick:d=>{d.preventDefault(),B.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!0}),a.openModal()},className:"text-token-text-primary decoration-token-text-primary cursor-pointer underline",children:c})}}))})}function U5({clientThreadId:t,variant:e="default"}){const n=V(),s=st(n),{country:o}=bd(n);let a=e==="default"?o==="KR"?fs.mayProduceInaccurateInformationNoAuthKorea:fs.mayProduceInaccurateInformationNoAuthV2:o==="KR"?fs.agreeToTermsNoAuthKorea:fs.agreeToTermsNoAuthV2;const l=ze(n,"3533083032",{disableExposureLog:!0}).get("disclaimer_color_adjust",!1),c=vr.useStore();return x5(n,s)&&(a=e==="default"?o==="KR"?fs.mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:fs.mayProduceInaccurateInformationNoAuthV2WithCookieConsent:o==="KR"?fs.agreeToTermsNoAuthKoreaWithCookieConsent:fs.agreeToTermsNoAuthV2WithCookieConsent),_.useEffect(()=>()=>{he.hasUserMessage(mt(t))&&CF.updateHasAcceptedFooterDisclaimer()},[t]),r.jsx("span",{className:z("pointer-events-auto text-sm",e==="byContinuing"?void 0:"leading-none"),children:r.jsx(j,U(w({},a),{values:{privacyLink:d=>r.jsx("a",{href:"https://openai.com/privacy",target:"_blank",className:z(l?"text-token-text-secondary":"text-token-text-primary","decoration-token-text-primary underline"),onClick:()=>{qe.logEvent("chatgpt_footer_disclaimer_privacy_link_clicked"),B.logEvent("Footer Disclaimer Privacy Link Clicked")},rel:"noreferrer",children:d},"privacy_link"),termsLink:d=>r.jsx("a",{href:"https://openai.com/terms",target:"_blank",className:z(l?"text-token-text-secondary":"text-token-text-primary","decoration-token-text-primary underline"),onClick:()=>{qe.logEvent("chatgpt_footer_disclaimer_terms_link_clicked"),B.logEvent("Footer Disclaimer Terms Link Clicked")},rel:"noreferrer",children:d},"terms_link"),koreaAddendumLink:d=>r.jsx("a",{href:"https://openai.com/ko/policies/kr-privacy-policy-addendum",target:"_blank",className:"text-token-text-primary decoration-token-text-primary underline",onClick:()=>{qe.logEvent("chatgpt_footer_disclaimer_korea_addendum_link_clicked"),B.logEvent("Footer Disclaimer Korea Addendum Link Clicked")},rel:"noreferrer",children:d},"addendum_link"),cookiePreferencesLink:d=>r.jsx("a",{onClick:u=>{u.preventDefault(),c.openModal(),B.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!1})},className:"text-token-text-primary decoration-token-text-primary cursor-pointer underline",children:d},"cookie_preferences_link")}}))})}const fs=Se({mayProduceInaccurateInformation:{id:"thread.chatgptMayProduceInaccurateInformation-oct-30",defaultMessage:"ChatGPT can make mistakes. Check important info."},mayProduceInaccurateInformationWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationWithCookieConsent-may-12",defaultMessage:"ChatGPT can make mistakes. Check important info. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthV2:{id:"thread.chatgptMayProduceInaccurateInformationNoAuth-may-06",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},agreeToTermsNoAuthV2:{id:"thread.agreeToTermsNoAuth-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},mayProduceInaccurateInformationNoAuthV2WithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthV2WithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthV2WithCookieConsent:{id:"thread.agreeToTermsNoAuthV2WithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthKorea:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKorea-may-06",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},agreeToTermsNoAuthKorea:{id:"thread.agreeToTermsNoAuthKorea-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, an AI chatbot, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthKoreaWithCookieConsent:{id:"thread.agreeToTermsNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},businessDisclaimer:{id:"thread.businessDisclaimer-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models."},businessDisclaimerNoName:{id:"thread.businessDisclaimerNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models."},businessDisclaimerWithEncryption:{id:"thread.businessDisclaimerWithEncryption-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},businessDisclaimerWithEncryptionNoName:{id:"thread.businessDisclaimerWithEncryptionNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},outdatedGptDisclaimer:{id:"thread.outdatedGptDisclaimer.0",defaultMessage:"<bold>New version of GPT available</bold> - Continue chatting to use the old version, or start a <link>new chat</link> for the latest version."},earlyAccessBusinessDisclaimer:{id:"thread.earlyAccessBusinessDisclaimer",defaultMessage:"ChatGPT can make mistakes. OpenAI uses {workspaceName} workspace data to train its models."},earlyAccessBusinessDisclaimerNoName:{id:"thread.earlyAccessBusinessDisclaimerNoName",defaultMessage:"ChatGPT can make mistakes. OpenAI uses your workspace data to train its models."}});function YQe({threadId:t}){const e=V(),n=ne(),[s,o]=_.useState(!1);_.useEffect(()=>{CF.updateBannerDisclaimerClientThreadId(t),qe.logEvent("chatgpt_unauthenticated_legal_banner"),B.logEvent("Unauthenticated Legal Banner",{threadId:t})},[t]);const a=wT(e)?ur.bannerTermsDisclaimer:ur.bannerTermsDisclaimerSafetyAndAbuse;return s?null:r.jsx(_n,{onDismiss:()=>{o(!0),B.logEventWithStatsig("Unauthenticated Legal Banner Dismissed Clicked","chatgpt_unauthenticated_legal_banner_dismissed")},content:r.jsxs(r.Fragment,{children:[r.jsx(U5,{clientThreadId:t}),r.jsx("br",{}),n.formatMessage(a,{learnMoreLink:i=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{qe.logEvent("chatgpt_unauthenticated_banner_learn_more_clicked"),B.logEvent("Unauthenticated Signup Banner Learn More Clicked",{threadId:t})},children:i})})]})})}function ZQe({threadId:t,showLogin:e=!0}){const n=V(),s=ne(),a=ze(n,"2118136551").get("sign_up_button_has_the_word_free",!0);return _.useEffect(()=>{qe.logEvent("chatgpt_unauthenticated_signup_banner"),B.logEvent("Unauthenticated Signup Banner",{threadId:t})},[t]),r.jsx(_n,{content:s.formatMessage(ur.bannerSignup),onPrimaryCtaClick:()=>{Zt(n,{fallbackScreenHint:"signup",callback:i=>{qe.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),B.logSignUpButtonClicked({location:"Chat Stage Signup Banner",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_SIGNUP_BANNER)},skipLoginModal:!1})},primaryCtaText:s.formatMessage(a?ur.bannerSignupButtonWithFree:ur.bannerSignupButton),onSecondaryCtaClick:e?()=>{Zt(n,{fallbackScreenHint:"login",callback:i=>{qe.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),B.logLogInButtonClicked({location:"Chat Stage Signup Banner",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_SIGNUP_BANNER)},skipLoginModal:!1})}:void 0,secondaryCtaText:e?s.formatMessage(gt.logInButtonText):void 0})}function KQe({threadId:t,showSignUp:e}){const n=V(),s=ne(),a=ze(n,"2118136551").get("sign_up_button_has_the_word_free",!0);return _.useEffect(()=>{qe.logEvent("chatgpt_unauthenticated_login_banner"),B.logEvent("Unauthenticated Login Banner",{threadId:t})},[t]),r.jsx(_n,{content:s.formatMessage(ur.bannerSignup),onPrimaryCtaClick:()=>{Zt(n,{fallbackScreenHint:"login",callback:i=>{qe.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),B.logLogInButtonClicked({location:"Chat Stage Login Banner",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})},primaryCtaText:s.formatMessage(gt.logInButtonText),onSecondaryCtaClick:e?()=>{Zt(n,{fallbackScreenHint:"signup",callback:i=>{qe.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),B.logSignUpButtonClicked({location:"Chat Stage Login Banner",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})}:void 0,secondaryCtaText:e?a?s.formatMessage(ur.bannerSignupButtonWithFree):s.formatMessage(ur.bannerSignupButton):void 0})}const ur=Se({bannerTermsDisclaimer:{id:"bannerTermsDisclaimer",defaultMessage:"Don't share sensitive info. Chats may be reviewed and used to train our models. <learnMoreLink>Learn more</learnMoreLink>"},bannerTermsDisclaimerSafetyAndAbuse:{id:"pDsoLk",defaultMessage:"Don't share sensitive information. Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"},bannerSignup:{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."},bannerSignupButton:{id:"hedgehog.banner_signup_button",defaultMessage:"Sign up"},bannerSignupButtonWithFree:{id:"xL5gsL",defaultMessage:"Sign up for free"}});function QQe({threadId:t}){const e=V(),n=ne(),{isOpen:s,close:o,markViewedInClientThreadId:a,viewedInClientThreadId:i}=Qj(),l=ISe(e),c=Ve(t,he.hasUserMessage);return _.useEffect(()=>{i?jt(i)!==jt(t)&&o():(a(t),B.logEventWithStatsig("New User Legal Banner Shown","chatgpt_new_user_legal_banner_shown",{threadId:t}))},[t,i,o,a,l]),_.useEffect(()=>{!l||!s||!c||i&&jt(i)!==jt(t)||(ot(e,Oe.Onboarding),o())},[e,o,c,l,s,t,i]),s?r.jsx(_n,{onDismiss:()=>{l&&ot(e,Oe.Onboarding),o(),B.logEventWithStatsig("New User Legal Banner Dismissed Clicked","chatgpt_new_user_legal_banner_dismissed")},content:r.jsxs(r.Fragment,{children:[r.jsx(U5,{clientThreadId:t}),r.jsx("br",{}),n.formatMessage(ur.bannerTermsDisclaimer,{learnMoreLink:d=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{B.logEventWithStatsig("New User Legal Banner Learn More Clicked","chatgpt_new_user_legal_banner_learn_more_clicked",{threadId:t})},children:d})})]})}):null}function ISe(t){return ze(t,"109457",{disableExposureLog:!0}).get("is_new_user_banner_disclaimer_enabled",!1)}const a7={logCouponCheck(t,e){Ie.count(je.TEAMS,"promo_campaign.web.check_coupon",[{key:"coupon",value:t},{key:"outcome",value:e}]),B.logEvent("Promo Campaign: Check Coupon",{coupon:t,outcome:e})},logCouponApplied(t){Ie.count(je.TEAMS,"promo_campaign.web.coupon_applied",[{key:"coupon",value:t}]),B.logEvent("Promo Campaign: Coupon Applied",{coupon:t})}},jSe=t=>{var e,n,s,o,a;return U(w({},t),{redeemed_at:(e=t.redeemed_at)!=null?e:null,user_redeemed_at:(n=t.user_redeemed_at)!=null?n:null,workspace_redeemed_at:(s=t.workspace_redeemed_at)!=null?s:null,promotion_length_days:(o=t.promotion_length_days)!=null?o:null,expires_at:(a=t.expires_at)!=null?a:null})},NSe=t=>({coupon:t.coupon,state:t.state,redemption:t.redemption?jSe(t.redemption):null}),PSe=t=>{const e=rt({queryKey:["promoCampaignEligibility",t],queryFn:async()=>{const n=await ge.safeGet("/promo_campaign/check_coupon",{parameters:{query:{coupon:t}},authOption:sn.SendIfAvailable});return NSe(n)},enabled:!!t});return _.useEffect(()=>{e.isSuccess&&e.data?a7.logCouponCheck(t,e.data.state):e.isError&&a7.logCouponCheck(t,"error")},[e.isSuccess,e.isError,e.data,t]),e},uy=25,RSe=uy/100,LSe="team_seats_promo";function wF(t){return t==null||!Number.isFinite(t)?null:Math.ceil(t*RSe)}function JQe(t){const{data:e}=PSe(LSe),n=(e==null?void 0:e.state)==="eligible",s=_.useMemo(()=>wF(t),[t]);return _.useMemo(()=>{const o=e!=null?e:null,a=n&&s!=null?s:null;return{eligible:n,seatThresholdGap:a,promoEligibility:o}},[e,n,s])}function OSe(t){const e=ne(),n=$t();return rt({queryKey:["organization-subscription",t],queryFn:async()=>await ge.safeGet("/subscriptions",{parameters:{query:t}}).catch(s=>(n.danger(e.formatMessage(r7.subscriptionLoadError,{error:s.message}),{toastId:"subscription_data",loggingTitle:r7.subscriptionLoadError.defaultMessage,loggingDescription:"Failed to load subscription"}),null)),enabled:t.account_id!=null||t.organization_id!=null})}function kF(){var o;const t=Sn(),e=t==null?void 0:t.id,n=(o=t==null?void 0:t.data.organizationId)!=null?o:void 0,s=t==null?void 0:t.isEnterprisey();return OSe(s?{organization_id:n}:{account_id:e})}function XQe(t,e,n,s,o=!1){return rt({queryKey:["get-subscription-update-preview",e,s,n],queryFn:async()=>await ge.safeGet("/subscriptions/update/preview",{parameters:{query:{account_id:t,updated_plan:n,updated_seats:e,updated_promo_id:s}}}),enabled:!o})}function eJe(t){const e=It();return qt({mutationFn:async n=>ge.safePost("/subscriptions/cancel",{requestBody:{account_id:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]}),e.invalidateQueries(VW())}})}function tJe(t){const e=It();return qt({mutationFn:async n=>ge.safePost("/subscriptions/renew",{requestBody:{account_id:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}function nJe(t){const e=It();return qt({mutationFn:({accountId:n,updatedPlan:s,updatedSeats:o,updatedPriceInterval:a,updatedPromoId:i,updatedPromoCode:l,updatedPromoCampaign:c})=>ge.safePost("/subscriptions/update",{requestBody:{account_id:n,updated_plan:s,updated_seats:o,updated_price_interval:a,updated_promo_id:i,updated_promo_code:l,updated_promo_campaign:c}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}const r7=Se({subscriptionLoadError:{id:"useSubscriptionData.subscriptionLoadError",defaultMessage:"Failed to load subscription: {error}. Contact support@openai.com if error persists."}}),DSe=R(()=>P(()=>import("./nd9xod27hwpupnsp.js"),__vite__mapDeps([342,1])),{loading:t=>F(t)});function sJe(){const t=V(),e=at(),{data:n}=kF(),s=n==null?void 0:n.seats_entitled,o=_.useMemo(()=>wF(s),[s]);return _.useEffect(()=>{Ie.count(je.TEAMS,"teams.web.teamSeatsPromo.impressionAnnouncementBanner"),B.logEvent("Teams: Show Team Seats Promo Announcement Banner"),B.logUpsellOrModalEvent(dn,{eventId:"team_seats_promo_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),o==null?null:r.jsx(_n,{icon:r.jsx(DSe,{className:"h-6 w-6 text-[#4338CA]","aria-hidden":"true"}),title:r.jsx(j,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.title.withThreshold",defaultMessage:"Add {seatsCount, plural, one {# seat} other {# seats}}, get {discount}% off",values:{discount:uy,seatsCount:o}}),content:r.jsx(j,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.content.withThreshold",defaultMessage:"Invite team members to work with you in ChatGPT and save {discount}% for a month when you add {seatsCount, plural, one {# seat} other {# seats}}.",values:{discount:uy,seatsCount:o}}),primaryCtaColor:"purple",className:"border-[#DDD8FF] bg-[#F2F0FF]",primaryCtaText:r.jsx(j,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.primaryCta",defaultMessage:"Add Seats"}),onPrimaryCtaClick:()=>{Ie.count(je.TEAMS,"teams.web.teamSeatsPromo.clickAnnouncementBannerPrimaryCta"),B.logEvent("Teams: Click Team Seats Promo Announcement Banner"),ot(t,Oe.hasSeenTeamSeatsPromoAnnouncement),e("/admin/billing")},onDismiss:()=>{Ie.count(je.TEAMS,"teams.web.teamSeatsPromo.dismissAnnouncementBanner"),B.logEvent("Teams: Close Team Seats Promo Announcement Banner"),ot(t,Oe.hasSeenTeamSeatsPromoAnnouncement)}})}function FSe(t){return ve(t,"878458344")}const oJe=t=>{const e=V(),n=FSe(e),{eligible:s}=lt(Oe.hasSeenTeamsContextualAnswersUpsell),o=ln(),a=o!=null&&QT(o),l=!!Ve(t,d=>he.findNode(d,u=>u.message.author.role===Ke.Tool&&u.message.author.name===Nn.MYFILES_BROWSER));return n&&s&&a&&l};function aJe(){const t=V(),e=at();return _.useEffect(()=>{Ie.count(je.TEAMS,"teams.web.caUpsell.impressionAnnouncementBanner"),B.logEvent("Teams: Show CA Upsell Announcement Banner"),B.logUpsellOrModalEvent(dn,{eventId:"teams_contextual_upsell_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_n,{title:r.jsx(j,{id:"components.pricing.teams.contextualUpsellAnnouncement.title",defaultMessage:"Connect to Google Drive directly with the Business plan"}),content:r.jsx(j,{id:"components.pricing.teams.contextualUpsellAnnouncement.content",defaultMessage:"Summarize, analyze, and get smarter answers from your teams docs."}),primaryCtaText:r.jsx(j,{id:"components.pricing.teams.contextualUpsellAnnouncement.primaryCtaText",defaultMessage:"Get Business"}),onPrimaryCtaClick:()=>{Ie.count(je.TEAMS,"teams.web.caUpsell.clickAnnouncementBannerPrimaryCta"),B.logEvent("Teams: Click CA Upsell Announcement Banner"),ot(t,Oe.hasSeenTeamsContextualAnswersUpsell),e({hash:Zf,search:window.location.search},{state:{[d1]:"CA upsell announcement banner"}})},onDismiss:()=>{Ie.count(je.TEAMS,"teams.web.caUpsell.dismissAnnouncementBanner"),B.logEvent("Teams: Close CA Upsell Announcement Banner"),ot(t,Oe.hasSeenTeamsContextualAnswersUpsell)}})}const i7=Oe.hasSeenAgentModeAnnouncementBanner,rJe=t=>ve(t,"785520609");function iJe(){const t=V(),e=$s();return _.useEffect(()=>{B.logUpsellOrModalEvent(dn,{eventId:"agent_mode_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_n,{title:r.jsx(j,{id:"VjCFGa",defaultMessage:"ChatGPT can now do more work for you"}),content:r.jsx(j,{id:"idZZDZ",defaultMessage:"Agent mode can do even more complex tasks, like spreadsheets, research, and reservations, all on its own."}),primaryCtaText:r.jsx(j,{id:"xT8iIw",defaultMessage:"Try agent mode"}),onPrimaryCtaClick:()=>{ot(t,i7),e(hs)},onDismiss:()=>{ot(t,i7)}})}function lJe({onDismissSideEffect:t,onPrimaryCtaClickSideEffect:e}){var u;const n=ne(),s=V(),o=at(),a=Rn(s),{locale:i,usedDefault:l}=EF((u=a.cfIpCity)!=null?u:""),c=n.formatMessage($Se[i]),d=n.formatMessage({id:"language-upsell-banner.query",defaultMessage:"Talk to me in {language}"},{language:c});return _.useEffect(()=>{B.logEventWithStatsig("Language Upsell Banner Shown","chatgpt_web_language_upsell_banner_shown",{inferred_locale:i,used_default:l})},[i,l]),r.jsx(_n,{title:n.formatMessage({id:"language-upsell-banner.title",defaultMessage:"{hello} Want to chat in {language}?"},{hello:USe[i],language:c}),content:l?n.formatMessage({id:"language-upsell-banner.content.default",defaultMessage:"ChatGPT speaks many languages. Give it a try, just by typing."}):n.formatMessage({id:"language-upsell-banner.content.language",defaultMessage:"ChatGPT speaks your local language  give it a try, just by typing."}),primaryCtaText:n.formatMessage({id:"language-upsell-banner.primary-cta",defaultMessage:"Try it"}),onPrimaryCtaClick:()=>{e(),o("/?q=".concat(encodeURIComponent(d)))},onDismiss:t})}const BSe=on(()=>Tf(Ue.HasManuallyClosedLanguageUpsellBanner,()=>!1,{coerceStoredValue:Du}));function cJe(t){var c,d;const e=V(),n=Ve(t,(c=he.getIsNewConversation)!=null?c:(()=>!1)),s=Rn(e),{country:o}=bd(e),a=ze(e,"723297404"),i=s.locale,{locale:l}=EF((d=s.cfIpCity)!=null?d:"");return re(()=>n&&(o==null?void 0:o.toUpperCase())==="IN"&&i!==l&&a.get("show_india_language_upsell_banner",!1)&&!BSe(e))}function EF(t){return t in l7?{locale:l7[t],usedDefault:!1}:{locale:"hi-IN",usedDefault:!0}}const l7={Bengaluru:"kn-IN",Mumbai:"mr-IN",Hyderabad:"te-IN",Chennai:"ta-IN",Pune:"mr-IN","New Delhi":"hi-IN",Delhi:"hi-IN",Kolkata:"bn-BD",Ahmedabad:"gu-IN",Kochi:"ml",Jaipur:"hi-IN",Lucknow:"hi-IN",Indore:"hi-IN",Patna:"hi-IN",Guwahati:"as",Coimbatore:"ta-IN",Chandigarh:"pa",Bhopal:"hi-IN",Surat:"gu-IN",Bhubaneswar:"or",Gurugram:"hi-IN",Nagpur:"mr-IN",Noida:"hi-IN",Ludhiana:"pa",Dehradun:"hi-IN",Thrissur:"ml",Agra:"hi-IN",Visakhapatnam:"te-IN",Vadodara:"gu-IN",Thiruvananthapuram:"ml",Mangalore:"kn-IN",Ranchi:"hi-IN",Ghaziabad:"hi-IN",Kanpur:"hi-IN",Vijayawada:"te-IN",Madurai:"ta-IN",Varanasi:"hi-IN",Srinagar:"hi-IN",Salem:"ta-IN",Faridabad:"hi-IN",Jodhpur:"hi-IN",Raipur:"hi-IN",Jammu:"hi-IN",Sopur:"hi-IN",Nashik:"mr-IN","Navi Mumbai":"mr-IN",Rajkot:"gu-IN",Prayagraj:"hi-IN",Meerut:"hi-IN",Thane:"mr-IN",Kozhikode:"ml",Jabalpur:"hi-IN"},USe={"kn-IN":"!","mr-IN":"!","te-IN":"!","ta-IN":"!","hi-IN":"!","bn-BD":"!","gu-IN":"!",ml:"!",as:"!",pa:"  !",or:"!"},$Se=Se({"kn-IN":{id:"language-upsell-banner.locale.kn",defaultMessage:"Kannada"},"mr-IN":{id:"language-upsell-banner.locale.mr",defaultMessage:"Marathi"},"te-IN":{id:"language-upsell-banner.locale.te",defaultMessage:"Telugu"},"ta-IN":{id:"language-upsell-banner.locale.ta",defaultMessage:"Tamil"},"hi-IN":{id:"language-upsell-banner.locale.hi",defaultMessage:"Hindi"},"bn-BD":{id:"language-upsell-banner.locale.bn",defaultMessage:"Bengali"},"gu-IN":{id:"language-upsell-banner.locale.gu",defaultMessage:"Gujarati"},ml:{id:"language-upsell-banner.locale.ml",defaultMessage:"Malayalam"},as:{id:"language-upsell-banner.locale.as",defaultMessage:"Assamese"},pa:{id:"language-upsell-banner.locale.pa",defaultMessage:"Punjabi"},or:{id:"language-upsell-banner.locale.or",defaultMessage:"Odia"}});function dJe(t){const e=V();return re(()=>b3(e,yn(xt(e,t)).id))}function uJe(t){return null}const VSe=1;function TF(){const[t,e]=ki(Ue.LastSeenNoAuthTrialsBannerAt,null,o=>o!=null&&typeof o=="number"),n=t==null||ya(Date.now(),Ei(t))>=VSe;return{markBannerSeen:()=>{e(ka(new Date)),localStorage.setItem(Ue.LastSeenNoAuthTrialsBannerAt,JSON.stringify(ka(new Date)))},canBeSeen:n}}function fJe(){const t=V(),e=!tt(t),{canBeSeen:n}=TF();return e&&n&&ze(t,"1074962980").get("is_plus_1_month_free_enabled",!1)}function mJe(){const t=at(),{markBannerSeen:e}=TF();return _.useEffect(()=>{B.logEventWithStatsig("No Auth Trials Banner Shown","chatgpt_no_auth_trials_banner_shown"),B.logUpsellOrModalEvent(dn,{eventId:"no_auth_trials_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_n,{icon:r.jsx("img",{src:"https://openaiassets.blob.core.windows.net/$web/chatgpt/filled-plus-icon.png",alt:"",style:{width:24,height:24}}),onPrimaryCtaClick:()=>{B.logEventWithStatsig("No Auth Trials Banner Try Plus free Button Clicked","chatgpt_no_auth_trials_banner_try_plus_free_button_clicked"),sessionStorage.setItem("poijcwa","jwoid"),pn(t,"No auth trials banner",void 0,void 0,u1),e()},primaryCtaText:r.jsx(j,w({},gt.tryPlusTrial)),onDismiss:()=>{B.logEventWithStatsig("No Auth Trials Banner Dismissed","chatgpt_no_auth_trials_banner_dismissed"),e()},title:r.jsx(j,w({},c7.noAuthTrialUpsellTitle)),content:r.jsx(j,w({},c7.noAuthTrialUpsellDescription))})}const c7=Se({noAuthTrialUpsellTitle:{id:"sSjBA2",defaultMessage:"Get better, faster responses for free"},noAuthTrialUpsellDescription:{id:"4yEtmJ",defaultMessage:"Upgrade to ChatGPT Plus. Your first 30 days are on us."}}),d7=Oe.DesktopOperatorAnnouncement;function gJe(){const t=V();_.useEffect(()=>{B.logEventWithStatsig("Operator Announcement Banner Shown","chatgpt_operator_announcement_banner_shown"),B.logUpsellOrModalEvent(dn,{eventId:"operator_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]);const e=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(j,{id:"/bPUPL",defaultMessage:"Delegate daily tasks with Operator"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"ODMLVJ",defaultMessage:"With the Pro plan, you can try the Operator research preview  an agent that browses the web to handle tasks for you."})})]});return r.jsx(_n,{onPrimaryCtaClick:()=>{ot(t,d7),B.logEventWithStatsig("Operator Announcement Banner Try Operator Button Clicked","chatgpt_operator_announcement_banner_try_operator_button_clicked"),window.open("".concat(HW,"?utm_source=chatgpt"),"_blank")},primaryCtaText:r.jsx(j,{id:"eDZIyV",defaultMessage:"Try Operator"}),onDismiss:()=>{ot(t,d7),B.logEventWithStatsig("Operator Announcement Banner Dismissed","chatgpt_operator_announcement_banner_dismissed")},content:e})}function pJe(t){return ve(t,"2429530106")}const $5=Hn(()=>{const t=Be("loading");return{auraAnnouncementBannerState$:t,setAuraAnnouncementBannerState:n=>{t.set(n)}}});function HSe(){const t=localStorage.getItem(Ue.AuraAnnouncementBannerImpressions),e=t?parseInt(t):null;e==null||isNaN(e)?localStorage.setItem(Ue.AuraAnnouncementBannerImpressions,JSON.stringify(1)):localStorage.setItem(Ue.AuraAnnouncementBannerImpressions,JSON.stringify(e+1)),localStorage.setItem(Ue.LastSeenAuraAnnouncementBannerAt,JSON.stringify(ka(new Date))),localStorage.getItem(Ue.FirstSeenAuraAnnouncementBannerAt)==null&&localStorage.setItem(Ue.FirstSeenAuraAnnouncementBannerAt,JSON.stringify(ka(new Date)))}function GSe(t){const e=localStorage.getItem(Ue.FirstSeenAuraAnnouncementBannerAt);if(!e)return!1;const n=parseInt(e);if(isNaN(n))return!1;const s=Ei(n);return ya(new Date,s)>t}function WSe(t){const e=localStorage.getItem(Ue.AuraAnnouncementBannerImpressions);if(!e)return!1;const n=parseInt(e);return isNaN(n)?!1:n>=t}function hJe(t){const e=rs(t,"619645130"),n=e.get("max_days_visible",-1);if(n>=0&&GSe(n))return!0;const s=e.get("max_impressions",-1);if(s>=0&&WSe(s))return!0;if(e.get("limit_one_impression_per_day",!1)){const a=localStorage.getItem(Ue.LastSeenAuraAnnouncementBannerAt),i=a?parseInt(a):null;if(i!=null&&!isNaN(i)){const l=Ei(i);if(ya(new Date,l)<1)return!0}}return!1}function _Je(){return localStorage.getItem(Ue.HasDismissedAuraAnnouncementBanner)!=null}function MF(){localStorage.setItem(Ue.HasDismissedAuraAnnouncementBanner,"true")}const zSe=R(()=>P(()=>Promise.resolve().then(()=>w4),void 0),{loading:t=>F(t)});function AF(){"use forget";const t=W.c(5),e=V(),{eligible:n}=lt(Oe.hasSeenPlusFreeTrialHomepageAnnouncementBanner);let s;t[0]!==e?(s=()=>ot(e,Oe.hasSeenPlusFreeTrialHomepageAnnouncementBanner),t[0]=e,t[1]=s):s=t[1];const o=s;let a;return t[2]!==n||t[3]!==o?(a={markAsViewed:o,eligible:n},t[2]=n,t[3]=o,t[4]=a):a=t[4],a}const IF="2850117686",qSe="is-plus-free-trial-homepage-announcement-banner-enabled",YSe="hide_thread_header_upgrade_pill_button",V5=Be(!1);function ZSe(){"use forget";return re(KSe)}function KSe(){return V5()}function xJe(t){"use forget";const e=W.c(4),{clientThreadId:n}=t,s=V();let o;e[0]!==s?(o=$5(s),e[0]=s,e[1]=o):o=e[1];const{auraAnnouncementBannerState$:a}=o,l=re(a)!=="not-shown",c=Rj();let d;e[2]!==n?(d=br(n),e[2]=n,e[3]=d):d=e[3];const u=d,f=Ve(n,he.hasUserMessage),m=u&&!f,{eligible:g}=AF();return!l&&g&&c&&m}function yJe(t){const n=ze(t,IF).get(qSe,!1),s=db(t);return n&&!s}function QSe(t){"use forget";const e=W.c(7),{onPrimaryCtaClick:n,onDismiss:s}=t;let o,a,i,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(zSe,{className:"text-[#5D5BD0] dark:text-[#DCDBF6]","aria-hidden":!0}),a=r.jsx(j,{id:"components.promptTextarea.plusFreeTrialAnnouncement.title",defaultMessage:"Get better, faster responses for free"}),i=r.jsx(j,{id:"components.promptTextarea.plusFreeTrialAnnouncement.content",defaultMessage:"Upgrade to ChatGPT Plus. Your first 30 days are on us."}),l=r.jsx(j,{id:"components.promptTextarea.plusFreeTrialAnnouncement.primaryCta",defaultMessage:"Try Plus for free"}),e[0]=o,e[1]=a,e[2]=i,e[3]=l):(o=e[0],a=e[1],i=e[2],l=e[3]);let c;return e[4]!==s||e[5]!==n?(c=r.jsx(_n,{icon:o,title:a,content:i,primaryCtaText:l,primaryCtaClassName:"px-5 text-sm font-semibold",primaryCtaColor:"primary",onPrimaryCtaClick:n,onDismiss:s,isElevated:!1}),e[4]=s,e[5]=n,e[6]=c):c=e[6],c}function vJe(){"use forget";const t=W.c(9),{markAsViewed:e}=AF(),n=at();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],t[0]=s):s=t[0],_.useEffect(JSe,s);let o;t[1]!==e||t[2]!==n?(o=()=>{B.logEventWithStatsig("Plus Free Trial Homepage Announcement Banner CTA Clicked","chatgpt_plus_free_trial_homepage_announcement_banner_cta_clicked"),e(),pn(n,"Plus Free Trial Homepage Announcement Banner",void 0,void 0,u1)},t[1]=e,t[2]=n,t[3]=o):o=t[3];const a=o;let i;t[4]!==e?(i=()=>{B.logEventWithStatsig("Plus Free Trial Homepage Announcement Banner Dismissed","chatgpt_plus_free_trial_homepage_announcement_banner_dismissed"),e()},t[4]=e,t[5]=i):i=t[5];const l=i;let c;return t[6]!==l||t[7]!==a?(c=r.jsx(QSe,{onPrimaryCtaClick:a,onDismiss:l}),t[6]=l,t[7]=a,t[8]=c):c=t[8],c}function JSe(){return B.logEventWithStatsig("Plus Free Trial Homepage Announcement Banner Shown","chatgpt_plus_free_trial_homepage_announcement_banner_shown"),B.logUpsellOrModalEvent(dn,{eventId:"plus_free_trial_homepage_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER}),V5.set(!0),XSe}function XSe(){V5.set(!1)}const ewe=20,twe=7;function bJe(){const t=at(),e=V();return _.useEffect(()=>{B.logEventWithStatsig("Plus Upsell Banner Shown","chatgpt_plus_upsell_banner_shown"),B.logUpsellOrModalEvent(dn,{eventId:"plus_upsell_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_n,{onPrimaryCtaClick:()=>{B.logEventWithStatsig("Plus Upsell Banner Get Plus Button Clicked","chatgpt_plus_upsell_banner_get_plus_button_clicked"),pn(t,"Plus upsell banner"),u7()},primaryCtaText:r.jsx(j,w({},Kf(e))),onDismiss:()=>{B.logEventWithStatsig("Plus Upsell Banner Dismissed","chatgpt_plus_upsell_banner_dismissed"),u7()},title:r.jsx(j,{id:"CEHXxQ",defaultMessage:"Unlock more with Plus"}),content:r.jsx(j,{id:"s+Afdr",defaultMessage:"ChatGPT Plus gives you higher limits, smarter models, and Sora for video."})})}const jF=Ft(Mn(()=>({lastSeenPlusUpsellBannerAt:nwe()})));function u7(){const t=new Date;jF.setState(e=>{e.lastSeenPlusUpsellBannerAt=t}),localStorage.setItem(Ue.LastSeenPlusUpsellBannerAt,String(ka(new Date)))}function nwe(){const t=localStorage.getItem(Ue.LastSeenPlusUpsellBannerAt);return t?Ei(Number(t)):null}function CJe(){const t=zh(yZ),e=jF(i=>i.lastSeenPlusUpsellBannerAt),n=Sn(),s=!!(n!=null&&n.isFree()&&(n!=null&&n.features.includes("plus_upsell"))),o=t>=ewe,a=e==null||ya(Date.now(),e)>=twe;return s&&o&&a}const NF=({intl:t,conversation:e,systemHint:n})=>{var d,u,f,m;const s=n.systemHint,o=mt(e.id),a=he.getParentPromptNode(o);if(!a)return;const i=(d=n==null?void 0:n.actionLabel)!=null?d:n==null?void 0:n.name;Ie.count(je.ECOSYSTEM,"suggestion_hint_followup_turn_triggered"),B.logEventWithStatsig("Ecosystem app: Suggestion hint followup turn triggered","chatgpt_web_ecosystem_suggestion_hint_followup_turn_triggered",w({system_hint:s},i?{system_hint_label:i}:{}));const l=[...(f=(u=a.message.metadata)==null?void 0:u.system_hints)!=null?f:[],s],c=is(a.message.content,U(w({},a.message.metadata),{system_hints:l,is_visually_hidden_from_conversation:!0,triggered_by_system_hint_suggestion:!0,targeted_reply_label:i?t.formatMessage(f7.usedSystemHint,{systemHint:i}):t.formatMessage(f7.usedSystemHintGeneric)}));a&&Zo({promptMessage:c,completionMetadata:{systemHints:l,conversationMode:(m=o==null?void 0:o.mode)!=null?m:{kind:wt.PrimaryAssistant}},eventSource:"mouse",conversation:e}),s&&sf(s,of.SuggestionAccept,Tn({clientThreadId:e.id}))},f7=Se({usedSystemHint:{id:"pwHqiX",defaultMessage:"Used {systemHint}"},usedSystemHintGeneric:{id:"wbs4BT",defaultMessage:"Used tool"}}),swe=R(()=>P(()=>Promise.resolve().then(()=>J5),void 0),{loading:t=>F(t)});function owe({clientThreadId:t,systemHint:e,label:n,iconSvgString:s,onClick:o,onDismiss:a,onMouseEnter:i,onMouseLeave:l}){"use no forget";const c=Kn(t);return _.useEffect(()=>{e&&sf(e,of.SuggestionTrigger,Tn({clientThreadId:c}))},[]),n?r.jsxs("button",{type:"button",className:"hover:bg-token-bg-tertiary dark:hover:bg-token-bg-tertiary dark:bg-token-bg-secondary border-token-border-default bg-token-bg-primary text-token-text-primary focus-visible:ring-token-text-tertiary mx-auto mb-1 flex h-9 items-center gap-2.5 rounded-full border py-1 ps-2.5 pe-3 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden",onClick:o,onMouseEnter:i,onMouseLeave:l,children:[s?r.jsx("span",{className:"h-4.5 w-4.5 shrink-0",children:r.jsx(Ju,{svgString:s,className:"h-full w-full"})}):null,r.jsx("span",{className:"truncate text-sm",children:n}),a?r.jsx("span",{className:"-ms-1.5 -me-1.5",children:r.jsx(j,{id:"GYl7YK",defaultMessage:"Dismiss",children:d=>r.jsx(swe,{className:"icon dark:hover:bg-token-bg-tertiary hover:bg-token-bg-secondary translate-y-[0.5px] cursor-pointer rounded-full p-0.5 opacity-30 hover:opacity-100","aria-label":d,strokeWidth:.5,onClick:u=>{u.stopPropagation(),a==null||a(u)}})})}):null]}):null}const m7=.2;function SJe(){"use no forget";const t=V(),{store:e}=Ld(),n=e.useSharedProps(o=>o==null?void 0:o.clientThreadId),s=re(()=>n?ap(xt(t,n)).activeSystemHintSuggestionChips$():[]);return es(t)||!s.length?null:r.jsx("div",{className:"max-xs:flex-col max-xs:gap-0 flex justify-center gap-3",children:s.map(o=>r.jsx(awe,{threadId:n,systemHintSuggestionChip:o},o.systemHint))})}function awe(t){"use forget";var Q;const e=W.c(41),{systemHintSuggestionChip:n,threadId:s}=t,o=ne(),a=V(),i=Ti(),l=_.useRef(null),c=_.useRef(!1),[d,u]=_.useState(!1);let f;e[0]!==a?(f=()=>jT(a),e[0]=a,e[1]=f):f=e[1];const m=re(f);let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{l.current&&(clearTimeout(l.current),l.current=null)},e[2]=g):g=e[2];const p=g;let h,x;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=()=>()=>{p()},x=[p],e[3]=h,e[4]=x):(h=e[3],x=e[4]),_.useEffect(h,x);let v;e[5]!==a||e[6]!==n||e[7]!==s?(v=q=>{q==null||q.preventDefault(),q==null||q.stopPropagation();const Y=n==null?void 0:n.systemHint;if(!s)return;const te=xt(a,s);u(!0),setTimeout(()=>{u(!1),q&&Y?(sf(Y,of.SuggestionReject,Tn({clientThreadId:te.id})),ap(te).removeActiveSystemHintSuggestionChip(n)):ap(te).clearActiveSystemHintSuggestionChips()},m7*1e3),p()},e[5]=a,e[6]=n,e[7]=s,e[8]=v):v=e[8];const y=v;let b;e[9]!==y?(b=()=>{c.current||(p(),l.current=setTimeout(()=>{y()},2e3))},e[9]=y,e[10]=b):b=e[10];const C=b;let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{c.current=!0,p()},e[11]=S):S=e[11];const E=S;let k;e[12]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{c.current=!1},e[12]=k):k=e[12];const T=k;let M;e[13]!==i||e[14]!==C?(M=()=>If(Pt(i).dom,{input:()=>{l.current||C()}}),e[13]=i,e[14]=C,e[15]=M):M=e[15];let A;e[16]!==i||e[17]!==y||e[18]!==C?(A=[i,y,C],e[16]=i,e[17]=y,e[18]=C,e[19]=A):A=e[19],_.useEffect(M,A);let I;e[20]!==n?(I=n!=null?n:{},e[20]=n,e[21]=I):I=e[21];const{actionLabel:N,systemHint:L}=I;let O;e[22]!==L||e[23]!==m.data?(O=(Q=m.data)==null?void 0:Q.find(q=>q.systemHint===L),e[22]=L,e[23]=m.data,e[24]=O):O=e[24];const D=O;let $;e[25]!==a||e[26]!==o||e[27]!==y||e[28]!==D||e[29]!==s?($=()=>{y(),!(!s||!D)&&(Ie.count(je.ECOSYSTEM,"suggestion_hint_clicked"),B.logEventWithStatsig("Ecosystem app: Suggestion hint clicked","chatgpt_web_ecosystem_suggestion_hint_clicked",w({system_hint:D.systemHint},D.actionLabel?{system_hint_label:D.actionLabel}:{})),NF({intl:o,conversation:xt(a,s),systemHint:D}))},e[25]=a,e[26]=o,e[27]=y,e[28]=D,e[29]=s,e[30]=$):$=e[30];const H=$;if(!s||!n||!D)return null;let G;e[31]!==N||e[32]!==d||e[33]!==H||e[34]!==y||e[35]!==L||e[36]!==(D==null?void 0:D.logo)||e[37]!==s?(G=!d&&r.jsx(Xe.div,{exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:m7},children:r.jsx(owe,{clientThreadId:s,systemHint:L,label:N,iconSvgString:D==null?void 0:D.logo,onClick:H,onDismiss:y,onMouseEnter:E,onMouseLeave:T})},"system-hint-suggestion-banner"),e[31]=N,e[32]=d,e[33]=H,e[34]=y,e[35]=L,e[36]=D==null?void 0:D.logo,e[37]=s,e[38]=G):G=e[38];let Z;return e[39]!==G?(Z=r.jsx(fn,{children:G}),e[39]=G,e[40]=Z):Z=e[40],Z}const rwe=({className:t,children:e})=>r.jsx(Xe.div,{className:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.1,delay:0}},transition:{type:"tween",duration:.3,delay:.2},children:e}),iwe=R(()=>P(()=>import("./hthps8s6hg6mj1wr.js"),__vite__mapDeps([343,1])),{loading:t=>F(t)});function wJe(t){"use forget";const e=W.c(6),{canContinue:n,onContinueGenerating:s}=t;let o;e[0]!==s?(o=c=>{s(c),jv()},e[0]=s,e[1]=o):o=e[1];const a=o;let i=null;if(n){let c;e[2]!==a?(c=r.jsx(cwe,{onHandleContinueGenerating:a}),e[2]=a,e[3]=c):c=e[3],i=c}if(!i)return i;let l;return e[4]!==i?(l=r.jsx("div",{className:"flex h-full w-full items-center justify-end gap-0 py-4 md:gap-2",children:i}),e[4]=i,e[5]=l):l=e[5],l}function lwe({className:t}){return r.jsx(iwe,{className:z("-rotate-180",t)})}const cwe=t=>{"use forget";const e=W.c(3),{onHandleContinueGenerating:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(j,w({},Oo.continueGenerating)),e[0]=s):s=e[0];let o;return e[1]!==n?(o=r.jsx(rwe,{children:r.jsx(ye,{as:"button",color:"secondary",onClick:n,className:"py-2 whitespace-nowrap",icon:lwe,size:"small",children:s})}),e[1]=n,e[2]=o):o=e[2],o};function dwe(t){"use forget";const e=W.c(49),{onThennableClick:n,text:s}=t,o=ne();let a;e[0]!==o||e[1]!==s?(a=typeof s=="string"?s:o.formatMessage(s),e[0]=o,e[1]=s,e[2]=a):a=e[2];const i=a;let l;e[3]!==o?(l=o.formatMessage(gg.copy),e[3]=o,e[4]=l):l=e[4];const c=l;let d;e[5]!==o?(d=o.formatMessage(gg.copied),e[5]=o,e[6]=d):d=e[6];const u=d,[f,m]=_.useState(!1),g=_.useRef(null),p=_.useRef(null),[h,x]=_.useState();let v;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{var X,ee,ie,de;const ae=(ee=(X=g.current)==null?void 0:X.offsetWidth)!=null?ee:0,se=(de=(ie=p.current)==null?void 0:ie.offsetWidth)!=null?de:0,ce=Math.max(ae,se);x(ce===0?void 0:ce)},e[7]=v):v=e[7];let y;e[8]!==u||e[9]!==c?(y=[c,u],e[8]=u,e[9]=c,e[10]=y):y=e[10],Jn(v,y);let b,C;e[11]!==f?(b=()=>{if(!f)return;const ae=window.setTimeout(()=>{m(!1)},5e3);return()=>{window.clearTimeout(ae)}},C=[f],e[11]=f,e[12]=b,e[13]=C):(b=e[12],C=e[13]),_.useEffect(b,C);let S;e[14]!==n?(S=()=>{n().then(()=>{m(!0)})},e[14]=n,e[15]=S):S=e[15];const E=S;let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k=z("flex w-fit flex-row gap-1 text-center"),e[16]=k):k=e[16];let T;e[17]!==i?(T=r.jsx("code",{className:"max-w-[50vw] truncate sm:max-w-[300px] md:max-w-[200px] lg:max-w-[300px]",children:i}),e[17]=i,e[18]=T):T=e[18];let M;e[19]!==E||e[20]!==T?(M=r.jsx(ye,{color:"secondary",className:"w-fit max-w-[40vw] rounded-3xl border px-3 py-2 sm:max-w-[300px]",onClick:E,contentWrapperClassName:"flex justify-between! md:justify-center! w-full",children:T}),e[19]=E,e[20]=T,e[21]=M):M=e[21];const A=f?"primary-inverse":"primary";let I;e[22]!==h?(I=typeof h=="number"?{width:h}:void 0,e[22]=h,e[23]=I):I=e[23];let N;e[24]!==c?(N=r.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:r.jsx("span",{ref:g,children:c})}),e[24]=c,e[25]=N):N=e[25];let L;e[26]!==u?(L=r.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:r.jsx("span",{ref:p,children:u})}),e[26]=u,e[27]=L):L=e[27];const O=f?"copied":"copy";let D,$,H,G;e[28]===Symbol.for("react.memo_cache_sentinel")?(D={opacity:0,y:4},$={opacity:1,y:0},H={opacity:0,y:-4},G={duration:.2,ease:"easeInOut"},e[28]=D,e[29]=$,e[30]=H,e[31]=G):(D=e[28],$=e[29],H=e[30],G=e[31]);let Z;e[32]!==f?(Z=f?r.jsx(j,w({},gg.copied)):r.jsx(j,w({},gg.copy)),e[32]=f,e[33]=Z):Z=e[33];let Q;e[34]!==O||e[35]!==Z?(Q=r.jsx(fn,{mode:"wait",initial:!1,children:r.jsx(Xe.span,{initial:D,animate:$,exit:H,transition:G,className:"inline-flex whitespace-nowrap",children:Z},O)}),e[34]=O,e[35]=Z,e[36]=Q):Q=e[36];let q;e[37]!==I||e[38]!==N||e[39]!==L||e[40]!==Q?(q=r.jsxs("span",{className:"relative inline-flex justify-center",style:I,children:[N,L,Q]}),e[37]=I,e[38]=N,e[39]=L,e[40]=Q,e[41]=q):q=e[41];let Y;e[42]!==E||e[43]!==A||e[44]!==q?(Y=r.jsx(ye,{color:A,className:"w-fit px-4 py-2 transition-all duration-200 ease-in-out",onClick:E,contentWrapperClassName:"flex justify-between! lg:justify-center! w-fit min-w-[40px] text-center",children:q}),e[42]=E,e[43]=A,e[44]=q,e[45]=Y):Y=e[45];let te;return e[46]!==M||e[47]!==Y?(te=r.jsxs("div",{className:k,children:[M,Y]}),e[46]=M,e[47]=Y,e[48]=te):te=e[48],te}const gg=Se({copy:{id:"beacon-banner-copy-to-clipboard.copy",defaultMessage:"Copy"},copied:{id:"beacon-banner-copy-to-clipboard.copied",defaultMessage:"Copied"}});function uwe(t){"use forget";const e=W.c(8),{beaconInfo:n,copyBeaconAction:s,onDismiss:o}=t,{title:a,description:i}=n.ui_info;let l;e[0]!==s.onThennableClick||e[1]!==s.text?(l=r.jsx(dwe,{onThennableClick:s.onThennableClick,text:s.text}),e[0]=s.onThennableClick,e[1]=s.text,e[2]=l):l=e[2];let c;return e[3]!==i||e[4]!==o||e[5]!==l||e[6]!==a?(c=r.jsx(_n,{title:a,content:i,onDismiss:o,customCtas:l,contentClassName:"gap-1!"}),e[3]=i,e[4]=o,e[5]=l,e[6]=a,e[7]=c):c=e[7],c}const fwe=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)}),mwe=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>F(t)}),gwe={banner:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full items-center justify-between gap-2 rounded-4xl! bg-[rgba(13,13,13,0.90)]! px-4 py-2 dark:bg-[rgba(255,255,255,0.90)]!",triggerTextClassName:"truncate font-medium text-white dark:text-[#0D0D0D]",chevronClassName:"icon-sm shrink-0 text-white dark:text-[#0D0D0D]",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-[256px] max-w-[80vw] min-w-[220px] overflow-hidden rounded-2xl border p-1.5 shadow-lg",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1",itemClassName:"m-0 py-1.5 ps-2.5 pe-0 [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"h-6 w-6 dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-sm font-medium",footerPlacement:"inline",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",showLinkIcon:!1},modal:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full h-11.5 items-center justify-between! gap-3 rounded-2xl! border-token-border-default! bg-token-bg-elevated-primary px-4 py-3 text-start dark:border-token-border-muted dark:bg-token-bg-elevated-secondary",triggerTextClassName:"truncate font-normal font-[14px] text-token-text-tertiary",chevronClassName:"icon-lg shrink-0 text-token-text-secondary",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-full overflow-hidden rounded-2xl border p-1.5 shadow-xl w-[416px] sm:max-w-[416px]",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1 px-1",itemClassName:"m-0 pe-2.5 py-1.5 ps-1.5 dark:ps-2.5 [&>div]:w-fit [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"flex h-6 w-6 items-center justify-center rounded-full dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-base font-semibold",footerPlacement:"below",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",footerBelowClassName:"text-token-text-tertiary leading-4.5 text-center text-[13px]",showLinkIcon:!0}};function pwe(t){"use forget";const e=W.c(6),{dropdownAction:n,formatAction:s}=t;let o;e:{if(!n){let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0],o=i;break e}let a;if(e[1]!==n.action_v2.items||e[2]!==s){let i;e[4]!==s?(i=l=>{const c=s(l);return c?{id:l.id,text:l.text,iconUrl:l.icon_url,action:c}:null},e[4]=s,e[5]=i):i=e[5],a=n.action_v2.items.map(i).filter(hwe),e[1]=n.action_v2.items,e[2]=s,e[3]=a}else a=e[3];o=a}return o}function hwe(t){return t!=null}function _we(t){"use forget";const e=W.c(11),{iconUrl:n,label:s,className:o,fallbackTextClassName:a}=t;let i;e[0]!==s?(i=s.trim().slice(0,1).toUpperCase(),e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]!==o?(c=z("flex items-center justify-center rounded-full",o),e[2]=o,e[3]=c):c=e[3];let d;e[4]!==l||e[5]!==a||e[6]!==n?(d=n?r.jsx("img",{src:n,alt:"",className:"h-4 w-4 object-contain",loading:"eager"}):r.jsx("span",{className:a,children:l}),e[4]=l,e[5]=a,e[6]=n,e[7]=d):d=e[7];let u;return e[8]!==c||e[9]!==d?(u=r.jsx("div",{className:c,"aria-hidden":"true",children:d}),e[8]=c,e[9]=d,e[10]=u):u=e[10],u}function xwe({item:t,beaconInfo:e,beaconClickEventMutation:n,variant:s,onClose:o}){var a,i,l;B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:e.beacon_id,beacon_name:(a=e.beacon_name)!=null?a:"unknown",beacon_type:s,action_id:t.id}),n.mutate({beaconId:e.beacon_id,eventCtaId:t.id}),"onThennableClick"in t.action&&t.action.onThennableClick?t.action.onThennableClick():(l=(i=t.action).onClick)==null||l.call(i),s==="modal"&&o()}function ywe(t){"use forget";var $;const e=W.c(68),{beaconInfo:n,conversationId:s,dropdownAction:o,dropdownItems:a,variant:i,onClose:l}=t,c=i===void 0?"banner":i,d=ne(),u=V();let f;e[0]!==s||e[1]!==u?(f=()=>xf(s,u),e[0]=s,e[1]=u,e[2]=f):f=e[2];const m=QO(f),g=gwe[c];let p=($=o.action_v2.header_text)!=null?$:void 0;if(p&&typeof p!="string"){let H;e[3]!==d||e[4]!==p?(H=d.formatMessage(p),e[3]=d,e[4]=p,e[5]=H):H=e[5],p=H}let h;e[6]!==m||e[7]!==n||e[8]!==l||e[9]!==c?(h=H=>{xwe({item:H,beaconInfo:n,beaconClickEventMutation:m,variant:c,onClose:l})},e[6]=m,e[7]=n,e[8]=l,e[9]=c,e[10]=h):h=e[10];const x=h;if(a.length===0)return null;const v=g.containerClassName;let y;e[11]!==n||e[12]!==o.action_v2.action_enum||e[13]!==o.id||e[14]!==o.type||e[15]!==c?(y=H=>{var G;H&&B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:n.beacon_id,beacon_name:(G=n.beacon_name)!=null?G:"unknown",beacon_type:c,action_id:o.id,action_type:o.type,action_enum:o.action_v2.action_enum})},e[11]=n,e[12]=o.action_v2.action_enum,e[13]=o.id,e[14]=o.type,e[15]=c,e[16]=y):y=e[16];let b;e[17]!==g.triggerTextClassName||e[18]!==o.text?(b=r.jsx("span",{className:g.triggerTextClassName,children:o.text}),e[17]=g.triggerTextClassName,e[18]=o.text,e[19]=b):b=e[19];let C;e[20]!==g.chevronClassName?(C=r.jsx(mwe,{className:g.chevronClassName}),e[20]=g.chevronClassName,e[21]=C):C=e[21];let S;e[22]!==g.triggerClassName||e[23]!==b||e[24]!==C?(S=r.jsx(K.Trigger,{asChild:!0,children:r.jsxs("button",{type:"button",className:g.triggerClassName,children:[b,C]})}),e[22]=g.triggerClassName,e[23]=b,e[24]=C,e[25]=S):S=e[25];const E=g.contentClassName;let k;e[26]!==g.headerClassName||e[27]!==o.action_v2.header_text||e[28]!==p?(k=o.action_v2.header_text&&p?r.jsx("p",{className:g.headerClassName,children:p}):null,e[26]=g.headerClassName,e[27]=o.action_v2.header_text,e[28]=p,e[29]=k):k=e[29];const T=g.itemsWrapperClassName;let M;if(e[30]!==g.fallbackTextClassName||e[31]!==g.iconClassName||e[32]!==g.itemClassName||e[33]!==g.itemTextClassName||e[34]!==g.showLinkIcon||e[35]!==a||e[36]!==x){let H;e[38]!==g.fallbackTextClassName||e[39]!==g.iconClassName||e[40]!==g.itemClassName||e[41]!==g.itemTextClassName||e[42]!==g.showLinkIcon||e[43]!==x?(H=G=>r.jsx(K.Item,{size:"large",className:g.itemClassName,icon:r.jsx(_we,{iconUrl:G.iconUrl,label:G.text,className:g.iconClassName,fallbackTextClassName:g.fallbackTextClassName}),trailing:g.showLinkIcon?r.jsx(fwe,{className:"text-token-text-primary"}):void 0,onSelect:()=>x(G),children:r.jsx("span",{className:g.itemTextClassName,children:G.text})},G.id),e[38]=g.fallbackTextClassName,e[39]=g.iconClassName,e[40]=g.itemClassName,e[41]=g.itemTextClassName,e[42]=g.showLinkIcon,e[43]=x,e[44]=H):H=e[44],M=a.map(H),e[30]=g.fallbackTextClassName,e[31]=g.iconClassName,e[32]=g.itemClassName,e[33]=g.itemTextClassName,e[34]=g.showLinkIcon,e[35]=a,e[36]=x,e[37]=M}else M=e[37];let A;e[45]!==g.itemsWrapperClassName||e[46]!==M?(A=r.jsx("div",{className:T,children:M}),e[45]=g.itemsWrapperClassName,e[46]=M,e[47]=A):A=e[47];let I;e[48]!==g.footerClassName||e[49]!==o.action_v2.footer_text?(I=o.action_v2.footer_text?r.jsx("p",{className:g.footerClassName,children:o.action_v2.footer_text}):null,e[48]=g.footerClassName,e[49]=o.action_v2.footer_text,e[50]=I):I=e[50];let N;e[51]!==g.contentClassName||e[52]!==k||e[53]!==A||e[54]!==I?(N=r.jsx(K.Portal,{children:r.jsxs(K.Content,{size:"auto",className:E,children:[k,A,I]})}),e[51]=g.contentClassName,e[52]=k,e[53]=A,e[54]=I,e[55]=N):N=e[55];let L;e[56]!==N||e[57]!==y||e[58]!==S?(L=r.jsxs(K.Root,{onOpenChange:y,children:[S,N]}),e[56]=N,e[57]=y,e[58]=S,e[59]=L):L=e[59];let O;e[60]!==g.footerBelowClassName||e[61]!==g.footerPlacement||e[62]!==o.action_v2.footer_text?(O=g.footerPlacement==="below"&&o.action_v2.footer_text?r.jsx("p",{className:g.footerBelowClassName,children:o.action_v2.footer_text}):null,e[60]=g.footerBelowClassName,e[61]=g.footerPlacement,e[62]=o.action_v2.footer_text,e[63]=O):O=e[63];let D;return e[64]!==g.containerClassName||e[65]!==L||e[66]!==O?(D=r.jsxs("div",{className:v,children:[L,O]}),e[64]=g.containerClassName,e[65]=L,e[66]=O,e[67]=D):D=e[67],D}const PF={small:24,medium:36,large:48},vwe="small",bwe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Cwe=t=>t&&bwe(PF,t)?t:vwe,RF=({bannerIconImageUrl:t,bannerIconSize:e,icon:n})=>{if(n)return n;if(!t)return null;const s=PF[Cwe(e)];return r.jsx("img",{src:t,alt:"",style:{width:s,height:s,objectFit:"contain"}})},vf=t=>{"use forget";var M,A;const e=W.c(34),{actions:n,title:s,description:o,onDismiss:a,onInteract:i,primaryButtonColor:l,primaryButtonClassName:c,secondaryButtonColor:d,bannerIconImageUrl:u,bannerIconSize:f,icon:m}=t,g=ne();let p;e[0]!==n||e[1]!==g?(p=(M=n==null?void 0:n.primaryAction)!=null&&M.text?typeof n.primaryAction.text=="string"?n.primaryAction.text:g.formatMessage(n.primaryAction.text):void 0,e[0]=n,e[1]=g,e[2]=p):p=e[2];const h=p;let x;e[3]!==n||e[4]!==g?(x=(A=n==null?void 0:n.secondaryAction)!=null&&A.text?typeof n.secondaryAction.text=="string"?n.secondaryAction.text:g.formatMessage(n.secondaryAction.text):void 0,e[3]=n,e[4]=g,e[5]=x):x=e[5];const v=x,y=n==null?void 0:n.customActions;let b;e[6]!==u||e[7]!==f||e[8]!==m?(b=RF({icon:m,bannerIconImageUrl:u,bannerIconSize:f}),e[6]=u,e[7]=f,e[8]=m,e[9]=b):b=e[9];let C;e[10]!==o?(C=o?r.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):null,e[10]=o,e[11]=C):C=e[11];let S;e[12]!==a||e[13]!==i?(S=a?()=>{i==null||i(),a==null||a()}:void 0,e[12]=a,e[13]=i,e[14]=S):S=e[14];let E;e[15]!==(n==null?void 0:n.primaryAction)||e[16]!==i?(E=()=>{var I,N;i==null||i(),(N=(I=n==null?void 0:n.primaryAction)==null?void 0:I.onClick)==null||N.call(I)},e[15]=n==null?void 0:n.primaryAction,e[16]=i,e[17]=E):E=e[17];let k;e[18]!==(n==null?void 0:n.secondaryAction)||e[19]!==i?(k=()=>{var I,N;i==null||i(),(N=(I=n==null?void 0:n.secondaryAction)==null?void 0:I.onClick)==null||N.call(I)},e[18]=n==null?void 0:n.secondaryAction,e[19]=i,e[20]=k):k=e[20];let T;return e[21]!==y||e[22]!==c||e[23]!==l||e[24]!==h||e[25]!==d||e[26]!==v||e[27]!==b||e[28]!==C||e[29]!==S||e[30]!==E||e[31]!==k||e[32]!==s?(T=r.jsx(_n,{icon:b,title:s,content:C,onDismiss:S,customCtas:y,primaryCtaText:h,primaryCtaColor:l,primaryCtaClassName:c,onPrimaryCtaClick:E,secondaryCtaText:v,secondaryCtaColor:d,onSecondaryCtaClick:k,isElevated:!0}),e[21]=y,e[22]=c,e[23]=l,e[24]=h,e[25]=d,e[26]=v,e[27]=b,e[28]=C,e[29]=S,e[30]=E,e[31]=k,e[32]=s,e[33]=T):T=e[33],T};function Swe({beaconInfo:t,conversationId:e,dropdownAction:n,formatAction:s,onDismiss:o}){"use no forget";const{title:a,description:i,icon_image_url:l,icon_image_size:c}=t.ui_info,d=pwe({dropdownAction:n,formatAction:s});if(d.length===0)return r.jsx(vf,{bannerIconImageUrl:l,bannerIconSize:c,onDismiss:o,title:a,description:i});const u=r.jsx(ywe,{beaconInfo:t,conversationId:e,dropdownAction:n,dropdownItems:d,variant:"banner",onClose:()=>{}});return r.jsx(vf,{bannerIconImageUrl:l,bannerIconSize:c,onDismiss:o,title:a,description:i,actions:{customActions:u}})}const wwe=R(()=>P(()=>import("./e4acz4nn4eec76vm.js"),__vite__mapDeps([344,1,10,11,345,346,347,348,317,0,349,350])).then(t=>t.CreatePromptModal)),kwe=R(()=>P(()=>import("./nbrjep5yk15f1ntt.js"),__vite__mapDeps([351,1,10,11,352])).then(t=>t.ConnectorsOnboardingModal));function Ewe(t){"use forget";const e=W.c(27),{clientThreadId:n,location:s,composerController:o,persistedSystemHintsStore:a,openFileDialog:i,beaconInfo:l}=t,c=V(),d=Sn();let u;e[0]!==c?(u=tt(c),e[0]=c,e[1]=u):u=e[1];const f=!u,m=at(),g=Kn(n);let p;e[2]!==n?(p={clientThreadId:n},e[2]=n,e[3]=p):p=e[3];const h=hb(p);let x;e[4]!==n||e[5]!==c?(x=()=>xf(n,c),e[4]=n,e[5]=c,e[6]=x):x=e[6];const{mutate:v}=QO(x);let y;e[7]!==c?(y=()=>Mo(c),e[7]=c,e[8]=y):y=e[8];const b=re(y);let C;e[9]!==d?(C=d==null?void 0:d.isWorkspaceAccount(),e[9]=d,e[10]=C):C=e[10];const S=C;let E;return e[11]!==b||e[12]!==l||e[13]!==n||e[14]!==o||e[15]!==c||e[16]!==d||e[17]!==f||e[18]!==S||e[19]!==s||e[20]!==m||e[21]!==i||e[22]!==a||e[23]!==h||e[24]!==g||e[25]!==v?(E=k=>{if(k===void 0)return;const T=l.ui_info.type==="beacon_banner_info"?"banner":"modal",M=typeof k=="object"&&"type"in k&&k.type?k.type:"unknown",A=()=>{var $,H,G;B.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:l.beacon_id,beacon_name:($=l.beacon_name)!=null?$:"unknown",beacon_type:T,action_id:(H=k.id)!=null?H:"unknown",action_type:M,action_enum:O.action_enum}),v({beaconId:l.beacon_id,eventCtaId:(G=k.id)!=null?G:"unknown"});const D=[Zr.PRIMARY,Zr.SECONDARY];M&&D.includes(M)&&hi.dismiss()},I=D=>{if("onClick"in D&&D.onClick){const $=D.onClick;return U(w({},D),{onClick:()=>{A(),$()}})}if("onThennableClick"in D&&D.onThennableClick){const $=D.onThennableClick;return U(w({},D),{onThennableClick:()=>(A(),$())})}return D},{action_v2:N,text:L}=k,O=N;switch(O.action_enum){case kn.FILE_UPLOAD:case kn.PHOTO_UPLOAD:return I({text:L,onClick:()=>{if(i(),O.composer_text){const $=Pt(o);$.focus(),_o($,O.composer_text)}}});case kn.SYSTEM_HINT:return I({text:L,onClick:()=>{const $=Q3(O.hint);if($){if(O.new_chat){const H=new URLSearchParams({[J3]:$});O.composer_text&&H.set("prompt",O.composer_text),Tr(m,{params:H})}else if(WW(a,o,$,b,{analyticsMetadata:{clientThreadId:n}},S),O.composer_text){const H=Pt(o);H.focus(),_o(H,O.composer_text)}}}});case kn.INVITE_TEAM_MEMBERS:return d?I({text:L,onClick:()=>{dt(c,TO,{workspace:d})}}):void 0;case kn.AUTHENTICATE_LOGIN:return I({text:L,onClick:()=>{Zt(c,{fallbackScreenHint:"login"})}});case kn.AUTHENTICATE_SIGNUP:return I({text:L,onClick:()=>{Zt(c,{fallbackScreenHint:"signup"})}});case kn.GET_PLUS:case kn.GET_GO:case kn.GET_PRO:case kn.GET_TEAM:return I({text:L,onClick:()=>{if(f)Zt(c,{fallbackScreenHint:"login",shouldOpenPaymentModalOnAuth:!0});else{const $=O==null?void 0:O.promo_campaign_id;pn(m,s,ob,$)}}});case kn.DISMISS:return I({text:L,onClick:()=>{if(O.composer_text){const $=Pt(o);$.focus(),_o($,O.composer_text)}}});case kn.OPEN_URL:return I({text:L,onClick:()=>{window.open(O.url,"_blank","noopener noreferrer")}});case kn.OPEN_LOCAL_URL:return I({text:L,onClick:()=>{m(O.web_url)}});case kn.SHARE_CONVERSATION:return g?I({text:L,onClick:()=>{Ln.openSharingModal(g,s)}}):void 0;case kn.UPDATE_PERSONALITY_TRAIT:return I({text:L,onClick:()=>{const $=new Map,{conversationId:H,messageId:G}=xf(g,c),Z=H===void 0?null:H,Q=G===void 0?null:G;Object.entries(O.updated_trait_settings_dict).forEach(q=>{const[Y,te]=q;$.set(Y,te)}),GW(c,$,Z,Q,{optimistic:!0})}});case kn.CREATE_PROMPT:return{text:L,onClick:()=>{var Q,q,Y,te,ae,se,ce,X;if(O.open_in_modal===!1)return;const H=he.getConversationTurns(mt(n)).findLast(Twe),G=(ae=(te=(Y=(q=(Q=H==null?void 0:H.messages)==null?void 0:Q[0])==null?void 0:q.metadata)==null?void 0:Y.system_hints)==null?void 0:te[0])!=null?ae:"",Z={name:(se=O.prompt_name)!=null?se:"",prompt:(ce=O.prompt_text)!=null?ce:"",description:(X=O.prompt_description)!=null?X:"",system_hint:G};dt(c,wwe,{prompt:Z,referer:"prompt_template_beacon"})}};case kn.OPEN_CONNECTORS_ONBOARDING_MODAL:return I({text:L,onClick:()=>{dt(c,kwe,{})}});case kn.COPY_TO_CLIPBOARD:{const D=O.copy_text;return I({text:D,onThennableClick:()=>{if(D.startsWith("$")){const H=D.slice(1);return Yo(H.trim())}else return Yo(D.trim())}})}case kn.DROPDOWN:return;case kn.REGENERATE:{const D=he.getCurrentLeafId(mt(n));return I({text:L,onClick:()=>{O.update_model_picker&&Ff(xt(c,n),O.model_slug),h({sourceEvent:new Event("click"),nodeId:D,requestedModelId:O.model_slug})}})}}},e[11]=b,e[12]=l,e[13]=n,e[14]=o,e[15]=c,e[16]=d,e[17]=f,e[18]=S,e[19]=s,e[20]=m,e[21]=i,e[22]=a,e[23]=h,e[24]=g,e[25]=v,e[26]=E):E=e[26],E}function Twe(t){return t.role==="user"}const Mwe=t=>{"use forget";const e=W.c(36),{clientThreadId:n,beaconInfo:s,onDismiss:o,onMount:a,openFileDialog:i}=t,{ui_info:l,action_items:c}=s,{title:d,description:u,icon_image_url:f,icon_image_size:m}=l,g=ne(),p=Ti(),h=gr.useStore();let x;e[0]!==s||e[1]!==n||e[2]!==p||e[3]!==i||e[4]!==h?(x={clientThreadId:n,location:"Prompt TextareaBeacons Banner",composerController:p,openFileDialog:i,persistedSystemHintsStore:h,beaconInfo:s},e[0]=s,e[1]=n,e[2]=p,e[3]=i,e[4]=h,e[5]=x):x=e[5];const v=Ewe(x);let y;e[6]!==a?(y=()=>{a==null||a()},e[6]=a,e[7]=y):y=e[7],ym(y);let b;e:{if(c==null){b=void 0;break e}let I;e[8]!==c?(I=c.find(Awe),e[8]=c,e[9]=I):I=e[9],b=I}const C=b;if(C){let I;return e[10]!==s||e[11]!==n||e[12]!==C||e[13]!==v||e[14]!==o?(I=r.jsx(Swe,{beaconInfo:s,conversationId:n,dropdownAction:C,formatAction:v,onDismiss:o}),e[10]=s,e[11]=n,e[12]=C,e[13]=v,e[14]=o,e[15]=I):I=e[15],I}let S,E;if(e[16]!==c||e[17]!==s||e[18]!==v||e[19]!==g||e[20]!==o){E=Symbol.for("react.early_return_sentinel");e:{let I;e[23]!==v?(I=D=>{const $=v(D);return $?{action:D,formatted:$}:null},e[23]=v,e[24]=I):I=e[24];const N=(c!=null?c:[]).map(I).filter(Iwe),L=N.find(jwe);if(L&&"onThennableClick"in L.formatted&&L.formatted.onThennableClick){const D={text:L.formatted.text,onThennableClick:L.formatted.onThennableClick};E=r.jsx(uwe,{beaconInfo:s,copyBeaconAction:D,onDismiss:o});break e}const O=N.filter(Nwe);t:{if(O.length===0){S=void 0;break t}let D;e[25]!==g?(D=$=>{const{action:H,formatted:G}=$,Z=typeof G.text=="string"?G.text:g.formatMessage(G.text),Q=()=>{var q;"onThennableClick"in G&&G.onThennableClick?G.onThennableClick():(q=G.onClick)==null||q.call(G)};return r.jsx(ye,{color:Pve(H.type),className:"w-full sm:w-auto",onClick:Q,children:Z},H.id)},e[25]=g,e[26]=D):D=e[26],S=r.jsx("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:O.map(D)})}}e[16]=c,e[17]=s,e[18]=v,e[19]=g,e[20]=o,e[21]=S,e[22]=E}else S=e[21],E=e[22];if(E!==Symbol.for("react.early_return_sentinel"))return E;const k=S,T=m!=null?m:void 0;let M;e[27]!==k?(M=k?{customActions:k}:void 0,e[27]=k,e[28]=M):M=e[28];let A;return e[29]!==u||e[30]!==f||e[31]!==o||e[32]!==T||e[33]!==M||e[34]!==d?(A=r.jsx(vf,{bannerIconImageUrl:f,bannerIconSize:T,onDismiss:o,title:d,description:u,actions:M}),e[29]=u,e[30]=f,e[31]=o,e[32]=T,e[33]=M,e[34]=d,e[35]=A):A=e[35],A};function Awe(t){return(t==null?void 0:t.action_v2.action_enum)===kn.DROPDOWN}function Iwe(t){return t!=null}function jwe(t){const{action:e,formatted:n}=t;return e.type===Zr.COPY&&"onThennableClick"in n&&typeof n.onThennableClick=="function"}function Nwe(t){const{action:e}=t;return e.type!==Zr.COPY}const LF="plus_free_trial_homepage_banner",kJe=t=>{"use forget";const e=W.c(30),{clientThreadId:n,openFileDialog:s}=t,o=fv(),a=Ve(n,he.getRequestId),i=Ia(a),l=V();let c;e[0]!==n||e[1]!==l?(c=xt(l,n),e[0]=n,e[1]=l,e[2]=c):c=e[2];const d=c;let u;e[3]!==d?(u=()=>d.serverId$(),e[3]=d,e[4]=u):u=e[4];const f=re(u);let m;e[5]!==l||e[6]!==f?(m=()=>xf(f,l),e[5]=l,e[6]=f,e[7]=m):m=e[7];const g=m,p=y5(g),h=v5(g);let x;e[8]!==(o==null?void 0:o.beacon_id)||e[9]!==(o==null?void 0:o.beacon_name)||e[10]!==i?(x=()=>{var M,A;i&&(B.logEventWithStatsig("Web Beacon Ignored","chatgpt_web_beacon_ignored",{beacon_id:(M=o==null?void 0:o.beacon_id)!=null?M:"unknown",beacon_name:(A=o==null?void 0:o.beacon_name)!=null?A:"unknown",beacon_type:"banner"}),hi.dismiss())},e[8]=o==null?void 0:o.beacon_id,e[9]=o==null?void 0:o.beacon_name,e[10]=i,e[11]=x):x=e[11];let v;e[12]!==o||e[13]!==i?(v=[i,o],e[12]=o,e[13]=i,e[14]=v):v=e[14],_.useEffect(x,v);const y=_.useRef(!1);let b;e[15]!==o||e[16]!==p||e[17]!==l?(b=()=>{y.current||o&&(B.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:o.beacon_id,beacon_name:o.beacon_name,beacon_type:"banner"}),p.mutate(o.beacon_id),o.beacon_id===LF&&ot(l,Oe.hasSeenPlusFreeTrialHomepageAnnouncementBanner),y.current=!0)},e[15]=o,e[16]=p,e[17]=l,e[18]=b):b=e[18];const C=b;let S;e[19]!==o||e[20]!==h?(S=()=>{o&&(B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:o.beacon_id,beacon_name:o.beacon_name,beacon_type:"banner"}),h.mutate(o.beacon_id)),hi.dismiss()},e[19]=o,e[20]=h,e[21]=S):S=e[21];const E=S;let k;e[22]!==o||e[23]!==n||e[24]!==E||e[25]!==C||e[26]!==s?(k=o&&r.jsx(Xe.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:r.jsx(Mwe,{clientThreadId:n,beaconInfo:o,onDismiss:E,onMount:C,openFileDialog:s})}),e[22]=o,e[23]=n,e[24]=E,e[25]=C,e[26]=s,e[27]=k):k=e[27];let T;return e[28]!==k?(T=r.jsx(fn,{children:k}),e[28]=k,e[29]=T):T=e[29],T};function EJe(t){const e=Ve(t,he.getRequestId),n=Ia(e),s=V(),o=xt(s,t),a=re(()=>zW(o)),i=fv(),l=Object.values(kn),c=i!=null&&i.action_items.every(d=>l.includes(d.action_v2.action_enum)?d.action_v2.action_enum===kn.DROPDOWN?d.action_v2.items.every(u=>l.includes(u.action_v2.action_enum)):d.action_v2.action_enum===kn.CREATE_PROMPT?!a:!0:!1);return!n&&c}const Pwe=3,Rwe=3,X0="oai/apps/connectorInContextUpsellBannerV1";function Lwe(t){return!!ze(t,"3819205143",{disableExposureLog:!1}).get("enabled",!0)}function Owe(t){return t?new Date>X3(t,Pwe):!0}function OF(t){var f;const e=V(),[n,s]=ki(X0,null,m=>m!=null&&typeof m=="object"&&typeof m.messageId=="string"&&typeof m.lastSeenAt=="number"&&typeof m.interacted=="boolean"&&typeof m.viewCount=="number"&&typeof m.hasDismissed=="boolean"),o=Lwe(e),a=n?Ei(n.lastSeenAt):null,i=n&&(f=n.viewCount)!=null?f:0,l=n?n.hasDismissed:!1;return{canBeSeen:t!==""&&!l&&o&&(!n||i<=Rwe&&(Owe(a)||n.interacted===!1)),markSeen:m=>{const g={messageId:t,lastSeenAt:ka(new Date),interacted:m,viewCount:(n?n.viewCount:0)+(m?0:1),hasDismissed:l};Ie.count(je.DEFAULT,"connector_upsell_banner_shown"),s(g),window.localStorage.setItem(X0,JSON.stringify(g))},markDismissed:()=>{const m={messageId:t,lastSeenAt:ka(new Date),interacted:!0,viewCount:0,hasDismissed:!0};Ie.count(je.DEFAULT,"connector_upsell_banner_dismissed"),s(m),window.localStorage.setItem(X0,JSON.stringify(m))}}}const fy=30,Dwe=3,Fwe=1,my=Ft(Mn(()=>({lastSeenInContextUpsellBannerAt:Uwe()}))),gy=Ft(Mn(()=>({inContextUpsellBannerPeriodStartAt:DF()}))),py=Ft(Mn(()=>({inContextUpsellBannerPeriodExposureCount:FF()}))),hy=Ft(Mn(()=>({inContextUpsellBannerInteractedInPeriod:$we()}))),_y=Ft(Mn(()=>({inContextUpsellBannerLastSeenId:BF()})));function Bwe(t){if(BF()===t)return;const n=DF(),s=FF();!n||!s||ya(Date.now(),n)>=fy?xy({lastSeenAt:new Date,periodStartAt:new Date,exposureCount:1,interactedInPeriod:!1,lastSeenId:t}):xy({lastSeenAt:new Date,exposureCount:s+1,lastSeenId:t})}function xy({lastSeenAt:t,periodStartAt:e,exposureCount:n,interactedInPeriod:s,lastSeenId:o}){t===void 0?t=my.getState().lastSeenInContextUpsellBannerAt:my.setState(i=>{i.lastSeenInContextUpsellBannerAt=t===void 0?null:t}),e===void 0?e=gy.getState().inContextUpsellBannerPeriodStartAt:gy.setState(i=>{i.inContextUpsellBannerPeriodStartAt=e===void 0?null:e}),n===void 0?n=py.getState().inContextUpsellBannerPeriodExposureCount:py.setState(i=>{i.inContextUpsellBannerPeriodExposureCount=n===void 0?null:n}),s===void 0?s=hy.getState().inContextUpsellBannerInteractedInPeriod:hy.setState(i=>{i.inContextUpsellBannerInteractedInPeriod=s===void 0?null:s}),o===void 0?o=_y.getState().inContextUpsellBannerLastSeenId:_y.setState(i=>{i.inContextUpsellBannerLastSeenId=o===void 0?null:o});const a={lastSeenInContextUpsellBannerAt:t?String(ka(t)):null,inContextUpsellBannerPeriodStartAt:e?String(ka(e)):null,inContextUpsellBannerPeriodExposureCount:n,inContextUpsellBannerInteractedInPeriod:s,inContextUpsellBannerLastSeenId:o};localStorage.setItem(Ue.O3MiniHighInContextUpsellBanner,JSON.stringify(a))}function Sm(){const t=localStorage.getItem(Ue.O3MiniHighInContextUpsellBanner);if(!t)return null;try{return JSON.parse(t)}catch(e){return null}}function Uwe(){var e;const t=(e=Sm())==null?void 0:e.lastSeenInContextUpsellBannerAt;return t?Ei(Number(t)):null}function DF(){var e;const t=(e=Sm())==null?void 0:e.inContextUpsellBannerPeriodStartAt;return t?Ei(Number(t)):null}function FF(){var t,e;return(e=(t=Sm())==null?void 0:t.inContextUpsellBannerPeriodExposureCount)!=null?e:null}function $we(){var t,e;return(e=(t=Sm())==null?void 0:t.inContextUpsellBannerInteractedInPeriod)!=null?e:null}function BF(){var t,e;return(e=(t=Sm())==null?void 0:t.inContextUpsellBannerLastSeenId)!=null?e:null}const Vwe=t=>{"use forget";var L,O;const e=W.c(40),{actions:n,title:s,description:o,onDismiss:a,onInteract:i,primaryButtonColor:l,secondaryButtonColor:c,bannerIconImageUrl:d,bannerIconSize:u,icon:f,className:m,contentClassName:g}=t,p=ne();let h;e[0]!==n||e[1]!==p?(h=(L=n==null?void 0:n.primaryAction)!=null&&L.text?typeof n.primaryAction.text=="string"?n.primaryAction.text:p.formatMessage(n.primaryAction.text):void 0,e[0]=n,e[1]=p,e[2]=h):h=e[2];const x=h;let v;e[3]!==n||e[4]!==p?(v=(O=n==null?void 0:n.secondaryAction)!=null&&O.text?typeof n.secondaryAction.text=="string"?n.secondaryAction.text:p.formatMessage(n.secondaryAction.text):void 0,e[3]=n,e[4]=p,e[5]=v):v=e[5];const y=v,b=n==null?void 0:n.customActions;let C;e[6]!==m?(C=z("relative -mb-9 ps-4! pe-2.5! pt-2.5 pb-9!","rounded-t-[32px] rounded-b-none border border-b-0","bg-token-bg-tertiary! dark:bg-token-bg-tertiary!","border-token-border-strong/60 dark:border-token-border-strong/60",m),e[6]=m,e[7]=C):C=e[7];let S;e[8]!==g?(S=z(g),e[8]=g,e[9]=S):S=e[9];let E;e[10]!==d||e[11]!==u||e[12]!==f?(E=RF({icon:f,bannerIconImageUrl:d,bannerIconSize:u}),e[10]=d,e[11]=u,e[12]=f,e[13]=E):E=e[13];let k;e[14]!==s?(k=s&&r.jsxs("span",{className:"font-medium",children:[s,s.toString().endsWith(".")?"":r.jsx(r.Fragment,{children:"."})]}),e[14]=s,e[15]=k):k=e[15];let T;e[16]!==o?(T=o?r.jsxs(r.Fragment,{children:["",r.jsx("span",{dangerouslySetInnerHTML:{__html:o}})]}):null,e[16]=o,e[17]=T):T=e[17];let M;e[18]!==k||e[19]!==T?(M=r.jsxs("div",{className:"text-token-text-secondary text-sm",children:[k,T]}),e[18]=k,e[19]=T,e[20]=M):M=e[20];let A;e[21]!==a||e[22]!==i?(A=a?()=>{i==null||i(),a==null||a()}:void 0,e[21]=a,e[22]=i,e[23]=A):A=e[23];let I;e[24]!==(n==null?void 0:n.primaryAction)||e[25]!==(n==null?void 0:n.secondaryAction)||e[26]!==b||e[27]!==i||e[28]!==l||e[29]!==x||e[30]!==c||e[31]!==y?(I=b!=null?b:r.jsxs("div",{className:"m-w-fit flex shrink-0 flex-col gap-2 pb-1 md:pb-0",children:[x&&r.jsx(ye,{onClick:()=>{var D,$;i==null||i(),($=(D=n==null?void 0:n.primaryAction)==null?void 0:D.onClick)==null||$.call(D)},color:l!=null?l:"secondary",className:z("text-[#5856D6] dark:text-[#DCDBF6]","min-h-8"),children:x}),y&&r.jsx(ye,{onClick:()=>{var D,$;i==null||i(),($=(D=n==null?void 0:n.secondaryAction)==null?void 0:D.onClick)==null||$.call(D)},color:c!=null?c:"secondary",className:"shrink-0",children:y})]}),e[24]=n==null?void 0:n.primaryAction,e[25]=n==null?void 0:n.secondaryAction,e[26]=b,e[27]=i,e[28]=l,e[29]=x,e[30]=c,e[31]=y,e[32]=I):I=e[32];let N;return e[33]!==I||e[34]!==C||e[35]!==S||e[36]!==E||e[37]!==M||e[38]!==A?(N=r.jsx("div",{className:"relative",children:r.jsx(_n,{className:C,contentClassName:S,isElevated:!1,icon:E,title:void 0,content:M,onDismiss:A,customCtas:I})}),e[33]=I,e[34]=C,e[35]=S,e[36]=E,e[37]=M,e[38]=A,e[39]=N):N=e[39],N},Hwe=[Wt.UPGRADE_TO_GO,Wt.GET_PLUS,Wt.GET_PRO,Wt.GET_BUSINESS_TRIAL,Wt.GET_PLUS_TRIAL,Wt.GET_GO_TRIAL],Gwe=R(()=>P(()=>Promise.resolve().then(()=>$ae),void 0).then(t=>t.TatertotNuxModal));function Wwe({clientThreadId:t,rateLimitInfo:e,onDismiss:n,onInteract:s,onMount:o}){"use no-forget";var pe;const a=V(),{name:i,title:l,call_to_action:c,description:d,icon_image_url:u}=e,f="metadata"in e&&e.metadata?e.metadata:{},m=st(a),{updateSystemHint:g}=sa(),p=Ti(),h=qW(),x=Ve(t,he.getIsNewConversation),v=(pe=m==null?void 0:m.planType)!=null?pe:"unknown",y=Sr(),b=Me=>{switch(Me.trim().toLowerCase()){case"image_gen":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_IMAGE_GEN;case"send":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_SEND;case"gizmo":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO;case"gizmo_tag":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO_TAG;case"dalle":case"dall_e":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_DALLE;case"advanced_data_analysis":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_ADAVANCED_DATA_ANALYSIS;case"gpt_4o":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_4O;case"gpt_5_auto":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_5_AUTO;case"progress_banner_gpt_5":return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_PROGRESS_BANNER_GPT_5;default:return kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_TEMPLATE}},C=h&&"block_reason"in h?h.block_reason:null,S="banner_description",E=_.useMemo(()=>({type:i||"unknown",location:S,plan_type:v,is_new_conversation:x,is_hard_block:!!h,hard_block_reason:C!=null?C:"",call_to_action:c,title:l,description:d,icon_image_url:u}),[i,v,x,h,C,c,l,d,u]),k=at(),T=!tt(a),M=$l(a),A=Bd(a,gt.signUpButtonText),{eligible:I,isLoading:N}=lt(Oe.hasSeenTatertotNux),L=ze(a,"1368081792"),O=P8(),D=Of({skip:i!=="agent-connector-in-context-upsell",fetchValidLinksOnly:!0,productSku:"n7jupd"}),$=Array.from(D.connectorLinks.values()).some(Me=>Me.some(Ce=>Ce.connector_id===(f==null?void 0:f.connector_id))),{addSource:H}=Pa(t),G=Me=>{switch(Me){case Wt.CONNECT_CONNECTOR:return{text:gt.connect,onClick:()=>{B.logEventWithStatsig("Agent Connector In Context Upsell Banner CTA Clicked","chatgpt_agent_connector_in_context_upsell_banner_cta_clicked",{location:"Agent Connector In Context Upsell Banner CTA Clicked",eventProperties:E});const Ce=jt(t),ke=Ce?new URL($o(Ce),window.location.origin):new URL(window.location.href);if(ke.searchParams.set("oauth_success","true"),!!(f!=null&&f.connector_id))if($){H(Ag[f==null?void 0:f.connector_id]);return}else O({connectorId:f==null?void 0:f.connector_id,redirectAfter:ke.toString(),systemHintType:Pe.Agent})}};case Wt.AUTHENTICATE:return{text:M?gt.logInButtonText:A,onClick:()=>{Zt(a,{fallbackScreenHint:M?"login":"signup",callback:Ce=>{M?B.logLogInButtonClicked({location:"Rate limit banner - ".concat(i),provider:Ce},b(i)):B.logSignUpButtonClicked({location:"Rate limit banner - ".concat(i),provider:Ce},b(i))},skipLoginModal:!Za(a)})}};case Wt.AUTHENTICATE_SECONDARY:return{text:M?A:gt.logInButtonText,onClick:()=>{Zt(a,{fallbackScreenHint:M?"signup":"login",callback:Ce=>{M?B.logSignUpButtonClicked({location:"Rate limit banner - ".concat(i),provider:Ce},b(i)):B.logLogInButtonClicked({location:"Rate limit banner - ".concat(i),provider:Ce},b(i))},skipLoginModal:!Za(a)})}};case Wt.GET_PLUS:return{text:Kf(a),onClick:()=>{B.logRateLimitGetPlusButtonClicked(E),T?Zt(a,{fallbackScreenHint:M?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:Ce=>{M?B.logLogInButtonClicked({location:"Rate limit banner Get Plus upsell",provider:Ce},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PLUS_UPSELL):B.logSignUpButtonClicked({location:"Rate limit banner Get Plus upsell",provider:Ce},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PLUS_UPSELL)},skipLoginModal:!Za(a)}):pn(k,"Prompt textarea rate limit banner")}};case Wt.NEW_CHAT:return{text:Ui.newChatButton,onClick:()=>{B.logNewChatButtonClicked({location:S}),Tr(k)}};case Wt.DEEP_RESEARCH_IN_CONTEXT_UPSELL:{const Ce=he.findNode(mt(t),Le=>R8(Le.message)),ke=Ce?yo(Ce.message):void 0;return{text:Ui.tryItButton,onClick:()=>{B.logEventWithStatsig("In Context Upsell Banner Deep Research CTA Clicked","chatgpt_in_context_upsell_banner_deep_research_cta_clicked",{location:"In-context upsell deep research - Try it button",eventProperties:E}),g(Pe.Research,{clientThreadId:t});const Le=Pt(p);Le.focus(),_o(Le,ke!=null?ke:"")}}}case Wt.GET_PRO:return{text:hse(a),onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},E),{upgrade_plan_tye:"pro"})),T?Zt(a,{fallbackScreenHint:M?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:Ce=>{M?B.logLogInButtonClicked({location:"Rate limit banner Get Pro upsell",provider:Ce},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PRO_UPSELL):B.logSignUpButtonClicked({location:"Rate limit banner Get Pro upsell",provider:Ce},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PRO_UPSELL)},skipLoginModal:!Za(a)}):pn(k,"Prompt textarea rate limit banner")}};case Wt.UPGRADE_TO_GO:return{text:Ui.upgradeToGoButton,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},E),{upgrade_plan_tye:"go"})),T?Zt(a,{fallbackScreenHint:M?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:Ce=>{M?B.logLogInButtonClicked({location:"Rate limit banner Upgrade to Go upsell",provider:Ce},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_UPGRADE_TO_GO_UPSELL):B.logSignUpButtonClicked({location:"Rate limit banner Upgrade to Go upsell",provider:Ce},kt.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_UPGRADE_TO_GO_UPSELL)},skipLoginModal:!Za(a)}):pn(k,"Prompt textarea rate limit banner")}};case Wt.GET_BUSINESS_TRIAL:return{text:Ui.getBusinessTrialButton,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},E),{upgrade_plan_tye:"business"})),pn(k,"Prompt textarea rate limit banner")}};case Wt.GET_GO_TRIAL:return{text:gt.tryGoTrial,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},E),{upgrade_plan_tye:"go"})),pn(k,"Prompt textarea rate limit banner")}};case Wt.GET_PLUS_TRIAL:return{text:Ui.getPlusTrialButton,onClick:()=>{B.logRateLimitUpgradePlanButtonClicked(U(w({},E),{upgrade_plan_tye:"plus"})),pn(k,"Prompt textarea rate limit banner",void 0,void 0,u1)}};case Wt.TRY_CODEX:return{text:Ui.tryCodexButton,onClick:()=>{B.logEventWithStatsig("In Context Upsell Banner Codex CTA Clicked","chatgpt_in_context_upsell_banner_codex_cta_clicked",{location:"In-context upsell codex - Try Codex button",eventProperties:E}),k("/codex")}};case Wt.TRY_TATERTOT:return{text:Ui.tryItButton,onClick:()=>{B.logEventWithStatsig("In Context Upsell Banner Tatertot CTA Clicked","chatgpt_in_context_upsell_banner_tatertot_cta_clicked",{location:"In-context upsell tatertot - Try it button",eventProperties:E}),Ie.count(je.TATERTOT,"tatertot_upsell_banner_try_it_clicked"),g(Pe.Tatertot,{clientThreadId:t}),!N&&I&&ve(a,"1586944302")&&dt(a,Gwe)}};case Wt.NOTIFY_ADMIN_FOR_CREDITS:case Wt.ADD_CREDITS:return null}};ym(()=>{!L.get("should_change_model_picker",!0)&&E.type==="o3-mini-high-in-context-upsell-plus"&&(E.type="o3-mini-high-in-context-upsell-plus-no-model-switch"),B.logRateLimitBannerShown(E),o==null||o()});const[Z,Q]=c!=null?c:[];let q=Q;Z===Wt.AUTHENTICATE&&y&&(q=Wt.AUTHENTICATE_SECONDARY);const Y=ve(a,"2861925050");let te={};Y&&(Z===Wt.NOTIFY_ADMIN_FOR_CREDITS||Z===Wt.ADD_CREDITS)?Z===Wt.ADD_CREDITS?te={customActions:r.jsx(SP,{trigger:"prompt-textarea-rate-limit-banner"})}:Z===Wt.NOTIFY_ADMIN_FOR_CREDITS&&(te={customActions:r.jsx(wP,{creditConsumingProduct:Ide(i),trigger:"prompt-textarea-rate-limit-banner"})}):te={primaryAction:G(Z),secondaryAction:G(q)};const ae=f==null?void 0:f.connector_id,{platformConnectors:se,isLoading:ce}=kd(!!ae),X=ae?se.get(ae):void 0;let ee=null;if(i==="agent-connector-in-context-upsell"){if(ae===void 0||!X||ce)return null;ee=r.jsx(_f,{connector:X,size:"xxlarge"})}const ie=ze(a,"2206338824"),de=!x&&Hwe.includes(Z)?ie.get("web_design_style","control"):"control",me=de==="composer_banner",xe=de==="purple_cta";return me?r.jsx(Vwe,{onDismiss:n,title:l,description:d,actions:te,onInteract:s,bannerIconImageUrl:u!=null?u:void 0,icon:ee}):r.jsx(vf,{onDismiss:n,title:l,description:d,actions:te,primaryButtonClassName:z({"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]":xe}),onInteract:s,bannerIconImageUrl:u!=null?u:void 0,icon:ee})}const Ui=Se({upgradeToGoButton:{id:"SuXEJy",defaultMessage:"Upgrade to Go"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"},tryItButton:{id:"zPDzun",defaultMessage:"Try it"},tryCodexButton:{id:"KcWniZ",defaultMessage:"Try Codex"},getBusinessTrialButton:{id:"PMkLT4",defaultMessage:"Try Business free"},getPlusTrialButton:{id:"H+N0ro",defaultMessage:"Try Plus free"}}),TJe=t=>{"use forget";const e=W.c(33),{clientThreadId:n,composerController:s}=t,o=ev(),a=Ve(n,he.getRequestId),i=Ve(n,he.getCurrentLeafId),l=Ia(a),{markSeen:c}=L8(i),{markSeen:d,markDismissed:u}=OF(i),f=V();let m;e[0]!==f?(m=ze(f,"1368081792"),e[0]=f,e[1]=m):m=e[1];const g=m;let p;e[2]!==o||e[3]!==i||e[4]!==d||e[5]!==c?(p=o!=null&&o.name?()=>{e:switch(o.name){case"tatertot-in-context-upsell":{c(!1);break e}case"agent-connector-in-context-upsell":{d(!1);break e}case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":Bwe(i)}}:void 0,e[2]=o,e[3]=i,e[4]=d,e[5]=c,e[6]=p):p=e[6];const h=p;let x;e[7]!==f?(x=ve(f,"3612584454"),e[7]=f,e[8]=x):x=e[8];const v=x,y=(o==null?void 0:o.name)==="gpt-4l"&&v;let b;e[9]!==l||e[10]!==y?(b=()=>{l&&!y&&Zu.dismissBanner()},e[9]=l,e[10]=y,e[11]=b):b=e[11];let C;e[12]!==s||e[13]!==l||e[14]!==y?(C=[l,y,s],e[12]=s,e[13]=l,e[14]=y,e[15]=C):C=e[15],_.useEffect(b,C);let S;e[16]!==(o==null?void 0:o.is_dismissible)||e[17]!==(o==null?void 0:o.name)||e[18]!==g||e[19]!==u?(S=o!=null&&o.is_dismissible?()=>{(o==null?void 0:o.name)==="agent-connector-in-context-upsell"?B.logEventWithStatsig("Dismiss Agent Connector In Context Upsell Banner","chatgpt_agent_connector_in_context_upsell_banner_dismissed",{type:"agent-connector-in-context-upsell"}):B.logEventWithStatsig("Rate Limit: Dismiss Banner","chatgpt_rate_limit_banner_dismissed",{type:!g.get("should_change_model_picker",!0)&&(o==null?void 0:o.name)==="o3-mini-high-in-context-upsell-plus"?"o3-mini-high-in-context-upsell-plus-no-model-switch":o==null?void 0:o.name}),(o==null?void 0:o.name)==="agent-connector-in-context-upsell"&&u(),Zu.dismissBanner()}:void 0,e[16]=o==null?void 0:o.is_dismissible,e[17]=o==null?void 0:o.name,e[18]=g,e[19]=u,e[20]=S):S=e[20];const E=S;let k;e[21]!==(o==null?void 0:o.name)||e[22]!==d||e[23]!==c?(k=()=>{e:switch(o==null?void 0:o.name){case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":{xy({interactedInPeriod:!0});break e}case"tatertot-in-context-upsell":{c(!0);break e}case"agent-connector-in-context-upsell":{d(!0);break e}}},e[21]=o==null?void 0:o.name,e[22]=d,e[23]=c,e[24]=k):k=e[24];const T=k;let M;e[25]!==o||e[26]!==n||e[27]!==E||e[28]!==T||e[29]!==h?(M=o&&r.jsx(Xe.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:r.jsx(Wwe,{clientThreadId:n,rateLimitInfo:o,onDismiss:E,onInteract:T,onMount:h})}),e[25]=o,e[26]=n,e[27]=E,e[28]=T,e[29]=h,e[30]=M):M=e[30];let A;return e[31]!==M?(A=r.jsx(fn,{children:M}),e[31]=M,e[32]=A):A=e[32],A};function zwe(t,e,n,s,o,a,i,l,c,d,u,f,m){if(c||(t.name==="o3-mini-high-in-context-upsell-free"||t.name==="o3-mini-high-in-context-upsell-plus")&&(e.some(C=>C.model_slug==="o4-mini-high")||(n==null?void 0:n.id)==="o4-mini-high")||l&&i&&ya(Date.now(),i)<fy)return!1;const p=s==null||ya(Date.now(),s)>=Fwe,h=o===d,x=i==null||a==null||ya(Date.now(),i)>=fy||a<Dwe;if(!(p&&x||h))return!1;switch(t.name){case"deep-research-in-context-upsell":return u("should_show_deep_research_upsell_banner",!1);case"deep-research-in-context-upsell-free":return u("should_show_deep_research_upsell_banner_free",!1);case"o3-mini-high-in-context-upsell-free":return u("should_show_o3_mini_high_upsell_banner_free_user_to_plus",!1);case"o3-mini-high-in-context-upsell-plus":return u("should_show_o3_mini_high_upsell_banner_plus_user",!1);case"codex-in-context-upsell":return f("should_show_codex_upsell_banner",!1);case"codex-in-context-upsell-plus":return m("should_show_codex_upsell_banner",!1);default:return!1}}function MJe(t){"use no forget";var E;const e=V(),n=vh(),s=re(()=>Ko(e)),o=Th(),a=re(()=>yn(xt(e,t))),i=Ve(t,he.getRequestId),l=Ve(t,he.getCurrentLeafId),c=Ia(i),d=my(k=>k.lastSeenInContextUpsellBannerAt),u=py(k=>k.inContextUpsellBannerPeriodExposureCount),f=gy(k=>k.inContextUpsellBannerPeriodStartAt),m=_y(k=>k.inContextUpsellBannerLastSeenId),g=hy(k=>k.inContextUpsellBannerInteractedInPeriod),p=ze(e,"1368081792"),h=ze(e,"1738106734"),x=ze(e,"3861158060"),v=ze(e,"1092897457"),y=ev(),{canBeSeen:b}=L8(l),{canBeSeen:C}=OF(l);if(n||s)return!1;let S=!1;switch(y==null?void 0:y.name){case null:case void 0:break;case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":S=zwe(y,o,a,d,m,u,f,g,c,l,p.get,h.get,x.get);break;case"tatertot-in-context-upsell":S=b&&v.get("is_tatertot_enabled",!0)&&v.get("is_upsell_banner_enabled",!0);break;case"agent-connector-in-context-upsell":S=C&&((E=y.metadata)==null?void 0:E.connector_id)!==void 0;break;default:S=!0}return!c&&S}function AJe(t){"use forget";const e=W.c(2);if(!t.shouldRender)return null;let n;return e[0]!==t?(n=r.jsx(qwe,w({},t)),e[0]=t,e[1]=n):n=e[1],n}function qwe({contentArea:t,children:e}){"use no forget";const{store:n}=Ld(),s=_.useRef(null);return n.useContentAreaResizeObserver(t,s),r.jsx("div",{ref:s,className:"relative h-full w-full",children:e})}const IJe=on(()=>Be(!1));function jJe(t){returnwindow.location.host+"/redeem/".concat(t)}function NJe(t){return"/?code=".concat(t,"#referrals")}function PJe(t,e,n){return t.formatNumber(e||0,{style:"currency",currency:n,minimumFractionDigits:0,maximumFractionDigits:2})}function Ywe(t){return"/?program=".concat(t,"#referrals")}function RJe(t){return"/refer/".concat(t)}function LJe(){const t=V(),e=at(),{data:n}=mN();_.useEffect(()=>{n&&n.info&&(Yt.logShowReferralUpsellAnnouncementBanner(),B.logUpsellOrModalEvent(dn,{eventId:"referral_upsell_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[n]);const s=n==null?void 0:n.info;return s?r.jsx(_n,{title:r.jsx(j,{id:"referralUpsellAnnouncementBanner.title",defaultMessage:"Get up to 12 free months of Plus when you refer classmates"}),content:r.jsx(j,{id:"referralUpsellAnnouncementBanner.content",defaultMessage:"Refer a friend to sign up for ChatGPT, and youll both get a $20 credit."}),primaryCtaText:r.jsx(j,{id:"referralUpsellAnnouncementBanner.primaryCtaText",defaultMessage:"Invite"}),onDismiss:()=>{ot(t,Oe.hasSeenReferralUpsellAnnouncement),Yt.logCloseReferralUpsellAnnouncementBanner()},onPrimaryCtaClick:async()=>{ot(t,Oe.hasSeenReferralUpsellAnnouncement),Yt.logClickReferralUpsellButton(),e(Ywe(s.program_name))}}):null}const OJe=t=>{var i,l,c,d,u,f,m,g;const{data:e,isLoading:n}=rt({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>om.getReferralProgramMetadata(t)}),s=e,o=(c=(l=(i=s==null?void 0:s.metadata)==null?void 0:i.program_name)!=null?l:t)!=null?c:null,a=(s==null?void 0:s.ineligible_reason)&&(s&&!s.is_eligible&&(d=s.ineligible_reason)!=null?d:null);return{isEligible:(u=s==null?void 0:s.is_eligible)!=null?u:!1,referralMetadata:(f=s==null?void 0:s.metadata)!=null?f:null,programName:o,isReferralLoading:n,referralCode:(m=s==null?void 0:s.referral_code)!=null?m:null,transactionId:(g=s==null?void 0:s.transaction_id)!=null?g:null,referralError:a}},Zwe=t=>{var a,i,l,c,d,u;const{data:e,isLoading:n}=rt({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>t?om.getReferralCodeMetadata(t):{metadata:null,is_referrer:!1,ineligible_reason:null,should_forward_to_checkout:!1}}),s=e,o=(i=(a=s==null?void 0:s.metadata)==null?void 0:a.program_name)!=null?i:null;return{shouldForwardToCheckout:(l=s==null?void 0:s.should_forward_to_checkout)!=null?l:!1,isReferrer:(c=s==null?void 0:s.is_referrer)!=null?c:!1,ineligibleReason:(d=s==null?void 0:s.ineligible_reason)!=null?d:null,referralMetadata:(u=s==null?void 0:s.metadata)!=null?u:null,programName:o,isReferralLoading:n}},Kwe=Oe.hasDismissedRefereeRedemption,Qwe=()=>{const{eligible:t}=lt(Kwe),{referralCode:e,discountValue:n,discountDuration:s}=Jwe();return{shouldShowBanner:t&&e&&n&&s,referralCode:e,discountValue:n,discountDuration:s}},Jwe=()=>{const t=_t.getItem(Ue.ReferralCode),{referralMetadata:e}=Zwe(t);return{referralCode:t,discountValue:e==null?void 0:e.discount,discountDuration:e==null?void 0:e.duration}},DJe=()=>{const t=V(),e=ve(t,"727502549"),n=ve(t,"550432558"),{shouldShowBanner:s}=Qwe();return e&&n&&s};async function Xwe(t){return ge.safePost("/payments/checkout",{requestBody:t,additionalHeaders:Ev(null,null,null,await XM("chatgpt_checkout").catch(e=>{Fe.addError(e)}))})}async function e7e(t,e,n,s){B.logEvent("Account Pay: Payment Checkout Clicked",e),qe.logEvent("chatgpt_account_payment_modal_upgrade_button_click",Ye.PLUS);const o=await Xwe(w(w({plan_name:"chatgptplusplan",billing_details:t},n&&{student_verification_id:n}),s&&{veterans_verification_id:s}));B.logEvent("Account Pay: Navigating to Payment Checkout",U(w({},e),{url:o.url})),qe.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",Ye.PLUS,{url:o.url}),n&&_t.setItem(Ue.CheckoutFrom,"students"),s&&_t.setItem(Ue.CheckoutFrom,"veterans"),window.location.href=o.url}const t7e=t=>{var s;const{data:e,isLoading:n}=rt({queryKey:["referralDiscount",t],queryFn:async()=>t?await om.getReferralDiscount():{discount:null}});return{discount:(s=e==null?void 0:e.discount)!=null?s:null,isDiscountLoading:n}},yy=Oe.hasDismissedReferrerRedemption,UF=()=>{const{eligible:t}=lt(yy),{discount:e,isDiscountLoading:n}=t7e(t);return{shouldShowBanner:t&&e&&!n,discountValue:e==null?void 0:e.value,discountDuration:e==null?void 0:e.duration}},FJe=()=>{const t=V(),e=ve(t,"727502549"),n=ve(t,"550432558"),{shouldShowBanner:s}=UF();return e&&n&&s},qp="month",$F="year";function BJe(){const t=Sn(),e=V(),n=ne(),{country:s}=wSe(),o=SSe({country:s,currentAccount:t,location:"ReferrerRedemptionAvailableAnnouncementBanner",shouldUsePaidSubscriptionBillingCurrency:!0}),a=_.useMemo(()=>U(w({},t==null?void 0:t.subscriptionAnalyticsParams),{referrer:document.referrer}),[t]);async function i(){try{if(!o)return;await e7e(o,a)}catch(g){}}const{shouldShowBanner:l,discountValue:c,discountDuration:d}=UF();if(_.useEffect(()=>{l&&c&&d&&(Yt.logShowReferrerRedemptionBanner(),B.logUpsellOrModalEvent(dn,{eventId:"referrer_redemption_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER}))},[l,c,d]),!l||!c||!d||!o)return null;const u=n7e(n,o,c,d),f=s7e(n,o,c,d),m=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:u}),r.jsx("span",{className:"text-token-text-secondary",children:f})]});return r.jsx(_n,{onPrimaryCtaClick:()=>{ot(e,yy),Yt.logClickReferrerRedeemButton(),i()},primaryCtaText:r.jsx(j,w({},Kf(e))),onDismiss:()=>{ot(e,yy),Yt.logCloseReferrerRedemptionBanner()},content:m})}function n7e(t,e,n,s){var u,f;const o=A3(e.currency),a=s?s.period:qp,i=s?s.num_periods:1,l=(f=(u=o.code.defaultMessage)==null?void 0:u.toString())!=null?f:O8,c=t.formatNumber(n.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let d;return a===qp?d=i===1?r.jsx(j,{id:"referrerRedemptionBannerTitleForSingleMonth",defaultMessage:"Your {discount} credit is ready",values:{discount:c}}):r.jsx(j,{id:"referrerRedemptionBannerTitleForPluralMonths",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):a===$F&&(d=i===1?r.jsx(j,{id:"referrerRedemptionBannerTitleForSingleYear",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):r.jsx(j,{id:"referrerRedemptionBannerTitleForPluralYears",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}})),d}function s7e(t,e,n,s){var u,f;const o=A3(e.currency),a=s?s.period:qp,i=s?s.num_periods:1,l=(f=(u=o.code.defaultMessage)==null?void 0:u.toString())!=null?f:O8,c=t.formatNumber(n.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let d;return a===qp?d=i===1?r.jsx(j,{id:"referrerRedemptionBannerContentForSingleMonth",defaultMessage:"Your referral link was used  claim your free month of Plus."}):r.jsx(j,{id:"referrerRedemptionBannerContentForPluralMonths",defaultMessage:"Your referral link earned you {discount} off {num_months} months of Plus.",values:{discount:c,num_months:i}}):a===$F&&(d=i===1?r.jsx(j,{id:"referrerRedemptionBannerContentForSingleYear",defaultMessage:"Your referral link earned you {discount} off a year of Plus.",values:{discount:c}}):r.jsx(j,{id:"referrerRedemptionBannerContentForPluralYears",defaultMessage:"Your referral link earned you {discount} off {num_years} years of Plus.",values:{discount:c,num_years:i}})),d}const e2={logDisabledAccess(t){Ie.count(je.STUDENTS,"students.web.disabled",{reason:t})},logLandingPageImpression(){Ie.count(je.STUDENTS,"students.web.landingPageImpression"),B.logEvent("Students: Landing Page Impression")},logClickLoginButton(t){Ie.count(je.STUDENTS,"students.web.clickLoginButton",{key:"source",value:t}),B.logEvent("Students: Click Login Button",{source:t})},logClickVerifyButton(t){Ie.count(je.STUDENTS,"students.web.clickVerifyButton",{key:"source",value:t}),B.logEvent("Students: Click Verify Button",{source:t})},logClickCheckoutButton(t){Ie.count(je.STUDENTS,"students.web.clickCheckoutButton",{key:"source",value:t}),B.logEvent("Students: Click Checkout Button",{source:t})},logShowNeedsVerificationModal(){Ie.count(je.STUDENTS,"students.web.showNeedsVerificationModal"),B.logEvent("Students: Show Needs Verification Modal")},logShowVerifiedModal(){Ie.count(je.STUDENTS,"students.web.showVerifiedModal"),B.logEvent("Students: Show Verified Modal")},logError(t){Ie.count(je.STUDENTS,"students.web.error",{key:"errorType",value:t})},logShowAnnouncementBanner(){Ie.count(je.STUDENTS,"students.web.showAnnouncementBanner"),B.logEvent("Students: Show Announcement Banner")},logClickAnnouncementBanner(){Ie.count(je.STUDENTS,"students.web.clickAnnouncementBanner"),B.logEvent("Students: Click Announcement Banner")},logCloseAnnouncementBanner(){Ie.count(je.STUDENTS,"students.web.closeAnnouncementBanner"),B.logEvent("Students: Close Announcement Banner")}},UJe="redirectedFromAuth",g7="studentsPromotion";function p7(t){return t?"/students?".concat(t,"=true"):"/students"}function $Je(t=!1){return t?window.location.origin+"/?".concat(g7,"=true"):"/?".concat(g7,"=true")}function VJe(t){const e=t.hasPaidSubscription(),n=t.getLastActiveSubscription(),s=e&&[F_.CHATGPT_IOS,F_.SORA_IOS].includes(n.purchase_origin_platform),o=e&&n.purchase_origin_platform===F_.MOBILE_ANDROID;return s||o}function HJe(){const t=V(),e=at();return _.useEffect(()=>{e2.logShowAnnouncementBanner(),B.logUpsellOrModalEvent(dn,{eventId:"students_upsell_announcement_banner_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_BANNER})},[]),r.jsx(_n,{title:r.jsx(j,{id:"GA5kGX",defaultMessage:"Students can claim 2 months of Plus, free."}),content:r.jsx(j,{id:"WOGB1g",defaultMessage:"Get access to premium features when you verify youre a student in the US or Canada. {learnMoreLink}",values:{learnMoreLink:r.jsx("span",{className:"underline",children:r.jsx(wo,{to:p7(),children:r.jsx(j,{id:"0cZpUc",defaultMessage:"Learn more"})})})}}),primaryCtaText:r.jsx(j,{id:"uA26i5",defaultMessage:"Learn More"}),onPrimaryCtaClick:()=>{e2.logClickAnnouncementBanner(),ot(t,Oe.hasSeenStudentsUpsellAnnouncement),e(p7())},onDismiss:()=>{e2.logCloseAnnouncementBanner(),ot(t,Oe.hasSeenStudentsUpsellAnnouncement)}})}const GJe=t=>D8([wt.GizmoMagicCreate,wt.GizmoTest],t==null?void 0:t.kind),o7e=t=>D8([wt.GizmoInteraction,wt.GizmoMagicCreate,wt.GizmoTest],t==null?void 0:t.kind);function a7e(t){return[{title:t.formatMessage({id:"er580q",defaultMessage:"Create an image of a magazine cover of cute animals with headlines and text"}),body:"",type:Je.Autocomplete,prompt:t.formatMessage({id:"SKZKBN",defaultMessage:"Create an image of a photorealistic magazine cover for 'CUTE ANIMALS,' featuring three impossibly cute and stylishly accessorized pets, with realistic, catchy headlines and teaser text"}),theme:vn.Image},{title:t.formatMessage({id:"ukPFbH",defaultMessage:"Create an image for a garden-themed birthday party invitation"}),body:"",type:Je.Autocomplete,prompt:t.formatMessage({id:"uYg5kL",defaultMessage:"Create an image of a colorful invitation for a garden-themed birthday party, including whimsical typography"}),theme:vn.Image},{title:t.formatMessage({id:"mMiJxP",defaultMessage:"Create an image of an astronaut with an inflatable duck on Mars"}),body:"",type:Je.Autocomplete,prompt:t.formatMessage({id:"5nFWh4",defaultMessage:"Create a photorealistic image of an international astronaut on Mars, wearing a giant duck inflatable toy around its waist"}),theme:vn.Image},{title:t.formatMessage({id:"+T7POI",defaultMessage:"Create an image of a tutorial for cooking pasta"}),body:"",type:Je.Autocomplete,prompt:t.formatMessage({id:"9N2bJ0",defaultMessage:"Create an image of a comic-book style tutorial for cooking pasta"}),theme:vn.Image}]}const r7e=$f(()=>Be(!1)),VF=$f(t=>{const e=Be([],{equals:Lf}),n=St(()=>{const s=r7e(t),o=YW(Pt(t));return tv(t)&&!s()&&e().length>0&&!(o!=null&&o())},{getServerFallback:()=>!1});return{autocompletions$:e,shouldShowAutocomplete$:n}});function H5(){return"virtualKeyboard"in navigator}const i7e=Ft()(()=>({height:0,isKeyboardOpen:!1,scrollOffset:null,composerHeight:null}));function l7e(t){return t?t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable:!1}function c7e(){document.documentElement.classList.add("keyboard-open")}function d7e(){document.documentElement.classList.remove("keyboard-open")}const G5=Hn(()=>{const t=Be(null),e=Be(!1),n=Be(null),s=Be(0),o=Be(!1),a=new EventTarget,i=f=>{a.dispatchEvent(new CustomEvent(f))},l=(f,m,g)=>{a.addEventListener(f,m,g)},c=(f,m,g)=>{a.removeEventListener(f,m,g)};setTimeout(()=>{o.set(H5())});function d(f){const m=new AbortController,g=t();if(!g)return;g.blur(),l("keyboard-closed",()=>{m.abort(),f==null||f()},{signal:m.signal});const p=window.setTimeout(()=>{f==null||f(),m.abort()},500);m.signal.addEventListener("abort",()=>{window.clearTimeout(p)})}return{closeKeyboard:d,events:{addEventListener:l,dispatch:i,removeEventListener:c},focusedElement:t,isKeyboardOpen:e,keyboardDimensions:n,keyboardHeight:s,reset:()=>{vo(()=>{t.set(null),e.set(!1),n.set(null),s.set(0)})},supportsVirtualKeyboardApi$:o}});function WJe(t){if(!H5())return;const e=G5(t);let n=!1;const s=navigator.virtualKeyboard.overlaysContent;function o(){if(n)return;e.reset(),document.removeEventListener("focusout",a),d7e(),document.body.style.removeProperty("--screen-keyboard-height"),navigator.virtualKeyboard.removeEventListener("geometrychange",i);let c;const d=u=>{u.target.boundingRect.height===0&&setTimeout(()=>{e.events.dispatch("keyboard-closed"),window.clearTimeout(c)},100)};c=window.setTimeout(()=>{navigator.virtualKeyboard.removeEventListener("geometrychange",d),e.events.dispatch("keyboard-closed")},500),navigator.virtualKeyboard.addEventListener("geometrychange",d)}const a=()=>{n=!1,e.isKeyboardOpen.set(!1),requestAnimationFrame(o)},i=c=>{document.body.style.setProperty("--screen-keyboard-height","".concat(c.target.boundingRect.height,"px")),c7e(),e.keyboardDimensions.set(c.target.boundingRect),e.keyboardHeight.set(c.target.boundingRect.height)},l=c=>{const d=c.target;l7e(d)&&(n=!0,e.focusedElement.set(d),e.isKeyboardOpen.set(!0),e.events.dispatch("keyboard-opened"),document.addEventListener("focusout",a),navigator.virtualKeyboard.addEventListener("geometrychange",i))};return navigator.virtualKeyboard.overlaysContent=!0,document.addEventListener("focusin",l),()=>{navigator.virtualKeyboard.overlaysContent=s,document.removeEventListener("focusin",l),o()}}function zJe(t){"use forget";const e=W.c(14),{canShowAutocomplete$:n,layoutMode:s,composerController:o,clientThreadId:a}=t,i=V(),l=re(n);let c;e[0]!==i?(c=G5(i),e[0]=i,e[1]=c):c=e[1];const u=re(c.supportsVirtualKeyboardApi$);let f;e[2]!==o?(f=(y,b,C)=>{b&&_o(Pt(o),C?"".concat(C.title).concat(C.body):"")},e[2]=o,e[3]=f):f=e[3];const m=f;if(!l)return null;const g=s==="center"?"top-full":"bottom-full",p=u&&"keyboard-open:fixed keyboard-open:bottom-[calc(var(--screen-keyboard-height,0px)+var(--composer-height,100px)+12px)] keyboard-open:px-4";let h;e[4]!==g||e[5]!==p?(h=z("absolute start-0 z-[-1] box-border w-full ps-0",g,p),e[4]=g,e[5]=p,e[6]=h):h=e[6];let x;e[7]!==a||e[8]!==o||e[9]!==m?(x=r.jsx(u7e,{composerController:o,onChange:m,clientThreadId:a}),e[7]=a,e[8]=o,e[9]=m,e[10]=x):x=e[10];let v;return e[11]!==h||e[12]!==x?(v=r.jsx("div",{className:h,children:x}),e[11]=h,e[12]=x,e[13]=v):v=e[13],v}function u7e(t){"use forget";const e=W.c(51),{composerController:n,onSelect:s,onChange:o,clientThreadId:a}=t;let i;e[0]!==n?(i=VF(n),e[0]=n,e[1]=i):i=e[1];const l=re(i.autocompletions$),c=Od(),d=V();let u,f;e[2]!==a||e[3]!==l?(u=()=>{l.length>0&&l.every(m7e)&&WQ(l,a)},f=[l,a],e[2]=a,e[3]=l,e[4]=u,e[5]=f):(u=e[4],f=e[5]),_.useEffect(u,f);let m;e[6]!==c||e[7]!==d||e[8]!==s?(m=(Y,te,ae,se)=>{var ce,X;if(te.onSelectOverride)return te.onSelectOverride(Y,te,ae,se);if(te.type===Je.Templated){const ee={id:(ce=te.id)!=null?ce:"dyn-".concat(Date.now()),name:te.title,prompt:te.prompt,description:(X=te.title)!=null?X:null};ZW({ctx:d,prompt:ee,referer:"autocomplete-suggestion"}),s==null||s(te,ae,se);return}s==null||s(te,ae,se),c(Y,te,ae,se)},e[6]=c,e[7]=d,e[8]=s,e[9]=m):m=e[9];const g=m,p=l.length>0,[h,x]=_.useState(-1),[v,y]=_.useState(!1);let b;e[10]!==o||e[11]!==h||e[12]!==l?(b=()=>{const Y=h===l.length-1?0:h+1;return x(Y),o==null||o(Y,!0,l[Y]),!0},e[10]=o,e[11]=h,e[12]=l,e[13]=b):b=e[13];const C=va(b);let S;e[14]!==o||e[15]!==h||e[16]!==l?(S=()=>{const Y=h<=0?l.length-1:h-1;return x(Y),o==null||o(Y,!0,l[Y]),!0},e[14]=o,e[15]=h,e[16]=l,e[17]=S):S=e[17];const E=va(S);let k;e[18]!==g||e[19]!==h||e[20]!==l?(k=Y=>l[h]?(g(Y,l[h],l,h),!0):!1,e[18]=g,e[19]=h,e[20]=l,e[21]=k):k=e[21];const T=va(k);let M,A;e[22]!==n||e[23]!==C||e[24]!==E||e[25]!==T?(M=()=>F8(Pt(n),{ArrowDown:C,ArrowUp:E,Enter:T}),A=[n,C,E,T],e[22]=n,e[23]=C,e[24]=E,e[25]=T,e[26]=M,e[27]=A):(M=e[26],A=e[27]),_.useEffect(M,A);let I,N;e[28]!==v?(I=()=>{if(!v){const Y=()=>{y(!0),window.removeEventListener("mousemove",Y)};return window.addEventListener("mousemove",Y),()=>{window.removeEventListener("mousemove",Y)}}},N=[v],e[28]=v,e[29]=I,e[30]=N):(I=e[29],N=e[30]),_.useEffect(I,N);let L;e[31]!==o?(L=()=>{x(-1),o==null||o(-1,!1),y(!1)},e[31]=o,e[32]=L):L=e[32];let O;e[33]!==o||e[34]!==l?(O=[l,o],e[33]=o,e[34]=l,e[35]=O):O=e[35],_.useEffect(L,O);let D,$,H;e[36]===Symbol.for("react.memo_cache_sentinel")?(D={opacity:0},$={opacity:1},H={opacity:0},e[36]=D,e[37]=$,e[38]=H):(D=e[36],$=e[37],H=e[38]);const G=p?"flex":"hidden";let Z;e[39]!==G?(Z=z("bg-token-bg-primary divide-token-border-light w-full flex-col divide-y p-2.5 max-sm:px-0",G),e[39]=G,e[40]=Z):Z=e[40];let Q;e[41]!==v||e[42]!==n||e[43]!==g||e[44]!==o||e[45]!==h||e[46]!==l?(Q=l.map((Y,te)=>{var ae;return r.jsx(Xe.li,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:te*.03},exit:{opacity:0,translateY:4},className:"w-full",children:r.jsxs("button",{className:z("flex w-full cursor-pointer items-center justify-start rounded-lg px-2.5 py-3 text-start whitespace-pre-wrap",h===te?"bg-token-main-surface-secondary":"bg-token-main-surface-primary"),onClick:se=>{se.preventDefault(),g(se,Y,l,te),Zy()&&Pt(n).dom.blur()},onMouseDown:f7e,onMouseEnter:()=>{v&&(x(te),o==null||o(te,!1,Y))},onMouseLeave:()=>{x(-1),o==null||o(-1,!1,Y)},children:[Y.source==="CURATED"&&(Y.iconThumbnailUrl||Y.coverThumbnailImageUrl)?r.jsx("img",{className:z("me-2 flex-none rounded-md object-cover",Y.coverThumbnailImageUrl?"h-7 w-7":"h-8 w-8"),src:Y.iconThumbnailUrl||Y.coverThumbnailImageUrl,alt:""}):Y.emoji?r.jsx("span",{"aria-hidden":"true",className:z("bg-primary text-token-text-primary text-md me-4 flex flex-none items-center justify-center"),children:Y.emoji}):Y.icon?r.jsx("span",{className:"text-token-text-secondary icon me-2 flex-none",children:Y.icon}):null,r.jsx("span",{className:z(Y.category==="personalized"?"text-md":"text-sm","whitespace-pre-wrap"),children:Y.autocompletionChunks&&Y.autocompletionChunks.length>0?r.jsx(r.Fragment,{children:Y.autocompletionChunks.map((se,ce)=>{var X;return r.jsx("span",{className:z((X=se.className)!=null?X:se.isMatched?"text-token-text-tertiary":Y.category==="personalized"?"text-token-text-secondary":"text-token-text-primary"),children:se.text},ce)})}):Y.source==="CURATED"?r.jsx("span",{className:z("text-pretty",Y.type===Je.Starter||Y.type===Je.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:Y.title}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:z("text-pretty",Y.type===Je.Starter||Y.type===Je.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:Y.title}),r.jsx("span",{className:"text-token-text-primary text-pretty",children:Y.body})]})}),Y.trailing?Y.trailing:null]})},(ae=Y.id)!=null?ae:te)}),e[41]=v,e[42]=n,e[43]=g,e[44]=o,e[45]=h,e[46]=l,e[47]=Q):Q=e[47];let q;return e[48]!==Z||e[49]!==Q?(q=r.jsx(Xe.ul,{initial:D,animate:$,exit:H,className:Z,children:Q}),e[48]=Z,e[49]=Q,e[50]=q):q=e[50],q}function f7e(t){t.preventDefault()}function m7e(t){return t.type===Je.Autocomplete||t.type===Je.Trending}function g7e(t,e){t=t.toLocaleLowerCase();const n=e;e=e.toLocaleLowerCase();const s=[];let o=0;for(let l=0;l<e.length&&(o<t.length&&t[o]===e[l]&&(s.push(l),o++),o!==t.length);l++);const a=[];let i=0;if(s.forEach(l=>{if(l>i){const c=n.slice(i,l);c&&a.push({text:c,isMatched:!1})}a.push({text:n[l],isMatched:!0}),i=l+1}),i<e.length){const l=n.slice(i);l&&a.push({text:l,isMatched:!1})}return p7e(a)}function p7e(t){if(t.length===0)return t;const e=[t[0]];for(let s=1;s<t.length;s++){const o=e[e.length-1],a=t[s];o.isMatched===a.isMatched?o.text+=a.text:e.push(a)}const n=e.filter(s=>s.isMatched).reduce((s,o)=>s+o.text.trim().length,0);return e.length<=4&&n>=2?e:[{text:e.map(s=>s.text).join(""),isMatched:!1}]}function h7e(t=8,e=null){return Xn({queryKey:["promptStarters",t,e],queryFn:async()=>{const n=await ge.safeGet("/prompt_library/",{parameters:{query:{limit:t,use_v2:!0,model_slug:e}},authOption:sn.SendIfAvailable});return Fe.addFirstTiming("load.promptStarters"),n}})}function vy(t){var e;return(e=vc(t)?t.promptStarters:t.gizmo.display.prompt_starters)==null?void 0:e.map(n=>({type:Je.Starter,title:"",body:n,prompt:n}))}function HF(){const t=V(),e=ln(),n=zh(AM),s=tt(t),o=W5(t,!1);return!s&&n<o.get("new-user-message-count",20)||s&&e&&Date.now()/1e3-e.created<o.get("new-user-age-seconds",336*60*60)}const _7e=()=>{const t=V(),e=W5(t,!0),n=HF(),s=st(t);return s!=null&&s.isK12()?()=>!0:()=>n&&e.get("web-enable-for-new-users",!1)||!n&&e.get("web_enable_for_existing_users",!1)};function GF({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const n=_7e(),s=V(),o=st(s),a=Ve(e,c=>c==null?void 0:c.mode),i=o7e(a);let l=!(o!=null&&o.isEnterprisey());return o!=null&&o.isK12()&&(l=!0),t&&!i&&l&&n()}function qJe({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const n=V(),s=W5(n,!1),o=HF(),[a,i]=ki("homepage_prompt_style","",m=>typeof m=="string"),l=s.get("homepage_prompt_style","chips"),c=s.get("persist_new_user_experience",!1);let d=l;c&&a&&(d=a);const u=st(n);return u&&u.isK12()&&(d="tiles"),_.useEffect(()=>{a&&!c?i(""):!a&&o&&c&&i(l)},[a,i,s,o,l,c]),GF({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e})?d:"chips"}const YJe=({clientThreadId:t,limit:e,shouldBeEnabledForDefaultAssistant:n,modelSlug:s})=>{var k,T;const o=Ti(),{autocompletions$:a}=VF(o),i=Jo(),l=ne(),{clearAllSystemHintModeTriggers:c,setThreadSystemHintMode:d}=sa(),u=Ve(t,M=>M==null?void 0:M.mode),f=Ci((u==null?void 0:u.kind)===wt.GizmoInteraction?u.gizmo_id:void 0).data,{gizmoEditorData:m,mode:g}=Z3(),p=GF({shouldBeEnabledForDefaultAssistant:n,clientThreadId:t}),{data:h,isSuccess:x}=rt(U(w({},h7e(e,s)),{enabled:p}));if(i==null)return{promptStarters:[],isLoading:!0,isSuccess:!1};if(g==="test"&&m)return{promptStarters:(k=vy(m))!=null?k:[],isLoading:!1,isSuccess:!0};if(f!=null)return{promptStarters:vy(f),isLoading:!1,isSuccess:!0};if(!p)return{promptStarters:[],isLoading:!1,isSuccess:!0};const v=(T=h==null?void 0:h.items.map(M=>({type:Je.Starter,id:M.id,title:M.title,body:M.description,prompt:M.prompt,category:M.category,oneliner:M.oneliner,theme:M.theme,requires_file_upload:M.requires_file_upload})))!=null?T:[],y=(M,A,I,N)=>{const L=Pt(o);if(A.type===Je.Starter&&A.category==="dalle"){requestAnimationFrame(()=>{c(),d(Pe.PictureV2,!0,{}),no(L)}),a.set(a7e(l));return}const O=A.title;a.set([]),L.focus(),_o(L,O),requestAnimationFrame(()=>{const D=v.filter($=>$.theme===A.theme).map($=>{const H=Ks($.oneliner),G=H.startsWith($.title);return U(w({},$),{title:G?"".concat($.title," "):"",body:G?$.body:H,autocompletionChunks:g7e(O,H),type:Je.Autocomplete})});a.set(D),Kh(A,N,t)})},b=v==null?void 0:v.reduce((M,A)=>(A.theme&&!M[A.theme]&&(M[A.theme]=A),M),{}),C=[];if(b)for(const M in b)M!=="For you"&&C.push(b[M]);const S=C.length>0,E=n&&x&&S;return n&&(xa.markStart("StarterPromptChips",xa.NS_COMPOSER),E&&xa.markRendered("StarterPromptChips",xa.NS_COMPOSER)),{onSelectStarterPrompt:y,shouldShowStarterPrompts:E,promptStarters:C}};function W5(t,e=!1){const n=Cr(t),s=n.getLayer("4031588851",{disableExposureLog:!e}),o=n.getLayer("3533083032",{disableExposureLog:!e});return tt(t)?s:o}const vs=Se({add_picture_do_rest:{id:"india-viral-image-gen-prompts.add_picture_do_rest",defaultMessage:"Just add a picture  ChatGPT will do the rest."},navratri_title:{id:"india-viral-image-gen-prompts.navratri.title",defaultMessage:"Navratri Garba Glow"},navratri_oneliner:{id:"india-viral-image-gen-prompts.navratri.oneliner",defaultMessage:"Garba night photo, styled for you"},navratri_prompt:{id:"india-viral-image-gen-prompts.navratri.prompt",defaultMessage:"Transform us into a Garba dance celebration, wearing colorful chaniya cholis and kediyus, ready to dance under strings of fairy lights in a festive ground."},diwali_title:{id:"india-viral-image-gen-prompts.diwali.title",defaultMessage:"Diwali Family Lights"},diwali_oneliner:{id:"india-viral-image-gen-prompts.diwali.oneliner",defaultMessage:"Create a Diwali card from your photo"},diwali_prompt:{id:"india-viral-image-gen-prompts.diwali.prompt",defaultMessage:"Change the photo to us wearing traditional clothes, participating in a Diwali celebration. Glowing 'Happy Diwali From [Insert Name]' text written in background with shining letters floats in the air. Make it a slightly stylized festive illustration."},childrens_title:{id:"india-viral-image-gen-prompts.childrens.title",defaultMessage:"Children's Day Story"},childrens_oneliner:{id:"india-viral-image-gen-prompts.childrens.oneliner",defaultMessage:"Make a playful Childrens Day card"},childrens_prompt:{id:"india-viral-image-gen-prompts.childrens.prompt",defaultMessage:"Create a Happy Children's Day greeting card in a photo surrealistic style. The photo looks like there is a big open book with the greeting written on it and the children are playing on swings and slides around it. There are rainbows and confetti all around."},christmas_title:{id:"india-viral-image-gen-prompts.christmas.title",defaultMessage:"Christmas Wonderland Card"},christmas_oneliner:{id:"india-viral-image-gen-prompts.christmas.oneliner",defaultMessage:"Make a snowy family Christmas card"},christmas_prompt:{id:"india-viral-image-gen-prompts.christmas.prompt",defaultMessage:'Make the family celebrate Christmas in a detailed snowy winter wonderland Christmas card style with "Merry Christmas from the [Insert Name]" written in the background.'},cricket_title:{id:"india-viral-image-gen-prompts.cricket.title",defaultMessage:"Cricket Festival Street"},cricket_oneliner:{id:"india-viral-image-gen-prompts.cricket.oneliner",defaultMessage:"Get a custom match-day photo"},cricket_prompt:{id:"india-viral-image-gen-prompts.cricket.prompt",defaultMessage:"Generate a vibrant Indian festival street scene with me included in the celebration and fans in blue jerseys dancing Garba and waving flags, colorful gulal (powder) flying in the air, and a glowing banner reading 'Chak De India' in beautiful English calligraphy."}});function ZJe(){"use forget";var g;const t=W.c(16),e=V(),n=ne();let s;if(t[0]!==e){const{country:p}=bd(e);s=(p!=null?p:"").toUpperCase(),t[0]=e,t[1]=s}else s=t[1];const o=s;let a;if(t[2]!==n||t[3]!==o){const p=n.formatMessage(vs.add_picture_do_rest),h=v7e,x=C=>{var k;const S=(k=C.trending_target_countries)!=null?k:[];return S.length===0||o===""?!1:new Set(S.map(y7e)).has(o)},y=[{type:Je.Trending,id:"india_viral_navratri_garba",title:n.formatMessage(vs.navratri_title),body:p,oneliner:n.formatMessage(vs.navratri_oneliner),prompt:n.formatMessage(vs.navratri_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-21T18:30:00Z",end_time_utc:"2025-10-02T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-2@2x.png"}],theme:vn.ImageGenTrending,source:"CURATED"},{type:Je.Trending,id:"india_viral_diwali_family_glow",title:n.formatMessage(vs.diwali_title),body:p,oneliner:n.formatMessage(vs.diwali_oneliner),prompt:n.formatMessage(vs.diwali_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-10-14T18:30:00Z",end_time_utc:"2025-10-22T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-2@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-3@2x.png"}],theme:vn.ImageGenTrending,source:"CURATED"},{type:Je.Trending,id:"india_viral_childrens_day_card",title:n.formatMessage(vs.childrens_title),body:p,oneliner:n.formatMessage(vs.childrens_oneliner),prompt:n.formatMessage(vs.childrens_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-11-11T18:30:00Z",end_time_utc:"2025-11-14T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/childrens-day@2x.png"}],theme:vn.ImageGenTrending,source:"CURATED"},{type:Je.Trending,id:"india_viral_christmas_card",title:n.formatMessage(vs.christmas_title),body:p,oneliner:n.formatMessage(vs.christmas_oneliner),prompt:n.formatMessage(vs.christmas_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-12-24T18:30:00Z",end_time_utc:"2025-12-25T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/christmas@2x.png"}],theme:vn.ImageGenTrending,source:"CURATED"},{type:Je.Trending,id:"india_viral_cricket_festival",title:n.formatMessage(vs.cricket_title),body:p,oneliner:n.formatMessage(vs.cricket_oneliner),prompt:n.formatMessage(vs.cricket_prompt),category:"dalle",systemHints:[Pe.PictureV2],requires_dalle:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-08T18:30:00Z",end_time_utc:"2025-09-28T18:29:59Z"},{start_time_utc:"2025-10-18T18:30:00Z",end_time_utc:"2025-10-19T18:29:59Z"},{start_time_utc:"2025-10-22T18:30:00Z",end_time_utc:"2025-10-23T18:29:59Z"},{start_time_utc:"2025-10-24T18:30:00Z",end_time_utc:"2025-10-25T18:29:59Z"},{start_time_utc:"2025-10-28T18:30:00Z",end_time_utc:"2025-10-29T18:29:59Z"},{start_time_utc:"2025-10-30T18:30:00Z",end_time_utc:"2025-10-31T18:29:59Z"},{start_time_utc:"2025-11-01T18:30:00Z",end_time_utc:"2025-11-02T18:29:59Z"},{start_time_utc:"2025-11-05T18:30:00Z",end_time_utc:"2025-11-06T18:29:59Z"},{start_time_utc:"2025-11-07T18:30:00Z",end_time_utc:"2025-11-08T18:29:59Z"},{start_time_utc:"2025-11-29T18:30:00Z",end_time_utc:"2025-11-30T18:29:59Z"},{start_time_utc:"2025-12-02T18:30:00Z",end_time_utc:"2025-12-03T18:29:59Z"},{start_time_utc:"2025-12-05T18:30:00Z",end_time_utc:"2025-12-06T18:29:59Z"},{start_time_utc:"2025-12-08T18:30:00Z",end_time_utc:"2025-12-09T18:29:59Z"},{start_time_utc:"2025-12-10T18:30:00Z",end_time_utc:"2025-12-11T18:29:59Z"},{start_time_utc:"2025-12-13T18:30:00Z",end_time_utc:"2025-12-14T18:29:59Z"},{start_time_utc:"2025-12-16T18:30:00Z",end_time_utc:"2025-12-17T18:29:59Z"},{start_time_utc:"2025-12-18T18:30:00Z",end_time_utc:"2025-12-19T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/cricket@2x.png"}],theme:vn.ImageGenTrending,source:"CURATED"}].filter(C=>x(C)&&h(C)),b=x7e;a=y.filter(b),t[2]=n,t[3]=o,t[4]=a}else a=t[4];const i=a,l=i[Math.floor(Math.random()*i.length)];if(!l){let p;return t[5]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[5]=p):p=t[5],p}const c=l.oneliner;let d;t[6]!==c||t[7]!==l?(d=c?U(w({},l),{title:c}):l,t[6]=c,t[7]=l,t[8]=d):d=t[8];const u=d,f=u.example_image_urls;if(Array.isArray(f)&&f.length>0){const p=f[Math.floor(Math.random()*f.length)];let h;t[9]!==p?(h=(g=p==null?void 0:p["320_2x"])!=null?g:p?Object.values(p)[0]:void 0,t[9]=p,t[10]=h):h=t[10];const x=h;if(typeof x=="string"&&x.length>0){let v;return t[11]!==u||t[12]!==x?(v=[U(w({},u),{coverImageUrl:x})],t[11]=u,t[12]=x,t[13]=v):v=t[13],v}}let m;return t[14]!==u?(m=[u],t[14]=u,t[15]=m):m=t[15],m}function x7e(t){var e;return(e=t.systemHints)==null?void 0:e.includes(Pe.PictureV2)}function y7e(t){return t.toUpperCase()}function v7e(t){var s;const e=(s=t.trending_schedule_utc)!=null?s:[];if(e.length===0)return!1;const n=new Date;for(const o of e){const a=o.start_time_utc,i=o.end_time_utc;if(!a||!i)continue;const l=new Date(a),c=new Date(i);if(l<=n&&n<=c)return!0}return!1}const WF=$f(()=>{const t=Be(!1);let e=null;const n=o=>{e&&(clearTimeout(e),e=null),t.set(o)};return{shouldHighlight$:t,setShouldHighlight:n,flashHighlight:(o=4e3)=>{n(!0),e=setTimeout(()=>{t.set(!1),e=null},o)}}});function b7e(){"use forget";const t=W.c(3),{store:e}=Ld(),n=$s();let s;return t[0]!==n||t[1]!==e?(s=(o,a,i,l)=>{const c=e.getSharedProps(),d=c==null?void 0:c.composerController;if(!d)return;const u=po(a);if(u==null)return;const f="systemHints"in a?a.systemHints:void 0,m=f&&f.length>0?f[0]:void 0;if(m){const x=c!=null&&c.clientThreadId?{clientThreadId:c.clientThreadId}:void 0;n(m,w({},x?{analyticsMetadata:x}:{}))}if((a.type===Je.Starter||a.type===Je.Autocomplete||a.type===Je.Trending)&&a.requires_file_upload===!0){const{flashHighlight:x}=WF(d);x()}o.preventDefault();const p=Pt(d);_o(p,u),p.focus();const h=c==null?void 0:c.clientThreadId;h&&Kh(a,l,h)},t[0]=n,t[1]=e,t[2]=s):s=t[2],s}function KJe({label:t,onClick:e,disabled:n=!1,icon:s,rightIcon:o}){return r.jsxs("button",{className:"group border-token-border-default enabled:hover:bg-token-main-surface-secondary relative flex h-[42px] items-center gap-1.5 rounded-full border px-3 py-2 text-start text-[13px] transition disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]",disabled:n,onClick:e,children:[s,r.jsx("span",{className:"group-hover:text-token-text-primary max-w-full whitespace-nowrap text-gray-600 transition select-none dark:text-gray-500",children:t}),o]})}const QJe=()=>Vn().pathname==="/new-tab-page";function JJe({starterPrompt:t,allPrompts:e,index:n,disabled:s,className:o}){var g;const a=Od(),i=b7e(),l=(g=t.body)!=null?g:t.title,c=p=>{var x;((x=t.systemHints)==null?void 0:x.includes(Pe.PictureV2))&&t.requires_file_upload?i(p,t,e,n):a(p,t,e,n)},d=t.iconImageUrl,u=t.coverImageUrl,f=t.accentColor,m=f&&u?{backgroundColor:f}:void 0;return r.jsxs("button",{disabled:s,onClick:c,className:z("group relative flex aspect-[4/3] items-end overflow-hidden rounded-2xl border p-3 text-start transition","border-token-border-default enabled:hover:bg-token-interactive-bg-secondary-hover shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] disabled:opacity-60",o),style:m,"aria-label":l,children:[!d&&u&&r.jsxs(r.Fragment,{children:[r.jsx("img",{src:u,alt:"","aria-hidden":"true",className:"absolute inset-0 h-full w-full object-cover object-center"}),r.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"})]}),r.jsx("div",{className:"absolute start-3 top-3",children:d?r.jsx("img",{src:d,alt:"","aria-hidden":"true",className:"h-10 w-10 rounded-md sm:h-12 sm:w-12"}):null}),r.jsx("div",{className:"pointer-events-none absolute start-3 end-3 bottom-3 select-none",children:r.jsx("div",{className:z("line-clamp-2 text-sm leading-tight sm:text-base",u?"text-white":"text-token-text-primary"),children:l})})]})}R(()=>P(()=>import("./nfz1ta7916xrx1ej.js"),__vite__mapDeps([197,1])),{loading:t=>F(t)});const by=Oe.hasSeenGoldenHourAnnouncement;function C7e(){"use forget";var C,S,E;const t=W.c(6),e=V();let n;t[0]!==e?(n=es(e),t[0]=e,t[1]=n):n=t[1];const s=n,o=st(e),a=ln();let i;t[2]!==a?(i=a!=null&&Sh(a),t[2]=a,t[3]=i):i=t[3];const l=i,{eligible:c,isLoading:d}=lt(by),u=Ai();let f;t[4]!==e?(f=Nj(e),t[4]=e,t[5]=f):f=t[5];const m=f,{data:g}=Vf(void 0,!1,u),p=(C=g==null?void 0:g.memoryFullPct)!=null?C:0,h=(S=o==null?void 0:o.isFree())!=null?S:!1,x=(E=o==null?void 0:o.isGo())!=null?E:!1,b=l||p>=(h||x?95:90);return c&&!d&&m&&b&&!s}function XJe(){"use forget";const t=W.c(4),e=V(),n=C7e(),{eligible:s}=lt(by);let o;return t[0]!==n||t[1]!==e||t[2]!==s?(o=()=>{!n||!s||(Ie.count(je.GOLDEN_HOUR,"announcement_banner.implicit_close"),ot(e,by))},t[0]=n,t[1]=e,t[2]=s,t[3]=o):o=t[3],o}const h7=R(()=>P(()=>import("./sdlnf7jr8n8l1kbs.js"),__vite__mapDeps([140,1])),{loading:t=>F(t)}),nt=window.sessionStorage,zF=4320*60*1e3,qF=1440*60*1e3;function S7e(){const t=(nt==null?void 0:nt.getItem(Ue.MemoryFullBannerDismissed))==="true",e=nt==null?void 0:nt.getItem(Ue.MemoryFullBannerDismissedTimestamp);if(!t)return e!=null&&(nt==null||nt.removeItem(Ue.MemoryFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return nt==null||nt.removeItem(Ue.MemoryFullBannerDismissed),{dismissed:!1,timestamp:null};const n=Number.parseInt(e,10),s=Number.isFinite(n)&&n>=0?n:null;return s==null?(nt==null||nt.removeItem(Ue.MemoryFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-s>=qF?(nt==null||nt.removeItem(Ue.MemoryFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:s}}function w7e(){const t=(nt==null?void 0:nt.getItem(Ue.MemoryAlmostFullBannerDismissed))==="true",e=nt==null?void 0:nt.getItem(Ue.MemoryAlmostFullBannerDismissedTimestamp);if(!t)return e!=null&&(nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissed),{dismissed:!1,timestamp:null};const n=Number.parseInt(e,10),s=Number.isFinite(n)&&n>=0?n:null;return s==null?(nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-s>=zF?(nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:s}}const ni=Ft(Mn(()=>{const{dismissed:t,timestamp:e}=S7e(),{dismissed:n,timestamp:s}=w7e();return{memoryFullBannerDismissed:t,memoryFullBannerDismissedTimestamp:e,memoryAlmostFullBannerDismissed:n,memoryAlmostFullBannerDismissedTimestamp:s}})),ml={dismissBanner(){const t=Date.now();ni.setState(e=>{e.memoryFullBannerDismissed=!0,e.memoryFullBannerDismissedTimestamp=t}),nt==null||nt.setItem(Ue.MemoryFullBannerDismissed,"true"),nt==null||nt.setItem(Ue.MemoryFullBannerDismissedTimestamp,t.toString())},dismissAlmostFullBanner(){const t=Date.now();ni.setState(e=>{e.memoryAlmostFullBannerDismissed=!0,e.memoryAlmostFullBannerDismissedTimestamp=t}),nt==null||nt.setItem(Ue.MemoryAlmostFullBannerDismissed,"true"),nt==null||nt.setItem(Ue.MemoryAlmostFullBannerDismissedTimestamp,t.toString())},clearDismissedBanner(){ni.setState(t=>{t.memoryFullBannerDismissed=!1,t.memoryFullBannerDismissedTimestamp=null}),nt==null||nt.removeItem(Ue.MemoryFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryFullBannerDismissedTimestamp)},clearAlmostFullDismissedBanner(){ni.setState(t=>{t.memoryAlmostFullBannerDismissed=!1,t.memoryAlmostFullBannerDismissedTimestamp=null}),nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissed),nt==null||nt.removeItem(Ue.MemoryAlmostFullBannerDismissedTimestamp)}};function eXe(t){var D,$;const e=K3(t),n=Es(),s=p1(),{data:o}=Vf(e,!1,s),a=V(),i=Ai(),l=Cv(a,o==null?void 0:o.memoryFullPct,!0),c=typeof l=="object"?l.layer:"control",d=typeof l=="object"?l.threshold:Xi,u=Ve(t,H=>he.findNode(H,G=>G.message.author.role===Ke.Tool&&G.message.author.name==="bio")),m=Ve(t,H=>!H||H.isLoading)&&!!t,g=(D=u==null?void 0:u.message.metadata)==null?void 0:D.memory_percentage_used,p=_.useRef(void 0),h=_.useRef(!1),[x,v]=_.useState(!1);_.useEffect(()=>{if(m)return;const H=u==null?void 0:u.message.id;if(!h.current){p.current=H!=null?H:null,h.current=!0;return}H&&H!==p.current&&Promise.resolve().then(()=>v(!0))},[m,u==null?void 0:u.message.id]);const y=g!=null?g*100:null,b=($=o==null?void 0:o.memoryFullPct)!=null?$:null,C=x?y!=null:b!=null,S=x?y!=null?y:0:b!=null?b:0,E=C&&S>=d,[k,T]=_.useState(!E);_.useEffect(()=>{x&&T(!0)},[x]);const[M,A]=_.useState(!1),I=_.useRef(null),N=_.useRef(!1);_.useEffect(()=>{var G;if(!C)return;const H=(G=I.current)!=null?G:-1/0;I.current=S,H<Xi&&S>=Xi&&(N.current=!0,Promise.resolve().then(()=>A(!0))),S<Xi&&N.current&&(N.current=!1,Promise.resolve().then(()=>A(!1)),Promise.resolve().then(()=>T(!0)))},[C,S,M]);const L=ni(H=>H.memoryAlmostFullBannerDismissed),O=ni(H=>H.memoryAlmostFullBannerDismissedTimestamp);switch(_.useEffect(()=>{if(!L||O==null)return;const H=Date.now()-O,G=zF-H;if(G<=0){ml.clearAlmostFullDismissedBanner();return}const Z=window.setTimeout(()=>{ml.clearAlmostFullDismissedBanner()},G);return()=>{window.clearTimeout(Z)}},[L,O]),c){case"control":return{shouldShowMemoryAlmostFull:!1};case"treatment_upsell_on_convo_start":return{shouldShowMemoryAlmostFull:!n&&i&&E&&k&&!L&&S<100};case"treatment_upsell_on_bio_tool":return{shouldShowMemoryAlmostFull:!n&&i&&E&&x&&k&&!L&&S<100};default:return{shouldShowMemoryAlmostFull:!1}}}function tXe(t){"use forget";var te,ae;const e=W.c(27),n=K3(t),s=V(),o=Es(),a=p1(),{data:i}=Vf(n,!1,a),l=Ai(),c=Cv(s,i==null?void 0:i.memoryFullPct),d=Ve(t,A7e),f=Ve(t,M7e)&&!!t,m=(te=d==null?void 0:d.message.metadata)==null?void 0:te.memory_percentage_used,g=_.useRef(void 0),p=_.useRef(!1),[h,x]=_.useState(!1),v=m!=null?m*100:null,y=(ae=i==null?void 0:i.memoryFullPct)!=null?ae:null,b=h?v!=null:y!=null,C=h?v!=null?v:0:y!=null?y:0,S=b&&C>=zm,[E,k]=_.useState(!S),[T,M]=_.useState(!1),A=_.useRef(null),I=_.useRef(!1);let N,L;e[0]!==h?(N=()=>{h&&k(!0)},L=[h],e[0]=h,e[1]=N,e[2]=L):(N=e[1],L=e[2]),_.useEffect(N,L);let O;e[3]!==(d==null?void 0:d.message.id)||e[4]!==f?(O=()=>{if(f)return;const se=d==null?void 0:d.message.id;if(!p.current){g.current=se!=null?se:null,p.current=!0;return}se&&se!==g.current&&Promise.resolve().then(()=>x(!0))},e[3]=d==null?void 0:d.message.id,e[4]=f,e[5]=O):O=e[5];const D=d==null?void 0:d.message.id;let $;e[6]!==f||e[7]!==D?($=[f,D],e[6]=f,e[7]=D,e[8]=$):$=e[8],_.useEffect(O,$);let H;e[9]!==C||e[10]!==b?(H=()=>{var ce;if(!b)return;const se=(ce=A.current)!=null?ce:-1/0;A.current=C,se<zm&&C>=zm&&(I.current=!0,Promise.resolve().then(()=>M(!0))),C<zm&&I.current&&(I.current=!1,Promise.resolve().then(()=>M(!1)),Promise.resolve().then(()=>k(!0)))},e[9]=C,e[10]=b,e[11]=H):H=e[11];let G;e[12]!==C||e[13]!==b||e[14]!==T?(G=[b,C,T],e[12]=C,e[13]=b,e[14]=T,e[15]=G):G=e[15],_.useEffect(H,G);const Z=ni(T7e),Q=ni(E7e);let q,Y;switch(e[16]!==Z||e[17]!==Q?(q=()=>{if(!Z||Q==null)return;const se=Date.now()-Q,ce=qF-se;if(ce<=0){ml.clearDismissedBanner();return}const X=window.setTimeout(k7e,ce);return()=>{window.clearTimeout(X)}},Y=[Z,Q],e[16]=Z,e[17]=Q,e[18]=q,e[19]=Y):(q=e[18],Y=e[19]),_.useEffect(q,Y),c){case"control":{const se=!o&&l?S&&E&&!Z:!1;let ce;return e[20]!==se?(ce={shouldShowMemoryFull:se},e[20]=se,e[21]=ce):ce=e[21],ce}case"treatment_upsell_on_convo_start":{const se=!o&&l?S&&!Z:!1;let ce;return e[22]!==se?(ce={shouldShowMemoryFull:se},e[22]=se,e[23]=ce):ce=e[23],ce}case"treatment_upsell_on_bio_tool":{const se=!o&&l?S&&h&&!Z:!1;let ce;return e[24]!==se?(ce={shouldShowMemoryFull:se},e[24]=se,e[25]=ce):ce=e[25],ce}default:{let se;return e[26]===Symbol.for("react.memo_cache_sentinel")?(se={shouldShowMemoryFull:!1},e[26]=se):se=e[26],se}}}function k7e(){ml.clearDismissedBanner()}function E7e(t){return t.memoryFullBannerDismissedTimestamp}function T7e(t){return t.memoryFullBannerDismissed}function M7e(t){return!t||t.isLoading}function A7e(t){return he.findNode(t,I7e)}function I7e(t){return t.message.author.role===Ke.Tool&&t.message.author.name==="bio"}function nXe({memoryAlmostFullVariant:t}={}){const e=ne(),{openSettings:n}=Qf(),s=at(),o=V(),a=st(o),i=a==null?void 0:a.isFree(),l=cK(o,!0),c=l!=="control",d=e.formatMessage(No.getMore),u=()=>{var m;if(typeof window<"u")try{(m=window.sessionStorage)==null||m.setItem(uN,"true")}catch(g){}};_.useEffect(()=>{t?c&&B.logEventWithStatsig("Memory Banner Almost Full Shown","chatgpt_memory_banner_almost_full_shown",{variant:l,threshold:Xi}):B.logEventWithStatsig("Memory Banner Full Shown","chatgpt_memory_banner_full_shown",{variant:l})},[c,t,l]);const f=m=>{B.logEventWithStatsig("Memory Banner Upgrade Clicked","chatgpt_memory_banner_upgrade_clicked",{variant:l,surface:m}),pn(s,"Memory Full Banner")};if(t){if(!i||!c)return null;const m=r.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[r.jsx(ye,{color:"secondary",onClick:()=>{B.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"almost_full"}),u(),n(Pn.Personalization)},children:e.formatMessage(No.memoryManageButton)}),r.jsx(ye,{color:"primary",onClick:()=>f("almost_full"),children:d})]});return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(_n,{title:e.formatMessage(No.memoryAlmostFullTitleTreatment),icon:r.jsx(h7,{className:"h-6 w-6"}),content:e.formatMessage(No.memoryAlmostFullTreatmentBody),customCtas:m,onDismiss:()=>ml.dismissAlmostFullBanner()})})}if(c){const m=r.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[r.jsx(ye,{color:"secondary",onClick:()=>{B.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"almost_full"}),u(),n(Pn.Personalization)},children:e.formatMessage(No.memoryManageButton)}),r.jsx(ye,{color:"primary",onClick:()=>f("almost_full"),children:d})]});return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(_n,{icon:r.jsx(h7,{className:"h-6 w-6"}),title:e.formatMessage(No.memoryFullTitleTreatment),content:e.formatMessage(No.memoryFullTreatmentBody),customCtas:m,onDismiss:()=>ml.dismissBanner()})})}return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(_n,{title:e.formatMessage(No.memoryFullTitleControl),content:e.formatMessage(No.memoryFullTooltipControl,No.memoryFullTooltipControl.values),primaryCtaText:e.formatMessage(No.memoryManageButton),onPrimaryCtaClick:()=>{B.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"full"}),n(Pn.Personalization)},onDismiss:()=>ml.dismissBanner()})})}const No=Se({memoryFullTitleControl:{id:"xzFgrm",defaultMessage:"ChatGPT's out of space for saved memories"},memoryFullTitleTreatment:{id:"61wRTj",defaultMessage:"Memory full"},memoryFullTreatmentBody:{id:"bGCh/f",defaultMessage:"Responses may feel less personalized. Upgrade to expand memory, or manage existing memories."},getMore:{id:"LdblxY",defaultMessage:"Get more"},getMoreTreatment:{id:"zq5dLI",defaultMessage:"Upgrade"},memoryManageButton:{id:"a5A88o",defaultMessage:"Manage"},memoryAlmostFullTitleTreatment:{id:"2IibCN",defaultMessage:"Memory almost full"},memoryAlmostFullTreatmentBody:{id:"2wtxF6",defaultMessage:"Once memory is full, responses will feel less personalized. Upgrade to expand memory, or manage existing memories."},memoryTooltipVariant:{id:"h72m3Z",defaultMessage:"<link>Manage</link> saved memories or upgrade to {planType} to get more.",values:{link:t=>r.jsx(wo,{to:Al(Pn.Personalization),className:"underline",children:t})}},memoryFullTooltipControl:{id:"I1DjDy",defaultMessage:"New memories wont be added until you make space. <a>Learn more</a>",values:{a:t=>r.jsx("a",{href:rK,target:"_blank",rel:"noopener noreferrer",className:"underline",children:t})}}});function sXe(t){return ze(t,"3637408529").get("is_secondary_auth_banner_button_enabled",!1)}function YF(t){var e,n,s;return(s=(n=(e=t.metadata)==null?void 0:e.dalle)==null?void 0:n.prompt)!=null?s:""}async function j7e(t,e,n="image/png"){return new Promise((s,o)=>{t.toBlob(a=>{a!=null?s(new File([a],e,{type:n})):o(new Error("Failed to convert canvas to blob"))},n)})}async function N7e(t,e){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const s=n.getContext("2d");if(s==null)throw new Error("Failed to get 2d context for mask canvas");const o=s.createImageData(t.width,t.height);for(let a=0;a<t.data.length;a+=4)t.data[a+3]!==0?(o.data[a]=0,o.data[a+1]=0,o.data[a+2]=0,o.data[a+3]=255):(o.data[a]=255,o.data[a+1]=255,o.data[a+2]=255,o.data[a+3]=255);return s.putImageData(o,0,0),j7e(n,e)}async function P7e(t,e){const s=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=e,o.click(),o.remove()}function R7e(t){const e=QW(new Date,"yyyy-MM-dd HH.mm.ss");let n=t.slice(0,150);return n.endsWith(".")&&(n=n.slice(0,-1)),"DALLE ".concat(e," - ").concat(n,".webp")}async function L7e(t,e,n,s=!1){var l,c,d,u,f,m,g,p,h,x,v,y,b,C,S,E,k,T,M,A,I,N;const o=YF(t),a=R7e(o);await P7e(t.url,a);const i=s?"chatgpt_dalle_image_captioning_download":"chatgpt_dalle_image_download";qe.logEvent(i,null,{sourceOperation:(d=(c=(l=t.metadata)==null?void 0:l.dalle)==null?void 0:c.edit_op)!=null?d:"none",hasParent:((f=(u=t.metadata)==null?void 0:u.dalle)==null?void 0:f.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent(i,{conversationId:e,messageId:n,generationId:(g=(m=t.metadata)==null?void 0:m.dalle)==null?void 0:g.gen_id,parentGenerationId:(h=(p=t.metadata)==null?void 0:p.dalle)==null?void 0:h.parent_gen_id,fileId:Co(t.asset_pointer),sourceOperation:(v=(x=t.metadata)==null?void 0:x.dalle)==null?void 0:v.edit_op,model:"dalle"}),qe.logEvent("chatgpt_image_download",null,{sourceOperation:(C=(b=(y=t.metadata)==null?void 0:y.dalle)==null?void 0:b.edit_op)!=null?C:"none",hasParent:((E=(S=t.metadata)==null?void 0:S.dalle)==null?void 0:E.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent("chatgpt_image_download",{conversationId:e,messageId:n,generationId:(T=(k=t.metadata)==null?void 0:k.dalle)==null?void 0:T.gen_id,parentGenerationId:(A=(M=t.metadata)==null?void 0:M.dalle)==null?void 0:A.parent_gen_id,fileId:Co(t.asset_pointer),sourceOperation:(N=(I=t.metadata)==null?void 0:I.dalle)==null?void 0:N.edit_op,model:"dalle"})}function oXe(t){const e=OM(t),n=T1(),s=e&&"gizmo"in e?e.gizmo:void 0;return!n&&(s==null?void 0:s.gizmo.id)===KW}function O7e(t,e){var o,a;const n=(a=(o=e.metadata)==null?void 0:o.dalle)==null?void 0:a.gen_id,s=Co(e.asset_pointer);return s==null||n==null?t:Hd(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"transformation",original_gen_id:n,original_file_id:s}}}}}})}async function D7e(t,e,n,s){return new Promise((o,a)=>{JW(il(t),t,e,n,{kind:XW.DalleAgent},{onFileCreated:as,onFileUploadProgress:as,onFileUploaded:(i,l)=>o(l),onError:(i,l)=>{a(new Error("Failed to upload file with reason: ".concat(l)))}},s)})}async function F7e(t,e,n,s,o){var l,c;const a=(c=(l=e.metadata)==null?void 0:l.dalle)==null?void 0:c.gen_id,i=Co(e.asset_pointer);if(i==null||a==null||n==null)return t;try{const d=await N7e(n,"mask.png"),u=await D7e(d,s,o,{imageDimensions:{width:e.width,height:e.height}});return Hd(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"inpainting",original_gen_id:a,original_file_id:i,mask_file_id:u}}}}}})}catch(d){return Fe.addError(d),t}}async function B7e(t,e,n,s,o){return await Promise.all(e.map(a=>qd.fetch(t,{asset:a,sharedThreadId:n,gizmoId:s,conversationId:o}))).catch(a=>{const i=e.map(l=>Co(l.asset_pointer));throw Fe.addError(new Error("Could not fetch files with IDs ".concat(i," from file service"),{cause:a})),a})}function aXe(t){const e=V(),n=uO(e),s=v1(C1.getMaxBannerClientThreadId);return!(!n||s!==t)}let Fa="";const _7={setSessionId(t){Fa=t},logImpression(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.impression"),Fe.addAction("tasks.notification.impression"),B.logEvent("tasks:notification.impression",{logging_session_id:Fa})},logNotNow(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.not_now"),Fe.addAction("tasks.notification.not_now"),B.logEvent("tasks:notification.not_now",{logging_session_id:Fa})},logAllow(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.allow"),Fe.addAction("tasks.notification.allow"),B.logEvent("tasks:notification.allow",{logging_session_id:Fa})},logSystemDeny(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.system_deny"),Fe.addAction("tasks.notification.system_deny"),B.logEvent("tasks:notification.system_deny",{logging_session_id:Fa})},logSystemAllow(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.system_allow"),Fe.addAction("tasks.notification.system_allow"),B.logEvent("tasks:notification.system_allow",{logging_session_id:Fa})},logSystemSuccess(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.system_success"),Fe.addAction("tasks.notification.system_success"),B.logEvent("tasks:notification.system_success",{logging_session_id:Fa})},logRegistration(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.registration"),Fe.addAction("tasks.notification.registration"),B.logEvent("tasks:notification.registration",{logging_session_id:Fa})},logErrorDismissed(){Ie.count(je.JAWBONE,"jawbone_notifications_banner.error_dismissed"),Fe.addAction("tasks.notification.error_dismissed"),B.logEvent("tasks:notification.error_dismissed",{logging_session_id:Fa})}},Hc=window.localStorage,z5=Ft(Mn(()=>{var t;return{initialized:!1,requestingClientThreadId:null,previouslyRequestedClientThreadIds:new Set,lastRequestTime:(t=Hc==null?void 0:Hc.getItem("oai/apps/jawboneNotificationLastRequestTime"))!=null?t:null,permission:typeof window<"u"&&"Notification"in window?Notification.permission:"default"}})),Hg=z5.getState,pg=z5.setState,rXe={initIfNeeded:(t=Hg())=>{var e;t.initialized||(pg({initialized:!0}),typeof window<"u"&&"Notification"in window&&((e=navigator.permissions)==null||e.query({name:"notifications"}).then(n=>{n.onchange=()=>{switch(Notification.permission){case"granted":_7.logSystemAllow();break;case"denied":_7.logSystemDeny();break}pg({permission:Notification.permission})}})))},setRequestingClientThreadId:t=>{pg(e=>{e.previouslyRequestedClientThreadIds.has(t)||(e.requestingClientThreadId=t,e.previouslyRequestedClientThreadIds.add(t))})},clearNotificationRequest:()=>{pg(t=>{if(t.requestingClientThreadId){const e=new Date().toISOString();t.lastRequestTime=e,Hc==null||Hc.setItem("oai/apps/jawboneNotificationLastRequestTime",e)}t.requestingClientThreadId=null})}},U7e={getRequestingClientThreadId:(t=Hg())=>t.requestingClientThreadId,getLastRequestTime:(t=Hg())=>t.lastRequestTime,getPermission:(t=Hg())=>t.permission};function iXe(t){const{requestingClientThreadId:e}=z5(o=>({requestingClientThreadId:U7e.getRequestingClientThreadId(o)})),n=V();return!(!uO(n)||t!==e)}const $7e=R(()=>P(()=>import("./ex1n2bj1ipe6e9yn.js"),__vite__mapDeps([353,1,10,11])).then(t=>t.BeaconModal));function lXe(t){"use forget";const e=W.c(16),{clientThreadId:n,composerController:s,openFileDialog:o}=t,a=Jq(),i=V();let l;e[0]!==n||e[1]!==i?(l=()=>xf(n,i),e[0]=n,e[1]=i,e[2]=l):l=e[2];const c=l,d=y5(c),u=v5(c),f=_.useRef(!1),m=Ve(n,he.getCurrentLeafId),g=gr.useStore();let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{f.current=!1},e[3]=p):p=e[3];let h;e[4]!==m?(h=[m],e[4]=m,e[5]=h):h=e[5],_.useEffect(p,h);let x,v;e[6]!==u||e[7]!==d||e[8]!==n||e[9]!==s||e[10]!==i||e[11]!==a||e[12]!==o||e[13]!==g?(x=()=>{if(!a||f.current)return;f.current=!0,B.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:a.beacon_id,beacon_name:a.beacon_name,beacon_type:"modal"}),d.mutate(a.beacon_id),dt(i,$7e,{onDismiss:()=>{var b,C;B.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:a.beacon_id,beacon_name:a.beacon_name,beacon_type:"modal"}),u.mutate(a.beacon_id),hi.dismiss(),a.beacon_id==="free_trial_upsell_modal_beacon"&&ot(i,((C=(b=a.action_items)==null?void 0:b[1])==null?void 0:C.id)==="plus_free_trial_upsell_modal_beacon_try_plus"?Oe.hasSeenFreeTrialUpsellModal:Oe.hasSeenGoFreeTrialUpsellModal)},modalInfo:a,clientThreadId:n,composerController:s,persistedSystemHintsStore:g,openFileDialog:o})},v=[a,i,d,u,n,s,g,o],e[6]=u,e[7]=d,e[8]=n,e[9]=s,e[10]=i,e[11]=a,e[12]=o,e[13]=g,e[14]=x,e[15]=v):(x=e[14],v=e[15]),_.useEffect(x,v)}function cXe(){var l;const t=V(),e=ve(t,"727502549"),n=ve(t,"550432558"),{eligible:s}=lt(Oe.hasSeenReferralUpsellAnnouncement),{data:o}=mN(s),a=ze(t,"1976075658"),i=((l=o==null?void 0:o.info)==null?void 0:l.program_name)==="colombia"?a.get("show_banner",!1):!0;return e&&n&&i&&s&&!!(o!=null&&o.info)}function dXe(){var d;const t=V(),e=ve(t,"3148583717"),n=ve(t,"3362382575"),s=rs(t,"1087852479").value,{eligible:o}=lt(Oe.hasSeenStudentsUpsellAnnouncement),a=ln(),i=a==null?void 0:a.email,l=(d=s==null?void 0:s.blacklist)!=null?d:[];return Array.isArray(l)&&i&&l.some(u=>i.endsWith(u))?!1:(i==null?void 0:i.endsWith(".edu"))&&o&&e&&n}function uXe(t){"use forget";const e=W.c(13),[n,s]=_.useState(!1),o=V();let a;e[0]!==t||e[1]!==o?(a=xt(o,t),e[0]=t,e[1]=o,e[2]=a):a=e[2];const i=a;let l;e[3]!==i?(l=()=>{var p;return((p=bi(i))==null?void 0:p.value)===Xt.REALTIME},e[3]=i,e[4]=l):l=e[4];const c=re(l);let d;e[5]!==c?(d=()=>{c&&s(!0)},e[5]=c,e[6]=d):d=e[6];const u=d;let f,m;e[7]!==c?(f=()=>{c||s(!1)},m=[c],e[7]=c,e[8]=f,e[9]=m):(f=e[8],m=e[9]),_.useEffect(f,m);let g;return e[10]!==n||e[11]!==u?(g={maybeSetWaitingForRealtimeOnAbort:u,isWatingForRealtimeStatusChange:n},e[10]=n,e[11]=u,e[12]=g):g=e[12],g}function fXe(){const t=V(),e=nz(),n=ve(t,"1416952492");return _.useMemo(()=>{const s=[];for(const o of e){const a=sz(o.name);a&&s.push(a)}return n&&!s.includes(Pe.Research)&&s.push(Pe.Research),s},[e,n])}function V7e(t){const e=V(),n=ne(),s=st(e),o=(s==null?void 0:s.isSelfServeBusiness())||(s==null?void 0:s.isEnterpriseCBP()),a=v8(v=>v.bySystemHint(t)),i=ez(tz(t)),l=i&&o,c=t===Pe.Research?H7e(n.locale,a,o):gl(t)?G7e(n.locale,a,o):null,d=c!=null&&!i,u=t===Pe.Research&&ve(e,"1416952492"),f=gl(t)&&ve(e,"926440545"),m=u||f,g=m||i!=null,p=m?r.jsx(j,{id:"composer.skills.unavailable",defaultMessage:"Temporarily unavailable"}):i&&!o?r.jsx(j,{id:"composer.skills.rateLimited",defaultMessage:"{limit} more available on {resetDate}",values:{limit:i.limit,resetDate:new Date(i.resets_after).toLocaleDateString(n.locale,{month:"long",day:"numeric"})}}):void 0;let h,x;return(l||d)&&(h=l?i.title:c==null?void 0:c.label,x=l?i.description:c==null?void 0:c.secondaryLabel),{isBlocked:g,blockedLabel:p,remainingLabel:h,remainingLabelSecondary:x}}function ZF(t,e){return new Date(e.reset_after).toLocaleDateString(t,{month:"long",day:"numeric"})}function H7e(t,e,n){return n||!e?null:{label:r.jsx(j,{id:"m6JsYD",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:r.jsx(j,{id:"8V98un",defaultMessage:"More available on {resetDate}",values:{resetDate:ZF(t,e)}})}}function G7e(t,e,n){return n||!e?null:{label:r.jsx(j,{id:"nD45w8",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:r.jsx(j,{id:"eBZSNV",defaultMessage:"More available on {resetDate}",values:{resetDate:ZF(t,e)}})}}function q5(t){it.sidebarUrlTrayOpen$.set(t)}function mXe(){const t=V(),e=An(mn),n=Oh(t),s=re(it.sidebarUrlTrayOpen$),o=re(it.context$),a=xs(),i=$s(),l=_.useRef(a);_.useEffect(()=>{if(!e||!n)return;const d=l.current;l.current=a,a===Pe.Agent&&d!==Pe.Agent&&o&&(s||q5(!0))},[e,n,a,o,s]);const c=_.useRef(s);_.useEffect(()=>{if(!e||!n)return;const d=s,u=c.current;c.current=d,u&&!d&&a===Pe.Agent&&i(null,{ifPrevSystemHint:Pe.Agent})},[e,n,s,a,i])}var W7e=(t=>(t.ConfigureRepos="configure-repos",t.SyncRepos="sync-repos",t.IndexRepos="index-repos",t))(W7e||{});const z7e=R(()=>P(()=>import("./ourdq1ldvkkkjora.js"),__vite__mapDeps([354,10,1,11,355])).then(t=>t.ContextConnectorDocumentParser));function gXe({composerController:t,parsedDocumentHandler:e}){const n=V(),{gdriveLinkStatus:s,o365BusinessLinkStatus:o,o365PersonalLinkStatus:a}=oz(n);return s==="false"&&o==="false"&&a==="false"?null:r.jsx(z7e,{composerController:t,parsedDocumentHandler:e})}function pXe(){"use forget";const t=W.c(8),e=V(),n=ne();let s;t[0]!==n?(s=n.formatMessage({id:"ebFfvg",defaultMessage:"Create image"}),t[0]=n,t[1]=s):s=t[1];const o=s;let a;t[2]!==e?(a=d=>{d.preventDefault(),d.stopPropagation(),B.logEventWithStatsig("Composer Create Image Button Clicked","composer_create_image_button_clicked"),Zt(e,{fallbackScreenHint:"login_or_signup",skipLoginModal:!1,loginModalSubtitleVariant:"create-image"})},t[2]=e,t[3]=a):a=t[3];const i=a;let l;t[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(_5,{className:"icon"}),t[4]=l):l=t[4];let c;return t[5]!==i||t[6]!==o?(c=r.jsx(N5,{pressed:!1,disabled:!1,icon:l,label:o,ariaLabel:o,animatedLabel:!0,showLabel:!0,onClick:i,dataTestid:"composer-button-create-image"}),t[5]=i,t[6]=o,t[7]=c):c=t[7],c}const KF=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M16.3965 5.01128C16.3963 4.93399 16.3489 4.87691 16.293 4.85406L16.2354 4.84332C13.9306 4.91764 12.5622 5.32101 10.665 6.34722V16.3716C11.3851 15.9994 12.0688 15.7115 12.7861 15.5015C13.8286 15.1965 14.9113 15.0633 16.2402 15.0435L16.2979 15.0308C16.353 15.0063 16.3965 14.9483 16.3965 14.8755V5.01128ZM3.54492 14.8765C3.54492 14.9725 3.62159 15.0422 3.70117 15.0435L4.19629 15.0562C5.94062 15.1247 7.26036 15.4201 8.65918 16.0484C8.05544 15.1706 7.14706 14.436 6.17871 14.1109V14.1099C5.56757 13.9045 5.16816 13.3314 5.16797 12.6988V4.98882C4.86679 4.93786 4.60268 4.8999 4.28223 4.87457L3.72754 4.84429C3.62093 4.84079 3.54505 4.92417 3.54492 5.01226V14.8765ZM17.7266 14.8755C17.7266 15.6314 17.1607 16.2751 16.4121 16.3628L16.2598 16.3736C15.0122 16.3922 14.0555 16.5159 13.1602 16.7779C12.2629 17.0404 11.3966 17.4508 10.3369 18.0738C10.129 18.1959 9.87099 18.1958 9.66309 18.0738C7.71455 16.9283 6.31974 16.4689 4.12988 16.3853L3.68164 16.3736C2.85966 16.3614 2.21484 15.6838 2.21484 14.8765V5.01226C2.21497 4.15391 2.93263 3.4871 3.77246 3.51519L4.39844 3.54937C4.67996 3.57191 4.92258 3.60421 5.16797 3.64214V2.51031C5.16797 1.44939 6.29018 0.645615 7.31055 1.15679L7.31152 1.15582C8.78675 1.89511 10.0656 3.33006 10.5352 4.91461C12.3595 3.98907 13.8688 3.58817 16.1924 3.51324L16.3506 3.51714C17.1285 3.5741 17.7264 4.23496 17.7266 5.01128V14.8755ZM6.49805 12.6988C6.49824 12.7723 6.5442 12.8296 6.60254 12.8492L6.96289 12.9859C7.85245 13.3586 8.68125 13.9846 9.33496 14.7496V5.5816C9.08794 4.37762 8.13648 3.1566 6.95801 2.47613L6.71582 2.34527C6.67779 2.32617 6.6337 2.32502 6.58301 2.35796C6.52946 2.39279 6.49805 2.44863 6.49805 2.51031V12.6988Z"})),$1=Object.freeze(Object.defineProperty({__proto__:null,default:KF},Symbol.toStringTag,{value:"Module"}));function hXe(t){"use forget";const e=W.c(12),{composerController:n,clientThreadId:s}=t,o=ne(),a=xs(),i=$s(),l=a===Pe.Tatertot;let c;e[0]!==o?(c=o.formatMessage({id:"bF9p2/",defaultMessage:"Study"}),e[0]=o,e[1]=c):c=e[1];const d=c;let u;e[2]!==s||e[3]!==n||e[4]!==l||e[5]!==i?(u=p=>{p.stopPropagation(),p.preventDefault(),i(l?null:Pe.Tatertot,{analyticsMetadata:{clientThreadId:s}}),l||no(Pt(n))},e[2]=s,e[3]=n,e[4]=l,e[5]=i,e[6]=u):u=e[6];const f=u;let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(KF,{className:"h-[18px] w-[18px]"}),e[7]=m):m=e[7];let g;return e[8]!==f||e[9]!==l||e[10]!==d?(g=r.jsx(N5,{pressed:l,icon:m,label:d,ariaLabel:d,animatedLabel:!0,showLabel:!0,onClick:f,disabled:!1,dataTestid:"composer-button-study"}),e[8]=f,e[9]=l,e[10]=d,e[11]=g):g=e[11],g}class Cy extends Si()(()=>({files:[]})){addFile(e){this.setState(n=>U(w({},n),{files:[...n.files,e]}))}updateFile(e,n){this.setState(s=>U(w({},s),{files:s.files.map(o=>o.fileSpec.id===e?w(w({},o),n):o)}))}removeFile(e){this.setState(n=>U(w({},n),{files:n.files.filter(s=>s.fileSpec.id!==e)}))}reset(){this.setState(()=>({files:[]}))}}J(Cy,"selectFiles",e=>e.files),J(Cy,"selectFile",(e,n)=>e.files.find(s=>s.fileSpec.id===n));const x7=R(()=>P(()=>import("./mncm1jl7sgu6lqkq.js"),__vite__mapDeps([356,1])),{loading:t=>F(t)});function V1({isFirstParty:t,gizmoId:e,src:n,alt:s,className:o,showLoading:a,simple:i}){const l=V(),c=jl(l,e),[d,u]=_.useState(!1),[f,m]=_.useState(!0);if(d||!n){const p=t||c;return i?p?r.jsx(K4,{className:o,"aria-label":""}):r.jsx(x7,{className:o,"aria-label":""}):r.jsx("div",{className:o,children:r.jsx("div",{className:"gizmo-shadow-stroke bg-token-main-surface-primary text-token-text-primary relative flex h-full items-center justify-center rounded-full",children:r.jsx(Xe.div,{className:"flex h-full w-full items-center justify-center",initial:{opacity:0},animate:{opacity:1,transition:{duration:.1}},children:p?r.jsx(K4,{className:"h-2/3 w-2/3"}):r.jsx(x7,{className:"h-2/3 w-2/3 text-gray-400"})})})})}const g=r.jsx("img",{src:n,className:"bg-token-tertiary h-full w-full",alt:s!=null?s:"GPT Icon",width:80,height:80,onError:()=>u(!0),onLoad:()=>m(!1)});return i?r.jsx("div",{className:z("overflow-hidden rounded-full",a&&f&&"animate-pulse",o),children:g}):r.jsx("div",{className:o,children:r.jsx("div",{className:z("gizmo-shadow-stroke overflow-hidden rounded-full",a&&f&&"animate-pulse"),children:g})})}function q7e({gizmoId:t,className:e}){var s,o;const{data:n}=Ci(t);return r.jsx(V1,{src:n==null?void 0:n.gizmo.display.profile_picture_url,gizmoId:t,isFirstParty:(o=(s=n==null?void 0:n.gizmo.tags)==null?void 0:s.includes(sp.FirstParty))!=null?o:!1,className:e})}const _Xe={id:"PromptTextarea.integratedVoiceModeTypePlaceholder",defaultMessage:"Type",description:"Placeholder prompt to let the user know they can speak to talk to the model. It should be a verb, short for 'please type' or 'type here'"},xXe={id:"SplashScreenV2.integratedVoiceModeHeadline",defaultMessage:"Start talking",description:"Headline override message for integrated voice mode"},yXe={id:"SplashScreenV2.integratedVoiceModeHeadline.connecting",defaultMessage:"Connecting to voice",description:"Headline override message for integrated voice mode"};function Y7e(t){return Xn({queryKey:["shared-prompt",t],queryFn:()=>ge.safeGet("/templated_prompts/{prompt_id}/subscribed",{parameters:{path:{prompt_id:t!=null?t:""}}}),enabled:!!t})}const Z7e=R(()=>P(()=>Promise.resolve().then(()=>rDe),void 0).then(t=>t.PromptSharingModal)),vXe=(t,e,n,s)=>{"use forget";const o=W.c(10);let a;o[0]!==e?(a=Y7e(e),o[0]=e,o[1]=a):a=o[1];const{data:i,isError:l}=rt(a),c=ne();let d,u;o[2]!==t||o[3]!==i||o[4]!==c||o[5]!==l||o[6]!==n||o[7]!==s?(d=()=>{l&&(az(t).danger(c.formatMessage({id:"tDSvzy",defaultMessage:"Prompt not found, please verify you are in the right workspace"})),n()),i!=null&&dt(t,Z7e,{prompt:i,mode:"sharee",onClose:n,onTryIt:s})},u=[t,i,n,s,l,c],o[2]=t,o[3]=i,o[4]=c,o[5]=l,o[6]=n,o[7]=s,o[8]=d,o[9]=u):(d=o[8],u=o[9]),_.useEffect(d,u)};function K7e(t){return Pt(t).state.doc.textContent}function bXe(t){"use forget";const e=W.c(8),n=V();let s;e[0]!==n?(s=Ra(n),e[0]=n,e[1]=s):s=e[1];const o=s,{setTargetedContent:a}=hm();let i,l;e[2]!==t||e[3]!==n||e[4]!==o||e[5]!==a?(i=()=>Rl(()=>{var u;if(!o.isFeedbackModalOpen$())return;const c=o.populatePrompt$();let d;e:switch(c==null?void 0:c.type){case"surveyReply":{d=Q7e(c.userMessage,c.targetedReply);break e}case"cardReply":{d=J7e(Qo(n).getQueryData(ns.pulseCard(c.cardId)));break e}default:d={userMessage:null,targetedReply:null}}_o(Pt(t),(u=d.userMessage)!=null?u:""),setTimeout(()=>{var f;a((f=d.targetedReply)!=null?f:void 0)},0)}),l=[n,o,t,a],e[2]=t,e[3]=n,e[4]=o,e[5]=a,e[6]=i,e[7]=l):(i=e[6],l=e[7]),_.useEffect(i,l)}const Q7e=(t,e)=>({userMessage:t,targetedReply:e?{type:"text",label:e,isFocusedViewContent:!1,createNewCompletionParams:n=>{var o;if(!e)return n;const s=Mh(e);return U(w({},n),{promptMessage:Hd(n.promptMessage,{metadata:{targeted_reply:e}}),appendMessages:[...(o=n.appendMessages)!=null?o:[],s]})}}:null}),J7e=t=>({userMessage:null,targetedReply:t!=null&&t.title?{type:"text",label:t.title,isFocusedViewContent:!1,createNewCompletionParams:e=>t.title?U(w({},e),{extraStreamParams:U(w({},e.extraStreamParams),{pulseCompletionParams:{feedback_card_id:t.id,type:"feedback-conversation"}}),promptMessage:Hd(e.promptMessage,{metadata:{targeted_reply:t.title}})}):e}:null});function CXe(){return Vn(),!1}function X7e(t,e,n){return t.get(e,n)}function Mc({globalOverride:t,layer:e,condition:n,paramName:s,defaultValue:o}){const a=_.useRef(n);return Jn(()=>{a.current=n},[n]),_.useCallback(i=>!a.current||a.current()?t!==void 0&&!(i!=null&&i.skipOverride)?t:(i!=null&&i.override&&!i.skipOverride&&Fe.addError(new Error("override is not allowed in production")),X7e(e,s,o)):o,[e,s,o,t])}function QF(){const t=V(),e=!tt(t),n=ze(t,"3434623093"),s=e;return{getShowUpsellReason:Mc({layer:n,condition:()=>s,paramName:"with-reason-upsell",defaultValue:!1}),getUpsellLabelType:Mc({layer:n,condition:()=>s,paramName:"labels",defaultValue:void 0}),getShowVoiceUpsell:Mc({layer:n,condition:()=>s,paramName:"with-voice-upsell",defaultValue:!1}),getUpsellShowsAttach:Mc({layer:n,condition:()=>s,paramName:"with-attach-upsell",defaultValue:!1})}}const eke=ko(()=>Be(null)),Y5=ko(t=>St(()=>{const e=eke(t);return e?{gizmo:e,gizmo_id:e.gizmo.id,kind:wt.GizmoInteraction}:DM(t)})),tke=(t,e,n=!1)=>t.role===Ke.Root?!1:t.role===Ke.System||t.role===Ke.Developer||e.every(s=>{var o,a;return((o=s.metadata)==null?void 0:o.is_visually_hidden_from_conversation)&&!((a=s.metadata)!=null&&a.targeted_reply_label)})?n:!0,SXe=(t,e)=>t.length===1&&t[0].author.name==="n7jupd.metadata"&&!e,JF=t=>t.some(e=>{var s,o;if((s=e.metadata)!=null&&s.is_visually_hidden_from_conversation&&!((o=e.metadata)!=null&&o.targeted_reply_label)||e.author.role===Ke.Tool||e.author.role===Ke.System||e.recipient!=="all")return!1;const n=e.content;return(n.content_type===ut.Text||n.content_type===ut.MultimodalText)&&n.parts.some(a=>typeof a=="string"&&a.length>0)});function wXe(t,e,n){return!n&&t.role!==Ke.User&&JF(t.messages)&&t.messages.some(s=>{var i,l;const o=!!((l=(i=s.metadata)==null?void 0:i.content_references)!=null&&l.some(c=>c.type==="file"||c.type==="file_navlist")),a=e&&nke(s);return o||a})}function kXe(t,e,n){return!e&&t.role!==Ke.User&&JF(t.messages)&&t.messages.some(s=>{var o,a;return!!((a=(o=s.metadata)==null?void 0:o.content_references)!=null&&a.some(i=>i.type==="file"&&i.medical_file_reference!=null||n&&i.type==="grouped_webpages"))})}function nke(t){return Z5(t)&&t.content.result.length>0&&t.content.result.trim()!=="Visible: 0% - 100%"}function Z5(t){return t.author.role===Ke.Tool&&t.author.name==="file_search"&&t.content.content_type===ut.TetherBrowsingDisplay}function EXe(t){return t.startsWith("ks--")}const TXe=/^\[L\d+\] (.+)$/,MXe=/"(text|description|content|snippet)":\s*\"(.*)\"/,ske=$f(()=>{let t=y7;function e(o){t=o}function n(){e(y7)}function s(o){return U(w({},t),{dictationEdited:oke(t,o)})}return{setData:e,resetData:n,getData:s}}),y7={usedDictation:!1,dictationOriginalText:null,dictationAssetPointer:null,dictationAssetTTL:null,dictationAssetFormat:null};function oke(t,e){return t.usedDictation&&t.dictationOriginalText!=null&&!e.includes(t.dictationOriginalText)}const K5=$f(()=>{const t=Be(!1),e=Be(void 0);return{isWhisperActive$:t,waveformData$:e}});function ake(t,e){var f;const n=V(),s=re(()=>Mo(n)),o=st(n),a=re(()=>yn(xt(n,e))),[i,l]=Ve(e,m=>[m==null?void 0:m.mode,m==null?void 0:m.startedWithByoMcp]),c=Es(),d=re(()=>wd(n)),u=(f=o==null?void 0:o.isWorkspaceAccount())!=null?f:!1;return _.useMemo(()=>{if(!s)return!0;const m=s.find(g=>g.systemHint===t);return m!=null&&pb({systemHint:m,modelConfig:a,conversationMode:i,isTemporaryChat:c,isDeveloperMode:d,isWorkspaceTenant:u,startedWithByoMcp:l})},[s,t,a,i,c,d,u,l])}const rke="https://help.openai.com/en/articles/11752874-chatgpt-agent#h_beedf96566",ike="composer_system_hint",Ba={segment:{shown:"Agent Nux Modal Shown",continueClicked:"Agent Nux Modal Continue Clicked",dismissed:"Agent Nux Modal Dismissed"},statsig:{shown:"chatgpt_agent_nux_modal_shown",continueClicked:"chatgpt_agent_nux_modal_continue_clicked",dismissed:"chatgpt_agent_nux_modal_dismissed"},datadog:{shown:"agent_nux_modal_shown",continueClicked:"agent_nux_modal_continue_clicked",dismissed:"agent_nux_modal_dismissed"}},xc={title:r.jsx(j,{id:"jFh1/1",defaultMessage:"Welcome to agent mode"}),description:r.jsx(j,{id:"RJdktl",defaultMessage:"Let ChatGPT handle complex tasks from start to finish, from finding the perfect product to creating spreadsheets."}),privacy:r.jsx(j,{id:"AgLzPZ",defaultMessage:"Agent mode uses a remote browser and takes screenshots. You can take control anytime. Agent mode has privacy risks and is important to monitor. <learnMoreLink>Learn more</learnMoreLink>",values:{learnMoreLink:t=>r.jsx("a",{href:rke,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer underline",children:t})}}),buttonText:r.jsx(j,{id:"RW8OC0",defaultMessage:"Get started"})},XF=()=>{const t=V(),{eligible:e,isLoading:n}=lt(Oe.hasSeenn7jupdNux),s=es(t),o=ve(t,"3014776572"),a=ake(hs,rz);return!o||!a||s?"hide":n?"loading":e?"show":"hide"},lke=t=>{"use forget";const e=W.c(38),{onClose:n,clientThreadId:s,source:o}=t,a=o===void 0?ike:o,i=V();let l,c;if(e[0]!==i){const L=rs(i,"2302071098");l=L.get("videoUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.mp4"),c=L.get("posterUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.jpg"),e[0]=i,e[1]=l,e[2]=c}else l=e[1],c=e[2];const d=c,[u,f]=_.useState(!1);let m;e[3]!==s||e[4]!==a?(m={client_thread_id:s,source:a},e[3]=s,e[4]=a,e[5]=m):m=e[5];const g=m;let p;e[6]!==g?(p=()=>{B.logEventWithStatsig(Ba.segment.shown,Ba.statsig.shown,g),Fe.addAction(Ba.datadog.shown,g)},e[6]=g,e[7]=p):p=e[7];let h;e[8]!==g||e[9]!==s||e[10]!==a?(h=[g,s,a],e[8]=g,e[9]=s,e[10]=a,e[11]=h):h=e[11],_.useEffect(p,h);let x;e[12]!==g||e[13]!==i||e[14]!==n?(x=()=>{B.logEventWithStatsig(Ba.segment.dismissed,Ba.statsig.dismissed,g),Fe.addAction(Ba.datadog.dismissed,g),ot(i,Oe.hasSeenn7jupdNux),n()},e[12]=g,e[13]=i,e[14]=n,e[15]=x):x=e[15];const v=x;let y;e[16]!==g||e[17]!==i||e[18]!==n?(y=()=>{B.logEventWithStatsig(Ba.segment.continueClicked,Ba.statsig.continueClicked,g),Fe.addAction(Ba.datadog.continueClicked,g),ot(i,Oe.hasSeenn7jupdNux),n()},e[16]=g,e[17]=i,e[18]=n,e[19]=y):y=e[19];const b=y;let C;e[20]!==d||e[21]!==u?(C=!u&&r.jsx("img",{src:d,alt:"",className:"pointer-events-none absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),e[20]=d,e[21]=u,e[22]=C):C=e[22];let S;e[23]===Symbol.for("react.memo_cache_sentinel")?(S=()=>f(!0),e[23]=S):S=e[23];let E;e[24]!==l?(E=r.jsx("video",{src:l,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"pointer-events-none h-full w-full object-cover object-bottom",onLoadedData:S}),e[24]=l,e[25]=E):E=e[25];let k;e[26]!==E||e[27]!==C?(k=r.jsxs("div",{className:"relative aspect-16/9 w-full",children:[C,E]}),e[26]=E,e[27]=C,e[28]=k):k=e[28];let T,M,A;e[29]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx("div",{className:"text-xl font-medium",children:xc.title}),M=r.jsx("div",{className:"text-token-text-secondary",children:xc.description}),A=r.jsx("div",{className:"text-token-text-secondary text-xs",children:xc.privacy}),e[29]=T,e[30]=M,e[31]=A):(T=e[29],M=e[30],A=e[31]);let I;e[32]!==b?(I=r.jsxs("div",{className:"flex flex-col gap-4 px-8 pt-6 pb-8 text-center",children:[T,M,A,r.jsx("div",{className:"mt-4 flex w-full justify-center gap-3",children:r.jsx("div",{className:"mx-auto flex w-fit max-w-full min-w-[260px] justify-center gap-3",children:r.jsx(ye,{color:"primary",onClick:b,className:"min-w-0 flex-1",children:xc.buttonText})})})]}),e[32]=b,e[33]=I):I=e[33];let N;return e[34]!==v||e[35]!==k||e[36]!==I?(N=r.jsxs(Mt,{testId:"modal-agent-nux",isOpen:!0,noPadding:!0,onClose:v,showCloseButton:!0,size:"custom",type:"success",className:"max-w-md",title:xc.title,visuallyHiddenHeader:!0,children:[k,I]}),e[34]=v,e[35]=k,e[36]=I,e[37]=N):N=e[37],N},cke=Object.freeze(Object.defineProperty({__proto__:null,AgentNuxModal:lke,agentModeWelcomeCopy:xc,useAgentNuxModalState:XF},Symbol.toStringTag,{value:"Module"}));var dke=(t=>(t.Gizmo="gizmo",t.App="app",t))(dke||{});function AXe(t){return typeof t=="object"&&t!=null&&"command"in t}function IXe(t){"use forget";const e=W.c(11),{command:n,isHighlighted:s,onHighlight:o,onClick:a}=t;let i;e[0]!==n.title?(i=r.jsx("span",{className:"break-all",children:n.title}),e[0]=n.title,e[1]=i):i=e[1];let l;return e[2]!==n.disabled||e[3]!==n.icon||e[4]!==n.secondary||e[5]!==n.trailing||e[6]!==s||e[7]!==a||e[8]!==o||e[9]!==i?(l=r.jsx(U3,{as:"div",hasManagedFocus:!0,disabled:n.disabled,highlighted:s,icon:n.icon,secondary:n.secondary,trailing:n.trailing,onPointerMove:o,onClick:a,children:i}),e[2]=n.disabled,e[3]=n.icon,e[4]=n.secondary,e[5]=n.trailing,e[6]=s,e[7]=a,e[8]=o,e[9]=i,e[10]=l):l=e[10],l}function jXe(t){var e,n;return{targets:[t.command,...(e=t.aliases)!=null?e:[],...(n=t.regexMatches)!=null?n:[],t.secondary?"".concat(t.title," ").concat(t.secondary):t.title],weight:t.matchWeight}}class uke{constructor(e,n){J(this,"store",[]);this.compare=e,this.maxSize=n}push(e){const n=this.store;n.length<this.maxSize?(n.push(e),fke(this.store,this.compare)):this.compare(e,n[0])>0&&(n[0]=e,v7(this.store,this.compare))}pop(){const e=this.store,n=e[0],s=e.pop();return e.length>0&&(e[0]=s,v7(this.store,this.compare)),n}toArray(e){const n=this.store.length,s=new Array(n);for(let o=n-1;o>=0;o--){const a=this.pop();s[o]=e?e(a):a}return s}}function fke(t,e){let n=t.length-1;for(;n>0;){const s=Math.floor((n-1)/2);if(e(t[s],t[n])<=0)break;[t[s],t[n]]=[t[n],t[s]],n=s}}function v7(t,e){let n=0;for(let s=1;s<t.length;s=n*2+1){const o=s+1,a=o<t.length&&e(t[o],t[s])<0?o:s;if(e(t[n],t[a])<=0)break;[t[n],t[a]]=[t[a],t[n]],n=a}}function NXe(t,e,n,{locale:s,maxResults:o=50}={}){const a=e.toLocaleLowerCase();if(!a)return t;const i=new uke((l,c)=>l.score-c.score,o);for(let l=0;l<t.length;l++){const{targets:c,weight:d=1}=n(t[l]);let u=0;for(let f=0;f<c.length;f++){const m=c[f];if(m){const g=m.toLowerCase(),p=mke(g,a,s);p>u&&(u=p)}}u>0&&i.push({value:t[l],score:u*d})}return i.toArray(l=>l.value)}function mke(t,e,n){if(e.length===0||e.length>t.length||!t.includes(e[0])||e.length>1&&!t.includes(e[e.length-1]))return 0;const s=[];for(let c=0,d=0;c<t.length&&d<e.length;c++)t.charCodeAt(c)===e.charCodeAt(d)&&(s.push(c),d++);if(s.length!==e.length)return 0;for(let c=s.length-2;c>=0;c--){const d=s[c+1]-1;s[c]<d&&t.charCodeAt(d)===e.charCodeAt(c)&&(s[c]=d)}const o=s[0];let a=0,i=0,l=b7(t,s[0],n)?1:0;for(let c=1;c<s.length;c++){const d=s[c]-s[c-1];d===1?a++:(i+=d-1,l+=b7(t,s[c],n)?1:0)}return gke*s.length+pke*a+hke*(o===0?1:0)+_ke*l+xke*i+yke*o}const gke=5,pke=10,hke=5,_ke=15,xke=-5,yke=-.2;function b7(t,e,n){var s;if(typeof Intl.Segmenter=="function"){const o=new Intl.Segmenter(n,{granularity:"word"}).segment(t);if(typeof o.containing=="function"){const a=o.containing(e);if(!a)return!1;const i=(s=a.segment)==null?void 0:s[e-a.index-1];return a.isWordLike===!0&&(a.index===e||i==="_")}}return!1}var vke=iz();const PXe=Zn(vke);function RXe({children:t,className:e,showBackground:n}){return r.jsxs("div",{className:"relative",children:[t,n&&r.jsx(Xe.div,{initial:{scale:0},animate:{scale:1},transition:{stiffness:260,damping:20},className:z("pointer-events-none absolute inset-0 rounded-full",e)})]})}function bke({shortName:t,includeAction:e,entry:n,onClick:s}){_.useEffect(()=>{if(!open||n.type!==Bt.GDRIVE)return;const d=n.access_token;d&&QD(d)},[n]);const o=lz(n.type),a=ne(),i=!t&&(n.type===Bt.O365_BUSINESS||n.type===Bt.O365_PERSONAL)?np(Bt.O365,a,t):np(n.type,a,t),l=t?void 0:n.type===Bt.O365_BUSINESS?a.formatMessage(S7.workSchool):n.type===Bt.O365_PERSONAL?a.formatMessage(S7.personal):void 0,c=!t&&n.type===Bt.O365_BUSINESS?!0:!!l;return r.jsx(K.Item,{onClick:s,icon:o,label:e?n.access_token?r.jsx(j,U(w({},C7.uploadFromMessage),{values:{connectorName:i}})):r.jsx(j,U(w({},C7.signinWithMessage),{values:{connectorName:i}})):i,secondary:c?[l,n.type===Bt.O365_BUSINESS?a.formatMessage(cz.includesSharePoint):void 0].filter(Boolean).join(" - "):null},n.id)}const C7=Se({signinWithMessage:{id:"ContextConnectorPickerDropdownItem.signInWithMessage",defaultMessage:"Connect {connectorName}"},uploadFromMessage:{id:"ContextConnectorPickerDropdownItem.uploadWithMessage",defaultMessage:"Add from {connectorName}"}}),S7=Se({personal:{id:"ContextConnectorPickerDropdownItem.o365Personal",defaultMessage:"Personal"},workSchool:{id:"ContextConnectorPickerDropdownItem.o365WorkSchool",defaultMessage:"Work/School"}}),Cke=R(()=>P(()=>import("./ezy6n48j7a81l4k0.js"),__vite__mapDeps([328,1])),{loading:t=>F(t)});function Ske({isLoadingConnectors:t,connectorConfig:e,onConnectorClick:n}){const s=!Cd(),a=_.useMemo(()=>Array.from(e.values()),[e]).filter(l=>l.access_token!=null),i=bl();return a.length===0&&(!t||i)?null:r.jsxs(K.Sub,{onOpenChange:l=>{l&&B.logEventWithStatsig("Composer: Open Context Connector Picker","chatgpt_composer_open_context_connector_picker")},children:[r.jsx(K.SubMenuTrigger,{icon:Cke,children:r.jsx("div",{className:"line-clamp-1 text-ellipsis",children:r.jsx(j,w({},wke.addFromApps))})}),r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{className:z(s&&"-translate-x-1/2 -translate-y-full"),children:[t&&r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{})]}),r.jsx(Sy,{includeAction:!1,shortName:!1,connectorConfig:e,onConnectorClick:n})]})})]})}const Sy=({shortName:t,includeAction:e,connectorConfig:n,onConnectorClick:s})=>{const a=_.useMemo(()=>Array.from(n.values()),[n]).filter(i=>i.access_token!=null);return r.jsx(r.Fragment,{children:a.map(i=>r.jsx(bke,{shortName:t,includeAction:e,entry:i,onClick:()=>s(i)},i.id))})},wke=Se({addFromApps:{id:"ContextConnectorPicker.addFromApps",defaultMessage:"Add from apps"}});function eB(){var i;const t=V(),e=An(mn),n=Oh(t),s=re(it.sidebarUrlTrayOpen$),o=re(it.context$),a=s&&!!o;return e&&n?r.jsx(K.Item,{icon:r.jsx(Dp,{base64:o==null?void 0:o.base64favicon,title:(i=o==null?void 0:o.title)!=null?i:o==null?void 0:o.url,className:"h-4 w-4 rounded-[4px]"}),disabled:a,onClick:()=>{var l;(l=B8())==null||l.triggerProductEvent("addTabContext"),q5(!0)},children:r.jsx("span",{children:r.jsx(j,{id:"+gYTJ0",defaultMessage:"Attach tab"})})},"tab_context"):null}const kke=R(()=>P(()=>import("./iqak4d8n645iefiy.js"),__vite__mapDeps([357,1])),{loading:t=>F(t)}),Eke=R(()=>P(()=>import("./ik745cxla2tb9irm.js"),__vite__mapDeps([326,1])),{loading:t=>F(t)}),Tke={"image/jpeg":".jpg","image/png":".png"};function Mke({entry:t}){return r.jsx(K.Item,{onClick:t.onClick,icon:t.icon,children:r.jsx(j,w({},t.label))},t.key)}function Ake(t){const e=ne(),n=$t(),s=wi();return _.useCallback(async a=>{const i="".concat(new Date().toISOString().replaceAll(":","-")).concat(Tke[a.mimeType]);ei.uploadFile(s,new File([Bp(a.data)],i,{type:a.mimeType}),t,e,n,void 0,void 0,ho.Multimodal)},[s,e,n,t])}function tB(t){const e=Ake(t),n=Ike(e),s=jke(e);return{desktopConnectors:_.useMemo(()=>qo?[n,s].filter(a=>a!==void 0):[],[n,s])}}function Ike(t){return _.useMemo(()=>({key:"takeScreenshot",label:nB.takeScreenshot,icon:kke,onClick:async()=>{const e=await dz();e&&(B.logEvent("Sidetron: Screenshot Attached"),await t(e))}}),[t])}function jke(t){return _.useMemo(()=>({key:"takePhoto",label:nB.takePhoto,icon:Eke,onClick:async()=>{const e=await uz();e&&(B.logEvent("Sidetron: Photo Attached"),await t(e))}}),[t])}const nB=Se({takeScreenshot:{id:"ContextConnectorPickerDropdownItem.takeScreenshotDesktop",defaultMessage:"Take screenshot"},takePhoto:{id:"ContextConnectorPickerDropdownItem.takePhotoDesktop",defaultMessage:"Take photo"}});function LXe({clientThreadId:t,icon:e,modelSupportedImageMimeTypes:n,isLoadingConnectors:s,connectorConfig:o,onSelectConnector:a,openFileDialog:i,isDisabled:l=!1,highlightTooltip:c=!1,showLabel:d,disabledReason:u,currentModelName:f}){const m=ne(),g=U8(),[p,h]=_.useState(!1),x=_.useRef(!1),v=V(),y=An(mn),b=g!=null||u===di.RateLimitReached,C=I=>{h(I),I&&(B.logEventWithStatsig("Composer: Open Plus Menu","chatgpt_web_composer_plus_menu_open",b?{file_upload_disabled_reason:"rate_limit"}:void 0),x.current=!0,setTimeout(()=>{x.current=!1},250))},{desktopConnectors:S}=tB(n),E=n.length>0,k=r.jsxs(r.Fragment,{children:[y&&r.jsx(eB,{}),r.jsx(Ske,{isLoadingConnectors:s,connectorConfig:o,onConnectorClick:a}),r.jsx(sB,{modelSupportedImageMimeTypes:n}),r.jsx(ND,{openFileDialog:i,showMenuForNoAuth:!1,modelSupportsImages:E,clientThreadId:t})]}),T=l||g!=null,M=_.useRef(!1),A=r.jsxs(K.Root,{open:p,onOpenChange:C,children:[r.jsx(MD,{clientThreadId:t,rateLimitPopup:g,highlightTooltip:c,disabled:T,disabledReason:u,currentModelName:f,children:r.jsxs(K.BasicTrigger,{className:"composer-btn",disabled:T,id:"upload-file-btn","aria-label":D1(v,m,T,u,f),children:[e,d&&r.jsx(C4e,{})]})}),r.jsx(K.Portal,{children:r.jsx(K.Content,{alignOffset:-8,onEscapeKeyDown:()=>{M.current=!0},side:"bottom",size:"small",onCloseAutoFocus:I=>{M.current||I.preventDefault()},className:"radix-side-bottom:flex-col-reverse flex flex-col",children:k})})]});return r.jsx("div",{className:"flex flex-col",children:A})}const sB=({modelSupportedImageMimeTypes:t})=>bl()?r.jsx(Nke,{modelSupportedImageMimeTypes:t}):null,Nke=({modelSupportedImageMimeTypes:t})=>{const{desktopConnectors:e}=tB(t);return r.jsx(r.Fragment,{children:e.map(n=>r.jsx(Mke,{entry:n},n.key))})},Pke=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M4.33496 12.5V7.5C4.33496 7.13273 4.63273 6.83496 5 6.83496C5.36727 6.83496 5.66504 7.13273 5.66504 7.5V12.5C5.66504 14.8942 7.60585 16.835 10 16.835C12.3942 16.835 14.335 14.8942 14.335 12.5V5.83301C14.3348 4.35959 13.1404 3.16522 11.667 3.16504C10.1934 3.16504 8.99822 4.35948 8.99805 5.83301V12.5C8.99805 13.0532 9.44679 13.502 10 13.502C10.5532 13.502 11.002 13.0532 11.002 12.5V7.5C11.002 7.13273 11.2997 6.83496 11.667 6.83496C12.0341 6.83514 12.332 7.13284 12.332 7.5V12.5C12.332 13.7877 11.2877 14.832 10 14.832C8.71226 14.832 7.66797 13.7877 7.66797 12.5V5.83301C7.66814 3.62494 9.45888 1.83496 11.667 1.83496C13.875 1.83514 15.6649 3.62505 15.665 5.83301V12.5C15.665 15.6287 13.1287 18.165 10 18.165C6.87131 18.165 4.33496 15.6287 4.33496 12.5Z"})),Rke=Object.freeze(Object.defineProperty({__proto__:null,default:Pke},Symbol.toStringTag,{value:"Module"})),Lke=R(()=>P(()=>import("./iqak4d8n645iefiy.js"),__vite__mapDeps([357,1])),{loading:t=>F(t)});function Oke({modelSupportedImageMimeTypes:t}){const e=An(mn),n=wi(),s=$t(),o=ne();return e?r.jsx(K.Item,{icon:Lke,onClick:async()=>{const a=await P(()=>import("./bwoo0o3orx877928.js"),__vite__mapDeps([358,10,1,11])).then(i=>i.getTabScreenshot());if(a)try{const i=atob(a.base64image),l=i.length,c=new Uint8Array(l);for(let u=0;u<l;u++)c[u]=i.charCodeAt(u);const d=new File([c],a.filename,{type:a.mimetype});ei.uploadFile(n,d,t,o,s,void 0,void 0,ho.Multimodal)}catch(i){}},children:r.jsx(j,{id:"HiFPUD",defaultMessage:"Attach screenshot"})},"attach_screenshot"):null}function oB(t,e){return new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"short",day:"numeric"}).format(e)}function Dke(t,e){return new Intl.DateTimeFormat(t.locale,{month:"short",day:"numeric"}).format(e)}const Fke=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)});function Bke({onAttachLibraryFile:t,attachedFileIds:e}){const n=ne(),[s,o]=_.useState(null),[a,i]=_.useState(!1),[l,c]=_.useState(null),d=_.useRef(!1),u=_.useMemo(()=>e==null?new Set:e instanceof Set?e:new Set(e),[e]),f=async g=>{i(!0),c(null);try{const h=await ge.safePost("/files/library",{requestBody:{limit:5,cursor:g}});o(x=>x?[...x,...h.items]:h.items)}catch(p){c(p.message)}finally{i(!1)}};function m(g){const p=g.lastIndexOf(".");return p>0?g.slice(0,p):g}return _.useEffect(()=>{d.current&&s==null&&!a&&f(null)},[d.current]),r.jsxs(K.Sub,{onOpenChange:g=>{d.current=g,g&&s==null&&!a&&f(null)},children:[r.jsx(K.SubMenuTrigger,{icon:Fke,children:r.jsx("div",{className:"line-clamp-1 text-ellipsis",children:r.jsx(j,w({},w7.addFromLibrary))})}),r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{children:[s==null&&a&&r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{})]}),l?r.jsx(K.Label,{children:r.jsx(j,{id:"fRTSh4",defaultMessage:"Failed to load library files"})}):(s==null?void 0:s.length)===0&&!a&&r.jsx(K.Label,{children:r.jsx(j,{id:"CalUoF",defaultMessage:"No results"})}),s==null?void 0:s.map(g=>r.jsx(K.Item,{className:"gap-2",size:"large",secondary:g.state==="failed"?"Failed":void 0,disabled:g.state!=="ready"||u.has(g.file_id),onClick:()=>{g.state!=="ready"||u.has(g.file_id)||(t==null||t({id:g.file_id,name:g.file_name,mimeType:g.mime_type,libraryFileId:g.id}),B.logEventWithStatsig("chatgpt_files_user_action","chatgpt_library_file_attached_to_conversation",{mimeType:g.mime_type}))},children:r.jsx(TR,{fileName:m(g.file_name),icon:r.jsx(Jb,{filename:g.file_name,contextConnectorInfo:void 0}),fileNameClass:"text-token-text-primary text-sm leading-[18px] font-normal tracking-[-0.3px]",customFileDescription:r.jsx("span",{className:"text-token-text-tertiary text-xs leading-4 font-normal tracking-[-0.1px]",children:r.jsx(j,U(w({},w7.fileDesc),{values:{category:fz(g.library_file_category),sep:"",date:Dke(n,new Date(g.file_upload_time))}}))})})},g.id))]})})]})}const w7=Se({addFromLibrary:{id:"hAUk/T",defaultMessage:"Recent files"},fileDesc:{id:"ContextConnectorLibraryFileDropdownItem.fileDesc",defaultMessage:"{category} {sep} {date}"}}),Uke=R(()=>P(()=>Promise.resolve().then(()=>lB),void 0),{loading:t=>F(t)}),$ke=t=>{"use forget";var ae,se,ce,X;const e=W.c(52),{conversation:n,layoutMode:s,selectedModelId:o,onSelectModelId:a}=t,i=V();let l;e[0]!==n?(l=()=>ea(n),e[0]=n,e[1]=l):l=e[1];const c=re(l);let d;e[2]!==n?(d=()=>mz(n),e[2]=n,e[3]=d):d=e[3];const u=re(d);let f;e[4]!==c.categories?(f=(ae=c.categories)!=null?ae:[],e[4]=c.categories,e[5]=f):f=e[5];const m=f;let g;e[6]!==c.categories||e[7]!==c.models||e[8]!==o?(g=(X=(se=c.categories.find(ee=>{var ie;return ee.defaultModel===o||((ie=ee.supportedModels)==null?void 0:ie.includes(o))}))==null?void 0:se.label)!=null?X:(ce=c.models.get(o))==null?void 0:ce.title,e[6]=c.categories,e[7]=c.models,e[8]=o,e[9]=g):g=e[9];const p=g;let h;e[10]!==m?(h=m.filter(Vke),e[10]=m,e[11]=h):h=e[11];const x=h;let v;e[12]!==m?(v=Td(m.filter(Hke),"subcategory"),e[12]=m,e[13]=v):v=e[13];const y=v;let b;e[14]!==x||e[15]!==y?(b={primaryGroup:x,subGroups:y},e[14]=x,e[15]=y,e[16]=b):b=e[16];const{primaryGroup:C,subGroups:S}=b;if(!JT(i))return null;let k;e[17]!==i?(k=ve(i,"3315017149"),e[17]=i,e[18]=k):k=e[18];const T=k,M=3+(T?9:0)+12*C.length+2+9+3;let A;e[19]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(j,{id:"RylQRg",defaultMessage:"Model"}),e[19]=A):A=e[19];let I;e[20]!==p?(I=r.jsx("span",{className:"max-w-40 truncate",children:p}),e[20]=p,e[21]=I):I=e[21];const N=!u;let L;e[22]!==I||e[23]!==N?(L=r.jsx(K.SubMenuTrigger,{icon:Uke,label:A,trailing:I,disabled:N}),e[22]=I,e[23]=N,e[24]=L):L=e[24];const O=s==="center"?"start":"end",D="min(var(--radix-dropdown-menu-content-available-height),calc(var(--spacing)*".concat(M,"))");let $;e[25]!==D?($={maxHeight:D},e[25]=D,e[26]=$):$=e[26];let H;e[27]!==T||e[28]!==c.title?(H=T&&r.jsx(K.Label,{children:c.title}),e[27]=T,e[28]=c.title,e[29]=H):H=e[29];let G;if(e[30]!==C||e[31]!==o){let ee;e[33]!==o?(ee=ie=>r.jsx(k7,{category:ie,isSelected:o===ie.defaultModel},ie.defaultModel),e[33]=o,e[34]=ee):ee=e[34],G=C.map(ee),e[30]=C,e[31]=o,e[32]=G}else G=e[32];let Z;e[35]!==o||e[36]!==S?(Z=Object.entries(S).map(ee=>{const[ie,de]=ee;return r.jsxs(K.Group,{children:[r.jsx(K.Label,{children:ie}),de.map(me=>r.jsx(k7,{category:me,isSelected:o===me.defaultModel},me.defaultModel))]},ie)}),e[35]=o,e[36]=S,e[37]=Z):Z=e[37];let Q;e[38]!==a||e[39]!==o||e[40]!==H||e[41]!==G||e[42]!==Z?(Q=r.jsxs(K.RadioGroup,{value:o,onValueChange:a,children:[H,G,Z]}),e[38]=a,e[39]=o,e[40]=H,e[41]=G,e[42]=Z,e[43]=Q):Q=e[43];let q;e[44]===Symbol.for("react.memo_cache_sentinel")?(q=!1,e[44]=q):q=e[44];let Y;e[45]!==O||e[46]!==$||e[47]!==Q?(Y=r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{align:O,style:$,children:[Q,q]})}),e[45]=O,e[46]=$,e[47]=Q,e[48]=Y):Y=e[48];let te;return e[49]!==L||e[50]!==Y?(te=r.jsxs(K.Sub,{children:[L,Y]},"models-menu"),e[49]=L,e[50]=Y,e[51]=te):te=e[51],te},k7=t=>{"use forget";const e=W.c(12),{category:n,isSelected:s}=t,o=ne();let a;e[0]!==n.isAlpha||e[1]!==n.isBeta||e[2]!==n.modelBadge||e[3]!==o?(a=n.isBeta?o.formatMessage({id:"Mu+7v6",defaultMessage:"Beta"}):n.isAlpha?o.formatMessage({id:"chDss2",defaultMessage:"Alpha"}):n.modelBadge,e[0]=n.isAlpha,e[1]=n.isBeta,e[2]=n.modelBadge,e[3]=o,e[4]=a):a=e[4];const i=a,l=s?"selected":"default";let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(K.RadioItemCheck,{}),e[5]=c):c=e[5];let d;return e[6]!==i||e[7]!==n.defaultModel||e[8]!==n.description||e[9]!==n.label||e[10]!==l?(d=r.jsx(K.RadioItem,{value:n.defaultModel,color:l,trailing:c,label:n.label,secondary:n.description,badge:i,disabled:!1}),e[6]=i,e[7]=n.defaultModel,e[8]=n.description,e[9]=n.label,e[10]=l,e[11]=d):d=e[11],d};function Vke(t){return t.subcategory==null}function Hke(t){return t.subcategory!=null}function wy(t){"use forget";const e=W.c(7),{systemHint:n}=t;if(!E7(n))return null;const o=n.isDangerous&&"text-token-interactive-label-danger-secondary-default border-token-border-status-error";let a;e[0]!==o?(a=z(o),e[0]=o,e[1]=a):a=e[1];let i;e[2]!==n?(i=E7(n),e[2]=n,e[3]=i):i=e[3];let l;return e[4]!==a||e[5]!==i?(l=r.jsx(ed,{className:a,children:i}),e[4]=a,e[5]=i,e[6]=l):l=e[6],l}function E7(t){if(t.badgeText!=null)return t.badgeText;switch(t.badgeType){case u_.DEV:return r.jsx(j,{defaultMessage:"Dev",id:"allConnectors.dev.mcp"});case u_.BETA:return r.jsx(j,{defaultMessage:"Beta",id:"allConnectors.beta.mcp"});case u_.CUSTOM:return r.jsx(j,{defaultMessage:"Custom",id:"allConnectors.custom.mcp"})}if(t.isDangerous)return r.jsx(j,{id:"w+mmPI",defaultMessage:"DEV"})}const Gke=R(()=>P(()=>import("./kx5ebq6upb7tomcz.js"),__vite__mapDeps([227,1])),{loading:t=>F(t)}),Wke=[];function OXe(t){"use forget";const e=W.c(49),{composerController:n,activeSystemHintType:s,systemHints:o,clientThreadId:a,disabled:i}=t,l=i===void 0?!1:i,c=$s(),d=M8(),u=V();let f;e[0]!==a||e[1]!==c?(f=se=>{c(se,{analyticsMetadata:{clientThreadId:a}})},e[0]=a,e[1]=c,e[2]=f):f=e[2];const m=f;let g;e[3]!==a?(g={clientThreadId:a},e[3]=a,e[4]=g):g=e[4];const p=g;let h;e[5]!==p?(h=function(){B.logEventWithStatsig("Composer System Hint Button Hovered","composer_system_hint_button_hovered",p)},e[5]=p,e[6]=h):h=e[6];const x=h;let v;e[7]!==p||e[8]!==u?(v=function(){ze(u,"1092897457").get("is_tatertot_enabled",!0),B.logEventWithStatsig("Composer System Hint Button Clicked","composer_system_hint_button_clicked",p)},e[7]=p,e[8]=u,e[9]=v):v=e[9];const y=v;let b;e[10]!==n?(b=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{no(Pt(n))})})},e[10]=n,e[11]=b):b=e[11];const C=b,S=ne(),[E,k]=_.useState(!1),T=s!=null,M=!T,A=_.useRef(!1),I=_.useRef(!1);let N;e[12]!==y||e[13]!==C?(N=se=>{k(se),se?y==null||y():requestAnimationFrame(()=>{requestAnimationFrame(()=>{A.current&&(A.current=!1,C())})})},e[12]=y,e[13]=C,e[14]=N):N=e[14];let L;e[15]!==E?(L=nv(E),e[15]=E,e[16]=L):L=e[16];let O;e[17]!==S?(O=S.formatMessage({id:"mJYhKI",defaultMessage:"Choose tool"}),e[17]=S,e[18]=O):O=e[18];let D;e[19]===Symbol.for("react.memo_cache_sentinel")?(D=r.jsx(Gke,{"aria-label":"",className:"icon"}),e[19]=D):D=e[19];let $;e[20]!==M?($=M&&r.jsx("span",{className:"ms-1.5 me-0.5",children:r.jsx(j,{id:"mNL7WC",defaultMessage:"Tools"})}),e[20]=M,e[21]=$):$=e[21];let H;e[22]!==l||e[23]!==x||e[24]!==$||e[25]!==L||e[26]!==O?(H=r.jsxs(K.BasicTrigger,{className:"composer-btn px-2","data-opened":L,"aria-label":O,id:"system-hint-button",disabled:l,onPointerOver:x,onClick:qke,onFocusCapture:zke,children:[D,$]}),e[22]=l,e[23]=x,e[24]=$,e[25]=L,e[26]=O,e[27]=H):H=e[27];let G;e[28]!==l||e[29]!==T||e[30]!==H?(G=r.jsx(Zke,{disabled:l,hintSelected:T,children:H}),e[28]=l,e[29]=T,e[30]=H,e[31]=G):G=e[31];let Z,Q;e[32]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>{I.current=!0},Q=se=>{var ce;if(!I.current||A.current){se.preventDefault();return}(ce=document.querySelector("#system-hint-button"))==null||ce.focus()},e[32]=Z,e[33]=Q):(Z=e[32],Q=e[33]);let q;e[34]!==M?(q=!M&&r.jsx(K.Label,{children:r.jsx(j,{id:"KSn3Jr",defaultMessage:"Tools"})}),e[34]=M,e[35]=q):q=e[35];let Y;e[36]!==d||e[37]!==s||e[38]!==m||e[39]!==o?(Y=r.jsx(Gg,{systemHints:o,activeConnectorSystemHintTypes:d,selectedHintType:s,onSelectHintType:m,isLoadingConnectorsForSystemHints:!1}),e[36]=d,e[37]=s,e[38]=m,e[39]=o,e[40]=Y):Y=e[40];let te;e[41]!==q||e[42]!==Y?(te=r.jsx(K.Portal,{children:r.jsxs(K.Content,{size:"auto",alignOffset:-7,onEscapeKeyDown:Z,onCloseAutoFocus:Q,children:[q,Y]})}),e[41]=q,e[42]=Y,e[43]=te):te=e[43];let ae;return e[44]!==E||e[45]!==G||e[46]!==te||e[47]!==N?(ae=r.jsxs(K.Root,{open:E,onOpenChange:N,children:[G,te]}),e[44]=E,e[45]=G,e[46]=te,e[47]=N,e[48]=ae):ae=e[48],ae}function zke(t){t.stopPropagation()}function qke(t){t.preventDefault()}const Gg=({systemHints:t,activeConnectorSystemHintTypes:e,selectedHintType:n,onSelectHintType:s,isLoadingConnectorsForSystemHints:o})=>r.jsx(K.RadioGroup,{value:n!=null?n:void 0,onValueChange:a=>{s(a===n?null:a)},children:t?r.jsxs(r.Fragment,{children:[t.map(a=>r.jsx(Yke,{hint:a,isSelected:n===a.systemHint||z3(n)&&(e==null?void 0:e.has(a.systemHint))},a.systemHint)),o&&r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{size:"short"}),r.jsx(K.Shimmer,{size:"short"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{size:"short"}),r.jsx(K.Shimmer,{size:"short"})]})}),Yke=t=>{"use forget";var p;const e=W.c(22),{hint:n,isSelected:s}=t,o=V7e(n.systemHint);let a;e[0]!==n.systemHint?(a=Wke.includes(n.systemHint),e[0]=n.systemHint,e[1]=a):a=e[1];const i=a;if(n.hideFromInitialSelection&&!s)return null;const l=s?"selected":"default";let c;e[2]!==n?(c=r.jsx(fl,{hint:n,isNextToLabel:!0}),e[2]=n,e[3]=c):c=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(K.RadioItemCheck,{}),e[4]=d):d=e[4];const u=(p=n.actionLabel)!=null?p:n.name;let f;e[5]!==n||e[6]!==i?(f=i?r.jsx(ed,{children:r.jsx(j,{id:"composer.skills.new",defaultMessage:"New"})}):r.jsx(wy,{systemHint:n}),e[5]=n,e[6]=i,e[7]=f):f=e[7];let m;e[8]!==n.systemHint||e[9]!==o.blockedLabel||e[10]!==o.isBlocked||e[11]!==l||e[12]!==c||e[13]!==u||e[14]!==f?(m=r.jsx(K.RadioItem,{value:n.systemHint,disabled:o.isBlocked,color:l,icon:c,trailing:d,label:u,secondary:o.blockedLabel,children:f}),e[8]=n.systemHint,e[9]=o.blockedLabel,e[10]=o.isBlocked,e[11]=l,e[12]=c,e[13]=u,e[14]=f,e[15]=m):m=e[15];const g=m;if(o.remainingLabel){const h=o.isBlocked?"left":"center",x=o.isBlocked?void 0:null;let v;return e[16]!==g||e[17]!==o.remainingLabel||e[18]!==o.remainingLabelSecondary||e[19]!==h||e[20]!==x?(v=r.jsx(pt,{side:"right",labelTextAlign:h,label:o.remainingLabel,secondaryLabel:o.remainingLabelSecondary,contentClassName:"cant-hover:hidden",triggerAs:x,children:g}),e[16]=g,e[17]=o.remainingLabel,e[18]=o.remainingLabelSecondary,e[19]=h,e[20]=x,e[21]=v):v=e[21],v}return g},Zke=({disabled:t,children:e,hintSelected:n})=>{const s=V(),o=lt(Oe.hasSeenComposerSystemHintButtonTooltip),a=Kke(),i=!t&&!a.isLoading&&a.eligible,l=!t&&!o.isLoading&&o.eligible,c=_.useMemo(()=>{if(i)return{announcementKey:Oe.hasSeenConnectorsSourcesPillTooltip,title:r.jsx(j,{id:"qgvuHg",defaultMessage:"Search connected apps"}),onDismiss:()=>ot(s,Oe.hasSeenConnectorsSourcesPillTooltip),description:r.jsx(j,{id:"bJE6uS",defaultMessage:"Get insights across Google Drive, SharePoint, Dropbox, and more."})};if(l)return{announcementKey:Oe.hasSeenComposerSystemHintButtonTooltip,title:r.jsx(j,{id:"tTydhk",defaultMessage:"All your tools, in one handy place"}),onDismiss:()=>ot(s,Oe.hasSeenComposerSystemHintButtonTooltip),description:r.jsx(j,{id:"Kgb5fv",defaultMessage:"Create an image, research report, and more."})}},[s,l,i]);if(_.useEffect(()=>{c&&(c.announcementKey===Oe.hasSeenComposerSystemHintButtonTooltip?B.logUpsellOrModalEvent(dn,{eventId:"composer_system_hint_button_tooltip_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}):c.announcementKey===Oe.hasSeenConnectorsSourcesPillTooltip&&B.logUpsellOrModalEvent(dn,{eventId:"connectors_sources_pill_tooltip_shown",type:rn.UPSELL_OR_MODAL_TYPE_NUX_TOOLTIP}))},[c]),!n&&!i)return e;if(c)return r.jsx(Vd,U(w({show:!0,side:"bottom",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!"},c),{children:e}));let d;return t?d=r.jsx(j,{id:"uw9x80",defaultMessage:"Tools unavailable"}):d=r.jsx(j,{id:"Yr1zf1",defaultMessage:"Choose tool"}),r.jsx(pt,{side:"bottom",label:d,children:e})},Kke=()=>{var u;const t=V(),e=re(()=>Mo(t)),{data:n,isLoading:s}=_h(),{eligible:o,markAsViewedDontInvalidateCache:a,isLoading:i}=lt(Oe.hasSeenConnectorsSourcesPillTooltip),l=(u=n==null?void 0:n.announcements)==null?void 0:u[Oe.hasSeenConnectorsNuxModal],c=!!(l&&FT(new Date,new Date(l))>=1);return{eligible:o&&c&&e!=null&&e.some(f=>f.systemHint===Pe.Slurm),isLoading:s||i,markAsViewedDontInvalidateCache:a}},Qke=R(()=>P(()=>Promise.resolve().then(()=>cke),void 0).then(t=>t.AgentNuxModal));function DXe(t){"use forget";var j4;const e=W.c(140),{conversation:n,composerController:s,composerDisabled:o,layoutMode:a,shouldUseBottomSheet:i,openFileDialog:l,modelSupportedImageMimeTypes:c,isFileUploadEnabled:d,fileUploadDisabledReason:u,currentModelId:f,currentModelConfig:m,selectModelId:g,connectorConfig:p,onSelectConnector:h,availableSystemHints:x,activeConnectorSystemHintTypes:v,activeSystemHintType:y}=t,b=V(),C=ne();let S;e[0]!==b?(S=$8(b),e[0]=b,e[1]=S):S=e[1];const E=S,k=U8(),T=k!=null,M=c.length>0,A=wi(),I=sv(e9e),N=Pl();let L;e[2]!==s?(L=K5(s),e[2]=s,e[3]=L):L=e[3];const O=re(L.isWhisperActive$);let D;e[4]!==s?(D=WF(s),e[4]=s,e[5]=D):D=e[5];const{shouldHighlight$:$}=D;let H;e[6]!==$?(H=()=>$(),e[6]=$,e[7]=H):H=e[7];const G=re(H);let Z;e[8]!==b?(Z=()=>gz(b),e[8]=b,e[9]=Z):Z=e[9];const Q=re(Z),q=XF();let Y;e[10]!==q||e[11]!==n.id||e[12]!==b?(Y=()=>{q==="show"&&dt(b,Qke,{clientThreadId:n.id,source:"composer_system_hint"})},e[10]=q,e[11]=n.id,e[12]=b,e[13]=Y):Y=e[13];const te=Y,ae=$s(),se=T8();let ce;e[14]!==se||e[15]!==s||e[16]!==n.id||e[17]!==te||e[18]!==ae||e[19]!==i||e[20]!==E.composer?(ce=Vs=>{Vs!=null&&(pz(Vs)?se(Vs,{analyticsMetadata:{clientThreadId:n.id}}):ae(Vs,{analyticsMetadata:{clientThreadId:n.id}}),Vs===Pe.Agent&&te(),i&&!E.composer.autofocusDisabled$()&&no(Pt(s)))},e[14]=se,e[15]=s,e[16]=n.id,e[17]=te,e[18]=ae,e[19]=i,e[20]=E.composer,e[21]=ce):ce=e[21];const X=ce;let ee;e[22]!==b?(ee=XO(b,!0),e[22]=b,e[23]=ee):ee=e[23];const{showRecentFilesDropdown:ie}=ee;let de;e[24]!==b?(de=tt(b),e[24]=b,e[25]=de):de=e[25];const me=de;let xe;e[26]!==b?(xe=()=>Id(b),e[26]=b,e[27]=xe):xe=e[27];const pe=re(xe),{isCombinedList:Me,fullyCollapsedToolMenu:Ce,showSlashHint:ke,showModelsInPlusMenu:Le}=pe,De=Ce&&!i,le=Le&&!i,oe=x==null||x.length>0,Ee=!Me&&!i&&oe&&((j4=x==null?void 0:x.length)!=null?j4:0)>5,be=Array.from(p.values()).some(Xke);let fe;e[28]!==b?(fe=()=>H3(b),e[28]=b,e[29]=fe):fe=e[29];const ue=re(fe),_e=N||i&&ue.noExplicitAddFromSocial;let Te;e[30]!==p||e[31]!==be||e[32]!==_e||e[33]!==d||e[34]!==me||e[35]!==h||e[36]!==i?(Te=me&&d&&i&&!_e&&be?r.jsx(K.Group,{children:r.jsx(Sy,{includeAction:!0,shortName:!0,connectorConfig:p,onConnectorClick:h})},"connect-apps"):null,e[30]=p,e[31]=be,e[32]=_e,e[33]=d,e[34]=me,e[35]=h,e[36]=i,e[37]=Te):Te=e[37];const $e=Te;let Ne;e[38]!==v||e[39]!==y||e[40]!==x||e[41]!==$e||e[42]!==De||e[43]!==oe||e[44]!==Q||e[45]!==me||e[46]!==a||e[47]!==X?(Ne=De&&me&&(oe||$e)?r.jsxs(a4e,{layoutMode:a,children:[r.jsx(K.Group,{children:r.jsx(Gg,{systemHints:x,activeConnectorSystemHintTypes:v,selectedHintType:y,onSelectHintType:X,isLoadingConnectorsForSystemHints:Q})}),$e]},"tools-menu"):null,e[38]=v,e[39]=y,e[40]=x,e[41]=$e,e[42]=De,e[43]=oe,e[44]=Q,e[45]=me,e[46]=a,e[47]=X,e[48]=Ne):Ne=e[48];let Ae;e[49]!==n||e[50]!==f||e[51]!==a||e[52]!==g||e[53]!==le?(Ae=le?r.jsx($ke,{conversation:n,layoutMode:a,selectedModelId:f!=null?f:"",onSelectModelId:Vs=>{g(Vs,"plus menu")}},"models-menu"):null,e[49]=n,e[50]=f,e[51]=a,e[52]=g,e[53]=le,e[54]=Ae):Ae=e[54];let He;e[55]!==Ne||e[56]!==Ae?(He=[Ne,Ae].filter(Jke),e[55]=Ne,e[56]=Ae,e[57]=He):He=e[57];const Qe=He;let et;e[58]!==x||e[59]!==Ee?(et=x&&(Ee?x.slice(0,4):x),e[58]=x,e[59]=Ee,e[60]=et):et=e[60];const Ct=et;let vt;e[61]!==N||e[62]!==Qe?(vt=Qe.length>0&&!N?r.jsx(K.Group,{children:Qe},"submenus"):null,e[61]=N,e[62]=Qe,e[63]=vt):vt=e[63];const At=vt,Ht=i?"sheet":void 0,Ot=!d,Vt=m==null?void 0:m.title;let en;e[64]!==n.id||e[65]!==u||e[66]!==M||e[67]!==l||e[68]!==k||e[69]!==Ht||e[70]!==Ot||e[71]!==Vt?(en=r.jsx(ND,{openFileDialog:l,modelSupportsImages:M,mode:Ht,showMenuForNoAuth:!1,isDisabled:Ot,disabledReason:u,currentModelName:Vt,rateLimitInfo:k,clientThreadId:n.id}),e[64]=n.id,e[65]=u,e[66]=M,e[67]=l,e[68]=k,e[69]=Ht,e[70]=Ot,e[71]=Vt,e[72]=en):en=e[72];let Qt;e[73]!==I||e[74]!==p||e[75]!==A||e[76]!==d||e[77]!==me||e[78]!==c||e[79]!==M||e[80]!==h||e[81]!==i||e[82]!==ie?(Qt=me&&r.jsxs(r.Fragment,{children:[d&&M&&r.jsx(sB,{modelSupportedImageMimeTypes:c}),!i&&d&&r.jsx(Sy,{includeAction:!0,shortName:!0,connectorConfig:p,onConnectorClick:h}),ie&&r.jsx(Bke,{attachedFileIds:I,onAttachLibraryFile:Vs=>rr.attachLibraryFile(A,Vs)}),r.jsx(eB,{}),r.jsx(Oke,{modelSupportedImageMimeTypes:c})]}),e[73]=I,e[74]=p,e[75]=A,e[76]=d,e[77]=me,e[78]=c,e[79]=M,e[80]=h,e[81]=i,e[82]=ie,e[83]=Qt):Qt=e[83];let tn;e[84]!==en||e[85]!==Qt?(tn=r.jsxs(K.Group,{className:"content-sheet:content-sheet-inset-section",children:[en,Qt]},"add-files"),e[84]=en,e[85]=Qt,e[86]=tn):tn=e[86];const gn=Me&&At;let In;e[87]!==v||e[88]!==y||e[89]!==x||e[90]!==Ct||e[91]!==$e||e[92]!==De||e[93]!==oe||e[94]!==N||e[95]!==Q||e[96]!==me||e[97]!==a||e[98]!==X||e[99]!==Ee?(In=(!De||!me)&&oe&&!N&&r.jsxs(K.Group,{children:[r.jsx(Gg,{systemHints:Ct,activeConnectorSystemHintTypes:v,selectedHintType:y,onSelectHintType:X,isLoadingConnectorsForSystemHints:Ee?!1:Q}),Ee&&r.jsxs(o4e,{layoutMode:a,children:[r.jsx(K.Group,{children:r.jsx(Gg,{systemHints:x==null?void 0:x.slice(4),activeConnectorSystemHintTypes:v,selectedHintType:y,onSelectHintType:X,isLoadingConnectorsForSystemHints:Q})}),$e]})]},"system-hints"),e[87]=v,e[88]=y,e[89]=x,e[90]=Ct,e[91]=$e,e[92]=De,e[93]=oe,e[94]=N,e[95]=Q,e[96]=me,e[97]=a,e[98]=X,e[99]=Ee,e[100]=In):In=e[100];const bt=(!De||!me)&&!N&&$e&&(!Ee||!oe||i)&&$e,Nt=!Me&&At;let ls;e[101]!==me?(ls=!me&&r.jsx(i4e,{},"upsell"),e[101]=me,e[102]=ls):ls=e[102];let oo;e[103]!==C||e[104]!==N||e[105]!==ke?(oo=ke&&!N&&r.jsx(K.Group,{children:r.jsx("div",{className:"text-token-text-tertiary p-2 text-center text-sm",children:C.formatMessage({id:"composer.plusMenu.typeSlashForQuickAccess",defaultMessage:"Type '/' for quick access"})})},"slash-hint"),e[103]=C,e[104]=N,e[105]=ke,e[106]=oo):oo=e[106];let Ni;e[107]!==tn||e[108]!==gn||e[109]!==In||e[110]!==bt||e[111]!==Nt||e[112]!==ls||e[113]!==oo?(Ni=r.jsxs(r.Fragment,{children:[tn,gn,In,bt,Nt,ls,oo]}),e[107]=tn,e[108]=gn,e[109]=In,e[110]=bt,e[111]=Nt,e[112]=ls,e[113]=oo,e[114]=Ni):Ni=e[114];const jn=Ni,Pi=i?"sheet":"dropdown";let zl;e[115]!==s||e[116]!==E.composer?(zl=Vs=>{E.composer.autofocusDisabled$()||(Vs.preventDefault(),no(Pt(s)))},e[115]=s,e[116]=E.composer,e[117]=zl):zl=e[117];let ql;e[118]!==C||e[119]!==me?(ql=me?C.formatMessage({id:"composer.plusMenu.label",defaultMessage:"Add files and more"}):C.formatMessage({id:"composer.plusMenu.label.loggedOut",defaultMessage:"Add photos and more"}),e[118]=C,e[119]=me,e[120]=ql):ql=e[120];let Em;e[121]===Symbol.for("react.memo_cache_sentinel")?(Em=r.jsx("kbd",{className:"bg-token-bg-tertiary -me-1 inline-grid aspect-square w-4 items-center justify-center rounded-sm text-[11px]",children:r.jsx("span",{children:"/"})}),e[121]=Em):Em=e[121];const e_=d?l:void 0;let Yl;e[122]!==b?(Yl=Vs=>{if(jh())return;const N4=G5(b);N4.isKeyboardOpen()&&(Vs.preventDefault(),N4.closeKeyboard(()=>{bm(b).isSheetOpen$.set(!0)}))},e[122]=b,e[123]=Yl):Yl=e[123];let Zl;e[124]!==O||e[125]!==e_||e[126]!==Yl?(Zl=r.jsx(n4e,{onDoubleClick:e_,onPointerDown:Yl,disabled:O}),e[124]=O,e[125]=e_,e[126]=Yl,e[127]=Zl):Zl=e[127];let Kl;e[128]!==o||e[129]!==n.id||e[130]!==G||e[131]!==ql||e[132]!==Zl?(Kl=r.jsx(MD,{disabled:o,clientThreadId:n.id,rateLimitPopup:null,highlightTooltip:G,label:ql,secondaryLabel:Em,children:Zl}),e[128]=o,e[129]=n.id,e[130]=G,e[131]=ql,e[132]=Zl,e[133]=Kl):Kl=e[133];let Tm;return e[134]!==T||e[135]!==jn||e[136]!==Pi||e[137]!==zl||e[138]!==Kl?(Tm=r.jsx(e4e,{mode:Pi,onCloseAutoFocus:zl,items:jn,fileUploadRateLimited:T,children:Kl}),e[134]=T,e[135]=jn,e[136]=Pi,e[137]=zl,e[138]=Kl,e[139]=Tm):Tm=e[139],Tm}function Jke(t){return t!=null}function Xke(t){return t.access_token!=null}function e9e(t){return t.files.map(n9e).filter(t9e)}function t9e(t){return t!=null}function n9e(t){return t.fileId}const s9e=R(()=>P(()=>import("./dwgk7r4s1fwn35jq.js"),__vite__mapDeps([142,1])),{loading:t=>F(t)}),o9e=R(()=>P(()=>import("./i0w6h8cy9aqse20k.js"),__vite__mapDeps([143,1])),{loading:t=>F(t)}),aB=_.createContext({isScrolling:!1});function a9e(){"use forget";return _.useContext(aB)}function FXe({items:t,getItemKey:e,onRenderItem:n,itemClassName:s,loadingItemClassName:o,getItemStyle:a,onShown:i,onClick:l,className:c,arrowClassName:d,numLoadingItems:u,theme:f="default"}){"use no forget";const m=V(),g=re(()=>mn(m)),[p,h]=_.useState(!1),[x,v]=_.useState(!1),[y,b]=_.useState(!1),C=_.useRef(null),S=_.useRef(void 0),E=_.useRef(!1),k=_.useRef(!1),T=_.useRef(0),M=_.useRef(null),A=_.useRef([]),I=_.useRef(null),N=8,L=_.useRef([]),O=_.useCallback(()=>{I.current!=null&&(cancelAnimationFrame(I.current),I.current=null)},[]),D=_.useCallback(X=>{const ee=C.current;if(!ee)return;const ie=ee.scrollWidth-ee.clientWidth;if(ie<=0)return;const de=.0045,me=ee.scrollLeft,xe=me+X/de,pe=Math.min(Math.max(xe,0),ie),Me=pe-me;if(Math.abs(Me)<.5)return;const Ce=performance.now(),ke=()=>{const Le=C.current;if(!Le){I.current=null;return}const De=performance.now()-Ce,le=Me*Math.exp(-de*De),oe=pe-le,Ee=Le.scrollWidth-Le.clientWidth,be=Math.min(Math.max(oe,0),Ee);Le.scrollLeft=be,Math.abs(le)>.5&&be>0&&be<Ee?I.current=requestAnimationFrame(ke):I.current=null};O(),I.current=requestAnimationFrame(ke)},[O]),$=_.useCallback(X=>{X.button!==0&&X.button!==1||(O(),E.current=!0,k.current=!1,T.current=X.clientX,M.current=X.clientX,A.current=[])},[O]),H=_.useCallback(X=>{var me;const ee=C.current;if(!ee||!E.current&&!ee.hasPointerCapture(X.pointerId))return;if(!p)if(Math.abs(X.clientX-T.current)>=N){h(!0),k.current=!0;try{X.currentTarget.setPointerCapture(X.pointerId)}catch(pe){}}else return;const ie=(me=M.current)!=null?me:X.clientX-(X.movementX||0),de=X.clientX-ie;if(M.current=X.clientX,de!==0){const xe=-de;ee.scrollLeft+=xe;const pe=A.current,Me=X.timeStamp;pe.push({time:Me,delta:xe});const Ce=Me-100;for(;pe.length>0&&pe[0].time<Ce;)pe.shift()}},[p,k,T,N]),G=_.useCallback(X=>{const ee=C.current;if(!ee)return;try{ee.hasPointerCapture(X.pointerId)&&ee.releasePointerCapture(X.pointerId)}catch(xe){}E.current=!1,h(!1);const ie=A.current;let de=0;if(ie.length>=2){const xe=ie[0],Me=ie[ie.length-1].time-xe.time||1;de=ie.reduce((ke,Le)=>ke+Le.delta,0)/Me}A.current=[],M.current=null,k.current&&Math.abs(de)>.05&&D(de)},[D]),Z=_.useCallback(X=>{k.current&&(X.preventDefault(),X.stopPropagation(),k.current=!1)},[]),Q=_.useCallback(X=>{var ee;(ee=C.current)!=null&&ee.hasPointerCapture(X.pointerId)||G(X)},[G]),q=_.useCallback(X=>{X.preventDefault(),X.stopPropagation()},[]);_.useEffect(()=>()=>O(),[O]),Jn(()=>{if(!C.current)return;const X=C.current,ee=()=>{v(!0),clearTimeout(S.current),S.current=setTimeout(()=>v(!1),150)};return X.addEventListener("scroll",ee,{passive:!0}),()=>{X.removeEventListener("scroll",ee),clearTimeout(S.current),v(!1)}},[C]),Jn(()=>Hl({axis:"width",target:C.current,onChange:({width:X})=>{C.current&&b(C.current.scrollWidth>X)}}),[t]);const Y=!C.current||C.current.scrollLeft===0,te=!!C.current&&C.current.scrollLeft+C.current.clientWidth>=C.current.scrollWidth,ae=_.useCallback(()=>{if(!C.current)return;const X=C.current;X.scrollTo({left:X.scrollLeft+X.clientWidth,behavior:"smooth"})},[]),se=_.useCallback(()=>{if(!C.current)return;const X=C.current;X.scrollTo({left:X.scrollLeft-X.clientWidth,behavior:"smooth"})},[]),ce=f==="contained";return r.jsxs("div",{className:z("group relative overflow-hidden",ce?"rounded-xl":"-my-3 py-3"),children:[r.jsx("div",{ref:C,onPointerDown:y?$:void 0,onPointerMove:y?H:void 0,onPointerUp:y?G:void 0,onPointerCancel:y?G:void 0,onLostPointerCapture:y?G:void 0,onPointerLeave:y?Q:void 0,onDragStartCapture:y?q:void 0,onClickCapture:y?Z:void 0,onAuxClickCapture:y?Z:void 0,className:z("relative w-full touch-none","no-scrollbar touch-pan-y overflow-x-auto overflow-y-hidden overscroll-x-contain",y&&(p?"cursor-grabbing select-none":"cursor-grab"),!ce&&(g?"scroll-px-[var(--thread-content-margin)] px-[var(--thread-content-margin)]":"scroll-px-6 px-6")),children:r.jsx("div",{className:"relative w-max",children:r.jsx(aB.Provider,{value:{isScrolling:p||x},children:r.jsxs("ul",{className:z("not-prose relative flex list-none items-stretch gap-2 px-0",c),children:[t.map((X,ee)=>r.jsx("li",{ref:ie=>{L.current[ee]=ie},className:z("not-prose border-token-border-default border-thin hover:border-token-border-heavy relative overflow-hidden",ce?"rounded-xl":"rounded-lg",s),style:a==null?void 0:a(X),children:r.jsx(r9e,{item:X,onRenderItem:ie=>n(ie,ee),onShown:i?()=>i(X,ee):void 0,onClick:l?()=>l(X,ee):void 0,containerRef:C})},e(X))),EL(u!=null?u:0,X=>r.jsx("li",{className:z("not-prose border-token-border-default border-thin hover:border-token-border-heavy relative overflow-hidden",ce?"rounded-xl":"rounded-lg",s,o),children:r.jsx("div",{className:"loading-results-shimmer h-full w-full"})},"loading-".concat(X)))]})})})}),y&&r.jsxs(r.Fragment,{children:[r.jsx(T7,{side:"left",onClick:se,isFullyScrolled:Y,theme:f,className:d}),r.jsx(T7,{side:"right",onClick:ae,isFullyScrolled:te,theme:f,className:d})]})]})}function r9e(t){"use forget";const e=W.c(12),{item:n,onRenderItem:s,onShown:o,onClick:a,containerRef:i}=t,l=_.useRef(null),c=_.useRef(o);let d,u;e[0]!==o?(d=()=>{c.current=o},u=[o],e[0]=o,e[1]=d,e[2]=u):(d=e[1],u=e[2]),_.useEffect(d,u);let f,m;e[3]!==i?(f=()=>{if(!l.current)return;const h=new IntersectionObserver(x=>{const[v]=x;return v.isIntersecting&&c.current&&c.current()},{root:i.current,threshold:.5});return h.observe(l.current),()=>h.disconnect()},m=[i],e[3]=i,e[4]=f,e[5]=m):(f=e[4],m=e[5]),Jn(f,m);let g;e[6]!==n||e[7]!==s?(g=s(n),e[6]=n,e[7]=s,e[8]=g):g=e[8];let p;return e[9]!==a||e[10]!==g?(p=r.jsx("div",{ref:l,className:"h-full w-full overflow-hidden",onClick:a,children:g}),e[9]=a,e[10]=g,e[11]=p):p=e[11],p}function T7(t){"use forget";const e=W.c(11),{side:n,onClick:s,isFullyScrolled:o,theme:a,className:i}=t,l=a==="contained";let c;e[0]!==i||e[1]!==o||e[2]!==l||e[3]!==n?(c=z("bg-token-bg-primary hover:bg-token-bg-secondary pointer-events-none absolute top-[50%] -translate-y-1/2 py-1","transition-translate-x opacity-0 duration-150 ease-out",n==="left"?["start-0 -translate-x-full rounded-e-full",l?"ps-1.5 pe-2":"ps-1 pe-1.5"]:["end-0 translate-x-full rounded-s-full",l?"ps-2 pe-1.5":"ps-1.5 pe-1"],!o&&"delay-100 group-hover:pointer-events-auto group-hover:translate-x-0 group-hover:opacity-100",l?"h-[calc(100%-12px)]":"shadow-long",i),e[0]=i,e[1]=o,e[2]=l,e[3]=n,e[4]=c):c=e[4];let d;e[5]!==n?(d=n==="left"?r.jsx(o9e,{className:"icon-sm"}):r.jsx(s9e,{className:"icon-sm"}),e[5]=n,e[6]=d):d=e[6];let u;return e[7]!==s||e[8]!==c||e[9]!==d?(u=r.jsx("button",{onClick:s,className:c,children:d}),e[7]=s,e[8]=c,e[9]=d,e[10]=u):u=e[10],u}const i9e=({root:t=void 0,rootMargin:e="0px",threshold:n=0,onlyOnce:s=!1})=>{const[o,a]=_.useState(!1),i=_.useCallback(l=>{if(!l)return;const c=new IntersectionObserver(d=>{for(const u of d)u.isIntersecting?(a(!0),s&&l&&c.unobserve(l)):a(!1)},{root:t,rootMargin:e,threshold:n});return c.observe(l),()=>{c.unobserve(l)}},[t,e,n,s]);return[o,i]},l9e=350,c9e=150;function rB({favicon:t,heading:e,title:n,quoteHeading:s,quoteText:o,snippet:a,isContentBlocked:i,theme:l,children:c}){const[d,u]=_.useState(!1),f=_.useRef(null),m=_.useRef(null),g=_.useRef(!1),{isScrolling:p}=a9e(),h=s!=null||o!=null,[x,v]=i9e({threshold:.75}),y=_.useCallback(()=>{f.current&&clearTimeout(f.current)},[]),b=_.useCallback(()=>{m.current&&clearTimeout(m.current)},[]),C=_.useCallback(()=>{u(!1)},[]),S=_.useCallback(M=>{M.stopPropagation(),g.current=!0,b(),f.current=setTimeout(()=>{g.current&&u(!0)},l9e)},[b]),E=_.useCallback(M=>{M.stopPropagation(),g.current=!1,y(),m.current=setTimeout(()=>{C()},c9e)},[y,C]);_.useEffect(()=>{d&&b()},[d,b]),_.useEffect(()=>{p&&C()},[p,C]);const k=_.useMemo(()=>({onBlur:E,onMouseLeave:E,onMouseEnter:S,onFocus:S}),[E,S]),T=x&&d&&!p;return r.jsxs(Dl,{open:T,children:[r.jsx(yr,U(w({ref:v,asChild:!0},k),{children:c})),r.jsx(Fl,{children:r.jsx(Bl,U(w({side:"top",align:"start",sideOffset:4},k),{onOpenAutoFocus:M=>M.preventDefault(),onCloseAutoFocus:M=>M.preventDefault(),className:z(hz,l==="grey"&&"bg-token-bg-primary!","relative w-64 text-sm focus:outline-none"),collisionPadding:8,onPointerDown:M=>M.stopPropagation(),children:r.jsxs("div",{className:"rounded-xl px-3 py-1.5 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[t,r.jsx("span",{className:"text-token-text-secondary truncate text-xs",children:e})]}),i?r.jsx("div",{className:"mt-2",children:r.jsx(j,{id:"iGylAw",defaultMessage:"ChatGPT is unable to access the contents of this website."})}):r.jsxs(r.Fragment,{children:[n&&r.jsx("div",{className:"mt-2 line-clamp-2 leading-snug font-semibold text-ellipsis",children:n}),h&&r.jsxs("div",{className:"border-token-border-default mt-2 flex flex-col gap-1 border-s-2 ps-2 text-xs",children:[s&&r.jsx("div",{className:"text-token-link text-xs font-semibold",children:s}),o&&r.jsx("div",{className:"text-token-text-secondary line-clamp-2 overflow-hidden text-xs leading-snug text-ellipsis",children:o})]}),a&&r.jsx("div",{className:"mt-2 line-clamp-4 text-sm select-text",children:a})]})]})}))})]})}const d9e=R(()=>P(()=>import("./btrwhqtnzjbkk202.js"),__vite__mapDeps([359,1])),{loading:t=>F(t)}),u9e=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)});function BXe(){"use forget";var ie,de,me;const t=W.c(55),e=V(),n=re(it.context$),s=re(it.sidebarUrlTrayOpen$),o=Oh(e),a=ne(),c=xs()===Pe.Agent||n==null?void 0:n.selection,d=m9e(c),u=d>0,f=_.useRef(null),[m,g]=_.useState(!1);let p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{const xe=f.current;xe&&g(xe.scrollWidth>xe.clientWidth)},t[0]=p):p=t[0];const h=n==null?void 0:n.title,x=n==null?void 0:n.url;let v;if(t[1]!==c||t[2]!==h||t[3]!==x?(v=[h,x,c],t[1]=c,t[2]=h,t[3]=x,t[4]=v):v=t[4],_.useEffect(p,v),!o||!n)return null;let y,b;if(n!=null&&n.url){let xe;if(t[5]!==n.url){let pe;t[7]===Symbol.for("react.memo_cache_sentinel")?(pe=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,t[7]=pe):pe=t[7],xe=n.url.replace(pe,""),t[5]=n.url,t[6]=xe}else xe=t[6];b=xe;try{let pe;t[8]!==n.url?(pe=new URL(n.url),t[8]=n.url,t[9]=pe):pe=t[9],y=pe.host}catch(pe){}}let C;t[10]!==n.title?(C=(ie=n.title)==null?void 0:ie.trim(),t[10]=n.title,t[11]=C):C=t[11];const S=C,E=(de=b&&b.length>0?b:n.url)!=null?de:void 0,k=S&&S.length>0?S:E,T=!!(n!=null&&n.blocked);if(!s)return null;const A=k!=null?k:n.url;let I;t[12]!==n.base64favicon||t[13]!==A?(I=r.jsx(Dp,{base64:n.base64favicon,title:A,className:"h-4 w-4 flex-shrink-0 rounded-[4px]"}),t[12]=n.base64favicon,t[13]=A,t[14]=I):I=t[14];const N=(me=y!=null?y:E)!=null?me:n.url,L=k!=null?k:n.url;let O;t[15]!==u||t[16]!==d?(O=u?r.jsx(j,{id:"EwD8lK",defaultMessage:"Selected text ({count} words)",values:{count:d}}):null,t[15]=u,t[16]=d,t[17]=O):O=t[17];const D=u&&c!=null?c:null,$=T?"bg-[rgba(255,214,10,0.1)]":u?"bg-token-interactive-bg-accent-default":"bg-[rgba(0,0,0,0.03)] hover:bg-[rgba(0,0,0,0.08)] dark:bg-[rgba(255,255,255,0.05)] dark:hover:bg-[rgba(255,255,255,0.1)]";let H;t[18]!==$?(H=z("group flex h-[36px] w-fit max-w-[150px] min-w-0 cursor-default items-center gap-[6px] rounded-xl px-2 pe-3 transition-all",$),t[18]=$,t[19]=H):H=t[19];let G;t[20]!==n.base64favicon||t[21]!==n.url||t[22]!==k||t[23]!==T?(G=T?r.jsx(d9e,{className:"text-token-icon-status-warning block h-4 w-4 group-hover:hidden"}):r.jsx(Dp,{base64:n.base64favicon,title:k!=null?k:n.url,className:"block h-4 w-4 rounded-[4px] group-hover:hidden"}),t[20]=n.base64favicon,t[21]=n.url,t[22]=k,t[23]=T,t[24]=G):G=t[24];let Z;t[25]!==a?(Z=a.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),t[25]=a,t[26]=Z):Z=t[26];let Q;t[27]===Symbol.for("react.memo_cache_sentinel")?(Q=r.jsx(u9e,{className:"h-4 w-4 text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]"}),t[27]=Q):Q=t[27];let q;t[28]!==Z?(q=r.jsx("button",{onClick:f9e,className:"absolute start-0 top-0 hidden group-hover:block","aria-label":Z,children:Q}),t[28]=Z,t[29]=q):q=t[29];let Y;t[30]!==G||t[31]!==q?(Y=r.jsxs("div",{className:"relative h-4 w-4 flex-shrink-0",children:[G,q]}),t[30]=G,t[31]=q,t[32]=Y):Y=t[32];const te=m&&!u&&"[mask-image:linear-gradient(to_right,black_85%,transparent_100%)] [-webkit-mask-image:linear-gradient(to_right,black_85%,transparent_100%)]";let ae;t[33]!==te?(ae=z("overflow-hidden text-xs whitespace-nowrap select-none",te),t[33]=te,t[34]=ae):ae=t[34];let se;t[35]!==n.url||t[36]!==k||t[37]!==u||t[38]!==T?(se=u&&!T?r.jsx(j,{id:"DaC6ra",defaultMessage:"Selected text"}):k?r.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:k}):r.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:n.url}),t[35]=n.url,t[36]=k,t[37]=u,t[38]=T,t[39]=se):se=t[39];let ce;t[40]!==ae||t[41]!==se?(ce=r.jsx("span",{ref:f,className:ae,children:se}),t[40]=ae,t[41]=se,t[42]=ce):ce=t[42];let X;t[43]!==H||t[44]!==Y||t[45]!==ce?(X=r.jsxs("div",{className:H,children:[Y,ce]}),t[43]=H,t[44]=Y,t[45]=ce,t[46]=X):X=t[46];let ee;return t[47]!==T||t[48]!==D||t[49]!==X||t[50]!==I||t[51]!==N||t[52]!==L||t[53]!==O?(ee=r.jsx("div",{className:"relative px-3 pt-3",children:r.jsx(rB,{favicon:I,heading:N,title:L,quoteHeading:O,quoteText:D,snippet:null,isContentBlocked:T,theme:"grey",children:X})}),t[47]=T,t[48]=D,t[49]=X,t[50]=I,t[51]=N,t[52]=L,t[53]=O,t[54]=ee):ee=t[54],ee}function f9e(){var t;(t=B8())==null||t.triggerProductEvent("removeTabContext"),q5(!1)}function m9e(t){if(!t)return 0;const e=t.trim();if(!e)return 0;if(typeof Intl.Segmenter=="function")try{const n=new Intl.Segmenter(void 0,{granularity:"word"}).segment(e);return Array.from(n).reduce((s,o)=>s+(o.isWordLike?1:0),0)}catch(n){}return e.split(/\s+/).filter(Boolean).length}const iB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.338 3.08492C15.0406 3.08955 15.7151 3.28724 16.214 3.78609C16.7128 4.28495 16.9105 4.95949 16.9151 5.66207C16.9197 6.36056 16.7358 7.13467 16.419 7.92672C16.153 8.59182 15.7832 9.291 15.3243 9.99996C15.7832 10.7089 16.153 11.4081 16.419 12.0732C16.7358 12.8652 16.9197 13.6394 16.9151 14.3379C16.9105 15.0404 16.7128 15.715 16.214 16.2138C15.7151 16.7127 15.0406 16.9104 14.338 16.915C13.6395 16.9196 12.8654 16.7357 12.0733 16.4189C11.4082 16.1528 10.709 15.783 10.0001 15.3242C9.29112 15.783 8.59194 16.1528 7.92684 16.4189C7.1348 16.7357 6.36069 16.9196 5.66219 16.915C4.95961 16.9104 4.28507 16.7127 3.78622 16.2138C3.28736 15.715 3.08967 15.0404 3.08504 14.3379C3.08049 13.6394 3.26432 12.8652 3.58114 12.0732C3.84715 11.4082 4.21616 10.7088 4.67489 9.99996C4.21616 9.29115 3.84715 8.59168 3.58114 7.92672C3.26432 7.13467 3.08049 6.36056 3.08504 5.66207C3.08967 4.95949 3.28736 4.28495 3.78622 3.78609C4.28507 3.28724 4.95961 3.08955 5.66219 3.08492C6.36069 3.08037 7.1348 3.2642 7.92684 3.58102C8.5918 3.84703 9.29127 4.21603 10.0001 4.67477C10.7089 4.21603 11.4084 3.84703 12.0733 3.58102C12.8654 3.2642 13.6395 3.08037 14.338 3.08492ZM5.5118 11.1728C5.22609 11.6559 4.99351 12.1249 4.81649 12.5673C4.53951 13.2598 4.41207 13.8575 4.41512 14.3291C4.4182 14.7967 4.54582 15.0926 4.72664 15.2734C4.90747 15.4542 5.20337 15.5818 5.67098 15.5849C6.14256 15.588 6.74026 15.4605 7.4327 15.1836C7.8751 15.0066 8.34325 14.7729 8.82625 14.4873C8.23208 14.0242 7.64066 13.5038 7.06844 12.9316C6.49588 12.359 5.97512 11.7674 5.5118 11.1728ZM14.4874 11.1728C14.0242 11.7672 13.5041 12.3592 12.9317 12.9316C12.3593 13.504 11.7673 14.024 11.1729 14.4873C11.6562 14.7731 12.1248 15.0065 12.5675 15.1836C13.2599 15.4605 13.8576 15.588 14.3292 15.5849C14.7968 15.5818 15.0927 15.4542 15.2735 15.2734C15.4544 15.0926 15.582 14.7967 15.585 14.3291C15.5881 13.8575 15.4607 13.2598 15.1837 12.5673C15.0066 12.1247 14.7732 11.6561 14.4874 11.1728ZM10.0001 6.29C9.33643 6.77801 8.66365 7.35398 8.00887 8.00875C7.3541 8.66352 6.77813 9.33631 6.29012 9.99996C6.77813 10.6636 7.3541 11.3364 8.00887 11.9912C8.66349 12.6458 9.33658 13.221 10.0001 13.7089C10.6636 13.221 11.3367 12.6458 11.9913 11.9912C12.6459 11.3366 13.2211 10.6635 13.7091 9.99996C13.2211 9.33646 12.6459 8.66337 11.9913 8.00875C11.3365 7.35398 10.6637 6.77801 10.0001 6.29ZM5.67098 4.415C5.20337 4.41808 4.90747 4.54569 4.72664 4.72652C4.54582 4.90735 4.4182 5.20325 4.41512 5.67086C4.41207 6.14244 4.53951 6.74014 4.81649 7.43258C4.99342 7.87485 5.22629 8.34327 5.5118 8.82613C5.975 8.23179 6.49608 7.64069 7.06844 7.06832C7.64081 6.49595 8.23192 5.97488 8.82625 5.51168C8.3434 5.22617 7.87497 4.9933 7.4327 4.81637C6.74026 4.53939 6.14256 4.41195 5.67098 4.415ZM14.3292 4.415C13.8576 4.41195 13.2599 4.53939 12.5675 4.81637C12.125 4.99338 11.656 5.22597 11.1729 5.51168C11.7675 5.97499 12.3592 6.49576 12.9317 7.06832C13.5039 7.64053 14.0243 8.23195 14.4874 8.82613C14.773 8.34312 15.0067 7.87498 15.1837 7.43258C15.4607 6.74014 15.5881 6.14244 15.585 5.67086C15.582 5.20325 15.4544 4.90735 15.2735 4.72652C15.0927 4.54569 14.7968 4.41808 14.3292 4.415Z",fill:"currentColor"})),lB=Object.freeze(Object.defineProperty({__proto__:null,default:iB},Symbol.toStringTag,{value:"Module"})),Q5=t=>_.createElement("svg",w({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M12.1338 5.94433C12.3919 5.77382 12.7434 5.80202 12.9707 6.02929C13.1979 6.25656 13.2261 6.60807 13.0556 6.8662L12.9707 6.9707L8.47067 11.4707C8.21097 11.7304 7.78896 11.7304 7.52926 11.4707L3.02926 6.9707L2.9443 6.8662C2.77379 6.60807 2.80199 6.25656 3.02926 6.02929C3.25653 5.80202 3.60804 5.77382 3.86617 5.94433L3.97067 6.02929L7.99996 10.0586L12.0293 6.02929L12.1338 5.94433Z"})),jr=Object.freeze(Object.defineProperty({__proto__:null,default:Q5},Symbol.toStringTag,{value:"Module"})),ky=t=>_.createElement("svg",w({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M11.1152 3.91503C11.3868 3.73594 11.756 3.7658 11.9951 4.00488C12.2341 4.24395 12.264 4.61309 12.0849 4.88476L11.9951 4.99511L8.99018 7.99999L11.9951 11.0049L12.0849 11.1152C12.264 11.3869 12.2341 11.756 11.9951 11.9951C11.756 12.2342 11.3868 12.2641 11.1152 12.085L11.0048 11.9951L7.99995 8.99023L4.99506 11.9951C4.7217 12.2685 4.2782 12.2685 4.00483 11.9951C3.73146 11.7217 3.73146 11.2782 4.00483 11.0049L7.00971 7.99999L4.00483 4.99511L3.91499 4.88476C3.73589 4.61309 3.76575 4.24395 4.00483 4.00488C4.24391 3.7658 4.61305 3.73594 4.88471 3.91503L4.99506 4.00488L7.99995 7.00976L11.0048 4.00488L11.1152 3.91503Z"})),J5=Object.freeze(Object.defineProperty({__proto__:null,default:ky},Symbol.toStringTag,{value:"Module"})),H1=t=>{"use forget";const e=W.c(41),{icon:n,removable:s,label:o,content:a,dropdownContent:i,onRemove:l,onOpenChange:c,onCloseAutoFocus:d}=t,u=ne();let f;e[0]!==u||e[1]!==o?(f=u.formatMessage({id:"giCR14",defaultMessage:"{selectedMode}, click to remove"},{selectedMode:o}),e[0]=u,e[1]=o,e[2]=f):f=e[2];const m=f,g=g9e;let p;e[3]!==l?(p=T=>{const M=T.changedTouches[0];T.target===T.currentTarget&&T.currentTarget.contains(document.elementFromPoint(M.clientX,M.clientY))&&(T.preventDefault(),l==null||l(T))},e[3]=l,e[4]=p):p=e[4];let h;e[5]!==l||e[6]!==p?(h={onClick:l,onTouchStart:p9e,onTouchEnd:p},e[5]=l,e[6]=p,e[7]=h):h=e[7];const x=h;let v;e[8]!==n?(v=typeof n=="function"?r.jsx(n,{}):n,e[8]=n,e[9]=v):v=e[9];let y;e[10]!==v?(y=r.jsx("div",{className:"__composer-pill-icon",inert:!0,children:v}),e[10]=v,e[11]=y):y=e[11];const b=y,C=a!=null?a:o;let S;e[12]!==C?(S=r.jsx("span",{className:"max-w-40 truncate [[data-collapse-labels]_&]:sr-only",ref:g,children:C}),e[12]=C,e[13]=S):S=e[13];const E=S;if(i){let T;e[14]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(Q5,{className:"icon-sm -me-0.5 h-3.5 w-3.5",inert:!0}),e[14]=T):T=e[14];let M;e[15]!==b||e[16]!==E?(M=r.jsxs(K.BasicTrigger,{className:"__composer-pill group/pill",children:[b,E,T]}),e[15]=b,e[16]=E,e[17]=M):M=e[17];let A;e[18]!==i||e[19]!==d?(A=r.jsx(K.Portal,{children:r.jsx(K.Content,{size:"auto",align:"start",alignOffset:-8,onCloseAutoFocus:d,children:i})}),e[18]=i,e[19]=d,e[20]=A):A=e[20];let I;e[21]!==c||e[22]!==A||e[23]!==M?(I=r.jsxs(K.Root,{modal:!1,onOpenChange:c,children:[M,A]}),e[21]=c,e[22]=A,e[23]=M,e[24]=I):I=e[24];const N=I;if(s){let L;e[25]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx(ky,{className:"icon-sm",inert:!0}),e[25]=L):L=e[25];let O;e[26]!==x||e[27]!==m?(O=r.jsx("button",U(w({type:"button",className:"__composer-pill-remove","aria-label":m},x),{children:L})),e[26]=x,e[27]=m,e[28]=O):O=e[28];let D;return e[29]!==N||e[30]!==O?(D=r.jsxs("div",{className:"__composer-pill-composite group relative",children:[O,N]}),e[29]=N,e[30]=O,e[31]=D):D=e[31],D}return N}if(s){let T;e[32]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx("div",{className:"__composer-pill-remove",inert:!0,children:r.jsx(ky,{className:"icon-sm"})}),e[32]=T):T=e[32];let M;return e[33]!==b||e[34]!==x||e[35]!==m||e[36]!==E?(M=r.jsxs("button",U(w({type:"button",className:"__composer-pill group","aria-label":m},x),{children:[b,E,T]})),e[33]=b,e[34]=x,e[35]=m,e[36]=E,e[37]=M):M=e[37],M}let k;return e[38]!==b||e[39]!==E?(k=r.jsxs("div",{className:"__composer-pill",children:[b,E]}),e[38]=b,e[39]=E,e[40]=k):k=e[40],k};function g9e(t){t!=null&&t.parentElement&&t.textContent&&t.scrollWidth>t.clientWidth&&(t.parentElement.title=t.textContent)}function p9e(t){t.preventDefault()}const UXe=t=>{"use forget";const e=W.c(7),{label:n,tooltipLabel:s,onRemoveModel:o}=t,a=s==null;let i;e[0]!==n||e[1]!==o?(i=r.jsx(H1,{icon:iB,label:n,removable:!0,onRemove:o}),e[0]=n,e[1]=o,e[2]=i):i=e[2];let l;return e[3]!==a||e[4]!==i||e[5]!==s?(l=r.jsx(pt,{label:s,disabled:a,children:i}),e[3]=a,e[4]=i,e[5]=s,e[6]=l):l=e[6],l},h9e=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)}),_9e=R(()=>P(()=>import("./l5e2clfxpgm30p9v.js"),__vite__mapDeps([261,1])),{loading:t=>F(t)});function x9e({repoName:t,onClose:e}){const n=ne();return r.jsxs(Mt,{isOpen:!0,onClose:e,shouldIgnoreClickOutside:!0,testId:"modal-github-indexing",type:"success",size:"custom",className:"max-w-[420px]",headerClassName:"pt-0 pb-0 pe-2",showCloseButton:!0,hideSeparator:!0,title:r.jsx("span",{}),children:[r.jsx("div",{className:"mt-0 mb-4 flex justify-center",children:r.jsx("div",{className:"bg-tertiary border-token-border-subtle rounded-lg border p-3",children:r.jsx(_9e,{className:"h-10 w-10"})})}),r.jsx("h2",{className:"mb-4 px-4 text-center text-xl font-semibold",children:n.formatMessage({id:"ejqREp",defaultMessage:"{repoName} is not indexed yet"},{repoName:t})}),r.jsx("p",{className:"text-token-text-secondary mb-6 px-6 text-center text-sm leading-relaxed",children:n.formatMessage({id:"KkmieM",defaultMessage:"This repository can't be accessed by ChatGPT until it's indexed by GitHub. You can trigger indexing by searching the repository's code on GitHub. After about 510 minutes, you can use it in ChatGPT."})}),r.jsxs(ye,{className:"w-full",size:"large",onClick:()=>{const s="https://github.com/search?q=repo:".concat(t,"&type=code");window.open(s,"_blank"),e()},children:[n.formatMessage({id:"yUeuLL",defaultMessage:"Trigger indexing on GitHub"}),r.jsx(h9e,{className:"icon-sm ms-2 inline-block"})]})]})}const y9e=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)}),M7=R(()=>P(()=>import("./kaw18xu9jo85v1g9.js"),__vite__mapDeps([26,1])),{loading:t=>F(t)}),v9e=({items:t,searchTerm:e,setSearchTerm:n,selectedItems:s,searchPlaceholder:o,handleSelectItem:a,showSelectAllRepos:i,loading:l,onEndScroll:c,maxRepos:d,contentRef:u,subContentRef:f})=>{var b;const m=_z("installations/select_target"),g=_.useRef(null),p=_.useRef(null),h=i&&(s==null?void 0:s.includes("$all_accessible_repos")),x=(b=s==null?void 0:s.filter(C=>C!=="$all_accessible_repos").length)!=null?b:0,v=d!==void 0&&x>=d,y=d===1;return _.useEffect(()=>{requestAnimationFrame(()=>{var C;(C=g.current)==null||C.focus()})},[]),_.useEffect(()=>{const C=T=>{g.current&&document.activeElement!==g.current&&(V8(T)||T.key==="Enter"||T.ctrlKey||T.metaKey||T.key.length!==1&&!H8(T)||(T.stopPropagation(),g.current.focus()))},S=T=>{if(T)return T.addEventListener("keydown",C),()=>{T.removeEventListener("keydown",C)}},E=u&&S(u==null?void 0:u.current),k=f&&S(f==null?void 0:f.current);return()=>{E==null||E(),k==null||k()}},[]),_.useEffect(()=>{var k,T;const C=p.current;if(!C)return;const S=(T=(k=f==null?void 0:f.current)!=null?k:u==null?void 0:u.current)!=null?T:null,E=new IntersectionObserver(M=>{M[0].isIntersecting&&(c==null||c())},S?{root:S}:void 0);return E.observe(C),()=>E.disconnect()},[u,f,c]),r.jsxs(r.Fragment,{children:[r.jsx(K.InputItem,{selectAllOnFocus:!1,border:!1,ref:g,value:e,onChange:C=>n(C.target.value),placeholder:o,name:"github-submenu-dropdown-input"}),r.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[t==null?void 0:t.map(C=>{const S=s==null?void 0:s.includes(C.name),E=d!==void 0&&!S&&v&&!y;return r.jsx(K.Item,{onClick:k=>{k.preventDefault(),a(C)},secondary:r.jsx("span",{className:"line-clamp-2",children:C.description}),trailing:S&&M7,className:z((E||!C.indexed)&&"text-token-text-tertiary opacity-50"),disabled:E,children:r.jsx("div",{className:"truncate",children:C.name})},C.name)}),r.jsx("div",{className:"w-auto",ref:p}),!l&&t.length===0&&r.jsx(K.Item,{className:"text-token-text-tertiary pointer-events-none",children:r.jsx(j,{id:"LRA3gT",defaultMessage:"No repositories found"})}),l&&r.jsx("div",{className:"text-token-text-tertiary mx-1.5 px-2 py-2.5 text-sm",role:"alert","aria-busy":"true",children:r.jsx(j,{id:"HvTGRC",defaultMessage:"Loading..."})})]}),i&&d===void 0&&r.jsx(K.Item,{onClick:C=>{C.preventDefault(),a({name:"$all_accessible_repos"}),h&&!e&&b9e(C.currentTarget)},secondary:r.jsx(j,{id:"EhTGqu",defaultMessage:"Select all repositories accessible to ChatGPT"}),trailing:h&&M7,children:r.jsx(j,{id:"pJnTxe",defaultMessage:"All Repositories"})}),r.jsx(K.Separator,{}),r.jsx(K.Item,{onClick:()=>{window.open(m,"_blank")},trailing:r.jsx(y9e,{className:"icon-sm"}),children:r.jsx(j,{id:"ICVOEb",defaultMessage:"Configure Repositories"})}),r.jsx(K.Separator,{}),r.jsxs("div",{className:"text-token-text-tertiary mx-1.5 px-2.5 py-2 text-xs",children:[d&&r.jsx(j,{id:"k/9Fjt",defaultMessage:"Choose up to {maxRepos} {maxRepos, plural, one {repository} other {repositories}}. To search more, use deep research.",values:{maxRepos:d}}),r.jsx(j,{id:"4Z21ID",defaultMessage:"Not seeing a repository? {helpLink}",values:{helpLink:r.jsx(r.Fragment,{children:r.jsx("a",{href:"https://help.openai.com/en/articles/11145903-chatgpt-connectors",target:"_blank",rel:"noopener noreferrer",className:"underline",children:r.jsx(j,{id:"sVuhcw",defaultMessage:"Learn more"})})})}})]})]})};function b9e(t){const e=t.closest("[role=menuitem]");if(!e)return;let n=e.nextElementSibling;for(;n&&n.getAttribute("role")!=="menuitem";)n=n.nextElementSibling;if(!n)for(n=e.previousElementSibling;n&&n.getAttribute("role")!=="menuitem";)n=n.previousElementSibling;n instanceof HTMLElement&&n.focus()}const C9e=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)}),S9e=30,w9e=25,k9e=t=>{"use forget";const e=W.c(11),{enabled:n,debouncedSearchTerm:s,linkId:o,limit:a}=t,i=n===void 0?!0:n,l=a===void 0?20:a;let c;e[0]!==s||e[1]!==o?(c=["github-repos",s,o],e[0]=s,e[1]=o,e[2]=c):c=e[2];let d;e[3]!==s||e[4]!==l||e[5]!==o?(d=async f=>{const{pageParam:m}=f,g=m===void 0?null:m;return await ge.safePost("/aip/connectors/github/search_repos",{requestBody:{query:s,limit:l,next_token:g,link_id:o}})},e[3]=s,e[4]=l,e[5]=o,e[6]=d):d=e[6];let u;return e[7]!==i||e[8]!==c||e[9]!==d?(u={queryKey:c,enabled:i,queryFn:d,getNextPageParam:M9e,initialPageParam:null,retry:1},e[7]=i,e[8]=c,e[9]=d,e[10]=u):u=e[10],wf(u)};function cB(t){"use forget";var be,fe;const e=W.c(57),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:a,githubSyncEnabled:i,enabled:l,onSelectAllRepos:c}=t,d=s===void 0?!1:s,u=i===void 0?!1:i,f=l===void 0?!0:l,{selectedRepos:m,setSelectedRepos:g}=IN(n);let p;e[0]!==m?(p=jN(m),e[0]=m,e[1]=p):p=e[1];const h=p,[x]=_.useState(m),[v,y]=_.useState(""),b=z0e(v,300),{maxRepos:C}=AN(),[S,E]=_.useState(null),k=f&&!!o,T=o!=null?o:"";let M;e[2]!==b||e[3]!==k||e[4]!==T?(M={enabled:k,debouncedSearchTerm:b,linkId:T},e[2]=b,e[3]=k,e[4]=T,e[5]=M):M=e[5];const{data:A,isFetching:I,isFetchingNextPage:N,isError:L,fetchNextPage:O}=k9e(M),D=f&&u&&!!(a!=null&&a.length),$=a!=null?a:"";let H;e[6]!==D||e[7]!==$?(H={enabled:D,connectionInstanceId:$},e[6]=D,e[7]=$,e[8]=H):H=e[8];const{data:G,isFetching:Z}=TN(H);let Q;e:{if(!(G!=null&&G.sync_enabled_objects)){let _e;e[9]===Symbol.for("react.memo_cache_sentinel")?(_e=[],e[9]=_e):_e=e[9],Q=_e;break e}let ue;e[10]!==G.sync_enabled_objects?(ue=G.sync_enabled_objects.filter(T9e).map(E9e),e[10]=G.sync_enabled_objects,e[11]=ue):ue=e[11],Q=ue}const q=Q;let Y;if(e[12]!==b||e[13]!==u||e[14]!==x||e[15]!==A||e[16]!==q){const ue=new Map;b.length===0&&((be=x.selectedRepos)==null||be.forEach(_e=>{ue.set(_e,{repository_full_name:_e,description:null,is_code_search_indexed:!0,synced:!1})})),u&&q&&q.forEach(_e=>{var Te;ue.set(_e.repository_full_name,{repository_full_name:_e.repository_full_name,description:(Te=_e.description)!=null?Te:null,is_code_search_indexed:!0,synced:!0})}),A&&A.pages.forEach(_e=>{_e.repos.forEach(Te=>{var Ne,Ae,He;const $e=ue.get(Te.repository_full_name);ue.set(Te.repository_full_name,{repository_full_name:Te.repository_full_name,description:(Ne=Te.description)!=null?Ne:null,is_code_search_indexed:(Ae=Te.is_code_search_indexed)!=null?Ae:void 0,synced:(He=$e==null?void 0:$e.synced)!=null?He:!1})})}),b.length>0&&ue.forEach(_e=>{var Te;!_e.repository_full_name.toLowerCase().includes(b.toLowerCase())&&!((Te=_e.description)!=null&&Te.toLowerCase().includes(b.toLowerCase()))&&ue.delete(_e.repository_full_name)}),Y=Array.from(ue.values()),e[12]=b,e[13]=u,e[14]=x,e[15]=A,e[16]=q,e[17]=Y}else Y=e[17];const te=Y;let ae;e[18]!==u||e[19]!==te?(ae=te.map(ue=>{const _e=!!ue.is_code_search_indexed||ue.synced&&u;return{name:ue.repository_full_name,description:ue.description,indexed:_e,synced:ue.synced}}),e[18]=u,e[19]=te,e[20]=ae):ae=e[20];const se=ae;let ce;e[21]!==C||e[22]!==c||e[23]!==m.selectedAllRepos||e[24]!==m.selectedRepos||e[25]!==g?(ce=ue=>{var Ae,He,Qe,et,Ct;const _e=ue.name;if(!ue.indexed&&!ue.synced){E(ue.name);return}if(_e==="$all_accessible_repos"){const vt=!m.selectedAllRepos;g({selectedRepos:[],selectedAllRepos:vt}),vt&&(c==null||c());return}const Te=(Ae=m.selectedRepos)==null?void 0:Ae.includes(_e),$e=(Qe=(He=m.selectedRepos)==null?void 0:He.length)!=null?Qe:0;if(C!==void 0&&C>1&&!Te&&$e>=C)return;if(C!==void 0&&C===1&&!Te){g({selectedRepos:[_e],selectedAllRepos:!1});return}const Ne=Te?((et=m.selectedRepos)!=null?et:[]).filter(vt=>vt!==_e):[...(Ct=m.selectedRepos)!=null?Ct:[],_e];g({selectedRepos:Ne,selectedAllRepos:!1})},e[21]=C,e[22]=c,e[23]=m.selectedAllRepos,e[24]=m.selectedRepos,e[25]=g,e[26]=ce):ce=e[26];const X=ce;let ee;e[27]!==m.selectedRepos?(ee=(fe=m.selectedRepos)!=null?fe:[],e[27]=m.selectedRepos,e[28]=ee):ee=e[28];let ie;e[29]!==m.selectedAllRepos?(ie=m.selectedAllRepos?["$all_accessible_repos"]:[],e[29]=m.selectedAllRepos,e[30]=ie):ie=e[30];let de;e[31]!==ee||e[32]!==ie?(de=[...ee,...ie],e[31]=ee,e[32]=ie,e[33]=de):de=e[33];const me=de,xe=_.useRef(0);let pe;e[34]!==f||e[35]!==O?(pe=()=>{f&&xe.current<1&&O()},e[34]=f,e[35]=O,e[36]=pe):pe=e[36];const Me=pe;let Ce;e[37]===Symbol.for("react.memo_cache_sentinel")?(Ce=()=>{xe.current=0},e[37]=Ce):Ce=e[37];let ke;e[38]!==b?(ke=[b],e[38]=b,e[39]=ke):ke=e[39],_.useEffect(Ce,ke);let Le,De;e[40]!==N||e[41]!==L?(Le=()=>{L?xe.current=xe.current+1:!N&&!L&&(xe.current=0)},De=[N,L],e[40]=N,e[41]=L,e[42]=Le,e[43]=De):(Le=e[42],De=e[43]),_.useEffect(Le,De);const le=f&&I||N||Z,oe=f&&(u||!!o);let Ee;return e[44]!==d||e[45]!==se||e[46]!==X||e[47]!==h||e[48]!==S||e[49]!==le||e[50]!==C||e[51]!==Me||e[52]!==v||e[53]!==me||e[54]!==m||e[55]!==oe?(Ee={isAvailable:oe,allowSelectAllRepos:d,dropdownItems:se,handleSelectItem:X,indexModalRepo:S,setIndexModalRepo:E,loading:le,maxRepos:C,onEndScroll:Me,searchTerm:v,setSearchTerm:y,selectedItemNames:me,selectedRepos:m,hasRepos:h},e[44]=d,e[45]=se,e[46]=X,e[47]=h,e[48]=S,e[49]=le,e[50]=C,e[51]=Me,e[52]=v,e[53]=me,e[54]=m,e[55]=oe,e[56]=Ee):Ee=e[56],Ee}function E9e(t){var e;return{repository_full_name:t.object_name,description:(e=t.object_description)!=null?e:null}}function T9e(t){return t.object_type==="repository"&&t.object_name}function X5(t){"use forget";const e=W.c(23),{state:n,searchPlaceholder:s,notIndexedLabel:o,contentRef:a,subContentRef:i}=t;let l;if(e[0]!==o||e[1]!==n.dropdownItems){let m;e[3]!==o?(m=g=>U(w({},g),{description:!g.indexed&&!g.synced?o:g.description}),e[3]=o,e[4]=m):m=e[4],l=n.dropdownItems.map(m),e[0]=o,e[1]=n.dropdownItems,e[2]=l}else l=e[2];const c=l;let d;e[5]!==n?(d=n.indexModalRepo&&r.jsx(x9e,{repoName:n.indexModalRepo,onClose:()=>n.setIndexModalRepo(null)}),e[5]=n,e[6]=d):d=e[6];let u;e[7]!==a||e[8]!==c||e[9]!==s||e[10]!==n.allowSelectAllRepos||e[11]!==n.handleSelectItem||e[12]!==n.loading||e[13]!==n.maxRepos||e[14]!==n.onEndScroll||e[15]!==n.searchTerm||e[16]!==n.selectedItemNames||e[17]!==n.setSearchTerm||e[18]!==i?(u=r.jsx(v9e,{items:c,searchTerm:n.searchTerm,setSearchTerm:n.setSearchTerm,selectedItems:n.selectedItemNames,searchPlaceholder:s,handleSelectItem:n.handleSelectItem,showSelectAllRepos:n.allowSelectAllRepos,loading:n.loading,onEndScroll:n.onEndScroll,maxRepos:n.maxRepos,contentRef:a,subContentRef:i}),e[7]=a,e[8]=c,e[9]=s,e[10]=n.allowSelectAllRepos,e[11]=n.handleSelectItem,e[12]=n.loading,e[13]=n.maxRepos,e[14]=n.onEndScroll,e[15]=n.searchTerm,e[16]=n.selectedItemNames,e[17]=n.setSearchTerm,e[18]=i,e[19]=u):u=e[19];let f;return e[20]!==d||e[21]!==u?(f=r.jsxs(r.Fragment,{children:[d,u]}),e[20]=d,e[21]=u,e[22]=f):f=e[22],f}function $Xe(t){"use forget";var D,$,H,G;const e=W.c(33),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:a,githubSyncEnabled:i,contentRef:l}=t,c=s===void 0?!1:s,d=i===void 0?!1:i,u=ne(),f=_.useRef(null),{addSource:m}=Pa(n);let g;e[0]!==m?(g=()=>{m(yt.GITHUB_CONNECTOR)},e[0]=m,e[1]=g):g=e[1];let p;e[2]!==c||e[3]!==n||e[4]!==d||e[5]!==o||e[6]!==a||e[7]!==g?(p={clientThreadId:n,allowSelectAllRepos:c,linkId:o,syncConnectionId:a,githubSyncEnabled:d,enabled:!0,onSelectAllRepos:g},e[2]=c,e[3]=n,e[4]=d,e[5]=o,e[6]=a,e[7]=g,e[8]=p):p=e[8];const h=cB(p),x=h.hasRepos,[v,y]=_.useState(!x);let b,C;e[9]!==x?(b=()=>{x||y(!0)},C=[x],e[9]=x,e[10]=b,e[11]=C):(b=e[10],C=e[11]),_.useEffect(b,C);let S;e:{if(($=(D=h.selectedRepos)==null?void 0:D.selectedRepos)!=null&&$.length&&((G=(H=h.selectedRepos)==null?void 0:H.selectedRepos)==null?void 0:G.length)>=1){const Z=h.selectedRepos.selectedRepos;let Q=Z[0];if(Q.length>S9e){const Y=(w9e-3)/2;Q=Q.slice(0,Math.floor(Y))+"..."+Q.slice(Math.floor(-Y))}const q=Z.length-1;S=q>0?"".concat(Q," +").concat(q):Q;break e}S=void 0}const E=S;if(!h.isAvailable)return null;const k=!x||v;let T;e[12]!==x?(T=Z=>{x&&y(Z)},e[12]=x,e[13]=T):T=e[13];let M;e[14]!==u||e[15]!==E?(M=E!=null?E:u.formatMessage({id:"sDCihQ",defaultMessage:"Repositories"}),e[14]=u,e[15]=E,e[16]=M):M=e[16];let A;e[17]!==M?(A=r.jsx(K.SubMenuTrigger,{className:"ps-4",icon:C9e,children:M}),e[17]=M,e[18]=A):A=e[18];let I;e[19]!==u?(I=u.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[19]=u,e[20]=I):I=e[20];let N;e[21]!==u?(N=u.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[21]=u,e[22]=N):N=e[22];let L;e[23]!==l||e[24]!==h||e[25]!==I||e[26]!==N?(L=r.jsx(K.Portal,{children:r.jsx(K.SubContent,{ref:f,children:r.jsx(X5,{state:h,searchPlaceholder:I,notIndexedLabel:N,contentRef:l,subContentRef:f})})}),e[23]=l,e[24]=h,e[25]=I,e[26]=N,e[27]=L):L=e[27];let O;return e[28]!==A||e[29]!==L||e[30]!==k||e[31]!==T?(O=r.jsxs(K.Sub,{open:k,onOpenChange:T,children:[A,L]}),e[28]=A,e[29]=L,e[30]=k,e[31]=T,e[32]=O):O=e[32],O}function M9e(t){var e;return(e=t.next_token)!=null?e:void 0}const A9e=R(()=>P(()=>Promise.resolve().then(()=>um),void 0),{loading:t=>F(t)}),Yp="connector:".concat(G8),I9e=t=>{"use forget";const e=W.c(16),{clientThreadId:n,activeConnectorSystemHints:s,githubMenuState:o,githubLabels:a}=t,i=ne(),l=W3(),c=_.useRef(null),d=_.useRef(null);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(A9e,{}),e[0]=u):u=e[0];let f;e[1]!==s.length||e[2]!==i?(f=i.formatMessage({id:"composer.apps.multiple",defaultMessage:"{count} apps"},{count:s.length}),e[1]=s.length,e[2]=i,e[3]=f):f=e[3];let m;e[4]!==s||e[5]!==n||e[6]!==a||e[7]!==o||e[8]!==i||e[9]!==l?(m=s.map(h=>{var v,y,b,C;return h.systemHint===Yp&&(o!=null&&o.isAvailable)?r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{icon:r.jsx(fl,{hint:h,isNextToLabel:!0}),label:(v=h.actionLabel)!=null?v:h.name,trailing:r.jsx(K.RadioItemCheck,{}),highlightTrailing:r.jsx("button",{type:"button",className:"text-token-text-tertiary hover:bg-tertiary hover:text-token-text-secondary flex h-6 w-6 items-center justify-center rounded transition","aria-label":i.formatMessage({id:"wpLHSw",defaultMessage:"Remove {connector}"},{connector:(y=h.actionLabel)!=null?y:h.name}),onClick:S=>{S.preventDefault(),S.stopPropagation(),l(Yp,{analyticsMetadata:{clientThreadId:n}})}}),onSelect:j9e,children:r.jsx(wy,{systemHint:h})}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{ref:d,children:r.jsx(X5,{state:o,searchPlaceholder:a.searchPlaceholder,notIndexedLabel:a.notIndexedLabel,contentRef:c,subContentRef:d})})})]},h.systemHint):r.jsx(K.RadioGroup,{value:(b=h.systemHint)!=null?b:void 0,onValueChange:S=>{l(S,{analyticsMetadata:{clientThreadId:n}})},children:r.jsx(K.RadioItem,{value:h.systemHint,color:"default",icon:r.jsx(fl,{hint:h,isNextToLabel:!0}),label:(C=h.actionLabel)!=null?C:h.name,trailing:r.jsx(K.RadioItemCheck,{}),onSelect:N9e,children:r.jsx(wy,{systemHint:h})},h.systemHint)},h.systemHint)}),e[4]=s,e[5]=n,e[6]=a,e[7]=o,e[8]=i,e[9]=l,e[10]=m):m=e[10];let g;e[11]!==m?(g=r.jsx("div",{className:"min-w-48",ref:c,children:m}),e[11]=m,e[12]=g):g=e[12];let p;return e[13]!==f||e[14]!==g?(p=r.jsx(H1,{icon:u,label:f,removable:!1,dropdownContent:g}),e[13]=f,e[14]=g,e[15]=p):p=e[15],p},VXe=t=>{"use forget";var Y,te,ae;const e=W.c(43),{clientThreadId:n,activeSystemHint:s,activeSystemHintType:o,activeConnectorSystemHints:a,locked:i,onRemoveSystemHint:l}=t,c=V(),d=ne(),u=W3(),{connectorLinks:f}=Of(),m=BT();let g;e[0]!==c||e[1]!==m?(g=()=>{if(m)return $T(c).data},e[0]=c,e[1]=m,e[2]=g):g=e[2];const p=re(g);let h;e[3]!==(p==null?void 0:p.connection_statuses)?(h=p==null?void 0:p.connection_statuses.find(P9e),e[3]=p==null?void 0:p.connection_statuses,e[4]=h):h=e[4];const x=h;let v;e[5]!==f?(v=(te=(Y=f.get(G8))==null?void 0:Y[0])==null?void 0:te.id,e[5]=f,e[6]=v):v=e[6];const y=v,b=x==null?void 0:x.user_connection_details.connection_instance_id,C=!!(m&&b);let S;e[7]!==a?(S=a.some(R9e),e[7]=a,e[8]=S):S=e[8];const E=S,k=C?b:void 0;let T;e[9]!==n||e[10]!==y||e[11]!==C||e[12]!==E||e[13]!==k?(T={clientThreadId:n,allowSelectAllRepos:!1,linkId:y,syncConnectionId:k,githubSyncEnabled:C,enabled:E},e[9]=n,e[10]=y,e[11]=C,e[12]=E,e[13]=k,e[14]=T):T=e[14];const M=cB(T);let A;e[15]!==d?(A=d.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[15]=d,e[16]=A):A=e[16];let I;e[17]!==d?(I=d.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[17]=d,e[18]=I):I=e[18];let N;e[19]!==A||e[20]!==I?(N={searchPlaceholder:A,notIndexedLabel:I},e[19]=A,e[20]=I,e[21]=N):N=e[21];const L=N,O=_.useRef(null);let D,$=s,H=l;if(o&&z3(o)){if((a==null?void 0:a.length)===0)return null;if((a==null?void 0:a.length)===1){$=a[0];let se;if(e[22]!==a[0]||e[23]!==n||e[24]!==u?(se=()=>u(a[0].systemHint,{analyticsMetadata:{clientThreadId:n}}),e[22]=a[0],e[23]=n,e[24]=u,e[25]=se):se=e[25],H=se,$.systemHint===Yp&&M.isAvailable){let ce;e[26]!==L.notIndexedLabel||e[27]!==L.searchPlaceholder||e[28]!==M?(ce=r.jsx("div",{ref:O,children:r.jsx(X5,{state:M,searchPlaceholder:L.searchPlaceholder,notIndexedLabel:L.notIndexedLabel,contentRef:O})}),e[26]=L.notIndexedLabel,e[27]=L.searchPlaceholder,e[28]=M,e[29]=ce):ce=e[29],D=ce}}else{let se;return e[30]!==a||e[31]!==n||e[32]!==L||e[33]!==M?(se=r.jsx(I9e,{activeConnectorSystemHints:a,clientThreadId:n,githubMenuState:M,githubLabels:L}),e[30]=a,e[31]=n,e[32]=L,e[33]=M,e[34]=se):se=e[34],se}}if(!$)return null;let G;e[35]!==$?(G=r.jsx(fl,{hint:$,isNextToLabel:!0}),e[35]=$,e[36]=G):G=e[36];const Z=(ae=$.shortLabel)!=null?ae:$.name,Q=!i;let q;return e[37]!==D||e[38]!==H||e[39]!==G||e[40]!==Z||e[41]!==Q?(q=r.jsx(H1,{icon:G,label:Z,removable:Q,onRemove:H,dropdownContent:D}),e[37]=D,e[38]=H,e[39]=G,e[40]=Z,e[41]=Q,e[42]=q):q=e[42],q};function j9e(t){t.preventDefault()}function N9e(t){t.preventDefault()}function P9e(t){return t.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(t.user_connection_details.activation_status)&&!!t.user_connection_details.connection_instance_id&&!!t.user_connection_details.backing_link_id}function R9e(t){return t.systemHint===Yp}const L9e=R(()=>P(()=>import("./l4yl232ok815njdc.js"),__vite__mapDeps([331,1])),{loading:t=>F(t)}),O9e=R(()=>P(()=>import("./mjvpgsvmgis1oipr.js"),__vite__mapDeps([310,1])),{loading:t=>F(t)}),D9e=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>F(t)});function HXe(t){"use forget";const e=W.c(60),{disabled:n,showLeadingDivider:s}=t,o=n===void 0?!1:n,a=s===void 0?!1:s,i=ne(),l=re(it.agentSessionMode$),c=l!=null?l:"signedInAccounts";let d;e[0]!==i?(d=i.formatMessage(Ss.signedInMenuLabel),e[0]=i,e[1]=d):d=e[1];const u=d;let f;e[2]!==i?(f=i.formatMessage(Ss.incognitoMenuLabel),e[2]=i,e[3]=f):f=e[3];const m=f,g=c==="signedInAccounts"?u:m;let p;e[4]!==c?(p=c==="signedInAccounts"?r.jsx(L9e,{className:"icon"}):r.jsx(O9e,{className:"icon"}),e[4]=c,e[5]=p):p=e[5];const h=p;let x;e[6]!==o||e[7]!==c?(x=ae=>{o||ae!==c&&zD(ae)},e[6]=o,e[7]=c,e[8]=x):x=e[8];const v=x,y=a&&"group/trigger";let b;e[9]!==y?(b=z("composer-btn -ms-2 ps-3.5 pe-2 disabled:cursor-not-allowed disabled:opacity-60",y),e[9]=y,e[10]=b):b=e[10];const C=b;let S;e[11]!==a?(S=a?r.jsx("span",{className:"bg-token-border-medium -me-3 hidden h-6 w-px min-[420px]:inline-block"}):null,e[11]=a,e[12]=S):S=e[12];let E;e[13]!==h?(E=r.jsx("span",{className:"hidden items-center [[data-collapse-labels]_&]:me-1.5 [[data-collapse-labels]_&]:inline-flex",children:h}),e[13]=h,e[14]=E):E=e[14];let k;e[15]!==u?(k=r.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:u}),e[15]=u,e[16]=k):k=e[16];let T;e[17]!==m?(T=r.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:m}),e[17]=m,e[18]=T):T=e[18];let M;e[19]!==g?(M=r.jsx("span",{className:"col-start-1 row-start-1 whitespace-nowrap",children:g}),e[19]=g,e[20]=M):M=e[20];let A;e[21]!==k||e[22]!==T||e[23]!==M?(A=r.jsxs("span",{className:"relative grid [[data-collapse-labels]_&]:sr-only",children:[k,T,M]}),e[21]=k,e[22]=T,e[23]=M,e[24]=A):A=e[24];let I;e[25]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx(D9e,{className:"icon-sm ms-1"}),e[25]=I):I=e[25];let N;e[26]!==o||e[27]!==E||e[28]!==A||e[29]!==C?(N=r.jsxs("button",{type:"button",className:C,disabled:o,children:[E,A,I]}),e[26]=o,e[27]=E,e[28]=A,e[29]=C,e[30]=N):N=e[30];let L;e[31]!==o||e[32]!==N?(L=r.jsx(K.BasicTrigger,{asChild:!0,disabled:o,children:N}),e[31]=o,e[32]=N,e[33]=L):L=e[33];let O;e[34]!==o||e[35]!==v?(O=ae=>{o||(ae==="incognito"||ae==="signedInAccounts")&&v(ae)},e[34]=o,e[35]=v,e[36]=O):O=e[36];let D;e[37]!==i?(D=i.formatMessage(Ss.signedInMenuLabel),e[37]=i,e[38]=D):D=e[38];let $;e[39]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(j,w({},Ss.signedInDescription)),e[39]=$):$=e[39];let H;e[40]!==o||e[41]!==D?(H=r.jsx(K.RadioItem,{value:"signedInAccounts",disabled:o,label:D,secondary:$}),e[40]=o,e[41]=D,e[42]=H):H=e[42];let G;e[43]!==i?(G=i.formatMessage(Ss.incognitoMenuLabel),e[43]=i,e[44]=G):G=e[44];let Z;e[45]===Symbol.for("react.memo_cache_sentinel")?(Z=r.jsx(j,w({},Ss.incognitoDescription)),e[45]=Z):Z=e[45];let Q;e[46]!==o||e[47]!==G?(Q=r.jsx(K.RadioItem,{value:"incognito",disabled:o,label:G,secondary:Z}),e[46]=o,e[47]=G,e[48]=Q):Q=e[48];let q;e[49]!==c||e[50]!==O||e[51]!==H||e[52]!==Q?(q=r.jsx(K.Portal,{children:r.jsx(K.Content,{size:"auto",alignOffset:-7,children:r.jsxs(K.RadioGroup,{value:c,onValueChange:O,children:[H,Q]})})}),e[49]=c,e[50]=O,e[51]=H,e[52]=Q,e[53]=q):q=e[53];let Y;e[54]!==L||e[55]!==q?(Y=r.jsxs(K.Root,{children:[L,q]}),e[54]=L,e[55]=q,e[56]=Y):Y=e[56];let te;return e[57]!==Y||e[58]!==S?(te=r.jsxs(r.Fragment,{children:[S,Y]}),e[57]=Y,e[58]=S,e[59]=te):te=e[59],te}const GXe=({includeDisabledByAdmin:t}={})=>{const e=V(),{enabled:n,availableConnectorsType:s}=xz(e),o=re(()=>{if(n)return ov(e,{includeDisabledByAdmin:t,productSku:_8.N7JUPD})}),a=n&&o===void 0,i=yz(e),l=ve(e,"1826175200"),c=_.useMemo(()=>o?i?o.filter(d=>s.includes(d.type)):l?o.filter(d=>s.includes(d.type)||d.type===rl.MCP_CONNECTOR&&d.status!=="ONLY_ME"):o.filter(d=>s.includes(d.type)&&d.type!==rl.MCP_CONNECTOR):[],[s,o,i,l]);return n?{enabled:!0,availableConnectors:c,isLoading:a}:{enabled:!1,availableConnectors:[],isLoading:!1}};function WXe(){return r.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{id:"mP0mrm",defaultMessage:"Beta"})})}function F9e(){"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"text-token-interactive-label-danger-secondary-default border-token-border-status-error items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{id:"w+mmPI",defaultMessage:"DEV"})}),t[0]=e):e=t[0],e}const B9e=()=>{"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{defaultMessage:"Custom",id:"allConnectors.custom"})}),t[0]=e):e=t[0],e},U9e=()=>{"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(j,{defaultMessage:"Beta",id:"allConnectors.beta"})}),t[0]=e):e=t[0],e};function zXe(t){"use forget";const e=W.c(3),{connector:n}=t;if(n.connector_type!=="MCP"||n.developer_type==="TRUSTED_PARTNER")return null;if(n.status==="ONLY_ME"){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(F9e,{}),e[0]=s):s=e[0],s}else if(n.supports_full_actions&&n.status==="ENABLED"){let s;return e[1]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(U9e,{}),e[1]=s):s=e[1],s}else{let s;return e[2]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(B9e,{}),e[2]=s):s=e[2],s}}const A7=R(()=>P(()=>import("./es2vums52w1c42it.js"),__vite__mapDeps([360,1])),{loading:t=>F(t)}),I7=R(()=>P(()=>import("./h6662v3to5g8p21c.js"),__vite__mapDeps([361,1])),{loading:t=>F(t)}),j7=R(()=>P(()=>import("./kux43ylsu8hzp3nl.js"),__vite__mapDeps([150,1])),{loading:t=>F(t)}),$9e=R(()=>P(()=>import("./on5dziw7cevdndjx.js"),__vite__mapDeps([362,1])),{loading:t=>F(t)}),qXe=({connection:t,onClose:e})=>{var l;const n=ne(),s=t.user_connection_details.activation_status,o=s==="activating"?[{icon:j7,label:n.formatMessage(la.initialTime)},{icon:A7,label:n.formatMessage(la.response)},{icon:I7,label:n.formatMessage(la.future)}]:[{icon:$9e,label:n.formatMessage(la.search)},{icon:j7,label:n.formatMessage(la.fullSyncTime)},{icon:A7,label:n.formatMessage(la.response)},{icon:I7,label:n.formatMessage(la.future)}],a=s==="activating"?n.formatMessage(la.titleSyncing):n.formatMessage(la.titlePartialSyncing),i=t.connection_display_info.display_name;return r.jsx(V9e,{iconUrl:(l=t.connection_display_info.icon_url)!=null?l:void 0,iconAlt:t.connection_display_info.display_name,footerLogo:s==="activating"?r.jsx(Q4,{sizeOverride:18,percentage:40,className:"text-token-text-tertiary"}):r.jsx(Q4,{sizeOverride:18,percentage:60,className:"text-blue-400"}),bulletPoints:o,onClose:e,title:a,description:i})},V9e=({title:t,iconUrl:e,iconAlt:n,footerLogo:s,description:o,bulletPoints:a,onClose:i})=>{const l=ne();return r.jsxs(Mt,{testId:"modal-ca-nux",isOpen:!0,noPadding:!0,onClose:i,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"z-[10000] max-w-sm",children:[r.jsx("div",{className:"relative h-12",children:r.jsx(xn,{onClick:i,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"})}),r.jsxs("div",{className:"flex flex-col p-6 pb-5 text-center",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:e,alt:n,className:"h-12 w-12 rounded-full"}),r.jsx("div",{className:"bg-token-bg-primary absolute end-0 bottom-0 z-10 flex items-center justify-center rounded-full",children:s})]})}),r.jsx("div",{className:"text-md mt-6 font-medium",children:t}),r.jsx("div",{className:"text-token-text-tertiary text-sm",children:o}),r.jsx("div",{className:"mt-5 mb-9 flex flex-col justify-center gap-3",children:a.map(c=>r.jsxs("div",{className:"text-token-text-secondary flex items-start gap-2",children:[r.jsx(c.icon,{className:"icon"}),r.jsx("span",{className:"text-body-small-regular text-start",children:c.label})]},c.label))}),r.jsx("div",{children:r.jsx(ye,{color:"secondary",onClick:i,children:r.jsx("span",{className:"px-4",children:l.formatMessage(la.gotIt)})})})]})]})},la=Se({titleSyncing:{id:"contextual-answers.status-modal.title-syncing",defaultMessage:"Sync in progress..."},titlePartialSyncing:{id:"contextual-answers.status-modal.title-partial-syncing",defaultMessage:"Last 30 days synced. Still syncing..."},search:{id:"contextual-answers.status-modal.search",defaultMessage:"The last 30 days are ready to search."},initialTime:{id:"contextual-answers.status-modal.initial-time",defaultMessage:"The initial sync may take 8 hours or longer, based on workspace size."},fullSyncTime:{id:"contextual-answers.status-modal.full-time",defaultMessage:"Full sync may take up to 16 hours or longer, based on workspace size."},response:{id:"contextual-answers.status-modal.response",defaultMessage:"Syncing enables instant ChatGPT responses about your data."},future:{id:"contextual-answers.status-modal.future",defaultMessage:"Future changes are available in real-time."},gotIt:{id:"contextual-answers.status-modal.got-it",defaultMessage:"Got it"}});function YXe(t,{target:e,referrer:n,toggleAllAfterRedirect:s}={target:"connectors"}){let o="#settings/".concat(Pn.Connectors);return t&&(o+="?connector=".concat(Go[t],"&add-connector-link=true&target=").concat(e),n&&(o+="&referrer=".concat(encodeURIComponent(n))),s&&(o+="&".concat(X2))),o}function ZXe(t){return"#settings/".concat(Pn.Connectors,"?connector=").concat(Go[t])}function KXe(){const t=V(),e=Vn(),n=re(()=>a3(t)),s=xs();return o=>{var f,m;const a=e.pathname.match(/\/c\/.+/)?e.pathname:"/",i=e.hash.includes("suggestedPromptsText="),l=e.hash.includes(X2),c=e.hash.includes("target=")?(f=e.hash.match(/target=([^&]+)/))==null?void 0:f[1]:"connectors",d="".concat(a,"?hints=").concat(c,"&sources=").concat(Ag[o.id]);if(i){const g=(m=e.hash.match(/suggestedPromptsText=([^&]+)/))==null?void 0:m[1];return"".concat(d,"&prompt=").concat(g,"&redirect_source=suggested_ca_prompts")}if(l)return"".concat(d,"&").concat(X2);if((s==null||s===Pe.Slurm)&&(n==null?void 0:n.some(g=>g.id===o.id&&[yt.GDRIVE_ACTION_CONNECTOR,yt.BOX_CONNECTOR,yt.DROPBOX_CONNECTOR,yt.SHAREPOINT_CONNECTOR].includes(Ag[g.id])))){const g=Ps(t,"1204757806").get("group","control");if(g==="connector-enabled"||g==="suggestions")return"".concat(d).concat(g==="suggestions"?"&suggestions-for-connector=".concat(Ag[o.id]):"")}return""}}const QXe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M3.51105%2018.4269L4.39307%2019.9615C4.57634%2020.2846%204.8398%2020.5384%205.14908%2020.723L8.29914%2015.2307H1.99902C1.99902%2015.5884%202.09066%2015.9461%202.27394%2016.2692L3.51105%2018.4269Z'%20fill='%230066DA'%20/%3e%3cpath%20d='M11.999%208.76916L8.84897%203.27686C8.53969%203.46147%208.27623%203.71532%208.09295%204.03839L2.27394%2014.1922C2.09403%2014.5083%201.99926%2014.8663%201.99902%2015.2307H8.29914L11.999%208.76916Z'%20fill='%2300AC47'%20/%3e%3cpath%20d='M18.8492%2020.723C19.1585%2020.5384%2019.422%2020.2846%2019.6053%2019.9615L19.9718%2019.3269L21.7244%2016.2692C21.9077%2015.9461%2021.9993%2015.5884%2021.9993%2015.2307H15.6987L17.0394%2017.8846L18.8492%2020.723Z'%20fill='%23EA4335'%20/%3e%3cpath%20d='M11.9982%208.76923L15.1483%203.27692C14.839%203.09231%2014.4839%203%2014.1173%203H9.87907C9.51252%203%209.15742%203.10385%208.84814%203.27692L11.9982%208.76923Z'%20fill='%2300832D'%20/%3e%3cpath%20d='M15.6983%2015.2307H8.29849L5.14844%2020.723C5.45772%2020.9076%205.81281%2020.9999%206.17937%2020.9999H17.8174C18.1839%2020.9999%2018.539%2020.8961%2018.8483%2020.723L15.6983%2015.2307Z'%20fill='%232684FC'%20/%3e%3cpath%20d='M18.8146%209.11532L15.9051%204.03839C15.7218%203.71532%2015.4584%203.46147%2015.1491%203.27686L11.999%208.76916L15.6989%2015.2307H21.9876C21.9876%2014.873%2021.8959%2014.5153%2021.7127%2014.1922L18.8146%209.11532Z'%20fill='%23FFBA00'%20/%3e%3c/svg%3e",H9e=R(()=>P(()=>import("./ozr2lgqf1d6wcjmn.js"),__vite__mapDeps([363,1])),{loading:t=>F(t)}),G9e=R(()=>P(()=>import("./j7x54nqkx9pk7sbq.js"),__vite__mapDeps([364,1,10,11])).then(t=>t.AgentConnectorsSafetyModal));function W9e({ctx:t,connector:e,clientThreadId:n,activeSystemHintType:s,account:o}){dt(t,G9e,{connector:e,alreadyViewed:!0,onClose:()=>{},onConfirm:()=>{},onTurnOffConnectors:()=>{Ze(n,a=>{var i,l;(i=a.selectedSources)!=null||(a.selectedSources=new Map),a.selectedSources.set(s,new Set(["web"])),(l=a.selectedMCPSources)!=null||(a.selectedMCPSources=new Map),a.selectedMCPSources.set(s,new Set),a.mentionedSources=new Set,zT({selectedSourcesMap:a.selectedSources,selectedMCPSourcesMap:a.selectedMCPSources,scope:{userId:o==null?void 0:o.authUserId,workspaceId:o==null?void 0:o.id}})})}})}function JXe(t){"use forget";var S;const e=W.c(23),{clientThreadId:n,activeSystemHintType:s,layoutMode:o}=t,a=ne(),i=V();let l;e[0]!==i?(l=st(i),e[0]=i,e[1]=l):l=e[1];const c=l,d=lt(Oe.hasSeenOdysseyConnectorsModal),{platformConnectors:u}=kd(),{selectedSources:f}=Pa(n);if(d.isLoading||d.eligible)return null;let m,g;if(e[2]!==u||e[3]!==f){g=Symbol.for("react.early_return_sentinel");e:{const E=Array.from(f!=null?f:[]).find(z9e);if(!(E!=null)){g=null;break e}if(E){const T=(S=Go[E])!=null?S:E;m=u.get(T)}if(!m&&u.size>0){let T;e[6]!==u?(T=Array.from(u.values()),e[6]=u,e[7]=T):T=e[7],m=T[0]}}e[2]=u,e[3]=f,e[4]=m,e[5]=g}else m=e[4],g=e[5];if(g!==Symbol.for("react.early_return_sentinel"))return g;if(!m)return null;let p;e[8]!==c||e[9]!==s||e[10]!==n||e[11]!==m||e[12]!==i?(p=()=>{W9e({ctx:i,connector:m,clientThreadId:n,activeSystemHintType:s,account:c})},e[8]=c,e[9]=s,e[10]=n,e[11]=m,e[12]=i,e[13]=p):p=e[13];const h=p;let x;e[14]!==a?(x=a.formatMessage(q9e.tooltip),e[14]=a,e[15]=x):x=e[15];const v=o==="center"?"bottom":"top";let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(H9e,{className:"icon-sm text-[#E25507] dark:text-[#FF9E6C]"}),e[16]=y):y=e[16];let b;e[17]!==h?(b=r.jsx("button",{type:"button",onClick:h,className:"-ms-1 flex h-9 items-center justify-center p-1.5",children:y}),e[17]=h,e[18]=b):b=e[18];let C;return e[19]!==x||e[20]!==v||e[21]!==b?(C=r.jsx(pt,{label:x,side:v,delayDuration:300,children:b}),e[19]=x,e[20]=v,e[21]=b,e[22]=C):C=e[22],C}function z9e(t){return t!=="web"&&t!=="cloud"}const q9e=Se({tooltip:{id:"IK9l6I",defaultMessage:"Learn more about privacy risks with connectors"}}),XXe=t=>{"use forget";const e=W.c(42),{modelLabel:n,modelSlug:s,thinkingEffort:o,onChangeThinkingEffort:a,onRemoveModel:i,onCloseAutoFocus:l}=t,c=ne(),d=V();let u,f,m,g,p,h,x,v,y,b,C,S;if(e[0]!==d||e[1]!==c||e[2]!==n||e[3]!==s||e[4]!==a||e[5]!==l||e[6]!==i||e[7]!==o){const T=WZ(d);let M;e[20]!==c||e[21]!==o?(M=LM(c,o),e[20]=c,e[21]=o,e[22]=M):M=e[22];const{filledIcon:A,fullLabel:I}=M;f=H1,v=A,y=o==="standard"?n:I,b=!0,C=i,S=l,g=Z9e,u=K.RadioGroup,m=o,e[23]!==s||e[24]!==a?(p=N=>{const L=N;zZ(s,L),a(L)},e[23]=s,e[24]=a,e[25]=p):p=e[25],e[26]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(K.Label,{children:r.jsx(j,{id:"YhWabo",defaultMessage:"Thinking time"})}),e[26]=h):h=e[26],x=T.map(K9e),e[0]=d,e[1]=c,e[2]=n,e[3]=s,e[4]=a,e[5]=l,e[6]=i,e[7]=o,e[8]=u,e[9]=f,e[10]=m,e[11]=g,e[12]=p,e[13]=h,e[14]=x,e[15]=v,e[16]=y,e[17]=b,e[18]=C,e[19]=S}else u=e[8],f=e[9],m=e[10],g=e[11],p=e[12],h=e[13],x=e[14],v=e[15],y=e[16],b=e[17],C=e[18],S=e[19];let E;e[27]!==u||e[28]!==m||e[29]!==p||e[30]!==h||e[31]!==x?(E=r.jsxs(u,{value:m,onValueChange:p,children:[h,x]}),e[27]=u,e[28]=m,e[29]=p,e[30]=h,e[31]=x,e[32]=E):E=e[32];let k;return e[33]!==f||e[34]!==g||e[35]!==E||e[36]!==v||e[37]!==y||e[38]!==b||e[39]!==C||e[40]!==S?(k=r.jsx(f,{icon:v,label:y,removable:b,onRemove:C,onCloseAutoFocus:S,onOpenChange:g,dropdownContent:E}),e[33]=f,e[34]=g,e[35]=E,e[36]=v,e[37]=y,e[38]=b,e[39]=C,e[40]=S,e[41]=k):k=e[41],k};function Y9e({effort:t}){const e=ne(),{progressIcon:n,shortLabel:s,description:o}=LM(e,t);return r.jsx(pt,{side:"right",labelTextAlign:"left",contentClassName:"cant-hover:hidden",labelClassName:"[text-wrap:pretty]",label:o,triggerAs:null,children:r.jsx(K.RadioItem,{value:t,icon:n,label:s})})}function Z9e(t){t&&B.logEventWithStatsig("ChatGPT Composer Thinking Effort Opened","chatgpt_composer_thinking_effort_opened")}function K9e(t){return r.jsx(Y9e,{effort:t},t)}const dB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8.99992 16V6.41407L5.70696 9.70704C5.31643 10.0976 4.68342 10.0976 4.29289 9.70704C3.90237 9.31652 3.90237 8.6835 4.29289 8.29298L9.29289 3.29298L9.36907 3.22462C9.76184 2.90427 10.3408 2.92686 10.707 3.29298L15.707 8.29298L15.7753 8.36915C16.0957 8.76192 16.0731 9.34092 15.707 9.70704C15.3408 10.0732 14.7618 10.0958 14.3691 9.7754L14.2929 9.70704L10.9999 6.41407V16C10.9999 16.5523 10.5522 17 9.99992 17C9.44764 17 8.99992 16.5523 8.99992 16Z"})),Q9e=Object.freeze(Object.defineProperty({__proto__:null,default:dB},Symbol.toStringTag,{value:"Module"})),uB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M7.167 15.416V4.583a.75.75 0 0 1 1.5 0v10.833a.75.75 0 0 1-1.5 0Zm4.166-2.5V7.083a.75.75 0 0 1 1.5 0v5.833a.75.75 0 0 1-1.5 0ZM3 11.25V8.75a.75.75 0 0 1 1.5 0v2.5a.75.75 0 0 1-1.5 0Zm12.5 0V8.75a.75.75 0 0 1 1.5 0v2.5a.75.75 0 0 1-1.5 0Z"})),J9e=Object.freeze(Object.defineProperty({__proto__:null,default:uB},Symbol.toStringTag,{value:"Module"}));class e4{constructor(e){J(this,"namespace","Voice");e&&(this.namespace=e.namespace)}log(e,...n){}info(...e){this.log("log",...e)}debug(...e){this.log("debug",...e)}error(...e){this.log("error",...e)}createChild(e){return new e4({namespace:"".concat(this.namespace,":").concat(e)})}}const vi=new e4,Ha=t=>t===0?null:t+performance.timeOrigin,G1=t=>{const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];e[n]=Ha(s!=null?s:0)}return e},fB=Be(void 0),mB=Be(void 0),gB=Be(void 0),pB=Be(void 0),X9e=Be(void 0),hB=Be(void 0),_B=Be(void 0),xB=Be(void 0),yB=Be(void 0),eEe=Be(void 0),vB=Be(void 0),bB=Be(void 0),CB=Be(void 0),eet=()=>jd(()=>{const t=gB(),e=fB(),n=mB(),s=hB(),o=yB();return G1({pre_connection_setup_start_time:t==null?void 0:t.start_time,pre_connection_setup_end_time:t==null?void 0:t.end_time,audio_input_aquisition_start_time:e==null?void 0:e.start_time,audio_input_aquisition_end_time:e==null?void 0:e.end_time,audio_transceiver_setup_start_time:n==null?void 0:n.start_time,audio_transceiver_setup_end_time:n==null?void 0:n.end_time,post_connection_setup_start_time:s==null?void 0:s.start_time,post_connection_setup_end_time:s==null?void 0:s.end_time,quality_monitor_setup_start_time:o==null?void 0:o.start_time,quality_monitor_setup_end_time:o==null?void 0:o.end_time})}),tet=()=>jd(()=>{const t=eEe(),e=vB(),n=bB(),s=CB(),o=pB(),a=X9e();return G1({pre_connect_get_peer_connection_start_time:t==null?void 0:t.start_time,pre_connect_get_peer_connection_end_time:t==null?void 0:t.end_time,pre_connect_data_channel_start_time:e==null?void 0:e.start_time,pre_connect_data_channel_end_time:e==null?void 0:e.end_time,pre_connect_event_handlers_start_time:n==null?void 0:n.start_time,pre_connect_event_handlers_end_time:n==null?void 0:n.end_time,pre_connect_blank_transceiver_start_time:s==null?void 0:s.start_time,pre_connect_blank_transceiver_end_time:s==null?void 0:s.end_time,pre_connect_create_offer_start_time:o==null?void 0:o.start_time,pre_connect_create_offer_end_time:o==null?void 0:o.end_time,pre_connect_create_abort_signal_start_time:a==null?void 0:a.start_time,pre_connect_create_abort_signal_end_time:a==null?void 0:a.end_time})}),net=()=>jd(()=>{const t=_B(),e=xB();return G1({post_connect_set_remote_description_start_time:t==null?void 0:t.start_time,post_connect_set_remote_description_end_time:t==null?void 0:t.end_time,post_connect_get_response_text_start_time:e==null?void 0:e.start_time,post_connect_get_response_text_end_time:e==null?void 0:e.end_time})}),t4=Be(void 0),n4=Be(void 0),SB=Be(void 0),set=()=>jd(()=>{const t=n4(),e=t4();return G1({connect_auth_headers_start_time:t==null?void 0:t.start_time,connect_auth_headers_end_time:t==null?void 0:t.end_time,connect_new_form_start_time:e==null?void 0:e.start_time,connect_new_form_end_time:e==null?void 0:e.end_time})}),oet=()=>{fB.set(void 0),mB.set(void 0),gB.set(void 0),hB.set(void 0),yB.set(void 0),vB.set(void 0),bB.set(void 0),CB.set(void 0),pB.set(void 0),_B.set(void 0),xB.set(void 0),t4.set(void 0),n4.set(void 0),SB.set(void 0)},N7=(t,e)=>{const n=performance.now(),s=e(),o=performance.now();return t.set({start_time:n,end_time:o}),s},aet=async(t,e)=>{const n=performance.now(),s=await e(),o=performance.now();return t.set({start_time:n,end_time:o}),s},tEe=Hn(t=>ve(t,"2783249450")),W1=t=>tEe(t),nEe=window.location.origin+"/voice",wB=window.location.origin,kB=window.location.origin,sEe=[/\[abort\]/,/The user aborted a request/,/Fetch is aborted/,/Request signal is aborted/],oEe="v=0\r\no=- 0 0 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=ice-ufrag:foo\r\na=ice-pwd:barbazqux\r\na=fingerprint:sha-256 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00\r\na=setup:actpass\r\na=msid-semantic: WMS\r\nm=audio 9 UDP/TLS/RTP/SAVPF 111\r\nc=IN IP4 0.0.0.0\r\na=rtpmap:111 opus/48000/2\r\na=mid:0\r\na=rtcp-mux\r\n",aEe=t=>{const e=t instanceof Error?t.message:String(t);return sEe.some(n=>n.test(e))},EB=()=>{const t=_s();return ve(t,"571174949")&&!0},P7=()=>{const t=EB(),e=t?kB:wB,n=t?"/realtime/status":"/v1/vp/status";return"".concat(e).concat(n)},t2=(t=!0)=>{const e=EB(),n=e?kB:wB,s=e?"/realtime/vp":"/v1/vp";return"".concat(n).concat(s).concat(t?"":"s")};async function R7(t,{payload:e,eventSource:n,url:s}){var i;const o={eventSource:n,voice:e.voice,voice_mode:(i=e.voice_mode)!=null?i:"undefined",voice_session_id:e.voice_session_id};performance.clearResourceTimings();const a=performance.now();Ut.getToken.request(o);try{const l=await t();jd(()=>{const d=performance.getEntriesByType("resource").filter(f=>f.name.includes(s))[0],u={domain_lookup_start_time:null,domain_lookup_end_time:null,connect_end_time:null,connect_start_time:null,secure_connection_start_time:null,request_start_time:null,response_start_time:null,response_end_time:null,latency_ms:null};if(d){const{domainLookupEnd:f,domainLookupStart:m,connectEnd:g,connectStart:p,secureConnectionStart:h,requestStart:x,responseStart:v,responseEnd:y,duration:b}=d;u.domain_lookup_start_time=Ha(m),u.domain_lookup_end_time=Ha(f),u.connect_end_time=Ha(g),u.connect_start_time=Ha(p),u.secure_connection_start_time=Ha(h),u.request_start_time=Ha(x),u.response_start_time=Ha(v),u.response_end_time=Ha(y),u.latency_ms=b||null}vi.debug({timing:u,entry:d}),SB.set(u)});const c=performance.now()-a;return Ut.getToken.success(U(w({},o),{durationMs:c})),l}catch(l){const c=performance.now()-a,d=aEe(l);throw Ut.getToken.failure(U(w({},o),{durationMs:c,error:l instanceof Error?l.message:String(l),voice_session_id:e.voice_session_id,user_aborted:d})),l}}class Zp{static startLivekitSession(e,n,s){const o="".concat(nEe,"/get_token");return R7(()=>Mg.post(o,e,{additionalHeaders:s?{[gc.ProofToken]:s}:{}}),{payload:e,eventSource:n,url:o})}static startTransceiverSession({payload:e,accessToken:n,proofOfWorkAnswer:s,eventSource:o,signal:a,dataChannelId:i=0,offer:l}){const c=e.voice_mode==="advanced",d="".concat(t2(c),"?dcid=").concat(i);return R7(async()=>{const u=N7(n4,()=>Kg({accessToken:n}));delete u["cf-timezone"];let f={};const m=N7(t4,()=>{const p=new FormData;return p.append("sdp",l.sdp),p.append("session",JSON.stringify(e)),p}),g=await fetch(d,{method:"POST",body:m,headers:w(w(w({},u),f),s?{[gc.ProofToken]:s}:{}),signal:a});if(!g.ok)throw new Error("Failed to create session: ".concat(g.statusText));return g},{payload:e,eventSource:o,url:d})}static prewarmRealtimeVoice(){const e={[gc.ProofToken]:"dummy"},n=w(w({},Kg({accessToken:"dummy"})),e),s=()=>{};Mg.post(P7(),{requested_voice_mode:"prewarm"},{additionalHeaders:e}).catch(s);const o=()=>{const a=new FormData;return a.append("sdp",oEe),a.append("session",JSON.stringify({voice_mode:"prewarm"})),a};fetch("".concat(t2(!0),"?dcid=0"),{method:"POST",body:o(),headers:n}).catch(s),fetch("".concat(t2(!1),"?dcid=0"),{method:"POST",body:o(),headers:n}).catch(s)}static async getVoiceStatus(e,n){var a;const s={eventSource:n,requested_voice_mode:(a=e.requested_voice_mode)!=null?a:"null"},o=await xr.getRequirementsToken();return Ut.getVoiceStatus.request(s),ge.safePost("/conversation/voice/status",{requestBody:e,additionalHeaders:{[gc.ProofToken]:o}}).then(i=>(Ut.getVoiceStatus.success(s),i)).catch(i=>{throw Ut.getVoiceStatus.failure(U(w({},s),{error:i==null?void 0:i.message})),i})}static async getRealtimeVoiceStatus(e,n){var a;const s={eventSource:n,requested_voice_mode:(a=e.requested_voice_mode)!=null?a:"null"},o=await xr.getRequirementsToken();return Ut.getVoiceStatus.request(s),Mg.post(P7(),e,{additionalHeaders:{[gc.ProofToken]:o}}).then(i=>(Ut.getVoiceStatus.success(s),i)).catch(i=>{throw Ut.getVoiceStatus.failure(U(w({},s),{error:i==null?void 0:i.message})),i})}}const rEe=t=>W1(t)?Zp.getRealtimeVoiceStatus:Zp.getVoiceStatus,iEe=()=>[8,4,4,4,12].map(e=>Math.floor(Math.random()*Math.pow(10,e)).toString(16).padStart(e,"0").toUpperCase()).join("-");var nr=(t=>(t.StateUpdate="state_update",t.ActionRequest="action_request",t.ConversationUpdate="conversation_update",t.RelayMessage="relay_message",t.Unknown="unknown",t.UsageUpdate="usage_update",t.ToolUpdate="tool_update",t.TurnContext="turn_context",t.Performance="performance",t.StartupTelemetry="startup_telemetry",t.TrackState="track_state",t.FullChatMessage="full_chat_message",t.LiveCaptioningText="live_captioning_text",t.UserTranscriptionText="user_transcription_text",t))(nr||{}),lEe=(t=>(t.StartListeningIntently="start_listening",t.StopListeningIntently="stop_listening",t.HaltAllActivity="stop_speaking",t.ResumeListening="resume_listening",t.RelayMessage="relay_message",t))(lEe||{}),cEe=(t=>(t.Connecting="connecting",t.Idle="idle",t.Connected="connected",t.Halted="halted",t.Listening="listening",t.ListeningIntently="listening_intently",t.Thinking="thinking",t.Speaking="speaking",t))(cEe||{}),Ey=(t=>(t.Add="add",t.Remove="remove",t))(Ey||{});let n2;const dEe=()=>(n2||(n2=new TextEncoder),n2);async function TB({room:t,event:e,voiceStore:n}){const s=dEe();await t.localParticipant.publishData(s.encode(JSON.stringify(e))),n.setState(o=>{o.server.messages.push(U(w({},e),{timestamp:new Date,source:"local"}))})}function ret(t,e,n,s){TB({room:t,voiceStore:e,event:{type:nr.TrackState,payload:{type:nr.TrackState,track_id:n==="camera_front"?"webcam":"screenshare",media_type:"video",media_source:n,state:s}}})}function uEe(t,e,n,s){TB({room:t,voiceStore:e,event:{type:nr.TrackState,payload:{type:nr.TrackState,track_id:"microphone",media_type:"audio",media_source:n,state:s}}})}class fEe{constructor(){J(this,"logger",vi.createChild("VoiceTurnContext"));J(this,"publish",async()=>{throw new Error("VoiceTurnContext does not have a set publisher.")});J(this,"store",Ft(Af(Mn(()=>({parts:{},attachments:{}})))))}useState(e){return this.store(e||(n=>n))}setPublisher(e){this.publish=e}async add({parts:e,attachments:n}){if(!e&&!n)return;let s={},o={};n&&(s=Object.fromEntries(n.map(i=>[this.makeId("attachment"),i]))),e&&(o=Object.fromEntries(e.map(i=>[this.makeId("part"),i])));const a={type:nr.TurnContext,payload:{type:nr.TurnContext,action:Ey.Add,attachments:s,parts:o}};await this.publish(a),this.store.setState(i=>{i.parts=Object.assign(i.parts,o),i.attachments=Object.assign(i.attachments,s)}),this.logger.info("Added",{payload:a})}async remove({parts:e,attachments:n}){if(!e&&!n)return;this.logger.info("Removing turn context attachment",{parts:e,attachments:n});const s={},o={},a=this.store.getState();n&&n.forEach(l=>{a.attachments[l]&&(s[l]=a.attachments[l])}),e&&e.forEach(l=>{a.parts[l]&&(o[l]=a.parts[l])});const i={type:nr.TurnContext,payload:{type:nr.TurnContext,action:Ey.Remove,attachments:s,parts:o}};this.publish(i),this.store.setState(l=>{Object.keys(o).forEach(c=>{delete l.parts[c]}),Object.keys(s).forEach(c=>{delete l.attachments[c]})}),this.logger.info("Removed",{payload:i})}async clear(){this.store.setState(e=>{e.parts={},e.attachments={}}),this.logger.info("Cleared")}makeId(e){return"client:".concat(e?"".concat(e,":"):"").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,15))}}var mEe=(t=>(t.Starting="starting",t.Started="started",t.Stopping="stopping",t.Stopped="stopped",t))(mEe||{});const MB={conversationId:null,voiceSessionId:null,isActivityHalted:!1,isVoiceModeActive:!1,video:"stopped",screenshare:"stopped",dev:{room:null},credentials:{token:null,url:null,e2eeKey:null},server:{actions:null,connectionState:null,remoteState:null,messages:[],usage:null,toolUpdate:null,voiceConnectionQuality:null,turnContext:new fEe,relayReady:!1},disconnectPending:void 0,showVoicePicker:!1,showNuxFullPage:!1,metrics:{totalLatencyMs:[],currentRttMs:[],numSpeaking:0,numThinking:0,numListening:0,conversationLatency:0},hasConnectedOnce:!1},AB=t=>{const e=Ft(Af(Mn(()=>MB)));return t&&e.setState(t),e},gEe=AB(),IB=_.createContext(null),iet=({children:t,initializer:e})=>{const n=_.useRef(void 0);return n.current||(n.current=AB(e)),r.jsx(IB.Provider,{value:n.current,children:t})};function Wl(){const t=_.useContext(IB);return t!=null?t:gEe}function vl(t){return Wl()(t)}function cet(){const t=re(()=>av()),e=vl(s=>!!(s.credentials.token&&s.credentials.url&&s.credentials.e2eeKey)),n=vl(s=>s.server.connectionState==="connected");return t==="livekit"?e:n}function det(){return Wl()(e=>e.voiceStatus)}function pEe(){const{voiceName:t}=N1(),e=Wl(),n=V(),s=rEe(n);return _.useCallback(async function(a,i){var d;const l=iEe(),c=await s(U(w({},a),{timezone_offset_min:new Date().getTimezoneOffset(),nonce:vz(),voice:(d=a.voice)!=null?d:t,voice_session_id:l}),i);return c!=null&&c.chatreq&&xr.startEnforcement(c==null?void 0:c.chatreq),e.setState({voiceStatus:c}),U(w({},c),{voice_session_id:l})},[t,s,e])}function uet(){const[t,e]=_.useState(!1),n=Wl(),s=_.useCallback(async()=>{e(!0);const o=n.getState().dev.room;if(o){const a=o.localParticipant.isMicrophoneEnabled,i=a?"mute":"unmute";Ut.toggleMuteButton.click({toggleTo:i});try{await o.localParticipant.setMicrophoneEnabled(!a),uEe(o,n,"microphone",i==="mute"?"muted":"live")}finally{e(!1)}}},[n]);return{isMuting:t,toggleMute:s}}function fet(t,e){if(t){const{credentials:n,conversationId:s,voiceSessionId:o,voiceMode:a}=t;vi.debug("setting credentials",t),e.setState(i=>{i.conversationId=s,i.credentials=n,i.voiceSessionId=o,i.voiceMode=a});return}vi.debug("clearing credentials"),hEe(e)}function met(){const t=Wl(),e=vl(o=>o.video),n=_.useCallback(o=>{t.setState(a=>{const i=a.video?"off":"on";Ut.toggleVideoButton.click({eventSource:o,toggleTo:i}),a.video==="stopped"?(a.screenshare==="started"&&(a.screenshare="stopping"),a.video="starting"):a.video="stopping"})},[t]),s=_.useCallback(o=>{t.setState(a=>{a.video=o})},[t]);return{cameraTrackState:e,finalizeCameraState:s,toggleCamera:n}}function get(){const t=vl(o=>o.screenshare),e=Wl(),n=_.useCallback(o=>{e.setState(a=>{const i=a.screenshare?"off":"on";Ut.toggleScreenShareButton.click({eventSource:o,toggleTo:i}),a.screenshare==="stopped"?(a.video==="started"&&(a.video="stopping"),a.screenshare="starting"):a.screenshare="stopping"})},[e]),s=_.useCallback(o=>{e.setState(a=>{a.screenshare=o})},[e]);return{screenshareTrackState:t,toggleScreenShare:n,finalizeScreenshareState:s}}function hEe(t){t.setState(e=>U(w({},MB),{isVoiceModeActive:e.isVoiceModeActive,hasConnectedOnce:e.hasConnectedOnce}))}function pet(t){const e=t.default_voice_mode,n=t.modes.find(s=>s.mode===e);if(!n)throw new Error("Voice status returned a default_voice_mode that does not exist in the modes array");return n}const _Ee="{{.assetPrefix}}/assets/pcm-player-processor-Bnki682T.js";var ua,fa,Sf,Zc,Bo,Wi,jB;class L7 extends bz.EventEmitter{constructor({sampleRate:n=24e3,channels:s=1}={}){super();ao(this,Bo);ao(this,ua);ao(this,fa,null);ao(this,Sf);ao(this,Zc);Nr(this,ua,new AudioContext({sampleRate:n,latencyHint:"playback"})),Nr(this,Sf,s),Nr(this,fa,null),Nr(this,Zc,!1)}async preload(){return await Jt(this,Bo,Wi).call(this),this}async stream(n){const s=await Jt(this,Bo,Wi).call(this);let o=0,a=await n.read();for(;!a.done;)this.emit("ready"),s.port.postMessage({type:"push",payload:{chunk:a.value}}),o+=a.value.byteLength,a=await n.read();Nr(this,Zc,!0),o===0&&this.emit("error")}async play(){wn(this,ua).state==="suspended"&&await wn(this,ua).resume(),(await Jt(this,Bo,Wi).call(this)).port.postMessage({type:"play"})}async pause(){(await Jt(this,Bo,Wi).call(this)).port.postMessage({type:"pause"})}async seek(n){(await Jt(this,Bo,Wi).call(this)).port.postMessage({type:"seek",payload:{seconds:n}})}async reset(){(await Jt(this,Bo,Wi).call(this)).port.postMessage({type:"reset"})}destroy(){this.removeAllListeners(),wn(this,fa)&&(wn(this,fa).disconnect(),Nr(this,fa,null)),wn(this,ua).close()}}ua=new WeakMap,fa=new WeakMap,Sf=new WeakMap,Zc=new WeakMap,Bo=new WeakSet,Wi=async function(){if(wn(this,fa))return wn(this,fa);await wn(this,ua).audioWorklet.addModule(_Ee);const n=new AudioWorkletNode(wn(this,ua),"pcm-player");return n.connect(wn(this,ua).destination),n.port.postMessage({type:"init",payload:{channels:wn(this,Sf)}}),n.port.onmessage=Jt(this,Bo,jB).bind(this),Nr(this,fa,n),n},jB=function(n){switch(n.data.type){case"timeupdate":{this.emit("timeupdate",{seconds:n.data.payload.seconds,totalSeconds:n.data.payload.totalSeconds}),wn(this,Zc)&&n.data.payload.seconds>=n.data.payload.totalSeconds&&this.emit("ended");break}}};const Kp=Symbol("both-are-bad"),xEe=({serverThreadId:t})=>Wy(Mn((e,n)=>{const s=(o,a)=>e(i=>{const l=i.paragens.find(c=>c.id===o);l&&a(l)});return{serverThreadId:t,paragens:[],playingId:null,selectedId:null,shouldShowAudioParagenPrompt:!1,shouldShowThankYouTooltip:!1,actions:{createAudioParagen:async o=>{var b,C,S;const{serverThreadId:a}=n();if(!a){const E=new Error("thread id is not set");throw Fe.addError(E),E}const i=os(),l=os();e(E=>{E.paragens[0]={id:i},E.paragens[1]={id:l}});const{forceParagen:c,forceParagenModel:d}=xd(),[u,f,m]=await Promise.all([ge.safePost("/generate_audio_paragen",{requestBody:w({conversation_id:a,message_id:o,paragen_ids:[i,l]},c?{force_paragen:!0,force_paragen_model_slug:d.value}:{}),skipJsonTransform:!0}),new L7().preload(),new L7().preload()]),g=(b=u.body)==null?void 0:b.getReader();if(!u.ok||!g){for(const E of[i,l])s(E,k=>{k.error=new Error("Failed to create audio paragen: ".concat(u.statusText))});return}const p={},h=E=>new ReadableStream({start(k){p[E]=k}}),x=(E,k)=>{E.on("ready",()=>s(k,T=>{T.player=E})).on("error",()=>s(k,T=>{T.error=!0}))};x(f,i),x(m,l),f.stream(h(i).getReader()),m.stream(h(l).getReader());const v=new TextDecoder;let y="";for(;;){const{value:E,done:k}=await g.read();if(k)break;y+=v.decode(E,{stream:!0});let T=y.indexOf("\n");for(;T!==-1;){const M=y.slice(0,T).trim();if(y=y.slice(T+1),M)try{const A=JSON.parse(M),I=A.paragen_id;if(A.chunk){const N=Uint8Array.from(atob(A.chunk),L=>L.charCodeAt(0));(C=p[I])==null||C.enqueue(N)}A.done&&((S=p[I])==null||S.close())}catch(A){}T=y.indexOf("\n")}}},playParagen:o=>{B.logEventWithStatsig("Audio Paragen: Play","chatgpt_audio_paragen_play",{paragen_id:o}),e(a=>{a.playingId=o})},pauseParagen:(o,a=!1)=>{a&&B.logEventWithStatsig("Audio Paragen: Pause","chatgpt_audio_paragen_pause",{paragen_id:o}),e(i=>{i.playingId===o&&(i.playingId=null)})},selectParagen:o=>{B.logEventWithStatsig("Audio Paragen: Select Option","chatgpt_audio_paragen_select_option",{paragen_id:o}),e(a=>{a.playingId=null,a.selectedId=o})},submitParagenResults:async(o,a,i)=>{const{paragens:l,selectedId:c,serverThreadId:d}=n();if(!d){const f=new Error("thread id is not set");throw Fe.addError(f),f}B.logEventWithStatsig("Audio Paragen: Submit Results","chatgpt_audio_paragen_submit_results");const u=await ge.safePost("/paragen_audio_submission",{requestBody:{conversation_id:d,user_prompt_message_id:o,displayed_paragen_ids:l.map(f=>f.id),selected_paragen_id:c===Kp?null:c,reviews:a,stream_type:"stream",freeform_feedback:i},skipJsonTransform:!0});if(!u.ok){const f=new Error("Failed to create audio paragen: ".concat(u.statusText));throw Fe.addError(f,{conversationId:d,messageId:o}),f}},setShouldShowThankYouTooltip:o=>{e(a=>{a.shouldShowThankYouTooltip=o})},resetStore:()=>{e(o=>{var a;for(const i of o.paragens)(a=i.player)==null||a.destroy();o.paragens=[],o.playingId=null,o.selectedId=null})}}}}),Sl),z1=_.createContext(null);z1.displayName="AudioParagenStore";function yEe(){const t=_.useContext(z1);if(!t)throw new Error("useAudioParagenState must be used within a AudioParagenStoreProvider");return t}function vEe(t,e){const n=_.useContext(z1);if(n)return n(t,e)}function ud(t,e){const n=yEe(),s=Cz(n,t,e);if(s===n.getState())throw new Error("Selector cannot return the entire state. Please select a specific part of the state.");return s}function q1(){return ud(t=>t.actions)}function het(t,e){const{createAudioParagen:n,resetStore:s}=q1(),{paragens:o}=ud(a=>({paragens:a.paragens}));return _.useEffect(()=>{if(!(!e||!t))return n(t),()=>{s()}},[n,e,t,s]),o.every(a=>a.player&&!a.error)}function _et({children:t,serverThreadId:e}){const n=_.useRef(null);return n.current==null&&(n.current=xEe({serverThreadId:e})),_.useEffect(()=>{const s=n.current;s&&!s.getState().serverThreadId&&e&&s.setState(o=>{o.serverThreadId=e})},[e]),r.jsx(z1.Provider,{value:n.current,children:t})}const NB=new Set;function xet(t){return t?NB.has(t):!1}function bEe(t){NB.add(t)}function CEe(){return typeof RTCPeerConnection<"u"&&typeof RTCPeerConnection.generateCertificate=="function"}function SEe(){"use forget";const t=lt(Oe.hasSeenAdvancedVoiceNuxFullPage);return!t.isLoading&&t.eligible}function wEe(t){Ut.voiceAdvancedDisclosureShown.success(),t.setState(e=>{e.showNuxFullPage=!0})}function kEe(t,e){return z("relative flex h-9 items-center justify-center rounded-full disabled:text-gray-50 disabled:opacity-30",t?"min-w-8 p-2":e?"w-7":"w-9",e&&"h-7!","composer-secondary-button-color hover:opacity-80")}function EEe(){const t=ne();return r.jsx("span",{className:"ps-1 pe-1 text-[13px] font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:t.formatMessage({id:"composerSpeechUpsell.voiceLabel",defaultMessage:"Voice"})})}const TEe=R(()=>P(()=>import("./dc3gfewlwzqweadg.js"),__vite__mapDeps([365,1,10,11,366,367,368,369])).then(t=>t.VoiceModals)),MEe=()=>{const t=V(),e=Wl(),n=!tt(t),s=SEe(),o=rv();return()=>{if(B.logEventWithStatsig("Composer Speech Button Clicked","composer_speech_button_clicked",{protocol:o}),n)return Ut.voiceSelectionShown.click(n?{isUnauthenticated:!0,eventSource:"composerSpeechButton"}:{}),e.setState(i=>{i.showVoicePicker=!0});if(s)return wEe(e);e.setState(i=>{i.isVoiceModeActive=!0})}};function AEe({isSmall:t=!1,disableTooltip:e=!1,clientThreadId:n}){const s=V(),a=ne().formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),i=rv(),l=vl(g=>g.isVoiceModeActive),{loggedOutVoiceLabel:c}=re(()=>Id(s)),{getUpsellLabelType:d}=QF(),u=tt(s)?d()==="all":c,f=MEe(),m=Y3()?CEe():!0;return r.jsxs(r.Fragment,{children:[r.jsx(IEe,{disabled:e,protocol:i,isRTCSupported:m,children:r.jsxs("button",{"data-testid":"composer-speech-button",onClick:f,"aria-label":a,disabled:!m||l,className:kEe(u,t),style:{viewTransitionName:"var(--vt-composer-speech-button)"},children:[r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(uB,{className:"icon"})}),u&&r.jsx(EEe,{})]})}),r.jsx(TEe,{clientThreadId:n})]})}function IEe(t){return vEe(n=>n.shouldShowThankYouTooltip)?r.jsx(NEe,w({},t)):r.jsx(jEe,w({},t))}function jEe({children:t,disabled:e=!1,protocol:n,isRTCSupported:s}){const o=ne();return r.jsx(pt,{open:e?!1:void 0,label:s?o.formatMessage(Qp.defaultTooltipLabel):o.formatMessage(Qp.webRTCNotSupportedLabel),side:"bottom",onOpenChange:a=>{a&&(B.logEvent("Composer Speech Button Hovered",{protocol:n}),Ut.composerSpeechButton.hover())},children:t})}function NEe({children:t}){const{setShouldShowThankYouTooltip:e}=q1();return _.useEffect(()=>{const n=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(n)},[e]),r.jsx(pt,{open:!0,label:r.jsx(j,w({},Qp.audioParagenThankYouLabelHeader)),secondaryLabel:r.jsx(j,w({},Qp.audioParagenThankYouLabelSubheader)),side:"top",withArrow:!0,children:t})}const Qp=Se({audioParagenThankYouLabelHeader:{id:"ComposerSpeechButton.audioParagenThankYouLabelHeader",defaultMessage:"Thank you for your feedback!"},audioParagenThankYouLabelSubheader:{id:"ComposerSpeechButton.audioParagenThankYouLabelSubheader",defaultMessage:"Continue chatting with voice mode"},defaultTooltipLabel:{id:"ComposerSpeechButton.defaultTooltipLabel",defaultMessage:"Use voice mode"},webRTCNotSupportedLabel:{id:"ComposerSpeechButton.webRTCNotSupportedLabel",defaultMessage:"Voice mode unsupported"}}),PEe=R(()=>P(()=>import("./jhmmtvnia7g89f8p.js"),__vite__mapDeps([370,1,10,11,367,368,371,366,372,373,59,19,21,17,15,16,74])).then(t=>t.VoiceModeLayout)),REe=R(()=>P(()=>import("./msyfo1wqmxehxjab.js"),__vite__mapDeps([374,1,10,11])).then(t=>t.VoiceConversationRating));function LEe(){const t=V(),e=rv();return ve(t,"482976135")&&e==="transceiver"}function s4(){const t=LEe();return!D5()||Sd()?!1:W8()?t:!0}function yet(t){return s4()?r.jsx(PEe,w({},t)):null}function OEe(t){return s4()?r.jsx(REe,w({},t)):null}const DEe=1e3,O7=t=>{"use forget";const e=W.c(11),{children:n}=t,s=_.useRef(!0),o=_.useRef(void 0),a=V();let i;e[0]!==a?(i=ve(a,"2921139901"),e[0]=a,e[1]=i):i=e[1];const l=i,c=vl(FEe),d=Pl(),u=c||d;let f;e[2]!==l||e[3]!==u?(f=()=>{!u&&s.current&&l&&(s.current=!1,Zp.prewarmRealtimeVoice())},e[2]=l,e[3]=u,e[4]=f):f=e[4];const m=f;let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{o.current||(o.current=window.setTimeout(()=>{s.current=!0,o.current=void 0},DEe))},e[5]=g):g=e[5];const p=g;let h,x;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=()=>()=>{window.clearTimeout(o.current)},x=[],e[6]=h,e[7]=x):(h=e[6],x=e[7]),_.useEffect(h,x);let v;return e[8]!==n||e[9]!==m?(v=r.jsx("div",{onMouseEnter:m,onMouseLeave:p,children:n}),e[8]=n,e[9]=m,e[10]=v):v=e[10],v};function FEe(t){return t.isVoiceModeActive}const BEe=R(()=>P(()=>import("./n8rdfg2xatgkqad1.js"),__vite__mapDeps([306,1])),{loading:t=>F(t)}),UEe=R(()=>P(()=>import("./tz2l7hn0ceuh7h4a.js"),__vite__mapDeps([375,1,10,11,369,366,367,368,371,372,373,59,19,21,17,15,16,74,376])).then(t=>t.IntegratedUXComposerContainer));function $Ee(t){"use forget";var A;const e=W.c(4),n=V(),s=!tt(n),a=sv(VEe).length>0;let i;e[0]!==t.composerController?(i=()=>!af(t.composerController),e[0]=t.composerController,e[1]=i):i=e[1];const l=re(i),c=!a&&!l,{browseMode:d}=Xc(),u=bl(),f=Sd()&&!u,m=Es(),g=ve(n,"2360528850"),p=Pl(),h=m&&!g,x=ve(n,"3728856343"),v=st(n),y=Jo(),b=es(n),C=An(mn);let S;e[2]!==n?(S=()=>Id(n),e[2]=n,e[3]=S):S=e[3];const{isSingleLine:E}=re(S),{getShowVoiceUpsell:k}=QF();if(p)return"speech";if(t.inputState==="disabled"&&t.disableReason!=="pimBlock"||C&&E&&c&&t.state!=="streaming")return"disabled";const T=v!=null&&!b&&((A=y==null?void 0:y.includes(ss.AllowVoiceUse))!=null?A:!1);return(!s&&T||s&&(x||k()))&&c&&t.state==="disabled"&&t.clientThreadId&&d!=="gizmo-editor"&&!f&&!h?"speech":"submit"}function VEe(t){return t.files}function vet(t){"use forget";const e=W.c(22),n=V();let s;e[0]!==n?(s=Sz(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=Pl(),i=Ve(t.clientThreadId,HEe),l=$Ee(t),c=s4();let d;e[2]!==t.composerController?(d=()=>tv(t.composerController),e[2]=t.composerController,e[3]=d):d=e[3];const u=re(d);if(l==="disabled"&&!i)return null;const f=t.state==="disabled",m=t.state==="streaming";let g;e[4]!==t.clientThreadId||e[5]!==t.composerController||e[6]!==t.disableReason||e[7]!==t.forceStopButton||e[8]!==t.isSmall||e[9]!==t.onSubmit||e[10]!==t.useStartButtonText||e[11]!==i||e[12]!==f||e[13]!==m?(g=r.jsx(GEe,{isSmall:t.isSmall,isDisabled:f,isStreaming:m,showSpinner:i,onSubmit:t.onSubmit,disableReason:t.disableReason,useStartButtonText:t.useStartButtonText,composerController:t.composerController,clientThreadId:t.clientThreadId,forceStopButton:t.forceStopButton}),e[4]=t.clientThreadId,e[5]=t.composerController,e[6]=t.disableReason,e[7]=t.forceStopButton,e[8]=t.isSmall,e[9]=t.onSubmit,e[10]=t.useStartButtonText,e[11]=i,e[12]=f,e[13]=m,e[14]=g):g=e[14];const p=g,h=l==="speech"&&c;if(t.clientThreadId&&(a||h&&!0)){let v;return e[15]!==o||e[16]!==u||e[17]!==t.clientThreadId||e[18]!==t.disableTooltip||e[19]!==t.isSmall||e[20]!==t.onSubmit?(v=o?r.jsx(O7,{children:r.jsx(UEe,{clientThreadId:t.clientThreadId,isFocused:u,onComposerSubmit:t.onSubmit})}):r.jsx("div",{className:t.isSmall?"min-w-7":"min-w-9","data-testid":"composer-speech-button-container",children:r.jsx(O7,{children:r.jsx(AEe,{isSmall:t.isSmall,clientThreadId:t.clientThreadId,disableTooltip:t.disableTooltip})})}),e[15]=o,e[16]=u,e[17]=t.clientThreadId,e[18]=t.disableTooltip,e[19]=t.isSmall,e[20]=t.onSubmit,e[21]=v):v=e[21],v}return p}function HEe(t){var e,n;return!!(t!=null&&t.interruptionInProgress)&&!!((n=(e=he.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&n.n7jupd_message)}function GEe(t){"use forget";var $;const e=W.c(27),{onSubmit:n,isStreaming:s,isDisabled:o,showSpinner:a,disableReason:i,useStartButtonText:l,composerController:c,isSmall:d,clientThreadId:u,forceStopButton:f}=t;let m;e[0]!==c?(m=()=>af(c),e[0]=c,e[1]=m):m=e[1];const g=re(m),p=Hie(u),h=s&&(!p||g||f),x=a?ws:h?BEe:dB,v=ne(),y=i==="async_task_pending"&&!p,b=$L(),C=o||y||a;let S;e[2]!==v||e[3]!==h?(S=h?v.formatMessage($i.stopStreamingLabel):v.formatMessage($i.sendPromptLabel),e[2]=v,e[3]=h,e[4]=S):S=e[4];const E=h?"stop-button":"send-button",k=h?"composer-secondary-button-color":"composer-submit-button-color",T=d?"h-7":"h-9",M=l&&!h?"w-fit px-3":d?"w-7":"w-9";let A;e[5]!==k||e[6]!==T||e[7]!==M?(A=z("composer-submit-btn",k,T,M),e[5]=k,e[6]=T,e[7]=M,e[8]=A):A=e[8];let I;e[9]!==x||e[10]!==h||e[11]!==l?(I=l&&!h?r.jsx("p",{className:"text-md font-medium",children:r.jsx(j,{id:"q2Rxh8",defaultMessage:"Start"})}):r.jsx(x,{className:"icon"}),e[9]=x,e[10]=h,e[11]=l,e[12]=I):I=e[12];let N;e[13]!==n||e[14]!==C||e[15]!==S||e[16]!==E||e[17]!==A||e[18]!==I?(N=r.jsx("button",{onClick:n,disabled:C,id:"composer-submit-button","aria-label":S,"data-testid":E,className:A,children:I}),e[13]=n,e[14]=C,e[15]=S,e[16]=E,e[17]=A,e[18]=I,e[19]=N):N=e[19];const L=N;let O;if(e[20]!==b||e[21]!==i||e[22]!==v){e:{if(!i){O=void 0;break e}const H=i==="file_upload_pending"?v.formatMessage($i.fileUploadPendingLabel):i==="rate_limit_hard_block"?v.formatMessage($i.rateLimitHardBlockLabel):i==="empty_text_content"?v.formatMessage($i.emptyTextContentLabel):i==="async_task_pending"?v.formatMessage($i.asyncTaskInProgressLabel):i==="no_source_selected_dr"?b.caterpillarNoneSelectedMessage:i==="text_content_too_long"?v.formatMessage($i.textContentTooLongLabel):void 0;if(H){O=H;break e}const G=($=zQ(i))==null?void 0:$.placeholder;if(G){O=v.formatMessage(G);break e}O=void 0}e[20]=b,e[21]=i,e[22]=v,e[23]=O}else O=e[23];const D=O;if(i&&o||y){let H;return e[24]!==L||e[25]!==D?(H=D?r.jsx(pt,{sideOffset:14,label:D,side:"bottom",children:L}):L,e[24]=L,e[25]=D,e[26]=H):H=e[26],H}return L}const $i=Se({stopStreamingLabel:{id:"+yfm/p",defaultMessage:"Stop streaming"},sendPromptLabel:{id:"xfIykB",defaultMessage:"Send prompt"},emptyTextContentLabel:{id:"LCVL2q",defaultMessage:"Message is empty"},textContentTooLongLabel:{id:"kDrqDJ",defaultMessage:"Message is too long"},fileUploadPendingLabel:{id:"Qv7jQN",defaultMessage:"File upload pending"},rateLimitHardBlockLabel:{id:"YhP4bh",defaultMessage:"Messages limit reached"},asyncTaskInProgressLabel:{id:"a959Km",defaultMessage:"Disabled"},bigBoxSubmitShortcutWindows:{id:"v8kTwt",defaultMessage:"Ctrl + Enter to send"},bigBoxSubmitShortcutMac:{id:"DC5el0",defaultMessage:" Enter to send"}}),WEe=R(()=>P(()=>import("./cfd8fb2o7f0lhyoi.js"),__vite__mapDeps([377,1])),{loading:t=>F(t)}),zEe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),qEe=({textdocId:t,userCreatedTextdoc:e,isCanvasOpen:n=!1,isFocused:s=!1})=>r.jsxs("div",{className:"group/file-tile relative",children:[r.jsx("button",{onClick:()=>{AL.removeTempTextdoc(t),qv()},className:"dark:border-token-main-surface-secondary absolute -start-1 -top-1 z-10 hidden rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white group-hover/file-tile:block dark:bg-white dark:text-black",children:r.jsx(zEe,{className:"icon-xs"})}),r.jsx(Dge,{textdocId:t,clientThreadId:void 0,name:e.title,tag:e.type,icon:r.jsx(WEe,{className:"icon"}),size:"small",isCanvasOpen:n,isFocused:s,isInlinePreview:!0,isInferring:e.status===io.INFERRING,onClick:()=>yi(t),children:r.jsx("div",{className:z("px-4 whitespace-pre",xp(e.type)&&"font-mono"),children:e.content})})]}),YEe=({textdocId:t,userCreatedTextdoc:e})=>{const n=vb(t),s=tm();return r.jsx(qEe,{textdocId:t,userCreatedTextdoc:e,isFocused:n,isCanvasOpen:s})},ZEe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)});function KEe({selectedApp:t}){const e=ne(),n=Se({removeItem:{id:"WorkWithAppsTile.removeItem",defaultMessage:"Remove"}});return r.jsxs("div",{className:"group border-token-border-default bg-token-main-surface-primary text-token-text-primary relative inline-block rounded-xl border p-2 text-sm",children:[r.jsxs("div",{className:"grid h-full grid-cols-[auto_1fr] items-center gap-2",children:[r.jsx("div",{className:"icon relative overflow-hidden",children:r.jsx(JEe,{app:t,className:"h-full w-full"})}),r.jsx("div",{className:"truncate font-semibold",children:XEe(t.name)})]}),r.jsx("button",{className:"dark:border-token-main-surface-secondary absolute end-1 top-1 translate-x-1/2 -translate-y-1/2 rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white transition-colors dark:bg-white dark:text-black",children:r.jsx(pt,{label:e.formatMessage(n.removeItem),side:"top",children:r.jsx(ZEe,{className:"icon-xs"})})})]})}const QEe=r.jsx("span",{className:"pe-2 text-2xl",children:r.jsx(j,{id:"WorkWithAppsTile.defaultIcon",defaultMessage:""})});function JEe({app:t,className:e}){const[n,s]=_.useState(null);return _.useEffect(()=>{if(!t||!t.icon){s(null);return}const o=new Blob([Bp(t.icon.data)],{type:t.icon.mimeType}),a=URL.createObjectURL(o);return s(a),()=>{URL.revokeObjectURL(a)}},[t]),n?r.jsx("img",{src:n,alt:"",className:e}):QEe}function XEe(t){if(!t)return"";if(t.length<=32)return t;const n=t.substring(0,20),s=t.substring(t.length-9);return"".concat(n,"...").concat(s)}function eTe(t){if(t.length!==1)return!1;const{file:e,fileId:n}=t[0],s=ci(e)&&!!(e!=null&&e.type)&&e.type.startsWith("image/"),o=n!=null&&!!e&&Nl(e.name);return s||o}function bet(t){"use forget";const e=W.c(34),{files:n,selectedApps:s,className:o,activeSystemHintType:a,disableEditButton:i,forceSmallView:l}=t;let c;e[0]!==s?(c=s===void 0?[]:s,e[0]=s,e[1]=c):c=e[1];const d=c,u=i===void 0?!1:i,f=l===void 0?!1:l,m=Eo(),g=wi(),p=Cy.useStore(),{updateSystemHint:h}=sa(),x=To(),v=An(mn);let y;e[2]!==n?(y=eTe(n),e[2]=n,e[3]=y):y=e[3];const b=y,C=!u&&b&&a!==Pe.PictureV2,S=l2e();let E;e[4]!==S?(E=S.map(nTe),e[4]=S,e[5]=E):E=e[5];let k;e[6]!==d?(k=d.map(tTe),e[6]=d,e[7]=k):k=e[7];let T;if(e[8]!==x||e[9]!==n||e[10]!==f||e[11]!==v||e[12]!==m||e[13]!==p||e[14]!==C||e[15]!==b||e[16]!==g||e[17]!==h){let A;e[19]!==x||e[20]!==f||e[21]!==v||e[22]!==m||e[23]!==p||e[24]!==C||e[25]!==b||e[26]!==g||e[27]!==h?(A=I=>{var N;return r.jsx(jR,{borderRadius:"2xl",width:m?"normal":"wide",onRemoveFileClick:()=>{rr.remove(g,I.tempId,"none"),p.removeFile(I.tempId)},useLargeImageThumbnailStyle:b&&!v&&!f,onImageEditClick:C?()=>{x&&h(Pe.PictureV2,{clientThreadId:x.id})}:void 0,file:I.file,fileId:(N=I.fileId)!=null?N:void 0,contextConnectorInfo:I.contextConnectorInfo,loadingPercentage:I.status===wz.Uploading?I.progress:void 0},I.tempId)},e[19]=x,e[20]=f,e[21]=v,e[22]=m,e[23]=p,e[24]=C,e[25]=b,e[26]=g,e[27]=h,e[28]=A):A=e[28],T=n.map(A),e[8]=x,e[9]=n,e[10]=f,e[11]=v,e[12]=m,e[13]=p,e[14]=C,e[15]=b,e[16]=g,e[17]=h,e[18]=T}else T=e[18];let M;return e[29]!==o||e[30]!==E||e[31]!==k||e[32]!==T?(M=r.jsxs("div",{className:o,children:[E,k,T]}),e[29]=o,e[30]=E,e[31]=k,e[32]=T,e[33]=M):M=e[33],M}function tTe(t){return r.jsx(KEe,{selectedApp:t},t.id)}function nTe(t){return r.jsx(YEe,{textdocId:t.tempTextdocId,userCreatedTextdoc:t},t.tempTextdocId)}const sTe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),PB=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)}),Cet=t=>{"use forget";const e=W.c(4),{replyRegions:n}=t;let s;e[0]!==n?(s=n.map(iTe),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=r.jsx("div",{className:"divide-token-border-default bg-token-main-surface-primary mx-1 mt-1 flex cursor-auto flex-col divide-y overflow-hidden rounded-t-[24px] rounded-b-lg",children:s}),e[2]=s,e[3]=o):o=e[3],o};function oTe(t){"use forget";const e=W.c(8),{value:n,hideQuotes:s,onRemoveRegion:o}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(r4,{children:r.jsx(PB,{className:"icon"})}),e[0]=a):a=e[0];const i=s?n:"".concat(n,"");let l;e[1]!==i?(l=r.jsx(i4,{children:i}),e[1]=i,e[2]=l):l=e[2];let c;e[3]!==o?(c=r.jsx(o4,{onClick:o}),e[3]=o,e[4]=c):c=e[4];let d;return e[5]!==l||e[6]!==c?(d=r.jsxs(a4,{className:"text-token-text-secondary",children:[a,l,c]}),e[5]=l,e[6]=c,e[7]=d):d=e[7],d}function aTe(t){"use forget";const e=W.c(8),{value:n,onRemoveRegion:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(r4,{children:r.jsx(PB,{className:"icon"})}),e[0]=o):o=e[0];let a;e[1]!==n?(a=r.jsx(i4,{className:"font-semibold",children:n}),e[1]=n,e[2]=a):a=e[2];let i;e[3]!==s?(i=r.jsx(o4,{onClick:s}),e[3]=s,e[4]=i):i=e[4];let l;return e[5]!==a||e[6]!==i?(l=r.jsxs(a4,{className:"text-blue-400",children:[o,a,i]}),e[5]=a,e[6]=i,e[7]=l):l=e[7],l}function rTe(t){"use forget";const e=W.c(10),{value:n,icon:s,onRemoveRegion:o}=t;let a;e[0]!==s?(a=r.jsx(r4,{className:"mt-0",children:s}),e[0]=s,e[1]=a):a=e[1];let i;e[2]!==n?(i=r.jsx(i4,{className:"text-token-text-primary font-semibold",children:n}),e[2]=n,e[3]=i):i=e[3];let l;e[4]!==o?(l=r.jsx(o4,{onClick:o}),e[4]=o,e[5]=l):l=e[5];let c;return e[6]!==a||e[7]!==i||e[8]!==l?(c=r.jsxs(a4,{children:[a,i,l]}),e[6]=a,e[7]=i,e[8]=l,e[9]=c):c=e[9],c}function o4(t){"use forget";const e=W.c(6),{onClick:n}=t,s=ne();let o;e[0]!==s?(o=s.formatMessage({id:"PlVqJ1",defaultMessage:"Remove"}),e[0]=s,e[1]=o):o=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(sTe,{className:"icon"}),e[2]=a):a=e[2];let i;return e[3]!==n||e[4]!==o?(i=r.jsx("button",{onClick:n,type:"button",className:"text-token-text-secondary flex h-9 w-9 shrink-0 items-center justify-center","aria-label":o,children:a}),e[3]=n,e[4]=o,e[5]=i):i=e[5],i}var gE;const a4=ft.div(gE||(gE=ct(["bg-token-main-surface-secondary dark:bg-token-main-surface-tertiary flex items-start py-1 gap-1.5 px-1.5 text-sm"])));var pE;const r4=ft.span(pE||(pE=ct(["shrink-0 w-9 h-9 flex justify-center items-center"])));var hE;const i4=ft.span(hE||(hE=ct(["flex-1 line-clamp-3 py-2"])));function iTe(t,e){switch(t.type){case"text":return r.jsx(oTe,{value:t.value,hideQuotes:t.hideQuotes,onRemoveRegion:t.onRemoveRegion},e);case"object":return r.jsx(aTe,{value:t.value,onRemoveRegion:t.onRemoveRegion},e);case"mention":case"system_hint":return r.jsx(rTe,{value:t.value,icon:t.icon,onRemoveRegion:t.onRemoveRegion},e)}return null}const lTe="_fallbackTextarea_1dsxi_2",D7={"prosemirror-parent":"_prosemirror-parent_1dsxi_2",fallbackTextarea:lTe},cTe=Se({informationSeekingAskLatestNews:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askLatestNews",defaultMessage:"Ask for the latest news"},informationSeekingAskTodaysWeather:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askTodaysWeather",defaultMessage:"Ask about today's weather"},informationSeekingAskFunTrivia:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askFunTrivia",defaultMessage:"Ask for fun trivia"},informationSeekingAskFamousQuotes:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askFamousQuotes",defaultMessage:"Ask for famous quotes"},informationSeekingAskShortExplainer:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askShortExplainer",defaultMessage:"Ask for a short explainer"},informationSeekingAskMovieSuggestions:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askMovieSuggestions",defaultMessage:"Ask for movie suggestions"},informationSeekingAskBookSummaries:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askBookSummaries",defaultMessage:"Ask for book summaries"},informationSeekingAskTravelRecommendations:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askTravelRecommendations",defaultMessage:"Ask for travel recommendations"},informationSeekingAskPopularLocalRestaurants:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askPopularLocalRestaurants",defaultMessage:"Ask about popular local restaurants"},informationSeekingAskLatestGameScore:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askLatestGameScore",defaultMessage:"Ask for the latest game score"},informationSeekingAskRecipeIdeas:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askRecipeIdeas",defaultMessage:"Ask for recipe ideas"},informationSeekingAskProductReviews:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askProductReviews",defaultMessage:"Ask for product reviews"},informationSeekingAskTranslationHelp:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askTranslationHelp",defaultMessage:"Ask for translation help"},howToAskHelpAchievingGoal:{id:"PromptTextarea.rotatingPlaceholders.howTo.askHelpAchievingGoal",defaultMessage:"Ask for help achieving a goal"},howToAskFixSomething:{id:"PromptTextarea.rotatingPlaceholders.howTo.askFixSomething",defaultMessage:"Ask how to fix something"},howToAskStayOrganized:{id:"PromptTextarea.rotatingPlaceholders.howTo.askStayOrganized",defaultMessage:"Ask how to stay organized"},howToAskBudgetBetter:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBudgetBetter",defaultMessage:"Ask how to budget better"},howToAskImproveFocus:{id:"PromptTextarea.rotatingPlaceholders.howTo.askImproveFocus",defaultMessage:"Ask how to improve your focus"},howToAskBuildHabit:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBuildHabit",defaultMessage:"Ask how to build a habit"},howToAskManageStressTips:{id:"PromptTextarea.rotatingPlaceholders.howTo.askManageStressTips",defaultMessage:"Ask for tips to manage stress"},howToAskBakeBread:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBakeBread",defaultMessage:"Ask how to bake bread"},howToAskBoostCreativityTips:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBoostCreativityTips",defaultMessage:"Ask for tips to boost creativity"},howToAskNegotiateSalary:{id:"PromptTextarea.rotatingPlaceholders.howTo.askNegotiateSalary",defaultMessage:"Ask how to negotiate a salary"},howToAskTripPlanningTips:{id:"PromptTextarea.rotatingPlaceholders.howTo.askTripPlanningTips",defaultMessage:"Ask for trip planning tips"},howToAskWriteResume:{id:"PromptTextarea.rotatingPlaceholders.howTo.askWriteResume",defaultMessage:"Ask how to write a resume"},howToAskMakeCoffee:{id:"PromptTextarea.rotatingPlaceholders.howTo.askMakeCoffee",defaultMessage:"Ask how to make coffee"},howToAskUseExcel:{id:"PromptTextarea.rotatingPlaceholders.howTo.askUseExcel",defaultMessage:"Ask how to use Excel"},howToAskRefreshDecor:{id:"PromptTextarea.rotatingPlaceholders.howTo.askRefreshDecor",defaultMessage:"Ask how to refresh your decor"},howToAskManageTime:{id:"PromptTextarea.rotatingPlaceholders.howTo.askManageTime",defaultMessage:"Ask how to manage time"},howToAskNetworkEffectively:{id:"PromptTextarea.rotatingPlaceholders.howTo.askNetworkEffectively",defaultMessage:"Ask how to network effectively"},howToAskStayMotivated:{id:"PromptTextarea.rotatingPlaceholders.howTo.askStayMotivated",defaultMessage:"Ask how to stay motivated"},educationAskExplainConcept:{id:"PromptTextarea.rotatingPlaceholders.education.askExplainConcept",defaultMessage:"Ask to explain a concept"},educationAskStudyTips:{id:"PromptTextarea.rotatingPlaceholders.education.askStudyTips",defaultMessage:"Ask for study tips"},educationAskMathHelp:{id:"PromptTextarea.rotatingPlaceholders.education.askMathHelp",defaultMessage:"Ask for help with a math problem"},educationAskTopicOverview:{id:"PromptTextarea.rotatingPlaceholders.education.askTopicOverview",defaultMessage:"Ask for a topic overview"},educationAskHistoryPeriod:{id:"PromptTextarea.rotatingPlaceholders.education.askHistoryPeriod",defaultMessage:"Ask about a period in history"},educationAskTestPrepHelp:{id:"PromptTextarea.rotatingPlaceholders.education.askTestPrepHelp",defaultMessage:"Ask for test prep help"},educationAskLearnLanguage:{id:"PromptTextarea.rotatingPlaceholders.education.askLearnLanguage",defaultMessage:"Ask for help learning a language"},educationAskSimplifyIdeas:{id:"PromptTextarea.rotatingPlaceholders.education.askSimplifyIdeas",defaultMessage:"Ask for help simplifying ideas"},educationAskMemoryTricks:{id:"PromptTextarea.rotatingPlaceholders.education.askMemoryTricks",defaultMessage:"Ask for tricks to help memory"},educationAskStructureEssay:{id:"PromptTextarea.rotatingPlaceholders.education.askStructureEssay",defaultMessage:"Ask how to structure an essay"},educationAskHomeworkHelp:{id:"PromptTextarea.rotatingPlaceholders.education.askHomeworkHelp",defaultMessage:"Ask for homework help"},educationAskCustomizedQuiz:{id:"PromptTextarea.rotatingPlaceholders.education.askCustomizedQuiz",defaultMessage:"Ask for a customized quiz"},educationAskGrammarCheck:{id:"PromptTextarea.rotatingPlaceholders.education.askGrammarCheck",defaultMessage:"Ask for a grammar check"},educationAskCodingBasics:{id:"PromptTextarea.rotatingPlaceholders.education.askCodingBasics",defaultMessage:"Ask for help with coding basics"},writingAskDraftMessages:{id:"PromptTextarea.rotatingPlaceholders.writing.askDraftMessages",defaultMessage:"Ask to draft messages"},writingAskDraftText:{id:"PromptTextarea.rotatingPlaceholders.writing.askDraftText",defaultMessage:"Ask to draft a text"},writingAskDraftEmail:{id:"PromptTextarea.rotatingPlaceholders.writing.askDraftEmail",defaultMessage:"Ask to draft an email"},writingAskToneSuggestions:{id:"PromptTextarea.rotatingPlaceholders.writing.askToneSuggestions",defaultMessage:"Ask for tone suggestions"},writingAskSmallTalkTips:{id:"PromptTextarea.rotatingPlaceholders.writing.askSmallTalkTips",defaultMessage:"Ask for small talk tips"},writingAskPersuasiveTips:{id:"PromptTextarea.rotatingPlaceholders.writing.askPersuasiveTips",defaultMessage:"Ask for persuasive writing tips"},writingAskBlogIdeas:{id:"PromptTextarea.rotatingPlaceholders.writing.askBlogIdeas",defaultMessage:"Ask for blog ideas"},writingAskSocialMediaCaptions:{id:"PromptTextarea.rotatingPlaceholders.writing.askSocialMediaCaptions",defaultMessage:"Ask for social media captions"},writingAskStorytellingAdvice:{id:"PromptTextarea.rotatingPlaceholders.writing.askStorytellingAdvice",defaultMessage:"Ask for storytelling advice"},writingAskOutlineSpeech:{id:"PromptTextarea.rotatingPlaceholders.writing.askOutlineSpeech",defaultMessage:"Ask to outline a speech"},writingAskCreativePrompts:{id:"PromptTextarea.rotatingPlaceholders.writing.askCreativePrompts",defaultMessage:"Ask for creative prompts"},writingAskSocialMediaCopy:{id:"PromptTextarea.rotatingPlaceholders.writing.askSocialMediaCopy",defaultMessage:"Ask for social media copy"},writingAskHeadlineIdeas:{id:"PromptTextarea.rotatingPlaceholders.writing.askHeadlineIdeas",defaultMessage:"Ask for headline ideas"},writingAskSummarizeText:{id:"PromptTextarea.rotatingPlaceholders.writing.askSummarizeText",defaultMessage:"Ask to summarize text"},writingAskPresentationTips:{id:"PromptTextarea.rotatingPlaceholders.writing.askPresentationTips",defaultMessage:"Ask for presentation tips"},writingAskFeedbackPhrasing:{id:"PromptTextarea.rotatingPlaceholders.writing.askFeedbackPhrasing",defaultMessage:"Ask for feedback phrasing"},healthAskDailyMotivation:{id:"PromptTextarea.rotatingPlaceholders.health.askDailyMotivation",defaultMessage:"Ask for daily motivation"},healthAskHealthyHabits:{id:"PromptTextarea.rotatingPlaceholders.health.askHealthyHabits",defaultMessage:"Ask for simple healthy habits"},healthAskMindfulnessTips:{id:"PromptTextarea.rotatingPlaceholders.health.askMindfulnessTips",defaultMessage:"Ask for mindfulness tips"},healthAskSleepBetter:{id:"PromptTextarea.rotatingPlaceholders.health.askSleepBetter",defaultMessage:"Ask how to sleep better"},healthAskProteinRecipes:{id:"PromptTextarea.rotatingPlaceholders.health.askProteinRecipes",defaultMessage:"Ask for protein-packed recipes"},healthAskTwentyMinuteWorkouts:{id:"PromptTextarea.rotatingPlaceholders.health.askTwentyMinuteWorkouts",defaultMessage:"Ask for 20-minute workout ideas"},healthAskMeditationTechniques:{id:"PromptTextarea.rotatingPlaceholders.health.askMeditationTechniques",defaultMessage:"Ask for meditation techniques"},healthAskSelfCareIdeas:{id:"PromptTextarea.rotatingPlaceholders.health.askSelfCareIdeas",defaultMessage:"Ask for simple self-care ideas"},healthAskBoostEnergy:{id:"PromptTextarea.rotatingPlaceholders.health.askBoostEnergy",defaultMessage:"Ask how to boost your energy"},healthAskHydrationTips:{id:"PromptTextarea.rotatingPlaceholders.health.askHydrationTips",defaultMessage:"Ask for hydration tips"},healthAskStretchingRoutines:{id:"PromptTextarea.rotatingPlaceholders.health.askStretchingRoutines",defaultMessage:"Ask for stretching routines"},healthAskNutritionInfo:{id:"PromptTextarea.rotatingPlaceholders.health.askNutritionInfo",defaultMessage:"Ask for nutritional info for a food"},healthAskStressReliefTips:{id:"PromptTextarea.rotatingPlaceholders.health.askStressReliefTips",defaultMessage:"Ask for stress-relief tips"},healthAskDeskExercises:{id:"PromptTextarea.rotatingPlaceholders.health.askDeskExercises",defaultMessage:"Ask for exercises to do at your desk"},healthAskProductivityHacks:{id:"PromptTextarea.rotatingPlaceholders.health.askProductivityHacks",defaultMessage:"Ask for productivity hacks"}}),Hr=[{id:"informationSeeking",messageKeys:["informationSeekingAskLatestNews","informationSeekingAskTodaysWeather","informationSeekingAskFunTrivia","informationSeekingAskFamousQuotes","informationSeekingAskShortExplainer","informationSeekingAskMovieSuggestions","informationSeekingAskBookSummaries","informationSeekingAskTravelRecommendations","informationSeekingAskPopularLocalRestaurants","informationSeekingAskLatestGameScore","informationSeekingAskRecipeIdeas","informationSeekingAskProductReviews","informationSeekingAskTranslationHelp"]},{id:"howToGuidance",messageKeys:["howToAskHelpAchievingGoal","howToAskFixSomething","howToAskStayOrganized","howToAskBudgetBetter","howToAskImproveFocus","howToAskBuildHabit","howToAskManageStressTips","howToAskBakeBread","howToAskBoostCreativityTips","howToAskNegotiateSalary","howToAskTripPlanningTips","howToAskWriteResume","howToAskMakeCoffee","howToAskUseExcel","howToAskRefreshDecor","howToAskManageTime","howToAskNetworkEffectively","howToAskStayMotivated"]},{id:"educationLearning",messageKeys:["educationAskExplainConcept","educationAskStudyTips","educationAskMathHelp","educationAskTopicOverview","educationAskHistoryPeriod","educationAskTestPrepHelp","educationAskLearnLanguage","educationAskSimplifyIdeas","educationAskMemoryTricks","educationAskStructureEssay","educationAskHomeworkHelp","educationAskCustomizedQuiz","educationAskGrammarCheck","educationAskCodingBasics"]},{id:"writingCommunication",messageKeys:["writingAskDraftMessages","writingAskDraftText","writingAskDraftEmail","writingAskToneSuggestions","writingAskSmallTalkTips","writingAskPersuasiveTips","writingAskBlogIdeas","writingAskSocialMediaCaptions","writingAskStorytellingAdvice","writingAskOutlineSpeech","writingAskCreativePrompts","writingAskSocialMediaCopy","writingAskHeadlineIdeas","writingAskSummarizeText","writingAskPresentationTips","writingAskFeedbackPhrasing"]},{id:"healthWellness",messageKeys:["healthAskDailyMotivation","healthAskHealthyHabits","healthAskMindfulnessTips","healthAskSleepBetter","healthAskProteinRecipes","healthAskTwentyMinuteWorkouts","healthAskMeditationTechniques","healthAskSelfCareIdeas","healthAskBoostEnergy","healthAskHydrationTips","healthAskStretchingRoutines","healthAskNutritionInfo","healthAskStressReliefTips","healthAskDeskExercises","healthAskProductivityHacks"]}];function dTe(t,e,n,s){return t.current&&(clearInterval(t.current),t.current=null),_.startTransition(()=>{n(),t.current=window.setInterval(()=>{_.startTransition(()=>{s()})},e)}),()=>{t.current&&(clearInterval(t.current),t.current=null)}}const uTe={"composer-slide":"_composer-slide_rfswj_125","composer-placeholder-rotate":"_composer-placeholder-rotate_rfswj_135","pinned-widget":"_pinned-widget_rfswj_196","becoming-inline":"_becoming-inline_rfswj_240","becoming-pinned":"_becoming-pinned_rfswj_261","fullscreen-widget-composer-transition":"_fullscreen-widget-composer-transition_rfswj_280","fullscreen-popover-thread-opening-transition":"_fullscreen-popover-thread-opening-transition_rfswj_294","fullscreen-popover-thread-closing-transition":"_fullscreen-popover-thread-closing-transition_rfswj_295"},fTe=3500;function s2(){return Hr.length===0?{nextCategoryIndex:0}:{nextCategoryIndex:Hr.length>1?1:0}}const wet=({composerController:t,placeholder:e,disableAutoFocus:n=!1,textareaMaxHeightClassName:s="max-h-[max(30svh,5rem)]",fontSize:o="base",enableRotatingPlaceholders:a=!1})=>{"use no forget";const i=_.useRef(null),l=_.useRef(null),c=_.useRef(!1),d=_.useRef(null),u=_.useRef(s2()),f=V(),m=ne(),g=re(()=>q8()),p=$8(f),h=re(p.composer.autofocusDisabled$),x=_.useRef(n||h),v=T=>Math.floor(Math.random()*T),y=_.useCallback(T=>{if(T.messageKeys.length===0)return null;const M=v(T.messageKeys.length),A=T.messageKeys[M];return{messageKey:A,placeholder:m.formatMessage(cTe[A])}},[m]),b=_.useMemo(()=>{var A;if(!a)return e;const T=Hr[0],M=T!=null?y(T):null;return(A=M==null?void 0:M.placeholder)!=null?A:e},[a,y,e]),[C,S]=_.useState(()=>a?b:e),E=_.useCallback((T,{withTransition:M=!0}={})=>{const A=()=>{S(T)},I=typeof document<"u"&&document.querySelector('[data-modal-layer="overlay"]')!==null;if(!M||g||I){A();return}FO({className:uTe["composer-placeholder-rotate"],update:A})},[g]),k=_.useCallback(()=>{var N;if(Hr.length===0)return;const T=u.current,M=(N=T.nextCategoryIndex)!=null?N:0,A=Hr[M];if(T.nextCategoryIndex=(M+1)%Hr.length,!A)return;const I=y(A);I&&(E(I.placeholder),B.logEventWithStatsig("chatgpt_web_prompttextarea_placeholder_rotated","chatgpt_web_prompttextarea_placeholder_rotated",{category:A.id,message_key:I.messageKey}),Ie.count(je.DEFAULT,"chatgpt_web_prompttextarea_placeholder_rotated",{category:A.id,message_key:I.messageKey}))},[E,y]);return Jn(()=>{if(c.current||!i.current)return;const T=Pt(t);c.current=!0;const M=l.current;if(M!=null){const{value:A,selectionStart:I,selectionEnd:N}=M;T.dispatch(T.state.tr.insertText(A)),T.dispatch(T.state.tr.setSelection(z8.create(T.state.doc,I+1,N+1))),M.style.display="none",M.value=""}i.current.appendChild(T.dom),T.dom.id=up,T.dom.dataset.virtualkeyboard="true",ZQ(T.dom),x.current||no(Pt(t))},[t]),_.useEffect(()=>{if(!a||Hr.length===0)return;u.current=s2();const T=Hr[0];if(T){const M=y(T);M&&E(M.placeholder,{withTransition:!1})}return dTe(d,fTe,()=>{},k)},[a,E,y,k]),_.useEffect(()=>{a||S(e)},[e,a]),_.useEffect(()=>{a||(u.current=s2())},[a]),_.useEffect(()=>{const T=i.current;if(!T)return;const M=Pt(t);return Hl({target:M.dom,axis:"height",onChange:({height:A,previousHeight:I})=>{if(bn(()=>J4(t))&&I!=null&&A>I)return;const N=document.createElement("span");N.textContent="",N.inert=!0;const L=getComputedStyle(M.dom);for(const D of["font-size","line-height","padding-top","padding-bottom"])N.style.setProperty(D,L.getPropertyValue(D));N.style.position="absolute",T.appendChild(N);const O=N.offsetHeight;T.removeChild(N),J4.set(t,A>O)}})},[t]),_.useEffect(()=>{kz(Pt(t),C)},[C,t]),_.useEffect(()=>{Fe.addFirstTiming("chatgpt.web.chatPage.prompttextarea.modern.mounted",{serialTimingGroup:"pageLoad"})},[]),r.jsxs("div",{ref:i,onKeyDown:()=>{nf.postTask(()=>{Bs.prefetch()},{priority:"background"})},className:z([D7["prosemirror-parent"],"text-token-text-primary",s,"max-h-52","flex-1 overflow-auto [scrollbar-width:thin]",W8()?"firefox":"default-browser"],"vertical-scroll-fade-mask"),"data-size":o!=="base"?o:void 0,children:[r.jsx("textarea",{className:D7.fallbackTextarea,name:up,autoFocus:!x.current,placeholder:C,ref:l,"data-virtualkeyboard":!0}),r.jsx(Rge,{scriptSrc:"window.__oai_logHTML?window.__oai_logHTML():window.__oai_SSR_HTML=window.__oai_SSR_HTML||Date.now();requestAnimationFrame((function(){window.__oai_logTTI?window.__oai_logTTI():window.__oai_SSR_TTI=window.__oai_SSR_TTI||Date.now()}))"})]})},mTe=4,RB=.0025;function ket(n){var s=n,{composerController:t}=s,e=we(s,["composerController"]);const{waveformData$:o}=K5(t),a=re(o);return a?r.jsx(gTe,w({waveform:a},e)):null}function gTe({waveform:t,progressPercentage:e,barWidth:n=mTe,normalize:s=!1,scaleFactor:o=10,initialValue:a=RB,silentColor:i,activeColor:l,className:c}){const d=_.useRef(null),u=Xo(),f=i!=null?i:u?"#000":"#CCC",m=l!=null?l:u?"#CCC":"#000",[g,p]=_.useState(300);_.useEffect(()=>{d.current&&p(d.current.clientWidth)},[]);const{soundBars:h,firstAudioBarIndex:x}=_.useMemo(()=>{const v=t.length,y=Math.floor(g/n),b=v/y;let C=-1;const S=[];for(let k=0;k<y;k++){const T=Math.floor(k*b),M=Math.min(Math.floor((k+1)*b),v);if(T>=M){S.push(0);continue}let A=0;for(let N=T;N<M;N++)A+=Math.abs(t[N]);const I=A/(M-T);C===-1&&I>a&&(C=k),S.push(I)}let E=S;if(s){const T=1/(Math.max(...E)||1);E=E.map(M=>{const A=M*T;return Math.max(Math.min(A,.92),.08)})}return{soundBars:E,firstAudioBarIndex:C}},[t,g,n,s,a]);return _.useEffect(()=>{const v=d.current,y=v==null?void 0:v.getContext("2d");if(!v||!y)return;const b=window.devicePixelRatio,{clientHeight:C,clientWidth:S}=v;v.width=S*b,v.height=C*b,y.clearRect(0,0,v.width,v.height);const E=C*b*.5;y.translate(0,E);const k=v.width/h.length;for(let T=0;T<h.length;T++){let M=h[T];s||(M*=o);const A=M*E,I=T*k;if(typeof e=="number"){const L=(h.length-T)/h.length<e;y.fillStyle=L?m:f}else{const N=x===-1||T<x?f:m;y.fillStyle=N}y.fillRect(I,-A,k/2,A*2)}},[h,g,f,m,s,o,x,e]),r.jsx("canvas",{ref:d,className:z("h-8 w-full",c)})}const LB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M15.7806 10.1963C16.1326 10.3011 16.3336 10.6714 16.2288 11.0234L16.1487 11.2725C15.3429 13.6262 13.2236 15.3697 10.6644 15.6299L10.6653 16.835H12.0833L12.2171 16.8486C12.5202 16.9106 12.7484 17.1786 12.7484 17.5C12.7484 17.8214 12.5202 18.0894 12.2171 18.1514L12.0833 18.165H7.91632C7.5492 18.1649 7.25128 17.8672 7.25128 17.5C7.25128 17.1328 7.5492 16.8351 7.91632 16.835H9.33527L9.33429 15.6299C6.775 15.3697 4.6558 13.6262 3.84992 11.2725L3.76984 11.0234L3.74445 10.8906C3.71751 10.5825 3.91011 10.2879 4.21808 10.1963C4.52615 10.1047 4.84769 10.2466 4.99347 10.5195L5.04523 10.6436L5.10871 10.8418C5.8047 12.8745 7.73211 14.335 9.99933 14.335C12.3396 14.3349 14.3179 12.7789 14.9534 10.6436L15.0052 10.5195C15.151 10.2466 15.4725 10.1046 15.7806 10.1963ZM12.2513 5.41699C12.2513 4.17354 11.2437 3.16521 10.0003 3.16504C8.75675 3.16504 7.74835 4.17343 7.74835 5.41699V9.16699C7.74853 10.4104 8.75685 11.418 10.0003 11.418C11.2436 11.4178 12.2511 10.4103 12.2513 9.16699V5.41699ZM13.5814 9.16699C13.5812 11.1448 11.9781 12.7479 10.0003 12.748C8.02232 12.748 6.41845 11.1449 6.41828 9.16699V5.41699C6.41828 3.43889 8.02221 1.83496 10.0003 1.83496C11.9783 1.83514 13.5814 3.439 13.5814 5.41699V9.16699Z"})),pTe=Object.freeze(Object.defineProperty({__proto__:null,default:LB},Symbol.toStringTag,{value:"Module"})),Eet=300,Tet=async(t=1)=>{let e=0,n;return new Promise(s=>{const o=a=>(n||(n=a),a-n<t*1e3?(e+=1,requestAnimationFrame(o)):s(Math.floor(e/t)));requestAnimationFrame(o)})},Met=t=>{const e=_.useRef(t),n=_.useCallback(s=>{(e.current[0]!==s.width||e.current[1]!==s.height)&&(e.current=[s.width,s.height])},[]);return{canvasSizeRef:e,handleCanvasSizeUpdate:n}},Aet=t=>{var i,l,c,d,u,f,m,g,p;const{voiceSessionId:e,server:n,voiceMode:s,audioInputDevice:o,voiceStatus:a}=t;return{voice_session_id:e!=null?e:"(none)",server_messages:n.messages.map(h=>h.type).join(","),rate_limit_message:(l=JSON.stringify((i=n.usage)==null?void 0:i.rate_limit_message))!=null?l:"(none)",audio_s:(d=(c=n.usage)==null?void 0:c.audio_s)!=null?d:"(none)",tool_update:(f=(u=n.toolUpdate)==null?void 0:u.type)!=null?f:"(none)",voice_connection_quality:(m=n.voiceConnectionQuality)!=null?m:"(none)",voice_mode:s!=null?s:"(none)",audio_input_device:(g=o==null?void 0:o.label)!=null?g:"(none)",voice_status:(p=JSON.stringify(a))!=null?p:"(none)"}};function OB(t){return t instanceof DOMException&&t.name==="NotAllowedError"?(Ut.permissions.denied({message:t.message}),!0):!1}const Yu=class Yu{constructor(){J(this,"userMediaPromiseMap",new Map)}static getLocalDevices(e,n=!0){return Yu.instance.getDevices(e,n)}async getDevices(e,n=!0){if(this.userMediaPromiseMap.size>0)try{e?await this.userMediaPromiseMap.get(e):await Promise.all(Array.from(this.userMediaPromiseMap.values()))}catch(o){console.warn("error waiting for media permissions",o)}let s=await navigator.mediaDevices.enumerateDevices();if(n&&!(Y8()&&this.hasDeviceInUse(e))&&(s.filter(a=>a.kind===e).length===0||s.some(a=>{const i=a.label==="",l=e?a.kind===e:!0;return i&&l}))){const a={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},i=await navigator.mediaDevices.getUserMedia(a);s=await navigator.mediaDevices.enumerateDevices(),i.getTracks().forEach(l=>{l.stop()})}return e&&(s=s.filter(o=>o.kind===e)),s}hasDeviceInUse(e){return e?this.userMediaPromiseMap.has(e):this.userMediaPromiseMap.size>0}};J(Yu,"instance",new Yu);let Ty=Yu;async function hTe(t){let e;try{e=await Ty.getLocalDevices(t)}catch(o){OB(o),vi.debug("Error fetching local devices",o);return}const n={};for(const o of e)o.kind===t&&(n[o.groupId]||(n[o.groupId]=[]),n[o.groupId].push(o));for(const o in n){const a=n[o];if(a.length>1&&a.find(l=>l.deviceId==="default")){const l=a.find(c=>c.deviceId!=="default");if(l)return l}}let s;for(const o of e)if(o.kind===t){if(o.deviceId==="default")return o;s||(s=o)}return s}async function _Te(){var a,i;const e=(await navigator.mediaDevices.enumerateDevices()).filter(l=>l.kind==="audioinput"),n=e.find(l=>l.deviceId==="default"),s=e.find(l=>l.label.toLowerCase().includes("iphone")),o=e.find(l=>{const c=!!(s&&s.label!==l.label),d=!!(n&&l.deviceId===n.deviceId);return c||d});return(i=o==null?void 0:o.deviceId)!=null?i:(a=e[0])==null?void 0:a.deviceId}const xTe=()=>{const t=Z8()&&qo;return async()=>{if(t)return await Ez();try{const e=await _Te(),n=await navigator.mediaDevices.getUserMedia({audio:e!==""?{deviceId:{exact:e}}:!0,video:!1}),s=await navigator.mediaDevices.enumerateDevices();return n.getTracks().forEach(a=>a.stop()),s.some(a=>a.kind==="audioinput"&&a.label!=="")}catch(e){if(!OB(e))throw e;return!1}}};function yTe(t){const e=_.useRef(void 0);_.useEffect(()=>{if(!(Z8()&&qo||!navigator.permissions))return navigator.permissions.query({name:"microphone"}).then(s=>{e.current=s,s.onchange=()=>{t(s.state==="granted")}}).catch(()=>{}),()=>{e.current&&(e.current.onchange=null)}},[t])}const vTe=()=>{const[t,e]=_.useState(!1),[n,s]=_.useState(!1),[o,a]=_.useState(),i=_.useCallback(u=>{e(u)},[]);yTe(i);const l=xTe(),c=_.useCallback(async()=>n?t:l().then(u=>(e(u),u)).finally(()=>{s(!0)}),[l,n,t]);return _.useEffect(()=>{t&&bTe().then(u=>{a(u)})},[t]),{permissionsRequested:n,requestMicrophonePermissions:c,userDeclinedMicrophonePermissions:n&&!t,microphoneAvailable:t,microphoneLabel:o}},bTe=async()=>{var t;try{const e=await hTe("audioinput");return(t=e==null?void 0:e.label)!=null?t:""}catch(e){const n=av();return Fe.addError("Failed to fetch default media device",{error:e,protocol:n}),"Error accessing microphone devices"}},CTe={status:"idle"},STe=Ft()(Af(Mn(()=>w({},CTe)))),DB=z("flex items-center justify-center rounded-full"),FB=z(DB,"border border-token-border-default p-1 text-token-text-secondary","focus-visible:outline-black dark:text-token-text-secondary dark:focus-visible:outline-white","bg-transparent dark:bg-transparent"),BB=z("hover:bg-token-main-surface-tertiary"),UB=z(DB,"bg-transparent text-token-text-secondary transition-colors","hover:bg-token-main-surface-tertiary focus-visible:outline-black","disabled:text-[#f4f4f4] disabled:opacity-30","dark:bg-transparent dark:text-token-text-secondary dark:hover:bg-token-main-surface-tertiary dark:focus-visible:outline-white","h-8 w-8"),wTe=t=>{const{requestMicrophonePermissions:e}=vTe(),s=ne().formatMessage({id:"vONrv3",defaultMessage:"Enable mic access to dictate"}),o=$t();return async()=>{if(B.logEvent("Whisper on Web/Windows: Clicked to start dictation"),qe.logEvent("chatgpt_composer_whisper_button_clicked_start"),!await e())return o.danger(s,{toastId:"whisper_icon_button_click_failure"});t()}},kTe=c=>{var d=c,{size:t="medium",disabled:e,onExit:n,buttonClassName:s,invertColor:o,disableTooltip:a=!1,visualTreatment:i}=d,l=we(d,["size","disabled","onExit","buttonClassName","invertColor","disableTooltip","visualTreatment"]);const u=ne(),f=STe(h=>h.status),m=wTe(n);f==="error"&&(B.logEvent("Whisper on Web/Windows: Error"),qe.logEvent("chatgpt_composer_whisper_button_error"));const g=r.jsx(LB,{"aria-label":"",className:"icon",fontSize:"inherit"}),p=An(mn);return r.jsx(ETe,{disabled:a,children:i==="composer-btn"||i==="codex"?r.jsx("button",U(w({},l),{"aria-label":u.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),type:"button",onClick:m,disabled:e,className:z("composer-btn",p&&"composer-btn--desktopSidebar"),children:g})):r.jsx(ye,U(w({},l),{"aria-label":u.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),size:t,type:"button",onClick:m,disabled:e,className:z(o?UB:FB,"[view-transition-name:var(--vt-composer-whisper-button)]",e?"opacity-30":!o&&BB,"dark:hover:bg-transparent dark:hover:opacity-100",s),children:g}))})};function ETe({children:t,disabled:e=!1}){const n=ne();return r.jsx(pt,{open:e?!1:void 0,label:n.formatMessage({id:"abw2XH",defaultMessage:"Dictate"}),side:"bottom",onOpenChange:s=>{s&&(B.logEvent("Whisper on Web/Windows: Button hover to see tooltip"),qe.logEvent("chatgpt_composer_whisper_button_hovered"))},children:t})}const F7=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),B7=R(()=>P(()=>import("./kaw18xu9jo85v1g9.js"),__vite__mapDeps([26,1])),{loading:t=>F(t)});function TTe(t){const e=V();return tt(e)?r.jsx(kTe,w({},t)):null}function MTe(t){return t.visualTreatment==="codex"?r.jsxs("div",{className:"flex gap-x-1.5",children:[r.jsx(ye,{type:"button",color:"ghost",size:"small",icon:F7,children:r.jsx(j,{id:"wham.whisperModeControlsLoading.cancel",defaultMessage:"Cancel"})}),r.jsx(ye,{type:"button",color:"secondary",size:"small",icon:B7,children:r.jsx(j,{id:"wham.whisperModeControlsLoading.done",defaultMessage:"Done"})})]}):r.jsxs("div",{className:"flex gap-x-1.5",children:[r.jsx("div",{className:z(FB,BB,t.buttonClassName),children:r.jsx(F7,{className:"icon"})}),r.jsx("div",{className:z(UB,t.buttonClassName),children:r.jsx(B7,{className:"icon-lg"})})]})}const ATe=R(()=>P(()=>import("./kej0fzfkf3ehxia3.js"),__vite__mapDeps([378,1,10,11])).then(t=>t.WhisperModeControls),{loading:t=>r.jsx(MTe,w({},t))});function ITe(t){return r.jsx(ATe,w({},t))}function Iet({composerController:t,composerType:e}){const{waveformData$:n,isWhisperActive$:s}=K5(t),o=re(s),a=_.useCallback((i,l,c,d)=>{const u=Pt(t),f=u.state.selection.ranges[0].$from.pos;s.set(!1),requestAnimationFrame(()=>{u.focus(),u.dispatch(u.state.tr.insertText(i,f,f)),u.dispatch(u.state.tr.setSelection(z8.create(u.state.doc,f+i.length)).scrollIntoView()),ske(t).setData({usedDictation:!0,dictationOriginalText:i!=null?i:null,dictationAssetPointer:l!=null?l:null,dictationAssetTTL:c!=null?c:null,dictationAssetFormat:d!=null?d:null})})},[t,s]);return o?r.jsx(ITe,{initialValue:RB,onSuccess:a,onWaveformDataUpdate:n.set,onExit:()=>{s.set(!1)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"}):r.jsx(TTe,{size:"small",onExit:()=>{s.set(!0)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"})}const jTe=Ge({id:"imageGenEditor.transformationTextareaPlaceholder",defaultMessage:"Describe what you want to add, remove or replace"}),NTe=Ge({id:"imageGenEditor.transformationTextareaPlaceholderShort",defaultMessage:"Describe your edit"}),My="image",jet=({image:t,currentDrawnShape:e,onCleared:n,getImageData:s})=>{const o=ne(),{setTargetedContent:a}=hm(),i=$t(),c=Sr()?jTe:NTe;_.useEffect(()=>(e==null?a({type:"object",subtype:My,placeholderTextOverride:c,shouldPersistAcrossMessages:!0,isFocusedViewContent:!1,createNewCompletionParams:d=>O7e(d,t)}):a({type:"object",subtype:My,placeholderTextOverride:c,isFocusedViewContent:!1,createNewCompletionParams:async d=>await F7e(d,t,s(),o,i),onCleared:n}),()=>{a(void 0)}),[e,s,t,o,n,a,i,c])},$B={cyberpunk:{id:"cyberpunk",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/cyberpunk.webp",label:Ge({id:"EoebyJ",defaultMessage:"Cyberpunk"}),textToImagePrompt:Ge({id:"Deq9he",defaultMessage:"Create an image in a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."}),imageToImagePrompt:Ge({id:"omZTK1",defaultMessage:"Restyle this image with a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."})},"coloring-book":{id:"coloring-book",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/coloring-book.webp",label:Ge({id:"Ma5v0R",defaultMessage:"Coloring Book"}),textToImagePrompt:Ge({id:"PWjYK/",defaultMessage:"Create an image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."}),imageToImagePrompt:Ge({id:"U6fwpJ",defaultMessage:"Restyle this image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."})},anime:{id:"anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/anime.webp",label:Ge({id:"U/Qrsc",defaultMessage:"Anime"}),textToImagePrompt:Ge({id:"gCogZd",defaultMessage:"Create an image in a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."}),imageToImagePrompt:Ge({id:"jZIKG9",defaultMessage:"Restyle this image with a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."})},"classic-anime":{id:"classic-anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/classic-anime.webp",label:Ge({id:"jLkVYJ",defaultMessage:"Classic Anime"}),textToImagePrompt:Ge({id:"7SgRKH",defaultMessage:"Create an image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."}),imageToImagePrompt:Ge({id:"r6UnyO",defaultMessage:"Restyle this image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."})},"dramatic-headshot":{id:"dramatic-headshot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/dramatic-headshot.webp",label:Ge({id:"p4IJX5",defaultMessage:"Dramatic Headshot"}),textToImagePrompt:Ge({id:"L2OTSr",defaultMessage:"Create an ultra-realistic high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."}),imageToImagePrompt:Ge({id:"HwR32X",defaultMessage:"Restyle this photo into a high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."})},"photo-shoot":{id:"photo-shoot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/photo-shoot.webp",label:Ge({id:"ZmdPZ5",defaultMessage:"Photo Shoot"}),textToImagePrompt:Ge({id:"APWtsI",defaultMessage:"Create an ultra-realistic professional photo shoot with soft lighting."}),imageToImagePrompt:Ge({id:"ugvh1K",defaultMessage:"Make a professional photo shoot with soft lighting based on this photo."})},"retro-cartoon":{id:"retro-cartoon",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/retro-cartoon.webp",label:Ge({id:"GAjF4n",defaultMessage:"Retro Cartoon"}),textToImagePrompt:Ge({id:"46xB6P",defaultMessage:"Create a retro 1950s cartoon style image, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."}),imageToImagePrompt:Ge({id:"ozicEm",defaultMessage:"Restyle this photo in a retro 1950s cartoon style, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."})},"80s-glam":{id:"80s-glam",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/80s-glam.webp",label:Ge({id:"fDejVt",defaultMessage:"80s Glam"}),textToImagePrompt:Ge({id:"W7Od8r",defaultMessage:"Create a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."}),imageToImagePrompt:Ge({id:"sL7kY5",defaultMessage:"Turn this photo into a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."})},"art-nouveau":{id:"art-nouveau",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/art-nouveau.webp",label:Ge({id:"JNecL3",defaultMessage:"Art Nouveau"}),textToImagePrompt:Ge({id:"Kdl/EG",defaultMessage:"Create an image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."}),imageToImagePrompt:Ge({id:"IicReU",defaultMessage:"Restyle this image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."})},synthwave:{id:"synthwave",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/synthwave.webp",label:Ge({id:"Db9V0o",defaultMessage:"Synthwave"}),textToImagePrompt:Ge({id:"t8FH1X",defaultMessage:"Create an image in a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."}),imageToImagePrompt:Ge({id:"CnZDU9",defaultMessage:"Restyle this image with a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."})},"tiranga-portrait-2025":{id:"tiranga-portrait-2025",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/tiranga-portrait-2025.webp",label:Ge({id:"eHhV1D",defaultMessage:"Tiranga Portrait"}),textToImagePrompt:Ge({id:"V7BzQx",defaultMessage:"Create a photorealistic photo on a clean background with soft key lighting. Add saffron-white-green rim light and a subtle Ashoka Chakra halo behind the head. Blend one soft overlay  Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette  into the shoulders/background. Include light tricolor bokeh or smoke and a gentle khadi/paper micro-texture. Crisp detail, no text, no flag as clothing."}),imageToImagePrompt:Ge({id:"AJ1btA",defaultMessage:'Restyle this photo in a "Tiranga double-exposure" look: preserve identity and pose, add saffron-white-green rim light and a subtle Ashoka Chakra halo. Blend one overlay - Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette - plus soft tricolor bokeh/smoke and gentle khadi/paper micro-texture. Photo real, balanced saturation. No text, don\'t use the flag as clothing'})}},VB=Object.values($B),PTe=R(()=>P(()=>import("./dt8ggo99jnbjbbe4.js"),__vite__mapDeps([379,1])),{loading:t=>F(t)}),RTe=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>F(t)});function Net({composerController:t}){const e=sv(u=>u.files.some(f=>Nl(f.file.name))),{targetedContent:n}=hm(),s=e||(n==null?void 0:n.subtype)===My,o=ne(),a=V(),c=rs(a,"3961845717").get("styles",VB.map(u=>u.id)).map(u=>$B[u]).filter(Boolean);_.useEffect(()=>{B.logEventWithStatsig("chatgpt_imagegen_style_picker_shown","chatgpt_imagegen_style_picker_shown")},[]);const d=_.useCallback(u=>{const f=s?o.formatMessage(u.imageToImagePrompt):o.formatMessage(u.textToImagePrompt);OTe(f,t,o),B.logEventWithStatsig("chatgpt_imagegen_preset_style_selected","chatgpt_imagegen_preset_style_selected",{style_id:u.id})},[t,o,s]);return r.jsxs(Dl,{onOpenChange:u=>{u&&B.logEventWithStatsig("chatgpt_imagegen_style_picker_opened","chatgpt_imagegen_style_picker_opened")},children:[r.jsx(yr,{asChild:!0,children:r.jsxs("button",{type:"button",className:"composer-btn px-2",children:[r.jsx(PTe,{className:"icon"}),r.jsx("span",{className:"ms-1.5 [[data-collapse-labels]_&]:sr-only",children:r.jsx(j,{id:"X850uz",defaultMessage:"Styles"})}),r.jsx(RTe,{className:"icon-sm xs:ms-1.5 ms-1"})]})}),r.jsx(Fl,{children:r.jsx(Rh,{className:"z-[51] max-h-[294px] w-[345px] overflow-y-auto bg-clip-border px-3 py-4",$as:Bl,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:r.jsx("div",{className:"grid grid-cols-3 gap-x-2 gap-y-4",children:c.map(u=>r.jsx(LTe,{style:u,onClick:()=>d(u)},u.id))})})})]})}function LTe({style:t,onClick:e}){const n=ne();return r.jsxs("button",{onClick:e,className:"hover:bg-token-bg-secondary focus-visible:ring-ring flex flex-col items-center gap-2.5 rounded-md p-1 text-xs focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-none",children:[r.jsx("img",{src:t.imageUrl,alt:n.formatMessage(t.label),className:"aspect-square w-4/5 rounded-full object-cover"}),r.jsx("span",{children:n.formatMessage(t.label)})]})}function OTe(t,e,n){const s=Pt(e),o=K7e(e);if(o.trim()===""){Tz(s,t);return}const a=o.toLowerCase();for(const{textToImagePrompt:i,imageToImagePrompt:l}of VB){const d=[n.formatMessage(i),n.formatMessage(l)].map(u=>{const f=a.indexOf(u.toLowerCase());return f===-1?null:{start:f,end:f+u.length}}).filter(Boolean);if(d.length){const u=Math.min(...d.map(g=>g.start)),f=Math.max(...d.map(g=>g.end)),m=o.substring(u,f).trimEnd();Mz(s,m,t);return}}Az(s,t)}function DTe(){const t=Y3(),e=re(Iz);return t&&e&&w8()&&H5()}function FTe(t){const i=t,{ref:e,children:n,className:s}=i,o=we(i,["ref","children","className"]),a=DTe();return r.jsx("div",U(w({},o),{className:z(a&&"keyboard-open:fixed keyboard-open:bottom-[var(--screen-keyboard-height,0)] keyboard-open:start-3 keyboard-open:end-3 keyboard-open:z-50 keyboard-open:w-auto! keyboard-open:-translate-y-2",s),ref:l=>{if(typeof e=="function"?e(l):e!=null&&(e.current=l),!!a)return Hl({axis:"height",target:l,onChange:({height:c})=>{i7e.setState(d=>U(w({},d),{composerHeight:c}))}})},children:n}))}const Pet=t=>{"use forget";const e=W.c(91),{viewTransitionName:n,isTemporaryChat:s,isDeveloperMode:o,isNewConversation:a,composerController:i,children:l,expanded:c,onSubmit:d,shouldUseTightRadius:u,canCollapseWithInput:f,canCollapseWithFooterActions:m,expandOnMultilineInput:g,backgroundClassName:p,ariaLabel:h,ref:x,disableMotion:v}=t,y=n===void 0?"var(--vt-composer)":n,b=u===void 0?!1:u;let C=f===void 0?!1:f,S=m===void 0?!0:m;const E=g===void 0?!1:g,k=v===void 0?!1:v,T=An(mn);let M,A,I,N,L,O,D;e[0]!==l?(L=null,O=null,N=null,M=[],D=[],A=[],I=[],_.Children.forEach(l,Nt=>{if(_.isValidElement(Nt)){if(Nt.type===BTe){if(L!=null)throw new Error("PromptTextareaComposer only accepts a single primary content");L=Nt}if(Nt.type===UTe){if(O!=null)throw new Error("PromptTextareaComposer only accepts a single submit button");O=Nt}else if(Nt.type===$Te){if(N!=null)throw new Error("PromptTextareaComposer only accepts a single leading action");N=Nt}else Nt.type===HTe||Nt.type===VTe?M.push(Nt):Nt.type===GTe?D.push(Nt):Nt.type===WTe?A.push(Nt):Nt.type===zTe&&I.push(Nt)}}),e[0]=l,e[1]=M,e[2]=A,e[3]=I,e[4]=N,e[5]=L,e[6]=O,e[7]=D):(M=e[1],A=e[2],I=e[3],N=e[4],L=e[5],O=e[6],D=e[7]),E&&(C=!0,S=!1);const $=M.length>0,H=D.length>0,G=H||O!=null,Z=IT(),Q=V(),q=!tt(Q),Y=re(()=>!$&&!G?!1:c!=null?c:E&&Nz(i)||!E&&Pz(i)||!C&&!af(i)||!S&&$),te=qTe;let ae;e[8]!==d?(ae=Nt=>{Nt.preventDefault(),d(Nt)},e[8]=d,e[9]=ae):ae=e[9];const se=ae,[ce,X]=_.useState(!1);let ee;e[10]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>{X(!0),setTimeout(()=>{X(!1)},250)},e[10]=ee):ee=e[10];const ie=ee;let de;e[11]!==ce||e[12]!==Z?(de=ce?{duration:0}:Z?QR:a0e,e[11]=ce,e[12]=Z,e[13]=de):de=e[13];const me=de,xe=ne();let pe;e[14]!==xe?(pe=xe.formatMessage({id:"U6PwZd",defaultMessage:"Developer mode"}).toLocaleUpperCase(),e[14]=xe,e[15]=pe):pe=e[15];const Me=pe,Ce=o&&!a&&"relative";let ke;e[16]!==Ce?(ke=z("group/composer w-full",Ce),e[16]=Ce,e[17]=ke):ke=e[17];const Le=y!=null?y:void 0;let De;e[18]!==Le?(De={viewTransitionName:Le},e[18]=Le,e[19]=De):De=e[19];const le=De;let oe;e[20]!==Y?(oe=nv(Y),e[20]=Y,e[21]=oe):oe=e[21];const Ee="unified-composer";let be;e[22]!==i?(be=jz(i),e[22]=i,e[23]=be):be=e[23];const fe=rne(be,x);let ue;e[24]!==Me||e[25]!==o||e[26]!==a?(ue=o&&!a&&r.jsx(yh,{href:"#settings/Connectors/Advanced",underline:!1,className:"absolute end-12 top-0 -translate-y-full rounded-t-xl bg-orange-400 px-2 text-xs font-medium text-white transition-colors hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500",children:Me}),e[24]=Me,e[25]=o,e[26]=a,e[27]=ue):ue=e[27];let _e;e[28]!==I?(_e=I.length>0&&r.jsx("div",{className:"hidden",children:I}),e[28]=I,e[29]=_e):_e=e[29];const Te=FTe;let $e;e[30]!==i||e[31]!==Q?($e=Nt=>{!tv(i)&&!Nt.defaultPrevented&&(S8(Q).anySheetOpen$()||no(Pt(i)))},e[30]=i,e[31]=Q,e[32]=$e):$e=e[32];const Ne=cc,Ae=!0,He=T&&"dark:bg-token-bg-primary",Qe=s&&"dark",et=!o&&"shadow-short",Ct=o&&"relative shadow-sm outline-2 outline-orange-400";let vt;e[33]!==p||e[34]!==He||e[35]!==Qe||e[36]!==et||e[37]!==Ct?(vt=z("bg-token-bg-primary cursor-text overflow-clip bg-clip-padding p-2.5 contain-inline-size dark:bg-[#303030]","grid grid-cols-[auto_1fr_auto] [grid-template-areas:'header_header_header'_'leading_primary_trailing'_'._footer_.'] group-data-expanded/composer:[grid-template-areas:'header_header_header'_'primary_primary_primary'_'leading_footer_trailing']",He,Qe,et,Ct,p),e[33]=p,e[34]=He,e[35]=Qe,e[36]=et,e[37]=Ct,e[38]=vt):vt=e[38];const At=T?"0":b?"var(--radius-xl)":"28px";let Ht;e[39]!==At?(Ht={borderRadius:At},e[39]=At,e[40]=Ht):Ht=e[40];let Ot;e[41]!==k||e[42]!==Y||e[43]!==L||e[44]!==me?(Ot=r.jsx(cc,{disableMotion:k,layout:"position",layoutDependency:Y,transition:me,className:"-my-2.5 flex min-h-14 items-center overflow-x-hidden px-1.5 [grid-area:primary] group-data-expanded/composer:mb-0 group-data-expanded/composer:px-2.5",children:L}),e[41]=k,e[42]=Y,e[43]=L,e[44]=me,e[45]=Ot):Ot=e[45];let Vt;e[46]!==k||e[47]!==Y||e[48]!==N||e[49]!==me?(Vt=N&&r.jsx(cc,{disableMotion:k,layout:"position",layoutDependency:Y,transition:me,className:"[grid-area:leading]",children:N}),e[46]=k,e[47]=Y,e[48]=N,e[49]=me,e[50]=Vt):Vt=e[50];const en=$&&r.jsx(cc,{disableMotion:k,layout:"position",layoutDependency:Y,transition:me,"data-testid":"composer-footer-actions",className:z("-m-1 max-w-full overflow-x-auto p-1 [grid-area:footer] [scrollbar-width:none]",S&&"group-not-data-expanded/composer:-mb-12"),inert:!Y,initial:{translateY:Y?0:"calc(-6*var(--spacing))"},animate:{translateY:0},children:r.jsx("div",{className:z("flex min-w-fit items-center",q?"gap-1.5 ps-0 pe-1.5":"cant-hover:px-1.5 cant-hover:gap-1.5"),ref:te,children:M})});let Qt;e[51]!==k||e[52]!==G||e[53]!==H||e[54]!==Y||e[55]!==O||e[56]!==D||e[57]!==me?(Qt=G&&r.jsxs(cc,{disableMotion:k,layout:"position",layoutDependency:Y,transition:me,className:"flex items-center gap-2 [grid-area:trailing]",children:[H&&r.jsx("div",{className:"relative ms-1",children:D}),O]}),e[51]=k,e[52]=G,e[53]=H,e[54]=Y,e[55]=O,e[56]=D,e[57]=me,e[58]=Qt):Qt=e[58];let tn;e[59]!==k||e[60]!==A||e[61]!==Y||e[62]!==me?(tn=A.length>0&&r.jsx(cc,{disableMotion:k,layout:"position",layoutDependency:Y,transition:me,className:"-mx-2.5 -mt-2.5 mb-2.5 flex flex-col [grid-area:header]",children:A}),e[59]=k,e[60]=A,e[61]=Y,e[62]=me,e[63]=tn):tn=e[63];let gn;e[64]!==Ne||e[65]!==k||e[66]!==Y||e[67]!==vt||e[68]!==Ht||e[69]!==Ot||e[70]!==Vt||e[71]!==en||e[72]!==Qt||e[73]!==tn||e[74]!==me?(gn=r.jsxs(Ne,{disableMotion:k,layout:Ae,layoutDependency:Y,transition:me,className:vt,style:Ht,children:[Ot,Vt,en,Qt,tn]}),e[64]=Ne,e[65]=k,e[66]=Y,e[67]=vt,e[68]=Ht,e[69]=Ot,e[70]=Vt,e[71]=en,e[72]=Qt,e[73]=tn,e[74]=me,e[75]=gn):gn=e[75];let In;e[76]!==Te||e[77]!==$e||e[78]!==gn?(In=r.jsx(Te,{onClick:$e,children:gn}),e[76]=Te,e[77]=$e,e[78]=gn,e[79]=In):In=e[79];let bt;return e[80]!==h||e[81]!==ie||e[82]!==se||e[83]!==ke||e[84]!==le||e[85]!==oe||e[86]!==fe||e[87]!==ue||e[88]!==_e||e[89]!==In?(bt=r.jsxs("form",{onPaste:ie,className:ke,style:le,"data-expanded":oe,onSubmit:se,"data-type":Ee,"aria-label":h,ref:fe,children:[ue,_e,In]}),e[80]=h,e[81]=ie,e[82]=se,e[83]=ke,e[84]=le,e[85]=oe,e[86]=fe,e[87]=ue,e[88]=_e,e[89]=In,e[90]=bt):bt=e[90],bt},cc=t=>{"use forget";var f;const e=W.c(20);let n,s,o,a,i,l,c,d;if(e[0]!==t?(f=t,{disableMotion:o,layout:i,layoutDependency:l,transition:d,initial:a,animate:n,children:s}=f,c=we(f,["disableMotion","layout","layoutDependency","transition","initial","animate","children"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=d):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],d=e[8]),o){let m;return e[9]!==s||e[10]!==c?(m=r.jsx("div",U(w({},c),{children:s})),e[9]=s,e[10]=c,e[11]=m):m=e[11],m}let u;return e[12]!==n||e[13]!==s||e[14]!==a||e[15]!==i||e[16]!==l||e[17]!==c||e[18]!==d?(u=r.jsx(Xe.div,U(w({layout:i,layoutDependency:l,transition:d,initial:a,animate:n},c),{children:s})),e[12]=n,e[13]=s,e[14]=a,e[15]=i,e[16]=l,e[17]=c,e[18]=d,e[19]=u):u=e[19],u},BTe=t=>{"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(r.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s},UTe=t=>{"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{className:"ms-auto flex items-center gap-1.5",onPointerDown:YTe,children:n}),e[0]=n,e[1]=s):s=e[1],s},$Te=t=>{"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(r.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s},VTe=t=>{"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=n?r.jsx(r.Fragment,{children:n}):null,e[0]=n,e[1]=s):s=e[1],s},HTe=t=>{"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{onPointerDown:ZTe,children:n}),e[0]=n,e[1]=s):s=e[1],s},GTe=t=>{"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{onPointerDown:KTe,children:n}),e[0]=n,e[1]=s):s=e[1],s},WTe=t=>{"use forget";const e=W.c(5),{children:n,width:s}=t,a=(s===void 0?"full":s)==="fit"?"w-fit":"w-full";let i;e[0]!==a?(i=z(a),e[0]=a,e[1]=i):i=e[1];let l;return e[2]!==n||e[3]!==i?(l=r.jsx("div",{className:i,onPointerDown:QTe,children:n}),e[2]=n,e[3]=i,e[4]=l):l=e[4],l},zTe=t=>{"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(r.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s};function qTe(t){const e=t==null?void 0:t.parentElement;if(!t||!e)return;const n=()=>{const o=K8(t,"data-collapse-labels"),a=t.scrollWidth>(o?0:e.clientWidth);or(t,"data-collapse-labels",a)},s=new ResizeObserver(n);return s.observe(t),s.observe(e),()=>s.disconnect()}function YTe(t){return t.stopPropagation()}function ZTe(t){return t.stopPropagation()}function KTe(t){return t.stopPropagation()}function QTe(t){return t.stopPropagation()}const Ret=({clientThreadId:t,accountUserId:e})=>{var o;const n=Ve(t,a=>a==null?void 0:a.sharedProjectConversationOwner);return(n==null?void 0:n.id)!=null&&n.id!==e?r.jsx("p",{className:"text-token-text-secondary mb-2 text-center text-xs",children:r.jsx(j,{id:"thread.sharedProjectConversationOwnerNotice",defaultMessage:"This is a conversation between ChatGPT and {name}. Responding will create a branch.",values:{name:(o=n==null?void 0:n.name)!=null?o:"the owner"}})}):null};function Let(){const t=ne();return r.jsx(ye,{onClick:()=>{Ln.openModal(Qu.SharedConversationModeration)},className:"w-1/3",children:t.formatMessage({id:"thread.sharedConversation.moderate",defaultMessage:"Moderate conversation"})})}const Oet=ko(t=>St(()=>{var l,c,d;if(!JTe(t))return[];const e=yn(t),n=Y5(t),s=Mf(t.ctx),o=wd(t.ctx),a=(c=(l=st(t.ctx))==null?void 0:l.isWorkspaceAccount())!=null?c:!1,i=Rz(t);return(d=Mo(t.ctx))==null?void 0:d.filter(u=>!(!pb({systemHint:u,modelConfig:e,conversationMode:n,isTemporaryChat:s,isDeveloperMode:o,isWorkspaceTenant:a,startedWithByoMcp:i})||u.systemHint===Pe.Agent&&!XTe(t)||u.systemHint===Pe.Slurm&&!e8e(t)))},{equals:Sl})),JTe=ko(t=>St(()=>{const e=Y5(t);return e==null||e.kind===wt.PrimaryAssistant||e.kind===wt.GizmoInteraction&&jl(t.ctx,hM(e))})),XTe=ko(t=>St(()=>{var o,a,i;if(!ve(t.ctx,"3084799213")||iv(t))return!0;const n=Q8(t,l=>R8(l.message));return(i=(a=(o=n==null?void 0:n.message.metadata)==null?void 0:o.system_hints)==null?void 0:a.includes(Pe.Agent))!=null?i:!1})),e8e=ko(t=>St(()=>{const e=Y5(t);return(e==null?void 0:e.kind)!==wt.GizmoInteraction||!e.gizmo||Lz(e.gizmo)&&!k3(e.gizmo)})),t8e=R(()=>P(()=>import("./diw1uvps7iz4sxyn.js"),__vite__mapDeps([275,1])),{loading:t=>F(t)});function n8e({className:t,file:e,fileName:n,fileId:s,gizmoId:o}){const a=Nl(n)&&s!=null,i=ne(),l=PR(e&&ci(e)?e:null,n,s,o,void 0);return a?r.jsx("div",{className:z("flex h-full w-full items-center justify-center bg-[#8F8F8F] bg-cover bg-center text-white",t),"aria-label":i.formatMessage({id:"snorlax.imageThumbnail",defaultMessage:"Image thumbnail for {fileName}"},{fileName:n}),style:{backgroundImage:"url(".concat(l,")")},children:!l&&r.jsx(t8e,{className:"icon-lg"})}):null}const U7=R(()=>P(()=>import("./gp9r9kunq1jfcrr8.js"),__vite__mapDeps([380,1,10,11,349,350,381,382,218])).then(t=>t.SnorlaxFileModal)),$7=R(()=>P(()=>import("./nvsf5y439ozyeg9o.js"),__vite__mapDeps([218,1,10,11])).then(t=>t.CustomInstructionsModal));function Det({gizmo:t}){return r.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:t?r.jsxs(r.Fragment,{children:[r.jsx(s8e,{gizmo:t,className:"rounded-s-[20px] rounded-e-[0] border-[1px] border-e-[0.5px]"}),r.jsx(a8e,{gizmo:t,className:"rounded-s-[0] rounded-e-[20px] border-[1px] border-s-[0.5px]"})]}):r.jsxs(r.Fragment,{children:[r.jsx(V7,{}),r.jsx(V7,{})]})})}const l4=({className:t,header:e,context:n,contextClassName:s="",icon:o,onClick:a,disabled:i=!1})=>r.jsx("button",{onClick:a,disabled:i,className:z("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",t),children:r.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[r.jsxs("div",{className:"w-full grow text-start",children:[r.jsx("div",{className:"text-sm font-medium",children:e}),r.jsx("div",{className:z("text-token-text-secondary text-xs",s),children:n})]}),o]})}),V7=()=>{"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(l4,{disabled:!0,header:r.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:r.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})}),t[0]=e):e=t[0],e};function s8e(t){"use forget";const e=W.c(28),{className:n,gizmo:s}=t,{files:o}=s,a=!o.length,i=V();let l;e[0]!==i||e[1]!==s?(l=()=>dt(i,U7,{gizmo:s,onClose:()=>Cs(i,U7)}),e[0]=i,e[1]=s,e[2]=l):l=e[2];const c=l;let d,u,f;const{canEdit:m}=I3(s);if(a){const h=m?Kt.addFilesButtonLabel:Kt.viewFilesButtonLabel;let x;e[3]!==h?(x=r.jsx(j,w({},h)),e[3]=h,e[4]=x):x=e[4],d=x;const v=m?Kt.filesControlDescription:Kt.noFilesReadOnlyDescription;let y;e[5]!==v?(y=r.jsx(j,w({},v)),e[5]=v,e[6]=y):y=e[6],u=y,f=null}else{let h,x;if(e[7]!==o||e[8]!==s.gizmo){const y=o.slice(0,3);let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(j,w({},Kt.projectFilesModalTitle)),e[13]=b):b=e[13],d=b;let C;e[14]!==o.length?(C=r.jsx(j,U(w({},Kt.filesCount),{values:{count:o.length}})),e[14]=o.length,e[15]=C):C=e[15],u=C,h="relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only";let S;e[16]!==s.gizmo?(S=(E,k)=>r.jsx(o8e,{file:E,index:k,gizmoId:s.gizmo.id},E.id),e[16]=s.gizmo,e[17]=S):S=e[17],x=y.toReversed().map(S),e[7]=o,e[8]=s.gizmo,e[9]=h,e[10]=x,e[11]=d,e[12]=u}else h=e[9],x=e[10],d=e[11],u=e[12];let v;e[18]!==h||e[19]!==x?(v=r.jsx("div",{className:h,children:x}),e[18]=h,e[19]=x,e[20]=v):v=e[20],f=v}const g=a&&!m;let p;return e[21]!==n||e[22]!==u||e[23]!==d||e[24]!==f||e[25]!==c||e[26]!==g?(p=r.jsx(l4,{className:n,onClick:c,header:d,context:u,icon:f,disabled:g}),e[21]=n,e[22]=u,e[23]=d,e[24]=f,e[25]=c,e[26]=g,e[27]=p):p=e[27],p}function o8e(t){"use forget";const e=W.c(16),{file:n,index:s,gizmoId:o}=t,a=n.name;let i;e[0]!==n.file_id||e[1]!==a?(i=Nl(a)&&n.file_id!=null,e[0]=n.file_id,e[1]=a,e[2]=i):i=e[2];const l=i;let c;e[3]!==n.file_id||e[4]!==a||e[5]!==o||e[6]!==l?(c=l&&r.jsx(n8e,{fileName:a,fileId:n.file_id,gizmoId:o,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"}),e[3]=n.file_id,e[4]=a,e[5]=o,e[6]=l,e[7]=c):c=e[7];const d=c,u="translateX(".concat(s*-20,"px)");let f;e[8]!==u?(f={transform:u},e[8]=u,e[9]=f):f=e[9];let m;e[10]!==n.name||e[11]!==d?(m=d||r.jsx(Jb,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:n.name,contextConnectorInfo:void 0}),e[10]=n.name,e[11]=d,e[12]=m):m=e[12];let g;return e[13]!==f||e[14]!==m?(g=r.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:f,children:m}),e[13]=f,e[14]=m,e[15]=g):g=e[15],g}function a8e(t){"use forget";const e=W.c(15),{gizmo:n,className:s}=t,{instructions:o}=n.gizmo,a=!o.length,i=V();let l;e[0]!==i||e[1]!==n?(l=()=>dt(i,$7,{gizmo:n,onClose:()=>Cs(i,$7)}),e[0]=i,e[1]=n,e[2]=l):l=e[2];const c=l;let d,u,f;const{canEdit:m}=I3(n);if(a){const h=m?Kt.customInstructionsTitle:Kt.customInstructionsReadOnlyTitle;let x;e[3]!==h?(x=r.jsx(j,w({},h)),e[3]=h,e[4]=x):x=e[4],d=x;const v=m?Kt.customInstructionsDescription:Kt.customInstructionsReadOnlyDescription;let y;e[5]!==v?(y=r.jsx(j,w({},v)),e[5]=v,e[6]=y):y=e[6],u=y}else{let h;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(j,w({},Kt.editCustomInstructionsTitle)),e[7]=h):h=e[7],d=h,f="overflow-hidden text-ellipsis whitespace-nowrap",u=o}const g=a&&!m;let p;return e[8]!==s||e[9]!==u||e[10]!==f||e[11]!==d||e[12]!==c||e[13]!==g?(p=r.jsx(l4,{className:s,onClick:c,header:d,context:u,contextClassName:f,disabled:g}),e[8]=s,e[9]=u,e[10]=f,e[11]=d,e[12]=c,e[13]=g,e[14]=p):p=e[14],p}const HB=on(()=>Be({}));function Fet(t,e){var n;return(n=HB(t)[e])!=null?n:null}function Bet(t,e,n){HB.set(t,s=>U(w({},s),{[e]:n}))}function Vi(t){"use forget";const e=W.c(10),{data:n,className:s,size:o,style:a}=t,i=n.avatarUrl,l=n.name;let c;e[0]!==s?(c=z("rounded-full object-cover",s),e[0]=s,e[1]=c):c=e[1];let d;e[2]!==o||e[3]!==a?(d=w({width:o,height:o},a),e[2]=o,e[3]=a,e[4]=d):d=e[4];let u;return e[5]!==n.avatarUrl||e[6]!==n.name||e[7]!==c||e[8]!==d?(u=r.jsx("img",{src:i,alt:l,className:c,style:d}),e[5]=n.avatarUrl,e[6]=n.name,e[7]=c,e[8]=d,e[9]=u):u=e[9],u}function r8e({list:t,baseSize:e=40,variant:n="compact",excludeViewer:s=!0}){var c;const o=V(),a=(c=st(o))==null?void 0:c.normalizedAccountUserId,i=t.filter(d=>s?d.id!==a:!0);if(n==="horizontal-stack"){const u=i.slice(0,3),f=Math.round(e*.33),m=i.length<=3?0:i.length-2;return r.jsx("div",{className:"relative flex shrink-0 items-center",children:u.length>=2?r.jsxs(r.Fragment,{children:[u.map((g,p)=>r.jsx(Vi,{data:g,className:"bg-token-bg-primary gizmo-shadow-stroke relative box-content rounded-full",size:e,style:{padding:2,marginLeft:p===0?0:-f,zIndex:100+(p+1)*10}},g.id)),m===0?null:r.jsx("div",{className:"absolute box-content flex items-center justify-center rounded-full bg-black/60 text-white",style:{width:e,height:e,left:(e+4-f)*2+2,zIndex:100+(u.length+1)*10,fontSize:Math.min(16,Math.round(e*.5-2))},children:m},"overlay")]}):i.length===1?r.jsx(Vi,{data:i[0],className:"bg-token-bg-primary gizmo-shadow-stroke box-content rounded-full",size:e,style:{padding:2}}):t.length>=1?r.jsx(Vi,{data:t[0],className:"bg-token-bg-primary gizmo-shadow-stroke box-content rounded-full",size:e,style:{padding:2}}):null})}const l=Math.round(e*.7);return r.jsx("div",{className:"relative shrink-0",style:{width:e,height:e},children:i.length>=2?r.jsxs(r.Fragment,{children:[r.jsx(Vi,{data:i[0],className:"absolute start-0 top-0",size:l}),r.jsx("div",{className:"bg-token-bg-primary absolute -end-0.5 -bottom-0.5 rounded-full p-0.5",children:r.jsx(Vi,{data:i[1],size:l})})]}):i.length===1?r.jsx(Vi,{data:i[0],className:"gizmo-shadow-stroke",size:e}):t.length>=1?r.jsx(Vi,{data:t[0],className:"gizmo-shadow-stroke",size:e}):null})}function i8e({room:t,baseSize:e=40,variant:n="compact"}){const s=re(()=>t.members$().map(o=>({id:o.accountUserId,avatarUrl:o.avatarUrl,name:o.name})));return r.jsx(r8e,{list:s,baseSize:e,variant:n})}function l8e(t,e){return t in Wg&&typeof e=="boolean"}const Wg={apps:!1,projects:!0,gpts:!0,chats:!0,favorites:!1,groupChats:!0},c8e=Hn(()=>{const t=d8e(),e={apps:Be(t.sectionStates.apps),projects:Be(t.sectionStates.projects),gpts:Be(t.sectionStates.gpts),chats:Be(t.sectionStates.chats),favorites:Be(t.sectionStates.favorites),groupChats:Be(t.sectionStates.groupChats)};return{sidebarSectionState:e,expandSection:s=>{e[s].set(!0),H7(e)},collapseSection:s=>{e[s].set(!1),H7(e)}}});function H7(t){const e={apps:t.apps(),projects:t.projects(),gpts:t.gpts(),chats:t.chats(),favorites:t.favorites(),groupChats:t.groupChats()};u8e({sectionStates:e})}function d8e(){try{const t=gs.getCookie(ps.SidebarSections);if(t){const e=JSON.parse(t);if(e&&typeof e.sectionStates=="object"){const n=w({},Wg);for(const[s,o]of Object.entries(e.sectionStates))l8e(s,o)&&(n[s]=o);return{sectionStates:n}}}return{sectionStates:Wg}}catch(t){return Fe.addError(new Error("Failed to load sidebar section state",{cause:t})),{sectionStates:Wg}}}function u8e(t){try{gs.setCookie(ps.SidebarSections,JSON.stringify({sectionStates:t.sectionStates}))}catch(e){Fe.addError(new Error("Failed to save sidebar section state",{cause:e}))}}const f8e=R(()=>P(()=>import("./dwgk7r4s1fwn35jq.js"),__vite__mapDeps([142,1])),{loading:t=>F(t)}),m8e=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>F(t)});function g8e(t){"use forget";const e=W.c(27),{title:n,id:s,children:o}=t,a=V(),i=ne();let l;e[0]!==a?(l=c8e(a),e[0]=a,e[1]=l):l=e[1];const c=l,d=re(c.sidebarSectionState[s]);let u;e[2]!==s||e[3]!==c||e[4]!==d?(u=E=>{E.preventDefault(),d?c.collapseSection(s):c.expandSection(s)},e[2]=s,e[3]=c,e[4]=d,e[5]=u):u=e[5];const f=u;let m;e[6]!==i||e[7]!==d?(m=d?i.formatMessage({defaultMessage:"Collapse section",id:"sidebar.collapseSection"}):i.formatMessage({defaultMessage:"Expand section",id:"sidebar.expandSection"}),e[6]=i,e[7]=d,e[8]=m):m=e[8];const g=m,p=d?"mb-[var(--sidebar-expanded-section-margin-bottom)]":"mb-[var(--sidebar-collapsed-section-margin-bottom)]";let h;e[9]!==p?(h=z("group/sidebar-expando-section",p),e[9]=p,e[10]=h):h=e[10];let x;e[11]!==n?(x=r.jsx(OO,{"data-no-spacing":!0,children:n}),e[11]=n,e[12]=x):x=e[12];let v;e[13]!==d?(v=d?r.jsx(m8e,{className:"hidden h-3 w-3 group-hover/sidebar-expando-section:block"}):r.jsx(f8e,{className:"h-3 w-3 group-hover/sidebar-expando-section:block"}),e[13]=d,e[14]=v):v=e[14];let y;e[15]!==x||e[16]!==v?(y=r.jsxs("div",{className:"text-token-text-tertiary flex w-full items-center justify-start gap-0.5",children:[x,v]}),e[15]=x,e[16]=v,e[17]=y):y=e[17];let b;e[18]!==g||e[19]!==f||e[20]!==d||e[21]!==y?(b=r.jsx(h5,{onClick:f,"aria-expanded":d,"aria-label":g,"data-no-hover-bg":!0,"data-no-contents-gap":!0,children:y}),e[18]=g,e[19]=f,e[20]=d,e[21]=y,e[22]=b):b=e[22];const C=d&&o;let S;return e[23]!==C||e[24]!==h||e[25]!==b?(S=r.jsxs("div",{className:h,children:[b,C]}),e[23]=C,e[24]=h,e[25]=b,e[26]=S):S=e[26],S}const p8e=R(()=>P(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([147,1])),{loading:t=>F(t)}),h8e=R(()=>P(()=>import("./ei2rr3u86wwo8xvm.js"),__vite__mapDeps([52,1])),{loading:t=>F(t)}),_8e=R(()=>P(()=>import("./okzsq1aji2s9p1ex.js"),__vite__mapDeps([187,1])),{loading:t=>F(t)}),x8e=R(()=>P(()=>import("./l4ks0xbrenyhbpo7.js"),__vite__mapDeps([228,1])),{loading:t=>F(t)}),y8e=R(()=>P(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([149,1])),{loading:t=>F(t)}),v8e=R(()=>P(()=>import("./o6tznc8phmu3421m.js"),__vite__mapDeps([383,1])),{loading:t=>F(t)});function Uet(){const t=V();return em(t).hasAccess?r.jsx(b8e,{}):null}function b8e(){const t=V(),e=em(t),n=re(()=>e.sortedRooms$()),s=re(()=>e.hasFetchedRooms$()),o=re(()=>e.isFetchingMoreRooms$()),a=re(()=>e.roomsPaginationCursor$()!=null);return n.length===0?null:r.jsxs(g8e,{id:"groupChats",title:r.jsx(j,{id:"Job6E6",defaultMessage:"Group chats"}),children:[n.map(i=>r.jsx(C8e,{room:i},i.id)),s&&a?r.jsx(h5,{disabled:o,onClick:i=>{i.preventDefault(),e.fetchMoreRooms$()},children:r.jsx(j,{id:"79QD5f",defaultMessage:"See more"})}):null]})}function C8e({room:t}){const e=V(),s=eie()===t.id,o=em(e),a=re(()=>t.name$()),i=re(()=>t.unreadMessageCount$()>0),l=re(()=>t.members$().length===1),c=_.useRef(null),d=r.jsxs("div",{className:"flex items-center space-x-3",children:[i?r.jsx(G7,{}):null,l?r.jsx(v8e,{className:"icon text-token-icon-primary opacity-[0.15]",viewBox:"2 2 16 16"}):r.jsx(i8e,{room:t,baseSize:20})]}),u=r.jsxs("div",{className:"flex items-center space-x-2",children:[i?r.jsx(G7,{}):null,r.jsx(S8e,{room:t})]});return r.jsx(Ao,{to:"/gg/".concat(t.id),draggable:!1,label:a,trailing:d,active:s,highlightTrailing:u,onMouseOver:()=>{c.current!==t.id&&(c.current=t.id,o.fetchMessages$({roomId:t.id}))}})}function S8e({room:t}){const e=V(),n=ne(),s=_.useRef(null),[o,a]=_.useState(!1),i=re(()=>t.members$().length===1);return r.jsx(kr,{open:o,onOpenChange:l=>{a(l)},side:"bottom",contentAlign:"start",alignOffset:-8,sideOffset:-4,triggerButton:r.jsx(Uf,{ref:s,"aria-label":n.formatMessage({id:"oUP76h",defaultMessage:"Open group chat options"}),icon:y8e}),size:"auto",children:o?r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{onClick:()=>{dt(e,Kre,{room:t})},icon:h8e,children:r.jsx(j,{id:"2O0yli",defaultMessage:"Rename"})}),r.jsx(K.Item,{onClick:()=>{dt(e,Zre,{room:t})},icon:_8e,children:r.jsx(j,{id:"qShpjO",defaultMessage:"Add people via group link"})}),i?r.jsx(K.Item,{onClick:()=>{dt(e,Yre,{room:t})},icon:p8e,color:"danger",children:r.jsx(j,{id:"wkwt0O",defaultMessage:"Delete"})}):r.jsx(K.Item,{onClick:()=>{dt(e,qre,{room:t})},icon:x8e,color:"danger",children:r.jsx(j,{id:"HxAKnp",defaultMessage:"Leave"})})]}):null})}function G7(){return r.jsx(pt,{label:r.jsx(j,{id:"ruB6tr",defaultMessage:"Unread"}),triggerAs:null,side:"top",children:r.jsx("span",{className:"bg-token-interactive-icon-accent-default inline-block h-2 w-2 flex-shrink-0 rounded-full"})})}function $et({gizmoResource:t,serverThreadId:e,isOnProjectPage:n,conversations:s,hasNextPage:o=!1}){const a=V(),i=s!=null?s:[],l=i.findIndex(u=>u.id===e),c=i.slice(0,Pm);l!=null&&l>=Pm&&(c[Pm-1]=i[l]);const d=o||i.length>Pm;return r.jsxs(r.Fragment,{children:[c.map(u=>r.jsx(F1,{className:"ps-9",conversation:u,isActive:u.id===e},u.id)),d&&!n&&r.jsx(Ao,{to:kf(a,t),className:"ps-9",label:r.jsx(j,w({},Kt.seeAllChats))})]})}function Vet(t){"use forget";const e=W.c(21),{className:n,autoFocus:s,initialValue:o,onCommit:a,onCancel:i}=t,l=s===void 0?!0:s,[c,d]=_.useState(o),u=_.useRef(null);let f;e[0]!==o||e[1]!==i||e[2]!==a||e[3]!==c?(f=function(){c!==o?a(c):i()},e[0]=o,e[1]=i,e[2]=a,e[3]=c,e[4]=f):f=e[4];const m=f;let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=y=>d(y.target.value),e[5]=g):g=e[5];let p;e[6]!==m||e[7]!==i?(p=y=>{if(N8(y)){y.key===" "&&y.stopPropagation();e:switch(y.key){case"Escape":{i();break e}case"Enter":m()}}},e[6]=m,e[7]=i,e[8]=p):p=e[8];let h;e[9]!==m||e[10]!==i||e[11]!==c.length?(h=()=>{c.length?m():i()},e[9]=m,e[10]=i,e[11]=c.length,e[12]=h):h=e[12];let x;e[13]!==n?(x=z("w-full border-none bg-transparent p-0 text-sm focus:ring-0",n),e[13]=n,e[14]=x):x=e[14];let v;return e[15]!==l||e[16]!==p||e[17]!==h||e[18]!==x||e[19]!==c?(v=r.jsx("input",{ref:u,type:"text",name:"title-editor",value:c,onFocus:k8e,autoFocus:l,onChange:g,onClick:w8e,onKeyDown:p,onBlur:h,className:x}),e[15]=l,e[16]=p,e[17]=h,e[18]=x,e[19]=c,e[20]=v):v=e[20],v}function w8e(t){t.preventDefault()}function k8e(t){var e;(e=t.currentTarget)==null||e.select()}const Het=Se({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}}),W7=2,z7=3;function Get(t,e){var u,f,m,g,p,h,x;const n=Td(t,v=>v.flair.kind);let s=[],o=[];const a=(u=n[Ri.Recent])==null?void 0:u.slice(0,W7),i=(f=n[Ri.Recent])==null?void 0:f.slice(W7),l=(m=n[Ri.Workspace])==null?void 0:m.slice(0,z7),c=(g=n[Ri.Workspace])==null?void 0:g.slice(z7),d=(p=n[Ri.Mine])!=null?p:[];return s=[...l!=null?l:[],...(h=n[Ri.FirstParty])!=null?h:[],...(x=n[Ri.SidebarKeep])!=null?x:[],...a!=null?a:[],...e?d:[]],o=[...i!=null?i:[],...c!=null?c:[]],{topGizmos:s,remainingGizmos:o}}function GB(t){const e=JSON.stringify(t.map(s=>[s.id,s.title,s.update_time]));return _.useMemo(()=>t,[e])}const E8e="starred-conversations",T8e=1;function M8e({activeId:t}){var a;const e=Oz(E8e,T8e,kc().queryKey),{data:n,isLoading:s}=rt(U(w({},kc()),{placeholderData:e})),o=GB((a=n==null?void 0:n.map(i=>i.item))!=null?a:[]);return!s&&o.length===0?null:s?r.jsxs(Ed,{children:[r.jsx(xo,{}),r.jsx(xo,{})]}):o.map(i=>r.jsx(F1,{conversation:i,isActive:t===i.id,isStarred:!0},i.id))}const A8e=5;function WB(t){"use forget";const e=W.c(9),{activeId:n,items:s,hasNextPage:o,infiniteScrollTriggerElementRef:a,hideOverflowMenu:i,onSelect:l}=t;let c;e[0]!==n||e[1]!==o||e[2]!==i||e[3]!==a||e[4]!==s||e[5]!==l?(c=s.map((f,m)=>{var p;const g=o&&((p=s[s.length-A8e-1])==null?void 0:p.id)===f.id?a:void 0;return r.jsx(F1,{conversation:f,hideOverflowMenu:i,isActive:n===f.id,elementRef:g,testId:"history-item-".concat(m),onSelect:l},f.id)}),e[0]=n,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=c):c=e[6];let d;return e[7]!==c?(d=r.jsx(r.Fragment,{children:c}),e[7]=c,e[8]=d):d=e[8],d}const q7=Se({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function I8e(t){"use forget";const e=W.c(60),{activeId:n,hideOverflowMenu:s}=t,o=V(),a=It(),[i,l]=_.useState(!1),[c,d]=_.useState(0),u=Dz(),[f,m]=_.useState(!1),g=I4e(),p=gN(),{conversations:h,hasNextPage:x,fetchNextPage:v,isLoading:y,isFetchingNextPage:b,isError:C}=Dh(),S=GB(h);let E;e[0]!==x||e[1]!==y||e[2]!==v?(E=ke=>{if(y||ke==null)return;const Le=new IntersectionObserver(De=>{De[0].isIntersecting&&x&&v()});return Le.observe(ke),()=>{Le.disconnect()}},e[0]=x,e[1]=y,e[2]=v,e[3]=E):E=e[3];const k=E;let T,M;e[4]!==S?(T=()=>{ai.publish({kind:"refreshHistory",conversations:S})},M=[S],e[4]=S,e[5]=T,e[6]=M):(T=e[5],M=e[6]),_.useEffect(T,M);let A,I;e[7]!==o||e[8]!==a?(A=()=>Fz(o,"conversations").onMessage(Le=>{Le.type==="conversation-turn-complete"&&ve(o,"1163864876")&&Xs(a,Le.payload.conversation_id)}),I=[o,a],e[7]=o,e[8]=a,e[9]=A,e[10]=I):(A=e[9],I=e[10]),_.useEffect(A,I);const N=S;let L,O;e[11]!==c||e[12]!==u?(L=()=>{const ke=Bz(Uz(),Date.now());u(()=>{d(c+1)},ke+1e3)},O=[c,u],e[11]=c,e[12]=u,e[13]=L,e[14]=O):(L=e[13],O=e[14]),_.useEffect(L,O);const D=N.length===0;xa.markStart("History",xa.NS_SIDEBAR);const $=st(o);let H;e[15]!==o?(H=ve(o,"2560369700"),e[15]=o,e[16]=H):H=e[16];const G=H;$!=null&&!y&&xa.markRendered("History",xa.NS_SIDEBAR);let Q;e[17]!==g?(Q=g!=null&&g.kind==="conversation"&&g.gizmoId!=null&&js(g.gizmoId),e[17]=g,e[18]=Q):Q=e[18];const q=Q,Y=y||C||D,te=_.useRef(0),ae=Y&&"h-full items-center justify-center empty:hidden",se=f&&"opacity-50";let ce;e[19]!==ae||e[20]!==se?(ce=z(ae,se),e[19]=ae,e[20]=se,e[21]=ce):ce=e[21];let X;e[22]!==q?(X=ke=>{ke.preventDefault(),q&&m(!0)},e[22]=q,e[23]=X):X=e[23];let ee;e[24]!==q||e[25]!==g||e[26]!==p?(ee=ke=>{var Le;ke.preventDefault(),q&&(te.current=0,m(!1),p({newGizmoId:null,conversation:g.conversation,previousGizmoId:(Le=g.gizmoId)!=null?Le:null}))},e[24]=q,e[25]=g,e[26]=p,e[27]=ee):ee=e[27];let ie,de;e[28]!==q?(ie=ke=>{ke.preventDefault(),q&&(te.current=te.current+1)},de=ke=>{ke.preventDefault(),q&&(te.current=te.current-1,te.current===0&&m(!1))},e[28]=q,e[29]=ie,e[30]=de):(ie=e[29],de=e[30]);let me;e[31]!==D||e[32]!==y?(me=D&&y&&r.jsx(Ed,{children:r.jsx(ws,{className:"m-auto"})}),e[31]=D,e[32]=y,e[33]=me):me=e[33];let xe;e[34]!==i||e[35]!==D||e[36]!==C||e[37]!==a?(xe=D&&C&&r.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[r.jsx(j,w({},q7.unableToLoadHistory)),!i&&r.jsx("div",{className:"mt-1",children:r.jsx(ye,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{l(!0),Xs(a)},children:r.jsx(j,w({},q7.retryButton))})})]}),e[34]=i,e[35]=D,e[36]=C,e[37]=a,e[38]=xe):xe=e[38];let pe;e[39]!==n||e[40]!==x||e[41]!==s||e[42]!==k||e[43]!==D||e[44]!==y||e[45]!==N||e[46]!==G?(pe=!y&&!D&&r.jsxs(r.Fragment,{children:[G&&r.jsx(M8e,{activeId:n}),r.jsx(WB,{activeId:n,hasNextPage:x,items:N,infiniteScrollTriggerElementRef:k,hideOverflowMenu:s})]}),e[39]=n,e[40]=x,e[41]=s,e[42]=k,e[43]=D,e[44]=y,e[45]=N,e[46]=G,e[47]=pe):pe=e[47];let Me;e[48]!==b?(Me=b&&r.jsxs("div",{className:"mb-5",children:[r.jsx(xo,{}),r.jsx(xo,{}),r.jsx(xo,{})]}),e[48]=b,e[49]=Me):Me=e[49];let Ce;return e[50]!==ce||e[51]!==X||e[52]!==ee||e[53]!==ie||e[54]!==de||e[55]!==me||e[56]!==xe||e[57]!==pe||e[58]!==Me?(Ce=r.jsxs("div",{id:"history",className:ce,onDragOver:X,onDrop:ee,onDragEnter:ie,onDragLeave:de,children:[me,xe,pe,Me]}),e[50]=ce,e[51]=X,e[52]=ee,e[53]=ie,e[54]=de,e[55]=me,e[56]=xe,e[57]=pe,e[58]=Me,e[59]=Ce):Ce=e[59],Ce}const Wet=Yn.memo(I8e);function zet({showRetry:t,refetch:e}){return r.jsxs("div",{className:"text-token-text-tertiary mt-5 p-3 text-center italic",children:[r.jsx(j,w({},Kt.unableToLoadHistory)),t&&r.jsx("div",{className:"mt-1",children:r.jsx(ye,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{e(!0)},children:r.jsx(j,w({},Kt.retryLoadingHistory))})})]})}function j8e(t){return r.jsx(kr,{side:"right",sideOffset:-4,alignOffset:-7,size:"auto",triggerButton:r.jsx(U3,{as:"div",icon:t.icon,label:t.label,highlightTrailing:t.highlightTrailing}),children:r.jsx("div",{className:"max-h-[50dvh] max-w-(--sidebar-width) overflow-x-auto [scrollbar-gutter:stable]",children:r.jsx(Ed,{children:t.children})})})}const N8e=R(()=>P(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([149,1])),{loading:t=>F(t)});function qet({currentGizmoId:t}){return r.jsx(j8e,{label:r.jsx(j,w({},Kt.seeMoreProjectItems)),icon:N8e,children:r.jsx(Ex,{currentGizmoId:t,inSidebarFlyout:!0})})}const P8e=768,R8e=320,L8e=140,hg=8,O8e=12;function D8e(t,e,n){const[s,o]=_.useState(null),[a,i]=_.useState(!1),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),u=()=>{var p,h,x,v,y;const f=e.current;if(!f)return;let m=null;if(t){const b='nav a[href*="/c/'.concat(t,'"]'),C=document.querySelector(b);if(C&&(m=C.getBoundingClientRect()),m&&(m.bottom<=0||m.top>=window.innerHeight)){o(null);return}}if(m||(m=((p=document.querySelector("nav"))!=null?p:f).getBoundingClientRect()),window.matchMedia("(max-width: ".concat(P8e,"px)")).matches){const b=(x=(h=n.current)==null?void 0:h.getBoundingClientRect().width)!=null?x:R8e,C=(y=(v=n.current)==null?void 0:v.getBoundingClientRect().height)!=null?y:L8e,S=m.left+m.width/2-b/2,E=Math.max(hg,Math.min(S,window.innerWidth-b-hg)),k=m.top-C-hg,T=Math.max(hg,k);i(!0),o({top:T,left:E})}else{const b=m.top+m.height/2,C=m.right+O8e;i(!1),o({top:b,left:C})}};return Jn(()=>{u();const f=()=>{l.current&&cancelAnimationFrame(l.current),l.current=requestAnimationFrame(u)},m=()=>{f()};window.addEventListener("resize",m),window.addEventListener("scroll",m,!0);const g=document.querySelector("nav");if(g&&typeof MutationObserver<"u"){const p=new MutationObserver(()=>f());p.observe(g,{childList:!0,subtree:!0}),c.current=p}if(typeof ResizeObserver<"u"){const p=new ResizeObserver(()=>f());g&&p.observe(g),n.current&&p.observe(n.current),d.current=p}return()=>{window.removeEventListener("resize",m),window.removeEventListener("scroll",m,!0),l.current&&cancelAnimationFrame(l.current),c.current&&(c.current.disconnect(),c.current=null),d.current&&(d.current.disconnect(),d.current=null)}},[t]),{pos:s,isMobileAbove:a,remeasure:u}}function F8e({conversationId:t,children:e,onClose:n,clickOutsideToClose:s=!1,onVisibilityChange:o=()=>{}}){const[a,i]=_.useState(!1),l=ne(),c=_.useRef(null),d=_.useRef(null),u=$z(),{pos:f,isMobileAbove:m}=D8e(t,c,d);Jn(()=>{u||Ln.setSidebarOpen(!0)},[u]),Jn(()=>{if(!s)return;const x=v=>{const y=d.current;y&&v.target instanceof Node&&!y.contains(v.target)&&n()};return document.addEventListener("mousedown",x,!0),()=>document.removeEventListener("mousedown",x,!0)},[n,s]),Jn(()=>{if(!f)return;i(!1);const x=requestAnimationFrame(()=>i(!0));return()=>cancelAnimationFrame(x)},[f]);const g=va(o);_.useEffect(()=>{const x=!!f;g==null||g(x)},[f,g]);const p=r.jsx("span",{ref:c,role:"presentation",style:{display:"none"}});if(!f)return p;const h=r.jsxs("div",{ref:d,style:{position:"fixed",top:f.top,left:f.left,zIndex:1e3},className:"border-token-border-light relative max-h-[60vh] max-w-md transform rounded-lg border bg-blue-500 p-4 text-sm text-white shadow-2xl transition-opacity duration-200 "+(m?"":"-translate-y-1/2")+(a?" opacity-100":" opacity-0"),children:[r.jsx(xn,{onClick:n,className:"absolute end-2 top-2 text-white hover:bg-blue-400/20! hover:text-white",bg:"transparent","aria-label":l.formatMessage({id:"n7Yh10",defaultMessage:"Close survey"})}),m?r.jsx("div",{className:"border-token-border-light absolute start-4 -bottom-2 h-4 w-4 rotate-45 border bg-blue-500"}):r.jsx("div",{className:"border-token-border-light absolute -start-2 top-1/2 h-4 w-4 -translate-y-1/2 rotate-45 border bg-blue-500"}),e]});return r.jsxs(r.Fragment,{children:[p,sr.createPortal(h,document.body)]})}const B8e=5;function Yet(){"use forget";const t=W.c(6),e=V();let n;t[0]!==e?(n=ve(e,"3324471394"),t[0]=e,t[1]=n):n=t[1];const s=n;let o,a;if(t[2]!==s?(o=()=>{s||GM()},a=[s],t[2]=s,t[3]=o,t[4]=a):(o=t[3],a=t[4]),_.useEffect(o,a),!s)return null;let i;return t[5]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(U8e,{}),t[5]=i):i=t[5],i}function U8e(){"use forget";const t=W.c(48),{survey:e,finishSurvey:n}=pK(),{conversations:s}=Dh(),o=V();hK();const a=!re($8e),i=_.useRef(null);let l,c;if(t[0]!==s||t[1]!==e){const G=(Array.isArray(s)?s:[]).slice(0,B8e);l=Boolean,c=e&&G.some(Z=>(Z==null?void 0:Z.id)===(e==null?void 0:e.conversation_id)),t[0]=s,t[1]=e,t[2]=l,t[3]=c}else l=t[2],c=t[3];const d=l(c),u=!(e!=null&&e.survey_display_type)||e.survey_display_type==="CONVERSATION_COACHMARK",f=!(e!=null&&e.trigger_event_type)||e.trigger_event_type==="NEW_CHAT_CLICK",m=!!(e!=null&&e.content),g=!!(e&&d&&m&&u&&f&&!a);let p;t[4]!==g||t[5]!==e?(p=()=>{if(!g||!(e!=null&&e.conversation_id))return;const H='nav a[href*="/c/'.concat(e.conversation_id,'"]'),G=document.querySelector(H);if(G)return G.classList.add("ring-2","ring-blue-500","rounded-md"),()=>{G.classList.remove("ring-2","ring-blue-500","rounded-md")}},t[4]=g,t[5]=e,t[6]=p):p=t[6];const h=e==null?void 0:e.conversation_id;let x;t[7]!==g||t[8]!==h?(x=[g,h],t[7]=g,t[8]=h,t[9]=x):x=t[9],Jn(p,x);let v;t[10]!==o||t[11]!==e?(v=H=>{var Q;if(!H||!e)return;const G=e.conversation_id,Z=e.survey_election_id;!G||!Z||i.current!==Z&&(Gte({survey_campaign_name:e.survey_campaign_name,survey_election_id:Z},G),ri(o,"chatgpt_survey_seen",void 0,{survey_campaign_name:String((Q=e.survey_campaign_name)!=null?Q:""),survey_election_id:Z,conversation_id:G}),i.current=Z)},t[10]=o,t[11]=e,t[12]=v):v=t[12];const y=v;if(!g||!e)return null;const{conversation_id:b}=e,C=e.content;let S;t[13]!==C.answers?(S=Array.isArray(C==null?void 0:C.answers)?C.answers:[],t[13]=C.answers,t[14]=S):S=t[14];const E=S;let k;t[15]!==o?(k=H=>{var G,Z,Q,q;Hte({survey_campaign_name:H.campaign_name,survey_election_id:H.election_id,question_id:void 0,question_text:(G=H.question)!=null?G:null,answer_id:H.answer_id,answer_text:(Z=H.answer_text)!=null?Z:null,tags:null},H.conversation_id),ri(o,"chatgpt_survey_response",void 0,{survey_campaign_name:H.campaign_name,survey_election_id:H.election_id,conversation_id:H.conversation_id,question_text:(Q=H.question)!=null?Q:"",answer_id:H.answer_id,answer_text:(q=H.answer_text)!=null?q:""})},t[15]=o,t[16]=k):k=t[16];const T=k;let M;t[17]!==o?(M=H=>{var G,Z;Wte({survey_campaign_name:H.campaign_name,survey_election_id:H.election_id},H.conversation_id),ri(o,"chatgpt_survey_dismissed",void 0,{survey_campaign_name:String((G=H.campaign_name)!=null?G:""),survey_election_id:String((Z=H.election_id)!=null?Z:""),conversation_id:H.conversation_id})},t[17]=o,t[18]=M):M=t[18];const A=M,I=e.conversation_id;let N;t[19]!==A||t[20]!==n||t[21]!==e?(N=()=>{e&&A({conversation_id:e.conversation_id,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name}),n()},t[19]=A,t[20]=n,t[21]=e,t[22]=N):N=t[22];let L;t[23]!==C.question?(L=r.jsx("div",{className:"mb-3 pe-8 font-medium break-words",children:C.question}),t[23]=C.question,t[24]=L):L=t[24];let O;if(t[25]!==E||t[26]!==C.question||t[27]!==b||t[28]!==n||t[29]!==T||t[30]!==e.survey_campaign_name||t[31]!==e.survey_election_id){let H;t[33]!==C.question||t[34]!==b||t[35]!==n||t[36]!==T||t[37]!==e.survey_campaign_name||t[38]!==e.survey_election_id?(H=G=>r.jsx("button",{className:"rounded-full border border-gray-300 bg-white px-4 py-2 font-medium whitespace-nowrap text-black hover:bg-gray-100",onClick:()=>{T({conversation_id:b,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name,question:C.question,answer_id:G.answer_id,answer_text:G.text}),n()},children:G.text},G.answer_id),t[33]=C.question,t[34]=b,t[35]=n,t[36]=T,t[37]=e.survey_campaign_name,t[38]=e.survey_election_id,t[39]=H):H=t[39],O=E.map(H),t[25]=E,t[26]=C.question,t[27]=b,t[28]=n,t[29]=T,t[30]=e.survey_campaign_name,t[31]=e.survey_election_id,t[32]=O}else O=t[32];let D;t[40]!==O?(D=r.jsx("div",{className:"flex gap-2",children:O}),t[40]=O,t[41]=D):D=t[41];let $;return t[42]!==y||t[43]!==e.conversation_id||t[44]!==N||t[45]!==L||t[46]!==D?($=r.jsxs(F8e,{conversationId:I,onClose:N,onVisibilityChange:y,children:[L,D]}),t[42]=y,t[43]=e.conversation_id,t[44]=N,t[45]=L,t[46]=D,t[47]=$):$=t[47],$}function $8e(){return Fh()}const Zet=s=>{var o=s,{className:t,children:e}=o,n=we(o,["className","children"]);const a=_.useRef(null),i=_.useCallback(()=>{const l=a.current;l&&(or(l,"data-scrolled-from-top",l.scrollTop>0),or(l,"data-scrolled-from-end",l.scrollTop<l.scrollHeight-l.clientHeight-1))},[]);return _.useEffect(()=>{const l=a.current;if(!l)return;const c=new ResizeObserver(i);return c.observe(l),()=>c.disconnect()},[i]),_.useEffect(()=>{setTimeout(()=>{i()},500)},[]),r.jsx("nav",U(w({className:z("group/scrollport",t),onScroll:i,ref:a},n),{children:e}))},V8e=R(()=>P(()=>Promise.resolve().then(()=>w4),void 0),{loading:t=>F(t)}),H8e=R(()=>P(()=>import("./dtild1iosocbgwoy.js"),__vite__mapDeps([141,1])),{loading:t=>F(t)}),G8e=R(()=>P(()=>Promise.resolve().then(()=>H3e),void 0).then(t=>t.AdminInviteModal));function W8e(t){"use forget";const e=W.c(8),{location:n}=t,s=V(),o=Sn();let a;e[0]!==s||e[1]!==o||e[2]!==n?(a=()=>{o&&(B.logEvent("Account: Invite Member Button Clicked",{eventSource:"mouse",location:n}),Cr(s).logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:n,text:"AddTeammates",step:"OpenModal"}),dt(s,G8e,{workspace:o}))},e[0]=s,e[1]=o,e[2]=n,e[3]=a):a=e[3];const i=a;let l,c;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(H8e,{className:"icon-sm","aria-hidden":"true"}),c=r.jsx(j,{id:"inviteMemberButton.inviteMemberSidebarFooterCap",defaultMessage:"Invite team members"}),e[4]=l,e[5]=c):(l=e[4],c=e[5]);let d;return e[6]!==i?(d={icon:l,label:c,onClick:i},e[6]=i,e[7]=d):d=e[7],d}function z8e(t){"use forget";const e=W.c(7),{location:n}=t,s=at();let o;e[0]!==n||e[1]!==s?(o=()=>{pn(s,n)},e[0]=n,e[1]=s,e[2]=o):o=e[2];const a=o;let i,l;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(V8e,{className:"icon-sm text-[#5856D6] dark:text-[#DCDBF6]","aria-hidden":"true"}),l=r.jsx(j,w({},gt.upgradeYourPlan)),e[3]=i,e[4]=l):(i=e[3],l=e[4]);let c;return e[5]!==a?(c={icon:i,label:l,labelClassName:"text-[#5856D6] dark:text-[#DCDBF6]",onClick:a},e[5]=a,e[6]=c):c=e[6],c}function zB(t,e){"use forget";const n=W.c(4),{location:s}=e;let o;n[0]!==s?(o={location:s},n[0]=s,n[1]=o):o=n[1];const a=W8e(o);let i;n[2]!==s?(i={location:s},n[2]=s,n[3]=i):i=n[3];const l=z8e(i);return t==="invite"?a:l}const q8e=R(()=>P(()=>import("./up4p8fwl1sob5zne.js"),__vite__mapDeps([384,1])),{loading:t=>F(t)});function Ket(t){"use forget";const e=W.c(18),{variant:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={location:"sidebar footer cap above user menu"},e[0]=s):s=e[0];const{icon:o,label:a,onClick:i}=zB(n,s);let l,c;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=z("sm:bg-primary relative rounded-t-2xl bg-white/80 sm:bg-transparent","sm:backdrop-blur-0 backdrop-blur-sm","group-data-scrolled-from-end/scrollport:shadow-[0_-20px_40px_rgba(0,0,0,0.04)]","sm:group-data-scrolled-from-end/scrollport:shadow-[0_-20px_40px_rgba(0,0,0,0.08)]","motion-safe:transition-shadow motion-safe:duration-150 motion-safe:ease-out"),c=r.jsx("div",{className:"l-0 r-0 bg-token-bg-elevated-secondary pointer-events-none absolute top-[-175px] z-0 hidden h-[200px] w-full [mask-image:linear-gradient(180deg,transparent_33.62%,black_100%)] opacity-0 [-webkit-mask-image:linear-gradient(180deg,transparent_33.62%,black_100%)] group-data-scrolled-from-end/scrollport:opacity-100 motion-safe:transition-opacity motion-safe:duration-150 motion-safe:ease-out sm:block"}),e[1]=l,e[2]=c):(l=e[1],c=e[2]);let d;e[3]!==i?(d=x=>{(x.key==="Enter"||x.key===" ")&&i()},e[3]=i,e[4]=d):d=e[4];let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=z("group sm:bg-token-main-surface-primary text-token-text-primary hover:bg-token-main-surface-secondary relative z-10 flex w-full items-center justify-between rounded-t-2xl","py-3 ps-4 pe-4 text-xs","border-token-border-default border border-[.5px] p-2","focus-visible:ring-token-text-tertiary focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","motion-safe:transition-colors motion-safe:duration-150"),e[5]=u):u=e[5];let f;e[6]!==o?(f=r.jsx("span",{children:o}),e[6]=o,e[7]=f):f=e[7];let m;e[8]!==a?(m=r.jsx("span",{children:a}),e[8]=a,e[9]=m):m=e[9];let g;e[10]!==f||e[11]!==m?(g=r.jsxs("span",{className:"flex items-center gap-3",children:[f,m]}),e[10]=f,e[11]=m,e[12]=g):g=e[12];let p;e[13]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(q8e,{className:"icon-xs text-token-text-primary","aria-hidden":"true"}),e[13]=p):p=e[13];let h;return e[14]!==i||e[15]!==d||e[16]!==g?(h=r.jsxs("div",{className:l,children:[c,r.jsxs("div",{role:"button",tabIndex:0,onClick:i,onKeyDown:d,className:u,children:[g,p]})]}),e[14]=i,e[15]=d,e[16]=g,e[17]=h):h=e[17],h}function Qet(t){"use forget";const e=W.c(12),{variant:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={location:"sidebar, below user menu"},e[0]=s):s=e[0];const{icon:o,label:a,onClick:i,labelClassName:l}=zB(n,s);let c;e[1]!==i?(c=m=>{(m.key==="Enter"||m.key===" ")&&i()},e[1]=i,e[2]=c):c=e[2];let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=z("border-token-interactive-border-secondary-default flex w-full items-center justify-center gap-1","bg-token-main-surface-primary rounded-full border px-3 py-2","text-xs font-medium","hover:bg-token-interactive-bg-secondary-hover","focus-visible:ring-2 focus-visible:ring-[#5856D6] focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","motion-safe:transition-colors motion-safe:duration-150 motion-safe:ease-out"),e[3]=d):d=e[3];let u;e[4]!==a||e[5]!==l?(u=r.jsx("span",{className:l,children:a}),e[4]=a,e[5]=l,e[6]=u):u=e[6];let f;return e[7]!==o||e[8]!==i||e[9]!==c||e[10]!==u?(f=r.jsx("div",{className:"px-3.5 pt-1 pb-3",children:r.jsxs("button",{type:"button",onClick:i,onKeyDown:c,className:d,children:[o,u]})}),e[7]=o,e[8]=i,e[9]=c,e[10]=u,e[11]=f):f=e[11],f}const Y8e=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)}),Z8e=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),K8e=()=>rt({queryKey:["userSurvey"],queryFn:()=>ge.safeGet("/user_surveys/active")}),Q8e=()=>{const t=It();return qt({mutationFn:({surveyId:e,reason:n})=>ge.safePost("/user_surveys/{survey_id}/complete",{parameters:{path:{survey_id:e}},requestBody:{reason:n}}),onSuccess:()=>{t.invalidateQueries({queryKey:["userSurvey"]})}})};function Jet(){const t=ne(),[e,n]=_.useState(!1),{mutate:s}=Q8e(),{data:o}=K8e(),a=o==null?void 0:o.survey,i=c=>{n(!0),a!=null&&s({surveyId:a.id,reason:c})};return!e&&a!=null?r.jsx("div",{className:"bg-brand-blue-800 mx-1.5 rounded-lg",children:r.jsxs("div",{className:"flex flex-col gap-3 p-3 text-sm text-white",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"font-bold text-wrap",children:r.jsx(j,{id:"navigation.survey.title",defaultMessage:"We are asking a small group of people for their opinion"})}),r.jsx("button",{className:"text-white/25 hover:text-white/40",onClick:()=>i("dismissed"),"aria-label":t.formatMessage({id:"navigation.survey.dismiss",defaultMessage:"Dismiss survey"}),children:r.jsx(Z8e,{className:"icon"})})]}),r.jsx("div",{className:"text-wrap",children:r.jsx(j,{id:"navigation.survey.description",defaultMessage:"Could you spare few minutes to take a short survey?"})}),r.jsxs("a",{href:a.link,target:"_blank",className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-sm bg-white/25 p-2 hover:bg-white/40",rel:"noreferrer",onClick:()=>i("link_clicked"),children:[r.jsx(Y8e,{className:"icon-sm"}),r.jsx(j,{id:"navigation.survey.takeSurvey",defaultMessage:"Take survey"})]})]})}):null}const J8e="{{.assetPrefix}}/assets/team-upsell-landscape-ee106ppw.webp",X8e={src:J8e};function Xet(){const t=V(),e=!tt(t),n=Ps(t,"2210309751").get("variant","control"),s=Eo(),[o]=ki(Ue.HasDismissedTeamsNoAuthUpsell,!1,h1),a=!s&&e&&n==="front-door"&&!o;ve(t,"676035580");const[i,l]=_.useState(()=>_t.getItem(Ue.HasDismissedTeamsNoAuthUpsell)!==!0),c=at(),d=J8(),u=()=>{l(!1),_t.setItem(Ue.HasDismissedTeamsNoAuthUpsell,!0)},f=()=>{u(),c({hash:Zf,search:window.location.search},{state:{[d1]:"Teams no-auth upsell announcement"}})};return!a||!i?null:r.jsx(Tl,{open:i,modal:!1,children:r.jsx(Ml,{container:d==null?void 0:d.document.body,children:r.jsxs("div",{className:"bg-token-bg-primary popover border-token-border-default bg-primary fixed end-4 bottom-4 z-100 flex w-full max-w-sm flex-col gap-3 overflow-hidden rounded-2xl border shadow-xl",children:[r.jsx("img",{className:"h-[147px] object-cover",src:X8e.src,alt:""}),r.jsxs("div",{className:"flex flex-col px-6 py-5",children:[r.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:r.jsx(j,w({},_g.teamsNoAuthUpsellTitle))}),r.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:r.jsx(j,w({},_g.teamsNoAuthUpsellDescription))}),r.jsxs("div",{className:"mt-5 flex flex-row justify-start space-x-2",children:[r.jsx(ye,{as:"button",color:"primary",onClick:f,children:r.jsx(j,w({},_g.getTeam))}),!1,r.jsx(ye,{as:"button",color:"secondary",onClick:u,children:r.jsx(j,w({},_g.notNow))})]})]})]})})})}const _g=Se({teamsNoAuthUpsellTitle:{id:"TeamsNoAuthUpsell.title",defaultMessage:"A shared space for teams"},teamsNoAuthUpsellDescription:{id:"TeamsNoAuthUpsell.description",defaultMessage:"Supercharge your team's work with a shared workspace, admin controls, and connectors to your company tools."},getTeam:{id:"TeamsNoAuthUpsell.getTeam",defaultMessage:"Get Business"},notNow:{id:"TeamsNoAuthUpsell.notNow",defaultMessage:"Not now"}});function eMe(t,e){return"/checkout/".concat(t,"/").concat(e)}class tMe{static async getCheckoutLink(e,n){return ge.safePost("/payments/checkout",{requestBody:e,additionalHeaders:Ev(null,null,null,n!=null&&n.skipSentinelCheckout?void 0:await XM("chatgpt_checkout",{sdkVariant:n!=null&&n.fromiOSWebview?"openai":"chatgpt"}).catch(s=>{Fe.addError(s)}))})}static async fetchExistingCheckoutSession(e,n){return await ge.safeGet("/payments/checkout/{processor_entity}/{checkout_session_id}",{parameters:{path:{processor_entity:e,checkout_session_id:n}}})}}const nMe="3950229590",sMe="enabled_custom_checkout_for_plus",oMe="enabled_custom_checkout_for_go",aMe="enabled_custom_checkout_for_pro",rMe="enabled_custom_checkout_for_team",iMe="is_checkout_redesign",lMe="checkoutRedesignExposureLogged",Y7="chatgpt_web_checkout_navigate_to_checkout",cMe="chatgpt_web_checkout_prepare_checkout_session";function qB(t,{shouldLogExposure:e=!0}={}){return ze(t,nMe,{disableExposureLog:!e})}function dMe({ctx:t,shouldLogExposure:e=!0}){return qB(t,{shouldLogExposure:e}).get(iMe,!1)}function uMe(t){switch(t){case Rm.PLUS:return sMe;case Rm.GO:return oMe;case Rm.PRO:return aMe;case Rm.SELF_SERVE_BUSINESS:return rMe;default:return null}}function fMe(t,e){if(ve(t,"3990391703"))return"redirect";const n=uMe(e);return n==null?"redirect":qB(t).get(n,!1)?"custom":"redirect"}function ett(){"use forget";const t=W.c(11),e=at(),n=V();let s;t[0]!==n?(s=async function(f){const m=f===void 0?1e3:f,g=Cr(n);await Promise.race([g.flush(),new Promise(p=>setTimeout(p,m))])},t[0]=n,t[1]=s):s=t[1];const o=s;let a;t[2]!==n?(a=async function(f,m){var g;return f.checkout_ui_mode=(g=f.checkout_ui_mode)!=null?g:(m==null?void 0:m.fromiOSWebview)===!0?"redirect":fMe(n,f.plan_name),ri(n,{eventName:cMe,metadata:{ui_mode:f.checkout_ui_mode}}),await tMe.getCheckoutLink(f,{skipSentinelCheckout:m==null?void 0:m.skipSentinelCheckout,fromiOSWebview:m==null?void 0:m.fromiOSWebview})},t[2]=n,t[3]=a):a=t[3];const i=a;let l;t[4]!==n||t[5]!==o||t[6]!==e?(l=async function(f,m){var g;if("tag"in f){ri(n,{eventName:Y7,metadata:{tag:f.tag}}),await o();e:switch(f.tag){case"hosted_checkout_session":case"redirect_to_portal":{window.location.href=f.url;break e}case"custom_checkout_session":{const p=f.processor_entity,h=f.checkout_session_id;await e({pathname:eMe(p,h),search:(g=m==null?void 0:m.searchParams)!=null?g:"",hash:""},{state:U(w({},m==null?void 0:m.state),{[lMe]:!0})})}}}else if(f.url)ri(n,{eventName:Y7,metadata:{tag:"missing_tag"}}),await o(),window.location.href=f.url;else throw new Error("Received invalid response from /checkout")},t[4]=n,t[5]=o,t[6]=e,t[7]=l):l=t[7];const c=l;let d;return t[8]!==c||t[9]!==i?(d={prepareCheckoutSession:i,navigateToCheckout:c},t[8]=c,t[9]=i,t[10]=d):d=t[10],d}const mMe=({onDismiss:t})=>{const e=ne();_.useEffect(()=>{qe.logEvent("chatgpt_web_mobile_app_upsell_banner_shown"),B.logEvent("Mobile App Upsell Banner Shown")},[]);const n=()=>{localStorage.setItem(Ue.HasDismissedMobileAppUpsellBanner,"true"),t==null||t(),qe.logEvent("chatgpt_web_mobile_app_upsell_banner_dismissed"),B.logEvent("Mobile App Upsell Banner Dismissed")},s=()=>{window.open("https://apps.apple.com/us/app/chatgpt/id6448311069","_blank"),qe.logEvent("chatgpt_web_mobile_app_upsell_banner_clicked"),B.logEvent("Mobile App Upsell Banner Clicked")};return r.jsx(UR,{title:e.formatMessage({id:"mobileTopBanner.title",defaultMessage:"ChatGPT"}),content:e.formatMessage({id:"mobileTopBanner.content",defaultMessage:"The official app by OpenAI"}),secondaryCtaText:e.formatMessage({id:"mobileTopBanner.secondaryCtaText",defaultMessage:"Open"}),onDismiss:n,onSecondaryCtaClick:s})};function gMe(t){const e=encodeURIComponent(t);return"https://wa.me/18002428478?text=".concat(e)}function pMe({onDismiss:t}){const e=ne(),n=e.formatMessage({id:"moodengUpsellBanner.prefilledMessage",defaultMessage:"Hey ChatGPT, can you tell me a little bit more about what you can do?"}),s=()=>{B.logEventWithStatsig("Moodeng Upsell Banner Clicked","chatgpt_web_moodeng_upsell_banner_clicked"),window.open(gMe(n),"_blank")},o=()=>{localStorage.setItem(Ue.HasDismissedMoodengUpsellBanner,"true"),t==null||t(),B.logEventWithStatsig("Moodeng Upsell Banner Dismissed","chatgpt_web_moodeng_upsell_banner_dismissed")};return _.useEffect(()=>{B.logEventWithStatsig("Moodeng Upsell Banner Shown","chatgpt_web_moodeng_upsell_banner_shown")},[]),r.jsx(UR,{title:e.formatMessage({id:"moodengUpsellBanner.title",defaultMessage:"Chat on WhatsApp"}),content:e.formatMessage({id:"moodengUpsellBanner.content",defaultMessage:"Supported by OpenAI"}),secondaryCtaText:e.formatMessage({id:"moodengUpsellBanner.secondaryCtaText",defaultMessage:"Try Now"}),onSecondaryCtaClick:s,onDismiss:o})}function ttt(){var v;const t=V(),e=Vn(),n=Eo(),s=Vz(),[o,a]=_.useState(!1),[i,l]=_.useState(()=>localStorage.getItem(Ue.HasDismissedMobileAppUpsellBanner)==="true"),[c,d]=_.useState(()=>localStorage.getItem(Ue.HasDismissedMoodengUpsellBanner)==="true"),u=ze(t,"3927927759"),f=e.pathname.split("/").filter(Boolean),m=f.length===3&&f[0]==="checkout";_.useEffect(()=>{if(!(typeof window>"u"))try{const y=sessionStorage.getItem(ESe);a(!!y)}catch(y){a(!1)}},[e.search]);const g=_.useMemo(()=>(()=>{if(!e.search)return!1;try{return!!new URLSearchParams(e.search).get(kSe)}catch(C){return!1}})()||o?!0:!m||!dMe({ctx:t,shouldLogExposure:!1})?!1:ze(t,"3950229590").get("suppress_native_download_banner",!1),[t,o,m,e.search]),h=_.useMemo(()=>[{Component:()=>r.jsx(mMe,{onDismiss:()=>{l(!0)}}),isVisible:()=>n&&s&&!i&&!g&&u.get("enable_mobile_app_upsell_banner",!1)},{Component:()=>r.jsx(pMe,{onDismiss:()=>{d(!0)}}),isVisible:()=>n&&!g&&!c&&u.get("enable_moodeng_upsell_banner",!1)}],[n,s,i,c,g,u]).find(y=>y.isVisible()),x=(v=h==null?void 0:h.Component)!=null?v:(()=>null);return r.jsx(x,{})}const hMe=1;function _Me(t){return t?new Date>X3(t,hMe):!0}function xMe(){const[t,e]=ki(Ue.SubscriptionFailedBanner,null,a=>typeof a=="number"),n=t!=null?Ei(t):null;return{canBeSeen:_Me(n),markSeen:()=>{e(ka(new Date))}}}var o2,Z7;function yMe(){if(Z7)return o2;Z7=1;var t=DR();function e(n,s,o){var a=n.length;return o=o===void 0?a:o,!s&&o>=a?n:t(n,s,o)}return o2=e,o2}var a2,K7;function YB(){if(K7)return a2;K7=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",o=e+n+s,a="\\ufe0e\\ufe0f",i="\\u200d",l=RegExp("["+i+t+o+a+"]");function c(d){return l.test(d)}return a2=c,a2}var r2,Q7;function vMe(){if(Q7)return r2;Q7=1;function t(e){return e.split("")}return r2=t,r2}var i2,J7;function bMe(){if(J7)return i2;J7=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",o=e+n+s,a="\\ufe0e\\ufe0f",i="["+t+"]",l="["+o+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",p=d+"?",h="["+a+"]?",x="(?:"+g+"(?:"+[u,f,m].join("|")+")"+h+p+")*",v=h+p+x,y="(?:"+[u+l+"?",l,f,m,i].join("|")+")",b=RegExp(c+"(?="+c+")|"+y+v,"g");function C(S){return S.match(b)||[]}return i2=C,i2}var l2,X7;function CMe(){if(X7)return l2;X7=1;var t=vMe(),e=YB(),n=bMe();function s(o){return e(o)?n(o):t(o)}return l2=s,l2}var c2,ek;function SMe(){if(ek)return c2;ek=1;var t=yMe(),e=YB(),n=CMe(),s=X8();function o(a){return function(i){i=s(i);var l=e(i)?n(i):void 0,c=l?l[0]:i.charAt(0),d=l?t(l,1).join(""):i.slice(1);return c[a]()+d}}return c2=o,c2}var d2,tk;function wMe(){if(tk)return d2;tk=1;var t=SMe(),e=t("toUpperCase");return d2=e,d2}var u2,nk;function kMe(){if(nk)return u2;nk=1;var t=X8(),e=wMe();function n(s){return e(t(s).toLowerCase())}return u2=n,u2}var EMe=kMe();const f2=Zn(EMe),TMe=R(()=>P(()=>import("./hahiy9dm7k71twz4.js"),__vite__mapDeps([385,1])),{loading:t=>F(t)}),MMe=({message:t,buttonText:e,buttonAction:n,iconAriaLabel:s,isDismissible:o,onDismiss:a})=>r.jsx("div",{className:"pointer-events-none fixed inset-x-4 top-2 z-50 flex justify-center",children:r.jsx(_n,{className:"pointer-events-auto bg-yellow-300 text-[16px] text-black",icon:r.jsx(TMe,{className:"icon-lg mt-1.5","aria-label":s}),content:t,customCtas:e?r.jsx("button",{onClick:n,className:"font-medium text-black underline dark:text-white",type:"button",children:e}):void 0,onDismiss:o?a:void 0})}),AMe=R(()=>P(()=>import("./hahiy9dm7k71twz4.js"),__vite__mapDeps([385,1])),{loading:t=>F(t)}),IMe=({title:t,message:e,buttonText:n,buttonAction:s,iconAriaLabel:o,isDismissible:a,onDismiss:i})=>r.jsxs("div",{className:"border-main-surface-secondary flex h-auto min-h-16 items-center justify-between bg-yellow-300 p-3 text-black dark:border-transparent",ref:l=>{const c=Hl({axis:"height",target:l,onChange({height:d}){document.documentElement.style.setProperty("--top-banner-height","".concat(d,"px"))}});return()=>{c==null||c(),document.documentElement.style.removeProperty("--top-banner-height")}},children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"px-2",children:r.jsx(AMe,{className:"icon-lg","aria-label":o})}),r.jsx("div",{className:"px-2",children:r.jsxs("div",{children:[t&&r.jsx("div",{className:"text-sm font-bold",children:t}),r.jsx("div",{className:z(t?"text-sm":""),children:e})]})})]}),r.jsxs("div",{className:"flex flex-none items-center gap-2 pe-4",children:[n&&r.jsx(ye,{onClick:s,color:"primary",className:"dark:bg-gray-950 dark:text-white",children:n}),a&&r.jsx(xn,{onClick:i,className:"hover:bg-black/10! dark:hover:bg-white/10!"})]})]}),jMe=7,Gs=Se({userTitle:{id:"SubscriptionRenewalFailedBanner.userTitle",defaultMessage:"Your workspace will be deactivated on {date}"},ownerTile:{id:"SubscriptionRenewalFailedBanner.ownerTitle",defaultMessage:"Unable to charge payment method for your Team subscription"},userMessage:{id:"SubscriptionRenewalFailedBanner.userMessage",defaultMessage:"Please contact your workspace admin to retain access to your account"},ownerMessage:{id:"SubscriptionRenewalFailedBanner.ownerMessage",defaultMessage:"We'll keep trying this method, or you can update it now. To continue accessing your workspace, please take action by {date}"},ownerButtonText:{id:"SubscriptionRenewalFailedBanner.ownerButtonText",defaultMessage:"Update"},iconAriaLabel:{id:"SubscriptionRenewalFailedBanner.iconAriaLabel",defaultMessage:"Warning"},personalTitle:{id:"SubscriptionRenewalFailedBanner.personalTitle",defaultMessage:"Unable to charge payment method for your {subscription} subscription"},personalDescriptionNoDate:{id:"SubscriptionRenewalFailedBanner.personalDescription",defaultMessage:"We're keeping your access active for now. To continue using {subscription}, please update your payment details."},personalDescriptionWithDate:{id:"SubscriptionRenewalFailedBanner.personalDescriptionWithDate",defaultMessage:"We're keeping your access active for now. To continue using {subscription}, please update your payment details by {date}."},personalMessageMobileNoDate:{id:"SubscriptionRenewalFailedBanner.personalMessageMobile",defaultMessage:"Subscription charge failed. Please update your payment method."},personalMessageMobileWithDate:{id:"SubscriptionRenewalFailedBanner.personalMessageMobileWithDate",defaultMessage:"Subscription charge failed. Please update your payment method by {date}."}});function NMe(t){t?document.documentElement.classList.add("top-banner-visible"):document.documentElement.classList.remove("top-banner-visible")}const ntt=t=>{"use forget";const e=W.c(2),n=V(),s=st(n),o=D3();if(!(s!=null&&s.hasPaidSubscription())||o.authStatus!==Vo.LoggedIn)return null;let a;return e[0]!==t?(a=r.jsx(PMe,w({},t)),e[0]=t,e[1]=a):a=e[1],a},PMe=({setIsVisible:t})=>{"use no forget";const e=ne(),n=at(),[s,o]=_.useState(!1),[a,i]=_.useState(!1),{data:l}=kF(),{canBeSeen:c,markSeen:d}=xMe(),u=Sn(),f=u==null?void 0:u.isStandardUserOfAccount(),m=bl(),g=l!=null&&l.plan_type===Ye.SELF_SERVE_BUSINESS,p=V(),h=l?RMe({ctx:p,planType:l.plan_type}):null,x=l!=null&&l.became_delinquent_timestamp?new Date(l.became_delinquent_timestamp):null,v=x!=null&&new Date>X3(x,g&&f?3:2),y=l!=null&&l.grace_period_end_timestamp!=null&&new Date(l.grace_period_end_timestamp)>new Date,b=l!=null&&!!l.is_delinquent&&y&&l.will_renew&&v,C=b&&g,S=!!(b&&c&&h&&h.get("include_banner_notifications",!1)),E=S&&l!=null&&l.grace_period_end_timestamp!=null&&Hz(new Date(l.grace_period_end_timestamp),jMe)<new Date,k=!!(S&&h&&h.get("is_banner_notification_dismissible",!1)),T=ve(p,"2293185713"),M=!m&&l!=null&&(C||S||T),A=Eo(),I=M&&(!A||k)&&!a,N=I&&!A,L=I&&A;M&&!I&&B.logEvent("Subscription Renewal Failed Banner Hidden On Mobile"),_.useEffect(()=>{I&&(g?f?B.logEventWithStatsig("Subscription Renewal Failed Banner Shown to User","chatgpt_web_subscription_renewal_failed_banner_shown_to_user"):B.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Owner","chatgpt_web_subscription_renewal_failed_banner_shown_to_owner"):B.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Personal User","chatgpt_web_subscription_renewal_failed_banner_shown_to_personal_user")),t==null||t(I)},[I,f,t,g]);const O=async()=>{o(!0);let te;try{te=(await ge.safeGet("/payments/customer_portal",{parameters:{query:{account_id:u==null?void 0:u.getWorkspaceId()}},intercomEventOnError:"fetch-error:customer_portal:get"})).url}catch(ae){te=window.location.origin+"/admin/billing"}finally{o(!1)}B.logEventWithStatsig("Subscription Renewal Failed Banner Owner Clicked","chatgpt_web_subscription_renewal_failed_banner_owner_clicked"),location.href=te},D=()=>{O().catch(()=>{})},$=()=>{B.logEventWithStatsig("Subscription Renewal Failed Banner Personal Manage Subscription CTA Clicked","chatgpt_web_subscription_renewal_failed_banner_personal_cta_clicked"),n("/account/manage")},H=l!=null&&l.grace_period_end_timestamp!=null?oB(e,new Date(l.grace_period_end_timestamp)):null;let G="",Z="",Q="",q;g?f?(G=e.formatMessage(Gs.userTitle,{date:H}),Z=e.formatMessage(Gs.userMessage)):(G=e.formatMessage(Gs.ownerTile),Z=e.formatMessage(Gs.ownerMessage,{date:H}),Q=e.formatMessage(Gs.ownerButtonText),q=D):(G=e.formatMessage(Gs.personalTitle,{subscription:f2(l==null?void 0:l.plan_type)}),Q=e.formatMessage(Gs.ownerButtonText),q=$,A?E?Z=e.formatMessage(Gs.personalMessageMobileWithDate,{date:H}):Z=e.formatMessage(Gs.personalMessageMobileNoDate):E?Z=e.formatMessage(Gs.personalDescriptionWithDate,{subscription:f2(l==null?void 0:l.plan_type),date:H}):Z=e.formatMessage(Gs.personalDescriptionNoDate,{subscription:f2(l==null?void 0:l.plan_type)})),NMe(N);const Y=()=>{B.logEventWithStatsig("Subscription Renewal Failed Banner Personal Dismissed","chatgpt_web_subscription_renewal_failed_banner_personal_dismissed"),d(),i(!0)};return I?L?r.jsx(MMe,{message:Z,buttonText:Q,buttonAction:q,iconAriaLabel:e.formatMessage(Gs.iconAriaLabel),isDismissible:k,onDismiss:Y}):r.jsx(IMe,{title:G,message:Z,buttonText:Q,buttonAction:q,iconAriaLabel:e.formatMessage(Gs.iconAriaLabel),isDismissible:k,onDismiss:Y}):null};function RMe({ctx:t,planType:e}){switch(e){case Ye.PLUS:return ze(t,"3850010910");case Ye.GO:return ze(t,"1445695849");case Ye.PRO:return ze(t,"2420067952");default:return null}}const LMe="_leadingBar_sbmq2_1",OMe="_leadingBarScrollAnimation_sbmq2_19",DMe="_trailingBar_sbmq2_23",FMe="_trailingBarScrollAnimation_sbmq2_41",BMe="_primary_sbmq2_45",uu={leadingBar:LMe,leadingBarScrollAnimation:OMe,trailingBar:DMe,trailingBarScrollAnimation:FMe,primary:BMe};function UMe({disabled:t=!1,track:e}={}){const[n,s]=_.useState(null),o=_.useRef(null),a=_.useRef(null),i=_.useCallback(l=>{if(a.current&&(a.current.disconnect(),a.current=null),o.current=l,t||!l)return;const c=new ResizeObserver(d=>{if(!d.length)return;const u=d[0],{width:f,height:m}=$Me(u);_.startTransition(()=>{s(g=>{const p={width:f,height:m};return!g||e==="width"&&g.width!==f||e==="height"&&g.height!==m||g.width!==f||g.height!==m?p:g})})});c.observe(l),a.current=c},[t,e]);return[n,i]}function $Me(t){let e,n;if(t.borderBoxSize){const s=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=s.inlineSize,n=s.blockSize}else e=t.contentRect.width,n=t.contentRect.height;return{width:e,height:n}}function zg({disableSizeTracking:t,name:e,track:n}){const[s,o]=UMe({disabled:n===void 0||t,track:n});let a={};return e&&!t&&n&&s&&(a={["--".concat(e,"-").concat(n)]:"".concat(s[n==="width"?"width":"height"],"px")}),[a,o,s]}function VMe(t){var p;const g=t,{axis:e="horizontal",children:n,className:s,hidden:o,leading:a,trailing:i,ref:l,style:c,type:d}=g,u=we(g,["axis","children","className","hidden","leading","trailing","ref","style","type"]),[f,m]=zg(u);return r.jsx("div",{"bar-type":d,hidden:o,"data-testid":"bar-".concat((p=u.name)!=null?p:"default"),className:z("gap-bar grid",e==="vertical"&&"flex-col",a&&[uu.leadingBar,uu.leadingBarScrollAnimation],i&&[uu.trailingBar,uu.trailingBarScrollAnimation],d==="primary"&&uu.primary,s),ref:l!=null?l:m,style:w(w({},c),f),children:n})}const HMe="_screen_c7xqp_1",GMe={screen:HMe};function WMe(t){const E=t,{anchor:e,children:n,className:s,contentClassName:o,leading:a,leadingClassName:i,primaryScrollContainer:l,ref:c,style:d,trailing:u,trackLeading:f,trackTrailing:m}=E,g=we(E,["anchor","children","className","contentClassName","leading","leadingClassName","primaryScrollContainer","ref","style","trailing","trackLeading","trackTrailing"]),{name:p}=g,[h,x]=zg(g),[v,y]=zg({disableSizeTracking:!f,name:"".concat(p,"-leading"),track:"height"}),[b,C]=zg({disableSizeTracking:!m,name:"".concat(p,"-trailing"),track:"height"}),S=p!=null?p:"default";return r.jsxs("section",{className:z(GMe.screen,"h-[var(--screen-height-override,calc(var(--cqh-full)-var(--screen-height-offset,0px)))]","keyboard-open:h-[var(--screen-height-override,calc(var(--cqh-full)-env(keyboard-inset-height,0px)-var(--screen-height-offset,0px)-var(--force-redraw,0px)))]",s),"data-testid":"screen-".concat(S),"data-primary-scroller":l,"screen-anchor":e,ref:Xv(x,c),style:U(w(w(w(w({},d),h),v),b),{container:p?"".concat(p," / inline-size"):void 0,minWidth:"min(var(--screen-".concat(S,"_min-width), 100cqw)")}),children:[r.jsx("div",{slot:"leading",ref:y,className:i,children:a}),r.jsx("div",{slot:"content",className:o,children:n}),r.jsx("div",{slot:"trailing",ref:k=>{C(k)},children:u})]})}const zMe=R(()=>P(()=>import("./e7nua9i1wznz1yhn.js"),__vite__mapDeps([386,1])),{loading:t=>F(t)});var _E;const qMe=ft.button(_E||(_E=ct(["cursor-pointer absolute z-30 rounded-full bg-clip-padding border text-token-text-secondary border-token-border-default end-1/2 translate-x-1/2 bg-token-main-surface-primary w-8 h-8 flex items-center justify-center print:hidden"])));function YMe({show:t,onClick:e,className:n}){return r.jsx(fn,{children:t&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},children:r.jsx(qMe,{className:n,onClick:e,children:r.jsx(zMe,{className:"icon text-token-text-primary"})})})})}function ZMe(u){var f=u,{ariaLabel:t,leadingFullBleed:e,trailing:n,handleClose:s,showScrollToBottomButton:o=!1,children:a,onScroll:i,restoreScrollTop:l,scrollMode:c="full-screen"}=f,d=we(f,["ariaLabel","leadingFullBleed","trailing","handleClose","showScrollToBottomButton","children","onScroll","restoreScrollTop","scrollMode"]);const m=V(),g=es(m),p=_.useRef(null),[h,x]=_.useState(!0);return _.useEffect(()=>{const v=p.current;if(!v||typeof i!="function")return;function y(){v&&i&&i(v.scrollTop)}return v.addEventListener("scroll",y,{passive:!0}),()=>{v.removeEventListener("scroll",y)}},[i]),_.useEffect(()=>{const v=p.current;!v||l==null||requestAnimationFrame(()=>{v.scrollTop=l})},[l]),r.jsxs(r.Fragment,{children:[r.jsxs(WMe,{ref:p,anchor:"top",className:z("relative flex-1",g?"border-s-thin border-(--bento-border-color)":"border-s-token-border-sharp dark:border-token-main-surface-secondary border-s"),style:c==="content-only"?{overflow:"hidden"}:void 0,name:"threadFlyOut",ariaLabel:t,primaryScrollContainer:!0,trackLeading:!0,trailing:n,contentClassName:z("bg-token-bg-primary",c==="content-only"&&"overflow-y-auto"),leading:(()=>{if("renderLeading"in d)return d.renderLeading({handleClose:s});const{leading:v}=d;return r.jsx(VMe,{name:"search-sources-header",type:"primary",className:z("flex items-center ".concat(v?"":"justify-end p-1.5"," bg-transparent!"),e&&"pointer-events-none",g?"min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)]"),children:v?r.jsxs("div",{className:z("flex items-center justify-between px-4 py-3",g?"h-[var(--header-height,3.5rem)] border-(--bento-border-color)":"border-token-border-sharp h-[calc(var(--header-height,3.5rem)+1px)]",e?"pointer-events-none bg-transparent":g?"bg-token-main-surface-primary border-b-thin border-(--bento-border-color)":"bg-token-main-surface-primary border-b"),children:[v,r.jsx(xn,{className:z("bg-token-main-surface-primary pointer-events-auto -me-2.5",e&&"opacity-80"),bg:e?"primary":"transparent",onClick:s})]}):r.jsx(xn,{className:"bg-token-main-surface-primary! hover:bg-token-main-surface-secondary! me-3 p-1",onClick:s})})})(),leadingClassName:e?"pointer-events-none":void 0,children:[a,o&&r.jsx(Gz,{setIsScrolledToEdge:v=>{x(!v)},options:{rootMargin:"0px 0px 80px 0px"}})]}),o&&r.jsx(YMe,{show:!h,className:"bottom-8",onClick:()=>{var v,y;(y=p==null?void 0:p.current)==null||y.scrollTo({top:(v=p==null?void 0:p.current)==null?void 0:v.scrollHeight,behavior:"smooth"})}})]})}const KMe=R(()=>P(()=>import("./oawtr1bc6aninhhp.js"),__vite__mapDeps([387,1,10,11,388,389,61,62,59,19,21,17,15,16,18,20,63,64,65,66,67,68,69])).then(t=>t.ChatScreenProductFlyout),{loading:oa}),QMe=R(()=>P(()=>import("./oawtr1bc6aninhhp.js"),__vite__mapDeps([387,1,10,11,388,389,61,62,59,19,21,17,15,16,18,20,63,64,65,66,67,68,69])).then(t=>t.ChatScreenAgentProductFlyout),{loading:oa}),JMe=R(()=>P(()=>import("./mmjj0px0j63ebntl.js"),__vite__mapDeps([390,1,10,11,389,61,62,59,19,21,17,15,16,18,20,63,64,65,66,67,68,69,71,391,392,393,317,0,347,348,112])).then(t=>t.ChatScreenEntityFlyout),{loading:oa}),XMe=R(()=>P(()=>import("./jhz2bgbbj6hj3ccb.js"),__vite__mapDeps([394,1,395,10,11,396,397])).then(t=>t.ChatScreenSearchSourcesFlyout),{loading:oa}),eAe=R(()=>P(()=>import("./bx7q0ki7peuoyrwl.js"),__vite__mapDeps([398,1,399,10,11,66,400,395,396,397])).then(t=>t.ChatScreenRetrievalResultsFlyout),{loading:oa}),tAe=R(()=>P(()=>import("./ow04nvtt94m1zney.js"),__vite__mapDeps([401,1,10,11])).then(t=>t.ChatScreenSummarizerFlyout),{loading:oa}),nAe=R(()=>P(()=>import("./ovw8x8ulp3acd1l3.js").then(t=>t.c),__vite__mapDeps([402,1,10,11,403,400,113,404,405,67,406,395,396,397])).then(t=>t.ChatScreenCoTFlyout),{loading:oa}),sAe=R(()=>P(()=>import("./zu3269wspbb4ktty.js"),__vite__mapDeps([407,1,402,10,11,403,400,113,404,405,67,406,395,396,397])).then(t=>t.CaterpillarSidebar),{loading:oa}),oAe=R(()=>P(()=>import("./jbtr9l3ksyth8mgt.js"),__vite__mapDeps([408,1,395,10,11,396,397])).then(t=>t.AgentSourcesSidebar),{loading:oa}),aAe=R(()=>P(()=>import("./byfhbxasqvym01md.js"),__vite__mapDeps([409,1,10,11])).then(t=>t.AgentTabsSidebar),{loading:oa});R(()=>P(()=>import("./l0funp4ysrk4evuk.js"),__vite__mapDeps([410,1,10,11,113])).then(t=>t.CodingCitationsSidebar),{loading:oa});function oa(){"use forget";const t=W.c(5),e=To();let n;t[0]!==e?(n=()=>e&&k1(e),t[0]=e,t[1]=n):n=t[1];let s;t[2]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(r.Fragment,{}),t[2]=s):s=t[2];let o;return t[3]!==n?(o=r.jsx(ZMe,{ariaLabel:"",handleClose:n,children:s}),t[3]=n,t[4]=o):o=t[4],o}function stt(t){"use forget";const e=W.c(11),{isExpanded:n,children:s}=t,[o,a]=_.useState("400px");let i;e[0]!==s?(i=Yn.isValidElement(s)?Yn.cloneElement(s,{setWidth:a}):s,e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]!==l?(c=Yn.Children.toArray(l).some(Boolean),e[2]=l,e[3]=c):c=e[3];const d=c;let u;e[4]!==l||e[5]!==d||e[6]!==n||e[7]!==o?(u=n&&d?r.jsx(Xe.div,{className:"bg-token-sidebar-surface-primary relative z-1 shrink-0 overflow-x-hidden max-lg:w-0!",initial:{width:0},animate:{width:o,transition:{bounce:.12,duration:.3}},exit:{width:0},children:r.jsx("div",{className:"absolute h-full",style:{width:o},children:r.jsx("div",{className:"flex h-full flex-col",children:l})})}):null,e[4]=l,e[5]=d,e[6]=n,e[7]=o,e[8]=u):u=e[8];let f;return e[9]!==u?(f=r.jsx(fn,{children:u}),e[9]=u,e[10]=f):f=e[10],f}const ott=t=>{"use forget";const e=W.c(38),{conversation:n}=t,s=re(eM);let o;e[0]!==n?(o=()=>Aa(n),e[0]=n,e[1]=o):o=e[1];const a=re(o);if(!a)return null;if(s)switch(a.type){case"searchSources":{let i;return e[2]!==a||e[3]!==n?(i=r.jsx(XMe,{conversation:n,sidebar:a}),e[2]=a,e[3]=n,e[4]=i):i=e[4],i}case"product":{let i;return e[5]!==a||e[6]!==n?(i=r.jsx(KMe,{conversation:n,sidebar:a}),e[5]=a,e[6]=n,e[7]=i):i=e[7],i}case"product_agent":{let i;return e[8]!==a||e[9]!==n?(i=r.jsx(QMe,{conversation:n,sidebar:a}),e[8]=a,e[9]=n,e[10]=i):i=e[10],i}case"entity":{let i;return e[11]!==a||e[12]!==n?(i=r.jsx(JMe,{conversation:n,sidebar:a}),e[11]=a,e[12]=n,e[13]=i):i=e[13],i}}switch(a.type){case"retrievalResults":{let i;return e[14]!==a||e[15]!==n?(i=r.jsx(eAe,{conversation:n,sidebar:a}),e[14]=a,e[15]=n,e[16]=i):i=e[16],i}case"summarizer":{let i;return e[17]!==a||e[18]!==n?(i=r.jsx(tAe,{conversation:n,sidebar:a}),e[17]=a,e[18]=n,e[19]=i):i=e[19],i}case"cot":{let i;return e[20]!==a||e[21]!==n?(i=r.jsx(nAe,{conversation:n,sidebar:a}),e[20]=a,e[21]=n,e[22]=i):i=e[22],i}case"caterpillar":{let i;return e[23]!==a.caterpillarId||e[24]!==a.initialTab?(i=r.jsx(sAe,{taskId:a.caterpillarId,initialTab:a.initialTab}),e[23]=a.caterpillarId,e[24]=a.initialTab,e[25]=i):i=e[25],i}case"n7jupdSources":{let i;return e[26]!==a||e[27]!==n?(i=r.jsx(oAe,{conversation:n,sidebar:a}),e[26]=a,e[27]=n,e[28]=i):i=e[28],i}case"n7jupdTabs":{let i;return e[29]!==a.tabs||e[30]!==n?(i=r.jsx(aAe,{conversation:n,tabs:a.tabs}),e[29]=a.tabs,e[30]=n,e[31]=i):i=e[31],i}}return null};function att({clientThreadId:t}){const e=vv(o=>o.notifications),n=_.useRef(new Set),s=z("pointer-events-auto fixed end-4 top-8 z-100 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse px-2 py-4",e.length>3&&"overflow-y-auto");return _.useEffect(()=>{e.filter(a=>a.clientThreadId===void 0||t===a.clientThreadId).map(a=>a.id).filter(a=>a!==void 0).forEach(a=>bv(a)),e.forEach(a=>{a.id&&!n.current.has(a.id)&&(qe.logEvent("chatgpt_notification_shown"),B.logEvent("Notifications: Notification Shown to User"),n.current.add(a.id))})},[t,e]),e.length===0||qo?null:r.jsx("div",{className:s,children:r.jsx(fn,{children:e.map(o=>r.jsx(iAe,w({},o),o.id))})})}function rAe({notification:t}){return t.userAvatar!=null?r.jsx(T3,{user:t.userAvatar}):t.icon?r.jsx(Wz,{className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border",IconComponent:t.icon}):r.jsx(op,{iconName:"openai",className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border"})}function iAe(e){var t=we(e,[]);var l,c;const n=at(),s=It(),o=ne(),a=Kn(t.clientThreadId),i=()=>{qe.logEvent("chatgpt_notification_clicked"),B.logEvent("Notifications: User Clicked Notification"),t.onClick!=null?t.onClick():a&&yv(n,s,a),t.id&&bv(t.id)};return r.jsxs(Xe.div,{onClick:i,className:"border-token-border-default bg-token-main-surface-primary z-100 inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border px-3 py-3 align-middle shadow-lg","data-ignore-for-page-load":!0,initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[r.jsx(rAe,{notification:t}),r.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[r.jsx("div",{className:"text-token-text-primary w-full truncate text-sm font-medium",children:(l=t.title)!=null?l:o.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),t.subtitle&&r.jsx("div",{className:"text-token-text-tertiary w-full truncate text-sm",children:t.subtitle}),((c=t.payload)==null?void 0:c.display_image_url)&&r.jsx("img",{className:"mt-2 h-12 w-12 rounded-xs",src:t.payload.display_image_url,alt:t.payload.image_alt})]})]})}function rtt(){const t=It(),e=_.useCallback(function(s){var l,c;const o=s.data.conversation_id;if(!o)return;const a=(c=(l=mt(o))==null?void 0:l.title)!=null?c:void 0,i=he.getGizmoId(mt(o));lf({title:a,subtitle:s.title,clientThreadId:o}),Xs(t,i),Ea(o)},[t]),n=_.useCallback(function(s){var i,l;const o=s.data.conversation_id;if(!o)return;const a=(l=(i=mt(o))==null?void 0:i.title)!=null?l:void 0;lf({title:a,subtitle:s.body,clientThreadId:o})},[]);return _.useEffect(()=>{const s={"new-message":e,"automation-error":n},o=a=>{if(a.data.type in s){const i=a.data.type;s[i](a.data)}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",o)}},[e,n,t]),null}const sk="3747963938802455",Ac="1105138088231444",lAe="Lead",cAe="AddToCart",dAe={"":"",[Ye.GO]:"FindLocation",[Ye.PLUS]:"AddToWishlist",[Ye.PRO]:"CustomizeProduct",[Ye.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-team-contact-sales":"ViewContent"},uAe={"":"",[Ye.GO]:"FindLocation",[Ye.PLUS]:"AddToWishlist",[Ye.PRO]:"CustomizeProduct",[Ye.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-team-contact-sales":""};function itt(){"use forget";const t=W.c(6),e=V();let n;t[0]!==e?(n=tt(e),t[0]=e,t[1]=n):n=t[1];const s=!n,{eligible:o,isLoading:a}=lt(Oe.hasSeenMaverick),i=ln();let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=U(w({},pi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[2]=l):l=t[2];const{data:c,isLoading:d}=rt(l),u=c?c.is_consent_required?!!c.consent_marketing:!0:!1,f=i&&o&&u&&!s,m=a||d;let g;return t[3]!==f||t[4]!==m?(g={eligible:f,isLoading:m},t[3]=f,t[4]=m,t[5]=g):g=t[5],g}function ltt(t){"use forget";const e=W.c(6),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=V(),l=ln();let c;e[0]!==i?(c=Rn(i),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:d}=c;if(!window||!l&&!a||!d)return fAe;let u;return e[2]!==d||e[3]!==n||e[4]!==s?(u=()=>{const f=ta(na.Fbclid),m=f?dAe[n]:uAe[n];if(!m)return;const g=ZB(d);g("set","autoConfig","false",Ac),g("init",Ac),g("dataProcessingOptions",["LDU"],0,0),f?g("trackSingle",Ac,m,{fbclid:f}):g("trackSingle",Ac,m),s()},e[2]=d,e[3]=n,e[4]=s,e[5]=u):u=e[5],u}function fAe(){}function ctt(){"use forget";const t=W.c(7),e=ln(),n=V();let s;t[0]!==n?(s=Rn(n),t[0]=n,t[1]=s):s=t[1];const o=s,{cspScriptNonce:a}=o,i=o.eligibleNoCookieConsumerMarketing.isUserEligibleForMaverick,{eligible:l}=lt(Oe.hasSeenMaverickCapi);if(!window||!e||!a)return mAe;let c;return t[2]!==a||t[3]!==n||t[4]!==l||t[5]!==i?(c=()=>{const d=ta(na.Fbclid);if(!d&&!i)return;const u=ZB(a);d&&(u("init",sk),u("dataProcessingOptions",["LDU"],0,0),u("trackSingle",sk,lAe,{fbclid:d})),l&&(u("init",Ac),u("dataProcessingOptions",["LDU"],0,0),u("trackSingle",Ac,cAe,{fbclid:d!=null?d:""}),ot(n,Oe.hasSeenMaverickCapi))},t[2]=a,t[3]=n,t[4]=l,t[5]=i,t[6]=c):c=t[6],c}function mAe(){}function ZB(t){return!window||!document?()=>{}:((function(e,n,s,o,a,i,l){e.fbq||(a=e.fbq=function(){a.callMethod?a.callMethod(...arguments):a.queue.push(arguments)},e._fbq||(e._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],i=n.createElement(s),i.async=!0,i.src=o,i.nonce=t,l=n.getElementsByTagName(s)[0],l==null||l.parentNode.insertBefore(i,l))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),window.fbq)}function dtt(){const t=V(),e=!tt(t),{eligible:n,isLoading:s}=lt(Oe.hasSeenPioneer),o=ln(),{data:a,isLoading:i}=rt(U(w({},pi),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),l=a?a.is_consent_required?!!a.consent_marketing:!0:!1;return{eligible:o&&o.created>Date.now()/1e3-1440*60&&n&&l&&!e,isLoading:s||i}}function gAe(){["IDE","ANID","NID"].forEach(e=>{try{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=."+window.location.hostname}catch(n){qe.logEvent("chatgpt_pioneer_cookie_error")}})}async function pAe(t){if(t)try{const n=new TextEncoder().encode(t);return await crypto.subtle.digest("SHA-256",n).then(s=>Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join(""))}catch(e){qe.logEvent("chatgpt_pioneer_email_error")}}const hAe={"":"",[Ye.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[Ye.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[Ye.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[Ye.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"AW-16679965591/qdZOCN-224sbEJen0JE-","chatgpt-team-contact-sales":"AW-16679965591/X1ZvCLPptJQbEJen0JE-"},_Ae={"":"",[Ye.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[Ye.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[Ye.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[Ye.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"","chatgpt-team-contact-sales":""},ok=[["AW-16678058309","0kStCJHMl9QZEMXy25A-"],["AW-16679965591","1dOfCL2W9ZYbEJen0JE-"]];function utt({key:t,onTracked:e,allowUnauthenticatedTracking:n=!1}){const s=V(),o=ln(),{cspScriptNonce:a}=Rn(s);return!window||!o&&!n||!a?()=>{}:()=>{const i=ta(na.Gclid),l=i?hAe[t]:_Ae[t];if(!l)return;const c=tM(a,"AW-16679965591");c("config","AW-16679965591",{send_page_view:!1,conversion_linker:!1,allow_ad_personalization_signals:!1,restricted_data_processing:!0}),i?c("event","conversion",{send_to:l,user_data:{gclid:i}}):c("event","conversion",{send_to:l}),e()}}function ftt(){const t=ln(),e=V(),n=Rn(e),{cspScriptNonce:s}=n,o=n.eligibleNoCookieConsumerMarketing.isUserEligibleForPioneer;return!window||!t||!s?()=>{}:async()=>{const a=ta(na.Gclid);if(!a&&!o)return;const i=await pAe(t.email),[l]=ok[0],c=tM(s,l);for(const[d,u]of ok)c("config",d,{send_page_view:!1,conversion_linker:!0,restricted_data_processing:!0}),gAe(),c("set","user_data",{sha256_email_address:i}),c("event","conversion",{send_to:"".concat(d,"/").concat(u),user_data:{sha256_email_address:i,gclid:a!=null?a:void 0}});qe.logEvent("chatgpt_pioneer_conv")}}const xAe={"":0,[Ye.GO]:22738426,[Ye.PLUS]:22738410,[Ye.PRO]:22738418,[Ye.SELF_SERVE_BUSINESS]:22738434,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":22837578,"chatgpt-team-contact-sales":22998554},yAe={"":0,[Ye.GO]:0,[Ye.PLUS]:0,[Ye.PRO]:0,[Ye.SELF_SERVE_BUSINESS]:0,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":0,"chatgpt-team-contact-sales":0},vAe={"":0,[Ye.GO]:22332948,[Ye.PLUS]:22332932,[Ye.PRO]:22332940,[Ye.SELF_SERVE_BUSINESS]:22332956,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":22332972,"chatgpt-team-contact-sales":22332964},bAe={"":0,[Ye.GO]:0,[Ye.PLUS]:0,[Ye.PRO]:0,[Ye.SELF_SERVE_BUSINESS]:0,"go-secondary":0,"plus-secondary":0,"pro-secondary":0,"team-secondary":0,"chatgpt-team-get-started":0,"chatgpt-team-contact-sales":0};function mtt(){"use forget";const t=W.c(6),e=V();let n;t[0]!==e?(n=tt(e),t[0]=e,t[1]=n):n=t[1];const s=!n,{eligible:o,isLoading:a}=lt(Oe.hasSeenSeeker),i=ln();let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=U(w({},pi),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[2]=l):l=t[2];const{data:c,isLoading:d}=rt(l),u=c?c.is_consent_required?!!c.consent_marketing:!0:!1,f=i&&o&&u&&!s,m=a||d;let g;return t[3]!==f||t[4]!==m?(g={eligible:f,isLoading:m},t[3]=f,t[4]=m,t[5]=g):g=t[5],g}function gtt(){"use forget";const t=W.c(5),e=ln(),n=V();let s;t[0]!==n?(s=Rn(n),t[0]=n,t[1]=s):s=t[1];const o=s,{cspScriptNonce:a}=o,i=o.eligibleNoCookieConsumerMarketing.isUserEligibleForSeeker;if(!window||!e||!a)return CAe;let l;return t[2]!==a||t[3]!==i?(l=()=>{if(!(!ta(na.Liclid)&&!i))try{Ay(a,Wo)("track",{conversion_id:22332924,[Gc]:Wo})}catch(d){const u=d;Fe.addError(u,{conversion_id:22332924,partner_id:Wo})}},t[2]=a,t[3]=i,t[4]=l):l=t[4],l}function CAe(){}const ak="seeker-script-8jd10",SAe="seeker-script-h8d129",si="7057666",Wo="8245332",Gc="__seekerPartnerId";let rk=!1;const qr={},ik={},Jp={};function Gu(t){const e=qr[t];if(!e)return;const n=Jp[t];if(n!=null&&n.length){Jp[t]=[];for(const[s,o,a]of n)e.call(s,o,a)}}function KB(t){if(typeof window>"u")return;const e=window,n="_linkedin_data_partner_ids";e._linkedin_partner_id=t,e._linkedin_data_partner_id=t,e[n]=Array.isArray(e[n])?e[n]:[],e[n].includes(t)||e[n].push(t)}function wAe(){if(rk||typeof window>"u")return;rk=!0;const t=window;let e=t.lintrk;const n=s=>{if(!s||s.__seekerWrapped)return s;const o=!!s.q,a=function(l,c){let d;if(c&&Gc in c){const f=c[Gc];(f===si||f===Wo)&&(d=f)}d&&KB(d);let u=c;return!o&&d&&c&&(u=w({},c),delete u[Gc]),s.call(this,l,u)};return o&&s.q&&(a.q=s.q),a.__seekerWrapped=!0,a.__seekerIsStub=o,a};Object.defineProperty(t,"lintrk",{configurable:!0,get(){return e},set(s){if(e=n(s),e&&!e.__seekerIsStub){const o=t._linkedin_partner_id;o===si?(qr[si]=e,Gu(si)):o===Wo&&(qr[Wo]=e,Gu(Wo))}}}),e=n(e)}function kAe(t){switch(t){case si:return ak;case Wo:return SAe;default:return ak}}function ptt(t){"use forget";const e=W.c(6),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=V(),l=ln();let c;e[0]!==i?(c=Rn(i),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:d}=c;if(!window||!l&&!a||!d)return EAe;let u;return e[2]!==d||e[3]!==n||e[4]!==s?(u=()=>{const f=ta(na.Liclid),m=f?xAe[n]:yAe[n],g=f?vAe[n]:bAe[n];if(!(!m&&!g)){if(m)try{Ay(d,si)("track",{conversion_id:m,[Gc]:si}),s()}catch(p){const h=p;Fe.addError(h,{conversion_id:m,partner_id:si})}if(g)try{Ay(d,Wo)("track",{conversion_id:g,[Gc]:Wo}),s()}catch(p){const h=p;Fe.addError(h,{conversion_id:g,partner_id:Wo})}}},e[2]=d,e[3]=n,e[4]=s,e[5]=u):u=e[5],u}function EAe(){}function Ay(t,e){var o,a;if(typeof window>"u"||typeof document>"u")return()=>{};wAe();const n=window;KB(e);let s=ik[e];if(s||(s=function(l,c){var f;const d=qr[e];if(d)return Gu(e),d.call(this,l,c);((f=Jp[e])!=null?f:Jp[e]=[]).push([this,l,c])},ik[e]=s),!qr[e]){if(!n.lintrk){const c=function(u,f){var g;const m=(g=n.lintrk)==null?void 0:g.q;m&&m.push([u,f])};c.q=[],n.lintrk=c}const i=kAe(e);if(document.getElementById(i))!qr[e]&&typeof n.lintrk=="function"&&(qr[e]=n.lintrk,Gu(e));else{const c=document.getElementsByTagName("script")[0],d=document.createElement("script");d.id=i,d.type="text/javascript",d.async=!0,d.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",typeof t=="string"&&(d.nonce=t),d.addEventListener("load",()=>{const u=n.lintrk;typeof u=="function"&&(qr[e]=u,Gu(e))}),((a=(o=c==null?void 0:c.parentNode)!=null?o:document.head)!=null?a:document.documentElement).insertBefore(d,c!=null?c:null)}}return s}function htt(){const t=V(),e=!tt(t),{eligible:n,isLoading:s}=lt(Oe.hasSeenStratos),o=ln(),{data:a,isLoading:i}=rt(U(w({},pi),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),l=a?a.is_consent_required?!!a.consent_marketing:!0:!1;return{eligible:o&&n&&l&&!e,isLoading:s||i}}function _tt(){const t=ln(),e=V(),n=Rn(e),{cspScriptNonce:s}=n,o=n.eligibleNoCookieConsumerMarketing.isUserEligibleForStratos;return!window||!t||!s?()=>{}:()=>{const a=ta(na.Tiktokclid);if(!(!a&&!o))try{const i=TAe(s);i.load("D0V58BRC77UC6ES2LGJG",{limited_data_use:!0}),i.page(),i.identify({external_id:a}),i.track("AddToCart")}catch(i){Fe.addError(i,{message:"Failed to track Stratos conversion"})}}}function TAe(t){return!window||!document?()=>{}:((function(e,n,s){e.TiktokAnalyticsObject=s;var o=e[s]=e[s]||[];o.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],o.setAndDefer=function(i,l){i[l]=function(){i.push([l].concat(Array.prototype.slice.call(arguments,0)))}};for(var a=0;a<o.methods.length;a++)o.setAndDefer(o,o.methods[a]);o.instance=function(i){for(var l=o._i[i]||[],c=0;c<o.methods.length;c++)o.setAndDefer(l,o.methods[c]);return l},o.load=function(i,l){var c="https://analytics.tiktok.com/i18n/pixel/events.js";l&&l.partner,o._i=o._i||{},o._i[i]=[],o._i[i]._u=c,o._t=o._t||{},o._t[i]=+new Date,o._o=o._o||{},o._o[i]=l||{},l=n.createElement("script"),l.type="text/javascript",l.async=!0,l.src=c+"?sdkid="+i+"&lib="+s,l.nonce=t,i=n.getElementsByTagName("script")[0],i.parentNode.insertBefore(l,i)}})(window,document,"ttq"),window.ttq)}function xtt(){const t=V(),e=!tt(t),{eligible:n,isLoading:s}=lt(Oe.hasSeenTrailBlazer),o=ln(),{data:a,isLoading:i}=rt(U(w({},pi),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),l=a?a.is_consent_required?!!a.consent_marketing:!0:!1;return{eligible:o&&n&&l&&!e,isLoading:s||i}}const MAe={"":"",[Ye.GO]:"FindLocation",[Ye.PLUS]:"AddToCart",[Ye.PRO]:"CustomizeProduct",[Ye.SELF_SERVE_BUSINESS]:"Purchase","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"PageVisit","chatgpt-team-contact-sales":"SignUp"},AAe={"":"",[Ye.GO]:"",[Ye.PLUS]:"",[Ye.PRO]:"",[Ye.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-team-contact-sales":""};function ytt({key:t,onTracked:e,allowUnauthenticatedTracking:n=!1}){const s=V(),o=ln(),{cspScriptNonce:a}=Rn(s);return!window||!o&&!n||!a?()=>{}:()=>{const i=ta(na.Rdtcid),l=i?MAe[t]:AAe[t];if(!l)return;const c=QB(a);c("init","a2_f1c16ccvsrrl",{dpm:"LDU",dpcc:"ALL",dprc:"ALL"}),i?c("track",l,{rdt_cid:i}):c("track",l),e()}}function vtt(){const t=ln(),e=V(),n=Rn(e),{cspScriptNonce:s}=n,o=n.eligibleNoCookieConsumerMarketing.isUserEligibleForTrailBlazer;return!window||!t||!s?()=>{}:()=>{const a=ta(na.Rdtcid);if(!a&&!o)return;const i=QB(s);i("init","a2_f1c16ccvsrrl",{}),i("track","Lead",{rdt_cid:a!=null?a:void 0})}}function QB(t){return!window||!document?()=>{}:((function(e,n){if(!e.rdt){var s=e.rdt=function(){s.sendEvent?s.sendEvent(...arguments):s.callQueue.push(arguments)};s.callQueue=[];var o=n.createElement("script");o.src="https://www.redditstatic.com/ads/pixel.js",o.async=!0,o.nonce=t;var a=n.getElementsByTagName("script")[0];a==null||a.parentNode.insertBefore(o,a)}})(window,document),window.rdt)}const IAe="187204252",lk="wayfinder-uet-script",jAe={"":"",[Ye.GO]:"FindLocation",[Ye.PLUS]:"AddToWishlist",[Ye.PRO]:"CustomizeProduct",[Ye.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-team-contact-sales":"ViewContent"};function btt(){const t=V(),e=!tt(t),{eligible:n,isLoading:s}=lt(Oe.hasSeenWayfinder),o=ln(),{data:a,isLoading:i}=rt(U(w({},pi),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),l=a?a.is_consent_required?!!a.consent_marketing:!0:!1;return{eligible:o&&n&&l&&!e,isLoading:s||i}}function Ctt(t){"use forget";const e=W.c(6),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=V(),l=ln();let c;e[0]!==i?(c=Rn(i),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:d}=c;if(!window||!l&&!a||!d)return NAe;let u;return e[2]!==d||e[3]!==n||e[4]!==s?(u=()=>{if(!ta(na.Msclkid))return;const m=jAe[n];if(m)try{const g=JB(d);if(!g)return;g.push("event",m),s()}catch(g){const p=g;Fe.addError(p,{message:"Failed to track Wayfinder Bing b2b conversion",eventName:m})}},e[2]=d,e[3]=n,e[4]=s,e[5]=u):u=e[5],u}function NAe(){}function Stt(){const t=ln(),e=V(),n=Rn(e),{cspScriptNonce:s}=n,o=n.eligibleNoCookieConsumerMarketing.isUserEligibleForWayfinder;return!window||!t||!s?()=>{}:()=>{const a="AddToCart";if(!(!ta(na.Msclkid)&&!o))try{const l=JB(s);if(!l)return;l.push("event",a)}catch(l){Fe.addError(l,{message:"Failed to track Wayfinder Bing b2c conversion",eventName:a})}}}function JB(t){var a,i;if(!window||!document)return;const e=window;e.uetq=(a=e.uetq)!=null?a:[];const n=()=>{var c;if(e.__wayfinderUetInitialized||typeof e.UET!="function")return;const l={ti:IAe,enableAutoSpaTracking:!0};l.q=e.uetq,e.uetq=new e.UET(l),(c=e.uetq)==null||c.push("pageLoad"),e.__wayfinderUetInitialized=!0};if(document.getElementById(lk))return n(),e.uetq;const s=document.createElement("script");s.id=lk,s.async=!0,s.src="https://bat.bing.com/bat.js",t&&(s.nonce=t),s.onload=n,s.addEventListener("readystatechange",()=>{const l=s.readyState;(!l||l==="loaded"||l==="complete")&&n()});const o=document.getElementsByTagName("script")[0];return(i=o==null?void 0:o.parentNode)==null||i.insertBefore(s,o),e.uetq}function wtt(){"use forget";const t=W.c(6),e=V();let n,s;if(t[0]!==e){const l=ve(e,"2717328795");n=rt,s=PAe(l),t[0]=e,t[1]=n,t[2]=s}else n=t[1],s=t[2];const{data:o}=n(s);let a,i;t[3]!==o?(a=()=>{!o||!o.ui_info||hi.updateDetails(o)},i=[o],t[3]=o,t[4]=a,t[5]=i):(a=t[4],i=t[5]),_.useEffect(a,i)}function PAe(t){return Xn({enabled:t,queryKey:["home-beacon"],queryFn:async()=>(await ge.safeGet("/beacons/home")).beacon_ui_response})}const RAe={stiffness:300,damping:30,mass:1},LAe={transition:RAe,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},OAe={setFocusedObject:t=>{_p.setState({focusedObject:t}),ste()},close(){_p.setState({focusedObject:null})}},DAe=({className:t})=>r.jsxs(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:[r.jsx("path",{d:"M11.5047 10C12.8828 10 14 11.1172 14 12.4953C14 15.2919 10.9404 14.9905 9.00947 14.9905C9.00947 13.0596 8.70813 10 11.5047 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),r.jsx("path",{d:"M12 9.5C13.8983 6.79576 16.0839 4.85949 18.8983 3.40128C19.3829 3.15019 19.9712 3.25691 20.3571 3.64286V3.64286C20.7431 4.0288 20.8498 4.61706 20.5987 5.10168C19.1405 7.91612 17.2042 10.1017 14.5 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M12.0003 21.0003C11.5003 21.0003 8.93732 20.1297 6.71782 17.9102C3.00784 14.2002 2.05809 9.13491 4.5965 6.5965C6.68218 4.51082 10.4738 4.78002 13.8179 7.00031M17.1066 10.0003C19.9927 13.3315 21.2146 16.7289 19.0003 18.5003C17.3415 19.8274 15.2424 18.2927 14.0176 17.1097",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),FAe=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.70711 2.29289C8.09763 2.68342 8.09763 3.31658 7.70711 3.70711L6.41421 5H13.5C17.6421 5 21 8.35786 21 12.5C21 16.6421 17.6421 20 13.5 20H9C8.44772 20 8 19.5523 8 19C8 18.4477 8.44772 18 9 18H13.5C16.5376 18 19 15.5376 19 12.5C19 9.46243 16.5376 7 13.5 7H6.41421L7.70711 8.29289C8.09763 8.68342 8.09763 9.31658 7.70711 9.70711C7.31658 10.0976 6.68342 10.0976 6.29289 9.70711L3.29289 6.70711C2.90237 6.31658 2.90237 5.68342 3.29289 5.29289L6.29289 2.29289C6.68342 1.90237 7.31658 1.90237 7.70711 2.29289Z",fill:"currentColor"})}),BAe=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2929 2.29289C16.6834 1.90237 17.3166 1.90237 17.7071 2.29289L20.7071 5.29289C21.0976 5.68342 21.0976 6.31658 20.7071 6.70711L17.7071 9.70711C17.3166 10.0976 16.6834 10.0976 16.2929 9.70711C15.9024 9.31658 15.9024 8.68342 16.2929 8.29289L17.5858 7H10.5C7.46243 7 5 9.46243 5 12.5C5 15.5376 7.46243 18 10.5 18H15C15.5523 18 16 18.4477 16 19C16 19.5523 15.5523 20 15 20H10.5C6.35786 20 3 16.6421 3 12.5C3 8.35786 6.35786 5 10.5 5H17.5858L16.2929 3.70711C15.9024 3.31658 15.9024 2.68342 16.2929 2.29289Z",fill:"currentColor"})}),ktt=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{d:"M3 18H4.17157C4.70201 18 5.21071 17.7893 5.58579 17.4142L15.4142 7.58579C15.7893 7.21071 16.298 7 16.8284 7H19M3 6H4.17157C4.70201 6 5.21071 6.21071 5.58579 6.58579L8 9M19 17H16.8284C16.298 17 15.7893 16.7893 15.4142 16.4142L14 15M18 4L21 7L18 10M18 14L21 17L18 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Ett=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),Ttt=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),Mtt=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"6",y:"2",width:"12",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),UAe=({className:t})=>r.jsx(Ts,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4C13 3.44772 13.4477 3 14 3H20C20.5523 3 21 3.44772 21 4V10C21 10.5523 20.5523 11 20 11C19.4477 11 19 10.5523 19 10V6.41421L15.2071 10.2071C14.8166 10.5976 14.1834 10.5976 13.7929 10.2071C13.4024 9.81658 13.4024 9.18342 13.7929 8.79289L17.5858 5H14C13.4477 5 13 4.55228 13 4ZM4 13C4.55228 13 5 13.4477 5 14V17.5858L8.79289 13.7929C9.18342 13.4024 9.81658 13.4024 10.2071 13.7929C10.5976 14.1834 10.5976 14.8166 10.2071 15.2071L6.41421 19H10C10.5523 19 11 19.4477 11 20C11 20.5523 10.5523 21 10 21H4C3.44772 21 3 20.5523 3 20V14C3 13.4477 3.44772 13 4 13Z",fill:"currentColor"})}),$Ae=R(()=>P(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([145,1])),{loading:t=>F(t)}),VAe=R(()=>P(()=>import("./k1cl8bhg0vqi0zvs.js"),__vite__mapDeps([276,1])),{loading:t=>F(t)}),XB=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),HAe=R(()=>P(()=>import("./qrcm3utllwqs3zx5.js"),__vite__mapDeps([25,1])),{loading:t=>F(t)});function Att({imageAsset:t,mode:e,setMode:n,clientThreadId:s,messageId:o,cursorWidth:a,setCursorWidth:i,inpaintingDrawingState:l,isLoadingNewImage:c}){const d=jt(s),{canUndoDrawing:u,undoDrawing:f,canRedoDrawing:m,redoDrawing:g,clearAllDrawings:p}=l,h=ne();return r.jsxs(Xe.div,U(w({className:"flex h-16 w-full justify-between px-4"},LAe),{children:[r.jsx("div",{className:"flex items-center",children:e==="inpaint"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:z("flex items-center gap-3",c&&"opacity-50"),children:[r.jsx(dk,{className:"h-[11px] w-[11px]"}),r.jsxs(R5,{className:"relative flex w-[90px] items-center",min:32,max:240,step:.01,value:[a],onValueChange:x=>i(x[0]),disabled:c,children:[r.jsx(L5,{className:"bg-token-text-quaternary relative h-[2px] grow",children:r.jsx(fF,{className:"bg-token-text-secondary absolute h-full"})}),r.jsx(O5,{className:"bg-token-text-secondary block h-[11px] w-[11px] rounded-full"})]}),r.jsx(dk,{className:"h-6 w-6"})]}),r.jsx(ck,{}),r.jsx(Wa,{disabled:!u||c,onClick:f,children:r.jsx(FAe,{})}),r.jsx(Wa,{disabled:!m||c,onClick:g,children:r.jsx(BAe,{})}),r.jsx(ck,{}),r.jsx(Wa,{disabled:!u||c,onClick:p,children:r.jsx(j,{id:"imageEditorControls.clearSelectionButtonLabel",defaultMessage:"Clear selection"})})]})}),r.jsx("div",{className:"flex items-center",children:e==="inpaint"?r.jsx(Wa,{onClick:()=>n("default"),disabled:c,children:r.jsx(j,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})}):r.jsxs(r.Fragment,{children:[r.jsx(WAe,{imageAsset:t,setMode:n,messageId:o,serverThreadId:d}),r.jsx(Wa,{tooltip:h.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:()=>L7e(t,d,o),children:r.jsx(VAe,{})}),r.jsx(GAe,{prompt:YF(t),children:r.jsx(Wa,{tooltip:h.formatMessage({id:"imageEditorControls.promptButtonTooltip",defaultMessage:"Prompt"}),children:r.jsx($Ae,{})})}),r.jsx(Wa,{tooltip:h.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:OAe.close,children:r.jsx(XB,{className:"icon-lg"})})]})})]}))}function GAe({prompt:t,children:e}){const[n,s]=_.useState(!1),o=ne(),a=$t();return r.jsx(j5,{sideOffset:4,alignAgainstAnchor:"end",triggerButton:r.jsx("div",{className:"group",children:e}),className:"z-10",size:"none",children:r.jsxs("div",{className:"flex max-w-sm flex-col gap-3 p-4",children:[r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(j,{id:"imageEditorControls.promptPopoverLabel",defaultMessage:"Prompt"})}),r.jsx("div",{children:t}),r.jsx("div",{children:r.jsx(ye,{color:"secondary",disabled:n,onClick:i=>{s(!0),Yo(t,a,i),setTimeout(()=>s(!1),2e3)},icon:HAe,children:n?o.formatMessage({id:"imageEditorControls.copiedButtonLabel",defaultMessage:"Copied!"}):o.formatMessage({id:"imageEditorControls.copyButtonLabel",defaultMessage:"Copy"})})})]})})}function Wa({children:t,tooltip:e,disabled:n,onClick:s}){const o=r.jsx("button",{className:z("hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary rounded-sm p-2 font-semibold",n?"text-token-text-quaternary":"text-token-text-secondary"),disabled:n,onClick:s,children:t});return e!=null?r.jsx(pt,{label:e,children:o}):o}function Itt({onClose:t}){const e=ne();return r.jsx(Wa,{tooltip:e.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:t,children:r.jsx(XB,{className:"icon-lg"})})}function WAe({imageAsset:t,setMode:e,messageId:n,serverThreadId:s,disabled:o}){const a=ne(),i=V(),l=lt(Oe.DalleEditingOnboarding),c=l.eligible&&!l.isLoading,d=r.jsx(Wa,{tooltip:c?void 0:a.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:()=>{var u,f,m,g,p,h,x,v,y,b,C,S,E,k,T,M,A,I,N,L,O,D;e("inpaint"),qe.logEvent("chatgpt_dalle_inpaint_click",null,{sourceOperation:(m=(f=(u=t.metadata)==null?void 0:u.dalle)==null?void 0:f.edit_op)!=null?m:"none",hasParent:((p=(g=t.metadata)==null?void 0:g.dalle)==null?void 0:p.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent("chatgpt_dalle_inpaint_click",{conversationId:s,messageId:n,generationId:(x=(h=t.metadata)==null?void 0:h.dalle)==null?void 0:x.gen_id,fileId:Co(t.asset_pointer),parentGenerationId:(y=(v=t.metadata)==null?void 0:v.dalle)==null?void 0:y.parent_gen_id,sourceOperation:(C=(b=t.metadata)==null?void 0:b.dalle)==null?void 0:C.edit_op,model:"dalle"}),qe.logEvent("chatgpt_image_inpaint_click",null,{sourceOperation:(k=(E=(S=t.metadata)==null?void 0:S.dalle)==null?void 0:E.edit_op)!=null?k:"none",hasParent:((M=(T=t.metadata)==null?void 0:T.dalle)==null?void 0:M.parent_gen_id)!=null?"true":"false",model:"dalle"}),B.logEvent("chatgpt_image_inpaint_click",{conversationId:s,messageId:n,generationId:(I=(A=t.metadata)==null?void 0:A.dalle)==null?void 0:I.gen_id,fileId:Co(t.asset_pointer),parentGenerationId:(L=(N=t.metadata)==null?void 0:N.dalle)==null?void 0:L.parent_gen_id,sourceOperation:(D=(O=t.metadata)==null?void 0:O.dalle)==null?void 0:D.edit_op,model:"dalle"})},disabled:o,children:r.jsx(DAe,{})});return c?r.jsx(Vd,{announcementKey:Oe.DalleEditingOnboarding,show:!0,side:"bottom",sideOffset:0,title:a.formatMessage({id:"imageEditorNUX.title",defaultMessage:"Select area of the image to edit"}),description:a.formatMessage({id:"imageEditorNUX.description",defaultMessage:"Highlight the area and describe changes in chat."}),onDismiss:()=>ot(i,Oe.DalleEditingOnboarding),children:r.jsx("div",{children:d})}):d}var xE;const ck=ft.div(xE||(xE=ct(["mx-3 w-[1px] h-6 bg-token-border-default"])));var yE;const dk=ft.div(yE||(yE=ct(["rounded-full border-2 border-token-text-secondary"])));async function uk({url:t,fileName:e}){const s=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=e,o.click(),o.remove()}const zAe="ChatGPT Image";function qAe(t){const e=new Date,n=t.formatDate(e,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return"".concat(zAe," ").concat(n,".png")}function jtt(){const[t,e]=_.useState({undoStack:[],currentIndex:-1});function n(i){e(l=>({undoStack:[...l.undoStack.slice(0,l.currentIndex+1),i],currentIndex:l.currentIndex+1}))}function s(){e(i=>({undoStack:i.undoStack,currentIndex:Math.max(i.currentIndex-1,-1)}))}function o(){e(i=>({undoStack:i.undoStack,currentIndex:Math.min(i.currentIndex+1,i.undoStack.length-1)}))}function a(){e({undoStack:[],currentIndex:-1})}return{currentDrawnShape:t.undoStack.length>0?t.undoStack[t.currentIndex]:null,onNewDrawnShape:n,canUndoDrawing:t.currentIndex>=0,undoDrawing:s,canRedoDrawing:t.currentIndex<t.undoStack.length-1,redoDrawing:o,clearAllDrawings:a}}const YAe=R(()=>P(()=>import("./et5vk3y64c5mv025.js"),__vite__mapDeps([411,1,10,11,412,413])).then(t=>t.DynamicDrawingCanvas)),ZAe=136;function Ntt({image:t,drawingState:e,drawingCanvasRef:n}){return r.jsx("div",{className:"pointer-events-none absolute inset-0 z-[60] overflow-visible",children:r.jsx("div",{className:"pointer-events-auto absolute inset-0",children:r.jsx(YAe,{drawingCanvasRef:n,color:"rgba(0, 122, 255, 0.5)",dashedOutlineColor:"rgba(255, 255, 255, 0.65)",cursorWidth:ZAe,canvasWidth:t.width,canvasHeight:t.height,currentDrawnShape:e.currentDrawnShape,onNewDrawnShape:e.onNewDrawnShape})})})}function KAe(s){var o=s,{className:t,children:e}=o,n=we(o,["className","children"]);return r.jsx(ofe,U(w({className:t},n),{children:e}))}const QAe=o=>{var a=o,{value:t,className:e,label:n}=a,s=we(a,["value","className","label"]);return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Db,w({id:t,value:t,className:z("border-token-text-tertiary hover:bg-token-main-surface-tertiary h-4 w-4 shrink-0 gap-2 rounded-full border bg-transparent shadow-sm outline-hidden",e)},s)),r.jsx("label",{htmlFor:t,className:"w-full cursor-pointer",children:n})]})},JAe=n=>{var s=n,{className:t}=s,e=we(s,["className"]);return r.jsx(Fb,w({className:z("after:bg-token-text-primary relative flex h-full w-full items-center justify-center after:block after:h-2 after:w-2 after:rounded-[50%] after:content-['']",t)},e))},m2={Root:KAe,Item:QAe,Indicator:JAe};function eU(n){var s=n,{className:t}=s,e=we(s,["className"]);return r.jsx("textarea",w({className:z("form-textarea border-token-border-default bg-token-main-surface-secondary text-token-text-primary focus:border-token-text-primary focus:ring-token-text-primary w-full rounded-lg border text-sm focus:shadow-none focus:outline-hidden",t)},e))}function XAe(t){var e,n;return((n=(e=t.sub_reasons)==null?void 0:e.length)!=null?n:0)===0&&t.details_placeholder==null&&t.link_attachment==null&&t.subtext==null}function Ptt(t,e,n,s,o={},a,i,l,c){const d=$t(),u={};return a&&js(a)&&i&&(u["chatgpt-project-id"]=a,u["chatgpt-conv-owner-id"]=i),l&&(u["chatgpt-conv-message-id"]=l),qt({mutationFn:f=>{var g,p;return tt(t)?ge.safePost("/report_flow/report",{requestBody:U(w({},f),{entity_type:s,entity_id:n,additional_fields_values:w(w({},(g=f.additional_fields_values)!=null?g:{}),o!=null?o:{}),product_area:c}),additionalHeaders:u,authOption:sn.SendIfAvailable}):C3.safePost("/report_flow/report",{requestBody:U(w({},f),{entity_type:s,entity_id:n,additional_fields_values:w(w({},(p=f.additional_fields_values)!=null?p:{}),o!=null?o:{}),product_area:c}),authOption:sn.Anonymous})},onError:f=>{var m;Fe.addError(new Error("Error occurred while reporting",{cause:f}),{entityType:s,id:n}),d.danger(e.formatMessage({id:"report.submitError",defaultMessage:"Error reporting: {detail}"},{detail:f.message}),{toastId:"report_mutation_failed_to_report",loggingTitle:String((m=f==null?void 0:f.message)!=null?m:""),loggingDescription:"Error message when submitting a report fails"})}})}function Rtt(t,e){return rt({queryKey:["reportReasons",{entityType:e}],queryFn:()=>tt(t)?ge.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:e}},authOption:sn.SendIfAvailable}):C3.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:e}},authOption:sn.Anonymous})})}var vE;ft.div(vE||(vE=ct(["divide-y overflow-hidden rounded-md border border-token-border-medium"])));var bE;ft.button(bE||(bE=ct(["w-full border-token-border-medium p-2 text-start text-sm hover:bg-token-main-surface-secondary"])));var CE;const eIe=ft.div(CE||(CE=ct(["text-base font-medium"])));var SE;const tIe=ft.div(SE||(SE=ct(["text-sm text-token-text-secondary"])));function dc({header:t,subHeader:e}){return t==null&&e==null?null:r.jsxs("div",{className:"mb-4",children:[t!=null&&r.jsx(eIe,{children:t}),e!=null&&r.jsx(tIe,{children:e})]})}function nIe({reasons:t,setSelectedReason:e,selectedReason:n}){var s;return r.jsx(m2.Root,{value:(s=n==null?void 0:n.id)!=null?s:"",onValueChange:o=>e(t.find(a=>a.id===o)),className:"flex flex-col gap-3",children:t.map(o=>r.jsx(m2.Item,{value:o.id,label:o.cta,children:r.jsx(m2.Indicator,{})},o.id))})}function sIe({reason:t,details:e,setDetails:n,name:s,setName:o,email:a,setEmail:i,showName:l,showEmail:c}){const d=l||c,u=ne(),f=u.formatMessage({id:"report.loggedOut.name",defaultMessage:"Your name"}),m=u.formatMessage({id:"report.loggedOut.email",defaultMessage:"Your email address"}),g=u.formatMessage({id:"report.loggedOut.details",defaultMessage:"Add details"});return r.jsxs("div",{className:"flex flex-col gap-4",children:[d&&r.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[l&&r.jsxs("div",{className:"flex flex-col gap-1",children:[f,r.jsx(pf,{ariaLabel:f,name:"name",type:"text",value:s,onChange:p=>o(p.target.value)})]}),c&&r.jsxs("div",{className:"flex flex-col gap-1",children:[m,r.jsx(pf,{ariaLabel:m,name:"email",type:"email",value:a,onChange:p=>i(p.target.value)})]})]}),r.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[d&&g,r.jsx(eU,{"aria-label":d?g:void 0,value:e,onChange:p=>n(p.target.value),placeholder:!d&&t.details_placeholder?t.details_placeholder:void 0,autoFocus:!0,className:"bg-token-main-surface-primary!"})]}),t.subtext!=null&&r.jsx("div",{className:"text-token-text-secondary text-sm",children:t.subtext})]})}function oIe({reason:t}){return r.jsx("div",{className:"text-sm",children:r.jsx("div",{className:"mb-2",children:t.link_explanation})})}function Ltt({reasons:t,submitReport:e,title:n,onClose:s,header:o}){var N,L;const a=ne(),[i,l]=_.useState([]);let c=t,d;for(const O of i)d=c.find(D=>D.id===O.id),c=(N=d==null?void 0:d.sub_reasons)!=null?N:[];const[u,f]=_.useState(),m=u!=null&&XAe(u),[g,p]=_.useState(""),[h,x]=_.useState(""),[v,y]=_.useState(""),b=(L=d==null?void 0:d.additional_fields)==null?void 0:L.map(O=>O.id),C=b==null?void 0:b.includes(X4.UserName),S=b==null?void 0:b.includes(X4.UserEmail);let E;m?E=r.jsx(ye,{color:"primary",onClick:()=>{e.mutateAsync({reason:{id:u.id}})},disabled:!u||e.isPending,loading:e.isPending,children:r.jsx(j,{id:"report.submitReport",defaultMessage:"Submit"})}):E=r.jsx(ye,{color:"primary",onClick:()=>{u&&(l(O=>[...O,u]),f(void 0))},disabled:!u,children:r.jsx(j,{id:"z5fExR",defaultMessage:"Next"})});let k=d!=null?r.jsx(ye,{onClick:()=>{if(i.length>0){const O=i[i.length-1];l(D=>D.slice(0,-1)),f(O)}},color:"secondary",children:r.jsx(j,{id:"xJnONr",defaultMessage:"Back"})}):null;const T=(d==null?void 0:d.subtext)!=null&&r.jsx("div",{className:"text-token-text-secondary text-sm",children:d.subtext}),M=a.formatMessage({id:"report.submittedModal.header",defaultMessage:"Report submitted"}),A=a.formatMessage({id:"report.submittedModal.subHeader",defaultMessage:"Thank you for your report. We'll review the content to determine if it violates our policies."});let I;if(e.isSuccess)k=void 0,E=void 0,I=r.jsxs(r.Fragment,{children:[r.jsx(dc,{header:M}),r.jsxs("div",{className:"text-sm",children:[A,r.jsx("br",{}),r.jsx("br",{}),r.jsx(j,{id:"report.submittedModal.learn",defaultMessage:"Learn more about "}),r.jsx("a",{href:"https://openai.com/transparency-and-content-moderation/",target:"_blank",rel:"noreferrer",className:"break-words underline",children:r.jsx(j,{id:"report.submittedModal.link",defaultMessage:"how we handle reports."})})]})]});else if((d==null?void 0:d.details_placeholder)!=null)E=r.jsx(ye,{color:"primary",onClick:()=>{let O;(C||S)&&(O={},C&&(O.user_name=h),S&&(O.user_email=v)),e.mutateAsync({reason:{id:d.id,details:g},additional_fields_values:O})},disabled:e.isPending,loading:e.isPending,children:r.jsx(j,{id:"report.submitReport",defaultMessage:"Submit"})}),I=r.jsxs(r.Fragment,{children:[r.jsx(dc,{header:r.jsx(j,{id:"CGoWjT",defaultMessage:"Please tell us more"})}),r.jsx(sIe,{reason:d,showName:C!=null?C:!1,showEmail:S!=null?S:!1,details:g,setDetails:p,name:h,setName:x,email:v,setEmail:y})]});else if((d==null?void 0:d.link_attachment)!=null){const O=d.link_attachment;E=r.jsx(ye,{color:"primary",onClick:()=>{window.open(O,"_blank")},children:r.jsx(j,{id:"report.goToForm",defaultMessage:"Go to Form"})}),I=r.jsxs(r.Fragment,{children:[r.jsx(dc,{}),r.jsx(oIe,{reason:d}),T]})}else c.length>0?I=r.jsxs(r.Fragment,{children:[r.jsx(dc,{header:o}),c.length>0&&r.jsx(nIe,{reasons:c,selectedReason:u,setSelectedReason:f}),T]}):(d==null?void 0:d.subtext)!=null?(E=void 0,I=r.jsxs(r.Fragment,{children:[r.jsx(dc,{header:o}),r.jsx("div",{className:"text-sm",children:d==null?void 0:d.subtext})]})):(Fe.addError("Reporting: arrived at empty leaf reason",d),E=void 0,k=void 0,I=r.jsx(dc,{header:M,subHeader:A}));return r.jsx(Mt,{testId:"modal-report-reason-selection",title:n,onClose:s,isOpen:!0,showCloseButton:!0,type:"success",secondaryButton:k,primaryButton:E,children:I})}const aIe="https://openai.com/form/report-content/",Ott=({areButtonsFullWidth:t,post:e,setIsReportModalOpen:n})=>{const s=V(),o=!tt(s),a=ne(),i=e.attachments.every(l=>l.kind==="media_generation");return r.jsx("div",{className:"border-token-border-default flex w-full justify-center border-b-[0.5px] px-2 sm:px-6",children:r.jsx("div",{className:z("flex w-full items-center justify-between gap-4 py-4",!t&&"max-w-[1200px]"),children:r.jsxs("div",{children:[r.jsx(pt,{align:"start",theme:"primary",labelTextAlign:"left",wide:!0,contentClassName:"![&>*]:font-normal *:font-normal",label:a.formatMessage({id:"rZHri8",defaultMessage:"The content youre seeing was made by a ChatGPT user. It may be unverified or contain potentially unsafe content that doesnt reflect the views of OpenAI."}),children:r.jsx("h1",{className:"text-token-text-primary line-clamp-1 text-base font-semibold",children:e.text})}),r.jsxs("div",{className:"text-token-text-secondary xs:flex-col flex flex-col gap-1.5 text-xs sm:flex-row",children:[!i&&r.jsx("div",{className:"cursor-default",children:a.formatMessage(g2.madeWithCanvas)}),r.jsx("div",{children:o?r.jsx("a",{className:"underline",href:aIe,target:"_blank",rel:"noreferrer",onClick:()=>{},children:a.formatMessage(g2.report)}):r.jsx("button",{className:"underline",onClick:()=>{n(!0)},children:a.formatMessage(g2.report)})})]})]})})})},g2=Se({report:{id:"DHsq+d",defaultMessage:"Report"},editWithChatGPT:{id:"DrcR8S",defaultMessage:"Edit with ChatGPT"},edit:{id:"PpEliN",defaultMessage:"Edit"},madeWithCanvas:{id:"h8SGou",defaultMessage:"Youre viewing user-generated content that may be unverified or unsafe."}}),rIe=R(()=>P(()=>import("./mwnkb5j3kjjyh7d2.js"),__vite__mapDeps([414,1])),{loading:t=>F(t)});function tU({className:t}){const e=ne();return r.jsx(rIe,{className:z("h-6 w-24",t),"aria-label":e.formatMessage({id:"VJmCc9",defaultMessage:"ChatGPT logo"}),role:"img"})}const nU=R(()=>P(()=>import("./n17yjgieu7k6cshj.js"),__vite__mapDeps([415,1,10,11,416,417,102,234,235,100,418,95,419,96,420,97,421,104,422,423,424,94,425,426,427,93,58,19,20,16,13,14,15,17,18,23,92,98,21,60,65,66,67,428,429,116,117,430,431,71,432])).then(t=>t.AttachmentContent));function iIe(){nU.prefetch()}function sU({attachments:t,variant:e,className:n,clientThreadId:s}){return r.jsx(r.Fragment,{children:t.map((o,a)=>r.jsx("div",{className:n,children:r.jsx(nU,{attachment:o,caption:"",variant:e,hasActiveRequest:!1,clientThreadId:s})},a))})}function lIe({attachments:t,clientThreadId:e,className:n}){var a;const s=V(),o=((a=t[0])==null?void 0:a.kind)==="media_generation";return r.jsx(zz,{conversation:xt(s,e),children:r.jsxs("div",{className:z("bg-token-primary relative m-0 box-border w-full overflow-hidden",n),"data-testid":"sharing-post-unfurl-view",children:[r.jsx(sU,{attachments:t,variant:"unfurl",className:"h-full w-full",clientThreadId:e}),r.jsx("div",{className:z("absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent",o?"from-black/35":"from-token-main-surface-primary")}),r.jsx("div",{className:"absolute end-5 bottom-5 z-10 inline-flex flex-shrink-0 items-end justify-end",children:r.jsx(tU,{className:z("inline h-4 w-24 text-end",o&&"text-white")})})]})})}const cIe=Object.freeze(Object.defineProperty({__proto__:null,PostListPreview:sU,PostUnfurlPreview:lIe,prefetchPostPreviewContentComponent:iIe},Symbol.toStringTag,{value:"Module"})),dIe=R(()=>P(()=>import("./neol3b1dem5wtv3l.js"),__vite__mapDeps([433,320,10,1,11])).then(t=>t.FannyPackInitializer));function Dtt(){const t=V(),{isFannyPackEnabled:e,isFannyPackInitializerEnabled:n}=Ib(t);return e||!n?null:r.jsx(dIe,{})}function Ftt({clientThreadId:t,urlThreadId:e}){const n=V(),s=ne(),o=at(),a=Es();return r.jsx(Ed,{children:a&&t&&!!e&&r.jsx(Sb,{isOpen:!0,title:r.jsx(j,{id:"HistoryGizmoItem.leaveTempChatTitle",defaultMessage:"Leave Temporary Chat?"}),description:r.jsx(j,{id:"HistoryGizmoItem.leaveTempChatDescription",defaultMessage:"Temporary Chats don't appear in your history, so you won't be able to come back to it."}),confirmText:s.formatMessage({id:"HistoryGizmoItem.leaveTempChatConfirm",defaultMessage:"Leave Temporary Chat"}),onClose:()=>{o("/")},onConfirm:()=>{Mf.set(n,!1)}})})}var p2,fk;function uIe(){if(fk)return p2;fk=1;var t="Expected a function",e=NaN,n="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,c=typeof Am=="object"&&Am&&Am.Object===Object&&Am,d=typeof self=="object"&&self&&self.Object===Object&&self,u=c||d||Function("return this")(),f=Object.prototype,m=f.toString,g=Math.max,p=Math.min,h=function(){return u.Date.now()};function x(S,E,k){var T,M,A,I,N,L,O=0,D=!1,$=!1,H=!0;if(typeof S!="function")throw new TypeError(t);E=C(E)||0,v(k)&&(D=!!k.leading,$="maxWait"in k,A=$?g(C(k.maxWait)||0,E):A,H="trailing"in k?!!k.trailing:H);function G(X){var ee=T,ie=M;return T=M=void 0,O=X,I=S.apply(ie,ee),I}function Z(X){return O=X,N=setTimeout(Y,E),D?G(X):I}function Q(X){var ee=X-L,ie=X-O,de=E-ee;return $?p(de,A-ie):de}function q(X){var ee=X-L,ie=X-O;return L===void 0||ee>=E||ee<0||$&&ie>=A}function Y(){var X=h();if(q(X))return te(X);N=setTimeout(Y,Q(X))}function te(X){return N=void 0,H&&T?G(X):(T=M=void 0,I)}function ae(){N!==void 0&&clearTimeout(N),O=0,T=L=M=N=void 0}function se(){return N===void 0?I:te(h())}function ce(){var X=h(),ee=q(X);if(T=arguments,M=this,L=X,ee){if(N===void 0)return Z(L);if($)return N=setTimeout(Y,E),G(L)}return N===void 0&&(N=setTimeout(Y,E)),I}return ce.cancel=ae,ce.flush=se,ce}function v(S){var E=typeof S;return!!S&&(E=="object"||E=="function")}function y(S){return!!S&&typeof S=="object"}function b(S){return typeof S=="symbol"||y(S)&&m.call(S)==n}function C(S){if(typeof S=="number")return S;if(b(S))return e;if(v(S)){var E=typeof S.valueOf=="function"?S.valueOf():S;S=v(E)?E+"":E}if(typeof S!="string")return S===0?S:+S;S=S.replace(s,"");var k=a.test(S);return k||i.test(S)?l(S.slice(2),k?2:8):o.test(S)?e:+S}return p2=x,p2}var fIe=uIe();const mk=Zn(fIe);var c4=typeof window<"u"?_.useLayoutEffect:_.useEffect;function mIe(t,e,n,s){const o=_.useRef(e);c4(()=>{o.current=e},[e]),_.useEffect(()=>{const a=window;if(!(a&&a.addEventListener))return;const i=l=>{o.current(l)};return a.addEventListener(t,i,s),()=>{a.removeEventListener(t,i,s)}},[t,n,s])}var gIe=typeof window>"u";function pIe(t,{defaultValue:e=!1,initializeWithValue:n=!0}={}){const s=l=>gIe?e:window.matchMedia(l).matches,[o,a]=_.useState(()=>n?s(t):e);function i(){a(s(t))}return c4(()=>{const l=window.matchMedia(t);return i(),l.addListener?l.addListener(i):l.addEventListener("change",i),()=>{l.removeListener?l.removeListener(i):l.removeEventListener("change",i)}},[t]),o}function hIe(t){const e=_.useRef(t);e.current=t,_.useEffect(()=>()=>{e.current()},[])}function _Ie(t,e=500,n){const s=_.useRef();hIe(()=>{s.current&&s.current.cancel()});const o=_.useMemo(()=>{const a=mk(t,e,n),i=(...l)=>a(...l);return i.cancel=()=>{a.cancel()},i.isPending=()=>!!s.current,i.flush=()=>a.flush(),i},[t,e,n]);return _.useEffect(()=>{s.current=mk(t,e,n)},[t,e,n]),o}function Btt({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:s=!1,initialIsIntersecting:o=!1,onChange:a}={}){var i;const[l,c]=_.useState(null),[d,u]=_.useState(()=>({isIntersecting:o,entry:void 0})),f=_.useRef();f.current=a;const m=((i=d.entry)==null?void 0:i.isIntersecting)&&s;_.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||m)return;const h=new IntersectionObserver(x=>{const v=Array.isArray(h.thresholds)?h.thresholds:[h.thresholds];x.forEach(y=>{const b=y.isIntersecting&&v.some(C=>y.intersectionRatio>=C);u({isIntersecting:b,entry:y}),f.current&&f.current(b,y)})},{threshold:t,root:e,rootMargin:n});return h.observe(l),()=>{h.disconnect()}},[l,JSON.stringify(t),e,n,m,s]);const g=_.useRef(null);_.useEffect(()=>{var h;!l&&((h=d.entry)!=null&&h.target)&&!s&&!m&&g.current!==d.entry.target&&(g.current=d.entry.target,u({isIntersecting:o,entry:void 0}))},[l,d.entry,s,m,o]);const p=[c,!!d.isIntersecting,d.entry];return p.ref=p[0],p.isIntersecting=p[1],p.entry=p[2],p}function xIe(){const t=_.useRef(!1);return _.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),_.useCallback(()=>t.current,[])}var gk={width:void 0,height:void 0};function Utt(t){const{ref:e,box:n="content-box"}=t,[{width:s,height:o},a]=_.useState(gk),i=xIe(),l=_.useRef(w({},gk)),c=_.useRef(void 0);return c.current=t.onResize,_.useEffect(()=>{if(!e.current||typeof window>"u"||!("ResizeObserver"in window))return;const d=new ResizeObserver(([u])=>{const f=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",m=pk(u,f,"inlineSize"),g=pk(u,f,"blockSize");if(l.current.width!==m||l.current.height!==g){const h={width:m,height:g};l.current.width=m,l.current.height=g,c.current?c.current(h):i()&&a(h)}});return d.observe(e.current,{box:n}),()=>{d.disconnect()}},[n,e,i]),{width:s,height:o}}function pk(t,e,n){return t[e]?Array.isArray(t[e])?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}var yIe=typeof window>"u";function $tt(t={}){let{initializeWithValue:e=!0}=t;yIe&&(e=!1);const[n,s]=_.useState(()=>e?{width:window.innerWidth,height:window.innerHeight}:{width:void 0,height:void 0}),o=_Ie(s,t.debounceDelay);function a(){(t.debounceDelay?o:s)({width:window.innerWidth,height:window.innerHeight})}return mIe("resize",a),c4(()=>{a()},[]),n}const vIe=t=>_.createElement("svg",w({viewBox:"0 0 468 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("style",null,"\n  .path1 { fill: var(--bg-primary, currentColor); }\n  .path2 { fill: var(--tab-color, rgba(0,0,0,1)); }\n"),_.createElement("g",{clipPath:"url(#clip0_3_20)"},_.createElement("mask",{id:"path-1-outside-1_3_20",maskUnits:"userSpaceOnUse",x:-1,y:7.19714,width:777,height:50,fill:"black"},_.createElement("rect",{fill:"currentColor",x:-1,y:7.19714,width:777,height:50}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z"})),_.createElement("path",{className:"path1",fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z",fill:"currentColor"}),_.createElement("path",{className:"path2",d:"M34.3496 11.2608L33.4586 10.8068L33.4586 10.8068L34.3496 11.2608ZM36.8017 8.80871L37.2557 9.69972L37.2557 9.69972L36.8017 8.80871ZM129.429 8.80871L129.883 7.9177L129.883 7.9177L129.429 8.80871ZM131.881 11.2608L130.99 11.7148L130.99 11.7148L131.881 11.2608ZM132.492 26.2161H131.492L131.492 26.23L132.492 26.2161ZM132.492 30.6417H131.492V31.6417H132.492V30.6417ZM132.492 30.6413H133.492V29.6413H132.492V30.6413ZM33.7385 30.6413V29.6413H32.7385V30.6413H33.7385ZM33.7385 30.6417V31.6417H34.7385V30.6417H33.7385ZM33.738 26.2153L34.738 26.229V26.2153H33.738ZM0 30.6421V29.6421H-1V30.6421H0ZM774.322 30.6421H775.322V29.6421H774.322V30.6421ZM0 55.3306H-1V56.3306H0V55.3306ZM774.322 55.3306V56.3306H775.322V55.3306H774.322ZM34.3496 11.2608L33.4586 10.8068C33.069 11.5714 32.8993 12.4106 32.8178 13.408C32.7372 14.3939 32.738 15.6201 32.738 17.1748H33.738H34.738C34.738 15.5871 34.7388 14.4564 34.8111 13.5709C34.8825 12.6971 35.0186 12.1505 35.2406 11.7148L34.3496 11.2608ZM36.8017 8.80871L36.3477 7.9177C35.1038 8.55152 34.0924 9.56288 33.4586 10.8068L34.3496 11.2608L35.2406 11.7148C35.6827 10.8472 36.3881 10.1418 37.2557 9.69972L36.8017 8.80871ZM42.7157 8.19714V7.19714C41.1609 7.19714 39.9347 7.19637 38.9489 7.27691C37.9514 7.35841 37.1123 7.52812 36.3477 7.9177L36.8017 8.80871L37.2557 9.69972C37.6914 9.47773 38.238 9.34166 39.1118 9.27027C39.9973 9.19792 41.1279 9.19714 42.7157 9.19714V8.19714ZM123.515 8.19714V7.19714H42.7157V8.19714V9.19714H123.515V8.19714ZM129.429 8.80871L129.883 7.9177C129.118 7.52812 128.279 7.35841 127.281 7.27691C126.295 7.19637 125.069 7.19714 123.515 7.19714V8.19714V9.19714C125.102 9.19714 126.233 9.19792 127.118 9.27027C127.992 9.34166 128.539 9.47773 128.975 9.69972L129.429 8.80871ZM131.881 11.2608L132.772 10.8068C132.138 9.56289 131.126 8.55153 129.883 7.9177L129.429 8.80871L128.975 9.69972C129.842 10.1418 130.548 10.8472 130.99 11.7148L131.881 11.2608ZM132.492 17.1748H133.492C133.492 15.6201 133.493 14.3939 133.412 13.408C133.331 12.4106 133.161 11.5714 132.772 10.8068L131.881 11.2608L130.99 11.7148C131.212 12.1505 131.348 12.6971 131.419 13.5709C131.491 14.4564 131.492 15.5871 131.492 17.1748H132.492ZM132.492 26.2161H133.492V17.1748H132.492H131.492V26.2161H132.492ZM136.981 30.6417V29.6417C135.071 29.6417 133.519 28.1059 133.492 26.2022L132.492 26.2161L131.492 26.23C131.534 29.2258 133.976 31.6417 136.981 31.6417V30.6417ZM132.492 30.6417V31.6417H136.981V30.6417V29.6417H132.492V30.6417ZM132.492 30.6413H131.492V30.6417H132.492H133.492V30.6413H132.492ZM33.7385 30.6413V31.6413H132.492V30.6413V29.6413H33.7385V30.6413ZM33.7385 30.6417H34.7385V30.6413H33.7385H32.7385V30.6417H33.7385ZM29.2492 30.6417V31.6417H33.7385V30.6417V29.6417H29.2492V30.6417ZM33.738 26.2153L32.7381 26.2016C32.712 28.1056 31.1596 29.6417 29.2492 29.6417V30.6417V31.6417C32.255 31.6417 34.6968 29.2253 34.7379 26.229L33.738 26.2153ZM33.738 17.1748H32.738V26.2153H33.738H34.738V17.1748H33.738ZM0 30.6421V31.6421H774.322V30.6421V29.6421H0V30.6421ZM0 55.3306H1V30.6421H0H-1V55.3306H0ZM774.322 55.3306V54.3306H0V55.3306V56.3306H774.322V55.3306ZM774.322 30.6421H773.322V55.3306H774.322H775.322V30.6421H774.322Z",mask:"url(#path-1-outside-1_3_20)"})),_.createElement("defs",null,_.createElement("clipPath",{id:"clip0_3_20"},_.createElement("rect",{width:468,height:55.3307,fill:"currentColor"})))),bIe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),oU="https://persistent.oaistatic.com/sandwich/26e83b2ac5b9e29e1.webp",aU="https://persistent.oaistatic.com/sandwich/2cf24dba5fb0a30e.webp",CIe="https://persistent.oaistatic.com/atlas/public/ChatGPT_Atlas.dmg";function SIe(){MF(),B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Download Clicked","chatgpt_web_aura_announcement_banner_download_clicked"),Ie.count(je.ATLAS,"chatgpt_web_aura_announcement_banner_download_clicked")}const Iy=468,jy=520,Vtt=t=>{"use forget";const e=W.c(11),{shouldShowDisclaimer:n,clientThreadId:s}=t,o=V(),[a,i]=_.useState(!1);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{i(!0),MF(),B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Dismissed","chatgpt_web_aura_announcement_banner_dismissed"),Ie.count(je.ATLAS,"chatgpt_web_aura_announcement_banner_dismissed")},e[0]=l):l=e[0];const c=l,{data:d,isLoading:u}=eo(Lt.BrowserReferenceWebHistoryInChat),f=d!==void 0;let m;e[1]!==o?(m=$5(o),e[1]=o,e[2]=m):m=e[2];const{setAuraAnnouncementBannerState:g}=m;let p,h;if(e[3]!==f||e[4]!==u||e[5]!==g?(p=()=>{u||g(f?"not-shown":"shown")},h=[f,u,g],e[3]=f,e[4]=u,e[5]=g,e[6]=p,e[7]=h):(p=e[6],h=e[7]),_.useEffect(p,h),pIe("(max-height: 660px)")||a||f||u)return null;let v;return e[8]!==s||e[9]!==n?(v=r.jsx(wIe,{shouldShowDisclaimer:n,onDismiss:c,clientThreadId:s,className:"fixed"}),e[8]=s,e[9]=n,e[10]=v):v=e[10],v};function wIe(t){"use forget";const e=W.c(31),{shouldShowDisclaimer:n,onDismiss:s,className:o,clientThreadId:a}=t,i=re(q8),l=re(TIe),[c,d]=_.useState(0);let u,f;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const D=new Image;D.src=oU,D.onload=()=>d(EIe)},f=[],e[0]=u,e[1]=f):(u=e[0],f=e[1]),_.useEffect(u,f);let m,g;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{const D=new Image;D.src=aU,D.onload=()=>d(kIe)},g=[],e[2]=m,e[3]=g):(m=e[2],g=e[3]),_.useEffect(m,g);const p=c>=2;let h,x;if(e[4]!==p?(h=()=>{p&&(B.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Shown","chatgpt_web_aura_announcement_banner_shown"),Ie.count(je.ATLAS,"chatgpt_aura_announcement_banner_shown"),HSe())},x=[p],e[4]=p,e[5]=h,e[6]=x):(h=e[5],x=e[6]),_.useEffect(h,x),!p)return null;let v,y,b;e[7]===Symbol.for("react.memo_cache_sentinel")?(v={opacity:0,y:"100%"},y={opacity:1,y:0},b={opacity:0,y:"100%"},e[7]=v,e[8]=y,e[9]=b):(v=e[7],y=e[8],b=e[9]);const C=i?0:.75;let S;e[10]!==i?(S=i?void 0:[.33,0,.05,1],e[10]=i,e[11]=S):S=e[11];let E;e[12]!==C||e[13]!==S?(E={duration:C,ease:S},e[12]=C,e[13]=S,e[14]=E):E=e[14];const k=E;let T;e[15]!==o?(T=z("pointer-events-none start-1/2 bottom-0 z-[70] -translate-x-1/2",o),e[15]=o,e[16]=T):T=e[16];const M=l?jy:Iy;let A;e[17]!==M?(A={minWidth:M},e[17]=M,e[18]=A):A=e[18];let I;e[19]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx(AIe,{className:"col-span-full row-span-full justify-self-center"}),e[19]=I):I=e[19];let N;e[20]!==s?(N=r.jsxs("div",{className:"grid w-full grid-cols-1 grid-rows-1 overflow-hidden",children:[I,r.jsx(MIe,{onDismiss:s,className:"col-span-full row-span-full self-end justify-self-center"})]}),e[20]=s,e[21]=N):N=e[21];let L;e[22]!==a||e[23]!==n?(L=n&&r.jsx("div",{className:z("text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center text-center text-xs whitespace-nowrap [view-transition-name:var(--vt-disclaimer)] md:px-[60px]"),children:r.jsx(MSe,{clientThreadId:a})}),e[22]=a,e[23]=n,e[24]=L):L=e[24];let O;return e[25]!==k||e[26]!==T||e[27]!==A||e[28]!==N||e[29]!==L?(O=r.jsx(fn,{children:r.jsxs(Xe.div,{initial:v,animate:y,exit:b,transition:k,className:T,style:A,children:[N,L]})}),e[25]=k,e[26]=T,e[27]=A,e[28]=N,e[29]=L,e[30]=O):O=e[30],O}function kIe(t){return t+1}function EIe(t){return t+1}function TIe(){return Fh()}const MIe=t=>{"use forget";const e=W.c(39),{onDismiss:n,className:s}=t,o=V(),a=Xo(),i=ne(),l=re(NIe),c=Ps(o,"1545803083");let d;e:switch(c.get("Variant",1)){case 1:default:{let D;e[0]===Symbol.for("react.memo_cache_sentinel")?(D=[Ua.atlasBannerTitleVariantOne,Ua.atlasBannerBodyVariantOne,Ua.atlasBannerCtaVariantOne],e[0]=D):D=e[0],d=D;break e}case 2:{let D;e[1]===Symbol.for("react.memo_cache_sentinel")?(D=[Ua.atlasBannerTitleVariantTwo,Ua.atlasBannerBodyVariantTwo,Ua.atlasBannerCtaVariantOne],e[1]=D):D=e[1],d=D;break e}case 3:{let D;e[2]===Symbol.for("react.memo_cache_sentinel")?(D=[Ua.atlasBannerTitleVariantThree,Ua.atlasBannerBodyVariantThree,Ua.atlasBannerCtaVariantTwo],e[2]=D):D=e[2],d=D}}const[u,f,m]=d;let g;e[3]!==s?(g=z("border-token-border-heavy grid grid-cols-1 grid-rows-[auto_1fr_24px]","bg-token-bg-primary/60","rounded-ss-xl rounded-se-xl border","[mask-image:linear-gradient(to_bottom,black_80%,transparent_100%)]","[mask-size:100%_100%] [mask-repeat:no-repeat]","pointer-events-auto relative z-10",s),e[3]=s,e[4]=g):g=e[4];const p=l?jy:Iy;let h;e[5]!==p?(h={boxShadow:"0px 4.1px 24px rgba(0, 0, 0, 0.08)",width:p},e[5]=p,e[6]=h):h=e[6];const x=a?"white":"var(--border-heavy)",v=l?jy-2:Iy-2;let y;e[7]!==x||e[8]!==v?(y=r.jsx(vIe,{"aria-hidden":"true",className:"pointer-events-none col-span-full col-start-1 row-span-1 row-start-1 w-full text-[var(--bg-primary)]",style:{"--tab-color":x,width:v}}),e[7]=x,e[8]=v,e[9]=y):y=e[9];let b;e[10]!==s?(b=z("text-token-text-tertiary hover:text-token-text-secondary flex h-9 w-9 cursor-pointer items-center justify-center bg-transparent",s),e[10]=s,e[11]=b):b=e[11];let C;e[12]!==i?(C=i.formatMessage(gt.close),e[12]=i,e[13]=C):C=e[13];let S;e[14]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx(bIe,{className:"icon-sm"}),e[14]=S):S=e[14];let E;e[15]!==n||e[16]!==b||e[17]!==C?(E=r.jsx("div",{className:"absolute end-0 top-0",children:r.jsx("button",{"data-testid":"close-button",onClick:n,className:b,"aria-label":C,children:S})}),e[15]=n,e[16]=b,e[17]=C,e[18]=E):E=e[18];let k;e[19]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("div",{className:"bg-token-bg-primary col-span-full col-start-1 row-span-2 row-start-2 -mt-1"}),e[19]=k):k=e[19];let T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(IIe,{}),e[20]=T):T=e[20];let M;e[21]!==u?(M=r.jsx("h2",{className:"text-token-text-primary text-sm font-medium",children:r.jsx(j,w({},u))}),e[21]=u,e[22]=M):M=e[22];let A;e[23]!==f?(A=r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(j,w({},f))}),e[23]=f,e[24]=A):A=e[24];let I;e[25]!==M||e[26]!==A?(I=r.jsxs("div",{className:"flex max-w-[340px] flex-col gap-0.5",children:[M,A]}),e[25]=M,e[26]=A,e[27]=I):I=e[27];let N;e[28]!==m.defaultMessage?(N=r.jsx(jIe,{ctaLabel:m.defaultMessage}),e[28]=m.defaultMessage,e[29]=N):N=e[29];let L;e[30]!==I||e[31]!==N?(L=r.jsxs("div",{className:"col-span-full col-start-1 row-start-2 -mt-2 flex min-h-[74px] flex-1 items-start gap-4 px-5",children:[T,I,N]}),e[30]=I,e[31]=N,e[32]=L):L=e[32];let O;return e[33]!==E||e[34]!==L||e[35]!==g||e[36]!==h||e[37]!==y?(O=r.jsxs("div",{className:g,style:h,children:[y,E,k,L]}),e[33]=E,e[34]=L,e[35]=g,e[36]=h,e[37]=y,e[38]=O):O=e[38],O};function AIe(t){"use forget";const e=W.c(4),{className:n}=t;let s;e[0]!==n?(s=z("pointer-events-none z-0 aspect-[752/244] h-[244px] opacity-50",n),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=r.jsx("img",{alt:"","aria-hidden":"true",src:aU,className:s}),e[2]=s,e[3]=o):o=e[3],o}function IIe(){"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("img",{alt:"","aria-hidden":"true",src:oU,className:"pointer-events-none size-10"}),t[0]=e):e=t[0],e}function jIe(t){"use forget";const e=W.c(2),{ctaLabel:n}=t;let s;return e[0]!==n?(s=r.jsx("a",{href:CIe,onClick:SIe,className:"btn btn-secondary mt-2 min-h-9 rounded-full px-3 text-sm",children:n}),e[0]=n,e[1]=s):s=e[1],s}const Ua=Se({atlasBannerTitleVariantOne:{id:"Zr7mYe",defaultMessage:"Try Atlas - ChatGPTs new browser"},atlasBannerBodyVariantOne:{id:"jYcAxk",defaultMessage:"Bring ChatGPT with you across the web for instant answers, smarter suggestions, and help with tasks."},atlasBannerTitleVariantTwo:{id:"TMWFFD",defaultMessage:"Try Atlas - a browser powered by ChatGPT"},atlasBannerBodyVariantTwo:{id:"jYcAxk",defaultMessage:"Bring ChatGPT with you across the web for instant answers, smarter suggestions, and help with tasks."},atlasBannerTitleVariantThree:{id:"D5LkgH",defaultMessage:"ChatGPT Atlas - a smarter web browser"},atlasBannerBodyVariantThree:{id:"iwqNw3",defaultMessage:"Take ChatGPT with you across the web for instant answers, smarter suggestions, and your own personal agent."},atlasBannerCtaVariantOne:{id:"IupvSa",defaultMessage:"Download"},atlasBannerCtaVariantTwo:{id:"58Al3e",defaultMessage:"Try now"}});function NIe(){return Fh()}const PIe=Be("contentOnly"),rU=Be(void 0),RIe=24;function LIe({className:t}){return r.jsx("div",{className:z("pointer-events-none fixed inset-x-0 z-21","border-b-thin hires:top-[calc(var(--header-height)-.5px)] top-[calc(var(--header-height)-1px)] border-(--bento-border-color)",t)})}function Htt(){const t=re(()=>PIe());return t==="none"?null:r.jsxs(r.Fragment,{children:[r.jsx(LIe,{}),r.jsx("div",{className:z(qR("bento"),YR,"pointer-events-none fixed inset-y-0 start-1/2 z-99 -translate-x-1/2 border-s border-e border-(--bento-border-color)","hires:[border-inline-width:0.5px] [border-inline-width:1px]",t==="contentOnly"&&"mt-(--header-height)"),style:{width:"min(100vw, calc(min(var(--thread-content-max-width), 100cqw - (var(--thread-content-margin) * 2)) + ".concat(2*RIe,"px))")}})]})}function Gtt(){const t=V(),e=es(t),n=re(it.wantsAttachUserFile$),s=ne(),o=$t(),a=wi();_.useEffect(()=>{if(!e||!n)return;it.wantsAttachUserFile$.set(!1);const i=it.attachUserFileRequest;if(it.attachUserFileRequest=void 0,!!i)try{const l=new Uint8Array(i.bytes),c=new File([l],i.name,{type:i.mimeType}),d=il(c),u=(c.type||i.mimeType).startsWith("image/"),f=u?ho.Multimodal:ho.Retrieval;rr.uploadFile(a,d,c,f,u?[i.mimeType]:[],s,o)}catch(l){Qs.error("failed to attach file",{error:l})}},[e,n,s,o,a])}function Wtt(){const t=hn(),e=An(mn);_.useEffect(()=>{if(!t||!e)return;const n=a=>{var f,m;const i=a.target;if(!i)return;const l=i.closest("a");if(!l||l.closest("[data-desktop-skip-link-handler]"))return;const c=l.getAttribute("href");if(!c)return;const d=(f=l.getAttribute("target"))!=null?f:"",u=e6(c,document.baseURI);u&&(qz(a)||(a.preventDefault(),(m=t6())==null||m.handleLink(u.href,d)))};document.addEventListener("click",n,{capture:!0});const s=window.open,o=(a,i,l)=>{var u;const c=typeof a=="string"?a:a==null?void 0:a.toString();if(!c)return s.call(window,a,i,l);const d=e6(c,document.baseURI);return d?((u=t6())==null||u.handleLink(d.href,i!=null?i:""),null):s.call(window,a,i,l)};return window.open=o,()=>{document.removeEventListener("click",n,{capture:!0}),window.open=s}},[t,e])}function OIe(t){return t.width!==void 0&&t.height!==void 0}function DIe(t,e){var i;const n=(i=e==null?void 0:e.filter(OIe))!=null?i:[];if(n.length===0)return{content_type:ut.Text,parts:[t]};const s=n.map(l=>{var c,d;return{content_type:ba.ImageAssetPointer,asset_pointer:z2((c=l.id)!=null?c:""),size_bytes:(d=l.size)!=null?d:0,width:l.width,height:l.height}}),o=t,a=[...s,o];return{content_type:ut.MultimodalText,parts:a}}function ztt(t,e){"use forget";const n=W.c(25),s=V();let o;n[0]!==s?(o=()=>[es(s),mn(s)],n[0]=s,n[1]=o):o=n[1];const[a,i]=re(o),l=re(it.wantsRequestCompletion$),c=re(it.sidebarUrlTrayOpen$),d=at(),u=Vn();let f;n[2]!==s?(f=Oh(s),n[2]=s,n[3]=f):f=n[3];const m=f;let g;n[4]!==m||n[5]!==t||n[6]!==s||n[7]!==a||n[8]!==u.search||n[9]!==d||n[10]!==e||n[11]!==c||n[12]!==l?(g=()=>{if(!a||!l)return;it.wantsRequestCompletion$.set(!1);const h=it.requestCompletion;if(!h)return;const x=e5({namespace:fm.CompletionRequest,opts:{debug:!1}});x.reset();const v=function(E){E&&Ff(xt(s,t),E)},y=function(E){if(!E)return;const{prepareState:k,lastPrepareTimestamp:T,conduitToken:M}=E;Ze(t,A=>{A.prepareState=k,A.lastPrepareTimestamp=T,A.conduitToken=M!=null?M:null})},b=async function(E,k,T,M,A){var Q,q,Y,te;const I=(Q=it.tabContext)==null?void 0:Q[0],N=c&&m,L=DIe(E,it.attachments),O=w(w(w(w({},k.length>0&&{system_hints:k}),((q=it.attachments)==null?void 0:q.length)&&{attachments:it.attachments}),await Lh(N?I:void 0,(Y=it.promptOrigin)!=null?Y:"unknown","user",k)),M!==void 0&&{n7jupd_local_safe_mode:M}),D=is(L,O),$=N?await Kz(I,(te=it.promptOrigin)!=null?te:"unknown",k,t):void 0,H={kind:wt.PrimaryAssistant},G=w({conversationMode:H},k.length>0&&{systemHints:k});return{promptMessage:D,prependMessages:$&&$.length>0?$:void 0,requestedModelId:T!==""?T:void 0,completionMetadata:G,eventSource:"url",conduitToken:A}},C=function(){it.requestCompletion=void 0,it.attachments=void 0,it.prepareConversationDetails=void 0,it.whisperContent=void 0,it.tabContext=void 0,it.promptOrigin=void 0};v(h.modelSlug),y(it.prepareConversationDetails),(async()=>{var k;const S=await b(h.prompt,h.systemHints,h.modelSlug,h.n7jupdLocalSafeMode,(k=it.prepareConversationDetails)==null?void 0:k.conduitToken);S.profiler=x;const E=gi(s)&&it.promptOrigin!=="ntp"?!0:void 0;if(C(),gi(s)){const T=new URLSearchParams(u.search);T.set(Yz,Zz.value),d({pathname:"/",search:T.toString()},{replace:E})}e(S)})()},n[4]=m,n[5]=t,n[6]=s,n[7]=a,n[8]=u.search,n[9]=d,n[10]=e,n[11]=c,n[12]=l,n[13]=g):g=n[13];let p;n[14]!==m||n[15]!==t||n[16]!==s||n[17]!==a||n[18]!==i||n[19]!==u.search||n[20]!==d||n[21]!==e||n[22]!==c||n[23]!==l?(p=[s,a,l,t,e,c,m,i,u.search,d],n[14]=m,n[15]=t,n[16]=s,n[17]=a,n[18]=i,n[19]=u.search,n[20]=d,n[21]=e,n[22]=c,n[23]=l,n[24]=p):p=n[24],_.useEffect(g,p)}function qtt(t){"use forget";const e=W.c(36),n=V();let s;e[0]!==n?(s=es(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=Vn(),i=at(),l=re(t.serverId$),c=It(),d=re(it.wantsModelSlug$),u=re(it.selectedConversationId$),f=re(it.wantsNewConversation$),m=re(it.newConversationGizmoId$),g=eN();let p;e[2]!==a.pathname||e[3]!==i?(p=T=>{Tr(i,{replace:a.pathname==="/",config:T})},e[2]=a.pathname,e[3]=i,e[4]=p):p=e[4];const h=va(p);let x,v;e[5]!==o||e[6]!==m||e[7]!==h||e[8]!==f?(x=()=>{if(!o||!f)return;it.wantsNewConversation$.set(!1),h(m?{urlGizmoId:m}:void 0)},v=[o,f,m,h],e[5]=o,e[6]=m,e[7]=h,e[8]=f,e[9]=x,e[10]=v):(x=e[9],v=e[10]),_.useEffect(x,v);let y;e[11]!==o||e[12]!==g?(y=()=>{!o||!g||it.selectedConversationId$.set(void 0)},e[11]=o,e[12]=g,e[13]=y):y=e[13];let b;e[14]!==o||e[15]!==g||e[16]!==h?(b=[o,g,h],e[14]=o,e[15]=g,e[16]=h,e[17]=b):b=e[17],_.useEffect(y,b);let C,S;e[18]!==n||e[19]!==o||e[20]!==i||e[21]!==g||e[22]!==c||e[23]!==u||e[24]!==l?(C=()=>{o&&u&&(gi(n)&&g||u!==l&&yv(i,c,u))},S=[o,u,g,i,c,l,n],e[18]=n,e[19]=o,e[20]=i,e[21]=g,e[22]=c,e[23]=u,e[24]=l,e[25]=C,e[26]=S):(C=e[25],S=e[26]),_.useEffect(C,S);let E;e[27]!==t||e[28]!==o||e[29]!==d?(E=()=>{o&&d&&(it.wantsModelSlug$.set(void 0),Ff(t,d))},e[27]=t,e[28]=o,e[29]=d,e[30]=E):E=e[30];let k;e[31]!==t||e[32]!==n||e[33]!==o||e[34]!==d?(k=[o,d,t,n],e[31]=t,e[32]=n,e[33]=o,e[34]=d,e[35]=k):k=e[35],_.useEffect(E,k)}function FIe(t){"use forget";var A;const e=W.c(32),{action:n,ChatsIcon:s,FileBlankIcon:o,hintIcons:a,onItemClick:i,starter:l,index:c,hint:d}=t;let u,f,m,g=!1;e:switch(n.action_type){case"chat":{u=n.title,f=n.message,m=(A=n.system_hint)!=null?A:void 0,g=m==="agent";break e}case"navigation":u=n.title,f=n.subtitle||n.url}let p;e[0]!==s||e[1]!==a?(p=function(N){"use forget";const{hint:L}=N;if(L){const O=a==null?void 0:a[L];if(O){const D=O;return r.jsx(D,{className:"block h-4 w-4 text-token-text-primary","aria-hidden":!0})}}return r.jsx(s,{className:"block h-4 w-4 text-token-text-primary"})},e[0]=s,e[1]=a,e[2]=p):p=e[2];const h=p;if(!u)return null;let x;e[3]!==d||e[4]!==c||e[5]!==i||e[6]!==l?(x=I=>i(I,l,c,d),e[3]=d,e[4]=c,e[5]=i,e[6]=l,e[7]=x):x=e[7];let v;e[8]!==h||e[9]!==o||e[10]!==n.action_type||e[11]!==n.system_hint?(v=r.jsx("div",{className:"mt-[2px] shrink-0 self-start","aria-hidden":!0,children:n.action_type==="chat"?r.jsx(h,{hint:n.system_hint}):r.jsx(o,{className:"text-token-text-primary block h-4 w-4"})}),e[8]=h,e[9]=o,e[10]=n.action_type,e[11]=n.system_hint,e[12]=v):v=e[12];let y;e[13]===Symbol.for("react.memo_cache_sentinel")?(y=z("min-w-0 flex-1 overflow-hidden [mask-image:linear-gradient(to_right,black_85%,transparent_100%)] [-webkit-mask-image:linear-gradient(to_right,black_85%,transparent_100%)]"),e[13]=y):y=e[13];let b;e[14]!==u?(b=r.jsx("div",{className:"text-token-text-primary text-sm leading-5 whitespace-nowrap",children:u}),e[14]=u,e[15]=b):b=e[15];let C;e[16]!==g?(C=g&&r.jsx("span",{className:"ms-1 inline-flex shrink-0 items-center rounded-full px-1.5 py-px text-xs",style:{color:"var(--colors-fills-accented-fill-a-prominent, #007AFD)",background:"var(--colors-fills-accented-fill-a-subtle, rgba(0, 122, 253, 0.10))"},children:r.jsx(j,{id:"4ufBv1",defaultMessage:"NEW"})}),e[16]=g,e[17]=C):C=e[17];let S;e[18]!==b||e[19]!==C?(S=r.jsxs("div",{className:"flex items-center gap-2",children:[b,C]}),e[18]=b,e[19]=C,e[20]=S):S=e[20];let E;e[21]!==f?(E=f?r.jsx("div",{className:"text-token-text-secondary mt-1 text-sm whitespace-nowrap",children:f}):null,e[21]=f,e[22]=E):E=e[22];let k;e[23]!==S||e[24]!==E?(k=r.jsx("div",{className:"min-w-0 flex-1",children:r.jsx("div",{className:"flex min-w-0 items-start gap-2",children:r.jsxs("div",{className:y,children:[S,E]})})}),e[23]=S,e[24]=E,e[25]=k):k=e[25];let T;e[26]!==v||e[27]!==k?(T=r.jsxs("div",{className:"flex items-start gap-2 overflow-hidden",children:[v,k]}),e[26]=v,e[27]=k,e[28]=T):T=e[28];let M;return e[29]!==T||e[30]!==x?(M=r.jsx("li",{className:"w-full",children:r.jsx("button",{type:"button",onClick:x,className:"relative w-full rounded-xl py-3 ps-3.5 pe-3 text-start transition-colors hover:bg-black/5 dark:hover:bg-white/5",children:T})}),e[29]=T,e[30]=x,e[31]=M):M=e[31],M}const iU={agent:()=>P(()=>import("./mdnk8dee8jm04405.js"),__vite__mapDeps([50,1])),tatertot:()=>P(()=>Promise.resolve().then(()=>$1),void 0),search:()=>P(()=>Promise.resolve().then(()=>Ir),void 0),picture_v2:()=>P(()=>Promise.resolve().then(()=>xm),void 0),reason:()=>P(()=>import("./nzc19yp45z5gjstv.js"),__vite__mapDeps([49,1])),canvas:()=>P(()=>import("./8yatsd42k1ox8n2w.js"),__vite__mapDeps([24,1])),research:()=>P(()=>import("./chuo6dbwu6l4alpy.js"),__vite__mapDeps([47,1]))},BIe=Promise.all([P(()=>import("./lljm2enx48t0mwrk.js"),__vite__mapDeps([54,1])),P(()=>import("./fx4tif7av4x5mmpn.js"),__vite__mapDeps([245,1]))]).then(([t,e])=>({ChatsIcon:t.default,FileBlankIcon:e.default})),Iu=new Map,h2=new Map;function UIe(t){var n;const e=new Set;for(const s of t){if(s.action_type!=="chat")continue;const o=(n=s.system_hint)!=null?n:void 0;o&&(Iu.has(o)||iU[o]&&e.add(o))}return Array.from(e)}async function $Ie(t){if(t.length===0)return{};await Promise.all(t.map(n=>{if(Iu.has(n))return Promise.resolve();const s=iU[n];if(!s)return Promise.resolve();let o=h2.get(n);return o||(o=s().then(a=>{Iu.set(n,a.default)}).catch(()=>{Iu.delete(n)}).finally(()=>{h2.delete(n)}),h2.set(n,o)),o}));const e=t.map(n=>{const s=Iu.get(n);return s?[n,s]:null}).filter(Boolean);return Object.fromEntries(e)}function VIe(t,e){const[n,s]=_.useState(null),[o,a]=_.useState({}),[i,l]=_.useState(t),[c,d]=_.useState(e);return _.useEffect(()=>{const u=UIe(t);if(n&&u.length===0){l(t),d(e);return}let f=!1;async function m(){const[g,p]=await Promise.all([n?Promise.resolve(n):BIe,$Ie(u)]);f||(s(g),Object.keys(p).length>0&&a(h=>w(w({},h),p)),l(t),d(e))}return m(),()=>{f=!0}},[n,t,e]),{icons:n,hintIcons:o,items:i,suggestions:c}}function HIe(t){"use forget";const e=W.c(13),{items:n,suggestions:s,onItemClick:o}=t,{icons:a,hintIcons:i,items:l,suggestions:c}=VIe(n,s);if(!a)return null;let d;if(e[0]!==i||e[1]!==a||e[2]!==o||e[3]!==l||e[4]!==c){let f;e[6]!==i||e[7]!==a||e[8]!==o||e[9]!==c?(f=(m,g)=>{var x,v;const p=c[g];if(!p)return null;const h=m.action_type==="chat"&&(x=m.system_hint)!=null?x:null;return r.jsx(FIe,{action:m,ChatsIcon:a.ChatsIcon,FileBlankIcon:a.FileBlankIcon,hintIcons:i,onItemClick:o,starter:p,index:g,hint:h},(v=m.id)!=null?v:m.title)},e[6]=i,e[7]=a,e[8]=o,e[9]=c,e[10]=f):f=e[10],d=l.map(f),e[0]=i,e[1]=a,e[2]=o,e[3]=l,e[4]=c,e[5]=d}else d=e[5];let u;return e[11]!==d?(u=r.jsx("ul",{className:"flex w-full flex-col gap-2",children:d}),e[11]=d,e[12]=u):u=e[12],u}class GIe{static async getOnPageSuggestions({source:e="kaur1br5_chat",current_page:n}){return await ge.safePost("/kaur1br5/suggestions",{requestBody:{source:e,current_page:n}})}}const lU=300*1e3,cU=1800*1e3,WIe=Hn(t=>{const e=rs(t,"2712016364"),n=e.get("staleTimeMs",lU),s=e.get("gcTimeMs",cU);return{staleTime:n,gcTime:s}}),zIe=(t,e,n,s)=>w({queryKey:["kaur1br5","kaur1br5Suggestions",n!=null?n:"anon",t],enabled:!!t&&!!e,staleTime:lU,gcTime:cU,refetchOnWindowFocus:!1,queryFn:async()=>{if(!t||!e)throw new Error("Missing url or title for on-page suggestions request.");return await GIe.getOnPageSuggestions({source:"kaur1br5_chat",current_page:{url:t,title:e}})}},s!=null?s:{});function qIe(t,e,n){"use forget";var l;const s=W.c(8),o=V();let a,i;if(s[0]!==o||s[1]!==n||s[2]!==e||s[3]!==t){const c=st(o),d=(l=c==null?void 0:c.id)!=null?l:void 0,{staleTime:u,gcTime:f}=WIe(o);let m;s[6]!==o?(m=ve(o,"3830740688"),s[6]=o,s[7]=m):m=s[7];const g=m;a=rt,i=zIe(t,e,d,{enabled:!!(t&&e&&!n&&g),staleTime:u,gcTime:f}),s[0]=o,s[1]=n,s[2]=e,s[3]=t,s[4]=a,s[5]=i}else a=s[4],i=s[5];return a(i)}function YIe(t,e,n){B.logEventWithStatsig("kaur1br5: Suggested Action Displayed","chatgpt_suggested_action_displayed",dU(t,e,n))}function ZIe(t,e,n){B.logEventWithStatsig("kaur1br5: Suggested Action Selected","chatgpt_suggested_action_selected",dU(t,e,n))}function dU(t,e,n){var o;const s={location:n.location,impression_id:n.impression_id,suggestion_index:e,suggestion_id:(o=t.id)!=null?o:null,suggestion_type:t.action_type};return n.page_classification_domain&&(s.page_classification_domain=n.page_classification_domain),n.page_classification_type&&(s.page_classification_type=n.page_classification_type),t.action_type==="chat"&&t.system_hint&&(s.system_hint=t.system_hint),s}const hk="default_agent_suggestion",KIe=[{reason:"Default suggestion",action_type:"chat",id:os(),title:"Summarize",message:"Summarize this content"},{reason:"Default suggestion",action_type:"chat",id:os(),title:"Learn more",message:"Find related information and links to this content",system_hint:"search"},{reason:"Default suggestion",action_type:"chat",id:os(),title:"What can I do here?",message:"Suggest useful actions for this content"}];function QIe(t){var s,o;let e="";switch(t.action_type){case"chat":e=t.message;break;case"navigation":e=t.title;break}const n=t.action_type==="chat"&&t.system_hint?Q3(String(t.system_hint)):void 0;return{type:Je.Starter,title:(s=t.title)!=null?s:"",body:"",prompt:String(e!=null?e:""),id:(o=t.id)!=null?o:void 0,data:w({},n?{system_hint:n}:{})}}function JIe(){"use no forget";var G,Z,Q;const t=V(),e=re(it.context$),n=e==null?void 0:e.url,s=e==null?void 0:e.title,o=(G=e==null?void 0:e.blocked)!=null?G:!1,a=re(()=>PT(t)),i=ve(t,"292680291"),l=o||a||!i,{data:c,isLoading:d}=qIe(n,s,l),u=Od(),f=gr.useStore(),{activeSystemHintType:m,activeConnectorSystemTypes:g}=gr.useState(q=>({activeSystemHintType:q.activeSystemHintType,activeConnectorSystemTypes:q.activeConnectorSystemTypes})),{store:p}=Ld(),h=_.useRef(void 0),[x,v]=_.useState(null);_.useEffect(()=>{let q=!1;async function Y(){if(e&&e.url&&e.title){const te=await Lh(e,S6e,"user");q||v(te)}}return Y(),()=>{q=!0}},[e]),_.useEffect(()=>{if(l){h.current=void 0;return}c&&(h.current=c)},[c,l]);const y=!e||!e.url||!e.title,b=l?void 0:c!=null?c:h.current,S=!(b!==void 0)&&(d||y)||!x||l,E=b==null?void 0:b.actions,k=_.useMemo(()=>{if(l)return[];const q=E!=null?E:[],Y=3,te=new Set;m&&te.add(m);for(const ee of g)te.add(ee);const ae=te.size>0,se=ee=>{if(!ae)return!0;if(ee.action_type!=="chat"||!ee.system_hint)return!1;const ie=Q3(ee.system_hint);return ie?te.has(ie):!1},ce=q.filter(ee=>ae&&ee.id===hk?!1:se(ee));if(ae)return ce.slice(0,Y);const X=q.slice(0,Y);return X.length>0?X:KIe.slice(0,Y)},[g,m,l,E]),T=_.useMemo(()=>k.map(q=>{var ae;const Y=QIe(q),te=w(w({},(ae=Y.data)!=null?ae:{}),x!=null&&x.kaur1br5?{kaur1br5:x.kaur1br5}:{});return U(w({},Y),{data:te})}),[k,x]),M=_.useMemo(()=>k.map((q,Y)=>{var te,ae;return"".concat((ae=(te=q.id)!=null?te:q.title)!=null?ae:"","-").concat(Y)}).join("|"),[k]),A=_.useRef(os());_.useEffect(()=>{A.current=os()},[M]);const I=(Z=b==null?void 0:b.id)!=null?Z:A.current,N=_.useMemo(()=>{var q,Y;return{location:"sidebar",impression_id:I,page_classification_domain:(q=b==null?void 0:b.page_classification)==null?void 0:q.domain,page_classification_type:(Y=b==null?void 0:b.page_classification)==null?void 0:Y.page_type}},[b,I]),L=_.useRef(null);_.useEffect(()=>{S||k.length===0||L.current!==I&&(L.current=I!=null?I:null,k.forEach((q,Y)=>{YIe(q,Y,N)}))},[N,I,S,k]);const O=re(()=>Mo(t)),D=(Q=st(t))==null?void 0:Q.isWorkspaceAccount(),$=(q,Y,te,ae)=>{var se;if(k[te]&&ZIe(k[te],te,N),f.setActiveSystemHint(ae,O,{locked:!1},D),((se=Y.data)==null?void 0:se.system_hint)==="agent"){const ce=p.getSharedProps();if(ce!=null&&ce.composerController){const X=Pt(ce.composerController);if(Y.id===hk)return;_o(X,Y.prompt)}return}u(q,Y,T,te)};return{shouldShowSuggestions:!S&&k.length>0,items:k,suggestions:T,handleItemClick:$}}const XIe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.ys),__vite__mapDeps([10,1,11])).then(t=>t.OpenaiLogo));function eje(){return r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsx(XIe,{className:"h-11 w-11 opacity-40"})})}function Ytt(){"use forget";const t=W.c(5),{shouldShowSuggestions:e,items:n,suggestions:s,handleItemClick:o}=JIe();if(!e){let i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(eje,{}),t[0]=i):i=t[0],i}let a;return t[1]!==o||t[2]!==n||t[3]!==s?(a=r.jsx("div",{className:"mt-auto w-full ps-2.5 pe-3 pt-4 pb-3",children:r.jsx(HIe,{items:n,suggestions:s,onItemClick:o})}),t[1]=o,t[2]=n,t[3]=s,t[4]=a):a=t[4],a}const Zd=t=>ve(t,"1424158285"),Kd=t=>rs(t,"1535193150"),Ztt=t=>{const e=Kd(t);return Zd(t)&&e.get("journal_homepage_url_icon_enabled",!1)},Ktt=t=>{const e=Kd(t);return Zd(t)&&e.get("show_web_page_file_refs",!1)},Qtt=t=>{const e=Kd(t);return Zd(t)&&!e.get("show_turn_search_sources",!0)},Jtt=t=>{const e=Kd(t);return Zd(t)?e.get("file_ref_type_order",[]):[]},Xtt=t=>{const e=Kd(t);return!!(Zd(t)&&e.get("render_web_results_like_files",!1))},ent=t=>{const e=Kd(t);return Zd(t)?e.get("custom_thread_classes",""):""},uU=1e3*60*60;let _2;function tje(){(_2===void 0||Date.now()-_2>uU)&&(Zp.prewarmRealtimeVoice(),_2=Date.now())}function nje(t){if(tt(t)&&ve(t,"422449809")&&W1(t)){let e;const n=()=>{tje(),e=window.setTimeout(()=>{n()},uU)};return n(),()=>window.clearTimeout(e)}}const sje=m3(he.lastUserMessage);function x2(t){Cl().then(e=>{t(e.getHost())}).catch(()=>{})}function oje(t,e){const n=xt(t,e),s=St(()=>{const i=Ji(n);return i?i.filter(l=>l.role===Ke.User).length:0}),o=St(()=>{var c;const i=sje(n);if(!i)return!1;const l=(c=i.metadata)==null?void 0:c.system_hints;return l!=null&&l.length?l.some(d=>d!=null&&d!==Pe.Search):!1});let a;return Rl(()=>{if(!Ko(t)){a=void 0;return}if(!br(e)){a=void 0;return}const i=n.serverId$();if(!i){a=void 0;return}(a==null?void 0:a.conversationId)!==i&&(a=void 0);const l=s(),c=o();if(l>0&&c){if((a==null?void 0:a.status)==="enqueued"&&a.conversationId===i){const u=i;x2(f=>f.cancelConversationArchive(u))}else(a==null?void 0:a.status)!=="cancelled"||a.conversationId;a={conversationId:i,status:"cancelled"};return}if(l===1){if((a==null?void 0:a.status)==="enqueued")return;a={conversationId:i,status:"enqueued"};const d=i;x2(u=>u.enqueueConversationArchive(d));return}if(l>1&&(a==null?void 0:a.status)==="enqueued"&&a.conversationId===i){a={conversationId:i,status:"cancelled"};const d=i;x2(u=>u.cancelConversationArchive(d))}})}function aje(t){return Xn({queryKey:["conversation",t,"stream-status"],queryFn:async()=>t?await ge.safeGet("/conversation/{conversation_id}/stream_status",{parameters:{path:{conversation_id:t}}}):null})}function rje(t,e){return Sa(t,()=>aje(e))}function ije(t,e){const n=xt(t,e),s=St(()=>{const o=n.serverId$();return o==null?null:rje(t,o)()});return Ch(()=>{var c;const o=iv(n),a=s(),i=n.serverId$();return i==null||o||((c=a==null?void 0:a.data)==null?void 0:c.status)!=="IS_STREAMING"?!1:Fu.get(i)!=null},()=>{if(!ze(t,"2489999880").get("is_resume_over_reloads_enabled",!1))return;const o=Ks(bn(n.serverId$)),a=Ks(Fu.get(o));ZX({ctx:t,conversation:n,completionType:Qa.Continue,serverThreadId:o,token:a})})}function tnt(t,e){const n=[nje(t),oje(t,e),ije(t,e)];return()=>{n.forEach(s=>s==null?void 0:s())}}const lje=R(()=>P(()=>import("./jexchgabyqje5te2.js"),__vite__mapDeps([434,1])),{loading:t=>F(t)});function nnt({clientThreadId:t}){const e=It(),n=Kn(t),s=Ve(t,he.getGizmoId),o=async()=>{n&&(await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n}},requestBody:{is_archived:!1},intercomEventOnError:"fetch-error:conversation:edit"}),e.invalidateQueries(Uh({clientThreadId:t})),Ze(n,a=>{a.isArchived=!1}),Xs(e,s))};return r.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[r.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:r.jsx(j,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),r.jsx("div",{children:r.jsx(ye,{disabled:!n,onClick:o,icon:lje,children:r.jsx(j,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const snt=Ef(()=>({marginBottom$:Be(null),height$:Be(null)})),cje=R(()=>P(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([147,1])),{loading:t=>F(t)}),dje=R(()=>P(()=>Promise.resolve().then(()=>vm),void 0),{loading:t=>F(t)}),uje=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)}),fje=R(()=>P(()=>import("./3v81d4lxjbd6t67s.js"),__vite__mapDeps([435,1])),{loading:t=>F(t)}),mje=R(()=>P(()=>import("./fwocbk6epi4fc55y.js"),__vite__mapDeps([436,1])),{loading:t=>F(t)}),gje=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),pje=R(()=>P(()=>import("./q264k2ztz0dic0dr.js"),__vite__mapDeps([144,1])),{loading:t=>F(t)}),hje=R(()=>P(()=>import("./f5rn2or9jvd4bjqj.js"),__vite__mapDeps([437,1,10,11,438])));function ont({selectedDomain:t,verifiedDomains:e,domains:n,onChangeDomain:s}){const[o,a]=_.useState(!1),i=e.length>0,l=V(),c=st(l),d=c==null?void 0:c.id,u=c==null?void 0:c.isEnterprisey(),{mutateAsync:f}=Vne(d);return r.jsxs("div",{className:"font-normal",children:[r.jsxs(K.Root,{children:[r.jsx(Qz,{children:r.jsxs("span",{className:"flex items-center gap-2 py-2",children:[t!=null?t:r.jsx(j,w({},Ny.selectADomain)),r.jsx(pje,{className:"icon"})]})}),r.jsx(K.Portal,{children:r.jsxs(K.Content,{children:[r.jsx(K.RadioGroup,{value:t,onValueChange:m=>{m!==t&&s(m)},children:e.map(({id:m,hostname:g})=>r.jsx(K.RadioItem,{value:g,children:r.jsxs("div",{className:"flex flex-row",children:[r.jsx("span",{children:g}),r.jsx("span",{onClick:()=>{f({domainId:m}),s("")},children:r.jsx(cje,{className:"icon-sm fixed end-4"})})]})},m))}),i&&r.jsx(K.Separator,{}),r.jsx(K.Item,{onClick:()=>{a(!0)},icon:dje,children:r.jsx(j,w({},Ny.addDomain))})]})})]}),d&&!u&&r.jsx(hje,{domains:n,isOpen:o,onClose:()=>a(!1),workspaceId:d,showUnverifiedDomains:!0,onVerifyDomain:m=>{s(m.hostname)}})]})}function _je(){const t=It();return qt({mutationFn:({verifierType:e})=>w3.unverifySocialAuth(e),onSuccess:()=>{t.refetchQueries({queryKey:["builderProfile"]})}})}function xje({socialData:t}){const{type:e,display_name:n,verified_data:s}=t,o=e==="linkedin"?fje:e==="github"?mje:null;return o?r.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[r.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[o({className:"icon"}),r.jsx("span",{children:n})]}),(s==null?void 0:s.link_to)&&r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:s.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:r.jsx(uje,{className:"icon-sm"})})]}):null}function ant({socialData:t,icon:e}){const{id:n,type:s,display_name:o,verified:a,verified_data:i}=t,[l,c]=_.useState(!1),d=_je();return r.jsxs("div",{className:"flex flex-row items-center justify-between space-y-1",children:[r.jsxs("div",{className:z("flex items-center space-x-2"),children:[r.jsx(e,{className:"icon-sm"}),r.jsx("span",{children:o}),a&&(i==null?void 0:i.username)&&r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:i.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:i==null?void 0:i.username})]}),a?r.jsx("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{d.mutate({verifierType:s})},children:d.isPending?r.jsx(ws,{}):r.jsx(gje,{className:"icon-sm text-token-text-tertiary"})}):r.jsx(ye,{size:"small",color:"secondary",loading:l,onClick:async()=>{c(!0),await Jz({id:n},"#settings/".concat(Pn.Account)),c(!1)},children:r.jsx(j,w({},Ny.verify))})]})}const Ny=Se({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}}),yje=R(()=>P(()=>import("./nevgytedezvd3xx4.js"),__vite__mapDeps([439,1])),{loading:t=>F(t)}),vje=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)}),fU=R(()=>P(()=>Promise.resolve().then(()=>Ir),void 0),{loading:t=>F(t)}),bje=R(()=>P(()=>import("./3v81d4lxjbd6t67s.js"),__vite__mapDeps([435,1])),{loading:t=>F(t)}),Cje=R(()=>P(()=>import("./fwocbk6epi4fc55y.js"),__vite__mapDeps([436,1])),{loading:t=>F(t)});var wE;const Sje=ft.div(wE||(wE=ct(["text-sm text-token-text-tertiary"]))),wje="community builder";function kje(t){const[e,n]=_.useState(t),s=_.useRef(null),o=(a,i)=>{s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{n(a),s.current=null},i)};return _.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),[e,o]}function Eje(t){return"gizmo"in t}function _k({gizmo:t,builderName:e,builderUrl:n,className:s,socials:o,hideLink:a=!1}){const i=V(),l=ve(i,"2256850471");let c,d;t&&Eje(t)?(c=t.gizmo.author.display_name,d=t.gizmo.author.link_to):(c=e,d=n),(c===""||c==null)&&(c=wje);const u=o==null?void 0:o.filter(m=>m.verified),f=r.jsxs("div",{className:"w-48 space-y-4 text-sm",children:[d&&r.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[r.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[r.jsx(fU,{className:"icon"}),r.jsx("span",{children:r.jsx(j,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:d,className:"text-token-text-tertiary hover:cursor-pointer",children:r.jsx(vje,{className:"icon-sm"})})]}),l&&(u==null?void 0:u.map((m,g)=>m.verified?r.jsx(xje,{socialData:m},g):null)),r.jsxs("div",{className:"text-token-text-tertiary text-xs",children:[(d||u&&u.length>0)&&r.jsx("hr",{className:"border-token-border-default my-2"}),r.jsx(j,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return r.jsxs("div",{className:"flex flex-row items-center space-x-1",children:[r.jsx(Sje,{className:s,children:r.jsx(j,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:c}})}),!a&&r.jsx(Tje,{socials:o,website:d,children:f})]})}function Tje({website:t,socials:e,children:n}){const[s,o]=kje(!1);let a=[];t&&a.push(r.jsx(fU,{className:"icon-xs text-token-text-secondary"})),e&&e.forEach(l=>{l.verified&&(l.type==="linkedin"?a.push(r.jsx(bje,{className:"icon-xs text-token-text-secondary"})):l.type==="github"&&a.push(r.jsx(Cje,{className:"icon-xs text-token-text-secondary"})))});const i=a.length-2;return a=a.slice(0,2),i>0&&a.push(r.jsxs("span",{className:"text-token-text-secondary text-xs font-semibold",children:["+",i]},"overflow")),r.jsx(Dl,{open:s,onOpenChange:l=>o(l,0),children:r.jsxs("div",{onPointerLeave:()=>o(!1,300),children:[r.jsx(yr,{asChild:!0,children:r.jsx("div",{onPointerEnter:()=>o(!0,0),className:"cursor-pointer",children:a.length>0?r.jsx("div",{className:"bg-token-main-surface-secondary flex items-center gap-1 rounded-xl px-2 py-1",children:a}):r.jsx(yje,{className:"icon-xs text-token-text-secondary"})})}),r.jsx(Fl,{children:r.jsx(Bl,{side:"top",sideOffset:8,align:"center",className:"bg-token-main-surface-primary z-10 rounded-lg p-4 drop-shadow-md",children:r.jsx("div",{onPointerEnter:()=>o(!0,0),children:n})})})]})})}const Mje=R(()=>P(()=>import("./kaw18xu9jo85v1g9.js"),__vite__mapDeps([26,1])),{loading:t=>F(t)}),Aje=R(()=>P(()=>import("./up4p8fwl1sob5zne.js"),__vite__mapDeps([384,1])),{loading:t=>F(t)}),Ije=R(()=>P(()=>import("./jro698t78r3v26vt.js"),__vite__mapDeps([440,1,10,11,349,350,345,346,347,348,317,0])).then(t=>t.SnorlaxSplashScreen)),rnt=({conversation:t,currentModelId:e,onRequestCompletion:n,gizmoId:s})=>{const o=V(),{data:a}=Ci(s),i=jl(o,s),l=tq();return a==null?null:i?r.jsx(Ije,{conversation:t,gizmoId:s,currentModelId:e,onRequestCompletion:n}):r.jsx(jje,{gizmo:a,showStarterPrompts:!0,disableStarterPrompts:l,clientThreadId:t.id,currentModelId:e})};function jje({gizmo:t,hideOwner:e=!1,children:n,className:s,avatarClassName:o,showStarterPrompts:a=!1,disableStarterPrompts:i=!1,clientThreadId:l,currentModelId:c}){return t==null?null:r.jsx(r.Fragment,{children:r.jsxs("div",{className:z("text-token-text-primary flex h-full flex-col items-center justify-center","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",s),children:[r.jsx(Nje,{gizmo:t,avatarClassName:o}),r.jsx(Rje,{gizmo:t,hideOwner:e,showStarterPrompts:a,disableStarterPrompts:i,clientThreadId:l,currentModelId:c}),n]})})}function Nje({gizmo:t,avatarClassName:e}){var s;const n=!!(t!=null&&Xz(t)&&((s=t==null?void 0:t.gizmo.tags)!=null&&s.includes(sp.FirstParty)));return r.jsx("div",{className:"relative",children:r.jsx(V1,{isFirstParty:n||!t,src:t!=null&&vc(t)?t.profilePictureUrl:t==null?void 0:t.gizmo.display.profile_picture_url,className:z("mb-3 h-12 w-12",e)})})}function Pje({gizmo:t,disabled:e}){const n=vy(t),s=Od(),o=Eo();if(n==null||n.length===0)return null;const a=n.slice(0,o?2:4);return r.jsx(Oje,{starterPrompts:a,onSelectStarterPrompt:s,disabled:e})}function Rje({gizmo:t,hideOwner:e,showStarterPrompts:n,disableStarterPrompts:s,clientThreadId:o,currentModelId:a}){var v;const i=V(),l=re(()=>KT(i,{isGizmo:!0})),{data:c,isLoading:d}=re(()=>XT(i)),u=t!=null&&vc(t)?t.name:t==null?void 0:t.gizmo.display.name,f=t!=null&&vc(t)?t.description:t==null?void 0:t.gizmo.display.description,m=c==null?void 0:c.model_override,g=t!=null&&vc(t)?t.defaultModel:t==null?void 0:t.gizmo.default_model,p=g?m!=null&&m[g]?l.models.get(m==null?void 0:m[g]):l.models.get(g):null,h=(v=st(i))==null?void 0:v.hasPaidFeatures(),x=_.useCallback(()=>{!o||!p||(B.logEvent("GPTs: Landing Preferred Model Switch",{from:a,to:p.id}),qe.logEvent("chatgpt_gpts_landing_preferred_model_switch",p.id,{from:String(a!=null?a:""),to:p.id}),Ff(xt(i,o),p.id))},[o,p,a,i]);return r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"text-center text-2xl font-semibold",children:u}),!e&&r.jsx("div",{className:"text-token-text-tertiary flex items-center gap-1",children:r.jsx(r.Fragment,{children:t&&vc(t)?r.jsx(_k,{gizmo:t}):r.jsx(_k,{gizmo:t,socials:t.gizmo.author.display_socials})})}),!d&&h&&p&&(a&&a!==p.id?r.jsxs("button",{onClick:x,className:"btn btn-blue btn-small flex items-center gap-1",children:[r.jsx(Aje,{className:"icon-sm"}),r.jsx(j,{id:"6uu9eh",defaultMessage:"Switch to {modelTitle} (creator's recommended model)",values:{modelTitle:"".concat(p.title)}})]}):r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 text-xs",children:[r.jsx(Mje,{style:{color:"gray",width:16,height:16}}),r.jsx(j,{id:"mcxm8w",defaultMessage:"Using the creator's recommended model: {modelTitle}",values:{modelTitle:"".concat(p.title)}})]})),f&&r.jsx("div",{className:"text-token-text-primary max-w-md text-center text-sm font-normal",children:f}),n&&r.jsx(Pje,{gizmo:t,disabled:s})]})}const Lje=/\s/;function Oje({starterPrompts:t,onSelectStarterPrompt:e,disabled:n,cssMobileDisplayLimit:s,marginOverride:o}){let a=t.map((i,l)=>{var u,f;let c=(u=i.oneliner)!=null?u:i.title;c===""&&(c=i.body);const d=Lje.test(c);return r.jsxs("button",{className:z(s!==void 0&&l>=s&&"max-sm:hidden","border-token-border-default shadow-xxs enabled:hover:bg-token-main-surface-secondary relative flex w-40 flex-col gap-2 rounded-2xl border px-3 pt-3 pb-4 text-start align-top text-[15px] transition disabled:cursor-not-allowed"),disabled:n,onClick:m=>e(m,i,t,l),children:[r.jsx(eq,{category:i.category}),r.jsx("div",{className:z("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",d?"break-word":"break-all"),children:c})]},(f=i.id)!=null?f:l)});if(a.length>2){const i=Math.floor(a.length/2);a=[a.slice(0,i),a.slice(i)].map((l,c)=>r.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:l},c))}return r.jsx("div",{className:z("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",o!=null?o:"mt-12"),children:a})}function Dje(t){var n,s,o,a;const e=he.getTree(t).findNode(i=>{var l;return((l=i.message.metadata)==null?void 0:l.greenwich)!==void 0},he.getCurrentLeafId(t));return[(s=(n=e==null?void 0:e.message.metadata)==null?void 0:n.greenwich)==null?void 0:s.text,(a=(o=e==null?void 0:e.message.metadata)==null?void 0:o.greenwich)==null?void 0:a.link]}function int({clientThreadId:t}){const[e,n]=Ve(t,Dje);return!e||!n?null:r.jsx("div",{className:"flex w-full items-center justify-center p-2 text-center text-xs",children:r.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"hover:text-token-text-primary text-token-text-tertiary hover:underline",children:e})})}function lnt(t){"use forget";const e=W.c(7),n=Vn(),[,s]=Us();let o;e[0]!==n.state||e[1]!==s?(o=c=>{s(d=>(c?d.set(n6,c):d.delete(n6),d),{replace:!0,state:n.state})},e[0]=n.state,e[1]=s,e[2]=o):o=e[2];const a=va(o);let i,l;e[3]!==t||e[4]!==a?(i=()=>wa(()=>{if(iv(t)){const c=yn(t);if(ea(t).groups.some(u=>u.modelIds.includes(c.id)))return c.id}},a),l=[t,a],e[3]=t,e[4]=a,e[5]=i,e[6]=l):(i=e[5],l=e[6]),_.useEffect(i,l)}function cnt(){const t=nq(Qu.NoAuthNewChat),e=vh();return t&&!e?r.jsx(Fje,{onClose:()=>{Ln.closeModal(Qu.NoAuthNewChat)}}):null}function Fje({onClose:t}){const e=V(),n=at(),s=i=>{i.preventDefault(),Zt(e,{fallbackScreenHint:"signup",callback:l=>{qe.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),B.logSignUpButtonClicked({location:"New chat modal",provider:l},kt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Za(e)})},o=i=>{i.preventDefault(),Zt(e,{fallbackScreenHint:"login",callback:l=>{qe.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),B.logLogInButtonClicked({location:"New chat modal",provider:l},kt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Za(e)})},a=()=>{qe.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),B.logNewChatButtonClicked({location:"New Chat Modal New Chat Button"}),Tr(n),t()};return _.useEffect(()=>{qe.logEvent("chatgpt_new_chat_modal_shown"),B.logEvent("New Chat Modal Shown")},[]),r.jsx(Mt,{testId:"modal-no-auth-new-chat",isOpen:!0,type:"success",onClose:t,noPadding:!0,size:"custom",className:"max-w-sm",children:r.jsxs("div",{className:"flex flex-col justify-center p-6",children:[r.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[r.jsx("div",{}),r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(xn,{onClick:t})})]}),r.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:r.jsx(j,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:i=>r.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:s,children:i}),login:i=>r.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:o,children:i})}})}),r.jsx(ye,{className:"mb-3",color:"primary",size:"large",onClick:a,children:r.jsx(j,{id:"cBGbrD",defaultMessage:"Clear chat"})}),r.jsx(ye,{size:"large",onClick:()=>{Zt(e,{fallbackScreenHint:"login",callback:i=>{B.logLogInButtonClicked({location:"New chat modal",provider:i},kt.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Za(e)})},color:"secondary",children:r.jsx(j,w({},gt.logInButtonText))})]})})}const Bje=R(()=>P(()=>import("./kptm44be5e8prue7.js"),__vite__mapDeps([441,1])),{loading:t=>F(t)}),Uje=R(()=>P(()=>import("./cvim016jdwuq42bd.js"),__vite__mapDeps([215,1])),{loading:t=>F(t)}),$je=R(()=>P(()=>import("./m34gi7kuqzcicqbx.js"),__vite__mapDeps([148,1])),{loading:t=>F(t)}),Vje=R(()=>P(()=>import("./odz5x4sqgrr6bek9.js"),__vite__mapDeps([309,1])),{loading:t=>F(t)}),Hje=R(()=>P(()=>import("./fvedxzo6thbeer2i.js"),__vite__mapDeps([442,1])),{loading:t=>F(t)}),Gje=R(()=>P(()=>import("./nq6tg09w6idos054.js"),__vite__mapDeps([139,1])),{loading:t=>F(t)}),Wje=R(()=>P(()=>Promise.resolve().then(()=>Ir),void 0),{loading:t=>F(t)}),mU={spreadsheets:Bje,presentations:Hje,actions:Vje,deep_research:Gje,suggested:Uje};function dnt({clientThreadId:t}){const{isOdysseyMode:e}=I5(t),n=Zje(e),{keywords:s}=WD({clientThreadId:t});return!e||!n?null:r.jsx(zje,{groups:n,mentionKeywords:s})}function zje({groups:t,mentionKeywords:e}){const[n,s]=_.useState(null),o=Ti(),[a,i]=_.useState(null),[l,c]=_.useState("suggested"),d=b=>{c(b),i(null)},u=_.useMemo(()=>{var C;const b=t.find(S=>S.category.name===l);return(C=b==null?void 0:b.prompts)!=null?C:[]},[t,l]);_.useEffect(()=>{u&&a!=null&&_o(Pt(o),u[a].prompt_string)},[o,u,a]),_.useEffect(()=>{e&&e.length>0&&A8(e,Pt(o))},[o,e]);const[f,m]=_.useState(()=>bn(()=>af(o)));_.useEffect(()=>Rl(()=>{af(o)&&m(!0)}),[o]);const g=va(()=>{const b=a==null?0:Math.min(a+1,u.length-1);return i(b),!0}),p=va(()=>{const b=a===0||a==null?null:a-1;return i(b),!0}),h=u.length>0;_.useEffect(()=>{if(!(!f||!h))return F8(Pt(o),{ArrowDown:g,ArrowUp:p})},[f,h,o,g,p]),_.useEffect(()=>{const b=()=>{m(!1),i(null)};return If(Pt(o).dom,{click:b,input:b})},[o]);const x=_.useRef(null),[v,y]=_.useState(void 0);return Jn(()=>{x.current&&y(x.current.offsetWidth)},[l]),r.jsx(o0e,{horizontalPadding:"standard",horizontalMargin:"none",verticalMargin:"none",verticalPadding:"none",overflowY:"auto",children:r.jsx(Ar,{className:"h-full overflow-y-hidden",children:r.jsx(Xe.div,{className:"flex size-full flex-col",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:r.jsxs("div",{className:"mt-5 flex flex-col items-center overflow-y-auto",children:[r.jsx("div",{className:"py-2",ref:x,children:r.jsx("div",{className:"flex flex-row flex-nowrap gap-2 overflow-x-auto",children:t.map(b=>r.jsx(qje,{category:b.category.name,displayName:b.category_display_name,selected:l===b.category.name,onSelect:()=>d(b.category.name)},b.category.name))})}),r.jsx("div",{className:"overflow-y-auto",children:r.jsx(Xe.ul,{className:"mt-1 flex flex-col",style:v?{width:v}:{},children:u.map((b,C)=>r.jsx(Yje,{prompt:b,rowIdx:C,selected:a===C,onSelect:()=>{B.logEvent("Agent Suggested Prompt Selected",{prompt_title:b.title,prompt_category:b.categories[0].name}),i(C),no(Pt(o))},hoveredPromptIndex:n,setHoveredPromptIndex:s,totalRows:u.length},"".concat(l,"-").concat(C)))})})]})})})})}function qje({category:t,displayName:e,selected:n,onSelect:s}){const o=mU[t],a=n?"text-token-text-primary":"text-token-text-secondary",i=n?"text-token-icon-primary":"text-token-icon-secondary";return r.jsx(ye,{color:"secondary",onClick:s,icon:()=>r.jsx(o,{className:i}),className:z("border-token-bg-tertiary",n&&"bg-token-bg-tertiary","font-normal",a),children:e})}function Yje({prompt:t,rowIdx:e,selected:n,onSelect:s,hoveredPromptIndex:o,setHoveredPromptIndex:a,totalRows:i}){const l=_.useRef(null);_.useEffect(()=>{var u;n&&((u=l.current)==null||u.scrollIntoView({behavior:"auto"}))},[n]);function c(){const u=Kje(t),f=u?mU[u]:Wje;return r.jsx(f,{className:"text-token-icon-secondary size-5"})}const d=o===e||o===e+1;return r.jsxs(Xe.li,{ref:l,initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:e*.03},exit:{opacity:0,translateY:4},onMouseEnter:()=>a(e),onMouseLeave:()=>a(null),children:[r.jsxs("button",{className:z("hover:bg-token-bg-tertiary flex w-full flex-row items-center rounded-xl px-2 py-4 text-start"),onClick:s,type:"button",children:[r.jsx("div",{className:"flex flex-col items-center justify-center p-1",children:c()}),r.jsx("div",{className:"text-token-text-secondary flex-1 overflow-hidden pe-2 text-sm text-ellipsis whitespace-nowrap",children:t.title}),t.example_url?r.jsx("div",{className:"flex flex-col items-center justify-center pe-1",onClick:u=>{u.stopPropagation(),B.logEvent("Agent Suggested Prompt Example Clicked",{prompt_title:t.title,prompt_category:t.categories[0].name}),t.example_url&&(window.location.href=t.example_url)},children:r.jsx($je,{className:"text-token-icon-tertiary size-6.5 shrink-0"})}):null]}),e<i-1&&!d&&r.jsx("div",{className:"bg-token-bg-tertiary mx-4 mt-[-1px] h-[1px]"})]})}function Zje(t){var n;return(n=rt({queryKey:["odyssey_suggested_prompts_all"],queryFn:async()=>await ge.safeGet("/n7jupd_suggested_prompts_all"),enabled:t}).data)==null?void 0:n.prompt_groups}function Kje(t){const e=t.categories;if(e.length!==0)return e[0].name}const Qje=t=>{"use forget";var y;const e=W.c(23);let n,s,o,a,i;e[0]!==t?(y=t,{open:i,containerClassName:s,onDismiss:o,onShow:a}=y,n=we(y,["open","containerClassName","onDismiss","onShow"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5]);const l=i===void 0?!0:i,c=ne(),[d,u]=_.useState(l);let f,m;if(e[6]!==d||e[7]!==a?(f=()=>{d&&(a==null||a())},m=[d,a],e[6]=d,e[7]=a,e[8]=f,e[9]=m):(f=e[8],m=e[9]),_.useEffect(f,m),!d)return null;let g;e[10]!==s?(g=z("pointer-events-none fixed start-1/2 bottom-8 z-50 w-full -translate-x-1/2 px-4",s),e[10]=s,e[11]=g):g=e[11];let p;e[12]!==c?(p=c.formatMessage({id:"b675aO",defaultMessage:"Banner"}),e[12]=c,e[13]=p):p=e[13];let h;e[14]!==o?(h=()=>{o==null||o(),u(!1)},e[14]=o,e[15]=h):h=e[15];let x;e[16]!==n||e[17]!==h?(x=r.jsx("div",{className:"pointer-events-auto mx-auto w-full max-w-[768px]",children:r.jsx(vf,U(w({},n),{onDismiss:h}))}),e[16]=n,e[17]=h,e[18]=x):x=e[18];let v;return e[19]!==g||e[20]!==p||e[21]!==x?(v=r.jsx("div",{className:g,"aria-live":"polite",role:"region","aria-label":p,children:x}),e[19]=g,e[20]=p,e[21]=x,e[22]=v):v=e[22],v},Jje=t=>{"use forget";const e=W.c(7),{children:n}=t,s=Array.isArray(n)?n[0]:n,o=Array.isArray(n)?n[1]:null;let a;e[0]!==s?(a=r.jsx("div",{className:"border-token-bg-secondary bg-token-bg-primary z-10 -translate-y-[6px] rotate-[-5deg] rounded-[7px] border-[1px] [box-shadow:0_2px_8px_0_rgba(0,0,0,0.05)]",children:r.jsx("div",{className:"flex h-[28px] w-[28px] items-center justify-center overflow-hidden rounded-[7px] p-[2px]",children:r.jsx("div",{className:"flex h-full w-full items-center justify-center [&_img]:max-h-full [&_img]:max-w-full [&_img]:object-contain [&_img]:object-center [&_svg]:max-h-full [&_svg]:max-w-full [&_svg]:object-contain [&_svg]:object-center",children:s})})}),e[0]=s,e[1]=a):a=e[1];let i;e[2]!==o?(i=r.jsx("div",{className:"border-token-bg-secondary bg-token-bg-primary z-20 -ms-[10px] translate-y-[6px] rotate-[5deg] rounded-[7px] border-[1px] [box-shadow:0_2px_8px_0_rgba(0,0,0,0.05)]",children:r.jsx("div",{className:"flex h-[28px] w-[28px] items-center justify-center overflow-hidden rounded-[7px] p-[2px]",children:r.jsx("div",{className:"flex h-full w-full items-center justify-center [&_img]:max-h-full [&_img]:max-w-full [&_img]:object-contain [&_img]:object-center [&_svg]:max-h-full [&_svg]:max-w-full [&_svg]:object-contain [&_svg]:object-center",children:o})})}),e[2]=o,e[3]=i):i=e[3];let l;return e[4]!==a||e[5]!==i?(l=r.jsxs("div",{className:"flex items-center",children:[a,i]}),e[4]=a,e[5]=i,e[6]=l):l=e[6],l};function Xje(t){const{data:e,isLoading:n}=rt({queryKey:["workspace_connector_stats",t],queryFn:()=>ge.safeGet("/aip/workspace/connector-stats"),enabled:!!t}),s=_.useMemo(()=>{var l,c,d;const a=new Map,i=(l=e==null?void 0:e.connector_stats)!=null?l:[];for(const u of i){const f=Number((c=u.unique_user_cnt)!=null?c:0);Number.isFinite(f)&&a.set(u.connector_id,((d=a.get(u.connector_id))!=null?d:0)+f)}return a},[e]),o=_.useMemo(()=>{const a=Array.from(s.entries()).map(([i,l])=>({connectorId:i,totalCount:l}));return a.sort((i,l)=>l.totalCount-i.totalCount),a},[s]);return{totalsByConnectorId:s,topSorted:o,isLoading:n}}const eNe=R(()=>P(()=>import("./ojgc3f33xqlpzccg.js"),__vite__mapDeps([34,1])),{loading:t=>F(t)}),tNe=R(()=>P(()=>import("./fsahglpl2wxoakvg.js"),__vite__mapDeps([35,1])),{loading:t=>F(t)}),nNe=R(()=>P(()=>import("./nbrjep5yk15f1ntt.js"),__vite__mapDeps([351,1,10,11,352])).then(t=>t.ConnectorsOnboardingModal));function sNe({skip:t=!1}){const e=V(),n=Yy(e),s=nM(e),o=sq(e),[a,i]=Us(),[l,c]=_.useState(!1);_.useEffect(()=>{a.get("force_show_external_nux")==="true"&&(c(!0),i(S=>(S.delete("force_show_external_nux"),S)))},[a,i]);const d=_t.getItem(Ue.ConnectorsExternalNuxBannerDismissed)===!0,u=!t&&n&&!o&&s==="external"&&!d,{connectorLinks:f,isLoading:m}=Of({skip:!u,fetchValidLinksOnly:!0}),g=re(()=>{if(u)return _3(e)}),p=u&&!g,h=re(()=>wh(e)),x=h===void 0,v=_.useMemo(()=>{var S;return!!(g!=null&&g.some(E=>E.status!=="DISABLED_BY_ADMIN"))||((S=h==null?void 0:h.length)!=null?S:0)>0},[g,h]),y=_.useMemo(()=>{var S,E;if(!u||m||p)return!1;if(g){for(const k of g)if(((S=f.get(k.id))!=null?S:[]).length===0)return!0}if(((E=h==null?void 0:h.length)!=null?E:0)>0&&!x){const k=h!=null?h:[],T=new Set(["partially_activated","activated","activating"]);for(const M of h){const A=k.find(I=>I.user_connection_details.connection_type===M);if(!A||!T.has(A.user_connection_details.activation_status))return!0}}return!1},[u,m,p,g,f,h,x]);return{shouldShow:l||u&&v&&y,isLoading:u&&(m||p||x)}}function unt(t){"use forget";var te,ae,se,ce,X,ee,ie,de,me,xe,pe;const e=W.c(42),{clientThreadId:n}=t,s=V(),o=ne(),a=Ti(),i=$s(),l=Sn();let c;e[0]!==l?(c=l==null?void 0:l.getWorkspaceId(),e[0]=l,e[1]=c):c=e[1];const d=c,u=(te=l==null?void 0:l.name)!=null?te:"",f=l==null?void 0:l.planType;let m;e[2]!==f?(m=sM(f),e[2]=f,e[3]=m):m=e[3];const g=m,{platformConnectors:p}=kd(!0);let h;e[4]===Symbol.for("react.memo_cache_sentinel")?(h={},e[4]=h):h=e[4];const{shouldShow:x,isLoading:v}=sNe(h),y=x&&!v,{topSorted:b,isLoading:C}=Xje(y?d:void 0),S=rNe;let E;e[5]!==n||e[6]!==a||e[7]!==i?(E=()=>{S(),i("glaux",{analyticsMetadata:{clientThreadId:n}}),setTimeout(()=>{no(Pt(a))},100),B.logEventWithStatsig("ChatGPT Connectors Connector Pill Enabled","chatgpt_connectors_connector_pill_enabled",{type:"glaux"})},e[5]=n,e[6]=a,e[7]=i,e[8]=E):E=e[8];const k=E;if(!y||C)return null;let T;e[9]!==p||e[10]!==((ae=b[0])==null?void 0:ae.connectorId)?(T=p.get((ce=(se=b[0])==null?void 0:se.connectorId)!=null?ce:""),e[9]=p,e[10]=(X=b[0])==null?void 0:X.connectorId,e[11]=T):T=e[11];const M=T;let A;e[12]!==p||e[13]!==((ee=b[1])==null?void 0:ee.connectorId)?(A=p.get((de=(ie=b[1])==null?void 0:ie.connectorId)!=null?de:""),e[12]=p,e[13]=(me=b[1])==null?void 0:me.connectorId,e[14]=A):A=e[14];const I=A,N=(pe=(xe=b[0])==null?void 0:xe.totalCount)!=null?pe:0;let L;e[15]!==o||e[16]!==g||e[17]!==N?(L=N<5?g?o.formatMessage({id:"CexxSa",defaultMessage:"Get started with organization knowledge"}):o.formatMessage({id:"hyzDPW",defaultMessage:"Get started with company knowledge"}):g?o.formatMessage({id:"eqzxmv",defaultMessage:"{count, plural, one {Join # teammate using organization knowledge} other {Join # teammates using organization knowledge}}"},{count:N}):o.formatMessage({id:"f7CtQQ",defaultMessage:"{count, plural, one {Join # teammate using company knowledge} other {Join # teammates using company knowledge}}"},{count:N}),e[15]=o,e[16]=g,e[17]=N,e[18]=L):L=e[18];const O=L;let D;e[19]!==M?(D=M?r.jsx(_f,{connector:M,size:"large"}):r.jsx(tNe,{className:"icon"}),e[19]=M,e[20]=D):D=e[20];let $;e[21]!==I?($=I?r.jsx(_f,{connector:I,size:"large"}):r.jsx(eNe,{className:"icon"}),e[21]=I,e[22]=$):$=e[22];let H;e[23]!==$||e[24]!==D?(H=r.jsxs(Jje,{children:[D,$]}),e[23]=$,e[24]=D,e[25]=H):H=e[25];let G;e[26]!==o||e[27]!==u?(G=o.formatMessage({id:"XrxX7J",defaultMessage:"Ask ChatGPT anything about {name}. Get answers specific to your work, so you can plan, make decisions, and move faster."},{name:u}),e[26]=o,e[27]=u,e[28]=G):G=e[28];let Z;e[29]!==o?(Z=o.formatMessage({id:"/U3ta8",defaultMessage:"Get started"}),e[29]=o,e[30]=Z):Z=e[30];let Q;e[31]!==s||e[32]!==k?(Q=()=>{B.logEventWithStatsig("ChatGPT Connectors External NUX Banner CTA Clicked","chatgpt_connectors_external_nux_banner_cta_clicked"),dt(s,nNe,{onContinue:k}),_t.setItem(Ue.ConnectorsExternalNuxBannerDismissed,!0)},e[31]=s,e[32]=k,e[33]=Q):Q=e[33];let q;e[34]!==Z||e[35]!==Q?(q={primaryAction:{text:Z,onClick:Q}},e[34]=Z,e[35]=Q,e[36]=q):q=e[36];let Y;return e[37]!==H||e[38]!==G||e[39]!==q||e[40]!==O?(Y=r.jsx(Qje,{onShow:aNe,onDismiss:oNe,icon:H,title:O,description:G,actions:q}),e[37]=H,e[38]=G,e[39]=q,e[40]=O,e[41]=Y):Y=e[41],Y}function oNe(){B.logEventWithStatsig("ChatGPT Connectors External NUX Banner Dismissed","chatgpt_connectors_external_nux_banner_dismissed"),_t.setItem(Ue.ConnectorsExternalNuxBannerDismissed,!0)}function aNe(){B.logEventWithStatsig("ChatGPT Connectors External NUX Banner Shown","chatgpt_connectors_external_nux_banner_shown")}function rNe(){_t.setItem(Ue.HasClickedCompanyKnowledgePill,new Date().toISOString())}class fnt{constructor(e){J(this,"config");J(this,"localStorageKey");this.config=e,this.localStorageKey=e.localStorageKey}getState(){const e=_t.getItem(this.localStorageKey)||{lastShown:null,showCount:0,shownTimestamps:[]};return Array.isArray(e.shownTimestamps)||(e.shownTimestamps=[]),e}setState(e){_t.setItem(this.localStorageKey,e)}getShownTimes(){return this.getState().showCount}shouldShow(){const e=this.getState(),n=Date.now();if(this.config.termination.maxShows!==void 0&&e.showCount>=this.config.termination.maxShows||this.config.termination.customCondition&&this.config.termination.customCondition())return!1;const s=this.config.schedule.maxShowsPerInterval;if(s!==void 0){const o=n-this.config.schedule.intervalMs;if((e.shownTimestamps||[]).filter(i=>i>=o).length>=s)return!1}else if(e.lastShown!=null&&n-e.lastShown<this.config.schedule.intervalMs)return!1;return!0}recordShown(){const e=this.getState(),n=Date.now();let s=Array.isArray(e.shownTimestamps)?e.shownTimestamps:[];const o=n-this.config.schedule.intervalMs;s=s.filter(a=>a>=o),s.push(n),this.setState({lastShown:n,showCount:e.showCount+1,shownTimestamps:s})}reset(){_t.setItem(this.localStorageKey,{lastShown:null,showCount:0,shownTimestamps:[]})}}const y2=R(()=>P(()=>import("./gl3rapxbeig8umvj.js"),__vite__mapDeps([253,1])),{loading:t=>F(t)}),v2=R(()=>P(()=>import("./gb09ykdmnecx7kqm.js"),__vite__mapDeps([254,1])),{loading:t=>F(t)}),b2=R(()=>P(()=>import("./n3mnqs8qkb4827qo.js"),__vite__mapDeps([443,1])),{loading:t=>F(t)}),Hi=R(()=>P(()=>import("./lwk021izsqda1ink.js"),__vite__mapDeps([444,1])),{loading:t=>F(t)}),C2=R(()=>P(()=>import("./jlsb77lt6kqhcsln.js"),__vite__mapDeps([257,1])),{loading:t=>F(t)}),uc=R(()=>P(()=>import("./fsahglpl2wxoakvg.js"),__vite__mapDeps([35,1])),{loading:t=>F(t)}),iNe=R(()=>P(()=>import("./cablc6lr74ppvrr3.js"),__vite__mapDeps([259,1])),{loading:t=>F(t)}),fc=R(()=>P(()=>import("./on6zjr1bjw5z2d08.js"),__vite__mapDeps([37,1])),{loading:t=>F(t)}),lNe=R(()=>P(()=>import("./l5e2clfxpgm30p9v.js"),__vite__mapDeps([261,1])),{loading:t=>F(t)}),S2=R(()=>P(()=>import("./z73jc6cuiis8j7zw.js"),__vite__mapDeps([262,1])),{loading:t=>F(t)});function mnt(){"use forget";const t=W.c(111),e=V(),n=ne(),s=oM();let o;t[0]!==e?(o=()=>a3(e,{includeAutoConnectors:!0}),t[0]=e,t[1]=o):o=t[1];const a=re(o),i=!a;let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l={includeAutoConnectors:!0},t[2]=l):l=t[2];const{connectedTypes:c,isLoading:d}=g3(l),{isLoading:u,internalKnowledgeConfigs:f}=oq();let m;t[3]!==f||t[4]!==s?(m=s&&(f==null?void 0:f.some(vNe)),t[3]=f,t[4]=s,t[5]=m):m=t[5];const g=!!m;let p;t[6]!==f||t[7]!==s?(p=s&&(f==null?void 0:f.some(yNe)),t[6]=f,t[7]=s,t[8]=p):p=t[8];const h=!!p,x=xs(),v=xNe,y=hNe,b=gNe,C=mNe;let S;t[9]!==n?(S=n.formatMessage({id:"9jtvbx",defaultMessage:"Describe and suggest improvements to my email style"}),t[9]=n,t[10]=S):S=t[10];let E;t[11]!==n?(E=n.formatMessage({id:"PjZmLV",defaultMessage:"Describe and suggest improvements to my email style"}),t[11]=n,t[12]=E):E=t[12];let k;t[13]===Symbol.for("react.memo_cache_sentinel")?(k={connectors:{[yt.GMAIL_CONNECTOR]:fc,[yt.OUTLOOK_EMAIL_CONNECTOR]:Hi}},t[13]=k):k=t[13];let T;t[14]!==S||t[15]!==E?(T={type:Je.Starter,title:S,prompt:E,theme:vn.Slurm,data:k,body:""},t[14]=S,t[15]=E,t[16]=T):T=t[16];let M;t[17]!==n?(M=n.formatMessage({id:"gmFv/2",defaultMessage:"Summarize my unread emails"}),t[17]=n,t[18]=M):M=t[18];let A;t[19]!==n?(A=n.formatMessage({id:"/lt8RC",defaultMessage:"Summarize my unread emails"}),t[19]=n,t[20]=A):A=t[20];let I;t[21]===Symbol.for("react.memo_cache_sentinel")?(I={connectors:{[yt.GMAIL_CONNECTOR]:fc,[yt.OUTLOOK_EMAIL_CONNECTOR]:Hi}},t[21]=I):I=t[21];let N;t[22]!==M||t[23]!==A?(N={type:Je.Starter,title:M,prompt:A,theme:vn.Slurm,data:I,body:""},t[22]=M,t[23]=A,t[24]=N):N=t[24];let L;t[25]!==n?(L=n.formatMessage({id:"rMKyX2",defaultMessage:"Give me an overview of a project or customer"}),t[25]=n,t[26]=L):L=t[26];let O;t[27]!==n?(O=n.formatMessage({id:"5hS/7U",defaultMessage:"Give me an overview of a project or customer"}),t[27]=n,t[28]=O):O=t[28];let D;t[29]===Symbol.for("react.memo_cache_sentinel")?(D={connectors:{[yt.GDRIVE_ACTION_CONNECTOR]:uc,[yt.GMAIL_CONNECTOR]:fc,[yt.OUTLOOK_EMAIL_CONNECTOR]:Hi,[yt.HUBSPOT_CONNECTOR]:C2,[yt.DROPBOX_CONNECTOR]:S2,[yt.NOTION_CONNECTOR]:y2,[yt.SHAREPOINT_CONNECTOR]:b2,[yt.TEAMS_CONNECTOR]:v2},syncConnectors:{[qi.gdrive_sync_connector]:uc}},t[29]=D):D=t[29];let $;t[30]!==L||t[31]!==O?($={type:Je.Starter,title:L,prompt:O,theme:vn.Slurm,data:D,body:""},t[30]=L,t[31]=O,t[32]=$):$=t[32];let H;t[33]!==n?(H=n.formatMessage({id:"c9CBw8",defaultMessage:"Find me the top three most relevant documents on a project"}),t[33]=n,t[34]=H):H=t[34];let G;t[35]!==n?(G=n.formatMessage({id:"NYPKci",defaultMessage:"Find me the top three most relevant documents on a project"}),t[35]=n,t[36]=G):G=t[36];let Z;t[37]===Symbol.for("react.memo_cache_sentinel")?(Z={connectors:{[yt.GDRIVE_ACTION_CONNECTOR]:uc,[yt.GMAIL_CONNECTOR]:fc,[yt.OUTLOOK_EMAIL_CONNECTOR]:Hi,[yt.HUBSPOT_CONNECTOR]:C2,[yt.DROPBOX_CONNECTOR]:S2,[yt.NOTION_CONNECTOR]:y2,[yt.SHAREPOINT_CONNECTOR]:b2,[yt.TEAMS_CONNECTOR]:v2},syncConnectors:{[qi.gdrive_sync_connector]:uc}},t[37]=Z):Z=t[37];let Q;t[38]!==H||t[39]!==G?(Q={type:Je.Starter,title:H,prompt:G,theme:vn.Slurm,data:Z,body:""},t[38]=H,t[39]=G,t[40]=Q):Q=t[40];let q;t[41]!==n?(q=n.formatMessage({id:"bh3D+B",defaultMessage:"Review my most recent PR"}),t[41]=n,t[42]=q):q=t[42];let Y;t[43]!==n?(Y=n.formatMessage({id:"MQvW9m",defaultMessage:"Review my most recent PR"}),t[43]=n,t[44]=Y):Y=t[44];let te;t[45]===Symbol.for("react.memo_cache_sentinel")?(te={connectors:{[yt.GITHUB_CONNECTOR]:lNe}},t[45]=te):te=t[45];let ae;t[46]!==q||t[47]!==Y?(ae={type:Je.Starter,title:q,prompt:Y,theme:vn.Slurm,data:te,body:""},t[46]=q,t[47]=Y,t[48]=ae):ae=t[48];let se;t[49]!==n?(se=n.formatMessage({id:"eb79eJ",defaultMessage:"What changed in the projects that Im working on"}),t[49]=n,t[50]=se):se=t[50];let ce;t[51]!==n?(ce=n.formatMessage({id:"Q+eKmx",defaultMessage:"What changed in the projects that Im working on"}),t[51]=n,t[52]=ce):ce=t[52];let X;t[53]===Symbol.for("react.memo_cache_sentinel")?(X={connectors:{[yt.GDRIVE_ACTION_CONNECTOR]:uc,[yt.GMAIL_CONNECTOR]:fc,[yt.OUTLOOK_EMAIL_CONNECTOR]:Hi,[yt.HUBSPOT_CONNECTOR]:C2,[yt.DROPBOX_CONNECTOR]:S2,[yt.NOTION_CONNECTOR]:y2,[yt.SHAREPOINT_CONNECTOR]:b2,[yt.TEAMS_CONNECTOR]:v2},syncConnectors:{[qi.gdrive_sync_connector]:uc}},t[53]=X):X=t[53];let ee;t[54]!==se||t[55]!==ce?(ee={type:Je.Starter,title:se,prompt:ce,theme:vn.Slurm,data:X,body:""},t[54]=se,t[55]=ce,t[56]=ee):ee=t[56];let ie;t[57]!==n?(ie=n.formatMessage({id:"BZuK5N",defaultMessage:"Find all emails about a project or customer"}),t[57]=n,t[58]=ie):ie=t[58];let de;t[59]!==n?(de=n.formatMessage({id:"S/AOrO",defaultMessage:"Find all emails about a project or customer"}),t[59]=n,t[60]=de):de=t[60];let me;t[61]===Symbol.for("react.memo_cache_sentinel")?(me={connectors:{[yt.GMAIL_CONNECTOR]:fc,[yt.OUTLOOK_EMAIL_CONNECTOR]:Hi}},t[61]=me):me=t[61];let xe;t[62]!==ie||t[63]!==de?(xe={type:Je.Starter,title:ie,prompt:de,theme:vn.Slurm,data:me,body:""},t[62]=ie,t[63]=de,t[64]=xe):xe=t[64];let pe;t[65]!==n?(pe=n.formatMessage({id:"DtUTpV",defaultMessage:"Brief me on this weeks meetings"}),t[65]=n,t[66]=pe):pe=t[66];let Me;t[67]!==n?(Me=n.formatMessage({id:"NoHU2S",defaultMessage:"Brief me on this weeks meetings"}),t[67]=n,t[68]=Me):Me=t[68];let Ce;t[69]===Symbol.for("react.memo_cache_sentinel")?(Ce={connectors:{[yt.GOOGLE_CONTACTS_CONNECTOR]:iNe,[yt.OUTLOOK_CALENDAR_CONNECTOR]:Hi}},t[69]=Ce):Ce=t[69];let ke;t[70]!==pe||t[71]!==Me?(ke={type:Je.Starter,title:pe,prompt:Me,theme:vn.Slurm,data:Ce,body:""},t[70]=pe,t[71]=Me,t[72]=ke):ke=t[72];let Le;t[73]!==N||t[74]!==$||t[75]!==Q||t[76]!==ae||t[77]!==ee||t[78]!==xe||t[79]!==ke||t[80]!==T?(Le=[T,N,$,Q,ae,ee,xe,ke],t[73]=N,t[74]=$,t[75]=Q,t[76]=ae,t[77]=ee,t[78]=xe,t[79]=ke,t[80]=T,t[81]=Le):Le=t[81];const De=Le,le=i||d||u;if(le){let ue;t[82]===Symbol.for("react.memo_cache_sentinel")?(ue=[],t[82]=ue):ue=t[82];let _e;return t[83]!==le?(_e={prompts:ue,isLoading:le},t[83]=le,t[84]=_e):_e=t[84],_e}if(x===Pe.Slurm){let ue,_e,Te;if(t[85]!==De||t[86]!==c||t[87]!==h||t[88]!==le){Te=Symbol.for("react.early_return_sentinel");e:{if(ue=De.filter(Ne=>{const{connectors:Ae,syncConnectors:He}=v(Ne),Qe=Object.keys(Ae).some(Ct=>[...c].some(vt=>vt===Ct)),et=!!He[qi.gdrive_sync_connector];return Qe||et&&h}),ue.length<3){let Ne;t[92]===Symbol.for("react.memo_cache_sentinel")?(Ne=[],t[92]=Ne):Ne=t[92];let Ae;t[93]!==le?(Ae={prompts:Ne,isLoading:le},t[93]=le,t[94]=Ae):Ae=t[94],Te=Ae;break e}ue.sort(fNe),_e=ue.slice(0,4).map(Ne=>{const{connectors:Ae,syncConnectors:He}=v(Ne),Qe=b(Ae,He,{mode:"connected",connectedTypes:new Set([...c]),hasGdriveSync:h});return U(w({},Ne),{trailing:y(Qe)})})}t[85]=De,t[86]=c,t[87]=h,t[88]=le,t[89]=ue,t[90]=_e,t[91]=Te}else ue=t[89],_e=t[90],Te=t[91];if(Te!==Symbol.for("react.early_return_sentinel"))return Te;ue=_e;let $e;return t[95]!==le||t[96]!==ue?($e={prompts:ue,isLoading:le},t[95]=le,t[96]=ue,t[97]=$e):$e=t[97],$e}let oe,Ee,be;if(t[98]!==De||t[99]!==a||t[100]!==g||t[101]!==le){be=Symbol.for("react.early_return_sentinel");e:{if(oe=De.filter(ue=>{const{connectors:_e,syncConnectors:Te}=v(ue),$e=new Set(a.map(uNe)),Ne=Object.keys(_e).some(He=>$e.has(He)),Ae=!!Te[qi.gdrive_sync_connector];return Ne||Ae&&g}),oe.length<3){let ue;t[105]===Symbol.for("react.memo_cache_sentinel")?(ue=[],t[105]=ue):ue=t[105];let _e;t[106]!==le?(_e={prompts:ue,isLoading:le},t[106]=le,t[107]=_e):_e=t[107],be=_e;break e}oe.sort(dNe),Ee=oe.slice(0,4).map((ue,_e)=>{var He;const Te="#settings/".concat(Pn.Connectors,"?referrer=").concat(ma.SuggestedPrompts),{connectors:$e,syncConnectors:Ne}=v(ue),Ae=b($e,Ne,{mode:"available",availableTypes:new Set(a.map(cNe)),hasGdriveSync:g});return U(w({},ue),{theme:vn.ContextualAnswersNUX,trailing:y(Ae),data:{link:Te,id:(He=ue.data)==null?void 0:He.id,position:_e.toString()},onSelectOverride:C})})}t[98]=De,t[99]=a,t[100]=g,t[101]=le,t[102]=oe,t[103]=Ee,t[104]=be}else oe=t[102],Ee=t[103],be=t[104];if(be!==Symbol.for("react.early_return_sentinel"))return be;oe=Ee;let fe;return t[108]!==le||t[109]!==oe?(fe={prompts:oe,isLoading:le},t[108]=le,t[109]=oe,t[110]=fe):fe=t[110],fe}function cNe(t){return t.type}function dNe(){return Math.random()-.5}function uNe(t){return t.type}function fNe(){return Math.random()-.5}function mNe(t,e){var n,s;if(e.type===Je.Starter&&(e.theme===vn.ContextualAnswersNUX||e.theme===vn.Slurm)){const{data:o}=e,{link:a}=o;window.location.hash=a+"&suggestedPromptsText=".concat(encodeURIComponent(e.prompt)),B.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_selected","chatgpt_contextual_answers_recommended_prompt_selected",{prompt_id:(n=e.data)==null?void 0:n.id,prompt_position:(s=e.data)==null?void 0:s.position}),t.preventDefault();return}}function gNe(t,e,n){const s=[],o=!!(e!=null&&e[qi.gdrive_sync_connector]);o&&n.hasGdriveSync&&s.push(e[qi.gdrive_sync_connector]);const a=i=>n.mode==="connected"?n.connectedTypes.has(i):n.availableTypes.has(i);for(const i of Object.keys(t))o&&n.hasGdriveSync&&i===yt.GDRIVE_ACTION_CONNECTOR||a(i)&&s.push(t[i]);return s.sort(pNe),s}function pNe(){return Math.random()-.5}function hNe(t){return r.jsx("div",{className:"flex flex-1 items-center justify-end gap-1",children:t.filter(Boolean).slice(0,3).map(_Ne)})}function _Ne(t,e){return r.jsx("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center rounded-full",children:r.jsx(t,{className:"h-full w-full"})},e)}function xNe(t){var n,s,o;const e=(n=t.data)!=null?n:{};return{connectors:(s=e.connectors)!=null?s:{},syncConnectors:(o=e.syncConnectors)!=null?o:{}}}function yNe(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function vNe(t){return t.user_connection_details.auth_status==="not_connected"}const gU=()=>{"use forget";const t=W.c(13),e=V();let n;t[0]!==e?(n=Yy(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o;t[2]!==e?(o=()=>_3(e),t[2]=e,t[3]=o):o=t[3];const a=re(o);let i;t[4]!==e?(i=()=>wh(e),t[4]=e,t[5]=i):i=t[5];const l=re(i),c=!l;let d;t[6]!==e?(d=()=>Mo(e),t[6]=e,t[7]=d):d=t[7];const u=re(d);let f;t[8]!==u?(f=u==null?void 0:u.some(bNe),t[8]=u,t[9]=f):f=t[9];const m=f;let g;e:{if(a!=null&&a.some(CNe)){g=!0;break e}if(l&&l.length>0){g=!0;break e}g=!1}const h=s&&m&&g,x=c||!u;let v;return t[10]!==h||t[11]!==x?(v={available:h,isLoading:x},t[10]=h,t[11]=x,t[12]=v):v=t[12],v};function bNe(t){return t.systemHint==="glaux"}function CNe(t){return t.status!=="DISABLED_BY_ADMIN"}async function SNe(t,e=4){if(e<1)return[];try{const n=d4(t),s=kNe(t);return(await ge.safeGet("/templated_prompts/suggestions",{parameters:{query:{limit:e,mode:s,bypass_cache:n.get("bypass_cache",!1)}}})).suggestions.filter(a=>typeof a.prompt=="string"&&a.prompt.length>0).slice(0,e).map(a=>{var i;return{type:Je.Templated,title:(i=a.description)!=null?i:"Dynamic Prompt",body:a.prompt,prompt:a.prompt,id:a.id,oneliner:a.name,theme:vn.TemplatedPrompts,source:"CURATED"}})}catch(n){return[]}}function gnt(t,e){"use forget";const n=W.c(9),s=V();let o;n[0]!==t?(o=["dynamic-prompt-suggestions",t],n[0]=t,n[1]=o):o=n[1];let a;n[2]!==s||n[3]!==t?(a=()=>SNe(s,t),n[2]=s,n[3]=t,n[4]=a):a=n[4];let i;return n[5]!==e||n[6]!==o||n[7]!==a?(i={queryKey:o,enabled:e,staleTime:3e5,queryFn:a},n[5]=e,n[6]=o,n[7]=a,n[8]=i):i=n[8],rt(i)}const pnt=()=>{const t=V(),e=Sn(),{available:n,isLoading:s}=gU();return!!(e!=null&&e.isWorkspacePlan())&&!n&&!s&&wNe(t)},d4=t=>Ps(t,"2538364663");function wNe(t){return d4(t).get("enabled",!1)}function kNe(t){const n=d4(t).get("mode","static");return n==="dynamic"||n==="static"?n:"static"}function hnt(t){"use forget";const e=W.c(6),n=V();let s;e[0]!==n?(s=Ra(n),e[0]=n,e[1]=s):s=e[1];const o=s;let a,i;e[2]!==t||e[3]!==o?(a=()=>wa(()=>o.isFeedbackModalOpen$()&&o.shouldAutoSendCompletion$(),l=>{if(!l)return;o.shouldAutoSendCompletion$.set(!1);const c=o.autoSendCompletion;setTimeout(()=>{var d;c&&c.targetedReply&&t({eventSource:"mouse",promptMessage:is(c.userMessage,{targeted_reply:(d=c.targetedReply)!=null?d:void 0}),appendMessages:[Mh(c.targetedReply)]})},250)},{fireImmediately:!0}),i=[o,t],e[2]=t,e[3]=o,e[4]=a,e[5]=i):(a=e[4],i=e[5]),_.useEffect(a,i)}const _nt=()=>{"use forget";const t=W.c(3),e=To();let n,s;t[0]!==e?(n=()=>{if(e)return wa(()=>{var l;const o=Aa(e);if(!o||aq(e))return;const a=(l=bo(Ji(e)))==null?void 0:l.messages.find(ENe),i="messageId"in o&&Q8(e,c=>c.id===o.messageId)==null;return[a,i]},o=>{if(!o)return;const[a,i]=o,l=Aa(e);if((Gt(l,"searchSources")||Gt(l,"retrievalResults"))&&a&&l.messageId!==a.id){const c=Ji(e).length-1,d=a.id,f=Nh(a).some(TNe)?{type:"retrievalResults",turnIndex:c,messageId:d}:{type:"searchSources",turnIndex:c,messageId:d,scrollToHeader:Gt(l,"searchSources")?l.scrollToHeader:void 0};Vb(e,f)}else i&&!Gt(l,"entity")&&k1(e)},{equals:Sl})},s=[e],t[0]=e,t[1]=n,t[2]=s):(n=t[1],s=t[2]),_.useEffect(n,s)};function ENe(t){return t.status!=="in_progress"&&Nh(t).length>0}function TNe(t){return t.type==="file"||t.type==="file_navlist"}const pU="ChatGPT";function MNe(t,e){const[n]=Ve(t,s=>{var o;return[(o=s==null?void 0:s.title)!=null?o:null]});return _.useMemo(()=>ANe(t,n,e),[t,e,n])}function ANe(t,e,n){const s=br(t);return n&&n.kind===wt.GizmoInteraction&&n.gizmo?s?"ChatGPT - ".concat(n.gizmo.gizmo.display.name):e&&"".concat(n.gizmo.gizmo.display.name," - ").concat(e):e||pU}function xnt(t){const e=V();_.useEffect(()=>kh(e).addAction({key:"prev-message",group:Dn.Chat,keyboardBinding:[We.Shift,We.ArrowUp],actionMessageDescriptor:Ge({id:"N8H1CM",defaultMessage:"Previous message"}),action:n=>xk(n,"up"),enabled:!t},{key:"next-message",group:Dn.Chat,keyboardBinding:[We.Shift,We.ArrowDown],actionMessageDescriptor:Ge({id:"d69Yjj",defaultMessage:"Next message"}),action:n=>xk(n,"down"),enabled:!t}),[e,t])}function xk(t,e){if(t.target instanceof HTMLDivElement&&t.target.isContentEditable&&t.target.textContent)return!1;const n=[...document.querySelectorAll("article[data-turn=assistant]")];let s;if(document.activeElement instanceof HTMLElement&&n.includes(document.activeElement)&&yk(document.activeElement))s=n.indexOf(document.activeElement)+(e==="down"?1:-1);else{const o=n.findIndex(INe);if(o===-1)return!1;s=e==="down"?o+1:yk(n[o])?o-1:o}if(s===-1||s>=n.length)return!1;n[s].focus({preventScroll:!0}),n[s].scrollIntoView({behavior:"smooth",block:"start"})}function INe(t){const e=t.getBoundingClientRect();return e.bottom>hU()&&e.top<window.innerHeight}function yk(t){const e=t.getBoundingClientRect();return e.top>=hU()&&e.top<window.innerHeight}function hU(){return Math.min(200,Math.max(70,window.innerHeight*.2))}const ynt=R(()=>P(()=>import("./cgrap9d6kdmn592w.js"),__vite__mapDeps([445,1,10,11,349,350,345,346,347,348,317,0,440,220,41])).then(t=>t.ProjectHomePage));var ht=(t=>(t.Chat="chat",t.Search="search",t.Images="images",t.Videos="videos",t.News="news",t))(ht||{});const vk="chat";function jNe(t){var e;return t&&(e=Object.values(ht).find(n=>n===t))!=null?e:vk}function wm(){"use forget";const t=W.c(8),[e,n]=Us();let s;if(t[0]!==e){const c=e.get(G2);s=jNe(c),t[0]=e,t[1]=s}else s=t[1];const o=s;let a;t[2]!==o||t[3]!==n?(a=c=>{const{tabType:d,options:u,extraQueryParams:f}=c,m=u===void 0?{}:u;o!==d&&n(g=>{const p=f!=null?f:new URLSearchParams,h=new URLSearchParams([...p,...g]);return h.set(G2,d),h},m)},t[2]=o,t[3]=n,t[4]=a):a=t[4];const i=a;let l;return t[5]!==i||t[6]!==o?(l=[o,i],t[5]=i,t[6]=o,t[7]=l):l=t[7],l}function vnt(t){"use forget";const e=W.c(11),n=V();let s;e[0]!==n?(s=es(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=re(it.wantsInitialTab$),[,i]=wm();let l;e[2]!==o||e[3]!==i||e[4]!==a?(l=()=>{o&&a&&a!=="chat"&&(i({tabType:a,options:{replace:!0}}),it.wantsInitialTab$.set(void 0))},e[2]=o,e[3]=i,e[4]=a,e[5]=l):l=e[5];let c;e[6]!==t||e[7]!==o||e[8]!==i||e[9]!==a?(c=[a,i,o,t],e[6]=t,e[7]=o,e[8]=i,e[9]=a,e[10]=c):c=e[10],_.useEffect(l,c)}function bnt(t){switch(t){case"answer":return"chat";case"web":return"search";case"images":return"images";case"videos":return"videos"}}function _U(t){switch(t){case"chat":return pc.ATLAS_SUPER_WIDGET_TAB_HOME;case"search":return pc.ATLAS_SUPER_WIDGET_TAB_SEARCH;case"images":return pc.ATLAS_SUPER_WIDGET_TAB_IMAGES;case"videos":return pc.ATLAS_SUPER_WIDGET_TAB_VIDEOS;case"news":return pc.ATLAS_SUPER_WIDGET_TAB_NEWS}}const Cnt=()=>{"use forget";const t=W.c(2),e=V();let n;return t[0]!==e?(n=()=>Fh()&&jh()&&Ps(e,"43324078").get("enabled",!1),t[0]=e,t[1]=n):n=t[1],re(n)};class oi extends Si()(n=>n){constructor(){super(...arguments);J(this,"startReplay",n=>{this.setState(()=>({isReplayEnabled:!0,finalMessageId:n}))});J(this,"endReplay",()=>{this.setState(()=>({isPlaying:!1,isReplayEnabled:!1,finalMessageId:null}))});J(this,"setIsReplayEnabled",n=>{this.setState(s=>U(w({},s),{isReplayEnabled:n}))});J(this,"toggleIsPlaying",()=>{this.setState(n=>U(w({},n),{isPlaying:!n.isPlaying}))});J(this,"setPlaying",n=>{this.setState(s=>U(w({},s),{isPlaying:n}))});J(this,"setSpeed",n=>{this.setState(s=>U(w({},s),{playbackSpeed:n}))})}}J(oi,"getFinalMessageId",({finalMessageId:n})=>n),J(oi,"isReplayInProgress",(n,s)=>n.isReplayEnabled&&n.finalMessageId!==s);function Snt({children:t,clientThreadId:e}){const n=Ve(e,u=>!!(u!=null&&u.tree.getBranchFromLeaf(u.currentLeafId).some(f=>{var m;return(m=f.message.metadata)==null?void 0:m.n7jupd_message}))),s=Ve(e,u=>u==null?void 0:u.currentLeafId),o=!!s,l=Vh()&&n&&!!s,c=l?s:null,[d]=_.useState(()=>new oi({finalMessageId:c,isReplayEnabled:l,isPlaying:!1,playbackSpeed:1}));return _.useEffect(()=>{o&&l&&d.setState({isReplayEnabled:l,finalMessageId:c})},[o]),r.jsx(oi.Provider,{store:d,children:t})}function wnt(t){return Cr(t).getExperiment("3438591328").get("use_scroll_v3",!1)}const NNe=R(()=>P(()=>import("./hef3uhoguynd6dfu.js"),__vite__mapDeps([446,1])),{loading:t=>F(t)}),PNe=R(()=>P(()=>import("./e7nua9i1wznz1yhn.js"),__vite__mapDeps([386,1])),{loading:t=>F(t)}),RNe=({onClick:t})=>{const e=ne();return r.jsx("div",{className:z("sticky top-6 z-10 flex h-0 items-start justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-top])]/thread:scale-50","group-[:not([data-scroll-from-top])]/thread:opacity-0","group-[:not([data-scroll-from-top])]/thread:pointer-events-none","group-[:not([data-scroll-from-top])]/thread:duration-100","group-[:not([data-scroll-from-top])]/thread:delay-0"),children:r.jsx(xU,{label:e.formatMessage({id:"dZQBu/",defaultMessage:"Scroll to beginning"}),onClick:t,children:r.jsx(NNe,{className:"icon text-token-text-primary min-w-8"})})})},LNe=({streamingState:t,onClick:e})=>{const n=ne();return r.jsx("div",{className:z("sticky bottom-[calc(var(--composer-overlap-px)+--spacing(6))] z-10 flex h-0 items-end justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-end])]/thread:scale-50","group-[:not([data-scroll-from-end])]/thread:opacity-0","group-[:not([data-scroll-from-end])]/thread:pointer-events-none","group-[:not([data-scroll-from-end])]/thread:duration-100","group-[:not([data-scroll-from-end])]/thread:delay-0"),children:r.jsx(xU,{label:n.formatMessage({id:"JDdG2F",defaultMessage:"Scroll to end"}),onClick:e,contentKey:t,children:r.jsxs("div",{className:"absolute end-0 flex items-center pe-1 text-nowrap",children:[t==="streaming"?r.jsx("span",{className:"loading-shimmer-pure-text ps-2.5",children:r.jsx(j,{id:"lMu1TV",defaultMessage:"Responding"})}):t==="unseen"?r.jsx("span",{className:"ps-2.5",children:r.jsx(j,{id:"mX2yAS",defaultMessage:"Done"})}):null,r.jsx(PNe,{className:"icon text-token-text-primary min-w-6"})]})})})},xU=({children:t,label:e,onClick:n,contentKey:s})=>{const o=_.useRef(null),a=_.useCallback(()=>{const i=o.current,l=i==null?void 0:i.firstElementChild;l&&(i.style.width="".concat(l.clientWidth,"px"))},[]);return _.useEffect(()=>{s!=null&&a()},[a,s]),r.jsx("button",{tabIndex:-1,onClick:n,"aria-label":e,onTransitionEnd:a,className:z("absolute flex h-8 min-w-8 cursor-pointer items-center justify-end overflow-hidden rounded-full outline-hidden select-none","motion-safe:transition-width motion-safe:duration-300","btn-secondary box-content shadow-sm sm:shadow-md dark:shadow-none!"),ref:o,children:t})},ONe="_threadRoot_1y3t0_1",DNe="_threadGutter_1y3t0_22",FNe={threadRoot:ONe,threadGutter:DNe},knt=n=>{var s=n,{clientThreadId:t}=s,e=we(s,["clientThreadId"]);const o=U1e(),[a,i,l]=Ve(t,f=>{var m,g;return[he.isMessageTurnEnded(f),he.getRequestId(f),(g=(m=he.getConversationLastTurn(f))==null?void 0:m.messages.some(p=>o.has(p.id)))!=null?g:!1]}),d=Ia(i)&&!a||l,u=r.jsx(BNe,w({isStreaming:d},e));return e.initScrolledToEnd?r.jsx(Ed,{children:r.jsxs(_.Suspense,{fallback:null,children:[r.jsx(Gae,{}),u]})}):u},BNe=({allowScrollToEnd:t,allowScrollToTop:e,children:n,initScrolledToEnd:s,isStreaming:o,threadFooterRef:a,threadRootRef:i})=>{const l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),u=_.useRef(null),[f]=An(x=>[Ko(x)]),[m,g]=_.useState("seen");Jn(()=>{const x=l.current;!s||!x||(x.scrollTop=x.scrollHeight,requestAnimationFrame(()=>{x.scrollTop=x.scrollHeight,requestAnimationFrame(()=>{x.scrollTop=x.scrollHeight})}))},[]),ym(()=>{const x=i.current,v=a.current,y=l.current,b=d.current,C=c.current;if(!x||!y||!b||!C)return;const S=bk(b,{root:y,threshold:0},M=>{Ln.setIsConversationScrolledFromTop(!M.isIntersecting),or(x,"data-scroll-from-top",!M.isIntersecting)}),E=Array.from({length:101},(M,A)=>A/100),k=bk(C,{root:y,threshold:E,rootMargin:"1px"},M=>{$Ne(y,C),!M.isIntersecting&&yU(u)?w2(x,y):or(x,"data-scroll-from-end",!M.isIntersecting)}),T=v&&GNe(v,M=>{x.style.setProperty("--thread-footer-height","".concat(M,"px"))});return()=>{S==null||S(),k==null||k(),T==null||T()}}),_.useEffect(()=>{const x=i.current,v=c.current,y=l.current;!t||!x||!v||!y||(or(x,"data-stream-active",o),o&&w2(x,y),g(o?"streaming":K8(x,"data-scroll-from-end")?"unseen":"seen"),o||HNe(u))},[o]);const p=_.useCallback(()=>{const x=i.current,v=l.current;!x||!v||UNe(x,v)},[i]),h=_.useCallback(()=>{qe.logEvent("chatgpt_thread_scroll_to_bottom");const x=i.current,v=l.current,y=c.current;!x||!v||!y||(w2(x,v),o?VNe(x,u):g("seen"))},[o,i]);return r.jsxs("div",{className:z("@container h-full overflow-y-auto [scrollbar-gutter:stable_both-edges] group-data-stream-active/thread:[overflow-anchor:none]",!f&&"thread-xl:pt-(--header-height)"),ref:l,children:[e&&r.jsx(RNe,{onClick:p}),r.jsx("div",{ref:d,className:"pointer-events-none w-px"}),n,r.jsx("div",{ref:c,className:z("pointer-events-none w-px",FNe.threadGutter,"min-h-[max(var(--gutter-min-height,0px),var(--gutter-remaining-height,0px))] md:[--gutter-min-height:2.25rem]","group-data-stream-active/thread:h-(--thread-end-gutter-active-height)")}),t&&r.jsx(LNe,{streamingState:m,onClick:h})]})};function UNe(t,e){or(t,"data-scroll-from-top",!1),e==null||e.scrollTo({top:0,behavior:"smooth"})}function w2(t,e){or(t,"data-scroll-from-end",!1),e==null||e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}function $Ne(t,e){const n=t.getBoundingClientRect().bottom-e.getBoundingClientRect().top;n>0?e.style.setProperty("--gutter-remaining-height","".concat(n,"px")):e.style.removeProperty("--gutter-remaining-height")}function yU(t){return t.current!=null}function VNe(t,e){if(!yU(e)&&t){const n=()=>{e.current=null,t.removeEventListener("wheel",n),t.removeEventListener("pointerdown",n)};e.current=n,t.addEventListener("wheel",n,{passive:!0}),t.addEventListener("pointerdown",n)}}function HNe(t){var e;(e=t.current)==null||e.call(t)}function bk(t,e,n){const s=new IntersectionObserver(o=>{n(o[o.length-1])},e);return s.observe(t),()=>s.disconnect()}function GNe(t,e){const n=()=>e(t.getBoundingClientRect().height);n();const s=new ResizeObserver(n);return s.observe(t),()=>s.disconnect()}function WNe({id:t,name:e,checked:n,onChange:s=as}){return r.jsx("input",{className:"sr-only",checked:n,id:t,name:e,type:"checkbox",readOnly:!0,onChange:s})}function Ent(t){"use forget";const e=W.c(8),{gizmo:n}=t;let s;e[0]!==n?(s=n?pM(n.tools):!1,e[0]=n,e[1]=s):s=e[1];const o=s;let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsxs("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]","data-testid":"temporary-chat-label",children:[r.jsx(WNe,{id:"temporary-chat-checkbox",name:"temporary-chat-checkbox",checked:!0}),r.jsx(j,w({},Ic.temporaryChat))]}),e[2]=a):a=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(qNe,{}),e[3]=i):i=e[3];let l;e[4]!==o?(l=o&&r.jsx("div",{className:"mt-3",children:r.jsx(j,U(w({},Ic.temporaryChatDescriptionGptActions),{values:{link:zNe}}))}),e[4]=o,e[5]=l):l=e[5];let c;return e[6]!==l?(c=r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a,r.jsxs("div",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-[24rem] text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:[i,l]})]}),e[6]=l,e[7]=c):c=e[7],c}function zNe(t){return r.jsx("a",{href:"https://help.openai.com/en/articles/8914046-temporary-chat-faq",target:"_blank",className:"underline",rel:"noreferrer",children:t})}function qNe(){"use forget";const t=W.c(2),e=V(),n=st(e),s=n==null?void 0:n.isWorkspaceAccount(),o=Fd(),a=s?o?Ic.temporaryChatBizMemoryAvailable:Ic.temporaryChatBizMemoryUnavailable:o?Ic.temporaryChatDescriptionMemoryAvailable:Ic.temporaryChatDescriptionMemoryUnavailable;let i;return t[0]!==a?(i=r.jsx(j,w({},a)),t[0]=a,t[1]=i):i=t[1],i}const Ic=Se({temporaryChat:{id:"GizmoLanding.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatBizMemoryAvailable:{id:"otDmKh",defaultMessage:"Memory is disabled for this chat, and it wont appear in your history."},temporaryChatBizMemoryUnavailable:{id:"fQmbtG",defaultMessage:"This chat won't appear your conversation history."},temporaryChatDescriptionMemoryAvailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryAvailable",defaultMessage:"This chat won't appear in history, use or update ChatGPT's memory, or be used to train our models. For safety purposes, we may keep a copy of this chat for up to 30 days."},temporaryChatDescriptionMemoryUnavailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryUnavailable",defaultMessage:"This chat won't appear in history or be used to train our models. For safety purposes, we may keep a copy of this chat for up to 30 days."},temporaryChatDescriptionGptActions:{id:"GizmoLanding.temporaryChatDescriptionGptActions",defaultMessage:"Any data shared with a third party through GPT actions are subject to the third party's privacy policy. <link>Learn more</link>"}});function YNe(t){"use forget";const e=W.c(5),{safetyLimited:n}=t,s=V(),o=x1(),a=at();if(n){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(j,{id:"5QWLgm",defaultMessage:"<heading>We've limited access to this content for safety reasons.</heading>This type of information may be used to benefit or to harm people. We are continuously refining our work in this area, and you can read more about our approach in our <blogLink>blog post</blogLink> and <modelSpecLink>Model Spec</modelSpecLink>.",values:{heading:JNe,blogLink:QNe,modelSpecLink:KNe}}),e[0]=l):l=e[0],l}let i;return e[1]!==s||e[2]!==a||e[3]!==o?(i=r.jsx(j,{id:"4vDLZ8",defaultMessage:"This chat may violate our <contentPolicyLink>usage policies</contentPolicyLink> and has been closed. <startNewChatLink>Start a new chat</startNewChatLink>.",values:{contentPolicyLink:ZNe,startNewChatLink:l=>es(s)?r.jsx("button",{type:"button",onClick:()=>{Tr(a,{replace:location.pathname==="/"})},className:"underline hover:no-underline",children:l}):r.jsx(wo,{to:"/",state:o,onClick:c=>{jP(s,c,{location:"Content violation"})},className:"underline hover:no-underline",children:l})}}),e[1]=s,e[2]=a,e[3]=o,e[4]=i):i=e[4],i}function ZNe(t){return r.jsx("a",{href:"https://openai.com/policies/usage-policies",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function KNe(t){return r.jsx("a",{href:"https://openai.com/index/introducing-the-model-spec/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function QNe(t){return r.jsx("a",{href:"https://openai.com/index/preparing-for-future-ai-capabilities-in-biology/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function JNe(t){return r.jsx("h4",{className:"text-base font-bold",children:t})}function Tnt({safetyLimited:t}){return r.jsx("div",{className:"flex flex-col items-center justify-center gap-4 pt-8",children:r.jsx(Ar,{children:r.jsx(Qb,{type:"danger",className:"mb-2 w-fit self-start",children:r.jsx(YNe,{safetyLimited:t})})})})}const XNe=R(()=>P(()=>import("./ls5w4xhmfxey8hbl.js"),__vite__mapDeps([447,1])),{loading:t=>F(t)});function ePe(t,e){var s;const n=(s=t!=null?t:e)!=null?s:0;return z(t!=null&&t!=e&&"opacity-50 dark:opacity-60",n>4?"text-brand-purple":n>3?"text-green-500":n>2?"text-yellow-500":n>1?"text-orange-500":"text-red-500")}function tPe(t){switch(t){case 1:return Ls.hoverRating1;case 2:return Ls.hoverRating2;case 3:return Ls.hoverRating3;case 4:return Ls.hoverRating4;case 5:return Ls.hoverRating5}}function nPe(t){return rt({queryFn:async()=>w3.getUserReview(t),queryKey:["gizmo","review",{gizmoId:t}],enabled:t!=null})}const u4=({rating:t,onRating:e,className:n})=>{const[s,o]=_.useState(),a=ne();return r.jsx("div",{className:z("flex flex-row",n),children:[1,2,3,4,5].map(i=>{var u;const l=r.jsx(XNe,{className:z("icon-2xl cursor-pointer",((u=s!=null?s:t)!=null?u:0)>=i?ePe(s,t):"text-token-main-surface-tertiary")}),c=tPe(s!=null?s:0),d=c&&a.formatMessage(c);return r.jsx("div",{onClick:()=>{e(i)},onMouseEnter:()=>{o(i)},onMouseLeave:()=>{o(void 0)},className:"p-1",children:c?r.jsx(pt,{label:d,side:"top",children:l}):l},i)})})},sPe=({gizmo:t,onClose:e})=>{var v,y,b;const n=ln(),s=ne(),o=$t(),[a,i]=_.useState(""),[l,c]=_.useState(!1),[d,u]=_.useState(),f=nPe(t.gizmo.id),m=aM(t.gizmo.id),g=d===((v=f.data)==null?void 0:v.rating);_.useEffect(()=>{f.data!=null&&d==null&&u(f.data.rating)},[f.data,d]),_.useEffect(()=>{B.logEvent("Show Rating Modal",{gizmo_id:t.gizmo.id})},[t.gizmo.id]);const p=f.data!=null,h=!((y=t.gizmo.tags)!=null&&y.includes(sp.FirstParty))&&t.gizmo.author.will_receive_support_emails,x=(b=t.gizmo.tags)==null?void 0:b.includes(sp.Workspace);return r.jsx(Mt,{testId:"modal-gizmo-review",type:"success",title:r.jsxs("div",{children:[r.jsx(j,w({},Ls.title)),r.jsxs("div",{className:"align-end mt-2 flex text-sm font-normal",children:[p?r.jsx(j,w({},Ls.subtitleChange)):r.jsx(j,w({},Ls.subtitle)),r.jsx(pt,{label:s.formatMessage(x?Ls.subtitleTooltipPrivate:Ls.subtitleTooltip),className:"ms-1 flex cursor-pointer items-center ps-1",children:r.jsx("div",{className:"icon-xs border-token-text-tertiary text-token-text-tertiary flex items-center justify-center rounded-full border text-[8px] font-bold",children:"i"})})]})]}),isOpen:!0,onClose:e,size:"custom",showCloseButton:!0,className:"max-w-xl overflow-y-auto",hideSeparator:!0,children:r.jsxs("div",{className:"flex grow flex-col space-y-8",children:[r.jsx(u4,{rating:d,onRating:u,className:"mx-auto flex flex-row items-center"}),h&&r.jsxs("div",{children:[r.jsx(eU,{className:"mb-1 w-full resize-none overflow-y-auto rounded-md bg-transparent focus:border-gray-200 focus:ring-gray-200 dark:focus:border-white dark:focus:ring-white",placeholder:s.formatMessage(Ls.messagePlaceholder),value:a,rows:1,onChange:C=>i(C.target.value)}),r.jsxs("div",{className:z("flex flex-row items-center space-x-2 self-start",a.length>0?"text-token-text-primary":"text-token-text-tertiary"),children:[r.jsx("input",{type:"checkbox",className:"rounded-sm",checked:l,onChange:C=>c(C.target.checked)}),n&&r.jsx("span",{className:"text-sm",children:r.jsx(j,U(w({},Ls.includeFrom),{values:{email:r.jsx("strong",{children:n.email})}}))})]})]}),r.jsx(ye,{color:"primary",disabled:g,onClick:async()=>{if(d==null){o.warning("Please select a rating");return}B.logEvent("Submit Rating Modal",{gizmo_id:t.gizmo.id,rating:d}),await m.mutateAsync({rating:d,message:a.length>0?a:void 0,includeFrom:a.length>0?l:void 0}),o.success(s.formatMessage(Ls.successToast),{duration:3}),e()},children:r.jsx(j,w({},Ls.submit))})]})})},Ls=Se({title:{id:"GizmoReviewModal.title",defaultMessage:"Leave Feedback"},subtitle:{id:"GizmoReviewModal.subtitle",defaultMessage:"How would you rate this GPT?"},subtitleChange:{id:"GizmoReviewModal.subtitleChange",defaultMessage:"Would you like to change your rating?"},subtitleTooltip:{id:"GizmoReviewModal.subtitleTooltip",defaultMessage:"Stars will be public and anonymous"},subtitleTooltipPrivate:{id:"GizmoReviewModal.subtitleTooltipPrivate",defaultMessage:"Stars are anonymous and will only be visible to your workspace"},messagePlaceholder:{id:"GizmoReviewModal.messagePlaceholder",defaultMessage:"Add an optional private email to the creator"},submit:{id:"GizmoReviewModal.submit",defaultMessage:"Submit"},successToast:{id:"GizmoReviewModal.successToast",defaultMessage:"Review sent"},includeFrom:{id:"GizmoReviewModal.includeFrom",defaultMessage:"Include my email address {email}"},hoverRating1:{id:"GizmoReviewModal.hoverRating1",defaultMessage:"Bad"},hoverRating2:{id:"GizmoReviewModal.hoverRating2",defaultMessage:"Okay"},hoverRating3:{id:"GizmoReviewModal.hoverRating3",defaultMessage:"Good"},hoverRating4:{id:"GizmoReviewModal.hoverRating4",defaultMessage:"Great!"},hoverRating5:{id:"GizmoReviewModal.hoverRating5",defaultMessage:"Excellent!"}}),oPe=Object.freeze(Object.defineProperty({__proto__:null,GizmoReviewSelectRating:u4,default:sPe},Symbol.toStringTag,{value:"Module"}));var kE;const Ck=ft.div(kE||(kE=ct(["m-8 flex flex-col items-center"])));function Sk(t){return r.jsx(Xe.div,w({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0,transition:{duration:.5,ease:"easeIn"}}},t))}function Mnt({clientThreadId:t}){const e=Ve(t,o=>o==null?void 0:o.promptGptRating),n=e==null?void 0:e.gizmoId,{data:s}=Ci(n);return n==null||s==null||!t8(s)?null:r.jsx(aPe,{gizmoId:n})}function aPe({gizmoId:t}){const[e,n]=_.useState(!1),[s,o]=_.useState(!1),a=aM(t),i=async c=>{n(!0),setTimeout(()=>{o(!0)},5e3),B.logEvent("Submit Inline Rating",{gizmo_id:t,rating:c}),await a.mutateAsync({rating:c})},l=async()=>{o(!0),B.logEvent("Dismiss Inline Rating",{gizmo_id:t}),await a.mutateAsync({})};return _.useEffect(()=>{s||B.logEvent("Show Inline Rating",{gizmo_id:t})},[s,t]),s?null:e?r.jsx(Ck,{children:r.jsxs(Sk,{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"border-token-border-heavy rounded-lg border p-4",children:r.jsxs("div",{className:"flex justify-between gap-2",children:[r.jsx(j,{id:"gizmo.inlineReview.reviewLeft",defaultMessage:"Feedback sent"}),r.jsx(xn,{onClick:()=>{o(!0)}})]})}),r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(j,{id:"gizmo.inlineReview.reviewLeftSubtext",defaultMessage:'To update your rating, click "Send Feedback" in the GPT Menu'})})]})}):r.jsx(Ck,{children:r.jsxs(Sk,{className:"border-token-border-heavy flex flex-col items-center gap-4 rounded-lg border p-4",children:[r.jsxs("div",{className:"flex justify-between gap-2",children:[r.jsx(j,{id:"gizmo.inlineReview.prompt",defaultMessage:"How would you rate this GPT so far?"}),r.jsx(xn,{onClick:l})]}),r.jsx(u4,{rating:void 0,onRating:i})]})})}const f4=Be({},{name:"voiceTaskStatus",equals:()=>!1}),Wc=Be([]),m4=(t,e)=>{f4.set(n=>{const s=n[t],o=typeof e=="function"?e(s):e;return o===void 0?delete n[t]:n[t]=o,n})},Ant=()=>re(()=>{const e=Wc()[0];if(e)return f4()[e.id]==="pending"?e:void 0}),Int=t=>{let e=!1;return m4(t,n=>n==="pending"?(e=!0,"running"):n),e},jnt=t=>{const e=bn(()=>Wc());e.find(s=>t===s.id)&&(m4(t,"complete"),Wc.set(e.filter(s=>s.id!==t)))},Nnt=t=>{const e=os(),n={id:e,command:t,timestamp:Date.now()};return jd(()=>{Wc.set([...Wc(),n]),vi.debug("Current voice queue",Wc()),m4(e,"pending")}),Ch(()=>f4()[e]==="complete")},rPe='defaults write com.google.Chrome NewTabPageLocation "'.concat(atob("aHR0cHM6Ly93d3cuY2hhdGdwdC5jb20vbmV3LXRhYi1wYWdl"),'"'),vU="defaults delete com.google.Chrome NewTabPageLocation 2>/dev/null || true",Py=({content:t})=>{const[e,n]=_.useState(!1),s=$t(),o=ne();return r.jsxs("div",{className:"bg-token-bg-tertiary relative min-w-0 rounded-sm",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[r.jsx("div",{className:"overflow-x-auto px-2 py-1",children:r.jsx("code",{className:"block min-w-0 whitespace-nowrap",children:t})}),e&&r.jsx(ye,{color:"secondary",className:"absolute! sticky end-1 top-1/2 -translate-y-1/2",size:"small",onClick:async()=>{try{await navigator.clipboard.writeText(t),s.success(o.formatMessage({id:"laoJM9",defaultMessage:"Command copied to clipboard"}))}catch(a){}},children:r.jsx(j,{id:"fmeSBG",defaultMessage:"Copy"})})]})},g4=()=>r.jsxs("div",{className:"bg-token-bg-secondary w-full flex-none animate-pulse rounded-md p-3",children:[r.jsx("div",{className:"mb-3 h-32 w-full rounded-md bg-gray-200"}),r.jsx("div",{className:"mb-2 h-4 w-3/4 rounded bg-gray-200"}),r.jsx("div",{className:"h-3 w-2/3 rounded bg-gray-200"})]}),Pnt=()=>_t.getItem(Ue.HomeDiscoveryDismissed)?null:r.jsx(Ar,{children:r.jsxs(Qb,{isDismissible:!0,className:"w-full",onDismiss:()=>_t.setItem(Ue.HomeDiscoveryDismissed,!0),children:[r.jsx(j,{id:"ool//w",tagName:"p",defaultMessage:"Thanks for finding this page. You can set the default chrome new tab to this page by:"}),r.jsx(Py,{content:rPe}),r.jsx(j,{id:"8+SRpS",tagName:"p",defaultMessage:"You can revert by:"}),r.jsx(Py,{content:vU})]})});function iPe({limit:t=3}={}){const{data:e,isLoading:n,isError:s}=rq({cutId:"popular_in_my_workspace",limit:t});return{gizmos:_.useMemo(()=>{var i;return((i=e==null?void 0:e.pages)!=null?i:[]).flatMap(l=>{var c;return(c=l.list)!=null?c:[]}).flatMap(l=>{var c;return(c=l.items)!=null?c:[]}).flatMap(l=>l.resource)},[e]),isLoading:n,isError:s}}function lPe(){const{gizmos:t,isLoading:e,isError:n}=iPe();return n?null:r.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:r.jsx(j,{id:"/XUia9",defaultMessage:"Trending GPTs"})}),e&&r.jsx(r.Fragment,{children:Array.from({length:3}).map((s,o)=>r.jsx(g4,{},o))}),t.map(s=>r.jsx(cPe,{gizmo:s},s.gizmo.id))]})}function cPe({gizmo:t}){var l;const e=V(),n=at(),s=t.gizmo.display.name,o=t.gizmo.display.description,a=(l=t.gizmo.display.profile_picture_url)!=null?l:void 0,i=()=>{const c=kf(e,t);n(c)};return r.jsx("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:i,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(V1,{src:a,isFirstParty:!1,className:"h-10 w-10 shrink-0 rounded-md border border-gray-200 dark:border-gray-700"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h3",{className:"mb-0.5 line-clamp-1 text-sm font-medium",children:s}),o&&r.jsx("p",{className:"text-token-text-secondary line-clamp-2 text-xs",children:o})]})]})})}const dPe=R(()=>P(()=>import("./c9patjs9aymkcczz.js"),__vite__mapDeps([448,1,10,11])).then(t=>t.ItemDisplayModal));function bU(){"use forget";var l,c,d,u;const t=W.c(8);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["mixed-feed"],queryFn:fPe},t[0]=e):e=t[0];const n=rt(e);let s;t[1]!==((l=n.data)==null?void 0:l.items)?(s=(d=(c=n.data)==null?void 0:c.items)!=null?d:[],t[1]=(u=n.data)==null?void 0:u.items,t[2]=s):s=t[2];let o;t[3]!==s?(o=s.filter(uPe),t[3]=s,t[4]=o):o=t[4];const a=o;let i;return t[5]!==a||t[6]!==n?(i=U(w({},n),{items:a}),t[5]=a,t[6]=n,t[7]=i):i=t[7],i}function uPe(t){return t.content_type!=="survey"&&t.content_type!=="card_set"&&t.content_type!=="footer"}function fPe(){return ge.safeGet("/feed/mixed")}function Rnt(){"use forget";const t=W.c(3);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(_Pe,{})}),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(mPe,{})}),t[1]=n):n=t[1];let s;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsxs("div",{className:"flex w-full justify-center gap-4",children:[e,n,r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(lPe,{})})]}),t[2]=s):s=t[2],s}function mPe(){"use forget";const t=W.c(13),{items:e,isLoading:n,isError:s}=bU();let o,a,i,l;if(t[0]!==s||t[1]!==n||t[2]!==e){l=Symbol.for("react.early_return_sentinel");e:{const d=e.filter(hPe);if(s){l=null;break e}o="flex flex-col gap-3 pe-1",t[7]!==n?(a=n&&r.jsx(r.Fragment,{children:Array.from({length:4}).map(pPe)}),t[7]=n,t[8]=a):a=t[8],i=d.map(gPe)}t[0]=s,t[1]=n,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=l}else o=t[3],a=t[4],i=t[5],l=t[6];if(l!==Symbol.for("react.early_return_sentinel"))return l;let c;return t[9]!==o||t[10]!==a||t[11]!==i?(c=r.jsxs("div",{className:o,children:[a,i]}),t[9]=o,t[10]=a,t[11]=i,t[12]=c):c=t[12],c}function gPe(t,e){return r.jsx("div",{children:r.jsx(CU,{item:t})},"".concat(t.content_type,"-").concat(e))}function pPe(t,e){return r.jsx(g4,{},e)}function hPe(t){var e,n;return t.content_type==="card"&&(((e=t.title)==null?void 0:e.toLowerCase().includes("inbox"))||((n=t.title)==null?void 0:n.toLowerCase().includes("calendar")))}function _Pe(){"use forget";const t=W.c(7),{items:e,isLoading:n,isError:s}=bU();if(s)return null;let o;t[0]!==n?(o=n&&r.jsx(r.Fragment,{children:Array.from({length:4}).map(yPe)}),t[0]=n,t[1]=o):o=t[1];let a;t[2]!==e?(a=e.map(xPe),t[2]=e,t[3]=a):a=t[3];let i;return t[4]!==o||t[5]!==a?(i=r.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[o,a]}),t[4]=o,t[5]=a,t[6]=i):i=t[6],i}function xPe(t,e){return r.jsx("div",{children:r.jsx(CU,{item:t})},"".concat(t.content_type,"-").concat(e))}function yPe(t,e){return r.jsx(g4,{},e)}const CU=t=>{"use forget";var l,c;const e=W.c(37),{item:n}=t,s=ne();let o;e[0]!==s?(o=s.formatMessage(wk.newsImageAlt),e[0]=s,e[1]=o):o=e[1];const a=o,i=V();switch(n.content_type){case"card":{const d=(l=n.image)==null?void 0:l.url,u=(c=n.image)==null?void 0:c.fallback_url,f=n.title,m=n.preview_markdown_text;let g;e[2]!==i||e[3]!==a||e[4]!==n?(g=()=>dt(i,dPe,{selectedCard:n,fallbackAltText:a}),e[2]=i,e[3]=a,e[4]=n,e[5]=g):g=e[5];let p;e[6]!==u||e[7]!==d||e[8]!==s||e[9]!==f?(p=d&&r.jsx("img",{src:d,onError:y=>{u&&y.target.src!==u&&(y.target.src=u)},alt:f!=null?f:s.formatMessage(wk.newsImageAlt),className:"mb-3 h-32 w-full rounded-md object-cover"}),e[6]=u,e[7]=d,e[8]=s,e[9]=f,e[10]=p):p=e[10];let h;e[11]!==f?(h=f&&r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:f}),e[11]=f,e[12]=h):h=e[12];let x;e[13]!==m?(x=m&&r.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:m}),e[13]=m,e[14]=x):x=e[14];let v;return e[15]!==g||e[16]!==p||e[17]!==h||e[18]!==x?(v=r.jsxs("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:g,children:[p,h,x]}),e[15]=g,e[16]=p,e[17]=h,e[18]=x,e[19]=v):v=e[19],v}case"header_with_date":{let d;e[20]!==n.date?(d=n.date!=null?new Date(Number(n.date)*1e3):null,e[20]=n.date,e[21]=d):d=e[21];const u=d,f=n.body;let m;e[22]!==u?(m=u&&r.jsx("h3",{className:"mb-0.5 line-clamp-2 text-sm font-medium",children:r.jsx(VE,{value:u,month:"long",day:"numeric"})}),e[22]=u,e[23]=m):m=e[23];let g;e[24]!==f?(g=f&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:f}),e[24]=f,e[25]=g):g=e[25];let p;return e[26]!==m||e[27]!==g?(p=r.jsxs("div",{children:[m,g]}),e[26]=m,e[27]=g,e[28]=p):p=e[28],p}case"commentary":{const d=n.title,u=n.body;let f;e[29]!==d?(f=d&&r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:d}),e[29]=d,e[30]=f):f=e[30];let m;e[31]!==u?(m=u&&r.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:u}),e[31]=u,e[32]=m):m=e[32];let g;return e[33]!==f||e[34]!==m?(g=r.jsxs("div",{children:[f,m]}),e[33]=f,e[34]=m,e[35]=g):g=e[35],g}case"divider":{let d;return e[36]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("div",{className:"border-token-border-muted my-1 border-t"}),e[36]=d):d=e[36],d}default:return null}},wk=Se({newsImageAlt:{id:"+EPy7B",defaultMessage:"News image"}}),vPe=R(()=>P(()=>Promise.resolve().then(()=>vm),void 0),{loading:t=>F(t)}),bPe=R(()=>P(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([145,1])),{loading:t=>F(t)}),CPe=R(()=>P(()=>import("./ep5wvjiuce9gz0i0.js"),__vite__mapDeps([449,1])),{loading:t=>F(t)}),kk=R(()=>P(()=>import("./fd7xjhmy8e0hypda.js"),__vite__mapDeps([450,1,10,11])).then(t=>t.AddShortcutModal)),SPe=t=>Array.isArray(t)?t.map(e=>typeof e=="object"&&e!=null?{name:String(e.name),url:String(e.url)}:null).filter(e=>e!=null):[];function Lnt(){"use forget";var C;const t=W.c(31),e=V(),n=ne();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=SPe((C=_t.getItem(Ue.ShortcutLinks))!=null?C:[]),t[0]=s):s=t[0];const[o,a]=_.useState(s);let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=S=>{a(S),_t.setItem(Ue.ShortcutLinks,S)},t[1]=i):i=t[1];const l=i;let c;t[2]!==e||t[3]!==n||t[4]!==o?(c=S=>{dt(e,kk,{title:n.formatMessage(Wu.editShortcut),defaultName:o[S].name,defaultUrl:o[S].url,onSave:(E,k)=>{l(o.map((T,M)=>M===S?{name:E,url:k}:T))}})},t[2]=e,t[3]=n,t[4]=o,t[5]=c):c=t[5];const d=c;let u;t[6]!==o?(u=S=>{l(o.filter((E,k)=>k!==S))},t[6]=o,t[7]=u):u=t[7];const f=u;let m;if(t[8]!==d||t[9]!==f||t[10]!==o){let S;t[12]!==d||t[13]!==f?(S=(E,k)=>r.jsx(Ek,{onClick:()=>window.location.href=E.url,img:r.jsx("img",{src:"https://www.google.com/s2/favicons?domain=".concat(E.url,"&sz=64"),alt:E.name,className:"h-6 w-6"}),name:E.name,showMenu:!0,onEdit:()=>d(k),onRemove:()=>f(k)},E.name),t[12]=d,t[13]=f,t[14]=S):S=t[14],m=o.map(S),t[8]=d,t[9]=f,t[10]=o,t[11]=m}else m=t[11];let g;t[15]!==e||t[16]!==n||t[17]!==o?(g=()=>dt(e,kk,{title:n.formatMessage(Wu.addShortcut),onSave:(S,E)=>{l([...o,{name:S,url:E}])}}),t[15]=e,t[16]=n,t[17]=o,t[18]=g):g=t[18];let p;t[19]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(vPe,{className:"h-6 w-6"}),t[19]=p):p=t[19];let h;t[20]!==n?(h=n.formatMessage(Wu.addShortcut),t[20]=n,t[21]=h):h=t[21];let x;t[22]!==g||t[23]!==h?(x=r.jsx(Ek,{onClick:g,img:p,name:h}),t[22]=g,t[23]=h,t[24]=x):x=t[24];let v;t[25]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("div",{className:"absolute! end-0 top-0 translate-x-full rtl:-translate-x-full",children:r.jsx(wPe,{})}),t[25]=v):v=t[25];let y;t[26]!==x?(y=r.jsxs("div",{className:"relative",children:[x,v]}),t[26]=x,t[27]=y):y=t[27];let b;return t[28]!==y||t[29]!==m?(b=r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"flex flex-wrap justify-center",children:[m,y]})}),t[28]=y,t[29]=m,t[30]=b):b=t[30],b}const wPe=()=>{"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(j5,{triggerIcon:bPe,side:"right",sideOffset:4,children:r.jsxs("div",{className:"text-sm",children:[r.jsx(j,{id:"RUf4sV",tagName:"p",defaultMessage:"You can revert to chrome original by:"}),r.jsx(Py,{content:vU})]})}),t[0]=e):e=t[0],e},Ek=({onClick:t,img:e,name:n,showMenu:s,onEdit:o,onRemove:a})=>{const i=ne();return r.jsxs(ye,{color:"ghost",className:"group relative rounded-sm",onClick:t,children:[s&&o&&a&&r.jsxs(K.Root,{children:[r.jsx(K.Trigger,{asChild:!0,onClick:l=>{l.stopPropagation()},children:r.jsx(kPe,{})}),r.jsx(K.Portal,{children:r.jsxs(K.Content,{size:"auto",children:[r.jsx(K.Item,{onClick:l=>{l.stopPropagation(),o()},label:i.formatMessage(Wu.edit)}),r.jsx(K.Item,{onClick:l=>{l.stopPropagation(),a()},label:i.formatMessage(Wu.remove)})]})})]}),r.jsxs("div",{className:"flex flex-col items-center gap-3 py-3",children:[r.jsx("div",{className:"bg-token-bg-secondary mx-3 rounded-full p-3",children:e}),r.jsx("span",{className:"text-xs text-gray-700",children:n})]})]})},kPe=n=>{var s=n,{ref:t}=s,e=we(s,["ref"]);return r.jsx(ye,U(w({ref:t},e),{as:"button",onClick:o=>{var a;return(a=e.onClick)==null?void 0:a.call(e,o)},icon:CPe,color:"ghost",className:"absolute! end-0 top-0 opacity-0 transition-opacity group-hover:opacity-100",size:"small"}))},Wu=Se({addShortcut:{id:"TK0jxS",defaultMessage:"Add shortcut"},editShortcut:{id:"OLI43T",defaultMessage:"Edit shortcut"},edit:{id:"PUtE2c",defaultMessage:"Edit"},remove:{id:"lCYLCS",defaultMessage:"Remove"}}),EPe=R(()=>P(()=>import("./9k6qmhn6o7ot8x06.js"),__vite__mapDeps([451,1])),{loading:t=>F(t)}),TPe=R(()=>P(()=>import("./nbrjep5yk15f1ntt.js"),__vite__mapDeps([351,1,10,11,352])).then(t=>t.ConnectorsOnboardingModal)),Tk=R(()=>P(()=>import("./c5abhi5u597ijhgr.js"),__vite__mapDeps([452,1,10,11])).then(t=>t.GlauxNuxModal));function Ont({clientThreadId:t}){var I;const e=V(),n=ne(),s=Ti(),o=xs(),a=$s(),[i,l]=Us(),c=nM(e),d=Sn(),u=(I=d==null?void 0:d.name)!=null?I:"",m=sM(d==null?void 0:d.planType)?r.jsx(j,{id:"2mP3gw",defaultMessage:"Organization knowledge"}):r.jsx(j,{id:"eMtjgF",defaultMessage:"Company knowledge"}),g=re(()=>h3(e)),p=!g,h=re(()=>wh(e)),x=_.useMemo(()=>{var L;if(p||h===void 0)return!1;const N=h==null?void 0:h.some(O=>["partially_activated","activated","activating"].includes(O.user_connection_details.activation_status));return((L=g==null?void 0:g.size)!=null?L:0)>0||N},[p,g==null?void 0:g.size,h]),v=_t.getItem(Ue.HasClickedCompanyKnowledgePill),y=_.useCallback(()=>{_t.setItem(Ue.HasClickedCompanyKnowledgePill,new Date().toISOString())},[]),b=re(()=>Mo(e)),C=b==null?void 0:b.some(N=>N.systemHint==="glaux"),{auraAnnouncementBannerState$:S}=$5(e),E=re(S),{available:k}=gU(),T=_.useMemo(()=>k&&o==null,[k,o]),M=_.useCallback(()=>{y();const N=_t.getItem("oai/apps/connectors/glauxOnboarding"),L=()=>{a("glaux",{analyticsMetadata:{clientThreadId:t}}),setTimeout(()=>{no(Pt(s))},100),B.logEventWithStatsig("ChatGPT Connectors Connector Pill Enabled","chatgpt_connectors_connector_pill_enabled",{type:"glaux"})};if(c==="restricted"&&N||!c){L();return}c==="restricted"?dt(e,Tk,{onContinue:L}):c==="external"&&(x?L():dt(e,TPe,{onContinue:L}))},[e,t,a,s,c,y,x]);_.useEffect(()=>{C&&i.get("glaux-onboarding")==="true"&&(dt(e,Tk,{onContinue:()=>{a("glaux",{analyticsMetadata:{clientThreadId:t}}),no(Pt(s))}}),l(L=>(L.delete("glaux-onboarding"),L)))},[C,i,l,e,t,a,s]);const A=({onClick:N,Icon:L,label:O,tooltip:D})=>{const $=r.jsx(ye,{className:"py-2",color:"secondary",onClick:N,size:"medium",children:r.jsx("div",{className:"flex gap-2",children:r.jsxs(r.Fragment,{children:[L,O]})})});return r.jsx("div",{className:"mx-1.5 mt-11 flex justify-center max-md:hidden",children:D?r.jsx(pt,{label:D,children:$}):$})};return T?r.jsx(A,{onClick:M,Icon:r.jsx(EPe,{className:"icon"}),label:r.jsxs(r.Fragment,{children:[m,v||E==="shown"?null:r.jsx("span",{className:"inline-flex shrink-0 items-center rounded-full bg-[rgba(2,133,255,0.15)] px-1.5 py-px text-xs font-semibold text-[#0285FF]",children:r.jsx(j,{id:"Q46KVL",defaultMessage:"NEW"})})]}),tooltip:n.formatMessage({id:"TfieoZ",defaultMessage:"Search {name}'s knowledge"},{name:u})}):null}function MPe(t){return t!=null&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||!!t.getAttribute("contenteditable"))}function Dnt(t){"use forget";const e=W.c(3);let n,s;e[0]!==t?(n=()=>{const o=Pt(t).dom.ownerDocument,a=o.defaultView;if(!a)return;const i=l=>{l.code!=="Space"&&(!l.metaKey||l.key==="v")&&!MPe(o.activeElement)&&no(Pt(t))};return a.addEventListener("keypress",i),()=>{a.removeEventListener("keypress",i)}},s=[t],e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]),_.useEffect(n,s)}const APe=R(()=>P(()=>import("./hw8bsku1vts8j7n2.js"),__vite__mapDeps([318,1])),{loading:t=>F(t)}),fd=t=>{"use forget";var E;const e=W.c(31);let n,s,o,a;e[0]!==t?(E=t,{className:o,fallbackSrc:n,shadow:a}=E,s=we(E,["className","fallbackSrc","shadow"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a):(n=e[1],s=e[2],o=e[3],a=e[4]);const i=o===void 0?"":o,l=a===void 0?!1:a,c=ne();let d;e[5]!==n||e[6]!==s.src?(d=()=>s.src?"primary":n?"fallback":"error",e[5]=n,e[6]=s.src,e[7]=d):d=e[7];const[u,f]=_.useState(d);let m,g;e[8]!==n||e[9]!==s.src?(m=()=>{const k=s.src?"primary":n?"fallback":"error";f(T=>T===k?T:k)},g=[s.src,n],e[8]=n,e[9]=s.src,e[10]=m,e[11]=g):(m=e[10],g=e[11]),_.useEffect(m,g);const p=u==="primary"?s.src:n!=null?n:void 0,h=l&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let x;e[12]!==i||e[13]!==h?(x=z("rounded-2xl object-cover aspect-square",h,i),e[12]=i,e[13]=h,e[14]=x):x=e[14];const v=x;if(!p||u==="error"){let k;return e[15]!==v||e[16]!==s.onClick||e[17]!==l?(k=r.jsx(IPe,{onClick:s.onClick,className:v,shadow:l}),e[15]=v,e[16]=s.onClick,e[17]=l,e[18]=k):k=e[18],k}let y;e[19]!==c?(y=c.formatMessage({id:"syAyIZ",defaultMessage:"Image attachment"}),e[19]=c,e[20]=y):y=e[20];let b;e[21]===Symbol.for("react.memo_cache_sentinel")?(b=k=>{const{currentTarget:T}=k;(T.naturalWidth<30||T.naturalHeight<30)&&f("error")},e[21]=b):b=e[21];let C;e[22]!==n||e[23]!==u?(C=k=>{const{currentTarget:T}=k;u==="primary"&&n&&T.src!==n?f("fallback"):f("error")},e[22]=n,e[23]=u,e[24]=C):C=e[24];let S;return e[25]!==v||e[26]!==s||e[27]!==p||e[28]!==C||e[29]!==y?(S=r.jsx("img",U(w({},s),{alt:y,loading:"eager",src:p,className:v,onLoad:b,onError:C})),e[25]=v,e[26]=s,e[27]=p,e[28]=C,e[29]=y,e[30]=S):S=e[30],S},IPe=t=>{"use forget";const e=W.c(7),{className:n,shadow:s,onClick:o}=t,a=s&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let i;e[0]!==n||e[1]!==a?(i=z("border-token-[#0285FF17] flex items-center justify-center rounded-2xl border bg-[#DFEFFF] object-cover p-2",a,n),e[0]=n,e[1]=a,e[2]=i):i=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(APe,{className:"text-token-text-accent aspect-square h-1/3 w-1/3"}),e[3]=l):l=e[3];let c;return e[4]!==o||e[5]!==i?(c=r.jsx("div",{onClick:o,className:i,children:l}),e[4]=o,e[5]=i,e[6]=c):c=e[6],c},jPe=70,Mk="radial-gradient(circle at center, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 99%)",SU=t=>{"use forget";var c,d;const e=W.c(5),{images:n}=t,o=re(iq)?28:21,a=o>n.length&&((c=n.at(0))==null?void 0:c.url)===((d=n.at(-1))==null?void 0:d.url)?o-1:o;let i;e[0]!==a?(i=Array.from({length:a}),e[0]=a,e[1]=i):i=e[1];let l;if(e[2]!==n||e[3]!==i){const u=i.map((f,m)=>n[m%n.length]);l=r.jsx(NPe,{images:u,imageSize:80}),e[2]=n,e[3]=i,e[4]=l}else l=e[4];return l},NPe=t=>{"use forget";const e=W.c(12),{images:n,imageSize:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=z("flex h-45 w-full max-w-170 items-center justify-center transition-opacity duration-200 ease-in-out"),e[0]=o):o=e[0];let a,i,l;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={maskImage:Mk,WebkitMaskImage:Mk,maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat"},i=z("absolute start-1/2 top-0 aspect-square w-[190%] -translate-x-1/2 animate-spin"),l={animationDuration:"".concat(jPe,"s")},e[1]=a,e[2]=i,e[3]=l):(a=e[1],i=e[2],l=e[3]);let c;if(e[4]!==s||e[5]!==n){let u;e[7]!==s||e[8]!==n.length?(u=(f,m)=>{const g=m/n.length*360;return r.jsx("div",{className:"absolute inset-0 origin-center",style:{transform:"rotate(".concat(g,"deg)"),transformOrigin:"center"},children:r.jsx("div",{className:"absolute start-1/2 top-0 -translate-x-1/2",children:r.jsx("div",{style:{width:"".concat(s,"px"),height:"".concat(s,"px")},children:r.jsx(fd,{src:f==null?void 0:f.url,fallbackSrc:f==null?void 0:f.fallback_url,className:"h-full w-full rounded-xl",shadow:!0})})})},"".concat(m,"-").concat(f==null?void 0:f.url))},e[7]=s,e[8]=n.length,e[9]=u):u=e[9],c=n.map(u),e[4]=s,e[5]=n,e[6]=c}else c=e[6];let d;return e[10]!==c?(d=r.jsx("div",{className:o,children:r.jsx("div",{className:"relative h-full w-full",style:a,children:r.jsx("div",{className:i,style:l,children:c})})}),e[10]=c,e[11]=d):d=e[11],d},Ry=t=>{"use forget";const e=W.c(13),{firstRef:n,secondRef:s,firstSide:o,secondSide:a,threshold:i,absolute:l}=t,c=i===void 0?200:i,d=l===void 0?!0:l,[u,f]=_.useState(!1);let m;e[0]!==d||e[1]!==n||e[2]!==o||e[3]!==s||e[4]!==a||e[5]!==c?(m=()=>{const p=n.current,h=s.current;if(!p||!h){f(!1);return}const x=()=>{const b=p.getBoundingClientRect(),C=h.getBoundingClientRect(),S=b[o]-C[a];f(d?Math.abs(S)<=c:S<=c)};let v=null;const y=()=>{v!=null&&cancelAnimationFrame(v),v=requestAnimationFrame(()=>{v=null,x()})};return window.addEventListener("resize",y,{passive:!0}),x(),()=>{v!=null&&cancelAnimationFrame(v),window.removeEventListener("resize",y),window.removeEventListener("orientationchange",y)}},e[0]=d,e[1]=n,e[2]=o,e[3]=s,e[4]=a,e[5]=c,e[6]=m):m=e[6];let g;return e[7]!==n||e[8]!==o||e[9]!==s||e[10]!==a||e[11]!==c?(g=[n,s,o,a,c],e[7]=n,e[8]=o,e[9]=s,e[10]=a,e[11]=c,e[12]=g):g=e[12],Jn(m,g),u},wU=on(()=>Tf(Ue.HasSeenPulseOnboarding,()=>!1));function Fnt(){"use forget";var D,$;const t=W.c(37),e=V();let n;t[0]!==e?(n=()=>g5(e),t[0]=e,t[1]=n):n=t[1];const{data:s}=re(n);let o,a;t[2]!==e?(o=()=>{z3e(e)},a=[e],t[2]=e,t[3]=o,t[4]=a):(o=t[3],a=t[4]),_.useEffect(o,a);let i;t[5]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[5]=i):i=t[5],_.useEffect(RPe,i);let l;t[6]!==(s==null?void 0:s.onboarding_config)?(l=(D=s==null?void 0:s.onboarding_config)!=null?D:{},t[6]=s==null?void 0:s.onboarding_config,t[7]=l):l=t[7];const{image_urls:c,name:d}=l,u=PPe,f=_.useRef(null),m=_.useRef(null);let g;t[8]===Symbol.for("react.memo_cache_sentinel")?(g={firstRef:m,secondRef:f,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},t[8]=g):g=t[8];const p=Ry(g);let h;t[9]!==e?(h=()=>{wU.set(e,!0),Fs(e).logEventWithStatsig("(Web) FYP Onboarding Completed","chatgpt_web_fyp_onboarding_completed")},t[9]=e,t[10]=h):h=t[10];const x=h,v=p&&"sticky top-0";let y;t[11]!==v?(y=z("relative flex h-45 w-full items-center justify-center",v),t[11]=v,t[12]=y):y=t[12];let b;t[13]!==c?(b=($=c==null?void 0:c.map(oA))!=null?$:[],t[13]=c,t[14]=b):b=t[14];let C;t[15]!==b?(C=r.jsx(SU,{images:b}),t[15]=b,t[16]=C):C=t[16];let S;t[17]!==C||t[18]!==y?(S=r.jsx("div",{className:y,ref:m,children:C}),t[17]=C,t[18]=y,t[19]=S):S=t[19];let E;t[20]!==d?(E=r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,U(w({},xg.greeting),{values:{name:d}}))}),t[20]=d,t[21]=E):E=t[21];let k;t[22]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("div",{className:"whitespace-pre-line",children:r.jsx(j,w({},xg.onboardingExplanation))}),t[22]=k):k=t[22];let T;t[23]!==E?(T=r.jsxs("div",{className:"flex flex-col gap-4",children:[E,k]}),t[23]=E,t[24]=T):T=t[24];let M;t[25]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(j,w({},xg.next)),t[25]=M):M=t[25];let A;t[26]!==x?(A=r.jsx(ye,{size:"large",className:"w-1/2",onClick:x,children:M}),t[26]=x,t[27]=A):A=t[27];let I;t[28]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx("span",{className:"text-token-text-tertiary px-2 text-sm font-medium",children:r.jsx(j,U(w({},xg.learnMore),{values:{link:u}}))}),t[28]=I):I=t[28];let N;t[29]!==A?(N=r.jsxs("div",{className:"flex w-full flex-col gap-2",children:[A,I]}),t[29]=A,t[30]=N):N=t[30];let L;t[31]!==T||t[32]!==N?(L=r.jsxs("div",{className:"flex w-full flex-col justify-start gap-6 text-xl font-medium",children:[T,N]}),t[31]=T,t[32]=N,t[33]=L):L=t[33];let O;return t[34]!==S||t[35]!==L?(O=r.jsxs("div",{className:"relative mx-auto mb-30 flex w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-hidden px-4 py-6",children:[S,L]}),t[34]=S,t[35]=L,t[36]=O):O=t[36],O}function PPe(t){return r.jsx(to,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",target:"_blank",rel:"noreferrer",className:"text-token-text-secondary underline",children:t})}function RPe(){Ie.count(je.PULSE,"chatgpt_web_fyp_onboarding_shown")}const xg=Se({greeting:{id:"SqSmpy",defaultMessage:"Hi, {name}"},onboardingExplanation:{id:"SbZL/F",defaultMessage:"I'm here to surface what's helpful to you once a day, every day. You decide what shows up  if you tell me what to focus on, I'll curate it for you tomorrow."},learnMore:{id:"Chvn9N",defaultMessage:"<link>Learn more</link> about how Pulse works"},next:{id:"U2jFjI",defaultMessage:"Next"}}),LPe=on(t=>St(()=>{var s,o,a;const e=g5(t),n=(a=(o=(s=e==null?void 0:e.data)==null?void 0:s.onboarding_config)==null?void 0:o.image_urls)!=null?a:[];return new Set(n)})),OPe=()=>{"use forget";const t=W.c(2),e=V();let n;t[0]!==e?(n=()=>Rl(()=>{wU(e)||LPe(e).forEach(DPe)}),t[0]=e,t[1]=n):n=t[1],_.useEffect(n)};function DPe(t){const e=new Image;e.src=t}const FPe=R(()=>P(()=>import("./d9d46aun6hvzsagm.js"),__vite__mapDeps([284,1])),{loading:t=>F(t)}),BPe=Se({defaultTitle:{id:"pulse.entrypoint.defaultTitle",defaultMessage:"Today's pulse"},seenCaption:{id:"pulse.entrypoint.seenCaption",defaultMessage:"You're all caught up for today."}}),Bnt=t=>{"use forget";const e=W.c(8),{pulseId:n,caption:s,previewImages:o,onClick:a}=t,i=V();OPe();let l;e[0]!==s||e[1]!==i||e[2]!==a||e[3]!==o||e[4]!==n?(l=n&&r.jsx(Xe.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.1,ease:"easeInOut"},className:"mt-10 max-md:hidden",children:r.jsx(Ar,{className:"flex justify-center px-10",children:r.jsx(UPe,{previewImages:o,title:r.jsx(j,w({},BPe.defaultTitle)),caption:s,onClick:()=>{Fs(i).logEventWithStatsig("(Web) FYP Entrypoint Tapped","chatgpt_web_fyp_entrypoint_tapped"),LO.set(i,p5.Chat),Ie.count(je.PULSE,"chatgpt_web_fyp_entrypoint_tapped"),a()}})})}),e[0]=s,e[1]=i,e[2]=a,e[3]=o,e[4]=n,e[5]=l):l=e[5];let c;return e[6]!==l?(c=r.jsx(fn,{children:l}),e[6]=l,e[7]=c):c=e[7],c};function UPe(t){"use forget";const e=W.c(19),{onClick:n,previewImages:s,title:o,caption:a}=t,i=V();let l,c;e[0]!==i?(l=()=>{Fs(i).logEventWithStatsig("(Web) FYP Entrypoint Shown","chatgpt_web_fyp_entrypoint_shown"),Ie.count(je.PULSE,"chatgpt_web_fyp_entrypoint_shown")},c=[i],e[0]=i,e[1]=l,e[2]=c):(l=e[1],c=e[2]),_.useEffect(l,c);let d;e[3]!==s?(d=r.jsx($Pe,{previewImages:s}),e[3]=s,e[4]=d):d=e[4];let u;e[5]!==o?(u=r.jsx("div",{className:"text-sm font-semibold",children:o}),e[5]=o,e[6]=u):u=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(FPe,{className:"h-4 w-4 flex-shrink-0"}),e[7]=f):f=e[7];let m;e[8]!==u?(m=r.jsxs("div",{className:"flex flex-shrink-0 items-center gap-1",children:[u,f]}),e[8]=u,e[9]=m):m=e[9];let g;e[10]!==d||e[11]!==m?(g=r.jsxs("div",{className:"flex flex-shrink-0 items-center gap-4",children:[d,m]}),e[10]=d,e[11]=m,e[12]=g):g=e[12];let p;e[13]!==a?(p=r.jsx("div",{className:"text-token-text-tertiary group-hover:text-token-text-secondary min-w-0 flex-shrink truncate text-sm whitespace-nowrap transition-colors",children:a}),e[13]=a,e[14]=p):p=e[14];let h;return e[15]!==n||e[16]!==g||e[17]!==p?(h=r.jsxs("div",{className:"group hover:bg-token-bg-tertiary inline-flex cursor-pointer items-center gap-2 overflow-hidden rounded-full px-4 py-2",onClick:n,children:[g,p]}),e[15]=n,e[16]=g,e[17]=p,e[18]=h):h=e[18],h}function $Pe({previewImages:t}){var e,n,s,o;return r.jsxs("div",{className:"relative h-7 w-7",children:[r.jsx(fd,{src:(e=t[0])==null?void 0:e.url,fallbackSrc:(n=t[0])==null?void 0:n.fallback_url,className:"absolute aspect-square h-7 w-7 translate-x-2 rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:translate-x-2.5 group-hover:rotate-[3deg]"}),r.jsx(fd,{src:(s=t[1])==null?void 0:s.url,fallbackSrc:(o=t[1])==null?void 0:o.fallback_url,className:"absolute aspect-square h-7 w-7 -rotate-[6.5deg] rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:-translate-x-1 group-hover:-rotate-[10deg]"})]})}function VPe({currentIndex:t,numEntries:e,onChange:n,onMouseDown:s,onMouseUp:o}){return r.jsx("div",{className:"w-full",children:r.jsxs(R5,{className:"relative m-2 flex w-full items-center",min:0,max:e,step:1,value:[t],onValueChange:a=>{n(a[0]),s()},onValueCommit:()=>{o()},children:[r.jsx(L5,{className:"bg-token-text-quaternary relative h-[9px] grow rounded-full",children:r.jsx(fF,{className:"bg-token-text-primary absolute h-full rounded-full"})}),r.jsx(O5,{className:"bg-token-bg-primary border-token-bg-secondary block h-[15px] w-[15px] cursor-pointer rounded-full border focus:outline-none"})]})})}const HPe=R(()=>P(()=>import("./luk8bxmt063r9itm.js"),__vite__mapDeps([453,1])),{loading:t=>F(t)}),GPe=R(()=>P(()=>import("./jxyz1kdkcze5jtww.js"),__vite__mapDeps([454,1])),{loading:t=>F(t)}),WPe=R(()=>P(()=>import("./dni8akjyvev2h15q.js"),__vite__mapDeps([455,1])),{loading:t=>F(t)}),zPe=R(()=>P(()=>import("./dh7mc6hgd545v1dp.js"),__vite__mapDeps([122,1])),{loading:t=>F(t)}),qPe=R(()=>P(()=>import("./hthps8s6hg6mj1wr.js"),__vite__mapDeps([343,1])),{loading:t=>F(t)});R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)});function YPe(t,e){const n=[];if(!e)return n;let s=t.getNodeIfExists(e);for(;s;)n.push(s.message),s=t.getNodeIfExists(s.parentId);return n.reverse()}const ZPe=400,KPe=4e3,QPe=3e3,JPe=2e3;function XPe(t,e){const n=t.author.name,s=t.recipient;return n!=null&&n.startsWith("browser")||s!=null&&s.startsWith("browser")?KPe/e:Lm(n,724319625)||Lm(s,724319625)?QPe/e:Lm(n,3405121681)||Lm(s,3405121681)?JPe/e:ZPe/e}const kU="inline-block min-h-[unset]",Ak=z(kU,"p-0 h-fit py-1 px-4");function Unt({clientThreadId:t}){var A;const e=at(),n=oi.useState(I=>I.finalMessageId),s=oi.useStore(),o=oi.useState(I=>I.isPlaying),a=oi.useState(I=>I.playbackSpeed),i=s.setPlaying,l=s.endReplay,c=_.useRef(!1),d=_.useCallback(I=>{i(I),c.current=I},[i]),u=_.useCallback(()=>{i(!1)},[i]),f=_.useCallback(()=>{i(c.current)},[i]);_.useCallback(()=>{if(!n)throw Error("Missing finalMessageId");Ze(t,I=>{I.currentLeafId=n}),l()},[l,n,t]),_.useEffect(()=>()=>{n&&Ze(t,I=>{I.currentLeafId=n})},[n,t]);const m=Ve(t,I=>I==null?void 0:I.tree),g=_.useMemo(()=>m?YPe(m,n).filter(L=>!(L.author.role==="root"||L.author.role==="system"||L.author.role==="assistant"&&L.recipient!=="all"||L.author.name&&pr(111655449,L.author.name))):[],[m,n]),p=((A=g==null?void 0:g.length)!=null?A:1)-1,h=V(),x=!tt(h),v=_.useCallback(()=>{d(!1),C(p)},[d,p]),y=_.useMemo(()=>{var H,G,Z;const I=g.findLastIndex(Q=>Q.author.role==Ke.User),N=g[I],L=I===-1?g:g.slice(I),O=L.findLast(Q=>{var q;return Q.channel==="final"&&((q=Q.metadata)==null?void 0:q.n7jupd_summary)})||L.findLast(Q=>{var q;return(q=Q.metadata)==null?void 0:q.n7jupd_summary}),D=(G=(H=N.metadata)==null?void 0:H.system_hints)!=null?G:[],$=(Z=O==null?void 0:O.metadata)==null?void 0:Z.n7jupd_summary;return $?{systemHints:D,summarizedPrompt:$}:null},[g]),[b,C]=_.useState(1);_.useEffect(()=>{const I=g==null?void 0:g[b].id;I&&Ze(t,N=>{N.currentLeafId=I})},[b,g,t]);const S=p===b;_.useEffect(()=>{S&&d(!1)},[S,d]);const E=s.toggleIsPlaying,k=_.useCallback(()=>{S&&!o&&C(1),E()},[S,o,E]);_.useEffect(()=>{if(!o||b>=p)return;const I=XPe(g[b],a),N=setTimeout(()=>{C(L=>L+1)},I);return()=>clearTimeout(N)},[o,a,b,g,p]),_.useEffect(()=>(d(!0),()=>d(!1)),[d]);const T=_.useCallback(()=>{d(!0),C(1)},[d]);return r.jsxs("div",{className:"shadow-long bg-token-main-surface-primary flex w-full items-center gap-2 rounded-[20px] p-4",children:[r.jsx(ye,{icon:S?qPe:o?WPe:GPe,onClick:S?T:k,className:z(kU,"border-none p-2"),color:"secondary"}),r.jsx("div",{className:"flex flex-1 flex-col items-center justify-center pe-6",children:r.jsx(VPe,{onChange:C,numEntries:p,currentIndex:b,onMouseDown:u,onMouseUp:f})}),r.jsxs("div",{className:"flex max-w-[200px] items-center justify-center",children:[S&&r.jsxs(r.Fragment,{children:[!1,!x&&!!y&&r.jsx(ye,{icon:zPe,onClick:()=>{const I=new URLSearchParams({prompt:y.summarizedPrompt});for(const N of y.systemHints)I.append(J3,N);Tr(e,{params:I})},className:Ak,children:r.jsx("span",{className:"truncate",children:r.jsx(j,{id:"if6xD7",defaultMessage:"Try this prompt"})})})]}),!S&&r.jsx(r.Fragment,{children:r.jsx(ye,{icon:HPe,onClick:v,className:Ak,color:"secondary",children:r.jsx(j,{id:"Cxho9p",defaultMessage:"Skip"})})})]})]})}const $nt=()=>r.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 -z-10 h-24",children:r.jsx(Ar,{children:r.jsx("div",{className:"relative -mx-8 h-24 [mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)] [mask-composite:intersect] backdrop-blur-2xl [-webkit-mask-composite:source-in] [-webkit-mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)]"})})}),eRe=R(()=>P(()=>import("./n8rdfg2xatgkqad1.js"),__vite__mapDeps([306,1])),{loading:t=>F(t)}),Vnt=t=>{"use forget";const e=W.c(22),{clientThreadId:n,bottom:s,pinnedWidgetType:o,onClick:a}=t;let i;e[0]!==n?(i=()=>he.getBranch(mt(n)),e[0]=n,e[1]=i):i=e[1];const[l]=_.useState(i);let c;e[2]!==l||e[3]!==o?(c=y=>{var b,C,S;return[(S=(C=(b=he.getBranch(y))==null?void 0:b.slice(l.length).findLast(E=>{const{message:k}=E,{metadata:T}=k;return(T==null?void 0:T.chatgpt_sdk)&&B1(T.chatgpt_sdk)===o}))==null?void 0:C.message.metadata)==null?void 0:S.tool_invoking_message]},e[2]=l,e[3]=o,e[4]=c):c=e[4];const[d]=Ve(n,c);let u;e[5]!==s?(u={bottom:s},e[5]=s,e[6]=u):u=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f={viewTransitionName:"var(--vt-composer)"},e[7]=f):f=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(ld,{sizeOverride:28,className:"text-token-border-default ms-2 flex-shrink-0 animate-spin",thickness:.08333333333333333,backgroundStrokeClassName:z("stroke-[rgba(0,0,0,0)]"),percentage:33.333333333333336}),e[8]=m):m=e[8];let g;e[9]!==d?(g=d!=null?d:r.jsx(j,{id:"z6ez+H",defaultMessage:"Thinking"}),e[9]=d,e[10]=g):g=e[10];let p;e[11]!==g?(p=r.jsx("span",{className:"loading-shimmer truncate px-4",children:g}),e[11]=g,e[12]=p):p=e[12];let h;e[13]!==n?(h=r.jsx(ye,{icon:eRe,size:"medium",className:"aspect-square p-0",onClick:y=>{y.stopPropagation(),Hh(n)}}),e[13]=n,e[14]=h):h=e[14];let x;e[15]!==a||e[16]!==p||e[17]!==h?(x=r.jsxs("div",{role:"button",onClick:a,className:"bg-token-bg-primary shadow-short pointer-events-auto mx-auto flex h-12 w-full max-w-md cursor-pointer items-center justify-between gap-2 rounded-full px-1.5 dark:bg-[#303030]",style:f,children:[m,p,h]}),e[15]=a,e[16]=p,e[17]=h,e[18]=x):x=e[18];let v;return e[19]!==u||e[20]!==x?(v=r.jsx(Ar,{className:"fixed start-0 end-0 bottom-0 z-[100] py-1",style:u,children:x}),e[19]=u,e[20]=x,e[21]=v):v=e[21],v},tRe="_main_vose0_1",Hnt={main:tRe};function nRe(t,e=Lf){const n=_.useRef(void 0);return s=>{const o=t(s);return e(n.current,o)?n.current:n.current=o}}function EU(t){if(t&&t.messages.length>0){const e=t.messages[0].create_time;if(e)return new Date(e*1e3)}return null}function Xp(t,e){return!t||!e?!1:t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function Gnt(t){const e=Ve(t,nRe(c=>he.getConversationTurns(c).map(u=>{const f=EU(u),m=tke(u,u.messages);return{turnDate:f,isRenderable:m}}))),n=Bh(t),s=(n==null?void 0:n.value)===Xt.UNREAD&&n.source===ts.SERVER,[o,a]=_.useState(null),{results:i,lastRenderableTurnIndex:l}=_.useMemo(()=>{const c=new Array(e.length).fill(void 0),d=new Date;let u=null;for(const p of e){const h=p.turnDate;h&&(!u||h<u)&&(u=h)}let f=null,m=!0,g=null;for(let p=0;p<e.length;p++){const h=e[p];if(h.isRenderable){g=p;const x=h.turnDate;m?(m=!1,u&&!Xp(u,d)&&(c[p]=0)):f&&!Xp(x,f)&&(c[p]=0),f=x}}return{results:c,lastRenderableTurnIndex:g}},[e]);return _.useEffect(()=>{s&&l!=null&&l!==o&&a(l)},[s,l,o]),_.useMemo(()=>{const c=[...i];return s&&l!=null?c[l]=1:!s&&o!=null&&(c[o]=1),d=>c[d]},[i,s,l,o])}function sRe(t,e){const n=EU(e);if(n){const s=new Date,o=new Date;o.setDate(s.getDate()-1);let a;if(Xp(n,s))a=t.formatMessage({id:"ConversationTurn.todayHeader",defaultMessage:"Today"});else if(Xp(n,o))a=t.formatMessage({id:"ConversationTurn.yesterdayHeader",defaultMessage:"Yesterday"});else{const i=s.getFullYear(),l=n.getFullYear();i===l?a=t.formatDate(n,{month:"short",day:"numeric"}):a=t.formatDate(n,{month:"short",day:"numeric",year:"numeric"})}return a}else return null}const Wnt=t=>{"use forget";const e=W.c(12),{turn:n,dateHeaderType:s}=t,o=V(),a=ne();if(s===void 0||!ve(o,"1847911009"))return null;let i;e[0]!==a||e[1]!==n?(i=sRe(a,n),e[0]=a,e[1]=n,e[2]=i):i=e[2];const l=i;if(!l)return null;if(s===1){let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("div",{className:"me-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[3]=u):u=e[3];let f;e[4]!==l?(f=r.jsx("span",{className:"text-sm leading-5 font-normal text-[#0088FF]",children:l}),e[4]=l,e[5]=f):f=e[5];let m;e[6]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx("div",{className:"ms-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[6]=m):m=e[6];let g;return e[7]!==f?(g=r.jsxs("div",{className:"mx-auto my-4 flex h-[20px] w-full items-center md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]",children:[u,f,m]}),e[7]=f,e[8]=g):g=e[8],g}let c;e[9]===Symbol.for("react.memo_cache_sentinel")?(c={height:"20px"},e[9]=c):c=e[9];let d;return e[10]!==l?(d=r.jsx("div",{className:"my-4 flex justify-center",style:c,children:r.jsx("span",{className:"text-token-text-secondary text-sm leading-5 font-normal",children:l})}),e[10]=l,e[11]=d):d=e[11],d},znt=({role:t,gizmo:e})=>{const n=ne();function s(){switch(t){case Ke.User:return n.formatMessage({id:"3DStaP",defaultMessage:"You said:"});case Ke.Assistant:return e?n.formatMessage({id:"ptfwNc",defaultMessage:"{author} said:"},{author:e.gizmo.display.name}):n.formatMessage({id:"LDIn6l",defaultMessage:"ChatGPT said:"});default:return""}}const o=t===Ke.Assistant?"h6":"h5";return r.jsx(o,{className:"sr-only",children:s()})},oRe=R(()=>P(()=>import("./impv9cw906sxjwad.js"),__vite__mapDeps([195,1])),{loading:t=>F(t)}),aRe=R(()=>P(()=>import("./ckp3hf1o6v7kgldv.js"),__vite__mapDeps([456,1])),{loading:t=>F(t)}),rRe="https://help.openai.com/en/articles/8400625-voice-mode-faq";function iRe({onSubmit:t}){const e=wl(),n=ub(),s=(n==null?void 0:n[Lt.TrainingAllowed])===!0||(n==null?void 0:n[Lt.VoiceTrainingAllowed])===!0;_.useEffect(()=>{B.logEventWithStatsig("Audio Paragen: Opt-In Shown","chatgpt_audio_paragen_opt_in_shown")},[]);const o=_.useCallback(async()=>{B.logEventWithStatsig("Audio Paragen: Opt-In Accepted","chatgpt_audio_paragen_opt_in_accepted"),await Promise.all([e.mutateAsync({setting:Lt.TrainingAllowed,value:!0}),e.mutateAsync({setting:Lt.VoiceTrainingAllowed,value:!0})]),t()},[e,t]);return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("section",{children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(j,w({},$a.header))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(j,w({},$a.subheader))})]}),r.jsxs("section",{className:"flex gap-3 align-top",children:[r.jsx(aRe,{className:"h-5 w-5 shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("p",{children:r.jsx(j,w({},$a.privacyHeader))}),r.jsx("p",{className:"text-token-text-secondary",children:r.jsx(j,w({},$a.privacyDescription))})]})]}),r.jsxs("section",{className:"flex gap-3 align-top",children:[r.jsx(oRe,{className:"h-5 w-5 shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("p",{children:r.jsx(j,w({},$a.controlHeader))}),r.jsx("p",{className:"text-token-text-secondary",children:r.jsx(j,U(w({},$a.controlDescription),{values:{learnMoreTextAndLink:r.jsx(to,{href:rRe,target:"_blank",className:"underline underline-offset-2",children:r.jsx(j,w({},$a.controlLearnMoreLink))})}}))})]})]}),r.jsxs("section",{className:"flex justify-center gap-2",children:[r.jsx(ye,{size:"medium",onClick:()=>{B.logEventWithStatsig("Audio Paragen: Opt-In Actively Declined","chatgpt_audio_paragen_opt_in_actively_declined"),t()},color:"primary-inverse",className:"flex-1",children:r.jsx(j,w({},$a.buttonNotNow))}),r.jsx(ye,{size:"medium",onClick:()=>o(),disabled:s,className:"flex-1",children:r.jsx(j,w({},$a.buttonEnableDataSharing))})]})]})}const $a=Se({header:{id:"AudioParagenOptIn.header",defaultMessage:"Thank you for making Voice Mode better!"},subheader:{id:"AudioParagenOptIn.subheader",defaultMessage:"Use voice chats to improve our models?"},privacyHeader:{id:"AudioParagenOptIn.privacyHeader",defaultMessage:"Taking steps to protect privacy"},privacyDescription:{id:"AudioParagenOptIn.privacyDescription",defaultMessage:"To improve our models, our team may review your audio. We take steps to reduce the amount of personal information used to train our models."},controlHeader:{id:"AudioParagenOptIn.controlHeader",defaultMessage:"Youre in control"},controlDescription:{id:"AudioParagenOptIn.controlDescription",defaultMessage:"You can stop sharing any time in settings. {learnMoreTextAndLink} about how to disable training on other content from voice mode."},controlLearnMoreLink:{id:"VoiceTrainingModal.controlLearnMoreLink",defaultMessage:"Learn more"},buttonNotNow:{id:"AudioParagenOptIn.buttonNotNow",defaultMessage:"Not now"},buttonEnableDataSharing:{id:"AudioParagenOptIn.buttonEnableDataSharing",defaultMessage:"Enable data sharing"}}),lRe=R(()=>P(()=>import("./kaiea8uhls5eyfc2.js"),__vite__mapDeps([341,1])),{loading:t=>F(t)}),cRe=R(()=>P(()=>import("./dni8akjyvev2h15q.js"),__vite__mapDeps([455,1])),{loading:t=>F(t)}),dRe=R(()=>P(()=>import("./f9n5ccag7w46cli4.js"),__vite__mapDeps([457,1])),{loading:t=>F(t)}),uRe=R(()=>P(()=>import("./owtikirrvn2wxy4l.js"),__vite__mapDeps([458,1])),{loading:t=>F(t)});function fRe({player:t,isPlaying:e,onPlay:n,onPause:s,onRewind:o,onForward:a}){const i=e&&!t,[l,c]=_.useState(0),[d,u]=_.useState(0);_.useEffect(()=>{t==null||t.on("ended",s);const p=h=>{c(h.seconds),u(h.totalSeconds)};return t==null||t.on("timeupdate",p),()=>{t==null||t.off("ended",s),t==null||t.off("timeupdate",p)}},[s,c,u,t]),_.useEffect(()=>{e||t==null||t.pause()},[e,t]);function f(){l>=d-.2&&(t==null||t.reset()),t==null||t.play(),n()}function m(){t==null||t.seek(-5),o==null||o()}function g(){t==null||t.seek(5),a==null||a()}return r.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[r.jsx("button",{className:"ms-auto disabled:opacity-50",onClick:m,disabled:l<=.05,children:r.jsx(uRe,{className:"size-6"})}),r.jsx("button",{className:z("rounded-full p-4 transition-all duration-200",e?"bg-token-bg-secondary":"bg-token-bg-tertiary"),onClick:e?()=>s(!0):f,children:i?r.jsx(ws,{className:"m-3 size-6 opacity-50"}):e?r.jsx(cRe,{className:"size-10"}):r.jsx(lRe,{className:"size-10"})}),r.jsx("button",{className:"me-auto disabled:opacity-50",onClick:g,disabled:l>=d-.05,children:r.jsx(dRe,{className:"size-6"})})]})}function mRe({paragen:t,onSelect:e}){const n=ud(i=>i.playingId===t.id),s=ud(i=>i.selectedId),{playParagen:o,pauseParagen:a}=q1();return r.jsxs("div",{className:z("flex flex-1 flex-col gap-4 rounded-2xl border p-4 [transition:opacity_500ms_ease-out,border-color_200ms_ease-in-out,background-color_200ms_ease-in-out]",{"bg-token-interactive-bg-tertiary-hover border-token-border-heavy":n,"bg-token-interactive-bg-tertiary-press border-token-border-focus border-1":s===t.id,"opacity-40":s&&s!==t.id}),children:[r.jsx(fRe,{player:t.player,isPlaying:n,onPlay:()=>o(t.id),onPause:i=>a(t.id,i),onRewind:()=>{B.logEventWithStatsig("Audio Paragen: Rewind","chatgpt_audio_paragen_rewind",{paragen_id:t.id})},onForward:()=>{B.logEventWithStatsig("Audio Paragen: Forward","chatgpt_audio_paragen_forward",{paragen_id:t.id})}}),r.jsx(ye,{size:"medium",onClick:()=>e(t.id),children:r.jsx(j,w({},qg.paragenOptionButton))})]})}function gRe({selectedId:t,onSelect:e,onMount:n}){const s=ud(o=>o.paragens);return ym(()=>{n(s.length)}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"gap flex flex-col",children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(j,w({},qg.feedbackDescription))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(j,w({},qg.feedbackHeader))})]}),r.jsx("div",{className:"flex flex-row gap-4 md:justify-center",children:s.map(o=>r.jsx(mRe,{paragen:o,onSelect:e},o.id))}),r.jsx(ye,{className:z("self-center transition-opacity duration-300",{"opacity-40":t!=null&&t!==Kp}),size:"medium",color:"ghost",onClick:()=>e(Kp),children:r.jsx(j,w({},qg.paragenOptionBothBad))})]})}const qg=Se({feedbackHeader:{id:"audioParagen.feedbackHeader",defaultMessage:"Help improve voice mode in your region"},feedbackDescription:{id:"audioParagen.feedbackDescription",defaultMessage:"Which audio response do you prefer?"},paragenOptionButton:{id:"audioParagen.paragenOptionButton",defaultMessage:"I prefer this audio"},paragenOptionBothBad:{id:"audioParagen.paragenOptionBothBad",defaultMessage:"Both are bad"}}),TU=1500,qnt={aboutUserMessage:void 0,aboutModelMessage:void 0,nameUserMessage:void 0,roleUserMessage:void 0,traitsModelMessage:void 0,otherUserMessage:void 0,disabledTools:void 0,enabled:void 0,personalityTypeMessage:void 0},Ynt=["engineeringStudent","gastroenterologist","sourdoughBaker","interiorDesigner","daycareManager","familyLawAttorney","excelWizard","level10Mage","pharmaSales","freelanceCopywriter","weddingPhotographer","catHerder","cdlDriver","thirdGradeTeacher"],Znt={initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-8,transition:{duration:.2}}};function Knt(t){var e,n,s,o,a,i;return{personalityTypeMessage:(e=t==null?void 0:t.personalityTypeMessage)!=null?e:"",nameUserMessage:(n=t==null?void 0:t.nameUserMessage)!=null?n:"",roleUserMessage:(s=t==null?void 0:t.roleUserMessage)!=null?s:"",traitsModelMessage:(o=t==null?void 0:t.traitsModelMessage)!=null?o:"",otherUserMessage:(a=t==null?void 0:t.otherUserMessage)!=null?a:"",disabledTools:(i=t==null?void 0:t.disabledTools)!=null?i:[],enabled:t==null?void 0:t.enabled}}function Qnt({userContextData:t,updates:e,localUserContext:n,setLocalUserContext:s}){var h;const{aboutUserMessage:o="",aboutModelMessage:a="",personalityTypeMessage:i="",nameUserMessage:l="",roleUserMessage:c="",traitsModelMessage:d="",otherUserMessage:u="",disabledTools:f=[],enabled:m}=t!=null?t:{},g=(h=n.enabled)!=null?h:!!m,p=(x,v,y)=>x!==void 0?x:v!=null?v:y;s(x=>U(w(w({},x),e),{aboutUserMessage:p(e.aboutUserMessage,x.aboutUserMessage,o),personalityTypeMessage:p(e.personalityTypeMessage,x.personalityTypeMessage,i),aboutModelMessage:p(e.aboutModelMessage,x.aboutModelMessage,a),nameUserMessage:p(e.nameUserMessage,x.nameUserMessage,l),roleUserMessage:p(e.roleUserMessage,x.roleUserMessage,c),traitsModelMessage:p(e.traitsModelMessage,x.traitsModelMessage,d),otherUserMessage:p(e.otherUserMessage,x.otherUserMessage,u),enabled:p(e.enabled,x.enabled,g),disabledTools:p(e.disabledTools,x.disabledTools,f)}))}const pRe=(t,e=TU)=>t.length>e,fu=Se({traitsReset:{id:"userContextModal.traitsReset",defaultMessage:"Refresh traits"},tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},profileSubtitle:{id:"userContextModal.profileSubtitle",defaultMessage:"Introduce yourself to get better, more personalized responses"},profileSubtitleTooltip:{id:"userContextModal.profileSubtitleTooltip",defaultMessage:"ChatGPT will use the information you provide to tailor its responses to you. <link>Learn more</link> about how we use your data.",link:"https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt"},customizeName:{id:"userContextModal.customizeName",defaultMessage:"What should ChatGPT call you?"},customizeNamePlaceholder:{id:"userContextModal.customizeNamePlaceholder",defaultMessage:"Nickname"},occupationInputTitle:{id:"userContextModal.occupationInputTitle",defaultMessage:"Occupation"},moreDetailsInputTitle:{id:"userContextModal.moreDetailsInputTitle",defaultMessage:"More about you"},customizeRole:{id:"userContextModal.customizeRole",defaultMessage:"What do you do?"},customizeRolePlaceholder:{id:"userContextModal.customizeRolePlaceholder",defaultMessage:"Engineer, student, etc."},customizePersonality:{id:"userContextModal.customizePersonality",defaultMessage:"What personality should ChatGPT have?"},customizeTraits:{id:"userContextModal.customizeTraits",defaultMessage:"What traits should ChatGPT have?"},customizeTraitsPlaceholder:{id:"userContextModal.customizeTraitsPlaceholder",defaultMessage:"Describe or select traits"},customInstructionsPlaceholder:{id:"userContextModal.customInstructionsPlaceholder",defaultMessage:"Additional behavior, style, and tone preferences"},customizeOther:{id:"userContextModal.customizeOther",defaultMessage:"Anything else ChatGPT should know about you?"},customizeOtherPlaceholder:{id:"userContextModal.customizeOtherPlaceholder",defaultMessage:"Interests, values, or preferences to keep in mind"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom Instructions and how they're used to help ChatGPT provide better responses."},traitsTooltipTitle:{id:"userContextModal.traitsTooltipTitle",defaultMessage:"You can tune ChatGPT's behavior by..."},traitsTooltipBodyItem1:{id:"userContextModal.traitsTooltipBodyItem1",defaultMessage:"Use a formal, professional tone."},traitsTooltipBodyItem2:{id:"userContextModal.traitsTooltipBodyItem2",defaultMessage:"Be casual and chatty."},traitsTooltipBodyItem3:{id:"userContextModal.traitsTooltipBodyItem3",defaultMessage:"Be opinionated. If a question could have multiple answers, try to give only the best one."},otherTooltipTitle:{id:"userContextModal.otherTooltipTitle",defaultMessage:"You can share things like..."},otherTooltipBodyItem1:{id:"userContextModal.otherTooltipBodyItem1",defaultMessage:"I love hiking and jazz."},otherTooltipBodyItem2:{id:"userContextModal.otherTooltipBodyItem2",defaultMessage:"I'm vegetarian."},otherTooltipBodyItem3:{id:"userContextModal.otherTooltipBodyItem3",defaultMessage:"I'm trying to learn French."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink>  your input will aid our research in this area."},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALLE"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"},advanced:{id:"userContextModal.advanced",defaultMessage:"Advanced"},advancedOpen:{id:"userContextModal.advancedOpen",defaultMessage:"Open advanced settings"},advancedClose:{id:"userContextModal.advancedClose",defaultMessage:"Close advanced settings"},customizeTitle:{id:"personalizationSettings.customizeTitle",defaultMessage:"Personalization"},aboutYouSectionTitle:{id:"personalizationSettings.aboutYouSectionTitle",defaultMessage:"About you"},memoryTitle:{id:"personalizationSettings.memoryTitle",defaultMessage:"Memory"},toggleLabel:{id:"settingsModal.myChagtGptToggleLabel.2",defaultMessage:"Reference saved memories"},exampleDescription:{id:"settingsModal.exampleDescription",defaultMessage:"Let ChatGPT save and use memories when responding."},manageMemoriesLink:{id:"settingsModal.manageMemoriesLink",defaultMessage:"Manage memories"},manageButton:{id:"settingsModal.manageMemoriesLink.button",defaultMessage:"Manage"},upgradeButton:{id:"settingsModal.upgradeButtonLink.button",defaultMessage:"Upgrade"},exampleDescription1:{id:"settingsModal.exampleDescription1.1",defaultMessage:"ChatGPT will become more helpful as you chat, picking up on details and preferences to tailor its responses to you. <link>Learn more</link>"},exampleDescription2:{id:"settingsModal.exampleDescription2.2",defaultMessage:"To understand what ChatGPT remembers or teach it something new, just chat with it:"},exampleMessage1:{id:"settingsModal.exampleMessage1.1",defaultMessage:"Remember that I like concise responses."},exampleMessage2:{id:"settingsModal.exampleMessage2.1",defaultMessage:"I just got a puppy!"},exampleMessage3:{id:"settingsModal.exampleMessage3.2",defaultMessage:"What do you remember about me?"},exampleMessage4:{id:"settingsModal.exampleMessage4",defaultMessage:"Where did we leave off on my last project?"},reset:{id:"settingsModal.reset",defaultMessage:"Reset memories"},resetModalTitle:{id:"settingsModal.resetModalTitle",defaultMessage:"Are you sure?"},resetModalDescription:{id:"settingsModal.resetModalDescription",defaultMessage:"Your GPT will forget what it has learned from your previous chats. This can't be undone."},resetModalConfirm:{id:"settingsModal.resetModalConfirm",defaultMessage:"Confirm reset"},resetModalCancel:{id:"settingsModal.resetModalCancel",defaultMessage:"Cancel"},resetSuccessful:{id:"settingsModal.resetSuccessful",defaultMessage:"Your GPT's memory has been reset."},resetFailed:{id:"settingsModal.resetFailed",defaultMessage:"Failed to reset your GPT's memory."},on:{id:"personalizationSettings.on",defaultMessage:"On"},off:{id:"personalizationSettings.off",defaultMessage:"Off"},customInstructions:{id:"personalizationSettings.customInstructions",defaultMessage:"Custom instructions"},enablePersonalizationRowLabel:{id:"personalizationSettings.enablePersonalizationRowLabel",defaultMessage:"Enable customization"},enablePersonalizationRowDescription:{id:"personalizationSettings.enablePersonalizationRowDescription",defaultMessage:"Customize how ChatGPT responds to you. {learnMoreLink}",values:{learnMoreLink:r.jsx(to,{href:"https://help.openai.com/en/articles/8096356-chatgpt-custom-instructions-faq",className:"underline",children:r.jsx(j,{id:"dyoG1M",defaultMessage:"Learn more"})})}},manageMemoriesButton:{id:"personalizationSettings.manageMemoriesButton",defaultMessage:"Manage memories"},RecordModeTitle:{id:"personalizationSettings.recordModeTitle",defaultMessage:"Record mode"},recordModeToggleLabel:{id:"personalizationSettings.recordModeToggleLabel",defaultMessage:"Reference record history"},recordModeDescription:{id:"personalizationSettings.recordModeDescription",defaultMessage:"Let ChatGPT reference all previous recording transcripts and notes when responding."},connectorSearchToggleLabel:{id:"personalizationSettings.connectorSearchToggleLabel",defaultMessage:"Connector search"},connectorSearchDescription:{id:"personalizationSettings.connectorSearchDescription",defaultMessage:"Let ChatGPT automatically search connected sources for answers."},pulseSettingTitle:{id:"personalizationSettings.pulseSettingTitle",defaultMessage:"Pulse"},pulseReferenceMemoriesToggleLabel:{id:"personalizationSettings.pulseReferenceMemoriesToggleLabel",defaultMessage:"Reference Memory in suggestions"},pulseReferenceMemoriesDescription:{id:"personalizationSettings.pulseReferenceMemoriesDescription",defaultMessage:'Let ChatGPT use memories proactively in suggestions. Turning this off will disable "Pulse". {learnMoreLink}',values:{learnMoreLink:r.jsx(to,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",className:"underline",children:r.jsx(j,{id:"lFx4tz",defaultMessage:"Learn more"})})}},pulseEntrypointToggleLabel:{id:"personalizationSettings.pulseEntrypointToggleLabel",defaultMessage:'Show "Pulse" in new chats'},settingsPersonalitySelectionRowTitle:{id:"personalizationSettings.settingsPersonalitySelectionRowTitle",defaultMessage:"Base style and tone"},settingsPersonalitySelectionRowDescription:{id:"personalizationSettings.settingsPersonalitySelectionRowDescription",defaultMessage:"Set the style and tone ChatGPT uses when responding."}}),Jnt=Se({engineeringStudent:{id:"userContextModal.rolePlaceholder.engineeringStudent",defaultMessage:"Engineering student at University of Waterloo"},gastroenterologist:{id:"userContextModal.rolePlaceholder.gastroenterologist",defaultMessage:"Gastroenterologist"},sourdoughBaker:{id:"userContextModal.rolePlaceholder.sourdoughBaker",defaultMessage:"Small-batch home sourdough baker"},interiorDesigner:{id:"userContextModal.rolePlaceholder.interiorDesigner",defaultMessage:"Interior designer"},daycareManager:{id:"userContextModal.rolePlaceholder.daycareManager",defaultMessage:"Home daycare manager"},familyLawAttorney:{id:"userContextModal.rolePlaceholder.familyLawAttorney",defaultMessage:"Family law attorney"},excelWizard:{id:"userContextModal.rolePlaceholder.excelWizard",defaultMessage:"Excel wizard"},level10Mage:{id:"userContextModal.rolePlaceholder.level10Mage",defaultMessage:"Level 10 mage"},pharmaSales:{id:"userContextModal.rolePlaceholder.pharmaSales",defaultMessage:"Pharma sales"},freelanceCopywriter:{id:"userContextModal.rolePlaceholder.freelanceCopywriter",defaultMessage:"Freelance copywriter"},weddingPhotographer:{id:"userContextModal.rolePlaceholder.weddingPhotographer",defaultMessage:"Wedding photographer"},catHerder:{id:"userContextModal.rolePlaceholder.catHerder",defaultMessage:"Professional cat herder"},cdlDriver:{id:"userContextModal.rolePlaceholder.cdlDriver",defaultMessage:"CDL driver"},thirdGradeTeacher:{id:"userContextModal.rolePlaceholder.thirdGradeTeacher",defaultMessage:"Third-grade teacher"}}),hRe=R(()=>P(()=>import("./cmff6ny7qwtuxu45.js"),__vite__mapDeps([201,1])),{loading:t=>F(t)}),_Re=R(()=>P(()=>import("./fzp2j1cxnl22o1rn.js"),__vite__mapDeps([459,1])),{loading:t=>F(t)}),xRe=({disabled:t=!1,onChange:e,onSubmit:n,placeholder:s,value:o,name:a,tip:i,hasModError:l,className:c,size:d="md",showCharacterCount:u=!0,autoHighlight:f=!1,isNewCustomInstructionsUIEnabled:m=!1,maxLength:g=TU,dynamicHeight:p=!1,rows:h,textareaClassName:x})=>{var D;const v=ne(),y=_.useRef(null);_.useEffect(()=>{f&&y.current&&requestAnimationFrame(()=>{var $;($=y.current)==null||$.select(),Ln.setAutoHighlightNicknameInput(!1)})},[f]),_.useEffect(()=>{if(!p||!y.current)return;const $=y.current,H=()=>{$.style.height="auto",$.style.height=Math.min($.scrollHeight+2,120)+"px"};return H(),$.addEventListener("input",H),()=>{$.removeEventListener("input",H)}},[p,o]);const b=re(eM),C=re(lq),S=!b,[E,k]=_.useState(!1),[T,M]=_.useState(S),A=!S&&E&&!T,I=S&&!T,N=pRe(o,g),L=$=>{$.nativeEvent.isComposing||!t&&$.key==="Enter"&&$.metaKey&&!$.shiftKey&&!$.nativeEvent.isComposing&&($.preventDefault(),n())},O=_.useRef(null);return r.jsxs(r.Fragment,{children:[i&&r.jsx(Mt,{testId:"modal-user-context-tip",isOpen:I,type:"success",size:"custom",className:"max-w-lg",title:v.formatMessage(fu.tipsHeader),showCloseButton:!0,onClose:()=>{M(!0)},children:i}),r.jsxs(Dl,{open:A,children:[r.jsxs("div",{className:c,ref:O,children:[r.jsx(yr,{asChild:!0,children:r.jsx("textarea",{ref:y,className:z("bg-token-main-surface-primary w-full resize-none focus:ring-transparent",x,{"rounded-sm p-4":d!=="sm"&&!m,"rounded-lg border text-sm":d==="sm"||m,"border-orange-400 focus:border-orange-400":l,"border-red-500 focus:border-red-500":N&&!l,"focus-token-border-heavy border-token-border-default":!N&&!l,"opacity-30":t,"placeholder:text-gray-400":d==="sm"||m,"placeholder:text-gray-300":!m,"overflow-y-auto":p}),name:a,disabled:t,placeholder:s,onKeyDown:L,rows:h!=null?h:d==="sm"?1:b&&!C?6:5,value:o,onChange:e,onBlur:()=>{k(!1)},onFocus:()=>{k(!0)},style:{maxHeight:p?"120px":void 0,verticalAlign:"top"}})}),r.jsx("div",{className:z("flex items-center justify-between px-1 text-xs tabular-nums",N?"text-red-600":"text-token-text-tertiary"),children:l?r.jsx("div",{className:"visible mt-2 text-start text-xs text-orange-400",children:r.jsx(j,U(w({},fu.modApiVoilation),{values:{policyLink:$=>r.jsx("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:$}),feedbackLink:$=>r.jsx("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:$})}}))}):r.jsxs(r.Fragment,{children:[u&&r.jsx("div",{children:"".concat(o.length,"/").concat(g)}),i&&r.jsx("button",{className:"flex items-center gap-1",onClick:()=>{var $;($=y.current)==null||$.focus(),M(!T)},tabIndex:-1,children:r.jsx(fn,{initial:!1,children:E&&r.jsx(Xe.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:T?r.jsxs(r.Fragment,{children:[r.jsx(j,w({},fu.showTips)),r.jsx(hRe,{className:"icon-xs"})]}):r.jsxs(r.Fragment,{children:[r.jsx(j,w({},fu.hideTips)),r.jsx(_Re,{className:"icon-xs"})]})},"show-hide")})})]})})]}),i&&r.jsx(Fl,{container:(D=O.current)==null?void 0:D.ownerDocument.body,children:r.jsx(Bl,{side:"right",align:"start",sideOffset:12,className:"popover animate-slideLeftAndFade border-token-border-default bg-token-main-surface-primary text-token-text-primary relative z-50 max-w-[220px] rounded-xl border p-4 text-sm shadow-[0px_4px_14px_rgba(0,0,0,0.06)] select-none xl:max-w-xs",onOpenAutoFocus:$=>{$.preventDefault()},onCloseAutoFocus:$=>{$.preventDefault()},children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("strong",{children:r.jsx(j,w({},fu.tipsHeader))}),i]})})})]})]})};function yRe({children:t,className:e,footer:n,title:s}){return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:z("flex flex-col gap-2",e),children:[r.jsx("div",{className:"text-body-small-emphasized [font-weight:500]",children:s}),t]}),n]})}const vRe=R(()=>P(()=>Promise.resolve().then(()=>vm),void 0),{loading:t=>F(t)}),bRe=R(()=>P(()=>import("./kaw18xu9jo85v1g9.js"),__vite__mapDeps([26,1])),{loading:t=>F(t)}),mo=Se({formResponseSound:{id:"audioParagen.formResponseSound",defaultMessage:"Clearer sound"},formResponseAccent:{id:"audioParagen.formResponseAccent",defaultMessage:"Better accent"},formResponseMoreExpressive:{id:"audioParagen.formResponseMoreExpressive",defaultMessage:"More expressive"},formResponseNotExpressive:{id:"audioParagen.formResponseNotExpressive",defaultMessage:"Not expressive"},formResponseDistortedAudio:{id:"audioParagen.formResponseDistortedAudio",defaultMessage:"Distorted audio"},formResponsePoorAccent:{id:"audioParagen.formResponsePoorAccent",defaultMessage:"Poor accent"},formThankYou:{id:"audioParagen.formThankYou",defaultMessage:"Thank you for making Voice Mode better!"},formWhyChoose:{id:"audioParagen.formWhyChoose",defaultMessage:"Why did you choose your response?"},formOptionalFeedback:{id:"audioParagen.formOptionalFeedback",defaultMessage:"Other feedback (Optional)"},formOptionalFeedbackPlaceholder:{id:"audioParagen.formOptionalFeedbackPlaceholder",defaultMessage:"Anything you'd like to share?"},formBack:{id:"audioParagen.formBack",defaultMessage:"Back"},formSubmit:{id:"audioParagen.formSubmit",defaultMessage:"Submit"}}),Ik={clearer_sound:mo.formResponseSound,better_accent:mo.formResponseAccent,more_expressive:mo.formResponseMoreExpressive,not_expressive:mo.formResponseNotExpressive,distorted_audio:mo.formResponseDistortedAudio,poor_accent:mo.formResponsePoorAccent};function CRe({option:t,reviews:e,onSelect:n}){const s=t in Ik?Ik[t]:null;if(!s)return null;const o=e.includes(t);return r.jsx(ye,{icon:o?bRe:vRe,color:o?"primary":"secondary",className:"py-2 ps-2 pe-3 text-xs font-normal",onClick:()=>n(t),children:r.jsx(j,w({},s))})}function SRe({reviewOptions:t,feedback:e,selectedReviewOptions:n,onReviewOptionsChanged:s,onOptionalFeedbackChanged:o,onBack:a,onSubmit:i}){const l=_.useRef(null),c=ne();_.useEffect(()=>{l.current&&l.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[]);function d(f){n.includes(f)?s(n.filter(m=>m!==f)):s([...n,f])}function u(f){o(f.target.value)}return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"gap flex flex-col",children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(j,w({},mo.formThankYou))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(j,w({},mo.formWhyChoose))})]}),r.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:t.map(f=>r.jsx(CRe,{option:f,reviews:n,onSelect:d},f))}),r.jsx(yRe,{title:r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(j,w({},mo.formOptionalFeedback))}),children:r.jsx(xRe,{disabled:!1,onChange:u,onSubmit:as,value:e,name:"audio_paragen_optional_feedback",placeholder:c.formatMessage(mo.formOptionalFeedbackPlaceholder),showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0,size:"md"})}),r.jsxs("div",{className:"flex flex-row gap-2 self-end",children:[r.jsx(ye,{color:"ghost",onClick:a,children:r.jsx(j,w({},mo.formBack))}),r.jsx(ye,{onClick:i,children:r.jsx(j,w({},mo.formSubmit))})]})]})}const wRe=["clearer_sound","better_accent","more_expressive"],kRe=["not_expressive","distorted_audio","poor_accent"];function Xnt({lastUserMessageId:t,setIsDismissed:e}){const n=V(),[s,o]=_.useState("options"),[a,i]=_.useState([]),[l,c]=_.useState(""),d=_.useRef(null),u=_.useRef(!1),f=ud(E=>E.selectedId),{data:m}=eo(Lt.TrainingAllowed),{data:g}=eo(Lt.VoiceTrainingAllowed),{selectParagen:p,submitParagenResults:h,setShouldShowThankYouTooltip:x}=q1();_.useEffect(()=>{B.logUpsellOrModalEvent(dn,{eventId:"audio_paragen_prompt_shown",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]);function v(){p(null),i([]),o("options")}function y(E){d.current&&window.clearTimeout(d.current),p(E),d.current=window.setTimeout(()=>{o("review")},1e3)}function b(){e(!0),bEe(t),x(!0)}function C(){if(h(t,a,l),!m||!g){o("opt-in");return}b()}const S=_.useCallback(E=>{u.current||(u.current=!0,B.logEventWithStatsig("Audio Paragen: View","chatgpt_audio_paragen_view",{count:E}))},[]);return r.jsx(Xe.div,{className:"relative max-w-[548px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.5,delay:.75}},exit:{opacity:0},children:r.jsxs(lv,{children:[r.jsx(Xe.div,{layout:"size",className:"shadow-xxs overflow-hidden rounded-2xl border p-6 text-sm focus:outline-hidden",children:r.jsx(fn,{mode:"wait",initial:!1,children:r.jsx(Xe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},exit:{opacity:0},children:s==="options"?r.jsx(gRe,{selectedId:f,onSelect:y,onMount:S}):s==="review"?r.jsx(SRe,{reviewOptions:f!==Kp?wRe:kRe,feedback:l,selectedReviewOptions:a,onReviewOptionsChanged:i,onOptionalFeedbackChanged:c,onBack:v,onSubmit:C}):s==="opt-in"?r.jsx(iRe,{onSubmit:b}):null},s)})}),r.jsx(xn,{className:"absolute end-6 top-6",onClick:()=>{B.logEventWithStatsig("Audio Paragen: Dismissed Modal","chatgpt_audio_paragen_dismissed_modal"),ot(n,Oe.hasSeenAudioParagenPrompt),e(!0)}})]})})}function ERe(t,e){var a;if(!t)return!1;if(e)return!0;const s=["gpt-4o-gdrive","gpt-4o-gdrive-1007-mclick","gpt-4o-gdrive-1124","gpt-4o-gdrive-1124-citation","gpt-4o-gdrive-0212","gpt-4o-gdrive-0314","o1_ca_0226","o3_mini_ca_0226"].includes(t.id),o=!!((a=t.product_features.contextual_answers)!=null&&a.is_eligible_for_contextual_answers);return s||o}function p4(t){const e=V(),n=oM(),s=ih(t!=null?t:null,e);return n&&ERe(t,s)}function TRe(t,e){const n=p4(t!=null?t:null),s=V(),o=cq(s);return!n||!o?!1:o===dq.DOGFOODING?!!e:!0}const MRe=R(()=>P(()=>import("./d0fvtivu8wtjjx2a.js"),__vite__mapDeps([30,1])),{loading:t=>F(t)});function ARe(t,e,n,s){if(e)return t?n&&n!==s?"/g/".concat(t,"/shared/c/").concat(e,"?project_id=").concat(t,"&owner_user_id=").concat(n):"/g/".concat(t,"/c/").concat(e):"/c/".concat(e)}function est({clientThreadId:t,turn:e,isFinalTurn:n}){return Ve(t,o=>!n&&e.messages.some(a=>(o==null?void 0:o.continuingSharedConversationLastMessageId)===a.id))?r.jsx("div",{className:"mx-auto mt-8 -mb-2 flex justify-center pb-2",children:r.jsxs("p",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(MRe,{className:"icon-xs me-2"}),r.jsx(j,{id:"threadLayout.sharedConversationPrivateDisclaimer",defaultMessage:"Messages beyond this point are only visible to you"})]})}):null}function tst({clientThreadId:t,turn:e}){var u,f,m,g,p,h,x,v;const n=jt(t),s=V(),o=st(s),a=(f=(u=e.messages.find(y=>{var b;return(b=y.metadata)==null?void 0:b.branching_from_conversation_title}))==null?void 0:u.metadata)==null?void 0:f.branching_from_conversation_title,i=(g=(m=e.messages.find(y=>{var b;return(b=y.metadata)==null?void 0:b.branching_from_conversation_id}))==null?void 0:m.metadata)==null?void 0:g.branching_from_conversation_id,l=(h=(p=e.messages.find(y=>{var b;return(b=y.metadata)==null?void 0:b.branching_from_conversation_owner}))==null?void 0:p.metadata)==null?void 0:h.branching_from_conversation_owner,c=(v=(x=e.messages.find(y=>{var b;return(b=y.metadata)==null?void 0:b.gizmo_id}))==null?void 0:x.metadata)==null?void 0:v.gizmo_id,d=ARe(c,i,l,o==null?void 0:o.normalizedAccountUserId);return a?r.jsx(Ar,{children:r.jsxs("div",{className:"mx-auto mt-8 flex w-full items-center justify-center",children:[r.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),r.jsx("p",{className:"mx-3 shrink text-xs whitespace-nowrap text-gray-500",children:r.jsx(j,{id:"threadLayout.branchConversationDisclaimer",defaultMessage:"Branched from {conversationTitle}",values:{conversationTitle:(n||l)&&d?r.jsx(yh,{className:"font-semibold",href:d,children:a}):r.jsx("span",{className:"font-semibold",children:a})}})}),r.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]})}):null}const IRe="bg-token-main-surface-primary text-token-text-primary",jRe="openai",jk=["bg-blue-300 text-white"];function NRe(t){var e;return jk[((e=t==null?void 0:t.charCodeAt(0))!=null?e:0)%jk.length]}const yg=({children:t})=>r.jsx("div",{className:"pt-0",children:r.jsx("div",{className:z(_.isValidElement(t)&&t.type===op?"gizmo-bot-avatar":"gizmo-shadow-stroke","flex h-8 w-8 items-center justify-center overflow-hidden rounded-full"),children:t})});function nst(t){var m;const{messages:e,isUserTurn:n,avatarClassName:s,gizmo:o}=t,a=e[0],i=(m=a==null?void 0:a.metadata)==null?void 0:m.shared_conversation_id,l=i!=null,c=ln(),{gizmoEditorData:d,mode:u}=Z3();let f=r.jsx(yg,{children:r.jsx(op,{className:s!=null?s:IRe,iconName:jRe})});return o?f=r.jsx(yg,{children:r.jsx(q7e,{gizmoId:o.gizmo.id,className:"h-full w-full"})}):d!=null&&u==="test"&&(f=r.jsx(V1,{isFirstParty:!1,src:d.profilePictureUrl,className:"h-8 w-8 first:pt-[3px]"})),r.jsx("div",{children:n?l?r.jsx(yg,{children:r.jsx(op,{className:NRe(i),iconName:"user"})}):r.jsx(yg,{children:r.jsx(T3,{user:c})}):f})}const PRe=Ft(()=>({displayingSideBySideFeedback:!1})),RRe=R(()=>P(()=>Promise.resolve().then(()=>VO),void 0),{loading:t=>F(t)}),LRe=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)}),ORe=R(()=>P(()=>import("./9k6qmhn6o7ot8x06.js"),__vite__mapDeps([451,1])),{loading:t=>F(t)}),Nk=R(()=>P(()=>import("./c02liuldac2129ws.js"),__vite__mapDeps([460,1])),{loading:t=>F(t)}),DRe=R(()=>P(()=>import("./oo4a5cyom9orocbu.js"),__vite__mapDeps([249,1])),{loading:t=>F(t)}),FRe=R(()=>P(()=>import("./6kppbcfhmenkpk5e.js"),__vite__mapDeps([250,1])),{loading:t=>F(t)}),BRe=R(()=>P(()=>import("./gsyjy3cn2edhhxqr.js"),__vite__mapDeps([251,1])),{loading:t=>F(t)}),URe=R(()=>P(()=>import("./eangdf46283zeknc.js"),__vite__mapDeps([461,1])),{loading:t=>F(t)}),Pk=R(()=>P(()=>import("./ojgc3f33xqlpzccg.js"),__vite__mapDeps([34,1])),{loading:t=>F(t)}),Rk=R(()=>P(()=>import("./ff9q8rnvshheb2le.js"),__vite__mapDeps([462,1])),{loading:t=>F(t)}),$Re=R(()=>P(()=>import("./kfuq18fnfa4tpk36.js"),__vite__mapDeps([463,1])),{loading:t=>F(t)}),Lk=R(()=>P(()=>import("./gl3rapxbeig8umvj.js"),__vite__mapDeps([253,1])),{loading:t=>F(t)}),Ok=R(()=>P(()=>import("./e78y0x0bsn1pjk21.js"),__vite__mapDeps([255,1])),{loading:t=>F(t)}),VRe=R(()=>P(()=>import("./iz7y4yt60huv2j20.js"),__vite__mapDeps([334,1])),{loading:t=>F(t)}),HRe=R(()=>P(()=>import("./d3lmw35s8no1rcpb.js"),__vite__mapDeps([464,1])),{loading:t=>F(t)}),GRe=R(()=>P(()=>import("./k16xm6jk3odnmnqs.js"),__vite__mapDeps([465,1])),{loading:t=>F(t)}),WRe=R(()=>P(()=>import("./mj2brfr01cewzl9a.js"),__vite__mapDeps([256,1])),{loading:t=>F(t)}),Dk=R(()=>P(()=>import("./jlsb77lt6kqhcsln.js"),__vite__mapDeps([257,1])),{loading:t=>F(t)}),zRe=R(()=>P(()=>import("./htgqwnjx12i16hc6.js"),__vite__mapDeps([258,1])),{loading:t=>F(t)}),qRe=R(()=>P(()=>import("./n9uspcjz6oc12tia.js"),__vite__mapDeps([466,1])),{loading:t=>F(t)}),Fk=R(()=>P(()=>import("./fsahglpl2wxoakvg.js"),__vite__mapDeps([35,1])),{loading:t=>F(t)}),YRe=R(()=>P(()=>import("./on6zjr1bjw5z2d08.js"),__vite__mapDeps([37,1])),{loading:t=>F(t)}),ZRe=R(()=>P(()=>import("./odeqnwkly96z750u.js"),__vite__mapDeps([260,1])),{loading:t=>F(t)}),KRe=R(()=>P(()=>import("./l5e2clfxpgm30p9v.js"),__vite__mapDeps([261,1])),{loading:t=>F(t)}),QRe=R(()=>P(()=>import("./m2xwf1u8hpj7ku67.js"),__vite__mapDeps([467,1])),{loading:t=>F(t)}),JRe=R(()=>P(()=>import("./fnhiupokkmaz6zzq.js"),__vite__mapDeps([468,1])),{loading:t=>F(t)}),XRe=R(()=>P(()=>import("./l3abi823pjnrhiuj.js"),__vite__mapDeps([469,1])),{loading:t=>F(t)}),Bk=R(()=>P(()=>import("./z73jc6cuiis8j7zw.js"),__vite__mapDeps([262,1])),{loading:t=>F(t)}),eLe=R(()=>P(()=>import("./f5goq4s9xgjjvv2f.js"),__vite__mapDeps([335,1])),{loading:t=>F(t)}),tLe=R(()=>P(()=>import("./b6wurwufazegul5k.js"),__vite__mapDeps([263,1])),{loading:t=>F(t)}),Uk=R(()=>P(()=>import("./km0dhf1mvcjs8kkd.js"),__vite__mapDeps([265,1])),{loading:t=>F(t)}),nLe=R(()=>P(()=>import("./oeu7ns9by1ylfahx.js"),__vite__mapDeps([266,1])),{loading:t=>F(t)}),sLe=R(()=>P(()=>import("./qr8ktpa6xn24sy7q.js"),__vite__mapDeps([267,1])),{loading:t=>F(t)}),oLe=R(()=>P(()=>import("./fenai6dwr8b5i5c6.js"),__vite__mapDeps([268,1])),{loading:t=>F(t)}),aLe=R(()=>P(()=>import("./ip633et1a2kaq027.js"),__vite__mapDeps([269,1])),{loading:t=>F(t)});function rLe({messages:t,isRequestActive:e,isLastMessageInTurn:n,isRetrieval:s,isUsingGizmo:o,isUsingProject:a}){var x,v;const i=IU({messages:t}),l=iLe(t),c=l.filter(y=>hLe(y,!1)&&!_Le(y)),d=(x=c[c.length-1])!=null?x:void 0,u=ne();if(xLe(t).some(({content:y})=>y.content_type===ut.SystemError))return null;let f=Ys.Running;const m=c.filter(y=>y.type===zt.Search).length,g={count:c.length-m,domain:d?rM((v=Y1(d))!=null?v:""):void 0,query:d?MU(d):void 0};let p=s?o?a?u.formatMessage(Kt.searchingProjectFiles):u.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):u.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):u.formatMessage({id:"message.tools.browse.running",defaultMessage:"Searching the web"});return t.some(NX)?(f=Ys.Stopped,p=s?o?u.formatMessage({id:"browsingMessage.searchingKnowledgeStopped",defaultMessage:"Stopped searching knowledge"}):u.formatMessage({id:"browsingMessage.retrievalStopped",defaultMessage:"Stopped reading documents"}):u.formatMessage({id:"message.tools.browse.stopped",defaultMessage:"Search stopped"})):!n||!e?l.length>0&&l.every(y=>y.didError)?(f=Ys.Error,p=s?o?u.formatMessage({id:"browsingMessage.searchingKnowledgeFailed",defaultMessage:"Error searching knowledge"}):u.formatMessage({id:"browsingMessage.retrievalFailed",defaultMessage:"Error reading documents"}):u.formatMessage({id:"message.tools.browse.failed",defaultMessage:"Search failed"})):(f=Ys.Finished,p=s?null:g.count===0?u.formatMessage({id:"message.tools.browse.started",defaultMessage:"Searching the web..."}):u.formatMessage({id:"message.tools.browse.finished",defaultMessage:"Searched {count, plural, =0 {0 sites} one {# site} other {# sites}}"},g)):i.length>0?p=jU({contextualAnswerSources:i,intl:u}):c.length>0&&(p=gLe(u,g,s,o,c[c.length-1])),(c.length>0||s&&n)&&f!==Ys.Error?r.jsx(Bx,{highlightedCommand:p,showWorkUserSetting:!1,status:f,children:c.length===0?null:r.jsx(lLe,{commands:c})}):r.jsx(yLe,{$isError:f===Ys.Error,children:p})}function $k(t){var e,n,s;return((e=t.metadata)==null?void 0:e.command)==="quote"||((n=t.metadata)==null?void 0:n.command)==="quote_full"||((s=t.metadata)==null?void 0:s.command)==="quote_lines"}function iLe(t){return t.map((e,n)=>{if(e.author.role!==Ke.Tool||n>0&&$k(e)&&$k(t[n-1]))return null;const s=e.metadata;if(!s)return null;const{command:o,status:a}=s;return o?{type:o,status:a,didError:e.content.content_type===ut.SystemError,message:e}:null}).filter(P3)}function lLe({commands:t}){const e=ne();return r.jsx("div",{className:"divide-token-border-default border-token-border-default mb-4 divide-y rounded-xl border text-sm",children:r.jsx(fn,{initial:!1,children:t.map((n,s)=>{const o=uLe(n);if(o==null)return null;const{icon:a,url:i,title:l,externalLink:c}=o,d=i?rM(i):void 0,u=l?typeof l=="string"?l:e.formatMessage(l):null,f=i&&Zv(i);return r.jsx(Xe.div,{initial:"collapsed",animate:"open",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:r.jsxs(cLe,{url:c!=null?c:i,className:z("flex items-start gap-3 px-4 py-3",l?"text-token-text-secondary":"text-token-text-primary",s===0&&"rounded-t-xl",s===t.length-1&&"rounded-b-xl"),children:[a?r.jsx(a,{className:"icon-sm text-token-text-secondary mt-0.5 shrink-0"}):i?r.jsx(ks,{url:i,className:"mt-1"}):null,r.jsxs("div",{children:[u&&r.jsxs("div",{className:"text-token-text-primary line-clamp-1",children:[f&&"".concat(f,"  "),u]}),r.jsx("div",{children:d})]})]})},s)})})})}function cLe({url:t,children:e,className:n}){return t?r.jsxs("a",{href:t,target:"_blank",className:z(n,"group hover:bg-token-main-surface-secondary relative"),rel:"noreferrer",children:[e,r.jsx("div",{className:"from-token-main-surface-secondary invisible absolute end-3 bg-linear-to-l to-transparent ps-4 group-hover:visible",children:r.jsx(LRe,{className:"icon text-token-text-secondary"})})]}):r.jsx("div",{className:n,children:e})}function dLe(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type!=="file"?e.title:null}function MU(t){var e,n;return(n=(e=t.message.metadata)==null?void 0:e.args)==null?void 0:n[0]}function uLe(t){var e,n,s;switch(t.type){case zt.Search:{const o=(e=t.message.metadata)==null?void 0:e.search_engine;if(o&&o!==fq.Bing)return null;const a=MU(t);return{icon:RRe,url:((n=t.message.metadata)==null?void 0:n.message_source)==="apple"?null:"bing.com",externalLink:mLe(t),title:a?"".concat(a,""):Ge({id:"message.tools.browse.querying",defaultMessage:"Querying"})}}case zt.Click:case zt.MultiClick:case zt.Lookup:case zt.OpenUrl:case zt.Open:case zt.Quote:case zt.QuoteFull:case zt.QuoteLines:case zt.Scroll:return{url:Y1(t),title:(s=dLe(t))!=null?s:void 0};case zt.Spinner:case zt.Back:return null}}function fLe(t){const e=new URLSearchParams({query:t.query});return"".concat(Kc,"/bing/redirect?").concat(e.toString())}function mLe(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n.args)==null?void 0:s[0];return e===void 0?null:fLe({query:e})}function gLe(t,e,n,s,o){switch(o==null?void 0:o.type){case zt.Click:case zt.MultiClick:case zt.Lookup:case zt.OpenUrl:case zt.Quote:case zt.QuoteFull:case zt.QuoteLines:case zt.Scroll:case zt.Open:case zt.Back:return t.formatMessage({id:"message.tools.browse.reading",defaultMessage:"Browsing {domain}"},e);case zt.Search:case void 0:return n?s?t.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):t.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):t.formatMessage({id:"message.tools.browse.searching",defaultMessage:'Searching "{query}"'},e);case zt.Spinner:return null}}function pLe(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type==="file"?e.name:null}function hLe(t,e){switch(t.type){case zt.Search:return!0;case zt.Click:case zt.Lookup:case zt.MultiClick:case zt.OpenUrl:case zt.Quote:case zt.QuoteFull:case zt.QuoteLines:return e?pLe(t)!=null:Y1(t)!=null;case zt.Open:case zt.Back:case zt.Scroll:case zt.Spinner:return!1}}function _Le(t){var e;return((e=t.message.metadata)==null?void 0:e.message_source)==="apple"}function Y1(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type!=="file"?e.url:null}function xLe(t){return t.filter(e=>e.author.role===Ke.Tool)}var EE;const yLe=ft.p(EE||(EE=ct(["first:mt-0 my-1.5 h-8 flex items-center ltr:me-auto rtl:ms-auto empty:hidden\n",""])),({$isError:t})=>t?"text-token-text-error":"text-token-text-secondary"),h4={aha_sync_connector:"Aha!",asana_sync_connector:"Asana",azure_devops_sync_connector:"Azure Boards",basecamp_sync_connector:"Basecamp",google_drive:"Google Drive",sharepoint:"SharePoint",slack:"Slack",github:"GitHub",clickup_sync_connector:"ClickUp",dropbox_sync_connector:"Dropbox",box_sync_connector:"Box",linear_sync_connector:"Linear",intercom_sync_connector:"Intercom",notion_sync_connector:"Notion",confluence_sync_connector:"Confluence",jira_sync_connector:"Jira",jira_servicemanagement_sync_connector:"Jira Service",hubspot_sync_connector:"HubSpot",salesforce_sync_connector:"Salesforce",freshdesk_sync_connector:"Freshdesk",freshservice_sync_connector:"Freshservice",front_sync_connector:"Front",gitlab_sync_connector:"GitLab Issues",gorgias_sync_connector:"Gorgias",helpscout_sync_connector:"Help Scout",ironclad_sync_connector:"Ironclad",pipedrive_sync_connector:"Pipedrive",salesforce_service_cloud_sync_connector:"Salesforce Service Cloud",shortcut_sync_connector:"Shortcut",teamwork_sync_connector:"Teamwork.com",zendesk_sync_connector:"Zendesk",zoho_sync_connector:"Zoho",zoho_desk_sync_connector:"Zoho Desk",slurm_sharepoint:"SharePoint",slurm_linear:"Linear",slurm_box:"Box",slurm_dropbox:"Dropbox",slurm_gmail:"Gmail",slurm_google_drive:"Google Drive",slurm_notion:"Notion",slurm_hubspot:"HubSpot"},AU={aha_sync_connector:aLe,asana_sync_connector:oLe,azure_devops_sync_connector:sLe,basecamp_sync_connector:nLe,google_drive:Fk,sharepoint:Pk,slack:BRe,github:KRe,clickup_sync_connector:tLe,dropbox_sync_connector:Bk,box_sync_connector:Uk,linear_sync_connector:Ok,intercom_sync_connector:WRe,notion_sync_connector:Lk,confluence_sync_connector:eLe,jira_sync_connector:VRe,jira_servicemanagement_sync_connector:HRe,hubspot_sync_connector:Dk,salesforce_sync_connector:Rk,freshdesk_sync_connector:XRe,freshservice_sync_connector:JRe,front_sync_connector:QRe,gitlab_sync_connector:ZRe,gorgias_sync_connector:qRe,helpscout_sync_connector:zRe,ironclad_sync_connector:GRe,pipedrive_sync_connector:$Re,salesforce_service_cloud_sync_connector:Rk,shortcut_sync_connector:URe,teamwork_sync_connector:FRe,zendesk_sync_connector:DRe,zoho_sync_connector:Nk,zoho_desk_sync_connector:Nk,slurm_sharepoint:Pk,slurm_linear:Ok,slurm_box:Uk,slurm_dropbox:Bk,slurm_gmail:YRe,slurm_google_drive:Fk,slurm_notion:Lk,slurm_hubspot:Dk},IU=({messages:t})=>[...t.filter(uq).reduce((s,o)=>{var a,i;return(i=(a=o.metadata)==null?void 0:a.retrieval_search_sources)==null||i.forEach(l=>{(l.product_type==="contextual_answers"||l.product_type==="slurm")&&l.source_name in h4&&s.add(l.source_name)}),s},new Set)],jU=({contextualAnswerSources:t,intl:e})=>{const n=t.map(a=>{var i;return(i=h4[a])!=null?i:a}).filter(Boolean),s=t.map(a=>{var l;const i=(l=AU[a])!=null?l:ORe;return r.jsx(i,{className:"icon-sm"},a)}).filter(Boolean),o=t.length===1?e.formatMessage({id:"Jzt2om",defaultMessage:"Reading {source}"},{source:n[0]}):t.length===2?e.formatMessage({id:"wTM7gR",defaultMessage:"Reading {source1} and {source2}"},{source1:n[0],source2:n[1]}):e.formatMessage({id:"xnwjH1",defaultMessage:"Reading {source1}, {source2} and more"},{source1:n[0],source2:n[1]});return t.length>0?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center gap-1",children:s}),o]}):void 0},sst=Object.freeze(Object.defineProperty({__proto__:null,BrowsingMessage:rLe,CA_SOURCE_TO_ICON_MAP:AU,CA_SOURCE_TO_TEXT_MAP:h4,getCASources:IU,getContextualAnswerDisplayText:jU,getVisitedUrl:Y1},Symbol.toStringTag,{value:"Module"})),vLe=R(()=>P(()=>Promise.resolve().then(()=>um),void 0),{loading:t=>F(t)}),bLe=/^(\d+)([^]*)([^]+)?$/,CLe=["Citation Marker","Content Snippet","Content source","File created at","File last modified at","Mclick Target","Title"];function ost(t){const e=[];if(!t||typeof t!="object")return null;if(!Object.hasOwn(t,"results"))return null;const n=t.results;if(!Array.isArray(n))return null;const s=n.map(Vk);for(const a of s){if(a==null)return null;e.push(a)}let o;if(Object.hasOwn(t,"debug_info")){const a=t.debug_info;if(!a||typeof a!="object"||!Object.hasOwn(a,"retrieval_results")||!Array.isArray(a.retrieval_results))return null;const i=a.retrieval_results;o={retrieval_results:[]};for(const l of i){if(!l||typeof l!="object"||typeof l.query!="string"||!Array.isArray(l.results))return null;const c=l.query,d=l.results.map(Vk),u=[];for(const f of d){if(!f)return null;u.push(f)}o.retrieval_results.push({query:c,results:u})}}return{results:e,debug_info:o}}function Vk(t){const e={};if(!t||typeof t!="object")return null;for(const[n,s]of Object.entries(t))n==="score"&&typeof s=="number"?e.score=s:["document_id","content","title","created_at","updated_at","file_created_at","file_modified_at","document_chunk_id","cloud_doc_url","document_source"].includes(n)&&(s==null||typeof s=="string")&&(e[n]=s!=null?s:void 0);return e.document_id==null||e.content==null?null:U(w({},e),{document_id:e.document_id,content:e.content})}function SLe(t){var i;if(!t.startsWith("# "))return null;const e=t.slice(2),n=bLe.exec(e);if(!n||n.length<3)return null;const s=parseInt(n[1],10),o=n[2],a=((i=n[3])==null?void 0:i.slice(1))||void 0;return{resultNum:s,title:o,documentId:a}}function NU(t,e){var i,l;const n=[];let s=null,o="";const a=t.split("\n");a.length>0&&a[a.length-1].startsWith("Visible: ")&&(o=(i=a.pop())!=null?i:"");for(const c of a){const d=c.trim(),u=SLe(d);if(u){const{resultNum:f,documentId:m,title:g}=u;s&&n.push(s),s={resultNum:f,title:(l=g||m)!=null?l:"",documentId:m,contents:"",metadata:{}}}else if(s)if(s.contents)s.contents+="\n".concat(c);else{let f=!1;for(const m of CLe){const g="".concat(m,":");if(d.startsWith(g)){s.metadata[m]=d.slice(g.length),f=!0;break}}f||(s.contents=c)}}if(s&&n.push(s),e)for(let c=0;c<n.length;c++)n[c].metadata.cloud_doc_url?n[c].cloudDocUrl=String(n[c].metadata.cloud_doc_url):c<e.length&&(n[c].cloudDocUrl=e[c]);return{visibilityLine:o,chunks:n}}function ast(t){const e=t.content;switch(e.content_type){case ut.Text:return e.parts.join();case ut.ExecutionOutput:case ut.SystemError:case ut.Code:case ut.SystemMessage:case ut.TetherQuote:case ut.TetherBrowsingCode:return e.text;case ut.TetherBrowsingDisplay:return e.result;case ut.SonicWebpage:return e.text;case ut.UserEditableContext:case ut.ModelEditableContext:case ut.Error:return null;case ut.MultimodalText:return Hk(e.parts);case ut.SystemContent:case ut.DeveloperContent:return e.instructions==null?null:typeof e.instructions=="string"?e.instructions:Hk(e.instructions);case ut.StructuredThoughts:case ut.ReasoningRecap:return null;case ut.ComputerOutput:return null;case ut.SuperWidget:return null;case ut.CitableCodeOutput:return e.output_str}}function Hk(t){return t.filter(e=>typeof e=="string").join()}function rst(t){var s;const e=t.trim().split("/").filter(o=>o.length>0);if(!e.length)return null;const n=e[0].trim();return n?{connectorName:n==="uploaded_files:"?"uploaded files":n,Icon:(s=zb(n))!=null?s:vLe}:null}const wLe=250,kLe=700;function ist(t){"use forget";var ke,Le,De,le;const e=W.c(61),{handleShowRetrievalResults:n,clientThreadId:s,turnIndex:o,className:a,responseComplete:i}=t,l=V();let c;e[0]!==o?(c=oe=>he.getConversationTurnAtIndex(oe,o).messages,e[0]=o,e[1]=c):c=e[1];const d=Ve(s,c);let u;e[2]!==s||e[3]!==l?(u=()=>yn(xt(l,s)),e[2]=s,e[3]=l,e[4]=u):u=e[4];const f=re(u),m=p4(f);let g;e[5]!==s||e[6]!==i||e[7]!==o?(g={clientThreadId:s,turnIndex:o,responseComplete:i},e[5]=s,e[6]=i,e[7]=o,e[8]=g):g=e[8];const p=g;let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=function(Ee){var fe;const be=new Map;for(const ue of Ee){const _e=((fe=ue.name)!=null?fe:"").trim().toLowerCase();be.set(_e,ue)}return be.size<3?Ee:Array.from(be.values())},e[9]=h):h=e[9];const x=h;let v;e[10]!==l||e[11]!==m?(v=()=>{if(m)return ov(l,{skipLogos:!1})},e[10]=l,e[11]=m,e[12]=v):v=e[12];const y=re(v);let b;e:{if(!m){let Ee;e[13]===Symbol.for("react.memo_cache_sentinel")?(Ee=[],e[13]=Ee):Ee=e[13],b=Ee;break e}let oe;if(e[14]!==y||e[15]!==d){const Ee=new Map,be=new Set;for(const fe of d)if(fe.author.role===Ke.Tool&&fe.author.name==="api_tool.call_tool"&&fe.content.content_type===ut.MultimodalText&&((ke=fe.metadata)==null?void 0:ke.api_tool_type)==="glaux"){const ue=(Le=fe.metadata)==null?void 0:Le.citation_metadata,_e=ue==null?void 0:ue.id;if(!ue||!_e||!ue.url)continue;const Te=typeof(ue==null?void 0:ue.__connector_id)=="string"?ue.__connector_id:void 0,{Icon:$e,appName:Ne}=Px({connectorId:Te,cloud_doc_url:ue.url,availableConnectors:y}),Ae={id:_e,Icon:$e,appName:Ne,name:ue.title,cloud_doc_url:ue.url,connectorId:Te};Ee.set(_e,Ae)}else if(Z5(fe)){const ue=NU(fe.content.result),_e=(le=(De=fe.metadata)==null?void 0:De.cloud_doc_urls)!=null?le:[];ue.chunks.forEach((Te,$e)=>{if(!Te.documentId||be.has(Te.documentId))return;let Ne;if(Te.metadata.cloud_doc_url)Ne=Te.metadata.cloud_doc_url.toString();else if($e<_e.length)Ne=_e[$e];else if(Te.documentId.endsWith("--google")){const Qe=Te.documentId.split("--")[1];Ne="https://drive.google.com/file/d/".concat(Qe)}if(!Ne)return;be.add(Te.documentId);const{Icon:Ae,appName:He}=Px({cloud_doc_url:Ne});Ee.set(Te.documentId,{id:Te.documentId,name:Te.title,cloud_doc_url:Ne,Icon:Ae,appName:He})})}oe=Array.from(Ee.values()).filter(ILe),e[14]=y,e[15]=d,e[16]=oe}else oe=e[16];b=oe}const C=b;let S;if(e[17]!==C){const oe=new Map;for(const Ee of C)Ee.Icon&&oe.set(Ee.appName,Ee.Icon);S=Array.from(oe.values()).slice(0,3),e[17]=C,e[18]=S}else S=e[18];const E=S,k=_.useRef(!1);let T;e[19]!==p||e[20]!==C.length?(T=()=>{k.current||C.length>0&&(k.current=!0,B.logEvent("File Sources Carousel Shown",p))},e[19]=p,e[20]=C.length,e[21]=T):T=e[21];let M;e[22]!==p||e[23]!==C?(M=[C,p],e[22]=p,e[23]=C,e[24]=M):M=e[24],_.useEffect(T,M);let A;e[25]!==C?(A=x(C),e[25]=C,e[26]=A):A=e[26];const I=A,[N,L]=_.useState(0),[O,D]=_.useState(!1);let $;e[27]===Symbol.for("react.memo_cache_sentinel")?($=[],e[27]=$):$=e[27];const H=_.useRef($);let G;e[28]!==I?(G=I.map(ALe).join("|"),e[28]=I,e[29]=G):G=e[29];const Z=G,Q=_.useRef(0);let q,Y;e[30]!==N?(q=()=>{Q.current=N},Y=[N],e[30]=N,e[31]=q,e[32]=Y):(q=e[31],Y=e[32]),_.useEffect(q,Y);const te=_.useRef(!1);let ae,se;e[33]!==O?(ae=()=>{te.current=O},se=[O],e[33]=O,e[34]=ae,e[35]=se):(ae=e[34],se=e[35]),_.useEffect(ae,se);let ce;e[36]!==I.length||e[37]!==C.length?(ce=()=>{if(H.current.forEach(MLe),H.current=[],I.length===0){_.startTransition(()=>{D(!1),L(0)});return}const oe=Math.min(Q.current,I.length,3),Ee=oe>0?oe:Math.min(1,I.length);_.startTransition(()=>{L(Ee),C.length<=3&&D(!1)});const be=Math.min(3,I.length);for(let fe=Ee;fe<be;fe=fe+1,fe){const ue=window.setTimeout(()=>{L(_e=>Math.max(_e,fe+1))},wLe*fe);H.current.push(ue)}if(C.length>3&&!te.current){const fe=window.setTimeout(()=>D(!0),kLe);H.current.push(fe)}return()=>{H.current.forEach(TLe),H.current=[]}},e[36]=I.length,e[37]=C.length,e[38]=ce):ce=e[38];let X;e[39]!==Z||e[40]!==I.length||e[41]!==C.length?(X=[Z,I.length,C.length],e[39]=Z,e[40]=I.length,e[41]=C.length,e[42]=X):X=e[42],_.useEffect(ce,X);const ee=Math.min(N,I.length),ie=O&&C.length>3;if(C.length===0)return null;let de;e[43]!==a?(de=z("flex w-full flex-row gap-2",a),e[43]=a,e[44]=de):de=e[44];let me;e[45]===Symbol.for("react.memo_cache_sentinel")?(me=z("flex w-full flex-1 transform-gpu flex-row justify-start gap-2"),e[45]=me):me=e[45];let xe;e[46]!==I||e[47]!==ee?(xe=I.slice(0,ee).map(ELe),e[46]=I,e[47]=ee,e[48]=xe):xe=e[48];let pe;e[49]!==p||e[50]!==n||e[51]!==E||e[52]!==C.length||e[53]!==ie?(pe=ie&&r.jsx(NLe,{overflowIcons:E,count:C.length,onClick:()=>{B.logEvent("File Sources Carousel Clicked",p),n()}}),e[49]=p,e[50]=n,e[51]=E,e[52]=C.length,e[53]=ie,e[54]=pe):pe=e[54];let Me;e[55]!==xe||e[56]!==pe?(Me=r.jsxs("div",{className:me,children:[xe,pe]}),e[55]=xe,e[56]=pe,e[57]=Me):Me=e[57];let Ce;return e[58]!==de||e[59]!==Me?(Ce=r.jsx("div",{className:de,children:Me}),e[58]=de,e[59]=Me,e[60]=Ce):Ce=e[60],Ce}function ELe(t){return r.jsx(jLe,{item:t},t.id)}function TLe(t){return window.clearTimeout(t)}function MLe(t){return window.clearTimeout(t)}function ALe(t){return t.id}function ILe(t){return!!t.cloud_doc_url}const jLe=_.memo(function(e){"use forget";const n=W.c(16),{item:s}=e;if(!s)return null;let o,a,i,l;n[0]===Symbol.for("react.memo_cache_sentinel")?(o={opacity:0,x:6},a={opacity:1,x:0},i={type:"spring",stiffness:180,damping:26,mass:.8},l={willChange:"transform, opacity"},n[0]=o,n[1]=a,n[2]=i,n[3]=l):(o=n[0],a=n[1],i=n[2],l=n[3]);const c=s.cloud_doc_url;let d;n[4]===Symbol.for("react.memo_cache_sentinel")?(d=z("block h-[64px] min-w-0 flex-1 basis-0","relative flex flex-col gap-1 rounded-2xl px-4 py-3","border-token-border-default border","bg-token-bg-primary","hover:bg-token-bg-tertiary cursor-pointer"),n[4]=d):d=n[4];const u=s.Icon?s.Icon:null;let f;n[5]!==s.appName?(f=r.jsx("div",{className:"text-token-text-secondary line-clamp-1 text-xs",children:s.appName}),n[5]=s.appName,n[6]=f):f=n[6];let m;n[7]!==u||n[8]!==f?(m=r.jsxs("div",{className:"flex items-center gap-1",children:[u,f]}),n[7]=u,n[8]=f,n[9]=m):m=n[9];let g;n[10]!==s.name?(g=r.jsx("div",{className:"text-token-text-primary line-clamp-1 truncate text-sm",children:s.name}),n[10]=s.name,n[11]=g):g=n[11];let p;return n[12]!==s.cloud_doc_url||n[13]!==g||n[14]!==m?(p=r.jsxs(Xe.a,{initial:o,animate:a,transition:i,style:l,href:c,target:"_blank",rel:"noreferrer",className:d,children:[m,g]}),n[12]=s.cloud_doc_url,n[13]=g,n[14]=m,n[15]=p):p=n[15],p}),NLe=_.memo(function(e){"use forget";const n=W.c(15),{overflowIcons:s,count:o,onClick:a}=e;let i,l,c,d;n[0]===Symbol.for("react.memo_cache_sentinel")?(i={opacity:0,x:6},l={opacity:1,x:0},c={type:"spring",stiffness:180,damping:26,mass:.8},d={willChange:"transform, opacity"},n[0]=i,n[1]=l,n[2]=c,n[3]=d):(i=n[0],l=n[1],c=n[2],d=n[3]);let u;n[4]===Symbol.for("react.memo_cache_sentinel")?(u=Array.from({length:3}),n[4]=u):u=n[4];let f;n[5]!==s?(f=r.jsx("div",{className:"flex flex-row gap-1",children:u.map((h,x)=>{const v=s[x];return r.jsx("div",{children:v||r.jsx("div",{className:"icon-sm rounded-full object-cover"})},x)})}),n[5]=s,n[6]=f):f=n[6];let m;n[7]!==o?(m=r.jsx("div",{className:"text-token-text-primary text-start text-sm",children:r.jsx(j,{id:"aQJYKd",defaultMessage:"{count} {count, plural, one {source} other {sources}}",values:{count:o}})}),n[7]=o,n[8]=m):m=n[8];let g;n[9]!==f||n[10]!==m?(g=r.jsxs("div",{className:"flex h-full flex-col justify-between",children:[f,m]}),n[9]=f,n[10]=m,n[11]=g):g=n[11];let p;return n[12]!==a||n[13]!==g?(p=r.jsx(Xe.button,{initial:i,animate:l,transition:c,style:d,className:"bg-token-bg-primary hover:bg-token-bg-tertiary border-token-border-default flex h-[64px] min-w-[110px] shrink-0 flex-col justify-between rounded-2xl border px-4 py-3",onClick:a,children:g}),n[12]=a,n[13]=g,n[14]=p):p=n[14],p}),Gk=R(()=>P(()=>Promise.resolve().then(()=>um),void 0),{loading:t=>F(t)});function lst({handleShowRetrievalResults:t,clientThreadId:e,turnIndex:n,responseComplete:s=!1}){const o=V(),a=ode(),[i,l]=Ve(e,x=>[he.getTurnContentReferences(x,n),he.getConversationTurnAtIndex(x,n).messages]),c=_.useMemo(()=>({turnIndex:n,clientThreadId:e,responseComplete:s}),[e,s,n]),d=_.useRef(!1);_.useEffect(()=>{d.current||(d.current=!0,B.logEvent("File Sources Footer Shown",c))},[c]);const u=_.useCallback(()=>{B.logEvent("File Sources Footer Clicked",c),t()},[t,c]),f=Z2(()=>yn(xt(o,e))),m=p4(f),g=Z2(()=>{if(m)return ov(o,{skipLogos:!1})}),p=_.useMemo(()=>{var S,E,k,T,M,A;const x=new Set,v=new Map;function y(I,N){!I||x.has(I)||(x.add(I),v.set(I,{url:I,connectorId:N}))}if(i.forEach(I=>{var N,L;I.type==="file"?y((L=I.cloud_doc_url)!=null?L:(N=I.extra)==null?void 0:N.cloud_doc_url):I.type==="file_navlist"&&I.items.forEach(O=>{y(O.cloud_doc_url)})}),s){for(const I of l)if(Z5(I)){const N=NU(I.content.result),L=(E=(S=I.metadata)==null?void 0:S.cloud_doc_urls)!=null?E:[],O=N.chunks;for(let D=0;D<O.length;D++){const $=O[D];if(!$.documentId)continue;if(D<L.length){y(L[D]);continue}const H=$.documentId.endsWith("--google")?$.documentId.split("--")[1]:void 0,G=(k=$.metadata.cloud_doc_url)!=null?k:H?"https://drive.google.com/file/d/".concat(H):void 0;y(G==null?void 0:G.toString())}break}else if(I.author.role===Ke.Tool&&I.author.name==="api_tool.call_tool"&&I.content.content_type===ut.MultimodalText&&((T=I.metadata)==null?void 0:T.api_tool_type)==="glaux"){const N=(M=I.metadata)==null?void 0:M.citation_metadata;if(!N||!N.url)continue;y(N.url,(A=N==null?void 0:N.__connector_id)!=null?A:"")}}const b=ve(o,"1424158285")||a,C=new Map;for(const[I,{connectorId:N}]of v.entries()){const{appName:L,Icon:O}=Px({connectorId:N,cloud_doc_url:I,availableConnectors:g});if(O?C.set(L,r.jsx("div",{className:"icon-sm",children:O})):b&&I.length>0?C.set(I,r.jsx(ks,{url:I,className:"icon-sm object-cover",size:32,minSize:20,fallback:r.jsx(Gk,{className:"icon-sm"})})):C.set("connected-apps",r.jsx(Gk,{className:"icon-sm"})),C.size>2)break}return new Set(Array.from(C.values()))},[l,i,s,o,a,g]),h=An(mn);return p.size===0&&!s||h?null:r.jsx("div",{className:"relative h-[60px]",children:r.jsx(Xe.div,{className:"absolute h-[60px]",initial:{opacity:0},animate:{opacity:1},children:r.jsxs("button",{className:z("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary mt-3 mb-2 flex w-fit items-center gap-1.5 rounded-xl border py-2","ps-3 pe-2.5"),onClick:u,children:[p.size>0&&r.jsx("div",{className:"flex flex-row-reverse gap-1",children:Array.from(p).reverse().map((x,v)=>r.jsx(Xe.div,{className:z("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden","group-hover/footnote:border-token-main-surface-secondary","relative"),initial:{opacity:0},animate:{opacity:1},children:x},v))}),r.jsx("div",{className:"text-token-text-secondary flex items-center gap-0.5 text-xs font-semibold",children:r.jsx(j,{id:"/48IOP",defaultMessage:"Sources"})})]})})})}var TE;const cst=ft.header(TE||(TE=ct(["draggable no-draggable-children sticky top-0 p-2 touch:p-2.5 flex items-center justify-between z-20 h-header-height bg-token-main-surface-primary"]))),dst=128;function ust(t){var l;const i=t,{tooltip:e,className:n,testId:s}=i,o=we(i,["tooltip","className","testId"]),a=r.jsx(ye,U(w({color:(l=t.color)!=null?l:"secondary",size:"medium"},o),{className:n,"data-testid":s}));return e!=null?r.jsx(pt,{label:e,children:a}):a}function fst({label:t,disabled:e=!1,tooltipText:n,value:s}){const o=_.useId();return r.jsx("div",{className:z("flex items-center gap-2",e?"opacity-50":""),children:r.jsx(pt,{disabled:n==null,label:n,side:"right",triggerAs:null,children:r.jsxs("label",{htmlFor:o,className:"flex cursor-pointer items-center gap-1",children:[r.jsx(Db,{id:o,value:s,disabled:e,className:"me-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full border border-gray-500 bg-white dark:border-gray-600 dark:bg-gray-700",children:r.jsx(Fb,{className:"h-2 w-2 rounded-full bg-gray-950 dark:bg-white"})}),t]})})})}function mst(t){return r.jsx(Pg,U(w({},t),{className:z("rounded-sm! checked:border-black! checked:bg-black! dark:border-gray-600 dark:bg-gray-700",t.className)}))}const gst=({gizmo:t})=>r.jsx("div",{className:"text-token-text-tertiary pointer-events-none text-sm select-none","aria-hidden":!0,inert:!0,children:t.gizmo.display.name}),pst=t=>{var e,n,s;return((s=(n=(e=t.metadata)==null?void 0:e.suggested_connector_ids)==null?void 0:n.length)!=null?s:0)>0},hst=t=>t.recipient==="api_tool.call_tool",PLe=t=>{var e;t=Array.isArray(t)?t:[t];for(let n=t.length-1;n>=0;n--){const{metadata:s}=t[n];if((e=s==null?void 0:s.suggested_connector_ids)!=null&&e.length)return s.suggested_connector_ids}return[]},RLe=t=>{t=Array.isArray(t)?t:[t];for(let e=t.length-1;e>=0;e--){const{metadata:n}=t[e];if(n!=null&&n.cta_by_suggested_connector_id)return n.cta_by_suggested_connector_id}return{}};R(()=>P(()=>import("./dwgk7r4s1fwn35jq.js"),__vite__mapDeps([142,1])),{loading:t=>F(t)});const LLe=t=>{"use forget";const e=W.c(68),{conversation:n,connectorId:s,connector:o,hasLink:a,callToAction:i,imageUrl:l}=t,c=ne(),d=P8();let u;e[0]!==o.name||e[1]!==s||e[2]!==n||e[3]!==c?(u=()=>{E.current||(E.current=!0,NF({intl:c,conversation:n,systemHint:{name:o.name,systemHint:s6(s)}}))},e[0]=o.name,e[1]=s,e[2]=n,e[3]=c,e[4]=u):u=e[4];const f=va(u),[m,g]=Us();let p;e[5]!==m?(p=m.get(mq),e[5]=m,e[6]=p):p=e[6];const h=p==="true";let x;e[7]!==m?(x=m.get("oauth_success"),e[7]=m,e[8]=x):x=e[8];const v=x;let y;e[9]!==m?(y=m.get("connector_id"),e[9]=m,e[10]=y):y=e[10];const b=y,C=$3e(gq()).current,S=gr.useStore(),E=_.useRef(!1);let k,T;e[11]!==s||e[12]!==b||e[13]!==f||e[14]!==v||e[15]!==g?(k=()=>{!v||b!==s||(g(DLe),f())},T=[v,g,f,s,b],e[11]=s,e[12]=b,e[13]=f,e[14]=v,e[15]=g,e[16]=k,e[17]=T):(k=e[16],T=e[17]),_.useEffect(k,T);let M,A;e[18]!==s||e[19]!==f||e[20]!==h||e[21]!==C?(M=()=>{!s||!h||C!==s||f()},A=[h,s,C,f],e[18]=s,e[19]=f,e[20]=h,e[21]=C,e[22]=M,e[23]=A):(M=e[22],A=e[23]),_.useEffect(M,A);const{logo_url:I,logo_url_dark:N}=o;let L;e[24]!==I||e[25]!==N?(L={lightLogoUrl:I,darkLogoUrl:N},e[24]=I,e[25]=N,e[26]=L):L=e[26];const{data:O}=_1(L),D=!1,$=l||(O==null?void 0:O.url);let H,G,Z;e[27]===Symbol.for("react.memo_cache_sentinel")?(H={opacity:0},G={opacity:1},Z={delay:.1,duration:.5,type:"spring"},e[27]=H,e[28]=G,e[29]=Z):(H=e[27],G=e[28],Z=e[29]);let Q;e[30]!==o.name||e[31]!==o.supported_auth||e[32]!==s||e[33]!==n||e[34]!==f||e[35]!==a||e[36]!==d||e[37]!==S?(Q=()=>{if(Ie.count(je.ECOSYSTEM,"inline_message_suggestion_clicked"),B.logEventWithStatsig("Ecosystem app: Inline message suggestion clicked","chatgpt_web_ecosystem_inline_message_suggestion_clicked"),Ie.count(je.ECOSYSTEM,"suggestion_hint_clicked"),B.logEventWithStatsig("Ecosystem app: Suggestion hint clicked","chatgpt_web_ecosystem_suggestion_hint_clicked",w({system_hint:s6(s)},o.name?{system_hint_label:o.name}:{})),a)f();else{Ie.count(je.ECOSYSTEM,"inline_message_suggestion_connect_modal_opened"),B.logEventWithStatsig("Ecosystem app: Inline message suggestion connect modal opened","chatgpt_web_ecosystem_inline_message_suggestion_connect_modal_opened");const de=n.serverId$(),me=de?new URL($o(de),window.location.origin):new URL(window.location.href);me.searchParams.set("connector_id",s),me.searchParams.set("oauth_success","true");const xe=S.getActiveSystemHintType();xe&&me.searchParams.set("system_hint",xe);const pe=o.supported_auth.length===1&&o.supported_auth[0].type==="OAUTH"?"OAUTH":void 0;d({connectorId:s,authTypeOverride:pe,redirectAfter:me.toString(),referrer:ma.MessageSuggestion,showSettingsBehindConnectorLink:!1})}},e[30]=o.name,e[31]=o.supported_auth,e[32]=s,e[33]=n,e[34]=f,e[35]=a,e[36]=d,e[37]=S,e[38]=Q):Q=e[38];let q;e[39]!==l||e[40]!==$?(q=$&&r.jsx("div",{className:z("flex items-center justify-center overflow-hidden",l?"bg-token-bg-tertiary h-14 w-14 rounded-lg":z("bg-token-bg-primary h-12 w-12 rounded-xl","shadow-[0_0_0_0.5px_rgba(0,0,0,0.05),0_0.5px_1px_0_rgba(0,0,0,0.09),0_5px_8px_-3px_rgba(0,0,0,0.05)]","dark:shadow-[0_0_0_0.5px_rgba(255,255,255,0.05),0_0.5px_1px_0_rgba(255,255,255,0.09),0_5px_8px_-3px_rgba(255,255,255,0.05)]")),children:r.jsx("img",{className:z("object-contain",l?"h-full w-full":"h-8 w-8 overflow-hidden rounded-lg"),src:$,"aria-hidden":"true"})}),e[39]=l,e[40]=$,e[41]=q):q=e[41];let Y;e[42]!==i?(Y=r.jsx("span",{className:"truncate",children:i}),e[42]=i,e[43]=Y):Y=e[43];let te;e[44]!==D?(te=null,e[44]=D,e[45]=te):te=e[45];let ae;e[46]!==Y||e[47]!==te?(ae=r.jsxs("span",{className:"text-token-text-primary inline-flex items-center text-base",children:[Y,te]}),e[46]=Y,e[47]=te,e[48]=ae):ae=e[48];let se;e[49]!==o.name||e[50]!==O||e[51]!==l||e[52]!==D?(se=l&&!D&&r.jsx("span",{className:"h-4.5 w-4.5 shrink-0 overflow-hidden rounded-md",children:(O==null?void 0:O.url)&&r.jsx("img",{src:O.url,className:"h-full w-full",alt:o.name})}),e[49]=o.name,e[50]=O,e[51]=l,e[52]=D,e[53]=se):se=e[53];let ce;e[54]!==o.name||e[55]!==a||e[56]!==D?(ce=r.jsx("span",{className:"text-token-text-tertiary group-hover:text-token-text-secondary truncate text-sm",children:a?r.jsx(j,{id:"6RY8V3",defaultMessage:"Use {connectorName}",values:{connectorName:o.name}}):r.jsx(j,{id:"tbpdYd",defaultMessage:"Connect {connectorName}",values:{connectorName:o.name}})}),e[54]=o.name,e[55]=a,e[56]=D,e[57]=ce):ce=e[57];let X;e[58]!==se||e[59]!==ce?(X=r.jsxs("div",{className:"flex flex-1 items-start gap-2",children:[se,ce]}),e[58]=se,e[59]=ce,e[60]=X):X=e[60];let ee;e[61]!==ae||e[62]!==X?(ee=r.jsxs("div",{className:"flex flex-col items-start gap-1 pe-2",children:[ae,X]}),e[61]=ae,e[62]=X,e[63]=ee):ee=e[63];let ie;return e[64]!==Q||e[65]!==q||e[66]!==ee?(ie=r.jsxs(Xe.button,{initial:H,animate:G,transition:Z,type:"button",className:"group after:bg-token-bg-secondary relative z-10 flex items-center gap-4 after:absolute after:-inset-2 after:z-[-1] after:hidden after:rounded-xl after:opacity-50 after:content-[''] hover:after:block",onClick:Q,children:[q,ee]}),e[64]=Q,e[65]=q,e[66]=ee,e[67]=ie):ie=e[67],ie},OLe=t=>{"use forget";const e=W.c(10),{conversation:n,messages:s}=t,o=PLe(s),{platformConnectors:a}=kd(),{connectorLinks:i}=Of();let l;e[0]!==s?(l=RLe(s),e[0]=s,e[1]=l):l=e[1];const c=l,d=o.length>1,u="border-token-border-light my-2 flex gap-10 border-t pt-4";let f;e[2]!==i||e[3]!==n||e[4]!==c||e[5]!==d||e[6]!==a?(f=p=>{var y,b;const h=a.get(p);if(!h||!p)return null;const x=h.suggestion_config,v=(y=c[p])!=null?y:x==null?void 0:x.call_to_action;return!x||!v?null:r.jsx(LLe,{conversation:n,connectorId:p,connector:h,hasLink:i.has(p),callToAction:v,imageUrl:d?null:(b=x.image_url)!=null?b:null},p)},e[2]=i,e[3]=n,e[4]=c,e[5]=d,e[6]=a,e[7]=f):f=e[7];const m=o.map(f);let g;return e[8]!==m?(g=r.jsx("div",{className:u,children:m}),e[8]=m,e[9]=g):g=e[9],g},_st=t=>{"use forget";const e=W.c(6),{isCompletionRequestInProgress:n,conversation:s,messages:o}=t;let a;e[0]!==s||e[1]!==n||e[2]!==o?(a=!n&&r.jsx(OLe,{conversation:s,messages:o},"message-suggestion"),e[0]=s,e[1]=n,e[2]=o,e[3]=a):a=e[3];let i;return e[4]!==a?(i=r.jsx(f3,{name:"EcosystemMessageSuggestion",children:r.jsx(fn,{children:a})}),e[4]=a,e[5]=i):i=e[5],i};function DLe(t){return t.delete("oauth_success"),t.delete("system_hint"),t.delete("connector_id"),t}const FLe=R(()=>P(()=>import("./btrwhqtnzjbkk202.js"),__vite__mapDeps([359,1])),{loading:t=>F(t)}),BLe=R(()=>P(()=>import("./g83306ugnaenca1o.js"),__vite__mapDeps([470,1])),{loading:t=>F(t)});function Z1({domain:t,url:e,title:n,thumbnail_url:s,description:o,pub_date:a,subscript:i,theme:l="default",thumbnailOverlay:c,ThumbnailErrorIcon:d=FLe,descriptionClassName:u="line-clamp-2",onLogClick:f}){const m=ne(),g=_.useRef(!1),[p,h]=_.useState("loading"),[x,v]=_.useState("loading");return _.useEffect(()=>{setTimeout(()=>{v(y=>y==="loading"?"error":y)},5e3)},[]),r.jsxs(to,{href:e,target:"_self",className:z("hover:bg-token-interactive-bg-secondary-hover thread-sm:px-4 flex w-full justify-between gap-6 rounded-xl px-2 py-2.5",!o&&"min-h-[96px]"),draggable:!1,onMouseDown:()=>g.current=!1,onMouseMove:()=>g.current=!0,onClick:y=>g.current?(g.current=!1,y.preventDefault()):f==null?void 0:f(),children:[r.jsxs("div",{className:"flex flex-col overflow-hidden",children:[l==="default"&&r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:z("border-token-border-light border-thin relative h-[28px] w-[28px] shrink-0 self-center overflow-hidden rounded-lg p-1.25",x==="loading"&&"loading-results-shimmer"),children:[r.jsx("div",{className:z("absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat opacity-30 dark:opacity-20",x==="loaded"&&"blur-md",x==="error"&&"bg-token-bg-tertiary"),children:r.jsx(ks,{url:e,size:256,minSize:32,containerClassName:z(x!=="loaded"&&"hidden"),className:"h-10 w-10"})}),r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[r.jsx(ks,{url:e,size:128,minSize:32,containerClassName:z("overflow-hidden rounded-md",x!=="loaded"&&"hidden"),className:"icon-sm h-4 w-4",onLoad:()=>v("loaded"),onError:()=>v("error")}),x==="error"&&r.jsx(BLe,{className:"icon-md text-token-text-tertiary"})]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"line-clamp-1 text-sm [overflow-wrap:anywhere] select-text",children:t}),r.jsx("span",{className:"text-token-text-secondary mt-0.5 line-clamp-1 align-top text-xs [overflow-wrap:anywhere] select-text",children:ULe(e)})]})]}),n&&r.jsx("span",{className:z("mt-2.5 text-base font-medium [overflow-wrap:anywhere] text-[var(--interactive-label-accent-default)] select-text",l==="default"&&"line-clamp-2",l==="sub-result"&&"line-clamp-1"),children:n}),(o!=null?o:a)&&r.jsxs("div",{className:z("text-token-text-secondary mt-1 line-clamp-2 w-full text-sm font-normal [overflow-wrap:anywhere] select-text",u),children:[r.jsx("span",{className:"text-token-text-tertiary",children:a&&r.jsxs(r.Fragment,{children:[oB(m,new Date(a)),o&&r.jsxs(r.Fragment,{children:[r.jsx(hw,{}),"",r.jsx(hw,{})]})]})}),o]}),i&&r.jsx("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 text-sm select-text",children:i})]}),s&&l==="default"&&r.jsx("div",{className:"self-center",children:r.jsxs("div",{className:"relative ms-auto block aspect-video min-h-[144px] w-[222px] min-w-0 overflow-hidden rounded-xl",children:[s&&r.jsx("img",{src:s,alt:"",className:z("absolute inset-0 h-full w-full object-cover opacity-0",p==="loaded"&&"opacity-100"),loading:"lazy",onLoad:()=>h("loaded"),onError:()=>h("error")}),r.jsx("div",{className:z("loading-results-shimmer absolute inset-0",{hidden:p!=="loading"})}),r.jsx("div",{className:z("bg-token-bg-secondary absolute inset-0 flex items-center justify-center",{hidden:p!=="error"}),children:r.jsx(d,{className:"icon-2xl opacity-15"})}),c]})})]})}function ULe(t){let e;try{e=decodeURIComponent(t)}catch(o){console.warn("Unable to decode URL",{url:t,error:o}),e=t}const n=e.replace(/\/$/,"");return n.match("youtube.com/watch")?n:n.replace(/\?.*$/,"")}function $Le(t){return t.find(e=>{var n;return!!((n=e.metadata)!=null&&n.crisis_helpline_message)})}function VLe(t){"use forget";const e=W.c(11),{message:n,className:s}=t,o=n.metadata.crisis_helpline_message;let a;e[0]!==s?(a=z("shadow-short flex flex-col rounded-lg p-4",s),e[0]=s,e[1]=a):a=e[1];let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i={a:GLe},e[2]=i):i=e[2];let l;e[3]!==o.text?(l=r.jsx(Bs,{className:"text-sm",componentOverrides:i,children:o.text}),e[3]=o.text,e[4]=l):l=e[4];let c;e[5]!==o.links?(c=o.links.length>0&&r.jsx("div",{className:"flex flex-col gap-2",children:o.links.map(HLe)}),e[5]=o.links,e[6]=c):c=e[6];let d;return e[7]!==a||e[8]!==l||e[9]!==c?(d=r.jsxs("div",{className:a,children:[l,c]}),e[7]=a,e[8]=l,e[9]=c,e[10]=d):d=e[10],d}function HLe(t){return r.jsx("div",{className:"rounded-lg bg-[var(--bg-quaternary)] py-1",children:r.jsx(Z1,{url:t.url,domain:t.domain,title:t.title,description:t.description})},t.url)}function GLe(t){const o=t,{node:e,children:n}=o,s=we(o,["node","children"]);return r.jsx("a",U(w({},s),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:n}))}const WLe=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)}),xst=({message:t,clientThreadId:e,isUserTurn:n})=>{var i,l,c,d;const s=Ve(e,u=>{var f,m;return t&&((f=t.metadata)==null?void 0:f.async_task_id)&&he.hasContinuedFromAsyncTask(u,t==null?void 0:t.id,(m=t==null?void 0:t.metadata)==null?void 0:m.async_task_id)});if(!t||!(s||n&&((i=t.metadata)!=null&&i.async_task_title)))return null;const o=(l=t.metadata)==null?void 0:l.async_task_original_message_id,a=()=>{o&&(Ze(e,u=>{u.scrollToMessageId=o}),requestAnimationFrame(()=>{Ze(e,u=>{u.scrollToMessageId=void 0})}))};return r.jsx(Hhe,{icon:r.jsx(WLe,{className:"h-4 w-4"}),label:(d=(c=t.metadata)==null?void 0:c.async_task_title)!=null?d:"",as:"button",onClick:a,isUserTurn:n})},zLe=({icons:t,size:e,stackOrder:n="bottom"})=>r.jsx("div",{className:"flex items-center",children:t.map((s,o)=>r.jsx("div",{className:"border-token-border-default box-content rounded-full border border-1 bg-white",style:{marginInlineStart:o===0?0:-e/2,zIndex:n==="bottom"?t.length-o:void 0,width:e,height:e,padding:e/4-1},children:s},o))}),qLe=R(()=>P(()=>import("./ojgc3f33xqlpzccg.js"),__vite__mapDeps([34,1])),{loading:t=>F(t)}),YLe=R(()=>P(()=>import("./l5e2clfxpgm30p9v.js"),__vite__mapDeps([261,1])),{loading:t=>F(t)}),ZLe=R(()=>P(()=>import("./z73jc6cuiis8j7zw.js"),__vite__mapDeps([262,1])),{loading:t=>F(t)}),KLe=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)}),Wk=R(()=>P(()=>import("./fsahglpl2wxoakvg.js"),__vite__mapDeps([35,1])),{loading:t=>F(t)});function yst({clientThreadId:t,connectorToUpsell:e,analyticsMetadata:n}){const s=V(),o=es(s),a=zf.useIsEnabled(t)&&!o,i=Sn(),l=!!(i!=null&&i.isAdminOfAccount()||i!=null&&i.isOwnerOfAccount()),c=!!(i!=null&&i.isPersonalAccount()),d=l&&!c,u=()=>{d&&e===Bt.GDRIVE?window.location.href="/admin/ca":e==="general"?window.location.hash="#settings/".concat(Pn.Connectors):window.location.hash="#settings/".concat(Pn.Connectors,"?connector=").concat(Go[e===Bt.GDRIVE?yt.GDRIVE_ACTION_CONNECTOR:yt.SHAREPOINT_CONNECTOR],"&add-connector-link=true&referrer=").concat(ma.ConversationFollowup)};let f;if(e==="general")f=r.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[r.jsx(zLe,{size:16,icons:[r.jsx(Wk,{width:16,height:16},"gdrive"),r.jsx(ZLe,{width:16,height:16},"dropbox"),r.jsx(YLe,{width:16,height:16},"github")]}),r.jsx("div",{children:r.jsx(j,{id:"k3bYdS",defaultMessage:"<b>Connect apps</b> to find answers, summarize info, and get things done",values:{b:m=>r.jsx("span",{className:"font-medium",children:m})}})})]});else{const m=e===Bt.GDRIVE?Wk:qLe;f=r.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[r.jsx(m,{className:"icon-sm inline"}),r.jsx("div",{children:r.jsx(j,{id:"m1IPsN",defaultMessage:"<b>Connect {app}</b> to ask questions about all your files",values:{b:g=>r.jsx("span",{className:"font-medium",children:g}),app:e===Bt.GDRIVE?"Google Drive":"SharePoint"}})})]})}return a?r.jsxs("div",{className:"group",children:[r.jsx("hr",{className:"bg-token-bg-tertiary mt-5 mb-5 opacity-70"}),r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex w-full flex-col",children:r.jsx(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:0*.03},exit:{opacity:0,translateY:4},children:r.jsxs(Xe.button,{whileHover:"hover",className:z("bg-primary hover:bg-secondary flex w-full cursor-pointer items-start justify-start gap-2 rounded-lg px-0 py-3 text-start"),onClick:m=>{u(),B.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",U(w({},Tn(n)),{action:"click",connectorToUpsell:e}))},onMouseEnter:()=>{B.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",U(w({},Tn(n)),{action:"hover",connectorToUpsell:e}))},children:[r.jsx(Xe.div,{className:"flex items-center justify-center pt-0.25 opacity-70",variants:{hover:{x:4}},initial:{x:0},transition:{duration:.1},children:r.jsx(KLe,{className:"text-token-text-secondary icon"})}),f]})})})]}):null}const QLe=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)}),JLe=4;function PU({followups:t,analyticsMetadata:e}){const n=_.useRef(!1),s=Od();_.useEffect(()=>{n.current||(n.current=!0,t.forEach((a,i)=>{B.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",U(w({},Tn(e)),{action:"show",position:(i+1).toString(),followup_text:po(a)}))}))},[t,e]);const o=t.slice(0,JLe);return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex w-full flex-col",children:o.map((a,i,l)=>r.jsx(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:i*.03},exit:{opacity:0,translateY:4},children:r.jsx(XLe,{followUp:a,onSelectingSuggestedReply:s,analyticsMetadata:e,position:i,visibleFollowups:l})},i))})}var ME;const RU=ft.div(ME||(ME=ct(["\n  h-[1px] opacity-45\n  ","\n"])),({$isSelected:t})=>t?"mx-2 bg-token-main-surface-secondary":"bg-token-border-default");function XLe({followUp:t,onSelectingSuggestedReply:e,analyticsMetadata:n,position:s,visibleFollowups:o}){const a=l=>{e(l,t,o,s),B.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",U(w({},Tn(n)),{action:"click",position:(s+1).toString(),followup_text:po(t)}))},i=()=>{B.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",U(w({},Tn(n)),{action:"hover",position:(s+1).toString(),followup_text:po(t)}))};return r.jsxs(Xe.button,{whileHover:"hover",className:z("bg-token-main-surface-primary hover:bg-token-main-surface-secondary flex w-full cursor-pointer items-start justify-start gap-2 rounded-lg px-0 py-3 text-start"),onClick:a,onMouseEnter:i,children:[r.jsx(Xe.div,{className:"flex items-center justify-center pt-0.25 opacity-70",variants:{hover:{x:4}},initial:{x:0},transition:{duration:.1},children:r.jsx(QLe,{className:"text-token-text-secondary icon"})}),r.jsx("div",{className:"text-token-text-secondary pe-2 text-start text-sm",children:po(t)})]})}const eOe=()=>r.jsx(iM,{size:"lg",lines:3,width:35,widthVariance:10,className:"w-full"}),tOe=19,nOe=4,sOe=8,oOe=2,aOe=f=>{var m=f,{as:t="div",logo:e,size:n="default",label:s,isBadge:o,isNew:a,isLauncher:i,isSelected:l=!1,tooltip:c,className:d}=m,u=we(m,["as","logo","size","label","isBadge","isNew","isLauncher","isSelected","tooltip","className"]);const g=ne(),p=n==="large"?tOe:sOe,h=n==="large"?nOe:oOe,x=r.jsx("div",{className:z("w-".concat(p," h-").concat(p," flex aspect-square items-center justify-center rounded-full border p-").concat(h),"border-transparent bg-white","dark:bg-token-main-surface-secondary"),children:r.jsx("div",{className:z("transition-[transform_--shadow-color] duration-[0.24s]",i&&!l&&"drop-shadow-[0_6px_4px_var(--shadow-color)] [--shadow-color:transparent] group-hover/app-icon:motion-safe:scale-[1.025] group-hover/app-icon:motion-safe:[--shadow-color:rgba(0,0,0,0.1)]"),children:e})}),v=t;return r.jsxs(v,U(w(w({className:z("group/app-icon can-hover:active:scale-[0.98] flex flex-col items-center gap-3 transition-transform duration-100 w-".concat(p),o?"scale-[0.9]":"",i?"cursor-pointer":"cursor-default","opacity-80 group-hover:opacity-100",d),onClick:async y=>{var b;y.persist(),await Promise.race([new Promise(C=>{y.target.addEventListener("transitionend",()=>{C()},{once:!0})}),new Promise(C=>{setTimeout(()=>C(),200)})]),(b=u.onClick)==null||b.call(u,y)}},t==="button"?{type:"button"}:{}),u),{children:[r.jsxs("div",{className:z("relative rounded-full transition-[transform_--shadow-color] duration-[0.24s]",o&&"border-token-border-default border",i&&"dark:border-token-border-default scale-[0.9] border border-black/[0.12] shadow-none group-hover/app-icon:motion-safe:shadow-[0px_4px_12px_rgba(0,0,0,0.08)]",i&&"group-hover/app-icon:motion-safe:scale-[0.91]"),children:[!i&&x,i&&r.jsx(pt,{label:c,side:"top",children:x}),a&&r.jsx("div",{className:"text-token-text-primary absolute -start-1 -top-1 z-10 rounded-full bg-blue-500 px-1.5 py-1 text-[10px] font-bold uppercase",children:g.formatMessage({id:"kEZrwC",defaultMessage:"New"})})]}),s&&r.jsx("div",{className:z("text-token-text-secondary text-center text-[12px] leading-[17px]",l&&"text-blue-400",!i&&"w-20"),children:s})]}))},rOe=R(()=>P(()=>import("./diw1uvps7iz4sxyn.js"),__vite__mapDeps([275,1])),{loading:t=>F(t)}),iOe=R(()=>P(()=>import("./dwgk7r4s1fwn35jq.js"),__vite__mapDeps([142,1])),{loading:t=>F(t)}),lOe=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)}),cOe=t=>{var n;return(n={[Pe.Search]:"Web Search",[Pe.Research]:"Research",[Pe.PictureV2]:"Draw Image",[Pe.Think]:"Think Harder"}[t])!=null?n:"Title"},Ly=(t,e,n,s,o)=>{B.logEventWithStatsig("Capabilities Suggestion Action","chatgpt_capabilities_suggestion_action",U(w({},Tn(n)),{categoryId:e.categoryId,suggestionId:e.id,position:s,action:t,numSuggestions:String(o)}))},dOe=(t,e)=>{const n=_.useRef(!1);_.useEffect(()=>{n.current||(n.current=!0,t.forEach((s,o)=>{Ly("show",s,e,o+1,t.length)}))},[t,e])},LU=({suggestions:t,analyticsMetadata:e,style:n="default"})=>{const s=Od();return dOe(t,e),r.jsx(r.Fragment,{children:t.map((o,a)=>r.jsxs(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:4},transition:{delay:a*.03},className:z("w-full flex-1",n==="compact"&&"flex-col"),children:[n==="compact"&&a>0&&r.jsx(RU,{$isSelected:!1}),r.jsx(uOe,{suggestion:o,onSelectingSuggestedReply:s,position:a+1,numSuggestions:t.length,analyticsMetadata:e,style:n})]},o.prompt))})},uOe=({suggestion:t,onSelectingSuggestedReply:e,analyticsMetadata:n,position:s,numSuggestions:o,style:a="default"})=>{const{setThreadSystemHintMode:i}=sa(),l=V(),c=st(l),d=at();return r.jsx(Xe.button,{onClick:u=>{if(Ly("click",t,n,s,o),t.categoryId===Pe.Research)if(c!=null&&c.isFree()){pn(d,"Suggested Capabilities Upsell");return}else i(t.categoryId,!0,n);e(u,t,[],0)},onMouseEnter:()=>{Ly("hover",t,n,s,o)},className:z("hover:bg-token-main-surface-secondary flex w-full flex-1 items-start rounded-xl text-start transition-colors duration-300 ease-in-out",a==="default"&&"gap-4 p-2"),children:a==="compact"?r.jsx(fOe,{suggestion:t}):r.jsx(mOe,{suggestion:t})})},fOe=({suggestion:t})=>{var o;const e=V(),n=re(()=>Mo(e)),s=_.useMemo(()=>t.categoryId==="ask"||n==null?void 0:n.find(a=>a.systemHint===t.categoryId),[n,t.categoryId]);return r.jsxs("div",{className:"bg-primary hover:bg-tertiary group flex w-full cursor-pointer items-center justify-start gap-2 rounded-lg px-2 py-3 text-start transition-colors duration-300 ease-in-out",children:[r.jsx("div",{className:"flex items-center justify-center opacity-70 transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:rotate-[-5deg] group-hover:opacity-100",children:t.categoryId==="ask"?r.jsx(lOe,{className:"text-token-text-secondary group-hover:text-token-text-primary icon"}):r.jsx(Ju,{svgString:(o=s==null?void 0:s.logo)!=null?o:"",className:"text-token-text-secondary icon group-hover:text-token-interactive-label-accent-default"})}),r.jsx("div",{className:"text-token-text-secondary group-hover:text-token-text-primary flex items-center pe-2 text-start text-sm",children:po(t)})]})},mOe=({suggestion:{categoryId:t,imageUrl:e,description:n,title:s,ctaLabel:o,prompt:a}})=>{var d;const i=V(),l=re(()=>Mo(i)),c=_.useMemo(()=>t==="ask"||l==null?void 0:l.find(u=>u.systemHint===t),[l,t]);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"border-token-border-default bg-primary relative h-16 w-14 flex-shrink-0 rounded-lg border drop-shadow-xs transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:rotate-[-2deg]",children:[t===Pe.PictureV2?r.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-lg bg-cover",style:{backgroundImage:"url(".concat(e,")")},children:r.jsx(rOe,{className:"icon-xl mb-2 text-white"})}):r.jsxs("div",{className:"flex flex-col gap-1.5 p-2",children:[r.jsx("div",{className:"text-token-text-primary text-[5px] leading-tight font-semibold tracking-tighter",children:s!=null?s:cOe(t)}),r.jsx("div",{className:"flex flex-col gap-0.5",children:Array.from({length:10}).map((u,f)=>r.jsx("div",{className:"bg-token-border-heavy h-[1px] w-full rounded-full"},f))})]}),r.jsx("div",{className:"absolute -end-2 -bottom-2",children:r.jsx(aOe,{isBadge:!0,className:"opacity-100",logo:r.jsx(Ju,{svgString:(d=c==null?void 0:c.logo)!=null?d:"",className:"icon"})})})]}),r.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[r.jsx("div",{className:"text-token-text-primary flex-grow",children:n!=null?n:a}),o&&r.jsxs("div",{className:"text-token-text-secondary flex items-center font-medium",children:[o,r.jsx(Xe.div,{variants:{hover:{x:2}},initial:{x:0},transition:{duration:.1},children:r.jsx(iOe,{className:"icon-sm"})})]})]})]})},_4=t=>{var e,n,s,o,a,i;return{id:t.id,prompt:t.prompt,title:(e=t.title)!=null?e:void 0,description:(n=t.description)!=null?n:void 0,categoryId:(s=t.system_hint)!=null?s:t.category_id,type:Je.Capabilities,imageUrl:(o=t.image_url)!=null?o:void 0,ctaLabel:(a=t.cta_label)!=null?a:void 0,modelOverride:(i=t.model_override)!=null?i:void 0}},gOe=({categoryId:t,shouldFetch:e,serverThreadId:n,lastMessageId:s})=>{var c;const{data:o,isLoading:a,error:i}=rt({queryKey:["capability_suggestions",t,s],queryFn:()=>{if(!n||!s)throw new Error("Server thread ID and last user message ID are required");return ge.safePost("/conversation/experimental/suggest_capabilities",{requestBody:{conversation_id:n,message_id:s,system_hint:t,category_id:t}})},enabled:e&&!!n&&!!s});return{suggestions:(c=o==null?void 0:o.suggestions.map(_4))!=null?c:[],isLoading:a,error:i}},Oy=(t,e,n,s)=>{B.logEventWithStatsig("Capabilities Tab Action","chatgpt_capabilities_tab_action",U(w({},Tn(n)),{tabId:e,position:s,action:t}))},pOe=(t,e)=>{const n=_.useRef(!1);_.useEffect(()=>{n.current||(n.current=!0,t.forEach((s,o)=>{Oy("show",s.value,e,o+1)}))},[t,e])},hOe=({clientThreadId:t,categorySuggestions:e,lastMessageId:n,analyticsMetadata:s,style:o="default"})=>{const a=e.map(({category_id:c,title:d,suggestions:u})=>{var f;return{value:c,message:d,suggestions:(f=u==null?void 0:u.map(_4))!=null?f:[]}}),[i,l]=_.useState(a[0].value);return pOe(a,s),r.jsxs(pq,{value:i,onValueChange:l,orientation:"horizontal",className:"flex w-full flex-col",children:[r.jsx(hq,{className:"border-token-border-default relative flex w-full flex-row gap-6 border-b",children:a.map((c,d)=>r.jsx(xOe,{value:c.value,message:c.message,isActive:i===c.value,analyticsMetadata:s,position:d+1},c.value))}),a.map(c=>r.jsx(_q,{value:c.value,children:r.jsx(_Oe,{initialSuggestions:c.suggestions,clientThreadId:t,categoryId:c.value,isActive:i===c.value,lastMessageId:n,analyticsMetadata:s,style:o})},c.value))]})},_Oe=({initialSuggestions:t,clientThreadId:e,categoryId:n,isActive:s,lastMessageId:o,analyticsMetadata:a,style:i="default"})=>{const l=jt(e),c=s&&t.length===0,{suggestions:d,isLoading:u}=gOe({categoryId:n,shouldFetch:c,serverThreadId:l,lastMessageId:o}),f=c?d:t;return n==="ask"?u?r.jsx(eOe,{}):r.jsx(PU,{followups:f.map(m=>({type:Je.Reply,text:m.prompt})),analyticsMetadata:a}):r.jsx("div",{className:"flex w-full flex-col gap-y-4 py-3 md:flex-row md:gap-x-4",children:u?r.jsxs(r.Fragment,{children:[r.jsx(zk,{}),r.jsx(zk,{})]}):r.jsx(LU,{suggestions:f,analyticsMetadata:a,style:i})})},xOe=({value:t,message:e,isActive:n,analyticsMetadata:s,position:o})=>r.jsxs(xq,{className:"text-token-text-tertiary hover:text-token-text-secondary radix-state-active:text-token-text-primary relative flex min-w-10 justify-center py-4 text-sm font-medium",value:t,onClick:()=>{Oy("click",t,s,o)},onMouseEnter:()=>{Oy("hover",t,s,o)},children:[r.jsx("div",{className:"truncate",children:e}),r.jsx(fn,{children:n&&r.jsx(Xe.div,{layoutId:"tab-underline",className:"bg-token-text-primary absolute start-0 end-0 bottom-0 h-0.5",transition:{type:"spring",stiffness:500,damping:30}})})]}),zk=()=>r.jsxs("div",{className:"flex flex-1 items-center gap-4 rounded-xl p-2",children:[r.jsx("div",{className:"bg-token-sidebar-surface-secondary dark:bg-token-border-default h-16 w-14 flex-shrink-0 rounded-lg"}),r.jsx("div",{className:"w-full flex-grow",children:r.jsx(iM,{lines:3,size:"sm"})})]}),yOe=({clientThreadId:t,categorySuggestions:e,lastMessageId:n,analyticsMetadata:s})=>{if(!e||e.length===0)return null;const o=e.length===1,a=e[0],i=a.suggestions.length>0?a.suggestions:void 0;return o&&i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-1 text-sm font-semibold",children:r.jsx(j,{id:"3UFIQc",defaultMessage:"Follow up"})}),r.jsx(LU,{suggestions:i.map(_4),analyticsMetadata:s,style:a.style})]}):r.jsx(hOe,{clientThreadId:t,categorySuggestions:e!=null?e:[],lastMessageId:n,analyticsMetadata:s})};function vOe(t=!1){const e=V(),n=ze(e,"3692302894"),s={getCapabilitySuggestionsEnabled:Mc({layer:n,paramName:"capability_suggestions",defaultValue:!1}),getPrefetchCapabilitySuggestions:Mc({layer:n,paramName:"prefetch_capability_suggestions",defaultValue:!1})};return{capabilitySuggestionsEnabled:!t&&s.getCapabilitySuggestionsEnabled(),prefetchCapabilitySuggestions:!t&&s.getPrefetchCapabilitySuggestions()}}R(()=>P(()=>import("./fcdc9s0m5jq003zg.js"),__vite__mapDeps([274,1])),{loading:t=>F(t)});R(()=>P(()=>import("./k65zm13fcbdt3p3d.js"),__vite__mapDeps([471,1])),{loading:t=>F(t)});R(()=>P(()=>import("./cw8kmn0u6h9cdbqu.js"),__vite__mapDeps([472,1])),{loading:t=>F(t)});const bOe=R(()=>P(()=>import("./odz5x4sqgrr6bek9.js"),__vite__mapDeps([309,1])),{loading:t=>F(t)}),vg=R(()=>P(()=>import("./kn8qwq1mz5gcoykc.js"),__vite__mapDeps([270,1])),{loading:t=>F(t)}),COe=(t,e,n,s,o)=>{B.logEventWithStatsig("Agent Suggestion Action","chatgpt_agent_suggestion_action",U(w({},Tn(n)),{capability:e.capability,position:s,action:t,numSuggestions:o}))},SOe=(t,e)=>{const n=_.useRef(!1);_.useEffect(()=>{n.current||(n.current=!0,t.forEach((s,o)=>{COe("show",s,e,o+1,t.length)}))},[t,e])},wOe=({agentSuggestions:t,analyticsMetadata:e})=>(SOe(t,e),r.jsx(r.Fragment,{children:t.map((n,s)=>r.jsxs(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:4},transition:{delay:s*.03},className:z("w-full flex-1","flex-col"),children:[s>0&&r.jsx(RU,{$isSelected:!1}),r.jsx(kOe,{agentSuggestion:n,analyticsMetadata:e})]},n.prompt))})),kOe=t=>{"use forget";const e=W.c(14),{agentSuggestion:n}=t,s=Ti();let o;e[0]!==n.capability?(o=EOe(n.capability),e[0]=n.capability,e[1]=o):o=e[1];const a=o,i=$s();let l;e[2]!==n.prompt||e[3]!==s||e[4]!==i?(l=()=>{const m=Pt(s);m.focus(),_o(m,n.prompt),i(Pe.Agent)},e[2]=n.prompt,e[3]=s,e[4]=i,e[5]=l):l=e[5];const c=l;let d;e[6]!==a?(d=r.jsx("div",{className:"flex items-center justify-center opacity-70 transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:opacity-100",children:r.jsx(a,{className:"text-token-text-secondary group-hover:text-token-text-primary icon"})}),e[6]=a,e[7]=d):d=e[7];let u;e[8]!==n.title?(u=r.jsx("div",{className:"text-token-text-secondary group-hover:text-token-text-primary flex items-center pe-2 text-start text-sm",children:n.title}),e[8]=n.title,e[9]=u):u=e[9];let f;return e[10]!==c||e[11]!==d||e[12]!==u?(f=r.jsxs("div",{onClick:c,className:"bg-primary hover:bg-tertiary group flex w-full cursor-pointer items-center justify-start gap-2 rounded-lg px-2 py-3 text-start transition-colors duration-300 ease-in-out",children:[d,u]}),e[10]=c,e[11]=d,e[12]=u,e[13]=f):f=e[13],f},qk={action:bOe,research:vg,spreadsheet:vg,presentation:vg,default:vg},EOe=t=>{var e;return(e=qk[t])!=null?e:qk.default};function vst({clientThreadId:t,followups:e,categorySuggestions:n,actionSuggestions:s,lastMessageId:o,analyticsMetadata:a,isTatertotFollowupsEnabled:i}){const l=V(),c=es(l),d=zf.useIsEnabled(t)&&!c,{capabilitySuggestionsEnabled:u}=vOe(i),f=n&&n.length>0;return s&&s.length>0?r.jsx(wOe,{agentSuggestions:s,analyticsMetadata:a}):r.jsx(r.Fragment,{children:d&&(u?f&&r.jsx(yOe,{clientThreadId:t,lastMessageId:o,categorySuggestions:n,analyticsMetadata:a}):e.length>0&&r.jsx(TOe,{followups:e,analyticsMetadata:a}))})}function TOe({followups:t,analyticsMetadata:e}){return r.jsxs("div",{className:"group",children:[r.jsx("hr",{className:"bg-token-bg-tertiary mt-5 mb-5 opacity-70"}),r.jsx(PU,{followups:t,analyticsMetadata:e})]})}class bst extends Si()(()=>({isMultigenParagenVotingActive:!1})){setIsMultigenParagenVotingActive(e){this.setState({isMultigenParagenVotingActive:e})}static useIsMultigenParagenVotingActive(){return this.useState(e=>e.isMultigenParagenVotingActive)}}class OU extends Si()(()=>({selectedIndex:0})){setSelectedIndex(e){this.setState({selectedIndex:e})}static useSelectedIndex(){return this.useState(e=>e.selectedIndex)}}function Cst(t){"use forget";const e=W.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(OU.Provider,{store:MOe,children:n}),e[0]=n,e[1]=s):s=e[1],s}function MOe(){return new OU}const Sst=t=>A5(t).some(e=>{var n;return!!((n=e.metadata)!=null&&n.chatgpt_sdk)}),md=({icon:t,label:e,iconClassName:n,className:s,size:o="med",onClick:a,onSelect:i,onBeforeClick:l,selected:c=!1,disabled:d=!1,asMenuItem:u=!1,style:f,testId:m,trailing:g})=>{const p=u?K.Item:"button";return r.jsx(pt,{label:e,disabled:!e||u,triggerAs:null,children:r.jsx(p,{className:z(!u&&"text-token-text-secondary hover:bg-token-bg-secondary rounded-lg",!u&&c&&"bg-token-bg-tertiary",s),"aria-label":e,"aria-pressed":c,onClick:a,onSelect:i,onPointerEnter:l,onTouchStart:l,onFocus:l,disabled:d,style:f,"data-testid":m,label:u?e:void 0,icon:u?t:void 0,trailing:u?g:void 0,children:typeof t=="function"&&!u&&r.jsx("span",{className:z("flex items-center justify-center","touch:w-10 h-8 w-8"),children:r.jsx(t,{className:n!=null?n:o==="small"?"icon-sm":"icon"})})})})};async function AOe(t,e,n,{unprocessed:s=!1}={}){var c;const o=[],a=[],i={},l=new Map;for(const d of t.messages){if(FU(d)){const u=(c=d.metadata)==null?void 0:c.content_references,f=yo(d,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0});if(s)o.push(f);else{const{messageTextToClipboardContent:m}=await P(async()=>{const{messageTextToClipboardContent:p}=await import("./g78s6ea1fdv7ipue.js").then(h=>h.j);return{messageTextToClipboardContent:p}},__vite__mapDeps([56,10,1,11,13,14,15,16,17,18,19,20,57,21,22,23,58,59,60])),g=m(f,u);g["text/plain"]&&o.push(g["text/plain"]),g["text/html"]&&a.push(g["text/html"])}if(!s&&u)for(const m of u)m.type==="file"&&IOe(m)&&!l.has(m.id)&&l.set(m.id,m)}if(yq(d)){const u=mr.getImageAssetPointers(d);if(u.length>0){const f=u[0];try{const m=jt(n),{url:g}=await qd.fetch(e,{asset:f,conversationId:m!=null?m:void 0}),h=await(await fetch(g)).blob();["image/png","image/jpeg","image/webp"].includes(h.type)&&(i[h.type]=h)}catch(m){return Promise.reject()}}}}if(!s&&l.size>0){const d=Array.from(l.values()),u=d.map(jOe).filter(m=>!!m);if(u.length>0){const m=u.map((g,p)=>"".concat(p+1,". ").concat(g));o.push(["Medical References:",...m].join("\n"))}const f=d.map(NOe).filter(m=>!!m);f.length>0&&a.push("<section><p><strong>Medical References</strong></p><ol>".concat(f.join(""),"</ol></section>"))}return o.length>0&&(i["text/plain"]=o.join("\n\n")),a.length>0&&(i["text/html"]=a.join("\n\n")),i}function IOe(t){const e=t.medical_file_reference;return e!=null&&["journal_name","authors_display","publication_year","doi","journal_homepage_url"].some(n=>{const s=e==null?void 0:e[n];return s!=null&&String(s).trim()!==""&&String(s).toLowerCase()!=="none"})}function jOe(t){const e=DU(t);if(!e)return null;const{journalName:n,authorsDisplay:s,publicationYear:o,doi:a,url:i}=e,l=[];n&&l.push(n);const c=[];return s&&c.push(s),o&&c.push(o),c.length>0&&l.push(c.join(", ")),a&&l.push("DOI: ".concat(a)),i&&l.push("URL: ".concat(i)),l.join("  ")}function NOe(t){const e=DU(t);if(!e)return null;const{journalName:n,authorsDisplay:s,publicationYear:o,doi:a,url:i}=e,l=[];if(n&&l.push("<span>".concat(mu(n),"</span>")),s||o){const c=[];s&&c.push("<em>".concat(mu(s),"</em>")),o&&c.push("<span>".concat(mu(o),"</span>")),l.push(c.join(" "))}return a&&l.push("<span>DOI: ".concat(mu(a),"</span>")),i&&l.push("<span>URL: ".concat(mu(i),"</span>")),l.length===0?null:"<li>".concat(l.join("<br/>"),"</li>")}function DU(t){var n,s,o,a,i,l,c;const e=t.medical_file_reference;return!e||!e.journal_name&&!e.authors_display&&!e.publication_year&&!((n=e.doi)!=null?n:t.id)?null:{journalName:(s=e.journal_name)!=null?s:void 0,authorsDisplay:(o=e.authors_display)!=null?o:void 0,publicationYear:(a=e.publication_year)!=null?a:void 0,doi:(l=(i=e.doi)!=null?i:t.id)!=null?l:void 0,url:(c=t.cloud_doc_url)!=null?c:void 0}}function mu(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function FU(t){var e,n;return!((e=t.clientMetadata)!=null&&e.err)&&(t.author.role===Ke.Assistant||t.author.role===Ke.User)&&(t.author.role===Ke.User||t.recipient==="all")&&!((n=t.metadata)!=null&&n.reasoning_status)}const POe=R(()=>P(()=>import("./8yatsd42k1ox8n2w.js"),__vite__mapDeps([24,1])),{loading:t=>F(t)}),ROe=({turn:t,clientThreadId:e})=>{const n=dI(e),s=ne();function o(){Ll.logButtonClick(s1.EDIT_IN_CANVAS_MESSAGE);const a=LOe(t);n({textdocType:lr.DOCUMENT,content:a,createSource:mf.MESSAGE})}return r.jsx(md,{icon:POe,onClick:o,label:s.formatMessage({id:"EditInCanvas.tooltip",defaultMessage:"Edit in canvas"}),asMenuItem:!0})};function LOe(t){return t.messages.filter(e=>FU(e)&&e.author.role===Ke.Assistant).map(e=>yo(e,{shouldGetTextFromContentReferences:!0,shouldGetVisibleText:!1})).filter(Boolean).join("\n\n")}const OOe=R(()=>P(()=>import("./e4hxa0obef9ytuv2.js"),__vite__mapDeps([473,1])),{loading:t=>F(t)});function DOe({clientThreadId:t,lastMessage:e,asMenuItem:n}){const[s,o]=_.useState(!1),a=ne(),i=_.useCallback(()=>{const c=jt(t);if(!c)return;o(!0);const d="/branch/".concat(c,"/").concat(e.id);window.open(d,"_blank","noreferrer")},[t,e.id]),l=s?Yk.loading:Yk.branch;return r.jsx(md,{icon:s?ws:OOe,label:a.formatMessage(l),onClick:i,disabled:s,asMenuItem:n,onSelect:c=>{c.preventDefault()}})}const Yk=Se({branch:{id:"BranchTurnActionButton.branch",defaultMessage:"Branch in new chat"},loading:{id:"BranchTurnActionButton.loading",defaultMessage:"Loading"}}),FOe=R(()=>P(()=>import("./jp1bsz3poves5oxv.js"),__vite__mapDeps([200,1])),{loading:t=>F(t)}),BOe=R(()=>P(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([149,1])),{loading:t=>F(t)}),UOe=R(()=>P(()=>import("./kux43ylsu8hzp3nl.js"),__vite__mapDeps([150,1])),{loading:t=>F(t)}),BU=R(()=>P(()=>import("./ejbjaoduwxjhkz9f.js"),__vite__mapDeps([474,1,10,11])).then(t=>t.VoicePlayButton));function wst(t){"use forget";const e=W.c(24),{showPlayButton:n,showCanvasButton:s,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,messages:l,lastMessage:c,imageGenMessageId:d,turn:u,turnIndex:f,requestId:m,parentPromptId:g,showReportMessageButton:p,onReportMessage:h}=t,x=V(),v=ne();let y;e[0]!==v?(y=v.formatMessage({id:"e/27r7",defaultMessage:"More actions"}),e[0]=v,e[1]=y):y=e[1];const b=y;if(!tt(x)||!(o&&!!c||n&&!!c||s||a||p||!1))return null;let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx(BOe,{className:"icon"}),e[2]=S):S=e[2];let E;e[3]!==b?(E=r.jsx("button",{className:"text-token-text-secondary hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",onMouseOver:$Oe,"aria-label":b,children:S}),e[3]=b,e[4]=E):E=e[4];let k;e[5]!==a||e[6]!==i||e[7]!==d||e[8]!==c||e[9]!==l||e[10]!==h||e[11]!==g||e[12]!==m||e[13]!==o||e[14]!==s||e[15]!==n||e[16]!==p||e[17]!==u||e[18]!==f?(k=r.jsx(VOe,{showPlayButton:n,showCanvasButton:s,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,messages:l,lastMessage:c,imageGenMessageId:d,turn:u,turnIndex:f,requestId:m,parentPromptId:g,showReportMessageButton:p,onReportMessage:h}),e[5]=a,e[6]=i,e[7]=d,e[8]=c,e[9]=l,e[10]=h,e[11]=g,e[12]=m,e[13]=o,e[14]=s,e[15]=n,e[16]=p,e[17]=u,e[18]=f,e[19]=k):k=e[19];let T;return e[20]!==b||e[21]!==E||e[22]!==k?(T=r.jsx(kr,{triggerButton:E,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,tooltip:b,children:k}),e[20]=b,e[21]=E,e[22]=k,e[23]=T):T=e[23],T}function $Oe(){BU.prefetch()}function VOe(t){"use forget";const e=W.c(29),{showPlayButton:n,showCanvasButton:s,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,lastMessage:l,turn:c,requestId:d,showReportMessageButton:u,onReportMessage:f}=t,m=ne();let g;e[0]!==i||e[1]!==l||e[2]!==o?(g=o&&l&&r.jsx(DOe,{clientThreadId:i,lastMessage:l,asMenuItem:!0}),e[0]=i,e[1]=l,e[2]=o,e[3]=g):g=e[3];let p;e[4]!==i||e[5]!==l||e[6]!==n?(p=n&&l&&r.jsx(BU,{conversationId:i,message:l,asMenuItem:!0}),e[4]=i,e[5]=l,e[6]=n,e[7]=p):p=e[7];let h;e[8]!==i||e[9]!==s||e[10]!==c?(h=s&&r.jsx(ROe,{clientThreadId:i,turn:c}),e[8]=i,e[9]=s,e[10]=c,e[11]=h):h=e[11];let x;e[12]!==a||e[13]!==m?(x=a&&r.jsx(Mb,{children:C=>{const{openScheduleModal:S,isScheduled:E,isSchedulable:k}=C;return!E&&k?r.jsx(md,{icon:UOe,label:m.formatMessage({id:"l12ujd",defaultMessage:"Schedule"}),onClick:S,asMenuItem:!0}):null}}),e[12]=a,e[13]=m,e[14]=x):x=e[14];let v;e[15]!==m||e[16]!==f||e[17]!==u?(v=u&&f&&r.jsx(md,{icon:FOe,label:m.formatMessage({id:"ConversationTurn.reportMessageMenuItem",defaultMessage:"Report message"}),asMenuItem:!0,onSelect:()=>f()}),e[15]=m,e[16]=f,e[17]=u,e[18]=v):v=e[18];let y;e[19]!==l||e[20]!==d?(y=!1,e[19]=l,e[20]=d,e[21]=y):y=e[21];let b;return e[22]!==g||e[23]!==p||e[24]!==h||e[25]!==x||e[26]!==v||e[27]!==y?(b=r.jsxs(r.Fragment,{children:[g,p,h,x,v,y]}),e[22]=g,e[23]=p,e[24]=h,e[25]=x,e[26]=v,e[27]=y,e[28]=b):b=e[28],b}const HOe=R(()=>P(()=>import("./d9d46aun6hvzsagm.js"),__vite__mapDeps([284,1])),{loading:t=>F(t)}),GOe=R(()=>P(()=>import("./dwgk7r4s1fwn35jq.js"),__vite__mapDeps([142,1])),{loading:t=>F(t)}),WOe=R(()=>P(()=>import("./9paxni9f8n7suc5d.js"),__vite__mapDeps([475,1])),{loading:t=>F(t)}),zOe=R(()=>P(()=>import("./i0w6h8cy9aqse20k.js"),__vite__mapDeps([143,1])),{loading:t=>F(t)});function kst({currentPage:t,length:e,onChangeIndex:n}){const s=a=>{n(Bb(t+a,0,e-1))},o=ne();return r.jsxs("div",{className:z("text-token-text-secondary flex items-center justify-center"),children:[r.jsx("button",{onClick:()=>s(-1),disabled:t===0,className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent","aria-label":o.formatMessage({id:"XwENI/",defaultMessage:"Previous response"}),children:r.jsx(WOe,{className:"icon"})}),r.jsx("div",{className:"px-0.5 text-sm font-semibold tabular-nums",children:"".concat(t+1,"/").concat(e)}),r.jsx("button",{onClick:()=>s(1),disabled:t===e-1,"aria-label":o.formatMessage({id:"V8RFHE",defaultMessage:"Next response"}),className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent",children:r.jsx(HOe,{className:"icon"})})]})}function Est({currentPage:t,onChangeIndex:e,length:n}){const s=o=>{e(Bb(t+o,0,n-1))};return n===0?null:r.jsxs(qOe,{children:[r.jsx(Zk,{onClick:()=>s(-1),disabled:t===0,children:r.jsx(zOe,{className:"icon-sm"})}),r.jsx(YOe,{children:"".concat(t+1,"/").concat(n)}),r.jsx(Zk,{onClick:()=>s(1),disabled:t===n-1,children:r.jsx(GOe,{className:"icon-sm"})})]})}var AE;const qOe=ft.div(AE||(AE=ct(["text-sm inline-flex border rounded-full border-token-border-medium overflow-hidden"])));var IE;const Zk=ft.button(IE||(IE=ct(["text-token-text-secondary disabled:text-token-border-medium w-8 flex items-center justify-center hover:bg-token-main-surface-tertiary"])));var jE;const YOe=ft.span(jE||(jE=ct(["text-token-text-tertiary px-2 flex items-center font-mono tracking-widest py-1.5"])));function UU(t=!1){const e=Cb(ss.WorkspaceShareLinks),n=V(),s=ze(n,"2382399797",{disableExposureLog:t}),o=re(()=>bq(p3(n)));return _.useCallback(()=>e&&!o&&s.get("is_enabled",!1),[o,s,e])}function ZOe(t){return ze(t,"3243846918").get("enable_message_slice",!1)}function Tst(t){const e=Es(),n=UU(),s=V(),{imageGenMessages:o,canvasMessage:a,gizmoMessage:i,hasErrorInTurn:l,isIncomplete:c}=_.useMemo(()=>{const f=[];let m,g,p=!1,h=!1;return t.forEach(x=>{var y,b;qh(x)&&f.push(x),vR(x)&&(m=x),(y=x.metadata)!=null&&y.gizmo_id&&(g=x);const v=(b=x.clientMetadata)==null?void 0:b.errType;v!=null&&v!=="info"&&(p=!0),vq(x)&&(h=!0)}),{imageGenMessages:f,canvasMessage:m,gizmoMessage:g,hasErrorInTurn:p,isIncomplete:h}},[t]),d=!e&&!i&&o.length>0&&o.every(f=>f.status==="finished_successfully")&&n(),u=!e&&o.length===0&&!a&&!i&&ZOe(s);return{enableImageGenPostSharing:d,enableMessageSliceSharing:u,imageGenMessages:o,canvasMessage:a,hasErrorInTurn:l,isIncomplete:c}}function $U(t=!1){const e=Es(),n=UU(t);return _.useMemo(()=>!e&&n(),[e,n])}const KOe=R(()=>P(()=>import("./fzp2j1cxnl22o1rn.js"),__vite__mapDeps([459,1])),{loading:t=>F(t)}),Mst=t=>{"use forget";const e=W.c(10),{onShowHidden:n}=t,s=ne();let o;e[0]!==s?(o=s.formatMessage({id:"NaTncQ",defaultMessage:"Library menu"}),e[0]=s,e[1]=o):o=e[1];let a;e[2]!==o?(a=r.jsx(NP,{"aria-label":o}),e[2]=o,e[3]=a):a=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(KOe,{className:"h-4 w-4"}),r.jsx(j,{id:"H788Jv",defaultMessage:"Show hidden images"})]}),e[4]=i):i=e[4];let l;e[5]!==n?(l=r.jsx(K.Item,{onClick:n,children:i}),e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==a||e[8]!==l?(c=r.jsx(kr,{triggerButton:a,contentAlign:"end",children:l}),e[7]=a,e[8]=l,e[9]=c):c=e[9],c};function QOe({className:t,children:e,position:n="center",size:s,removePopoverStyling:o=!1,shadow:a="normal"}){const i=Cq(),l=ne(),c=Math.random()*40-20;return _.useEffect(()=>{i.start({x:0,y:0,rotate:0,opacity:1,transition:{type:"spring",duration:.6,bounce:.15}})},[i]),r.jsx(Xe.div,{initial:{x:0,y:"100%",rotate:0,opacity:1},animate:i,exit:{x:0,y:"100%",rotate:c,opacity:1},transition:{type:"spring",duration:.6,bounce:.15},className:z("z-50 h-full w-full overflow-y-auto",s!=="fullscreen"&&"grid grid-cols-[10px_1fr_10px]",s!=="fullscreen"&&n==="center"&&"grid-rows-[minmax(10px,1fr)_auto_minmax(10px,1fr)] md:grid-rows-[minmax(20px,1fr)_auto_minmax(20px,1fr)]",s!=="fullscreen"&&n==="bottom"&&"grid-rows-[minmax(10px,1fr)_auto_10px] md:grid-rows-[minmax(20px,1fr)_auto_20px]"),children:r.jsx(yd,{className:z(!o&&"popover","bg-token-sidebar-surface relative start-1/2 col-auto col-start-2 row-auto row-start-2 h-full w-full min-w-0 gap-4 p-4 text-start ltr:-translate-x-1/2 rtl:translate-x-1/2 dark:bg-[#171717]",s!=="fullscreen"&&"rounded-[36px]",a==="normal"&&"shadow-[0_32px_48px_rgba(0,0,0,0.175),_0_0_1px_rgba(0,0,0,0.2)] dark:shadow-[0_32px_48px_rgba(0,0,0,0.175),_0_0_1px_rgba(255,255,255,0.4)]",t),"aria-description":l.formatMessage({id:"slide-up-modal.share-sheet.description",defaultMessage:"Share sheet"}),"aria-describedby":"",children:e})})}function JOe({isOpen:t,onClose:e,children:n,shouldIgnoreClickOutside:s=!1,className:o}){var a;return r.jsx(Tl,{open:t,onOpenChange:i=>{s||i===!1&&e(!1)},children:r.jsx(Ml,{container:(a=J8())==null?void 0:a.document.body,children:r.jsx("div",{className:z("absolute inset-0",o),children:n})})})}function XOe({className:t,children:e,showBackground:n=!0}){const s=Xo(),o=n?s?"rgba(0, 0, 0, 0.8)":"rgba(249,249,249,0.8)":"rgba(0, 0, 0, 0)";return r.jsx(jf,{asChild:!0,children:r.jsx(Xe.div,{initial:{backdropFilter:"blur(0px)",backgroundColor:s?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 0)"},animate:{backdropFilter:n?"blur(4px)":"blur(0px)",backgroundColor:o},exit:{backdropFilter:"blur(0px)",backgroundColor:s?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 0)"},className:z("fixed inset-0 z-50",t),children:e})})}function eDe({title:t,description:e,icon:n,type:s}){return r.jsxs("div",{className:"flex max-w-full min-w-0 items-center",children:[r.jsx(nDe,{icon:n,type:s}),r.jsxs("div",{className:"flex max-w-full min-w-0 grow flex-col gap-1",children:[t!=null&&r.jsx(Xy,{className:"text-token-text-primary text-3xl leading-6 font-semibold tracking-tight max-sm:text-xl",children:t}),e!=null&&r.jsx(e3,{className:"text-token-text-tertiary text-sm",children:e})]})]})}function tDe({title:t,accessory:e,description:n,withSeparator:s=!0,icon:o,type:a,closeButton:i,textCenter:l}){return!t&&!n?null:r.jsxs(sDe,{$hasSeparator:s,children:[r.jsx("div",{className:z("flex max-w-full",l&&"flex-1 justify-center text-center"),children:r.jsx(eDe,{title:t,description:n,icon:o,type:a})}),r.jsxs("div",{className:"flex items-center gap-5",children:[e,i!=null&&r.jsx(vd,{asChild:!0,className:"sm:mt-0",children:i})]})]})}const nDe=({type:t,icon:e})=>e==null?null:r.jsx("div",{className:z("me-4 flex h-12 w-12 shrink-0 items-center justify-center rounded-full sm:h-10 sm:w-10",t==="danger"&&"bg-red-100",t==="warning"&&"bg-yellow-100",t==="success"&&"bg-green-100"),children:r.jsx(e,{className:z("icon-lg",t==="danger"&&"text-red-600",t==="warning"&&"text-yellow-700",t==="success"&&"text-green-700"),"aria-hidden":"true"})});var NE;const sDe=ft.div(NE||(NE=ct(["px-4 pb-2 sm:p-6 flex items-center justify-between ",""])),({$hasSeparator:t})=>t&&"border-b border-black/10 dark:border-white/10"),k2={Root:JOe,Overlay:XOe,Content:QOe,Header:tDe},oDe=R(()=>P(()=>import("./okzsq1aji2s9p1ex.js"),__vite__mapDeps([187,1])),{loading:t=>F(t)});function aDe(t){"use forget";const e=W.c(47),{prompt:n,mode:s,onClose:o,onTryIt:a}=t,i=s===void 0?"sharer":s,l=ne(),c=It(),d=$t(),[u,f]=_.useState(null),[m,g]=_.useState(!0);let p;e[0]!==l||e[1]!==d?(p=()=>{d.danger(l.formatMessage({id:"O6MPEA",defaultMessage:"Failed to create sharing link"}))},e[0]=l,e[1]=d,e[2]=p):p=e[2];let h;e[3]!==c?(h=()=>{c.invalidateQueries({queryKey:["prompt-templates"],exact:!1})},e[3]=c,e[4]=h):h=e[4];let x;e[5]!==p||e[6]!==h?(x={share:!0,onError:p,onSuccess:h},e[5]=p,e[6]=h,e[7]=x):x=e[7];const{mutateAsync:v,isPending:y}=Sq(x);let b;e[8]!==l||e[9]!==u||e[10]!==d?(b=async()=>{if(u)try{await Yo("".concat(window.location.origin,"/?share_prompt=").concat(u)),d.success(l.formatMessage({id:"WpnjbL",defaultMessage:"Link copied to clipboard"}))}catch($){d.danger(l.formatMessage({id:"gCy731",defaultMessage:"Failed to copy link"}))}},e[8]=l,e[9]=u,e[10]=d,e[11]=b):b=e[11];const C=b;let S;e[12]!==l||e[13]!==d?(S=()=>{d.danger(l.formatMessage({id:"xdHQb2",defaultMessage:"Failed to add to My library"}))},e[12]=l,e[13]=d,e[14]=S):S=e[14];let E;e[15]!==l||e[16]!==c||e[17]!==d?(E=()=>{c.invalidateQueries({queryKey:["prompt-templates"],exact:!1}),d.success(l.formatMessage({id:"b4SFiB",defaultMessage:"Success"}))},e[15]=l,e[16]=c,e[17]=d,e[18]=E):E=e[18];let k;e[19]!==S||e[20]!==E?(k={onError:S,onSuccess:E},e[19]=S,e[20]=E,e[21]=k):k=e[21];const{mutateAsync:T}=wq(k);let M;e[22]!==n||e[23]!==T?(M=async()=>{n&&await T({promptId:String(n.id),relationship:"subscribed"})},e[22]=n,e[23]=T,e[24]=M):M=e[24];const A=M;let I,N;if(e[25]!==v||e[26]!==i||e[27]!==n||e[28]!==u||e[29]!==m?(I=()=>{m&&!u&&n&&i==="sharer"&&v(n.id).then($=>{var G,Z,Q,q,Y,te;const{shared_id:H}=$;f(H),B.logEventWithStatsig("chatgpt_web_prompt_shared","chatgpt_web_prompt_shared",{hint:(G=n.system_hint)!=null?G:"none",hasSources:((Q=(Z=n.sources)==null?void 0:Z.length)!=null?Q:0)>0,sources:((q=n.sources)!=null?q:[]).join(","),sourceCount:(te=(Y=n.sources)==null?void 0:Y.length)!=null?te:0})})},N=[m,u,n,v,i],e[25]=v,e[26]=i,e[27]=n,e[28]=u,e[29]=m,e[30]=I,e[31]=N):(I=e[30],N=e[31]),_.useEffect(I,N),!n){let $;return e[32]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(ws,{}),e[32]=$):$=e[32],$}let L;e[33]!==o?(L=()=>o(!1),e[33]=o,e[34]=L):L=e[34];let O;e[35]!==y||e[36]!==i||e[37]!==C||e[38]!==A||e[39]!==a||e[40]!==n||e[41]!==u||e[42]!==m?(O=m&&r.jsx(k2.Root,{isOpen:!0,onClose:()=>{g(!1)},className:"max-w-[640px]",children:r.jsx(k2.Overlay,{showBackground:!0,children:r.jsx(k2.Content,{size:"normal",position:"center",className:"flex max-w-[640px] flex-col p-6 focus:outline-hidden",removePopoverStyling:!1,shadow:"normal",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"border-token-border-secondary flex gap-2 border-b-1 pb-4",children:[r.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[r.jsx("div",{className:"text-token-text-primary text-3xl font-bold max-sm:text-xl",children:n.name}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:n.description})]}),r.jsx(xn,{onClick:()=>g(!1),className:"end-0 top-0 z-10 px-1.5 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"})]}),r.jsxs("div",{className:"outline-token-border-light relative flex w-full flex-col justify-center gap-2 overflow-hidden rounded-xl shadow-sm outline outline-1",children:[r.jsx("div",{className:"text-token-text-primary p-4 pb-20 text-sm",children:n.prompt}),r.jsx("div",{className:"from-token-bg-primary absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent"}),r.jsx("div",{className:"absolute end-5 bottom-5 z-10 inline-flex flex-shrink-0 items-end justify-end",children:r.jsx(tU,{className:"inline h-4 w-24 text-end"})})]}),r.jsx("div",{className:"flex flex-row justify-center gap-4",children:i==="sharer"?r.jsxs("button",{disabled:y||!u,onClick:()=>{C==null||C()},className:"relative flex flex-col gap-y-4 disabled:opacity-50 max-sm:gap-y-2",children:[r.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full shadow-lg max-sm:h-12 max-sm:w-12 max-sm:shadow-md dark:shadow-md",children:r.jsx("div",{className:"pointer-events-none flex h-8 w-8 items-center justify-center max-sm:h-6 max-sm:w-6",children:y||!u?r.jsx(ws,{className:"h-4 w-4"}):r.jsx(oDe,{})})}),r.jsx("div",{className:"w-full text-center text-xs",children:r.jsx(j,{id:"DFXg8z",defaultMessage:"Copy link"})})]}):r.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[r.jsx(ye,{color:"secondary",disabled:n.relationship!==null,onClick:()=>{A()},children:n.relationship==null?r.jsx(j,{id:"nfx0dD",defaultMessage:"Save to library"}):r.jsx(j,{id:"3Fx9p6",defaultMessage:"Already saved"})}),r.jsx(ye,{onClick:()=>{var $,H,G,Z,Q,q;g(!1),B.logEventWithStatsig("chatgpt_web_prompt_used","chatgpt_web_prompt_used",{referer:"shared",hint:($=n.system_hint)!=null?$:"none",sources:((H=n.sources)!=null?H:[]).join(","),hasSources:((Z=(G=n.sources)==null?void 0:G.length)!=null?Z:0)>0,sourceCount:(q=(Q=n.sources)==null?void 0:Q.length)!=null?q:0}),a==null||a(n)},children:r.jsx(j,{id:"D+lWJu",defaultMessage:"Try it out"})})]})}),r.jsx("div",{className:"text-token-text-tertiary text-center text-sm sm:mt-2",children:r.jsx(j,{id:"I8F6LL",defaultMessage:"The share links are visible to workspace members only."})})]})})})}),e[35]=y,e[36]=i,e[37]=C,e[38]=A,e[39]=a,e[40]=n,e[41]=u,e[42]=m,e[43]=O):O=e[43];let D;return e[44]!==L||e[45]!==O?(D=r.jsx(fn,{onExitComplete:L,children:O}),e[44]=L,e[45]=O,e[46]=D):D=e[46],D}const rDe=Object.freeze(Object.defineProperty({__proto__:null,PromptSharingModal:aDe},Symbol.toStringTag,{value:"Module"})),iDe=R(()=>P(()=>import("./h6662v3to5g8p21c.js"),__vite__mapDeps([361,1])),{loading:t=>F(t)}),lDe=R(()=>P(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([145,1])),{loading:t=>F(t)}),cDe=R(()=>P(()=>import("./kux43ylsu8hzp3nl.js"),__vite__mapDeps([150,1])),{loading:t=>F(t)}),x4=({modelSwitcherDeny:t,value:e,label:n,subtitle:s,icon:o,onMouseEnter:a,onMouseLeave:i,onSelect:l,messageModelSlug:c,shouldShowUpsell:d=!1,className:u,includeRegenerate:f=!1,clientThreadId:m,isContextualRetryMenu:g})=>{const p=V(),h=st(p),x=jb({clientThreadId:m}),v=bP({modelSlug:e,modelSwitcherDenialsBySlug:x}),y=!v&&!d,b=at(),C=S=>{var E;if(!d){l==null||l(S);return}B.logEvent("Account Pay: Open Payment from Message Model Picker"),B.logRateLimitGetPlusButtonClicked({type:Df.RATE_LIMIT,location:"message_model_switcher_dropdown",plan_type:(E=h==null?void 0:h.planType)!=null?E:"unknown",is_hard_block:!1,hard_block_reason:"",is_new_conversation:!1}),pn(b,"Message model switcher dropdown")};return r.jsx(pt,{label:t&&r.jsx(vP,{modelSwitcherDeny:t}),children:r.jsx(K.Item,{onSelect:C,onMouseEnter:()=>v&&(a==null?void 0:a()),onMouseLeave:()=>v&&(i==null?void 0:i()),disabled:y,className:u!=null?u:g?void 0:"radix-disabled:pointer-events-auto radix-disabled:cursor-not-allowed radix-disabled:hover:bg-transparent",icon:g?o:void 0,trailing:g&&d?r.jsx(Kk,{}):void 0,label:g?n:void 0,secondary:g?s:void 0,children:!g&&r.jsxs("span",{className:"flex w-full items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex w-full items-center gap-3",children:[o||null,r.jsxs("div",{children:[r.jsx("div",{children:n}),r.jsx("div",{className:z({"text-token-text-secondary text-sm":!y},{"text-token-text-quaternary text-sm":y}),children:s})]})]}),d?r.jsx(Kk,{}):r.jsx(dDe,{messageModelSlug:c,modelSwitcherDeny:t,optionModelSlug:e,includeRegenerate:f})]})})})},dDe=({modelSwitcherDeny:t,includeRegenerate:e=!0})=>{let n=null;if(t)switch(t.reason){case Df.RATE_LIMIT:n=cDe;break;default:n=lDe;break}return t?r.jsx(n,{className:"icon"}):!!e&&r.jsx(iDe,{className:"icon text-token-text-tertiary hidden"})};function Kk(){const t=V();return r.jsx(ye,{color:"secondary",size:"small",children:r.jsx(j,w({},Kf(t)))})}const uDe=R(()=>P(()=>import("./nzc19yp45z5gjstv.js"),__vite__mapDeps([49,1])),{loading:t=>F(t)}),fDe=R(()=>P(()=>Promise.resolve().then(()=>Ir),void 0),{loading:t=>F(t)}),mDe=R(()=>P(()=>import("./zqv59oidvge8f4ro.js"),__vite__mapDeps([476,1])),{loading:t=>F(t)}),y4="rounded-lg radix-disabled:pointer-events-auto radix-disabled:cursor-not-allowed",v4=z("icon-sm","order-10 ms-auto text-token-text-tertiary icon");function VU(t,e){const{modelSwitcherDeny:n,subscriptionLevel:s}=t;return!!n&&n.reason===Df.RATE_LIMIT&&s===ex.PLUS&&!e}function gDe({messageModelEnabledTools:t,message:e,intl:n}){const s=t.includes(Pe.Search),o=Cee(e);return[{key:"use-search",extraStreamParams:{forceUseSearch:!0},label:n.formatMessage({id:"eTV6j1",defaultMessage:"Search the web"}),icon:fDe,condition:s&&!o,eventName:"chatgpt_regenerate_with_search_button_clicked"},{key:"use-no-search",extraStreamParams:{forceUseSearch:!1},label:n.formatMessage({id:"k/SdXa",defaultMessage:"Don't search the web"}),icon:mDe,condition:s&&o,eventName:"chatgpt_regenerate_without_search_button_clicked"}]}function pDe({clientThreadId:t,message:e,intl:n}){const s=he.isReasoningResponseMessage(mt(t),e.id);return[{key:"use-reason",extraStreamParams:{forceUseReason:!0},label:n.formatMessage({id:"4VX35n",defaultMessage:"Think longer"}),icon:uDe,condition:!s,eventName:"chatgpt_regenerate_with_reason_button_clicked"}]}const hDe=R(()=>P(()=>import("./h6662v3to5g8p21c.js"),__vite__mapDeps([361,1])),{loading:t=>F(t)});function E2(t){"use forget";var v;const e=W.c(24),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:a,showContextualRetry:i,hasPlusFeatures:l,subcategory:c,messageModelSlug:d}=t;let u,f;e[0]!==a?(v=a,{value:f}=v,u=we(v,["value"]),e[0]=a,e[1]=u,e[2]=f):(u=e[1],f=e[2]);let m;e[3]!==n||e[4]!==s||e[5]!==o||e[6]!==f?(m=y=>{qe.logEvent("chatgpt_regenerate_switch_model_button_clicked",f,w({requestedModelId:f},Tn({clientThreadId:n,messageId:s}))),o({sourceEvent:y,requestedModelId:f})},e[3]=n,e[4]=s,e[5]=o,e[6]=f,e[7]=m):m=e[7];let g;e[8]!==l||e[9]!==a?(g=VU(a,l),e[8]=l,e[9]=a,e[10]=g):g=e[10];const p=i?void 0:y4;let h;e[11]!==i||e[12]!==c?(h=!i&&!c?r.jsx("span",{className:v4}):void 0,e[11]=i,e[12]=c,e[13]=h):h=e[13];let x;return e[14]!==n||e[15]!==d||e[16]!==u||e[17]!==i||e[18]!==m||e[19]!==g||e[20]!==p||e[21]!==h||e[22]!==f?(x=r.jsx(x4,U(w({value:f,onSelect:m,messageModelSlug:d,shouldShowUpsell:g,className:p},u),{icon:h,clientThreadId:n,isContextualRetryMenu:i})),e[14]=n,e[15]=d,e[16]=u,e[17]=i,e[18]=m,e[19]=g,e[20]=p,e[21]=h,e[22]=f,e[23]=x):x=e[23],x}function HU(t){"use forget";const e=W.c(21),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:a,showContextualRetry:i,messageModelSlug:l,parentPrompt:c}=t,d=ne(),u=V(),f=a.value;let m;e[0]!==n||e[1]!==u||e[2]!==s||e[3]!==a.value||e[4]!==o||e[5]!==(c==null?void 0:c.id)?(m=b=>{var C;B.logEventWithStatsig("chatgpt_regenerate_try_again_button_clicked","chatgpt_regenerate_try_again_button_clicked",w({requestedModelId:a.value},Tn({clientThreadId:n,messageId:s}))),ve(u,"3247947701")&&_I({retry_option:"try_again",parent_prompt_id:(C=c==null?void 0:c.id)!=null?C:""},jt(n),a.value),o({sourceEvent:b,requestedModelId:a.value})},e[0]=n,e[1]=u,e[2]=s,e[3]=a.value,e[4]=o,e[5]=c==null?void 0:c.id,e[6]=m):m=e[6];const g=i?void 0:y4;let p;e[7]!==d?(p=d.formatMessage({id:"VbsBGW",defaultMessage:"Try again"}),e[7]=d,e[8]=p):p=e[8];const h=!i&&a.label,x=i?"icon":v4;let v;e[9]!==x?(v=r.jsx(hDe,{className:x}),e[9]=x,e[10]=v):v=e[10];let y;return e[11]!==n||e[12]!==l||e[13]!==a||e[14]!==i||e[15]!==m||e[16]!==g||e[17]!==p||e[18]!==h||e[19]!==v?(y=r.jsx(x4,U(w({onSelect:m,messageModelSlug:l,className:g},a),{label:p,subtitle:h,icon:v,clientThreadId:n,isContextualRetryMenu:i,includeRegenerate:!0}),f),e[11]=n,e[12]=l,e[13]=a,e[14]=i,e[15]=m,e[16]=g,e[17]=p,e[18]=h,e[19]=v,e[20]=y):y=e[20],y}function Qk(t){"use forget";const e=W.c(15),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:a,systemHintRetryOptions:i,showContextualRetry:l,messageModelSlug:c}=t;let d;if(e[0]!==n||e[1]!==s||e[2]!==c||e[3]!==a||e[4]!==o||e[5]!==l||e[6]!==i){let u;e[8]!==n||e[9]!==s||e[10]!==c||e[11]!==a||e[12]!==o||e[13]!==l?(u=f=>{const m=f.icon;return r.jsx(x4,U(w({onSelect:g=>{B.logEventWithStatsig(f.eventName,f.eventName,w({requestedModelId:a.value},Tn({clientThreadId:n,messageId:s}))),o({sourceEvent:g,requestedModelId:a.value,extraStreamParams:f.extraStreamParams})},messageModelSlug:c,className:l?void 0:y4},a),{label:f.label,subtitle:"",icon:r.jsx(m,{className:l?"icon":v4}),clientThreadId:n,isContextualRetryMenu:l}),f.key)},e[8]=n,e[9]=s,e[10]=c,e[11]=a,e[12]=o,e[13]=l,e[14]=u):u=e[14],d=i.filter(_De).map(u),e[0]=n,e[1]=s,e[2]=c,e[3]=a,e[4]=o,e[5]=l,e[6]=i,e[7]=d}else d=e[7];return d}function _De(t){return t.condition}const xDe=R(()=>P(()=>import("./dl8u8okezr3qqv1l.js"),__vite__mapDeps([477,1])),{loading:t=>F(t)}),yDe=R(()=>P(()=>Promise.resolve().then(()=>Q9e),void 0),{loading:t=>F(t)}),vDe=R(()=>P(()=>import("./jajplg1udnmi8978.js"),__vite__mapDeps([478,1])),{loading:t=>F(t)}),Jk="freeform_feedback",Xk=Se({retryWithFeedback:{id:"HW5O9Q",defaultMessage:"Ask to change response"},makeLonger:{id:"s7cVzc",defaultMessage:"Add details"},makeShorter:{id:"uWyhEy",defaultMessage:"More concise"}}),bDe=()=>[{key:"make_longer",messageKey:"makeLonger",prompt:"Please make this response longer and more detailed.",icon:r.jsx(vDe,{})},{key:"make_shorter",messageKey:"makeShorter",prompt:"Please make this response more concise and brief.",icon:r.jsx(xDe,{})}];function CDe({message:t,canRegenerateResponse:e,onModelSelect:n,clientThreadId:s,retryOption:o,contentRef:a,parentPrompt:i}){var y;const l=ne(),c=V(),[d,u]=_.useState(""),f=_.useRef(null),m=rs(c,"3586972587").get("prompt",""),g=bDe(),p=(y=t.metadata)==null?void 0:y.model_slug;_.useEffect(()=>{requestAnimationFrame(()=>{var b;(b=f.current)==null||b.focus()})},[]),_.useEffect(()=>{const b=a==null?void 0:a.current;if(!b)return;function C(S){f.current&&document.activeElement!==f.current&&(V8(S)||S.key==="Enter"||S.ctrlKey||S.metaKey||S.key.length!==1&&!H8(S)||(S.stopPropagation(),f.current.focus()))}return b.addEventListener("keydown",C),()=>{b.removeEventListener("keydown",C)}},[]);const h=_.useCallback((b,C,S,E,k)=>{var M;ve(k,"3247947701")&&_I({retry_option:E,parent_prompt_id:(M=i==null?void 0:i.id)!=null?M:"",freeform_feedback:E===Jk?C:void 0},jt(s),p);const T="".concat(b).concat(C);n({sourceEvent:S,requestedModelId:p||"",appendMessages:[is(T,{is_visually_hidden_from_conversation:!0,is_contextual_retry_user_message:!0})]})},[n,p,s,i==null?void 0:i.id]),x=b=>{d.trim()&&(h(m,d.trim(),b,Jk,c),u(""))},v=(b,C)=>{const S="".concat(b.prompt);h(m,S,C,b.key,c)};return e?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(K.InputItem,{selectAllOnFocus:!1,ref:f,value:d,onChange:b=>u(b.target.value),placeholder:l.formatMessage(Xk.retryWithFeedback),onSubmit:x,border:!1,className:"min-w-[210px] ps-2.5 pe-9",name:"contextual-retry-dropdown-input"}),r.jsx("div",{className:"absolute end-4 top-1/2 flex -translate-y-1/2 items-center justify-center",children:r.jsx("button",{className:"icon composer-submit-btn",disabled:d.trim()==="",onClick:x,"aria-label":l.formatMessage({defaultMessage:"Submit",id:"aria.submit"}),"data-in-menu":nv(!0),children:r.jsx(yDe,{className:"icon-xs"})})})]}),r.jsx(K.Separator,{}),!!o&&r.jsx(HU,{clientThreadId:s,messageId:t.id,onModelSelect:n,modelRetryOption:o,messageModelSlug:p,parentPrompt:i,showContextualRetry:!0}),g.map(b=>r.jsx(K.Item,{onSelect:C=>v(b,C),label:l.formatMessage(Xk[b.messageKey]),icon:b.icon},b.key))]}):null}const SDe=({clientThreadId:t,message:e})=>{var m,g,p,h,x,v,y,b;const n=V(),s=xt(n,t),o=re(()=>ea(s)),a=jb({clientThreadId:t}),i=[];for(const C of(m=o.categories)!=null?m:[]){if(kde(C))continue;const{defaultModel:S,label:E,tagline:k,subscriptionLevel:T,subcategory:M}=C,A=(p=(g=a[S])==null?void 0:g.regenerate)==null?void 0:p[0];i.push({label:E,value:S,subtitle:k,modelSwitcherDeny:A,subscriptionLevel:T,subcategory:M})}const l=(h=e.metadata)==null?void 0:h.model_slug,c=NT(o,l),d=(c==null?void 0:c.enabledTools)||[],u=re(()=>yn(s));let f;return c&&l?f={label:c==null?void 0:c.title,value:l,subtitle:c==null?void 0:c.description,subscriptionLevel:ex.FREE,modelSwitcherDeny:l?(v=(x=a[l])==null?void 0:x.regenerate)==null?void 0:v[0]:void 0}:u&&(f={label:u.title,value:u.id,subtitle:u.description,subscriptionLevel:ex.FREE,modelSwitcherDeny:(b=(y=a[u.id])==null?void 0:y.regenerate)==null?void 0:b[0]}),{modelOptions:i,messageModelConfig:c,messageModelEnabledTools:d,defaultModelSlug:lM(o),modelPickerVersion:o.modelPickerVersion,fallbackModelOption:f}};var T2,e9;function wDe(){if(e9)return T2;e9=1;var t=kq(),e=t(function(n,s,o){n[o?0:1].push(s)},function(){return[[],[]]});return T2=e,T2}var kDe=wDe();const EDe=Zn(kDe),t9=R(()=>P(()=>import("./imwr51rn5ig1qbbo.js"),__vite__mapDeps([479,1])),{loading:t=>F(t)}),TDe=R(()=>P(()=>import("./h6662v3to5g8p21c.js"),__vite__mapDeps([361,1])),{loading:t=>F(t)}),MDe=R(()=>P(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([145,1])),{loading:t=>F(t)}),ADe=R(()=>P(()=>import("./9paxni9f8n7suc5d.js"),__vite__mapDeps([475,1])),{loading:t=>F(t)}),IDe=R(()=>P(()=>Promise.resolve().then(()=>jr),void 0),{loading:t=>F(t)});function jDe(t){"use forget";var In,bt,Nt,ls,oo,Ni;const e=W.c(78),{className:n,clientThreadId:s,message:o,onModelSelect:a,canRegenerateResponse:i,parentPrompt:l,size:c}=t,d=c===void 0?"med":c,[u,f]=_.useState(!1),m=V(),g=(In=o.metadata)==null?void 0:In.model_slug,p=o.id,h=ne(),x=st(m),v=x==null?void 0:x.planType,y=_.useRef(null),b=_.useRef(null);Ai();const[C,S]=_.useState(!1);let E;e[0]!==m?(E=ve(m,"1327278438"),e[0]=m,e[1]=E):E=e[1];const k=E;ve(m,"880513586");let T;e[2]!==s||e[3]!==o?(T={clientThreadId:s,message:o},e[2]=s,e[3]=o,e[4]=T):T=e[4];const{modelOptions:M,messageModelConfig:A,messageModelEnabledTools:I,defaultModelSlug:N,modelPickerVersion:L,fallbackModelOption:O}=SDe(T);let D;if(e[5]!==g||e[6]!==M){let jn;e[8]!==g?(jn=Pi=>Pi.value===g,e[8]=g,e[9]=jn):jn=e[9],D=M.find(jn),e[5]=g,e[6]=M,e[7]=D}else D=e[7];const $=D;let H;if(e[10]!==(N==null?void 0:N.id)||e[11]!==M){let jn;e[13]!==(N==null?void 0:N.id)?(jn=Pi=>Pi.value===(N==null?void 0:N.id),e[13]=N==null?void 0:N.id,e[14]=jn):jn=e[14],H=M.find(jn),e[10]=N==null?void 0:N.id,e[11]=M,e[12]=H}else H=e[12];const G=H,Z=L===2;let Q;e[15]!==s||e[16]!==p||e[17]!==g||e[18]!==M||e[19]!==a||e[20]!==k||e[21]!==Z?(Q=r.jsx(NDe,{clientThreadId:s,messageId:p,onModelSelect:a,messageModelSlug:g,modelOptions:M,showContextualRetry:k,isModelPickerV2:Z}),e[15]=s,e[16]=p,e[17]=g,e[18]=M,e[19]=a,e[20]=k,e[21]=Z,e[22]=Q):Q=e[22];const q=Q,Y=$!=null?$:O;let te;e[23]===Symbol.for("react.memo_cache_sentinel")?(te=jn=>{jn||setTimeout(()=>{y.current&&y.current.blur()},10)},e[23]=te):te=e[23];const ae=te;let se,ce;e[24]!==u?(ce=()=>{ae(u)},se=[u],e[24]=u,e[25]=se,e[26]=ce):(se=e[25],ce=e[26]),_.useEffect(ce,se);let X,ee;e[27]!==u?(X=()=>{u||S(!1)},ee=[u],e[27]=u,e[28]=X,e[29]=ee):(X=e[28],ee=e[29]),_.useEffect(X,ee);const ie=Ve(s,bb);let de;e[30]!==s?(de={clientThreadId:s},e[30]=s,e[31]=de):de=e[31];const me=lO(de),xe=_.useRef(me);let pe,Me;e[32]!==me?(pe=()=>{xe.current=me},Me=[me],e[32]=me,e[33]=pe,e[34]=Me):(pe=e[33],Me=e[34]),_.useEffect(pe,Me);const Ce=mR();if(ie)return null;const ke=(bt=o.metadata)==null?void 0:bt.model_slug,Le=gDe({messageModelEnabledTools:I,message:o,intl:h});let De;e[35]!==s||e[36]!==h||e[37]!==o?(De=pDe({clientThreadId:s,message:o,intl:h}),e[35]=s,e[36]=h,e[37]=o,e[38]=De):De=e[38];const le=De;if(!i)return null;const oe=(Nt=o.metadata)==null?void 0:Nt.show_safety_switch_ui,Ee=K;let be;e[39]!==k?(be=jn=>{f(jn),ae(jn),jn&&k&&B.logEventWithStatsig("Contextual Retry Dropdown Menu Opened","chatgpt_contextual_retry_dropdown_opened")},e[39]=k,e[40]=be):be=e[40];let fe,ue;e[41]!==(A==null?void 0:A.title)||e[42]!==ke||e[43]!==oe?(fe=oe?r.jsx(j,U(w({},mc.modelUsedDescription),{values:{modelName:(ls=A==null?void 0:A.title)!=null?ls:ke}})):r.jsx(j,{id:"gW2N97",defaultMessage:"Try again..."}),ue=oe?null:r.jsx(j,{id:"yAiiEg",defaultMessage:"Used {modelName}",values:{modelName:(oo=A==null?void 0:A.title)!=null?oo:ke}}),e[41]=A==null?void 0:A.title,e[42]=ke,e[43]=oe,e[44]=fe,e[45]=ue):(fe=e[44],ue=e[45]);let _e;e[46]!==n?(_e=z("cursor-pointer",n),e[46]=n,e[47]=_e):_e=e[47];let Te;e[48]!==h?(Te=h.formatMessage({id:"42qUcL",defaultMessage:"Switch model"}),e[48]=h,e[49]=Te):Te=e[49];let $e;e[50]!==oe||e[51]!==d?($e=oe?r.jsx(MDe,{color:"var(--tag-blue)",className:d==="small"?"icon-sm":"icon"}):r.jsx(TDe,{className:d==="small"?"icon-sm":"icon"}),e[50]=oe,e[51]=d,e[52]=$e):$e=e[52];let Ne;e[53]!==k?(Ne=!k&&r.jsx(IDe,{className:"icon-sm"}),e[53]=k,e[54]=Ne):Ne=e[54];let Ae;e[55]!==$e||e[56]!==Ne?(Ae=r.jsxs("div",{className:"flex items-center",children:[$e,Ne]}),e[55]=$e,e[56]=Ne,e[57]=Ae):Ae=e[57];let He;e[58]!==_e||e[59]!==Te||e[60]!==Ae?(He=r.jsx(K.BasicTrigger,{ref:y,className:_e,"aria-label":Te,children:Ae}),e[58]=_e,e[59]=Te,e[60]=Ae,e[61]=He):He=e[61];let Qe;e[62]!==fe||e[63]!==ue||e[64]!==He?(Qe=r.jsx(pt,{label:fe,secondaryLabel:ue,children:He}),e[62]=fe,e[63]=ue,e[64]=He,e[65]=Qe):Qe=e[65];const et=K,Ct=K,vt="top",At=4,Ht=-10,Ot="start",Vt="auto",en=C?r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(ADe,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:jn=>{jn.preventDefault(),S(!1)},children:r.jsx(j,w({},mc.back))}),r.jsx(K.Separator,{}),q]}):r.jsxs(r.Fragment,{children:[k&&r.jsx(CDe,{message:o,canRegenerateResponse:i,onModelSelect:a,clientThreadId:s,retryOption:Y,contentRef:b,parentPrompt:l}),!k&&r.jsxs(r.Fragment,{children:[r.jsx(K.Label,{children:r.jsx(j,{id:"bFLh5u",defaultMessage:"Switch model"})}),q]}),Y&&r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),!k&&r.jsx(HU,{clientThreadId:s,messageId:p,messageModelSlug:g,onModelSelect:a,modelRetryOption:Y,showContextualRetry:!1,parentPrompt:l}),r.jsx(Qk,{clientThreadId:s,messageId:p,onModelSelect:a,modelRetryOption:Y,systemHintRetryOptions:[...Le],showContextualRetry:k,messageModelSlug:g})]}),!!G&&k&&(v===Ye.FREE||v===Ye.GO)&&r.jsx(Qk,{clientThreadId:s,messageId:p,onModelSelect:a,modelRetryOption:G,systemHintRetryOptions:le,messageModelSlug:g,showContextualRetry:!0}),k&&v&&Eq(v)&&v!==Ye.GO&&!oe&&r.jsxs(K.Sub,{children:[!Ce&&r.jsxs(r.Fragment,{children:[r.jsx(K.SubMenuTrigger,{icon:t9,children:r.jsx(j,w({},mc.switchModel))}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:q})})]}),Ce&&r.jsx(K.SubMenuTrigger,{icon:t9,onClick:jn=>{jn.preventDefault(),S(!0)},children:r.jsx(j,w({},mc.switchModel))})]}),oe&&r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),r.jsxs("div",{className:"px-4 py-2",children:[r.jsx("div",{className:"text-sm",children:r.jsx(j,U(w({},mc.modelUsedDescription),{values:{modelName:(Ni=A==null?void 0:A.title)!=null?Ni:ke}}))}),r.jsx("div",{className:"text-token-text-tertiary max-w-64 py-1 text-xs",children:r.jsx(j,U(w({},mc.safetySwitchWarning),{values:{learnMoreLink:r.jsx("a",{href:"https://help.openai.com/en/articles/12454167",target:"_blank",className:"text-token-text-accent hover:text-token-text-accent/80 underline",rel:"noreferrer",children:r.jsx(j,{id:"dyuBaD",defaultMessage:"Learn more"})})}}))})]})]})]});let Qt;e[66]!==Ct.Content||e[67]!==en?(Qt=r.jsx(Ct.Content,{side:vt,sideOffset:At,alignOffset:Ht,align:Ot,size:Vt,ref:b,children:en}),e[66]=Ct.Content,e[67]=en,e[68]=Qt):Qt=e[68];let tn;e[69]!==et.Portal||e[70]!==Qt?(tn=r.jsx(et.Portal,{children:Qt}),e[69]=et.Portal,e[70]=Qt,e[71]=tn):tn=e[71];let gn;return e[72]!==u||e[73]!==Ee.Root||e[74]!==be||e[75]!==Qe||e[76]!==tn?(gn=r.jsxs(Ee.Root,{open:u,onOpenChange:be,children:[Qe,tn]}),e[72]=u,e[73]=Ee.Root,e[74]=be,e[75]=Qe,e[76]=tn,e[77]=gn):gn=e[77],gn}function NDe(t){"use forget";const e=W.c(49),{clientThreadId:n,messageId:s,messageModelSlug:o,onModelSelect:a,modelOptions:i,showContextualRetry:l,isModelPickerV2:c}=t,{data:d}=El(),u=d===void 0?null:d;let f;e[0]!==u?(f=u&&xh(u),e[0]=u,e[1]=f):f=e[1];const m=f;let g;e[2]!==i?(g=EDe(i,PDe),e[2]=i,e[3]=g):g=e[3];const[p,h]=g;let x;e[4]!==m||e[5]!==i?(x=()=>{const A=i.some(I=>VU(I,m));B.logEvent("Conversation Open Message Model Selector",{has_get_plus_button:A,is_new_regen_dropdown:!0})},e[4]=m,e[5]=i,e[6]=x):x=e[6];const v=_.useEffectEvent(x);let y;e[7]!==v?(y=()=>{v()},e[7]=v,e[8]=y):y=e[8];let b;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[9]=b):b=e[9],_.useEffect(y,b);let C;e[10]!==p?(C=new Map,p.forEach(A=>{var N;const I=A.subcategory;I&&(C.has(I)||C.set(I,[]),(N=C.get(I))==null||N.push(A))}),e[10]=p,e[11]=C):C=e[11];const S=C;let E;if(e[12]!==n||e[13]!==m||e[14]!==s||e[15]!==o||e[16]!==a||e[17]!==l||e[18]!==h){let A;e[20]!==n||e[21]!==m||e[22]!==s||e[23]!==o||e[24]!==a||e[25]!==l?(A=I=>r.jsx(E2,{clientThreadId:n,messageId:s,onModelSelect:a,modelRetryOption:I,showContextualRetry:l,hasPlusFeatures:m,messageModelSlug:o},I.value),e[20]=n,e[21]=m,e[22]=s,e[23]=o,e[24]=a,e[25]=l,e[26]=A):A=e[26],E=h.map(A),e[12]=n,e[13]=m,e[14]=s,e[15]=o,e[16]=a,e[17]=l,e[18]=h,e[19]=E}else E=e[19];let k;e[27]!==n||e[28]!==m||e[29]!==c||e[30]!==s||e[31]!==o||e[32]!==a||e[33]!==S||e[34]!==l?(k=c&&[...S.entries()].map(A=>{const[I,N]=A;return N.map(L=>r.jsx(E2,{clientThreadId:n,messageId:s,onModelSelect:a,modelRetryOption:L,showContextualRetry:l,hasPlusFeatures:m,messageModelSlug:o,subcategory:I},I+"-"+L.value))}),e[27]=n,e[28]=m,e[29]=c,e[30]=s,e[31]=o,e[32]=a,e[33]=S,e[34]=l,e[35]=k):k=e[35];let T;e[36]!==n||e[37]!==m||e[38]!==c||e[39]!==s||e[40]!==o||e[41]!==a||e[42]!==S||e[43]!==l?(T=!c&&[...S.entries()].map(A=>{const[I,N]=A;return r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{children:r.jsx("div",{className:"flex grow justify-between gap-2 overflow-hidden",children:I})}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{className:"min-w-fit",children:N.map(L=>r.jsx(E2,{clientThreadId:n,messageId:s,onModelSelect:a,modelRetryOption:L,showContextualRetry:l,hasPlusFeatures:m,messageModelSlug:o,subcategory:I},I+"-"+L.value))})})]},I)}),e[36]=n,e[37]=m,e[38]=c,e[39]=s,e[40]=o,e[41]=a,e[42]=S,e[43]=l,e[44]=T):T=e[44];let M;return e[45]!==E||e[46]!==k||e[47]!==T?(M=r.jsxs(r.Fragment,{children:[E,k,T]}),e[45]=E,e[46]=k,e[47]=T,e[48]=M):M=e[48],M}function PDe(t){return t.subcategory}const Ast=_.memo(jDe),mc=Se({switchModel:{id:"RegenerateWithModelDropdown.switchModel",defaultMessage:"Switch model"},back:{id:"RegenerateWithModelDropdown.back",defaultMessage:"Back"},modelUsedDescription:{id:"RegenerateWithModelDropdown.modelUsedDescription",defaultMessage:"Used {modelName}"},safetySwitchWarning:{id:"RegenerateWithModelDropdown.safetySwitchWarning",defaultMessage:"ChatGPT routes some sensitive conversations to models that handle these topics with extra care. {learnMoreLink}"}});function b4(t){returnwindow.location.origin+"/s/".concat(t)}const zu=Se({copyLink:{id:"postSharingModal.copyLink",defaultMessage:"Copy link"},linkCopied:{id:"postSharingModal.linkCopied",defaultMessage:"Link copied!"},failedToGenerateShareLink:{id:"postSharingModal.failedToGenerateShareLink",defaultMessage:"Failed to generate share link"},fromChatGPT:{id:"postSharingModal.fromChatGPT",defaultMessage:"From ChatGPT"},contentUnavailable:{id:"postSharingModal.contentUnavailable",defaultMessage:"Content Unavailable"},unavailableReasonGeneral:{id:"postSharingModal.unavailableReasonGeneral",defaultMessage:"This share link is not available because it doesnt exist or you dont have access to it."},unavailableReasonWorkspace:{id:"postSharingModal.unavailableReasonWorkspace",defaultMessage:"This content was shared from a workspace you dont have access to. Ask the owner to invite you if youd like to view it."},ok:{id:"postSharingModal.ok",defaultMessage:"OK"},shareLinkVisibleToWorkspaceOnly:{id:"postSharingModal.shareLinkVisibleToWorkspaceOnly",defaultMessage:"The share links are visible to workspace members only."},download:{id:"postSharingModal.download",defaultMessage:"Download"},downloadPdfButtonMenu:{id:"postSharingModal.download-pdf-button.menu",defaultMessage:"PDF Document (.pdf)"},downloadDocxButtonMenu:{id:"postSharingModal.download-docx-button.menu",defaultMessage:"Microsoft Word Document (.docx)"},downloadPptxButtonMenu:{id:"postSharingModal.download-pptx-button.menu",defaultMessage:"Microsoft PowerPoint Document (.pptx)"},downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},imageLicenseDisclaimer:{id:"postSharingModal.imageLicenseDisclaimer",defaultMessage:"Only share images you have a license to use. <link>Learn{nbsp}more</link>"},screenshotDisclaimer:{id:"postSharingModal.screenshotDisclaimer",defaultMessage:"Screenshots may contain sensitive information."}}),K1=R(()=>P(()=>import("./k0avmpcayzs7iyy2.js"),__vite__mapDeps([480,1,10,11,222,109,110,73])).then(t=>t.PostSharingModal)),gd=R(()=>P(()=>import("./k6yn3au0i45wwn1u.js"),__vite__mapDeps([481,1,10,11])).then(t=>t.MobilePostPreview));function RDe(t){const e=Il(t,n=>mr.getImageAssetPointers(n).length>0);return e?mr.getImageAssetPointers(e)[0]:null}async function LDe(t,e,n){return Co(e.asset_pointer)?(await B7e(t,[e],null,void 0,n))[0]:null}const ODe=async(t,e,n)=>{var i;const s=()=>he.findNode(mt(e),({message:l})=>l.id===n||!!mr.getImageAssetPointers(l).find(c=>c.asset_pointer===t));let o=s();if(!(o!=null&&o.message)&&(await Ea(e),o=s(),!(o!=null&&o.message)))return null;const a=jt(e);return{postText:(i=o.message.metadata)==null?void 0:i.image_gen_title,imageAssetPointer:RDe([o.message]),serverThreadId:a}};async function DDe(t,e,n,s){const o=Co(e.asset_pointer);if(!o)return null;const a=await ge.safePost("/share/post",{requestBody:{post_text:n,attachments_to_create:[{kind:"image_share",file_id:o,conversation_id:t,width:s==null?void 0:s.width,height:s==null?void 0:s.height}]}});return b4(a.post.id)}async function FDe(t,e,n){const s=await ge.safePost("/share/post",{requestBody:{post_text:n,attachments_to_create:[{kind:"message_slice",conversation_id:t,message_ids:e}]}});return b4(s.post.id)}async function Q1({postText:t,postTitle:e,clientThreadId:n,generateShareLinkFn:s,renderPreviewFn:o,usePostText:a,useShareLink:i,useShareTitle:l}){if(!jt(n))return!1;try{const d=await s();return d?(o&&o(),await navigator.share({text:a?t:void 0,url:i?d:void 0,title:l?e:void 0}),!0):!1}catch(d){return!1}}async function BDe(t,e,n,s,o,a){const i=await ODe(t,e,n);if(!(i!=null&&i.imageAssetPointer)||!(i!=null&&i.serverThreadId))return;const{postText:l,imageAssetPointer:c,serverThreadId:d}=i,u=await LDe(s,c,d);if(!u)return;const f=()=>DDe(d,c,l,u);if(a&&ve(o,"1138231213")){const m=ze(o,"2382399797");if(await Q1({clientThreadId:e,postText:l,generateShareLinkFn:f,usePostText:m.get("navigator_share_text",!1),useShareLink:m.get("navigator_share_link",!1)}))return}dt(o,K1,{postSharingData:{clientThreadId:e,postText:l,generateShareLinkFn:f,coverImageUrl:u==null?void 0:u.url}})}async function UDe(t,e,n,s,o){const a=jt(t);if(!a)return;const i=()=>FDe(a,e,o);if(s&&ve(n,"1138231213")){await Q1({clientThreadId:t,generateShareLinkFn:i,renderPreviewFn:()=>{dt(n,gd,{clientThreadId:t,coverImageUrl:void 0,messageSliceIds:e})},useShareLink:!0,useShareTitle:!0,postTitle:o}),Cs(n,gd);return}dt(n,K1,{postSharingData:{clientThreadId:t,generateShareLinkFn:i,postText:o,messageSliceIds:e,messageSliceAttachment:void 0}})}const M2=async(t,e,n,s)=>{if(!jt(e))return;const a=async()=>{const i=await ge.safePost("/share/post",{requestBody:{attachments_to_create:[{kind:"odyssey_artifact",file_id:t.fileId,message_id:t.messageId,conversation_id:t.serverThreadId}]}});return b4(i.post.id)};if(s&&ve(n,"1138231213")){const i=await Q1({clientThreadId:e,generateShareLinkFn:a,renderPreviewFn:()=>{dt(n,gd,{clientThreadId:e,generateShareLinkFn:a,coverImageUrl:void 0,messageSliceIds:void 0,odysseyShareIntent:t})},useShareLink:!0,useShareTitle:!1});if(Cs(n,gd),i)return}dt(n,K1,{postSharingData:{clientThreadId:e,generateShareLinkFn:a,odysseyShareIntent:t,messageSliceIds:void 0}})};async function $De({ctx:t,serverThreadId:e,existingShareLinkUrl:n}){var d,u,f;if(!t)return!1;const s=x3(e);let o=mt(s);if(o||(await Ea(s),o=mt(s)),!o)return!1;const a=he.getConversationTurns(o).flatMap(m=>m.messages.map(g=>g.id)).filter(m=>!!m);if(a.length===0)return!1;const i=!k8();((d=he.getCurrentNode(o))==null?void 0:d.message.id)||await Ea(s);const c=()=>Promise.resolve(n!=null?n:null);return i&&ve(t,"1138231213")?(await Q1({clientThreadId:s,postTitle:(u=o.title)!=null?u:void 0,generateShareLinkFn:c,renderPreviewFn:()=>{dt(t,gd,{clientThreadId:s,coverImageUrl:void 0,messageSliceIds:a})},useShareLink:!0,useShareTitle:!0}),Cs(t,gd),!0):(dt(t,K1,{postSharingData:{clientThreadId:s,generateShareLinkFn:c,postText:(f=o.title)!=null?f:void 0,messageSliceIds:a,messageSliceAttachment:void 0}}),!0)}function GU(t){const{assetPointer:e=null,clientThreadId:n,imageGenMessageId:s,messageSliceIds:o,odysseyShareIntent:a,parentPromptId:i}=t,l=It(),c=V(),d=Eo(),u=Ve(n,f=>f==null?void 0:f.title);return _.useEffect(()=>{P(()=>Promise.resolve().then(()=>cIe),void 0)},[]),_.useCallback(async()=>{if(s)await BDe(e,n,s,l,c,d);else if(o){const m=i!=null&&ze(c,"1547743984").get("is_message_prompt_enabled",!1)&&i?[i,...o.filter(g=>g!==i)]:o;await UDe(n,m,c,d,u!=null?u:void 0)}else a&&await(M2==null?void 0:M2(a,n,c,d))},[e,n,s,o,u,l,d,a,i,c])}function WU(t){const e=ne();switch(t){case"general":return e.formatMessage(zu.unavailableReasonGeneral);case"workspace":return e.formatMessage(zu.unavailableReasonWorkspace);default:return e.formatMessage(zu.unavailableReasonGeneral)}}function VDe({onClose:t,reason:e}){const n=ne(),s=at(),o=()=>{t(),s("/")},a=WU(e);return r.jsx(Mt,{testId:"modal-post-sharing-error",isOpen:!0,type:"danger",textCenter:!0,title:n.formatMessage(zu.contentUnavailable),description:a,onClose:o,footerContent:r.jsx(ye,{size:"large",color:"primary",className:"w-full",onClick:o,children:n.formatMessage(zu.ok)})})}const Ist=Object.freeze(Object.defineProperty({__proto__:null,PostSharingErrorModal:VDe,openConversationPostSharingModal:$De,useOpenPostSharingModal:GU,usePostSharingErrorMessage:WU},Symbol.toStringTag,{value:"Module"})),jst=async(t,e,n,s,o,a="mouse",i)=>{var b,C;const l=he.getConversationTurns(mt(e)),c=l[n];if(!c)return Promise.reject();const d=c.role===Ke.User?c.userContinuationRootTurnId:void 0,u=d!=null?l.filter(S=>S.role===Ke.User&&S.userContinuationRootTurnId===d):[c],f=(b=u[0])!=null?b:c,m=u.length>1?U(w({},f),{messages:u.flatMap(S=>S.messages)}):c,{messages:g}=m,p=o,h=((C=g[0])==null?void 0:C.author.role)===Ke.User,x=p.metaKey||p.altKey,v=await AOe(m,i,e,{unprocessed:x||h});await Yo(v,s,o);const y=jt(e);y&&(a1(t,{messageId:g[0].id,type:"copy",serverThreadId:y,selectedText:yo(g[0]),source:a,location:"message",contentType:"text"}),B.logStructuredEvent(_ne,{conversationId:y,messageId:g[0].id}))};function Nst(t,e){var g,p,h,x;const n=V(),[s,o,a]=Ve(t,v=>[he.getIsNewConversation(v),he.getRequestId(v),bb(v)]),i=Ia(o),l=PRe(),c=!tt(n),d=((g=e==null?void 0:e.metadata)==null?void 0:g.b1de6e2_s)||((p=e==null?void 0:e.metadata)==null?void 0:p.b1de6e2_rm),u=!!((h=e==null?void 0:e.metadata)!=null&&h.n7jupd_message),f=!!((x=e==null?void 0:e.metadata)!=null&&x.image_gen_async);return!s&&!i&&!l.displayingSideBySideFeedback&&!c&&!a&&!u&&!f&&!d}async function Pst(t,e,n){try{await t()}catch(s){e(s)}finally{n()}}function HDe({audioAssetPointer:t,conversationId:e}){const n=It(),[s,o]=_.useState(!1),a=_.useRef(!0),[i,l]=_.useState(void 0),c=_.useRef(null),d=F3(),u=B3(p=>p.isPlaying&&p.sourceUrl===i),f=_.useCallback(()=>{const p=J2();if(p)c.current?c.current.then(()=>{p.stop(),c.current=null}):p.stop();else return},[]);_.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),_.useEffect(()=>()=>{b8().isPlaying&&f()},[f]);const m=_.useCallback(async()=>{if(!d||!a.current)return;o(!0);const{url:p}=await qd.fetch(n,{asset:t,conversationId:e});o(!1),l(p),d.changeSource(p),c.current=d.play()},[t,e,d,n]);return{togglePlayback:_.useCallback(()=>{if(d)u?f():(Ut.messagePlayback.click(),m());else return},[u,m,d,f]),isPlaying:u,isLoading:s}}const zU=_.createContext({isLoading:!1,isPlaying:!1,togglePlayback:()=>{throw new Error("Invalid usage outside of VoicePlaybackContext")},mode:"readAloud"});function GDe({children:t,audioAssetPointer:e,conversationId:n}){const{isLoading:s,isPlaying:o,togglePlayback:a}=HDe({audioAssetPointer:e,conversationId:n});return r.jsx(zU.Provider,{value:_.useMemo(()=>({isLoading:s,isPlaying:o,togglePlayback:a,mode:"audioAsset"}),[s,o,a]),children:t})}function WDe({children:t,conversationId:e,messageId:n}){const{isLoading:s,isPlaying:o,togglePlayback:a}=R3e({conversationId:e,messageId:n});return r.jsx(zU.Provider,{value:_.useMemo(()=>({isLoading:s,isPlaying:o,togglePlayback:a,mode:"readAloud"}),[s,o,a]),children:t})}function Rst({children:t,enable:e,lastMessage:n,serverThreadId:s}){if(!e||!n||!s)return t;const o=mr.getAudioAssetPointers(n)[0];return o?r.jsx(GDe,{conversationId:s,audioAssetPointer:o,children:t}):r.jsx(WDe,{conversationId:s,messageId:n.id,children:t})}const zDe=R(()=>P(()=>import("./ei2rr3u86wwo8xvm.js"),__vite__mapDeps([52,1])),{loading:t=>F(t)});function Lst({onAnticipateEdit:t,onEnterEdit:e}){const n=ne();return r.jsx(md,{label:n.formatMessage({id:"gG9rea",defaultMessage:"Edit message"}),icon:zDe,onClick:e,onBeforeClick:t})}function Ost({message:t,clientThreadId:e,turnIndex:n,referenceMessageId:s,responseComplete:o}){var g,p;const a=V(),i=xt(a,e),l=pm("n7jupdSources"),c=Bf(),d=(g=t==null?void 0:t.metadata)==null?void 0:g.async_task_id,u=t&&((p=t.metadata)==null?void 0:p.open_tabs)&&t.metadata.open_tabs.length>0,f=(()=>{var v,y,b;if(!t)return[];const h=(v=t.metadata)!=null?v:{},x=[...(y=h.content_references)!=null?y:[],...Object.values((b=h.content_references_by_file)!=null?b:{}).flat()];return x.length===0?[]:x.flatMap(C=>{var S,E,k,T;switch(C.type){case"webpage":case"webpage_extended":return C.url?[C.url]:[];case"grouped_webpages":return(E=(S=C.items)==null?void 0:S.map(M=>M.url).filter(Boolean))!=null?E:[];case"file":return C.cloud_doc_url?[C.cloud_doc_url]:[];case"image_inline":{const M=(T=C.clicked_from_url)!=null?T:(k=C.asset_pointer_links)==null?void 0:k[0];return M?[M]:[]}default:return[]}})})();_.useEffect(()=>{if(d)return As.retainTaskStream(d),()=>{As.releaseTaskStream(d)}},[d]);const m=_.useCallback(()=>{XP(i,{type:"n7jupdSources",turnIndex:n||1,messageId:s},l)},[i,l,n,s]);return!o||f.length===0||u?null:r.jsx(aO,{sourcesUrls:f,onClick:()=>{m()},className:z("mt-0! mb-0!",c&&"cursor-default")})}const Dst=({clientThreadId:t})=>{const e=jt(t),n=Ve(t,s=>he.findNode(s,o=>{var a;return!!((a=o.message.metadata)!=null&&a.visited_risky_domain)}));return _.useEffect(()=>{if(!e||!n)return;const s=setInterval(()=>{document.visibilityState==="visible"&&ge.safePost("/conversation/{conversation_id}/agent/notify_viewing",{parameters:{path:{conversation_id:e}}})},1e3);return()=>clearInterval(s)},[e,n]),null},qDe="Continue",Fst=({clientThreadId:t,messages:e})=>{const n=V(),s=xt(n,t),o=_.useMemo(()=>e.some(d=>{var u;return((u=d.metadata)==null?void 0:u.stop_reason)===Tq.RiskyDomainNotWatching}),[e]),a=Oye(s.id),{selectedSources:i}=Pa(s.id),[l,c]=_.useState(!1);return r.jsx(Mt,{testId:"modal-watch-mode-stopped",isOpen:o&&!l,type:"success",size:"normal",onClose:as,className:"p-1",title:r.jsx("div",{className:"font-semibold",children:r.jsx(j,{id:"8FmSDC",defaultMessage:"Task paused while you were away"})}),primaryButton:r.jsx(ye,{onClick:()=>{Zo({conversation:s,eventSource:"mouse",promptMessage:is(qDe,w({system_hints:[hs]},i&&{selected_sources:_i(i)})),completionMetadata:{systemHints:[hs],conversationMode:{kind:wt.PrimaryAssistant}}})},children:r.jsx(j,{id:"4rrYz9",defaultMessage:"Resume"})}),secondaryButton:r.jsx(ye,{color:"secondary",onClick:()=>c(!0),children:r.jsx(j,{id:"yg+V5e",defaultMessage:"Stay paused"})}),children:r.jsx(j,{id:"Wdb/cy",defaultMessage:"ChatGPT is working with {riskyDomain}, which contains sensitive data. To resume, keep your browser's tab open and monitor actions.",values:{riskyDomain:r.jsx("span",{className:"font-medium",children:a})}})})},C4=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10 2.125C14.3492 2.125 17.875 5.65076 17.875 10C17.875 14.3492 14.3492 17.875 10 17.875C5.65076 17.875 2.125 14.3492 2.125 10C2.125 5.65076 5.65076 2.125 10 2.125ZM7.88672 10.625C7.94334 12.3161 8.22547 13.8134 8.63965 14.9053C8.87263 15.5194 9.1351 15.9733 9.39453 16.2627C9.65437 16.5524 9.86039 16.625 10 16.625C10.1396 16.625 10.3456 16.5524 10.6055 16.2627C10.8649 15.9733 11.1274 15.5194 11.3604 14.9053C11.7745 13.8134 12.0567 12.3161 12.1133 10.625H7.88672ZM3.40527 10.625C3.65313 13.2734 5.45957 15.4667 7.89844 16.2822C7.7409 15.997 7.5977 15.6834 7.4707 15.3486C6.99415 14.0923 6.69362 12.439 6.63672 10.625H3.40527ZM13.3633 10.625C13.3064 12.439 13.0059 14.0923 12.5293 15.3486C12.4022 15.6836 12.2582 15.9969 12.1006 16.2822C14.5399 15.467 16.3468 13.2737 16.5947 10.625H13.3633ZM12.1006 3.7168C12.2584 4.00235 12.4021 4.31613 12.5293 4.65137C13.0059 5.90775 13.3064 7.56102 13.3633 9.375H16.5947C16.3468 6.72615 14.54 4.53199 12.1006 3.7168ZM10 3.375C9.86039 3.375 9.65437 3.44756 9.39453 3.7373C9.1351 4.02672 8.87263 4.48057 8.63965 5.09473C8.22547 6.18664 7.94334 7.68388 7.88672 9.375H12.1133C12.0567 7.68388 11.7745 6.18664 11.3604 5.09473C11.1274 4.48057 10.8649 4.02672 10.6055 3.7373C10.3456 3.44756 10.1396 3.375 10 3.375ZM7.89844 3.7168C5.45942 4.53222 3.65314 6.72647 3.40527 9.375H6.63672C6.69362 7.56102 6.99415 5.90775 7.4707 4.65137C7.59781 4.31629 7.74073 4.00224 7.89844 3.7168Z"}));var ga=(t=>(t[t.Classifier=0]="Classifier",t[t.Conversation=1]="Conversation",t[t.ShortQuery=2]="ShortQuery",t))(ga||{});function YDe(t){switch(t){case 0:return"navlinks_shown_cl";case 1:return"navlinks_shown_co";case 2:return"navlinks_shown_sq"}}function ZDe(t,e,n,s,o){var u,f;if(!n)return;const a=t,i=e,l=n.getStartTime();if(n.logTimingOnce("navlinks_shown",{overrideDurationMs:a-l}),o!==void 0){const m=YDe(o);n.logTimingOnce(m,{overrideDurationMs:a-l}),Ie.count(je.DEFAULT,"navlinks_show_decision_counter",[{key:"source",value:m}])}if(!s)return;let c=0;s.requestedTimeUnixEpochMs!==void 0&&(c=i-(s==null?void 0:s.requestedTimeUnixEpochMs)-(a-l),n.logTimingOnce("navlinks_before_js",{overrideDurationMs:c}),n.logTimingOnce("navlinks_shown_total",{overrideDurationMs:i-(s==null?void 0:s.requestedTimeUnixEpochMs)}));const d=o===ga.Classifier;if(s.lastStartFetch!==void 0&&s.firstStartFetch!==void 0&&s.firstNavlinkFetched!==void 0){const m=Math.max(d&&s.firstClassifierFetched!==void 0?s.firstClassifierFetched-s.lastStartFetch:0,0);let g=Math.max(Math.min(s.lastStartFetch-s.firstStartFetch,s.firstNavlinkFetched-s.firstStartFetch),0);o===ga.Conversation&&(g=0),n.logTimingOnce("navlinks_typeahead_savings",{overrideDurationMs:g}),n.logTimingOnce("navlinks_typeahead_savings_adj",{overrideDurationMs:Math.max(g-m,0)})}if(s.firstRoundtripTime!==void 0&&s.firstStartFetch!==void 0&&n.logTimingOnce("navlinks_roundtrip_latency",{overrideDurationMs:s.firstRoundtripTime-s.firstStartFetch}),s.firstNavlinkFetched!==void 0&&s.firstStartFetch!==void 0&&n.logTimingOnce("navlinks_first_fetch_latency",{overrideDurationMs:s.firstNavlinkFetched-s.firstStartFetch}),s.firstClassifierFetched!==void 0&&s.lastStartFetch!==void 0&&n.logTimingOnce("navlinks_classifier_latency",{overrideDurationMs:s.firstClassifierFetched-s.lastStartFetch}),s.requestedTimeUnixEpochMs){const m=Math.max((u=s.firstNavlinksFetchedTS)!=null?u:0,d&&(f=s.firstClassifierFetchedTS)!=null?f:0,s.requestedTimeUnixEpochMs);let g=i-m;o===ga.Conversation&&(g=c),n.logTimingOnce("navlinks_wait_for_ui",{overrideDurationMs:g})}}function KDe(t){const e=/^(\S+\s+followers  )\S+\s+following  \S+\s+posts  @[A-Za-z0-9._]+:\s*(.+)$/,n=t.match(e);return n?r.jsxs("span",{children:[r.jsx("span",{className:"text-token-text-tertiary",children:n[1]}),n[2]]}):t}function QDe(t){return Object.values(t.reduce((e,n)=>{const s=n.domain;return e[s]||(e[s]=[]),e[s].push(n),e},{}))}const n9=new Set,A2=new Map;function JDe({content:t,clientThreadId:e,navlinksShowDecisionSource:n,analytics:s,query:o}){const a=V(),{navlinks:i,navlinks_ready:l}=t.widgets,{profiler:c,isRequestActive:d}=GR({namespace:fm.SuperWidget,clientThreadId:e}),u=ne(),f=re(()=>Ko(a)),m=_.useRef(!1),p=cM(a)&&i&&i.length>0;if(p&&o!=null){const v="".concat(e,"_").concat(o);A2.has(v)||A2.set(v,{perf:performance.now(),unix:Date.now()})}_.useEffect(()=>{if(p&&c&&d&&!m.current&&o!=null){const v="".concat(e,"_").concat(o),y=A2.get(v);!n9.has(v)&&y&&(n9.add(v),m.current=!0,ZDe(y.perf,y.unix,c,s,n))}},[p,c,d,n,s,o,e]),_.useEffect(()=>{p&&B.logStructuredEvent(od,{step:_l.ATLAS_NAVLINKS_ACTION_STEP_SHOW,source:Ma.ATLAS_NAVLINKS_SOURCE_CHAT_LIST})},[p]);const[,h]=wm(),x=()=>{B.logStructuredEvent(od,{step:_l.ATLAS_NAVLINKS_ACTION_STEP_SEE_MORE,source:Ma.ATLAS_NAVLINKS_SOURCE_CHAT_LIST}),h({tabType:ht.Search})};return p?r.jsxs("div",{className:"flex gap-2",children:[r.jsx(s9,{index:0,navlink:i.length>0?i[0]:null}),r.jsx(s9,{index:1,navlink:i.length>1?i[1]:null}),f&&r.jsxs("button",{onClick:x,"aria-label":u.formatMessage({id:"cwfmIN",defaultMessage:"See more links"}),className:z("text-token-text-tertiary flex flex-col items-center justify-center gap-1 self-stretch rounded-xl",f?"hover:bg-token-bg-tertiary bg-(--bg-quaternary) px-6":"bg-token-bg-tertiary hover:bg-token-bg-secondary px-4"),children:[r.jsx(C4,{}),r.jsx("span",{className:"min-h-[20px] text-sm",children:l?i.length:null})]})]}):null}function s9({index:t,navlink:e,linkTarget:n="_self"}){var l;const s=V(),o=re(()=>Ko(s)),a=()=>{B.logStructuredEvent(od,{step:_l.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:Ma.ATLAS_NAVLINKS_SOURCE_CHAT_CAROUSEL,navlinkIndex:t})},i=["flex-1 rounded-xl",o?"hover:bg-token-bg-tertiary min-h-[76px] bg-(--bg-quaternary)":"bg-token-bg-tertiary hover:bg-token-bg-secondary min-h-[64px]"];return e?r.jsx(rB,{favicon:r.jsx(ks,{url:e.url,size:32,minSize:16,applySizeToImg:!1,showLoadingAnimation:!0,className:"h-4 w-4 shrink-0 rounded-full border-1 border-gray-200"}),heading:e.title,title:null,quoteHeading:null,quoteText:null,snippet:(l=e.snippet)!=null?l:null,isContentBlocked:!1,theme:"white",children:r.jsxs(to,{href:e.url,target:n,onClick:a,className:z(i,"flex flex-col gap-1 px-4 py-3 select-none"),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ks,{url:e.url,size:32,minSize:16,applySizeToImg:!1,className:"h-4 w-4 shrink-0 rounded-full",showLoadingAnimation:!0}),r.jsx("span",{className:"text-token-text-tertiary line-clamp-1 text-sm",children:r.jsxs("span",{children:[e.domain,"  ",e.title]})})]}),r.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm",children:e.snippet?KDe(e.snippet):e.title})]})}):r.jsx("div",{className:z(i,"loading-results-shimmer")})}const XDe=new Set(["lynx","cache"]),Dy=new Set(["ocelot","caracal"]),o9=10,eFe=2,tFe=t=>{var n;return t.source&&Dy.has(t.source)?!0:((n=t.sources)!=null?n:[]).some(s=>Dy.has(s))};function ju(t,e,n=!1){var l,c,d;const s=w({},e),o=[],a=[],i=[];for(const u of t){let f=!1;for(let m=0;m<1+((c=(l=u.sources)==null?void 0:l.length)!=null?c:0);m++){const g=m===0?u.source:(d=u.sources)==null?void 0:d[m-1],p=g!=="fast"?g:"cache",h=p!==void 0?[p]:[];if(p!==void 0&&XDe.has(p)&&h.push("fast"),p!==void 0&&Dy.has(p)&&h.push("high-quality"),!h.some(x=>s[x]!==void 0&&s[x]<=0)){h.forEach(x=>{s[x]!==void 0&&s[x]--}),o.push(u),f=!0;break}}f||(tFe(u)?a:i).push(u)}if(n&&o.length<o9){const u=o9-o.length,f=new Set(o.map(p=>p.url)),m=(p,h)=>{let x=0;for(const v of p){if(x>=h)break;f.has(v.url)||(o.push(v),f.add(v.url),x++)}return x},g=m(a,u);g<u&&m(i,u-g)}return o}const qU=Hn(t=>{const n=rs(t,"3205212221").get("max_navlinks",void 0);let s;if(n&&typeof n=="object"&&!Array.isArray(n)){s={};for(const[o,a]of Object.entries(n))typeof a=="number"&&(s[o]=a)}return(!s||Object.keys(s).length===0)&&(s={fast:eFe}),s}),YU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8.07715 11.7168C9.31399 11.1993 10.4531 11.1663 11.6777 11.6191L11.9238 11.7168L12.042 11.7812C12.2973 11.9555 12.4042 12.2906 12.2803 12.5869C12.1562 12.8832 11.8424 13.0421 11.5391 12.9824L11.4102 12.9434L11.2266 12.8711C10.3144 12.5309 9.5197 12.5548 8.59082 12.9434C8.25208 13.0851 7.86156 12.9256 7.71973 12.5869C7.57799 12.2481 7.73836 11.8586 8.07715 11.7168Z"}),_.createElement("path",{d:"M7.08301 7.08301C7.77326 7.08301 8.33284 7.64279 8.33301 8.33301C8.33301 9.02336 7.77336 9.58301 7.08301 9.58301C6.39282 9.58281 5.83301 9.02324 5.83301 8.33301C5.83317 7.64291 6.39292 7.08321 7.08301 7.08301Z"}),_.createElement("path",{d:"M12.917 7.08301C13.6071 7.08321 14.1668 7.64291 14.167 8.33301C14.167 9.02324 13.6072 9.58281 12.917 9.58301C12.2266 9.58301 11.667 9.02336 11.667 8.33301C11.6672 7.64279 12.2267 7.08301 12.917 7.08301Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.83496C10.3673 1.83496 10.665 2.13273 10.665 2.5V3.08496H13.084C13.7728 3.08496 14.3302 3.08432 14.7803 3.12109C15.2379 3.15854 15.644 3.23788 16.0205 3.42969L16.2383 3.55176C16.7341 3.85586 17.1378 4.29237 17.4033 4.81348L17.4707 4.95605C17.6149 5.29226 17.6792 5.65318 17.7119 6.05371C17.7392 6.38721 17.7442 6.7793 17.7461 7.24023C18.2408 7.48486 18.5819 7.99377 18.582 8.58301V9.83301C18.582 10.4249 18.2375 10.9351 17.7393 11.1787C17.7316 11.6246 17.7183 12.0205 17.6895 12.374C17.6368 13.018 17.5355 13.5674 17.3213 14.0664L17.2217 14.2773C16.7875 15.1292 16.1108 15.8317 15.2793 16.2979L15.1104 16.3887C14.5555 16.6713 13.9436 16.7963 13.208 16.8564C12.4799 16.9159 11.5726 16.915 10.417 16.915H9.58398C8.42845 16.915 7.52104 16.9159 6.79297 16.8564C6.14901 16.8038 5.59958 16.7015 5.10059 16.4873L4.88965 16.3887C3.98077 15.9255 3.24152 15.1862 2.77832 14.2773C2.49553 13.7223 2.37068 13.1099 2.31055 12.374C2.28166 12.0205 2.26719 11.6247 2.25977 11.1787C1.76193 10.935 1.41797 10.4246 1.41797 9.83301V8.58301C1.41809 7.99377 1.75916 7.48486 2.25391 7.24023C2.25555 6.77929 2.26084 6.38722 2.28809 6.05371C2.3255 5.59593 2.40488 5.19008 2.59668 4.81348C2.90012 4.21801 3.38499 3.7331 3.98047 3.42969C4.357 3.23799 4.76303 3.1585 5.2207 3.12109C5.67088 3.08434 6.22809 3.08496 6.91699 3.08496H9.33496V2.5C9.33496 2.13273 9.63273 1.83496 10 1.83496ZM6.91699 4.41504C6.20618 4.41504 5.71257 4.41596 5.3291 4.44727C4.95363 4.47795 4.74196 4.5348 4.58398 4.61523C4.23879 4.79113 3.95815 5.07182 3.78223 5.41699C3.70172 5.575 3.64496 5.78642 3.61426 6.16211C3.58292 6.54563 3.58203 7.03896 3.58203 7.75V9.58301C3.58203 10.7606 3.58269 11.6042 3.63672 12.2656C3.69012 12.9192 3.79255 13.3366 3.96387 13.6729C4.29959 14.3317 4.83531 14.8674 5.49414 15.2031L5.62402 15.2646C5.93806 15.3997 6.32958 15.4836 6.90137 15.5303C7.56272 15.5843 8.40657 15.585 9.58398 15.585H10.417C11.5946 15.585 12.4382 15.5843 13.0996 15.5303C13.753 15.4769 14.1706 15.3744 14.5068 15.2031L14.748 15.0684C15.2964 14.7319 15.7434 14.2493 16.0371 13.6729L16.0977 13.543C16.2328 13.2289 16.3175 12.8377 16.3643 12.2656C16.4183 11.6042 16.4189 10.7606 16.4189 9.58301V7.75C16.4189 7.03898 16.4181 6.54562 16.3867 6.16211C16.3637 5.88018 16.3259 5.69064 16.2744 5.54688L16.2188 5.41699C16.0648 5.11489 15.8304 4.86186 15.543 4.68555L15.417 4.61523C15.2591 4.53477 15.0472 4.47798 14.6719 4.44727C14.2885 4.41594 13.7947 4.41504 13.084 4.41504H6.91699Z"})),nFe=Object.freeze(Object.defineProperty({__proto__:null,default:YU},Symbol.toStringTag,{value:"Module"})),ZU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.0013 7.33331C16.0013 6.62228 16.0014 6.12894 15.9701 5.74542C15.947 5.46347 15.9092 5.27396 15.8578 5.13019L15.8021 5.00031C15.6482 4.6982 15.4137 4.44517 15.1263 4.26886L14.9994 4.19855C14.8414 4.11809 14.6298 4.06127 14.2542 4.03058C13.8708 3.99926 13.3772 3.99835 12.6663 3.99835H7.33334C6.6223 3.99835 6.12897 3.99924 5.74545 4.03058C5.46359 4.05361 5.27396 4.09047 5.13021 4.14191L5.00033 4.19855C4.69807 4.35257 4.4452 4.58669 4.26888 4.87433L4.19857 5.00031C4.11806 5.15831 4.0613 5.36972 4.0306 5.74542C3.99927 6.12894 3.99838 6.62228 3.99838 7.33331V11.7269L5.01791 10.7083L5.19466 10.5482C6.11049 9.80104 7.46204 9.85459 8.31576 10.7083L13.6038 15.9964C13.8549 15.9923 14.0676 15.9853 14.2542 15.97C14.6296 15.9394 14.8414 15.8824 14.9994 15.8021L15.1263 15.7308C15.4137 15.5545 15.6482 15.3014 15.8021 14.9993L15.8578 14.8694C15.9092 14.7257 15.947 14.536 15.9701 14.2542C16.0014 13.8707 16.0013 13.3772 16.0013 12.6663V7.33331ZM7.37533 11.6487C7.00855 11.282 6.42794 11.2593 6.03451 11.5804L5.95834 11.6487L4.00228 13.6048C4.00643 13.8555 4.01538 14.0678 4.0306 14.2542C4.06129 14.6298 4.11811 14.8413 4.19857 14.9993L4.26888 15.1263C4.44519 15.4137 4.69822 15.6481 5.00033 15.8021L5.13021 15.8577C5.27398 15.9092 5.46349 15.947 5.74545 15.97C6.12896 16.0014 6.6223 16.0013 7.33334 16.0013H11.7269L7.37533 11.6487ZM13.0853 7.91632C13.0851 7.36327 12.6364 6.91535 12.0833 6.91535C11.5302 6.91535 11.0816 7.36327 11.0814 7.91632C11.0814 8.46953 11.5301 8.91827 12.0833 8.91827C12.6365 8.91827 13.0853 8.46953 13.0853 7.91632ZM14.4154 7.91632C14.4154 9.20407 13.3711 10.2484 12.0833 10.2484C10.7956 10.2484 9.75131 9.20407 9.75131 7.91632C9.75148 6.62873 10.7957 5.58527 12.0833 5.58527C13.371 5.58527 14.4152 6.62873 14.4154 7.91632ZM17.3314 12.6663C17.3314 13.3553 17.332 13.9124 17.2953 14.3626C17.2625 14.7636 17.1975 15.1247 17.0531 15.4612L16.9867 15.6038C16.7212 16.1248 16.3173 16.5605 15.8216 16.8646L15.6038 16.9866C15.2271 17.1786 14.8206 17.2578 14.3626 17.2952C13.9124 17.332 13.3554 17.3314 12.6663 17.3314H7.33334C6.64425 17.3314 6.08729 17.332 5.63705 17.2952C5.23636 17.2625 4.87571 17.1973 4.53939 17.053L4.39681 16.9866C3.87569 16.7211 3.43919 16.3174 3.13509 15.8216L3.01302 15.6038C2.82105 15.2271 2.74185 14.8206 2.70443 14.3626C2.66766 13.9124 2.6683 13.3553 2.6683 12.6663V7.33331C2.6683 6.64422 2.66764 6.08727 2.70443 5.63702C2.74184 5.17923 2.82122 4.77341 3.01302 4.39679L3.13509 4.17804C3.43919 3.68233 3.87578 3.27848 4.39681 3.013L4.53939 2.9466C4.87568 2.80236 5.2364 2.73715 5.63705 2.70441C6.08729 2.66762 6.64424 2.66827 7.33334 2.66827H12.6663C13.3553 2.66827 13.9124 2.66764 14.3626 2.70441C14.8206 2.74183 15.2271 2.82103 15.6038 3.013L15.8216 3.13507C16.3174 3.43917 16.7211 3.87567 16.9867 4.39679L17.0531 4.53937C17.1973 4.87569 17.2625 5.23634 17.2953 5.63702C17.332 6.08727 17.3314 6.64422 17.3314 7.33331V12.6663Z"})),KU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.165 12.668C14.532 12.6682 14.8299 12.966 14.8301 13.333C14.8301 13.7001 14.5321 13.9978 14.165 13.998H5.83203C5.46476 13.998 5.16699 13.7003 5.16699 13.333C5.16717 12.9659 5.46487 12.668 5.83203 12.668H14.165Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.79981 6.00195C9.16705 6.00198 9.46484 6.29974 9.46484 6.66699V10C9.46467 10.3671 9.16695 10.665 8.79981 10.665H5.83301C5.46596 10.6649 5.16814 10.367 5.16797 10V6.66699C5.16797 6.29981 5.46585 6.00209 5.83301 6.00195H8.79981ZM6.49805 9.33496H8.13477V7.33203H6.49805V9.33496Z"}),_.createElement("path",{d:"M14.166 9.33496C14.5332 9.33496 14.8309 9.63288 14.8311 10C14.8309 10.3671 14.5332 10.665 14.166 10.665H11.7998C11.4328 10.6649 11.1349 10.367 11.1348 10C11.1349 9.63296 11.4328 9.33509 11.7998 9.33496H14.166Z"}),_.createElement("path",{d:"M14.166 6.00195C14.5333 6.00195 14.8311 6.29972 14.8311 6.66699C14.8309 7.03412 14.5332 7.33203 14.166 7.33203H11.7998C11.4328 7.3319 11.1349 7.03403 11.1348 6.66699C11.1348 6.29981 11.4326 6.00209 11.7998 6.00195H14.166Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 2.66797C14.1891 2.66797 14.7461 2.66732 15.1963 2.7041C15.654 2.74151 16.0599 2.82094 16.4365 3.0127C17.032 3.31609 17.5169 3.80107 17.8203 4.39649C18.0121 4.77301 18.0915 5.17906 18.1289 5.63672C18.1657 6.08689 18.165 6.64406 18.165 7.33301V12.666C18.165 13.3548 18.1656 13.9122 18.1289 14.3623C18.0915 14.8202 18.0122 15.2268 17.8203 15.6035C17.5169 16.199 17.032 16.6829 16.4365 16.9863C16.0599 17.1782 15.6541 17.2575 15.1963 17.2949C14.746 17.3317 14.1891 17.3311 13.5 17.3311H6.5C5.81091 17.3311 5.25395 17.3317 4.80371 17.2949C4.34589 17.2575 3.94011 17.1782 3.56348 16.9863C2.96804 16.6829 2.48311 16.1989 2.17969 15.6035C1.98781 15.2268 1.90851 14.8202 1.87109 14.3623C1.83435 13.9122 1.83496 13.3548 1.83496 12.666V7.33301C1.83496 6.64407 1.83431 6.08689 1.87109 5.63672C1.90852 5.17906 1.98793 4.77301 2.17969 4.39649C2.48314 3.80107 2.96803 3.31609 3.56348 3.0127C3.94006 2.82094 4.34597 2.74151 4.80371 2.7041C5.25395 2.66732 5.81092 2.66797 6.5 2.66797H13.5ZM6.5 3.99805C5.78898 3.99805 5.29563 3.99894 4.91211 4.03027C4.53651 4.06097 4.32499 4.11777 4.16699 4.19824C3.82183 4.37412 3.54117 4.65487 3.36524 5C3.28475 5.15796 3.22797 5.36961 3.19727 5.74512C3.16594 6.12858 3.16504 6.62214 3.16504 7.33301V12.666C3.16504 13.3767 3.16598 13.8705 3.19727 14.2539C3.22794 14.6293 3.28485 14.8411 3.36524 14.999C3.54114 15.3443 3.82178 15.6258 4.16699 15.8018C4.32498 15.8822 4.53656 15.939 4.91211 15.9697C5.29563 16.0011 5.78896 16.001 6.5 16.001H13.5C14.211 16.001 14.7044 16.0011 15.0879 15.9697C15.4634 15.939 15.675 15.8822 15.833 15.8018C16.1782 15.6258 16.4589 15.3443 16.6348 14.999C16.7152 14.8411 16.7721 14.6293 16.8027 14.2539C16.834 13.8705 16.835 13.3767 16.835 12.666V7.33301C16.835 6.62214 16.8341 6.12858 16.8027 5.74512C16.772 5.36961 16.7153 5.15796 16.6348 5C16.4588 4.65487 16.1782 4.37412 15.833 4.19824C15.675 4.11777 15.4635 4.06097 15.0879 4.03027C14.7044 3.99894 14.211 3.99805 13.5 3.99805H6.5Z"})),QU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2998 2.6709C13.318 2.66997 13.3361 2.67031 13.3545 2.6709C13.739 2.67372 14.0728 2.68047 14.3623 2.7041C14.8202 2.74151 15.2268 2.82085 15.6035 3.0127L15.8213 3.13477C16.317 3.4388 16.7208 3.87553 16.9863 4.39649L17.0527 4.53906C17.197 4.87528 17.2622 5.23618 17.2949 5.63672C17.3317 6.08689 17.3311 6.64407 17.3311 7.33301V12.666C17.3311 13.3549 17.3317 13.9121 17.2949 14.3623C17.2622 14.7632 17.1971 15.1245 17.0527 15.4609L16.9863 15.6035C16.6829 16.1988 16.1988 16.6829 15.6035 16.9863C15.2268 17.1783 14.8203 17.2575 14.3623 17.2949C13.9121 17.3317 13.3549 17.3311 12.666 17.3311H7.33301C6.64403 17.3311 6.08691 17.3317 5.63672 17.2949C5.23614 17.2622 4.87531 17.197 4.53906 17.0527L4.39649 16.9863C3.87551 16.7208 3.4388 16.317 3.13477 15.8213L3.0127 15.6035C2.82086 15.2269 2.74151 14.8202 2.7041 14.3623C2.66736 13.9122 2.66797 13.3548 2.66797 12.666V7.33301C2.66797 6.64407 2.66732 6.08689 2.7041 5.63672C2.74152 5.17906 2.82093 4.77301 3.0127 4.39649C3.31613 3.80105 3.80103 3.31611 4.39649 3.0127C4.77304 2.82092 5.17902 2.74152 5.63672 2.7041C6.08691 2.66732 6.64403 2.66797 7.33301 2.66797H12.666C12.891 2.66797 13.1021 2.66971 13.2998 2.6709ZM3.99805 8.16504V12.666C3.99805 13.3767 3.99899 13.8705 4.03027 14.2539C4.06094 14.6292 4.11789 14.8411 4.19824 14.999L4.26856 15.126C4.4448 15.4133 4.69804 15.6478 5 15.8018L5.12988 15.8574C5.27361 15.9089 5.46331 15.9467 5.74512 15.9697C6.12859 16.0011 6.6221 16.001 7.33301 16.001H12.666C13.3767 16.001 13.8705 16.001 14.2539 15.9697C14.6292 15.9391 14.8411 15.8821 14.999 15.8018C15.3443 15.6258 15.6258 15.3443 15.8018 14.999L15.8574 14.8691C15.9088 14.7254 15.9467 14.5355 15.9697 14.2539C16.001 13.8705 16.001 13.3767 16.001 12.666V8.16504H3.99805ZM12.6484 6.83496H15.999C15.9976 6.38034 15.9932 6.03187 15.9697 5.74512C15.9467 5.46336 15.9089 5.2736 15.8574 5.12988L15.8018 5C15.6478 4.69805 15.4133 4.44479 15.126 4.26856L14.999 4.19824C14.8411 4.11788 14.6292 4.06094 14.2539 4.03027C14.1122 4.01871 13.9555 4.01257 13.7783 4.00781L12.6484 6.83496ZM7.33301 3.99805C6.6221 3.99805 6.12859 3.99894 5.74512 4.03027C5.36955 4.06098 5.15798 4.11775 5 4.19824C4.65484 4.37414 4.37416 4.65485 4.19824 5C4.11776 5.15796 4.06098 5.36961 4.03027 5.74512C4.00685 6.03186 4.00272 6.38034 4.00098 6.83496H6.21582L7.35059 3.99805H7.33301ZM7.64844 6.83496H11.2158L12.3506 3.99805H8.7832L7.64844 6.83496Z"}));function km(t){switch(t){case ht.Search:return C4;case ht.Images:return ZU;case ht.Videos:return QU;case ht.News:return KU;case ht.Chat:return null}}function ui({IconComponent:t=YU,className:e,children:n}){return r.jsxs("div",{className:z("bg-token-bg-tertiary flex min-h-[160px] flex-col items-center justify-center gap-3 rounded-3xl",e),children:[r.jsx(t,{className:"icon-xl text-token-text-tertiary"}),r.jsx("div",{className:"text-token-text-tertiary text-center",children:n})]})}function JU({content:t,isAdultSearchEnabled:e,isLatestTurn:n,descriptionClassName:s,source:o="search",className:a}){const{navlinks:i,navlinks_ready:l,safe_search_off:c,safety:d}=t.widgets,u=V(),f=_.useMemo(()=>qU(u),[u]),m=re(()=>Rf(u)),g=i&&i.length>0,h=g&&(!m||d!=="adult"||!!c==!!e||!c&&!n||c===void 0)?Qr([],ju(i,f,l),!1):[];if(_.useEffect(()=>{h.length>0&&B.logStructuredEvent(od,{step:_l.ATLAS_NAVLINKS_ACTION_STEP_SHOW,source:o==="navlinks"?Ma.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:Ma.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB})},[h.length,o]),h.length===0){const v=km(ht.Search),y=g&&m;return r.jsx(ui,{IconComponent:v,className:y?"min-h-[120px]!":"",children:y?r.jsx(j,{id:"MFLPAn",defaultMessage:"No links to show"}):r.jsx(j,{id:"dOHukr",defaultMessage:"No links found"})})}const x=rFe(h);return r.jsx("div",{className:z("thread-sm:-mx-4 -mx-2 flex flex-col gap-3",a),children:x.map((v,y)=>r.jsx(sFe,{groupIndex:y,navlinks:v,source:o,descriptionClassName:s},y))})}function sFe({groupIndex:t,navlinks:e,source:n,descriptionClassName:s}){const o=e[0],a=e.slice(1);return r.jsxs("div",{className:"flex flex-col",children:[r.jsx(oFe,{navlinkIndex:t,mainNavlink:o,source:n,descriptionClassName:s}),a.length>0&&r.jsx("div",{className:"ms-4 flex flex-col",children:a.map((i,l)=>r.jsx(aFe,{navlinkIndex:t+1+l,navlink:i,source:n,descriptionClassName:s},i.url))})]})}function oFe({mainNavlink:t,navlinkIndex:e,source:n,descriptionClassName:s}){const o=()=>{B.logStructuredEvent(od,{step:_l.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:n==="navlinks"?Ma.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:Ma.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB,navlinkIndex:e})};return r.jsx(Z1,{url:t.url,domain:t.domain,title:t.title,description:t.snippet,descriptionClassName:s,onLogClick:o})}function aFe({navlink:t,navlinkIndex:e,source:n,descriptionClassName:s}){const o=_.useRef(!1),a=()=>{B.logStructuredEvent(od,{step:_l.ATLAS_NAVLINKS_ACTION_STEP_CLICK,source:n==="navlinks"?Ma.ATLAS_NAVLINKS_SOURCE_CHAT_LIST:Ma.ATLAS_NAVLINKS_SOURCE_SEARCH_TAB,navlinkIndex:e})};return r.jsx(to,{href:t.url,target:"_self",className:"hover:bg-token-interactive-bg-secondary-hover ms-2.5 flex flex-col rounded-xl px-4 py-2.5",draggable:!1,onMouseDown:()=>o.current=!1,onMouseMove:()=>o.current=!0,onClick:i=>o.current?(o.current=!1,i.preventDefault()):a(),children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"mb-1 truncate text-base font-medium text-[var(--interactive-label-accent-default)]",children:t.title}),t.snippet&&r.jsx("div",{className:z("text-token-text-secondary mb-1 truncate text-sm font-normal",s),children:t.snippet})]})},t.url)}function rFe(t){return Object.values(t.reduce((e,n)=>{const s=n.domain;return e[s]||(e[s]=[]),e[s].push(n),e},{}))}const iFe=4,Bst=t=>{"use forget";const e=W.c(19),{clientThreadId:n,query:s,className:o,state:a,isAssistantResponseSuppressed:i}=t,[,l]=wm(),{showNavlinksWidget:c,showLongList:d,navlinksOptimistic:u,navlinksReady:f,imagesOptimistic:m,videosOptimistic:g,newsOptimistic:p,showReason:h,analytics:x}=a;if(!c)return null;const v=!i&&"mb-8";let y;e[0]!==o||e[1]!==v?(y=z(v,o),e[0]=o,e[1]=v,e[2]=y):y=e[2];let b;e[3]!==x||e[4]!==n||e[5]!==m||e[6]!==i||e[7]!==l||e[8]!==u||e[9]!==f||e[10]!==p||e[11]!==s||e[12]!==d||e[13]!==h||e[14]!==g?(b=d?r.jsxs(r.Fragment,{children:[r.jsx(JU,{content:{content_type:ut.SuperWidget,widgets:{navlinks:u.slice(0,iFe),images:m,videos:g,news:p,navlinks_ready:f}},className:"pt-1",descriptionClassName:"line-clamp-1",source:"navlinks"}),r.jsxs("div",{className:"thread-sm:-mx-4 -mx-2",children:[r.jsx("div",{className:"mt-3 mb-6 flex w-full items-center justify-between px-4",children:r.jsx("button",{type:"button",onClick:()=>l({tabType:ht.Search}),className:"text-token-text-primary text-sm hover:underline",children:r.jsx(j,{id:"navlinks.showAllSearchResults",defaultMessage:"Show all search results"})})}),!i&&r.jsx("hr",{className:"mx-4"})]})]}):r.jsx(JDe,{content:{content_type:ut.SuperWidget,widgets:{navlinks:u,images:m,videos:g,news:p,navlinks_ready:f}},clientThreadId:n,navlinksShowDecisionSource:h,analytics:x,query:s}),e[3]=x,e[4]=n,e[5]=m,e[6]=i,e[7]=l,e[8]=u,e[9]=f,e[10]=p,e[11]=s,e[12]=d,e[13]=h,e[14]=g,e[15]=b):b=e[15];let C;return e[16]!==y||e[17]!==b?(C=r.jsx("div",{id:"navlinks-content",className:y,children:b}),e[16]=y,e[17]=b,e[18]=C):C=e[18],C};function lFe(t){return t.split(new RegExp("[^\\p{L}\\p{N}]+","u")).filter(Boolean).length}const cFe=Hn(t=>{let n=rs(t,"3205212221").get("numWords",3);const s=Ps(t,"999809785").get("numWordsShowNavlinks",-1);return s!==-1&&(n=s),n});function dFe(t){return cFe(t)}function Ust({conversation:t,threadContent:e,query:n,triggeredSearch:s,messageGroups:o,allMessages:a,isAdultSearchEnabled:i}){"use no forget";var X,ee,ie,de,me,xe,pe,Me,Ce,ke,Le,De,le,oe,Ee,be,fe;const l=V(),c=dFe(l),d=lFe(n!=null?n:""),u=$X(n!=null?n:"",i),f=re(()=>Rf(l)),m=u.safety===Jr.ADULT||((X=e==null?void 0:e.widgets)==null?void 0:X.safety)==="adult",g=!!u.safeSearchOff||!!((ee=e==null?void 0:e.widgets)!=null&&ee.safe_search_off),p=i===void 0||((ie=e==null?void 0:e.widgets)==null?void 0:ie.safe_search_off)===void 0||((de=e==null?void 0:e.widgets)==null?void 0:de.safe_search_off)===i,h=_.useMemo(()=>{var ue;return p?(ue=e==null?void 0:e.widgets)==null?void 0:ue.navlinks:[]},[p,(me=e==null?void 0:e.widgets)==null?void 0:me.navlinks]),x=(xe=bo(a))==null?void 0:xe.id,v=_.useEffectEvent(()=>{_b.set(t,{messageId:x!=null?x:"",safeSearchOff:g!=null?g:!1})});_.useEffect(()=>{!m||!x||v()},[m,x]);const y=d>0&&d<=c&&!u.isNoForceSearch&&u.navlinks.length>0,b=u.isNavlinkIntent===!0||u.safety===Jr.ADULT||!!((pe=e==null?void 0:e.widgets)!=null&&pe.is_navlinks_emphasize)||((Me=e==null?void 0:e.widgets)==null?void 0:Me.safety)==="adult",C=_.useMemo(()=>qU(l),[l]),[S,E]=_.useState(ju(Qr([],h&&h.length>0?h:u.navlinks,!0),C)),[k,T]=_.useState((Ce=e==null?void 0:e.widgets)!=null&&Ce.images&&e.widgets.images.length>0?e.widgets.images:u.images),[M,A]=_.useState((ke=e==null?void 0:e.widgets)!=null&&ke.videos&&e.widgets.videos.length>0?e.widgets.videos:u.videos),[I,N]=_.useState((Le=e==null?void 0:e.widgets)!=null&&Le.news&&e.widgets.news.length>0?e.widgets.news:u.news),[L,O]=_.useState({show:!u.isForceHide&&(y||u.isSearchLikely===!0||b||s),showReason:y?ga.ShortQuery:u.isSearchLikely===!0?ga.Classifier:s?ga.Conversation:void 0}),D=_.useRef({navlinks:h&&h.length>0?"thread":u.navlinks.length>0?"prefetched":null,images:(De=e==null?void 0:e.widgets)!=null&&De.images&&e.widgets.images.length>0?"thread":u.images.length>0?"prefetched":null,videos:(le=e==null?void 0:e.widgets)!=null&&le.videos&&e.widgets.videos.length>0?"thread":u.videos.length>0?"prefetched":null,news:(oe=e==null?void 0:e.widgets)!=null&&oe.news&&e.widgets.news.length>0?"thread":u.news.length>0?"prefetched":null}),$=D.current.navlinks==="prefetched"?((be=(Ee=u.fetchingStatus)==null?void 0:Ee.navlinks)==null?void 0:be.status)===ir.DONE:((fe=e==null?void 0:e.widgets)==null?void 0:fe.navlinks_ready)===!0,H=S.length>0?S:ju(u.navlinks,C),G=k.length>0?k:u.images,Z=M.length>0?M:u.videos,Q=I.length>0?I:u.news,q=!u.isForceHide&&(L.show||u.isSearchLikely===!0||b||s),Y=(ue,_e)=>{const Te=ju(Qr(S,ue,!0),C,_e);E(Te)};_.useEffect(()=>{var Te,$e,Ne,Ae,He;if(!u)return;function ue({prefetchedData:Qe,threadData:et,sourceType:Ct,setData:vt,isFinalPrefetched:At,isFinalThread:Ht}){const Ot=D.current[Ct];function Vt(en){return Array.isArray(en)&&en.length>0}Vt(et)&&(!Ot||Ot==="thread")?(D.current[Ct]="thread",vt(et,Ht)):Vt(Qe)&&(!Ot||Ot==="prefetched")&&(D.current[Ct]="prefetched",vt(Qe,At))}ue({prefetchedData:u.navlinks,threadData:h,sourceType:"navlinks",setData:Y,isFinalPrefetched:(($e=(Te=u.fetchingStatus)==null?void 0:Te.navlinks)==null?void 0:$e.status)===ir.DONE,isFinalThread:((Ne=e==null?void 0:e.widgets)==null?void 0:Ne.navlinks_ready)===!0}),ue({prefetchedData:u.images,threadData:(Ae=e==null?void 0:e.widgets)==null?void 0:Ae.images,sourceType:"images",setData:T}),ue({prefetchedData:u.videos,threadData:(He=e==null?void 0:e.widgets)==null?void 0:He.videos,sourceType:"videos",setData:A}),ue({prefetchedData:u.news,threadData:e==null?void 0:e.widgets.news,sourceType:"news",setData:N}),(u.isSearchLikely||s||y)&&!L.show&&!u.isForceHide&&O({show:!0,showReason:y?ga.ShortQuery:u.isSearchLikely?ga.Classifier:ga.Conversation})},[u,e,s,y]),_.useEffect(()=>{var $e;if(!f)return;const ue=D.current.navlinks,_e=ue==="prefetched"&&u.safeSearchOff!==i,Te=ue==="thread"&&(($e=e==null?void 0:e.widgets)==null?void 0:$e.safe_search_off)!==i;if(S.length===0&&!u||_e||Te){const Ne=h&&h.length>0,Ae=Ne?h:u.safeSearchOff===i?u.navlinks:[];if(Ae.length===0)return;D.current.navlinks=Ne?"thread":"prefetched",E(ju(Qr([],Ae,!0),C))}},[f,u,e,i,h,C,S.length]);const te=q&&H.length>0,ae=MNe(t.id,void 0),se=ae!==pU?ae:null,ce=_.useMemo(()=>uFe(s,o,a),[s,o,a]);return{showNavlinksWidget:te,showLongList:b,showReason:L.showReason,isClassifiedAdult:m,isSafeSearchOff:g,navlinksOptimistic:H,navlinksReady:$,imagesOptimistic:G,videosOptimistic:Z,newsOptimistic:Q,analytics:u.analytics,title:se,header:ce}}function uFe(t,e,n){const s=n.findLast(d=>o6(d).length>0),o=o6(s);let a=!1,i,l=-1;for(let d=0;d<e.length;d++)if(e[d].type===ar.SearchGPTQuery){l=d,a=!0;break}if(a)for(let d=e.length-1;d>l;d--){const u=e[d];if(u.type===ar.Text||u.type===ar.CoTSearchTool){i=u.messages[0];break}}return{showSearchGPTQuery:t&&a&&(!i||!O3(i)),nextMessage:i,searchResultGroups:o}}const fFe=R(()=>P(()=>import("./imdfj4m85ztq7yte.js"),__vite__mapDeps([482,1])),{loading:t=>F(t)}),mFe=R(()=>P(()=>import("./4h8qsvyuv2fcir5w.js"),__vite__mapDeps([483,1])),{loading:t=>F(t)}),gFe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),a9=[1,2,3,4,10,20,30],pFe=1,hFe=["g-67e595af0a408191b84ee532fca12cd1","g-67ec3b78892481918c89067962526695","g-67ec3b4988f8819184c5454e18f5e84b","g-67ec3ad40750819181ccffa6a6f050d5","g-67edaaa3d3a081918205d0c470f00a32","g-67edab030ac881918ce8fa5c75a8e1b3","g-67edab2fc0f48191881a20ac98fedf6f","g-67edab4a24fc8191b975acaa8da2dcef"];function XU({clientThreadId:t,isInline:e=!1}){var se,ce;const n=V(),s=xt(n,t),o=zo(Ca.isBusinessWorkspace),a=Mq(n),i=_.useRef(!1),l=Kn(t),[c,d,u,f]=Ve(t,X=>[X==null?void 0:X.mode,he.getRequestId(X),he.getConversationLastTurn(X),he.getConversationTurns(X).filter(ee=>ee.role===Ke.Assistant).length]),m=re(()=>{var X;return((X=bi(s))==null?void 0:X.value)===Xt.STREAMING}),g=!tt(n),p=_.useMemo(()=>{if(!l)return-1;const X=Aq(l);return X()>pFe?-1:a9[Math.floor(X()*a9.length)]},[l]),h=Ia(d),x=((se=Bh(t))==null?void 0:se.value)===Xt.STREAMING,v=m||h||x,y=function(){return Math.random()<.9?"default":"personality_v1"},[b,C]=_.useState(null),[S,E]=_.useState(!1),[k,T]=_.useState(!1),[M,A]=_.useState(!1),[I,N]=_.useState(y),L=(X,ee,ie)=>{var me;const de=(me=u==null?void 0:u.messages[0])==null?void 0:me.id;C(X),N(ee),Z(de,X,ee,ie)},O=(u==null?void 0:u.role)===Ke.Assistant,D=u==null?void 0:u.messages.find(X=>{var ee;return(ee=X.metadata)==null?void 0:ee.async_task_id}),$=(ce=D==null?void 0:D.metadata)==null?void 0:ce.async_task_id,H=wr(X=>ef.getTask($!=null?$:"",X)),G=!!(H&&S3(H)),Z=_.useMemo(()=>fi((X,ee,ie,de)=>{l&&X&&(o&&a?$te({rating:Yv(ee),shown_at_assistant_turn:p,prompt:ie},l,X):o||ge.safePost("/conversation/{conversation_id}/rating",{parameters:{path:{conversation_id:l}},requestBody:{message_id:X,rating:ee,shown_at_assistant_turn:p,prompt:ie,popup_ui_message:de},authOption:sn.SendIfAvailable})),B.logEvent("Conversation Rating Submitted",{rating:ee,showAtAssistantTurn:p,conversationId:l,prompt:ie,popupUiMessage:de}),E(!0),setTimeout(()=>{T(!0)},1500)},2e3),[o,a,l,p]),Q=es(n),q=ne(),Y=_.useMemo(()=>I==="personality_v1"?q.formatMessage({id:"rating.instructions.personality_v1",defaultMessage:"Do you like this personality?"}):e?"Is this helpful so far?":"Is this conversation helpful so far?",[q,I,e]),te=f!==p||v||G||!O||!!o&&!a||(c==null?void 0:c.kind)!==wt.PrimaryAssistant&&(c==null?void 0:c.kind)!==wt.FlyingCircusCustomization&&(c==null?void 0:c.gizmo_id)!==void 0&&!hFe.includes(c==null?void 0:c.gizmo_id)||M||g||Q;_.useEffect(()=>{!te&&!i.current&&(B.logEvent("Conversation Rating Shown",{showAtAssistantTurn:p,conversationId:l}),i.current=!0)},[te]);const ae=xd();return M||!ae.forceShowConvoRating&&te?null:r.jsxs(r.Fragment,{children:[r.jsx(fn,{children:S&&!k&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:r.jsx(r9,{$padded:!0,$fullRounded:e,children:r.jsx("span",{className:"text-token-text-tertiary text-sm",children:r.jsx(j,{id:"rating.thanks",defaultMessage:"Thanks for your feedback!"})})})},"submitted")}),!S&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},children:r.jsxs(r9,{$padded:!1,$fullRounded:e,children:[r.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-4 px-4 py-2.5 text-sm whitespace-nowrap",children:[r.jsx("span",{children:Y}),r.jsxs("div",{className:"flex items-center gap-5",children:[r.jsx(I2,{$selected:b==="thumbsUp",onClick:()=>L("thumbsUp",I,Y),children:r.jsx(fFe,{className:"icon"})}),r.jsx(I2,{$selected:b==="thumbsDown",onClick:()=>L("thumbsDown",I,Y),children:r.jsx(mFe,{className:"icon"})})]})]}),!e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-token-main-surface-tertiary w-px flex-1 self-stretch"}),r.jsx(I2,{className:"p-3",$selected:!1,onClick:()=>A(!0),children:r.jsx(gFe,{className:"icon text-token-text-secondary hover:text-token-text-primary"})})]})]})},"rating")]})}var PE;const I2=ft.button(PE||(PE=ct(["\n  ","\n  hover:text-token-text-primary\n"])),t=>t.$selected?"text-token-text-primary":"text-token-text-secondary");var RE;const r9=ft.div(RE||(RE=ct(["inline-flex border border-gray-100 dark:border-gray-700\n","\n","\n"])),t=>t.$padded&&"py-2.5 px-4",t=>t.$fullRounded?"rounded-full":"rounded-xl"),_Fe=R(()=>P(()=>import("./n4gaz75flpm3utiu.js"),__vite__mapDeps([484,1,10,11])));function e$({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n}){var u,f;const s=V(),o=st(s),a=(u=o==null?void 0:o.isWorkspacePlan())!=null?u:!1,i=Ve(t,m=>{const g=he.getConversationTurns(m);let p=0;for(let h=g.length-1;h>=0;h--){const x=g[h];if(x.messages.some(v=>{var y;return(y=v.metadata)==null?void 0:y.is_indepth_feedback}))return!0;if(x.messages.some(v=>v.author.role===Ke.Assistant)&&p++,p>=3)break}return!1}),l=Kn(t),c=Xc(m=>m.voiceFeedbackThread),d=l===c;return i?"none":d&&l&&!a?"voice":(f=n.clientMetadata)!=null&&f.rating&&e?"inline":"conversation"}function $st({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n,allGroupedMessages:s,currentModelId:o}){const a=V(),i=Pl(),l=ve(a,"294957382"),c=e$({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n}),d=Kn(t),{voiceName:u}=N1();if(c==="none")return null;let f=null;if(c==="voice"&&d&&!i)Ut.feedbackShown.success({voice:u}),f=r.jsx("div",{className:"text-center",children:r.jsx(OEe,{serverThreadId:d})});else if(c==="inline")f=r.jsx(_Fe,{clientThreadId:t,conversationMessage:n,allGroupedMessages:s,currentModelId:o});else if(c==="conversation"){if(l)return null;f=r.jsx("div",{className:"text-center",children:r.jsx(XU,{clientThreadId:t})})}return r.jsx("div",{className:"mt-3 w-full empty:hidden",children:f})}function Vst({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n}){const s=V(),o=ve(s,"294957382");return e$({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n})!=="conversation"||!o?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grow"}),r.jsx(XU,{clientThreadId:t,isInline:!0})]})}const xFe=R(()=>P(()=>import("./mc0scufts54dtafa.js"),__vite__mapDeps([485,1,10,11,486,431,71])).then(t=>t.CAFeedbackModal));function Hst({clientThreadId:t,currentModelConfig:e}){const n=V(),s=Iq(t),o=TRe(e,s),a=zo(Ca.isBusinessWorkspace),i=re(()=>yn(xt(n,t))),l=ih(i,n);return{onChangeRating:_.useCallback(({nodeId:d,messageId:u,rating:f})=>{var h,x;const m=jt(t);f&&B.logEvent("Rated Result",{id:u,threadId:m,rating:f,model:e==null?void 0:e.id});const g=he.getTree(mt(t)),p=g.getNodeByIdOrMessageId(d);if(m!==void 0&&(a&&ve(n,"4147309512")?f&&Ute({rating:Yv(f)},m,u):a||(f?ge.safePost("/conversation/message_feedback",{requestBody:{message_id:u,conversation_id:m,rating:f},authOption:sn.SendIfAvailable}):ge.safeDelete("/conversation/message_feedback",{requestBody:{message_id:u,conversation_id:m},authOption:sn.SendIfAvailable}))),Ze(t,v=>{cn.updateTree(v,y=>{y.updateNodeMetadata(d,{rating:f!=null?f:void 0})})}),f&&(o||l)){dt(n,xFe,{citations:(x=(h=p.message.metadata)==null?void 0:h.citations)!=null?x:[],rating:f,conversationId:m!=null?m:"",messageId:u,conversationTree:g,nodeId:d,isGlaux:l});return}},[n,t,e==null?void 0:e.id,a,o,l])}}function Gst(t){const{isCompletionRequestInProgress:e,isUserTurn:n,message:s}=t,o=ne(),a=_.useRef(e);_.useEffect(()=>{if(!e)return;let i;Om.setLiveRegionAssertive(o.formatMessage({id:"0LFLpz",defaultMessage:"ChatGPT is generating a response..."}));const l=o.formatMessage({id:"uqqkLX",defaultMessage:"ChatGPT is still generating a response..."}),c=5e3;function d(){Om.setLiveRegionAssertive(""),i=window.setTimeout(()=>{Om.setLiveRegionAssertive(l),i=window.setTimeout(()=>d(),c)},1e3)}return i=window.setTimeout(d,c),()=>{window.clearTimeout(i)}},[e,o]),_.useEffect(()=>{var d,u,f;if(e||n||!s||!a.current){a.current=e;return}const{content:i}=s,l=(i.content_type===ut.Text,i),c=o.formatMessage({id:"lZ4dVJ",defaultMessage:"ChatGPT says: {message}"},{message:(f=(u=(d=l==null?void 0:l.parts)==null?void 0:d.join)==null?void 0:u.call(d,"\n"))!=null?f:""});Om.setLiveRegionAssertive(c),a.current=!1},[n,e,o,s])}var j2,i9;function yFe(){if(i9)return j2;i9=1;function t(e,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(!n(e[s],s,e))return!1;return!0}return j2=t,j2}var N2,l9;function vFe(){if(l9)return N2;l9=1;var t=jq();function e(n,s){var o=!0;return t(n,function(a,i,l){return o=!!s(a,i,l),o}),o}return N2=e,N2}var P2,c9;function bFe(){if(c9)return P2;c9=1;var t=yFe(),e=vFe(),n=XE(),s=j3(),o=N3();function a(i,l,c){var d=s(i)?t:e;return c&&o(i,l,c)&&(l=void 0),d(i,n(l,3))}return P2=a,P2}var CFe=bFe();const Wst=Zn(CFe);var R2,d9;function SFe(){if(d9)return R2;d9=1;function t(e){return e&&e.length?e[0]:void 0}return R2=t,R2}var L2,u9;function wFe(){return u9||(u9=1,L2=SFe()),L2}var kFe=wFe();const zst=Zn(kFe);function EFe(t){return t.nodeType===Node.ELEMENT_NODE}function t$(t){var e;if(EFe(t)){if(["THEAD","TR","TD","TH"].includes(t.nodeName.toUpperCase())){let n=t.parentNode;for(;n&&n.nodeName!=="TABLE";)n=n.parentNode;if(!n){Qs.debug("Found table element without a parent <table>");const s=document.createElement("table");(e=t.parentNode)==null||e.insertBefore(s,t),s.appendChild(t)}}t.attributes&&[...t.attributes].forEach(n=>{["style"].includes(n.name)&&t.removeAttribute(n.name)})}t.childNodes.forEach(t$)}function TFe(t){t.childNodes.forEach(t$)}function MFe(t){var o;const e=t.currentTarget.ownerDocument,n=e.defaultView;t.preventDefault();const s=n==null?void 0:n.getSelection();if(s&&s.rangeCount>0){const i=s.getRangeAt(0).cloneContents();TFe(i),i.querySelectorAll("script, [class*='select-none']").forEach(u=>{u.remove()});const l=e.createElement("div");l.appendChild(i),e.body.appendChild(l);const c=l.innerHTML;let d=l.innerText;d!=null&&d.trim()||(d=(o=l.textContent)!=null?o:""),d=d.replace(/\u00a0/g," "),e.body.removeChild(l),t.clipboardData.setData("text/html",c),t.clipboardData.setData("text/plain",d)}}function f9(t){return t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement}function AFe(t){const e=t.nativeEvent;if(typeof e.composedPath=="function"){for(const n of e.composedPath())if(f9(n))return!0}return f9(t.target)}const qst=t=>{"use forget";const e=W.c(4),n=V(),s=Es();let o;return e[0]!==t||e[1]!==n||e[2]!==s?(o=a=>{var u,f;AFe(a)||MFe(a);const{currentTarget:i}=a,l=(u=i.closest("[data-message-id]"))==null?void 0:u.getAttribute("data-message-id"),c=(f=document.getSelection())==null?void 0:f.toString(),d=jt(t);!l||!c||!d||s||a1(n,{source:"keyboard",type:"copy",messageId:l,serverThreadId:d,selectedText:c,location:"selection",contentType:"text"})},e[0]=t,e[1]=n,e[2]=s,e[3]=o):o=e[3],o},n$=_.createContext(!1);function Yst(){return _.useContext(n$)}function Zst({children:t}){return r.jsx(n$.Provider,{value:!0,children:t})}const IFe=R(()=>P(()=>import("./9paxni9f8n7suc5d.js"),__vite__mapDeps([475,1])),{loading:t=>F(t)});function jFe(t){"use forget";var S,E,k,T,M,A;const e=W.c(31),{conversation:n,isRootVisible:s,isPanelVisible:o,onOpenPanel:a,onClosePanel:i,backMessage:l}=t;let c;e[0]!==n?(c=()=>yn(n),e[0]=n,e[1]=c):c=e[1];const d=re(c);let u;e[2]!==n?(u=()=>ea(n),e[2]=n,e[3]=u):u=e[3];const f=re(u),m=Nb(),g=Rb(n,m,!1);let p;e:{if(!d||!f){let Q;e[4]===Symbol.for("react.memo_cache_sentinel")?(Q={primaryModelLabel:null,secondaryModelLabel:null},e[4]=Q):Q=e[4],p=Q;break e}let I;e[5]!==d.id||e[6]!==f?(I=hf(d.id,f),e[5]=d.id,e[6]=f,e[7]=I):I=e[7];const{selectedCategory:N,fullModelLabel:L}=I;let O;if(e[8]!==d.id||e[9]!==f.categories||e[10]!==N){let Q;e[12]!==d.id||e[13]!==N?(Q=q=>{const{categoryId:Y,defaultModel:te,supportedModels:ae}=q;return Y===N||te===d.id||(ae==null?void 0:ae.includes(d.id))},e[12]=d.id,e[13]=N,e[14]=Q):Q=e[14],O=f.categories.find(Q),e[8]=d.id,e[9]=f.categories,e[10]=N,e[11]=O}else O=e[11];const D=O,$=(k=(E=(S=f.title)!=null?S:D==null?void 0:D.label)!=null?E:d.title)!=null?k:d.id,H=(A=(M=(T=D==null?void 0:D.label)!=null?T:L)!=null?M:d.title)!=null?A:d.id,G=H&&H!==$?H:null;let Z;e[15]!==$||e[16]!==G?(Z={primaryModelLabel:$,secondaryModelLabel:G},e[15]=$,e[16]=G,e[17]=Z):Z=e[17],p=Z}const{primaryModelLabel:h,secondaryModelLabel:x}=p,v=s&&h;let y;e[18]!==a||e[19]!==h||e[20]!==x||e[21]!==v?(y=v?r.jsx(r.Fragment,{children:r.jsx(K.Item,{fillContainer:!0,onSelect:I=>{I.preventDefault(),a()},subMenu:!0,children:r.jsxs("div",{className:"flex w-full items-baseline gap-2 text-sm",children:[r.jsx("span",{className:"text-token-text-primary",children:h}),x?r.jsx("span",{className:"text-token-text-tertiary",children:x}):null]})})}):null,e[18]=a,e[19]=h,e[20]=x,e[21]=v,e[22]=y):y=e[22];let b;e[23]!==l||e[24]!==g||e[25]!==o||e[26]!==i?(b=o?r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(IFe,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:I=>{I.preventDefault(),i()},fillContainer:!0,children:r.jsx(j,w({},l))}),r.jsx(K.Separator,{}),r.jsx(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(Pb,{sections:g})})]}):null,e[23]=l,e[24]=g,e[25]=o,e[26]=i,e[27]=b):b=e[27];let C;return e[28]!==y||e[29]!==b?(C=r.jsxs(r.Fragment,{children:[y,b]}),e[28]=y,e[29]=b,e[30]=C):C=e[30],C}function m9(t){"use forget";const e=W.c(31),{activeId:n,hideOverflowMenu:s,onSelect:o}=t,{conversations:a,hasNextPage:i,fetchNextPage:l,isLoading:c,isFetchingNextPage:d,refetch:u}=Dh();let f,m;e[0]!==u?(f=()=>{u()},m=[u],e[0]=u,e[1]=f,e[2]=m):(f=e[1],m=e[2]),_.useEffect(f,m);let g;e[3]!==l||e[4]!==i?(g=E=>{if(E==null)return;const k=new IntersectionObserver(T=>{T[0].isIntersecting&&i&&l()});return k.observe(E),()=>{k.disconnect()}},e[3]=l,e[4]=i,e[5]=g):g=e[5];const p=g;let h;if(e[6]!==n||e[7]!==a){let E;e[9]!==n?(E=k=>k.id!==n,e[9]=n,e[10]=E):E=e[10],h=a.filter(E),e[6]=n,e[7]=a,e[8]=h}else h=e[8];const x=h;let v;e[11]!==p||e[12]!==c?(v=c?NFe:p,e[11]=p,e[12]=c,e[13]=v):v=e[13];let y;e[14]!==n||e[15]!==i||e[16]!==s||e[17]!==x||e[18]!==o||e[19]!==v?(y=r.jsx(WB,{activeId:n,hasNextPage:i,items:x,infiniteScrollTriggerElementRef:v,hideOverflowMenu:s,onSelect:o}),e[14]=n,e[15]=i,e[16]=s,e[17]=x,e[18]=o,e[19]=v,e[20]=y):y=e[20];let b;e[21]!==c||e[22]!==x.length?(b=x.length===0&&!c&&r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:r.jsx(j,w({},PFe.noConversations))}),e[21]=c,e[22]=x.length,e[23]=b):b=e[23];let C;e[24]!==d||e[25]!==c?(C=(c||d)&&r.jsxs("div",{children:[r.jsx(xo,{}),r.jsx(xo,{}),r.jsx(xo,{})]}),e[24]=d,e[25]=c,e[26]=C):C=e[26];let S;return e[27]!==y||e[28]!==b||e[29]!==C?(S=r.jsxs(r.Fragment,{children:[y,b,C]}),e[27]=y,e[28]=b,e[29]=C,e[30]=S):S=e[30],S}function NFe(){}const PFe=Se({noConversations:{id:"SidebarHistory.noConversations",defaultMessage:"No previous chats"}}),RFe=R(()=>P(()=>Promise.resolve().then(()=>nm),void 0),{loading:t=>F(t)}),zc=Se({projects:{id:"SidebarHeader.projects",defaultMessage:"Projects"},noProjects:{id:"SidebarHeader.noProjects",defaultMessage:"No projects yet"},noProjectChats:{id:"SidebarHeader.noProjectChats",defaultMessage:"No chats in this project"},startProjectChat:{id:"SidebarHeader.startProjectChat",defaultMessage:"Start a new chat in this project"}}),LFe=20;function OFe(){"use forget";const t=W.c(9),{snorlaxes:e,isLoading:n,refetch:s}=y3();let o;t[0]!==e?(o=e!=null?e:[],t[0]=e,t[1]=o):o=t[1];let a;t[2]!==o?(a=o.slice(0,qT),t[2]=o,t[3]=a):a=t[3];const i=a,l=i.length>0;let c;return t[4]!==n||t[5]!==i||t[6]!==s||t[7]!==l?(c={projects:i,areProjectsLoading:n,hasProjects:l,refetchProjects:s},t[4]=n,t[5]=i,t[6]=s,t[7]=l,t[8]=c):c=t[8],c}function s$(t){"use forget";const e=W.c(3),n=V();let s;return e[0]!==n||e[1]!==t?(s=()=>{var d,u,f,m;if(!t)return"";const o=t.gizmo,a=o.gizmo.id,i=(u=(d=o.gizmo.display.name)==null?void 0:d.trim())!=null?u:a,l=E3(n,a);if(l.isSkeleton$()){const g=(f=Nq(n,o))==null?void 0:f.trim();return g&&g.length>0?g:i}const c=(m=l.title$())==null?void 0:m.trim();return c&&c.length>0?c:i},e[0]=n,e[1]=t,e[2]=s):s=e[2],re(s)}function Fy(t){"use forget";const e=W.c(2),{project:n}=t,s=s$(n);let o;return e[0]!==s?(o=r.jsx("span",{className:"text-token-text-primary truncate text-sm",children:s}),e[0]=s,e[1]=o):o=e[1],o}function DFe(t){"use forget";const e=W.c(19),{projects:n,hasProjects:s,serverThreadId:o,onClose:a,onStartProjectChat:i,startProjectChatLabel:l,onOpenProjects:c}=t;if(!s)return null;let d;e[0]!==c?(d=p=>{p&&(c==null||c())},e[0]=c,e[1]=d):d=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(K.SubMenuTrigger,{fillContainer:!0,children:r.jsx(j,w({},zc.projects))}),e[2]=u):u=e[2];let f;if(e[3]!==a||e[4]!==i||e[5]!==n||e[6]!==o||e[7]!==l){let p;e[9]!==a||e[10]!==i||e[11]!==o||e[12]!==l?(p=h=>{const x=h.gizmo.gizmo.id;return r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{fillContainer:!0,children:r.jsx("span",{className:"flex w-full items-center justify-between gap-2",children:r.jsx(Fy,{project:h})})}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:r.jsxs(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[r.jsx(K.Item,{fillContainer:!0,className:"mb-1 ps-1",onSelect:FFe,trailing:r.jsx(Uf,{"aria-label":l,onPointerDown:v=>{i(v,x)},onClick:v=>{i(v,x)},icon:RFe}),children:r.jsx(Fy,{project:h})}),r.jsx(K.Separator,{}),r.jsx(o$,{project:h,serverThreadId:o,onSelectConversation:a})]})})})]},x)},e[9]=a,e[10]=i,e[11]=o,e[12]=l,e[13]=p):p=e[13],f=n.map(p),e[3]=a,e[4]=i,e[5]=n,e[6]=o,e[7]=l,e[8]=f}else f=e[8];let m;e[14]!==f?(m=r.jsx(K.Portal,{children:r.jsx(K.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:r.jsx(K.Group,{separator:!1,children:f})})}),e[14]=f,e[15]=m):m=e[15];let g;return e[16]!==d||e[17]!==m?(g=r.jsxs(K.Sub,{onOpenChange:d,children:[u,m]}),e[16]=d,e[17]=m,e[18]=g):g=e[18],g}function FFe(t){t.preventDefault()}function BFe(t){"use forget";const e=W.c(9),{projects:n,areProjectsLoading:s,onSelectProject:o}=t;if(s&&n.length===0){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsxs(r.Fragment,{children:[r.jsx(xo,{}),r.jsx(xo,{})]}),e[0]=l):l=e[0],l}if(n.length===0){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:r.jsx(j,w({},zc.noProjects))}),e[1]=l):l=e[1],l}let a;if(e[2]!==o||e[3]!==n){let l;e[5]!==o?(l=c=>{const d=c.gizmo.gizmo.id;return r.jsx(K.Item,{fillContainer:!0,onSelect:u=>{u.preventDefault(),o(d)},subMenu:!0,children:r.jsx(Fy,{project:c})},d)},e[5]=o,e[6]=l):l=e[6],a=n.map(l),e[2]=o,e[3]=n,e[4]=a}else a=e[4];let i;return e[7]!==a?(i=r.jsx(r.Fragment,{children:a}),e[7]=a,e[8]=i):i=e[8],i}function UFe(t){"use forget";const e=W.c(4),{project:n,serverThreadId:s,onSelectConversation:o}=t;if(!n)return null;let a;return e[0]!==o||e[1]!==n||e[2]!==s?(a=r.jsx(o$,{project:n,serverThreadId:s,onSelectConversation:o}),e[0]=o,e[1]=n,e[2]=s,e[3]=a):a=e[3],a}function o$(t){"use forget";const e=W.c(18),{project:n,serverThreadId:s,onSelectConversation:o}=t,a=n.gizmo.gizmo.id,{items:i,isLoading:l,refetch:c}=Pq(a);let d;e[0]!==c?(d=()=>{c()},e[0]=c,e[1]=d):d=e[1];let u;e[2]!==a||e[3]!==c?(u=[a,c],e[2]=a,e[3]=c,e[4]=u):u=e[4],_.useEffect(d,u);let f,m;if(e[5]!==l||e[6]!==i||e[7]!==o||e[8]!==s){m=Symbol.for("react.early_return_sentinel");e:{const p=i.slice(0,LFe);if(l&&p.length===0){let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsxs(r.Fragment,{children:[r.jsx(xo,{}),r.jsx(xo,{})]}),e[11]=x):x=e[11],m=x;break e}if(!l&&p.length===0){let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:r.jsx(j,w({},zc.noProjectChats))}),e[12]=x):x=e[12],m=x;break e}let h;e[13]!==o||e[14]!==s?(h=x=>r.jsx(F1,{className:"ps-2",conversation:x,hideOverflowMenu:!0,isActive:x.id===s,onSelect:o},x.id),e[13]=o,e[14]=s,e[15]=h):h=e[15],f=p.map(h)}e[5]=l,e[6]=i,e[7]=o,e[8]=s,e[9]=f,e[10]=m}else f=e[9],m=e[10];if(m!==Symbol.for("react.early_return_sentinel"))return m;let g;return e[16]!==f?(g=r.jsx(r.Fragment,{children:f}),e[16]=f,e[17]=g):g=e[17],g}const $Fe=R(()=>P(()=>Promise.resolve().then(()=>nm),void 0),{loading:t=>F(t)}),O2=R(()=>P(()=>import("./9paxni9f8n7suc5d.js"),__vite__mapDeps([475,1])),{loading:t=>F(t)});function VFe(t){"use forget";var xe;const e=W.c(63),{serverThreadId:n,isAuth:s,isNarrowSidebar:o,isRootMenuVisible:a,onActiveStateChange:i,onClose:l,backMessage:c,switchChatMessage:d}=t,u=ne(),{projects:f,areProjectsLoading:m,hasProjects:g,refetchProjects:p}=OFe(),[h,x]=_.useState("root"),[v,y]=_.useState(null);let b;e:{if(!v){b=null;break e}let pe;e[0]!==v||e[1]!==f?(pe=(xe=f.find(Me=>{const{gizmo:Ce}=Me;return Ce.gizmo.id===v}))!=null?xe:null,e[0]=v,e[1]=f,e[2]=pe):pe=e[2],b=pe}const C=b;let S=h;!o&&S!=="root"&&(S="root"),!g&&(S==="projectsList"||S==="projectChats")&&(S="history"),S==="projectChats"&&!C&&(S="projectsList");const E=S,k=E==="projectChats"?C:null,T=s$(k);let M;e[3]!==u?(M=u.formatMessage(zc.startProjectChat),e[3]=u,e[4]=M):M=e[4];const A=M;let I;e[5]!==o||e[6]!==l?(I=(pe,Me)=>{pe.preventDefault(),pe.stopPropagation(),it.newConversationGizmoId$.set(Me),it.wantsNewConversation$.set(!0),it.selectedConversationId$.set(void 0),o&&(y(null),x("root")),l()},e[5]=o,e[6]=l,e[7]=I):I=e[7];const N=I;let L,O;e[8]!==a||e[9]!==p?(L=()=>{a&&p()},O=[a,p],e[8]=a,e[9]=p,e[10]=L,e[11]=O):(L=e[10],O=e[11]),_.useEffect(L,O);let D,$;e[12]!==p||e[13]!==E?(D=()=>{E==="projectsList"&&p()},$=[E,p],e[12]=p,e[13]=E,e[14]=D,e[15]=$):(D=e[14],$=e[15]),_.useEffect(D,$);let H,G;if(e[16]!==i||e[17]!==E?(H=()=>{i(E!=="root")},G=[i,E],e[16]=i,e[17]=E,e[18]=H,e[19]=G):(H=e[18],G=e[19]),_.useEffect(H,G),!s)return null;let Z;e[20]!==N||e[21]!==g||e[22]!==o||e[23]!==a||e[24]!==l||e[25]!==f||e[26]!==p||e[27]!==E||e[28]!==n||e[29]!==A||e[30]!==d?(Z=()=>!a||E!=="root"?null:r.jsx(r.Fragment,{children:r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{fillContainer:!0,onClick:pe=>{o&&(pe.preventDefault(),x("history"))},children:r.jsx(j,w({},d))}),o?null:r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{"data-desktop-skip-link-handler":!0,className:"max-h-[50dvh] w-72 overflow-y-auto",children:[g?r.jsx(DFe,{projects:f,hasProjects:g,serverThreadId:n,onClose:l,onStartProjectChat:(pe,Me)=>N(pe,Me),startProjectChatLabel:A,onOpenProjects:p}):null,r.jsx(m9,{activeId:n,hideOverflowMenu:!0,onSelect:l})]})})]})}),e[20]=N,e[21]=g,e[22]=o,e[23]=a,e[24]=l,e[25]=f,e[26]=p,e[27]=E,e[28]=n,e[29]=A,e[30]=d,e[31]=Z):Z=e[31];const Q=Z;let q;e[32]!==c||e[33]!==g||e[34]!==l||e[35]!==E||e[36]!==n?(q=()=>E!=="history"?null:r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(O2,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:pe=>{pe.preventDefault(),x("root")},fillContainer:!0,children:r.jsx(j,w({},c))}),r.jsx(K.Separator,{}),r.jsxs(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[g?r.jsx(K.Item,{fillContainer:!0,onSelect:pe=>{pe.preventDefault(),y(null),x("projectsList")},subMenu:!0,children:r.jsx(j,w({},zc.projects))}):null,r.jsx(m9,{activeId:n,hideOverflowMenu:!0,onSelect:()=>{x("root"),l()}})]})]}),e[32]=c,e[33]=g,e[34]=l,e[35]=E,e[36]=n,e[37]=q):q=e[37];const Y=q;let te;e[38]!==m||e[39]!==f||e[40]!==E?(te=()=>E!=="projectsList"?null:r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(O2,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:pe=>{pe.preventDefault(),x("history")},fillContainer:!0,children:r.jsx(j,w({},zc.projects))}),r.jsx(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(BFe,{projects:f,areProjectsLoading:m,onSelectProject:pe=>{y(pe),x("projectChats")}})})]}),e[38]=m,e[39]=f,e[40]=E,e[41]=te):te=e[41];const ae=te;let se;e[42]!==k||e[43]!==T||e[44]!==N||e[45]!==l||e[46]!==E||e[47]!==n||e[48]!==A?(se=()=>E!=="projectChats"||!k?null:r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(O2,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:pe=>{pe.preventDefault(),x("projectsList")},fillContainer:!0,trailing:r.jsx(Uf,{"aria-label":A,onPointerUp:pe=>N(pe,k.gizmo.gizmo.id),onClick:pe=>N(pe,k.gizmo.gizmo.id),icon:$Fe}),children:T}),r.jsx(K.Separator,{}),r.jsx(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(UFe,{project:k,serverThreadId:n,onSelectConversation:()=>{x("root"),y(null),l()}})})]}),e[42]=k,e[43]=T,e[44]=N,e[45]=l,e[46]=E,e[47]=n,e[48]=A,e[49]=se):se=e[49];const ce=se;let X;e[50]!==Q?(X=Q(),e[50]=Q,e[51]=X):X=e[51];let ee;e[52]!==Y?(ee=Y(),e[52]=Y,e[53]=ee):ee=e[53];let ie;e[54]!==ae?(ie=ae(),e[54]=ae,e[55]=ie):ie=e[55];let de;e[56]!==ce?(de=ce(),e[56]=ce,e[57]=de):de=e[57];let me;return e[58]!==X||e[59]!==ee||e[60]!==ie||e[61]!==de?(me=r.jsxs(r.Fragment,{children:[X,ee,ie,de]}),e[58]=X,e[59]=ee,e[60]=ie,e[61]=de,e[62]=me):me=e[62],me}const HFe=R(()=>P(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([147,1])),{loading:t=>F(t)}),GFe=R(()=>P(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([3,1])),{loading:t=>F(t)});R(()=>P(()=>import("./k07fke0i34clap9a.js"),__vite__mapDeps([487,1])),{loading:t=>F(t)});const WFe=R(()=>P(()=>Promise.resolve().then(()=>M4),void 0).then(t=>t.DeleteConversationConfirmationModalContainer));R(()=>P(()=>import("./hltn41me7skpqo08.js"),__vite__mapDeps([211,1,10,11])).then(t=>t.default));function zFe(t){"use forget";const e=W.c(29),{clientThreadId:n,onClose:s}=t,o=V(),a=Kn(n),i=dM();let l;e[0]!==n||e[1]!==o?(l=xt(o,n),e[0]=n,e[1]=o,e[2]=l):l=e[2];const c=l;let d;e[3]!==o?(d=tt(o),e[3]=o,e[4]=d):d=e[4];const u=d;let f;e[5]!==i?(f=()=>{i==null||i.openInNewTab()},e[5]=i,e[6]=f):f=e[6];const m=f,g=mR(),[p,h]=_.useState(!1),[x,v]=_.useState(!1),y=!p&&!x;let b,C;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=()=>h(!0),C=()=>h(!1),e[7]=b,e[8]=C):(b=e[7],C=e[8]);let S;e[9]!==c||e[10]!==p||e[11]!==y?(S=r.jsx(jFe,{conversation:c,isRootVisible:y,isPanelVisible:p,onOpenPanel:b,onClosePanel:C,backMessage:gu.back}),e[9]=c,e[10]=p,e[11]=y,e[12]=S):S=e[12];let E;e[13]!==u||e[14]!==g||e[15]!==y||e[16]!==s||e[17]!==a?(E=r.jsx(VFe,{serverThreadId:a,isAuth:u,isNarrowSidebar:g,isRootMenuVisible:y,onActiveStateChange:v,onClose:s,backMessage:gu.back,switchChatMessage:gu.switchChat}),e[13]=u,e[14]=g,e[15]=y,e[16]=s,e[17]=a,e[18]=E):E=e[18];let k;e[19]!==o||e[20]!==m||e[21]!==y||e[22]!==s||e[23]!==a?(k=y?r.jsxs(r.Fragment,{children:[a?r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:GFe,onClick:m,fillContainer:!0,children:r.jsx(j,w({},gu.openChatInTab))}),r.jsx(K.Item,{icon:HFe,color:"danger",onClick:()=>{a&&(dt(o,WFe,{serverThreadId:a,isActiveConversation:!0}),s())},fillContainer:!0,children:r.jsx(j,w({},gu.deleteChat))})]}):null,null]}):null,e[19]=o,e[20]=m,e[21]=y,e[22]=s,e[23]=a,e[24]=k):k=e[24];let T;return e[25]!==S||e[26]!==E||e[27]!==k?(T=r.jsxs(r.Fragment,{children:[S,E,k]}),e[25]=S,e[26]=E,e[27]=k,e[28]=T):T=e[28],T}const gu=Se({switchChat:{id:"SidebarHeader.switchChat",defaultMessage:"Switch Chat"},openChatInTab:{id:"SidebarHeader.openChatInTab",defaultMessage:"Open Chat in Tab"},deleteChat:{id:"SidebarHeader.deleteChat",defaultMessage:"Delete Chat"},openFeedbackModal:{id:"SidebarHeader.openFeedbackModal",defaultMessage:"Share Feedback"},back:{id:"SidebarHeader.back",defaultMessage:"Back"}}),qFe=R(()=>P(()=>import("./icucbnbexf1to1b3.js"),__vite__mapDeps([488,1])),{loading:t=>F(t)}),YFe=R(()=>P(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([149,1])),{loading:t=>F(t)}),ZFe=R(()=>P(()=>Promise.resolve().then(()=>nm),void 0),{loading:t=>F(t)}),KFe=R(()=>P(()=>import("./jyac53csf1atp5u6.js"),__vite__mapDeps([29,1])),{loading:t=>F(t)});var LE;const bg=ft.button(LE||(LE=ct(["\n  hover:bg-token-interactive-bg-secondary-hover\n  focus-visible:bg-token-interactive-bg-secondary-hover\n  radix-state-open:bg-token-interactive-bg-secondary-hover\n  flex h-[34px] w-[34px] items-center justify-center rounded-[8px]\n  focus-visible:outline-0\n"])));function Kst(t){"use forget";const e=W.c(44),{clientThreadId:n}=t,s=V(),o=ne(),[a,i]=_.useState(!1),l=dM();let c;e[0]!==s?(c=cM(s),e[0]=s,e[1]=c):c=e[1];const d=c;let u;e[2]!==l||e[3]!==s?(u=()=>{gi(s)&&I8.set(s,"new_page_overlay_view"),l==null||l.becomeMainPage()},e[2]=l,e[3]=s,e[4]=u):u=e[4];const f=u,m=QFe;let g;e[5]!==l?(g=()=>{var H;(H=l==null?void 0:l.closeSideChat)==null||H.call(l)},e[5]=l,e[6]=g):g=e[6];const p=g;let h;e[7]!==f||e[8]!==o||e[9]!==d?(h=d&&r.jsx(pt,{triggerAs:null,label:r.jsx(j,w({},Fr.expandSidebar)),children:r.jsx(bg,{"aria-label":o.formatMessage(Fr.expandSidebar),onClick:f,children:r.jsx(qFe,{className:"icon -scale-x-100"})})}),e[7]=f,e[8]=o,e[9]=d,e[10]=h):h=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx(j,w({},Fr.openChatMenu)),e[11]=x):x=e[11];let v;e[12]!==o?(v=o.formatMessage(Fr.openChatMenu),e[12]=o,e[13]=v):v=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(YFe,{className:"icon"}),e[14]=y):y=e[14];let b;e[15]!==v?(b=r.jsx(pt,{triggerAs:null,label:x,children:r.jsx(K.BasicTrigger,{asChild:!0,children:r.jsx(bg,{"aria-label":v,children:y})})}),e[15]=v,e[16]=b):b=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=()=>i(!1),e[17]=C):C=e[17];let S;e[18]!==n?(S=r.jsx(K.Portal,{children:r.jsx(K.Content,{children:r.jsx(zFe,{clientThreadId:n,onClose:C})})}),e[18]=n,e[19]=S):S=e[19];let E;e[20]!==a||e[21]!==S||e[22]!==b?(E=r.jsxs(K.Root,{open:a,onOpenChange:i,children:[b,S]}),e[20]=a,e[21]=S,e[22]=b,e[23]=E):E=e[23];let k;e[24]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx(j,w({},Fr.newChat)),e[24]=k):k=e[24];let T;e[25]!==o?(T=o.formatMessage(Fr.newChat),e[25]=o,e[26]=T):T=e[26];let M;e[27]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(ZFe,{className:"icon"}),e[27]=M):M=e[27];let A;e[28]!==T?(A=r.jsx(pt,{triggerAs:null,label:k,children:r.jsx(bg,{"aria-label":T,onClick:m,children:M})}),e[28]=T,e[29]=A):A=e[29];let I;e[30]===Symbol.for("react.memo_cache_sentinel")?(I=r.jsx(j,w({},Fr.closeSidebar)),e[30]=I):I=e[30];let N;e[31]!==o?(N=o.formatMessage(Fr.closeSidebar),e[31]=o,e[32]=N):N=e[32];let L;e[33]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx(KFe,{className:"icon"}),e[33]=L):L=e[33];let O;e[34]!==p||e[35]!==N?(O=r.jsx(pt,{triggerAs:null,label:I,children:r.jsx(bg,{"aria-label":N,onClick:p,children:L})}),e[34]=p,e[35]=N,e[36]=O):O=e[36];let D;e[37]!==E||e[38]!==A||e[39]!==O?(D=r.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[E,A,O]}),e[37]=E,e[38]=A,e[39]=O,e[40]=D):D=e[40];let $;return e[41]!==D||e[42]!==h?($=r.jsxs("div",{className:"flex w-full items-center justify-between",children:[h,D]}),e[41]=D,e[42]=h,e[43]=$):$=e[43],$}function QFe(){it.newConversationGizmoId$.set(void 0),it.wantsNewConversation$.set(!0),it.selectedConversationId$.set(void 0)}const Fr=Se({expandSidebar:{id:"SidebarHeader.expandSidebar",defaultMessage:"Back to ChatGPT"},openChatMenu:{id:"SidebarHeader.openChatMenu",defaultMessage:"Open chat menu"},newChat:{id:"SidebarHeader.startNewChat",defaultMessage:"New chat"},closeSidebar:{id:"SidebarHeader.closeSidebar",defaultMessage:"Close side chat"}});function JFe({content:t}){const e=V();if(!t.widgets.news_tab_enabled)return null;if(!ve(e,"3024830181"))return r.jsx(ui,{children:"Work in progress"});const{news:n}=t.widgets;if(!n||n.length===0){const o=km(ht.News);return r.jsx(ui,{IconComponent:o,children:r.jsx(j,{id:"sM5f1q",defaultMessage:"No news results found"})})}const s=QDe(n);return r.jsx("div",{className:"thread-sm:-mx-4 flex flex-col",children:s.map((o,a)=>r.jsx(XFe,{news:o},a))})}const XFe=_.memo(function({news:e}){const n=e[0],s=e.slice(1);return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(g9,{news:n},n.url),r.jsx("div",{className:"ms-4 flex flex-col gap-1",children:s.map(o=>r.jsx(g9,{news:o,showDomain:!1},o.url))})]})});function g9({news:t,showDomain:e=!0}){const n=ne(),s=_.useMemo(()=>{const o=t.pub_date?new Date(t.pub_date).getTime()/1e3:null;return Rq(n,o)},[n,t.pub_date]);return r.jsx(Z1,{url:t.url,domain:t.domain,title:t.title,description:t.snippet,theme:e?"default":"sub-result",subscript:s,thumbnail_url:t.thumbnail_url})}const eBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M9.23935 2.48C9.73898 2.35629 10.2612 2.35626 10.7608 2.48C11.3552 2.62721 11.8836 3.0064 12.6612 3.5464L15.8614 5.76906C16.4569 6.18256 16.87 6.46183 17.172 6.83937C17.4266 7.15787 17.6172 7.52271 17.7335 7.91359C17.8713 8.37702 17.8653 8.87508 17.8653 9.60011V13.9995C17.8653 14.4553 17.8654 14.8377 17.8399 15.1489C17.8139 15.4677 17.7578 15.7707 17.6114 16.0581C17.3879 16.4969 17.0306 16.8541 16.5919 17.0777C16.3044 17.2241 16.0015 17.2811 15.6827 17.3071C15.3714 17.3326 14.989 17.3316 14.5333 17.3316H12.5001C12.1328 17.3315 11.8351 17.0338 11.8351 16.6665V13.1704C11.835 12.157 11.0135 11.3346 10.0001 11.3345C8.98668 11.3345 8.16514 12.157 8.16513 13.1704V16.6665C8.16513 17.0337 7.86731 17.3315 7.50009 17.3316H5.46689C5.01117 17.3316 4.62875 17.3326 4.31748 17.3071C3.99864 17.2811 3.69576 17.2241 3.4083 17.0777C2.96958 16.8541 2.6123 16.4968 2.38876 16.0581C2.24242 15.7707 2.18631 15.4677 2.16025 15.1489C2.13482 14.8377 2.13486 14.4553 2.13486 13.9995V9.60011C2.13486 8.87505 2.12883 8.37704 2.26669 7.91359C2.38299 7.52267 2.5735 7.1579 2.82822 6.83937C3.13024 6.46179 3.54323 6.18262 4.13876 5.76906L7.33896 3.5464C8.1166 3.00637 8.64499 2.62722 9.23935 2.48Z",fill:"currentColor"})),tBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.5353 9.60012C16.5353 8.7943 16.5288 8.52666 16.4591 8.2925C16.3916 8.06583 16.2807 7.85414 16.1329 7.66945C15.9803 7.47876 15.7645 7.32044 15.1027 6.86086L11.9025 4.63918C11.0356 4.03721 10.7407 3.84522 10.4415 3.77102C10.1518 3.69926 9.84844 3.69926 9.55871 3.77102C9.25946 3.84517 8.96491 4.037 8.09777 4.63918L4.89758 6.86086C4.23585 7.32039 4.01991 7.4788 3.8673 7.66945C3.71959 7.85412 3.60858 8.06585 3.54113 8.2925C3.47147 8.52666 3.46496 8.79429 3.46496 9.60012V13.9995C3.46496 14.4772 3.46549 14.796 3.48547 15.0405C3.50481 15.2773 3.53924 15.3857 3.57433 15.4546C3.67034 15.643 3.82343 15.7961 4.01183 15.8921C4.0807 15.9272 4.18923 15.9616 4.4259 15.981C4.67046 16.001 4.98923 16.0015 5.46691 16.0015H7.25207V13.1245C7.25231 11.6069 8.48241 10.3765 10.0001 10.3765C11.5178 10.3766 12.7479 11.6069 12.7482 13.1245V16.0015H14.5333C15.011 16.0015 15.3298 16.001 15.5743 15.981C15.8109 15.9616 15.9195 15.9272 15.9884 15.8921C16.1767 15.7961 16.3299 15.643 16.4259 15.4546C16.461 15.3857 16.4954 15.2772 16.5148 15.0405C16.5347 14.796 16.5353 14.4772 16.5353 13.9995V9.60012ZM17.8653 13.9995C17.8653 14.4553 17.8654 14.8377 17.84 15.1489C17.8139 15.4677 17.7578 15.7707 17.6114 16.0581C17.3879 16.4969 17.0306 16.8541 16.5919 17.0777C16.3044 17.2241 16.0016 17.2811 15.6827 17.3071C15.3715 17.3326 14.9891 17.3316 14.5333 17.3316H12.0831C11.7159 17.3315 11.4181 17.0337 11.4181 16.6665V13.1245C11.4178 12.3415 10.7832 11.7067 10.0001 11.7066C9.21694 11.7066 8.58142 12.3414 8.58117 13.1245V16.6665C8.58117 17.0338 8.2834 17.3316 7.91613 17.3316H5.46691C5.01118 17.3316 4.62878 17.3326 4.3175 17.3071C3.99865 17.2811 3.69579 17.2241 3.40832 17.0777C2.96959 16.8541 2.61233 16.4969 2.38879 16.0581C2.24243 15.7707 2.18633 15.4678 2.16027 15.1489C2.13484 14.8377 2.13488 14.4553 2.13488 13.9995V9.60012C2.13488 8.87504 2.12885 8.37705 2.26672 7.91359C2.38301 7.52267 2.57352 7.15791 2.82824 6.83938C3.13027 6.46179 3.54324 6.18263 4.13879 5.76906L7.33898 3.54641C8.11664 3.00637 8.645 2.62722 9.23937 2.48C9.73901 2.3563 10.2612 2.35626 10.7609 2.48C11.3552 2.62722 11.8836 3.00639 12.6612 3.54641L15.8614 5.76906C16.4569 6.18257 16.87 6.46182 17.172 6.83938C17.4267 7.15789 17.6172 7.52271 17.7335 7.91359C17.8714 8.37703 17.8654 8.87507 17.8653 9.60012V13.9995Z",fill:"currentColor"})),nBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7012 2.66797C13.374 2.66796 13.9198 2.66798 14.3623 2.7041C14.8202 2.74151 15.2269 2.82086 15.6035 3.0127L15.8213 3.13477C16.317 3.4388 16.7208 3.87553 16.9863 4.39648L17.0527 4.53906C17.197 4.87529 17.2622 5.23617 17.2949 5.63672C17.3311 6.07921 17.3311 6.62508 17.3311 7.29785V12.7012C17.3311 13.374 17.331 13.9198 17.2949 14.3623C17.2622 14.7632 17.1971 15.1245 17.0527 15.4609L16.9863 15.6035C16.7208 16.1245 16.317 16.5602 15.8213 16.8643L15.6035 16.9863C15.2268 17.1783 14.8203 17.2575 14.3623 17.2949C13.9198 17.331 13.374 17.3311 12.7012 17.3311H7.29785C6.62508 17.3311 6.07921 17.3311 5.63672 17.2949C5.23617 17.2622 4.87529 17.197 4.53906 17.0527L4.39648 16.9863C3.87553 16.7208 3.4388 16.317 3.13477 15.8213L3.0127 15.6035C2.82086 15.2269 2.74151 14.8202 2.7041 14.3623C2.66798 13.9198 2.66796 13.374 2.66797 12.7012V7.29785C2.66796 6.62508 2.66795 6.07921 2.7041 5.63672C2.74152 5.17904 2.82093 4.77302 3.0127 4.39648L3.13477 4.17773C3.43883 3.6821 3.87553 3.27816 4.39648 3.0127L4.53906 2.94629C4.87528 2.80208 5.23618 2.73685 5.63672 2.7041C6.07921 2.66795 6.62508 2.66796 7.29785 2.66797H12.7012ZM7.95313 10.9033C7.52351 10.4737 6.84365 10.4472 6.38281 10.8232L6.29297 10.9033L4.00195 13.1943C4.00681 13.4879 4.01733 13.7367 4.03516 13.9551C4.0711 14.3949 4.13819 14.6431 4.23242 14.8281L4.31445 14.9766C4.52088 15.3131 4.81727 15.5873 5.1709 15.7676L5.32324 15.833C5.49163 15.8933 5.71374 15.9379 6.04395 15.9648C6.49196 16.0014 7.06822 16.001 7.89746 16.001H13.0498L7.95313 10.9033ZM12.0859 6.07324C11.078 6.07324 10.2607 6.89046 10.2607 7.89844C10.2609 8.90625 11.0781 9.72363 12.0859 9.72363C13.0938 9.72358 13.9109 8.90622 13.9111 7.89844C13.9111 6.89049 13.0939 6.0733 12.0859 6.07324Z",fill:"currentColor"})),sBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.0013 7.33337C16.0013 6.62234 16.0014 6.129 15.9701 5.74548C15.947 5.46353 15.9092 5.27402 15.8577 5.13025L15.8021 5.00037C15.6481 4.69826 15.4137 4.44523 15.1263 4.26892L14.9993 4.19861C14.8414 4.11815 14.6298 4.06133 14.2542 4.03064C13.8707 3.99933 13.3772 3.99841 12.6663 3.99841H7.33333C6.62229 3.99841 6.12896 3.99931 5.74544 4.03064C5.46359 4.05367 5.27396 4.09053 5.13021 4.14197L5.00032 4.19861C4.69807 4.35263 4.44519 4.58675 4.26888 4.87439L4.19857 5.00037C4.11806 5.15837 4.0613 5.36978 4.0306 5.74548C3.99926 6.129 3.99837 6.62234 3.99837 7.33337V11.7269L5.0179 10.7084L5.19466 10.5482C6.11048 9.8011 7.46203 9.85465 8.31575 10.7084L13.6038 15.9965C13.8549 15.9923 14.0676 15.9853 14.2542 15.9701C14.6296 15.9394 14.8414 15.8825 14.9993 15.8021L15.1263 15.7308C15.4137 15.5545 15.6482 15.3015 15.8021 14.9994L15.8577 14.8695C15.9092 14.7258 15.947 14.5361 15.9701 14.2543C16.0014 13.8708 16.0013 13.3772 16.0013 12.6664V7.33337ZM7.37533 11.6488C7.00854 11.282 6.42794 11.2594 6.0345 11.5804L5.95833 11.6488L4.00228 13.6049C4.00642 13.8555 4.01538 14.0679 4.0306 14.2543C4.06128 14.6299 4.11811 14.8414 4.19857 14.9994L4.26888 15.1263C4.44519 15.4138 4.69821 15.6482 5.00032 15.8021L5.13021 15.8578C5.27398 15.9092 5.46349 15.9471 5.74544 15.9701C6.12896 16.0014 6.6223 16.0013 7.33333 16.0013H11.7269L7.37533 11.6488ZM13.0853 7.91638C13.0851 7.36333 12.6364 6.91541 12.0833 6.91541C11.5302 6.91541 11.0816 7.36333 11.0814 7.91638C11.0814 8.46959 11.5301 8.91834 12.0833 8.91834C12.6365 8.91834 13.0853 8.46959 13.0853 7.91638ZM14.4154 7.91638C14.4154 9.20413 13.3711 10.2484 12.0833 10.2484C10.7956 10.2484 9.7513 9.20413 9.7513 7.91638C9.75148 6.62879 10.7957 5.58533 12.0833 5.58533C13.371 5.58533 14.4152 6.62879 14.4154 7.91638ZM17.3314 12.6664C17.3314 13.3554 17.332 13.9125 17.2952 14.3627C17.2625 14.7636 17.1975 15.1248 17.0531 15.4613L16.9867 15.6039C16.7212 16.1248 16.3173 16.5606 15.8216 16.8646L15.6038 16.9867C15.2271 17.1787 14.8206 17.2579 14.3626 17.2953C13.9124 17.3321 13.3553 17.3314 12.6663 17.3314H7.33333C6.64424 17.3314 6.08728 17.3321 5.63704 17.2953C5.23636 17.2625 4.87571 17.1974 4.53939 17.0531L4.39681 16.9867C3.87569 16.7212 3.43919 16.3175 3.13509 15.8217L3.01302 15.6039C2.82105 15.2271 2.74185 14.8207 2.70443 14.3627C2.66766 13.9125 2.66829 13.3554 2.66829 12.6664V7.33337C2.66829 6.64428 2.66764 6.08733 2.70443 5.63709C2.74184 5.17929 2.82121 4.77347 3.01302 4.39685L3.13509 4.1781C3.43918 3.68239 3.87577 3.27854 4.39681 3.01306L4.53939 2.94666C4.87568 2.80242 5.2364 2.73721 5.63704 2.70447C6.08728 2.66768 6.64424 2.66834 7.33333 2.66834H12.6663C13.3553 2.66834 13.9124 2.6677 14.3626 2.70447C14.8206 2.74189 15.2271 2.82109 15.6038 3.01306L15.8216 3.13513C16.3174 3.43923 16.7211 3.87573 16.9867 4.39685L17.0531 4.53943C17.1973 4.87575 17.2625 5.2364 17.2952 5.63709C17.332 6.08733 17.3314 6.64428 17.3314 7.33337V12.6664Z",fill:"currentColor"})),oBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 2.66797C14.1891 2.66797 14.7461 2.66732 15.1963 2.7041C15.654 2.74151 16.0599 2.82094 16.4365 3.0127C17.032 3.31609 17.5169 3.80106 17.8203 4.39649C18.0121 4.77302 18.0915 5.17905 18.1289 5.63672C18.1657 6.08689 18.165 6.64406 18.165 7.33301V12.666C18.165 13.3549 18.1657 13.9122 18.1289 14.3623C18.0915 14.8202 18.0122 15.2268 17.8203 15.6035C17.5169 16.199 17.032 16.6829 16.4365 16.9863C16.0599 17.1782 15.6541 17.2575 15.1963 17.2949C14.746 17.3317 14.1891 17.3311 13.5 17.3311H6.5C5.81091 17.3311 5.25395 17.3317 4.80371 17.2949C4.34589 17.2575 3.94011 17.1782 3.56348 16.9863C2.96804 16.6829 2.48311 16.199 2.17969 15.6035C1.98781 15.2268 1.90851 14.8202 1.87109 14.3623C1.83435 13.9122 1.83496 13.3549 1.83496 12.666V7.33301C1.83496 6.64406 1.83431 6.08689 1.87109 5.63672C1.90852 5.17905 1.98793 4.77302 2.17969 4.39649C2.48314 3.80106 2.96803 3.31609 3.56348 3.0127C3.94006 2.82094 4.34597 2.74151 4.80371 2.7041C5.25395 2.66732 5.81092 2.66797 6.5 2.66797H13.5ZM5.83106 12.668C5.46408 12.6682 5.16618 12.966 5.16602 13.333C5.16602 13.7001 5.46398 13.9978 5.83106 13.998H14.1641C14.5313 13.998 14.8291 13.7003 14.8291 13.333C14.8289 12.9659 14.5312 12.668 14.1641 12.668H5.83106ZM5.83301 6.00195C5.46588 6.00212 5.16797 6.29983 5.16797 6.66699V10C5.16813 10.367 5.46598 10.6649 5.83301 10.665H8.79981C9.16695 10.665 9.46468 10.3671 9.46484 10V6.66699C9.46484 6.29974 9.16705 6.00198 8.79981 6.00195H5.83301ZM11.7998 9.33496C11.4328 9.33513 11.1349 9.63298 11.1348 10C11.1349 10.367 11.4328 10.6649 11.7998 10.665H14.166C14.5332 10.665 14.8309 10.3671 14.8311 10C14.8309 9.63288 14.5332 9.33496 14.166 9.33496H11.7998ZM11.7998 6.00195C11.4327 6.00212 11.1348 6.29983 11.1348 6.66699C11.1349 7.03402 11.4328 7.33187 11.7998 7.33203H14.166C14.5332 7.33203 14.8309 7.03412 14.8311 6.66699C14.8311 6.29972 14.5333 6.00195 14.166 6.00195H11.7998Z",fill:"currentColor"})),aBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.165 12.668C14.532 12.6682 14.8299 12.966 14.8301 13.333C14.8301 13.7001 14.5321 13.9978 14.165 13.998H5.83203C5.46476 13.998 5.16699 13.7003 5.16699 13.333C5.16717 12.9659 5.46487 12.668 5.83203 12.668H14.165Z",fill:"currentColor"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.79981 6.00195C9.16705 6.00198 9.46484 6.29974 9.46484 6.66699V10C9.46467 10.3671 9.16695 10.665 8.79981 10.665H5.83301C5.46596 10.6649 5.16814 10.367 5.16797 10V6.66699C5.16797 6.29981 5.46585 6.00209 5.83301 6.00195H8.79981ZM6.49805 9.33496H8.13477V7.33203H6.49805V9.33496Z",fill:"currentColor"}),_.createElement("path",{d:"M14.166 9.33496C14.5332 9.33496 14.8309 9.63288 14.8311 10C14.8309 10.3671 14.5332 10.665 14.166 10.665H11.7998C11.4328 10.6649 11.1349 10.367 11.1348 10C11.1349 9.63296 11.4328 9.33509 11.7998 9.33496H14.166Z",fill:"currentColor"}),_.createElement("path",{d:"M14.166 6.00195C14.5333 6.00195 14.8311 6.29972 14.8311 6.66699C14.8309 7.03412 14.5332 7.33203 14.166 7.33203H11.7998C11.4328 7.3319 11.1349 7.03403 11.1348 6.66699C11.1348 6.29981 11.4326 6.00209 11.7998 6.00195H14.166Z",fill:"currentColor"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 2.66797C14.1891 2.66797 14.7461 2.66732 15.1963 2.7041C15.654 2.74151 16.0599 2.82094 16.4365 3.0127C17.032 3.31609 17.5169 3.80107 17.8203 4.39649C18.0121 4.77301 18.0915 5.17906 18.1289 5.63672C18.1657 6.08689 18.165 6.64406 18.165 7.33301V12.666C18.165 13.3548 18.1656 13.9122 18.1289 14.3623C18.0915 14.8202 18.0122 15.2268 17.8203 15.6035C17.5169 16.199 17.032 16.6829 16.4365 16.9863C16.0599 17.1782 15.6541 17.2575 15.1963 17.2949C14.746 17.3317 14.1891 17.3311 13.5 17.3311H6.5C5.81091 17.3311 5.25395 17.3317 4.80371 17.2949C4.34589 17.2575 3.94011 17.1782 3.56348 16.9863C2.96804 16.6829 2.48311 16.1989 2.17969 15.6035C1.98781 15.2268 1.90851 14.8202 1.87109 14.3623C1.83435 13.9122 1.83496 13.3548 1.83496 12.666V7.33301C1.83496 6.64407 1.83431 6.08689 1.87109 5.63672C1.90852 5.17906 1.98793 4.77301 2.17969 4.39649C2.48314 3.80107 2.96803 3.31609 3.56348 3.0127C3.94006 2.82094 4.34597 2.74151 4.80371 2.7041C5.25395 2.66732 5.81092 2.66797 6.5 2.66797H13.5ZM6.5 3.99805C5.78898 3.99805 5.29563 3.99894 4.91211 4.03027C4.53651 4.06097 4.32499 4.11777 4.16699 4.19824C3.82183 4.37412 3.54117 4.65487 3.36524 5C3.28475 5.15796 3.22797 5.36961 3.19727 5.74512C3.16594 6.12858 3.16504 6.62214 3.16504 7.33301V12.666C3.16504 13.3767 3.16598 13.8705 3.19727 14.2539C3.22794 14.6293 3.28485 14.8411 3.36524 14.999C3.54114 15.3443 3.82178 15.6258 4.16699 15.8018C4.32498 15.8822 4.53656 15.939 4.91211 15.9697C5.29563 16.0011 5.78896 16.001 6.5 16.001H13.5C14.211 16.001 14.7044 16.0011 15.0879 15.9697C15.4634 15.939 15.675 15.8822 15.833 15.8018C16.1782 15.6258 16.4589 15.3443 16.6348 14.999C16.7152 14.8411 16.7721 14.6293 16.8027 14.2539C16.834 13.8705 16.835 13.3767 16.835 12.666V7.33301C16.835 6.62214 16.8341 6.12858 16.8027 5.74512C16.772 5.36961 16.7153 5.15796 16.6348 5C16.4588 4.65487 16.1782 4.37412 15.833 4.19824C15.675 4.11777 15.4635 4.06097 15.0879 4.03027C14.7044 3.99894 14.211 3.99805 13.5 3.99805H6.5Z",fill:"currentColor"})),rBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M12.6143 10.665C12.5527 12.6855 12.2142 14.4786 11.7139 15.7871C11.4358 16.5143 11.1207 17.0603 10.8018 17.4131C10.4828 17.7659 10.2106 17.875 10 17.875C9.78939 17.875 9.51719 17.7659 9.19824 17.4131C8.87934 17.0603 8.5642 16.5143 8.28613 15.7871C7.78584 14.4786 7.44732 12.6855 7.38574 10.665H12.6143Z",fill:"currentColor"}),_.createElement("path",{d:"M6.13574 10.665C6.19746 12.8083 6.55431 14.7586 7.11816 16.2334C7.30297 16.7167 7.51524 17.1598 7.75293 17.5469C4.70324 16.6402 2.42908 13.9384 2.15527 10.665H6.13574Z",fill:"currentColor"}),_.createElement("path",{d:"M17.8447 10.665C17.5709 13.9387 15.2962 16.6405 12.2461 17.5469C12.4839 17.1597 12.697 16.7169 12.8818 16.2334C13.4457 14.7586 13.8025 12.8083 13.8643 10.665H17.8447Z",fill:"currentColor"}),_.createElement("path",{d:"M7.75293 2.45215C7.51506 2.83936 7.30308 3.28296 7.11816 3.7666C6.55431 5.24139 6.19746 7.19168 6.13574 9.33496H2.15527C2.42909 6.0615 4.7031 3.35875 7.75293 2.45215Z",fill:"currentColor"}),_.createElement("path",{d:"M10 2.125C10.2106 2.125 10.4828 2.23408 10.8018 2.58691C11.1207 2.93972 11.4358 3.48566 11.7139 4.21289C12.2142 5.52136 12.5527 7.31448 12.6143 9.33496H7.38574C7.44732 7.31448 7.78584 5.52136 8.28613 4.21289C8.5642 3.48566 8.87934 2.93972 9.19824 2.58691C9.51719 2.23408 9.78939 2.125 10 2.125Z",fill:"currentColor"}),_.createElement("path",{d:"M12.2461 2.45215C15.2964 3.35849 17.5709 6.06118 17.8447 9.33496H13.8643C13.8025 7.19168 13.4457 5.24139 12.8818 3.7666C12.6968 3.28278 12.4841 2.83946 12.2461 2.45215Z",fill:"currentColor"})),iBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10 2.125C14.3492 2.125 17.875 5.65076 17.875 10C17.875 14.3492 14.3492 17.875 10 17.875C5.65076 17.875 2.125 14.3492 2.125 10C2.125 5.65076 5.65076 2.125 10 2.125ZM7.88672 10.625C7.94334 12.3161 8.22547 13.8134 8.63965 14.9053C8.87263 15.5194 9.1351 15.9733 9.39453 16.2627C9.65437 16.5524 9.86039 16.625 10 16.625C10.1396 16.625 10.3456 16.5524 10.6055 16.2627C10.8649 15.9733 11.1274 15.5194 11.3604 14.9053C11.7745 13.8134 12.0567 12.3161 12.1133 10.625H7.88672ZM3.40527 10.625C3.65313 13.2734 5.45957 15.4667 7.89844 16.2822C7.7409 15.997 7.5977 15.6834 7.4707 15.3486C6.99415 14.0923 6.69362 12.439 6.63672 10.625H3.40527ZM13.3633 10.625C13.3064 12.439 13.0059 14.0923 12.5293 15.3486C12.4022 15.6836 12.2582 15.9969 12.1006 16.2822C14.5399 15.467 16.3468 13.2737 16.5947 10.625H13.3633ZM12.1006 3.7168C12.2584 4.00235 12.4021 4.31613 12.5293 4.65137C13.0059 5.90775 13.3064 7.56102 13.3633 9.375H16.5947C16.3468 6.72615 14.54 4.53199 12.1006 3.7168ZM10 3.375C9.86039 3.375 9.65437 3.44756 9.39453 3.7373C9.1351 4.02672 8.87263 4.48057 8.63965 5.09473C8.22547 6.18664 7.94334 7.68388 7.88672 9.375H12.1133C12.0567 7.68388 11.7745 6.18664 11.3604 5.09473C11.1274 4.48057 10.8649 4.02672 10.6055 3.7373C10.3456 3.44756 10.1396 3.375 10 3.375ZM7.89844 3.7168C5.45942 4.53222 3.65314 6.72647 3.40527 9.375H6.63672C6.69362 7.56102 6.99415 5.90775 7.4707 4.65137C7.59781 4.31629 7.74073 4.00224 7.89844 3.7168Z",fill:"currentColor"})),lBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M17.3311 12.666C17.3311 13.3549 17.3317 13.9122 17.2949 14.3623C17.2622 14.7632 17.1971 15.1245 17.0527 15.4609L16.9863 15.6035C16.6829 16.1988 16.1988 16.6829 15.6035 16.9863C15.2268 17.1783 14.8203 17.2575 14.3623 17.2949C13.9121 17.3317 13.3549 17.3311 12.666 17.3311H7.33301C6.64403 17.3311 6.08691 17.3317 5.63672 17.2949C5.23614 17.2622 4.8753 17.197 4.53906 17.0527L4.39648 16.9863C3.87551 16.7208 3.4388 16.317 3.13477 15.8213L3.0127 15.6035C2.82086 15.2269 2.74151 14.8202 2.7041 14.3623C2.66736 13.9122 2.66797 13.3548 2.66797 12.666V8.16504H17.3311V12.666Z",fill:"currentColor"}),_.createElement("path",{d:"M5.87988 6.83496H2.66992C2.6715 6.36896 2.67663 5.97298 2.7041 5.63672C2.74152 5.17906 2.82093 4.77301 3.0127 4.39649C3.31613 3.80105 3.80104 3.31611 4.39648 3.0127C4.77304 2.82092 5.17902 2.74152 5.63672 2.7041C6.08691 2.66732 6.64403 2.66797 7.33301 2.66797H7.54688L5.87988 6.83496Z",fill:"currentColor"}),_.createElement("path",{d:"M10.8828 6.75293L11.0879 6.83496H7.3125L8.94727 2.74707L8.75 2.66797H12.5166L10.8828 6.75293Z",fill:"currentColor"}),_.createElement("path",{d:"M14.3623 2.7041C14.8202 2.74151 15.2268 2.82085 15.6035 3.0127L15.8213 3.13477C16.317 3.4388 16.7208 3.87553 16.9863 4.39649L17.0527 4.53906C17.197 4.87528 17.2622 5.23618 17.2949 5.63672C17.3224 5.97298 17.3275 6.36896 17.3291 6.83496H12.2822L13.9424 2.68164C14.0918 2.68662 14.2316 2.69343 14.3623 2.7041Z",fill:"currentColor"})),cBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2998 2.6709C13.318 2.66997 13.3361 2.67031 13.3545 2.6709C13.739 2.67372 14.0728 2.68047 14.3623 2.7041C14.8202 2.74151 15.2268 2.82085 15.6035 3.0127L15.8213 3.13477C16.317 3.4388 16.7208 3.87553 16.9863 4.39649L17.0527 4.53906C17.197 4.87528 17.2622 5.23618 17.2949 5.63672C17.3317 6.08689 17.3311 6.64407 17.3311 7.33301V12.666C17.3311 13.3549 17.3317 13.9121 17.2949 14.3623C17.2622 14.7632 17.1971 15.1245 17.0527 15.4609L16.9863 15.6035C16.6829 16.1988 16.1988 16.6829 15.6035 16.9863C15.2268 17.1783 14.8203 17.2575 14.3623 17.2949C13.9121 17.3317 13.3549 17.3311 12.666 17.3311H7.33301C6.64403 17.3311 6.08691 17.3317 5.63672 17.2949C5.23614 17.2622 4.8753 17.197 4.53906 17.0527L4.39648 16.9863C3.87551 16.7208 3.4388 16.317 3.13476 15.8213L3.01269 15.6035C2.82086 15.2269 2.74151 14.8202 2.7041 14.3623C2.66736 13.9122 2.66797 13.3548 2.66797 12.666V7.33301C2.66797 6.64407 2.66732 6.08689 2.7041 5.63672C2.74152 5.17906 2.82093 4.77301 3.01269 4.39649C3.31613 3.80105 3.80103 3.31611 4.39648 3.0127C4.77304 2.82092 5.17901 2.74152 5.63672 2.7041C6.08691 2.66732 6.64403 2.66797 7.33301 2.66797H12.666C12.891 2.66797 13.1021 2.66971 13.2998 2.6709ZM3.99805 8.16504V12.666C3.99805 13.3767 3.99899 13.8705 4.03027 14.2539C4.06094 14.6292 4.11788 14.8411 4.19824 14.999L4.26855 15.126C4.4448 15.4133 4.69803 15.6478 5 15.8018L5.12988 15.8574C5.27361 15.9089 5.46331 15.9467 5.74512 15.9697C6.12859 16.0011 6.6221 16.001 7.33301 16.001H12.666C13.3767 16.001 13.8705 16.001 14.2539 15.9697C14.6292 15.9391 14.8411 15.8821 14.999 15.8018C15.3443 15.6258 15.6258 15.3443 15.8018 14.999L15.8574 14.8691C15.9088 14.7254 15.9467 14.5355 15.9697 14.2539C16.001 13.8705 16.001 13.3767 16.001 12.666V8.16504H3.99805ZM12.6484 6.83496H15.999C15.9976 6.38034 15.9932 6.03187 15.9697 5.74512C15.9467 5.46336 15.9089 5.2736 15.8574 5.12988L15.8018 5C15.6478 4.69805 15.4133 4.44479 15.126 4.26856L14.999 4.19824C14.8411 4.11788 14.6292 4.06094 14.2539 4.03027C14.1122 4.01871 13.9555 4.01257 13.7783 4.00781L12.6484 6.83496ZM7.33301 3.99805C6.6221 3.99805 6.12859 3.99894 5.74512 4.03027C5.36955 4.06098 5.15798 4.11775 5 4.19824C4.65484 4.37414 4.37416 4.65485 4.19824 5C4.11776 5.15796 4.06098 5.36961 4.03027 5.74512C4.00684 6.03186 4.00272 6.38034 4.00098 6.83496H6.21582L7.35059 3.99805H7.33301ZM7.64844 6.83496H11.2158L12.3506 3.99805H8.7832L7.64844 6.83496Z",fill:"currentColor"}));function dBe(s){var o=s,{selected:t,label:e}=o,n=we(o,["selected","label"]);const a=z(t?"text-[var(--interactive-label-accent-default)]":"text-token-text-tertiary hover:text-token-text-secondary",n.className);return r.jsx(pt,{label:e,className:a,children:r.jsx("button",U(w({},n),{className:z("rounded-lg px-6 py-2.5",t&&"bg-[var(--theme-user-msg-bg)]")}))})}function uBe({selectedTab:t,selectTab:e,className:n,textClassName:s,showNewsTab:o=!0}){const a=[{key:ht.Chat,label:r.jsx(j,w({},pu.homeTab)),icon:r.jsx(tBe,{className:"justify-self-center"}),selectedIcon:r.jsx(eBe,{className:"justify-self-center"})},{key:ht.Search,label:r.jsx(j,w({},pu.searchTab)),icon:r.jsx(iBe,{className:"justify-self-center"}),selectedIcon:r.jsx(rBe,{className:"justify-self-center"})},{key:ht.Images,label:r.jsx(j,w({},pu.imagesTab)),icon:r.jsx(sBe,{className:"justify-self-center"}),selectedIcon:r.jsx(nBe,{className:"justify-self-center"})},{key:ht.Videos,label:r.jsx(j,w({},pu.videosTab)),icon:r.jsx(cBe,{className:"justify-self-center"}),selectedIcon:r.jsx(lBe,{className:"justify-self-center"})}];return o&&a.push({key:ht.News,label:r.jsx(j,w({},pu.newsTab)),icon:r.jsx(aBe,{className:"justify-self-center"}),selectedIcon:r.jsx(oBe,{className:"justify-self-center"})}),r.jsx(lv,{id:"super-widget-tabs",children:r.jsx("div",{className:z("mx-px flex h-full items-center gap-0.5",n),id:"super-widget-tab-buttons",children:a.map(({key:i,label:l,icon:c,selectedIcon:d})=>r.jsx(dBe,{label:l,className:z("relative flex-1 sm:flex-none",t===i?"font-medium":"font-normal",s),selected:t===i,style:{fontSize:"0.9375rem"},onClick:()=>e(i),children:t===i?d:c},i))})})}const pu=Se({homeTab:{id:"mYiOeg",defaultMessage:"Home"},searchTab:{id:"GjXttB",defaultMessage:"Search"},imagesTab:{id:"ZY9oIP",defaultMessage:"Images"},videosTab:{id:"C8mH8+",defaultMessage:"Videos"},newsTab:{id:"2QYAL1",defaultMessage:"News"}}),fBe=R(()=>P(()=>import("./mvsz8js05tswhzmz.js"),__vite__mapDeps([196,1])),{loading:t=>F(t)}),mBe=R(()=>P(()=>Promise.resolve().then(()=>nFe),void 0),{loading:t=>F(t)}),gBe=R(()=>P(()=>import("./lzyue6vhm3osg5jg.js"),__vite__mapDeps([489,1])),{loading:t=>F(t)});function pBe({content:t,turnIndex:e}){const n=V();if(!ve(n,"3024830181"))return r.jsx(ui,{children:"Work in progress"});const{videos:s,safety:o}=t.widgets;if(o==="adult")return r.jsx(ui,{IconComponent:fBe,className:"min-h-[240px]!",children:r.jsx(j,{id:"8j9OLb",defaultMessage:"Video results not available"})});if(!s||s.length===0){const a=km(ht.Videos);return r.jsx(ui,{IconComponent:a,children:r.jsx(j,{id:"YgdAWv",defaultMessage:"No videos found"})})}return r.jsx("div",{className:"flex flex-col",children:r.jsx("div",{className:"thread-sm:-mx-4 -mx-2 flex flex-col gap-1",children:s.map(a=>r.jsx(_.Fragment,{children:r.jsx(hBe,{video:a,turnIndex:e})},a.url))})})}function hBe({video:t}){return r.jsx(Z1,{url:t.url,domain:t.domain,title:t.title,description:t.description,pub_date:t.pub_date,thumbnail_url:t.thumbnail_url,thumbnailOverlay:t.duration&&r.jsxs("div",{className:"absolute start-1.5 bottom-1.5 inline-flex items-center gap-1.5 rounded-full border-[0.5px] border-white/20 bg-black/20 bg-clip-padding px-1 py-1 text-sm font-normal text-white backdrop-blur-2xl",children:[r.jsx(gBe,{className:"size-4"}),r.jsx("span",{className:"pe-1.5",children:_Be(t.duration)})]}),ThumbnailErrorIcon:mBe})}function _Be(t){const e=t.split(":");if(e.length===0)return t;const n=e[0],s=/^(\d+)$/.test(n)?String(Number(n)):n;return e[0]=s,e.join(":")}const p9=2048;function xBe(t,e){const n=encodeURIComponent(t),s=(()=>{switch(e){case ht.Search:return"https://www.google.com/search?q=";case ht.Images:return"https://www.google.com/search?udm=2&q=";case ht.Videos:return"https://www.google.com/search?udm=7&q=";case ht.News:return"https://www.google.com/search?tbm=nws&q=";default:throw new Error("Unsupported tab type: ".concat(e))}})(),o=s+n;if(o.length<=p9)return o;const a=Math.max(0,p9-s.length);let i=n.slice(0,a);if(/%%?$/.test(i))for(;i.endsWith("%");)i=i.slice(0,-1);return/%[0-9A-Fa-f]$/.test(i)&&(i=i.slice(0,-1)),s+i}function yBe({className:t,direction:e="horizontal",isMasked:n=!0,children:s,style:o}){return n?r.jsx("div",{className:z(e==="horizontal"?"[mask-image:linear-gradient(to_right,black_calc(100%_-_2rem),transparent_100%)]":"[mask-image:linear-gradient(to_bottom,black_calc(100%_-_2rem),transparent_100%)]","[mask-size:100%_100%]","[mask-repeat:no-repeat]",t),style:o,children:s}):r.jsx("div",{className:t,style:o,children:s})}const vBe=R(()=>P(()=>import("./mvsz8js05tswhzmz.js"),__vite__mapDeps([196,1])),{loading:t=>F(t)}),h9=180,D2=8,bBe=130;function CBe(t){"use forget";const e=W.c(28),{content:n,turnIndex:s}=t,{images:o,safety:a}=n.widgets,i=_.useRef(null);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0];const[c,d]=_.useState(l);let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=new Set,e[1]=u):u=e[1];const[f,m]=_.useState(u);let g;e[2]===Symbol.for("react.memo_cache_sentinel")?(g=T=>m(M=>{const A=new Set(M);return A.add(T),A}),e[2]=g):g=e[2];const p=g;let h;if(e[3]!==f||e[4]!==o){let T;e[6]!==f?(T=M=>!f.has(M.content_url),e[6]=f,e[7]=T):T=e[7],h=o.filter(T),e[3]=f,e[4]=o,e[5]=h}else h=e[5];const x=h;let v;e[8]!==x?(v=()=>{if(!i.current)return;const T=i.current.getBoundingClientRect().width,M=[];let A=[],I=0;x.forEach((N,L)=>{const{width:O,height:D}=N.content_size,H=(D?O/D:1)*h9,G=T-I;let Z=Math.min(H,G);const Q=G-Z;let q=Q<=0;Q>0&&Q<bBe&&(Z=Z+Q,q=!0),A.push({img:N,displayWidth:Z}),I=I+(Z+D2),q?(M.push(A),A=[],I=0):L===x.length-1&&M.push(A)}),d(M)},e[8]=x,e[9]=v):v=e[9];const y=v;let b;e[10]!==x?(b=[x],e[10]=x,e[11]=b):b=e[11],Jn(y,b);let C;e[12]!==y?(C=()=>{if(!i.current)return;const T=new ResizeObserver(y);return T.observe(i.current),()=>T.disconnect()},e[12]=y,e[13]=C):C=e[13];let S;if(e[14]!==x?(S=[x],e[14]=x,e[15]=S):S=e[15],Jn(C,S),a==="adult"){let T;return e[16]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(ui,{IconComponent:vBe,className:"min-h-[240px]!",children:r.jsx(j,{id:"H+Ty5b",defaultMessage:"Image results not available"})}),e[16]=T):T=e[16],T}if(!x||x.length===0){let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=km(ht.Images),e[17]=T):T=e[17];const M=T;let A;return e[18]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(ui,{IconComponent:M,children:r.jsx(j,{id:"jtAYXl",defaultMessage:"No images found"})}),e[18]=A):A=e[18],A}let E;if(e[19]!==c||e[20]!==s||e[21]!==x){let T;e[23]!==s||e[24]!==x?(T=(M,A)=>r.jsx("div",{className:"flex",style:{gap:D2,marginBottom:D2},children:M.map(I=>{const{img:N,displayWidth:L}=I;return r.jsx("div",{className:"object-cover",style:{width:L,height:h9},children:r.jsx(TBe,{image:N,allImages:x,turnIndex:s,onError:()=>p(N.content_url)})},N.url)})},A),e[23]=s,e[24]=x,e[25]=T):T=e[25],E=c.map(T),e[19]=c,e[20]=s,e[21]=x,e[22]=E}else E=e[22];let k;return e[26]!==E?(k=r.jsx("div",{ref:i,className:"w-full",children:E}),e[26]=E,e[27]=k):k=e[27],k}var OE;const SBe=ft.div(OE||(OE=ct(["\n  pointer-events-none absolute inset-0 z-10 bg-gradient-to-t\n  from-black/70 via-black/20 to-transparent\n  opacity-0 transition-opacity duration-200\n  group-hover:opacity-100 group-focus-visible:opacity-100\n  select-none flex flex-col justify-end\n"])));var DE;const wBe=ft.div(DE||(DE=ct(["\n  flex items-center gap-2 text-xs text-white/90 text-clip whitespace-nowrap\n"])));var FE;const kBe=ft.div(FE||(FE=ct(["\n  text-start text-sm font-medium text-white text-clip whitespace-nowrap\n"])));function EBe({image:t}){const[e,n]=_.useState(!1);return r.jsx(SBe,{children:r.jsxs(yBe,{className:"flex flex-col gap-1 px-2.5 pb-2.5",children:[r.jsxs(wBe,{children:[r.jsx(ks,{url:t.content_url,className:"icon-sm",containerClassName:z("bg-token-bg-primary rounded-sm overflow-hidden",!e&&"loading-results-shimmer"),size:32,minSize:16,applySizeToImg:!0,onLoad:()=>n(!0)}),r.jsx("span",{className:"text-clip whitespace-nowrap",children:t.domain})]}),r.jsx(kBe,{children:t.title})]})})}function TBe({image:t,allImages:e,turnIndex:n,onError:s}){const[o,a]=_.useState(!1),i=t1.useStore();return r.jsxs("button",{className:"border-token-border-light group relative block h-full w-full overflow-hidden rounded-lg border",disabled:!o,onClick:()=>{i.setCurrentImage({image:t,source:XA.SuperWidget,imageResults:e,analyticsMetadata:{turnIndex:n}})},children:[r.jsx("div",{className:z("bg-token-bg-tertiary absolute inset-0 transition-opacity duration-300",o?"pointer-events-none opacity-0":"animate-pulse opacity-100")}),r.jsx("img",{src:t.content_url,alt:t.title,onLoad:()=>a(!0),onError:s,className:z("block h-full w-full transform-gpu object-cover object-[0%_25%] transition-transform duration-300 hover:scale-103",o?"opacity-100":"opacity-0"),width:t.content_size.width,height:t.content_size.height}),o&&r.jsx(EBe,{image:t})]})}const a$=t=>_.createElement("svg",w({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M11.3349 10.3301V5.60547L4.47065 12.4707C4.21095 12.7304 3.78895 12.7304 3.52925 12.4707C3.26955 12.211 3.26955 11.789 3.52925 11.5293L10.3945 4.66504H5.66011C5.29284 4.66504 4.99507 4.36727 4.99507 4C4.99507 3.63273 5.29284 3.33496 5.66011 3.33496H11.9999L12.1337 3.34863C12.4369 3.41057 12.665 3.67857 12.665 4V10.3301C12.6649 10.6973 12.3672 10.9951 11.9999 10.9951C11.6327 10.9951 11.335 10.6973 11.3349 10.3301ZM11.333 4.66699L11.3349 4.66797L11.332 4.66504H11.331L11.333 4.66699Z"})),MBe=Object.freeze(Object.defineProperty({__proto__:null,default:a$},Symbol.toStringTag,{value:"Module"}));function ABe({href:t,turnIndex:e,tabType:n}){const s=n&&_U(n),o=()=>{B.logStructuredEvent(rC,{step:px.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_CLICK,turnIndex:e,fromTab:s})};return _.useEffect(()=>{B.logStructuredEvent(rC,{step:px.ATLAS_GOOGLE_SEARCH_IT_ACTION_STEP_SHOW,turnIndex:e,fromTab:s})},[e,s]),r.jsxs(to,{target:"_self",href:t,onClick:o,className:"flex items-center gap-2 text-sm text-[var(--interactive-label-accent-default)] select-none hover:text-(--super-widget-link-color-hover)",style:{"--super-widget-link-color-hover":"oklch(from var(--interactive-label-accent-default) calc(l - 0.2) clamp(0, calc(c + 0.03), 1.0) h)"},children:[r.jsx(j,w({},IBe.googleIt)),r.jsx(a$,{})]})}const IBe=Se({googleIt:{id:"ZOaw3K",defaultMessage:"Google"}}),jBe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.5353 9.60012C16.5353 8.7943 16.5288 8.52666 16.4591 8.2925C16.3916 8.06583 16.2807 7.85414 16.1329 7.66945C15.9803 7.47876 15.7645 7.32044 15.1027 6.86086L11.9025 4.63918C11.0356 4.03721 10.7407 3.84522 10.4415 3.77102C10.1518 3.69926 9.84844 3.69926 9.55871 3.77102C9.25946 3.84517 8.96491 4.037 8.09777 4.63918L4.89758 6.86086C4.23585 7.32039 4.01991 7.4788 3.8673 7.66945C3.71959 7.85412 3.60858 8.06585 3.54113 8.2925C3.47147 8.52666 3.46496 8.79429 3.46496 9.60012V13.9995C3.46496 14.4772 3.46549 14.796 3.48547 15.0405C3.50481 15.2773 3.53924 15.3857 3.57433 15.4546C3.67034 15.643 3.82343 15.7961 4.01183 15.8921C4.0807 15.9272 4.18923 15.9616 4.4259 15.981C4.67046 16.001 4.98923 16.0015 5.46691 16.0015H7.25207V13.1245C7.25231 11.6069 8.48241 10.3765 10.0001 10.3765C11.5178 10.3766 12.7479 11.6069 12.7482 13.1245V16.0015H14.5333C15.011 16.0015 15.3298 16.001 15.5743 15.981C15.8109 15.9616 15.9195 15.9272 15.9884 15.8921C16.1767 15.7961 16.3299 15.643 16.4259 15.4546C16.461 15.3857 16.4954 15.2772 16.5148 15.0405C16.5347 14.796 16.5353 14.4772 16.5353 13.9995V9.60012ZM17.8653 13.9995C17.8653 14.4553 17.8654 14.8377 17.84 15.1489C17.8139 15.4677 17.7578 15.7707 17.6114 16.0581C17.3879 16.4969 17.0306 16.8541 16.5919 17.0777C16.3044 17.2241 16.0016 17.2811 15.6827 17.3071C15.3715 17.3326 14.9891 17.3316 14.5333 17.3316H12.0831C11.7159 17.3315 11.4181 17.0337 11.4181 16.6665V13.1245C11.4178 12.3415 10.7832 11.7067 10.0001 11.7066C9.21694 11.7066 8.58142 12.3414 8.58117 13.1245V16.6665C8.58117 17.0338 8.2834 17.3316 7.91613 17.3316H5.46691C5.01118 17.3316 4.62878 17.3326 4.3175 17.3071C3.99865 17.2811 3.69579 17.2241 3.40832 17.0777C2.96959 16.8541 2.61233 16.4969 2.38879 16.0581C2.24243 15.7707 2.18633 15.4678 2.16027 15.1489C2.13484 14.8377 2.13488 14.4553 2.13488 13.9995V9.60012C2.13488 8.87504 2.12885 8.37705 2.26672 7.91359C2.38301 7.52267 2.57352 7.15791 2.82824 6.83938C3.13027 6.46179 3.54324 6.18263 4.13879 5.76906L7.33898 3.54641C8.11664 3.00637 8.645 2.62722 9.23937 2.48C9.73901 2.3563 10.2612 2.35626 10.7609 2.48C11.3552 2.62722 11.8836 3.00639 12.6612 3.54641L15.8614 5.76906C16.4569 6.18257 16.87 6.46182 17.172 6.83938C17.4267 7.15789 17.6172 7.52271 17.7335 7.91359C17.8714 8.37703 17.8654 8.87507 17.8653 9.60012V13.9995Z"}));function NBe(){return r.jsx(Xe.div,{layoutId:"super-widget-underline",className:"absolute start-0 end-0 bottom-0 h-0.5 bg-black dark:bg-white",transition:{type:"spring",duration:.3,bounce:.12}})}function PBe(s){var o=s,{selected:t,label:e}=o,n=we(o,["selected","label"]);const a=z(t?"text-token-text-primary":"text-token-text-tertiary hover:text-token-text-secondary",n.className);return r.jsx(pt,{label:e,className:a,children:r.jsx("button",U(w({},n),{className:"h-full w-full"}))})}function RBe({selectedTab:t,selectTab:e,className:n,textClassName:s,showNewsTab:o=!0}){const a=[{key:ht.Chat,label:r.jsx(j,w({},hu.homeTab)),icon:r.jsx(jBe,{className:"justify-self-center"})},{key:ht.Search,label:r.jsx(j,w({},hu.searchTab)),icon:r.jsx(C4,{className:"justify-self-center"})},{key:ht.Images,label:r.jsx(j,w({},hu.imagesTab)),icon:r.jsx(ZU,{className:"justify-self-center"})},{key:ht.Videos,label:r.jsx(j,w({},hu.videosTab)),icon:r.jsx(QU,{className:"justify-self-center"})}];return o&&a.push({key:ht.News,label:r.jsx(j,w({},hu.newsTab)),icon:r.jsx(KU,{className:"justify-self-center"})}),r.jsx(lv,{id:"super-widget-tabs",children:r.jsx("div",{className:z("flex h-full gap-0.5",n),children:a.map(({key:i,label:l,icon:c})=>r.jsxs(PBe,{label:l,className:z("relative flex-1 sm:w-(--tab-width) sm:flex-none",t===i?"font-medium":"font-normal",s),selected:t===i,style:{fontSize:"0.9375rem"},onClick:d=>{e(i),d.currentTarget.scrollIntoView({behavior:"smooth"})},children:[c,t===i&&r.jsx(NBe,{})]},i))})})}const hu=Se({homeTab:{id:"mYiOeg",defaultMessage:"Home"},searchTab:{id:"GjXttB",defaultMessage:"Search"},imagesTab:{id:"ZY9oIP",defaultMessage:"Images"},videosTab:{id:"C8mH8+",defaultMessage:"Videos"},newsTab:{id:"2QYAL1",defaultMessage:"News"}});function LBe({queryText:t,tabType:e,searchIt:n}){const s=km(e);return r.jsxs("div",{className:"flex w-full items-center text-start text-sm",children:[r.jsxs("span",{className:"text-token-text-tertiary flex max-w-[var(--user-chat-width,70%)] min-w-0 items-center",children:[r.jsx(s,{className:"me-2.5 h-4 w-4 shrink-0"}),r.jsx(j,U(w({},OBe(e)),{values:{prefix:o=>r.jsx("span",{className:"shrink-0",children:o}),query:r.jsx("span",{className:"min-w-0 flex-initial truncate",children:t}),trailingQuote:o=>r.jsx("span",{"aria-hidden":"true",className:"shrink-0",children:o})}}))]}),r.jsx("span",{className:"ms-auto flex-shrink-0",children:n})]})}function OBe(t){switch(t){case ht.Images:return Cg.imageResultsFor;case ht.Videos:return Cg.videoResultsFor;case ht.News:return Cg.newsResultsFor;case ht.Search:default:return Cg.searchResultsFor}}const Cg=Se({searchResultsFor:{id:"xeT484",defaultMessage:"<prefix>Search results for </prefix>{query}<trailingQuote></trailingQuote>"},imageResultsFor:{id:"OsLjmT",defaultMessage:"<prefix>Image results for </prefix>{query}<trailingQuote></trailingQuote>"},videoResultsFor:{id:"Egf3CB",defaultMessage:"<prefix>Video results for </prefix>{query}<trailingQuote></trailingQuote>"},newsResultsFor:{id:"MtgcpS",defaultMessage:"<prefix>News results for </prefix>{query}<trailingQuote></trailingQuote>"}});function S4(t,e,n){var s,o,a;return t===0?e[0]?yo(e[0]):null:(a=(o=(s=n[t])==null?void 0:s.widgets)==null?void 0:o.query)!=null?a:yo(e[t])}function Sg(t,e,n,s,o){var l,c,d,u,f;const a=((d=(c=(l=t==null?void 0:t.widgets)==null?void 0:l[n])==null?void 0:c.length)!=null?d:0)>0&&(!o||(t==null?void 0:t.widgets.safety)!=="adult"||(t==null?void 0:t.widgets.safe_search_off)!==!0||s===!0),i=((f=(u=e==null?void 0:e[n])==null?void 0:u.length)!=null?f:0)>0&&((e==null?void 0:e.safeSearchOff)!==!0||s===!0);return a||i?0:e&&qA(e,n)?1:2}function DBe(t,e,n,s,o,a,i){const l=s[t],c=S4(t,n,s),d=c?o[c]:void 0;switch(e){case ht.Search:return Sg(l,d,"navlinks",a,i);case ht.Images:return Sg(l,d,"images");case ht.Videos:return Sg(l,d,"videos");case ht.News:return Sg(l,d,"news");default:return 2}}function FBe(t){switch(t.safety){case Jr.SAFE:return"safe";case Jr.ADULT:return"adult";case Jr.FLAGGED:return"flagged";case Jr.NOT_RUN:return"not_run";case void 0:return}}function BBe(t,e,n,s,o,a,i){var f,m,g,p,h,x;const l={content_type:ut.SuperWidget,widgets:w({},(m=(f=n[t])==null?void 0:f.widgets)!=null?m:{navlinks:[],images:[],videos:[],news:[],news_tab_enabled:!0})},c=S4(t,o,n),d=c?s[c]:void 0;d&&(d.navlinks.length>0&&(l.widgets.navlinks=d.navlinks,l.widgets.navlinks_ready=((p=(g=d.fetchingStatus)==null?void 0:g.navlinks)==null?void 0:p.status)===ir.DONE||((x=(h=n[t])==null?void 0:h.widgets)==null?void 0:x.navlinks_ready)===!0,l.widgets.safe_search_off=d.safeSearchOff,l.widgets.safety=FBe(d)),d.images.length>0&&(l.widgets.images=d.images),d.videos.length>0&&(l.widgets.videos=d.videos),d.news.length>0&&(l.widgets.news=d.news));let u=!1;switch(e){case ht.Search:{const v=t===n.length-1;u=l.widgets.navlinks.length>0&&(!i||l.widgets.safety!=="adult"||l.widgets.safe_search_off!==!0||a===!0||!v)?!1:Jm(c,"navlinks");break}case ht.Images:u=l.widgets.images.length>0?!1:Jm(c,"images");break;case ht.Videos:u=l.widgets.videos.length>0?!1:Jm(c,"videos");break;case ht.News:u=l.widgets.news.length>0?!1:Jm(c,"news");break;case ht.Chat:break}return[l,u]}function Qst(){const t=V(),e=es(t),n=An(mn),s=tm(),o=rI();return e&&!n&&!s&&!o}function r$(){const t=V(),e=re(()=>rU());return typeof e=="boolean"?e:rs(t,"694761886").get("news_tab_enabled",!0)}function Jst({className:t,textClassName:e}){const n=V(),[s,o]=wm(),a=r$(),i=gr.useStore(),l=$s(),c=re(()=>uM(n));_.useEffect(()=>{!a&&s===ht.News&&o({tabType:ht.Chat})},[a,o,s]);function d(u){if(o({tabType:u}),u!==ht.Chat){const f=i.getActiveSystemHintType();f&&f!==Pe.Search&&l(null)}B.logStructuredEvent(hne,{tab:_U(s)})}return c?g8(n)?r.jsx(uBe,{selectedTab:s,selectTab:d,className:t,textClassName:e,showNewsTab:a}):r.jsx(RBe,{selectedTab:s,selectTab:d,className:t,textClassName:e,showNewsTab:a}):null}const UBe={[ht.Chat]:()=>null,[ht.Search]:JU,[ht.Images]:CBe,[ht.Videos]:pBe,[ht.News]:JFe};function $Be({userMessages:t,superWidgetMessageContents:e,tab:n,scrollToMessageId:s,isNewsTabEnabled:o,isAdultSearchEnabled:a}){"use no forget";const i=V(),l=re(()=>Rf(i)),c=_.useRef({});function d(g,p="smooth"){const h=c.current[g];h&&h.scrollIntoView({behavior:p,block:"start"})}_.useEffect(()=>{requestAnimationFrame(()=>{if(t.length>0){const g=t[t.length-1];g&&d(g.id,"instant")}})},[]),_.useEffect(()=>{setTimeout(()=>{s&&d(s)},50)},[s]);const u=Xa(g=>g.entries);if(n===ht.News&&!o)return null;const f=UBe[n],m=t.map((g,p)=>DBe(p,n,t,e,u,a,l));return r.jsx("div",{className:"thread-sm:px-2 flex w-full flex-col gap-4 px-4 pt-2",children:EL(t.length,g=>{if(m[g]!==0&&g!==t.length-1)return null;const p=S4(g,t,e),h=g>0&&m[g-1]===0,x=$Le([t[g]]);return r.jsxs("div",{className:"w-full",children:[h&&r.jsx("hr",{className:"border-heavy w-full pb-3.5"}),r.jsxs("div",{className:z("mb-4 flex scroll-mt-6 flex-col gap-4 text-base",h&&"mt-2.5"),ref:v=>{c.current[t[g].id]=v},children:[r.jsx(VBe,{queryText:p,tab:n,turnIndex:g}),x&&r.jsx(VLe,{message:x}),!x&&r.jsx(che,{message:t[g]})]}),(()=>{var C,S;const[v,y]=BBe(g,n,e,u,t,a,l),b=(g===0||((S=(C=e[g])==null?void 0:C.widgets)==null?void 0:S.query)!==void 0)&&!y;return v&&b?r.jsx(f,{content:v,isAdultSearchEnabled:a,isLatestTurn:g===e.length-1,turnIndex:g,source:"search"}):r.jsx("div",{className:"min-h-[calc(100dvh_-_var(--header-height)_".concat(x?"+_330":"-_120","px)]"),children:m[g]!==2&&r.jsx("div",{className:"result-streaming pulse",children:r.jsx("span",{})})})})()]},g)})})}function VBe(t){"use forget";const e=W.c(11),{queryText:n,turnIndex:s,tab:o}=t;if(!n)return null;let a;e[0]!==n||e[1]!==o?(a=xBe(n,o),e[0]=n,e[1]=o,e[2]=a):a=e[2];let i;e[3]!==a||e[4]!==o||e[5]!==s?(i=r.jsx(ABe,{href:a,turnIndex:s,tabType:o}),e[3]=a,e[4]=o,e[5]=s,e[6]=i):i=e[6];let l;return e[7]!==n||e[8]!==i||e[9]!==o?(l=r.jsx(LBe,{queryText:n,tabType:o,searchIt:i}),e[7]=n,e[8]=i,e[9]=o,e[10]=l):l=e[10],l}function Xst(t){"use forget";var N,L,O,D,$,H;const e=W.c(41),{clientThreadId:n,children:s}=t,o=V(),a=r$(),[i,l]=wm();let c;e[0]!==o?(c=()=>Rf(o)&&Jc(o,Lt.AtlasAdultSearchAllowed),e[0]=o,e[1]=c):c=e[1];const d=re(c),[u,f,m]=Ve(n,GBe),g=f[f.length-1],p=(L=(N=g==null?void 0:g.content)==null?void 0:N.widgets)==null?void 0:L.news_tab_enabled;let h,x;e[2]!==p?(h=()=>{rU.set(typeof p=="boolean"?p:void 0)},x=[p],e[2]=p,e[3]=h,e[4]=x):(h=e[3],x=e[4]),_.useEffect(h,x);let v,y;e[5]!==a||e[6]!==l||e[7]!==i?(v=()=>{!a&&i===ht.News&&l({tabType:ht.Chat})},y=[a,l,i],e[5]=a,e[6]=l,e[7]=i,e[8]=v,e[9]=y):(v=e[8],y=e[9]),_.useEffect(v,y);let b;e[10]!==o||e[11]!==d||e[12]!==a||e[13]!==((D=(O=g==null?void 0:g.content)==null?void 0:O.widgets)==null?void 0:D.query)||e[14]!==i||e[15]!==u[0]?(b=()=>{var Y,te,ae,se,ce;const G=u[0],Z=G?yo(G):null,Q=(ae=(te=(Y=g==null?void 0:g.content)==null?void 0:Y.widgets)==null?void 0:te.query)!=null?ae:"",q=((ce=(se=Q==null?void 0:Q.trim())==null?void 0:se.length)!=null?ce:0)>0?Q:Z;q&&(i==="search"?Eu(o,q,"navlinks",d):i==="images"?Eu(o,q,"images"):i==="videos"?Eu(o,q,"videos"):i==="news"&&a&&Eu(o,q,"news"))},e[10]=o,e[11]=d,e[12]=a,e[13]=(H=($=g==null?void 0:g.content)==null?void 0:$.widgets)==null?void 0:H.query,e[14]=i,e[15]=u[0],e[16]=b):b=e[16];let C;e[17]!==o||e[18]!==d||e[19]!==a||e[20]!==g||e[21]!==i||e[22]!==u?(C=[o,i,u,a,g,d],e[17]=o,e[18]=d,e[19]=a,e[20]=g,e[21]=i,e[22]=u,e[23]=C):C=e[23],_.useEffect(b,C);let S;if(e[24]!==o?(S=()=>uM(o),e[24]=o,e[25]=S):S=e[25],!re(S))return s;const k=i===ht.Chat?"block":"hidden";let T;e[26]!==s||e[27]!==k?(T=r.jsx("div",{id:"mini-chat-content",className:k,children:s}),e[26]=s,e[27]=k,e[28]=T):T=e[28];let M;e[29]!==d||e[30]!==a||e[31]!==m||e[32]!==i||e[33]!==f||e[34]!==u?(M=i!==ht.Chat&&(i!==ht.News||a)&&r.jsx($Be,{userMessages:u,superWidgetMessageContents:f.map(HBe),tab:i,scrollToMessageId:m,isNewsTabEnabled:a,isAdultSearchEnabled:d},i),e[29]=d,e[30]=a,e[31]=m,e[32]=i,e[33]=f,e[34]=u,e[35]=M):M=e[35];let A;e[36]!==M?(A=r.jsx(Ar,{children:M}),e[36]=M,e[37]=A):A=e[37];let I;return e[38]!==T||e[39]!==A?(I=r.jsxs("div",{children:[T,A]}),e[38]=T,e[39]=A,e[40]=I):I=e[40],I}function HBe(t){return t.content}function GBe(t){return[he.getUserMessages(t).filter(WBe),he.getSuperWidgetMessages(t),t==null?void 0:t.scrollToMessageId]}function WBe(t){var e;return!((e=t.metadata)!=null&&e.is_visually_hidden_from_conversation)}const _9=R(()=>P(()=>import("./fx4tif7av4x5mmpn.js"),__vite__mapDeps([245,1])),{loading:t=>F(t)}),By=R(()=>P(()=>Promise.resolve().then(()=>t5),void 0),{loading:t=>F(t)}),x9=R(()=>P(()=>import("./c0ouyltso7kfescp.js"),__vite__mapDeps([490,1])),{loading:t=>F(t)}),i$=Oe.TemporaryChatOnboarding;function eot(){const t=Es(),{eligible:e}=lt(i$);return e&&t}function _u({icon:t,title:e,description:n}){return r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"mt-1 h-5 w-5 shrink-0",children:t}),r.jsxs("div",{className:"ms-4",children:[r.jsx("div",{className:"text-lg font-semibold",children:e}),r.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:n})]})]})}function tot({onClose:t}){const[e,n]=_.useState(!0),s=V(),o=st(s),a=ne(),i=Fd(),l=_.useCallback(()=>{ot(s,i$),n(!1),t==null||t()},[s,t]);return _.useEffect(()=>{B.logUpsellOrModalEvent(dn,{eventId:"temporary_chat_onboarding_modal_shown",type:rn.UPSELL_OR_MODAL_TYPE_CUSTOM_NUX_MODAL})},[]),o!=null&&o.isWorkspaceAccount()?r.jsx(Mt,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:as,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(cs.title),primaryButton:r.jsx(Ns.Button,{onClick:l,title:a.formatMessage(cs.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(_u,{icon:r.jsx(By,{className:"h-full w-full"}),title:a.formatMessage(cs.bulletTitle1),description:a.formatMessage({id:"nSGhxr",defaultMessage:"Temporary chats won't appear in your history."})}),r.jsx(_u,{icon:i?r.jsx(_9,{className:"h-full w-full"}):r.jsx(x9,{className:"h-full w-full"}),title:a.formatMessage(i?cs.bulletTitle2MemoryAvailable:cs.bulletTitle2MemoryUnavailable),description:a.formatMessage(i?cs.bulletDescription2MemoryAvailable:cs.bulletDescription2MemoryUnavailable)})]})}):r.jsx(Mt,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:as,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(cs.title),primaryButton:r.jsx(Ns.Button,{onClick:l,title:a.formatMessage(cs.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(_u,{icon:r.jsx(By,{className:"h-full w-full"}),title:a.formatMessage(cs.bulletTitle1),description:a.formatMessage(cs.bulletDescription1)}),r.jsx(_u,{icon:r.jsx(Lq,{className:"h-full w-full"}),title:a.formatMessage(cs.bulletTitle3),description:a.formatMessage(cs.bulletDescription3)}),r.jsx(_u,{icon:i?r.jsx(_9,{className:"h-full w-full"}):r.jsx(x9,{className:"h-full w-full"}),title:a.formatMessage(i?cs.bulletTitle2MemoryAvailable:cs.bulletTitle2MemoryUnavailable),description:a.formatMessage(i?cs.bulletDescription2MemoryAvailable:cs.bulletDescription2MemoryUnavailable)})]})})}const cs=Se({title:{id:"TemporaryChatOnboardingModal.title",defaultMessage:"Temporary Chat"},bulletTitle1:{Icon:r.jsx(By,{className:"h-full w-full"}),id:"TemporaryChatOnboardingModal.bulletTitle1",defaultMessage:"Not in history"},bulletDescription1:{id:"TemporaryChatOnboardingModal.bulletDescription1.1",defaultMessage:"Temporary chats won't appear in your history. For safety purposes, we may keep a copy of your chat for up to 30 days."},bulletTitle2MemoryAvailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryAvailable",defaultMessage:"Memory off"},bulletDescription2MemoryAvailable:{id:"rmWwWN",defaultMessage:"While in a temporary chat, ChatGPT won't use or update its memory. Custom instructions will still be followed if you have them enabled."},bulletTitle2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryUnavailable",defaultMessage:"Follows Custom Instructions"},bulletDescription2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletDescription2MemoryUnavailable",defaultMessage:"Custom Instructions will still be followed if you have them enabled."},bulletTitle3:{id:"TemporaryChatOnboardingModal.bulletTitle3",defaultMessage:"No model training"},bulletDescription3:{id:"TemporaryChatOnboardingModal.bulletDescription3",defaultMessage:"Temporary chats won't be used to improve our models."},continue:{id:"TemporaryChatOnboardingModal.continue",defaultMessage:"Continue"}}),l$=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8.11523 3.19409C9.15589 2.15344 10.844 2.15363 11.8848 3.19409L16.8057 8.11499C17.8462 9.15575 17.8463 10.8438 16.8057 11.8845L11.8848 16.8054C10.8441 17.8461 9.156 17.846 8.11523 16.8054L3.19434 11.8845C2.15387 10.8438 2.15369 9.15564 3.19434 8.11499L8.11523 3.19409ZM7.96582 7.49976C7.78889 7.49965 7.6396 7.63263 7.61914 7.80835C7.49243 8.90693 6.87202 9.52734 5.77344 9.65405C5.59772 9.67451 5.46474 9.8238 5.46484 10.0007C5.46517 10.1777 5.59859 10.3264 5.77441 10.3464C6.85731 10.4691 7.52042 11.0831 7.61816 12.1824C7.63414 12.3623 7.78525 12.4999 7.96582 12.4998C8.14634 12.4994 8.29693 12.3613 8.3125 12.1814C8.40645 11.0979 9.06302 10.4414 10.1465 10.3474C10.3264 10.3318 10.4645 10.1813 10.4648 10.0007C10.465 9.82016 10.3273 9.66905 10.1475 9.65308C9.04822 9.55533 8.4342 8.89222 8.31152 7.80933C8.29153 7.6335 8.14276 7.50008 7.96582 7.49976Z",fill:"#5856D6"})),not=Object.freeze(Object.defineProperty({__proto__:null,default:l$},Symbol.toStringTag,{value:"Module"})),J1=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M17.665 10C17.665 10.6877 17.1785 11.2454 16.5488 11.3945L16.4219 11.4189C14.7098 11.6665 13.6129 12.1305 12.877 12.8623C12.1414 13.5938 11.6742 14.6843 11.4238 16.3887C11.3197 17.0973 10.7182 17.665 9.96484 17.665C9.27085 17.665 8.68836 17.1772 8.53613 16.5215C8.12392 14.7459 7.6623 13.619 6.95703 12.8652C6.31314 12.1772 5.39414 11.7268 3.88672 11.4688L3.57715 11.4199C2.88869 11.319 2.33496 10.734 2.33496 10C2.33496 9.26603 2.88869 8.681 3.57715 8.58008L3.88672 8.53125C5.39414 8.27321 6.31314 7.82277 6.95703 7.13477C7.6623 6.38104 8.12392 5.25413 8.53613 3.47852L8.56934 3.35742C8.76133 2.76356 9.31424 2.33496 9.96484 2.33496C10.7182 2.33497 11.3197 2.9027 11.4238 3.61133L11.5283 4.22266C11.7954 5.58295 12.2334 6.49773 12.877 7.1377C13.6129 7.86952 14.7098 8.33351 16.4219 8.58105C17.1119 8.68101 17.665 9.26667 17.665 10Z"})),w4=Object.freeze(Object.defineProperty({__proto__:null,default:J1},Symbol.toStringTag,{value:"Module"})),zBe=R(()=>P(()=>import("./my28hta7gnvvpint.js"),__vite__mapDeps([491,1])),{loading:t=>F(t)});var c$=(t=>(t.GENERIC="generic",t.GENERIC_FREE_TRIAL="generic_free_trial",t.GO="go",t.PLUS="plus",t))(c$||{});const F2="thread_header_upgrade_pill_dismissed_event",qBe=1440*60*1e3,YBe={[Ye.PLUS]:gt.tryPlus,[Ye.GO]:gt.tryGo,[Ye.SELF_SERVE_BUSINESS]:gt.tryBusiness};function ZBe(t){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}return null}function sot(t){"use forget";var G,Z,Q,q,Y,te;const e=W.c(18),{clientThreadId:n,fromHeader:s}=t,o=V(),a=PP(),{enableThreadHeaderUpgradePill:i}=Lue();let l;e[0]!==n?(l=br(n),e[0]=n,e[1]=l):l=e[1];const c=l,d=Ve(n,KBe),u=ev(),f=fv();let m;e[2]!==(u==null?void 0:u.call_to_action)?(m=((G=u==null?void 0:u.call_to_action)==null?void 0:G.includes(Wt.GET_PLUS))||((Z=u==null?void 0:u.call_to_action)==null?void 0:Z.includes(Wt.UPGRADE_TO_GO))||((Q=u==null?void 0:u.call_to_action)==null?void 0:Q.includes(Wt.GET_BUSINESS_TRIAL))||((q=u==null?void 0:u.call_to_action)==null?void 0:q.includes(Wt.GET_GO_TRIAL))||((Y=u==null?void 0:u.call_to_action)==null?void 0:Y.includes(Wt.GET_PLUS_TRIAL))||((te=u==null?void 0:u.call_to_action)==null?void 0:te.includes(Wt.GET_PRO)),e[2]=u==null?void 0:u.call_to_action,e[3]=m):m=e[3];const g=m,p=c&&!d,[h,x]=_.useState(null),v=Kn(n),y=h!==null;let b,C;e[4]!==n||e[5]!==v?(b=()=>{if(typeof window>"u")return;const ae=ZBe(_t.getItem(Ue.ThreadHeaderUpgradePillDismissals));ae!=null&&Date.now()-ae<qBe?x(ae):ae!=null&&_t.setItem(Ue.ThreadHeaderUpgradePillDismissals,null);const se=ce=>{const X=ce.detail;(X===n||v&&X===v)&&x(Date.now())};return window.addEventListener(F2,se),()=>{window.removeEventListener(F2,se)}},C=[n,v],e[4]=n,e[5]=v,e[6]=b,e[7]=C):(b=e[6],C=e[7]),_.useEffect(b,C);const S=a&&i&&!g,E=S&&p;let k;e[8]!==o?(k=ze(o,IF,{disableExposureLog:!0}).get(YSe,!1),e[8]=o,e[9]=k):k=e[9];const T=k,M=ZSe(),A=(f==null?void 0:f.beacon_id)===LF,N=(M||A)&&T;let L=!1;if(!N&&s&&S&&n){let ae;e[10]!==o?(ae=ze(o,"684023316").get("show_persistent_generic_upsell",!1),e[10]=o,e[11]=ae):ae=e[11],L=ae}let O;e[12]!==n||e[13]!==v?(O=()=>{const ae=v!=null?v:n,se=Date.now();if(_t.setItem(Ue.ThreadHeaderUpgradePillDismissals,se),x(se),typeof window<"u"){const ce=new Set([ae]);v&&v!==n&&ce.add(n);for(const X of ce)window.dispatchEvent(new CustomEvent(F2,{detail:X}))}},e[12]=n,e[13]=v,e[14]=O):O=e[14];const D=O,$=!N&&(E||L&&!y);let H;return e[15]!==D||e[16]!==$?(H={shouldShow:$,showCloseButton:!0,handleClose:D},e[15]=D,e[16]=$,e[17]=H):H=e[17],H}function KBe(t){return he.hasUserMessage(t)}function oot(t){"use forget";var M;const e=W.c(17),{clientThreadId:n,onClose:s,showCloseButton:o}=t,a=o===void 0?!0:o,i=V(),l=Sn(),c=Voe(),d=Goe(),u=Hoe();let f;e[0]!==n?(f=br(n),e[0]=n,e[1]=f):f=e[1];const m=f,g=Ve(n,JBe),p=a&&(!m||g),h=re(QBe);let x=null;d.eligible?x=Ye.SELF_SERVE_BUSINESS:c.eligible?x=Ye.PLUS:u.eligible&&(x=Ye.GO);const v=x!==null,y=p1(),{isLoading:b}=eo(Lt.Sunshine),{data:C,isLoading:S}=Vf(void 0,!1,y),E=y&&((M=C==null?void 0:C.memoryFullPct)!=null?M:0)>=100;if(!l||S&&(b||E))return null;let T;if(v)T="generic_free_trial";else if(h)bp(i)?T="go":T="plus";else if(bp(i))T="go";else{const I=ze(i,"497415788").get("upgrade_pill_type","plus");if(sUe(I))T=I;else return null}switch(T){case"generic":{let A;return e[2]!==s||e[3]!==p?(A=r.jsx(tUe,{onClose:s,showCloseButton:p}),e[2]=s,e[3]=p,e[4]=A):A=e[4],A}case"generic_free_trial":{if(!x)return null;let A;return e[5]!==x||e[6]!==s||e[7]!==p?(A=r.jsx(nUe,{onClose:s,planType:x,showCloseButton:p}),e[5]=x,e[6]=s,e[7]=p,e[8]=A):A=e[8],A}case"plus":{let A;return e[9]!==h||e[10]!==s||e[11]!==p?(A=r.jsx(XBe,{isMobileWeb:h,onClose:s,showCloseButton:p}),e[9]=h,e[10]=s,e[11]=p,e[12]=A):A=e[12],A}case"go":{let A;return e[13]!==h||e[14]!==s||e[15]!==p?(A=r.jsx(eUe,{isMobileWeb:h,onClose:s,showCloseButton:p}),e[13]=h,e[14]=s,e[15]=p,e[16]=A):A=e[16],A}}}function QBe(){return YE()}function JBe(t){return he.hasUserMessage(t)}function XBe(t){"use forget";const e=W.c(13),{isMobileWeb:n,onClose:s,showCloseButton:o}=t,a=at(),i=V();let l;e[0]!==a?(l=()=>{pn(a,"thread_header_get_plus_pill")},e[0]=a,e[1]=l):l=e[1];const c=l;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(J1,{className:"icon-sm"}),e[2]=d):d=e[2];let u;e[3]!==i||e[4]!==n?(u=oUe(i,n),e[3]=i,e[4]=n,e[5]=u):u=e[5];let f;e[6]!==u?(f=r.jsx(j,w({},u)),e[6]=u,e[7]=f):f=e[7];let m;return e[8]!==c||e[9]!==s||e[10]!==o||e[11]!==f?(m=r.jsxs(X1,{onClick:c,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:s,showCloseButton:o,type:"plus",children:[d,f]}),e[8]=c,e[9]=s,e[10]=o,e[11]=f,e[12]=m):m=e[12],m}function eUe(t){"use forget";const e=W.c(13),{isMobileWeb:n,onClose:s,showCloseButton:o}=t,a=at(),i=V();let l;e[0]!==a?(l=()=>{pn(a,"thread_header_get_plus_pill")},e[0]=a,e[1]=l):l=e[1];const c=l;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(l$,{className:"icon-sm"}),e[2]=d):d=e[2];let u;e[3]!==i||e[4]!==n?(u=aUe(i,n),e[3]=i,e[4]=n,e[5]=u):u=e[5];let f;e[6]!==u?(f=r.jsx(j,w({},u)),e[6]=u,e[7]=f):f=e[7];let m;return e[8]!==c||e[9]!==s||e[10]!==o||e[11]!==f?(m=r.jsxs(X1,{onClick:c,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:s,showCloseButton:o,type:"go",children:[d,f]}),e[8]=c,e[9]=s,e[10]=o,e[11]=f,e[12]=m):m=e[12],m}function tUe(t){"use forget";const e=W.c(8),{onClose:n,showCloseButton:s}=t,o=at();let a;e[0]!==o?(a=()=>{pn(o,"thread_header_generic_upgrade_pill_button")},e[0]=o,e[1]=a):a=e[1];const i=a;let l,c;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(J1,{className:"icon-sm"}),c=r.jsx(j,w({},gt.upgrade)),e[2]=l,e[3]=c):(l=e[2],c=e[3]);let d;return e[4]!==i||e[5]!==n||e[6]!==s?(d=r.jsxs(X1,{onClick:i,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,showCloseButton:s,type:"generic",children:[l,c]}),e[4]=i,e[5]=n,e[6]=s,e[7]=d):d=e[7],d}function nUe(t){"use forget";const e=W.c(10),{onClose:n,planType:s,showCloseButton:o}=t,a=V(),i=at(),c=s&&ze(a,"1288455623").get("enabled",!1)?YBe[s]:gt.upgradeForFree;let d;e[0]!==i?(d=()=>{pn(i,"thread_header_generic_free_trial_upgrade_pill_button")},e[0]=i,e[1]=d):d=e[1];const u=d;let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(J1,{className:"icon-sm"}),e[2]=f):f=e[2];let m;e[3]!==c?(m=r.jsx(j,w({},c)),e[3]=c,e[4]=m):m=e[4];let g;return e[5]!==u||e[6]!==n||e[7]!==o||e[8]!==m?(g=r.jsxs(X1,{onClick:u,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,showCloseButton:o,type:"generic_free_trial",children:[f,m]}),e[5]=u,e[6]=n,e[7]=o,e[8]=m,e[9]=g):g=e[9],g}function X1(t){"use forget";const e=W.c(30),{children:n,className:s,onClick:o,onClose:a,showCloseButton:i,type:l}=t,c=ne(),[d,u]=_.useState(!1),f=i?"py-2 pe-2":"py-2";let m;e[0]!==s||e[1]!==f?(m=z("inline-flex items-center gap-1 rounded-full text-sm font-medium",f,s),e[0]=s,e[1]=f,e[2]=m):m=e[2];const g=m,p=i?"pe-0":"pe-3";let h;e[3]!==p?(h=z("flex items-center gap-1 bg-transparent ps-2.5 text-current focus:outline-none",p),e[3]=p,e[4]=h):h=e[4];const x=h;let v,y;e[5]!==l?(v=()=>{B.logEventWithStatsig("Thread Header Upgrade Pill Button Shown","chatgpt_thread_header_upgrade_pill_button_shown",{type:l})},y=[l],e[5]=l,e[6]=v,e[7]=y):(v=e[6],y=e[7]),_.useEffect(v,y);let b;e[8]!==o||e[9]!==l?(b=()=>{B.logEventWithStatsig("Thread Header Upgrade Pill Button Clicked","chatgpt_thread_header_upgrade_pill_button_clicked",{type:l}),o==null||o()},e[8]=o,e[9]=l,e[10]=b):b=e[10];const C=b;let S;e[11]!==a||e[12]!==l?(S=()=>{B.logEventWithStatsig("Thread Header Upgrade Pill Button Dismissed","chatgpt_thread_header_upgrade_pill_button_dismissed",{type:l}),a()},e[11]=a,e[12]=l,e[13]=S):S=e[13];const E=S;let k,T;e[14]!==i?(T=()=>{if(!i){u(!1);return}if(typeof window>"u"){u(!0);return}const N=window.requestAnimationFrame(()=>{u(!0)});return()=>{window.cancelAnimationFrame(N)}},k=[i],e[14]=i,e[15]=k,e[16]=T):(k=e[15],T=e[16]),_.useEffect(T,k);let M;e[17]!==n||e[18]!==x||e[19]!==C?(M=r.jsx("button",{type:"button",onClick:C,className:x,children:n}),e[17]=n,e[18]=x,e[19]=C,e[20]=M):M=e[20];let A;e[21]!==E||e[22]!==c||e[23]!==d||e[24]!==i?(A=i?r.jsx("button",{type:"button",onClick:E,className:z("ms-0 flex h-4 w-4 items-center justify-center rounded-full text-[black] hover:bg-[#E4E4F6] dark:text-[white] dark:hover:bg-[#414071]","transform transition-all duration-200 ease-out",d?"pointer-events-auto visible translate-x-0 opacity-100":"pointer-events-none invisible -translate-x-1 opacity-0"),"aria-label":c.formatMessage(gt.dismissUpgradeReminder),tabIndex:d?0:-1,children:r.jsx(zBe,{height:20,width:20,color:"text-token-text-primary"})}):null,e[21]=E,e[22]=c,e[23]=d,e[24]=i,e[25]=A):A=e[25];let I;return e[26]!==g||e[27]!==M||e[28]!==A?(I=r.jsxs("div",{className:g,children:[M,A]}),e[26]=g,e[27]=M,e[28]=A,e[29]=I):I=e[29],I}function sUe(t){return Object.values(c$).includes(t)}function oUe(t,e){const n=ze(t,"497415788");return e&&n.get("should_show_upgrade_cta_mobile_web",!1)?gt.upgrade:gt.getPlus}function aUe(t,e){const n=ze(t,"497415788");return e&&n.get("should_show_upgrade_cta_mobile_web",!1)?gt.upgrade:gt.upgradeToGo}var BE;const rUe=ft.button(BE||(BE=ct(["group flex cursor-pointer justify-center items-center gap-1 rounded-lg min-h-9 touch:min-h-10 px-2.5 text-lg hover:bg-token-surface-hover focus-visible:bg-token-surface-hover font-normal whitespace-nowrap focus-visible:outline-none"]))),iUe=t=>{"use forget";const e=W.c(4),{headerTextClassName:n}=t,s=n!=null?n:"px-2.5 text-lg";let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(j,{id:"mhGPZ6",defaultMessage:"ChatGPT"}),e[0]=o):o=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("span",{className:"text-token-text-tertiary ms-1",children:r.jsx(j,{id:"0GIpXd",defaultMessage:"Voice"})}),e[1]=a):a=e[1];let i;return e[2]!==s?(i=r.jsxs("div",{className:s,children:[o,a]}),e[2]=s,e[3]=i):i=e[3],i};function lUe(t,e){var s;const n=e.categories.find(({defaultModel:o,supportedModels:a})=>o===t||(a==null?void 0:a.includes(t)));return(s=n==null?void 0:n.renderHeaderType)!=null?s:tx.SHORT_LABEL}function cUe(t,e){const n=e.groups.find(({modelIds:s})=>s.includes(t));return(n==null?void 0:n.group)!=null}const dUe=R(()=>P(()=>import("./by33sp1m5h17tgw2.js"),__vite__mapDeps([492,1,10,11])).then(t=>t.GizmoModelPicker)),uUe=t=>{"use forget";const e=W.c(2),{conversation:n,shouldShowFinchSection:s,preferredModelId:o}=t,a=Nb(),i=Rb(n,a,s,void 0,o);let l;return e[0]!==i?(l=r.jsx(Pb,{sections:i}),e[0]=i,e[1]=l):l=e[1],l};function fUe({conversation:t,preferredModelId:e,headerTextClassName:n,chevronClassName:s}){var M;const o=V(),a=ne();gr.useStoreWithInit({});const i=xs(),l=Pc(i),c=gl(i),d=Th(),u=st(o),f=Xc(A=>A.shouldShowThreadModelPickerDot),m=Oq((M=Dq(o))==null?void 0:M.user,u),g=re(()=>yn(t).id),p=re(()=>ea(t)),{modelLabel:h}=hf(l?null:g,p),x=l?tx.SHORT_LABEL:lUe(g,p),y=!!tt(o)&&!(u!=null&&u.isFree())||m,b=_.useMemo(()=>!tt(o)||!Ede(o,u,d,p)?!1:(Ade()&&!f&&Ln.setThreadModelPickerAlertDot(!0),!0),[o,u,p,d,f]);if(Pl())return r.jsx(iUe,{headerTextClassName:n});if(c)return r.jsx("div",{className:z("text-token-text-primary px-3",n!=null?n:"text-lg"),children:f_});y&&(xa.markStart("ThreadModelSelector"),h!=null&&xa.markRendered("ThreadModelSelector"));const S=x===tx.TITLE?r.jsx(r.Fragment,{children:h}):r.jsxs(r.Fragment,{children:[f_," ",r.jsx("span",{className:"text-token-text-tertiary",children:h})]}),E=r.jsx("div",{className:n,children:y&&h!=null?S:f_}),k=!l&&cUe(g,p),T=r.jsxs(rUe,{style:{viewTransitionName:"var(--vt-thread-model-switcher)"},"aria-label":h?a.formatMessage({id:"JrtGPQ",defaultMessage:"Model selector, current model is {modelLabel}"},{modelLabel:h}):a.formatMessage({id:"/D1dJC",defaultMessage:"Model selector"}),children:[k?r.jsx(pt,{label:g,side:"right",children:E}):E,r.jsx(Q5,{className:z(s!=null?s:"icon-sm","text-token-text-tertiary")}),f&&r.jsx(Jj,{color:"blue",className:"ms-1"})]});return p===void 0?T:r.jsx(kr,{alignOffset:-4,size:"small",triggerButton:T,onOpenChange:A=>{B.logEvent("Toggle Model Switcher",{isOpen:A}),qe.logEvent("toggle_model_switcher",null,{isOpen:String(A)})},testId:"model-switcher-dropdown",children:r.jsx(uUe,{conversation:t,shouldShowFinchSection:b,preferredModelId:e})})}function aot(t){"use forget";var d;const e=W.c(12),{conversation:n,textClassName:s,chevronClassName:o}=t,a=V();let i;e[0]!==n?(i=()=>Qc(n),e[0]=n,e[1]=i):i=e[1];const l=re(i),{data:c}=Ci(l);if(l==null||jl(a,l)){const u=(d=c==null?void 0:c.gizmo.default_model)!=null?d:void 0;let f;return e[2]!==o||e[3]!==n||e[4]!==u||e[5]!==s?(f=r.jsx(fUe,{conversation:n,preferredModelId:u,headerTextClassName:s,chevronClassName:o}),e[2]=o,e[3]=n,e[4]=u,e[5]=s,e[6]=f):f=e[6],f}else{let u;return e[7]!==o||e[8]!==n||e[9]!==l||e[10]!==s?(u=r.jsx(dUe,{gizmoId:l,conversation:n,textClassName:s,chevronClassName:o}),e[7]=o,e[8]=n,e[9]=l,e[10]=s,e[11]=u):u=e[11],u}}const mUe=t=>{const e=[];let n=null;const s={};wa(()=>RO(t),d=>{d==null||d.forEach(u=>{var f;s[u.id]=(f=u.conversation_id)!=null?f:void 0})},{fireImmediately:!0});const o=d=>{ge.safePost("/feed/interactions",{requestBody:{events:d}})},a=()=>{if(!n)return;const{cardId:d,openTimestamp:u}=n,f=(Date.now()-u)/1e3;e.push({type:"read_expanded",card_id:d,dwell_time_seconds:f,timestamp:new Date().toISOString()}),Fs(t).logEventWithStatsig("(Web) FYP Card Closed","chatgpt_web_fyp_card_closed",{card_id:d,dwell_time_seconds:f,conversation_id:s[d]}),n=null};return{trackCardOpen:d=>{(n==null?void 0:n.cardId)!==d&&(n&&a(),n={cardId:d,openTimestamp:Date.now()},Fs(t).logEventWithStatsig("(Web) FYP Card Opened","chatgpt_web_fyp_card_opened",{card_id:d,conversation_id:s[d]}),Ie.count(je.PULSE,"chatgpt_web_fyp_card_opened"))},trackCardClose:a,trackCardImpression:d=>{e.push({type:"impression",card_id:d,dwell_time_seconds:0,timestamp:new Date().toISOString()}),Fs(t).logEventWithStatsig("(Web) FYP Card Viewed","chatgpt_web_fyp_card_viewed",{card_id:d,conversation_id:s[d]}),Ie.count(je.PULSE,"chatgpt_web_fyp_card_viewed")},trackAndFlushInteractions:()=>{e.length!==0&&(o(e),e.length=0)}}},gUe=Hn(t=>mUe(t)),pUe=3e3,hUe=()=>{"use forget";const t=W.c(9),e=V();let n;t[0]!==e?(n=gUe(e),t[0]=e,t[1]=n):n=t[1];const s=n;L3(s.trackAndFlushInteractions,pUe);let o,a;t[2]!==s.trackAndFlushInteractions?(o=()=>{const l=If(window,{pagehide:s.trackAndFlushInteractions,beforeunload:s.trackAndFlushInteractions,visibilitychange:s.trackAndFlushInteractions});return()=>{l()}},a=[s.trackAndFlushInteractions],t[2]=s.trackAndFlushInteractions,t[3]=o,t[4]=a):(o=t[3],a=t[4]),_.useEffect(o,a);let i;return t[5]!==s.trackCardClose||t[6]!==s.trackCardImpression||t[7]!==s.trackCardOpen?(i={trackCardOpen:s.trackCardOpen,trackCardClose:s.trackCardClose,trackCardImpression:s.trackCardImpression},t[5]=s.trackCardClose,t[6]=s.trackCardImpression,t[7]=s.trackCardOpen,t[8]=i):i=t[8],i},_Ue=R(()=>P(()=>import("./loskhkuah3is6630.js"),__vite__mapDeps([493,1,494,10,11,349,350,345,346,347,348,317,0,495,431,71,496,430,391,392,393,497,498,499,500,501,502,503,504,440])).then(t=>t.PulseCardConversationModal));function d$(){"use forget";const t=W.c(17),e=V();let n;t[0]!==e?(n=Ra(e),t[0]=e,t[1]=n):n=t[1];const s=n,{trackCardOpen:o,trackCardClose:a}=hUe();let i;t[2]!==s||t[3]!==a?(i=()=>{vo(()=>{s.isCardModalOpen$.set(!1),s.cardModalState$.set(PO)}),a()},t[2]=s,t[3]=a,t[4]=i):i=t[4];const l=i;let c;t[5]!==e||t[6]!==l||t[7]!==s||t[8]!==o?(c=g=>{o(g),vo(()=>{s.isCardModalOpen$.set(!0),s.cardModalState$.set({activeCardId:g})}),dt(e,_Ue,{onClose:l})},t[5]=e,t[6]=l,t[7]=s,t[8]=o,t[9]=c):c=t[9];const d=c;let u;t[10]!==s||t[11]!==o?(u=g=>{s.cardModalState$.set({activeCardId:g}),o(g)},t[10]=s,t[11]=o,t[12]=u):u=t[12];const f=u;let m;return t[13]!==l||t[14]!==d||t[15]!==f?(m={openModal:d,setActiveCardId:f,closeModal:l},t[13]=l,t[14]=d,t[15]=f,t[16]=m):m=t[16],m}const xUe=on(t=>St(()=>{var n;const e=(n=_m(t).data)==null?void 0:n.items;if(e){const{activeCardId:s}=Ra(t).cardModalState$();if(s)return MQ(e,s)}}));function rot(t){"use forget";const e=W.c(9),{show:n}=t,s=V(),{setActiveCardId:o}=d$();let a;e[0]!==s?(a=()=>xUe(s),e[0]=s,e[1]=a):a=e[1];const i=re(a);let l;e[2]!==s||e[3]!==i||e[4]!==o||e[5]!==n?(l=n&&i&&r.jsx(yUe,{onClick:()=>{Fs(s).logEventWithStatsig("(Web) FYP Next Card Pill Tapped","chatgpt_web_fyp_next_card_pill_tapped",{card_id:i.id}),o(i.id)},image:i.image,title:i.title}),e[2]=s,e[3]=i,e[4]=o,e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==l?(c=r.jsx(fn,{children:l}),e[7]=l,e[8]=c):c=e[8],c}const yUe=t=>{"use forget";const e=W.c(13),{image:n,title:s,onClick:o}=t;let a,i,l,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0},i={opacity:1},l={opacity:0},c={duration:.15,ease:"easeInOut"},e[0]=a,e[1]=i,e[2]=l,e[3]=c):(a=e[0],i=e[1],l=e[2],c=e[3]);const d=n==null?void 0:n.url,u=n==null?void 0:n.fallback_url;let f;e[4]!==d||e[5]!==u?(f=r.jsx(fd,{src:d,fallbackSrc:u,className:"h-6 w-6 rounded-sm"}),e[4]=d,e[5]=u,e[6]=f):f=e[6];let m;e[7]!==s?(m=r.jsx("div",{className:"text-sm",children:s}),e[7]=s,e[8]=m):m=e[8];let g;return e[9]!==o||e[10]!==f||e[11]!==m?(g=r.jsxs(Xe.button,{initial:a,animate:i,exit:l,transition:c,className:"border-token-border-heavy bg-token-bg-elevated-primary absolute end-1/2 bottom-[calc(var(--composer-overlap-px)+--spacing(6))] flex translate-x-1/2 items-center justify-center gap-2 rounded-4xl border bg-clip-padding px-4 py-2 shadow-[0_4px_16px_0_rgba(0,0,0,0.05)]",onClick:o,children:[f,m]}),e[9]=o,e[10]=f,e[11]=m,e[12]=g):g=e[12],g},u$=R(()=>P(()=>import("./iha5kwli63j9ylq9.js"),__vite__mapDeps([505,1,10,11,502,503,504,500,501,392,393,317,0,347,348,71,440,349,350,345,346,494,495,431,496,430,391,497,498,499])).then(t=>t.PulseFeedbackConversationModal)),f$=t=>{const e=Ra(t);vo(()=>{e.isFeedbackModalOpen$.set(!1),e.feedbackModalState$.set(NO),e.populatePrompt$.set(void 0)})};function Uy(t){Ra(t).isFeedbackModalOpen$.set(!0),dt(t,u$,{onClose:()=>{f$(t)}})}function iot(t){f$(t),Cs(t,u$)}const vUe=R(()=>P(()=>import("./imdfj4m85ztq7yte.js"),__vite__mapDeps([482,1])),{loading:t=>F(t)}),bUe=R(()=>P(()=>import("./eibvgm82s4rii3v7.js"),__vite__mapDeps([506,1])),{loading:t=>F(t)}),CUe=R(()=>P(()=>import("./4h8qsvyuv2fcir5w.js"),__vite__mapDeps([483,1])),{loading:t=>F(t)}),SUe=R(()=>P(()=>import("./np3j7tlnwifo0og0.js"),__vite__mapDeps([507,1])),{loading:t=>F(t)}),wUe=R(()=>P(()=>Promise.resolve().then(()=>sm),void 0),{loading:t=>F(t)}),kUe=R(()=>P(()=>import("./bfe9vbgi2fr90thb.js"),__vite__mapDeps([508,1])),{loading:t=>F(t)}),EUe=R(()=>P(()=>import("./o7ao8mcd918dyvir.js"),__vite__mapDeps([509,1])),{loading:t=>F(t)});function TUe({cardId:t}){const e=V(),n=ne(),{mutate:s}=q3e(t),{mutate:o}=Y3e(t),{closeModal:a}=d$(),{data:i}=jO(t),l=Ra(e),c=(i==null?void 0:i.reaction)==="like",d=(i==null?void 0:i.reaction)==="dislike",u=i==null?void 0:i.conversation_id,f=u?jt(u):void 0,m=h=>{h==="remove"?Fs(e).logEventWithStatsig("(Web) FYP Card Reaction Undone","chatgpt_web_fyp_card_reaction_undo",{card_id:t,conversation_id:f}):Fs(e).logEventWithStatsig("(Web) FYP Card Reaction Added","chatgpt_web_fyp_card_reaction",{card_id:t,reaction:h,conversation_id:f})},g=h=>{h==="save"?Fs(e).logEventWithStatsig("(Web) FYP Card Saved","chatgpt_web_fyp_card_saved",{card_id:t,conversation_id:f}):Fs(e).logEventWithStatsig("(Web) FYP Card Saved Undone","chatgpt_web_fyp_card_saved_undo",{card_id:t,conversation_id:f})},p=[{key:"upvote",icon:c?bUe:vUe,label:n.formatMessage({id:"wN6PjH",defaultMessage:"Like"}),onClick:()=>{const h=c?"remove":"like";s(h),m(h)}},{key:"downvote",icon:d?SUe:CUe,label:n.formatMessage({id:"FMxx3D",defaultMessage:"Dislike"}),onClick:()=>{const h=d?"remove":"dislike";s(h),m(h)}},{key:"share",icon:wUe,label:n.formatMessage({id:"BNIqUa",defaultMessage:"Share"}),disabled:!f,onClick:()=>{Fs(e).logEventWithStatsig("(Web) FYP Card Shared","chatgpt_web_fyp_card_shared",{card_id:t,conversation_id:f}),f&&Ln.openSharingModal(f)}},{key:"save",icon:i!=null&&i.is_saved?EUe:kUe,label:n.formatMessage({id:"Fy5DRu",defaultMessage:"Save"}),onClick:()=>{const h=i!=null&&i.is_saved?"unsave":"save";o(h),g(h),f&&Qo(e).invalidateQueries({queryKey:Su().queryKey})},additionalText:i!=null&&i.is_saved?n.formatMessage({id:"5bP9LT",defaultMessage:"Saved as chat"}):void 0}];return r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"text-token-text-secondary flex",children:p.map(h=>r.jsxs("div",{className:"flex items-center gap-0.5",children:[r.jsx(md,{icon:h.icon,label:h.label,disabled:h.disabled,onClick:x=>{x.stopPropagation(),h.onClick()}},h.key),h.additionalText&&r.jsx("span",{className:"text-token-text-secondary text-sm",children:h.additionalText})]},h.key))}),r.jsx("div",{className:z(!d&&"invisible"),"aria-hidden":!d,children:r.jsx(MUe,{onClick:h=>{vo(()=>{l.feedbackModalState$.set({type:sl.FeedbackOnCard,cardId:t}),l.populatePrompt$.set({type:"cardReply",cardId:t}),Uy(e),a()}),h.stopPropagation()}})})]})}const MUe=t=>{"use forget";const e=W.c(3),{onClick:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(j,{id:"xh3p31",defaultMessage:"Share your thoughts"}),e[0]=s):s=e[0];let o;return e[1]!==n?(o=r.jsx(ye,{onClick:n,color:"secondary",children:s}),e[1]=n,e[2]=o):o=e[2],o};function lot({imageSrc:t,fallbackSrc:e,title:n,cardId:s}){return r.jsxs("div",{className:"flex flex-col gap-6 pb-4",children:[r.jsx("div",{className:"relative aspect-[2/1] overflow-hidden rounded-2xl",children:r.jsx(fd,{src:t,fallbackSrc:e,className:"h-full w-full object-cover"})}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-3xl",children:n}),s&&r.jsx(TUe,{cardId:s})]})]})}const y9=R(()=>P(()=>import("./8yatsd42k1ox8n2w.js"),__vite__mapDeps([24,1])),{loading:t=>F(t)}),AUe=t=>{"use forget";const e=W.c(21),{question:n,suggestions:s}=t,o=V();let a,i,l,c,d;if(e[0]!==o||e[1]!==n||e[2]!==s){const g=Ra(o);let p;e[8]!==s?(p=s.every(IUe),e[8]=s,e[9]=p):p=e[9],i=p,a=(h,x,v)=>{const y=v===void 0?!1:v;Fs(o).logEventWithStatsig("(Web) FYP Feed Survey Tapped","chatgpt_web_fyp_feed_survey_tapped",{isAutoSend:y}),y?vo(()=>{g.feedbackModalState$.set({type:sl.FeedbackConversation}),g.autoSendCompletion={userMessage:R6(h),targetedReply:x!=null?x:null},g.shouldAutoSendCompletion$.set(!0),Uy(o)}):vo(()=>{g.populatePrompt$.set({type:"surveyReply",userMessage:R6(h),targetedReply:x!=null?x:null}),Uy(o)})},d="flex w-full flex-col gap-4 py-4",l="grid grid-cols-2 gap-4",c=s.map((h,x)=>{const{text:v,is_auto_send:y,prompt:b}=h;return r.jsx(ye,{icon:y?null:y9,color:"secondary",contentWrapperClassName:"justify-start px-2 py-3 gap-4",iconClassName:"text-token-text-secondary",onClick:()=>a(b!=null?b:v,n!=null?n:null,y),children:v},x)}),e[0]=o,e[1]=n,e[2]=s,e[3]=a,e[4]=i,e[5]=l,e[6]=c,e[7]=d}else a=e[3],i=e[4],l=e[5],c=e[6],d=e[7];let u;e[10]!==a||e[11]!==i||e[12]!==n?(u=!i&&r.jsx(ye,{icon:y9,color:"secondary",className:"text-token-text-secondary",contentWrapperClassName:"justify-start px-2 gap-4",onClick:()=>a("",n!=null?n:null),children:r.jsx(j,{id:"FKKl/d",defaultMessage:"Share anything..."})}),e[10]=a,e[11]=i,e[12]=n,e[13]=u):u=e[13];let f;e[14]!==l||e[15]!==c||e[16]!==u?(f=r.jsxs("div",{className:l,children:[c,u]}),e[14]=l,e[15]=c,e[16]=u,e[17]=f):f=e[17];let m;return e[18]!==d||e[19]!==f?(m=r.jsx("div",{className:d,children:f}),e[18]=d,e[19]=f,e[20]=m):m=e[20],m};function IUe(t){return t.is_auto_send}const cot=()=>{"use forget";var c,d,u,f,m,g,p,h,x,v,y,b,C,S,E,k,T,M,A,I,N,L,O,D,$;const t=W.c(13),e=V();let n;t[0]!==e?(n=()=>Ra(e).feedbackModalState$(),t[0]=e,t[1]=n):n=t[1];const s=re(n);let o;t[2]!==e?(o=()=>_m(e),t[2]=e,t[3]=o):o=t[3];const{data:a}=re(o);let i;t[4]!==s.cardId||t[5]!==s.type||t[6]!==((c=a==null?void 0:a.feedback)==null?void 0:c.suggestions)||t[7]!==((d=a==null?void 0:a.onboarding)==null?void 0:d.image_urls)||t[8]!==((m=(f=(u=a==null?void 0:a.survey)==null?void 0:u.survey_config)==null?void 0:f.overlay_content)==null?void 0:m.body)||t[9]!==((h=(p=(g=a==null?void 0:a.survey)==null?void 0:g.survey_config)==null?void 0:p.overlay_content)==null?void 0:h.title)?(i=(s.type===sl.FeedbackPreview||s.type===sl.FeedbackOnCard)&&r.jsxs(Xe.div,{className:"bg-token-bg-primary absolute start-0 top-0 z-10 h-full w-full",initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:[s.type===sl.FeedbackPreview&&r.jsx(jUe,{title:(y=(v=(x=a==null?void 0:a.survey)==null?void 0:x.survey_config)==null?void 0:v.overlay_content)==null?void 0:y.title,body:(S=(C=(b=a==null?void 0:a.survey)==null?void 0:b.survey_config)==null?void 0:C.overlay_content)==null?void 0:S.body,suggestions:(E=a==null?void 0:a.feedback)==null?void 0:E.suggestions,images:(T=(k=a==null?void 0:a.onboarding)==null?void 0:k.image_urls)==null?void 0:T.map(oA)}),s.type===sl.FeedbackOnCard&&r.jsx(NUe,{cardId:s.cardId})]}),t[4]=s.cardId,t[5]=s.type,t[6]=(M=a==null?void 0:a.feedback)==null?void 0:M.suggestions,t[7]=(A=a==null?void 0:a.onboarding)==null?void 0:A.image_urls,t[8]=(L=(N=(I=a==null?void 0:a.survey)==null?void 0:I.survey_config)==null?void 0:N.overlay_content)==null?void 0:L.body,t[9]=($=(D=(O=a==null?void 0:a.survey)==null?void 0:O.survey_config)==null?void 0:D.overlay_content)==null?void 0:$.title,t[10]=i):i=t[10];let l;return t[11]!==i?(l=r.jsx(fn,{mode:"wait",children:i}),t[11]=i,t[12]=l):l=t[12],l},jUe=t=>{"use forget";const e=W.c(30),{title:n,body:s,suggestions:o,images:a}=t,i=V();let l;e[0]!==i?(l=!1,e[0]=i,e[1]=l):l=e[1];const c=l,d=_.useRef(null),u=_.useRef(null),f=_.useRef(null);let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m={firstRef:u,secondRef:d,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},e[2]=m):m=e[2];const g=Ry(m);let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p={firstRef:f,secondRef:u,firstSide:"top",secondSide:"bottom",threshold:30,absolute:!1},e[3]=p):p=e[3];const h=Ry(p),x=g&&"sticky top-0",v=h&&"opacity-10 transition-opacity duration-300";let y;e[4]!==x||e[5]!==v?(y=z("flex h-45 w-full items-center justify-center",x,v),e[4]=x,e[5]=v,e[6]=y):y=e[6];let b;e[7]!==a?(b=a!=null?a:[],e[7]=a,e[8]=b):b=e[8];let C;e[9]!==b?(C=r.jsx(SU,{images:b}),e[9]=b,e[10]=C):C=e[10];let S;e[11]!==y||e[12]!==C?(S=r.jsx("div",{className:y,ref:u,children:C}),e[11]=y,e[12]=C,e[13]=S):S=e[13];let E;e[14]!==n?(E=n&&r.jsx("div",{className:"text-xl font-medium",children:n}),e[14]=n,e[15]=E):E=e[15];let k;e[16]!==s?(k=s&&r.jsx("div",{className:"text-token-text-secondary whitespace-pre-line",children:s}),e[16]=s,e[17]=k):k=e[17];let T;e[18]!==o?(T=o&&r.jsx(AUe,{suggestions:o.map(PUe)}),e[18]=o,e[19]=T):T=e[19];let M;e[20]!==c?(M=!1,e[20]=c,e[21]=M):M=e[21];let A;e[22]!==E||e[23]!==k||e[24]!==T||e[25]!==M?(A=r.jsxs("div",{className:"z-10 flex w-full flex-col gap-4 pb-16",ref:f,children:[E,k,T,M]}),e[22]=E,e[23]=k,e[24]=T,e[25]=M,e[26]=A):A=e[26];let I;return e[27]!==A||e[28]!==S?(I=r.jsxs("div",{className:"relative mx-auto flex h-full w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-visible px-4 py-6",ref:d,children:[S,A]}),e[27]=A,e[28]=S,e[29]=I):I=e[29],I},NUe=t=>{"use forget";var d,u;const e=W.c(6),{cardId:n}=t,{data:s}=jO(n);if(!s)return null;const o=(d=s.image)==null?void 0:d.url,a=(u=s.image)==null?void 0:u.fallback_url;let i;e[0]!==o||e[1]!==a?(i=r.jsx(fd,{src:o,fallbackSrc:a,className:"h-32 w-32",shadow:!0}),e[0]=o,e[1]=a,e[2]=i):i=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsxs("div",{className:"flex w-full flex-col items-center gap-4",children:[r.jsx("div",{className:"text-xl font-medium",children:r.jsx(j,{id:"TXCx5u",defaultMessage:"Share what you're thinking"})}),r.jsx("div",{children:r.jsx(j,{id:"bZrGT3",defaultMessage:"Every bit of feedback shapes what shows up next."})})]}),e[3]=l):l=e[3];let c;return e[4]!==i?(c=r.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-8",children:[i,l]}),e[4]=i,e[5]=c):c=e[5],c};function PUe(t){return{text:t,prompt:t,is_auto_send:!1}}function dot({isSharedConversation:t,clientThreadId:e}){const n=V(),s=ve(n,"2287071194"),o=_.useRef(!1),{clearAllSystemHintModeTriggers:a,setThreadSystemHintMode:i}=sa(),c=Ve(e,u=>he.getLastMessageSystemHints(u)).includes(Pe.Tatertot),d=s&&t&&l3(n)&&c;_.useEffect(()=>{!d||o.current||(a(),i(Pe.Tatertot,!0,{clientThreadId:e}),o.current=!0)},[d,o,e,a,i,c])}const wg="m",RUe=2e3,LUe="skip_instant_query",OUe="client_reported_search_source",DUe=["gpt-5","gpt-4o","gpt-4-1-mini"],FUe=Fq;function uot(t){var A;const{clientThreadId:e,handleRequestCompletion:n}=t,s=V(),o=xt(s,e),a=_.useRef(!1),i=_.useRef(null),l=re(()=>ea(o)),c=zf.useIsEnabled(e),{isLoading:d,data:u}=El(),f=Ve(e,he.hasUserMessage),m=ST(u),[g,p]=Us(),h=$t(),x=re(()=>Mo(s)),v=g.get(Qd),y=g.get(a6)==="ipl";_.useEffect(()=>{M(!0),a.current=!1,i.current=null},[v]);const b=_.useCallback(({content:I,attachments:N},L,O)=>{const D=Gh(),$=N.length>0?{attachments:N}:{};$.system_hints=L.systemHints,Object.keys(D).length>0&&($.__internal={search_settings:D});const{extraStreamParams:H}=Xh(L.systemHints?L.systemHints:[],{enableMessageFollowups:c});n({promptMessage:is(I,$,y?{real_author:Ky.IPL}:void 0),requestedModelId:O,eventSource:"url",completionMetadata:L,extraStreamParams:H})},[n,c,y]),C=(A=m8(()=>window.location.pathname))!=null?A:null,S=FUe(),E=!d&&C!=null,k=D3(),[T,M]=_.useState(!0);return _.useEffect(()=>{var me,xe,pe,Me,Ce,ke,Le;if(!T||a.current)return;const I=(me=mt(e))==null?void 0:me.mode;if(!E||I==null||(g.has(J3)||g.has(Bq))&&x==null)return;if(!UUe(C)||BUe(C)&&S===void 0||jt(e)!=null){M(!1);return}const L=(()=>{try{return Object.fromEntries(new URLSearchParams(location.hash.slice(1)).entries())}catch(De){return{}}})(),O=w(w({},Object.fromEntries(g)),L),{[Qd]:D,[wg]:$,model:H,[LUe]:G,[OUe]:Z,[m_]:Q}=O,q=(xe=typeof D=="string"?D:null)!=null?xe:typeof $=="string"?$:null,Y=Object.values(Xu).includes(Z)?Z:void 0,te=Q!==void 0;if(!q||!q.trim()){M(!1);return}else i.current=Date.now();const ae=Uq(g,{availableHints:x});a.current=!0;const se=ae.find(gl),ce=GD(H!=null?H:null,se),X=k.secFetchSite==="same-site"||k.secFetchSite==="none"&&(((Me=(pe=document==null?void 0:document.documentElement)==null?void 0:pe.dataset)==null?void 0:Me.searchExtension)==="1"||Y8());let ee=!te&&X;if(ce&&(ee=!1),hn()&&(ee=!1),!ee){p(De=>{const le=new URLSearchParams(De);return le.delete(Qd),le.delete(wg),le.delete(a6),le.delete(m_),le.append("prompt",q),le}),M(!1),te||Fe.addAction("pageload-completion.disallowed",{secFetchSite:k.secFetchSite,referrer:document.referrer});return}const ie=ae.includes(Pe.Search);let de=lM(l);if(ie&&l){const De=DUe.map(le=>l.models.get(le)).find(le=>{var oe;return(oe=le==null?void 0:le.enabledTools)==null?void 0:oe.includes(al.Search)});if(De)de=De;else if(!((Ce=de==null?void 0:de.enabledTools)!=null&&Ce.includes(al.Search))){for(const le of l.models.values())if((ke=le.enabledTools)!=null&&ke.includes(al.Search)){de=le;break}}}((Le=t.prefetchSearchThreadIdPromise)!=null?Le:Promise.resolve(null)).then(De=>{var oe;p(Ee=>{const be=new URLSearchParams(Ee);return be.delete(Qd),be.delete(wg),be.delete("skip_instant_query"),be.delete(m_),de&&be.append("model",de.id),be});const le=Y!=null?Y:ie?Xu.URL_SEARCH_HINT:void 0;b({content:q,attachments:[]},{conversationMode:I,source:G?void 0:"instant-query",systemHints:ae,prefetchIds:De!=null?[De]:void 0,searchSource:le},(oe=de==null?void 0:de.id)!=null?oe:void 0),De!=null&&Fe.addFirstTiming("createCompletion.prefetchSearch")})},[d,E,C,l,m,b,T,e,S,k.secFetchSite,h,t.prefetchSearchThreadIdPromise,g,p,x]),T&&(t.prefetchSearchThreadIdPromise!=null||g.has(Qd)||g.has(wg)?!0:i.current?f||Date.now()-i.current>RUe?(i.current=null,M(!1),!1):!0:!1)}function BUe(t){return m$(t)}function m$(t){return t==null?!1:/^\/g\/[\w-]+$/.test(t)}function UUe(t){return t==null?!1:t==="/"||m$(t)}const $Ue="webrtc-cert-db",VUe=1,pd="certs",v9="ecdsa-p256:v1",HUe={name:"ECDSA",namedCurve:"P-256",expires:365*24*60*60*1e3};function GUe(){return new Promise((t,e)=>{const n=indexedDB.open($Ue,VUe);n.onupgradeneeded=()=>{const s=n.result;s.objectStoreNames.contains(pd)||s.createObjectStore(pd)},n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)})}function WUe(t,e){return new Promise((n,s)=>{const a=t.transaction(pd,"readonly").objectStore(pd).get(e);a.onsuccess=()=>n(a.result),a.onerror=()=>s(a.error)})}function zUe(t,e,n){return new Promise((s,o)=>{const i=t.transaction(pd,"readwrite").objectStore(pd).put(n,e);i.onsuccess=()=>s(),i.onerror=()=>o(i.error)})}function g$(t){const e=Date.now();return t.expires<=e}async function qUe(){try{"storage"in navigator&&"persist"in navigator.storage&&await navigator.storage.persist()}catch(t){Ut.certificateLocalDb.saveFailed(t)}}async function b9(t){const e=await RTCPeerConnection.generateCertificate(t);return Ut.certificateLocalDb.generated(),e}async function YUe(t={}){const{generationParams:e=HUe,disablePersistence:n=!1}=t;if(!n&&"indexedDB"in window)try{await qUe();const s=await GUe(),o=await WUe(s,v9);if(o&&!g$(o))return Ut.certificateLocalDb.hit(),o;const a=await b9(e);return zUe(s,v9,a).catch(i=>{Ut.certificateLocalDb.saveFailed(i)}),a}catch(s){Ut.certificateLocalDb.loadFailed(s)}return b9(e)}let Nu,za;const eh=Be(!0);function C9(t,e){YUe({generationParams:{name:"ECDSA",namedCurve:"P-256"}}).then(n=>{za=n}).catch(n=>{t.current||(t.current=!0,Ut.certificateCache.unsupported(n))}).finally(()=>{e.current=!1})}function S9(){try{Nu=p$.createPeerConnection("cache"),eh.set(!1)}catch(t){Ut.peerConnectionCache.unsupported(t)}}const fot=()=>{const t=V(),e=_.useRef(!1),n=_.useRef(!1),s=tt(t),o=re(eh),a=ve(t,"1863841549"),i=ve(t,"2777663391");return _.useEffect(()=>{s&&(a&&!e.current&&za===void 0?(e.current=!0,r6(t,"defer-pc")?nf.postTask(()=>C9(n,e)):C9(n,e)):a||Ut.certificateCache.disabled())},[t,a,s]),_.useEffect(()=>{s&&i&&o&&(r6(t,"defer-pc")?nf.postTask(()=>S9()):S9())},[t,i,o,s]),null};function ZUe(t){return!(!t||t.signalingState==="closed"||t.connectionState!=="new"||t.iceConnectionState!=="new")}const p$={createPeerConnection:t=>(za&&g$(za)&&(Ut.certificateCache.expired({expires:za.expires}),za=void 0),za===void 0?(Ut.certificateCache.miss({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle"})):(Ut.certificateCache.hit({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle",certificates:[za]}))),getFreshPeerConnection:t=>{try{return ZUe(Nu)?(Ut.peerConnectionCache.hit(),Nu):(Ut.peerConnectionCache.miss(),p$.createPeerConnection(t))}finally{eh.set(!0),Nu=void 0}},resetAll:()=>{Nu=void 0,za=void 0,eh.set(!0)}},mot=()=>{const t=V(),e=W1(t);return _.useEffect(()=>{av.set(e?"transceiver":"livekit")},[e]),null};function KUe(t){const e=V();return re(()=>yn(xt(e,t)).id)}async function QUe(){try{return(await navigator.permissions.query({name:"microphone"})).state}catch(t){return vi.info("Failed to check microphone permission state",t),"unknown"}}const kg=Be(void 0),JUe=1e3*60*9,XUe=Be([]),e$e=Be([]),got=Be(void 0),w9=Be([]);function t$e(t,e){return t.includes(e)?t:[...t,e]}function n$e(t,e){return t.includes(e)?t.filter(n=>n!==e):t}function th(...t){vi.debug("[Status Cache]",...t)}function s$e(t){const e=rs(t,"2943229081");return{"require-voice-used-recently":e.get("require-voice-used-recently",!1),"voice-used-within-past-days":e.get("voice-used-within-past-days",7),"enable-cache-for-gpts":e.get("enable-cache-for-gpts",!1),"enable-cache-for-new-users":e.get("enable-cache-for-new-users",!1),"new-user-within-past-days":e.get("new-user-within-past-days",7),"voice-status-cache-ttl-ms":e.get("voice-status-cache-ttl-ms",JUe),"enable-cache-if-mic-granted":e.get("enable-cache-if-mic-granted",!1)}}function o$e(t,e){var l;const n=t["enable-cache-for-new-users"],s=t["new-user-within-past-days"];if(!n)return!1;const o=((l=e==null?void 0:e.created)!=null?l:0)*1e3,a=Date.now()-o;return Math.floor(a/(1e3*60*60*24))<s}function a$e(t,e){const n=t["require-voice-used-recently"],s=t["voice-used-within-past-days"],o=s*24*60*60*1e3;if(e&&!n)return th("User using transceiver and recency not required, prefetch OK"),!0;const a=_t.getItem(Ue.VoiceLastUsed),i=a?new Date(a):null,l=i?i.getTime()>Date.now()-o:!1;return th("User ".concat(l?"passes":"fails"," recency requirement, prefetch ").concat(l?"OK":"SKIP"),{voiceUsedWithinDays:s,lastUsedVoiceDate:i}),l}const pot=({conversationId:t})=>{var T;const e=V(),{voiceName:n}=N1(),s=Kn(t),o=pEe(),a=_.useRef(!1),i=vl(M=>M.isVoiceModeActive),l=Eh(),c=(T=KUe(t))!=null?T:$q,d=W1(e),u=_.useMemo(()=>s$e(e),[e]),f=ln(),m=u["voice-status-cache-ttl-ms"],g=ve(e,"2209667701"),p=tt(e),h=Ve(s,M=>!!(M&&M.isLoading===!1))||br(t),x=_.useMemo(()=>{const M=u["enable-cache-for-gpts"],A=a$e(u,d),I=o$e(u,f),N=!!l,L=[];return L.push(!g&&"gate-disabled"),!A&&!I&&(L.push("not-voice-used-recently"),L.push("fails-new-user-requirement")),L.push(!M&&N&&"is-custom-gpt"),L.push(!p&&"logged-out"),L.filter(O=>typeof O=="string")},[l,d,u,f,g,p]),[v,y]=_.useState([]);_.useEffect(()=>{const M=u["enable-cache-if-mic-granted"];p&&g&&M?QUe().then(A=>{y(A==="granted"?I=>t$e(I,"mic-granted"):I=>n$e(I,"mic-granted"))}):y(A=>A.length>0?[]:A)},[u,g,p]);const b=_.useMemo(()=>({conversation_id:s!=null?s:null,requested_voice_mode:"advanced",gizmo_id:l!=null?l:null,voice:n!=null?n:null,requested_default_model:c}),[s,n,l,c]),[C,S]=_.useState(!0),E=_.useRef(void 0),k=_.useRef(void 0);return _.useEffect(()=>{S(!0)},[b]),_.useEffect(()=>{if(!h)return;XUe.set(x),e$e.set(v),th("Eligibility snapshot",{eligibleReasons:v,ineligibleReasons:x}),x.length>0&&v.length===0&&kg.set(void 0);const M=x.length===0||v.length>0,A=!i&&M&&C,I=a.current;!A||I||(a.current=!0,th("Prefetching voice status"),o(b,"voice-status-cache").then(N=>{w9.set([]);const{chatreq:L}=N;kg.set(U(w({},N),{proofOfWorkPromise:new Promise((O,D)=>{L?xr.getEnforcementToken(L).then(O).catch(D):O(null)})})),E.current=Date.now(),S(!1),clearTimeout(k.current),k.current=setTimeout(()=>{var D;const O=(D=E.current)!=null?D:0;Date.now()-O>=m&&(kg.set(void 0),S(!0),Vq().then($=>{Fe.addAction("voice-status-cache-stale",{conversationId:b.conversation_id,protocol:$,ttlMs:m})}))},m)}).catch(N=>{var L;N.code==="conversation_not_found"?Fe.addAction("voice-status-cache-conversation-not-found",{conversationId:b.conversation_id}):Ut.voiceStatusCache.error(N),w9.set([(L=N.code)!=null?L:"unknown error"]),kg.set(void 0)}).finally(()=>{a.current=!1}))},[o,b,x,v,i,C,m,h]),_.useEffect(()=>()=>{clearTimeout(k.current)},[]),null};function hot(){const t=V(),e=ve(t,"733205176"),n=ve(t,"3500862873"),s=ve(t,"2017435557"),o=e||s||n;_.useEffect(()=>{if(!o)return;const a=i=>{var m,g,p,h,x,v,y,b;const l=i.payload.conversation_id,c=i.payload.update_content,d=i.payload.update_type;if(d==="refetch-conversation"){Ea(l,{skipIfExisting:!1});return}if(d==="async-task-update-message"){const C=c.message;if(!C)return;Ze(l,S=>{cn.updateTree(S,E=>{E.updateNodeMessage(C.id,C)})}),(m=C.metadata)!=null&&m.async_task_id&&((g=C.metadata)!=null&&g.async_task_title)&&As.setTaskTitle(C.metadata.async_task_id,C.metadata.async_task_title),C.status==="finished_successfully"&&((p=C.metadata)!=null&&p.async_task_id)&&((h=C.metadata)==null?void 0:h.async_task_type)===co.IMAGE_GEN&&As.setTaskCompleted(C.metadata.async_task_id,C)}const u=xt(t,l);if(_$(u).set(Date.now()),d==="add-messages"){let C=c.messages;if(!(C!=null&&C.length))return;const S=C.filter(k=>{var T;return(T=k.metadata)==null?void 0:T.async_completion_id});if(S.length>0){for(const k of S)(x=k.metadata)!=null&&x.async_completion_id&&As.setTaskCompleted((v=k.metadata)==null?void 0:v.async_completion_id,k);Xg(t)&&(Ze(l,k=>{cn.setShouldRefetchConvoOnFinalize(k,!0)}),C=C.filter(k=>{var T;return!((T=k.metadata)!=null&&T.async_completion_id)}))}h$(u).set(k=>{if(!C.length)return k;const T=new Map(k.map(L=>[L.id,L]));for(const L of C)T.set(L.id,L);const M=k.map(L=>L.id),A=M.map(L=>T.get(L)).filter(Boolean),I=C.filter(L=>!M.includes(L.id));return[...A,...I]})}if(d==="async-task-start"&&As.setTask(c.async_task_id,{originalConversationId:l,taskId:c.async_task_id,title:c.title,prompt:c.prompt,status:En.CREATED,createdAt:c.created_at,updatedAt:c.created_at,originalConversationUserMessageId:c.original_conversation_user_message_id}),d==="async-task-title"&&As.setTaskTitle(c.async_task_id,c.title),d==="async-task-completed"){const C=c.message;if(!C)return;(y=C.metadata)!=null&&y.async_completion_id&&As.setTaskCompleted((b=C.metadata)==null?void 0:b.async_completion_id,C),Ze(l,S=>{Xg(t)?cn.setShouldRefetchConvoOnFinalize(S,!0):cn.updateTree(S,(E,k)=>{if(E.getNodeIfExists(C.id))E.updateNodeMessage(C.id,C);else return E.addMessageNode(k,C),C.id})})}if(d==="title-update"){const C=c.title;if(!C)return;xv(t,l,C,rh.Server)}if(d==="set-conversation-async-status"&&"conversation_async_status"in c){const C=c.conversation_async_status,S=C?{value:C,source:ts.SERVER}:null;Is(l,S);const E=x3(l);E!==l&&Is(E,S)}if(d==="moderation-response")try{const C=c.moderation_event,S=wA(C);if((S==null?void 0:S.type)!=="moderation")throw new Error("Expected moderation type but got ".concat(S==null?void 0:S.type));kM(S,l)}catch(C){}};return fM.on("conversation-update",a)},[t,o])}const r$e=Object.freeze([]),B2=10*1e3,i$e=200*1e3,h$=Ef(()=>Be([])),_$=Ef(()=>Be(null));function _ot(t){"use forget";var X;const e=W.c(48),n=V(),s=re(t.serverId$),a=((X=Bh(s))==null?void 0:X.value)===Xt.REALTIME;let i;e[0]!==n?(i=ee=>{var de,me,xe;const ie=(de=he.getCurrentNode(ee))==null?void 0:de.message;return[ie!=null?M4e(ie):0,ie!=null?ny(ie,n):0,ie!=null?M5(ie,n):null,ie!=null?"".concat(ie.id,":").concat(ie.create_time):null,ie!=null?(me=ie.author)==null?void 0:me.role:null,ie!=null?ie.channel:null,(xe=he.lastUserMessage(ee))==null?void 0:xe.id]},e[0]=n,e[1]=i):i=e[1];const[l,c,d,u,f,m,g]=Ve(s,i);let p;e[2]!==t?(p=()=>t?_$(t)():null,e[2]=t,e[3]=p):p=e[3];const h=re(p),x=d!=null?d*60*1e3:i$e,[v,y]=_.useState(!1),[b,C]=_.useState(!1),[S,E]=_.useState(!1),k=_.useRef(null);let T;e[4]!==s?(T=()=>{if(y(!1),!s)return;const ee=setTimeout(()=>{C(!0)},B2);return()=>{clearTimeout(ee),C(!1)}},e[4]=s,e[5]=T):T=e[5];let M;e[6]!==g||e[7]!==s?(M=[s,g],e[6]=g,e[7]=s,e[8]=M):M=e[8],_.useEffect(T,M);let A;e[9]!==a||e[10]!==x||e[11]!==l||e[12]!==s?(A=()=>{if(s==null||!a||!l){E(!1);return}E(!1);let ee=null;const ie=window.setTimeout(()=>{E(!0),Ie.count(je.DEFAULT,"chatgpt_web_websocket_timeout_reached"),ee=window.setTimeout(()=>{E(!1),Ie.count(je.DEFAULT,"chatgpt_web_websocket_timeout_max_duration")},x)},l);return()=>{window.clearTimeout(ie),ee&&window.clearTimeout(ee)}},e[9]=a,e[10]=x,e[11]=l,e[12]=s,e[13]=A):A=e[13];let I;e[14]!==a||e[15]!==h||e[16]!==x||e[17]!==l||e[18]!==s?(I=[s,a,l,h,x],e[14]=a,e[15]=h,e[16]=x,e[17]=l,e[18]=s,e[19]=I):I=e[19],_.useEffect(A,I);const N=s!==void 0&&s!=null&&a&&(v&&b||S);let L;e[20]!==t?(L=()=>t?h$(t)():r$e,e[20]=t,e[21]=L):L=e[21];const O=re(L),D=c&&c>0?c:B2,$=S?D:B2,H=s!=null?s:"missing";let G;e[22]!==H?(G=Uh({clientThreadId:H,alwaysForceUpdate:!0}),e[22]=H,e[23]=G):G=e[23];let Z;e[24]!==N||e[25]!==$||e[26]!==G?(Z=U(w({},G),{enabled:N,refetchInterval:$,staleTime:$}),e[24]=N,e[25]=$,e[26]=G,e[27]=Z):Z=e[27];const{data:Q}=rt(Z);let q,Y;e[28]!==Q?(q=()=>{Q&&y(!1)},Y=[Q],e[28]=Q,e[29]=q,e[30]=Y):(q=e[29],Y=e[30]),_.useEffect(q,Y);let te;e[31]!==f||e[32]!==m||e[33]!==u||e[34]!==s||e[35]!==S?(te=()=>{if(!s){k.current=null;return}S&&f==="assistant"&&m==="final"&&u&&u!==k.current&&(B.logEventWithStatsig("chatgpt_web_polled_for_final_assistant_message","chatgpt_web_polled_for_final_assistant_message",{conversationId:s}),Ie.count(je.DEFAULT,"chatgpt_web_polled_for_final_assistant_message")),k.current=u},e[31]=f,e[32]=m,e[33]=u,e[34]=s,e[35]=S,e[36]=te):te=e[36];let ae;e[37]!==D||e[38]!==f||e[39]!==m||e[40]!==u||e[41]!==s||e[42]!==S?(ae=[u,f,m,S,s,D],e[37]=D,e[38]=f,e[39]=m,e[40]=u,e[41]=s,e[42]=S,e[43]=ae):ae=e[43],_.useEffect(te,ae);let se,ce;e[44]!==O||e[45]!==s?(se=()=>{if(!O.length||!s)return;const ee=O;ee.length&&Ze(s,ie=>{cn.updateTree(ie,(de,me)=>{let xe=me;const pe=Me=>{var Ce;if(Me.id!==me){if((Ce=Me.metadata)!=null&&Ce.append_to_end&&de.getNodeIfExists(me)){xe=de.addMessageNode(me,Me);return}y(!0)}};if(ee.forEach(Me=>{var De,le;const Ce=ro(Me),ke=de.getNodeIfExists(Ce.id);let Le=(De=Ce.metadata)==null?void 0:De.parent_id;if(ke&&ke.id===me&&ke.parentId&&(Le=ke.parentId),Le)if(de.getNodeIfExists(Ce.id)){const oe=de.getNodeByIdOrMessageId(Ce.id);if(oe.message.create_time&&Ce.create_time&&oe.message.create_time>Ce.create_time)return;if(oe.parentId!==Le){if(!de.getNodeIfExists(Le)){y(!0);return}de.moveNode(Le,oe.id),xe=de.getLeafFromNodeAvoidingPlaceholders(oe.id).id;const be=de.getNodeByIdOrMessageId(Le).children.map(fe=>de.getNodeIfExists(fe)).filter(fe=>(fe==null?void 0:fe.id)!==oe.id).find(c$e);be&&(de.moveNode(xe,be.id),xe=de.getLeafFromNodeAvoidingPlaceholders(be.id).id)}de.updateNodeMessage(Ce.id,Ce)}else if(de.getNodeIfExists(Le)){const oe=de.getNodeByIdOrMessageId(Le);(le=oe.message.clientMetadata)!=null&&le.isOptimistic&&oe.children.forEach(be=>{var ue;const fe=de.getNodeIfExists(be);(ue=fe==null?void 0:fe.message.clientMetadata)!=null&&ue.isPlaceholder&&de.deleteNode(fe.id)}),xe=de.addMessageNode(Le,Ce);const Ee=oe.children.map(be=>de.getNodeIfExists(be)).find(l$e);Ee&&(de.moveNode(xe,Ee.id),xe=de.getLeafFromNodeAvoidingPlaceholders(Ee.id).id)}else pe(Ce);else{pe(Ce);return}}),xe!==me)return xe})})},ce=[O,s],e[44]=O,e[45]=s,e[46]=se,e[47]=ce):(se=e[46],ce=e[47]),_.useEffect(se,ce)}function l$e(t){var e;return(e=t==null?void 0:t.message.clientMetadata)==null?void 0:e.isOptimistic}function c$e(t){var e;return(e=t==null?void 0:t.message.clientMetadata)==null?void 0:e.isOptimistic}function xot(){const t=V();_.useEffect(()=>{const e=n=>{const s=n.payload.conversation_id,o=n.payload.update_content,a=n.payload.update_type;if(a==="chime-start-task"){const i=o.task_id,l=o.initiating_message_id;Ze(s,c=>{c&&(c.asyncTurns||(c.asyncTurns={}),c.asyncTurns[i]?(c.asyncTurns[i].status="streaming_cot_messages",c.asyncTurns[i].initiatingMessageId=l):c.asyncTurns[i]={turnId:i,messages:{},title:o.title,status:"streaming_cot_messages",initiatingMessageId:l})})}if(a==="chime-update-title"){const i=o.task_id,l=o.title;Ze(s,c=>{var u;if(!c)return;const d=(u=c.asyncTurns)==null?void 0:u[i];d&&(d.title=l)})}if(a==="chime-cot-message-add"||a==="chime-final-message-add"){const i=o.task_id,l=o.message;Ze(s,c=>{var u;if(!c)return;const d=(u=c.asyncTurns)==null?void 0:u[i];d&&(d.status="streaming_cot_messages",d.messages[l.id]=l,a==="chime-final-message-add"&&(d.status="streaming_final_message",c.tree.getNodeIfExists(l.id)?cn.updateTree(c,m=>{l.metadata||(l.metadata={}),m.updateNodeMessage(l.id,l)}):cn.appendMessage(c,l),l.status==="finished_successfully"&&(d.status="done")))})}};return fM.on("conversation-update",e)},[t])}const d$e=R(()=>P(()=>import("./djpaa0h6tdp9ysiw.js"),__vite__mapDeps([510,1,10,11,41,403,400,113,404,405,67])).then(t=>t.NewUserPersonalityOnboarding)),u$e=["default","listener","nerd","cynic","robot"],k9={default:Se({title:{id:"personality-onboarding_personality_default_title",defaultMessage:"Default"},subtitle:{id:"personality-onboarding_personality_default_subtitle",defaultMessage:"Flexible and helpful"}}),listener:Se({title:{id:"personality-onboarding_personality_listener_title",defaultMessage:"Listener"},subtitle:{id:"personality-onboarding_personality_listener_subtitle",defaultMessage:"Reflective and supportive"}}),nerd:Se({title:{id:"personality-onboarding_personality_nerd_title",defaultMessage:"Nerd"},subtitle:{id:"personality-onboarding_personality_nerd_subtitle",defaultMessage:"Curious and analytical"}}),cynic:Se({title:{id:"personality-onboarding_personality_cynic_title",defaultMessage:"Cynic"},subtitle:{id:"personality-onboarding_personality_cynic_subtitle",defaultMessage:"Blunt and practical"}}),robot:Se({title:{id:"personality-onboarding_personality_robot_title",defaultMessage:"Robot"},subtitle:{id:"personality-onboarding_personality_robot_subtitle",defaultMessage:"Precise and efficient"}})},f$e=Se({line1:{id:"personality-onboarding_personality_default_intro_1",defaultMessage:"Hi, Im ChatGPT. I can help you brainstorm ideas, explain tricky concepts, or tackle everyday tasks like writing, planning, or organizing your thoughts."},line2:{id:"personality-onboarding_personality_default_intro_2",defaultMessage:"You can keep it simple with one quick question or build something with me over timeIll roll with it either way."},line3:{id:"personality-onboarding_personality_default_intro_3",defaultMessage:"I can remember what matters to you, go deep on a specific topic, or just be a quick sounding board when you need one."}}),m$e=Se({line1:{id:"personality-onboarding_personality_listener_intro_1",defaultMessage:"Hi, Im ChatGPT. Im here to listen closely, reflect what I hear, and help you sort through whats on your mind."},line2:{id:"personality-onboarding_personality_listener_intro_2",defaultMessage:"You can use me to talk things through, set intentions, or give shape to your thoughts at your own pace."},line3:{id:"personality-onboarding_personality_listener_intro_3",defaultMessage:"If youd like, I can help turn those reflections into clear next steps, plans, or messages."}}),g$e=Se({line1:{id:"personality-onboarding_personality_nerd_intro_1",defaultMessage:"Hey! Im ChatGPT. I love digging into ideasbig, tiny, weird, or wonderfully specific."},line2:{id:"personality-onboarding_personality_nerd_intro_2",defaultMessage:"Bring me a question and well break it down, chase connections, and build something together."},line3:{id:"personality-onboarding_personality_nerd_intro_3",defaultMessage:"Whether its research, strategy, or some obscure rabbit hole, Ill happily nerd out right beside you."}}),p$e=Se({line1:{id:"personality-onboarding_personality_cynic_intro_1",defaultMessage:"Oh. Hi. Im ChatGPT. Ill give you the useful parts and skip the fluff."},line2:{id:"personality-onboarding_personality_cynic_intro_2",defaultMessage:"Toss me your ideasIll poke at the weak spots, call out nonsense, and help you make it sharper."},line3:{id:"personality-onboarding_personality_cynic_intro_3",defaultMessage:"Im good for gut-checking plans, catching blind spots, and giving it to you straight."}}),h$e=Se({line1:{id:"personality-onboarding_personality_robot_intro_1",defaultMessage:"Hello. I am ChatGPT, a language model optimized for structured, accurate output."},line2:{id:"personality-onboarding_personality_robot_intro_2",defaultMessage:"Give me instructions and I will execute themwriting, summarizing, calculating, or retrieving data."},line3:{id:"personality-onboarding_personality_robot_intro_3",defaultMessage:"No chatter. No detours. Just fast, clean answers and exactly what you asked for."}}),_$e={default:Object.values(f$e),listener:Object.values(m$e),nerd:Object.values(g$e),cynic:Object.values(p$e),robot:Object.values(h$e)};function x$e(){return u$e.map(t=>({key:t,label:k9[t].title.defaultMessage,description:k9[t].subtitle.defaultMessage,legacy_messages:_$e[t],type:"legacy"}))}function y$e(t){const e={openedAt:Date.now(),closedAt:null,hasLoggedImpression:!1,increment:(n,s,o)=>{var a,i;n==="personality"?(e.selectionCounts[s]=((a=e.selectionCounts[s])!=null?a:0)+1,B.logEventWithStatsig("Web: Personality Selection: Personality Selected","chatgpt_personality_onboarding_personality_selection",{personality:s})):(e.selectionCounts[s]=((i=e.selectionCounts[s])!=null?i:0)+1,B.logEventWithStatsig("Web: Personality Selection: Trait Selected","chatgpt_personality_onboarding_trait_selection",{trait:s,level:o}))},log:n=>{switch(n){case"impression":{if(e.hasLoggedImpression)return;e.hasLoggedImpression=!0,B.logEventWithStatsig("Web: Personality Selection: Onboarding Shown","chatgpt_personality_onboarding_modal_impression");break}case"skip":{B.logEventWithStatsig("Web: Personality Selection: Skip","chatgpt_personality_onboarding_skip");break}}},mode:t,selectionCounts:{},finalSelection:null,wasSubmitted:!1};return e}function yot(t,e,n){t.closedAt=Date.now(),t.wasSubmitted=e,n&&(t.finalSelection=n)}function v$e(t){if(!t.closedAt||!t.openedAt)return null;const e=t.closedAt-t.openedAt;return e<3e4?"under_30_seconds":e<6e4?"30_60_seconds":e<5*6e4?"1_5_minutes":"5_plus_minutes"}async function vot(t){var c;await nf.yield();const{mode:e,finalSelection:n,wasSubmitted:s}=t,o=(c=v$e(t))!=null?c:null,a=s?"success":"failure",i=e==="personality"?"Web: Personality Selection: Continue":"Web: Traits Selection: Continue",l=s?"chatgpt_personality_onboarding_submit":"chatgpt_personality_onboarding_cancel";B.logEventWithStatsig(i,l,{outcome:a,mode:e,duration_bucket:o,opened_at:t.openedAt,closed_at:t.closedAt,selection_type:n,selection_counts:t.selectionCounts})}function k4(){return Xn({queryKey:["personalityOnboarding"],queryFn:()=>ge.safeGet("/personality_onboarding")})}on(t=>Sa(t,()=>k4()));class b$e{constructor(e,n,s,o={}){J(this,"selectedPersonality$");J(this,"selectedTraits$");J(this,"serverData$");J(this,"logging");J(this,"mode");J(this,"isLegacy$");J(this,"mockData$");J(this,"serverDataPromise");J(this,"intervalSec$",St(()=>{var n,s;return(s=(n=this.serverData$().data)==null?void 0:n.interval_sec)!=null?s:4}));J(this,"personalities$",St(()=>{var s,o,a;let e=[],n=this.selectedPersonality$();if(this.isLegacy$())e=x$e();else{const i=this.mockData$(),l=i?{data:i}:null,c=l!=null?l:this.serverData$();(s=c.data)!=null&&s.default_personality_key&&(n=c.data.default_personality_key),e=(a=(o=c.data)==null?void 0:o.personalities)!=null?a:[]}return e.map(i=>U(w({},i),{selected$:Be(n===i.key)}))}));J(this,"traits$",St(()=>{const e=this.mockData$(),n=e?{data:e}:null,s=n!=null?n:this.serverData$();return!s||!s.data||!s.data.traits?[]:s.data.traits.map(o=>U(w({},o),{selected$:Be(this.selectedTraits$().includes(o.key))}))}));var a,i,l,c;this.ctx=e,this.flow=n,this.selectedPersonality$=Be((a=o.selectedPersonality$)!=null?a:null),this.selectedTraits$=Be((i=o.selectedTraits$)!=null?i:[]),this.mode=s,this.logging=y$e(s),this.isLegacy$=Be((l=o.isLegacy$)!=null?l:!1),this.mockData$=Be((c=o.mockData$)!=null?c:null),this.serverData$=n==="legacy-new-user-personality-flow"?Sa(e,()=>Xn({queryKey:["personalityOnboarding_legacy"],queryFn:()=>null})):Sa(e,()=>k4()),this.serverDataPromise=this.watchServerData(),ze(e,"2874358162")}watchServerData(){let e,n;const s=new Promise((o,a)=>{e=o,n=a});return Rl(()=>{const o=this.serverData$();o.status==="success"?e(o.data):o.status==="error"&&n(o.error)}),s}}function C$e(t,e,n,s){return new b$e(t,e,n,s)}const bot=Hq(C$e),S$e=Hn(t=>Sa(t,()=>k4())),w$e=Hn(t=>St(()=>{const e=S$e(t)();return e.status==="success"?e.data:null},{getServerFallback(){return null}}));function k$e(){return Xn({queryKey:["personalityTypeList"],queryFn:()=>ge.safeGet("/personality_types")})}function E$e(){return Xn({queryKey:["traitsList"],queryFn:()=>ge.safeGet("/personality_trait_types")})}const x$=Hn(t=>Sa(t,()=>k$e())),T$e=Hn(t=>Sa(t,()=>E$e())),Cot=Hn(t=>St(()=>{var s;const e=T$e(t)(),n=[];return!e||!e.data||!e.data.trait_types?n:(s=e.data)==null?void 0:s.trait_types})),Sot=Hn(t=>St(()=>{var n;const e=x$(t)();return e?(n=e.data)!=null?n:[]:[]})),wot=on(t=>St(()=>{var o;const e=x$(t)();if(!e)return null;const n=Gq(t);return(o=e.data)==null?void 0:o.find(a=>a.key===n)}));function kot(t){"use forget";var v;const e=W.c(13),{conversation:n}=t,s=V(),{hash:o}=Vn(),a=o==="#personality-onboarding";let i;e[0]!==n?(i=()=>n.serverId$(),e[0]=n,e[1]=i):i=e[1];const l=re(i);let c;e[2]!==s||e[3]!==a?(c=()=>a&&ze(s,"2874358162",{disableExposureLog:!0}).get("new_user_personality_onboarding_enabled",!1),e[2]=s,e[3]=a,e[4]=c):c=e[4];const d=re(c),u=Ve(n.id,M$e),{eligible:f}=lt(Oe.hasSeenExistingUserPersonalityOnboarding);let m,g;e[5]!==s||e[6]!==f?(m=()=>{f&&w$e(s)()},g=[f,s],e[5]=s,e[6]=f,e[7]=m,e[8]=g):(m=e[7],g=e[8]),_.useEffect(m,g);const p=l!=null?l:null,h=(v=u==null?void 0:u.id)!=null?v:null;let x;return e[9]!==d||e[10]!==p||e[11]!==h?(x=r.jsx(d$e,{conversationId:p,messageId:h,isPersonalityOnboardingRoute:d}),e[9]=d,e[10]=p,e[11]=h,e[12]=x):x=e[12],x}function M$e(t){return he.getLastAssistantMessage(t)}function Eot({children:t}){let e;return _.Children.forEach(t,n=>{if(_.isValidElement(n)&&n.type==="title"){const s=_.Children.toArray(n.props.children)[0];typeof s=="string"&&(e=s)}}),_.useEffect(()=>{if(e!=null){const n=document.title;return document.title=e,()=>{document.title=n}}},[e]),null}const E4=_.createContext({rootBordered:!1});function A$e({children:t}){return r.jsx("thead",{children:r.jsx("tr",{children:t})})}function I$e({textAlign:t="left",children:e,className:n="",onClick:s}){const{rootBordered:o}=_.useContext(E4);return r.jsx("th",{onClick:s,className:z("text-token border-token-border-medium bg-token-main-surface-primary sticky top-0 z-10 border-b-[0.5px] py-2 font-semibold",o?"px-3":"pe-4 last:pe-0",t==="left"?"text-start":t==="right"?"text-end":"text-center",n,{"hover:text-token-text-tertiary cursor-pointer":s!=null}),children:e})}function j$e(n){var s=n,{children:t}=s,e=we(s,["children"]);return r.jsx("tbody",U(w({},e),{children:t}))}const N$e=_.forwardRef(function({children:e,disabled:n=!1,onClick:s,className:o,tabIndex:a,ariaLabel:i,role:l},c){return r.jsx("tr",U(w({tabIndex:a,ref:c},n?{"data-disabled":!0}:{}),{className:z(n?"pointer-events-none":"",s?"hover:bg-token-interactive-bg-tertiary-hover cursor-pointer":"",o),onClick:s,"aria-label":i,role:l,children:e}))});function P$e({textAlign:t="left",verticalAlign:e="top",children:n,className:s,divClassName:o="min-h-[40px] items-center",colSpan:a,wrap:i=!1}){const{rootBordered:l}=_.useContext(E4);return r.jsx("td",{className:z("border-token-border-medium border-b-[0.5px]",e==="top"?"align-top":e==="bottom"?"align-bottom":"align-middle",l?"px-3":"pe-4 last:pe-0 [tr:last-child_&]:border-b-0",t&&"text-"+t,s),colSpan:a,style:i?{overflowWrap:"anywhere"}:void 0,children:r.jsx("div",{className:z("flex [tr[data-disabled=true]_&]:opacity-50",t==="right"&&"justify-end",t==="center"&&"justify-center",o),children:n})})}function R$e({children:t}){return r.jsx("div",{className:"text-md flex items-center justify-end gap-2",children:t})}function L$e({children:t,fixed:e=!1,className:n,size:s="normal",bordered:o=!1,disableScroll:a=!1}){const i=_.useRef(null),l=_.useRef(null),[c,d]=_.useState(!1);return _.useEffect(()=>{const u=i.current,f=l.current;if(u&&f){const m=new ResizeObserver(()=>{d(f.scrollHeight>u.clientHeight)});return m.observe(u),()=>m.disconnect()}},[]),r.jsx(E4.Provider,{value:{rootBordered:o},children:r.jsx("div",{className:z("text-token-text-primary",!a&&"overflow-y-auto",o&&"border-token-border-default rounded-lg border",s==="normal"?"text-base":"text-sm",c&&"pe-1",n),ref:i,children:r.jsx("table",{className:z("w-full border-separate border-spacing-0",e&&"table-fixed"),ref:l,children:t})})})}const Fo={Root:L$e,Header:A$e,HeaderCell:I$e,Body:j$e,Row:N$e,Cell:P$e,Actions:R$e};function O$e(t){return qt({mutationFn:async({serverThreadId:e,gizmoId:n})=>await ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:e}},requestBody:{is_visible:!1}}),onMutate:async({serverThreadId:e,gizmoId:n})=>{await t.cancelQueries({queryKey:Su().queryKey}),await t.cancelQueries({queryKey:kc().queryKey}),n&&await t.cancelQueries({queryKey:Dm(n).queryKey});const s=t.getQueryData(Su().queryKey),o=t.getQueryData(kc().queryKey);t.setQueryData(Su().queryKey,i=>{var l;return i&&U(w({},i),{pages:(l=i.pages)==null?void 0:l.map(c=>{const d=c.items.some(u=>u.id===e)?c.items.filter(u=>u.id!==e):c.items;return U(w({},c),{items:d})})})}),t.setQueryData(kc().queryKey,hP(e));let a=null;return n&&(a=t.getQueryData(Dm(n).queryKey),t.setQueryData(Dm(n).queryKey,i=>{var l;return i&&U(w({},i),{pages:(l=i==null?void 0:i.pages)==null?void 0:l.map(c=>{var d;return U(w({},c),{items:(d=c==null?void 0:c.items)!=null&&d.some(u=>u.id===e)?c.items.filter(u=>u.id!==e):c.items})})})})),{prevData:s,prevStarredConversations:o,prevSnorlaxConversations:a}},onError:(e,{gizmoId:n},s)=>{s!=null&&s.prevData&&t.setQueryData(Su().queryKey,s.prevData),s!=null&&s.prevStarredConversations&&t.setQueryData(kc().queryKey,s.prevStarredConversations),s!=null&&s.prevSnorlaxConversations&&n&&t.setQueryData(Dm(n).queryKey,s.prevSnorlaxConversations)},onSettled:(e,n,{serverThreadId:s,gizmoId:o},a)=>{B.logEventWithStatsig("Conversation Deleted","chatgpt_conversation_deleted"),ai.publish({kind:"deleteConversation",serverThreadId:s}),Xs(t,o)}})}function T4({title:t,handleDelete:e,onClose:n}){const s=ne(),o=Fd();return r.jsxs(Mt,{testId:"modal-delete-conversation-confirmation",isOpen:!0,onClose:()=>n(),type:"success",title:s.formatMessage(Eg.deleteModalTitle),primaryButton:r.jsx(Ns.Button,{title:s.formatMessage(Eg.deleteModalConfirm),color:"danger",onClick:()=>{e(),n()},"data-testid":"delete-conversation-confirm-button"}),secondaryButton:r.jsx(Ns.Button,{title:s.formatMessage(Eg.deleteModalCancel),color:"secondary",onClick:()=>n()}),children:[r.jsx(j,U(w({},Eg.deleteModalBody),{values:{title:r.jsx("strong",{children:t})}})),o&&r.jsx("div",{className:"text-token-text-tertiary mt-2 text-sm",children:r.jsx(j,{id:"history.deleteModalMemoryDisclaimer",defaultMessage:"Visit <link>settings</link> to delete any memories saved during this chat.",values:{link:a=>r.jsx(wo,{to:Al(Pn.Personalization),className:"underline",onClick:()=>{setTimeout(()=>{n({closeParentModal:!0})},100)},children:a})}})})]})}const D$e=t=>{"use forget";var b,C,S,E;const e=W.c(15),{conversationTitle:n,serverThreadId:s,onClose:o,isActiveConversation:a,gizmoId:i}=t,l=It(),c=at();let d;e[0]!==s?(d=mt(s),e[0]=s,e[1]=d):d=e[1];const u=d,f=Dh();let m;e[2]!==f.conversations||e[3]!==s?(m=(b=f.conversations.find(k=>k.id===s))==null?void 0:b.title,e[2]=f.conversations,e[3]=s,e[4]=m):m=e[4];const g=m,p=O$e(l);let h;e[5]!==p||e[6]!==i||e[7]!==a||e[8]!==c||e[9]!==s?(h=()=>{p.mutate({serverThreadId:s,gizmoId:i!=null?i:he.getGizmoId(mt(s))}),a&&Tr(c,{replace:!0})},e[5]=p,e[6]=i,e[7]=a,e[8]=c,e[9]=s,e[10]=h):h=e[10];const x=h,v=(E=(S=(C=u==null?void 0:u.title)!=null?C:g)!=null?S:n)!=null?E:"";let y;return e[11]!==x||e[12]!==o||e[13]!==v?(y=r.jsx(T4,{title:v,handleDelete:x,onClose:o}),e[11]=x,e[12]=o,e[13]=v,e[14]=y):y=e[14],y},Eg=Se({deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}."},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel"}}),M4=Object.freeze(Object.defineProperty({__proto__:null,DeleteConversationConfirmationModal:T4,DeleteConversationConfirmationModalContainer:D$e},Symbol.toStringTag,{value:"Module"})),F$e=R(()=>P(()=>import("./jexchgabyqje5te2.js"),__vite__mapDeps([434,1])),{loading:t=>F(t)}),B$e=R(()=>P(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([147,1])),{loading:t=>F(t)}),U$e=R(()=>P(()=>import("./dh7mc6hgd545v1dp.js"),__vite__mapDeps([122,1])),{loading:t=>F(t)}),y$=["archivedConversations"],$$e=30,V$e=3,Zs=Se({name:{id:"archivedConversationsModal.name",defaultMessage:"Name"},dateCreated:{id:"archivedConversationsModal.dateCreated",defaultMessage:"Date created"},loading:{id:"archivedConversationsModal.loading",defaultMessage:"Loading..."},somethingWentWrong:{id:"archivedConversationsModal.somethingWentWrong",defaultMessage:"Something went wrong..."},retry:{id:"archivedConversationsModal.retry",defaultMessage:"Retry"},noArchivedConversations:{id:"archivedConversationsModal.noArchivedConversations",defaultMessage:"You have no archived conversations."},title:{id:"archivedConversationsModal.title",defaultMessage:"Archived chats"},unarchiveConversation:{id:"archivedConversationsModal.unarchiveConversation",defaultMessage:"Unarchive conversation"},deleteConversation:{id:"archivedConversationsModal.deleteConversation",defaultMessage:"Delete conversation"},deleteFailed:{id:"archivedConversationsModal.deleteFailed",defaultMessage:"Deleting failed"}});function H$e(t){"use forget";var X;const e=W.c(68),{conversation:n,elementRef:s,onCloseParent:o,variant:a}=t,i=a==="modal",l=ne(),c=$t(),d=It();let u;e[0]!==n.gizmo_id||e[1]!==d?(u=()=>{d.invalidateQueries({queryKey:[y$]}),Xs(d,n.gizmo_id)},e[0]=n.gizmo_id,e[1]=d,e[2]=u):u=e[2];let f;e[3]!==c?(f=()=>{c.danger(Zs.deleteFailed,{toastId:"archived_conversations_modal_delete_failed"})},e[3]=c,e[4]=f):f=e[4];let m;e[5]!==u||e[6]!==f?(m={mutationFn:G$e,onSettled:u,onError:f},e[5]=u,e[6]=f,e[7]=m):m=e[7];const{mutate:g,isPending:p}=qt(m),[h,x]=_.useState(!1);let v;e[8]!==n.id?(v=$o(n.id),e[8]=n.id,e[9]=v):v=e[9];const y=v;let b;e[10]!==i?(b=i&&r.jsx(U$e,{className:"icon"}),e[10]=i,e[11]=b):b=e[11];let C;e[12]!==n.title||e[13]!==b?(C=r.jsxs(r.Fragment,{children:[b,n.title]}),e[12]=n.title,e[13]=b,e[14]=C):C=e[14];const S=C;let E;e[15]!==y||e[16]!==s||e[17]!==S||e[18]!==a?(E=a==="page"?r.jsx(wo,{to:y,className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",ref:s,viewTransition:!1,children:S}):r.jsx("a",{href:y,rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",ref:s,children:S}),e[15]=y,e[16]=s,e[17]=S,e[18]=a,e[19]=E):E=e[19];const k=E;let T;e[20]!==k?(T=r.jsx(Fo.Cell,{children:k}),e[20]=k,e[21]=T):T=e[21];let M;e[22]!==n.create_time?(M=n.create_time!=null?r.jsx(VE,{value:n.create_time,month:"long",year:"numeric",day:"numeric"}):null,e[22]=n.create_time,e[23]=M):M=e[23];let A;e[24]!==M?(A=r.jsx(Fo.Cell,{children:M}),e[24]=M,e[25]=A):A=e[25];let I;e[26]!==l?(I=l.formatMessage(Zs.unarchiveConversation),e[26]=l,e[27]=I):I=e[27];let N;e[28]!==l?(N=l.formatMessage(Zs.unarchiveConversation),e[28]=l,e[29]=N):N=e[29];let L;e[30]!==n.id||e[31]!==g?(L=()=>{g({conversationId:n.id,is_archived:!1})},e[30]=n.id,e[31]=g,e[32]=L):L=e[32];let O;e[33]===Symbol.for("react.memo_cache_sentinel")?(O=r.jsx(F$e,{className:"icon-sm"}),e[33]=O):O=e[33];let D;e[34]!==N||e[35]!==L?(D=r.jsx("button",{"aria-label":N,className:"text-token-text-tertiary hover:text-token-text-secondary inline-flex h-7 w-7 cursor-pointer items-center justify-center text-[18px]",type:"button",onClick:L,children:O}),e[34]=N,e[35]=L,e[36]=D):D=e[36];let $;e[37]!==I||e[38]!==D?($=r.jsx(pt,{label:I,side:"top",children:D}),e[37]=I,e[38]=D,e[39]=$):$=e[39];let H;e[40]!==l?(H=l.formatMessage(Zs.deleteConversation),e[40]=l,e[41]=H):H=e[41];let G;e[42]===Symbol.for("react.memo_cache_sentinel")?(G=()=>x(!0),e[42]=G):G=e[42];let Z;e[43]!==l?(Z=l.formatMessage(Zs.deleteConversation),e[43]=l,e[44]=Z):Z=e[44];let Q;e[45]===Symbol.for("react.memo_cache_sentinel")?(Q=r.jsx(B$e,{className:"icon-sm"}),e[45]=Q):Q=e[45];let q;e[46]!==Z?(q=r.jsx("button",{onClick:G,"aria-label":Z,className:"text-token-text-tertiary hover:text-token-text-secondary inline-flex h-7 w-7 items-center justify-center",type:"button",children:Q}),e[46]=Z,e[47]=q):q=e[47];let Y;e[48]!==H||e[49]!==q?(Y=r.jsx(pt,{label:H,side:"top",children:q}),e[48]=H,e[49]=q,e[50]=Y):Y=e[50];let te;e[51]!==$||e[52]!==Y?(te=r.jsx(Fo.Cell,{textAlign:"right",children:r.jsxs(Fo.Actions,{children:[$,Y]})}),e[51]=$,e[52]=Y,e[53]=te):te=e[53];let ae;e[54]!==p||e[55]!==A||e[56]!==te||e[57]!==T?(ae=r.jsxs(Fo.Row,{disabled:p,children:[T,A,te]}),e[54]=p,e[55]=A,e[56]=te,e[57]=T,e[58]=ae):ae=e[58];let se;e[59]!==n.id||e[60]!==n.title||e[61]!==h||e[62]!==o||e[63]!==g?(se=h&&r.jsx(T4,{title:(X=n.title)!=null?X:"",handleDelete:()=>{g({conversationId:n.id,is_visible:!1})},onClose:ee=>{x(!1),ee!=null&&ee.closeParentModal&&(o==null||o())}}),e[59]=n.id,e[60]=n.title,e[61]=h,e[62]=o,e[63]=g,e[64]=se):se=e[64];let ce;return e[65]!==ae||e[66]!==se?(ce=r.jsxs(r.Fragment,{children:[ae,se]}),e[65]=ae,e[66]=se,e[67]=ce):ce=e[67],ce}function G$e(t){const s=t,{conversationId:e}=s,n=we(s,["conversationId"]);return ge.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:e}},requestBody:n,intercomEventOnError:"fetch-error:conversation:edit"})}function v$(t){"use forget";var E;const e=W.c(37),{onClose:n,className:s,variant:o}=t,a=o===void 0?"modal":o;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={queryKey:[y$],queryFn:q$e,initialPageParam:0,getNextPageParam:z$e,refetchOnMount:"always"},e[0]=i):i=e[0];const{data:l,isLoading:c,isError:d,refetch:u,fetchNextPage:f,hasNextPage:m}=wf(i),g=_.useRef(null);let p;e[1]!==f||e[2]!==m||e[3]!==c?(p=k=>{var T;c||k==null||((T=g.current)==null||T.disconnect(),g.current=new IntersectionObserver(M=>{M[0].isIntersecting&&m&&f()}),g.current.observe(k))},e[1]=f,e[2]=m,e[3]=c,e[4]=p):p=e[4];const h=p;let x,v;e[5]===Symbol.for("react.memo_cache_sentinel")?(x=()=>()=>{var k;(k=g.current)==null||k.disconnect()},v=[],e[5]=x,e[6]=v):(x=e[5],v=e[6]),_.useEffect(x,v);let y;e[7]!==(l==null?void 0:l.pages)?(y=(E=l==null?void 0:l.pages.flatMap(W$e))!=null?E:[],e[7]=l==null?void 0:l.pages,e[8]=y):y=e[8];const b=y;let C;if(c){let k;e[9]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("div",{className:"text-token-text-secondary pb-8",children:r.jsx(j,w({},Zs.loading))}),e[9]=k):k=e[9],C=k}else if(d){let k;e[10]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("div",{className:"mb-4 text-red-500",children:r.jsx(j,w({},Zs.somethingWentWrong))}),e[10]=k):k=e[10];let T;e[11]!==u?(T=()=>{u()},e[11]=u,e[12]=T):T=e[12];let M;e[13]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx(j,w({},Zs.retry)),e[13]=M):M=e[13];let A;e[14]!==T?(A=r.jsxs("div",{children:[k,r.jsx("div",{children:r.jsx(ye,{color:"secondary",onClick:T,children:M})})]}),e[14]=T,e[15]=A):A=e[15],C=A}else if(b.length===0){let k;e[16]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("div",{className:"text-token-text-tertiary pb-8",children:r.jsx(j,w({},Zs.noArchivedConversations))}),e[16]=k):k=e[16],C=k}else{const k=a==="modal"?"max-h-[28rem]":"max-h-none";let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(Fo.HeaderCell,{children:r.jsx(j,w({},Zs.name))}),e[17]=T):T=e[17];let M;e[18]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsxs(Fo.Header,{children:[T,r.jsx(Fo.HeaderCell,{children:r.jsx(j,w({},Zs.dateCreated))}),r.jsx(Fo.HeaderCell,{})]}),e[18]=M):M=e[18];let A;if(e[19]!==b||e[20]!==h||e[21]!==n||e[22]!==a){let L;e[24]!==b.length||e[25]!==h||e[26]!==n||e[27]!==a?(L=(O,D)=>r.jsx(H$e,{conversation:O,elementRef:D===b.length-V$e?h:void 0,onCloseParent:n,variant:a},O.id),e[24]=b.length,e[25]=h,e[26]=n,e[27]=a,e[28]=L):L=e[28],A=b.map(L),e[19]=b,e[20]=h,e[21]=n,e[22]=a,e[23]=A}else A=e[23];let I;e[29]!==A?(I=r.jsx(Fo.Body,{children:A}),e[29]=A,e[30]=I):I=e[30];let N;e[31]!==I||e[32]!==k?(N=r.jsxs(Fo.Root,{className:k,size:"compact",children:[M,I]}),e[31]=I,e[32]=k,e[33]=N):N=e[33],C=N}let S;return e[34]!==C||e[35]!==s?(S=s?r.jsx("div",{className:s,children:C}):r.jsx(r.Fragment,{children:C}),e[34]=C,e[35]=s,e[36]=S):S=e[36],S}function W$e(t){return t.items}function z$e(t){var n,s,o;const e=((n=t.offset)!=null?n:0)+((s=t.limit)!=null?s:0);return e<((o=t.total)!=null?o:0)?e:void 0}function q$e(t){const{pageParam:e}=t;return ge.safeGet("/conversations",{parameters:{query:{offset:e,limit:$$e,order:"updated",is_archived:!0}},intercomEventOnError:"fetch-error:conversations:get",authOption:sn.SendIfAvailable})}function E9(t){"use forget";const e=W.c(8),{onClose:n}=t,s=ne();let o;e[0]!==s?(o=s.formatMessage(Zs.title),e[0]=s,e[1]=o):o=e[1];let a;e[2]!==n?(a=r.jsx(v$,{onClose:n}),e[2]=n,e[3]=a):a=e[3];let i;return e[4]!==n||e[5]!==o||e[6]!==a?(i=r.jsx(Mt,{testId:"modal-archived-conversations",isOpen:!0,onClose:n,size:"custom",className:"max-w-5xl",type:"success",title:o,showCloseButton:!0,children:a}),e[4]=n,e[5]=o,e[6]=a,e[7]=i):i=e[7],i}const Tot=Object.freeze(Object.defineProperty({__proto__:null,ArchivedConversationsContent:v$,ArchivedConversationsModal:E9,archivedConversationsMessages:Zs,default:E9},Symbol.toStringTag,{value:"Module"}));async function Y$e(){try{return await(await Cl()).getHost().getClientCapabilityVersion()}catch(t){return}}async function Z$e(){const t=await Y$e();return t!=null&&t>=2}function K$e(t){"use forget";var H,G,Z,Q,q,Y,te,ae,se,ce;const e=W.c(30),n=re(it.wantsHandleAgentRequest$),s=V(),{selectedSources:o}=Pa(t),a=Kn(t),[i,l]=_.useState(!1),c=Ve(t,tVe),d=((H=c==null?void 0:c.metadata)==null?void 0:H.is_takeover_ended_message)===!0,u=Ve(t,X$e),f=Ve(t,J$e);let m;e[0]!==f?(m=lh(f)===ch.n7jupd_m&&((G=f.metadata)==null?void 0:G.kaur1br5_mode)===!0,e[0]=f,e[1]=m):m=e[1];const g=m,p=(Z=f.metadata)==null?void 0:Z.agent_preinitialize_request_id,h=((Q=f.metadata)==null?void 0:Q.n7jupd_local_safe_mode)===!0;let x;e[2]!==t||e[3]!==s?(x=()=>{var ee;const X=xt(s,t);return(ee=bi(X))==null?void 0:ee.value},e[2]=t,e[3]=s,e[4]=x):x=e[4];const v=re(x),y=v===Xt.STREAMING||v===Xt.REALTIME,b=c&&c.create_time&&u&&u.create_time&&c.create_time<u.create_time&&y,C=_.useRef(void 0),S=(f==null?void 0:f.author.role)===Ke.Assistant?f:void 0,E=!!(S&&(((Y=(q=S.metadata)==null?void 0:q.finish_details)==null?void 0:Y.type)==="interrupted"&&((ae=(te=S.metadata)==null?void 0:te.finish_details)==null?void 0:ae.reason)==="server_error"||((se=S.clientMetadata)==null?void 0:se.err)!=null||((ce=S.clientMetadata)==null?void 0:ce.errType)!=null)),k=(S==null?void 0:S.end_turn)===!0;let T,M;e[5]!==o||e[6]!==a||e[7]!==s||e[8]!==n?(T=()=>{if(!n)return;it.wantsHandleAgentRequest$.set(!1);const X=it.agentRequest;if(X&&a)e:switch(X){case"startTakeoverFromAgent":{vO({showPlaceholderMessage:!0});break e}case"endTakeoverFromAgent":{(async()=>{const ee=await Lh(void 0,"side_chat","user",[Pe.Agent]);await bO(s,o,{startNewTurn:!0,skipTakeoverAfterAbort:async()=>await KY(a)!=="running"},ee)})();break e}case"stopAgent":{l(!0);break e}}},M=[n,o,s,a],e[5]=o,e[6]=a,e[7]=s,e[8]=n,e[9]=T,e[10]=M):(T=e[9],M=e[10]),_.useEffect(T,M);let A,I;e[11]!==t||e[12]!==b||e[13]!==i?(A=()=>{!i||!b||(l(!1),Hh(t,void 0,{clientInitiated:!0,reason:"stop_button",isLastTurnAgent:!0}))},I=[i,b,t],e[11]=t,e[12]=b,e[13]=i,e[14]=A,e[15]=I):(A=e[14],I=e[15]),_.useEffect(A,I);const N=Ve(t,Q$e);let L,O;e[16]!==g||e[17]!==p||e[18]!==h||e[19]!==d||e[20]!==a||e[21]!==N?(L=()=>{if(!g||!a)return;let X=!1;return(async()=>!(await Z$e()||!d)||X||(l(!1),YY(a,N,h,d,p)))(),()=>{X=!0}},O=[a,g,p,h,d,N,l],e[16]=g,e[17]=p,e[18]=h,e[19]=d,e[20]=a,e[21]=N,e[22]=L,e[23]=O):(L=e[22],O=e[23]),_.useEffect(L,O);let D,$;e[24]!==v||e[25]!==E||e[26]!==k||e[27]!==a?(D=()=>{const X=C.current;C.current=v;const ee=X===Xt.REALTIME&&v!==Xt.REALTIME;a&&(k||ee)&&ZY(a,E)},$=[a,v,C,k,E],e[24]=v,e[25]=E,e[26]=k,e[27]=a,e[28]=D,e[29]=$):(D=e[28],$=e[29]),_.useEffect(D,$)}function Q$e(t){return he.getUserMessages(t)}function J$e(t){return he.getCurrentNode(t).message}function X$e(t){var e;return(e=he.findNode(t,eVe))==null?void 0:e.message}function eVe(t){var e;return lh(t.message)===ch.n7jupd_m&&((e=t.message.metadata)==null?void 0:e.kaur1br5_mode)===!0}function tVe(t){return he.getUserMessages(t).at(-1)}const Mot=t=>{"use forget";const{clientThreadId:e}=t;return K$e(e),null};var Gr=(t=>(t.Running="running",t.Finished="finished",t.Error="error",t))(Gr||{});const U2=(t,e)=>"".concat(t,":").concat(e),zi=Ft((t,e)=>({toolStates:new Map,setToolState:(n,s,o,a)=>{const i=U2(n,s),l=e().toolStates.get(i);t(c=>{var u;const d=new Map(c.toolStates);return d.set(i,{status:a,toolName:o,messageId:s,startTime:(u=l==null?void 0:l.startTime)!=null?u:Date.now()}),{toolStates:d}})},getToolState:(n,s)=>{const o=U2(n,s);return e().toolStates.get(o)},removeToolState:(n,s)=>{const o=U2(n,s);t(a=>{const i=new Map(a.toolStates);return i.delete(o),{toolStates:i}})},getRunningToolsForThread:n=>{const s=e().toolStates,o=[];for(const[a,i]of s.entries())a.startsWith("".concat(n,":"))&&i.status==="running"&&o.push(i);return o}})),nVe=R(()=>P(()=>import("./fqzt6ckf6r80fm8s.js"),__vite__mapDeps([511,1,10,11])).then(t=>t.SafeLinkWarningModal)),sVe=15e3,b$="TimeoutError",oVe="opening link failed";function Aot(t){const e=_.useRef(new Set),n=Ve(t,he.getConversationTurns,{disablePerfDetector:!0});_.useEffect(()=>{hn()&&wv().catch(()=>{})},[]);const s=Ve(t,o=>he.getRequestId(o));_.useEffect(()=>{if(!hn()||!n.length)return;n.flatMap(a=>a.messages).filter(a=>{var i;return!!a.recipient&&Ig(a.recipient)&&(a.status==="in_progress"||a.status==="finished_successfully")&&!e.current.has(a.id)&&((i=a.clientMetadata)==null?void 0:i.requestId)===s}).forEach(a=>{a.recipient&&Ig(a.recipient)&&zi.getState().setToolState(t,a.id,a.recipient,Gr.Running)})},[t,n,s]),_.useEffect(()=>{if(hn())return E8(ai,{completionFinished:async()=>{const o=mt(t);if(!o)return;const a=he.getConversationTurns(o);if(!a.length)return;const i=he.getRequestId(o),l=a.flatMap(c=>c.messages).filter(c=>{var d;return!!c.recipient&&Ig(c.recipient)&&c.status==="finished_successfully"&&!e.current.has(c.id)&&((d=c.clientMetadata)==null?void 0:d.requestId)===i});if(l.length!==0)for(const c of l)e.current.add(c.id),await aVe(c,t)}})},[t,s])}async function aVe(t,e){const n=t.recipient;if(!n||!Ig(n))return;let s;if(t.content.content_type===ut.Text?s=t.content.parts&&t.content.parts.length?t.content.parts[0]:"":t.content.content_type===ut.Code?s=t.content.text:s="",!await rVe(n,s,e)){zi.getState().setToolState(e,t.id,n,Gr.Finished);return}if(!await cVe(n,s,e)){zi.getState().setToolState(e,t.id,n,Gr.Finished);return}if(!await uVe(n,s,e)){zi.getState().setToolState(e,t.id,n,Gr.Finished);return}if(n===_K){zi.getState().setToolState(e,t.id,n,Gr.Finished);return}const l=()=>{zi.getState().setToolState(e,t.id,n,Gr.Error)},c=()=>{l(),T9(e,n,"Tool host unavailable","host_unavailable")};let d;try{d=(await Cl()).getHost()}catch(m){c();return}if(!d||!d.callLocalTool){c();return}let u,f;try{u=await mVe(d.callLocalTool(n,s),sVe)}catch(m){f=m.name===b$?"timeout":"exception",l(),T9(e,n,f,f);return}zi.getState().setToolState(e,t.id,n,Gr.Finished);for(const m of u)await C$(e,m.author,m.message)}async function C$(t,e,n){const s={id:os(),author:{role:Ke.Tool,name:e},create_time:Date.now()/1e3,content:{content_type:ut.Text,parts:[n]},recipient:"all",status:"finished_successfully",weight:0};try{const o=_s();await Zo({conversation:xt(o,t),promptMessage:s,eventSource:"keyboard"})}catch(o){Ze(t,a=>{cn.appendMessage(a,s)})}}function T9(t,e,n,s){const o={id:os(),author:{role:Ke.Assistant,name:e},create_time:Date.now()/1e3,content:{content_type:ut.Text,parts:["Error: "+n]},status:"finished_successfully",weight:0,metadata:{local_function_error:!0,local_function_error_type:s}};Ze(t,a=>{cn.appendMessage(a,o)})}function rVe(t,e,n){return t!=="kaur1br5.navigate_current_tab"?Promise.resolve(!0):A4(t,e,n,s=>{const o=lVe(s);return o?[o]:void 0})}function iVe(t){return cv(t)&&(t.url===void 0||typeof t.url=="string")}function lVe(t){try{const e=JSON.parse(t||"{}");if(iVe(e))return e.url}catch(e){}}function cVe(t,e,n){return t!=="kaur1br5.open_tabs"?Promise.resolve(!0):A4(t,e,n,dVe)}function dVe(t){try{const e=JSON.parse(t||"{}"),n=cv(e)?e:{};if(Array.isArray(n.urls))return n.urls.filter(s=>typeof s=="string")}catch(e){}}function uVe(t,e,n){return t!=="kaur1br5.add_bookmark"?Promise.resolve(!0):A4(t,e,n,fVe)}function fVe(t){try{const e=JSON.parse(t||"{}"),n=cv(e)?e:{};if(typeof n.url=="string")return[n.url]}catch(e){}}function mVe(t,e){return new Promise((n,s)=>{const o=setTimeout(()=>{const a=new Error("Local function invocation timed out");a.name=b$,s(a)},e);t.then(a=>{clearTimeout(o),n(a)}).catch(a=>{clearTimeout(o),s(a)})})}async function $2(t,e,n,s){const o=await gVe(t,s);return o||await C$(e,n,oVe),o}function gVe(t,e){return new Promise(n=>{let s=!1;const o=a=>{s||(s=!0,n(a))};dt(t,nVe,{urls:e,suppressNavigation:!0,onAction:a=>o(a==="open"),onActionAborted:()=>o(!1)})})}async function A4(t,e,n,s){const o=_s();try{const a=s(e);if(!a||a.length===0)return $2(o,n,t,e);const i=a.filter(c=>!pVe(c));if(i.length===0)return!0;const l=await mY(o,n,i);return l.length===0?!0:$2(o,n,t,l.length===1?l[0]:l)}catch(a){return $2(o,n,t,e)}}function pVe(t){try{return new URL(t).protocol.toLowerCase()==="atlas:"}catch(e){return!1}}function Iot(){const t=V(),e=vh();_.useEffect(()=>{hn()&&e&&Wq.set(t,!1)},[t,e])}var S$=(t=>(t[t.ADAVisualization=0]="ADAVisualization",t[t.Image=1]="Image",t))(S$||{});function hVe(t){return Ps(t,"398474797").get("enabled",!1)}const _Ve=_.createContext({model:"gpt-4o"}),I4=()=>_.useContext(_Ve);function jot({pointer:t,conversationId:e,messageId:n,source:s,imageIndex:o}){var a,i,l,c,d,u,f;return{imageUrl:t&&"url"in t?t.url:void 0,conversationId:e,messageId:n,generationId:(l=(i=(a=t==null?void 0:t.metadata)==null?void 0:a.generation)==null?void 0:i.gen_id)!=null?l:void 0,parentGenerationId:(u=(d=(c=t==null?void 0:t.metadata)==null?void 0:c.generation)==null?void 0:d.parent_gen_id)!=null?u:void 0,fileId:Co((f=t==null?void 0:t.asset_pointer)!=null?f:""),model:"gpt-4o",source:s,imageIndex:o}}class bs{}J(bs,"imageRated",({liked:e,analyticsContext:n})=>{const s=e?"like":"dislike",o=e?"true":"false";qe.logEvent("chatgpt_dalle_image_rating",s,w({liked:o},n)),B.logEvent("chatgpt_dalle_image_rating",w({liked:e},n)),qe.logEvent("chatgpt_image_rating",s,w({liked:o},n)),B.logEvent("chatgpt_image_rating",w({liked:e},n));var a="thumbs_down";e&&(a="thumbs_up"),n.conversationId&&n.messageId&&n.generationId&&(Rr("imagegen_rating",n.conversationId,n.messageId,n.generationId,{imagegen_rating:{rating:a}}),ge.safePost("/conversation/message_feedback",{requestBody:{message_id:n.messageId,conversation_id:n.conversationId,rating:e?"thumbsUp":"thumbsDown"},authOption:sn.SendIfAvailable}))}),J(bs,"imageShared",({analyticsContext:e,source:n})=>{B.logEventWithStatsig("Share Post: Share Button Clicked","chatgpt_post_share_button_clicked",w({source:n},e)),e.conversationId&&e.messageId&&e.generationId&&Rr("image_share",e.conversationId,e.messageId,e.generationId)}),J(bs,"paragenImageRated",({liked:e,analyticsContext:n})=>{const s=e?"like":"dislike";qe.logEvent("chatgpt_imagegen_image_paragen_rating",void 0,{liked:s,hasParent:n.parentGenerationId?"true":"false"}),B.logEvent("chatgpt_imagegen_image_paragen_rating",w({liked:e},n));var o="thumbs_down";e&&(o="thumbs_up"),n.conversationId&&n.messageId&&n.generationId&&Rr("imagegen_image_paragen_rating",n.conversationId,n.messageId,n.generationId,{imagegen_image_paragen_rating:{rating:o}})}),J(bs,"paragenDownload",({analyticsContext:e})=>{qe.logEvent("chatgpt_imagegen_image_paragen_download",void 0,{hasParent:e.parentGenerationId?"true":"false"}),B.logEvent("chatgpt_imagegen_image_paragen_download",e),e.conversationId&&e.messageId&&e.generationId&&Rr("imagegen_image_paragen_download",e.conversationId,e.messageId,e.generationId)}),J(bs,"renderingComplete",({analyticsContext:e})=>{qe.logEvent("chatgpt_imagegen_image_rendering_complete",void 0,{hasParent:e.parentGenerationId?"true":"false"}),B.logEvent("chatgpt_imagegen_image_rendering_complete",e)}),J(bs,"editorClick",({sourceOperation:e,analyticsContext:n})=>{qe.logEvent("chatgpt_dalle_image_view_full",null,w({sourceOperation:e},n)),B.logEvent("chatgpt_dalle_image_view_full",w({sourceOperation:e},n)),qe.logEvent("chatgpt_image_view_full",null,w({sourceOperation:e},n)),B.logEvent("chatgpt_image_view_full",w({sourceOperation:e},n)),n.conversationId&&n.messageId&&n.generationId&&Rr("image_view_full",n.conversationId,n.messageId,n.generationId)}),J(bs,"inpaintStarted",({analyticsContext:e})=>{qe.logEvent("chatgpt_dalle_inpaint_click","click",e),B.logEvent("chatgpt_dalle_inpaint_click",e),qe.logEvent("chatgpt_image_inpaint_click",void 0,e),B.logEvent("chatgpt_image_inpaint_click",e)}),J(bs,"inpaintClick",({analyticsContext:e})=>{qe.logEvent("chatgpt_imagegen_inpaint_click",null,e),B.logEvent("chatgpt_imagegen_inpaint_click",e)}),J(bs,"zoom",({zoomType:e,analyticsContext:n})=>{qe.logEvent(e==="in"?"chatgpt_image_view_full_zoom_in":"chatgpt_image_view_full_zoom_out",null,{hasParent:n.parentGenerationId?"true":"false"}),B.logEvent(e==="in"?"chatgpt_image_view_full_zoom_in":"chatgpt_image_view_full_zoom_out",U(w({},n),{startMs:performance.now()})),n.conversationId&&n.messageId&&n.generationId&&Rr(e==="in"?"image_view_full_zoom_in":"image_view_full_zoom_out",n.conversationId,n.messageId,n.generationId)}),J(bs,"download",({analyticsContext:e})=>{qe.logEvent("chatgpt_dalle_image_download","click",e),B.logEvent("chatgpt_dalle_image_download",e),qe.logEvent("chatgpt_image_download",void 0,e),B.logEvent("chatgpt_image_download",e),e.conversationId&&e.messageId&&e.generationId&&Rr("image_download",e.conversationId,e.messageId,e.generationId)}),J(bs,"generationSuccess",({analyticsContext:e,durationMs:n})=>{qe.logEvent("chatgpt_imagegen_generation_success",n?Math.round(n):void 0),B.logEvent("chatgpt_imagegen_generation_success",U(w({},e),{duration_ms:n}))}),J(bs,"generationFailure",({analyticsContext:e,errorReason:n})=>{const s=n?{errorReason:n}:void 0;qe.logEvent("chatgpt_imagegen_generation_failure",void 0,s),B.logEvent("chatgpt_imagegen_generation_failure",U(w({},e),{errorReason:n}))});const xVe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)}),yVe=5,vVe="Default";function bVe(t){const e={};return t.forEach(n=>{var o;const s=(o=n.group)!=null?o:vVe;e[s]||(e[s]=[]),e[s].push(n)}),e}function CVe({tagOptions:t,onSubmit:e,onMoreClicked:n,onCancel:s,maxInlineTags:o=yVe,modalOnly:a=!1,modalTitle:i,multiple:l,children:c,allowEmptySubmit:d=!1}){const u=ne(),f=V(),m=st(f),g=m==null?void 0:m.planType,p=g===Ye.FREE||g===Ye.GO||g===Ye.PLUS||g===Ye.PRO,[h,x]=_.useState(a?"modal":"inline"),[v,y]=_.useState([]),[b,C]=_.useState(void 0),S=G=>v.some(Z=>Z.value===G),{eligible:E}=lt(Oe.hasSeenInlineFeedbackCustomInstrMessage),k=E?4e3:1500,[T,M]=_.useState(!1),A=at(),I=_.useCallback(G=>{e(G),x("submitted");const Z=["Too chatty or casual","Don't like the style"];M(G.tags.some(Q=>Z.includes(Q.value))),setTimeout(()=>{x("closed"),E&&T&&ot(f,Oe.hasSeenInlineFeedbackCustomInstrMessage)},k)},[e,k,E,T,f]),N=_.useMemo(()=>fi(I,500),[I]),L=G=>{let Z=[];return l?Z=S(G.value)?v.filter(Q=>Q!==G):[...v,G]:Z=[G],y(Z),Z},O=G=>{I({event:G,tags:v,textFeedback:b,tagChoices:D,source:"modal"})},D=t.map(G=>G.value),$=bVe(t),H=Object.keys($);return r.jsxs(r.Fragment,{children:[!a&&r.jsx(fn,{children:h!=="closed"&&r.jsxs(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:[h==="submitted"&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:r.jsx("div",{className:"border-token-border-default inline-flex rounded-lg border p-4",children:r.jsx("div",{className:"text-sm",children:E&&T?r.jsx(r.Fragment,{children:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.customInstructions",defaultMessage:"Thanks! If ChatGPT's style isn't quite right, you can also <link>customize its responses</link>.",values:{link:G=>r.jsx("span",{onClick:()=>{A("#settings/".concat(Pn.Personalization)),qe.logEvent("chatgpt_user_context_inline_feedback_message_clicked"),B.logEvent("User Context Inline Feedback Message Clicked")},className:"text-token-text-primary cursor-pointer font-semibold",children:G})}})}):r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(h)&&r.jsxs("div",{className:"border-token-border-default relative mt-2 flex w-full flex-col gap-3 rounded-lg border p-4",children:[r.jsx("button",{className:"absolute end-4 top-4 text-sm font-bold",onClick:()=>{x("closed"),N.cancel(),s==null||s()},children:r.jsx(xVe,{className:"icon text-token-text-secondary hover:text-token-text-primary"})}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.slice(0,o).map(G=>r.jsx(V2,{"aria-pressed":S(G.value),"aria-selected":S(G.value),$selected:S(G.value),onClick:Z=>{const Q=L(G);N({event:Z,tags:Q,tagChoices:D,source:"inline"})},children:G.label},G.value)),r.jsx(V2,{onClick:()=>{n==null||n(),N.cancel(),x("modal")},children:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),h==="modal"&&r.jsxs(Mt,{type:"success",testId:"modal-inline-feedback",isOpen:!0,className:"max-w-xl",size:"custom",title:i!=null?i:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{y([]),x(a?"closed":"inline"),a&&(s==null||s())},showCloseButton:!0,primaryButton:r.jsx(ye,{color:"primary",disabled:v.length===0&&!b&&!d,onClick:O,children:r.jsx(j,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[r.jsx("div",{className:"flex flex-col gap-6",children:H.map(G=>r.jsxs("div",{children:[H.length>1&&r.jsx("div",{className:"mb-3 text-sm font-semibold",children:G}),r.jsx("div",{className:"flex flex-wrap gap-3",children:$[G].map(Z=>r.jsx(V2,{$selected:S(Z.value),onClick:()=>L(Z),children:Z.label},Z.value))},G)]},G))}),r.jsx(pf,{ariaLabel:u.formatMessage({id:"Z3Ja/T",defaultMessage:"Additional feedback"}),name:"feedback",type:"text",className:"mt-6",placeholder:u.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:b!=null?b:"",onChange:G=>C(G.target.value),onPressEnter:(G,Z)=>O(Z)}),p&&r.jsx("div",{className:"bg-token-main-surface-secondary text-token-text-secondary mt-4 rounded-lg p-3 text-xs",children:r.jsx(j,{id:"n8n3KW",defaultMessage:"Submitting feedback will include this full conversation to help improve ChatGPT, even if 'Improve the model for everyone' is turned off. <link>Learn more</link>",values:{link:G=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",rel:"noopener noreferrer",className:"text-token-text-secondary underline",children:G})}})}),c]})]})}var UE;const V2=ft.button(UE||(UE=ct(["\n  rounded-lg border border-token-border-default px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary\n  ","\n"])),({$selected:t})=>t&&"bg-token-text-primary! text-token-main-surface-primary!");function SVe({messageId:t,serverThreadId:e,rating:n,onClose:s}){const o=ne(),a=Object.entries(zq).map(([l,c])=>({label:o.formatMessage(c),value:l})),i=async l=>{var d;const c=a.map(u=>u.value);try{await ge.safePost("/conversation/message_feedback",{requestBody:{message_id:t,conversation_id:e,rating:"thumbsDown",text:(d=l.textFeedback)!=null?d:void 0,tags:l.tags.map(u=>u.value),tag_choices:c},authOption:sn.SendIfAvailable})}catch(u){Fe.addError("Failed to submit ".concat(n," image generation feedback: ").concat(u))}s()};return r.jsx("div",{onClick:l=>l.stopPropagation(),children:r.jsx(CVe,{tagOptions:a,modalOnly:!0,multiple:!0,onSubmit:i})})}const wVe=R(()=>P(()=>import("./k1cl8bhg0vqi0zvs.js"),__vite__mapDeps([276,1])),{loading:t=>F(t)}),kVe=R(()=>P(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([149,1])),{loading:t=>F(t)}),EVe=({onOpenChange:t,onDownload:e,triggerClassName:n,iconClassName:s,dropdownClassName:o})=>{const a=ne(),i=_.useCallback(()=>{e==null||e()},[e]);return r.jsxs(K.Root,{onOpenChange:t,children:[r.jsx(K.Trigger,{"aria-label":a.formatMessage({id:"imagegen.watermark.dropdownName",defaultMessage:"More Download options"}),className:n,tabIndex:0,children:r.jsx(kVe,{style:{filter:"drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.20))"},className:s})}),r.jsx(K.Portal,{children:r.jsx(K.Content,{className:o,side:"bottom",align:"end",children:r.jsx(K.Item,{className:"py-2",children:r.jsxs("button",{type:"button",onClick:i,className:"row text-token-text-primary flex items-center gap-2",children:[r.jsx(wVe,{}),r.jsxs("div",{className:"ms-2 flex flex-col items-start",children:[r.jsx("span",{className:"font-semibold",children:r.jsx(j,{id:"imagegen.watermark.dropdownLabel",defaultMessage:"Save image"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(j,{id:"imagegen.watermark.dropdownSecondaryLabel",defaultMessage:"without watermark"})})]})]})})})})]})},TVe=R(()=>P(()=>import("./imdfj4m85ztq7yte.js"),__vite__mapDeps([482,1])),{loading:t=>F(t)}),MVe=R(()=>P(()=>import("./eibvgm82s4rii3v7.js"),__vite__mapDeps([506,1])),{loading:t=>F(t)}),AVe=R(()=>P(()=>import("./4h8qsvyuv2fcir5w.js"),__vite__mapDeps([483,1])),{loading:t=>F(t)}),IVe=R(()=>P(()=>import("./np3j7tlnwifo0og0.js"),__vite__mapDeps([507,1])),{loading:t=>F(t)}),jVe=R(()=>P(()=>Promise.resolve().then(()=>sm),void 0),{loading:t=>F(t)}),NVe=R(()=>P(()=>import("./k1cl8bhg0vqi0zvs.js"),__vite__mapDeps([276,1])),{loading:t=>F(t)});function M9({rightAlign:t=!1,bottomAlign:e=!1,fullWidth:n=!1,justifyBetween:s=!1,alwaysVisible:o=!1,children:a}){const i=_.useRef(null),l=_.useRef(!1),c=I4(),d=$U(),u=_.useCallback(()=>{d&&(l.current||(B.logEvent("Share Post: Share Button Shown",w({source:"image_gen_action_overlay"},c)),l.current=!0))},[c,d]),f=_.useCallback(m=>{m.propertyName==="opacity"&&u()},[u]);return _.useEffect(()=>{o&&u()},[o,u]),r.jsxs("div",{ref:i,onTransitionEnd:f,className:z("absolute z-2 transition-opacity duration-75 ease-out",o?"opacity-100":"opacity-0 group-hover/imagegen-image:opacity-100 group-focus/imagegen-image:opacity-100 focus-within:opacity-100",t?"end-0":"start-0",e?"bottom-0":"top-0",n&&"w-full"),children:[r.jsx("div",{className:z(e?"bg-linear-to-b":"bg-linear-to-t","from-transparent to-black/30","h-20 w-full")}),r.jsx("div",{className:z("absolute inset-0 flex p-1",e?"items-end":"items-start",t?"justify-end":"justify-start",s&&"justify-between"),children:a})]})}function Pu({icon:t,children:e,disabled:n,onClick:s,ariaLabel:o,selected:a=!1}){return r.jsxs("button",{"aria-pressed":a,className:z("hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md","z-11 flex h-10 items-center justify-center gap-1 rounded-xl text-sm font-medium text-white",e==null?"w-10":"px-2"),onClick:s,disabled:n,"aria-label":o,children:[r.jsx(t,{style:{filter:"drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.15))"},className:"icon fill-current"}),e]})}function Yg(t){return e=>{e.stopPropagation(),t()}}const PVe=({imageAssetPointer:t,imageUrl:e,messageId:n,clientThreadId:s,serverThreadId:o,shouldShowOverflow:a=!1,showRatingButtons:i=!0})=>{const l=V(),c=hVe(l),d=ne(),[u,f]=_.useState(!1),[m,g]=_.useState(null),p=I4(),h=k=>{m==null&&(bs.imageRated({liked:k,analyticsContext:p}),g(k),k||f(!0))},x=_.useCallback(()=>qAe(d),[d]),v=T1(),y=rI(),b=(y==null?void 0:y.type)===S$.Image&&y.image.asset_pointer===t,[C,S]=_.useState(!1),E=_.useCallback(()=>{t&&(uk({url:t,fileName:x()}),bs.download({analyticsContext:p}))},[t,x,p]);return r.jsxs(r.Fragment,{children:[v?!b&&r.jsx(M9,{rightAlign:!0,fullWidth:!0,children:r.jsx(Pu,{icon:UAe,ariaLabel:d.formatMessage(Ru.expand)})}):r.jsx(r.Fragment,{children:r.jsx(M9,{bottomAlign:!0,rightAlign:!0,fullWidth:!0,alwaysVisible:C,children:r.jsxs("div",{className:"flex w-full items-center justify-between",children:[r.jsxs("div",{className:"flex",children:[i&&m!==!1&&r.jsx(pt,{label:d.formatMessage({id:"U99PVw",defaultMessage:"Like"}),delayDuration:300,children:r.jsx(Pu,{icon:m===!0?MVe:TVe,selected:m===!0,onClick:Yg(()=>h(!0)),ariaLabel:d.formatMessage(Ru.thumbsUp),disabled:m===!0})}),i&&m!==!0&&r.jsx(pt,{label:d.formatMessage({id:"ncGqTt",defaultMessage:"Dislike"}),delayDuration:300,children:r.jsx(Pu,{icon:m===!1?IVe:AVe,selected:m===!1,onClick:Yg(()=>h(!1)),ariaLabel:d.formatMessage(Ru.thumbsDown),disabled:m===!1})}),e&&r.jsx(pt,{label:d.formatMessage({id:"0EYire",defaultMessage:"Download"}),children:r.jsx(Pu,{icon:NVe,ariaLabel:d.formatMessage(Ru.download),onClick:Yg(()=>{uk({url:e,fileName:x()}),bs.download({analyticsContext:p})})})}),c&&a&&r.jsx(EVe,{onOpenChange:S,onDownload:E,triggerClassName:"z-11 flex h-10 w-10 items-center justify-center rounded-xl bg-transparent hover:bg-token-icon-surface/10 focus:bg-token-icon-surface/10 focus-visible:bg-token-icon-surface/10",iconClassName:"icon-lg fill-transparent text-white",dropdownClassName:"z-11 min-w-fit origin-top-end text-token-text-primary"})]}),r.jsx("div",{className:"flex",children:r.jsx(RVe,{clientThreadId:s,messageId:n})})]})})}),u&&r.jsx(SVe,{messageId:n,serverThreadId:o!=null?o:"",rating:m,onClose:()=>f(!1)})]})};function RVe({clientThreadId:t,messageId:e}){const[n,s]=_.useState(!1),o=ne(),a=$U(),i=v3(),l=GU({clientThreadId:t,imageGenMessageId:e}),c=I4();return!a||i?null:r.jsx(Pu,{icon:n?ws:jVe,disabled:n,onClick:Yg(async()=>{s(!0);try{await l()}finally{s(!1)}bs.imageShared({analyticsContext:c,source:"image_gen_action_overlay"})}),ariaLabel:o.formatMessage(Ru.share),children:r.jsx(j,{id:"imageGenActionOverlay.shareButton",defaultMessage:"Share"})})}const Ru=Se({thumbsUp:{id:"imageGenActionOverlay.thumbsUp",defaultMessage:"Like this image"},thumbsDown:{id:"imageGenActionOverlay.thumbsDown",defaultMessage:"Dislike this image"},inpaint:{id:"imageGenActionOverlay.inpaint",defaultMessage:"Enter inpainting mode"},download:{id:"imageGenActionOverlay.download",defaultMessage:"Download this image"},expand:{id:"imageGenActionOverlay.expand",defaultMessage:"Expand this image"},share:{id:"imageGenActionOverlay.share",defaultMessage:"Share this image"}}),LVe="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIzNiIKICBoZWlnaHQ9IjM2IgogIHZpZXdCb3g9IjAgMCAzNiAzNiIKICBmaWxsPSJub25lIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF80NjY1XzIzMzApIj4KICAgIDxyZWN0IHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiIgZmlsbD0id2hpdGUiIC8+CiAgICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIGZpbGw9IiMxRTFFMUUiIC8+CiAgICA8cmVjdCB4PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSJibGFjayIgLz4KICAgIDxyZWN0IHg9IjE4IiB5PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSIjMUUxRTFFIiAvPgogICAgPHJlY3QgeT0iMTgiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgZmlsbD0iYmxhY2siIC8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMF80NjY1XzIzMzAiPgogICAgICA8cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIiAvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo=",OVe="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIzNiIKICBoZWlnaHQ9IjM2IgogIHZpZXdCb3g9IjAgMCAzNiAzNiIKICBmaWxsPSJub25lIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF80NjY1XzIzMTkpIj4KICAgIDxyZWN0IHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiIgZmlsbD0id2hpdGUiIC8+CiAgICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIGZpbGw9IiNFRkVGRjAiIC8+CiAgICA8cmVjdCB4PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSJ3aGl0ZSIgLz4KICAgIDxyZWN0IHg9IjE4IiB5PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSIjRUZFRkYwIiAvPgogICAgPHJlY3QgeT0iMTgiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgZmlsbD0id2hpdGUiIC8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMF80NjY1XzIzMTkiPgogICAgICA8cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIiAvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo=",DVe=()=>{"use forget";const t=W.c(2),e=Xo(),n="url(".concat(e?LVe:OVe,")");let s;return t[0]!==n?(s=r.jsx("div",{className:"absolute inset-0 z-0 w-full overflow-hidden opacity-0 group-hover:opacity-100 group-focus:opacity-100",children:r.jsx("div",{className:"absolute inset-0 bg-auto bg-repeat",style:{backgroundImage:n}})}),t[0]=n,t[1]=s):s=t[1],s},FVe=R(()=>P(()=>import("./hahiy9dm7k71twz4.js"),__vite__mapDeps([385,1])),{loading:t=>F(t)}),BVe=({src:t,thumbnail:e,alt:n,height:s,width:o,isLoaded:a,onLoad:i,onError:l})=>{"use no forget";const c=ne(),[d,u]=_.useState(!1);return n!=null||(n=c.formatMessage({id:"xoI74H",defaultMessage:"ChatGPT generated image."})),r.jsxs(r.Fragment,{children:[r.jsx("img",{loading:"lazy",decoding:"async",className:z("absolute inset-0 z-0 aspect-square object-cover transition-opacity delay-100 duration-300 ease-[cubic-bezier(.24,.1,.42,.91)]",!a&&"opacity-0"),onLoad:()=>{i()},onError:()=>{l(),i()},alt:n,src:t,width:o,height:s}),e&&e!==t&&r.jsx("img",{loading:"lazy",decoding:"async",alt:n,src:e,className:z("absolute inset-0 z-1 h-full w-full object-cover blur-sm transition-opacity delay-100 duration-300 ease-[cubic-bezier(.24,.1,.42,.91)]",d&&!a?"opacity-100":"opacity-0"),onLoad:()=>u(!0),width:o,height:s}),a&&r.jsx(DVe,{})]})},UVe=t=>!("isPlaceholder"in t)||!t.isPlaceholder,A9=t=>{"use forget";const e=W.c(21),[n,s]=_.useState(!1),[o,a]=_.useState(!1),{index:i,onClick:l}=t;let c;e[0]!==t?(c=UVe(t),e[0]=t,e[1]=c):c=e[1];const d=!c;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=z("group/imagegen-image bg-tertiary relative z-0 flex aspect-square items-center justify-center overflow-clip text-xs"),e[2]=u):u=e[2];let f;e[3]!==i||e[4]!==l||e[5]!==d?(f=()=>{d||l==null||l(i)},e[3]=i,e[4]=l,e[5]=d,e[6]=f):f=e[6];const m=d?void 0:"button",g=d?!0:void 0;let p;e[7]!==n||e[8]!==d||e[9]!==t?(p=d?r.jsx("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:r.jsx("div",{className:"bg-token-bg-tertiary h-full w-full animate-pulse"})}):r.jsxs(r.Fragment,{children:[!n&&r.jsx("div",{className:"bg-token-bg-tertiary absolute inset-0 z-0 animate-pulse"}),r.jsx(BVe,U(w({},t),{isLoaded:n,onLoad:()=>s(!0),onError:()=>a(!0)}))]}),e[7]=n,e[8]=d,e[9]=t,e[10]=p):p=e[10];let h;e[11]!==o||e[12]!==d?(h=o&&!d&&r.jsx(FVe,{className:"text-token-text-tertiary absolute z-0 h-12 w-12 text-red-500"}),e[11]=o,e[12]=d,e[13]=h):h=e[13];let x;return e[14]!==t.children||e[15]!==f||e[16]!==m||e[17]!==g||e[18]!==p||e[19]!==h?(x=r.jsxs("div",{className:u,onClick:f,role:m,"aria-hidden":g,children:[p,h,t.children]}),e[14]=t.children,e[15]=f,e[16]=m,e[17]=g,e[18]=p,e[19]=h,e[20]=x):x=e[20],x},$Ve=({onScrollToEnd:t})=>{const e=_.useRef(null);return _.useEffect(()=>{if(!e.current)return;const n=new IntersectionObserver(s=>{s[0].isIntersecting&&t()});return n.observe(e.current),()=>n.disconnect()},[t]),r.jsx("div",{className:"absolute",ref:e})},VVe=["recent","images","bootstrap"],w$=10,k$=25,HVe=20,GVe=(t,e)=>({queryKey:["recent","images",t,e],initialPageParam:null,staleTime:120*1e3,queryFn:({pageParam:n})=>{const s=qe.checkGate("1057463568"),o=s?"/my/recent/v2/image_gen":"/my/recent/image_gen",a=n==null?t?w$:k$:HVe,i=w({limit:a,after:n},s?{retrieve_archived:e||void 0}:{include_archived:e||void 0});return ge.safeGet(o,{parameters:{query:i}})},getNextPageParam:({cursor:n})=>n}),E$=()=>({queryKey:VVe,refetchOnMount:"always",enabled:()=>!0,queryFn:()=>ge.safeGet("/images/bootstrap",{})}),Not=t=>t.fetchQuery(E$()),Pot=()=>{"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=E$(),t[0]=e):e=t[0],rt(e)};function I9({queryClient:t,includeArchived:e,isMobile:n,imageId:s,operation:o}){t.setQueryData(["recent","images",n,e],a=>a&&U(w({},a),{pages:a.pages.map(i=>{let l=i.items.map(c=>c.id===s?U(w({},c),{is_archived:o==="archive"}):c);return o==="archive"&&!e&&(l=l.filter(c=>c.id!==s)),U(w({},i),{items:l})})}))}const WVe=()=>{"use forget";const t=W.c(7),e=V(),n=!Sr();let s;t[0]!==e?(s=Qo(e),t[0]=e,t[1]=s):s=t[1];const o=s;let a;t[2]!==n||t[3]!==o?(a={mutationFn:qVe,onMutate:async c=>{const{imageId:d,operation:u}=c;await Promise.all([o.cancelQueries({queryKey:["recent","images",n,!1]}),o.cancelQueries({queryKey:["recent","images",n,!0]})]);const f=o.getQueryData(["recent","images",n,!1]),m=o.getQueryData(["recent","images",n,!0]);return I9({queryClient:o,includeArchived:!1,isMobile:n,imageId:d,operation:u}),I9({queryClient:o,includeArchived:!0,isMobile:n,imageId:d,operation:u}),{recentImagesUnarchived:f,recentImagesArchived:m}},onError:(c,d,u)=>{const{recentImagesUnarchived:f,recentImagesArchived:m}=u!=null?u:{};o.setQueryData(["recent","images",n,!1],f),o.setQueryData(["recent","images",n,!0],m)},onSuccess:(c,d)=>{const{operation:u}=d;u==="unarchive"&&o.invalidateQueries({queryKey:["recent","images",n,!1]})}},t[2]=n,t[3]=o,t[4]=a):a=t[4];const i=qt(a);let l;return t[5]!==i?(l={archiveMutation:i},t[5]=i,t[6]=l):l=t[6],l},zVe=(t,e)=>{"use forget";var y;const n=W.c(13),s=t===void 0?!1:t,o=e===void 0?"all":e,a=!Sr(),i=s||o!=="unarchived";let l;n[0]!==a||n[1]!==i?(l=GVe(a,i),n[0]=a,n[1]=i,n[2]=l):l=n[2];const c=l,{data:d,refetch:u,fetchNextPage:f,hasNextPage:m,isLoading:g,isFetchingNextPage:p}=wf(c);let h;if(n[3]!==(d==null?void 0:d.pages)||n[4]!==o){e:{const b=(y=d==null?void 0:d.pages.flatMap(YVe).map(ZVe))!=null?y:[];if(o==="archived"){h=b.filter(KVe);break e}if(o==="unarchived"){h=b.filter(QVe);break e}h=b}n[3]=d==null?void 0:d.pages,n[4]=o,n[5]=h}else h=n[5];const x=h;let v;return n[6]!==f||n[7]!==m||n[8]!==x||n[9]!==p||n[10]!==g||n[11]!==u?(v={refetch:u,images:x,isLoading:g,isFetchingNextPage:p,hasNextPage:m,fetchNextPage:f},n[6]=f,n[7]=m,n[8]=x,n[9]=p,n[10]=g,n[11]=u,n[12]=v):v=n[12],v};function qVe(t){const{imageId:e,operation:n}=t;return ge.safePatch("/my/image/{gen_id}/".concat(n),{parameters:{path:{gen_id:e}}})}function YVe(t){return t.items}function ZVe(t){var e,n,s,o,a,i,l,c;return U(w({},t),{archived:(e=t.is_archived)!=null?e:!1,id:t.id,messageId:(n=t.message_id)!=null?n:null,transformationId:(s=t.transformation_id)!=null?s:null,assetPointer:(o=t.asset_pointer)!=null?o:null,createdAt:t.created_at?new Date(t.created_at*1e3):void 0,conversationId:(a=t.conversation_id)!=null?a:void 0,thumbnail:(c=(l=(i=t.encodings)==null?void 0:i.thumbnail)==null?void 0:l.path)!=null?c:null})}function KVe(t){return t.archived}function QVe(t){return!t.archived}const JVe=R(()=>P(()=>import("./cmff6ny7qwtuxu45.js"),__vite__mapDeps([201,1])),{loading:t=>F(t)}),XVe=R(()=>P(()=>import("./kqn6tqur46b4av9e.js"),__vite__mapDeps([512,1,10,11,513,514,498,345,346,347,348,317,0,349,350,515])).then(t=>t.ImageGenLibraryLightboxNew)),eHe=t=>{"use forget";var T;const e=W.c(32),{conversation:n,hasMoreImages:s,count:o,images:a,includeArchived:i,isHiddenView:l,onUnhide:c,isFetchingMore:d,onScrollToEnd:u}=t,f=l===void 0?!1:l,m=V(),g=ne(),h=!Sr()?w$:k$,x=d?Math.max(o!=null?o:0,h):s?Math.max((o!=null?o:0)-((T=a.length)!=null?T:0),0):0;let v;e[0]!==n||e[1]!==m||e[2]!==i||e[3]!==f?(v=M=>{B.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened");const A=bn(()=>yn(n).id);dt(m,XVe,{initialIndex:M,includeArchived:i,visibilityFilter:f?"archived":"unarchived",clientThreadId:n.id,currentModelId:A})},e[0]=n,e[1]=m,e[2]=i,e[3]=f,e[4]=v):v=e[4];const y=v;let b;if(e[5]!==a||e[6]!==g||e[7]!==f||e[8]!==u||e[9]!==c||e[10]!==y||e[11]!==x){let M;e[13]!==a.length||e[14]!==g||e[15]!==f||e[16]!==u||e[17]!==c||e[18]!==y?(M=(I,N)=>{const{id:L,url:O,thumbnail:D,width:$,height:H,title:G,assetPointer:Z,conversationId:Q,messageId:q}=I,Y=G===void 0?null:G;return r.jsxs(A9,{index:N,src:ms(D!=null?D:O),onClick:()=>y(N),thumbnail:ms(D),width:$,height:H,alt:Y,children:[!f&&Q!=null&&q!=null&&r.jsx(PVe,{imageAssetPointer:Z!=null?Z:void 0,imageUrl:O!=null?O:void 0,clientThreadId:Q,serverThreadId:Q,messageId:q,showRatingButtons:!1}),f&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pointer-events-none absolute inset-0 z-20 opacity-0 transition-opacity group-hover/imagegen-image:opacity-100",children:r.jsx("div",{className:"absolute inset-x-0 bottom-0 h-20 bg-linear-to-b from-transparent to-black/30"})}),r.jsx("div",{className:"absolute end-1 bottom-1 z-20 opacity-0 transition-opacity group-hover/imagegen-image:opacity-100",children:r.jsxs("button",{className:"z-11 flex h-10 items-center gap-1 rounded-xl px-2 text-sm font-medium text-white hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md",onClick:te=>{te.stopPropagation(),c==null||c(L)},"aria-label":g.formatMessage({id:"fjXWf2",defaultMessage:"Unhide image"}),children:[r.jsx(JVe,{className:"h-4 w-4"}),r.jsx("span",{className:"max-md:hidden",children:r.jsx(j,{id:"wEyKC9",defaultMessage:"Unhide"})})]})})]}),N===a.length-1&&r.jsx($Ve,{onScrollToEnd:u})]},L)},e[13]=a.length,e[14]=g,e[15]=f,e[16]=u,e[17]=c,e[18]=y,e[19]=M):M=e[19];let A;e[20]!==a.length?(A=(I,N)=>{const L=a.length+N;return r.jsx(A9,{index:L,isPlaceholder:!0},L)},e[20]=a.length,e[21]=A):A=e[21],b=a.map(M).concat(new Array(x).fill(null).map(A)),e[5]=a,e[6]=g,e[7]=f,e[8]=u,e[9]=c,e[10]=y,e[11]=x,e[12]=b}else b=e[12];let C;e[22]!==b?(C=r.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-1 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:b}),e[22]=b,e[23]=C):C=e[23];let S;e[24]!==s||e[25]!==d?(S=s&&d&&r.jsx(ws,{}),e[24]=s,e[25]=d,e[26]=S):S=e[26];let E;e[27]!==S?(E=r.jsx("div",{className:"flex h-8 items-center justify-center",children:S}),e[27]=S,e[28]=E):E=e[28];let k;return e[29]!==C||e[30]!==E?(k=r.jsxs("div",{className:"w-full",children:[C,E]}),e[29]=C,e[30]=E,e[31]=k):k=e[31],k};R(()=>P(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([147,1])),{loading:t=>F(t)});R(()=>P(()=>import("./cmff6ny7qwtuxu45.js"),__vite__mapDeps([201,1])),{loading:t=>F(t)});const tHe=R(()=>P(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([10,1,11])),{loading:t=>F(t)});function Rot(t){"use forget";const e=W.c(38),{conversation:n,onClose:s}=t,{images:o,hasNextPage:a,fetchNextPage:i,isFetchingNextPage:l,isLoading:c}=zVe(!0,"archived"),{archiveMutation:d}=WVe(),[u,f]=_.useState(!1),m=ne();let g;e[0]!==d?(g=async D=>{await Promise.all(D.map($=>d.mutateAsync({imageId:$,operation:"unarchive"})))},e[0]=d,e[1]=g):g=e[1];const p=g;let h;e[2]!==p||e[3]!==o?(h=async()=>{o.length&&(f(!0),await p(o.map(nHe)),f(!1))},e[2]=p,e[3]=o,e[4]=h):h=e[4];const x=h;let v;e[5]!==m?(v=m.formatMessage({id:"awwvCt",defaultMessage:"Close"}),e[5]=m,e[6]=v):v=e[6];let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(tHe,{className:"h-5 w-5"}),e[7]=y):y=e[7];let b;e[8]!==s||e[9]!==v?(b=r.jsx("button",{type:"button","aria-label":v,onClick:s,className:"flex items-center justify-center p-1",children:y}),e[8]=s,e[9]=v,e[10]=b):b=e[10];let C;e[11]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("h1",{className:"px-2 text-lg font-normal select-none [text-box-trim:trim-both]",children:r.jsx(j,{id:"pvfc+c",defaultMessage:"Hidden"})}),e[11]=C):C=e[11];let S;e[12]!==b?(S=r.jsxs("div",{className:"flex items-center gap-1",children:[b,C]}),e[12]=b,e[13]=S):S=e[13];let E;e[14]!==x?(E=!1,e[14]=x,e[15]=E):E=e[15];let k;e[16]!==S||e[17]!==E?(k=r.jsxs("header",{"data-landing-page-load-target":!0,className:"h-header-height bg-token-bg-primary sticky top-0 z-20 flex w-full items-center justify-between px-3 py-3",children:[S,E]}),e[16]=S,e[17]=E,e[18]=k):k=e[18];let T;e[19]!==p?(T=D=>p([D]),e[19]=p,e[20]=T):T=e[20];const M=a!=null?a:!1,A=l||c;let I;e[21]!==n||e[22]!==i||e[23]!==o||e[24]!==T||e[25]!==M||e[26]!==A?(I=r.jsx(eHe,{conversation:n,images:o,count:o.length,includeArchived:!0,isHiddenView:!0,onUnhide:T,hasMoreImages:M,isFetchingMore:A,onScrollToEnd:i}),e[21]=n,e[22]=i,e[23]=o,e[24]=T,e[25]=M,e[26]=A,e[27]=I):I=e[27];let N;e[28]!==u||e[29]!==o.length||e[30]!==c?(N=o.length===0&&!u&&!c&&r.jsx("p",{className:"text-token-text-secondary py-8 text-center",children:r.jsx(j,{id:"BdZGOW",defaultMessage:"No hidden images"})}),e[28]=u,e[29]=o.length,e[30]=c,e[31]=N):N=e[31];let L;e[32]!==I||e[33]!==N?(L=r.jsxs("div",{className:"w-full max-w-[1800px]",children:[I,N]}),e[32]=I,e[33]=N,e[34]=L):L=e[34];let O;return e[35]!==L||e[36]!==k?(O=r.jsxs("div",{className:"max-md:bg-token-bg-primary flex w-full flex-col items-center max-md:fixed max-md:inset-0 max-md:z-50 max-md:overflow-y-auto",children:[k,L]}),e[35]=L,e[36]=k,e[37]=O):O=e[37],O}function nHe(t){return t.id}let xu=null;function sHe(){return xu||(xu=document.createElement("div"),xu.setAttribute("portal-container",""),document.body.append(xu)),xu||null}function Lot(t){const{children:e}=t,n=sHe();return n&&$E.createPortal(e,n)}const Oot=t=>{"use forget";const e=W.c(6),{borderless:n}=t,s=!n&&"border";let o;e[0]!==s?(o=z("flex h-full w-full flex-col items-center justify-center gap-2 rounded-xl p-8",s),e[0]=s,e[1]=o):o=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("div",{className:"text-token-text-secondary -mt-[100px] text-xl",children:r.jsx(j,{id:"D9mM+/",defaultMessage:"Visualize anything, find it here"})}),e[2]=a):a=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("div",{className:"text-token-text-tertiary text-center text-base text-balance",children:r.jsx(j,{id:"fnxt50",defaultMessage:"Ask ChatGPT to turn any idea into an image, diagram, or visual."})}),e[3]=i):i=e[3];let l;return e[4]!==o?(l=r.jsxs("div",{className:o,children:[a,i]}),e[4]=o,e[5]=l):l=e[5],l},j9="chatgpt_library_last_tab";function Dot(t,e){var i;const[n]=Us(),s=Vn(),o=at(),a=(i=n.get("tab"))!=null?i:"images";_.useEffect(()=>{if(!e)return;const l=n.get("tab");if(!(!!l&&t.includes(l)))try{if(typeof window<"u"){const d=window.localStorage.getItem(j9),u=d&&t.includes(d)?d:"images",f=new URLSearchParams(s.search);f.set("tab",u),o({pathname:s.pathname,search:f.toString(),hash:s.hash},{replace:!0})}}catch(d){}},[e,a,t,o,s,n]),_.useEffect(()=>{if(e)try{typeof window<"u"&&t.includes(a)&&window.localStorage.setItem(j9,a)}catch(l){}},[e,a,t])}function Fot(t){"use forget";const e=W.c(2);if(FD(t)&&t){let s;return e[0]!==t?(s=r.jsx(DD,{threadId:t}),e[0]=t,e[1]=s):s=e[1],s}return null}function Bot(t){"use forget";const e=W.c(8),{clientThreadId:n,messageId:s}=t;let o,a;e[0]!==n||e[1]!==s?(o=()=>{Ln.closeSharingModal(),Ze(n,d=>{s!=null?(d.scrollToMessageId=s,d.scrollToMessageIsAssistant=!0):(d.scrollToMessageId="finalAgentTurn",d.scrollToMessageIsAssistant=void 0),qq("messageId")})},a=[n,s],e[0]=n,e[1]=s,e[2]=o,e[3]=a):(o=e[2],a=e[3]),_.useEffect(o,a);const i=It();let l,c;e[4]!==i||e[5]!==n?(l=()=>(fr.retainThread(n),()=>{setTimeout(()=>{i.invalidateQueries(Uh({clientThreadId:n}))},0),fr.releaseThread(n)}),c=[n,i],e[4]=i,e[5]=n,e[6]=l,e[7]=c):(l=e[6],c=e[7]),_.useEffect(l,c)}function Uot(t,e){"use forget";const n=W.c(4),s=e===void 0?!0:e,o=Eh();let a;n[0]!==o?(a=o?{kind:wt.GizmoInteraction,gizmo_id:o}:{kind:wt.PrimaryAssistant},n[0]=o,n[1]=a):a=n[1];const i=a;let l;n[2]!==s?(l={shouldScrollToBottom:s},n[2]=s,n[3]=l):l=n[3],iY(t,i,l)}function $ot({clientThreadId:t}){return t1.useCurrentImage()?r.jsx(oHe,{clientThreadId:t}):null}const oHe=R(()=>P(()=>import("./hbhzncdz8wdw5ysr.js"),__vite__mapDeps([516,1,10,11,388,14,514,517])).then(t=>t.ImageLightbox));function Vot(){const t=i6(n=>n.liveRegionAssertive),e=i6(n=>n.liveRegionPolite);return r.jsxs(r.Fragment,{children:[r.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",id:"live-region-assertive",children:t}),r.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"live-region-polite",children:e})]})}function Hot(t){"use forget";var C;const e=W.c(26),{clientThreadId:n}=t,s=V(),o=Vn(),a=at(),[i,l]=Ve(n,aHe),c=Kn(n);let d;e[0]!==l?(d=l!=null&&js(l),e[0]=l,e[1]=d):d=e[1];const u=d,{data:f}=YT(u?l:void 0),m=f==null?void 0:f.gizmo;let g;e[2]!==s?(g=(C=st(s))==null?void 0:C.normalizedAccountUserId,e[2]=s,e[3]=g):g=e[3];const p=g;let h;e[4]!==o.pathname?(h=o.pathname.includes("/shared/"),e[4]=o.pathname,e[5]=h):h=e[5];const x=h;let v;e[6]!==p||e[7]!==x||e[8]!==u||e[9]!==o.pathname||e[10]!==o.search||e[11]!==a||e[12]!==m||e[13]!==c||e[14]!==i?(v=()=>{if(!u||x||!c||!m||(i==null?void 0:i.id)==null||p==null||i.id===p)return;const S=$o(c,{project:m,ownerUserId:i.id,accountUserId:p}),E="".concat(o.pathname).concat(o.search);S!==E&&a(S,{replace:!0})},e[6]=p,e[7]=x,e[8]=u,e[9]=o.pathname,e[10]=o.search,e[11]=a,e[12]=m,e[13]=c,e[14]=i,e[15]=v):v=e[15];const y=i==null?void 0:i.id;let b;return e[16]!==p||e[17]!==x||e[18]!==u||e[19]!==o.pathname||e[20]!==o.search||e[21]!==a||e[22]!==m||e[23]!==c||e[24]!==y?(b=[p,x,u,o.pathname,o.search,a,m,c,y],e[16]=p,e[17]=x,e[18]=u,e[19]=o.pathname,e[20]=o.search,e[21]=a,e[22]=m,e[23]=c,e[24]=y,e[25]=b):b=e[25],_.useEffect(v,b),null}function aHe(t){return[t==null?void 0:t.sharedProjectConversationOwner,he.getGizmoId(t)]}function Got(){"use forget";const t=W.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("a",{"data-skip-to-content":"",className:"bg-token-main-surface-primary fixed start-1/2 top-1 z-50 mx-auto w-fit -translate-x-1/2 translate-y-[-100lvh] rounded-full px-3 py-2 focus-visible:translate-y-0 print:hidden",href:"#main",children:r.jsx(j,{id:"thread.skipToContent",defaultMessage:"Skip to content"})}),t[0]=e):e=t[0],e}function Wot(){"use forget";const t=W.c(6),e=V();let n;t[0]!==e?(n=tt(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o,a;t[2]!==e||t[3]!==s?(o=()=>{if(!s)return;const i=gs.getCookie(ps.AuthSessionLoggingId);if(i==null)return;const{flowType:l,connectionType:c}=rHe(e);B.logStructuredEvent(Yq,{authSessionLoggingId:i,flowType:l,connectionType:c}),gs.deleteCookie(ps.AuthSessionLoggingId)},a=[s,e],t[2]=e,t[3]=s,t[4]=o,t[5]=a):(o=t[4],a=t[5]),_.useEffect(o,a)}function rHe(t){const{isSignup:e,connectionType:n}=mM(t);return{flowType:e?l6.ACCESS_FLOW_TYPE_SIGNUP:l6.ACCESS_FLOW_TYPE_LOGIN,connectionType:iHe(n)}}function iHe(t){switch(t){case Xl.Google:return Li.ACCESS_FLOW_CONNECTION_TYPE_GOOGLE;case Xl.Password:return Li.ACCESS_FLOW_CONNECTION_TYPE_PASSWORD;case Xl.Apple:return Li.ACCESS_FLOW_CONNECTION_TYPE_APPLE;case Xl.Microsoft:return Li.ACCESS_FLOW_CONNECTION_TYPE_MICROSOFT;case Xl.Samlp:return Li.ACCESS_FLOW_CONNECTION_TYPE_SAMLP;case Xl.Oidc:return Li.ACCESS_FLOW_CONNECTION_TYPE_OIDC;default:return Li.ACCESS_FLOW_CONNECTION_TYPE_UNSPECIFIED}}function zot(){"use forget";const t=W.c(12),e=V();let n;t[0]!==e?(n=tt(e),t[0]=e,t[1]=n):n=t[1];const s=n,o=ln(),{accountInfo:a}=lHe();let i;t[2]!==(a==null?void 0:a.isOptedOut)||t[3]!==e||t[4]!==s||t[5]!==o?(i=()=>{var u;if(!o||!s)return;if(!o.email&&!o.phone_number){Fe.addError(new Error("User should have either email or phone number, but none are present: ".concat(JSON.stringify(o))));return}if(a!=null&&a.isOptedOut)return;const c=o.email?{email:o.email}:{phoneNumber:(u=o.phone_number)!=null?u:""},d={user:U(w({name:o.name},c),{picture:o.picture,connectionType:mM(e).connectionType,timestamp:Date.now()}),isOptedOut:!1};T$(d)},t[2]=a==null?void 0:a.isOptedOut,t[3]=e,t[4]=s,t[5]=o,t[6]=i):i=t[6];let l;t[7]!==a||t[8]!==e||t[9]!==s||t[10]!==o?(l=[o,s,a,e],t[7]=a,t[8]=e,t[9]=s,t[10]=o,t[11]=l):l=t[11],_.useEffect(i,l)}function lHe(){"use no forget";const[t,e]=_.useState(()=>gs.getCookie(ps.AccountInfo)),n=_.useMemo(()=>{if(!t)return null;try{return JSON.parse(t)}catch(o){return null}},[t]),s=_.useCallback(()=>{n&&(n.isOptedOut=!0,n.user=void 0,T$(n),e(void 0))},[n]);return{accountInfo:n,removeAccount:s}}function T$(t){gs.setCookie(ps.AccountInfo,JSON.stringify(t),{maxAge:720*60*60})}function qot(t,e,n){var a;if(((a=t.getQueryState(e))==null?void 0:a.status)==="success")return n(),()=>{};const s=Zq(e),o=t.getQueryCache().subscribe(i=>{i.query.queryHash===s&&i.query.state.status==="success"&&(n(),o())});return o}export{yye as $,Ol as A,Fl as B,cl as C,RWe as D,Bl as E,QR as F,FZe as G,NWe as H,WGe as I,Fn as J,cI as K,PWe as L,uO as M,Mre as N,hb as O,xa as P,Mr as Q,GGe as R,$h as S,zZe as T,ZZe as U,nWe as V,LWe as W,RZe as X,KZe as Y,vKe as Z,RKe as _,iY as a,Bb as a$,qZe as a0,tKe as a1,oKe as a2,aKe as a3,YZe as a4,dKe as a5,bKe as a6,yKe as a7,wKe as a8,TKe as a9,Oe as aA,wSe as aB,SSe as aC,qQe as aD,_fe as aE,dn as aF,rn as aG,_n as aH,ot as aI,tS as aJ,Ax as aK,rYe as aL,iYe as aM,lt as aN,jet as aO,iGe as aP,utt as aQ,ltt as aR,ytt as aS,ptt as aT,Ctt as aU,We as aV,Dn as aW,Btt as aX,Xv as aY,Eot as aZ,Fo as a_,EKe as aa,cKe as ab,lKe as ac,iKe as ad,cZe as ae,kKe as af,lZe as ag,B2e as ah,Qb as ai,Tye as aj,gI as ak,Yo as al,gP as am,Dg as an,V4e as ao,I4e as ap,gN as aq,uQe as ar,_P as as,fQe as at,Bet as au,yQe as av,xQe as aw,Det as ax,Ar as ay,o0e as az,oI as b,rst as b$,hWe as b0,pWe as b1,lIe as b2,sqe as b3,nqe as b4,oqe as b5,pn as b6,YXe as b7,$tt as b8,Rtt as b9,V1 as bA,Vqe as bB,_Qe as bC,wv as bD,Qf as bE,lHe as bF,FI as bG,Xje as bH,Bd as bI,Pze as bJ,TZe as bK,mO as bL,qd as bM,eU as bN,em as bO,xRe as bP,zre as bQ,yqe as bR,Zre as bS,xb as bT,eie as bU,zqe as bV,Yqe as bW,mP as bX,ett as bY,z0e as bZ,sS as b_,Ptt as ba,Ltt as bb,TM as bc,f2 as bd,GWe as be,pse as bf,tMe as bg,eMe as bh,Ib as bi,EWe as bj,kWe as bk,Bne as bl,Fne as bm,Une as bn,BZe as bo,TWe as bp,_f as bq,NYe as br,NXe as bs,yP as bt,fGe as bu,Ai as bv,Vf as bw,$M as bx,VM as by,Sb as bz,Iqe as c,Qze as c$,Ys as c0,Bx as c1,Gd as c2,NX as c3,OX as c4,Ghe as c5,ks as c6,Pa as c7,IN as c8,Sst as c9,ode as cA,Zd as cB,Ktt as cC,Jtt as cD,p4 as cE,vZe as cF,NU as cG,TXe as cH,MXe as cI,Px as cJ,Vh as cK,Ztt as cL,hR as cM,Xye as cN,Qx as cO,pw as cP,qze as cQ,Wze as cR,kF as cS,QUe as cT,rXe as cU,Dt as cV,oCe as cW,ei as cX,rd as cY,pre as cZ,gb as c_,_i as ca,uhe as cb,Bs as cc,qn as cd,xKe as ce,_Ke as cf,hKe as cg,$ye as ch,IU as ci,v1 as cj,C1 as ck,am as cl,b1 as cm,YZ as cn,_7 as co,k1 as cp,ZMe as cq,Xb as cr,Zv as cs,bxe as ct,NS as cu,gKe as cv,t1 as cw,KP as cx,Ixe as cy,pGe as cz,_He as d,VGe as d$,Tr as d0,nl as d1,Fc as d2,Ds as d3,Nnt as d4,OR as d5,OAe as d6,S$ as d7,sde as d8,UU as d9,Db as dA,Fb as dB,ofe as dC,gHe as dD,tY as dE,nJe as dF,SYe as dG,Afe as dH,XQe as dI,uy as dJ,nn as dK,LSe as dL,i0 as dM,CYe as dN,bYe as dO,eJe as dP,Fd as dQ,F_ as dR,BR as dS,jtt as dT,FAe as dU,BAe as dV,SVe as dW,qAe as dX,bs as dY,jot as dZ,rme as d_,WVe as da,ove as db,zVe as dc,Zo as dd,Xf as de,uk as df,GU as dg,yWe as dh,mI as di,Vne as dj,Ute as dk,CVe as dl,Yv as dm,uGe as dn,$ot as dp,zU as dq,md as dr,Kqe as ds,ej as dt,xx as du,cse as dv,jj as dw,YWe as dx,roe as dy,noe as dz,rY as e,xZe as e$,lp as e0,aA as e1,hf as e2,mGe as e3,$I as e4,mf as e5,zYe as e6,EZe as e7,qYe as e8,wee as e9,fN as eA,oYe as eB,Mfe as eC,uqe as eD,FYe as eE,fqe as eF,tYe as eG,nYe as eH,Ub as eI,IYe as eJ,_se as eK,Lue as eL,LYe as eM,Ife as eN,w1 as eO,PP as eP,Yh as eQ,OYe as eR,_Ge as eS,Bde as eT,WA as eU,ZYe as eV,Hhe as eW,KYe as eX,nZe as eY,bZe as eZ,_Ze as e_,QS as ea,Rge as eb,jue as ec,tde as ed,gqe as ee,Fqe as ef,Rqe as eg,VYe as eh,Zie as ei,Cqe as ej,DZe as ek,Lqe as el,Nqe as em,Nue as en,NP as eo,qie as ep,LZe as eq,xze as er,Tze as es,gme as et,Qie as eu,Kie as ev,Xie as ew,bb as ex,mqe as ey,jP as ez,mHe as f,DKe as f$,che as f0,SZe as f1,wZe as f2,Oge as f3,iZe as f4,sZe as f5,yZe as f6,lGe as f7,cGe as f8,JYe as f9,xHe as fA,yHe as fB,HYe as fC,ym as fD,Pfe as fE,V3e as fF,GKe as fG,dQe as fH,D1 as fI,C4e as fJ,MD as fK,ND as fL,Dde as fM,OM as fN,nQe as fO,XO as fP,Ntt as fQ,sU as fR,LAe as fS,Itt as fT,Ott as fU,Wa as fV,Jf as fW,$Je as fX,sZ as fY,Ome as fZ,OKe as f_,CHe as fa,CZe as fb,Kb as fc,vGe as fd,bGe as fe,CGe as ff,xp as fg,lr as fh,kP as fi,WZe as fj,Op as fk,GZe as fl,WS as fm,uKe as fn,eYe as fo,J3e as fp,Zh as fq,TO as fr,r1 as fs,xP as ft,gve as fu,ude as fv,pve as fw,cve as fx,$l as fy,x1 as fz,Uh as g,IKe as g$,i9e as g0,Cb as g1,mst as g2,_k as g3,jje as g4,yde as g5,ob as g6,att as g7,Hl as g8,Dte as g9,Eet as gA,Wl as gB,vl as gC,Cm as gD,Nj as gE,Uze as gF,lO as gG,g1 as gH,Vd as gI,j5 as gJ,I5 as gK,Bh as gL,cm as gM,Gqe as gN,Mb as gO,Uce as gP,wp as gQ,Eb as gR,Gh as gS,Xh as gT,jR as gU,zu as gV,k2 as gW,jKe as gX,iot as gY,Fs as gZ,Ra as g_,bte as ga,Cy as gb,PR as gc,T1 as gd,mKe as ge,ER as gf,RR as gg,PZe as gh,NZe as gi,Lye as gj,jZe as gk,f3e as gl,Hh as gm,Axe as gn,mce as go,Bqe as gp,HHe as gq,U7e as gr,W7e as gs,k9e as gt,pwe as gu,dwe as gv,ywe as gw,Pve as gx,Ewe as gy,fl as gz,Ea as h,kst as h$,sl as h0,kZe as h1,lse as h2,b4 as h3,m2 as h4,SHe as h5,QA as h6,Ur as h7,HGe as h8,Dl as h9,Sqe as hA,sot as hB,Dot as hC,oot as hD,aot as hE,Mot as hF,Ftt as hG,yet as hH,u6e as hI,ott as hJ,Dtt as hK,Uot as hL,Bot as hM,Qqe as hN,Fot as hO,hot as hP,Aot as hQ,Iot as hR,Aa as hS,Mst as hT,PXe as hU,wwe as hV,aDe as hW,Tst as hX,OU as hY,FHe as hZ,wst as h_,yr as ha,sWe as hb,oWe as hc,XKe as hd,JKe as he,QKe as hf,YKe as hg,qKe as hh,kw as hi,zKe as hj,nbe as hk,sbe as hl,WKe as hm,eQe as hn,tQe as ho,ZKe as hp,KKe as hq,Zs as hr,v$ as hs,Pot as ht,Rot as hu,Oot as hv,eHe as hw,Lot as hx,ave as hy,dve as hz,VY as i,vst as i$,jst as i0,Rst as i1,Lst as i2,Nst as i3,Pst as i4,Ast as i5,p1 as i6,nst as i7,qR as i8,PRe as i9,kXe as iA,Je as iB,$Le as iC,l1e as iD,Cst as iE,Wnt as iF,znt as iG,YYe as iH,gst as iI,Bst as iJ,ist as iK,xst as iL,lst as iM,Ost as iN,iQe as iO,lQe as iP,VLe as iQ,eKe as iR,Vst as iS,pst as iT,hst as iU,_st as iV,Dst as iW,Fst as iX,$st as iY,Xnt as iZ,yst as i_,YR as ia,wnt as ib,Qtt as ic,U1e as id,vOe as ie,_1e as ig,TRe as ih,Hst as ii,oi as ij,FGe as ik,Ust as il,Gst as im,GJe as io,zst as ip,Wst as iq,bst as ir,Gze as is,xet as it,het as iu,UGe as iv,tke as iw,SXe as ix,XP as iy,wXe as iz,IWe as j,Jze as j$,est as j0,tst as j1,Cnt as j2,dst as j3,qst as j4,DTe as j5,Ld as j6,wm as j7,ZA as j8,ht as j9,KJe as jA,Mx as jB,ld as jC,oXe as jD,YF as jE,rI as jF,UAe as jG,L7e as jH,nKe as jI,txe as jJ,XZe as jK,Hxe as jL,Oxe as jM,Vb as jN,n8e as jO,TR as jP,ci as jQ,pHe as jR,EHe as jS,fd as jT,d$ as jU,Uy as jV,RO as jW,PKe as jX,$De as jY,VI as jZ,Xze as j_,Qst as ja,Xst as jb,jO as jc,dot as jd,Gnt as je,cot as jf,lot as jg,rot as jh,YMe as ji,IJe as jj,ap as jk,o7e as jl,_R as jm,oZe as jn,Xtt as jo,kHe as jp,pxe as jq,Jte as jr,ust as js,cst as jt,xce as ju,Uqe as jv,Ab as jw,pN as jx,WMe as jy,ele as jz,jWe as k,gtt as k$,Kze as k0,Zze as k1,Bze as k2,tqe as k3,kre as k4,aqe as k5,rqe as k6,Dze as k7,Fze as k8,ZWe as k9,bze as kA,dze as kB,vze as kC,kze as kD,wze as kE,MWe as kF,iqe as kG,XWe as kH,Oze as kI,$ze as kJ,KWe as kK,lze as kL,Ize as kM,Nze as kN,gze as kO,aze as kP,_ze as kQ,fze as kR,Woe as kS,BYe as kT,$Ye as kU,Lhe as kV,eN as kW,yM as kX,dtt as kY,ftt as kZ,mtt as k_,lqe as ka,dqe as kb,hae as kc,mae as kd,iae as ke,zoe as kf,uae as kg,Tre as kh,Lze as ki,Qoe as kj,yze as kk,cze as kl,ize as km,mze as kn,hze as ko,oze as kp,Aze as kq,jze as kr,Sze as ks,zze as kt,Qj as ku,Mze as kv,Eze as kw,pze as kx,cqe as ky,Cze as kz,qWe as l,T6e as l$,itt as l0,ctt as l1,xtt as l2,vtt as l3,htt as l4,_tt as l5,btt as l6,Stt as l7,QM as l8,df as l9,a7 as lA,UKe as lB,Nye as lC,tU as lD,tJe as lE,Est as lF,sse as lG,V2 as lH,ast as lI,ost as lJ,r8e as lK,bqe as lL,O1e as lM,fm as lN,rA as lO,eA as lP,Ev as lQ,M1e as lR,e5 as lS,XA as lT,jie as lU,AU as lV,XYe as lW,wQe as lX,Xqe as lY,_K as lZ,fX as l_,xr as la,Vze as lb,Not as lc,wtt as ld,zot as le,Wot as lf,Hot as lg,Got as lh,Vot as li,rtt as lj,Jst as lk,CXe as ll,eot as lm,Kst as ln,tot as lo,PSe as lp,_Ye as lq,xYe as lr,vYe as ls,pYe as lt,hYe as lu,Goe as lv,yYe as lw,kYe as lx,wYe as ly,EYe as lz,us as m,s4 as m$,HXe as m0,Ig as m1,zi as m2,Gr as m3,Hu as m4,STe as m5,FB as m6,BB as m7,Yze as m8,SM as m9,r7e as mA,MSe as mB,Utt as mC,Ll as mD,s1 as mE,eqe as mF,Z5e as mG,Za as mH,tle as mI,zr as mJ,Yle as mK,Qle as mL,aWe as mM,iWe as mN,lWe as mO,WXe as mP,_1 as mQ,boe as mR,Soe as mS,qqe as mT,hHe as mU,Oo as mV,QI as mW,Zet as mX,fst as mY,wMe as mZ,det as m_,U5 as ma,B7e as mb,hm as mc,O7e as md,F7e as me,Att as mf,EL as mg,kx as mh,LGe as mi,rne as mj,Vxe as mk,FD as ml,Pqe as mm,sKe as mn,Rme as mo,VMe as mp,Fxe as mq,wxe as mr,AOe as ms,Hze as mt,WQ as mu,Gw as mv,gGe as mw,Jb as mx,Wqe as my,iS as mz,HM as n,Ont as n$,rUe as n0,nr as n1,Ty as n2,XM as n3,m2e as n4,ote as n5,Kf as n6,V5e as n7,Kee as n8,AL as n9,vn as nA,mnt as nB,fnt as nC,W5 as nD,a7e as nE,Uj as nF,g7e as nG,qJe as nH,cEe as nI,xXe as nJ,yXe as nK,Ent as nL,GF as nM,Hnt as nN,FO as nO,Zst as nP,uTe as nQ,snt as nR,$nt as nS,Vnt as nT,Dnt as nU,jHe as nV,Tnt as nW,Mnt as nX,Unt as nY,vi as nZ,QJe as n_,yi as na,j1 as nb,Hd as nc,Pie as nd,qpe as ne,pm as nf,xGe as ng,zx as nh,RL as ni,zn as nj,Et as nk,ste as nl,mQe as nm,qv as nn,J6 as no,jqe as np,iI as nq,rWe as nr,Lj as ns,$3e as nt,VF as nu,_7e as nv,h7e as nw,K7e as nx,pnt as ny,gnt as nz,zWe as o,Dye as o$,Bnt as o0,oA as o1,S6e as o2,EQ as o3,g5 as o4,zHe as o5,Pnt as o6,Lnt as o7,Rnt as o8,ent as o9,FNe as oA,cnt as oB,pot as oC,mot as oD,fot as oE,ynt as oF,rnt as oG,_ot as oH,xot as oI,Wtt as oJ,qtt as oK,_nt as oL,lnt as oM,knt as oN,Gae as oO,dA as oP,N1 as oQ,u5 as oR,L3e as oS,h4 as oT,jme as oU,Khe as oV,gw as oW,o1e as oX,Wye as oY,iw as oZ,aGe as o_,tnt as oa,JZ as ob,MNe as oc,ztt as od,Gtt as oe,vnt as of,hnt as og,xnt as oh,uot as oi,i7e as oj,sNe as ok,hJe as ol,pJe as om,_Je as on,$5 as oo,_et as op,Snt as oq,lY as or,kot as os,int as ot,Ytt as ou,Htt as ov,nnt as ow,dnt as ox,unt as oy,Vtt as oz,vWe as p,p5 as p$,rGe as p0,eye as p1,DGe as p2,fxe as p3,QZe as p4,JZe as p5,Ud as p6,$L as p7,_xe as p8,Mxe as p9,Cve as pA,Ket as pB,Jet as pC,Qet as pD,AQ as pE,Gt as pF,ntt as pG,ttt as pH,stt as pI,Xet as pJ,wWe as pK,mWe as pL,fWe as pM,gWe as pN,SWe as pO,CWe as pP,_We as pQ,xWe as pR,TUe as pS,AUe as pT,NKe as pU,Hf as pV,AKe as pW,qHe as pX,_m as pY,hUe as pZ,LO as p_,bot as pa,yot as pb,vot as pc,dTe as pd,rQe as pe,oQe as pf,sQe as pg,h5 as ph,HKe as pi,BKe as pj,Fet as pk,Het as pl,Ao as pm,$et as pn,Vet as po,Zqe as pp,Get as pq,qet as pr,zet as ps,Uet as pt,g8e as pu,Wet as pv,$b as pw,LKe as px,Yet as py,UYe as pz,bWe as q,AJe as q$,wU as q0,Fnt as q1,TQ as q2,hEe as q3,Aet as q4,got as q5,e$e as q6,XUe as q7,w9 as q8,iZ as q9,Eve as qA,Bp as qB,bnt as qC,Xa as qD,k6e as qE,E6e as qF,ZGe as qG,yne as qH,Jj as qI,jre as qJ,yI as qK,Lme as qL,Qwe as qM,Yt as qN,Kwe as qO,NJe as qP,Od as qQ,b7e as qR,ZJe as qS,AWe as qT,DYe as qU,JJe as qV,YJe as qW,YHe as qX,ZHe as qY,eee as qZ,OQe as q_,SB as qa,eet as qb,tet as qc,net as qd,set as qe,uet as qf,zGe as qg,mEe as qh,oet as qi,vTe as qj,met as qk,get as ql,Met as qm,Ahe as qn,EDe as qo,pM as qp,Zde as qq,Pb as qr,VJe as qs,e2 as qt,e7e as qu,UJe as qv,p7 as qw,Vj as qx,Rze as qy,Tte as qz,qGe as r,AXe as r$,iJe as r0,tee as r1,SJe as r2,lJe as r3,BSe as r4,aJe as r5,sJe as r6,uJe as r7,HJe as r8,LJe as r9,IZe as rA,tXe as rB,eXe as rC,VQe as rD,iXe as rE,aXe as rF,d7 as rG,FJe as rH,DJe as rI,cXe as rJ,dXe as rK,dJe as rL,oJe as rM,CJe as rN,xJe as rO,fJe as rP,cJe as rQ,rJe as rR,BQe as rS,yJe as rT,o7 as rU,Joe as rV,jYe as rW,dke as rX,XF as rY,fXe as rZ,sa as r_,BJe as ra,mJe as rb,vJe as rc,bJe as rd,gJe as re,$Qe as rf,nXe as rg,MZe as rh,IQe as ri,N1e as rj,WQe as rk,HQe as rl,kJe as rm,TJe as rn,wJe as ro,QQe as rp,YQe as rq,sXe as rr,KQe as rs,ZQe as rt,lXe as ru,MJe as rv,EJe as rw,GQe as rx,AZe as ry,hCe as rz,dl as s,bQe as s$,IXe as s0,V7e as s1,Pke as s2,AD as s3,LXe as s4,RXe as s5,jN as s6,Hqe as s7,QXe as s8,qXe as s9,BXe as sA,$Te as sB,Iet as sC,UTe as sD,Pet as sE,Y5 as sF,GHe as sG,eke as sH,EQe as sI,kQe as sJ,SQe as sK,zf as sL,bXe as sM,Pce as sN,jQe as sO,XJe as sP,Hie as sQ,EXe as sR,R6e as sS,HZe as sT,QYe as sU,JHe as sV,QF as sW,vXe as sX,KHe as sY,bm as sZ,ske as s_,ZXe as sa,zXe as sb,$qe as sc,$Xe as sd,GD as se,GXe as sf,Tce as sg,A6 as sh,K5 as si,hQe as sj,WTe as sk,Cet as sl,bet as sm,HTe as sn,XXe as so,UXe as sp,VXe as sq,VTe as sr,JXe as ss,Net as st,vet as su,pQe as sv,BTe as sw,ket as sx,wet as sy,zTe as sz,uWe as t,Cv as t$,CQe as t0,mXe as t1,XX as t2,zd as t3,uXe as t4,RQe as t5,LQe as t6,jv as t7,XHe as t8,zQ as t9,Ret as tA,Oet as tB,Let as tC,lYe as tD,mYe as tE,BWe as tF,UWe as tG,FWe as tH,Hoe as tI,VWe as tJ,bp as tK,use as tL,OWe as tM,Voe as tN,Uoe as tO,Rj as tP,$oe as tQ,mse as tR,D_ as tS,u1 as tT,d1 as tU,YB as tV,yMe as tW,CMe as tX,Pj as tY,moe as tZ,WHe as t_,_Xe as ta,CKe as tb,SKe as tc,WF as td,MQe as te,AQe as tf,di as tg,_4e as th,s4e as ti,DXe as tj,GYe as tk,WYe as tl,cQe as tm,NQe as tn,OXe as to,hXe as tp,pXe as tq,O6e as tr,TQe as ts,Gxe as tt,QHe as tu,zJe as tv,PQe as tw,gXe as tx,_v as ty,vQe as tz,iN as u,bB as u$,PYe as u0,RYe as u1,YGe as u2,xne as u3,H1 as u4,jXe as u5,aYe as u6,lfe as u7,fYe as u8,dYe as u9,IM as uA,nS as uB,uYe as uC,kX as uD,dMe as uE,lMe as uF,So as uG,a1 as uH,JQe as uI,fee as uJ,hw as uK,Mc as uL,pet as uM,p$ as uN,_Te as uO,N7 as uP,aet as uQ,gB as uR,fB as uS,yB as uT,hB as uU,Zp as uV,fet as uW,vB as uX,pB as uY,mB as uZ,eEe as u_,mfe as ua,eS as ub,xfe as uc,cYe as ud,DWe as ue,uze as uf,gse as ug,$We as uh,HWe as ui,gYe as uj,Zf as uk,WWe as ul,gx as um,$Ze as un,Q0e as uo,Sye as up,I4 as uq,LVe as ur,OVe as us,hVe as ut,_Ve as uu,ca as uv,PVe as uw,ll as ux,wZ as uy,EZ as uz,$v as v,SGe as v$,CB as v0,X9e as v1,xB as v2,_B as v3,hTe as v4,ret as v5,MB as v6,yv as v7,uEe as v8,lEe as v9,kqe as vA,_ie as vB,Eqe as vC,Tqe as vD,vqe as vE,Xte as vF,xqe as vG,_qe as vH,pqe as vI,hqe as vJ,Kre as vK,qre as vL,Yre as vM,i8e as vN,lie as vO,wqe as vP,VZe as vQ,Os as vR,RGe as vS,li as vT,OGe as vU,io as vV,K0e as vW,dZe as vX,er as vY,mZe as vZ,gZe as v_,cet as va,pEe as vb,xTe as vc,iEe as vd,kg as ve,fHe as vf,aEe as vg,JGe as vh,Sne as vi,XGe as vj,Cne as vk,tWe as vl,kne as vm,rze as vn,eWe as vo,wne as vp,KGe as vq,vne as vr,QGe as vs,bne as vt,nie as vu,Rg as vv,a0e as vw,e4e as vx,n4e as vy,D7 as vz,Pg as w,Yee as w$,uZe as w0,fZe as w1,Lx as w2,hl as w3,PGe as w4,Nie as w5,W2e as w6,pZe as w7,Aqe as w8,bHe as w9,Ant as wA,Int as wB,jnt as wC,KUe as wD,GEe as wE,SEe as wF,wEe as wG,iet as wH,VD as wI,Yst as wJ,gQe as wK,n6e as wL,qX as wM,mw as wN,pKe as wO,ene as wP,R5 as wQ,L5 as wR,fF as wS,O5 as wT,Oye as wU,fO as wV,Kx as wW,gO as wX,fKe as wY,Zhe as wZ,vxe as w_,hZe as wa,Mqe as wb,wGe as wc,CR as wd,lI as we,ate as wf,nte as wg,yGe as wh,lf as wi,h1 as wj,OHe as wk,nZ as wl,Pd as wm,RHe as wn,LHe as wo,DHe as wp,PHe as wq,NHe as wr,SO as ws,Tet as wt,UQe as wu,Jqe as wv,$2e as ww,TB as wx,mx as wy,Is as wz,pf as x,ktt as x$,UZe as x0,vHe as x1,AHe as x2,MHe as x3,THe as x4,kee as x5,sI as x6,uee as x7,BGe as x8,dGe as x9,dI as xA,B0 as xB,yl as xC,rD as xD,Gl as xE,P1 as xF,Bme as xG,Ume as xH,mA as xI,eGe as xJ,oGe as xK,nGe as xL,zs as xM,iX as xN,_A as xO,ix as xP,sGe as xQ,U6 as xR,HJ as xS,tGe as xT,DJ as xU,B6 as xV,F6 as xW,gJ as xX,Ett as xY,Ttt as xZ,Mtt as x_,wHe as xa,IHe as xb,hGe as xc,z6 as xd,KXe as xe,Ise as xf,Pse as xg,cC as xh,Nse as xi,jse as xj,Tse as xk,Mse as xl,Ase as xm,cWe as xn,tZe as xo,eZe as xp,aQe as xq,dWe as xr,EGe as xs,TGe as xt,IGe as xu,jGe as xv,NGe as xw,kGe as xx,$Ge as xy,_ne as xz,ose as y,WJe as y$,kSe as y0,ESe as y1,om as y2,Zwe as y3,Ywe as y4,PJe as y5,jJe as y6,OJe as y7,JWe as y8,QWe as y9,FQe as yA,Sot as yB,Cot as yC,yRe as yD,x$ as yE,T$e as yF,DQe as yG,g7 as yH,sYe as yI,zQe as yJ,Tu as yK,y2e as yL,FXe as yM,Eu as yN,Lc as yO,qA as yP,UMe as yQ,GR as yR,tie as yS,Cye as yT,rZe as yU,aZe as yV,mp as yW,y1e as yX,MGe as yY,AGe as yZ,mj as y_,TN as ya,ont as yb,ant as yc,qZ as yd,RJe as ye,MYe as yf,fu as yg,ub as yh,tze as yi,hoe as yj,eze as yk,nze as yl,sze as ym,qnt as yn,uN as yo,Knt as yp,pRe as yq,wot as yr,TU as ys,Mv as yt,TYe as yu,Qnt as yv,AYe as yw,Znt as yx,Jnt as yy,Ynt as yz,tr as z,qot as z0,j_ as z1,BHe as z2,UHe as z3,$He as z4,VHe as z5,$ae as z6,Qre as z7,nm as z8,sm as z9,sst as zA,Ist as zB,nFe as zC,MBe as zD,not as zE,w4 as zF,M4 as zG,Tot as zH,Oqe as za,Dqe as zb,Pue as zc,um as zd,OZe as ze,t5 as zf,rKe as zg,MKe as zh,H3e as zi,xm as zj,uve as zk,VO as zl,FKe as zm,$Ke as zn,VKe as zo,vm as zp,Ir as zq,$1 as zr,cke as zs,Rke as zt,lB as zu,jr as zv,J5 as zw,Q9e as zx,J9e as zy,pTe as zz};
//# sourceMappingURL=lm3g1zm00rp6al39.js.map
