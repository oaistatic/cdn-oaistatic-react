const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jxyz1kdkcze5jtww.js","assets/bubexfvksfr7893o.js","assets/dwgk7r4s1fwn35jq.js","assets/i0w6h8cy9aqse20k.js"])))=>i.map(i=>d[i]);
import{j as e,_ as b,r as c,M as _}from"./bubexfvksfr7893o.js";import{cz as T,az as u,aA as g,aB as M}from"./ncw8zw682jinppua.js";import{S as z}from"./gj3272f6kxuxc3jv.js";import{s as C,a as w}from"./lv4xa94hrnn1trhl.js";import{u as L}from"./gfe80db92046bqvj.js";import"./lm3g1zm00rp6al39.js";import"./kf7tqzde2yk57qjr.js";import"./jt2omlt107se63w9.js";const R=u(()=>b(()=>import("./jxyz1kdkcze5jtww.js"),__vite__mapDeps([0,1])),{loading:t=>g(t)}),I=u(()=>b(()=>import("./dwgk7r4s1fwn35jq.js"),__vite__mapDeps([2,1])),{loading:t=>g(t)}),A=u(()=>b(()=>import("./i0w6h8cy9aqse20k.js"),__vite__mapDeps([3,1])),{loading:t=>g(t)}),D=({goPrev:t,goNext:m,setIsPlaying:x,thumbnails:r,selectedSlideIdx:l})=>{const h=r.length<=1||l===0,a=r.length<=1||l===r.length-1,d=r.length<=1;return e.jsxs("div",{className:T("absolute start-1/2 bottom-2 flex -translate-x-1/2 items-center overflow-hidden rounded-2xl border","border-token-border-light bg-token-bg-primary text-token-text-primary","transition-opacity duration-150","can-hover:opacity-0 can-hover:pointer-events-none","can-hover:group-hover:opacity-100 can-hover:group-hover:pointer-events-auto"),children:[e.jsx("button",{onClick:t,disabled:h,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(A,{className:"icon-sm"})}),e.jsx("div",{className:"border-token-border-light h-6 border-s"}),e.jsx("button",{onClick:()=>x(!0),disabled:d,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(R,{className:"size-5"})}),e.jsx("div",{className:"border-token-border-light h-6 border-s"}),e.jsx("button",{onClick:m,disabled:a,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(I,{className:"icon-sm"})})]})},Y=({walnutId:t,isLoading:m,isError:x,isInShareModal:r,errorMessage:l,handleDownloadClick:h})=>{var j,k,N;const{presentationMap:a,setSelectedSlideIdx:d}=L(),o=(j=a[t])==null?void 0:j.presentation,n=(k=a[t])==null?void 0:k.workbook,f=(N=a[t])==null?void 0:N.selectedSlideIdx,[i,v]=c.useState([]),[P,y]=c.useState(!1);if(c.useEffect(()=>{o&&(async()=>{const s=await Promise.all(o.slides.map(p=>C(p,o)));v(s)})()},[o]),c.useEffect(()=>{n&&(async()=>{const s=await Promise.all(n.sheets.map(p=>w(p,20,10,0,n)));v(s)})()},[n]),x||l==="fileTooLarge")return e.jsxs("div",{className:"flex h-[250px] flex-col items-center justify-center gap-2 text-center",children:[e.jsx("div",{className:"text-token-text-primary max-w-[80%] text-xs",children:e.jsx(_,{id:"YMbrlR",defaultMessage:"Preview not available."})}),e.jsx(M,{color:"ghost",size:"small",as:"button",onClick:s=>h(s),children:e.jsx(_,{id:"GjJtUJ",defaultMessage:"Download"})})]});if(m||!o&&!n||!i.length)return e.jsx("div",{className:"flex h-[250px] items-center justify-center gap-2",children:e.jsx("div",{className:"border-token-border-heavy h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"})});const S=()=>{d(t,s=>s>0?s-1:i.length-1)},E=()=>{d(t,s=>s<i.length-1?s+1:0)};return e.jsxs("div",{className:"relative flex flex-col items-center",children:[o&&e.jsx(D,{goPrev:S,goNext:E,setIsPlaying:y,thumbnails:i,selectedSlideIdx:f}),e.jsx("img",{src:i[f],alt:"",className:"m-0 rounded border",style:{background:"#fff"}}),o&&P&&e.jsx(z,{startIndex:0,onExit:()=>y(!1),walnutId:t}),r&&e.jsx("div",{className:"from-token-main-surface-primary pointer-events-none absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent","data-testid":"walnut-mini-player-share-gradient"})]})};export{Y as WalnutMiniPlayer};
//# sourceMappingURL=o14hp1xetur7zx0w.js.map
