import{y as f,o as y,a5 as C,j as P,h,d as _,u as M,r as S,e as E}from"./bubexfvksfr7893o.js";import{aP as g,au as p,dU as L,am as m,od as w,u as F,p as b,dh as T,ak as x,_ as A,a7 as k,kf as v}from"./ncw8zw682jinppua.js";import{i as O,C as R}from"./m53r6qicunpm4sky.js";import{bd as I}from"./lm3g1zm00rp6al39.js";import"./c9xt9bv12kye5x44.js";import"./fwn4bwvyx3h4ty5g.js";import"./l1teaxoievyk0rz1.js";import"./iej0cupg2dqkmejt.js";import"./dlyg1wsrxb1bdujw.js";import"./jmpxwrnri5yjvfye.js";import"./boj7ctg8ggfk4dia.js";function l({intl:o,message:e,navigate:s,toaster:a}){a.warning(o.formatMessage(e),{duration:5}),s("/#pricing")}function N({checkoutFrom:o,checkoutPlanType:e,ctx:s,currentAccount:a,intl:i,navigate:c,queryClient:n,isEligibleForProOnboarding:r,toaster:u}){const t=x(s,"2494348560");A.logPaymentSuccess({plan_type:e}),e===m.PLUS&&k.logEvent("chatgpt_plus_payment_success_page"),a.isFree()?n.invalidateQueries(v()):o?(g.removeItem(p.CheckoutFrom),window.location.href=R[o]):r&&t.get("enable_ca_pro_onboarding_flow",!1)?window.location.href="/payments/success-ind":(c("/"),u.success(i.formatMessage(d.paymentConfirmationToastMessage,{planName:I(e)}),{duration:5}))}function U({checkoutFrom:o,checkoutPlanType:e,currentAccount:s,postCheckoutResult:a,isEligibleForProOnboarding:i}){const c=F(),n=h(),r=_(),u=M(),t=b();return S.useEffect(()=>{switch(a){case"success":return N({checkoutFrom:o,checkoutPlanType:e,ctx:c,currentAccount:s,intl:n,isEligibleForProOnboarding:i,navigate:r,queryClient:u,toaster:t});case"payment_failed":return l({intl:n,toaster:t,navigate:r,message:d.paymentFailedToastMessage});case"other_error":return l({intl:n,toaster:t,navigate:r,message:T.somethingWentWrong})}},[o,e,c,s,n,i,r,a,u,t]),null}const J=f(function(){var t;const[e]=y(),s=g.getItem(p.CheckoutFrom),a=L(),i=C(),c=(t=e.get("plan_type"))!=null?t:m.PLUS,{anyConnectorEnabled:n,isLoading:r}=w({});if(!a||r)return null;const u=!n&&c===m.PRO;return P.jsx(U,{checkoutFrom:O(s)?s:null,checkoutPlanType:c,currentAccount:a,isEligibleForProOnboarding:u,postCheckoutResult:i.postCheckoutResult})}),d=E({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{J as default};
//# sourceMappingURL=m7bit0mu8caa10u6.js.map
