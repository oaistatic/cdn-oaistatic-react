import{q as _,y as m,o as l,b as E,r as d}from"./bubexfvksfr7893o.js";import{R as y,aZ as w,hZ as u,dN as p,h_ as h}from"./ncw8zw682jinppua.js";const A=_({queryKey:["mfaToken"],queryFn:async()=>{try{const t=await y.safePost("/accounts/mfa/user/request_mfa_token_in_house");if(!t||!t.state_token)throw new Error("Failed to fetch MFA token");return t.state_token}catch(t){if(t instanceof w){const e=t.detail;if((e==null?void 0:e.code)==="mfa_email_required"){window.location.href=u(h.ENABLE_MFA_EMAIL_REQUIRED,"/#settings/".concat(p.Account));return}}window.location.href=u(h.ENABLE_MFA_ERROR,"/#settings/".concat(p.Security))}}}),R=m(function(){var i,c,f;const[e]=l(),n=(i=e.get("factor"))!=null?i:"totp",s=(c=e.get("app"))!=null?c:"ChatGPT",o=(f=e.get("redirect_path"))!=null?f:void 0,{data:a}=E(A);return d.useEffect(()=>{if(!a)return;const r=new URLSearchParams({origin_app_name:s,mfa_token:a});o&&r.set("redirect_path",o),n==="passkey"?window.location.href="https://auth.openai.com/passkey-enroll?".concat(r.toString()):window.location.href="https://auth.openai.com/totp_enroll?".concat(r.toString())},[a,s,o,n]),null});export{R as default};
//# sourceMappingURL=l2fekrwursojyzie.js.map
