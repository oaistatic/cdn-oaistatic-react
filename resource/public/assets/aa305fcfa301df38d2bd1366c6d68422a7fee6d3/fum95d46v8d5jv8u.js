var q=Object.freeze,ee=Object.defineProperty,be=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var Q=(s,e,o)=>e in s?ee(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,_=(s,e)=>{for(var o in e||(e={}))ye.call(e,o)&&Q(s,o,e[o]);if(J)for(var o of J(e))Pe.call(e,o)&&Q(s,o,e[o]);return s},te=(s,e)=>be(s,ve(e));var se=(s,e)=>q(ee(s,"raw",{value:q(e||s.slice())}));import{e as de,h as ue,j as l,M as W,c as fe}from"./bubexfvksfr7893o.js";import{_ as K,kZ as pe,u as V,eH as w,cr as je,cw as Ae,p as ge,N as me,bh as he,hy as xe,c8 as _e,c3 as Ue,c5 as Fe,l3 as ke,pw as Le,k4 as Ee,d as Te,c4 as oe,ka as Ce,jb as Ie,px as De,py as Ne,pz as Re,pA as ze,pB as Be,c9 as Oe,pC as Se,pD as $e,j9 as ae,j8 as Z}from"./ncw8zw682jinppua.js";import{fG as ie,fH as He,fI as we,fJ as Ge,fK as le,fL as Ye,fM as Ze,fN as We,fO as Ke,fP as Ve}from"./lm3g1zm00rp6al39.js";import{u as Xe}from"./n2u3q2i5341kdx8j.js";function ct({clientThreadId:s,openFileDialog:e,icon:o,isDisabled:r=!1,isSmall:c=!1,showLabel:a=!1,showUpsell:d=!1,hideBorder:t=!1,highlightTooltip:n=!1,disabledReason:g,currentModelName:v,visualTreatment:x,showMenuForNoAuth:f,modelSupportsImages:i}){const m=ue(),p=pe(),u=V();r=(r||!!p)&&!d;const M=l.jsxs(He,{disabled:r,$showLabel:a,$hideBorder:t,$isSmall:c,$visualTreatment:x,onClick:F=>{if(F.preventDefault(),f||d){K.logNoAuthAttachButtonClicked({location:f?"No auth file upload":"No auth upsell"});return}e()},"aria-label":we(u,m,r,g,v),children:[o,a&&l.jsx(Ge,{})]}),y=l.jsx("div",{className:"flex",children:M});if(f||d){const F=f?l.jsx(Ye,{openFileDialog:e,showMenuForNoAuth:!0,modelSupportsImages:i,clientThreadId:s}):l.jsx(Ze,{location:"attach",statsig_login_event:"chatgpt_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_composer_upsell_signup_button_clicked"}),h=l.jsx(w.BasicTrigger,{asChild:!0,children:y});return l.jsxs(w.Root,{children:[f?l.jsx(le,{clientThreadId:s,rateLimitPopup:p,highlightTooltip:n,disabled:r,children:h}):l.jsx(je,{label:l.jsx(W,{id:"wkpQmi",defaultMessage:"Upload files and more"}),side:"bottom",open:n||void 0,children:h}),l.jsx(w.Portal,{children:l.jsx(w.Content,{alignOffset:-8,side:"bottom",size:"small",className:"radix-side-bottom:flex-col-reverse flex flex-col",children:F})})]})}return l.jsx(le,{disabled:r,clientThreadId:s,rateLimitPopup:p,highlightTooltip:n,children:y})}function qe({code:s,message:e}){switch(s){case ie.FileTooLarge:return re.errorFileTooLarge;case ie.TooManyFiles:return K.logEvent("Uploaded Max Files Error"),re.errorTooManyFiles;default:return e}}const re=de({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Upload files and more"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."}}),ne=de({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function Je(s){if(!s.accept||Object.keys(s.accept).length===0)return[];const e=[];return Object.values(s.accept).forEach(o=>e.push(...o)),e.sort()}function dt(s){"use forget";var X;const e=fe.c(45),{className:o,children:r,clientThreadId:c,currentModelConfig:a,noKeyboard:d}=s,t=ue(),n=ge(),g=V(),v=me(g),x=he(g).flags,f=x==null?void 0:x.includes(xe.NoAuthEnableFileUploads),i=We(c),m=_e();let p;e[0]!==m||e[1]!==i||e[2]!==a?(p=Ue(a,i,m),e[0]=m,e[1]=i,e[2]=a,e[3]=p):p=e[3];const u=p,M=u!==Fe.None,y=ke(Qe),F=Le(u),h=Math.max(0,F-y.length),U=h<=0,{getGizmoId:z}=Ee();let D;e[4]!==c||e[5]!==g?(D=ze(g,c),e[4]=c,e[5]=g,e[6]=D):D=e[6];const N=Te(D),k=Array.isArray(N)&&N.length>0;let j;e[7]!==i||e[8]!==a?(j=oe(a,i),e[7]=i,e[8]=a,e[9]=j):j=e[9];let A;e[10]!==i||e[11]!==a?(A=(X=Ce(a,i))==null?void 0:X.attachments,e[10]=i,e[11]=a,e[12]=A):A=e[12];const{handleFileAccepted:L}=tt(t,u,j,"drag",z,A,k?N:void 0),B=pe(),Me=Ie();let O;e:{if(Me){O=Be;break e}else if(!v&&f){let H;e[13]!==i||e[14]!==a?(H=oe(a,i),e[13]=i,e[14]=a,e[15]=H):H=e[15],O=H;break e}let b;e[16]!==i||e[17]!==a?(b=De(a,i),e[16]=i,e[17]=a,e[18]=b):b=e[18],O=b}const E=Ne(O),G=!M||U||B!=null;let T;e[19]!==t||e[20]!==n||e[21]!==u?(T=b=>et(b,t,n,u),e[19]=t,e[20]=n,e[21]=u,e[22]=T):T=e[22];let S;e[23]!==E||e[24]!==L||e[25]!==d||e[26]!==h||e[27]!==G||e[28]!==T?(S=_({maxFiles:h,disabled:G,noClick:!0,noKeyboard:d,onDropAccepted:L,onDropRejected:T,multiple:!0,maxSize:Re},E),e[23]=E,e[24]=L,e[25]=d,e[26]=h,e[27]=G,e[28]=T,e[29]=S):S=e[29];const{getRootProps:R,isDragActive:Y}=Xe(S);let C,P,I;if(e[30]!==r||e[31]!==o||e[32]!==E||e[33]!==R||e[34]!==Y){const b=Je(E);e[38]!==o||e[39]!==R?(P=R({className:o}),e[38]=o,e[39]=R,e[40]=P):P=e[40],I=r,C=Y&&l.jsxs(st,{children:[l.jsx(Ke,{}),l.jsx("h3",{children:l.jsx(W,_({},ne.dragInstructions))}),l.jsx("h4",{className:"w-2/3 text-center",children:b.length>0?b.join(", "):l.jsx(W,_({},ne.dragAllAccepted))})]}),e[30]=r,e[31]=o,e[32]=E,e[33]=R,e[34]=Y,e[35]=C,e[36]=P,e[37]=I}else C=e[35],P=e[36],I=e[37];let $;return e[41]!==C||e[42]!==P||e[43]!==I?($=l.jsxs("div",te(_({},P),{children:[I,C]})),e[41]=C,e[42]=P,e[43]=I,e[44]=$):$=e[44],$}function Qe(s){return s.files}function et(s,e,o,r){const{errors:c}=s[0],a=Se(r);c.forEach(d=>{const t=qe(d);typeof t=="string"?o.danger(t,{hasCloseButton:!0,loggingTitle:"File upload error",loggingDescription:t,toastId:"file_upload_error"}):o.danger(e.formatMessage(t,{size:$e,maxNum:a}),{hasCloseButton:!0,loggingTitle:t.defaultMessage||"File upload error",loggingDescription:t.defaultMessage||"File upload error",toastId:"file_upload_error"})})}function tt(s,e,o,r,c,a,d){"use forget";const t=fe.c(20),n=V(),g=he(n).flags,v=ge(),x=Oe();let f;t[0]!==n?(f=me(n),t[0]=n,t[1]=f):f=t[1];const i=!f,m=d!=null?d:void 0,p=g==null?void 0:g.includes(xe.NoAuthEnableFileUploads);let u;t[2]!==n?(u=Ve(n,!0),t[2]=n,t[3]=u):u=t[3];const{persistFilesToLibrary:M,doubleWriteFilesToLibrary:y}=u;let F;t[4]!==a||t[5]!==m||t[6]!==c||t[7]!==s||t[8]!==y||t[9]!==M||t[10]!==i||t[11]!==o||t[12]!==p||t[13]!==x||t[14]!==v||t[15]!==r||t[16]!==e?(F=async(z,D)=>{K.logEvent("Upload File",{client:"web",eventSource:r,intent:e.toString()});const N=c!=null?await c():void 0;z.length>0&&z.forEach(k=>{const j=_(_({gizmoId:N},p&&{isUnauthenticated:i}),m&&m.length>0?{contextScopes:m}:{}),A=[x,ae(k),k,e,o,s,v,j,a];if(e===Fe.Retrieval){let L=Promise.resolve(),B=Promise.resolve();M&&(B=Z.uploadFile(x,"".concat(ae(k),":lib"),k,e,o,s,v,j,a,void 0,!0,!0)),(y||!M)&&(L=Z.uploadFile(...A,void 0,!1,M)),Promise.all([L,B])}else Z.uploadFile(...A)})},t[4]=a,t[5]=m,t[6]=c,t[7]=s,t[8]=y,t[9]=M,t[10]=i,t[11]=o,t[12]=p,t[13]=x,t[14]=v,t[15]=r,t[16]=e,t[17]=F):F=t[17];const h=F;let U;return t[18]!==h?(U={handleFileAccepted:h},t[18]=h,t[19]=U):U=t[19],U}var ce;const st=Ae.div(ce||(ce=se(['absolute z-50 inset-0 flex gap-2 flex-col justify-center items-center after:contents-[""] after:absolute after:opacity-80 after:z-[-1] after:bg-token-main-surface-primary after:inset-0'])));export{st as D,dt as F,ct as P,Je as g,et as h,tt as u};
//# sourceMappingURL=fum95d46v8d5jv8u.js.map
