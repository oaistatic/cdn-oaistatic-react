const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lm3g1zm00rp6al39.js","assets/bubexfvksfr7893o.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/conversation-small-lq38g8zw.css","assets/n8rdfg2xatgkqad1.js"])))=>i.map(i=>d[i]);
import{h as M,j as e,r as u,_ as Y,e as Te}from"./bubexfvksfr7893o.js";import{mD as ke,a$ as Ae,ep as De,mE as Re}from"./lm3g1zm00rp6al39.js";import{O as He}from"./eii6zxu7kogjx11x.js";import{p as Le,b as Ce}from"./mj32z5vcfl3ugvj5.js";import{Z as Oe}from"./ce3hgmw4iyyhicud.js";import{u as Be,i as Pe}from"./l4pcm542yc2tenou.js";import{d as ie,dS as g,cz as C,sz as Ge,az as q,cr as Ee,aA as ee,hB as oe,rk as Ve,pX as Ue,dQ as $e,cn as ze,d$ as ve,lq as Fe}from"./ncw8zw682jinppua.js";function Ze(t){const{doc:o,selection:n}=t,{$from:c,$to:d}=n,{pos:h}=c,{pos:m}=d,a=o.textBetween(h,m);try{const r=Le(o,c),x=Ce(o,d);return{sourceFrom:r,sourceTo:x,from:h,to:m,selectedText:a}}catch(r){ke.logError("Getting source selection",r)}return{selectedText:a,from:h,to:m}}const L={type:"spring",bounce:.2,duration:.5},Xe=q(()=>Y(()=>import("./lm3g1zm00rp6al39.js").then(t=>t.zx),__vite__mapDeps([0,1,2,3,4])),{loading:t=>ee(t)}),Ie=({title:t,icon:o,size:n,opacity:c,initialHeight:d=n,initialScale:h=1,onClick:m,isConfirming:a,isSmall:r,onSubmit:x})=>{const p=M(),E=Ge(),[I,f]=u.useState(!1),b=ie(oe),O=()=>{f(!0)},N=()=>{f(!1)},S=e.jsx(g.div,{initial:{scale:h,opacity:0},animate:{scale:1,opacity:1,transition:{type:"spring",bounce:.24,duration:.52}},exit:{scale:.5,opacity:0,transition:{type:"spring",bounce:.24,duration:.52,opacity:{duration:.1}}},whileHover:{scale:1.15},transition:L,children:e.jsx(g.div,{className:"flex cursor-pointer items-start overflow-hidden",initial:{width:n,height:n},animate:{width:n,height:n},transition:L,onMouseEnter:O,onMouseLeave:N,children:a?e.jsx(g.button,{className:"m-auto flex h-8 w-8 items-center justify-center rounded-full bg-black text-center dark:bg-white",initial:{opacity:0,scale:.64},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.64},transition:{type:"spring",duration:.32,bounce:.14},onClick:x,children:e.jsx(Xe,{className:C("animate-pulsing text-white dark:text-black",r?"icon":"icon-lg")})}):o})});return e.jsx(g.div,{role:"button",onClick:m,initial:{height:d},animate:{height:n,opacity:a?1:c!=null?c:.52},exit:{height:0},whileHover:{opacity:1},transition:L,children:b?e.jsx(Ee,{open:E?!!(a||I):!1,label:p.formatMessage(t),side:"left",contentClassName:"pointer-events-none",children:S}):S})};function be({accelerator:t,size:o,opacity:n,onClick:c,onSubmit:d,disableHeightAnimation:h=!1,disableLabel:m=!1,isCancelledScrubber:a=!1,isSmall:r=!1,isConfirming:x}){const{title:p,icon:E}=t,I=ie(oe),f=M();return e.jsxs("div",{className:"relative",children:[!I&&!m&&e.jsx(g.div,{className:"text-token-text-secondary absolute end-full top-1/2 w-[160px] -translate-y-1/2 transform pe-4 text-end text-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:f.formatMessage(p)}),e.jsx(Ie,{size:o,onClick:c,opacity:n,initialHeight:a||h?"auto":0,initialScale:a?.88:.5,title:p,isSmall:r,isConfirming:x,onSubmit:d,icon:e.jsx(E,{className:C("text-token-primary m-auto",r?"icon":"icon-lg")})})]})}function Ke({title:t,onSubmit:o,icon:n}){const c=M(),d=n;return e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:o,className:"text-token-text-secondary hover:text-token-text-primary flex aspect-square w-20 max-w-20 min-w-20 cursor-pointer flex-col items-center rounded-2xl p-3 transition-colors hover:bg-gray-100/75 dark:hover:bg-gray-700",children:[e.jsx(d,{className:"icon-2xl m-auto"}),e.jsx("div",{className:"line-clamp-1 w-16 max-w-16 overflow-hidden text-center text-xs",children:c.formatMessage(t)})]})}function Qe({grid:t,onSubmit:o,title:n}){const c=M();return e.jsxs("div",{className:"flex h-full flex-col content-center gap-y-4 overflow-x-hidden px-3 py-4",children:[e.jsx("div",{className:"text-token-primary mt-1 text-center font-medium",children:n}),e.jsx("div",{className:"flex-auto",children:e.jsx("div",{className:"grid grid-cols-2 gap-1",children:t.map((d,h)=>e.jsx(Ke,{title:d.title,icon:d.icon,onSubmit:m=>{const a=t[h];"prompt"in a&&(o==null||o(m,c.formatMessage(a.prompt)))}},h))})})]})}const Je=q(()=>Y(()=>import("./lm3g1zm00rp6al39.js").then(t=>t.zx),__vite__mapDeps([0,1,2,3,4])),{loading:t=>ee(t)});function We({title:t,onClick:o,isConfirming:n,onSubmit:c,isAnyItemConfirmed:d}){const h=M();return e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:o,className:C("flex-item my-1 flex min-w-40 cursor-pointer items-center overflow-hidden rounded-2xl py-2 ps-4 pe-2 font-medium text-clip whitespace-nowrap transition-colors hover:bg-gray-100/75 dark:hover:bg-gray-700",{"bg-gray-100/50 dark:bg-gray-700/50":n,"text-token-text-secondary hover:text-token-text-primary":!n&&d}),children:[e.jsx("div",{className:"flex-auto",children:h.formatMessage(t)}),e.jsx(g.button,{className:C("ms-3 h-6 w-6 rounded-full bg-black text-center dark:bg-white",{"pointer-events-none invisible":!n}),initial:{opacity:0,scale:.64},animate:{opacity:n?1:0,scale:n?1:.64},transition:{type:"spring",duration:.32,bounce:.14},onClick:c,children:e.jsx(Je,{className:"icon-lg text-white dark:text-black"})})]})}function Ye({menu:t,onConfirm:o,onSubmit:n}){const[c,d]=u.useState(!1),h=M();return e.jsx("div",{className:"h-full flex-col content-center overflow-x-hidden px-3",children:t.map((m,a)=>e.jsx(We,{title:m.title,isConfirming:c===a,isAnyItemConfirmed:c!==!1,onClick:()=>{d(a),o==null||o()},onSubmit:r=>{const x=t[a];"prompt"in x&&(n==null||n(r,h.formatMessage(x.prompt)))}},"menu-item-".concat(m.title)))})}const qe=t=>"isCancel"in t&&t.isCancel,et=q(()=>Y(()=>import("./lm3g1zm00rp6al39.js").then(t=>t.zx),__vite__mapDeps([0,1,2,3,4])),{loading:t=>ee(t)}),we=280;function tt(t,o,n){if(n===o)return 1;const c=(t-o)/(n-o);return Ae(c,0,1)}function nt({size:t,acceleratorScrubber:o,onConfirm:n,onCancel:c,onSubmit:d,onDragStart:h,isConfirming:m}){const{icon:a}=o,r="scrub"in o?o.scrub:[],x=6,p=t-x*2,E=M(),I=u.useRef(null),f=u.useRef(null),[b,O]=u.useState(r?Math.floor(r.length/2):0),N=Math.round(b),S=u.useRef(b),w=r?E.formatMessage(r[N].title):null,T=Ve(0);Ue(T,"change",_=>{const Z=-137+p/2,D=(we-x)/2-p/2,R=tt(_,Z,D)*(r?r.length-1:0);S.current=R,O(R)});const A=()=>{if(!r||qe(r[N])||m)return c==null?void 0:c();r&&(n==null||n())},B=_=>{_.preventDefault(),!(!r||!m||!("prompt"in r[N]))&&(d==null||d(_,E.formatMessage(r[N].prompt)))};return e.jsx(g.div,{ref:I,className:"start-items relative z-20 flex w-full",style:{top:x,height:we-x*2},children:e.jsx(g.div,{drag:"y",ref:f,dragConstraints:I,dragMomentum:!1,dragElastic:0,className:C("border-token-border-default m-auto rounded-full border shadow-md transition-colors",m?"cursor-pointer bg-black dark:bg-white":"bg-token-main-surface-primary cursor-grab"),style:{y:T,width:p,height:p},onDragStart:h,onDragEnd:A,children:e.jsx(Ee,{open:!0,label:w,side:"right",children:e.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-hidden",children:m?e.jsx(et,{onClick:B,className:"icon-xl animate-pulsing text-white dark:text-black"}):e.jsx(a,{className:"text-token-primary icon-lg m-auto"})})})})})}const st=q(()=>Y(()=>import("./n8rdfg2xatgkqad1.js"),__vite__mapDeps([5,1])),{loading:t=>ee(t)}),W=280,rt=235,je=1250,it=56,ot=32,at=28;function ct({top:t}){return e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute start-1/2 m-auto h-1 w-1 -translate-x-1/2 rounded-full bg-gray-300",style:{top:t}})}function gt({bottom:t=20,right:o=20,isEmbeddedInPromptArea:n=!1,disableHint:c=!1,disableOverlay:d=!1,onCancel:h,onExpandedChange:m,onSubmit:a,isRequestActive:r=!1,isVisuallyHidden:x=!1,actions:p}){const[E,I]=u.useState(!1),[f,b]=u.useState(!c&&!r),[O,N]=u.useState(!0),[S,w]=u.useState(null),[T,A]=u.useState(!1),[B,_]=u.useState(!1),[Z,D]=u.useState(!1),[v,R]=u.useState(null),[V,te]=u.useState(null),[U,ne]=u.useState(null),ae=!O,ce=$e(),X=n&&!f,i=X?ot:it,le=M(),ue=ie(oe),Ne=Be(),j=u.useRef(null),k=r||E,$=r&&!f&&O;u.useEffect(()=>{f&&!B&&_(!0),m==null||m(f)},[f,B]),u.useEffect(()=>{T&&!k&&!v&&(j.current!=null&&clearTimeout(j.current),b(!0)),!T&&!k&&!v&&(j.current!=null&&clearTimeout(j.current),j.current=window.setTimeout(()=>{b(!1),w(null),D(!1)},je))},[T,k,v,f]),u.useEffect(()=>{if(r){w(null);return}I(!1),!B&&!c&&(_(!0),b(!0),j.current!=null&&clearTimeout(j.current),j.current=window.setTimeout(()=>{b(!1),w(null),D(!1),_(!0)},je))},[r,c,B]);const se=s=>{w(s)},K=(s,l,y)=>{A(!1),I(!0),b(!1),w(null),D(!1),R(null),te(null),ne(null);const J=Ne(),ye=(G,F)=>{ke.logButtonClick(Re.ACCELERATOR,{action:{action:y.action,id:y.id,title:y.title},prompt:l,sourceFrom:G,sourceTo:F})};if(J&&Pe(J)){const{state:G}=J,{sourceFrom:F,sourceTo:re}=Ze(G);if(ye(F,re),F==null||re==null){a==null||a(s,null,l,y);return}a==null||a(s,{start:F,end:re},l,y);const Me=G.tr.setSelection(Fe.create(G.doc,G.selection.anchor));J.dispatch(Me);return}ye(),a==null||a(s,null,l,y)},Q=p[0],Se=p.slice(1),z=!!v&&p.find(({id:s})=>s===v),H=!!V&&p.find(({id:s})=>s===V),P=!!U&&p.find(({id:s})=>s===U),de=(s,l)=>{if(ae)return;if(!T){A(!0);return}const{id:y}=l;if("scrub"in l)return R(y);if("menu"in l)return te(y);if("grid"in l)return ne(y);se(y)},me=(s,l)=>{ae||"prompt"in l&&K(s,le.formatMessage(l.prompt),l)},_e=Se.map(s=>{if(!f)return null;const{id:l}=s;return e.jsx(be,{accelerator:s,isConfirming:l===S,isCancelledScrubber:Z,size:i,onClick:y=>de(y,s),onSubmit:y=>me(y,s)},l)}),fe=u.useRef(null);u.useEffect(()=>{const{current:s}=fe;if(s)return ze(document,{mousedown:({target:l})=>{l instanceof HTMLElement&&!s.contains(l)&&(b(!1),w(null),D(!1),A(!1),R(null),te(null),ne(null))}})},[v,V,U]);const he=Math.round(W/i)*2,xe=[];let pe=0;for(let s=0;s<he-1;s++)pe+=W/he,xe.push(e.jsx(ct,{top:pe}));const ge=e.jsx(g.div,{ref:fe,initial:{opacity:0,scale:.85,borderRadius:i/2},exit:{opacity:0,borderRadius:i/2},className:C("border-token-border-default absolute overflow-visible border transition-colors select-none",Oe.accelerators,{"pointer-events-none":x,"bg-token-main-surface-primary shadow-xl":f&&!v&&!r,"bg-token-main-surface-primary shadow-lg":!f&&!v&&!r&&!n,"bg-token-main-surface-primary border-transparent shadow-sm":!f&&!v&&!r&&n,"bg-token-main-surface-secondary border-transparent":v&&!r,"bg-token-main-surface-primary":r&&!$,"bg-black! text-white!":!ce&&$,"bg-white! text-black!":ce&&$}),style:{right:o,bottom:t},animate:{scale:k||$||E?.85:1,opacity:x?0:1,borderRadius:V&&H&&!k||U&&P&&!k?at:i/2},onHoverStart:()=>{j.current!=null&&clearTimeout(j.current),A(!0)},onHoverEnd:()=>A(!1),children:e.jsx(ve,{children:V&&H&&"menu"in H&&!k?e.jsx(g.div,{initial:{height:i,width:i},transition:L,animate:{height:W,width:"auto"},exit:{height:i,width:i},children:e.jsx(Ye,{isConfirming:S===H.id,onConfirm:()=>se(H.id),onSubmit:(s,l)=>K(s,l,H),menu:H.menu})}):U&&P&&"grid"in P&&!k?e.jsx(g.div,{initial:{height:i,width:i},transition:L,animate:{height:rt,width:"auto"},exit:{height:i,width:i},children:e.jsx(Qe,{title:le.formatMessage(P.title),onSubmit:(s,l)=>K(s,l,P),grid:P.grid})}):v&&z&&!k?e.jsxs(g.div,{initial:{height:i,width:i},transition:L,animate:{height:W,width:i},exit:{height:i,width:i},onClick:()=>{w(null)},children:[e.jsx(nt,{onDragStart:()=>w(null),isConfirming:S===z.id,onConfirm:()=>se(z.id),onSubmit:(s,l)=>K(s,l,z),onCancel:()=>{R(null),D(!0)},size:i,acceleratorScrubber:z}),xe]}):e.jsxs(g.div,{className:"flex flex-col",initial:n?!1:{height:i,width:i},transition:L,animate:{height:f?i*p.length:i,width:i},exit:{height:i,width:i},onAnimationComplete:()=>N(!0),onAnimationStart:()=>N(!1),children:[e.jsx(ve,{children:_e}),e.jsx("div",{className:"flex items-center",style:{width:i,height:i},children:k?$?e.jsx(Ie,{title:lt.cancel,icon:e.jsx(st,{className:C("animate-pulsing m-auto shrink-0",X?"h-6 w-6":"h-10 w-10")}),isSmall:X,opacity:1,size:i,onClick:()=>{w(null),h==null||h()}}):e.jsx(De,{size:20,className:"text-token-text-secondary m-auto"}):e.jsx(be,{disableHeightAnimation:n,disableLabel:ue||!f,isCancelledScrubber:Z,accelerator:Q,isConfirming:S===Q.id,opacity:f?void 0:1,isSmall:X,size:i,onSubmit:s=>me(s,Q),onClick:s=>de(s,Q)})})]})})});return d||ue?ge:e.jsxs(e.Fragment,{children:[f&&e.jsx(He,{zIndexKey:"acceleratorsOverlay",className:"bg-white/95 dark:bg-black/85"}),ge]})}const lt=Te({cancel:{id:"Hov840",defaultMessage:"Cancel"}});export{gt as D,Ze as g};
//# sourceMappingURL=bo0p7vuujjmng48f.js.map
