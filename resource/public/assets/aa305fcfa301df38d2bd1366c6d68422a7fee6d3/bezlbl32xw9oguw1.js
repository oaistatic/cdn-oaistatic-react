const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/flbnckm3frbq9gm0.js","assets/bubexfvksfr7893o.js","assets/g639ca26731n6db6.js","assets/fy4l2kpcbjlox0ps.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/lm3g1zm00rp6al39.js","assets/conversation-small-lq38g8zw.css","assets/cxp76v1gv71u5chl.js","assets/ha3yj3u2f1w16goy.js","assets/ansi-1f6vhsjh.css","assets/fyy6o8kal64rtpos.js","assets/o0dw43fppqvaf7ws.js","assets/n117ifjno76hbo3f.js","assets/gqlpgmzguho9n5oh.js","assets/h1em0bjkpkjv8ykw.js","assets/m609xwboj0zo059y.js","assets/eifqzljcxkeg8zns.js","assets/o6p9t02t81236kdb.js","assets/hu1bt0oauegdhua6.js","assets/e5q3f3k67x71csb7.js","assets/lptwpbjabrvjmhsj.js","assets/nnaau44w7pxfjjn3.js","assets/lv98i5lrm8g24nlg.js","assets/ffjw65gjnc6j0nz8.js","assets/ffvjxtmoqooghm1t.js","assets/eqqsnl6kprwt6kvn.js","assets/iqtpdwh2n8o5iyd7.js","assets/ckeauhcg4pu33xfw.js","assets/n630qnacd2oui4py.js","assets/wham-task-push-diff-dropdown-e50ctjec.css","assets/m214aojas5i8u5ss.js","assets/k3w19w5sa48fujqs.js","assets/iv5xwnwraxd9v7zq.js","assets/nzkkesm2p4dklarf.js","assets/icif99f9c6x3iitu.js","assets/f1ucdf2dx4ztfnd4.js","assets/kou7k14ueo6peaoq.js","assets/gfhyoobo4q8q2pzd.js","assets/n8w61inav9kre7iu.js","assets/i8ns2k0nyu6k62qc.js","assets/owg1t5lbjzwpi0hd.js","assets/gc5zntv10x5pyl7r.js","assets/knfzy5vszhnec9ql.js","assets/hyub38ofpwemwztz.js","assets/okzsq1aji2s9p1ex.js","assets/jexchgabyqje5te2.js","assets/kdezcnbv0vjez4rk.js"])))=>i.map(i=>d[i]);
var Dt=Object.defineProperty,Rt=Object.defineProperties;var Ot=Object.getOwnPropertyDescriptors;var st=Object.getOwnPropertySymbols;var Wt=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable;var ot=(t,e,o)=>e in t?Dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,je=(t,e)=>{for(var o in e||(e={}))Wt.call(e,o)&&ot(t,o,e[o]);if(st)for(var o of st(e))Bt.call(e,o)&&ot(t,o,e[o]);return t},Se=(t,e)=>Rt(t,Ot(e));import{r as h,j as a,_ as fe,c as Ae,h as me,M as le,d as et,l as gt,i as Ce,b as qt,u as qe}from"./bubexfvksfr7893o.js";import{aY as Ht,gj as Ut,aV as Oe,aW as Ye,a$ as Vt,aH as $t,de as Te,h9 as Qt,ha as Kt,B as zt,E as Gt,K as $e,al as Yt,ip as Tt,wi as Jt,wj as Xt,fS as Zt,d_ as At}from"./lm3g1zm00rp6al39.js";import{e$ as pt,cz as _e,e7 as ea,ea as ta,az as ge,aA as ve,aB as be,bE as aa,h$ as sa,aP as it,dS as Me,d$ as xt,aC as oa,u as wt,p as Pe,eF as ia,kj as ra,J as Re,u8 as na,jC as la,R as tt,ct as He,dU as _t,vO as da,cv as ca,cr as bt,e8 as ua,au as ma,nO as ha}from"./ncw8zw682jinppua.js";import{M as Qe,a as Je,W as fa,D as ga,f as pa,P as xa,p as Ee,b as wa,c as rt,d as _a}from"./fy4l2kpcbjlox0ps.js";import{a0 as Le,r as vt,y as ba,a1 as va,W as ue,d as Xe,w as Ze,g as we,k as We,a2 as Ie,l as ya,E as ka,b as Ma}from"./o0dw43fppqvaf7ws.js";import{u as Ca}from"./m214aojas5i8u5ss.js";import{T as yt,a as kt,b as Mt}from"./iqtpdwh2n8o5iyd7.js";import{u as Ct}from"./k3w19w5sa48fujqs.js";import{W as Be}from"./iv5xwnwraxd9v7zq.js";import{JsonViewer as Pa}from"./nnaau44w7pxfjjn3.js";import{i as ja,W as Sa}from"./nzkkesm2p4dklarf.js";import{u as Na,g as La,N as Ia}from"./i8ns2k0nyu6k62qc.js";import{W as nt,O as Fa}from"./gc5zntv10x5pyl7r.js";import{s as Ke}from"./n630qnacd2oui4py.js";import{s as De,B as Ea}from"./knfzy5vszhnec9ql.js";import{W as Da}from"./e5q3f3k67x71csb7.js";const Pt=h.createContext(null);function qs({value:t,children:e}){return a.jsx(Pt.Provider,{value:t,children:e})}function Fe(){const t=h.useContext(Pt);if(!t)throw new Error("useWhamTaskPageContext must be used within its provider");return t}function Ra(t){var n,c;const e={},o={};let s;for(const d of t)Le(d)?d.previous_turn_id?o[d.previous_turn_id]=d:s=d:d.previous_turn_id&&((c=e[n=d.previous_turn_id])!=null?c:e[n]=[]).push(d);if(!s)return null;const r=d=>{var l;const u=(l=e[d.id])!=null?l:[],i={};for(const p of u){const v=o[p.id];v&&(i[p.id]=r(v))}return{userTurn:d,assistantTurns:u,children:i}};return r(s)}function Oa(t){for(let e=t.length-1;e>=0;e--){const o=t[e];if(Le(o)&&o.previous_turn_id)return o.previous_turn_id}return null}function Wa(t,e){var r,n,c,d;if(!t)return[];const o=[];if(e){const u=l=>{for(const p of l.assistantTurns){if(p.id===e)return[{node:l,activeId:p.id}];const v=l.children[p.id],_=v&&u(v);if(_)return[{node:l,activeId:p.id},..._]}return null},i=u(t);i&&o.push(...i)}o.length===0&&o.push({node:t,activeId:(n=(r=t.assistantTurns[0])==null?void 0:r.id)!=null?n:null});let s=o[o.length-1];for(;s!=null&&s.activeId;){const u=s.node.children[s.activeId];if(!u)break;o.push({node:u,activeId:(d=(c=u.assistantTurns[0])==null?void 0:c.id)!=null?d:null}),s=o[o.length-1]}return o}function Ba(t){return t==null?void 0:t.assistantTurns.some(e=>vt(e.turn_status))}function qa({className:t,focusedAssistantTurn:e,currentTab:o,permissions:s,task:r,turns:n,containerHeight:c,onClickFile:d,setFocusedAssistantTurnId:u,onTabChange:i,latestTurnRef:l,latestUserMessageRef:p,hasComments:v,clearComments:_,showFullDiff:w,loadingTurnMapping:g,reserveComposerSpace:C=!0}){var $;h.useEffect(()=>{if(!e){const P=Oa(n);P&&u(P)}},[e,n,u]);const b=h.useMemo(()=>Ra(n),[n]),f=h.useMemo(()=>{var P;return Wa(b,(P=e==null?void 0:e.id)!=null?P:null)},[b,e==null?void 0:e.id]),k=f.length-1,R=f.slice(0,k),S=pt(f),E=C&&Ba(S==null?void 0:S.node),{data:m}=ba(r==null?void 0:r.id),L=h.useMemo(()=>{var Z,ie,O;if(!g||!(m!=null&&m.current_assistant_turn))return null;const P=m.current_assistant_turn,N=((ie=(Z=P.sibling_turn_ids)==null?void 0:Z.length)!=null?ie:0)+1,H=(O=P.attempt_placement)!=null?O:0,V=Array.from({length:N},(I,W)=>W===H?P.id:"placeholder-".concat(W)),D={};return V.forEach((I,W)=>D[I]=W),{attemptIds:V,idToIdxMap:D}},[g,m==null?void 0:m.current_assistant_turn]);return a.jsx("div",{className:_e("relative flex h-full w-full flex-col",t),children:a.jsx("div",{className:"flex h-fit min-h-full shrink-0 flex-col gap-6 pt-6 text-sm",children:g&&r&&(m!=null&&m.current_user_turn)&&(m!=null&&m.current_assistant_turn)?a.jsxs("div",{ref:l,className:_e("flex min-h-full shrink-0 flex-col gap-6",E&&"pb-36"),style:{minHeight:c-24},children:[a.jsx("div",{className:"text-token-text-secondary flex w-full items-center justify-center gap-2",children:a.jsx(ea,{className:"text-xl"})}),a.jsx(Qe,{isLatest:!0,task:r,userTurn:m.current_user_turn,assistantTurns:[m.current_assistant_turn],selectedAssistantId:m.current_assistant_turn.id,focusedAssistantTurn:m.current_assistant_turn,setFocusedAssistantTurnId:u,onClickFile:d,currentTab:o,onTabChange:i,permissions:s,startOpen:!0,hasComments:v,clearComments:_,showFullDiff:w,attemptIdsOverride:L==null?void 0:L.attemptIds,idToIndexMapOverride:L==null?void 0:L.idToIdxMap,latestUserMessageRef:p})]}):a.jsxs(a.Fragment,{children:[R.length>0&&a.jsx("div",{className:"flex flex-col gap-6",children:R.map(({node:P,activeId:N},H)=>a.jsx(Qe,{isLatest:H===k,task:r,userTurn:P.userTurn,assistantTurns:P.assistantTurns,selectedAssistantId:N,focusedAssistantTurn:e,setFocusedAssistantTurnId:u,onClickFile:d,startOpen:H===k,currentTab:o,onTabChange:i,permissions:s,hasComments:v,clearComments:_,showFullDiff:w},P.userTurn.id))}),S&&a.jsx("div",{ref:l,className:_e("flex min-h-full shrink-0 flex-col gap-6",E&&"pb-36"),style:{minHeight:c-24},children:a.jsx(Qe,{isLatest:!0,task:r,userTurn:S.node.userTurn,assistantTurns:S.node.assistantTurns,selectedAssistantId:($=e==null?void 0:e.id)!=null?$:null,focusedAssistantTurn:e,setFocusedAssistantTurnId:u,onClickFile:d,currentTab:o,onTabChange:i,permissions:s,startOpen:!0,hasComments:v,clearComments:_,showFullDiff:w,latestUserMessageRef:p})})]})})})}const jt=h.createContext(null);function Hs({value:t,children:e}){return a.jsx(jt.Provider,{value:t,children:e})}function at(){const t=h.useContext(jt);if(!t)throw new Error("useTaskComments must be used within a TaskCommentsProvider");return t}function Ha({currentTab:t,permissions:e,onClickFile:o,onTabChange:s,showFullDiff:r,loadingTurnMapping:n,footer:c}){const{task:d,focusedAssistantTurn:u,pastTurns:i,setFocusedAssistantTurnId:l}=Fe(),{comments:p,clearComments:v}=at(),[{height:_},w]=Ca(),g=h.useRef(null),C=h.useRef(null),b=h.useRef(null);return ta(()=>{const f=g.current,k=b.current;!f||!k||!f.contains(k)||k.scrollIntoView({block:"start",behavior:"auto"})},[i.length,n]),a.jsx("div",{ref:Ht(w,g),className:"flex h-full w-full scroll-pt-3 flex-col items-center overflow-y-auto px-6",children:a.jsxs("div",{className:_e("@container w-full",Je),children:[a.jsx(qa,{focusedAssistantTurn:u,currentTab:t,permissions:e,task:d,turns:i,containerHeight:_,onClickFile:o,setFocusedAssistantTurnId:l,onTabChange:s,latestTurnRef:C,latestUserMessageRef:b,hasComments:p.length>0,clearComments:v,showFullDiff:r,loadingTurnMapping:n,reserveComposerSpace:c!=null}),c&&a.jsx("div",{className:"keyboard-open:fixed absolute start-0 end-0 bottom-0",children:c})]})})}const Ua=ge(()=>fe(()=>import("./flbnckm3frbq9gm0.js"),__vite__mapDeps([0,1])),{loading:t=>ve(t)});function Va(t){"use forget";const e=Ae.c(10),{onRetry:o,isRetrying:s}=t,r=me();let n;e[0]!==r?(n=r.formatMessage({id:"wham.whamPreviewImageCarousel.retryAriaLabel",defaultMessage:"Retry loading preview images"}),e[0]=r,e[1]=n):n=e[1];const c=n;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=a.jsx("div",{className:"bg-token-bg-tertiary text-token-text-tertiary rounded-full p-3",children:a.jsx(Ua,{className:"icon-lg"})}),e[2]=d):d=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx("p",{className:"text-token-text-primary text-base font-medium",children:a.jsx(le,{id:"wham.whamPreviewImageCarousel.errorTitle",defaultMessage:"Preview unavailable"})}),e[3]=u):u=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsxs("div",{className:"flex flex-col gap-2",children:[u,a.jsx("p",{className:"text-token-text-secondary text-sm",children:a.jsx(le,{id:"wham.whamPreviewImageCarousel.errorSubtitle",defaultMessage:"We couldn't load the preview images. Please try again."})})]}),e[4]=i):i=e[4];let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx(le,{id:"wham.whamPreviewImageCarousel.retry",defaultMessage:"Retry"}),e[5]=l):l=e[5];let p;return e[6]!==s||e[7]!==o||e[8]!==c?(p=a.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-4 px-6 text-center",children:[d,i,a.jsx(be,{color:"secondary",onClick:o,loading:s,label:c,className:"mt-1",children:l})]}),e[6]=s,e[7]=o,e[8]=c,e[9]=p):p=e[9],p}function $a({previewImages:t}){"use no forget";var b;const e=me(),o=Ut(t.map(f=>{var k,R,S,E;return{content_type:aa.ImageAssetPointer,asset_pointer:(k=f.asset_pointer)!=null?k:"",size_bytes:(R=f.size_bytes)!=null?R:0,width:(S=f.width)!=null?S:0,height:(E=f.height)!=null?E:0}})),s=h.useMemo(()=>o.filter(f=>f.data),[o]),r=s.length>0,n=h.useMemo(()=>o.some(f=>f.isError),[o]),c=h.useMemo(()=>o.some(f=>f.isFetching),[o]),[d,u]=h.useState(0),[i,l]=h.useState(!1),p=Math.min(Math.max(d,0),Math.max(s.length-1,0)),v=h.useCallback(()=>{s.length<=1||(u(f=>(f-1+s.length)%s.length),Be.recordPreviewImagesCarouselPrev())},[s.length]),_=h.useCallback(()=>{s.length<=1||(u(f=>(f+1)%s.length),Be.recordPreviewImagesCarouselNext())},[s.length]),w=h.useCallback(async()=>{l(!0);try{await Promise.all(o.map(f=>f.refetch({throwOnError:!1})))}finally{l(!1)}},[o]);Ct([{key:"previewCarouselPrev",action:v,actionMessageDescriptor:e.formatMessage({id:"wham.keyboardActions.previousPreviewImage",defaultMessage:"Select previous image"}),group:Ye.Chat,keyboardBinding:[Oe.ArrowLeft],enabled:s.length>1},{key:"previewCarouselNext",action:_,actionMessageDescriptor:e.formatMessage({id:"wham.keyboardActions.nextPreviewImage",defaultMessage:"Select next image"}),group:Ye.Chat,keyboardBinding:[Oe.ArrowRight],enabled:s.length>1}]);const g=(b=s[p])==null?void 0:b.data,C=!r&&n&&!c;return a.jsxs("div",{className:"relative flex h-full w-full items-center justify-center overflow-hidden p-4",children:[C?a.jsx(Va,{isRetrying:i,onRetry:()=>{w()}}):g?a.jsx("div",{className:"flex h-full w-full items-start justify-center overflow-auto",children:a.jsx("img",{src:g.url,width:g.width,height:g.height,alt:e.formatMessage({id:"wham.whamTaskPageContentLoaded.previewImageAlt",defaultMessage:"Generated image"}),className:"h-auto max-w-full"},p)}):a.jsx("div",{className:"text-secondary flex h-full w-full items-center justify-center text-sm",children:a.jsx(le,{id:"wham.whamPreviewImageCarousel.loading",defaultMessage:"Loading preview…"})}),s.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button","aria-label":e.formatMessage({id:"wham.whamPreviewImageCarousel.prev",defaultMessage:"Previous image"}),onClick:v,className:"absolute start-2 top-1/2 -translate-y-1/2 rounded-md bg-black/40 px-2 py-1 text-white hover:bg-black/60 focus:ring-2 focus:ring-white/70 focus:outline-none",children:"‹"}),a.jsx("button",{type:"button","aria-label":e.formatMessage({id:"wham.whamPreviewImageCarousel.next",defaultMessage:"Next image"}),onClick:_,className:"absolute end-2 top-1/2 -translate-y-1/2 rounded-md bg-black/40 px-2 py-1 text-white hover:bg-black/60 focus:ring-2 focus:ring-white/70 focus:outline-none",children:"›"}),a.jsxs("div",{className:"pointer-events-none absolute start-1/2 bottom-2 -translate-x-1/2 rounded-md bg-black/40 px-2 py-0.5 text-xs text-white",children:[p+1," / ",s.length]})]})]})}function Qa(t){"use forget";const e=Ae.c(78),{task:o,userTurn:s,assistantTurn:r,rollout:n}=t,c=me();let d;e[0]!==r||e[1]!==n||e[2]!==o||e[3]!==s?(d=()=>o?"task":s?"user_turn":r?"assistant_turn":n?"rollout":"task",e[0]=r,e[1]=n,e[2]=o,e[3]=s,e[4]=d):d=e[4];const u=d,[i,l]=h.useState(u);let p;e[5]!==c?(p=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.noData",defaultMessage:"No data available for this view."}),e[5]=c,e[6]=p):p=e[6];const v=p;let _;e[7]!==c?(_=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.noDataTooltip",defaultMessage:"No data available for this tab"}),e[7]=c,e[8]=_):_=e[8];const w=_;let g;e[9]!==v?(g=(j,y)=>j?a.jsx("div",{className:"flex h-full w-full overflow-auto p-4",children:a.jsx(Pa,{json:j,jsonFiltersKey:y,jsonViewProps:{collapsed:5}})}):a.jsx("div",{className:"text-token-text-tertiary flex h-full w-full items-center justify-center p-4 text-sm",children:v}),e[9]=v,e[10]=g):g=e[10];const C=g,b=!!o,f=!!s,k=!!r,R=!!n;let S;e[11]!==b||e[12]!==f||e[13]!==k||e[14]!==R?(S={task:b,user_turn:f,assistant_turn:k,rollout:R},e[11]=b,e[12]=f,e[13]=k,e[14]=R,e[15]=S):S=e[15];const E=S;let m;e[16]!==c?(m=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.task",defaultMessage:"Task"}),e[16]=c,e[17]=m):m=e[17];let L;e[18]!==c?(L=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.taskAriaLabel",defaultMessage:"Tab to view the task object"}),e[18]=c,e[19]=L):L=e[19];const $=o?void 0:w,P=o;let N;e[20]!==C||e[21]!==P?(N=C(P,"internal-data-task"),e[20]=C,e[21]=P,e[22]=N):N=e[22];let H;e[23]!==m||e[24]!==L||e[25]!==$||e[26]!==N?(H={key:"task",label:m,ariaLabel:L,tooltip:$,children:N},e[23]=m,e[24]=L,e[25]=$,e[26]=N,e[27]=H):H=e[27];let V;e[28]!==c?(V=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.userTurn",defaultMessage:"User Turn"}),e[28]=c,e[29]=V):V=e[29];let D;e[30]!==c?(D=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.userTurnAriaLabel",defaultMessage:"Tab to view the user turn object"}),e[30]=c,e[31]=D):D=e[31];const Z=s?void 0:w,ie=s;let O;e[32]!==C||e[33]!==ie?(O=C(ie,"internal-data-user-turn"),e[32]=C,e[33]=ie,e[34]=O):O=e[34];let I;e[35]!==V||e[36]!==D||e[37]!==Z||e[38]!==O?(I={key:"user_turn",label:V,ariaLabel:D,tooltip:Z,children:O},e[35]=V,e[36]=D,e[37]=Z,e[38]=O,e[39]=I):I=e[39];let W;e[40]!==c?(W=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.assistantTurn",defaultMessage:"Assistant Turn"}),e[40]=c,e[41]=W):W=e[41];let te;e[42]!==c?(te=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.assistantTurnAriaLabel",defaultMessage:"Tab to view the assistant turn object"}),e[42]=c,e[43]=te):te=e[43];const de=r?void 0:w,re=r;let T;e[44]!==C||e[45]!==re?(T=C(re,"internal-data-assistant-turn"),e[44]=C,e[45]=re,e[46]=T):T=e[46];let K;e[47]!==W||e[48]!==te||e[49]!==de||e[50]!==T?(K={key:"assistant_turn",label:W,ariaLabel:te,tooltip:de,children:T},e[47]=W,e[48]=te,e[49]=de,e[50]=T,e[51]=K):K=e[51];let z;e[52]!==c?(z=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.rollout",defaultMessage:"Rollout"}),e[52]=c,e[53]=z):z=e[53];let G;e[54]!==c?(G=c.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels.rolloutAriaLabel",defaultMessage:"Tab to view the rollout data"}),e[54]=c,e[55]=G):G=e[55];const A=n?void 0:w,ne=n;let Q;e[56]!==C||e[57]!==ne?(Q=C(ne,"internal-data-rollout"),e[56]=C,e[57]=ne,e[58]=Q):Q=e[58];let M;e[59]!==z||e[60]!==G||e[61]!==A||e[62]!==Q?(M={key:"rollout",label:z,ariaLabel:G,tooltip:A,children:Q},e[59]=z,e[60]=G,e[61]=A,e[62]=Q,e[63]=M):M=e[63];let F;e[64]!==H||e[65]!==I||e[66]!==K||e[67]!==M?(F=[H,I,K,M],e[64]=H,e[65]=I,e[66]=K,e[67]=M,e[68]=F):F=e[68];const ce=F;let J,ae;e[69]!==i||e[70]!==E?(J=()=>{var y;if(E[i])return;const j=(y=Object.entries(E).find(za))==null?void 0:y[0];j&&l(j)},ae=[i,E],e[69]=i,e[70]=E,e[71]=J,e[72]=ae):(J=e[71],ae=e[72]),h.useEffect(J,ae);let Y,ee;e[73]===Symbol.for("react.memo_cache_sentinel")?(Y=a.jsx(yt,{className:"border-token-border-heavy border-b px-3",buttonClassName:"pb-2 pt-2"}),ee=a.jsx(kt,{children:Ka}),e[73]=Y,e[74]=ee):(Y=e[73],ee=e[74]);let X;return e[75]!==i||e[76]!==ce?(X=a.jsx("div",{className:"flex h-full w-full flex-col",children:a.jsxs(Mt,{tabs:ce,currentTab:i,onChange:l,withUnderline:!0,children:[Y,ee]})}),e[75]=i,e[76]=ce,e[77]=X):X=e[77],X}function Ka(t){const{content:e}=t;return a.jsx("div",{className:"flex h-full w-full",children:e})}function za(t){const[,e]=t;return e}const St=ge(()=>fe(()=>import("./g639ca26731n6db6.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43])).then(t=>t.WhamTaskPageCodeDiffContent),{loading:()=>a.jsx("div",{className:"flex-1"})});function Ga(t){"use forget";var U,se;const e=Ae.c(95),{currentTab:o,setCurrentTab:s,defaultTab:r,isMobile:n,hasDiff:c,previewImages:d,diffFiles:u,unifiedDiff:i,handleDiffModeChange:l,showFullDiff:p,setShowFullDiff:v,isPreferencesLoading:_,isSharedExampleTask:w,focusedAssistantTurn:g,leftContent:C}=t,{taskId:b,task:f,canFollowUp:k,pastTurns:R}=Fe(),{comments:S,setComments:E}=at(),m=me();let L;e[0]!==_?(L=[_],e[0]=_,e[1]=L):L=e[1],h.useEffect(Ja,L);let $;if(e[2]!==g||e[3]!==R){e:{if(!g){$=null;break e}const x=R!=null?R:[];let oe;e[5]!==g?(oe=q=>q.id===g.id,e[5]=g,e[6]=oe):oe=e[6];const he=x.findIndex(oe);if(he>0)for(let q=he-1;q>=0;q=q-1,q){const xe=x[q];if(Le(xe)){$=xe;break e}}if(g.previous_turn_id){let q;e[7]!==g.previous_turn_id?(q=ke=>Le(ke)&&ke.id===g.previous_turn_id,e[7]=g.previous_turn_id,e[8]=q):q=e[8];const xe=x.find(q);if(xe){$=xe;break e}}const pe=[...x].reverse().find(Ta);$=pe!=null?pe:null}e[2]=g,e[3]=R,e[4]=$}else $=e[4];const P=$,N=(U=g==null?void 0:g.id)!=null?U:b,H=!n;let V;e[9]!==m?(V=m.formatMessage({id:"wham.whamTaskPageContentLoaded.conversation",defaultMessage:"Conversation"}),e[9]=m,e[10]=V):V=e[10];let D;e[11]!==m?(D=m.formatMessage({id:"wham.whamTaskPageContentLoaded.conversationAriaLabel",defaultMessage:"Tab to view the conversation with the assistant"}),e[11]=m,e[12]=D):D=e[12];let Z;e[13]!==C||e[14]!==H||e[15]!==V||e[16]!==D?(Z={key:"chat",isHidden:H,label:V,ariaLabel:D,children:C},e[13]=C,e[14]=H,e[15]=V,e[16]=D,e[17]=Z):Z=e[17];const ie=d.length===0;let O;e[18]!==m?(O=m.formatMessage({id:"wham.whamTaskPageContentLoaded.preview",defaultMessage:"Preview"}),e[18]=m,e[19]=O):O=e[19];let I;e[20]!==m?(I=m.formatMessage({id:"wham.whamTaskPageContentLoaded.previewAriaLabel",defaultMessage:"Tab to view preview images"}),e[20]=m,e[21]=I):I=e[21];let W;e[22]!==d?(W=a.jsx($a,{previewImages:d}),e[22]=d,e[23]=W):W=e[23];let te;e[24]!==I||e[25]!==W||e[26]!==ie||e[27]!==O?(te={key:"preview",isHidden:ie,label:O,ariaLabel:I,children:W},e[24]=I,e[25]=W,e[26]=ie,e[27]=O,e[28]=te):te=e[28];const de=!c;let re;e[29]!==m?(re=m.formatMessage({id:"wham.whamTaskPageContentLoaded.diff",defaultMessage:"Diff"}),e[29]=m,e[30]=re):re=e[30];let T;e[31]!==m?(T=m.formatMessage({id:"wham.whamTaskPageContentLoaded.diffAriaLabel",defaultMessage:"Tab to view the code diff"}),e[31]=m,e[32]=T):T=e[32];let K;e[33]!==k||e[34]!==S||e[35]!==u||e[36]!==c||e[37]!==_||e[38]!==E||e[39]!==i?(K=!_&&c&&a.jsx(St,{diffFiles:u,unifiedDiff:i,enableComments:k,comments:S,setComments:E}),e[33]=k,e[34]=S,e[35]=u,e[36]=c,e[37]=_,e[38]=E,e[39]=i,e[40]=K):K=e[40];let z;e[41]!==de||e[42]!==re||e[43]!==T||e[44]!==K?(z={key:"diff",isHidden:de,label:re,ariaLabel:T,children:K},e[41]=de,e[42]=re,e[43]=T,e[44]=K,e[45]=z):z=e[45];let G;e[46]!==m?(G=m.formatMessage({id:"wham.whamTaskPageContentLoaded.logs",defaultMessage:"Logs"}),e[46]=m,e[47]=G):G=e[47];let A;e[48]!==m?(A=m.formatMessage({id:"wham.whamTaskPageContentLoaded.logsAriaLabel",defaultMessage:"Tab to view the work logs"}),e[48]=m,e[49]=A):A=e[49];const ne=(se=g==null?void 0:g.environment)==null?void 0:se.agent_network_access;let Q;e[50]!==g||e[51]!==ne||e[52]!==b?(Q=a.jsx(fa,{taskId:b,focusedAssistantTurn:g,agentNetworkAccess:ne}),e[50]=g,e[51]=ne,e[52]=b,e[53]=Q):Q=e[53];let M;e[54]!==w||e[55]!==G||e[56]!==A||e[57]!==Q?(M={key:"logs",isHidden:w,label:G,ariaLabel:A,children:Q},e[54]=w,e[55]=G,e[56]=A,e[57]=Q,e[58]=M):M=e[58];let F;e[59]!==m?(F=m.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels",defaultMessage:"Internal Data Models"}),e[59]=m,e[60]=F):F=e[60];let B;e[61]!==m?(B=m.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModelsAriaLabel",defaultMessage:"Tab to view internal data models"}),e[61]=m,e[62]=B):B=e[62];const ce=g==null?void 0:g.internal_only_rollouts;let J;e[63]!==g||e[64]!==ce||e[65]!==f||e[66]!==P?(J=a.jsx(Qa,{task:f,userTurn:P,assistantTurn:g,rollout:ce}),e[63]=g,e[64]=ce,e[65]=f,e[66]=P,e[67]=J):J=e[67];let ae;e[68]!==F||e[69]!==B||e[70]!==J?(ae={key:"internal_data_models",isHidden:!0,label:F,ariaLabel:B,children:J},e[68]=F,e[69]=B,e[70]=J,e[71]=ae):ae=e[71];let Y;e[72]!==te||e[73]!==z||e[74]!==M||e[75]!==ae||e[76]!==Z?(Y=[Z,te,z,M,ae],e[72]=te,e[73]=z,e[74]=M,e[75]=ae,e[76]=Z,e[77]=Y):Y=e[77];let ee;e[78]!==l||e[79]!==c||e[80]!==v||e[81]!==p||e[82]!==i?(ee=c&&a.jsx(ga,{unifiedDiff:i,setUnifiedDiff:l,showFullDiff:p,setShowFullDiff:v}),e[78]=l,e[79]=c,e[80]=v,e[81]=p,e[82]=i,e[83]=ee):ee=e[83];let X;e[84]!==n||e[85]!==ee?(X=a.jsx(yt,{withUnderline:n,className:"items-center border-b p-3 pe-16 max-md:py-0",children:ee}),e[84]=n,e[85]=ee,e[86]=X):X=e[86];let j;e[87]===Symbol.for("react.memo_cache_sentinel")?(j=a.jsx(kt,{children:Ya}),e[87]=j):j=e[87];let y;return e[88]!==o||e[89]!==r||e[90]!==s||e[91]!==Y||e[92]!==N||e[93]!==X?(y=a.jsx("div",{className:"relative flex h-full w-full flex-col",children:a.jsxs(Mt,{onChange:s,currentTab:o,defaultTab:r,tabs:Y,children:[X,j]},N)}),e[88]=o,e[89]=r,e[90]=s,e[91]=Y,e[92]=N,e[93]=X,e[94]=y):y=e[94],y}function Ya(t){const{content:e}=t;return a.jsx("div",{className:"flex h-full w-full",children:e})}function Ta(t){return Le(t)}function Ja(){St.prefetch()}const lt="oai/apps/wham-task-page-content-left-width",dt=672,ze=400,Xa=({leftContent:t,rightContent:e=null})=>{const[o,s]=h.useState(()=>sa(it.DANGER_SECRET_FOLDERS_ONLY_getItem(lt),400)),r=Vt(o,ze,dt);h.useEffect(()=>{const i=setTimeout(()=>{it.DANGER_SECRET_FOLDERS_ONLY_setItem(lt,r)},500);return()=>clearTimeout(i)},[r]);const n=h.useRef(null);n.current=()=>{e&&s(r)};const c=h.useCallback(()=>{var i;return(i=n.current)==null?void 0:i.call(n)},[]),[d,u]=h.useState(!1);return a.jsxs("div",{className:"flex h-full min-h-0 w-full",children:[a.jsxs(Me.div,{className:"relative h-full shrink-0",animate:{width:e?r:"100%"},initial:!1,transition:{type:"tween",duration:d?0:.14,ease:"easeOut"},children:[a.jsx(Me.div,{className:"flex h-full w-full flex-col items-center",transition:{type:"tween",duration:d?0:.14,ease:"easeOut"},animate:{width:e?r:"100%"},children:a.jsx("div",{className:"flex h-full flex-col",style:{width:e?r:"100%"},children:t})}),e&&a.jsx(Me.div,{drag:"x",className:_e("absolute end-[-1px] top-0 bottom-0 z-10 w-[1px] cursor-ew-resize after:absolute after:inset-0 after:-inset-x-2 after:content-['']",d?"bg-token-text-primary":"bg-token-border-light hover:bg-token-text-primary dark:bg-token-border-heavy transition-colors delay-0 hover:delay-300"),whileDrag:{width:"2px",end:"-1px"},transition:{type:"tween",duration:0},initial:!1,style:{x:0,y:0},dragMomentum:!1,dragElastic:!1,dragConstraints:{left:0,right:0,top:0,bottom:0},onDragStart:()=>u(!0),onDrag:(i,{delta:{x:l}})=>s(p=>p+l),onDragEnd:()=>{u(!1),c()},onDoubleClick:()=>s(r===ze?dt:ze)})]}),a.jsx(xt,{children:e&&a.jsx(Me.div,{className:"flex h-full min-w-0 flex-1",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",duration:d?0:.04,ease:"easeOut",delay:.1},children:e})})]})};function Nt(t){const{outputDiffs:e}=Ue(t==null?void 0:t.output_items);return{filesModified:Ke(e,o=>{var s;return(s=o.files_modified)!=null?s:0}),linesAdded:Ke(e,o=>{var s;return(s=o.lines_added)!=null?s:0}),linesRemoved:Ke(e,o=>{var s;return(s=o.lines_removed)!=null?s:0})}}function Ue(t){let e=!1;return t?{outputDiffs:t.map(s=>{switch(s.type){case"output_diff":return s;case"pr":return e=!!s.pre_apply_patch,s.output_diff;case"cr":return s.reviewed_diff;default:return null}}).filter(s=>s!=null),hasPreApplyPatch:e}:{outputDiffs:[],hasPreApplyPatch:e}}function Za({isOpen:t,onConfirm:e,onClose:o,loading:s}){return a.jsx(oa,{isOpen:t,onClose:o,testId:"modal-wham-retry-all-turns",type:"warning",title:a.jsx("p",{className:"text-token-text-primary font-semibold",children:a.jsx(le,{id:"wham.retryAllTurnsModal.title",defaultMessage:"Retry all turns"})}),primaryButton:a.jsx(be,{color:"primary",loading:s,onClick:e,children:a.jsx(le,{id:"wham.retryAllTurnsModal.confirm",defaultMessage:"Retry all turns"})}),secondaryButton:a.jsx(be,{color:"secondary",onClick:o,children:a.jsx(le,{id:"wham.retryAllTurnsModal.cancel",defaultMessage:"Cancel"})}),children:a.jsx("div",{className:"text-sm",children:a.jsx(le,{id:"wham.retryAllTurnsModal.message",defaultMessage:"All latest turns will restart, including any siblings turns that are in progress or completed."})})})}const Aa=ge(()=>fe(()=>import("./hyub38ofpwemwztz.js"),__vite__mapDeps([44,1])),{loading:t=>ve(t)});function es({focusedAssistantTurn:t,lastTurn:e,siblings:o}){const s=(e==null?void 0:e.type)==="assistant"?e.turn_status:"completed";return t&&((e==null?void 0:e.id)===t.id||o.some(n=>n.id===(e==null?void 0:e.id)))?t.turn_status:s}function ts({turnId:t,comments:e,clearComments:o,lastTurn:s,focusedAssistantTurn:r,retry:n,attemptIndex:c,siblings:d}){var z,G,A,ne,Q;const u=wt(),{taskId:i,task:l,setFocusedAssistantTurnId:p}=Fe(),v=et(),_=me(),w=Pe(),g=ia(),C=ra(),b=ja(u),f=M=>{na(la(C)),o(),p(M.turn.id)},k=async()=>{var M,F;if(n){$(!0);try{if(n.previousTurnId){const B=await ue.createFollowUpTask(i,n.previousTurnId,n.prompt,(M=n.comments)!=null?M:[],!1,D?(F=n.bestOfN)!=null?F:1:void 0,b?n.attachments:[]);f(B)}else{const B=await ue.createNewTask(n.environmentId,n.branch,n.prompt,!1,D?n.bestOfN:void 0,b?n.attachments:[]);v("/codex/tasks/".concat(B.task.id))}N(!1)}catch(B){B instanceof Xe?Ze(B,t,_,w):w.danger(gt({id:"wham.whamTaskPageFooter.errorRetryingTask",defaultMessage:"Error retrying task"}),{toastId:"wham_task_page_footer_error_retrying_task"})}finally{$(!1)}}},R=!!r&&Ue(r.output_items).outputDiffs.length>0,S=!s||!r||s.id===(r==null?void 0:r.id)||!R,E=n&&S&&(r==null?void 0:r.turn_status)==="failed",m=(r==null?void 0:r.previous_turn_id)&&(s==null?void 0:s.type)==="assistant"&&r.previous_turn_id===s.previous_turn_id,[L,$]=h.useState(!1),[P,N]=h.useState(!1),H=Re(u,"1406552515"),V=Re(u,"879591222")||void 0,D=Re(u,"3492040717"),Z=h.useMemo(()=>{var B,ce,J,ae,Y,ee,X;const M=[...(J=(ce=(B=r==null?void 0:r.output_items)==null?void 0:B.find(j=>j.type==="review"))==null?void 0:ce.suggested_followup_tasks)!=null?J:[],...(Y=(ae=r==null?void 0:r.output_items)==null?void 0:ae.filter(j=>j.type==="suggested_task"))!=null?Y:[]],F=pa((X=(ee=r==null?void 0:r.child_turns)==null?void 0:ee.filter(j=>j.source.type==="suggested_task"))==null?void 0:X.map(j=>[j.source.suggested_task_id,j]));return M.map(j=>{var y,U,se,x;return{suggestion:j,userTurnId:j.id&&(U=(y=F[j.id])==null?void 0:y.assistant_turn_id)!=null?U:null,assistantTurnId:j.id&&(x=(se=F[j.id])==null?void 0:se.user_turn_id)!=null?x:null}})},[r]),ie=(z=r==null?void 0:r.id)!=null?z:t,O=h.useMemo(()=>{var M,F;return(F=(M=r==null?void 0:r.output_items)==null?void 0:M.filter(va))!=null?F:[]},[r]),I=h.useMemo(()=>O.reduce((M,F)=>M+F.comments.filter(B=>B.priority===0||B.priority===1).length,0),[O]),W=((A=(G=l==null?void 0:l.task_status_display)==null?void 0:G.latest_turn_status_display)==null?void 0:A.intent)==="cr",te=(S||m)&&O.length>0,de=Na({taskId:i,latestTurnId:ie}),re=de.isPending||!ie||I===0||H,T=es({focusedAssistantTurn:r,lastTurn:s,siblings:d}),K=(ne=d==null?void 0:d.map(M=>M.turn_status))!=null?ne:[];return(s==null?void 0:s.type)==="assistant"&&["pending","in_progress"].includes(s.turn_status)&&!V?null:a.jsxs(a.Fragment,{children:[a.jsxs("div",{id:"wham-message-modal-footer",className:"z-50 flex w-full justify-center",children:[(S||m)&&a.jsx("div",{className:"flex w-full justify-center px-4",children:a.jsx("div",{className:_e("relative z-1 flex w-full flex-col pt-2 pb-4",Je),children:E?a.jsx(be,{className:"w-full",color:"primary",size:"large",loading:L&&!P,onClick:()=>{var M;((M=n==null?void 0:n.bestOfN)!=null?M:1)>1?N(!0):k()},children:((Q=n.bestOfN)!=null?Q:1)>1?_.formatMessage({id:"wham.whamTaskPageFooter.retryAllTurns",defaultMessage:"Retry all turns"}):_.formatMessage({id:"wham.whamTaskPageFooter.retry",defaultMessage:"Retry"})}):te?a.jsxs("div",{className:"flex w-full flex-col gap-3",children:[a.jsx(nt,{}),a.jsx(be,{className:"w-full",color:"primary",size:"large",disabled:re,loading:de.isPending,onClick:()=>{re||de.mutateAsync(void 0)},children:a.jsx(le,{id:"wham.whamTaskPageFooter.fixIssues",defaultMessage:"{count, plural, one {Fix issue} other {Fix issues}}",values:{count:I}})})]}):o&&!W&&a.jsxs("div",{className:"flex w-full flex-col gap-3",children:[a.jsx(nt,{}),!H&&a.jsx(Sa,{disableAutoFocus:!0,disableDuringSubmit:!0,onSuccess:f,onClearComments:o,followUp:{taskId:i,turnId:t,comments:e,turnStatus:T,siblingTurnStatuses:K,followUpSuggestions:Z},attemptIndex:c,ariaLabel:_.formatMessage({id:"wham.whamTaskPageFooter.composerAriaLabel",defaultMessage:"Composer to enter a follow up prompt to the task"})})]})})}),!S&&!m&&a.jsx(Me.div,{layout:!0,className:_e("dark mx-6 mb-6 w-full",Je),initial:{opacity:0,translateY:10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:10},transition:{duration:g?0:.25},children:a.jsx($t,{title:a.jsx(le,{id:"wham.whamTaskPageFooter.previousTurn",defaultMessage:"You are viewing a previous turn"}),primaryCtaText:a.jsx(le,{id:"wham.whamTaskPageFooter.viewLatestTurn",defaultMessage:"View latest"}),content:a.jsx(le,{id:"wham.whamTaskPageFooter.followUpsLatestTurn",defaultMessage:"Follow-ups are only available for the latest turn"}),icon:a.jsx(Aa,{className:"icon"}),onPrimaryCtaClick:()=>p(s.id)})})]}),a.jsx(Za,{isOpen:P,onClose:()=>N(!1),onConfirm:k,loading:L})]})}const Lt=window.location.origin+"/s/";function as(t){return"".concat(Lt).concat(t)}function It(t){var e,o;return!t||!t.attachments||t.attachments.length===0||t.attachments[0].kind!=="codex"?null:{postId:t.id,permalink:(e=t.permalink)!=null?e:as(t.id),permissions:(o=t.permissions.share_setting)!=null?o:"public",codexTask:t.attachments[0].task,codexTurn:t.attachments[0].turns}}function Ne(t){return["codex_tasks","result","share",t]}function ss({taskId:t,enabled:e}){return qt({enabled:!!t&&e,queryKey:Ne(t),queryFn:async()=>{const o=await tt.safeGet("/share/post/by_codex_task/{codex_task_id}",{parameters:{path:{codex_task_id:t}}});return o.post?It(o.post):null}})}function os({taskId:t,onSuccess:e,onError:o}){return Ce({scope:{id:t},mutationFn:()=>ue.forkSharedTask(t),onSuccess:e,onError:o})}function is({taskId:t,turnId:e,onSuccess:o,onError:s}){return Ce({scope:{id:t},mutationFn:async()=>{const r=await tt.safePost("/share/post",{requestBody:{attachments_to_create:[{kind:"codex",codex_task_id:t,current_codex_turn_id:e}]}});return It(r.post)},onSuccess:o,onError:s})}function rs({taskId:t,sharedResult:e}){var s;const o=qe();return Ce({scope:{id:(s=e==null?void 0:e.postId)!=null?s:""},mutationFn:async({sharedResultId:r,access:n})=>(await tt.safePost("/share/post/update_access",{requestBody:{post_id:r,share_settings:n}})).share_setting,onMutate:({access:r})=>{const n=Ne(t),c=o.getQueryData(n);return o.setQueryData(n,c&&Se(je({},c),{permissions:r})),{previousAccess:c==null?void 0:c.permissions}},onSuccess:r=>{const n=Ne(t),c=o.getQueryData(n);c&&o.setQueryData(n,Se(je({},c),{permissions:r}))},onError:(r,n,c)=>{var i;const d=Ne(t),u=o.getQueryData(d);o.setQueryData(d,u&&Se(je({},u),{permissions:(i=c==null?void 0:c.previousAccess)!=null?i:"public"}))}})}function ns({taskId:t}){const e=me(),o=Pe(),s=et(),{mutate:r}=os({taskId:t,onSuccess:n=>{var c,d;(c=n==null?void 0:n.task)!=null&&c.id&&s("/codex/tasks/".concat((d=n==null?void 0:n.task)==null?void 0:d.id))},onError:()=>{o.danger(e.formatMessage({id:"wham.codexForkButton.failedToFork",defaultMessage:"Failed to fork task"}))}});return a.jsx(be,{size:"small",color:"secondary",type:"button",className:"px-3 py-2",onClick:()=>r(),children:a.jsx(le,{id:"wham.share.taskForkButton",defaultMessage:"Fork"})})}const ct=ge(()=>fe(()=>import("./lm3g1zm00rp6al39.js").then(t=>t.z9),__vite__mapDeps([6,1,4,5,7])),{loading:t=>ve(t)}),ls=ge(()=>fe(()=>import("./okzsq1aji2s9p1ex.js"),__vite__mapDeps([45,1])),{loading:t=>ve(t)}),ds="".concat(Lt,"...");function cs({taskId:t,turnId:e,isLoading:o,sharedResult:s,title:r}){const[n,c]=h.useState(!1),d=(b,f)=>{b&&Yt(b,void 0,f).then(()=>{c(!0),setTimeout(()=>c(!1),1500)}).catch(()=>{})},u=qe(),i=Pe(),{mutate:l,isPending:p}=is({taskId:t,turnId:e,onSuccess:b=>{if(!b){i.danger("Failed to create share link");return}u.setQueryData(Ne(t),b),d(b.permalink)}}),{mutate:v}=rs({taskId:t,sharedResult:s}),_=h.useRef(null),w=b=>{var f;(f=_.current)==null||f.focus(),s?d(s.permalink,b):l()},g=b=>{s&&v({sharedResultId:s.postId,access:b})},C=b=>{switch(b){case"public":return $e.PUBLIC;case"private":return $e.PRIVATE;case"workspace":return $e.WORKSPACE}};return a.jsx(Ea,{inputRef:_,isLoading:o,isPublishedVersionLatest:!0,sharedObject:s&&{id:s.postId,title:r,access:C(s.permissions)},title:r,shareTextPlaceholder:ds,shareUrl:s==null?void 0:s.permalink,isCopySuccessful:n,isCreateLinkRequestInProgress:p,handlePrivacyChange:g,handlePrimaryButtonClick:w})}function us({taskId:t,turnId:e,isDisabled:o,title:s}){const r=He(),n=_t(),c=me(),[d,u]=h.useState(!1),{data:i,isLoading:l}=ss({taskId:t,enabled:d&&!o}),{triggerRef:p,container:v}=da({isOpen:d,onClose:()=>u(!1)}),_=(n==null?void 0:n.isWorkspaceAccount())&&!(n!=null&&n.features.includes(ca.WorkspaceShareLinks));return o||_?a.jsx(bt,{label:_?c.formatMessage(De.workspaceSharingDisabled):c.formatMessage(De.share),children:a.jsx(Te,{disabled:!0,icon:ls,"aria-label":c.formatMessage(_?De.workspaceSharingDisabled:De.share)})}):a.jsxs(Qt,{open:d,onOpenChange:u,children:[a.jsx(Kt,{ref:p,asChild:!0,children:r?a.jsx(Te,{icon:ct,"aria-label":c.formatMessage({id:"wham.whamTaskPageHeader.shareAriaLabel",defaultMessage:"Share task"})}):a.jsx(be,{icon:ct,color:"ghost","aria-label":c.formatMessage({id:"wham.whamTaskPageHeader.shareAriaLabel",defaultMessage:"Share task"}),children:a.jsx(le,{id:"wham.whamTaskPageHeader.share",defaultMessage:"Share"})})}),a.jsx(xt,{children:d&&a.jsx(zt,{forceMount:!0,container:v,children:a.jsx(Gt,{align:"end",className:"z-50",sideOffset:8,collisionPadding:8,children:a.jsx(cs,{title:s,taskId:t,turnId:e,sharedResult:i,isLoading:l})})})})]})}function ms({assistantTurn:t}){var _,w,g,C,b,f;const e=me(),o=Pe(),s=He(),r=(g=(w=(_=t==null?void 0:t.pull_request_data)==null?void 0:_.head)!=null?w:t==null?void 0:t.branch)!=null?g:"",n=La(r),c=r&&r!==n,{outputDiffs:d}=Ue(t==null?void 0:t.output_items),u=d[0],i=(f=(b=t==null?void 0:t.base_commit_sha)!=null?b:(C=t==null?void 0:t.pull_request_data)==null?void 0:C.base_sha)!=null?f:u==null?void 0:u.base_commit_sha;if(s||!r)return null;const l=i!=null&&r!==i,v=l?a.jsx("span",{className:"text-token-text-secondary hover:text-token-text-primary cursor-pointer",onClick:()=>{navigator.clipboard.writeText(i!=null?i:""),o.success(e.formatMessage({id:"wham.baseSha.copied",defaultMessage:"Copied branch commit SHA to clipboard"}))},children:i}):c?r:void 0;return a.jsx(bt,{label:v,side:"bottom",disabled:!v,interactive:l,children:a.jsx("span",{className:"text-token-text-secondary hover:text-token-text-primary cursor-pointer truncate",onClick:()=>{navigator.clipboard.writeText(r),o.success(e.formatMessage({id:"wham.branchName.copied",defaultMessage:"Copied branch name to clipboard"}))},children:n})})}const hs=({assistantTurn:t})=>{const e=me(),o=h.useMemo(()=>t!=null&&t.created_at?new Date(t.created_at*1e3):null,[t==null?void 0:t.created_at]),s=h.useMemo(()=>(o==null?void 0:o.getFullYear())===new Date().getFullYear(),[o]);return o?o.toLocaleDateString(e.locale,{month:"short",day:"numeric",year:s?void 0:"numeric"}):null},fs=" · ";function gs({title:t,assistantTurn:e}){var u,i,l,p;const{linesAdded:o,linesRemoved:s}=Nt(e),r=(u=e==null?void 0:e.environment)==null?void 0:u.label,n=(p=(l=(i=e==null?void 0:e.pull_request_data)==null?void 0:i.head)!=null?l:e==null?void 0:e.branch)!=null?p:"",d=[{key:"created-at",element:a.jsx("span",{className:"text-token-text-secondary truncate empty:hidden max-md:hidden",children:a.jsx(hs,{assistantTurn:e})}),hideOnMobile:!0,shouldShow:!!(e!=null&&e.created_at)},{key:"environment",element:a.jsx("span",{className:"text-token-text-secondary truncate",children:r}),hideOnMobile:!1,shouldShow:!!r},{key:"branch",element:a.jsx(ms,{assistantTurn:e}),hideOnMobile:!0,shouldShow:!!n,noSeparator:!0},{key:"stats",element:a.jsx("span",{className:"max-md:hidden",children:a.jsx(Da,{linesAdded:o,linesRemoved:s})}),hideOnMobile:!0,shouldShow:!!(o||s)}].filter(v=>v.shouldShow);return a.jsxs("div",{className:"flex min-w-0 flex-col text-sm",children:[a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("span",{className:"truncate font-medium",children:t})}),a.jsx("div",{className:"flex gap-2 max-md:flex-wrap max-md:gap-1",children:d.map((v,_)=>{const w=d[_-1],g=(w==null?void 0:w.hideOnMobile)||v.hideOnMobile||v.noSeparator;return a.jsxs(h.Fragment,{children:[_>0&&a.jsx("span",{"aria-hidden":"true",className:_e("text-token-text-secondary",g?"max-md:hidden":""),children:fs}),v.element]},v.key)})})]})}const ut=ge(()=>fe(()=>import("./jexchgabyqje5te2.js"),__vite__mapDeps([46,1])),{loading:t=>ve(t)}),ps=ge(()=>fe(()=>import("./kdezcnbv0vjez4rk.js"),__vite__mapDeps([47,1])),{loading:t=>ve(t)}),mt=ge(()=>fe(()=>import("./lm3g1zm00rp6al39.js").then(t=>t.zk),__vite__mapDeps([6,1,4,5,7])),{loading:t=>ve(t)});function xs({focusedAssistantTurn:t,onClose:e,shouldShowShare:o,shouldShowFork:s,permissions:r,title:n,isSharedExampleTask:c=!1}){"use no forget";var Y,ee,X,j;const{taskId:d,task:u,currentDiffTaskTurn:i}=Fe(),l=_t(),p=(Y=l==null?void 0:l.id)!=null?Y:null,v=(ee=u==null?void 0:u.creator_workspace)!=null?ee:null,[_,w]=h.useState((i==null?void 0:i.pull_request_status)==="creating"),[g,C]=h.useState(void 0),b=Pe(),f=qe(),k=me(),R=Tt(we(i)),S=r==="write",E=We(y=>y.getTurnsForTask(d).filter(Ie)),m=We(y=>y.getTurnsForTask(d)),L=new Map(m.map(y=>[y.id,y])),$=y=>{if(Ie(y)){const se=u==null?void 0:u.external_pull_requests;if(se&&se.length)for(let x=se.length-1;x>=0;x--){const oe=se[x];if(oe.assistant_turn_id===y.id)return oe}}const U=y.previous_turn_id?L.get(y.previous_turn_id):void 0;return U?$(U):void 0},P=i!=null?i:t,N=P?$(P):void 0,{linesAdded:H,linesRemoved:V}=Nt(i),{outputDiffs:D,hasPreApplyPatch:Z}=Ue(i==null?void 0:i.output_items),ie=S&&!Z,O=((j=(X=u==null?void 0:u.task_status_display)==null?void 0:X.latest_turn_status_display)==null?void 0:j.intent)==="cr",I=et(),W=!!(t!=null&&t.id)&&S&&!O,de=E.filter(y=>{var U;return(U=i==null?void 0:i.sibling_turn_ids)==null?void 0:U.includes(y.id)}).some(y=>{var U;return(U=y.pull_request_data)==null?void 0:U.url}),re=r==="write"&&N&&!N.pull_request.merged&&N.pull_request.state!=="closed"&&N.codex_updated_sha!==""&&((i==null?void 0:i.id)!==N.assistant_turn_id||(i==null?void 0:i.pull_request_status)==="externally_created")&&!de,T=h.useRef(null),{mutate:K,isPending:z}=Ce({mutationFn:async()=>{d&&await ue.archiveTask(d)},onSuccess:async()=>{await f.invalidateQueries({queryKey:["wham","tasks"]}),await f.invalidateQueries({queryKey:["wham","task",d]}),I("/codex")},onError:()=>{b.danger({id:"wham.whamTaskPageHeader.failedToArchiveTask",defaultMessage:"Failed to archive task",description:"Toast when archive request fails"},{toastId:"wham_task_page_header_failed_to_archive_task"})}}),{mutate:G,isPending:A}=Ce({mutationFn:async()=>{d&&await ue.recoverTask(d)},onSuccess:async()=>{await f.invalidateQueries({queryKey:["wham","tasks"]}),await f.invalidateQueries({queryKey:["wham","task",d]})},onError:()=>{b.danger({id:"wham.whamTaskPageHeader.failedToArchiveTask",defaultMessage:"Failed to archive task",description:"Toast when archive request fails"},{toastId:"wham_task_page_header_failed_to_archive_task"})}}),ne=z||A;h.useEffect(()=>{(i==null?void 0:i.pull_request_status)==="creating"?(w(!0),f.invalidateQueries({queryKey:["wham","task",d,"turns"]})):w(!1)},[d,i==null?void 0:i.pull_request_status,f]),Ct([{key:"copyApplyToClipboard",action:()=>{Q()},actionMessageDescriptor:k.formatMessage({id:"wham.keyboardActions.copyApplyToClipboard",defaultMessage:"Copy git apply"}),group:Ye.Chat,keyboardBinding:[Oe.Mod,Oe.Shift,";"],enabled:!!R}]);const Q=async()=>{R&&(await navigator.clipboard.writeText(" (cd \"$(git rev-parse --show-toplevel)\" && git apply --3way <<'EOF' \n".concat(R," \nEOF\n)")),b.success(k.formatMessage({id:"wham.message.modal.footer.copiedToClipboard",defaultMessage:"Copied git apply command to clipboard"}),{duration:3,hasCloseButton:!0}),i!=null&&i.id&&(Be.recordGitAction("diff-copied",H,V,d,i.id,"regular"),ue.copyGitApply(d,i.id,!0)))},M=async()=>{R&&(await navigator.clipboard.writeText(R),b.success(k.formatMessage({id:"wham.whamTaskPageHeader.copiedPatchToClipboard",defaultMessage:"Copied patch to clipboard"}),{duration:3,hasCloseButton:!0}),i!=null&&i.id&&await ue.copyGitApply(d,i.id,!1))},F=async()=>{if(!N||!(i!=null&&i.id)){b.danger({id:"wham.whamTaskPageHeader.noPrToUpdate",defaultMessage:"No PR to update",description:"Toast when no PR is found to update"},{duration:3,hasCloseButton:!0,toastId:"wham_task_page_header_no_pr_to_update"});return}w(!0);try{await ue.updatePr(d,i.id,N.id)}catch(y){w(!1),await ue.getTaskTurnPR(d,N.assistant_turn_id),y instanceof Xe?Ze(y,i.id,k,b):b.danger({id:"wham.whamTaskPageHeader.failedToUpdatePr",defaultMessage:"Failed to update PR",description:"Toast when failed to update PR"},{duration:3,hasCloseButton:!0,toastId:"wham_task_page_header_failed_to_update_pr"})}finally{await f.refetchQueries({queryKey:["wham","tasks"]}),await f.refetchQueries({queryKey:["wham","task",d]}),w(!1)}},B=async y=>{if(!(i!=null&&i.id))return;C(y);const U=T.current;try{w(!0),await ue.createPr(d,i.id,y),await f.refetchQueries({queryKey:["wham","task"]}),await f.fetchQuery(ya(d,i.id)).then(se=>{const x=se;x.turn.pull_request_data!=null&&(U&&!U.closed&&x.turn.pull_request_data.url&&U.location.assign(x.turn.pull_request_data.url),Jt({title:x.task.title,clientThreadId:x.turn.conversation_id,subtitle:k.formatMessage({id:"wham.message.modal.footer.prCreatedSuccess",defaultMessage:"Click to view your pull request."}),onClick:()=>{var oe;window.open((oe=x.turn.pull_request_data)==null?void 0:oe.url,"_blank")}}))}),Be.recordGitAction("pr-created",H,V,d,i.id,y!=null?y:"regular")}catch(se){w(!1),U==null||U.close(),se instanceof Xe?Ze(se,i.id,k,b):b.danger({id:"wham.message.modal.footer.createPrError",defaultMessage:"Failed to create PR",description:"Error message for failed to create PR"},{duration:3,hasCloseButton:!0,toastId:"wham_task_page_header_failed_to_create_pr"})}},ce=()=>{if(!(i!=null&&i.id))return;const y=g?"?mode=".concat(g):"";T.current=window.open("/codex/tasks/".concat(d,"/turns/").concat(i.id,"/pr").concat(y),"_blank")},J=!!He(),ae=!!p&&!!v&&p===v;return a.jsxs("div",{className:"border-b-token-border-default flex w-full justify-between gap-2 border-b p-3 transition-colors duration-50",children:[a.jsxs("div",{className:"flex min-w-0 flex-shrink max-md:gap-2",children:[e?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"hover:bg-token-bg-tertiary group-radix-state-open:bg-token-bg-tertiary rounded-sm p-2 font-semibold",onClick:e,"aria-label":k.formatMessage({id:"wham.taskPageHeader.goBack",defaultMessage:"Go back to tasks"}),children:a.jsx(ps,{className:"icon-lg text-token-text-secondary"})}),a.jsx("div",{className:"bg-token-border-default my-auto ms-[11px] me-4 h-4 w-[1px] max-md:hidden"})]}):a.jsx("div",{className:"ms-3"}),a.jsx(gs,{title:n,assistantTurn:t})]}),a.jsxs("div",{className:"relative flex h-10 items-center gap-1.5",children:[!1,s&&(t==null?void 0:t.id)&&ae&&a.jsx(ns,{taskId:d}),W&&(J?a.jsx(Te,{icon:u!=null&&u.archived?ut:mt,onClick:()=>u!=null&&u.archived?G():K(),disabled:ne,"aria-label":u!=null&&u.archived?k.formatMessage({id:"wham.whamTaskPageHeader.ariaLabelUnarchive",defaultMessage:"Unarchive Task"}):k.formatMessage({id:"wham.whamTaskPageHeader.ariaLabelArchive",defaultMessage:"Archive Task"})}):a.jsx(be,{color:"ghost",icon:u!=null&&u.archived?ut:mt,loading:ne,onClick:()=>u!=null&&u.archived?G():K(),"aria-label":u!=null&&u.archived?k.formatMessage({id:"wham.whamTaskPageHeader.ariaLabelUnarchive",defaultMessage:"Unarchive Task"}):k.formatMessage({id:"wham.whamTaskPageHeader.ariaLabelArchive",defaultMessage:"Archive Task"}),children:u!=null&&u.archived?a.jsx(le,{id:"wham.whamTaskPageHeader.unarchive",defaultMessage:"Unarchive"}):a.jsx(le,{id:"wham.whamTaskPageHeader.archive",defaultMessage:"Archive"})})),o&&(t==null?void 0:t.id)&&a.jsx(us,{taskId:d,turnId:t==null?void 0:t.id,isDisabled:!1,title:n!=null?n:""}),r==="write"&&!J&&a.jsx(Fa,{taskId:d}),D.length>0&&!O&&a.jsx(xa,{isCreatingPr:_,assistantTurn:i,copyApplyToClipboard:Q,copyPatchToClipboard:M,createPr:B,navigateToCreatingPrPage:ce,canCreatePr:ie,updateBranch:re?F:void 0,permissions:r,showOnlyViewPr:c}),!J&&!c&&a.jsx(Ia,{})]})]})}function ws({focusedAssistantTurn:t,showFullDiff:e,currentDiffTaskTurn:o}){if(!t)return[];const s=!e;if(we(t,s).length>0)return Ee({assistantTurn:t,followUp:s});if(we(t,!1).length>0)return Ee({assistantTurn:t,followUp:!1});if(we(t,!0).length>0)return Ee({assistantTurn:t,followUp:!0});if(!o||o.id===t.id)return[];const d=we(o,!1),u=we(o,!0);if(d.length===0&&u.length===0)return[];const i=d.length===0&&u.length>0;return Ee({assistantTurn:o,followUp:i})}const _s=ge(()=>fe(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([4,1,5])),{loading:t=>ve(t)}),ht=new Set,bs=ge(()=>fe(()=>import("./g639ca26731n6db6.js"),__vite__mapDeps([2,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43])).then(t=>t.WhamTaskPageCodeDiffContent),{loading:()=>a.jsx("div",{className:"flex-1"})});function Us({turnId:t,permissions:e,confirmClose:o,setConfirmClose:s,handleClose:r,showForkButton:n,loadingTurnMapping:c,isSharedExampleTask:d=!1}){"use no forget";var y,U,se;const{taskId:u,task:i,focusedAssistantTurn:l,pastTurns:p,canFollowUp:v,currentDiffTaskTurn:_}=Fe(),{comments:w,clearComments:g,setComments:C}=at(),b=me(),{data:f,isLoading:k}=ka(),R=qe(),[S,E]=h.useState(void 0),m=h.useMemo(()=>we(l,!0).length>0,[l]),[L,$]=ua(ma.WhamShowFullDiff,!m,Xt),P=h.useMemo(()=>ws({focusedAssistantTurn:l,showFullDiff:L,currentDiffTaskTurn:_}),[l,L,_]),N=h.useMemo(()=>l?l.output_items.filter(x=>x.type==="message").flatMap(x=>x.content).filter(x=>x.content_type==="image_asset_pointer_citation").map(x=>({content_type:"image_asset_pointer_citation",asset_pointer:x.asset_pointer,width:x.width,height:x.height,size_bytes:x.size_bytes})):[],[l]),H=(l==null?void 0:l.turn_status)==="failed",V=N.length>0,D=P.length>0,Z=pt(p),ie=i?(y=i.title)!=null?y:b.formatMessage({id:"wham.whamTaskPageContentLoaded.newTask",defaultMessage:"New Task"}):null,O=Pe(),I=!!He(),W=I||(f==null?void 0:f.git_diff_mode)==="unified",te=wt(),de=Re(te,"3673716873");h.useEffect(()=>{const x=l==null?void 0:l.id;x&&!ht.has(x)&&(l==null?void 0:l.turn_status)==="completed"&&(ht.add(x),ue.markTurnViewed(u,x))},[l==null?void 0:l.id,u,l==null?void 0:l.turn_status]);const{mutate:re}=Ce({mutationFn:x=>ue.updateUserPreferences(x),onSuccess:async()=>{await Ma(R)},onError:()=>{O.danger(gt({id:"wham.whamTaskPageContentLoaded.failedToUpdatePreferences",defaultMessage:"Failed to update preferences"}),{toastId:"wham_task_page_content_loaded_failed_to_update_preferences"})}}),T=x=>{re({diffView:x?"unified":"split"})},K=V?"preview":I?"chat":D?"diff":void 0,[z,G]=h.useState(!1);!z&&i&&(G(!0),E(K));const A=l!=null&&l.turn_status?vt(l==null?void 0:l.turn_status):null,ne=h.useRef(!1),Q=h.useRef({}),M=(U=l==null?void 0:l.id)!=null?U:t,F=h.useCallback(x=>Q.current[x],[]),B=h.useCallback((x,oe)=>{Q.current[x]=oe},[]),ce=h.useMemo(()=>({versionKey:M,getOpenState:F,setOpenState:B}),[M,F,B]);h.useEffect(()=>{A===!1?ne.current=!0:A===!0&&ne.current&&D&&E("diff")},[A]);const J=h.useMemo(()=>{var x,oe,he,pe;if(H&&(l!=null&&l.environment_id)&&(l!=null&&l.branch)){const q=[...p].reverse().find(ye=>ye.type==="user"),xe=(x=q==null?void 0:q.input_items.find(ye=>ye.type==="message"))==null?void 0:x.content.find(ye=>ye.content_type==="text"),ke=xe==null?void 0:xe.text,Ve=q==null?void 0:q.input_items.filter(ye=>ye.type==="comment"),Ft=((he=(oe=l==null?void 0:l.sibling_turn_ids)==null?void 0:oe.length)!=null?he:0)+1,Et=wa((pe=q==null?void 0:q.input_items)!=null?pe:[]);return{environmentId:l==null?void 0:l.environment_id,branch:l==null?void 0:l.branch,previousTurnId:q==null?void 0:q.previous_turn_id,prompt:ke!=null?ke:"",comments:Ve!=null?Ve:[],bestOfN:Ft,attachments:Et}}},[H,l,p]),{attemptIndex:ae,siblings:Y}=h.useMemo(()=>{if(!l)return{attemptIndex:null,hasSiblingTurns:!1};const x=p.filter(he=>{var pe;return Ie(he)&&!!((pe=he.sibling_turn_ids)!=null&&pe.includes(l.id))}),oe=x.findIndex(he=>he.id===l.id);return{attemptIndex:oe===-1?null:oe+1,siblings:x}},[l,p]),ee=e==="write"?a.jsx(ts,{turnId:(se=l==null?void 0:l.id)!=null?se:t,comments:w,clearComments:g,focusedAssistantTurn:l,lastTurn:Z,retry:J,attemptIndex:ae,siblings:Y!=null?Y:[]}):null,X=a.jsx(Ha,{currentTab:S,permissions:e,onClickFile:()=>E("diff"),onTabChange:x=>E(x),showFullDiff:L,loadingTurnMapping:c,footer:ee}),j=a.jsx(rt.Provider,{value:ce,children:a.jsx(Ga,{currentTab:S,setCurrentTab:x=>E(x),defaultTab:K,isMobile:I,hasDiff:D,previewImages:N,diffFiles:P,unifiedDiff:W,handleDiffModeChange:T,showFullDiff:L,setShowFullDiff:$,isPreferencesLoading:k,isSharedExampleTask:d,focusedAssistantTurn:l,leftContent:X})});return a.jsxs(a.Fragment,{children:[a.jsxs(Me.div,Se(je({className:_e("relative flex size-full flex-1 flex-col items-center",I?"[--right-bg:var(--bg-primary)]":"[--right-bg:var(--bg-tertiary)] dark:[--right-bg:black]")},Zt),{children:[a.jsx(xs,{title:ie,focusedAssistantTurn:l,onClose:r?()=>r==null?void 0:r({force:!0}):void 0,permissions:e,shouldShowShare:de&&e==="write",shouldShowFork:!!n,isSharedExampleTask:d}),a.jsx("div",{className:"bg-token-bg-primary flex min-h-0 w-full flex-1",children:!i||!z?a.jsx(ha,{}):I?j:a.jsx(Xa,{leftContent:X,rightContent:d&&D?a.jsx("div",{className:"relative h-full w-full bg-[var(--right-bg)]",children:a.jsx(rt.Provider,{value:ce,children:a.jsx(bs,{diffFiles:P,unifiedDiff:W,enableComments:v,comments:w,setComments:C})})}):S?a.jsxs("div",{className:"relative h-full w-full bg-[var(--right-bg)]",children:[j,a.jsx(At,{className:"absolute end-3 top-2.5",icon:a.jsx(_s,{}),label:b.formatMessage({id:"wham.whamTaskPageContentLoaded.close",defaultMessage:"Close"}),onClick:()=>E(void 0)})]}):void 0})})]})),o&&s&&r&&a.jsx(_a,{setConfirmClose:s,handleClose:r})]})}function Vs({taskId:t,task:e,currentUserTurn:o,currentAssistantTurn:s}){var l,p,v,_;const r=We(w=>w.addTurnToTaskMap),n=We(w=>w.getTurnsForTask),[c,d]=h.useState((p=(l=s==null?void 0:s.id)!=null?l:e==null?void 0:e.current_turn_id)!=null?p:null);h.useEffect(()=>{var w;t&&(s&&["pending","in_progress","failed"].includes(s.turn_status)?d(s.id):d((w=s==null?void 0:s.id)!=null?w:null),o&&r(t,o),s&&r(t,s))},[s,o,t,r]);const u=n(t!=null?t:"");let i=(_=(v=u==null?void 0:u.filter(w=>w.type==="assistant"))==null?void 0:v.find(w=>w.id===c))!=null?_:null;return i||(i=s),{focusedAssistantTurn:i,setFocusedAssistantTurnId:d}}function $s({focusedAssistantTurn:t,pastTurns:e,currentDiffTaskTurnId:o}){if(!t)return null;if(Ge(t))return t;const s=vs(e);if(o){const n=s.get(o);if(n&&Ie(n)&&Ge(n))return n}let r=ft(t,s);for(;r;){const n=s.get(r);if(!n||!Ie(n))return null;if(Ge(n))return n;r=ft(n,s)}return null}function Ge(t){return we(t,!1).length>0||we(t,!0).length>0}function vs(t){const e=new Map;for(const o of t)e.set(o.id,o);return e}function ft(t,e){var s,r;const o=e.get((s=t.previous_turn_id)!=null?s:"");return o&&(r=o.previous_turn_id)!=null?r:null}export{Hs as T,qs as W,Fe as a,Vs as b,Us as c,$s as g,at as u};
//# sourceMappingURL=bezlbl32xw9oguw1.js.map
