const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chuo6dbwu6l4alpy.js","assets/bubexfvksfr7893o.js","assets/lm3g1zm00rp6al39.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/conversation-small-lq38g8zw.css","assets/ngtx9z2nyjegfsso.js"])))=>i.map(i=>d[i]);
var G=Object.defineProperty,K=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var L=(t,s,a)=>s in t?G(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,d=(t,s)=>{for(var a in s||(s={}))W.call(s,a)&&L(t,a,s[a]);if(A)for(var a of A(s))X.call(s,a)&&L(t,a,s[a]);return t},k=(t,s)=>K(t,V(s));import{R as B,h as Q,b as Y,r as i,e as Z,j as e,M as g,_ as R}from"./bubexfvksfr7893o.js";import{u as $,dU as J,p as ee,D as te,aC as se,dc as F,dO as ae,dS as ne,az as P,aB as U,cz as oe,aA as T,R as re}from"./ncw8zw682jinppua.js";import{bY as ie,aB as ce,aC as le,aE as ue,bZ as de,a$ as me,b_ as O}from"./lm3g1zm00rp6al39.js";const pe=P(()=>R(()=>import("./chuo6dbwu6l4alpy.js"),__vite__mapDeps([0,1])),{loading:t=>T(t)}),ge=P(()=>R(()=>import("./lm3g1zm00rp6al39.js").then(t=>t.zp),__vite__mapDeps([2,1,3,4,5])),{loading:t=>T(t)}),he=P(()=>R(()=>import("./ngtx9z2nyjegfsso.js"),__vite__mapDeps([6,1])),{loading:t=>T(t)}),Ce="https://help.openai.com/en/articles/11481834",Me=({onClose:t})=>{var w;const[h,M]=B.useState(2500),[c,l]=B.useState(!1),{prepareCheckoutSession:p,navigateToCheckout:C}=ie(),y=$(),o=J(),{country:x}=ce(),b=le({country:x,currentAccount:o,location:"CreditPurchaseModal",shouldUsePaidSubscriptionBillingCurrency:!0}),n=(w=o==null?void 0:o.mustGetSubscriptionBillingCurrency("CreditPurchaseModal"))!=null?w:"USD",{data:u,isLoading:_,error:I}=ue({ctx:y,currency:n});let f=null;!_&&!I&&u&&(f=u.currencyConfig.amount_per_credit);const S=ee(),N=Q(),{data:D}=Y({queryKey:["creditPurchaseRateCard"],queryFn:()=>re.safeGet("/subscriptions/credit-purchase-rate-card"),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),z=i.useCallback(async()=>{if(!c){l(!0);try{const r=o==null?void 0:o.id;if(!r)throw new Error("No account_id found");const H=await p({credit_purchase_data:{quantity:h,unit:"credit",account_id:r},billing_details:b});await C(H)}catch(r){te.addError(r),S.warning(N.formatMessage(m.paymentErrorWarning),{hasCloseButton:!0})}finally{l(!1)}}},[b,N,c,C,h,p,S,o]),q=de(h,300),E=r=>!D||!D[r].price?"N/A":Math.round(q/parseFloat(D[r].price)).toLocaleString();if(b)return e.jsxs(se,{isOpen:!0,onClose:t,type:"success",size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[e.jsx(F.Header,{title:e.jsx(g,d({},m.title))}),e.jsxs("div",{className:"flex flex-col px-6",children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(g,k(d({},m.description),{values:{link:r=>e.jsx(ae,{href:Ce,target:"_blank",children:r})}}))}),f&&e.jsx("div",{className:"mt-6",children:e.jsx(xe,{minCredits:500,maxCredits:1e5,increment:250,amountPerCredit:f,currency:n,numCredits:h,setNumCredits:M})}),D&&e.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-token-bg-tertiary text-token-text-secondary mt-4 flex w-full gap-2 rounded-lg p-3 text-sm",children:[e.jsx(pe,{}),e.jsx(g,k(d({},m.amountToAddDescription),{values:{deepResearchCount:E("deep_research_completion"),gpt5proChatCount:E("chat_completion_5_pro"),imagegenCount:E("chat_tool_imagegen")}}))]})]}),e.jsx(F.Actions,{className:"sm:p-2 md:p-6",secondaryButton:e.jsx(U,{disabled:c,onClick:t,color:"secondary",children:e.jsx(g,d({},m.cancel))}),primaryButton:e.jsx(U,{loading:c,onClick:()=>z(),color:"primary",children:e.jsx(g,d({},m.next))})})]})};function xe({numCredits:t,minCredits:s,maxCredits:a,increment:j,amountPerCredit:v,currency:h,setNumCredits:M}){const c=i.useRef(null);i.useEffect(()=>{var n;(n=c.current)==null||n.focus()},[c]);const l=i.useRef(null),p=i.useRef(0),C=i.useCallback(n=>{M(u=>me(u+n,s,a))},[a,s,M]),y=i.useCallback(n=>{const f=300-n*50;return f>25?f:25},[]),o=i.useCallback(n=>{C(n),p.current=0;const u=()=>{p.current+=1,C(n);const _=y(p.current);l.current=setTimeout(u,_)};l.current=setTimeout(u,y(p.current))},[C,y]),x=i.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),b=Math.round(t*v*100)/100;return e.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[e.jsx("label",{className:"mb-1 flex text-base font-medium",htmlFor:"Credits",children:e.jsx(g,d({},m.amountToAdd))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("span",{className:"text-token-text-secondary pointer-events-none absolute end-3 top-1/2 -translate-y-1/2 text-sm",children:e.jsx(g,k(d({},m.numCredits),{values:{numCredits:t}}))}),e.jsx("input",{ref:c,name:"Credits",value:b.toLocaleString("en-US",{style:"currency",currency:h,maximumFractionDigits:2}),disabled:!0,autoFocus:!0,tabIndex:0,className:"bg-token-bg-primary text-token-text-primary m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{disabled:t<=s,onMouseDown:()=>o(-j),onMouseUp:x,onMouseLeave:x,children:e.jsx(he,{className:oe("icon",t<=s&&"text-token-text-tertiary")})}),e.jsx(O,{disabled:t>=a,onMouseDown:()=>o(j),onMouseUp:x,onMouseLeave:x,children:e.jsx(ge,{className:"icon"})})]})]})]})}const m=Z({title:{id:"components.business.CreditPurchaseModal.title",defaultMessage:"Buy more credits for your team"},description:{id:"components.business.CreditPurchaseModal.description",defaultMessage:"Give your team continued access to advanced features after hitting plan limits. Credits valid for 12 months. <link>View rate card</link>."},amountToAdd:{id:"components.business.CreditPurchaseModal.amountToAdd",defaultMessage:"Amount to add"},amountToAddDescription:{id:"components.business.CreditPurchaseModal.amountToAddDescription",defaultMessage:"Equal to {deepResearchCount} deep research tasks, {gpt5proChatCount} GPT-5 pro messages, or {imagegenCount} imagegen messages."},numCredits:{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}"},paymentErrorWarning:{id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},cancel:{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"},next:{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"}});export{Me as CreditPurchaseModal,xe as CreditSelectorButtons};
//# sourceMappingURL=mbideqths2dg8l8v.js.map
