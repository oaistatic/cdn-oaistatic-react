var Z=Object.defineProperty;var q=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var Q=(e,t,o)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,r=(e,t)=>{for(var o in t||(t={}))ee.call(t,o)&&Q(e,o,t[o]);if(q)for(var o of q(t))ae.call(t,o)&&Q(e,o,t[o]);return e};import{c as se,r as H,h as te,j as a,M as l,e as oe,y as ie,d as ce}from"./bubexfvksfr7893o.js";import{dl as re,da as ne,u as le,e9 as de,p as ue,kx as pe,dg as fe,ex as Y,R as $,oA as me,pM as he,nT as ve,D as xe,a7 as ge,ca as ke,aC as be,db as je,d5 as J,d6 as V,dU as We}from"./ncw8zw682jinppua.js";import{H as we}from"./ktpmjflyns54a7dy.js";import{W as Me}from"./guejgwxn789esoyt.js";import{eB as Se,eC as Ne}from"./lm3g1zm00rp6al39.js";import"./fwn4bwvyx3h4ty5g.js";import"./l1teaxoievyk0rz1.js";function ye(){"use forget";var z,K;const e=se.c(48),t=re(),{data:o}=ne(),W=le(),s=de(o),p=s!=null||o!=null,[c,d]=H.useState(!1),u=o==null?void 0:o.accountItems,{count:R}=Se((z=s==null?void 0:s.id)!=null?z:"");let w;e[0]!==W?(w=Ne(),e[0]=W,e[1]=w):w=e[1];const B=w,X=s==null?void 0:s.id,n=u==null?void 0:u.find(E=>E.id===X),G=!((K=s==null?void 0:s.eligibleForReactivation)!=null?K:!1),U=(s==null?void 0:s.isOwnerOfAccount())&&s.isSelfServeBusiness()&&!s.hasPaidSubscription()&&!G,I=(s==null?void 0:s.isOwnerOfAccount())&&s.isSelfServeBusiness()&&s.hasPaidSubscription()&&!G;let M;e[2]!==u?(M=u==null?void 0:u.filter(Ce),e[2]=u,e[3]=M):M=e[3];const j=M,f=te(),T=ue();let S=pe;s&&(S=s.mustGetSubscriptionBillingCurrency("DeactivatedWorkspaceModal"));let N,y;e[4]!==s?(N=()=>{s||(xe.addError(new Error("Current account is undefined in DeactivatedWorkspaceModal")),ge.logEvent("chatgpt_undefined_current_account"))},y=[s],e[4]=s,e[5]=N,e[6]=y):(N=e[5],y=e[6]),H.useEffect(N,y);let C;e[7]!==n||e[8]!==B||e[9]!==S||e[10]!==R?(C=()=>{ke.setPurchaseWorkspaceData({minimumSeats:Math.max(R,B),billingDetails:{currency:S},existingAccount:n})},e[7]=n,e[8]=B,e[9]=S,e[10]=R,e[11]=C):C=e[11];const L=C;let P;e[12]!==f||e[13]!==d||e[14]!==T?(P=async()=>{d(!0);try{const E=await $.safeGet("/payments/customer_portal",{intercomEventOnError:"fetch-error:customer_portal:get"});location.href=E.url,d(!1)}catch(E){d(!1),T.warning(f.formatMessage(i.unableToOpenStripeDashboard),{hasCloseButton:!0})}},e[12]=f,e[13]=d,e[14]=T,e[15]=P):P=e[15];const F=P;if(s==null||!n||!j)return null;let _;e[16]===Symbol.for("react.memo_cache_sentinel")?(_=a.jsx("span",{className:"text-lg",children:a.jsx(l,r({},i.workspaceDeactivated))}),e[16]=_):_=e[16];let m;e[17]!==n.data.profilePictureUrl?(m=a.jsx(fe,{src:n.data.profilePictureUrl}),e[17]=n.data.profilePictureUrl,e[18]=m):m=e[18];let h;e[19]!==n.data.name?(h=a.jsx("div",{children:n.data.name}),e[19]=n.data.name,e[20]=h):h=e[20];let v;e[21]!==m||e[22]!==h?(v=a.jsxs("div",{className:"flex w-full items-center gap-2",children:[m,h]}),e[21]=m,e[22]=h,e[23]=v):v=e[23];let A;e[24]===Symbol.for("react.memo_cache_sentinel")?(A=a.jsx("div",{children:a.jsxs("ul",{className:"list-disc ps-5 text-sm",children:[a.jsx("li",{className:"mb-1",children:a.jsx(l,r({},i.chatHistoryUnavailable))}),a.jsx("li",{children:a.jsx(l,r({},i.otherWorkspacesAvailable))})]})}),e[24]=A):A=e[24];let x;e[25]!==U||e[26]!==c||e[27]!==L?(x=U&&a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsx("p",{children:a.jsx(l,r({},i.purchaseNewSubscription))}),a.jsx(Y,{className:"m-auto mt-2 w-full",loading:c,onClick:L,children:a.jsx(l,r({},i.purchaseNewSubscriptionButton))})]}),e[25]=U,e[26]=c,e[27]=L,e[28]=x):x=e[28];let g;e[29]!==I||e[30]!==c||e[31]!==F?(g=I&&a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsx("p",{children:a.jsx(l,r({},i.resolveOutstandingInvoice))}),a.jsx(Y,{className:"m-auto mt-2 w-full",loading:c,onClick:F,children:a.jsx(l,r({},i.manageSubscriptionButton))})]}),e[29]=I,e[30]=c,e[31]=F,e[32]=g):g=e[32];let O;e[33]===Symbol.for("react.memo_cache_sentinel")?(O=a.jsx(we,{}),e[33]=O):O=e[33];let k;e[34]!==j||e[35]!==f||e[36]!==c||e[37]!==d||e[38]!==t?(k=a.jsx("div",{className:"w-full justify-center",children:j.length>0?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"mb-2 text-base font-normal",children:a.jsx(l,r({},i.selectWorkspace))}),a.jsx(Me,{data:j})]}):a.jsxs("div",{className:"flex flex-col gap-6 text-sm",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h3",{className:"text-base font-normal",children:a.jsx(l,r({},i.createPersonalWorkspace))}),a.jsx(l,r({},i.deactivatedWorkspaceReason))]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex w-full items-center gap-2",children:[t&&t.picture&&a.jsx("img",{alt:"Profile",src:t.picture,className:"flex h-6 w-6 items-center justify-center rounded-full"}),t&&a.jsx("span",{className:"truncate",children:t.name})]}),a.jsx(Y,{title:f.formatMessage(i.createPersonalWorkspaceButton),loading:c,onClick:async()=>{d(!0),await $.safePost("/accounts/personal"),me(he),ve()},color:"primary",className:"ms-4"})]})]})}),e[34]=j,e[35]=f,e[36]=c,e[37]=d,e[38]=t,e[39]=k):k=e[39];let b;e[40]!==x||e[41]!==g||e[42]!==k||e[43]!==v?(b=a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[v,A,x,g,O,k]}),e[40]=x,e[41]=g,e[42]=k,e[43]=v,e[44]=b):b=e[44];let D;return e[45]!==p||e[46]!==b?(D=a.jsx(be,{testId:"modal-deactivated-workspace",type:"success",onClose:je,isOpen:p,title:_,children:b}),e[45]=p,e[46]=b,e[47]=D):D=e[47],D}function Ce(e){return!e.isDeactivated()}const i=oe({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}}),Ie=ie(function(){const t=J(V.workspaces),o=We(),W=J(V.workspaceId),s=t.find(c=>c.id===W),p=ce();return H.useEffect(()=>{o&&(!s||!s.deactivated)&&p("/")},[o,s,p]),o&&(!s||!s.deactivated)?a.jsx("div",{}):a.jsx(ye,{})});export{Ie as default};
//# sourceMappingURL=i7sna5diumgvi0gk.js.map
