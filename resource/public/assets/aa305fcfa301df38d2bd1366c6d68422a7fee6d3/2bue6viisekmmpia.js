const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/impv9cw906sxjwad.js","assets/bubexfvksfr7893o.js","assets/paev76b70tpkjsm5.js","assets/l5e2clfxpgm30p9v.js","assets/lm3g1zm00rp6al39.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/conversation-small-lq38g8zw.css"])))=>i.map(i=>d[i]);
var B=Object.defineProperty;var k=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var A=(s,t,n)=>t in s?B(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,O=(s,t)=>{for(var n in t||(t={}))z.call(t,n)&&A(s,n,t[n]);if(k)for(var n of k(t))U.call(t,n)&&A(s,n,t[n]);return s};import{j as e,M as r,_ as b,r as a,h as V,u as H}from"./bubexfvksfr7893o.js";import{az as C,aB as P,l7 as Q,aA as _,fi as F,u as Y,q7 as $,dU as Z,fx as J,fy as K,dZ as L,d_ as w,q8 as W,am as X,aC as ee,q9 as D,nJ as se,dh as te}from"./ncw8zw682jinppua.js";import{gs as p,bZ as ne,gt as oe,x as ae}from"./lm3g1zm00rp6al39.js";import{G as ie}from"./mcysfy6v18mi457y.js";const re=C(()=>b(()=>import("./impv9cw906sxjwad.js"),__vite__mapDeps([0,1])),{loading:s=>_(s)}),le=C(()=>b(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([2,1])),{loading:s=>_(s)}),ce=C(()=>b(()=>import("./l5e2clfxpgm30p9v.js"),__vite__mapDeps([3,1])),{loading:s=>_(s)});function de({onClose:s}){const t=Q("installations/select_target");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-0 mb-4 flex justify-center",children:e.jsx("div",{className:"bg-tertiary border-token-border-subtle rounded-lg border p-3",children:e.jsx(ce,{className:"h-10 w-10"})})}),e.jsx("h2",{className:"mb-6 text-center text-xl font-semibold",children:e.jsx(r,{id:"e7S220",defaultMessage:"One last step"})}),e.jsxs("div",{className:"bg-tertiary border-token-border-subtle mb-6 flex items-start gap-3 rounded-lg border p-4",children:[e.jsx(re,{className:"icon mt-0.5"}),e.jsxs("div",{className:"flex flex-grow flex-col gap-1",children:[e.jsx("span",{className:"font-medium",children:e.jsx(r,{id:"MQhj3s",defaultMessage:"Configure your repositories"})}),e.jsx("span",{className:"text-token-text-tertiary text-sm",children:e.jsx(r,{id:"ZvosJF",defaultMessage:"You still need to choose the repositories ChatGPT can access."})})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(P,{className:"w-full",size:"large",onClick:()=>{window.open(t,"_blank"),s(!1)},children:[e.jsx(r,{id:"o1jiyf",defaultMessage:"Configure Repositories on GitHub"}),e.jsx(le,{className:"icon-sm ms-2 inline-block"})]})})]})}const ue=C(()=>b(()=>import("./lm3g1zm00rp6al39.js").then(s=>s.zl),__vite__mapDeps([4,1,5,6,7])),{loading:s=>_(s)}),pe=C(()=>b(()=>import("./paev76b70tpkjsm5.js"),__vite__mapDeps([2,1])),{loading:s=>_(s)}),q=C(()=>b(()=>import("./l5e2clfxpgm30p9v.js"),__vite__mapDeps([3,1])),{loading:s=>_(s)}),me=({connectorLink:s,isLoading:t,onClose:n,onContinue:l})=>{var T;const S=V(),m=H(),[u,c]=a.useState(""),[x,N]=a.useState(new Map),y=ne(u,500),{data:g,isLoading:I,isFetchingNextPage:R,hasNextPage:v,fetchNextPage:E}=oe({enabled:!!s,debouncedSearchTerm:y,linkId:(T=s==null?void 0:s.id)!=null?T:""}),{mutateAsync:j,isPending:G}=se(),M=a.useCallback(async()=>{if(s)try{await j({link:s,user_extension:{type:"GithubUserApiExtension",opted_in_repository_ids:Array.from(x.keys())}}),m.invalidateQueries({queryKey:["user_connection_sync_configuration"]}),l({reposToIndex:Array.from(x.values()).filter(o=>!o.is_code_search_indexed).map(o=>o.repository_full_name)})}catch(o){}},[s,j,x,m,l]),f=a.useMemo(()=>{var o;return(o=g==null?void 0:g.pages.flatMap(h=>h.repos))!=null?o:[]},[g]),d=f.length>5||!!y,i=I||t;return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:e.jsx(r,{id:"BhSDq8",defaultMessage:"Which repositories do you use?"}),connectorIcon:e.jsx("div",{className:"rounded-xl border-[0.5px] p-2 shadow-sm",children:e.jsx(q,{className:"icon-2xl"})}),onClose:()=>n(!1)}),e.jsx("div",{className:"text-token-text-secondary mt-2 mb-6 text-center text-sm",children:d?e.jsx(r,{id:"o+DCDE",defaultMessage:"Choose up to 5. These repositories will sync with ChatGPT for improved speed and quality. Not seeing a repository? <link>Learn more</link>",values:{link:o=>e.jsx("a",{href:"https://help.openai.com/en/articles/11145903-chatgpt-connectors",target:"_blank",rel:"noopener noreferrer",className:"underline",children:o})}}):e.jsx(r,{id:"8FVBwU",defaultMessage:"These repositories will sync with ChatGPT for improved speed and quality. Not seeing a repository? <link>Learn more</link>",values:{link:o=>e.jsx("a",{href:"https://help.openai.com/en/articles/11145903-chatgpt-connectors",target:"_blank",rel:"noopener noreferrer",className:"underline",children:o})}})}),d&&e.jsx(ae,{ariaLabel:S.formatMessage({id:"D2Xhv1",defaultMessage:"Search repositories"}),autoComplete:"off",className:"mb-2",icon:ue,iconPosition:"left",name:"search-repos",onChange:o=>{c(o.target.value)},placeholder:S.formatMessage({id:"jYgjAb",defaultMessage:"Search repositories"})}),e.jsx(ie,{allRepos:f,fetchNextPage:E,hasNextPage:v,isFetchingNextPage:R,isLoading:i,onChange:N,searchTerm:y,selectedRepos:x}),e.jsx(P,{className:"mt-2 w-full",disabled:i,loading:G,onClick:()=>{x.size===0?l({reposToIndex:[]}):M()},size:"large",children:e.jsx(r,O({},te.continueButtonText))})]})},xe=({isLoading:s,onClose:t,reposToIndex:n})=>e.jsxs(e.Fragment,{children:[e.jsx(D,{title:e.jsx(r,{id:"hxqAFz",defaultMessage:"Complete setup"}),connectorIcon:e.jsx("div",{className:"rounded-xl border-[0.5px] p-2 shadow-sm",children:e.jsx(q,{className:"icon-2xl"})}),onClose:()=>t(!1)}),e.jsx("div",{className:"text-token-text-secondary mt-2 mb-6 text-center text-sm",children:e.jsx(r,{id:"IQqMC0",defaultMessage:"Your repositories must be indexed by GitHub before they can be accessed by ChatGPT. GitHub will open in a new tab, and automatically close. Indexing should complete in 5-10 minutes."})}),e.jsxs(P,{className:"mt-2 w-full",loading:s,onClick:()=>{window.open("https://github.com/search?q=".concat(n.map(l=>"repo:".concat(l)).join("+"),"&type=code"),"_blank"),t(!1)},size:"large",children:[e.jsx(r,{id:"CfvY9y",defaultMessage:"Start indexing on GitHub"}),e.jsx(pe,{className:"icon-sm ms-2 inline-block"})]})]});function _e({initialState:s=p.ConfigureRepos,onClose:t,onFinishFlow:n}){var o;const l=F(),S=Y(),m=$(S),u=Z(),[c,x]=a.useState(s),[N,y]=a.useState([]),{platformConnectors:g,isLoading:I}=J(!0),{connectorLinks:R,isLoading:v}=K({fetchValidLinksOnly:!0}),E=g.get(L[w.GITHUB_CONNECTOR]),j=(o=R.get(L[w.GITHUB_CONNECTOR]))==null?void 0:o[0],{isLoading:G,isEnabled:M}=W(),f=I||v||G,d=a.useCallback(h=>{t(h)},[t]),i=a.useCallback(()=>{d(!1),n==null||n()},[d,n]),T=a.useMemo(()=>{switch(c){case p.ConfigureRepos:return e.jsx(de,{onClose:()=>d(!1)});case p.SyncRepos:return l&&!m&&e.jsx(me,{connector:E,connectorLink:j,isLoading:f,onContinue:({reposToIndex:h})=>{h.length>0?(y(h),x(p.IndexRepos)):i()},onClose:i});case p.IndexRepos:return e.jsx(xe,{isLoading:f,onClose:i,reposToIndex:N})}},[c,N,d,E,j,f,l,m,i]);return a.useEffect(()=>{!l&&c===p.SyncRepos&&d(!1)},[l,c,d]),a.useEffect(()=>{m&&c===p.SyncRepos&&i()},[m,c,i]),a.useEffect(()=>{!(u!=null&&u.isPersonalAccount())&&(u==null?void 0:u.planType)!==X.SELF_SERVE_BUSINESS&&!M&&i()},[u,i,M]),e.jsx(ee,{className:"max-w-[400px] px-2",hideSeparator:!0,isOpen:!0,onClose:()=>d(!1),showCloseButton:c===p.ConfigureRepos,title:c===p.ConfigureRepos?e.jsx("span",{}):void 0,testId:"modal-github-onboarding",type:"success",children:T})}export{_e as GithubOnboardingModal};
//# sourceMappingURL=2bue6viisekmmpia.js.map
