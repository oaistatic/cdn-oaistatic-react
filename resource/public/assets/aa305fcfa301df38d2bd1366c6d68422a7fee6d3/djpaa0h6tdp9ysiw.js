const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kaw18xu9jo85v1g9.js","assets/bubexfvksfr7893o.js"])))=>i.map(i=>d[i]);
var bt=Object.defineProperty,vt=Object.defineProperties;var wt=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var lt=(n,e,t)=>e in n?bt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ke=(n,e)=>{for(var t in e||(e={}))it.call(e,t)&&lt(n,t,e[t]);if(Ae)for(var t of Ae(e))ot.call(e,t)&&lt(n,t,e[t]);return n},Qe=(n,e)=>vt(n,wt(e));var Ye=(n,e)=>{var t={};for(var l in n)it.call(n,l)&&e.indexOf(l)<0&&(t[l]=n[l]);if(n!=null&&Ae)for(var l of Ae(n))e.indexOf(l)<0&&ot.call(n,l)&&(t[l]=n[l]);return t};import{_ as ut,c as G,r as S,h as et,j as a,M as Q}from"./bubexfvksfr7893o.js";import{az as mt,D as St,br as jt,fN as Je,sT as kt,kR as $t,kl as Ct,cz as R,d as I,aB as gt,aA as Mt,ep as Pt,eW as pt,cZ as Nt,gQ as Te,dR as Et,lT as yt,or as K,aC as At,aU as Tt,aF as _t,u as Rt,kj as Lt,g as Ot,b as It,a2 as Dt,lo as Ft,ak as Bt}from"./ncw8zw682jinppua.js";import{pa as Gt,pb as Xe,pc as at,pd as Ut,aN as zt,aA as rt,aI as Vt,n as qt}from"./lm3g1zm00rp6al39.js";import{u as Wt}from"./hbafdd864xefk46q.js";import{b as Ht}from"./fwwkwalw87hti22b.js";import"./fk5dn736y6oc9os0.js";import"./dgs0l83heankdts0.js";import"./od50gemg82u3x7jt.js";import"./lowm54usy4rzuo31.js";import"./l8gfdbxyfhb5crrj.js";const Ze=mt(()=>ut(()=>Promise.resolve().then(()=>us),void 0).then(n=>n.PersonalityOnboardingModal)),Kt=async({canClose:n,ctx:e,mode:t,intl:l,flow:o,isLegacy:s,selectedPersonality:c,selectedTraits:i,conversationId:r,messageId:m=null,onClose:x,onSubmit:g})=>{const p=Gt(e,o,t,{isLegacy$:s,selectedPersonality$:c,selectedTraits$:i}),{logging:d}=p;try{await p.serverDataPromise}catch(f){St.addError(f,{ctx:e,mode:t,flow:o,isLegacy:s,selectedPersonality:c,selectedTraits:i,conversationId:r});return}jt(e,Ze,{canClose:n,isOpen:!0,onboarding:p,onClose:()=>{Je(e,Ze),Xe(d,!1,d.finalSelection),at(d),x==null||x(d)},onSubmit$:f=>{if(Je(e,Ze),Xe(d,!0,d.finalSelection),at(d),g==null||g(f,d),t==="personality"&&"key"in f){if(kt(e,f.key,r,m,{optimistic:!0}),f.key==="default")return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{const y=$t(e),u=f.key!=="default"?l.formatMessage({id:"+CiZn7",defaultMessage:"Base style and tone updated"}):l.formatMessage({id:"gqHlYp",defaultMessage:"Base style and tone preserved"});y.success(u,{duration:4,hasCloseButton:!0})})})}else if(t==="traits"&&Array.isArray(f)){const y=new Map;f.forEach(u=>{y.set(u.key,"more")}),Ct(e,y,r,m)}}})};function Qt(n){"use forget";const e=G.c(34),{personality:t,active:l,intervalSec:o,prefersReducedMotion:s,className:c}=n,i=o===void 0?4:o,r=s===void 0?!1:s,[m,x]=S.useState(-1),g=S.useRef(null),p=et(),[d,f]=S.useState(!1),[y,u]=S.useState(0),j=S.useDeferredValue(l);let b,k;e[0]!==j?(b=()=>{if(j)return()=>{S.startTransition(()=>{x(-1),f(!1)})}},k=[j],e[0]=j,e[1]=b,e[2]=k):(b=e[1],k=e[2]),S.useEffect(b,k);let h,P;e[3]!==d?(h=()=>{if(d)return;const _=window.setTimeout(()=>{f(!0),u(Yt)},1300);return()=>window.clearTimeout(_)},P=[d],e[3]=d,e[4]=h,e[5]=P):(h=e[4],P=e[5]),S.useEffect(h,P);let E;e[6]!==p||e[7]!==t?(E=()=>{var _;return"type"in t&&t.type==="legacy"?t.legacy_messages.map(L=>p.formatMessage(L)):(_=t.example_messages)!=null?_:[]},e[6]=p,e[7]=t,e[8]=E):E=e[8];const[$]=S.useState(E);let A;e[9]!==i||e[10]!==$.length||e[11]!==d?(A=()=>{if(d)return Ut(g,i*1e3,()=>x(0),()=>x(_=>(_+1)%Math.max(1,$.length)))},e[9]=i,e[10]=$.length,e[11]=d,e[12]=A):A=e[12];let v;e[13]!==i||e[14]!==$||e[15]!==d?(v=[d,$,i],e[13]=i,e[14]=$,e[15]=d,e[16]=v):v=e[16],S.useEffect(A,v);let C;e[17]!==c?(C=R("relative col-span-full row-span-full grid overflow-clip",c),e[17]=c,e[18]=C):C=e[18];let T;e[19]!==d?(T=!d&&a.jsx(Zt,{}),e[19]=d,e[20]=T):T=e[20];let M;if(e[21]!==m||e[22]!==$||e[23]!==r||e[24]!==y){let _;e[26]!==m||e[27]!==r||e[28]!==y?(_=(L,F)=>a.jsx(S.Activity,{mode:F===m?"visible":"hidden",children:a.jsxs("div",{className:R("ease-spring-fast col-span-full row-span-full h-full transition-[opacity,display] transition-discrete contain-strict motion-reduce:transition-none! starting:opacity-0",F===m?"opacity-100 duration-2000":"opacity-0 duration-0"),"aria-label":L,children:[a.jsx("div",{className:"invisible",children:L}),a.jsx("div",{className:"absolute inset-0","aria-hidden":!0,children:a.jsx(Ht,{className:"text-token-text-primary! text-heading-2! line-clamp-none cursor-default! font-medium",text:L,isStreamingAnimation:!r},y)})]})},F),e[26]=m,e[27]=r,e[28]=y,e[29]=_):_=e[29],M=$.map(_),e[21]=m,e[22]=$,e[23]=r,e[24]=y,e[25]=M}else M=e[25];let D;return e[30]!==C||e[31]!==T||e[32]!==M?(D=a.jsxs("div",{className:C,"aria-live":"polite",children:[T,M]}),e[30]=C,e[31]=T,e[32]=M,e[33]=D):D=e[33],D}function Yt(n){return n+1}function Zt(){"use forget";const n=G.c(1);let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=a.jsx("span",{className:"pulsing-dot absolute start-0 top-0 ms-3 mt-3 inline-block size-4 rounded-full bg-black motion-reduce:animate-none dark:bg-white"}),n[0]=e):e=n[0],e}function xt(n){"use forget";const e=G.c(18),{id:t,selected$:l,canSelect:o,isLegacy:s,children:c,className:i,onSelect:r}=n,m=I(l),x=m||o,g=!s||!m?"custom":"accent",p=!s&&"hover:bg-token-bg-tertiary/70 font-normal",d=m||!s?"":o?"bg-token-bg-tertiary text-token-text-secondary hover:bg-token-text-tertiary/70 hover:text-token-interactive-label-secondary-hover":"bg-token-bg-tertiary/75 text-token-text-secondary/75 hover:bg-token-bg-tertiary hover:text-token-text-primary!";let f;e[0]!==i||e[1]!==p||e[2]!==d?(f=R("focus-visible:focus-ring px-4 py-3",p,d,i),e[0]=i,e[1]=p,e[2]=d,e[3]=f):f=e[3];const y=!s,u=s?!x:!1;let j;e[4]!==t||e[5]!==r||e[6]!==m||e[7]!==l?(j=()=>{r||l.set(!m),r==null||r(t)},e[4]=t,e[5]=r,e[6]=m,e[7]=l,e[8]=j):j=e[8];let b;return e[9]!==c||e[10]!==t||e[11]!==m||e[12]!==g||e[13]!==f||e[14]!==y||e[15]!==u||e[16]!==j?(b=a.jsx(gt,{color:g,className:f,contentWrapperClassName:"w-full",id:t,fullWidth:y,"data-personality-id":t,role:"checkbox","aria-checked":m,visuallyDisabled:u,type:"button",onClick:j,children:c}),e[9]=c,e[10]=t,e[11]=m,e[12]=g,e[13]=f,e[14]=y,e[15]=u,e[16]=j,e[17]=b):b=e[17],b}const Jt=mt(()=>ut(()=>import("./kaw18xu9jo85v1g9.js"),__vite__mapDeps([0,1])),{loading:n=>Mt(n)});function Xt(n){"use forget";var T;const e=G.c(41);let t,l,o;e[0]!==n?(T=n,{personality:l,isLegacy:o}=T,t=Ye(T,["personality","isLegacy"]),e[0]=n,e[1]=t,e[2]=l,e[3]=o):(t=e[1],l=e[2],o=e[3]);const s=o===void 0?!1:o,{selected$:c}=t,{badge:i,key:r,label:m,description:x,icon_src:g}=l,p=I(c),d=!s&&"text-token-text-primary! justify-start";let f;e[4]!==d?(f=R("group/pill hover:border-token-border-light border-1 border-transparent py-1! hover:text-white/90",d),e[4]=d,e[5]=f):f=e[5];const y=s?"inline-flex items-center gap-1":"flex w-full items-center gap-3";let u;e[6]!==y?(u=R("justify-start",y),e[6]=y,e[7]=u):u=e[7];let j;e[8]!==g||e[9]!==s?(j=!s&&g&&a.jsx("div",{"aria-hidden":!0,children:a.jsx(Pt,{svgString:g,className:"size-[1lh]"})}),e[8]=g,e[9]=s,e[10]=j):j=e[10];const b=!s&&"flex-col";let k;e[11]!==b?(k=R("flex flex-1 items-start",b),e[11]=b,e[12]=k):k=e[12];let h;e[13]!==i||e[14]!==s?(h=M=>a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:R("text-inherit",s?"after:ms-1.5 after:me-1 after:content-['â€¢']":"text-[17px]"),children:M}),i&&a.jsx("div",{className:"badge-base bg-token-interactive-bg-accent-default text-token-interactive-label-accent-default",children:i})]}),e[13]=i,e[14]=s,e[15]=h):h=e[15];let P;e[16]!==s||e[17]!==c?(P=M=>a.jsx(es,{isLegacy:s,selected$:c,children:M}),e[16]=s,e[17]=c,e[18]=P):P=e[18];let E;e[19]!==x||e[20]!==m||e[21]!==P||e[22]!==h?(E=a.jsx(Q,{id:"tzFELg",defaultMessage:"<titleSpan>{title}</titleSpan><subtitleSpan>{subtitle}</subtitleSpan>",values:{title:m,subtitle:x,titleSpan:h,subtitleSpan:P}}),e[19]=x,e[20]=m,e[21]=P,e[22]=h,e[23]=E):E=e[23];let $;e[24]!==E||e[25]!==k?($=a.jsx("div",{className:k,children:E}),e[24]=E,e[25]=k,e[26]=$):$=e[26];let A;e[27]!==s||e[28]!==p?(A=!s&&a.jsx("div",{"aria-hidden":!0,className:R("text-token-interactive-icon-accent-default self-center duration-75 ease-linear motion-safe:transition-opacity",p?"opacity-100":"opacity-0"),children:a.jsx(Jt,{})}),e[27]=s,e[28]=p,e[29]=A):A=e[29];let v;e[30]!==$||e[31]!==A||e[32]!==u||e[33]!==j?(v=a.jsxs("div",{className:u,children:[j,$,A]}),e[30]=$,e[31]=A,e[32]=u,e[33]=j,e[34]=v):v=e[34];let C;return e[35]!==t||e[36]!==s||e[37]!==r||e[38]!==v||e[39]!==f?(C=a.jsx(xt,Qe(Ke({id:r,isLegacy:s,className:f},t),{children:v})),e[35]=t,e[36]=s,e[37]=r,e[38]=v,e[39]=f,e[40]=C):C=e[40],C}function es(n){"use forget";const e=G.c(6),{children:t,selected$:l,isLegacy:o}=n,s=I(l),c=o&&"group-hover/pill:text-inherit",i=s&&o?"text-inherit":"text-token-text-tertiary";let r;e[0]!==c||e[1]!==i?(r=R("text-start",c,i),e[0]=c,e[1]=i,e[2]=r):r=e[2];let m;return e[3]!==t||e[4]!==r?(m=a.jsx("span",{className:r,children:t}),e[3]=t,e[4]=r,e[5]=m):m=e[5],m}function ts(n){"use forget";const e=G.c(17),{personalities:t,canSelectMore:l,isFullScreen:o,isLegacy:s,onSelect:c}=n;let i;e[0]!==c||e[1]!==t?(i=d=>{pt(()=>{for(const f of t)f.selected$.set(f.key===d);c==null||c(d)})},e[0]=c,e[1]=t,e[2]=i):i=e[2];const r=i,m=s||!o?"pt-1":"max-md:gap-1";let x;e[3]!==m?(x=R("flex flex-col gap-2",m),e[3]=m,e[4]=x):x=e[4];let g;if(e[5]!==l||e[6]!==s||e[7]!==r||e[8]!==t){let d;e[10]!==l||e[11]!==s||e[12]!==r?(d=f=>a.jsx("li",{children:a.jsx(Xt,{personality:f,isLegacy:s,selected$:f.selected$,canSelect:!l,onSelect:r})},f.key),e[10]=l,e[11]=s,e[12]=r,e[13]=d):d=e[13],g=t.map(d),e[5]=l,e[6]=s,e[7]=r,e[8]=t,e[9]=g}else g=e[9];let p;return e[14]!==x||e[15]!==g?(p=a.jsx("ul",{className:x,"aria-labelledby":"personality-onboarding-personality-list",children:g}),e[14]=x,e[15]=g,e[16]=p):p=e[16],p}function ss(n){"use forget";var s;const e=G.c(8);let t,l;e[0]!==n?(s=n,{trait:l}=s,t=Ye(s,["trait"]),e[0]=n,e[1]=t,e[2]=l):(t=e[1],l=e[2]);let o;return e[3]!==t||e[4]!==l.key||e[5]!==l.label||e[6]!==l.selected$?(o=a.jsx(xt,Qe(Ke({id:l.key,selected$:l.selected$},t),{children:l.label})),e[3]=t,e[4]=l.key,e[5]=l.label,e[6]=l.selected$,e[7]=o):o=e[7],o}function ns(n){"use forget";const e=G.c(12),{traits:t,canSelectMore:l,maxSelected:o}=n,s=o===void 0?3:o;let c;e[0]!==s||e[1]!==t?(c=x=>{pt(()=>{var f;const g=t.find(y=>y.key===x);if(!g)return;if(g.selected$()){g.selected$.set(!1);return}const d=t.filter(y=>y!==g&&y.selected$());d.length>=s&&((f=d.shift())==null||f.selected$.set(!1)),g.selected$.set(!0)})},e[0]=s,e[1]=t,e[2]=c):c=e[2];const i=c;let r;if(e[3]!==l||e[4]!==i||e[5]!==t){let x;e[7]!==l||e[8]!==i?(x=g=>a.jsx("li",{children:a.jsx(ss,{trait:g,canSelect:!l,onSelect:i})},g.key),e[7]=l,e[8]=i,e[9]=x):x=e[9],r=t.map(x),e[3]=l,e[4]=i,e[5]=t,e[6]=r}else r=e[6];let m;return e[10]!==r?(m=a.jsx("ul",{className:"flex flex-wrap gap-2",children:r}),e[10]=r,e[11]=m):m=e[11],m}function ls(n){"use forget";const e=G.c(3),{count:t,max:l,mode:o}=n;if(t===0&&o==="traits"){let c;return e[0]!==l?(c=a.jsx(Q,{id:"personality-onboarding.title.select",defaultMessage:"Choose up to {max}",values:{max:l}}),e[0]=l,e[1]=c):c=e[1],c}let s;return e[2]===Symbol.for("react.memo_cache_sentinel")?(s=a.jsx(Q,{id:"personality-onboarding.title.continue",defaultMessage:"Continue"}),e[2]=s):s=e[2],s}function ct(n){"use forget";const e=G.c(132),{canClose:t,onClose:l,onboarding:o}=n,{logging:s,mode:c,flow:i}=o,r=S.useId(),m=S.useId(),g=Nt()==="rtl",p=et(),d=Wt(!1),f=I(d);let y;e[0]!==o?(y=()=>o.personalities$(),e[0]=o,e[1]=y):y=e[1];const u=I(y);let j;e[2]!==o?(j=()=>o.traits$(),e[2]=o,e[3]=j):j=e[3];const b=I(j);let k;e[4]!==o?(k=()=>o.intervalSec$(),e[4]=o,e[5]=k):k=e[5];const h=I(k);let P;e[6]!==d?(P=()=>{const N=function(V){S.startTransition(()=>{d.set(V)})},w=function(V){N(V.matches)},B=matchMedia("(prefers-reduced-motion: reduce)");return B.addEventListener("change",w),N(B.matches),()=>{B.removeEventListener("change",w)}},e[6]=d,e[7]=P):P=e[7];let E;e[8]!==o||e[9]!==d?(E=[d,o],e[8]=o,e[9]=d,e[10]=E):E=e[10],S.useEffect(P,E);const $=S.useRef(null),A=S.useRef(null),v=c==="personality"?1:3;let C;e[11]!==u?(C=()=>u.filter(fs).length,e[11]=u,e[12]=C):C=e[12];const T=I(C);let M;e[13]!==b?(M=()=>b.filter(ds).length,e[13]=b,e[14]=M):M=e[14];const D=I(M),_=c==="personality"?T:D,L=_>v-1;let F;e[15]!==u?(F=()=>u.some(cs),e[15]=u,e[16]=F):F=e[16];const q=I(F),[z,W]=S.useState(!1);let U;e[17]!==b?(U=()=>b.some(rs),e[17]=b,e[18]=U):U=e[18];const Y=I(U);let Ce;e[19]!==u?(Ce=()=>{const N={};for(const w of u)N[w.key]=w.selected$();return N},e[19]=u,e[20]=Ce):Ce=e[20];const Z=I(Ce),Me=i==="legacy-new-user-personality-flow";let Pe;e[21]!==u?(Pe=()=>{const N=document.activeElement;if(!N||!(N instanceof HTMLButtonElement))return;const w=N.getAttribute("data-personality-id"),B=u.find(O=>O.key===w);return{id:w,focusedElement:N===A.current?"primary-action":N===$.current?"close":"personality",index:B?u.indexOf(B):-1}},e[21]=u,e[22]=Pe):Pe=e[22];const _e=Te(Pe);let Ne;e[23]!==_e||e[24]!==u?(Ne=N=>{const w=_e();if(!w)return!1;const B=u.length;if(!B)return!1;const O=w.focusedElement==="personality"&&w.index>=0?w.index:-1;let V;e:switch(N){case"home":{V=0;break e}case"end":{V=B-1;break e}case"forward":{V=O===-1?0:Math.min(B-1,O+1);break e}case"backward":V=O===-1?B-1:Math.max(0,O-1)}if(V===void 0)return!1;const st=u[V];if(!st)return!1;const nt=document.querySelector('[data-personality-id="'.concat(st.key,'"]'));return nt?(nt.focus(),!0):!1},e[23]=_e,e[24]=u,e[25]=Ne):Ne=e[25];const Re=Te(Ne),tt=I(yt),H=tt?Me?!1:i==="new-user-flow-personality"||i==="new-user-flow-traits":!0,J=H&&t,Le=H&&"m-auto w-[min(420px,95dvw)]";let X;e[26]!==Le?(X=R(Le),e[26]=Le,e[27]=X):X=e[27];let ee;e[28]!==s||e[29]!==c||e[30]!==u||e[31]!==n||e[32]!==b?(ee=N=>{N.preventDefault();let w;const{onSubmit$:B}=n,O=c==="personality"?u.filter(as).at(0):b.filter(os);!O||Array.isArray(O)&&O.length===0||(w="key"in O?O.key:O.map(is).join(","),Xe(s,!0,w),B(O))},e[28]=s,e[29]=c,e[30]=u,e[31]=n,e[32]=b,e[33]=ee):ee=e[33];let te;e[34]!==Re||e[35]!==g?(te=N=>{if(N.nativeEvent.isComposing)return;let w;e:switch(N.key){case"ArrowUp":{w="backward";break e}case"ArrowDown":{w="forward";break e}case"ArrowLeft":{w=g?"forward":"backward";break e}case"ArrowRight":{w=g?"backward":"forward";break e}case"Home":{w=g?"end":"home";break e}case"End":w=g?"home":"end"}w&&(N.preventDefault(),Re(w))},e[34]=Re,e[35]=g,e[36]=te):te=e[36];let se;e[37]!==J?(se=a.jsx(dt,{canShrink:J}),e[37]=J,e[38]=se):se=e[38];const Oe=!tt&&"flex-1 px-6!";let ne;e[39]!==Oe?(ne=R("text-token-text-primary grid min-h-[200px] px-10 [font-weight:500] contain-size",Oe),e[39]=Oe,e[40]=ne):ne=e[40];let le;e[41]!==t||e[42]!==l?(le=t&&a.jsx(Et,{onClick:l,ref:$,className:"not-keyboard-focused:outline-none absolute end-2 top-0 aspect-square md:top-2"}),e[41]=t,e[42]=l,e[43]=le):le=e[43];const Ie=z?"hidden":"visible",De=z?"opacity-0 duration-0":"opacity-100 duration-300";let ie;e[44]!==De?(ie=R("col-span-full row-span-full flex flex-col gap-2 transition-[opacity,display] transition-discrete ease-linear motion-reduce:transition-none! starting:opacity-100",De),e[44]=De,e[45]=ie):ie=e[45];let oe;e[46]!==i?(oe=i==="legacy-new-user-personality-flow"?a.jsx(Q,{id:"personality-onboarding.modal.title",defaultMessage:"Choose how ChatGPT sounds"}):a.jsx(Q,{id:"personality-onboarding.modal.title.try-new",defaultMessage:"Try a new personality for ChatGPT"}),e[46]=i,e[47]=oe):oe=e[47];let ae;e[48]!==r||e[49]!==oe?(ae=a.jsx("div",{className:"flex justify-between",children:a.jsx("h1",{className:"text-heading-2 font-medium text-balance",id:r,children:oe})}),e[48]=r,e[49]=oe,e[50]=ae):ae=e[50];let re;e[51]!==i?(re=i==="legacy-new-user-personality-flow"?a.jsx(Q,{id:"personality-onboarding.modal.subtitle",defaultMessage:"Adjust the personality ChatGPT uses when responding"}):a.jsx(Q,{id:"personality-onboarding.modal.subtitle.try-new",defaultMessage:"Adjust the style and tone of how ChatGPT responds to you. This doesn't impact ChatGPT's capabilities. You can change this anytime in Settings."}),e[51]=i,e[52]=re):re=e[52];let ce;e[53]!==m||e[54]!==re?(ce=a.jsx("p",{id:m,className:"text-token-text-tertiary text-body-regular text-pretty",children:re}),e[53]=m,e[54]=re,e[55]=ce):ce=e[55];let de;e[56]!==ie||e[57]!==ae||e[58]!==ce?(de=a.jsxs("div",{className:ie,children:[ae,ce]}),e[56]=ie,e[57]=ae,e[58]=ce,e[59]=de):de=e[59];let fe;e[60]!==Ie||e[61]!==de?(fe=a.jsx(S.Activity,{mode:Ie,children:de}),e[60]=Ie,e[61]=de,e[62]=fe):fe=e[62];const Fe=z?"visible":"hidden";let ue;if(e[63]!==h||e[64]!==p||e[65]!==u||e[66]!==f||e[67]!==Z){let N;e[69]!==h||e[70]!==p||e[71]!==f||e[72]!==Z?(N=w=>a.jsx(S.Activity,{mode:Z[w.key]?"visible":"hidden",children:a.jsx("div",{className:"col-span-full row-span-full grid transition-none!","aria-label":p.formatMessage({id:"personality-onboarding.intro.aria-label",defaultMessage:"Examples of the {personality} personality"},{personality:w.label}),children:a.jsx(Qt,{personality:w,active:!!Z[w.key],intervalSec:h,prefersReducedMotion:f})})},w.key),e[69]=h,e[70]=p,e[71]=f,e[72]=Z,e[73]=N):N=e[73],ue=u.map(N),e[63]=h,e[64]=p,e[65]=u,e[66]=f,e[67]=Z,e[68]=ue}else ue=e[68];let me;e[74]!==Fe||e[75]!==ue?(me=a.jsx(S.Activity,{mode:Fe,children:ue}),e[74]=Fe,e[75]=ue,e[76]=me):me=e[76];let ge;e[77]!==ne||e[78]!==le||e[79]!==fe||e[80]!==me?(ge=a.jsxs("header",{className:ne,children:[le,fe,me]}),e[77]=ne,e[78]=le,e[79]=fe,e[80]=me,e[81]=ge):ge=e[81];const Be=H?"p-4 min-md:p-8":"min-h-0 flex-1 px-10 pt-1";let pe;e[82]!==Be?(pe=R("space-y-6 overflow-y-auto",Be),e[82]=Be,e[83]=pe):pe=e[83];let ye;e[84]!==p?(ye=p.formatMessage({id:"personality-onboarding.modal.aria-label",defaultMessage:"Choose a personality"}),e[84]=p,e[85]=ye):ye=e[85];let xe;e[86]!==L||e[87]!==i||e[88]!==H||e[89]!==v||e[90]!==c||e[91]!==o.logging||e[92]!==u||e[93]!==b?(xe=c==="personality"?a.jsx(ts,{isFullScreen:H,personalities:u,canSelectMore:L,isLegacy:i==="legacy-new-user-personality-flow",onSelect:N=>{W(!0),o.logging.increment("personality",N)}}):a.jsx(ns,{traits:b,canSelectMore:L,maxSelected:v}),e[86]=L,e[87]=i,e[88]=H,e[89]=v,e[90]=c,e[91]=o.logging,e[92]=u,e[93]=b,e[94]=xe):xe=e[94];let he;e[95]!==pe||e[96]!==ye||e[97]!==xe?(he=a.jsx("section",{className:pe,"aria-label":ye,id:"personality-onboarding-personality-list",children:xe}),e[95]=pe,e[96]=ye,e[97]=xe,e[98]=he):he=e[98];const Ge=H?"min-md:pt-3":"pt-6";let be;e[99]!==Ge?(be=R("flex flex-col items-center justify-center px-10 max-md:px-6 min-md:gap-3",Ge),e[99]=Ge,e[100]=be):be=e[100];const Ue="primary",ze=c==="personality"?!q:!Y,Ve=!Me,qe=Me&&"max-w-[min(256px,70cqw)] px-4 py-2.75",We=!Me&&"px-4.5 py-4",He=!q&&"[--btn-background-color:var(--bg-tertiary)] [--btn-text-color:var(--text-secondary)]";let ve;e[101]!==qe||e[102]!==We||e[103]!==He?(ve=R("focus-visible:focus-ring w-full select-none",qe,We,He),e[101]=qe,e[102]=We,e[103]=He,e[104]=ve):ve=e[104];let we;e[105]!==v||e[106]!==c||e[107]!==_?(we=a.jsx(ls,{count:_,max:v,mode:c}),e[105]=v,e[106]=c,e[107]=_,e[108]=we):we=e[108];let Se;e[109]!==Ue||e[110]!==ze||e[111]!==Ve||e[112]!==ve||e[113]!==we?(Se=a.jsx(gt,{color:Ue,visuallyDisabled:ze,fullWidth:Ve,className:ve,ref:A,type:"submit",children:we}),e[109]=Ue,e[110]=ze,e[111]=Ve,e[112]=ve,e[113]=we,e[114]=Se):Se=e[114];let je;e[115]!==be||e[116]!==Se?(je=a.jsx("footer",{className:be,children:Se}),e[115]=be,e[116]=Se,e[117]=je):je=e[117];let ke;e[118]!==J?(ke=a.jsx(dt,{canShrink:J}),e[118]=J,e[119]=ke):ke=e[119];let $e;e[120]!==se||e[121]!==ge||e[122]!==he||e[123]!==je||e[124]!==ke?($e=a.jsxs("div",{className:"tall:h-[680px] grid h-[95dvh] w-full grid-rows-[minmax(10px,auto)_minmax(200px,1fr)_minmax(0,auto)_minmax(min-content,86px)_minmax(10px,auto)] p-0 max-md:h-[98dvh]",children:[se,ge,he,je,ke]}),e[120]=se,e[121]=ge,e[122]=he,e[123]=je,e[124]=ke,e[125]=$e):$e=e[125];let Ee;return e[126]!==r||e[127]!==X||e[128]!==ee||e[129]!==te||e[130]!==$e?(Ee=a.jsx("form",{className:X,"aria-labelledby":r,onSubmit:ee,onKeyUp:te,children:$e}),e[126]=r,e[127]=X,e[128]=ee,e[129]=te,e[130]=$e,e[131]=Ee):Ee=e[131],Ee}function is(n){return n.key}function os(n){return n.selected$()}function as(n){return n.selected$()}function rs(n){return n.selected$()}function cs(n){return n.selected$()}function ds(n){return n.selected$()}function fs(n){return n.selected$()}function dt(n){"use forget";const e=G.c(4),{canShrink:t}=n,l=t&&"max-md:h-6";let o;e[0]!==l?(o=R("h-10 min-h-0",l),e[0]=l,e[1]=o):o=e[1];let s;return e[2]!==o?(s=a.jsx("div",{className:o}),e[2]=o,e[3]=s):s=e[3],s}function ht(n){"use forget";var _;const e=G.c(47),{canClose:t,className:l,onClose:o,onboarding:s,testId:c}=n,{flow:i}=s,[r,m]=S.useState((_=n.isOpen)!=null?_:!0),x=S.useId(),g=S.useId(),p=i==="legacy-new-user-personality-flow",d=I(yt),f=d?p?!1:i==="new-user-flow-personality"||i==="new-user-flow-traits":!0,y=S.useRef(null),u=S.useRef(null);let j;e[0]===Symbol.for("react.memo_cache_sentinel")?(j=L=>{y.current=L,u.current="submit",m(!1)},e[0]=j):j=e[0];const b=Te(j);let k;e[1]!==o||e[2]!==s.logging?(k=()=>{u.current="close",m(!1),s.logging.log("skip"),o()},e[1]=o,e[2]=s.logging,e[3]=k):k=e[3];const h=Te(k);let P;e[4]!==s.logging?(P=()=>{s.logging.log("impression")},e[4]=s.logging,e[5]=P):P=e[5];let E;if(e[6]!==s?(E=[s],e[6]=s,e[7]=E):E=e[7],S.useEffect(P,E),!d){const L=t?"history":"default";let F;e[8]!==o||e[9]!==s.logging||e[10]!==n?(F=()=>{y.current&&u.current==="submit"?n.onSubmit$(y.current):u.current==="close"&&(s.logging.log("skip"),o())},e[8]=o,e[9]=s.logging,e[10]=n,e[11]=F):F=e[11];let q;e[12]===Symbol.for("react.memo_cache_sentinel")?(q=a.jsx(K.Backdrop,{}),e[12]=q):q=e[12];let z;e[13]!==t||e[14]!==h||e[15]!==b||e[16]!==s?(z=a.jsx(K.ScrollRoot,{children:a.jsx(K.ContentSection,{children:a.jsx(ct,{canClose:t,onClose:h,onboarding:s,onSubmit$:b})})}),e[13]=t,e[14]=h,e[15]=b,e[16]=s,e[17]=z):z=e[17];let W;e[18]!==t||e[19]!==z?(W=a.jsx(K.Content,{handle:t,children:z}),e[18]=t,e[19]=z,e[20]=W):W=e[20];let U;e[21]!==t||e[22]!==F||e[23]!==W?(U=a.jsx(K.Portal,{children:a.jsxs(K.View,{"data-testid":"personality-onboarding-sheet",onCloseComplete:F,swipeDismissal:t,swipeOvershoot:!0,children:[q,W]})}),e[21]=t,e[22]=F,e[23]=W,e[24]=U):U=e[24];let Y;return e[25]!==r||e[26]!==L||e[27]!==U?(Y=a.jsx(K.Root,{defaultPresented:r,sheetRole:"dialog",behavior:L,presented:r,children:U}),e[25]=r,e[26]=L,e[27]=U,e[28]=Y):Y=e[28],Y}const $=c!=null?c:"modal-personality-onboarding",A=!t,v=f?"grid place-content-center":"max-w-[min(420px,95dvw)] py-0";let C;e[29]!==l||e[30]!==v?(C=R(l,v),e[29]=l,e[30]=v,e[31]=C):C=e[31];const T=f?"fullscreen":"custom";let M;e[32]!==t||e[33]!==h||e[34]!==s||e[35]!==n.onSubmit$?(M=a.jsx(ct,{canClose:t,onClose:h,onboarding:s,onSubmit$:n.onSubmit$}),e[32]=t,e[33]=h,e[34]=s,e[35]=n.onSubmit$,e[36]=M):M=e[36];let D;return e[37]!==x||e[38]!==r||e[39]!==h||e[40]!==g||e[41]!==$||e[42]!==A||e[43]!==C||e[44]!==T||e[45]!==M?(D=a.jsx(At,{ariaLabelledBy:x,ariaDescribedBy:g,testId:$,isOpen:r,onClose:h,shouldIgnoreClickOutside:A,isScrollable:!1,allowVerticalContentToOverflow:!1,className:C,noPadding:!0,size:T,footerContent:null,children:M}),e[37]=x,e[38]=r,e[39]=h,e[40]=g,e[41]=$,e[42]=A,e[43]=C,e[44]=T,e[45]=M,e[46]=D):D=e[46],D}const us=Object.freeze(Object.defineProperty({__proto__:null,PersonalityOnboardingModal:ht},Symbol.toStringTag,{value:"Module"})),ft=Tt(()=>_t(!1));function ks(n){"use forget";const e=G.c(24),{conversationId:t,messageId:l,isPersonalityOnboardingRoute:o,onClose:s,onSubmit:c}=n,i=Rt(),r=et(),m=Lt(),{eligible:x,isLoading:g}=zt(rt.hasSeenExistingUserPersonalityOnboarding);let p;e[0]!==i?(p=()=>ft(i),e[0]=i,e[1]=p):p=e[1];const d=I(p);let f;e[2]!==m||e[3]!==t||e[4]!==i?(f=()=>{var T;const v=t?Ot(i,t):null,C=v&&((T=It(v))==null?void 0:T.value)===Dt.STREAMING;return Ft(m)&&!C},e[2]=m,e[3]=t,e[4]=i,e[5]=f):f=e[5];const y=I(f),[u,j]=S.useState(y),k=u&&(d||x&&!g||o);let h;e[6]!==y?(h=()=>{if(!y)return;const v=window.setTimeout(()=>j(!0),3e3);return()=>clearTimeout(v)},e[6]=y,e[7]=h):h=e[7],S.useEffect(h);let P;e[8]!==t||e[9]!==i||e[10]!==r||e[11]!==l||e[12]!==s||e[13]!==c?(P=v=>{Vt(i,rt.hasSeenExistingUserPersonalityOnboarding);const C=v==="traits"?"new-user-flow-traits":"existing-user-flow-personality",T=function(){ft.set(i,!1)};Kt({canClose:Bt(i,"2874358162",{disableExposureLog:!0}).get("can_close_onboarding",!1),ctx:i,intl:r,conversationId:t,messageId:l,mode:v,selectedPersonality:C==="existing-user-flow-personality"?"default":null,flow:C,isLegacy:!1,onClose:(...M)=>{const D=M;s==null||s(...D),T()},onSubmit:(...M)=>{const D=M;c==null||c(...D),T()}})},e[8]=t,e[9]=i,e[10]=r,e[11]=l,e[12]=s,e[13]=c,e[14]=P):P=e[14];const E=S.useEffectEvent(P);let $;e[15]!==i||e[16]!==E||e[17]!==o||e[18]!==k?($=()=>{if(k)return E("personality"),()=>{Je(i,ht),o&&qt("/")}},e[15]=i,e[16]=E,e[17]=o,e[18]=k,e[19]=$):$=e[19];let A;return e[20]!==i||e[21]!==o||e[22]!==k?(A=[i,k,o],e[20]=i,e[21]=o,e[22]=k,e[23]=A):A=e[23],S.useEffect($,A),null}export{ks as NewUserPersonalityOnboarding,ft as existingUserPersonalityFlowOpen$};
//# sourceMappingURL=djpaa0h6tdp9ysiw.js.map
