const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/g683sukvvwb09shg.js","assets/bubexfvksfr7893o.js","assets/lm3g1zm00rp6al39.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/conversation-small-lq38g8zw.css","assets/jaztged0ed1qpm4w.js","assets/ei2rr3u86wwo8xvm.js","assets/q264k2ztz0dic0dr.js"])))=>i.map(i=>d[i]);
var B=Object.defineProperty,F=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var A=(s,t,a)=>t in s?B(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,R=(s,t)=>{for(var a in t||(t={}))V.call(t,a)&&A(s,a,t[a]);if(P)for(var a of P(t))z.call(t,a)&&A(s,a,t[a]);return s},w=(s,t)=>F(s,H(t));import{h as D,j as e,M as m,_ as g,r as p,u as U,d as W,e as q,y as Q,ac as $}from"./bubexfvksfr7893o.js";import{a as K,b as Z,c as X}from"./edtxqudzw0vjv8nu.js";import{aC as J,aB as y,az as x,cr as I,e7 as k,eH as n,aA as f,dU as Y}from"./ncw8zw682jinppua.js";import{d as E}from"./l1ka89a9nbqv3utj.js";import{bt as ee,a_ as r,lF as se,aZ as ae}from"./lm3g1zm00rp6al39.js";import{i as te,R as oe}from"./e4p2x10r686lji85.js";import{u as re,a as ne,b as ie,c as le,d as de}from"./m4j0s403ebgyfqdl.js";import{A as me,m as ce,U as ue}from"./b7epkxjvqchi1vwq.js";import{m as T}from"./kahypn4d3cgul321.js";import{u as pe}from"./n6y3adntgummmkiw.js";import"./ip2dsbq9712r5wna.js";import"./o45zl9yl00508gad.js";import"./mxzk2kf77c8eueuw.js";import"./bc00p2ldn9cv9q32.js";import"./8ix1du5tuckfsvqq.js";import"./fwn4bwvyx3h4ty5g.js";import"./l1teaxoievyk0rz1.js";import"./nbm98bu0q3774lnr.js";import"./i9ddjt6oaiw4vo4g.js";import"./hzasobp3hhjtq47p.js";import"./jro698t78r3v26vt.js";import"./fum95d46v8d5jv8u.js";import"./n2u3q2i5341kdx8j.js";import"./j703u6xl4odnuo39.js";import"./me0ap2djy50z6upd.js";import"./ovq272825mnnvd9p.js";function ge({group:s,onDelete:t,onClose:a}){const c=D().formatMessage({id:"workspaceSettings.groups.deleteGroupTitle",defaultMessage:"Delete group {groupName}?"},{groupName:s.name});return e.jsx(J,{type:"warning",isOpen:!0,onClose:a,title:c,testId:"modal-delete-group",showCloseButton:!0,primaryButton:e.jsx(y,{color:"danger",onClick:async()=>{t(s.id),a()},children:e.jsx(m,{id:"workspaceSettings.groups.confirmDelete",defaultMessage:"Delete"})}),secondaryButton:e.jsx(y,{onClick:a,color:"secondary",children:e.jsx(m,{id:"workspaceSettings.groups.cancelDelete",defaultMessage:"Cancel"})}),children:e.jsx("p",{children:e.jsx(m,{id:"workspaceSettings.groups.deleteGroupWarning",defaultMessage:'Are you sure you want to delete the "{groupName}" group? This action cannot be undone.',values:{groupName:s.name}})})})}const xe=x(()=>g(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([0,1])),{loading:s=>f(s)}),fe=x(()=>g(()=>import("./lm3g1zm00rp6al39.js").then(s=>s.zp),__vite__mapDeps([2,1,3,4,5])),{loading:s=>f(s)}),L=x(()=>g(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([6,1])),{loading:s=>f(s)}),he=10;function je({workspaceId:s,group:t,readOnly:a}){const i=D(),[c,o]=p.useState(""),[h,v]=p.useState(0),{data:d,isLoading:C,isPlaceholderData:M}=re({workspaceId:s,groupId:t.id,search:c,currPage:h}),[b,_]=p.useState(!1),S=U(),{mutateAsync:G}=ne({workspaceId:s,groupId:t.id,members:d,currPage:h,search:c}),N=e.jsx(y,{onClick:()=>_(!0),icon:fe,disabled:a,children:e.jsx(m,{id:"workspaceSettings.groups.addMemberButton",defaultMessage:"Add member"})});return e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"mt-6 mb-3 flex flex-row justify-between gap-2",children:[e.jsx(ee,{inputClassName:"w-[250px] rounded-full! text-sm",value:c,onChange:l=>{o(l.target.value)},placeholder:i.formatMessage({id:"FThxKQ",defaultMessage:"Search member name"})}),a?e.jsx(I,{label:i.formatMessage(T.managedViaSCIMTooltip),side:"right",children:N}):N]}),e.jsxs(r.Root,{className:"min-w-full",children:[e.jsxs(r.Header,{children:[e.jsx(r.HeaderCell,{children:e.jsx(m,{id:"workspaceSettings.groups.memberName",defaultMessage:"Name"})}),e.jsx(r.HeaderCell,{children:e.jsx(m,{id:"workspaceSettings.groups.email",defaultMessage:"Email"})}),e.jsx(r.HeaderCell,{})]}),e.jsx(r.Body,{className:C||M?"opacity-50":void 0,children:d==null?e.jsx(r.Row,{children:e.jsx(r.Cell,{colSpan:3,children:e.jsx(k,{})})}):d.items.length===0?e.jsx(r.Row,{children:e.jsx(r.Cell,{colSpan:3,children:c===""?e.jsx(m,{id:"workspaceSettings.groups.noMembers",defaultMessage:"No members"}):e.jsx(m,{id:"workspaceSettings.groups.noMembersForSearch",defaultMessage:"No members matched the filter"})})}):d.items.map(l=>e.jsxs(r.Row,{className:"[&>td]:py-2",children:[e.jsx(r.Cell,{children:e.jsx("span",{children:l.name})}),e.jsx(r.Cell,{children:l.email}),e.jsx(r.Cell,{textAlign:"right",children:!a&&(t.is_scim_managed?e.jsx(n.Root,{children:e.jsx(n.Trigger,{disabled:!0,children:e.jsx(I,{label:i.formatMessage(T.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(L,{className:"icon-sm"})})})}):e.jsxs(n.Root,{children:[e.jsx(n.Trigger,{className:"-my-2",children:e.jsx(L,{className:"icon-sm"})}),e.jsx(n.Portal,{children:e.jsx(n.Content,{size:"default",children:e.jsx(n.Item,{onClick:()=>G(l.id),icon:e.jsx(xe,{className:"text-token-text-status-error"}),className:"text-token-text-status-error",children:e.jsx(m,{id:"workspaceSettings.groups.removeMember",defaultMessage:"Remove member"})})})})]}))})]},l.id))})]}),e.jsx("div",{className:"mt-2 flex justify-center",children:d&&d.items.length>0&&e.jsx(se,{currentPage:h,onChangeIndex:l=>{v(l)},length:Math.ceil(d.total/he)})}),b&&e.jsx(me,{isOpen:!0,onClose:()=>{S.invalidateQueries({queryKey:[s,"groups"]}),_(!1)},group:t})]})}const Me=x(()=>g(()=>import("./g683sukvvwb09shg.js"),__vite__mapDeps([0,1])),{loading:s=>f(s)}),be=x(()=>g(()=>import("./ei2rr3u86wwo8xvm.js"),__vite__mapDeps([7,1])),{loading:s=>f(s)}),_e=x(()=>g(()=>import("./q264k2ztz0dic0dr.js"),__vite__mapDeps([8,1])),{loading:s=>f(s)});function Ne({currentWorkspaceId:s,groupId:t}){const a=D(),i=Y(),c=W(),{data:o,isLoading:h}=ie({workspaceId:s,groupId:t!=null?t:""}),[v,d]=p.useState(!1),[C,M]=p.useState(!1),b=!!(!(i!=null&&i.isAdminOfAccount()||i!=null&&i.isOwnerOfAccount())||o!=null&&o.is_scim_managed),_=p.useMemo(()=>{var u;return[{label:a.formatMessage(ce.title),href:"/admin/groups"},{label:(u=o==null?void 0:o.name)!=null?u:""}]},[a,o==null?void 0:o.name]),{deleteGroup:S}=le({workspaceId:s}),G=async u=>{await S(u),c("/admin/groups")},{updateGroupName:N}=de({workspaceId:s});if(h)return e.jsx(k,{});if(!o)return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:a.formatMessage(j.groupNotFoundLabel)}),e.jsx("p",{className:"text-sm text-gray-500",children:a.formatMessage(j.groupNotFoundDescription)})]});const l=te(o),O=e.jsxs(n.Root,{children:[e.jsx(n.Trigger,{asChild:!0,className:"border-token-border-default! border!",children:e.jsxs("div",{children:[a.formatMessage(j.manageLabel),e.jsx(_e,{className:"icon-sm ms-0.5"})]})}),e.jsx(n.Portal,{children:e.jsxs(n.Content,{children:[e.jsx(n.Item,{onClick:()=>E(d)(!0),icon:be,label:a.formatMessage(j.editGroupLabel)}),e.jsx(n.Item,{onClick:()=>E(M)(!0),icon:Me,label:a.formatMessage(j.deleteGroupLabel),color:"danger"})]})})]});return e.jsxs(e.Fragment,{children:[e.jsx(ae,{children:e.jsx("title",{children:o.name})}),e.jsx(K,{navigation:e.jsx(Z,{items:_}),title:o.name,badge:l?e.jsx(oe,{}):void 0,actions:o&&!b&&!l?O:void 0}),e.jsxs(X,{showSpinner:!1,children:[e.jsx(je,{group:o,readOnly:b,workspaceId:s}),C&&e.jsx(ge,{group:o,onDelete:G,onClose:()=>M(!1)}),v&&e.jsx(ue,{defaultName:o.name,onSave:async u=>{await N({workspaceId:s,groupID:o.id,name:u})},onClose:()=>d(!1),placeholder:"E.g. marketing team"})]})]})}const j=q({manageLabel:{id:"lII8Sf",defaultMessage:"Manage"},editGroupLabel:{id:"aBFPzn",defaultMessage:"Edit group"},deleteGroupLabel:{id:"FtvUh/",defaultMessage:"Delete group"},groupNotFoundLabel:{id:"Lfq9Z4",defaultMessage:"Group not found"},groupNotFoundDescription:{id:"++TB5R",defaultMessage:"It may take a few minutes for the new group to appear."}}),Ze=Q(function(){const t=pe(),{groupId:a}=$();return e.jsx(Ne,w(R({},t),{groupId:a}))});export{Ze as default};
//# sourceMappingURL=itcdtcwmn09bmmwj.js.map
