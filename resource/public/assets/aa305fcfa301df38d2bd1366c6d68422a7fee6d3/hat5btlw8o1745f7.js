const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kivvchsexr54fuso.js","assets/bubexfvksfr7893o.js"])))=>i.map(i=>d[i]);
import{R as B,h as w,r as D,j as e,M as r,_ as L}from"./bubexfvksfr7893o.js";import{u as S,dU as v,p as E,aP as b,au as _,D as I,aC as T,dc as M,dO as A,aB as N,cr as R,az as U,aA as z}from"./ncw8zw682jinppua.js";import{bY as F,aB as H,aC as O,aE as K,z as W}from"./lm3g1zm00rp6al39.js";import{u as q}from"./o0dw43fppqvaf7ws.js";import"./n117ifjno76hbo3f.js";import"./gqlpgmzguho9n5oh.js";import"./h1em0bjkpkjv8ykw.js";import"./m609xwboj0zo059y.js";import"./eifqzljcxkeg8zns.js";import"./o6p9t02t81236kdb.js";import"./hu1bt0oauegdhua6.js";const G=U(()=>L(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([0,1])),{loading:a=>z(a)}),V="https://help.openai.com/en/articles/11481834",ie=({onClose:a})=>{var j;const[o,u]=B.useState(!1),{prepareCheckoutSession:s,navigateToCheckout:m}=F(),h=S(),t=v(),{country:p}=H(),i=O({country:p,currentAccount:t,location:"CodexCreditPurchaseModal",shouldUsePaidSubscriptionBillingCurrency:!0}),d=(j=t==null?void 0:t.mustGetSubscriptionBillingCurrency("CreditPurchaseModal"))!=null?j:"USD",{data:l,isLoading:g,error:x}=K({ctx:h,currency:d});let n=null;!g&&!x&&l&&(n=l.currencyConfig.amount_per_credit);const f=E(),y=w(),P=D.useCallback(async()=>{if(!o){u(!0);try{const c=t==null?void 0:t.id;if(!c)throw new Error("No account_id found");b.setItem(_.CreditCheckoutRedirectPath,"/codex/settings/usage");const k=await s({credit_purchase_data:{quantity:1e3,unit:"credit",account_id:c},billing_details:i});await m(k)}catch(c){b.removeItem(_.CreditCheckoutRedirectPath),I.addError(c),f.warning(y.formatMessage({id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}),{hasCloseButton:!0})}finally{u(!1)}}},[i,y,o,m,s,f,t]);if(i)return e.jsxs(T,{isOpen:!0,onClose:a,type:"success",size:"custom",noPadding:!0,className:"max-w-xl p-6! pt-3!",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[e.jsx(M.Header,{className:"p-0! pb-4",title:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCredits",defaultMessage:"Buy more messages"})}),e.jsx("p",{className:"text-token-text-secondary text-sm",children:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCreditsDescription",defaultMessage:"Use Codex beyond rate limits. Add credits to instantly boost your plan. <u>Learn more</u>",values:{u:c=>e.jsx(A,{href:V,openNewTab:!0,children:c})}})}),e.jsx("div",{className:"flex flex-col",children:n&&e.jsx("div",{className:"mt-6",children:e.jsx(Y,{numCredits:1e3,amountPerCredit:n,currency:d})})}),e.jsx(M.Actions,{secondaryButton:e.jsx(N,{disabled:o,onClick:a,color:"secondary",children:e.jsx(r,{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"})}),primaryButton:e.jsx(N,{loading:o,onClick:()=>P(),color:"primary",children:e.jsx(r,{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"})})})]})};function Y({numCredits:a,amountPerCredit:C,currency:o}){var t,p,i,d,l,g,x,n;const u=Math.round(a*C*100)/100,{data:s,isLoading:m,isError:h}=q(a);return e.jsx("div",{className:"flex w-full flex-col",children:e.jsxs("div",{className:"flex w-full items-center justify-between gap-3 rounded-lg border border-gray-200 p-4 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(r,{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}",values:{numCredits:a}})}),e.jsx("span",{className:"flex items-center gap-1",children:h?null:m?e.jsx(W,{className:"h-4 w-48"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-token-text-tertiary text-xs",children:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCreditsDescription2",defaultMessage:"{messagesLowerBound}-{messagesUpperBound} CLI or Extension messages",values:{messagesLowerBound:(p=(t=s==null?void 0:s.approx_local_messages)==null?void 0:t[0])!=null?p:0,messagesUpperBound:(d=(i=s==null?void 0:s.approx_local_messages)==null?void 0:i[1])!=null?d:0}})}),e.jsx(R,{label:e.jsxs("div",{className:"text-token-text-primary flex flex-col items-start text-xs",children:[e.jsx("p",{children:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCreditsDescription2Tooltip1",defaultMessage:"Usage varies by type"})}),e.jsx("p",{children:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCreditsDescription2Tooltip2",defaultMessage:"Cloud tasks: {messagesLowerBound}-{messagesUpperBound} messages",values:{messagesLowerBound:(g=(l=s==null?void 0:s.approx_cloud_messages)==null?void 0:l[0])!=null?g:0,messagesUpperBound:(n=(x=s==null?void 0:s.approx_cloud_messages)==null?void 0:x[1])!=null?n:0}})})]}),children:e.jsx(G,{className:"icon-sm text-token-text-tertiary"})})]})})]}),e.jsx("p",{className:"text-token-text-secondary font-medium",children:u.toLocaleString("en-US",{style:"currency",currency:o,maximumFractionDigits:2})})]})})}export{ie as CodexCreditPurchaseModal,Y as CreditSelectorButtons};
//# sourceMappingURL=hat5btlw8o1745f7.js.map
