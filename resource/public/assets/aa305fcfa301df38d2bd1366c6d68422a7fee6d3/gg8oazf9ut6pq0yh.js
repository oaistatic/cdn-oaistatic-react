const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/imdfj4m85ztq7yte.js","assets/bubexfvksfr7893o.js","assets/eibvgm82s4rii3v7.js","assets/4h8qsvyuv2fcir5w.js","assets/np3j7tlnwifo0og0.js","assets/bh3ogo5ra3ryh1rz.js","assets/k1cl8bhg0vqi0zvs.js"])))=>i.map(i=>d[i]);
var de=Object.defineProperty;var ae=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var te=(a,e,o)=>e in a?de(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,se=(a,e)=>{for(var o in e||(e={}))ce.call(e,o)&&te(a,o,e[o]);if(ae)for(var o of ae(e))me.call(e,o)&&te(a,o,e[o]);return a};import{c as ge,h as ue,r as m,j as n,e as fe,_ as w}from"./bubexfvksfr7893o.js";import{d9 as pe,dT as he,de as g,dU as Ie,dV as _e,dW as xe,dX as De,dY as we,dZ as be,df as ve,dd as Re}from"./lm3g1zm00rp6al39.js";import{LightboxNew as X}from"./iq2gfdnio7ik2rfe.js";import{I as je}from"./fvq06q6sopd9r6rx.js";import{S as Ce}from"./c42ncwmsnr8ifrud.js";import{az as b,aA as v}from"./ncw8zw682jinppua.js";import"./ckeauhcg4pu33xfw.js";import"./j703u6xl4odnuo39.js";import"./me0ap2djy50z6upd.js";import"./nbm98bu0q3774lnr.js";import"./i9ddjt6oaiw4vo4g.js";import"./fwn4bwvyx3h4ty5g.js";import"./l1teaxoievyk0rz1.js";import"./fum95d46v8d5jv8u.js";import"./n2u3q2i5341kdx8j.js";const Ee=b(()=>w(()=>import("./imdfj4m85ztq7yte.js"),__vite__mapDeps([0,1])),{loading:a=>v(a)}),Se=b(()=>w(()=>import("./eibvgm82s4rii3v7.js"),__vite__mapDeps([2,1])),{loading:a=>v(a)}),Me=b(()=>w(()=>import("./4h8qsvyuv2fcir5w.js"),__vite__mapDeps([3,1])),{loading:a=>v(a)}),Te=b(()=>w(()=>import("./np3j7tlnwifo0og0.js"),__vite__mapDeps([4,1])),{loading:a=>v(a)}),Ne=b(()=>w(()=>import("./bh3ogo5ra3ryh1rz.js"),__vite__mapDeps([5,1])),{loading:a=>v(a)}),Pe=b(()=>w(()=>import("./k1cl8bhg0vqi0zvs.js"),__vite__mapDeps([6,1])),{loading:a=>v(a)}),ne=fe({thumbsUp:{id:"Qz8Wa6",defaultMessage:"Like this image"},thumbsDown:{id:"sUGtRy",defaultMessage:"Dislike this image"}}),Ae=a=>{var e,o,c,d;return be({pointer:{url:a.url,asset_pointer:(e=a.assetPointer)!=null?e:"",metadata:{dalle:{gen_id:(o=a.transformationId)!=null?o:void 0},generation:{gen_id:(c=a.transformationId)!=null?c:void 0}},width:a.width,height:a.height},conversationId:a.conversationId,messageId:(d=a.messageId)!=null?d:"",source:"chat"})},Xe=a=>{"use forget";var ee;const e=ge.c(61),{images:o,initialIndex:c,onClose:d,conversation:u,currentModelId:F}=a,r=ue(),q=pe(),[i,$]=m.useState(null),[R,V]=m.useState(null),[oe,ie]=m.useState(c),[f,G]=m.useState("default"),s=he(),J=m.useRef(null),O=m.useRef(s);let j,C;e[0]!==s?(j=()=>{O.current=s},C=[s],e[0]=s,e[1]=j,e[2]=C):(j=e[1],C=e[2]),m.useEffect(j,C);let E;e[3]===Symbol.for("react.memo_cache_sentinel")?(E=l=>{V(null),$(null),ie(l),G("default"),O.current.clearAllDrawings()},e[3]=E):E=e[3];const re=E;let S;e[4]!==r?(S=()=>De(r),e[4]=r,e[5]=S):S=e[5];const z=S;let M;e[6]!==i?(M=(l,Q)=>{!Q||i!=null||(we.imageRated({liked:l,analyticsContext:Ae(Q)}),$(l),l||V(Q))},e[6]=i,e[7]=M):M=e[7];const p=M,t=o[oe];let T;e[8]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{G("default"),O.current.clearAllDrawings()},e[8]=T):T=e[8];const K=T;let N;e[9]!==t||e[10]!==p?(N=()=>{p(!0,t)},e[9]=t,e[10]=p,e[11]=N):N=e[11];const B=N;let P;e[12]!==t||e[13]!==p||e[14]!==i?(P=()=>{!t||i!=null||p(!1,t)},e[12]=t,e[13]=p,e[14]=i,e[15]=P):P=e[15];const H=P;let A;e[16]!==t?(A=()=>{t&&G("inpaint")},e[16]=t,e[17]=A):A=e[17];const W=A;let k;e[18]!==t||e[19]!==z?(k=()=>{t&&ve({url:t.url,fileName:z()})},e[18]=t,e[19]=z,e[20]=k):k=e[20];const Y=k;let L;e[21]===Symbol.for("react.memo_cache_sentinel")?(L=()=>{var l;return(l=J.current)==null?void 0:l.getImageData()},e[21]=L):L=e[21];const le=L;let U;e[22]!==u?(U=l=>Re(se({conversation:u},l)),e[22]=u,e[23]=U):U=e[23];const Z=U;let h;e[24]!==s||e[25]!==f?(h={mode:f,drawingState:s,drawingCanvasRef:J},e[24]=s,e[25]=f,e[26]=h):h=e[26];let I;e[27]!==t||e[28]!==q||e[29]!==s.canRedoDrawing||e[30]!==s.canUndoDrawing||e[31]!==s.redoDrawing||e[32]!==s.undoDrawing||e[33]!==Y||e[34]!==W||e[35]!==H||e[36]!==B||e[37]!==r||e[38]!==f||e[39]!==i?(I=n.jsx(X.LightboxHeaderActions,{children:f==="inpaint"?n.jsxs("div",{className:"grid grow grid-cols-[1fr_auto] items-center gap-2",children:[n.jsx("div",{className:"text-center font-semibold",children:r.formatMessage({id:"TjVqYb",defaultMessage:"Edit Selection"})}),n.jsxs("div",{className:"flex gap-1 justify-self-end md:gap-2",children:[n.jsx(g,{className:"aspect-square",icon:Ie,onClick:s.undoDrawing,disabled:!s.canUndoDrawing,"aria-label":r.formatMessage({id:"OmaTPx",defaultMessage:"Undo"})}),n.jsx(g,{className:"aspect-square",icon:_e,onClick:s.redoDrawing,disabled:!s.canRedoDrawing,"aria-label":r.formatMessage({id:"ZUr4oh",defaultMessage:"Redo"})}),n.jsx(g,{className:"w-auto px-3",onClick:K,children:r.formatMessage({id:"D9xvar",defaultMessage:"Cancel"})})]})]}):n.jsxs("div",{className:"flex gap-1 md:gap-2",children:[i!==!1&&n.jsx(g,{className:"aspect-square",icon:i===!0?Se:Ee,onClick:B,"aria-label":r.formatMessage(ne.thumbsUp)}),i!==!0&&n.jsx(g,{className:"aspect-square",icon:i===!1?Te:Me,onClick:H,"aria-label":r.formatMessage(ne.thumbsDown)}),n.jsx(g,{className:"aspect-square",icon:Ne,onClick:W,"aria-label":r.formatMessage({id:"pRGwlp",defaultMessage:"Edit image"})}),n.jsx(g,{className:"aspect-square",icon:Pe,onClick:Y,"aria-label":r.formatMessage({id:"9DNHka",defaultMessage:"Download image"})}),q()&&(t==null?void 0:t.messageId)&&n.jsx(Ce,{assetPointer:t.assetPointer,serverThreadId:t.conversationId,messageId:t.messageId})]})}),e[27]=t,e[28]=q,e[29]=s.canRedoDrawing,e[30]=s.canUndoDrawing,e[31]=s.redoDrawing,e[32]=s.undoDrawing,e[33]=Y,e[34]=W,e[35]=H,e[36]=B,e[37]=r,e[38]=f,e[39]=i,e[40]=I):I=e[40];let _;e[41]!==t||e[42]!==u.id||e[43]!==F||e[44]!==s.currentDrawnShape||e[45]!==d||e[46]!==Z?(_=n.jsx(X.Footer,{children:n.jsx(je,{clientThreadId:u.id,currentModelId:F,onRequestCompletion:Z,onClose:d,activeImage:t,currentDrawnShape:s.currentDrawnShape,getImageData:le,onCancelInpaint:K})}),e[41]=t,e[42]=u.id,e[43]=F,e[44]=s.currentDrawnShape,e[45]=d,e[46]=Z,e[47]=_):_=e[47];let x;e[48]!==o||e[49]!==c||e[50]!==d||e[51]!==h||e[52]!==I||e[53]!==_?(x=n.jsxs(X.Root,{images:o,initialIndex:c,onClose:d,onIndexChange:re,inpaintingProps:h,children:[I,_]}),e[48]=o,e[49]=c,e[50]=d,e[51]=h,e[52]=I,e[53]=_,e[54]=x):x=e[54];let D;e[55]!==R||e[56]!==i?(D=R&&n.jsx(xe,{messageId:(ee=R.messageId)!=null?ee:"",serverThreadId:R.conversationId,rating:i,onClose:()=>V(null)}),e[55]=R,e[56]=i,e[57]=D):D=e[57];let y;return e[58]!==x||e[59]!==D?(y=n.jsxs(n.Fragment,{children:[x,D]}),e[58]=x,e[59]=D,e[60]=y):y=e[60],y};export{Xe as ImageGenConversationLightboxNew};
//# sourceMappingURL=gg8oazf9ut6pq0yh.js.map
