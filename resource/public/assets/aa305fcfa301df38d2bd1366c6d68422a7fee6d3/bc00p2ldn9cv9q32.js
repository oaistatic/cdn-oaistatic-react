var pe=Object.defineProperty,Se=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var ee=(s,e,o)=>e in s?pe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,P=(s,e)=>{for(var o in e||(e={}))be.call(e,o)&&ee(s,o,e[o]);if(Z)for(var o of Z(e))je.call(e,o)&&ee(s,o,e[o]);return s},B=(s,e)=>Se(s,ve(e));import{r as b,j as t,h as K,c as F,e as Ce,M as U}from"./bubexfvksfr7893o.js";import{az as oe,ay as ie,e6 as re,e7 as Me,e8 as _e,e9 as ke,ea as Ae,eb as Ne,ec as Te,ed as Pe,bO as Ee,ee as we,ef as ye,eg as Le,eh as Ie,ei as se,de as W,ej as te,ek as Be,el as Ue,em as Oe,en as Fe,eo as Ge,ep as ze,P as ne,eq as Re,bI as He,er as Ve,es as $e,et as De,eu as Ke,ev as We,ew as qe,ex as Qe,ey as Je,ez as Ye,eA as Xe}from"./lm3g1zm00rp6al39.js";import{u as E,J as le,M as ce,V as D,ay as Ze,i7 as ae,hS as es,g as ss,cp as ts,dl as ns,d as H,r as as,bp as os,jb as is,gj as rs,cu as ls,N as I,jj as cs,aB as O,ca as de,cr as q,ei as ds,e6 as us,lS as gs,oV as ms,b as fs,bV as hs,l_ as xs,aS as V,_ as $,cz as ps}from"./ncw8zw682jinppua.js";import{P as Ss}from"./8ix1du5tuckfsvqq.js";import{g as vs}from"./hzasobp3hhjtq47p.js";const bs=b.createContext(void 0);function js(s){var i;const e=D.getConversationTurns(s),o=e.findIndex(r=>r.role===Ze.Assistant);if(o===-1)return;const n=e[o];for(let r=0;r<n.messageGroups.length;r++)if(n.messageGroups[r].type===ae.SearchGPTQuery){const l=n.messageGroups.slice(r+1).find(({type:g})=>g===ae.Text);if(l==null)return;const u=es(l.messages[0]);if(((i=u==null?void 0:u[0])==null?void 0:i.type)==="navigation")return{turnIndex:o,navigationCitation:u[0],message:l.messages[0]}}}function Cs(s,e){var n,i;if(e==null||s==null)return s;const o=new Set(s.domains.map(r=>r.url));return B(P({},s),{domains:[...s.domains,...e.domains.filter(r=>!o.has(r.url))],safe_urls:[...(n=s.safe_urls)!=null?n:[],...(i=e.safe_urls)!=null?i:[]]})}function Bs({query:s}){return t.jsx(oe,{horizontalPadding:"standard",children:t.jsx(ie,{className:re({isUserTurn:!0}),children:t.jsx("div",{className:vs(!0),children:t.jsx(Me,{containsImagesOrAttachments:!1,children:t.jsx(_e,{text:s})})})})})}function Us({clientThreadId:s,prefetchNavlink:e,clearPrefetchNavlink:o}){var g;const n=b.use(e),i=E(),r=le(i,"1032814809");b.useEffect(()=>{window.__oai_SSR_NAVLINK&&ke.logEvent("Search Tool Page Load Time To Fast Nav SSR",{server_timing:n==null?void 0:n.timing},window.__oai_SSR_NAVLINK)},[]),b.useEffect(()=>{n==null&&o()},[n,o]);const a=b.useMemo(()=>n==null?null:B(P({},n.navlink),{domains:n.navlink.domains.map(d=>{var f;return B(P({},d),{subtitle:(f=d.subtitle)!=null?f:d.domain})})}),[n]),l=ce(s,js),u=b.useMemo(()=>Cs(a,l==null?void 0:l.navigationCitation),[l,a]);return n==null||u==null?null:t.jsxs("div",{children:[t.jsx("div",{className:"mt-10",children:t.jsx(oe,{horizontalPadding:"standard",children:t.jsxs(ie,{className:re({isUserTurn:!1}),children:[t.jsx(Ae,{clientThreadId:s,turnIndex:(g=l==null?void 0:l.turnIndex)!=null?g:2,nextMessage:l==null?void 0:l.message,navigationCitation:u}),r?t.jsxs("div",{className:"text-token-text-secondary relative -top-2 flex justify-end gap-2 font-mono text-xs",children:[t.jsxs("div",{elementtiming:"navlink",children:["server: ",n.timing,"ms"]}),t.jsx(Ms,{})]}):null]})})}),t.jsx(Ne,{scriptSrc:"requestAnimationFrame(()=>window.__oai_SSR_NAVLINK=window.__oai_SSR_NAVLINK||performance.now());"})]})}function Ms(){const[s,e]=b.useState(null);return b.useEffect(()=>{const o=new PerformanceObserver(n=>{n.getEntries().forEach(i=>{if(i.identifier==="navlink"){const r=i.renderTime;e(a=>a==null?r:a)}})});return o.observe({type:"element",buffered:!0}),()=>o.disconnect()},[]),s==null?null:t.jsxs("span",{children:["render: ",s,"ms"]})}function Os({showShareButton:s,showProfileDropdown:e,showConversationPrivacyIndicator:o,clientThreadId:n}){const i=E(),r=ss(i,n),a=ts(n),l=K(),u=ns(),[g,d,f,p,x,S,m,h,N]=ce(n,c=>{const X=D.getGizmoId(c);return[D.hasUserMessage(c),X,qe(c==null?void 0:c.mode,X),c==null?void 0:c.title,c==null?void 0:c.is_do_not_remember,c==null?void 0:c.isStarred,c==null?void 0:c.continuingFromSharedProjectConversationId,c==null?void 0:c.sharedProjectConversationOwner,Qe(c)]}),M=H(()=>{var c;return(c=fs(r))==null?void 0:c.value}),w=b.useMemo(()=>Te({clientThreadId:h!=null&&h.id&&m?m:a!=null?a:n,gizmoId:d,conversationTitle:p,conversationAsyncStatus:M,isDoNotRemember:x,isStarred:S,owner:h!=null&&h.id?{user_id:h.id}:null}),[h==null?void 0:h.id,m,a,n,d,p,M,x,S]),j=as(n),T=b.use(bs)!=null,v=os(i),_=is(),L=!v,k=l.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),C=rs(i,d),G=ls(),z=!I(i),{shouldShowProjectsChatShareModal:ue,openProjectsChatShareModal:ge}=Pe({clientThreadId:n}),Q=()=>ue?ge():de.openSharingModal(a),me=Ee(i),fe=H(()=>hs(i)),he=cs(a),xe=le(i,"3018147683"),R=me.hasAccess&&!z&&s&&!fe&&!_&&!T&&!v&&d==null&&m==null&&!N;let A=null;R?a!=null?A="from-conversation":j&&!g&&(A="new-chat"):A=null;const[J,Y]=H(()=>[xs(),Je(r)]);return t.jsxs(t.Fragment,{children:[Y&&u&&J&&t.jsx(we,{conversationMode:f,accountId:u.id}),I(i)?t.jsx(ye,{}):null,I(i)&&(G==null?void 0:G.includes("caterpillar"))&&t.jsx(Le,{}),d&&C&&t.jsx(Ie,{gizmoId:d,serverThreadId:a!=null?a:m}),s&&(a!=null?a:m)&&t.jsx(t.Fragment,{children:L?t.jsx(O,{onClick:Q,icon:se,label:k,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary mx-2",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:k}):t.jsx(q,{label:l.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:t.jsx(W,{"data-testid":"share-chat-button",onClick:Q,icon:se,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),R&&A==="from-conversation"&&a!=null?t.jsx(te,{type:A,serverThreadId:a}):null,t.jsxs("div",{className:"flex items-center",children:[R&&A==="new-chat"?t.jsx(te,{type:A,variant:"default"}):null,!z&&!d&&j&&!T&&!g&&!v&&!_&&t.jsx(t.Fragment,{children:t.jsx(Be,{clientThreadId:n})}),o&&t.jsx("div",{className:"me-2",children:t.jsx(Ue,{clientThreadId:n,gizmoId:d})}),t.jsx(Oe,{}),(a!=null||m!=null)&&!z&&t.jsx(Fe,{conversation:w,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,shouldShowAdultSearchToggle:Y&&!J,children:t.jsxs("div",{className:"relative",children:[t.jsx(Ge,{"aria-label":l.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"}),he.length>0&&xe&&t.jsx("div",{className:"pointer-events-none absolute inset-0 grid place-items-center",children:t.jsx(ze,{size:28,backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10"})})]})}),e&&t.jsx(_s,{clientThreadId:n})]})]})}const _s=s=>{"use forget";const e=F.c(9),{clientThreadId:o}=s,n=E(),i=ds();ne.markStart("LoginOrProfileMenu"),ne.markRendered("LoginOrProfileMenu");let r;e[0]!==n||e[1]!==i?(r=!i&&!I(n)&&t.jsx(Ns,{}),e[0]=n,e[1]=i,e[2]=r):r=e[2];let a;e[3]!==o||e[4]!==i?(a=!i&&t.jsx(Ss,{clientThreadId:o}),e[3]=o,e[4]=i,e[5]=a):a=e[5];let l;return e[6]!==r||e[7]!==a?(l=t.jsxs(t.Fragment,{children:[r,a]}),e[6]=r,e[7]=a,e[8]=l):l=e[8],l};function ks(s){"use forget";const e=F.c(19),{location:o,className:n,testId:i,to:r,state:a}=s,l=E(),u=K();let g;e[0]!==u?(g=u.formatMessage({id:"OFyxqj",defaultMessage:"New chat"}),e[0]=u,e[1]=g):g=e[1];const d=g;let f;e[2]!==n?(f=ps("flex",n),e[2]=n,e[3]=f):f=e[3];let p;e[4]!==l||e[5]!==o?(p=h=>{Ye(l,h,{location:o})},e[4]=l,e[5]=o,e[6]=p):p=e[6];let x;e[7]!==a||e[8]!==r?(x={to:r,state:a},e[7]=a,e[8]=r,e[9]=x):x=e[9];let S;e[10]!==d||e[11]!==p||e[12]!==x||e[13]!==i?(S=t.jsx(W,{onClick:p,icon:Xe,"aria-label":d,"data-testid":i,as:"link",linkProps:x}),e[10]=d,e[11]=p,e[12]=x,e[13]=i,e[14]=S):S=e[14];let m;return e[15]!==d||e[16]!==f||e[17]!==S?(m=t.jsx(q,{label:d,className:f,children:S}),e[15]=d,e[16]=f,e[17]=S,e[18]=m):m=e[18],m}function Fs(s){"use forget";const e=F.c(5),{hideNewChat:o}=s,n=o===void 0?!1:o;if(!ms())return null;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(As,{}),e[0]=r):r=e[0];let a;e[1]!==n?(a=!n&&t.jsx(ks,{location:"Navigation actions"}),e[1]=n,e[2]=a):a=e[2];let l;return e[3]!==a?(l=t.jsxs("div",{className:"flex items-center",children:[r,a]}),e[3]=a,e[4]=l):l=e[4],l}function As(){const s=K(),e=gs(),o=E(),n=!I(o),i=De(We,Ke,!1,!0);return n||e?null:t.jsx(q,{label:s.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:t.jsx(W,{"aria-label":s.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{de.setSidebarOpen(!0)},icon:i})})}function Ns(){"use forget";const s=F.c(33),e=E();let o;s[0]!==e?(o=Re(e),s[0]=e,s[1]=o):o=s[1];const n=o;let i;s[2]!==e?(i=He(e,Ts.signUpCta),s[2]=e,s[3]=i):i=s[3];const r=i;let a;s[4]!==e?(a=Ve(e),s[4]=e,s[5]=a):a=s[5];const l=a,u=us.ACCESS_FLOW_ENTRY_POINT_CHAT_HEADER;let g;s[6]!==e?(g=$e(e),s[6]=e,s[7]=g):g=s[7];const d=g;let f;s[8]!==e?(f=()=>{V(e,{fallbackScreenHint:"login",callback:C=>{$.logLogInButtonClicked({location:"Chat header",provider:C},u)},skipLoginModal:!1})},s[8]=e,s[9]=f):f=s[9];const p=f;let x;s[10]!==e?(x=()=>{V(e,{fallbackScreenHint:"signup",callback:C=>{$.logSignUpButtonClicked({location:"Chat header",provider:C},u)},skipLoginModal:!1})},s[10]=e,s[11]=x):x=s[11];const S=x;let m;s[12]!==e?(m=()=>{V(e,{fallbackScreenHint:"login_or_signup",callback:C=>{$.logLoginOrSignUpButtonClicked({location:"Chat header",provider:C},u)},skipLoginModal:!1})},s[12]=e,s[13]=m):m=s[13];const h=m;let N;s[14]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(U,{id:"B1SN7b",defaultMessage:"Log in"}),s[14]=N):N=s[14];let M;s[15]!==p?(M=t.jsx(O,{onClick:p,color:"primary","data-testid":"login-button",children:N},"login"),s[15]=p,s[16]=M):M=s[16];const w=M;let j;s[17]!==d||s[18]!==r?(j=d?t.jsx(U,{id:"LoginModule.createFreeAccount",defaultMessage:"Create a free account"}):t.jsx(U,P({},r)),s[17]=d,s[18]=r,s[19]=j):j=s[19];let y;s[20]!==S||s[21]!==j?(y=t.jsx(O,{color:"secondary",onClick:S,"data-testid":"signup-button",className:"screen-arch:hidden md:screen-arch:flex",children:j},"signup"),s[20]=S,s[21]=j,s[22]=y):y=s[22];const T=y;let v;s[23]!==l?(v=t.jsx(U,P({},l)),s[23]=l,s[24]=v):v=s[24];let _;s[25]!==h||s[26]!==v?(_=t.jsx(O,{color:"primary",onClick:h,"data-testid":"login-or-signup-button",className:"screen-arch:hidden md:screen-arch:flex",children:v},"signup"),s[25]=h,s[26]=v,s[27]=_):_=s[27];const L=_;let k;if(s[28]!==w||s[29]!==L||s[30]!==T||s[31]!==n){const C=n?[L]:[w,T];k=t.jsx("div",{className:"flex items-center justify-center gap-2",children:C}),s[28]=w,s[29]=L,s[30]=T,s[31]=n,s[32]=k}else k=s[32];return k}const Ts=Ce({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Os as C,As as E,_s as L,ks as N,bs as P,Fs as a,Bs as b,Us as c,Ns as d};
//# sourceMappingURL=bc00p2ldn9cv9q32.js.map
