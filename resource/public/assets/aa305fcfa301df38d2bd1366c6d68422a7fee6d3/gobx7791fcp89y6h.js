var ke=Object.defineProperty,ge=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var V=(o,e,r)=>e in o?ke(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,m=(o,e)=>{for(var r in e||(e={}))we.call(e,r)&&V(o,r,e[r]);if(J)for(var r of J(e))be.call(e,r)&&V(o,r,e[r]);return o},I=(o,e)=>ge(o,ye(e));var Y=(o,e,r)=>V(o,typeof e!="symbol"?e+"":e,r);import{o$ as f,o_ as D,vS as $,vT as Ee,vU as se,vV as W,rG as Ie,vW as Te,rH as ve,vX as Ae,lq as ie,vY as _e,sY as Se,vZ as Ce,fT as De,fU as Pe,rI as ae,nR as C,D as q,v_ as j,cj as X,h$ as Z,bl as Re,e$ as Oe,v$ as Le,a as $e}from"./ncw8zw682jinppua.js";import{w as G,c as k,I as le,T as ue,t as Be,a as Ue,b as He,P as Ke,H as ze,R as Ve}from"./eewckg9c92mnp2ec.js";import{N as x,f as P,M as R,E as We}from"./imbbtedzs51am1ck.js";import{i as de,v as je}from"./lm3g1zm00rp6al39.js";import{i as pe,H as _,f as qe,c as Ge}from"./fuwv2o9dqpty536z.js";import{r as Fe,a as Je}from"./kqh10hum5vnfnvgi.js";import{c as Ye}from"./nxg251y5bix8gl53.js";import{r as Xe,a as Ze}from"./bitmj64bbwfuil93.js";import{t as Qe}from"./eifqzljcxkeg8zns.js";import{r as er}from"./kbj1b07s2z6vxqkg.js";import{r as rr}from"./owbget26s04j6ot0.js";function ce(o,e=null){return function(r,t){let{$from:n,$to:s}=r.selection,i=n.blockRange(s),a=!1,u=i;if(!i)return!1;if(i.depth>=2&&n.node(i.depth-1).type.compatibleContent(o)&&i.startIndex==0){if(n.index(i.depth-1)==0)return!1;let l=r.doc.resolve(i.start-2);u=new W(l,l,i.depth),i.endIndex<i.parent.childCount&&(i=new W(n,r.doc.resolve(s.end(i.depth)),i.depth)),a=!0}let d=Ie(u,o,e,i);return d?(t&&t(tr(r.tr,i,d,a,o).scrollIntoView()),!0):!1}}function tr(o,e,r,t,n){let s=f.empty;for(let l=r.length-1;l>=0;l--)s=f.from(r[l].type.create(r[l].attrs,s));o.step(new $(e.start-(t?2:0),e.end,e.start,e.end,new D(s,0,0),r.length,!0));let i=0;for(let l=0;l<r.length;l++)r[l].type==n&&(i=l+1);let a=r.length-i,u=e.start+r.length-(t?2:0),d=e.parent;for(let l=e.startIndex,p=e.endIndex,c=!0;l<p;l++,c=!1)!c&&se(o.doc,u,a)&&(o.split(u,a),u+=2*a),u+=d.child(l).nodeSize;return o}function nr(o,e){return function(r,t){let{$from:n,$to:s,node:i}=r.selection;if(i&&i.isBlock||n.depth<2||!n.sameParent(s))return!1;let a=n.node(-1);if(a.type!=o)return!1;if(n.parent.content.size==0&&n.node(-1).childCount==n.indexAfter(-1)){if(n.depth==3||n.node(-3).type!=o||n.index(-2)!=n.node(-2).childCount-1)return!1;if(t){let p=f.empty,c=n.index(-1)?1:n.index(-2)?2:3;for(let b=n.depth-c;b>=n.depth-3;b--)p=f.from(n.node(b).copy(p));let N=n.indexAfter(-1)<n.node(-2).childCount?1:n.indexAfter(-2)<n.node(-3).childCount?2:3;p=p.append(f.from(o.createAndFill()));let h=n.before(n.depth-(c-1)),M=r.tr.replace(h,n.after(-N),new D(p,4-c,0)),w=-1;M.doc.nodesBetween(h,M.doc.content.size,(b,E)=>{if(w>-1)return!1;b.isTextblock&&b.content.size==0&&(w=E+1)}),w>-1&&M.setSelection(Ee.near(M.doc.resolve(w))),t(M.scrollIntoView())}return!0}let u=s.pos==n.end()?a.contentMatchAt(0).defaultType:null,d=r.tr.delete(n.pos,s.pos),l=u?[null,{type:u}]:void 0;return se(d.doc,n.pos,2,l)?(t&&t(d.split(n.pos,2,l).scrollIntoView()),!0):!1}}function or(o){return function(e,r){let{$from:t,$to:n}=e.selection,s=t.blockRange(n,i=>i.childCount>0&&i.firstChild.type==o);return s?r?t.node(s.depth-1).type==o?sr(e,r,o,s):ir(e,r,s):!0:!1}}function sr(o,e,r,t){let n=o.tr,s=t.end,i=t.$to.end(t.depth);s<i&&(n.step(new $(s-1,i,s,i,new D(f.from(r.create(null,t.parent.copy())),1,0),1,!0)),t=new W(n.doc.resolve(t.$from.pos),n.doc.resolve(i),t.depth));const a=Te(t);if(a==null)return!1;n.lift(t,a);let u=n.mapping.map(s,-1)-1;return ve(n.doc,u)&&n.join(u),e(n.scrollIntoView()),!0}function ir(o,e,r){let t=o.tr,n=r.parent;for(let N=r.end,h=r.endIndex-1,M=r.startIndex;h>M;h--)N-=n.child(h).nodeSize,t.delete(N-1,N+1);let s=t.doc.resolve(r.start),i=s.nodeAfter;if(t.mapping.map(r.end)!=r.start+s.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,u=r.endIndex==n.childCount,d=s.node(-1),l=s.index(-1);if(!d.canReplace(l+(a?0:1),l+1,i.content.append(u?f.empty:f.from(n))))return!1;let p=s.pos,c=p+i.nodeSize;return t.step(new $(p-(a?1:0),c+(u?1:0),p+1,c-1,new D((a?f.empty:f.from(n.copy(f.empty))).append(u?f.empty:f.from(n.copy(f.empty))),a?0:1,u?0:1),a?0:1)),e(t.scrollIntoView()),!0}function ar(o){return function(e,r){let{$from:t,$to:n}=e.selection,s=t.blockRange(n,d=>d.childCount>0&&d.firstChild.type==o);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,u=a.child(i-1);if(u.type!=o)return!1;if(r){let d=u.lastChild&&u.lastChild.type==a.type,l=f.from(d?o.create():null),p=new D(f.from(o.create(null,f.from(a.type.create(null,l)))),d?3:1,0),c=s.start,N=s.end;r(e.tr.step(new $(c-(d?3:1),N,c,N,p,1,!0)).scrollIntoView())}return!0}}class lr extends x{unistNodeName(){return"blockquote"}static proseMirrorNodeName(){return"blockquote"}proseMirrorNodeSpec(){return{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}}}proseMirrorInputRules(e){return[G(/^\s{0,3}>\s$/,e.nodes[this.proseMirrorNodeName()])]}proseMirrorKeymap(e){return{"Mod->":Ae(e.nodes[this.proseMirrorNodeName()])}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r}]}}const ur=P.proseMirrorMarkName();function B(o,e){const r=[],t=[];for(const n of o.marks){if(n.type.name===ur){r.push(n);continue}t.push(n)}return o.mark([...t,e,...r])}function dr(o,e,r,t){for(let n=0;n<e.length;n++){const{$from:s,$to:i}=e[n];let a=s.depth===0?o.inlineContent&&o.type.allowsMarkType(r):!1;if(o.nodesBetween(s.pos,i.pos,(u,d)=>{if(a)return!1;a=u.inlineContent&&u.type.allowsMarkType(r)}),a)return!0}return!1}function Q(o){var r,t;const e=/^\s*/.exec(o);return(t=(r=e==null?void 0:e[0])==null?void 0:r.length)!=null?t:0}function ee(o){var r,t;const e=/\s*$/.exec(o);return(t=(r=e==null?void 0:e[0])==null?void 0:r.length)!=null?t:0}function pr(o,e,r){for(;e>0;){const t=e-1;if(!o.rangeHasMark(t,e,r))break;e=t}return e}function cr(o,e,r){for(;e<o.content.size&&o.rangeHasMark(e,e+1,r);)e+=1;return e}function Nr(o,e,r,t=null){var u,d,l,p,c,N,h,M;const{selection:n}=o;if(!(n instanceof ie))return!1;const{empty:s,$cursor:i,ranges:a}=n;if(s&&!i||!dr(o.doc,a,r))return!1;if(i)r.isInSet(o.storedMarks||i.marks())?e(o.tr.removeStoredMark(r)):e(o.tr.addStoredMark(r.create(t)));else{const w=o.tr,b=!a.some(E=>o.doc.rangeHasMark(E.$from.pos,E.$to.pos,r));for(let E=0;E<a.length;E++){const{$from:v,$to:A}=a[E];let g=v.pos,y=A.pos;const U=o.doc.textBetween(g,y,"\n");if(/^\s*$/.test(U))continue;const H=(d=(u=v.nodeBefore)==null?void 0:u.text)!=null?d:"",K=(p=(l=v.nodeAfter)==null?void 0:l.text)!=null?p:"",he=(N=(c=A.nodeBefore)==null?void 0:c.text)!=null?N:"",xe=(M=(h=A.nodeAfter)==null?void 0:h.text)!=null?M:"";if(b){const O=Q(K),z=ee(he);g+O<y&&(g+=O,y-=z),g=pr(o.doc,g,r),y=cr(o.doc,y,r),w.removeMark(g,y,o.schema.marks[P.proseMirrorMarkName()]),w.addMark(g,y,r.create(t))}else{const O=ee(H),z=Q(xe);g-=O,y+=z,w.removeMark(g,y,r)}}e(w.scrollIntoView())}return!0}function re(o,e=null){return(r,t)=>t?Nr(r,t,o,e):!0}class T extends le{constructor(r,t){super(r,(n,s,i,a)=>this.markHandler(n,s,i,a));Y(this,"markType");this.markType=t}static markApplies(r,t,n){for(const s of t){const{$from:i,$to:a}=s;let u=i.depth===0?r.type.allowsMarkType(n):!1;if(r.nodesBetween(i.pos,a.pos,d=>u?!1:(u=d.inlineContent&&d.type.allowsMarkType(n),!0)),u)return!0}return!1}markHandler(r,t,n,s){var p,c;if(!(r.selection instanceof ie))return null;const i=r.doc.resolve(n),a=r.doc.resolve(s),u=[new _e(i,a)];if(!T.markApplies(r.doc,u,this.markType))return null;const d=(c=(p=r.doc.nodeAt(n))==null?void 0:p.marks.map(N=>N.type))!=null?c:[];d.push(this.markType);const l=r.tr.replaceWith(n,s,this.markType.schema.text(t[1]));for(const N of d)l.addMark(l.mapping.map(n),l.mapping.map(s),N.create(null));for(const N of d)l.removeStoredMark(N);return l.insertText(t[2])}}class mr extends R{unistNodeName(){return"strong"}static proseMirrorMarkName(){return"strong"}proseMirrorMarkSpec(){return{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM(){return["strong"]}}}proseMirrorInputRules(e){return[new T(/\*\*([^\s](?:.*[^\s])?)\*\*([\s\S])$/,e.marks[this.proseMirrorMarkName()]),new T(/__([^\s](?:.*[^\s])?)__([\s\S])$/,e.marks[this.proseMirrorMarkName()])]}proseMirrorKeymap(e){const r=e.marks[this.proseMirrorMarkName()];return{"Mod-b":re(r),"Mod-B":re(r)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return r.map(n=>B(n,e.marks[this.proseMirrorMarkName()].create(t)))}processConvertedUnistNode(e){return{type:this.unistNodeName(),children:[e]}}}const Ne=92,fr=10,L="backslashEscape";function Mr(o,e,r){function t(n){return n==null||n===fr?(o.exit(L),e(n)):r(n)}return n=>n!==Ne?r(n):(o.enter(L),o.consume(n),t)}function hr(){return{text:{[Ne]:{name:L,tokenize:Mr}}}}function xr(){var e,r;const o=this.data();(e=o.micromarkExtensions)!=null||(o.micromarkExtensions=[]),o.micromarkExtensions.push(hr()),(r=o.fromMarkdownExtensions)!=null||(o.fromMarkdownExtensions=[]),o.fromMarkdownExtensions.push({enter:{[L](t){this.enter({type:"break"},t),this.exit(t)}}})}class kr extends x{unistNodeName(){return"break"}static proseMirrorNodeName(){return"hard_break"}proseMirrorNodeSpec(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],marks:P.proseMirrorMarkName(),toDOM(){return["br"]}}}proseMirrorKeymap(e){const r=Se(Ce,(n,s)=>(s&&s(n.tr.replaceSelectionWith(e.nodes[this.proseMirrorNodeName()].create()).scrollIntoView()),!0)),t=De()||Pe();return m({"Mod-Enter":r,"Shift-Enter":r},t&&{"Ctrl-Enter":r})}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(){return[{type:this.unistNodeName()}]}unifiedInitializationHook(e){return e.use(xr)}}const gr="code_block",te="```\n";function yr(o,e){var n;const{start:r,end:t}=o;return r==null||t==null?null:{start:r+te.length+((n=e.lang)!=null?n:"").length,end:t-te.length}}class wr extends x{dependencies(){return[new ue]}unistNodeName(){return"code"}static proseMirrorNodeName(){return gr}proseMirrorNodeSpec(){return{content:"text*",group:"block",code:!0,defining:!0,marks:[P.proseMirrorMarkName()].join(" "),attrs:{lang:{default:null},isDarkMode:{default:null}},parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}}}proseMirrorInputRules(e){return[Be(/^\s{0,3}```$/,e.nodes[this.proseMirrorNodeName()])]}unistNodeToProseMirrorNodes({node:e,attrs:r,schema:t}){var s;const{lang:n}=e;return k(this.proseMirrorNodeName(),t,ae(e,t,m(m({},r),(s=yr(r,e))!=null?s:{})),m({lang:n},r))}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),value:r.map(t=>t.type==="startend"?t.children.map(n=>n.value).join(""):t.value).join(""),lang:e.attrs.lang}]}}class br extends x{unistNodeName(){return"textDirective"}customDirectiveName(){return C}static proseMirrorNodeName(){return C}proseMirrorNodeSpec(){return{group:"inline",inline:!0,content:"inline*",atom:!0,attrs:{index:{default:null},displayLayout:{default:"inline"}},toDOM:e=>["span",{"data-type":"content-reference","data-content-reference-index":e.attrs.index,"data-display-layout":e.attrs.displayLayout},":contentReference[oaicite:".concat(e.attrs.index,']{index="').concat(e.attrs.index,'" displayLayout="').concat(e.attrs.displayLayout,'"}')],parseDOM:[{tag:'span[data-type="content-reference"]',getAttrs(e){return{index:e.getAttribute("data-index"),displayLayout:e.getAttribute("data-display-layout")||"inline"}}}]}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t}){var s,i,a;if(!de(e)||e.name!==C||e.type!==this.unistNodeName())return q.addError("ContentReferenceExtension: unistNodeToProseMirrorNodes: node is not a directive node or name is not contentReference",e),null;const n={index:(s=e.attributes)==null?void 0:s.index,displayLayout:(a=(i=e.attributes)==null?void 0:i.displayLayout)!=null?a:"inline"};return r.nodes.contentReference.create(n,t)}proseMirrorNodeToUnistNodes(e,r){if(r.length!==1)return console.warn("ContentReferenceExtension: proseMirrorNodeToUnistNodes: convertedChildren.length != 1",r),[];const s=[{type:"text",value:r[0].children[0].value}];return[{type:"textDirective",name:C,attributes:{index:e.attrs.index,displayLayout:e.attrs.displayLayout},children:s,data:{hName:C,hProperties:{displayLayout:e.attrs.displayLayout,index:e.attrs.index}}}]}}class Er extends x{unistNodeName(){return"thematicBreak"}static proseMirrorNodeName(){return"horizontal_rule"}proseMirrorNodeSpec(){return{group:"block",selectable:!1,parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}}}proseMirrorInputRules(e){return[new le(/^\s{0,3}(?:\*\*\*|---|___)\n$/,(r,t,n,s)=>{var i;return r.tr.replaceWith(n,s,(i=k(this.proseMirrorNodeName(),e,[]))!=null?i:[])})]}proseMirrorKeymap(e){return{"Mod-_":(r,t)=>(t&&t(r.tr.replaceSelectionWith(e.nodes[this.proseMirrorNodeName()].create()).scrollIntoView()),!0)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(){return[{type:this.unistNodeName()}]}}class Ir extends R{unistNodeName(){return"inlineCode"}static proseMirrorMarkName(){return"code"}proseMirrorMarkSpec(){return{inclusive:!1,parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}proseMirrorInputRules(e){return[new T(/`([^\s](?:.*[^\s])?)`([\s\S])$/,e.marks[this.proseMirrorMarkName()])]}proseMirrorKeymap(e){const r=e.marks[this.proseMirrorMarkName()];return{"Ctrl-`":j(r)}}unistNodeToProseMirrorNodes({node:e,schema:r,attrs:t}){const n=ae(e,r,t,[r.marks[this.proseMirrorMarkName()].create(t)]);return n?[n]:[]}processConvertedUnistNode(e){return{type:this.unistNodeName(),value:e.value}}}class Tr extends x{unistNodeName(){return"inlineMath"}static proseMirrorNodeName(){return"inline_math"}proseMirrorNodeSpec(){return{group:"inline",inline:!0,content:"text*",atom:!0,attrs:{latex:{default:null}},parseDOM:[{tag:"span.inline-math",getAttrs(e){return{latex:e.getAttribute("latex")}}}],toDOM(){return["span",{class:"inline-math"},0]}}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){const{value:s}=e;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{latex:s}))}proseMirrorNodeToUnistNodes(e){return[{type:this.unistNodeName(),value:e.attrs.latex}]}}class vr extends R{unistNodeName(){return"emphasis"}static proseMirrorMarkName(){return"em"}proseMirrorMarkSpec(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>e==="italic"&&null}],toDOM(){return["em"]}}}proseMirrorInputRules(e){try{return[new T(new RegExp("(?<!\\*)\\*([^\\s*](?:.*[^\\s])?)\\*([^*])$"),e.marks[this.proseMirrorMarkName()]),new T(new RegExp("(?<!_)_([^\\s_](?:.*[^\\s])?)_([^_])$"),e.marks[this.proseMirrorMarkName()])]}catch(r){return q.addError(r),[]}}proseMirrorKeymap(e){const r=e.marks[this.proseMirrorMarkName()];return{"Mod-i":j(r),"Mod-I":j(r)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return r.map(n=>B(n,e.marks[this.proseMirrorMarkName()].create(t)))}processConvertedUnistNode(e){return{type:this.unistNodeName(),children:[e]}}}const S="lineEndingBlank";function ne(o){return o.type===S}const Ar=({startIndex:o,endIndex:e,depth:r,isLastChild:t,parent:n=null})=>{const s=e-o;return r>0&&(n==null?void 0:n.type)!=="list"?s:t||o===0?s-Math.floor((s+1)/2):s-Math.floor((s-1)/2)};function _r(){var r;const o=this.data();(r=o.fromMarkdownExtensions)!=null||(o.fromMarkdownExtensions=[]),o.fromMarkdownExtensions.push({enter:{lineEndingBlank(t){this.enter({type:S},t)}},exit:{lineEndingBlank(t){this.exit(t)}}});const e=(t,n=0)=>{if(!pe(t))return;const{children:s}=t;let i=0,a=null,u=null;const d=s.length;for(let l=0;l<d;l++){const p=s[l-i];e(p,n+1);const{type:c}=p,h=l===d-1&&c===S;if(c===S&&a==null?a=l:c!==S&&a!=null?u=l:h&&a!=null&&(u=l+1),a!=null&&u!=null){const M=Ar({startIndex:a,endIndex:u,depth:n,isLastChild:h,parent:t});s.splice(a-i,M),a=null,u=null,i+=M}}};return t=>{e(t)}}class Sr extends x{unistNodeName(){return S}static proseMirrorNodeName(){return"paragraph"}proseMirrorNodeSpec(){return Ue}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:He,children:r}]}unifiedInitializationHook(e){return e.use(_r)}}class Cr extends R{unistNodeName(){return"link"}static proseMirrorMarkName(){return"link"}proseMirrorMarkSpec(){return{attrs:{href:{},title:{default:null},disabled:{default:!0}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM(e){return["a",m(m({},e.attrs),e.attrs.disabled?{href:void 0}:{})]}}}unistNodeToProseMirrorNodes({node:e,convertedChildren:r,schema:t}){const{url:n,title:s}=e;return r.map(i=>B(i,t.marks[this.proseMirrorMarkName()].create({href:n,title:s})))}processConvertedUnistNode(e,r){return I(m({type:this.unistNodeName(),url:r.attrs.href},r.attrs.title!=null&&{title:r.attrs.title}),{children:[e]})}}class F extends x{unistNodeName(){return"listItem"}static proseMirrorNodeName(){return"regular_list_item"}proseMirrorNodeSpec(){return{content:"paragraph block*",defining:!0,group:"list_item",parseDOM:[{tag:"li"}],toDOM(){return["li",0]}}}unistToProseMirrorTest(e){return e.type===this.unistNodeName()&&(!("checked"in e)||typeof e.checked!="boolean")}proseMirrorKeymap(e){const r=e.nodes[this.proseMirrorNodeName()];return{Enter:nr(r),"Shift-Tab":or(r),Tab:ar(r)}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r}]}}class Dr extends x{unistNodeName(){return"math"}static proseMirrorNodeName(){return"math_block"}proseMirrorNodeSpec(){return{group:"block",content:"text*",atom:!0,code:!0,attrs:{latex:{default:null}},parseDOM:[{tag:"div.math-block",getAttrs(e){return{latex:e.getAttribute("latex")}}}],toDOM(){return["div",{class:"math-block"},0]}}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){const{value:s}=e;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{latex:s}))}proseMirrorNodeToUnistNodes(e){return[{type:this.unistNodeName(),value:e.attrs.latex}]}}class Pr extends x{dependencies(){return[new F]}unistNodeName(){return"list"}unistToProseMirrorTest(e){return e.type===this.unistNodeName()&&e.ordered===!0}static proseMirrorNodeName(){return"ordered_list"}proseMirrorNodeSpec(){return{content:"list_item+",group:"block",attrs:{spread:{default:!1},startingNumber:{default:1}},parseDOM:[{getAttrs(e){const r=e.getAttribute("start");return{spread:e.getAttribute("data-spread")==="true",startingNumber:r!=null?parseInt(r):1}},tag:"ol"}],toDOM(e){return["ol",{"data-spread":e.attrs.spread,start:e.attrs.startingNumber},0]}}}proseMirrorInputRules(e){return[G(/^\s{0,3}(\d+)\.\s$/,e.nodes[this.proseMirrorNodeName()],r=>({startingNumber:+r[1]}),(r,t)=>t.childCount+t.attrs.startingNumber===+r[1])]}proseMirrorKeymap(e){return{"Shift-Mod-9":ce(e.nodes[this.proseMirrorNodeName()])}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){const{spread:s,start:i}=e;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{spread:s,startingNumber:i!=null?i:1}))}proseMirrorNodeToUnistNodes(e,r){const t=e.attrs.spread;return[{type:this.unistNodeName(),ordered:!0,spread:t,start:e.attrs.startingNumber,children:r.map(n=>(n.spread=t,n))}]}}class Rr extends R{unistNodeName(){return"delete"}static proseMirrorMarkName(){return"strikethrough"}proseMirrorMarkSpec(){return{parseDOM:[{tag:"s"},{tag:"del"},{style:"text-decoration",getAttrs:e=>/(^|[\s])line-through([\s]|$)/.test(e)&&null}],toDOM(){return["s"]}}}proseMirrorInputRules(e){return[new T(/~([^\s](?:.*[^\s~])?)~([^~])$/,e.marks[this.proseMirrorMarkName()]),new T(/~~([^\s](?:.*[^\s])?)~~([\s\S])$/,e.marks[this.proseMirrorMarkName()])]}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r}){return r.map(t=>B(t,e.marks[this.proseMirrorMarkName()].create()))}processConvertedUnistNode(e){return{type:this.unistNodeName(),children:[e]}}}function Or(){return o=>{let e=-1;function r(n,s){var i;if(n.type==="tableRow"&&e++,n.type==="tableCell"){const a=n;a.data=I(m({},(i=a.data)!=null?i:{}),{rowIndex:e,columnIndex:s})}}function t(n){if(pe(n))for(let s=0;s<n.children.length;s++){const i=n.children[s];r(i,s),t(i)}}t(o)}}class me extends x{unistNodeName(){return"tableCell"}unistToProseMirrorTest(e){return e.type===this.unistNodeName()}static proseMirrorNodeName(){return"table_cell"}proseMirrorNodeSpec(){return{content:"inline*",attrs:{rowIndex:{default:null},columnIndex:{default:null},colspan:{default:1},rowspan:{default:1}},tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs(e){const r=e;return{colspan:Z(r.getAttribute("colspan"),1),rowspan:Z(r.getAttribute("rowspan"),1)}}}],toDOM(e){const{colspan:r,rowspan:t}=e.attrs,n={colspan:r!==1?X(r,void 0):void 0,rowspan:t!==1?X(t,void 0):void 0};return[e.attrs.rowIndex==null||e.attrs.rowIndex>0?"td":"th",n,0]}}}proseMirrorInputRules(e){return[]}proseMirrorKeymap(e){return{}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){var s,i;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{colspan:1,rowspan:1,rowIndex:(s=e.data)==null?void 0:s.rowIndex,columnIndex:(i=e.data)==null?void 0:i.columnIndex}))}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r,data:{rowIndex:e.attrs.rowIndex,columnIndex:e.attrs.columnIndex}}]}}class fe extends x{dependencies(){return[new me]}unistNodeName(){return"tableRow"}static proseMirrorNodeName(){return"table_row"}proseMirrorNodeSpec(){return{content:"(table_cell+)",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}}}proseMirrorInputRules(e){return[]}proseMirrorKeymap(e){return{}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),children:r}]}}class Lr extends x{dependencies(){return[new fe]}unistNodeName(){return"table"}static proseMirrorNodeName(){return"table"}proseMirrorNodeSpec(){return{content:"(table_row+)",tableRole:"table",isolating:!0,group:"block",parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}}}proseMirrorInputRules(e){return[]}proseMirrorKeymap(e){return{}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:r,attrs:t}){return k(this.proseMirrorNodeName(),e,r,t)}proseMirrorNodeToUnistNodes(e,r){return[{type:this.unistNodeName(),align:[],children:r}]}unifiedInitializationHook(e){return e.use(Or)}}class $r extends x{dependencies(){return[new F]}unistNodeName(){return"list"}unistToProseMirrorTest(e){return e.type===this.unistNodeName()&&e.ordered!==!0}static proseMirrorNodeName(){return"list"}proseMirrorNodeSpec(){return{content:"list_item+",group:"block",attrs:{spread:{default:!1}},parseDOM:[{getAttrs(e){return{spread:e.getAttribute("data-spread")==="true"}},tag:"ul"}],toDOM(e){return["ul",{"data-spread":e.attrs.spread},0]}}}proseMirrorInputRules(e){return[G(/^\s{0,3}([-+*])\s$/,e.nodes[this.proseMirrorNodeName()])]}proseMirrorKeymap(e){return{"Shift-Mod-8":ce(e.nodes[this.proseMirrorNodeName()])}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t,attrs:n}){const{spread:s}=e;return k(this.proseMirrorNodeName(),r,t,I(m({},n),{spread:s}))}proseMirrorNodeToUnistNodes(e,r){const t=e.attrs.spread;return[{type:this.unistNodeName(),ordered:!1,spread:t,children:r.map(n=>(n.spread=t,n))}]}}function oe(o,e){if(!(o==null||e==null))return{start:m({},o),end:m({},e)}}const Br=()=>o=>{je(o,"list",(e,r,t)=>{var a,u,d,l,p,c,N,h,M,w,b,E;if(t==null||r==null)return;const n=[];let s=[],i=0;for(;i<e.children.length;){const v=e.children[i];if(ne(v)){const A=[];for(;i<e.children.length&&ne(e.children[i]);)A.push(e.children[i]),i++;if(s.length===0)throw new Error("Unexpected state: currentListItems is empty after encountering blank lines.");const g=s[0],y=Re(Oe(s)),U=oe((d=(a=g.position)==null?void 0:a.start)!=null?d:(u=e.position)==null?void 0:u.start,(c=(l=y.position)==null?void 0:l.end)!=null?c:(p=e.position)==null?void 0:p.end),H={type:"list",ordered:e.ordered,start:e.start,spread:e.spread,children:s,position:U};n.push(H),s=[],n.push(...A.map(K=>({type:"lineEndingBlank",position:K.position})))}else s.push(v),i++}if(s.length>0){const v=s[0],A=s[s.length-1],g=oe((M=(N=v.position)==null?void 0:N.start)!=null?M:(h=e.position)==null?void 0:h.start,(E=(w=A.position)==null?void 0:w.end)!=null?E:(b=e.position)==null?void 0:b.end),y={type:"list",ordered:e.ordered,start:e.start,spread:e.spread,children:s,position:g};n.push(y)}t.children.splice(r,1,...n)})};class Ur extends x{unistNodeName(){return"textDirective"}customDirectiveName(){return _}static proseMirrorNodeName(){return _}proseMirrorNodeSpec(){return{group:"inline",inline:!0,atom:!0,selectable:!1,attrs:{timestamp:{default:null}},toDOM:e=>["span",{"data-type":"hive-log","data-timestamp":e.attrs.timestamp}],parseDOM:[{tag:'span[data-type="hive-log"]',getAttrs(e){return{timestamp:e.getAttribute("data-timestamp")}}}]}}unistNodeToProseMirrorNodes({node:e,schema:r,convertedChildren:t}){var s,i;if(!de(e)||e.name!==_||e.type!==this.unistNodeName())return q.addError("HiveLogExtension: unistNodeToProseMirrorNodes: node is not a directive node or name is not HIVE_LOG_DIRECTIVE_NAME",e),null;const n={timestamp:(i=(s=e.attributes)==null?void 0:s.timestamp)!=null?i:null};return r.nodes[_].create(n,t)}proseMirrorNodeToUnistNodes(e){return[{type:"textDirective",name:_,attributes:{timestamp:e.attrs.timestamp},children:[],data:{hName:_,hProperties:{timestamp:e.attrs.timestamp}}}]}}const Hr=(o,e,r,t)=>o.children.map(n=>r.handle(n,void 0,r,t)).join(""),Kr=(o,e,r,t)=>r.safe(o.value,t).replaceAll("\\[","[").replaceAll("\\&","&"),zr=o=>"\\(".concat(o.value,"\\)");function Vr(){const o=this;o.compiler=e;function e(r){return Qe(r,I(m({},o.data("settings")),{fences:!0,bullet:"-",bulletOther:"*",listItemIndent:"one",resourceLink:!0,tightDefinitions:!0,rule:"-",handlers:{text:Kr,startend:Hr,inlineMath:zr},extensions:o.data("toMarkdownExtensions")||[]}))}}const Me=[er,[rr,{singleTilde:!1}],[Fe,{singleDollarTextMath:!1}],Xe,Je,Ze,qe,Br,Vr,Ge];class Wr extends We{dependencies(){const e=Le($e());return[new Sr,new Ke,new lr,new mr,new kr,new wr,new ze,new Er,new Ir,new Tr,new Dr,new vr,new Cr,new F,new Pr,new Ve,new ue,new $r,new Rr,new P,new Lr,new fe,new me,...e?[new br]:[],...Ye()?[new Ur]:[]]}unifiedInitializationHook(e){return e.use(Me)}}const nt=Object.freeze(Object.defineProperty({__proto__:null,CANVAS_REMARK_PLUGINS:Me,MarkdownExtension:Wr},Symbol.toStringTag,{value:"Module"}));export{mr as B,br as C,Er as H,vr as I,Cr as L,Wr as M,Pr as O,Rr as S,Lr as T,$r as U,gr as a,wr as b,Sr as c,lr as d,kr as e,Ir as f,F as g,fe as h,me as i,Vr as j,or as l,nt as p,Br as s,Nr as t,ce as w};
//# sourceMappingURL=gobx7791fcp89y6h.js.map
