const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dplb6m0c8b59vmq0.js","assets/bubexfvksfr7893o.js","assets/cs13hjllyr5z07le.js","assets/i9crbuggadd1d18l.js","assets/nerwniv8icoyqyjk.js","assets/fsahglpl2wxoakvg.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/ef5noj24t7u7w8z6.js","assets/j7x54nqkx9pk7sbq.js","assets/lm3g1zm00rp6al39.js","assets/conversation-small-lq38g8zw.css","assets/bo8mdhc1oc1583ww.js","assets/hul3nv4je027cslk.js","assets/euq7ybw4dhrsufo2.js","assets/m214aojas5i8u5ss.js","assets/b59jx5bzuzjke92v.js","assets/gqlpgmzguho9n5oh.js","assets/h1em0bjkpkjv8ykw.js","assets/kbj1b07s2z6vxqkg.js","assets/hu1bt0oauegdhua6.js"])))=>i.map(i=>d[i]);
var Ps=Object.defineProperty,ks=Object.defineProperties;var Ns=Object.getOwnPropertyDescriptors;var jt=Object.getOwnPropertySymbols;var js=Object.prototype.hasOwnProperty,Os=Object.prototype.propertyIsEnumerable;var Ot=(t,e,a)=>e in t?Ps(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,ue=(t,e)=>{for(var a in e||(e={}))js.call(e,a)&&Ot(t,a,e[a]);if(jt)for(var a of jt(e))Os.call(e,a)&&Ot(t,a,e[a]);return t},Ae=(t,e)=>ks(t,Ns(e));import{_ as _e,o as Xt,r as y,b as Ls,h as Xe,j as s,v as Rs,e as Ds,c as Ee,M as st,d as Tt,R as es,a as Ws}from"./bubexfvksfr7893o.js";import{az as Te,u as Se,N as Ue,c8 as wt,l3 as Hs,d as z,ak as be,cn as Lt,jC as at,dU as Fs,fy as Bs,au as Vs,_ as Je,iu as Rt,jr as ts,lo as Dt,L as Gs,ek as At,R as Ze,A as yt,a6 as $e,J as ze,dl as $s,aA as Fe,kB as ss,e0 as zs,jH as Us,kj as it,sA as Ys,fw as qs,bZ as Ks,kP as as,w as Qs,ea as Js,cz as oe,dO as Zs,dN as ns,eK as Xs,ag as Be,ah as Ve,cr as ea,ca as Mt,sB as ta,sC as sa,sD as aa,$ as Wt,a0 as Ht,aG as na,Q as oa,sE as ra,V as je,aF as ia,ay as la,M as Ye,hO as ca,aa as da,gQ as ut,dS as nt,g as os,bk as rs,rk as Ft,pV as Bt,sF as ht,jl as ua,ao as ha,lA as ma,sG as ga,d$ as pa,x as Vt,sH as fa,eA as is,p as Sa,al as xt,kN as ya,B as Gt,fx as xa,e4 as ls,jb as cs,bd as ba,pD as Ca,qs as _a,sI as Ta,O as wa,bs as bt,dZ as Aa,br as ds,l as Ma,fA as va,a4 as Ia,kW as Ea,z as ot,sJ as Pa,sK as ka,cc as us,cu as Na,g4 as ja,cp as Oa,r as $t,D as zt,sL as La,bp as Ra,n as Da,ba as Wa,jJ as Ha,bT as Fa,bn as Ba,cf as Va,cd as Ga,eF as $a,dk as za,eY as Ua,gj as Ya,hV as qa,ee as Ka,Y as Qa,nF as Ja,fO as hs,lZ as Za,aN as Xa,qW as en,iB as tn,es as sn,j6 as an}from"./ncw8zw682jinppua.js";import{nu as vt,nv as nn,nw as on,iB as X,nx as Qe,ny as rn,nz as ln,nA as $,nB as cn,nC as dn,nD as un,mu as hn,bd as mn,nE as gn,nF as pn,nG as fn,nH as ms,nI as Sn,nJ as yn,nK as xn,bE as bn,nL as Cn,j5 as _n,nM as Tn,gH as wn,ay as qe,nN as An,j4 as Mn,je as vn,hI as lt,nO as Ge,nP as In,nQ as ct,bG as En,nR as rt,nS as Pn,nT as kn,hy as Nn,gK as gs,nU as jn,ll as ps,aN as On,aA as Ut,cK as fs,nV as Ln,aw as Rn,ij as Dn,nW as Wn,nX as Hn,az as Ct,h1 as Ss,nY as Fn,av as Bn,nZ as Vn,d4 as Gn,aI as $n,n_ as ys,n$ as zn,o0 as Un,o1 as Yn,o2 as qn,o3 as Kn,o4 as Qn,o5 as Jn,o6 as Zn,o7 as Xn,o8 as eo,o9 as to,ib as so,fN as ao,oa as no,mc as oo,cZ as ro,ob as Yt,oc as io,gd as lo,dd as co,db as uo,od as ho,oe as mo,of as go,og as po,oh as fo,oi as So,oj as yo,ja as xo,ok as bo,ol as Co,om as _o,on as To,oo as wo,j2 as Ao,ig as Mo,op as vo,oq as Io,aZ as Eo,or as Po,aP as ko,os as No,ot as jo,ou as Oo,ov as Lo,ow as Ro,ox as Do,mB as Wo,oy as Ho,oz as Fo,oA as Bo,oB as Vo,oC as Go,oD as $o,oE as zo,oF as Uo,oG as Yo,oH as qo,oI as Ko,oJ as Qo,oK as Jo,oL as Zo,oM as Xo,oN as er,oO as tr,fq as qt,g_ as sr,gZ as ar}from"./lm3g1zm00rp6al39.js";import{F as nr}from"./fum95d46v8d5jv8u.js";import{u as or,p as rr,M as ir,S as xs,P as lr,a as cr,b as dr,c as ur,d as hr,D as mr,T as gr}from"./j703u6xl4odnuo39.js";import pr from"./lxa5p4s1fgqvzcgw.js";import{C as fr,T as Sr}from"./c929hhheh8pnurrs.js";import{T as yr}from"./cyrjh6r9wv2bzsqv.js";import{P as xr}from"./bc00p2ldn9cv9q32.js";const Kt=Te(()=>_e(()=>import("./dplb6m0c8b59vmq0.js"),__vite__mapDeps([0,1])),{loading:t=>Fe(t)}),br=Te(()=>_e(()=>import("./cs13hjllyr5z07le.js"),__vite__mapDeps([2,1])),{loading:t=>Fe(t)}),Cr=Te(()=>_e(()=>import("./i9crbuggadd1d18l.js"),__vite__mapDeps([3,1])),{loading:t=>Fe(t)}),_r=Te(()=>_e(()=>import("./nerwniv8icoyqyjk.js"),__vite__mapDeps([4,1])),{loading:t=>Fe(t)}),Tr=Te(()=>_e(()=>import("./fsahglpl2wxoakvg.js"),__vite__mapDeps([5,1])),{loading:t=>Fe(t)}),bs=4,wr=7,Ar=5,Mr=3600*1e3,vr=async({text:t,numCompletions:e,isUnauthenticated:a,isThreadUsingSearchMode:c=!1,autocompleteMode:u,activeSystemHintType:l})=>{try{return(a?await Ze.safePost("/conversation/experimental/generate_autocompletions_anon",{requestBody:{input_text:t,num_completions:e,in_search_mode:c,system_hint:l!=null?l:void 0},authOption:yt.Anonymous}):await Ze.safePost("/conversation/experimental/generate_autocompletions",{requestBody:{input_text:t,num_completions:e,in_search_mode:c,system_hint:l!=null?l:void 0}})).completions.map(h=>({id:Rs(),type:X.Autocomplete,title:h.slice(0,t.length),body:h.slice(t.length),oneliner:h,prompt:h,source:u}))}catch(C){return[]}},_t=(t,e=!1)=>be(t,Ue(t)?"4093727931":"312855442",{disableExposureLog:!e}),Ir=({clientThreadId:t,composerController:e,isGizmoThread:a,isNewThread:c,isProjectThread:u})=>{const[l,C]=Xt(),h=l.get("forceShowNuxCASuggestion")==="true",m=Se(),n=!Ue(m),i=wt(),{autocompletions$:o}=vt(e),f=3,p=i===$e.Search,{bingTrendingSuggestions:r,chatgptTrendingSuggestions:g,imageGenTrendingSuggestions:d,fetchBingTrendingSuggestions:S,fetchChatgptTrendingSuggestions:x}=Pr(),T=y.useRef({bing:0,chatgpt:{time:0,imageGen:!1}}),b=y.useRef(!1),[_,v]=y.useState(!1),w=Hs(I=>I.files),H=w.length>0,A=y.useMemo(()=>w.some(I=>{var R,N,q,we;return((we=(q=(R=I.fileSpec)==null?void 0:R.mimeType)!=null?q:(N=I.file)==null?void 0:N.type)!=null?we:"").toLowerCase().startsWith("image/")}),[w]),E=nn(),M=z(()=>ss(e)),P=c&&!a&&!u&&E()&&be(m,"4031588851",{disableExposureLog:!0}).get("personalized_prompts_enabled",!1),{data:F}=Ls(Ae(ue({},on(bs*2,null)),{enabled:P})),ee=y.useMemo(()=>{var R;return((R=F==null?void 0:F.items)!=null?R:[]).filter(N=>N.category==="personalized").map(N=>({type:X.Starter,id:N.id,title:N.title,body:N.description,prompt:N.prompt,oneliner:N.oneliner,category:N.category,theme:N.theme,emoji:N.emoji}))},[F]);y.useEffect(()=>Lt(at(e).dom,{click:()=>v(!0)}),[e]);const B=y.useCallback(I=>{const D=Qe(e);return D&&mt(I).startsWith(D.toLocaleLowerCase())},[e]),K=y.useCallback(I=>{const D=Qe(e),R=I.title+I.body;return B(I)?Ae(ue({},I),{title:D,body:R.slice(D.length)}):Ae(ue({},I),{title:R,body:""})},[e,B]),Q=y.useCallback((I=!1)=>{o.set(D=>!D.some(B)&&D.length>0?[]:I?D:D.map(K))},[B,K,o]),k=Xe(),Z=rn(),{data:he}=ln(4,Z),ye=y.useMemo(()=>({[$.Canvas]:[{type:X.Starter,title:k.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:k.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:$.Canvas},{type:X.Starter,title:k.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:k.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:$.Canvas},{type:X.Starter,title:k.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:k.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:$.Canvas},{type:X.Starter,title:k.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:k.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:$.Canvas}],[$.Image]:[{type:X.Starter,title:k.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:k.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:$.Image},{type:X.Starter,title:k.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:k.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:$.Image},{type:X.Starter,title:k.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:k.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:$.Image},{type:X.Starter,title:k.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:k.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:$.Image}],[$.ContextualAnswers]:[{type:X.Starter,title:k.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:k.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:s.jsx(_r,{className:"h-full w-full"}),body:"",theme:$.ContextualAnswers},{type:X.Starter,title:k.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:k.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:s.jsx(br,{className:"h-full w-full"}),body:"",theme:$.ContextualAnswers},{type:X.Starter,title:k.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:k.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:s.jsx(Cr,{className:"h-full w-full"}),body:"",theme:$.ContextualAnswers},{type:X.Starter,title:k.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:k.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:s.jsx(Tr,{className:"h-full w-full"}),body:"",theme:$.ContextualAnswers}]}),[k]),me=Fs(),L=Bs().connectorLinks.size>0,te=z(()=>zs(m)),pe=!te,{prompts:se,isLoading:Y}=cn(),ae=te&&te.length>0&&!L,re=Ue(m),de=ae?be(m,"1704943789").get("onboarding_state","control")==="suggested_prompts":!1,O=y.useMemo(()=>new dn({localStorageKey:Vs.CARecommendedPromptsUpsell,schedule:{intervalMs:1440*60*1e3,maxShowsPerInterval:3},termination:{maxShows:9}}),[]);y.useEffect(()=>{if((!ae||!de||i!=null||!O.shouldShow())&&!h||pe||Y||me==null)return;const I=[...se];o.set(D=>D.length>0?D:(b.current||(O.recordShown(),Je.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_shown","chatgpt_contextual_answers_recommended_prompt_shown",{prompts:I.map(R=>{var N;return(N=R.data)==null?void 0:N.id}).join(","),shown_times:O.getShownTimes().toString()}),b.current=!0),I))},[se,pe,Y,ae,de,i,O,h,me,o]);const G=_t(m,!1),j=_t(m,!0),U=un(m,!0),ge=or();y.useEffect(()=>Rt(()=>Dt(e),I=>{const D=()=>{o.set(R=>R.filter(N=>N.theme!==$.Search&&N.theme!==$.ChatGPTTrending&&N.theme!==$.ImageGenTrending&&N.theme!==$.Image&&N.theme!==$.Slurm&&N.theme!==$.Tatertot&&N.theme!==$.ContextualAnswersNUX&&N.theme!==$.Glaux))};if(I&&c&&!a&&!u||h)if(p)o.set(r.length>0?r:[]),T.current.bing===0&&(T.current.bing=Date.now(),S());else if(!i&&(M||_)&&E()&&U.get("homepage_prompt_style","chips")==="autocomplete"){if(U.get("personalized_prompts_enabled",!1)&&ee.length>0){const R=q=>{var Pe,ve,ke,De,Ne,We;const we=(ke=(ve=(Pe=q.oneliner)!=null?Pe:q.body)!=null?ve:q.prompt)!=null?ke:q.title;if(!we)return null;const Re=we;return Ae(ue({},q),{type:X.Autocomplete,title:(De=q.title)!=null?De:Re,body:(We=(Ne=q.body)!=null?Ne:q.oneliner)!=null?We:"",autocompletionChunks:fn(Qe(e),Re)})},N=ee.slice(0,f).map(R).filter(Boolean);o.set(N)}else if(_&&!P){const R=rr(ge,o(),4,3);o.set(R.map(N=>Ae(ue({},N),{body:""})))}}else if(!i&&G.get("enable_data",!1)){o.set(()=>_&&A&&d.length>0&&j.get("enable_image_gen_trending",!1)?d:_&&!A&&g.length>0&&j.get("enable_chatgpt_trending",!1)?g:[]);const R=Date.now(),N=T.current.chatgpt;(N.time===0||R-N.time>Mr||N.imageGen!==A)&&(T.current.chatgpt={time:R,imageGen:A},x(A))}else if(Z&&he&&he.length>0)o.set(he);else if(i===$e.PictureV2){const R=gn(k);o.set(R)}else if(i===$e.Tatertot)o.set(pn(k,re));else if(i===$e.Slurm)be(m,"1704943789").get("post_connection_connector_button",!1)&&se.length>0&&!Y&&o.set(se);else{if(o().length>0&&o()[0].theme===$.ContextualAnswersNUX)return;if(o().length===0)return;D()}else D()},{fireImmediately:!0}),[e,S,x,G,j,p,o,r,g,d,i,_,k,t,c,a,u,ye,l,C,h,H,A,re,ge,ee,U,se,Y,m,E,M,me,P,he,Z]),y.useEffect(()=>ts(()=>{if(Dt(e)){const I=o().filter(D=>D.type!==X.Autocomplete);I.length>0&&hn(I,t)}}),[e,o,t]);const ie=Nr(p),ne=be(m,"4031588851"),Oe=ne.get("autocomplete_min_char",4),Me=ne.get("autocomplete_fetch_interval",200),le=y.useRef(null),Ce=y.useCallback(Gs(async I=>{if(!Er(e,Oe)){o.set([]);return}const D=Qe(e);if(!(le.current&&le.current.length>Oe&&D.startsWith(le.current)))try{const R=(await vr({text:D,numCompletions:I,isUnauthenticated:n,isThreadUsingSearchMode:p,autocompleteMode:ie,activeSystemHintType:i})).filter(B).map(K);o.set(N=>{const q=N.filter(B),we=R.filter(Re=>{const Pe=mt(Re);return!q.some(ve=>{const ke=mt(ve);if(Pe===ke)return!0;const De=new RegExp("[\\p{P}\\p{S}]$","u"),Ne=Pe.replace(De,""),We=ke.replace(De,"");return Ne===ke||Pe===We||Ne===We})}).slice(0,f-q.length);return[...q,...we]})}catch(R){}},ie==="BING"?150:Me),[e,ie,K,Me,i]),Le=y.useCallback(()=>{Q();const I=f-o().filter(B).length;I>0&&Ce(I)},[Ce,Q,o,B]),xe=y.useMemo(()=>ie==="HARDCODED"?Q:Le,[ie,Le,Q]),ce=y.useCallback(()=>{xe()},[xe]),fe=y.useCallback(()=>{Q(!0),Qe(e).indexOf("\n")>0&&o.set([])},[e,o,Q]);y.useEffect(()=>Lt(at(e).dom,{input:ce}),[e,ce]),y.useEffect(()=>Rt(()=>Us(e),fe),[e,fe])};function Er(t,e){var c;const a=at(t).state.doc;return a.childCount===1&&((c=a.firstChild)==null?void 0:c.isTextblock)===!0&&a.content.size>=e&&a.content.size<=80}const Pr=()=>{const[t,e]=y.useState([]),[a,c]=y.useState([]),[u,l]=y.useState([]),C=At(),h=Se(),m=_t(h,!1),n=m.get("num_mobile_results",Ar),i=m.get("num_desktop_results",wr),o=m.get("item_label","PROMPT"),f=y.useCallback(async()=>{const g=(await Ze.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:bs},authOption:yt.SendIfAvailable})).suggestions.map((d,S)=>({type:X.Trending,title:Qt(d),body:"",icon:s.jsx(Kt,{className:"h-full w-full"}),prompt:Qt(d),id:"search-trending-".concat(S),theme:$.Search}));return e(g),g},[]),p=y.useCallback(async r=>{const d=((await Ze.safeGet("/trending/chatgpt",{parameters:{query:ue({num_items:C?i:n},r?{tags:["image_gen"]}:{})},authOption:yt.SendIfAvailable})).topics||[]).map((S,x)=>{var H,A,E,M,P;const T=(H=S.suggested_prompts)!=null?H:[],b=T.length>0?T[Math.floor(Math.random()*T.length)]:void 0,_=(A=b==null?void 0:b.short_prompt)!=null?A:"",v=(M=(E=S.short_title)!=null?E:S.title)!=null?M:"",w=(P=b==null?void 0:b.prompt)!=null?P:Array.isArray(S.prompts)&&S.prompts.length>0?S.prompts[Math.floor(Math.random()*S.prompts.length)]:v;return{type:X.Trending,title:o==="TITLE"?v:_,body:"",icon:s.jsx(Kt,{className:"h-full w-full"}),prompt:w,id:"chatgpt-trending-".concat(x),theme:r?$.ImageGenTrending:$.ChatGPTTrending}});return r?l(d):c(d),d},[C,n,i,o]);return{bingTrendingSuggestions:t,chatgptTrendingSuggestions:a,imageGenTrendingSuggestions:u,fetchBingTrendingSuggestions:f,fetchChatgptTrendingSuggestions:p}};function Qt(t){return t.split(" ").map(mn).join(" ")}const mt=t=>"".concat(t.title).concat(t.body).toLocaleLowerCase();function kr(){const t=Se(),a=be(t,"4031588851",{disableExposureLog:!0}).get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),c=$s();return!!c&&c.created*1e3>=new Date(a).getTime()}function Nr(t){const e=Se(),a=!Ue(e),c=ze(e,"1468311859"),u=ze(e,"2053937752"),l=ze(e,"3664702598"),C=ze(e,"471233253"),h=be(e,"4031588851"),m=be(e,"3533083032"),n=kr(),i=!a&&c||a&&u,o=(!a&&l||a&&C)&&n;let f="HARDCODED";{const p=a?m:h;if(t){const r=p.get("search_autocomplete_mode","");i&&r&&(f=r)}else o&&(f=p.get("autocomplete_mode","HARDCODED"))}return f}const jr=({clientThreadId:t,isGizmoThread:e,isNewThread:a,isProjectThread:c})=>{const u=it();return Ir({clientThreadId:t,composerController:u,isGizmoThread:e,isNewThread:a,isProjectThread:c}),null},Or="connecting";function Lr(t){"use forget";const e=Ee.c(20),{clientThreadId:a,headlineOption:c,starterPromptStyle:u,currentModelId:l,overrideMessage:C}=t,h=_n(),m=it();let n;e[0]!==m?(n=vt(m),e[0]=m,e[1]=n):n=e[1];const i=z(n.shouldShowAutocomplete$);let o;e[2]!==a?(o={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[2]=a,e[3]=o):o=e[3];const f=Tn(o),p=h?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",r=i?"pointer-events-none opacity-0":"opacity-100";let g;e[4]!==p||e[5]!==r?(g=oe("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] w-full shrink flex-col items-center justify-center px-4 transition-opacity sm:hidden",p,r),e[4]=p,e[5]=r,e[6]=g):g=e[6];let d;e[7]!==c||e[8]!==C||e[9]!==u?(d=c==="CHATGPT_LOGO"?s.jsx(as,{className:"inline-block h-12 w-12"}):u!=="tiles"?s.jsx(Cs,{headlineOption:c,overrideMessage:C}):null,e[7]=c,e[8]=C,e[9]=u,e[10]=d):d=e[10];let S;e[11]!==a||e[12]!==l||e[13]!==f||e[14]!==u?(S=u==="chips"||!f?l&&s.jsx(ir,{currentModelId:l,clientThreadId:a}):u==="tiles"&&l&&a?s.jsx(xs,{}):null,e[11]=a,e[12]=l,e[13]=f,e[14]=u,e[15]=S):S=e[15];let x;return e[16]!==g||e[17]!==d||e[18]!==S?(x=s.jsxs("div",{className:g,children:[d,S]}),e[16]=g,e[17]=d,e[18]=S,e[19]=x):x=e[19],x}function Rr({activeSystemHintType:t,isAnonModeEnabled:e,currentModelId:a}){if(t===$e.Research)return W.deepResearchPlaceholder;const u=qs(t);if(a==="n7jupd"||u)return W.whatCanIDo}function Dr(t){"use forget";const e=Ee.c(26),{clientThreadId:a,currentModelId:c}=t,u=Se();let l;e[0]!==u?(l=Ue(u),e[0]=u,e[1]=l):l=e[1];const C=!l;let h;e[2]!==u?(h=()=>Ks(u),e[2]=u,e[3]=h):h=e[3];const m=z(h);let n;if(e[4]!==u||e[5]!==C){const w=be(u,"4031588851"),H=be(u,"3533083032",{disableExposureLog:!0});n=(C?H:w).get("headline_option","HELP_WITH"),e[4]=u,e[5]=C,e[6]=n}else n=e[6];const i=n;let o;e[7]!==a?(o={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[7]=a,e[8]=o):o=e[8];const f=ms(o),p=Ys();let r;e:{if(p===Sn.Listening){r=yn;break e}else if(p===Or){r=xn;break e}r=void 0}const g=r,d=wt();let S;e[9]!==d||e[10]!==c||e[11]!==m?(S=Rr({activeSystemHintType:d,isAnonModeEnabled:m,currentModelId:c}),e[9]=d,e[10]=c,e[11]=m,e[12]=S):S=e[12];const x=S;let T;e[13]!==i||e[14]!==x||e[15]!==g?(T=s.jsx("div",{className:"mb-7 hidden text-center sm:block",children:i==="CHATGPT_LOGO"?s.jsx(as,{className:"inline-block h-12 w-12"}):s.jsx(Cs,{headlineOption:i,overrideMessage:g||x})}),e[13]=i,e[14]=x,e[15]=g,e[16]=T):T=e[16];const b=f;let _;e[17]!==a||e[18]!==c||e[19]!==i||e[20]!==x||e[21]!==b?(_=s.jsx(Lr,{headlineOption:i,starterPromptStyle:b,clientThreadId:a,currentModelId:c,overrideMessage:x}),e[17]=a,e[18]=c,e[19]=i,e[20]=x,e[21]=b,e[22]=_):_=e[22];let v;return e[23]!==T||e[24]!==_?(v=s.jsxs("div",{className:"flex justify-center",children:[T,_]}),e[23]=T,e[24]=_,e[25]=v):v=e[25],v}function Wr(t){"use forget";var H,A;const e=Ee.c(15),{headlineOption:a,overrideMessage:c}=t,u=function(M){const{name:P}=M;return s.jsx(ea,{label:m.formatMessage(W.editNicknameTooltip),delayDuration:300,side:"top",children:s.jsx("button",{onClick:()=>{Mt.setAutoHighlightNicknameInput(!0),S("#settings/".concat(ns.Personalization))},style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:Fr,onMouseLeave:Hr,children:P})})};let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=function(){const M=[],P=[];M.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),P.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...M);const F=P[Math.floor(Math.random()*P.length)],ee=M[Math.floor(Math.random()*M.length)],B="".concat(ee," | ").concat(F);Be.setCookie(Ve.headlineMessage,B)},e[0]=l):l=e[0];const C=l,h=function(){var K,Q;const M=Be.getCookie(Ve.GreetingName),P=Be.getCookie(Ve.headlineMessage),F=P==null?void 0:P.split("|"),ee=(K=F==null?void 0:F[0])==null?void 0:K.trim(),B=(Q=F==null?void 0:F[1])==null?void 0:Q.trim();return{cookieName:M,isReadyForPersonalized:!!M&&M.length<=o,headline:ee,namedHeadline:B}},m=Xe(),n=Se(),i=be(n,"1704793646"),o=i.get("name_char_limit",20),[f,p]=y.useState(h),r=wn(),g=i.get("greeting_web",!1),d=i.get("full_name_llm",!1),S=Tt();let x,T;e[1]!==n||e[2]!==d||e[3]!==r||e[4]!==g?(x=()=>ts(()=>{if(g&&r){const E=ta(n).data,M=sa(n).data;if(E&&M){const P=aa(M,E,d);Be.setCookie(Ve.GreetingName,P),Wt.count(Ht.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}C()}else Be.deleteCookie(Ve.GreetingName),Be.deleteCookie(Ve.headlineMessage)}),T=[n,g,d,r],e[1]=n,e[2]=d,e[3]=r,e[4]=g,e[5]=x,e[6]=T):(x=e[5],T=e[6]),y.useEffect(x,T);let b;e[7]!==h||e[8]!==r||e[9]!==g?(b=()=>{const E=()=>{if(g&&r){const{cookieName:M,isReadyForPersonalized:P}=h();p(F=>Ae(ue({},F),{cookieName:M,isReadyForPersonalized:P}))}};return window.addEventListener("refreshGreeting",E),()=>window.removeEventListener("refreshGreeting",E)},e[7]=h,e[8]=r,e[9]=g,e[10]=b):b=e[10],y.useEffect(b);let _,v;e[11]!==r||e[12]!==g?(_=()=>{g&&r&&Wt.count(Ht.MOONSHINE,"splashScreenV2.greeting_shown_web")},v=[g,r],e[11]=r,e[12]=g,e[13]=_,e[14]=v):(_=e[13],v=e[14]),y.useEffect(_,v);let w;return c?w=m.formatMessage(c):f.isReadyForPersonalized&&g?w=s.jsx(s.Fragment,{children:s.jsx(st,Ae(ue({},gt[(H=f.namedHeadline)!=null?H:a].withName),{values:{name:s.jsx(u,{name:(A=f.cookieName)!=null?A:""},"name")}}))}):g&&f.headline?w=m.formatMessage(gt[f.headline].original):w=m.formatMessage(gt[a].original),w}function Hr(t){t.currentTarget.className="text-inherit"}function Fr(t){t.currentTarget.className="text-token-text-secondary"}function Cs(t){"use forget";const e=Ee.c(24),{headlineOption:a,overrideMessage:c}=t,u=Se(),l=Qs();let C;e[0]!==l?(C={isTempChatVisible:l},e[0]=l,e[1]=C):C=e[1];const[h,m]=y.useState(C);let n,i;e[2]!==l?(n=()=>{m({isTempChatVisible:l})},i=[l],e[2]=l,e[3]=n,e[4]=i):(n=e[3],i=e[4]),Js(n,i);let o;e[5]!==u?(o=()=>Xs(u),e[5]=u,e[6]=o):o=e[6];const f=z(o),{openSettings:p}=bn();let r;e[7]===Symbol.for("react.memo_cache_sentinel")?(r={viewTransitionName:"var(--vt-splash-screen-headline)"},e[7]=r):r=e[7];let g;e[8]!==a||e[9]!==f||e[10]!==l||e[11]!==p||e[12]!==c||e[13]!==h.isTempChatVisible?(g=f?s.jsxs("div",{className:oe("text-page-header flex flex-col items-center gap-2",h.isTempChatVisible&&"invisible"),children:[s.jsx("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]",children:s.jsx(st,ue({},W.developerModeTitle))}),s.jsx("p",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-md text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:s.jsx(st,Ae(ue({},W.developerModeSubtitle),{values:{settings:s.jsx(Zs,{onClick:()=>p(ns.ConnectorsAdvanced),children:s.jsx(st,ue({},W.settingsLink))})}}))})]}):s.jsx("h1",{className:oe("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap",h.isTempChatVisible&&"invisible"),"aria-hidden":l,children:s.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:s.jsx(Wr,{headlineOption:a,overrideMessage:c})})}),e[8]=a,e[9]=f,e[10]=l,e[11]=p,e[12]=c,e[13]=h.isTempChatVisible,e[14]=g):g=e[14];const d=!h.isTempChatVisible&&"hidden";let S;e[15]!==d?(S=oe("bottom-0",d),e[15]=d,e[16]=S):S=e[16];const x=!l;let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(Cn,{}),e[17]=T):T=e[17];let b;e[18]!==S||e[19]!==x?(b=s.jsx("div",{className:S,"aria-hidden":x,children:T}),e[18]=S,e[19]=x,e[20]=b):b=e[20];let _;return e[21]!==b||e[22]!==g?(_=s.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:s.jsx("div",{children:s.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:r,children:[g,b]})})}),e[21]=b,e[22]=g,e[23]=_):_=e[23],_}const W=Ds({developerModeTitle:{id:"SplashScreenV2.developerModeTitle",defaultMessage:"Developer mode"},developerModeSubtitle:{id:"SplashScreenV2.developerModeSubtitle",defaultMessage:"Memory is not used for this chat. {settings}"},settingsLink:{id:"SplashScreenV2.settingsLink",defaultMessage:"Settings"},whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What’s on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What’s on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"},chatgpt:{id:"SplashScreenV2.chatgpt",defaultMessage:"ChatGPT"},whatCanIDo:{id:"SplashScreenV2.whatCanIDo",defaultMessage:"What can I do for you?"}}),gt={HELP_WITH:{original:W.whatCanIHelpWith,withName:W.whatCanIHelpWithWithName},WHERE_TO_START:{original:W.whereShouldWeStart,withName:W.whereShouldWeStartWithName},ASK_CHATGPT:{original:W.askChatgptAnything,withName:W.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:W.howCanIHelp,withName:W.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:W.goodToSeeYouWithName,withName:W.goodToSeeYouWithName},DIVE_IN:{original:W.diveInWithName,withName:W.diveInWithName},READY_WHEN_YOU_ARE:{original:W.readyWhenYouAre,withName:W.readyWhenYouAre},ON_YOUR_MIND:{original:W.onYourMind,withName:W.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:W.whatAreYouWorkingOn,withName:W.whatAreYouWorkingOn},AGENDA_TODAY:{original:W.agendaToday,withName:W.agendaToday},SHOULD_WE_BEGIN:{original:W.shouldWeBegin,withName:W.shouldWeBegin},WHAT_CAN_I_DO:{original:W.whatCanIDo,withName:W.whatCanIDo}},Br=Te(()=>_e(()=>import("./ncw8zw682jinppua.js").then(t=>t.yq),__vite__mapDeps([6,1,7])),{loading:t=>Fe(t)}),_s=t=>{var e,a;return(a=(e=je.getBranch(t))==null?void 0:e.findLast(({message:c})=>c.author.role===la.Assistant&&c.recipient==="all"))==null?void 0:a.message},pt=na(t=>{const e=oa(()=>ra(t)),a=e?_s(e):null;return ia(new Set(a?[a.id]:[]))}),Vr=t=>{"use forget";const e=Ee.c(37),{conversation:a,zIndex:c,onClick:u,onReveal:l}=t,C=Xe();let h;e[0]!==a?(h=()=>pt(a),e[0]=a,e[1]=h):h=e[1];const m=z(h),[n,i]=Ye(a.id,Gr),o=ca(i);let f;e[2]!==n?(f=n&&!!da(n),e[2]=n,e[3]=f):f=e[3];const p=f,r=n==null?void 0:n.id;let g;e[4]!==m||e[5]!==r?(g=r&&m.has(r),e[4]=m,e[5]=r,e[6]=g):g=e[6];const d=g;let S;e[7]!==a||e[8]!==r?(S=()=>{r&&pt.set(a,new Set(pt(a).add(r)))},e[7]=a,e[8]=r,e[9]=S):S=e[9];const x=ut(S);let T;e[10]!==u||e[11]!==x?(T=()=>{x(),u()},e[10]=u,e[11]=x,e[12]=T):T=e[12];const b=ut(T),_=ut(l);let v,w;e[13]!==d||e[14]!==p||e[15]!==_?(v=()=>{p&&!d&&_()},w=[p,d,_],e[13]=d,e[14]=p,e[15]=_,e[16]=v,e[17]=w):(v=e[16],w=e[17]),y.useEffect(v,w);let H,A;e[18]!==d||e[19]!==o||e[20]!==p||e[21]!==x?(H=()=>{if(p&&!d&&!o){const F=setTimeout(()=>x(),5e3);return()=>{clearTimeout(F),x()}}},A=[p,d,o,x],e[18]=d,e[19]=o,e[20]=p,e[21]=x,e[22]=H,e[23]=A):(H=e[22],A=e[23]),y.useEffect(H,A);let E,M;e[24]!==x?(E=()=>()=>x(),M=[x],e[24]=x,e[25]=E,e[26]=M):(E=e[25],M=e[26]),y.useEffect(E,M);let P;return e[27]!==a||e[28]!==b||e[29]!==d||e[30]!==C||e[31]!==o||e[32]!==p||e[33]!==n||e[34]!==x||e[35]!==c?(P=p&&!d&&s.jsx(qe,{className:"relative",style:{zIndex:c},children:s.jsxs(nt.div,{className:oe(An.main,"group bg-token-bg-primary/80 shadow-long pointer-events-auto absolute -top-2 mx-0 mb-4 h-32 w-full cursor-pointer overflow-hidden rounded-3xl px-5 py-3 backdrop-blur-2xl select-none"),initial:{opacity:0,translateY:"-50%"},animate:{opacity:1,translateY:"-100%"},exit:{opacity:0,scale:.925,filter:"blur(12px)"},transition:{duration:.6,type:"spring",bounce:.12},onClick:b,children:[s.jsx("button",{"aria-label":C.formatMessage({id:"rbCAqY",defaultMessage:"Dismiss"}),className:"dark:bg-token-bg-secondary dark:hover:bg-token-bg-tertiary text-token-text-primary absolute end-2.5 top-2.5 z-50 flex h-6 w-6 items-center justify-center rounded-full bg-black/5 opacity-0 transition-opacity group-hover:opacity-100 hover:bg-black/10",onClick:F=>{F.stopPropagation(),x()},type:"button",children:s.jsx(Br,{className:"icon icon-sm"})}),n&&s.jsx(pr,{messages:[n],conversation:a,isFeedbackEnabled:!1,isCompletionInProgress:o,hasActiveRequest:o})]})}),e[27]=a,e[28]=b,e[29]=d,e[30]=C,e[31]=o,e[32]=p,e[33]=n,e[34]=x,e[35]=c,e[36]=P):P=e[36],P};function Gr(t){return[_s(t),je.getRequestId(t)]}const $r=t=>{"use forget";const e=Ee.c(20),{clientThreadId:a,onRequestCompletion:c}=t,u=Se();let l;e[0]!==a||e[1]!==u?(l=os(u,a),e[0]=a,e[1]=u,e[2]=l):l=e[2];const C=l,h=Mn(a),m=vn(a);let n;e[3]!==C?(n=()=>rs(C),e[3]=C,e[4]=n):n=e[4];const i=z(n),[o]=Ye(a,zr);let f;if(e[5]!==C||e[6]!==o||e[7]!==(i==null?void 0:i.id)||e[8]!==m||e[9]!==c){let r;e[11]!==C||e[12]!==o.length||e[13]!==(i==null?void 0:i.id)||e[14]!==m||e[15]!==c?(r=(g,d)=>{var S;return s.jsx(fr,{isFinalTurn:d===o.length-1,turnIndex:d,conversation:C,onRequestCompletion:c,currentModelId:(S=i==null?void 0:i.id)!=null?S:null,scrollToMessageId:void 0,dateHeaderType:m(d),hideUserActions:!0,disableHorizontalPadding:!0},g)},e[11]=C,e[12]=o.length,e[13]=i==null?void 0:i.id,e[14]=m,e[15]=c,e[16]=r):r=e[16],f=o.map(r),e[5]=C,e[6]=o,e[7]=i==null?void 0:i.id,e[8]=m,e[9]=c,e[10]=f}else f=e[10];let p;return e[17]!==h||e[18]!==f?(p=s.jsx("div",{onCopy:h,className:"flex flex-col px-7 text-sm",children:f}),e[17]=h,e[18]=f,e[19]=p):p=e[19],p};function zr(t){return[je.getConversationTurnIds(t)]}const Ur=Te(()=>_e(()=>import("./ef5noj24t7u7w8z6.js"),__vite__mapDeps([8,1])),{loading:t=>Fe(t)}),ft={duration:.4,type:"spring",bounce:.1},Yr=50,Jt=.5,St=ct["fullscreen-widget-composer-transition"],qr=ct["fullscreen-popover-thread-opening-transition"],Zt=ct["fullscreen-popover-thread-closing-transition"],Kr=t=>{"use forget";const e=Ee.c(74),{clientThreadId:a,onRequestCompletion:c,composerController:u}=t,l=Se();let C;e[0]!==a||e[1]!==l?(C=os(l,a),e[0]=a,e[1]=l,e[2]=C):C=e[2];const h=C,m=y.useRef(null),[n,i]=y.useState(!1),[o,f]=y.useState(!1);let p;e[3]!==l?(p=()=>En(l).height,e[3]=l,e[4]=p):p=e[4];const r=z(p);let g;e[5]!==h?(g=()=>rt(h).height$(),e[5]=h,e[6]=g):g=e[6];const d=z(g);let S;e[7]!==h?(S=()=>rt(h).marginBottom$(),e[7]=h,e[8]=S):S=e[8];const x=z(S);let T;e[9]!==h?(T=lt(h),e[9]=h,e[10]=T):T=e[10];const b=T;let _;e[11]!==b?(_=()=>b.pinnedWidgetType$(),e[11]=b,e[12]=_):_=e[12];const v=z(_);let w;e[13]!==b?(w=()=>b.showLoadingBar$(),e[13]=b,e[14]=w):w=e[14];const H=z(w),A=r*Jt,E=r-Yr-(x!=null?x:0),M=Ft(0),P=Ft(Jt);let F;e[15]!==M||e[16]!==P?(F=[P,M],e[15]=M,e[16]=P,e[17]=F):F=e[17];let ee;e[18]!==E||e[19]!==A||e[20]!==r?(ee=G=>{const[j,U]=G;return Math.min(Math.max(j*r-U,A),E)},e[18]=E,e[19]=A,e[20]=r,e[21]=ee):ee=e[21];const B=Bt(F,ee);let K;e[22]!==b.showLoadingBar$?(K=()=>ua(ha,{requestCompletion:()=>{Ge({forceFlushSync:!0,className:[St,Zt],update:()=>{i(!1),b.showLoadingBar$.set(!0)}})},completionFinished:()=>{Ge({forceFlushSync:!0,className:St,update:()=>{b.showLoadingBar$.set(!1)}})}}),e[22]=b.showLoadingBar$,e[23]=K):K=e[23];let Q;e[24]!==b?(Q=[b],e[24]=b,e[25]=Q):Q=e[25],y.useEffect(K,Q);let k;e[26]!==u?(k=()=>{Ge({forceFlushSync:!0,className:qr,update:()=>i(!0)});try{at(u).focus()}catch(G){requestAnimationFrame(()=>{var j;(j=m.current)==null||j.focus()})}},e[26]=u,e[27]=k):k=e[27];const Z=k;let he;e[28]!==u||e[29]!==n?(he=()=>!n&&(ma()&&ss(u)||ga(u)),e[28]=u,e[29]=n,e[30]=he):he=e[30];const ye=z(he);let me;e[31]!==E||e[32]!==A?(me=[A,E],e[31]=E,e[32]=A,e[33]=me):me=e[33];let J;e[34]===Symbol.for("react.memo_cache_sentinel")?(J=[0,1],e[34]=J):J=e[34];const L=Bt(B,me,J);let te;e[35]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx(Pn,{},"blur"),e[35]=te):te=e[35];let pe;e[36]!==a||e[37]!==x||e[38]!==Z||e[39]!==v||e[40]!==H?(pe=H&&s.jsx(kn,{clientThreadId:a,bottom:x!=null?x:0,onClick:Z,pinnedWidgetType:v},"loading-bar"),e[36]=a,e[37]=x,e[38]=Z,e[39]=v,e[40]=H,e[41]=pe):pe=e[41];let se;e[42]!==L||e[43]!==n?(se=n&&s.jsx(nt.div,{initial:{opacity:0},animate:{opacity:L.get()},style:{opacity:L},exit:{opacity:0},className:"bg-token-bg-primary/50 pointer-events-auto fixed inset-0 top-(--header-height) opacity-0 backdrop-blur-xs",onClick:()=>{Ge({forceFlushSync:!0,className:Zt,update:()=>{f(!0),i(!1)}}).finished.then(()=>{f(!1)})}},"drag-overlay"),e[42]=L,e[43]=n,e[44]=se):se=e[44];let Y;e[45]!==h||e[46]!==Z||e[47]!==n||e[48]!==b.showLoadingBar$?(Y=!n&&s.jsx(Vr,{zIndex:1,conversation:h,onClick:Z,onReveal:()=>{Ge({forceFlushSync:!0,className:St,update:()=>{b.showLoadingBar$.set(!1)}})}},"last-message-banner"),e[45]=h,e[46]=Z,e[47]=n,e[48]=b.showLoadingBar$,e[49]=Y):Y=e[49];let ae;e[50]!==se||e[51]!==Y?(ae=s.jsxs(pa,{children:[se,Y]}),e[50]=se,e[51]=Y,e[52]=ae):ae=e[52];let re;e[53]!==Z||e[54]!==n||e[55]!==ye?(re=!n&&s.jsx(qe,{className:oe("pointer-events-auto absolute start-0 end-0 top-0 z-[100] flex -translate-y-full justify-center pb-2 opacity-0 transition-opacity hover:opacity-100",ye&&"opacity-100"),children:s.jsx("button",{onClick:Z,className:"text-token-text-secondary border-token-border-default bg-token-bg-primary/50 relative z-30 flex h-6 w-6 cursor-pointer items-center justify-center rounded-full border bg-clip-padding backdrop-blur-md after:absolute after:-inset-2 after:content-['']",children:s.jsx(Ur,{className:"icon-sm text-token-text-primary"})})},"open-button"),e[53]=Z,e[54]=n,e[55]=ye,e[56]=re):re=e[56];let de;e[57]!==B||e[58]!==a||e[59]!==d||e[60]!==M||e[61]!==o||e[62]!==n||e[63]!==E||e[64]!==A||e[65]!==c||e[66]!==P||e[67]!==r?(de=(n||o)&&s.jsx("div",{tabIndex:-1,ref:m,className:oe(o?"invisible":"[view-transition-name:fullscreen-popover-thread]","pointer-events-none absolute inset-x-0 bottom-0 mx-auto flex items-center justify-center rounded-3xl focus:ring-0 focus:outline-hidden focus-visible:ring-0 focus-visible:outline-hidden md:bottom-6"),role:"dialog","aria-modal":"true",onClick:Zr,children:s.jsx(qe,{children:s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx(Qr,{onDoubleClick:()=>{ht(P,(B.get()===E?A:E)/r,ft)},onDragStart:()=>M.set(0),onDragEnd:G=>{const{velocity:j}=G,{y:U}=j,ge=Jr(-U,A,E,B.get());ht(P,(ge===E?E:A)/r,ft),ht(M,0,ft)},onDrag:G=>{const{delta:j}=G,{y:U}=j;return M.set(M.get()+U)}}),s.jsx("div",{className:"bg-token-bg-primary shadow-long pointer-events-auto mx-0 flex overflow-hidden rounded-t-3xl backdrop-blur-2xl md:-mx-2! md:rounded-[34px]",children:s.jsx(nt.div,{className:"relative flex w-full flex-col-reverse overflow-y-auto",style:{height:B,paddingBottom:d!=null?d:0,WebkitMaskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)",maskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)"},children:s.jsx(In,{children:s.jsx($r,{onRequestCompletion:c,clientThreadId:a})})})})]})})},"popover-thread"),e[57]=B,e[58]=a,e[59]=d,e[60]=M,e[61]=o,e[62]=n,e[63]=E,e[64]=A,e[65]=c,e[66]=P,e[67]=r,e[68]=de):de=e[68];let O;return e[69]!==pe||e[70]!==ae||e[71]!==re||e[72]!==de?(O=s.jsxs(s.Fragment,{children:[te,pe,ae,re,de]}),e[69]=pe,e[70]=ae,e[71]=re,e[72]=de,e[73]=O):O=e[73],O},Qr=t=>{"use forget";const e=Ee.c(17),{onDrag:a,onDragEnd:c,onDoubleClick:u,onDragStart:l,onPointerUp:C}=t;let h,m,n,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={opacity:1},m={opacity:1},n={type:"tween",duration:.1},i={x:0,y:0,transform:"translateY(0px)"},e[0]=h,e[1]=m,e[2]=n,e[3]=i):(h=e[0],m=e[1],n=e[2],i=e[3]);let o;e[4]!==l?(o=()=>{l==null||l()},e[4]=l,e[5]=o):o=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f={left:0,right:0,top:0,bottom:0},e[6]=f):f=e[6];let p;e[7]!==a?(p=(d,S)=>{a==null||a(S)},e[7]=a,e[8]=p):p=e[8];let r;e[9]!==c?(r=(d,S)=>c==null?void 0:c(S),e[9]=c,e[10]=r):r=e[10];let g;return e[11]!==u||e[12]!==C||e[13]!==o||e[14]!==p||e[15]!==r?(g=s.jsx(nt.div,{drag:"y",tabIndex:-1,className:"bg-token-border-default pointer-events-auto absolute start-10 end-10 top-0 z-10 h-[4px] cursor-ns-resize rounded-b-full opacity-0 after:absolute after:inset-0 after:top-[-18px] after:h-[28px] after:bg-transparent after:content-['']",whileHover:h,whileDrag:m,transition:n,style:i,onPointerDown:o,dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:f,onDrag:p,onPointerUp:C,onDragEnd:r,onDoubleClick:u}),e[11]=u,e[12]=C,e[13]=o,e[14]=p,e[15]=r,e[16]=g):g=e[16],g};function Jr(t,e,a,c){if(!(e<=a))throw new Error("min must be <= max");const u=.25,l=8,C=24,h=1200,m=Math.abs(c-e)<=Math.abs(c-a)?e:a,n=c+t*u,i=Math.abs(n-e)<=Math.abs(n-a)?e:a;if(i===m)return m;const o=(m+i)/2,f=Math.sign(i-m)||1,p=o+f*l;if(!(f>0?n>=p:n<=p))return m;const g=Math.abs(t),d=Math.min(g/h,1),S=C*(1-d*d);return Math.abs(n-m)-Math.abs(n-i)<S?m:i}function Zr(t){return t.stopPropagation()}const Xr=Te(()=>_e(()=>import("./j7x54nqkx9pk7sbq.js"),__vite__mapDeps([9,1,6,7,10,11])).then(t=>t.AgentConnectorsSafetyModal)),ei=({conversation:t,isNewThread:e,isGizmoThread:a,isProjectThread:c,currentModelId:u,onRequestCompletion:l,shouldUseUnifiedComposer:C,onlyAllowImageUploads:h,isWidgetFullScreen:m=!1,layoutMode:n})=>{const i=Se(),{height$:o}=rt(t),f=Vt(ot),p=it(),{pageType:r}=Nn(),g=(r==null?void 0:r.type)==="landing-page",d=fa(r==null?void 0:r.type),S=gs(t.id).isOdysseyMode,x=is(i),T=At(),b=Sa(),_=Xe(),v=xt(i);jn(p);const w=Vt(ot),H=ya(i),A=z(Gt.sidebarUrlTrayOpen$),E=z(Gt.context$),M=wt(),P=w&&H&&A,F=ps(),ee=be(i,"1925940714"),{platformConnectors:B}=xa(),K=On(Ut.hasSeenOdysseyConnectorsModal),Q=Ye(t.id,O=>je.getConversationTurns(O).some(G=>G.messages.some(j=>{var U;return(U=j.metadata)==null?void 0:U.n7jupd_message}))),k=fs(),Z=ls(),he=z(()=>lt(t).showLoadingBar$()),ye=(k||Z)&&Q||m&&he;Ln(async()=>{if(!P)return;const O=M?[M]:[];if(O.includes($e.Agent))return;const G=typeof performance<"u"?performance.now():Date.now();try{const j=await Pa(E,qn,O,t.id),U=Math.round((typeof performance<"u"?performance.now():Date.now())-G);return j!=null?Je.logEventWithStatsig("kaur1br5: Sidebar context collected","chatgpt_sidebar_context_collected",{duration_ms:U,count:Array.isArray(j)?j.length:1}):Je.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",{duration_ms:U,failure_reason:"null"}),j}catch(j){const U=Math.round((typeof performance<"u"?performance.now():Date.now())-G),ge=j instanceof ka;Je.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",ue({duration_ms:U,failure_reason:ge?"timeout":"error"},j&&typeof j=="object"&&"message"in j?{error_message:String(j.message)}:j?{error_message:String(j)}:{}));return}},()=>P||!ee.get("completion_request_blocking_promise_optimization",!1));const me=cs(),J=async O=>{var ie,ne,Oe,Me,le,Ce,Le,xe;if(((ie=wa(t.id))==null?void 0:ie.isLoading)!==!1)return;const G=await Bn(O),j=L((Oe=(ne=G.promptMessage.metadata)==null?void 0:ne.attachments)!=null?Oe:[]);if(me&&j){const{promptMessage:ce,parentMessageId:fe}=G;return Vn.debug("Relaying message to voice participant"),Gn({type:"RELAY",message:ce,parentMessageId:fe})}const U=(le=(Me=G.completionMetadata)==null?void 0:Me.systemHints)==null?void 0:le.includes(bt),ge=Array.from((Ce=O.selectedSources)!=null?Ce:[]).filter(ce=>ce!=="web")[0];if(U&&ge&&K.eligible){const ce=(Le=Aa[ge])!=null?Le:ge,fe=B.get(ce);if(fe){ds(i,Xr,{connector:fe,onConfirm:()=>{$n(i,Ut.hasSeenOdysseyConnectorsModal),l(G)},onTurnOffConnectors:()=>{Ma(t.id,I=>{var D,R;(D=I.selectedSources)!=null||(I.selectedSources=new Map),I.selectedSources.set(M,new Set(["web"])),(R=I.selectedMCPSources)!=null||(I.selectedMCPSources=new Map),I.selectedMCPSources.set(M,new Set),I.mentionedSources=new Set,va({selectedSourcesMap:I.selectedSources,selectedMCPSourcesMap:I.selectedMCPSources,scope:{userId:v==null?void 0:v.authUserId,workspaceId:v==null?void 0:v.id}})})}});return}}if(w){const ce=!!E,fe=A===!0;H&&(!ce||!fe)&&Ia.error("Missing context chip on message send",{clientThreadId:t.id,hasSidebarContext:ce,isContextChipOpen:fe,contextEnabled:H,isBridgedDesktopSidebar:w,shouldCollectSidebarContext:P}),(xe=Ea())==null||xe.triggerProductEvent("messageSent")}j&&l(G)},L=y.useCallback(O=>{let G=Ca;const j=O.reduce((ge,ie)=>{var ne;return ge+((ne=ie.size)!=null?ne:0)},0);S&&(G=ba(i,"1504865540").get("max_file_size_mb",25));const U=j<=G*1024*1024;return U||b.danger(_.formatMessage({id:"odyssey.fileTooLarge",defaultMessage:"The attached files are too large. The maximum size is {maxFileSizeMB}MB."},{maxFileSizeMB:G})),U},[i,_,S,b]),te=y.useCallback(O=>{Je.logEvent("Continue Completion"),l(Rn(O))},[l]),pe=Dn.useState(O=>O.isReplayEnabled),se=_a({clientThreadId:t.id}),Y=Ta({clientThreadId:t.id});if(se)return s.jsx(Wn,{safetyLimited:Y});const ae=e&&!a,re=s.jsxs(s.Fragment,{children:[s.jsx(Hn,{clientThreadId:t.id}),s.jsxs(Ct,{ref:Ss({axis:"height",onChange:({height:O})=>o.set(O)}),verticalMargin:"none",verticalPadding:x?"last-standard":"none",horizontalPadding:w?"none":"standard",children:[m&&s.jsx(Kr,{clientThreadId:t.id,composerController:p,onRequestCompletion:l}),s.jsx(qe,{className:oe(f&&"w-full max-w-full"),children:pe?s.jsx(Fn,{clientThreadId:t.id},t.id):ye?s.jsx("div",{className:"pointer-events-none h-14"}):s.jsx(lr,{conversation:t,currentModelId:u,isNewThread:e,isProjectThread:c,hideHeader:ae,onRequestCompletion:J,onContinueGenerating:te,onlyAllowImageUploads:h,layoutMode:n})})]})]}),de=ae&&s.jsx("div",{className:oe("[display:var(--display-hidden-until-loaded,block)] md:absolute md:start-0 md:bottom-8 md:w-full"),children:s.jsx(Ct,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsx(qe,{className:oe(f&&"w-full max-w-full"),children:s.jsx(cr,{className:"block flex-1"})})})});return C?s.jsxs(s.Fragment,{children:[!T&&de,s.jsx("div",{id:"thread-bottom",children:re}),T&&de,e&&!g&&!a&&!d&&!S&&!F&&!c&&s.jsx(ti,{clientThreadId:t.id,currentModelId:u})]}):re},ti=t=>{"use forget";const e=Ee.c(32),{clientThreadId:a,currentModelId:c}=t,u=it();let l;e[0]!==u?(l=vt(u),e[0]=u,e[1]=l):l=e[1];const C=z(l.shouldShowAutocomplete$),h=ys();let m;e[2]!==a?(m={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[2]=a,e[3]=m):m=e[3];const n=ms(m),i=dr();let o;e[4]!==a?(o={clientThreadId:a,canShowBanner:!0},e[4]=a,e[5]=o):o=e[5];const{shouldShow:f}=ur(o),p=Se();let r;e[6]!==p?(r=()=>{if(us(p)||!Kn(p))return;const{data:A}=Qn(p);if(A&&!Jn(A.id)(p))return A},e[6]=p,e[7]=r):r=e[7];const g=z(r),d=Tt(),S=C&&"hidden";let x;e[8]!==S?(x=oe(S),e[8]=S,e[9]=x):x=e[9];let T;e[10]!==a||e[11]!==h||e[12]!==d||e[13]!==g?(T=!h&&s.jsxs(s.Fragment,{children:[s.jsx(zn,{clientThreadId:a}),g&&s.jsx(Un,{pulseId:g.id,caption:g.caption,previewImages:g.preview_items.map(si),onClick:()=>d("/pulse")})]}),e[10]=a,e[11]=h,e[12]=d,e[13]=g,e[14]=T):T=e[14];let b;e[15]!==i||e[16]!==a||e[17]!==c||e[18]!==n?(b=n==="tiles"||n==="hscroll"?c&&a?s.jsx(xs,{className:"mt-10 max-sm:hidden",layout:"carousel"}):null:n==="image_gen_banner"&&i?s.jsx("div",{className:"mt-16 flex justify-center max-sm:hidden",children:s.jsx(hr,{})}):n==="chips"?c&&s.jsx(mr,{clientThreadId:a,currentModelId:c}):null,e[15]=i,e[16]=a,e[17]=c,e[18]=n,e[19]=b):b=e[19];let _;e[20]!==f?(_=f&&s.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:s.jsx(gr,{})}),e[20]=f,e[21]=_):_=e[21];let v;e[22]!==T||e[23]!==b||e[24]!==_?(v=s.jsx(Ct,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsxs(qe,{children:[T,b,_]})}),e[22]=T,e[23]=b,e[24]=_,e[25]=v):v=e[25];let w;e[26]!==h?(w=h&&s.jsxs("div",{className:"thread-sm:flex mt-5 hidden flex-col gap-2",children:[s.jsx(Zn,{}),s.jsx(Xn,{}),s.jsx(eo,{})]}),e[26]=h,e[27]=w):w=e[27];let H;return e[28]!==v||e[29]!==w||e[30]!==x?(H=s.jsxs("div",{className:x,children:[v,w]}),e[28]=v,e[29]=w,e[30]=x,e[31]=H):H=e[31],H};function si(t){return Yn(t.image_url)}const ai=Te(()=>_e(()=>import("./bo8mdhc1oc1583ww.js"),__vite__mapDeps([12,1,6,7,10,11])).then(t=>t.ThreadReportConversationModal)),ni=Te(()=>_e(()=>import("./hul3nv4je027cslk.js"),__vite__mapDeps([13,1,6,7,14,15,10,11]))),oi=Te(()=>_e(()=>import("./b59jx5bzuzjke92v.js"),__vite__mapDeps([16,1,6,7,10,11,17,18,19,20])).then(t=>t.TableOfContentsSidebar));function ri({conversation:t,isNewScrollEnabled:e,pageLoadSearchQuery:a,footerRootContainerElementRef:c,threadRootRef:u,scrollContainerRef:l,isModalView:C=!1,children:h}){const m=Se(),[n]=Xt(),i=!!n.get("message"),[o,f]=z(()=>[ot(m),Xa(m)]),p=Ye(t.id,d=>(d==null?void 0:d.conversationOrigin)===en.APPLE),r=z(()=>lt(t).pinnedWidgetHeight$());if(e)return s.jsx(er,{allowScrollToEnd:!o,allowScrollToTop:!o&&p,clientThreadId:t.id,initScrolledToEnd:a==null&&!i,threadFooterRef:c,threadRootRef:u,children:h});const g=s.jsx("div",{className:"relative h-full",style:{"--pip-widget-height":r?"".concat(r,"px"):"0px"},children:s.jsxs("div",{className:oe("flex h-full flex-col overflow-y-auto",!f&&!C&&(r?"pt-(--pip-widget-height)":"thread-xl:pt-(--header-height)"),f||o?"thread-sm:[scrollbar-gutter:stable_both-edges] [scrollbar-gutter:stable]":"[scrollbar-gutter:stable_both-edges]",C&&"thread-md:pt-4"),ref:l,children:[s.jsx("div",{className:"relative",children:s.jsx(Za,{className:"absolute start-0 top-0",setIsScrolledToEdge:d=>{Mt.setIsConversationScrolledFromTop(d)},options:{root:l==null?void 0:l.current}})}),h]})});return a!=null?g:s.jsx(hs,{children:s.jsxs(y.Suspense,{fallback:null,children:[s.jsx(tr,{}),g]})})}const ii=function({conversation:t,withCustomCompletionParams:e,hideDisclaimer:a,hideHeader:c,renderEmptyState:u,renderEmptyFooter:l,isModalView:C=!1}){"use no forget";var Nt;const h=Xe(),m=Na(),n=Se(),i=to(n),o=ys(),f=ps(),p=so(n),r=At(),g=ja(),d=ao(t.id),[S,x,T,b,_]=Ye(t.id,V=>[V==null?void 0:V.isLoading,je.hasUserMessage(V),je.getConversationTurns(V).length,je.isArchived(V),V?je.getGizmoId(V):g]),v=Oa(t.id),w=y.use(xr),H=z(()=>qt(n)&&sr(n).isFeedbackModalOpen$());y.useEffect(()=>no(n,t.id),[n,t.id]);const[A]=y.useState(w==null?void 0:w.query),[E,M]=y.useState(w==null?void 0:w.navlink);y.useEffect(()=>{S||($t(t.id)?zt.addTiming("chatgpt.web.chatPage.renderNewConversation"):zt.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t.id,S]);const{setTargetedContent:P}=oo(),F=m==null?void 0:m.includes(La),ee=T>=2,B=Ra(n),[K,Q]=z(()=>[ot(n),tn(n)]),k=fs(),{hash:Z}=Ws(),he=Tt(),ye=ls(),{isOpen:me}=ro();y.useEffect(()=>{Z==="#report"&&(ds(n,ai,Ae(ue({clientThreadId:t.id},k&&(t!=null&&t.sharedConversationId)?{serverThreadId:t.sharedConversationId,isSharedConversation:!0}:{}),{isStaticSharedThread:!1})),he({hash:""},{replace:!0}))},[t,n,Z,k,he]);const J=!!_,L=$t(t.id)&&!ee&&(Yt(d)||(d==null?void 0:d.kind)===Da.GizmoTest)&&!k&&!ye&&w==null&&(!B||J),te=L&&!x&&w==null&&(!B||J||f),pe=K&&!x&&!J,se=z(()=>rs(t)),Y=se.id,ae=Wa.useStore(),re=z(()=>sn(n)),de=(Nt=xt(n))==null?void 0:Nt.isWorkspaceAccount();y.useEffect(()=>{if(Y===Ha)return ae.setActiveSystemHint(bt,re,{locked:!0,analyticsMetadata:{clientThreadId:t.id}}),()=>{ae.setActiveSystemHint(null,re,{locked:!1,ifPrevSystemHint:bt,analyticsMetadata:{clientThreadId:t.id}},de)}},[Y,ae,t.id,re,de]);const O=io(t.id,d),G=lo();y.useEffect(()=>{G||P(void 0)},[t.id,P,G]),y.useEffect(()=>{Mt.setIsConversationScrolledFromTop(!1)},[t.id]),y.useEffect(()=>{const V=new URLSearchParams(window.location.search),Ie=V.get("src");if(Ie==="history_search"){V.delete("src");const He=V.toString(),et="".concat(window.location.pathname).concat(He?"?".concat(He):"").concat(window.location.hash);window.history.replaceState({},document.title,et)}v&&Ie==="history_search"&&Ze.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:v}},requestBody:{touch:!0},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{const He=Fa(n);Ba(He,_)})},[n,v,_]);const j=y.useCallback(V=>{var He,et;const Ie=ue({conversation:t},e?e(V):V);if((et=(He=Ie.completionMetadata)==null?void 0:He.systemHints)!=null&&et.some(tt=>Va(tt))&&us(n)){const tt=Ga(n);tt&&(Ie.requestedModelId=tt)}co(Ie)},[n,t,e]),U=uo(n),ge=$a(),ie=y.useRef(null);ie.current=V=>{L&&!ge&&!B&&za(n,"3253785454").get("should_animate_composer",!1)?Ge({className:ct["composer-slide"],update:()=>j(V)}):j(V)};const ne=y.useCallback(V=>{var Ie;return(Ie=ie.current)==null?void 0:Ie.call(ie,V)},[ie]);y.useEffect(()=>{U.signalTransitionReady()},[U,t.id]),ho(t.id,ne),mo(),go(t.id),po(ne),y.useEffect(()=>Ua(()=>qt(n),()=>{ar(n).logEventWithStatsig("Web: FYP: Eligible Feed User","chatgpt_web_fyp_dau_with_fyp_available")}),[n]),fo(L);const Oe=So({clientThreadId:t.id,handleRequestCompletion:ne,prefetchSearchThreadIdPromise:w==null?void 0:w.threadId})&&A==null,Me=y.useRef(null);y.useEffect(()=>{!ye&&!o&&(document.title=O!=null?O:"ChatGPT")},[O,ye,o,h]);const le=Ya(n,_),Ce=te&&!u&&le,Le=is(n),xe=xt(n),ce=Ye(t.id,V=>V==null?void 0:V.sharedProjectConversationOwner),fe=le&&(ce==null?void 0:ce.id)!=null&&ce.id!==(xe==null?void 0:xe.normalizedAccountUserId),I=xe&&!xe.isSelfServeBusiness()&&!xe.isEnterprisey(),D=!a&&!Le&&!K&&!Ce&&!(B&&!r)&&!(L&&I)&&Yt(d),R=gs(t.id).isOdysseyMode,N=y.useRef(null),q=y.useRef(null),we=yo(V=>V.composerHeight),Re=!L&&!me&&!K,Pe=xo()&&!te&&!qa(n),ve=!le,ke=L,De=y.useCallback(()=>M(void 0),[]),{isSingleLine:Ne}=z(()=>an(n)),We=cs(),It=!Ka(),Ke=z(()=>lt(t).displayMode$()==="fullscreen"),Ts=L&&!J&&!f&&!It?"center":"bottom",{shouldShow:Et,isLoading:Pt}=bo({skip:!L||f}),[ws]=y.useState(Co(n)),dt=_o(n)&&Ue(n)&&!To()&&!ws&&L&&!f&&!Ke&&!me&&!It&&!J&&!B&&!Qa()&&!Pt&&!Et&&!R,{auraAnnouncementBannerState$:As,setAuraAnnouncementBannerState:kt}=wo(n),Ms=z(()=>As());y.useEffect(()=>{dt||kt("not-shown")},[dt,kt]);const vs=Ao();function Is(){return s.jsx(oi,{clientThreadId:t.id,scrollContainerRef:Me})}function Es(){return S||Oe?null:te?Ce?s.jsx(Uo,{clientThreadId:t.id,gizmoId:_,currentModelId:Y,onRequestCompletion:ne}):u!=null?u:s.jsx(s.Fragment,{children:J?s.jsx(Yo,{conversation:t,gizmoId:_,onRequestCompletion:ne,currentModelId:Y}):s.jsx(Dr,{clientThreadId:t.id,currentModelId:Y})}):ee||A!=null||H?s.jsx(ri,{conversation:t,isNewScrollEnabled:p,pageLoadSearchQuery:A,footerRootContainerElementRef:q,threadRootRef:N,scrollContainerRef:Me,isModalView:C,children:s.jsx(Sr,{onRequestCompletion:ne,conversation:t,scrollContainerRef:Me,pageLoadSearchQuery:A,prefetchNavlink:E,clearPrefetchNavlink:De},t.id)}):null}return s.jsx(Mo.Provider,{value:E?"user-query-with-navlink":A?"user-query":null,children:s.jsx(vo,{serverThreadId:v,children:s.jsx(Io,{clientThreadId:t.id,children:s.jsxs(Ja,{conversation:t,children:[s.jsx(ci,{conversation:t}),F&&s.jsx(ni,{}),!ye&&!o&&s.jsx(Eo,{children:O!=null&&s.jsx("title",{children:O})}),s.jsx(Po.Provider,{value:ne,children:s.jsxs(ko,{children:[s.jsx(No,{conversation:t}),s.jsx("div",{id:"thread",ref:N,className:oe("group/thread @container/thread h-full w-full",p&&Bo.threadRoot,Q&&"opacity-0"),inert:Q,children:s.jsxs(nr,{noKeyboard:!0,clientThreadId:t.id,currentModelConfig:se,className:oe("composer-parent flex flex-col focus-visible:outline-0",!le&&"overflow-hidden",Ce?"min-h-full":"h-full"),children:[!c&&s.jsx(yr,{transparentBackground:L&&!Ce,conversation:t,isEmptyState:te}),ze(n,"1909635392")&&s.jsx(jo,{clientThreadId:t.id}),s.jsxs("div",{className:oe("relative basis-auto flex-col",Re&&"-mb-(--composer-overlap-px)",Re&&(Ne?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),le||J||!L||f?"grow":"shrink",Ce?"grid":"flex",(!L||f)&&"overflow-hidden",L&&o&&!f&&"sm:min-h-[21svh]!",L&&!f&&!le&&!J&&"flex-col justify-end max-sm:grow max-sm:justify-center sm:min-h-[42svh]",i),style:{"--composer-height":we?"".concat(we,"px"):void 0},children:[vs&&Is(),Es(),B&&pe&&s.jsx(Oo,{}),Pe&&s.jsx(Lo,{})]}),s.jsxs("div",{id:"thread-bottom-container",className:oe("group/thread-bottom-container relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent print:hidden",Ke&&"pointer-events-none",!L&&!Ke&&"content-fade",Ne&&"single-line",fe&&"[--content-fade-height:110px]",fe&&"[--content-fade-top:-110px]",L&&"min-h-0",te&&l&&"grow",!D&&!K&&!R&&"mb-4",J||le||!L?"":ve&&L&&!f&&"sm:grow",ve&&"flex flex-col",Ke&&"z-60",i),ref:q,children:[b?s.jsx(Ro,{clientThreadId:t.id}):s.jsxs(s.Fragment,{children:[(!L||ve)&&!me&&s.jsxs(s.Fragment,{children:[s.jsx(ei,{isGizmoThread:J,isProjectThread:le,conversation:t,isNewThread:L,currentModelId:Y,onRequestCompletion:ne,shouldUseUnifiedComposer:ve,layoutMode:Ts,isWidgetFullScreen:Ke,onlyAllowImageUploads:We}),r&&L&&ze(n,"537200474")&&s.jsx(Do,{clientThreadId:t.id})]}),ke&&s.jsx(jr,{clientThreadId:t.id,isGizmoThread:J,isNewThread:L,isProjectThread:le})]}),D?s.jsx("div",{ref:Ss({axis:"height",onChange:({height:V})=>rt(t).marginBottom$.set(V)}),className:oe("text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs [view-transition-name:var(--vt-disclaimer)] md:px-[60px]",Ms!=="not-shown"&&"opacity-0"),children:s.jsx(Wo,{clientThreadId:t.id})}):null,te&&l]}),Et&&!Pt&&s.jsx(Ho,{clientThreadId:t.id}),s.jsx(hs,{children:dt&&s.jsx(Fo,{shouldShowDisclaimer:D,clientThreadId:t.id})})]})}),s.jsx(Vo,{}),s.jsx(Go,{conversationId:t.id}),s.jsx($o,{}),s.jsx(zo,{})]})})]})})})})},bi=es.memo(ii);function li({conversation:t}){return qo(t),Ko(),Qo(),Jo(t),Zo(),Xo(t),null}const ci=es.memo(li);export{bi as M};
//# sourceMappingURL=mqabubffkpko61wr.js.map
