var p=Object.defineProperty;var d=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var l=(t,a,e)=>a in t?p(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,g=(t,a)=>{for(var e in a||(a={}))h.call(a,e)&&l(t,e,a[e]);if(d)for(var e of d(a))M.call(a,e)&&l(t,e,a[e]);return t};import{j as i,h as C,i as y}from"./bubexfvksfr7893o.js";import{bO as x,n as b,bS as v}from"./lm3g1zm00rp6al39.js";import{u as f,kR as S,aC as j,dc as m,br as T}from"./ncw8zw682jinppua.js";function k(t){"use no forget";const a=f(),e=t.onClose,r=x(a),s=C(),c=S(a),o=B({calpicoState:r,intl:s,onClose:e,props:t,toaster:c}),n=o.isPending,u=()=>{o.isPending||o.mutate()};return i.jsx(j,{testId:"modal-start-group-chat",isOpen:!0,onClose:()=>e(),type:"success",title:t.type==="from-conversation"?s.formatMessage({id:"0xSPqM",defaultMessage:"Start group chat from this conversation"}):s.formatMessage({id:"Ue2MBg",defaultMessage:"Use ChatGPT together"}),primaryButton:i.jsx(m.Button,{title:s.formatMessage({id:"agv82V",defaultMessage:"Start group chat"}),color:"primary",disabled:n,onClick:()=>{u()},"data-testid":"start-group-chat-confirm-button"}),secondaryButton:i.jsx(m.Button,{title:s.formatMessage({id:"W6b5j+",defaultMessage:"Cancel"}),color:"secondary",disabled:n,onClick:()=>e(),"data-testid":"start-group-chat-cancel-button"}),children:i.jsx("p",{className:"text-token-text-secondary text-sm",children:t.type==="from-conversation"?s.formatMessage({id:"n10x8B",defaultMessage:"Only this conversation will be shared. Your personal ChatGPT memory is always private."}):s.formatMessage({id:"agcfjk",defaultMessage:"Add people to your chats to plan, share ideas, and get creative."})})})}function B({calpicoState:t,intl:a,onClose:e,props:r,toaster:s}){"use no forget";const c=f();return y({mutationKey:["calpico","start-group-chat",r.type],mutationFn:async()=>{let o;if(r.type==="from-conversation"){const{serverThreadId:n}=r;o=(await t.shareThreadToCalpico$(n)).id}else o=(await t.createRoom$({room_type:"GROUP_DM",with_account_user_ids:[]})).id;return o},onSuccess:o=>{t.fetchMessages$({roomId:o}),e(),b("/gg/".concat(o)),setTimeout(()=>{const n=t.rooms$().get(o);n!=null&&T(c,v,{room:n})})},onError:()=>{s.danger(a.formatMessage({id:"OJyo7m",defaultMessage:"Unable to create a group chat"}))}})}const O=t=>{"use no forget";return i.jsx(k,g({},t))};export{O as CalpicoStartChatModalContainer};
//# sourceMappingURL=b70xrbxzkuawug2w.js.map
