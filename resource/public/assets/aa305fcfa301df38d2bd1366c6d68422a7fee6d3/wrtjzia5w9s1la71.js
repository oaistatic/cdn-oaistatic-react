import{r,y as P,ag as _,d as j,ac as y,u as R,j as n}from"./bubexfvksfr7893o.js";import{J as T,a as z,pN as M,H as G,pO as E,u as I,gz as N,aZ as F,hZ as h,h_ as v,eX as H,nG as b,n as A,nE as L,nY as Q,nF as k,m5 as Y,fM as U}from"./ncw8zw682jinppua.js";import{C as $}from"./matxjx64xjrpxbwa.js";import{r as w,a as B}from"./lm3g1zm00rp6al39.js";import"./ip2dsbq9712r5wna.js";import"./o45zl9yl00508gad.js";import"./mxzk2kf77c8eueuw.js";import"./bc00p2ldn9cv9q32.js";import"./8ix1du5tuckfsvqq.js";import"./fwn4bwvyx3h4ty5g.js";import"./l1teaxoievyk0rz1.js";import"./nbm98bu0q3774lnr.js";import"./i9ddjt6oaiw4vo4g.js";import"./hzasobp3hhjtq47p.js";import"./jro698t78r3v26vt.js";import"./fum95d46v8d5jv8u.js";import"./n2u3q2i5341kdx8j.js";import"./j703u6xl4odnuo39.js";import"./me0ap2djy50z6upd.js";import"./mqabubffkpko61wr.js";import"./lxa5p4s1fgqvzcgw.js";import"./ekj7v0hd90m9gfgd.js";import"./c929hhheh8pnurrs.js";import"./b3zmi7k0e1dvao0m.js";import"./i0yczuhbjrdxz6ve.js";import"./dpidockywf8envd2.js";import"./fvq06q6sopd9r6rx.js";import"./cyrjh6r9wv2bzsqv.js";function D(a,o){const e=r.useRef(0);return()=>{e.current<o&&(a(),e.current+=1)}}const vt=()=>{w();const a=z();if(!T(a,"491279851"))return _("/")},Ot=P(function(){const o=j(),{gizmoSlug:e}=y(),t=M(e!=null?e:""),{data:c,isError:g,error:s}=G(t,!1),m=R(),p=m.getQueryData([E]),d=m.getQueryState([E]),C=(d==null?void 0:d.fetchStatus)==="fetching",u=r.useMemo(()=>p==null?void 0:p.pages.flatMap(l=>l.items),[p]),f=I(),S=N(f,t);r.useEffect(()=>{S.conversations$().preload$()},[S]),r.useEffect(()=>{if(g&&!c)if(s instanceof F&&(s.status===403||s.status===404))o(h(v.PROJECT_NOT_FOUND));else{const l=H(s);o(h(v.CUSTOM_ERROR,void 0,l))}},[g,c,o,s]);const i=r.useMemo(()=>b(f,{urlGizmoId:t}),[f,t]);B(i.id,{kind:A.GizmoInteraction,gizmo_id:t});const x=D(()=>{U(m)},5);return r.useEffect(()=>{if(!t||!c||C)return;(u==null?void 0:u.some(O=>O.gizmo.gizmo.id===t))||x()},[c,t,u,C,m,x]),n.jsx(L.Provider,{value:i,children:n.jsx(Q,{children:n.jsx(k,{conversation:i,children:n.jsx(Y,{conversation:i,children:n.jsx($,{conversation:i})})})})})});export{vt as clientLoader,Ot as default};
//# sourceMappingURL=wrtjzia5w9s1la71.js.map
