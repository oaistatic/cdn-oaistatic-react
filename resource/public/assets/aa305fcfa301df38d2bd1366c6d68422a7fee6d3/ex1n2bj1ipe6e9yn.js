import{c as K,h as G,j as n,r as R}from"./bubexfvksfr7893o.js";import{u as H,kk as V,iM as L,aB as W,cz as M,dR as q,aC as J}from"./ncw8zw682jinppua.js";import{gu as Q,gv as X,gw as Z,gx as ee,aI as te,aA as $,gy as ne}from"./lm3g1zm00rp6al39.js";function oe(c){"use forget";var u,N,I,T,_,g,y,j;const e=K.c(34),{modalInfo:t,conversationId:s,formatAction:r,onClose:f}=c,{action_items:l}=t,i=G(),d=H();let m;e[0]!==l?(m=l!=null?l:[],e[0]=l,e[1]=m):m=e[1];let p;e[2]!==m?(p=m.find(ie),e[2]=m,e[3]=p):p=e[3];const o=p;let v;e[4]!==o||e[5]!==r?(v={dropdownAction:o,formatAction:r},e[4]=o,e[5]=r,e[6]=v):v=e[6];const b=Q(v);if(!(l!=null&&l.length))return null;if(o&&b.length>0){let a;return e[7]!==s||e[8]!==o||e[9]!==b||e[10]!==t||e[11]!==f?(a=n.jsx("div",{className:"flex w-full flex-col items-center gap-2 px-8 pb-8",children:n.jsx(Z,{variant:"modal",beaconInfo:t,conversationId:s,dropdownAction:o,dropdownItems:b,onClose:f})}),e[7]=s,e[8]=o,e[9]=b,e[10]=t,e[11]=f,e[12]=a):a=e[12],a}let w,A,x;if(e[13]!==l||e[14]!==d||e[15]!==r||e[16]!==i||e[17]!==((N=(u=t.action_items)==null?void 0:u[1])==null?void 0:N.id)||e[18]!==t.beacon_id||e[19]!==f){x=Symbol.for("react.early_return_sentinel");e:{let a;e[23]!==r?(a=E=>{const S=r(E);return S?{action:E,formatted:S}:null},e[23]=r,e[24]=a):a=e[24];const B=(l!=null?l:[]).map(a).filter(ae),C=B.find(se);if(C&&C.formatted&&"onThennableClick"in C.formatted&&C.formatted.onThennableClick){x=n.jsx("div",{className:"flex justify-center pb-10",children:n.jsx(X,{onThennableClick:C.formatted.onThennableClick,text:C.formatted.text})});break e}const F=B.filter(le);if(F.length===0){x=null;break e}w="mx-6 flex flex-col justify-center gap-3 pb-8 sm:flex-row";let D;e[25]!==d||e[26]!==i||e[27]!==((T=(I=t.action_items)==null?void 0:I[1])==null?void 0:T.id)||e[28]!==t.beacon_id||e[29]!==f?(D=E=>{const{action:S,formatted:k}=E,U=typeof k.text=="string"?k.text:i.formatMessage(k.text),Y=async()=>{var O,z,P;"onThennableClick"in k&&k.onThennableClick?await k.onThennableClick():(O=k.onClick)==null||O.call(k),t.beacon_id==="free_trial_upsell_modal_beacon"&&te(d,((P=(z=t.action_items)==null?void 0:z[1])==null?void 0:P.id)==="plus_free_trial_upsell_modal_beacon_try_plus"?$.hasSeenFreeTrialUpsellModal:$.hasSeenGoFreeTrialUpsellModal),f()};return n.jsx(W,{onClick:Y,color:ee(S.type),size:"large",children:U},S.id)},e[25]=d,e[26]=i,e[27]=(g=(_=t.action_items)==null?void 0:_[1])==null?void 0:g.id,e[28]=t.beacon_id,e[29]=f,e[30]=D):D=e[30],A=F.map(D)}e[13]=l,e[14]=d,e[15]=r,e[16]=i,e[17]=(j=(y=t.action_items)==null?void 0:y[1])==null?void 0:j.id,e[18]=t.beacon_id,e[19]=f,e[20]=w,e[21]=A,e[22]=x}else w=e[20],A=e[21],x=e[22];if(x!==Symbol.for("react.early_return_sentinel"))return x;let h;return e[31]!==w||e[32]!==A?(h=n.jsx("div",{className:w,children:A}),e[31]=w,e[32]=A,e[33]=h):h=e[33],h}function le(c){const{action:e}=c;return e.type!==L.COPY}function se(c){const{action:e,formatted:t}=c;return e.type===L.COPY&&"onThennableClick"in t&&typeof t.onThennableClick=="function"}function ae(c){return c!=null}function ie(c){return(c==null?void 0:c.action_v2.action_enum)===V.DROPDOWN}function de(c){"use forget";const e=K.c(35),{onDismiss:t,onClose:s,openFileDialog:r,persistedSystemHintsStore:f,composerController:l,modalInfo:i,clientThreadId:d}=c,{title:m,description:p,header_image_url:o}=i.ui_info,{action_items:v,footer_text:b}=i,[w,A]=R.useState(!1);let x,h;e[0]!==o?(x=()=>{if(o){const C=new Image;C.src=o,C.onload=()=>A(!0)}},h=[o],e[0]=o,e[1]=x,e[2]=h):(x=e[1],h=e[2]),R.useEffect(x,h);const u=!(v!=null&&v.length);let N;e[3]!==d||e[4]!==l||e[5]!==i||e[6]!==r||e[7]!==f?(N={clientThreadId:d,location:"beacon_modal",composerController:l,persistedSystemHintsStore:f,openFileDialog:r,beaconInfo:i},e[3]=d,e[4]=l,e[5]=i,e[6]=r,e[7]=f,e[8]=N):N=e[8];const I=ne(N);if(o&&!w)return null;let T;e[9]===Symbol.for("react.memo_cache_sentinel")?(T=M("relative flex max-w-[480px] flex-col"),e[9]=T):T=e[9];let _;e[10]!==s||e[11]!==t?(_=()=>{t(),s()},e[10]=s,e[11]=t,e[12]=_):_=e[12];let g;e[13]!==s||e[14]!==t?(g=n.jsx("div",{className:"absolute end-4 top-4 z-50",children:n.jsx(q,{className:"text-token-text-secondary ring-0! outline-0! focus:ring-0! focus:ring-offset-0! focus:outline-0!",onClick:()=>{t(),s()}})}),e[13]=s,e[14]=t,e[15]=g):g=e[15];let y;e[16]!==p||e[17]!==o||e[18]!==u||e[19]!==m?(y=o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"relative w-full flex-1",children:n.jsx("img",{src:o,className:"w-full object-contain object-bottom",alt:""})}),n.jsxs("div",{className:M("mt-0 flex flex-1 flex-col items-center justify-center gap-2 px-8 pt-10 pb-6",u&&"pb-16"),children:[n.jsx("div",{className:"".concat(u?"text-center text-[24px]":"text-start text-[20px]"," leading-7 font-medium"),children:m}),n.jsx("div",{className:M("text-token-text-secondary mt-0 w-full text-center text-[16px] font-normal",u&&"text-center text-[17px]"),children:p})]})]}):n.jsxs("div",{className:"flex flex-1 flex-col gap-6 px-8 pt-12 pb-8",children:[n.jsx("div",{className:"".concat(u?"text-center text-[24px]":"text-start text-[20px]"," leading-7 font-medium"),children:m}),n.jsx("div",{className:M("text-token-text-secondary mt-0 w-full text-start text-[16px] font-normal",u&&"text-center text-[17px]"),children:p})]}),e[16]=p,e[17]=o,e[18]=u,e[19]=m,e[20]=y):y=e[20];let j;e[21]!==d||e[22]!==I||e[23]!==i||e[24]!==s?(j=n.jsx(oe,{modalInfo:i,conversationId:d,formatAction:I,onClose:s}),e[21]=d,e[22]=I,e[23]=i,e[24]=s,e[25]=j):j=e[25];let a;e[26]!==b?(a=b&&n.jsx("div",{className:"text-token-text-tertiary px-8 pb-10 font-normal",children:b}),e[26]=b,e[27]=a):a=e[27];let B;return e[28]!==s||e[29]!==_||e[30]!==g||e[31]!==y||e[32]!==j||e[33]!==a?(B=n.jsxs(J,{isOpen:!0,onClose:s,testId:"modal-beacon",size:"custom",type:"success",noPadding:!0,showCloseButton:!1,className:T,onEscapeKeyDown:_,children:[g,y,j,a]}),e[28]=s,e[29]=_,e[30]=g,e[31]=y,e[32]=j,e[33]=a,e[34]=B):B=e[34],B}export{de as BeaconModal};
//# sourceMappingURL=ex1n2bj1ipe6e9yn.js.map
