const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jp1bsz3poves5oxv.js","assets/bubexfvksfr7893o.js","assets/jaztged0ed1qpm4w.js"])))=>i.map(i=>d[i]);
import{h as N,j as r,M as O,r as w,_ as L,c as P}from"./bubexfvksfr7893o.js";import{u as k,N as K,oc as A,m4 as $,aC as G,aB as W,J,ff as X,eH as Y,az as U,cz as Z,aA as V,M as ee,dR as te}from"./ncw8zw682jinppua.js";import{b9 as se,ba as oe,bb as re,de as ne,cp as q,cq as ae}from"./lm3g1zm00rp6al39.js";import{g as ie}from"./i8xmfgagd89lcp7k.js";import{P as le}from"./k4vpjy4176uyyr80.js";import"./nuc0uj19s7rn62on.js";import"./kpldwkdi6k2a2fdo.js";import"./j51b3b8y7dx543la.js";import"./gy1lpvuoewmzh42c.js";import"./gqlpgmzguho9n5oh.js";import"./h1em0bjkpkjv8ykw.js";import"./kbj1b07s2z6vxqkg.js";import"./hu1bt0oauegdhua6.js";import"./owbget26s04j6ot0.js";import"./o6p9t02t81236kdb.js";import"./g06xst48b3fvssvn.js";import"./mh06u253e6rqurrk.js";import"./byvy8d7onv4dv8i1.js";import"./gtcvhpyyxjlawokm.js";import"./l8gfdbxyfhb5crrj.js";import"./of2lqa4u24wak95x.js";function ce({product_id:i,product_title:e,product_url:t,onClose:y}){const m=k(),n=K(m),{data:o}=se(m,A.CommerceProduct),l=N(),a=oe(m,l,i,A.CommerceProduct,{[$.EntityName]:e,[$.EntityUrl]:t});if(o==null)return null;const c="Report ".concat((e==null?void 0:e.length)<=30?e:(e==null?void 0:e.substring(0,27))+"...");return n?r.jsx(re,{reasons:o.reasons,submitReport:a,title:c,onClose:y,header:o.header,subHeader:o.header_explanation}):r.jsx(G,{testId:"modal-report-reason-selection",title:c,onClose:y,isOpen:!0,showCloseButton:!0,type:"success",primaryButton:r.jsx(W,{color:"primary",onClick:()=>{window.open("https://openai.com/form/report-content","_blank")},children:r.jsx(O,{id:"report.goToForm",defaultMessage:"Go to Form"})}),children:r.jsx("div",{className:"text-sm",children:r.jsx("div",{className:"mb-2",children:r.jsx(O,{id:"report.externalReportFormInstruction",defaultMessage:"Please use this form to report the issue."})})})})}const de=U(()=>L(()=>import("./jp1bsz3poves5oxv.js"),__vite__mapDeps([0,1])),{loading:i=>V(i)}),ue=U(()=>L(()=>import("./jaztged0ed1qpm4w.js"),__vite__mapDeps([2,1])),{loading:i=>V(i)});function H({product_id:i,product_title:e,product_url:t,isCheckoutable:y,className:m}){const n=k(),o=N(),[l,a]=w.useState(!1),[c,d]=w.useState(!1);return J(n,"1961970013")&&y?r.jsxs(r.Fragment,{children:[r.jsx(X,{open:l,onOpenChange:u=>{a(u)},side:"bottom",contentAlign:"end",triggerButton:r.jsx(ne,{className:Z("keyboard-focused:focus-ring bg-token-main-surface-primary hover:bg-token-main-surface-secondary! pointer-events-auto me-2 h-8! w-8! rounded-full! opacity-80",m),"aria-label":o.formatMessage({id:"G4IkJB",defaultMessage:"Open product options"}),"data-testid":"product-options-button",icon:ue}),size:"auto",children:r.jsx(Y.Item,{icon:de,onClick:()=>{d(!0)},children:r.jsx(O,{id:"thread.reportProduct",defaultMessage:"Report"})})}),c&&r.jsx(ce,{product_id:i,product_title:e,product_url:t,onClose:()=>d(!1)})]}):null}function Pe(i){"use forget";const e=P.c(22),{conversation:t,sidebar:y,type:m}=i,{messageId:n,turnIndex:o,contentReferenceStartIndex:l,productIndex:a}=y,c=m===void 0?"sidebar":m,d=ee(t.id,me);let h;e[0]!==t.id||e[1]!==n||e[2]!==o?(h={clientThreadId:t.id,messageId:n,turnIndex:o},e[0]=t.id,e[1]=n,e[2]=o,e[3]=h):h=e[3];const u=h;let p;e[4]!==l||e[5]!==n||e[6]!==a||e[7]!==d?(p=ie({thread:d,messageId:n,contentReferenceStartIndex:l,productIndex:a}),e[4]=l,e[5]=n,e[6]=a,e[7]=d,e[8]=p):p=e[8];const{product:s}=p;if(!s)return null;let j;e[9]!==l||e[10]!==n||e[11]!==a?(j={messageId:n,contentReferenceStartIndex:l,productIndex:a},e[9]=l,e[10]=n,e[11]=a,e[12]=j):j=e[12];let x;e[13]!==t?(x=()=>q(t),e[13]=t,e[14]=x):x=e[14];let R;return e[15]!==u||e[16]!==t.id||e[17]!==s||e[18]!==j||e[19]!==x||e[20]!==c?(R=r.jsx(Q,{product:s,sidebar:j,clientThreadId:t.id,analyticsMetadata:u,handleCloseThreadSidebar:x,type:c}),e[15]=u,e[16]=t.id,e[17]=s,e[18]=j,e[19]=x,e[20]=c,e[21]=R):R=e[21],R}function me(i){return i}function ke(i){"use forget";const e=P.c(16),{conversation:t,sidebar:y,type:m}=i,{messageId:n,product:o,contentReferenceStartIndex:l,productIndex:a}=y,c=m===void 0?"sidebar":m;let d;e[0]!==t.id||e[1]!==n?(d={clientThreadId:t.id,messageId:n,turnIndex:0},e[0]=t.id,e[1]=n,e[2]=d):d=e[2];const h=d;if(!o)return null;let u;e[3]!==l||e[4]!==n||e[5]!==a?(u={messageId:n,contentReferenceStartIndex:l,productIndex:a},e[3]=l,e[4]=n,e[5]=a,e[6]=u):u=e[6];let p;e[7]!==t?(p=()=>q(t),e[7]=t,e[8]=p):p=e[8];let s;return e[9]!==h||e[10]!==t.id||e[11]!==o||e[12]!==u||e[13]!==p||e[14]!==c?(s=r.jsx(Q,{product:o,sidebar:u,clientThreadId:t.id,analyticsMetadata:h,handleCloseThreadSidebar:p,type:c}),e[9]=h,e[10]=t.id,e[11]=o,e[12]=u,e[13]=p,e[14]=c,e[15]=s):s=e[15],s}function Q(i){"use forget";var z,D;const e=P.c(47),{product:t,sidebar:y,clientThreadId:m,analyticsMetadata:n,handleCloseThreadSidebar:o,type:l}=i,{messageId:a,contentReferenceStartIndex:c,productIndex:d}=y,h=l===void 0?"sidebar":l,u=k(),p=N(),[s,j]=w.useState(t);let x,R;e[0]!==t?(x=()=>{t&&j(t)},R=[t],e[0]=t,e[1]=x,e[2]=R):(x=e[1],R=e[2]),w.useEffect(x,R);let T;e[3]!==s?(T=s&&s.offers&&s.offers.some(pe),e[3]=s,e[4]=T):T=e[4];const I=T;if(!t)return null;const M="".concat(a,"-").concat(c,"-").concat(d),B=h==="sidebar";let _;e[5]!==n||e[6]!==m||e[7]!==c||e[8]!==a||e[9]!==t||e[10]!==d||e[11]!==B?(_=r.jsx(le,{product:t,setUpdatedProduct:j,clientThreadId:m,messageId:a,contentReferenceStartIndex:c,productIndex:d,analyticsMetadata:n,offsetTopMargin:B}),e[5]=n,e[6]=m,e[7]=c,e[8]=a,e[9]=t,e[10]=d,e[11]=B,e[12]=_):_=e[12];const S=_;let E;e[13]!==u?(E=J(u,"1961970013"),e[13]=u,e[14]=E):E=e[14];const C=E;switch(h){case"sidebar":{let g;e[15]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("div",{className:"flex grow"}),e[15]=g):g=e[15];let f;e[16]!==C||e[17]!==I||e[18]!==t||e[19]!==(s==null?void 0:s.url)?(f=C&&r.jsx(H,{product_id:t.id,product_title:t.title,product_url:(z=s==null?void 0:s.url)!=null?z:t.url,isCheckoutable:I!=null?I:!1}),e[16]=C,e[17]=I,e[18]=t,e[19]=s==null?void 0:s.url,e[20]=f):f=e[20];let b;e[21]!==f?(b=r.jsxs(r.Fragment,{children:[g,f]}),e[21]=f,e[22]=b):b=e[22];let v;e[23]!==p?(v=p.formatMessage({id:"region.sidebar.product",defaultMessage:"Product details"}),e[23]=p,e[24]=v):v=e[24];let F;return e[25]!==o||e[26]!==M||e[27]!==S||e[28]!==b||e[29]!==v?(F=r.jsx(ae,{handleClose:o,showScrollToBottomButton:!0,leading:b,leadingFullBleed:!0,ariaLabel:v,children:S},M),e[25]=o,e[26]=M,e[27]=S,e[28]=b,e[29]=v,e[30]=F):F=e[30],F}case"modal":{let g;e[31]!==C||e[32]!==I||e[33]!==t.id||e[34]!==t.title||e[35]!==t.url||e[36]!==(s==null?void 0:s.url)?(g=C&&r.jsx(H,{product_id:t.id,product_title:t.title,product_url:(D=s==null?void 0:s.url)!=null?D:t.url,isCheckoutable:I!=null?I:!1,className:"absolute end-8.5 top-1.5 z-10"}),e[31]=C,e[32]=I,e[33]=t.id,e[34]=t.title,e[35]=t.url,e[36]=s==null?void 0:s.url,e[37]=g):g=e[37];let f;e[38]!==o?(f=r.jsx(te,{className:"absolute end-2.5 top-2.5 z-10",onClick:o}),e[38]=o,e[39]=f):f=e[39];let b;return e[40]!==o||e[41]!==M||e[42]!==t.title||e[43]!==S||e[44]!==f||e[45]!==g?(b=r.jsxs(G,{testId:"modal-chat-screen-product-flyout",className:"relative max-w-md",size:"custom",type:"success",noPadding:!0,title:t.title,visuallyHiddenHeader:!0,isOpen:!0,onClose:o,rootClassName:"z-0",children:[S,g,f]},M),e[40]=o,e[41]=M,e[42]=t.title,e[43]=S,e[44]=f,e[45]=g,e[46]=b):b=e[46],b}}}function pe(i){return i.checkoutable}export{ke as ChatScreenAgentProductFlyout,Pe as ChatScreenProductFlyout,Q as ProductFlyout};
//# sourceMappingURL=oawtr1bc6aninhhp.js.map
