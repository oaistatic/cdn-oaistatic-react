const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eivopqu62plnmmfy.js","assets/bubexfvksfr7893o.js","assets/lm3g1zm00rp6al39.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/conversation-small-lq38g8zw.css","assets/o0nm716ndy4m21e9.js","assets/lxa5p4s1fgqvzcgw.js","assets/ekj7v0hd90m9gfgd.js","assets/hzasobp3hhjtq47p.js","assets/nb26rwl0zrw84ijv.js","assets/ittj4rn03sj8c62q.js","assets/a4n81fjtfjy1tyjw.js","assets/lowm54usy4rzuo31.js","assets/fk5dn736y6oc9os0.js","assets/cc4dcfwqtl2qdgl0.js","assets/owg1t5lbjzwpi0hd.js","assets/kldvd03dc86uawjw.js","assets/od50gemg82u3x7jt.js","assets/doxf4w9bcl96llqv.js","assets/luovwir6adk374h4.js","assets/lngwn6el4yzdgcj3.js","assets/pe3pcjrh9sz9z5bk.js","assets/nfrmbe34m800x218.js","assets/ebn7bwt2w9d4cap9.js","assets/i420bybxmtbqtbfk.js","assets/cifdjmblsrwrxxb4.js","assets/ce3hgmw4iyyhicud.js","assets/drmwaklva7v056il.js","assets/ns51nblw8ziscsgd.js","assets/b6setehb9ivy4393.js","assets/dy8akl8esraby0ox.js","assets/nmtov52so9futqj4.js","assets/gqlgqhfmjeo7hcnf.js","assets/dgs0l83heankdts0.js","assets/oa16lvcadyt25kvo.js","assets/eg060qqd4x8bzpxd.js","assets/fwwkwalw87hti22b.js","assets/l8gfdbxyfhb5crrj.js","assets/of2lqa4u24wak95x.js","assets/gwwqbtk9yto9dekb.js","assets/i6hdqng3ufj5kq75.js","assets/ecforv0kxuh5qyzb.js","assets/pbl95wx6493wq92j.js","assets/oc4lr1ricjtltb4h.js","assets/cot-message-kr8ex2u7.css","assets/idfsw9txnnakbckv.js","assets/kx5exoumxm73qkoo.js","assets/ff4ielulei1st3go.js","assets/i1osgu9vuflwjzxh.js"])))=>i.map(i=>d[i]);
import{_ as T,r as L,j as a,M as Ie}from"./bubexfvksfr7893o.js";import{az as f,u as Me,ic as Qe,M as ue,d as K,i7 as e,$ as $e,a0 as Je,e$ as U,fc as X,i5 as D,_ as We,hT as Fe,aR as he,cz as _e,aa as fe,ay as Ke,mW as Te,nU as He,n as H,i as Ue,ea as Xe,fb as Ye,aw as Ze,bk as qe,aJ as Ge,aN as st}from"./ncw8zw682jinppua.js";import{M as et,N as tt,O as at,Q as it,U as nt,X as xe,Y as ot,Z as lt,$ as rt,a0 as ct,a1 as mt,a2 as dt,a3 as gt,a4 as ut,a5 as ht,a6 as _t,a7 as ft,a8 as Tt,a9 as xt,aa as yt,ab as It,ac as ye,ad as jt,ae as bt,af as pt,ag as wt,ah as St,ai as Et,aj as At}from"./lm3g1zm00rp6al39.js";import{T as Ct}from"./ekj7v0hd90m9gfgd.js";import{g as Lt}from"./hzasobp3hhjtq47p.js";const Dt=f(()=>T(()=>import("./eivopqu62plnmmfy.js"),__vite__mapDeps([0,1,2,3,4,5]))),Pt=f(()=>T(()=>import("./o0nm716ndy4m21e9.js"),__vite__mapDeps([6,1,3,4]))),kt=f(()=>T(()=>import("./lxa5p4s1fgqvzcgw.js"),__vite__mapDeps([7,1,3,4,8,2,5,9]))),Rt=f(()=>T(()=>import("./nb26rwl0zrw84ijv.js"),__vite__mapDeps([10,1,3,4,2,5,11,12,13]))),vt=f(async()=>()=>null),Ot=f(async()=>(await T(()=>import("./fk5dn736y6oc9os0.js"),__vite__mapDeps([14,1,3,4,2,5]))).GlauxMessage),Bt=f(async()=>(await T(()=>import("./cc4dcfwqtl2qdgl0.js"),__vite__mapDeps([15,1,3,4,11,2,5,16,12,13,17,18]))).ImageGenMessage),Vt=f(()=>T(()=>import("./doxf4w9bcl96llqv.js"),__vite__mapDeps([19,1,3,4,2,5]))),Nt=f(()=>T(()=>import("./lm3g1zm00rp6al39.js").then(t=>t.zA),__vite__mapDeps([2,1,3,4,5])).then(t=>t.BrowsingMessage)),zt=f(()=>T(()=>import("./luovwir6adk374h4.js"),__vite__mapDeps([20,1,3,4,2,5,9])).then(t=>t.BrowserToolMessage)),Mt=f(()=>T(()=>import("./lngwn6el4yzdgcj3.js"),__vite__mapDeps([21,1,3,4,2,5])).then(t=>t.SearchResultMessage)),Qt=f(()=>T(()=>import("./pe3pcjrh9sz9z5bk.js").then(t=>t.i),__vite__mapDeps([22,1,3,4,2,5,23,24,25,26,27,28,29,30])).then(t=>t.JITPluginMessage)),$t=f(()=>T(()=>import("./dy8akl8esraby0ox.js"),__vite__mapDeps([31,1,3,4,2,5,30,25])).then(t=>t.APIToolElicitationMessage)),Jt=f(()=>T(()=>import("./nmtov52so9futqj4.js"),__vite__mapDeps([32,1,3,4,33,34,2,5])).then(t=>t.DataAnalysisMessage)),Wt=f(()=>T(()=>import("./oa16lvcadyt25kvo.js"),__vite__mapDeps([35,1,3,4,2,5,36,17,18,13,37,14,34,38,9,39,40,41,42,43,16,12,44,45]))),Ft=f(()=>T(()=>import("./idfsw9txnnakbckv.js"),__vite__mapDeps([46,1,3,4,36,2,5,17,18,13,37,14,34,38,9,39,40,41,42,43,16,12,44,45])).then(t=>t.LegacyCoTMessage)),Kt=f(()=>T(()=>import("./eg060qqd4x8bzpxd.js"),__vite__mapDeps([36,1,3,4,2,5,17,18,13,37,14,34,38,9,39,40,41,42,43,16,12,44,45])).then(t=>t.CoT)),Ht=f(()=>T(()=>import("./kx5exoumxm73qkoo.js"),__vite__mapDeps([47,1,2,3,4,5,48,49])).then(t=>t.JawboneMessage)),Ut=f(async()=>()=>null);function Xt(t){if(t.some(l=>l.type===e.SearchGPTQuery)){const h=t.filter(d=>d.type===D).flatMap(d=>d.groups),n=h.flatMap(d=>d.messages.map(m=>{var _;return(_=m.metadata)==null?void 0:_.search_turns_count})).findLast(d=>d!=null);return n!=null?n>1:(function(){const m=h.filter(j=>j.type===e.StructuredThoughts),_=h.filter(j=>j.type===e.CoTSearchTool),g=(()=>{function j(p){return p.type===e.StructuredThoughts&&p.messages.flatMap(u=>u.content).some(u=>u.content_type===Ze.StructuredThoughts&&u.thoughts.length>0)}let b=!1;for(const p of h)if(p.type===e.CoTSearchTool)b=!0;else if(j(p)&&b)return!0;return!1})();return m.length>1||_.length>1||g})()}return!0}function Yt(t,l){var h;if(t.type===D){const n=U(t.groups);return((h=n==null?void 0:n.messages[0].metadata)==null?void 0:h.is_visually_hidden_reasoning_group)&&l===0}return!1}function Zt(t){return t.type===D?!1:t.messages.some(l=>St(l))}function oa({groupedMessagesToRender:t,allMessages:l,allGroupedMessages:h,conversation:n,isUserTurn:d,isCompletionRequestInProgress:m,isFeedbackEnabled:_,isFinalTurn:g,isFinalUserTurn:j,isFinalAssistantTurn:b,isGlauxTurn:p=!1,hasActiveRequest:u,onRequestCompletion:P,turnIndex:w,shouldGrowContainer:B=!0,isParagen:Y=!1,renderingView:je="chat",isAgentTurn:V=!1,isKAUR1BR5:be=!1,query:Z=null,wasInterrupted:pe=!1,superWidgetContent:we=null,lastAgentMetadataNode:q,isWithinFirstAssistantTurns:Se=!1,hasSearchSystemHint:Ee=!1}){var ms,ds;const Q=Me(),{showDebugConversationTurns:G}=Qe(),[k]=ue(n.id,s=>[s==null?void 0:s.mode]),ss=K(()=>qe(n)),es=K(()=>Ge(n)),Ae=et(Q),Ce=K(()=>st(Q));let ts=h.some(s=>s.type===e.Browsing||s.type===e.RetrievalBrowsing||s.type===e.SearchGPTQuery||s.type===e.n7jupd);const Le=h.some(s=>s.type===e.SearchGPTQuery),as=!d&&Ee&&m&&u&&!Le&&Ce,is=L.useRef(!1);as&&(is.current=!0,ts=!0);const De=ue(n.id,s=>{var i;for(let y=l.length-1;y>=0;y--){const r=l[y],E=(i=s==null?void 0:s.tree.getNodeIfExists(r.id))==null?void 0:i.message,M=E?At(E):void 0;if(M)return Object.assign({conversation:n,messageId:l[y].id},M)}}),Pe=tt(()=>$e.count(Je.DEFAULT,"conversation_turn_grouped_messages.attempted_render_missing_type_f959b8c")),$=U(l),ns=at({clientThreadId:n.id,conversationMode:k}),ke=L.useCallback(({sourceEvent:s,requestedModelId:i,appendMessages:y,extraStreamParams:r,isReasoningSkipped:E})=>{$&&ns({sourceEvent:s,nodeId:$.id,requestedModelId:i,appendMessages:y,extraStreamParams:r,isReasoningSkipped:E})},[$,ns]),{closeThreadSidebar:Re}=it(),ve=X(t,s=>s.type!==e.Debug),J=t.map((s,i)=>{var hs,_s,fs,Ts,xs,ys,Is,js,bs,ps,ws,Ss,Es,As,Cs,Ls,Ds,Ps,ks,Rs,vs,Os,Bs,Vs,Ns,zs,Ms,Qs,$s,Js,Ws,Fs,Ks,Hs,Us,Xs,Ys,Zs,qs,Gs,se,ee,te,ae,ie,ne,oe,le,re,ce,me,de;const y=u||Zt(s),r=V?i===ve:i===h.length-1,E=Xt(t),M=Yt(s,i),I=i===h.length-1?void 0:h[i+1],Be=(I==null?void 0:I.type)===D?I.groups.at(-1):I,v=i===0?void 0:t[i-1],A=(v==null?void 0:v.type)!==D?v:void 0,gs=A==null?void 0:A.type,us=A==null?void 0:A.messages,Ve=l==null?void 0:l.filter(o=>{var c,x;return((c=o.metadata)==null?void 0:c.python_citation)||((x=o.metadata)==null?void 0:x.container_citation)});if(s.type===D){const o=s.groups[0].messages[0];return!E||M?null:a.jsx(Kt,{isStreaming:g&&r&&m,latestError:De,isFinalAssistantTurn:b,messageGroups:s.groups,nextMessageGroup:Be,prevMessageGroup:A,isAutoswitchOptOutEnabled:!!((hs=o.metadata)!=null&&hs.classifier_response),handleSkipClick:c=>{Re(),We.logEventWithStatsig("chatgpt_web_autoswitch_reasoning_skip_clicked","chatgpt_web_autoswitch_reasoning_skip_clicked",{conversationId:n.id,messageId:s.groups[0].messages[0].id}),ss&&ke({sourceEvent:c,requestedModelId:ss.id,isReasoningSkipped:!0,isAgentTurn:V})},isAgentTurn:V,isGlauxTurn:p,isKAUR1BR5:be,wasInterrupted:pe,lastAgentMetadataNode:q,conversation:n,turnIndex:w,currentGroupedMessageIndex:i},"cot-"+o.id)}const Ne=s&&!Fe(s.messages[0]),ze=ts&&Ne,C=[];if(ze||C.push(a.jsx(Ct,{className:"min-h-8",message:s.messages[0],isFeedbackEnabled:_,isFinalUserTurn:j,isWithinFirstAssistantTurns:Se,isCompletionInProgress:r&&m,hasActiveRequest:u,turnIndex:w,conversation:n,isUserTurn:d,prevGroupedMessageType:gs,prevGroupedMessages:us,citableMessages:Ve,superWidgetContent:we},"text-message-"+s.messages[0].id)),G&&C.push(a.jsx(Ut,{clientThreadId:n.id,message:s.messages[0]},"message-debug-"+s.messages[0].id)),s.type===e.Text&&((_s=s.messages[0].metadata)!=null&&_s[he])){const o=s.messages[0].metadata[he];return a.jsxs(L.Fragment,{children:[a.jsx(nt,{browserContextMetadata:o,className:_e(Lt(!0),"mb-1","block","[.text-message+&]:mt-5")}),C]},"group-"+s.messages[0].id)}if(as&&r)return a.jsx(xe,{clientThreadId:n.id,turnIndex:w,isRequestActive:u,isLastMessage:r,isLastTurnInConversation:g,query:Z,searchModelQueries:[],searchResultGroups:[],showFastNav:!1,isForcedMessage:!0,shouldShowAnimatedBlackDot:!1},"searchquery-forced-".concat(n.id,"-").concat(w));switch(s.type){case e.Text:case e.MultiText:if(s.type===e.Text){const o=(fs=s.messages[0])==null?void 0:fs.metadata,c=typeof(o==null?void 0:o.source)=="string"&&(o==null?void 0:o.source)==="dream_followup";return a.jsxs(L.Fragment,{children:[c&&v&&a.jsxs("div",{className:"mx-auto mt-8 mb-6 flex w-full items-center justify-center",children:[a.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),a.jsx("p",{className:"mx-3 shrink text-[14px] whitespace-nowrap text-gray-500",children:a.jsx(Ie,{id:"threadLayout.proactiveAssistantFollowupDivider",defaultMessage:"Follow-up question"})}),a.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]},"proactive-divider-"+s.messages[0].id),C,V&&a.jsx(Tt,{conversation:n,currentGroupedMessage:s,isLastMessage:r,isLastTurnInConversation:g,turnIndex:w,lastAgentMetadataNode:q}),a.jsx(xt,{isUserTurn:d,message:s.messages[0]}),a.jsx(yt,{isUserTurn:d,message:s.messages[0],clientThreadId:n.id})]},"group-"+s.messages[0].id)}else return s.type===e.MultiText?a.jsx(kt,{conversation:n,messages:s.messages,isCompletionInProgress:r&&m,isFeedbackEnabled:_,hasActiveRequest:u,prevGroupedMessageType:gs,prevGroupedMessages:us},"multitext-"+((xs=(Ts=s.messages[0])==null?void 0:Ts.id)!=null?xs:i)):s.type;case e.PIMBlock:{const o=U(l);return k&&o?a.jsx(ft,{isFinalTurn:g,hasActiveRequest:u,conversationMode:k,clientThreadId:n.id,justification:(ys=o.metadata)==null?void 0:ys.pim_justification,flaggedMessageId:(Is=o.metadata)==null?void 0:Is.pim_message_id,children:C}):null}case e.n7jupd_n:return a.jsx(_t,{});case e.Browsing:case e.RetrievalBrowsing:{const o=k!=null&&[H.GizmoInteraction,H.GizmoMagicCreate,H.GizmoTest].includes(k.kind),c=es?Ue(es):!1;return a.jsx(Nt,{messages:s.messages,isRequestActive:u,isLastMessageInTurn:r,isUsingGizmo:o,isUsingProject:c,isRetrieval:s.type===e.RetrievalBrowsing},"browsing-"+((bs=(js=s.messages[0])==null?void 0:js.id)!=null?bs:i))}case e.kaur1br5:return a.jsx(zt,{messages:s.messages,isRequestActive:u,isLastMessageInTurn:r,clientThreadId:n.id},"kaur1br5-tool-"+((ws=(ps=s.messages[0])==null?void 0:ps.id)!=null?ws:i));case e.SearchGPTQuery:{if(t.some(S=>S.type===D)&&E)return null;const c=t.slice(i+1).findLast(S=>S.type===e.Text||S.type===e.CoTSearchTool),x=l.findLast(S=>Te(S).length>0),O=new Set,ge=[];for(const S of l){const W=He(S);if(W&&W.length>0)for(const F of W)O.has(F)||(O.add(F),ge.push(F))}return a.jsx(xe,{clientThreadId:n.id,turnIndex:w,isRequestActive:u,isLastMessage:r,isLastTurnInConversation:g,nextMessage:c==null?void 0:c.messages[0],query:Z,searchResultGroups:Te(x),searchModelQueries:ge,shouldShowAnimatedBlackDot:!is.current},"searchquery-"+((Es=(Ss=s.messages[0])==null?void 0:Ss.id)!=null?Es:i))}case e.StructuredThoughts:return null;case e.ReasoningRecap:return null;case e.n7jupd:return null;case e.n7jupd_native_api_tool:case e.n7jupd_a:case e.n7jupd_x:return null;case e.a8km123:{if(!s.messages.every(c=>{var x;return!((x=c.metadata)!=null&&x.reasoning_status)})){const c=X(l,x=>x.author.role===Ke.Assistant&&x.recipient==="all");return a.jsx(Ft,{conversation:n,turnIndex:w,isStreaming:(r||c<i)&&m,isFinalAssistantTurn:b,messages:s.messages},"sum-"+((Cs=(As=s.messages[0])==null?void 0:As.id)!=null?Cs:i))}return a.jsx(Wt,{messages:s.messages,isStreaming:r&&m,isCompletionRequestInProgress:m,hasActiveRequest:u,isLastMessage:r,isFinalTurn:g,isFeedbackEnabled:_,conversation:n,currentGroupedMessageIndex:i,turnIndex:w},"sum-"+((Ds=(Ls=s.messages[0])==null?void 0:Ls.id)!=null?Ds:i))}case e.f959b8c:return Pe(),null;case e.is_loading_message:if(r&&m){const o=s.messages[0],c=fe(o);return a.jsx(ht,{text:c},"loading-message-"+i)}else return null;case e.b47u8ra0_t:{const o=s.messages[0],c="Reference Browser Memories?",x=fe(o);return a.jsx(ut,{title:c,description:x,settingsTab:(ks=(Ps=o.metadata)==null?void 0:Ps.b47u8ra0_t)!=null?ks:"general",clientThreadId:n.id,parentMessageId:o.id},"b47u8ra0_t-"+i)}case e.l1p9k3u:return null;case e.b1de6e2_c:return a.jsx(gt,{messages:s.messages,clientThreadId:n.id,isLastMessage:r},"b1de6e2-"+((vs=(Rs=s.messages[0])==null?void 0:Rs.id)!=null?vs:i));case e.b1de6e2_s:return a.jsx(dt,{messages:s.messages,clientThreadId:n.id},"b1de6e2_s-"+((Bs=(Os=s.messages[0])==null?void 0:Os.id)!=null?Bs:i));case e.b1de6e2_d:return null;case e.b1de6e2_rm:return a.jsx(mt,{messages:s.messages,clientThreadId:n.id,renderingView:je,children:C},"b1de6e2_rm-"+((Ns=(Vs=s.messages[0])==null?void 0:Vs.id)!=null?Ns:i));case e.async_task_result_message:return a.jsx(ct,{clientThreadId:n.id,messages:s.messages,children:C},"async_task_result_message-"+((Ms=(zs=s.messages[0])==null?void 0:zs.id)!=null?Ms:i));case e.de1d73e:if(Ae){const o=i+1<h.length?h[i+1]:void 0;return a.jsx(Ht,{clientThreadId:n.id,currentGroupedMessage:s,nextMessage:o&&o.type===e.Text?o.messages[0]:void 0,isLastMessage:r,isRequestActive:u},"jawbone-"+(($s=(Qs=s.messages[0])==null?void 0:Qs.id)!=null?$s:i))}else return null;case e.ParallelBrowsing:return a.jsx(Vt,{messages:s.messages},"parallel-"+((Ws=(Js=s.messages[0])==null?void 0:Js.id)!=null?Ws:i));case e.CodeInterpreter:return a.jsx(Jt,{messages:s.messages,isRequestActive:u,clientThreadId:n.id},"ada-"+((Ks=(Fs=s.messages[0])==null?void 0:Fs.id)!=null?Ks:i));case e.UserSettings:return null;case e.DILWidget:{const o=s.messages[0],c=(Hs=o==null?void 0:o.metadata)==null?void 0:Hs.chatgpt_sdk,x=c==null?void 0:c.dil,O=(Us=c==null?void 0:c.tool_response_metadata)==null?void 0:Us.kakao_widget;return O?a.jsx("div",{children:a.jsx(rt,{rootWidget:O,dil:x})},"dil-".concat((Xs=o==null?void 0:o.id)!=null?Xs:i)):null}case e.JITPlugin:return a.jsx(Qt,{messages:s.messages,nextMessage:(I==null?void 0:I.type)===e.JITPlugin?I.messages[0]:void 0,clientThreadId:n.id,isLastTurnInConversation:g,isLastMessageInTurn:r,onRequestCompletion:P},"jit-"+((Zs=(Ys=s.messages[0])==null?void 0:Ys.id)!=null?Zs:i));case e.Mercury:return null;case e.APIToolElicitation:return a.jsx($t,{messages:s.messages,nextMessage:(I==null?void 0:I.type)===e.APIToolElicitation?I.messages[0]:void 0,clientThreadId:n.id,isLastTurnInConversation:g,isLastMessageInTurn:r,onRequestCompletion:P},"api-tool-elicitation-"+((Gs=(qs=s.messages[0])==null?void 0:qs.id)!=null?Gs:i));case e.t2uay3k:return a.jsx(Bt,{messages:s.messages,clientThreadId:n.id,isParagen:Y,isLastTurnInConversation:g},"t2uay3k-"+((ee=(se=s.messages[0])==null?void 0:se.id)!=null?ee:i));case e.Dalle:return a.jsx(Rt,{messages:s.messages,clientThreadId:n.id,disableClickThru:Y},"dalle-"+((ae=(te=s.messages[0])==null?void 0:te.id)!=null?ae:i));case e.GizmoEditor:return a.jsx(Dt,{messages:s.messages},"gizmo-editor-"+((ne=(ie=s.messages[0])==null?void 0:ie.id)!=null?ne:i));case e.oiw209h:return a.jsx(vt,{messages:s.messages,clientThreadId:n.id},"oiw209h-"+((le=(oe=s.messages[0])==null?void 0:oe.id)!=null?le:i));case e.n7jupd_p:return a.jsx(lt,{});case e.Canmore:return a.jsx(ot,{messages:s.messages,allTurnMessages:l,isFinalTurn:g,isRequestActive:y,clientThreadId:n.id,isUserTurn:d},"canmore-"+((ce=(re=s.messages[0])==null?void 0:re.id)!=null?ce:i));case e.Container:case e.Oboe:return null;case e.Croquette:return null;case e.Debug:return G?a.jsx(Pt,{message:s.messages[0]},"debug-"+s.messages[0].id):null;case e.SearchResult:return a.jsx(Mt,{messages:s.messages},"search-result-"+((de=(me=s.messages[0])==null?void 0:me.id)!=null?de:i));case e.Mochi:return null;case e.CoTSearchTool:return null;case e.SuperWidget:return null;case e.n7jupd_image_gen:return null;case e.e1ld0dvz:return null;case e.Glaux:return a.jsx(Ot,{messages:s.messages,isLastMessage:r},"glaux-"+s.messages[0].id);case e.Strix:return null}}),Oe=wt(),{wordFadeType:R,animationDurationMs:os}=It(),N=L.useRef([]),ls=L.useRef(void 0),rs=L.useRef(null),z=!d&&g&&m,cs=(ms=l[0])==null?void 0:ms.id;return Xe(()=>{if(R!=="indexed"||!z)return;const s=rs.current;if(!s)return;ls.current!==cs&&(ls.current=cs,N.current=[]);const i=s.getAnimations({subtree:!0}).filter(y=>y.animationName===ye["fade-in"]);if(i.length!==0){const y=sa({now:performance.now(),previousStartTimes:N.current,groupCount:i.length});N.current=y;for(let r=0;r<i.length;r++)i[r].startTime=y[r]}else N.current=[]},[J,R,z]),a.jsx("div",{className:_e("flex max-w-full flex-col",{[ye.root]:R==="indexed"&&z,grow:B}),style:R==="indexed"?{"--duration":"".concat(os,"ms")}:void 0,ref:rs,children:a.jsx(Ye,{name:"GroupedMessages",fallback:qt,children:d?J:a.jsxs(jt,{isDisabled:!z||R!=="delay",defaultAnimationDurationPerSegmentMs:os,children:[bt(Q)&&g&&a.jsx(pt,{isStreaming:m,debug:Oe}),J]},(ds=l[0])==null?void 0:ds.id)})})}function qt({error:t}){return a.jsxs(Et,{type:"danger",children:[a.jsx(Ie,{id:"5eGo3w",defaultMessage:"Unable to display this message due to an error."}),!1]})}function Gt(t,l,h){if(t.length<2||l<=0)return 0;const n=l/Math.log(2);t=[...t].sort((_,g)=>_-g);let d=0,m=0;for(let _=t.length-1;_>0;--_){const g=Math.exp(-(h-t[_])/n);if(d>0&&g/d<.01)break;const j=t[_]-t[_-1];d+=g,m+=g*j}return d===0?0:d/m}function sa({now:t,previousStartTimes:l,groupCount:h,initialRate:n=50,halfLife:d=1}){var p;const m=l.slice(0,X(l,u=>u<=t)+1),_=m.length<2?n/1e3:Math.max(.01,Gt(m,d*1e3,t)),g=h-m.length;let j=(p=m[m.length-1])!=null?p:0,b=1;for(let u=0;u<g;u++){const P=_*1e3*b;g<P?b*=.8:g>P&&(b*=1.5);const w=1/(_*b),B=Math.max(t,j+w);m.push(B),j=B}return m}export{oa as C};
//# sourceMappingURL=b3zmi7k0e1dvao0m.js.map
