const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jxyz1kdkcze5jtww.js","assets/bubexfvksfr7893o.js","assets/kivvchsexr54fuso.js","assets/k1cl8bhg0vqi0zvs.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/dj6qu5k42mlv9oxh.js","assets/gj3272f6kxuxc3jv.js","assets/gfe80db92046bqvj.js","assets/lm3g1zm00rp6al39.js","assets/conversation-small-lq38g8zw.css","assets/kf7tqzde2yk57qjr.js","assets/h4jnqd77fz22arvf.js","assets/lv4xa94hrnn1trhl.js","assets/jt2omlt107se63w9.js","assets/ofy5guxwbhgr94pk.js"])))=>i.map(i=>d[i]);
var z=Object.defineProperty;var M=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var k=(s,t,o)=>t in s?z(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,R=(s,t)=>{for(var o in t||(t={}))L.call(t,o)&&k(s,o,t[o]);if(M)for(var o of M(t))V.call(t,o)&&k(s,o,t[o]);return s};import{h as B,e as A,j as e,M as F,_ as u,r as I}from"./bubexfvksfr7893o.js";import{p as D,u as O,cz as W,az as m,cr as H,aB as C,aA as E,aC as Q,fb as q,D as $,d$ as G}from"./ncw8zw682jinppua.js";import{u as b,r as J}from"./gfe80db92046bqvj.js";import{S as K}from"./gj3272f6kxuxc3jv.js";import{fV as U}from"./lm3g1zm00rp6al39.js";import{u as X}from"./oc4lr1ricjtltb4h.js";import{d as Y}from"./kl7c6054usfnqmd4.js";import{F as Z}from"./o31w8j5urfak3xuz.js";import"./kf7tqzde2yk57qjr.js";const ee=m(()=>u(()=>import("./jxyz1kdkcze5jtww.js"),__vite__mapDeps([0,1])),{loading:s=>E(s)}),se=m(()=>u(()=>import("./kivvchsexr54fuso.js"),__vite__mapDeps([2,1])),{loading:s=>E(s)}),te=m(()=>u(()=>import("./k1cl8bhg0vqi0zvs.js"),__vite__mapDeps([3,1])),{loading:s=>E(s)}),oe=m(()=>u(()=>import("./ncw8zw682jinppua.js").then(s=>s.yq),__vite__mapDeps([4,1,5])),{loading:s=>E(s)}),v=A({downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},title:{id:"walnut.title",defaultMessage:"Preview"},tooltip:{id:"walnut.tooltip",defaultMessage:"This is a web preview and may not reflect exact formatting. Download to open in your preferred software for best results."}}),ae=({onClose:s,onPlay:t,extension:o,contentType:a,clientThreadId:d,editHandlers:S})=>{var N;const n=B(),j=D(),y=a==="presentation",{formatMessage:f}=B(),r=f(v.title),x=f(v.tooltip);O();const{focusedWalnutId:l,presentationMap:p}=b(),i=l?p[l]:void 0,g=(N=i==null?void 0:i.fileName)!=null?N:a==="presentation"?"presentation.pptx":"spreadsheet.xlsx",h=!1,w=i==null?void 0:i.fileBlob,c=n.formatMessage(v.downloadFileError),T=X(!1,d,l!=null?l:"",()=>{},()=>{j.danger(c,{toastId:"post_sharing_modal_download_error",loggingTitle:c,loggingDescription:"Error message when a file download fails"})});return e.jsxs("div",{className:W("text-token-text-secondary border-token-border-light relative flex w-full items-center justify-between border-b px-3 py-2",h),children:[e.jsxs("div",{className:"z-10 flex flex-row gap-2",children:[e.jsx(U,{onClick:s,children:e.jsx(oe,{})}),!1]}),e.jsxs("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-1",children:[e.jsx(Z,{fileName:r!=null?r:null}),e.jsx("div",{className:"text-token-text-primary flex flex-row items-center truncate text-sm font-medium",children:e.jsx(H,{label:x,theme:"white",defaultOpen:!0,customBackgroundColorClassName:"bg-[#6B91F1]",labelClassName:"text-white font-light",side:"bottom",disabled:h,children:e.jsxs("div",{className:"flex flex-row items-center",children:[r,e.jsx(se,{className:"ms-1 size-4"})]})})}),o&&e.jsx("div",{className:"text-token-text-tertiary ms-2 text-sm",children:o})]}),e.jsxs("div",{className:"z-10 flex items-center gap-1",children:[!1,e.jsx(C,{color:"ghost",size:"small",onClick:async()=>{if(w)Y(w,g);else{const{data:_}=await T.refetch();if(_===void 0||(_==null?void 0:_.status)!=="success"){j.danger(c,{toastId:"post_sharing_modal_download_error",loggingTitle:c,loggingDescription:"Error message when a file download fails"});return}const P=document.createElement("a");P.href=_.download_url,P.click()}},children:e.jsx(te,{})}),y&&e.jsx(C,{color:"primary",onClick:t,size:"small",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{}),e.jsx("span",{className:"hidden sm:block",children:e.jsx(F,{id:"walnut.play",defaultMessage:"Play Slideshow"})})]})})]})]})},re=m(()=>u(()=>import("./dj6qu5k42mlv9oxh.js"),__vite__mapDeps([6,1,4,5,7,8,9,10,11,12,13,14])).then(s=>s.CanvasRenderer)),ne=m(()=>u(()=>import("./ofy5guxwbhgr94pk.js"),__vite__mapDeps([15,1,4,5,14,8,7,9,10,11])).then(s=>s.SpreadsheetRenderer));function le({isOpen:s,onClose:t,clientThreadId:o}){const[a,d]=I.useState(!1),{presentationMap:S,focusedWalnutId:n,setSelectedSlideIdx:j}=b(),[y,f]=I.useState(!1),r=n?S[n]:null,{presentation:x,fileName:l,workbook:p,document:i}=r!=null?r:{};if(!n||!r)return null;const g=x?"presentation":p?"spreadsheet":"none",h=g==="presentation"&&x&&!a,w=g==="spreadsheet"&&p&&!a;return e.jsx(Q,{testId:"modal-walnut-content",type:"success",size:"fullscreen",isOpen:s,onClose:t,visuallyHiddenHeader:!0,children:e.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[e.jsx(ae,{onClose:t,onPlay:()=>d(!a),title:l,contentType:g,clientThreadId:o,canEdit:!1}),h&&e.jsx(re,{presentation:x,selectedSlideIdx:r.selectedSlideIdx,setSelectedSlideIdx:c=>j(n,c),isEditing:y,setIsEditing:f}),w&&e.jsx(ne,{workbook:p,selectedSheetIdx:r.selectedSheetIdx,isEditing:y,setIsEditing:f}),!1,a&&e.jsx(K,{startIndex:0,onExit:t,walnutId:n}),!h&&!w&&!0&&!a&&e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(F,{id:"walnut.noFile",defaultMessage:"No file selected."})})]})})}const ie=({clientThreadId:s})=>{const{isOpen:t,close:o}=b(),a=t?e.jsx(le,{isOpen:t,onClose:o,clientThreadId:s}):null;return e.jsx(G,{children:a},s)},_e=s=>{const t=I.useRef(null);return e.jsx(q,{ref:t,onError:(o,a)=>{J(),setTimeout(()=>{var d;(d=t.current)==null||d.resetErrorBoundary()}),$.addError(o,{componentStack:a})},name:"walnut-focused-view",children:e.jsx(ie,R({},s))})};export{_e as WalnutFocusedViewManager};
//# sourceMappingURL=d2n4y4um0hv5m6l1.js.map
