const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ni9jvghgzlatitqd.js","assets/bubexfvksfr7893o.js","assets/lm3g1zm00rp6al39.js","assets/ncw8zw682jinppua.js","assets/root-ookb7xuw.css","assets/conversation-small-lq38g8zw.css"])))=>i.map(i=>d[i]);
var q=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var E=(e,r,t)=>r in e?q(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,v=(e,r)=>{for(var t in r||(r={}))Q.call(r,t)&&E(e,t,r[t]);if(M)for(var t of M(r))X.call(r,t)&&E(e,t,r[t]);return e},R=(e,r)=>H(e,J(r));import{_ as O,h as z,j as o,M as Y,d as Z,r as d,y as tt,a5 as et}from"./bubexfvksfr7893o.js";import{az as W,aB as rt,kP as F,cz as ot,aA as nt,r7 as st,u as k,J as at,ih as G,nF as it,br as ct,_ as mt,I as pt,nG as L,T as B,n as dt,e$ as lt}from"./ncw8zw682jinppua.js";import{m as P}from"./nc6572sivljsjb83.js";import{R as ut}from"./gggvcj5scm81g6wy.js";import{lC as ht,lD as gt,cw as ft,aV as C,aW as A}from"./lm3g1zm00rp6al39.js";import{C as K}from"./i2fnvzvjvu5c6tcn.js";import{b as xt}from"./dpidockywf8envd2.js";import{a as Pt}from"./dvti8r1ib1dywoqz.js";import{b as kt,g as Tt,T as yt,W as vt,c as Ct}from"./bezlbl32xw9oguw1.js";import{u as bt}from"./k3w19w5sa48fujqs.js";import{useSetupBaseWhamKeyboardActions as wt}from"./kry998ghqvvi5h0n.js";import{k as N,t as _t}from"./o0dw43fppqvaf7ws.js";import"./b3zmi7k0e1dvao0m.js";import"./ekj7v0hd90m9gfgd.js";import"./hzasobp3hhjtq47p.js";import"./egzpifha5criht1h.js";import"./bqnf7jbq8xd3572o.js";import"./fwn4bwvyx3h4ty5g.js";import"./l1teaxoievyk0rz1.js";import"./guejgwxn789esoyt.js";import"./m7ky6cnx5e7w4637.js";import"./j4cpzybta3my41wg.js";import"./matxjx64xjrpxbwa.js";import"./ip2dsbq9712r5wna.js";import"./o45zl9yl00508gad.js";import"./mxzk2kf77c8eueuw.js";import"./bc00p2ldn9cv9q32.js";import"./8ix1du5tuckfsvqq.js";import"./nbm98bu0q3774lnr.js";import"./i9ddjt6oaiw4vo4g.js";import"./jro698t78r3v26vt.js";import"./fum95d46v8d5jv8u.js";import"./n2u3q2i5341kdx8j.js";import"./j703u6xl4odnuo39.js";import"./me0ap2djy50z6upd.js";import"./mqabubffkpko61wr.js";import"./lxa5p4s1fgqvzcgw.js";import"./c929hhheh8pnurrs.js";import"./i0yczuhbjrdxz6ve.js";import"./cyrjh6r9wv2bzsqv.js";import"./fvq06q6sopd9r6rx.js";import"./fy4l2kpcbjlox0ps.js";import"./cxp76v1gv71u5chl.js";import"./ha3yj3u2f1w16goy.js";import"./fyy6o8kal64rtpos.js";import"./e5q3f3k67x71csb7.js";import"./lptwpbjabrvjmhsj.js";import"./nnaau44w7pxfjjn3.js";import"./lv98i5lrm8g24nlg.js";import"./ffjw65gjnc6j0nz8.js";import"./ffvjxtmoqooghm1t.js";import"./eqqsnl6kprwt6kvn.js";import"./iqtpdwh2n8o5iyd7.js";import"./ckeauhcg4pu33xfw.js";import"./n630qnacd2oui4py.js";import"./m214aojas5i8u5ss.js";import"./iv5xwnwraxd9v7zq.js";import"./nzkkesm2p4dklarf.js";import"./icif99f9c6x3iitu.js";import"./f1ucdf2dx4ztfnd4.js";import"./kou7k14ueo6peaoq.js";import"./gfhyoobo4q8q2pzd.js";import"./n8w61inav9kre7iu.js";import"./i8ns2k0nyu6k62qc.js";import"./owg1t5lbjzwpi0hd.js";import"./gc5zntv10x5pyl7r.js";import"./knfzy5vszhnec9ql.js";import"./n117ifjno76hbo3f.js";import"./gqlpgmzguho9n5oh.js";import"./h1em0bjkpkjv8ykw.js";import"./m609xwboj0zo059y.js";import"./eifqzljcxkeg8zns.js";import"./o6p9t02t81236kdb.js";import"./hu1bt0oauegdhua6.js";const jt=W(()=>O(()=>import("./ni9jvghgzlatitqd.js"),__vite__mapDeps([0,1])),{loading:e=>nt(e)}),St=({title:e})=>{const t=z().formatMessage({id:"5tCuOj",defaultMessage:"Try ChatGPT"});return o.jsxs("div",{className:"flex justify-between print:hidden",children:[o.jsxs("div",{className:"flex flex-col justify-start",children:[o.jsx("p",{className:"text-token-text-primary text-lg font-medium",children:e}),o.jsx("div",{className:"text-token-text-tertiary text-sm",children:o.jsx(Y,{id:"FqymvQ",defaultMessage:"Content may be unverified or unsafe. <reportLink>Report</reportLink>",values:{reportLink:s=>o.jsx("a",{href:"https://openai.com/form/report-content/",target:"_blank",rel:"noopener noreferrer",className:"underline",children:s})}})})]}),o.jsxs("div",{className:"flex cursor-pointer flex-row items-center gap-x-4 rounded-md p-2",children:[o.jsx(jt,{className:"icon text-token-text-secondary hover:bg-token-main-surface-secondary",onClick:()=>print()}),o.jsx(rt,{className:ot("btn btn-secondary bg-black text-white hover:opacity-70"),onClick:()=>{window.open(window.location.origin+"/?utm_src=deep-research-sharing","_blank")},icon:F,label:t,children:t})]})]})};function It({postWithProfile:e,title:r,children:t}){return o.jsx(ht.Provider,{value:{postId:e.post.id},children:o.jsx(st,{children:o.jsx("div",{className:"bg-token-main-surface-secondary min-h-screen w-full pb-8",children:o.jsxs("div",{className:"mx-auto max-w-3xl",children:[o.jsx("div",{className:"px-2 py-6",children:!!r&&o.jsx(St,{title:r})}),o.jsx("div",{className:"border-token-border-xlight bg-token-main-surface-primary flex flex-col rounded-xl border-b pt-4 shadow-md print:border-none print:pt-2 print:shadow-none",children:o.jsxs("div",{className:"p-14 pt-8",children:[o.jsx("a",{href:window.location.origin+"/?utm_src=deep-research-sharing",target:"_blank",rel:"noopener noreferrer",children:o.jsxs("div",{className:"flex items-center gap-3 pb-4",children:[o.jsx(F,{className:"text-token-text-primary h-8 w-8"}),o.jsx(gt,{})]})}),t]})})]})})})})}function Mt(e){if(e.post.attachments[0].kind!=="codex")throw new Error("Post attachment is not a codex");const r=e.post.attachments[0];return{task:r.task,fetchedTurns:r.turns,current_user_turn:r.current_user_turn,current_assistant_turn:r.current_assistant_turn,current_diff_task_turn:r.current_diff_task_turn,exampleTaskInfo:r.example_task_info}}function Et({postWithProfile:e}){var S;wt();const r=N(h=>h.addTurnToTaskMap),{task:t,fetchedTurns:s,current_user_turn:n,current_assistant_turn:a,current_diff_task_turn:c,exampleTaskInfo:p}=Mt(e),l=k(),i=z(),m=Z(),u=ft.useCurrentImage()!=null,T=at(l,"2818336692"),[x,y]=d.useState([]),b=d.useCallback(()=>{y([])},[]),{focusedAssistantTurn:g,setFocusedAssistantTurnId:w}=kt({taskId:t.id,task:t,currentUserTurn:n!=null?n:null,currentAssistantTurn:a!=null?a:null}),_=d.useMemo(()=>_t(g),[g]),$=d.useMemo(()=>({comments:x,setComments:y,clearComments:b,readonlyComments:_}),[x,y,b,_]),f=N(({getTurnsForTask:h})=>t?h(t.id):[]),j=d.useMemo(()=>{var h;return Tt({focusedAssistantTurn:g,pastTurns:f,currentDiffTaskTurnId:(h=c==null?void 0:c.id)!=null?h:null})},[g,c==null?void 0:c.id,f]),D=d.useMemo(()=>({setFocusedAssistantTurnId:w,focusedAssistantTurn:g,currentDiffTaskTurn:j,taskId:t==null?void 0:t.id,task:t,pastTurns:f,canFollowUp:!1}),[g,j,t,f,w]);return d.useEffect(()=>{var h;Object.values((h=s==null?void 0:s.turn_mapping)!=null?h:{}).forEach(U=>{var I;r((I=t==null?void 0:t.id)!=null?I:"",U.turn)})},[s,r,t]),bt([{key:"newTask",action:()=>{m("/codex",{state:{focusComposer:!0}})},actionMessageDescriptor:i.formatMessage({id:"wham.keyboardActions.newTask",defaultMessage:"New task"}),group:A.Chat,keyboardBinding:[C.Mod,C.Shift,"o"]},{key:"closeTask",action:()=>{m("/codex")},actionMessageDescriptor:i.formatMessage({id:"wham.keyboardActions.closeTask",defaultMessage:"Close task"}),group:A.Chat,keyboardBinding:[C.Escape],enabled:!u}]),!t||!f?null:o.jsx(G.Provider,{value:{postWithProfile:e,setIsReportModalOpen:()=>{}},children:o.jsx(it,{children:o.jsx(yt,{value:$,children:o.jsx(vt,{value:D,children:o.jsx(Ct,{permissions:"read",turnId:(S=a==null?void 0:a.id)!=null?S:"",showForkButton:T,loadingTurnMapping:!1,isSharedExampleTask:!!p})})})})})}const Rt=W(()=>O(()=>import("./lm3g1zm00rp6al39.js").then(e=>e.zB),__vite__mapDeps([2,1,3,4,5])).then(e=>e.PostSharingErrorModal)),sr=tt(function(){const r=et();return r.kind==="forbidden"?o.jsx(zt,{chatPageProps:r.chatPageProps,reason:"workspace"}):o.jsx(At,{loaderData:r})});function At({loaderData:e}){var a,c,p,l;const r=k();d.useEffect(()=>{var i,m;mt.logEventWithStatsig("Share Post: Shared Post Page Viewed","chatgpt_share_post_page_viewed",{post_id:e.postWithProfile.post.id,primary_attachment_type:(m=(i=e.postWithProfile.post.attachments)==null?void 0:i[0])==null?void 0:m.kind,referrer:e.referrer})},[e]);const{session:t}=pt(r),s=d.useMemo(()=>{var m,u;const i=L(r);return B.initThread({clientThreadId:i.id,conversationMode:{kind:dt.PrimaryAssistant},userId:(m=t==null?void 0:t.user)==null?void 0:m.id,accountId:(u=t==null?void 0:t.account)==null?void 0:u.id}),i},[r,(a=t==null?void 0:t.account)==null?void 0:a.id,(c=t==null?void 0:t.user)==null?void 0:c.id]),n=(p=e.postWithProfile.post.attachments)==null?void 0:p[0];if(n.kind==="deep_research"){const i=n.messages,m=lt(i),u=(l=m==null?void 0:m.metadata)==null?void 0:l.async_task_title;return m?o.jsx(It,{postWithProfile:e.postWithProfile,title:u,children:o.jsx(ut,{messages:i,conversation:s})}):null}return n.kind==="codex"?o.jsx(Et,{postWithProfile:e.postWithProfile}):o.jsx(Wt,{postWithProfile:e.postWithProfile,chatPageProps:e.chatPageProps})}function V(e){return{url:"https://ogimg.chatgpt.com/?postId=".concat(e),size:[1200,630]}}function Nt(e,r){var s,n,a,c,p,l,i;if(!e.attachments||e.attachments.length===0)return{url:P.src};const t=e.attachments[0];switch(t.kind){case"media_generation":{const m=(n=(s=t.encodings)==null?void 0:s.md)!=null&&n.path?{url:t.encodings.md.path,size:[t.width,t.height]}:void 0,u=(c=(a=t.encodings)==null?void 0:a.unfurl)!=null&&c.path?{url:t.encodings.unfurl.path,size:[1200,630]}:void 0,T=(l=(p=t.encodings)==null?void 0:p.thumbnail)!=null&&l.path?{url:t.encodings.thumbnail.path}:void 0,x={url:t.url,size:[t.width,t.height]};return r&&m!=null?m:(i=u!=null?u:T)!=null?i:x}case"message_slice":return V(e.id);default:return{url:P.src}}}function Ot(e){var s,n,a;const r=(s=e.text)==null?void 0:s.trim();if(r)return r;const t=(n=e.attachments)==null?void 0:n[0];return(t==null?void 0:t.kind)==="media_generation"&&((a=t.title)!=null&&a.trim())?t.title.trim():"Shared Content"}const ar=({data:e})=>{const r=e,t={name:"robots",content:"noindex,nofollow"};if(!r||r.kind==="forbidden"){const i="Privately Shared Content";return[{title:"ChatGPT - ".concat(i)},t,{property:"og:site_name",content:"ChatGPT"},{property:"og:title",content:i},{property:"og:type",content:"website"},{property:"og:image",content:P.src},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:image",content:P.src},{name:"twitter:site",content:"@ChatGPTapp"},{name:"twitter:title",content:i}]}const{post:s}=r.postWithProfile,n=r.enforceRenderedOgImg?V(s.id):Nt(s,r.preferIntrinsicAspectRatioForOgImage),a=Ot(s),c=s.permalink,p=new Date(s.posted_at*1e3).toISOString();return[{title:"ChatGPT - ".concat(a)},t,{property:"og:site_name",content:"ChatGPT"},{property:"og:type",content:"article"},{property:"og:url",content:c},{property:"og:title",content:a},{property:"og:locale",content:"en_US"},{property:"og:image",content:n.url},{property:"og:image:secure_url",content:n.url},...n.size?[{property:"og:image:width",content:n.size[0]},{property:"og:image:height",content:n.size[1]}]:[],{property:"og:image:alt",content:"Preview of shared ChatGPT content"},{property:"article:published_time",content:p},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:site",content:"@ChatGPTapp"},{name:"twitter:title",content:a},{name:"twitter:image",content:n.url},{name:"twitter:image:alt",content:"Preview of shared ChatGPT content"}]};function zt({chatPageProps:e,reason:r}){const t=k();return d.useEffect(()=>{ct(t,Rt,{reason:r})},[]),o.jsx(K,v({},e))}function Wt({postWithProfile:e,chatPageProps:r}){const t=k(),[s,n]=d.useState(!1),[a]=d.useState(()=>L(t)),c=a.id,p=Pt(e.post.attachments);if(p){const{threadResponse:l}=p;B.updateThreadFromServer(c,l,{skipIfExisting:!0,continuingFromSharedPostId:e.post.id,forkFromSharedPost:!0})}return o.jsxs(G.Provider,{value:{postWithProfile:e,setIsReportModalOpen:n},children:[s&&o.jsx(xt,{post:e.post,onClose:()=>n(!1)}),o.jsx(K,R(v({},r),{clientThreadId:c}))]})}export{sr as default,ar as meta};
//# sourceMappingURL=n5aib9tts5l2e1wp.js.map
