const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/d0fvtivu8wtjjx2a.js","assets/bubexfvksfr7893o.js"])))=>i.map(i=>d[i]);
var K=Object.defineProperty,Q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var P=(e,s,t)=>s in e?K(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,A=(e,s)=>{for(var t in s||(s={}))G.call(s,t)&&P(e,t,s[t]);if(z)for(var t of z(s))J.call(s,t)&&P(e,t,s[t]);return e},B=(e,s)=>Q(e,Y(s));import{c as V,h as X,r as D,e as Z,j as o,M as L,_ as ee}from"./bubexfvksfr7893o.js";import{p0 as te,dU as se,u as oe,oz as ae,d as ne,p1 as E,p2 as ce,D as ie,aS as re,dc as F,aC as le,az as ue,db as de,_ as he,dd as me,de as Se,aA as fe}from"./ncw8zw682jinppua.js";import{d as pe}from"./fwn4bwvyx3h4ty5g.js";import"./lm3g1zm00rp6al39.js";import"./l1teaxoievyk0rz1.js";const ge=ue(()=>ee(()=>import("./d0fvtivu8wtjjx2a.js"),__vite__mapDeps([0,1])),{loading:e=>fe(e)});function Oe(e){switch(e){case E.SSOMismatch:return{title:n.cannotAccessWorkspace,description:n.ssoMismatchDescription};case E.RequireSSOLogin:return{title:n.cannotAccessWorkspace,description:n.requireSSODescription};case E.UnexpectedSSOLogin:return{title:n.cannotAccessWorkspace,description:n.unexpectedSSODescription}}}const xe=2e3;function Ne(){"use forget";var I,b;const e=V.c(33),s=te(),t=se(),N=X(),i=oe(),R=ae();let S;e[0]!==i?(S=()=>ce(i).isFetched,e[0]=i,e[1]=S):S=e[1];const q=ne(S),c=s==null?void 0:s.errorCode,h=s!=null&&q&&R==null&&!!t,[H,W]=D.useState(!1);let f,p;e[2]!==h?(f=()=>{h&&setTimeout(()=>{W(!0)},xe)},p=[h],e[2]=h,e[3]=f,e[4]=p):(f=e[3],p=e[4]),D.useEffect(f,p);const $=c===E.UnexpectedSSOLogin,m=h&&($?H:!0),a=pe();let g,O;if(e[5]!==a||e[6]!==c||e[7]!==m?(g=()=>{var U;if(!c||!m)return;const w=(U=a==null?void 0:a.split("@"))==null?void 0:U[1];ie.addError("SSO Catch All Modal: ".concat(c," for ").concat(a!=null?a:"unknown user"),{sso_error:c,email:a,email_hostname:w})},O=[c,m,a],e[5]=a,e[6]=c,e[7]=m,e[8]=g,e[9]=O):(g=e[8],O=e[9]),D.useEffect(g,O),!m)return null;let x;e[10]!==N||e[11]!==s.accountName||e[12]!==(t==null?void 0:t.name)?(x=(b=(I=s==null?void 0:s.accountName)!=null?I:t==null?void 0:t.name)!=null?b:N.formatMessage(n.workspacePlaceholder),e[10]=N,e[11]=s.accountName,e[12]=t==null?void 0:t.name,e[13]=x):x=e[13];const T=x;let M;e[14]!==i||e[15]!==t?(M=()=>{const w=t!=null&&t.ssoConnectionName?{connection:t.ssoConnectionName}:void 0;re(i,{fallbackScreenHint:"login",additionalAuthParams:w})},e[14]=i,e[15]=t,e[16]=M):M=e[16];const k=M;let _;e[17]!==s.errorCode?(_=Oe(s.errorCode),e[17]=s.errorCode,e[18]=_):_=e[18];const{title:j,description:v}=_;let r;e[19]!==j?(r=o.jsx("div",{className:"flex flex-col",children:o.jsx("div",{className:"text-lg",children:o.jsx(L,A({},j))})}),e[19]=j,e[20]=r):r=e[20];let l;e[21]!==T?(l=o.jsx(L,B(A({},n.authenticateNotice),{values:{workspaceName:T}})),e[21]=T,e[22]=l):l=e[22];let u;e[23]!==k||e[24]!==l?(u=o.jsx(F.Button,{onClick:k,color:"primary",children:l}),e[23]=k,e[24]=l,e[25]=u):u=e[25];let C;e[26]===Symbol.for("react.memo_cache_sentinel")?(C=o.jsx(F.Button,{onClick:Me,children:o.jsx(L,{id:"KlMYRb",defaultMessage:"Log out"})}),e[26]=C):C=e[26];let d;e[27]!==v?(d=o.jsx("div",{className:"flex flex-col space-y-4",children:o.jsx("div",{children:o.jsx(L,A({},v))})}),e[27]=v,e[28]=d):d=e[28];let y;return e[29]!==u||e[30]!==d||e[31]!==r?(y=o.jsx(le,{testId:"modal-sso-catch-all",isOpen:!0,onClose:de,type:"warning",size:"custom",className:"max-w-3xl",title:r,icon:ge,primaryButton:u,secondaryButton:C,children:d}),e[29]=u,e[30]=d,e[31]=r,e[32]=y):y=e[32],y}function Me(){he.logLogOutButtonClicked({location:"sso_catch_all_modal"},me.ACCESS_LOGOUT_ACTION_LOCATION_SSO_CATCH_ALL_MODAL),Se()}const n=Z({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{Ne as default};
//# sourceMappingURL=ggfmmtzciqzl0yrm.js.map
