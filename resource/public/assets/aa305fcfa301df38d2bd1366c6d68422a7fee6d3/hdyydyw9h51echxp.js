import{b as p,r as c,j as n}from"./bubexfvksfr7893o.js";import{ht as f,aC as w,e7 as m,R as h,eZ as x,hp as y,hq as L}from"./ncw8zw682jinppua.js";function F({gizmoId:a,fileId:t,fileName:o,onClose:r}){const{data:e,isLoading:l}=p({queryKey:["file-info",t],queryFn:async()=>await h.safeGet("/files/{file_id}/simple",{parameters:{path:{file_id:t},query:{gizmo_id:a}}})}),i=!!(e&&(e.mime_type==="application/pdf"||f(o)==="pdf")),{data:s,isLoading:u}=p({queryKey:["file-preview",t,a,i],queryFn:async()=>{const d=await y(t,a,!1,void 0,i);if(d.status===L.Success)return d.download_url;throw new Error("Failed to download file inline preview")},staleTime:x,enabled:!!e});return c.useEffect(()=>{l||u||e&&!i&&s&&(window.open(s,"_blank"),r())},[e,s,i,r,l,u]),n.jsx(w,{testId:"modal-file-preview",className:"min-h-[90vh] max-w-[75vw] max-w-[1000px]",isOpen:!0,onClose:r,type:"success",title:o,showCloseButton:!0,size:"custom",children:l||u||!i||!s?n.jsx("div",{className:"flex h-full w-full items-center justify-center",children:n.jsx(m,{})}):n.jsx("iframe",{src:s,title:o,height:"100%",width:"100%"})})}export{F as FilePreviewModal};
//# sourceMappingURL=hdyydyw9h51echxp.js.map
