const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/btrwhqtnzjbkk202.js","assets/bubexfvksfr7893o.js"])))=>i.map(i=>d[i]);
var vs=Object.freeze,Ds=Object.defineProperty,Pn=Object.defineProperties;var bn=Object.getOwnPropertyDescriptors;var kt=Object.getOwnPropertySymbols;var ws=Object.prototype.hasOwnProperty,js=Object.prototype.propertyIsEnumerable;var Es=(s,e,a)=>e in s?Ds(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,S=(s,e)=>{for(var a in e||(e={}))ws.call(e,a)&&Es(s,a,e[a]);if(kt)for(var a of kt(e))js.call(e,a)&&Es(s,a,e[a]);return s},z=(s,e)=>Pn(s,bn(e));var dt=(s,e)=>{var a={};for(var n in s)ws.call(s,n)&&e.indexOf(n)<0&&(a[n]=s[n]);if(s!=null&&kt)for(var n of kt(s))e.indexOf(n)<0&&js.call(s,n)&&(a[n]=s[n]);return a};var It=(s,e)=>vs(Ds(s,"raw",{value:vs(e||s.slice())}));import{c as pe,h as ye,j as t,M as g,e as $e,L as Oe,r as ce,l as Sn,u as Cn,_ as Mn,b as cs,a as vn,d as En}from"./bubexfvksfr7893o.js";import{v1 as Ke,v2 as Qe,kx as Ze,v3 as Ve,v4 as We,v5 as Je,v6 as Xe,v7 as et,v8 as tt,v9 as st,D as Gt,am as v,lV as he,ek as Dn,u as ct,ak as je,cz as Se,gH as us,cw as ds,_ as re,dh as Ge,aB as ht,fI as wn,ph as pt,kq as gt,r8 as jn,r9 as Tn,e as Fn,p as qs,dU as Nn,a4 as zs,aC as Vt,a7 as Ts,kf as Rn,aP as Fs,au as Ns,e7 as Ks,ex as it,az as kn,dc as Rs,aA as In,aT as Lt,cr as Ot,R as An,ej as Qs,N as Un,al as Ln,ca as On}from"./ncw8zw682jinppua.js";import{b as Bn,a as Yn,d as Gn}from"./nbm98bu0q3774lnr.js";import{u6 as M,aK as _,u7 as P,u8 as Vn,aJ as Te,u9 as Wn,ua as Hn,aE as Wt,ub as mt,aM as lt,aL as ss,uc as ns,ud as ks,ue as $n,eC as Zs,tH as Js,bd as ms,dF as qn,lE as zn,dP as Kn,dI as Xs,tD as Is,tE as rt,bY as Qn,qs as Zn,qN as Jn,lp as en,uf as Xn,ug as ea,dR as Jt,uh as ta,tF as sa,tG as na,ui as aa,lv as oa,uj as ra,tQ as ia,uk as la,ul as ca}from"./lm3g1zm00rp6al39.js";import{p as Xt,q as As,r as ua,o as as}from"./i9ddjt6oaiw4vo4g.js";import{u as Yt}from"./dlyg1wsrxb1bdujw.js";import{E as tn}from"./hih7y3lf19ezkzqs.js";import{i as da,C as ma}from"./m53r6qicunpm4sky.js";import{a as fa,b as Bt,t as at,i as os,c as He,d as pa,u as ga,e as ha}from"./c9xt9bv12kye5x44.js";import{P as ya}from"./mlriv1uls655wdrc.js";const Me="free",ve="go",Ee="plus",De="pro",ae="team";M(Me,Ke,_.Month,"0.00",P.Inclusive),M(ve,Ke,_.Month,"4.00",P.Inclusive),M(Ee,Ke,_.Month,"23.00",P.Inclusive),M(De,Ke,_.Month,"229.00",P.Inclusive),M(ae,Ke,_.Month,"34.00",P.Inclusive),M(ae,Ke,_.Year,"29.00",P.Inclusive),M(Me,Qe,_.Month,"0.00",P.Inclusive),M(ve,Qe,_.Month,"3.50",P.Inclusive),M(Ee,Qe,_.Month,"20.00",P.Inclusive),M(De,Qe,_.Month,"200.00",P.Inclusive),M(ae,Qe,_.Month,"30.00",P.Inclusive),M(ae,Qe,_.Year,"25.00",P.Inclusive),M(Me,Ze,_.Month,"0.00",P.Exclusive),M(ve,Ze,_.Month,"4.00",P.Exclusive),M(Ee,Ze,_.Month,"20.00",P.Exclusive),M(De,Ze,_.Month,"200.00",P.Exclusive),M(ae,Ze,_.Month,"30.00",P.Exclusive),M(ae,Ze,_.Year,"25.00",P.Exclusive),M(Me,Ve,_.Month,"0.00",P.Inclusive),M(ve,Ve,_.Month,"399.00",P.Inclusive),M(Ee,Ve,_.Month,"1999.00",P.Inclusive),M(De,Ve,_.Month,"19900.00",P.Inclusive),M(ae,Ve,_.Month,"2599.00",P.Exclusive),M(ae,Ve,_.Year,"2099.00",P.Exclusive),M(Me,We,_.Month,"0.00",P.Inclusive),M(ve,We,_.Month,"75000.00",P.Inclusive),M(Ee,We,_.Month,"349000.00",P.Inclusive),M(De,We,_.Month,"3499000.00",P.Inclusive),M(ae,We,_.Month,"469000.00",P.Exclusive),M(ae,We,_.Year,"389000.00",P.Exclusive),M(Me,Je,_.Month,"0.00",P.Inclusive),M(ve,Je,_.Month,"1400.00",P.Inclusive),M(Ee,Je,_.Month,"5700.00",P.Inclusive),M(De,Je,_.Month,"49900.00",P.Inclusive),M(ae,Je,_.Month,"8499.00",P.Exclusive),M(ae,Je,_.Year,"6999.00",P.Exclusive),M(Me,Xe,_.Month,"0.00",P.Inclusive),M(ve,Xe,_.Month,"259.00",P.Inclusive),M(Ee,Xe,_.Month,"699.00",P.Inclusive),M(De,Xe,_.Month,"6999.00",P.Inclusive),M(ae,Xe,_.Month,"999.00",P.Exclusive),M(ae,Xe,_.Year,"799.00",P.Exclusive),M(Me,et,_.Month,"0.00",P.Inclusive),M(ve,et,_.Month,"38.99",P.Inclusive),M(Ee,et,_.Month,"99.90",P.Inclusive),M(De,et,_.Month,"999.90",P.Inclusive),M(ae,et,_.Month,"129.00",P.Exclusive),M(ae,et,_.Year,"105.00",P.Exclusive),M(Me,tt,_.Month,"0.00",P.Inclusive),M(ve,tt,_.Month,"132000.00",P.Inclusive),M(Ee,tt,_.Month,"522500.00",P.Inclusive),M(De,tt,_.Month,"5225000.00",P.Inclusive),M(ae,tt,_.Month,"799000.00",P.Exclusive),M(ae,tt,_.Year,"649000.00",P.Exclusive),M(Me,st,_.Month,"0.00",P.Inclusive),M(ve,st,_.Month,"300.00",P.Inclusive),M(Ee,st,_.Month,"1100.00",P.Inclusive),M(De,st,_.Month,"9990.00",P.Inclusive),M(ae,st,_.Month,"1699.00",P.Exclusive),M(ae,st,_.Year,"1399.00",P.Exclusive);function xa(s,e,a){const n=Wn(s,a);if(!n)return null;const o=s,r=e.currency,{taxName:i,reverseChargeEligible:l,taxRatePercent:p}=n;return p==null?{taxAmount:null,taxCurrency:r,taxCountry:o,taxName:i,reverseChargeEligible:l}:{taxAmount:Hn({amount:e.amount,taxPercent:p,inclusive:e.amountTaxBehavior===P.Inclusive}),taxCurrency:r,taxCountry:o,taxName:i,reverseChargeEligible:l}}function _a(s,e,a){const n=Te(s,e,a);if(n.amount==null||n.taxBehavior==null){const o=new Error("Incomplete pricing details");throw Gt.addError(o,{planType:e,interval:a,countryCode:s.countryCode,currency:s.currencyConfig.symbol_code}),o}return{product:e,currency:s.currencyConfig.symbol_code,recurringInterval:a,amount:n.amount,amountTaxBehavior:n.taxBehavior==="inclusive"?P.Inclusive:P.Exclusive}}function Pa(s,e,a){const n=Vn(e);if(!n){const l=new Error("Unsupported plan type for pricing config");throw Gt.addError(l,{planType:e}),l}const o=n==="business"?_.Year:_.Month,r=_a(s,n,o),i=a.country?xa(a.country,r,s):null;return{priceDetails:r,taxDetails:i}}function es(s){switch(s){case v.GO:return he.GO;case v.PLUS:return he.PLUS;case v.PRO:return he.PRO;case v.SELF_SERVE_BUSINESS:return he.SELF_SERVE_BUSINESS;case v.ENTERPRISE_CBP:return he.ENTERPRISE_CBP_FLAT;case v.EDUCATION_CBP:return he.EDUCATION_CBP_FLAT;case v.K12:return he.K12;case v.QUORUM:return he.QUORUM;case v.FREE:return he.FREE;case v.DEPRECATED_ENTERPRISE:return he.DEPRECATED_ENTERPRISE;case v.DEPRECATED_EDU:return he.DEPRECATED_EDU}}function Be(s){switch(s){case v.FREE:return 0;case v.GO:return 1;case v.PLUS:return 2;case v.PRO:return 3;case v.SELF_SERVE_BUSINESS:return 4;case v.ENTERPRISE_CBP:return 5;default:return Gt.addError(new Error("Unsupported plan type",{cause:s})),-1}}var rs=(s=>(s.standard="standard",s.promo="promo",s.highlight="highlight",s))(rs||{});function ba(s){return"percentage"in s}function we(s){"use forget";const e=pe.c(2),{children:a}=s;let n;return e[0]!==a?(n=t.jsx("span",{className:"ms-1 rounded-4xl border border-none bg-[#DCDBFF] px-2 pt-1.5 pb-1.25 text-[11px] font-semibold text-[#615EEB] dark:bg-[#444378] dark:text-[#B9B7FF]",children:a}),e[0]=a,e[1]=n):n=e[1],n}function Sa(s){"use forget";const e=pe.c(26),{useRecommendedBadge:a,activeDiscountMetadata:n,promoMetadata:o,type:r,planType:i,welcomeOfferLabel:l,currencySymbol:p,isScheduledPromo:c}=s,f=ye(),d=r===rs.highlight&&i===v.GO,j=r===rs.highlight,u=n&&"percentage"in n.discount&&n.discount.percentage===100,D=n&&!u;if(l){let m;return e[0]!==l?(m=t.jsx(we,{children:t.jsx(g,S({},l))}),e[0]=l,e[1]=m):m=e[1],m}if(!c&&(o!=null&&o.promotion_type_label)){let m;return e[2]!==o.promotion_type_label?(m=t.jsx(we,{children:o.promotion_type_label}),e[2]=o.promotion_type_label,e[3]=m):m=e[3],m}if(!c&&(o!=null&&o.duration)){if(ba(o.discount)){let h;e[4]!==o.discount.percentage?(h=Math.round(o.discount.percentage),e[4]=o.discount.percentage,e[5]=h):h=e[5];let x;return e[6]!==h?(x=t.jsx(we,{children:t.jsx(g,z(S({},Le.percentageDiscount),{values:{discount_percentage:h}}))}),e[6]=h,e[7]=x):x=e[7],x}let m;e[8]!==f||e[9]!==o.discount.currency_code||e[10]!==o.discount.value?(m=f.formatNumber(o.discount.value,{style:"currency",currency:o.discount.currency_code,minimumFractionDigits:0,maximumFractionDigits:2}),e[8]=f,e[9]=o.discount.currency_code,e[10]=o.discount.value,e[11]=m):m=e[11];let y;return e[12]!==m?(y=t.jsx(we,{children:t.jsx(g,z(S({},Le.flatDiscount),{values:{discounted_cost:m}}))}),e[12]=m,e[13]=y):y=e[13],y}if(!c&&o){let m;return e[14]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(we,{children:t.jsx(g,S({},Le.promo))}),e[14]=m):m=e[14],m}if(D&&n){if("percentage"in n.discount){const m=n==null?void 0:n.discount.percentage;let y;return e[15]!==m?(y=t.jsx(we,{children:t.jsx(g,z(S({},Le.percentageDiscount),{values:{discount_percentage:m}}))}),e[15]=m,e[16]=y):y=e[16],y}else if("value"in n.discount){let m;e[17]!==n.discount.value||e[18]!==p.code||e[19]!==f?(m=f.formatNumber(n.discount.value,{style:"currency",currency:f.formatMessage(p.code),minimumFractionDigits:0,maximumFractionDigits:2}),e[17]=n.discount.value,e[18]=p.code,e[19]=f,e[20]=m):m=e[20];let y;return e[21]!==m?(y=t.jsx(we,{children:t.jsx(g,z(S({},Le.flatDiscount),{values:{discounted_cost:m}}))}),e[21]=m,e[22]=y):y=e[22],y}}if(d){let m;return e[23]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(we,{children:t.jsx(g,S({},Le.new))}),e[23]=m):m=e[23],m}if(a){let m;return e[24]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(we,{children:t.jsx(g,S({},Le.recommended))}),e[24]=m):m=e[24],m}if(j){let m;return e[25]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(we,{children:t.jsx(g,S({},Le.popular))}),e[25]=m):m=e[25],m}return null}const Le=$e({percentageDiscount:{id:"percentageDiscount",defaultMessage:"{discount_percentage}% OFF"},flatDiscount:{id:"flatDiscount",defaultMessage:"{discounted_cost} OFF"},promo:{id:"promo",defaultMessage:"PROMO"},popular:{id:"popular",defaultMessage:"POPULAR"},recommended:{id:"recommended",defaultMessage:"RECOMMENDED"},new:{id:"new",defaultMessage:"NEW"}}),Ca={standard:"border-s border-e border-t border-b border-token-border-default md:min-h-[30rem] md:max-w-96 md:rounded-none md:border-e-0 md:pb-6 md:first:rounded-ss-xl md:first:rounded-es-xl md:last:rounded-se-xl md:last:rounded-ee-xl md:last:border-e",promo:"shadow-lg md:min-h-[30rem] md:max-w-96 md:pb-6",highlight:"border-s border-e border-t border-b md:-mt-4 md:-mb-4 md:min-h-[20rem] md:max-w-96 md:pb-6 md:first:rounded-ss-xl md:first:rounded-es-xl md:last:rounded-se-xl md:last:rounded-ee-xl"};function Ma(s){"use forget";var c;const e=pe.c(14);let a,n,o,r;e[0]!==s?(c=s,{children:a,className:n,type:r}=c,o=dt(c,["children","className","type"]),e[0]=s,e[1]=a,e[2]=n,e[3]=o,e[4]=r):(a=e[1],n=e[2],o=e[3],r=e[4]);let i,l;if(e[5]!==n||e[6]!==o||e[7]!==r){const f=Se("border-[#CFCEFC] bg-[#F5F5FF] dark:bg-[#282841] dark:border-[#484777] md:mt-0 md:mb-0",r==="promo"&&"border-token-border-light");i=o,l=Se(Ca[r],["highlight","promo"].includes(r)&&f,"relative flex flex-1 flex-col justify-center gap-4 rounded-xl px-6 py-6.5 text-sm md:rounded-2xl! md:border-e-1 md:border-b-1 md:border-t-1 md:border-s-1",n),e[5]=n,e[6]=o,e[7]=r,e[8]=i,e[9]=l}else i=e[8],l=e[9];let p;return e[10]!==a||e[11]!==i||e[12]!==l?(p=t.jsx("div",z(S({},i),{className:l,children:a})),e[10]=a,e[11]=i,e[12]=l,e[13]=p):p=e[13],p}var Ws;const Us=ds.div(Ws||(Ws=It(["\n  relative flex flex-col ","\n"])),s=>["highlight","promo"].includes(s.type)?"mt-4":"bg-token-main-surface-primary");var Hs;const va=ds.div(Hs||(Hs=It(["flex flex-col grow gap-2"])));var $s;const Ls=ds.div($s||($s=It(["\n  relative flex flex-col text-xs text-token-text-secondary ","\n"])),s=>["highlight","promo"].includes(s.type)?"":"bg-token-main-surface-primary");function Ea(s){return"referrer_name"in s}var ft=(s=>(s.standard="standard",s.promo="promo",s.highlight="highlight",s))(ft||{});const fs=s=>{"use forget";var xs,_s,Ps,bs,Ss,Cs,Ms;const e=pe.c(72),{planType:a,pricingPlan:n,callToActionButton:o,secondaryCallToActionButton:r,className:i,elementId:l,additionalLinks:p,promoMetadata:c,activeDiscountMetadata:f,billingDetails:d,promoData:j,type:u,isBusinessUpgradeV2CopyEnabled:D,useRecommendedBadge:m,shouldUseComparisonSpacing:y,paymentsOverrideString:h,isCheckoutPricingConfigLoading:x,checkoutPricingConfigError:A,hasEnabledTeam1DollarCoupon:b,hasEnabledTeamFreeTrialCoupon:O}=s,w=r===void 0?null:r;let T;e[0]!==p?(T=p===void 0?[]:p,e[0]=p,e[1]=T):T=e[1];const I=T,E=c===void 0?null:c,N=f===void 0?null:f,R=j===void 0?null:j,k=u===void 0?"standard":u,Z=D===void 0?!1:D,H=m===void 0?!1:m,V=y===void 0?!1:y,$=b===void 0?!1:b,B=O===void 0?!1:O,F=Dn(),{costTitle:L,costSubtitle:X,currencySymbol:Y}=sn(n,d.currency),C=ye(),q=ct(),J=je(q,"3768341700").get("is_sku_info_code_enabled",!1),se=Ra,ne=!h&&J&&R==null&&E==null&&((xs=n.cost)==null?void 0:xs.costDuration)==null&&N==null;let xe;e[2]!==d.country||e[3]!==d.currency||e[4]!==q?(xe={countryCode:d.country,currency:d.currency,ctx:q},e[2]=d.country,e[3]=d.currency,e[4]=q,e[5]=xe):xe=e[5];const{data:W,error:Fe,isLoading:Pe}=Wt(xe);let de;e[6]!==d.country||e[7]!==W?(de=ja(W,d.country),e[6]=d.country,e[7]=W,e[8]=de):de=e[8];let me;e[9]!==d.currency||e[10]!==q?(me=Ta(q,d.currency),e[9]=d.currency,e[10]=q,e[11]=me):me=e[11];let ie;e[12]!==de||e[13]!==me?(ie=S(S({},de),me),e[12]=de,e[13]=me,e[14]=ie):ie=e[14];const ee=ie,fe=ee.inclusiveTaxDisplay==="tax_name_only",Ce=ee.inclusiveTaxDisplay==="with_amount",ge=ee.showReverseChargeDisclaimer,le=a===v.SELF_SERVE_BUSINESS;let G;e[15]!==q?(G=Zs(),e[15]=q,e[16]=G):G=e[16];const oe=G,ue=fe&&a!==v.FREE&&!$,Ne=Ce&&a!==v.FREE&&!$,Re=ge&&a===v.SELF_SERVE_BUSINESS&&!$;let Ie=L,Ae;if(!x&&!A&&W){if($||B||E&&a===v.SELF_SERVE_BUSINESS)Ae=Te(W,mt,_.Month);else if(a===v.PLUS||a===v.GO){const U=a===v.PLUS?lt:ss;Ae=Te(W,U,_.Month)}}Ae&&(Ie={id:"defaultCost",defaultMessage:ns(Ae.amount).toString()});const ps=((Ps=(_s=E==null?void 0:E.schedule)==null?void 0:_s.start_after_num_periods)!=null?Ps:0)>0,gs=!!N||!!E&&!ps;let yt;e:{if(!ne||!W){let U;e[17]===Symbol.for("react.memo_cache_sentinel")?(U={info:null,hadError:!1},e[17]=U):U=e[17],yt=U;break e}try{let U;e[18]!==d||e[19]!==W||e[20]!==a?(U=Pa(W,a,d),e[18]=d,e[19]=W,e[20]=a,e[21]=U):U=e[21];let K;e[22]!==U?(K={info:U,hadError:!1},e[22]=U,e[23]=K):K=e[23],yt=K}catch(U){let K;e[24]===Symbol.for("react.memo_cache_sentinel")?(K={info:null,hadError:!0},e[24]=K):K=e[24],yt=K}}const hs=yt,ke=hs.info;let Ht;e:{if(!ne&&A!=null||ne&&(Fe||hs.hadError)){Ht=_e.pricingConfigFallback;break e}Ht=null}const ut=Ht;let xt;e[25]!==ut?(xt=ut?t.jsx("div",{role:"alert",className:"border-token-border-warning bg-token-background-warning text-token-text-warning mb-3 w-full rounded border text-xs",children:t.jsx(g,S({},ut))}):null,e[25]=ut,e[26]=xt):xt=e[26];const xn=xt;let _t;e[27]===Symbol.for("react.memo_cache_sentinel")?(_t=t.jsxs("div",{className:"mb-4 flex gap-2",children:[t.jsx("div",{className:"text-secondary text-xl text-gray-500",children:t.jsx("div",{className:"h-6 w-4 animate-pulse rounded bg-gray-200 dark:bg-gray-700"})}),t.jsx("div",{className:"h-10 w-24 animate-pulse rounded bg-gray-200 dark:bg-gray-700"})]}),e[27]=_t):_t=e[27];let Pt;e[28]===Symbol.for("react.memo_cache_sentinel")?(Pt=t.jsxs(t.Fragment,{children:[_t,t.jsx("div",{className:"mt-4 flex items-baseline gap-1.5",children:t.jsx("div",{className:"mt-auto mb-0.5 flex h-full flex-col items-start",children:t.jsx("p",{className:"text-token-text-secondary w-full text-[11px]",children:t.jsx("span",{className:"inline-block h-3 w-32 animate-pulse rounded bg-gray-200 dark:bg-gray-700"})})})})]}),e[28]=Pt):Pt=e[28];const _n=Pt,bt=ut!=null||(ne?Pe:x),{shouldHide:$t}=fa(),qt=R==null?void 0:R.coupon;let St;e:{if(qt===Bt){let U;e[29]===Symbol.for("react.memo_cache_sentinel")?(U={welcomeOffer:at.team1dollarWelcomeOffer,notEligible:at.team1dollarNotEligible,temporarilyDisabled:at.team1dollarTemporarilyDisabled,offline:at.team1dollarOffline},e[29]=U):U=e[29],St=U;break e}if(qt&&os(qt)){let U;e[30]===Symbol.for("react.memo_cache_sentinel")?(U={welcomeOffer:He.teamFreeTrialWelcomeOffer,notEligible:He.teamFreeTrialNotEligible,temporarilyDisabled:He.teamFreeTrialTemporarilyDisabled,offline:He.teamFreeTrialOffline},e[30]=U):U=e[30],St=U;break e}St=null}const be=St,zt=(R==null?void 0:R.coupon)===Bt&&R.state==="eligible";let Ct=null,ys=null;if(!E&&R&&(R.coupon===Bt||os(R.coupon))){if(R.state==="eligible")ys=be==null?void 0:be.welcomeOffer;else if(R.state==="not_eligible"&&!$t){const U=be==null?void 0:be.notEligible;let K;e[31]!==U?(K=t.jsx("div",{className:"mb-3 w-full","data-testid":"pricing-modal-promo-banner",children:t.jsx("div",{className:"rounded bg-gray-50 px-3 py-2 text-sm text-gray-900",children:t.jsx(g,S({},U))})}),e[31]=U,e[32]=K):K=e[32],Ct=K}else if(R.state==="temporary_disabled"&&!$t){const U=be==null?void 0:be.temporarilyDisabled;let K;e[33]!==U?(K=t.jsx("div",{className:"mb-3 w-full","data-testid":"pricing-modal-promo-banner",children:t.jsx("div",{className:"rounded bg-gray-50 px-3 py-2 text-sm text-gray-500",children:t.jsx(g,S({},U))})}),e[33]=U,e[34]=K):K=e[34],Ct=K}else if(R.state==="offline"&&!$t){const U=be==null?void 0:be.offline;let K;e[35]!==U?(K=t.jsx("div",{className:"mb-3 w-full","data-testid":"pricing-modal-promo-banner",children:t.jsx("div",{className:"rounded bg-gray-50 px-3 py-2 text-sm text-gray-900",children:t.jsx(g,S({},U))})}),e[35]=U,e[36]=K):K=e[36],Ct=K}}let qe;e[37]!==k?(qe=!["promo","highlight"].includes(k)&&"bg-token-main-surface-primary",e[37]=k,e[38]=qe):qe=e[38];const Kt=V&&"md:max-w-117";let Mt;e[39]!==i||e[40]!==qe||e[41]!==Kt?(Mt=Se(qe,Kt,i),e[39]=i,e[40]=qe,e[41]=Kt,e[42]=Mt):Mt=e[42];let vt;e[43]!==n.name?(vt=t.jsx(g,S({},n.name)),e[43]=n.name,e[44]=vt):vt=e[44];let Et;e[45]!==C||e[46]!==h?(Et=h&&t.jsx("span",{className:"text-token-text-primary text-base text-[42px] leading-[48px]",children:C.formatMessage(h)}),e[45]=C,e[46]=h,e[47]=Et):Et=e[47];let Dt;e[48]!==a||e[49]!==bt?(Dt=bt&&t.jsx("div",{"data-testid":"".concat(a,"-pricing-column-cost-skeleton"),children:_n}),e[48]=a,e[49]=bt,e[50]=Dt):Dt=e[50];let wt;e[51]!==a||e[52]!==n.summary||e[53]!==V?(wt=n.summary?t.jsx("p",{className:Se("text-token-text-primary mt-4 text-base font-medium",V&&"md:min-h-12"),"data-testid":"".concat(a,"-pricing-column-cost-summary"),children:t.jsx(g,S({},n.summary))}):null,e[51]=a,e[52]=n.summary,e[53]=V,e[54]=wt):wt=e[54];let jt;e[55]!==o?(jt=t.jsx("div",{className:"mb-2.5 w-full",children:o}),e[55]=o,e[56]=jt):jt=e[56];let Tt;e[57]!==w||e[58]!==k?(Tt=w&&t.jsx(Us,{type:k,className:"-mt-2",children:w}),e[57]=w,e[58]=k,e[59]=Tt):Tt=e[59];const Qt=a===v.SELF_SERVE_BUSINESS;let Ft;e[60]!==Z||e[61]!==n.advertisedFeatures||e[62]!==Qt?(Ft=t.jsx(va,{children:t.jsx(ya,{advertisedFeatures:n.advertisedFeatures,isTeamColumn:Qt,isBusinessUpgradeV2CopyEnabled:Z})}),e[60]=Z,e[61]=n.advertisedFeatures,e[62]=Qt,e[63]=Ft):Ft=e[63];let Nt;e[64]!==E?(Nt=E&&Ea(E)&&(E==null?void 0:E.referrer_name)&&t.jsx("div",{className:"flex w-full items-center justify-center rounded-md border-[1px] border-[#AF52DE] bg-[#8C43A00D] py-2 text-center",children:t.jsx("span",{className:"text-l text-[#AF52DE]",children:t.jsx(g,{id:"PricingModalColumn.referredBy",defaultMessage:"{referrer_name} gave you 1 month of free Plus",values:{referrer_name:E==null?void 0:E.referrer_name}})})}),e[64]=E,e[65]=Nt):Nt=e[65];const Zt=n.disclaimer&&t.jsxs(Ls,{type:k,className:"mt-3 px-1",children:[t.jsx("div",{children:n.cost&&t.jsx(g,z(S({},n.disclaimer),{values:{link:U=>{var K,Ue;return t.jsx(Oe,{className:"font-medium underline",target:"_blank",rel:"noreferrer",to:(Ue=(K=n.disclaimer)==null?void 0:K.link)!=null?Ue:"",children:U})},minSeats:oe,article:U=>{var K,Ue;return t.jsx(Oe,{className:"font-medium underline",target:"_blank",rel:"noreferrer",to:(Ue=(K=n==null?void 0:n.disclaimer)==null?void 0:K.article)!=null?Ue:"",children:U})},amount:C.formatNumber(n.cost.costValue,{style:"currency",currency:d.currency,trailingZeroDisplay:"stripIfInteger"}),currencySign:C.formatMessage(Y.sign),postTrialSeatPrice:B&&le&&Ae?C.formatNumber(Ae.amount,{style:"currency",currency:d.currency,trailingZeroDisplay:"stripIfInteger"}):void 0}}))}),n.disclaimer2&&t.jsx("div",{children:t.jsx(g,z(S({},n.disclaimer2),{values:{link:U=>{var K,Ue;return t.jsx(Oe,{className:"font-medium underline",target:"_blank",rel:"noreferrer",to:(Ue=(K=n.disclaimer2)==null?void 0:K.link)!=null?Ue:"",children:U})}}}))}),Re&&(ke?((bs=ke.taxDetails)==null?void 0:bs.reverseChargeEligible)&&t.jsx("div",{children:t.jsx(g,z(S({},_e.reverseChargeTaxDisclaimer),{values:{tax_type:ke.taxDetails.taxName}}))}):t.jsx("div",{children:t.jsx(g,S({},_e.teamPricingVATDisclaimer))}))]});let ze;e[66]!==I||e[67]!==k?(ze=I.length>0&&t.jsx(Ls,{type:k,className:"gap-0.5 pt-1",children:I.map(ka)}),e[66]=I,e[67]=k,e[68]=ze):ze=e[68];let Rt;return e[69]!==Zt||e[70]!==ze?(Rt=t.jsxs("div",{children:[Zt,ze]}),e[69]=Zt,e[70]=ze,e[71]=Rt):Rt=e[71],t.jsxs(Ma,{className:Mt,"data-testid":"".concat(a,"-pricing-modal-column"),id:l,type:k,children:[xn,Ct,t.jsxs(Us,{type:k,className:"mt-0",children:[t.jsxs("div",{className:"flex flex-col gap-5 rounded-2xl",children:[t.jsxs("p",{className:"flex items-center justify-between gap-2 text-[28px] font-medium",children:[vt,t.jsx(Sa,{useRecommendedBadge:H,activeDiscountMetadata:N,promoMetadata:E,type:k,planType:a,welcomeOfferLabel:ys,currencySymbol:Y,isScheduledPromo:ps})]}),Et,Dt,!h&&t.jsxs("div",{className:"flex items-end gap-1.5",hidden:bt,"data-testid":"".concat(a,"-pricing-column-cost"),children:[Ie&&t.jsx(Os,{costTitle:Ie,currencySymbol:Y,isStrikethrough:gs,priceDetail:ke==null?void 0:ke.priceDetails}),gs&&L?t.jsx(Os,{costTitle:L,currencySymbol:Y}):null,t.jsx("div",{className:"flex items-baseline gap-1.5",children:t.jsxs("div",{className:"mt-auto mb-0.5 flex h-full flex-col items-start",children:[t.jsxs("p",{className:"text-token-text-secondary w-full text-[11px]",children:[!zt&&t.jsx(g,{id:"PricingModalColumn.currencyCodeWithSlash",defaultMessage:"{currencyCode} / ",values:{currencyCode:C.formatMessage(Y.code)}}),E&&!N&&(ue?t.jsx(g,z(S({},_e.frequencyWithTaxInformation),{values:{tax_type:se(W==null?void 0:W.currencyConfig.tax_type)}})):Ne&&L?t.jsx(g,z(S({},_e.frequencyWithTaxInformationIncludingAmount),{values:{tax_type:se(W==null?void 0:W.currencyConfig.tax_type),vat_amount:C.formatNumber(ks(Number((Ss=L.defaultMessage)==null?void 0:Ss.toString().replaceAll("*","")),d.country),{style:"currency",currency:C.formatMessage(Y.code),minimumFractionDigits:2,maximumFractionDigits:2})}})):zt?t.jsx(t.Fragment,{}):t.jsx(g,S({},_e.frequency))),(!N||ue||Ne)&&t.jsx("br",{}),E&&!N&&((Cs=n.cost)!=null&&Cs.costDuration)?t.jsx(g,S({},n.cost.costDuration)):zt?t.jsx(t.Fragment,{}):ke?t.jsx(Fa,{priceDetails:ke.priceDetails,taxDetails:ke.taxDetails,priceDisplayOptions:ee}):ue?t.jsx(g,z(S({},_e.frequencyWithTaxInformation),{values:{tax_type:se(W==null?void 0:W.currencyConfig.tax_type)}})):Ne&&L?t.jsx(g,z(S({},_e.frequencyWithTaxInformationIncludingAmount),{values:{tax_type:se(W==null?void 0:W.currencyConfig.tax_type),vat_amount:C.formatNumber(ks(Number((Ms=L.defaultMessage)==null?void 0:Ms.toString().replaceAll("*","")),d.country),{style:"currency",currency:C.formatMessage(Y.code),minimumFractionDigits:2,maximumFractionDigits:2})}})):t.jsx(g,S({},_e.frequency))]}),t.jsx("p",{className:"text-token-text-secondary text-xs",children:N&&N.discount.expires_at&&t.jsx(g,z(S({},_e.remainingDiscountDate),{values:{remaining_discount_date:N.discount.expires_at}}))})]})})]})]}),!h&&X&&F?t.jsx("p",{className:"text-token-text-tertiary mt-6 mb-3 text-sm","data-testid":"".concat(a,"-pricing-column-cost-subtitle"),children:t.jsx(g,S({},X))}):null,wt]}),jt,Tt,Ft,Nt,Rt]})};function Os({costTitle:s,currencySymbol:e,isStrikethrough:a=!1,priceDetail:n}){return n?t.jsx(wa,{priceDetail:n,isStrikethrough:a}):t.jsxs("div",{className:Se("flex",{"text-token-text-primary":!a,"text-token-text-tertiary":a}),children:[t.jsx("div",{className:"text-secondary text-xl text-gray-500",children:t.jsx(g,S({},e.sign))}),t.jsx("div",{className:Se("text-5xl",{"line-through":a}),children:t.jsx(g,S({},s))})]})}function Da(s,e){return s===We?"id-ID":e}function wa({priceDetail:s,isStrikethrough:e=!1}){var p;const a=ye(),n={style:"currency",currency:s.currency,currencyDisplay:"narrowSymbol",trailingZeroDisplay:"stripIfInteger"},o=Da(s.currency,a.locale),r=new Intl.NumberFormat(o,n).formatToParts(s.amount),i=(p=r.find(c=>c.type==="currency"))==null?void 0:p.value,l=r.filter(c=>c.type!=="currency").map(c=>c.value).join("");return t.jsxs("div",{className:Se("flex",{"text-token-text-primary":!e,"text-token-text-tertiary":e}),children:[t.jsx("div",{className:"text-secondary text-xl text-gray-500",children:i}),t.jsx("div",{className:Se("text-5xl",{"line-through":e}),children:l})]})}function Bs(s){switch(s){case"tax_name_only":case"with_amount":return s;default:return"none"}}function ja(s,e){if(!s||s.currencyConfig.symbol_code==="GBP"&&$n(e))return{inclusiveTaxDisplay:"none",exclusiveTaxDisplay:"none",showReverseChargeDisclaimer:!1};const a=s.currencyConfig.vat_display;return{inclusiveTaxDisplay:Bs(a.inclusive_tax_display),exclusiveTaxDisplay:Bs(a.exclusive_tax_display),showReverseChargeDisclaimer:a.show_reverse_charge_disclaimer}}function Ta(s,e){const a=je(s,"3768341700"),n=a.get("is_vat_information_enabled",!1),o=a.get("is_vat_information_with_amount_enabled",!0),r=a.get("is_team_pricing_vat_disclaimer_enabled",!1);return e===Ve?n?{inclusiveTaxDisplay:"tax_name_only",exclusiveTaxDisplay:"tax_name_only",showReverseChargeDisclaimer:r}:o?{inclusiveTaxDisplay:"with_amount",exclusiveTaxDisplay:"tax_name_only",showReverseChargeDisclaimer:r}:{inclusiveTaxDisplay:"none",exclusiveTaxDisplay:"none",showReverseChargeDisclaimer:r}:{}}function Fa({priceDetails:s,taxDetails:e,priceDisplayOptions:a}){var i;const n=ye(),o={tax_type:(i=e==null?void 0:e.taxName)!=null?i:"tax",tax_behavior:s.amountTaxBehavior,tax_amount:(e==null?void 0:e.taxAmount)&&n.formatNumber(e.taxAmount,{style:"currency",currency:s.currency,currencyDisplay:"narrowSymbol",trailingZeroDisplay:"stripIfInteger"})};let r;return e==null||e.taxAmount===0?r="none":r=s.amountTaxBehavior===P.Inclusive?a.inclusiveTaxDisplay:a.exclusiveTaxDisplay,t.jsx(g,z(S({},Na({displayOption:r})),{values:o}))}function Na({displayOption:s}){switch(s){case"none":return _e.frequency;case"tax_name_only":return _e.subscriptionFrequencyTaxInformation;case"with_amount":return _e.subscriptionFrequencyTaxInformationWithAmount}}function sn(s,e){var a,n,o;return{costValue:(a=s.cost)==null?void 0:a.costValue,costTitle:(n=s.cost)==null?void 0:n.costTitle,costSubtitle:(o=s.cost)==null?void 0:o.costSubtitle,currencySymbol:us(e)}}const _e=$e({frequency:{id:"frequency",defaultMessage:"month"},frequencyWithTaxInformation:{id:"frequencyWithTaxInformation",defaultMessage:"month (including {tax_type})"},frequencyWithTaxInformationIncludingAmount:{id:"frequencyWithTaxInformationIncludingAmount",defaultMessage:"month (includes {vat_amount} of {tax_type})"},teamPricingVATDisclaimer:{id:"pricingPlanConstants.teams.teamPricingVATDisclaimer",defaultMessage:"VAT excluded at checkout with valid VAT ID"},pricingConfigFallback:{id:"PricingModalColumn.pricingConfigFallback",defaultMessage:"Please reload page, checkout pricing not available."},remainingDiscountDate:{id:"remainingDiscountDate",defaultMessage:"until {remaining_discount_date}"},subscriptionFrequencyTaxInformation:{id:"PricingModalColumn.subscriptionFrequencyTaxInformation",defaultMessage:"month ({tax_behavior, select, inclusive {inclusive of} exclusive {exclusive of} other {exclusive of} } {tax_type, select, gst {GST} vat {VAT} other {tax} })"},subscriptionFrequencyTaxInformationWithAmount:{id:"PricingModalColumn.subscriptionFrequencyTaxInformationWithAmount",defaultMessage:"month ({tax_behavior, select, inclusive {includes} exclusive {plus} other {plus} } {tax_amount} of {tax_type, select, gst {GST} vat {VAT} other {tax} })"},reverseChargeTaxDisclaimer:{id:"PricingModalColumn.reverseChargeTaxDisclaimer",defaultMessage:"{tax_type, select, gst {GST} vat {VAT} other {Tax} } excluded at checkout with a valid {tax_type, select, gst {GST} vat {VAT} other {tax} } ID"}});function Ra(s){if(!s)return"VAT";const e=s.toLowerCase();return e==="vat"||e==="gst"?e.toUpperCase():s}function ka(s,e){return t.jsx("div",{children:s},e)}const nn=()=>{re.logEvent("Account Portal: Click Get Help")};function Ia(s){if(wn(s))return"secondary";switch(s){case v.FREE:return"green";case v.GO:return"green";case v.PLUS:return"green";case v.SELF_SERVE_BUSINESS:return"primary";case v.PRO:return"primary";case v.QUORUM:return"primary"}}function Ys(c){var f=c,{isCurrentPlan:s=!1,planType:e,disabled:a,loading:n=!1,onClick:o,children:r,testId:i,activeColor:l}=f,p=dt(f,["isCurrentPlan","planType","disabled","loading","onClick","children","testId","activeColor"]);return t.jsx(ht,z(S({fullWidth:!0,size:"large",color:s?"secondary":l||Ia(e),disabled:a,loading:n,onClick:o,"data-testid":i,className:a?"bg-token-sidebar-surface-tertiary text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary border-none font-semibold":"font-semibold"},p),{children:r}))}function an(s,e){const[a,n]=ce.useState(!1);ce.useEffect(()=>{if(!a){n(!0);return}s?re.logEventWithStatsig("Email Verify Popup Shown","chatgpt_email_verify_popup_shown",e):re.logEventWithStatsig("Email Verify Popup Hidden","chatgpt_email_verify_popup_hidden",e)},[s])}function on({ctx:s,shouldLogExposure:e}){return je(s,"2273762597",{disableExposureLog:!e})}function Aa({ctx:s,shouldLogExposure:e}){return on({ctx:s,shouldLogExposure:e}).get("web_plus_intro_offer_coupon","none")}function Ua({ctx:s,shouldLogExposure:e}){return on({ctx:s,shouldLogExposure:e}).get("is_plus_intro_offer_enabled",!1)}function La({planType:s}){return s===v.PLUS?Ge.getPlus:Ge.getPro}const So=s=>{"use forget";const e=pe.c(13),{billingDetails:a,shouldUseComparisonSpacing:n,shouldUseOnboardingFeatures:o,className:r,cta:i}=s,l=ct();let p;if(e[0]!==l||e[1]!==o){const u=je(l,"1656913255").get("outcome_value_props_enabled",!1);p=Bn({shouldUseOnboardingFeatures:o,shouldUseOutcomeValueProps:u}),e[0]=l,e[1]=o,e[2]=p}else p=e[2];const c=p;let f;e[3]!==i||e[4]!==c?(f=i!=null?i:t.jsx(ht,{color:"secondary",disabled:!0,size:"large",className:"btn-secondary disabled:bg-token-bg-primary w-[100%]",children:t.jsx(g,S({},c.callToAction.inactive))}),e[3]=i,e[4]=c,e[5]=f):f=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=[t.jsx(g,z(S({},Oa.haveExistingPlan),{values:{link:Ba}}),"existing-plan-help")],e[6]=d):d=e[6];let j;return e[7]!==a||e[8]!==r||e[9]!==c||e[10]!==n||e[11]!==f?(j=t.jsx(fs,{className:r,planType:v.FREE,pricingPlan:c,shouldUseComparisonSpacing:n,callToActionButton:f,additionalLinks:d,billingDetails:a,isCheckoutPricingConfigLoading:!1,checkoutPricingConfigError:null}),e[7]=a,e[8]=r,e[9]=c,e[10]=n,e[11]=f,e[12]=j):j=e[12],j},Oa=$e({haveExistingPlan:{id:"FreeColumn.haveExistingPlan",defaultMessage:"Have an existing plan? <link>See billing help</link>"}});function Ba(s){return t.jsx(Oe,{target:"_blank",to:Js,onClick:nn,className:"font-medium underline",children:s},"row-plus-plan-help-link")}function is(s,e,a,n,o){const i=Te(o,lt,_.Month).amount,l=us(n),p=i*e;let c;if("percentage"in a)c=p*(1-a.percentage/100);else if("value"in a)c=p-a.value;else throw new Error("Invalid discount type");return{formattedDiscountedCost:s.formatNumber(c,{style:"currency",currency:n,minimumFractionDigits:0,maximumFractionDigits:2}),currencySymbol:l}}function rn(s,e,a,n){const o=S({},e);let r;if(n&&(n.period==="year"?n.num_periods===1?r=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForSingleYear",defaultMessage:"for the first year"}):r=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForPluralYears",defaultMessage:"for the first {num_years} years"},{num_years:n.num_periods}):n.num_periods===1?r=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForSingleMonth",defaultMessage:"for the first month"}):r=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForPluralMonths",defaultMessage:"for the first {num_months} months"},{num_months:n.num_periods})),o.costDuration={id:"promoCostDuration",defaultMessage:r,description:"Cost duration for promo plan"},"percentage"in a||"discount_type"in a&&a.discount_type===pt.PERCENTAGE){const l=(1-("percentage"in a?a.percentage:a.amount)/100)*o.costValue;o.costValue=l,o.costTitle={id:"discountedCost",defaultMessage:ns(l).toString()}}else if("value"in a||a.discount_type===pt.FIXED){const i="value"in a?a.value:a.amount,l=Math.max(0,o.costValue-i);o.costValue=l,o.costTitle={id:"discountedCost",defaultMessage:ns(l).toString()}}return o}function Gs(s,e){const a=gt(new Date,s);return new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"}).format(a)}function Ya({currentAccount:s,intl:e,billingDetails:a,pricingPlan:n,promoMetadata:o,columnPlanType:r}){var D;if(o||!s.data.subscriptionStatus.discount)return{activeDiscountMetadata:null,scheduledAdditionalLink:null};const i=s.getDaysUntilPlanDiscountExpires(),l=s.data.subscriptionStatus.discount,p=s.planType,c=s.getNextPlanType(),f=(D=l.discount_start_in_num_periods)!=null?D:0,d=f>0&&p===r&&!c,j=f>0&&c===r,u=e.formatNumber(l.amount,{style:"currency",currency:a.currency,minimumFractionDigits:0,maximumFractionDigits:2});return d||j?{activeDiscountMetadata:null,scheduledAdditionalLink:t.jsx("div",{className:"mb-3 w-full",children:t.jsx("div",{className:"px-1 text-sm font-medium text-[#615EEB]",children:l.discount_type===pt.PERCENTAGE?t.jsx(g,{id:"PlusColumn.scheduledPercentDiscount",defaultMessage:"Your {discountPercent}% discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}.",values:{discountPercent:l.amount,numPeriods:f}}):t.jsx(g,{id:"PlusColumn.scheduledFixedDiscount",defaultMessage:"Your {discountFixed} discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}.",values:{discountFixed:u,numPeriods:f}})})})}:f>0||r!==s.data.subscriptionStatus.planType?{activeDiscountMetadata:null,scheduledAdditionalLink:null}:n.cost?(n.cost=rn(e,n.cost,l),l.discount_type===pt.PERCENTAGE?{activeDiscountMetadata:{discount:{percentage:l.amount,expires_at:i?Gs(i,e.locale):void 0}},scheduledAdditionalLink:null}:l.discount_type===pt.FIXED?{activeDiscountMetadata:{discount:{value:l.amount,expires_at:i?Gs(i,e.locale):void 0}},scheduledAdditionalLink:null}:{activeDiscountMetadata:null,scheduledAdditionalLink:null}):{activeDiscountMetadata:null,scheduledAdditionalLink:null}}const ln="https://help.openai.com/en/articles/10492689-chatgpt-plus-promotions-referrals",Ga="https://help.openai.com/en/articles/12501659-chatgpt-go-promotions-and-referrals",Va="https://help.openai.com/en/articles/12739021-chatgpt-go-promotion-india",Wa="go-12-months-free",Ha={[v.GO]:Ga,[v.PLUS]:ln};function $a(s,e){var a;return s===v.GO&&e===Wa?Va:(a=Ha[s])!=null?a:ln}function Vs(s,e,a,n){let o;switch(s){case"month":o=Tn(new Date,e);break;case"year":o=jn(new Date,e);break}return n&&o&&(o=gt(o,n)),new Intl.DateTimeFormat(a,{year:"numeric",month:"short",day:"numeric"}).format(o)}function cn({intl:s,pricingPlan:e,planName:a,promoMetadata:n,currency:o,currentAccount:r,checkoutPricingConfig:i}){var k,Z,H,V,$,B,F,L,X,Y,C,q;if(!e.cost)return e;const{costTitle:l,currencySymbol:p}=sn(e,o),c=(Z=(k=l==null?void 0:l.defaultMessage)==null?void 0:k.toString())!=null?Z:"20",f=ms(a.toLowerCase()),{schedule:d}=n,j=(V=(H=n.duration)==null?void 0:H.period)!=null?V:"month",u=(B=($=n.duration)==null?void 0:$.num_periods)!=null?B:1,D=(F=d==null?void 0:d.start_after_num_periods)!=null?F:0,m=(L=d==null?void 0:d.period)!=null?L:j,y=D>0?Vs(m,D,s.locale):void 0,h=Vs(j,u+(D>0?D:0),s.locale,r==null?void 0:r.getDaysUntilPlanRenews()),x=rn(s,e.cost,n.discount,(X=n.duration)!=null?X:{num_periods:1,period:"month"}),A=(C=(Y=p.code.defaultMessage)==null?void 0:Y.toString())!=null?C:"USD",b=s.formatNumber(parseFloat(c)||0,{style:"currency",currency:A,minimumFractionDigits:0,maximumFractionDigits:2}),O=(n==null?void 0:n.no_auto_renewal_at_discount_end)===!0,w=(q=r.getEligiblePromoCampaignId(a))!=null?q:void 0;let T;switch(j){case"month":D>0?u===1?T=s.formatMessage(te.promoPlanDisclaimerScheduledForSingleMonth,{start_date:y,end_date:h,cost:b,plan_name:f}):T=s.formatMessage(te.promoPlanDisclaimerScheduledForPluralMonths,{num_months:u,start_date:y,end_date:h,cost:b,plan_name:f}):u===1?T=O?s.formatMessage(te.promoPlanDisclaimerNoRenewForSingleMonth,{}):s.formatMessage(te.promoPlanDisclaimerForSingleMonth,{date:h,cost:b,plan_name:f}):T=O?s.formatMessage(te.promoPlanDisclaimerNoRenewForPluralMonths,{num_months:u}):s.formatMessage(te.promoPlanDisclaimerForPluralMonths,{num_months:u,date:h,cost:b,plan_name:f});break;case"year":D>0?u===1?T=s.formatMessage(te.promoPlanDisclaimerScheduledForSingleYear,{start_date:y,end_date:h,cost:b,plan_name:f}):T=s.formatMessage(te.promoPlanDisclaimerScheduledForPluralYears,{num_years:u,start_date:y,end_date:h,cost:b,plan_name:f}):u===1?T=O?s.formatMessage(te.promoPlanDisclaimerNoRenewForSingleYear,{}):s.formatMessage(te.promoPlanDisclaimerForSingleYear,{date:h,cost:b,plan_name:f}):T=O?s.formatMessage(te.promoPlanDisclaimerNoRenewForPluralYears,{num_years:u}):s.formatMessage(te.promoPlanDisclaimerForPluralYears,{num_years:u,date:h,cost:b,plan_name:f});break;case"hour":throw new Error("Period 'hour' is not supported")}const I="<article>"+s.formatMessage(te.termsApply)+"</article> "+T,E=$a(a,w);let N=n.summary;if(D>0){const{formattedDiscountedCost:Q}=is(s,1,n.discount,o,i),J=Q;switch(j){case"month":u===1?N=s.formatMessage(te.promoSummaryScheduledForSingleMonth,{discounted_cost:J}):N=s.formatMessage(te.promoSummaryScheduledForPluralMonths,{discounted_cost:J,num_months:u});break;case"year":u===1?N=s.formatMessage(te.promoSummaryScheduledForSingleYear,{discounted_cost:J}):N=s.formatMessage(te.promoSummaryScheduledForPluralYears,{discounted_cost:J,num_years:u});break}}let R=x;if(D>0){const{formattedDiscountedCost:Q}=is(s,1,n.discount,o,i);let J;switch(j){case"month":u===1?J=s.formatMessage(te.promoCostSubtitleScheduledForSingleMonth,{start_date:y,discounted_cost:Q}):J=s.formatMessage(te.promoCostSubtitleScheduledForPluralMonths,{start_date:y,discounted_cost:Q,num_months:u});break;case"year":u===1?J=s.formatMessage(te.promoCostSubtitleScheduledForSingleYear,{start_date:y,discounted_cost:Q}):J=s.formatMessage(te.promoCostSubtitleScheduledForPluralYears,{start_date:y,discounted_cost:Q,num_years:u});break}R=z(S({},e.cost),{costDuration:{id:"promoCostDurationScheduled",defaultMessage:J,description:"Cost duration subtitle for scheduled promo indicating when discount starts and for how long"}})}return e=z(S({},e),{summary:{id:"promoSummary",defaultMessage:N},disclaimer:{id:"promoDisclaimer",defaultMessage:I,article:E},fullPriceResumeDateString:h,cost:R,callToAction:z(S({},e.callToAction),{promo:Sn({id:"pricingPlanConstants.promo.callToAction",defaultMessage:"Apply to My Subscription"})})}),e}const te=$e({promoPlanDisclaimerForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months. Starting {date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForSingleMonth",defaultMessage:"Promo pricing applies for 1 month starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerScheduledForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForSingleYear",defaultMessage:"Promo pricing applies for 1 year starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerForSingleMonth",defaultMessage:"Promo pricing applies for 1 month. Starting {date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerNoRenewForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months."},promoPlanDisclaimerNoRenewForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForSingleMonth",defaultMessage:"Promo pricing applies for 1 month."},promoCostSubtitleScheduledForPluralMonths:{id:"pricingPlanConstants.promoCostSubtitleScheduledForPluralMonths",defaultMessage:"Starting {start_date}: {discounted_cost}/month for {num_months} months"},promoCostSubtitleScheduledForSingleMonth:{id:"pricingPlanConstants.promoCostSubtitleScheduledForSingleMonth",defaultMessage:"Starting {start_date}: {discounted_cost}/month for 1 month"},promoCostSubtitleScheduledForPluralYears:{id:"pricingPlanConstants.promoCostSubtitleScheduledForPluralYears",defaultMessage:"Starting {start_date}: {discounted_cost}/year for {num_years} years"},promoCostSubtitleScheduledForSingleYear:{id:"pricingPlanConstants.promoCostSubtitleScheduledForSingleYear",defaultMessage:"Starting {start_date}: {discounted_cost}/year for 1 year"},promoPlanDisclaimerForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years. Starting {date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerForSingleYear",defaultMessage:"Promo pricing applies for 1 year. Starting {date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerNoRenewForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years."},promoPlanDisclaimerNoRenewForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForSingleYear",defaultMessage:"Promo pricing applies for 1 year."},termsApply:{id:"pricingPlanConstants.termsApply",defaultMessage:"Promo terms apply."},promoSummaryScheduledForPluralMonths:{id:"pricingPlanConstants.promoSummaryScheduledForPluralMonths",defaultMessage:"Pay for the first month, then the next {num_months} months are {discounted_cost}."},promoSummaryScheduledForSingleMonth:{id:"pricingPlanConstants.promoSummaryScheduledForSingleMonth",defaultMessage:"Pay for the first month, then the next month is {discounted_cost}."},promoSummaryScheduledForPluralYears:{id:"pricingPlanConstants.promoSummaryScheduledForPluralYears",defaultMessage:"Pay for the first year, then the next {num_years} years are {discounted_cost}."},promoSummaryScheduledForSingleYear:{id:"pricingPlanConstants.promoSummaryScheduledForSingleYear",defaultMessage:"Pay for the first year, then the next year is {discounted_cost}."}}),un=Fn(s=>({recentlyDowngraded:!1,recentlyUpgraded:!1,recentlyCanceled:!1,setRecentlyDowngraded:e=>s({recentlyDowngraded:e}),setRecentlyUpgraded:e=>s({recentlyUpgraded:e}),setRecentlyCanceled:e=>s({recentlyCanceled:e})}));function dn(s){switch(s){case v.FREE:return"chatgptfreeplan";case v.GO:return"chatgptgoplan";case v.PLUS:return"chatgptplusplan";case v.PRO:return"chatgptpro";case v.SELF_SERVE_BUSINESS:return"chatgptteamplan";default:throw new Error("Invalid plan type: ".concat(s))}}function Ye(s){return ms(s.toLowerCase())}function mn({isOpen:s,onClose:e,accountId:a,initialPlanType:n,updatedPlanType:o,billingDetails:r,promoMetadata:i,promoCode:l,fullPriceResumeDateString:p,onPromoClose:c}){"use no forget";var Ce,ge,le;const f=ct(),d=ye(),j=qs(),u=Nn(),[D,m]=ce.useState(!1),y=(i==null?void 0:i.plan_type_change)==="equal",h=n===o&&!y,x=Be(n)<Be(o),A=dn(o);ce.useEffect(()=>{re.logTogglePlanManagementModal({isOpen:!0})},[]);const b=()=>{re.logTogglePlanManagementModal({isOpen:!1}),e()},O=qn(a),w=zn(a),T=Kn(a),{data:I,isError:E,isLoading:N}=Xs(a,void 0,A,void 0,y),{data:R,isLoading:k,error:Z}=Wt({countryCode:r.country,currency:r.currency,ctx:f});!h&&(E||Z!=null)&&((u==null?void 0:u.planType)===v.SELF_SERVE_BUSINESS?j.warning(d.formatMessage({id:"planManagement.errorUpgradingTeam",defaultMessage:"Updates to {capitalizedUpdatedPlanType} aren't yet supported for users with Team subscriptions"},{capitalizedUpdatedPlanType:Ye(o)}),{hasCloseButton:!0}):j.warning(d.formatMessage({id:"planManagement.errorFetchingPreview",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),e());const H=G=>new Intl.DateTimeFormat(d.locale,{year:"numeric",month:"short",day:"numeric"}).format(G),V=u==null?void 0:u.getDaysUntilPlanRenews();let $=typeof V=="number"&&V>0?gt(new Date,V):null,B=$?H($):"";const F=u==null?void 0:u.getDaysUntilSubscriptionCancelAt();$&&typeof V=="number"&&typeof F=="number"&&F>0&&F>V&&($=gt(new Date,F),B=H($));const{recentlyCanceled:L,setRecentlyUpgraded:X,setRecentlyDowngraded:Y}=un(),C=(u==null?void 0:u.willRenewSubscription())||L,[q,Q]=ce.useState(!1),J=Cn();if(!u)return null;const se=y?$:I!=null&&I.renewal_date?new Date(I.renewal_date):null,ne=se?se.toLocaleDateString(d.locale,{year:"numeric",month:"long",day:"numeric"}):d.formatMessage(Ge.notApplicable),xe=p?new Date(p).toLocaleDateString(d.locale,{year:"numeric",month:"long",day:"numeric"}):d.formatMessage(Ge.notApplicable),W=us(r.currency),{goCost:Fe,plusCost:Pe,proCost:de}=yn(r.currency,R),me=(ge=(Ce=i==null?void 0:i.duration)==null?void 0:Ce.num_periods)!=null?ge:1,{formattedDiscountedCost:ie}=i!=null&&i.discount&&!k&&!Z&&R?is(d,me,i.discount,(le=W.code.defaultMessage)==null?void 0:le.toString(),R):{formattedDiscountedCost:null},ee=async G=>{var oe;m(!0);try{if(h)await w.mutateAsync(a),j.success(B===""?d.formatMessage({id:"planManagement.successfullyRenewedSubscription2",defaultMessage:"Your subscription has been renewed."}):d.formatMessage({id:"planManagement.successfullyRenewedSubscription",defaultMessage:"Your subscription has been renewed. Your subscription will auto-renew on {renewalDate}."},{renewalDate:B}),{hasCloseButton:!0}),re.logEvent("Renew Plan Success",{planType:G}),Ts.logEvent("chatgpt_renew_plan_success",null,{planType:G});else if(y&&l)await O.mutateAsync({accountId:a,updatedPlan:void 0,updatedPriceInterval:void 0,updatedSeats:void 0,updatedPromoCode:l}),j.success(B===""?d.formatMessage({id:"planManagement.successfullyRenewedSubscriptionPromotion",defaultMessage:"Your subscription has been updated and will auto-renew at the promotional rate of {promotionalCost} during your next billing cycle."},{promotionalCost:ie}):d.formatMessage({id:"planManagement.successfullyRenewedSubscriptionPromotion2",defaultMessage:"Your subscription has been updated and will auto-renew at your promotional rate of {promotionalCost} on {renewalDate}."},{renewalDate:B,promotionalCost:ie}),{hasCloseButton:!0});else{C||(await w.mutateAsync(a),Q(!0));const Ne=l?void 0:A;await O.mutateAsync({accountId:a,updatedPlan:Ne,updatedPriceInterval:void 0,updatedSeats:void 0,updatedPromoCode:l!=null?l:void 0});const Re=x?d.formatMessage({id:"planManagement.successfullyUpdatedSubscription",defaultMessage:"You're now subscribed to ChatGPT {capitalizedUpdatedPlanType}"},{capitalizedUpdatedPlanType:Ye(o)}):d.formatMessage({id:"planManagement.updatedSubscriptionToPlus",defaultMessage:"Your subscription has been updated. Your subscription will change to {capitalizedUpdatedPlanType} on {renewalDateFormatted}."},{renewalDateFormatted:ne,capitalizedUpdatedPlanType:Ye(o)});if(G!==o){const Ie=x?"Upgrade Plan Success":"Downgrade Plan Success",Ae=x?"chatgpt_upgrade_plan_success":"chatgpt_downgrade_plan_success";re.logEvent(Ie,{fromPlan:G,toPlan:o}),Ts.logEvent(Ae,null,{fromPlan:G,toPlan:o}),x?X(!0):Y(!0),j.success(Re,{hasCloseButton:!0})}localStorage.setItem("subscriptionUpdateMessage_".concat(u.id),Re)}J.invalidateQueries(Rn());const ue=Fs.getItem(Ns.CheckoutFrom);da(ue)&&(Fs.removeItem(Ns.CheckoutFrom),window.location.href=ma[ue]),e()}catch(ue){((oe=ue==null?void 0:ue.detail)==null?void 0:oe.error_type)==="card_declined"?j.warning(d.formatMessage({id:"planManagement.cardDeclinedError",defaultMessage:"Payment error. Your card may be invalid or authentication may be needed."}),{hasCloseButton:!0}):j.warning(d.formatMessage({id:"planManagement.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),q&&await T.mutateAsync(a),e()}finally{m(!1),l&&(c==null||c())}};let fe=Pe;return o===v.GO?fe=Fe:o===v.PRO?fe=de:o!==v.PLUS&&zs.error("Invalid target plan type: ".concat(o)),t.jsx(Vt,{testId:"modal-plan-management",type:"success",isOpen:s,onClose:b,size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:d.formatMessage({id:"planManagementModal.title",defaultMessage:"Confirm plan changes"}),removePopoverStyling:!0,headerClassName:"py-4! px-6! [&_h2]:font-medium",children:N||k?t.jsx(fn,{}):y||h&&u?t.jsx(Xa,{account:u,renewalDate:B,handleUpdate:()=>ee(n),isUpdating:D,onClose:b,targetPlanCost:fe,currencySymbol:W,promoMetadata:i,fullPriceResumeDateFormatted:xe,formattedDiscountedCost:ie,renewalDateFormatted:ne}):E||Z!=null||!I?null:x?t.jsx(qa,{accountId:a,handleUpdate:()=>ee(n),isUpdating:D,onClose:b,initialPlanType:n,updatedPlanType:o,currencySymbol:W}):t.jsx(Ja,{renewalDate:I.renewal_date,handleUpdate:()=>ee(n),isUpdating:D,onClose:b,targetPlanCost:fe,currentPlanType:n,updatedPlanType:o,currencySymbol:W,promoMetadata:i,fullPriceResumeDateFormatted:xe,formattedDiscountedCost:ie})})}function fn(){"use forget";const s=pe.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=t.jsx("div",{className:"flex items-center justify-center p-6",children:t.jsx(Ks,{})}),s[0]=e):e=s[0],e}function pn(s){"use forget";const e=pe.c(12),{adjustmentMessage:a,proratedCreditMessage:n,proratedCreditInfoMessage:o}=s;let r;e[0]!==a?(r=t.jsx("span",{className:"font-semibold",children:a}),e[0]=a,e[1]=r):r=e[1];let i;e[2]!==n?(i=t.jsx("span",{className:"font-semibold text-green-600",children:n}),e[2]=n,e[3]=i):i=e[3];let l;e[4]!==r||e[5]!==i?(l=t.jsxs("div",{className:"mt-4 flex justify-between",children:[r,i]}),e[4]=r,e[5]=i,e[6]=l):l=e[6];let p;e[7]!==o?(p=t.jsx("span",{className:"text-token-text-secondary text-sm",children:o}),e[7]=o,e[8]=p):p=e[8];let c;return e[9]!==l||e[10]!==p?(c=t.jsxs("div",{children:[l,p]}),e[9]=l,e[10]=p,e[11]=c):c=e[11],c}function qa(s){"use forget";const e=pe.c(42),{accountId:a,handleUpdate:n,isUpdating:o,onClose:r,currencySymbol:i,updatedPlanType:l,initialPlanType:p}=s,c=ye();let f;e[0]!==l?(f=dn(l),e[0]=l,e[1]=f):f=e[1];const{data:d,isError:j,isLoading:u}=Xs(a,void 0,f);if(u){let N;return e[2]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(fn,{}),e[2]=N):N=e[2],N}if(j||!d)return null;let D,m,y;if(e[3]!==i||e[4]!==d||e[5]!==p||e[6]!==c||e[7]!==l){const N=Qa({data:d,intl:c,currencySymbol:i,currentPlanType:p});D="px-6 pb-6",e[11]!==i||e[12]!==d||e[13]!==l?(m=t.jsx(Za,{data:d,currencySymbol:i,updatedPlanType:l}),e[11]=i,e[12]=d,e[13]=l,e[14]=m):m=e[14],y=N.filter(Ka).map(za),e[3]=i,e[4]=d,e[5]=p,e[6]=c,e[7]=l,e[8]=D,e[9]=m,e[10]=y}else D=e[8],m=e[9],y=e[10];let h;e[15]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx("hr",{className:"mt-4 mb-4"}),e[15]=h):h=e[15];let x;e[16]!==i||e[17]!==d?(x=t.jsx(gn,{data:d,currencySymbol:i}),e[16]=i,e[17]=d,e[18]=x):x=e[18];let A;e[19]!==d.default_payment_method?(A=d.default_payment_method&&t.jsxs(t.Fragment,{children:[t.jsx("hr",{className:"mt-4 mb-4"}),t.jsx(hn,{defaultPaymentMethod:d.default_payment_method})]}),e[19]=d.default_payment_method,e[20]=A):A=e[20];let b;e[21]!==c?(b=c.formatMessage({id:"planUpgradeModal.cancel",defaultMessage:"Cancel"}),e[21]=c,e[22]=b):b=e[22];let O;e[23]!==r||e[24]!==b?(O=t.jsx(it,{title:b,color:"secondary",onClick:r}),e[23]=r,e[24]=b,e[25]=O):O=e[25];let w;e[26]!==c?(w=c.formatMessage({id:"planUpgradeModal.payNow",defaultMessage:"Pay now"}),e[26]=c,e[27]=w):w=e[27];let T;e[28]!==n||e[29]!==o||e[30]!==w?(T=t.jsx(it,{title:w,color:"primary",onClick:n,loading:o}),e[28]=n,e[29]=o,e[30]=w,e[31]=T):T=e[31];let I;e[32]!==T||e[33]!==O?(I=t.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[O,T]}),e[32]=T,e[33]=O,e[34]=I):I=e[34];let E;return e[35]!==I||e[36]!==D||e[37]!==m||e[38]!==y||e[39]!==x||e[40]!==A?(E=t.jsxs("div",{className:D,children:[m,y,h,x,A,I]}),e[35]=I,e[36]=D,e[37]=m,e[38]=y,e[39]=x,e[40]=A,e[41]=E):E=e[41],E}function za(s,e){return t.jsx(pn,{adjustmentMessage:s.adjustmentMessage,proratedCreditMessage:s.proratedCreditMessage,proratedCreditInfoMessage:s.proratedCreditInfoMessage},e)}function Ka(s){return s.value!==0}function Qa({data:s,intl:e,currencySymbol:a,currentPlanType:n}){return[{adjustmentMessage:t.jsx(g,{id:"planUpgradeModal.adjustment",defaultMessage:"Adjustment"}),proratedCreditMessage:t.jsx(g,{id:"planUpgradeModal.proratedCredit",defaultMessage:"-{currencySign}{adjustment}",values:{currencySign:e.formatMessage(a.sign),adjustment:(-s.negative_line_item_total/100).toFixed(2)}}),proratedCreditInfoMessage:t.jsx(g,{id:"planUpgradeModal.proratedCreditInfo",defaultMessage:"Prorated credit for the remainder of your {currentPlanType} subscription",values:{currentPlanType:n}}),value:s.negative_line_item_total},{adjustmentMessage:t.jsx(g,{id:"planUpgradeModal.discount",defaultMessage:"Adjustment"}),proratedCreditMessage:t.jsx(g,{id:"planUpgradeModal.discountAmount",defaultMessage:"-{currencySign}{discount}",values:{currencySign:e.formatMessage(a.sign),discount:(s.discount_amount/100).toFixed(2)}}),proratedCreditInfoMessage:t.jsx(g,{id:"planUpgradeModal.discountInfo",defaultMessage:"Account discount applied"}),value:s.discount_amount},{adjustmentMessage:t.jsx(g,{id:"planUpgradeModal.credits",defaultMessage:"Adjustments"}),proratedCreditMessage:t.jsx(g,{id:"planUpgradeModal.creditsAmount",defaultMessage:"-{currencySign}{credits}",values:{currencySign:e.formatMessage(a.sign),credits:(s.applied_balance/100).toFixed(2)}}),proratedCreditInfoMessage:t.jsx(g,{id:"planUpgradeModal.creditsInfo",defaultMessage:"Credits applied"}),value:s.applied_balance}]}function Za({data:s,currencySymbol:e,updatedPlanType:a}){const n=ye();return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:t.jsx(g,{id:"planUpgradeModal.subscription",defaultMessage:"ChatGPT {capitalizedUpdatedPlanType} subscription",values:{capitalizedUpdatedPlanType:Ye(a)}})}),t.jsx("span",{className:"font-semibold",children:t.jsx(g,{id:"planUpgradeModal.subscriptionCost",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:n.formatMessage(e.sign),totalCost:(s.positive_line_item_total/100).toFixed(2)}})})]}),t.jsx("span",{className:"text-token-text-secondary text-sm",children:t.jsx(g,{id:"planUpgradeModal.billingCycle",defaultMessage:"Billed monthly, starting today"})})]})}function gn(s){"use forget";const e=pe.c(17),{data:a,currencySymbol:n}=s,o=ye();let r;e[0]!==n.sign||e[1]!==a.amount_due.amount_excluding_tax||e[2]!==a.amount_due.tax_amount||e[3]!==o?(r=a.amount_due.tax_amount>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mt-4 flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:t.jsx(g,{id:"planUpgradeModal.subTotal",defaultMessage:"Subtotal"})}),t.jsx("span",{children:t.jsx(g,{id:"planUpgradeModal.subtotalPrice",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:o.formatMessage(n.sign),totalCost:(a.amount_due.amount_excluding_tax/100).toFixed(2)}})})]}),t.jsxs("div",{className:"mt-2 flex justify-between",children:[t.jsxs("span",{className:"font-semibold",children:[t.jsx(g,{id:"planUpgradeModal.tax",defaultMessage:"Tax"}),t.jsx("span",{className:"text-token-text-secondary font-normal",children:t.jsx(g,{id:"planUpgradeModal.taxPercent",defaultMessage:" {taxPercent}%",values:{taxPercent:(a.amount_due.tax_amount/a.amount_due.amount_excluding_tax*100).toFixed(0)}})})]}),t.jsx("span",{children:t.jsx(g,{id:"planUpgradeModal.taxAmount",defaultMessage:"{currencySign}{tax}",values:{currencySign:o.formatMessage(n.sign),tax:(a.amount_due.tax_amount/100).toFixed(2)}})})]})]}),e[0]=n.sign,e[1]=a.amount_due.amount_excluding_tax,e[2]=a.amount_due.tax_amount,e[3]=o,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx("span",{className:"font-semibold",children:t.jsx(g,{id:"planUpgradeModal.totalDueToday",defaultMessage:"Total due today"})}),e[5]=i):i=e[5];let l;e[6]!==n.sign||e[7]!==o?(l=o.formatMessage(n.sign),e[6]=n.sign,e[7]=o,e[8]=l):l=e[8];const p=a.amount_due.amount/100;let c;e[9]!==p?(c=p.toFixed(2),e[9]=p,e[10]=c):c=e[10];let f;e[11]!==l||e[12]!==c?(f=t.jsxs("div",{className:"mt-2 flex justify-between",children:[i,t.jsx("span",{className:"font-semibold",children:t.jsx(g,{id:"planUpgradeModal.totalDueTodayAmount",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:l,totalCost:c}})})]}),e[11]=l,e[12]=c,e[13]=f):f=e[13];let d;return e[14]!==r||e[15]!==f?(d=t.jsxs(t.Fragment,{children:[r,f]}),e[14]=r,e[15]=f,e[16]=d):d=e[16],d}function hn(s){"use forget";var i;const e=pe.c(6),{defaultPaymentMethod:a}=s;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx("span",{className:"font-semibold",children:t.jsx(g,{id:"planUpgradeModal.paymentMethod",defaultMessage:"Payment Method"})}),e[0]=n):n=e[0];let o;e[1]!==a.card_brand?(o=(i=a.card_brand)==null?void 0:i.toUpperCase(),e[1]=a.card_brand,e[2]=o):o=e[2];let r;return e[3]!==a.card_last4||e[4]!==o?(r=t.jsxs("div",{className:"flex justify-between",children:[n,t.jsxs("span",{className:"text-token-text-secondary",children:[o," *",a.card_last4]})]}),e[3]=a.card_last4,e[4]=o,e[5]=r):r=e[5],r}function Ja(s){"use forget";var Q,J;const e=pe.c(66),{renewalDate:a,handleUpdate:n,isUpdating:o,onClose:r,targetPlanCost:i,currentPlanType:l,currencySymbol:p,updatedPlanType:c,promoMetadata:f,fullPriceResumeDateFormatted:d,formattedDiscountedCost:j}=s,u=ye(),D=(f==null?void 0:f.plan_type_change)==="downgrade",m=(J=(Q=f==null?void 0:f.duration)==null?void 0:Q.period)!=null?J:"month";let y;e[0]!==u||e[1]!==a?(y=a?new Date(a).toLocaleDateString(u.locale,{year:"numeric",month:"long",day:"numeric"}):u.formatMessage(Ge.notApplicable),e[0]=u,e[1]=a,e[2]=y):y=e[2];const h=y;let x;e[3]!==l?(x=Ye(l),e[3]=l,e[4]=x):x=e[4];let A;e[5]!==c?(A=Ye(c),e[5]=c,e[6]=A):A=e[6];let b;e[7]!==h||e[8]!==x||e[9]!==A?(b=t.jsx("p",{className:"text-token-text-secondary",children:t.jsx(g,{id:"planDowngradeModal.currentSubscription",defaultMessage:"Your current {currentPlanType} subscription will remain active until {renewalDateFormatted}, when it will change to {nextPlanType}.",values:{renewalDateFormatted:h,currentPlanType:x,nextPlanType:A}})}),e[7]=h,e[8]=x,e[9]=A,e[10]=b):b=e[10];const O=D?"text-token-text-primary text-[15px]":"font-semibold";let w;e[11]!==c?(w=Ye(c),e[11]=c,e[12]=w):w=e[12];let T;e[13]!==w?(T=t.jsx(g,{id:"planDowngradeModal.newPlan",defaultMessage:"ChatGPT {capitalizedUpdatedPlanType}",values:{capitalizedUpdatedPlanType:w}}),e[13]=w,e[14]=T):T=e[14];let I;e[15]!==O||e[16]!==T?(I=t.jsx("span",{className:O,children:T}),e[15]=O,e[16]=T,e[17]=I):I=e[17];let E;e[18]!==p||e[19]!==j||e[20]!==u||e[21]!==D||e[22]!==i?(E=D?t.jsx("span",{className:"text-token-text-primary text-[15px]",children:t.jsx(g,{id:"planDowngradeModal.newPlanCostOfPromo",defaultMessage:"{promotionalCost} w/ promo",values:{promotionalCost:j}})}):t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(g,{id:"planDowngradeModal.newPlanCost",defaultMessage:"{currencyCode} {currencySign}{planCost}/month",values:{currencyCode:u.formatMessage(p.code),currencySign:u.formatMessage(p.sign),planCost:u.formatMessage(i)}})}),e[18]=p,e[19]=j,e[20]=u,e[21]=D,e[22]=i,e[23]=E):E=e[23];let N;e[24]!==I||e[25]!==E?(N=t.jsxs("div",{className:"flex justify-between",children:[I,E]}),e[24]=I,e[25]=E,e[26]=N):N=e[26];const R=D&&"text-token-text-secondary text-xs";let k;e[27]!==R?(k=Se("text-token-text-secondary",R),e[27]=R,e[28]=k):k=e[28];let Z;e[29]!==d||e[30]!==D||e[31]!==m||e[32]!==h?(Z=D?ls({fullPriceResumeDateFormatted:d,period:m,type:"billingStartAfterPromo"}):t.jsx(g,{id:"planDowngradeModal.billingStart",defaultMessage:"Billing will start on {renewalDateFormatted}",values:{renewalDateFormatted:h}}),e[29]=d,e[30]=D,e[31]=m,e[32]=h,e[33]=Z):Z=e[33];let H;e[34]!==k||e[35]!==Z?(H=t.jsx("span",{className:k,children:Z}),e[34]=k,e[35]=Z,e[36]=H):H=e[36];let V;e[37]!==p||e[38]!==u||e[39]!==D||e[40]!==i?(V=D&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:t.jsx(g,{id:"planDowngradeModal.newPlanCostAfterPromo",defaultMessage:"{currencySign}{planCost}/month after",values:{currencySign:u.formatMessage(p.sign),planCost:u.formatMessage(i)}})}),e[37]=p,e[38]=u,e[39]=D,e[40]=i,e[41]=V):V=e[41];let $;e[42]!==H||e[43]!==V?($=t.jsxs("div",{className:"flex items-center justify-between",children:[H,V]}),e[42]=H,e[43]=V,e[44]=$):$=e[44];let B;e[45]!==N||e[46]!==$?(B=t.jsxs("div",{className:"bg-token-main-surface-secondary mt-4 flex flex-col gap-1 rounded-2xl! rounded-md border-[1px] p-4",children:[N,$]}),e[45]=N,e[46]=$,e[47]=B):B=e[47];let F;e[48]!==u?(F=u.formatMessage({id:"planDowngradeModal.cancel",defaultMessage:"Cancel"}),e[48]=u,e[49]=F):F=e[49];let L;e[50]!==r||e[51]!==F?(L=t.jsx(it,{title:F,color:"secondary",onClick:r}),e[50]=r,e[51]=F,e[52]=L):L=e[52];let X;e[53]!==u?(X=u.formatMessage({id:"planDowngradeModal.confirm",defaultMessage:"Confirm"}),e[53]=u,e[54]=X):X=e[54];let Y;e[55]!==n||e[56]!==o||e[57]!==X?(Y=t.jsx(it,{title:X,color:"primary",onClick:n,loading:o}),e[55]=n,e[56]=o,e[57]=X,e[58]=Y):Y=e[58];let C;e[59]!==L||e[60]!==Y?(C=t.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[L,Y]}),e[59]=L,e[60]=Y,e[61]=C):C=e[61];let q;return e[62]!==B||e[63]!==C||e[64]!==b?(q=t.jsxs("div",{className:"px-6 pb-6",children:[b,B,C]}),e[62]=B,e[63]=C,e[64]=b,e[65]=q):q=e[65],q}function Xa(s){"use forget";var q,Q;const e=pe.c(63),{account:a,renewalDate:n,handleUpdate:o,isUpdating:r,onClose:i,targetPlanCost:l,currencySymbol:p,promoMetadata:c,fullPriceResumeDateFormatted:f,renewalDateFormatted:d,formattedDiscountedCost:j}=s,u=ye(),D=a.data.subscriptionStatus.planType;let m;e[0]!==D?(m=Ye(D),e[0]=D,e[1]=m):m=e[1];const y=m,h=(c==null?void 0:c.plan_type_change)==="equal",x=(Q=(q=c==null?void 0:c.duration)==null?void 0:q.period)!=null?Q:"month";let A;e[2]!==h||e[3]!==x||e[4]!==y||e[5]!==n||e[6]!==d?(A=h?ls({renewalDateFormatted:d,period:x,type:"currentSubscriptionPromo"}):t.jsx(g,{id:"planRenewalModal.currentSubscription",defaultMessage:"Your current {planName} subscription will auto-renew on {renewalDate}.",values:{planName:y,renewalDate:n}}),e[2]=h,e[3]=x,e[4]=y,e[5]=n,e[6]=d,e[7]=A):A=e[7];let b;e[8]!==A?(b=t.jsx("p",{className:"text-token-text-primary",children:A}),e[8]=A,e[9]=b):b=e[9];const O=h?"text-token-text-primary text-[15px]":"font-semibold";let w;e[10]!==y?(w=t.jsx(g,{id:"planRenewalModal.newPlan",defaultMessage:"ChatGPT {planName}",values:{planName:y}}),e[10]=y,e[11]=w):w=e[11];let T;e[12]!==O||e[13]!==w?(T=t.jsx("span",{className:O,children:w}),e[12]=O,e[13]=w,e[14]=T):T=e[14];let I;e[15]!==p||e[16]!==j||e[17]!==u||e[18]!==h||e[19]!==l?(I=h?t.jsx("span",{className:"text-token-text-primary text-[15px]",children:t.jsx(g,{id:"planRenewalModal.newPlanCostAfterPromo",defaultMessage:"{promotionalCost} w/ promo",values:{promotionalCost:j}})}):t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(g,{id:"planRenewalModal.newPlanCost",defaultMessage:"{currencyCode} {currencySign}{planCost}/month",values:{currencyCode:u.formatMessage(p.code),currencySign:u.formatMessage(p.sign),planCost:u.formatMessage(l)}})}),e[15]=p,e[16]=j,e[17]=u,e[18]=h,e[19]=l,e[20]=I):I=e[20];let E;e[21]!==T||e[22]!==I?(E=t.jsxs("div",{className:"flex justify-between",children:[T,I]}),e[21]=T,e[22]=I,e[23]=E):E=e[23];const N=h&&"text-token-text-secondary text-xs";let R;e[24]!==N?(R=Se("text-token-text-secondary",N),e[24]=N,e[25]=R):R=e[25];let k;e[26]!==f||e[27]!==h||e[28]!==n?(k=h?t.jsx(g,{id:"planRenewalModal.billingStartAfterPromo",defaultMessage:"Billing will start on {fullPriceResumeDateFormatted}",values:{fullPriceResumeDateFormatted:f}}):t.jsx(g,{id:"planRenewalModal.billingStart",defaultMessage:"Billing will auto-renew on {renewalDate}",values:{renewalDate:n}}),e[26]=f,e[27]=h,e[28]=n,e[29]=k):k=e[29];let Z;e[30]!==R||e[31]!==k?(Z=t.jsx("span",{className:R,children:k}),e[30]=R,e[31]=k,e[32]=Z):Z=e[32];let H;e[33]!==p||e[34]!==u||e[35]!==h||e[36]!==x||e[37]!==l?(H=h&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:ls({period:x,type:"newPlanCostAfterPromo",currencySign:u.formatMessage(p.sign),planCost:u.formatMessage(l)})}),e[33]=p,e[34]=u,e[35]=h,e[36]=x,e[37]=l,e[38]=H):H=e[38];let V;e[39]!==Z||e[40]!==H?(V=t.jsxs("div",{className:"flex items-center justify-between",children:[Z,H]}),e[39]=Z,e[40]=H,e[41]=V):V=e[41];let $;e[42]!==V||e[43]!==E?($=t.jsxs("div",{className:"bg-token-main-surface-secondary mt-4 flex flex-col gap-1 rounded-2xl! rounded-md border-[1px] p-4",children:[E,V]}),e[42]=V,e[43]=E,e[44]=$):$=e[44];let B;e[45]!==u?(B=u.formatMessage({id:"planRenewalModal.cancel",defaultMessage:"Cancel"}),e[45]=u,e[46]=B):B=e[46];let F;e[47]!==i||e[48]!==B?(F=t.jsx(it,{title:B,color:"secondary",onClick:i}),e[47]=i,e[48]=B,e[49]=F):F=e[49];let L;e[50]!==u?(L=u.formatMessage({id:"planRenewalModal.confirm",defaultMessage:"Confirm"}),e[50]=u,e[51]=L):L=e[51];let X;e[52]!==o||e[53]!==r||e[54]!==L?(X=t.jsx(it,{title:L,color:"primary",onClick:o,loading:r}),e[52]=o,e[53]=r,e[54]=L,e[55]=X):X=e[55];let Y;e[56]!==F||e[57]!==X?(Y=t.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[F,X]}),e[56]=F,e[57]=X,e[58]=Y):Y=e[58];let C;return e[59]!==$||e[60]!==Y||e[61]!==b?(C=t.jsxs("div",{className:"px-6 pb-6",children:[b,$,Y]}),e[59]=$,e[60]=Y,e[61]=b,e[62]=C):C=e[62],C}function yn(s,e){if(!e)return{goCost:Xt.free.costRetrievalError,plusCost:Xt.free.costRetrievalError,proCost:Xt.free.costRetrievalError};const a=Te(e,ss,_.Month),n=Te(e,lt,_.Month),o=Te(e,Is,_.Month);return{goCost:rt(a.amount,ss,s),plusCost:rt(n.amount,lt,s),proCost:rt(o.amount,Is,s)}}function ls({fullPriceResumeDateFormatted:s,renewalDateFormatted:e,period:a,type:n,currencySign:o,planCost:r}){switch(["month","year"].includes(a)||zs.warn("Invalid period passed to PlanManagementModal.getPeriodFormattedMessage",{period:a}),n){case"billingStartAfterPromo":return t.jsx(g,{id:"planDowngradeModal.billingResumeAfterPromo",defaultMessage:"Billing will resume on {fullPriceResumeDateFormatted}",values:{fullPriceResumeDateFormatted:s}});case"currentSubscriptionPromo":return t.jsx(g,{id:"planRenewalModal.currentSubscriptionPromo",defaultMessage:"After the billing cycle for your current plan ends on {renewalDateFormatted}, your promotional subscription will go into effect.",values:{renewalDateFormatted:e}});case"newPlanCostAfterPromo":if(a==="month")return t.jsx(g,{id:"planDowngradeModal.newPlanCostAfterPromoMonth",defaultMessage:"{currencySign}{planCost}/month after",values:{currencySign:o,planCost:r}});if(a==="year")return t.jsx(g,{id:"planDowngradeModal.newPlanCostAfterPromoYear",defaultMessage:"{currencySign}{planCost}/year after",values:{currencySign:o,planCost:r}});break}}const Co=Object.freeze(Object.defineProperty({__proto__:null,AdjustmentSection:pn,PaymentMethodSection:hn,TotalCostSection:gn,default:mn,getPrice:yn},Symbol.toStringTag,{value:"Module"})),eo=kn(()=>Mn(()=>import("./btrwhqtnzjbkk202.js"),__vite__mapDeps([0,1])),{loading:s=>In(s)});function to({isOpen:s,onClose:e,onContinue:a,analyticsParams:n}){ce.useEffect(()=>{s&&re.logEventWithStatsig("Mobile Subscription Warning Modal Shown","chatgpt_mobile_subscription_warning_modal_shown",n)},[n,s]);const o=()=>{re.logEventWithStatsig("Mobile Subscription Warning Modal Continue Clicked","chatgpt_mobile_subscription_warning_modal_continue_clicked",n),a()},r=()=>{re.logEventWithStatsig("Mobile Subscription Warning Modal Close Clicked","chatgpt_mobile_subscription_warning_modal_close_clicked",n),e()};return t.jsx(Vt,{testId:"modal-mobile-subscription-warning",isOpen:s,onClose:r,type:"warning",icon:eo,title:t.jsx(g,S({},At.checkSubscriptionHeader)),primaryButton:t.jsx(Rs.Button,{title:At.dismissModal.defaultMessage,color:"primary",onClick:r}),secondaryButton:t.jsx(Rs.Button,{title:At.continueToNextStep.defaultMessage,color:"secondary",onClick:o}),children:t.jsx("span",{className:"gap-2 text-gray-600",children:At.checkSubscriptionBody.defaultMessage})})}const At=$e({checkSubscriptionHeader:{id:"mobileSubscriptionWarningModal.checkSubscriptionHeader",defaultMessage:"Check your App Store subscription"},checkSubscriptionBody:{id:"mobileSubscriptionWarningModal.checkSubscriptionBody",defaultMessage:"Your subscription through the Apple App Store is currently on pause due to a payment issue. Please resolve that issue to resume using ChatGPT Plus and avoid duplicate charges."},dismissModal:{id:"mobileSubscriptionWarningModal.dismissModal",defaultMessage:"Cancel"},continueToNextStep:{id:"mobileSubscriptionWarningModal.continueToNextStep",defaultMessage:"I understand, continue anyways"}});function so(){"use forget";const s=pe.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["has-app-store-subscription-in-billing-retry"],queryFn:no},s[0]=e):e=s[0],cs(e)}async function no(){return await An.safeGet("/subscriptions/has_app_store_subscription_in_billing_retry")}function ao(s,e){const a=gt(new Date,s);return new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"}).format(a)}function oo(s){"use forget";var p;const e=pe.c(10);let a,n,o,r;e[0]!==s?(p=s,{testId:r,activeColor:a,children:n}=p,o=dt(p,["testId","activeColor","children"]),e[0]=s,e[1]=a,e[2]=n,e[3]=o,e[4]=r):(a=e[1],n=e[2],o=e[3],r=e[4]);const i=a!=null?a:"primary";let l;return e[5]!==n||e[6]!==o||e[7]!==i||e[8]!==r?(l=t.jsx(ht,z(S({fullWidth:!0,size:"large",color:i,"data-testid":r},o),{children:n})),e[5]=n,e[6]=o,e[7]=i,e[8]=r,e[9]=l):l=e[9],l}function ro(s,e){const a=s.planType,n=s.getNextPlanType(),o=s.getDaysUntilPlanChanges(),r=n&&Be(n)<Be(a);return e?{daysUntilPlanChanges:s.getDaysUntilPlanRenews(),isDowngradeScheduled:!0}:{daysUntilPlanChanges:o,isDowngradeScheduled:r}}function io(s){"use forget";const e=pe.c(17),{currentAccount:a,children:n,disableForMobile:o,promoMetadata:r,planType:i,downgradeToGoDisabled:l}=s,{recentlyDowngraded:p}=un(),c=ye(),{daysUntilPlanChanges:f,isDowngradeScheduled:d}=ro(a,p),j=ce.useRef(!1),u=r!=null&&"referrer_name"in r,D=Zn(a);if(o&&D){let h;e[0]!==c?(h=c.formatMessage({id:"I2JCGZ",defaultMessage:"Mobile subscriptions are currently not eligible for this promotion."}),e[0]=c,e[1]=h):h=e[1];let x;e[2]!==u?(x=b=>{b&&!j.current&&(u&&Jn.logMobileSubscriptionTooltipOpen(),j.current=!0)},e[2]=u,e[3]=x):x=e[3];let A;return e[4]!==n||e[5]!==h||e[6]!==x?(A=t.jsx(Ot,{side:"top",sideOffset:20,label:h,onOpenChange:x,children:n}),e[4]=n,e[5]=h,e[6]=x,e[7]=A):A=e[7],A}if(l){let h;e[8]!==c?(h=c.formatMessage({id:"AccountPaymentModal.primaryCTA.downgradeToGoDisabledTooltip",defaultMessage:"Downgrading to Go is not yet available. To purchase, you must first cancel your current plan."}),e[8]=c,e[9]=h):h=e[9];let x;return e[10]!==n||e[11]!==h?(x=t.jsx(Ot,{side:"top",labelTextAlign:"left",sideOffset:20,label:h,children:n}),e[10]=n,e[11]=h,e[12]=x):x=e[12],x}if(d&&f){const h=ao(f,c.locale);let x;return e[13]!==i?(x=ms(i.toLowerCase()),e[13]=i,e[14]=x):x=e[14],t.jsx(Ot,{side:"top",sideOffset:20,label:t.jsx(g,{id:"3UZynm",defaultMessage:"Your subscription will change to {planType} on {date}.",values:{date:h,planType:x}}),children:n})}let y;return e[15]!==n?(y=t.jsx(t.Fragment,{children:n}),e[15]=n,e[16]=y):y=e[16],y}function lo(T){var I=T,{analyticsParams:s,billingDetails:e,currentAccount:a,planType:n,planLoading:o,setPlanLoading:r,testId:i,onPromoClose:l,activeColor:p,disableForMobile:c=!1,disabled:f,downgradeToGoDisabled:d=!1,loading:j=!1,overrideOnClick:u,promoCode:D,promoCampaign:m,promoMetadata:y,autoUpgrade:h=!1,fromiOSWebview:x=!1,pricingPlan:A,setShouldShowCheckoutLoadingOverlay:b,children:O}=I,w=dt(I,["analyticsParams","billingDetails","currentAccount","planType","planLoading","setPlanLoading","testId","onPromoClose","activeColor","disableForMobile","disabled","downgradeToGoDisabled","loading","overrideOnClick","promoCode","promoCampaign","promoMetadata","autoUpgrade","fromiOSWebview","pricingPlan","setShouldShowCheckoutLoadingOverlay","children"]);"use no forget";const{data:E,refetch:N}=cs(Qs),{trackSelectedPixels:R}=Yt({key:n});let k;switch(n){case v.GO:k="go-secondary";break;case v.PLUS:k="plus-secondary";break;case v.PRO:k="pro-secondary";break;case v.SELF_SERVE_BUSINESS:k="team-secondary";break;default:k=""}const{trackSelectedPixels:Z}=Yt({key:k}),H=ct(),{data:{value:V}={}}=so(),[$,B]=ce.useState(!1),[F,L]=ce.useState(!1),X=ce.useRef(null),[Y,C]=ce.useState(!1),q=ce.useRef(!1),Q=ce.useRef(new Map),J=qs(),se=ye(),ne=a.planType,xe=a.hasPaidSubscription()&&Be(n)<Be(ne),W=a.hasPaidSubscription()&&Be(n)>Be(ne),Fe=(y==null?void 0:y.plan_name)===es(n)&&(y==null?void 0:y.plan_type_change)==="equal",Pe=je(H,"3950229590"),{prepareCheckoutSession:de,navigateToCheckout:me}=Qn(),ie=a.hasPaidSubscription()&&a.isPlus(),ee=n===v.PLUS&&!ie&&Pe.get("enabled_prefetch_checkout_for_plus",!1);ce.useEffect(()=>{if(!ee)return;const le={plan_name:es(n),billing_details:e,promo_code:D,promo_campaign:m},G=JSON.stringify(le);if(Q.current.has(G))return;re.logEventWithStatsig("Account Pay: Prefetch Checkout Session","chatgpt_account_payment_modal_prefetch_checkout_session",s),Q.current.clear();const oe=Pe.get("skip_sentinel_checkout",!1),ue=de(le,{skipSentinelCheckout:oe,fromiOSWebview:x});Q.current.set(G,ue)},[s,e,x,Pe,n,de,m,D,ee]);const fe=()=>{const le={plan_name:es(n),billing_details:e,promo_code:D,promo_campaign:m},G=Q.current.get(JSON.stringify(le));if(G)return re.logEventWithStatsig("Account Pay: Using Prefetched Checkout Session","chatgpt_account_payment_modal_using_prefetched_checkout_session",s),G;re.logEventWithStatsig("Account Pay: Click to Fetch Checkout Session","chatgpt_account_payment_modal_click_to_fetch_checkout_session",s),Q.current.clear();const oe=Pe.get("skip_sentinel_checkout",!1);return de(le,{skipSentinelCheckout:oe,fromiOSWebview:x})},Ce=async({skipEmailCheck:le})=>{var G,oe;if(!(E!=null&&E.email)&&!le){C(!0);return}r(n),re.logEvent("Account Pay: Payment Checkout Clicked",s),Lt(H,"chatgpt_account_payment_modal_upgrade_button_click",n),X.current=performance.now();try{const ue=je(H,"3542930659").get("show_loading",!1);b(ue);const Ne=await fe();let Re;X.current&&(Re=performance.now()-X.current),re.logEvent("Account Pay: Navigating to Payment Checkout",z(S({},s),{url:(G=Ne.url)!=null?G:"",latency_ms:Re}));const Ie={url:String((oe=Ne.url)!=null?oe:"")};Re!==void 0&&(Ie.latency_ms=Re.toString()),Lt(H,"chatgpt_account_payment_modal_navigating_to_checkout",n,Ie),await me(Ne)}catch(ue){J.warning(se.formatMessage(ot.paymentErrorWarning),{hasCloseButton:!0}),b(!1)}r(null)},ge=({skipAppStoreSubscriptionInBillingRetryCheck:le=!1,skipEmailCheck:G=!1}={})=>{if(V&&!le)return B(!0);if(u)return u(e,s);xe||W||Fe?(re.logEvent("Account Pay: Payment Checkout Clicked",s),Lt(H,"chatgpt_account_payment_modal_upgrade_button_click",n),L(!0)):(R(),Z(),Ce({skipEmailCheck:G}))};return ce.useEffect(()=>{!h||q.current||(q.current=!0,ge())},[h]),an(Y,{plan:s}),t.jsxs(t.Fragment,{children:[t.jsx(io,{currentAccount:a,disableForMobile:c,promoMetadata:y,planType:n,downgradeToGoDisabled:d,children:t.jsx(oo,z(S({disabled:f,loading:j,onClick:()=>ge(),testId:i,activeColor:p},w),{children:o===n?t.jsx(Ks,{}):O}))}),t.jsx(to,{isOpen:$,onClose:()=>B(!1),onContinue:()=>ge({skipAppStoreSubscriptionInBillingRetryCheck:!0}),analyticsParams:s}),F&&t.jsx(mn,{isOpen:F,onClose:()=>L(!1),accountId:a.id,initialPlanType:ne,updatedPlanType:n,billingDetails:e,promoMetadata:y,promoCode:D,onPromoClose:l,fullPriceResumeDateString:A.fullPriceResumeDateString}),t.jsx(Vt,{testId:"modal-add-email",isOpen:Y,onClose:()=>C(!1),type:"success",className:"max-w-sm",children:t.jsx(tn,{enterEmailTitle:se.formatMessage(ot.addEmailTitle),enterEmailDescription:se.formatMessage(ot.addEmailDescription),onVerified:()=>{N(),C(!1),ge({skipEmailCheck:!0})},cancelFlowButton:t.jsx(ht,{className:"w-full rounded-md",color:"secondary",onClick:()=>C(!1),children:t.jsx(g,S({},ot.cancelAddEmail))})})})]})}const ot=$e({paymentErrorWarning:{id:"AccountPaymentModal.primaryCTA.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},addEmailTitle:{id:"AccountPaymentModal.primaryCTA.addEmailTitle",defaultMessage:"Email required"},addEmailDescription:{id:"AccountPaymentModal.primaryCTA.addEmailDescription",defaultMessage:"You'll be able to login with this email. It will also be used for account updates (like password resets) and information about OpenAI services."},cancelAddEmail:{id:"AccountPaymentModal.primaryCTA.cancelAddEmail",defaultMessage:"Cancel"},highDemandDisabledText:{id:"AccountPaymentModal.primaryCTA.highDemandDisabledText",defaultMessage:"Due to high demand, we've temporarily paused upgrades."}}),ts=v.PLUS;function co(s,e,a){let n=null,o=null,r=null;if(s==="plus-10-for-3-months"?(n=a.currencyConfig.promos.plus_intro_offer_3m.amount,o=a.currencyConfig.promos.plus_intro_offer_3m.type,r=3):s==="plus-10-for-12-mos"&&(n=a.currencyConfig.promos.plus_intro_offer_12m.amount,o=a.currencyConfig.promos.plus_intro_offer_12m.type,r=12),n==null||o==null||r==null)return null;let i=null;return o==="value"?i={value:n,currency_code:a.currencyConfig.symbol_code}:i={percentage:n},{plan_name:he.PLUS,title:"",summary:e.formatMessage(as.headline),discount:i,duration:{num_periods:r,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:null}}const Mo=({analyticsParams:s,className:e,currentAccount:a,planLoading:n,isPromoLoading:o,onUpgradeButtonClick:r,setPlanLoading:i,plusPricingPlan:l=null,billingDetails:p,promoCode:c=null,promoMetadata:f=null,onClose:d,disableForMobile:j=!1,type:u,shouldUseComparisonSpacing:D,autoUpgrade:m=!1,fromiOSWebview:y=!1,setShouldShowCheckoutLoadingOverlay:h})=>{"use no forget";const x=ct(),A=!Un(x),b=ye(),O=vn();let w=l||Yn({ctx:x});const{data:T,isLoading:I,error:E}=Wt({countryCode:p.country,currency:p.currency,ctx:x});if(!I&&!E&&T){const G=Te(T,lt,_.Month);w=z(S({},w),{cost:{costValue:G.amount,costTitle:rt(G.amount,lt,p.currency)}})}const N=Aa({ctx:x,shouldLogExposure:!1}),{data:R}=en(N);f==null&&(R==null?void 0:R.coupon)===N&&(R==null?void 0:R.state)==="eligible"&&Ua({ctx:x,shouldLogExposure:!0})&&T&&(T.currencyConfig.promos.plus_intro_offer_3m.enabled||T.currencyConfig.promos.plus_intro_offer_12m.enabled)&&(f=co(N,b,T),c=N);const{eligible:k,campaignId:Z}=Xn();let H;const V=new URLSearchParams(O.search).get(ea);function $(G){return G==="plus-1-month-free"?{plan_name:he.PLUS,title:"",summary:b.formatMessage(as.headline),discount:{percentage:100},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:b.formatMessage(Ge.specialOffer)}:G==="plus-10-for-1-month"?{plan_name:he.PLUS,title:"",summary:b.formatMessage(as.headline),discount:{percentage:50},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:b.formatMessage(Ge.specialOffer)}:null}if(f==null){const G=V||(k?Z:void 0);if(G){const oe=$(G);oe&&(c||(H=G),f=oe)}}const B=a.isOrWasPaidCustomer(),F=a.hasPaidSubscription(),L=F&&a.isPlus(),X=F&&a.isPro(),Y=a.getLastActiveSubscription(),C=a.features.includes("disable_plus_upgrade_ui")&&!B,q=ce.useMemo(()=>z(S({},s),{promoCode:c,promoCampaign:H,planType:ts,isUpgradeUiDisabled:C,referrer:document.referrer}),[s,c,H,C]),Q=[],J=()=>{re.logEvent("Account Portal: Click iOS Manage Subscription",q)},se=()=>{re.logEvent("Account Portal: Click Android Manage Subscription",q)},ne=L&&[Jt.CHATGPT_IOS,Jt.SORA_IOS].includes(Y.purchase_origin_platform),xe=L&&Y.purchase_origin_platform===Jt.MOBILE_ANDROID;Q.push(t.jsx(Oe,{to:ta,target:"_blank",className:"px-1 font-medium underline",children:t.jsx(g,S({},Ut.limitsApply))},"row-plus-plan-usage-limits")),ne&&Q.push(t.jsx(Oe,{to:sa,target:"_blank",onClick:J,className:"px-1 font-medium underline",children:b.formatMessage(As.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),xe&&Q.push(t.jsx(Oe,{to:na,target:"_blank",onClick:se,className:"px-1 font-medium underline",children:b.formatMessage(As.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),L&&B&&Q.push(t.jsx(Oe,{target:"_blank",to:Js,onClick:nn,className:"px-1 font-medium underline",children:t.jsx(g,S({},Ut.billingHelp))},"row-plus-plan-help-link"));const W=f!=null,Fe=(f==null?void 0:f.promotion_type)==="student_discount",Pe=f!=null&&"referrer_name"in f,de=(!L||W)&&n==null,{activeDiscountMetadata:me,scheduledAdditionalLink:ie}=Ya({currentAccount:a,intl:b,billingDetails:p,pricingPlan:w,promoMetadata:f,columnPlanType:v.PLUS});if(ie&&Q.unshift(ie),me&&(w.summary=ua.plusSummaryWithDiscount),f&&T&&!I&&!E&&(w=cn({intl:b,pricingPlan:w,promoMetadata:f,currency:p.currency,planName:v.PLUS,currentAccount:a,checkoutPricingConfig:T})),o!=null&&o)return null;let ee;W&&L&&w.callToAction.promo?ee=b.formatMessage(w.callToAction.promo):L?ee=b.formatMessage(w.callToAction.active):Pe&&A&&w.callToAction.inactiveUnauthenticated?ee=b.formatMessage(w.callToAction.inactiveUnauthenticated):ee=b.formatMessage(La({planType:v.PLUS}));let fe;L&&!W||X?fe="secondary":u==="highlight"||u==="promo"?fe="purple":(u==="standard"||Fe)&&(fe="primary");const Ce=i!=null?i:(()=>{}),ge=typeof r=="function"?(G,oe)=>r(G,oe):void 0,le=t.jsx(lo,{analyticsParams:q,billingDetails:p,currentAccount:a,planType:ts,planLoading:n,setPlanLoading:Ce,testId:"select-plan-button-plus-upgrade",onPromoClose:d,activeColor:fe,disableForMobile:j,disabled:C||!de,promoMetadata:f,promoCode:c!=null?c:void 0,promoCampaign:H,pricingPlan:w,setShouldShowCheckoutLoadingOverlay:h,autoUpgrade:m,fromiOSWebview:y,overrideOnClick:ge,children:ee});return t.jsx(fs,{planType:ts,elementId:aa,pricingPlan:w,shouldUseComparisonSpacing:D,isCheckoutPricingConfigLoading:I,checkoutPricingConfigError:E,callToActionButton:C?t.jsx("div",{className:"relative w-full",children:t.jsx(Ot,{side:"bottom",sideOffset:20,label:b.formatMessage(Ut.highDemandDisabledText),children:le})}):le,secondaryCallToActionButton:u==="promo"?t.jsx(ht,{size:"large",color:"secondary",onClick:d,children:t.jsx(g,S({},Ut.notNow))}):null,additionalLinks:Q,type:u,promoMetadata:f,activeDiscountMetadata:me,billingDetails:p,className:e})},Ut=$e({billingHelp:{id:"AccountPaymentModel.billingHelp",defaultMessage:"I need help with a billing issue"},limitsApply:{id:"xda4i3",defaultMessage:"Limits apply"},notNow:{id:"AccountPaymentModal.notNow",defaultMessage:"Not Now"},highDemandDisabledText:{id:"AccountPaymentModal.highDemandDisabledText",defaultMessage:"Due to high demand, we've temporarily paused upgrades."}}),nt=v.SELF_SERVE_BUSINESS,vo=({analyticsParams:s,planLoading:e,billingDetails:a,type:n=ft.standard,shouldUseComparisonSpacing:o,shouldUseOnboardingFeatures:r,className:i,cta:l,currentAccount:p,promoCode:c,promoMetadata:f,onProceed:d,setShouldShowCheckoutLoadingOverlay:j})=>{const{trackSelectedPixels:u}=Yt({key:nt}),{trackSelectedPixels:D}=Yt({key:"team-secondary"}),m=ct(),{data:y,refetch:h}=cs(Qs),{data:x,isLoading:A,error:b}=Wt({countryCode:a.country,currency:a.currency,ctx:m}),O=ye(),w=Ln(m),T=En(),I=Zs(),[E,N]=ce.useState(!1),R=w==null?void 0:w.isSelfServeBusiness(),k=w==null?void 0:w.isPlus(),Z=z(S({},s),{planType:nt}),H=!!(y!=null&&y.email),V=je(m,"111733276").get("show_upgrade_page_v2_copy",!1),$=je(m,"1656913255").get("outcome_value_props_enabled",!1),B=oa();let F=Gn({isBusinessUpgradeV2CopyEnabled:V,shouldUseOnboardingFeatures:r,isTrialEnabled:B.eligible,isOutcomeValuePropsEnabled:$});if(!A&&!b&&x){const ee=Te(x,mt,_.Year);F=z(S({},F),{cost:z(S({},F.cost),{costValue:ee.amount,costTitle:rt(ee.amount,mt,a.currency)})})}const L=pa(),X=c?"":L!=null?L:"",{data:Y}=en(X),C=Y!=null?Y:B.eligible?{coupon:B.campaignId,state:"eligible",redemption:null}:void 0;let q=!1;const Q=C&&os(C==null?void 0:C.coupon)&&(C==null?void 0:C.state)==="eligible";let J=null;!A&&x&&(J=ra(x,"business_one_dollar"),q=J!==void 0&&J.enabled&&(C==null?void 0:C.coupon)===Bt&&(C==null?void 0:C.state)==="eligible");let se=f!=null?f:null,ne=!1;if(c&&se&&x&&!A&&!b){const ee=Te(x,mt,_.Month);F=z(S({},F),{cost:z(S({},F.cost),{costValue:ee.amount,costTitle:rt(ee.amount,mt,a.currency)})}),F=cn({intl:O,pricingPlan:F,promoMetadata:se,currency:a.currency,planName:v.SELF_SERVE_BUSINESS,currentAccount:p,checkoutPricingConfig:x}),ne=!0}else!se&&(q||Q)&&(se={plan_name:"chatgptteamplan",title:"",summary:"",discount:{value:0,currency_code:"USD"},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:O.formatMessage(Ge.specialOffer)});q&&!ne?J&&J.enabled&&J.amount&&J.cost_message&&(F=z(S({},F),{cost:z(S({},F.cost),{costValue:J.amount,costTitle:{id:"promo.businessOneDollar.cost",defaultMessage:J.cost_message,description:"Cost label for business1dollar promo. Shows the amount followed by an asterisk with no currency symbol."},costDuration:at.promoCostDuration}),disclaimer:at.team1dollarPromoDisclaimer})):Q&&!ne&&(F=z(S({},F),{cost:z(S({},F.cost),{costValue:0,costTitle:He.promoCost,costDuration:He.promoCostDuration}),disclaimer:He.teamFreeTrialPromoDisclaimerWithPerSeatMonthlyPrice}));const{selectedPlan:xe,numSeats:W}=ga({promoData:C}),{handleBusinessCheckoutRedirect:Fe}=ha({billingDetails:a,promoData:C}),Pe=ia(),[de,me]=ce.useState(!1),ie=async ee=>{var ge;if(!H&&!ee){N(!0);return}if(re.logEvent("Account Pay: Payment Checkout Clicked",Z),Lt(m,"chatgpt_account_payment_modal_upgrade_button_click",nt),!ne&&!C&&!Pe&&je(m,"3950229590").get("enabled_custom_checkout_for_team",!1)){const oe=!!j&&je(m,"3542930659").get("show_business_loading",!1);try{me(!0),j==null||j(oe),u(),D(),await Fe(xe,W,!0)}catch(ue){Gt.addError("Could not create business checkout session",{error:ue})}finally{me(!1),oe&&(j==null||j(!1))}return}const Ce=(ge=new URLSearchParams(window.location.search).get("referrer"))!=null?ge:document.referrer;On.setPurchaseWorkspaceData({minimumSeats:I,billingDetails:a,promoData:(C==null?void 0:C.state)==="eligible"&&!ne?C:void 0,promoMetadata:ne?se:null,promoCode:c!=null?c:void 0,referrer:Ce}),ca(T),d&&d()};return an(E,{plan:Z}),t.jsxs(t.Fragment,{children:[t.jsx(fs,{planType:nt,className:Se(i,"md:max-w-117"),elementId:la,pricingPlan:F,promoData:C,promoMetadata:se,type:n,shouldUseComparisonSpacing:o,isBusinessUpgradeV2CopyEnabled:V,isCheckoutPricingConfigLoading:A,checkoutPricingConfigError:b,hasEnabledTeam1DollarCoupon:q,hasEnabledTeamFreeTrialCoupon:Q,useRecommendedBadge:n===ft.highlight,callToActionButton:t.jsxs("div",{className:"flex flex-col gap-2",children:[R&&n!==ft.promo&&t.jsx(Ys,{planType:nt,isCurrentPlan:!0,disabled:e!=null||R,onClick:()=>ie(),testId:"select-plan-button-teams-upgrade",children:O.formatMessage(F.callToAction.active)}),l!=null?l:t.jsx(Ys,{className:"w-full",planType:nt,disabled:e!=null,loading:de,activeColor:n===ft.highlight?"purple":void 0,onClick:()=>ie(),testId:"select-plan-button-teams-create",children:R||k?O.formatMessage(F.callToAction.create):O.formatMessage(F.callToAction.inactive)})]}),billingDetails:a}),t.jsx(Vt,{testId:"modal-add-email",isOpen:E,onClose:()=>N(!1),type:"success",className:"max-w-sm",children:t.jsx(tn,{enterEmailTitle:O.formatMessage(ot.addEmailTitle),enterEmailDescription:O.formatMessage(ot.addEmailDescription),onVerified:async()=>{N(!1),await h(),ie(!0)}})})]})};export{pn as A,So as F,to as M,hn as P,Ys as S,gn as T,yn as a,Mo as b,rs as c,vo as d,ro as e,an as f,is as g,nn as h,fs as i,La as j,ao as k,mn as l,ot as m,Be as n,cn as o,Ya as p,lo as q,ft as r,sn as s,Co as t,un as u};
//# sourceMappingURL=dafjbmsuxh1m33um.js.map
