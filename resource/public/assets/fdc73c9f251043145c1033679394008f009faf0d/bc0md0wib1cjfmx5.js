import{h as q,r as a,j as e,f as A}from"./juy90og0wtbp77qa.js";import{bC as L,bD as y,bE as _,bF as H,bG as B,bH as h,bI as i,bJ as O,bK as Q,bL as z,bM as J,bN as K,bO as V,bP as W,bQ as Y,bR as Z,bS as X}from"./kax7wcp9i7f7jtvz.js";import{I as $}from"./ghzyx04jxko7zqcu.js";import{u as ee}from"./fzazeczfeeq2yus7.js";import"./or7jf62i5kvok6pm.js";import"./g1mzshmp15rgsy0r.js";import"./mj9z9iuqobsziv2h.js";import"./g0j29k77kzjbz76f.js";import"./ocpfit0g1gfti5z4.js";import"./kwrsfo4prmlqgo0w.js";import"./6l5wykugon65myc6.js";import"./fgnsrp7wj3i83g7e.js";import"./klzyif2r6c67lyfu.js";import"./osl7p7pfd29pg5qh.js";import"./khey9wv8trxtr5w5.js";const D=A({thumbsUp:{id:"Qz8Wa6",defaultMessage:"Like this image"},thumbsDown:{id:"sUGtRy",defaultMessage:"Dislike this image"}}),ae=t=>H({pointer:{url:t.url,asset_pointer:t.assetPointer??"",metadata:{dalle:{gen_id:t.transformationId??void 0},generation:{gen_id:t.transformationId??void 0}},width:t.width,height:t.height},conversationId:t.conversationId,messageId:t.messageId??"",source:"chat"}),fe=({images:t,initialIndex:f,onClose:I,onRequestCompletion:j,clientThreadId:k,currentModelId:S})=>{const n=q(),M=L(),[r,x]=a.useState(null),[d,g]=a.useState(null),[N,R]=a.useState(f),[u,m]=a.useState("default"),o=ee(),w=a.useRef(null),b=a.useRef(o);a.useEffect(()=>{b.current=o},[o]);const F=a.useCallback(l=>{g(null),x(null),R(l),m("default"),b.current.clearAllDrawings()},[]),v=a.useCallback(()=>y(n),[n]),c=a.useCallback((l,p)=>{!p||r!=null||(_.imageRated({liked:l,analyticsContext:ae(p)}),x(l),l||g(p))},[r]),s=t[N],C=a.useCallback(()=>{m("default"),b.current.clearAllDrawings()},[]),T=a.useCallback(()=>{c(!0,s)},[c,s]),U=a.useCallback(()=>{!s||r!=null||c(!1,s)},[c,s,r]),E=a.useCallback(()=>{s&&m("inpaint")},[s]),G=a.useCallback(()=>{s&&B({url:s.url,fileName:v()})},[s,v]),P=a.useCallback(()=>w.current?.getImageData(),[]);return e.jsxs(e.Fragment,{children:[e.jsxs(h.Root,{images:t,initialIndex:f,onClose:I,onIndexChange:F,inpaintingProps:{mode:u,drawingState:o,drawingCanvasRef:w},children:[e.jsx(h.LightboxHeaderActions,{children:u==="inpaint"?e.jsxs("div",{className:"grid grow grid-cols-[1fr_auto] items-center gap-2",children:[e.jsx("div",{className:"text-center font-semibold",children:n.formatMessage({id:"TjVqYb",defaultMessage:"Edit Selection"})}),e.jsxs("div",{className:"flex gap-1 justify-self-end md:gap-2",children:[e.jsx(i,{className:"aspect-square",icon:O,onClick:o.undoDrawing,disabled:!o.canUndoDrawing,"aria-label":n.formatMessage({id:"OmaTPx",defaultMessage:"Undo"})}),e.jsx(i,{className:"aspect-square",icon:Q,onClick:o.redoDrawing,disabled:!o.canRedoDrawing,"aria-label":n.formatMessage({id:"ZUr4oh",defaultMessage:"Redo"})}),e.jsx(i,{className:"w-auto px-3",onClick:C,children:n.formatMessage({id:"D9xvar",defaultMessage:"Cancel"})})]})]}):e.jsxs("div",{className:"flex gap-1 md:gap-2",children:[r!==!1&&e.jsx(i,{className:"aspect-square",icon:r===!0?z:J,onClick:T,"aria-label":n.formatMessage(D.thumbsUp)}),r!==!0&&e.jsx(i,{className:"aspect-square",icon:r===!1?K:V,onClick:U,"aria-label":n.formatMessage(D.thumbsDown)}),e.jsx(i,{className:"aspect-square",icon:W,onClick:E,"aria-label":n.formatMessage({id:"pRGwlp",defaultMessage:"Edit image"})}),e.jsx(i,{className:"aspect-square",icon:Y,onClick:G,"aria-label":n.formatMessage({id:"9DNHka",defaultMessage:"Download image"})}),M()&&s?.messageId&&e.jsx(Z,{assetPointer:s.assetPointer,serverThreadId:s.conversationId,messageId:s.messageId})]})}),e.jsx(h.Footer,{children:e.jsx($,{clientThreadId:k,currentModelId:S,onRequestCompletion:j,onClose:I,activeImage:s,inpainting:u==="inpaint"&&o.currentDrawnShape!=null,currentDrawnShape:o.currentDrawnShape,getImageData:P,onCancelInpaint:C})})]}),d&&e.jsx(X,{messageId:d.messageId??"",serverThreadId:d.conversationId,rating:r,onClose:()=>g(null)})]})};export{fe as ImageGenConversationLightboxNew};
//# sourceMappingURL=bc0md0wib1cjfmx5.js.map
