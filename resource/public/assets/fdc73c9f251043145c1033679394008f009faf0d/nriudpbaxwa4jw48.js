import{j4 as I,eg as R,fp as E,$ as M,aT as g,au as F,iZ as B,dL as A}from"./or7jf62i5kvok6pm.js";import{P as D,p as H,e as L,r as o,u as N,j as e}from"./juy90og0wtbp77qa.js";import{r as O,t as T,a as p,u as _,s as $,C as y,b as k,g as j,T as Q,c as q,d as K}from"./kax7wcp9i7f7jtvz.js";import{g as G,C as V}from"./j04dc36aebpkc785.js";import{T as W,C as Z}from"./b105g7tl313ahfws.js";import{C as P,T as z}from"./m1bl3buhy9pj3b6o.js";import{C as J}from"./g1mzshmp15rgsy0r.js";import"./f5uxfkqdhg7743lt.js";import"./m25k63thq2ae6gnq.js";import"./jxnsuo98r1og4iiw.js";import"./o2ytnx73j53uwl1g.js";import"./jy1u8exw8iz2slve.js";import"./f76gy0b8ieo4s693.js";import"./gy64pge8qevmvg7e.js";import"./mia7txooqhkpbw7w.js";import"./mj9z9iuqobsziv2h.js";import"./gsxaafvs8bixhf19.js";import"./mdssvkl8pmfzfzqu.js";import"./fzjh1zjd0g21dis4.js";import"./fycipmzaujh6mznx.js";import"./okgy2jcnkx7iko44.js";import"./krjedegvrg2pxhs7.js";import"./e4rec4ry83perprj.js";import"./lrxmyjytlt96vz0w.js";import"./ejiu40t686c7js51.js";import"./tris1w87g35jhk1n.js";import"./kcsd6vktfrkucv9s.js";import"./nc631yunytu8n0fx.js";import"./l0ojckr7ctyz3k3l.js";import"./cthaea829w6zpbcu.js";import"./m2ly71nz794qjc4q.js";import"./klzyif2r6c67lyfu.js";import"./pc2givv05uuq8g6l.js";import"./hdclltxvbgzx8xl8.js";import"./bp3e26benx61nzb4.js";import"./b6vbevykvjt8za99.js";import"./osl7p7pfd29pg5qh.js";import"./m4hnvgp7gphpktn6.js";import"./mq5kqcvga15eqze5.js";import"./bk8slwxjkdlmxjxm.js";import"./ifj9ijd0co13aaf7.js";import"./m36qabefvxegdn1g.js";import"./beq9ghaom4x8xa0j.js";import"./on0kcnmks7o53xta.js";import"./g0j29k77kzjbz76f.js";import"./ocpfit0g1gfti5z4.js";import"./kwrsfo4prmlqgo0w.js";import"./6l5wykugon65myc6.js";import"./fgnsrp7wj3i83g7e.js";import"./khey9wv8trxtr5w5.js";import"./ndqdq30cq8lae3qb.js";import"./mevzpwnt01gt592f.js";import"./eyf4rqe5yc1g1un1.js";const Ue=()=>(O(),null),Xe=I(function(){const r=D(),[s]=H(),l=L(),u=T(r.conversationId),n=p(s.get("readonly"),!1),c=p(s.get("isFullScreen"),!1),d=p(s.get("header"),!0),m=p(s.get("appPreview"),!1),i=R(),C=E(),b=p(s.get("hideBottomComposer"),!!n),a=T(r.canmoreId),t=u,f=_();o.useEffect(()=>{$({type:y.Textdoc,textdocId:a})},[a]),k(t,{kind:M.PrimaryAssistant});const h=N();if(o.useEffect(()=>(g.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),g.releaseThread(t)}),[t,h]),o.useEffect(()=>{a||l("/")},[a,l]),o.useEffect(()=>{j().sendMessage({type:P.Loaded})},[a]),!a||f?.type!==y.Textdoc)return null;const w=()=>{j().sendMessage({type:P.Close})},S=n&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(F,{clientThreadId:t,children:e.jsx(J,{clientThreadId:t,children:e.jsx(Q,{clientThreadId:t,children:m?e.jsx(B,{children:e.jsx(U,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(W,{clientThreadId:t,disableScroll:!i,textdocId:f.textdocId}),e.jsx(Z,{})]}):e.jsx(z,{isEmbedded:!0,hideRunCode:!i,isFullScreen:c,hideHeader:!d,hideBottomComposer:b,isReadonlyFromQueryParam:n,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:w},"textdocContent")})})})]})}),U=({textdocId:x})=>{const r=o.useRef(null),s=q(x),[l,u]=o.useState(!1),n=s?.versions??[],c=A(n),d=o.useCallback(K(async m=>{const i=G(m.type,m.content);if(r.current&&(i==="react"||i==="html")){u(!0);const v=r.current.evalAsync({language:i,code:m.content});for await(const C of v)console.debug(C)}u(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(V,{visuallyHidden:!l,ref:r,enableTransition:!0,title:""})};export{Ue as clientLoader,Xe as default};
//# sourceMappingURL=nriudpbaxwa4jw48.js.map
