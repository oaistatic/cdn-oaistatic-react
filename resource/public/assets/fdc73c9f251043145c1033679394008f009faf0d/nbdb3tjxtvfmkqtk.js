import{j as e,M as F,r as n,A as B}from"./juy90og0wtbp77qa.js";import{ar as j,e_ as M,bd as O,gS as P,dE as R,hH as W,l as G}from"./or7jf62i5kvok6pm.js";import{bP as L,eq as V,dF as q,er as z,es as H,dc as K,et as X,eu as J}from"./kax7wcp9i7f7jtvz.js";import{u as Q,R as Y}from"./klzyif2r6c67lyfu.js";import"./g1mzshmp15rgsy0r.js";import"./mj9z9iuqobsziv2h.js";const Z=({pressed:t,onClick:r})=>{const i=e.jsx("div",{className:"[display:var(--force-hide-label)] ps-1 pe-1 whitespace-nowrap",children:e.jsx(F,{id:"0MS4cd",defaultMessage:"Selection"})});return e.jsxs("div",{className:j("radix-state-open:bg-black/10 inline-flex max-h-9 min-h-9 rounded-full border text-[13px] font-medium",{"text-token-text-secondary":!t,"border-transparent bg-[#DAEEFF] text-blue-400 hover:bg-[#BDDCF4] dark:bg-[#2A4A6D] dark:text-[#48AAFF] dark:hover:bg-[#1A416A]":t,"border-token-border-default hover:bg-tertiary focus-visible:outline-black dark:hover:bg-gray-700 dark:focus-visible:outline-white":!t}),children:[e.jsxs("div",{className:"flex h-full min-w-8 cursor-default flex-row items-center justify-center p-2 select-none","aria-pressed":t,children:[e.jsx(L,{className:"h-5 w-5 pe-1"}),i]}),e.jsx("button",{className:"flex h-full min-w-8 flex-row items-center justify-center border-s border-blue-400/10 p-2","aria-pressed":t,onClick:r,children:e.jsx(M,{className:"h-4 w-4"})})]})},$=.0025,oe=n.forwardRef(function({type:r,placeholder:i,state:s,renderFiles:k,leftSideActions:N,onSubmit:x,inputState:m,composerController:a,clientThreadId:u,gizmoId:p,disableReason:f},I){const{isInpainting:l,onCancelInpaint:y}=V(),{isUnauthenticated:o}=O(),A=q(),g=z(),[h,b]=n.useState(!1);n.useEffect(()=>{P()||a.focus()},[A,a]);const E=d=>{ee({target:d.target,rootId:"composer-background",additonalInteractiveIds:["reply-regions"]})||a.focus()};n.useEffect(()=>R(document,{keydown:d=>{d.key==="Enter"&&g&&o&&b(!0)}}),[g,o]);const c=n.useMemo(()=>e.jsx(H,{inputState:m,state:s,onSubmit:x,composerController:a,clientThreadId:u,gizmoId:p,disableReason:f}),[m,s,x,a,u,p,f]),S=n.useCallback(()=>o?e.jsx(W,{triggerButton:e.jsx("div",{children:c}),sideOffset:0,alignOffset:0,open:h,onOpenChange:b,children:e.jsx(K,{location:"chatgpt-imagen-composer",statsig_login_event:"chatgpt_imagen_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_imagen_composer_upsell_signup_button_clicked"})}):c,[o,h,c]),{whisperControls:T,waveContainerRef:C}=Q({composerController:a,renderInComposer:S,composerType:"imagegen"}),{controlsDisabled:v,waveformData:_,waveWidth:U}=G(a.store),w=e.jsx(Y,{composerController:a,placeholder:i},"userInput"),D=l||v;return e.jsx(X,{id:"composer-background",ref:I,className:j("border-token-border-xlight flex w-full cursor-text flex-col rounded-3xl border-s border-e border-t duration-150 ease-in-out contain-inline-size motion-safe:transition-[color,background-color,border-color,text-decoration-color,fill,stroke,box-shadow,bottom] dark:border-none dark:shadow-none",r!=="temporary"&&"shadow-[0_9px_9px_0px_rgba(0,0,0,0.01),_0_2px_5px_0px_rgba(0,0,0,0.06)] has-focus:shadow-[0_2px_12px_0px_rgba(0,0,0,0.04),0_9px_9px_0px_rgba(0,0,0,0.01),0_2px_5px_0px_rgba(0,0,0,0.06)]",r!=="temporary"&&"bg-token-main-surface-primary dark:bg-[#303030]",r==="temporary"&&"dark bg-[#303030]"),onClick:E,style:{viewTransitionName:"var(--vt-composer)"},children:e.jsx("div",{className:"px-1 py-1",children:e.jsxs(e.Fragment,{children:[k,e.jsx(B,{initial:!1,children:e.jsxs("div",{className:"flex flex-col justify-start",children:[D&&e.jsx("div",{className:"mx-1 flex flex-row pt-1",children:v?_&&e.jsx(J,{waveform:_,containerWidth:U,scaleFactor:10,initialValue:$}):e.jsx("div",{className:"mx-2 max-h-12 grow overflow-x-auto",children:w})}),e.jsx("div",{className:"flex min-h-[44px] items-center ps-1",ref:C,children:e.jsx("div",{className:"max-w-full min-w-0 flex-1",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-x-1.5",children:[e.jsxs("div",{className:"text-token-text-primary me-3 flex shrink gap-x-1.5",id:"imagegen-left-actions",children:[N,l&&e.jsx(Z,{pressed:!0,onClick:()=>y()})]}),!l&&e.jsx("div",{className:"mx-2 max-h-16 grow overflow-x-auto",children:w}),e.jsx("div",{className:"flex shrink gap-x-1.5 justify-self-end pe-2",id:"imagegen-voice-controls",children:T})]})})})]})})]})})})});function ee({target:t,rootId:r,additonalInteractiveIds:i}){let s=t;for(;s&&s!=null;){if(s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable||i.includes(s.id))return!0;if(s.id===r)return!1;s=s.parentElement}return!1}export{oe as ImageGenComposer};
//# sourceMappingURL=nbdb3tjxtvfmkqtk.js.map
