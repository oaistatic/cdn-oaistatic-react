import{j as e,u as N,a as b,f as F,M as p}from"./juy90og0wtbp77qa.js";import{g7 as w,ag as v,R as h,ar as E,fK as R,dF as q,a5 as M,kc as O,h8 as P,kd as B,du as I,dv as U}from"./or7jf62i5kvok6pm.js";import{c as K}from"./d7cai2wdm2q3cebf.js";function C(){return e.jsx(w,{className:"icon-sm text-token-text-tertiary ms-1"})}function S({onChange:t,enabled:s,Icon:a,label:n,labelValues:u,description:o,onClickInfo:r,tooltip:i,tooltipValues:d,hasPadding:m=!0,className:x,disabled:c=!1,messageAfterTooltip:l=void 0}){return e.jsx(K,{className:E("justify-start",m?"py-6":"py-0",x),children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(R,{label:"",disabled:c,enabled:s,onChange:t}),e.jsxs("p",{className:"text-md inline-flex items-center",children:[a&&e.jsx(a,{className:"icon me-1.5"}),n&&e.jsx(p,{...n,values:u}),i&&e.jsx(q,{interactive:!0,label:e.jsx(p,{...i,values:d}),side:"top",children:r?e.jsx("button",{className:"block h-full",onClick:r,children:e.jsx(C,{})}):e.jsx(C,{})}),l&&e.jsx("span",{className:"text-token-text-secondary ps-1 text-sm",children:e.jsx(p,{...l})})]})]}),o&&e.jsx("span",{className:"text-token-text-secondary ms-14 text-sm",children:e.jsx(p,{...o})})]})})}function z({workspaceId:t,Icon:s,label:a,description:n,onClickInfo:u,feature:o,value:r,tooltip:i,hasPadding:d=!0,className:m,disabled:x=!1,overrideDisplayValue:c=void 0,messageAfterTooltip:l=void 0}){const j=v(),_=N(),{variables:g,mutate:y}=b({mutationFn:({feature:f,enabled:T})=>h.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:f,value:T}}),onSettled:()=>{_.invalidateQueries({queryKey:["workspace-settings",t]})},onError:()=>{j.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_beta_feature_toggle_row"})}});return e.jsx(S,{onChange:f=>{y({feature:o,enabled:f})},enabled:c??g?.enabled??r,Icon:s,label:a,description:n,tooltip:i,hasPadding:d,className:m,disabled:x,messageAfterTooltip:l,onClickInfo:u})}function D({connectorId:t,workspaceId:s,Icon:a,label:n,tooltip:u,tooltipValues:o,messageAfterTooltip:r,description:i,labelValues:d,disabled:m}){const x=v(),c=N(),l=M(),{enabled:j,isLoading:_}=O(t,P.ADMIN_SETTING),{variables:g,mutate:y}=b({mutationFn:f=>h.safePost("/accounts/{account_id}/connectors/{connector_id}/workspace_permissions",{parameters:{path:{account_id:s,connector_id:t}},requestBody:{enabled:f}}),onSettled:()=>{c.invalidateQueries({queryKey:B(l?.normalizedAccountUserId)}),t===I[U.GITHUB_CONNECTOR]&&!g&&c.invalidateQueries({queryKey:["workspace-settings",s]})},onError:()=>{x.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_platform_connector_toggle_row"})}});return e.jsx(S,{onChange:y,enabled:g??!!j,Icon:a,label:n,labelValues:d,disabled:_||m,tooltip:u,tooltipValues:o,messageAfterTooltip:r,description:i})}const k=F({featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});export{z as B,C as S,D as W};
//# sourceMappingURL=o46sfe3way0l9cb8.js.map
