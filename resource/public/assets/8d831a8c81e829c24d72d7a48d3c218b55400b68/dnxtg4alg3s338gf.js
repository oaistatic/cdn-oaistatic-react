import{r as k,j as s,aw as _,M as G,au as b}from"./n1tvutderx19k1zs.js";import{eT as H,U as P,e9 as y,cp as U,dW as E,eU as I,eV as A,cq as D,cF as R,eW as q,eX as O,eY as W,eZ as B,e_ as K,cA as $,dR as V,e$ as j,f0 as w,f1 as X}from"./c87uv1mutc86tiqk.js";import{au as Y,r as Z,s as J,gu as Q,d as x,b9 as z,ak as ee,K as N,gv as se,c6 as C,aw as te,bq as ae}from"./efuue3ezs0mj4ucx.js";import{a as re,b as ne,t as ie}from"./d995zjnlydagrugw.js";function T(){const{store:e}=H(),i=e.useSharedProps(),a=re(),{clearSystemHintModeTrigger:n,getSystemHintModeTrigger:o}=ne(),{value:t}=Y("1988730211");return k.useCallback(async(r,c,l)=>{if(!i)return;const{clientThreadId:d,onCreateNewCompletion:m,onResetState:p,conversationMode:f}=i;P.hideThreadHeader();const u=a.has(y.Search),g=u?o(y.Search):void 0,S=Z(d),{systemHints:v,extraStreamParams:h}=t?U(Array.from(a)):{systemHints:Array.from(a),extraStreamParams:{}};await m({content:E(r),eventMetadata:{eventSource:"mouse"},extraStreamParams:h,completionMetadata:{suggestions:c,suggestion:r,suggestionIndex:l,conversationMode:f??S?.mode,systemHints:v,searchSource:g},messageMetadata:{is_starter_prompt:!0,suggestion_type:r.type,starter_prompt_id:"id"in r?r.id:void 0}});const L=J.getMessageId(S);p(),I(r,l,d,L),Q()||ie(),g&&u&&n(y.Search)},[i,a,o,t,n])}function ge({clientThreadId:e}){const{isUnauthenticated:i}=z(),a=!i,n=ee(e),o=N(e,h=>h?.isLoading),t=se(),r=C(),c=T(),l=N(e,h=>h?.modelId??D),d=R(l),{promptStarters:m,isSuccess:p,isError:f}=q(n&&!o,e,r?2:4,void 0,void 0,l??void 0),u=m&&m?.length>0,g=p&&u&&a&&!d,{layer:S}=te("4031588851"),v=S.get("is_two_line",!1);return s.jsx(s.Fragment,{children:s.jsx(_,{children:(f||p)&&s.jsxs(s.Fragment,{children:[s.jsx(ae,{className:`h-12 w-12 ${a?"":"max-sm:hidden"}`}),g&&s.jsx(oe,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},promptStarters:m,onSelectStarterPrompt:c,isSendBlocked:t,clientThreadId:e,isTwoLine:v}),!u&&a&&!d&&s.jsx(M,{}),d?s.jsx(O,{}):null,f&&a&&s.jsx(M,{})]})})})}function M(){return s.jsx("div",{className:"mt-7 text-3xl",children:s.jsx(G,{id:"24tuqq",defaultMessage:"Hi, how can I help?"})})}function oe({promptStarters:e,onSelectStarterPrompt:i,isSendBlocked:a,clientThreadId:n,isTwoLine:o,...t}){return k.useEffect(()=>{W(e,n)},[n]),s.jsx(s.Fragment,{children:o?s.jsx(b.div,{...t,className:"absolute bottom-6 w-full px-4",children:s.jsx(B,{children:s.jsx(ce,{starterPrompts:e,onSelectStarterPrompt:i,disabled:a})})}):s.jsx(b.div,{...t,children:s.jsx(F,{starterPrompts:e,onSelectStarterPrompt:i,disabled:a})})})}const le=/\s/;function F({starterPrompts:e,onSelectStarterPrompt:i,disabled:a,cssMobileDisplayLimit:n,marginOverride:o}){let t=e.map((r,c)=>{let l=r.oneliner??r.title;l===""&&(l=r.body);const d=le.test(l);return s.jsxs("button",{className:x(n!==void 0&&c>=n&&"max-sm:hidden","relative flex w-40 flex-col gap-2 rounded-2xl border border-token-border-light px-3 pb-4 pt-3 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed"),disabled:a,onClick:()=>i(r,e,c),children:[s.jsx(A,{category:r.category}),s.jsx("div",{className:x("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",d?"break-word":"break-all"),children:l})]},r.id??c)});if(t.length>2){const r=Math.floor(t.length/2);t=[t.slice(0,r),t.slice(r)].map((c,l)=>s.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:c},l))}return s.jsx("div",{className:x("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",o??"mt-12"),children:t})}function ce({starterPrompts:e,onSelectStarterPrompt:i,disabled:a}){let n=e.map((t,r)=>s.jsx("button",{className:"relative whitespace-nowrap rounded-2xl border border-token-border-light px-4 py-2 text-start align-top text-[15px] shadow-xxs transition enabled:hover:bg-token-main-surface-secondary disabled:cursor-not-allowed",disabled:a,onClick:()=>i(t,e,r),children:s.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.title&&s.jsx("div",{className:"truncate font-semibold",children:t.title}),s.jsx("div",{className:x("truncate font-normal",t.title?"opacity-50":""),children:t.body})]})},t.id??r));const o=Math.floor(n.length/2);return n=[n.slice(0,o),n.slice(o)].map((t,r)=>s.jsx("div",{className:"flex flex-col gap-2",children:t},r)),s.jsx("div",{className:"grid w-full grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-2",children:n})}function Se({gizmo:e,hideOwner:i=!1,children:a,className:n,avatarClassName:o,showStarterPrompts:t=!1,disableStarterPrompts:r=!1}){return e==null?null:s.jsx(s.Fragment,{children:s.jsxs("div",{className:x("flex h-full flex-col items-center justify-center text-token-text-primary","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",n),children:[s.jsx(de,{gizmo:e,avatarClassName:o}),s.jsx(me,{gizmo:e,hideOwner:i,showStarterPrompts:t,disableStarterPrompts:r}),a]})})}function de({gizmo:e,avatarClassName:i}){const a=!!(e!=null&&K(e)&&e?.gizmo.tags?.includes($.FirstParty));return s.jsx("div",{className:"relative",children:s.jsx(V,{isFirstParty:a||!e,src:e!=null&&j(e)?e.profilePictureUrl:e?.gizmo.display.profile_picture_url,className:x("mb-3 h-12 w-12",i)})})}function xe({gizmo:e,disabled:i}){const a=X(e),n=T(),o=C();if(a==null||a.length===0)return null;const t=a.slice(0,o?2:4);return s.jsx(F,{starterPrompts:t,onSelectStarterPrompt:n,disabled:i})}function me({gizmo:e,hideOwner:i,showStarterPrompts:a,disableStarterPrompts:n}){const o=e!=null&&j(e)?e.name:e?.gizmo.display.name,t=e!=null&&j(e)?e.description:e?.gizmo.display.description;return s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"text-center text-2xl font-semibold",children:o}),!i&&s.jsx("div",{className:"flex items-center gap-1 text-token-text-tertiary",children:s.jsx(s.Fragment,{children:e&&j(e)?s.jsx(w,{gizmo:e}):s.jsx(w,{gizmo:e,socials:e.gizmo.author.display_socials})})}),t&&s.jsx("div",{className:"max-w-md text-center text-sm font-normal text-token-text-primary",children:t}),a&&s.jsx(xe,{gizmo:e,disabled:n})]})}export{Se as G,de as L,ce as S,ge as a,T as u};
//# sourceMappingURL=dnxtg4alg3s338gf.js.map
