import{c as I,j as e,r as c,M as m,a as te,b as re,e as H,d as ne}from"./n1tvutderx19k1zs.js";import{d as B,j as W,B as T,bf as G,bd as oe,ac as K,by as ie,b_ as le,bw as ce,dI as de,bY as pe,bo as A,a7 as V,gM as me,eA as $,a9 as ue,dm as xe,bJ as fe}from"./efuue3ezs0mj4ucx.js";import{iy as ge,iz as ve,iA as he,iB as ke,I as we,H as N,iC as y,U,bE as je,cU as O,cR as R,hu as be,iD as Me,fD as Ce,iE as ye,cl as Ne,iF as Ae,iG as Se,i7 as Le,bJ as F,cV as Pe,fo as Ue,fs as Ie,aH as We,gD as De,gr as Ee}from"./c87uv1mutc86tiqk.js";import{S as Be,c as Re}from"./oqdx4hpmwxvfh9gy.js";import{d as He,a as Te}from"./k081xtl7qxstenxt.js";import{S as Ve}from"./ngn9hyh36iu8kqm0.js";import{S as Fe}from"./oy248fbbcvutqmly.js";import{S as ze}from"./hau51huxh66v0dxz.js";import{g as J}from"./jy24clh9s5sbm6a3.js";import{d as _e}from"./chu2aivt0fxgmd6m.js";function Ze({onFileChange:a,className:n,message:s,mimeTypes:o}){const t=I(),r=s??t.formatMessage(Y.helpText),i=S=>{if(S.length>0){const L=S[0];o&&o.includes(L.type)&&a(L)}},{open:p,getRootProps:x,getInputProps:M,isDragActive:k}=ge({disabled:!1,noClick:!0,onDropAccepted:i,onDropRejected:()=>null,multiple:!1,maxSize:ve,...he(o)});return e.jsxs("div",{className:B("flex flex-col content-center justify-center gap-3 rounded-xl border border-dashed px-6 py-16 text-center",k?"border-green-600 bg-green-600 bg-opacity-10":"border-token-border-medium",n),...x(),children:[e.jsx("input",{...M()}),e.jsx("div",{className:"text-center dark:text-white",children:e.jsx("div",{className:"inline-block",children:e.jsx(ke,{})})}),e.jsx("div",{className:"text-center text-sm",children:r}),e.jsx("div",{className:"cursor-pointer text-center text-sm font-bold text-green-600",onClick:()=>{p()},children:t.formatMessage(Y.openFilePicker)})]})}const Y=W({helpText:{id:"FileUploadBox.helpText",defaultMessage:"Drop file here to upload"},openFilePicker:{id:"FileUploadBox.openFilePicker",defaultMessage:"Browse files"}});function Ge(a){const n=te(),s=I(),o=T();return re({mutationFn:({name:t,profilePictureId:r,profilePictureUrl:i})=>K.patchWorkspace({workspaceId:a,name:t,profile_picture_id:r,profile_picture_url:i}).catch(p=>{o.danger(s.formatMessage(h.saveError,{error:p.message}))}),onSuccess:()=>{n.invalidateQueries({queryKey:["account-status"]})}})}function $e({workspace:a}){const[n,s]=c.useState(a?.name??""),[o,t]=c.useState(!1);!o&&a&&(t(!0),n==""&&s(a?.name??""));const[r,i]=c.useState(a.profilePictureUrl),[p,x]=c.useState(a.profilePictureId),M=we(N.WorkspaceAppearance),k=I(),S=T(),L=()=>U.closeModal(N.WorkspaceAppearance),[d,j]=c.useState(void 0);async function X(f){const C=await ye(f,O.workspaceAvatarPreview*2),_=Ne(C);j({tempId:_,file:C,status:y.Uploading,progress:1,fileId:null,cdnUrl:null}),Ae(_,C,k,S,ie.ProfilePicture,{onFileCreated(b,w,g){j(l=>l!=="initial"&&l?.tempId===b&&l.status===y.Uploading?{...l,progress:10,fileId:w,cdnUrl:g}:l)},onFileUploadProgress(b,w){j(g=>g!=="initial"&&g?.tempId===b&&g.status===y.Uploading?{...g,progress:w}:g)},onFileUploaded(b,w,g){j(l=>l!=="initial"&&l&&l.cdnUrl&&l.tempId===b?(K.getFileDownloadLink(l.fileId).then(Z=>{Z.status===ce.Success&&(x(l.fileId),i(Z.download_url))}),{...l,status:y.Ready,progress:100,fileSpec:{name:l.file.name,id:l.fileId,size:l.file.size,...g??{}}}):l)},onError(b){j(w=>{if(w!=="initial"&&w?.tempId===b){x(void 0),i(void 0),E(null);return}return w})}})}const z=Ge(a.id),ee=e.jsx(G.Button,{color:"primary",disabled:d!=="initial"&&d!==void 0&&d.status!==y.Ready||d!=="initial"&&d!==void 0&&d.status===y.Ready&&!r||z.isPending||n.trim().length===0,onClick:async()=>{z.mutate({name:n,profilePictureId:p,profilePictureUrl:r}),U.closeModal(N.WorkspaceAppearance)},title:k.formatMessage(h.modalSubmit)}),ae=e.jsx(G.Button,{onClick:()=>{j(void 0),x(a.profilePictureId),i(a.profilePictureUrl),U.closeModal(N.WorkspaceAppearance)},title:k.formatMessage(h.modalCancel)}),[D,E]=c.useState(null);c.useEffect(()=>{if(d!=="initial"&&d!=null&&D==null){const f=new FileReader;f.addEventListener("load",()=>{const C=f.result;typeof C=="string"&&E(C)}),f.readAsDataURL(d.file)}},[d,D]);const se=()=>{x(null),i(null),j(void 0),E(null)};return e.jsxs(oe,{isOpen:M,onClose:L,showCloseButton:!0,primaryButton:ee,secondaryButton:ae,type:"danger",title:k.formatMessage(h.modalTitle),children:[e.jsxs("div",{className:"mb-4 flex-wrap",children:[e.jsx("label",{htmlFor:"workspace-name",className:"block pb-1 font-semibold text-token-text-primary",children:e.jsx(m,{...h.workspaceName})}),e.jsx("p",{className:"font-base text-sm text-token-text-secondary",children:e.jsx(m,{...h.workspaceNameDescription})})]}),e.jsx("div",{className:"mb-4",children:e.jsx(je,{ariaLabel:!1,type:"text",name:"workspace-name",value:n,onChange:f=>s(f.target.value),maxLength:64})}),e.jsxs("div",{className:"mb-4 flex-wrap",children:[e.jsx("label",{htmlFor:"workspace-avatar",className:"block pb-1 font-semibold text-token-text-primary",children:e.jsx(m,{...h.workspaceAvatar})}),e.jsx("p",{className:"font-base text-sm text-token-text-secondary",children:k.formatMessage(h.workspaceAvatarDescription,{size:O.workspaceAvatarPreview*2})})]}),e.jsxs("div",{className:"mb-4 flex-wrap text-center",children:[r?e.jsxs("div",{className:"relative mb-3 inline-flex",children:[e.jsx(R,{src:r,size:"workspaceAvatarPreview"}),e.jsx("div",{className:"absolute -right-1 -top-1",children:e.jsx(Oe,{onClick:se})})]}):d!=null&&d!=="initial"&&D?e.jsx("div",{className:"flex flex-col justify-center text-center",children:e.jsxs("div",{className:"relative mb-3 text-center",children:[e.jsx(R,{src:URL.createObjectURL(d.file),size:"workspaceAvatarPreview"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:e.jsx(be,{percentage:d.progress,className:"h-6 w-6"})})]})}):e.jsx(Ze,{onFileChange:f=>{X(f)},mimeTypes:Me}),e.jsx(Ce,{className:"mt-3",children:k.formatMessage(h.propagationWarning)})]})]})}function Oe({onClick:a}){return e.jsx("div",{className:"flex h-6 w-6 cursor-pointer flex-row flex-wrap content-center justify-center rounded-full border-2 border-white bg-black text-white",onClick:a,children:e.jsx(le,{className:"h-3 w-3"})})}const h=W({modalTitle:{id:"workspaceAppearanceModal.title",defaultMessage:"Workspace appearance"},modalSubmit:{id:"workspaceAppearanceModal.submit",defaultMessage:"Save"},modalCancel:{id:"workspaceAppearanceModal.cancel",defaultMessage:"Cancel"},workspaceName:{id:"workspaceAppearanceModal.workspaceName",defaultMessage:"Workspace name"},workspaceNameDescription:{id:"workspaceAppearanceModal.workspaceNameDescription",defaultMessage:"Update the name of the workspace."},workspaceAvatar:{id:"workspaceAppearanceModal.workspaceAvatar",defaultMessage:"Workspace image"},workspaceAvatarDescription:{id:"workspaceAppearanceModal.workspaceAvatarDescription",defaultMessage:"Upload a JPEG or PNG workspace image for your team. (Minimum {size}Ã—{size}px recommended.)"},propagationWarning:{id:"workspaceAppearanceModal.propagationWarning",defaultMessage:"Changes to the workspace name and image may take some time to take effect."},saveError:{id:"workspaceAppearanceModal.saveError",defaultMessage:"Failed to save workspace appearance"}}),Je=a=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 6C3 4.34315 4.34315 3 6 3H18C19.6569 3 21 4.34315 21 6V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6ZM5 13V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V13H17.5146C16.8687 13 16.2626 12.6881 15.8872 12.1625L14.5 10.2205L10.3137 16.0812C10.126 16.344 9.82295 16.5 9.5 16.5C9.17705 16.5 8.87398 16.344 8.68627 16.0812L6.48538 13H5ZM19 11V6C19 5.44772 18.5523 5 18 5H6C5.44772 5 5 5.44772 5 6V11H6.48538C7.13129 11 7.73743 11.3119 8.11285 11.8375L9.5 13.7795L13.6863 7.91876C13.874 7.65597 14.177 7.5 14.5 7.5C14.823 7.5 15.126 7.65597 15.3137 7.91876L17.5146 11L19 11Z",fill:"currentColor"})),Ye=a=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 7C2 5.34315 3.34315 4 5 4H19C20.6569 4 22 5.34315 22 7V17C22 18.6569 20.6569 20 19 20H5C3.34315 20 2 18.6569 2 17V7ZM4 11V17C4 17.5523 4.44772 18 5 18H19C19.5523 18 20 17.5523 20 17V11H4ZM20 9H4V7C4 6.44772 4.44772 6 5 6H19C19.5523 6 20 6.44772 20 7V9ZM14 15C14 14.4477 14.4477 14 15 14H17C17.5523 14 18 14.4477 18 15C18 15.5523 17.5523 16 17 16H15C14.4477 16 14 15.5523 14 15Z",fill:"currentColor"})),q=a=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.9357 2.08787C11.5863 1.6789 12.4137 1.6789 13.0643 2.08787L17.0643 4.60216L16.5322 5.44879L17.0643 4.60216C17.6466 4.96816 18 5.60767 18 6.29543V9.89909C18.0216 9.91158 18.0431 9.92451 18.0643 9.93787L22.0643 12.4522C22.6466 12.8182 23 13.4577 23 14.1454V17.7546C23 18.4423 22.6466 19.0818 22.0643 19.4478L18.0643 21.9621C17.4137 22.3711 16.5863 22.3711 15.9357 21.9621L12 19.4883L8.06434 21.9621L7.53217 21.1155L8.06434 21.9621C7.41371 22.3711 6.58629 22.3711 5.93566 21.9621L6.46783 21.1155L5.93566 21.9621L1.93566 19.4478C1.35338 19.0818 1 18.4423 1 17.7546V14.1454C1 13.4577 1.35338 12.8182 1.93566 12.4522L5.93566 9.93787C5.95692 9.92451 5.97837 9.91158 6 9.89909V6.29543C6 5.60767 6.35338 4.96816 6.93566 4.60216L10.9357 2.08787ZM6.99432 11.6347L3 14.1454L3 17.7546L7 20.2689L11 17.7546V14.1509C10.9784 14.1384 10.9569 14.1255 10.9357 14.1121L6.99432 11.6347ZM13 14.1509V17.7546L17 20.2689L21 17.7546V14.1454L17.0057 11.6347L13.0643 14.1121C13.0431 14.1255 13.0216 14.1384 13 14.1509ZM12 12.4117L8.06434 9.93787C8.04308 9.92451 8.02163 9.91158 8 9.89908L8 6.29543L12 3.78114L16 6.29543V9.89909C15.9784 9.91158 15.9569 9.92451 15.9357 9.93787L12 12.4117Z",fill:"currentColor"}));function qe({accountId:a,subscription:n}){const s=I(),o=T(),t=Se(a),[r,i]=c.useState(!1),p=Le(a),x=async()=>{i(!0);try{await t.mutateAsync(a)}catch{o.warning(s.formatMessage(P.errorRenewingSubscription),{hasCloseButton:!0})}finally{i(!1)}};return e.jsx("div",{className:"bg-token-main-surface-secondary",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-2 py-4 md:px-6 lg:px-10 lg:py-6",children:[e.jsxs("div",{className:"mx-2 flex-grow md:mx-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"mr-4 hidden text-orange-500 md:block"}),e.jsx("p",{className:"text-lg font-semibold",children:e.jsx(m,{...P.workspaceWillBeDeactivated})})]}),n.active_until!=null&&e.jsx("p",{className:"md:ml-8",children:e.jsx(m,{...P.retainAccessUntil,values:{expiryDate:new Date(n.active_until)}})})]}),p&&e.jsx(pe,{color:"primary",onClick:x,loading:r,children:e.jsx(m,{...P.reactivateBtn})})]})})}const P=W({retainAccessUntil:{id:"adminPage.retainAccessUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},workspaceWillBeDeactivated:{id:"adminPage.workspaceWillBeDeactivated",defaultMessage:"This workspace will be deactivated."},reactivateBtn:{id:"adminPage.reactivateBtn",defaultMessage:"Reactivate"},errorRenewingSubscription:{id:"adminPage.errorRenewingSubscription",defaultMessage:"There was an error reactivating your subscription."}});function v({route:a,icon:n,name:s,upsellEnterprise:o=!1}){const t=ne().pathname.replace(/\/$/,"")||"/",r=H();return o?e.jsx(fe,{label:e.jsx(m,{...u.availableForEnterprise}),side:"right",children:e.jsxs(J,{$as:"button",className:B("w-full rounded text-left","hover:bg-token-sidebar-surface-secondary"),children:[e.jsx(Ee,{className:"icon-sm shrink-0 text-token-text-secondary"}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(m,{...s})})]})}):e.jsxs(J,{$as:"button",className:B("w-full rounded text-left hover:bg-token-sidebar-surface-secondary",t===a&&"bg-token-sidebar-surface-secondary"),onClick:i=>{r(a),i.stopPropagation()},children:[n,e.jsx(m,{...s})]})}function Ke({workspace:a,hasAdminPrivileges:n,hasOwnerPrivileges:s}){const o=H(),t=c.useCallback(()=>{o("/")},[o]),r=F(Pe.isEnterpriseyPlan),i=_e();return e.jsxs("nav",{className:"p-2",children:[e.jsx("div",{className:"mb-1 flex flex-row gap-2",children:e.jsxs(Re,{onClick:t,children:[e.jsx(me,{className:"icon-sm"}),e.jsx(m,{...u.backToChat})]})}),e.jsxs("div",{className:"flex flex-col gap-2 py-2",children:[e.jsxs("div",{className:`flex flex-col gap-2 rounded px-2 py-2 ${s?"cursor-pointer hover:bg-token-main-surface-secondary":""}`,onClick:()=>{s&&U.openModal(N.WorkspaceAppearance)},children:[e.jsx(R,{size:"large",src:a?.profilePictureUrl}),e.jsxs("div",{className:"align-center flex flex-row",children:[e.jsx("h2",{className:"flex-1 text-lg text-token-text-primary dark:text-white",children:a?.name}),s?e.jsx("div",{className:"my-auto h-4 flex-initial align-middle dark:text-white",children:e.jsx(Ue,{className:"icon-sm opacity-70 hover:opacity-100"})}):null]})]}),e.jsx(v,{route:"/admin",icon:e.jsx(Fe,{className:"icon-sm"}),name:u.membersPageTitle}),r&&e.jsx(v,{route:"/admin/groups",icon:e.jsx(q,{className:"icon-sm"}),upsellEnterprise:!r,name:$({id:"aecR1i",defaultMessage:"Groups"})}),s&&e.jsx(v,{route:"/admin/billing",icon:e.jsx(Ye,{className:"icon-sm"}),name:u.billing}),s&&e.jsx(v,{route:"/admin/gpts",icon:e.jsx(Ie,{className:"icon-sm"}),name:u.gpts}),n&&i&&e.jsx(v,{route:"/admin/connectors",icon:e.jsx(ze,{className:"icon-sm"}),name:u.connectors}),n&&i&&!1,s&&e.jsx(v,{route:"/admin/settings",icon:e.jsx(We,{className:"icon-sm"}),name:u.settings}),!r&&e.jsx("span",{className:"mx-3 border-t border-y-token-border-medium"}),!r&&e.jsx(v,{route:"/admin/groups",icon:e.jsx(q,{className:"icon-sm"}),upsellEnterprise:!r,name:$({id:"aecR1i",defaultMessage:"Groups"})}),n&&e.jsx(v,{route:"/admin/analytics",icon:e.jsx(Je,{className:"icon-sm"}),name:u.analytics,upsellEnterprise:!r}),s&&e.jsx(v,{route:"/admin/identity",upsellEnterprise:!r,icon:e.jsx(Ve,{className:"icon-sm"}),name:u.identity})]})]})}function pa({mobilePageTitle:a,requireAdminPrivileges:n=!1,requireOwnerPrivileges:s=!1,children:o}){const t=F(M=>M.currentWorkspace),r=H(),i=t!=null?He(t.role):void 0,p=t!=null?Te(t.role):void 0;return c.useEffect(()=>{n&&i===!1&&r("/admin"),s&&p===!1&&r("/admin")},[n,i,r,s,p]),V()==null?null:e.jsxs(e.Fragment,{children:[e.jsx(Be,{mobileHeaderContent:a,forceOpenDesktopSidebar:!0,sidebar:e.jsx(Ke,{workspace:t??void 0,hasAdminPrivileges:i,hasOwnerPrivileges:p}),children:o}),t==null?null:e.jsx($e,{workspace:t})]})}const Qe=A.div`border-b border-token-main-surface-tertiary hidden md:block py-6 lg:py-10`,Q=A.h2`mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10`,Xe=A(Q)`font-normal text-base text-token-text-secondary`;A.p`text-sm text-token-text-tertiary`;function ma({title:a,subtitle:n}){const{data:s}=De(),o=V(),t=o&&s&&s.plan_type===ue.TEAM&&!s.will_renew;return e.jsxs(e.Fragment,{children:[t&&e.jsx(qe,{accountId:o.id,subscription:s}),e.jsxs(Qe,{children:[e.jsx(Q,{children:a}),n&&e.jsx(Xe,{children:n})]})]})}const ea=A.div`max-w-4xl mx-auto w-full px-2 md:px-6 lg:px-10`;function ua({children:a,showSpinner:n}){const s=V(),o=F(r=>r.currentWorkspace),t=!s||n;return e.jsxs(ea,{children:[t&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(xe,{})}),!t&&!o&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(m,{...u.workspaceNotFound})}),!t&&o&&a]})}const u=W({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},billing:{id:"adminPage.billing.1",defaultMessage:"Billing"},gpts:{id:"adminPage.gpts",defaultMessage:"GPTs"},connectors:{id:"adminPage.connectors",defaultMessage:"Connectors"},settings:{id:"adminPage.Settings",defaultMessage:"Settings"},identity:{id:"adminPage.identity.0",defaultMessage:"Identity & provisioning"},availableForEnterprise:{id:"adminPage.availableForEnterprise",defaultMessage:"Available for Enterprise plan"}});export{pa as A,Ye as S,ma as a,ua as b};
//# sourceMappingURL=lh89qzxxlysgorkz.js.map
