import{eX as I,fw as P,a1 as S,fx as E,ae as R,al as h,br as F,q as M}from"./efuue3ezs0mj4ucx.js";import{z as B,f as N,e as O,r as o,a as A,j as e}from"./n1tvutderx19k1zs.js";import{t as g,a as m,u as _,s as q,C as T,b as H,g as y,T as L,c as Q,d as $}from"./c87uv1mutc86tiqk.js";import{g as k,C as D}from"./b197edpr4dhgtcvc.js";import{T as K,C as V}from"./gl1kbrt1wxxj1rxw.js";import{C as w,T as z}from"./k9xm49otsb4eors5.js";import{C as G}from"./jy24clh9s5sbm6a3.js";import"./kifwyvxkhdk7syb7.js";import"./gy64pge8qevmvg7e.js";import"./o97za21c5v9glw28.js";import"./ks79pfkjilmvsi5m.js";import"./c1vsiyure2yziq8u.js";import"./gr8do7n6orkpzwtb.js";import"./bh0nczk7jf5nipy7.js";import"./d995zjnlydagrugw.js";import"./m3i9t52w2bjqxoks.js";import"./fmtdc70w9bxe7ngz.js";import"./ishe91rr928a0b40.js";import"./ir7h5xb5yr2dttye.js";import"./fzrn137102spawew.js";import"./pevkepdko1ob7sgk.js";import"./ecs2ptmt646v6gvn.js";import"./gb5z15gr4uo6e2ww.js";import"./n2mw1xqoowews9pe.js";import"./gohrg29ji6orhvga.js";import"./lvedelvd2wa5y0ah.js";import"./oy248fbbcvutqmly.js";import"./bk8slwxjkdlmxjxm.js";import"./gffup1245353c03l.js";import"./bxe8lsbbwu66fmec.js";const Ie=()=>(P(),null),Pe=I(function(){const r=B(),[a]=N(),u=O(),p=g(r.conversationId),i=m(a.get("readonly"),!1),c=m(a.get("isFullScreen"),!1),d=m(a.get("header"),!0),l=m(a.get("appPreview"),!1),n=S(()=>E()),C=m(a.get("hideBottomComposer"),!!i),t=g(r.canmoreId),s=p,f=_();o.useEffect(()=>{q({type:T.Textdoc,textdocId:t})},[t]),H(s,{kind:R.PrimaryAssistant});const v=A();if(o.useEffect(()=>(h.retainThread(s),()=>{setTimeout(()=>{v.invalidateQueries({queryKey:["conversation",s]})},0),h.releaseThread(s)}),[s,v]),o.useEffect(()=>{t||u("/")},[t,u]),o.useEffect(()=>{y().sendMessage({type:w.Loaded})},[t]),!t||f?.type!==T.Textdoc)return null;const j=()=>{y().sendMessage({type:w.Close})},b=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(G,{clientThreadId:s,children:e.jsx(L,{clientThreadId:s,children:l?e.jsx(F,{children:e.jsx(W,{textdocId:f.textdocId})}):b?e.jsxs(e.Fragment,{children:[e.jsx(K,{disableScroll:!n,textdocId:f.textdocId}),e.jsx(V,{})]}):e.jsx(z,{isEmbedded:!0,isFullScreen:c,hideHeader:!d,hideBottomComposer:C,isReadonlyFromQueryParam:i,hideRunCode:!n,clientThreadId:s,focusedTextdoc:f,onClose:j},"textdocContent")})})]})}),W=({textdocId:x})=>{const r=o.useRef(null),a=Q(x),[u,p]=o.useState(!1),i=a?.versions??[],c=M(i),d=o.useCallback($(async l=>{const n=k(l.type,l.content);if(r.current&&(n==="react"||n==="html")){p(!0);const C=r.current.evalAsync({language:n,code:l.content});for await(const t of C)console.debug(t)}p(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(D,{visuallyHidden:!u,ref:r,enableTransition:!0,title:""})};export{Ie as clientLoader,Pe as default};
//# sourceMappingURL=bmm5evrksuh8b3fe.js.map
