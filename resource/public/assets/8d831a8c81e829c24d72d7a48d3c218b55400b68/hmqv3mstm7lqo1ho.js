import{c as J,j as e,M as b,au as Ve,r as n,L as Z,u as he,e as le,f as Me}from"./n1tvutderx19k1zs.js";import{d as xe,j as oe,a9 as be,a7 as _e,aq as ke,bY as U,P as h,a as x,S as N,J as je,aE as qe,bJ as ge,bd as K,B as Ee,aw as Ye,au as Je,av as Ke,dm as ye,ac as fe,L as Te,C as Se,D as Ne,dE as Qe,dl as Xe,cq as et,h6 as tt,b_ as st,f0 as at}from"./efuue3ezs0mj4ucx.js";import{R as nt,I as lt}from"./cyghe4iwyyd3wk8r.js";import{le as O,d1 as m,lf as ie,lg as ne,lh as we,li as Ae,lj as Le,lk as Ie,ll as Oe,lm as Fe,ln as ot,lo as Be,lp as Re,lq as I,U as it,cQ as rt,lr as De,ls as ct,lt as dt,lu as ut,lv as se,lw as pt,lx as mt,ly as gt,lz as ft,lA as ht,lB as xt,lC as bt,lD as yt,lE as Ue,lF as Ge,lG as Ct,ae as Pt,lH as vt,lI as Mt,lJ as _t,lK as kt,lL as jt,lM as Et,gE as Tt}from"./c87uv1mutc86tiqk.js";import{S as St}from"./hau51huxh66v0dxz.js";function Nt({ariaLabel:t,className:s,leftItem:a,onChange:o,rightItem:l,value:c}){const d=J(),u=c===a.value;return e.jsx(nt,{type:"single","aria-label":d.formatMessage(t),onClick:()=>{o(u?l.value:a.value)},value:c,className:xe("cursor-pointer select-none rounded-full border border-solid border-token-border-light bg-token-main-surface-tertiary p-0.5",s),children:e.jsxs("div",{className:"relative grid grid-cols-2",children:[e.jsx(Ce,{...a,isSelected:c===a.value}),e.jsx(Ce,{...l,isSelected:c===l.value})]})})}function Ce({ariaLabel:t,isSelected:s,label:a,value:o}){const l=J();return e.jsxs("div",{className:"relative z-10 px-3 py-1.5 text-center text-sm font-semibold",children:[e.jsx(lt,{"aria-label":l.formatMessage(t),className:xe({"text-token-text-primary":s,"text-token-text-tertiary":!s}),value:o,children:e.jsx(b,{...a})}),s?e.jsx(Ve.div,{transition:{duration:.05},layoutId:"SegmentedControlToggleItem-selectedBackground",className:"absolute inset-0 -z-10 rounded-full bg-token-main-surface-primary"}):null]})}function wt({value:t,onChange:s}){return e.jsx(Nt,{value:t,onChange:s,ariaLabel:Y.toggleArialabel,leftItem:{ariaLabel:Y.togglePersonalArialabel,label:Y.togglePersonalLabel,value:"personal"},rightItem:{ariaLabel:Y.toggleBusinessArialabel,label:Y.toggleBusinessLabel,value:"business"}})}const Y=oe({toggleArialabel:{id:"U4v2Gf",defaultMessage:"Toggle for switching between Personal and Business plans"},togglePersonalArialabel:{id:"6Wikht",defaultMessage:"Toggle for switching to Personal plans"},toggleBusinessArialabel:{id:"uzlEV0",defaultMessage:"Toggle for switching to Business plans"},togglePersonalLabel:{id:"cGDsaD",defaultMessage:"Personal"},toggleBusinessLabel:{id:"sgisa2",defaultMessage:"Business"}}),We=t=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 19C6.44772 19 6 18.5523 6 18C6 16.3077 6.81186 15.0179 7.98298 14.1851C9.12436 13.3734 10.5892 13 12 13C13.4108 13 14.8756 13.3734 16.017 14.1851C17.1881 15.0178 18 16.3076 18 18C18 18.5523 17.5523 19 17 19C15.6012 19 8.39878 19 7 19Z",fill:"currentColor"}),n.createElement("path",{d:"M19.5 18C19.5 18 19.5 18 19.5 18C19.5 16.0565 18.6712 14.498 17.4529 13.4137C18.0999 13.1329 18.8086 13 19.5 13C20.5581 13 21.6567 13.3112 22.5128 13.9875C23.3911 14.6815 24 15.7564 24 17.1667C24 17.6269 23.6642 18 23.25 18H19.5Z",fill:"currentColor"}),n.createElement("path",{d:"M6.54712 13.4137C5.32885 14.498 4.5 16.0564 4.5 18C4.5 18 4.5 18 4.5 18L0.75 18C0.335786 18 0 17.6269 0 17.1667C0 15.7564 0.608892 14.6815 1.48723 13.9875C2.34327 13.3112 3.44193 13 4.5 13C5.19138 13 5.90009 13.1329 6.54712 13.4137Z",fill:"currentColor"}),n.createElement("path",{d:"M12 5C10.067 5 8.5 6.567 8.5 8.5C8.5 10.433 10.067 12 12 12C13.933 12 15.5 10.433 15.5 8.5C15.5 6.567 13.933 5 12 5Z",fill:"currentColor"}),n.createElement("path",{d:"M4.5 7C3.11929 7 2 8.11929 2 9.5C2 10.8807 3.11929 12 4.5 12C5.88071 12 7 10.8807 7 9.5C7 8.11929 5.88071 7 4.5 7Z",fill:"currentColor"}),n.createElement("path",{d:"M19.5 7C18.1193 7 17 8.11929 17 9.5C17 10.8807 18.1193 12 19.5 12C20.8807 12 22 10.8807 22 9.5C22 8.11929 20.8807 7 19.5 7Z",fill:"currentColor"})),Pe=be.ENTERPRISE,At={[O.Default]:m.enterprise,[O.Scallion]:m.enterprise,[O.Chive]:m.enterprise,[O.ProduceDesign]:m.enterpriseProduceExp},Lt=({isProduceDesign:t=!1,enterprisePricingPlanProduce:s=null,billingDetails:a})=>{const l=_e()?.isEnterprisey(),c=Ae(),d=s||ke(At[c]);return e.jsx(ie,{icon:e.jsx(We,{className:"icon-md text-brand-purple"}),planName:"enterprise",pricingPlan:d,showForLine:!0,callToActionButton:l?e.jsx(U,{color:"secondary",disabled:!0,size:"large",className:t?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:e.jsx(b,{...m.free.callToAction.inactive})}):e.jsx(ne,{planType:Pe,as:"link",to:we,openNewTab:!0,onClick:()=>{h.logEvent(x.accountPayClickEnterpriseContactSalesButton),N.logEvent("chatgpt_account_payment_modal_enterprise_sales_button_clicked",Pe)},isCurrentPlan:!1,testId:"select-plan-button-enterprise",isProduceDesign:t,children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsx(b,{...m.enterprise.callToAction.inactive})})}),billingDetails:a})},It={[O.Default]:m.freeDefault,[O.Scallion]:m.freeNeptune,[O.Chive]:m.freeChive,[O.ProduceDesign]:m.freeProduceExp},Ot=({isProduceDesign:t=!1,freePricingPlanProduce:s=null,billingDetails:a})=>{const{data:o}=je(),l=Le(o),c=Ae(),d=s||ke(It[c]);return e.jsx(ie,{planName:"free",pricingPlan:d,icon:e.jsx(St,{className:"icon-md"}),showForLine:!l,callToActionButton:e.jsx(U,{color:"secondary",disabled:!0,size:"large",className:t?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:e.jsx(b,{...m.free.callToAction.inactive})}),additionalLinks:[e.jsx(b,{...Ft.haveExistingPlan,values:{link:u=>e.jsx(Z,{target:"_blank",to:Ie,onClick:Oe,className:"underline",children:u},"row-plus-plan-help-link")}},"existing-plan-help")],billingDetails:a})},Ft=oe({haveExistingPlan:{id:"FreeColumn.haveExistingPlan",defaultMessage:"Have an existing plan? See <link>billing help</link>"}}),Bt=t=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.22222 20C1.54721 20 1 19.4563 1 18.7857C1 16.7307 1.99227 15.1645 3.42364 14.1533C4.81866 13.1677 6.60907 12.7143 8.33333 12.7143C10.0576 12.7143 11.848 13.1677 13.243 14.1533C14.6744 15.1645 15.6667 16.7307 15.6667 18.7857C15.6667 19.4563 15.1195 20 14.4444 20C12.7348 20 3.93184 20 2.22222 20Z",fill:"currentColor"}),n.createElement("path",{d:"M17.5 18.7857C17.5 16.4257 16.487 14.5332 14.998 13.2166C15.7888 12.8756 16.655 12.7143 17.5 12.7143C18.7932 12.7143 20.136 13.0921 21.1823 13.9134C22.2558 14.7561 23 16.0613 23 17.7738C23 18.3327 22.5896 18.7857 22.0833 18.7857H17.5Z",fill:"currentColor"}),n.createElement("path",{d:"M8.33333 2.99998C5.97078 2.99998 4.05556 4.90277 4.05556 7.24998C4.05556 9.5972 5.97078 11.5 8.33333 11.5C10.6959 11.5 12.6111 9.5972 12.6111 7.24998C12.6111 4.90277 10.6959 2.99998 8.33333 2.99998Z",fill:"currentColor"}),n.createElement("path",{d:"M17.5 5.42856C15.8125 5.42856 14.4444 6.78769 14.4444 8.46427C14.4444 10.1408 15.8125 11.5 17.5 11.5C19.1875 11.5 20.5556 10.1408 20.5556 8.46427C20.5556 6.78769 19.1875 5.42856 17.5 5.42856Z",fill:"currentColor"})),z=be.TEAM,Rt=({analyticsParams:t,isPlanLoading:s,isProduceDesign:a=!1,teamPricingPlanProduce:o=null,billingDetails:l})=>{const{data:c}=je(),{data:d,refetch:u}=he(Fe),r=qe()?.includes("disable_team_upgrade_ui"),g=J(),f=_e(),p=le(),[C,v]=n.useState(!1),{hasSignedUpForWaitlist:M,signUpForWaitlist:F}=ot(z),w=f&&f.isTeam(),P=f&&f.isPlus(),S={...t,planType:z,isUpgradeUiDisabled:r},G=!!d?.email,j=Le(c),_=o||(a?m.teamsProduceExp:j?m.teamsNeptune:m.teams),B=A=>{if(!G&&!A){v(!0);return}h.logEvent(x.accountPayPaymentCheckoutClicked,S),N.logEvent("chatgpt_account_payment_modal_upgrade_button_click",z),it.setPurchaseWorkspaceData({minimumSeats:rt,billingDetails:l}),De(p)};return Be(C,{plan:S}),e.jsxs(e.Fragment,{children:[e.jsx(ie,{planName:"team",pricingPlan:_,icon:e.jsx(Bt,{className:"icon-md text-brand-blue-800"}),callToActionButton:e.jsxs("div",{className:"flex flex-col gap-2",children:[w&&e.jsx(ne,{planType:z,isCurrentPlan:!0,disabled:s||w,onClick:()=>B(),testId:"select-plan-button-teams-upgrade",isProduceDesign:a,children:g.formatMessage(m.teams.callToAction.active)}),r?e.jsx("div",{className:"relative w-full",children:e.jsx(ge,{side:"bottom",sideOffset:20,label:g.formatMessage(m.disabledHighDemand.hoverText),children:e.jsx(ne,{planType:z,isCurrentPlan:!1,disabled:M,onClick:F,testId:"select-plan-button-teams-waitlist",isProduceDesign:a,children:e.jsx(b,{...M?m.signUpForWaitlist.inactive:m.signUpForWaitlist.active})})})}):e.jsx("div",{className:"w-full",children:e.jsx(ne,{planType:z,isCurrentPlan:!1,disabled:s,onClick:()=>B(),testId:"select-plan-button-teams-create",isProduceDesign:a,children:w||P?g.formatMessage(_.callToAction.create):g.formatMessage(_.callToAction.inactive)})})]}),billingDetails:l}),e.jsx(K,{isOpen:C,onClose:()=>v(!1),type:"success",className:"max-w-sm",children:e.jsx(Re,{enterEmailTitle:g.formatMessage(I.addEmailTitle),enterEmailDescription:g.formatMessage(I.addEmailDescription),onVerified:()=>{v(!1),u(),B(!0)}})})]})},Dt=t=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.35825 8.64117L6.41363 3.58579C6.7887 3.21071 7.29741 3 7.82785 3H16.171C16.7014 3 17.2101 3.21071 17.5852 3.58579L22.6407 8.64128C23.3997 9.40032 23.4242 10.6232 22.6961 11.412L13.4699 21.4079C12.678 22.2658 11.3227 22.2659 10.5307 21.408L1.30291 11.412C0.574744 10.6232 0.599167 9.40025 1.35825 8.64117ZM8.21892 6.70217L7.79183 7.98345C7.58583 8.60146 7.10088 9.08641 6.48287 9.29241L5.20159 9.71951C4.93203 9.80936 4.93203 10.1906 5.20158 10.2805L6.48287 10.7076C7.10088 10.9136 7.58583 11.3985 7.79183 12.0166L8.21892 13.2978C8.30878 13.5674 8.69006 13.5674 8.77991 13.2978L9.207 12.0166C9.41301 11.3985 9.89796 10.9136 10.516 10.7076L11.7973 10.2805C12.0668 10.1906 12.0668 9.80936 11.7973 9.71951L10.516 9.29241C9.89796 9.08641 9.41301 8.60146 9.207 7.98345L8.77991 6.70217C8.69006 6.43261 8.30878 6.43261 8.21892 6.70217Z",fill:"currentColor"})),Ut=()=>he({queryKey:["has-app-store-subscription-in-billing-retry"],queryFn:async()=>await fe.hasAppStoreSubscriptionInBillingRetryResponse()}),ae="pro",Gt=({analyticsParams:t,currentAccount:s,isPlanLoading:a,onSubmit:o,setIsPlanLoading:l,billingDetails:c,variant:d})=>{const{data:u,isError:y}=Ut(),r=s.features,{data:g,refetch:f}=he(Fe),p=J(),C=Ee(),[v]=Me(),M=v.get("checkout_from"),[F,w]=n.useState(!1),[P,S]=n.useState(!1),[G,j]=n.useState(!1),_=s.getLastActiveSubscription(),B=s.isOrWasPaidCustomer(),A=s.hasPaidSubscription(),k=A&&!(s.isPlus()||s.isWorkspacePlan()),re=!!g?.email,{layer:ce}=Ye("468168202"),de=le(),{recentlyDowngraded:W}=ct(),{daysUntilPlanChanges:Q,isDowngradeScheduled:X}=dt(s,W),{value:ue}=Je("1719651090"),L=ut({isOperatorEnabled:ue}),R=[],E={...t,planType:ae},ee=A&&_.purchase_origin_platform===se.MOBILE_IOS,D=A&&_.purchase_origin_platform===se.MOBILE_ANDROID,pe=A&&(_.purchase_origin_platform===se.WEBAPP||_.purchase_origin_platform===se.GRANTED)&&s?.hasCustomerObject(),H=async T=>{if(!re&&!T){j(!0);return}l(!0),h.logEvent(x.accountPayPaymentCheckoutClicked,E),N.logEvent("chatgpt_account_payment_modal_upgrade_button_click",ae);try{const q=await fe.getCheckoutLink(r,"ProducePro",{plan_name:"chatgptpro",billing_details:c});o?.(),h.logEvent(x.accountPayNavigatingToPaymentCheckout,{...E,url:q.url}),N.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",ae,{url:q.url}),M==="vza493q"&&Te.setItem(Se.CheckoutFrom,M),window.location.href=q.url}catch{C.warning(p.formatMessage(I.paymentErrorWarning),{hasCloseButton:!0})}l(!1)},i=async()=>{l(!0);try{const T=await fe.fetchCustomerPortalUrl();h.logEvent(x.navigatingToAccountCustomerPortal,E),location.href=T.url}catch{C.warning(p.formatMessage(I.accountErrorWarning),{hasCloseButton:!0})}l(!1)},V=()=>{h.logEvent(x.clickAccountManageIos,E)},me=()=>{h.logEvent(x.clickAccountManageAndroid,E)};k&&ee&&R.push(e.jsx(Z,{to:pt,target:"_blank",onClick:V,className:"px-2 underline",children:p.formatMessage(m.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),k&&D&&R.push(e.jsx(Z,{to:mt,target:"_blank",onClick:me,children:p.formatMessage(m.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),k&&pe&&R.push(e.jsx(Z,{to:"#",className:"px-2 underline",onClick:T=>{T.preventDefault(),h.logEvent(x.clickAccountCustomerPortal,E),ce.get("does_manage_my_subscription_link_take_user_to_subscription_settings",!1)?de("/#settings/Subscription"):i()},children:e.jsx(b,{...m.manageSubscriptionWeb.callToAction})},"row-manage-subscription-link")),B&&R.push(e.jsx(Z,{target:"_blank",to:Ie,onClick:Oe,className:"px-2 underline",children:e.jsx(b,{...I.billingHelp})},"row-plus-plan-help-link"));const te=function(){w(!F)},He=function(){S(!P)},{value:ze}=Ke("1382475798"),Ze=async()=>{let T=s.hasPaidSubscription()&&s.isPlus();ze&&(T=T&&!s.isActiveSubscriptionGratis()),T?(h.logEvent(x.accountPayPaymentCheckoutClicked,E),N.logEvent("chatgpt_account_payment_modal_upgrade_button_click",ae),S(!0)):await H()},$e=y||!u||!u.value?Ze:()=>{te()};return Be(G,{plan:E}),e.jsxs(e.Fragment,{children:[e.jsx(ie,{planName:"pro",pricingPlan:L,icon:e.jsx(Dt,{className:"icon-md primary"}),showForLine:!1,callToActionButton:e.jsxs("div",{children:[s.isWorkspacePlan()&&d==="operator"?e.jsx(U,{fullWidth:!0,size:"large",color:"primary",disabled:!0,"data-testid":"select-plan-button-pro-upgrade",children:p.formatMessage(ve.switchToPersonalAccount)}):ee||D?e.jsx(ge,{side:"top",sideOffset:20,label:p.formatMessage(ve.switchToMobile),children:e.jsx(U,{fullWidth:!0,size:"large",color:"primary",disabled:!0,"data-testid":"select-plan-button-pro-upgrade",children:p.formatMessage(L.callToAction.inactive)})}):X&&Q?e.jsx(ge,{side:"top",sideOffset:20,label:e.jsx(b,{id:"jgTAPh",defaultMessage:"Your subscription will remain active until {date}, when it will change to Plus.",values:{date:gt(Q,p.locale)}}),children:e.jsx(U,{fullWidth:!0,size:"large",color:"primary",disabled:k||a,"data-testid":"select-plan-button-pro-upgrade",className:k||a?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:a&&!P?e.jsx(ye,{}):k?p.formatMessage(L.callToAction.active):p.formatMessage(L.callToAction.inactive)})}):e.jsx(U,{fullWidth:!0,size:"large",color:"primary",disabled:k||a,onClick:$e,"data-testid":"select-plan-button-pro-upgrade",className:k||a?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:a&&!P?e.jsx(ye,{}):k?p.formatMessage(L.callToAction.active):p.formatMessage(L.callToAction.inactive)}),e.jsx(ft,{isOpen:F,onClose:te,onContinue:H}),P&&e.jsx(ht,{isOpen:P,onClose:He,accountId:s.id,initialPlanType:be.PLUS,updatedPlanType:xt.PRO,billingDetails:c})]}),additionalLinks:R,className:"bg-token-main-surface-primary",billingDetails:c}),e.jsx(K,{isOpen:G,onClose:()=>j(!1),type:"success",className:"max-w-sm",children:e.jsx(Re,{enterEmailTitle:p.formatMessage(I.addEmailTitle),enterEmailDescription:p.formatMessage(I.addEmailDescription),onVerified:()=>{f(),j(!1),H(!0)},cancelFlowButton:e.jsx(U,{className:"w-full rounded-md",color:"secondary",onClick:()=>j(!1),children:e.jsx(b,{...I.cancelAddEmail})})})})]})},ve=oe({switchToPersonalAccount:{id:"y5FjSF",defaultMessage:"Switch to a personal account to upgrade"},switchToMobile:{id:"gbjsg6",defaultMessage:"It looks like you already have an active mobile subscription. Switch to your mobile app to upgrade"}});function Wt({analyticsParams:t,currentAccount:s,isPlanLoading:a,selectedTab:o,setIsPlanLoading:l,shouldSplitBetweenPersonalAndBusiness:c,isEnterpriseEnabled:d,billingDetails:u,variant:y}){const r=[],g=s.hasPaidSubscription();return y==="operator"?(g&&s.isPlus()&&r.push("plus"),r.push("pro")):c?o==="personal"?(g||r.push("free"),r.push("plus"),r.push("pro")):(r.push("team"),d&&r.push("enterprise")):(g||r.push("free"),(!s.isTeam()||!s.isEnterprisey()&&d)&&(r.push("plus"),r.push("pro")),r.push("team"),d&&r.push("enterprise")),r.length===0&&Ne.addError(new Error("Account payment modal missing columns")),r.map(f=>{switch(f){case"free":return e.jsx(Ot,{isProduceDesign:!0,freePricingPlanProduce:Ct,billingDetails:u},f);case"plus":return e.jsx(Ue,{analyticsParams:t,currentAccount:s,setIsPlanLoading:l,isPlanLoading:a,isProduceDesign:!0,plusPricingPlanProduce:Ge,billingDetails:u},f);case"team":return e.jsx(Rt,{analyticsParams:t,isPlanLoading:a,isProduceDesign:!0,teamPricingPlanProduce:yt,billingDetails:u},f);case"enterprise":return e.jsx(Lt,{isProduceDesign:!0,enterprisePricingPlanProduce:bt,billingDetails:u},f);case"pro":return e.jsx(Gt,{analyticsParams:t,currentAccount:s,setIsPlanLoading:l,isPlanLoading:a,billingDetails:u,variant:y},f)}})}const Ht=({isOpen:t,onClose:s,promoError:a})=>{const o=J();return!a||!a?.message?null:e.jsx(K,{type:"success",isOpen:t,onClose:s,showCloseButton:!0,title:a?.title,children:e.jsxs("div",{className:"",children:[e.jsx("p",{children:a?.message}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(Qe,{title:o.formatMessage({id:"promoIneligibleModal.close",defaultMessage:"Close"}),color:"secondary",onClick:s,size:"large"})})]})})},zt=({handleClose:t,analyticsParams:s,currentAccount:a,setIsPlanLoading:o,isPlanLoading:l,billingDetails:c,promoMetadata:d,promoCode:u,nonFooterContentRef:y,isEligible:r,isPromoLoading:g,promoError:f})=>{const p=le(),{eligible:C,isLoading:v}=Pt(vt);if(n.useEffect(()=>{C&&!v&&d&&(Te.setItem(Se.PromoCode,u),t(),p("/"))},[C,v,u,t,p,d]),C||v)return null;if(r&&d!=null||g)return e.jsx(Zt,{handleClose:t,analyticsParams:s,currentAccount:a,setIsPlanLoading:o,isPlanLoading:l||g,billingDetails:c,promoCode:u??"",promoMetadata:d,nonFooterContentRef:y});if(!r&&f)return e.jsx(Ht,{isOpen:!0,onClose:t,promoError:f})},Zt=({handleClose:t,analyticsParams:s,currentAccount:a,setIsPlanLoading:o,isPlanLoading:l,billingDetails:c,promoCode:d,promoMetadata:u,nonFooterContentRef:y})=>e.jsx(K,{size:"fullscreen",isOpen:!0,onClose:t,type:"success",className:"flex h-full flex-col items-center justify-center bg-white/70 dark:bg-gray-800/70",isProduceDesign:!0,showOverlayBackground:!1,children:e.jsx("div",{ref:y,className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-6 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:e.jsx(Ue,{analyticsParams:s,currentAccount:a,setIsPlanLoading:o,isPlanLoading:l,isProduceDesign:!0,billingDetails:c,plusPricingPlanProduce:Ge,promoCode:d,promoMetadata:u,handlePromoModalClose:t})})})});function Xt(t){return t.split("#")[1]===jt}function es(t){return t.split("#")[1]===Et}function ts({currentAccount:t,defaultTab:s,onClose:a,variant:o="default"}){const[l,c]=n.useState(!1),d=t.hasPaidSubscription(),u=t.hasPaidSubscription()&&!(t.isPlus()||t.isWorkspacePlan()),y=s??(t.isPersonalAccount()?"personal":"business"),[r]=Me(),g=r.get("promoCode"),{isEligible:f,promoMetadata:p,isPromoLoading:C,promoError:v}=Mt(g??""),M=n.useMemo(()=>({...t.subscriptionAnalyticsParams,referrer:document.referrer}),[t]),F=le(),w=Ee(),P=n.useCallback(()=>{h.logEvent(x.accountPayCloseAccountPaymentModal,M),a?a():De(F)},[M,F,a]);n.useEffect(()=>{const i=Tt();h.logEvent(x.accountPayAccountPaymentModalShow,{...M,location:i,initialTab:y}),N.logEvent("chatgpt_account_payment_modal_show",null,{location:i??""})},[M,y]),n.useEffect(()=>{const i=localStorage.getItem(`subscriptionUpdateMessage_${t.id}`);if(i){localStorage.removeItem(`subscriptionUpdateMessage_${t.id}`),w.success(i,{hasCloseButton:!0});const V=setTimeout(()=>{P()},5e3);return()=>{clearTimeout(V)}}},[t.id,w,P]);const[S,G]=n.useState(y),j=Xe(),_=j&&o!=="operator",B=i=>{G(i),h.logEvent(x.accountPayAccountPaymentModalToggleClicked,{selectedTab:i}),N.logEvent("chatgpt_account_payment_modal_toggle_clicked",null,{selectedTab:i})},{isCountrySelectorEnabled:A,countryWithFallback:k,initialBillingDetails:re}=_t(t),{currentLocale:ce}=et(),de=tt(ce),[W,Q]=n.useState(k),[X,ue]=n.useState(re),L=i=>{Ne.addAction("chatgpt_selected_country_changed_in_pricing_modal",{old_selected_country:W,new_selected_country:i}),h.logEvent(x.selectedCountryChangedInPricingModal,{old_selected_country:W,new_selected_country:i}),N.logEvent("chatgpt_selected_country_changed_in_pricing_modal",i,{old_selected_country:W,new_selected_country:i}),Q(i),ue({country:i,currency:at(i)})},R=136,[E,ee]=n.useState(),D=n.useRef(null);n.useEffect(()=>{const i=()=>{if(D.current){const V=document.documentElement.clientHeight,me=D.current.getBoundingClientRect().height,te=V-me;ee(Math.max(te,R))}};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[S]);const pe=Wt({analyticsParams:M,currentAccount:t,isPlanLoading:l,selectedTab:S,setIsPlanLoading:c,shouldSplitBetweenPersonalAndBusiness:_,isEnterpriseEnabled:!1,billingDetails:X,variant:o}),H=Vt({variant:o});return g||C||v?e.jsx(zt,{handleClose:P,analyticsParams:M,currentAccount:t,setIsPlanLoading:c,isPlanLoading:l||C,billingDetails:X,promoCode:g??"",promoMetadata:p,nonFooterContentRef:D,isEligible:f,isPromoLoading:C,promoError:v}):e.jsxs(K,{size:"fullscreen",isOpen:!0,onClose:P,type:"success",className:"flex flex-col",isProduceDesign:!0,children:[e.jsxs("div",{ref:D,children:[e.jsxs("div",{className:"relative grid grid-cols-[1fr_auto_1fr] px-6 py-4 md:pb-10 md:pt-[4.5rem]",children:[e.jsx("div",{}),e.jsxs("div",{className:"my-1 flex flex-col items-center justify-center md:mb-0 md:mt-0",children:[e.jsx("div",{className:"text-2xl font-semibold md:text-3xl",children:e.jsx(b,{...$t({variant:o,hasProSubscription:u})})}),H?e.jsx("div",{className:"mb-1 mt-3 text-token-text-secondary",children:e.jsx(b,{...H})}):null]}),e.jsx("button",{className:"justify-self-end text-token-text-primary opacity-50 transition hover:opacity-75 md:absolute md:right-6 md:top-6",onClick:()=>{P()},children:e.jsx(st,{className:xe({"h-5 w-5":!j,"icon-lg":j})})})]}),t.isPersonalAccount()&&_?e.jsx("div",{className:"mb-3 flex justify-center md:mb-10",children:e.jsx("div",{className:"w-[fit-content]",children:e.jsx(wt,{value:S,onChange:B})})}):null,e.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-3 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:pe})]}),o!=="operator"?e.jsxs("div",{className:"relative grid grid-cols-[1fr_auto_1fr]",style:{height:`${E}px`},children:[e.jsx("div",{}),e.jsxs("span",{className:"mb-12 mt-8 flex flex-col items-center justify-start gap-2 text-sm text-token-text-secondary md:mb-8 md:mt-8",children:[e.jsx(We,{}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(b,{...$.needMoreCapabilities}),e.jsx("div",{children:e.jsx(b,{...$.seeChatGptEnterprise,values:{link:i=>e.jsx(Z,{target:"_blank",to:we,onClick:()=>{h.logEvent(x.accountPayClickSeeEnterpriseLinkFromModal),N.logEvent("chatgpt_account_payment_modal_enterprise_link_clicked")},className:"mx-1 underline",children:i})}})})]})]}),e.jsx("span",{className:"justify-self-end text-token-text-primary opacity-50 transition hover:opacity-75 md:absolute md:bottom-4 md:right-4",children:A&&!d?e.jsx(kt,{value:W,onValueChange:L,displayNameFormatterFn:de,testId:"country-selector-in-pricing-modal"}):null})]}):null]})}function $t({hasProSubscription:t,variant:s}){return s==="operator"?$.operatorModalTitle:t?$.proModalTitle:$.modalTitle}function Vt({variant:t}){return t==="operator"?$.operatorModalSubtitle:null}const $=oe({modalTitle:{id:"AccountPaymentModal.modalTitle",defaultMessage:"Upgrade your plan"},proModalTitle:{id:"AccountPaymentModal.proModalTitle",defaultMessage:"Choose your plan"},operatorModalTitle:{id:"AccountPaymentModal.operatorModalTitle",defaultMessage:"Upgrade to ChatGPT Pro to try Operator"},operatorModalSubtitle:{id:"AccountPaymentModal.operatorModalSubtitle",defaultMessage:"Operator is currently only available to Pro users as an early research preview"},modalFooterCapabilities:{id:"AccountPaymentModal.modalFooterCapabilities",defaultMessage:"Need more capabilities? See <link> ChatGPT Enterprise </link>"},needMoreCapabilities:{id:"SdJWr7",defaultMessage:"Need more capabilities for your business?"},seeChatGptEnterprise:{id:"7C5fuF",defaultMessage:"See<link>ChatGPT Enterprise</link>"},promoNotEligibleMessage:{id:"AccountPaymentModal.promoNotEligibleMessage",defaultMessage:"Thanks for being a susbcriber. Since you already use ChatGPT Plus, you're not eligible for this offer."}});export{ts as A,es as a,Xt as i};
//# sourceMappingURL=hmqv3mstm7lqo1ho.js.map
