import{eX as A,aE as C,a7 as g,au as E,dm as R,L as y,C as O,ac as L,eS as v,P as w,a as M}from"./efuue3ezs0mj4ucx.js";import{f as S,e as x,z as b,r as i,av as j,j as s}from"./n1tvutderx19k1zs.js";import{A as T}from"./hmqv3mstm7lqo1ho.js";import{bB as o,bC as N}from"./c87uv1mutc86tiqk.js";import"./cyghe4iwyyd3wk8r.js";import"./hau51huxh66v0dxz.js";const P={pro:"chatgptpro",plus:"chatgptplusplan"},_=Object.keys(o),z={oiw216z:"sora_redirect",vza493q:"operator_redirect"};function D(r){r&&o[r]&&(window.location.href=o[r])}const V=A(function(){const[h]=S(),n=x(),u=C(),{plan:t}=b(),e=h.get("checkout_from"),l=i.useRef(!1),a=g(),p=i.useMemo(()=>a?.subscriptionAnalyticsParams,[a]),{value:c,isLoading:m}=E("1719651090");if(!t||!(t in P))throw j("/");return i.useEffect(()=>{if(!a||m||l.current)return;if(l.current=!0,e==="vza493q"){a.hasPaidSubscription()&&a.isPro()?window.location.href=o[e]:c||n("/");return}(async()=>{const d=e&&_.includes(e)?z[e]:"purchase_plan_redirect";try{e&&_.includes(e)&&y.setItem(O.CheckoutFrom,e);const f=await L.getCheckoutLink(u,"Sora",{plan_name:P[t],billing_details:{currency:v}});w.logEvent(M.accountPayPurchasePlanRedirect,{...p,plan:t,location:d}),window.location.href=f.url}catch{N(n,d)}})()},[n,u,t,e,p,m,c,a]),s.jsxs(s.Fragment,{children:[a&&e==="vza493q"&&c&&s.jsx(T,{currentAccount:a,variant:"operator",onClose:()=>D(e)}),s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:s.jsx(R,{})})]})});export{V as default};
//# sourceMappingURL=ca8s3zrl8ykgyrl8.js.map
