import{r,e as we,j as e,M as m,i as S,f as Te,k as xe}from"./ci5tkrccytan34lo.js";import{a4 as Ge,jl as Ve,bo as ze,jm as Fe,jn as Ke,a2 as k,O as A,q as ye,jo as _e,jp as ve,jq as qe,jr as He,z as Ce,y as Ye,js as Qe,jt as Ze,ju as Je,jv as $e,b7 as P,b8 as Oe,a6 as Xe,jw as et,jx as tt,fG as ot,jy as st,jz as nt,jA as at,jB as it,jC as lt,jD as ct,jE as rt,jF as dt,jG as ut,jH as gt,jI as mt,jJ as ht,jK as ft,jL as pt,jM as Mt,jN as xt,jO as Ct,jP as bt,jQ as St,jR as kt,jS as At,jT as Nt,jU as jt,jV as wt,jW as yt,jX as _t,jY as vt,jZ as Ot,j_ as Lt,j$ as Bt,a3 as Dt,b4 as E,U as be,k0 as Se,P as It,k1 as Et,k2 as Pt}from"./fztttvm3qzdvif1h.js";import{aK as Wt,at as Ut,e as h,aP as ke,aa as _,d7 as Le,B as x,z as Be,a6 as De,fD as Rt,fC as Tt,fB as Gt,L as Vt,eJ as zt,b8 as Ft,K as Kt,f8 as qt,gZ as Ae,f9 as Ht}from"./ccccre6vnqbb7l94.js";import{u as Yt,a as Qt,N as Zt,I as Jt}from"./a1fl09gjys8m3drr.js";import{b as $t}from"./o5dcel4w1cacawdo.js";import{b as Xt}from"./d6qfcfpf3ythcmx2.js";import{c as W}from"./bgu7mt464bd85qmz.js";const Ne="has-dismissed-welcome-back-modal",Ie=()=>{const[t,o]=r.useState(()=>sessionStorage.getItem(Ne)!=null),{layer:s}=Wt("3637408529"),n=s.get("is_no_auth_welcome_back_modal_enabled",!1),i=Ge(),{isUnauthenticated:a,isLoading:c}=Ut(),l=Ve(),d=$t(),u=()=>{o(!0),sessionStorage.setItem(Ne,"true")};return c?{isLoading:!0,isOpen:null,onClose:null}:{isLoading:!1,isOpen:a&&n&&!t&&l&&!i&&!d,onClose:u}},eo=({onClose:t})=>{const o=ze(),s=Fe(),n=Ke(w.signUpCta),i=s?"center":"bottom",{isOpen:a,onClose:c}=Ie();return r.useEffect(()=>{a&&(h.logEvent("No Auth Welcome Back Modal Shown"),ke.logEvent("chatgpt_no_auth_welcome_back_modal_shown"))},[a]),a?e.jsx(_,{testId:"modal-no-auth-welcome-back",isOpen:!0,onClose:Le,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:i,children:e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[e.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:e.jsx(m,{...w.title})}),e.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-lg",children:e.jsx(m,{...w.subtitle})}),e.jsx(x,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"welcome-login-button",onClick:()=>{o({authType:"login",callback:l=>{h.logLogInButtonClicked({provider:l,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(m,{...w.logInCta})}),e.jsx(x,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{o({authType:"signup",callback:l=>{h.logSignUpButtonClicked({provider:l,location:"No Auth Welcome Back Modal"})}})},children:e.jsx(m,{...n})}),e.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:l=>{l.preventDefault(),h.logEvent("No Auth Welcome Modal Stay Logged Out Link Clicked"),ke.logEvent("chatgpt_no_auth_welcome_back_modal_stay_logged_out_link_clicked"),t(),c()},"data-testid":"dismiss-welcome",children:e.jsx(m,{...w.stayLoggedOutLink})})]})}):null},w=we({title:{id:"NoAuthWelcomeBackModal.title",defaultMessage:"Welcome back"},subtitle:{id:"7WQi5y",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},signUpCta:{id:"NoAuthWelcomeBackModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthWelcomeBackModal.logInCta",defaultMessage:"Log in"},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),to="https://persistent.oaistatic.com/chatgpt/internal-knowledge-promo-video.mp4",oo="https://persistent.oaistatic.com/chatgpt/internal-knowledge-promo.png",so=()=>{const{isLoading:t,eligible:o}=k(A.hasSeenContextualAnswerAdminNuxModal),s=ye(),n=_e(),i=W(),{connectionInstanceData:a,isLoading:c}=ve({skip:!s||n}),l=t||c,d=Be(),p=!!(d?.isAdminOfAccount()||d?.isOwnerOfAccount())&&o&&s&&!n&&a?.connection_statuses.length===0&&!i?.can_see_system_hint_announcement;return l?"loading":p?"show":"hide"},no=()=>{const{isLoading:t,eligible:o}=k(A.hasSeenContextualAnswerUserNuxModal),s=ye(),n=_e(),i=W(),{connectionInstanceData:a,isLoading:c}=ve({skip:!s||n}),l=t||c,d=o&&s&&!n&&(a?.connection_statuses.length??0)>0&&(a?.connection_statuses.some(u=>u.user_connection_details.auth_status==="not_connected")??!1)&&!i?.can_see_system_hint_announcement;return l?"loading":d?"show":"hide"},Ee=({onClose:t,title:o,description:s,secondaryButton:n,primaryButton:i})=>{const a=S(),[c,l]=r.useState(!1);return e.jsxs(_,{testId:"modal-ca-nux",isOpen:!0,noPadding:!0,onClose:t,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"max-w-md",children:[e.jsxs("div",{className:"relative h-[200px]",children:[e.jsx(De,{onClick:t,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"}),e.jsx("video",{src:to,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>l(!0)}),!c&&e.jsx("img",{src:oo,alt:a.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"})]}),e.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-8 pb-10 text-center",children:[e.jsx("div",{className:"text-xl font-medium",children:o}),e.jsx("div",{className:"text-md text-token-text-secondary",children:s}),e.jsxs("div",{className:"mt-5 flex justify-center gap-3",children:[n,i]})]})]})},ao=({onClose:t})=>{const o=S(),s=Te(),{markAsViewed:n}=k(A.hasSeenContextualAnswerAdminNuxModal);r.useEffect(()=>{h.logEventWithStatsig("Contextual Answers Admin Nux Modal Shown","chatgpt_contextual_answers_admin_nux_modal_shown")},[]);const i=()=>{h.logEventWithStatsig("Contextual Answers Admin Nux Modal Confirmation Button Clicked","chatgpt_contextual_answers_admin_nux_modal_confirmation_button_clicked"),n(),t(),s("/admin/ca")},a=()=>{n(),t()},c=o.formatMessage({id:"MU76mM",defaultMessage:"Introducing internal knowledge in ChatGPT"}),l=o.formatMessage({id:"j/qm6r",defaultMessage:"Connect Google Drive to personalize ChatGPT’s answers. You control what’s connected, and ChatGPT respects existing permissions."}),d=e.jsx(x,{color:"secondary",onClick:()=>{window.open(Ce,"_blank"),Ye({link:Ce,location:"admin_nux_modal"})},children:e.jsx(m,{id:"ltVYd/",defaultMessage:"Learn more"})}),u=e.jsx(x,{color:"primary",onClick:()=>i(),children:e.jsx(m,{id:"zeZEKl",defaultMessage:"Connect"})});return e.jsx(Ee,{onClose:a,title:c,description:l,secondaryButton:d,primaryButton:u})},io=({onClose:t})=>{const o=S(),{markAsViewed:s}=k(A.hasSeenContextualAnswerUserNuxModal);r.useEffect(()=>{h.logEventWithStatsig("Contextual Answers User Nux Modal Shown","chatgpt_contextual_answers_user_nux_modal_shown")},[]);const[n,i]=r.useState("nux"),{gDriveOAuthConnectionId:a,refetch:c,isLoading:l}=qe(),d=()=>{h.logEventWithStatsig("Contextual Answers User Nux Modal Confirmation Button Clicked","chatgpt_contextual_answers_user_nux_modal_confirmation_button_clicked"),s(),a?i("gDriveOauth"):(t(),Ze())},u=()=>{s(),t()},p=o.formatMessage({id:"OLuM1V",defaultMessage:"ChatGPT can now use internal knowledge"}),v=o.formatMessage({id:"2xspO2",defaultMessage:"Your admin connected your organization’s Google Drive, so ChatGPT can now use your team’s docs and slides to give you more personalized answers."}),O=e.jsx(x,{color:"secondary",onClick:u,children:e.jsx(m,{id:"KfJU7d",defaultMessage:"Maybe later"})}),L=e.jsx(x,{color:"primary",onClick:()=>d(),loading:l,icon:a&&Qe,children:e.jsx(m,{id:"aOsuFy",defaultMessage:"Connect now"})});return e.jsxs(e.Fragment,{children:[n==="gDriveOauth"&&a&&e.jsx(He,{onClose:t,isAdminFlow:!1,connectionId:a,location:"user_nux_modal",onSuccess:c}),n==="nux"&&e.jsx(Ee,{onClose:u,title:p,description:v,secondaryButton:O,primaryButton:L})]})},lo="https://persistent.oaistatic.com/chatgpt/connector-promo-light.png",co=()=>{const{isLoading:t,eligible:o}=k(A.hasSeenConnectorsNuxModal),s=W(),n=t,i=o&&s?.enabled&&s?.can_see_system_hint_announcement;return n?"loading":i?"show":"hide"},ro=({onClose:t,title:o,description:s,secondaryButton:n,primaryButton:i})=>{const a=S();return e.jsxs(_,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:t,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[e.jsxs("div",{className:"relative h-[213px]",children:[e.jsx(De,{onClick:t,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),e.jsx("img",{src:lo,alt:a.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"})]}),e.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[e.jsx("div",{className:"text-[22px] leading-7 font-medium",children:o}),e.jsx("div",{className:"text-token-text-secondary",children:s}),e.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[n,i]})]})]})},uo=({onClose:t})=>{const o=S(),s=Be(),n=!!(s?.isAdminOfAccount()||s?.isOwnerOfAccount()),{markAsViewed:i}=k(A.hasSeenConnectorsNuxModal);r.useEffect(()=>{h.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown")},[]);const a=()=>{h.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked"),i(),n?window.location.href="/admin/ca":(t(),window.location.hash="#settings/ConnectorSettings")},c=()=>{i(),t()},l=o.formatMessage({id:"l6VLn3",defaultMessage:"Your apps, smarter chats"}),d=o.formatMessage({id:"QTZ7a/",defaultMessage:"Find answers, summarize info, or get things done with tools you use every day."}),u=e.jsx(x,{color:"secondary",onClick:c,children:e.jsx(m,{id:"S6nkY/",defaultMessage:"Not now"})}),p=e.jsx(x,{color:"primary",onClick:()=>a(),children:e.jsx(m,{id:"1pAV1c",defaultMessage:"Connect apps"})});return e.jsx(ro,{onClose:c,title:l,description:d,secondaryButton:u,primaryButton:p})},go=({onClose:t})=>{const o=S(),s=P(Oe.isBusinessWorkspace),n=P(a=>a.currentWorkspace),i=s?o.formatMessage(je.workspaceWelcome,{workspaceName:n?.name}):"ChatGPT";return e.jsx(_,{testId:"modal-onboarding",isOpen:!0,onClose:Le,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:o.formatMessage(je.personalOnboardingSubheading),children:e.jsx(Et,{onClose:t,scope:Pt.Personal})})},mo=({onClose:t})=>{const o=Ht.useStore();return r.useEffect(()=>(o.setOnCloseSideEffect(t),o.setManualVisibility(!0),()=>{o.setManualVisibility(!1)}),[t,o]),null};function ko({clientThreadId:t,page:o}){const[s,n]=r.useState(0),{hasSeenOnboardingDate:i}=Je(),{hasSeenTeamOwnerOnboardingDate:a}=$e(),c=P(Oe.isBusinessWorkspace),[l,d]=r.useState(!1),u=xe(),p=Xe(u),{data:v,isPending:O,isEnabled:L}=et(),U=tt(v,O&&L),R=Rt(),T=Tt(),G=Gt(),[Pe,B]=Vt(t,g=>[!g||g.isLoading,g?.conversationOrigin]),D=Pe&&!!t,{data:f,isError:N}=zt(),I=Ft(f),C=f!=null,V=f&&f?.accountItems.length>1&&f.currentAccountId==null,z=f?.accountItems.some(g=>g.isPersonalAccount()),F=!!f?.accountItems&&f.accountItems.length>0&&f.accountItems.every(({canAccessWithCurrentSession:g})=>!g),{eligible:K,isLoading:q}=ot(),{value:H}=Kt("1542198993"),{punchOutRequireLoginInfo:Y}=st(),{state:Q}=nt(),{isOpen:Z,isLoading:J}=at(),{isOpen:$,isLoading:X}=it(),{isOpen:ee,isLoading:te}=lt(),{isOpen:oe,isLoading:se}=Ie(),{state:ne}=ct(),ae=rt(),ie=Yt(),le=Qt(),ce=so(),re=no(),de=co(),ue=dt(),ge=ut(),{isOpen:me,isLoading:he}=gt(),{isOpen:We}=Xt(),{shouldShowCookieBanner:fe,isCookieConsentBannerLoading:pe}=qt(),b=r.useMemo(()=>[{Component:mt,visibility:["chat","codex"],getModalState:()=>Y?"show":"hide",isDeferrable:!1},{Component:ht,visibility:["chat","codex"],getModalState:()=>Q,isDeferrable:!1},{Component:ft,visibility:["chat"],getModalState:()=>ne,isDeferrable:!1},{Component:pt,visibility:["chat"],getModalState:()=>he?"loading":me?"show":"hide",isDeferrable:!1},{Component:Zt,visibility:["chat"],getModalState:()=>le,isDeferrable:!0},{Component:Mt,visibility:["chat"],getModalState:()=>J||D?"loading":B===Ae.APPLE?"hide":Z?"show":"hide",isDeferrable:!0},{Component:eo,visibility:["chat"],getModalState:()=>se||D?"loading":B===Ae.APPLE?"hide":oe?"show":"hide",isDeferrable:!0},{Component:mo,visibility:["chat","codex"],getModalState:()=>pe?"loading":fe?"show":"hide",isDeferrable:!1},{Component:go,visibility:["chat"],getModalState:()=>c||p?"hide":i===null?"loading":i===!1?"show":"hide",isDeferrable:!0},{Component:xt,visibility:["chat","codex"],getModalState:()=>N?"hide":V?"show":C?"hide":"loading",isDeferrable:!1},{Component:Ct,visibility:["chat","codex"],getModalState:()=>R!==null?"show":N||C?"hide":"loading",isDeferrable:!1},{Component:bt,visibility:["chat","codex"],getModalState:()=>T!==null?"show":N||C?"hide":"loading",isDeferrable:!1},{Component:St,visibility:["chat","codex"],getModalState:()=>G!=null?"show":N||C?"hide":"loading",isDeferrable:!1},{Component:kt,visibility:["chat","codex"],getModalState:()=>C?F?"show":"hide":"loading",isDeferrable:!1},{Component:At,visibility:["chat","codex"],getModalState:()=>X?"loading":$?"show":"hide",isDeferrable:!1},{Component:Nt,visibility:["chat","codex"],getModalState:()=>te?"loading":ee?"show":"hide",isDeferrable:!1},{Component:jt,visibility:["chat","codex"],getModalState:()=>"hide",isDeferrable:!1},{Component:wt,visibility:["chat","codex"],getModalState:()=>!I?.isTeam()||!I?.isOwnerOfAccount()||!z?"hide":!C||a===null?"loading":a===!1?"show":"hide",isDeferrable:!1},{Component:yt,visibility:["chat","codex"],getModalState:()=>c?i===null?"loading":i===!1?"show":"hide":"hide",isDeferrable:!0},{Component:_t,visibility:["chat"],getModalState:()=>q?"loading":K&&H?"show":"hide",isDeferrable:!1},{Component:vt,visibility:["chat","codex"],getModalState:()=>U,isDeferrable:!1},{Component:Ot,visibility:["chat"],getModalState:()=>ae,isDeferrable:!1},{Component:j=>t&&e.jsx(It,{clientThreadId:t,children:e.jsx(Jt,{clientThreadId:t,...j})}),visibility:["chat"],getModalState:()=>ie,isDeferrable:!1},{Component:ao,visibility:["chat"],getModalState:()=>ce,isDeferrable:!1},{Component:io,visibility:["chat"],getModalState:()=>re,isDeferrable:!1},{Component:uo,visibility:["chat"],getModalState:()=>de,isDeferrable:!1},{Component:Lt,visibility:["chat"],getModalState:()=>ue,isDeferrable:!0},{Component:Bt,visibility:["chat"],getModalState:()=>ge,isDeferrable:!1}].filter(j=>j.visibility.includes(o)),[o,Y,Q,ne,he,me,le,J,D,B,Z,se,oe,pe,fe,c,p,i,N,V,C,R,T,G,F,X,$,te,ee,I,z,a,q,K,H,U,ae,t,ie,ce,re,de,ue,ge])[s],Ue=l;let M;b&&(b.isDeferrable&&Ue?M="hide":b.Component?M=b.getModalState():M="hide"),r.useEffect(()=>{M==="hide"&&n(s+1)},[s,M]);const{pathname:y}=xe(),Me=r.useRef(y);if(r.useEffect(()=>{Me.current!==y&&(Me.current=y,n(0))},[y]),r.useEffect(()=>{const g=M==="show",j=Dt.getState().activeModals.has(E.BlockingInitialComponent);g!==j&&(g?be.openModal(E.BlockingInitialComponent):be.closeModal(E.BlockingInitialComponent))},[M]),b==null)return Se.trackNamespace(Se.NS_COMPOSER),e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});if(M!=="show"||We)return null;const Re=b.Component;return e.jsx(Re,{onClose:()=>{d(!0),n(g=>g+1)}})}const je=we({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}});export{ko as B};
//# sourceMappingURL=91eskp17oms2am6q.js.map
