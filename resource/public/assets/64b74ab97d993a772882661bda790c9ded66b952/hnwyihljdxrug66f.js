import{i as ct,r as m,j as n,a5 as D,c as w,a6 as ft,ad as ut}from"./ci5tkrccytan34lo.js";import{i6 as Te,i7 as dt,g9 as Ae,i8 as N,i9 as mt,ia as xt,ib as pt,ic as ht,id as gt,ie as vt,fh as wt,aq as bt,ig as yt,ih as _t,ii as Re,ij as St,ik as je,il as Qe,fk as Tt,im as Rt,fV as jt,fW as At,fS as Et,fj as Nt}from"./fztttvm3qzdvif1h.js";import{d as Pt}from"./grqqoygx78z5w4fx.js";import{P as et}from"./hapan2fx2czn21gi.js";import{a5 as tt,c_ as st,aX as it,gR as Ct,c as te,eB as It,I as Dt,aR as Ft,u as Ot}from"./ccccre6vnqbb7l94.js";import{T as kt}from"./kzhevji8i57j71hk.js";function Mt({suggestionData:t,composerController:e}){const s=ct(),f=s.formatMessage(Te.researchSuggestionInitial),d=m.useMemo(()=>[s.formatMessage(Te.deepResearchPlaceholderBullet1),s.formatMessage(Te.deepResearchPlaceholderBullet2),s.formatMessage(Te.deepResearchPlaceholderBullet3)],[s]);return n.jsx(dt,{composerController:e,initialSuggestion:f,bulletPoints:d})}const Ge={type:"spring",stiffness:48.7,damping:13.54,mass:1};function vs({enabled:t,children:e,...s}){const i=Ae();return n.jsxs(D.div,{initial:{minHeight:0},animate:{minHeight:t?"142px":0},exit:{minHeight:0},transition:i?N:Ge,className:"flex flex-col justify-start",children:[e,t&&n.jsx(Mt,{...s})]})}const nt=.0025;function Bt({composerController:t,composerType:e,renderInComposer:s}){const i=m.useContext(tt),f=st(i),d=it(t.store,l=>l.controlsDisabled),a=mt(l=>{l.contentRect&&t.setWaveWidth(l.contentRect.width)}),r=m.useCallback((l,c,u)=>{if(!(t instanceof et))return;const h=t.getSelectionStart();t.setControlsDisabled(!1),requestAnimationFrame(()=>{const{state:p,dispatch:v}=t.view;v(p.tr.insertText(l,h,h)),requestAnimationFrame(()=>{t.setSelection(h+l.length)}),t.usedDictation=!0,t.dictationEdited=!1,t.dictationAssetPointer=c??null,t.dictationAssetTTL=u??null})},[t]);return{whisperControls:d?n.jsx(xt,{initialValue:nt,onSuccess:r,onWaveformDataUpdate:t.setWaveformData,onExit:()=>{t.setControlsDisabled(!1)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"}):n.jsxs(n.Fragment,{children:[!f&&n.jsx(pt,{size:"small",onExit:()=>{t.setControlsDisabled(!0)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"}),s?.()]}),waveContainerRef:a,handleTranscriptionSuccess:r}}const Lt=({composerController:t,placeholder:e,vanguard:s,composerConfigMenuType:i="tools",disableAutoFocus:f=!1,textareaMaxHeightClassName:d="max-h-[25dvh]"})=>{const a=m.useRef(null),r=m.useRef(null),{isMobileOS:x}=ht(),l=m.useRef(!1);return m.useEffect(()=>{if(l.current)return;if(!(t instanceof et))throw new Error(`Expected instance of ProseMirrorComposerController but got ${t.constructor.name}`);l.current=!0;const c=r.current;if(c!=null){const{value:u,selectionStart:h,selectionEnd:p}=c;t.view.dispatch(t.view.state.tr.insertText(u)),t.view.dispatch(t.view.state.tr.setSelection(kt.create(t.view.state.doc,h+1,p+1))),c.style.display="none",c.value=""}a.current.appendChild(t.view.dom),t.view.dom.id=gt,t.view.dom.dataset.virtualkeyboard="true",vt(t.view.dom),!wt()&&!Ct()&&!f&&requestAnimationFrame(()=>{t.view.focus()})},[t,f]),m.useEffect(()=>{t.setPlaceholder(e)},[e,t]),m.useEffect(()=>{t.logPageMount()},[]),n.jsxs("div",{ref:a,onKeyDown:bt.prefetch,className:te([_t["prosemirror-parent"],"text-token-text-primary",d,"max-h-52",i!=="none"&&"-mx-3 px-3","overflow-auto [scrollbar-width:thin]",It()?"firefox":"default-browser"],i!=="none"&&"vertical-scroll-fade-mask",s&&"min-h-12 pe-3"),children:[n.jsx("textarea",{className:te("text-token-text-primary placeholder:text-token-text-tertiary block h-10 w-full resize-none border-0 bg-transparent px-0 py-2 ring-0 placeholder:ps-px"),autoFocus:!x,placeholder:e,ref:r,"data-virtualkeyboard":!0}),n.jsx(yt,{scriptSrc:"window.__oai_logHTML?window.__oai_logHTML():window.__oai_SSR_HTML=window.__oai_SSR_HTML||Date.now();requestAnimationFrame((function(){window.__oai_logTTI?window.__oai_logTTI():window.__oai_SSR_TTI=window.__oai_SSR_TTI||Date.now()}))"})]})},Ze=48,Wt="/c/:conversationId",ws=t=>{"use forget";const e=w.c(117),{disableAutoFocus:s,isBigBoxModeActive:i,isTemporaryChat:f,placeholder:d,composerController:a,children:r,isExpandedByDefault:x,textareaMaxHeightClassName:l,onSubmit:c,shouldUseBigComposer:u}=t,h=s===void 0?!1:s,p=i===void 0?!1:i,v=x===void 0?!1:x;let P,C,y,S,T,b,R,j;e[0]!==r?(b=null,S=null,y=[],j=[],T=[],R=null,C=null,P=null,m.Children.forEach(r,o=>{if(m.isValidElement(o))if(o.type===qt){if(b!=null)throw new Error("PromptTextareaComposer only accepts a single submit button");b=o}else if(o.type===Yt){if(S!=null)throw new Error("PromptTextareaComposer only accepts a single header action");S=o}else o.type===Xt||o.type===zt?y.push(o):o.type===Kt?j.push(o):o.type===Jt?T.push(o):o.type===Gt?R=o:o.type===Ut?C=o:o.type===Vt&&(P=o)}),e[0]=r,e[1]=P,e[2]=C,e[3]=y,e[4]=S,e[5]=T,e[6]=b,e[7]=R,e[8]=j):(P=e[1],C=e[2],y=e[3],S=e[4],T=e[5],b=e[6],R=e[7],j=e[8]);const Ee=m.useRef(null),Ye=m.useRef(null);let ie;e[9]!==a?(ie={composerController:a,composerType:"legacy"},e[9]=a,e[10]=ie):ie=e[10];const{waveContainerRef:Ne}=Bt(ie),{controlsDisabled:Pe,waveformData:ne,waveWidth:Ce}=it(a.store),g=Re(Qt),I=Re(Zt),Je=m.useRef(!1),ae=Ae();let oe,re;e[11]!==a?(oe=o=>{const E=a.subscribe("focus",o),_=a.subscribe("blur",o);return()=>{_(),E()}},re=()=>a.isFocused(),e[11]=a,e[12]=oe,e[13]=re):(oe=e[12],re=e[13]);const le=m.useSyncExternalStore(oe,re,es),at=ts,ot=Dt(),Ie=!Ft(ot);let ce,fe;e[14]!==a?(ce=()=>a.subscribe("change",()=>{Je.current=!a.isEmpty()}),fe=[a],e[14]=a,e[15]=ce,e[16]=fe):(ce=e[15],fe=e[16]),m.useEffect(ce,fe);let ue,de;e[17]!==g||e[18]!==le||e[19]!==I?(de=()=>{le&&!g&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{I(!0)})})},ue=[le,g,I],e[17]=g,e[18]=le,e[19]=I,e[20]=ue,e[21]=de):(ue=e[20],de=e[21]),m.useEffect(de,ue);const A=Re(ss),De=m.useRef(A);let me,xe;e[22]!==A?(me=()=>{De.current=A},xe=[A],e[22]=A,e[23]=me,e[24]=xe):(me=e[23],xe=e[24]),Ot(me,xe);const se=Re(is),rt=m.useRef(null);let pe;e[25]!==v||e[26]!==I?(pe=o=>{const E=_=>{v||Je.current||o?.contains(_.target)||at(_)||I(!1)};return document.addEventListener("click",E),rt.current=o,()=>{document.removeEventListener("click",E)}},e[25]=v,e[26]=I,e[27]=pe):pe=e[27];const Fe=pe;let he;e[28]!==c?(he=o=>{o.preventDefault(),c(o)},e[28]=c,e[29]=he):he=e[29];const Oe=he,F=y.length>0,ke=j.length>0,[Me,lt]=m.useState(0),Be=ae?N:je,Le=u&&"min-h-52";let O;e[30]!==Le?(O=te("relative flex w-full flex-auto flex-col",Le),e[30]=Le,e[31]=O):O=e[31];let k;e[32]!==T?(k=T.length>0&&n.jsx("div",{className:"mb-2 flex flex-col gap-2 has-data-fullbleed:-mt-1 has-data-fullbleed:w-[calc(100%+1rem)]",children:T}),e[32]=T,e[33]=k):k=e[33];const We=g?1:0;let M;e[34]!==We?(M={opacity:We},e[34]=We,e[35]=M):M=e[35];const He=g?1:0;let B;e[36]!==He?(B={opacity:He},e[36]=He,e[37]=B):B=e[37];let ge;e[38]===Symbol.for("react.memo_cache_sentinel")?(ge={opacity:0},e[38]=ge):ge=e[38];const $e=ae?N:St;let L;e[39]!==S||e[40]!==M||e[41]!==B||e[42]!==$e?(L=n.jsx("div",{className:"items-top flex justify-center",children:n.jsx(D.div,{initial:M,animate:B,exit:ge,transition:$e,children:S})}),e[39]=S,e[40]=M,e[41]=B,e[42]=$e,e[43]=L):L=e[43];let ve;e[44]===Symbol.for("react.memo_cache_sentinel")?(ve={marginBottom:-18,translateX:0},e[44]=ve):ve=e[44];let we,be;e[45]===Symbol.for("react.memo_cache_sentinel")?(we={translateX:0},be={translateY:-7},e[45]=we,e[46]=be):(we=e[45],be=e[46]);const Ve=ae?N:je,Ue=p&&g;let W;e[47]!==a||e[48]!==h||e[49]!==p||e[50]!==g||e[51]!==Pe||e[52]!==d||e[53]!==l||e[54]!==Ce||e[55]!==ne?(W=Pe?ne?n.jsx(Tt,{className:p&&g?"mt-12":void 0,waveform:ne,containerWidth:Ce,scaleFactor:10,initialValue:nt}):null:n.jsx(Lt,{composerController:a,placeholder:d,disableAutoFocus:h,textareaMaxHeightClassName:l,vanguard:!0}),e[47]=a,e[48]=h,e[49]=p,e[50]=g,e[51]=Pe,e[52]=d,e[53]=l,e[54]=Ce,e[55]=ne,e[56]=W):W=e[56];let H;e[57]!==W?(H=n.jsx("div",{className:"max-w-full min-w-0 flex-1",children:W}),e[57]=W,e[58]=H):H=e[58];let $;e[59]!==H||e[60]!==Ne?($=n.jsx("div",{className:"flex min-h-12 items-start",ref:Ne,children:H}),e[59]=H,e[60]=Ne,e[61]=$):$=e[61];let V;e[62]!==a||e[63]!==C||e[64]!==Ue||e[65]!==$?(V=n.jsxs(Ht,{composerController:a,enabled:Ue,children:[$,C]}),e[62]=a,e[63]=C,e[64]=Ue,e[65]=$,e[66]=V):V=e[66];let U;e[67]!==Ve||e[68]!==V?(U=n.jsx(D.div,{initial:ve,onPointerDown:ns,animate:we,style:be,transition:Ve,className:"relative flex-auto bg-transparent pt-1.5",children:V}),e[67]=Ve,e[68]=V,e[69]=U):U=e[69];let q;e[70]!==L||e[71]!==U?(q=n.jsxs("div",{className:"relative mx-2.5 grid grid-cols-[auto_minmax(0,1fr)]",children:[L,U]}),e[70]=L,e[71]=U,e[72]=q):q=e[72];let ye;e[73]===Symbol.for("react.memo_cache_sentinel")?(ye=n.jsx("div",{className:"justify-content-end relative ms-2 flex w-full flex-auto flex-col",children:n.jsx("div",{className:"flex-auto"})}),e[73]=ye):ye=e[73];const qe=g&&(F||b)?Ze:0;let z;e[74]!==qe?(z={height:qe},e[74]=qe,e[75]=z):z=e[75];const ze=g&&(F||b)?Ze:0;let X;e[76]!==ze?(X={height:ze},e[76]=ze,e[77]=X):X=e[77];const Xe=ae?N:je;let K;e[78]!==z||e[79]!==X||e[80]!==Xe?(K=n.jsx(D.div,{initial:z,animate:X,transition:Xe}),e[78]=z,e[79]=X,e[80]=Xe,e[81]=K):K=e[81];let G;e[82]!==Be||e[83]!==O||e[84]!==k||e[85]!==q||e[86]!==K?(G=n.jsxs(D.div,{transition:Be,className:O,children:[k,q,ye,K]}),e[82]=Be,e[83]=O,e[84]=k,e[85]=q,e[86]=K,e[87]=G):G=e[87];let Y;e[88]!==y||e[89]!==F||e[90]!==ke||e[91]!==g||e[92]!==Ie||e[93]!==A||e[94]!==se||e[95]!==b||e[96]!==Me||e[97]!==j?(Y=(F||!!b)&&n.jsx("div",{className:"bg-primary-surface-primary absolute start-2.5 end-0 bottom-2.5 z-2 flex items-center",children:n.jsxs("div",{className:"w-full",children:[F&&g&&n.jsx("div",{"data-testid":"composer-footer-actions",className:te("flex items-center",Ie&&"max-xs:gap-1 gap-2 overflow-x-auto [scrollbar-width:none]",A&&"[--force-hide-label:none]"),ref:o=>Qe({debounce:!0,target:o,axis:"width",onChange:E=>{const{width:_}=E;o&&(De.current?De.current&&Ee.current!==null&&_>=Ee.current&&se(!1):Ye.current!==null&&_<Ye.current?se(!0):(Ee.current=o.scrollWidth,se(o.scrollWidth>o.clientWidth)))}}),style:{marginRight:`${Me+24}px`},children:y}),n.jsxs("div",{className:"absolute end-2.5 bottom-0 flex items-center gap-2","data-testid":"composer-trailing-actions",ref:o=>Qe({target:o,axis:"width",onChange:E=>{const{width:_}=E;lt(_)}}),children:[ke&&n.jsx("div",{className:"relative ms-1",children:j}),b]})]})}),e[88]=y,e[89]=F,e[90]=ke,e[91]=g,e[92]=Ie,e[93]=A,e[94]=se,e[95]=b,e[96]=Me,e[97]=j,e[98]=Y):Y=e[98];let J;e[99]!==G||e[100]!==Y?(J=n.jsxs("div",{className:"relative flex w-full items-end px-2.5 py-2.5",children:[G,Y]}),e[99]=G,e[100]=Y,e[101]=J):J=e[101];let Q;e[102]!==P||e[103]!==f||e[104]!==J?(Q=n.jsxs($t,{isTemporaryChat:f,children:[J,P]}),e[102]=P,e[103]=f,e[104]=J,e[105]=Q):Q=e[105];const Ke=!!R;let _e;e[106]===Symbol.for("react.memo_cache_sentinel")?(_e=n.jsx(Rt,{className:"w-full"}),e[106]=_e):_e=e[106];let Z;e[107]!==R?(Z=n.jsx(jt,{children:n.jsx(At,{side:"bottom",align:"start",sideOffset:12,onOpenAutoFocus:as,children:R})}),e[107]=R,e[108]=Z):Z=e[108];let ee;e[109]!==Ke||e[110]!==Z?(ee=n.jsxs(Et,{open:Ke,children:[_e,Z]}),e[109]=Ke,e[110]=Z,e[111]=ee):ee=e[111];let Se;return e[112]!==Fe||e[113]!==Oe||e[114]!==Q||e[115]!==ee?(Se=n.jsxs("form",{ref:Fe,className:"w-full [view-transition-name:var(--vt-composer)]",onSubmit:Oe,"data-type":"unified-composer",children:[Q,ee]}),e[112]=Fe,e[113]=Oe,e[114]=Q,e[115]=ee,e[116]=Se):Se=e[116],Se};function Ht(t){"use forget";const e=w.c(10),{composerController:s,children:i,enabled:f}=t,d=Ae(),a=f?"142px":0;let r;e[0]!==a?(r={minHeight:a},e[0]=a,e[1]=r):r=e[1];let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x={minHeight:0},e[2]=x):x=e[2];const l=d?N:je;let c;e[3]!==s?(c=h=>{s.isFocused()?h.preventDefault():s.focus()},e[3]=s,e[4]=c):c=e[4];let u;return e[5]!==i||e[6]!==r||e[7]!==l||e[8]!==c?(u=n.jsx(D.div,{initial:!1,animate:r,exit:x,transition:l,className:"flex flex-col justify-start",onClick:c,children:i}),e[5]=i,e[6]=r,e[7]=l,e[8]=c,e[9]=u):u=e[9],u}function $t(t){"use forget";const e=w.c(8),{children:s,isTemporaryChat:i}=t,f=Pt(),d=m.useContext(tt),a=st(d),r=i?"dark bg-[#303030]":"bg-token-bg-primary dark:bg-[#303030]";let x;e[0]!==r?(x=te("shadow-short flex w-full cursor-text flex-col items-center justify-center overflow-clip rounded-[28px] bg-clip-padding contain-inline-size",r),e[0]=r,e[1]=x):x=e[1];const l=x,c=`
    flex w-full cursor-text flex-col items-center justify-center
    border-t border-gray-100
    bg-token-bg-primary dark:bg-[#303030]
    bg-clip-padding contain-inline-size
    overflow-clip`;let u;e[2]!==f?(u=v=>{!f.isFocused()&&!v.defaultPrevented&&f.focus()},e[2]=f,e[3]=u):u=e[3];const h=a?c:l;let p;return e[4]!==s||e[5]!==u||e[6]!==h?(p=n.jsx(Nt,{onClick:u,className:h,children:s}),e[4]=s,e[5]=u,e[6]=h,e[7]=p):p=e[7],p}const Vt=t=>{"use forget";const e=w.c(17),{children:s}=t,i=Ae();let f;e[0]!==i?(f=i?N:{opacity:{delay:.2},default:Ge},e[0]=i,e[1]=f):f=e[1];const d=f;let a;e[2]!==i?(a=i?N:{opacity:{delay:0},default:Ge},e[2]=i,e[3]=a):a=e[3];const r=a;let x;e[4]===Symbol.for("react.memo_cache_sentinel")?(x={opacity:0,height:0,y:"-28px"},e[4]=x):x=e[4];let l;e[5]!==d?(l={opacity:1,y:0,height:"56px",transition:d},e[5]=d,e[6]=l):l=e[6];let c;e[7]!==r?(c={opacity:0,y:"-28px",height:0,transition:r},e[7]=r,e[8]=c):c=e[8];let u;e[9]!==l||e[10]!==c?(u={initial:x,animate:l,exit:c},e[9]=l,e[10]=c,e[11]=u):u=e[11];const h=u;let p;e[12]!==s||e[13]!==h?(p=s&&n.jsx(D.div,{variants:h,initial:"initial",animate:"animate",exit:"exit",className:"relative w-full",children:s}),e[12]=s,e[13]=h,e[14]=p):p=e[14];let v;return e[15]!==p?(v=n.jsx(ft,{children:p}),e[15]=p,e[16]=v):v=e[16],v},Ut=t=>{"use forget";const e=w.c(2),{children:s}=t;let i;return e[0]!==s?(i=n.jsx(n.Fragment,{children:s}),e[0]=s,e[1]=i):i=e[1],i},qt=t=>{"use forget";const e=w.c(2),{children:s}=t;let i;return e[0]!==s?(i=n.jsx("div",{className:"ms-auto flex items-center gap-1.5",onPointerDown:os,children:s}),e[0]=s,e[1]=i):i=e[1],i},zt=t=>{"use forget";const e=w.c(2),{children:s}=t;let i;return e[0]!==s?(i=s?n.jsx(n.Fragment,{children:s}):null,e[0]=s,e[1]=i):i=e[1],i},Xt=t=>{"use forget";const e=w.c(2),{children:s}=t;let i;return e[0]!==s?(i=n.jsx("div",{onPointerDown:rs,children:s}),e[0]=s,e[1]=i):i=e[1],i},Kt=t=>{"use forget";const e=w.c(2),{children:s}=t;let i;return e[0]!==s?(i=n.jsx("div",{onPointerDown:ls,children:s}),e[0]=s,e[1]=i):i=e[1],i},Gt=t=>{"use forget";const e=w.c(2),{children:s}=t;let i;return e[0]!==s?(i=n.jsx("div",{onPointerDown:cs,children:s}),e[0]=s,e[1]=i):i=e[1],i},Yt=t=>{"use forget";const e=w.c(2),{children:s}=t;let i;return e[0]!==s?(i=n.jsx("div",{onPointerDown:fs,children:s}),e[0]=s,e[1]=i):i=e[1],i},Jt=t=>{"use forget";const e=w.c(5),{children:s,width:i}=t,d=(i===void 0?"full":i)==="fit"?"w-fit":"w-full";let a;e[0]!==d?(a=te(d),e[0]=d,e[1]=a):a=e[1];let r;return e[2]!==s||e[3]!==a?(r=n.jsx("div",{className:a,onPointerDown:us,children:s}),e[2]=s,e[3]=a,e[4]=r):r=e[4],r};function Qt(t){return t.isExpanded}function Zt(t){return t.setIsExpanded}function es(){return!1}function ts(t){if(t.target instanceof HTMLElement){if(t.target.dataset.historyItemLink||t.target.parentElement?.dataset.historyItemLink)return!0;const e=t.target?.closest("a[href]");if(e instanceof HTMLAnchorElement)return!!ut({path:Wt,end:!1},new URL(e.href).pathname)}return!1}function ss(t){return t.isVisuallyOverflowing}function is(t){return t.setIsVisuallyOverflowing}function ns(t){return t.stopPropagation()}function as(t){return t.preventDefault()}function os(t){return t.stopPropagation()}function rs(t){return t.stopPropagation()}function ls(t){return t.stopPropagation()}function cs(t){return t.stopPropagation()}function fs(t){return t.stopPropagation()}function us(t){return t.stopPropagation()}export{zt as B,ws as C,Xt as F,Jt as H,nt as I,Lt as R,qt as S,vs as a,Gt as b,Ut as c,Mt as d,Bt as u};
//# sourceMappingURL=hnwyihljdxrug66f.js.map
