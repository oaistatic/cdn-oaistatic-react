import{r as d,i as b,j as e,M as u,e as D}from"./ci5tkrccytan34lo.js";import{gp as A,gq as I,ac as E,ex as j,B as N,ae as F,cX as L,K as k,cY as y,ev as p}from"./ccccre6vnqbb7l94.js";import{b6 as T,b9 as U,f2 as R,f3 as V,f4 as Y,f5 as z,f6 as B,v as x,f7 as G,f8 as H,f9 as J,a8 as a,fa as W,ba as _}from"./fztttvm3qzdvif1h.js";import{S as q}from"./73ej9l1128bvbut8.js";import{S as K}from"./k09abscj5rdhtj24.js";function O({voice:s}){const[i,o]=d.useState(!1),r=b(),t=A(),g=s.voice,l=s.preview_url,n=d.useRef({playPromise:null}).current,c=I(f=>f.isPlaying&&f.sourceUrl===l),S=E(),m=d.useCallback(async()=>{if(!t)return;const f={voice:g,source:l};j.previews.click(f);try{o(!0),t.changeSource(l),n.playPromise=t.play(),o(!1)}catch(C){j.previews.error(C,f),S.danger(r.formatMessage({id:"DeIYxH",defaultMessage:"Something went wrong playing preview"}))}},[r,t,l,g,n,S]),h=d.useCallback(()=>{t&&(n.playPromise?n.playPromise.then(()=>{t.stop(),n.playPromise=null}):t.stop())},[t,n]),P=d.useCallback(()=>{c?h():i||m()},[h,m,i,c]);return d.useEffect(()=>()=>{c&&h()},[s,c,h]),e.jsx(N,{onClick:P,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:i,icon:c?K:q,children:c?e.jsx(u,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(u,{id:"JwYDVp",defaultMessage:"Play"})})}const re={Trigger:X,Content:Q};function M(){return k("174366048")?.value}function X(){return M()?e.jsx(R,{value:V.Speech,icon:e.jsx(Y,{className:"icon-sm"}),label:e.jsx(u,{id:"speechSettings.trigger",defaultMessage:"Speech"})}):null}function Q(){const s=M(),i=F();if(!s)return null;const o=i?.length&&!i?.includes(L.VideoScreenSharing);return e.jsxs(z,{value:V.Speech,children:[e.jsx(x,{children:e.jsx(Z,{})}),B()&&e.jsx(x,{children:e.jsx($,{})}),o&&e.jsx(x,{children:e.jsx(ee,{})})]})}function w(s){const{data:i,isLoading:o}=T(s)||{},r=U();return{isLoading:o,value:i,setValue:t=>{r.mutate({setting:s,value:t})}}}function Z(){const{isLoading:s,value:i,setValue:o}=w(y.VoiceName),r=G(),t=H(),g=s?"":J(i,t),l=r.find(({voice:n})=>n===g);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(u,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[l?e.jsxs(e.Fragment,{children:[e.jsx(O,{voice:l}),e.jsx("div",{className:"h-4 border-s"})]}):null,e.jsxs(a.Root,{value:g,onValueChange:n=>o(n),disabled:s,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsx(a.Content,{children:r.map(({voice:n,name:c})=>e.jsx(a.Item,{value:n,children:c},n))})})]})]})]})})})}function $(){const{isLoading:s,value:i,setValue:o}=w(y.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(u,{id:"speechSettings.content.language",defaultMessage:"Main Language"})}),e.jsxs(a.Root,{value:s?"":i??p.Auto,onValueChange:r=>o(r),disabled:s,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsxs(a.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(a.Item,{value:p.Auto,children:e.jsx(u,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-Detect"})}),Object.entries(p).filter(([r,t])=>t!==p.Auto).map(([r,t])=>e.jsx(a.Item,{value:t,className:"capitalize",children:r},t))]})})]})]}),e.jsx(W,{children:e.jsx(u,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function ee(){const s=b();return e.jsx(_,{label:s.formatMessage(v.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:s.formatMessage(v.voiceAndScreenSharingDescription)})}const v=D({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}});export{re as S,w as u};
//# sourceMappingURL=5euj4p5b6ntfs0ir.js.map
