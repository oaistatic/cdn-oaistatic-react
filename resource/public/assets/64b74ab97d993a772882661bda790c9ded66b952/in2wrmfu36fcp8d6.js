import{fe as R,cZ as g,db as E,dH as M,aI as F,bJ as y,fd as B,bR as D}from"./ccccre6vnqbb7l94.js";import{D as H,p as O,f as A,r as o,a as N,j as e}from"./ci5tkrccytan34lo.js";import{r as _,t as T,a as p,u as k,s as L,C as b,b as Q,g as j,P as $,T as q,c as K,d as V}from"./fztttvm3qzdvif1h.js";import{C as G}from"./ripbggolk2hb9coi.js";import{T as J,C as W}from"./dy2stcb7i0v1tupc.js";import{g as Z}from"./jm451ka9dh0zq0oh.js";import{C as w,T as z}from"./i3iwctq0xt60nh9q.js";import{C as U}from"./grqqoygx78z5w4fx.js";import"./ehn8yucug7pv4ztd.js";import"./jy1u8exw8iz2slve.js";import"./48ooml6yvtknt927.js";import"./f76gy0b8ieo4s693.js";import"./gy64pge8qevmvg7e.js";import"./n3no0wqojk419ibl.js";import"./obtq7sfq52r3quc0.js";import"./m3p85h1r7wwh3ar4.js";import"./k09abscj5rdhtj24.js";import"./hapan2fx2czn21gi.js";import"./kzhevji8i57j71hk.js";import"./fry4relkhm829fbi.js";import"./brm2ak4qsea0c84s.js";import"./c576qrs41b9t65x5.js";import"./klnfiyrj7k551tnx.js";import"./k6feznao7t0jcslv.js";import"./o18ouakn8cm15oum.js";import"./ka28zal7zgew9liz.js";import"./ci2m3wbqqcn0abts.js";import"./fleacu6r5buu7d0q.js";import"./o44s14nukx2dxzhr.js";import"./jppil0z87oklini1.js";import"./ouhw3r04e64ny5cd.js";import"./kydr9ghab5t92b8t.js";import"./grb7n11yz9748g22.js";import"./h1rqozkinxrlxfws.js";import"./j3zg44ruze86crbd.js";import"./a1fl09gjys8m3drr.js";import"./k4lih7nb4umlxxxc.js";import"./bgu7mt464bd85qmz.js";import"./ln3t6yic0tgf7gor.js";import"./bb4l02lm4p1hlo2s.js";import"./o5dcel4w1cacawdo.js";import"./eykh2s3cx0s4wv4b.js";import"./nplnc7nfjbqgwb50.js";import"./d6qfcfpf3ythcmx2.js";import"./hnwyihljdxrug66f.js";import"./musjw8fjkljbblfz.js";import"./oqppwvh4icbsp0jr.js";import"./eek6z6v9ww7qwx26.js";import"./gu8jz4865kkdzo16.js";import"./h2gd34k3oh53zw7p.js";const Ze=()=>(_(),null),ze=R(function(){const r=H(),[s]=O(),l=A(),u=T(r.conversationId),n=p(s.get("readonly"),!1),c=p(s.get("isFullScreen"),!1),d=p(s.get("header"),!0),m=p(s.get("appPreview"),!1),a=g(()=>E()),C=g(()=>M()),P=p(s.get("hideBottomComposer"),!!n),i=T(r.canmoreId),t=u,f=k();o.useEffect(()=>{L({type:b.Textdoc,textdocId:i})},[i]),Q(t,{kind:F.PrimaryAssistant});const h=N();if(o.useEffect(()=>(y.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),y.releaseThread(t)}),[t,h]),o.useEffect(()=>{i||l("/")},[i,l]),o.useEffect(()=>{j().sendMessage({type:w.Loaded})},[i]),!i||f?.type!==b.Textdoc)return null;const I=()=>{j().sendMessage({type:w.Close})},S=n&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx($,{clientThreadId:t,children:e.jsx(U,{clientThreadId:t,children:e.jsx(q,{clientThreadId:t,children:m?e.jsx(B,{children:e.jsx(X,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(J,{clientThreadId:t,disableScroll:!a,textdocId:f.textdocId}),e.jsx(W,{})]}):e.jsx(z,{isEmbedded:!0,hideRunCode:!a,isFullScreen:c,hideHeader:!d,hideBottomComposer:P,isReadonlyFromQueryParam:n,hideRenameButton:C,clientThreadId:t,focusedTextdoc:f,onClose:I},"textdocContent")})})})]})}),X=({textdocId:x})=>{const r=o.useRef(null),s=K(x),[l,u]=o.useState(!1),n=s?.versions??[],c=D(n),d=o.useCallback(V(async m=>{const a=Z(m.type,m.content);if(r.current&&(a==="react"||a==="html")){u(!0);const v=r.current.evalAsync({language:a,code:m.content});for await(const C of v)console.debug(C)}u(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(G,{visuallyHidden:!l,ref:r,enableTransition:!0,title:""})};export{Ze as clientLoader,ze as default};
//# sourceMappingURL=in2wrmfu36fcp8d6.js.map
