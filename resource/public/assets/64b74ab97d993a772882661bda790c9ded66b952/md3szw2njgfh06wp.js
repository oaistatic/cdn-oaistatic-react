import{j as e,M as h,a5 as M,r as x}from"./ci5tkrccytan34lo.js";import{cs as p,ah as _,am as R,au as N,ct as S,cu as C,af as m,cv as E}from"./fztttvm3qzdvif1h.js";import{L as b,c as L,c6 as T,e as k,as as v,fQ as w,M as F,eV as z}from"./ccccre6vnqbb7l94.js";import{f as $}from"./f7jif0lf4ny3x7b9.js";function W({clientThreadId:t,turnIndex:a,messageId:n,scrollToHeader:o=p.Citations,shouldAnimateScroll:c,isInSidebar:i=!1}){const[r,u]=H(t,n),l=b(t,f=>v(w(F.getNode(f,n).message))),s=$(l,f=>f.entries).toSorted((f,j)=>(j?.pub_date??0)-(f?.pub_date??0)),d={clientThreadId:t,messageId:n,turnIndex:a};return e.jsxs("div",{className:L("bg-token-bg-primary flex w-full flex-col",i?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)] min-h-screen":"mt-0",i?"":"border-token-border-default border-t"),children:[u&&u.length>0&&e.jsx(g,{title:e.jsx(h,{id:"fYO0jL",defaultMessage:"Links"}),items:u,analyticsMetadata:{...d,linkType:"links"},scrollToHeader:o===p.Links,shouldAnimateScroll:c,messageId:n}),e.jsx(g,{title:e.jsx(h,{id:"dlVlo6",defaultMessage:"Citations"}),items:r,analyticsMetadata:{...d,linkType:"citation"},scrollToHeader:o===p.Citations,shouldAnimateScroll:c,messageId:n}),e.jsx(g,{title:e.jsx(h,{id:"Gz+4tE",defaultMessage:"More"}),items:s,analyticsMetadata:{...d,linkType:"search_result"},messageId:n,scrollToHeader:o===p.SearchResults,shouldAnimateScroll:c})]},`${a}-${t}`)}function g({title:t,items:a,analyticsMetadata:n,scrollToHeader:o,messageId:c,shouldAnimateScroll:i}){const r=x.useRef(null);return x.useEffect(()=>{r.current&&o&&setTimeout(()=>{r.current&&r.current.scrollIntoView({behavior:i?"smooth":"instant"})},300)},[o,i]),!a||a.length===0?null:e.jsxs("div",{ref:r,children:[e.jsx(y,{className:"border-token-border-light bg-token-bg-primary text-token-text-primary sticky top-0 z-1 flex h-[calc(var(--header-height,3.5rem)+1px)] items-center border-b px-6 pt-4 pb-4 text-sm font-medium",children:t}),e.jsx("div",{className:"flex flex-col px-3 py-2",children:a.map((u,l)=>e.jsx(y,{index:l,children:e.jsx(A,{item:u,analyticsMetadata:{...n,groupIndex:l},messageId:c},l)},`${t}-${l}`))})]})}function y({children:t,index:a=0,className:n=""}){return e.jsx(M.div,{className:n,initial:{opacity:0},animate:{opacity:1},transition:{delay:(a+1)*.03+.2},children:t})}function A({item:t,analyticsMetadata:a,messageId:n}){const o=t.attribution??_(t.url,"short"),c=r=>"ref_id"in r&&"content_type"in r;return e.jsxs(G,{analyticsMetadata:a,href:t.url,target:"_blank",rel:"noopener",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",onMouseEnter:()=>{m.setHighlightBySource(n,t)},onMouseLeave:()=>{m.clearHighlights()},children:[e.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[e.jsx(R,{url:t.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:e.jsx(N,{className:"icon-sm text-token-text-quaternary"})}),o,c(t)&&e.jsx(S,{searchResult:t,className:"text-token-text-tertiary inline h-4 w-4"})]}),e.jsx("div",{className:"line-clamp-2 text-sm font-semibold break-words",children:t.title}),(t.pub_date??t.snippet)&&e.jsxs("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:[t.pub_date&&e.jsx(C,{date:t.pub_date}),t.pub_date&&t.snippet&&" â€” ",t.snippet]})]})}const G=x.forwardRef(function(a,n){const{analyticsMetadata:o,...c}=a,{groupIndex:i,linkType:r,...u}=o,l={...T(u),url:a.href,section_index:(i+1).toString(),link_type:"text",section:r,section_location:"sidebar"};return x.useEffect(()=>{k.logEventWithStatsig("link_action","link_action",{...l,action:"show"})},[]),e.jsx("a",{ref:n,...c,onClick:s=>{a.onClick?.(s),s.stopPropagation(),k.logEventWithStatsig("link_action","link_action",{...l,action:"click"})}})}),H=(t,a)=>b(t,n=>{const o=v(z(n?.tree.getNodeByIdOrMessageId(a).message)),c=E(o);let i=[];const r=o.filter(s=>s.type==="navigation");r.length>0&&(i=r.flatMap(s=>s.domains.flatMap(d=>[{title:d.title,snippet:d.domain,url:d.url},...d.sub_domains.map(f=>({title:f.title,snippet:d.domain,url:f.url}))])));const u=o.filter(s=>s.type==="tldr").filter(s=>!s.used_as_navigation);u.length>0&&u.forEach(s=>{i.push({title:s.display_title,url:s.url})});const l=i.length>0?i:void 0;return[c,l]});export{y as AnimatedContainer,W as SearchSources};
//# sourceMappingURL=md3szw2njgfh06wp.js.map
