import{r as c,i as T,j as e,a5 as g,aj as Ne,ak as Me,al as Ie,a6 as pe,e as Te}from"./ci5tkrccytan34lo.js";import{iB as ye,dP as ne,ai as ve,dA as Ae,l2 as De,nB as He,iC as Re}from"./fztttvm3qzdvif1h.js";import{O as Le}from"./n3no0wqojk419ibl.js";import{p as Ve,j as Be,E as Ge,k as _e,f as Oe}from"./ehn8yucug7pv4ztd.js";import{Z as Pe}from"./jy1u8exw8iz2slve.js";import{E as Ue,T as Ze}from"./kzhevji8i57j71hk.js";import{c as M,ag as $e,bg as Fe}from"./ccccre6vnqbb7l94.js";function ze(t){const{doc:r,selection:i}=t,{$from:l,$to:m}=i,{pos:h}=l,{pos:f}=m,u=r.textBetween(h,f);try{const o=Ve(r,l),x=Be(r,m);return{sourceFrom:o,sourceTo:x,from:h,to:f,selectedText:u}}catch(o){ye.logError("Getting source selection",o)}return{selectedText:u,from:h,to:f}}const V={type:"spring",bounce:.2,duration:.5};function Ke(t){return t instanceof Ue}function xt(t){return t instanceof Ge}function Xe(){const t=_e(),r=Oe();return c.useMemo(()=>()=>t()??r(),[t,r])}const oe=t=>c.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.1918 8.90615C15.6381 8.45983 16.3618 8.45983 16.8081 8.90615L21.9509 14.049C22.3972 14.4953 22.3972 15.2189 21.9509 15.6652C21.5046 16.1116 20.781 16.1116 20.3347 15.6652L17.1428 12.4734V22.2857C17.1428 22.9169 16.6311 23.4286 15.9999 23.4286C15.3688 23.4286 14.8571 22.9169 14.8571 22.2857V12.4734L11.6652 15.6652C11.2189 16.1116 10.4953 16.1116 10.049 15.6652C9.60265 15.2189 9.60265 14.4953 10.049 14.049L15.1918 8.90615Z",fill:"currentColor"})),Se=({title:t,icon:r,size:i,opacity:l,initialHeight:m=i,initialScale:h=1,onClick:f,isConfirming:u,isSmall:o,onSubmit:x})=>{const p=T(),k=Ne(),[C,d]=c.useState(!1),y=ne(),B=()=>{d(!0)},E=()=>{d(!1)},N=e.jsx(g.div,{initial:{scale:h,opacity:0},animate:{scale:1,opacity:1,transition:{type:"spring",bounce:.24,duration:.52}},exit:{scale:.5,opacity:0,transition:{type:"spring",bounce:.24,duration:.52,opacity:{duration:.1}}},whileHover:{scale:1.15},transition:V,children:e.jsx(g.div,{className:"flex cursor-pointer items-start overflow-hidden",initial:{width:i,height:i},animate:{width:i,height:i},transition:V,onMouseEnter:B,onMouseLeave:E,children:u?e.jsx(g.button,{className:"m-auto h-8 w-8 rounded-full bg-black text-center dark:bg-white",initial:{opacity:0,scale:.64},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.64},transition:{type:"spring",duration:.32,bounce:.14},onClick:x,children:e.jsx(oe,{className:M("animate-pulsing h-8 w-8 text-white dark:text-black",o?"icon-md":"icon-lg")})}):r})});return e.jsx(g.div,{role:"button",onClick:f,initial:{height:m},animate:{height:i,opacity:u?1:l??.52},exit:{height:0},whileHover:{opacity:1},transition:V,children:y?e.jsx(ve,{open:k?!!(u||C):!1,label:p.formatMessage(t),side:"left",contentClassName:"pointer-events-none",children:N}):N})};function ge({accelerator:t,size:r,opacity:i,onClick:l,onSubmit:m,disableHeightAnimation:h=!1,disableLabel:f=!1,isCancelledScrubber:u=!1,isSmall:o=!1,isConfirming:x}){const{title:p,icon:k}=t,C=ne(),d=T();return e.jsxs("div",{className:"relative",children:[!C&&!f&&e.jsx(g.div,{className:"text-token-text-secondary absolute end-full top-1/2 w-[160px] -translate-y-1/2 transform pe-4 text-end text-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:d.formatMessage(p)}),e.jsx(Se,{size:r,onClick:l,opacity:i,initialHeight:u||h?"auto":0,initialScale:u?.88:.5,title:p,isSmall:o,isConfirming:x,onSubmit:m,icon:e.jsx(k,{className:M("text-token-primary m-auto",o?"icon-md":"icon-lg")})})]})}function Je({title:t,onSubmit:r,icon:i}){const l=T(),m=i;return e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"text-token-text-secondary hover:text-token-text-primary flex aspect-square w-20 max-w-20 min-w-20 cursor-pointer flex-col items-center rounded-2xl p-3 transition-colors hover:bg-gray-100/75 dark:hover:bg-gray-700",children:[e.jsx(m,{className:"icon-2xl m-auto"}),e.jsx("div",{className:"line-clamp-1 w-16 max-w-16 overflow-hidden text-center text-xs",children:l.formatMessage(t)})]})}function Qe({grid:t,onSubmit:r,title:i}){const l=T();return e.jsxs("div",{className:"flex h-full flex-col content-center gap-y-4 overflow-x-hidden px-3 py-4",children:[e.jsx("div",{className:"text-token-primary mt-1 text-center font-medium",children:i}),e.jsx("div",{className:"flex-auto",children:e.jsx("div",{className:"grid grid-cols-2 gap-1",children:t.map((m,h)=>e.jsx(Je,{title:m.title,icon:m.icon,onSubmit:f=>{const u=t[h];"prompt"in u&&r?.(f,l.formatMessage(u.prompt))}},h))})})]})}function We({title:t,onClick:r,isConfirming:i,onSubmit:l,isAnyItemConfirmed:m}){const h=T();return e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:M("flex-item my-1 flex min-w-40 cursor-pointer items-center overflow-hidden rounded-2xl py-2 ps-4 pe-2 font-medium text-clip whitespace-nowrap transition-colors hover:bg-gray-100/75 dark:hover:bg-gray-700",{"bg-gray-100/50 dark:bg-gray-700/50":i,"text-token-text-secondary hover:text-token-text-primary":!i&&m}),children:[e.jsx("div",{className:"flex-auto",children:h.formatMessage(t)}),e.jsx(g.button,{className:M("ms-3 h-6 w-6 rounded-full bg-black text-center dark:bg-white",{"pointer-events-none invisible":!i}),initial:{opacity:0,scale:.64},animate:{opacity:i?1:0,scale:i?1:.64},transition:{type:"spring",duration:.32,bounce:.14},onClick:l,children:e.jsx(oe,{className:M("icon-sm h-6 w-6 text-white dark:text-black")})})]})}function Ye({menu:t,onConfirm:r,onSubmit:i}){const[l,m]=c.useState(!1),h=T();return e.jsx("div",{className:"h-full flex-col content-center overflow-x-hidden px-3",children:t.map((f,u)=>e.jsx(We,{title:f.title,isConfirming:l===u,isAnyItemConfirmed:l!==!1,onClick:()=>{m(u),r?.()},onSubmit:o=>{const x=t[u];"prompt"in x&&i?.(o,h.formatMessage(x.prompt))}},`menu-item-${f.title}`))})}const qe=t=>"isCancel"in t&&t.isCancel,be=280;function et(t,r,i){if(i===r)return 1;const l=(t-r)/(i-r);return Ae(l,0,1)}function tt({size:t,acceleratorScrubber:r,onConfirm:i,onCancel:l,onSubmit:m,onDragStart:h,isConfirming:f}){const{icon:u}=r,o="scrub"in r?r.scrub:[],x=6,p=t-x*2,k=T(),C=c.useRef(null),d=c.useRef(null),[y,B]=c.useState(o?Math.floor(o.length/2):0),E=Math.round(y),N=c.useRef(y),v=o?k.formatMessage(o[E].title):null,A=Me(0);Ie(A,"change",I=>{const z=-137+p/2,H=(be-x)/2-p/2,R=et(I,z,H)*(o?o.length-1:0);N.current=R,B(R)});const D=()=>{if(!o||qe(o[E])||f)return l?.();o&&i?.()},G=I=>{I.preventDefault(),!(!o||!f||!("prompt"in o[E]))&&m?.(I,k.formatMessage(o[E].prompt))};return e.jsx(g.div,{ref:C,className:"start-items relative z-20 flex w-full",style:{top:x,height:be-x*2},children:e.jsx(g.div,{drag:"y",ref:d,dragConstraints:C,dragMomentum:!1,dragElastic:0,className:M("border-token-border-default m-auto rounded-full border shadow-md transition-colors",f?"cursor-pointer bg-black dark:bg-white":"bg-token-main-surface-primary cursor-grab"),style:{y:A,width:p,height:p},onDragStart:h,onDragEnd:D,children:e.jsx(ve,{open:!0,label:v,side:"right",children:e.jsx("div",{className:"flex h-full w-full items-start overflow-hidden",children:f?e.jsx(oe,{onClick:G,className:"icon-lg animate-pulsing mx-auto h-10 w-10 translate-y-0.5 text-white dark:text-black"}):e.jsx(u,{className:M("text-token-primary icon-lg m-auto")})})})})})}const W=280,nt=235,we=1250,ot=56,it=32,st=28;function rt({top:t}){return e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute start-1/2 m-auto h-1 w-1 -translate-x-1/2 rounded-full bg-gray-300",style:{top:t}})}function pt({bottom:t=20,right:r=20,isEmbeddedInPromptArea:i=!1,disableHint:l=!1,disableOverlay:m=!1,onCancel:h,onExpandedChange:f,onSubmit:u,isRequestActive:o=!1,isVisuallyHidden:x=!1,actions:p}){const[k,C]=c.useState(!1),[d,y]=c.useState(!l&&!o),[B,E]=c.useState(!0),[N,v]=c.useState(null),[A,D]=c.useState(!1),[G,I]=c.useState(!1),[z,H]=c.useState(!1),[w,R]=c.useState(null),[P,Y]=c.useState(null),[U,q]=c.useState(null),ie=!B,se=$e(),K=i&&!d,s=K?it:ot,re=T(),ae=ne(),je=Xe(),S=c.useRef(null),j=o||k,Z=o&&!d&&B;c.useEffect(()=>{d&&!G&&I(!0),f?.(d)},[d,G]),c.useEffect(()=>{A&&!j&&!w&&(S.current!=null&&clearTimeout(S.current),y(!0)),!A&&!j&&!w&&(S.current!=null&&clearTimeout(S.current),S.current=window.setTimeout(()=>{y(!1),v(null),H(!1)},we))},[A,j,w,d]),c.useEffect(()=>{if(o){v(null);return}C(!1),!G&&!l&&(I(!0),y(!0),S.current!=null&&clearTimeout(S.current),S.current=window.setTimeout(()=>{y(!1),v(null),H(!1),I(!0)},we))},[o,l,G]);const ee=n=>{v(n)},X=(n,a,b)=>{D(!1),C(!0),y(!1),v(null),H(!1),R(null),Y(null),q(null);const Q=je(),xe=(O,F)=>{ye.logButtonClick(Re.ACCELERATOR,{action:{action:b.action,id:b.id,title:b.title},prompt:a,sourceFrom:O,sourceTo:F})};if(Q&&Ke(Q)){const{state:O}=Q,{sourceFrom:F,sourceTo:te}=ze(O);if(xe(F,te),F==null||te==null){u?.(n,null,a,b);return}u?.(n,{start:F,end:te},a,b);const Ee=O.tr.setSelection(Ze.create(O.doc,O.selection.anchor));Q.dispatch(Ee);return}xe(),u?.(n,null,a,b)},J=p[0],ke=p.slice(1),$=!!w&&p.find(({id:n})=>n===w),L=!!P&&p.find(({id:n})=>n===P),_=!!U&&p.find(({id:n})=>n===U),ce=(n,a)=>{if(ie)return;if(!A){D(!0);return}const{id:b}=a;if("scrub"in a)return R(b);if("menu"in a)return Y(b);if("grid"in a)return q(b);ee(b)},le=(n,a)=>{ie||"prompt"in a&&X(n,re.formatMessage(a.prompt),a)},Ce=ke.map(n=>{if(!d)return null;const{id:a}=n;return e.jsx(ge,{accelerator:n,isConfirming:a===N,isCancelledScrubber:z,size:s,onClick:b=>ce(b,n),onSubmit:b=>le(b,n)},a)}),ue=c.useRef(null);c.useEffect(()=>{const{current:n}=ue;if(n)return Fe(document,{mousedown:({target:a})=>{a instanceof HTMLElement&&!n.contains(a)&&(y(!1),v(null),H(!1),D(!1),R(null),Y(null),q(null))}})},[w,P,U]);const de=Math.round(W/s)*2,me=[];let fe=0;for(let n=0;n<de-1;n++)fe+=W/de,me.push(e.jsx(rt,{top:fe}));const he=e.jsx(g.div,{ref:ue,initial:{opacity:0,scale:.85,borderRadius:s/2},exit:{opacity:0,borderRadius:s/2},className:M("border-token-border-default absolute overflow-visible border transition-colors select-none",Pe.accelerators,{"pointer-events-none":x,"bg-token-main-surface-primary shadow-xl":d&&!w&&!o,"bg-token-main-surface-primary shadow-lg":!d&&!w&&!o&&!i,"bg-token-main-surface-primary border-transparent shadow-sm":!d&&!w&&!o&&i,"bg-token-main-surface-secondary border-transparent":w&&!o,"bg-token-main-surface-primary":o&&!Z,"bg-black! text-white!":!se&&Z,"bg-white! text-black!":se&&Z}),style:{right:r,bottom:t},animate:{scale:j||Z||k?.85:1,opacity:x?0:1,borderRadius:P&&L&&!j||U&&_&&!j?st:s/2},onHoverStart:()=>{S.current!=null&&clearTimeout(S.current),D(!0)},onHoverEnd:()=>D(!1),children:e.jsx(pe,{children:P&&L&&"menu"in L&&!j?e.jsx(g.div,{initial:{height:s,width:s},transition:V,animate:{height:W,width:"auto"},exit:{height:s,width:s},children:e.jsx(Ye,{isConfirming:N===L.id,onConfirm:()=>ee(L.id),onSubmit:(n,a)=>X(n,a,L),menu:L.menu})}):U&&_&&"grid"in _&&!j?e.jsx(g.div,{initial:{height:s,width:s},transition:V,animate:{height:nt,width:"auto"},exit:{height:s,width:s},children:e.jsx(Qe,{title:re.formatMessage(_.title),onSubmit:(n,a)=>X(n,a,_),grid:_.grid})}):w&&$&&!j?e.jsxs(g.div,{initial:{height:s,width:s},transition:V,animate:{height:W,width:s},exit:{height:s,width:s},onClick:()=>{v(null)},children:[e.jsx(tt,{onDragStart:()=>v(null),isConfirming:N===$.id,onConfirm:()=>ee($.id),onSubmit:(n,a)=>X(n,a,$),onCancel:()=>{R(null),H(!0)},size:s,acceleratorScrubber:$}),me]}):e.jsxs(g.div,{className:"flex flex-col",initial:i?!1:{height:s,width:s},transition:V,animate:{height:d?s*p.length:s,width:s},exit:{height:s,width:s},onAnimationComplete:()=>E(!0),onAnimationStart:()=>E(!1),children:[e.jsx(pe,{children:Ce}),e.jsx("div",{className:"flex items-center",style:{width:s,height:s},children:j?Z?e.jsx(Se,{title:at.cancel,icon:e.jsx(De,{className:M("animate-pulsing m-auto shrink-0",K?"h-6 w-6":"h-10 w-10")}),isSmall:K,opacity:1,size:s,onClick:()=>{v(null),h?.()}}):e.jsx(He,{size:20,className:"text-token-text-secondary m-auto"}):e.jsx(ge,{disableHeightAnimation:i,disableLabel:ae||!d,isCancelledScrubber:z,accelerator:J,isConfirming:N===J.id,opacity:d?void 0:1,isSmall:K,size:s,onSubmit:n=>le(n,J),onClick:n=>ce(n,J)})})]})})});return m||ae?he:e.jsxs(e.Fragment,{children:[d&&e.jsx(Le,{zIndexKey:"acceleratorsOverlay",className:"bg-white/95 dark:bg-black/85"}),he]})}const at=Te({cancel:{id:"Hov840",defaultMessage:"Cancel"}});export{pt as D,oe as S,xt as a,ze as g,Ke as i,Xe as u};
//# sourceMappingURL=k6feznao7t0jcslv.js.map
