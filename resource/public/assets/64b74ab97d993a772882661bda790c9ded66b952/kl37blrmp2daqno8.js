import{bj as G,aG as V,I as T,J as C,b0 as E,dG as M,b_ as w,gw as I,ew as P,aj as p,ap as k,aZ as b}from"./ccccre6vnqbb7l94.js";import{ds as S,e5 as A,e6 as x,dW as y,e7 as D,e8 as L,e9 as N}from"./fztttvm3qzdvif1h.js";import{r as d,p as U}from"./ci5tkrccytan34lo.js";import{g as j}from"./musjw8fjkljbblfz.js";function q({ctx:e,clientThreadId:o,threadState:s,searchParams:t,planType:a,isModelSticky:r}){if(s?.modelId)return s.modelId;if(!G(o))return;const n=t?.get("model");if(n&&!S(e,n))return n;const c=A();return c&&!S(e,c)&&r?c:x(a)}function W(e,o,s,t="short"){if(e!==void 0){if(o){const{modelLabel:a,fullModelLabel:r}=j(e,o);return t==="short"?a:r}switch(e){case"auto":return"";case"gpt-4o":return t==="short"?"4o":"GPT-4o";case"gpt-4o-mini":return t==="short"?"4o mini":"GPT-4o mini";case"gpt-4o-jawbone":return s.formatMessage({id:"8y5npr",defaultMessage:"Tasks"});case"gpt-4":return t==="short"?"4":"GPT-4";case"gpt-4-5":return t==="short"?"4.5":"GPT-4.5";case"o1":return"o1";case"o1-pro":return"o1 pro";case"o3-mini":case"o3-mini-high":case"o4-mini":case"o4-mini-high":case"o3":return e;default:return}}}const v=V(void 0);function z(e){const o=T(),s=k()?.planType,[t]=U(),a=M(e),r=a&&b(a),n=N();return q({ctx:o,clientThreadId:e,threadState:r,searchParams:t,planType:s,isModelSticky:!!n})}const H=({conversationId:e})=>{const o=T(),{voiceName:s}=y(),t=C(o,"3529298638").get("enabled",!1),a=E(o,"2209667701")||t,r=M(e),n=D(),c=d.useRef(!1),l=L(i=>i.isVoiceModeActive),f=w(),g=z(e)??I,u=d.useMemo(()=>({conversation_id:r??null,requested_voice_mode:"advanced",gizmo_id:f??null,voice:s??null,requested_default_model:g}),[r,s,f,g]);return d.useEffect(()=>{!a||c.current||l||(c.current=!0,n(u,"voice-status-cache").then(i=>{const{chatreq:m}=i;v.set({...i,proofOfWorkPromise:new Promise((h,_)=>{m?P.getEnforcementToken(m).then(h).catch(_):h(null)})})}).catch(i=>{i.code==="conversation_not_found"?p.addAction("voice-status-cache-conversation-not-found",{conversationId:u.conversation_id}):p.addError(new Error("Voice status cache failed"),i),v.set(void 0)}).finally(()=>{c.current=!1}))},[u,n,a,l]),null};export{H as V,q as a,v as b,W as g};
//# sourceMappingURL=kl37blrmp2daqno8.js.map
