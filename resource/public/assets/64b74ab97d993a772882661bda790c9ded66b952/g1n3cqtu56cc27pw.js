import{i as v,a as N,b as _,e as k,j as e,M as p}from"./ci5tkrccytan34lo.js";import{ac as S,b as T,c as q,ap as E,ah as O,ai as R}from"./ccccre6vnqbb7l94.js";import{bL as w,ba as B,ai as P,bM as U}from"./fztttvm3qzdvif1h.js";import{u as Q}from"./o6tnov12l4y47p1a.js";import{A}from"./je8s4flsbdmtns70.js";function h(){return e.jsx(w,{className:"icon-sm text-token-text-tertiary ms-1"})}function F({onChange:t,enabled:a,Icon:n,label:c,labelValues:l,description:o,onClickInfo:r,tooltip:i,tooltipValues:u,hasPadding:d=!0,className:m,disabled:x=!1,messageAfterTooltip:s=void 0}){return e.jsx(A,{className:q("justify-start",d?"py-6":"py-0",m),children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(B,{label:"",disabled:x,enabled:a,onChange:t}),e.jsxs("p",{className:"text-md inline-flex items-center",children:[n&&e.jsx(n,{className:"icon-md me-2"}),e.jsx(p,{...c,values:l}),i&&e.jsx(P,{interactive:!0,label:e.jsx(p,{...i,values:u}),side:"top",children:r?e.jsx("button",{className:"block h-full",onClick:r,children:e.jsx(h,{})}):e.jsx(h,{})}),s&&e.jsx("span",{className:"text-token-text-secondary ps-1 text-sm",children:e.jsx(p,{...s})})]})]}),o&&e.jsx("span",{className:"text-token-text-secondary ms-14 text-sm",children:e.jsx(p,{...o})})]})})}function D({workspaceId:t,Icon:a,label:n,onClickInfo:c,feature:l,value:o,tooltip:r,hasPadding:i=!0,className:u,disabled:d=!1,overrideDisplayValue:m=void 0,messageAfterTooltip:x=void 0}){const s=v(),j=S(),b=N(),{variables:y,mutate:g}=_({mutationFn:({feature:f,enabled:C})=>T.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:f,value:C}}),onSettled:()=>{b.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{j.danger(s.formatMessage(M.featureSettingsUpdateFailed))}});return e.jsx(F,{onChange:f=>{g({feature:l,enabled:f})},enabled:m??y?.enabled??o,Icon:a,label:n,tooltip:r,hasPadding:i,className:u,disabled:d,messageAfterTooltip:x,onClickInfo:c})}function G({connectorId:t,workspaceId:a,Icon:n,label:c,tooltip:l,tooltipValues:o,messageAfterTooltip:r,description:i,labelValues:u,disabled:d}){const m=v(),x=S(),s=N(),j=E(),{enabled:b,isLoading:y}=Q(t),{variables:g,mutate:f}=_({mutationFn:C=>T.safePost("/accounts/{account_id}/connectors/{connector_id}/workspace_permissions",{parameters:{path:{account_id:a,connector_id:t}},requestBody:{enabled:C}}),onSettled:()=>{s.invalidateQueries({queryKey:U(j?.normalizedAccountUserId)}),t===O[R.GITHUB_CONNECTOR]&&!g&&s.invalidateQueries({queryKey:["workspace-settings",a]})},onError:()=>{x.danger(m.formatMessage(M.featureSettingsUpdateFailed))}});return e.jsx(F,{onChange:f,enabled:g??!!b,Icon:n,label:c,labelValues:u,disabled:y||d,tooltip:l,tooltipValues:o,messageAfterTooltip:r,description:i})}const M=k({featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});export{D as B,h as S,G as W};
//# sourceMappingURL=g1n3cqtu56cc27pw.js.map
