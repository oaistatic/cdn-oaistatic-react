import{ga as S,ac as y,y as _,fe as b}from"./ccccre6vnqbb7l94.js";import{D as M,j as e,a9 as N,i as k,f as C,a as F,b as A,M as u}from"./ci5tkrccytan34lo.js";import{d2 as W}from"./fztttvm3qzdvif1h.js";import{R as P,I as o,S as l}from"./itczec45zs8zq1p7.js";import{E as R,R as U,g as D}from"./jxkb9zd5flmk25x5.js";import{u as T}from"./c5osa63br74ggouv.js";import{u as O,W as B,i as I,a as L}from"./t7vnx1cc2uzzkq81.js";import{W as $}from"./g8e8o1dzfmoj72zp.js";import"./b4s8a75elv2cgpiv.js";import"./paronsbbxy0k0fj0.js";import"./n8xzbxiejwlahre8.js";import"./cn3ovrj62d7r0re6.js";import"./ifp7qsxw68apsygx.js";import"./cagiacqajn9iuxi5.js";import"./dpavouct31i6z8p1.js";import"./k09abscj5rdhtj24.js";import"./j4mjggthdqynoz2x.js";import"./kwkjmzn9zjnazhqf.js";import"./j6dzpp4h0n6rdhxr.js";import"./b66nbpms5tshsnqk.js";import"./o6tnov12l4y47p1a.js";import"./k4lih7nb4umlxxxc.js";import"./m3p85h1r7wwh3ar4.js";import"./h1rqozkinxrlxfws.js";import"./j3zg44ruze86crbd.js";import"./grqqoygx78z5w4fx.js";import"./hapan2fx2czn21gi.js";import"./kzhevji8i57j71hk.js";import"./h2gd34k3oh53zw7p.js";import"./a1fl09gjys8m3drr.js";import"./bgu7mt464bd85qmz.js";import"./ln3t6yic0tgf7gor.js";import"./bb4l02lm4p1hlo2s.js";import"./o5dcel4w1cacawdo.js";import"./eykh2s3cx0s4wv4b.js";import"./nplnc7nfjbqgwb50.js";import"./d6qfcfpf3ythcmx2.js";import"./hnwyihljdxrug66f.js";import"./musjw8fjkljbblfz.js";function q(){const{environmentId:s}=M(),{eligible:i}=W();return i?e.jsx(N,{to:"/codex/onboarding"}):s?e.jsx(z,{environmentId:s}):e.jsx(S,{})}function z({environmentId:s}){const i=k(),a=y(),g=C(),m=F(),{data:n,isLoading:v,isError:h}=O(s),d=n?.secrets??{},x=T()?"workspace":"private",{mutate:f,isPending:E}=A({mutationFn:t=>B.updateEnvironment(s,t),onSuccess:async t=>{await I(m,s),L(m,s,t),a.success(i.formatMessage({id:"wham.editEnvironment.environmentUpdatedSuccessfully",defaultMessage:"Environment updated successfully"})),g(`/codex/settings/environment/${s}`)},onError:()=>{a.danger(i.formatMessage({id:"wham.editEnvironment.failedToUpdateEnvironment",defaultMessage:"Failed to update environment"}))}});function j(t){const r=D(t.secrets,d),w=t.envVars.reduce((c,p)=>(c[p.key]=p.value,c),{});f({label:t.label,repos:[t.repositoryId],machine_id:t.machine,setup:t.setupCommands,workspace_dir:t.workspaceDirectory,agent_network_access:t.agentNetworkAccess,description:t.description,share_settings:t.share_settings,secrets:r,env_vars:w})}return e.jsx($,{flex:!0,hideBorder:!0,showSidebar:!1,maxWidth:"w-full",children:v?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(_,{})}):h?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(u,{id:"wham.editEnvironment.errorLoadingEnvironment",defaultMessage:"Error loading environment"})}):n?e.jsxs(e.Fragment,{children:[e.jsxs(P,{className:"sticky top-0 px-4",children:[e.jsx(o,{label:i.formatMessage({id:"wham.editEnvironment.environments",defaultMessage:"Environments"}),url:"/codex/settings/environments",className:"text-token-text-tertiary"}),e.jsx(l,{}),e.jsx(o,{label:n.label,url:`/codex/settings/environment/${s}`,className:"font-medium"}),e.jsx(l,{}),e.jsx(o,{label:i.formatMessage({id:"wham.editEnvironment.edit",defaultMessage:"edit"}),className:"text-token-text-tertiary"})]}),e.jsx(R,{initialEnvironmentId:s,existingEnvironment:n,initialValues:{label:n?.label,description:n?.description??"",share_settings:n?.share_settings??x,machine:n?.machine_id,repositoryId:n?.repos[0],workspaceDirectory:n?.workspace_dir??"",agentNetworkAccess:n?.agent_network_access,setupCommands:n?.setup?Array.isArray(n?.setup)?n.setup.join(`
`):n.setup:"",envVars:Object.entries(n?.env_vars??{}).map(([t,r])=>({key:t,value:r})),secrets:Object.keys(d).map(t=>({key:t,value:U,isEditing:!1}))},primaryButtonText:i.formatMessage({id:"wham.editEnvironment.saveEnvironment",defaultMessage:"Save environment"}),onSubmit:j,isPending:E})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(u,{id:"wham.editEnvironment.environmentNotFound",defaultMessage:"Environment not found"})})})}const Ae=()=>[{title:"Codex"}],We=b(function(){return e.jsx(q,{})});export{We as default,Ae as meta};
//# sourceMappingURL=j5e11icma97g8f7e.js.map
