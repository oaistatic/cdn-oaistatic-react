import{r as c,u as Z,ah as Q,f as x,i as P,j as e,M as d,e as E,l as k,k as B}from"./ci5tkrccytan34lo.js";import{z as R,I as _,b0 as y,b as $,o as q,D as S,ac as K,fF as Y,B as J,F as v,ap as b,y as X,c as M,b9 as ee,e as se}from"./ccccre6vnqbb7l94.js";import{mw as ae,mx as te,my as ne,mz as ie,mA as re,mB as oe,kr as H,b7 as p,kA as ce,mC as le,mD as de,mE as me,hi as T,b8 as ue,mF as ge,mG as xe,mH as pe,mI as fe,mJ as he,U as L,mK as ve,dc as be,eN as je,b4 as Ce,eF as ye,mL as we,kQ as ke,ai as Se,mM as A,ad as Me,mN as Le,bm as Ae}from"./fztttvm3qzdvif1h.js";import{b as Ne,e as Pe}from"./j35k0ib6x4x2st6f.js";import{W as Ee}from"./ktm37gljdz6cbczg.js";import{d as D,a as I}from"./bj6lj4ia2dzck3r4.js";import{S as Be}from"./na990nyshzxxvwtf.js";import{S as Re}from"./grb7n11yz9748g22.js";import{e as _e}from"./h1rqozkinxrlxfws.js";function He({cycleEndDate:s,cycleIndex:a,referenceDate:t=new Date,period:n}){const r=n==="yearly"?ae:te,o=r(t,a),i=C(s,o,n);return ne(i,o)?{start:C(s,r(o,-1),n),end:i}:{start:i,end:C(s,r(o,1),n)}}function C(s,a,t){return ie(s,{year:oe(a),...t==="monthly"&&{month:re(a)}})}function is(s=0){const a=H();return c.useMemo(()=>{if(a.status==="pending")return"pending";const t=a.data,n=t?.next_credit_grant_update??t?.active_start??t?.active_until;if(!n)return;const r=t?.billing_period??"monthly";return He({cycleEndDate:new Date(n),cycleIndex:s,period:r})},[a,s])}function Te(){const s=R(),a=_(),n=y(a,"2861925050")&&s!=null&&s.isEnterprisey()&&s.isOwnerOfAccount()&&s.organizationId!=null,r=Z({queryKey:De(s?.organizationId),queryFn:()=>$.safeGet("/subscriptions/{organization_id}/at_overage_limit",{parameters:{path:{organization_id:s?.organizationId}}}),enabled:n});return n&&r.data?.organization_at_overage_limit===!0}function De(s){return["is-at-overage-limit",s]}const Ie=s=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 6C3 4.34315 4.34315 3 6 3H18C19.6569 3 21 4.34315 21 6V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6ZM5 13V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V13H17.5146C16.8687 13 16.2626 12.6881 15.8872 12.1625L14.5 10.2205L10.3137 16.0812C10.126 16.344 9.82295 16.5 9.5 16.5C9.17705 16.5 8.87398 16.344 8.68627 16.0812L6.48538 13H5ZM19 11V6C19 5.44772 18.5523 5 18 5H6C5.44772 5 5 5.44772 5 6V11H6.48538C7.13129 11 7.73743 11.3119 8.11285 11.8375L9.5 13.7795L13.6863 7.91876C13.874 7.65597 14.177 7.5 14.5 7.5C14.823 7.5 15.126 7.65597 15.3137 7.91876L17.5146 11L19 11Z",fill:"currentColor"})),We=s=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 7C2 5.34315 3.34315 4 5 4H19C20.6569 4 22 5.34315 22 7V17C22 18.6569 20.6569 20 19 20H5C3.34315 20 2 18.6569 2 17V7ZM4 11V17C4 17.5523 4.44772 18 5 18H19C19.5523 18 20 17.5523 20 17V11H4ZM20 9H4V7C4 6.44772 4.44772 6 5 6H19C19.5523 6 20 6.44772 20 7V9ZM14 15C14 14.4477 14.4477 14 15 14H17C17.5523 14 18 14.4477 18 15C18 15.5523 17.5523 16 17 16H15C14.4477 16 14 15.5523 14 15Z",fill:"currentColor"})),N=s=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.9357 2.08787C11.5863 1.6789 12.4137 1.6789 13.0643 2.08787L17.0643 4.60216L16.5322 5.44879L17.0643 4.60216C17.6466 4.96816 18 5.60767 18 6.29543V9.89909C18.0216 9.91158 18.0431 9.92451 18.0643 9.93787L22.0643 12.4522C22.6466 12.8182 23 13.4577 23 14.1454V17.7546C23 18.4423 22.6466 19.0818 22.0643 19.4478L18.0643 21.9621C17.4137 22.3711 16.5863 22.3711 15.9357 21.9621L12 19.4883L8.06434 21.9621L7.53217 21.1155L8.06434 21.9621C7.41371 22.3711 6.58629 22.3711 5.93566 21.9621L6.46783 21.1155L5.93566 21.9621L1.93566 19.4478C1.35338 19.0818 1 18.4423 1 17.7546V14.1454C1 13.4577 1.35338 12.8182 1.93566 12.4522L5.93566 9.93787C5.95692 9.92451 5.97837 9.91158 6 9.89909V6.29543C6 5.60767 6.35338 4.96816 6.93566 4.60216L10.9357 2.08787ZM6.99432 11.6347L3 14.1454L3 17.7546L7 20.2689L11 17.7546V14.1509C10.9784 14.1384 10.9569 14.1255 10.9357 14.1121L6.99432 11.6347ZM13 14.1509V17.7546L17 20.2689L21 17.7546V14.1454L17.0057 11.6347L13.0643 14.1121C13.0431 14.1255 13.0216 14.1384 13 14.1509ZM12 12.4117L8.06434 9.93787C8.04308 9.92451 8.02163 9.91158 8 9.89908L8 6.29543L12 3.78114L16 6.29543V9.89909C15.9784 9.91158 15.9569 9.92451 15.9357 9.93787L12 12.4117Z",fill:"currentColor"}));function rs(){return q(Q("routes/admin"))}function os(){const s=p(n=>n.currentWorkspace),a=s!=null?I(s.role):void 0,t=x();c.useEffect(()=>{a===!1&&t("/admin")},[a,t])}function cs(){const s=p(n=>n.currentWorkspace),a=s!=null?D(s.role):void 0,t=x();c.useEffect(()=>{a===!1&&t("/admin")},[a,t])}function Fe(){const s=ce(),a=S("3131667714").config.get("regions",[]),t=le(),n=S("1001765573");return s&&!a.includes(t)?!1:n.config.get("ca_admin_enabled",!1)}function Ve({accountId:s,subscription:a}){const t=P(),n=K(),r=de(s),[o,i]=c.useState(!1),m=me(s),g=async()=>{i(!0);try{await r.mutateAsync(s)}catch{n.warning(t.formatMessage(h.errorRenewingSubscription),{hasCloseButton:!0})}finally{i(!1)}};return e.jsx("div",{className:"bg-token-main-surface-secondary",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-2 py-4 md:px-6 lg:px-10 lg:py-6",children:[e.jsxs("div",{className:"mx-2 grow md:mx-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{className:"me-4 hidden text-orange-500 md:block"}),e.jsx("p",{className:"text-lg font-semibold",children:e.jsx(d,{...h.workspaceWillBeDeactivated})})]}),a.active_until!=null&&e.jsx("p",{className:"md:ms-8",children:e.jsx(d,{...h.retainAccessUntil,values:{expiryDate:new Date(a.active_until)}})})]}),m&&e.jsx(J,{color:"primary",onClick:g,loading:o,children:e.jsx(d,{...h.reactivateBtn})})]})})}const h=E({retainAccessUntil:{id:"adminPage.retainAccessUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},workspaceWillBeDeactivated:{id:"adminPage.workspaceWillBeDeactivated",defaultMessage:"This workspace will be deactivated."},reactivateBtn:{id:"adminPage.reactivateBtn",defaultMessage:"Reactivate"},errorRenewingSubscription:{id:"adminPage.errorRenewingSubscription",defaultMessage:"There was an error reactivating your subscription."}}),w="/admin/billing";function u({route:s,icon:a,upsellEnterprise:t=!1,...n}){const r=B().pathname.replace(/\/$/,"")||"/",o=x();return t?e.jsx(Se,{label:e.jsx(d,{...l.availableForEnterprise}),side:"right",children:e.jsxs(A,{$as:"button",className:M("w-full rounded-sm text-start","hover:bg-token-bg-elevated-secondary"),children:[e.jsx(Me,{className:"icon-sm text-token-text-secondary shrink-0"}),e.jsx("span",{className:"text-token-text-secondary",children:"name"in n?e.jsx(d,{...n.name}):n.children})]})}):e.jsxs(A,{$as:"button",className:M("hover:bg-token-sidebar-surface-secondary w-full rounded-xl text-start",r===s&&"bg-token-sidebar-surface-secondary"),onClick:i=>{o(s),i.stopPropagation()},children:[a,"name"in n?e.jsx(d,{...n.name}):n.children]})}function Oe({workspace:s,hasAdminPrivileges:a,hasOwnerPrivileges:t}){const n=x(),r=b(),o=c.useCallback(()=>{n("/")},[n]),i=p(ue.isEnterpriseyPlan),m=Fe(),{isComingSoon:g}=ge(),j=m||g,f=_(),F=y(f,"2509278897"),V=y(f,"4105779609"),O=T(),G=r?.isTeam()&&V,U=_e(pe,xe,!0,!0),z=P().formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"});return e.jsxs("nav",{className:"p-2",children:[!O&&e.jsx(fe,{className:"no-draggable","aria-label":z,onClick:()=>{L.setSidebarOpen(!1)},icon:U,mobileIcon:he,"data-testid":"close-sidebar-button"}),e.jsx("div",{className:"mb-1 flex flex-row gap-2",children:e.jsxs(Pe,{onClick:o,children:[e.jsx(ve,{className:"icon-sm"}),e.jsx(d,{...l.backToChat})]})}),e.jsxs("div",{className:"flex flex-col gap-2 py-2",children:[e.jsxs("div",{className:`flex flex-col gap-2 rounded px-2 py-2 ${t?"hover:bg-token-main-surface-secondary cursor-pointer":""}`,onClick:()=>{t&&L.openModal(Ce.WorkspaceAppearance)},children:[e.jsx(be,{size:"large",src:s?.profilePictureUrl}),e.jsxs("div",{className:"align-center flex flex-row",children:[e.jsx("h2",{className:"text-token-text-primary flex-1 text-lg dark:text-white",children:s?.name}),t?e.jsx("div",{className:"my-auto h-4 flex-initial align-middle dark:text-white",children:e.jsx(je,{className:"icon-sm opacity-70 hover:opacity-100"})}):null]})]}),e.jsx(u,{route:"/admin",icon:e.jsx(Re,{className:"icon-sm"}),name:l.membersPageTitle}),i&&e.jsx(u,{route:"/admin/groups",icon:e.jsx(N,{className:"icon-sm"}),upsellEnterprise:!i,name:k({id:"aecR1i",defaultMessage:"Groups"})}),t&&e.jsx(u,{route:w,icon:e.jsx(We,{className:"icon-sm"}),name:l.billing}),t&&e.jsx(u,{route:"/admin/gpts",icon:e.jsx(ye,{className:"icon-sm"}),name:l.gpts}),a&&(j||F)&&e.jsx(u,{route:"/admin/ca",icon:e.jsx(we,{className:"icon-sm"}),name:l.connections}),t&&e.jsx(u,{route:"/admin/settings",icon:e.jsx(ke,{className:"icon-sm"}),name:l.settings}),!i&&e.jsx("span",{className:"border-y-token-border-heavy mx-3 border-t"}),!i&&e.jsx(u,{route:"/admin/groups",icon:e.jsx(N,{className:"icon-sm"}),upsellEnterprise:!i,name:k({id:"aecR1i",defaultMessage:"Groups"})}),a&&e.jsx(u,{route:"/admin/usage",icon:e.jsx(Ie,{className:"icon-sm"}),upsellEnterprise:!i,children:e.jsx("div",{className:"flex flex-row items-center gap-2",children:e.jsx(d,{...l.userAnalytics})})}),t&&e.jsx(u,{route:"/admin/identity",upsellEnterprise:!i&&!G,icon:e.jsx(Be,{className:"icon-sm"}),name:l.identity})]})]})}function ls({mobilePageTitle:s,requireAdminPrivileges:a=!1,requireOwnerPrivileges:t=!1,children:n}){const r=p(f=>f.currentWorkspace),o=x(),i=r!=null?I(r.role):void 0,m=r!=null?D(r.role):void 0;c.useEffect(()=>{a&&i===!1&&o("/admin"),t&&m===!1&&o("/admin")},[a,i,o,t,m]);const g=T();return b()==null?null:e.jsxs(e.Fragment,{children:[e.jsx(Ne,{mobileHeaderContent:s,forceOpenDesktopSidebar:g,renderNavSidebar:()=>e.jsx(Oe,{workspace:r??void 0,hasAdminPrivileges:i,hasOwnerPrivileges:m}),children:n}),r==null?null:e.jsx(Ee,{workspace:r})]})}function Ge(){return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{}),e.jsx(ze,{})]})}function Ue(){const{data:s}=H(),a=b(),t=a&&s&&s.plan_type===ee.TEAM&&!s.will_renew;return e.jsx(e.Fragment,{children:t&&e.jsx(Ve,{accountId:a.id,subscription:s})})}function ze(){const s=R(),a=Te(),t=B().pathname!==w;return c.useEffect(()=>{a&&se.logEventWithStatsig("ChatGPT Credits: At Overage Limit Banner Shown","chatgpt_credits_at_overage_limit_banner_shown",{workspaceId:s?.id,workspaceName:s?.name})},[a,s]),e.jsx(e.Fragment,{children:a&&e.jsx("div",{className:"text-token-interactive-label-danger-secondary-default bg-token-bg-status-error",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-center px-2 py-4 text-xs md:px-6 lg:px-10",children:[e.jsx(Le,{className:"me-2 shrink-0"}),e.jsx(d,{...l.atOverageLimitBannerText,values:{link:n=>t?e.jsx(Ae,{className:"mx-1",href:w,children:n}):n}})]})})})}const W=v.h2`mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10 flex flex-row items-center gap-2`,Ze=v(W)`font-normal text-base text-token-text-secondary`,Qe=v.div`mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10`;function ds({title:s,subtitle:a,tabsHeader:t,badge:n}){return e.jsxs(e.Fragment,{children:[e.jsx(Ge,{}),e.jsxs("div",{className:"border-token-bg-tertiary border-b",children:[e.jsxs("div",{className:"py-6 md:block lg:py-10",children:[e.jsxs(W,{children:[e.jsx("span",{className:"[text-box-edge:ex_alphabetic] [text-box-trim:trim-both]",children:s}),n]}),a&&e.jsx(Ze,{children:a})]}),t&&e.jsx(Qe,{children:t})]})]})}const $e=v.div`max-w-4xl mx-auto w-full px-2 md:px-6 lg:px-10`;function ms({children:s,showSpinner:a,skipLegacyWorkspaceCheck:t}){const n=b(),r=p(m=>m.currentWorkspace),o=!t&&!r,i=!n||a;return e.jsxs($e,{children:[i&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(X,{})}),!i&&o&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(d,{...l.workspaceNotFound})}),!i&&!o&&s]})}const l=E({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},userAnalytics:{id:"adminPage.userAnalytics",defaultMessage:"User Analytics"},billing:{id:"adminPage.billing.1",defaultMessage:"Billing"},gpts:{id:"adminPage.gpts",defaultMessage:"GPTs"},connections:{id:"adminPage.connections",defaultMessage:"Connectors"},settings:{id:"adminPage.Settings",defaultMessage:"Settings"},identity:{id:"adminPage.identity.0",defaultMessage:"Identity & provisioning"},availableForEnterprise:{id:"adminPage.availableForEnterprise",defaultMessage:"Available for Enterprise plan"},atOverageLimitBannerText:{id:"adminPage.atOverageLimitBannerText",defaultMessage:"Your organization has reached its credit overage limit. Access to advanced features is paused. <link>Adjust the limit</link> to restore access."}});export{ls as A,We as S,ds as a,ms as b,cs as c,is as d,Te as e,Fe as f,De as g,Ge as h,os as i,rs as u};
//# sourceMappingURL=cwqss6rjf37yjveo.js.map
