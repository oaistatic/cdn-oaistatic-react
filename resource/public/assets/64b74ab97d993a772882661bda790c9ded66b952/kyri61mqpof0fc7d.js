import{i as O,j as e,M as n,r as p,k as ue,f as ge}from"./ci5tkrccytan34lo.js";import{eS as xe,eT as E,eU as q,eV as Ee,eW as u,eX as ke,e as fe,dx as pe,ed as Ae,eY as he,U as Le,db as U,eZ as Be,dA as We,e_ as Oe,B as ne,bN as oe,e$ as I,f0 as le,f1 as ie}from"./fztttvm3qzdvif1h.js";import{c as Re,W as De}from"./jd152an2uvhkxh6n.js";import{F as Ie,c as z,ac as ye,fc as Se,ae as je,I as Ue,J as Ve,z as V,aj as G,e as k,aP as be,aa as X,al as W,a7 as Fe}from"./ccccre6vnqbb7l94.js";import{u as Q,a as K,P as He}from"./f60xsnykwpib7euo.js";import{u as Ne}from"./ln3t6yic0tgf7gor.js";const C=ke;var Ce=(s=>(s.FLEXIBLE="month",s.ANNUAL="year",s))(Ce||{});const Y=Re(Ce),Me="team-pricing-seat-selection",Z="team-pricing-seat-selection-direct",ce="numSeats",re="selectedPlan",Ge=s=>{const o=Ue(),S=Ve(o,"4250628994").get("enabled",!1),h=ue(),l=h.hash.split("#")[1]===Me||h.hash.split("#")[1]===Z,i=V(),{initialBillingDetails:t}=Ne(i,!0),f=p.useRef(!1),g=Q(),{data:c,isLoading:x}=K(g??"");p.useEffect(()=>{S&&!f.current&&l&&i&&!s&&(Le.setPurchaseWorkspaceData({minimumSeats:U,billingDetails:t,promoData:c}),f.current=!0)},[i,t,l,s,S,g,c,x])},we=({isOpen:s,onClose:o,onSubmit:S})=>{const h=V(),[l,i]=p.useState(""),t=p.useMemo(()=>h?.subscriptionAnalyticsParams,[h]);p.useEffect(()=>{k.logEvent("Account Pay: Create Workspace Modal Show",t),be.logEvent("chatgpt_select_team_plan_modal_show",null,{})},[t]);const f=x=>{k.logEvent("Account Pay: Create Workspace Modal Clicked",{...t,...x})},g=()=>{k.logEvent("Account Pay: Create Workspace Modal Dismiss",t)},c=O();return e.jsxs(X,{testId:"modal-workspace-name-collection",type:"success",isOpen:s,onClose:()=>{o(),g()},className:"max-w-lg",showCloseButton:!0,title:e.jsx(n,{...u.createWorkspace}),children:[e.jsx("div",{className:"bg-token-bg-primary flex flex-col justify-center pb-2",children:e.jsx(De,{workspaceName:l,onChangeWorkspaceName:i})}),e.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[e.jsx(W,{title:c.formatMessage(u.cancel),onClick:()=>{o(),f({buttonType:"Cancel"})}}),e.jsx(W,{title:c.formatMessage(u.selectBillingOption),onClick:()=>{S(l),f({buttonType:"Billing Options"})},disabled:l==="",color:"primary",className:"ms-4"})]})]})},me=Ie.p`text-base font-medium mb-3`,Te=({isOpen:s,onClose:o,onSubmit:S,minimumSeats:h,billingDetails:l,isDirectFlow:i=!1,promoData:t=void 0})=>{const f=V(),g=Q(),{data:c,isLoading:x}=K(g??"");!t&&c&&(t=c);const m=t?.coupon===E&&t.state==="eligible",v=new URLSearchParams(window.location.search),j=v.get(ce),N=v.get(re),y=m?"month":N&&Y(N)?N:"month",[a,M]=p.useState(y),[w,b]=p.useState(!1),d=O(),[T,J]=p.useState(j&&!isNaN(parseInt(j,10))?parseInt(j,10):Math.max(Be,h)),F=Math.max(h,U),{flexibleBillingPlan:ve,annualBillingPlan:ee}=xe(l.currency);let _=ve;m&&(_={..._,cost:{...C.team1dollarMonthlyCost},costStructure:{...C.team1dollarMonthlyStructure,defaultMessage:`then ${d.formatMessage(_.currencySign)}${_.monthlyCost} monthly per seat`,id:"promo.team1dollar.monthlyPlanStructure",description:"Subsequent pricing description for team1dollar promo. Describing the monthly then the annual price after."}});const R=t?.coupon===E&&t.state==="not_eligible",D=t?.coupon===E&&t.state==="temporary_disabled",te=t?.coupon===E&&t.state==="offline",P=We(isNaN(T)?0:T,F,Oe),L=p.useMemo(()=>f?.subscriptionAnalyticsParams,[f]);p.useEffect(()=>{k.logEvent("Account Pay: Select Team Plan Modal Show",L)},[L]);const se=r=>{switch(r){case"month":k.logEvent("Account Pay: Team Plan Selection Clicked",{...L,buttonType:"Continue",numberOfSeats:T,planLength:ie.MONTHLY});break;case"year":k.logEvent("Account Pay: Select Team Plan Modal Clicked",{...L,buttonType:"Continue",numberOfSeats:T,planLength:ie.ANNUAL});break}},ae=(r,B)=>{k.logEvent("Account Pay: Select Team Plan Modal Clicked",{...L,buttonType:"Continue",numberOfSeats:B,planLength:r}),be.logEvent("chatgpt_select_team_plan_modal_continue_to_billing_clicked",r,{number_of_seats:B.toString()}),G.addAction("chatgpt_funnel.team_plan_modal_checkout_initiated",{planLength:r,numberOfSeats:B.toString(),accountId:f?.id}),t?.coupon===E&&t.state==="eligible"&&He.logCouponApplied(t.coupon)},H=()=>{k.logEvent("Account Pay: Select Team Plan Modal Dismiss",L)},_e=ge(),A=ue(),$=p.useMemo(()=>A.hash.split("#")[1]===Z,[A.hash]);return p.useEffect(()=>{const r=new URLSearchParams;r.set(ce,P.toString()),r.set(re,a),t?.coupon&&r.set("promo_campaign",t.coupon);const B=i||$?`#${Z}`:`#${Me}`,Pe=`${A.pathname}?${r.toString()}${B}`;window.history.pushState({from:A.pathname+A.search},"",Pe)},[P,i,$,A.pathname,A.search,_e,a,t]),i||$?e.jsx(X,{testId:"modal-workspace-purchase",type:"success",isOpen:s,onClose:()=>{o(),H()},size:"fullscreen",noPadding:!0,removePopoverStyling:!0,showCloseButton:!0,children:e.jsxs("div",{className:"grid grid-flow-row grid-cols-1 md:h-full md:grid-cols-2",children:[e.jsx("div",{className:"flex-column col-span-1 flex justify-center p-5 md:grid-cols-2",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col items-center",children:[e.jsx(Fe,{className:"mt-8 mb-6 h-8 w-8 md:fixed md:start-4 md:top-4 md:mt-0 md:h-6 md:w-6"}),(R||D||te)&&e.jsx("div",{className:"mb-4 w-full",children:e.jsx(ne,{content:d.formatMessage(R?C.team1dollarNotEligible:D?C.team1dollarTemporarilyDisabled:C.team1dollarOffline),type:"info"})}),e.jsx("div",{className:"mb-8 text-3xl font-medium md:mt-[120px]",children:e.jsx(n,{id:"selectTeamPlanModal.title",defaultMessage:"Pick your plan"})}),e.jsxs(oe,{className:z("col-span-3 mb-6 grid w-full gap-4 md:col-span-2","md:grid-cols-2"),defaultValue:a,onValueChange:r=>{Y(r)&&(M(r),se(r))},children:[e.jsx(I,{billingType:"year",...ee,selectedValue:a,hideSavingsMessage:m,hideDetails:!0}),e.jsx(I,{billingType:"month",..._,selectedValue:a,hideDetails:!0,showWelcomeOfferLabel:t?.state==="eligible",promoDisclaimer:t?.state==="eligible"&&e.jsx(n,{...C.team1dollarPromoDisclaimer,values:{currencySign:d.formatMessage(_.currencySign),cost:_.monthlyCost}})})]}),e.jsx(le,{numSeats:T,minSeats:F,setNumSeats:J}),e.jsx("div",{className:"text-token-text-secondary self-start text-xs",children:d.formatMessage({id:"selectTeamPlanModal.seatsDescription",defaultMessage:"Add more seats at any time. Minimum of {minSeats} seats."},{minSeats:U})})]})}),e.jsx("div",{className:"col-span-3 flex h-full flex-col items-center overflow-hidden p-6 md:col-span-1 md:shadow-lg",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col md:mt-[120px]",children:[e.jsx(me,{className:"mb-8 text-xl font-medium",children:e.jsx(n,{...u.summaryTitle})}),e.jsx(de,{numSeats:P,selectedPlan:a,billingDetails:l,totalLabel:u.allPlansTodayTotal,billDate:e.jsx(n,{...u.today}),promoData:t}),e.jsx(W,{title:d.formatMessage(u.continueToBillingButton),onClick:()=>{b(!0),S(a,P),ae(a,P)},disabled:!1,loading:w,color:"green",className:"w-full rounded-xl"}),e.jsx(W,{title:d.formatMessage(u.cancel),onClick:()=>{o(),H()},color:"ghost",className:"mt-4 w-full rounded-xl"})]})})]})}):e.jsxs(X,{testId:"modal-select-team-plan",type:"success",isOpen:s,onClose:()=>{o(),H()},size:"custom",noPadding:!0,removePopoverStyling:!0,className:"max-w-4xl",showCloseButton:!0,title:d.formatMessage(u.selectTeamPlanModalTitle),children:[(R||D||te)&&e.jsx("div",{className:"px-5 pt-4",children:e.jsx(ne,{content:d.formatMessage(R?C.team1dollarNotEligible:D?C.team1dollarTemporarilyDisabled:C.team1dollarOffline),type:"info"})}),e.jsxs("div",{className:"grid grid-flow-row grid-cols-3",children:[e.jsxs("div",{className:"flex-column col-span-3 p-5 md:col-span-2 md:grid-cols-2",children:[e.jsx(le,{numSeats:T,minSeats:F,setNumSeats:J}),t?.coupon===E&&t.state==="eligible"&&a==="month"&&T>q&&e.jsx("div",{className:"text-token-text-secondary mt-1 self-start text-xs",children:e.jsx(n,{...C.team1dollarOverSeatsDisclaimer})}),e.jsxs(oe,{className:z("col-span-3 mt-5 grid gap-4 md:col-span-2","md:grid-cols-2"),defaultValue:a,onValueChange:r=>{Y(r)&&(M(r),se(r))},children:[e.jsx(I,{billingType:"year",...ee,selectedValue:a,hideSavingsMessage:m}),e.jsx(I,{billingType:"month",..._,selectedValue:a,showWelcomeOfferLabel:m,promoDisclaimer:m&&e.jsx(n,{...C.team1dollarPromoDisclaimer,values:{currencySign:d.formatMessage(_.currencySign),cost:_.monthlyCost}})})]})]}),e.jsxs("div",{className:"border-token-bg-tertiary bg-token-bg-secondary col-span-3 flex h-full flex-col overflow-hidden border-s p-6 md:col-span-1",children:[e.jsx(me,{children:e.jsx(n,{...u.summaryTitle})}),e.jsx(de,{numSeats:P,selectedPlan:a,billingDetails:l,totalLabel:u.allPlansTodayTotal,billDate:e.jsx(n,{...u.today}),promoData:t}),e.jsx(W,{title:d.formatMessage(u.continueToBillingButton),onClick:()=>{b(!0),S(a,P),ae(a,P)},disabled:!1,loading:w,color:"primary",className:"w-full rounded-xl"})]})]})]})},de=({numSeats:s,selectedPlan:o,billingDetails:S,totalLabel:h,billDate:l,promoData:i})=>{const t=O(),{flexibleBillingPlan:f,annualBillingPlan:g}=xe(S.currency),c=f,x=o==="month"?c:g,m=Ee[o],v=(s||0)*(o==="year"?g.monthlyCost*12:c.monthlyCost);let j=(s||0)*x.unitCost,N=v-j,y=0,a=v,M=!1;return i?.coupon===E&&i.state==="eligible"&&o==="month"&&(M=!0,s<=q?(y=1,a=s*c.monthlyCost,N=a-y,j=y):(y=1+(s-q)*c.monthlyCost,a=s*c.monthlyCost,N=a-y,j=y)),e.jsxs("div",{className:"flex grow flex-col text-sm",children:[e.jsxs("div",{className:"text-token-text-secondary flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(n,{...m.name})}),e.jsx("div",{className:"flex",children:e.jsx(n,{...u.allPlansPreDiscountTotal,values:{currencySign:t.formatMessage(x.currencySign),preDiscountTotalAmount:v.toLocaleString()}})})]}),e.jsxs("div",{className:"text-token-text-tertiary flex w-full justify-between text-xs",children:[e.jsx("div",{className:"flex",children:e.jsx(n,{...m.breakdown,values:{numSeats:s}})}),e.jsx("div",{className:"flex",children:e.jsx(n,{...u.breakdownAmount,values:{currencySign:t.formatMessage(x.currencySign),amount:x.monthlyCost}})})]}),e.jsxs("div",{className:"text-token-text-secondary mt-3 flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(n,{...u.planDiscountLabel})}),e.jsx("div",{className:z("flex",N>0&&"font-medium text-[#10A37F]"),children:e.jsx(n,{...m.discountAmount,values:{currencySign:t.formatMessage(c.currencySign),discountAmount:N.toLocaleString()}})})]}),i?.coupon===E&&i.state==="eligible"&&o==="month"&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(n,{...C.team1dollarBelowDiscount})}),m.discountDescription&&g.discountedMonthlyCost<g.monthlyCost&&o==="year"&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(n,{...m.discountDescription,values:{discountPercentage:Math.floor((1-g.discountedMonthlyCost/g.monthlyCost)*100)}})}),e.jsx("hr",{className:"border-token-border-default my-3"}),e.jsxs("div",{className:"flex w-full justify-between text-base font-medium",children:[e.jsx("div",{className:"flex",children:e.jsx(n,{...h})}),e.jsx("div",{className:"flex",children:M?e.jsxs(e.Fragment,{children:[t.formatMessage(x.currencyCode)," ",t.formatMessage(x.currencySign),j.toLocaleString()]}):e.jsx(n,{...m.total,values:{currencyCode:t.formatMessage(x.currencyCode),currencySign:t.formatMessage(x.currencySign),totalAmount:j.toLocaleString()}})})]}),e.jsx("div",{className:"text-token-text-tertiary mb-8 text-xs",children:M?e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-token-text-tertiary mt-2 text-xs",children:e.jsx(n,{id:"vgDSPO",defaultMessage:"After promotional period {currencySign}{amount} per month",values:{currencySign:t.formatMessage(c.currencySign),amount:a.toLocaleString()}})})}):e.jsx(n,{...m.billed,values:{billDate:l}})})]})};function Qe(){const s=V(),o=ge(),{prepareCheckoutSession:S,navigateToCheckout:h}=pe(),{initialBillingDetails:l}=Ne(s,!0),i=O(),t=fe(),f=he(i,void 0,t),{config:g}=Se("3217984440"),c=g.get("enabled",!1),[x,m]=p.useState(c?f:""),v=je(),j=ye(),N=Q(),{data:y}=K(N??""),a=async(w,b)=>{try{const d=await S({plan_name:"chatgptteamplan",team_plan_data:{workspace_name:f,price_interval:w,seat_quantity:b},billing_details:l,promo_campaign:w==="month"?y?.coupon:null},"TeamsDirectWorkspacePurchaseModal",v);await h(d)}catch(d){G.addError(d),j.warning(i.formatMessage(u.paymentErrorWarning),{hasCloseButton:!0})}},M=()=>{o("/")};return x===""?e.jsx(we,{isOpen:!0,onClose:M,onSubmit:w=>m(w)}):e.jsx(Te,{isOpen:!0,onClose:M,onSubmit:(w,b)=>a(w,b),isDirectFlow:!0,minimumSeats:U,billingDetails:l,promoData:y})}function Ke({isOpen:s,onClose:o,minimumSeats:S,billingDetails:h,existingAccount:l=void 0,promoData:i=void 0}){const t=O(),f=ye(),g=fe(),{prepareCheckoutSession:c,navigateToCheckout:x}=pe(),m=l?Ae(t,l):"",v=he(t,l,g),{config:j}=Se("3217984440"),N=j.get("enabled",!1),[y,a]=p.useState(N?v:m),M=je(),w=async(b,d)=>{try{const T=await c({plan_name:"chatgptteamplan",team_plan_data:{workspace_name:y,price_interval:b,seat_quantity:d,existing_workspace_id:l?.id},billing_details:h,cancel_url:window.location.href,promo_campaign:b==="month"?i?.coupon:null},"TeamsWorkspacePurchaseModal",M);await x(T)}catch(T){G.addError(T),f.warning(t.formatMessage(u.paymentErrorWarning),{hasCloseButton:!0})}};return y===""?e.jsx(we,{isOpen:s,onClose:o,onSubmit:b=>{a(b)}}):e.jsx(Te,{isOpen:s,onClose:o,onSubmit:(b,d)=>w(b,d),minimumSeats:S,billingDetails:h,promoData:i})}const Je=s=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 7C2 5.34315 3.34315 4 5 4H19C20.6569 4 22 5.34315 22 7V17C22 18.6569 20.6569 20 19 20H5C3.34315 20 2 18.6569 2 17V7ZM4.26834 6.31832L11.4233 11.3689C11.769 11.6129 12.231 11.6129 12.5767 11.3689L19.7317 6.31832C19.5491 6.12247 19.2889 6 19 6H5C4.71114 6 4.45089 6.12247 4.26834 6.31832ZM20 8.57698L13.7301 13.0028C12.6929 13.735 11.3071 13.735 10.2699 13.0028L4 8.57698V17C4 17.5523 4.44772 18 5 18H19C19.5523 18 20 17.5523 20 17V8.57698Z",fill:"currentColor"}));export{de as B,Je as S,Qe as T,Ke as a,Ge as u};
//# sourceMappingURL=kyri61mqpof0fc7d.js.map
