import{r as g,j as a,a5 as x,M as C}from"./ci5tkrccytan34lo.js";import{aB as p,aC as E,aD as _,aE as I,ai as v,aF as b,aG as j}from"./fztttvm3qzdvif1h.js";import{as as w,fk as N,F as f,c6 as M,e as m}from"./ccccre6vnqbb7l94.js";import{u as R,a as S,i as y}from"./ekl1xxb2hl6h9vpu.js";const u="contextList";function O(){return e=>{E(e,t=>{if(!j(t)||t.name!==u)return;const s=t.data??(t.data={});s.hName=u})}}function L(e){if(typeof e!="object"||e==null||!("props"in e)||e.props==null)return;const t=e.props;if(t.node?.tagName===N)return parseInt(t.index)}const d=f.div`gap-6 border-b pb-4 my-4 context-list border-token-border-default`;function H({children:e}){const t=g.useContext(p),s=Array.isArray(e)?e:w([e]);if(s.length===0||t?.analyticsMetadata.turnIndex===void 0)return null;const[l,...i]=s,c=L(l);if(c!=null&&t!=null){const n=t?.contentReferences?.[c],r=n?.type==="image_v2",o=n?.type==="optimistic_image_citation";if(r||o)return a.jsxs(d,{className:"flex w-full",children:[a.jsx("div",{className:"grow leading-normal",children:i}),a.jsxs("div",{className:"mt-2 flex w-24 shrink-0",children:[r&&n.images[0]&&a.jsx(T,{imageRef:n,analyticsMetadata:t.analyticsMetadata}),o&&a.jsx(k,{optimisticRef:n})]})]})}return a.jsx(d,{className:"leading-normal",children:s})}const h=f.button`not-prose flex w-full h-fit	items-center justify-center overflow-hidden rounded-lg max-h-48`;function T({imageRef:e,analyticsMetadata:t}){const s=e.images[0],l=s.thumbnail_size.width/s.thumbnail_size.height,i=R(s,{width:200,height:Math.max(Math.round(200/l),112)}),{isSuccess:c}=S(i),n=_.useStore(),r=g.useRef(!1),o={...M(t),type:"context_list_image_thumbnail",image_url:i};return r.current||(r.current=!0,m.logEventWithStatsig("Search Content Reference Shown","search_content_reference_shown",o)),a.jsx(h,{onClick:()=>{n.setCurrentImage({image:s,source:I.Turn,analyticsMetadata:t}),m.logEventWithStatsig("Search Content Reference Clicked","search_content_reference_clicked",o)},children:a.jsx(x.img,{src:i,className:"w-full object-cover",alt:s.title,initial:{opacity:0},animate:c?{opacity:1}:{},whileHover:{scale:1.1,transition:y}})})}function k({optimisticRef:e}){return a.jsx(h,{children:e.status==="done"?a.jsx(v,{label:a.jsx(C,{id:"8JYwCi",defaultMessage:"Error fetching image"}),children:a.jsx(b,{className:"text-token-text-tertiary h-24 w-12"})}):a.jsx("div",{className:"bg-token-main-surface-tertiary h-24 w-full animate-pulse"})})}export{H as C,u as a,O as r};
//# sourceMappingURL=mncmjhre2pa3zjgy.js.map
