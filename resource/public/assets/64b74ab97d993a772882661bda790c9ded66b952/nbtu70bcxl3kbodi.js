const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/btk9x6oekiwf1fkz.js","assets/ccccre6vnqbb7l94.js","assets/ci5tkrccytan34lo.js","assets/root-ggl0dfwq.css","assets/fztttvm3qzdvif1h.js","assets/conversation-small-dfayqh3x.css","assets/kr1s5g89i0w6zex7.js","assets/ffyeflxcyy89ytsf.js","assets/hh96w6sonuilk2y6.js","assets/bj6lj4ia2dzck3r4.js","assets/lowhbnnh83h9k67b.js","assets/h1rqozkinxrlxfws.js","assets/j3zg44ruze86crbd.js","assets/grqqoygx78z5w4fx.js","assets/hapan2fx2czn21gi.js","assets/kzhevji8i57j71hk.js","assets/h2gd34k3oh53zw7p.js","assets/a1fl09gjys8m3drr.js","assets/k4lih7nb4umlxxxc.js","assets/m3p85h1r7wwh3ar4.js","assets/bgu7mt464bd85qmz.js","assets/ln3t6yic0tgf7gor.js","assets/bb4l02lm4p1hlo2s.js","assets/o5dcel4w1cacawdo.js","assets/eykh2s3cx0s4wv4b.js","assets/nplnc7nfjbqgwb50.js","assets/d6qfcfpf3ythcmx2.js","assets/hnwyihljdxrug66f.js","assets/musjw8fjkljbblfz.js","assets/d9fa39o8eqv0y4sa.js","assets/bq1trwjkhx8nhxh4.js","assets/euq7ybw4dhrsufo2.js"])))=>i.map(i=>d[i]);
import{L as ae,fM as Cs,c as F,e as z,aZ as js,B as Ie,y as Le,I as Y,bd as Gt,aG as Ms,ad as ks,ap as we,at as he,gW as Ns,aK as ue,aL as B,a7 as Ot,bK as Wt,u as Ts,aX as Ht,c8 as ve,cf as Re,ca as le,cb as ce,gz as Ps,s as St,N as wt,K as se,ce as Es,b as Ge,d as Dt,F as As,bj as Oe,ct as Is,M as J,O as at,_ as ot,d_ as nt,b0 as We,bW as it,b$ as Ls,b9 as Rs,aR as qt,aP as Gs,dG as rt,cX as Os,ae as Ws,b_ as Hs,aj as _t,hn as Ds,a5 as qs,gN as Fs,c_ as Us,aI as zs,aM as Ft,J as Vs,fA as Bs,fd as Ys,a_ as $s,gZ as Qs}from"./ccccre6vnqbb7l94.js";import{r as c,f as lt,a as ct,j as t,a5 as et,M as D,i as $,e as Ut,c as _e,l as Ks,L as He,u as Zs,v as Js,p as zt,R as Xs}from"./ci5tkrccytan34lo.js";import{u as Vt,P as ea}from"./hapan2fx2czn21gi.js";import{C as dt,u as ut,d as Ce}from"./grqqoygx78z5w4fx.js";import{g9 as Bt,pX as je,iT as ta,cL as sa,oZ as Yt,iV as aa,iW as $t,hg as oa,h as Ct,hf as na,pY as ia,i$ as ra,b3 as jt,pZ as la,aV as ca,ha as Qt,cX as da,cY as ua,p_ as ha,p$ as Pe,ai as Ae,mI as Je,eP as ma,fU as ga,fc as pa,b2 as fa,aT as xa,cZ as ba,t as tt,q0 as ya,c_ as va,P as Kt,F as Sa,he as Zt,q1 as Jt,q2 as Mt,q3 as wa,q4 as _a,q5 as ht,kU as Xt,q6 as Ca,bG as ja,q7 as Se,e as es,fO as Ma,fH as ka,U as De,b4 as Na,q8 as Ta,q9 as Pa,h8 as Ea,h9 as Aa,hd as Ia,qa as kt,qb as La,aa as Ra,qc as Ga,kV as Oa,qd as Wa,qe as Ha,qf as Da,qg as qa,kL as Fa,fL as ts,oe as Ua,qh as za,qi as W,R as U,qj as Va,qk as Ba,ql as Ya,c3 as ss,cD as $a,qm as Qa,qn as Nt,d as Ka,o6 as Za,qo as Ja,qp as Xa,qq as eo,pr as as,c9 as to,M as mt,p1 as so,qr as os,cb as ao,cc as oo,qs as no,bD as Tt,eL as ns,dg as de,hH as io,qt as ro,bQ as is,iM as lo,ke as co,J as Ue,cw as uo,e9 as ho,k0 as Pt,qu as mo,a3 as gt,kl as go,qv as po,pe as qe,eQ as fo,u as xo,qw as rs,e0 as bo,qx as yo,hi as vo,fR as So,hs as wo,N as _o,hl as Co,qy as Et,qz as jo,qA as Mo,hm as ko,dZ as No,kM as To,hh as Po,cz as Eo,qB as At,qC as Ao,qD as Io,bi as Lo,qE as Ro,lo as ls,qF as Go,qG as Oo,qH as Wo,qI as Ho,ks as Do,qJ as qo,qK as Fo,qL as Uo,qM as zo,qN as Vo,qO as Bo,qP as Yo,qQ as $o,qR as Qo,qS as Ko,qT as Zo,qU as Jo,oF as Xo,qV as en}from"./fztttvm3qzdvif1h.js";import{C as tn,N as sn,g as an}from"./h1rqozkinxrlxfws.js";import{b as on}from"./d6qfcfpf3ythcmx2.js";import{u as nn,b as cs}from"./o5dcel4w1cacawdo.js";import{c as rn,P as ln,M as cn,d as dn,F as un,T as hn}from"./a1fl09gjys8m3drr.js";import{I as mn}from"./iw5jl8v2yszml7o9.js";import{S as gn,T as pn}from"./fseoyhsh6zihamwk.js";import{u as ds,T as st,g as fn}from"./musjw8fjkljbblfz.js";import{g as xn,a as bn,V as yn}from"./kl37blrmp2daqno8.js";import"./obtq7sfq52r3quc0.js";const vn=({assetPointer:s,isInFocusMode$:e,serverThreadId:o,transformationId:n,width:a,height:i,onEdit:h})=>{const d=Bt(),[b,_]=c.useState(!1),[x]=ae(o,f=>[f?.modelId]),v=Vt(o),S=je(),l=lt(),u=ct(),g=c.useRef(null);c.useEffect(()=>{rn.prefetch()},[]),c.useEffect(()=>{_(!1),e?.set(!1)},[s,e]),c.useEffect(()=>Cs(()=>{e&&!e()&&_(!1)}),[e]),ta(c.useMemo(()=>({image:{asset_pointer:s,metadata:{dalle:{gen_id:n},generation:{gen_id:n}},height:i,width:a},currentDrawnShape:null,onCleared:()=>{},getImageData:()=>{}}),[n,s,i,a]));const y=f=>{S.transitionToPage({type:"conversation",value:void 0},()=>{h?.(),ra(l,u,o,void 0,!0),v(f)})},m=sa();return t.jsx(Yt,{children:t.jsx(et.div,{layout:!d,transition:{type:"spring",duration:.2},className:F(b?"w-full rounded-3xl":"mx-auto rounded-full"),children:b?t.jsx(aa,{value:{isImageGenEditor:!0,isInpainting:!1,onCancelInpaint:()=>{}},children:t.jsx(dt,{clientThreadId:o,children:t.jsx(ln,{clientThreadId:o,currentModelId:x??$t(void 0).id,disableDraftPersistence:!0,onRequestCompletion:async f=>{e?.set(!1),z.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_edit_submitted","chatgpt_web_image_library_lightbox_image_edit_submitted"),js(o)==null&&await(g.current??Ct(o)),y(await na(f))},onContinueGenerating:f=>y(oa(f)),hideHeader:!0,isNewThread:!1})})}):t.jsx(Ie,{color:"secondary",size:m?"large":void 0,className:"px-4 max-md:min-w-[50vw]",onClick:()=>{z.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_composer_opened","chatgpt_web_image_library_lightbox_image_composer_opened"),_(!0),e?.set(!0),g.current=Ct(o).finally(()=>{g.current=null})},icon:m?void 0:ia,children:t.jsx(et.div,{initial:d?!1:{opacity:0},animate:{opacity:1},children:t.jsx(D,{id:"BD4ZLh",defaultMessage:"Edit image"})})})})})},Sn=({assetPointer:s,serverThreadId:e,messageId:o})=>{const n=$(),[a,i]=c.useState(!1),h=nn({assetPointer:s,clientThreadId:e,imageGenMessageId:o}),d=c.useCallback(async()=>{i(!0);try{await h()}finally{i(!1)}z.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_share_clicked","chatgpt_web_image_library_lightbox_image_share_clicked")},[h]),b=n.formatMessage({id:"lqgWN2",defaultMessage:"Share"});return t.jsxs(t.Fragment,{children:[t.jsx(Ie,{className:"max-md:hidden",color:"secondary",icon:a?Le:jt,onClick:d,disabled:a,children:b}),t.jsx(Ie,{color:"ghost",className:"text-token-text-secondary w-10 md:hidden",icon:a?Le:jt,size:"xl",onClick:d,label:b,disabled:a})]})},wn=({initialIndex:s,includeArchived:e,onScrollToEnd:o,onClose:n})=>{const a=$(),i=Y(),h=Gt(i).checkGate("1520205231"),{archiveMutation:d}=la(e),b=ca(),[_]=c.useState(()=>Ms(!1)),x=je(),v=lt(),{images:S}=Qt(e);return t.jsxs(da,{imageList:S,initialIndex:s??0,onClose:n,isInFocusMode$:_,onScrollToEnd:o,children:[t.jsx(ua,{children:({title:l,createdAt:u})=>t.jsxs("div",{className:"flex min-h-12 min-w-0 flex-col items-center max-md:h-full",children:[t.jsx("h2",{className:"text-token-text-primary max-w-full min-w-0 grow justify-center self-start truncate text-base text-balance max-md:flex max-md:items-center max-md:ps-2",children:t.jsx("span",{className:"line-clamp-2",children:l??t.jsx(D,{id:"OIDfvR",defaultMessage:"Image Generation"})})}),u&&t.jsx("span",{className:"text-token-text-secondary text-sm max-md:hidden",children:u.toDateString()})]})}),t.jsxs(ha,{children:[t.jsx(Pe,{children:({conversationId:l,messageId:u})=>t.jsx(Ae,{label:a.formatMessage(Z.openInChat),triggerAs:null,children:t.jsx(Je,{className:"aspect-square",icon:ma,onClick:g=>{z.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_open_in_chat_clicked","chatgpt_web_image_library_lightbox_image_open_in_chat_clicked"),g.preventDefault(),x.addClassToCurrentTransition(["from-lightbox","to-conversation"]),x.transitionToPage({type:"conversation",value:void 0},async()=>{n(null),await v(`/c/${l}?message=${u}`,{preventScrollReset:!0})})},"aria-label":a.formatMessage(Z.openInChat)})})}),h&&t.jsx(Pe,{children:({id:l,archived:u})=>t.jsx(Ae,{label:a.formatMessage(u?Z.unarchive:Z.archive),triggerAs:null,children:t.jsx(Je,{className:"aspect-square",icon:u?pa:ga,onClick:()=>{z.logEventWithStatsig(u?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked",u?"chatgpt_web_image_library_lightbox_image_unarchive_clicked":"chatgpt_web_image_library_lightbox_image_archive_clicked"),d.mutate({imageId:l,operation:u?"unarchive":"archive"})},"aria-label":a.formatMessage(u?Z.unarchive:Z.archive)})})}),t.jsx(Pe,{children:({url:l,title:u})=>t.jsx(Ae,{label:a.formatMessage(Z.download),triggerAs:null,children:t.jsx(Je,{className:"aspect-square",icon:fa,onClick:()=>{z.logEventWithStatsig("chatgpt_web_image_library_lightbox_image_download_clicked","chatgpt_web_image_library_lightbox_image_download_clicked"),xa({url:l,fileName:`${u??a.formatMessage({id:"cYxKbe",defaultMessage:"My ChatGPT image"})}.png`})},"aria-label":a.formatMessage(Z.download)})})}),b()&&t.jsx(Pe,{children:({assetPointer:l,conversationId:u,messageId:g})=>!u||!g?null:t.jsx(Sn,{assetPointer:l,serverThreadId:u,messageId:g})})]}),t.jsx(ba,{children:({url:l,width:u,height:g,title:y,position:m})=>t.jsx("img",{className:ya("bg-tertiary block h-fit max-h-full w-auto rounded-lg object-contain shadow-xl max-md:rounded-none max-md:shadow-none",m==="current"&&"[view-transition-name:var(--vt-active-image)]"),style:m&&m!=="current"?{viewTransitionName:`var(--vt-image-${m})`}:void 0,src:tt(l),width:u,tabIndex:0,height:g,alt:y??""})}),t.jsx(va,{children:({width:l,height:u,assetPointer:g,conversationId:y,transformationId:m})=>y&&g&&t.jsx(vn,{isInFocusMode$:_,onEdit:()=>n(null),width:l,height:u,assetPointer:g,serverThreadId:y,transformationId:m})})]})},Z=Ut({download:{id:"Z23tMl",defaultMessage:"Download image"},openInChat:{id:"Eh8G/f",defaultMessage:"Open in Chat"},archive:{id:"yOqxdz",defaultMessage:"Hide image"},unarchive:{id:"yEUKZl",defaultMessage:"Show image"}}),_n=({hasMoreImages:s,count:e,images:o,includeArchived:n,isFetchingMore:a,onScrollToEnd:i})=>{const h=s?Math.max((e??0)-(o.length??0),0):0,[d,b]=c.useState(!1),[_,x]=c.useState(null),v=je(),S=Y(),{clientThreadId:l}=ut(),u=c.useCallback(g=>{z.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened"),b(!0),x(g),v.transitionToPage({type:"lightbox",value:void 0},()=>{ks(S,({closeModal:y})=>t.jsx(Kt,{clientThreadId:l,children:t.jsx(Sa,{children:t.jsx(Zt,{children:t.jsx(wn,{includeArchived:n,onClose:m=>{if(m==null){y();return}Jt({update:()=>{y(),x(m),b(!0)},className:"from-lightbox",forceFlushSync:!0}).finished.then(()=>b(!1))},initialIndex:g,onScrollToEnd:i})})})})),b(!1)})},[l,S,n,i,v]);return t.jsxs("div",{className:"w-full",children:[t.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-1 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:o.map(({url:g,thumbnail:y,width:m,height:f,title:p=null,assetPointer:k,conversationId:r,messageId:C},w)=>t.jsxs(Mt,{index:w,active:d&&_===w,src:tt(g),onClick:u,thumbnail:tt(y),width:m,height:f,alt:p,children:[r!=null&&C!=null&&t.jsx(mn,{imageAssetPointer:k??void 0,imageUrl:g??void 0,clientThreadId:r,serverThreadId:r,messageId:C,showRatingButtons:!1}),w===o.length-1&&t.jsx(wa,{onScrollToEnd:i})]},w)).concat(new Array(h).fill(null).map((g,y)=>{const m=o.length+y;return t.jsx(Mt,{index:m,isPlaceholder:!0,active:!1},m)}))}),t.jsx("div",{className:"flex h-8 items-center justify-center",children:s&&a&&t.jsx(Le,{})})]})};function Cn(s){"use forget";const e=_e.c(5),{clientThreadId:o}=s;let n;e[0]!==s?(n=t.jsx(Mn,{...s}),e[0]=s,e[1]=n):n=e[1];let a;return e[2]!==o||e[3]!==n?(a=t.jsx(dt,{clientThreadId:o,children:n}),e[2]=o,e[3]=n,e[4]=a):a=e[4],a}function jn(s){"use forget";const e=_e.c(22),{clientThreadId:o,headlineOption:n,currentModelId:a,isModelLoaded:i,overrideMessage:h}=s,d=ht(),b=ja(),_=Ce(),{isFocused:x,autocompletions:v}=Ht(_.store),S=x&&v.length>0,l=Se(),u=ve(l.isImageGenLandingPageEnabled$);let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g={opacity:0},e[0]=g):g=e[0];const y=S?0:1;let m;e[1]!==y?(m={opacity:y},e[1]=y,e[2]=m):m=e[2];let f,p;e[3]===Symbol.for("react.memo_cache_sentinel")?(f={opacity:0},p={duration:.1},e[3]=f,e[4]=p):(f=e[3],p=e[4]);const k=b?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",r=S?"pointer-events-none":"",C=d?"@lg/thread:hidden":"lg:hidden";let w;e[5]!==k||e[6]!==r||e[7]!==C?(w=F("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] shrink flex-col items-center justify-center overflow-hidden",k,r,C),e[5]=k,e[6]=r,e[7]=C,e[8]=w):w=e[8];let T;e[9]!==n||e[10]!==h?(T=n==="CHATGPT_LOGO"?t.jsx(Ot,{className:"inline-block h-12 w-12"}):t.jsx(us,{headlineOption:n,overrideMessage:h}),e[9]=n,e[10]=h,e[11]=T):T=e[11];let N;e[12]!==o||e[13]!==a||e[14]!==u||e[15]!==i?(N=!u&&t.jsx(cn,{isModelLoaded:i,currentModelId:a,clientThreadId:o}),e[12]=o,e[13]=a,e[14]=u,e[15]=i,e[16]=N):N=e[16];let R;return e[17]!==T||e[18]!==N||e[19]!==m||e[20]!==w?(R=t.jsxs(et.div,{initial:g,animate:m,exit:f,transition:p,className:w,children:[T,N]}),e[17]=T,e[18]=N,e[19]=m,e[20]=w,e[21]=R):R=e[21],R}function Mn(s){"use forget";const e=_e.c(34),{clientThreadId:o,currentModelId:n,isModelLoaded:a}=s,i=Ce(),h=we();let d;e[0]!==h?(d=h?.isQuorum(),e[0]=h,e[1]=d):d=e[1];const b=d,{isUnauthenticated:_}=he(),x=Ns();_a(i);let v;e[2]===Symbol.for("react.memo_cache_sentinel")?(v="4031588851",e[2]=v):v=e[2];const{layer:S}=ue(v);let l,u;e[3]===Symbol.for("react.memo_cache_sentinel")?(l="3533083032",u={shouldLogExposure:!1},e[3]=l,e[4]=u):(l=e[3],u=e[4]);const{layer:g}=ue(l,u),y=_?g:S,m=ht();let f;e[5]!==y?(f=y.get("headline_option","HELP_WITH"),e[5]=y,e[6]=f):f=e[6];const p=f,k=Xt();let r;e[7]!==k?(r=k.has(B.Research),e[7]=k,e[8]=r):r=e[8];const C=r;let w;e[9]!==n||e[10]!==x||e[11]!==C||e[12]!==b?(w=b?E.chatgptHipaa:C?E.deepResearchPlaceholder:void 0,e[9]=n,e[10]=x,e[11]=C,e[12]=b,e[13]=w):w=e[13];const T=w,N=m?"@lg/thread:items-end":"lg:items-end";let R;e[14]!==N?(R=F("flex items-center justify-center",N),e[14]=N,e[15]=R):R=e[15];const q=m?"@lg/thread:block":"lg:block";let j;e[16]!==q?(j=F("mb-7 hidden text-center @lg/thread:block",q),e[16]=q,e[17]=j):j=e[17];let O;e[18]!==p||e[19]!==T?(O=p==="CHATGPT_LOGO"?t.jsx(Ot,{className:"inline-block h-12 w-12"}):t.jsx(us,{headlineOption:p,overrideMessage:T}),e[18]=p,e[19]=T,e[20]=O):O=e[20];let A;e[21]!==j||e[22]!==O?(A=t.jsx("div",{className:j,children:O}),e[21]=j,e[22]=O,e[23]=A):A=e[23];let G;e[24]!==o||e[25]!==n||e[26]!==p||e[27]!==T||e[28]!==a?(G=t.jsx(jn,{headlineOption:p,clientThreadId:o,isModelLoaded:a,currentModelId:n,overrideMessage:T}),e[24]=o,e[25]=n,e[26]=p,e[27]=T,e[28]=a,e[29]=G):G=e[29];let H;return e[30]!==A||e[31]!==G||e[32]!==R?(H=t.jsxs("div",{className:R,children:[A,G]}),e[30]=A,e[31]=G,e[32]=R,e[33]=H):H=e[33],H}function kn(s){"use forget";const e=_e.c(16),{headlineOption:o,overrideMessage:n}=s,a=function(A){const{name:G}=A;return t.jsx(Ae,{label:b.formatMessage(E.editNicknameTooltip),delayDuration:300,side:"top",children:t.jsx("button",{onClick:Pn,style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:Tn,onMouseLeave:Nn,children:G})})};let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=function(){const A=[],G=[];A.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),G.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...A);const H=G[Math.floor(Math.random()*G.length)],X=`${A[Math.floor(Math.random()*A.length)]} | ${H}`;le.setCookie(ce.headlineMessage,X)},e[0]=i):i=e[0];const h=i,d=function(){const A=le.getCookie(ce.GreetingName),H=le.getCookie(ce.headlineMessage)?.split("|"),Q=H?.[0]?.trim(),X=H?.[1]?.trim();return{cookieName:A,isReadyForPersonalized:!!A&&A.length<=S,headline:Q,namedHeadline:X}},b=$(),_=Y(),x=Re(_,"1704793646"),v=Re(_,"3533083032"),S=x.get("name_char_limit",20),[l,u]=c.useState(d),{isUnauthenticated:g}=he(),y=es(),f=Ma(!g&&!!y)?.data,p=ka(),k=v.get("chatgpt_anon_heading_enabled",!1),r=x.get("greeting_web",!1),C=x.get("full_name_llm",!1);let w,T;e[1]!==y||e[2]!==C||e[3]!==p||e[4]!==r||e[5]!==f?(w=()=>{if(r&&p){if(y&&f){const O=Ps(f,y,C);le.setCookie(ce.GreetingName,O),St.count(wt.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}h()}else le.deleteCookie(ce.GreetingName),le.deleteCookie(ce.headlineMessage)},T=[f,y,r,C,p],e[1]=y,e[2]=C,e[3]=p,e[4]=r,e[5]=f,e[6]=w,e[7]=T):(w=e[6],T=e[7]),c.useEffect(w,T);let N;e[8]!==d||e[9]!==p||e[10]!==r?(N=()=>{const O=()=>{if(r&&p){const{cookieName:A,isReadyForPersonalized:G}=d();u(H=>({...H,cookieName:A,isReadyForPersonalized:G}))}};return window.addEventListener("refreshGreeting",O),()=>window.removeEventListener("refreshGreeting",O)},e[8]=d,e[9]=p,e[10]=r,e[11]=N):N=e[11],c.useEffect(N);let R,q;e[12]!==p||e[13]!==r?(R=()=>{r&&p&&St.count(wt.MOONSHINE,"splashScreenV2.greeting_shown_web")},q=[r,p],e[12]=p,e[13]=r,e[14]=R,e[15]=q):(R=e[14],q=e[15]),c.useEffect(R,q);let j;return n?j=t.jsx(t.Fragment,{children:t.jsx(D,{...n,values:{hipaa:t.jsx("span",{className:"text-token-interactive-label-accent-default",children:b.formatMessage(E.hipaa)})}})}):g&&k?j=t.jsx("h1",{children:b.formatMessage(Ee.CHATGPT.original)}):l.isReadyForPersonalized&&r?j=t.jsx(t.Fragment,{children:t.jsx(D,{...Ee[l.namedHeadline??o].withName,values:{name:t.jsx(a,{name:l.cookieName??""},"name")}})}):r&&l.headline?j=b.formatMessage(Ee[l.headline].original):j=b.formatMessage(Ee[o].original),j}function Nn(s){s.currentTarget.className="text-inherit"}function Tn(s){s.currentTarget.className="text-token-text-secondary"}function Pn(){De.setAutoHighlightNicknameInput(!0),De.openModal(Na.UserContext)}function us(s){"use forget";const e=_e.c(27),{headlineOption:o,overrideMessage:n}=s,a=Wt(),i=c.useRef(null);let h;e[0]!==a?(h={isTempChatVisible:a,titleTranslate:0},e[0]=a,e[1]=h):h=e[1];const[d,b]=c.useState(h);let _,x;e[2]!==a?(_=()=>{b({isTempChatVisible:a,titleTranslate:a?-((i.current?.offsetHeight??0)-40):0})},x=[a],e[2]=a,e[3]=_,e[4]=x):(_=e[3],x=e[4]),Ts(_,x);let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v={viewTransitionName:"var(--vt-splash-screen-headline)"},e[5]=v):v=e[5];const S=d.isTempChatVisible?"invisible opacity-0":"opacity-100";let l;e[6]!==S?(l=F("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",S),e[6]=S,e[7]=l):l=e[7];const u=`translateY(${d.titleTranslate}px)`;let g;e[8]!==u?(g={transform:u},e[8]=u,e[9]=g):g=e[9];let y;e[10]!==o||e[11]!==n?(y=t.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:t.jsx(kn,{headlineOption:o,overrideMessage:n})}),e[10]=o,e[11]=n,e[12]=y):y=e[12];let m;e[13]!==a||e[14]!==l||e[15]!==g||e[16]!==y?(m=t.jsx("h1",{className:l,"aria-hidden":a,style:g,children:y}),e[13]=a,e[14]=l,e[15]=g,e[16]=y,e[17]=m):m=e[17];const f=d.isTempChatVisible?"translate-y-0 opacity-100":"invisible translate-y-10 opacity-0";let p;e[18]!==f?(p=F("absolute bottom-0 motion-safe:[transition:0.25s_transform_var(--spring-standard),0.2s_opacity_var(--spring-standard),0.3s_visibility_var(--spring-standard)]",f),e[18]=f,e[19]=p):p=e[19];const k=!a;let r;e[20]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(Ca,{}),e[20]=r):r=e[20];let C;e[21]!==p||e[22]!==k?(C=t.jsx("div",{className:p,"aria-hidden":k,ref:i,children:r}),e[21]=p,e[22]=k,e[23]=C):C=e[23];let w;return e[24]!==m||e[25]!==C?(w=t.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:t.jsx("div",{children:t.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:v,children:[m,C]})})}),e[24]=m,e[25]=C,e[26]=w):w=e[26],w}const E=Ut({chatgptHipaa:{id:"SplashScreenV2.chatgptHipaa",defaultMessage:"ChatGPT {hipaa}"},hipaa:{id:"common.hipaa",defaultMessage:"HIPAA"},whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What's on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What's on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"},chatgpt:{id:"SplashScreenV2.chatgpt",defaultMessage:"ChatGPT"}}),Ee={HELP_WITH:{original:E.whatCanIHelpWith,withName:E.whatCanIHelpWithWithName},WHERE_TO_START:{original:E.whereShouldWeStart,withName:E.whereShouldWeStartWithName},ASK_CHATGPT:{original:E.askChatgptAnything,withName:E.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:E.howCanIHelp,withName:E.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:E.goodToSeeYouWithName,withName:E.goodToSeeYouWithName},DIVE_IN:{original:E.diveInWithName,withName:E.diveInWithName},READY_WHEN_YOU_ARE:{original:E.readyWhenYouAre,withName:E.readyWhenYouAre},ON_YOUR_MIND:{original:E.onYourMind,withName:E.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:E.whatAreYouWorkingOn,withName:E.whatAreYouWorkingOn},AGENDA_TODAY:{original:E.agendaToday,withName:E.agendaToday},SHOULD_WE_BEGIN:{original:E.shouldWeBegin,withName:E.shouldWeBegin},CHATGPT:{original:E.chatgpt,withName:E.chatgpt}};function En({onClick:s}){return t.jsxs("div",{className:"flex flex-col",children:[t.jsx("button",{onClick:s,"aria-labelledby":"upload-image-label",className:"relative",id:"upload-image-button",type:"button",children:t.jsx("div",{className:"bg-token-main-surface-primary dark:bg-token-main-surface-secondary border-token-border-default z-1 flex aspect-square items-center justify-center overflow-hidden rounded-2xl border p-5 text-xs transition-[transform_box-shadow] duration-[0.24s] select-none hover:motion-safe:scale-105",children:t.jsxs("div",{className:"text-token-text-tertiary inline-flex items-center justify-center",children:[t.jsx(La,{"aria-label":"",className:"h-12 w-12"}),t.jsx(Ra,{"aria-label":"",className:"absolute start-1/2 top-1/2 ms-1 mt-1 h-8 w-8"})]})})}),t.jsx("div",{id:"upload-image-label",className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:t.jsx(D,{id:"DJ+4dI",defaultMessage:"Upload an image"})})]})}function It({card:s,className:e,label:o}){const{formatMessage:n}=$();return typeof s.url=="string"?t.jsx("img",{src:s.url,alt:n(s.prompt),className:e}):t.jsxs("picture",{className:e,children:[s.url.map(({type:a,url:i})=>a==="jpg"?null:t.jsx("source",{srcSet:i,type:`image/${a}`},i)),t.jsx("img",{"aria-label":o,src:s.url[0].url,alt:n(s.prompt),className:F(e,"h-full w-full object-cover")})]})}function An({type:s,images:e,onClick:o}){const[n,a]=c.useState(0),{formatMessage:i}=$(),h=n+1>=e.length?0:n+1,d=e[n].prompt;return t.jsxs("div",{children:[t.jsxs("div",{className:"group/stack relative flex justify-center",children:[t.jsx("div",{onClick:()=>{const b=n+1>=e.length?0:n+1;a(b)},className:F("bg-token-bg-primary relative z-2 grid aspect-square h-full overflow-clip rounded-xl text-xs shadow-lg transition-transform duration-[0.24s]","group-hover/stack:-translate-x-2 group-hover/stack:rotate-[-3deg] group-hover/stack:shadow-md",e.length>1&&"cursor-pointer"),children:t.jsx(It,{card:e[n],label:i(d)})},n),t.jsx("div",{className:F("ease-in-expo ease-spring-standard absolute top-0 left-0! flex aspect-square w-full translate-y-2 rotate-[2deg] opacity-40 transition-transform duration-[0.24s]","group-hover/stack:translate-x-2 group-hover/stack:translate-y-[0px] group-hover/stack:rotate-[4deg]"),children:t.jsx(It,{card:e[h],label:i(d),className:F(Ga.fadeScale,"aspect-square w-full overflow-hidden rounded-xl shadow-xl")})},h),t.jsx("button",{id:i(d),onClick:()=>o(i(d)),tabIndex:0,className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-tertiary can-hover:z-0 absolute bottom-6 flex w-fit items-center justify-center rounded-full border px-3 py-1 text-sm shadow-md duration-[0.24s] group-hover/stack:z-11 focus-visible:z-11 active:scale-98 motion-safe:transition-[background-color,transform]",children:t.jsx(D,{id:"wk6Ayk",defaultMessage:"Try this prompt"})})]}),s&&t.jsx("div",{className:"text-token-text-secondary mt-8 w-full text-center text-sm font-medium",children:i(s)})]})}function In({onCardClick:s,onUploadCardClick:e}){const{value:o}=se("2640502720"),n=$(),i=we()?.isWorkspacePlan()?Ta:Pa,h=Se(),[d,b]=c.useState(!1),{images:_,hasNextPage:x,isLoading:v,isFetchingNextPage:S,fetchNextPage:l}=Qt(d),{data:u,isLoading:g}=Ea(),y=Ce(),m=u?.images_count,f=!!m,p=!!u?.archived_images_count,r=!g&&!f,C=Ks({id:"Gd9T7H",defaultMessage:"My Library"});return t.jsxs("div",{className:"mx-auto flex w-full flex-col items-center",children:[t.jsxs("div",{className:"my-6 grid w-full grid-cols-2 gap-4 gap-y-10 max-md:px-4 sm:grid-cols-3 md:grid-cols-4",children:[t.jsx(En,{onClick:e}),i.map(w=>t.jsx(An,{type:w.type,images:w.images,onClick:T=>{s(T),w.needsUpload&&h.showUploadSuggestion$.set(!0)}},String(w.type.defaultMessage)))]}),t.jsx("div",{className:F("z-50 mt-4 flex w-full items-center justify-between max-md:px-4",o&&"sticky top-[9px]"),children:t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex text-lg font-medium",children:t.jsx(D,{...C})}),f&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-token-text-tertiary flex gap-6 text-sm",children:t.jsx(D,{id:"Grwczz",defaultMessage:"{count, plural, =0 {No images} one {# image} other {# images}}",values:{count:m}})}),p&&t.jsx(Aa,{includeArchived:d,setIncludeArchived:b})]})]})}),!r&&t.jsx("div",{className:"mt-4 mb-6 w-full border-t max-md:mb-6 max-md:hidden"}),r&&t.jsx(Ia,{onClick:()=>{const w=kt(i),T=kt(w?.images??[]);T&&s(n.formatMessage(T.prompt)),y.focus()}}),!r&&t.jsx("div",{className:"min-h-svh w-full max-md:px-4",children:t.jsx(_n,{count:m??0,images:_??[],includeArchived:d,hasMoreImages:x,isFetchingMore:S||v,onScrollToEnd:l})})]})}const Ln=({systemHint:s})=>{const{updateSystemHint:e}=Oa(),o=je(),{transitionToNextPage:n}=Wa(),{clientThreadId:a}=ut();c.useEffect(()=>{o.activeViewTransition&&o.signalTransitionReady()},[o]),c.useEffect(()=>{e(s,{clientThreadId:a})},[s,a,e]);let i=null;switch(s){case B.Canvas:i=t.jsx(D,{id:"4+tS2L",defaultMessage:"Write with canvas"});break;case B.PictureV2:i=t.jsx(D,{id:"QtMyOg",defaultMessage:"Make an image"});break;case B.Research:i=t.jsx(D,{id:"Rdax1G",defaultMessage:"Deep research"});break;default:i=t.jsx(D,{id:"UrTsbY",defaultMessage:"Unknown landing page"});break}return t.jsx(Ha,{children:t.jsxs(Da,{className:"mt-[100px] flex flex-col items-center gap-6",children:[t.jsx(qa,{isBadge:!0,isLauncher:!1,systemHint:s,label:null}),t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[t.jsx("div",{"data-landing-page-load-target":!0,className:"text-token-text-primary text-4xl font-medium tracking-tight [text-box-trim:trim-both] [view-transition-name:var(--vt-tool-page-title)] md:text-5xl",children:i}),t.jsxs(He,{to:"/",viewTransition:!0,onClick:h=>{h.preventDefault(),n({path:"/",nextPageType:{type:"home",value:void 0},update:()=>{e(null,{clientThreadId:a})}})},className:"group text-token-text-tertiary flex items-center gap-1 text-sm",children:[t.jsx(Fa,{className:"h-4 w-4",style:{display:"var(--is-ltr, block) var(--is-rtl, none)"}}),t.jsx(ts,{className:"h-4 w-4",style:{display:"var(--is-ltr, none) var(--is-rtl, block)"}}),t.jsx("div",{className:"group-hover:underline",children:t.jsx(D,{id:"gdbtML",defaultMessage:"Back to ChatGPT home"})})]})]})]})})},Rn=({systemHint:s})=>{const e=Ce(),o=Se(),n=c.useCallback(S=>{e.setText(S),e.focus()},[e]);c.useEffect(()=>()=>{o.reset()},[o]);const a=c.useCallback(()=>{z.logEvent("Open File Viewer",{intent:Ua.Multimodal.toString()}),e.openFileDialog()},[e]),{isImageGenLandingPageEnabled$:i,isAllPagesEnabled$:h}=Se(),d=ve(i),b=ve(h),x=s===B.PictureV2&&d;if(!b&&!x)return null;let v=null;switch(s){case B.Canvas:v=!1;break;case B.PictureV2:v=t.jsx(In,{onCardClick:n,onUploadCardClick:a});break;case B.Research:v=!1;break;default:v=t.jsx(D,{id:"JEsPH+",defaultMessage:"Unknown landing page {systemHint}",values:{systemHint:s}})}return v},Gn=4,On=async({text:s,numCompletions:e,isUnauthenticated:o,isThreadUsingSearchMode:n=!1,autocompleteMode:a,activeSystemHint:i})=>{try{return(o?await Ge.safePost("/conversation/experimental/generate_autocompletions_anon",{requestBody:{input_text:s,num_completions:e,in_search_mode:n,system_hint:i},authOption:Dt.Anonymous}):await Ge.safePost("/conversation/experimental/generate_autocompletions",{requestBody:{input_text:s,num_completions:e,in_search_mode:n,system_hint:i}})).completions.map(d=>({id:Js(),type:U.Autocomplete,title:d.slice(0,s.length),body:d.slice(s.length),oneliner:d,prompt:d,source:a}))}catch{return[]}},Wn=()=>!1,Hn=({clientThreadId:s,composerController:e,isGizmoThread:o})=>{const n=Ht(e.store,P=>P.showTaggingDropdown),a=Xt(),i=Array.from(a)[0],[h,d]=c.useState([]),[b,_]=c.useState([]);c.useRef(0);const x=Gn,[v,S]=c.useState(),l=c.useCallback(P=>{d(M=>{const L=typeof P=="function"?P(M):P;return Es(L,M)?M:L})},[]),{trendingSuggestions:u,fetchTrendingSuggestions:g}=Dn(x),{isUnauthenticated:y}=he(),m=za(),f=c.useCallback(P=>{const M=e.getCurrentText();return M&&Xe(P).startsWith(M.toLocaleLowerCase())},[e]),p=c.useCallback(P=>{const M=e.getCurrentText(),L=P.title+P.body;return f(P)?{...P,title:M,body:L.slice(M.length)}:{...P,title:L,body:""}},[e,f]),k=c.useCallback((P=!1)=>{l(M=>!M.some(f)&&M.length>0?[]:P?M:M.map(p))},[f,p,l]),r=$(),C=c.useMemo(()=>({[W.Canvas]:[{type:U.Starter,title:r.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:r.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:W.Canvas},{type:U.Starter,title:r.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:r.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character who’s discovering a long-lost secret"}),body:"",theme:W.Canvas},{type:U.Starter,title:r.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:r.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:W.Canvas},{type:U.Starter,title:r.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:r.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:W.Canvas}],[W.Image]:[{type:U.Starter,title:r.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:r.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called ‘Nexora’. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:W.Image},{type:U.Starter,title:r.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:r.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. It’ll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:W.Image},{type:U.Starter,title:r.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:r.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. It’s taking a nap in its favorite spot by the fire"}),body:"",theme:W.Image},{type:U.Starter,title:r.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:r.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:W.Image}],[W.ContextualAnswers]:[{type:U.Starter,title:r.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:r.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:t.jsx(Va,{className:"h-full w-full"}),body:"",theme:W.ContextualAnswers},{type:U.Starter,title:r.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:r.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:t.jsx(Ba,{className:"h-full w-full"}),body:"",theme:W.ContextualAnswers},{type:U.Starter,title:r.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:r.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:t.jsx(Ya,{className:"h-full w-full"}),body:"",theme:W.ContextualAnswers},{type:U.Starter,title:r.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:r.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:t.jsx(ss,{className:"h-full w-full"}),body:"",theme:W.ContextualAnswers}]}),[r]),w=!!$a(),T=Qa({exposed:w})==="autocomplete",N=!(!w||!e.isEmpty()||!T||o||![B.ContextualAnswers].includes(i)),{caSuggestions:R}=Fn({skip:!N});c.useEffect(()=>{N&&l(P=>R.length>0?P.length>0&&!P.some(M=>M.theme===W.ContextualAnswers)?P:R:P.length>0?P:C[W.ContextualAnswers].slice(0,x))},[C,R,x,l,N]),c.useEffect(()=>{const P=()=>{l(M=>M.filter(L=>L.theme!==W.Search&&L.theme!==W.Image))};if(e.getCurrentText()==="")if(m)u.length>0?l(u):g();else if(i===B.PictureV2){const M=dn(r);l(M)}else P();else P()},[h,e,g,m,l,u,i,r]),c.useEffect(()=>{m&&e.getCurrentText()===""&&u.length>0&&Nt(u,s)},[m,e,u,s]);const q=x-h.filter(f).length,j=zn(m),{layer:O}=ue("4031588851"),A=O.get("autocomplete_min_char",4),G=O.get("autocomplete_fetch_interval",200),H=c.useRef(null),Q=c.useCallback(Ka(async P=>{const M=e.getCurrentText();if(!M||M.length<A||M.length>80||e.hasMultipleLines()){l([]);return}if(!n&&!(H.current&&H.current.length>A&&M.startsWith(H.current)))try{const L=(await On({text:M,numCompletions:P,isUnauthenticated:y,isThreadUsingSearchMode:m,autocompleteMode:j,activeSystemHint:i})).filter(f).map(p);l(V=>{const re=V.filter(f),pt=L.filter(Ve=>{const K=Xe(Ve);return!re.some(ke=>{const ge=Xe(ke);if(K===ge)return!0;const te=/[\p{P}\p{S}]$/u,pe=K.replace(te,""),fe=ge.replace(te,"");return pe===ge||K===fe||pe===fe})}).slice(0,x-re.length);return[...re,...pt]}),L.length>0&&Nt(L,s)}catch{}},j==="BING"?150:G),[e,j,p,G,i]);Za(P=>P.files);const X=i===B.Research,ze=Wn(),Me=X&&ze,oe=c.useCallback(()=>{k(),q>0&&Q(q)},[Q,k,q]);c.useEffect(()=>{n&&l([])},[n,l]);const ne=c.useMemo(()=>j==="HARDCODED"?k:oe,[j,oe,k]),ie=!1,me=c.useCallback(()=>{ne()},[ne,ie,Me,l]),ee=c.useCallback(()=>{e instanceof ea&&k(!0),e.getCurrentText().indexOf(`
`)>0&&(l([]),S(void 0))},[e,l,k,ie,Me]);return c.useEffect(()=>e.subscribe("input",()=>{me()}),[e,me]),c.useEffect(()=>e.subscribe("change",()=>{ee()}),[e,ee]),{autocompletions:h,matchaData:v}},Dn=s=>{const[e,o]=c.useState([]),n=c.useCallback(async()=>{const i=(await Ge.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:s},authOption:Dt.SendIfAvailable})).suggestions.map((h,d)=>({type:U.Trending,title:Fe(h),body:"",icon:t.jsx(Ja,{className:"h-full w-full"}),prompt:Fe(h),id:`search-trending-${d}`,theme:W.Search}));return o(i),i},[s]);return{trendingSuggestions:e,fetchTrendingSuggestions:n}},qn=s=>{const e=/(["'])(?:(?=(\\?))\2.)*?\1/g,o=s.match(e),n=[];let a=0;return o&&o.forEach(i=>{const h=s.indexOf(i,a);h>a&&n.push({text:s.slice(a,h),isMatched:!1}),n.push({text:i,isMatched:!0,className:"font-medium"}),a=h+i.length}),a<s.length&&n.push({text:s.slice(a),isMatched:!1}),n},Fn=({skip:s})=>{const{data:e=[],refetch:o}=Zs({queryKey:["caSuggestions"],queryFn:async()=>(await Ge.safeGet("/ca/v2/user/suggested_starter_prompts")).suggestions.map((a,i)=>{const h=eo(a.related_file_type)??ss,d=t.jsx(h,{className:"h-full w-full"}),b=qn(a.prompt);return{type:U.Autocomplete,title:Fe(a.prompt),body:"",icon:d,prompt:Fe(a.prompt),id:`ca-suggestions-${i}`,theme:W.ContextualAnswers,autocompletionChunks:b}}),enabled:!s});return{caSuggestions:e,fetchCaSuggestions:o}};function Fe(s){return s.split(" ").map(Xa).join(" ")}const Xe=s=>`${s.title}${s.body}`.toLocaleLowerCase();function Un(){const{layer:s}=ue("4031588851",{shouldLogExposure:!1}),e=s.get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),o=es();return!!o&&o.created*1e3>=new Date(e).getTime()}function zn(s){const{isUnauthenticated:e}=he(),o=se("1468311859").value,n=se("2053937752").value,a=se("3664702598").value,i=se("471233253").value,{layer:h}=ue("4031588851"),{layer:d}=ue("3533083032"),b=Un(),_=!e&&o||e&&n,x=(!e&&a||e&&i)&&b;let v="HARDCODED";{const S=e?d:h;if(s){const l=S.get("search_autocomplete_mode","");_&&l&&(v=l)}else x&&(v=S.get("autocomplete_mode","HARDCODED"))}return v}const Vn=({clientThreadId:s,isGizmoThread:e})=>{const o=Ce(),{autocompletions:n,matchaData:a}=Hn({clientThreadId:s,composerController:o,isGizmoThread:e});return c.useEffect(()=>(o.store.setState({autocompletions:n,matchaData:a}),()=>{o.store.setState({autocompletions:[],matchaData:void 0})}),[n,o,a]),null},Lt=As.button`max-w-28 xs:max-w-40 sm:max-w-60 md:max-w-none group flex cursor-pointer items-center gap-1 rounded-lg py-1.5 ${({$shimmer:s})=>s?"loading-shimmer":""} px-1 text-lg hover:bg-token-main-surface-secondary radix-state-open:bg-token-main-surface-secondary font-semibold text-token-text-secondary overflow-hidden whitespace-nowrap`;function Bn({conversation:s,gizmoResource:e,elementRef:o}){const a=ae(s.id,i=>i?.title??null)??s.title;return t.jsx(He,{to:lo(s.id,e),children:t.jsx(de.Item,{onSelect:()=>{z.logEventWithStatsig("Projects: Breadcrumb Picker Pick Conversation","chatgpt_web_projects_breadcrumb_picker_pick_conversation")},icon:co,children:t.jsx("div",{ref:o,children:a})},s.id)})}function Yn({gizmoId:s,clientThreadId:e,inMobileHeader:o,modelLabel:n}){const a=Y(),i=$(),h=as(),d=ds(e,h),{name:b}=to(),_=b?ao:oo,{data:x}=mt(s),{items:v,hasNextPage:S,fetchNextPage:l,isLoading:u,isFetchingNextPage:g}=so(s),y=c.useRef(null),m=c.useCallback(j=>{u||j==null||(y.current?.disconnect(),y.current=new IntersectionObserver(O=>{O[0].isIntersecting&&S&&l()}),y.current.observe(j))},[u,S,l]);c.useEffect(()=>()=>{y.current?.disconnect()},[]);const[f,p,k]=ae(e,j=>[j?.isLoading,j?.title??null,J.getThreadTitleSource(j)]),r=Gt(a).checkGate("1733239976"),{showEmptyState:C}=os(e),w=i.formatMessage(_.newChatTitle),T=no(e);if(!x||C)return null;const N=p==null&&(Oe(e)||k===Is.NewChat),R=f?t.jsx(t.Fragment,{}):t.jsxs(Lt,{$shimmer:N,children:[t.jsxs("div",{className:"truncate",children:[T?t.jsx(ro,{text:p??""}):p??w,t.jsx("span",{className:"bg-token-main-surface-secondary text-token-text-secondary relative bottom-[1px] mx-1 inline-block rounded-md px-1 text-xs leading-4",children:n})]}),t.jsx(is,{className:"icon-md text-token-text-tertiary"})]}),q=x.gizmo.display.name;return t.jsxs("div",{className:"flex items-center gap-0 overflow-hidden px-2 py-1.5 whitespace-nowrap",children:[t.jsx(Lt,{children:t.jsx(He,{className:"truncate",to:Tt(a,x),children:q})}),t.jsxs(t.Fragment,{children:[t.jsx(ts,{className:"icon-md text-token-text-tertiary"}),t.jsxs(ns,{contentAlign:o?"center":"start",size:"small",onOpenChange:j=>{j&&z.logEventWithStatsig("Projects: Breadcrumb Picker Open","chatgpt_web_projects_breadcrumb_picker_open")},triggerButton:R,contentClassName:"max-h-[50dvh] overflow-y-scroll",children:[!r&&t.jsxs(de.Sub,{onOpenChange:j=>{j&&z.logEventWithStatsig("Projects: Breadcrumb Picker Model Picker Open","chatgpt_web_projects_breadcrumb_picker_model_picker_open")},children:[t.jsx(de.SubMenuTrigger,{children:t.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[t.jsx(D,{id:"ilkdMh",defaultMessage:"Model"}),t.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:n})]})}),t.jsx(de.Portal,{children:t.jsx(de.SubContent,{onClick:()=>{z.logEventWithStatsig("Projects: Breadcrumb Picker Model Picker Select","chatgpt_web_projects_breadcrumb_picker_model_picker_select")},children:t.jsx(st,{sections:d})})})]}),r&&t.jsx(st,{sections:d}),!r&&t.jsxs(t.Fragment,{children:[t.jsx(He,{to:Tt(a,x),children:t.jsx(de.Item,{onSelect:()=>{z.logEventWithStatsig("Projects: Breadcrumb Picker Pick New Chat","chatgpt_web_projects_breadcrumb_picker_pick_new_chat")},icon:io,children:t.jsx(D,{..._.newChatProjectDropdownItem,values:{name:`"${x.gizmo.display.name}"`}})},"new-chat")}),v.filter(j=>j.id!==e).map((j,O)=>{const A=S&&O===v.length-4?m:void 0;return t.jsx(Bn,{elementRef:A,conversation:j,gizmoResource:x},j.id)}),g&&t.jsx("div",{className:"m-4 mb-5 flex justify-center",children:t.jsx(Le,{})})]})]})]})]})}const $n=at(()=>ot(()=>import("./btk9x6oekiwf1fkz.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(s=>s.ThreadHeaderGizmoDropdown)),Qn=({clientThreadId:s,shouldShowFinchSection:e})=>{const o=as(),n=ds(s,o,e);return t.jsx(st,{sections:n})};function Kn({clientThreadId:s,inMobileHeader:e}){const o=Y(),{isLoading:n,data:a}=it(),i=Ls(),[h]=zt(),d=we(),b=d?.planType,_=ho(),x=ae(s,p=>bn({ctx:o,clientThreadId:s,threadState:p,searchParams:h,planType:b,isModelSticky:!!_})),v=$(),S=xn(x,a,v),{isUnauthenticated:l}=he(),u=!l&&b!==Rs.FREE;u&&(Pt.markStart("ThreadModelSelector"),S!=null&&Pt.markRendered("ThreadModelSelector"));const g=t.jsx("div",{children:u?t.jsxs(t.Fragment,{children:[qe," ",t.jsx("span",{className:"text-token-text-tertiary",children:S})]}):qe}),y=c.useMemo(()=>qt(o)?mo(o,d,i,a):!1,[o,d,a,i]),m=gt(p=>p.shouldShowThreadModelPickerDot),f=t.jsxs(go,{style:{viewTransitionName:"var(--vt-thread-model-switcher)"},"aria-label":S?v.formatMessage({id:"JrtGPQ",defaultMessage:"Model selector, current model is {modelLabel}"},{modelLabel:S}):"",children:[g,t.jsx(is,{className:"icon-md text-token-text-tertiary"}),m&&t.jsx(po,{color:"blue",className:"ms-1"})]});return n?f:t.jsx(ns,{alignOffset:-4,size:"small",triggerButton:f,onOpenChange:p=>{z.logEvent("Toggle Model Switcher",{isOpen:p}),Gs.logEvent("toggle_model_switcher",null,{isOpen:String(p)})},contentAlign:e?"center":"start",testId:"model-switcher-dropdown",children:t.jsx(Qn,{clientThreadId:s,shouldShowFinchSection:y})})}function Rt({clientThreadId:s,inMobileHeader:e=!1}){const o=nt(s),n=Y(),a=Ue(o),i=We(n,"3786438384"),{showEmptyState:h}=os(s),{data:d}=mt(o),{data:b}=it(),x=uo(s).id,{value:v}=se("1213809372"),{value:S}=se("1854238036"),l=v||S,{modelLabel:u}=fn(x,b),g=t.jsx(Kn,{clientThreadId:s,inMobileHeader:e});return o==null||a&&i?g:a?h&&d?g:t.jsx(Yn,{modelLabel:u??"",gizmoId:o,clientThreadId:s,inMobileHeader:e}):t.jsx($n,{clientThreadId:s,gizmoId:o,inMobileHeader:e,showGizmoModelPicker:l})}const Zn=({clientThreadId:s})=>{const e=Y(),o=gt(l=>l.activeStageSidebar),n=rt(s),a=fo(Os.WorkspaceShareLinks),{isUnauthenticated:i}=he(),h=Wt(),d=nt(s),b=Ue(d),_=We(e,"16480203"),x=xo(),v=a&&n&&!i&&!h&&(!b||_)&&!x,S=!o;return t.jsx("div",{className:"flex items-center gap-2 pe-1 leading-[0]",id:"conversation-header-actions",children:t.jsx(tn,{showShareButton:v,showProfileDropdown:S,clientThreadId:s})})},Jn=at(()=>ot(()=>import("./ffyeflxcyy89ytsf.js"),__vite__mapDeps([7,2,1,3,8,9,4,5,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,6,29])).then(s=>s.GizmoUsingAsOwnerNotice));function Xn({clientThreadId:s,transparentBackground:e,isEmptyState:o}){const{isNewScrollEnabled:n}=rs(),a=nt(s),i=Ue(a),h=bo(),d=yo(),{data:b}=mt(a),_=we(),x=vo(),v=So(),S=Oe(s),l=gt(N=>N.isConversationScrolledFromTop),u=Y(),g=Re(u,"497415788"),y=Re(u,"3533083032"),m=ae(s,N=>J.hasUserMessage(N))||!S,f=cs(),p=f&&v;if(h)return null;const k=_?.isFree()&&g.get("upgrade_pill_position","none"),r=k==="left"&&(!m||g.get("should_upgrade_pill_persist",!1)),C=k==="center"&&!p&&(!m||g.get("should_upgrade_pill_persist",!1)),w=!qt(u)&&!m&&y.get("anon_hide_model_header_dropdown",!1),T=x&&(i||!a)?t.jsx(Mo,{children:t.jsx(ko,{children:r?t.jsx("div",{className:"text-token-text-primary px-3 text-lg",children:qe}):w?null:t.jsx(Rt,{clientThreadId:s})})}):r?t.jsx("div",{className:"text-token-text-primary px-3 text-lg",children:qe}):w?null:t.jsx(Rt,{clientThreadId:s});return t.jsxs(t.Fragment,{children:[t.jsxs(wo,{id:"page-header",className:F("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition max-md:hidden",o&&"absolute start-0 end-0",!a&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:shadow-none!",!a&&!f&&"@[84rem]/thread:bg-transparent",e&&!f&&"bg-transparent",!n&&l?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",n&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]",l&&C&&"@[84rem]/thread:bg-token-main-surface-primary @[84rem]/thread:[box-shadow:var(--sharp-edge-top-shadow)]!"),children:[t.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[b!=null&&_?.isWorkspaceAccount()&&b.gizmo.tags?.includes(_o.WorkspaceDisabled)&&t.jsx(Jn,{gizmo:b}),t.jsx(Co,{gizmoId:a,clientThreadId:s}),C&&t.jsx(Et,{}),p&&t.jsx(gn,{})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(sn,{clientThreadId:s}),T,r&&t.jsx(Et,{})]}),t.jsx(Zn,{clientThreadId:s})]}),d&&t.jsx(jo,{})]})}const ei=at(()=>ot(()=>import("./bq1trwjkhx8nhxh4.js"),__vite__mapDeps([30,2,4,1,3,5,31])));function ti({clientThreadId:s}){const e=ct(),o=rt(s),n=ae(s,J.getGizmoId),a=async()=>{o&&(await Ft.patchConversation(o,{is_archived:!1}),e.invalidateQueries({queryKey:["conversation",s]}),$s(o,i=>{i.isArchived=!1}),ls(e,n))};return t.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:t.jsx(D,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),t.jsx("div",{children:t.jsx(Ie,{disabled:!o,onClick:a,icon:Xo,children:t.jsx(D,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const si=function({clientThreadId:s,getGizmosCompletionParams:e,hideDisclaimer:o,hideHeader:n,messagesVerticalAlign:a="top",renderEmptyState:i}){const h=Ws(),{isNewScrollEnabled:d,autoPinningEnabled:b}=rs(),{data:_}=it(),x=No(s),v=Hs(),[S,l,u,g,y,m,f,p]=ae(s,I=>[I?.isLoading,J.getCurrentLeafId(I),J.hasUserMessage(I),J.getConversationTurns(I).length,J.isArchived(I),I?.modelId,I?J.getGizmoId(I):v,I?.conversationOrigin===Qs.APPLE]),k=rt(s),r=ct(),{prefetchSearchPromises:C}=ut(),[w]=zt(),T=!!w.get("message"),[N,R]=c.useState(C?.navlink);c.useEffect(()=>{S||(Oe(s)?_t.addTiming("chatgpt.web.chatPage.renderNewConversation"):_t.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[s,S]);const{setTargetedContent:q}=To(),j=h?.includes(Ds),O=null,A=g>=2,{pageType:G}=Po(),H=Y(),Q=Se(),X=ve(Q.isImageGenLandingPageEnabled$),ze=ve(Q.isAllPagesEnabled$),Me=We(H,"1909635392"),oe=c.useContext(qs),ne=Fs(oe),ie=Us(oe),me=Eo(),ee=cs(),{isOpen:P}=on(),M=!!f,L=Oe(s)&&!A&&(At(x)||x?.kind===zs.GizmoTest)&&!me&&!ee&&C==null&&(!ne||M),V=G?.type==="landing-page"&&(ze||G.value===B.PictureV2&&X);We(H,"733205176");const re=L&&!u&&C==null&&(!ne||M),Ve=$t(_).id,K=m??Ve,ke=!!m,ge=Ao(_?.models,K),te=Io(s,x),pe=Lo();Ro(g,s),c.useEffect(()=>{pe||q(void 0)},[s,q,pe,l]),c.useEffect(()=>{De.setIsConversationScrolledFromTop(!1)},[s]),c.useEffect(()=>{const I=new URLSearchParams(window.location.search),ye=I.get("src");if(ye==="history_search"){I.delete("src");const Te=I.toString(),_s=`${window.location.pathname}${Te?`?${Te}`:""}${window.location.hash}`;window.history.replaceState({},document.title,_s)}k&&ye==="history_search"&&Ft.patchConversation(k,{touch:!0}).then(()=>{ls(r,f)})},[k,f,r]);const fe=Vt(s),Be=c.useCallback(I=>{fe(e?e(I):I)},[fe,e]),Ye=je(),hs=Bt(),ms=lt(),$e=c.useRef(null);$e.current=I=>{V?Ye.transitionToPage({type:"home",value:void 0},()=>{ms("/",{preventScrollReset:!0}),Be(I)}):L&&!hs&&Vs(H,"3253785454").get("should_animate_composer",!1)?Jt({className:en["composer-slide"],update:()=>Be(I)}):Be(I)};const xe=c.useCallback(I=>$e.current?.(I),[$e]);c.useEffect(()=>{Ye.signalTransitionReady()},[Ye,V,s]);const gs=Go({clientThreadId:s,handleRequestCompletion:xe,prefetchSearchThreadIdPromise:C?.threadId})&&N==null,Qe=c.useRef(null),ps=I=>{if(d&&!V)return t.jsx(Ko,{allowScrollToEnd:!ie,allowScrollToTop:!ie&&p,clientThreadId:s,enableAutoScrollPinning:b,initScrolledToEnd:N==null&&!T,threadFooterRef:Ze,threadRootRef:xt,children:I});{const ye=t.jsx("div",{className:"relative h-full",children:t.jsxs("div",{className:F("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges] @[84rem]/thread:pt-(--header-height)"),ref:Qe,children:[t.jsx(Zo,{setIsScrolledToEdge:Te=>{De.setIsConversationScrolledFromTop(Te)},options:{root:Qe?.current}}),I]})});return N!=null?ye:t.jsx(Ys,{children:t.jsxs(c.Suspense,{fallback:null,children:[t.jsx(Jo,{}),ye]})})}};c.useEffect(()=>{ee||(document.title=te??"ChatGPT")},[te,O,ee]);const fs=Bs(oe),Ke=we(),xs=Ke&&!Ke.isTeam()&&!Ke.isEnterprisey(),ft=!o&&!fs&&!ne&&!(L&&xs)&&At(x),xt=c.useRef(null),bt=c.useRef(null),Ze=c.useRef(null),yt=Oo(I=>I.composerHeight),bs=c.useMemo(()=>({threadContentScrollContainerElementRef:bt,footerRootContainerElementRef:Ze}),[]),ys=!L&&!V,vs=ht(),Ss=Ue(f),be=M&&Ss,Ne=!be,ws=L&&!V,vt=V&&G?.type==="landing-page";return t.jsx(Wo.Provider,{value:N,children:t.jsx(Ho,{clientThreadId:s,children:t.jsx(Kt,{clientThreadId:s,children:t.jsxs(dt,{clientThreadId:s,children:[j&&t.jsx(ei,{}),!ee&&t.jsx(Do,{children:te!=null&&t.jsx("title",{children:te})}),t.jsx(qo.Provider,{value:xe,children:t.jsxs(Zt,{children:[t.jsxs("div",{id:"thread",ref:xt,className:F("group/thread @container/thread h-full w-full",d&&!V&&Vo.threadRoot,V&&"overflow-y-auto"),children:[t.jsxs(un,{noKeyboard:!0,clientThreadId:s,currentModelConfig:ge,className:F("composer-parent flex flex-col focus-visible:outline-0",!V&&"h-full"),children:[t.jsxs(Fo,{value:bs,children:[!n&&t.jsx(Xn,{clientThreadId:s,isEmptyState:re}),Me&&t.jsx(Uo,{clientThreadId:s}),t.jsxs("div",{ref:bt,className:F("flex basis-auto flex-col",ys&&"-mb-(--composer-overlap-px) [--composer-overlap-px:24px]",be||M||!L?"grow":"shrink",!L&&"overflow-hidden",L&&!be&&!M&&"min-[510px]:max-[768px]:mt-[25dvh]! @max-[31.9rem]/thread:grow @max-[31.9rem]/thread:justify-center @lg/thread:mt-[calc(30dvh+25px)]"),style:{"--composer-height":yt?`${yt}px`:void 0},children:[vt&&t.jsx(Ln,{systemHint:G.value}),!V&&t.jsx(t.Fragment,{children:!S&&!gs?re?i??t.jsx(t.Fragment,{children:M?t.jsx(an,{clientThreadId:s,gizmoId:f,onRequestCompletion:xe,currentModelId:K}):t.jsx(Cn,{clientThreadId:s,currentModelId:K,isModelLoaded:ke})}):A||N!=null?ps(t.jsx(pn,{onRequestCompletion:xe,clientThreadId:s,scrollContainerRef:Qe,prefetchNavlink:N,setPrefetchNavlink:R},s)):null:null}),!1]})]}),t.jsxs("div",{id:"thread-bottom-container",className:F("isolate z-3 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!V&&!ft&&!ie&&"mb-4",M||be||!L?"":Ne&&L&&vs?"@lg/thread:grow":"lg:grow",Ne&&"flex flex-col"),ref:Ze,children:[y?t.jsx(ti,{clientThreadId:s}):t.jsxs(t.Fragment,{children:[(!L||Ne)&&!P&&t.jsx(hn,{isGizmoThread:M,isProjectThread:be,clientThreadId:s,isNewThread:L,currentModelId:K,onRequestCompletion:xe,shouldUseUnifiedComposer:Ne,isModelLoaded:ke}),ws&&t.jsx(Vn,{clientThreadId:s,isGizmoThread:M})]}),ft?t.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:t.jsx(zo,{clientThreadId:s})}):null]})]}),vt&&t.jsx(Yt,{children:t.jsx(Rn,{systemHint:G.value})})]}),t.jsx(Bo,{clientThreadId:s,isStaticSharedThread:!1,isDynamicSharedThread:me}),t.jsx(Yo,{}),t.jsx(yn,{conversationId:s}),t.jsx($o,{}),t.jsx(Qo,{conversationId:s}),!1]})})]})})})})},xi=Xs.memo(si);export{Zn as C,_n as I,xi as M,Rt as T};
//# sourceMappingURL=nbtu70bcxl3kbodi.js.map
