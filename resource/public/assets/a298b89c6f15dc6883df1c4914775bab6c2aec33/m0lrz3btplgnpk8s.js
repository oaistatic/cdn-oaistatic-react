import{r as e,D as _,ah as y,g as I,ae as R,u as M,j as a}from"./n75kuy1cx6f5mogg.js";import{j as b,aQ as z,pM as N,bL as k,i as H,k as L,fl as E,fm as P,fk as Q,f4 as j,bK as A,og as F,aP as G,ov as K,nb as U}from"./ewse8exzafeu10ji.js";import{C as D}from"./mv12q8bkkijgf9zf.js";import{r as Y,fH as v,fI as $,fJ as w,a as B,di as J,fK as W}from"./ny10lj7zpuz89fvf.js";import"./3mp3j06lb1q5ttzm.js";import"./gy07ow2dyy5du4ny.js";import"./h2dwuj1m5ps9l7uv.js";import"./j2ui4c2m3nj8pqst.js";import"./lksc5q29mjlblqoo.js";import"./da0anzdj3bll2tbv.js";import"./mzj5jqjjpo006z7a.js";import"./nnb0v70g00lhjclz.js";import"./fh2tsu8ocsi22jc3.js";import"./jaupzjmp9wknd4io.js";import"./jtxj1xvdu5i7mvdh.js";import"./d65yyyom1modmtdi.js";import"./kj8rd4pu8k32z2dy.js";import"./em5q5yhbyv41ft0j.js";import"./gva4acr7rlqtafux.js";import"./k5jwqq80a0png05z.js";import"./czwq62q5rbh9b1yi.js";import"./gowyl4x2bs7hfi4a.js";import"./kg55sov6c624o43c.js";import"./7pd84i0fdyounev7.js";import"./ca3g7gcaj954pu3h.js";import"./d5vv6ct7n3prp63a.js";function X(n,o){const s=e.useRef(0);return()=>{s.current<o&&(n(),s.current+=1)}}const vt=()=>{Y();const n=z();if(!b(n,"491279851"))return y("/")},Tt=_(function(){const o=I(),{gizmoSlug:s}=R(),t=N(s!=null?s:""),{data:c,isError:g,error:r}=k(t,!1),m=M(),p=m.getQueryData([v]),d=m.getQueryState([v]),C=(d==null?void 0:d.fetchStatus)==="fetching",u=e.useMemo(()=>p==null?void 0:p.pages.flatMap(f=>f.items),[p]),x=H(),T=$(),S=w(x)(t,T);e.useEffect(()=>{S.conversations$().preload$()},[S]),e.useEffect(()=>{if(g&&!c)if(r instanceof L&&(r.status===403||r.status===404))o(E(P.PROJECT_NOT_FOUND));else{const f=Q(r);o(E(P.CUSTOM_ERROR,void 0,f))}},[g,c,o,r]);const[i,l]=e.useState(()=>j());B(i,{kind:A.GizmoInteraction,gizmo_id:t}),e.useEffect(()=>{l(j())},[t]);const h=X(()=>{W(m)},5);return e.useEffect(()=>{if(!t||!c||C)return;(u==null?void 0:u.some(O=>O.gizmo.gizmo.id===t))||h()},[c,t,u,C,m,h]),a.jsx(F.Provider,{value:G(x,i),children:a.jsx(K,{children:a.jsx(U,{clientThreadId:i,children:a.jsx(J,{clientThreadId:i,setClientThreadId:l,routeType:"snorlax",children:a.jsx(D,{clientThreadId:i,setClientThreadId:l})})})})})});export{vt as clientLoader,Tt as default};
//# sourceMappingURL=m0lrz3btplgnpk8s.js.map
