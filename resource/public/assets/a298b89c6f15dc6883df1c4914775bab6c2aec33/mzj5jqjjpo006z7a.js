import{b as I,g as F,r as U,j as f,d as Y}from"./n75kuy1cx6f5mogg.js";import{dv as B,L as h,p as P,P as S,an as O,hC as L,w as G,k_ as b,hj as k,hh as x,hf as v,hd as A,hb as w,h9 as j,h7 as H,h5 as K,h3 as V}from"./ewse8exzafeu10ji.js";import{g as N}from"./nnb0v70g00lhjclz.js";import{c as $,a as q,G as J,P as Q,d as W,e as X,f as Z,h as z,i as ee,j as ne,k as oe,l as te,m as re,n as ae,o as se,p as ce,q as ie,r as me,s as le,t as ue,u as _e,v as ge}from"./fh2tsu8ocsi22jc3.js";import{u as de}from"./jaupzjmp9wknd4io.js";import{b1 as pe,b2 as T,b3 as Ce}from"./ny10lj7zpuz89fvf.js";const y=pe.hasDismissedPromoRedemption,R="month",E="year",M="hour";function fe(e){return e==="chatgptplusplan"?"Plus":e==="chatgptgoplan"?"Go":(G.warn("Unsupported plan name for promo redemption banner, falling back to Plus: ",{planName:e}),"Plus")}function Ee(){const{eligible:e}=T(y);return h.getItem(P.PromoCode)?e:!1}function Me(){const e=I(),{markAsViewed:n}=T(y),t=F(),o=B(),{initialBillingDetails:r}=de(o,!0),s=h.getItem(P.PromoCode),{promoMetadata:a}=Ce(s),c=a!=null&&!a.schedule,d=(a==null?void 0:a.plan_name)&&fe(a.plan_name)||"";if(U.useEffect(()=>{c&&(S.logEvent("Promo Redemption Banner Shown",{promoCode:s}),O.logEvent("chatgpt_promo_redemption_banner_shown"))},[c,s]),!c)return null;const l=a.plan_name==="chatgptgoplan"?$():q(),u=Pe(e,r,a,l,d),i=Re(e,r,a,l),_=f.jsxs("div",{className:"grow",children:[f.jsx("div",{className:"mb-0.5 font-semibold",children:u}),f.jsx("span",{className:"text-token-text-secondary",children:i})]});return f.jsx(L,{onPrimaryCtaClick:()=>{const g=h.getItem(P.PromoCode);h.removeItem(P.PromoCode),n(),t("/p/".concat(g,"#pricing")),S.logEvent("Promo Redemption Banner Redeem Button Clicked",{promoCode:g}),O.logEvent("chatgpt_promo_redemption_banner_redeem_button_clicked")},primaryCtaText:e.formatMessage(m.bannerPrimaryCta),onDismiss:n,content:_})}function he({billingDetails:e,planName:n}){const t=e.currency;let o;switch(t){case V:o=n==="chatgptgoplan"?_e:ge;break;case K:o=n==="chatgptgoplan"?le:ue;break;case H:o=n==="chatgptgoplan"?ie:me;break;case j:o=n==="chatgptgoplan"?se:ce;break;case w:o=n==="chatgptgoplan"?re:ae;break;case A:o=n==="chatgptgoplan"?oe:te;break;case v:o=n==="chatgptgoplan"?ee:ne;break;case x:o=n==="chatgptgoplan"?Z:z;break;case k:o=n==="chatgptgoplan"?W:X;break;default:o=n==="chatgptgoplan"?J:Q}return o}function D(e,n){const{discount:t}=n;let o=he({billingDetails:e,planName:n.plan_name});if("percentage"in t){const r=(t==null?void 0:t.percentage)/100;o=o*(1-r)}else if("value"in t){const r=t==null?void 0:t.value;o-=r}return o}function Pe(e,n,t,o,r){var u,i;const{discount:s,duration:a}=t,{currencySymbol:c}=N(o,n.currency),d=a?a.period:R,l=a?a.num_periods:1;if("percentage"in s){const _=s==null?void 0:s.percentage;return e.formatMessage(m.bannerTitleForPercentageDiscount,{discount:"".concat(_),planName:r})}else if("value"in s){const _=D(n,t),g=(i=(u=c.code.defaultMessage)==null?void 0:u.toString())!=null?i:b,C=e.formatNumber(_,{style:"currency",currency:g,minimumFractionDigits:0,maximumFractionDigits:2});let p;switch(d){case R:l===1?p=e.formatMessage(m.bannerTitleForSingleMonth,{cost:C,planName:r}):p=e.formatMessage(m.bannerTitleForPluralMonths,{cost:C,num_months:l,planName:r});break;case E:l===1?p=e.formatMessage(m.bannerTitleForSingleYear,{cost:C,planName:r}):p=e.formatMessage(m.bannerTitleForPluralYears,{cost:C,num_years:l,planName:r});break;case M:throw new Error("Period 'hour' is not supported")}return p}}function Re(e,n,t,o){var _,g;const{duration:r}=t,{currencySymbol:s}=N(o,n.currency),a=r?r.period:R,c=r?r.num_periods:1,d=(g=(_=s.code.defaultMessage)==null?void 0:_.toString())!=null?g:b,l=D(n,t),u=e.formatNumber(l,{style:"currency",currency:d,minimumFractionDigits:0,maximumFractionDigits:2});let i;switch(a){case R:c===1?i=e.formatMessage(m.bannerContentForSingleMonth,{cost:u}):i=e.formatMessage(m.bannerContentForPluralMonths,{num_months:c,cost:u});break;case E:c===1?i=e.formatMessage(m.bannerContentForSingleYear,{cost:u}):i=e.formatMessage(m.bannerContentForPluralYears,{num_years:c,cost:u});break;case M:throw new Error("Period 'hour' is not supported")}return i}const m=Y({bannerTitleForPluralMonths:{id:"promoRedemptionBannerTitleForPluralMonths",defaultMessage:"Get {planName} for {cost}/month for the first {num_months} months"},bannerTitleForSingleMonth:{id:"promoRedemptionBannerTitleForSingleMonth",defaultMessage:"Get {planName} for {cost}/month for the first month"},bannerTitleForPluralYears:{id:"promoRedemptionBannerTitleForPluralYears",defaultMessage:"Get {planName} for {cost}/year for the first {num_years} years"},bannerTitleForSingleYear:{id:"promoRedemptionBannerTitleForSingleYear",defaultMessage:"Get {planName} for {cost}/year for the first year"},bannerTitleForPercentageDiscount:{id:"promoRedemptionBannerTitleForPercentageDiscount",defaultMessage:"Finish redeeming your {discount}% off code for {planName}"},bannerContentForPluralMonths:{id:"promoRedemptionBannerContentForPluralMonths",defaultMessage:"Get {num_months} months of expanded access for only {cost} per month."},bannerContentForSingleMonth:{id:"promoRedemptionBannerContentForSingleMonth",defaultMessage:"Get 1 month of expanded access for only {cost} per month."},bannerContentForPluralYears:{id:"promoRedemptionBannerContentForPluralYears",defaultMessage:"Get {num_years} years of expanded access for only {cost} per year."},bannerContentForSingleYear:{id:"promoRedemptionBannerContentForSingleYear",defaultMessage:"Get 1 year of expanded access for only {cost} per year."},bannerPrimaryCta:{id:"promoRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}});export{Me as P,y as a,Ee as u};
//# sourceMappingURL=mzj5jqjjpo006z7a.js.map
