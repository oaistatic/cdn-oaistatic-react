import{f as l,i as c,cw as d,R as i,ba as m}from"./ewse8exzafeu10ji.js";import{n as M,b as u,j as s,M as b,f}from"./n75kuy1cx6f5mogg.js";import{u as h}from"./frf4c35l48b0bjrb.js";import{c7 as p,jS as y}from"./ny10lj7zpuz89fvf.js";function E({onClose:a}){const e=M(),t=e.hash?e.pathname+e.hash:e.pathname,{setupMfa:n}=h({redirectUrl:t}),r=u();return s.jsx(p,{isOpen:!0,title:r.formatMessage({id:"ConfirmEnableMfaForGithubModal.title",defaultMessage:"Enable multi-factor authentication (MFA) to connect GitHub"}),confirmText:r.formatMessage({id:"ConfirmEnableMfaForGithubModal.enableMfa",defaultMessage:"Enable MFA"}),onConfirm:n,onClose:a,primaryButtonColor:"primary",children:s.jsx("div",{children:s.jsx("p",{className:"mb-6",children:s.jsx(b,{id:"ConfirmEnableMfaForGithubModal.description0",defaultMessage:"GitHub requires MFA to be enabled."})})})})}function C(){const a=u(),e=l(),t=c();return r=>{var o;(o=r.detail)!=null&&o.toLowerCase().includes("multi-factor authentication")&&(d(t,E),e.danger(a.formatMessage({id:"l+k7fe",defaultMessage:"Multi-factor authentication required"}),{id:"connect-connector-error",duration:3,hasCloseButton:!0}))}}function G(a){var o;const{data:e,isLoading:t,isError:n,refetch:r}=f({queryKey:["mfa-requirement-level-".concat(a)],queryFn:async()=>await i.safeGet("/aip/connectors/{connector_id}/mfa_requirement",{parameters:{path:{connector_id:a}}})});return t?{status:"loading",retry:()=>{}}:n?{status:"error",retry:r}:{status:(o=e==null?void 0:e.requirement)!=null?o:"not_required",retry:r}}function F({enabled:a=!0}={}){const e=m(),t=e==null?void 0:e.includes(y);return f({queryKey:["mfaInfo"],queryFn:()=>i.safeGet("/accounts/mfa_info"),enabled:t&&a})}function j({enabled:a=!0}={}){var n,r;const e=F({enabled:a});let t;return e.isLoading?t="loading":e.isError?t="error":(n=e.data)!=null&&n.mfa_enabled?t="enabled":t="disabled",{status:t,native_default_factor_id:(r=e.data)==null?void 0:r.native_default_factor_id,retry:e.refetch}}export{j as a,C as b,G as u};
//# sourceMappingURL=efc6pm86205um7c5.js.map
