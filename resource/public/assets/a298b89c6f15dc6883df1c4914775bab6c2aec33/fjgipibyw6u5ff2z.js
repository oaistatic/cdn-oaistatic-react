const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kvrjz70amrbkm807.js","assets/n75kuy1cx6f5mogg.js"])))=>i.map(i=>d[i]);
var gt=Object.defineProperty,ft=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var Me=(a,e,s)=>e in a?gt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,$=(a,e)=>{for(var s in e||(e={}))Ne.call(e,s)&&Me(a,s,e[s]);if(Y)for(var s of Y(e))Oe.call(e,s)&&Me(a,s,e[s]);return a},Q=(a,e)=>ft(a,xt(e));var Le=(a,e)=>{var s={};for(var n in a)Ne.call(a,n)&&e.indexOf(n)<0&&(s[n]=a[n]);if(a!=null&&Y)for(var n of Y(a))e.indexOf(n)<0&&Oe.call(a,n)&&(s[n]=a[n]);return s};import{q8 as ht,ej as Ke,e as Qe,dG as yt,ek as Fe,i as He,f as ze,r as vt,dv as pe,b as jt,hy as bt,fd as Ct,fe as k,T as me,qp as z,q as kt,$ as Ie,a0 as Pe,C as Xe,dh as Je,fg as wt,B as oe,lK as St,ex as w,fk as _t,qq as ee,bW as Ze,cw as Mt,fA as Nt,P as ie,aF as Ee,R as Ge}from"./ewse8exzafeu10ji.js";import{r as S,c as J,j as t,b as F,u as Ot,M as j,f as Ye,e as re}from"./n75kuy1cx6f5mogg.js";import{lr as Lt,fI as It,ls as et,lt as Pt,a5 as tt,jj as at,ks as Re,lu as Ae,e1 as Et,jq as st,c8 as ge,lv as Rt,lw as At,lx as Tt,jo as Ut,ly as $t,lz as le,js as Vt,eF as Te}from"./ny10lj7zpuz89fvf.js";import{S as Wt}from"./hi2sizpbhzft6v8d.js";import{L as qt,R as Dt,X as Bt}from"./h8ubb8pbx4cc6fvw.js";import{V as G}from"./h2t8e4spzi3rf7zt.js";import{a as nt}from"./kkcke7zkpz7m4enu.js";import{c as Kt,E as Qt}from"./kbhs4e9ejqyq5smh.js";import{_ as Ft,a as Ue,g as Ht,b as zt,d as ce,v as Xt,e as $e,u as Jt,f as Zt,S as Gt,c as Ve}from"./csgiryt168fxpofe.js";import"./5hoqitp3r2hkdtny.js";var Yt=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],We=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,l=String(e).toLowerCase(),o=String(n.getOptionValue(s)).toLowerCase(),i=String(n.getOptionLabel(s)).toLowerCase();return o===l||i===l},de={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,s,n,l){return!(!e||s.some(function(o){return We(e,o,l)})||n.some(function(o){return We(e,o,l)}))},getNewOptionData:function(e,s){return{label:s,value:e,__isNew__:!0}}};function ea(a){var e=a.allowCreateWhileLoading,s=e===void 0?!1:e,n=a.createOptionPosition,l=n===void 0?"last":n,o=a.formatCreateLabel,i=o===void 0?de.formatCreateLabel:o,r=a.isValidNewOption,d=r===void 0?de.isValidNewOption:r,c=a.getNewOptionData,p=c===void 0?de.getNewOptionData:c,x=a.onCreateOption,g=a.options,h=g===void 0?[]:g,v=a.onChange,f=Ft(a,Yt),u=f.getOptionValue,b=u===void 0?zt:u,P=f.getOptionLabel,V=P===void 0?Ht:P,y=f.inputValue,L=f.isLoading,M=f.isMulti,E=f.value,q=f.name,T=S.useMemo(function(){return d(y,Ue(E),h,{getOptionValue:b,getOptionLabel:V})?p(y,i(y)):void 0},[i,p,V,b,y,d,h,E]),X=S.useMemo(function(){return(s||!L)&&T?l==="first"?[T].concat(ce(h)):[].concat(ce(h),[T]):h},[s,l,L,T,h]),C=S.useCallback(function(N,_){if(_.action!=="select-option")return v(N,_);var R=Array.isArray(N)?N:[N];if(R[R.length-1]===T){if(x)x(y);else{var U=p(y,y),D={action:"create-option",name:q,option:U};v(Xt(M,[].concat(ce(Ue(E)),[U]),U),D)}return}v(N,_)},[p,y,M,q,T,x,v,E]);return $e($e({},f),{},{options:X,onChange:C})}var ta=S.forwardRef(function(a,e){var s=Jt(a),n=ea(s);return S.createElement(Zt,ht({ref:e},n))}),aa=ta;const sa=Ke(()=>Fe(()=>import("./kvrjz70amrbkm807.js"),__vite__mapDeps([0,1])).then(a=>a.DirectorySyncResourceManagedIndication));function ot({value:a,onChange:e,options:s,onSearch:n,placeholder:l,trailingComponent:o,isLoading:i,menuIsOpen:r,classNames:d}){const c=F(),p=c.formatMessage({id:"F+GhgL",defaultMessage:"People outside of your workspace cannot be added"}),x=u=>t.jsx(Ve.IndicatorsContainer,Q($({},u),{children:o})),g=(u,b)=>b.context==="value"?u.label:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm",children:u.label}),u.sublabel&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:u.sublabel})]}),u.kind==="group"&&u.isScimManaged&&t.jsx(sa,{})]});return{className:"react-select-container min-w-0",classNamePrefix:"react-select",isMulti:!0,isClearable:!1,isLoading:i,menuIsOpen:r,options:s,value:a,classNames:d,getOptionValue:u=>"".concat(u.kind,":").concat(u.id),getOptionLabel:u=>u.label,onChange:u=>e(u),onInputChange:(u,b)=>{b.action!=="menu-close"&&b.action!=="input-blur"&&n(u)},placeholder:l,openMenuOnFocus:!0,openMenuOnClick:!0,hideSelectedOptions:!1,closeMenuOnSelect:!1,backspaceRemovesValue:!0,controlShouldRenderValue:!0,components:{DropdownIndicator:()=>null,ClearIndicator:()=>null,IndicatorsContainer:x,MultiValue:u=>t.jsx(Ve.MultiValue,Q($({},u),{children:t.jsx("div",Q($({className:"text-token-text-primary bg-token-bg-secondary hover:border-token-border-light hover:bg-token-interactive-bg-secondary-hover m-1 cursor-pointer rounded-md border border-transparent px-1.5 py-1 text-sm",role:"button",tabIndex:0},u.removeProps),{children:t.jsxs("span",{className:"flex min-w-0 items-center gap-1",children:[t.jsx("span",{className:"min-w-0",children:u.children}),t.jsx(yt,{className:"icon-sm"})]})}))})),Option:u=>{const{isFocused:b,isSelected:P,innerProps:V,innerRef:y,data:L}=u;return t.jsx("div",Q($({},V),{ref:y,className:Qe("cursor-pointer rounded-md p-2",P?"bg-token-interactive-bg-secondary-press":b?"bg-token-interactive-bg-secondary-hover":"bg-transparent"),children:g(L,{context:"menu"})}))},MultiValueRemove:()=>null},formatOptionLabel:g,noOptionsMessage:()=>p,loadingMessage:()=>c.formatMessage(Lt.loading),filterOption:(u,b)=>{var P;return u.data.label.toLowerCase().includes(b.toLowerCase())||((P=u.data.sublabel)!=null?P:"").toLowerCase().includes(b.toLowerCase())}}}function na(a){"use forget";const e=J.c(2),s=ot(a);let n;return e[0]!==s?(n=t.jsx(Gt,$({},s)),e[0]=s,e[1]=n):n=e[1],n}function oa(a){"use forget";var c;const e=J.c(12);let s,n,l,o;e[0]!==a?(c=a,{onCreateOption:l,isValidNewOption:n,formatCreateLabel:s}=c,o=Le(c,["onCreateOption","isValidNewOption","formatCreateLabel"]),e[0]=a,e[1]=s,e[2]=n,e[3]=l,e[4]=o):(s=e[1],n=e[2],l=e[3],o=e[4]);const i=ot(o);let r;e[5]!==n?(r=(p,x,g)=>{var h;return(h=n==null?void 0:n(p))!=null?h:!0},e[5]=n,e[6]=r):r=e[6];let d;return e[7]!==i||e[8]!==s||e[9]!==l||e[10]!==r?(d=t.jsx(aa,Q($({},i),{onCreateOption:l,isValidNewOption:r,formatCreateLabel:s})),e[7]=i,e[8]=s,e[9]=l,e[10]=r,e[11]=d):d=e[11],d}const ia=Ke(()=>Fe(()=>import("./kvrjz70amrbkm807.js"),__vite__mapDeps([0,1])).then(a=>a.DirectorySyncResourceManagedIndication));function it(a,e){return a===void 0||e===void 0?!1:a.split("__")[0]===e.split("__")[0]}function H(a){return a.toLowerCase().trim()}function ra(a,e){return a===void 0||e===void 0?!1:H(a)===H(e)}function qe(a,e){return it(a==null?void 0:a.user_id,e==null?void 0:e.id)||ra(a==null?void 0:a.user_email,e==null?void 0:e.email)}function la(a,e){const s=new Set,n=new Set,l=new Set,o=new Set,i=[...a];for(const r of a)r.type===k.USER?s.add(r.user_id):r.type===k.EMAIL?l.add(r.user_email):r.type===k.GROUP?n.add(r.group_id):o.add(r.type);for(const r of e)if(r.type===k.EMAIL){if(l.has(r.user_email))continue;l.add(r.user_email),i.push(r)}else if(r.type===k.USER){if(s.has(r.user_id))continue;s.add(r.user_id),i.push(r)}else if(r.type===k.GROUP){if(n.has(r.group_id))continue;n.add(r.group_id),i.push(r)}else{if(o.has(r.type))continue;o.add(r.type),i.push(r)}return i}function ca(a,e){const s=a.filter(n=>$t(n));return e!=null&&s.push(e),s}function da(a){return a.some(e=>e.type===k.ALL)?le.Link:a.some(e=>e.type===k.WORKSPACE)?le.WorkspaceLink:le.Private}function rt(a){return a.can_write?"edit":"view"}function ua(a){switch(a){case k.ALL:return"link";case k.WORKSPACE:return"workspaceLink";default:return"invite"}}function lt(a){"use forget";const e=J.c(4),{subjectType:s,workspaceName:n}=a;if(s===k.ALL){let o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx(j,{id:"Mr1Pk0",defaultMessage:"Anyone with a link"}),e[0]=o):o=e[0],o}if(s===k.WORKSPACE){let o;return e[1]!==n?(o=t.jsx(j,{id:"okIeDq",defaultMessage:"Anyone at {workspaceName} with the link",values:{workspaceName:n}}),e[1]=n,e[2]=o):o=e[2],o}let l;return e[3]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(j,{id:"fAE/rP",defaultMessage:"Only those invited"}),e[3]=l):l=e[3],l}const De=a=>e=>{var s,n;return e.kind==="user"?{type:k.USER,user_id:e.id,user_name:e.label,user_email:(s=e.sublabel)!=null?s:"",avatar_url:(n=e.avatarUrl)!=null?n:null,capabilities:a}:{type:k.GROUP,group_id:e.id,group_name:e.label,is_scim_managed:!!e.isScimManaged,capabilities:a}},Be=a=>e=>({type:k.EMAIL,user_email:e,capabilities:a}),ma=({label:a,projectName:e,onConfirm:s,onClose:n})=>{"use forget";const l=F(),o=l.formatMessage({id:"tnQ4zL",defaultMessage:"{label, select, undefined {Remove from {projectName}?} other {Remove {label} from {projectName}}}?"},{label:a!=null?a:"undefined",projectName:e}),[i,r]=S.useState(!1);return t.jsx(Xe,{testId:"modal-snorlax-remove-user-confirmation-modal",isOpen:!0,onClose:()=>n(),type:"success",title:o,primaryButton:t.jsx(Ee.Button,{title:l.formatMessage({id:"qvV5dW",defaultMessage:"Remove"}),color:"danger",onClick:async()=>{r(!0);try{await s(),n()}finally{r(!1)}},loading:i,disabled:i,"data-testid":"button-confirm-remove-user"}),secondaryButton:t.jsx(Ee.Button,{title:l.formatMessage({id:"8Z8QAH",defaultMessage:"Cancel"}),disabled:i,color:"secondary",onClick:()=>n()}),children:t.jsx("div",{className:"text-token-text-secondary",children:t.jsx(j,{id:"QkibL8",defaultMessage:"{label, select, undefined {They} other {<b>{label}</b>}} will lose access to all contents in this project.",values:{label:a!=null?a:"undefined",b:d=>t.jsx("span",{className:"text-token-text-primary font-medium",children:d})}})})})};function Ua({gizmo:a,publishedGizmo:e,onClose:s}){"use forget";var ve,je,be,Ce,ke,we,Se,_e;const n=He(),l=F(),o=ze(),i=vt(n),r=pe(),d=(ve=i==null?void 0:i.isWorkspaceAccount())!=null?ve:!1,c=jt(),p=l.formatMessage({id:"nJUofg",defaultMessage:"your workspace"}),x=(je=r==null?void 0:r.name)!=null?je:p,g=It(),[h,v]=S.useState((Ce=(be=a.sharing)==null?void 0:be.subjects)!=null?Ce:[]),[f,u]=S.useState(!1),b=Ot(),{canEdit:P}=bt(e);S.useEffect(()=>{b.invalidateQueries({queryKey:Ct(b,e.gizmo.id).queryKey})},[e.gizmo.id,b]);function V(m,O,I){return m.type===k.USER&&m.user_id.indexOf("__")===-1?Q($({},m),{user_id:m.user_id+"__"+(i==null?void 0:i.getWorkspaceId())}):m}async function y(m,O,I){var B,Z;if(f)return;u(!0);const A=O?I.map(V):I,W=da(A);try{const K=await g.mutateAsync({id:m,update:{sharing:{recipient:W,subjects:A}}});K!=null&&K.resource&&v(Rt(K.resource).sharing.subjects)}catch(K){const ne=_t(K);o.warning(ne!=null?ne:"Error",{duration:2}),v((Z=(B=a.sharing)==null?void 0:B.subjects)!=null?Z:[])}u(!1),b.invalidateQueries({queryKey:["gizmos"]}),b.refetchQueries({queryKey:["gizmos","discovery"]}),b.refetchQueries({queryKey:["gizmo",{gizmoId:m}]}),b.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:m}]}),b.invalidateQueries({queryKey:["workspace"]}),Ie.count(Pe.PROJECTS,"snorlax_share_project_modal_invited_users",{is_workspace_sharing:O?"true":"false",num_users_invited:I.length.toString(),recipient:W})}const L=it(e.gizmo.author.user_id.split("__")[0],c==null?void 0:c.id),M=et(h),E=(M==null?void 0:M.type)!==k.WORKSPACE&&(M==null?void 0:M.type)!==k.ALL,q=E?Je:d?tt:at,T=t.jsx(j,{id:"wDjvNM",defaultMessage:"Only the owner can change permissions. Contact them if you'd like to update someone's access."}),X=t.jsx(me,{label:T,side:"top",children:t.jsx(lt,{subjectType:M==null?void 0:M.type,workspaceName:x})}),C=m=>t.jsx(me,{label:T,side:"top",children:t.jsx("span",{className:"text-token-text-primary pe-4 text-sm",children:t.jsx(j,$({},te(m.capabilities)))})}),N=m=>t.jsxs(w.Root,{children:[t.jsxs(w.Trigger,{color:"secondary",className:"text-token-text-primary text-normal hover:bg-token-interactive-bg-secondary-hover radix-state-open:bg-token-interactive-bg-secondary-press whitespace-nowrap",disabled:f,children:[t.jsx(j,$({},te(m.capabilities))),t.jsx(ge,{className:"icon-sm"})]}),t.jsx(w.Portal,{children:t.jsxs(w.Content,{className:"max-w-[320px]",children:[t.jsx(w.RadioGroup,{value:rt(m.capabilities),onValueChange:O=>{const I=h.map(A=>A===m?Q($({},A),{capabilities:O==="edit"?ee:z}):A);v(I),y(e.gizmo.id,d,I)},children:[z,ee].map((O,I)=>t.jsx(ct,{capabilities:O,selected:Ze(O,m.capabilities)},I))}),t.jsx(w.Item,{onClick:()=>{var I;const O=Ae(m);Mt(n,ma,{label:(I=O==null?void 0:O.label)!=null?I:O==null?void 0:O.sublabel,projectName:e.gizmo.display.name,onConfirm:async()=>{const A=h.filter(W=>W!==m);v(A),await y(e.gizmo.id,d,A)}})},color:"danger",icon:Wt,children:t.jsx(j,{id:"HEaMqG",defaultMessage:"Remove from project"})})]})})]}),[_,R]=S.useState(z),[U,D]=S.useState([]),[ae,se]=S.useState([]),dt=U.length>0||ae.length>0,xe=d&&kt(n,"1585040960").get("enabled",!1),he=async()=>{const O=d?(()=>{if(xe){const A=[],W=[];for(const B of U)B.kind==="email"?W.push(B.id):A.push(B);return[...A.map(De(_)),...W.map(Be(_))]}return U.map(De(_))})():ae.map(Be(_)),I=la(h,O);v(I),await y(e.gizmo.id,d,I),se([]),D([])},ut=()=>{D([]),se([])},ye=t.jsx(oe,{color:"secondary",disabled:f,onClick:ut,children:t.jsx(j,{id:"Pxo4Mv",defaultMessage:"Cancel"})}),mt=d?t.jsx("div",{className:"text-token-text-secondary flex text-xs",children:t.jsx(j,{id:"uAtWCq",defaultMessage:"Project files, chats, and instructions are shared."})}):null,pt=dt&&P?d?t.jsxs("div",{className:"flex items-center gap-2",children:[ye,t.jsx(oe,{color:"blue",disabled:f,loading:f,onClick:he,children:t.jsx(j,{id:"BdwAiM",defaultMessage:"Invite"})})]}):t.jsxs("div",{className:"flex items-center gap-2",children:[ye,t.jsx(oe,{color:"blue",disabled:f,loading:f,onClick:he,children:t.jsx(j,{id:"n1mfg+",defaultMessage:"Invite"})})]}):t.jsx(ga,{gizmo:e,isBusinessWorkspace:d});return S.useEffect(()=>{Ie.count(Pe.PROJECTS,"snorlax_share_project_modal_opened")},[]),t.jsx(Xe,{testId:"modal-share-project",type:"success",className:"max-w-[512px]",size:"custom",isOpen:!0,onClose:s,footerContent:mt,footerClassName:"mt-5 sm:mt-4",modalActionsClassName:"mt-0!",footerIsSpacedBetween:!0,primaryButton:pt,title:l.formatMessage(Et.projectShareTitle),showCloseButton:!0,children:t.jsxs("div",{className:"flex flex-col space-y-4",children:[P&&(d?xe?t.jsx(ha,{publishedGizmo:e,capabilities:_,setCapabilities:R,subjects:U,setSubjects:D}):t.jsx(xa,{publishedGizmo:e,capabilities:_,setCapabilities:R,subjects:U,setSubjects:D}):t.jsx(ya,{capabilities:_,setCapabilities:R,emails:ae,setEmails:se})),t.jsx("div",{className:"text-token-text-secondary mb-2 text-sm font-normal",children:t.jsx(j,{id:"eMoeS0",defaultMessage:"Who has access"})}),t.jsxs(Pt,{className:"max-h-[220px] overflow-y-auto",children:[t.jsx(ue,{icon:t.jsx("div",{className:"flex h-6 w-6 items-center justify-center",children:t.jsx(q,{className:E?"h-5 w-5":"h-6 w-6"})}),children:L?t.jsx(wa,{newSharingSubjects:h,setNewSharingSubjects:v,saveProject:y,publishedGizmo:e,isBusinessWorkspace:d,isSaving:f,workspaceName:x}):X}),t.jsx(ue,{icon:t.jsx(Re,{monogram:{id:(ke=e.gizmo.author.user_id)!=null?ke:"Owner",label:(we=e.gizmo.author.display_name)!=null?we:"User",sublabel:e.gizmo.author.user_email},showTooltip:!d}),trailing:t.jsx("span",{className:"text-token-text-primary pe-4 text-sm",children:t.jsx(j,{id:"qb439J",defaultMessage:"Owner"})}),children:L?t.jsx(j,{id:"I6hNog",defaultMessage:"{userName} {you}",values:{userName:(Se=c==null?void 0:c.name)!=null?Se:c==null?void 0:c.email,you:t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(j,{id:"VZNoWp",defaultMessage:"(you)"})})}}):(_e=e.gizmo.author.display_name)!=null?_e:e.gizmo.author.user_email}),h.map((m,O)=>{var A,W,B,Z,K;const I=m.type===k.EMAIL;return wt(m)&&t.jsx(ue,{icon:t.jsx(Re,{monogram:Ae(m),showTooltip:(m==null?void 0:m.user_name)&&(m==null?void 0:m.user_email)}),trailing:L?N(m):C(m),disabled:I,children:t.jsxs("div",{className:"flex flex-col justify-center",children:[d&&t.jsxs("span",{className:"flex flex-row items-center",children:[t.jsx("span",{className:"text-token-text-primary truncate text-sm leading-tight",children:m.type===k.GROUP?m.group_name:t.jsx(j,{id:"B3bf3E",defaultMessage:"{userName} {you}",values:{userName:m.user_name,you:qe(m,c)?t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(j,{id:"VZNoWp",defaultMessage:"(you)"})}):null}})}),m.type===k.GROUP&&m.is_scim_managed&&t.jsx(ia,{})]}),!d&&t.jsx("span",{className:"text-token-text-primary group-data-[disabled]/sharing-row:text-token-text-tertiary truncate text-sm leading-tight",children:qe(m,c)?t.jsx(j,{id:"hxmjY2",defaultMessage:"{user} {you}",values:{user:(W=(A=m.user_name)!=null?A:m.user_email)!=null?W:"",you:t.jsx("span",{className:"text-token-text-secondary group-data-[disabled]/sharing-row:text-token-text-tertiary",children:t.jsx(j,{id:"VZNoWp",defaultMessage:"(you)"})})}}):I?t.jsx(j,{id:"L+nbVd",defaultMessage:"{email} {maybe_invite_sent}",values:{email:(B=m.user_email)!=null?B:"",maybe_invite_sent:t.jsx("span",{className:"text-token-text-secondary group-data-[disabled]/sharing-row:text-token-text-tertiary",children:t.jsx(j,{id:"FkuKTS",defaultMessage:"(invite sent)"})})}}):(K=(Z=m.user_name)!=null?Z:m.user_email)!=null?K:""})]})},O)}),t.jsx("hr",{className:"border-token-border-light sticky bottom-0 hidden group-data-scrolled-from-end/scrollport:block"})]}),!d&&t.jsx(pa,{})]})})}function pa(){return t.jsxs("div",{className:"bg-token-bg-tertiary flex flex-row items-center gap-3 rounded-xl p-3",children:[t.jsx(Nt,{className:"icon text-token-text-secondary"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-token-text-primary text-xs font-medium",children:t.jsx(j,{id:"pD1bmW",defaultMessage:"This project may include personal information"})}),t.jsx("span",{className:"text-token-text-secondary text-xs",children:t.jsx(j,{id:"EonGo6",defaultMessage:"All project contents are visible to collaborators. Personal memories are disabled for shared projects."})})]})]})}function ga({gizmo:a,isBusinessWorkspace:e}){const s=He(),n=ze(),l=At(s,a),o=a.gizmo.display.name;return t.jsxs("div",{className:"flex flex-row items-center gap-2",children:[!e&&t.jsxs(t.Fragment,{children:[t.jsx("a",{href:"https://www.linkedin.com/shareArticle?url=".concat(encodeURIComponent(l),"&text=").concat(encodeURIComponent(o)),target:"_blank",rel:"noopener noreferrer",onClick:()=>{ie.logEventWithStatsig("Share Project: LinkedIn Social Clicked","chatgpt_share_project_linkedin_social_clicked",{projectTitle:o})},children:t.jsx(qt,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})}),t.jsx("a",{href:"https://www.reddit.com/submit?url=".concat(encodeURIComponent(l),"&title=").concat(encodeURIComponent(o)),target:"_blank",rel:"noopener noreferrer",onClick:()=>{ie.logEventWithStatsig("Share Project: Reddit Social Clicked","chatgpt_share_project_reddit_social_clicked",{projectTitle:o})},children:t.jsx(Dt,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})}),t.jsx("a",{href:"https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(l),"&text=").concat(encodeURIComponent(o)),target:"_blank",rel:"noopener noreferrer",onClick:()=>{ie.logEventWithStatsig("Share Project: X Social Clicked","chatgpt_share_project_x_social_clicked",{projectTitle:o})},children:t.jsx(Bt,{initialBackgroundColor:"var(--main-surface-secondary)",initialFillColor:"var(--text-secondary)",size:36})})]}),t.jsx(Tt,{onClickCopy:i=>Ut(s,a,n,i)})]})}function fe(a){"use forget";const e=J.c(23),{capabilities:s,onChange:n,triggerClassNames:l}=a;let o;e[0]!==l?(o=Qe("text-token-text-secondary hover:bg-token-interactive-bg-secondary-hover radix-state-open:bg-token-interactive-bg-secondary-press whitespace-nowrap",l),e[0]=l,e[1]=o):o=e[1];let i;e[2]!==s?(i=te(s),e[2]=s,e[3]=i):i=e[3];let r;e[4]!==i?(r=t.jsx(j,$({},i)),e[4]=i,e[5]=r):r=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(ge,{className:"icon-sm"}),e[6]=d):d=e[6];let c;e[7]!==o||e[8]!==r?(c=t.jsxs(w.Trigger,{color:"secondary",className:o,children:[r,d]}),e[7]=o,e[8]=r,e[9]=c):c=e[9];let p;e[10]!==s?(p=rt(s),e[10]=s,e[11]=p):p=e[11];let x;e[12]!==n?(x=f=>{n(f==="edit"?ee:z)},e[12]=n,e[13]=x):x=e[13];let g;e[14]!==s?(g=[z,ee].map((f,u)=>t.jsx(ct,{capabilities:f,selected:Ze(f,s)},u)),e[14]=s,e[15]=g):g=e[15];let h;e[16]!==p||e[17]!==x||e[18]!==g?(h=t.jsx(w.Portal,{children:t.jsx(w.Content,{className:"max-w-[320px]",children:t.jsx(w.RadioGroup,{value:p,onValueChange:x,children:g})})}),e[16]=p,e[17]=x,e[18]=g,e[19]=h):h=e[19];let v;return e[20]!==c||e[21]!==h?(v=t.jsxs(w.Root,{children:[c,h]}),e[20]=c,e[21]=h,e[22]=v):v=e[22],v}function te(a){return a.can_write?re({id:"vsUknl",defaultMessage:"Can edit"}):a.can_view_config?re({id:"4ceJzB",defaultMessage:"Can chat"}):re({id:"x2E8ET",defaultMessage:"Unknown"})}function fa(a){return a.can_write?Vt:a.can_view_config?Te:Te}function ct(a){"use forget";const e=J.c(14),{capabilities:s,selected:n}=a,l=F();let o;e[0]!==s.can_write?(o=s.can_write?t.jsx(j,{id:"IShl7Y",defaultMessage:"Chat and edit project content"}):t.jsx(j,{id:"Ux4GYU",defaultMessage:"Chat and view project content"}),e[0]=s.can_write,e[1]=o):o=e[1];const i=o,r=s.can_write?"edit":"view",d=n?"selected":"default";let c;e[2]!==s?(c=fa(s),e[2]=s,e[3]=c):c=e[3];let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(w.RadioItemCheck,{}),e[4]=p):p=e[4];let x;e[5]!==s||e[6]!==l?(x=l.formatMessage(te(s)),e[5]=s,e[6]=l,e[7]=x):x=e[7];let g;return e[8]!==i||e[9]!==r||e[10]!==d||e[11]!==c||e[12]!==x?(g=t.jsx(w.RadioItem,{value:r,color:d,icon:c,trailing:p,label:x,secondary:i}),e[8]=i,e[9]=r,e[10]=d,e[11]=c,e[12]=x,e[13]=g):g=e[13],g}function xa({publishedGizmo:a,capabilities:e,setCapabilities:s,subjects:n,setSubjects:l}){"use forget";var V;const o=F(),i=pe(),[r,d]=S.useState(""),[c]=nt(r,100),p=st(i==null?void 0:i.id,0,c,10),x=S.useMemo(()=>{var y,L,M;return(M=(L=(y=p.data)==null?void 0:y.items)==null?void 0:L.filter(E=>E.account_user_id!==(a==null?void 0:a.gizmo.author.user_id)).map(E=>{var q,T;return{kind:"user",id:E.account_user_id,label:(q=E.name)!=null?q:"Unknown User",sublabel:(T=E.email)!=null?T:""}}))!=null?M:[]},[(V=p.data)==null?void 0:V.items,a]),{data:g,isLoading:h}=Ye({queryKey:[i==null?void 0:i.id,"groups","filtered",c],queryFn:i?()=>Ge.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:i.id},query:{query:c,offset:0,orderby:"@score",limit:20}}}):void 0,enabled:c.trim()!==""&&i!=null&&!!i.getWorkspaceId()}),v=S.useMemo(()=>{var y;return(y=g==null?void 0:g.items.slice(0,10).map(L=>{var M;return{kind:"group",id:L.id,label:L.name,sublabel:o.formatMessage({id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}"},{numMembers:(M=L.num_members)!=null?M:0}),isScimManaged:!!L.is_scim_managed}}))!=null?y:[]},[g,o]),f=y=>"".concat(y.kind,":").concat(y.id),u=new Set(n.map(f)),b=[...x,...v].filter(y=>!u.has(f(y))),P=o.formatMessage({id:"hbjC0K",defaultMessage:"Search people or groups"});return t.jsx("div",{className:"w-full min-w-0",children:t.jsx(na,{value:n,classNames:{menuList:()=>"bg-token-bg-primary",control:()=>"h-auto! min-h-[40px]! max-h-[192px] items-start overflow-y-auto p-1! cursor-text!"},onChange:y=>l([...y]),onSearch:d,menuIsOpen:r.trim()!=="",options:b,placeholder:P,trailingComponent:n.length>0&&t.jsx(fe,{capabilities:e,onChange:s,triggerClassNames:"text-token-text-secondary"}),isLoading:p.isLoading||h})})}function ha({publishedGizmo:a,capabilities:e,setCapabilities:s,subjects:n,setSubjects:l}){"use forget";var X;const o=F(),i=pe(),[r,d]=S.useState(""),[c]=nt(r,100),p=st(i==null?void 0:i.id,0,c,10),x=S.useMemo(()=>{var C,N,_;return(_=(N=(C=p.data)==null?void 0:C.items)==null?void 0:N.filter(R=>R.account_user_id!==(a==null?void 0:a.gizmo.author.user_id)).map(R=>{var U,D;return{kind:"user",id:R.account_user_id,label:(U=R.name)!=null?U:"Unknown User",sublabel:(D=R.email)!=null?D:""}}))!=null?_:[]},[(X=p.data)==null?void 0:X.items,a]),{data:g,isLoading:h}=Ye({queryKey:[i==null?void 0:i.id,"groups","filtered",c],queryFn:i?()=>Ge.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:i.id},query:{query:c,offset:0,orderby:"@score",limit:20}}}):void 0,enabled:c.trim()!==""&&i!=null&&!!i.getWorkspaceId()}),v=S.useMemo(()=>{var C;return(C=g==null?void 0:g.items.slice(0,10).map(N=>{var _;return{kind:"group",id:N.id,label:N.name,sublabel:o.formatMessage({id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}"},{numMembers:(_=N.num_members)!=null?_:0}),isScimManaged:!!N.is_scim_managed}}))!=null?C:[]},[g,o]),f=C=>C.kind==="email"?"".concat(C.kind,":").concat(H(C.id)):"".concat(C.kind,":").concat(C.id),u=new Set(n.map(f)),b=[...x,...v].filter(C=>!u.has(f(C))),P=r.trim(),V=o.formatMessage({id:"bVoU4W",defaultMessage:"Search people, groups, or enter an email"}),y=n.length>0||G.test(P),L=S.useCallback(C=>{const N=H(C);G.test(N)&&(l(_=>_.some(R=>R.kind==="email"&&H(R.id)===N)?_:[..._,{kind:"email",id:N,label:N}]),d(""))},[l]),M=S.useCallback(C=>G.test(H(C)),[]),E=S.useCallback(C=>o.formatMessage({id:"HuCAma",defaultMessage:'Invite "{email}"'},{email:C.trim()}),[o]),q=S.useCallback(({inputValue:C})=>G.test(H(C))?o.formatMessage({id:"1Pe2Hi",defaultMessage:"Press enter to invite this email"}):o.formatMessage({id:"lMDH6U",defaultMessage:"Enter an email to invite people outside of your workspace"}),[o]),T=y?t.jsx(fe,{capabilities:e,onChange:s,triggerClassNames:"text-token-text-secondary"}):void 0;return t.jsx("div",{className:"w-full min-w-0",children:t.jsx(oa,{value:n,classNames:{menuList:()=>"bg-token-bg-primary",control:()=>"h-auto! min-h-[40px]! max-h-[192px] items-start overflow-y-auto p-1! cursor-text!"},onChange:C=>l([...C]),onSearch:d,menuIsOpen:P!=="",options:b,placeholder:V,trailingComponent:T,isLoading:p.isLoading||h,noOptionsMessage:q,onCreateOption:L,isValidNewOption:M,formatCreateLabel:E})})}function ya(a){"use forget";const e=J.c(15),{capabilities:s,setCapabilities:n,emails:l,setEmails:o}=a,i=F();let r;e[0]!==l?(r=l.map(ka),e[0]=l,e[1]=r):r=e[1];const d=r;let c;e[2]!==o?(c=b=>{const P=b.map(Ca);o(Sa(P))},e[2]=o,e[3]=c):c=e[3];const p=c;let x;e[4]!==i?(x=i.formatMessage({id:"Mabh3o",defaultMessage:"Email, separated by commas"}),e[4]=i,e[5]=x):x=e[5];const g=x,h=ba;let v;e[6]===Symbol.for("react.memo_cache_sentinel")?(v={menuList:ja,control:va},e[6]=v):v=e[6];let f;e[7]!==s||e[8]!==n?(f=t.jsx(fe,{capabilities:s,onChange:n,triggerClassNames:"text-token-text-secondary"}),e[7]=s,e[8]=n,e[9]=f):f=e[9];let u;return e[10]!==d||e[11]!==p||e[12]!==g||e[13]!==f?(u=t.jsx("div",{className:"w-full min-w-0",children:t.jsx(Qt,{value:d,onChange:p,placeholder:g,classNames:v,trailingComponent:f,shouldShowTrailingComponent:h})}),e[10]=d,e[11]=p,e[12]=g,e[13]=f,e[14]=u):u=e[14],u}function va(){return"h-auto! min-h-[40px]! max-h-[192px] items-start overflow-y-auto p-0! cursor-text!"}function ja(){return"bg-token-bg-primary"}function ba(a,e){return a&&a.length>0?!0:!!(e&&G.test(e))}function Ca(a){return a.value}function ka(a){return Kt(a!=null?a:"")}function wa({newSharingSubjects:a,setNewSharingSubjects:e,saveProject:s,publishedGizmo:n,isBusinessWorkspace:l,isSaving:o,workspaceName:i}){var g;const r=F(),d=(g=et(a))==null?void 0:g.type,c=d===k.WORKSPACE,p=d===k.ALL,x=c||p;return t.jsxs(w.Root,{children:[t.jsx(me,{label:t.jsx(j,{id:"gWJtAX",defaultMessage:"Shared links give chat-only access. Users can be upgraded to edit access after joining."}),triggerAs:null,disabled:!x,side:"top",children:t.jsxs(w.Trigger,{className:"px-0","data-no-hover-bg":!0,disabled:o,children:[t.jsx(lt,{subjectType:d,workspaceName:i}),t.jsx(ge,{className:"icon-sm"})]})}),t.jsx(w.Portal,{children:t.jsx(w.Content,{children:t.jsxs(w.RadioGroup,{value:ua(d),onValueChange:h=>{const v=ca(a,h==="link"?{type:k.ALL,capabilities:z}:h==="workspaceLink"?{type:k.WORKSPACE,capabilities:z}:null);e(v),s(n.gizmo.id,l,v)},children:[t.jsx(w.RadioItem,{icon:Je,value:"invite",label:r.formatMessage({id:"fAE/rP",defaultMessage:"Only those invited"}),trailing:t.jsx(w.RadioItemCheck,{}),color:x?"default":"selected"}),l&&t.jsx(w.RadioItem,{icon:tt,value:"workspaceLink",label:r.formatMessage({id:"a6GwHG",defaultMessage:"Anyone at {workspaceName} with the link"},{workspaceName:i}),trailing:t.jsx(w.RadioItemCheck,{}),color:c?"selected":"default"}),!l&&t.jsx(w.RadioItem,{icon:at,value:"link",label:r.formatMessage({id:"Mr1Pk0",defaultMessage:"Anyone with a link"}),trailing:t.jsx(w.RadioItemCheck,{}),color:p?"selected":"default"})]})})})]})}function ue({icon:a,children:e,trailing:s,className:n="",disabled:l=!1}){return t.jsxs("div",{className:"mb-1 flex min-h-9 flex-row items-center justify-between space-x-2 ".concat(n," group/sharing-row"),"data-disabled":St(l),children:[t.jsx("div",{className:"shrink-0 grow-0",children:a}),t.jsx("div",{className:"text-token-text-primary grow truncate text-sm",children:e}),s&&t.jsx("div",{children:s})]})}function Sa(a){const e=new Set,s=[];for(const n of a){const l=n.toLowerCase();e.has(l)||(e.add(l),s.push(l))}return s}export{Ua as ShareProjectModal};
//# sourceMappingURL=fjgipibyw6u5ff2z.js.map
