import{r as u,j as e,M as g,b as A,d as T}from"./n75kuy1cx6f5mogg.js";import{j6 as F,j7 as L,f as O,j8 as E,B as R,N as U,a1 as X,ba as H,U as b,je as h,i as N,j as P,j3 as f,hp as W,jf as B}from"./ewse8exzafeu10ji.js";import{g9 as z,ga as G,cO as J,ap as c,gb as K,gc as Y,gd as $,ge as q,gf as Q,gg as Z}from"./ny10lj7zpuz89fvf.js";import{S as ee}from"./dsuqrew0l7dkq40v.js";function se({voice:s,voiceSpeed:n}){const[l,a]=u.useState(!1),t=F(),i=s.voice,d=s.preview_url,r=u.useRef({playPromise:null}).current,o=L(p=>p.isPlaying&&p.sourceUrl===d);u.useEffect(()=>{t&&t.setSpeed(n)},[t,n]);const x=O(),V=u.useCallback(async()=>{if(!t)return;const p={voice:i,source:d};E.previews.click(p);try{a(!0),t.changeSource(d),r.playPromise=t.play(),a(!1)}catch(k){E.previews.error(k,p),x.danger({defaultMessage:"Something went wrong playing preview",description:"Error message when message playing the preview fails"},{toastId:"voice_preview_player_play_error"})}},[t,d,i,r,x]),m=u.useCallback(()=>{t&&(r.playPromise?r.playPromise.then(()=>{t.stop(),r.playPromise=null}):t.stop())},[t,r]),D=u.useCallback(()=>{o?m():l||V()},[m,V,l,o]);return u.useEffect(()=>()=>{o&&m()},[s,o,m]),e.jsx(R,{onClick:D,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:l,icon:o?ee:z,children:o?e.jsx(g,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(g,{id:"JwYDVp",defaultMessage:"Play"})})}const j=.5,v=2,_=.1,I=Math.round((v-j)/_),te=Array.from({length:I+1},(s,n)=>n),C=2,S=8,M=(S-C)/2,ne=s=>{const n=Number(s);return isNaN(n)?1:n};function ae(){const s=N();return P(s,"174366048")}function ie(){const s=N();return P(s,"3302173089")}function xe(){const s=ae(),n=H(),l=ie(),{isLoading:a,value:t,setValue:i}=y(b.VoiceSpeed),d=ne(t),r=G();if(!s)return null;const o=(n==null?void 0:n.length)&&!(n!=null&&n.includes(J.VideoScreenSharing));return e.jsxs(e.Fragment,{children:[r&&e.jsx(h,{children:e.jsx(le,{})}),e.jsx(h,{children:e.jsx(oe,{voiceSpeed:d})}),l&&e.jsx(h,{children:e.jsx(ce,{voiceSpeed:d,setVoiceSpeed:i,isLoading:a})}),o&&e.jsx(h,{children:e.jsx(re,{})})]})}function y(s,n=!1){const{data:l,isLoading:a}=U(s)||{},t=X(n);return{isLoading:a,value:l,setValue:i=>{t.mutate({setting:s,value:i})}}}function oe({voiceSpeed:s}){const{isLoading:n,value:l,setValue:a}=y(b.VoiceName),t=K(),i=Y(),d=n?"":$(l,i),r=t.find(({voice:o})=>o===d);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[r?e.jsxs(e.Fragment,{children:[e.jsx(se,{voice:r,voiceSpeed:s}),e.jsx("div",{className:"h-4 border-s"})]}):null,e.jsxs(c.Root,{value:d,onValueChange:o=>a(o),disabled:n,children:[e.jsxs(c.Trigger,{children:[e.jsx(c.Value,{}),e.jsx(c.Icon,{})]}),e.jsx(c.Portal,{children:e.jsx(c.Content,{children:t.map(({voice:o,name:x})=>e.jsx(c.Item,{value:o,children:x},o))})})]})]})]})})})}function ce({voiceSpeed:s,setVoiceSpeed:n,isLoading:l}){const[a,t]=u.useState(s);return u.useEffect(()=>t(s),[s]),e.jsxs("div",{className:"flex w-full flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),e.jsx("div",{className:"text-token-text-secondary tabular-nums",children:e.jsx(g,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:a.toFixed(1)}})})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(q,{className:"relative flex w-full items-center",min:j,max:v,step:_,value:[a],disabled:l,onValueChange:i=>t(i[0]),onValueCommit:i=>{const d=i[0],r=Math.min(v,Math.max(j,d));n(r.toString())},children:[e.jsxs(Q,{className:"relative h-[4px] grow rounded-full",children:[e.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:M,right:M}}),e.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:S/2,right:S/2},children:te.map(i=>e.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:C,left:"".concat(i/I*100,"%"),transform:"translateX(-50%)"}},i))})]}),e.jsx(Z,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:S}})]})})})]})}function le(){const{isLoading:s,value:n,setValue:l}=y(b.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),e.jsxs(c.Root,{value:s?"":n!=null?n:f.Auto,onValueChange:a=>l(a),disabled:s,children:[e.jsxs(c.Trigger,{children:[e.jsx(c.Value,{}),e.jsx(c.Icon,{})]}),e.jsx(c.Portal,{children:e.jsxs(c.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(c.Item,{value:f.Auto,children:e.jsx(g,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(f).filter(([a,t])=>t!==f.Auto).map(([a,t])=>e.jsx(c.Item,{value:t,className:"capitalize",children:a},t))]})})]})]}),e.jsx(W,{children:e.jsx(g,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function re(){const s=A();return e.jsx(B,{label:s.formatMessage(w.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:s.formatMessage(w.voiceAndScreenSharingDescription)})}const w=T({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}});export{xe as S,y as u};
//# sourceMappingURL=kq6o2ff0g84prlfu.js.map
