var ws=Object.defineProperty,vs=Object.defineProperties;var Ns=Object.getOwnPropertyDescriptors;var fs=Object.getOwnPropertySymbols;var Es=Object.prototype.hasOwnProperty,As=Object.prototype.propertyIsEnumerable;var ps=(i,e,a)=>e in i?ws(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a,x=(i,e)=>{for(var a in e||(e={}))Es.call(e,a)&&ps(i,a,e[a]);if(fs)for(var a of fs(e))As.call(e,a)&&ps(i,a,e[a]);return i},Le=(i,e)=>vs(i,Ns(e));import{b as de,g as os,r as v,j as s,M as d,d as ze,u as ls,a as rs,f as Ps,s as Is,c as We,i as Ts,D as Ls}from"./n75kuy1cx6f5mogg.js";import{a5 as Rs,ap as Ue,nf as ss,ng as w,uq as Ds,cM as Os,ur as Ws,us as Gs,ut as Fs,dp as Ks,ne as Us,fC as zs,aR as Vs,bZ as Bs,jk as Hs}from"./ny10lj7zpuz89fvf.js";import{ri as ks,qO as js,B as je,e as Ys,E as cs,gT as qs,C as ds,T as ys,f as Qe,R as Je,hx as xs,rK as $s,dv as Ve,ng as Xs,i as ts,jf as as,rk as y,cw as Qs,m as Cs,io as Js,j as Xe,rj as Zs,pO as Be,on as et,rl as st,n as tt,rF as at,mf as He,pH as it,pI as nt,jT as ot,pJ as lt,iA as rt,iB as ct,lq as dt,I as mt,dG as ut,tC as gt,oQ as ft,gx as pt,sS as xt,tD as ht}from"./ewse8exzafeu10ji.js";import{l as Ss,m as bt,c as kt,d as jt,e as yt,f as Ct,h as St}from"./drhq0hehfy1vqd5j.js";import{U as Mt,u as _t,E as wt,C as vt,R as Nt,P as Et,i as At}from"./ij1dm26l1s3erqz6.js";import{S as Pt}from"./hjvye6kznkyvb97d.js";import{T as ke}from"./e0z6030ycsi62lhu.js";import{C as K}from"./njvh3glmlpv82mn7.js";import{W as $e}from"./ld5ldp4x9kp7pahk.js";import{E as It}from"./lkis5qusf3l3oysp.js";import{u as Tt,m as Re,F as Lt}from"./n81diue0m3az0e3g.js";import{m as Oe,C as Rt}from"./nx89p1ofixmvk3kp.js";import{T as Dt,a as Ot}from"./jfylj2lx3vqh7vyo.js";import{a as Wt,c as Gt,u as Ft,d as Kt}from"./6tgqoqudeah698zo.js";import"./cj802l28id0sdlgx.js";import"./j2ui4c2m3nj8pqst.js";import"./3mp3j06lb1q5ttzm.js";import"./gy07ow2dyy5du4ny.js";import"./h2dwuj1m5ps9l7uv.js";import"./lksc5q29mjlblqoo.js";import"./da0anzdj3bll2tbv.js";import"./mzj5jqjjpo006z7a.js";import"./nnb0v70g00lhjclz.js";import"./fh2tsu8ocsi22jc3.js";import"./jaupzjmp9wknd4io.js";import"./jtxj1xvdu5i7mvdh.js";import"./d65yyyom1modmtdi.js";import"./kj8rd4pu8k32z2dy.js";import"./em5q5yhbyv41ft0j.js";import"./ca7esdp3innmhgb2.js";import"./eblhjx87s4n4864h.js";import"./ga8p3rr9o0mc72h0.js";function Ut({workspaceId:i}){const e=de(),a=os(),[t,n]=v.useState(""),{data:l,isLoading:m,isPlaceholderData:r}=Ss({workspaceId:i}),[c,o]=v.useState(!1),f=v.useMemo(()=>l==null?void 0:l.data.filter(j=>{var P;return!j.predefined_role&&(j.name.toLowerCase().includes(t.toLowerCase())||((P=j.description)==null?void 0:P.toLowerCase().includes(t.toLowerCase())))}),[l==null?void 0:l.data,t]),u=j=>{j&&n(""),o(j)},h=ks(),{createRole:b}=bt({workspaceId:i,currentRoles:f,bootstrapResources:h?["connectors"]:void 0});return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mt-6 mb-3 flex flex-row justify-between gap-2",children:[s.jsx(js,{inputClassName:"w-[250px] rounded-full! text-sm",value:t,onChange:j=>{n(j.target.value)},placeholder:e.formatMessage({id:"workspaceSettings.roles.search",defaultMessage:"Search role name"})}),s.jsx(je,{onClick:()=>u(!0),icon:Pt,children:s.jsx(d,{id:"workspaceSettings.roles.create",defaultMessage:"Create role"})})]}),s.jsx("div",{children:s.jsxs(ke.Root,{className:"min-w-full",children:[s.jsxs("colgroup",{children:[s.jsx("col",{className:"w-[70%]"}),s.jsx("col",{className:"w-[30%]"})]}),s.jsxs(ke.Header,{children:[s.jsx(ke.HeaderCell,{children:s.jsx(d,{id:"workspaceSettings.roles.roleName",defaultMessage:"Role name"})}),s.jsx(ke.HeaderCell,{children:s.jsx(d,{id:"workspaceSettings.roles.created",defaultMessage:"Last updated by"})}),s.jsx(ke.HeaderCell,{})]}),s.jsx(ke.Body,{className:Ys((m||r)&&"opacity-50"),children:f==null?s.jsx(ke.Row,{children:s.jsx(ke.Cell,{colSpan:5,textAlign:"center",children:s.jsx(cs,{})})}):f.length===0?s.jsx(ke.Row,{children:s.jsx(ke.Cell,{colSpan:5,textAlign:"center",children:t===""?s.jsx(d,{id:"workspaceSettings.roles.noRoles",defaultMessage:"No roles found."}):s.jsx(d,{id:"workspaceSettings.roles.noRolesWithFilter",defaultMessage:"No roles found. Try changing the search query."})})}):f.map(j=>s.jsx(zt,{role:j},j.id))})]})}),c&&s.jsx(Mt,{onClose:()=>u(!1),onSave:async j=>{const P=await b(j);a("/admin/permissions/roles/".concat(P.role.id))},isCreate:!0})]})}function zt({role:i}){var a,t;const e=os();return s.jsx(s.Fragment,{children:s.jsxs(ke.Row,{className:"[&>td]:py-2",onClick:()=>{e("/admin/permissions/roles/".concat(i.id))},children:[s.jsx(ke.Cell,{children:s.jsxs("div",{className:"flex flex-row items-center gap-3",children:[s.jsx("div",{children:i.predefined_role?s.jsx(Rs,{className:"icon"}):s.jsx(qs,{className:"icon"})}),s.jsxs("div",{children:[s.jsx("div",{children:i.name}),s.jsx("div",{className:"text-token-text-tertiary text-sm",children:i.description})]})]})}),s.jsx(ke.Cell,{className:"truncate lowercase",children:(t=(a=i.created_by_user_obj)==null?void 0:a.email)!=null?t:""})]})})}const k=ze({workspaceDetails:{id:"workspaceSettings.workspaceDetails",defaultMessage:"Workspace details"},ekmSettingsLabel:{id:"workspaceSettings.ekmSettingsLabel",defaultMessage:"Enterprise key management"},ekmSettingsEnabled:{id:"workspaceSettings.ekmSettingsEnabled",defaultMessage:"Enabled"},ekmTypeLabel:{id:"workspaceSettings.ekmTypeLabel",defaultMessage:"EKM type"},ekmTypeAws:{id:"workspaceSettings.ekmTypeAws",defaultMessage:"AWS"},ekmTypeGcp:{id:"workspaceSettings.ekmTypeGcp",defaultMessage:"GCP"},ekmTypeAzure:{id:"workspaceSettings.ekmTypeAzure",defaultMessage:"Azure"},ekmTypeDevelopment:{id:"workspaceSettings.ekmTypeDevelopment",defaultMessage:"Development"},ekmNameLabel:{id:"workspaceSettings.ekmNameLabel",defaultMessage:"Name"},ekmAwsRoleArn:{id:"workspaceSettings.ekmAwsRoleArn",defaultMessage:"AWS role ARN"},ekmAwsExternalId:{id:"workspaceSettings.ekmAwsExternalId",defaultMessage:"AWS external ID"},ekmAwsKmsArn:{id:"workspaceSettings.ekmAwsKmsArn",defaultMessage:"AWS KMS ARN"},ekmGcpWorkloadIdentityProjectNumber:{id:"workspaceSettings.ekmGcpWorkloadIdentityProjectNumber",defaultMessage:"GCP workload identity project number"},ekmGcpWorkloadIdentityPoolId:{id:"workspaceSettings.ekmGcpWorkloadIdentityPoolId",defaultMessage:"GCP workload identity pool ID"},ekmGcpWorkloadIdentityProviderId:{id:"workspaceSettings.ekmGcpWorkloadIdentityProviderId",defaultMessage:"GCP workload identity provider ID"},ekmGcpAudience:{id:"workspaceSettings.ekmGcpAudience",defaultMessage:"GCP audience"},ekmGcpKmsProjectId:{id:"workspaceSettings.ekmGcpKmsProjectId",defaultMessage:"GCP KMS project ID"},ekmGcpKmsKeyRingName:{id:"workspaceSettings.ekmGcpKmsKeyRingName",defaultMessage:"GCP KMS key ring"},ekmGcpKmsKeyName:{id:"workspaceSettings.ekmGcpKmsKeyName",defaultMessage:"GCP KMS key name"},ekmGcpKmsKeyLocation:{id:"workspaceSettings.ekmGcpKmsKeyLocation",defaultMessage:"GCP KMS key location"},ekmAzureTenantId:{id:"workspaceSettings.ekmAzureTenantId",defaultMessage:"Azure tenant ID"},ekmAzureVaultUri:{id:"workspaceSettings.ekmAzureVaultUri",defaultMessage:"Azure Key Vault URI"},ekmAzureKeyName:{id:"workspaceSettings.ekmAzureKeyName",defaultMessage:"Azure key name"},workspacePolicySection:{id:"workspaceSettings.workspacePolicySection",defaultMessage:"Workspace Policy"},workspacePolicySectionDescription:{id:"workspaceSettings.workspacePolicySectionDescription",defaultMessage:"Please include your policy or the key policy details you want users to see before they use ChatGPT. Markdown is supported for formatting, and you can include a link to your policy."},workspacePolicyToggleLabel:{id:"workspaceSettings.workspacePolicyToggleLabel",defaultMessage:"Show policy to users in this workspace"},workspacePolicyTextareaPlaceholder:{id:"workspaceSettings.workspacePolicyTextareaPlaceholder",defaultMessage:"Enter workspace policy"},workspacePolicyPreview:{id:"workspaceSettings.workspacePolicyPreview",defaultMessage:"Preview"},workspacePolicySave:{id:"workspaceSettings.workspacePolicySave",defaultMessage:"Save"},workspaceInstructionSection:{id:"workspaceSettings.workspaceInstructionSection",defaultMessage:"Workspace Instructions"},systemInstructionDescription:{id:"workspaceSettings.workspaceInstruction",defaultMessage:"Add anything you'd like ChatGPT to consider in its response. These instructions will be added to every new conversation for users in your workspace going forward"},workspaceInstructionSave:{id:"workspaceSettings.workspaceInstructionSave",defaultMessage:"Save"},retentionInfinite:{id:"workspaceSettings.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettings.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettings.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettings.retentionCustomDays",defaultMessage:"{num} days"},retentionSettingTooltip:{id:"workspaceSettings.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},workspaceMembersOnlySelect:{id:"workspaceSettings.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},noOneSelect:{id:"workspaceSettings.noOneSelect",defaultMessage:"No one"},deleteWorkspaceMemoryModalTitle:{id:"workspaceSettings.deleteWorkspaceMemoryModalTitle",defaultMessage:"Are you sure?"},deleteWorkspaceMemoryModalConfirm:{id:"workspaceSettings.deleteWorkspaceMemoryModalConfirm",defaultMessage:"Disable and delete memories"},deleteWorkspaceMemoryModalCancel:{id:"workspaceSettings.deleteWorkspaceMemoryModalCancel",defaultMessage:"Cancel"},deleteWorkspaceMemoryModalInfo:{id:"workspaceSettings.groups.deleteWorkspaceMemoryModalInfo",defaultMessage:"If you disable memory for your workspace, <b>members' existing memories will be forgotten</b>. This can't be undone."}}),Vt=({onConfirm:i,onClose:e})=>{const a=de();return s.jsx(ds,{testId:"modal-disable-workspace-memory",type:"warning",isOpen:!0,onClose:e,title:a.formatMessage(k.deleteWorkspaceMemoryModalTitle),showCloseButton:!0,primaryButton:s.jsx(je,{color:"danger",onClick:i,children:s.jsx(d,x({},k.deleteWorkspaceMemoryModalConfirm))}),secondaryButton:s.jsx(je,{onClick:e,color:"secondary",children:s.jsx(d,x({},k.deleteWorkspaceMemoryModalCancel))}),children:s.jsx("div",{className:"text-token-text-primary mb-2 text-sm",children:s.jsx(d,Le(x({},k.deleteWorkspaceMemoryModalInfo),{values:{b:t=>s.jsx("b",{children:t})}}))})})},ms=60*60*24,Bt=ms*90,Ht=ms*365,Yt=({data:i})=>{var n;const e=de(),a=(n=i.conversation_ttl)!=null?n:null;let t;return a==null?t=e.formatMessage(k.retentionInfinite):a===Bt?t=e.formatMessage(k.retentionNinetyDays):a===Ht?t=e.formatMessage(k.retentionOneYear):t=e.formatMessage(k.retentionCustomDays,{num:Math.floor(a/ms)}),s.jsx(ys,{label:e.formatMessage(k.retentionSettingTooltip),children:t})},is=({workspaceId:i})=>{const e=Qe(),a=ls(),t=de();return rs({mutationFn:({feature:n,enabled:l})=>Je.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:i}},requestBody:{feature:n,value:l}}),onSettled:()=>{a.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{e.danger(t.formatMessage(Ms.featureSettingsUpdateFailed,{toastId:"workspace_settings"}))}})},qt=({workspaceId:i})=>{const e=Qe(),a=ls(),t=de();return rs({mutationFn:({setting:n,value:l})=>Je.safePost("/accounts/{account_id}/settings/share_settings",{parameters:{path:{account_id:i}},requestBody:{setting:n,value:l}}),onSettled:()=>{a.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{e.danger(t.formatMessage(Ms.featureSettingsUpdateFailed,{toastId:"share_settings_row"}))}})},Ms=ze({featureSettingsUpdateFailed:{id:"workspaceSettings.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}}),$t=({workspaceId:i,defaultValue:e,disabled:a=!1})=>{var r;const{variables:t,mutate:n}=qt({workspaceId:i}),l=[{display:k.workspaceMembersOnlySelect,value:xs.WORKSPACE_ONLY},{display:k.noOneSelect,value:xs.NO_ONE}],m=$s.CHAT_SHARE_SETTINGS;return s.jsxs(Ue.Root,{defaultValue:(r=t==null?void 0:t.value)!=null?r:e,onValueChange:c=>{n({setting:m,value:c})},disabled:a,children:[s.jsxs(Ue.Trigger,{className:"text-md focus-visible:border-none",children:[s.jsx(Ue.Value,{}),s.jsx(Ue.Icon,{})]}),s.jsx(Ue.Portal,{children:s.jsx(Ue.Content,{children:l.map((c,o)=>s.jsx(Ue.Item,{className:"text-md",value:c.value,children:s.jsx(d,x({},c.display))},o))})})]})};function Xt(){const i=Ve();return(i==null?void 0:i.data.ekmConfig)!=null}function Qt(){const i=Ve();return(i==null?void 0:i.data.computeResidency)!==""&&(i==null?void 0:i.data.computeResidency)!=="no_constraint"}const Jt=({workspaceId:i})=>{var r,c,o,f,u,h,b,j,P,N,L,g,I,_,E,S,M,T,R,C,G;const e=de(),a=Qe(),t=Ve(),n=Xs(),l=Qt(),m=Xt();return s.jsx($e,{title:k.workspaceDetails,children:s.jsxs(ss,{children:[s.jsxs(w,{children:[s.jsx(d,{id:"SgdcRQ",defaultMessage:"Organization ID"}),s.jsx(K,{value:(r=t==null?void 0:t.data.organizationId)!=null?r:"",onCopied:()=>a.success(e.formatMessage({id:"Ctw3o0",defaultMessage:"Copied organization ID"}))})]}),s.jsxs(w,{children:[s.jsx(d,{id:"yFldxx",defaultMessage:"Workspace ID"}),s.jsx(K,{value:i,onCopied:()=>a.success(e.formatMessage({id:"CqDpiM",defaultMessage:"Copied workspace ID"}))})]}),n&&s.jsxs(w,{children:[s.jsx(d,{id:"ql2W8E",defaultMessage:"Data Residency Region"}),s.jsx(K,{value:(c=t==null?void 0:t.data.residencyRegion)!=null?c:"",onCopied:()=>a.success(e.formatMessage({id:"gL43UM",defaultMessage:"Copied data residency"}))})]}),l&&s.jsxs(w,{children:[s.jsx(d,{id:"0l7rYd",defaultMessage:"Inference Residency Region"}),s.jsx(K,{value:(o=t==null?void 0:t.data.computeResidencyDisplayName)!=null?o:"",onCopied:()=>a.success(e.formatMessage({id:"DbwXiz",defaultMessage:"Copied inference residency"})),tooltip:t==null?void 0:t.data.computeResidencyDescription})]}),m&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(d,x({},k.ekmSettingsLabel)),s.jsx("p",{className:"text-md inline-flex items-center",children:s.jsx(d,x({},k.ekmSettingsEnabled))})]}),(t==null?void 0:t.data.ekmConfig)&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(d,x({},k.ekmTypeLabel)),s.jsxs("p",{className:"text-md inline-flex items-center",children:[(t==null?void 0:t.data.ekmConfig.type)==="aws"&&s.jsx(d,x({},k.ekmTypeAws)),(t==null?void 0:t.data.ekmConfig.type)==="gcp"&&s.jsx(d,x({},k.ekmTypeGcp)),(t==null?void 0:t.data.ekmConfig.type)==="azure"&&s.jsx(d,x({},k.ekmTypeAzure)),(t==null?void 0:t.data.ekmConfig.type)==="development"&&s.jsx(d,x({},k.ekmTypeDevelopment))]})]}),(t==null?void 0:t.data.ekmConfig.type)==="aws"&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(d,x({},k.ekmNameLabel)),s.jsx(K,{value:(f=t==null?void 0:t.data.ekmConfig.name)!=null?f:"",onCopied:()=>a.success(e.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmAwsRoleArn)),s.jsx(K,{value:(u=t==null?void 0:t.data.ekmConfig.role_arn)!=null?u:"",onCopied:()=>a.success(e.formatMessage({id:"4bdi09",defaultMessage:"Copied AWS role ARN"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmAwsExternalId)),s.jsx(K,{value:(h=t==null?void 0:t.data.ekmConfig.external_id)!=null?h:"",onCopied:()=>a.success(e.formatMessage({id:"vA49q7",defaultMessage:"Copied AWS external ID"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmAwsKmsArn)),s.jsx(K,{value:(b=t==null?void 0:t.data.ekmConfig.kms_arn)!=null?b:"",onCopied:()=>a.success(e.formatMessage({id:"OrGb/E",defaultMessage:"Copied AWS KMS ARN"}))})]})]}),(t==null?void 0:t.data.ekmConfig.type)==="gcp"&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(d,x({},k.ekmNameLabel)),s.jsx(K,{value:(j=t==null?void 0:t.data.ekmConfig.name)!=null?j:"",onCopied:()=>a.success(e.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmGcpWorkloadIdentityProjectNumber)),s.jsx(K,{value:(P=t==null?void 0:t.data.ekmConfig.workload_identity_project_number)!=null?P:"",onCopied:()=>a.success(e.formatMessage({id:"YqzX4K",defaultMessage:"Copied GCP workload identity project number"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmGcpWorkloadIdentityPoolId)),s.jsx(K,{value:(N=t==null?void 0:t.data.ekmConfig.workload_identity_pool_id)!=null?N:"",onCopied:()=>a.success(e.formatMessage({id:"chEtMi",defaultMessage:"Copied GCP workload identity pool ID"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmGcpWorkloadIdentityProviderId)),s.jsx(K,{value:(L=t==null?void 0:t.data.ekmConfig.workload_identity_provider_id)!=null?L:"",onCopied:()=>a.success(e.formatMessage({id:"/T7kiu",defaultMessage:"Copied GCP workload identity provider ID"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmGcpAudience)),s.jsx(K,{value:(g=t==null?void 0:t.data.ekmConfig.audience)!=null?g:"",onCopied:()=>a.success(e.formatMessage({id:"/uFjyv",defaultMessage:"Copied GCP audience"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmGcpKmsProjectId)),s.jsx(K,{value:(I=t==null?void 0:t.data.ekmConfig.kms_project_id)!=null?I:"",onCopied:()=>a.success(e.formatMessage({id:"gjI8eK",defaultMessage:"Copied GCP KMS project ID"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmGcpKmsKeyRingName)),s.jsx(K,{value:(_=t==null?void 0:t.data.ekmConfig.kms_key_ring_name)!=null?_:"",onCopied:()=>a.success(e.formatMessage({id:"3dwsVC",defaultMessage:"Copied GCP KMS key ring"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmGcpKmsKeyName)),s.jsx(K,{value:(E=t==null?void 0:t.data.ekmConfig.kms_key_name)!=null?E:"",onCopied:()=>a.success(e.formatMessage({id:"gHjKrz",defaultMessage:"Copied GCP KMS key name"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmGcpKmsKeyLocation)),s.jsx(K,{value:(S=t==null?void 0:t.data.ekmConfig.kms_key_location)!=null?S:"",onCopied:()=>a.success(e.formatMessage({id:"0GOofF",defaultMessage:"Copied GCP KMS key location"}))})]})]}),(t==null?void 0:t.data.ekmConfig.type)==="azure"&&s.jsxs(v.Fragment,{children:[s.jsxs(w,{children:[s.jsx(d,x({},k.ekmNameLabel)),s.jsx(K,{value:(M=t==null?void 0:t.data.ekmConfig.name)!=null?M:"",onCopied:()=>a.success(e.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmAzureTenantId)),s.jsx(K,{value:(T=t==null?void 0:t.data.ekmConfig.tenant_id)!=null?T:"",onCopied:()=>a.success(e.formatMessage({id:"vH6cbU",defaultMessage:"Copied Azure tenant ID"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmAzureVaultUri)),s.jsx(K,{value:(R=t==null?void 0:t.data.ekmConfig.vault_uri)!=null?R:"",onCopied:()=>a.success(e.formatMessage({id:"riTMZV",defaultMessage:"Copied Azure Key Vault URI"}))})]}),s.jsxs(w,{children:[s.jsx(d,x({},k.ekmAzureKeyName)),s.jsx(K,{value:(C=t==null?void 0:t.data.ekmConfig.key_name)!=null?C:"",onCopied:()=>a.success(e.formatMessage({id:"+LPUTz",defaultMessage:"Copied Azure key name"}))})]})]}),(t==null?void 0:t.data.ekmConfig.type)==="development"&&s.jsxs(w,{children:[s.jsx(d,x({},k.ekmNameLabel)),s.jsx(K,{value:(G=t==null?void 0:t.data.ekmConfig.name)!=null?G:"",onCopied:()=>a.success(e.formatMessage({id:"6LvE2Y",defaultMessage:"Copied EKM name"}))})]})]})]})]})})};function Zt(i){return Ps({queryKey:["workspace-system-instruction",i],queryFn:i?()=>Je.safeGet("/accounts/{account_id}/system_instruction",{parameters:{path:{account_id:i}}}):Is})}function ea(i){const e=ls();return rs({mutationFn:a=>Je.safePost("/accounts/{account_id}/system_instruction",{parameters:{path:{account_id:i}},requestBody:{system_instruction:a}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace-system-instruction",i]})}})}const sa=({workspaceId:i,upsellEnterprise:e})=>{const a=Ve(),t=a&&a.features.includes(Ds),{data:n}=Zt(i),l=ea(i),[m,r]=v.useState("");return v.useEffect(()=>{n&&t&&r(n.system_instruction)},[n,t]),t?s.jsx($e,{title:k.workspaceInstructionSection,upsellEnterprise:e,description:k.systemInstructionDescription,children:s.jsxs(w,{className:"flex-col gap-2",children:[s.jsx(It,{className:"border-token-border-default focus-within:border-token-border-heavy focus-within:ring-token-text-secondary bg-token-bg-primary w-full resize-y rounded-md border px-3 py-2 font-mono text-xs shadow-none focus-within:ring-1",value:m,placeholder:"How should ChatGPT behave? What traits should it have? What should it know about your company?",onChange:c=>r(c.target.value),rows:5,disabled:e}),s.jsx("div",{className:"flex justify-end",children:s.jsx(je,{size:"small",onClick:()=>l.mutate(m),disabled:l.isPending||m===(n==null?void 0:n.system_instruction)||e,children:s.jsx(d,x({},k.workspaceInstructionSave))})})]})}):null},ta=({onClose:i,content:e})=>{const a=de();return s.jsx(ds,{testId:"modal-workspace-policy-preview",isOpen:!0,onClose:i,type:"success",title:a.formatMessage(aa.title),size:"xlarge",shouldIgnoreClickOutside:!0,showCloseButton:!0,className:"h-[50vh]! min-h-[500px]!",children:s.jsx("div",{className:"flex flex-col gap-6",children:s.jsx(Os,{size:"small",className:"px-4 md:px-6",children:e})})})},aa=ze({title:{id:"Jf/LUp",defaultMessage:"Workspace Policy Preview"}}),ia=({workspaceId:i,data:e,upsellEnterprise:a})=>{const t=de(),n=ts(),l=Ve(),m=l&&l.features.includes(Ws),{data:r}=Gs({workspaceId:i}),c=Fs(i),{mutate:o}=is({workspaceId:i}),[f,u]=v.useState("");return v.useEffect(()=>{r&&m&&u(r.workspace_policy)},[r,m]),m?s.jsxs($e,{title:k.workspacePolicySection,upsellEnterprise:a,description:k.workspacePolicySectionDescription,children:[s.jsxs(w,{className:"justify-start py-6",children:[s.jsx(as,{label:"",enabled:e.beta_settings.workspace_policy,onChange:h=>{o({feature:y.WORKSPACE_POLICY,enabled:h})}}),s.jsx("p",{className:"text-md inline-flex items-center",children:s.jsx(d,x({},k.workspacePolicyToggleLabel))})]}),e.beta_settings.workspace_policy&&s.jsxs(w,{className:"flex-col gap-2",children:[s.jsx(Ks,{className:"border-token-border-default focus-within:border-token-border-heavy focus-within:ring-token-text-secondary bg-token-bg-primary w-full resize-y rounded-md border px-3 py-2 font-mono text-xs shadow-none focus-within:ring-1",value:f,placeholder:t.formatMessage(k.workspacePolicyTextareaPlaceholder),onChange:h=>u(h.target.value),rows:5}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(je,{size:"small",color:"secondary",onClick:()=>Qs(n,ta,{content:f}),disabled:!f,children:s.jsx(d,x({},k.workspacePolicyPreview))}),s.jsx(je,{size:"small",onClick:()=>c.mutate(f),disabled:c.isPending||f===(r==null?void 0:r.workspace_policy),children:s.jsx(d,x({},k.workspacePolicySave))})]})]})]}):null},na=({workspaceId:i,upsellEnterprise:e,data:a})=>s.jsxs(v.Fragment,{children:[s.jsx(Jt,{workspaceId:i}),s.jsx(ia,{workspaceId:i,upsellEnterprise:e,data:a}),s.jsx(sa,{workspaceId:i,upsellEnterprise:e})]}),oa=({workspaceId:i})=>{const e=at(),{data:a,isLoading:t}=Ss({workspaceId:i,enabled:e}),[n,l]=v.useState("");v.useEffect(()=>{const u=()=>{const h=a==null?void 0:a.data.find(b=>At(b));h&&l(h.id)};a!=null&&a.data&&u()},[a]);const{data:m,refetch:r,isLoading:c}=Ct({workspaceId:i,roleId:n!=null?n:""}),{updateRole:o}=St({workspaceId:i}),f=v.useCallback(async u=>{const h=await o(u);h.id!==n&&l(h.id),r()},[n,r,o]);return{defaultRole:m,handleSaveRole:f,isLoading:t||c}};function la({workspaceId:i}){var Q,le,O,H,ae,J,W,Z,Ne;const e=de(),{data:a,isLoading:t}=Cs(i),n=Ve(),l=n==null?void 0:n.isEnterprisey(),m=!l,r=Js(),c=_t(),{defaultRole:o,handleSaveRole:f,isLoading:u}=oa({workspaceId:i}),h=ts(),[b,j]=v.useState(""),P=ks(),N=Xe(h,"2913573978"),L=Xe(h,"820985683"),g=((Q=a==null?void 0:a.beta_settings.wham_access)!=null?Q:!1)&&Xe(h,"2968710568"),I=Xe(h,"1231102790"),{filteredSections:_,totalPermissionsCount:E}=v.useMemo(()=>{var p,ie,U,q,re,$;const A=Zs(Le(x({isCanvasEnabled:(p=a==null?void 0:a.beta_settings.canvas)!=null?p:!1,isSearchEnabled:(ie=o==null?void 0:o.permissions.includes(Be.SearchAccess))!=null?ie:!1,isEnterprisey:(U=n==null?void 0:n.isEnterprisey())!=null?U:!1,isQuorum:r,legacyModelsEnabled:(q=a==null?void 0:a.beta_settings.legacy_models)!=null?q:!1},c),{includeConnectorPermissions:P,isCodexEnabledInRBACRole:(re=o==null?void 0:o.permissions.includes(Be.AllowCodexAccess))!=null?re:!1,showProjectSharing:L,isRoleSpecificPage:!1,showDeviceCodeAuthToggle:g,gpt5ThinkingEnabled:($=o==null?void 0:o.permissions.includes(Be.GPT5ThinkingAccess))!=null?$:!1,isClinicianModeRolledOut:I})),Y=A.flatMap(F=>F.entries).length,ee=A.map(F=>Le(x({},F),{entries:F.entries.filter(D=>{const ne=typeof D.title=="string"?D.title:e.formatMessage(D.title),ce=D.description?typeof D.description=="string"?D.description:e.formatMessage(D.description,D.descriptionValues):"";return[ne,ce].join(" ").toLowerCase().includes(b.toLowerCase())||D.rbac&&D.permissionName.toLowerCase().includes(b.toLowerCase())||!D.rbac&&D.settingName.toLowerCase().includes(b.toLowerCase())})})).filter(F=>F.entries.length>0);return{permissionsBySection:A,totalPermissionsCount:Y,filteredSections:ee}},[n,a==null?void 0:a.beta_settings.canvas,o==null?void 0:o.permissions,c,e,b,r,a==null?void 0:a.beta_settings.legacy_models,P,L,g,I]),{toggleAllConnectorsPermissionForRole:S,isPending:M}=kt({workspaceId:(le=n==null?void 0:n.getWorkspaceId())!=null?le:""}),{connectorsWithPermission:T,isLoading:R}=jt({accountId:(O=n==null?void 0:n.id)!=null?O:"",workspaceId:(H=n==null?void 0:n.getWorkspaceId())!=null?H:"",roleId:(ae=o==null?void 0:o.id)!=null?ae:"",enabled:P&&!!(o!=null&&o.id)}),C=Array.from((J=T.values())!=null?J:[]).filter(A=>A.connector.status!=="DISABLED_BY_ADMIN"),G=v.useMemo(()=>[y.CONTEXT_CONNECTOR_GDRIVE,y.CONTEXT_CONNECTOR_O365_PERSONAL,y.CONTEXT_CONNECTOR_O365_BUSINESS].filter(A=>!!(a!=null&&a.beta_settings[A])),[a==null?void 0:a.beta_settings]),te=yt({workspaceId:(W=n==null?void 0:n.getWorkspaceId())!=null?W:"",roleId:(Z=o==null?void 0:o.id)!=null?Z:"",connectorIds:G,enabled:P&&!!(o!=null&&o.id)}),B=v.useMemo(()=>{var p,ie;const Y=Array.from((p=C.values())!=null?p:[]).filter(U=>U.permissions.includes(Be.UseConnector)),ee=Object.entries((ie=te.results)!=null?ie:{}).filter(([U,q])=>q.includes(Be.UseConnector));return[...Y,...ee]},[C,te.results]),[ye,X]=v.useState(!1);if(t||u)return s.jsx(et,{});if(!a)return null;const oe=st(r,N&&!L);return s.jsxs(Us,{children:[o&&s.jsx("div",{className:"text-token-text-secondary text-sm",children:e.formatMessage(ns.defaultSettingDescription)}),s.jsx("div",{className:"flex flex-row items-center justify-between",children:s.jsx(js,{inputClassName:"w-[250px] rounded-full! text-sm",value:b,onChange:A=>{j(A.target.value)},placeholder:e.formatMessage({id:"hRuTvi",defaultMessage:"Search {count} permissions"},{count:E})})}),s.jsxs("div",{className:"flex flex-col gap-12",children:[l&&o&&s.jsx(wt,{preReleases:oe,workspaceId:(Ne=n==null?void 0:n.getWorkspaceId())!=null?Ne:"",data:a,handleSaveRole:f,role:o,isCustomRole:!0}),s.jsx(na,{workspaceId:i,upsellEnterprise:m,data:a}),o&&s.jsx(vt,{workspaceId:i,roleId:o.id}),_.map(A=>{const Y=m&&!A.availableForEnterprise,ee=r&&!A.availableForQuorum;return s.jsx($e,{title:A.title,description:A.description,descriptionValues:A.descriptionValues,upsellEnterprise:Y,shouldDisableForQuorum:ee,children:s.jsx(ss,{children:A.entries.map(p=>{var re,$;const ie=p.rbac?p.permissionName:p.settingName,U=typeof p.title=="string"?p.title:e.formatMessage(p.title),q=r&&p.rbac&&p.disabledForQuorum;if(p.rbac&&p.permissionName===Be.UseConnector){const F=B.length>0;return s.jsxs(s.Fragment,{children:[ye&&s.jsx(Nt,{platformConnectorsWithPermission:T,contextConnectorsWithPermission:te.results,workspaceId:(re=n==null?void 0:n.getWorkspaceId())!=null?re:"",roleId:($=o==null?void 0:o.id)!=null?$:"",onClose:()=>X(!1)}),s.jsx(w,{children:s.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-md",children:U}),p.description&&s.jsx("span",{className:"text-token-text-tertiary text-sm",children:typeof p.description=="string"?p.description:e.formatMessage(p.description,p.descriptionValues)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[(R||M)&&s.jsx(cs,{}),p.nestedKey&&(G.length>0||C.length>0)&&s.jsx("div",{className:"text-token-text-tertiary text-sm",children:s.jsx(je,{color:"primary-inverse",onClick:()=>X(!0),children:s.jsx(d,{id:"workspaceSettings.roles.selectNestedPermission",defaultMessage:"Select..."})})}),s.jsx(ys,{disabled:C.length!==0,label:e.formatMessage(ns.noConnectorsEnabled),children:s.jsx("div",{children:s.jsx(tt,{size:"normal","aria-label":U,checked:F,onCheckedChange:D=>{var ne;return S({id:(ne=o==null?void 0:o.id)!=null?ne:"",state:D})},disabled:C.length===0||M})})})]})]})},ie)]})}return s.jsx(w,{children:s.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-md flex gap-2",children:[U,q&&s.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary rounded-xl px-3 ps-3 pt-1 pb-1 text-sm font-normal",children:s.jsx(d,x({},ns.thisFeatureDisabledForOrg))})]}),p.description&&s.jsx("span",{className:"text-token-text-tertiary text-xs",children:typeof p.description=="string"?p.description:e.formatMessage(p.description,p.descriptionValues)})]}),p.rbac?o&&s.jsx(Et,{ariaLabel:U,role:o,permissionName:p.permissionName,additionalPermissionNames:p.additionalPermissionNames,handleSaveRole:f,disabled:p.disabled||Y||ee||q,disabledReason:p.disabledReason}):s.jsx(ra,{entry:p,workspaceId:i,data:a,upsellEnterprise:Y,isQuorum:r})]})},ie)})})},String(A.title.defaultMessage))})]})]})}const ra=({entry:i,workspaceId:e,data:a,upsellEnterprise:t,isQuorum:n})=>{const l=ts(),m=Xe(l,"2968710568");return v.useMemo(()=>{const c=t;switch(i.settingName){case"share_chat":return s.jsx($t,{workspaceId:e,disabled:c||n,defaultValue:a.share_settings.chat_share_setting});case"rentention_policy":return s.jsx(Yt,{data:a});case"memory_access":return s.jsx(ca,{data:a,workspaceId:e,disabled:c});case"apps_access":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.APP_PAIRING],feature:y.APP_PAIRING,disabled:c});case"apple_intelligence_access":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.CLIENT_APPLICATION_APPLE],feature:y.CLIENT_APPLICATION_APPLE,disabled:c});case"apple_intelligence_mdm_access":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.CLIENT_APPLICATION_APPLE_MDM_REQUIRED],feature:y.CLIENT_APPLICATION_APPLE_MDM_REQUIRED,disabled:c});case"canvas_code_execution":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.CANVAS_CODE_EXECUTION],feature:y.CANVAS_CODE_EXECUTION,disabled:c});case"canvas_code_network_access":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.CANVAS_CODE_NETWORK_ACCESS],feature:y.CANVAS_CODE_NETWORK_ACCESS,disabled:c});case"web_search":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.BROWSING],feature:y.BROWSING,disabled:c});case"deep_research":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.DEEP_RESEARCH],feature:y.DEEP_RESEARCH,disabled:c});case"video_screen_sharing":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.VIDEO_SCREEN_SHARING],feature:y.VIDEO_SCREEN_SHARING,disabled:c});case"codex_access":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.ALLOW_CODEX_ACCESS],feature:y.ALLOW_CODEX_ACCESS,disabled:c});case"codex_local_access":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.ALLOW_CODEX_LOCAL_ACCESS],feature:y.ALLOW_CODEX_LOCAL_ACCESS,disabled:c});case"codex_slack_posting":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.CODEX_SLACK_POSTING],feature:y.CODEX_SLACK_POSTING,disabled:c});case"codex_agent_network":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.CODEX_AGENT_NETWORK_ACCESS],feature:y.CODEX_AGENT_NETWORK_ACCESS,disabled:c});case"codex_device_code_auth":return!m||!a.beta_settings[y.ALLOW_CODEX_ACCESS]?null:s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.CODEX_DEVICE_CODE_AUTH],feature:y.CODEX_DEVICE_CODE_AUTH,disabled:c});case"record_access":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.HIVE],feature:y.HIVE,disabled:!1});case"record_reference_past_transcripts":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.HIVE_KNOWLEDGE_RETRIEVAL],feature:y.HIVE_KNOWLEDGE_RETRIEVAL,disabled:!1});case"legacy_models":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.LEGACY_MODELS],feature:y.LEGACY_MODELS,disabled:c});case"clinician_mode":return s.jsx(se,{workspaceId:e,enabled:a.beta_settings[y.CLINICIAN_MODE],feature:y.CLINICIAN_MODE,disabled:c})}},[a,i.settingName,n,t,e,m])},ca=({workspaceId:i,data:e,disabled:a})=>{var r;const{variables:t,mutate:n}=is({workspaceId:i}),[l,m]=v.useState(!1);return s.jsxs(s.Fragment,{children:[l&&s.jsx(Vt,{onConfirm:()=>{n({feature:y.MEMORY,enabled:!1}),m(!1)},onClose:()=>{m(!1)}}),s.jsx(as,{label:"",disabled:a,enabled:(r=t==null?void 0:t.enabled)!=null?r:e.beta_settings[y.MEMORY],onChange:c=>{c?n({feature:y.MEMORY,enabled:c}):m(!0)}})]})},se=({workspaceId:i,disabled:e,enabled:a,feature:t})=>{var m;const{variables:n,mutate:l}=is({workspaceId:i});return s.jsx(as,{label:"",disabled:e,enabled:(m=n==null?void 0:n.enabled)!=null?m:a,onChange:r=>{l({feature:t,enabled:r})}})},ns=ze({defaultSettingDescription:{id:"1IUdGa",defaultMessage:"This page controls the default experience for members who don't have a custom role."},thisFeatureDisabledForOrg:{id:"nAfvpE",defaultMessage:"This feature is disabled in this workspace"},noConnectorsEnabled:{id:"MfYm5J",defaultMessage:"No connectors enabled for the workspace"}}),hs=192;function Ye(i,e){"use forget";const a=We.c(5),[t,n]=v.useState(i);let l;a[0]!==e?(l=c=>{e(!0),n(c)},a[0]=e,a[1]=l):l=a[1];const m=l;let r;return a[2]!==m||a[3]!==t?(r=[t,m],a[2]=m,a[3]=t,a[4]=r):r=a[4],r}function da(i){"use forget";var Ie,Ge,Te,Fe;const e=We.c(105),{workspaceId:a,account:t,data:n}=i,l=de(),m=Qe();let r;e[0]!==a?(r={workspaceId:a},e[0]=a,e[1]=r):r=e[1];const{mutateAsync:c}=is(r),o=(Ie=t==null?void 0:t.name)!=null?Ie:"",f=(Ge=t==null?void 0:t.data.profilePictureId)!=null?Ge:null,u=(Te=t==null?void 0:t.data.profilePictureUrl)!=null?Te:null;let h;e[2]!==t?(h=t==null?void 0:t.isEnterprisey(),e[2]=t,e[3]=h):h=e[3];const b=h,j=!!((Fe=n.beta_settings)!=null&&Fe[y.SHOW_LOGO_IN_HEADER]),[P,N]=v.useState(!1),[L,g]=Ye(o,N),[I,_]=Ye(f,N),[E,S]=Ye(u,N),[M,T]=Ye(void 0,N),[R,C]=Ye(null,N),[G,te]=Ye(j,N),[B,ye]=v.useState(!1);let X,oe;e[4]!==M||e[5]!==C||e[6]!==R?(X=()=>{if(M!=="initial"&&M!==void 0&&R==null){const z=new FileReader;z.addEventListener("load",()=>{const ve=z.result;typeof ve=="string"&&C(ve)}),z.readAsDataURL(M.file)}},oe=[M,C,R],e[4]=M,e[5]=C,e[6]=R,e[7]=X,e[8]=oe):(X=e[7],oe=e[8]),v.useEffect(X,oe);let Q;e[9]!==l||e[10]!==B||e[11]!==_||e[12]!==S||e[13]!==T||e[14]!==C||e[15]!==m?(Q=async z=>{if(B)return;const ve=await nt(z,hs),Ze=ot(ve);T({tempId:Ze,file:ve,status:He.Uploading,progress:1,fileId:null,cdnUrl:null}),lt(Ze,ve,l,m,dt.ProfilePicture,{onFileCreated(Ke,Ae,be){T(V=>V!=="initial"&&(V==null?void 0:V.tempId)===Ke&&V.status===He.Uploading?Le(x({},V),{progress:10,fileId:Ae,cdnUrl:be}):V)},onFileUploadProgress(Ke,Ae){T(be=>be!=="initial"&&(be==null?void 0:be.tempId)===Ke&&be.status===He.Uploading?Le(x({},be),{progress:Ae}):be)},onFileUploaded(Ke,Ae,be){T(V=>{var us;return V!=="initial"&&V&&V.cdnUrl&&V.tempId===Ke&&V.fileId?(rt(V.fileId).then(gs=>{gs.status===ct.Success&&(_(V.fileId),S(gs.download_url))}),Le(x({},V),{status:He.Ready,progress:100,fileSpec:x({name:V.file.name,id:(us=V.fileId)!=null?us:"",size:V.file.size,mimeType:V.file.type},be!=null?be:{width:0,height:0})})):V})},onError(Ke){T(Ae=>{if(Ae!=="initial"&&(Ae==null?void 0:Ae.tempId)===Ke){_(void 0),S(void 0),C(null);return}return Ae})}})},e[9]=l,e[10]=B,e[11]=_,e[12]=S,e[13]=T,e[14]=C,e[15]=m,e[16]=Q):Q=e[16];const le=Q;let O;e[17]!==_||e[18]!==S||e[19]!==T||e[20]!==C?(O=()=>{_(null),S(null),T(void 0),C(null)},e[17]=_,e[18]=S,e[19]=T,e[20]=C,e[21]=O):O=e[21];const H=O,ae=Tt(a);let J;e[22]!==L?(J=L.trim(),e[22]=L,e[23]=J):J=e[23];const W=J,Z=M!=="initial"&&M!==void 0&&M.status!==He.Ready,Ne=M!=="initial"&&M!==void 0&&M.status===He.Ready&&!E,A=B||Z||Ne||ae.isPending||W.length===0||!P;let Y;e[24]!==f||e[25]!==u||e[26]!==o||e[27]!==j||e[28]!==A||e[29]!==l||e[30]!==b||e[31]!==c||e[32]!==W||e[33]!==G||e[34]!==I||e[35]!==E||e[36]!==ae||e[37]!==m?(Y=async()=>{if(A)return;ye(!0);const z=[];(W!==o||I!==f||E!==u)&&z.push(ae.mutateAsync({name:W,profilePictureId:I,profilePictureUrl:E})),b&&j!==G&&z.push(c({feature:y.SHOW_LOGO_IN_HEADER,enabled:G})),await Promise.all(z),m.success(l.formatMessage(es.saveSuccessToast)),ye(!1),N(!1)},e[24]=f,e[25]=u,e[26]=o,e[27]=j,e[28]=A,e[29]=l,e[30]=b,e[31]=c,e[32]=W,e[33]=G,e[34]=I,e[35]=E,e[36]=ae,e[37]=m,e[38]=Y):Y=e[38];const ee=Y,p=B;let ie;ie=p?"pointer-events-none opacity-50":void 0;const U=ie;let q;e[39]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(d,x({},Re.workspaceName))}),e[39]=q):q=e[39];let re;e[40]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsxs("div",{className:"flex flex-col gap-1",children:[q,s.jsx("p",{className:"text-token-text-secondary text-sm",children:s.jsx(d,x({},Re.workspaceNameDescription))})]}),e[40]=re):re=e[40];let $;e[41]!==g?($=z=>g(z.target.value),e[41]=g,e[42]=$):$=e[42];let F;e[43]!==p||e[44]!==L||e[45]!==$?(F=s.jsxs(w,{className:"flex-col gap-2",children:[re,s.jsx(mt,{ariaLabel:!1,type:"text",name:"workspace-name",value:L,onChange:$,maxLength:64,disabled:p})]}),e[43]=p,e[44]=L,e[45]=$,e[46]=F):F=e[46];let D;e[47]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(d,x({},Re.workspaceAvatar))}),e[47]=D):D=e[47];let ne;e[48]!==l?(ne=l.formatMessage(Re.workspaceAvatarDescription,{size:hs}),e[48]=l,e[49]=ne):ne=e[49];let ce;e[50]!==ne?(ce=s.jsxs("div",{className:"flex flex-col gap-1",children:[D,s.jsx("p",{className:"text-token-text-secondary text-sm",children:ne})]}),e[50]=ne,e[51]=ce):ce=e[51];let me;e[52]!==H||e[53]!==p||e[54]!==le||e[55]!==E||e[56]!==M||e[57]!==R||e[58]!==U?(me=E?s.jsxs("div",{className:"relative inline-flex",children:[s.jsx("img",{src:E,alt:"",referrerPolicy:"no-referrer",className:"block h-24 w-24 rounded-full object-cover object-center"}),s.jsx("div",{className:"absolute -end-1 -top-1",children:s.jsx(ma,{onClick:p?void 0:H})})]}):M!=null&&M!=="initial"&&R?s.jsx("div",{className:"flex flex-col items-center text-center",children:s.jsxs("div",{className:"relative mb-3",children:[s.jsx("img",{src:URL.createObjectURL(M.file),alt:"",referrerPolicy:"no-referrer",className:"block h-24 w-24 rounded-full object-cover object-center"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white",children:s.jsx(zs,{percentage:M.progress,className:"h-6 w-6"})})]})}):s.jsx("div",{className:U,children:s.jsx(Lt,{onFileChange:le,mimeTypes:it})}),e[52]=H,e[53]=p,e[54]=le,e[55]=E,e[56]=M,e[57]=R,e[58]=U,e[59]=me):me=e[59];let Ce;e[60]!==l?(Ce=l.formatMessage(Re.propagationWarning),e[60]=l,e[61]=Ce):Ce=e[61];let ue;e[62]!==Ce?(ue=s.jsx(Vs,{className:"mt-1",children:Ce}),e[62]=Ce,e[63]=ue):ue=e[63];let ge;e[64]!==me||e[65]!==ue?(ge=s.jsxs("div",{className:"flex flex-col items-start gap-3",children:[me,ue]}),e[64]=me,e[65]=ue,e[66]=ge):ge=e[66];let fe;e[67]!==ce||e[68]!==ge?(fe=s.jsxs(w,{className:"flex-col gap-3",children:[ce,ge]}),e[67]=ce,e[68]=ge,e[69]=fe):fe=e[69];let Se;e[70]!==p||e[71]!==l||e[72]!==b||e[73]!==G||e[74]!==te?(Se=b&&s.jsx(w,{className:"items-center",children:s.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-token-text-primary text-sm font-medium",children:s.jsx(d,x({},es.toggleLabel))}),s.jsx("p",{className:"text-token-text-secondary text-sm",children:s.jsx(d,x({},es.toggleDescription))})]}),s.jsx(as,{label:"",ariaLabel:l.formatMessage(es.toggleAriaLabel),disabled:p,enabled:G,onChange:z=>te(z)})]})}),e[70]=p,e[71]=l,e[72]=b,e[73]=G,e[74]=te,e[75]=Se):Se=e[75];let pe;e[76]!==f||e[77]!==u||e[78]!==o||e[79]!==j||e[80]!==p||e[81]!==te||e[82]!==_||e[83]!==S||e[84]!==g||e[85]!==T||e[86]!==C?(pe=()=>{p||(g(o),_(f),S(u),T(void 0),C(null),te(j),N(!1))},e[76]=f,e[77]=u,e[78]=o,e[79]=j,e[80]=p,e[81]=te,e[82]=_,e[83]=S,e[84]=g,e[85]=T,e[86]=C,e[87]=pe):pe=e[87];const Ee=p||!P;let Pe;e[88]===Symbol.for("react.memo_cache_sentinel")?(Pe=s.jsx(d,x({},Re.modalReset)),e[88]=Pe):Pe=e[88];let xe;e[89]!==pe||e[90]!==Ee?(xe=s.jsx(je,{size:"small",color:"secondary",onClick:pe,disabled:Ee,children:Pe}),e[89]=pe,e[90]=Ee,e[91]=xe):xe=e[91];let Me;e[92]===Symbol.for("react.memo_cache_sentinel")?(Me=s.jsx(d,x({},Re.modalSubmit)),e[92]=Me):Me=e[92];let he;e[93]!==A||e[94]!==ee||e[95]!==B?(he=s.jsx(je,{size:"small",color:"primary",onClick:ee,disabled:A,loading:B,children:Me}),e[93]=A,e[94]=ee,e[95]=B,e[96]=he):he=e[96];let _e;e[97]!==xe||e[98]!==he?(_e=s.jsxs(w,{className:"justify-end gap-2",children:[xe,he]}),e[97]=xe,e[98]=he,e[99]=_e):_e=e[99];let we;return e[100]!==F||e[101]!==fe||e[102]!==Se||e[103]!==_e?(we=s.jsx($e,{title:Re.modalTitle,children:s.jsxs(ss,{children:[F,fe,Se,_e]})}),e[100]=F,e[101]=fe,e[102]=Se,e[103]=_e,e[104]=we):we=e[104],we}function ma(i){"use forget";const e=We.c(3),{onClick:a}=i;let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(ut,{className:"h-3 w-3"}),e[0]=t):t=e[0];let n;return e[1]!==a?(n=s.jsx("div",{className:"flex h-6 w-6 cursor-pointer flex-row flex-wrap content-center justify-center rounded-full border-2 border-white bg-black text-white",onClick:a,children:t}),e[1]=a,e[2]=n):n=e[2],n}const es=ze({toggleLabel:{id:"tTWDeY",defaultMessage:"Show workspace logo in header"},toggleDescription:{id:"yvJ+o5",defaultMessage:"Displays your workspace logo in the center of the header"},toggleAriaLabel:{id:"DyKp7n",defaultMessage:"Toggle workspace logo in header"},saveSuccessToast:{id:"crqLbt",defaultMessage:"Workspace appearance updated"}}),_s=i=>[{key:"user-msg-bg",label:i.formatMessage({id:"wRclK+",defaultMessage:"User message background"})},{key:"user-msg-text",label:i.formatMessage({id:"qWGxg/",defaultMessage:"User message text"})},{key:"submit-btn-bg",label:i.formatMessage({id:"GG9BnR",defaultMessage:"Primary button bg"})},{key:"submit-btn-text",label:i.formatMessage({id:"lMz/19",defaultMessage:"Primary button text"})},{key:"secondary-btn-bg",label:i.formatMessage({id:"DixBn2",defaultMessage:"Secondary button bg"})},{key:"secondary-btn-text",label:i.formatMessage({id:"PuGfMy",defaultMessage:"Secondary button text"})},{key:"user-selection-bg",label:i.formatMessage({id:"DZuh1g",defaultMessage:"Selection background"})},{key:"attribution-highlight-bg",label:i.formatMessage({id:"OVs/pM",defaultMessage:"Attribution highlight background"})},{key:"entity-accent",label:i.formatMessage({id:"RPAjfh",defaultMessage:"Entity accent"})}],ua={"user-msg-bg":"#E9E9E9","user-msg-text":"#0d0d0d","submit-btn-bg":"#000000","submit-btn-text":"#ffffff","secondary-btn-bg":"#e8e8e8","secondary-btn-text":"#0d0d0d","user-selection-bg":"#339cff","attribution-highlight-bg":"#ffeeb8","entity-accent":"#0169cc"},ga={"user-msg-bg":"#323232","user-msg-text":"#ffffff","submit-btn-bg":"#ffffff","submit-btn-text":"#000000","secondary-btn-bg":"#424242","secondary-btn-text":"#ffffff","user-selection-bg":"#66b5ff","attribution-highlight-bg":"#6e5400","entity-accent":"#339cff"};function fa(i){"use forget";const e=We.c(35),{defaultValue:a,onSave:t,disabled:n}=i,l=de(),[m,r]=v.useState(!0),[c,o]=v.useState(!1),[f,u]=v.useState(!1);let h;e[0]!==(a==null?void 0:a.light)?(h=()=>x(x({},ua),a==null?void 0:a.light),e[0]=a==null?void 0:a.light,e[1]=h):h=e[1];const[b,j]=v.useState(h);let P;e[2]!==(a==null?void 0:a.dark)?(P=()=>x(x({},ga),a==null?void 0:a.dark),e[2]=a==null?void 0:a.dark,e[3]=P):P=e[3];const[N,L]=v.useState(P);let g,I,_,E;if(e[4]!==N||e[5]!==n||e[6]!==l||e[7]!==b||e[8]!==t){const te=_s(l);let B;e[13]!==N||e[14]!==b||e[15]!==t?(B=async()=>{o(!0);const O=new Set(gt),H=Object.fromEntries(Object.entries(b).filter(W=>{const[Z]=W;return O.has(Z)})),ae=Object.fromEntries(Object.entries(N).filter(W=>{const[Z]=W;return O.has(Z)}));await t({light:H,dark:ae}),r(!1),o(!1)},e[13]=N,e[14]=b,e[15]=t,e[16]=B):B=e[16],g=B;const ye=(O,H,ae)=>s.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[s.jsx("div",{className:"text-token-text-tertiary text-xs font-semibold tracking-wide uppercase",children:O}),te.map(J=>{const{key:W,label:Z}=J;return s.jsxs(w,{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx("label",{className:"text-sm font-medium",htmlFor:"".concat(O,"-").concat(W),children:Z}),s.jsx("input",{id:"".concat(O,"-").concat(W),type:"color",value:H[W],disabled:n,onChange:Ne=>{const A=Ne.target.value;ae(Y=>Le(x({},Y),{[W]:A}))},className:"bg-token-bg-primary h-8 w-12 cursor-pointer rounded border p-0"})]}),s.jsx("code",{className:"text-token-text-tertiary text-xs",children:s.jsx(d,{id:"TmCmd1",defaultMessage:"{key}-{mode}",values:{key:W,mode:O.toLowerCase()}})})]},W)})]});let X;e[17]===Symbol.for("react.memo_cache_sentinel")?(X=O=>{j(O),r(!0)},e[17]=X):X=e[17];const oe=X;let Q;e[18]===Symbol.for("react.memo_cache_sentinel")?(Q=O=>{L(O),r(!0)},e[18]=Q):Q=e[18];const le=Q;I="flex flex-col gap-4 py-2",_=ye("Light",b,oe),E=ye("Dark",N,le),e[4]=N,e[5]=n,e[6]=l,e[7]=b,e[8]=t,e[9]=g,e[10]=I,e[11]=_,e[12]=E}else g=e[9],I=e[10],_=e[11],E=e[12];let S;e[19]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(je,{color:"secondary",size:"small",onClick:()=>u(!0),children:s.jsx(d,{id:"8uzYJ3",defaultMessage:"Preview"})}),e[19]=S):S=e[19];const M=n||!m;let T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(d,{id:"vnuInT",defaultMessage:"Save"}),e[20]=T):T=e[20];let R;e[21]!==g||e[22]!==c||e[23]!==M?(R=s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[S,s.jsx(je,{disabled:M,loading:c,onClick:g,size:"small",children:T})]}),e[21]=g,e[22]=c,e[23]=M,e[24]=R):R=e[24];let C;e[25]!==N||e[26]!==b||e[27]!==f?(C=f&&s.jsx(pa,{onClose:()=>u(!1),lightValues:b,darkValues:N}),e[25]=N,e[26]=b,e[27]=f,e[28]=C):C=e[28];let G;return e[29]!==C||e[30]!==I||e[31]!==_||e[32]!==E||e[33]!==R?(G=s.jsxs("div",{className:I,children:[_,E,R,C]}),e[29]=C,e[30]=I,e[31]=_,e[32]=E,e[33]=R,e[34]=G):G=e[34],G}function pa(i){"use forget";const e=We.c(13),{onClose:a,lightValues:t,darkValues:n}=i;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(d,{id:"hoMwv8",defaultMessage:"Theme Preview"}),e[0]=l):l=e[0];let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("h3",{className:"text-token-text-tertiary mb-2 text-sm font-semibold tracking-wide uppercase",children:s.jsx(d,{id:"0aW8Bm",defaultMessage:"Light"})}),e[1]=m):m=e[1];let r;e[2]!==t?(r=s.jsxs("div",{className:"min-w-0 flex-1",children:[m,s.jsx(bs,{mode:"light",values:t})]}),e[2]=t,e[3]=r):r=e[3];let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx("h3",{className:"text-token-text-tertiary mb-2 text-sm font-semibold tracking-wide uppercase",children:s.jsx(d,{id:"n+40kO",defaultMessage:"Dark"})}),e[4]=c):c=e[4];let o;e[5]!==n?(o=s.jsxs("div",{className:"min-w-0 flex-1",children:[c,s.jsx(bs,{mode:"dark",values:n})]}),e[5]=n,e[6]=o):o=e[6];let f;e[7]!==r||e[8]!==o?(f=s.jsxs("div",{className:"flex flex-col gap-6 sm:flex-row sm:items-start",children:[r,o]}),e[7]=r,e[8]=o,e[9]=f):f=e[9];let u;return e[10]!==a||e[11]!==f?(u=s.jsx(ds,{isOpen:!0,onClose:a,size:"custom",className:"max-w-[900px]",testId:"modal-theme-preview",title:l,children:f}),e[10]=a,e[11]=f,e[12]=u):u=e[12],u}function bs(i){"use forget";const e=We.c(125),{mode:a,values:t}=i,n=de();let l,m,r,c,o,f,u,h,b;if(e[0]!==n||e[1]!==a||e[2]!==t){const N=_s(n);let L;e[12]!==t?(L=z=>t[z],e[12]=t,e[13]=L):L=e[13];const g=L;let I;e[14]!==g?(I=g("user-msg-bg"),e[14]=g,e[15]=I):I=e[15];const _=I;let E;e[16]!==g?(E=g("user-msg-text"),e[16]=g,e[17]=E):E=e[17];const S=E;let M;e[18]!==g?(M=g("submit-btn-bg"),e[18]=g,e[19]=M):M=e[19];const T=M;let R;e[20]!==g?(R=g("submit-btn-text"),e[20]=g,e[21]=R):R=e[21];const C=R;let G;e[22]!==g?(G=g("secondary-btn-bg"),e[22]=g,e[23]=G):G=e[23];const te=G;let B;e[24]!==g?(B=g("secondary-btn-text"),e[24]=g,e[25]=B):B=e[25];const ye=B;let X;e[26]!==g?(X=g("user-selection-bg"),e[26]=g,e[27]=X):X=e[27];const oe=X;let Q;e[28]!==g?(Q=g("attribution-highlight-bg"),e[28]=g,e[29]=Q):Q=e[29];const le=Q;let O;e[30]!==g?(O=g("entity-accent"),e[30]=g,e[31]=O):O=e[31];const H=O;let ae;e[32]!==_||e[33]!==S?(ae=z=>s.jsxs("div",{className:"ms-auto mb-4 w-[70%] rounded-[18px] px-4 py-3 text-sm",style:{background:_,color:S},children:[s.jsx("strong",{children:s.jsx(d,{id:"9hKPVK",defaultMessage:"User:"})}),s.jsx("span",{className:"ms-1"}),z]}),e[32]=_,e[33]=S,e[34]=ae):ae=e[34];const J=ae;let W;e[35]!==S?(W=z=>s.jsxs("div",{className:"mb-4 w-[70%] p-3 text-sm",style:{color:S},children:[s.jsx("strong",{children:s.jsx(d,{id:"W7weVs",defaultMessage:"Assistant:"})}),s.jsx("span",{className:"ms-1"}),z]}),e[35]=S,e[36]=W):W=e[36];const Z=W;r="rounded-md border p-4 text-xs";const Ne=a==="dark"?"#212121":"#ffffff";e[37]!==Ne||e[38]!==S?(c={background:Ne,color:S},e[37]=Ne,e[38]=S,e[39]=c):c=e[39];let A;e[40]!==oe?(A={background:oe},e[40]=oe,e[41]=A):A=e[41];let Y;e[42]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(d,{id:"A4km8m",defaultMessage:"selection"}),e[42]=Y):Y=e[42];let ee;e[43]!==A?(ee=s.jsx(d,{id:"1taoOc",defaultMessage:"This is a user message with a {selection}.",values:{selection:s.jsx("span",{style:A,className:"py-1",children:Y})}}),e[43]=A,e[44]=ee):ee=e[44],e[45]!==J||e[46]!==ee?(o=J(ee),e[45]=J,e[46]=ee,e[47]=o):o=e[47];let p;e[48]!==le?(p={background:le},e[48]=le,e[49]=p):p=e[49];let ie;e[50]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(d,{id:"LRImHW",defaultMessage:"Cited text"}),e[50]=ie):ie=e[50];let U;e[51]!==p?(U=s.jsx("span",{style:p,className:"rounded px-1",children:ie}),e[51]=p,e[52]=U):U=e[52];let q;e[53]!==H?(q={color:H,fontWeight:600},e[53]=H,e[54]=q):q=e[54];let re;e[55]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(d,{id:"uLMv/c",defaultMessage:"@Entity"}),e[55]=re):re=e[55];let $;e[56]!==q?($=s.jsx("span",{style:q,children:re}),e[56]=q,e[57]=$):$=e[57];let F;e[58]!==U||e[59]!==$?(F=s.jsx(d,{id:"wipLUT",defaultMessage:"This is an assistant reply. {cited} and an {entity} accent.",values:{cited:U,entity:$}}),e[58]=U,e[59]=$,e[60]=F):F=e[60],e[61]!==Z||e[62]!==F?(f=Z(F),e[61]=Z,e[62]=F,e[63]=f):f=e[63];let D;e[64]!==H?(D={color:H,fontWeight:600},e[64]=H,e[65]=D):D=e[65];let ne;e[66]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(d,{id:"zIYEIm",defaultMessage:"@Entity"}),e[66]=ne):ne=e[66];let ce;e[67]!==D?(ce=s.jsx("span",{style:D,children:ne}),e[67]=D,e[68]=ce):ce=e[68];let me;e[69]!==oe?(me={background:oe},e[69]=oe,e[70]=me):me=e[70];let Ce;e[71]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsx(d,{id:"DAKnsA",defaultMessage:"highlight"}),e[71]=Ce):Ce=e[71];let ue;e[72]!==me?(ue=s.jsx("span",{style:me,className:"px-1 py-0.5",children:Ce}),e[72]=me,e[73]=ue):ue=e[73];let ge;e[74]!==ce||e[75]!==ue?(ge=s.jsx(d,{id:"eoyctD",defaultMessage:"Can you give another example using an {entityMention} and a different {highlighted}?",values:{entityMention:ce,highlighted:ue}}),e[74]=ce,e[75]=ue,e[76]=ge):ge=e[76],e[77]!==J||e[78]!==ge?(u=J(ge),e[77]=J,e[78]=ge,e[79]=u):u=e[79];let fe;e[80]!==le?(fe={background:le},e[80]=le,e[81]=fe):fe=e[81];let Se;e[82]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(d,{id:"G4/DSz",defaultMessage:"cited snippet"}),e[82]=Se):Se=e[82];let pe;e[83]!==fe?(pe=s.jsx("span",{style:fe,className:"rounded px-1",children:Se}),e[83]=fe,e[84]=pe):pe=e[84];let Ee;e[85]!==H?(Ee={color:H,fontWeight:600},e[85]=H,e[86]=Ee):Ee=e[86];let Pe;e[87]===Symbol.for("react.memo_cache_sentinel")?(Pe=s.jsx(d,{id:"gMeCbk",defaultMessage:"@Entity"}),e[87]=Pe):Pe=e[87];let xe;e[88]!==Ee?(xe=s.jsx("span",{style:Ee,children:Pe}),e[88]=Ee,e[89]=xe):xe=e[89];let Me;e[90]!==pe||e[91]!==xe?(Me=s.jsx(d,{id:"GmJEi2",defaultMessage:"Here is another reply with a {citedSnippet} and an emphasized {entity} reference.",values:{citedSnippet:pe,entity:xe}}),e[90]=pe,e[91]=xe,e[92]=Me):Me=e[92],e[93]!==Z||e[94]!==Me?(h=Z(Me),e[93]=Z,e[94]=Me,e[95]=h):h=e[95];let he;e[96]!==T||e[97]!==C?(he={background:T,color:C},e[96]=T,e[97]=C,e[98]=he):he=e[98];let _e;e[99]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(d,{id:"70xPCF",defaultMessage:"Primary"}),e[99]=_e):_e=e[99];let we;e[100]!==he?(we=s.jsx(je,{color:"primary",size:"small",style:he,children:_e}),e[100]=he,e[101]=we):we=e[101];let Ie;e[102]!==te||e[103]!==ye?(Ie={background:te,color:ye},e[102]=te,e[103]=ye,e[104]=Ie):Ie=e[104];let Ge;e[105]===Symbol.for("react.memo_cache_sentinel")?(Ge=s.jsx(d,{id:"AXA8xG",defaultMessage:"Secondary"}),e[105]=Ge):Ge=e[105];let Te;e[106]!==Ie?(Te=s.jsx(je,{color:"secondary",size:"small",style:Ie,children:Ge}),e[106]=Ie,e[107]=Te):Te=e[107],e[108]!==we||e[109]!==Te?(b=s.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-end gap-2 pe-1",children:[we,Te]}),e[108]=we,e[109]=Te,e[110]=b):b=e[110],l="grid grid-cols-2 gap-3 pt-1";let Fe;e[111]!==g?(Fe=z=>{const{key:ve,label:Ze}=z;return s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"truncate",title:Ze,children:ve}),s.jsx("span",{className:"h-5 w-5 shrink-0 rounded border",style:{background:g(ve)},title:ve})]},ve)},e[111]=g,e[112]=Fe):Fe=e[112],m=N.map(Fe),e[0]=n,e[1]=a,e[2]=t,e[3]=l,e[4]=m,e[5]=r,e[6]=c,e[7]=o,e[8]=f,e[9]=u,e[10]=h,e[11]=b}else l=e[3],m=e[4],r=e[5],c=e[6],o=e[7],f=e[8],u=e[9],h=e[10],b=e[11];let j;e[113]!==l||e[114]!==m?(j=s.jsx("div",{className:l,children:m}),e[113]=l,e[114]=m,e[115]=j):j=e[115];let P;return e[116]!==j||e[117]!==r||e[118]!==c||e[119]!==o||e[120]!==f||e[121]!==u||e[122]!==h||e[123]!==b?(P=s.jsxs("div",{className:r,style:c,children:[o,f,u,h,b,j]}),e[116]=j,e[117]=r,e[118]=c,e[119]=o,e[120]=f,e[121]=u,e[122]=h,e[123]=b,e[124]=P):P=e[124],P}const xa=i=>{"use forget";var I,_,E,S,M,T;const e=We.c(20),{workspaceId:a,data:t,isLoading:n,refetch:l,upsellEnterprise:m}=i,r=Qe(),c=de();let o;e[0]!==c||e[1]!==l||e[2]!==r||e[3]!==a?(o=async(R,C)=>{await Je.safePost("/accounts/{account_id}/workspace_chat_theme",{parameters:{path:{account_id:a}},requestBody:{value:R,light:C==null?void 0:C.light,dark:C==null?void 0:C.dark}}),r.success(c.formatMessage({id:"4e+dwR",defaultMessage:"Workspace chat theme updated"})),l()},e[0]=c,e[1]=l,e[2]=r,e[3]=a,e[4]=o):o=e[4];const f=o;let u;e[5]!==((I=t.beta_settings_dict)==null?void 0:I.workspace_chat_theme_light)?(u=((_=t.beta_settings_dict)==null?void 0:_.workspace_chat_theme_light)||{},e[5]=(E=t.beta_settings_dict)==null?void 0:E.workspace_chat_theme_light,e[6]=u):u=e[6];let h;e[7]!==((S=t.beta_settings_dict)==null?void 0:S.workspace_chat_theme_dark)?(h=((M=t.beta_settings_dict)==null?void 0:M.workspace_chat_theme_dark)||{},e[7]=(T=t.beta_settings_dict)==null?void 0:T.workspace_chat_theme_dark,e[8]=h):h=e[8];let b;e[9]!==u||e[10]!==h?(b={light:u,dark:h},e[9]=u,e[10]=h,e[11]=b):b=e[11];const j=b,P=t.beta_settings_str.workspace_chat_theme||"default",N=m||n;let L;e[12]!==j||e[13]!==f||e[14]!==P||e[15]!==N?(L=s.jsx(ss,{children:s.jsx(ba,{defaultThemeValue:P,defaultCustomTheme:j,onSave:f,disabled:N})}),e[12]=j,e[13]=f,e[14]=P,e[15]=N,e[16]=L):L=e[16];let g;return e[17]!==L||e[18]!==m?(g=s.jsx($e,{title:ja.workspaceThemeSection,upsellEnterprise:m,children:L}),e[17]=L,e[18]=m,e[19]=g):g=e[19],g};function De(i,e){return s.jsx(Rt,{theme:i,name:e})}const ha=i=>[{label:De("default",i.formatMessage(Oe.default)),value:"default"},{label:De("blue",i.formatMessage(Oe.blue)),value:"blue"},{label:De("green",i.formatMessage(Oe.green)),value:"green"},{label:De("yellow",i.formatMessage(Oe.yellow)),value:"yellow"},{label:De("pink",i.formatMessage(Oe.pink)),value:"pink"},{label:De("orange",i.formatMessage(Oe.orange)),value:"orange"},{label:De("purple",i.formatMessage(Oe.purple)),value:"purple"},{label:De("custom",i.formatMessage({id:"settingsModal.chatTheme.custom",defaultMessage:"Custom"})),value:"custom"}];function ba(i){"use forget";const e=We.c(24),{defaultThemeValue:a,defaultCustomTheme:t,onSave:n,disabled:l}=i,m=de(),[r,c]=v.useState(a),o=ts();let f;if(e[0]!==o||e[1]!==r){const S=ft(o);f=r&&pt(S,r)?r:"default",e[0]=o,e[1]=r,e[2]=f}else f=e[2];const u=f;let h;e[3]!==m?(h=ha(m),e[3]=m,e[4]=h):h=e[4];const b=h;let j;e[5]!==n||e[6]!==b?(j=S=>{const M=b.map(ka),R=(C=>M.includes(C))(S)?S:"default";c(R),R!=="custom"&&n(R)},e[5]=n,e[6]=b,e[7]=j):j=e[7];const P=j;let N;e[8]!==n?(N=async S=>{await n("custom",S)},e[8]=n,e[9]=N):N=e[9];const L=N;let g;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx("div",{children:s.jsx(d,x({},Oe.chatTheme))}),e[10]=g):g=e[10];let I;e[11]!==l||e[12]!==u||e[13]!==P||e[14]!==b?(I=s.jsx(w,{className:"items-center",children:s.jsxs("div",{className:"flex w-full items-center justify-between",children:[g,s.jsx(Bs,{value:u,onValueChange:P,disabled:l,options:b})]})}),e[11]=l,e[12]=u,e[13]=P,e[14]=b,e[15]=I):I=e[15];let _;e[16]!==t||e[17]!==l||e[18]!==u||e[19]!==L?(_=u==="custom"&&s.jsx(fa,{defaultValue:t,onSave:L,disabled:l}),e[16]=t,e[17]=l,e[18]=u,e[19]=L,e[20]=_):_=e[20];let E;return e[21]!==I||e[22]!==_?(E=s.jsxs(s.Fragment,{children:[I,_]}),e[21]=I,e[22]=_,e[23]=E):E=e[23],E}function ka(i){return i.value}const ja=ze({workspaceThemeSection:{id:"workspaceSettings.workspaceThemeSection",defaultMessage:"Workspace theme"},workspaceAccentColorLabel:{id:"workspaceSettings.workspaceAccentColorLabel",defaultMessage:"Accent color"}});function ya({workspaceId:i}){const{data:e,isLoading:a,refetch:t}=Cs(i),n=Ve(),m=!(n==null?void 0:n.isEnterprisey());return e===void 0?null:a?s.jsx(cs,{}):s.jsxs("div",{className:"mt-6 mb-3 flex flex-col gap-4",children:[s.jsx(da,{workspaceId:i,account:n,data:e}),s.jsx(xa,{workspaceId:i,data:e,isLoading:a,refetch:t,upsellEnterprise:m})]})}const Ca=i=>i==="general"||i==="customization"||i==="roles";function Sa({currentWorkspaceId:i}){const e=de(),a=xt(),t=ht(),n=v.useMemo(()=>{const u=[{key:"general",label:e.formatMessage(qe.generalTab),children:s.jsx(la,{workspaceId:i})}];return t&&u.push({key:"customization",label:e.formatMessage(qe.workspaceCustomizationTab),children:s.jsx(ya,{workspaceId:i})}),a&&u.push({key:"roles",label:e.formatMessage(qe.customRolesTab),children:s.jsx(Ut,{workspaceId:i})}),u},[i,t,e,a]),l=os(),[m]=Ts(),r=m.get("tab"),[c,o]=v.useState(r&&Ca(r)?r:n[0].key),f=u=>{o(u),l({pathname:window.location.pathname,search:new URLSearchParams({tab:u}).toString()})};return s.jsxs(s.Fragment,{children:[s.jsx(Hs,{children:s.jsx("title",{children:e.formatMessage(qe.title)})}),s.jsx(Wt,{title:e.formatMessage(qe.title),subtitle:e.formatMessage(qe.subtitle),tabsHeader:s.jsx(Dt,{items:n,activeTab:c,onTabChange:f})}),s.jsx(Gt,{children:s.jsx(Ot,{items:n,activeTab:c})})]})}const qe=ze({title:{id:"842i2c",defaultMessage:"Settings & permissions"},subtitle:{id:"s0ozLO",defaultMessage:"Configure baseline permissions for your workspace and tailor access with custom roles."},generalTab:{id:"bNJn8S",defaultMessage:"Workspace"},workspaceCustomizationTab:{id:"8w0qc+",defaultMessage:"Customization"},customRolesTab:{id:"0SIrmV",defaultMessage:"Custom roles"}}),ai=Ls(function(){const e=Ft();return Kt(),s.jsx(Sa,x({},e))});export{ai as default};
//# sourceMappingURL=dcwso6bd58c8pzfk.js.map
