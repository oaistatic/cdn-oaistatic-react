import{D as P,i as _,a7 as h,j as S,b as M,g as E,u as L,r as b,d as w}from"./n75kuy1cx6f5mogg.js";import{L as d,p,dv as F,v as g,o1 as T,i as v,f as R,z as A,a9 as l,P as x,an as O,gY as I}from"./ewse8exzafeu10ji.js";import{i as k,C as D}from"./fftookz3hme34txu.js";import{bR as N}from"./ny10lj7zpuz89fvf.js";function m({intl:n,message:e,navigate:s,toaster:a}){a.warning(n.formatMessage(e),{duration:5}),s("/#pricing")}function j({checkoutFrom:n,checkoutPlanType:e,ctx:s,currentAccount:a,intl:i,navigate:c,queryClient:o,isEligibleForProOnboarding:r,toaster:u}){const t=l(s,"2494348560"),y=l(s,"2239990662");if(x.logPaymentSuccess({plan_type:e}),e===g.PLUS&&O.logEvent("chatgpt_plus_payment_success_page"),a.isFree())o.invalidateQueries(I());else if(n)d.removeItem(p.CheckoutFrom),window.location.href=D[n];else if(r&&t.get("enable_ca_pro_onboarding_flow",!1))window.location.href="/payments/success-ind";else{const C=y.get("redirect_to_home",!1);c(C?"/":"/#pricing"),u.success(i.formatMessage(f.paymentConfirmationToastMessage,{planName:N(e)}),{duration:5})}}function K({checkoutFrom:n,checkoutPlanType:e,currentAccount:s,postCheckoutResult:a,isEligibleForProOnboarding:i}){const c=v(),o=M(),r=E(),u=L(),t=R();return b.useEffect(()=>{switch(a){case"success":return j({checkoutFrom:n,checkoutPlanType:e,ctx:c,currentAccount:s,intl:o,isEligibleForProOnboarding:i,navigate:r,queryClient:u,toaster:t});case"payment_failed":return m({intl:o,toaster:t,navigate:r,message:f.paymentFailedToastMessage});case"other_error":return m({intl:o,toaster:t,navigate:r,message:A.somethingWentWrong})}},[n,e,c,s,o,i,r,a,u,t]),null}const H=P(function(){var t;const[e]=_(),s=d.getItem(p.CheckoutFrom),a=F(),i=h(),c=(t=e.get("plan_type"))!=null?t:g.PLUS,{anyConnectorEnabled:o,isLoading:r}=T();if(!a||r)return null;const u=!o&&c===g.PRO;return S.jsx(K,{checkoutFrom:k(s)?s:null,checkoutPlanType:c,currentAccount:a,isEligibleForProOnboarding:u,postCheckoutResult:i.postCheckoutResult})}),f=w({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{H as default};
//# sourceMappingURL=hiv97f6makgbohp7.js.map
