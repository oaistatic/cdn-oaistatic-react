var h=(o,e)=>(e=Symbol[o])?e:Symbol.for("Symbol."+o);var g=(o,e,r)=>(e=o[h("asyncIterator")])?e.call(o):(o=o[h("iterator")](),e={},r=(n,i)=>(i=o[n])&&(e[n]=c=>new Promise((a,u,d)=>(c=i.call(o,c),d=c.done,Promise.resolve(c.value).then(p=>a({value:p,done:d}),u)))),r("next"),r("return"),e);import{D as R,ae as E,i as F,g as B,r as l,u as D,j as t}from"./n75kuy1cx6f5mogg.js";import{i as N,eC as T,hM as v,fw as A,jU as H,bK as Q,bN as y,og as _,aP as k,nb as L,f7 as O,fq as $,bG as q,bU as G}from"./ewse8exzafeu10ji.js";import{C as K}from"./o423tfdeb6azgv8l.js";import{r as U,u as V,s as W,C as b,a as z,g as J,b as j,T as X,c as Y}from"./ny10lj7zpuz89fvf.js";import{T as Z,C as ee}from"./i8z30y8uhn6o6j41.js";import{g as te}from"./cg9mamkqgsk8mjh0.js";import{C as P,T as oe}from"./gvh5p107yczbfviz.js";import"./j2tluvxda4ll72qx.js";import"./ibchrxf1juu2j0jw.js";import"./ns51nblw8ziscsgd.js";import"./ce3hgmw4iyyhicud.js";import"./iqk1tse6yz14y9t9.js";import"./ly9hghfho7bi4z70.js";import"./hrsgt0zeavq3ouip.js";import"./ctddpbsbr3gj60l1.js";import"./gvudnmdzjyrmv9hw.js";import"./e52t6kvr8rhywzf0.js";import"./fdv2df7jppwbz4po.js";import"./d5vv6ct7n3prp63a.js";import"./npn63o3tt9liv4y2.js";import"./kl7c6054usfnqmd4.js";import"./k97n0y6ba9c9h39c.js";import"./je40yyidw4ukzc9u.js";import"./peahhkmucc5rd7ov.js";import"./jiz6zc3ys9fjr045.js";import"./cl7dmrzdmwy44poc.js";import"./d0p97pwfptqt3nvy.js";import"./hkwix64yhkotslv1.js";import"./5hoqitp3r2hkdtny.js";import"./czwq62q5rbh9b1yi.js";import"./gowyl4x2bs7hfi4a.js";import"./em5q5yhbyv41ft0j.js";import"./irqko7c1s7qpl41n.js";import"./i3bw46mavo9n01l8.js";import"./ga8p3rr9o0mc72h0.js";import"./gbvlxp0nrrwdd6eq.js";import"./kj8rd4pu8k32z2dy.js";import"./d65yyyom1modmtdi.js";import"./fh2tsu8ocsi22jc3.js";import"./ou1s0kowmldvhx32.js";import"./co6h42pxywtlg2op.js";const Ve=()=>(U(),null),We=R(function(){const e=N(),r=E(),[n]=F(),i=B(),c=T(r.conversationId),a=v(n.get("readonly"),!1),u=v(n.get("isFullScreen"),!1),d=v(n.get("header"),!0),p=v(n.get("appPreview"),!1),C=A(),w=H(),S=v(n.get("hideBottomComposer"),!!a),f=T(r.canmoreId),s=c,m=V();l.useEffect(()=>{W({type:b.Textdoc,textdocId:f})},[f]),z(s,{kind:Q.PrimaryAssistant});const x=D();if(l.useEffect(()=>(y.retainThread(s),()=>{setTimeout(()=>{x.invalidateQueries(J({clientThreadId:s}))},0),y.releaseThread(s)}),[s,x]),l.useEffect(()=>{f||i("/")},[f,i]),l.useEffect(()=>{j().sendMessage({type:P.Loaded})},[f]),!f||(m==null?void 0:m.type)!==b.Textdoc)return null;const I=()=>{j().sendMessage({type:P.Close})},M=a&&!d;return t.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[t.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),t.jsx(_.Provider,{value:k(e,s),children:t.jsx(L,{clientThreadId:s,children:t.jsx(O,{clientThreadId:s,children:t.jsx(X,{clientThreadId:s,children:p?t.jsx($,{children:t.jsx(se,{textdocId:m.textdocId})}):M?t.jsxs(t.Fragment,{children:[t.jsx(Z,{clientThreadId:s,disableScroll:!C,textdocId:m.textdocId}),t.jsx(ee,{})]}):t.jsx(oe,{isEmbedded:!0,hideRunCode:!C,isFullScreen:u,hideHeader:!d,hideBottomComposer:S,isReadonlyFromQueryParam:a,hideRenameButton:w,clientThreadId:s,focusedTextdoc:m,onClose:I},"textdocContent")})})})})]})}),se=({textdocId:o})=>{var d;const e=l.useRef(null),r=Y(o),[n,i]=l.useState(!1),c=(d=r==null?void 0:r.versions)!=null?d:[],a=q(c),u=l.useCallback(G(async p=>{const C=te(p.type,p.content);if(e.current&&(C==="react"||C==="html")){i(!0);const s=e.current.evalAsync({language:C,code:p.content});try{for(var re=g(s),w,S,f;w=!(S=await re.next()).done;w=!1){const m=S.value;console.debug(m)}}catch(S){f=[S]}finally{try{w&&(S=re.return)&&await S.call(re)}finally{if(f)throw f[0]}}}i(!1)},100),[]);return l.useEffect(()=>{a&&u(a)},[a,u]),t.jsx(K,{id:o,visuallyHidden:!n,ref:e,enableTransition:!0,title:""})};export{Ve as clientLoader,We as default};
//# sourceMappingURL=efvv3pj4nq55nol2.js.map
