var ee=Object.defineProperty;var $=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var J=(e,t,o)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,r=(e,t)=>{for(var o in t||(t={}))ae.call(t,o)&&J(e,o,t[o]);if($)for(var o of $(t))se.call(t,o)&&J(e,o,t[o]);return e};import{c as te,r as K,b as oe,j as a,M as d,d as ce,D as ie,g as re}from"./n75kuy1cx6f5mogg.js";import{fD as ne,cj as le,fE as de,bg as ue}from"./ny10lj7zpuz89fvf.js";import{b as pe,a as fe,i as me,c as he,f as ve,k_ as ge,el as G,R as V,pK as xe,pL as ke,dA as be,at as je,an as we,d9 as We,C as Me,ai as Se,d as X,h as Z,dv as Ne}from"./ewse8exzafeu10ji.js";import{H as ye}from"./hmtoutvt6n5trpwm.js";function Ce(){"use forget";var q,Q;const e=te.c(51),t=pe(),{data:o}=fe(),w=me(),s=he(o),p=s!=null||o!=null,[i,u]=K.useState(!1),n=o==null?void 0:o.accountItems,B=ne((q=s==null?void 0:s.id)!=null?q:"");let W;e[0]!==w?(W=ue(),e[0]=w,e[1]=W):W=e[1];const I=W,T=s==null?void 0:s.id;let M;e[2]!==T||e[3]!==n?(M=n==null?void 0:n.find(R=>R.id===T),e[2]=T,e[3]=n,e[4]=M):M=e[4];const l=M,z=!((Q=s==null?void 0:s.eligibleForReactivation)!=null?Q:!1),U=(s==null?void 0:s.isOwnerOfAccount())&&s.isTeam()&&!s.hasPaidSubscription()&&!z,L=(s==null?void 0:s.isOwnerOfAccount())&&s.isTeam()&&s.hasPaidSubscription()&&!z;let S;e[5]!==n?(S=n==null?void 0:n.filter(Pe),e[5]=n,e[6]=S):S=e[6];const j=S,f=oe(),F=ve();let N=ge;s&&(N=s.mustGetSubscriptionBillingCurrency("DeactivatedWorkspaceModal"));let y,C;e[7]!==s?(y=()=>{s||(je.addError(new Error("Current account is undefined in DeactivatedWorkspaceModal")),we.logEvent("chatgpt_undefined_current_account"))},C=[s],e[7]=s,e[8]=y,e[9]=C):(y=e[8],C=e[9]),K.useEffect(y,C);let P;e[10]!==l||e[11]!==I||e[12]!==N||e[13]!==B?(P=()=>{We.setPurchaseWorkspaceData({minimumSeats:Math.max(B,I),billingDetails:{currency:N},existingAccount:l})},e[10]=l,e[11]=I,e[12]=N,e[13]=B,e[14]=P):P=e[14];const Y=P;let _;e[15]!==f||e[16]!==u||e[17]!==F?(_=async()=>{u(!0);try{const R=await V.safeGet("/payments/customer_portal",{intercomEventOnError:"fetch-error:customer_portal:get"});location.href=R.url,u(!1)}catch(R){u(!1),F.warning(f.formatMessage(c.unableToOpenStripeDashboard),{hasCloseButton:!0})}},e[15]=f,e[16]=u,e[17]=F,e[18]=_):_=e[18];const H=_;if(s==null||!l||!j)return null;let A;e[19]===Symbol.for("react.memo_cache_sentinel")?(A=a.jsx("span",{className:"text-lg",children:a.jsx(d,r({},c.workspaceDeactivated))}),e[19]=A):A=e[19];let m;e[20]!==l.data.profilePictureUrl?(m=a.jsx(le,{src:l.data.profilePictureUrl}),e[20]=l.data.profilePictureUrl,e[21]=m):m=e[21];let h;e[22]!==l.data.name?(h=a.jsx("div",{children:l.data.name}),e[22]=l.data.name,e[23]=h):h=e[23];let v;e[24]!==m||e[25]!==h?(v=a.jsxs("div",{className:"flex w-full items-center gap-2",children:[m,h]}),e[24]=m,e[25]=h,e[26]=v):v=e[26];let D;e[27]===Symbol.for("react.memo_cache_sentinel")?(D=a.jsx("div",{children:a.jsxs("ul",{className:"list-disc ps-5 text-sm",children:[a.jsx("li",{className:"mb-1",children:a.jsx(d,r({},c.chatHistoryUnavailable))}),a.jsx("li",{children:a.jsx(d,r({},c.otherWorkspacesAvailable))})]})}),e[27]=D):D=e[27];let g;e[28]!==U||e[29]!==i||e[30]!==Y?(g=U&&a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsx("p",{children:a.jsx(d,r({},c.purchaseNewSubscription))}),a.jsx(G,{className:"m-auto mt-2 w-full",loading:i,onClick:Y,children:a.jsx(d,r({},c.purchaseNewSubscriptionButton))})]}),e[28]=U,e[29]=i,e[30]=Y,e[31]=g):g=e[31];let x;e[32]!==L||e[33]!==i||e[34]!==H?(x=L&&a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsx("p",{children:a.jsx(d,r({},c.resolveOutstandingInvoice))}),a.jsx(G,{className:"m-auto mt-2 w-full",loading:i,onClick:H,children:a.jsx(d,r({},c.manageSubscriptionButton))})]}),e[32]=L,e[33]=i,e[34]=H,e[35]=x):x=e[35];let E;e[36]===Symbol.for("react.memo_cache_sentinel")?(E=a.jsx(ye,{}),e[36]=E):E=e[36];let k;e[37]!==j||e[38]!==f||e[39]!==i||e[40]!==u||e[41]!==t?(k=a.jsx("div",{className:"w-full justify-center",children:j.length>0?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"mb-2 text-base font-normal",children:a.jsx(d,r({},c.selectWorkspace))}),a.jsx(de,{data:j})]}):a.jsxs("div",{className:"flex flex-col gap-6 text-sm",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h3",{className:"text-base font-normal",children:a.jsx(d,r({},c.createPersonalWorkspace))}),a.jsx(d,r({},c.deactivatedWorkspaceReason))]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex w-full items-center gap-2",children:[t&&t.picture&&a.jsx("img",{alt:"Profile",src:t.picture,className:"flex h-6 w-6 items-center justify-center rounded-full"}),t&&a.jsx("span",{className:"truncate",children:t.name})]}),a.jsx(G,{title:f.formatMessage(c.createPersonalWorkspaceButton),loading:i,onClick:async()=>{u(!0),await V.safePost("/accounts/personal"),xe(ke),be()},color:"primary",className:"ms-4"})]})]})}),e[37]=j,e[38]=f,e[39]=i,e[40]=u,e[41]=t,e[42]=k):k=e[42];let b;e[43]!==v||e[44]!==g||e[45]!==x||e[46]!==k?(b=a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[v,D,g,x,E,k]}),e[43]=v,e[44]=g,e[45]=x,e[46]=k,e[47]=b):b=e[47];let O;return e[48]!==p||e[49]!==b?(O=a.jsx(Me,{testId:"modal-deactivated-workspace",type:"success",onClose:Se,isOpen:p,title:A,children:b}),e[48]=p,e[49]=b,e[50]=O):O=e[50],O}function Pe(e){return!e.isDeactivated()}const c=ce({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}}),Be=ie(function(){const t=X(Z.workspaces),o=Ne(),w=X(Z.workspaceId),s=t.find(i=>i.id===w),p=re();return K.useEffect(()=>{o&&(!s||!s.deactivated)&&p("/")},[o,s,p]),o&&(!s||!s.deactivated)?a.jsx("div",{}):a.jsx(Ce,{})});export{Be as default};
//# sourceMappingURL=fptz6ee0iblnwjso.js.map
