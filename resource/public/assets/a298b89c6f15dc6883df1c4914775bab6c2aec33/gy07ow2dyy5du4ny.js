var Te=Object.defineProperty,Me=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var fe=(r,e,t)=>e in r?Te(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,_=(r,e)=>{for(var t in e||(e={}))ze.call(e,t)&&fe(r,t,e[t]);if(pe)for(var t of pe(e))Ee.call(e,t)&&fe(r,t,e[t]);return r},$=(r,e)=>Me(r,Pe(e));import{r as T,b as te,j as s,M as F,v as De,u as Ae,c as q,g as Oe,L as Ue}from"./n75kuy1cx6f5mogg.js";import{i as L,eJ as Re,qD as Le,f as Ge,py as $e,pz as qe,hy as se,pA as He,mL as Be,P as ae,jT as Qe,mf as oe,lp as We,qE as ie,qF as re,kU as Xe,lq as Ze,qG as Ke,r as ce,bL as Je,O as ee,fd as Ye,C as Ve,B as et,T as tt,cw as ne,iM as st,e as K,bJ as nt,bm as ot,qH as it,d4 as rt,Y as lt,Z as at,jt as ct,E as dt,j as ut}from"./ewse8exzafeu10ji.js";import{k5 as ve,fI as je,k6 as mt,jl as xt,k7 as pt,fm as ge,jB as ft,e1 as C,js as gt,jm as ht,k8 as vt,k9 as jt,ka as ye,fu as yt,kb as Z,kc as bt,kd as St,ke as Ct,kf as _t,kg as It,kh as be,gm as wt,ki as Se,kj as Ft,kk as Nt,kl as kt,km as Tt,kn as Mt,ko as Pt,fJ as zt,kp as Et,kq as Dt,kr as At,ks as Ot,kt as Ut,bk as Rt,bj as Lt,iB as Gt,iz as $t}from"./ny10lj7zpuz89fvf.js";import{g as qt,D as le}from"./h2dwuj1m5ps9l7uv.js";import{P as Ht}from"./lksc5q29mjlblqoo.js";import{u as Bt}from"./j2ui4c2m3nj8pqst.js";function Qt({ctx:r,gizmoId:e,gizmoName:t,canEdit:n,gizmoEditorData:m,openFileDialog:o,pendingFiles:c,setVersion:i,pendingFileUpsertMutationsRef:p,currentModelConfig:h}){var j;const u=(j=m==null?void 0:m.files)!=null?j:[],v=Array.from(c.current.values()).filter(x=>u.every(y=>y.file_id!==x.fileId)),l=v.filter(x=>h!=null&&ie(h,x.file.type,x.file.name)===re.CodeInterpreter),a=u.filter(x=>h!=null&&x.type!=null&&ie(h,x.type,x.name)===re.CodeInterpreter),f=[...l.map(x=>x.tempId),...a.map(x=>x.file_id)];return s.jsx(St,{gizmoId:e,gizmoName:t,canEdit:n,pendingFiles:v,pendingFileUpsertMutationsRef:p,files:u,interpreterOnlyFileIds:f,onAddFiles:o,removePendingFile:x=>{c.current.delete(x),Z({ctx:r,id:e,pendingFiles:{key:x,value:null}}),i(y=>y+1)}})}const Wt=T.forwardRef(function({gizmo:e,accountPlanType:t,showInstructions:n=!0},m){var J,P;const o=ve(t),c=te(),[i,p]=T.useState(!1),h=je(),u=mt(e),v=xt(u),l=L(),{data:a}=Re(),f=(J=a==null?void 0:a.models.get(Le))!=null?J:a&&pt(a.models.values(),X=>X.tags.includes(Ke.GPT_4o)),j=Ge(),[x,y]=T.useState(0),d=T.useRef(new Map),g=T.useRef([]),b=$e(f,void 0),S=X=>{X.some(({errors:U})=>{var G;return U.length!==1||((G=U[0])==null?void 0:G.code)!==ge.TooManyFiles})?j.danger(C.unknownError,{duration:2,toastId:"snorlax_handle_file_rejected"}):j.danger(c.formatMessage(C.dragTooManyFilesError,{maxFileLimit:o}),{duration:2,toastId:"snorlax_handle_file_rejected",loggingTitle:"drag_too_many_files_error"})},I=async X=>{ae.logEvent("Upload File",{client:"web",eventSource:"mouse",intent:"gizmo"});const U=u.id;X.length>0&&await Promise.all(X.map(G=>{const V=Qe(G),ue={tempId:V,gizmoId:U,file:G,status:oe.Uploading,progress:1,fileId:null,cdnUrl:null};d.current.set(V,ue),Z({ctx:l,id:U,pendingFiles:{key:V,value:ue}}),We(V,G,c,j,{kind:Ze.Gizmo,gizmoId:U},{onFileUploaded:async(M,B,Q,z)=>{const E=d.current.get(M);E!=null&&E.fileId&&E!=null&&E.fileId&&(g.current.push({id:e.gizmo.id,mutationId:De(),update:Y=>{var me,xe;if(!E.fileId)return Y;const ke=[...(me=Y.files)!=null?me:[],{file_id:E.fileId,name:E.file.name,size:E.file.size,type:(xe=z==null?void 0:z.mimeType)!=null?xe:Xe(E.file),last_modified:E.file.lastModified,file_size_tokens:z==null?void 0:z.fileTokenSize}];return $(_({},Y),{files:ke})},onSuccess:()=>{d.current.delete(M),Z({ctx:l,id:U,pendingFiles:{key:M,value:null}}),y(Y=>Y+1)}}),bt(e.gizmo.id)({projectId:e.gizmo.id,upsertProjectMutation:h,pendingFileUpsertMutationsRef:g}))},onFileCreated:(M,B,Q)=>{const z=$(_({tempId:M,gizmoId:U,file:G,status:oe.Uploading,progress:1},d.current.get(M)),{fileId:B,cdnUrl:Q});d.current.set(M,z),Z({ctx:l,id:U,pendingFiles:{key:M,value:z}}),y(E=>E+1)},onFileUploadProgress:(M,B)=>{const Q=d.current.get(M);if((Q==null?void 0:Q.status)===oe.Uploading){const z=$(_({},Q),{progress:B>95?95:B});d.current.set(M,z),Z({ctx:l,id:U,pendingFiles:{key:M,value:z}})}y(z=>z+1)},onError:M=>{d.current.delete(M),Z({ctx:l,id:U,pendingFiles:{key:M,value:null}}),y(B=>B+1)}},{usesRetrievalIndex:f!=null&&ie(f,G.type,G.name)===re.Retrieval})}))},N=qe(b),k=qt(N),w=d.current.size+u.files.length,{canEdit:D}=se(e),{open:A,getInputProps:O,getRootProps:R,isDragAccept:H,isDragReject:W}=Bt(_({noClick:!0,noKeyboard:!0,noDragEventsBubbling:!0,onDropAccepted:I,onDropRejected:S,multiple:!0,maxSize:He,maxFiles:o-w,validator:()=>w>=o?{code:ge.TooManyFiles,message:"Too many files"}:null,disabled:!D},N));return T.useImperativeHandle(m,()=>({openFileDialog:A})),s.jsxs("div",$(_({},R({className:"h-full px-4 min-w-0"})),{children:[s.jsx("input",_({},O())),n&&s.jsxs(ft,{children:[s.jsx("button",{className:"w-full",onClick:()=>p(!0),children:s.jsx("div",{className:"border-token-border-default w-full rounded-lg border text-start text-sm",children:(P=u==null?void 0:u.instructions)!=null&&P.length?s.jsx("div",{className:"mx-4 my-3 line-clamp-4",children:u.instructions}):s.jsxs("div",{className:"text-token-text-secondary flex h-full w-full items-center px-4 py-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx(F,_({},C.addCustomInstructions))}),s.jsx(gt,{className:"icon-sm"})]})})}),v.includes(ht.GizmoInstructionsTooLong)?s.jsx(vt,{className:"mt-1",children:s.jsx(F,$(_({},C.instructionsTooLong),{values:{length:jt}}))}):null]}),i&&s.jsx(ye,{gizmo:e,onClose:()=>{p(!1)}}),s.jsx(Qt,{ctx:l,gizmoId:e.gizmo.id,gizmoName:e.gizmo.display.name,canEdit:D,gizmoEditorData:u,openFileDialog:A,pendingFiles:d,pendingFileUpsertMutationsRef:g,setVersion:y,currentModelConfig:f}),H&&s.jsxs(le,{children:[s.jsx(yt,{}),s.jsx("h3",{children:s.jsx(F,_({},C.dragInstructions))}),s.jsx("h4",{className:"w-2/3 text-center",children:k.length>0?k.join(", "):s.jsx(F,_({},C.dragAllAccepted))})]}),W&&s.jsxs(le,{children:[s.jsx(Be,{className:"icon-2xl"}),s.jsx("h3",{children:s.jsx(F,_({},C.dragTooManyFiles))}),s.jsx("h4",{className:"w-2/3 text-center",children:s.jsx(F,$(_({},C.dragTooManyFilesDescription),{values:{maxFileLimit:o}}))})]})]}))});function Ce({gizmo:r,onClose:e,project:t}){var a;const n=te(),m=T.useRef(null),o=T.useCallback(()=>{var f;(f=m.current)==null||f.openFileDialog()},[m]),c=L(),i=ce(c),p=Ae(),{data:h}=Je(r.gizmo.id),u=h!=null?h:r,{canEdit:v}=se(u),l=ee(()=>{var f;return(f=t==null?void 0:t.filesCount$())!=null?f:0});return T.useEffect(()=>{p.invalidateQueries({queryKey:Ye(p,u.gizmo.id).queryKey})},[u.gizmo.id,p]),s.jsx(s.Fragment,{children:s.jsx(Ve,{testId:"modal-project-files",className:"min-h-72 max-w-[820px]",isOpen:!0,showCloseButton:!0,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",headerAccessory:v?s.jsx(et,{color:"secondary",onClick:o,disabled:(a=i&&l>=ve(i.planType))!=null?a:!1,children:s.jsx(F,_({},C.addFilesButtonLabel))}):s.jsx(tt,{label:n.formatMessage(C.viewOnlyCustomInstructionsModalHeaderTooltip),side:"left",align:"center",children:s.jsxs("div",{className:"text-token-text-tertiary flex flex-row items-center gap-1.5 text-sm",children:[s.jsx(Ct,{className:"icon"}),s.jsx(F,_({},C.viewOnlyCustomInstructionsModalHeaderLabel))]})}),title:s.jsx(F,_({},C.projectFilesModalTitle)),onClose:()=>{e()},children:s.jsx("div",{className:"grid min-h-[50dvh] grow overflow-y-auto pt-0",children:i&&s.jsx(Wt,{ref:m,gizmo:u,showInstructions:!1,accountPlanType:i.planType})})})})}const ms=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxFileModal:Ce},Symbol.toStringTag,{value:"Module"}));function Xt({gizmo:r}){return s.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:r?s.jsxs(s.Fragment,{children:[s.jsx(Zt,{gizmo:r,className:"rounded-[20px_0px_0px_20px] [border-width:1px_0.5px_1px_1px]"}),s.jsx(Jt,{gizmo:r,className:"rounded-[0px_20px_20px_0px] [border-width:1px_1px_1px_0.5px]"})]}):s.jsxs(s.Fragment,{children:[s.jsx(he,{}),s.jsx(he,{})]})})}const de=({className:r,header:e,context:t,contextClassName:n="",icon:m,onClick:o,disabled:c=!1})=>s.jsx("button",{onClick:o,disabled:c,className:K("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",r),children:s.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[s.jsxs("div",{className:"w-full grow text-start",children:[s.jsx("div",{className:"text-sm font-medium",children:e}),s.jsx("div",{className:K("text-token-text-secondary text-xs",n),children:t})]}),m]})}),he=()=>s.jsx(de,{disabled:!0,header:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:s.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})});function Zt({className:r,gizmo:e}){const{files:t}=e,n=!t.length,m=L(),o=()=>ne(m,Ce,{gizmo:e});let c,i,p;const{canEdit:h}=se(e);if(n)c=s.jsx(F,_({},h?C.addFilesButtonLabel:C.viewFilesButtonLabel)),i=s.jsx(F,_({},h?C.filesControlDescription:C.noFilesReadOnlyDescription)),p=null;else{const v=t.slice(0,3);c=s.jsx(F,_({},C.projectFilesModalTitle)),i=s.jsx(F,$(_({},C.filesCount),{values:{count:t.length}})),p=s.jsx("div",{className:"relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only",children:v.toReversed().map((l,a)=>s.jsx(Kt,{file:l,index:a,gizmoId:e.gizmo.id},l.id))})}return s.jsx(de,{className:r,onClick:o,header:c,context:i,icon:p,disabled:n&&!h})}function Kt({file:r,index:e,gizmoId:t}){const n=r.name,o=st(n)&&r.file_id!=null&&s.jsx(_t,{fileName:n,fileId:r.file_id,gizmoId:t,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"});return s.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:{transform:"translateX(".concat(e*-20,"px)")},children:o||s.jsx(It,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:r.name,contextConnectorInfo:void 0})})}function Jt({gizmo:r,className:e}){const{instructions:t}=r.gizmo,n=!t.length,m=L(),o=()=>ne(m,ye,{gizmo:r});let c,i,p;const{canEdit:h}=se(r);return n?(c=s.jsx(F,_({},h?C.customInstructionsTitle:C.customInstructionsReadOnlyTitle)),i=s.jsx(F,_({},h?C.customInstructionsDescription:C.customInstructionsReadOnlyDescription))):(c=s.jsx(F,_({},C.editCustomInstructionsTitle)),p="overflow-hidden text-ellipsis whitespace-nowrap",i=t),s.jsx(de,{className:e,onClick:o,header:c,context:i,contextClassName:p,disabled:n&&!h})}const Yt=()=>{"use forget";const r=q.c(1);let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsx("div",{className:"ms-1 mt-3 h-10",children:s.jsx("div",{className:"bg-token-tertiary my-[15px] h-[10px] w-48 rounded-full"})}),r[0]=e):e=r[0],e};function _e(r){"use forget";var f,j,x,y;const e=q.c(17),{gizmo:t}=r,n=te(),m=L(),o=T.use(be);let c;e[0]!==t||e[1]!==o?(c=()=>t?o.theme$():null,e[0]=t,e[1]=o,e[2]=c):c=e[2];const i=ee(c);let p;e[3]!==t||e[4]!==o?(p=()=>t?o.emoji$():null,e[3]=t,e[4]=o,e[5]=p):p=e[5];const h=ee(p);let u;e[6]!==t||e[7]!==o?(u=()=>t?o.title$():null,e[6]=t,e[7]=o,e[8]=u):u=e[8];const v=ee(u),l=((y=(x=(j=(f=t==null?void 0:t.gizmo)==null?void 0:f.sharing)==null?void 0:j.subjects)==null?void 0:x.length)!=null?y:0)>0;let a;return e[9]!==m||e[10]!==h||e[11]!==i||e[12]!==v||e[13]!==t||e[14]!==n||e[15]!==l?(a=s.jsx("div",{className:"mb-8 inline-flex w-full justify-center gap-2",children:t?s.jsx("div",{className:"text-page-header mt-0.5 inline-block px-4",children:s.jsx("h1",{className:"contents",children:s.jsxs("a",{href:"#edit-title",role:"button","aria-label":n.formatMessage({id:"edit-title",defaultMessage:"Edit the title of {projectName}"},{projectName:t.gizmo.display.name}),className:"text-page-header group hover:text-token-text-secondary ms-2 flex items-center gap-1.5 text-balance",onClick:d=>{d.preventDefault(),ne(m,Se,{submitButtonTitle:n.formatMessage(C.projectSettingsSubmitButton),gizmo:t})},children:[s.jsx(wt,{size:"lg",color:i,emoji:h,isSharedProject:l,strict:!0}),v]})})}):s.jsx(Yt,{})}),e[9]=m,e[10]=h,e[11]=i,e[12]=v,e[13]=t,e[14]=n,e[15]=l,e[16]=a):a=e[16],a}function Vt(r){"use forget";const e=q.c(2),{children:t}=r;let n;return e[0]!==t?(n=s.jsx("div",{className:"group relative flex flex-col gap-1 p-3",children:s.jsx("div",{className:"flex items-center gap-4",children:t})}),e[0]=t,e[1]=n):n=e[1],n}const Ie=r=>{"use forget";var D,A;const e=q.c(36),{conversation:t,project:n,showAvatar:m}=r,o=(D=nt(t.id,ns))!=null?D:t.title,[c,i]=T.useState(!1);let p,h;e[0]!==t.id?(p=()=>ct(At,{editTitleInMainScreen:O=>{const{serverThreadId:R}=O;R===t.id&&i(!0)}}),h=[t.id],e[0]=t.id,e[1]=p,e[2]=h):(p=e[1],h=e[2]),T.useEffect(p,h);const u=L(),{snippet:v}=t;let l,a,f,j,x;if(e[3]!==t||e[4]!==u||e[5]!==n.gizmo){const O=(A=ce(u))==null?void 0:A.normalizedAccountUserId;l="owner"in t?t.owner:null,j=l==null?void 0:l.user_id,a=l==null?void 0:l.name,f=l==null?void 0:l.user_email,x=ot(t.id,{project:n.gizmo,ownerUserId:j,accountUserId:O}),e[3]=t,e[4]=u,e[5]=n.gizmo,e[6]=l,e[7]=a,e[8]=f,e[9]=j,e[10]=x}else l=e[6],a=e[7],f=e[8],j=e[9],x=e[10];const y=x;let d;e[11]!==l||e[12]!==a||e[13]!==f||e[14]!==j||e[15]!==m?(d=m&&s.jsx(Ot,{monogram:l&&a&&j?{label:a,id:j,sublabel:f}:null}),e[11]=l,e[12]=a,e[13]=f,e[14]=j,e[15]=m,e[16]=d):d=e[16];let g;e[17]!==t||e[18]!==o||e[19]!==c?(g=c?s.jsx(Ft,{conversationId:t.id,historyConversationResponse:t,onClose:()=>{i(!1)}}):s.jsx("div",{className:"text-sm font-medium",children:o}),e[17]=t,e[18]=o,e[19]=c,e[20]=g):g=e[20];let b;e[21]!==v?(b=v&&s.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:v}),e[21]=v,e[22]=b):b=e[22];let S;e[23]!==g||e[24]!==b?(S=s.jsxs("div",{className:"grow overflow-hidden group-hover:me-5",children:[g,b]}),e[23]=g,e[24]=b,e[25]=S):S=e[25];let I;e[26]!==t||e[27]!==c?(I=!c&&s.jsx(we,{conversation:t}),e[26]=t,e[27]=c,e[28]=I):I=e[28];let N;e[29]!==d||e[30]!==S||e[31]!==I?(N=s.jsxs(Vt,{children:[d,S,I]}),e[29]=d,e[30]=S,e[31]=I,e[32]=N):N=e[32];const k=N;if(c)return k;let w;return e[33]!==k||e[34]!==y?(w=s.jsx(Ue,{to:y,draggable:!1,children:k}),e[33]=k,e[34]=y,e[35]=w):w=e[35],w},we=r=>{"use forget";var N,k;const e=q.c(24),{conversation:t,isNewProjectPage:n}=r,m=n===void 0?!1:n,[o,c]=T.useState(!1),i=te(),p=L(),h=(N=ce(p))==null?void 0:N.normalizedAccountUserId,u="owner"in t?(k=t.owner)==null?void 0:k.user_id:void 0,v=u===void 0||u===h;let l;e[0]!==t.update_time||e[1]!==i?(l=t.update_time&&Intl.DateTimeFormat(i.locale,{month:"short",day:"numeric"}).format(new Date(t.update_time)),e[0]=t.update_time,e[1]=i,e[2]=l):l=e[2];const a=l;if(!v){let w;return e[3]!==a?(w=a?s.jsx("span",{className:"text-token-text-tertiary text-sm whitespace-nowrap",children:a}):null,e[3]=a,e[4]=w):w=e[4],w}let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=K("group text-token-text-tertiary relative flex min-h-10 min-w-10 items-center justify-between text-sm"),e[5]=f):f=e[5];let j;e[6]!==a||e[7]!==o||e[8]!==m?(j=!!a&&s.jsx("span",{className:K("whitespace-nowrap",!m&&"transition-opacity duration-100 ease-out",o?"opacity-0":"opacity-100 group-hover:opacity-0"),children:a}),e[6]=a,e[7]=o,e[8]=m,e[9]=j):j=e[9];const x=!m&&"transition-all duration-100 ease-out",y=o&&"pointer-events-auto translate-y-0 scale-100 opacity-100";let d;e[10]!==x||e[11]!==y?(d=K("absolute inset-0 flex items-center gap-1.5",x,"translate-y-0 scale-95 opacity-0","group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100",y),e[10]=x,e[11]=y,e[12]=d):d=e[12];let g;e[13]!==t.id?(g=w=>{c(w),w&&ae.logEvent("Conversation History Item Open Menu",{conversationId:t.id})},e[13]=t.id,e[14]=g):g=e[14];let b;e[15]!==t||e[16]!==g?(b=s.jsx(Ut,{conversation:t,onOpenChange:g,inMainScreen:!0,isActiveConversation:!1}),e[15]=t,e[16]=g,e[17]=b):b=e[17];let S;e[18]!==d||e[19]!==b?(S=s.jsx("div",{className:d,"data-prevent-default":!0,children:b}),e[18]=d,e[19]=b,e[20]=S):S=e[20];let I;return e[21]!==S||e[22]!==j?(I=s.jsxs("div",{className:f,children:[j,S]}),e[21]=S,e[22]=j,e[23]=I):I=e[23],I};function Fe(r){"use forget";const e=q.c(24),{project:t,hasConversations$:n,className:m}=r;Nt(t.gizmo.id);const{items:o,hasNextPage:c,fetchNextPage:i,isLoading:p,isFetching:h,isFetchingNextPage:u}=kt(t.gizmo.id);let v,l;e[0]!==n||e[1]!==o.length?(v=()=>{n&&n.set(o.length>0)},l=[o.length,n],e[0]=n,e[1]=o.length,e[2]=v,e[3]=l):(v=e[2],l=e[3]),T.useEffect(v,l);let a;e[4]!==c||e[5]!==h||e[6]!==p||e[7]!==i?(a=b=>{if(p||b==null)return;const S=new IntersectionObserver(I=>{I[0].isIntersecting&&c&&!h&&i()});return S.observe(b),()=>{S.disconnect()}},e[4]=c,e[5]=h,e[6]=p,e[7]=i,e[8]=a):a=e[8];const f=a,j=o.length;let x;e[9]!==m?(x=K("mt-8 mb-14 contain-inline-size",m),e[9]=m,e[10]=x):x=e[10];let y;e[11]!==j||e[12]!==c||e[13]!==f||e[14]!==p||e[15]!==o||e[16]!==t?(y=(j||p)&&s.jsx(es,{project:t,items:o!=null?o:[],hasNextPage:c,infiniteScrollTriggerElementRef:f}),e[11]=j,e[12]=c,e[13]=f,e[14]=p,e[15]=o,e[16]=t,e[17]=y):y=e[17];let d;e[18]!==u?(d=u&&s.jsx("div",{className:"m-4 mb-5 flex justify-center",children:s.jsx(dt,{})}),e[18]=u,e[19]=d):d=e[19];let g;return e[20]!==x||e[21]!==y||e[22]!==d?(g=s.jsxs("div",{className:x,children:[y,d]}),e[20]=x,e[21]=y,e[22]=d,e[23]=g):g=e[23],g}function es(r){"use forget";var j,x,y,d;const e=q.c(21),{project:t,items:n,hasNextPage:m,infiniteScrollTriggerElementRef:o}=r,c=L();let i;e[0]!==c?(i=ut(c,"773249106"),e[0]=c,e[1]=i):i=e[1];const p=i,h=((d=(y=(x=(j=t==null?void 0:t.gizmo)==null?void 0:j.sharing)==null?void 0:x.subjects)==null?void 0:y.length)!=null?d:0)>0;let u;if(e[2]!==n||e[3]!==t){let g;e[5]!==t?(g=b=>{var S,I;return"owner"in b&&((S=b.owner)==null?void 0:S.user_id)!==((I=t.gizmo)==null?void 0:I.author.user_id)},e[5]=t,e[6]=g):g=e[6],u=n.some(g),e[2]=n,e[3]=t,e[4]=u}else u=e[4];const l=p&&(h||u);let a;if(e[7]!==m||e[8]!==o||e[9]!==n||e[10]!==t||e[11]!==l){let g;e[13]!==m||e[14]!==o||e[15]!==n.length||e[16]!==t||e[17]!==l?(g=(b,S)=>{const I=m&&S===n.length-3?o:void 0;return s.jsx("li",{ref:I,className:"border-token-border-light border-t first:border-t-0 last:border-b-0",children:s.jsx("div",{className:"hover:bg-token-interactive-bg-tertiary-hover",children:s.jsx(Ie,{conversation:b,project:t,showAvatar:l})})},b.id)},e[13]=m,e[14]=o,e[15]=n.length,e[16]=t,e[17]=l,e[18]=g):g=e[18],a=n.map(g),e[7]=m,e[8]=o,e[9]=n,e[10]=t,e[11]=l,e[12]=a}else a=e[12];let f;return e[19]!==a?(f=s.jsx("ol",{children:a}),e[19]=a,e[20]=f):f=e[20],f}function Ne(r,e){"use forget";const t=q.c(15),n=Tt(),m=L(),o=Oe(),c=Mt(),i=Pt.useStore(),p=(n==null?void 0:n.kind)==="conversation"&&n.gizmoId!==e;let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[0]=h):h=t[0],T.useEffect(ts,h);let u;t[1]!==o||t[2]!==i||t[3]!==c?(u=async function(x){const{conversation:y,newGizmoId:d,previousGizmoId:g}=x;i.expandProject(d),await c({newGizmoId:d,conversation:y,previousGizmoId:g}),o("/g/".concat(d,"/project"))},t[1]=o,t[2]=i,t[3]=c,t[4]=u):u=t[4];const v=u;let l;t[5]!==v||t[6]!==p||t[7]!==m||t[8]!==n||t[9]!==e||t[10]!==r?(l=()=>{if(!p)return;const{conversation:j,gizmoId:x}=n;if(e)return v({conversation:j,newGizmoId:e,previousGizmoId:x});ne(m,y=>{const{onClose:d}=y;return s.jsx(Se,{onClose:d,onSuccess:g=>{if(!g)return;const b=v({conversation:j,newGizmoId:g,previousGizmoId:x});return ae.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:r}),b}})})},t[5]=v,t[6]=p,t[7]=m,t[8]=n,t[9]=e,t[10]=r,t[11]=l):l=t[11];const a=l;let f;return t[12]!==p||t[13]!==a?(f={canDropConversation:p,onDropConversation:a},t[12]=p,t[13]=a,t[14]=f):f=t[14],f}function ts(){return Dt()}function ss(r){"use forget";var J;const e=q.c(44),{clientThreadId:t,gizmoId:n,currentModelId:m,onRequestCompletion:o}=r,c=L(),{data:i}=it(n),p=rt(c),h=lt(at),{onDropConversation:u,canDropConversation:v}=Ne(void 0,n),[l,a]=T.useState(!1),f=je();let j;e[0]!==c||e[1]!==n||e[2]!==f?(j=zt(c)(n,f),e[0]=c,e[1]=n,e[2]=f,e[3]=j):j=e[3];const x=j;let y;e[4]!==v?(y=P=>{P.preventDefault(),v&&a(!0)},e[4]=v,e[5]=y):y=e[5];let d;e[6]!==v||e[7]!==u?(d=P=>{P.preventDefault(),v&&(a(!1),u())},e[6]=v,e[7]=u,e[8]=d):d=e[8];let g,b;e[9]!==v?(g=P=>{P.preventDefault(),v&&a(!0)},b=P=>{P.preventDefault(),v&&a(!1)},e[9]=v,e[10]=g,e[11]=b):(g=e[10],b=e[11]);const S=p?"last-standard":"none",I=h?"none":"standard";let N;e[12]!==i?(N=s.jsx(_e,{gizmo:i}),e[12]=i,e[13]=N):N=e[13];let k;e[14]!==t||e[15]!==m||e[16]!==o||e[17]!==i?(k=i?s.jsx(Ht,{clientThreadId:t,isNewThread:!0,isProjectThread:!0,currentModelId:m,layoutMode:"center",onContinueGenerating:P=>o(Lt(P)),onRequestCompletion:async P=>o(await Rt(P)),hideHeader:!0}):s.jsx("div",{className:"bg-token-tertiary h-24 w-full rounded-3xl"}),e[14]=t,e[15]=m,e[16]=o,e[17]=i,e[18]=k):k=e[18];let w,D;e[19]!==i?(w=s.jsx(Xt,{gizmo:i}),D=i&&s.jsx(Fe,{project:i}),e[19]=i,e[20]=w,e[21]=D):(w=e[20],D=e[21]);let A;e[22]!==l||e[23]!==(i==null?void 0:i.gizmo)?(A=l&&s.jsxs(le,{children:[s.jsx(Et,{className:"h-12 w-12",style:{color:"#3C46FF"}}),s.jsx("h3",{className:"text-center",children:s.jsx(F,$(_({},C.addConversationToNamedSnorlax),{values:{projectName:(J=i==null?void 0:i.gizmo.display.name)!=null?J:"project"}}))}),s.jsx("h4",{className:"text-center",children:s.jsx(F,_({},C.moveConversation))})]}),e[22]=l,e[23]=i==null?void 0:i.gizmo,e[24]=A):A=e[24];let O;e[25]!==w||e[26]!==D||e[27]!==A||e[28]!==N||e[29]!==k?(O=s.jsxs(Gt,{className:"[width:min(90cqw,var(--thread-content-max-width))]",children:[N,k,w,D,A]}),e[25]=w,e[26]=D,e[27]=A,e[28]=N,e[29]=k,e[30]=O):O=e[30];let R;e[31]!==O||e[32]!==S||e[33]!==I?(R=s.jsx($t,{verticalMargin:"none",verticalPadding:S,horizontalPadding:I,children:O}),e[31]=O,e[32]=S,e[33]=I,e[34]=R):R=e[34];let H;e[35]!==R||e[36]!==y||e[37]!==d||e[38]!==g||e[39]!==b?(H=s.jsx("div",{onDragOver:y,onDrop:d,onDragEnter:g,onDragLeave:b,className:"flex max-h-full min-h-full flex-col pt-(--header-height)",children:R}),e[35]=R,e[36]=y,e[37]=d,e[38]=g,e[39]=b,e[40]=H):H=e[40];let W;return e[41]!==x||e[42]!==H?(W=s.jsx(be,{value:x,children:H}),e[41]=x,e[42]=H,e[43]=W):W=e[43],W}function ns(r){return r==null?void 0:r.title}const xs=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxConversationItem:Ie,SnorlaxConversationItemOverflowMenu:we,SnorlaxConversationList:Fe,SnorlaxHeader:_e,SnorlaxSplashScreen:ss,useProjectsDragDrop:Ne},Symbol.toStringTag,{value:"Module"}));export{we as S,ms as a,xs as b,Ne as u};
//# sourceMappingURL=gy07ow2dyy5du4ny.js.map
