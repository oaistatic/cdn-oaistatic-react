var Me=Object.defineProperty;var ke=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var ae=(e,n,r)=>n in e?Me(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,a=(e,n)=>{for(var r in n||(n={}))Je.call(n,r)&&ae(e,r,n[r]);if(ke)for(var r of ke(n))Ke.call(n,r)&&ae(e,r,n[r]);return e};var F=(e,n,r)=>ae(e,typeof n!="symbol"?n+"":n,r);import{ku as J,kv as f,kw as g,kx as Y,ky as $,kz as j,kA as T,kB as q,kC as B,kD as Qe,n as Xe,ja as Ye,kE as me,kF as De,kG as Ze,kH as ve,kI as Le,kJ as je}from"./ny10lj7zpuz89fvf.js";import{eS as m,d9 as We,cK as Ge}from"./ewse8exzafeu10ji.js";import"./n75kuy1cx6f5mogg.js";var pe;(e=>{function n(o){if(o==="stopped")return 0;if(o==="paused")return 1;if(o==="running")return 2;throw new J}e.encode=n;function r(o){switch(o){case 0:return"stopped";case 1:return"paused";case 2:return"running";default:return"stopped"}}e.decode=r})(pe||(pe={}));class K{}F(K,"interfaceName","web.bridge.AgentHandler"),F(K,"interfaceVersion",0);(e=>{let n;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size).add(f.forString(w.agentid))}I.measure=V;function y(w,x){w.setString(0,x.agentid)}I.encode=y;function U(w,x){return{agentid:g(w.getString(0))}}I.decode=U})(n=e.AgentHandler_TryOpenAgentViewer_Params||(e.AgentHandler_TryOpenAgentViewer_Params={}));let r;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size)}I.measure=V;function y(w,x){let k=0;x.response&&(k|=1),w.setU8(0,k)}I.encode=y;function U(w,x){return{response:(w.getU8(0)&1)!=0}}I.decode=U})(r=e.AgentHandler_TryOpenAgentViewer_ResponseParams||(e.AgentHandler_TryOpenAgentViewer_ResponseParams={}));let o;(I=>{I.VERSION_INFO=[{version:0,size:8}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size)}I.measure=V;function y(w,x){}I.encode=y;function U(w,x){return{}}I.decode=U})(o=e.AgentHandler_GetClientID_Params||(e.AgentHandler_GetClientID_Params={}));let t;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size).add(f.forString(w.clientid))}I.measure=V;function y(w,x){w.setString(0,x.clientid)}I.encode=y;function U(w,x){return{clientid:g(w.getString(0))}}I.decode=U})(t=e.AgentHandler_GetClientID_ResponseParams||(e.AgentHandler_GetClientID_ResponseParams={}));let c;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size).add(f.forString(w.agentid))}I.measure=V;function y(w,x){w.setString(0,x.agentid)}I.encode=y;function U(w,x){return{agentid:g(w.getString(0))}}I.decode=U})(c=e.AgentHandler_UserSentMessageInAgentConversation_Params||(e.AgentHandler_UserSentMessageInAgentConversation_Params={}));let O;(I=>{I.VERSION_INFO=[{version:0,size:24}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size).add(f.forString(w.agentid))}I.measure=V;function y(w,x){let k=0;w.setString(0,x.agentid),x.haderror&&(k|=1),w.setU8(8,k)}I.encode=y;function U(w,x){const k=w.getU8(8);return{agentid:g(w.getString(0)),haderror:(k&1)!=0}}I.decode=U})(O=e.AgentHandler_AgentConversationStopped_Params||(e.AgentHandler_AgentConversationStopped_Params={}));let s;(I=>{I.VERSION_INFO=[{version:0,size:24}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size).add(f.forString(w.agentid)).add(f.forStringArray(w.urls))}I.measure=V;function y(w,x){w.setString(0,x.agentid),w.setStringArray(8,x.urls)}I.encode=y;function U(w,x){return{agentid:g(w.getString(0)),urls:g(Y(w.getStringArray(8)))}}I.decode=U})(s=e.AgentHandler_OpenAgentTabs_Params||(e.AgentHandler_OpenAgentTabs_Params={}));let i;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size).add(f.forString(w.agentid))}I.measure=V;function y(w,x){w.setString(0,x.agentid)}I.encode=y;function U(w,x){return{agentid:g(w.getString(0))}}I.decode=U})(i=e.AgentHandler_UserStoppedAgentConversation_Params||(e.AgentHandler_UserStoppedAgentConversation_Params={}));let u;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size).add(f.forString(w.agentid))}I.measure=V;function y(w,x){w.setString(0,x.agentid)}I.encode=y;function U(w,x){return{agentid:g(w.getString(0))}}I.decode=U})(u=e.AgentHandler_GetAgentStatus_Params||(e.AgentHandler_GetAgentStatus_Params={}));let R;(I=>{I.VERSION_INFO=[{version:0,size:16}],I.CURRENT_VERSION=I.VERSION_INFO[I.VERSION_INFO.length-1];function V(w){return f.bytes(I.CURRENT_VERSION.size)}I.measure=V;function y(w,x){w.setEnumValue(pe,0,x.status)}I.encode=y;function U(w,x){return{status:g(w.getEnumValue(pe,0))}}I.decode=U})(R=e.AgentHandler_GetAgentStatus_ResponseParams||(e.AgentHandler_GetAgentStatus_ResponseParams={}));class E{constructor(V){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(V.endpointState,!0),this._version=0}static create(){const[V,y]=j.createChannel(e);return[new E(V),y]}static createToBrowser(){const[V,y]=this.create();return Mojo.bindInterface(e.interfaceName,y.pipe.rawHandle),V}async tryOpenAgentViewer(V){const y={agentid:V};return(await this._endpoint.sendAndAwaitResponse(T.encode(0,q.None,n,y))).decode(r).response}async getClientID(){const V={};return(await this._endpoint.sendAndAwaitResponse(T.encode(1,q.None,o,V))).decode(t).clientid}userSentMessageInAgentConversation(V){const y={agentid:V};this._endpoint.send(T.encode(2,q.None,c,y))}agentConversationStopped(V,y){const U={agentid:V,haderror:y};this._endpoint.send(T.encode(3,q.None,O,U))}openAgentTabs(V,y){const U={agentid:V,urls:y};this._endpoint.send(T.encode(4,q.None,s,U))}userStoppedAgentConversation(V){const y={agentid:V};this._endpoint.send(T.encode(5,q.None,i,y))}async getAgentStatus(V){const y={agentid:V};return(await this._endpoint.sendAndAwaitResponse(T.encode(6,q.None,u,y))).decode(R).status}}e.Proxy=E;class h extends B{constructor(){super(e);F(this,"onDisconnect")}bind(y,U){this.addReceiver(U,async(w,x)=>{switch(w.header.ordinal){case 0:{const k=w.decode(n),Q=y.tryOpenAgentViewer(k.agentid),X=x.createResponder(r,0,w.header.requestID),G=await Q;X({response:G});break}case 1:{w.decode(o);const k=y.getClientID(),Q=x.createResponder(t,1,w.header.requestID),X=await k;Q({clientid:X});break}case 2:{const k=w.decode(c);y.userSentMessageInAgentConversation(k.agentid);break}case 3:{const k=w.decode(O);y.agentConversationStopped(k.agentid,k.haderror);break}case 4:{const k=w.decode(s);y.openAgentTabs(k.agentid,k.urls);break}case 5:{const k=w.decode(i);y.userStoppedAgentConversation(k.agentid);break}case 6:{const k=w.decode(u),Q=y.getAgentStatus(k.agentid),X=x.createResponder(R,6,w.header.requestID),G=await Q;X({status:G});break}default:w.header.expectsResponse&&x.sendUnimplementedResponse(w.header.requestID,w.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(y)})}createRemote(y){const[U,w]=j.createChannel(e);return this.bind(y,w),U}}e.Dispatcher=h})(K||(K={}));var L;(e=>{function n(o){if(o==="incognito")return 0;if(o==="signedInAccounts")return 1;throw new J}e.encode=n;function r(o){switch(o){case 0:return"incognito";case 1:return"signedInAccounts";default:return"incognito"}}e.decode=r})(L||(L={}));class l{}F(l,"interfaceName","web.bridge.AgentSafeModeSettingsHandler"),F(l,"interfaceVersion",0);(e=>{let n;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){return f.bytes(s.CURRENT_VERSION.size)}s.measure=i;function u(E,h){E.setEnumValue(L,0,h.preferredMode)}s.encode=u;function R(E,h){return{preferredMode:g(E.getEnumValue(L,0))}}s.decode=R})(n=e.AgentSafeModeSettingsHandler_UpdateAgentSafeMode_Params||(e.AgentSafeModeSettingsHandler_UpdateAgentSafeMode_Params={}));let r;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){return f.bytes(s.CURRENT_VERSION.size)}s.measure=i;function u(E,h){let I=0;h.hasSeenNux&&(I|=1),E.setU8(0,I)}s.encode=u;function R(E,h){return{hasSeenNux:(E.getU8(0)&1)!=0}}s.decode=R})(r=e.AgentSafeModeSettingsHandler_UpdateAgentSafeModeHasSeenNux_Params||(e.AgentSafeModeSettingsHandler_UpdateAgentSafeModeHasSeenNux_Params={}));let o;(s=>{s.VERSION_INFO=[{version:0,size:8}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){return f.bytes(s.CURRENT_VERSION.size)}s.measure=i;function u(E,h){}s.encode=u;function R(E,h){return{}}s.decode=R})(o=e.AgentSafeModeSettingsHandler_GetAgentSafeModeState_Params||(e.AgentSafeModeSettingsHandler_GetAgentSafeModeState_Params={}));let t;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){return f.bytes(s.CURRENT_VERSION.size)}s.measure=i;function u(E,h){let I=0;E.setEnumValue(L,0,h.preferredMode),h.hasSeenNux&&(I|=1),E.setU8(4,I)}s.encode=u;function R(E,h){const I=E.getU8(4);return{preferredMode:g(E.getEnumValue(L,0)),hasSeenNux:(I&1)!=0}}s.decode=R})(t=e.AgentSafeModeSettingsHandler_GetAgentSafeModeState_ResponseParams||(e.AgentSafeModeSettingsHandler_GetAgentSafeModeState_ResponseParams={}));class c{constructor(i){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(i.endpointState,!0),this._version=0}static create(){const[i,u]=j.createChannel(e);return[new c(i),u]}static createToBrowser(){const[i,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),i}updateAgentSafeMode(i){const u={preferredMode:i};this._endpoint.send(T.encode(0,q.None,n,u))}updateAgentSafeModeHasSeenNux(i){const u={hasSeenNux:i};this._endpoint.send(T.encode(1,q.None,r,u))}async getAgentSafeModeState(){const i={};return(await this._endpoint.sendAndAwaitResponse(T.encode(2,q.None,o,i))).decode(t)}}e.Proxy=c;class O extends B{constructor(){super(e);F(this,"onDisconnect")}bind(u,R){this.addReceiver(R,async(E,h)=>{switch(E.header.ordinal){case 0:{const I=E.decode(n);u.updateAgentSafeMode(I.preferredMode);break}case 1:{const I=E.decode(r);u.updateAgentSafeModeHasSeenNux(I.hasSeenNux);break}case 2:{E.decode(o);const I=u.getAgentSafeModeState(),V=h.createResponder(t,2,E.header.requestID),y=await I;V(y);break}default:E.header.expectsResponse&&h.sendUnimplementedResponse(E.header.requestID,E.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[R,E]=j.createChannel(e);return this.bind(u,E),R}}e.Dispatcher=O})(l||(l={}));var se;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.accessToken)).add(f.forString(t.idToken))}e.measure=n;function r(t,c){t.setString(0,c.accessToken),t.setString(8,c.idToken),t.setF64(16,c.expiresTimestampMsSince1970)}e.encode=r;function o(t,c){return{accessToken:g(t.getString(0)),idToken:g(t.getString(8)),expiresTimestampMsSince1970:g(t.getF64(16))}}e.decode=o})(se||(se={}));var be;(e=>{function n(o){if(o==="justLoggedInAccessToken")return 0;if(o==="reloadPageIfLoggedOut")return 1;if(o==="fullTokenToSessionConversion")return 2;throw new J}e.encode=n;function r(o){switch(o){case 0:return"justLoggedInAccessToken";case 1:return"reloadPageIfLoggedOut";case 2:return"fullTokenToSessionConversion";default:return"justLoggedInAccessToken"}}e.decode=r})(be||(be={}));class C{}F(C,"interfaceName","web.bridge.AuthHandler"),F(C,"interfaceVersion",0);(e=>{let n;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(u){return f.bytes(c.CURRENT_VERSION.size)}c.measure=O;function s(u,R){}c.encode=s;function i(u,R){return{}}c.decode=i})(n=e.AuthHandler_HandleMissingSessionAuth_Params||(e.AuthHandler_HandleMissingSessionAuth_Params={}));let r;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(u){return f.bytes(c.CURRENT_VERSION.size)}c.measure=O;function s(u,R){}c.encode=s;function i(u,R){return{}}c.decode=i})(r=e.AuthHandler_RecordAvailableSessionAuth_Params||(e.AuthHandler_RecordAvailableSessionAuth_Params={}));class o{constructor(O){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(O.endpointState,!0),this._version=0}static create(){const[O,s]=j.createChannel(e);return[new o(O),s]}static createToBrowser(){const[O,s]=this.create();return Mojo.bindInterface(e.interfaceName,s.pipe.rawHandle),O}handleMissingSessionAuth(){const O={};this._endpoint.send(T.encode(0,q.None,n,O))}recordAvailableSessionAuth(){const O={};this._endpoint.send(T.encode(1,q.None,r,O))}}e.Proxy=o;class t extends B{constructor(){super(e);F(this,"onDisconnect")}bind(s,i){this.addReceiver(i,async(u,R)=>{switch(u.header.ordinal){case 0:{u.decode(n),s.handleMissingSessionAuth();break}case 1:{u.decode(r),s.recordAvailableSessionAuth();break}default:u.header.expectsResponse&&R.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(s)})}createRemote(s){const[i,u]=j.createChannel(e);return this.bind(s,u),i}}e.Dispatcher=t})(C||(C={}));class H{}F(H,"interfaceName","web.bridge.AuthStateController"),F(H,"interfaceVersion",0);(e=>{let n;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function c(i){return f.bytes(t.CURRENT_VERSION.size).add(f.forObject(se,i.authToken))}t.measure=c;function O(i,u){i.setObjectIndirect(se,0,u.authToken),i.setEnumValue(be,8,u.behavior)}t.encode=O;function s(i,u){return{authToken:g(i.getObjectIndirect(se,0)),behavior:g(i.getEnumValue(be,8))}}t.decode=s})(n=e.AuthStateController_RefreshSessionContext_Params||(e.AuthStateController_RefreshSessionContext_Params={}));class r{constructor(c){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(c.endpointState,!0),this._version=0}static create(){const[c,O]=j.createChannel(e);return[new r(c),O]}static createToBrowser(){const[c,O]=this.create();return Mojo.bindInterface(e.interfaceName,O.pipe.rawHandle),c}refreshSessionContext(c,O){const s={authToken:c,behavior:O};this._endpoint.send(T.encode(0,q.None,n,s))}}e.Proxy=r;class o extends B{constructor(){super(e);F(this,"onDisconnect")}bind(O,s){this.addReceiver(s,async(i,u)=>{switch(i.header.ordinal){case 0:{const R=i.decode(n);O.refreshSessionContext(R.authToken,R.behavior);break}default:i.header.expectsResponse&&u.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(O)})}createRemote(O){const[s,i]=j.createChannel(e);return this.bind(O,i),s}}e.Dispatcher=o})(H||(H={}));class ee{}F(ee,"interfaceName","web.bridge.ConversationArchiveController"),F(ee,"interfaceVersion",0);(e=>{let n;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(u){return f.bytes(c.CURRENT_VERSION.size).add(f.forString(u.conversationId))}c.measure=O;function s(u,R){u.setString(0,R.conversationId)}c.encode=s;function i(u,R){return{conversationId:g(u.getString(0))}}c.decode=i})(n=e.ConversationArchiveController_EnqueueConversationArchive_Params||(e.ConversationArchiveController_EnqueueConversationArchive_Params={}));let r;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(u){return f.bytes(c.CURRENT_VERSION.size).add(f.forString(u.conversationId))}c.measure=O;function s(u,R){u.setString(0,R.conversationId)}c.encode=s;function i(u,R){return{conversationId:g(u.getString(0))}}c.decode=i})(r=e.ConversationArchiveController_CancelConversationArchive_Params||(e.ConversationArchiveController_CancelConversationArchive_Params={}));class o{constructor(O){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(O.endpointState,!0),this._version=0}static create(){const[O,s]=j.createChannel(e);return[new o(O),s]}static createToBrowser(){const[O,s]=this.create();return Mojo.bindInterface(e.interfaceName,s.pipe.rawHandle),O}enqueueConversationArchive(O){const s={conversationId:O};this._endpoint.send(T.encode(0,q.None,n,s))}cancelConversationArchive(O){const s={conversationId:O};this._endpoint.send(T.encode(1,q.None,r,s))}}e.Proxy=o;class t extends B{constructor(){super(e);F(this,"onDisconnect")}bind(s,i){this.addReceiver(i,async(u,R)=>{switch(u.header.ordinal){case 0:{const E=u.decode(n);s.enqueueConversationArchive(E.conversationId);break}case 1:{const E=u.decode(r);s.cancelConversationArchive(E.conversationId);break}default:u.header.expectsResponse&&R.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(s)})}createRemote(s){const[i,u]=j.createChannel(e);return this.bind(s,u),i}}e.Dispatcher=t})(ee||(ee={}));var ie;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.conduitToken))}e.measure=n;function r(t,c){t.setEnumValue(ye,0,c.prepareState),t.setF64(8,c.lastPrepareTimestampMsSince1970),t.setString(16,c.conduitToken)}e.encode=r;function o(t,c){return{prepareState:g(t.getEnumValue(ye,0)),lastPrepareTimestampMsSince1970:g(t.getF64(8)),conduitToken:g(t.getString(16))}}e.decode=o})(ie||(ie={}));var re;(e=>{e.VERSION_INFO=[{version:0,size:16}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){return f.bytes(e.CURRENT_VERSION.size)}e.measure=n;function r(t,c){t.setEnumValue(ge,0,c.selectedTab)}e.encode=r;function o(t,c){return{selectedTab:g(t.getEnumValue(ge,0))}}e.decode=o})(re||(re={}));var ue;(e=>{e.VERSION_INFO=[{version:0,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.id)).add(f.forString(t.name)).add(f.forString(t.mimeType))}e.measure=n;function r(t,c){let O=0;t.setString(0,c.id),t.setI64(8,c.size),t.setString(16,c.name),t.setString(24,c.mimeType),c.width!==null&&c.width!==void 0&&(O|=1,t.setI32(36,c.width)),c.height!==null&&c.height!==void 0&&(O|=2,t.setI32(40,c.height)),c.fileTokenSize!==null&&c.fileTokenSize!==void 0&&(O|=4,t.setI32(44,c.fileTokenSize)),t.setU8(32,O)}e.encode=r;function o(t,c){const O=t.getU8(32),s=(O&1)!=0,i=(O&2)!=0,u=(O&4)!=0;return a(a(a({id:g(t.getString(0)),size:g(t.getI64(8)),name:g(t.getString(16)),mimeType:g(t.getString(24))},s?{width:g(t.getI32(36))}:{}),i?{height:g(t.getI32(40))}:{}),u?{fileTokenSize:g(t.getI32(44))}:{})}e.decode=o})(ue||(ue={}));var de;(e=>{e.VERSION_INFO=[{version:0,size:40},{version:1,size:48},{version:2,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){var c,O;return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.id)).add(f.forString(t.url)).add(f.forString(t.title)).add(f.forString((c=t.base64favicon)!=null?c:null)).add(f.forString((O=t.selection)!=null?O:null))}e.measure=n;function r(t,c){var s,i;let O=0;t.setString(0,c.id),t.setString(8,c.url),t.setString(16,c.title),t.setString(24,(s=c.base64favicon)!=null?s:null),t.setString(32,(i=c.selection)!=null?i:null),c.blocked!==null&&c.blocked!==void 0&&(O|=1,c.blocked&&(O|=2)),t.setU8(40,O)}e.encode=r;function o(t,c){const O=t.getString(24),s=c>=1?t.getString(32):null,i=c>=2?t.getU8(40):0,u=(i&1)!=0;return a(a(a({id:g(t.getString(0)),url:g(t.getString(8)),title:g(t.getString(16))},O!==null?{base64favicon:O}:{}),s!==null?{selection:s}:{}),u?{blocked:(i&2)!=0}:{})}e.decode=o})(de||(de={}));var Fe;(e=>{function n(o){if(o==="mainPage")return 0;if(o==="sidebar")return 1;throw new J}e.encode=n;function r(o){switch(o){case 0:return"mainPage";case 1:return"sidebar";default:throw new J}}e.decode=r})(Fe||(Fe={}));var ye;(e=>{function n(o){if(o==="none")return 0;if(o==="sent")return 1;if(o==="success")return 2;if(o==="failure")return 3;throw new J}e.encode=n;function r(o){switch(o){case 0:return"none";case 1:return"sent";case 2:return"success";case 3:return"failure";default:return"none"}}e.decode=r})(ye||(ye={}));var ge;(e=>{function n(o){if(o==="answer")return 0;if(o==="web")return 1;if(o==="images")return 2;if(o==="videos")return 3;throw new J}e.encode=n;function r(o){switch(o){case 0:return"answer";case 1:return"web";case 2:return"images";case 3:return"videos";default:return"answer"}}e.decode=r})(ge||(ge={}));var we;(e=>{function n(o){if(o==="default_")return 0;if(o==="blue")return 1;if(o==="green")return 2;if(o==="yellow")return 3;if(o==="purple")return 4;if(o==="pink")return 5;if(o==="orange")return 6;if(o==="black")return 7;throw new J}e.encode=n;function r(o){switch(o){case 0:return"default_";case 1:return"blue";case 2:return"green";case 3:return"yellow";case 4:return"purple";case 5:return"pink";case 6:return"orange";case 7:return"black";default:return"default_"}}e.decode=r})(we||(we={}));var _e;(e=>{function n(o){if(o==="none")return 0;if(o==="startTakeoverFromAgent")return 1;if(o==="endTakeoverFromAgent")return 2;if(o==="stopAgent")return 3;throw new J}e.encode=n;function r(o){switch(o){case 0:return"none";case 1:return"startTakeoverFromAgent";case 2:return"endTakeoverFromAgent";case 3:return"stopAgent";default:return"none"}}e.decode=r})(_e||(_e={}));class P{}F(P,"interfaceName","web.bridge.ConversationController"),F(P,"interfaceVersion",2);(e=>{let n;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size)}d.measure=p;function S(N,b){N.setEnumValue(Fe,0,b.windowStyle)}d.encode=S;function z(N,b){return{windowStyle:g(N.getEnumValue(Fe,0))}}d.decode=z})(n=e.ConversationController_SetWindowStyle_Params||(e.ConversationController_SetWindowStyle_Params={}));let r;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forString(N.modelSlug))}d.measure=p;function S(N,b){N.setString(0,b.modelSlug)}d.encode=S;function z(N,b){return{modelSlug:g(N.getString(0))}}d.decode=z})(r=e.ConversationController_SetModel_Params||(e.ConversationController_SetModel_Params={}));let o;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size)}d.measure=p;function S(N,b){}d.encode=S;function z(N,b){return{}}d.decode=z})(o=e.ConversationController_NewConversation_Params||(e.ConversationController_NewConversation_Params={}));let t;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forString(N.remoteConversationId))}d.measure=p;function S(N,b){N.setString(0,b.remoteConversationId)}d.encode=S;function z(N,b){return{remoteConversationId:g(N.getString(0))}}d.decode=z})(t=e.ConversationController_LoadConversation_Params||(e.ConversationController_LoadConversation_Params={}));let c;(d=>{d.VERSION_INFO=[{version:0,size:32},{version:1,size:40}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forString(N.prompt)).add(f.forStringArray(N.systemHints)).add(f.forString(N.modelSlug))}d.measure=p;function S(N,b){let _=0;N.setString(0,b.prompt),N.setStringArray(8,b.systemHints),N.setString(16,b.modelSlug),b.n7jupdLocalSafeMode!==null&&b.n7jupdLocalSafeMode!==void 0&&(_|=1,b.n7jupdLocalSafeMode&&(_|=2)),N.setU8(24,_)}d.encode=S;function z(N,b){const _=b>=1?N.getU8(24):0,M=(_&1)!=0;return a({prompt:g(N.getString(0)),systemHints:g(Y(N.getStringArray(8))),modelSlug:g(N.getString(16))},M?{n7jupdLocalSafeMode:(_&2)!=0}:{})}d.decode=z})(c=e.ConversationController_RequestCompletion_Params||(e.ConversationController_RequestCompletion_Params={}));let O;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){var b,_;return f.bytes(d.CURRENT_VERSION.size).add(f.forString((b=N.userMessage)!=null?b:null)).add(f.forString((_=N.targetedReply)!=null?_:null))}d.measure=p;function S(N,b){var _,M;N.setString(0,(_=b.userMessage)!=null?_:null),N.setString(8,(M=b.targetedReply)!=null?M:null)}d.encode=S;function z(N,b){const _=N.getString(0),M=N.getString(8);return a(a({},_!==null?{userMessage:_}:{}),M!==null?{targetedReply:M}:{})}d.decode=z})(O=e.ConversationController_PopulatePrompt_Params||(e.ConversationController_PopulatePrompt_Params={}));let s;(d=>{d.VERSION_INFO=[{version:0,size:32},{version:1,size:40},{version:2,size:48}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){var b,_;return f.bytes(d.CURRENT_VERSION.size).add(f.forString(N.url)).add(f.forString(N.title)).add(f.forString((b=N.base64favicon)!=null?b:null)).add(f.forString((_=N.selection)!=null?_:null))}d.measure=p;function S(N,b){var M,ce;let _=0;N.setString(0,b.url),N.setString(8,b.title),N.setString(16,(M=b.base64favicon)!=null?M:null),N.setString(24,(ce=b.selection)!=null?ce:null),b.blocked!==null&&b.blocked!==void 0&&(_|=1,b.blocked&&(_|=2)),N.setU8(32,_)}d.encode=S;function z(N,b){const _=N.getString(16),M=b>=1?N.getString(24):null,ce=b>=2?N.getU8(32):0,Be=(ce&1)!=0;return a(a(a({url:g(N.getString(0)),title:g(N.getString(8))},_!==null?{base64favicon:_}:{}),M!==null?{selection:M}:{}),Be?{blocked:(ce&2)!=0}:{})}d.decode=z})(s=e.ConversationController_UpdateContext_Params||(e.ConversationController_UpdateContext_Params={}));let i;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forObject(ie,N.details))}d.measure=p;function S(N,b){N.setObjectIndirect(ie,0,b.details)}d.encode=S;function z(N,b){return{details:g(N.getObjectIndirect(ie,0))}}d.decode=z})(i=e.ConversationController_PrepareConversation_Params||(e.ConversationController_PrepareConversation_Params={}));let u;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forObject(re,N.options))}d.measure=p;function S(N,b){N.setObjectIndirect(re,0,b.options)}d.encode=S;function z(N,b){return{options:g(N.getObjectIndirect(re,0))}}d.decode=z})(u=e.ConversationController_SetSuperWidgetOptions_Params||(e.ConversationController_SetSuperWidgetOptions_Params={}));let R;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forObjectArray(ue,N.attachments))}d.measure=p;function S(N,b){N.setObjectArray(ue,0,b.attachments)}d.encode=S;function z(N,b){return{attachments:g(Y(N.getObjectArray(ue,0)))}}d.decode=z})(R=e.ConversationController_SetAttachments_Params||(e.ConversationController_SetAttachments_Params={}));let E;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forString(N.to))}d.measure=p;function S(N,b){N.setString(0,b.to)}d.encode=S;function z(N,b){return{to:g(N.getString(0))}}d.decode=z})(E=e.ConversationController_Navigate_Params||(e.ConversationController_Navigate_Params={}));let h;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forObject(W,N.whisperContent))}d.measure=p;function S(N,b){N.setObjectIndirect(W,0,b.whisperContent)}d.encode=S;function z(N,b){return{whisperContent:g(N.getObjectIndirect(W,0))}}d.decode=z})(h=e.ConversationController_SetWhisperContent_Params||(e.ConversationController_SetWhisperContent_Params={}));let I;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forObjectArray(de,N.tabs))}d.measure=p;function S(N,b){N.setObjectArray(de,0,b.tabs)}d.encode=S;function z(N,b){return{tabs:g(Y(N.getObjectArray(de,0)))}}d.decode=z})(I=e.ConversationController_SetTabContext_Params||(e.ConversationController_SetTabContext_Params={}));let V;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forString(N.origin))}d.measure=p;function S(N,b){N.setString(0,b.origin)}d.encode=S;function z(N,b){return{origin:g(N.getString(0))}}d.decode=z})(V=e.ConversationController_SetPromptOrigin_Params||(e.ConversationController_SetPromptOrigin_Params={}));let y;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size)}d.measure=p;function S(N,b){}d.encode=S;function z(N,b){return{}}d.decode=z})(y=e.ConversationController_CloseNavigationSidebar_Params||(e.ConversationController_CloseNavigationSidebar_Params={}));let U;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size)}d.measure=p;function S(N,b){N.setEnumValue(we,0,b.theme)}d.encode=S;function z(N,b){return{theme:g(N.getEnumValue(we,0))}}d.decode=z})(U=e.ConversationController_SetChatTheme_Params||(e.ConversationController_SetChatTheme_Params={}));let w;(d=>{d.VERSION_INFO=[{version:0,size:8}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size)}d.measure=p;function S(N,b){}d.encode=S;function z(N,b){return{}}d.decode=z})(w=e.ConversationController_ShowSearch_Params||(e.ConversationController_ShowSearch_Params={}));let x;(d=>{d.VERSION_INFO=[{version:0,size:24}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forString(N.query)).add(f.forString(N.navlinksEvent))}d.measure=p;function S(N,b){N.setString(0,b.query),N.setString(8,b.navlinksEvent)}d.encode=S;function z(N,b){return{query:g(N.getString(0)),navlinksEvent:g(N.getString(8))}}d.decode=z})(x=e.ConversationController_PopulateNavlinks_Params||(e.ConversationController_PopulateNavlinks_Params={}));let k;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size)}d.measure=p;function S(N,b){N.setEnumValue(_e,0,b.request)}d.encode=S;function z(N,b){return{request:g(N.getEnumValue(_e,0))}}d.decode=z})(k=e.ConversationController_HandleAgentRequest_Params||(e.ConversationController_HandleAgentRequest_Params={}));let Q;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size)}d.measure=p;function S(N,b){N.setEnumValue(L,0,b.preferredMode)}d.encode=S;function z(N,b){return{preferredMode:g(N.getEnumValue(L,0))}}d.decode=z})(Q=e.ConversationController_SetAgentSafeMode_Params||(e.ConversationController_SetAgentSafeMode_Params={}));let X;(d=>{d.VERSION_INFO=[{version:0,size:16}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size)}d.measure=p;function S(N,b){let _=0;b.hasSeenNux&&(_|=1),N.setU8(0,_)}d.encode=S;function z(N,b){return{hasSeenNux:(N.getU8(0)&1)!=0}}d.decode=z})(X=e.ConversationController_SetAgentSafeModeHasSeenNux_Params||(e.ConversationController_SetAgentSafeModeHasSeenNux_Params={}));let G;(d=>{d.VERSION_INFO=[{version:0,size:32}],d.CURRENT_VERSION=d.VERSION_INFO[d.VERSION_INFO.length-1];function p(N){return f.bytes(d.CURRENT_VERSION.size).add(f.forString(N.name)).add(f.forNumericArray(Uint8Array,N.bytes)).add(f.forString(N.mimeType))}d.measure=p;function S(N,b){N.setString(0,b.name),N.setNumericArray(Uint8Array,8,b.bytes),N.setString(16,b.mimeType)}d.encode=S;function z(N,b){return{name:g(N.getString(0)),bytes:g(N.getNumericArray(Uint8Array,8)),mimeType:g(N.getString(16))}}d.decode=z})(G=e.ConversationController_AttachUserFile_Params||(e.ConversationController_AttachUserFile_Params={}));class xe{constructor(p){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(p.endpointState,!0),this._version=2}static create(){const[p,S]=j.createChannel(e);return[new xe(p),S]}static createToBrowser(){const[p,S]=this.create();return Mojo.bindInterface(e.interfaceName,S.pipe.rawHandle),p}setWindowStyle(p){const S={windowStyle:p};this._endpoint.send(T.encode(0,q.None,n,S))}setModel(p){const S={modelSlug:p};this._endpoint.send(T.encode(1,q.None,r,S))}newConversation(){const p={};this._endpoint.send(T.encode(2,q.None,o,p))}loadConversation(p){const S={remoteConversationId:p};this._endpoint.send(T.encode(3,q.None,t,S))}requestCompletion(p,S,z,N){const b={prompt:p,systemHints:S,modelSlug:z,n7jupdLocalSafeMode:N};this._endpoint.send(T.encode(4,q.None,c,b))}populatePrompt(p,S){const z={userMessage:p,targetedReply:S};this._endpoint.send(T.encode(5,q.None,O,z))}updateContext(p,S,z,N,b){const _={url:p,title:S,base64favicon:z,selection:N,blocked:b};this._endpoint.send(T.encode(6,q.None,s,_))}prepareConversation(p){const S={details:p};this._endpoint.send(T.encode(7,q.None,i,S))}setSuperWidgetOptions(p){const S={options:p};this._endpoint.send(T.encode(8,q.None,u,S))}setAttachments(p){const S={attachments:p};this._endpoint.send(T.encode(9,q.None,R,S))}navigate(p){const S={to:p};this._endpoint.send(T.encode(10,q.None,E,S))}setWhisperContent(p){const S={whisperContent:p};this._endpoint.send(T.encode(11,q.None,h,S))}setTabContext(p){const S={tabs:p};this._endpoint.send(T.encode(12,q.None,I,S))}setPromptOrigin(p){const S={origin:p};this._endpoint.send(T.encode(13,q.None,V,S))}closeNavigationSidebar(){const p={};this._endpoint.send(T.encode(14,q.None,y,p))}setChatTheme(p){const S={theme:p};this._endpoint.send(T.encode(15,q.None,U,S))}showSearch(){const p={};this._endpoint.send(T.encode(16,q.None,w,p))}populateNavlinks(p,S){const z={query:p,navlinksEvent:S};this._endpoint.send(T.encode(17,q.None,x,z))}handleAgentRequest(p){const S={request:p};this._endpoint.send(T.encode(18,q.None,k,S))}setAgentSafeMode(p){const S={preferredMode:p};this._endpoint.send(T.encode(19,q.None,Q,S))}setAgentSafeModeHasSeenNux(p){const S={hasSeenNux:p};this._endpoint.send(T.encode(20,q.None,X,S))}attachUserFile(p,S,z){const N={name:p,bytes:S,mimeType:z};this._endpoint.send(T.encode(21,q.None,G,N))}}e.Proxy=xe;class $e extends B{constructor(){super(e);F(this,"onDisconnect")}bind(S,z){this.addReceiver(z,async(N,b)=>{switch(N.header.ordinal){case 0:{const _=N.decode(n);S.setWindowStyle(_.windowStyle);break}case 1:{const _=N.decode(r);S.setModel(_.modelSlug);break}case 2:{N.decode(o),S.newConversation();break}case 3:{const _=N.decode(t);S.loadConversation(_.remoteConversationId);break}case 4:{const _=N.decode(c);S.requestCompletion(_.prompt,_.systemHints,_.modelSlug,_.n7jupdLocalSafeMode);break}case 5:{const _=N.decode(O);S.populatePrompt(_.userMessage,_.targetedReply);break}case 6:{const _=N.decode(s);S.updateContext(_.url,_.title,_.base64favicon,_.selection,_.blocked);break}case 7:{const _=N.decode(i);S.prepareConversation(_.details);break}case 8:{const _=N.decode(u);S.setSuperWidgetOptions(_.options);break}case 9:{const _=N.decode(R);S.setAttachments(_.attachments);break}case 10:{const _=N.decode(E);S.navigate(_.to);break}case 11:{const _=N.decode(h);S.setWhisperContent(_.whisperContent);break}case 12:{const _=N.decode(I);S.setTabContext(_.tabs);break}case 13:{const _=N.decode(V);S.setPromptOrigin(_.origin);break}case 14:{N.decode(y),S.closeNavigationSidebar();break}case 15:{const _=N.decode(U);S.setChatTheme(_.theme);break}case 16:{N.decode(w),S.showSearch();break}case 17:{const _=N.decode(x);S.populateNavlinks(_.query,_.navlinksEvent);break}case 18:{const _=N.decode(k);S.handleAgentRequest(_.request);break}case 19:{const _=N.decode(Q);S.setAgentSafeMode(_.preferredMode);break}case 20:{const _=N.decode(X);S.setAgentSafeModeHasSeenNux(_.hasSeenNux);break}case 21:{const _=N.decode(G);S.attachUserFile(_.name,_.bytes,_.mimeType);break}default:N.header.expectsResponse&&b.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(S)})}createRemote(S){const[z,N]=j.createChannel(e);return this.bind(S,N),z}}e.Dispatcher=$e})(P||(P={}));class Ue{}F(Ue,"interfaceName","web.bridge.GenericInterface"),F(Ue,"interfaceVersion",0);(e=>{let n;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(u){return f.bytes(c.CURRENT_VERSION.size).add(f.forString(u.request))}c.measure=O;function s(u,R){u.setString(0,R.request)}c.encode=s;function i(u,R){return{request:g(u.getString(0))}}c.decode=i})(n=e.GenericInterface_AcceptMessage_Params||(e.GenericInterface_AcceptMessage_Params={}));let r;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function O(u){var R;return f.bytes(c.CURRENT_VERSION.size).add(f.forString((R=u.response)!=null?R:null))}c.measure=O;function s(u,R){var E;u.setString(0,(E=R.response)!=null?E:null)}c.encode=s;function i(u,R){const E=u.getString(0);return a({},E!==null?{response:E}:{})}c.decode=i})(r=e.GenericInterface_AcceptMessage_ResponseParams||(e.GenericInterface_AcceptMessage_ResponseParams={}));class o{constructor(O){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(O.endpointState,!0),this._version=0}static create(){const[O,s]=j.createChannel(e);return[new o(O),s]}static createToBrowser(){const[O,s]=this.create();return Mojo.bindInterface(e.interfaceName,s.pipe.rawHandle),O}async acceptMessage(O){const s={request:O};return(await this._endpoint.sendAndAwaitResponse(T.encode(0,q.None,n,s))).decode(r).response}}e.Proxy=o;class t extends B{constructor(){super(e);F(this,"onDisconnect")}bind(s,i){this.addReceiver(i,async(u,R)=>{switch(u.header.ordinal){case 0:{const E=u.decode(n),h=s.acceptMessage(E.request),I=R.createResponder(r,0,u.header.requestID),V=await h;I({response:V});break}default:u.header.expectsResponse&&R.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(s)})}createRemote(s){const[i,u]=j.createChannel(e);return this.bind(s,u),i}}e.Dispatcher=t})(Ue||(Ue={}));class fe{}F(fe,"interfaceName","web.bridge.LinkHandler"),F(fe,"interfaceVersion",0);(e=>{let n;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function c(i){return f.bytes(t.CURRENT_VERSION.size).add(f.forString(i.url)).add(f.forString(i.target))}t.measure=c;function O(i,u){i.setString(0,u.url),i.setString(8,u.target)}t.encode=O;function s(i,u){return{url:g(i.getString(0)),target:g(i.getString(8))}}t.decode=s})(n=e.LinkHandler_HandleLink_Params||(e.LinkHandler_HandleLink_Params={}));class r{constructor(c){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(c.endpointState,!0),this._version=0}static create(){const[c,O]=j.createChannel(e);return[new r(c),O]}static createToBrowser(){const[c,O]=this.create();return Mojo.bindInterface(e.interfaceName,O.pipe.rawHandle),c}handleLink(c,O){const s={url:c,target:O};this._endpoint.send(T.encode(0,q.None,n,s))}}e.Proxy=r;class o extends B{constructor(){super(e);F(this,"onDisconnect")}bind(O,s){this.addReceiver(s,async(i,u)=>{switch(i.header.ordinal){case 0:{const R=i.decode(n);O.handleLink(R.url,R.target);break}default:i.header.expectsResponse&&u.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(O)})}createRemote(O){const[s,i]=j.createChannel(e);return this.bind(O,i),s}}e.Dispatcher=o})(fe||(fe={}));var oe;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.author)).add(f.forString(t.message))}e.measure=n;function r(t,c){t.setString(0,c.author),t.setString(8,c.message)}e.encode=r;function o(t,c){return{author:g(t.getString(0)),message:g(t.getString(8))}}e.decode=o})(oe||(oe={}));class te{}F(te,"interfaceName","web.bridge.LocalToolHandler"),F(te,"interfaceVersion",0);(e=>{let n;(s=>{s.VERSION_INFO=[{version:0,size:24}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){return f.bytes(s.CURRENT_VERSION.size).add(f.forString(E.toolname)).add(f.forString(E.args))}s.measure=i;function u(E,h){E.setString(0,h.toolname),E.setString(8,h.args)}s.encode=u;function R(E,h){return{toolname:g(E.getString(0)),args:g(E.getString(8))}}s.decode=R})(n=e.LocalToolHandler_CallLocalTool_Params||(e.LocalToolHandler_CallLocalTool_Params={}));let r;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){return f.bytes(s.CURRENT_VERSION.size).add(f.forObjectArray(oe,E.response))}s.measure=i;function u(E,h){E.setObjectArray(oe,0,h.response)}s.encode=u;function R(E,h){return{response:g(Y(E.getObjectArray(oe,0)))}}s.decode=R})(r=e.LocalToolHandler_CallLocalTool_ResponseParams||(e.LocalToolHandler_CallLocalTool_ResponseParams={}));let o;(s=>{s.VERSION_INFO=[{version:0,size:8}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){return f.bytes(s.CURRENT_VERSION.size)}s.measure=i;function u(E,h){}s.encode=u;function R(E,h){return{}}s.decode=R})(o=e.LocalToolHandler_GetToolNames_Params||(e.LocalToolHandler_GetToolNames_Params={}));let t;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){return f.bytes(s.CURRENT_VERSION.size).add(f.forStringArray(E.toolnames))}s.measure=i;function u(E,h){E.setStringArray(0,h.toolnames)}s.encode=u;function R(E,h){return{toolnames:g(Y(E.getStringArray(0)))}}s.decode=R})(t=e.LocalToolHandler_GetToolNames_ResponseParams||(e.LocalToolHandler_GetToolNames_ResponseParams={}));class c{constructor(i){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(i.endpointState,!0),this._version=0}static create(){const[i,u]=j.createChannel(e);return[new c(i),u]}static createToBrowser(){const[i,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),i}async callLocalTool(i,u){const R={toolname:i,args:u};return(await this._endpoint.sendAndAwaitResponse(T.encode(0,q.None,n,R))).decode(r).response}async getToolNames(){const i={};return(await this._endpoint.sendAndAwaitResponse(T.encode(1,q.None,o,i))).decode(t).toolnames}}e.Proxy=c;class O extends B{constructor(){super(e);F(this,"onDisconnect")}bind(u,R){this.addReceiver(R,async(E,h)=>{switch(E.header.ordinal){case 0:{const I=E.decode(n),V=u.callLocalTool(I.toolname,I.args),y=h.createResponder(r,0,E.header.requestID),U=await V;y({response:U});break}case 1:{E.decode(o);const I=u.getToolNames(),V=h.createResponder(t,1,E.header.requestID),y=await I;V({toolnames:y});break}default:E.header.expectsResponse&&h.sendUnimplementedResponse(E.header.requestID,E.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[R,E]=j.createChannel(e);return this.bind(u,E),R}}e.Dispatcher=O})(te||(te={}));var Z;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){var c;return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.clientId)).add(f.forString((c=t.serverId)!=null?c:null))}e.measure=n;function r(t,c){var O;t.setString(0,c.clientId),t.setString(8,(O=c.serverId)!=null?O:null)}e.encode=r;function o(t,c){const O=t.getString(8);return a({clientId:g(t.getString(0))},O!==null?{serverId:O}:{})}e.decode=o})(Z||(Z={}));var v;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){var c;return f.bytes(e.CURRENT_VERSION.size).add(f.forString((c=t.title)!=null?c:null))}e.measure=n;function r(t,c){var s;let O=0;t.setString(0,(s=c.title)!=null?s:null),c.updateTimestampMsSince1970!==null&&c.updateTimestampMsSince1970!==void 0&&(O|=1,t.setF64(16,c.updateTimestampMsSince1970)),c.status!==null&&c.status!==void 0&&(O|=2,t.setEnumValue(ze,12,c.status)),t.setU8(8,O)}e.encode=r;function o(t,c){const O=t.getString(0),s=t.getU8(8),i=(s&1)!=0,u=(s&2)!=0;return a(a(a({},O!==null?{title:O}:{}),i?{updateTimestampMsSince1970:g(t.getF64(16))}:{}),u?{status:g(t.getEnumValue(ze,12))}:{})}e.decode=o})(v||(v={}));var ze;(e=>{function n(o){if(o==="none")return 0;if(o==="inProgress")return 1;if(o==="done")return 2;throw new J}e.encode=n;function r(o){switch(o){case 0:return"none";case 1:return"inProgress";case 2:return"done";default:return"none"}}e.decode=r})(ze||(ze={}));class he{}F(he,"interfaceName","web.bridge.NavigationSidebarController"),F(he,"interfaceVersion",0);(e=>{let n;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function E(V){return f.bytes(R.CURRENT_VERSION.size)}R.measure=E;function h(V,y){let U=0;y.visible&&(U|=1),V.setU8(0,U)}R.encode=h;function I(V,y){return{visible:(V.getU8(0)&1)!=0}}R.decode=I})(n=e.NavigationSidebarController_SetSidebarVisibility_Params||(e.NavigationSidebarController_SetSidebarVisibility_Params={}));let r;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function E(V){return f.bytes(R.CURRENT_VERSION.size)}R.measure=E;function h(V,y){}R.encode=h;function I(V,y){return{}}R.decode=I})(r=e.NavigationSidebarController_ToggleSidebarVisibility_Params||(e.NavigationSidebarController_ToggleSidebarVisibility_Params={}));let o;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function E(V){return f.bytes(R.CURRENT_VERSION.size)}R.measure=E;function h(V,y){}R.encode=h;function I(V,y){return{}}R.decode=I})(o=e.NavigationSidebarController_NewConversation_Params||(e.NavigationSidebarController_NewConversation_Params={}));let t;(R=>{R.VERSION_INFO=[{version:0,size:24}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function E(V){return f.bytes(R.CURRENT_VERSION.size).add(f.forObject(Z,V.id)).add(f.forObject(v,V.data))}R.measure=E;function h(V,y){V.setObjectIndirect(Z,0,y.id),V.setObjectIndirect(v,8,y.data)}R.encode=h;function I(V,y){return{id:g(V.getObjectIndirect(Z,0)),data:g(V.getObjectIndirect(v,8))}}R.decode=I})(t=e.NavigationSidebarController_AddConversationHistoryItem_Params||(e.NavigationSidebarController_AddConversationHistoryItem_Params={}));let c;(R=>{R.VERSION_INFO=[{version:0,size:24}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function E(V){return f.bytes(R.CURRENT_VERSION.size).add(f.forObject(Z,V.id)).add(f.forObject(v,V.data))}R.measure=E;function h(V,y){V.setObjectIndirect(Z,0,y.id),V.setObjectIndirect(v,8,y.data)}R.encode=h;function I(V,y){return{id:g(V.getObjectIndirect(Z,0)),data:g(V.getObjectIndirect(v,8))}}R.decode=I})(c=e.NavigationSidebarController_UpdateConversationHistoryItem_Params||(e.NavigationSidebarController_UpdateConversationHistoryItem_Params={}));let O;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function E(V){return f.bytes(R.CURRENT_VERSION.size)}R.measure=E;function h(V,y){}R.encode=h;function I(V,y){return{}}R.decode=I})(O=e.NavigationSidebarController_GetSidebarVisibility_Params||(e.NavigationSidebarController_GetSidebarVisibility_Params={}));let s;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function E(V){return f.bytes(R.CURRENT_VERSION.size)}R.measure=E;function h(V,y){let U=0;y.visible&&(U|=1),V.setU8(0,U)}R.encode=h;function I(V,y){return{visible:(V.getU8(0)&1)!=0}}R.decode=I})(s=e.NavigationSidebarController_GetSidebarVisibility_ResponseParams||(e.NavigationSidebarController_GetSidebarVisibility_ResponseParams={}));class i{constructor(E){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(E.endpointState,!0),this._version=0}static create(){const[E,h]=j.createChannel(e);return[new i(E),h]}static createToBrowser(){const[E,h]=this.create();return Mojo.bindInterface(e.interfaceName,h.pipe.rawHandle),E}setSidebarVisibility(E){const h={visible:E};this._endpoint.send(T.encode(0,q.None,n,h))}toggleSidebarVisibility(){const E={};this._endpoint.send(T.encode(1,q.None,r,E))}newConversation(){const E={};this._endpoint.send(T.encode(2,q.None,o,E))}addConversationHistoryItem(E,h){const I={id:E,data:h};this._endpoint.send(T.encode(3,q.None,t,I))}updateConversationHistoryItem(E,h){const I={id:E,data:h};this._endpoint.send(T.encode(4,q.None,c,I))}async getSidebarVisibility(){const E={};return(await this._endpoint.sendAndAwaitResponse(T.encode(5,q.None,O,E))).decode(s).visible}}e.Proxy=i;class u extends B{constructor(){super(e);F(this,"onDisconnect")}bind(h,I){this.addReceiver(I,async(V,y)=>{switch(V.header.ordinal){case 0:{const U=V.decode(n);h.setSidebarVisibility(U.visible);break}case 1:{V.decode(r),h.toggleSidebarVisibility();break}case 2:{V.decode(o),h.newConversation();break}case 3:{const U=V.decode(t);h.addConversationHistoryItem(U.id,U.data);break}case 4:{const U=V.decode(c);h.updateConversationHistoryItem(U.id,U.data);break}case 5:{V.decode(O);const U=h.getSidebarVisibility(),w=y.createResponder(s,5,V.header.requestID),x=await U;w({visible:x});break}default:V.header.expectsResponse&&y.sendUnimplementedResponse(V.header.requestID,V.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(h)})}createRemote(h){const[I,V]=j.createChannel(e);return this.bind(h,V),I}}e.Dispatcher=u})(he||(he={}));var Te;(e=>{function n(o){if(o==="general")return 0;if(o==="personalization")return 1;if(o==="searchEngines")return 2;if(o==="dataControls")return 3;if(o==="modelTraining")return 4;if(o==="autofill")return 5;throw new J}e.encode=n;function r(o){switch(o){case 0:return"general";case 1:return"personalization";case 2:return"searchEngines";case 3:return"dataControls";case 4:return"modelTraining";case 5:return"autofill";default:return"general"}}e.decode=r})(Te||(Te={}));class Ve{}F(Ve,"interfaceName","web.bridge.OpenSettingsController"),F(Ve,"interfaceVersion",0);(e=>{let n;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function c(i){return f.bytes(t.CURRENT_VERSION.size)}t.measure=c;function O(i,u){let R=0;u.tab!==null&&u.tab!==void 0&&(R|=1,i.setEnumValue(Te,4,u.tab)),i.setU8(0,R)}t.encode=O;function s(i,u){const E=(i.getU8(0)&1)!=0;return a({},E?{tab:g(i.getEnumValue(Te,4))}:{})}t.decode=s})(n=e.OpenSettingsController_OpenSettings_Params||(e.OpenSettingsController_OpenSettings_Params={}));class r{constructor(c){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(c.endpointState,!0),this._version=0}static create(){const[c,O]=j.createChannel(e);return[new r(c),O]}static createToBrowser(){const[c,O]=this.create();return Mojo.bindInterface(e.interfaceName,O.pipe.rawHandle),c}openSettings(c){const O={tab:c};this._endpoint.send(T.encode(0,q.None,n,O))}}e.Proxy=r;class o extends B{constructor(){super(e);F(this,"onDisconnect")}bind(O,s){this.addReceiver(s,async(i,u)=>{switch(i.header.ordinal){case 0:{const R=i.decode(n);O.openSettings(R.tab);break}default:i.header.expectsResponse&&u.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(O)})}createRemote(O){const[s,i]=j.createChannel(e);return this.bind(O,i),s}}e.Dispatcher=o})(Ve||(Ve={}));var qe;(e=>{function n(o){if(o==="messageSent")return 0;if(o==="addTabContext")return 1;if(o==="removeTabContext")return 2;throw new J}e.encode=n;function r(o){switch(o){case 0:return"messageSent";case 1:return"addTabContext";case 2:return"removeTabContext";default:return"messageSent"}}e.decode=r})(qe||(qe={}));class Se{}F(Se,"interfaceName","web.bridge.ProductEventHandler"),F(Se,"interfaceVersion",0);(e=>{let n;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function c(i){return f.bytes(t.CURRENT_VERSION.size)}t.measure=c;function O(i,u){i.setEnumValue(qe,0,u.eventName)}t.encode=O;function s(i,u){return{eventName:g(i.getEnumValue(qe,0))}}t.decode=s})(n=e.ProductEventHandler_TriggerProductEvent_Params||(e.ProductEventHandler_TriggerProductEvent_Params={}));class r{constructor(c){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(c.endpointState,!0),this._version=0}static create(){const[c,O]=j.createChannel(e);return[new r(c),O]}static createToBrowser(){const[c,O]=this.create();return Mojo.bindInterface(e.interfaceName,O.pipe.rawHandle),c}triggerProductEvent(c){const O={eventName:c};this._endpoint.send(T.encode(0,q.None,n,O))}}e.Proxy=r;class o extends B{constructor(){super(e);F(this,"onDisconnect")}bind(O,s){this.addReceiver(s,async(i,u)=>{switch(i.header.ordinal){case 0:{const R=i.decode(n);O.triggerProductEvent(R.eventName);break}default:i.header.expectsResponse&&u.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(O)})}createRemote(O){const[s,i]=j.createChannel(e);return this.bind(O,i),s}}e.Dispatcher=o})(Se||(Se={}));class A{}F(A,"interfaceName","web.bridge.DesktopSidebarController"),F(A,"interfaceVersion",0);(e=>{let n;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(h){return f.bytes(i.CURRENT_VERSION.size)}i.measure=u;function R(h,I){}i.encode=R;function E(h,I){return{}}i.decode=E})(n=e.DesktopSidebarController_CloseSidebar_Params||(e.DesktopSidebarController_CloseSidebar_Params={}));let r;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(h){return f.bytes(i.CURRENT_VERSION.size)}i.measure=u;function R(h,I){}i.encode=R;function E(h,I){return{}}i.decode=E})(r=e.DesktopSidebarController_CanHideHeader_Params||(e.DesktopSidebarController_CanHideHeader_Params={}));let o;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(h){return f.bytes(i.CURRENT_VERSION.size)}i.measure=u;function R(h,I){let V=0;I.canHideHeader&&(V|=1),h.setU8(0,V)}i.encode=R;function E(h,I){return{canHideHeader:(h.getU8(0)&1)!=0}}i.decode=E})(o=e.DesktopSidebarController_CanHideHeader_ResponseParams||(e.DesktopSidebarController_CanHideHeader_ResponseParams={}));let t;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(h){return f.bytes(i.CURRENT_VERSION.size)}i.measure=u;function R(h,I){}i.encode=R;function E(h,I){return{}}i.decode=E})(t=e.DesktopSidebarController_BecomeMainPage_Params||(e.DesktopSidebarController_BecomeMainPage_Params={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(h){return f.bytes(i.CURRENT_VERSION.size)}i.measure=u;function R(h,I){}i.encode=R;function E(h,I){return{}}i.decode=E})(c=e.DesktopSidebarController_OpenInNewTab_Params||(e.DesktopSidebarController_OpenInNewTab_Params={}));class O{constructor(u){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(u.endpointState,!0),this._version=0}static create(){const[u,R]=j.createChannel(e);return[new O(u),R]}static createToBrowser(){const[u,R]=this.create();return Mojo.bindInterface(e.interfaceName,R.pipe.rawHandle),u}closeSidebar(){const u={};this._endpoint.send(T.encode(0,q.None,n,u))}async canHideHeader(){const u={};return(await this._endpoint.sendAndAwaitResponse(T.encode(1,q.None,r,u))).decode(o).canHideHeader}becomeMainPage(){const u={};this._endpoint.send(T.encode(2,q.None,t,u))}openInNewTab(){const u={};this._endpoint.send(T.encode(3,q.None,c,u))}}e.Proxy=O;class s extends B{constructor(){super(e);F(this,"onDisconnect")}bind(R,E){this.addReceiver(E,async(h,I)=>{switch(h.header.ordinal){case 0:{h.decode(n),R.closeSidebar();break}case 1:{h.decode(r);const V=R.canHideHeader(),y=I.createResponder(o,1,h.header.requestID),U=await V;y({canHideHeader:U});break}case 2:{h.decode(t),R.becomeMainPage();break}case 3:{h.decode(c),R.openInNewTab();break}default:h.header.expectsResponse&&I.sendUnimplementedResponse(h.header.requestID,h.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(R)})}createRemote(R){const[E,h]=j.createChannel(e);return this.bind(R,h),E}}e.Dispatcher=s})(A||(A={}));var Ne;(e=>{e.VERSION_INFO=[{version:0,size:8}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){return f.bytes(e.CURRENT_VERSION.size)}e.measure=n;function r(t,c){}e.encode=r;function o(t,c){return{}}e.decode=o})(Ne||(Ne={}));var Re;(e=>{e.VERSION_INFO=[{version:0,size:48}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.id)).add(f.forString(t.fileid)).add(f.forString(t.name)).add(f.forString(t.mimetype))}e.measure=n;function r(t,c){t.setString(0,c.id),t.setString(8,c.fileid),t.setString(16,c.name),t.setU32(24,c.size),t.setString(32,c.mimetype)}e.encode=r;function o(t,c){return{id:g(t.getString(0)),fileid:g(t.getString(8)),name:g(t.getString(16)),size:g(t.getU32(24)),mimetype:g(t.getString(32))}}e.decode=o})(Re||(Re={}));var Ie;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.assetPointer))}e.measure=n;function r(t,c){t.setString(0,c.assetPointer),t.setU32(8,c.sizeBytes),t.setU32(12,c.width),t.setU32(16,c.height)}e.encode=r;function o(t,c){return{assetPointer:g(t.getString(0)),sizeBytes:g(t.getU32(8)),width:g(t.getU32(12)),height:g(t.getU32(16))}}e.decode=o})(Ie||(Ie={}));var Oe;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){var c,O,s;return f.bytes(e.CURRENT_VERSION.size).add(f.forString((c=t.content)!=null?c:null)).add(f.forString((O=t.url)!=null?O:null)).add(f.forString((s=t.title)!=null?s:null))}e.measure=n;function r(t,c){var O,s,i;t.setString(0,(O=c.content)!=null?O:null),t.setString(8,(s=c.url)!=null?s:null),t.setString(16,(i=c.title)!=null?i:null)}e.encode=r;function o(t,c){const O=t.getString(0),s=t.getString(8),i=t.getString(16);return a(a(a({},O!==null?{content:O}:{}),s!==null?{url:s}:{}),i!==null?{title:i}:{})}e.decode=o})(Oe||(Oe={}));var W;(e=>{e.VERSION_INFO=[{version:0,size:32},{version:1,size:48}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){var c,O,s,i,u;return f.bytes(e.CURRENT_VERSION.size).add(f.forString((c=t.content)!=null?c:null)).add(f.forObjectArray(Re,(O=t.files)!=null?O:null)).add(f.forObjectArray(Ie,(s=t.imageAssetPointers)!=null?s:null)).add(f.forObjectArray(Oe,(i=t.embeddedDocumentContexts)!=null?i:null)).add(f.forString((u=t.customInstructions)!=null?u:null))}e.measure=n;function r(t,c){var O,s,i,u,R;t.setString(0,(O=c.content)!=null?O:null),t.setObjectArray(Re,8,(s=c.files)!=null?s:null),t.setObjectArray(Ie,16,(i=c.imageAssetPointers)!=null?i:null),t.setObjectArray(Oe,24,(u=c.embeddedDocumentContexts)!=null?u:null),t.setString(32,(R=c.customInstructions)!=null?R:null)}e.encode=r;function o(t,c){const O=t.getString(0),s=Y(t.getObjectArray(Re,8)),i=Y(t.getObjectArray(Ie,16)),u=c>=1?Y(t.getObjectArray(Oe,24)):null,R=c>=1?t.getString(32):null;return a(a(a(a(a({},O!==null?{content:O}:{}),s!==null?{files:s}:{}),i!==null?{imageAssetPointers:i}:{}),u!==null?{embeddedDocumentContexts:u}:{}),R!==null?{customInstructions:R}:{})}e.decode=o})(W||(W={}));var Ee;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function n(t){return f.bytes(e.CURRENT_VERSION.size).add(f.forString(t.base64image)).add(f.forString(t.mimetype)).add(f.forString(t.filename))}e.measure=n;function r(t,c){t.setString(0,c.base64image),t.setString(8,c.mimetype),t.setString(16,c.filename)}e.encode=r;function o(t,c){return{base64image:g(t.getString(0)),mimetype:g(t.getString(8)),filename:g(t.getString(16))}}e.decode=o})(Ee||(Ee={}));class ne{}F(ne,"interfaceName","web.bridge.WhisperContentProvider"),F(ne,"interfaceVersion",0);(e=>{let n;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){var h;return f.bytes(s.CURRENT_VERSION.size).add(f.forObject(Ne,(h=E.options)!=null?h:null))}s.measure=i;function u(E,h){var I;E.setObjectIndirect(Ne,0,(I=h.options)!=null?I:null)}s.encode=u;function R(E,h){const I=E.getObjectIndirect(Ne,0);return a({},I!==null?{options:I}:{})}s.decode=R})(n=e.WhisperContentProvider_GetWhisperContent_Params||(e.WhisperContentProvider_GetWhisperContent_Params={}));let r;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){var h;return f.bytes(s.CURRENT_VERSION.size).add(f.forObject(W,(h=E.content)!=null?h:null))}s.measure=i;function u(E,h){var I;E.setObjectIndirect(W,0,(I=h.content)!=null?I:null)}s.encode=u;function R(E,h){const I=E.getObjectIndirect(W,0);return a({},I!==null?{content:I}:{})}s.decode=R})(r=e.WhisperContentProvider_GetWhisperContent_ResponseParams||(e.WhisperContentProvider_GetWhisperContent_ResponseParams={}));let o;(s=>{s.VERSION_INFO=[{version:0,size:8}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){return f.bytes(s.CURRENT_VERSION.size)}s.measure=i;function u(E,h){}s.encode=u;function R(E,h){return{}}s.decode=R})(o=e.WhisperContentProvider_GetTabScreenshot_Params||(e.WhisperContentProvider_GetTabScreenshot_Params={}));let t;(s=>{s.VERSION_INFO=[{version:0,size:16}],s.CURRENT_VERSION=s.VERSION_INFO[s.VERSION_INFO.length-1];function i(E){var h;return f.bytes(s.CURRENT_VERSION.size).add(f.forObject(Ee,(h=E.screenshot)!=null?h:null))}s.measure=i;function u(E,h){var I;E.setObjectIndirect(Ee,0,(I=h.screenshot)!=null?I:null)}s.encode=u;function R(E,h){const I=E.getObjectIndirect(Ee,0);return a({},I!==null?{screenshot:I}:{})}s.decode=R})(t=e.WhisperContentProvider_GetTabScreenshot_ResponseParams||(e.WhisperContentProvider_GetTabScreenshot_ResponseParams={}));class c{constructor(i){F(this,"_endpoint");F(this,"_version");this._endpoint=new $(i.endpointState,!0),this._version=0}static create(){const[i,u]=j.createChannel(e);return[new c(i),u]}static createToBrowser(){const[i,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),i}async getWhisperContent(i){const u={options:i};return(await this._endpoint.sendAndAwaitResponse(T.encode(0,q.None,n,u))).decode(r).content}async getTabScreenshot(){const i={};return(await this._endpoint.sendAndAwaitResponse(T.encode(1,q.None,o,i))).decode(t).screenshot}}e.Proxy=c;class O extends B{constructor(){super(e);F(this,"onDisconnect")}bind(u,R){this.addReceiver(R,async(E,h)=>{switch(E.header.ordinal){case 0:{const I=E.decode(n),V=u.getWhisperContent(I.options),y=h.createResponder(r,0,E.header.requestID),U=await V;y({content:U});break}case 1:{E.decode(o);const I=u.getTabScreenshot(),V=h.createResponder(t,1,E.header.requestID),y=await I;V({screenshot:y});break}default:E.header.expectsResponse&&h.sendUnimplementedResponse(E.header.requestID,E.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[R,E]=j.createChannel(e);return this.bind(u,E),R}}e.Dispatcher=O})(ne||(ne={}));class le{constructor(n){F(this,"dispatcher");this.dispatcher=new H.Dispatcher,this.dispatcher.bind(this,n)}refreshSessionContext(n,r){m.authSessionContext={authToken:n,behavior:r},m.wantsAuthSessionContext$.set(!0)}}function Ae(e){return e==="none"||e==="sent"||e==="success"||e==="failure"}class He{constructor(n,r,o){F(this,"prepareState");F(this,"lastPrepareTimestamp");F(this,"conduitToken");this.prepareState=Ae(n)?n:"none",this.lastPrepareTimestamp=r-performance.timeOrigin,this.conduitToken=o}}class Pe{constructor(n){F(this,"dispatcher");this.dispatcher=new P.Dispatcher,this.dispatcher.bind(this,n)}closeNavigationSidebar(){We.setSidebarOpen(!1)}setChatTheme(n){const r=n==="default_"?"default":n;m.chatTheme=r,m.wantsSetChatTheme$.set(!0)}showSearch(){throw new Error("Method not implemented.")}setWindowStyle(n){m.windowStyle$.set(n)}setModel(n){m.wantsModelSlug$.set(n)}newConversation(){m.wantsNewConversation$.set(!0),m.selectedConversationId$.set(void 0)}loadConversation(n){m.wantsNewConversation$.set(!1),m.selectedConversationId$.set(n)}requestCompletion(n,r,o,t){m.requestCompletion={prompt:n,systemHints:r,modelSlug:o,n7jupdLocalSafeMode:t!=null?t:void 0},m.wantsRequestCompletion$.set(!0)}populatePrompt(n,r){m.populatePrompt={userMessage:n!=null?n:null,targetedReply:r!=null?r:null},m.wantsPopulatePrompt$.set(!0)}updateContext(n,r,o,t,c){m.context$.set({id:n,url:n,title:r,base64favicon:o,selection:t,blocked:c})}prepareConversation(n){var r;m.prepareConversationDetails=new He(n.prepareState,n.lastPrepareTimestampMsSince1970,(r=n.conduitToken)!=null?r:void 0)}setSuperWidgetOptions(n){const r=Qe(n.selectedTab);m.wantsInitialTab$.set(r)}setAttachments(n){m.attachments=n.map(r=>{const{id:o,name:t,size:c,mimeType:O,width:s,height:i,fileTokenSize:u}=r;return a(a(a(a(a(a(a({},o&&{id:o}),t&&{name:t}),c&&{size:typeof c=="bigint"?Number(c):c}),O&&{mime_type:O}),s&&{width:s}),i&&{height:i}),u&&{file_token_size:u})})}attachUserFile(n,r,o){m.attachUserFileRequest={name:n,bytes:r,mimeType:o},m.wantsAttachUserFile$.set(!0)}setWhisperContent(n){m.whisperContent=n}setTabContext(n){m.tabContext=n}setPromptOrigin(n){m.promptOrigin=n}navigate(n){Xe(n)}populateNavlinks(n,r){const o=JSON.parse(r);Ye.getState().updateFromEvent(n,o)}setAgentSafeMode(n){me(n)}setAgentSafeModeHasSeenNux(n){De(n)}handleAgentRequest(n){m.agentRequest=n,m.wantsHandleAgentRequest$.set(!0)}}const Ce=6e4;class et{constructor(n,r){F(this,"host");F(this,"logger");F(this,"lastMissingAuthTime",0);this.host=n,this.logger=r}async getAccountID(){return await this.host.getAccountID()}onMissingSessionAuth(){const n=Date.now();if(n-this.lastMissingAuthTime>Ce){this.lastMissingAuthTime=n;const[r,o]=C.Proxy.create();this.bindReceiver(o),this.logger.notice("onMissingSessionAuth.invoked"),r.handleMissingSessionAuth()}}recordAvailableSessionAuth(){const[n,r]=C.Proxy.create();this.bindReceiver(r),this.logger.notice("recordAvailableSessionAuth.invoked"),n.recordAvailableSessionAuth()}tryOpenAgentViewer(n){const[r,o]=K.Proxy.create();return this.bindReceiver(o),r.tryOpenAgentViewer(n)}agentConversationStopped(n,r=!1){const[o,t]=K.Proxy.create();this.bindReceiver(t),o.agentConversationStopped(n,r)}userSentMessageInAgentConversation(n){const[r,o]=K.Proxy.create();this.bindReceiver(o),r.userSentMessageInAgentConversation(n)}userStoppedAgentConversation(n){const[r,o]=K.Proxy.create();this.bindReceiver(o),r.userStoppedAgentConversation(n)}openAgentTabs(n,r){const[o,t]=K.Proxy.create();this.bindReceiver(t),o.openAgentTabs(n,r)}getClientID(){const[n,r]=K.Proxy.create();return this.bindReceiver(r),n.getClientID()}getAgentStatus(n){const[r,o]=K.Proxy.create();return this.bindReceiver(o),r.getAgentStatus(n)}becomeMainPage(){const[n,r]=A.Proxy.create();this.bindReceiver(r),n.becomeMainPage()}openInNewTab(){const[n,r]=A.Proxy.create();this.bindReceiver(r),n.openInNewTab()}updateAgentSafeMode(n){const[r,o]=l.Proxy.create();this.bindReceiver(o),r.updateAgentSafeMode(n)}updateAgentSafeModeHasSeenNux(n){const[r,o]=l.Proxy.create();this.bindReceiver(o),r.updateAgentSafeModeHasSeenNux(n)}async requestAgentSafeModeState(){const[n,r]=l.Proxy.create();this.bindReceiver(r);try{return await n.getAgentSafeModeState()}catch(o){this.logger.info("requestAgentSafeModeState.failed");return}}closeSideChat(){const[n,r]=A.Proxy.create();this.bindReceiver(r),n.closeSidebar()}async getWhisperContent(){const[n,r]=ne.Proxy.create();return this.bindReceiver(r),await n.getWhisperContent({})}async getTabScreenshot(){const[n,r]=ne.Proxy.create();return this.bindReceiver(r),await n.getTabScreenshot()}receivedFirstToken(){this.host.receivedFirstToken("")}async callLocalTool(n,r){const[o,t]=te.Proxy.create();return this.bindReceiver(t),await o.callLocalTool(n,r)}bindReceiver(n){this.host.bindReceiver(n.interfaceType.interfaceName,n.pipe)}async getToolNames(){const[n,r]=te.Proxy.create();return this.bindReceiver(r),await n.getToolNames()}openSettings(n){const[r,o]=Ve.Proxy.create();this.bindReceiver(o),r.openSettings(n)}enqueueConversationArchive(n){const[r,o]=ee.Proxy.create();this.bindReceiver(o),r.enqueueConversationArchive(n)}cancelConversationArchive(n){const[r,o]=ee.Proxy.create();this.bindReceiver(o),r.cancelConversationArchive(n)}}class tt{constructor(n){F(this,"proxy");this.proxy=n}handleLink(n,r){this.proxy.handleLink(n,r)}}class nt{constructor(n){F(this,"proxy");this.proxy=n}triggerProductEvent(n){this.proxy.triggerProductEvent(n)}}class ct{constructor(){F(this,"dispatcher");F(this,"host");F(this,"logger");F(this,"conversationControllers",[]);F(this,"authStateController",[]);F(this,"navigationSidebarController");this.logger=Ge.createLogger("web-bridge-host","info","http"),this.dispatcher=new Ze.Dispatcher;const n=ve.Proxy.createToBrowser();this.host=new et(n,this.logger),n.setFrontend(this.dispatcher.createRemote(this));const[r,o]=he.Proxy.create();this.host.bindReceiver(o),this.navigationSidebarController=new Le(r),this.requestInitialAgentSafeModeState()}get linkHandler(){const[n,r]=fe.Proxy.create();return this.host.bindReceiver(r),new tt(n)}get productEventHandler(){const[n,r]=Se.Proxy.create();return this.host.bindReceiver(r),new nt(n)}logConsoleMessage(n){this.logger.info(n)}sendMessage(n,r){return Promise.resolve(null)}bindReceiver(n,r){n===P.interfaceName?this.conversationControllers.push(new Pe(new je(P,r))):n===H.interfaceName&&this.authStateController.push(new le(new je(H,r)))}async requestInitialAgentSafeModeState(){try{const n=await this.host.requestAgentSafeModeState();if(!n)return;me(n.preferredMode),De(n.hasSeenNux)}catch(n){this.logger.info("requestInitialAgentSafeModeState.failed")}}}let D;async function dt(){D=new ct;const e=await D.host.getAccountID();D.logger.info("Account ID: ".concat(e))}function ot(){return D==null?void 0:D.host}function Nt(){return D==null?void 0:D.linkHandler}function Rt(){return D==null?void 0:D.productEventHandler}async function It(){return D?(D.logger.debug("Getting whisper content"),await D.host.getWhisperContent()):null}async function Ot(){return D?await D.host.getTabScreenshot():null}function Et(){if(!D)return null;D.host.closeSideChat()}export{Et as closeSideChat,ot as getHost,Nt as getLinkHandler,Rt as getProductEventHandler,It as getSidebarWhisperContent,Ot as getTabScreenshot,dt as initHostConnection};
//# sourceMappingURL=jtxj1xvdu5i7mvdh.js.map
