var K=Object.defineProperty,Q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var q=(e,s,t)=>s in e?K(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,k=(e,s)=>{for(var t in s||(s={}))G.call(s,t)&&q(e,t,s[t]);if(U)for(var t of U(s))J.call(s,t)&&q(e,t,s[t]);return e},B=(e,s)=>Q(e,Y(s));import{c as X,b as Z,r as A,d as V,j as o,M as E}from"./n75kuy1cx6f5mogg.js";import{pb as ee,dv as te,i as se,eq as oe,O as ne,pc as j,pd as ae,at as ce,ae as ie,aF as P,C as re,dh as le,ai as ue,P as de,de as he}from"./ewse8exzafeu10ji.js";import{db as fe}from"./ny10lj7zpuz89fvf.js";function me(e){switch(e){case j.SSOMismatch:return{title:a.cannotAccessWorkspace,description:a.ssoMismatchDescription};case j.RequireSSOLogin:return{title:a.cannotAccessWorkspace,description:a.requireSSODescription};case j.UnexpectedSSOLogin:return{title:a.cannotAccessWorkspace,description:a.unexpectedSSODescription}}}const pe=2e3;function Ce(){"use forget";var I,L;const e=X.c(33),s=ee(),t=te(),w=Z(),i=se(),R=oe();let m;e[0]!==i?(m=()=>ae(i).isFetched,e[0]=i,e[1]=m):m=e[1];const W=ne(m),c=s==null?void 0:s.errorCode,h=s!=null&&W&&R==null&&!!t,[z,H]=A.useState(!1);let p,S;e[2]!==h?(p=()=>{h&&setTimeout(()=>{H(!0)},pe)},S=[h],e[2]=h,e[3]=p,e[4]=S):(p=e[3],S=e[4]),A.useEffect(p,S);const $=c===j.UnexpectedSSOLogin,f=h&&($?z:!0),n=fe();let g,x;if(e[5]!==n||e[6]!==c||e[7]!==f?(g=()=>{var F;if(!c||!f)return;const _=(F=n==null?void 0:n.split("@"))==null?void 0:F[1];ce.addError("SSO Catch All Modal: ".concat(c," for ").concat(n!=null?n:"unknown user"),{sso_error:c,email:n,email_hostname:_})},x=[c,f,n],e[5]=n,e[6]=c,e[7]=f,e[8]=g,e[9]=x):(g=e[8],x=e[9]),A.useEffect(g,x),!f)return null;let O;e[10]!==w||e[11]!==s.accountName||e[12]!==(t==null?void 0:t.name)?(O=(L=(I=s==null?void 0:s.accountName)!=null?I:t==null?void 0:t.name)!=null?L:w.formatMessage(a.workspacePlaceholder),e[10]=w,e[11]=s.accountName,e[12]=t==null?void 0:t.name,e[13]=O):O=e[13];const v=O;let M;e[14]!==i||e[15]!==t?(M=()=>{const _=t!=null&&t.ssoConnectionName?{connection:t.ssoConnectionName}:void 0;ie(i,{fallbackScreenHint:"login",additionalAuthParams:_})},e[14]=i,e[15]=t,e[16]=M):M=e[16];const T=M;let C;e[17]!==s.errorCode?(C=me(s.errorCode),e[17]=s.errorCode,e[18]=C):C=e[18];const{title:b,description:D}=C;let r;e[19]!==b?(r=o.jsx("div",{className:"flex flex-col",children:o.jsx("div",{className:"text-lg",children:o.jsx(E,k({},b))})}),e[19]=b,e[20]=r):r=e[20];let l;e[21]!==v?(l=o.jsx(E,B(k({},a.authenticateNotice),{values:{workspaceName:v}})),e[21]=v,e[22]=l):l=e[22];let u;e[23]!==T||e[24]!==l?(u=o.jsx(P.Button,{onClick:T,color:"primary",children:l}),e[23]=T,e[24]=l,e[25]=u):u=e[25];let y;e[26]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx(P.Button,{onClick:Se,children:o.jsx(E,{id:"KlMYRb",defaultMessage:"Log out"})}),e[26]=y):y=e[26];let d;e[27]!==D?(d=o.jsx("div",{className:"flex flex-col space-y-4",children:o.jsx("div",{children:o.jsx(E,k({},D))})}),e[27]=D,e[28]=d):d=e[28];let N;return e[29]!==u||e[30]!==d||e[31]!==r?(N=o.jsx(re,{testId:"modal-sso-catch-all",isOpen:!0,onClose:ue,type:"warning",size:"custom",className:"max-w-3xl",title:r,icon:le,primaryButton:u,secondaryButton:y,children:d}),e[29]=u,e[30]=d,e[31]=r,e[32]=N):N=e[32],N}function Se(){de.logLogOutButtonClicked({location:"sso_catch_all_modal"}),he()}const a=V({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{Ce as default};
//# sourceMappingURL=glbdmfivxjhm6c41.js.map
