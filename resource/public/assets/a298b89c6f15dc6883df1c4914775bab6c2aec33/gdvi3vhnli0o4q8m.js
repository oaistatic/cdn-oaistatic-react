import{j as t,M as f,c as oe,b as xe,A as re,m as ce}from"./n75kuy1cx6f5mogg.js";import{X as pe,gv as fe,l as ge,dF as O,gw as me,gx as he,gy as je,gz as ve,gA as Ce,gB as ke,gC as ye,gD as we}from"./ny10lj7zpuz89fvf.js";import{e as h,fB as be,ex as K,fC as Ne,at as Te,P as Ie,T as Se}from"./ewse8exzafeu10ji.js";const Me=({isExpanded:d,agentVisualMode:e,setAgentVisualMode:s,isStreaming:a,isStopping:l,isKAUR1BR5:o})=>{const n=d||a,r=pe(),{open:c}=fe(),{clientThreadId:u}=ge();return t.jsxs("div",{className:h("flex flex-1 flex-row items-center gap-2 px-1",a?"justify-end":"justify-between"),children:[!a&&t.jsx(O,{className:h("icon-sm text-token-text-secondary inline align-middle transition-transform",d&&"rotate-90")}),!l&&n&&t.jsx("div",{className:"flex flex-row items-center justify-center gap-2",children:t.jsxs(be,{side:"bottom",size:"small",contentClassName:"text-sm",triggerButton:t.jsx("button",{onPointerDown:i=>i.stopPropagation(),onClick:i=>i.stopPropagation(),className:"hover:bg-token-bg-tertiary flex max-h-6 items-center justify-center overflow-visible rounded-md p-1",children:t.jsx(Ne,{className:"text-token-text-secondary size-5"})}),children:[e==="visual-cot"&&t.jsxs(K.Item,{onClick:i=>{i.stopPropagation(),s==null||s("list-cot"),de("list-cot")},children:[t.jsx(me,{className:"icon"}),t.jsx(f,{id:"cot.listView",defaultMessage:"Activity"})]}),e==="list-cot"&&t.jsxs(K.Item,{onClick:i=>{i.stopPropagation(),s==null||s("visual-cot"),de("visual-cot")},children:[t.jsx(he,{className:"icon"}),t.jsx(f,{id:"cot.desktopView",defaultMessage:"Desktop view"})]}),!r&&t.jsxs(K.Item,{onClick:i=>{i.stopPropagation(),c()},children:[t.jsx(je,{className:"icon"}),o?t.jsx(f,{id:"qMkIYk",defaultMessage:"Open tabs"}):t.jsx(f,{id:"cot.takeOverBrowser",defaultMessage:"Take over browser"})]}),!r&&a&&t.jsxs(K.Item,{onClick:()=>ve(u,void 0,{clientInitiated:!0,reason:"agent_cot_stop",isLastTurnAgent:!0}),children:[t.jsx(Ce,{className:"icon"}),t.jsx(f,{id:"cot.stop",defaultMessage:"Stop"})]})]})})]})},de=d=>{Te.addAction("agent.cot_view_change",{cot_view:d}),Ie.logEvent("Agent CoT View Change",{cot_view:d})},qe=d=>{"use forget";const e=oe.c(64),{isExpanded:s,isExpandDisabled:a,showChunkIcon:l,isComplete:o,latestHeadline:n,latestChunk:r,counters:c,onToggleExpanded:u,skipTitle:i,onSkip:x,shouldDisplayVisualCoT:g,agentVisualMode:U,setAgentVisualMode:X,isStreaming:A,interruptionInProgress:$,isAgentVisualCoT:ie,isKAUR1BR5:ae,wasInterrupted:ne,isAgentTurn:ue,isGlauxTurn:_}=d,j=s===void 0?!1:s,m=a===void 0?!1:a,J=l===void 0?!0:l,q=g===void 0?!1:g,v=ie===void 0?!1:ie,G=ae===void 0?!1:ae,Q=ne===void 0?!1:ne,C=xe();let H;e[0]!==C||e[1]!==o||e[2]!==_||e[3]!==n||e[4]!==Q?(H=n&&n.length>0?n:o?Q?C.formatMessage({id:"tD55er",defaultMessage:"Stopped thinking"}):C.formatMessage({id:"nkvZJE",defaultMessage:"Thought"}):_?C.formatMessage({id:"4XsLlK",defaultMessage:"Searching internal apps"}):C.formatMessage({id:"hgnsat",defaultMessage:"Thinking"}),e[0]=C,e[1]=o,e[2]=_,e[3]=n,e[4]=Q,e[5]=H):H=e[5];const L=H,p=ke(!!ue),Y=!o&&(!j||p&&j)&&x&&!_,Z=o&&c&&(c.queries>0||c.sources>0)?void 0:!1;let k;e[6]!==c?(k=c&&t.jsx(Be,{counters:c}),e[6]=c,e[7]=k):k=e[7];const W=p&&"flex-row";let y;e[8]!==W?(y=h("flex w-full flex-col items-start justify-between text-start",W),e[8]=W,e[9]=y):y=e[9];const ee=(j||A)&&q&&"justify-between";let w;e[10]!==ee?(w=h("flex w-full items-center gap-0.5",ee),e[10]=ee,e[11]=w):w=e[11];const te=!o&&"loading-shimmer font-medium";let b;e[12]!==te?(b=h(te),e[12]=te,e[13]=b):b=e[13];const se=o&&(m?"text-token-text-secondary dark:text-[var(--interactive-label-tertiary-default)]":"text-token-text-secondary hover:text-token-text-primary dark:hover:text-token-text-primary dark:text-[var(--interactive-label-tertiary-default)]");let N;e[14]!==se?(N=h("flex items-center gap-1 truncate text-start align-middle",se),e[14]=se,e[15]=N):N=e[15];let V,z;e[16]===Symbol.for("react.memo_cache_sentinel")?(V={opacity:1},z={type:"spring",duration:.3},e[16]=V,e[17]=z):(V=e[16],z=e[17]);let T;e[18]!==o||e[19]!==r||e[20]!==J?(T=J&&(r==null?void 0:r.type)!==ye.Recap&&t.jsx(we,{chunk:r,isAnimated:!o,size:"medium",className:"text-token-text-secondary",isHeadline:!0}),e[18]=o,e[19]=r,e[20]=J,e[21]=T):T=e[21];let I;e[22]!==p||e[23]!==v?(I=p&&!v&&t.jsx(O,{className:"icon-xs"}),e[22]=p,e[23]=v,e[24]=I):I=e[24];let S;e[25]!==L||e[26]!==N||e[27]!==T||e[28]!==I?(S=t.jsx(re,{mode:"popLayout",children:t.jsxs(ce.span,{className:N,initial:!1,animate:V,transition:z,children:[T,L,I]},L)}),e[25]=L,e[26]=N,e[27]=T,e[28]=I,e[29]=S):S=e[29];let M;e[30]!==b||e[31]!==S?(M=t.jsx("span",{className:b,children:S}),e[30]=b,e[31]=S,e[32]=M):M=e[32];let D;e[33]!==U||e[34]!==$||e[35]!==v||e[36]!==m||e[37]!==j||e[38]!==G||e[39]!==A||e[40]!==X||e[41]!==q?(D=(!m||q)&&v&&t.jsx(De,{isExpanded:j,shouldDisplayVisualCoT:q,agentVisualMode:U,setAgentVisualMode:X,isStreaming:A,isStopping:!!$,isKAUR1BR5:G}),e[33]=U,e[34]=$,e[35]=v,e[36]=m,e[37]=j,e[38]=G,e[39]=A,e[40]=X,e[41]=q,e[42]=D):D=e[42];let B;e[43]!==m||e[44]!==u||e[45]!==w||e[46]!==M||e[47]!==D?(B=t.jsxs("button",{disabled:m,onClick:u,className:w,children:[M,D]}),e[43]=m,e[44]=u,e[45]=w,e[46]=M,e[47]=D,e[48]=B):B=e[48];let E;e[49]!==p||e[50]!==x||e[51]!==Y||e[52]!==i?(E=Y&&t.jsx(ce.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},transition:{type:"spring",duration:.3},children:t.jsx("button",{onClick:le=>{x(le),le.stopPropagation()},className:"text-token-text-tertiary hover:text-token-text-primary whitespace-nowrap",children:t.jsxs("span",{className:p?"underline decoration-dotted":"flex items-center gap-0.5",children:[i!=null?i:t.jsx(f,{id:"+sOejI",defaultMessage:"Skip"}),!p&&t.jsx(O,{className:"icon-xs"})]})})}),e[49]=p,e[50]=x,e[51]=Y,e[52]=i,e[53]=E):E=e[53];let P;e[54]!==E?(P=t.jsx(re,{mode:"popLayout",children:E}),e[54]=E,e[55]=P):P=e[55];let R;e[56]!==y||e[57]!==B||e[58]!==P?(R=t.jsx("div",{className:"relative w-full text-start",children:t.jsxs("div",{className:y,children:[B,P]})}),e[56]=y,e[57]=B,e[58]=P,e[59]=R):R=e[59];let F;return e[60]!==k||e[61]!==R||e[62]!==Z?(F=t.jsx(Se,{open:Z,align:"start",side:"bottom",label:k,children:R}),e[60]=k,e[61]=R,e[62]=Z,e[63]=F):F=e[63],F},De=d=>{"use forget";const e=oe.c(11),{isExpanded:s,shouldDisplayVisualCoT:a,agentVisualMode:l,setAgentVisualMode:o,isStreaming:n,isStopping:r,isKAUR1BR5:c}=d;if(a){let g;return e[0]!==l||e[1]!==s||e[2]!==c||e[3]!==r||e[4]!==n||e[5]!==o?(g=t.jsx(Me,{isExpanded:s,agentVisualMode:l,setAgentVisualMode:o,isStreaming:n,isStopping:r,isKAUR1BR5:c}),e[0]=l,e[1]=s,e[2]=c,e[3]=r,e[4]=n,e[5]=o,e[6]=g):g=e[6],g}const u=s&&"rotate-90";let i;e[7]!==u?(i=h("icon-sm text-token-text-secondary inline align-middle transition-transform",u),e[7]=u,e[8]=i):i=e[8];let x;return e[9]!==i?(x=t.jsx(O,{className:i}),e[9]=i,e[10]=x):x=e[10],x},Be=d=>{"use forget";const e=oe.c(11),{counters:s}=d;let a;e[0]!==s.queries?(a=s.queries>0&&t.jsx(f,{id:"JPkpiw",defaultMessage:"{queriesCount} searches",values:{queriesCount:s.queries}}),e[0]=s.queries,e[1]=a):a=e[1];let l;e[2]!==s.queries||e[3]!==s.sources?(l=s.queries>0&&s.sources>0&&t.jsx(t.Fragment,{children:" Â· "}),e[2]=s.queries,e[3]=s.sources,e[4]=l):l=e[4];let o;e[5]!==s.sources?(o=s.sources>0&&t.jsx(f,{id:"QnBAXR",defaultMessage:"{sourcesCount} sources",values:{sourcesCount:s.sources}}),e[5]=s.sources,e[6]=o):o=e[6];let n;return e[7]!==a||e[8]!==l||e[9]!==o?(n=t.jsxs(t.Fragment,{children:[a,l,o]}),e[7]=a,e[8]=l,e[9]=o,e[10]=n):n=e[10],n};export{qe as C};
//# sourceMappingURL=gdvi3vhnli0o4q8m.js.map
