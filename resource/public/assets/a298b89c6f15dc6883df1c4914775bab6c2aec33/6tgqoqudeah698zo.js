var D=Object.freeze,W=Object.defineProperty,ge=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var I=(e,t,s)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,c=(e,t)=>{for(var s in t||(t={}))O.call(t,s)&&I(e,s,t[s]);if(S)for(var s of S(t))F.call(t,s)&&I(e,s,t[s]);return e},w=(e,t)=>ge(e,xe(t));var G=(e,t)=>{var s={};for(var n in e)O.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&S)for(var n of S(e))t.indexOf(n)<0&&F.call(e,n)&&(s[n]=e[n]);return s};var h=(e,t)=>D(W(e,"raw",{value:D(t||e.slice())}));import{f as fe,r as f,aq as pe,g as v,b as V,j as a,M as g,d as X,n as Z,e as U}from"./n75kuy1cx6f5mogg.js";import{q$ as he,r0 as ve,jr as je,r1 as be,bg as ye,bf as Se,dv as E,i as p,j as C,r2 as we,R as Ae,cq as Me,d as j,ng as ke,a2 as H,r3 as Ne,f as Ce,en as _e,B as Pe,F as M,e as B,r as L,E as Ee,v as Be,P as Le,ho as Re,s as J,au as ee,h as Te,r4 as De,m as Ie,d9 as z,dB as _,e5 as We,gT as Oe,iD as Fe,dh as ae,dD as Ge,T as Ue}from"./ewse8exzafeu10ji.js";import{ah as se,a7 as te,li as ne,lX as He,lY as ze,lZ as qe,z as Qe,N as Ye,gw as Ke,h7 as $e,cj as Ve,js as Xe,l_ as Ze,jp as Je,bG as ea,A as aa,B as sa}from"./ny10lj7zpuz89fvf.js";import{b as ta}from"./3mp3j06lb1q5ttzm.js";import{W as na}from"./n81diue0m3az0e3g.js";import{S as ia}from"./ca7esdp3innmhgb2.js";import{S as q}from"./eblhjx87s4n4864h.js";import{S as ra}from"./ga8p3rr9o0mc72h0.js";import{L as ie}from"./kj8rd4pu8k32z2dy.js";function oa({cycleReferenceDate:e,cycleIndex:t,targetDate:s=new Date,period:n}){const i=n==="yearly"?he:ve,r=i(s,t),o=N(e,r,n);return je(o,r)?{start:N(e,i(r,-1),n),end:o}:{start:o,end:N(e,i(r,1),n)}}function N(e,t,s){return be(e,c({year:Se(t)},s==="monthly"&&{month:ye(t)}))}function Pa(e=0){const t=se();return f.useMemo(()=>{var r,o,l;if(t.status==="pending")return"pending";const s=t.data;if(!s)return;const n=(o=(r=s.next_credit_grant_update)!=null?r:s.active_start)!=null?o:s.active_until;if(!n)return;let i=(l=s.billing_period)!=null?l:"monthly";if(s.last_credit_grant_update&&s.next_credit_grant_update){const d=new Date(s.last_credit_grant_update),x=new Date(s.next_credit_grant_update);if(i=we(x,d)>1?"yearly":"monthly",e===0)return{start:d,end:x,period:i}}return w(c({},oa({cycleReferenceDate:new Date(n),cycleIndex:e,period:i})),{period:i})},[t,e])}function la(){var r;const e=E(),t=p(),n=C(t,"2861925050")&&e!=null&&e.isEnterprisey()&&(e.isAdminOfAccount()||e.isOwnerOfAccount())&&e.organizationId!=null,i=fe({queryKey:ca(e==null?void 0:e.organizationId),queryFn:()=>Ae.safeGet("/subscriptions/{organization_id}/at_overage_limit",{parameters:{path:{organization_id:e==null?void 0:e.organizationId}}}),enabled:n});return n&&((r=i.data)==null?void 0:r.organization_at_overage_limit)===!0}function ca(e){return["is-at-overage-limit",e]}function Ea(){return Me(pe("routes/admin"))}function Ba(){const e=j(n=>n.currentWorkspace),t=e!=null?ne(e.role):void 0,s=v();f.useEffect(()=>{t===!1&&s("/admin")},[t,s])}function La(){const e=j(n=>n.currentWorkspace),t=e!=null?te(e.role):void 0,s=v();f.useEffect(()=>{t===!1&&s("/admin")},[t,s])}function da(){const e=ke(),t=p(),s=H(t,"3131667714").get("regions",[]),n=Ne(),i=H(t,"1001765573");return e&&!s.includes(n)?!1:i.get("ca_admin_enabled",!1)}function ua({accountId:e,subscription:t}){const s=V(),n=Ce(),i=He(e),[r,o]=f.useState(!1),l=ze(e),d=async()=>{o(!0);try{await i.mutateAsync(e)}catch(x){n.warning(s.formatMessage(A.errorRenewingSubscription),{hasCloseButton:!0})}finally{o(!1)}};return a.jsx("div",{className:"bg-token-main-surface-secondary",children:a.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-2 py-4 md:px-6 lg:px-10 lg:py-6",children:[a.jsxs("div",{className:"mx-2 grow md:mx-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(_e,{className:"me-4 hidden text-orange-500 md:block"}),a.jsx("p",{className:"text-lg font-semibold",children:a.jsx(g,c({},A.workspaceWillBeDeactivated))})]}),t.active_until!=null&&a.jsx("p",{className:"md:ms-8",children:a.jsx(g,w(c({},A.retainAccessUntil),{values:{expiryDate:new Date(t.active_until)}}))})]}),l&&a.jsx(Pe,{color:"primary",onClick:d,loading:r,children:a.jsx(g,c({},A.reactivateBtn))})]})})}const A=X({retainAccessUntil:{id:"adminPage.retainAccessUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},workspaceWillBeDeactivated:{id:"adminPage.workspaceWillBeDeactivated",defaultMessage:"This workspace will be deactivated."},reactivateBtn:{id:"adminPage.reactivateBtn",defaultMessage:"Reactivate"},errorRenewingSubscription:{id:"adminPage.errorRenewingSubscription",defaultMessage:"There was an error reactivating your subscription."}}),P="/admin/billing";function m(i){var r=i,{route:e,icon:t,upsellEnterprise:s=!1}=r,n=G(r,["route","icon","upsellEnterprise"]);const o=Z().pathname.replace(/\/$/,"")||"/",l=v();return s?a.jsx(Ue,{label:a.jsx(g,c({},u.availableForEnterprise)),side:"right",contentClassName:"cant-hover:hidden",children:a.jsx(_,{as:"div",role:"button",fillContainer:!0,icon:ae,label:"name"in n?a.jsx(g,c({},n.name)):n.children})}):a.jsx(_,{as:"div",role:"button",fillContainer:!0,active:o===e,onClick:d=>{l(e),d.stopPropagation()},icon:t,label:"name"in n?a.jsx(g,c({},n.name)):n.children})}function ma({workspace:e,hasAdminPrivileges:t,hasOwnerPrivileges:s}){var T;const n=v(),i=E(),r=j(Te.isEnterpriseyPlan),o=!!i&&i.features.includes(qe)&&r,l=f.useCallback(()=>{n("/")},[n]),d=da(),{isComingSoon:x}=De(),R=d||x,b=p(),oe=C(b,"2509278897"),le=C(b,"4105779609"),ce=ee(),de=(i==null?void 0:i.isTeam())&&le,{data:k}=Ie(e==null?void 0:e.id);let y=!1;s||t||!r?y=!0:y=!!((T=k==null?void 0:k.permissions)!=null&&T.includes("chatgpt.workspace.member.role.view"));const ue=Qe(sa,aa,!1,!0),me=V().formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"});return a.jsxs("nav",{className:"pb-1.5",children:[!ce&&a.jsx("div",{className:"h-header-height flex items-center px-2",children:a.jsx(Ye,{className:"no-draggable","aria-label":me,onClick:()=>{z.setSidebarOpen(!1)},icon:ue,mobileIcon:Ke,"data-testid":"close-sidebar-button"})}),a.jsx("div",{className:"h-header-height flex flex-col justify-center",children:a.jsx(_,{as:"button",onClick:l,icon:a.jsx($e,{className:"icon-sm"}),label:a.jsx(g,c({},u.backToChat))})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:B("flex flex-col gap-2 rounded p-4",s&&"hover:bg-token-main-surface-secondary cursor-pointer"),onClick:()=>{s&&z.openModal(We.WorkspaceAppearance)},children:[a.jsx(Ve,{size:"large",src:e==null?void 0:e.profilePictureUrl}),a.jsxs("div",{className:"align-center flex min-w-0 flex-row",children:[a.jsx("h2",{className:"text-token-text-primary flex-1 truncate text-lg dark:text-white",children:e==null?void 0:e.name}),s?a.jsx("div",{className:"my-auto h-4 flex-initial align-middle dark:text-white",children:a.jsx(Xe,{className:"icon-sm opacity-70 hover:opacity-100"})}):null]})]}),y&&a.jsx(m,{route:"/admin",icon:ra,name:u.membersPageTitle}),r&&y&&a.jsx(m,{route:"/admin/groups",icon:q,upsellEnterprise:!r,name:U({id:"aecR1i",defaultMessage:"Groups"})}),t&&a.jsx(m,{route:P,icon:Ze,name:u.billing}),s&&a.jsx(m,{route:"/admin/gpts",icon:Je,name:u.gpts}),t&&(R||oe)&&a.jsx(m,{route:"/admin/ca",icon:ea,name:u.connections}),s&&a.jsx(m,{route:"/admin/settings",icon:Oe,name:u.settings}),!r&&a.jsx("span",{className:"border-y-token-border-heavy mx-3 border-t"}),!r&&a.jsx(m,{route:"/admin/groups",icon:q,upsellEnterprise:!r,name:U({id:"aecR1i",defaultMessage:"Groups"})}),t&&a.jsx(m,{route:"/admin/usage",icon:ia,upsellEnterprise:!r,children:a.jsx("div",{className:"flex flex-row items-center gap-2",children:a.jsx(g,c({},u.userAnalytics))})}),s&&a.jsx(m,{route:"/admin/identity",upsellEnterprise:!r&&!de,icon:Fe,name:u.identity}),s&&o&&a.jsx(m,{route:"/admin/ip-allowlist",icon:ae,name:u.ipAllowlist}),!1]})]})}function Ra({mobilePageTitle:e,requireAdminPrivileges:t=!1,requireOwnerPrivileges:s=!1,children:n}){const i=j(b=>b.currentWorkspace),r=v(),o=i!=null?ne(i.role):void 0,l=i!=null?te(i.role):void 0;f.useEffect(()=>{t&&o===!1&&r("/admin"),s&&l===!1&&r("/admin")},[t,o,r,s,l]);const d=ee(),x=p();return L(x)==null?null:a.jsxs(a.Fragment,{children:[a.jsx(ta,{mobileHeaderContent:e,mobileHeaderRightContent:a.jsx(ie,{}),forceOpenDesktopSidebar:d,renderNavSidebar:()=>a.jsx(ma,{workspace:i!=null?i:void 0,hasAdminPrivileges:o,hasOwnerPrivileges:l}),children:n}),i==null?null:a.jsx(na,{workspace:i})]})}function ga(){return a.jsxs(a.Fragment,{children:[a.jsx(xa,{}),a.jsx(fa,{})]})}function xa(){const{data:e}=se(),t=p(),s=L(t),n=s&&e&&e.plan_type===Be.SELF_SERVE_BUSINESS&&!e.will_renew;return a.jsx(a.Fragment,{children:n&&a.jsx(ua,{accountId:s.id,subscription:e})})}function fa(){const e=E(),t=la(),s=Z().pathname!==P;return f.useEffect(()=>{t&&Le.logEventWithStatsig("ChatGPT Credits: At Overage Limit Banner Shown","chatgpt_credits_at_overage_limit_banner_shown",{workspaceId:e==null?void 0:e.id,workspaceName:e==null?void 0:e.name})},[t,e]),a.jsx(a.Fragment,{children:t&&a.jsx("div",{className:"text-token-interactive-label-danger-secondary-default bg-token-bg-status-error",children:a.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-center px-2 py-4 text-xs md:px-6 lg:px-10",children:[a.jsx(Re,{className:"me-2 shrink-0"}),a.jsx(g,w(c({},u.atOverageLimitBannerText),{values:{link:n=>s?a.jsx(J,{className:"mx-1",href:P,children:n}):n}}))]})})})}var Q;const re=M.div(Q||(Q=h(["w-full flex-row items-center gap-2"])));var Y;const pa=M(re)(Y||(Y=h(["text-sm text-token-text-tertiary"])));var K;const ha=M.div(K||(K=h(["mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10"])));function Ta({title:e,subtitle:t,actions:s,tabsHeader:n,badge:i,navigation:r}){return a.jsxs(a.Fragment,{children:[a.jsx(ga,{}),a.jsxs("div",{className:B("border-token-bg-tertiary flex flex-col gap-6 border-b md:mt-12",!n&&"pb-6"),children:[r&&a.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10",children:r}),a.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:block md:px-6 lg:px-10",children:a.jsxs("div",{className:"flex flex-row items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(re,{className:"hidden md:flex",children:[a.jsx("h2",{children:e}),i]}),t&&a.jsx(pa,{className:"mt-1",children:t})]}),a.jsx("div",{className:"flex",children:s})]})}),n&&a.jsx(ha,{children:n})]}),a.jsx("div",{className:"absolute end-0 top-0 hidden px-2 py-1.5 md:block",children:a.jsx(ie,{})})]})}function Da({items:e}){return a.jsx("div",{className:"text-token-text-secondary text-caption-regular flex items-center gap-2",children:e.map((t,s)=>{const n=B(s===e.length-1?"text-token-text-primary":"text-token-text-secondary","no-underline");return a.jsxs(a.Fragment,{children:[t.href?a.jsx(J,{href:t.href,style:{textDecoration:"none"},className:n,children:t.label},s):a.jsx("div",{className:n,children:t.label},s),s<e.length-1&&a.jsx(Ge,{className:"icon-sm"})]})})})}var $;const va=M.div($||($=h(["max-w-4xl mx-auto w-full px-2 md:px-6 lg:px-10 pb-10"])));function Ia({children:e,showSpinner:t,skipLegacyWorkspaceCheck:s}){const n=p(),i=L(n),r=j(d=>d.currentWorkspace),o=!s&&!r,l=!i||t;return a.jsxs(va,{children:[l&&a.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:a.jsx(Ee,{})}),!l&&o&&a.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:a.jsx(g,c({},u.workspaceNotFound))}),!l&&!o&&e]})}const u=X({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},userAnalytics:{id:"adminPage.userAnalytics",defaultMessage:"User analytics"},billing:{id:"adminPage.billing.1",defaultMessage:"Billing"},gpts:{id:"adminPage.gpts",defaultMessage:"GPTs"},connections:{id:"adminPage.connections",defaultMessage:"Connectors"},settings:{id:"BExb/1",defaultMessage:"Settings & permissions"},identity:{id:"adminPage.identity.0",defaultMessage:"Identity & provisioning"},ipAllowlist:{id:"adminPage.ipAllowlist",defaultMessage:"IP allowlist"},availableForEnterprise:{id:"adminPage.availableForEnterprise",defaultMessage:"Available for Enterprise plan"},atOverageLimitBannerText:{id:"adminPage.atOverageLimitBannerText",defaultMessage:"Your organization has reached its credit overage limit. Access to advanced features is paused. <link>Adjust the limit</link> to restore access."},agreements:{id:"workspaceAgreements.agreementsTitle",defaultMessage:"Agreements"}});export{Ra as A,Ta as a,Da as b,Ia as c,La as d,la as e,Pa as f,ca as g,Ba as h,da as i,Ea as u};
//# sourceMappingURL=6tgqoqudeah698zo.js.map
