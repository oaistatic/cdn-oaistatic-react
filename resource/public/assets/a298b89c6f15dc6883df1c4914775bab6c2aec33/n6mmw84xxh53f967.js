const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nwkahx754oj8hp36.js","assets/n75kuy1cx6f5mogg.js","assets/ewse8exzafeu10ji.js","assets/root-l2v84m1w.css","assets/ny10lj7zpuz89fvf.js","assets/conversation-small-hotcas67.css","assets/oivlyqzjs00veeza.js","assets/iqa4joq6fhdyyn1v.js","assets/efc6pm86205um7c5.js","assets/frf4c35l48b0bjrb.js","assets/lt9kme5w6dg8d0tp.js","assets/bplrhpj3p6zcslbb.js","assets/d1fqp7rhwvsd6omt.js","assets/hmtoutvt6n5trpwm.js","assets/b4nzhz52v6u2aahr.js","assets/j52qwi6rn9xbev5e.js","assets/jmhjnbrpuf50gd8l.js","assets/o13qe7p37racm3xz.js","assets/h8ubb8pbx4cc6fvw.js"])))=>i.map(i=>d[i]);
var Qa=Object.freeze,Ja=Object.defineProperty,al=Object.defineProperties;var ol=Object.getOwnPropertyDescriptors;var en=Object.getOwnPropertySymbols;var Xa=Object.prototype.hasOwnProperty,Za=Object.prototype.propertyIsEnumerable;var $a=(t,s,n)=>s in t?Ja(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,p=(t,s)=>{for(var n in s||(s={}))Xa.call(s,n)&&$a(t,n,s[n]);if(en)for(var n of en(s))Za.call(s,n)&&$a(t,n,s[n]);return t},ne=(t,s)=>al(t,ol(s));var Ds=(t,s)=>{var n={};for(var a in t)Xa.call(t,a)&&s.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&en)for(var a of en(t))s.indexOf(a)<0&&Za.call(t,a)&&(n[a]=t[a]);return n};var Ct=(t,s)=>Qa(Ja(t,"raw",{value:Qa(s||t.slice())}));import{f as me,b as pt,a as Ns,aF as Fe,d9 as bt,C as je,I as Ss,R as re,i as ee,d as Ft,E as Ge,dy as il,dA as eo,gY as ca,ao as Bs,ap as Fs,dv as Ue,io as rl,aT as ll,tL as cl,T as ct,B as F,eK as dl,bG as ul,j as oe,db as gl,J as vn,ex as Se,qN as ml,P as se,aY as fl,at as dt,d5 as js,ai as pl,e5 as Ut,F as Lt,de as Gs,uE as ni,y as Sn,du as hl,pY as xl,uF as to,ae as bs,nu as Ts,lV as bl,e6 as ds,uG as yl,lX as ai,aE as ye,el as ys,a9 as St,L as oi,p as ii,l0 as ri,an as Vs,d6 as Ml,H as jn,l1 as Cl,dc as vl,dd as Sl,q as Hn,t as jl,e as yt,v as Pe,hC as _l,fA as da,a2 as wl,a6 as ua,r as us,uH as Nl,uI as Tl,uJ as _n,m_ as xe,dt as li,uK as ga,iV as ks,g as kl,uL as ma,jf as Ke,je as Q,uM as El,uN as it,uO as so,dD as no,cw as at,uP as ao,uQ as _t,kI as wn,q_ as Nn,kE as Pl,uR as fa,oh as pa,uS as ci,ee as I,uT as Al,ec as Ve,uU as ha,kB as ke,ij as di,nx as Us,id as ui,kK as gi,ea as Tn,kL as mi,mO as Dl,ic as Ol,ie as Ll,ig as Il,ib as Rl,nw as Bl,uV as Fl,ny as fi,K as pi,M as hi,ii as Gl,mN as Ul,ih as Wl,ik as Hl,uW as zl,uX as Ms,uY as Kl,g2 as Vl,uZ as kn,fS as Mt,m2 as En,sG as ql,u_ as Yl,ej as wt,u$ as xi,ek as Nt,hE as Wt,a1 as mt,oS as bi,v0 as Ql,s as os,U as he,is as $l,ho as yi,u as Jl,n as Mi,fE as xa,q0 as Xl,fG as es,fD as pn,dr as Zl,ta as ec,v1 as qs,z as Ws,n5 as ba,q1 as tc,rN as gs,sH as Ci,pe as vi,fC as Pn,lO as Si,dG as ji,kN as gt,fJ as Ht,fR as An,i6 as Ne,v2 as ts,v3 as _i,nv as Ys,v4 as wi,r6 as sc,v5 as nc,v6 as ac,v7 as oc,v8 as ic,v9 as oo,b8 as io,va as rc,fN as Dn,vb as lc,oi as ms,lS as cc,vc as dc,vd as uc,m1 as gc,tX as mc,ve as fc,qS as ta,vf as Ni,vg as Ti,vh as nt,vi as ki,vj as Ei,vk as Pi,vl as Ai,vm as Di,vn as Oi,vo as Li,vp as Ii,lT as zn,rv as Kn,vq as On,rF as pc,vr as hc,ri as xc,pO as bc,lM as yc,t$ as Es,vs as ya,vt as Mc,pU as Ln,vu as Ri,vv as Bi,vw as Cc,pV as vc,vx as Sc,lg as Ma,vy as jc,l5 as _c,vz as wc,qQ as Nc,pW as Tc,vA as kc,ed as sa,hp as Ca,vB as Ot,vC as Ec,rW as ro,rQ as Pc,jI as Ac,lb as Dc,lm as Cs,dC as Oc,g1 as Lc,rP as Ic,rO as Rc,u1 as Bc,vD as Fc,k0 as vs,oV as lo,fu as Gc,ft as Uc,fv as Wc,hq as Hc,qr as va,vE as zc,A as Kc,iI as co,ba as Vc,bo as kt,N as jt,bW as qc,sI as Yc,h as is,m as Qc,fB as $c,bm as Jc,vF as Xc,vG as Zc,dz as ed,au as td,vH as sd,vI as nd,vJ as ad,ld as od,vK as id,dE as rd,f1 as Fi,vL as Gi,fa as ld,fb as cd,gT as dd,vM as Et,fl as uo,fm as go,bb as ud,vN as gd,aG as Ui,O as md,cF as fd,c as In,aD as Sa,dg as Wi,vO as pd,dh as hd,vP as xd,cm as bd,iX as mo,vQ as yd,ps as Md,vR as Cd,qm as fo,vS as po,oj as vd,r_ as Sd}from"./ewse8exzafeu10ji.js";import{b as A,r as y,j as e,M as g,f as rt,u as Ee,A as ja,a as _e,m as Hi,c as ot,d as te,n as zt,g as tt,i as Rn,R as Rt,aB as zi,L as cs,l as jd,t as Bn,q as _d}from"./n75kuy1cx6f5mogg.js";import{cj as wd,cO as xs,N as Nd,aq as Hs,jx as Td,o6 as kd,jv as Ed,jw as Pd,a3 as _a,ar as Vn,sY as Ad,yD as Dd,dW as Od,yE as Ld,vM as Id,gN as rs,s_ as Ki,bf as Vi,b2 as Rd,yF as qi,jB as Yi,jC as Qi,jD as $i,yG as Zt,of as ze,yH as Bd,yI as Ji,oC as Xi,oI as Fd,yJ as Zi,yK as wa,yL as na,yM as Gd,h7 as Qs,nt as Xt,cm as er,bZ as tr,gl as Ud,ke as Wd,mx as Hd,a2 as Na,yN as zd,eb as Kd,yO as Vd,aR as _s,gO as Bt,c2 as qd,dm as Ta,gP as Yd,yP as Qd,yQ as Ps,gh as fs,Y as $d,bU as ka,bv as Ea,bw as sr,yR as nr,bL as Jd,bM as Xd,bN as Zd,dF as zs,yS as hn,f$ as eu,lP as aa,rk as tu,bI as ar,ch as xn,bG as Pa,bY as or,rn as Aa,vl as $s,yT as un,gG as su,cU as nu,c0 as au,d6 as ou,ah as iu,ol as ru,bR as Ks,c8 as ir,U as lu,eY as cu,lm as du,ln as uu,bJ as gu,yU as mu,c7 as fu,jQ as K,tv as pu,bB as hu,c9 as xu,jr as bu,js as rr,jj as yu,yV as Mu,yW as ho,yX as Cu,yY as vu,sk as oa,eF as lr,ug as Su,yZ as ju,y_ as ve,c4 as _u,y$ as cr,z0 as dr,c5 as wu,z1 as ur,z2 as gr,gS as Nu,z3 as Tu,z4 as ku,gU as Eu,z5 as Pu,z6 as mr,z7 as fr,z8 as pr,z9 as xo,za as hr,zb as Au,zc as Du,zd as qn,ze as Ou,zf as $t,zg as Lu,zh as Iu,zi as tn,zj as sn,zk as Ru,zl as Bu,mE as Fu,dI as xr,zm as Gu,gx as Uu,ac as Wu,ad as Hu,lD as br,zn as zu,zo as Ku,a1 as Vu,zp as qu,fL as Yu,jS as Qu,ap as Pt,zq as $u,bS as Ju,m8 as Xu,b3 as Zu,zr as eg,zs as tg,zt as sg}from"./ny10lj7zpuz89fvf.js";import{R as ng}from"./mpxypd9p8phumu7j.js";import{s as bo,B as ag}from"./i3bw46mavo9n01l8.js";import{d as og}from"./kl7c6054usfnqmd4.js";import{g as ig}from"./k97n0y6ba9c9h39c.js";import{a as rg}from"./yijwqewf8f82pcvr.js";import{c as lg}from"./jmhjnbrpuf50gd8l.js";import{G as cg,A as dg}from"./oxyyvre5rxa3ulxo.js";import{T as ug,u as gg}from"./bk1pqn89g1zmtct8.js";import{a as mg,S as yr}from"./lt9kme5w6dg8d0tp.js";import{a as Mr,b as Cr}from"./jaupzjmp9wknd4io.js";import{a as bn,e as fg,h as pg,j as hg,l as xg,n as bg,p as yg,t as Mg,v as Cg,P as vg,r as Sg,C as jg,c as ia,D as _g,b as wg}from"./fh2tsu8ocsi22jc3.js";import{g as vr,f as At,a as Fn}from"./nnb0v70g00lhjclz.js";import{a as Ng,T as Tg}from"./llpf7zhht8g5pr01.js";import{a as kg}from"./mzj5jqjjpo006z7a.js";import{e as Sr,i as Eg,h as Pg,j as Ag,A as Dg,k as Og,l as Lg,P as Ig}from"./bjzpeonqipke77vk.js";import{u as jr,a as Rg}from"./nkx3i0x76yga5144.js";import{P as Bg,a as Fg}from"./jio16esf2chumk86.js";import{V as Gg}from"./h2t8e4spzi3rf7zt.js";import{b as Ug,a as _r}from"./efc6pm86205um7c5.js";import{S as Wg,a as Hg,b as zg,c as Kg,d as Vg}from"./dw5ywno8x91bh7zj.js";import{l as Js,u as Xs}from"./cj802l28id0sdlgx.js";import{a as qg}from"./kkcke7zkpz7m4enu.js";import{G as Yg}from"./oivlyqzjs00veeza.js";import{C as Qg}from"./exkj92rxpmk1vztp.js";import{MAX_ICON_SIZE as $g,CreateCustomConnectorModal as Jg}from"./gazad2f1iv107ru8.js";import{S as Da}from"./e4gkml19dri6z85l.js";import{s as As}from"./gmmcfvs186kwwp97.js";import{S as Xg}from"./neqgr1r8uemp4194.js";import{C as Zg}from"./bimbwetu1my0sj35.js";import{a as em}from"./nx89p1ofixmvk3kp.js";import{S as tm}from"./kq6o2ff0g84prlfu.js";import{r as sm,c as nm}from"./l7zwbn46b1xq4jpt.js";import{M as am}from"./g4tl5lt9yqf20m4s.js";import{u as om}from"./frf4c35l48b0bjrb.js";import{T as Me}from"./e0z6030ycsi62lhu.js";import{a as im,E as rm}from"./ce2i59offcjvzu0m.js";import lm from"./dehe28ju87ci5mom.js";import{g as cm}from"./irqko7c1s7qpl41n.js";import"./czwq62q5rbh9b1yi.js";import"./gowyl4x2bs7hfi4a.js";import"./em5q5yhbyv41ft0j.js";import"./ga8p3rr9o0mc72h0.js";import"./j52qwi6rn9xbev5e.js";import"./kvd65smf2xr8kpw2.js";import"./jibfal0i45wkyt1w.js";import"./i49tjgjhqtxc86vg.js";import"./jrb3eqknnmp1dh1j.js";import"./gccb361iq9z9fgrt.js";import"./chdemz4xlfbm1987.js";import"./hrec769hl86c0yvf.js";import"./gnd0g6eajrko24ds.js";import"./b03i64rase7o3m1o.js";import"./fe5a9tjc2a92da9h.js";import"./lj2w9b5ogapjsanu.js";import"./isawnddp9c4hh66p.js";import"./fftookz3hme34txu.js";import"./nm04jgpfyxi6pn12.js";import"./gmo3awvgctzzwbrq.js";import"./ltq3thvd9yhrdk52.js";import"./dbz6g0t5bht84999.js";import"./j2ui4c2m3nj8pqst.js";import"./dsuqrew0l7dkq40v.js";import"./byq2jfs2d5331lqi.js";function dm(t){return rt({queryKey:["workspace",t,"owner_count"],queryFn:async()=>await re.safeGet("/accounts/{account_id}/users/owner_count",{parameters:{path:{account_id:t}}})})}function um({workspace:t}){var E;const s=A(),n=me(),a=pt(),[o,i]=y.useState(""),l=t.isOwnerOfAccount(),r=dm(t.id),{data:c}=Ns(),[m,u]=y.useState(!1),[d,f]=y.useState(!1);if(!c)return null;const x=c.accountItems.find(_=>_.id!==t.id),b=()=>{bt.setLeaveWorkspaceData(null)},M=async()=>{if(a!==void 0){f(!0);try{await re.safeDelete("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:t.id,user_id:a.id}}}),u(!0)}catch(_){n.danger(s.formatMessage({id:"leaveWorkspaceModal.leaveFailed",defaultMessage:"Failed to leave workspace"}),{toastId:"leave_workspace_modal",loggingTitle:"Failed to leave workspace",loggingDescription:"Error message when user fails to leave workspace"})}f(!1)}};if(m)return e.jsx(fm,{workspace:t,fallbackWorkspace:x,onClose:b});if(!r.data)return e.jsx(gm,{onClose:b});const v=r.data.total_count,j=r.data.owner_count;if(l&&j<2)return e.jsx(mm,{workspace:t,onClose:b});const S=e.jsx(Fe.Button,{onClick:()=>{bt.setLeaveWorkspaceData(null)},title:s.formatMessage({id:"leaveWorkspaceModal.cancel",defaultMessage:"Cancel"})}),C=e.jsx(Fe.Button,{color:"danger",disabled:a===void 0||d||o===""||o.toLowerCase()!==((E=a==null?void 0:a.email)==null?void 0:E.toLowerCase()),title:s.formatMessage({id:"leaveWorkspaceModal.leaveButton",defaultMessage:"Leave workspace"}),onClick:()=>M()}),w=s.formatMessage({id:"leaveWorkspaceModal.enterEmailToConfirm",defaultMessage:"Leave Workspace - Enter your email to confirm"});return e.jsx(je,{testId:"modal-leave-workspace",isOpen:!0,onClose:b,showCloseButton:!0,type:"danger",title:s.formatMessage({id:"leaveWorkspaceModal.leaveWorkspace",defaultMessage:"Leave the {workspaceName} workspace"},{workspaceName:t.data.name}),primaryButton:C,secondaryButton:S,children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsx(wd,{size:"large",src:t.data.profilePictureUrl}),e.jsxs("div",{className:"flex flex-col justify-around",children:[e.jsx("div",{className:"text-base font-semibold",children:t.data.name}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:e.jsx(g,{id:"leaveWorkspaceModal.memberCount",defaultMessage:"{memberCount, plural,\n                  one {1 member}\n                  other {{memberCount} members}\n                }",values:{memberCount:v}})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base font-semibold",children:e.jsx(g,{id:"leaveWorkspaceModal.leaveAreYouSure",defaultMessage:"Are you sure?"})}),e.jsxs("ul",{className:"text-token-text-secondary ms-3 list-disc text-sm",children:[e.jsx("li",{className:"mb-2",children:e.jsx(g,{id:"leaveWorkspaceModal.leaveWorkspaceWarning1",defaultMessage:"This will remove you from your workspace and you won't be able to access all data, including profile, settings, and chat history."})}),e.jsx("li",{children:e.jsx(g,{id:"leaveWorkspaceModal.leaveWorkspaceWarning2",defaultMessage:"You will lose access to all channels and messages in this workspace."})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base font-semibold",children:w}),e.jsx(Ss,{ariaLabel:w,name:"typeEmailConfirm",placeholder:"abcd@acme.com",value:o,onChange:_=>{i(_.target.value)}})]})]})})}function gm({onClose:t}){return e.jsx(je,{testId:"modal-empty-loading",isOpen:!0,onClose:t,showCloseButton:!0,type:"warning",children:e.jsx("div",{className:"flex flex-row justify-center",children:e.jsx(Ge,{})})})}function mm({workspace:t,onClose:s}){const n=A(),a=e.jsx(Fe.Button,{onClick:()=>{bt.setLeaveWorkspaceData(null)},title:n.formatMessage({id:"leaveWorkspaceModal.ok",defaultMessage:"OK"})});return e.jsx(je,{testId:"modal-cant-leave-workspace",isOpen:!0,onClose:s,showCloseButton:!0,type:"danger",title:n.formatMessage({id:"leaveWorkspaceModal.cantLeaveWorkspace",defaultMessage:"Couldn't leave the {workspaceName} workspace"},{workspaceName:t.data.name}),secondaryButton:a,children:e.jsx(g,{id:"leaveWorkspaceModal.lastOwnerWarning",defaultMessage:"Because you're the only owner in the {workspaceName} workspace, assign the owner role to another member before leaving.",values:{workspaceName:t.data.name}})})}function fm({workspace:t,fallbackWorkspace:s,onClose:n}){const a=Ee(),o=A(),i=me(),l=ee(),r=Ft(u=>u.currentWorkspace),c=()=>{if(s!==void 0&&r)if(bt.setLeaveWorkspaceData(null),r.id===t.id){const{willRedirect:u}=il(a,s.id,l,o,i);u||eo()}else a.invalidateQueries(ca());else bt.setLeaveWorkspaceData(null),Bs.deleteCookie(Fs.Workspace),Bs.deleteCookie(Fs.WorkspaceResidencyRegion),eo();n()},m=s!==void 0?e.jsx(Fe.Button,{color:"primary",onClick:c,title:o.formatMessage({id:"leaveWorkspaceModal.done",defaultMessage:"Done"})}):e.jsx(Fe.Button,{color:"primary",onClick:c,title:o.formatMessage({id:"leaveWorkspaceModal.startPersonalAccount",defaultMessage:"Start using ChatGPT for free"})});return e.jsx(je,{testId:"modal-left-workspace",isOpen:!0,onClose:c,primaryButton:m,type:"success",title:o.formatMessage({id:"leaveWorkspaceModal.leftWorkspaceTitle",defaultMessage:"Successfully left the {workspaceName} workspace"},{workspaceName:t.data.name}),children:e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx("p",{children:s!==void 0?e.jsx(g,{id:"leaveWorkspaceModal.leftWorkspaceDescription",defaultMessage:"You have successfully left the {workspaceName} workspace.",values:{workspaceName:t.data.name}}):e.jsx(g,{id:"leaveWorkspaceModal.leftWorkspaceDescriptionNoOtherWorkspaces",defaultMessage:"You have successfully left the {workspaceName} workspace. This will create your personal workspace automatically.",values:{workspaceName:t.data.name}})})})})}function wr(t){var s;return!t||!t.attachments||t.attachments.length===0||t.attachments[0].kind!=="deep_research"?null:{permissions:(s=t.permissions.share_setting)!=null?s:"public",postId:t.id,messages:t.attachments[0].messages}}const pm=window.location.origin+"/s/";function Yn(t){return"".concat(pm).concat(t)}function Rs(t){return["research","result","share",t]}const hm=window.location.origin+"/post/...";function xm({taskId:t,isLoading:s,sharedResearchResult:n,title:a,serverThreadId:o}){var j;const[i,l]=y.useState(!1),r=(S,C)=>{S&&_a(S,void 0,C).then(()=>{l(!0),setTimeout(()=>{l(!1)},1500)}).catch(()=>{})},c=Ee(),m=me(),{mutate:u,isPending:d}=_e({scope:{id:t},mutationFn:async S=>{const C=await re.safePost("/share/post",{requestBody:{attachments_to_create:[{kind:"deep_research",conversation_id:o,task_id:S}]}});return wr(C.post)},onSuccess:S=>{if(!S){m.danger("Failed to create share link");return}c.setQueryData(Rs(t),S),r(Yn(S.postId))}}),{mutate:f}=_e({scope:{id:(j=n==null?void 0:n.postId)!=null?j:""},mutationFn:async({sharedResearchResultId:S,access:C})=>(await re.safePost("/share/post/update_access",{requestBody:{post_id:S,share_settings:C}})).share_setting,onMutate:({access:S})=>{const C=Rs(t),w=c.getQueryData(C);return c.setQueryData(C,w&&ne(p({},w),{permissions:S})),{previousAccess:w==null?void 0:w.permissions}},onSuccess:S=>{const C=Rs(t),w=c.getQueryData(C);w&&c.setQueryData(C,ne(p({},w),{permissions:S}))},onError:(S,C,w)=>{var D;const E=Rs(t),_=c.getQueryData(E);c.setQueryData(E,_&&ne(p({},_),{permissions:(D=w==null?void 0:w.previousAccess)!=null?D:"public"}))}}),h=y.useRef(null),x=S=>{var C;(C=h.current)==null||C.focus(),n?r(Yn(n.postId),S):u(t)},b=S=>{n&&f({sharedResearchResultId:n.postId,access:S})},M=n?Yn(n.postId):void 0,v=S=>{switch(S){case"public":return Vn.PUBLIC;case"private":return Vn.PRIVATE;case"workspace":return Vn.WORKSPACE}};return e.jsx(ag,{inputRef:h,isLoading:s,isPublishedVersionLatest:!0,sharedObject:n&&{id:n.postId,title:a,access:v(n.permissions)},title:a,shareTextPlaceholder:hm,shareUrl:M,isCopySuccessful:i,isCreateLinkRequestInProgress:d,handlePrivacyChange:b,handlePrimaryButtonClick:x})}function bm({taskId:t,isDisabled:s,title:n,threadId:a}){const o=Ue(),i=rl(),l=A(),r=ll(a),{data:c,isLoading:m}=rt({enabled:!!t&&!s,queryKey:Rs(t),queryFn:async()=>{if(!r)return null;const M=await re.safeGet("/share/post/by_research_task/{task_id}",{parameters:{path:{task_id:t}}});return M.post?wr(M.post):null}}),[u,d]=y.useState(!1),{triggerRef:f,container:h}=cl({isOpen:u,onClose:()=>d(!1)}),x=(o==null?void 0:o.isWorkspaceAccount())&&!(o!=null&&o.features.includes(xs.WorkspaceShareLinks));if(s||x||!r||i)return e.jsx(ct,{label:x?l.formatMessage(bo.workspaceSharingDisabled):l.formatMessage(bo.share),children:e.jsx(Nd,{disabled:!0,icon:Hs})});const b=({className:M})=>e.jsxs("div",{className:"relative h-fit w-fit",children:[e.jsx(Hs,{className:M}),c&&e.jsx("div",{className:"absolute end-0 top-[1px] flex items-center gap-1.5",children:e.jsx("div",{className:"h-1.5 w-1.5 rounded-full"})})]});return e.jsxs(Td,{open:u,onOpenChange:d,children:[e.jsx(kd,{ref:f,asChild:!0,children:e.jsxs(F,{children:[e.jsx(b,{className:"me-1 h-4 w-4"}),e.jsx(g,{id:"vaZOk/",defaultMessage:"Share Link"})]})}),e.jsx(ja,{children:u&&e.jsx(Ed,{forceMount:!0,container:h,children:e.jsx(Pd,{align:"end",className:"z-50",sideOffset:8,collisionPadding:8,children:e.jsx(xm,{title:n,taskId:t,sharedResearchResult:c,isLoading:m,serverThreadId:r})})})})]})}const ym=({messages:t,threadId:s,taskId:n})=>{var C;const a=A(),[o,i]=y.useState(!0),l=y.useRef(null),r=dl(s),c=ul(t),[m,u]=y.useState(!1),d=me(),f=ee(),h=oe(f,"3930843960"),x=oe(f,"1596731578"),b=a.formatMessage({id:"deepresearch.downloadFileError",defaultMessage:"Failed to download file. Please try again later."}),M=async w=>{var E;if(c){if(!r){d.warning("Failed to download file. Please try refreshing the page."),se.logEventWithStatsig("Deep Research Export Missing serverThreadId","deep_research_export_missing_serverthreadid");return}u(!0);try{const _=fl(c),D=await re.safePost("/export_doc/deep_research",{requestBody:{conversation_id:r,message_id:c.id,export_type:w},skipJsonTransform:!0});if(!D.ok)throw D.status>=400&&D.status<600&&d.danger(b,{toastId:"deep_research_share_modal",loggingTitle:b,loggingDescription:"Error message when a file download fails"}),new Error("Failed to download file");const N=await D.blob(),P=D.headers.get("Content-Disposition"),T=(E=ig(P))!=null?E:"ChatGPT Deep Research.".concat(w);og(N,T),Id(f,{source:"mouse",type:"download",selectedText:_,location:"research-report",contentType:"text",messageId:c.id,serverThreadId:r,productLogOnly:!0})}catch(_){dt.addError(_)}finally{u(!1)}}},v=()=>{i(!1),l.current=setTimeout(()=>{Ld.setResearchShareIntent(null)},400)},j=(C=c==null?void 0:c.metadata)==null?void 0:C.async_task_title,S=gl();return j?e.jsx(ja,{children:e.jsx(Fe.Root,{isOpen:o,onClose:v,className:"container",testId:"modal-deep-research-share",children:e.jsx(Fe.Overlay,{showBackground:!0,children:e.jsx(Fe.Content,{size:"normal",className:"flex max-w-4xl flex-col bg-transparent focus:outline-hidden",children:e.jsxs(Hi.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:S?Ad:Dd,className:"bg-token-bg-primary flex max-w-4xl flex-col overflow-x-scroll rounded-2xl focus:outline-hidden",children:[e.jsx(Fe.Header,{type:"success",title:e.jsx("p",{className:"text-token-text-primary ps-2",children:e.jsx(g,{id:"pV8JSS",defaultMessage:"Preview"})}),closeButtonSide:"left",accessory:e.jsxs(e.Fragment,{children:[h&&r!==void 0&&e.jsxs(Se.Root,{open:m?!1:void 0,children:[e.jsx(Se.BasicTrigger,{asChild:!0,children:e.jsx(F,{disabled:m,loading:m,color:"secondary",icon:Od,children:a.formatMessage({id:"deepresearch.download-button",defaultMessage:"Download"})})}),e.jsx(Se.Portal,{children:e.jsxs(Se.Content,{align:"end",children:[e.jsx(Se.Item,{onClick:w=>{w.preventDefault(),M("pdf")},children:a.formatMessage({id:"deepresearch.download-pdf-button.menu",defaultMessage:"PDF Document (.pdf)"})}),x&&e.jsx(Se.Item,{onClick:w=>{w.preventDefault(),M("docx")},children:a.formatMessage({id:"deepresearch.download-docx-button.menu",defaultMessage:"Microsoft Word Document (.docx)"})})]})})]}),e.jsx(bm,{taskId:n,isDisabled:!1,title:j,threadId:s})]}),closeButton:e.jsx(vn,{onClick:v,iconSize:"lg"})}),e.jsx("div",{className:"@container/thread flex min-w-0 flex-col gap-4 px-12 py-8",children:e.jsx(ml,{children:e.jsx(ng,{messages:t,threadId:s})})})]})})})})}):null};function Mm(){"use forget";const t=ot.c(13),s=A(),n=js(Sm),a="https://platform.openai.com/verify-age";let o;t[0]!==s?(o=s.formatMessage(Dt.title),t[0]=s,t[1]=o):o=t[1];let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=e.jsx("p",{className:"mb-4",children:e.jsx(g,p({},Dt.description0))}),t[2]=i):i=t[2];let l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=e.jsx(yo,{children:e.jsx(g,p({},Dt.subtitle1))}),t[3]=l):l=t[3];let r;t[4]===Symbol.for("react.memo_cache_sentinel")?(r=e.jsxs("ol",{className:"ms-4 mb-4 list-decimal",children:[e.jsx("li",{className:"",children:e.jsx(g,p({},Dt.description1Bullet1))}),e.jsx("li",{children:e.jsx(g,p({},Dt.description1Bullet2))})]}),t[4]=r):r=t[4];let c;t[5]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsx("p",{className:"mb-4 font-semibold",children:e.jsx(g,p({},Dt.description1a))}),t[5]=c):c=t[5];let m;t[6]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx("p",{className:"mb-4",children:e.jsx(g,p({},Dt.description1b))}),t[6]=m):m=t[6];let u;t[7]===Symbol.for("react.memo_cache_sentinel")?(u=e.jsx(yo,{children:e.jsx(g,p({},Dt.subtitle2))}),t[7]=u):u=t[7];let d;t[8]===Symbol.for("react.memo_cache_sentinel")?(d=e.jsxs("div",{className:"text-token-text-secondary",children:[i,l,r,c,m,u,e.jsx("p",{className:"mb-4",children:e.jsx(g,ne(p({},Dt.description2),{values:{learnMoreLink:vm}}))})]}),t[8]=d):d=t[8];let f;t[9]===Symbol.for("react.memo_cache_sentinel")?(f=e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(F,{color:"primary",as:"link",to:a,openNewTab:!0,onClick:Cm,icon:rs,children:e.jsx(g,p({},Dt.redirect))})}),t[9]=f):f=t[9];let h;return t[10]!==n||t[11]!==o?(h=e.jsxs(je,{testId:"modal-age-verification-interstitial",type:"success",isOpen:n,onClose:pl,title:o,children:[d,f]}),t[10]=n,t[11]=o,t[12]=h):h=t[12],h}function Cm(){return bt.closeModal(Ut.AgeVerificationInterstitial)}function vm(t){return e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:t})}function Sm(t){return t.activeModals.has(Ut.AgeVerificationInterstitial)}var qo;const yo=Lt.h3(qo||(qo=Ct(["text-token-text-primary text-base mb-1"]))),Dt=te({title:{id:"AgeVerificationInterstitial.title",defaultMessage:"Please verify your age"},redirect:{id:"AgeVerificationInterstitial.redirect",defaultMessage:"Sign in on platform.openai.com"},description0:{id:"AgeVerificationInterstitial.description0",defaultMessage:"To continue using ChatGPT, you need to complete a brief age verification check"},subtitle1:{id:"AgeVerificationInterstitial.title1",defaultMessage:"What will happen next?"},description1Bullet1:{id:"AgeVerificationInterstitial.description1",defaultMessage:"You will be redirected to platform.openai.com where you will need to sign in."},description1Bullet2:{id:"AgeVerificationInterstitial.description2",defaultMessage:"You will then be redirected to Yoti, our age verification provider, to verify your age."},description1a:{id:"AgeVerificationInterstitial.description1a",defaultMessage:"If you are between the ages of 13 and 17, your parent or guardian must complete the age verification check on your behalf."},description1b:{id:"AgeVerificationInterstitial.description1b",defaultMessage:"The process is quick and secure."},subtitle2:{id:"AgeVerificationInterstitial.title2",defaultMessage:"Why do I need to do this?"},description2:{id:"AgeVerificationInterstitial.description2-v3",defaultMessage:"We are required to verify that our users in Italy are old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."}}),jm=()=>{var o;const t=pt(),s=(o=t==null?void 0:t.email)!=null?o:t==null?void 0:t.phone_number,n=js(i=>i.activeModals.has(Ut.LogoutConfirm)),a=()=>{bt.closeModal(Ut.LogoutConfirm)};return e.jsx(je,{testId:"modal-logout-confirm",isOpen:n,onClose:a,showCloseButton:!1,type:"warning",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:"center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[e.jsx("p",{className:"text-center text-2xl font-semibold text-balance",children:e.jsx(g,p({},nn.logoutTitle))}),e.jsx("p",{className:"text-token-text-secondary mt-4 mb-6 text-center text-lg",children:s&&e.jsx(g,ne(p({},nn.logoutConfirm),{values:{emailOrPhone:s}}))}),e.jsx(F,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"logout-confirm-button",onClick:Gs,children:e.jsx(g,p({},nn.logoutConfirmButton))}),e.jsx(F,{as:"button",size:"large",color:"secondary",fullWidth:!0,onClick:a,children:e.jsx(g,p({},nn.cancel))})]})})},nn=te({logoutTitle:{id:"biVnvR",defaultMessage:"Are you sure you want to log out?"},logoutConfirm:{id:"2aSIBu",defaultMessage:"Log out of ChatGPT as {emailOrPhone}?"},logoutConfirmButton:{id:"NeO/CC",defaultMessage:"Log out"},cancel:{id:"EORcAJ",defaultMessage:"Cancel"}});var Yo;const an=Lt.button(Yo||(Yo=Ct(["text-base rounded-xl justify-center gap-1 flex items-center bg-token-main-surface-primary border w-full p-3"])));var Qo;const _m=Lt.div(Qo||(Qo=Ct(["flex h-[1px] w-full border-b border-token-surface-tertiary"])));var $o;const wm=Lt.div($o||($o=Ct(["relative z-10 max-w-[465px] w-full flex flex-col items-start px-10 py-8 border-box bg-token-main-surface-primary border border-token-surface-tertiary shadow-elevation-01 rounded-[40px]"])));var Jo;const Nm=Lt.div(Jo||(Jo=Ct(["text-token-text-secondary flex flex-col self-end text-xs"])));var Xo;const Mo=Lt.div(Xo||(Xo=Ct(["text-token-text-secondary me-0.5 flex self-start text-xl"])));var Zo;const Co=Lt.div(Zo||(Zo=Ct(["me-2 leading-none"]))),Tm=()=>{const t=zt(),s=ni(t),n=sessionStorage.getItem("poijcwa")==="jwoid",a=ee();return!Sn(a)&&s&&n},km=()=>{const t=A(),s=tt(),{country:n}=Mr(),a=Cr({country:n,currentAccount:null,location:"PlusPurchaseInterstitialModal",shouldUsePaidSubscriptionBillingCurrency:!1}),o=a.currency,i=bn(),{costTitle:l,currencySymbol:r}=vr(i,o);let c=l;switch(a.currency){case"INR":c={id:"defaultCostInINR",defaultMessage:At(Sg).toString()};break;case"USD":{c={id:"defaultCostInDollars",defaultMessage:At(vg).toString()};break}case"EUR":{c={id:"defaultCostInEuros",defaultMessage:At(Cg).toString()};break}case"GBP":{c={id:"defaultCostInPounds",defaultMessage:At(Mg).toString()};break}case"IDR":{c={id:"defaultCostInIDR",defaultMessage:At(yg).toString()};break}case"PKR":{c={id:"defaultCostInPKR",defaultMessage:At(bg).toString()};break}case"THB":{c={id:"defaultCostInTHB",defaultMessage:At(xg).toString()};break}case"MYR":{c={id:"defaultCostInMYR",defaultMessage:At(hg).toString()};break}case"VND":{c={id:"defaultCostInVND",defaultMessage:At(pg).toString()};break}case"PHP":{c={id:"defaultCostInPHP",defaultMessage:At(fg).toString()};break}}const m=ee();y.useEffect(()=>{const x=new URLSearchParams(window.location.search).get("referrer")||document.referrer;se.logEvent("Account Pay: Interstitial Page Impression",{referrer:x})},[]);const u=window.location.href,d=h=>{if(!u.includes(to)){dt.addError("PlusPurchaseInterstitialModal: Missing pricing hash.");return}if(h==="email"){bs(m,{fallbackScreenHint:"signup",callbackUrl:u});return}bs(m,{fallbackScreenHint:"login",callbackUrl:u})},f=()=>{if(!u.includes(to)){dt.addError("PlusPurchaseInterstitialModal: Missing pricing hash.");return}bs(m,{fallbackScreenHint:"login",callbackUrl:u})};return e.jsx(je,{testId:"modal-team-purchase-interstitial",size:"fullscreen",isOpen:!0,onClose:()=>{},type:"success",className:"flex flex-col",removePopoverStyling:!0,children:e.jsxs("div",{className:"flex h-full w-full gap-8",children:[e.jsx("div",{className:"flex min-w-[320px] flex-1 flex-col items-center p-9 px-4",children:e.jsxs("div",{className:"flex w-full max-w-[360px] grow flex-col items-center justify-center gap-3",children:[e.jsx("button",{onClick:()=>s("/"),className:"mb-6 cursor-pointer p-0 md:fixed md:start-4 md:top-4 md:h-6 md:w-6","aria-label":t.formatMessage({id:"createAccount.plusHomeButtonAriaLabel",defaultMessage:"Click here to go to the home page"}),children:e.jsx(hl,{className:"h-8 w-8"})}),e.jsxs("span",{className:"text-[28px] font-normal",children:[e.jsx(g,{id:"createAccount.plusFormattedTitle",defaultMessage:"ChatGPT"}),e.jsx("span",{className:"ms-1.5 text-[28px] font-normal text-[#615EEB]",children:t.formatMessage(Vt.plus)})]}),e.jsx("span",{className:"text-[22px] font-normal",children:e.jsx(g,{id:"createAccount.plusSubTitle",defaultMessage:"Start your trial for free"})}),e.jsxs(an,{onClick:()=>d("email"),children:[e.jsx(Ki,{className:"h-6 w-6"}),t.formatMessage(Vt.email)]}),e.jsxs("div",{className:"relative my-12 w-full",children:[e.jsx(_m,{}),e.jsx("span",{className:"bg-token-bg-primary text-token-text-secondary absolute start-1/2 -top-2 -translate-x-1/2 transform px-2 text-xs font-medium",children:t.formatMessage({id:"plusPurchaseInterstitialModal.or",defaultMessage:"OR"})})]}),e.jsxs(an,{onClick:()=>d("google-oauth2"),children:[e.jsx(xl,{className:"h-6 w-6"}),e.jsx("div",{children:t.formatMessage(Vt.google)})]}),e.jsxs(an,{onClick:()=>d("windowslive"),children:[e.jsx(mg,{className:"h-6 w-6"}),e.jsx("div",{children:t.formatMessage(Vt.microsoft)})]}),e.jsxs(an,{onClick:()=>d("apple"),children:[e.jsx(yr,{className:"h-6 w-6"}),e.jsx("div",{children:t.formatMessage(Vt.apple)})]}),e.jsx("div",{className:"flex items-center gap-1 py-1.5 text-sm font-medium",children:e.jsx("div",{className:"text-token-text-secondary",children:t.formatMessage(Vt.alreadyHaveAccount,{login:h=>e.jsx("span",{className:"cursor-pointer text-green-600",onClick:f,children:h})})})})]})}),e.jsxs("div",{className:"hidden min-h-[560px] overflow-y-auto md:relative md:flex md:h-full md:flex-1 md:items-center md:justify-center md:p-4",children:[e.jsxs(wm,{children:[e.jsxs("div",{className:"mb-5 flex flex-col",children:[e.jsx("div",{className:"mb-2 flex items-center gap-2 text-[28px] font-normal",children:t.formatMessage(Vt.valueTitle)}),e.jsx("div",{className:"flex h-10 flex-col items-center",children:e.jsxs("div",{className:"mb-2 flex items-center text-[34px]",children:[e.jsx(Mo,{className:"text-token-text-tertiary",children:t.formatMessage(r.sign)}),e.jsx(Co,{className:"text-token-text-tertiary","data-testid":"base-monthly-cost",children:e.jsx("s",{children:t.formatMessage(c)})}),e.jsx(Mo,{children:t.formatMessage(r.sign)}),e.jsx(Co,{"data-testid":"promo-monthly-cost",children:t.formatNumber(0)}),e.jsxs(Nm,{children:[e.jsx("p",{className:"m-0",children:e.jsx(g,{id:"PlusPricingModalColumn.currencyCodeWithSlash",defaultMessage:"{currencyCode} / ",values:{currencyCode:t.formatMessage(r.code)}})}),e.jsx(g,p({},Vt.billedFirst30))]})]})})]}),e.jsx(Vi,{isWebRedesign:!0,isTeamColumn:!1,pricingModalColumnType:Fn.standard,advertisedFeatures:bn({isWebRedesign:!0}).advertisedFeatures})]}),e.jsx("img",{alt:"",src:ug.src,className:"absolute inset-0 z-0 h-full w-full object-cover"})]})]})})},Vt=te({email:{id:"PlusPurchaseInterstitialModal.email",defaultMessage:"Continue with Email"},google:{id:"PlusPurchaseInterstitialModal.google",defaultMessage:"Continue with Google"},microsoft:{id:"PlusPurchaseInterstitialModal.microsoft",defaultMessage:"Continue with Microsoft"},apple:{id:"PlusPurchaseInterstitialModal.apple",defaultMessage:"Continue with Apple"},alreadyHaveAccount:{id:"PlusPurchaseInterstitialModal.alreadyHaveAccount",defaultMessage:"Already have an account? <login>Login</login>"},valueTitle:{id:"PlusPurchaseInterstitialModal.valueTitle",defaultMessage:"Plus"},billedFirst30:{id:"PlusPurchaseInterstitialModal.billedFirst30",defaultMessage:"month for first 30 days"},plus:{id:"PlusPurchaseInterstitialModal.plus",defaultMessage:"Plus"}}),Em=()=>{const t=Ts(),s=Ue(),{hash:n}=zt();return bl()||!(n==="#ca-google-drive-oauth")||!s||(s==null?void 0:s.isPersonalAccount())||!t?null:e.jsx(Pm,{})},Pm=()=>{const{openSettings:t}=ds(),{gDriveOAuthConnectionId:s,isLoading:n,refetch:a}=yl();return y.useEffect(()=>{!s&&!n&&window.history.replaceState(null,"",window.location.pathname+window.location.search)},[s,n]),s?e.jsx(ai,{connectionId:s,isAdminFlow:!1,location:"url_hash",onClose:()=>{t(ye.Connectors)},onSuccess:a}):null};function Oa({testId:t="modal-generic-ineligible",title:s,message:n,buttonTitle:a,isOpen:o,onClose:i}){return e.jsx(je,{testId:t,type:"success",isOpen:o,onClose:i,showCloseButton:!0,title:s,children:e.jsxs("div",{className:"",children:[e.jsx("p",{children:n}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(ys,{title:a,color:"secondary",onClick:i,size:"large"})})]})})}const Am=({currentAccount:t,promotionData:s})=>{const{eligible:n,isLoading:a}=Rd(kg),o=tt(),i=zt(),l=ee(),r=St(l,"2675205028"),{isEligible:c,isPromoLoading:m,promoCode:u,promoError:d,promoMetadata:f}=s,h=y.useCallback(()=>{const x=new URLSearchParams(i.search);x.delete(qi);const b=x.toString();o({pathname:i.pathname,search:b?"?".concat(b):"",hash:i.hash})},[o,i]);if(y.useEffect(()=>{n&&f&&!f.schedule&&(oi.setItem(ii.PromoCode,u),h())},[a,f,n,u,h]),y.useEffect(()=>{m||c&&f==null&&dt.addError("User is eligible for promo but metadata is missing",{promoCode:u})},[u,c,f,m]),n&&!(f!=null&&f.schedule)||a)return null;if(c&&f!=null){const x=r.get("show_web_redesign",!1);return e.jsx(Dm,{currentAccount:t,onClose:h,promoCode:u,promoMetadata:f,isWebRedesign:x})}return!c&&d?e.jsx(Om,{onClose:h,promoCode:u,promoError:d}):null},Dm=({currentAccount:t,onClose:s,promoCode:n,promoMetadata:a,isWebRedesign:o})=>{const[i,l]=y.useState(null),{country:r}=Mr(),c=Cr({country:r,currentAccount:t,location:"PromoEligibleModal"}),m=a.plan_name===ri.GO?cg:Sr,u=y.useMemo(()=>ne(p({},t.subscriptionAnalyticsParams),{referrer:document.referrer,parentComponent:"PromoRedemptionModal"}),[t]);return y.useEffect(()=>{se.logEvent("Promo Eligible Modal Shown",{promoCode:n,promoMetadata:a}),Vs.logEvent("chatgpt_promo_eligible_modal_shown")},[n,a]),e.jsx(je,{testId:"modal-promo-eligible",size:"fullscreen",isOpen:!0,onClose:s,type:"success",className:"flex h-full flex-col items-center justify-center bg-white/70 dark:bg-gray-800/70",removePopoverStyling:!0,showOverlayBackground:!1,children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-6 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:e.jsx(m,{analyticsParams:u,className:"bg-token-bg-primary",billingDetails:c,currentAccount:t,onClose:s,isPromoLoading:!1,planLoading:i,promoCode:n,promoMetadata:a,setPlanLoading:l,type:Fn.promo,isWebRedesign:o})})})})},Om=({onClose:t,promoError:s,promoCode:n})=>{const a=A();return y.useEffect(()=>{se.logEvent("Promo Ineligible Modal Shown",{promoCode:n,ineligibleReason:s.code}),Vs.logEvent("chatgpt_promo_ineligible_modal_shown")},[n,s.code]),e.jsx(Oa,{testId:"modal-promo-ineligible",title:s.title,message:s.message,buttonTitle:a.formatMessage({id:"promoIneligibleModal.close",defaultMessage:"Close"}),isOpen:!0,onClose:t})};function Lm(){const t=ee(),s=Sn(t),n=zt(),a=tt(),o=ni(n),i=Ml(n),r=!!((o||i)&&s),{data:c,status:m}=rt({queryKey:["user_segments"],queryFn:async()=>{try{const f=new Promise(h=>setTimeout(()=>h({segments:{}}),2e3));return await Promise.race([re.safeGet("/user_segments"),f])}catch(f){return{segments:{}}}},enabled:r}),u=Im({isModalOpen:r,isTeamPricingRoute:i,segmentsData:c});return y.useEffect(()=>{s&&Bs.getBooleanCookie(Fs.ShowPaymentModal)&&(Bs.deleteCookie(Fs.ShowPaymentModal),jn(a,"Show payment modal cookie"))},[s,a]),y.useEffect(()=>{r?(bt.closeAllActiveModals(),bt.openModal(Ut.AccountPayment)):bt.closeModal(Ut.AccountPayment)},[r]),{isOpen:r,defaultTab:u,defaultTabLoading:r&&m==="pending"}}function Im({isModalOpen:t,isTeamPricingRoute:s,segmentsData:n}){var h;const a=Ue(),o=pt(),i=ee(),[l]=Rn(),r=l.get("default_tab"),c=((h=n==null?void 0:n.segments)==null?void 0:h.professional_user)===!0;return!a||!o||!t?"personal":r&&["personal","business"].includes(r)?r:s||a.isWorkspaceAccount()||o!=null&&Cl(o)||vl&&Sl()&&Hn(i,"647109062").get("enabled",!1)||a.isPlus()&&Hn(i,"3480162268").get("enabled",!1)||(jl(i,"chatgpt_teams_check_for_professional_user",void 0,{isProfessionalUser:c?"true":"false"}),c&&Hn(i,"422096659").get("enabled",!1))?"business":"personal"}function La({className:t}){return e.jsx("div",{className:yt("flex h-full w-full items-center justify-center",t),children:e.jsx(Ge,{})})}var ei;const Nr=Lt.div(ei||(ei=Ct(["p-6"])));function Rm({emailAddress:t,setEmailAddress:s,emailTemplate:n,validateEmailPending:a,errorMessage:o,onClickValidateEmail:i,onClickCancel:l,title:r,description:c}){return e.jsx(Nr,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-center text-2xl font-medium",children:r!=null?r:e.jsx(g,{id:"XSITb5",defaultMessage:"Verify you are a student"})}),e.jsx("div",{className:"text-token-text-tertiary mt-2 text-center text-base",children:c!=null?c:e.jsx(g,{id:"x1DjYV",defaultMessage:"To claim the student discount, verify your university email address. This email will not be linked to your ChatGPT account."})}),e.jsxs("form",{className:"mt-8 flex flex-col",onSubmit:m=>{m.preventDefault(),i()},children:[e.jsxs(Yi,{className:"mb-8",children:[e.jsx(Qi,{label:e.jsx(g,{id:"jqIBGr",defaultMessage:"University email address"})}),e.jsx($i,{className:yt(o&&"border-red-500"),placeholder:n,onChange:m=>{s(m.target.value)}}),o?e.jsx("div",{className:"text-danger mt-2 text-sm",children:o}):null]}),e.jsx(F,{type:"submit",disabled:t.length===0,loading:a,children:e.jsx(g,{id:"aDh6He",defaultMessage:"Send verification code"})}),e.jsx(F,{type:"button",color:"secondary",className:"mt-3",onClick:l,children:e.jsx(g,{id:"/7nqLd",defaultMessage:"Cancel"})})]})]})})}function Tr({programName:t,onContinue:s,onCancel:n,validDomain:a,description:o}){const i=A(),[l,r]=y.useState(""),[c,m]=y.useState(null),{mutate:u,isPending:d}=_e({mutationFn:()=>Zt.validateEmail(l,t),onSuccess:f=>{m(null),ze.logValidateEmailSuccess(),s(f.transaction_id)},onError:f=>{var x,b;const h=(b=(x=f.detail)==null?void 0:x.user_error_message)!=null?b:i.formatMessage({id:"9wITlN",defaultMessage:"Something went wrong"});ze.logValidateEmailFailure(),m(h)}});return e.jsx(Rm,{emailAddress:l,setEmailAddress:r,emailTemplate:a?"name@university.".concat(a):"",validateEmailPending:d,errorMessage:c,onClickValidateEmail:()=>{u(),ze.logClickValidateEmail()},onClickCancel:()=>{ze.logClose("add-email"),n()},title:a?e.jsx(g,{id:"referral.addEmail.title",defaultMessage:"Verify {domain} email address",values:{domain:a}}):void 0,description:o})}function Bm({currentAccount:t,hasPaidSubscription:s=!1,referralMetadata:n,checkoutDetails:a,onContinue:o,onClose:i}){const[l,r]=y.useState(null);y.useEffect(()=>{ze.logShowReferralDiscount(n.program_name,!1)},[n]);const c=Fm(n);if(!t)return null;const m=jg();return e.jsxs("div",{className:yt("relative flex h-full items-center justify-center",c?"overflow-auto":"overflow-hidden"),children:[e.jsx(Sr,{className:"bg-token-bg-primary",analyticsParams:a.plusAnalyticsParams,plusPricingPlan:m,currentAccount:t,setPlanLoading:r,planLoading:l,onUpgradeButtonClick:()=>{ze.logClickUpgradeButton(s),r(Pe.PLUS),o()},billingDetails:a.billingDetails,promoMetadata:c,onClose:i,disableForMobile:!0,type:Fn.promo,isWebRedesign:!1}),e.jsx("div",{className:yt("absolute inset-0 flex items-center justify-center",c?"invisible":"visible"),children:e.jsx(La,{})})]})}function Fm(t){var r,c;const s=A();if(!t)return;const n=((r=t==null?void 0:t.duration)==null?void 0:r.period)==="month"?(c=t==null?void 0:t.duration)==null?void 0:c.num_periods:void 0,a=s.formatMessage({id:"ofib91",defaultMessage:"Sign up for ChatGPT, and get your {months, plural, one {first month} other {first # months}} of Plus for free. Offer valid for new users after verifying you are a student."},{months:n}),o={value:t.discount.value,currency_code:t.discount.currency_code},i={num_periods:t.duration.num_periods,period:t.duration.period},l=s.formatMessage({id:"referral.promotionTypeLabel",defaultMessage:"STUDENT DISCOUNT"});return{plan_name:t.plan_names[0],summary:a,discount:o,duration:i,promotion_type:"student_discount",promotion_type_label:l,referrer_name:t.referrer_name}}function Gm({emailAddress:t,verificationCode:s,errorMessage:n,sendErrorMessage:a,validateVerificationCodeIsPending:o,isSendingVerificationCode:i,setVerificationCode:l,onValidateVerificationCode:r,onResendVerificationCode:c,onChangeEmailAddress:m,onCancel:u}){return e.jsx(Nr,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-center text-2xl font-medium",children:e.jsx(g,{id:"PjHZX7",defaultMessage:"Check your email"})}),e.jsx("div",{className:"text-token-text-tertiary mt-2 text-center text-base",children:e.jsx(g,{id:"AoOIN/",defaultMessage:"Enter the verification code we just sent to {emailAddress}",values:{emailAddress:e.jsx("span",{className:"font-medium",children:t})}})}),a?e.jsx("div",{className:"mt-8",children:e.jsx(_l,{type:"error",icon:e.jsx(da,{}),content:a})}):null,e.jsxs("form",{className:"mt-8 flex flex-col",onSubmit:d=>{d.preventDefault(),r()},children:[e.jsxs(Yi,{className:"mb-8",children:[e.jsx(Qi,{label:e.jsx(g,{id:"kLJAa+",defaultMessage:"Verification code"})}),e.jsx($i,{placeholder:"XXXXXX",value:s,onChange:d=>{l(d.target.value)}}),n?e.jsx("div",{className:"text-danger mt-2 text-sm",children:n}):null]}),e.jsx(F,{type:"submit",disabled:s.length===0,loading:o,children:e.jsx(g,{id:"NRkiYA",defaultMessage:"Continue"})}),e.jsx(F,{type:"button",className:"mt-3",color:"secondary",onClick:u,children:e.jsx(g,{id:"vyz3Kz",defaultMessage:"Cancel"})})]}),e.jsx("div",{className:"mt-8 text-center text-sm",children:e.jsx(g,{id:"2NzblW",defaultMessage:"Didn't receive the code?"})}),e.jsxs("div",{className:"mt-4 flex gap-3",children:[e.jsx(F,{loading:i,className:"flex-1",color:"secondary",onClick:c,children:e.jsx(g,{id:"L6pEyt",defaultMessage:"Resend code"})}),e.jsx(F,{className:"flex-1",color:"secondary",onClick:m,children:e.jsx(g,{id:"V8M7cm",defaultMessage:"Change email"})})]})]})})}function kr({transactionId:t,onChangeEmailAddress:s,onContinue:n,onCancel:a}){const o=A(),[i,l]=y.useState(""),[r,c]=y.useState(null),[m,u]=y.useState(null),[d,f]=y.useState(!1),h=o.formatMessage({id:"9wITlN",defaultMessage:"Something went wrong"}),{mutate:x,isPending:b}=_e({mutationFn:()=>Zt.sendVerificationCode(t),onError:S=>{var w,E;const C=(E=(w=S.detail)==null?void 0:w.user_error_message)!=null?E:h;u(C)}}),{mutate:M,isPending:v}=_e({mutationFn:()=>Zt.validateVerificationCode(t,i),onSuccess:()=>{c(null),u(null),ze.logValidateVerificationCodeSuccess();try{f(!0),n()}catch(S){f(!1),c(h)}},onError:S=>{var w,E;const C=(E=(w=S.detail)==null?void 0:w.user_error_message)!=null?E:o.formatMessage({id:"9wITlN",defaultMessage:"Something went wrong"});ze.logValidateVerificationCodeFailure(),c(C)}}),j=y.useRef(!1);return y.useEffect(()=>{j.current||(x(),ze.logSendVerificationCode(),j.current=!0)},[x]),e.jsx(Gm,{emailAddress:"",verificationCode:i,errorMessage:r,sendErrorMessage:m,validateVerificationCodeIsPending:v||d,isSendingVerificationCode:b,setVerificationCode:l,onChangeEmailAddress:()=>{ze.logClickChangeEmailButton(),s()},onValidateVerificationCode:()=>{ze.logClickValidateVerificationCode(),M()},onResendVerificationCode:()=>{ze.logClickResendVerificationCodeButton(),x()},onCancel:()=>{ze.logClose("verify-email"),a()}})}function Er(t){const s=ee(),n=wl(s,"1682643554").value;if(!t||typeof n!="object"||!n)return;const a=n.school_configurations;if(!a)return;const o=a[t];if(!o)return;const l=o.domains[0];return{programConfiguration:o,validDomain:l}}function Um({referralCode:t,onClose:s}){var v;const n=tt(),{isUnauthenticated:a}=ua(),[o,i]=y.useState({name:"loading"}),l=ee(),r=oe(l,"550432558"),c=oe(l,"3406933735"),{shouldForwardToCheckout:m,isReferrer:u,referralMetadata:d,programName:f,isReferralLoading:h}=Bd(t),{programConfiguration:x,validDomain:b}=(v=Er(f))!=null?v:{},M=Hm(x,d,h);return y.useEffect(()=>{r||s(),M&&s()},[M,s,r]),y.useEffect(()=>{u&&f&&n(Ji(f)),a&&c&&Zt.trackReferralSignup(t)},[u,f,n,a,t,c]),r?e.jsx(je,{testId:"modal-referee",type:"success",isOpen:!0,onClose:s,className:"w-full max-w-[360px] ".concat(o.name==="discount-intro"?"bg-transparent shadow-none!":""),shouldIgnoreClickOutside:!0,removePopoverStyling:!0,noPadding:!0,children:e.jsx(Wm,{rootState:o,setRootState:i,referralCode:t,validDomain:b,shouldForwardToCheckout:m,referralMetadata:d,isReferralLoading:h,onClose:s})}):null}function Wm({rootState:t,setRootState:s,referralCode:n,validDomain:a,shouldForwardToCheckout:o,referralMetadata:i,isReferralLoading:l,onClose:r}){var v;const c=jr(),m=Ue(),u=A(),d=ee(),f=!Sn(d),h=(v=m==null?void 0:m.hasPaidSubscription())!=null?v:!1,x=_e({mutationFn:()=>{if(t.name==="verify-email")return Zt.redeemReferral(n,t.transactionId);throw new Error("Invalid state for redeeming referral")}}),b=y.useCallback(async j=>{try{await Xi(j.billingDetails,j.plusAnalyticsParams)}catch(S){}},[]);y.useEffect(()=>{if(!(l||t.name!=="loading")){if(i){s({name:"discount-intro",referralMetadata:i});return}s({name:"error"})}},[l,o,i,c,b,t.name,s]);const M=Fd(n);switch(t.name){case"loading":return e.jsx(La,{className:"min-h-96"});case"discount-intro":return e.jsx(Bm,{currentAccount:m,hasPaidSubscription:h,referralMetadata:t.referralMetadata,checkoutDetails:c,onContinue:()=>{ze.logReferralDiscountContinue(),f?bs(d,{fallbackScreenHint:"signup",callback:j=>{se.logSignUpButtonClicked({provider:j,location:"Referral Discount Modal"})},callbackUrl:M}):o?b(c):s(vo(t.referralMetadata))},onClose:()=>{ze.logClose("discount"),t.referralMetadata.discount&&t.referralMetadata.duration&&oi.setItem(ii.ReferralCode,n),r()}});case"add-email":return e.jsx(Tr,{programName:t.referralMetadata.program_name,onContinue:j=>{s(zm(t.referralMetadata,j))},onCancel:r,validDomain:a,description:a?e.jsx(g,{id:"referee.addEmail.description",defaultMessage:"To claim the student discount, you must have a valid {domain} email address. This email will not be linked to your ChatGPT account.",values:{domain:a}}):void 0});case"verify-email":return e.jsx(kr,{transactionId:t.transactionId,onChangeEmailAddress:()=>{s(vo(t.referralMetadata))},onContinue:async()=>{await x.mutateAsync(),b(c)},onCancel:r});case"error":return e.jsx(Oa,{title:u.formatMessage({id:"referee.genericIneligibleModal.title",defaultMessage:"Promo Unavailable"}),message:e.jsx(g,{id:"referee.genericIneligibleModal.message",defaultMessage:"Looks like you don’t meet the eligibility criteria for this promotion. Learn more about <link>ChatGPT plans.</link>",values:{link:j=>e.jsx("a",{href:"https://openai.com/chatgpt/pricing/",className:"underline",children:j})}}),buttonTitle:u.formatMessage({id:"referee.genericIneligibleModal.buttonTitle",defaultMessage:"Close"}),isOpen:!0,onClose:r})}}function Hm(t,s,n){return n?!1:s&&!t?!0:s?!(s==null?void 0:s.program_name):!1}function vo(t){return{name:"add-email",referralMetadata:t}}function zm(t,s){return{name:"verify-email",referralMetadata:t,transactionId:s}}const ls=te({referralLinkModalTitle:{id:"referralLinkModal.title",defaultMessage:"Refer classmates, earn rewards"},referralLinkModalMessage:{id:"referralLinkModal.message",defaultMessage:"Get a friend to sign up for ChatGPT, and you’ll both get a free month of Plus."},referralLinkModalDisclaimer:{id:"referralLinkModal.disclaimer",defaultMessage:"For every ChatGPT user with a valid university email address you refer, you get {discount} your next billing cycle. You can refer up to 12 people, and discounts are automatically applied."}});function Pr({referralMetadata:t,referralCode:s,onClose:n}){const a=A(),o=me(),{discount:i}=t,l=Zi(i),r=wa(a,i.value||0,i.currency_code);return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-token-sidebar-surface mx-auto flex h-[64px] w-[104px] items-center justify-center rounded-md bg-[#AF52DE] px-4 py-2 text-[40px]",children:[e.jsx("span",{className:"text-[20px]",children:e.jsx(g,p({},l.sign))}),i.value]}),e.jsx("p",{className:"text-token-text-primary mt-6 text-2xl font-semibold",children:e.jsx(g,p({},ls.referralLinkModalTitle))}),e.jsx("p",{className:"text-token-text-primary mt-2 text-base",children:e.jsx(g,p({},ls.referralLinkModalMessage))}),e.jsx("div",{className:"mt-6 flex w-full items-center justify-center rounded-md border-[1px] border-[#AF52DE] bg-[#8C43A00D] py-4 text-center",children:e.jsx("span",{className:"text-[15px] text-[#AF52DE]",children:s?na(s):e.jsx(Ge,{})})}),e.jsxs("div",{className:"mt-6 flex w-full flex-col items-center space-y-3",children:[e.jsx(F,{color:"primary",onClick:()=>{s&&_a(na(s),o).then(()=>{ze.logCopyReferralLink(),o.success(a.formatMessage({id:"1TiBkD",defaultMessage:"Copied referral link to clipboard"}))})},size:"large",className:"w-full",children:e.jsx(g,{id:"1HBlf+",defaultMessage:"Copy referral link"})}),e.jsx(F,{color:"secondary",onClick:n,size:"large",className:"w-full",children:e.jsx(g,{id:"6NQvfv",defaultMessage:"Close"})})]}),e.jsx("p",{className:"text-token-text-tertiary mt-6 text-start text-xs",children:e.jsx(g,ne(p({},ls.referralLinkModalDisclaimer),{values:{discount:r}}))})]})}function Km({referralMetadata:t,referralCode:s,onClose:n}){return e.jsx(Pr,{referralMetadata:t,referralCode:s,onClose:n})}function Vm({referralMetadata:t,transactionId:s,onClose:n}){const a=ee(),o=us(a),[i,l]=y.useState(null),{mutate:r}=_e({mutationFn:()=>Zt.createReferralCode(s),onSuccess:u=>{l(u.referral_code)},onError:u=>{}}),c=y.useRef(!1);y.useEffect(()=>{c.current||(c.current=!0,r(),ze.logShowReferrerConclusion())},[r]);const{program_name:m}=t;return!o||!m?null:e.jsx(Pr,{referralMetadata:t,referralCode:i,onClose:()=>{ze.logClose("referrer-conclusion"),n()}})}function qm({referralMetadata:t,onContinue:s,onClose:n}){const a=A(),o=ee(),i=us(o);y.useEffect(()=>{ze.logShowReferralLinkGenerationModal(t.program_name)},[t]);const{discount:l,program_name:r}=t;if(!i||!r)return null;const c=Zi(l),m=wa(a,l.value||0,l.currency_code);return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-token-sidebar-surface mx-auto flex h-[64px] w-[104px] items-center justify-center rounded-md bg-[#AF52DE] px-4 py-2 text-[40px]",children:[e.jsx("span",{className:"text-[20px]",children:e.jsx(g,p({},c.sign))}),l.value]}),e.jsx("p",{className:"text-token-text-primary mt-6 text-2xl font-semibold",children:e.jsx(g,p({},ls.referralLinkModalTitle))}),e.jsx("p",{className:"text-token-text-primary mt-2 text-base",children:e.jsx(g,p({},ls.referralLinkModalMessage))}),e.jsxs("div",{className:"mt-6 flex w-full flex-col items-center space-y-3",children:[e.jsx(F,{color:"primary",onClick:s,size:"large",className:"w-full",children:e.jsx(g,{id:"aESB6r",defaultMessage:"Get my referral link"})}),e.jsx(F,{color:"secondary",onClick:()=>{ze.logClickReferrerIntroNotNowButton(),n()},size:"large",className:"w-full",children:e.jsx(g,{id:"i1qUk7",defaultMessage:"Not Now"})})]}),e.jsx("p",{className:"text-token-text-tertiary mt-6 text-start text-xs",children:e.jsx(g,ne(p({},ls.referralLinkModalDisclaimer),{values:{discount:m}}))})]})}function Ym({program:t,onClose:s}){var h;const{referralMetadata:n,referralCode:a,transactionId:o,programName:i,isReferralLoading:l,referralError:r}=Gd(t),{programConfiguration:c,validDomain:m}=(h=Er(i))!=null?h:{},u=$m(c,n,l),d=ee(),f=oe(d,"550432558");return y.useEffect(()=>{f||s(),u&&s()},[u,s,f]),f?e.jsx(je,{testId:"modal-referrer",type:"success",isOpen:!0,onClose:s,showCloseButton:!0,className:"w-full max-w-[390px] pt-2",removePopoverStyling:!0,children:e.jsx(Qm,{referralMetadata:n,referralCode:a,transactionId:o,referralError:r,validDomain:m,isReferralLoading:l,shouldRedirect:u,onClose:s})}):null}function Qm({referralMetadata:t,referralCode:s,transactionId:n,referralError:a,validDomain:o,shouldRedirect:i,isReferralLoading:l,onClose:r}){const c=A(),m=ee(),{isUnauthenticated:u}=ua(),[d,f]=y.useState({name:"loading"});switch(y.useEffect(()=>{if(!l){if(i){r();return}if(a){f({name:"error",title:a.title,message:a.message});return}if(t){f(s?Jm(t,s):n?jo(t,n):{name:"intro",referralMetadata:t});return}f({name:"error"})}},[l,a,t,s,n,i,r]),d.name){case"loading":return e.jsx(La,{className:"min-h-96"});case"already-enrolled":return e.jsx(Km,{referralMetadata:d.referralMetadata,referralCode:d.referralCode,onClose:r});case"intro":return e.jsx(qm,{referralMetadata:d.referralMetadata,onClose:r,onContinue:()=>{u?bs(m,{fallbackScreenHint:"signup",callbackUrl:Ji(d.referralMetadata.program_name)}):f(So(d.referralMetadata))}});case"add-email":return e.jsx(Tr,{programName:d.referralMetadata.program_name,onContinue:h=>{f(Xm(d.referralMetadata,h))},onCancel:r,validDomain:o,description:o?e.jsx(g,{id:"referrer.addEmail.description",defaultMessage:"To generate a referral code, you must have a valid {domain} email address. This email will not be linked to your ChatGPT account.",values:{domain:o}}):void 0});case"verify-email":return e.jsx(kr,{transactionId:d.transactionId,onChangeEmailAddress:()=>{f(So(d.referralMetadata))},onContinue:()=>{f(jo(d.referralMetadata,d.transactionId))},onCancel:r});case"conclusion":return e.jsx(Vm,{referralMetadata:d.referralMetadata,transactionId:d.transactionId,onClose:r});case"error":return e.jsx(Oa,{title:c.formatMessage({id:"referrer.genericIneligibleModal.title",defaultMessage:"Promo Unavailable"}),message:e.jsx(g,{id:"referrer.genericIneligibleModal.message",defaultMessage:"Looks like you don't meet the eligibility criteria for this promotion. Learn more about <link>ChatGPT plans.</link>",values:{link:h=>e.jsx("a",{href:"https://openai.com/chatgpt/pricing/",className:"underline",children:h})}}),buttonTitle:c.formatMessage({id:"referrer.genericIneligibleModal.buttonTitle",defaultMessage:"Close"}),isOpen:!0,onClose:r})}}function $m(t,s,n){return n?!1:t?s?!(s==null?void 0:s.program_name):!1:!0}function Jm(t,s){return{name:"already-enrolled",referralMetadata:t,referralCode:s}}function So(t){return{name:"add-email",referralMetadata:t}}function Xm(t,s){return{name:"verify-email",referralMetadata:t,transactionId:s}}function jo(t,s){return{name:"conclusion",referralMetadata:t,transactionId:s}}function Zm(){"use forget";const t=ot.c(6),s=tt(),{isOpen:n,program:a}=Nl(),{isOpen:o,referralCode:i}=Tl();let l;return t[0]!==o||t[1]!==n||t[2]!==s||t[3]!==a||t[4]!==i?(l=n&&a?e.jsx(Ym,{program:a,onClose:()=>s({hash:""})}):o&&i?e.jsx(Um,{referralCode:i,onClose:()=>s({hash:""})}):null,t[0]=o,t[1]=n,t[2]=s,t[3]=a,t[4]=i,t[5]=l):l=t[5],l}function yn(){"use forget";const t=ot.c(1);let s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s=e.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-full px-2.5 py-1.5 text-xs text-blue-400",children:e.jsx(g,{id:"GRxNeD",defaultMessage:"Parent"})}),t[0]=s):s=t[0],s}function ef({amphoraId:t,invite:s,onBack:n}){var x,b;const a=A(),o=me(),i=Ee(),[l,r]=y.useState(!1),[c,m]=y.useState(!1),u=_e({mutationFn:async()=>{const M=s.account_identifier,v=s.email?{email:s.email}:M?{account_identifier:M}:null;if(!v)throw new Error("Missing invite identifier");await re.safePost("/amphora/{amphora_id}/remove",{parameters:{path:{amphora_id:t}},requestBody:v})},onSuccess:async()=>{await _n(i),n()},onError:M=>{const v=M instanceof Error?M.message:String(M);o.danger(a.formatMessage(Je.cancelInviteError,{error:v}),{toastId:"amphora_invite_cancel"})}}),d=_e({mutationFn:async()=>{var v;const M=(v=s.email)!=null?v:s.account_identifier;if(!M)throw new Error("Missing invite identifier");await re.safePost("/amphora/{amphora_id}/members/resend",{parameters:{path:{amphora_id:t}},requestBody:{account_identifier:M}})},onSuccess:async()=>{r(!1),m(!0),o.success(a.formatMessage(Je.resendInviteSuccess)),await i.invalidateQueries({queryKey:["amphora",t]})},onError:M=>{const v=M instanceof Error?M.message:String(M);o.danger(a.formatMessage(Je.resendInviteError,{error:v}),{toastId:"amphora_invite_resend"})}}),f=(b=(x=s.email)!=null?x:s.account_identifier)!=null?b:"",h=f||a.formatMessage(Je.missingIdentifier);return e.jsxs(xe,{title:e.jsxs("button",{"aria-label":a.formatMessage(Je.back),onClick:n,className:"hover:bg-token-bg-tertiary -ms-3 flex items-center gap-2 rounded-full px-3 py-1",children:[e.jsx(Qs,{className:"icon-sm"}),e.jsx("span",{children:e.jsx(g,p({},Je.back))})]}),noBorder:!0,headerInteractable:!0,children:[e.jsx("div",{className:"border-token-border-light my-3 rounded-xl border p-4",children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-token-bg-tertiary text-token-text-tertiary flex h-12 w-12 shrink-0 items-center justify-center rounded-full",children:e.jsx(li,{className:"icon-lg"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"text-sm",children:h}),e.jsxs("div",{className:"text-token-text-secondary mt-0.5 flex items-center gap-1 text-sm",children:[e.jsx(ga,{className:"icon-sm"}),e.jsx("span",{children:e.jsx(g,p({},Je.invitationSent))})]})]})]}),s.role==="owner"&&e.jsx(yn,{})]})}),e.jsxs("div",{className:"flex flex-col items-start py-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(F,{color:"secondary",onClick:()=>r(!0),disabled:d.isPending||u.isPending,children:e.jsx(g,p({},Je.resendInvite))}),e.jsx(F,{color:"danger-outline",onClick:()=>u.mutate(),disabled:u.isPending,children:e.jsx(g,p({},Je.cancelInvite))})]}),e.jsx("p",{className:"text-token-text-tertiary mt-6 text-sm",children:s.role==="owner"?e.jsx(g,p({},Je.childLinkParentInviteDescription)):e.jsx(g,ne(p({},Je.learnMoreVesselControls),{values:{LearnMoreLink:e.jsx(ks,{href:"https://help.openai.com/en/articles/12315553-parental-controls-faq",className:"underline",children:e.jsx(g,{id:"LGjcbz",defaultMessage:"Learn more"})})}}))})]}),e.jsx(je,{testId:"modal-amphora-resend-invite",isOpen:l,onClose:()=>r(!1),size:"custom",showCloseButton:!0,className:"max-w-md text-sm",title:a.formatMessage(Je.resendConfirmTitle),description:e.jsx("p",{children:a.formatMessage(Je.resendConfirmDesc)}),primaryButton:e.jsx(F,{onClick:()=>d.mutate(),disabled:d.isPending,children:a.formatMessage(Je.resendSendButton)}),secondaryButton:e.jsx(F,{color:"secondary",onClick:()=>r(!1),children:a.formatMessage(Je.resendCancelButton)}),children:e.jsx("div",{className:"mt-4",children:e.jsx(Ss,{name:"identifier",ariaLabel:!1,className:"",type:"text",value:f,disabled:!0,placeholder:""})})}),e.jsx(je,{testId:"modal-amphora-resend-invite-success",isOpen:c,onClose:()=>m(!1),size:"custom",showCloseButton:!0,className:"max-w-md text-sm",title:a.formatMessage(Je.resendSentTitle),description:e.jsx("p",{children:a.formatMessage(Je.resendSentDesc,{identifier:f})}),primaryButton:e.jsx(F,{onClick:()=>m(!1),children:a.formatMessage(Je.doneButton)})})]})}const Je=te({back:{id:"amphora.invited.back",defaultMessage:"Back"},invitationSent:{id:"amphora.invited.status.sent",defaultMessage:"Invitation sent"},cancelInvite:{id:"amphora.invited.cancel",defaultMessage:"Cancel invitation"},cancelInviteError:{id:"amphora.invited.cancel.error",defaultMessage:"Unable to cancel invite: {error}"},resendInvite:{id:"amphora.invited.resend",defaultMessage:"Resend invitation"},resendInviteError:{id:"amphora.invited.resend.error",defaultMessage:"Unable to resend invite: {error}"},resendInviteSuccess:{id:"amphora.invited.resend.success",defaultMessage:"Invitation sent"},resendConfirmTitle:{id:"amphora.invited.resend.confirmTitle",defaultMessage:"Resend invitation"},resendConfirmDesc:{id:"amphora.invited.resend.confirmDesc",defaultMessage:"We’ll send another invite to your family member. If they’re new to ChatGPT, they’ll be asked to create an account."},resendCancelButton:{id:"amphora.invited.resend.cancel",defaultMessage:"Cancel"},resendSendButton:{id:"amphora.invited.resend.send",defaultMessage:"Send"},resendSentTitle:{id:"amphora.invited.resend.sentTitle",defaultMessage:"Sent!"},resendSentDesc:{id:"amphora.invited.resend.sentDesc",defaultMessage:"We sent {identifier} a new invite. If they’re new to ChatGPT, they’ll be asked to create a new account."},doneButton:{id:"amphora.invited.done",defaultMessage:"Done"},missingIdentifier:{id:"amphora.invited.missingIdentifier",defaultMessage:"[missing]"},learnMoreVesselControls:{id:"amphora.invited.learnMoreVesselControls2",defaultMessage:"{LearnMoreLink} about parental controls"},childLinkParentInviteDescription:{id:"amphora.invited.childLinkParentInviteDescription",defaultMessage:"You can link to one parent at a time."}});function tf({forceInviteeRole:t=null,initialInviteMethod:s="email",initialEmail:n="",initialPhone:a="",initialRole:o="",isOpen:i=!0,isSubmitting:l=!1,onClose:r,onSubmit:c,showCloseButton:m=!0}){const u=A(),[d,f]=y.useState(s),[h,x]=y.useState(n),[b,M]=y.useState(a),[v,j]=y.useState(null),[S,C]=y.useState(null),[w,E]=y.useState(()=>{var k;return(k=t!=null?t:o)!=null?k:""}),_=h.trim(),D=b.trim(),N=d==="email"?_:D,P=!w||l||N.length===0||(d==="email"?v!=null:S!=null),T=e.jsx(ks,{href:"https://help.openai.com/en/articles/12315553-parental-controls-faq",className:"underline",children:e.jsx(g,{id:"0M5wS5",defaultMessage:"Learn more"})});return e.jsxs(je,{testId:"modal-invite-members-to-amphora",isOpen:i,onClose:r,size:"custom",showCloseButton:m,className:"max-w-md text-sm",title:t==null?u.formatMessage(Xe.inviteMemberModalTitle):u.formatMessage(Xe.inviteChildModalTitle),children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("label",{htmlFor:d==="email"?"email":"amphora-invite-phone",className:"text-sm font-medium",children:u.formatMessage(d==="email"?Xe.invitesInputLabel:Xe.invitesPhoneInputLabel)}),e.jsx("button",{type:"button",className:"text-token-text-secondary text-sm underline underline-offset-[2px] [text-decoration-skip-ink:none]",onClick:()=>f(k=>{const O=k==="email"?"phone":"email";return j(null),C(null),O}),children:u.formatMessage(d==="email"?Xe.switchToPhoneLink:Xe.switchToEmailLink)})]}),d==="email"?e.jsxs(e.Fragment,{children:[e.jsx(Ss,{name:"email",ariaLabel:!1,type:"email",value:h,onChange:k=>{x(k.target.value),v&&j(null)},autoFocus:!0,placeholder:u.formatMessage(Xe.invitesInputPlaceholder),className:yt(v&&"border-red-500 focus-within:border-red-500 focus-within:ring-red-500")}),v?e.jsx("p",{className:"mt-1 text-xs text-red-500",children:v}):null]}):e.jsx(Bg,{id:"amphora-invite-phone",name:"account_identifier",value:b,setValue:k=>{M(k),S&&C(null)},label:u.formatMessage(Xe.invitesPhoneInputLabel),error:S!=null?S:void 0,appearance:{layout:"inline",showDialCodePrefix:!1,rounded:"lg",densePadding:!0,triggerShowOnlyDialCode:!0,fullWidthJustifyDialCode:!1,placeholderTextSize:"sm",dropdownPanelWidthPx:320}}),e.jsx("p",{className:"text-token-text-tertiary mt-2 text-xs",children:u.formatMessage(Xe.invitesInputHelperText)})]}),t==null&&e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("p",{className:"text-sm font-medium",children:u.formatMessage(Xe.relationshipQuestion)}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(Xt.Root,{className:"text-token-text-primary flex flex-col gap-2 text-sm",value:w,onValueChange:k=>E(k),children:[e.jsx(Xt.Item,{value:"owner",label:u.formatMessage(Xe.roleOwner),children:e.jsx(Xt.Indicator,{})}),e.jsx(Xt.Item,{value:"member_role",label:u.formatMessage(Xe.roleMember),children:e.jsx(Xt.Indicator,{})})]})})]}),e.jsx("div",{className:yt("overflow-clip duration-300 [interpolate-size:allow-keywords] motion-safe:transition-[height]",w?"h-max":"h-0"),children:w==="owner"?e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(g,ne(p({},Xe.relationshipInfoForMember),{values:{LearnMoreLink:T}}))}):w==="member_role"?e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(g,ne(p({},Xe.relationshipInfoForOwner),{values:{LearnMoreLink:T}}))}):null})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(F,{color:"secondary",onClick:r,children:u.formatMessage(Xe.cancelButton)}),e.jsx(F,{onClick:()=>{const k=w==="owner"?"owner":"member_role";if(N){if(j(null),C(null),d==="email"){if(!Gg.test(_)){j(u.formatMessage(Xe.invalidEmailError));return}}else if(!Fg(D)){C(u.formatMessage(Xe.invalidPhoneError));return}c({accountIdentifier:N,inviteMethod:d,role:k})}},disabled:P,children:e.jsx(g,p({},Xe.modalInviteButton))})]})]})}const Xe=te({inviteMemberModalTitle:{id:"amphora.inviteMemberModalTitle",defaultMessage:"Invite family member"},inviteChildModalTitle:{id:"amphora.inviteChildModalTitle",defaultMessage:"Add a child"},invitesInputPlaceholder:{id:"amphora.members.invitesInputPlaceholder2",defaultMessage:"name@email.com"},invitesInputLabel:{id:"amphora.members.invitesInputLabel",defaultMessage:"Email address"},invitesPhoneInputLabel:{id:"amphora.members.invitesPhoneInputLabel",defaultMessage:"Phone number"},invitesInputHelperText:{id:"amphora.members.invitesInputHelperText2",defaultMessage:"If your family member is new to ChatGPT, they'll be asked to create an account."},switchToPhoneLink:{id:"amphora.members.usePhoneLink",defaultMessage:"Use phone"},switchToEmailLink:{id:"amphora.members.useEmailLink",defaultMessage:"Use email"},invalidEmailError:{id:"amphora.members.invalidEmailError",defaultMessage:"Enter a valid email address."},invalidPhoneError:{id:"amphora.members.invalidPhoneError",defaultMessage:"Enter a valid phone number."},cancelButton:{id:"amphora.members.cancelButton",defaultMessage:"Cancel"},modalInviteButton:{id:"amphora.members.modalInviteButton",defaultMessage:"Send"},relationshipQuestion:{id:"amphora.members.relationshipQuestion",defaultMessage:"This person is:"},relationshipInfoForOwner:{id:"amphora.members.relationshipInfoForOwner2",defaultMessage:"If your child accepts, you'll be able to manage some of their settings, set time limits, and add safeguards that work for your family. You won't have access to details about your teen's conversations with ChatGPT, except in certain rare safety circumstances. You can unlink accounts anytime. {LearnMoreLink}"},relationshipInfoForMember:{id:"amphora.members.relationshipInfoForMember2",defaultMessage:"Your parent or guardian will be able to adjust certain features, set time limits, and add safeguards to help guide your experience. We won't share details of your conversations with ChatGPT, except in certain rare safety circumstances. You can unlink accounts anytime. {LearnMoreLink}"},roleMember:{id:"amphora.members.inviteModalRoleMember",defaultMessage:"My child"},roleOwner:{id:"amphora.members.inviteModalRoleOwner",defaultMessage:"My parent or guardian"}});function sf(t){"use forget";const s=ot.c(19),{amphora_id:n,onClose:a,forceInviteeRole:o}=t,i=A(),l=Ee(),r=me(),[c,m]=y.useState(n!=null?n:null);let u;s[0]!==c?(u=async j=>{var _;const{accountIdentifier:S,role:C}=j;let w=!1,E=c;if(!E){const D=C==="owner"?"member_role":"owner",N=await re.safePost("/amphora",{requestBody:{role:D}});if(E=(_=N==null?void 0:N.id)!=null?_:null,!E)throw window.location.reload(),new Error("Failed to create amphora group");w=!0,m(E)}if(!E)throw new Error("Failed to determine amphora id");return await re.safePost("/amphora/{amphora_id}/members",{parameters:{path:{amphora_id:E}},requestBody:{members:[{account_identifier:S,role:C}]}}),{amphoraId:E,createdNewAmphora:w}},s[0]=c,s[1]=u):u=s[1];let d;s[2]!==a||s[3]!==l?(d=j=>{const{amphoraId:S,createdNewAmphora:C}=j;C&&l.invalidateQueries({queryKey:["amphora"],exact:!0}),S&&l.invalidateQueries({queryKey:["amphora",S]}),a()},s[2]=a,s[3]=l,s[4]=d):d=s[4];let f;s[5]!==i||s[6]!==r?(f=j=>{const S=j instanceof Error?j.message:String(j);r.danger(i.formatMessage(nf.inviteError,{error:S}),{toastId:"amphora_invite_error"})},s[5]=i,s[6]=r,s[7]=f):f=s[7];let h;s[8]!==u||s[9]!==d||s[10]!==f?(h={mutationFn:u,onSuccess:d,onError:f},s[8]=u,s[9]=d,s[10]=f,s[11]=h):h=s[11];const x=_e(h),b=o!=null?o:null;let M;s[12]!==x?(M=j=>{const{accountIdentifier:S,role:C}=j;return x.mutate({accountIdentifier:S,role:C})},s[12]=x,s[13]=M):M=s[13];let v;return s[14]!==x.isPending||s[15]!==a||s[16]!==b||s[17]!==M?(v=e.jsx(tf,{forceInviteeRole:b,onClose:a,onSubmit:M,isSubmitting:x.isPending}),s[14]=x.isPending,s[15]=a,s[16]=b,s[17]=M,s[18]=v):v=s[18],v}const nf=te({inviteError:{id:"amphora.members.inviteError",defaultMessage:"Unable to send invite: {error}"}});function Ia(t){"use forget";var x;const s=ot.c(22),{user:n}=t,a=A();let o;s[0]!==a||s[1]!==n.email||s[2]!==n.name?(o=n.name||n.email||a.formatMessage({id:"VB4+Q+",defaultMessage:"Member"}),s[0]=a,s[1]=n.email,s[2]=n.name,s[3]=o):o=s[3];const i=o,l=(x=n.profile_picture_url)!=null?x:void 0;let r;s[4]!==i||s[5]!==l?(r=e.jsx(er,{user:{picture:l,name:i},size:"large"}),s[4]=i,s[5]=l,s[6]=r):r=s[6];let c;s[7]!==i?(c=e.jsx("div",{className:"text-token-text-primary",children:i}),s[7]=i,s[8]=c):c=s[8];let m;s[9]!==n.email?(m=n.email?e.jsx("div",{className:"text-token-text-secondary",children:n.email}):null,s[9]=n.email,s[10]=m):m=s[10];let u;s[11]!==c||s[12]!==m?(u=e.jsxs("div",{className:"flex flex-col truncate text-sm",children:[c,m]}),s[11]=c,s[12]=m,s[13]=u):u=s[13];let d;s[14]!==r||s[15]!==u?(d=e.jsxs("div",{className:"flex items-center gap-3",children:[r,u]}),s[14]=r,s[15]=u,s[16]=d):d=s[16];let f;s[17]!==n.role?(f=n.role==="owner"&&e.jsx(yn,{}),s[17]=n.role,s[18]=f):f=s[18];let h;return s[19]!==d||s[20]!==f?(h=e.jsx("div",{className:"border-token-border-light my-3 rounded-xl border p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[d,f]})}),s[19]=d,s[20]=f,s[21]=h):h=s[21],h}function af(t,s=void 0,n=void 0){return rt({queryKey:["amphora",t,n?n.join(","):void 0],queryFn:async()=>await re.safeGet("/amphora/{amphora_id}/members",{parameters:{path:{amphora_id:t}}}),placeholderData:s,enabled:!!t})}const _o={IMAGE_GENERATION:"chatgpt.workspace.feature.image-gen.access",VOICE:"chatgpt.workspace.feature.voice.access"},vt={U18_MODEL_INSTRUCTIONS_ENABLED:["3VyEPC5dTP_model_instructions_enabled"],SORA_INFINITE_SCROLL_ENABLED:["bH2sVuQ5TJ_enabled"],SORA_PERSONALIZED_FEED_ENABLED:["wF9qLt3XpB_enabled"],SORA_DIRECT_MESSAGES_DISABLED:["calpico_is_enabled"],TRAINING_ALLOWED:["training_allowed"],MEMORY:["sunshine","moonshine"],BLACKOUT_HOURS:["rKAMeJfyrM_settings"]},Ra=t=>Array.isArray(t);function of(t,s,n){var a;if(Ra(s)){for(const o of s)if((n==null?void 0:n[o])===!0)return!0;return!1}return(a=t==null?void 0:t.includes(s))!=null?a:!1}function rf(t,s){var a;const n=(a=t==null?void 0:t.amphora_locks)!=null?a:void 0;if(!n)return!1;if(Ra(s)){for(const o of s)if(n[o]===!0)return!0;return!1}return n[s]===!0}var ra=(t=>(t.Blackout="blackout",t))(ra||{});const lt=te({modelPolicyLabel:{id:"amphora.permissions.modelPolicyLabel",defaultMessage:"Model policy"},personalizationLabel:{id:"amphora.permissions.personalizationLabel",defaultMessage:"Memory"},dataControlsLabel:{id:"amphora.permissions.dataControlsLabel",defaultMessage:"Training"},VyEPC5dTPModelPolicyLabel:{id:"amphora.permissions.VyEPC5dTPModelPolicyLabel3",defaultMessage:"Reduce sensitive content"},u18Explainer:{id:"amphora.permissions.u18Explainer3",defaultMessage:"Add extra safeguards to help protect teens. {LearnMoreLink}"},VyEPC5dTPModelPolicyAria:{id:"amphora.permissions.VyEPC5dTPModelPolicyAria2",defaultMessage:"Enable teen-safe model policy for {email}"},referenceMemoriesLabel:{id:"amphora.permissions.referenceMemoriesLabel",defaultMessage:"Reference saved memories"},referenceMemoriesAria:{id:"amphora.permissions.referenceMemoriesAria",defaultMessage:"Allow referencing saved memories for {email}"},improveModelLabel:{id:"amphora.permissions.improveModelLabel",defaultMessage:"Improve the model for everyone"},improveModelAria:{id:"amphora.permissions.improveModelAria",defaultMessage:"Allow improving the model for everyone for {email}"},parentalControlsTab:{id:"settingsModal.parentalControlsTab",defaultMessage:"Parental controls"},removeMemberError:{id:"amphora.members.removeMemberError",defaultMessage:"Unable to remove member: {error}"}});lt.modelPolicyLabel,vt.U18_MODEL_INSTRUCTIONS_ENABLED,lt.VyEPC5dTPModelPolicyLabel,lt.VyEPC5dTPModelPolicyAria,lt.u18Explainer,lt.personalizationLabel,vt.MEMORY,lt.referenceMemoriesLabel,lt.referenceMemoriesAria,lt.dataControlsLabel,vt.TRAINING_ALLOWED,lt.improveModelLabel,lt.improveModelAria;function lf(t){const s=A(),n=me(),a=Ee();return _e({mutationFn:({userId:o,permissions:i})=>re.safePost("/amphora/{amphora_id}/members/{user_id}/permissions",{parameters:{path:{amphora_id:t,user_id:o}},requestBody:{permissions:i}}),onMutate:async({userId:o,permissions:i})=>{const l=["amphora",t,o,"permissions"];await a.cancelQueries({queryKey:l});const r=a.getQueryData(l);return a.setQueryData(l,c=>ne(p({},c),{permissions:i})),{queryKey:l,previous:r}},onError:o=>{n.danger(s.formatMessage({id:"amphora.permissions.updatePermissionError",defaultMessage:"Unable to update permissions: {error}"},{error:o.message}))},onSettled:(o,i,l,r)=>{const c=l==null?void 0:l.userId,m=r==null?void 0:r.queryKey,u=Array.isArray(m)?m:c?["amphora",t,c,"permissions"]:void 0;i&&r&&r.previous&&Array.isArray(u)&&a.setQueryData(u,r.previous),c&&a.invalidateQueries({queryKey:["amphora",t,c,"permissions"]})}})}function Ar(t){const s=A(),n=me(),a=Ee(),o=pt();return _e({mutationFn:({userId:i,feature:l,value:r})=>re.safePatch("/amphora/{amphora_id}/members/{user_id}/settings",{parameters:{path:{amphora_id:t,user_id:i}},requestBody:{feature:l,value:r}}),onMutate:async({userId:i,feature:l,value:r})=>{const c=["amphora",t,i,"permissions"];await a.cancelQueries({queryKey:c});const m=a.getQueryData(c);return a.setQueryData(c,u=>{var f;const d=(f=u==null?void 0:u.settings)!=null?f:{};return ne(p({},u),{settings:ne(p({},d),{[l]:r})})}),{queryKey:c,previous:m}},onError:i=>{n.danger(s.formatMessage({id:"amphora.permissions.updatePermissionError",defaultMessage:"Unable to update permissions: {error}"},{error:i.message}))},onSettled:(i,l,r)=>{const c=r==null?void 0:r.userId;c&&a.invalidateQueries({queryKey:["amphora",t,c,"permissions"]}),c&&(o!=null&&o.id)&&c===o.id&&a.invalidateQueries(kl())}})}function cf(t,s,n){const a=Array.isArray(t)?t:[];return n?Array.from(new Set([...a,s])):a.filter(o=>o!==s)}function df(t,s,n){const a=[];for(const o of s)(t==null?void 0:t[o])===!0!==n&&a.push({feature:o,value:n});return a}function uf(t){const{memberId:s,currentPerms:n,currentSettings:a,toggleKey:o,enabled:i,updatePermission:l,patchSetting:r}=t;if(Ra(o)){const m=df(a,o,i);for(const u of m)r({userId:s,feature:u.feature,value:u.value});return}const c=cf(n,o,i);l({userId:s,permissions:c})}function gf(t){const s=lf(t),n=Ar(t);return{triggerToggle:a=>uf(ne(p({},a),{updatePermission:s.mutate,patchSetting:n.mutate}))}}function Ba(t){const s=A(),n=me(),a=Ee();return _e({mutationFn:({userId:o})=>re.safePost("/amphora/{amphora_id}/remove",{parameters:{path:{amphora_id:t}},requestBody:{user_id:o}}).catch(i=>{n.danger(s.formatMessage(lt.removeMemberError,{error:i.message}),{toastId:"amphora_member_remove"})}),onSuccess:(o,{userId:i})=>{a.removeQueries({predicate:({queryKey:l})=>!Array.isArray(l)||l[0]!=="amphora"||l[1]!==t||l.length!==4||l[3]!=="permissions"?!1:l[2]===i})}})}function mf(t){const{data:s,isLoading:n,error:a}=af(t);return{members:y.useMemo(()=>{var l;const i=(l=s==null?void 0:s.items)!=null?l:[];return Array.isArray(i)?i.filter(r=>typeof r=="object"&&r!=null&&"status"in r).filter(r=>r.status==="accepted").filter(r=>typeof r.user_id=="string"):[]},[s]),isLoading:n,error:a,raw:s}}function ff(t,s){return rt({queryKey:["amphora",t,s,"permissions"],queryFn:()=>re.safeGet("/amphora/{amphora_id}/members/{user_id}/settings",{parameters:{path:{amphora_id:t,user_id:s}}}),enabled:!!(t&&s)})}function pf({amphoraId:t,member:s,onBack:n}){const a=A(),o=pt(),i=ma(),l=Ba(t),r=Ee(),c=(i==null?void 0:i.role)==="member_role",m=s.role==="member_role",u=!(c&&m),d=u?"text-token-text-secondary pt-6 text-sm":"text-token-text-secondary text-sm",f=async()=>{if(!(!(o!=null&&o.id)||!window.confirm(a.formatMessage(Os.unlinkConfirm))))try{await l.mutateAsync({userId:o.id}),await _n(r),n()}catch(x){}};return e.jsxs(xe,{title:e.jsxs("button",{"aria-label":a.formatMessage(Os.back),onClick:n,className:"hover:bg-token-bg-tertiary -ms-3 flex items-center gap-2 rounded-full px-3 py-1",children:[e.jsx(Qs,{className:"icon-sm"}),e.jsx("span",{children:e.jsx(g,p({},Os.back))})]}),noBorder:!0,headerInteractable:!0,children:[e.jsx(Ia,{user:s}),e.jsxs("div",{className:"flex flex-col items-start py-3",children:[u?e.jsx(F,{color:"danger-outline",disabled:l.isPending||!(o!=null&&o.id),onClick:f,children:e.jsx(g,p({},Os.unlinkButton))}):null,e.jsx("p",{className:d,children:a.formatMessage(Os.helpCenterParagraph)})]})]})}const Os=te({back:{id:"amphora.relationship.back",defaultMessage:"Back"},relationshipDescription:{id:"amphora.relationship.description",defaultMessage:"When your account is linked to a guardian, they can manage certain privacy and content settings for you. They won't have access to your chats, but they'll be notified if we detect conversations with ChatGPT that may put your safety at risk."},unlinkButton:{id:"amphora.relationship.unlinkButton",defaultMessage:"Unlink accounts"},unlinkConfirm:{id:"amphora.relationship.unlinkConfirm",defaultMessage:"Are you sure you want to unlink your accounts?"},unknownMember:{id:"amphora.relationship.unknownMember",defaultMessage:"Member"},helpCenterParagraph:{id:"amphora.relationship.helpCenterParagraph2",defaultMessage:"You can link one parent at a time."}});function wo(t){"use forget";const s=ot.c(12),{valueMinutes:n,disabled:a,onChange:o}=t,i=A();let l;s[0]!==i?(l=x=>{const b=Math.max(0,Math.min(1439,x|0)),M=new Date;return M.setHours(Math.floor(b/60),b%60,0,0),i.formatDate(M,{hour:"numeric",minute:"2-digit"})},s[0]=i,s[1]=l):l=s[1];const r=l;let c;s[2]===Symbol.for("react.memo_cache_sentinel")?(c=Array.from({length:48}),s[2]=c):c=s[2];let m;s[3]!==r?(m=c.map((x,b)=>{const M=b*30;return{label:r(M),value:String(M)}}),s[3]=r,s[4]=m):m=s[4];const u=m,d=String(Math.max(0,Math.min(1439,n|0)));let f;s[5]!==o?(f=x=>o(Number(x)),s[5]=o,s[6]=f):f=s[6];let h;return s[7]!==a||s[8]!==u||s[9]!==d||s[10]!==f?(h=e.jsx(tr,{options:u,value:d,disabled:a,onValueChange:f,triggerClassName:"text-token-text-primary",contentClassName:"min-w-[var(--radix-select-trigger-width)]!",triggerId:"time-picker"}),s[7]=a,s[8]=u,s[9]=d,s[10]=f,s[11]=h):h=s[11],h}function hf({enabled:t,disabled:s,startMinutes:n,endMinutes:a,onToggle:o,onStartChange:i,onEndChange:l}){const r=A();return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{label:r.formatMessage(as.blackoutHoursLabel),description:r.formatMessage(as.blackoutHoursDescription),enabled:t,disabled:s,onChange:o,ariaLabel:r.formatMessage(as.blackoutHoursLabelAria)}),t?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("span",{className:"text-token-text-primary inline-flex items-center gap-1.5 text-sm",children:[e.jsx(Ud,{className:"icon-sm"}),r.formatMessage(as.startLabel)]}),e.jsx(wo,{label:e.jsx("span",{className:"sr-only",children:r.formatMessage(as.startLabel)}),valueMinutes:n,disabled:s,onChange:i})]}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("span",{className:"text-token-text-primary inline-flex items-center gap-1.5 text-sm",children:[e.jsx(Wd,{className:"icon-sm"}),r.formatMessage(as.endLabel)]}),e.jsx(wo,{label:e.jsx("span",{className:"sr-only",children:r.formatMessage(as.endLabel)}),valueMinutes:a,disabled:s,onChange:l})]})]}):null]})}const as=te({blackoutHoursLabel:{id:"amphora.permissions.blackoutHoursLabel",defaultMessage:"Quiet hours"},blackoutHoursDescription:{id:"amphora.permissions.blackoutHoursDescription",defaultMessage:"Schedule hours when ChatGPT can't be used."},blackoutHoursLabelAria:{id:"amphora.permissions.blackoutHoursLabelAria",defaultMessage:"Quiet hours"},startLabel:{id:"amphora.permissions.blackout.start",defaultMessage:"Start time"},endLabel:{id:"amphora.permissions.blackout.end",defaultMessage:"End time"}}),No=22*60,To=6*60,Mn=(t,s,n)=>Math.min(n,Math.max(s,t|0)),on=(t,s=0)=>{if(!t)return s;const[n,a]=t.split(":").map(o=>parseInt(o,10)||0);return Mn(n,0,23)*60+Mn(a,0,59)},ko=t=>{const s=Mn(Math.floor(t/60),0,23),n=Mn(t%60,0,59);return"".concat(String(s).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))};function xf(t){"use forget";var k,O;const s=ot.c(28),{disabled:n,userId:a,currentBlackout:o,featureKey:i,onPatch:l}=t,[r,c]=Rt.useState(typeof(o==null?void 0:o.enabled)=="boolean"?o.enabled:!1),m=o==null?void 0:o.start_time;let u;s[0]!==m?(u=on(m,No),s[0]=m,s[1]=u):u=s[1];const[d,f]=Rt.useState(u),h=o==null?void 0:o.end_time;let x;s[2]!==h?(x=on(h,To),s[2]=h,s[3]=x):x=s[3];const[b,M]=Rt.useState(x),v=o==null?void 0:o.enabled,j=(k=o==null?void 0:o.start_time)!=null?k:null,S=(O=o==null?void 0:o.end_time)!=null?O:null;let C,w;s[4]!==v||s[5]!==S||s[6]!==j?(C=()=>{c(!!v),f(on(j,No)),M(on(S,To))},w=[v,j,S],s[4]=v,s[5]=S,s[6]=j,s[7]=C,s[8]=w):(C=s[7],w=s[8]),Rt.useEffect(C,w);let E;s[9]!==b||s[10]!==i||s[11]!==l||s[12]!==d||s[13]!==a?(E=R=>{const{nextEnabled:H,nextStartMinutes:V,nextEndMinutes:$}=R,q=V===void 0?d:V,G=$===void 0?b:$,B=ko(q),Y=ko(G);l({userId:a,feature:i,value:{enabled:H,start_time:H?B:null,end_time:H?Y:null}})},s[9]=b,s[10]=i,s[11]=l,s[12]=d,s[13]=a,s[14]=E):E=s[14];const _=Hd(E);let D,N,P;s[15]!==n||s[16]!==_?(N=R=>{c(R),n||_({nextEnabled:R})},P=R=>{f(R),n||_({nextEnabled:!0,nextStartMinutes:R})},D=R=>{M(R),n||_({nextEnabled:!0,nextEndMinutes:R})},s[15]=n,s[16]=_,s[17]=D,s[18]=N,s[19]=P):(D=s[17],N=s[18],P=s[19]);let T;return s[20]!==n||s[21]!==r||s[22]!==b||s[23]!==d||s[24]!==D||s[25]!==N||s[26]!==P?(T=e.jsx(hf,{enabled:r,disabled:n,startMinutes:d,endMinutes:b,onToggle:N,onStartChange:P,onEndChange:D}),s[20]=n,s[21]=r,s[22]=b,s[23]=d,s[24]=D,s[25]=N,s[26]=P,s[27]=T):T=s[27],T}function bf(t,s,n){if(s)return n?t.formatMessage(s,{LearnMoreLink:e.jsx(ks,{href:n,className:"underline",children:e.jsx(g,{id:"7E51F1",defaultMessage:"Learn more"})})}):t.formatMessage(s)}function yf({amphoraId:t,member:s,onBack:n}){var E;const a=A(),o=s.name||s.email||"",i=(E=s.user_id)!=null?E:void 0,l=pt(),{data:r,isLoading:c}=ff(t,i),m=r==null?void 0:r.permissions,u=r==null?void 0:r.settings,{triggerToggle:d}=gf(t),f=Ar(t),h=Ba(t),x=Ee(),b=ee(),M=oe(b,"1681462365"),j=[...[{sectionLabel:null,toggles:[{perm:vt.U18_MODEL_INSTRUCTIONS_ENABLED,label:lt.VyEPC5dTPModelPolicyLabel,description:lt.u18Explainer,learnMoreHref:"https://help.openai.com/en/articles/12315645"},{perm:vt.TRAINING_ALLOWED,label:st.featuresModelTrainingLabel,description:st.featuresModelTrainingDesc,learnMoreHref:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance"},{perm:vt.MEMORY,label:st.featuresMemoryLabel,description:st.featuresMemoryDesc,learnMoreHref:"https://help.openai.com/en/articles/8590148-memory-faq"},{perm:_o.VOICE,label:st.featuresVoiceLabel,description:st.featuresVoiceDesc,learnMoreHref:"https://help.openai.com/en/articles/8400625-voice-mode-faq"},{perm:_o.IMAGE_GENERATION,label:st.featuresImageLabel,description:st.featuresImageDesc},{perm:vt.BLACKOUT_HOURS,label:st.sleepModeLabel,description:st.sleepModeDesc,type:ra.Blackout}]}]];M&&qt&&j.push({sectionLabel:qt.soraSectionLabel,toggles:[{perm:vt.SORA_PERSONALIZED_FEED_ENABLED,label:qt.soraPersonalizedFeedLabel,description:qt.soraPersonalizedFeedDescription},{perm:vt.SORA_INFINITE_SCROLL_ENABLED,label:qt.soraInfiniteScrollLabel,description:qt.soraInfiniteScrollDescription},{perm:vt.SORA_DIRECT_MESSAGES_DISABLED,label:qt.soraDirectMessagesDisabledLabel,description:qt.soraDirectMessagesDisabledDescription}]});const S=!!(i&&(l!=null&&l.id)&&i===l.id),C=h.isPending,w=async()=>{if(!i)return;const _=o||a.formatMessage(st.unlinkFallbackName);if(window.confirm(a.formatMessage(st.unlinkConfirm,{name:_})))try{await h.mutateAsync({userId:i}),n(),await _n(x)}catch(N){}};return e.jsxs(xe,{title:e.jsxs("button",{"aria-label":a.formatMessage(st.back),onClick:n,className:"hover:bg-token-bg-tertiary -ms-3 flex items-center gap-2 rounded-full px-3 py-1",children:[e.jsx(Qs,{className:"icon-sm"}),e.jsx("span",{children:e.jsx(g,p({},st.back))})]}),noBorder:!0,headerInteractable:!0,children:[e.jsx(Ia,{user:s}),s.role==="member_role"&&e.jsx(Mf,{}),j.map((_,D)=>{var N,P;return e.jsxs("div",{className:yt({"pt-3":D===0}),children:[_.sectionLabel&&e.jsx(Q,{children:e.jsx("div",{className:"mb-1 text-base",children:e.jsx(g,p({},_.sectionLabel))})}),_.toggles.map(T=>{var O;const k=rf(u,T.perm);if(T.type===ra.Blackout){const R=vt.BLACKOUT_HOURS[0],H=(O=u==null?void 0:u[R])!=null?O:{};return e.jsx(Q,{children:e.jsx(xf,{disabled:c||!i||S&&k,userId:i,currentBlackout:H,featureKey:R,onPatch:f.mutate})},"".concat(i,"-").concat(T.label.id))}return e.jsx(Q,{children:e.jsx(Ke,{label:a.formatMessage(T.label),description:bf(a,T.description,T.learnMoreHref),enabled:of(m,T.perm,u),disabled:c||!i||S&&k,onChange:R=>i&&!(S&&k)&&d({memberId:i,currentPerms:m,currentSettings:u,toggleKey:T.perm,enabled:R})})},"".concat(i,"-").concat(T.label.id))}),e.jsx("hr",{className:"border-token-border-light"})]},(P=(N=_.sectionLabel)==null?void 0:N.id)!=null?P:D)}),e.jsx(F,{color:"danger-outline",disabled:C,onClick:w,className:"mt-6",children:e.jsx(g,p({},st.unlinkButton))})]})}function Mf(){"use forget";const t=ot.c(1);let s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s=e.jsx("div",{className:"bg-token-bg-tertiary text-token-text-secondary mt-6 mb-3 flex items-center rounded-xl border-none p-3 text-xs",children:e.jsx(g,p({},st.childInformationalBanner))}),t[0]=s):s=t[0],s}const st=te({back:{id:"settingsModal.back",defaultMessage:"Back"},accountSettings:{id:"amphora.memberSettings.accountSettings",defaultMessage:"Account settings"},nameLabel:{id:"amphora.memberSettings.name",defaultMessage:"Name"},emailLabel:{id:"amphora.memberSettings.email",defaultMessage:"Email"},avatarLabel:{id:"amphora.memberSettings.avatar",defaultMessage:"Avatar"},missingValue:{id:"amphora.memberSettings.missingValue",defaultMessage:"-"},contentRestrictions:{id:"amphora.memberSettings.contentRestrictions",defaultMessage:"Content restrictions"},timeLimits:{id:"amphora.memberSettings.timeLimits",defaultMessage:"Time limits"},sleepModeLabel:{id:"amphora.memberSettings.sleepMode.label2",defaultMessage:"Quiet hours"},sleepModeDesc:{id:"amphora.memberSettings.sleepMode.description2",defaultMessage:"Schedule hours when ChatGPT can't be used."},featuresAndData:{id:"amphora.memberSettings.featuresAndData",defaultMessage:"Features & data"},featuresModelTrainingLabel:{id:"amphora.memberSettings.features.modelTraining.label2",defaultMessage:"Improve the model for everyone"},featuresModelTrainingDesc:{id:"amphora.memberSettings.features.modelTraining.description2",defaultMessage:"Allow your child's transcripts and other files to be used to train our models for ChatGPT and Sora. {LearnMoreLink}"},featuresMemoryLabel:{id:"amphora.memberSettings.features.memory.label2",defaultMessage:"Reference saved memories"},featuresMemoryDesc:{id:"amphora.memberSettings.features.memory.description2",defaultMessage:"Allow ChatGPT to save and use memories when responding. {LearnMoreLink}"},featuresVoiceLabel:{id:"amphora.memberSettings.features.voice.label",defaultMessage:"Voice mode"},featuresVoiceDesc:{id:"amphora.memberSettings.features.voice.description2",defaultMessage:"Allow your child to use Voice Mode in ChatGPT. {LearnMoreLink}"},featuresImageLabel:{id:"amphora.memberSettings.features.image.label",defaultMessage:"Image generation"},featuresImageDesc:{id:"amphora.memberSettings.features.image.description2",defaultMessage:"Allow ChatGPT to create or edit images."},featuresAgentLabel:{id:"amphora.memberSettings.features.agent.label",defaultMessage:"Agent mode"},featuresDeepResearchLabel:{id:"amphora.memberSettings.features.deepResearch.label",defaultMessage:"Deep research"},featuresWebSearchLabel:{id:"amphora.memberSettings.features.webSearch.label",defaultMessage:"Web search"},unlinkButton:{id:"amphora.memberSettings.unlinkButton",defaultMessage:"Unlink accounts"},unlinkConfirm:{id:"amphora.memberSettings.unlinkConfirm",defaultMessage:"Remove {name} from this family group?"},unlinkFallbackName:{id:"amphora.memberSettings.unlinkFallbackName",defaultMessage:"this member"},childInformationalBanner:{id:"amphora.memberSettings.childInformationalBanner",defaultMessage:"Your parent or guardian can adjust these settings to help guide how you use ChatGPT and Sora."}}),qt=te({soraSectionLabel:{id:"amphora.memberSettings.sora.sectionLabel",defaultMessage:"Sora"},soraAccountCreationLabel:{id:"amphora.memberSettings.sora.accountCreation.label",defaultMessage:"Can create Sora account"},soraAccountCreationDescription:{id:"amphora.memberSettings.sora.accountCreation.description",defaultMessage:"Allow the user to create a Sora account."},soraInfiniteScrollLabel:{id:"amphora.memberSettings.sora.infiniteScroll.label2",defaultMessage:"Continuous feed"},soraInfiniteScrollDescription:{id:"amphora.memberSettings.sora.infiniteScroll.description2",defaultMessage:"Allow an uninterrupted feed of content while scrolling."},soraPersonalizedFeedLabel:{id:"amphora.memberSettings.sora.personalizedFeed.label",defaultMessage:"Personalized feed"},soraPersonalizedFeedDescription:{id:"amphora.memberSettings.sora.personalizedFeed.description2",defaultMessage:"Allow videos to be recommended based on your child's history and activity."},soraDirectMessagesDisabledLabel:{id:"amphora.memberSettings.sora.directMessagesDisabled.label2",defaultMessage:"Messaging"},soraDirectMessagesDisabledDescription:{id:"amphora.memberSettings.sora.directMessagesDisabled.description2",defaultMessage:"Allow your child to send and receive direct messages."}});function Cf({amphoraId:t,selectedParent:s,onBack:n}){const a=A(),o=pt(),i=Ba(t),l=Ee(),r=i.isPending,c=async()=>{const m=o==null?void 0:o.id;if(!(!m||!window.confirm(a.formatMessage(rn.leaveConfirm))))try{await i.mutateAsync({userId:m}),await _n(l),n()}catch(d){}};return e.jsxs(xe,{title:e.jsxs("button",{"aria-label":a.formatMessage(rn.back),onClick:n,className:"hover:bg-token-bg-tertiary -ms-3 flex items-center gap-2 rounded-full px-3 py-1",children:[e.jsx(Qs,{className:"icon-sm"}),e.jsx("span",{children:e.jsx(g,p({},rn.back))})]}),noBorder:!0,headerInteractable:!0,children:[e.jsx(Ia,{user:s}),e.jsxs("div",{className:"flex w-full flex-col items-start gap-3 py-3",children:[e.jsx(F,{color:"danger-outline",disabled:r,onClick:c,children:e.jsx(g,p({},rn.removeFromFamilyButton))}),e.jsx("p",{className:"text-token-text-secondary py-3 text-xs",children:e.jsx(g,{id:"jNO9yz",defaultMessage:"{LearnMoreLink} about parental controls",values:{LearnMoreLink:e.jsx(ks,{href:"https://help.openai.com/en/articles/12315553-parental-controls-faq",className:"underline",children:e.jsx(g,{id:"0M5wS5",defaultMessage:"Learn more"})})}})})]})]})}const rn=te({back:{id:"amphora.parent.back",defaultMessage:"Back"},parentBadge:{id:"amphora.parent.badge",defaultMessage:"Parent"},removeFromFamilyButton:{id:"amphora.parent.removeFromFamily",defaultMessage:"Remove from family"},leaveConfirm:{id:"amphora.parent.leaveConfirm",defaultMessage:"Are you sure you want to leave this family group?"},unknownMember:{id:"amphora.parent.unknownMember",defaultMessage:"Member"}});function vf(){"use forget";var pe,ce;const t=ot.c(85),s=A(),n=ee(),a=ma(),o=El(),{openSettings:i}=ds();let l,r;t[0]!==o?(r=o.find(jf),t[0]=o,t[1]=r):r=t[1],l=r;const c=l;let m;e:{const le=c==null?void 0:c.payload;if(!(le!=null&&le.family_group_id)){m=null;break e}m=le}const u=m,d=(pe=c==null?void 0:c.id)!=null?pe:null,[f,h]=y.useState(!1),x=pt(),[b,M]=y.useState(null);let v,j;t[2]!==a||t[3]!==n||t[4]!==f||t[5]!==d||t[6]!==u?(v=()=>{a!==void 0&&!(a!=null&&a.id)&&u&&!f&&(h(!0),so(n,u,d!=null?d:void 0))},j=[n,a,u,d,f],t[2]=a,t[3]=n,t[4]=f,t[5]=d,t[6]=u,t[7]=v,t[8]=j):(v=t[7],j=t[8]),y.useEffect(v,j);const{members:S,raw:C}=mf(a==null?void 0:a.id);let w;t[9]!==S?(w=S!=null?S:[],t[9]=S,t[10]=w):w=t[10];const E=w;let _;t[11]!==(C==null?void 0:C.items)?(_=(ce=C==null?void 0:C.items)!=null?ce:[],t[11]=C==null?void 0:C.items,t[12]=_):_=t[12];const D=_;let N,P,T,k,O,R,H,V,$,q,G;if(t[13]!==a||t[14]!==n||t[15]!==(x==null?void 0:x.id)||t[16]!==s||t[17]!==E||t[18]!==d||t[19]!==u||t[20]!==D||t[21]!==b){V=Symbol.for("react.early_return_sentinel");e:{const le=D.filter(Sf);O=(a==null?void 0:a.role)==="owner",k=(a==null?void 0:a.role)==="member_role";let ae;t:{if(O){let J;t[33]!==s?(J=s.formatMessage(ut.addChildCTA),t[33]=s,t[34]=J):J=t[34],ae=J;break t}let U;t[35]!==s?(U=s.formatMessage(ut.addFamilyMemberCTA),t[35]=s,t[36]=U):U=t[36],ae=U}T=ae;const ie=O&&(a!=null&&a.id)?"member_role":void 0;let ue;if(t[37]!==(a==null?void 0:a.id)||t[38]!==n||t[39]!==ie?(ue=()=>{var U;at(n,sf,{amphora_id:(U=a==null?void 0:a.id)!=null?U:null,forceInviteeRole:ie})},t[37]=a==null?void 0:a.id,t[38]=n,t[39]=ie,t[40]=ue):ue=t[40],a==null||a.id,P=ue,a!=null&&a.id&&b){if(b.type==="parent"){let U;t[41]===Symbol.for("react.memo_cache_sentinel")?(U=()=>M(null),t[41]=U):U=t[41];let J;t[42]!==a.id||t[43]!==b.member?(J=e.jsx(Cf,{amphoraId:a.id,selectedParent:b.member,onBack:U}),t[42]=a.id,t[43]=b.member,t[44]=J):J=t[44],V=J;break e}if(b.type==="member"){let U;t[45]===Symbol.for("react.memo_cache_sentinel")?(U=()=>M(null),t[45]=U):U=t[45];let J;t[46]!==a.id||t[47]!==b.member?(J=e.jsx(yf,{amphoraId:a.id,member:b.member,onBack:U}),t[46]=a.id,t[47]=b.member,t[48]=J):J=t[48],V=J;break e}if(b.type==="relationship"){let U;t[49]===Symbol.for("react.memo_cache_sentinel")?(U=()=>M(null),t[49]=U):U=t[49];let J;t[50]!==a.id||t[51]!==b.member?(J=e.jsx(pf,{amphoraId:a.id,member:b.member,onBack:U}),t[50]=a.id,t[51]=b.member,t[52]=J):J=t[52],V=J;break e}if(b.type==="invite"){let U;t[53]===Symbol.for("react.memo_cache_sentinel")?(U=()=>M(null),t[53]=U):U=t[53];let J;t[54]!==a.id||t[55]!==b.invite?(J=e.jsx(ef,{amphoraId:a.id,invite:b.invite,onBack:U}),t[54]=a.id,t[55]=b.invite,t[56]=J):J=t[56],V=J;break e}}N=xe,t[57]!==s?($=s.formatMessage(ut.amphoraControlsTab),t[57]=s,t[58]=$):$=t[58],q="https://help.openai.com/en/articles/12315553-parental-controls-faq",t[59]!==a||t[60]!==n||t[61]!==s||t[62]!==d||t[63]!==u?(G=a!==void 0&&!(a!=null&&a.id)&&u&&e.jsx(Q,{children:e.jsx(it,{label:s.formatMessage(ut.pendingAmphoraInvite),buttonLabel:s.formatMessage(ut.inviteButton),onClick:()=>so(n,u,d!=null?d:void 0)})}),t[59]=a,t[60]=n,t[61]=s,t[62]=d,t[63]=u,t[64]=G):G=t[64],t[65]===Symbol.for("react.memo_cache_sentinel")?(R=e.jsx("div",{className:"flex min-h-15 items-center pt-4",children:e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex flex-col items-start gap-8 pt-1 pb-3",children:e.jsx("p",{className:"text-sm",children:e.jsx(g,p({},ut.inviteAmphoraMembersParagraph))})})})}),t[65]=R):R=t[65],H=(a==null?void 0:a.id)&&(E.length>0||le.length>0)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"mb-2 text-base font-medium",children:e.jsx(g,p({},ut.amphoraMembersTitle))}),e.jsxs("div",{children:[E.map(U=>{var Le,Qe,$e,W,z;const J=U.user_id,Oe=U.user_id===(x==null?void 0:x.id),Ae=U.role==="owner";return e.jsx("div",{className:"border-token-border-default hover:bg-token-interactive-bg-secondary-hover active:bg-token-interactive-bg-secondary-press border-t last:border-b",children:e.jsxs("button",{className:"flex w-full items-center justify-between py-4 pe-4",onClick:()=>{if(J){if(Ae){M(O?{type:"parent",member:U}:{type:"relationship",member:U});return}(a==null?void 0:a.role)==="member_role"&&!Oe?M({type:"relationship",member:U}):M({type:"member",member:U})}},children:[e.jsxs("div",{className:"flex items-center gap-3 text-start",children:[e.jsx(er,{user:{picture:(Le=U.profile_picture_url)!=null?Le:void 0,name:($e=(Qe=U.name)!=null?Qe:U.email)!=null?$e:""},size:"large"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"text-[15px] leading-5",children:(z=(W=U.name)!=null?W:U.email)!=null?z:e.jsx(g,p({},ut.amphoraMemberFallback))})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[Ae&&e.jsx(yn,{}),e.jsx(no,{className:"icon-sm opacity-60"})]})]})},J)}),le.map(U=>{var Oe,Ae;const J=(Oe=U.user_id)!=null?Oe:U.email;return e.jsx("div",{className:"border-token-border-default hover:bg-token-interactive-bg-secondary-hover active:bg-token-interactive-bg-secondary-press border-t last:border-b",children:e.jsxs("button",{className:"flex w-full items-center justify-between py-4 pe-4",onClick:()=>M({type:"invite",invite:U}),children:[e.jsxs("div",{className:"flex items-center gap-3 text-start",children:[e.jsx("div",{className:"bg-token-bg-tertiary text-token-text-tertiary flex h-12 w-12 shrink-0 items-center justify-center rounded-full",children:e.jsx(li,{className:"icon-lg"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:(Ae=U.email)!=null?Ae:e.jsx(g,p({},ut.missingMember))}),e.jsxs("div",{className:"text-token-text-secondary mt-0.5 flex items-center gap-1 text-sm",children:[e.jsx(ga,{className:"icon-sm"}),e.jsx("span",{children:s.formatMessage(ut.invitationSent)})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[U.role==="owner"&&e.jsx(yn,{}),e.jsx(no,{className:"icon-sm opacity-60"})]})]})},"pending-".concat(J))})]})]})}t[13]=a,t[14]=n,t[15]=x==null?void 0:x.id,t[16]=s,t[17]=E,t[18]=d,t[19]=u,t[20]=D,t[21]=b,t[22]=N,t[23]=P,t[24]=T,t[25]=k,t[26]=O,t[27]=R,t[28]=H,t[29]=V,t[30]=$,t[31]=q,t[32]=G}else N=t[22],P=t[23],T=t[24],k=t[25],O=t[26],R=t[27],H=t[28],V=t[29],$=t[30],q=t[31],G=t[32];if(V!==Symbol.for("react.early_return_sentinel"))return V;let B;t[66]!==P||t[67]!==T||t[68]!==k?(B=!k&&e.jsx(Q,{children:e.jsx("div",{className:"flex flex-col items-start gap-8 py-1",children:e.jsx(F,{color:"secondary",icon:Na,onClick:P,children:T})})}),t[66]=P,t[67]=T,t[68]=k,t[69]=B):B=t[69];let Y;t[70]!==N||t[71]!==R||t[72]!==H||t[73]!==B||t[74]!==$||t[75]!==q||t[76]!==G?(Y=e.jsxs(N,{title:$,learnMoreHref:q,children:[G,R,H,B]}),t[70]=N,t[71]=R,t[72]=H,t[73]=B,t[74]=$,t[75]=q,t[76]=G,t[77]=Y):Y=t[77];let X;t[78]!==s||t[79]!==O||t[80]!==i?(X=O&&e.jsx(xe,{title:s.formatMessage(ut.safetyNotifications),noBorder:!0,learnMoreHref:"https://help.openai.com/en/articles/12315553-parental-controls-faq",children:e.jsxs("div",{className:"flex flex-col items-start gap-3",children:[e.jsx("p",{className:"text-sm",children:e.jsx(g,p({},ut.safetyNotificationsDescription))}),e.jsx(F,{color:"secondary",onClick:()=>i(ye.Notifications),children:e.jsx(g,p({},ut.safetyNotificationsButton))})]})}),t[78]=s,t[79]=O,t[80]=i,t[81]=X):X=t[81];let Z;return t[82]!==Y||t[83]!==X?(Z=e.jsxs(e.Fragment,{children:[Y,X]}),t[82]=Y,t[83]=X,t[84]=Z):Z=t[84],Z}function Sf(t){return t.status==="invited"}function jf(t){return t.notification_type==="family-invite"&&!t.reacted_to_at}const ut=te({amphoraControlsTab:{id:"settingsModal.amphoraControlsTab",defaultMessage:"Parental controls"},pendingAmphoraInvite:{id:"settingsModal.pendingAmphoraInvite",defaultMessage:"You have a pending family invite"},inviteAmphoraMembers:{id:"settingsModal.inviteAmphoraMembers",defaultMessage:"Invite family members"},inviteButton:{id:"settingsModal.inviteButton",defaultMessage:"Invite"},inviteAmphoraMembersParagraph:{id:"settingsModal.inviteAmphoraMembersParagraph3",defaultMessage:"Parents and teens can link accounts, giving parents tools to adjust certain features, set limits, and add safeguards that work for their family."},addFamilyMemberCTA:{id:"settingsModal.addFamilyMemberCTA",defaultMessage:"Add family member"},addChildCTA:{id:"settingsModal.addChildCTA",defaultMessage:"Add child"},amphoraMembersTitle:{id:"settingsModal.amphoraMembersTitle",defaultMessage:"Family members"},amphoraMembersRoleLabel:{id:"settingsModal.amphoraMembersRoleLabel",defaultMessage:"Role"},amphoraMembersStatusLabel:{id:"settingsModal.amphoraMembersStatusLabel",defaultMessage:"Status"},amphoraMemberFallback:{id:"settingsModal.amphoraMemberFallback",defaultMessage:"Family member"},removeMember:{id:"amphora.members.removeMember",defaultMessage:"Remove"},leaveAmphora:{id:"amphora.members.leaveAmphora",defaultMessage:"Leave family group"},invitedStatus:{id:"amphora.members.status.invited",defaultMessage:"Invited"},invitationSent:{id:"amphora.members.status.invitationSent",defaultMessage:"Invitation sent"},cancelInvite:{id:"amphora.invites.cancelInvite",defaultMessage:"Cancel"},cancelInviteError:{id:"amphora.invites.cancelInviteError",defaultMessage:"Unable to cancel invite: {error}"},missingMember:{id:"amphora.members.missingMember",defaultMessage:"[missing]"},selfLabel:{id:"amphora.members.self",defaultMessage:"You"},safetyNotifications:{id:"amphora.settings.safetyNotifications",defaultMessage:"Safety notifications"},safetyNotificationsDescription:{id:"amphora.settings.safetyNotificationsDescription",defaultMessage:"We care about your teen's safety. If we detect certain serious safety concerns, we will notify you—though no system is perfect. You can choose how you'd like to be contacted."},safetyNotificationsButton:{id:"amphora.settings.safetyNotificationsButton",defaultMessage:"Manage notifications"}});function _f(t){return t.type===ao.GDRIVE_SYNC_CONNECTOR||t.type===ao.SLACK_SYNC_CONNECTOR?"".concat(window.location.origin,"/ca/").concat(t.id,"/oauth/callback"):"".concat(window.location.origin,"/ccc/").concat(t.id,"/oauth/callback")}const wf=({isConnected:t,onDisconnect:s,onConnect:n,isDisabledByAdmin:a})=>e.jsx(Fa,{isConnected:t,onConnect:n,onDisconnect:s,isDisabledByAdmin:a}),Dr=({entry:t,isConnected:s,onDisconnect:n,onConnect:a,redirectUri:o})=>e.jsx(Fa,{isConnected:s,onConnect:()=>a({id:t.id},"settings_connected_apps",_f(t),o),onDisconnect:()=>n(t==null?void 0:t.type)}),Fa=({isConnected:t,isDisabledByAdmin:s,onDisconnect:n,onConnect:a})=>{const o=A();return s?e.jsx(ct,{label:o.formatMessage(ln.disabledByAdmin),children:e.jsx(F,{onClick:n,color:"secondary",size:"small",disabled:s,children:e.jsx(g,p({},ln.connect))})}):t?e.jsx(F,{onClick:n,color:"danger-outline",size:"small",children:e.jsx(g,p({},ln.disconnect))}):e.jsx(F,{onClick:a,color:"secondary",size:"small",children:e.jsx(g,p({},ln.connect))})},ln=te({connect:{id:"connectorSettings.connect",defaultMessage:"Connect"},disconnect:{id:"connectorSettings.disconnect",defaultMessage:"Disconnect"},disabledByAdmin:{id:"connectorSettings.disabledByAdmin",defaultMessage:"Disabled by workspace admin"}});function Nf({connectorType:t,description:s,linkId:n,customRedirectUrl:a,isDisabledByAdmin:o}){const i=Ug();let l,r;switch(t){case I.GDRIVE_ACTION_CONNECTOR:l=Tn,r="Google Drive (Deep Research)";break;case I.GITHUB_CONNECTOR:l=Hl,r="GitHub";break;case I.DROPBOX_CONNECTOR:l=Wl,r="Dropbox";break;case I.HUBSPOT_CONNECTOR:l=Ul,r="HubSpot";break;case I.SALESFORCE_CONNECTOR:l=Vd,r="Salesforce";break;case I.LINEAR_CONNECTOR:l=Gl,r="Linear";break;case I.SHAREPOINT_CONNECTOR:l=Us,r="Microsoft OneDrive (work/school)";break;case I.GCAL_CONNECTOR:l=hi,r="Google Calendar";break;case I.GMAIL_CONNECTOR:l=pi,r="Gmail";break;case I.GOOGLE_CONTACTS_CONNECTOR:l=fi,r="Google Contacts";break;case I.OUTLOOK_EMAIL_CONNECTOR:l=Fl,r="Outlook Email";break;case I.OUTLOOK_CALENDAR_CONNECTOR:l=Bl,r="Outlook Calendar";break;case I.TEAMS_CONNECTOR:l=Rl,r="Teams";break;case I.BOX_CONNECTOR:l=Il,r="Box";break;case I.INTERCOM_CONNECTOR:l=Ll,r="Intercom";break;case I.CANVA_CONNECTOR:l=Ol,r="Canva";break;case I.NOTION_CONNECTOR:l=ui,r="Notion";break;case I.CONFLUENCE_CONNECTOR:l=mi,r="Confluence";break;case I.JIRA_CONNECTOR:l=gi,r="Jira";break;case I.JIRA_SERVICEMANAGEMENT_CONNECTOR:l=Dl,r="Jira Service Management";break;case I.SLACK_CONNECTOR:case I.SLACK_CODEX_CONNECTOR:l=di,r="Slack";break}const c=!!n,m=pa(),u=A(),d=me(),f=ci();return e.jsx(Q,{children:e.jsx(_t,{icon:e.jsx(l,{className:"icon-lg"}),title:r,description:e.jsx(g,ne(p({},s),{values:{help_center_article:e.jsx("a",{href:"https://help.openai.com/en/articles/11145903",className:"underline",target:"_blank",rel:"noopener noreferrer",children:e.jsx(g,{id:"AM6qbf",defaultMessage:"help center article"})})}})),statusIndicator:e.jsx(wf,{isConnected:c,onDisconnect:()=>{t===I.GITHUB_CONNECTOR&&zd(),f(Ve[t])},onConnect:()=>{Al({connectorType:t,intl:u,toaster:d,openPopup:m,customRedirectUrl:a,onError:i})},isDisabledByAdmin:o}),showGitHubConfigure:t===I.GITHUB_CONNECTOR&&c&&!o})})}function Or(t){switch(t){case ke.CONFLUENCE:return mi;case ke.GDRIVE:return Tn;case ke.JIRA:return gi;case ke.NOTION_OPEN_CONNECTOR:return ui;case ke.O365:case ke.O365_PERSONAL:case ke.O365_BUSINESS:return Us;case ke.SLACK_OPEN_CONNECTOR:return di}}function Qn({entry:t,description:s}){const n=Or(t.type),a=A();return e.jsx(Q,{children:e.jsx(_t,{icon:e.jsx(n,{className:"icon-lg"}),title:wn(t.type,a),description:e.jsx(g,p({},s)),statusIndicator:e.jsx(Dr,{entry:t,isConnected:!!t.access_token,onDisconnect:fa,onConnect:Pl,redirectUri:Nn})})})}function Tf({clientApplications:t}){const{mutate:s,isPending:n}=ha();return e.jsx(e.Fragment,{children:t.map(a=>e.jsx(kf,{clientApplication:a,disabled:n,onDisconnect:()=>{se.logEventWithStatsig("Connector Settings: Client Application Disconnect Button Clicked","chatgpt_connector_settings_client_application_disconnect_button_clicked",{id:a.id,name:a.name,type:a.type}),s(a.id)}},a.id))})}function kf({clientApplication:t,disabled:s,onDisconnect:n}){return e.jsx(Q,{children:e.jsx(_t,{icon:e.jsx(yr,{className:"icon-lg"}),title:t.name,description:e.jsx(g,p({},ws.appleDesc)),statusIndicator:e.jsx(F,{onClick:n,color:"danger-outline",size:"small",disabled:s,children:e.jsx(g,p({},ws.disconnect))})})})}function Ef({clientApplications:t}){const{mutate:s,isPending:n}=ha();return e.jsx(e.Fragment,{children:t.map(a=>e.jsx(Pf,{clientApplication:a,disabled:n,onDisconnect:()=>{se.logEventWithStatsig("Connector Settings: Kakao Client Application Disconnect Button Clicked","chatgpt_connector_settings_client_application_disconnect_button_clicked",{id:a.id,name:a.name,type:a.type}),s(a.id)}},a.id))})}function Pf({clientApplication:t,disabled:s,onDisconnect:n}){return e.jsx(Q,{children:e.jsx(_t,{icon:e.jsx(Wg,{className:"icon-lg"}),title:t.name,description:e.jsx(g,p({},ws.kakaoDesc)),statusIndicator:e.jsx(F,{onClick:n,color:"danger-outline",size:"small",disabled:s,children:e.jsx(g,p({},ws.disconnect))})})})}function Af({clientApplications:t}){const{mutate:s,isPending:n}=ha();return e.jsx(e.Fragment,{children:t.map(a=>e.jsx(Df,{clientApplication:a,disabled:n,onDisconnect:()=>{se.logEventWithStatsig("Connector Settings: Codex CLI Client Application Disconnect Button Clicked","chatgpt_connector_settings_client_application_disconnect_button_clicked",{id:a.id,name:a.name,type:a.type}),s(a.id)}},a.id))})}function Df({clientApplication:t,disabled:s,onDisconnect:n}){return e.jsx(Q,{children:e.jsx(_t,{icon:e.jsx(Kd,{className:"icon-lg"}),title:t.name,description:e.jsx(g,p({},ws.codexCLIDesc)),statusIndicator:e.jsx(F,{onClick:n,color:"danger-outline",size:"small",disabled:s,children:e.jsx(g,p({},ws.disconnect))})})})}const ws=te({appleDesc:{id:"P5OVxG",defaultMessage:"Get personalized ChatGPT responses and Plus benefits when using Siri and Writing Tools."},kakaoDesc:{id:"IKXNCX",defaultMessage:"ChatGPT in KakaoTalk."},disconnect:{id:"connectorSettings.disconnectButton",defaultMessage:"Disconnect"},codexCLIDesc:{id:"DWVivD",defaultMessage:"Allow Codex CLI to use models from the API."}});function Of(){const{data:t}=rt(zl),s=t==null?void 0:t.items,n=s==null?void 0:s.filter(({type:c})=>c==="apple"),a=!!(n!=null&&n.length),o=s==null?void 0:s.filter(({type:c})=>c==="kakao_talk"),i=!!(o!=null&&o.length),l=s==null?void 0:s.filter(({type:c})=>c==="codex_cli"),r=!!(l!=null&&l.length);return e.jsxs(xe,{title:e.jsx(g,p({},Eo.secureSigninTitle)),description:e.jsx(g,ne(p({},Eo.secureSigninDescription),{values:{learn_more_link:e.jsx("a",{href:"https://help.openai.com/en/collections/13193904-secure-sign-in",className:"underline",target:"_blank",rel:"noopener noreferrer",children:e.jsx(g,{id:"G/jd2T",defaultMessage:"Learn more"})})}})),children:[!a&&!i&&!r&&e.jsx("div",{className:"text-token-text-secondary bg-token-bg-tertiary my-4 rounded-xl p-4",children:e.jsx(g,{id:"5VTvRh",defaultMessage:"You haven’t used ChatGPT to sign into any websites or apps yet. Once you do, they’ll show up here."})}),a&&e.jsx(Tf,{clientApplications:n}),i&&e.jsx(Ef,{clientApplications:o}),r&&e.jsx(Af,{clientApplications:l})]})}const Eo=te({secureSigninTitle:{id:"wGZ2DC",defaultMessage:"Secure sign in with ChatGPT"},secureSigninDescription:{id:"mq87/x",defaultMessage:"Sign in to websites and apps across the internet with the trusted security of ChatGPT. {learn_more_link}"}});function $n({type:t}){let s,n=ps.googleCalendarName,a=ps.googleCalendarDesc;switch(t){case Ms.GCAL_CONNECTOR:s=hi;break;case Ms.GMAIL_CONNECTOR:s=pi,n=ps.gmailName,a=ps.gmailDesc;break;case Ms.GOOGLE_CONTACTS_CONNECTOR:s=fi,n=ps.googleContactsName,a=ps.googleContactsDesc;break}const o=A(),{connectors:i}=Kl([t]),l=i.get(t);if(!l)return null;const r="#settings/".concat(ye.Connectors);return e.jsx(Q,{children:e.jsxs("div",{className:"flex flex-col gap-2 pt-3 pb-1",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(s,{className:"icon-lg"}),e.jsx("p",{className:"text-md text-token-text-primary flex-1 font-semibold",children:o==null?void 0:o.formatMessage(n)}),e.jsx(Fa,{isConnected:!!l.access_token,onDisconnect:()=>{fa(l.type)},onConnect:()=>{Vl({id:l.id},r)}})]}),e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(g,p({},a))})]})})}const ps=te({googleCalendarDesc:{id:"connectorSettings.googleCalendarDesc.1",defaultMessage:"View your Google Calendar and schedule events."},googleCalendarName:{id:"connectorSettings.googleCalendarName.1",defaultMessage:"Google Calendar"},gmailDesc:{id:"connectorSettings.gmailDesc.1",defaultMessage:"View and send emails from your Gmail account."},gmailName:{id:"connectorSettings.gmailName.1",defaultMessage:"Gmail"},googleContactsDesc:{id:"connectorSettings.googleContactsDesc.1",defaultMessage:"View and manage your Google Contacts."},googleContactsName:{id:"connectorSettings.googleContactsName.1",defaultMessage:"Google Contacts"}}),Lf=()=>{const t=ee(),s=oe(t,"2509278897"),{isGdriveEnabled:n,isO365Enabled:a,connectorConfig:o,isLoading:i}=kn(),l=ee(),r=oe(l,"4206189746"),c=o.get(ke.GDRIVE),m=o.get(ke.O365_PERSONAL),u=o.get(ke.O365_BUSINESS),d=n&&!!c&&!s,f=a&&!!m,h=a&&!!u,x=d||f||h||r;return s&&(i||!x)?null:e.jsx(xe,{title:e.jsx(g,p({},Jt.fileUploadsTitle)),description:e.jsx(g,p({},Jt.fileUploadsDescription)),children:i?e.jsx("div",{className:"flex justify-center p-6",children:e.jsx(Ge,{})}):x?e.jsxs(e.Fragment,{children:[r&&e.jsxs(e.Fragment,{children:[e.jsx($n,{type:Ms.GCAL_CONNECTOR}),e.jsx($n,{type:Ms.GMAIL_CONNECTOR}),e.jsx($n,{type:Ms.GOOGLE_CONTACTS_CONNECTOR})]}),c&&d&&e.jsx(Qn,{entry:c,description:Jt.googleDriveDesc}),m&&f&&e.jsx(Qn,{entry:m,description:Jt.o365Desc}),u&&h&&e.jsx(Qn,{entry:u,description:Jt.o365BusinessDesc})]}):e.jsx(_s,{type:"info",children:e.jsx(g,p({},Jt.noConnectorSettings))})})},If=new Set([I.GCAL_CONNECTOR,I.GMAIL_CONNECTOR,I.GOOGLE_CONTACTS_CONNECTOR]),Rf=()=>{const t=ee(),s=oe(t,"2509278897"),{isConfluenceEnabled:n,isJiraEnabled:a,isNotionOpenConnectorEnabled:o,isSlackOpenConnectorEnabled:i,connectorConfig:l,isLoading:r}=kn(),c=l.get(ke.CONFLUENCE),m=l.get(ke.NOTION_OPEN_CONNECTOR),u=l.get(ke.JIRA),d=l.get(ke.SLACK_OPEN_CONNECTOR),f=n&&!!c,h=a&&!!u,x=o&&!!m,b=i&&!!d,M=ee(),v=oe(M,"4206189746"),{connectorLinks:j,isLoading:S}=Mt(),{availableConnectors:C,isLoading:w}=En(),{enabled:E}=ql(),_=f||h||x||b||!s&&(C.length>0||v),D=y.useMemo(()=>s?[]:[...new Set([...C.map(({type:T})=>T).filter(T=>Object.values(I).includes(T)),...v?If:[]])],[C,v,s]),N=r||S||w;return s&&(N||!_)||!N&&!_?null:e.jsx(xe,{title:e.jsx(g,p({},Jt.connectorsTitle)),description:e.jsx(g,ne(p({},Jt.connectorsDescription),{values:{learn_more_link:e.jsx("a",{href:"https://help.openai.com/en/articles/11145903",className:"underline",target:"_blank",rel:"noopener noreferrer",children:e.jsx(g,{id:"JX5fMM",defaultMessage:"Learn more"})})}})),children:N?e.jsx("div",{className:"flex justify-center p-6",children:e.jsx(Ge,{})}):e.jsxs(e.Fragment,{children:[!1,!1,!1,!1,D.map(P=>{var T,k;return Po[P]&&e.jsx("div",{id:Yl[P],children:e.jsx(Nf,{connectorType:P,description:Po[P],linkId:(k=(T=j.get(Ve[P]))==null?void 0:T[0])==null?void 0:k.id,isDisabledByAdmin:P===I.GITHUB_CONNECTOR&&!E})},P)})]})})},Jt=te({fileUploadsTitle:{id:"connectorSettings.fileUploadsTitle",defaultMessage:"File uploads"},fileUploadsDescription:{id:"connectorSettings.fileUploadsDescription",defaultMessage:"These apps will allow you to add files to ChatGPT messages."},connectorsTitle:{id:"connectorSettings.connectorsTitle",defaultMessage:"Connectors (Beta)"},connectorsDescription:{id:"connectorSettings.connectorsDescription",defaultMessage:"Connect these data sources so ChatGPT can access their information — based on what you’re authorized to view. {learn_more_link}"},googleDriveDesc:{id:"connectorSettings.googleDriveDesc.1",defaultMessage:"Upload Google Docs, Sheets, Slides and other files."},o365Desc:{id:"connectorSettings.o365Desc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint and other files."},o365BusinessDesc:{id:"connectorSettings.o365BusinessDesc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint, and other files, including those from SharePoint sites."},noConnectorSettings:{id:"connectorSettings.noConnectorSettings",defaultMessage:"Unable to get connected apps"}}),Po={[I.GITHUB_CONNECTOR]:{id:"connectorSettings.githubDesc.1",defaultMessage:"Allow ChatGPT deep research to read your GitHub repositories.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their GitHub repositories."},[I.GDRIVE_ACTION_CONNECTOR]:{id:"connectorSettings.gdriveActionDesc.1",defaultMessage:"Allow ChatGPT deep research to read Google Drive files.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Google Drive content."},[I.DROPBOX_CONNECTOR]:{id:"connectorSettings.dropboxDesc.1",defaultMessage:"Allow ChatGPT deep research to read Dropbox files.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Dropbox files."},[I.HUBSPOT_CONNECTOR]:{id:"connectorSettings.hubspotDesc.1",defaultMessage:"Allow ChatGPT deep research to read HubSpot.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Hubspot."},[I.LINEAR_CONNECTOR]:{id:"connectorSettings.linearDesc.1",defaultMessage:"Allow ChatGPT deep research to read Linear projects.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Linear projects."},[I.CONFLUENCE_CONNECTOR]:{id:"connectorSettings.confluenceDesc.1",defaultMessage:"Allow ChatGPT deep research to read Confluence pages.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Confluence pages."},[I.JIRA_CONNECTOR]:{id:"connectorSettings.jiraDesc.1",defaultMessage:"Allow ChatGPT deep research to read Jira tickets/issues.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Jira issues."},[I.JIRA_SERVICEMANAGEMENT_CONNECTOR]:{id:"connectorSettings.jiraServiceDesc.1",defaultMessage:"Allow ChatGPT deep research to read Jira ServiceManagement tickets.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Jira Service Management tickets."},[I.SHAREPOINT_CONNECTOR]:{id:"connectorSettings.sharepointDesc.1",defaultMessage:"Allow ChatGPT deep research to read files, including those from Sharepoint.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their SharePoint/OneDrive files."},[I.GCAL_CONNECTOR]:{id:"connectorSettings.gcalDesc.1",defaultMessage:"Allow ChatGPT to read and create Google Calendar events.",description:"Shown in user settings. Lets users grant ChatGPT read-only access to their Google Calendar events."},[I.GMAIL_CONNECTOR]:{id:"connectorSettings.gmailDesc.1",defaultMessage:"Allow ChatGPT to read and send Gmail emails.",description:"Shown in user settings. Lets users grant ChatGPT access to their Gmail emails."},[I.GOOGLE_CONTACTS_CONNECTOR]:{id:"connectorSettings.googleContactsDesc.1",defaultMessage:"Allow ChatGPT to read Google Contacts.",description:"Shown in user settings. Lets users grant ChatGPT read-only access to their Google Contacts."},[I.BOX_CONNECTOR]:{id:"connectorSettings.boxDesc.1",defaultMessage:"Allow ChatGPT deep research to read Box files.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Box files."},[I.TEAMS_CONNECTOR]:{id:"connectorSettings.teamsDesc.1",defaultMessage:"Allow ChatGPT deep research to read Microsoft Teams chats.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Microsoft Teams chats."},[I.OUTLOOK_EMAIL_CONNECTOR]:{id:"connectorSettings.outlookEmailDesc.1",defaultMessage:"Allow ChatGPT deep research to read Outlook emails.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Outlook emails."},[I.OUTLOOK_CALENDAR_CONNECTOR]:{id:"connectorSettings.outlookCalendarDesc.1",defaultMessage:"Allow ChatGPT deep research to read Outlook Calendar events.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Outlook Calendar events."},[I.INTERCOM_CONNECTOR]:{id:"connectorSettings.intercomDesc.1",defaultMessage:"Allow ChatGPT deep research to read Intercom conversations.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Intercom conversations."},[I.CANVA_CONNECTOR]:{id:"connectorSettings.canvaDesc.1",defaultMessage:"Allow ChatGPT deep research to read Canva designs.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Canva designs."},[I.SLACK_CONNECTOR]:{id:"connectorSettings.slackDesc.1",defaultMessage:"Allow ChatGPT deep research to read Slack messages.",description:"Shown in user settings. Lets users grant ChatGPT deep research read-only access to their Slack messages."},[I.SLACK_CODEX_CONNECTOR]:{id:"connectorSettings.slackCodexDesc.1",defaultMessage:"Allow Codex to access Slack conversations and start codex tasks.",description:"Shown in user settings. Lets users grant Codex access to their Slack conversations from Codex integrations."}},Bf=wt(()=>Nt(()=>import("./nwkahx754oj8hp36.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(t=>t.GithubOnboardingModal));function Ff(){const t=ee(),s=Ts(),n=tt();return y.useEffect(()=>{if(window.location.hash){const a=window.location.hash,o=a.indexOf("?");if(o!==-1){const i=a.substring(o+1),r=new URLSearchParams(i).get("scroll");if(r){let c=0;const m=3,u=()=>{const d=document.getElementById(r);d?d.scrollIntoView({behavior:"smooth"}):c<m&&(c+=1,setTimeout(u,100))};u()}}}},[]),y.useEffect(()=>{const a=window.location.hash,o=a.indexOf("?");if(o===-1)return;const i=new URLSearchParams(a.substring(o+1));if(i.has("github_onboarding")){const l=i.get("github_onboarding");let r=Bt.ConfigureRepos;l&&[Bt.ConfigureRepos,Bt.SyncRepos,Bt.IndexRepos].includes(l)&&(r=l),at(t,Bf,{initialState:r}),i.delete("github_onboarding");const c=a.substring(0,o),m=i.toString()?"".concat(c,"?").concat(i.toString()):c;n({hash:m},{replace:!0})}},[t,n]),y.useEffect(()=>{se.logEventWithStatsig("Connectors Settings Modal Shown","chatgpt_connectors_settings_modal_shown")},[]),e.jsxs(e.Fragment,{children:[s&&e.jsx(xi,{}),e.jsx(Lf,{}),e.jsx(Rf,{})]})}const Gf=()=>{"use forget";const t=ot.c(20),{connectorConfig:s,isLoading:n}=kn();let a;t[0]!==s?(a=s.get(ke.GDRIVE),t[0]=s,t[1]=a):a=t[1];const o=a;let i;t[2]!==s?(i=s.get(ke.O365_PERSONAL),t[2]=s,t[3]=i):i=t[3];const l=i;let r;t[4]!==s?(r=s.get(ke.O365_BUSINESS),t[4]=s,t[5]=r):r=t[5];const c=r,m=!!(o!=null&&o.access_token),u=!!(l!=null&&l.access_token),d=!!(c!=null&&c.access_token);if(n||!(m||u||d))return null;let h;t[6]===Symbol.for("react.memo_cache_sentinel")?(h=e.jsx(g,p({},cn.fileUploadsTitle)),t[6]=h):h=t[6];let x;t[7]!==o||t[8]!==m?(x=o&&m&&e.jsx(Jn,{entry:o,description:cn.googleDriveDesc}),t[7]=o,t[8]=m,t[9]=x):x=t[9];let b;t[10]!==u||t[11]!==l?(b=l&&u&&e.jsx(Jn,{entry:l,description:cn.o365Desc}),t[10]=u,t[11]=l,t[12]=b):b=t[12];let M;t[13]!==d||t[14]!==c?(M=c&&d&&e.jsx(Jn,{entry:c,description:cn.o365BusinessDesc}),t[13]=d,t[14]=c,t[15]=M):M=t[15];let v;return t[16]!==x||t[17]!==b||t[18]!==M?(v=e.jsx(xe,{title:h,children:e.jsxs(e.Fragment,{children:[x,b,M]})}),t[16]=x,t[17]=b,t[18]=M,t[19]=v):v=t[19],v};function Jn(t){"use forget";const s=ot.c(18),{entry:n,description:a}=t,o=n.type;let i;s[0]!==o?(i=Or(o),s[0]=o,s[1]=i):i=s[1];const l=i,r=A();let c;s[2]===Symbol.for("react.memo_cache_sentinel")?(c=yt("border-token-border-default bg-token-bg-primary shadow-xxs h-fit rounded-[10px] border-[0.5px] p-2"),s[2]=c):c=s[2];let m;s[3]!==l?(m=e.jsx("div",{className:c,children:e.jsx(l,{className:"icon-lg"})}),s[3]=l,s[4]=m):m=s[4];const u=n.type;let d;s[5]!==r||s[6]!==u?(d=wn(u,r),s[5]=r,s[6]=u,s[7]=d):d=s[7];let f;s[8]!==a?(f=e.jsx(g,p({},a)),s[8]=a,s[9]=f):f=s[9];const h=!!n.access_token;let x;s[10]!==n||s[11]!==h?(x=e.jsx(Dr,{entry:n,isConnected:h,onDisconnect:fa,onConnect:Uf,redirectUri:Nn}),s[10]=n,s[11]=h,s[12]=x):x=s[12];let b;return s[13]!==m||s[14]!==d||s[15]!==f||s[16]!==x?(b=e.jsx("div",{className:"border-token-border-light items-center border-b px-0.5 py-3 last-of-type:border-none",children:e.jsx(_t,{icon:m,title:d,description:f,statusIndicator:x})}),s[13]=m,s[14]=d,s[15]=f,s[16]=x,s[17]=b):b=s[17],b}function Uf(){}const cn=te({fileUploadsTitle:{id:"connectorSettings.fileUploadsTitle",defaultMessage:"File uploads"},googleDriveDesc:{id:"connectorSettings.googleDriveDesc.1",defaultMessage:"Upload Google Docs, Sheets, Slides and other files."},o365Desc:{id:"connectorSettings.o365Desc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint and other files."},o365BusinessDesc:{id:"connectorSettings.o365BusinessDesc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint, and other files, including those from SharePoint sites."}}),Wf="https://platform.openai.com/docs/mcp#risks-and-safety",Ls=te({title:{id:"QvgpB4",defaultMessage:"Advanced settings"},developerModeTitle:{id:"4DDtEK",defaultMessage:"Developer mode"},developerModeDescription:{id:"Uo45Zz",defaultMessage:"Allows you to add unverified connectors that could modify or erase data permanently. Memory is disabled. Use at your own risk. <link>Learn more</link>"},developerModeDisabledByAdmin:{id:"1dOaHH",defaultMessage:"Your admin has not enabled developer mode."},backButton:{id:"2XH9oW",defaultMessage:"Back"}});function Hf({onBack:t}){const s=A(),n=Wt(),a=mt(!0),o=bi(),i=Ql();return!o&&!n?null:e.jsx(xe,{title:e.jsxs(F,{color:"ghost",size:"small",onClick:t,contentWrapperClassName:"gap-[6px]",className:"rounded-lg ps-0.5 pe-1.5",children:[e.jsx(Ta,{className:"icon icon-sm"}),e.jsx(g,p({},Ls.backButton))]}),children:e.jsx(Q,{children:e.jsx(Ke,{label:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,p({},Ls.developerModeTitle)),e.jsx(qd,{})]}),ariaLabel:s.formatMessage(Ls.developerModeTitle),disabled:!i||a.isPending,toggleTooltip:i?void 0:s.formatMessage(Ls.developerModeDisabledByAdmin),enabled:n,onChange:l=>{a.mutate({setting:he.DeveloperMode,value:l})},description:e.jsx(g,ne(p({},Ls.developerModeDescription),{values:{link:l=>e.jsx(os,{href:Wf,openNewTab:!0,children:l})}}))})})})}const we=te({widgetDomain:{id:"2OSUeW",defaultMessage:"Widget domain"},connectDomains:{id:"heImfx",defaultMessage:"Widget connect domains"},resourceDomains:{id:"9pywc9",defaultMessage:"Widget resource domains"},worksWith:{id:"g1eGWJ",defaultMessage:"Works with"},category:{id:"XG1+sz",defaultMessage:"Category"},developer:{id:"6JoJBm",defaultMessage:"Developer"},website:{id:"8Qxsof",defaultMessage:"Website"},privacyPolicy:{id:"diKoqe",defaultMessage:"Privacy Policy"},termsOfService:{id:"NfU0SI",defaultMessage:"Terms of Service"},categoryBusinessAndAnalytics:{id:"QhPypU",defaultMessage:"Business and Analytics"},categoryCreativityAndDesign:{id:"/bcuXB",defaultMessage:"Creativity and Design"},categoryDeveloperTools:{id:"15wsiU",defaultMessage:"Developer Tools"},categoryMessagingAndSocial:{id:"rBRiVM",defaultMessage:"Messaging and Social"},categoryProductivity:{id:"UH2JU4",defaultMessage:"Productivity"},categoryResearchAndKnowledge:{id:"WKfdK1",defaultMessage:"Research and Knowledge"},baseUrl:{id:"XOcfO/",defaultMessage:"URL"},safetyScanTitle:{id:"1IzOM7",defaultMessage:"Safety Scan"},safetyScanScanningStatus:{id:"YfgX5F",defaultMessage:"Scanning"},safetyScanPassed:{id:"UrwyRa",defaultMessage:"Passed"},safetyScanFailed:{id:"FeaZe+",defaultMessage:"Failed"},authorizationSupported:{id:"oA2ynd",defaultMessage:"Authorization supported"},linkAuthorizationType:{id:"39RCjo",defaultMessage:"Authorization used"},authorizationTypeOAuth:{id:"VsekFo",defaultMessage:"OAuth"},authorizationTypeApiKey:{id:"1WrvLC",defaultMessage:"API key"},authorizationTypeNone:{id:"ETv4pb",defaultMessage:"None"}}),zf=(t,s)=>{switch(t){case"BUSINESS_AND_ANALYTICS":return s.formatMessage(we.categoryBusinessAndAnalytics);case"CREATIVITY_AND_DESIGN":return s.formatMessage(we.categoryCreativityAndDesign);case"DEVELOPER_TOOLS":return s.formatMessage(we.categoryDeveloperTools);case"MESSAGING_AND_SOCIAL":return s.formatMessage(we.categoryMessagingAndSocial);case"PRODUCTIVITY":return s.formatMessage(we.categoryProductivity);case"RESEARCH_AND_KNOWLEDGE":return s.formatMessage(we.categoryResearchAndKnowledge);default:return null}},Kf=t=>!t||typeof t!="object"?null:"type"in t&&t.type?t.type:"header_scheme"in t?"API_KEY":"authorization_url"in t?"OAUTH":"NONE",Ao=(t,s)=>{switch(t){case"OAUTH":return s.formatMessage(we.authorizationTypeOAuth);case"API_KEY":return s.formatMessage(we.authorizationTypeApiKey);case"NONE":return s.formatMessage(we.authorizationTypeNone)}return t},Zs=(t,s,n,a)=>{var h,x,b,M,v,j,S,C,w,E;const o=(h=a==null?void 0:a.isDeveloperMode)!=null?h:!1,i=a==null?void 0:a.linkAuthType,l=[];s&&s.length>0&&l.push({title:n.formatMessage(we.worksWith),value:Js(s,n)});const r=zf((x=t.branding)==null?void 0:x.category,n);if(r&&l.push({title:n.formatMessage(we.category),value:r}),(b=t.branding)!=null&&b.developer&&l.push({title:n.formatMessage(we.developer),value:t.branding.developer}),(M=t.branding)!=null&&M.website&&l.push({title:n.formatMessage(we.website),value:e.jsx(os,{href:t.branding.website,openNewTab:!0,underline:!1,"aria-label":n.formatMessage(we.website),className:"text-blue-400",children:e.jsx(rs,{className:"icon"})})}),(v=t.branding)!=null&&v.privacy_policy&&l.push({title:n.formatMessage(we.privacyPolicy),value:e.jsx(os,{href:t.branding.privacy_policy,openNewTab:!0,underline:!1,"aria-label":n.formatMessage(we.privacyPolicy),className:"text-blue-400",children:e.jsx(rs,{className:"icon"})})}),(j=t.branding)!=null&&j.terms_of_service&&l.push({title:n.formatMessage(we.termsOfService),value:e.jsx(os,{href:t.branding.terms_of_service,openNewTab:!0,underline:!1,"aria-label":n.formatMessage(we.termsOfService),className:"text-blue-400",children:e.jsx(rs,{className:"icon"})})}),["MCP","OPEN_API"].includes(t.connector_type)&&t.base_url&&(!((S=t.branding)!=null&&S.is_discoverable_app)||a!=null&&a.ecosystemDebugShowAppUrlsInSettings)&&l.push({title:n.formatMessage(we.baseUrl),value:t.base_url}),t.policy_info){const _=t.policy_info.safety_status==="SCANNED_OK"?e.jsx($l,{className:"icon-sm text-token-text-primary"}):t.policy_info.safety_status==="SCANNED_BLOCKED"?e.jsx(yi,{className:"icon-sm interactive-label-warning-secondary"}):e.jsx(Ge,{className:"icon-sm"}),D=t.policy_info.safety_status==="SCANNED_OK"?e.jsx(g,p({},we.safetyScanPassed)):t.policy_info.safety_status==="SCANNED_BLOCKED"?e.jsx(g,p({},we.safetyScanFailed)):e.jsx(g,p({},we.safetyScanScanningStatus));t.policy_info.safety_status!=="SCANNED_OK"&&l.push({title:n.formatMessage(we.safetyScanTitle),value:e.jsxs("span",{className:"flex items-center gap-1",children:[_,D]})})}if(!o)return l;const c=((C=t.supported_auth)!=null?C:[]).map(_=>Kf(_)).filter(_=>!!_),m=Array.from(new Set(c)),d=(m.length>0?m:["NONE"]).map(_=>Ao(_,n)),f=d.length>1?n.formatList(d):d[0];return l.push({title:n.formatMessage(we.authorizationSupported),value:f}),i&&l.push({title:n.formatMessage(we.linkAuthorizationType),value:Ao(i,n)}),t.widget_domain&&l.push({title:n.formatMessage(we.widgetDomain),value:t.widget_domain}),t.widget_csp_config&&(l.push({title:n.formatMessage(we.connectDomains),value:(w=t.widget_csp_config.connect_domains)==null?void 0:w.map(_=>'"'.concat(_,'"')).join(", ")}),l.push({title:n.formatMessage(we.resourceDomains),value:(E=t.widget_csp_config.resource_domains)==null?void 0:E.map(_=>'"'.concat(_,'"')).join(", ")})),l},gn=te({allowH17180rActivity:{id:"G79Ih9",defaultMessage:"Allow proactive activity"},allowH17180rGmailDesc:{id:"HzRL3y",defaultMessage:"Let ChatGPT proactively read Gmail and give you helpful insights. <link>Learn more</link>"},allowH17180rGoogleCalendarDesc:{id:"ziIyKz",defaultMessage:"Let ChatGPT proactively read Google Calendar and give you helpful insights. <link>Learn more</link>"},allowH17180rGoogleContactsDesc:{id:"1hp0Yi",defaultMessage:"Let ChatGPT proactively read Google Contacts and give you helpful insights. <link>Learn more</link>"}}),Lr={[Ve[I.GMAIL_CONNECTOR]]:he.H17180rGmail,[Ve[I.GCAL_CONNECTOR]]:he.H17180rGoogleCalendar,[Ve[I.GOOGLE_CONTACTS_CONNECTOR]]:he.H17180rGoogleContacts},Vf=new Set(Object.keys(Lr));function Ir(t){const s=ee();return!!(oe(s,"3304830717")&&t&&Vf.has(t))}function qf(t){switch(t){case Ve[I.GMAIL_CONNECTOR]:return gn.allowH17180rGmailDesc;case Ve[I.GCAL_CONNECTOR]:return gn.allowH17180rGoogleCalendarDesc;case Ve[I.GOOGLE_CONTACTS_CONNECTOR]:return gn.allowH17180rGoogleContactsDesc;default:return}}function Yf({connectorId:t,connectorName:s}){const n=A(),a=Ir(t),o=t!=null?Lr[t]:void 0,{data:i,isLoading:l}=Jl(f=>{var h;if(o)return(h=f.settings)==null?void 0:h[o]}),{mutate:r,isPending:c}=mt(!0),m=i!=null?i:!0,u=y.useCallback(()=>{o&&r({setting:o,value:!m})},[r,o,m]);if(!a||!o)return null;const d=qf(t);return d?e.jsx(Q,{children:e.jsx(Ke,{label:n.formatMessage(gn.allowH17180rActivity,{connectorName:s}),description:e.jsx(g,ne(p({},d),{values:{connectorName:s,link:f=>e.jsx(ks,{href:"https://help.openai.com/en/articles/11487775-connectors-in-chatgpt",className:"underline",children:f})}})),enabled:!!m,isLoading:l||c,onChange:u})}):null}const ge=te({connectorDisabled:{id:"v6nWaS",defaultMessage:"This connector is not enabled for your account. Please contact your administrator to enable it."},backButton:{id:"2XH9oW",defaultMessage:"Back"},information:{id:"m6oyFG",defaultMessage:"Information"},blockItems:{id:"guxwme",defaultMessage:"Exclude items from sync"},connectButton:{id:"bQDuj2",defaultMessage:"Connect"},refreshActionsButton:{id:"lyYLo0",defaultMessage:"Refresh"},enableSync:{id:"FQFQxe",defaultMessage:"Enable sync"},disableSync:{id:"BNY6qe",defaultMessage:"Disable sync"},disableSyncModalTitle:{id:"DGZB7x",defaultMessage:"Disable sync for {connector}?"},disableSyncModalDescription:{id:"qJQyMJ",defaultMessage:"All synced data will be deleted. If you re-enable sync, it can take 8 hours or more to sync all content."},disableSyncModalCheckboxLabel:{id:"Dl8YNg",defaultMessage:"I understand all synced data will be deleted"},disconnectButton:{id:"eeZbkM",defaultMessage:"Disconnect"},settingsButton:{id:"Z24j9e",defaultMessage:"Settings"},manageDropdown:{id:"q/O9f7",defaultMessage:"Manage"},reportButton:{id:"R5Pd7v",defaultMessage:"Report"},reportModalTitle:{id:"6oNeBk",defaultMessage:"Report"},connectedOn:{id:"b1ykGv",defaultMessage:"Connected on"},createdAt:{id:"TACRvJ",defaultMessage:"Created at"},deleteButton:{id:"Gn89FJ",defaultMessage:"Delete"},actions:{id:"K1PvPz",defaultMessage:"Actions"},readAction:{id:"OUdavU",defaultMessage:"Read"},writeAction:{id:"hfCHYo",defaultMessage:"Write"},openWorldAction:{id:"cwPgDK",defaultMessage:"Open world"},metadataHeading:{id:"qLsGc8",defaultMessage:"Metadata"},metadataOutputTemplate:{id:"KzJNSi",defaultMessage:"Output template"},metadataToolInvokingMessage:{id:"vNFHen",defaultMessage:"Invoking message"},metadataToolInvokedMessage:{id:"BQ6rYZ",defaultMessage:"Invoked message"},metadataWidgetAccessible:{id:"hdiMx2",defaultMessage:"Widget accessible"},securitySchemes:{id:"xkLoDf",defaultMessage:"Security schemes"},githubInstallationAlert:{id:"V4NUT5",defaultMessage:"ChatGPT needs access to your repositories to search them."},chooseRepos:{id:"VW7eJj",defaultMessage:"Choose repositories"},preferences:{id:"7kCnYS",defaultMessage:"Preferences"},recommendConnection:{id:"XpEYQL",defaultMessage:"Connection recommendations"},recommendConnectionDescription:{id:"CH3i+a",defaultMessage:"Let ChatGPT recommend connecting to {connectorName} when responding."},allowUsingAutomatically:{id:"VaMXaj",defaultMessage:"Use automatically in chat"},allowUsingAutomaticallyDescription:{id:"IHuWia",defaultMessage:"Let ChatGPT reference {connectorName} automatically when responding."},settingError:{id:"zcPmpl",defaultMessage:"Error updating setting."},editDescription:{id:"8KkNYS",defaultMessage:"Edit connector descriptions"},saveDescription:{id:"b728ms",defaultMessage:"Save"},descriptionFieldLabel:{id:"G4TQb4",defaultMessage:"Connector description"},descriptionPlaceholder:{id:"UDk3bR",defaultMessage:"Describe what this connector does for your team"},modelDescriptionFieldLabel:{id:"5YP4M7",defaultMessage:"Model description"},updateDescriptionSuccess:{id:"s/uJtK",defaultMessage:"Connector details updated"},updateDescriptionError:{id:"/zjnPq",defaultMessage:"Couldn't update connector details"}}),Rr="openai/outputTemplate",Br="openai/toolInvocation/invoking",Fr="openai/toolInvocation/invoked",Gr="openai/widgetAccessible",Qf=[Rr,Br,Fr,Gr],Ur=t=>{if(t){if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")return String(t);try{return JSON.stringify(t,null,2)}catch(s){return String(t)}}},$f=t=>Qf.reduce((s,n)=>{const a=Ur(t==null?void 0:t[n]);return a===void 0||s.push({key:n,value:a}),s},[]),Jf=({entries:t,headingMessage:s,labels:n})=>{"use no forget";return t.length===0?null:e.jsxs("div",{className:"mt-1 flex flex-col gap-2 text-xs",children:[e.jsx("div",{className:"text-token-text-tertiary text-[11px] font-semibold uppercase",children:e.jsx(g,p({},s))}),t.map(({key:a,value:o})=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"text-token-text-secondary",children:e.jsx(g,p({},n[a]))}),e.jsx("pre",{className:"bg-token-bg-tertiary text-token-text-tertiary rounded-md px-2 py-1 font-mono text-[11px] leading-[14px] whitespace-pre-wrap",children:o})]},a))]})},Xf=t=>!t||t.length===0?[]:t.reduce((s,n)=>{const a=Ur(n);return a===void 0||s.push({key:n.type,value:a}),s},[]),Zf=({entries:t,headingMessage:s})=>{"use no forget";if(t.length===0)return e.jsx(e.Fragment,{});const n=t.map(a=>a.value).join(",\n");return e.jsxs("div",{className:"mt-1 flex flex-col gap-2 text-xs",children:[e.jsx("div",{className:"text-token-text-tertiary text-[11px] font-semibold uppercase",children:e.jsx(g,p({},s))}),e.jsx("pre",{className:"bg-token-bg-tertiary text-token-text-tertiary rounded-md px-2 py-1 font-mono text-[11px] leading-[14px] whitespace-pre-wrap",children:n})]})},ep=t=>{const s=[];return!!t.is_consequential&&s.push("write"),s},tp=({badgeKeys:t,labels:s})=>t.length===0?null:e.jsx("div",{className:"flex items-center gap-1",children:t.map(n=>e.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:e.jsx(g,p({},s[n]))},n))}),sp={read:ge.readAction,write:ge.writeAction,open_world:ge.openWorldAction},np={[Rr]:ge.metadataOutputTemplate,[Br]:ge.metadataToolInvokingMessage,[Fr]:ge.metadataToolInvokedMessage,[Gr]:ge.metadataWidgetAccessible},Wr=({connector:t,link:s,isRefreshingActions:n,onRefreshActions:a,onToggleAction:o,isTogglingAction:i})=>{const l=Wt(),r=ee(),c=oe(r,"156264210"),m=oe(r,"3475796410"),u=t.connector_type!=="SERVICE"||m;return l?e.jsxs("div",{className:"px-2 pt-6",children:[e.jsxs("div",{className:"flex items-baseline justify-between pb-3 text-base font-medium",children:[e.jsx(g,p({},ge.actions)),a&&e.jsx(F,{onClick:a,size:"small",color:"secondary",loading:n,children:e.jsx(g,p({},ge.refreshActionsButton))})]}),e.jsx("ul",{className:"mb-4 flex flex-col gap-2",children:l&&t.actions.map(d=>{var M,v,j;const f=ep(d),h=(M=d.meta)!=null?M:{},x=$f(h),b=!!t.supports_full_actions||["search","fetch"].includes(d.name);return e.jsxs("li",{className:b?void 0:"opacity-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 font-mono font-medium",children:d.name}),tp({badgeKeys:f,labels:sp}),b&&c&&o&&e.jsx(Mi,{"aria-hidden":!0,checked:(v=s==null?void 0:s.actions)==null?void 0:v.includes(d.name),size:"small",onCheckedChange:S=>o==null?void 0:o(d.name,S),disabled:!!i||!u})]}),e.jsx("div",{className:"text-token-text-tertiary text-xs",children:d.description}),e.jsx(Zf,{entries:Xf((j=d.meta)==null?void 0:j.securitySchemes),headingMessage:ge.securitySchemes}),e.jsx(Jf,{entries:x,headingMessage:ge.metadataHeading,labels:np})]},d.name)})})]}):null},ap=wt(()=>Nt(()=>import("./nwkahx754oj8hp36.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(t=>t.GithubOnboardingModal)),op=({link:t,onDisableSync:s})=>{var V,$,q;const n=ee(),a=A(),o=xa(),i=Xl(),[l,r]=y.useState(""),[c,m]=y.useState(new Map),[u]=qg(l,500),{connectionInstanceData:d,isLoading:f,refetch:h}=es({skip:!o}),x=y.useMemo(()=>d==null?void 0:d.connection_statuses.find(G=>{var B,Y;return((B=G==null?void 0:G.user_connection_details)==null?void 0:B.knowledge_connector_type)==="github"&&((Y=G==null?void 0:G.user_connection_details)==null?void 0:Y.backing_link_id)===t.id}),[d,t.id]),{data:b,isLoading:M,isFetchingNextPage:v,hasNextPage:j,fetchNextPage:S}=Yd({enabled:!!(t&&x),debouncedSearchTerm:u,linkId:t.id}),{data:C,isLoading:w,refetch:E}=Qd({enabled:!!((V=x==null?void 0:x.user_connection_details)!=null&&V.connection_instance_id),connectionInstanceId:(q=($=x==null?void 0:x.user_connection_details)==null?void 0:$.connection_instance_id)!=null?q:""});y.useEffect(()=>{var G,B,Y;if((G=C==null?void 0:C.sync_enabled_objects)!=null&&G.length){const X=(B=C==null?void 0:C.sync_enabled_objects)==null?void 0:B.filter(Z=>Z.object_type==="repository");X!=null&&X.length&&m(new Map((Y=X==null?void 0:X.map(Z=>{var pe,ce;return[Number(Z.object_id),{id:Number(Z.object_id),repository_full_name:(pe=Z.object_name)!=null?pe:"",description:(ce=Z.object_description)!=null?ce:"",is_code_search_indexed:!0}]}))!=null?Y:[]))}},[C]);const{mutate:_,isPending:D}=_e({mutationFn:async()=>{var B;const G=(B=x==null?void 0:x.user_connection_details)==null?void 0:B.connection_instance_id;G&&await pn.user_connection_update_sync_configuration(G,{type:"GithubUserApiExtension",opted_in_repository_ids:Array.from(c.keys())})},onSuccess:()=>{E(),h()}}),N=y.useCallback(()=>{var G;m(new Map(((G=C==null?void 0:C.sync_enabled_objects)!=null?G:[]).filter(B=>B.object_type==="repository").map(B=>{var Y,X;return[Number(B.object_id),{id:Number(B.object_id),repository_full_name:(Y=B.object_name)!=null?Y:"",description:(X=B.object_description)!=null?X:"",is_code_search_indexed:!0}]})))},[C]),P=y.useMemo(()=>{var Y,X;const G=(Y=b==null?void 0:b.pages.flatMap(Z=>Z.repos))!=null?Y:[],B=(X=C==null?void 0:C.sync_enabled_objects)==null?void 0:X.filter(Z=>Z.object_type==="repository");if(!u&&(B!=null&&B.length)){const Z=new Map(G.map(ie=>[Number(ie.id),ie])),pe=new Set(G.map(ie=>Number(ie.id))),ce=B.filter(ie=>pe.has(Number(ie.object_id))).map(ie=>Z.get(Number(ie.object_id))),le=B.filter(ie=>!pe.has(Number(ie.object_id))).map(ie=>{var ue;return{id:Number(ie.object_id),repository_full_name:(ue=ie.object_name)!=null?ue:"",description:"",is_code_search_indexed:!0}}),ae=G.filter(ie=>!B.some(ue=>Number(ue.object_id)===Number(ie.id)));return[...ce,...le,...ae]}return G},[b,u,C]),T=!!x&&(P.length>5||!!u),k=y.useCallback(G=>{m(G)},[]),O=y.useMemo(()=>{if(!x)return!1;if(!(C!=null&&C.sync_enabled_objects))return c.size>0;const G=new Set(C.sync_enabled_objects.filter(B=>B.object_type==="repository").map(B=>Number(B.object_id)));if(G.size!==c.size)return!0;for(const B of c.keys())if(!G.has(B))return!0;for(const B of G)if(!c.has(B))return!0;return!1},[c,C,x]),R=f||M||w;if(!o)return null;const H=e.jsx(F,{color:"secondary",disabled:i,onClick:()=>{at(n,ap,{initialState:Bt.SyncRepos,onClose:()=>{h()}})},children:e.jsx(g,{id:"Dnyhgs",defaultMessage:"Choose repositories"})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-2 pt-5",children:e.jsx(xe,{description:e.jsx(g,{id:"+8dStU",defaultMessage:"Syncing improves speed and quality, so select the repositories you use most. ChatGPT can still access repositories that aren’t synced."}),noBorder:!0,title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"JQCZHf",defaultMessage:"Synced repositories"}),x&&e.jsx(qs,{connection:x,location:"user_settings"})]}),children:e.jsxs("div",{className:"mt-2 flex flex-col",children:[T&&e.jsx(Ss,{ariaLabel:a.formatMessage({id:"D2Xhv1",defaultMessage:"Search repositories"}),autoComplete:"off",className:"mb-2",icon:Zl,iconPosition:"left",name:"search-repos",onChange:G=>{r(G.target.value)},placeholder:a.formatMessage({id:"jYgjAb",defaultMessage:"Search repositories"})}),R||x?e.jsx(Yg,{allRepos:P,enableScroll:!1,fetchNextPage:S,hasNextPage:j,isFetchingNextPage:v,isLoading:R,searchTerm:l,onChange:k,selectedRepos:c}):e.jsxs("div",{className:"border-token-border-default flex items-center justify-between rounded-xl border-1 p-4",children:[e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(g,{id:"fwutvn",defaultMessage:"No repositories synced"})}),i?e.jsx(ec,{children:H}):H]})]})})}),O&&e.jsx("div",{className:"bg-token-bg-primary border-token-border-default sticky end-0 bottom-0 z-10 -mx-4 border-t-1 px-4 py-6",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(F,{color:"secondary",onClick:N,children:e.jsx(g,p({},Ws.cancelButtonText))}),e.jsx(F,{color:"primary",loading:D,onClick:()=>{c.size===0?s():_()},children:e.jsx(g,{id:"4e7T8Q",defaultMessage:"Save"})})]})})]})},mn=Ve[I.GITHUB_CONNECTOR],Hr=({badge:t,connectorId:s,connectorDisabled:n=!1,link:a,icon:o,name:i,description:l,onBackClick:r,details:c=[],onConnectClick:m,onDisconnectClick:u,isConnecting:d,isDisconnecting:f=!1,isDeleting:h=!1,onBlockItems:x,onDelete:b,onDeleteSyncClick:M,onEnableSyncClick:v,reportEntity:j,onEditDescription:S,onEditLogo:C})=>{const w=A(),E=me(),_=ee(),[D,N]=y.useState(!1),P=oe(_,"4202324921"),T=!!(a!=null?a:u),k=!!(m&&!T),O=!!(u&&T),R=!!u&&!O||!!b||!!x||!!M||!!v||!!m&&!k||!!j&&P||!!S||!!C||s===mn,H=oe(_,"2571214709"),{isLoading:V,data:$}=Ci(!0),ie=$!=null?$:{},{disabledTools:q=[]}=ie,G=Ds(ie,["disabledTools"]),B=Ee(),{isPending:Y,mutate:X}=_e({mutationFn:async({data:ue})=>await vi(ue),onMutate:async({data:ue})=>{await B.cancelQueries({queryKey:["userContext"]});const U=B.getQueryData(["userContext"]);return B.setQueryData(["userContext"],J=>p(p({},J!=null?J:{}),ue)),{prevData:U}},onError:(ue,U,J)=>{J!=null&&J.prevData&&B.setQueryData(["userContext"],J.prevData),E.danger(w.formatMessage(ge.settingError),{toastId:"connector_details_listing_setting_error"})},onSettled:()=>{B.invalidateQueries({queryKey:["userContext"]})}}),Z=rp(s),pe=Si("installations/select_target"),ce=()=>{if(!Z)return;const ue=q.includes(Z)?q.filter(U=>U!==Z):Array.from(new Set([...q,Z]));X({data:p({disabledTools:ue},G)})},le=!!(H&&Z),ae=Ir(s);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-header-height flex flex-shrink-0 items-center",children:e.jsxs(F,{color:"ghost",size:"small",onClick:r,contentWrapperClassName:"gap-[6px]",className:"rounded-lg ps-0.5 pe-1.5",children:[e.jsx(Ta,{className:"icon icon-sm"}),e.jsx(g,p({},ge.backButton))]})}),e.jsxs("div",{className:"flex items-center gap-3 px-2 pt-2",children:[o,e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-lg font-semibold",children:i}),t]}),e.jsx("span",{className:"text-token-text-tertiary",children:l})]}),e.jsx(ct,{label:w.formatMessage(ge.connectorDisabled),disabled:!n,children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[k&&e.jsx("div",{children:e.jsx(F,{onClick:m,loading:d,disabled:n,children:e.jsx(g,p({},ge.connectButton))})}),O&&e.jsx("div",{children:e.jsx(F,{onClick:u,loading:f,color:"danger",disabled:n||h||f,children:e.jsx(g,p({},ge.disconnectButton))})}),R&&e.jsx("div",{children:e.jsxs(Se.Root,{children:[e.jsx(Se.BasicTrigger,{disabled:n,children:k||O?e.jsx(F,{color:"ghost",icon:Pn}):e.jsx(F,{color:"secondary",disabled:n,children:e.jsx(g,p({},ge.manageDropdown))})}),e.jsx(Se.Portal,{children:e.jsxs(Se.Content,{size:"small",align:"end",children:[j&&P&&e.jsxs(Se.Item,{onClick:()=>N(!0),children:[e.jsx($d,{className:"icon"}),e.jsx(g,p({},ge.reportButton))]}),s===mn&&e.jsx(os,{href:pe,openNewTab:!0,underline:!1,children:e.jsxs(Se.Item,{children:[e.jsx(rs,{className:"icon"}),e.jsx(g,p({},ge.settingsButton))]})}),!1,!1,!k&&m&&e.jsxs(Se.Item,{onClick:m,children:[e.jsx(Na,{className:"icon"}),e.jsx(g,p({},ge.connectButton))]}),v&&e.jsxs(Se.Item,{onClick:v,children:[e.jsx(ka,{className:"icon"}),e.jsx(g,p({},ge.enableSync))]}),x&&e.jsxs(Se.Item,{onClick:x,children:[e.jsx(ji,{className:"icon"}),e.jsx(g,p({},ge.blockItems))]}),M&&e.jsxs(Se.Item,{onClick:M,children:[e.jsx(Hg,{className:"icon"}),e.jsx(g,p({},ge.disableSync))]}),!O&&u&&e.jsxs(Se.Item,{onClick:u,color:"danger",children:[e.jsx(ga,{className:"icon"}),e.jsx(g,p({},ge.disconnectButton))]}),b&&e.jsxs(Se.Item,{onClick:b,color:"danger",disabled:h,children:[e.jsx(Ea,{className:"icon"}),e.jsx(g,p({},ge.deleteButton))]})]})})]})})]})})]}),s===mn&&a&&e.jsx(lp,{link:a}),c.length>0&&e.jsx("div",{className:"px-2 pt-6",children:e.jsx(xe,{title:e.jsx(g,p({},ge.information)),noBorder:!0,children:e.jsx("div",{className:"border-token-border-default flex flex-col gap-2 rounded-2xl border p-3",children:c.filter(ue=>ue.value!=null).map(ue=>e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("span",{className:"text-token-text-tertiary text-nowrap",children:ue.title}),typeof ue.value=="string"?e.jsx("input",{type:"text",readOnly:!0,className:"w-full border-none bg-transparent p-0 text-end text-sm",value:ue.value}):e.jsx("span",{className:"truncate",children:ue.value})]},ue.title))})})}),(le||ae)&&e.jsx("div",{className:"px-2 pt-6",children:e.jsxs(xe,{title:e.jsx(g,p({},ge.preferences)),children:[le&&Z&&e.jsx(Q,{children:e.jsx(Ke,{label:a!=null?w.formatMessage(ge.allowUsingAutomatically):w.formatMessage(ge.recommendConnection),description:a!=null?w.formatMessage(ge.allowUsingAutomaticallyDescription,{connectorName:i}):w.formatMessage(ge.recommendConnectionDescription,{connectorName:i}),enabled:!q.includes(Z),isLoading:V||Y,onChange:ce})}),ae&&e.jsx(Yf,{connectorId:s,connectorName:i})]})}),D&&j&&P&&e.jsx(ip,{reportEntity:j,onClose:()=>N(!1)})]})};function ip({reportEntity:t,onClose:s}){var r;const n=ee(),a=A(),{data:o}=Jd(n,t.entityType),i=Xd(n,a,t.id,t.entityType);if(o==null)return null;const l=(r=t.title)!=null?r:a.formatMessage(ge.reportModalTitle);return e.jsx(Zd,{reasons:o.reasons,submitReport:i,title:l,onClose:s,header:o.header,subHeader:o.header_explanation})}function rp(t){switch(t){case Ve[I.GMAIL_CONNECTOR]:return"gmail";case Ve[I.GCAL_CONNECTOR]:return"gcal";case Ve[I.GOOGLE_CONTACTS_CONNECTOR]:return"gcontacts";default:return null}}const lp=({link:t})=>{var i;const s=Si("installations/select_target"),{data:n,isLoading:a}=nr({linkId:(i=t==null?void 0:t.id)!=null?i:""}),o=!n;return a||!o?null:e.jsx("div",{className:"px-2 pt-6",children:e.jsx("div",{className:"border-token-border-default flex flex-col gap-2 rounded-2xl border p-3",children:e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx(g,p({},ge.githubInstallationAlert)),e.jsxs(F,{color:"primary",contentWrapperClassName:"gap-1.5",onClick:()=>{window.open(s,"_blank")},children:[e.jsx(g,p({},ge.chooseRepos)),e.jsx(rs,{className:"icon"})]})]})})})},Gn=o=>{var i=o,{connector:t,onEditDescription:s,onEditLogo:n}=i,a=Ds(i,["connector","onEditDescription","onEditLogo"]);const l=A();return e.jsx(Hr,p({connectorId:t.id,icon:e.jsx(fs,{connector:t,size:"large",className:"border-token-border-default bg-token-bg-primary shadow-xxs max-h-fit rounded-2xl border-[.5px] bg-clip-padding p-2"}),name:gs(t.name,l),badge:e.jsx(Ps,{connector:t}),description:t.description,connectorDisabled:t.status==="DISABLED_BY_ADMIN",onEditDescription:s,onEditLogo:n},a))},zr=({connector:t,link:s,onBackClick:n,onDisconnectClick:a,onConnectClick:o,isConnecting:i,isDisconnecting:l,isDeleting:r,isRefreshingActions:c,isTogglingAction:m,onDelete:u,onRefreshActions:d,onToggleAction:f,onEditDescription:h,onEditLogo:x})=>{const b=ee(),M=b&&oe(b,"4026425501"),v=Ue(),j=A(),S=xa(),C=Xs(t),w=Wt(),E=y.useMemo(()=>[{title:j.formatMessage(ge.connectedOn),value:new Date(s.created_at).toLocaleString([],{year:"numeric",month:"short",day:"numeric"})},...Zs(t,C,j,{isDeveloperMode:w,linkAuthType:s.auth_type,ecosystemDebugShowAppUrlsInSettings:M})],[t,C,s.created_at,s.auth_type,j,w,M]),[_,D]=y.useState(!1),{isLoading:N,isEnabled:P}=tc(),k=!(v!=null&&v.isPersonalAccount())&&(v==null?void 0:v.planType)!==Pe.SELF_SERVE_BUSINESS&&(!P||N),O=t.id===mn&&S,{connectionInstanceData:R,refetch:H}=es({skip:!O}),V=y.useMemo(()=>{var q;return!((q=R==null?void 0:R.connection_statuses)!=null&&q.length)||!(s!=null&&s.id)?null:R.connection_statuses.find(G=>(s==null?void 0:s.id)===G.user_connection_details.backing_link_id)},[R,s==null?void 0:s.id]),$=y.useCallback(async()=>{var q;(q=V==null?void 0:V.user_connection_details)!=null&&q.connection_instance_id&&(v!=null&&v.isPersonalAccount()?await pn.user_delete_sync(s.id):await pn.user_disconnect(V.user_connection_details.connection_instance_id),setTimeout(()=>{H()},500))},[v,V==null?void 0:V.user_connection_details.connection_instance_id,s.id,H]);return e.jsxs(e.Fragment,{children:[e.jsx(Gn,{connector:t,badge:e.jsx(Ps,{connector:t}),link:s,onBackClick:n,details:E,onEditDescription:h,reportEntity:{id:t.id,entityType:ba.Connector},onDeleteSyncClick:V?()=>D(!0):void 0,onDisconnectClick:a,onConnectClick:o,isConnecting:i,isDisconnecting:l,isDeleting:r,onDelete:u,onEditLogo:x}),O&&!k&&e.jsx(op,{link:s,onDisableSync:()=>D(!0)}),e.jsx(Wr,{connector:t,link:s,isRefreshingActions:c,onRefreshActions:d,onToggleAction:f,isTogglingAction:m}),e.jsx(Kr,{connector:t,onDisableSync:$,isOpen:_,onClose:()=>D(!1)})]})},Kr=({connector:t,onDisableSync:s,isOpen:n,onClose:a})=>{const o=A(),i=me(),[l,r]=y.useState(!1),[c,m]=y.useState(!1),u=y.useCallback(async()=>{try{r(!0),await s(),a(),r(!1),i.success(o.formatMessage({id:"OgQmj5",defaultMessage:"Sync disabled"}))}catch(d){i.danger(o.formatMessage({id:"pg29j7",defaultMessage:"Failed to disable sync"}))}finally{r(!1)}},[s,a,o,i]);return e.jsxs(je,{className:"w-[400px] p-2",isOpen:n,onClose:a,testId:"modal-disable-sync",children:[e.jsx("div",{className:"flex justify-end pb-6",children:e.jsx(vn,{onClick:a})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex items-center gap-2.5",children:e.jsx(fs,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"})}),e.jsx("div",{className:"pt-4 text-center text-2xl font-semibold",children:e.jsx(g,ne(p({},ge.disableSyncModalTitle),{values:{connector:t.name}}))}),e.jsx("div",{className:"text-token-text-secondary text-md pt-2 text-center text-sm",children:e.jsx(g,p({},ge.disableSyncModalDescription))}),e.jsx(sr,{id:"disable-segment-replacement",className:"rounded-xl",label:o.formatMessage(ge.disableSyncModalCheckboxLabel),labelClassName:"font-medium",checked:c,onChange:()=>m(!c),containerClassName:"col-span-3 w-full p-4 border border-gray-300 rounded-xl mt-5 gap-4 text-sm"}),e.jsxs("div",{className:"flex w-full flex-row justify-evenly gap-2 pt-6",children:[e.jsx(F,{onClick:a,color:"secondary",size:"large",className:"flex-1",children:e.jsx(g,p({},Ws.cancelButtonText))}),e.jsx(F,{disabled:!c||l,loading:l,onClick:u,color:"danger",size:"large",className:"flex-1",children:e.jsx(g,p({},ge.disableSync))})]})]})]})},cp=({connector:t,onBackClick:s,onDisconnectClick:n,internalKnowledgeConfig:a,onConnectClick:o})=>{const i=ee(),l=i&&oe(i,"4026425501"),r=A(),c=Wt(),m=y.useMemo(()=>Zs(t,["chat"],r,{isDeveloperMode:c,ecosystemDebugShowAppUrlsInSettings:l}),[t,r,c,l]),u=a.user_connection_details.knowledge_connector_type!=="google_drive_dwd";return e.jsx(Gn,{connector:t,badge:e.jsx(Ps,{connector:t}),onBackClick:s,details:m,onDisconnectClick:u?n:void 0,onConnectClick:o})},Vr=({connector:t,onBackClick:s,onConnectClick:n,isConnecting:a,isDisconnecting:o,isDeleting:i,onDelete:l,onEditDescription:r,onEditLogo:c})=>{const m=A(),u=Xs(t),d=Wt(),f=ee(),h=f&&oe(f,"4026425501"),x=y.useMemo(()=>[...t.created_at?[{title:m.formatMessage(ge.createdAt),value:new Date(t.created_at).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}]:[],...Zs(t,u,m,{isDeveloperMode:d,ecosystemDebugShowAppUrlsInSettings:h})],[t,u,m,d,h]);return e.jsxs(e.Fragment,{children:[e.jsx(Gn,{connector:t,badge:e.jsx(Ps,{connector:t}),onBackClick:s,details:x,onConnectClick:n,isConnecting:a,isDisconnecting:o,isDeleting:i,onDelete:l,reportEntity:{id:t.id,entityType:ba.Connector},onEditDescription:r,onEditLogo:c}),e.jsx(Wr,{connector:t})]})},qr=({onBackClick:t,onDisconnectClick:s,fileUploadConfig:n,onConnectClick:a,connector:o})=>{const i=A(),l=wn(n.type,i),{description:r,Icon:c}=dp[n.type],m=Wt(),u=ee(),d=u&&oe(u,"4026425501"),f=o?Zs(o,["fileUploads"],i,{isDeveloperMode:m,ecosystemDebugShowAppUrlsInSettings:d}):[{title:i.formatMessage(fn.worksWith),value:Js("fileUploads",i)}];return e.jsx(Hr,{icon:e.jsx("span",{className:"border-token-border-default bg-token-bg-primary shadow-xxs max-h-fit rounded-2xl border-[0.5px] bg-clip-padding p-2",children:e.jsx(c,{className:"h-10 w-10"})}),name:l,description:i.formatMessage(r),onBackClick:t,details:f,onDisconnectClick:s,onConnectClick:a})},fn=te({worksWith:{id:"g1eGWJ",defaultMessage:"Works with"},o365Desc:{id:"connectorSettings.o365Desc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint and other files."},o365BusinessDesc:{id:"connectorSettings.o365BusinessDesc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint, and other files, including those from SharePoint sites."},gdriveDesc:{id:"HIdrop",defaultMessage:"Search and reference files from your Drive."}}),dp={[ke.O365_PERSONAL]:{description:fn.o365Desc,Icon:Us},[ke.O365_BUSINESS]:{description:fn.o365BusinessDesc,Icon:Us},[ke.GDRIVE]:{description:fn.gdriveDesc,Icon:Tn}},up=t=>new Promise((s,n)=>{const a=new FileReader;a.onloadend=()=>s(a.result),a.onerror=n,a.readAsDataURL(t)}),Ga=({children:t})=>e.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary my-0.5 inline-block rounded-md px-1.5 py-0.5 text-xs",children:t}),gp=({internalKnowledgeConfig:t})=>{const s=A();return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ga,{children:s.formatMessage(Te.sync)}),e.jsx(qs,{connection:t,location:"user_settings"})]})},Yr=(t,s)=>{const n=me(),{refetch:a}=kn();return async()=>{try{await re.safeDelete("/connectors/user_setting/{connector_name}",{parameters:{path:{connector_name:t}}}),s==null||s()}catch(o){n.danger(Te.disconnectError,{error:o})}finally{a()}}},mp=()=>{const t=me(),{refetch:s}=Dn();return async n=>{try{await pn.user_disconnect(n)}catch(a){t.danger(Te.disconnectError,{error:a})}finally{s()}}},fp=({connector:t,links:s,removeConnectorId:n,onLinkClick:a,onAddClick:o,additionalLinks:i})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-header-height flex items-center justify-between",children:[e.jsx(F,{color:"ghost",onClick:n,icon:Ta,children:e.jsx(g,p({},Te.backButton))}),o&&e.jsx(F,{color:"secondary",onClick:o,children:e.jsx(g,p({},Te.addButton))})]}),e.jsxs("div",{className:"pt-2",children:[s.map(l=>e.jsx(pp,{link:l,onLinkClick:a,connector:t},l.id)),i]})]}),pp=({link:t,onLinkClick:s,connector:n})=>{var m,u,d,f;const a=A(),o=Ue(),i=o==null?void 0:o.isPersonalAccount(),r=!!(Ht()&&i),c=y.useMemo(()=>{if(n.id!==gt)return;const h=[];return r&&h.push("chat"),h.push("deepResearch"),e.jsx(Ga,{children:Js(h,a)})},[n.id,a,r]);return e.jsx(Q,{children:e.jsx("button",{className:"w-full",onClick:()=>s(t.id),children:e.jsx("div",{className:"px-3 pt-3 pb-1",children:e.jsx(_t,{icon:e.jsx(hn,{connector:n}),title:(f=(d=(m=t.owner_profile)==null?void 0:m.email)!=null?d:(u=t.owner_profile)==null?void 0:u.name)!=null?f:t.name,description:c,statusIndicator:e.jsx(zs,{className:"icon"})})})})},t.id)},hp=({connector:t,platformLink:s})=>{var N,P,T;const n=A(),a=Ue(),o=Ht(),i=ts(),l=_i(),r=Xs(t),c=Wt(),m=lc(),{refetch:u}=es({skip:!0}),{mutateAsync:d}=ms(),f=me(),[h,x]=y.useState(!1),[b,M]=y.useState(!1),{internalKnowledgeConfigs:v}=Ys(),j=()=>{l(s.id,()=>{f.success(n.formatMessage(Te.disconnectSuccess,{connector:gs(t.name,n)})),i(),u()},Ne.CONNECTOR_SETTING)},S=y.useMemo(()=>!(v!=null&&v.length)||!(s!=null&&s.id)?null:v.find(k=>(s==null?void 0:s.id)===k.user_connection_details.backing_link_id),[v,s==null?void 0:s.id]),C=async()=>{await m(s.id)},w=ee(),E=w&&oe(w,"4026425501"),_=y.useMemo(()=>s?[{title:n.formatMessage(Te.connectedOn),value:new Date(s.created_at).toLocaleString([],{year:"numeric",month:"short",day:"numeric"})},...Zs(t,r,n,{isDeveloperMode:c,linkAuthType:s.auth_type,ecosystemDebugShowAppUrlsInSettings:E})]:[],[s,n,t,r,c,E]),D=y.useMemo(()=>{if(!S)return;const k=S.user_connection_details.knowledge_connector_type;if(k)return k==="slack"?"synced_channel":"synced_object"},[S]);return e.jsxs(e.Fragment,{children:[e.jsx(Gn,{badge:S?e.jsx(qs,{connection:S,location:"user_settings"}):void 0,connector:t,onBackClick:()=>i(),details:_,reportEntity:{id:t.id,entityType:ba.Connector},onBlockItems:S&&o?()=>x(!0):void 0,onDisconnectClick:j,onDeleteSyncClick:S?()=>M(!0):void 0,onEnableSyncClick:S||!o?void 0:()=>{se.logEventWithStatsig("Connectors - Upgrade Personal Google Drive","chatgpt_connectors_upgrade_personal_google_drive_clicked"),d({link:s})}}),e.jsx(Kr,{connector:t,onDisableSync:C,isOpen:b,onClose:()=>M(!1)}),D&&e.jsx(Qg,{accountId:(N=a==null?void 0:a.id)!=null?N:"",connectionId:(T=(P=S==null?void 0:S.user_connection_details)==null?void 0:P.connection_instance_id)!=null?T:"",isOpen:h,objectType:D,onClose:()=>x(!1)})]})},xp=({onAddClick:t})=>{const s=A(),n=Ue(),a=Ht(),o=!!(n!=null&&n.isPersonalAccount()&&a),i=me(),l=An(!0,Ne.CONNECTOR_SETTING),r=Mt({fetchValidLinksOnly:!0,productSku:Ne.CONNECTOR_SETTING}),c=l.platformConnectors.get(gt),m=y.useMemo(()=>{var N;return(N=r.connectorLinks.get(gt))!=null?N:[]},[r.connectorLinks]),u=ts(),d=_i(),f=mp(),h=Yr(ke.GDRIVE),{internalKnowledgeConfigs:x,fileUploadConfig:b,isLoading:M}=Ys(),v=y.useMemo(()=>{var N;return(N=x==null?void 0:x.filter(P=>P.user_connection_details.auth_status!=="not_connected"))!=null?N:[]},[x]),[j,S]=y.useState(null),C=(b!=null&&b.access_token?1:0)+(n!=null&&n.isPersonalAccount()?0:v.length)+m.length,[w]=y.useState(C),E=y.useMemo(()=>!!x&&!o&&x.length-v.length>0||m.length===0,[x,o,v.length,m.length]),_=y.useMemo(()=>w>1?j:b!=null&&b.access_token?{type:"file_uploads"}:n!=null&&n.isPersonalAccount()&&m.length>0?{type:"upgradable_platform_connector",link:m[0]}:v.length>0?{type:"internal_knowledge",config:v[0]}:m.length>0?{type:"platform_connector",link:m[0]}:null,[w,b==null?void 0:b.access_token,n,m,v,j]);if(l.isFetching||r.isLoading||M)return e.jsx("div",{className:"flex justify-center",children:e.jsx(Ge,{})});if(l.error||r.error||!c)return u(),null;if(C===0)return e.jsx(Vr,{connector:c,onBackClick:()=>u(),onConnectClick:t});if(!_){const N=P=>{const T=m.find(k=>k.id===P);T&&(n!=null&&n.isPersonalAccount()?S({type:"upgradable_platform_connector",link:T}):S({type:"platform_connector",link:T}))};return e.jsx(fp,{connector:c,links:m,removeConnectorId:()=>u(),onLinkClick:N,onAddClick:E?t:void 0,additionalLinks:e.jsxs(e.Fragment,{children:[!(n!=null&&n.isPersonalAccount())&&v.map(P=>e.jsx(Q,{children:e.jsx("button",{className:"w-full",onClick:()=>S({type:"internal_knowledge",config:P}),children:e.jsx("div",{className:"px-3 pt-3 pb-1",children:e.jsx(_t,{icon:e.jsx(hn,{connector:c}),title:P.connection_display_info.display_name,description:e.jsx(gp,{internalKnowledgeConfig:P}),statusIndicator:e.jsx(zs,{className:"icon"})})})})},P.user_connection_details.connection_instance_id)),!!(b!=null&&b.access_token)&&e.jsx(Q,{children:e.jsx("button",{className:"w-full",onClick:()=>S({type:"file_uploads"}),children:e.jsx("div",{className:"px-3 pt-3 pb-1",children:e.jsx(_t,{icon:e.jsx(hn,{connector:c}),title:b.name,description:e.jsx(Ga,{children:s.formatMessage(Te.fileUploads)}),statusIndicator:e.jsx(zs,{className:"icon"})})})})})]})})}const D=()=>{j?S(null):u()};switch(_.type){case"platform_connector":{const N=()=>{d(_.link.id,()=>{i.success(s.formatMessage(Te.disconnectSuccess,{connector:gs(c.name,s)})),S(null)},Ne.CONNECTOR_SETTING)};return e.jsx(zr,{connector:c,onBackClick:D,link:_.link,onDisconnectClick:N,onConnectClick:E?t:void 0})}case"upgradable_platform_connector":return e.jsx(hp,{connector:c,platformLink:_.link});case"internal_knowledge":{const N=async()=>{await f(_.config.user_connection_details.connection_instance_id),S(null)};return e.jsx(cp,{connector:c,onBackClick:D,onDisconnectClick:N,internalKnowledgeConfig:_.config,onConnectClick:E?t:void 0})}case"file_uploads":{if(!b)return null;const N=async()=>{await h(),S(null)};return e.jsx(qr,{onBackClick:D,onDisconnectClick:N,fileUploadConfig:b,connector:c,onConnectClick:E?t:void 0})}}},Do=({type:t})=>{const{personalConfig:s,businessConfig:n,isLoading:a}=wi(),o=t===ke.O365_PERSONAL?s:n,i=ts(),l=Yr(t,()=>{i()});return a?e.jsx("div",{className:"flex justify-center",children:e.jsx(Ge,{})}):o?e.jsx(qr,{onBackClick:()=>i(),onDisconnectClick:l,fileUploadConfig:o}):(i(),null)},bp=({connectorId:t,onAddLinkClick:s})=>{var Le,Qe,$e;const n=A(),a=me(),o=An(!0,Ne.CONNECTOR_SETTING),i=Mt({fetchValidLinksOnly:!0,productSku:Ne.CONNECTOR_SETTING}),l=ee(),r=o.platformConnectors.get(t),c=i.connectorLinks.get(t),m=c&&c.length>0,u=!!r&&r.connector_type==="MCP",d=ts(),f=ci(),h=Ue(),x=y.useMemo(()=>!!(r!=null&&r.owners.some(W=>W.type==="USER"&&W.id===(h==null?void 0:h.normalizedAccountUserId))||(h!=null&&h.isAdminOfAccount()||h!=null&&h.isOwnerOfAccount())&&(r!=null&&r.owners.some(W=>W.type==="WORKSPACE"&&W.id===h.getWorkspaceId()))),[r,h]),b=u&&x,v=!!(oe(l,"3870713715")&&u&&x),[j,S]=y.useState(!1),[C,w]=y.useState(""),[E,_]=y.useState(""),[D,N]=y.useState(!1),[P,T]=y.useState(null),[k,O]=y.useState(null),R=y.useRef(null);y.useEffect(()=>{var W,z;if(!r){w(""),_("");return}if(!j){const de=r;w((W=r.description)!=null?W:""),_((z=de.model_description)!=null?z:"")}},[r,j]),y.useEffect(()=>()=>{k&&URL.revokeObjectURL(k)},[k]);const H=()=>{k&&URL.revokeObjectURL(k),O(null),T(null)},V=()=>{H(),N(!0)},$=()=>{H(),N(!1)},q=W=>{if(W.size>$g){a.danger(Te.logoTooLarge);return}k&&URL.revokeObjectURL(k),T(W),O(URL.createObjectURL(W))},G=W=>{var de;const z=(de=W.target.files)==null?void 0:de[0];z&&q(z),R.current&&(R.current.value="")},B=o.isLoading||i.isLoading,Y=_e({mutationFn:async()=>{if(!r)throw new Error("Connector not found");s()},onError:W=>{a.danger(Te.connectError,{error:W})}}),X=_e({mutationFn:async()=>{await f(t,()=>{a.success(r?n.formatMessage(Te.disconnectSuccess,{connector:gs(r.name,n)}):n.formatMessage(Te.disconnectGenericSuccess))},Ne.CONNECTOR_SETTING)}}),Z=_e({mutationFn:async W=>{await sc(W),await i.refetch(),await o.refetch()},onError:W=>{a.danger(Te.refreshActionsError,{error:W})}}),pe=_e({mutationFn:async()=>{await nc(t),await Promise.all([o.refetch(),i.refetch()])},onError:W=>{a.danger(Te.deleteError,{error:W})},onSuccess:()=>{d()}}),ce=Ee(),le=_e({mutationFn:async({connectorId:W,description:z,modelDescription:de,updateDescription:De,updateModelDescription:Ie})=>{const We=[];De&&We.push(ac(W,z)),Ie&&We.push(oc(W,de)),We.length!==0&&await Promise.all(We)},onSuccess:async()=>{await o.refetch(),a.success(n.formatMessage(Te.updateDescriptionSuccess)),S(!1)},onError:W=>{a.danger(Te.updateDescriptionError,{error:W})}}),ae=_e({mutationFn:async({logoData:W})=>{if(!r)throw new Error("Connector not found");await ic(r.id,W),await Promise.all([o.refetch(),i.refetch()])},onSuccess:()=>{a.success(n.formatMessage(Te.updateLogoSuccess)),$()},onError:W=>{a.danger(Te.updateLogoError,{error:W})}}),ie=async()=>{if(!(!P||ae.isPending))try{const W=await up(P);await ae.mutateAsync({logoData:W})}catch(W){a.danger(Te.updateLogoError,{error:W})}},ue=_e({mutationFn:async({linkId:W,action:z,enabled:de})=>{ce.setQueryData(oo(h==null?void 0:h.normalizedAccountUserId,!0),Re=>io(Re,qe=>{var He;const be=(He=qe[t])==null?void 0:He.find(Ze=>Ze.id===W);if(de)be!=null&&be.actions.includes(z)||be==null||be.actions.push(z);else{const Ze=be==null?void 0:be.actions.indexOf(z);Ze!==void 0&&Ze!==-1&&(be==null||be.actions.splice(Ze,1))}}));const De=c==null?void 0:c.find(Re=>Re.id===W);if(!De)return;const Ie=de?[...De.actions,z]:De.actions.filter(Re=>Re!==z),We=await rc(W,Ie);ce.setQueryData(oo(h==null?void 0:h.normalizedAccountUserId,!0),Re=>io(Re,qe=>{const be=qe[t],He=be==null?void 0:be.findIndex(Ze=>Ze.id===W);He!==void 0&&He!==-1&&(be[He]=We.link)}))},onError:W=>{a.danger(Te.toggleActionError,{error:W})}});C.trim(),E.trim(),((Le=r==null?void 0:r.description)!=null?Le:"").trim(),((Qe=r==null?void 0:r.model_description)!=null?Qe:"").trim(),le.isPending;const U=()=>{var W,z;if(r){const de=r;w((W=r.description)!=null?W:""),_((z=de.model_description)!=null?z:"")}S(!0)},J=($e=k!=null?k:r==null?void 0:r.logo_url)!=null?$e:void 0,Oe=v&&r?e.jsx(je,{isOpen:D,onClose:$,showCloseButton:!0,type:"success",className:"max-w-[360px]",testId:"modal-update-connector-logo",title:e.jsx(g,p({},Te.editLogoModalTitle)),children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"border-token-border-default bg-token-bg-primary flex h-20 w-20 items-center justify-center overflow-hidden rounded-2xl border p-2",children:J?e.jsx("img",{src:J,alt:n.formatMessage(Te.logoPreviewAlt),className:"h-full w-full object-cover"}):e.jsx(fs,{connector:r,size:"large",className:"h-full w-full"})}),e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx(g,p({},Te.editLogoModalDescription)),e.jsxs("div",{children:[e.jsx("input",{ref:R,type:"file",accept:"image/*",className:"hidden",onChange:G,disabled:ae.isPending}),e.jsx(F,{color:"secondary",size:"small",onClick:()=>{var W;return(W=R.current)==null?void 0:W.click()},disabled:ae.isPending,children:e.jsx(g,p({},Te.logoUploadCta))})]}),P&&e.jsx("span",{className:"text-token-text-secondary text-xs",children:P.name})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(F,{color:"ghost",onClick:$,disabled:ae.isPending,children:e.jsx(g,p({},Ws.cancelButtonText))}),e.jsx(F,{onClick:ie,loading:ae.isPending,disabled:!P||ae.isPending,children:e.jsx(g,p({},Te.saveLogo))})]})]})}):null;if(B)return e.jsx("div",{className:"flex justify-center p-10",children:e.jsx(Ge,{})});if(o.error||i.error||!r)return d(),null;const Ae=e.jsx(e.Fragment,{});return m?e.jsxs(e.Fragment,{children:[e.jsx(zr,{connector:r,onBackClick:()=>d(),link:c[0],onDisconnectClick:()=>X.mutate(),isDisconnecting:X.isPending,isDeleting:pe.isPending,onDelete:b?()=>pe.mutate():void 0,onRefreshActions:c.length>0&&x?()=>Z.mutate(c[0].id):void 0,isRefreshingActions:Z.isPending,onToggleAction:(W,z)=>ue.mutate({linkId:c[0].id,action:W,enabled:z}),isTogglingAction:ue.isPending,onEditDescription:x?U:void 0,onEditLogo:v?V:void 0}),Ae,Oe]}):e.jsxs(e.Fragment,{children:[e.jsx(Vr,{connector:r,onBackClick:()=>d(),onConnectClick:()=>Y.mutate(),isConnecting:Y.isPending,isDisconnecting:X.isPending,isDeleting:pe.isPending,onDelete:b?()=>pe.mutate():void 0,onEditDescription:x?U:void 0,onEditLogo:v?V:void 0}),Ae,Oe]})},yp=({connectorId:t,onAddClick:s})=>t===gt?e.jsx(xp,{onAddClick:s}):t==="onedrive-personal"?e.jsx(Do,{type:ke.O365_PERSONAL}):t==="onedrive-business"?e.jsx(Do,{type:ke.O365_BUSINESS}):e.jsx(bp,{connectorId:t,onAddLinkClick:s}),Te=te({backButton:{id:"2XH9oW",defaultMessage:"Back"},addButton:{id:"lkrz+6",defaultMessage:"Add"},connectedOn:{id:"b1ykGv",defaultMessage:"Connected on"},sync:{id:"W4yI4C",defaultMessage:"Chat"},disableSync:{id:"LM6oW1",defaultMessage:"Disable sync"},fileUploads:{id:"gFheug",defaultMessage:"File uploads"},deepResearch:{id:"EnDZig",defaultMessage:"Deep Research"},connectError:{id:"9/ATb1",defaultMessage:"Error connecting your account."},refreshActionsError:{id:"j+WGY0",defaultMessage:"Error refreshing actions."},disconnectError:{id:"DqZbNO",defaultMessage:"Error disconnecting your account."},disconnectSuccess:{id:"CoyFU4",defaultMessage:"{connector} disconnected"},disconnectGenericSuccess:{id:"Yh+piF",defaultMessage:"Connector disconnected"},deleteError:{id:"ZeAn4n",defaultMessage:"Error deleting your connector."},toggleActionError:{id:"DofG17",defaultMessage:"Error toggling action."},mcpServerConformError:{id:"igeVCu",defaultMessage:"This MCP server can't be used by ChatGPT to search information because it doesn't implement <link>our specification</link>."},mcpServerConformErrorWithReason:{id:"g1U6+s",defaultMessage:"This MCP server can't be used by ChatGPT to search information because it doesn't implement <link>our specification</link>: {reason}"},editDescription:{id:"8KkNYS",defaultMessage:"Edit connector descriptions"},saveDescription:{id:"b728ms",defaultMessage:"Save"},descriptionFieldLabel:{id:"G4TQb4",defaultMessage:"Connector description"},descriptionPlaceholder:{id:"UDk3bR",defaultMessage:"Describe what this connector does for your team"},modelDescriptionFieldLabel:{id:"5YP4M7",defaultMessage:"Model description"},updateDescriptionSuccess:{id:"s/uJtK",defaultMessage:"Connector details updated"},updateDescriptionError:{id:"/zjnPq",defaultMessage:"Couldn't update connector details"},logoTooLarge:{id:"ODYRAU",defaultMessage:"Logo must be smaller than 4 MB."},editLogoModalTitle:{id:"6wYY0P",defaultMessage:"Update connector logo"},editLogoModalDescription:{id:"pW+wbf",defaultMessage:"Upload a square image to represent this connector."},logoUploadCta:{id:"msWUua",defaultMessage:"Choose image"},logoUploadHelper:{id:"E6kCgP",defaultMessage:"Supported formats: PNG or JPG up to 4 MB."},logoPreviewAlt:{id:"w8X79n",defaultMessage:"Selected connector logo preview"},saveLogo:{id:"RQ6oQW",defaultMessage:"Save"},updateLogoSuccess:{id:"rZgTds",defaultMessage:"Logo updated"},updateLogoError:{id:"ywBEC5",defaultMessage:"Couldn't update connector logo"}}),Mp=({connector:t})=>{const s=A(),n=ts(),a=t.status==="DISABLED_BY_ADMIN";return e.jsx(ct,{label:a?s.formatMessage(cc.disabledByAdmin):void 0,triggerAs:"div",children:e.jsxs(F,{color:"secondary",className:"disabled:hover:bg-token-bg-primary border-token-border-default hover:bg-token-interactive-bg-secondary-hover w-full rounded-[10px] border p-3 pb-[10px] disabled:opacity-25",contentWrapperClassName:"flex-col gap-2 truncate items-start flex-1",onClick:()=>n(t.id),disabled:a,children:[e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx(hn,{connector:t}),e.jsx(Ps,{connector:t})]}),e.jsx("span",{className:"max-w-full truncate text-sm font-normal",children:gs(t.name,s)})]})})},Oo=({connectors:t})=>{const s=y.useMemo(()=>[...t].sort((n,a)=>{const o=(a.status!=="DISABLED_BY_ADMIN"?1:0)-(n.status!=="DISABLED_BY_ADMIN"?1:0),i=a.owners.length-n.owners.length,l=n.name.localeCompare(a.name);return 100*o+10*i+l}),[t]);return e.jsx("div",{className:"my-2 grid grid-cols-2 gap-2 sm:grid-cols-3",children:s.map(n=>e.jsx(Mp,{connector:n},n.id))})},Qr=({onClick:t,children:s,disabled:n})=>e.jsx("button",{className:"border-token-border-light items-center border-b px-0.5 py-3 last-of-type:border-none",onClick:t,disabled:n,children:s}),Un=({connector:t,trailingButton:s,description:n,disabled:a})=>{const o=A(),i=Xs(t),l=ts(),r=gc(),c=["MCP","OPEN_API"].includes(t.connector_type)&&t.conformance.implements_retrievable===!1&&!r&&!t.supports_full_actions?e.jsx(g,p({},vp.mcpServerConformError)):n!=null?n:Js(i,o);return e.jsx(Qr,{onClick:()=>l(t.id),disabled:a,children:e.jsx(_t,{icon:e.jsx(fs,{connector:t,size:"small",className:"border-token-border-default bg-token-bg-primary shadow-xxs h-fit rounded-[10px] border-[0.5px] p-2"}),title:gs(t.name,o),badge:e.jsx(Ps,{connector:t}),description:c,statusIndicator:e.jsxs("div",{className:"flex flex-shrink-0 items-center gap-4",children:[s,e.jsx(zs,{className:"icon"})]})})})},Cp=({connectorLinks:t,platformConnectors:s,gdriveRow:n,onedrivePersonalRow:a,onedriveBusinessRow:o,githubRow:i,genericSyncableRows:l})=>{const r=A(),c=y.useMemo(()=>[...Array.from(t.keys()).map(d=>s.find(f=>f.id===d)).filter(d=>!!d).map(d=>({type:"platform_connector",name:d.name,connector:d})),...a?[{type:"onedrive_personal",name:r.formatMessage(dc)}]:[],...o?[{type:"onedrive_business",name:r.formatMessage(uc)}]:[],...n?[{type:"gdrive",name:"Google Drive"}]:[],...i?[{type:"github",name:"GitHub"}]:[],...(l!=null?l:[]).map(d=>p({type:"syncable_platform_connector",name:d.connector.name},d))].sort((d,f)=>d.name.localeCompare(f.name)),[t,a,r,o,n,i,l,s]);return e.jsx("div",{className:"flex flex-col",children:c.map(m=>m.type==="platform_connector"?e.jsx(Un,{connector:m.connector},m.connector.id):m.type==="onedrive_personal"?e.jsx(Rt.Fragment,{children:a},m.type):m.type==="onedrive_business"?e.jsx(Rt.Fragment,{children:o},m.type):m.type==="gdrive"?e.jsx(Rt.Fragment,{children:n},m.type):m.type==="github"?e.jsx(Rt.Fragment,{children:i},m.type):m.type==="syncable_platform_connector"?e.jsx(Rt.Fragment,{children:m.row},m.connector.id):void 0)})},vp=te({mcpServerConformError:{id:"4ifdVv",defaultMessage:"Can't be used for search"}}),Sp=()=>{const t=pc(),{hasWorkspacePermission:s,isLoading:n}=hc(bc.CreateMcpConnector,xc());return t?{canCreate:s,isLoading:n}:{canCreate:!0,isLoading:!1}},jp=()=>{"use forget";const t=ot.c(10),s=ee(),n=Ue(),a=Wt(),{canCreate:o,isLoading:i}=Sp();let l;e:{if(!n){let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={shouldRenderButton:!1,isDisabledByAdmin:!1},t[0]=d):d=t[0],l=d;break e}if(n.isTeam()&&n.isStandardUserOfAccount()){let d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d={shouldRenderButton:!1,isDisabledByAdmin:!1},t[1]=d):d=t[1],l=d;break e}if(oe(s,"3927245414")){if(!a){let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h={shouldRenderButton:!1,isDisabledByAdmin:!1},t[2]=h):h=t[2],l=h;break e}const d=n.isWorkspaceAccount()?!o:!1;let f;t[3]!==d?(f={shouldRenderButton:!0,isDisabledByAdmin:d},t[3]=d,t[4]=f):f=t[4],l=f;break e}if(!oe(s,"3828441000")&&!a){let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d={shouldRenderButton:!1,isDisabledByAdmin:!1},t[5]=d):d=t[5],l=d;break e}if(!n.isWorkspaceAccount()){let d;t[6]===Symbol.for("react.memo_cache_sentinel")?(d={shouldRenderButton:!0,isDisabledByAdmin:!1},t[6]=d):d=t[6],l=d;break e}if(i){let d;t[7]===Symbol.for("react.memo_cache_sentinel")?(d={shouldRenderButton:!1,isDisabledByAdmin:!1},t[7]=d):d=t[7],l=d;break e}const m=!o;let u;t[8]!==m?(u={shouldRenderButton:!0,isDisabledByAdmin:m},t[8]=m,t[9]=u):u=t[9],l=u}return l},la=({disabled:t,message:s,onAddClick:n,tooltip:a,side:o="right"})=>{const i=e.jsx(F,{color:"secondary",disabled:t,onClick:l=>{l.preventDefault(),n()},size:"small",children:e.jsx(g,p({},s))});return a?e.jsx(ct,{label:e.jsx("div",{className:"max-w-50",children:a}),side:o,children:i}):i},hs=({disabled:t,loading:s,onClick:n,tooltip:a})=>{if(s)return e.jsx(yc,{sizeOverride:18,percentage:0});const o=e.jsx(F,{color:"secondary",disabled:t,onClick:i=>{i.preventDefault(),i.stopPropagation(),n==null||n(i)},size:"small",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Da,{className:"icon-xs text-[#007AFF]"}),e.jsx(g,p({},Ce.syncForBetterAnswers))]})});return a?e.jsx(ct,{label:e.jsx("div",{className:"max-w-50",children:a}),side:"right",children:o}):o},_p=({gdrivePlatformConnector:t,isFileUploadsEnabled:s,numPlatformLinks:n,platformLinks:a,numInternalKnowledgeLinks:o,numInternalKnowledgeConfigs:i,onAddClick:l})=>{const r=A(),c=Ue(),m=c==null?void 0:c.isPersonalAccount(),u=c==null?void 0:c.isWorkspaceAccount(),d=Ht(),f=!!u||d&&!!m,h=zi({filters:{mutationKey:["upgradeConnectorToSync"]},select:T=>T.state}),{mutateAsync:x}=ms(),{internalKnowledgeEnabled:b,internalKnowledgeConfigs:M,isLoading:v}=Ys(),{refetch:j}=es({skip:!0}),S=i-o,C=y.useMemo(()=>{var T;return f?(T=a.get(gt))==null?void 0:T.find(k=>k.connector_id===t.id):null},[a,t.id,f]),w=y.useMemo(()=>!(M!=null&&M.length)||!(C!=null&&C.id)||!f?null:M.find(T=>(C==null?void 0:C.id)===T.user_connection_details.backing_link_id),[M,C==null?void 0:C.id,f]),E=h.some(T=>{var k,O;return T.status==="success"&&((O=(k=T.variables)==null?void 0:k.link)==null?void 0:O.id)===(C==null?void 0:C.id)&&!w}),_=h.some(T=>{var k,O;return T.status==="pending"&&((O=(k=T.variables)==null?void 0:k.link)==null?void 0:O.id)===(C==null?void 0:C.id)});y.useEffect(()=>{E&&setTimeout(()=>{j()},1e3)},[E,j]);const D=y.useMemo(()=>{const T=t.status!=="DISABLED_BY_ADMIN",k=n>0;if(c!=null&&c.isPersonalAccount()){if(C&&!w&&f){const O=()=>{se.logEventWithStatsig("Connectors - Upgrade Personal Google Drive","chatgpt_connectors_upgrade_personal_google_drive_clicked"),x({link:C})};return e.jsx(hs,{onClick:O,loading:_||v||E,tooltip:r.formatMessage(Ce.syncForBetterAnswersTooltip)})}return C&&w?e.jsx(qs,{connection:w,location:"user_settings"}):s&&!C?e.jsx(F,{size:"small",color:"secondary",onClick:l,children:e.jsx(g,p({},Ce.addChatAndOrDeepResearch))}):null}if(k){if(S>0&&o===0){if(C&&f){const O=()=>{se.logEventWithStatsig("Connectors - Upgrade Workspace Google Drive","chatgpt_contextual_answers_user_upgrade_to_sync_initiated"),x({link:C})};return e.jsx(hs,{onClick:O,loading:_||v||E,tooltip:r.formatMessage(Ce.syncForBetterAnswersTooltip)})}return e.jsx(hs,{onClick:l,tooltip:r.formatMessage(Ce.syncForBetterAnswersTooltip)})}if(b&&i===0)return e.jsx(hs,{disabled:!0,onClick:l,tooltip:r.formatMessage(Ce.contactAdminTooltip)})}else{if(s&&(o>0||S===0))return e.jsx(la,{disabled:!T,message:Ce.addDeepResearch,onAddClick:l,tooltip:T?void 0:r.formatMessage(Ce.deepResearchDisabledByAdmin)});if(T&&s&&o===0)return e.jsx(la,{message:Ce.addChatAndOrDeepResearch,onAddClick:l});if(s&&!T&&o===0&&S>0)return e.jsx(hs,{onClick:l,tooltip:r.formatMessage(Ce.syncForBetterAnswersTooltip)})}return null},[t.status,n,f,C,w,l,_,v,E,r,x,S,o,b,i,c,s]),N=Xs(t),P=y.useMemo(()=>{const T=[...N];return s&&T.push("fileUploads"),Js(T,r)},[N,s,r]);return e.jsx(Un,{connector:t,description:P,trailingButton:D})},Lo=({config:t,onClick:s})=>{const n=A();return e.jsx(Qr,{onClick:s,children:e.jsx(_t,{icon:e.jsx("span",{className:"border-token-border-default bg-token-bg-primary shadow-xxs h-fit rounded-[10px] border-[0.5px] p-2",children:e.jsx(Us,{className:"icon-lg"})}),title:wn(t.type,n),statusIndicator:e.jsx(zs,{className:"icon"})})})},wp=({githubLink:t,githubPlatformConnector:s})=>{var l;const n=A(),{data:a,isLoading:o}=nr({linkId:(l=t==null?void 0:t.id)!=null?l:""}),i=!a;return e.jsx(Un,{connector:s,disabled:o,description:i?n.formatMessage(Ce.setupIncompleteGithub):void 0})},Np=({link:t,connector:s,syncConnectorId:n,refetchLinks:a})=>{var C,w;const o=A(),i=me(),l=pa(),r=Ts(),{data:c,refetch:m}=Dn(),{refetch:u}=es({skip:!0}),d=r?c==null?void 0:c.connection_statuses.find(E=>E.user_connection_details.backing_link_id===t.id):void 0,f=zi({filters:{mutationKey:["upgradeConnectorToSync"]},select:E=>E.state});let h="no-sync";if(d)h="upgraded-to-sync";else for(const E of f)if(((w=(C=E.variables)==null?void 0:C.link)==null?void 0:w.id)===(t==null?void 0:t.id))if(E.status==="success"&&!d){h="upgrade-succeeded-updating-status";break}else E.status==="pending"&&(h="upgrade-pending");y.useEffect(()=>{h==="upgrade-succeeded-updating-status"&&setTimeout(()=>{m()},1e3)},[h,m]);const{mutateAsync:x}=ms(),[b,M]=y.useState(!1),v=!!n,j=async()=>{var E,_;if(n)try{M(!0),As("popup");const D=await Es({connector:s,redirectAfter:Nn,openPopup:l,intl:o,toaster:i,productSku:Ne.CONNECTOR_SETTING,connectorIdOverride:n}),N=n!=null?n:s.id,P=await a(),T=new Map(Object.entries((E=P.data)!=null?E:{})),k=D&&typeof D=="object"?D.linkId:void 0,O=(_=T.get(N))==null?void 0:_[0];let R=null;typeof k=="string"?R={id:k,name:s.name,connector_id:N}:O&&typeof O.id=="string"&&(R={id:O.id,name:s.name,connector_id:N}),R&&(await x({link:R,isConnectingAndUpgrading:!0}),await u()),i.success(o.formatMessage(Ce.syncConnectorSuccess,{connector:s.name}))}catch(D){const N=D instanceof Error?D.message:void 0;i.danger(N!=null?N:o.formatMessage(Ce.syncConnectorError,{connector:s.name}),{toastId:"connector_oauth_connect"})}finally{M(!1)}},S=d?e.jsx(qs,{connection:d,location:"user_settings"}):e.jsx(hs,{onClick:()=>{if(v){j();return}x({link:t})},loading:b||h==="upgrade-succeeded-updating-status"||h==="upgrade-pending",tooltip:o.formatMessage(Ce.syncFilesForBetterAnswersTooltip,{connector:s.name})});return e.jsx(Un,{connector:s,trailingButton:S})},Tp=({onCreateCustomConnectorClick:t,onAddClick:s})=>{"use forget";var Oe,Ae,Le,Qe,$e,W;const n=A(),a=Ts(),o=mc(),i=An(!0,Ne.CONNECTOR_SETTING),l=Mt({fetchValidLinksOnly:!0,productSku:Ne.CONNECTOR_SETTING}),r=ts(),c=Ue(),m=!(c!=null&&c.isPersonalAccount())&&(c==null?void 0:c.planType)!==Pe.SELF_SERVE_BUSINESS,{shouldRenderButton:u,isDisabledByAdmin:d}=jp(),f=y.useMemo(()=>Array.from(i.platformConnectors.values()).filter(z=>z.id===fc||z.id===ta?!1:z.connector_type==="MCP"||o.availableConnectors.some(de=>de.id===z.id)||z.id===gt&&a),[i.platformConnectors,o.availableConnectors,a]),h=f.some(z=>{var de;return(de=z.branding)==null?void 0:de.is_discoverable_app}),x=Ni(),{isLoading:b,isEnabled:M}=Ti(),v=m?M&&!b:!0,j=nt("linear"),S=nt("dropbox"),C=nt("box"),w=nt("notion"),E=nt("confluence"),_=nt("jira"),D=nt("jira_servicemanagement"),N=nt("intercom"),P=y.useMemo(()=>[{connectorId:ki,shouldRenderRow:x&&v},{connectorId:Ei,shouldRenderRow:j},{connectorId:Pi,shouldRenderRow:S},{connectorId:Ai,shouldRenderRow:C},{connectorId:Ve[I.CONFLUENCE_CONNECTOR],shouldRenderRow:E},{connectorId:Ve[I.JIRA_CONNECTOR],shouldRenderRow:_},{connectorId:Ve[I.JIRA_SERVICEMANAGEMENT_CONNECTOR],shouldRenderRow:D},{connectorId:Oi,shouldRenderRow:w,syncConnectorId:Di},{connectorId:Ii,shouldRenderRow:N,syncConnectorId:Li}],[v,j,x,S,C,w,E,_,D,N]),T=y.useMemo(()=>{var de,De;const z=[];for(const{connectorId:Ie,shouldRenderRow:We,syncConnectorId:Re}of P){if(!We)continue;const qe=i.platformConnectors.get(Ie),be=(de=l.connectorLinks.get(Ie))==null?void 0:de[0],He=Re?(De=l.connectorLinks.get(Re))==null?void 0:De[0]:void 0,Ze=be!=null?be:He;!qe||!Ze||He||z.push({connector:qe,row:e.jsx(Np,{link:Ze,connector:qe,syncConnectorId:Re,refetchLinks:l.refetch})})}return z},[i.platformConnectors,l.connectorLinks,l.refetch,P]),k=y.useMemo(()=>T.map(z=>z.connector.id),[T]),O=y.useMemo(()=>{const z=new Map(l.connectorLinks);return z.delete(gt),z.delete(zn),k.forEach(de=>{z.delete(de)}),z},[l.connectorLinks,k]),{fileUploadConfig:R,internalKnowledgeConfigs:H}=Ys(),V=wi(),$=y.useMemo(()=>{var z;return(z=H==null?void 0:H.filter(de=>de.user_connection_details.auth_status!=="not_connected").length)!=null?z:0},[H]),q=(Ae=(Oe=l.connectorLinks.get(gt))==null?void 0:Oe.length)!=null?Ae:0,G=!!(R!=null&&R.access_token)||q>0||$>0,B=!!((Le=V.personalConfig)!=null&&Le.access_token),Y=!!((Qe=V.businessConfig)!=null&&Qe.access_token),X=i.platformConnectors.get(gt),Z=($e=l.connectorLinks.get(zn))==null?void 0:$e[0],pe=i.platformConnectors.get(zn),ce=y.useMemo(()=>f.filter(z=>{if(Object.values(Kn).some(de=>de.access===z.id)){const de=Object.values(Kn).filter(De=>De.access===z.id);return!l.connectorLinks.has(de[0].access)&&!l.connectorLinks.has(de[0].sync)}else return Object.values(Kn).some(de=>de.sync===z.id)?!1:z.id===gt?!G:!l.connectorLinks.has(z.id)}),[f,l.connectorLinks,G]),[le,ae]=y.useMemo(()=>{const z=[],de=[];return ce.forEach(De=>{var Ie;(Ie=De.branding)!=null&&Ie.is_discoverable_app?z.push(De):de.push(De)}),[z,de]},[ce]);if(i.isLoading||o.isLoading||l.isLoading)return e.jsx(xe,{title:e.jsx(g,p({},Ce.connectorsTitle)),children:e.jsx("div",{className:"flex justify-center p-6",children:e.jsx(Ge,{})})});if(!o.enabled||!f.length)return e.jsx(xe,{title:e.jsx(g,p({},Ce.connectorsTitle)),children:e.jsx(_s,{type:"info",className:"mt-4",children:e.jsx(g,p({},Ce.noConnectorsAvailable))})});if(i.error||l.error)return e.jsx(xe,{title:e.jsx(g,p({},Ce.connectorsTitle)),children:e.jsx(_s,{type:"danger",children:e.jsx(g,p({},Ce.error))})});const ie=O.size>0||G||B||Y||!!Z||T.length>0;let ue;(z=>{z.INSTALLED="INSTALLED",z.UNLINKED_APPS="UNLINKED_APPS",z.UNLINKED_NON_APP_CONNECTORS="UNLINKED_NON_APP_CONNECTORS"})(ue||(ue={}));let U=null;u&&(ie?U="INSTALLED":le.length>0?U="UNLINKED_APPS":ae.length>0&&(U="UNLINKED_NON_APP_CONNECTORS"));const J=e.jsx(la,{disabled:d,message:Ce.createCustomConnectorButton,onAddClick:t,tooltip:d?n.formatMessage(Ce.createCustomConnectorDisabledByAdmin):void 0,side:"bottom"});return e.jsxs(e.Fragment,{children:[ie&&e.jsx(xe,{headerInteractable:U==="INSTALLED",title:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h?e.jsx(g,p({},Ce.enabledAppsAndConnectorsTitle)):e.jsx(g,p({},Ce.enabledConnectorsTitle)),U==="INSTALLED"&&J]}),description:e.jsx(g,p({},Ce.enabledConnectorsDescription)),children:e.jsx(Cp,{connectorLinks:O,platformConnectors:f,gdriveRow:G&&X?e.jsx(_p,{gdrivePlatformConnector:X,isFileUploadsEnabled:!!(R!=null&&R.access_token),numPlatformLinks:q,platformLinks:l.connectorLinks,numInternalKnowledgeLinks:$,numInternalKnowledgeConfigs:(W=H==null?void 0:H.length)!=null?W:0,onAddClick:()=>{r(gt),s()}}):null,onedrivePersonalRow:B&&V.personalConfig?e.jsx(Lo,{config:V.personalConfig,onClick:()=>r("onedrive-personal")}):null,onedriveBusinessRow:Y&&V.businessConfig?e.jsx(Lo,{config:V.businessConfig,onClick:()=>r("onedrive-business")}):null,githubRow:Z&&pe?e.jsx(wp,{githubLink:Z,githubPlatformConnector:pe}):null,genericSyncableRows:T})}),le.length>0&&e.jsx(xe,{noBorder:!0,headerInteractable:U==="UNLINKED_APPS",title:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[ie?e.jsx(g,p({},Ce.allAppsTitle)):e.jsx(g,p({},Ce.appsTitle)),U==="UNLINKED_APPS"&&J]}),description:e.jsx(g,ne(p({},Ce.appsDescription),{values:{link:z=>e.jsx(os,{href:"https://help.openai.com/en/articles/12503483-apps-in-chatgpt-and-the-apps-sdk",openNewTab:!0,children:z})}})),children:e.jsx(Oo,{connectors:le})}),ae.length>0&&e.jsx(xe,{noBorder:!0,headerInteractable:U==="UNLINKED_NON_APP_CONNECTORS",title:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[ie?e.jsx(g,p({},Ce.allConnectorsTitle)):e.jsx(g,p({},Ce.connectorsTitle)),U==="UNLINKED_NON_APP_CONNECTORS"&&J]}),description:e.jsx(g,ne(p({},Ce.connectorsDescription),{values:{link:z=>e.jsx(os,{href:"https://help.openai.com/en/collections/12923329-connected-apps",openNewTab:!0,children:z})}})),children:e.jsx(Oo,{connectors:ae})}),e.jsxs(xe,{children:[e.jsx("span",{id:"developer-mode-settings"}),e.jsx(kp,{})]})]})};function kp(){const t=tt(),s=Wt();return!bi()&&!s?null:e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"border-token-border-default mt-8"}),e.jsx(Q,{children:e.jsx(On,{label:e.jsx(g,p({},Ce.advancedSettings)),onClick:()=>t("#settings/Connectors/Advanced")})})]})}const Ce=te({deepResearchDisabledByAdmin:{id:"uYQCnH",defaultMessage:"Your admin has not enabled deep research for Google Drive."},appsTitle:{id:"0bv3My",defaultMessage:"Apps"},connectorsTitle:{id:"CRwNSN",defaultMessage:"Connectors"},appsDescription:{id:"cg5JvO",defaultMessage:"Connect apps so you can talk to them with visual and interactive experiences in ChatGPT. <link>Learn more</link>."},connectorsDescription:{id:"qKGquG",defaultMessage:"ChatGPT can access information from your connected tools to give you more useful answers. Your permissions are always respected. <link>Learn more</link>."},secureSigninTitle:{id:"wGZ2DC",defaultMessage:"Secure sign in with ChatGPT"},secureSigninDescription:{id:"5XRQKi",defaultMessage:"Sign in to websites and apps across the internet with the trusted security of ChatGPT. <link>Learn more</link>"},enabledAppsAndConnectorsTitle:{id:"CUe6tM",defaultMessage:"Enabled apps & connectors"},enabledConnectorsTitle:{id:"Ew4Xpl",defaultMessage:"Enabled connectors"},enabledConnectorsDescription:{id:"OEoK2K",defaultMessage:"The apps and connectors you’ve enabled appear here. ChatGPT can use them in your conversations, based on the permissions you’ve granted."},allAppsTitle:{id:"h1RBCc",defaultMessage:"Browse apps"},allConnectorsTitle:{id:"cL3AUC",defaultMessage:"Browse connectors"},contactAdminTooltip:{id:"q5N+up",defaultMessage:"Contact your admin to enable Google Drive for chat."},error:{id:"F+mY2E",defaultMessage:"Error fetching connectors"},createCustomConnectorButton:{id:"jeLjEI",defaultMessage:"Create"},createCustomConnectorDisabledByAdmin:{id:"createCustomConnectorDisabledByAdmin",defaultMessage:"Your admin has not enabled creating custom connectors."},syncForBetterAnswers:{id:"6wQ3rX",defaultMessage:"Enable sync"},syncForBetterAnswersTooltip:{id:"zhVkue",defaultMessage:"Sync Google Drive files to ChatGPT for faster, more relevant answers."},syncFilesForBetterAnswersTooltip:{id:"+u4cD2",defaultMessage:"Sync {connector} files to ChatGPT for faster, more relevant answers."},syncConnectorSuccess:{id:"oyKGlh",defaultMessage:"{connector} is now connected and syncing."},syncConnectorError:{id:"P7CgsH",defaultMessage:"Failed to connect and start syncing {connector}."},addChatAndOrDeepResearch:{id:"4/yhnQ",defaultMessage:"Add chat, deep research"},addDeepResearch:{id:"PT3yzw",defaultMessage:"Add deep research"},deepResearchDescription:{id:"1POyn5",defaultMessage:"Deep research"},fileUploadsDescription:{id:"mYsWe4",defaultMessage:"File uploads"},advancedSettings:{id:"6qpafZ",defaultMessage:"Advanced settings"},setupIncompleteGithub:{id:"WPhFYm",defaultMessage:"Setup incomplete"},noConnectorsAvailable:{id:"rOddez",defaultMessage:"No connectors available"}}),Ep=wt(()=>Nt(()=>import("./nwkahx754oj8hp36.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(t=>t.GithubOnboardingModal)),Pp=t=>{"use forget";const s=ot.c(21),{onAddLinkClick:n,onCreateCustomConnectorClick:a}=t,o=ee(),i=tt(),l=zt(),r=ya(),c=Mc(),m=l.hash.startsWith("#settings/Connectors/Advanced");let u,d;s[0]!==o||s[1]!==i?(u=()=>{const j=window.location.hash,S=j.indexOf("?");if(S===-1)return;const C=new URLSearchParams(j.substring(S+1));if(C.has("github_onboarding")){const w=C.get("github_onboarding");let E=Bt.ConfigureRepos;w&&[Bt.ConfigureRepos,Bt.SyncRepos,Bt.IndexRepos].includes(w)&&(E=w),at(o,Ep,{initialState:E}),C.delete("github_onboarding");const _=j.substring(0,S),D=C.toString()?"".concat(_,"?").concat(C.toString()):_;i({hash:D},{replace:!0})}},d=[o,i],s[0]=o,s[1]=i,s[2]=u,s[3]=d):(u=s[2],d=s[3]),y.useEffect(u,d);let f,h;if(s[4]!==r?(f=()=>{r?se.logEventWithStatsig("Connectors Details Settings Modal Shown","chatgpt_connectors_details_settings_modal_shown",{type:r}):se.logEventWithStatsig("Connectors Settings Modal Shown","chatgpt_connectors_settings_modal_shown")},h=[r],s[4]=r,s[5]=f,s[6]=h):(f=s[5],h=s[6]),y.useEffect(f,h),r){let j;return s[7]!==r||s[8]!==n?(j=e.jsx(yp,{connectorId:r,onAddClick:n}),s[7]=r,s[8]=n,s[9]=j):j=s[9],j}if(m){let j;return s[10]!==i?(j=e.jsx(Hf,{onBack:()=>i("#settings/Connectors",{replace:!0})}),s[10]=i,s[11]=j):j=s[11],j}let x;s[12]!==n||s[13]!==a?(x=e.jsx(Tp,{onCreateCustomConnectorClick:a,onAddClick:n}),s[12]=n,s[13]=a,s[14]=x):x=s[14];let b;s[15]===Symbol.for("react.memo_cache_sentinel")?(b=e.jsx(Gf,{}),s[15]=b):b=s[15];let M;s[16]!==c?(M=c&&e.jsx(xi,{}),s[16]=c,s[17]=M):M=s[17];let v;return s[18]!==x||s[19]!==M?(v=e.jsxs(e.Fragment,{children:[x,b,M]}),s[18]=x,s[19]=M,s[20]=v):v=s[20],v},Ua=({defaultValue:t,onContinue:s,options:n})=>{const[a,o]=y.useState(t);return e.jsxs(e.Fragment,{children:[e.jsx(eu,{value:a,onValueChange:i=>o(i),className:"flex flex-col gap-2 pt-8 pb-6",children:n.map(({value:i,label:l,description:r,Icon:c,Badge:m,disabled:u,tooltip:d})=>{const f=e.jsxs(aa,{value:i,className:yt("border-token-border-default flex items-center gap-4 rounded-2xl border p-4 text-sm",u&&"cursor-not-allowed opacity-60"),disabled:u,children:[c&&e.jsx("span",{children:e.jsx(c,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1 text-start",children:[e.jsxs("div",{className:"flex items-center gap-1.5 pb-0.5",children:[typeof l=="string"?l:e.jsx(g,p({},l)),m&&e.jsx(m,{})]}),e.jsx("div",{className:"text-token-text-secondary",children:typeof r=="string"?r:e.jsx(g,p({},r))})]}),a===i?e.jsx(tu,{className:"flex h-5 w-5 items-center justify-center rounded-full bg-gray-950 p-0.5 dark:bg-white",children:e.jsx("div",{className:"h-2 w-2 rounded-full bg-white dark:bg-gray-950"})}):e.jsx("div",{className:"border-token-border-default h-5 w-5 rounded-full border"})]},i);return d?e.jsx(ct,{label:e.jsx("div",{className:"max-w-50",children:typeof d=="string"?d:e.jsx(g,p({},d))}),side:"right",children:f},i):f})}),e.jsx(F,{className:"w-full",size:"large",disabled:!a,onClick:()=>{a&&s(a)},children:e.jsx(g,p({},Ap.nextStepButton))})]})},Ap=te({nextStepButton:{id:"addConnectorLinkModal.nextStepButton",defaultMessage:"Continue"}}),Dp=t=>{"use forget";var ae,ie;const s=ot.c(49),{connector:n,onClose:a,onContinue:o,canAddDeepResearch:i,canAddInternalKnowledge:l,canAddOdyssey:r,messages:c}=t,m=Ue(),u=Ht(),d=!!(m!=null&&m.isPersonalAccount()&&u);let f,h;s[0]!==c.syncBadge?(h=()=>{"use forget";return e.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[e.jsx(Da,{}),e.jsx(g,p({},c.syncBadge))]})},s[0]=c.syncBadge,s[1]=h):h=s[1];const x=h;let b;s[2]!==c.recommendedBadge?(b=()=>{"use forget";return e.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:e.jsx(g,p({},c.recommendedBadge))})},s[2]=c.recommendedBadge,s[3]=b):b=s[3];const M=b;let v;s[4]!==x||s[5]!==c.internalKnowledgeDescription||s[6]!==c.internalKnowledgeTitle?(v={value:"internalKnowledge",label:c.internalKnowledgeTitle,description:c.internalKnowledgeDescription,Icon:ar,Badge:x},s[4]=x,s[5]=c.internalKnowledgeDescription,s[6]=c.internalKnowledgeTitle,s[7]=v):v=s[7];const j=v;let S;s[8]!==M||s[9]!==c.syncDescription||s[10]!==c.syncTitle?(S={value:"internalKnowledge",label:c.syncTitle,description:c.syncDescription,Icon:ka,Badge:M},s[8]=M,s[9]=c.syncDescription,s[10]=c.syncTitle,s[11]=S):S=s[11];const C=S;let w;s[12]!==c.deepResearchDescription||s[13]!==c.deepResearchTitle?(w={value:"deepResearch",label:c.deepResearchTitle,description:c.deepResearchDescription,Icon:xn},s[12]=c.deepResearchDescription,s[13]=c.deepResearchTitle,s[14]=w):w=s[14];const E=w;let _;s[15]!==c.deepResearchAndOdysseyDescription||s[16]!==c.deepResearchAndOdysseyTitle?(_={value:"deepResearchAndOdyssey",label:c.deepResearchAndOdysseyTitle,description:c.deepResearchAndOdysseyDescription,Icon:xn},s[15]=c.deepResearchAndOdysseyDescription,s[16]=c.deepResearchAndOdysseyTitle,s[17]=_):_=s[17];const D=_;let N;s[18]!==c.dontSyncDescription||s[19]!==c.dontSyncTitle?(N={value:"deepResearch",label:c.dontSyncTitle,description:c.dontSyncDescription,Icon:Pa},s[18]=c.dontSyncDescription,s[19]=c.dontSyncTitle,s[20]=N):N=s[20];const P=N,T=d?C:j;let k;s[21]!==l||s[22]!==c.internalKnowledgeTooltip?(k=l?{}:p({disabled:!0},c.internalKnowledgeTooltip?{tooltip:c.internalKnowledgeTooltip}:{}),s[21]=l,s[22]=c.internalKnowledgeTooltip,s[23]=k):k=s[23];let O;s[24]!==T||s[25]!==k?(O=p(p({},T),k),s[24]=T,s[25]=k,s[26]=O):O=s[26];const R=O,H=r?D:d?P:E;let V;s[27]!==i||s[28]!==H?(V=i?H:ne(p({},H),{disabled:!0}),s[27]=i,s[28]=H,s[29]=V):V=s[29];const $=V;let q;s[30]!==R||s[31]!==$?(q=[R,$],s[30]=R,s[31]=$,s[32]=q):q=s[32],f=q;const G=f;let B;s[33]!==c.selectProductTitle?(B=e.jsx(g,p({},c.selectProductTitle)),s[33]=c.selectProductTitle,s[34]=B):B=s[34];let Y;s[35]!==n?(Y=e.jsx(fs,{connector:n,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),s[35]=n,s[36]=Y):Y=s[36];const X=(ie=(ae=n.branding)==null?void 0:ae.developer)!=null?ie:void 0;let Z;s[37]!==a||s[38]!==B||s[39]!==Y||s[40]!==X?(Z=e.jsx(Ln,{title:B,connectorIcon:Y,connectorDeveloper:X,onClose:a}),s[37]=a,s[38]=B,s[39]=Y,s[40]=X,s[41]=Z):Z=s[41];const pe=d?"internalKnowledge":void 0;let ce;s[42]!==G||s[43]!==o||s[44]!==pe?(ce=e.jsx(Ua,{defaultValue:pe,onContinue:o,options:G}),s[42]=G,s[43]=o,s[44]=pe,s[45]=ce):ce=s[45];let le;return s[46]!==Z||s[47]!==ce?(le=e.jsxs(e.Fragment,{children:[Z,ce]}),s[46]=Z,s[47]=ce,s[48]=le):le=s[48],le},Kt=({messages:t})=>n=>e.jsx(Dp,ne(p({},n),{messages:t})),Op=te({selectProductTitle:{id:"r2npOY",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"gzPmCe",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},deepResearchDescription:{id:"L+S/jI",defaultMessage:"Find, analyze, and synthesize your Drive files to create comprehensive reports"},dontSyncTitle:{id:"YcPoIP",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uO+gdP",defaultMessage:"ChatGPT will read your Google Drive files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"CQFxR7",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"0xFkEA",defaultMessage:"Sync Drive files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"yMY2Ng",defaultMessage:"Sync"},syncDescription:{id:"fcoBBw",defaultMessage:"Sync Google Drive files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"AEBXx0",defaultMessage:"Contact your admin to enable Google Drive for chat"}}),Lp=Kt({messages:Op}),Ip=({connector:t,internalKnowledgeConfigs:s,onClose:n,onContinue:a})=>{var i,l;const o=y.useMemo(()=>s.filter(r=>r.user_connection_details.auth_status==="not_connected").map(r=>({value:r.user_connection_details.connection_instance_id,label:r.connection_display_info.display_name,description:r.connection_display_info.description})),[s]);return e.jsxs(e.Fragment,{children:[e.jsx(Ln,{title:e.jsx(g,p({},Rp.selectConnectionTitle)),connectorIcon:e.jsx(fs,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(l=(i=t.branding)==null?void 0:i.developer)!=null?l:void 0,onClose:n}),e.jsx(Ua,{onContinue:a,options:o})]})},Rp=te({selectConnectionTitle:{id:"2rQetR",defaultMessage:"Select a connection"}}),Bp=wt(()=>Nt(()=>import("./iqa4joq6fhdyyn1v.js"),__vite__mapDeps([7,1,2,3,8,9,4,5,10])).then(t=>t.RedirectContent)),Fp=({onClose:t,connector:s,noRedirect:n})=>{const a=A(),o=tt(),i=me(),l=Ht(),r=!!Ri(),c=Ue(),m=!!(c!=null&&c.isPersonalAccount()&&l),{isLoading:u,internalKnowledgeConfigs:d,internalKnowledgeEnabled:f}=Ys(),{mutateAsync:h}=ms(),{availableConnectors:x}=En(),{availableConnectors:b}=or(),[M,v]=y.useMemo(()=>Aa(d!=null?d:[],ae=>ae.user_connection_details.auth_status==="not_connected"),[d]),j=$s(),S=M.length,C=v.length,[w,E]=y.useState(!1),[_,D]=y.useState(r?"internalKnowledge":null),[N,P]=y.useState(null),T=y.useMemo(()=>S===1?d==null?void 0:d[0]:N?d==null?void 0:d.find(ae=>ae.user_connection_details.connection_instance_id===N):void 0,[S,d,N]),[k,O]=y.useState(!1),{connectorLinks:R,refetch:H}=Mt({productSku:Ne.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:V}=Mt({productSku:Ne.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),$=y.useMemo(()=>{var ae;return!!((ae=R.get(gt))!=null&&ae.length)},[R]),{refetch:q}=es({skip:!0}),G=!$&&x.some(ae=>ae.type===I.GDRIVE_ACTION_CONNECTOR),B=!$&&b.some(ae=>ae.type===I.GDRIVE_ACTION_CONNECTOR),Y=S>0||m,X=(G||B)&&(Y||!(c!=null&&c.isPersonalAccount())&&f&&C<1&&!m),Z=_==="deepResearch"||_==="deepResearchAndOdyssey"||!X&&(G||B),pe=_==="internalKnowledge"||!X&&Y,ce=m&&_==="internalKnowledge",le=y.useCallback(async()=>{try{O(!0),As("popup"),se.logEventWithStatsig("Connectors - Connect Personal Google Drive","chatgpt_connectors_connect_personal_google_drive_clicked",{sync:ce?"true":"false"});const ae=await Es({connector:s,openPopup:!0,toaster:ce?void 0:i,intl:a,productSku:Ne.CONNECTOR_SETTING});if(H(),V(),(ae==null?void 0:ae.errorType)==="oauth_failed_scope_mismatch"){O(!1),E(!0);return}ae!=null&&ae.linkId&&ce&&h({link:{id:ae.linkId,name:s.name,connector_id:Ve[I.GDRIVE_ACTION_CONNECTOR]},isConnectingAndUpgrading:!0}).then(()=>{q()});const ie=j(s);n?t():ie?window.location.href=ie:(t(),setTimeout(()=>{o(Nn,{replace:!0})},500)),E(!1)}catch(ae){O(!1)}},[ce,s,i,a,H,V,j,n,h,q,t,o]);return u?e.jsx("div",{className:"flex justify-center",children:e.jsx(Ge,{})}):w?e.jsxs(e.Fragment,{children:[e.jsx(Ln,{onClose:t,connectorIcon:e.jsx("div",{className:"rounded-xl border-[0.5px] bg-white p-2 shadow-sm",children:e.jsx(Tn,{height:32,width:32})}),title:a.formatMessage({id:"LrBpzI",defaultMessage:"Permissions required"})}),e.jsxs("div",{className:"border-token-border-default text-token-text-secondary mt-8 mb-6 flex items-center gap-4 rounded-xl border p-4 text-sm",children:[e.jsx(da,{className:"icon-lg"}),e.jsx(g,{id:"googleDriveLinkingModalDescription",defaultMessage:"In the next step, make sure to check all boxes. ChatGPT requires the full list of Google permissions."})]}),e.jsx(F,{className:"w-full",onClick:le,loading:k,size:"large",children:e.jsx(g,{id:"reconnect",defaultMessage:"Reconnect"})})]}):e.jsxs(e.Fragment,{children:[X&&!_&&e.jsx(Lp,{onClose:t,connector:s,onContinue:D,canAddDeepResearch:G,canAddOdyssey:B,canAddInternalKnowledge:Y}),(Z||ce)&&e.jsx(Bp,{connector:s,onClose:t,isConnecting:k,onContinue:le,productSku:Ne.CONNECTOR_SETTING}),pe&&S>1&&!N&&e.jsx(Ip,{internalKnowledgeConfigs:d!=null?d:[],onClose:t,connector:s,onContinue:P}),pe&&T&&!ce&&e.jsx(ai,{isAdminFlow:!1,onClose:()=>{D(null),P(null),X||t()},connectionId:T.user_connection_details.connection_instance_id,location:"user_settings",onSuccess:()=>{q(),t()},excludeModalWrapper:!0})]})},Gp=te({selectProductTitle:{id:"uecmFA",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"plFxz/",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},deepResearchDescription:{id:"D9wqqk",defaultMessage:"Find, analyze, and synthesize your SharePoint files to create comprehensive reports"},dontSyncTitle:{id:"FNGsn2",defaultMessage:"Don't sync"},dontSyncDescription:{id:"ol0mde",defaultMessage:"ChatGPT will read your SharePoint files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"Je+I3p",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"Mkivbe",defaultMessage:"Sync SharePoint files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"w0EP7L",defaultMessage:"Sync"},syncDescription:{id:"WmlsRw",defaultMessage:"Sync SharePoint files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"g8mQKA",defaultMessage:"Contact your admin to enable SharePoint for chat"}}),Up=Kt({messages:Gp}),Io=wt(()=>Nt(()=>import("./iqa4joq6fhdyyn1v.js"),__vite__mapDeps([7,1,2,3,8,9,4,5,10])).then(t=>t.RedirectContent)),Wp=({onClose:t,connector:s})=>{const n=A(),a=me(),[o,i]=y.useState(!1),l=Ue(),r=Ht(),c=(l==null?void 0:l.planType)===Pe.SELF_SERVE_BUSINESS?!0:!!(l!=null&&l.isPersonalAccount()&&r),{connectorLinks:m,refetch:u}=Mt({productSku:Ne.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:d}=Mt({productSku:Ne.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),f=$s(),{availableConnectors:h}=En(),{mutateAsync:x}=ms(),{refetch:b}=es({skip:!0}),{isLoading:M,internalKnowledgeConfigs:v,internalKnowledgeEnabled:j}=Hp(),[S,C]=y.useMemo(()=>Aa(v!=null?v:[],q=>q.user_connection_details.auth_status==="not_connected"),[v]),w=S.length,E=C.length,[_,D]=y.useState(null),N=y.useMemo(()=>{var q;return!!((q=m.get(ki))!=null&&q.length)},[m]),P=!N&&h.some(q=>q.type===I.SHAREPOINT_CONNECTOR),T=!N&&h.some(q=>q.type===I.SHAREPOINT_CONNECTOR),k=w>0||c,O=(P||T)&&(k||!(l!=null&&l.isPersonalAccount())&&j&&E<1&&!c),R=_==="deepResearch"||_==="deepResearchAndOdyssey"||!O&&(P||T),H=_==="internalKnowledge"||!O&&k,V=H,$=y.useCallback(async()=>{var q,G;try{i(!0),As("popup");const B=f(s),Y=await Es({connector:s,openPopup:!0,toaster:a,intl:n,productSku:Ne.CONNECTOR_SETTING,redirectAfter:B||void 0});if(await u(),V)try{const X=await d(),Z=new Map(Object.entries((q=X.data)!=null?q:{})),pe=Y&&typeof Y=="object"?Y.linkId:void 0,ce=(G=Z.get(s.id))==null?void 0:G[0];let le=null;typeof pe=="string"?le={id:pe,name:s.name,connector_id:s.id}:ce&&typeof ce.id=="string"&&(le={id:ce.id,name:s.name,connector_id:s.id}),le&&(await x({link:le,isConnectingAndUpgrading:!0}),await b())}catch(X){}t()}catch(B){i(!1)}},[s,a,n,u,d,f,t,V,x,b]);return M?e.jsx("div",{className:"flex justify-center",children:e.jsx(Ge,{})}):e.jsxs(e.Fragment,{children:[O&&!_&&e.jsx(Up,{onClose:t,connector:s,onContinue:D,canAddDeepResearch:P,canAddOdyssey:T,canAddInternalKnowledge:k}),(R||V)&&e.jsx(Io,{connector:s,onClose:t,isConnecting:o,onContinue:$,productSku:Ne.CONNECTOR_SETTING}),H&&!V&&e.jsx(Io,{connector:s,onClose:()=>{D(null),O||t()},isConnecting:o,onContinue:$,productSku:Ne.CONNECTOR_SETTING})]})};function Hp(){const t=Ts(),s=Dn(),n=y.useMemo(()=>{var a;return(a=s.data)==null?void 0:a.connection_statuses.filter(o=>o.user_connection_details.knowledge_connector_type==="sharepoint")},[s.data]);return{isLoading:s.isLoading,internalKnowledgeEnabled:t,internalKnowledgeConfigs:t&&(n!=null&&n.length)?n:null}}const zp=te({selectProductTitle:{id:"bpaehG",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"2EXqDU",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},deepResearchDescription:{id:"pNQbc3",defaultMessage:"Find, analyze, and synthesize your Jira issues to create comprehensive reports"},dontSyncTitle:{id:"pFj6Xq",defaultMessage:"Don't sync"},dontSyncDescription:{id:"QX+ada",defaultMessage:"ChatGPT will read your Jira issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iK7v/r",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"RBzElS",defaultMessage:"Sync Jira issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"2NrkD8",defaultMessage:"Sync"},syncDescription:{id:"l4VShM",defaultMessage:"Sync Jira issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"vM2Wdq",defaultMessage:"Contact your admin to enable Jira for chat"}}),Kp=Kt({messages:zp}),Vp=te({selectProductTitle:{id:"0hzRKh",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"hVvY37",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},deepResearchDescription:{id:"hbh71y",defaultMessage:"Find, analyze, and synthesize your Jira Service Management tickets to create comprehensive reports"},dontSyncTitle:{id:"9CKUT3",defaultMessage:"Don't sync"},dontSyncDescription:{id:"yeSkeT",defaultMessage:"ChatGPT will read your Jira Service Management tickets as needed, so replies may be slower."},internalKnowledgeTitle:{id:"jvk58G",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"qv1dVO",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"dk0bHH",defaultMessage:"Sync"},syncDescription:{id:"pgpt5C",defaultMessage:"Sync Jira Service Management tickets to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"arahcS",defaultMessage:"Contact your admin to enable Jira Service Management for chat"}}),qp=Kt({messages:Vp}),Yp=()=>e.jsxs("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:[e.jsx(Da,{}),e.jsx(g,p({},ft.syncBadge))]}),Qp=()=>e.jsx("span",{className:"bg-token-interactive-bg-accent-default flex items-center gap-1 rounded-sm px-1.5 py-0.5 text-xs text-[#007AFF]",children:e.jsx(g,p({},ft.recommendedBadge))}),$p=({connector:t,onClose:s,onContinue:n,canAddDeepResearch:a,canAddInternalKnowledge:o,canAddOdyssey:i})=>{var d,f;const l=Ue(),r=Ht(),c=!!(l!=null&&l.isPersonalAccount()&&r),m=A(),u=y.useMemo(()=>[p(p({},c?eh:Zp),o?{}:{disabled:!0,tooltip:m.formatMessage({id:"GbkN+V",defaultMessage:"Contact your admin to enable Notion for chat"})}),...a?[i?Xp:c?th:Jp]:[]],[c,o,m,a,i]);return e.jsxs(e.Fragment,{children:[e.jsx(Ln,{title:e.jsx(g,p({},ft.selectProductTitle)),connectorIcon:e.jsx(fs,{connector:t,className:"rounded-xl border-[0.5px] p-2 shadow-sm",size:"medium"}),connectorDeveloper:(f=(d=t.branding)==null?void 0:d.developer)!=null?f:void 0,onClose:s}),e.jsx(Ua,{defaultValue:c?"internalKnowledge":void 0,onContinue:n,options:u})]})},ft=te({selectProductTitle:{id:"DAwG09",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"KXsRFb",defaultMessage:"Find, analyze, and synthesize your team's Notion pages and databases to create comprehensive reports"},deepResearchDescription:{id:"gZpO3N",defaultMessage:"Find, analyze, and synthesize Notion pages and databases for richer reports"},dontSyncTitle:{id:"GMrSDT",defaultMessage:"Don't sync"},dontSyncDescription:{id:"y/IdPs",defaultMessage:"ChatGPT will read your Notion content as needed, so replies may be slower."},internalKnowledgeTitle:{id:"QJf1Sc",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"lJilfk",defaultMessage:"Sync Notion pages and databases to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"7Ar/Ej",defaultMessage:"Sync"},syncDescription:{id:"6WCZbJ",defaultMessage:"Sync Notion content to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),Jp={value:"deepResearch",label:ft.deepResearchTitle,description:ft.deepResearchDescription,Icon:xn},Xp={value:"deepResearchAndOdyssey",label:ft.deepResearchAndOdysseyTitle,description:ft.deepResearchAndOdysseyDescription,Icon:xn},Zp={value:"internalKnowledge",label:ft.internalKnowledgeTitle,description:ft.internalKnowledgeDescription,Icon:ar,Badge:Yp},eh={value:"internalKnowledge",label:ft.syncTitle,description:ft.syncDescription,Icon:ka,Badge:Qp},th={value:"deepResearch",label:ft.dontSyncTitle,description:ft.dontSyncDescription,Icon:Pa},sh=te({selectProductTitle:{id:"tiiSob",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"E2YSMq",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},deepResearchDescription:{id:"sQ+00J",defaultMessage:"Find, analyze, and synthesize your Box files to create comprehensive reports"},dontSyncTitle:{id:"M9p5Sr",defaultMessage:"Don't sync"},dontSyncDescription:{id:"uJTHjO",defaultMessage:"ChatGPT will read your Box files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8z2iu4",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"xK+380",defaultMessage:"Sync Box files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"nbQOhy",defaultMessage:"Sync"},syncDescription:{id:"QVxBJI",defaultMessage:"Sync Box files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"4Gp6+x",defaultMessage:"Contact your admin to enable Box for chat"}}),nh=Kt({messages:sh}),ah=te({selectProductTitle:{id:"Kc1KGe",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"YxjjQU",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},deepResearchDescription:{id:"SmRTX8",defaultMessage:"Find, analyze, and synthesize your Confluence pages to create comprehensive reports"},dontSyncTitle:{id:"B1m/Ur",defaultMessage:"Don't sync"},dontSyncDescription:{id:"nDBuCO",defaultMessage:"ChatGPT will read your Confluence pages as needed, so replies may be slower."},internalKnowledgeTitle:{id:"8ckwHH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"CkaEi7",defaultMessage:"Sync Confluence pages to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"tJk3ba",defaultMessage:"Sync"},syncDescription:{id:"di8xMd",defaultMessage:"Sync Confluence pages to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"dKvJHF",defaultMessage:"Contact your admin to enable Confluence for chat"}}),oh=Kt({messages:ah}),ih=te({selectProductTitle:{id:"5spMkf",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"U0acJQ",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},deepResearchDescription:{id:"jIJEzP",defaultMessage:"Find, analyze, and synthesize your Dropbox files to create comprehensive reports"},dontSyncTitle:{id:"8B2iTh",defaultMessage:"Don't sync"},dontSyncDescription:{id:"MWu53i",defaultMessage:"ChatGPT will read your Dropbox files as needed, so replies may be slower."},internalKnowledgeTitle:{id:"iUMNhW",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"73blMa",defaultMessage:"Sync Dropbox files to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"aRVh2X",defaultMessage:"Sync"},syncDescription:{id:"uTHxb2",defaultMessage:"Sync Dropbox files to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"/uVHMl",defaultMessage:"Contact your admin to enable Dropbox for chat"}}),rh=Kt({messages:ih}),lh=te({selectProductTitle:{id:"vNGjSS",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"1X1JDE",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},deepResearchDescription:{id:"0ExpFM",defaultMessage:"Find, analyze, and synthesize your Intercom conversations to create comprehensive reports"},dontSyncTitle:{id:"4WufmE",defaultMessage:"Don't sync"},dontSyncDescription:{id:"0BFTy+",defaultMessage:"ChatGPT will read your Intercom conversations as needed, so replies may be slower."},internalKnowledgeTitle:{id:"m/G/ff",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"4gC4/b",defaultMessage:"Sync Intercom conversations to ChatGPT for more relevant, up-to-date answers"},internalKnowledgeTooltip:{id:"YxCdN8",defaultMessage:"Contact your admin to enable Intercom for chat"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"jafwiu",defaultMessage:"Sync"},syncDescription:{id:"ISqAI/",defaultMessage:"Sync Intercom conversations to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"}}),ch=Kt({messages:lh}),dh=te({selectProductTitle:{id:"kU51Yz",defaultMessage:"Select a connection type"},deepResearchTitle:{id:"BufFDR",defaultMessage:"Deep research"},deepResearchAndOdysseyTitle:{id:"y9kp7g",defaultMessage:"Deep research and agent mode"},deepResearchAndOdysseyDescription:{id:"5P9nHy",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},deepResearchDescription:{id:"7qO5UY",defaultMessage:"Find, analyze, and synthesize your Linear issues to create comprehensive reports"},dontSyncTitle:{id:"s+7AVU",defaultMessage:"Don't sync"},dontSyncDescription:{id:"qQEaBe",defaultMessage:"ChatGPT will read your Linear issues as needed, so replies may be slower."},internalKnowledgeTitle:{id:"CZbTgH",defaultMessage:"Chat"},internalKnowledgeDescription:{id:"S+Hglq",defaultMessage:"Sync Linear issues to ChatGPT for more relevant, up-to-date answers"},recommendedBadge:{id:"Wtyyql",defaultMessage:"Recommended"},syncTitle:{id:"XI3bjb",defaultMessage:"Sync"},syncDescription:{id:"3e8sdS",defaultMessage:"Sync Linear issues to ChatGPT for faster, more relevant answers."},syncBadge:{id:"0OM3Oh",defaultMessage:"Sync"},internalKnowledgeTooltip:{id:"lxy6iQ",defaultMessage:"Contact your admin to enable Linear for chat"}}),uh=Kt({messages:dh}),Ro=wt(()=>Nt(()=>import("./iqa4joq6fhdyyn1v.js"),__vite__mapDeps([7,1,2,3,8,9,4,5,10])).then(t=>t.RedirectContent));function ss({platformConnectorType:t,knowledgeConnectorType:s,connectorId:n,ProductSelectComponent:a,syncConnectorId:o,showProductSelectWithoutDeepResearch:i}){return function({onClose:r,connector:c}){const m=A(),u=me(),d=Bi(),f=!!Ri(),[h,x]=y.useState(!1),[b,M]=y.useState(()=>f?"internalKnowledge":d===Ne.DEEP_RESEARCH?"deepResearch":null),v=Ue(),j=Ht(),S=(v==null?void 0:v.planType)===Pe.SELF_SERVE_BUSINESS?!0:!!(v!=null&&v.isPersonalAccount()&&j),{availableConnectors:C,isLoading:w}=En(),{availableConnectors:E,isLoading:_}=or(),{isLoading:D,internalKnowledgeConfigs:N,internalKnowledgeEnabled:P}=Mh(s),[T,k]=y.useMemo(()=>Aa(N!=null?N:[],W=>W.user_connection_details.auth_status==="not_connected"),[N]),O=T.length,R=k.length,H=O>0||S,{connectorLinks:V,refetch:$,isLoading:q}=Mt({productSku:Ne.CONNECTOR_SETTING,fetchValidLinksOnly:!0}),{refetch:G}=Mt({productSku:Ne.CONNECTOR_SETTING,fetchValidLinksOnly:!1,skip:!0}),{refetch:B}=es({skip:!0}),Y=$s(),{mutateAsync:X}=ms(),Z=y.useMemo(()=>{var W;return!!((W=V.get(n))!=null&&W.length)},[V]),pe=!Z&&C.some(W=>W.type===t),ce=!Z&&E.some(W=>W.type===t),le=pe||ce,ae=!!(a&&i&&H),ie=!!a&&d!==Ne.DEEP_RESEARCH&&(le||ae)&&(H||!(v!=null&&v.isPersonalAccount())&&P&&R<1&&!S),ue=d===Ne.DEEP_RESEARCH||b==="deepResearch"||b==="deepResearchAndOdyssey"||!ie&&le,U=b==="internalKnowledge"||!ie&&d!==Ne.DEEP_RESEARCH&&H,J=ue?Ne.DEEP_RESEARCH:Ne.CONNECTOR_SETTING,Oe=U&&H,Ae=Oe&&o!=null,Le=d!==Ne.DEEP_RESEARCH&&(D||ie&&(w||_))||ie&&q,Qe=Oe,$e=y.useCallback(async()=>{var W,z;try{x(!0),As("popup");const de=Y(c),De=Ae&&o!=null?o:c.id,Ie=await Es({connector:c,redirectAfter:de||void 0,toaster:u,openPopup:!0,intl:m,productSku:J,connectorIdOverride:Ae?o:void 0});if(await $(),Oe)try{const We=await G(),Re=new Map(Object.entries((W=We.data)!=null?W:{})),qe=Ie&&typeof Ie=="object"?Ie.linkId:void 0,be=(z=Re.get(De))==null?void 0:z[0];let He=null;typeof qe=="string"?He={id:qe,name:c.name,connector_id:De}:be&&typeof be.id=="string"&&(He={id:be.id,name:c.name,connector_id:De}),He&&(await X({link:He,isConnectingAndUpgrading:!0}),await B())}catch(We){}r()}catch(de){x(!1)}},[c,m,Y,r,J,$,G,B,Ae,Oe,u,X]);return Le?e.jsx("div",{className:"flex justify-center",children:e.jsx(Ge,{})}):e.jsxs(e.Fragment,{children:[a&&ie&&!b&&e.jsx(a,{onClose:r,connector:c,onContinue:M,canAddDeepResearch:pe,canAddOdyssey:ce,canAddInternalKnowledge:H}),(ue||Qe)&&e.jsx(Ro,{connector:c,onClose:r,isConnecting:h,onContinue:$e,productSku:J}),U&&!Qe&&e.jsx(Ro,{connector:c,onClose:()=>{M(null),ie||r()},isConnecting:h,onContinue:$e,productSku:J})]})}}const gh=ss({platformConnectorType:I.DROPBOX_CONNECTOR,knowledgeConnectorType:"dropbox",connectorId:Pi,ProductSelectComponent:rh}),mh=ss({platformConnectorType:I.BOX_CONNECTOR,knowledgeConnectorType:"box",connectorId:Ai,ProductSelectComponent:nh}),fh=ss({platformConnectorType:I.LINEAR_CONNECTOR,knowledgeConnectorType:"linear",connectorId:Ei,ProductSelectComponent:uh}),ph=ss({platformConnectorType:I.JIRA_CONNECTOR,knowledgeConnectorType:"jira",connectorId:Ve[I.JIRA_CONNECTOR],ProductSelectComponent:Kp}),hh=ss({platformConnectorType:I.JIRA_SERVICEMANAGEMENT_CONNECTOR,knowledgeConnectorType:"jira_servicemanagement",connectorId:Ve[I.JIRA_SERVICEMANAGEMENT_CONNECTOR],ProductSelectComponent:qp}),xh=ss({platformConnectorType:I.CONFLUENCE_CONNECTOR,knowledgeConnectorType:"confluence",connectorId:Ve[I.CONFLUENCE_CONNECTOR],ProductSelectComponent:oh}),bh=ss({platformConnectorType:I.NOTION_CONNECTOR,knowledgeConnectorType:"notion",connectorId:Oi,syncConnectorId:Di,ProductSelectComponent:$p}),yh=ss({platformConnectorType:I.INTERCOM_CONNECTOR,knowledgeConnectorType:"intercom",connectorId:Ii,syncConnectorId:Li,ProductSelectComponent:ch,showProductSelectWithoutDeepResearch:!0});function Mh(t){const s=Ts(),n=Dn(),a=y.useMemo(()=>{var o;return(o=n.data)==null?void 0:o.connection_statuses.filter(i=>i.user_connection_details.knowledge_connector_type===t)},[n.data,t]);return{isLoading:n.isLoading,internalKnowledgeEnabled:s,internalKnowledgeConfigs:s&&(a!=null&&a.length)?a:null}}const Ch=wt(()=>Nt(()=>import("./iqa4joq6fhdyyn1v.js"),__vite__mapDeps([7,1,2,3,8,9,4,5,10])).then(t=>t.RedirectContent)),vh=({connector:t,onClose:s,productSku:n,redirectAfter:a})=>{const o=A(),i=me(),[l,r]=y.useState(!1),{refetch:c}=Mt({productSku:n}),m=!0,u=$s(),[d,f]=y.useState(!1),[h,x]=y.useState(!0),[b,M]=y.useState(null),{mutateAsync:v}=ms(),j=y.useRef(null),[S,C]=y.useState(void 0),w=y.useRef(0);y.useEffect(()=>{const _=j.current;if(!_)return;let D;return d?!S&&w.current>0&&C(w.current):(D=new ResizeObserver(N=>{for(const P of N){const T=P.contentRect.height;T>w.current&&(w.current=T)}}),D.observe(_)),()=>{D==null||D.disconnect()}},[d,S]);const E=async()=>{var _,D;try{r(!0),As("popup");const N=u(t),P=await Es({connector:t,redirectAfter:N||a,toaster:i,openPopup:m,intl:o,productSku:n});if(h)try{const T=await c(),k=new Map(Object.entries((_=T.data)!=null?_:{})),O=P&&typeof P=="object"?P.linkId:void 0,R=(D=k.get(t.id))==null?void 0:D[0];let H=null;typeof O=="string"?H={id:O,name:t.name,connector_id:t.id}:R&&typeof R.id=="string"&&(H={id:R.id,name:t.name,connector_id:t.id}),H&&await v({link:H,isConnectingAndUpgrading:!0})}catch(T){}s()}catch(N){r(!1),N instanceof Error&&i.danger(o.formatMessage({id:"wham.connectorSettings.addConnectorLinkModal.error",defaultMessage:"Failed to add connector link"}))}};return e.jsx("div",{ref:j,style:S?{minHeight:S}:void 0,className:"flex flex-col",children:d?e.jsx(Sh,{value:b!=null?b:h,onChange:_=>M(_),onCancel:()=>{f(!1),M(null)},onSave:()=>{b!=null&&x(b),f(!1),M(null)},isSaveDisabled:!(b!=null&&b!==h)}):e.jsxs(e.Fragment,{children:[e.jsx(Ch,{connector:t,onClose:s,isConnecting:l,onContinue:E,showExternalIcon:!0,productSku:n}),e.jsx("div",{className:"px-4 py-1",children:e.jsx("button",{type:"button",className:"text-token-text-secondary mx-auto mt-2 block text-sm outline-hidden focus:outline-none focus-visible:outline-none",onClick:()=>{M(h),f(!0)},children:e.jsx(g,p({},It.advancedSettingsLink))})})]})})},Sh=({value:t,onChange:s,onCancel:n,onSave:a,isSaveDisabled:o})=>{const i=A();return e.jsxs("div",{className:"flex flex-1 flex-col p-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"text-2xl font-semibold",children:e.jsx(g,p({},It.advancedSettingsTitle))}),e.jsx(vn,{onClick:n})]}),e.jsx("div",{className:"mt-6 mb-2 text-base font-medium",children:e.jsx(g,p({},It.connectionType))}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"border-token-border-default overflow-hidden rounded-xl border",children:e.jsxs(Xt.Root,{value:t?"sync":"ondemand",onValueChange:l=>s(l==="sync"),className:"flex w-full flex-col",children:[e.jsxs("label",{className:"flex items-start justify-between gap-3 p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium",children:e.jsx(g,p({},It.syncTitle))}),e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(g,p({},It.syncDescription))})]}),e.jsx(aa,{value:"sync",className:"border-token-border-default mt-1 inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-full border p-0 leading-none data-[state=checked]:border-black data-[state=checked]:bg-black dark:data-[state=checked]:border-white dark:data-[state=checked]:bg-white",children:t?e.jsx(Xt.Indicator,{className:"after:bg-white dark:after:bg-black"}):null})]}),e.jsxs("label",{className:"border-token-border-default flex items-start justify-between gap-3 border-t p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium",children:e.jsx(g,p({},It.onDemandTitle))}),e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(g,p({},It.onDemandDescription))})]}),e.jsx(aa,{value:"ondemand",className:"border-token-border-default mt-1 inline-flex h-5 w-5 shrink-0 items-center justify-center rounded-full border p-0 leading-none data-[state=checked]:border-black data-[state=checked]:bg-black dark:data-[state=checked]:border-white dark:data-[state=checked]:bg-white",children:t?null:e.jsx(Xt.Indicator,{className:"after:bg-white dark:after:bg-black"})})]})]})})}),e.jsxs("div",{className:"mt-auto flex items-center justify-between pt-4",children:[e.jsx(F,{color:"secondary",onClick:n,children:i.formatMessage(It.cancel)}),e.jsx(F,{onClick:a,disabled:o,children:i.formatMessage(It.save)})]})]})},It=te({advancedSettingsLink:{id:"qAio8L",defaultMessage:"Advanced settings"},advancedSettingsTitle:{id:"W24xFG",defaultMessage:"Advanced settings"},connectionType:{id:"GpZZmq",defaultMessage:"Connection type"},syncTitle:{id:"3kK9K9",defaultMessage:"Sync"},syncDescription:{id:"N3cJ8/",defaultMessage:"Sync content to ChatGPT for improved response speed and quality"},onDemandTitle:{id:"JSo4N3",defaultMessage:"On demand"},onDemandDescription:{id:"5PZSBI",defaultMessage:"Access content on demand. Responses will take longer and may be lower quality"},cancel:{id:"qz9XeG",defaultMessage:"Cancel"},save:{id:"LXZUd1",defaultMessage:"Save changes"}}),jh=wt(()=>Nt(()=>import("./iqa4joq6fhdyyn1v.js"),__vite__mapDeps([7,1,2,3,8,9,4,5,10])).then(t=>t.RedirectContent)),_h=({connector:t,onClose:s,productSku:n,redirectAfter:a,authTypeOverride:o,noRedirect:i=!1})=>{const l=A(),r=me(),[c,m]=y.useState(!1),[u,d]=y.useState(void 0),{refetch:f}=Mt({productSku:n,fetchValidLinksOnly:!0}),h=xa(),x=pa(),b=$s(),M=jc(),[v,j]=Rn(),{refetch:S}=_c(),C=wc(),w=Nc(),E=t.id===ta&&C,_=Ma[t.id]===I.GITHUB_CONNECTOR;let D=a;if(_){const P=new URL(a!=null?a:"/",window.location.origin);h&&(P.searchParams.append("github_onboarding","sync-repos"),D=P.pathname+P.search)}const N=async P=>{try{const T=Tc(t,o!=null?o:P);switch(m(!0),d(T),T){case"OAUTH":{i&&As("popup");const k=b(t);await Es({connector:t,redirectAfter:i?void 0:k||D,toaster:r,openPopup:i?!0:x,intl:l,productSku:n,slackTeamIdOverride:t.id===ta&&w!=null?w:void 0}),await f(),s();break}case"NONE":{await kc(t),await f(),await S(),s(),r.success(l.formatMessage({id:"cb/7hh",defaultMessage:"{connector} is now connected"},{connector:gs(t.name,l)})),M===sa.JitPluginMessage&&j(k=>(k.set("link_success","true"),k),{replace:!0});break}}}catch(T){m(!1),d(void 0),T instanceof Error&&r.danger(l.formatMessage({id:"wham.connectorSettings.addConnectorLinkModal.error",defaultMessage:"Failed to add connector link"}))}};return e.jsx(jh,{connector:t,onClose:s,isConnecting:c,isConnectingAuthType:u,onContinue:N,productSku:n,showExternalIcon:!0,additionalMessageThatDoesNotContainLegalClaims:E?e.jsx(g,{id:"addConnectorLinkModal.slackWorkspaceReminder",defaultMessage:"In the next step, choose the {workspace} Slack workspace before approving access.",values:{workspace:e.jsx("span",{className:"font-semibold",children:C})}}):void 0})},wh=t=>{const s=Ue(),n=!(s!=null&&s.isPersonalAccount())&&(s==null?void 0:s.planType)!==Pe.SELF_SERVE_BUSINESS,a=Ni(),{isEnabled:o,isLoading:i}=Ti(),l=n?o&&!i:!0,r=nt("linear"),c=nt("dropbox"),m=nt("box"),u=nt("notion"),d=nt("confluence"),f=nt("jira"),h=nt("jira_servicemanagement"),x=nt("intercom");if(!t)return!1;switch(Ma[t.id]){case I.SHAREPOINT_CONNECTOR:return!!(a&&l);case I.LINEAR_CONNECTOR:return r;case I.DROPBOX_CONNECTOR:return c;case I.BOX_CONNECTOR:return m;case I.NOTION_CONNECTOR:return u;case I.CONFLUENCE_CONNECTOR:return d;case I.JIRA_CONNECTOR:return f;case I.JIRA_SERVICEMANAGEMENT_CONNECTOR:return h;case I.INTERCOM_CONNECTOR:return x;default:return!1}},Nh=({onClose:t})=>{const s=ya(),n=Bi(),{platformConnectors:a,isLoading:o}=An(!0,n),i=s?a.get(s):void 0,l=Cc(),r=vc(),c=!!Sc(),m=wh(i),u=ee(),d=oe(u,"2837136623");if(o)return e.jsx("div",{className:"flex justify-center",children:e.jsx(Ge,{})});const f=(i==null?void 0:i.id)===gt;if(!i)return e.jsx(Fe.Root,{isOpen:!0,onClose:t,testId:"modal-add-connector-link",children:e.jsx(Fe.Overlay,{})});const h=Ma[i.id],x=e.jsx(_h,{connector:i,onClose:t,productSku:n,redirectAfter:l,authTypeOverride:r,noRedirect:c}),b=(()=>{switch(h){case I.SHAREPOINT_CONNECTOR:return e.jsx(Wp,{onClose:t,connector:i});case I.DROPBOX_CONNECTOR:return e.jsx(gh,{onClose:t,connector:i});case I.BOX_CONNECTOR:return e.jsx(mh,{onClose:t,connector:i});case I.LINEAR_CONNECTOR:return e.jsx(fh,{onClose:t,connector:i});case I.NOTION_CONNECTOR:return e.jsx(bh,{onClose:t,connector:i});case I.CONFLUENCE_CONNECTOR:return e.jsx(xh,{onClose:t,connector:i});case I.JIRA_CONNECTOR:return e.jsx(ph,{onClose:t,connector:i});case I.JIRA_SERVICEMANAGEMENT_CONNECTOR:return e.jsx(hh,{onClose:t,connector:i});case I.INTERCOM_CONNECTOR:return e.jsx(yh,{onClose:t,connector:i});default:return null}})(),M=d?e.jsx(vh,{connector:i,onClose:t,productSku:n,redirectAfter:l}):b!=null?b:x;return e.jsx(je,{testId:"modal-add-connector-link",type:"success",isOpen:!0,onClose:t,size:"custom",className:"max-w-[400px]",children:f?e.jsx(Fp,{onClose:t,connector:i,noRedirect:c}):m?M:x})},Bo=te({title:{id:"fODdu4",defaultMessage:"Connect your tools with a ChatGPT paid plan"},description:{id:"8BtfyR",defaultMessage:"Upgrade to ChatGPT Plus, Pro, or Business to add connectors to your favorite apps like Google Drive, GitHub, Slack, and more for smarter, more relevant responses."}});function Th({onClose:t}){y.useEffect(()=>{se.logEvent("Connector Settings: Free Upsell Modal Viewed")},[]);const s=()=>{se.logEvent("Connector Settings: Free Upsell Upgrade Clicked"),window.location.assign("/#pricing")};return e.jsx(je,{isOpen:!0,onClose:t,position:"center",showCloseButton:!0,size:"custom",className:"max-h-[85vh] w-full md:max-w-[640px]",testId:"modal-connectors-upgrade",children:e.jsxs("div",{className:"flex flex-col gap-6 p-6 text-center md:p-8",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold md:text-xl",children:e.jsx(g,p({},Bo.title))}),e.jsx("p",{className:"text-token-text-secondary text-sm md:text-base",children:e.jsx(g,p({},Bo.description))})]}),e.jsxs("div",{className:"flex flex-col-reverse gap-3 md:flex-row md:justify-center",children:[e.jsx(F,{color:"secondary",onClick:t,size:"large",className:"w-full md:w-auto",children:e.jsx(g,p({},Ws.maybeLater))}),e.jsx(F,{color:"primary",onClick:s,size:"large",className:"w-full min-w-[150px] md:w-auto",children:e.jsx(g,p({},Ws.upgradeYourPlan))})]})]})})}let Xn=0;var ti;const kh=Lt(Se.CheckboxItem)(ti||(ti=Ct(["flex flex-row justify-between h-10 mx-2 items-center"])));function Eh(t,s,n,a){const o={category:t.category,[n]:s};a(o)}function Ph(){const t=A(),n=Ee().getQueryData([un]),[a,o]=y.useState(n),i=Lh(o);return su({onSuccess:l=>{o(l)},alwaysRefetchOnMount:!0}),e.jsx(xe,{title:t.formatMessage({id:"settingsModal.notifications",defaultMessage:"Notifications"}),children:a?a.map(l=>e.jsx(Q,{children:e.jsx(Ah,{settings:l,updateSettings:i.mutate})},l.category)):e.jsx("div",{className:"flex justify-center p-6",children:e.jsx(Ge,{})})})}function Ah({settings:t,updateSettings:s}){const n=A(),a=pt(),i=t.category==="teen_safety"?Oh(t.options,!!(a!=null&&a.email),!!(a!=null&&a.phone_number)):t.options;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:t.name}),e.jsxs(Se.Root,{children:[e.jsxs(Se.Trigger,{children:[e.jsx("div",{children:Dh(i,n)}),e.jsx(au,{className:"icon-sm"})]}),e.jsx(Se.Portal,{children:e.jsx(Se.Content,{size:"small",align:"end",children:i.map((l,r)=>e.jsx(kh,{checked:l.enabled,onCheckedChange:c=>Eh(t,c,l.channel,s),children:l.name},r))})})]})]}),e.jsxs(Ca,{children:[t.description,t.category==="tasks"&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx(cs,{className:"underline",to:"/tasks",children:e.jsx(g,{id:"notificationSettings.manageTasks",defaultMessage:"Manage tasks"})})]})]})]})}function Dh(t,s){const n=t.some(i=>i.channel==="email"&&i.enabled),a=t.some(i=>i.channel==="sms"&&i.enabled),o=t.some(i=>i.channel==="push"&&i.enabled);return o&&n&&a||o&&n?s.formatMessage(Yt.pushAndEmailEnabled):o&&a?s.formatMessage(Yt.pushAndSmsEnabled):n&&a?s.formatMessage(Yt.emailAndSmsEnabled):a?s.formatMessage(Yt.smsEnabled):o?s.formatMessage(Yt.pushEnabled):n?s.formatMessage(Yt.emailEnabled):s.formatMessage(Yt.notificationsOff)}function Oh(t,s,n){return t.filter(a=>a.channel==="email"?s:a.channel==="sms"?n:!0)}function Lh(t){const s=Ee();return _e({mutationFn:async n=>(await nu.updateSettings(n)).settings,onMutate:async n=>{Xn+=1;const a=Xn;await s.cancelQueries({queryKey:un});const o=s.getQueryData(un);return t(i=>{if(!i)return i;const c=n,{category:l}=c,r=Ds(c,["category"]);return i.map(m=>{if(m.category!==l)return m;const u=m.options.map(d=>{const f=r[d.channel];return typeof f=="boolean"?ne(p({},d),{enabled:f}):d});return ne(p({},m),{options:u})})}),{previousSettingsList:o,mutationId:a}},onError:(n,a,o)=>{o!=null&&o.previousSettingsList&&t(o.previousSettingsList)},onSuccess:(n,a,o)=>{(o==null?void 0:o.mutationId)===Xn&&(s.setQueryData(un,n),t(n))}})}const Yt=te({pushEnabled:{id:"notificationSettings.pushEnabled",defaultMessage:"Push"},emailEnabled:{id:"notificationSettings.emailEnabled",defaultMessage:"Email"},smsEnabled:{id:"notificationSettings.smsEnabled",defaultMessage:"SMS"},pushAndEmailEnabled:{id:"notificationSettings.pushAndEmailEnabled",defaultMessage:"Push, Email"},pushAndSmsEnabled:{id:"notificationSettings.pushAndSmsEnabled",defaultMessage:"Push, SMS"},emailAndSmsEnabled:{id:"notificationSettings.emailAndSmsEnabled",defaultMessage:"Email, SMS"},pushAndEmailAndSmsEnabled:{id:"notificationSettings.pushAndEmailAndSmsEnabled",defaultMessage:"Push, Email, SMS"},notificationsOff:{id:"notificationSettings.notificationsOff",defaultMessage:"Off"}});function Ih(){const t=A();return e.jsx(Ot,{value:ye.Notifications,icon:ou,label:t.formatMessage({id:"settingsModal.notifications",defaultMessage:"Notifications"})})}const $r=(t,s)=>{const{data:n,isLoading:a,error:o}=rt({queryKey:["cancellationPromotion"],queryFn:async()=>re.safeGet("/promotions/cp",{parameters:{query:{account_id:t}}}),enabled:s});return{cancellationPromoMetadata:y.useMemo(()=>{var l;return!(n!=null&&n.metadata)||n.metadata.plan_name!==ri.PLUS||((l=n.metadata.duration)==null?void 0:l.period)!=="month"?null:n.metadata},[n]),isCancelPromoLoading:a,promoError:o}};function Rh({isOpen:t,onClose:s,onClaimOfferButtonClicked:n,currentAccount:a}){const o=A(),i=me(),l=ee(),{data:r}=iu(),c=ru(a.id),m=a.data.subscriptionStatus.planType,u=a.getLastActiveSubscription().subscription_id,d=a.data.subscriptionStatus.discount,f=Ks(m.toLowerCase()),h=Ee(),x=St(l,"468168202"),b=St(l,"3170465812"),M=a.isEligibleForCancellationPromotion(),{cancellationPromoMetadata:v,isCancelPromoLoading:j}=$r(a.id,M),S=v?b.get("promo_redemption_cta_color","secondary"):"secondary",{numPeriods:C,formattedDiscountedCost:w}=y.useMemo(()=>{var T,k;const N=a.mustGetSubscriptionBillingCurrency("GlobalSettingsModal");if(!v)return{numPeriods:0,formattedDiscountedCost:""};const P=(k=(T=v.duration)==null?void 0:T.num_periods)!=null?k:1;return p({numPeriods:P},Eg(o,P,v.discount,N))},[a,v,o]),E=(d==null?void 0:d.cancellation_policy)===Ec.IMMEDIATE,_=async()=>{if(!a||!u)throw new Error("Missing current account or subscription id");await c.mutateAsync(a.id,{onError:()=>{i.danger(Fo.cancelFailure,{duration:5,toastId:"cancel_subscription_modal"}),se.logEventWithStatsig("Cancel Subscription Modal Cancel Failed","chatgpt_cancel_subscription_modal_cancel_failed")},onSuccess:async()=>{if(h.invalidateQueries(ca()),i.info(o.formatMessage(Fo.cancelSuccess),{duration:5}),se.logEventWithStatsig("Cancel Subscription Modal Cancel Success","chatgpt_cancel_subscription_modal_cancel_success"),oe(l,"3376055906")){const P=new URL("https://openai.qualtrics.com/jfe/form/SV_eW3mdeRdMrpnPLw");P.searchParams.append("subscription_id",u),P.searchParams.append("plan_type",a.planType),a.authUserId?P.searchParams.append("oai_user",a.authUserId):dt.addError("authUserId missing from currentAccount"),window.open(P.toString(),"_blank")}setTimeout(()=>{s()},5e3)}})};y.useEffect(()=>{c.isSuccess&&s()},[c.isSuccess,s]),y.useEffect(()=>{se.logEventWithStatsig("Cancel Subscription Modal Shown","chatgpt_cancel_subscription_modal_shown")}),y.useEffect(()=>{v&&!j&&se.logEventWithStatsig("Cancel Subscription Modal with Cancellation Promo Shown","chatgpt_cancel_subscription_modal_with_cancellation_promo_shown",{promo_id:v.campaign_id})},[v,j]);const D=r!=null&&r.active_until?new Date(r.active_until).toLocaleDateString(o.locale,{year:"numeric",month:"short",day:"numeric"}):"";return e.jsx(je,{testId:"modal-cancel-subscription",type:"success",isOpen:t,onClose:s,size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:v?o.formatMessage({id:"cancelSubscriptionModal.promo.title",defaultMessage:"Are you sure you want to cancel?"}):d?E?o.formatMessage({id:"cancelSubscriptionModal.hasDiscount.titleImmediate",defaultMessage:"End {planName} access immediately?"},{planName:f}):o.formatMessage({id:"cancelSubscriptionModal.hasDiscount.title",defaultMessage:"End {planName} access on {expirationDate}?"},{planName:f,expirationDate:D}):o.formatMessage({id:"cancelSubscriptionModal.title",defaultMessage:"Subscription Cancellation"}),removePopoverStyling:!0,children:j?e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsx(Ge,{})}):e.jsxs("div",{className:"p-5",children:[v?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-token-text-secondary",children:v.summary}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-xl border border-solid p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-token-text-primary text-base font-semibold",children:v.title})}),e.jsx("p",{className:"text-token-text-secondary mt-1 text-base",children:e.jsx(g,{id:"cancelPromoModal.regularPrice",defaultMessage:"For {discountedFormattedCost}, you'll get {planName} for {numPeriods} months.",values:{discountedFormattedCost:w,planName:f,numPeriods:C}})})]}),e.jsx("div",{children:e.jsx(ys,{title:o.formatMessage({id:"cancelPromoModal.promo.getOffer",defaultMessage:"Get offer"}),color:S,onClick:n})})]}),e.jsx("p",{className:"text-token-text-secondary mt-8",children:E?e.jsx(g,{id:"cancelSubscriptionModal.promo.canceledSubscriptionBottomImmediate",defaultMessage:"To cancel your subscription, just confirm your choice below. Your access to {planName} features will end immediately.",values:{planName:f}}):e.jsx(g,{id:"cancelSubscriptionModal.promo.canceledSubscriptionBottom",defaultMessage:"To cancel your subscription, just confirm your choice below. Your access to {planName} features will end on {expirationDate}.",values:{planName:f,expirationDate:D}})})]}):e.jsx("p",{className:"text-token-text-secondary",children:d?E?e.jsx(g,{id:"cancelSubscriptionModal.hasDiscount.canceledSubscriptionImmediate",defaultMessage:"If you cancel your subscription now, your {planName} access will end immediately. Any discounts applied will be removed, and can't be used again.",values:{planName:f}}):e.jsx(g,{id:"cancelSubscriptionModal.hasDiscount.canceledSubscription",defaultMessage:"If you cancel your subscription now, your {planName} access will end on {expirationDate}. Any discounts applied will be removed, and can't be used again.",values:{planName:f,expirationDate:D}}):e.jsx(g,{id:"cancelSubscriptionModal.canceledSubscription",defaultMessage:"Your {planName} subscription will be canceled but will remain active until the end of your billing period on {expirationDate}.",values:{planName:f,expirationDate:D}})}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(ys,{title:o.formatMessage({id:"cancelSubscriptionModal.goBack",defaultMessage:"Go back"}),color:x.get("cancellation_modal_go_back_button_color","secondary"),onClick:s}),e.jsx(ys,{title:o.formatMessage({id:"cancelSubscriptionModal.cancel",defaultMessage:"Cancel subscription"}),color:x.get("cancellation_modal_cancel_button_color","danger"),onClick:()=>{se.logEventWithStatsig("Cancel Subscription Modal Confirmation Button Clicked","chatgpt_cancel_subscription_modal_confirmation_button_clicked"),_()},loading:c.isPending})]})]})})}const Fo=te({cancelSuccess:{id:"cancelSubscriptionModal.cancelSuccess",defaultMessage:"Your subscription has been canceled."},cancelFailure:{id:"cancelSubscriptionModal.cancelFailure",defaultMessage:"Something went wrong while canceling your subscription."}});function Bh({currentAccount:t}){const s=tt(),n=t.data.subscriptionStatus.planType,a=t.willRenewSubscription(),o=n===Pe.PLUS?e.jsx(g,{id:"hLd2Ar",defaultMessage:"Upgrade plan"}):n===Pe.PRO&&a?e.jsx(g,{id:"/4GuNx",defaultMessage:"Change plan"}):e.jsx(g,{id:"4Bc5M+",defaultMessage:"View plans"}),i=()=>{se.logEventWithStatsig("Subscription Settings Change Plan Button Clicked","chatgpt_subscription_settings_change_plan_button_clicked"),jn(s,"Subscription settings manage button")};return e.jsx(Se.Item,{icon:lu,onClick:i,children:o})}function Fh({currentAccount:t,onCancelSubscriptionClick:s}){const n=ee(),a=t.willRenewSubscription(),o=t.getDaysUntilSubscriptionCancelAt(),i=t.willPlanChange(),l=St(n,"468168202"),r=A(),c=me();if(!a||o!=null||i)return null;const m=l.get("should_cancel_button_take_user_to_stripe",!1);return e.jsxs(e.Fragment,{children:[e.jsx(Se.Separator,{}),e.jsx(Se.Item,{color:"danger",icon:ji,onClick:async()=>{if(se.logEventWithStatsig("Subscription Settings Cancel Subscription Button Clicked","chatgpt_subscription_settings_cancel_subscription_button_clicked"),m)try{const u=await re.safeGet("/payments/customer_portal",{intercomEventOnError:"fetch-error:customer_portal:get"});location.href=u.url}catch(u){c.warning(r.formatMessage(Ye.accountErrorWarning),{hasCloseButton:!0})}else s()},children:e.jsx(g,{id:"icBiUI",defaultMessage:"Cancel Subscription"})})]})}function Gh(t,s){return t===Pe.FREE||t===Pe.PLUS&&s===Pe.PRO||t===Pe.GO&&[Pe.PRO,Pe.PLUS].includes(s)}function Uh({currentAccount:t,onRenewSubscriptionClick:s}){const n=t.data.subscriptionStatus.planType,a=Ks(n.toLowerCase()),o=t.willRenewSubscription(),i=t.getDaysUntilSubscriptionCancelAt(),l=t.getNextPlanType();if(!(!o||i!=null||l&&Gh(l,n)))return null;const c=()=>{se.logEventWithStatsig("Subscription Settings Renew Plan Button Clicked","chatgpt_subscription_settings_renew_plan_button_clicked"),s()};return e.jsx(Se.Item,{icon:cu,onClick:c,children:e.jsx(g,{id:"L6UCRY",defaultMessage:"Renew {planName} Plan",values:{planName:a}})})}function Wh({currentAccount:t,onCancelSubscriptionClick:s,onRenewSubscriptionClick:n}){return e.jsxs(Se.Root,{children:[e.jsx(Lc,{children:e.jsxs(F,{color:"secondary",children:[e.jsx(g,{id:"g3k4Zt",defaultMessage:"Manage"}),e.jsx(ir,{className:"ms-1 -me-1 h-4 w-4"})]})}),e.jsx(Se.Portal,{children:e.jsxs(Se.Content,{align:"end",size:"auto",sideOffset:2,children:[e.jsx(Bh,{currentAccount:t}),e.jsx(Uh,{currentAccount:t,onRenewSubscriptionClick:n}),e.jsx(Fh,{currentAccount:t,onCancelSubscriptionClick:s})]})})]})}function Hh({currentAccount:t}){const s=t.subscriptionAnalyticsParams,a=t.getLastActiveSubscription().purchase_origin_platform,o=me(),i=A(),l=async()=>{se.logEvent("Account Portal: Click Manage My Subscription",s);try{const c=await re.safeGet("/payments/customer_portal",{intercomEventOnError:"fetch-error:customer_portal:get"});se.logEvent("Account Portal: Navigating to Account Portal",s),location.href=c.url}catch(c){o.warning(i.formatMessage(Ye.accountErrorWarning),{hasCloseButton:!0})}},r=(c,m)=>e.jsx(cs,{to:c,target:"_blank",className:"inline-block",children:e.jsx(F,{onClick:()=>se.logEvent(m,s),color:"secondary",children:e.jsx(g,{id:"eQL80k",defaultMessage:"Manage"})})});switch(a){case Cs.CHATGPT_IOS:case Cs.SORA_IOS:return r(Rc,"Account Portal: Click iOS Manage Subscription");case Cs.MOBILE_ANDROID:return r(Ic,"Account Portal: Click Android Manage Subscription");default:if(t.hasCustomerObject())return e.jsx(F,{onClick:l,color:"secondary",children:e.jsx(g,{id:"eQL80k",defaultMessage:"Manage"})});break}}function Go(t,s){return t==null||s==null?!1:Math.abs(t-s)<=1}function Jr({title:t,subtitle:s,features:n,ctaButton:a,planChangeMessage:o,planCanceledMessage:i,scheduledCancelMessage:l,discountMessage:r,renewMessage:c,manageButton:m,paymentSection:u,showSyncedFeatures:d}){return e.jsxs(e.Fragment,{children:[e.jsxs(Q,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"",children:t}),e.jsxs("div",{className:"text-token-text-secondary",children:[o,r,c,i]})]}),a||m]}),l&&e.jsx("div",{className:"mt-3 rounded-md border border-yellow-200 bg-yellow-50 px-3 py-2 text-sm text-yellow-800 dark:border-yellow-800 dark:bg-yellow-950 dark:text-yellow-200",children:l}),e.jsxs("div",{className:yt("mt-2 rounded-lg bg-gray-50 p-4 dark:bg-gray-900",d&&"bg-transparent px-0 dark:bg-transparent"),children:[e.jsx("span",{className:yt("text-sm font-semibold",d&&"inline-block pb-4"),children:s}),d?e.jsx(Vi,{advertisedFeatures:n,pricingModalColumnType:Fn.standard,isWebRedesign:!0,isTeamColumn:!1}):n==null?void 0:n.map((f,h)=>e.jsxs("div",{className:"mt-2 flex justify-start gap-1 text-xs",children:[e.jsx(Oc,{className:"icon-xs mt-0.5"}),e.jsx("span",{children:e.jsx(g,ne(p({},f.label),{values:{link:x=>{var b;return e.jsx(cs,{className:"underline",target:"_blank",rel:"noreferrer",to:(b=f.label.link)!=null?b:"",children:x})},article:x=>{var b;return e.jsx(cs,{className:"underline",target:"_blank",rel:"noreferrer",to:(b=f.label.article)!=null?b:"",children:x})},modelName:"GPT‑4o"}}))})]},h))]})]}),u]})}function zh(){y.useEffect(()=>{se.logEventWithStatsig("Subscription Settings Shown: Free","chatgpt_subscription_settings_shown_free")},[]);const t=ee(),s=ia(),n=ia({isWebRedesign:!0}),a=bn({isWebRedesign:!0}),o=tt(),i=Ac(t),l=St(t,"313799188").get("sync_advertised_features",!1),r=i?s.advertisedFeatures:_g(),c=i?n.advertisedFeatures:a.advertisedFeatures;return e.jsx(Jr,{title:e.jsx(g,ne(p({},Ye.upgradeFromFreeTitle),{values:{planName:i?"Go":"Plus"}})),subtitle:e.jsx(g,p({},Ye.upgradeFromFreeDescription)),features:l?c:r,showSyncedFeatures:l,ctaButton:e.jsx(F,{onClick:()=>{se.logEventWithStatsig("Subscription Settings Free to Plus Upgrade Button Clicked","chatgpt_subscription_settings_free_to_plus_upgrade_button_clicked"),jn(o,"Subscription settings manage button Free to Plus")},color:"primary",children:e.jsx(g,p({},Ye.upgradeButton))})})}function Zn({currentAccount:t,onCancelSubscriptionClick:s,onRenewSubscriptionClick:n,pricingPlan:a,showSyncedFeatures:o}){var T,k,O,R,H,V,$,q,G,B,Y;y.useEffect(()=>{se.logEventWithStatsig("Subscription Settings Shown","chatgpt_subscription_settings_shown")},[]);const i=A(),l=t.planType,r=t.willRenewSubscription(),c=t.willPlanChange(),m=t.getDaysUntilSubscriptionCancelAt(),u=t.getDaysUntilPlanChanges(),d=t.getDaysUntilPlanRenews(),f=t.getDaysUntilPlanDiscountExpires(),h=t.getNextPlanType(),x=t.data.subscriptionStatus.discount,b=(k=(T=t.data.subscriptionStatus.discount)==null?void 0:T.discount_start_in_num_periods)!=null?k:0,M=Ks(l.toLowerCase()),v=h?Ks(h.toLowerCase()):null,{advertisedFeatures:j}=a,{costTitle:S,currencySymbol:C}=vr(a,(O=t.data.subscriptionStatus.billingCurrency)!=null?O:"USD"),w=c&&u&&v?e.jsx("span",{children:e.jsx(g,ne(p({},Ye.planChangeMessage),{values:{planName:v,date:Qt(u,i)}}))}):null,E=r&&!c&&x&&b>0?((R=t.data.subscriptionStatus.discount)==null?void 0:R.discount_type)===ro.PERCENTAGE?e.jsx("span",{children:e.jsx(g,ne(p({},Ye.discountPercentFutureMessage),{values:{discountPercent:t.data.subscriptionStatus.discount.amount,planName:M,numPeriods:b}}))}):C.sign.defaultMessage&&e.jsx("span",{children:e.jsx(g,ne(p({},Ye.discountFixedFutureMessage),{values:{discountFixed:(H=t.data.subscriptionStatus.discount)==null?void 0:H.amount,planName:M,numPeriods:b,currencySymbol:C.sign.defaultMessage.toString()}}))}):r&&!c&&d&&x&&(((V=t.data.subscriptionStatus.discount)==null?void 0:V.discount_type)===ro.PERCENTAGE?Go(f,d)&&(S!=null&&S.defaultMessage)&&(($=C==null?void 0:C.sign)!=null&&$.defaultMessage)?e.jsx("span",{children:e.jsx(g,ne(p({},Ye.discountPercentMessageWithNewPrice),{values:{discountPercent:t.data.subscriptionStatus.discount.amount,planName:M,date:Qt(d,i),newPrice:S.defaultMessage.toString(),currencySymbol:C.sign.defaultMessage.toString()}}))}):e.jsx("span",{children:e.jsx(g,ne(p({},Ye.discountPercentMessage),{values:{discountPercent:t.data.subscriptionStatus.discount.amount,planName:M,date:Qt(d,i)}}))}):Go(f,d)&&(S!=null&&S.defaultMessage)&&((q=C==null?void 0:C.sign)!=null&&q.defaultMessage)?e.jsx("span",{children:e.jsx(g,ne(p({},Ye.discountFixedMessageWithNewPrice),{values:{discountFixed:(G=t.data.subscriptionStatus.discount)==null?void 0:G.amount,planName:M,date:Qt(d,i),newPrice:S.defaultMessage.toString(),currencySymbol:C.sign.defaultMessage.toString()}}))}):((B=C==null?void 0:C.sign)==null?void 0:B.defaultMessage)&&e.jsx("span",{children:e.jsx(g,ne(p({},Ye.discountFixedMessage),{values:{discountFixed:(Y=t.data.subscriptionStatus.discount)==null?void 0:Y.amount,planName:M,date:Qt(d,i),currencySymbol:C.sign.defaultMessage.toString()}}))})),_=r&&!c&&d&&!x?e.jsx("span",{children:e.jsx(g,ne(p({},Ye.renewMessage),{values:{date:Qt(d,i)}}))}):null,D=!r&&!c&&d?e.jsx("span",{children:e.jsx(g,ne(p({},Ye.planCanceledMessage),{values:{date:Qt(d,i)}}))}):null,N=m&&m!==d?e.jsx("span",{children:e.jsx(g,ne(p({},Ye.scheduledCancelMessage),{values:{date:Qt(m,i)}}))}):null,P=e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(g,ne(p({},Ye.managePaymentTitle),{values:{planName:M}})),e.jsx(cs,{target:"_blank",to:Pc,onClick:Pg,className:"text-token-link text-xs",children:e.jsx(g,p({},Ye.billingHelp))},"row-plus-plan-help-link")]}),e.jsx(Hh,{currentAccount:t})]})});return e.jsx(Jr,{title:e.jsx(g,ne(p({},Ye.subscriptionTitle),{values:{planName:M}})),subtitle:e.jsx(g,ne(p({},Ye.thanksMessage),{values:{planName:M}})),features:j!=null?j:[],manageButton:e.jsx(Wh,{currentAccount:t,onCancelSubscriptionClick:s,onRenewSubscriptionClick:n}),planChangeMessage:w,discountMessage:E,renewMessage:_,planCanceledMessage:D,scheduledCancelMessage:N,paymentSection:P,showSyncedFeatures:o})}function Qt(t,s){const n=Dc(new Date,t);return new Intl.DateTimeFormat(s.locale,{year:"numeric",month:"short",day:"numeric"}).format(n)}const Ye=te({subscriptionTitle:{id:"settingsModal.subscriptionTitle",defaultMessage:"ChatGPT {planName}"},managePaymentTitle:{id:"settingsModal.managePaymentTitle",defaultMessage:"Payment"},billingHelp:{id:"settingsModal.billingHelp",defaultMessage:"Need help with billing?"},accountErrorWarning:{id:"settingsModal.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},planChangeMessage:{id:"settingsModal.planChangeMessage",defaultMessage:"Your plan changes to {planName} on {date}"},planCanceledMessage:{id:"settingsModal.planCanceledMessage",defaultMessage:"Your plan will be canceled on {date}"},scheduledCancelMessage:{id:"settingsModal.scheduledCancelMessage",defaultMessage:"Your paid plan will downgrade to ChatGPT free on {date}"},renewMessage:{id:"settingsModal.renewMessage",defaultMessage:"Your plan auto-renews on {date}"},discountPercentMessage:{id:"settingsModal.discountPercentMessage",defaultMessage:"You've got {discountPercent}% off {planName}. Your discounted plan renews on {date}."},discountPercentMessageWithNewPrice:{id:"settingsModal.discountPercentMessageWithNewPrice",defaultMessage:"You've got {discountPercent}% off {planName}. Your plan renews (at {currencySymbol}{newPrice}/month) on {date}."},discountFixedMessage:{id:"settingsModal.discountFixedMessage",defaultMessage:"You've got {currencySymbol}{discountFixed} off {planName}. Your discounted plan renews on {date}."},discountFixedMessageWithNewPrice:{id:"settingsModal.discountFixedMessageWithNewPrice",defaultMessage:"You've got {currencySymbol}{discountFixed} off {planName}. Your plan renews (at {currencySymbol}{newPrice}/month) on {date}."},discountPercentFutureMessage:{id:"settingsModal.discountPercentFutureMessage",defaultMessage:"Your {discountPercent}% off {planName} discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}."},discountFixedFutureMessage:{id:"settingsModal.discountFixedFutureMessage",defaultMessage:"Your {currencySymbol}{discountFixed} off {planName} discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}."},thanksMessage:{id:"settingsModal.thanksMessage",defaultMessage:"Thanks for subscribing to ChatGPT {planName}! Your {planName} plan includes:"},paymentMethodMessage:{id:"settingsModal.paymentMethodMessage",defaultMessage:"Payment method"},upgradeFromFreeTitle:{id:"settingsModal.upgradeFromFreeTitle",defaultMessage:"Get ChatGPT {planName}"},upgradeFromFreeDescription:{id:"settingsModal.upgradeFromFreeDescription",defaultMessage:"Get everything in Free, and more."},upgradeButton:{id:"settingsModal.upgradeButton",defaultMessage:"Upgrade"}});function Kh({onClose:t,onBackButtonClicked:s,account:n}){const a=A(),o=me(),[i,l]=y.useState(!1);y.useEffect(()=>{se.logEventWithStatsig("Claim Subscription Cancellation Promotion Modal Shown","chatgpt_claim_subscription_cancellation_promotion_modal_shown")},[]);const r=()=>{se.logEventWithStatsig("Claim Subscription Cancellation Promotion Modal Close","chatgpt_claim_subscription_cancellation_promotion_modal_close"),t()},c=()=>{se.logEventWithStatsig("Claim Subscription Cancellation Promotion Modal Back Button Clicked","chatgpt_claim_subscription_cancellation_promotion_modal_back_button_clicked"),s()},m=du(n.id),{cancellationPromoMetadata:u,isCancelPromoLoading:d}=$r(n.id,n.isEligibleForCancellationPromotion()),{data:f,isError:h,isLoading:x}=uu(n.id,void 0,void 0,u==null?void 0:u.campaign_id);h&&(o.warning(a.formatMessage({id:"cancelPromoClaimModal.errorFetchingPreview",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),t());const b=Ee(),M=async w=>{var E;se.logEventWithStatsig("Claim Subscription Cancellation Promotion Pay Now Button Clicked","chatgpt_claim_subscription_cancellation_promotion_modal_pay_now_button_clicked"),l(!0);try{await m.mutateAsync({accountId:n.id,updatedPromoId:w.campaign_id}),o.success(a.formatMessage({id:"cancelPromoClaimModal.successfullyClaimedPromotion",defaultMessage:"You've successfully claimed your promotion"}),{hasCloseButton:!0}),se.logEventWithStatsig("Claim Subscription Cancellation Promotion Success","chatgpt_claim_subscription_cancellation_promotion_success",{promo_id:w.campaign_id}),b.invalidateQueries(ca()),b.invalidateQueries({queryKey:["cancellationPromotion"]}),t()}catch(_){se.logEventWithStatsig("Claim Subscription Cancellation Promotion Error","chatgpt_claim_subscription_cancellation_promotion_error",{promo_id:w.campaign_id}),((E=_==null?void 0:_.detail)==null?void 0:E.error_type)==="card_declined"?o.warning(a.formatMessage({id:"cancelPromoClaimModal.cardDeclinedError",defaultMessage:"Payment error. Your card may be invalid or authentication may be needed."}),{hasCloseButton:!0}):o.warning(a.formatMessage({id:"cancelPromoClaimModal.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),dt.addError(_),t()}finally{l(!1)}},{goCost:v,plusCost:j,proCost:S,currencySymbol:C}=Ag(n.mustGetSubscriptionBillingCurrency("GlobalSettingsModal"));return e.jsx(je,{testId:"modal-subscription-claim-cancel-promo",type:"success",isOpen:!0,onClose:r,size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:a.formatMessage({id:"cancelPromoClaimModal.title",defaultMessage:"Confirm changes"}),removePopoverStyling:!0,children:x||d?e.jsx(Vh,{}):u!=null&&u.campaign_id&&f?e.jsx(Qh,{account:n,promoData:u,previewData:f,plusCost:j,goCost:v,proCost:S,currencySymbol:C,onBack:c,handleUpdate:()=>M(u),isUpdating:i}):null})}function Vh(){return e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsx(Ge,{})})}function qh({subscriptionPreviewdata:t,promoData:s,intl:n,planName:a,currencySymbol:o}){var l,r;const i=(r=(l=s.duration)==null?void 0:l.num_periods)!=null?r:1;return[{adjustmentMessage:e.jsx(g,{id:"cancelPromoClaimModal.adjustment",defaultMessage:"Adjustment"}),proratedCreditMessage:e.jsx(g,{id:"cancelPromoClaimModal.proratedCredit",defaultMessage:"-{currencySign}{adjustment}",values:{currencySign:n.formatMessage(o.sign),adjustment:(-t.negative_line_item_total/100).toFixed(2)}}),proratedCreditInfoMessage:e.jsx(g,{id:"cancelPromoClaimModal.proratedCreditInfo",defaultMessage:"Prorated credit for the remainder of your {planName} subscription",values:{planName:a}}),value:t.negative_line_item_total},{adjustmentMessage:e.jsx(g,{id:"cancelPromoClaimModal.discount",defaultMessage:"Discount"}),proratedCreditMessage:e.jsx(g,{id:"cancelPromoClaimModal.discountAmount",defaultMessage:"-{currencySign}{discount}",values:{currencySign:n.formatMessage(o.sign),discount:(-t.discount_amount/100).toFixed(2)}}),proratedCreditInfoMessage:"percentage"in s.discount?e.jsx(g,{id:"cancelPromoClaimModal.percentageDiscountInfo",defaultMessage:"{discountPercentage}% off for {numPeriods, plural, one {1 month} other {{numPeriods} months}}",values:{discountPercentage:s.discount.percentage,numPeriods:i}}):e.jsx(g,{id:"cancelPromoClaimModal.valueDiscountInfo",defaultMessage:"{valueOff} off for {numPeriods, plural, one {1 month} other {{numPeriods} months}}",values:{valueOff:n.formatNumber(s.discount.value,{style:"currency",currency:s.discount.currency_code,minimumFractionDigits:0,maximumFractionDigits:2}),numPeriods:i}}),value:t.discount_amount}]}function Yh({subscriptionPreviewData:t,promoData:s,planName:n,planCost:a,currencySymbol:o}){var r,c;const i=A(),l=(c=(r=s.duration)==null?void 0:r.num_periods)!=null?c:1;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(g,{id:"cancelPromoClaimModal.subscription",defaultMessage:"ChatGPT {planName} for {numPeriods, plural, one {1 month} other {{numPeriods} months}}",values:{planName:n,numPeriods:l}})}),e.jsx("span",{className:"font-semibold",children:e.jsx(g,{id:"cancelPromoClaimModal.subscriptionCost",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:i.formatMessage(o.sign),totalCost:(t.positive_line_item_total_excluding_tax/100).toFixed(2)}})})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(g,{id:"cancelPromoClaimModal.billingCycle",defaultMessage:"One-time payment, then {currencySign}{planCost}/month after {numPeriods, plural, one {1 month} other {{numPeriods} months}}",values:{currencySign:i.formatMessage(o.sign),planCost:i.formatMessage(a),numPeriods:l}})})]})}function Qh({account:t,promoData:s,previewData:n,plusCost:a,goCost:o,proCost:i,currencySymbol:l,onBack:r,handleUpdate:c,isUpdating:m}){const u=A(),d=t.data.subscriptionStatus.planType,f=Ks(d.toLowerCase()),h=d===Pe.PRO?i:d===Pe.GO?o:a,x=qh({subscriptionPreviewdata:n,promoData:s,intl:u,planName:f,currencySymbol:l});return e.jsxs("div",{className:"p-6",children:[e.jsx(Yh,{subscriptionPreviewData:n,promoData:s,planName:f,planCost:h,currencySymbol:l}),x.filter(b=>b.value!==0).map((b,M)=>e.jsx(Dg,{adjustmentMessage:b.adjustmentMessage,proratedCreditMessage:b.proratedCreditMessage,proratedCreditInfoMessage:b.proratedCreditInfoMessage},M)),e.jsx("hr",{className:"mt-4 mb-4"}),e.jsx(Og,{data:n,currencySymbol:l}),n.default_payment_method&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"mt-4 mb-4"}),e.jsx(Lg,{defaultPaymentMethod:n.default_payment_method})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(ys,{title:u.formatMessage({id:"cancelPromoClaimModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:r}),e.jsx(ys,{title:u.formatMessage({id:"cancelPromoClaimModal.payNow",defaultMessage:"Pay now"}),color:"primary",onClick:c,loading:m})]})]})}function $h(){const t=jr();return y.useCallback(async()=>{try{await Xi(t.billingDetails,t.plusAnalyticsParams)}catch(s){}},[t])}function Jh({eligibleProgramName:t}){const{data:s}=rt({queryKey:["referrals-enrollment-details"],queryFn:()=>Zt.getEnrollmentDetails()}),n=s==null?void 0:s.enrollment_details;return n?e.jsx(Xh,{enrollmentDetails:n}):e.jsx(Zh,{eligibleProgramName:t})}function Xh({enrollmentDetails:t}){const s=ee(),n=us(s),a=A(),o=me(),i=$h(),l=n==null?void 0:n.hasPaidSubscription(),r=na(t.referral_code),{discount:c}=t.referral_metadata,m=wa(a,c.value||0,c.currency_code),u=t.earned_amount.split(".")[0],d=t.remaining_amount.split(".")[0];return e.jsxs(Q,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(g,{id:"OR4iav",defaultMessage:"Referrals"}),e.jsxs("div",{className:"flex h-8 items-center gap-2",children:[e.jsx("button",{onClick:()=>{_a(r,o).then(()=>{o.success(a.formatMessage({id:"1TiBkD",defaultMessage:"Copied referral link to clipboard"}))})},children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm",children:r}),e.jsx(gu,{className:"icon-sm"})]})}),!l&&t.is_eligible_to_redeem?e.jsx("div",{className:"ms-1 flex flex-1 justify-end",children:e.jsx(F,{color:"secondary",onClick:i,children:e.jsx(g,{id:"u1eO00",defaultMessage:"Get free Plus"})})}):null]})]}),e.jsxs("div",{className:"border-token-border-default my-4 flex rounded-md border bg-gray-50 px-3 py-4 dark:bg-gray-900",children:[e.jsx(ea,{className:"border-token-border-default flex-1 border-e",info:t.num_referred,label:e.jsx(g,{id:"i/bF9u",defaultMessage:"Friends referred"})}),e.jsx(ea,{className:"flex-1",info:u,label:e.jsx(g,{id:"iA319g",defaultMessage:"Earned"})}),e.jsx(ea,{className:"border-token-border-default flex-1 border-s",info:d,label:e.jsx(g,{id:"wY0EA3",defaultMessage:"Remaining"})})]}),e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(g,ne(p({},ls.referralLinkModalDisclaimer),{values:{discount:m}}))})]})}function ea({className:t,info:s,label:n}){return e.jsxs("div",{className:yt("flex flex-col items-center gap-0.5",t),children:[e.jsx("div",{className:"text-base font-normal",children:s}),e.jsx("div",{className:"text-token-text-secondary text-xs",children:n})]})}function Zh({eligibleProgramName:t}){const s=A(),n=tt();return t?e.jsx(Q,{children:e.jsx(it,{label:s.formatMessage({id:"OR4iav",defaultMessage:"Referrals"}),buttonLabel:s.formatMessage({id:"LZKJO9",defaultMessage:"Get my referral link"}),onClick:()=>{n(mu(t))}})}):null}function ex(){const t=ee(),s=oe(t,"550432558"),{data:n}=rt({queryKey:["is-eligible-for-referrals"],queryFn:()=>Zt.getIsEligibleForReferrals(),enabled:s}),a=s?n==null?void 0:n.eligible_program_name:null;return a?e.jsx(Jh,{eligibleProgramName:a}):null}function tx(){return new URL(window.location.href).searchParams.get("disable_mfa")!=null}function sx({onClose:t,onConfirm:s}){const n=A();return e.jsx(fu,{isOpen:!0,title:n.formatMessage(Uo.disableConfimationTitle),confirmText:n.formatMessage(Uo.disable),onConfirm:s,onClose:t,primaryButtonColor:"danger",children:e.jsx("div",{children:e.jsx(g,{id:"postSigninDisableConfimationModal.description.1",defaultMessage:"Are you sure you want to disable multi-factor authentication? You will no longer need to provide a verification code when you log into your account."})})})}const Uo=te({disableConfimationTitle:{id:"mfaDisableConfirmationModal.title.0",defaultMessage:"Disable multi-factor authentication (MFA)"},disable:{id:"mfaDisableConfirmationModal.button",defaultMessage:"Disable MFA"}});function nx(){const[t,s]=Bc(),n=A();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,p({},dn.theme))}),e.jsx(tr,{value:t,onValueChange:s,options:[{label:n.formatMessage(dn.system),value:"system"},{label:n.formatMessage(dn.dark),value:"dark"},{label:n.formatMessage(dn.light),value:"light"}]})]})}const dn=te({theme:{id:"settingsModal.theme",defaultMessage:"Theme"},system:{id:"settingsModal.system",defaultMessage:"System"},dark:{id:"settingsModal.dark",defaultMessage:"Dark"},light:{id:"settingsModal.light",defaultMessage:"Light"}});async function ax(){var n;let t;"keyboard"in navigator&&(t=navigator.keyboard);const s=(n=await(t==null?void 0:t.getLayoutMap()))!=null?n:new Map;return t!=null&&t.lock&&await(t==null?void 0:t.lock()),new Promise(a=>{const o=new Set,i=new Set;let l=!0;const r=h=>{const x=Wo(h,s);x&&!o.has(x)&&(o.add(x),i.add(x))},c=h=>{const x=Wo(h,s);x&&o.delete(x),o.size===0&&l&&d()},m=h=>{l&&(u(),a(void 0))},u=()=>{window.removeEventListener("keydown",r),window.removeEventListener("keyup",c),window.removeEventListener("mousedown",m),window.removeEventListener("click",m),window.removeEventListener("blur",m),clearTimeout(f),t!=null&&t.unlock&&(t==null||t.unlock()),l=!1},d=()=>{u();const h=ox(Array.from(i));a(Xr({webKeys:h}))};window.addEventListener("keydown",r),window.addEventListener("keyup",c),window.addEventListener("mousedown",m),window.addEventListener("click",m),window.addEventListener("blur",m);const f=setTimeout(()=>{l&&(u(),a(void 0))},1e4)})}function ox(t){return t.toSorted((s,n)=>{const a=Object.values(Cn).indexOf(s),o=a===-1?Number.MAX_SAFE_INTEGER:a,i=Object.values(Cn).indexOf(n),l=i===-1?Number.MAX_SAFE_INTEGER:i;return o===l?s.charCodeAt(0)-n.charCodeAt(0):o-l})}const ix=t=>/^[a-zA-Z]$/.test(t);function Wo(t,s){var o;const n=(o=s.get(t.code))!=null?o:t.key;let a;return K[t.key]?a=K[t.key]:ix(n)?a=n.toUpperCase():a=n,a}function Xr(t){return t.webKeys?(t.electronAcceleratorKeys=t.webKeys.map(lx),t.electronAcceleratorString=Ho(t.electronAcceleratorKeys)):t.electronAcceleratorKeys?(t.webKeys=t.electronAcceleratorKeys.map(rx),t.electronAcceleratorString=Ho(t.electronAcceleratorKeys)):t={webKeys:[],electronAcceleratorKeys:[],electronAcceleratorString:void 0},t}function rx(t){var s;return(s=Cn[t])!=null?s:t}function lx(t){var s;return(s=dx[t])!=null?s:t}function Zr(t){const s=new Set(Object.keys(el)),n=t.filter(o=>!s.has(o)).length,a=t.length-n;return n===1&&a>0}const cx=t=>{const s=t.split("+");return Zr(s)?s:void 0},Ho=t=>Zr(t)?t.join("+"):void 0,el={Meta:K.Meta,CmdOrCtrl:K.Mod,CommandOrControl:K.Mod,Ctrl:K.Control,Control:K.Control,Cmd:K.Mod,Command:K.Mod,Alt:K.Alt,Option:K.Alt,AltGr:K.AltGraph,Shift:K.Shift,Super:K.Super},Cn=ne(p({},el),{Capslock:K.CapsLock,Space:K.Space,Tab:K.Tab,Numlock:K.NumLock,Scrolllock:K.ScrollLock,Backspace:K.Backspace,Delete:K.Delete,Insert:K.Insert,Return:K.Enter,Enter:K.Enter,Home:K.Home,End:K.End,PageUp:K.PageUp,PageDown:K.PageDown,Up:K.ArrowUp,Down:K.ArrowDown,Left:K.ArrowLeft,Right:K.ArrowRight,Esc:K.Escape,Escape:K.Escape,VolumeUp:K.AudioVolumeUp,VolumeDown:K.AudioVolumeDown,VolumeMute:K.AudioVolumeMute,MediaNextTrack:K.MediaTrackNext,MediaPreviousTrack:K.MediaTrackPrevious,MediaStop:K.MediaStop,MediaPlayPause:K.MediaPlayPause,PrintScreen:K.PrintScreen,numadd:K.Add,numsub:K.Subtract,nummult:K.Multiply,numdiv:K.Divide,numdec:K.Decimal,F1:K.F1,F2:K.F2,F3:K.F3,F4:K.F4,F5:K.F5,F6:K.F6,F7:K.F7,F8:K.F8,F9:K.F9,F10:K.F10,F11:K.F11,F12:K.F12,F13:K.F13,F14:K.F14,F15:K.F15,F16:K.F16,F17:K.F17,F18:K.F18,F19:K.F19,F20:K.F20}),dx=Object.fromEntries(Object.entries(Cn).map(([t,s])=>[s,t]));async function ux(){var t;await((t=vs)==null?void 0:t.checkForUpdates())}function gx(){var n;const[t,s]=y.useState(!1);return e.jsx(e.Fragment,{children:e.jsx(Q,{children:e.jsx(it,{label:e.jsx(g,p({},xt.updatesSettingLabel)),disabled:t,buttonLabel:t?e.jsx(g,p({},xt.updateInProgressButtonLabel)):e.jsx(g,p({},xt.updateButtonLabel)),onClick:async()=>{try{s(!0),await ux()}catch(a){dt.addError(new Error("Sidetron Settings: Error checking for updates"),{cause:a})}finally{s(!1)}},description:e.jsx(g,ne(p({},xt.updateSettingDescription),{values:{version:(n=Fc(Hc()))!=null?n:"Unknown"}}))})})})}const mx=async()=>{var a;let t="";const s=await((a=vs)==null?void 0:a.getSettingValue("companionWindowShortcut"));typeof s=="string"?t=s:dt.addError(new Error("Sidetron Settings: No companion chat hotkey found over IPC"));const n=cx(t);return Promise.resolve(Xr({electronAcceleratorKeys:n}))};function fx(){const[t,s]=y.useState(!1),[n,a]=y.useState(void 0);return y.useEffect(()=>{(async()=>{const i=await mx();a(i)})()},[]),y.useEffect(()=>{var o;(o=vs)==null||o.publish(lo.HOTKEY_RECORDING_STATE,{inProgress:t})},[t]),e.jsx(e.Fragment,{children:e.jsx(Q,{children:e.jsx(it,{label:e.jsx(g,p({},xt.companionChatHotkeyLabel)),disabled:n===void 0||t,buttonLabel:t?e.jsx(g,p({},xt.companionChatHotkeyRecordingLabel)):n?e.jsx(pu,{binding:n.webKeys,className:"text-xs"}):e.jsx(g,p({},xt.companionChatHotkeyLoadingLabel)),onClick:async()=>{s(!0);const o=await ax();o?o.electronAcceleratorString?(a(o),vs&&(vs.publish(lo.DESKTOP_SETTING_CHANGED,{setting:"companionWindowShortcut",value:o.electronAcceleratorString}),dt.addAction("Sidetron Settings: User recorded a new hotkey: ".concat(o.electronAcceleratorString)))):dt.addError(new Error("Sidetron Settings: Invalid companion chat hotkey registered: ".concat(o))):dt.addAction("Sidetron Settings: User did not record a hotkey"),s(!1)}})})})}function px(){return e.jsx(e.Fragment,{children:e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,p({},xt.textSizeLabel))}),e.jsxs("div",{className:"flex shrink-0 gap-2",children:[e.jsx(F,{color:"secondary",onClick:Gc,"data-testid":"text-size-decrease",icon:hu,className:"aspect-square p-0"}),e.jsx(F,{color:"secondary",onClick:Uc,"data-testid":"text-size-increase",icon:Na,className:"aspect-square p-0"}),e.jsx(F,{color:"secondary",onClick:Wc,"data-testid":"text-size-reset",children:e.jsx(g,p({},xt.textSizeResetButtonLabel))})]})]})})})}function hx({href:t,label:s,stateLabel:n,testId:a}){return e.jsx("a",{className:"w-full","data-testid":a,href:t,target:"_blank",rel:"noreferrer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:s}),e.jsxs("div",{className:"me-3 -mb-1 flex items-center",children:[n&&e.jsx("div",{className:"me-2 -mt-0.5",children:n}),e.jsx(rs,{className:"icon-sm"})]})]})})}function xx(){const[t,s]=y.useState(!1),n=A(),a=async()=>{var i;const o=await((i=vs)==null?void 0:i.getSettingValue("autoLaunch"));s(!!o)};return y.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("focus",o),()=>{window.removeEventListener("focus",o)}},[]),e.jsx(e.Fragment,{children:e.jsx(Q,{children:e.jsx(hx,{href:"ms-settings:startupapps",label:e.jsx(g,p({},xt.autoLaunchLabel)),stateLabel:t?n.formatMessage(xt.autoLaunchOnLabel):n.formatMessage(xt.autoLaunchOffLabel)})})})}const xt=te({autoLaunchLabel:{id:"desktopAppSettingsModal.autoLaunchLabel",defaultMessage:"Launch at Login"},autoLaunchOnLabel:{id:"desktopAppSettingsModal.autoLaunchOnLabel",defaultMessage:"On"},autoLaunchOffLabel:{id:"desktopAppSettingsModal.autoLaunchOffLabel",defaultMessage:"Off"},updatesSettingLabel:{id:"desktopAppSettingsModal.updatesSettingLabel",defaultMessage:"App updates"},updateButtonLabel:{id:"desktopAppSettingsModal.updateButtonLabel",defaultMessage:"Check for updates"},updateInProgressButtonLabel:{id:"desktopAppSettingsModal.updateInProgressButtonLabel",defaultMessage:"Checking for updates..."},updateSettingDescription:{id:"desktopAppSettingsModal.updateSettingDescription",defaultMessage:"Current version: {version}"},companionChatHotkeyLabel:{id:"desktopAppSettingsModal.companionChatHotkeyLabel",defaultMessage:"Companion window hotkey"},companionChatHotkeyLoadingLabel:{id:"desktopAppSettingsModal.companionChatHotkeyLoadingLabel",defaultMessage:"Loading..."},companionChatHotkeyRecordingLabel:{id:"desktopAppSettingsModal.companionChatHotkeyRecordingLabel",defaultMessage:"Recording..."},textSizeLabel:{id:"desktopAppSettingsModal.textSizeLabel",defaultMessage:"Text size"},textSizeResetButtonLabel:{id:"desktopAppSettingsModal.textSizeResetButtonLabel",defaultMessage:"Reset"}});function bx({enabled:t=!1}={}){return rt({queryKey:["mfaPushAuthDevices"],queryFn:()=>re.safeGet("/accounts/mfa_push_auth_devices"),enabled:t})}const yx=()=>{const{openSettings:t}=ds();return e.jsx("button",{onClick:()=>t(ye.Account),children:e.jsx(rr,{className:"icon-sm"})})};function Mx({gizmoId:t,gizmoName:s,gizmoAvatar:n,canEdit:a,socials:o}){const{data:i,isLoading:l}=va();return l?null:i?e.jsxs(e.Fragment,{children:[a&&t&&e.jsx("span",{className:"absolute end-2 top-2",children:e.jsx(yx,{})}),e.jsx(xu,{src:n,isFirstParty:!1,className:"h-8 w-8"}),e.jsx("div",{className:"text-token-text-primary mt-1 text-center text-sm font-semibold",children:s}),e.jsx(bu,{builderName:i.display_name,builderUrl:i.website_url,socials:o,className:"text-xs"})]}):e.jsx(_s,{type:"info",children:e.jsx(g,{id:"gizmo.builderProfile.unableToLoadProfile",defaultMessage:"Unable to load your builder profile"})})}function Cx(){const t=A(),{data:s,isLoading:n}=va(),a=ee(),o=us(a);return e.jsx(xe,{title:t.formatMessage(et.gizmoTab),children:n?e.jsx("div",{className:"flex justify-center p-6",children:e.jsx(Ge,{})}):s===void 0||o==null?e.jsx(_s,{type:"info",children:e.jsx(g,p({},et.noCreatorProfile))}):e.jsx(jx,{data:s})})}function vx({gizmoName:t,canEdit:s,gizmoAvatar:n}){const a=A(),{openSettings:o}=ds(),{data:i}=va();return i?e.jsxs("div",{className:"bg-token-main-surface-primary relative flex w-full flex-col items-center justify-stretch rounded-lg p-4",children:[e.jsx(Mx,{gizmoAvatar:n,gizmoName:t!=null?t:a.formatMessage(et.placeholderGPT),canEdit:s,socials:[i.socials.linkedin,i.socials.github]}),e.jsx("div",{className:"text-token-text-tertiary absolute end-4 top-3 text-xs",children:s?e.jsx("button",{onClick:()=>{o(ye.Account)},children:e.jsx(rr,{className:"icon-sm"})}):e.jsx(g,p({},et.preview))})]}):null}function Sx(t,s){if(t.website_url&&s.length>0){const n=s.find(a=>a.url===t.website_url);return n?n.hostname:s[0].hostname}else{if(s.length>0)return s[0].hostname;if(t.website_url)return}}function jx({data:t}){const s=A(),n=zc(),a=ee(),o=us(a),i=o==null?void 0:o.isEnterprisey(),l=o==null?void 0:o.isWorkspaceAccount(),r=pt(),c=t.domains.reduce((h,x)=>x.status==="verified"?[...h,{id:x.id,hostname:x.hostname,url:x.hostname}]:h,[]),m=Sx(t,c),u=oe(a,"2256850471"),d=t.name==null||n.isPending,f=e.jsx(Mi,{size:"small",onCheckedChange:h=>{n.mutateAsync({hideName:!h})},disabled:d,checked:!t.hide_name,"aria-label":t.hide_name?s.formatMessage(et.showNameToggle):s.formatMessage(et.hideNameToggle)});return e.jsxs("div",{className:"flex flex-col items-stretch pt-3",children:[e.jsx("div",{className:"mb-2",children:e.jsx(g,p({},et.creatorProfileDescription))}),e.jsx(vx,{canEdit:!1}),e.jsx(Q,{children:e.jsxs("div",{className:"flex flex-col",children:[!t.is_verified&&e.jsxs(_s,{type:"info",children:[e.jsx("div",{children:e.jsx(g,p({},et.creatorProfileUnverifiedDisclaimer))}),e.jsx("div",{children:l?e.jsx(g,p({},et.creatorProfileBusinessUnverifiedDisclaimer)):e.jsx(g,p({},et.creatorProfilePersonalUnverifiedDisclaimer))})]}),t.name&&e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("b",{children:e.jsx(g,p({},et.creatorProfileNameLabel))}),d?e.jsx(ct,{side:"left",label:s.formatMessage(et.linkDisabledTooltip),children:f}):f]}),e.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[e.jsx("span",{children:t.name}),e.jsx(ct,{side:"top",className:"ms-auto",label:s.formatMessage(et.nameSourceReason),children:e.jsx(da,{className:"icon-sm text-token-text-tertiary"})})]})]}),!i&&e.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[e.jsx("hr",{className:"border-token-border-default my-3"}),e.jsx("div",{className:"flex flex-row justify-between",children:e.jsx("b",{children:e.jsx(g,p({},et.creatorProfileLinkHeader))})}),e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-2",children:[e.jsx(yu,{className:"icon-sm"}),e.jsx("div",{children:e.jsx(Mu,{selectedDomain:m,domains:t.domains,verifiedDomains:c,onChangeDomain:h=>{n.mutateAsync({websiteUrl:h})}})})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx(ho,{socialData:t.socials.linkedin,icon:Cu}),e.jsx(ho,{socialData:t.socials.github,icon:vu})]})]}),!i&&r&&r.email&&e.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[e.jsx("hr",{className:"border-token-border-default my-3"}),e.jsx("div",{className:"flex flex-row justify-between",children:e.jsx("b",{children:e.jsx(g,p({},et.creatorProfileEmailHeader))})}),e.jsxs("div",{className:"my-1 flex flex-row items-center space-x-2",children:[e.jsx(Ki,{className:"icon-sm"}),e.jsx("span",{children:r.email})]}),e.jsx(ct,{label:s.formatMessage(et.feedbackEmailTooltip),children:e.jsx(sr,{className:"rounded-xl",id:"receive-support-emails",onChange:h=>{n.mutateAsync({willReceiveSupportEmails:h.currentTarget.checked})},checked:t.will_receive_support_emails,label:s.formatMessage(et.receiveFeedbackEmails)})})]})]})})]})}const et=te({gizmoTab:{id:"settingsModal.gizmoTab",defaultMessage:"GPT builder profile"},creatorProfileDescription:{id:"settingsModal.creatorProfileDescription",defaultMessage:"Personalize your builder profile to connect with users of your GPTs. These settings apply to publicly shared GPTs."},creatorProfileUnverifiedDisclaimer:{id:"settingsModal.createrProfileUnverifiedDisclaimer",defaultMessage:"Complete verification to publish GPTs to everyone."},creatorProfilePersonalUnverifiedDisclaimer:{id:"settingsModal.creatorProfilePersonalUnverifiedDisclaimer",defaultMessage:"Verify your identity by adding billing details or verifying ownership of a public domain name."},creatorProfileBusinessUnverifiedDisclaimer:{id:"settingsModal.creatorProfileBusinessUnverifiedDisclaimer",defaultMessage:"Contact your workspace administrator to set up a builder profile"},creatorProfileNameLabel:{id:"settingsModal.creatorProfileNameLabel",defaultMessage:"Name"},placeholderGPT:{id:"settingsModal.placeholderGPT",defaultMessage:"PlaceholderGPT"},byName:{id:"settingsModal.byName",defaultMessage:"by {name}"},preview:{id:"settingsModal.preview",defaultMessage:"Preview"},noCreatorProfile:{id:"settingsModal.noCreatorProfile",defaultMessage:"Unable to retrieve builder profile"},creatorProfileLinkHeader:{id:"settingsModal.creatorProfileLinkHeader.1",defaultMessage:"Links"},creatorProfileEmailHeader:{id:"settingsModal.creatorProfileEmailHeader.0",defaultMessage:"Email"},nameDisabledTooltip:{id:"settingsModal.nameDisabledTooltip",defaultMessage:"You must have a verified name to enable displaying a name"},linkDisabledTooltip:{id:"settingsModal.linkDisabledTooltip",defaultMessage:"You must have a verified domain to enable displaying a link"},addDomain:{id:"settingsModal.addDomain",defaultMessage:"Verify new domain"},nameSourceReason:{id:"settingsModal.nameSourceReason",defaultMessage:"Name is populated from your billing details"},hideNameToggle:{id:"settingsModal.hideNameToggle",defaultMessage:"Hide your name in your builder profile"},showNameToggle:{id:"settingsModal.showNameToggle",defaultMessage:"Show your name in your builder profile"},hideWebsiteToggle:{id:"settingsModal.hideWebsiteToggle",defaultMessage:"Hide your website in your builder profile"},showWebsiteToggle:{id:"settingsModal.showWebsiteToggle",defaultMessage:"Show your website in your builder profile"},feedbackEmailTooltip:{id:"settingsModal.feedbackEmailTooltip",defaultMessage:"Allow users of your GPTs to send feedback to your ChatGPT login email. Your email will never be shared publicly."},receiveFeedbackEmails:{id:"settingsModal.receiveFeedbackEmails.1",defaultMessage:"Receive feedback emails"}}),tl=["archivedConversations"],_x=30,wx=3;function Nx({conversation:t,elementRef:s,closeParentModal:n}){var d;const a=A(),o=me(),i=Ee(),{mutate:l,isPending:r}=_e({mutationFn:async x=>{var b=x,{conversationId:f}=b,h=Ds(b,["conversationId"]);return re.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:f}},requestBody:h,intercomEventOnError:"fetch-error:conversation:edit"})},onSettled:()=>{i.invalidateQueries({queryKey:[tl]}),oa(i,t.gizmo_id)},onError:()=>{o.danger(ht.deleteFailed,{toastId:"archived_conversations_modal_delete_failed"})}}),[c,m]=y.useState(!1),u="/c/".concat(t.id);return e.jsxs(e.Fragment,{children:[e.jsxs(Me.Row,{disabled:r,children:[e.jsx(Me.Cell,{children:e.jsxs("a",{href:u,rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",ref:s,children:[e.jsx(lr,{className:"icon"}),t.title]})}),e.jsx(Me.Cell,{children:t.create_time!=null?e.jsx(Bn,{value:t.create_time,month:"long",year:"numeric",day:"numeric"}):null}),e.jsx(Me.Cell,{textAlign:"right",children:e.jsxs(Me.Actions,{children:[e.jsx(ct,{label:a.formatMessage(ht.unarchiveConversation),side:"top",children:e.jsx("button",{"aria-label":a.formatMessage(ht.unarchiveConversation),className:"text-token-text-tertiary hover:text-token-text-secondary cursor-pointer text-[18px]",onClick:()=>{l({conversationId:t.id,is_archived:!1})},children:e.jsx(Su,{className:"icon-sm"})})}),e.jsx(ct,{label:a.formatMessage(ht.deleteConversation),side:"top",children:e.jsx("button",{onClick:()=>m(!0),"aria-label":a.formatMessage(ht.deleteConversation),className:"text-token-text-tertiary hover:text-token-text-secondary",children:e.jsx(Ea,{className:"icon-sm"})})})]})})]}),c&&e.jsx(ju,{title:(d=t.title)!=null?d:"",handleDelete:()=>{l({conversationId:t.id,is_visible:!1})},onClose:f=>{m(!1),f!=null&&f.closeParentModal&&n()}})]})}function Tx({onClose:t}){const{data:s,isLoading:n,isError:a,refetch:o,fetchNextPage:i,hasNextPage:l}=jd({queryKey:[tl],queryFn:({pageParam:f})=>re.safeGet("/conversations",{parameters:{query:{offset:f,limit:_x,order:"updated",is_archived:!0}},intercomEventOnError:"fetch-error:conversations:get",authOption:Kc.SendIfAvailable}),initialPageParam:0,getNextPageParam:f=>{var x,b,M;const h=((x=f.offset)!=null?x:0)+((b=f.limit)!=null?b:0);return h<((M=f.total)!=null?M:0)?h:void 0},refetchOnMount:"always"}),r=y.useRef(null),c=y.useCallback(f=>{var h;n||f==null||((h=r.current)==null||h.disconnect(),r.current=new IntersectionObserver(x=>{x[0].isIntersecting&&l&&i()}),r.current.observe(f))},[n,l,i]);y.useEffect(()=>()=>{var f;(f=r.current)==null||f.disconnect()},[]);const m=y.useMemo(()=>{var f;return(f=s==null?void 0:s.pages.flatMap(h=>h.items))!=null?f:[]},[s]),u=A();let d;return n?d=e.jsx("div",{className:"text-token-text-secondary pb-8",children:e.jsx(g,p({},ht.loading))}):a?d=e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 text-red-500",children:e.jsx(g,p({},ht.somethingWentWrong))}),e.jsx("div",{children:e.jsx(F,{color:"secondary",onClick:()=>{o()},children:e.jsx(g,p({},ht.retry))})})]}):m.length===0?d=e.jsx("div",{className:"text-token-text-tertiary pb-8",children:e.jsx(g,p({},ht.noArchivedConversations))}):d=e.jsxs(Me.Root,{className:"max-h-[28rem]",size:"compact",children:[e.jsxs(Me.Header,{children:[e.jsx(Me.HeaderCell,{children:e.jsx(g,p({},ht.name))}),e.jsx(Me.HeaderCell,{children:e.jsx(g,p({},ht.dateCreated))}),e.jsx(Me.HeaderCell,{})]}),e.jsx(Me.Body,{children:m.map((f,h)=>e.jsx(Nx,{conversation:f,elementRef:h===m.length-wx?c:void 0,closeParentModal:t},f.id))})]}),e.jsx(je,{testId:"modal-archived-conversations",isOpen:!0,onClose:t,size:"custom",className:"max-w-5xl",type:"success",title:u.formatMessage(ht.title),showCloseButton:!0,children:d})}const ht=te({name:{id:"archivedConversationsModal.name",defaultMessage:"Name"},dateCreated:{id:"archivedConversationsModal.dateCreated",defaultMessage:"Date created"},loading:{id:"archivedConversationsModal.loading",defaultMessage:"Loading..."},somethingWentWrong:{id:"archivedConversationsModal.somethingWentWrong",defaultMessage:"Something went wrong..."},retry:{id:"archivedConversationsModal.retry",defaultMessage:"Retry"},noArchivedConversations:{id:"archivedConversationsModal.noArchivedConversations",defaultMessage:"You have no archived conversations."},title:{id:"archivedConversationsModal.title",defaultMessage:"Archived Chats"},unarchiveConversation:{id:"archivedConversationsModal.unarchiveConversation",defaultMessage:"Unarchive conversation"},deleteConversation:{id:"archivedConversationsModal.deleteConversation",defaultMessage:"Delete conversation"},deleteFailed:{id:"archivedConversationsModal.deleteFailed",defaultMessage:"Deleting failed"}});function kx({disabledTools:t,onDisabledToolsChanged:s}){var b;y.useEffect(()=>{se.logEvent("User Context GPT-4 Capabilities Shown")},[]);const n=ee(),a=us(n),o=(b=a==null?void 0:a.isEnterprisey())!=null?b:!1,i=!co(xs.BrowsingAvailable)&&o,l=!oe(n,"934056609"),r=A(),c=M=>{const v=t.includes(M)?t.filter(j=>j!==M):[...t,M];s(v)},m=Vc(),u=!co(xs.Canvas)&&o;var d;m!=null&&m.includes(xs.SearchTool)&&!m.includes(xs.SearchToolHoldout)?d=Is({tool:kt.BROWSER,label:r.formatMessage({id:"userContextModal.tools.web",defaultMessage:"Web search"}),disabledTooltipLabel:r.formatMessage({id:"4WldgK",defaultMessage:"Web search is disabled by your organization"}),description:r.formatMessage({id:"userContexModal.tools.webSearchTooltip",defaultMessage:"Let ChatGPT automatically search the web for answers."}),enabled:!t.includes(kt.BROWSER)&&!i,handleToolClick:c,disabled:i}):d=Is({tool:kt.BROWSER,label:r.formatMessage({id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),disabledTooltipLabel:r.formatMessage({id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}),description:r.formatMessage({id:"userContexModal.tools.browserTooltip",defaultMessage:"Let ChatGPT browse the internet to find answers."}),enabled:!t.includes(kt.BROWSER)&&!i,handleToolClick:c,disabled:i});const f=Is({tool:kt.PYTHON,label:r.formatMessage({id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),description:r.formatMessage({id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Let ChatGPT execute code using Code Interpreter."}),enabled:!t.includes(kt.PYTHON),handleToolClick:c}),h=Is({tool:kt.CANMORE,label:r.formatMessage({id:"FW2C7Y",defaultMessage:"Canvas"}),description:r.formatMessage({id:"zPYZ4h",defaultMessage:"Collaborate with ChatGPT on text and code."}),enabled:!t.includes(kt.CANMORE),handleToolClick:c}),x=Is({tool:kt.ADVANCED_VOICE,label:r.formatMessage({id:"eHCnkb",defaultMessage:"Advanced voice"}),description:r.formatMessage({id:"OrvjWP",defaultMessage:"Have more natural conversations in voice mode."}),enabled:!t.includes(kt.ADVANCED_VOICE),handleToolClick:c});return e.jsxs(e.Fragment,{children:[d,f,!u&&h,l&&x]})}function Is({tool:t,label:s,disabledTooltipLabel:n,description:a,enabled:o,handleToolClick:i,disabled:l}){return e.jsx(Q,{children:e.jsx(Ke,{label:s,enabled:o,onChange:()=>i(t),toggleTooltip:l&&n,description:a,disabled:l})})}const Ex=()=>_d({queryKey:["traitPills"],queryFn:async()=>{try{const t=await re.safeGet("/user_system_message_trait_pills");return t?Array.isArray(t)?t:[]:[]}catch(t){return[...Px.map(s=>({key:s,label:s,description:zo[s].defaultMessage||""})),...Ax.map(s=>({key:s,label:s,description:zo[s].defaultMessage||""}))]}}}),Px=["Chatty","Witty","Opinionated","StraightShooting","GenZ","Encouraging","Skeptical","ForwardThinking"],Ax=["Poetic","Respectful","Humble","Professional","Corporate","Direct","Silly","Pragmatic","Chill","OutsideTheBox"],zo=te({Chatty:{id:"userContextModal.chattySentence",defaultMessage:"Be talkative and conversational."},Witty:{id:"userContextModal.wittySentence",defaultMessage:"Use quick and clever humor when appropriate."},StraightShooting:{id:"userContextModal.straightShootingSentence",defaultMessage:"Tell it like it is; don't sugar-coat responses."},Encouraging:{id:"userContextModal.encouragingSentence",defaultMessage:"Use an encouraging tone."},GenZ:{id:"userContextModal.genZSentence",defaultMessage:"Talk like a member of Gen Z."},Skeptical:{id:"userContextModal.skepticalSentence",defaultMessage:"Adopt a skeptical, questioning approach."},ForwardThinking:{id:"userContextModal.forwardThinkingSentence",defaultMessage:"Take a forward-thinking view."},Poetic:{id:"userContextModal.poeticSentence",defaultMessage:"Use a poetic, lyrical tone."},Opinionated:{id:"userContextModal.opinionatedSentence",defaultMessage:"Readily share strong opinions."},Respectful:{id:"userContextModal.respectfulSentence",defaultMessage:"Always be respectful."},Humble:{id:"userContextModal.humbleSentence",defaultMessage:"Be humble when appropriate."},Professional:{id:"userContextModal.professionalSentence",defaultMessage:"Use a formal, professional tone."},Silly:{id:"userContextModal.sillySentence",defaultMessage:"Be playful and goofy."},Direct:{id:"userContextModal.directSentence",defaultMessage:"Get right to the point."},Pragmatic:{id:"userContextModal.pragmaticSentence",defaultMessage:"Be practical above all."},Corporate:{id:"userContextModal.corporateSentence",defaultMessage:"Respond with corporate jargon."},Chill:{id:"userContextModal.chillSentence",defaultMessage:"Keep it relaxed and easygoing."},OutsideTheBox:{id:"userContextModal.outsideTheBoxSentence",defaultMessage:"Be innovative and think outside the box."}});function Dx(){return rt(ne(p({},Ex()),{select:t=>{const s=Math.ceil(t.length/2-1);return{firstSet:t.slice(0,s),secondSet:t.slice(s)}}}))}function Ko(t,s,n){const a=t.length-2,o=t.filter(c=>!n.includes(c.key)),i=s.filter(c=>!n.includes(c.key)),l=Math.min(o.length,a),r=Math.max(0,a-o.length);return{visibleTraits:[...o.slice(0,l),...i.slice(0,r)],hiddenTraits:[...o.slice(l),...i.slice(r)]}}function Ox({onSelect:t,selectedTraits:s,setSelectedTraits:n,disablePills:a=!1}){const o=A(),{data:i,isLoading:l}=Dx(),[r,c]=y.useState(!1),[m,u]=y.useState([]),[d,f]=y.useState([]);if(y.useEffect(()=>{if(i){const{visibleTraits:M,hiddenTraits:v}=Ko(i.firstSet,i.secondSet,[]);u(M),f(v)}},[i]),l)return e.jsx(Ge,{});if(!i)return null;let h=[];h=m;const x=M=>{if(!s.includes(M.key)&&(n(v=>[...v,M.key]),t(M.description),!r&&(u(v=>v.filter(j=>j.key!==M.key)),d.length>0))){const[v,...j]=d;u(S=>[...S,v]),f(j)}},b=()=>{if(r){const{visibleTraits:M,hiddenTraits:v}=Ko(i.firstSet,i.secondSet,s);u(M),f(v)}else u([...i.firstSet,...i.secondSet]),f([]);c(M=>!M)};return e.jsxs("ul",{className:"flex flex-wrap gap-x-1 gap-y-2",children:[h.map(M=>s.includes(M.key)?null:e.jsx("li",{children:e.jsx(F,{size:"small",color:"secondary",className:"text-token-text-secondary px-2.5 py-1 text-xs font-normal",onClick:()=>x(M),disabled:a,children:M.label})},M.label)),h.length>0&&!r&&d.length>0&&e.jsx("li",{children:e.jsx(F,{size:"small",color:"secondary","aria-label":o.formatMessage(ve.traitsReset),className:"text-token-text-secondary h-7 w-7 rounded-full",onClick:b,disabled:a,children:e.jsx(Pn,{className:"icon-sm"})})})]})}function Lx({onSuccess:t,onError:s}){const n=Ee();return _e({mutationFn:({userContext:a})=>vi(a),onSettled:(a,o)=>{const i=["userContext"];a!==null&&!o?n.setQueryData(i,a):n.invalidateQueries({queryKey:i})},onSuccess:t,onError:s})}const Ix=100;function Rx(){var c,m,u;const t=A(),s=Ft(is.isBusinessWorkspace),n=(c=Ft(is.workspaceId))!=null?c:void 0,{data:a,isLoading:o}=Qc(n),{data:i}=jt(he.HiveReferencedInInternalKnowledge),l=mt();return o?e.jsx("div",{className:"flex justify-center",children:e.jsx(Ge,{})}):(s?((m=a==null?void 0:a.beta_settings.hive)!=null?m:!1)&&((u=a==null?void 0:a.beta_settings.hive_knowledge_retrieval)!=null?u:!1):!0)?e.jsx(xe,{title:t.formatMessage(ve.RecordModeTitle),learnMoreHref:"https://help.openai.com/en/articles/11487532-chatgpt-record",children:e.jsx(Q,{children:e.jsx(Ke,{label:t.formatMessage(ve.recordModeToggleLabel),enabled:!!i,onChange:d=>l.mutate({setting:he.HiveReferencedInInternalKnowledge,value:d}),description:e.jsx(g,p({},ve.recordModeDescription))})})}):null}function Bx({disabledTools:t,localUserContext:s,setLocalUserContext:n,userContextData:a}){var c,m;const o=A(),[i,l]=y.useState(!1),r=y.useRef(null);return e.jsx(xe,{title:e.jsxs("button",{onClick:()=>{l(u=>!u),i||requestAnimationFrame(()=>{r.current&&r.current.scrollIntoView({behavior:"smooth",block:"end"})})},"aria-label":o.formatMessage(i?ve.advancedClose:ve.advancedOpen),"data-testid":"advanced-toggle","aria-expanded":i,className:"flex items-center justify-between gap-1",children:[e.jsx(g,p({},ve.advanced)),i?e.jsx(Fu,{className:"icon-sm"}):e.jsx(ir,{className:"icon-sm"})]}),noBorder:!i,children:i&&e.jsxs("div",{className:"mt-2",children:[e.jsx(kx,{disabledTools:(m=(c=s.disabledTools)!=null?c:t)!=null?m:[],onDisabledToolsChanged:u=>$t({userContextData:a,updates:{disabledTools:u},localUserContext:s,setLocalUserContext:n})}),e.jsx("span",{ref:r})]})})}function Fx({userContextData:t,localUserContext:s,setLocalUserContext:n,onSubmit:a,selectedTraits:o,setSelectedTraits:i,hasModError:l}){var E,_,D,N,P,T,k;const r=ee(),c=A(),m=St(r,"1922342873").get("can-select-personality",!1),u=js(O=>O.autoHighlightNicknameInput),d=(E=s.enabled)!=null?E:!!(t!=null&&t.enabled),{personalityTypeMessage:f,nameUserMessage:h,roleUserMessage:x,traitsModelMessage:b,otherUserMessage:M}=hr(t),[v,j]=y.useState(0),[S,C]=y.useState(!0);y.useEffect(()=>{const O=setTimeout(()=>{C(!1)},1e3),R=setInterval(()=>{j(H=>(H+1)%qn.length)},5500);return()=>{clearInterval(R),clearTimeout(O)}},[]);const{data:w}=Ou();return e.jsxs(e.Fragment,{children:[e.jsxs(xe,{title:c.formatMessage(ve.customizeTitle),children:[e.jsx(Q,{children:e.jsx(Ke,{label:e.jsx(g,p({},ve.enablePersonalizationRowLabel)),description:e.jsx(g,p({},ve.enablePersonalizationRowDescription)),enabled:d,onChange:O=>{$t({userContextData:t,updates:{enabled:O},localUserContext:s,setLocalUserContext:n}),se.logEventWithStatsig("Enable Customization Toggled","chatgpt_enable_customization_toggled",{enabled:O})},"aria-label":d?c.formatMessage(ve.disableToggleLabel):c.formatMessage(ve.enableToggleLabel)})}),m&&e.jsx(Q,{children:e.jsx(Lu,{label:c.formatMessage(ve.settingsPersonalitySelectionRowTitle),description:c.formatMessage(ve.settingsPersonalitySelectionRowDescription),selector:e.jsx(Iu,{enabled:d,selectedModel:(_=s.personalityTypeMessage)!=null?_:f,models:w,onSelect:O=>$t({userContextData:t,updates:{personalityTypeMessage:O},localUserContext:s,setLocalUserContext:n})})})}),e.jsxs(tn,{title:c.formatMessage(ve.customInstructions),className:"pt-7",children:[e.jsx(sn,{onSubmit:a,name:"traits_model_message",disabled:!d,hasModError:l==="traits_model_message",value:(D=s.traitsModelMessage)!=null?D:b,placeholder:c.formatMessage(ve.customInstructionsPlaceholder),onChange:O=>$t({userContextData:t,updates:{traitsModelMessage:O.target.value},localUserContext:s,setLocalUserContext:n}),size:"sm",showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0,dynamicHeight:!0}),e.jsx(Ox,{onSelect:O=>{var R;$t({userContextData:t,updates:{traitsModelMessage:"".concat((R=s.traitsModelMessage)!=null?R:b," ").concat(O).trim()},localUserContext:s,setLocalUserContext:n})},selectedTraits:o,setSelectedTraits:i,disablePills:!d})]})]}),e.jsxs(xe,{title:c.formatMessage(ve.aboutYouSectionTitle),children:[e.jsx(tn,{title:c.formatMessage(ve.customizeNamePlaceholder),className:"pt-5",children:e.jsx(sn,{onSubmit:a,disabled:!d,name:"name_user_message",hasModError:l==="name_user_message",value:(N=s.nameUserMessage)!=null?N:h,placeholder:c.formatMessage(ve.customizeName),onChange:O=>$t({userContextData:t,updates:{nameUserMessage:O.target.value},localUserContext:s,setLocalUserContext:n}),size:"sm",showCharacterCount:!1,autoHighlight:u})}),e.jsx(tn,{title:c.formatMessage(ve.occupationInputTitle),className:"pt-7",children:e.jsxs("div",{className:"relative overflow-clip",children:[!((P=s.roleUserMessage)!=null?P:x)&&e.jsx(ja,{mode:"wait",children:e.jsx(Hi.span,{variants:Ru,initial:S?!1:"initial",animate:"animate",exit:"exit",className:"pointer-events-none absolute start-[0.81rem] top-[0.55rem] text-sm text-gray-400",children:c.formatMessage(Bu[qn[v]])},qn[v])}),e.jsx(sn,{onSubmit:a,name:"role_user_message",disabled:!d,hasModError:l==="role_user_message",value:(T=s.roleUserMessage)!=null?T:x,placeholder:"",onChange:O=>$t({userContextData:t,updates:{roleUserMessage:O.target.value},localUserContext:s,setLocalUserContext:n}),size:"sm",showCharacterCount:!1})]})}),e.jsx(tn,{title:c.formatMessage(ve.moreDetailsInputTitle),className:"pt-7",children:e.jsx(sn,{onSubmit:a,disabled:!d,name:"other_user_message",hasModError:l==="other_user_message",value:(k=s.otherUserMessage)!=null?k:M,placeholder:c.formatMessage(ve.customizeOtherPlaceholder),onChange:O=>$t({userContextData:t,updates:{otherUserMessage:O.target.value},localUserContext:s,setLocalUserContext:n}),size:"sm",showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0,dynamicHeight:!0})})]})]})}function Gx(){"use forget";var Va,qa;const[t,s]=y.useState(!1),n=y.useCallback(()=>{if(typeof window<"u"){const fe=document.getElementById("memory-modal");fe&&fe.scrollIntoView({block:"start"})}s(!0)},[]),a=A(),o=_u(),i=cr(),{isLoading:l,data:r}=Ci(!0),c=mt(),m=dr(),{data:u}=wu(void 0,!1,o),d=ee(),f=ur(),h=gr(),x=Nu();Tu(),ku();const b=Eu(),M=Pu(),v=mr(),j=fr(d),{isLoading:S}=jt(he.Sunshine),{isLoading:C}=jt(he.Moonshine),{mutate:w,isPending:E}=mt(!0),{mutate:_,isPending:D}=mt(!0);mt(!0);const N=us(d),P=N==null?void 0:N.hasPlusFeatures(),k=St(d,"684023316",{disableExposureLog:!0}).get("memory_almost_full_threshold",80),V=(((Va=u==null?void 0:u.memoryFullPct)!=null?Va:0)>=k?St(d,"684023316").get("upsell_variant","control"):"control")!=="control",$=oe(d,"1900515849"),G=St(d,"1704793646").get("full_name_llm",!1),B=pt(),Y=me(),X=tt(),Z=oe(d,"1804926979")&&oe(d,"3365913332"),[pe,ce]=y.useState(null),[le,ae]=y.useState([]),[ie,ue]=y.useState(p({},pr));y.useEffect(()=>{var fe,Tt;if(!(typeof window>"u"))try{((fe=window.sessionStorage)==null?void 0:fe.getItem(xo))==="true"&&((Tt=window.sessionStorage)==null||Tt.removeItem(xo),n())}catch(ns){}},[n]),y.useEffect(()=>{const fe=()=>{n()};return window.addEventListener("personalization:show-memories-modal",fe),()=>window.removeEventListener("personalization:show-memories-modal",fe)},[n]);const{isPending:U,mutate:J}=Lx({onSuccess:fe=>{Bs.setCookie(Fs.GreetingName,Yc(fe,B,G)),window.dispatchEvent(new Event("refreshGreeting")),Y.success(a.formatMessage({id:"diZzkj",defaultMessage:"Personalization settings updated for future conversations"}))},onError:fe=>{var Tt,ns,Ya;return((Tt=fe.response)==null?void 0:Tt.reason)==="content_policy"&&((ns=fe.response)!=null&&ns.field)?ce((Ya=fe.response)==null?void 0:Ya.field):Y.danger(a.formatMessage({id:"userContextModal.saveError",defaultMessage:"Failed to update settings"}),{loggingTitle:"Failed to update settings",toastId:"user_context_modal"}),fe}}),{personalityTypeMessage:Oe,nameUserMessage:Ae,roleUserMessage:Le,traitsModelMessage:Qe,otherUserMessage:$e,disabledTools:W,enabled:z}=hr(r),{aboutUserMessage:de,aboutModelMessage:De,nameUserMessage:Ie,roleUserMessage:We,traitsModelMessage:Re,otherUserMessage:qe,disabledTools:be,enabled:He,personalityTypeMessage:Ze}=ie,Wn=y.useMemo(()=>[Ie,We,Re,qe].some(fe=>Au(fe!=null?fe:"")),[Ie,We,Re,qe]),Ha=y.useMemo(()=>[{local:Ie,server:Ae},{local:We,server:Le},{local:Re,server:Qe},{local:qe,server:$e},{local:Ze,server:Oe}].some(({local:fe,server:Tt})=>fe!==void 0&&fe!==Tt)||be!==void 0&&!qc(be,W)||He!==void 0&&He!==z,[Ae,Le,Qe,$e,Oe,Ie,We,Re,qe,Ze,be,W,He,z]),za=y.useCallback(()=>{if(!U){ce(null);const fe={aboutUserMessage:de!=null?de:"",aboutModelMessage:De!=null?De:"",nameUserMessage:Ie!=null?Ie:"",roleUserMessage:We!=null?We:"",traitsModelMessage:Re!=null?Re:"",otherUserMessage:qe!=null?qe:"",disabledTools:be!=null?be:[],enabled:!!He,personalityTypeMessage:Ze!=null?Ze:""},Tt={name:Ae,role:Le,traits:Qe,other:$e,traitPillsSelected:le},ns={name:fe.nameUserMessage,role:fe.roleUserMessage,traits:fe.traitsModelMessage,other:fe.otherUserMessage,personality:fe.personalityTypeMessage,traitPillsSelected:le};se.logEvent("User Context Save Customize ChatGPT",{previousState:Tt,newState:ns}),Vs.logEvent("chatgpt_user_context_save_custom_instructions",void 0,{previousState:JSON.stringify(Tt),newState:JSON.stringify(ns)}),J({userContext:fe})}},[U,de,De,Ie,We,Re,qe,be,He,Ze,Ae,Le,Qe,$e,le,J]),Ka=y.useCallback(()=>{if(Wn){Y.danger(a.formatMessage(ve.messageLimitError,{limit:Du}),{duration:4,hasCloseButton:!0,loggingTitle:"Message limit error",toastId:"user_context_modal",loggingDescription:ve.messageLimitError.defaultMessage});return}za()},[a,Wn,za,Y]);return y.useEffect(()=>{se.logEventWithStatsig("User Context Custom Instructions Modal Opened","chatgpt_user_context_custom_instructions_modal_opened",{location:"personalization_settings"})},[]),l?e.jsx("div",{className:"flex justify-center p-6",children:e.jsx(Ge,{})}):e.jsxs(e.Fragment,{children:[e.jsx(Fx,{userContextData:r,localUserContext:ie,setLocalUserContext:ue,onSubmit:Ka,selectedTraits:le,setSelectedTraits:ae,hasModError:pe}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"memory-modal"}),e.jsxs(xe,{noBorder:!x,title:a.formatMessage(ve.memoryTitle),learnMoreHref:"https://help.openai.com/en/articles/8590148-memory-faq",headerTrailingContent:e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(F,{color:"secondary",onClick:()=>{se.logEventWithStatsig("Manage Memories Button Clicked","chatgpt_manage_memories_button_clicked_settings"),s(!0)},size:"small",children:e.jsx(g,p({},ve.manageButton))}),V&&!P&&e.jsx(F,{onClick:()=>{se.logEventWithStatsig("Memories Upgrade Button Clicked","chatgpt_memories_upgrade_button_clicked_settings"),jn(X,"chatgpt_memories_upgrade_button")},size:"small",children:e.jsx(g,p({},ve.upgradeButton))})]}),children:[!x&&e.jsxs("div",{className:"border-token-border-light flex flex-col gap-[2px] border-b pb-2",children:[e.jsx(im,{memoryFullPct:u==null?void 0:u.memoryFullPct,showInfoLabel:!1,onManageMemories:()=>{s(!0)}}),e.jsx("div",{className:"text-token-text-tertiary my-1.5 text-xs",children:((qa=u==null?void 0:u.memoryFullPct)!=null?qa:0)<Ix?P?e.jsx(g,{id:"SrHwDd",defaultMessage:"Once memory is full, responses may feel less personalized. Manage existing memories to free up space."}):e.jsx(g,{id:"eczLio",defaultMessage:"Once memory is full, responses may feel less personalized. Upgrade to expand memory, or manage existing memories."}):P?e.jsx(g,{id:"ho9xyz",defaultMessage:"New memories can't be saved, so responses may feel less personalized. Manage existing memories to free up space."}):e.jsx(g,{id:"s+OVoX",defaultMessage:"New memories can't be saved, so responses may feel less personalized. Upgrade to expand memory, or manage existing memories."})})]}),e.jsxs(Q,{children:[e.jsx(Ke,{label:a.formatMessage(ve.toggleLabel),enabled:o,disabled:(m==null?void 0:m[he.Sunshine])===!0,isLoading:S||E,onChange:fe=>{w({setting:he.Sunshine,value:fe},{onSuccess:()=>{se.logEventWithStatsig("Personalization Settings Saved Memories ".concat(fe?"Enabled":"Disabled"),"chatgpt_personalization_settings_saved_memories_".concat(fe?"enabled":"disabled")),!fe&&o?(b&&M&&_({setting:he.Moonshine,value:!1}),h&&f&&c.mutate({setting:he.MemoryInSearch,value:!1})):fe&&b&&_({setting:he.Moonshine,value:!0})}})}}),e.jsx(Ca,{children:e.jsx(g,p({},ve.exampleDescription))})]}),o&&b&&e.jsx(Q,{children:e.jsx(Ke,{label:a.formatMessage({id:"2qTSAN",defaultMessage:"Reference chat history"}),enabled:M,isLoading:C||D,onChange:fe=>{se.logEventWithStatsig("Personalization Settings Reference Recent Conversations ".concat(fe?"Enabled":"Disabled"),"chatgpt_personalization_settings_reference_recent_conversations_".concat(fe?"enabled":"disabled")),_({setting:he.Moonshine,value:fe})},disabled:!b||(m==null?void 0:m[he.Moonshine])===!0,description:P?e.jsx(g,{id:"poYymi",defaultMessage:"Let ChatGPT reference all previous conversations when responding."}):e.jsx(g,{id:"kZ8Ljp",defaultMessage:"Let ChatGPT reference recent conversations when responding."})})}),v&&!j&&e.jsx(Q,{children:e.jsx("div",{className:"text-token-text-tertiary pe-12 text-xs",children:e.jsx(g,{id:"iCZODP",defaultMessage:"ChatGPT may use Memory to personalize queries to search providers, such as Bing. {learnMoreLink}",values:{learnMoreLink:e.jsx(ks,{href:"https://help.openai.com/en/articles/9237897-chatgpt-search",className:"underline",children:e.jsx(g,{id:"0M5wS5",defaultMessage:"Learn more"})})}})})}),t&&$?e.jsx(rm,{onClose:()=>s(!1)}):t&&e.jsx(lm,{onClose:()=>s(!1)})]})]}),Z&&e.jsx(Rx,{}),e.jsx(Bx,{disabledTools:W,userContextData:r,localUserContext:ie,setLocalUserContext:ue}),Ha&&e.jsx(Ux,{setLocalUserContext:ue,isMutationLoading:U,onSubmit:Ka,isAnyMessagePastLimit:Wn,hasUnsavedChanges:Ha})]})}function Ux({setLocalUserContext:t,isMutationLoading:s,onSubmit:n,isAnyMessagePastLimit:a,hasUnsavedChanges:o}){return e.jsx("div",{className:"bg-token-main-surface-primary sticky bottom-0 flex min-h-21 items-center justify-end border-t px-4",children:e.jsxs("footer",{className:"flex gap-2",children:[e.jsx(Fe.Button,{onClick:()=>t(pr),children:e.jsx(g,p({},ve.cancel))}),e.jsx(Fe.Button,{loading:s,onClick:n,color:"primary",visuallyDisabled:a,disabled:!o,children:e.jsx(g,p({},ve.save))})]})})}function Wx(t){return re.safeDelete("/share/post/{post_id}",{parameters:{path:{post_id:t}}})}function Hx(){return re.safeDelete("/share/posts/mine")}function zx({limit:t}){return re.safeGet("/share/posts/mine",{parameters:{query:{limit:t}}})}const Gt={sharedConversations:["sharedConversations"],sharedTextdocs:["sharedTextdocs"],sharedPosts:["sharedPosts"]},Be=te({name:{id:"sharedConversationModal.name",defaultMessage:"Name"},dateShared:{id:"sharedConversationModal.dateShared",defaultMessage:"Date shared"},type:{id:"YiHQp6",defaultMessage:"Type"},chatType:{id:"0BR1NF",defaultMessage:"Chat"},canvasType:{id:"AalPA+",defaultMessage:"Canvas"},postType:{id:"UXpwgD",defaultMessage:"Post"},imageType:{id:"i6Dtp1",defaultMessage:"Image"},loading:{id:"sharedConversationModal.loading",defaultMessage:"Loading..."},somethingWentWrong:{id:"sharedConversationModal.somethingWentWrong",defaultMessage:"Something went wrong..."},retry:{id:"sharedConversationModal.retry",defaultMessage:"Retry"},noSharedConversations:{id:"sharedConversationModal.noSharedConversations",defaultMessage:"You have no shared links."},title:{id:"sharedConversationModal.title",defaultMessage:"Shared Links"},goToOriginConversation:{id:"sharedConversationModal.goToOriginConversation",defaultMessage:"View source chat"},deleteSharedLink:{id:"sharedConversationModal.deleteSharedLink",defaultMessage:"Delete shared link"},deleteSharedLinkFailed:{id:"sharedConversationModal.deleteSharedLinkFailed",defaultMessage:"Deleting shared link failed"},deleteAllSharedLinks:{id:"sharedConversationModal.deleteSharedAllConversations",defaultMessage:"Delete all shared links"},deleteAllSharedLinksConfirm:{id:"sharedConversationModal.deleteSharedAllConversationsConfirm",defaultMessage:"Are you sure you want to delete all your shared links?"},deleteAllSharedLinksFailed:{id:"sharedConversationModal.deleteSharedAllConversationsFailed",defaultMessage:"Deleting shared links failed"}});function Kx(){const t=Ee(),s=A(),n=me(),a=xr(!0),{mutate:o}=_e({mutationFn:()=>Promise.allSettled([re.safeDelete("/share/all",{requestBody:{confirm:!0}}),re.safeDelete("/shared_textdocs",{}),a()?Hx():Promise.resolve()]),onSettled:()=>{t.invalidateQueries({queryKey:Gt.sharedConversations}),t.invalidateQueries({queryKey:Gt.sharedTextdocs}),t.invalidateQueries({queryKey:Gt.sharedPosts})},onError:()=>{n.danger(Be.deleteAllSharedLinksFailed,{toastId:"delete_all_shared_links_failed"})}});return e.jsx($c,{side:"bottom",sideOffset:4,triggerButton:e.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-secondary radix-state-open:text-token-text-tertiary dark:radix-state-open:text-gray-400",children:e.jsx(Pn,{className:"icon-sm"})}),children:e.jsx(Se.Item,{onClick:()=>{window.confirm(s.formatMessage(Be.deleteAllSharedLinksConfirm))&&o()},color:"danger",children:e.jsx(g,p({},Be.deleteAllSharedLinks))})})}function Vx(){return re.safeGet("/shared_conversations",{parameters:{query:{order:"created"}}})}function qx(){return rt({queryKey:Gt.sharedConversations,queryFn:Vx,refetchOnMount:"always"})}function Yx(){return rt({queryKey:Gt.sharedTextdocs,queryFn:()=>re.safeGet("/shared_textdocs",{}),refetchOnMount:"always"})}function Qx(){const s=xr(!0)();return rt({queryKey:Gt.sharedPosts,queryFn:()=>zx({limit:1e4}),refetchOnMount:"always",enabled:s,initialData:s?{items:[],cursor:null}:void 0})}const Wa=({conversationId:t,onClickDelete:s})=>{const n=A();return e.jsx(Me.Cell,{textAlign:"right",children:e.jsxs(Me.Actions,{children:[t&&e.jsx(ct,{label:n.formatMessage(Be.goToOriginConversation),side:"top",children:e.jsx("a",{href:Jc(t),target:"_blank",rel:"noreferrer","aria-label":n.formatMessage(Be.goToOriginConversation),className:"text-token-text-tertiary hover:text-token-text-secondary cursor-pointer",children:e.jsx(lr,{className:"icon-sm"})})}),e.jsx(ct,{label:n.formatMessage(Be.deleteSharedLink),side:"top",className:"flex h-fit",children:e.jsx("button",{onClick:s,"aria-label":n.formatMessage(Be.deleteSharedLink),className:"text-token-text-tertiary hover:text-token-text-secondary",children:e.jsx(Ea,{className:"icon-sm"})})})]})})};function $x({sharedConversation:t}){const s=me(),n=Ee(),{mutate:a,isPending:o}=_e({mutationFn:({sharedConversationId:l})=>re.safeDelete("/share/{shared_conversation_id}",{parameters:{path:{shared_conversation_id:l}}}),onSettled:()=>{n.invalidateQueries({queryKey:Gt.sharedConversations})},onError:()=>{s.danger(Be.deleteSharedLinkFailed,{toastId:"delete_shared_link_failed"})}}),i=t.workspace_id!=null?"/share/e/".concat(t.id):"/share/".concat(t.id);return e.jsxs(Me.Row,{disabled:o,children:[e.jsx(Me.Cell,{children:e.jsxs("a",{href:i,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",children:[e.jsx(Hs,{className:"icon-sm shrink-0"}),t.title]})}),e.jsx(Me.Cell,{children:e.jsx(g,p({},Be.chatType))}),e.jsx(Me.Cell,{children:t.create_time!=null?e.jsx(Bn,{value:t.create_time,month:"long",year:"numeric",day:"numeric"}):null}),e.jsx(Wa,{conversationId:t.conversation_id,onClickDelete:()=>a({sharedConversationId:t.id})})]})}function Jx({sharedTextdoc:t}){const{conversation_id:s,shared_textdoc_id:n}=t,a=me(),o=Ee(),{mutate:i,isPending:l}=_e({mutationFn:async({sharedTextdocId:r})=>re.safeDelete("/textdoc/shared/{shared_textdoc_id}",{parameters:{path:{shared_textdoc_id:r}}}),onSettled:()=>{o.invalidateQueries({queryKey:Gt.sharedTextdocs})},onError:()=>{a.danger(Be.deleteSharedLinkFailed,{toastId:"delete_shared_link_failed"})}});return e.jsxs(Me.Row,{disabled:l,children:[e.jsx(Me.Cell,{children:e.jsxs("a",{href:cm(n),target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",children:[e.jsx(Hs,{className:"icon-sm shrink-0"}),t.name]})}),e.jsx(Me.Cell,{children:e.jsx(g,p({},Be.canvasType))}),e.jsx(Me.Cell,{children:t.created_at!=null?e.jsx(Bn,{value:t.created_at,month:"long",year:"numeric",day:"numeric"}):null}),e.jsx(Wa,{conversationId:s,onClickDelete:()=>i({sharedTextdocId:n})})]})}function Xx({sharedPost:t}){var l,r;const s=me(),n=Ee(),{mutate:a,isPending:o}=_e({mutationFn:async({postId:c})=>Wx(c),onSettled:()=>{n.invalidateQueries({queryKey:Gt.sharedPosts})},onError:()=>{s.danger(Be.deleteSharedLinkFailed,{toastId:"delete_shared_post_failed"})}}),i=((r=(l=t.attachments)==null?void 0:l[0])==null?void 0:r.kind)==="media_generation"?Be.imageType:Be.postType;return e.jsxs(Me.Row,{disabled:o,children:[e.jsx(Me.Cell,{children:e.jsxs("a",{href:Gu(t.id),target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",children:[e.jsx(Hs,{className:"icon-sm shrink-0"}),t.text]})}),e.jsx(Me.Cell,{children:e.jsx(g,p({},i))}),e.jsx(Me.Cell,{children:t.posted_at!=null?e.jsx(Bn,{value:t.posted_at*1e3,month:"long",year:"numeric",day:"numeric"}):null}),e.jsx(Wa,{conversationId:void 0,onClickDelete:()=>a({postId:t.id})})]})}function Zx({onClose:t}){const{data:s,isLoading:n,isError:a,refetch:o}=qx(),{data:i,isLoading:l,isError:r,refetch:c}=Yx(),{data:m,isLoading:u,isError:d,refetch:f}=Qx(),h=A();let x;return n||l||u?x=e.jsx("div",{className:"text-token-text-secondary pb-8",children:e.jsx(g,p({},Be.loading))}):r||a||d?x=e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 text-red-500",children:e.jsx(g,p({},Be.somethingWentWrong))}),e.jsx("div",{children:e.jsx(F,{color:"secondary",onClick:()=>{o(),c(),f()},children:e.jsx(g,p({},Be.retry))})})]}):(s==null?void 0:s.total)===0&&(i==null?void 0:i.shared_textdocs.length)===0&&(m==null?void 0:m.items.length)===0?x=e.jsx("div",{className:"text-token-text-tertiary pb-8",children:e.jsx(g,p({},Be.noSharedConversations))}):x=e.jsxs(Me.Root,{className:"max-h-[28rem]",size:"compact",children:[e.jsxs(Me.Header,{children:[e.jsx(Me.HeaderCell,{children:e.jsx(g,p({},Be.name))}),e.jsx(Me.HeaderCell,{children:e.jsx(g,p({},Be.type))}),e.jsx(Me.HeaderCell,{children:e.jsx(g,p({},Be.dateShared))}),e.jsx(Me.HeaderCell,{textAlign:"right",children:e.jsx(Kx,{})})]}),e.jsxs(Me.Body,{children:[s==null?void 0:s.items.map(b=>e.jsx($x,{sharedConversation:b},b.id)),i==null?void 0:i.shared_textdocs.map(b=>e.jsx(Jx,{sharedTextdoc:b},b.shared_textdoc_id)),m==null?void 0:m.items.map(b=>e.jsx(Xx,{sharedPost:b},b.id))]})]}),e.jsx(je,{isOpen:!0,onClose:t,size:"custom",className:"max-w-5xl",type:"success",title:h.formatMessage(Be.title),testId:"modal-shared-conversations",showCloseButton:!0,children:x})}function eb({type:t,className:s}){return t==="computer"?e.jsx(Uu,{className:s}):t==="phone"?e.jsx(zg,{className:s}):e.jsx(Kg,{className:s})}function tb({onClose:t,devices:s}){const n=A();return e.jsxs(je,{isOpen:!0,onClose:t,title:e.jsx("span",{className:"text-heading-3 [font-weight:500]",children:n.formatMessage({id:"trustedDevicesModal.title",defaultMessage:"Trusted Devices"})}),testId:"modal-trusted-devices",className:"max-w-[524px]!",headerClassName:"!p-6",contentClassName:"!px-6 !pt-6 !pb-0",showCloseButton:!0,hasSeparator:!0,modalActionsClassName:"!mt-0",children:[e.jsx("p",{className:"text-xs",children:e.jsx(g,{id:"trustedDevicesModal.description",defaultMessage:"After you sign in, a device becomes trusted. When you log in somewhere new, we'll send a prompt to your trusted devices for approval. To remove a trusted device from this list, just log out. Don't recognize a device? Log out and reach out to support."})}),e.jsx("div",{className:"border-token-border mt-6 border-t"}),e.jsx("ul",{className:"divide-token-border border-token-border divide-y border-b",children:s.map(a=>{var o;return e.jsxs("li",{className:"flex items-center gap-3 py-2",children:[e.jsx("div",{className:"text-token-icon-primary",children:e.jsx(eb,{type:a.device_type})}),e.jsxs("div",{children:[e.jsx("p",{className:"py-0.5 text-xs",children:(o=a.device_name)!=null?o:n.formatMessage({id:"trustedDevicesModal.unknownDeviceName",defaultMessage:"Unknown"})}),(a.last_seen_time!=null||a.device_location)&&e.jsx("p",{className:"text-token-text-secondary py-0.5 text-xs",children:a.device_location?e.jsx(g,{id:"trustedDevicesModal.lastSeen.withLocation",defaultMessage:"Last logged in on {ts, date, short} at {ts, time, short} from {location}",values:{ts:a.last_seen_time?a.last_seen_time*1e3:Date.now(),location:a.device_location}}):e.jsx(g,{id:"trustedDevicesModal.lastSeen.noLocation",defaultMessage:"Last logged in on {ts, date, short} at {ts, time, short}",values:{ts:a.last_seen_time?a.last_seen_time*1e3:Date.now()}})})]})]},a.device_id)})}),e.jsx("div",{className:"border-token-border mt-6 border-t"})]})}const sb=wt(()=>Nt(()=>import("./bplrhpj3p6zcslbb.js"),__vite__mapDeps([11,1,4,2,3,5,12,13]))),sl="https://help.openai.com/en/articles/5722486",nb="https://help.openai.com/en/articles/8400625-voice-mode-faq#h_3839e62d6a";function ab(t){const s=In(t),{data:n}=rt({queryKey:["data-usage-for-training",s==null?void 0:s.accountUserId],queryFn:()=>re.safeGet("/accounts/data_usage_for_training"),enabled:s!=null});return n==null?void 0:n.data_usage_for_training}function ob({account:t,context:s}){if(!t)return null;const n=St(s,"3431098147");return t.isFree()&&n.get("should_show_subscription_settings_to_free",!1)?Pe.FREE:t.isGo()?Pe.GO:t.isPlus()?Pe.PLUS:t.isPro()?Pe.PRO:null}function ib(){const{data:t}=Ns(),s=A(),n=Ft(is.isBusinessWorkspace),[a,o]=y.useState(!1),i=Ft(is.isTeamPlan),l=Ft(is.isEduPlan),{data:r}=jt(he.TrainingAllowed),{data:c}=jt(he.VoiceTrainingAllowed),{data:m}=jt(he.VideoTrainingAllowed),u=mt(),d=dr(),f=ab(t),h=f==="disallowed"?!1:!!r;return e.jsxs(Q,{children:[e.jsx(On,{onClick:()=>o(!0),label:s.formatMessage(L.chatTrainingAllowedToggleLabel),stateLabel:h?s.formatMessage({id:"settingsModal.trainingEnabled",defaultMessage:"On"}):s.formatMessage({id:"settingsModal.trainingDisabled",defaultMessage:"Off"}),testId:"improve-model-open-modal-button"}),a&&e.jsxs(je,{testId:"modal-training-toggle",isOpen:!0,onClose:()=>o(!1),title:s.formatMessage({id:"settingsModal.trainingToggleModalTitle",defaultMessage:"Model improvement"}),type:"success",secondaryButton:e.jsx(F,{color:"secondary",onClick:()=>o(!1),"data-testid":"improve-model-done-button",children:e.jsx(g,{id:"settingsModal.trainingToggleModalDoneButton",defaultMessage:"Done"})}),children:[e.jsx("div",{className:"pb-8",children:e.jsx(Ke,{label:s.formatMessage(L.chatTrainingAllowedToggleLabel),disabled:f==="disallowed"||(d==null?void 0:d[he.TrainingAllowed])===!0,enabled:h,onChange:x=>{u.mutate({setting:he.TrainingAllowed,value:x})},toggleTooltip:n?e.jsx(g,p({},i?L.chatTrainingTeamsTooltip:l?L.chatTrainingEduTooltip:L.chatTrainingEnterpriseTooltip)):null,description:e.jsx(g,ne(p({},L.trainingAllowedDescription),{values:{link:x=>e.jsx("a",{href:sl,target:"_blank",className:"underline",rel:"noreferrer",children:x})}})),testId:"improve-model-toggle"})}),!n&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-token-text-secondary mb-2 text-lg leading-7 font-semibold",children:e.jsx(g,{id:"settingsModal.trainingToggleModalVoiceAndVideoTitle",defaultMessage:"Voice mode"})}),e.jsx("div",{className:"pb-2",children:e.jsx(Ke,{label:s.formatMessage(L.voiceTrainingAllowedLabel),enabled:h?!!c:!1,disabled:!h||(d==null?void 0:d[he.VoiceTrainingAllowed])===!0,onChange:x=>{h&&u.mutate({setting:he.VoiceTrainingAllowed,value:x})}})}),e.jsx(Ke,{label:s.formatMessage(L.videoTrainingAllowedLabel),enabled:h?!!m:!1,disabled:!h||(d==null?void 0:d[he.VideoTrainingAllowed])===!0,onChange:x=>{h&&u.mutate({setting:he.VideoTrainingAllowed,value:x})},description:e.jsx(g,ne(p({},L.voiceAndVideoTrainingDescription),{values:{link:x=>e.jsx("a",{href:nb,target:"_blank",className:"underline",rel:"noreferrer",children:x})}}))})]})]})]})}const rb=()=>{var Ae;const t=ee(),s=A(),n=td(),a=zt(),{pathname:o}=a,i=tt(),{closeSettings:l,currentTab:r,openSettings:c}=ds(),m=sd(),u=nd(),d=ad(),f=!1,h=!1,x=ts(),b=od(),M=id(),v=ya(),[j,S]=y.useState(m);y.useEffect(()=>{S(m)},[m]);const[C,w]=y.useState(f),[E,_]=y.useState(h),{data:D}=Ns(),N=D!=null?rd(D):!1,P=tx(),T=_r(),k=ma(),O=oe(t,"733205176"),R=oe(t,"3375735072"),H=oe(t,"3989934672")||!!(k!=null&&k.id),V=oe(t,"490346566"),$=oe(t,"2509278897"),q=oe(t,"2050949565"),G=Ve[I.SLACK_CONNECTOR],B=v===G&&!N&&!$&&q,Y=Fi(Ut.CookieManagement),X=Ee(),[Z,pe]=y.useState(null);y.useEffect(()=>{const[Le]=a.hash.split("?"),[Qe,$e,W]=Le.split("/");Qe==="#settings"&&$e===ye.DataControls&&W===Gi.ArchivedChats&&at(t,({onClose:z})=>e.jsx(Tx,{onClose:()=>{z(),i(Sa(ye.DataControls),{replace:!0})}}))},[t,a.hash,i]);const ce=T.status!=="loading",{native_default_factor_id:le}=T,ae=()=>{if(T.status!=="enabled")throw new Error("MFA is not enabled");if(!le)throw new Error("No factor ID found");return re.safePost("/accounts/mfa/user/disable_in_house",{requestBody:{factor_id:le}})},ie=()=>{ae().then(()=>{X.invalidateQueries({queryKey:["mfaInfo"]}),i(uo(go.DISABLE_MFA_SUCCESS,"/#settings/".concat(ye.Security)))}).catch(()=>{i(uo(go.DISABLE_MFA_TIMEOUT,"/#settings/".concat(ye.Security)))})},ue=oe(t,"3325813340");oe(t,"3384364566");const U=Ue(),J=H&&((Ae=U==null?void 0:U.isPersonalAccount())!=null?Ae:!1);let Oe=null;if(P)return ce?e.jsx(sx,{onClose:()=>i("/",{replace:!0}),onConfirm:ie}):null;if(Y)return null;if(B)return e.jsx(Th,{onClose:()=>{x(void 0)}});if(j){if(Oe=e.jsx(Nh,{onClose:()=>{u?(S(!1),M()):i(o,{replace:!0})}}),!u)return Oe}else{if(d)return e.jsx(Zg,{onClose:()=>i("/",{replace:!0}),referrer:sa.ConnectorToggle,toggleAllAfterRedirect:!0});if(C)return e.jsx(Jg,{onClose:Le=>{Le&&x(Le),w(!1)}})}return e.jsxs(e.Fragment,{children:[e.jsx(je,{testId:"modal-settings",isOpen:!0,onClose:l,size:"custom",className:"max-h-[85vh] max-md:min-h-[60vh] md:h-[600px] md:max-w-[680px]",type:"success",title:s.formatMessage(L.settings),showCloseButton:!0,visuallyHiddenHeader:n,hasSeparator:!0,noPadding:!0,children:e.jsxs(ld,{className:"flex h-[100%] flex-col md:flex-row",value:r!=null?r:ye.General,orientation:n?"vertical":void 0,onValueChange:Le=>{c(Le)},children:[e.jsxs(cd,{className:"bg-token-bg-elevated-secondary border-token-border-light flex shrink-0 flex-row flex-wrap select-none max-md:overflow-x-auto max-md:border-b max-md:p-1.5 md:max-w-[210px] md:min-w-[180px] md:flex-col md:border-e dark:bg-black/10",children:[e.jsx("div",{className:"py-3 ps-2.5 max-md:hidden",children:e.jsx(vn,{onClick:l})}),e.jsx(Ot,{value:ye.General,icon:dd,label:e.jsx(g,p({},L.generalTab))}),ue&&e.jsx(Ih,{}),e.jsx(Ot,{value:ye.Personalization,icon:Wu,label:e.jsx(g,p({},L.personalizationTab)),"data-testid":"personalization-tab",onMouseOver:()=>{X.prefetchQuery(Hu())}}),e.jsx(Ot,{value:ye.Connectors,icon:Pa,label:V?e.jsx(g,p({},L.connectorsTabModelToolDiscovery)):$?e.jsx(g,p({},L.connectorsTabRevamp)):e.jsx(g,p({},L.connectorsTab))}),O&&e.jsx(Ot,{value:ye.Schedules,icon:br,label:e.jsx(g,p({},L.schedulesTab)),"data-testid":"schedules-tab"}),R&&e.jsx(Ot,{value:ye.Orders,icon:zu,label:e.jsx(g,{id:"xdSD9Q",defaultMessage:"Orders"}),"data-testid":"orders-tab"}),e.jsx(Ot,{value:ye.DataControls,icon:Ku,label:e.jsx(g,p({},L.dataControlsTab)),"data-testid":"data-controls-tab"}),e.jsx(Ot,{value:ye.Security,icon:Vg,label:e.jsx(g,p({},L.securityTab)),"data-testid":"security-tab"}),J&&e.jsx(Ot,{value:ye.ParentalControls,icon:Xg,label:s.formatMessage(lt.parentalControlsTab),"data-testid":"amphora-controls-tab"}),!1,e.jsx(Ot,{value:ye.Account,icon:Vu,label:e.jsx(g,p({},L.accountTab)),"data-testid":"account-tab"}),!1]}),e.jsx(Et,{value:ye.General,children:e.jsx(lb,{})}),ue&&e.jsx(Et,{value:ye.Notifications,children:e.jsx(Ph,{})}),e.jsx(Et,{value:ye.Personalization,children:e.jsx(Gx,{})}),e.jsx(Et,{value:ye.Connectors,children:$?e.jsx(Pp,{onAddLinkClick:()=>{b({referrer:sa.SettingsConnectorsTab,showSettingsBehindConnectorLink:!0}),S(!0)},onCreateCustomConnectorClick:()=>w(!0)}):e.jsx(Ff,{})}),e.jsx(Et,{value:ye.DataControls,children:Z==="remoteBrowserData"?e.jsx(xb,{onBack:()=>pe(null)}):e.jsx(db,{onOpenRemoteBrowserDataPage:()=>pe("remoteBrowserData")})}),O&&e.jsx(Et,{value:ye.Schedules,children:e.jsx(ub,{})}),R&&e.jsx(Et,{value:ye.Orders,children:e.jsx(qu,{})}),e.jsx(Et,{value:ye.Security,children:e.jsx(gb,{})}),J&&e.jsx(Et,{value:ye.ParentalControls,children:e.jsx(vf,{})}),!1,e.jsx(Et,{value:ye.Account,children:e.jsx(mb,{})}),!1]})}),Oe]})};function lb(){"use forget";const t=ot.c(59),s=A(),n=mt(),a=Ee(),o=ud(),i=ee();let l;t[0]!==i?(l=gd(i)&&!Ui(),t[0]=i,t[1]=l):l=t[1];const r=l,{data:c}=jt(he.ShowLegacyModels),m=pt(),u=Ue();let d;t[2]!==i?(d=oe(i,"2991909965"),t[2]=i,t[3]=d):d=t[3];const f=d;let h;t[4]!==i?(h=oe(i,"2036808540"),t[4]=i,t[5]=h):h=t[5];const x=h;let b;t[6]!==i?(b=oe(i,"4230914712"),t[6]=i,t[7]=b):b=t[7];const M=b,v=oe(i,"3315017149");let j;t[8]!==i?(j=()=>xd(i),t[8]=i,t[9]=j):j=t[9];const S=md(j);let C;t[10]!==u||t[11]!==x||t[12]!==M?(C=(u==null?void 0:u.isEnterprisey())&&x||(u==null?void 0:u.isTeam())&&M,t[10]=u,t[11]=x,t[12]=M,t[13]=C):C=t[13];const w=C;let E;t[14]!==s?(E=s.formatMessage(L.showLegacyModels),t[14]=s,t[15]=E):E=t[15];let _=E,D;t[16]===Symbol.for("react.memo_cache_sentinel")?(D=e.jsx(g,{id:"dw9iMe",defaultMessage:"Please contact your administrator to enable or disable legacy models."}),t[16]=D):D=t[16];let N=D;if(v){let X;t[17]!==s?(X=s.formatMessage(L.showAdditionalModels),t[17]=s,t[18]=X):X=t[18],_=X;let Z;t[19]===Symbol.for("react.memo_cache_sentinel")?(Z=e.jsx(g,{id:"TJwldi",defaultMessage:"Please contact your administrator to enable or disable additional models."}),t[19]=Z):Z=t[19],N=Z}let P;t[20]!==s?(P=s.formatMessage(L.settings),t[20]=s,t[21]=P):P=t[21];let T;t[22]!==o?(T=o&&e.jsx(gx,{}),t[22]=o,t[23]=T):T=t[23];let k;t[24]!==o?(k=o&&e.jsx(xx,{}),t[24]=o,t[25]=k):k=t[25];let O;t[26]!==o?(O=o&&e.jsx(fx,{}),t[26]=o,t[27]=O):O=t[27];let R;t[28]!==(u==null?void 0:u.id)||t[29]!==i||t[30]!==n||t[31]!==(m==null?void 0:m.email)||t[32]!==S?(R=!1,t[28]=u==null?void 0:u.id,t[29]=i,t[30]=n,t[31]=m==null?void 0:m.email,t[32]=S,t[33]=R):R=t[33];let H;t[34]===Symbol.for("react.memo_cache_sentinel")?(H=e.jsx(Q,{children:e.jsx(nx,{})}),t[34]=H):H=t[34];let V;t[35]!==u||t[36]!==r?(V=r&&u&&e.jsx(Q,{children:e.jsx(em,{account:u})}),t[35]=u,t[36]=r,t[37]=V):V=t[37];let $;t[38]!==o?($=o&&e.jsx(px,{}),t[38]=o,t[39]=$):$=t[39];let q,G;t[40]===Symbol.for("react.memo_cache_sentinel")?(q=e.jsx(Q,{children:e.jsx(fb,{})}),G=e.jsx(tm,{}),t[40]=q,t[41]=G):(q=t[40],G=t[41]);let B;t[42]!==f||t[43]!==N||t[44]!==_||t[45]!==a||t[46]!==w||t[47]!==c||t[48]!==n?(B=f&&e.jsx(Q,{children:e.jsx(Ke,{label:_,enabled:w?!1:!!c,disabled:w,description:w?N:void 0,isLoading:n.isPending,onChange:async X=>{await n.mutateAsync({setting:he.ShowLegacyModels,value:X}),a.invalidateQueries({queryKey:fd()})}})}),t[42]=f,t[43]=N,t[44]=_,t[45]=a,t[46]=w,t[47]=c,t[48]=n,t[49]=B):B=t[49];let Y;return t[50]!==k||t[51]!==O||t[52]!==R||t[53]!==V||t[54]!==$||t[55]!==B||t[56]!==P||t[57]!==T?(Y=e.jsxs(xe,{title:P,children:[T,k,O,R,H,V,$,q,G,B]}),t[50]=k,t[51]=O,t[52]=R,t[53]=V,t[54]=$,t[55]=B,t[56]=P,t[57]=T,t[58]=Y):Y=t[58],Y}function cb(){const t=A(),s=mt(),{data:n}=jt(he.PreciseLocationEnabledForDevice);return y.useEffect(()=>{typeof n=="boolean"&&(n?sm():nm())},[n]),e.jsx(Q,{children:e.jsx(Ke,{label:t.formatMessage(L.preciseLocationToggleLabel),description:e.jsx(g,p({},L.preciseLocationToggleDescription)),enabled:!!n,isLoading:n==null,onChange:a=>{s.mutate({setting:he.PreciseLocationEnabledForDevice,value:a})}})})}function db({onOpenRemoteBrowserDataPage:t}){const s=ee(),n=A(),a=me(),{pathname:o}=zt(),i=tt(),l=oe(s,"733205176"),r=oe(s,"1030527215"),c=oe(s,"1957563541"),m=Yu(xs.WorkspaceShareLinks),u=mt(),{data:d}=Ns(),f=In(d),h=Ft(is.isBusinessWorkspace),x=f==null?void 0:f.isTeam(),b=d==null?void 0:d.accountItems.some(N=>N.isPersonalAccount()),M=ur(),v=gr(),j=mr(),S=fr(s),C=Ee(),{data:w}=jt(he.EnableRemoteBrowserData),E=()=>{re.safePatch("/conversations",{requestBody:{is_archived:!0}}).then(()=>{a.info(n.formatMessage(L.archiveHistorySuccess)),oa(C)}),o!=="/"&&i("/",{replace:!0})},_=()=>{re.safePatch("/conversations",{requestBody:{is_visible:!1},intercomEventOnError:"fetch-error:conversations:delete"}).then(()=>{oa(C)}),o!=="/"&&i("/",{replace:!0})},D=()=>{re.safeDelete("/agent/browser_context",{}).then(N=>{N.success?a.success(n.formatMessage(L.deleteBrowserContextSuccess)):a.danger(L.deleteBrowserContextError,{toastId:"delete-browser-context-failed"})}).catch(()=>{a.danger(L.deleteBrowserContextError,{toastId:"delete-browser-context-error"})})};return e.jsxs(xe,{title:n.formatMessage(L.dataControlsTab),children:[e.jsx(ib,{}),l&&e.jsx(Q,{children:r?e.jsx(On,{label:n.formatMessage(L.remoteBrowserData),stateLabel:w?n.formatMessage({id:"personalizationSettings.on",defaultMessage:"On"}):n.formatMessage({id:"personalizationSettings.off",defaultMessage:"Off"}),onClick:t}):e.jsx(it,{color:"danger-outline",label:n.formatMessage(L.deleteBrowserContext),buttonLabel:n.formatMessage(L.deleteBrowserContextButton),onClick:()=>{at(s,nl,{onDeleteBrowserContext:D})},"data-testid":"delete-browser-context-button"})}),c&&e.jsx(cb,{}),j&&S&&e.jsx(Q,{children:e.jsx(Ke,{label:n.formatMessage({id:"APWP2z",defaultMessage:"Enable memory in search"}),enabled:M,onChange:N=>{u.mutate({setting:he.MemoryInSearch,value:N})},disabled:!v,description:e.jsx(g,{id:"nQ+QoN",defaultMessage:"To be more helpful in getting you more relevant responses, ChatGPT may share disassociated search queries based on past memories with third-party search providers. <link>Learn more</link>",values:{link:N=>e.jsx("a",{href:"https://help.openai.com/en/articles/9237897-chatgpt-search",target:"_blank",className:"underline",rel:"noreferrer",children:N})}})})}),m&&e.jsx(Q,{children:e.jsx(it,{label:n.formatMessage(L.sharedConversations),buttonLabel:n.formatMessage(L.manageButton),onClick:()=>{at(s,Zx)},"data-testid":"manage-shared-conversations-button"})}),e.jsx(Q,{children:e.jsx(it,{label:n.formatMessage(L.archivedConversations),buttonLabel:n.formatMessage(L.manageButton),onClick:()=>{i(Sa(ye.DataControls,{dataControlsRoute:Gi.ArchivedChats}))},"data-testid":"manage-archived-conversations-button"})}),e.jsx(Q,{children:e.jsx(it,{label:n.formatMessage(L.archiveChatsLabel),buttonLabel:n.formatMessage(L.archiveChatsButton),onClick:()=>{at(s,bb,{onArchiveHistory:E})},"data-testid":"archive-all-chats-button"})}),e.jsx(Q,{children:e.jsx(it,{color:"danger-outline",label:n.formatMessage(L.deleteChatLabel),buttonLabel:n.formatMessage(L.deleteChatButton),onClick:()=>{at(s,hb,{onDeleteHistory:_})},"data-testid":"delete-all-chats-button"})}),x&&b&&e.jsx(Q,{children:e.jsx(it,{label:n.formatMessage(L.mergePersonalData),buttonLabel:n.formatMessage(L.mergeButton),onClick:()=>{at(s,sb,{fromSettings:!0})}})}),!h&&e.jsx(Q,{children:e.jsx(it,{label:n.formatMessage(L.exportData),buttonLabel:n.formatMessage(L.exportButton),onClick:()=>{at(s,yb)},"data-testid":"export-data-button"})})]})}function ub(){"use forget";const t=ot.c(6),s=A();let n;t[0]!==s?(n=s.formatMessage(L.schedulesTab),t[0]=s,t[1]=n):n=t[1];let a;t[2]===Symbol.for("react.memo_cache_sentinel")?(a=e.jsx("div",{children:e.jsx(g,{id:"eTC7El",defaultMessage:"ChatGPT can be scheduled to run again after it completes a task. Choose {scheduleIcon} Schedule from the {menuIcon} menu in a conversation to set up future runs.",values:{scheduleIcon:e.jsx(br,{className:"-mt-1 inline-block size-4"}),menuIcon:e.jsx(Pn,{className:"-mt-1 inline-block size-4"})}})}),t[2]=a):a=t[2];let o;t[3]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsxs("div",{className:"flex flex-col gap-5 py-4",children:[a,e.jsx("div",{children:e.jsx(cs,{to:"/schedules",className:"hover:bg-token-bg-tertiary rounded-full border px-4 py-2",children:e.jsx(g,{id:"+0oCTk",defaultMessage:"Manage"})})})]}),t[3]=o):o=t[3];let i;return t[4]!==n?(i=e.jsx(xe,{title:n,children:o}),t[4]=n,t[5]=i):i=t[5],i}function gb(){var P,T,k,O;const t=A(),s=me(),n=mt(),[a,o]=y.useState(null),[i,l]=y.useState(!1),[r,c]=y.useState(!1),m=_r(),{setupMfa:u,removeMfa:d}=om({}),f=m.status,{session:h}=Wi(),x=h==null?void 0:h.user,{data:b}=jt(he.EnableDeviceCodeAuth),{data:M}=Ns(),v=In(M),j=v==null?void 0:v.features,S=Ft(R=>{var H;return((H=R.currentWorkspace)==null?void 0:H.structure)==="workspace"});dt.addAction("security_settings_has_workspace",{hasWorkspace:S});const C=ee(),w=oe(C,"671926036"),E=!S&&oe(C,"2508433885"),_=bx({enabled:w}),D=f==="enabled"||(x==null?void 0:x.email)!=null&&(j==null?void 0:j.includes(Qu))===!0&&(f==="loading"||f==="disabled"),N=y.useCallback(()=>{l(!0),re.safePost("/accounts/logout_all").then(()=>{s.success(t.formatMessage(L.logoutAllSuccess),{testId:"logout-all-success-toaster"}),Gs()}).catch(R=>{dt.addError(new Error("Failed logging out all accounts: ",{cause:R})),s.danger(L.logoutAllFailed,{hasCloseButton:!0,toastId:"settings_modal_failed_to_log_out_all"}),l(!1)})},[t,s]);return e.jsxs(e.Fragment,{children:[e.jsxs(xe,{title:t.formatMessage(L.securityTab),children:[D&&e.jsx(Q,{children:e.jsx(Ke,{label:t.formatMessage({id:"settingsModal.toggleMfa",defaultMessage:"Multi-factor authentication"}),enabled:a!=null?a:f==="enabled",disabled:f==="loading",isLoading:f==="loading",onChange:R=>{o(R),R?u():d()},description:e.jsxs(e.Fragment,{children:[f==="disabled"&&e.jsx(g,{id:"settingsModal.toggleMfaDescriptionDisabled",defaultMessage:"Require an extra security challenge when logging in. If you are unable to pass this challenge, you will have the option to recover your account via email."}),f==="enabled"&&e.jsx("a",{className:"underline",target:"_blank",rel:"noreferrer",href:am,children:e.jsx(g,{id:"settingsModal.toggleMfaDescriptionLearnMore",defaultMessage:"Learn more"})})]})})}),E&&e.jsx(Q,{children:e.jsx(Ke,{label:t.formatMessage(L.deviceCodeAuthToggleLabel),description:e.jsx(g,p({},L.deviceCodeAuthToggleDescription)),enabled:!!b,disabled:n.isPending,isLoading:n.isPending,onChange:R=>{n.mutate({setting:he.EnableDeviceCodeAuth,value:R})}})}),w&&!_.isError&&_.data&&e.jsx(Q,{children:_.data&&_.data.devices.length>0?e.jsx(On,{onClick:()=>c(!0),label:e.jsx(g,p({},L.trustedDevices)),stateLabel:_.data?String(_.data.devices.length):"0"}):e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(g,p({},L.trustedDevices))}),e.jsx(Ca,{children:e.jsx(g,{id:"settingsModal.trustedDevicesEmptyDescription",defaultMessage:"When you sign in on another device, it will be added here and can automatically receive device prompts for signing in."})})]})}),!Ui()&&e.jsx(Q,{children:e.jsx(it,{label:t.formatMessage(L.logOutLabel),buttonLabel:t.formatMessage(L.logOutButton),onClick:()=>Gs(),"data-testid":"logout-button"})}),e.jsx(Q,{children:e.jsx(it,{label:e.jsx(g,{id:"settingsModal.logoutAllLabel",defaultMessage:"Log out of all devices"}),color:"danger-outline",buttonLabel:e.jsx("div",{style:{whiteSpace:"nowrap"},children:e.jsx(g,{id:"settingsModal.logoutAllButton",defaultMessage:"Log out all"})}),description:e.jsx(g,{id:"settingsModal.logoutAllDescription",defaultMessage:"Log out of all active sessions across all devices, including your current session. It may take up to 30 minutes for other devices to be logged out."}),onClick:()=>{se.logLogOutButtonClicked({location:"settings_modal_log_out_all"}),N()},disabled:i,testId:"logout-all-button"})})]}),r&&!_.isError&&((P=_==null?void 0:_.data)==null?void 0:P.devices)&&((T=_==null?void 0:_.data)==null?void 0:T.devices.length)>0&&e.jsx(tb,{devices:(O=(k=_==null?void 0:_.data)==null?void 0:k.devices)!=null?O:[],onClose:()=>c(!1)}),e.jsx(Of,{})]})}function mb(){const t=ee(),s=A(),{data:n}=Ns(),a=In(n),o=Ft(is.isBusinessWorkspace),i=()=>{if(!a)return;const u=a.mustGetSubscriptionBillingCurrency("GlobalSettingsModal");at(t,({onClose:d})=>e.jsx(Ig,{isOpen:!0,onClose:d,accountId:a.id,initialPlanType:a.data.subscriptionStatus.planType,updatedPlanType:a.data.subscriptionStatus.planType,billingDetails:{currency:u}}))},l=()=>{a&&at(t,({onClose:u})=>e.jsx(Rh,{isOpen:!0,onClose:()=>{se.logEventWithStatsig("Cancel Subscription Modal Dismissed","chatgpt_cancel_subscription_modal_dismissed"),u()},onClaimOfferButtonClicked:()=>{se.logEventWithStatsig("Cancel Subscription Modal Claim Offer Button Clicked","chatgpt_cancel_subscription_modal_claim_offer_offer_button_clicked"),u(),r()},currentAccount:a}))},r=()=>{a&&at(t,({onClose:u})=>e.jsx(Kh,{onClose:u,onBackButtonClicked:()=>{u(),l()},account:a}))},c=ob({account:a,context:t});let m=null;if(a&&c){const u=St(t,"313799188").get("sync_advertised_features",!1),d=wg({isWebRedesign:u}),f=bn({isWebRedesign:u}),h=ia({isWebRedesign:u});switch(c){case Pe.FREE:m=e.jsx(zh,{});break;case Pe.GO:m=e.jsx(Zn,{currentAccount:a,onCancelSubscriptionClick:l,onRenewSubscriptionClick:i,pricingPlan:h,showSyncedFeatures:u});break;case Pe.PLUS:m=e.jsx(Zn,{currentAccount:a,onCancelSubscriptionClick:l,onRenewSubscriptionClick:i,pricingPlan:f,showSyncedFeatures:u});break;case Pe.PRO:m=e.jsx(Zn,{currentAccount:a,onCancelSubscriptionClick:l,onRenewSubscriptionClick:i,pricingPlan:d,showSyncedFeatures:u});break}}return e.jsxs(e.Fragment,{children:[e.jsxs(xe,{title:s.formatMessage(L.accountTab),children:[m,e.jsx(ex,{}),!o&&e.jsx(Q,{children:e.jsx(it,{label:s.formatMessage(L.deleteAccount),buttonLabel:s.formatMessage(L.deleteAccountButton),color:"danger-outline",onClick:()=>{at(t,Mb)},"data-testid":"delete-account-button"})})]}),a&&e.jsx(Cx,{})]})}function fb(){var m;const t=ee(),s=bd(t).locale,n=Cd,a=(m=mo(()=>yd()))!=null?m:null,o=mo(()=>navigator.language),i=o==null?null:Md(o),l=y.useCallback(async u=>{try{await re.safePatch("/accounts/users/locale",{requestBody:{locale:u}})}catch(d){dt.addError(new Error("Failed to persist locale preference",{cause:d instanceof Error?d:void 0}))}},[]),r=[...new Set([a,i])].filter(u=>u!=null),c=n.filter(u=>!r.includes(u));return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(g,p({},L.locale))}),e.jsxs(Pt.Root,{value:a!=null?a:"auto",onValueChange:u=>{se.logEvent("Locale Updated by User",{from_locale:s,to_locale:u,raw_browser_locale:o!=null?o:"",suggested_locale:i!=null?i:""}),Vs.logEvent("chatgpt_locale_updated_by_user",u,{from_locale:s,to_locale:u,raw_browser_locale:o!=null?o:"",suggested_locale:i!=null?i:""}),(async()=>{const d=u==="auto"?null:u;await l(d),d===null?po(null):po(d)})()},children:[e.jsxs(Pt.Trigger,{children:[e.jsx(Pt.Value,{}),e.jsx(Pt.Icon,{})]}),e.jsx(Pt.Portal,{children:e.jsxs(Pt.Content,{side:void 0,sideOffset:void 0,position:"item-aligned",children:[e.jsx(Pt.Item,{value:"auto",children:e.jsx(g,p({},L.localeAuto))}),r.map(u=>{var d;return e.jsx(Pt.Item,{value:u,children:(d=fo[u])!=null?d:u},u)}),e.jsx(Pt.Separator,{}),c.map(u=>{var d;return e.jsx(Pt.Item,{value:u,children:(d=fo[u])!=null?d:u},u)})]})})]})]})}function pb(){const t=A(),s=ee(),n=zt(),{pathname:a,hash:o,search:i}=n,l=Xc(),{closeSettings:r}=ds(),c=y.useRef(!1);return y.useEffect(()=>{Sn(s)||!Zc(o)||c.current||(c.current=!0,bs(s,{callbackUrl:"".concat(a).concat(i).concat(o),fallbackScreenHint:"login",useFallbackScreenHint:!0}))},[s,o,a,i]),y.useEffect(()=>{Vs.logEvent("chatgpt_unauthenticated_settings_modal_shown"),se.logEvent("Unauthenticated Settings Modal Shown")},[]),e.jsx(je,{testId:"modal-settings-unauth",isOpen:!0,onClose:r,type:"success",showCloseButton:!0,title:t.formatMessage(L.settings),children:e.jsx(Q,{children:e.jsx(Ke,{label:t.formatMessage({id:"settingsModal.unauthChatTrainingToggleLabel",defaultMessage:"Improve the model for everyone"}),enabled:l,onChange:m=>{ed.setIsNoAuthChatTrainingEnabled(m),se.logEvent("No Auth Chat Training Toggled",{isEnabled:m})},description:e.jsx(g,{id:"rtxsI1",defaultMessage:"Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>.",values:{link:m=>e.jsx("a",{href:sl,target:"_blank",className:"underline",rel:"noreferrer",children:m})}})})})})}function hb({onClose:t,onDeleteHistory:s}){const n=A(),a=cr();return e.jsx(je,{testId:"modal-confirm-delete-history",isOpen:!0,onClose:t,type:"success",title:n.formatMessage(L.deleteHistoryModalTitle),description:a&&e.jsx(g,{id:"settingsModal.deleteHistoryModalMemoryDisclaimer",defaultMessage:"To clear any memories from your chats, visit your <link>settings</link>.",values:{link:o=>e.jsx(cs,{onClick:()=>t(),to:Sa(ye.Personalization),className:"underline",children:o})}}),primaryButton:e.jsx(Fe.Button,{title:n.formatMessage(L.deleteHistoryModalConfirm),color:"danger",onClick:()=>{s(),t()},"data-testid":"confirm-delete-all-chats-button"}),secondaryButton:e.jsx(Fe.Button,{title:n.formatMessage(L.deleteHistoryModalCancel),color:"secondary",onClick:t})})}function nl({onClose:t,onDeleteBrowserContext:s}){const n=A();return e.jsx(je,{testId:"modal-confirm-delete-browser-context",isOpen:!0,onClose:t,type:"success",showCloseButton:!0,title:n.formatMessage(L.deleteBrowserContextModalTitle),description:e.jsx("p",{className:"text-token-text-secondary text-base leading-6",children:e.jsx(g,{id:"settingsModal.deleteBrowserContextModalDescription",defaultMessage:"All cookies and other data from the remote browser will be permanently deleted."})}),primaryButton:e.jsx(Fe.Button,{title:n.formatMessage(L.deleteBrowserContextModalConfirm),color:"danger",onClick:()=>{s(),t()},"data-testid":"confirm-delete-browser-context-button"}),secondaryButton:e.jsx(Fe.Button,{title:n.formatMessage(L.deleteBrowserContextModalCancel),color:"secondary",onClick:t})})}function xb({onBack:t}){const s=A(),n=ee(),a=mt(!0),{data:o}=jt(he.EnableRemoteBrowserData),i=()=>{at(n,nl,{onDeleteBrowserContext:()=>re.safeDelete("/agent/browser_context",{})})};return e.jsxs(xe,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{"aria-label":s.formatMessage({id:"settingsModal.back",defaultMessage:"Back"}),onClick:t,className:"hover:bg-token-bg-tertiary -ms-1 rounded p-1",children:e.jsx(Qs,{className:"icon-sm"})}),e.jsx("span",{children:s.formatMessage(L.remoteBrowserData)})]}),children:[e.jsx(Q,{children:e.jsx(Ke,{label:s.formatMessage(L.remoteBrowserDataKeepLabel),enabled:!!o,onChange:l=>{a.mutate({setting:he.EnableRemoteBrowserData,value:l})},description:e.jsx(g,p({},L.remoteBrowserDataKeepDescription)),"data-testid":"remote-browser-data-toggle"})}),e.jsx(Q,{children:e.jsx(it,{color:"danger-outline",label:s.formatMessage(L.deleteBrowserContext),buttonLabel:s.formatMessage(L.deleteBrowserContextButton),onClick:i,"data-testid":"delete-browser-context-button"})})]})}function bb({onClose:t,onArchiveHistory:s}){const n=A();return e.jsx(je,{isOpen:!0,testId:"modal-confirm-archive-history",onClose:t,type:"success",title:n.formatMessage(L.archiveHistoryModalTitle),primaryButton:e.jsx(Fe.Button,{title:n.formatMessage(L.archiveHistoryModalConfirm),color:"primary",onClick:()=>{s(),t()}}),secondaryButton:e.jsx(Fe.Button,{title:n.formatMessage(L.archiveHistoryModalCancel),color:"secondary",onClick:t})})}function yb({onClose:t}){const s=A(),n=me(),a=y.useCallback(()=>{try{re.safePost("/accounts/data_export").then(()=>{n.success(s.formatMessage(L.dataExportRequested),{testId:"data-export-success-toaster"}),t()})}catch(o){n.warning(s.formatMessage(L.dataExportFailed),{hasCloseButton:!0})}},[s,n,t]);return e.jsx(je,{testId:"modal-confirm-export-data",isOpen:!0,onClose:t,type:"success",title:s.formatMessage(L.dataExportModalTitle),primaryButton:e.jsx(Fe.Button,{title:s.formatMessage(L.dataExportModalConfirm),color:"primary",onClick:a,"data-testid":"confirm-data-export-button"}),secondaryButton:e.jsx(Fe.Button,{title:s.formatMessage(L.dataExportModalCancel),color:"secondary",onClick:t}),children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("ul",{className:"my-3 flex list-disc flex-col gap-1 ps-3",children:[e.jsx("li",{children:e.jsx(g,p({},L.dataExportModalDescription1))}),e.jsx("li",{children:e.jsx(g,p({},L.dataExportModalDescription2))}),e.jsx("li",{children:e.jsx(g,p({},L.dataExportModalDescription3))}),e.jsx("li",{children:e.jsx(g,p({},L.dataExportModalDescription4))})]}),e.jsx("div",{children:e.jsx(g,p({},L.dataExportModalDescription5))})]})})}function Mb({onClose:t}){const s=A(),n=me(),{session:a}=Wi(),o=pt(),i=o==null?void 0:o.email,l=o==null?void 0:o.phone_number,r=i||l||void 0,c=i?L.typeEmailLabel:L.typePhoneNumberLabel,[m,u]=y.useState(""),[d,f]=y.useState(""),h=y.useCallback(()=>{var w;const C=(w=a==null?void 0:a.user)==null?void 0:w.iat;return C===void 0||Date.now()/1e3-C<600},[a]),x=y.useCallback(()=>{try{h()?(se.logEventWithStatsig("Account Deactivated","chatgpt_account_deactivated"),re.safePost("/accounts/deactivate").then(()=>{Gs()})):n.warning(s.formatMessage(L.deleteAccountSessionTooOld),{hasCloseButton:!0})}catch(S){n.warning(s.formatMessage(L.deleteAccountFailed),{hasCloseButton:!0})}},[s,n,h]),b=y.useCallback(()=>{Gs()},[]),M=d==="DELETE"&&(r===void 0||m.toLowerCase()===r.toLowerCase()),[v]=y.useState(()=>h()),j=pd();return e.jsx(je,{testId:"modal-confirm-delete-account",isOpen:!0,onClose:t,type:"success",title:s.formatMessage(L.deleteAccountTitle),showCloseButton:!0,children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("ul",{className:"mt-4 mb-6 flex list-disc flex-col gap-1 ps-3",children:[e.jsx("li",{children:e.jsx(g,p({},L.deleteAccountWarning))}),e.jsx("li",{children:e.jsx(g,p({},L.apiAccessDeletionWarning))}),e.jsx("li",{children:e.jsx(g,p({},L.reuseEmailPhoneWarning))}),e.jsx("li",{children:e.jsx(g,p({},L.dataRemovalWarning))}),j&&[Cs.CHATGPT_IOS,Cs.SORA_IOS].includes(j.purchase_origin_platform)&&e.jsx("li",{children:e.jsx(g,p({},L.iapSubscriptionWarning))}),(j==null?void 0:j.purchase_origin_platform)===Cs.MOBILE_ANDROID&&e.jsx("li",{children:e.jsx(g,p({},L.playStoreSubscriptionWarning))}),e.jsx("li",{children:e.jsx(g,ne(p({},L.deleteHelpCenter),{values:{article:S=>e.jsx("a",{href:"https://help.openai.com/en/articles/6378407-how-to-delete-your-account",target:"_blank",className:"underline",rel:"noopener noreferrer",children:S})}}))})]}),v?e.jsxs(e.Fragment,{children:[r!=="undefined"?e.jsxs("div",{className:"mb-4",children:[e.jsx(Vo,{htmlFor:"email",children:e.jsx(g,p({},c))}),e.jsx(Ss,{ariaLabel:!1,value:m,placeholder:r,name:"email",onChange:S=>{u(S.target.value)}})]}):null,e.jsxs("div",{className:"mb-4",children:[e.jsx(Vo,{htmlFor:"delete",children:e.jsx(g,p({},L.typeDeleteInputLabel))}),e.jsx(Ss,{ariaLabel:!1,value:d,onChange:S=>{f(S.target.value)},name:"delete",className:"mb-4"})]}),e.jsx(F,{color:M?"danger":void 0,onClick:x,disabled:!M,fullWidth:!0,icon:M?yi:hd,children:M?e.jsx(g,p({},L.deleteAccountButtonLabel)):e.jsx(g,p({},L.lockedButtonLabel))})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-token-text-tertiary pb-4 text-xs",children:e.jsx(g,p({},L.recentLoginMessage))}),e.jsx(F,{color:"primary",onClick:b,fullWidth:!0,children:e.jsx(g,p({},L.refreshLoginButtonLabel))})]})]})})}var si;const Vo=Lt.label(si||(si=Ct(["block text-sm font-semibold mb-1"]))),L=te({showLegacyModels:{id:"settingsModal.showLegacyModels",defaultMessage:"Show legacy models"},showAdditionalModels:{id:"settingsModal.showAdditionalModels",defaultMessage:"Show additional models"},settings:{id:"settingsModal.settings",defaultMessage:"General"},locale:{id:"settingsModal.locale_alpha",defaultMessage:"Language"},localeAuto:{id:"settingsModal.localeAuto",defaultMessage:"Auto-detect"},archivedConversations:{id:"settingsModal.archivedConversations",defaultMessage:"Archived chats"},sharedConversations:{id:"settingsModal.sharedConversations",defaultMessage:"Shared links"},manageButton:{id:"settingsModal.manageButton",defaultMessage:"Manage"},mergePersonalData:{id:"settingsModal.mergePersonalData",defaultMessage:"Merge data from your personal workspace"},mergeButton:{id:"settingsModal.mergeButton",defaultMessage:"Merge"},cookieManagement:{id:"settingsModal.cookieManagement",defaultMessage:"Cookie preferences"},cookieManagementButton:{id:"settingsModal.cookieManagementButton",defaultMessage:"Manage"},exportData:{id:"settingsModal.exportData",defaultMessage:"Export data"},exportButton:{id:"settingsModal.exportButton",defaultMessage:"Export"},deleteAccount:{id:"settingsModal.deleteAccount",defaultMessage:"Delete account"},deleteAccountButton:{id:"settingsModal.deleteButton",defaultMessage:"Delete"},modelStickyForNewChats:{id:"settingsModal.modelStickyForNewChats",defaultMessage:"Start new chats with most recently used model"},trainingAllowedDescription:{id:"Qalmv5",defaultMessage:"Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>"},deleteHistoryModalTitle:{id:"settingsModal.deleteHistoryModalTitle",defaultMessage:"Clear your chat history - are you sure?"},deleteHistoryModalConfirm:{id:"settingsModal.deleteHistoryModalConfirm",defaultMessage:"Confirm deletion"},deleteHistoryModalCancel:{id:"settingsModal.deleteHistoryModalCancel",defaultMessage:"Cancel"},archiveHistoryModalTitle:{id:"settingsModal.archiveHistoryModalTitle",defaultMessage:"Archive your chat history - are you sure?"},archiveHistoryModalConfirm:{id:"settingsModal.archiveHistoryModalConfirm",defaultMessage:"Confirm archive"},archiveHistoryModalCancel:{id:"settingsModal.archiveHistoryModalCancel",defaultMessage:"Cancel"},archiveHistorySuccess:{id:"settingsModal.archiveHistorySuccess",defaultMessage:"Successfully archived chats. You can view your archived chats in Settings."},dataExportRequested:{id:"settingsModal.dataExportRequested",defaultMessage:"Successfully exported data. You should receive an email shortly with your data."},dataExportFailed:{id:"settingsModal.dataExportFailed",defaultMessage:"We were unable to process your export at this time. Please try again later."},dataExportModalTitle:{id:"settingsModal.dataExportModalTitle",defaultMessage:"Request data export - are you sure?"},dataExportModalConfirm:{id:"settingsModal.dataExportModalConfirm",defaultMessage:"Confirm export"},dataExportModalCancel:{id:"settingsModal.dataExportModalCancel",defaultMessage:"Cancel"},dataExportModalDescription1:{id:"settingsModal.dataExportModalDescription1",defaultMessage:"Your account details and chats will be included in the export."},dataExportModalDescription2:{id:"settingsModal.dataExportModalDescription2",defaultMessage:"The data will be sent to your registered email in a downloadable file."},dataExportModalDescription3:{id:"settingsModal.dataExportModalDescription3",defaultMessage:"The download link will expire 24 hours after you receive it."},dataExportModalDescription4:{id:"settingsModal.dataExportModalDescription4",defaultMessage:"Processing may take some time. You'll be notified when it's ready."},dataExportModalDescription5:{id:"settingsModal.dataExportModalDescription5",defaultMessage:'To proceed, click "Confirm export" below.'},deleteAccountSessionTooOld:{id:"settingsModal.deleteAccountSessionTooOld",defaultMessage:"Your login session is too old. Please log in again before deleting your account."},deleteAccountFailed:{id:"settingsModal.deleteAccountFailed",defaultMessage:"Failed to delete account. Please try again later."},deleteAccountTitle:{id:"settingsModal.deleteAccountTitle",defaultMessage:"Delete account - are you sure?"},deleteAccountWarning:{id:"settingsModal.deleteAccountWarning",defaultMessage:"Deleting your account is permanent and cannot be undone."},reuseEmailPhoneWarning:{id:"settingsModal.reuseEmailPhoneWarning-2",defaultMessage:"You cannot create a new account using the same email address."},dataRemovalWarning:{id:"settingsModal.dataRemovalWarning-2",defaultMessage:"Your data will be deleted within 30 days, except we may retain a limited set of data for longer where required or permitted by law."},apiAccessDeletionWarning:{id:"settingsModal.apiAccessDeletionWarning-2",defaultMessage:"Deletion will prevent you from accessing OpenAI services, including ChatGPT, API, and DALL·E."},deleteHelpCenter:{id:"settingsModal.deleteHelpCenter",defaultMessage:"Read our <article>help center article</article> for more information."},iapSubscriptionWarning:{id:"settingsModal.iapSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Apple App Store. We cannot cancel your subscription for you."},playStoreSubscriptionWarning:{id:"settingsModal.playStoreSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Google Play Store. We cannot cancel your subscription for you."},typeEmailLabel:{id:"settingsModal.typeEmailLabel",defaultMessage:"Please type your account email."},typePhoneNumberLabel:{id:"settingsModal.typePhoneNumberLabel",defaultMessage:"Please type your account phone number."},typeDeleteInputLabel:{id:"settingsModal.typeDeleteInputLabel",defaultMessage:'To proceed, type "DELETE" in the input field below.'},lockedButtonLabel:{id:"settingsModal.lockedButtonLabel",defaultMessage:"Locked"},deleteAccountButtonLabel:{id:"settingsModal.deleteAccountButtonLabel",defaultMessage:"Permanently delete my account"},recentLoginMessage:{id:"settingsModal.recentLoginMessage",defaultMessage:"You may only delete your account if you have logged in within the last 10 minutes. Please log in again, then return here to continue."},refreshLoginButtonLabel:{id:"settingsModal.refreshLoginButtonLabel",defaultMessage:"Refresh login"},chatTrainingAllowedToggleLabel:{id:"settingsModal.trainingAllowedToggleLabel",defaultMessage:"Improve the model for everyone"},chatTrainingEnterpriseTooltip:{id:"settingsModal.chatTrainingEnterpriseTooltip",defaultMessage:"ChatGPT Enterprise automatically disables training."},chatTrainingEduTooltip:{id:"settingsModal.chatTrainingEduTooltip",defaultMessage:"ChatGPT Edu automatically disables training."},chatTrainingTeamsTooltip:{id:"settingsModal.chatTrainingTeamsTooltip",defaultMessage:"ChatGPT Business automatically disables training."},preciseLocationToggleLabel:{id:"dataControlsSettings.preciseLocationToggleLabel",defaultMessage:"Share precise location"},preciseLocationToggleDescription:{id:"dataControlsSettings.preciseLocationToggleDescription",defaultMessage:"Allow ChatGPT to use your device's precise location when answering questions."},dataControlsTab:{id:"settingsModal.dataControls",defaultMessage:"Data controls"},schedulesTab:{id:"settingsModal.schedulesTab",defaultMessage:"Schedules"},cookiesTab:{id:"settingsModal.cookies",defaultMessage:"Cookie Preferences"},personalizationTab:{id:"settingsModal.personalization",defaultMessage:"Personalization"},generalTab:{id:"settingsModal.generalTab",defaultMessage:"General"},desktopAppTab:{id:"settingsModal.desktopAppTab",defaultMessage:"App"},connectorsTab:{id:"settingsModal.connectorsTab",defaultMessage:"Connected apps"},connectorsTabRevamp:{id:"settingsModal.connectorsTabRevamp",defaultMessage:"Connectors"},connectorsTabModelToolDiscovery:{id:"settingsModal.connectorsModelToolDiscovery",defaultMessage:"Apps & Connectors"},securityTab:{id:"settingsModal.securityTab",defaultMessage:"Security"},accountTab:{id:"settingsModal.accountTab",defaultMessage:"Account"},internalTab:{id:"settingsModal.internalTab",defaultMessage:"Employee Only"},subscriptionTab:{id:"settingsModal.subscriptionTab",defaultMessage:"Subscription"},logoutAllSuccess:{id:"settingsModal.logoutAllSuccess",defaultMessage:"Successfully logged out of all devices."},logoutAllFailed:{id:"settingsModal.logoutAllFailed",defaultMessage:"We were unable to process your request at this time. Please try again later."},deleteChatLabel:{id:"settingsModal.deleteChatLabel",defaultMessage:"Delete all chats"},deleteChatButton:{id:"settingsModal.deleteChatButton",defaultMessage:"Delete all"},logOutLabel:{id:"settingsModal.logOutLabel",defaultMessage:"Log out of this device"},logOutButton:{id:"settingsModal.logoutButton",defaultMessage:"Log out"},trustedDevices:{id:"settingsModal.trustedDevices",defaultMessage:"Trusted Devices"},deviceCodeAuthToggleLabel:{id:"settingsModal.deviceCodeAuthToggleLabel",defaultMessage:"Enable device code authorization for Codex"},deviceCodeAuthToggleDescription:{id:"settingsModal.deviceCodeAuthToggleDescription",defaultMessage:"Device code authorization is useful for running headless login for the Codex CLI. Exercise caution in enabling, because device codes may be targeted by phishing attacks."},archiveChatsLabel:{id:"settingsModal.archiveChatsLabel",defaultMessage:"Archive all chats"},archiveChatsButton:{id:"settingsModal.archiveChatsButton",defaultMessage:"Archive all"},remoteBrowserData:{id:"settingsModal.remoteBrowserData",defaultMessage:"Remote browser data"},remoteBrowserDataKeepLabel:{id:"settingsModal.remoteBrowserDataKeepLabel",defaultMessage:"Remember site data between sessions"},remoteBrowserDataKeepDescription:{id:"settingsModal.remoteBrowserDataKeepDescription",defaultMessage:"Let agent mode's remote browser reuse cookies between sessions."},remoteBrowserDataSitesLabel:{id:"settingsModal.remoteBrowserDataSitesLabel",defaultMessage:"{count} {count, plural, one {site} other {sites}}"},chatHistoryDescription:{id:"settingsModal.chatHistoryDescription",defaultMessage:"Save new chats on this browser to your history and allow them to be used to improve our models. Unsaved chats will be deleted from our systems within 30 days. This setting does not sync across browsers or devices. <link>Learn more</link>"},voiceTrainingAllowedLabel:{id:"settingsModal.voiceTrainingAllowedLabel",defaultMessage:"Include your audio recordings"},videoTrainingAllowedLabel:{id:"settingsModal.videoTrainingAllowedLabel",defaultMessage:"Include your video recordings"},voiceAndVideoTrainingDescription:{id:"settingsModal.voiceAndVideoTrainingDescription",defaultMessage:'Include your audio and video recordings from Voice Mode to train our models. Transcripts and other files are covered by "Improve the model for everyone." <link>Learn more</link>'},accountErrorWarning:{id:"SettingsModalImpl.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},deleteBrowserContext:{id:"settingsModal.deleteBrowserContext",defaultMessage:"Remote browser data"},deleteBrowserContextButton:{id:"settingsModal.deleteBrowserContextButton",defaultMessage:"Delete all"},deleteBrowserContextSuccess:{id:"settingsModal.deleteBrowserContextSuccess",defaultMessage:"Remote browser data deleted successfully."},deleteBrowserContextError:{id:"settingsModal.deleteBrowserContextError",defaultMessage:"Error deleting browser context!"},deleteBrowserContextModalTitle:{id:"settingsModal.deleteBrowserContextModalTitle",defaultMessage:"Delete all browser data?"},deleteBrowserContextModalConfirm:{id:"settingsModal.deleteBrowserContextModalConfirm",defaultMessage:"Delete"},deleteBrowserContextModalCancel:{id:"settingsModal.deleteBrowserContextModalCancel",defaultMessage:"Cancel"},disableRemoteBrowserDataTitle:{id:"settingsModal.disableRemoteBrowserDataTitle",defaultMessage:"Turning off remote browser data?"},disableRemoteBrowserDataDescription:{id:"settingsModal.disableRemoteBrowserDataDescription",defaultMessage:"This will disable cookies and connectors for any active and scheduled tasks."},disableRemoteBrowserDataConfirm:{id:"settingsModal.disableRemoteBrowserDataConfirm",defaultMessage:"OK"},disableRemoteBrowserDataCancel:{id:"settingsModal.disableRemoteBrowserDataCancel",defaultMessage:"Keep on"}});function Cb(){const{hash:t}=zt(),{isOpen:s}=ds(),{isUnauthenticated:n}=ua(),a=tt(),o=vd(t);return y.useEffect(()=>{if(s&&n&&o===ye.Connectors){const i="".concat(window.location.pathname).concat(window.location.hash);a("/auth/login?next=".concat(encodeURIComponent(i)))}},[s,n,o,a]),s?n?e.jsx(pb,{}):e.jsx(rb,{}):null}function vb(){const t=A(),[s]=Rn(),n=me(),a=s.get($u),o=y.useMemo(()=>a==="true"?t.formatMessage({id:"ogcSBw",defaultMessage:"ChatGPT student offer activated"}):null,[a,t]);return y.useEffect(()=>{o&&n.success(o,{hasCloseButton:!0})},[o,n]),null}const Sb=wt(()=>Nt(()=>import("./b4nzhz52v6u2aahr.js"),__vite__mapDeps([14,1,2,3,15,16,4,5])).then(t=>t.FannyPackModalContainer)),jb=wt(()=>Nt(()=>import("./o13qe7p37racm3xz.js"),__vite__mapDeps([17,1,4,2,3,5,18])));function _b(){const t=js(s=>s.sharingModalThreadId);return t?e.jsx(jb,{serverThreadId:t}):null}function Fy(){var j,S;const t=js(C=>C.purchaseWorkspaceData),s=js(C=>C.leaveWorkspaceData),n=t!=null,a=Fi(Ut.GlobalMemoryOnboarding),o=Ue(),i=ee();oe(i,"676035580"),gg();const l=Tm();Ng(n);const r=tt(),{isOpen:c,defaultTab:m,defaultTabLoading:u}=Lm(),{isFannyPackEnabled:d}=Ju();lg();const f=Xu(C=>C.researchShareIntent),{isEnabled:h}=Rg(),[x]=Rn(),b=x.get(qi),M=Zu(b!=null?b:""),v=b&&((S=(j=M.promoMetadata)!=null?j:M.promoError)!=null?S:M.isPromoLoading);return e.jsxs(e.Fragment,{children:[e.jsx(eg,{}),e.jsx(Cb,{}),e.jsx(Em,{}),e.jsx(Zm,{}),e.jsx(Mm,{}),l&&e.jsx(km,{}),c&&o&&!v&&e.jsx(dg,{currentAccount:o,defaultTab:m,isDefaultTabLoading:u,onClose:()=>Sd(r)},"account-payment-".concat(m)),v&&o&&e.jsx(Am,{currentAccount:o,promotionData:M}),e.jsx(tg,{}),e.jsx(rg,{}),n&&e.jsx(Tg,p({isOpen:n,onClose:()=>{bt.setPurchaseWorkspaceData(null),r({pathname:location.pathname,search:"",hash:""})}},t)),s&&e.jsx(um,{workspace:s}),a&&e.jsx(sg,{onClose:()=>bt.closeModal(Ut.GlobalMemoryOnboarding)}),d&&e.jsx(Sb,{}),e.jsx(_b,{}),f&&e.jsx(ym,{taskId:f.taskId,messages:f.messages,threadId:f.threadId}),e.jsx(jm,{}),null,h?e.jsx(vb,{}):null]})}export{Fy as GlobalModalsComponent};
//# sourceMappingURL=n6mmw84xxh53f967.js.map
