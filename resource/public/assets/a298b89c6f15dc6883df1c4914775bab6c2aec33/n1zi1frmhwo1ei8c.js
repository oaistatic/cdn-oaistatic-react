import{gg as q,a6 as C,eK as E,o$ as F,at as T,p0 as w}from"./ewse8exzafeu10ji.js";import{S as A,cq as b,cr as x,cs as P}from"./ny10lj7zpuz89fvf.js";import{r as y,f as Q}from"./n75kuy1cx6f5mogg.js";const m=5*60*1e3,U=30*1e3;function R(f,p,h,r,s){var c;const o=(c=y.useContext(A))==null?void 0:c.serverSharedThreadId,t=b(h),g=y.useMemo(()=>({asset_pointer:t,content_type:q.ArbitraryAssetPointer}),[t]),n=x(),{isUnauthenticated:I}=C(),d=E(p),a=P.makeQueryOptions({asset:g,sharedThreadId:o,postId:n,gizmoId:void 0,isUnauthenticated:I,conversationId:o?void 0:d}),i=F(),v=!!(f&&(d||o||n)&&t&&a.enabled),u=a.queryFn;if(typeof u=="symbol")throw Error("Unexpected symbol query fn...");return Q({queryKey:a.queryKey,queryFn:async _=>{try{const e=await u(_);return r==null||r(e.url),{status:"success",download_url:e.url}}catch(e){T.addError(e);let l=i("default_download_link_error",{fileName:t});throw e instanceof w&&e.code!=null&&(l=i(e.code)),s==null||s(l),e}},enabled:v,staleTime:m,gcTime:U,refetchInterval:m,refetchOnWindowFocus:!0})}export{R as u};
//# sourceMappingURL=n1zi1frmhwo1ei8c.js.map
