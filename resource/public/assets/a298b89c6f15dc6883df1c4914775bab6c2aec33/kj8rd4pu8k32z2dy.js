var $=Object.defineProperty;var U=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var I=(a,s,n)=>s in a?$(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,j=(a,s)=>{for(var n in s||(s={}))Y.call(s,n)&&I(a,n,s[n]);if(U)for(var n of U(s))X.call(s,n)&&I(a,n,s[n]);return a};import{b as N,r as Z,j as e,d as ee,M}from"./n75kuy1cx6f5mogg.js";import{i as B,aP as se,eK as ae,a9 as z,bJ as ne,O as te,cr as oe,Y as ie,iq as re,f$ as ce,ba as le,eQ as ue,y as p,B as x,d9 as R,T as P,am as de,ab as ge,ac as he,or as me,e as S,ae as k,P as y,mJ as pe,a6 as xe,os as Se,aR as T}from"./ewse8exzafeu10ji.js";import{j as fe,k as be,l as ve,m as Ce,o as je,p as Me,q as ke,t as F,N as O,w as ye,x as Ne,O as Be,G as Pe,H as Oe,P as H,y as Le,z as _e,A as we,B as Ee,D as Ae,E as Ue,F as Ie,I as Te}from"./ny10lj7zpuz89fvf.js";import{P as Fe}from"./d65yyyom1modmtdi.js";function Ve({showShareButton:a,showProfileDropdown:s,showConversationPrivacyIndicator:n,clientThreadId:o}){const i=B(),h=se(i,o),c=ae(o),u=N(),f=z(i,"1547743984"),[b,r,v,d,m,g,l]=ne(o,t=>[T.hasUserMessage(t),T.getGizmoId(t),Te(t),t==null?void 0:t.title,t==null?void 0:t.is_do_not_remember,t==null?void 0:t.isStarred,t==null?void 0:t.continuingFromSharedProjectConversationId]),L=te(()=>{var t;return(t=fe(h))==null?void 0:t.value}),D=Z.useMemo(()=>be({clientThreadId:o,gizmoId:r,conversationTitle:d,conversationAsyncStatus:L,isDoNotRemember:m,isStarred:g}),[o,r,d,L,m,g]),G=oe(o),{prefetchSearchPromises:W}=ve(),q=W!=null,_=ie(re),K=f.get("show_share_button_text",!1)&&!_,w=u.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),J=ce(r),C=le();ue();const E=!p(i),{shouldShowProjectsChatShareModal:Q,openProjectsChatShareModal:V}=Ce({clientThreadId:o}),A=()=>Q?V():R.openSharingModal(c);return e.jsxs(e.Fragment,{children:[p(i)?e.jsx(je,{}):null,p(i)&&(C==null?void 0:C.includes("caterpillar"))&&e.jsx(Me,{}),null,r&&J&&e.jsx(ke,{gizmoId:r,serverThreadId:c!=null?c:l}),a&&(c||l)&&e.jsx(e.Fragment,{children:K?e.jsx(x,{onClick:A,icon:F,label:w,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary mx-2",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:w}):e.jsx(P,{label:u.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx(O,{"data-testid":"share-chat-button",onClick:A,icon:F,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),e.jsxs("div",{className:"flex items-center",children:[!E&&!r&&G&&!q&&!b&&!_&&e.jsx(e.Fragment,{children:e.jsx(ye,{clientThreadId:o})}),n&&e.jsx("div",{className:"me-2",children:e.jsx(Ne,{clientThreadId:o,gizmoId:r})}),e.jsx(Be,{}),c!=null&&!E&&e.jsx(Pe,{conversation:D,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:e.jsx(Oe,{"aria-label":u.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}),s&&e.jsx(He,{clientThreadId:o})]})]})}const He=({clientThreadId:a})=>{const s=B(),n=de();return H.markStart("LoginOrProfileMenu"),H.markRendered("LoginOrProfileMenu"),e.jsxs(e.Fragment,{children:[!n&&!p(s)&&e.jsx(De,{}),!n&&e.jsx(Fe,{clientThreadId:a})]})};function ze({onClick:a,className:s,testId:n}){const i=N().formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return e.jsx(P,{label:i,className:S("flex",s),children:e.jsx(O,{onClick:h=>Ie(h,a),icon:Ue,"aria-label":i,"data-testid":n,as:"link"})})}function $e({clientThreadId:a,hideNewChat:s=!1}){const n=Ae({clientThreadId:a,location:"Navigation actions"});return Se()?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{}),!s&&e.jsx(ze,{onClick:n})]}):null}function Re(){const a=N(),s=pe(),{isUnauthenticated:n}=xe(),o=_e(Ee,we,!1,!0);return n||s?null:e.jsx(P,{label:a.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx(O,{"aria-label":a.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{R.setSidebarOpen(!0)},icon:o})})}function De(){const a=B(),s=ge(),n=Le(),o=he(Ge.signUpCta),i=me(),c=z(a,"3637408529").get("is_desktop_primary_auth_button_on_right",!1),u="Chat header",f=()=>{k(a,{fallbackScreenHint:"login",callback:l=>{y.logLogInButtonClicked({location:u,provider:l})},skipLoginModal:!1})},b=()=>{k(a,{fallbackScreenHint:"signup",callback:l=>{y.logSignUpButtonClicked({location:u,provider:l})},skipLoginModal:!1})},r=()=>{k(a,{fallbackScreenHint:"login_or_signup",callback:l=>{y.logLoginOrSignUpButtonClicked({location:u,provider:l})},skipLoginModal:!1})},v=e.jsx(x,{onClick:f,color:s?"primary":"secondary","data-testid":"login-button",className:S(!s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(M,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),d=e.jsx(x,{color:s?"secondary":"primary",onClick:b,"data-testid":"signup-button",className:S(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(M,j({},o))},"signup"),m=e.jsx(x,{color:"primary",onClick:r,"data-testid":"login-or-signup-button",className:S(s&&"screen-arch:hidden md:screen-arch:flex"),children:e.jsx(M,j({},i))},"signup"),g=n?[m]:s?[v,d]:[d,v];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:c?g.reverse():g})}const Ge=ee({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Ve as C,Re as E,He as L,$e as N,De as a,ze as b};
//# sourceMappingURL=kj8rd4pu8k32z2dy.js.map
