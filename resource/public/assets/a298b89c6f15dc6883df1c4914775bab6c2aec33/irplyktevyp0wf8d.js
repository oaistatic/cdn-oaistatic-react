var ye=Object.defineProperty;var se=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var re=(e,s,n)=>s in e?ye(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,Y=(e,s)=>{for(var n in s||(s={}))we.call(s,n)&&re(e,n,s[n]);if(se)for(var n of se(s))ve.call(s,n)&&re(e,n,s[n]);return e};import{c as _e,r as c,j as t,b as q,d as le,A as G,m as W,M as ne}from"./n75kuy1cx6f5mogg.js";import{R as Se,A as je,i as ce,dg as Ne,P as z,f4 as Ee,bN as ke,bK as ae,cS as Ce,bQ as Me,e as J,B as U,dG as Pe,is as Ae,aa as Le}from"./ewse8exzafeu10ji.js";import{s as K,R as Te}from"./beo5w9ntzdfg3ynk.js";import{b2 as de,b1 as ue,md as me,me as Re,jP as Ie,dF as pe,dm as Oe,mf as ze,cW as De,mg as Fe,mh as Ue}from"./ny10lj7zpuz89fvf.js";import{M as $e,O as We}from"./k9lj1k5c1512zkua.js";import{S as Ke}from"./fb5r26w2lbkp5hh3.js";import"./d1fqp7rhwvsd6omt.js";import"./l7fq2etjjq5drfgp.js";async function qe(e,s){try{return(await Se.safePost("/onboarding/steps",{requestBody:{main_usages:e,variant:s},authOption:je.SendIfAvailable})).steps}catch(n){return[]}}function Ve(){"use forget";var y,_,I,d;const e=_e.c(14),s=ce(),{markAsViewed:n,eligible:p,isLoading:r}=de(ue.CreateExampleChatsOnboarding);let o;e[0]!==s?(o=me(s,!1),e[0]=s,e[1]=o):o=e[1];const m=o,a=c.useRef(!1),{session:i}=Ne(),g=(_=(y=i==null?void 0:i.user)==null?void 0:y.id)!=null?_:void 0,b=(d=(I=i==null?void 0:i.account)==null?void 0:I.id)!=null?d:void 0;let w;e[2]!==b||e[3]!==s||e[4]!==p||e[5]!==r||e[6]!==n||e[7]!==m||e[8]!==g?(w=f=>{!p||r||a.current||(a.current=!0,n(),z.logEventWithStatsig("Onboarding: Create Example Chats","chatgpt_onboarding_flow_create_example_chats"),Promise.all(f.map(x=>{var N;if(x.step_type==="usage_question")return Promise.resolve();const l=x.step_metadata;x.step_type!=="dalle"&&m.get("use_dynamic_response",!1)&&l!=null&&l.onboarding&&(delete l.onboarding.system_hints,delete l.onboarding.hardcoded_response);const L=Ee();return ke.initThread({clientThreadId:L,conversationMode:{kind:ae.PrimaryAssistant},userId:g,accountId:b,disableConversationNavigation:!0}),Re({ctx:s,clientThreadId:L,eventSource:"url",promptMessage:Ce(x.step_prompt,l!=null?l:void 0,{real_author:Me.Onboarding}),completionMetadata:{isOnboardingConversation:!0,conversationMode:{kind:ae.PrimaryAssistant},systemHints:(N=l==null?void 0:l.onboarding)==null?void 0:N.system_hints},skipNotification:!0})})).catch(Be))},e[2]=b,e[3]=s,e[4]=p,e[5]=r,e[6]=n,e[7]=m,e[8]=g,e[9]=w):w=e[9];const M=w;let P;return e[10]!==p||e[11]!==r||e[12]!==M?(P={eligible:p,isLoading:r,createExampleChats:M},e[10]=p,e[11]=r,e[12]=M,e[13]=P):P=e[13],P}function Be(){z.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_creating_example_chats"})}function Xe({item:e,onClick:s}){var n;return t.jsx("li",{className:"first:border-t-0",children:t.jsxs("button",{className:"hover:bg-token-interactive-bg-secondary-hover flex w-full cursor-pointer items-start gap-3 rounded-2xl px-4 py-4 text-start sm:px-6",onClick:p=>s(p,e),children:[t.jsx("div",{className:"mt-0.5 text-xl",children:e.iconImageUrl?t.jsx("img",{src:e.iconImageUrl,alt:e.title,className:"h-6 w-6 rounded-full"}):e.icon?t.jsx("span",{"aria-hidden":!0,children:e.icon}):t.jsx(Ie,{category:(n=e.category)!=null?n:"onboarding",useV2Colors:!0})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-token-text-primary text-base font-medium",children:e.title}),t.jsx("div",{className:"text-token-text-secondary mt-1 text-sm leading-5",children:e.body})]}),t.jsx(pe,{className:"icon mt-0.5 shrink-0 opacity-60"})]})})}function fe({onAutoAdvance:e,enabled:s,delayMs:n=5e3,idleRestartMs:p=400,elementRef:r,dependencies:o=[]}){const m=c.useRef(null),a=c.useRef(null),i=()=>{m.current!=null&&(window.clearTimeout(m.current),m.current=null),a.current!=null&&(window.clearTimeout(a.current),a.current=null)};c.useEffect(()=>{if(i(),!!s)return m.current=window.setTimeout(()=>{e()},n),i},[s,n,e,...o]),c.useEffect(()=>{if(!s)return;const g=r==null?void 0:r.current,b=g!=null?g:window,w=()=>{m.current!=null&&(window.clearTimeout(m.current),m.current=null),a.current!=null&&window.clearTimeout(a.current),a.current=window.setTimeout(()=>{s&&(m.current!=null&&window.clearTimeout(m.current),m.current=window.setTimeout(()=>{e()},n))},p)};return b.addEventListener("scroll",w,{passive:!0}),b.addEventListener("wheel",w,{passive:!0}),()=>{b.removeEventListener("scroll",w),b.removeEventListener("wheel",w),i()}},[s,n,p,e,r==null?void 0:r.current,...o])}const V=le({cardsAriaLabel:{id:"prompt-new-user-onboarding.cards-aria-label",defaultMessage:"Starter examples"},dotsAriaLabel:{id:"prompt-new-user-onboarding.dots-aria-label",defaultMessage:"Card {current} of {total}"},prevCardAriaLabel:{id:"prompt-new-user-onboarding.prev-card-aria-label",defaultMessage:"Previous idea"},nextCardAriaLabel:{id:"prompt-new-user-onboarding.next-card-aria-label",defaultMessage:"Next idea"}}),Ge=60,xe=5e3,ge=400;function He({items:e,onSelect:s,onSubmit:n,className:p}){const r=q(),o=c.useRef(null),m=c.useRef(null),a=c.useRef(null),[i,g]=c.useState(0),[b,w]=c.useState(0),M=c.useRef({vw:0,paddingLeft:0,gapPx:0,cardWidth:0,slotWidth:1,centerTarget:0,s:0}),P=e[i];c.useEffect(()=>{s(P,i)},[s,P,i]),c.useEffect(()=>{var f;const d=e[i];d&&z.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:i,prompt_id:(f=d.id)!=null?f:String(i)})},[e,i]),c.useEffect(()=>{const d=o.current;if(!d)return;let f=null,x=d.scrollLeft,l=performance.now();const L=160,N=v=>{const k=a.current;k&&(k.style.transform="translate3d(".concat(v,"px, 0, 0)"))},T=()=>{const{vw:v,paddingLeft:k,slotWidth:h,centerTarget:E,s:C,cardWidth:D}=M.current,u=(d.scrollLeft+v/2-k-D/2)/(h||1),j=Math.max(0,Math.min(e.length-1,u)),R=Math.round(j);g(F=>F!==R?R:F);const O=j*(_+C)+_/2;N(E-O)},A=()=>{f=null,T();const v=performance.now(),k=d.scrollLeft;Math.abs(k-x)>.1&&(l=v,x=k),v-l<L&&(f=window.requestAnimationFrame(A))},S=()=>{f==null&&(x=d.scrollLeft,l=performance.now(),f=window.requestAnimationFrame(A))};return T(),d.addEventListener("scroll",S,{passive:!0}),d.addEventListener("wheel",S,{passive:!0}),()=>{d.removeEventListener("scroll",S),d.removeEventListener("wheel",S),f!=null&&window.cancelAnimationFrame(f)}},[e.length]),c.useEffect(()=>{const d=o.current,f=m.current;if(!d||!f)return;const x=()=>{const l=d.getBoundingClientRect(),L=f.getBoundingClientRect(),N=l.width,T=window.getComputedStyle(d),A=parseFloat(T.paddingLeft||"0"),S=parseFloat((T.columnGap||T.gap||"0").toString())||0,v=Math.max(0,N-2*A),k=v+S,h=Math.max(0,N/2-_/2-Ge),E=l.left-L.left+N/2;M.current={vw:N,paddingLeft:A,gapPx:S,cardWidth:v,slotWidth:k,centerTarget:E,s:h},w(h);const C=(d.scrollLeft+N/2-A-v/2)/(k||1),D=Math.max(0,Math.min(e.length-1,C)),u=Math.round(D);g(O=>O!==u?u:O);const j=D*(_+h)+_/2,R=a.current;R&&(R.style.transform="translate3d(".concat(E-j,"px, 0, 0)"))};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[e.length]);const y=d=>{const f=o.current;if(!f)return;const l=f.querySelectorAll('li[data-card="true"]')[d];l&&l.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})};fe({onAutoAdvance:()=>{const d=(i+1)%e.length;y(d)},enabled:e.length>1,delayMs:xe,idleRestartMs:ge,elementRef:o,dependencies:[i,e.length,y]});const _=180,I=c.useMemo(()=>{const d=Math.max(0,i-1),f=Math.min(e.length-1,i+1);return e.map((x,l)=>{var S,v;if(l<d||l>f)return null;const L=(S=x.id)!=null?S:l,N=l===i,T=N?1:.9,A=N?1:.5;return t.jsx("div",{className:"pointer-events-none flex items-center justify-center",style:{position:"absolute",top:0,left:l*(_+b),height:_,width:_,transform:"scale(".concat(T,")"),opacity:A,transition:"transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 300ms cubic-bezier(0.2, 0.8, 0.2, 1)",willChange:"transform, opacity"},children:x.iconImageUrl||x.coverImageUrl?t.jsx("img",{src:(v=x.iconImageUrl)!=null?v:x.coverImageUrl,alt:"",className:"rounded-3xl",style:{height:_,width:_}}):t.jsx("div",{className:"flex items-center justify-center text-3xl",style:{height:_,width:_},children:x.icon})},L)})},[e,i,b]);return t.jsx("div",{ref:m,className:J(p,"relative"),children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 overflow-hidden",style:{height:_},"aria-hidden":!0,children:t.jsx("div",{ref:a,className:"pointer-events-none absolute start-0 top-0",style:{height:_,willChange:"transform"},"aria-hidden":!0,children:I})}),t.jsx("ul",{ref:o,className:"no-scrollbar flex max-h-full snap-x snap-mandatory scroll-ps-5 scroll-pe-5 gap-4 overflow-x-auto scroll-smooth px-5 pb-10","aria-label":r.formatMessage(V.cardsAriaLabel),children:e.map((d,f)=>{var x;return t.jsx("li",{"data-card":"true",className:"max-h-full shrink-0 snap-center [scroll-snap-stop:always]",children:t.jsx("div",{className:J("relative h-full w-[calc(100vw-2.5rem)] rounded-3xl text-start sm:w-[260px]","focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"),style:{"--accent":d.accentColor},children:t.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"relative",style:{height:_,width:_},"aria-hidden":!0}),t.jsx("div",{className:"text-token-text-primary text-center text-2xl leading-tight font-medium sm:text-xl",children:d.title}),t.jsx(he,{prompt:d.prompt||d.body,onSubmit:l=>n(l,d,f)})]})})},(x=d.id)!=null?x:f)})}),t.jsx("div",{className:"mt-2 flex items-center justify-center gap-2 pb-4 sm:hidden",children:e.map((d,f)=>t.jsx("button",{"aria-label":r.formatMessage(V.dotsAriaLabel,{current:f+1,total:e.length}),"aria-current":i===f,className:J("h-2 w-2 rounded-full bg-current transition-colors",i===f?"text-token-text-primary":"bg-token-bg-secondary"),onClick:()=>y(f)},f))})]})})}function Qe({items:e,onSelect:s,onSubmit:n,className:p}){var b;const[r,o]=c.useState(0),[m,a]=c.useState(0),i=e[r],g=e[m];return c.useEffect(()=>{s(i,r)},[s,i,r]),c.useEffect(()=>{var M;const w=e[r];w&&z.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:r,prompt_id:(M=w.id)!=null?M:String(r)})},[e,r]),t.jsx("div",{className:p,children:t.jsxs("div",{className:"tall:gap-8 flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(G,{mode:"sync",children:g&&t.jsx(W.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 start-1/2 top-1/2 -z-10 h-[160%] w-[100%] -translate-x-1/2 -translate-y-1/2",initial:{opacity:0},animate:{opacity:.2},exit:{opacity:0},transition:{duration:.6,ease:[.2,.8,.2,1]},style:{backgroundImage:"radial-gradient(closest-side, ".concat(g.accentColor," 0%, transparent 80%)")}},(b=g.id)!=null?b:m)}),t.jsx(Ye,{items:e,activeIndex:r,onWillChange:w=>{a(w)},onChange:w=>{o(w)}})]}),g&&t.jsx(G,{mode:"wait",children:t.jsxs(W.div,{className:"flex max-w-[320px] flex-col items-center gap-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.3,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:8,transition:{duration:.3,ease:[.2,.8,.2,1]}},children:[t.jsx("div",{className:"text-token-text-primary text-2xl leading-tight font-medium sm:text-xl",children:g.title}),t.jsx("div",{className:"sm:min-h-24",children:t.jsx(he,{prompt:g.prompt||g.body,onSubmit:w=>n(w,g,m)})})]},m)})]})})}const ee=228,oe=190,Ze=160,ie=180,te=350;function Ye({items:e,activeIndex:s,onChange:n,onWillChange:p}){const r=q(),o=e.length,[m,a]=c.useState(null),[i,g]=c.useState("idle"),[b,w]=c.useState(!1),M=c.useRef(null),P=c.useRef(null);c.useEffect(()=>()=>{M.current!=null&&window.clearTimeout(M.current),P.current!=null&&window.cancelAnimationFrame(P.current)},[]);const[y,_]=c.useState(ee);c.useEffect(()=>{const u=()=>{const j=window.innerHeight||800,O=(Math.max(600,Math.min(800,j))-600)/200,F=Math.round(oe+(ee-oe)*O);_(F)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);const I=y/ee,d=Math.round(Ze*I),f=y/d,x=(y+d)/2+ie,l=(u,j)=>(u%j+j)%j,L=l(s-1,o),N=l(s+1,o),T=l(s-2,o),A=l(s+2,o),S=c.useCallback(u=>{if(b||o<=1)return;w(!0),a(u),g("prepare");const j=l(u==="right"?s+1:s-1,o);p==null||p(j),P.current=window.requestAnimationFrame(()=>{P.current=window.requestAnimationFrame(()=>{g("slide"),M.current=window.setTimeout(()=>{a(null),g("idle"),w(!1),n(l(u==="right"?s+1:s-1,o))},te)})})},[b,o,s,p,n]);if(fe({onAutoAdvance:()=>S("right"),enabled:o>1&&!b,delayMs:xe,idleRestartMs:ge,dependencies:[s,S,b]}),o===0)return null;const v=[-2,-1,0,1,2].map(u=>u*x),k=[{key:"left-".concat(L),index:L,slot:1},{key:"center-".concat(s),index:s,slot:2},{key:"right-".concat(N),index:N,slot:3}];let h=k;if(m==="right"){const u=[{key:"farRight-".concat(A),index:A,slot:4,fadeIn:!0}];h=[...k,...u]}else m==="left"&&(h=[...[{key:"farLeft-".concat(T),index:T,slot:0,fadeIn:!0}],...k]);const E=u=>{if(m==null||i==="idle"||i==="prepare")return v[u];if(m==="right"){const j=Math.max(u-1,0);return v[j]}else{const j=Math.min(u+1,4);return v[j]}},C=(u,j)=>{const R=E(u),O=u===2?30:u===1||u===3?20:10,F=!b&&o>1&&(u===1||u===3),B=R===v[2],H=R===v[1]||R===v[3],Q=d,Z=B?f:1,X=B?1:H?.5:0;return{x:R,z:O,cardSize:Q,scale:Z,opacity:j&&i==="prepare"?0:X,isDisabled:!F}},D=u=>{u.key==="ArrowLeft"?(u.preventDefault(),S("left")):u.key==="ArrowRight"&&(u.preventDefault(),S("right"))};return t.jsxs("div",{className:"relative flex w-full items-center justify-center py-2 outline-none",tabIndex:0,"aria-label":r.formatMessage(V.cardsAriaLabel),onKeyDown:D,children:[t.jsx("div",{className:"relative overflow-hidden",style:{height:y,width:3*y+2*ie},children:h.map(({key:u,index:j,slot:R,fadeIn:O})=>{const{x:F,z:B,cardSize:H,scale:Q,opacity:Z,isDisabled:X}=C(R,O);return t.jsx(Je,{item:e[j],translateX:F,zIndex:B,onClick:()=>S(R===1?"left":"right"),cardSize:H,scale:Q,opacity:Z,isDisabled:X},u)})}),t.jsx(U,{color:"ghost","aria-label":r.formatMessage(V.prevCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% - ".concat(y/2+20+36,"px)")},onClick:()=>S("left"),disabled:b||o<=1,icon:Oe}),t.jsx(U,{color:"ghost","aria-label":r.formatMessage(V.nextCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% + ".concat(y/2+20,"px)")},onClick:()=>S("right"),disabled:b||o<=1,icon:pe})]})}function Je({item:e,translateX:s,zIndex:n,onClick:p,cardSize:r,scale:o,opacity:m,isDisabled:a}){var i;return t.jsx("button",{className:"absolute start-1/2 top-1/2 flex items-center justify-center rounded-3xl",style:{transform:"translate3d(-50%, -50%, 0) translate3d(".concat(s,"px, 0, 0) scale(").concat(o,")"),height:"".concat(r,"px"),width:"".concat(r,"px"),transition:"transform ".concat(te,"ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity ").concat(te,"ms cubic-bezier(0.2, 0.8, 0.2, 1)"),willChange:"transform, opacity",opacity:m,zIndex:n},onClick:p,disabled:a,children:e.iconImageUrl||e.coverImageUrl?t.jsx("img",{src:(i=e.iconImageUrl)!=null?i:e.coverImageUrl,alt:"",className:"rounded-3xl",style:{maxHeight:"".concat(r,"px"),maxWidth:"".concat(r,"px")}}):t.jsx("div",{className:"text-6xl","aria-hidden":!0,children:e.icon})})}function he({prompt:e,onSubmit:s}){const n=q();return t.jsxs("div",{className:"group bg-token-bg-elevated-primary border-token-border-light inline-flex items-end justify-center gap-3 self-stretch rounded-3xl border p-3 ps-4 shadow-xl backdrop-blur-[20px]",children:[t.jsx("div",{className:"text-token-text-primary flex-1 justify-end text-sm leading-tight font-normal duration-300 sm:opacity-65 sm:group-hover:opacity-100",children:e}),t.jsx(U,{icon:Ke,size:"small",label:n.formatMessage(K.tryNow),onClick:s,className:"h-7 w-7 transition-all duration-300 sm:opacity-65 sm:group-hover:opacity-100"})]})}const $=le({subtitleCards:{id:"prompt-new-user-onboarding.subtitle-cards-2",defaultMessage:"Try one of these ideas to see how ChatGPT works."},close:{id:"prompt-new-user-onboarding.close",defaultMessage:"Close"},skip:{id:"prompt-new-user-onboarding.skip",defaultMessage:"Skip"}}),be={work:["help_me_get_recognized","anime_style_portrait","document_summary"],school:["fix_procrastination","anime_style_portrait","create_a_quiz"],personalTasks:["meal_prep","anime_style_portrait","upgrade_skin_care"],funAndEntertainment:["promo_code","action_figure_portrait","color_theory"],other:["be_my_personal_trainer","anime_style_portrait","color_theory"]};function et(e){return Object.prototype.hasOwnProperty.call(be,e)}function tt({cardItems:e,isUserTriggered:s,handleSelect:n,onClose:p}){const r=q(),[o,m]=c.useState(0),a=!Le(),i=(g,b)=>{m(b)};return t.jsxs(We,{className:"flex h-full flex-col gap-6",children:[t.jsx("p",{className:"text-token-text-secondary sm:tall:text-3xl sm:tall:font-medium sm:tall:font-medium sm:tall:mb-4 sm:short:mt-4 mx-auto min-h-0 max-w-[280px] shrink text-center text-base max-sm:mt-10 sm:max-w-[420px]",children:r.formatMessage($.subtitleCards)}),t.jsx("div",{className:"flex min-h-0 flex-1 flex-col justify-center gap-4",children:a?t.jsx(He,{items:e,onSelect:i,onSubmit:n,className:"flex min-h-0 flex-1 flex-col justify-center"}):t.jsx(Qe,{items:e,onSelect:i,onSubmit:n,className:"sm:pb-6"})}),t.jsxs("div",{className:"mx-auto flex w-full shrink-0 flex-col gap-2 px-6 pb-6 sm:max-w-[380px]",children:[t.jsx(U,{size:"large",color:"primary",fullWidth:!0,onClick:g=>n(g,e[o],o),children:r.formatMessage(K.tryNow)}),t.jsx(U,{size:"large",color:"ghost",fullWidth:!0,onClick:()=>p==null?void 0:p(),children:s?r.formatMessage($.close):r.formatMessage($.skip)})]})]})}function st({starters:e,handleSelect:s,isUserTriggered:n,onClose:p}){const r=q();return c.useEffect(()=>{!e||e.length===0||e.forEach((o,m)=>{var a;z.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:m,prompt_id:(a=o.id)!=null?a:""})})},[e]),t.jsxs("div",{className:"tall:gap-16 flex h-full flex-col gap-6 sm:mx-auto sm:max-w-[480px] sm:px-3",children:[t.jsxs("div",{className:"flex flex-col gap-2 px-5 pt-6 sm:px-8 sm:pt-7",children:[t.jsx("h2",{className:"text-token-text-primary text-center text-3xl font-medium",children:r.formatMessage(K.promptOnboardingTitle)}),t.jsx("p",{className:"text-token-text-secondary text-center text-base",children:r.formatMessage(K.promptOnboardingSubtitle)})]}),t.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto px-2 pb-8",children:t.jsx("ul",{className:"divide-token-border-light divide-y",children:e.map((o,m)=>{var a;return t.jsx(Xe,{item:o,onClick:(i,g)=>s(i,g,m)},(a=o.id)!=null?a:m)})})}),t.jsx("div",{className:"px-6 pb-6",children:t.jsx(U,{size:"large",color:"secondary",fullWidth:!0,onClick:()=>p==null?void 0:p(),children:n?r.formatMessage($.close):r.formatMessage($.skip)})})]})}function ft({clientThreadId:e,onClose:s}){const n=ce(),p=me(n,!1),r=p.get("prompt_onboarding_enable_usage_selection",!1),o=p.get("prompt_onboarding_prompt_variant",""),m=p.get("prompt_onboarding_example_chats_prompt_variant",""),[a,i]=c.useState(r?null:["other"]),[g,b]=c.useState(!1),w=q(),M=ze({clientThreadId:e}),{markAsViewed:P,isUserTriggered:y,onboardingStyle:_}=De(),I=c.useRef(null);c.useEffect(()=>{P(),z.logEventWithStatsig("Onboarding Shown","chatgpt_onboarding_flow_shown",{isUserTriggered:y?"true":"false"})},[P,y]);const d=c.useMemo(()=>{const h=["work","school","funAndEntertainment"],E=new Set(a!=null?a:[]);if(E.size===0)return"other";for(const C of h)if(E.has(C))return C;for(const C of E)if(et(C))return C;return"other"},[a]),f=Fe(),x=c.useMemo(()=>y?f:o!=="use_case"?f.filter(h=>h.isFeatured):be[d].map(h=>f.find(E=>E.id===h)).filter(h=>h!==void 0),[f,y,d,o]);c.useEffect(()=>{x.length>0&&Ue(x,e)},[x,e]);const l=c.useCallback(h=>(I.current||(I.current=qe(h,m===""?void 0:m)),I.current),[m]),{createExampleChats:L,eligible:N,isLoading:T}=Ve();c.useEffect(()=>{a!=null&&l(a)},[l,a]);const A=c.useCallback(h=>{const E=h!=null?h:a;!N||T||E==null||l(E).then(C=>{L(C)}).catch(()=>{z.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_fetching_onboarding_steps"})})},[L,N,T,l,a]),S=(h,E,C)=>{var D;try{s==null||s(),M({suggestedPrompt:E,index:C,isOnboarding:!y}),A(),z.logEventWithStatsig("Onboarding Try Prompt","chatgpt_onboarding_flow_try_prompt",{index:C,prompt_id:(D=E.id)!=null?D:String(C),isUserTriggered:y?"true":"false"})}catch(u){z.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{error:u instanceof Error?u.message:String(u)})}},v=()=>{const h=a!=null?a:["other"];z.logEventWithStatsig("Onboarding Dismissed","chatgpt_onboarding_flow_dismissed",{isUserTriggered:y?"true":"false"}),s==null||s(),A(h)},k=()=>{y?v():b(!0)};return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35},className:"absolute inset-0 bg-black/60","aria-hidden":"true",onClick:h=>{h.stopPropagation(),y&&v()}}),t.jsx(G,{children:t.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.35},className:"bg-token-bg-primary relative z-10 flex h-full w-full flex-col items-center justify-center rounded-none",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},onClick:h=>h.stopPropagation(),children:t.jsxs("div",{className:"flex max-h-full w-full flex-col gap-6 max-sm:h-full",children:[t.jsx("div",{className:"absolute end-3 top-3 z-20 hidden sm:block",children:t.jsx(U,{icon:Pe,onClick:v,color:"ghost",className:"h-9 w-9",label:w.formatMessage($.close)})}),t.jsx(G,{mode:"wait",children:a==null?t.jsx($e,{mainUsagesProp:a!=null?a:[],onSelectMainUsages:i,onSkip:()=>i(["other"])},"main-usage-question"):g?t.jsx(rt,{onClose:v,createExampleChats:A},"all-set-page"):_==="cards"?t.jsx(tt,{cardItems:x,isUserTriggered:y,handleSelect:S,onClose:k},"cards-variant"):t.jsx(st,{starters:x,handleSelect:S,isUserTriggered:y,onClose:k},"list-variant")})]})})})]})}function rt({onClose:e,createExampleChats:s}){const{eligible:n,isLoading:p,markAsViewed:r}=de(ue.Onboarding);return c.useEffect(()=>{n&&!p&&r()},[n,p,r]),c.useEffect(()=>{s()},[s]),t.jsxs("div",{className:"mx-auto flex h-full w-full flex-col items-center justify-center gap-16 p-6 sm:max-w-[380px]",children:[t.jsxs("div",{className:"flex min-h-0 flex-col items-center justify-center gap-4 max-sm:flex-1",children:[t.jsx(W.div,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:360,damping:24,mass:.8,duration:.6},children:t.jsx(Ae,{className:"text-token-text-primary h-10 w-10 text-5xl"})}),t.jsx(W.p,{className:"text-token-text-primary text-center text-3xl",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut",delay:.5},children:t.jsx(ne,Y({},K.allSet))})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6",children:[t.jsx("div",{className:"text-token-text-secondary relative mt-auto w-full text-center text-base",children:t.jsx(Te,{})}),t.jsx(U,{size:"large",color:"primary",fullWidth:!0,onClick:e,children:t.jsx(ne,Y({},K.done))})]})]})}export{ft as default};
//# sourceMappingURL=irplyktevyp0wf8d.js.map
