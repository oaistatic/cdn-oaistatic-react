var ft=Object.defineProperty,pt=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var te=(e,r,n)=>r in e?ft(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,N=(e,r)=>{for(var n in r||(r={}))ne.call(r,n)&&te(e,n,r[n]);if(D)for(var n of D(r))re.call(r,n)&&te(e,n,r[n]);return e},S=(e,r)=>pt(e,mt(r));var O=(e,r)=>{var n={};for(var t in e)ne.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&D)for(var t of D(e))r.indexOf(t)<0&&re.call(e,t)&&(n[t]=e[t]);return n};import{fk as gt,vS as dt,vT as ht,vU as yt,vV as se,uy as _t,oX as wt,it as ve,vW as v,vX as W,vY as z,vZ as Ae,v_ as bt,v$ as Nt,w0 as oe,w1 as Le,w2 as ae,w3 as ie,w4 as ce,w5 as xt,w6 as R,w7 as Ct,w8 as I,w9 as St,gk as Re,ft as Te,q1 as kt,ch as Et,v as C,eZ as vt,wa as De,v9 as Oe,va as Pe,vb as Fe,wb as F,wc as At,e as H,v8 as Me,h as Lt,wd as Rt,i as Tt,mm as Dt}from"./ny10lj7zpuz89fvf.js";import{i as Ot,eK as Pt,P as k,e as Ft,cw as Mt,$ as A,a0 as L,aT as Ut,f as jt,T as Bt,E as It,o$ as Ht,p0 as Ue,R as $t,iB as qt,ce as Gt,bZ as V,bK as Kt,cS as Wt,gz as zt,u8 as Vt,a3 as Yt,gs as Xt,gv as Qt,b_ as $,bY as je,u9 as Zt}from"./ewse8exzafeu10ji.js";import{r as x,j as _,R as Y,u as Jt,b as en,d as tn,f as nn}from"./n75kuy1cx6f5mogg.js";import{r as Be}from"./jocaiq9wugboh64i.js";import{r as rn,a as Ie}from"./idgulvc6m31b3k88.js";import{k as le}from"./lep2wptoy14cfe2w.js";const ue={},fe={},pe={};function me(e,r){return"".concat(e,"::").concat(r)}function sn(c){var l=c,{node:e,onClick:r,children:n,clientThreadId:t,messageId:s,href:i,disableSafeURLs:a}=l,o=O(l,["node","onClick","children","clientThreadId","messageId","href","disableSafeURLs"]);var Q,Z,J,ee;let u=r;const m=(Q=e==null?void 0:e.properties)==null?void 0:Q.href,f=x.useContext(gt),y=Ot(),g=Pt(t),p=dt(g,i,(f==null?void 0:f.useSafeUrls)&&!a),h=ht(t,s),w=(ee=(J=(Z=h==null?void 0:h.metadata)==null?void 0:Z.__internal)==null?void 0:J.utm_tags)!=null?ee:{},b=yt(t),M=!a&&p===void 0;return s!=null&&typeof m=="string"&&m.includes("/bing/redirect")&&(ue[s]||(k.logEvent("Browsing Show Bing Link",{id:s,content:m}),ue[s]=!0),u=T=>{fe[s]||(k.logEvent("Browsing Click Bing Link",{id:s,content:m}),fe[s]=!0),r==null||r(T)}),u=T=>{const U=""+m;if(s&&!pe[me(s,U)]){const ut=p||M?"URL Clicked Allowed":"URL Clicked Blocked";k.logEvent(ut,{id:s,content:U}),pe[me(s,U)]=!0}r==null||r(T),M&&i&&(T.preventDefault(),Mt(y,_t,{urls:se(i,w,b)}))},_.jsx(_.Fragment,{children:_.jsx("a",S(N({onClick:u},o),{className:Ft(o.className,M&&"cursor-pointer"),href:p&&se(p,w,b),rel:"noopener",children:n}))})}const on="w";function an(i){var a=i,{messageId:e,clientThreadId:r,text:n,children:t}=a,s=O(a,["messageId","clientThreadId","text","children"]);const o=window.location.origin,c="".concat(o,"?q=").concat(encodeURIComponent(n)),l=wt(),u=x.useCallback(async m=>{m.preventDefault(),A.count(L.DEFAULT,"instant_follow_up_anchor_clicked"),k.logEventWithStatsig("Instant Follow Up Anchor Clicked","chatgpt_instant_follow_up_anchor_clicked",{clientThreadId:r,messageId:e}),l(m,{text:n,type:ve.Reply},[],0)},[r,e,n,l]);return _.jsx(sn,S(N({},s),{href:c,disableSafeURLs:!0,clientThreadId:r,messageId:e,className:"cursor-pointer",onClick:u,children:t}))}const Qr=Y.memo(an),cn=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],ge={}.hasOwnProperty;function ln(e,r){const n=r||{};function t(s,...i){let a=t.invalid;const o=t.handlers;if(s&&ge.call(s,e)){const c=String(s[e]);a=ge.call(o,c)?o[c]:t.unknown}if(a)return a.call(this,s,...i)}return t.handlers=n.handlers||{},t.invalid=n.invalid,t.unknown=n.unknown,t}const un=/^>|^->|<!--|-->|--!>|<!-$/g,fn=[">"],pn=["<",">"];function mn(e,r,n,t){return t.settings.bogusComments?"<?"+v(e.value,Object.assign({},t.settings.characterReferences,{subset:fn}))+">":"<!--"+e.value.replace(un,s)+"-->";function s(i){return v(i,Object.assign({},t.settings.characterReferences,{subset:pn}))}}function gn(e,r,n,t){return"<!"+(t.settings.upperDoctype?"DOCTYPE":"doctype")+(t.settings.tightDoctype?"":" ")+"html>"}const d=$e(1),He=$e(-1),dn=[];function $e(e){return r;function r(n,t,s){const i=n?n.children:dn;let a=(t||0)+e,o=i[a];if(!s)for(;o&&W(o);)a+=e,o=i[a];return o}}const hn={}.hasOwnProperty;function qe(e){return r;function r(n,t,s){return hn.call(e,n.tagName)&&e[n.tagName](n,t,s)}}const X=qe({body:_n,caption:j,colgroup:j,dd:xn,dt:Nn,head:j,html:yn,li:bn,optgroup:Cn,option:Sn,p:wn,rp:de,rt:de,tbody:En,td:he,tfoot:vn,th:he,thead:kn,tr:An});function j(e,r,n){const t=d(n,r,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&W(t.value.charAt(0)))}function yn(e,r,n){const t=d(n,r);return!t||t.type!=="comment"}function _n(e,r,n){const t=d(n,r);return!t||t.type!=="comment"}function wn(e,r,n){const t=d(n,r);return t?t.type==="element"&&(t.tagName==="address"||t.tagName==="article"||t.tagName==="aside"||t.tagName==="blockquote"||t.tagName==="details"||t.tagName==="div"||t.tagName==="dl"||t.tagName==="fieldset"||t.tagName==="figcaption"||t.tagName==="figure"||t.tagName==="footer"||t.tagName==="form"||t.tagName==="h1"||t.tagName==="h2"||t.tagName==="h3"||t.tagName==="h4"||t.tagName==="h5"||t.tagName==="h6"||t.tagName==="header"||t.tagName==="hgroup"||t.tagName==="hr"||t.tagName==="main"||t.tagName==="menu"||t.tagName==="nav"||t.tagName==="ol"||t.tagName==="p"||t.tagName==="pre"||t.tagName==="section"||t.tagName==="table"||t.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function bn(e,r,n){const t=d(n,r);return!t||t.type==="element"&&t.tagName==="li"}function Nn(e,r,n){const t=d(n,r);return!!(t&&t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd"))}function xn(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd")}function de(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="rp"||t.tagName==="rt")}function Cn(e,r,n){const t=d(n,r);return!t||t.type==="element"&&t.tagName==="optgroup"}function Sn(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="option"||t.tagName==="optgroup")}function kn(e,r,n){const t=d(n,r);return!!(t&&t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot"))}function En(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot")}function vn(e,r,n){return!d(n,r)}function An(e,r,n){const t=d(n,r);return!t||t.type==="element"&&t.tagName==="tr"}function he(e,r,n){const t=d(n,r);return!t||t.type==="element"&&(t.tagName==="td"||t.tagName==="th")}const Ln=qe({body:Dn,colgroup:On,head:Tn,html:Rn,tbody:Pn});function Rn(e){const r=d(e,-1);return!r||r.type!=="comment"}function Tn(e){const r=new Set;for(const t of e.children)if(t.type==="element"&&(t.tagName==="base"||t.tagName==="title")){if(r.has(t.tagName))return!1;r.add(t.tagName)}const n=e.children[0];return!n||n.type==="element"}function Dn(e){const r=d(e,-1,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&W(r.value.charAt(0)))&&!(r.type==="element"&&(r.tagName==="meta"||r.tagName==="link"||r.tagName==="script"||r.tagName==="style"||r.tagName==="template"))}function On(e,r,n){const t=He(n,r),s=d(e,-1,!0);return n&&t&&t.type==="element"&&t.tagName==="colgroup"&&X(t,n.children.indexOf(t),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function Pn(e,r,n){const t=He(n,r),s=d(e,-1);return n&&t&&t.type==="element"&&(t.tagName==="thead"||t.tagName==="tbody")&&X(t,n.children.indexOf(t),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const P={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\0	\n\f\r \"&'/<=>".split(""),"\0	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\0	\n\f\r \"&'<=>`".split("")],["\0	\n\f\r \"&'<=>`".split(""),"\0	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Fn(e,r,n,t){const s=t.schema,i=s.space==="svg"?!1:t.settings.omitOptionalTags;let a=s.space==="svg"?t.settings.closeEmptyElements:t.settings.voids.includes(e.tagName.toLowerCase());const o=[];let c;s.space==="html"&&e.tagName==="svg"&&(t.schema=z);const l=Mn(t,e.properties),u=t.all(s.space==="html"&&e.tagName==="template"?e.content:e);return t.schema=s,u&&(a=!1),(l||!i||!Ln(e,r,n))&&(o.push("<",e.tagName,l?" "+l:""),a&&(s.space==="svg"||t.settings.closeSelfClosing)&&(c=l.charAt(l.length-1),(!t.settings.tightSelfClosing||c==="/"||c&&c!=='"'&&c!=="'")&&o.push(" "),o.push("/")),o.push(">")),o.push(u),!a&&(!i||!X(e,r,n))&&o.push("</"+e.tagName+">"),o.join("")}function Mn(e,r){const n=[];let t=-1,s;if(r){for(s in r)if(r[s]!==null&&r[s]!==void 0){const i=Un(e,s,r[s]);i&&n.push(i)}}for(;++t<n.length;){const i=e.settings.tightAttributes?n[t].charAt(n[t].length-1):void 0;t!==n.length-1&&i!=='"'&&i!=="'"&&(n[t]+=" ")}return n.join("")}function Un(e,r,n){const t=Ae(e.schema,r),s=e.settings.allowParseErrors&&e.schema.space==="html"?0:1,i=e.settings.allowDangerousCharacters?0:1;let a=e.quote,o;if(t.overloadedBoolean&&(n===t.attribute||n==="")?n=!0:(t.boolean||t.overloadedBoolean&&typeof n!="string")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const c=v(t.attribute,Object.assign({},e.settings.characterReferences,{subset:P.name[s][i]}));return n===!0||(n=Array.isArray(n)?(t.commaSeparated?bt:Nt)(n,{padLeft:!e.settings.tightCommaSeparatedLists}):String(n),e.settings.collapseEmptyAttributes&&!n)?c:(e.settings.preferUnquoted&&(o=v(n,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:P.unquoted[s][i]}))),o!==n&&(e.settings.quoteSmart&&oe(n,a)>oe(n,e.alternative)&&(a=e.alternative),o=a+v(n,Object.assign({},e.settings.characterReferences,{subset:(a==="'"?P.single:P.double)[s][i],attribute:!0}))+a),c+(o&&"="+o))}const jn=["<","&"];function Ge(e,r,n,t){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?e.value:v(e.value,Object.assign({},t.settings.characterReferences,{subset:jn}))}function Bn(e,r,n,t){return t.settings.allowDangerousHtml?e.value:Ge(e,r,n,t)}function In(e,r,n,t){return t.all(e)}const Hn=ln("type",{invalid:$n,unknown:qn,handlers:{comment:mn,doctype:gn,element:Fn,raw:Bn,root:In,text:Ge}});function $n(e){throw new Error("Expected node, not `"+e+"`")}function qn(e){const r=e;throw new Error("Cannot compile unknown node `"+r.type+"`")}const Gn={},Kn={},Wn=[];function zn(e,r){const n=r||Gn,t=n.quote||'"',s=t==='"'?"'":'"';if(t!=='"'&&t!=="'")throw new Error("Invalid quote `"+t+"`, expected `'` or `\"`");return{one:Vn,all:Yn,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||cn,characterReferences:n.characterReferences||Kn,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?z:Le,quote:t,alternative:s}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function Vn(e,r,n){return Hn(e,r,n,this)}function Yn(e){const r=[],n=e&&e.children||Wn;let t=-1;for(;++t<n.length;)r[t]=this.one(n[t],t,e);return r.join("")}function Xn(e){const r=this,n=N(N({},r.data("settings")),e);r.compiler=t;function t(s){return zn(s,n)}}const ye=/[#.]/g;function Qn(e,r){const n=e||"",t={};let s=0,i,a;for(;s<n.length;){ye.lastIndex=s;const o=ye.exec(n),c=n.slice(s,o?o.index:n.length);c&&(i?i==="#"?t.id=c:Array.isArray(t.className)?t.className.push(c):t.className=[c]:a=c,s+=c.length),o&&(i=o[0],s++)}return{type:"element",tagName:a||r||"div",properties:t,children:[]}}const Zn=new Set(["button","menu","reset","submit"]),q={}.hasOwnProperty;function Ke(e,r,n){const t=n&&nr(n);function s(i,a,...o){let c=-1,l;if(i==null){l={type:"root",children:[]};const u=a;o.unshift(u)}else if(l=Qn(i,r),l.tagName=l.tagName.toLowerCase(),t&&q.call(t,l.tagName)&&(l.tagName=t[l.tagName]),Jn(a,l.tagName)){let u;for(u in a)q.call(a,u)&&er(e,l.properties,u,a[u])}else o.unshift(a);for(;++c<o.length;)G(l.children,o[c]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return s}function Jn(e,r){return e==null||typeof e!="object"||Array.isArray(e)?!1:r==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:r==="button"?Zn.has(e.type.toLowerCase()):!("value"in e)}function er(e,r,n,t){const s=Ae(e,n);let i=-1,a;if(t!=null){if(typeof t=="number"){if(Number.isNaN(t))return;a=t}else typeof t=="boolean"?a=t:typeof t=="string"?s.spaceSeparated?a=ae(t):s.commaSeparated?a=ie(t):s.commaOrSpaceSeparated?a=ae(ie(t).join(" ")):a=_e(s,s.property,t):Array.isArray(t)?a=t.concat():a=s.property==="style"?tr(t):String(t);if(Array.isArray(a)){const o=[];for(;++i<a.length;){const c=_e(s,s.property,a[i]);o[i]=c}a=o}if(s.property==="className"&&Array.isArray(r.className)){const o=a;a=r.className.concat(o)}r[s.property]=a}}function G(e,r){let n=-1;if(r!=null)if(typeof r=="string"||typeof r=="number")e.push({type:"text",value:String(r)});else if(Array.isArray(r))for(;++n<r.length;)G(e,r[n]);else if(typeof r=="object"&&"type"in r)r.type==="root"?G(e,r.children):e.push(r);else throw new Error("Expected node, nodes, or string, got `"+r+"`")}function _e(e,r,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||ce(n)===ce(r)))return!0}return n}function tr(e){const r=[];let n;for(n in e)q.call(e,n)&&r.push([n,e[n]].join(": "));return r.join("; ")}function nr(e){const r={};let n=-1;for(;++n<e.length;)r[e[n].toLowerCase()]=e[n];return r}const rr=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],sr=Ke(Le,"div"),or=Ke(z,"g",rr),B={html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"};function ar(e,r){return We(e,{})||{type:"root",children:[]}}function We(e,r){const n=ir(e,r);return n&&r.afterTransform&&r.afterTransform(e,n),n}function ir(e,r){switch(e.nodeType){case 1:return fr(e,r);case 3:return lr(e);case 8:return ur(e);case 9:return we(e,r);case 10:return cr();case 11:return we(e,r);default:return}}function we(e,r){return{type:"root",children:ze(e,r)}}function cr(){return{type:"doctype"}}function lr(e){return{type:"text",value:e.nodeValue||""}}function ur(e){return{type:"comment",value:e.nodeValue||""}}function fr(e,r){const n=e.namespaceURI,t=n===B.svg?or:sr,s=n===B.html?e.tagName.toLowerCase():e.tagName,i=n===B.html&&s==="template"?e.content:e,a=e.getAttributeNames(),o={};let c=-1;for(;++c<a.length;)o[a[c]]=e.getAttribute(a[c])||"";return t(s,o,ze(i,r))}function ze(e,r){const n=e.childNodes,t=[];let s=-1;for(;++s<n.length;){const i=We(n[s],r);i!==void 0&&t.push(i)}return t}new DOMParser;function pr(e,r){const n=mr(e);return ar(n)}function mr(e){const r=document.createElement("template");return r.innerHTML=e,r.content}const be=function(e,r,n){const t=xt(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof r=="number"){if(r<0||r===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(r=e.children.indexOf(r),r<0)throw new Error("Expected child node or index");for(;++r<e.children.length;)if(t(e.children[r],r,e))return e.children[r]},Ne=/\n/g,xe=/[\t ]+/g,K=R("br"),Ce=R(Nr),gr=R("p"),Se=R("tr"),dr=R(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",br,xr]),Ve=R(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function hr(e,r){const n=r||{},t="children"in e?e.children:[],s=Ve(e),i=Qe(e,{whitespace:n.whitespace||"normal"}),a=[];(e.type==="text"||e.type==="comment")&&a.push(...Xe(e,{breakBefore:!0,breakAfter:!0}));let o=-1;for(;++o<t.length;)a.push(...Ye(t[o],e,{whitespace:i,breakBefore:o?void 0:s,breakAfter:o<t.length-1?K(t[o+1]):s}));const c=[];let l;for(o=-1;++o<a.length;){const u=a[o];typeof u=="number"?l!==void 0&&u>l&&(l=u):u&&(l!==void 0&&l>-1&&c.push("\n".repeat(l)||" "),l=-1,c.push(u))}return c.join("")}function Ye(e,r,n){return e.type==="element"?yr(e,r,n):e.type==="text"?n.whitespace==="normal"?Xe(e,n):_r(e):[]}function yr(e,r,n){const t=Qe(e,n),s=e.children||[];let i=-1,a=[];if(dr(e))return a;let o,c;for(K(e)||Se(e)&&be(r,e,Se)?c="\n":gr(e)?(o=2,c=2):Ve(e)&&(o=1,c=1);++i<s.length;)a=a.concat(Ye(s[i],e,{whitespace:t,breakBefore:i?void 0:o,breakAfter:i<s.length-1?K(s[i+1]):c}));return Ce(e)&&be(r,e,Ce)&&a.push("	"),o&&a.unshift(o),c&&a.push(c),a}function Xe(e,r){const n=String(e.value),t=[],s=[];let i=0;for(;i<=n.length;){Ne.lastIndex=i;const c=Ne.exec(n),l=c&&"index"in c?c.index:n.length;t.push(wr(n.slice(i,l).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),i===0?r.breakBefore:!0,l===n.length?r.breakAfter:!0)),i=l+1}let a=-1,o;for(;++a<t.length;)t[a].charCodeAt(t[a].length-1)===8203||a<t.length-1&&t[a+1].charCodeAt(0)===8203?(s.push(t[a]),o=void 0):t[a]?(typeof o=="number"&&s.push(o),s.push(t[a]),o=0):(a===0||a===t.length-1)&&s.push(0);return s}function _r(e){return[String(e.value)]}function wr(e,r,n){const t=[];let s=0,i;for(;s<e.length;){xe.lastIndex=s;const a=xe.exec(e);i=a?a.index:e.length,!s&&!i&&a&&!r&&t.push(""),s!==i&&t.push(e.slice(s,i)),s=a?i+a[0].length:i}return s!==i&&!n&&t.push(""),t.join(" ")}function Qe(e,r){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":r.whitespace;case"textarea":return"pre-wrap"}}return r.whitespace}function br(e){return!!(e.properties||{}).hidden}function Nr(e){return e.tagName==="td"||e.tagName==="th"}function xr(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const Cr={},Sr=[];function Ze(e){const r=e||Cr;return function(n,t){Ct(n,"element",function(s,i){const a=Array.isArray(s.properties.className)?s.properties.className:Sr,o=a.includes("language-math"),c=a.includes("math-display"),l=a.includes("math-inline");let u=c;if(!o&&!c&&!l)return;let m=i[i.length-1],f=s;if(s.tagName==="code"&&o&&m&&m.type==="element"&&m.tagName==="pre"&&(f=m,m=i[i.length-2],u=!0),!m)return;const y=hr(f,{whitespace:"pre"});let g;try{g=le.renderToString(y,S(N({},r),{displayMode:u,throwOnError:!0}))}catch(h){const w=h,b=w.name.toLowerCase();t.message("Could not render math with KaTeX",{ancestors:[...i,s],cause:w,place:s.position,ruleId:b,source:"rehype-katex"}),b==="parseerror"?g=le.renderToString(y,S(N({},r),{displayMode:u,strict:"ignore",throwOnError:!1})):g=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(r.errorColor||"#cc0000"),title:String(h)},children:[{type:"text",value:y}]}]}typeof g=="string"&&(g=pr(g).children);const p=m.children.indexOf(f);return m.children.splice(p,1,...g),I})}}function kr(e){St(e,[/\r?\n|\r/g,Er])}function Er(){return{type:"break"}}function Je(){return function(e){kr(e)}}const et="sandbox:";function vr(e){const r=new URL(e).searchParams.get("se");if(!r)return!1;const n=Date.parse(r);return Number.isNaN(n)?!1:Date.now()>n}function Zr(s){var i=s,{messageId:e,clientThreadId:r,href:n}=i,t=O(i,["messageId","clientThreadId","href"]);const a=Jt(),[o,c]=x.useState(!1),l=n.substring(et.length),u=Ut(r),m=en(),f=jt(),y=x.useCallback(w=>{const b=document.createElement("a");b.href=w,b.click(),c(!1)},[]),g=x.useCallback(w=>{c(!1),f.danger(w,{toastId:"file_download_failed"})},[f]),p=Lr(o,e,u,l,g,y).data,h=x.useCallback(async w=>{if(r!==void 0){w.preventDefault();const b=(p==null?void 0:p.download_url)&&vr(p.download_url);(p===void 0||(p==null?void 0:p.status)!=="success"||b)&&a.invalidateQueries({queryKey:tt(e,l)}),(p==null?void 0:p.status)==="success"&&(p!=null&&p.download_url)&&!b?y(p.download_url):c(!0)}},[r,p,a,e,l,y]);return _.jsx(Bt,{closeOnOutsideClick:!1,label:_.jsxs("span",{className:"flex items-center gap-1",children:[o?m.formatMessage(ke.startingDownload):m.formatMessage(ke.downloadFile),o&&_.jsx(It,{})]}),side:"top",children:_.jsx("a",S(N({},t),{className:"cursor-pointer",onClick:w=>!o&&h(w)}))})}async function Ar(e,r,n){const t=await $t.safeGet("/conversation/{conversation_id}/interpreter/download",{parameters:{path:{conversation_id:r},query:{message_id:e,sandbox_path:n}}});if(t.status===qt.Success)return t;throw new Ue("Could not download file from advanced data analysis","error_code"in t?t.error_code:"unknown_error")}function Lr(e,r,n,t,s,i){const a=Ht();return nn({queryKey:tt(r,t),queryFn:()=>Ar(r,n,t).then(o=>((o==null?void 0:o.status)==="success"&&i(o.download_url),o)).catch(o=>{let c=a("default_download_link_error",{fileName:t});throw o instanceof Ue&&o.code!=null&&(c=a(o.code)),s==null||s(c),o}),enabled:!!(e&&r&&n&&t)})}function tt(e,r){return["downloadSandboxLink",e,r]}const ke=tn({downloadFile:{id:"SandboxDownload.downloadFile",defaultMessage:"Download file"},startingDownload:{id:"SandboxDownload.startingDownload",defaultMessage:"Starting download"}}),Rr="f",Jr="dr",nt=(e,r,n=!1)=>{const t=x.useRef(!1);x.useEffect(()=>{t.current||(t.current=!0,A.count(L.DEFAULT,"clickable_follow_up_text_shown"),n&&A.count(L.DEFAULT,"clickable_follow_up_deep_research_text_shown"),k.logEventWithStatsig("Clickable Follow Up Text Shown","chatgpt_clickable_follow_up_text_shown",N({},V({clientThreadId:e,messageId:r}))))},[e,r,n])},rt=({messageId:e,clientThreadId:r,text:n})=>{const t=Re(r),s=Gt.useStore(),i=Te(r);nt(r,e,!1);const a=x.useCallback(o=>{o.preventDefault(),A.count(L.DEFAULT,"clickable_follow_up_text_clicked"),k.logEventWithStatsig("Clickable Follow Up Text Clicked","chatgpt_clickable_follow_up_text_clicked",V({clientThreadId:r,messageId:e}));const c=s.getActiveSystemHintType();t({sourceEvent:o,promptMessage:Wt(n.toLowerCase(),{suggestion_type:ve.Reply}),completionMetadata:{systemHints:c?[c]:[],conversationMode:i!=null?i:{kind:Kt.PrimaryAssistant}}})},[r,i,e,s,t,n]);return _.jsx("span",{className:"decoration-token-text-secondary hover:text-token-text-secondary cursor-pointer underline decoration-dotted decoration-[12%] underline-offset-4 transition-colors duration-200 ease-in-out",onClick:a,children:n})},Tr=({messageId:e,clientThreadId:r,text:n})=>_.jsx(rt,{messageId:e,clientThreadId:r,text:n}),es=Y.memo(Tr),Dr=({messageId:e,clientThreadId:r,text:n})=>{const t=zt(),{setThreadSystemHintMode:s}=kt(),i=!!Vt(),a=Re(r),o=Te(r);nt(r,e,!0);const c=x.useCallback(l=>{l.preventDefault(),A.count(L.DEFAULT,"clickable_follow_up_text_clicked"),A.count(L.DEFAULT,"clickable_follow_up_deep_research_text_clicked"),k.logEventWithStatsig("Clickable Follow Up Text Clicked","chatgpt_clickable_follow_up_text_clicked",V({clientThreadId:r,messageId:e}));const u={clientThreadId:r};s(Yt.Research,!0,u);{const m=Xt(t);m.focus(),Qt(m,n)}},[r,e,n,t,s,o,a]);return i?_.jsx(rt,{messageId:e,clientThreadId:r,text:n}):_.jsxs("span",{className:"decoration-token-text-secondary hover:text-token-text-secondary cursor-pointer underline decoration-dotted decoration-[12%] underline-offset-4 transition-colors duration-200 ease-in-out",onClick:c,children:[_.jsx(Et,{className:"icon me-1 inline-block"}),n]})},Or=({messageId:e,clientThreadId:r,text:n})=>_.jsx(Dr,{messageId:e,clientThreadId:r,text:n}),ts=Y.memo(Or);function Pr(){return e=>{C(e,{tagName:"table"},r=>{var s,i,a,o,c,l,u,m;const n=(a=(i=(s=r.children.find(f=>E(f,"thead")))==null?void 0:s.children.find(f=>E(f,"tr")))==null?void 0:i.children.filter(f=>E(f,"th")))!=null?a:[],t=(l=(c=(o=r.children.find(f=>E(f,"tbody")))==null?void 0:o.children.filter(f=>E(f,"tr")))==null?void 0:c.map(f=>f.children.filter(y=>E(y,"td"))))!=null?l:[];for(let f=0;f<n.length;f++){const y=n[f];let g=Ee(y);for(let h=0;h<t.length;h++)g=Math.max(g,Ee((u=t[h])==null?void 0:u[f]));const p=g>160?"xl":g>100?"lg":g>40?"md":"sm";y.properties["data-col-size"]=p;for(let h=0;h<t.length;h++)(m=t[h])!=null&&m[f]&&(t[h][f].properties["data-col-size"]=p)}})}}function E(e,r){return e.type==="element"&&e.tagName===r}function Ee(e){let r=0;return e&&C(e,"text",n=>{r+=n.value.length}),r}const Fr=new Set([on,Rr]),ns=e=>e.startsWith(et)||Fr.has(e)||e.startsWith("tel:")||e.startsWith("sms:")?e:At(e);function st(){return e=>{C(e,"list",r=>{for(const n of r.children)n.spread=!0})}}function Mr(){return(e,r)=>{let n=0;const t=String(r.value);C(e,"containerDirective",s=>{var i,a,o,c;if(s.type==="containerDirective"&&s.name===$){const l=(a=(i=s.position)==null?void 0:i.start)==null?void 0:a.offset,u=(c=(o=s.position)==null?void 0:o.end)==null?void 0:c.offset;if(l==null||u==null)return;const f=t.slice(l,u).replace(/^:::[^\n]*\n?/,"").replace(/\n?:::\s*$/,""),y=s.data||(s.data={});y.hName=$;const g=n++,p=s.attributes||{};y.hProperties=S(N({},p),{content:f,index:g})}})}}function rs(e){return r=>{C(r,n=>{Object.defineProperties(n,{markdownSource:{get(){try{return e.slice(this.position.start.offset,this.position.end.offset)}catch(t){return""}}}})})}}const ss=[[Oe,{singleTilde:!1}],Je,st,[rn,{singleDollarTextMath:!1}],Pe,Mr,Ie,Fe,...F?[F]:[],Be,ot,at];function ot(){return e=>{C(e,"textDirective",r=>{r.name!==je&&(r.type="text",r.value=":".concat(r.name))})}}const Ur=/\u200b/g;function at(){return e=>{C(e,"text",r=>{r.value=r.value.replace(Ur,"")})}}function jr(){return e=>{var n;const r=(n=e.position)==null?void 0:n.end.offset;C(e,"element",(t,s)=>{var u;const{position:i}=t;if(!i)return;const{start:a,end:o}=i,c=a.offset,l=o.offset;(u=t.properties)!=null||(t.properties={}),c!=null&&(t.properties["data-start"]=c),l!=null&&(t.properties["data-end"]=l,r===l&&(t.properties["data-is-last-node"]=""),s===e.children.length-1&&(t.properties["data-is-only-node"]=""))})}}const os=[Ze,jr,Pr,[vt,{target:"_new",rel:"noopener noreferrer"}],De],Br=[[Ze,{output:"mathml"}],De],it=[[Oe,{singleTilde:!1}],Je,st,Pe,Ie,Fe,...F?[F]:[],Be,ot,at];function Ir(e,r){const n=Zt(e,r);return ct(n,r)}function ct(e,r){const n=H().use(Me).use(it).use([[lt,r!=null?r:[]]]).use(Lt,{rule:"-",tightDefinitions:!0,handlers:{text:o=>(o.value=o.value.replaceAll("\\[","["),o.value),break:()=>"\n",link:Hr}}),t=H().use(Rt).use(Br).use(Xn),s=n.runSync(n.parse(e)),i=n.stringify(s),a=t.stringify(t.runSync(s));return{"text/plain":i,"text/html":a}}const Hr=(e,r,n,t)=>{const s=n.createTracker(t),i=n.enter("link"),a=n.enter("label");let o=s.move("[");return o+=s.move(n.containerPhrasing(e,N({before:o,after:"]("},s.current()))),o+=s.move("]("),a(),o+=s.move(e.url.replace(/[\x00-\x1F\x7F-\x9F()"]/g,$r)),e.title&&(o+=s.move(" "+JSON.stringify(e.title))),o+=s.move(")"),i(),o};function $r(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0")}function lt(e){return r=>{const n={},t=(s,i)=>{var a;switch(i.type){case"grouped_webpages":{const o=[];for(const c of i.items)if(c.url&&c.title){let l=n[c.url];l||(l=n[c.url]={type:"definition",identifier:String(Object.keys(n).length+1),url:c.url,title:c.title}),o.push({type:"linkReference",referenceType:"shortcut",identifier:l.identifier,children:[{type:"text",value:(a=c.attribution)!=null?a:Dt(c.url)}]})}return o.length===0?[]:[{type:"text",value:"("},...o.flatMap((c,l,u)=>l<u.length-1?[c,{type:"text",value:", "}]:[c]),{type:"text",value:")"}]}case"title_citation":case"location_search":case"time":case"image_v2":case"nav_list":case"file_navlist":case"file":case"grouped_webpages_model_predicted_fallback":case"map":case"tldr":case"navigation":case"stock":case"calculator":case"python":case"container":case"code_execution":case"forecast":case"businesses_map":case"entity_metadata":case"video":case"entity":case"sources_footnote":case"sports_standings":case"sports_schedule":case"attribution":case"webpage_extended":case"checkout_confirmation":case"image_inline":case"image_group":case"product_entity":case"products":case"alt_text":case"product_reviews":case"product_rationale":case"dil":case"link_title":if(i.alt){const o=H().use(Me).use(it).parse(i.alt);if(s.type!=="textDirective")return o.children;const c=o.children[0];if(c.type==="paragraph")return c.children}return[];case"hidden":case"status":case"optimistic_image_citation":case"webpage":case"optimistic_image_inline":case"invalid":case"attribution_footer":case"sports":case"grouped_webpages_v2":return[]}};C(r,Tt,(s,i,a)=>{var l;if(a==null||i==null)return;if(s.type==="containerDirective"&&s.name===$){const u=Array.isArray(s.children)?s.children:[];return a.children.splice(i,1,...u),[I,i]}const o=qr(s,e),c=o?(l=t(s,o))!=null?l:[s]:[];return a.children.splice(i,1,...c),[I,i+c.length]}),r.children.push(...Object.values(n))}}function qr(e,r){var n;if(e.name===je){const t=(n=e.attributes)==null?void 0:n.index;if(t)return r[parseInt(t,10)]}}const as=Object.freeze(Object.defineProperty({__proto__:null,markdownToClipboardContent:ct,messageTextToClipboardContent:Ir,replaceDirectivesForClipboard:lt},Symbol.toStringTag,{value:"Module"}));export{Rr as C,on as I,sn as M,ss as R,et as S,lt as a,at as b,Xn as c,os as d,Zr as e,ot as f,Qr as g,es as h,Jr as i,ts as j,rs as k,as as l,ct as m,Je as r,ns as u};
//# sourceMappingURL=pa7wf55rjdocapqd.js.map
