var K=Object.freeze,V=Object.defineProperty,Me=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var J=(s,e,o)=>e in s?V(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,U=(s,e)=>{for(var o in e||(e={}))be.call(e,o)&&J(s,o,e[o]);if(Q)for(var o of Q(e))Ae.call(e,o)&&J(s,o,e[o]);return s},ee=(s,e)=>Me(s,ve(e));var te=(s,e)=>K(V(s,"raw",{value:K(e||s.slice())}));import{d as ce,b as de,j as l,M as W,c as ue}from"./n75kuy1cx6f5mogg.js";import{P as Y,lC as fe,i as Z,ex as B,T as Pe,pu as je,F as ye,cm as ge,f as pe,gn as _e,a6 as Ue,iR as me,pv as he,pw as Fe,px as Le,gk as $,y as Te,fI as ke,gi as Ce,md as Ee,gA as De,O as Ie,gj as se,kT as Re,py as Ne,pz as Oe,pA as ze,pB as Se,jT as oe,jS as X}from"./ewse8exzafeu10ji.js";import{fm as ae,fn as Be,fo as $e,fp as we,fq as le,fr as He,fs as Xe,ft as We,fu as Ye}from"./ny10lj7zpuz89fvf.js";import{u as Ze}from"./j2ui4c2m3nj8pqst.js";function lt({clientThreadId:s,openFileDialog:e,icon:o,isDisabled:n=!1,isSmall:u=!1,showLabel:a=!1,showUpsell:r=!1,hideBorder:t=!1,highlightTooltip:f=!1,disabledReason:c,currentModelName:F,visualTreatment:M,showMenuForNoAuth:d,modelSupportsImages:x}){const i=de(),g=fe(),p=Z();n=(n||!!g)&&!r;const m=l.jsxs(Be,{disabled:n,$showLabel:a,$hideBorder:t,$isSmall:u,$visualTreatment:M,onClick:b=>{if(b.preventDefault(),d||r){Y.logNoAuthAttachButtonClicked({location:d?"No auth file upload":"No auth upsell"});return}e()},"aria-label":$e(p,i,n,c,F),children:[o,a&&l.jsx(we,{})]}),v=l.jsx("div",{className:"flex",children:m});if(d||r){const b=d?l.jsx(He,{openFileDialog:e,showMenuForNoAuth:!0,modelSupportsImages:x}):l.jsx(je,{location:"attach",statsig_login_event:"chatgpt_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_composer_upsell_signup_button_clicked"}),h=l.jsx(B.BasicTrigger,{asChild:!0,children:v});return l.jsxs(B.Root,{children:[d?l.jsx(le,{clientThreadId:s,rateLimitPopup:g,highlightTooltip:f,disabled:n,children:h}):l.jsx(Pe,{label:l.jsx(W,{id:"wkpQmi",defaultMessage:"Upload files and more"}),side:"bottom",open:f||void 0,children:h}),l.jsx(B.Portal,{children:l.jsx(B.Content,{alignOffset:-8,side:"bottom",size:"small",className:"radix-side-bottom:flex-col-reverse flex flex-col",children:b})})]})}return l.jsx(le,{disabled:n,clientThreadId:s,rateLimitPopup:g,highlightTooltip:f,children:v})}function qe({code:s,message:e}){switch(s){case ae.FileTooLarge:return ie.errorFileTooLarge;case ae.TooManyFiles:return Y.logEvent("Uploaded Max Files Error"),ie.errorTooManyFiles;default:return e}}const ie=ce({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Upload files and more"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."}}),re=ce({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function Ge(s){if(!s.accept||Object.keys(s.accept).length===0)return[];const e=[];return Object.values(s.accept).forEach(o=>e.push(...o)),e.sort()}function it(s){"use forget";var G;const e=ue.c(48),{className:o,children:n,clientThreadId:u,currentModelConfig:a,noKeyboard:r}=s,t=de(),f=pe(),c=Z();let F;e[0]!==c?(F=Te(c),e[0]=c,e[1]=F):F=e[1];const M=F;let d;if(e[2]!==c){const j=ge(c).flags;d=j==null?void 0:j.includes(me.NoAuthEnableFileUploads),e[2]=c,e[3]=d}else d=e[3];const x=d,i=We(u),g=ke();let p;e[4]!==g||e[5]!==i||e[6]!==a?(p=Ce(a,i,g),e[4]=g,e[5]=i,e[6]=a,e[7]=p):p=e[7];const m=p,v=m!==$.None,b=Ee(Ke),h=(m===$.Multimodal?he:Fe)-b.length,R=h<=0,{getGizmoId:q}=De();let L;e[8]!==u||e[9]!==c?(L=Se(c,u),e[8]=u,e[9]=c,e[10]=L):L=e[10];const A=Ie(L),N=Array.isArray(A)&&A.length>0;let y;e[11]!==i||e[12]!==a?(y=se(a,i),e[11]=i,e[12]=a,e[13]=y):y=e[13];let _;e[14]!==i||e[15]!==a?(_=(G=Re(a,i))==null?void 0:G.attachments,e[14]=i,e[15]=a,e[16]=_):_=e[16];const{handleFileAccepted:T}=Je(t,m,y,"drag",q,_,N?A:void 0),xe=fe();let O;e[17]!==i||e[18]!==a||e[19]!==M||e[20]!==x?(O=!M&&x?se(a,i):Ne(a,i),e[17]=i,e[18]=a,e[19]=M,e[20]=x,e[21]=O):O=e[21];const k=Oe(O),w=!v||R||xe!=null;let C;e[22]!==t||e[23]!==f||e[24]!==m?(C=j=>Qe(j,t,f,m),e[22]=t,e[23]=f,e[24]=m,e[25]=C):C=e[25];let z;e[26]!==k||e[27]!==T||e[28]!==r||e[29]!==h||e[30]!==w||e[31]!==C?(z=U({maxFiles:h,disabled:w,noClick:!0,noKeyboard:r,onDropAccepted:T,onDropRejected:C,multiple:!0,maxSize:ze},k),e[26]=k,e[27]=T,e[28]=r,e[29]=h,e[30]=w,e[31]=C,e[32]=z):z=e[32];const{getRootProps:I,isDragActive:H}=Ze(z);let P,E,D;if(e[33]!==n||e[34]!==o||e[35]!==k||e[36]!==I||e[37]!==H){const j=Ge(k);e[41]!==o||e[42]!==I?(P=I({className:o}),e[41]=o,e[42]=I,e[43]=P):P=e[43],E=n,D=H&&l.jsxs(Ve,{children:[l.jsx(Ye,{}),l.jsx("h3",{children:l.jsx(W,U({},re.dragInstructions))}),l.jsx("h4",{className:"w-2/3 text-center",children:j.length>0?j.join(", "):l.jsx(W,U({},re.dragAllAccepted))})]}),e[33]=n,e[34]=o,e[35]=k,e[36]=I,e[37]=H,e[38]=P,e[39]=E,e[40]=D}else P=e[38],E=e[39],D=e[40];let S;return e[44]!==P||e[45]!==E||e[46]!==D?(S=l.jsxs("div",ee(U({},P),{children:[E,D]})),e[44]=P,e[45]=E,e[46]=D,e[47]=S):S=e[47],S}function Ke(s){return s.files}function Qe(s,e,o,n){const{errors:u}=s[0];u.forEach(a=>{const r=qe(a);typeof r=="string"?o.danger(r,{hasCloseButton:!0,loggingTitle:"File upload error",loggingDescription:r,toastId:"file_upload_error"}):o.danger(e.formatMessage(r,{size:Le,maxNum:n===$.Multimodal?he:Fe}),{hasCloseButton:!0,loggingTitle:r.defaultMessage||"File upload error",loggingDescription:r.defaultMessage||"File upload error",toastId:"file_upload_error"})})}function Je(s,e,o,n,u,a,r){"use forget";const t=ue.c(18),f=Z(),c=ge(f).flags,F=pe(),M=_e(),{isUnauthenticated:d}=Ue(),x=r!=null?r:void 0,i=c==null?void 0:c.includes(me.NoAuthEnableFileUploads);let g;t[0]!==f?(g=Xe(f,!0),t[0]=f,t[1]=g):g=t[1];const{persistFilesToLibrary:p,doubleWriteFilesToLibrary:m}=g;let v;t[2]!==a||t[3]!==x||t[4]!==u||t[5]!==s||t[6]!==m||t[7]!==p||t[8]!==d||t[9]!==o||t[10]!==i||t[11]!==M||t[12]!==F||t[13]!==n||t[14]!==e?(v=async(R,q)=>{Y.logEvent("Upload File",{client:"web",eventSource:n,intent:e.toString()});const L=u!=null?await u():void 0;R.length>0&&R.forEach(A=>{const N=U(U({gizmoId:L},i&&{isUnauthenticated:d}),x&&x.length>0?{contextScopes:x}:{}),y=[M,oe(A),A,e,o,s,F,N,a];if(e===$.Retrieval){let _=Promise.resolve(),T=Promise.resolve();p&&(T=X.uploadFile(M,"".concat(oe(A),":lib"),A,e,o,s,F,N,a,void 0,!0,!0)),(m||!p)&&(_=X.uploadFile(...y,void 0,!1,p)),Promise.all([_,T])}else X.uploadFile(...y)})},t[2]=a,t[3]=x,t[4]=u,t[5]=s,t[6]=m,t[7]=p,t[8]=d,t[9]=o,t[10]=i,t[11]=M,t[12]=F,t[13]=n,t[14]=e,t[15]=v):v=t[15];const b=v;let h;return t[16]!==b?(h={handleFileAccepted:b},t[16]=b,t[17]=h):h=t[17],h}var ne;const Ve=ye.div(ne||(ne=te(['absolute z-50 inset-0 flex gap-2 flex-col justify-center items-center after:contents-[""] after:absolute after:opacity-80 after:z-[-1] after:bg-token-main-surface-primary after:inset-0'])));export{Ve as D,it as F,lt as P,Ge as g,Qe as h,Je as u};
//# sourceMappingURL=h2dwuj1m5ps9l7uv.js.map
