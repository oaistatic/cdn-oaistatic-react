var ce=Object.defineProperty,ue=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var M=(t,e,s)=>e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,h=(t,e)=>{for(var s in e||(e={}))P.call(e,s)&&M(t,s,e[s]);if(S)for(var s of S(e))U.call(e,s)&&M(t,s,e[s]);return t},k=(t,e)=>ue(t,le(e));var z=t=>typeof t=="symbol"?t:t+"",A=(t,e)=>{var s={};for(var n in t)P.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&S)for(var n of S(t))e.indexOf(n)<0&&U.call(t,n)&&(s[n]=t[n]);return s};var L=(t,e,s)=>M(t,typeof e!="symbol"?e+"":e,s);import{l as I,k as de,f as w,c as J,r as _,j as y,b as he,M as G,A as me,m as pe}from"./n75kuy1cx6f5mogg.js";import{k as j,R as c,at as W,L as g,p as f,aj as ee,kM as _e,sU as b,b8 as N,eG as ge,T as fe,e as E,mL as we,$ as ke,a0 as ye,P as ve,jg as Re,sV as be,x as Ce,db as Te}from"./ewse8exzafeu10ji.js";import{W as Q,a as V,b as Z}from"./jocaiq9wugboh64i.js";import{fz as F,fy as B,mq as qe,jv as Se,jw as We,sY as Y,sZ as X}from"./ny10lj7zpuz89fvf.js";function dt(t,e,s,n){switch(t.type){case"repo_not_accessible":n.danger(s.formatMessage({id:"wham.whamComposer.repoNotAccessible",defaultMessage:"Can’t access GitHub repository. Verify your repository access on GitHub, or reconnect your GitHub account in Codex Settings."}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"Can't access GitHub repository. Verify your repository access on GitHub, or reconnect your GitHub account in Codex Settings."});return;case"missing_github_connector_link":n.danger(s.formatMessage({id:"wham.whamComposer.missingGithubConnectorLink",defaultMessage:"No GitHub connection. Please reconnect your GitHub account in Codex Settings."}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"No GitHub connection. Please reconnect your GitHub account in Codex Settings."});return;case"non_terminal_turn":n.danger(s.formatMessage({id:"wham.whamComposer.nonTerminalTurn",defaultMessage:"Task already has a running turn"}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"Task already has a running turn"});return;case"repo_not_initialized":n.danger(s.formatMessage({id:"wham.whamComposer.repoNotInitialized",defaultMessage:"GitHub Repository must be initialized to be used within Codex"}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"GitHub Repository must be initialized to be used within Codex"});return;case"branch_creation_not_allowed":n.danger(s.formatMessage({id:"wham.whamComposer.branchCreationNotAllowed",defaultMessage:"Branch creation unauthorized for this repository. Please check your GitHub permissions."}),{loggingTitle:"Branch creation unauthorized for this repository. Please check your GitHub permissions."});return;case"pull_request_not_allowed":n.danger(s.formatMessage({id:"wham.whamComposer.pullRequestNotAllowed",defaultMessage:"Repository does not allow pull requests from Codex. Please check your GitHub permissions."}),{loggingTitle:"Repository does not allow pull requests from Codex. Please check your GitHub permissions."});return;case"verified_commits_required":n.danger(s.formatMessage({id:"wham.whamComposer.verifiedCommitsRequired",defaultMessage:"Codex does not currently support PRs in repositories that require verified commits"}),{loggingTitle:"Codex does not currently support PRs in repositories that require verified commits"});return;case"binary_files_not_supported":n.danger(s.formatMessage({id:"wham.whamComposer.binaryFilesNotSupported",defaultMessage:"Binary files are not supported"}),{id:e,duration:10,hasCloseButton:!0});return;case"commit_pattern_required":n.danger(s.formatMessage({id:"wham.whamComposer.commitPatternRequired",defaultMessage:"Commit message must match a given regex pattern"}),{id:e,duration:10,hasCloseButton:!0});return;case"pull_request_updated_outside_of_codex":n.danger(s.formatMessage({id:"wham.whamComposer.pullRequestUpdatedOutsideOfCodex",defaultMessage:"Codex does not currently support updating PRs that are updated outside of Codex. For now, please create a new PR."}),{id:e,duration:10,hasCloseButton:!0});return;case"pull_request_not_open":n.danger(s.formatMessage({id:"wham.whamComposer.pullRequestNotOpen",defaultMessage:"Pull request is no longer open. Refreshing status…"}),{id:e,duration:10,hasCloseButton:!0});return;case"branch_no_longer_exists":n.danger(s.formatMessage({id:"wham.whamComposer.branchNoLongerExists",defaultMessage:"Existing PR branch appears to no longer exist. Please create a new PR."}),{id:e,duration:10,hasCloseButton:!0});return;case"pull_request_not_found_on_task":n.danger(s.formatMessage({id:"wham.whamComposer.pullRequestNotFoundOnTask",defaultMessage:"Pull request not found for task"}),{id:e,duration:10,hasCloseButton:!0,loggingTitle:"Binary files are not supported"});return;default:return n.danger(t.payload.message,{id:e,duration:5,hasCloseButton:!0}),null}}class Ee extends j{constructor(s,n,a,r,i){super(s.message,n,a,r,i);L(this,"type");L(this,"payload");this.type=s.type,this.payload=s}}function xe(t){const e=t.detail;if(e&&typeof e.type=="string"&&typeof e.message=="string"){const s={type:e.type,message:e.message};throw new Ee(s,t.status,{},t.requestId,t.rawError)}throw t}class m{static async _wrapWhamRequest(e){try{return await e()}catch(s){throw s instanceof j&&xe(s),s}}static getTasks(e=10,s=null,n="current"){return this._wrapWhamRequest(()=>c.safeGet("/wham/tasks",{parameters:{query:{limit:e,cursor:s,task_filter:n}}}))}static getTasksForList(e=10,s=null,n="current"){return this._wrapWhamRequest(()=>c.safeGet("/wham/tasks/list",{parameters:{query:{limit:e,cursor:s,task_filter:n}}}))}static getTaskDetails(e){return this._wrapWhamRequest(()=>c.safeGet("/wham/tasks/{task_id}",{parameters:{path:{task_id:e}}}))}static getTaskTurnPR(e,s){return this._wrapWhamRequest(()=>c.safeGet("/wham/tasks/{task_id}/turns/{task_turn_id}/pr",{parameters:{path:{task_id:e,task_turn_id:s}}}))}static getUserHandle(){return this._wrapWhamRequest(()=>c.safeGet("/wham/task_suggestions/github/user_handle",{}))}static getTaskTurn(e,s){return this._wrapWhamRequest(()=>c.safeGet("/wham/tasks/{task_id}/turns/{task_turn_id}",{parameters:{path:{task_id:e,task_turn_id:s}}}))}static getRateLimitStatus(){return this._wrapWhamRequest(()=>c.safeGet("/wham/usage",{}))}static getLatestTaskTurns(e,s){return this._wrapWhamRequest(()=>c.safeGet("/wham/tasks/{task_id}/turns/{task_turn_id}/latest_turn",{parameters:{path:{task_id:e,task_turn_id:s}}}))}static getGithubInstallations(){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/installations",{}))}static getGithubInstallationsV2(){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/installations/v2",{}))}static getGithubInstallationEvents(){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/installations/events",{}))}static getGithubInstallationEventsV2(){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/installations/events/v2",{}))}static feedback({thumbRating:e,text:s,taskId:n,turnId:a,shareUrl:r,pullRequestUrl:i,category:d}){return this._wrapWhamRequest(()=>c.safePost("/wham/feedback",{requestBody:{thumb_rating:e,text:s,conversation_id:null,message_id:null,task_id:n,turn_id:a,share_url:r,pull_request_url:i,category:d}}))}static archiveTask(e){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/archive",{parameters:{path:{task_id:e}}}))}static recoverTask(e){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/recover",{parameters:{path:{task_id:e}}}))}static updatePr(e,s,n){return this._wrapWhamRequest(()=>c.safePatch("/wham/tasks/{task_id}/turns/{task_turn_id}/pr/{pr_id}",{parameters:{path:{task_id:e,task_turn_id:s,pr_id:n}}}))}static createPr(e,s,n,a){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/pr",{parameters:{path:{task_id:e,task_turn_id:s}},requestBody:{mode:n,add_codex_tag:a}}))}static getRepositoriesByInstallationId(e,s,n){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/repositories/v2/{installation_id}",{parameters:{path:{installation_id:e},query:{page:s,per_page:n}}}))}static searchRepositories(e){var n;const s=k(h({},e),{per_page:(n=e.per_page)!=null?n:20});return this._wrapWhamRequest(()=>c.safeGet("/wham/github/repositories/search",{parameters:{query:s}}))}static searchRepositoriesAllInstallations(e){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/repositories/search/all-installations",{parameters:{query:e}}))}static listRepositories(e){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/list-repositories",{parameters:{query:e}}))}static getSampleTasks(e=20,s=null){return this._wrapWhamRequest(()=>c.safeGet("/share/codex/task_samples",{parameters:{query:{limit:e,cursor:s}}}))}static getRepository(e){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/repositories/{repo_id}",{parameters:{path:{repo_id:e}}}))}static getUserPullRequests(e,{limit:s=20,state:n="open",includeDiff:a=!1,includeComments:r=!1}={}){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/repositories/{repo_id}/pull-requests",{parameters:{path:{repo_id:e},query:{limit:s,state:n,include_diff:a,include_comments:r}}}))}static searchBranchesByRepository(e,s,n=10,a=null){return this._wrapWhamRequest(()=>c.safeGet("/wham/github/branches/{repo_id}/search",{parameters:{path:{repo_id:e},query:{query:s,page_size:n,cursor:a}}}))}static getEnvironmentWithCreatorAndMachine(e){return this._wrapWhamRequest(()=>c.safeGet("/wham/environments/{environment_id}/with-creator-and-machine",{parameters:{path:{environment_id:e}}}))}static getEnvironmentWithCreators(e=10,s=null,n=!1){return this._wrapWhamRequest(()=>c.safeGet("/wham/environments/with-creators",{parameters:{query:{limit:e,cursor:s,enforce_repo_access:n}}}))}static updateEnvironment(e,s){return this._wrapWhamRequest(()=>c.safePatch("/wham/environments/{environment_id}",{parameters:{path:{environment_id:e}},requestBody:s}))}static deleteEnvironment(e){return this._wrapWhamRequest(()=>c.safeDelete("/wham/environments/{environment_id}",{parameters:{path:{environment_id:e}}}))}static getEnvironments(){return this._wrapWhamRequest(()=>c.safeGet("/wham/environments",{}))}static getRecentEnvironments(){return this._wrapWhamRequest(()=>c.safeGet("/wham/environments/recent",{}))}static getMachines(){return this._wrapWhamRequest(()=>c.safeGet("/wham/machines",{}))}static createEnvironment(e){var i,d;const s=e.envVars.reduce((l,u)=>(l[u.key]=u.value,l),{}),n=e.secrets.reduce((l,u)=>(l[u.key]=u.value,l),{}),a=(d=(i=e.share_targets)==null?void 0:i.map(l=>l.trim()))==null?void 0:d.filter(Boolean),r=e.share_settings==="private"?[]:a==null?void 0:a.map(l=>({email:l,permission:"editor",type:"user"}));return this._wrapWhamRequest(()=>c.safePost("/wham/environments",{requestBody:{label:e.label,machine_id:e.machine,repos:[e.repositoryId],description:e.description,setup:e.setupCommands,maintenance_setup:e.maintenanceSetupCommands,workspace_dir:e.workspaceDirectory,agent_network_access:e.agentNetworkAccess,share_settings:e.share_settings,share_targets:r,env_vars:s,secrets:n,auto_setup_settings:e.autoSetupSettings,cache_settings:e.cacheSettings}}))}static runEnvironmentTestCommand(e){return this._wrapWhamRequest(()=>c.safePost("/wham/environments/test/{test_session_id}/command",{parameters:{path:{test_session_id:e.testSessionId}},requestBody:{command:e.command}}))}static getUserPreferences(){return this._wrapWhamRequest(()=>c.safeGet("/wham/settings/user",{}))}static getUserPreferencesConfig(){return this._wrapWhamRequest(()=>c.safeGet("/wham/settings/configs/user-preferences",{}))}static getCodeReviewRepositories({page:e=1,perPage:s=100,search:n,nextToken:a}){return this._wrapWhamRequest(()=>c.safeGet("/wham/settings/code_review",{parameters:{query:{page:e,per_page:s,search:n,next_token:a}}}))}static searchCodeReviewRepositories({query:e,limit:s,installationIds:n}){const a={query:e};return s!=null&&(a.limit=s),n!=null&&n.length&&(a.installation_ids=n),this._wrapWhamRequest(async()=>await c.safeGet("/wham/settings/code_review_search",{parameters:{query:a}}))}static getCodeReviewRepository(e,s){return this._wrapWhamRequest(()=>c.safeGet("/wham/settings/code_review/{repo_id}",{parameters:{path:{repo_id:"".concat(e,"-").concat(s)}}}))}static updateCodeReviewRepositories(e){return this._wrapWhamRequest(()=>c.safePatch("/wham/settings/code_review",{requestBody:e}))}static updateUserPreferences(e){return this._wrapWhamRequest(()=>c.safePatch("/wham/settings/user",{requestBody:{branch_format:e.branchFormat,git_diff_mode:e.diffView,custom_instructions:e.customInstructions,code_review_preference:e.codeReviewPreference,alpha_opt_in:e.alphaOptIn}}))}static getTurns(e){return this._wrapWhamRequest(()=>c.safeGet("/wham/tasks/{task_id}/turns",{parameters:{path:{task_id:e}}}))}static getTurnLogs(e,s){return this._wrapWhamRequest(()=>c.safeGet("/wham/tasks/{task_id}/turns/{task_turn_id}/logs",{parameters:{path:{task_id:e,task_turn_id:s}}}))}static async createNewTask(e,s,n,a=!1,r,i=[],d=[]){const u=[{type:"message",role:"user",content:[{content_type:"text",text:n}]},...i,...d],p=await F("codex_create_task_turn").catch(v=>{W.addError(v)}),R=B(null,null,null,p);return this._wrapWhamRequest(()=>c.safePost("/wham/tasks",{requestBody:k(h({new_task:{environment_id:e,branch:s,run_environment_in_qa_mode:a}},r?{metadata:{best_of_n:r}}:{}),{input_items:u}),additionalHeaders:R}))}static async createFixReviewTask(e,s){const n=await F("codex_create_task_turn").catch(r=>{W.addError(r)}),a=B(null,null,null,n);return this._wrapWhamRequest(async()=>{const r={review_fix:{task_id:e,turn_id:s},input_items:[]};return await c.safePost("/wham/tasks",{requestBody:r,additionalHeaders:a})})}static async createNewTaskWithEditedPrompt(e,s,n,a,r=!1){const i=await m.createNewTask(s,n,a,r);return m.archiveTask(e).catch(()=>{}),i}static createCodeReviewTask({installationId:e,repoId:s,prNumber:n}){return this._wrapWhamRequest(()=>c.safePost("/wham/github/installations/{installation_id}/repositories/{repo_id}/pull-request/{pr_number}/task",{parameters:{path:{installation_id:e,repo_id:s,pr_number:n}},requestBody:{action:"review"}}))}static createCodeReviewTasksForOpenPullRequests({installationId:e,repoId:s,limit:n=10}){const a=Math.min(Math.max(n!=null?n:10,1),10);return this._wrapWhamRequest(()=>c.safePost("/wham/github/installations/{installation_id}/repositories/{repo_id}/pull-requests/review",{parameters:{path:{installation_id:e,repo_id:s}},requestBody:{action:"review",limit:a}}))}static async createFollowUpTask(e,s,n,a,r=!1,i=1,d=[]){const u=[{type:"message",role:"user",content:[{content_type:"text",text:n}]},...d];a.forEach(v=>{u.push({type:"comment",position:v.position,content:v.content})});const p=await F("codex_create_task_turn").catch(v=>{W.addError(v)}),R=B(null,null,null,p);return this._wrapWhamRequest(()=>c.safePost("/wham/tasks",{requestBody:{follow_up:{task_id:e,turn_id:s,run_environment_in_qa_mode:r},metadata:{best_of_n:i},input_items:u},additionalHeaders:R}))}static cancelTurnDeprecated(e,s){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/cancel",{parameters:{path:{task_id:e,task_turn_id:s}}}))}static cancelTask(e){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/cancel",{parameters:{path:{task_id:e}}}))}static markTurnAsRead(e){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/mark_read",{parameters:{path:{task_id:e}}}))}static markTurnViewed(e,s){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/viewed",{parameters:{path:{task_id:e,task_turn_id:s}}}))}static viewSpeculativeTurn(e,s){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/speculative_turns/{task_turn_id}/view",{parameters:{path:{task_id:e,task_turn_id:s}}}))}static discardTurn(e,s){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/discard",{parameters:{path:{task_id:e,task_turn_id:s}}}))}static undoDiscardedTurns(e,s){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/undo_all_discards_for_siblings",{parameters:{path:{task_id:e,task_turn_id:s}}}))}static copyGitApply(e,s,n){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/turns/{task_turn_id}/copy_git_apply",{parameters:{path:{task_id:e,task_turn_id:s}},requestBody:{includes_apply_command:n}}))}static forkSharedTask(e){return this._wrapWhamRequest(()=>c.safePost("/wham/tasks/{task_id}/fork",{parameters:{path:{task_id:e}}}))}static getRateLimit(){return c.safeGet("/wham/tasks/rate_limit")}static invalidateEnvironmentCache(e){return this._wrapWhamRequest(()=>c.safePost("/wham/environments/{environment_id}/reset-cache",{parameters:{path:{environment_id:e}}}))}static getDailyCodeReviewCounts(){return this._wrapWhamRequest(()=>c.safeGet("/wham/analytics/daily-code-review-counts",{}))}static getDailyCodeReviewMetrics(){return this._wrapWhamRequest(()=>c.safeGet("/wham/analytics/daily-code-review-metrics",{}))}static getDailyWebTaskCounts(){return this._wrapWhamRequest(()=>c.safeGet("/wham/analytics/daily-web-task-counts",{}))}static getDailyCliVsCodeUsageCounts(){return this._wrapWhamRequest(()=>c.safeGet("/wham/analytics/daily-cli-vscode-usage-counts",{}))}}const Me=7*24*60*60*1e3,Ae=5,Le={},Fe={};function te(){return Date.now()}function H(t){return typeof t=="object"&&t!=null}function se(t){return te()-t.updatedAt>Me}function ae(t){if(!H(t))return null;const e=t.branch,s=t.updatedAt;return typeof e!="string"||typeof s!="number"?null:{branch:e,updatedAt:s}}function Be(t){if(!H(t)||Array.isArray(t))return h({},Le);const e={};for(const[s,n]of Object.entries(t)){const a=ae(n);a&&(e[s]=a)}return e}function Ge(t){if(!H(t)||Array.isArray(t))return h({},Fe);const e={};for(const[s,n]of Object.entries(t)){if(!Array.isArray(n))continue;const a=[];for(const r of n){const i=ae(r);i&&a.push(i)}a.length>0&&(e[s]=a)}return e}function D(t){Object.keys(t).length===0?g.removeItem(f.WhamRepoRecentBranchesById):g.setItem(f.WhamRepoRecentBranchesById,t)}function K(t,e){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s+=1){const n=t[s],a=e[s];if(n.branch!==a.branch||n.updatedAt!==a.updatedAt)return!1}return!0}function x(t){if(!t||t.length===0)return[];const e=[...t].sort((a,r)=>r.updatedAt-a.updatedAt),s=[],n=new Set;for(const a of e)if(!se(a)&&!n.has(a.branch)&&(s.push(a),n.add(a.branch),s.length===Ae))break;return s}function De(t){let e=!1;for(const[s,n]of Object.entries(t)){const a=x(n);if(a.length===0){n.length>0&&(e=!0,delete t[s]);continue}K(a,n)||(t[s]=a,e=!0)}return e}function Oe(){const t=g.getItem(f.WhamRepoLastBranchById);return Be(t)}function Ie(t){var a;const e=Oe();if(Object.keys(e).length===0)return!1;let n=!1;for(const[r,i]of Object.entries(e)){if(se(i)){n=!0;continue}const d=(a=t[r])!=null?a:[],l=x([i,...d]);l.length>0&&!K(l,d)&&(t[r]=l,n=!0)}return g.removeItem(f.WhamRepoLastBranchById),n}function $(){const t=g.getItem(f.WhamRepoRecentBranchesById),e=Ge(t),s=De(e),n=Ie(e);return(s||n)&&D(e),e}function je(t,e,s){var r;if(s.length===0){t[e]&&(delete t[e],D(t));return}const n=x(s),a=(r=t[e])!=null?r:[];K(n,a)||(t[e]=n,D(t))}function Ne(t,e,s){var r;if(!e||!s)return;const n=(r=t[e])!=null?r:[],a=x([{branch:s,updatedAt:te()},...n]);je(t,e,a)}function ne(t){if(!t)return null;const s=$()[t];return!s||s.length===0?null:s[0].branch}function He(t,e){if(!t||!e)return;const s=$();Ne(s,t,e)}function ht(t){var s,n;return t?(n=(s=$()[t])==null?void 0:s.map(a=>a.branch))!=null?n:[]:[]}const Ke=()=>{const t=g.getItem(f.WhamLastRepositoryId);return typeof t=="string"?t:null},C=Ke(),$e=()=>C?ne(C):null,T=ee()((t,e)=>{var s,n;return{environmentId:g.getItem(f.LastEnvironment),branch:$e(),manuallyAddedBranches:[],promptDraft:(s=g.getItem(f.PromptDraft))!=null?s:"",selectedRepositoryId:C!=null?C:null,tasksFilter:"current",taskTurnMap:{},showReactQueryDevtools:!1,lastClickedChangelogDate:(n=g.getItem(f.WhamChangelogClickedDate))!=null?n:null,pendingTaskIds:{},pendingCodeReviewIds:{},fixReviewTasksInFlight:{},hasSubmittedTaskInSession:!1,lastViewedTaskId:null,bestOfN:g.getItem(f.WhamBestOfN),codexOnboardingState:g.getItem(f.WhamCodexOnboardingState),preferredEditor:function(){const a=g.getItem(f.WhamPreferredEditor);return["cursor","vscode","windsurf"].includes(a)?a:"vscode"}(),homeTab:"all",autoCreatedEnvironmentId:null,showEnvironmentOnboardingPopover:!1,shouldHighlightTasksTab:!1,useRepositoryAsEnvironment:!1,_fetchedRateLimit:null,_forcedRateLimit:function(){return null}(),setShowReactQueryDevtools:a=>{g.setItem(f.ReactQueryDevtoolsVisible,a),t({showReactQueryDevtools:a})},setLastClickedChangelogDate:a=>{g.setItem(f.WhamChangelogClickedDate,a),t({lastClickedChangelogDate:a})},setPromptDraft:a=>{g.setItem(f.PromptDraft,a),t({promptDraft:a})},setEnvironmentId:a=>{a==null?g.removeItem(f.LastEnvironment):g.setItem(f.LastEnvironment,a),t(r=>({environmentId:a,useRepositoryAsEnvironment:a!=null?!1:r.useRepositoryAsEnvironment}))},setBranch:a=>t(r=>{const i=r.selectedRepositoryId;return i&&a&&He(i,a),{branch:a}}),setSelectedRepositoryId:a=>{a==null?g.removeItem(f.WhamLastRepositoryId):g.setItem(f.WhamLastRepositoryId,a),t(r=>{const i=a!=null?ne(a):null;return{selectedRepositoryId:a,branch:a!=null?i!=null?i:null:r.branch,useRepositoryAsEnvironment:a?r.useRepositoryAsEnvironment:!1}})},setUseRepositoryAsEnvironment:a=>t({useRepositoryAsEnvironment:a}),addManuallyAddedBranch:a=>t(r=>r.manuallyAddedBranches.includes(a)?{}:{manuallyAddedBranches:[a,...r.manuallyAddedBranches]}),setTasksFilter:a=>t({tasksFilter:a}),setHomeTabValue:a=>t({homeTab:a}),setLastViewedTaskId:a=>t({lastViewedTaskId:a}),setAutoCreatedEnvironment:a=>t({autoCreatedEnvironmentId:a,showEnvironmentOnboardingPopover:!0}),dismissEnvironmentOnboardingPopover:()=>t({showEnvironmentOnboardingPopover:!1}),setHasSubmittedTaskInSession:a=>t({hasSubmittedTaskInSession:a}),addTurnToTaskMap:(a,r)=>{t(i=>{const d=i.taskTurnMap[a],l=d?h({},d):{};return l[r.id]=r,{taskTurnMap:k(h({},i.taskTurnMap),{[a]:l})}})},updateTurnDiscarded:(a,r,i)=>{t(d=>{const l=d.taskTurnMap[a],u=l==null?void 0:l[r];return!l||!u?{}:{taskTurnMap:k(h({},d.taskTurnMap),{[a]:k(h({},l),{[r]:k(h({},u),{discarded:i})})})}})},getTurnsForTask:a=>{var i;const r=(i=e().taskTurnMap[a])!=null?i:[];return Object.values(r).sort((d,l)=>d.created_at-l.created_at)},addPendingTaskId:a=>{const r=h({},e().pendingTaskIds);r[a]=a,t({pendingTaskIds:r})},removePendingTaskId:a=>{const r=h({},e().pendingTaskIds);delete r[a],t({pendingTaskIds:r})},removePendingTaskByTaskId:a=>{var d;const r=e().pendingTaskIds,[i]=(d=Object.entries(r).find(([l,u])=>u===a))!=null?d:[];if(i){const l=h({},r);delete l[i],t({pendingTaskIds:l})}},assignPendingTaskToFinalTask:(a,r)=>t(i=>({pendingTaskIds:k(h({},i.pendingTaskIds),{[a]:r})})),addPendingCodeReviewId:a=>{const r=h({},e().pendingCodeReviewIds);r[a]=a,t({pendingCodeReviewIds:r})},removePendingCodeReviewId:a=>{const r=h({},e().pendingCodeReviewIds);delete r[a],t({pendingCodeReviewIds:r})},assignPendingCodeReviewToFinalTask:(a,r)=>t(i=>({pendingCodeReviewIds:k(h({},i.pendingCodeReviewIds),{[a]:r})})),markFixReviewTaskInFlight:a=>t(r=>({fixReviewTasksInFlight:k(h({},r.fixReviewTasksInFlight),{[a]:!0})})),clearFixReviewTaskInFlight:a=>t(r=>{if(!r.fixReviewTasksInFlight[a])return{};const l=r.fixReviewTasksInFlight,{[a]:i}=l;return{fixReviewTasksInFlight:A(l,[z(a)])}}),resetFixedReviewTasks:()=>t(()=>({fixReviewTasksInFlight:{}})),getRateLimit:()=>e()._fetchedRateLimit,setRateLimit:a=>t({_fetchedRateLimit:a}),forceRateLimit:a=>{},setBestOfN:a=>{g.setItem(f.WhamBestOfN,a),t({bestOfN:a})},setPreferredEditor:a=>{g.setItem(f.WhamPreferredEditor,a),t({preferredEditor:a})},setCodexOnboardingState:a=>{g.setItem(f.WhamCodexOnboardingState,a),t({codexOnboardingState:a})},setShouldHighlightTasksTab:a=>t({shouldHighlightTasksTab:a})}});function mt(t,e=!1){var s,n,a;return(a=(n=(s=t==null?void 0:t.output_items)==null?void 0:s.map(r=>!e&&r.type==="output_diff"?r.diff:e&&r.type==="follow_up_diff"||!e&&r.type==="pr"?r.output_diff.diff:!e&&r.type==="cr"?r.reviewed_diff.diff:null))==null?void 0:n.filter(r=>!!r))!=null?a:[]}function Pe(t){var r,i,d,l;if(t==null)return"";const e=(i=(r=t==null?void 0:t.environment)==null?void 0:r.repos)==null?void 0:i[0],s=e?(l=(d=t==null?void 0:t.environment)==null?void 0:d.repo_map)==null?void 0:l[e]:null,n=s&&ze(s)?Ue(s.git_url):null,a=t==null?void 0:t.branch;return t.output_items.filter(u=>u.type==="message").flatMap(u=>u.content).map(u=>{switch(u.content_type){case"text":return u.text;case"terminal_chunk_citation":return"".concat(b,":").concat(Z,"[").concat(Z,"]{line_range_start=").concat(u.line_range_start," line_range_end=").concat(u.line_range_end," terminal_chunk_id=").concat(u.terminal_chunk_id,"}").concat(b);case"repo_file_citation":{const R=n?"".concat(n,"/blob/").concat(a,"/").concat(u.path,"#L").concat(u.line_range_start,"-L").concat(u.line_range_end):null;return"".concat(b,":").concat(V,"[").concat(V,"]{line_range_start=").concat(u.line_range_start," line_range_end=").concat(u.line_range_end," path=").concat(u.path).concat(R?' git_url="'.concat(R,'"'):"","}").concat(b)}case"image_asset_pointer":return"";case"image_asset_pointer_citation":return"".concat(b,":").concat(Q,"[").concat(Q,"]{asset_pointer=").concat(u.asset_pointer,"}").concat(b);case void 0:return""}return""}).join("")}function Ue(t){return t.replace(/\.git$/,"").replace("git://","https://")}function ze(t){var e,s,n;return((e=t==null?void 0:t.id)==null?void 0:e.startsWith("github"))||((n=(s=t==null?void 0:t.git_url)==null?void 0:s.indexOf("github.com"))!=null?n:-1)>=0}function re(t){return"output_items"in t}function Qe(t){return"input_items"in t}function Ve(t){var e,s,n,a;return t&&(a=(n=(s=(e=t.input_items)==null?void 0:e.flatMap(r=>"content"in r?r==null?void 0:r.content:[]))==null?void 0:s.map(r=>r.content_type==="text"?r.text:""))==null?void 0:n.join(""))!=null?a:""}function pt(t){return t?re(t)?Pe(t):Ve(t):""}function Ze(t){return t.type==="cr"}function _t(t){if(!t||!re(t)||!t.output_items)return[];const e=[];for(const s of t.output_items)Ze(s)&&e.push(...s.comments);return e}function gt(t,e){return t?e.filter(s=>Qe(s)&&s.previous_turn_id===t.id).flatMap(s=>{var n;return((n=s.input_items)!=null?n:[]).filter(a=>a.type==="comment")}):[]}function ft(t){return(t==null?void 0:t.turn)!=null}function wt(t){var e,s;return ie((s=(e=t.task_status_display)==null?void 0:e.latest_turn_status_display)==null?void 0:s.turn_status)}function ie(t){switch(t){case null:case void 0:case"completed":case"failed":case"cancelled":return!0;case"pending":case"in_progress":return!1;default:_e(t)}}const q=60*1e3,kt=(t,e,s)=>h({staleTime:0,queryKey:["wham","task",t,e],enabled:!!t&&!!e,queryFn:()=>m.getTaskTurn(t!=null?t:"",e!=null?e:"")},s||{}),Ye=(t,e)=>h({queryKey:["wham","task",t],staleTime:0,enabled:!!t,queryFn:async()=>await m.getTaskDetails(t!=null?t:"")},e||{}),yt=(t,e)=>{const s=Ye(t,e);return w(s)},Xe=19;function oe(t){return de({queryKey:["wham","tasks",t],queryFn:({pageParam:e})=>m.getTasksForList(Xe,e!=null?e:null,t),initialPageParam:null,getNextPageParam:({cursor:e})=>e,staleTime:15*1e3})}function vt({filter:t,enabled:e=!0,refetchOnMount:s=!1,refetchOnWindowFocus:n=!1}={}){const a=T(({tasksFilter:i})=>i),r=t!=null?t:a;return I(k(h({},oe(r)),{enabled:e,refetchOnMount:s,refetchOnWindowFocus:n}))}function Rt({enabled:t=!0}={}){return w({queryKey:["wham","tasks","has-any"],queryFn:async()=>{var s,n;return((n=(s=(await m.getTasksForList(1,null,"all")).items)==null?void 0:s.length)!=null?n:0)>0},enabled:t})}function bt(){return I(k(h({},oe("all")),{select:t=>{var s,n;const e=t.pages[0];return((n=(s=e==null?void 0:e.items)==null?void 0:s.length)!=null?n:0)>=5}}))}function Ct(t){"use forget";const e=J.c(5);let s;e[0]!==t?(s={},e[0]=t,e[1]=s):s=e[1];const{staleTime:n}=s,a=n===void 0?q:n;let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=["wham","usage","rate-limit-status"],e[2]=r):r=e[2];let i;return e[3]!==a?(i={queryKey:r,queryFn:Je,staleTime:a,retry:!1},e[3]=a,e[4]=i):i=e[4],w(i)}function Je(){return m.getRateLimitStatus()}function Tt({retry:t=0}={}){return w({queryKey:["wham","environments"],queryFn:()=>m.getEnvironments(),retry:t})}function qt({retry:t=0}={}){return w({queryKey:["wham","recent_environments"],queryFn:()=>m.getRecentEnvironments(),retry:t})}function St(){return w({queryKey:["wham","githubLogin"],queryFn:()=>m.getUserHandle()})}function Wt(){return w({queryKey:["wham","githubInstallationsV2"],queryFn:()=>m.getGithubInstallationsV2(),staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0})}function Et(){return w({queryKey:["wham","tasks","samples"],queryFn:()=>m.getSampleTasks(10,null)})}function xt(t,e,s){t.setQueryData(["wham","environments"],n=>n?[e,...n]:[e]),t.setQueryData(["wham","environments","with-creators"],n=>{if(!n)return n;const a=k(h({},e),{creator:s});return N(n,r=>{r.pages.length>0&&r.pages[0].items.unshift(a)})})}function Mt(t,e){t.setQueryData(["wham","environments"],s=>s==null?void 0:s.filter(n=>n.id!==e)),t.setQueryData(["wham","environments","with-creators"],s=>s&&N(s,n=>{n.pages.forEach(a=>{a.items=a.items.filter(r=>r.id!==e)})}))}function At(t,e,s){t.setQueryData(["wham","environments"],n=>n==null?void 0:n.map(a=>a.id===e?s:a)),t.setQueryData(["wham","environments","with-creators"],n=>n&&N(n,a=>{a.pages.forEach(r=>{r.items=r.items.map(i=>i.id===e?h(h({},i),s):i)})})),t.setQueryData(["environments",e,"withCreatorAndMachine"],n=>n?h(h({},n),s):void 0)}function Lt(t){return w({queryKey:["environments",t,"withCreatorAndMachine"],queryFn:()=>m.getEnvironmentWithCreatorAndMachine(t)})}function Ft(){return w({queryKey:["wham","userPreferences"],queryFn:()=>m.getUserPreferences()})}function Bt(){return w({queryKey:["wham","githubInstallationEventsV2"],queryFn:()=>m.getGithubInstallationEventsV2(),staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0})}function et(t){if(!t)return null;let e=t.trim().toLowerCase();if(!e)return null;const s=["https://","http://"];for(const i of s)if(e.startsWith(i)){e=e.slice(i.length);break}for(e.startsWith("www.")&&(e=e.slice(4)),e.startsWith("github.com/")&&(e=e.slice(11)),e.endsWith(".git")&&(e=e.slice(0,-4));e.startsWith("/");)e=e.slice(1);for(;e.endsWith("/");)e=e.slice(0,-1);const n=e.split("/").filter(Boolean);if(n.length<2)return null;const[a,r]=n;return!a||!r?null:"".concat(a,"/").concat(r)}const tt=20;function Gt(t,e={}){var l;const s=t.trim(),n=e.installationIds,a=n?[...n].sort():void 0,r=(l=e.limit)!=null?l:tt,i=s.length>0,d=a;return I({queryKey:["wham","codeReviewRepositories","v2",s,a,r],initialPageParam:void 0,queryFn:async({pageParam:u})=>{const p=et(s);if(p&&!u)try{return{repo_review_settings:[await m.getCodeReviewRepository("github",p)],next_token:null}}catch(v){if(!(v instanceof j&&(v.status===400||v.status===404)))throw v}return i?m.searchCodeReviewRepositories({query:s,limit:r,installationIds:d}):m.getCodeReviewRepositories({search:s||void 0,nextToken:u})},getNextPageParam:u=>{var p;if(!i)return(p=u==null?void 0:u.next_token)!=null?p:void 0},refetchOnWindowFocus:!0})}function Dt(){return w({queryKey:["wham","userPreferencesConfig"],queryFn:()=>m.getUserPreferencesConfig()})}function Ot(t){return t.invalidateQueries({queryKey:["wham","environments"]})}function It(t,e){return t.invalidateQueries({queryKey:["environment",e]})}function jt(t){return t.invalidateQueries({queryKey:["wham","userPreferences"]})}function Nt(t){const e=T(s=>s.addTurnToTaskMap);return w({queryKey:["wham","task",t,"turns"],queryFn:async()=>{const s=await m.getTurns(t!=null?t:"");return Object.values(s.turn_mapping).forEach(n=>{e(t!=null?t:"",n.turn)}),s},enabled:!!t,staleTime:15*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0})}function Ht(t,e){return w({queryKey:["wham","task",t,"turns",e,"logs"],queryFn:()=>m.getTurnLogs(t!=null?t:"",e!=null?e:""),enabled:!!t&&!!e})}function Kt(t,e,s){return w({queryKey:["wham","task",t,"turns",e,"latest"],enabled:s&&!!t&&!!e,queryFn:()=>m.getLatestTaskTurns(t!=null?t:"",e!=null?e:""),staleTime:0,refetchInterval:({state:n})=>{var i,d;return n.data&&((d=(i=n.data)==null?void 0:i.latest_turns)==null?void 0:d.every(l=>ie(l.turn_status)))?!1:5e3}})}function st({refetchOnWindowFocus:t=!1,refetchInterval:e}={}){return w({queryKey:["wham","rateLimit"],queryFn:()=>m.getRateLimit(),staleTime:0,refetchOnWindowFocus:t,refetchInterval:e})}function $t(){return w({queryKey:["wham","analytics","daily-code-review-counts"],queryFn:()=>m.getDailyCodeReviewCounts(),staleTime:q})}function Pt(){return w({queryKey:["wham","analytics","daily-code-review-metrics"],queryFn:()=>m.getDailyCodeReviewMetrics(),staleTime:q})}function Ut(){return w({queryKey:["wham","analytics","daily-web-task-counts"],queryFn:()=>m.getDailyWebTaskCounts(),staleTime:q})}function zt(){return w({queryKey:["wham","analytics","daily-cli-vscode-usage-counts"],queryFn:()=>m.getDailyCliVsCodeUsageCounts(),staleTime:q})}function Qt(t){"use forget";const e=J.c(2);let s;return e[0]!==t?(s={queryKey:["wham","repositories","repository-row-section",t],queryFn:async()=>t.length===0?await m.listRepositories({page:1,per_page:10}):await m.searchRepositoriesAllInstallations({query:t,limit:10}),staleTime:6e4},e[0]=t,e[1]=s):s=e[1],w(s)}function Vt(){const t=T(r=>r.getRateLimit()),e=T(r=>r.setRateLimit),s=T(r=>!!r._forcedRateLimit),n=t&&t.remaining<=5,{data:a}=st({refetchInterval:n?6e4:void 0,refetchOnWindowFocus:!0});return _.useEffect(()=>{a&&e(a)},[a,e]),!t||!n?null:y.jsx(at,{remaining:t.remaining,resetsAfterText:t.resets_after_text,hasForcedRateLimit:s})}function at({remaining:t,resetsAfterText:e,hasForcedRateLimit:s=!1}){const n=he(),a=ge(),[r,i]=_.useState(!1);return y.jsx(fe,{open:a?r:void 0,onOpenChange:i,label:n.formatMessage({id:"BKAKLB",defaultMessage:"More available {resetsAfterText}"},{resetsAfterText:e}),children:y.jsxs("div",{className:E("inline-flex items-center gap-1.5 rounded-full px-3 py-2 text-sm font-medium",t===0?"bg-token-text-status-error/15 text-token-text-status-error":"bg-token-text-status-warning/15 text-token-text-status-warning"),onClick:a?()=>i(d=>!d):void 0,children:[y.jsx(we,{className:"icon"}),a?t:y.jsx(G,{id:"e7gj6g",defaultMessage:"{remaining, plural, =0 {No tasks left} one {One task left} other {# tasks left}}",values:{remaining:t}}),!1]})})}class o{static countEventWithStatsC(e,s=[],n=1){ke.count(ye.CODEX,e,Object.fromEntries(Object.entries(s).map(([a,r])=>[a,String(r)])),n)}static logEventWithStatsig(e,s,n){ve.logEventWithStatsig(e,s,n)}static recordGitAction(e,s,n,a,r,i="regular",d,l){const u=h(h({action:e,mode:i,task_id:a,turn_id:r},d?{message_id:d}:{}),l?{conversation_id:l}:{});o.logEventWithStatsig("chatgpt_wham_git_action","chatgpt_wham_git_action",u);const p=[{key:"action",value:e}];o.countEventWithStatsC("chatgpt_wham_git_action",p,n),o.countEventWithStatsC("chatgpt_wham_git_action",p,s)}static recordWhamTileAction(e){const s={action:e};o.logEventWithStatsig("chatgpt_wham_tile_action","chatgpt_wham_tile_action",s),o.countEventWithStatsC("chatgpt_wham_tile_action",[{key:"action",value:e}])}static recordWhamSystemHintAction(e,s){const n=h({action:e},s?{conversation_id:s}:{});o.logEventWithStatsig("chatgpt_wham_system_hint_action","chatgpt_wham_system_hint_action",n),o.countEventWithStatsC("chatgpt_wham_system_hint_action",[{key:"action",value:e}])}static recordConnectionsClickSetupMfa(){o.logEventWithStatsig("onboarding.connections.click_setup_mfa","onboarding.connections.click_setup_mfa",{}),o.countEventWithStatsC("onboarding.connections.click_setup_mfa")}static recordConnectionsClickConnectGithub(){o.logEventWithStatsig("onboarding.connections.click_connect_github","onboarding.connections.click_connect_github",{}),o.countEventWithStatsC("onboarding.connections.click_connect_github")}static recordClickUseEnvironment(){o.logEventWithStatsig("chatgpt_wham_click_use_environment","chatgpt_wham_click_use_environment",{}),o.countEventWithStatsC("chatgpt_wham_click_use_environment")}static recordConnectionsView(){o.logEventWithStatsig("onboarding.connections.view","onboarding.connections.view",{}),o.countEventWithStatsC("onboarding.connections.view")}static recordClickEnv(){o.logEventWithStatsig("onboarding.click_go_to_environment","onboarding.click_go_to_environment",{}),o.countEventWithStatsC("onboarding.click_go_to_environment")}static recordDataCheckGoBack(){o.logEventWithStatsig("onboarding.data_check.click_go_back","onboarding.data_check.click_go_back",{}),o.countEventWithStatsC("onboarding.data_check.click_go_back")}static recordDataCheckContinue(){o.logEventWithStatsig("onboarding.data_check.click_continue","onboarding.data_check.click_continue",{}),o.countEventWithStatsC("onboarding.data_check.click_continue")}static recordDataCheckView(){o.logEventWithStatsig("onboarding.data_check.view","onboarding.data_check.view",{}),o.countEventWithStatsC("onboarding.data_check.view")}static recordCreateEnvSuccess(){o.logEventWithStatsig("onboarding.environments.create_success","onboarding.environments.create_success",{}),o.countEventWithStatsC("onboarding.environments.create_success")}static recordEnvironmentsView(){o.logEventWithStatsig("onboarding.environments.view","onboarding.environments.view",{}),o.countEventWithStatsC("onboarding.environments.view")}static recordEnvironmentsSubmit(){o.logEventWithStatsig("onboarding.environments.submit","onboarding.environments.submit",{}),o.countEventWithStatsC("onboarding.environments.submit")}static recordStarterTasksView(){o.logEventWithStatsig("onboarding.starter_tasks.view","onboarding.starter_tasks.view",{}),o.countEventWithStatsC("onboarding.starter_tasks.view")}static recordStarterTasksClickComplete(e){o.logEventWithStatsig("onboarding.starter_tasks.click_complete","onboarding.starter_tasks.click_complete",{with_starter_tasks:String(e)}),o.countEventWithStatsC("onboarding.starter_tasks.click_complete",[{key:"with_starter_tasks",value:String(e)}])}static recordOnboardingView(){o.logEventWithStatsig("onboarding.view","onboarding.view",{}),o.countEventWithStatsC("onboarding.view")}static recordClickGetStarted(){o.logEventWithStatsig("onboarding.click_get_started","onboarding.click_get_started",{}),o.countEventWithStatsC("onboarding.click_get_started")}static recordDataCheckToggle(e){o.logEventWithStatsig("onboarding.data_check.toggle_value","onboarding.data_check.toggle_value",{enabled:String(e)}),o.countEventWithStatsC("onboarding.data_check.toggle_value",[{key:"enabled",value:String(e)}])}static recordProposedTaskClicked(e){o.logEventWithStatsig("chatgpt_wham_proposed_task_clicked","chatgpt_wham_proposed_task_clicked",{action:e}),o.countEventWithStatsC("chatgpt_wham_proposed_task_clicked",[{key:"action",value:e}])}static recordLandingPageShown(){o.logEventWithStatsig("chatgpt_wham_landing_page_shown","chatgpt_wham_landing_page_shown",{}),o.countEventWithStatsC("chatgpt_wham_landing_page_shown")}static recordComposerAction(e){o.logEventWithStatsig("chatgpt_wham_composer_action","chatgpt_wham_composer_action",{action:e}),o.countEventWithStatsC("chatgpt_wham_composer_action",[{key:"action",value:e}])}static recordCancel(e){o.logEventWithStatsig("chatgpt_wham_composer_action","chatgpt_wham_composer_action",{location:e}),o.countEventWithStatsC("chatgpt_wham_composer_action",[{key:"location",value:e}])}static recordUpgradeToTryItButtonClicked(){o.logEventWithStatsig("chatgpt_wham_upgrade_to_try_it_button_clicked","chatgpt_wham_upgrade_to_try_it_button_clicked",{}),o.countEventWithStatsC("chatgpt_wham_upgrade_to_try_it_button_clicked")}static recordLogInButtonClicked(){o.logEventWithStatsig("chatgpt_wham_log_in_button_clicked","chatgpt_wham_log_in_button_clicked",{}),o.countEventWithStatsC("chatgpt_wham_log_in_button_clicked")}static recordLearnMoreLinkClicked(){o.logEventWithStatsig("chatgpt_wham_learn_more_link_clicked","chatgpt_wham_learn_more_link_clicked",{}),o.countEventWithStatsC("chatgpt_wham_learn_more_link_clicked")}static recordFollowUpsSeen(e,s,n){o.logEventWithStatsig("chatgpt_wham_follow_ups_seen","chatgpt_wham_follow_ups_seen",{count:String(n),task_id:e,turn_id:s}),o.countEventWithStatsC("chatgpt_wham_follow_ups_seen")}static recordFollowUpsExpanded(e,s){o.logEventWithStatsig("chatgpt_wham_follow_ups_expanded","chatgpt_wham_follow_ups_expanded",{task_id:e,turn_id:s}),o.countEventWithStatsC("chatgpt_wham_follow_ups_expanded")}static recordFollowUpsClicked(e,s,n,a){o.logEventWithStatsig("chatgpt_wham_follow_ups_clicked","chatgpt_wham_follow_ups_clicked",{task_id:e,turn_id:s,index:String(n),severity:a}),o.countEventWithStatsC("chatgpt_wham_follow_ups_clicked")}static recordSpeculativeSuggestionAccepted(e,s,n){const a={task_id:e,turn_id:s,index:n.toString()};o.logEventWithStatsig("chatgpt_wham_speculative_suggestion_accepted","chatgpt_wham_speculative_suggestion_accepted",a),o.countEventWithStatsC("chatgpt_wham_speculative_suggestion_accepted",[{key:"task_id",value:e},{key:"turn_id",value:s},{key:"index",value:n.toString()}])}static recordSpeculativeSuggestionRejected(e,s,n){const a={task_id:e,turn_id:s,index:n.toString()};o.logEventWithStatsig("chatgpt_wham_speculative_suggestion_rejected","chatgpt_wham_speculative_suggestion_rejected",a),o.countEventWithStatsC("chatgpt_wham_speculative_suggestion_rejected",[{key:"task_id",value:e},{key:"turn_id",value:s},{key:"index",value:n.toString()}])}static recordPreviewImagesCarouselNext(){o.countEventWithStatsC("wham.preview_images.click_next")}static recordPreviewImagesCarouselPrev(){o.countEventWithStatsC("wham.preview_images.click_prev")}}function nt(t,e,s){const n=Re(),a=t.map(r=>{const{keyboardBinding:i}=r;let d=i.join("+");if(r.altKeyboardBindings){d=[d];const l=r.altKeyboardBindings.map(u=>u.join("+"));d=d.concat(l)}return be(d,{byKey:!0})});Ce(()=>{var l;if((s==null?void 0:s.enabled)===!1)return;const r=u=>{if(!u.repeat)for(let p=0;p<a.length;p++)a[p](u)&&(t[p].enabled===void 0||t[p].enabled)&&(u.preventDefault(),e(t[p]),t[p].action(u))},i=u=>{u.key!==void 0&&r(u)},d=(l=n==null?void 0:n.document)!=null?l:document;return d.addEventListener("keydown",i),()=>{d.removeEventListener("keydown",i)}},[t,s])}const O=ee(t=>({actions:[],addActionsActions:e=>t(s=>({actions:qe([...s.actions,...e],n=>n.key)})),removeActionsActions:e=>{const s=e.map(n=>n.key);return t(n=>({actions:n.actions.filter(a=>!s.includes(a.key))}))}})),rt=t=>nt(t,e=>{W.addAction("wham_keyboard_shortcut",{keyboardActionKey:e.key})},{enabled:!0});function Zt(){return O(t=>t.actions)}function Yt(t=[]){const e=O(n=>n.addActionsActions),s=O(n=>n.removeActionsActions);_.useEffect(()=>(e(t),()=>s(t)),[t,e,s]),rt(t)}const Xt=i=>{var d=i,{children:t,sideOffset:e=6,isOpen:s,closePopover:n,popoverContentRef:a}=d,r=A(d,["children","sideOffset","isOpen","closePopover","popoverContentRef"]);var u;const l=Te();return _.useEffect(()=>{if(!s)return;const p=R=>{R.key==="Escape"&&n()};return document.addEventListener("keydown",p,{capture:!0,passive:!0}),()=>document.removeEventListener("keydown",p,{capture:!0})},[s,n]),y.jsx(Se,{children:y.jsx(We,k(h({forceMount:!0,asChild:!0,align:"center",sideOffset:e,onOpenAutoFocus:p=>{p.preventDefault()}},r),{style:k(h({},(u=r.style)!=null?u:{}),{zIndex:60}),children:y.jsx("div",{ref:a,className:E(!s&&"pointer-events-none","z-20"),children:y.jsx(me,{mode:"sync",children:s&&y.jsx(pe.div,{className:E("popover bg-token-main-surface-primary dark:bg-token-main-surface-primary shadow-long overflow-auto rounded-2xl bg-clip-padding"),variants:{open:{opacity:1,y:0,transition:l?Y:k(h({},X),{duration:.1})},closed:{opacity:0,y:-4,transition:l?Y:k(h({},X),{duration:.1})}},initial:"closed",animate:"open",exit:"closed",children:t})})})}))})},Jt=t=>_.createElement("svg",h({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8 6.5L14 4.5L8 2.5L2 4.5L8 6.5Z",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 11.5L8 13.5L14 11.5",stroke:"currentColor",strokeOpacity:.3,strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 9.16699L8 11.167L14 9.16699",stroke:"currentColor",strokeOpacity:.3,strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 6.83301L8 8.83301L14 6.83301",stroke:"currentColor",strokeOpacity:.3,strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})),es=t=>_.createElement("svg",h({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8 6.5L14 4.5L8 2.5L2 4.5L8 6.5Z",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 6.83301L8 8.83301L14 6.83301",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 9.16699L8 11.167L14 9.16699",stroke:"currentColor",strokeOpacity:.3,strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 11.5L8 13.5L14 11.5",stroke:"currentColor",strokeOpacity:.3,strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})),ts=t=>_.createElement("svg",h({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8 6.5L14 4.5L8 2.5L2 4.5L8 6.5Z",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 6.83301L8 8.83301L14 6.83301",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 9.16699L8 11.167L14 9.16699",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 11.5L8 13.5L14 11.5",stroke:"currentColor",strokeOpacity:.3,strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"})),ss=t=>_.createElement("svg",h({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8 6.5L14 4.5L8 2.5L2 4.5L8 6.5Z",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 6.83301L8 8.83301L14 6.83301",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 9.16699L8 11.167L14 9.16699",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}),_.createElement("path",{d:"M2 11.5L8 13.5L14 11.5",stroke:"currentColor",strokeWidth:1.3,strokeLinecap:"round",strokeLinejoin:"round"}));function as({className:t,linesAdded:e,linesRemoved:s}){return!e&&!s?null:y.jsxs("div",{className:E("flex flex-row gap-1 font-medium",t),children:[y.jsx("span",{className:"text-green-500",children:y.jsx(G,{id:"wham.message.modal.repoAndDiffStats.linesAdded",defaultMessage:"+{linesAdded}",values:{linesAdded:e}})}),y.jsx("span",{className:"text-red-500",children:y.jsx(G,{id:"wham.message.modal.repoAndDiffStats.linesRemoved",defaultMessage:"-{linesRemoved}",values:{linesRemoved:s}})})]})}export{Qt as $,Gt as A,Dt as B,tt as C,$t as D,Pt as E,Ut as F,zt as G,Vt as H,Tt as I,Rt as J,Zt as K,ts as L,es as M,Jt as N,Kt as O,wt as P,Xt as Q,Et as R,ss as S,oe as T,Qe as U,Ze as V,m as W,re as X,ne as Y,ht as Z,bt as _,It as a,qt as a0,Ht as a1,ft as a2,pt as a3,jt as b,o as c,Lt as d,gt as e,At as f,mt as g,Ct as h,Ot as i,as as j,kt as k,Ee as l,ie as m,T as n,_t as o,xt as p,Yt as q,Mt as r,St as s,Wt as t,Ft as u,yt as v,dt as w,Nt as x,vt as y,Bt as z};
//# sourceMappingURL=fmsmhem5hrm2cxrs.js.map
