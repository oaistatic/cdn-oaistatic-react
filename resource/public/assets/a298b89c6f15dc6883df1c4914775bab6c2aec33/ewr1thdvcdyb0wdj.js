var y=Object.freeze,O=Object.defineProperty,P=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var C=(t,e,s)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,f=(t,e)=>{for(var s in e||(e={}))N.call(e,s)&&C(t,s,e[s]);if(S)for(var s of S(e))b.call(e,s)&&C(t,s,e[s]);return t},j=(t,e)=>P(t,W(e));var E=t=>typeof t=="symbol"?t:t+"",A=(t,e)=>{var s={};for(var r in t)N.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&S)for(var r of S(t))e.indexOf(r)<0&&b.call(t,r)&&(s[r]=t[r]);return s};var I=(t,e)=>y(O(t,"raw",{value:y(e||t.slice())}));import{j as a,M as w,d as T,r as v,b as z}from"./n75kuy1cx6f5mogg.js";import{S as X}from"./gmo3awvgctzzwbrq.js";import{S as Y}from"./fb5r26w2lbkp5hh3.js";import{T as q,e as M,E as B,F as J,lo as Q,P as Z,f as D,at as V}from"./ewse8exzafeu10ji.js";import{S as K,R as G,B as ee,T as te,a as k,C as se,X as ae,b as ne,p as re,Y as ie,c as oe,d as L,M as le,e as ce,f as de,r as me}from"./n8p9nkuciyrx3m32.js";function fe({value:t,previousValue:e,hideTrend:s=!1,className:r}){let x;if(!s&&t!=="loading"&&e!=null&&e!=="loading"){const d=t>=e,l=d?Y:X,h=(t===0&&e===0?0:Math.abs(t-e)/e).toLocaleString(void 0,{style:"percent"});x=a.jsxs(q,{side:"right",customBackgroundColorClassName:"bg-token-main-surface-primary-inverse",className:M("inline-flex items-center",{"text-green-500":d,"text-red-500":!d}),label:a.jsx("span",{className:"text-token-main-surface-primary font-normal",children:a.jsx(w,j(f({},d?R.increaseHelpText:R.decreaseHelpText),{values:{amount:h}}))}),children:[a.jsx(l,{}),a.jsx("span",{children:h})]})}return a.jsxs("div",{className:M("text-token-text-primary flex items-center gap-1 font-medium",r),children:[a.jsx("span",{className:"text-xl",children:t!=="loading"&&t.toLocaleString()}),x,(t==="loading"||e==="loading"&&!s)&&a.jsx(B,{})]})}const R=T({increaseHelpText:{id:"workspaceUsage.trend.increaseHelpText",defaultMessage:"Up {amount} since the previous month"},decreaseHelpText:{id:"workspaceUsage.trend.decreaseHelpText",defaultMessage:"Down {amount} since the previous month"}});function Me({title:t,data:e,otherGroupLabel:s,displayMoM:r,clientEventSource:x,hideLegend:d=!1}){const l=v.useMemo(()=>e==="loading"?[]:s?[...Object.keys(e.metrics).slice(-9),"other"]:Object.keys(e.metrics).slice(-10),[s,e]),m=v.useMemo(()=>e==="loading"?"loading":s?e.data.map(i=>!("values"in i)||"other"in i.values?i:j(f({},i),{values:j(f({},i.values),{other:i.total-l.reduce((c,n)=>{var o;return c+((o=i.values[n])!=null?o:0)},0)})})):e.data,[e,s,l]),h=v.useMemo(()=>m==="loading"?0:m.reduce((i,c)=>Math.max(i,"total"in c?c.total:0),0),[m]),p=v.useMemo(()=>{if(e==="loading"||m==="loading")return{};let i;return s?i=j(f({},e.metrics),{other:{displayName:s}}):i=e.metrics,Object.fromEntries(l.map(c=>({total:m.reduce((o,g)=>{var u;return o+("values"in g&&(u=g.values[c])!=null?u:0)},0),groupKey:c})).sort(({total:c},{total:n})=>n-c).map(({total:c,groupKey:n},o)=>[n,{displayName:i[n].displayName,total:c,color:K[o]}]))},[e,s,l,m]);return a.jsxs("div",{className:"border-token-border-default mb-4 flex min-h-[350px] flex-col rounded-lg border pt-4 pb-4",children:[a.jsxs("div",{className:"px-6",children:[a.jsx("div",{className:"text-token-text-secondary text-sm",children:a.jsx(w,f({},t))}),a.jsx(fe,{value:e==="loading"?"loading":e.monthOverMonth.cur_month,previousValue:e==="loading"?"loading":e.monthOverMonth.last_month,hideTrend:!r,className:"mb-4 h-7"})]}),a.jsx(xe,{processedData:m,maxTotal:h,seriesMetadata:p,hideLegend:d,clientEventSource:x})]})}const H=t=>t.toLocaleString(),_="default";var F;const U=J.div(F||(F=I(["flex h-full grow items-center justify-center text-lg text-token-text-tertiary"])));function xe({processedData:t,maxTotal:e,seriesMetadata:s,hideLegend:r,clientEventSource:x}){const d=v.useRef(void 0),[l,m]=v.useState(),h=(n,o)=>()=>{n&&d.current!==n&&(d.current=n,Z.logEvent("Workspace Usage: Chart Series Hovered",{groupKey:n,seriesCount:o,clientEventSource:x})),m(n)};let p=Object.keys(s);if(l){const c=s,{[l]:n}=c,o=A(c,[E(l)]);p=[...Object.keys(o),l]}if(t==="loading")return a.jsx(U,{children:a.jsx(B,{})});if(e===0)return a.jsx(U,{children:a.jsx(w,f({},ge.noData))});const i=Object.entries(s).sort(([n])=>n==="other"?1:-1);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:M(me,"flex grow items-center"),children:a.jsx(G,{width:"100%",height:220,children:a.jsxs(ee,{data:t,margin:{left:-20,top:14,right:20},children:[a.jsx(te,{isAnimationActive:!1,content:a.jsx(se,{valueFormatter:H,metricToLabel:s}),cursor:{opacity:.2,fill:k}}),a.jsx(ae,{dataKey:"date",axisLine:!1,tickLine:!1,tick:ne,tickFormatter:n=>Q(re(n),"MMM d"),interval:t.length-2}),a.jsx(ie,{axisLine:!1,tickLine:!1,domain:[0,e],ticks:[0,e],fontSize:11,fill:k,tick:n=>a.jsx(oe,j(f({},n),{textAnchor:"start",y:n.payload.value===0?n.y:n.y-10,x:n.x-10,fontWeight:400,children:H(n.payload.value)}))}),p.map((n,o)=>{const g="values.".concat(n),u=l&&l!==n;return a.jsx(L,{opacity:u?.15:1,dataKey:g,stackId:_,isAnimationActive:!1,fill:u?le:s[n].color,radius:o===0?[4,4,0,0]:void 0},g)}).reverse(),a.jsx(L,{dataKey:"blank",minPointSize:1,stackId:_,isAnimationActive:!1,children:t.map((n,o)=>a.jsx(ce,{opacity:.5,fill:"blank"in n&&n.blank===0?k:"transparent"},"cell-".concat(o)))}),a.jsx(de,{y:e,stroke:k,strokeDasharray:"3 3",shape:n=>a.jsx("line",j(f({},n),{x1:22}))})]})})}),!r&&a.jsx("div",{className:"text-token-text-primary flex w-full flex-wrap items-center justify-center text-sm",children:i.map(([n,{displayName:o,total:g,color:u}])=>a.jsxs("div",{className:"mx-4 mb-1 flex cursor-pointer items-center justify-center",title:o,onMouseOut:h(void 0,i.length),onMouseOver:h(n,i.length),children:[a.jsx("div",{className:"me-1 h-2 w-2 rounded-[1px]",style:{backgroundColor:u}}),a.jsx("span",{className:"me-1 max-w-32 overflow-hidden text-ellipsis whitespace-nowrap",children:o}),a.jsx("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:"(".concat(he.format(g),")")})]},n))})]})}const he=new Intl.NumberFormat(void 0,{notation:"compact",maximumSignificantDigits:3}),ge=T({noData:{id:"workspaceUsage.overviewChart.noData",defaultMessage:"No data for this period"}});function we(t,{toastId:e,message:s}={}){const r=D(),x=z();return async(...d)=>{try{return await t(...d)}catch(l){throw r.danger(x.formatMessage(s!=null?s:$.defaultErrorToastMessage),{id:e,loggingTitle:s&&typeof s.defaultMessage=="string"?s.defaultMessage:$.defaultErrorToastMessage.defaultMessage}),V.addError(l),l}}}const $=T({defaultErrorToastMessage:{id:"defaultErrorToastMessage",defaultMessage:"Something went wrong. If this issue persists please contact us through our help center at help.openai.com."}});function Te({data:t,mimeType:e,filename:s}){const r=document.createElement("a");r.href="data:".concat(e,",").concat(encodeURIComponent(t)),r.target="_self",r.download=s,r.click(),r.remove()}export{Me as O,he as T,fe as V,Te as d,we as u};
//# sourceMappingURL=ewr1thdvcdyb0wdj.js.map
