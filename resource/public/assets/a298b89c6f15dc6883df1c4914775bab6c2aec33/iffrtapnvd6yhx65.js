const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mrdpayda8ou6mqu0.js","assets/n75kuy1cx6f5mogg.js","assets/ewse8exzafeu10ji.js","assets/root-l2v84m1w.css","assets/hp56atvrtol0eb47.js","assets/ggf5upe1rvhe0y6r.js","assets/ny10lj7zpuz89fvf.js","assets/conversation-small-hotcas67.css","assets/f8qcx5r3ombc6w5p.js","assets/kkcke7zkpz7m4enu.js","assets/iogh0tx5dnoufuv6.js","assets/ldq3nzd52ms5m3ld.js"])))=>i.map(i=>d[i]);
var W=Object.defineProperty;var N=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var M=(s,t,a)=>t in s?W(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,k=(s,t)=>{for(var a in t||(t={}))z.call(t,a)&&M(s,a,t[a]);if(N)for(var a of N(t))A.call(t,a)&&M(s,a,t[a]);return s};import{b as P,d as V,j as e,M as C,r as E,A as L}from"./n75kuy1cx6f5mogg.js";import{f as D,i as F,e as H,dG as O,T as G,fA as Q,B,j as $,C as q,ej as R,ek as T,fy as J,at as K}from"./ewse8exzafeu10ji.js";import{u as b,r as U}from"./ggf5upe1rvhe0y6r.js";import{S as X}from"./hp56atvrtol0eb47.js";import{j$ as Y,dW as Z,h8 as ee}from"./ny10lj7zpuz89fvf.js";import{u as se}from"./n1zi1frmhwo1ei8c.js";import{d as te}from"./kl7c6054usfnqmd4.js";import{F as ae}from"./f4bsrb68xtlmldi5.js";import"./f8qcx5r3ombc6w5p.js";const S=V({downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},title:{id:"walnut.title",defaultMessage:"Preview"},tooltip:{id:"walnut.tooltip",defaultMessage:"This is a web preview and may not reflect exact formatting. Download to open in your preferred software for best results."}}),oe=({onClose:s,onPlay:t,extension:a,contentType:o,clientThreadId:d,editHandlers:_})=>{var w;const l=P(),p=D(),j=o==="presentation",{formatMessage:g}=P(),c=g(S.title),y=g(S.tooltip);F();const{focusedWalnutId:n,presentationMap:m}=b(),r=n?m[n]:void 0,f=(w=r==null?void 0:r.fileName)!=null?w:o==="presentation"?"presentation.pptx":"spreadsheet.xlsx",v=!1,u=r==null?void 0:r.fileBlob,i=l.formatMessage(S.downloadFileError),h=se(!1,d,n!=null?n:"",()=>{},()=>{p.danger(i,{toastId:"post_sharing_modal_download_error",loggingTitle:i,loggingDescription:"Error message when a file download fails"})});return e.jsxs("div",{className:H("text-token-text-secondary border-token-border-light relative flex w-full items-center justify-between border-b px-3 py-2",v),children:[e.jsxs("div",{className:"z-10 flex flex-row gap-2",children:[e.jsx(Y,{onClick:s,children:e.jsx(O,{})}),!1]}),e.jsxs("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-1",children:[e.jsx(ae,{fileName:c!=null?c:null}),e.jsx("div",{className:"text-token-text-primary flex flex-row items-center truncate text-sm font-medium",children:e.jsx(G,{label:y,theme:"white",defaultOpen:!0,customBackgroundColorClassName:"bg-[#6B91F1]",labelClassName:"text-white font-light",side:"bottom",disabled:v,children:e.jsxs("div",{className:"flex flex-row items-center",children:[c,e.jsx(Q,{className:"ms-1 size-4"})]})})}),a&&e.jsx("div",{className:"text-token-text-tertiary ms-2 text-sm",children:a})]}),e.jsxs("div",{className:"z-10 flex items-center gap-1",children:[!1,e.jsx(B,{color:"ghost",size:"small",onClick:async()=>{if(u)te(u,f);else{const{data:x}=await h.refetch();if(x===void 0||(x==null?void 0:x.status)!=="success"){p.danger(i,{toastId:"post_sharing_modal_download_error",loggingTitle:i,loggingDescription:"Error message when a file download fails"});return}const I=document.createElement("a");I.href=x.download_url,I.click()}},children:e.jsx(Z,{})}),j&&e.jsx(B,{color:"primary",onClick:t,size:"small",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{}),e.jsx("span",{className:"hidden sm:block",children:e.jsx(C,{id:"walnut.play",defaultMessage:"Play Slideshow"})})]})})]})]})},ne=R(()=>T(()=>import("./mrdpayda8ou6mqu0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(s=>s.CanvasRenderer)),re=R(()=>T(()=>import("./ldq3nzd52ms5m3ld.js").then(s=>s.s),__vite__mapDeps([11,1,6,2,3,7,4,5,8])).then(s=>s.SpreadsheetRenderer));function le({isOpen:s,onClose:t,clientThreadId:a}){const[o,d]=E.useState(!1),{presentationMap:_,focusedWalnutId:l,setSelectedSlideIdx:p}=b(),j=F(),g=$(j,"3245235608"),[c,y]=E.useState(!1),n=l?_[l]:null,{presentation:m,fileName:r,workbook:f,document:v}=n!=null?n:{};if(!l||!n)return null;const u=m?"presentation":f?"spreadsheet":"none",i=u==="presentation"&&m&&!o,h=u==="spreadsheet"&&f&&!o;return e.jsx(q,{testId:"modal-walnut-content",type:"success",size:"fullscreen",isOpen:s,onClose:t,visuallyHiddenHeader:!0,children:e.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[e.jsx(oe,{onClose:t,onPlay:()=>d(!o),title:r,contentType:u,clientThreadId:a,canEdit:!1}),i&&e.jsx(ne,{presentation:m,selectedSlideIdx:n.selectedSlideIdx,setSelectedSlideIdx:w=>p(l,w),isWalnutV2Enabled:g,isEditing:c,setIsEditing:y}),h&&e.jsx(re,{workbook:f,selectedSheetIdx:n.selectedSheetIdx}),!1,o&&e.jsx(X,{startIndex:0,onExit:t,walnutId:l}),!i&&!h&&!0&&!o&&e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx(C,{id:"walnut.noFile",defaultMessage:"No file selected."})})]})})}const ie=({clientThreadId:s})=>{const{isOpen:t,close:a}=b(),o=t?e.jsx(le,{isOpen:t,onClose:a,clientThreadId:s}):null;return e.jsx(L,{children:o},s)},je=s=>{const t=E.useRef(null);return e.jsx(J,{ref:t,onError:(a,o)=>{U(),setTimeout(()=>{var d;(d=t.current)==null||d.resetErrorBoundary()}),K.addError(a,{componentStack:o})},name:"walnut-focused-view",children:e.jsx(ie,k({},s))})};export{je as WalnutFocusedViewManager};
//# sourceMappingURL=iffrtapnvd6yhx65.js.map
