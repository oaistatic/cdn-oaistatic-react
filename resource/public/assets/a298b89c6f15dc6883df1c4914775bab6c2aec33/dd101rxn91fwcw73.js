var I=Object.defineProperty;var _=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var A=(t,s,o)=>s in t?I(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,d=(t,s)=>{for(var o in s||(s={}))B.call(s,o)&&A(t,o,s[o]);if(_)for(var o of _(s))q.call(s,o)&&A(t,o,s[o]);return t};import{b as k,j as e,M as i,r as h,d as U,i as K,n as W,g as F,D as X}from"./n75kuy1cx6f5mogg.js";import{i as Y,qB as D,i6 as C,ee as T,E as O,B as m,ik as z,lO as Q,f as $,oh as V,qQ as Z,oF as J,oG as ee,qR as te,qS as v,ij as L,T as se,qT as P,qU as E,qV as oe,qW as ne,qX as ae,qY as ce,qZ as ie,ed as re,q_ as le}from"./ewse8exzafeu10ji.js";import{R as de}from"./ew3pxbwlfqv7xn4e.js";import{h as me}from"./l7az6eau39sfbc3y.js";import{s as ue}from"./fmsmhem5hrm2cxrs.js";import{a as xe}from"./mj3d3dq6aai5rlh4.js";import"./ny10lj7zpuz89fvf.js";import"./jocaiq9wugboh64i.js";import"./lg0bckqp15rzbs79.js";import"./chdemz4xlfbm1987.js";import"./kj8rd4pu8k32z2dy.js";import"./d65yyyom1modmtdi.js";import"./fh2tsu8ocsi22jc3.js";import"./nyfr63odztw7y2ja.js";import"./heyok871zyju5auh.js";import"./ltsv6em2m484o9yy.js";import"./kas18igmwglc2mb4.js";import"./e0y2s8usszg014s2.js";function fe(){var f;Y();const t=k(),s=Q("installations/select_target"),{isConnected:o,isLoading:n,error:r,openGithubModal:a,refetch:u,handleDisconnect:p}=D(T.GITHUB_CONNECTOR,"github","/codex/settings/connectors",C.CODEX),{data:x,isLoading:g}=ue();return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-token-text-primary text-md font-medium",children:e.jsx(i,{id:"wham.githubConnectionsRow.githubConnector",defaultMessage:"GitHub"})}),r?e.jsx(de,{refetchConnectorData:u}):g||n?e.jsx("div",{className:"flex w-full items-center justify-center gap-2",children:e.jsx(O,{className:"h-6 w-6"})}):o?e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-token-text-primary flex items-center gap-2 text-sm",children:e.jsx(i,{id:"wham.githubConnectionsRow.title",defaultMessage:"Connected to <b>{githubLogin}</b>",values:{b:j=>e.jsx("b",{children:j}),githubLogin:(f=x==null?void 0:x.github_handle)!=null?f:"GitHub"}})}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(m,{color:"danger-outline",className:"w-fit",loading:n,onClick:()=>p(),"aria-label":t.formatMessage({id:"wham.githubConnectionRow.disconnectAriaLabel",defaultMessage:"Button to disconnect GitHub connection"}),children:e.jsx(i,{id:"wham.githubConnectionRow.disconnect",defaultMessage:"Disconnect"})}),e.jsx(m,{color:"secondary",className:"w-fit",onClick:()=>me(s),"aria-label":t.formatMessage({id:"wham.githubConnectionRow.settingsAriaLabel",defaultMessage:"Button to go to GitHub installations settings page"}),children:e.jsx(i,{id:"wham.githubConnectionRow.settings",defaultMessage:"Settings"})})]})]}):e.jsxs("div",{className:"text-token-text-secondary flex flex-col gap-2 text-sm",children:[e.jsx("p",{className:"pb-2 text-xs",children:e.jsx(i,{id:"wham.githubConnectionsRow.githubConnection",defaultMessage:"Connect to your GitHub repositories to use in Codex"})}),e.jsx(m,{icon:o?void 0:z,color:"primary",className:"w-fit",loading:n,onClick:a,children:e.jsx(i,{id:"wham.codexOnboardingConnections.connectGithub",defaultMessage:"Connect to GitHub"})})]})]})}const l=U({slackConnectorTitle:{id:"wham.slackConnectionsRow.slackConnector",defaultMessage:"Slack"},slackConnectorDescription:{id:"wham.slackConnectionsRow.slackConnection",defaultMessage:"Connect to Slack so you can ask @codex to answer questions or draft PRs right from Slack."},connectSlack:{id:"wham.slackConnectionsRow.connectSlack",defaultMessage:"Connect to Slack"},connectSlackMore:{id:"wham.slackConnectionsRow.connectMore",defaultMessage:"Connect more"},slackDisabledByAdmin:{id:"wham.slackConnectionsRow.disabledByAdmin",defaultMessage:"Currently disabled by your ChatGPT workspace admin."},disconnectSlack:{id:"wham.slackConnectionsRow.disconnect",defaultMessage:"Disconnect"},retrySlack:{id:"wham.slackConnectionsRow.retry",defaultMessage:"Failed to load Slack connection"},retryTooltip:{id:"wham.slackConnectionsRow.retryTooltip",defaultMessage:"Click to retry"},defaultWorkspaceName:{id:"wham.slackConnectionsRow.defaultWorkspaceName",defaultMessage:"Slack workspace"}});function he({refetchConnectorData:t}){const s=k();return e.jsx(se,{label:s.formatMessage(l.retryTooltip),children:e.jsx(m,{color:"secondary",size:"small",type:"button",className:"border-token-border-default flex w-fit items-center gap-1.5 rounded-full! border",onClick:t,children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(L,{"aria-hidden":!0,className:"icon-sm"}),e.jsx(i,d({},l.retrySlack))]})})})}function Ce(){const t=k(),s=$(),o=V(),n=Z(),r=h.useCallback(()=>{J({redirectUri:ee(),connectorPlatformParams:{connectorId:v,name:"Slack",actionNames:null,oauthClientId:te,oauthClientScopes:null,slackTeamId:n!=null?n:void 0},redirectTo:"/codex/settings/connectors",intl:t,toaster:s,productSku:C.CODEX,openPopup:o})},[t,s,o,n]),{isConnected:a,isLoading:u,error:p,openConnectorModal:x,refetch:g,handleDisconnect:f,links:j,platformConnector:b}=D(T.SLACK_CODEX_CONNECTOR,"slack","/codex/settings/connectors",C.CODEX,r,r),G=(b==null?void 0:b.status)==="DISABLED_BY_ADMIN",H=c=>{var N,S,y,M,R;return(R=(M=(y=(N=c==null?void 0:c.owner_profile)==null?void 0:N.nickname)!=null?y:(S=c==null?void 0:c.owner_profile)==null?void 0:S.name)!=null?M:c==null?void 0:c.name)!=null?R:t.formatMessage(l.defaultWorkspaceName)},w=G?e.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:e.jsx(i,d({},l.slackDisabledByAdmin))}):e.jsx(m,{icon:L,color:"primary",className:"w-fit",loading:u,onClick:x,children:e.jsx(i,d({},a?l.connectSlackMore:l.connectSlack))});return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-token-text-primary text-md font-medium",children:e.jsx(i,d({},l.slackConnectorTitle))}),e.jsx("p",{className:"text-token-text-secondary text-xs",children:e.jsx(i,d({},l.slackConnectorDescription))}),p?e.jsx(he,{refetchConnectorData:g}):u?e.jsx("div",{className:"flex w-full items-center justify-center gap-2",children:e.jsx(O,{className:"h-6 w-6"})}):a?e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:w}),e.jsx("div",{className:"flex flex-col gap-2",children:j.map(c=>e.jsxs("div",{className:"border-token-border-default flex flex-wrap items-center justify-between gap-3 rounded-md border px-3 py-2",children:[e.jsx("span",{className:"text-token-text-primary text-sm font-medium",children:H(c)}),e.jsx(m,{color:"danger-outline",className:"w-fit",loading:u,onClick:()=>f(c.id),children:e.jsx(i,d({},l.disconnectSlack))})]},c.id))})]}):e.jsx("div",{className:"text-token-text-secondary flex flex-col gap-3 text-sm",children:w})]})}function pe(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex pt-4",children:e.jsx(fe,{})}),e.jsx("div",{className:"flex pt-4",children:e.jsx(Ce,{})})]})}const ge=P;function je(){return e.jsx("div",{className:"border-token-border-heavy flex items-center border-b",children:e.jsx("div",{className:"py-2 text-xl leading-7 font-medium",children:e.jsx(i,{id:"wham.connectorControlsHeader.title",defaultMessage:"Connectors"})})})}function be(){const[t]=K(),s=W(),o=F(),n=h.useMemo(()=>t.get(ge),[t]),r=h.useMemo(()=>t.get(E),[t]);return h.useEffect(()=>{if(!n&&!r)return;const a=new URLSearchParams;a.set(oe,"true"),a.set(ne,v),a.set(ae,C.CONNECTOR_SETTING),a.set(ce,"/codex/settings/connectors"),n&&a.set(P,n),r&&a.set(E,r),a.set(ie,re.Codex),o({pathname:s.pathname,hash:"".concat(le,"?").concat(a.toString()),search:""},{replace:!0})},[s.pathname,o,r,n]),e.jsx(xe,{header:e.jsx(je,{}),children:e.jsx(pe,{})})}const Be=()=>[{title:"Codex"}],qe=X(function(){return e.jsx(be,{})});export{qe as default,Be as meta};
//# sourceMappingURL=dd101rxn91fwcw73.js.map
