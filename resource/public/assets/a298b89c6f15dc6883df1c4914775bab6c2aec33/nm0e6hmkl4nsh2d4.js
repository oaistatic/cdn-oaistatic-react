import{j as e,r as c,M as j}from"./n75kuy1cx6f5mogg.js";import{e as P,dD as M,B as C}from"./ewse8exzafeu10ji.js";import{h7 as w,h8 as T}from"./ny10lj7zpuz89fvf.js";import{S as E}from"./hp56atvrtol0eb47.js";import{s as z,a as R}from"./iogh0tx5dnoufuv6.js";import{u as B}from"./ggf5upe1rvhe0y6r.js";import"./f8qcx5r3ombc6w5p.js";import"./ldq3nzd52ms5m3ld.js";const D=({goPrev:s,goNext:m,setIsPlaying:x,thumbnails:o,selectedSlideIdx:l})=>{const h=o.length<=1||l===0,a=o.length<=1||l===o.length-1,d=o.length<=1;return e.jsxs("div",{className:P("absolute start-1/2 bottom-2 flex -translate-x-1/2 items-center overflow-hidden rounded-2xl border","border-token-border-light bg-token-bg-primary text-token-text-primary","transition-opacity duration-150","can-hover:opacity-0 can-hover:pointer-events-none","can-hover:group-hover:opacity-100 can-hover:group-hover:pointer-events-auto"),children:[e.jsx("button",{onClick:s,disabled:h,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(w,{className:"icon-sm"})}),e.jsx("div",{className:"border-token-border-light h-6 border-s"}),e.jsx("button",{onClick:()=>x(!0),disabled:d,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(T,{className:"size-5"})}),e.jsx("div",{className:"border-token-border-light h-6 border-s"}),e.jsx("button",{onClick:m,disabled:a,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(M,{className:"icon-sm"})})]})},A=({walnutId:s,isLoading:m,isError:x,isInShareModal:o,errorMessage:l,handleDownloadClick:h})=>{var g,v,y;const{presentationMap:a,setSelectedSlideIdx:d}=B(),r=(g=a[s])==null?void 0:g.presentation,n=(v=a[s])==null?void 0:v.workbook,b=(y=a[s])==null?void 0:y.selectedSlideIdx,[i,u]=c.useState([]),[k,f]=c.useState(!1);if(c.useEffect(()=>{r&&(async()=>{const t=await Promise.all(r.slides.map(p=>z(p,r)));u(t)})()},[r]),c.useEffect(()=>{n&&(async()=>{const t=await Promise.all(n.sheets.map(p=>R(p,20,10,0,n)));u(t)})()},[n]),x||l==="fileTooLarge")return e.jsxs("div",{className:"flex h-[250px] flex-col items-center justify-center gap-2 text-center",children:[e.jsx("div",{className:"text-token-text-primary max-w-[80%] text-xs",children:e.jsx(j,{id:"YMbrlR",defaultMessage:"Preview not available."})}),e.jsx(C,{color:"ghost",size:"small",as:"button",onClick:t=>h(t),children:e.jsx(j,{id:"GjJtUJ",defaultMessage:"Download"})})]});if(m||!r&&!n||!i.length)return e.jsx("div",{className:"flex h-[250px] items-center justify-center gap-2",children:e.jsx("div",{className:"border-token-border-heavy h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"})});const N=()=>{d(s,t=>t>0?t-1:i.length-1)},S=()=>{d(s,t=>t<i.length-1?t+1:0)};return e.jsxs("div",{className:"relative flex flex-col items-center",children:[r&&e.jsx(D,{goPrev:N,goNext:S,setIsPlaying:f,thumbnails:i,selectedSlideIdx:b}),e.jsx("img",{src:i[b],alt:"",className:"m-0 rounded border",style:{background:"#fff"}}),r&&k&&e.jsx(E,{startIndex:0,onExit:()=>f(!1),walnutId:s}),o&&e.jsx("div",{className:"from-token-main-surface-primary pointer-events-none absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent","data-testid":"walnut-mini-player-share-gradient"})]})};export{A as WalnutMiniPlayer};
//# sourceMappingURL=nm0e6hmkl4nsh2d4.js.map
