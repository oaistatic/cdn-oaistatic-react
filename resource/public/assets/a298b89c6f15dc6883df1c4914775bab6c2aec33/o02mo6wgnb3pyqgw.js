var ye=Object.freeze,ge=Object.defineProperty,tt=Object.defineProperties;var at=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var xe=(t,e,r)=>e in t?ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,W=(t,e)=>{for(var r in e||(e={}))rt.call(e,r)&&xe(t,r,e[r]);if(ve)for(var r of ve(e))st.call(e,r)&&xe(t,r,e[r]);return t},Q=(t,e)=>tt(t,at(e));var se=(t,e)=>ye(ge(t,"raw",{value:ye(e||t.slice())}));import{R as S,r as C,j as l,M as k,c as it,b as he,D as nt,n as ot,al as lt}from"./n75kuy1cx6f5mogg.js";import{u as ct}from"./e0y2s8usszg014s2.js";import{W as dt}from"./lg0bckqp15rzbs79.js";import{g as $,L as K,m as te,i as X,h as ie,A as ut,j as z,k as ft,l as ht,n as mt,u as pt,G as yt,o as be,q as we,D as vt,s as xt,X as me,Y as pe,t as gt,S as Ce,R as Ue,B as bt,T as Ve,a as H,C as Be,b as wt,p as Fe,c as Ct,d as Ee,M as Se,e as Me,f as Et,r as Ge}from"./n8p9nkuciyrx3m32.js";import{bW as Ae,e as re,F as $e,E as ze,lo as Xe,w as St}from"./ewse8exzafeu10ji.js";import{i as de}from"./co6h42pxywtlg2op.js";import{nY as je}from"./ny10lj7zpuz89fvf.js";import{D as Mt,E as At,F as jt,G as Lt}from"./fmsmhem5hrm2cxrs.js";import"./chdemz4xlfbm1987.js";import"./kj8rd4pu8k32z2dy.js";import"./d65yyyom1modmtdi.js";import"./fh2tsu8ocsi22jc3.js";import"./nyfr63odztw7y2ja.js";import"./heyok871zyju5auh.js";import"./ltsv6em2m484o9yy.js";import"./kas18igmwglc2mb4.js";import"./ke40fa6376bmvij2.js";import"./dv12g54ivgixitjp.js";import"./galyil7vygq0i5a6.js";import"./f8qcx5r3ombc6w5p.js";import"./mmditfxqk8k7c43g.js";import"./h76aawyn0y8q6s6p.js";import"./jocaiq9wugboh64i.js";function Dt({response:t,isLoading:e,isError:r,seriesId:a,displayName:s,aggregation:i="sum"}){if(e)return"loading";if(t==null||t.data==null)return r?_t(a,s):"loading";const o=t.data,c=o.reduce((m,f)=>m+f.value,0),p=o.length,d=i==="average"&&p>0?Math.max(0,Math.round(c/p)):c;return{data:o.map(({date:m,value:f})=>({date:m,total:f,values:{[a]:f}})),metrics:{[a]:{total:d,displayName:s}}}}function Ye({response:t,isLoading:e,isError:r,seriesLabels:a}){if(e)return{chartData:ue(a),isLoading:!0};if(t==null||t.data==null)return{chartData:ue(a),isLoading:!r};const s=Object.keys(a),i=t.data.map(({date:d,values:m})=>{const f={};let u=0;return s.forEach(n=>{var y;const h=(y=m[n])!=null?y:0;f[n]=h,u+=h}),{date:d,total:u,values:f}}),o=s.reduce((d,m)=>(d[m]=i.reduce((f,u)=>{var n;return f+((n=u.values[m])!=null?n:0)},0),d),{}),c=i.length,p=s.reduce((d,m)=>{const f=o[m],u=c>0?Math.max(0,Math.round(f/c)):0;return d[m]={total:u,displayName:a[m]},d},{});return{chartData:{data:i,metrics:p},isLoading:!1}}function _t(t,e){return{data:[],metrics:{[t]:{total:0,displayName:e}}}}function ue(t){const e=Object.entries(t).reduce((r,[a,s])=>(r[a]={total:0,displayName:s},r),{});return{data:[],metrics:e}}function He({response:t,isLoading:e,isError:r,seriesLabels:a,extractSeriesValues:s}){const i=ue(a);if(e)return{chartData:i,isLoading:!0};if(t==null||t.data==null)return{chartData:i,isLoading:!r};const o={data:t.data.map(c=>({date:c.date,values:s(c)}))};return Ye({response:o,isLoading:!1,isError:!1,seriesLabels:a})}function Rt({response:t,isLoading:e,isError:r,seriesLabels:a}){return He({response:t,isLoading:e,isError:r,seriesLabels:a,extractSeriesValues:s=>{var i,o,c;return{p0:(i=s.n_comments_p0)!=null?i:0,p1:(o=s.n_comments_p1)!=null?o:0,p2:(c=s.n_comments_p2)!=null?c:0}}})}function Ot({response:t,isLoading:e,isError:r,seriesLabels:a}){return He({response:t,isLoading:e,isError:r,seriesLabels:a,extractSeriesValues:s=>{var i,o,c;return{plus1:(i=s.n_reactions_plus1)!=null?i:0,minus1:(o=s.n_reactions_minus1)!=null?o:0,other:(c=s.n_reactions_other)!=null?c:0}}})}var kt=["layout","type","stroke","connectNulls","isRange","ref"],Tt=["key"],qe;function q(t){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(t)}function Qe(t,e){if(t==null)return{};var r=Nt(t,e),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)a=i[s],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function Nt(t,e){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;r[a]=t[a]}return r}function G(){return G=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},G.apply(this,arguments)}function Le(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,a)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Le(Object(r),!0).forEach(function(a){P(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function It(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Je(a.key),a)}}function Pt(t,e,r){return e&&De(t.prototype,e),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wt(t,e,r){return e=ae(e),Ut(t,Ke()?Reflect.construct(e,r||[],ae(t).constructor):e.apply(t,r))}function Ut(t,e){if(e&&(q(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vt(t)}function Vt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ke(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ke=function(){return!!t})()}function ae(t){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ae(t)}function Bt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}function fe(t,e){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},fe(t,e)}function P(t,e,r){return e=Je(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Je(t){var e=Ft(t,"string");return q(e)=="symbol"?e:e+""}function Ft(t,e){if(q(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(q(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var V=function(t){function e(){var r;It(this,e);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Wt(this,e,[].concat(s)),P(r,"state",{isAnimationFinished:!0}),P(r,"id",pt("recharts-area-")),P(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),de(o)&&o()}),P(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),de(o)&&o()}),r}return Bt(e,t),Pt(e,[{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(o&&!c)return null;var p=this.props,d=p.dot,m=p.points,f=p.dataKey,u=$(this.props,!1),n=$(d,!0),h=m.map(function(v,x){var g=U(U(U({key:"dot-".concat(x),r:3},u),n),{},{index:x,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:m});return e.renderDotItem(d,g)}),y={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return S.createElement(K,G({className:"recharts-area-dots"},y),h)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,c=s.strokeWidth,p=o[0].x,d=o[o.length-1].x,m=a*Math.abs(p-d),f=te(o.map(function(u){return u.y||0}));return X(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(te(i.map(function(u){return u.y||0})),f)),X(f)?S.createElement("rect",{x:p<d?p:p-m,y:0,width:m,height:Math.floor(f+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,c=s.strokeWidth,p=o[0].y,d=o[o.length-1].y,m=a*Math.abs(p-d),f=te(o.map(function(u){return u.x||0}));return X(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(te(i.map(function(u){return u.x||0})),f)),X(f)?S.createElement("rect",{x:0,y:p<d?p:p-m,width:f+(c?parseInt("".concat(c),10):1),height:Math.floor(m)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,o){var c=this.props,p=c.layout,d=c.type,m=c.stroke,f=c.connectNulls,u=c.isRange;c.ref;var n=Qe(c,kt);return S.createElement(K,{clipPath:i?"url(#clipPath-".concat(o,")"):null},S.createElement(ie,G({},$(n,!0),{points:a,connectNulls:f,type:d,baseLine:s,layout:p,stroke:"none",className:"recharts-area-area"})),m!=="none"&&S.createElement(ie,G({},$(this.props,!1),{className:"recharts-area-curve",layout:p,type:d,connectNulls:f,fill:"none",points:a})),m!=="none"&&u&&S.createElement(ie,G({},$(this.props,!1),{className:"recharts-area-curve",layout:p,type:d,connectNulls:f,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,o=this.props,c=o.points,p=o.baseLine,d=o.isAnimationActive,m=o.animationBegin,f=o.animationDuration,u=o.animationEasing,n=o.animationId,h=this.state,y=h.prevPoints,v=h.prevBaseLine;return S.createElement(ut,{begin:m,duration:f,isActive:d,easing:u,from:{t:0},to:{t:1},key:"area-".concat(n),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var g=x.t;if(y){var j=y.length/c.length,b=c.map(function(M,I){var R=Math.floor(I*j);if(y[R]){var T=y[R],O=z(T.x,M.x),A=z(T.y,M.y);return U(U({},M),{},{x:O(g),y:A(g)})}return M}),w;if(X(p)&&typeof p=="number"){var E=z(v,p);w=E(g)}else if(je(p)||ft(p)){var _=z(v,0);w=_(g)}else w=p.map(function(M,I){var R=Math.floor(I*j);if(v[R]){var T=v[R],O=z(T.x,M.x),A=z(T.y,M.y);return U(U({},M),{},{x:O(g),y:A(g)})}return M});return i.renderAreaStatically(b,w,a,s)}return S.createElement(K,null,S.createElement("defs",null,S.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(g))),S.createElement(K,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(c,p,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,o=i.points,c=i.baseLine,p=i.isAnimationActive,d=this.state,m=d.prevPoints,f=d.prevBaseLine,u=d.totalLength;return p&&o&&o.length&&(!m&&u>0||!Ae(m,o)||!Ae(f,c))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(o,c,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,c=s.points,p=s.className,d=s.top,m=s.left,f=s.xAxis,u=s.yAxis,n=s.width,h=s.height,y=s.isAnimationActive,v=s.id;if(i||!c||!c.length)return null;var x=this.state.isAnimationFinished,g=c.length===1,j=re("recharts-area",p),b=f&&f.allowDataOverflow,w=u&&u.allowDataOverflow,E=b||w,_=je(v)?this.id:v,M=(a=$(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=M.r,R=I===void 0?3:I,T=M.strokeWidth,O=T===void 0?2:T,A=ht(o)?o:{},L=A.clipDot,N=L===void 0?!0:L,B=R*2+O;return S.createElement(K,{className:j},b||w?S.createElement("defs",null,S.createElement("clipPath",{id:"clipPath-".concat(_)},S.createElement("rect",{x:b?m:m-n/2,y:w?d:d-h/2,width:b?n:n*2,height:w?h:h*2})),!N&&S.createElement("clipPath",{id:"clipPath-dots-".concat(_)},S.createElement("rect",{x:m-B/2,y:d-B/2,width:n+B,height:h+B}))):null,g?null:this.renderArea(E,_),(o||g)&&this.renderDots(E,N,_),(!y||x)&&mt.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])}(C.PureComponent);qe=V;P(V,"displayName","Area");P(V,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!yt.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});P(V,"getBaseValue",function(t,e,r,a){var s=t.layout,i=t.baseValue,o=e.props.baseValue,c=o!=null?o:i;if(X(c)&&typeof c=="number")return c;var p=s==="horizontal"?a:r,d=p.scale.domain();if(p.type==="number"){var m=Math.max(d[0],d[1]),f=Math.min(d[0],d[1]);return c==="dataMin"?f:c==="dataMax"||m<0?m:Math.max(Math.min(d[0],d[1]),0)}return c==="dataMin"?d[0]:c==="dataMax"?d[1]:d[0]});P(V,"getComposedData",function(t){var e=t.props,r=t.item,a=t.xAxis,s=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,c=t.bandSize,p=t.dataKey,d=t.stackedData,m=t.dataStartIndex,f=t.displayedData,u=t.offset,n=e.layout,h=d&&d.length,y=qe.getBaseValue(e,r,a,s),v=n==="horizontal",x=!1,g=f.map(function(b,w){var E;h?E=d[m+w]:(E=be(b,p),Array.isArray(E)?x=!0:E=[y,E]);var _=E[1]==null||h&&be(b,p)==null;return v?{x:we({axis:a,ticks:i,bandSize:c,entry:b,index:w}),y:_?null:s.scale(E[1]),value:E,payload:b}:{x:_?null:a.scale(E[1]),y:we({axis:s,ticks:o,bandSize:c,entry:b,index:w}),value:E,payload:b}}),j;return h||x?j=g.map(function(b){var w=Array.isArray(b.value)?b.value[0]:null;return v?{x:b.x,y:w!=null&&b.y!=null?s.scale(w):null}:{x:w!=null?a.scale(w):null,y:b.y}}):j=v?s.scale(y):a.scale(y),U({points:g,baseLine:j,layout:n,isRange:x},u)});P(V,"renderDotItem",function(t,e){var r;if(S.isValidElement(t))r=S.cloneElement(t,e);else if(de(t))r=t(e);else{var a=re("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,i=Qe(e,Tt);r=S.createElement(vt,G({},i,{key:s,className:a}))}return r});var Gt=xt({chartName:"AreaChart",GraphicalChild:V,axisComponents:[{axisType:"xAxis",AxisComp:me},{axisType:"yAxis",AxisComp:pe}],formatAxisMap:gt});const _e="default",Re=t=>t.toLocaleString();var Pe;const Oe=$e.div(Pe||(Pe=se(["flex h-full grow items-center justify-center text-lg text-token-text-tertiary"]))),Ze=t=>"values"in t,$t=t=>"blank"in t,zt=(t,e)=>{var a,s,i;if($t(t))return(a=t.blank)!=null?a:0;if(e)return(s=t.total)!=null?s:0;let r=0;for(const o of Object.values((i=t.values)!=null?i:{}))typeof o=="number"&&o>r&&(r=o);return r};function et({title:t,data:e,hideLegend:r=!1,seriesColorMap:a,forceStack:s=!1,stackOrder:i,legendOrder:o}){"use no forget";const c=C.useMemo(()=>e==="loading"?"loading":e.data,[e]),p=C.useMemo(()=>s||!a?!0:Object.values(a).filter(f=>typeof f=="string").length<=1,[s,a]),d=C.useMemo(()=>c==="loading"?0:c.reduce((f,u)=>{var n;return Math.max(f,(n=zt(u,p))!=null?n:0)},0),[c,p]),m=C.useMemo(()=>{if(e==="loading"||c==="loading")return{};const f=o?new Map(o.map((n,h)=>[n,h])):void 0,u=Object.keys(e.metrics).map(n=>{var y,v;const h=c.reduce((x,g)=>{var j;return Ze(g)?x+((j=g.values[n])!=null?j:0):x},0);return{displayName:(v=(y=e.metrics[n])==null?void 0:y.displayName)!=null?v:n,total:h,groupKey:n}}).sort((n,h)=>{if(f){const y=f.get(n.groupKey),v=f.get(h.groupKey);if(y!==void 0&&v!==void 0)return y-v;if(y!==void 0)return-1;if(v!==void 0)return 1}return h.total-n.total});return Object.fromEntries(u.map(({total:n,groupKey:h,displayName:y},v)=>{var x;return[h,{displayName:y,total:n,color:(x=a==null?void 0:a[h])!=null?x:Ce[v%Ce.length]}]}))},[o,c,a,e]);return l.jsxs("div",{className:"border-token-border-default mb-4 flex min-h-[350px] flex-col rounded-lg border pt-4 pb-4",children:[l.jsx("div",{className:"px-6",children:l.jsx("div",{className:"text-token-text-secondary text-sm",children:l.jsx(k,W({},t))})}),l.jsx(Xt,{processedData:c,maxTotal:d,seriesMetadata:m,hideLegend:r,stackSeries:p,stackOrder:i,legendOrder:o})]})}function Xt({processedData:t,maxTotal:e,seriesMetadata:r,hideLegend:a,stackSeries:s,stackOrder:i,legendOrder:o}){"use no forget";const[c,p]=C.useState(),d=C.useMemo(()=>{if(o)return new Map(o.map((n,h)=>[n,h]))},[o]),m=C.useMemo(()=>Object.entries(r).sort(([n],[h])=>{if(n==="other"&&h==="other")return 0;if(n==="other")return 1;if(h==="other")return-1;if(d){const y=d.get(n),v=d.get(h);if(y!==void 0&&v!==void 0)return y-v;if(y!==void 0)return-1;if(v!==void 0)return 1}return 0}),[d,r]),f=C.useMemo(()=>{const n=m.map(([v])=>v);if(!i||i.length===0)return n;const h=new Set(i),y=[];return i.forEach(v=>{n.includes(v)&&y.push(v)}),n.forEach(v=>{h.has(v)||y.push(v)}),y},[m,i]);if(t==="loading")return l.jsx(Oe,{children:l.jsx(ze,{})});if(e===0)return l.jsx(Oe,{children:l.jsx(k,{id:"codex.analytics.multiBarOverview.noData",defaultMessage:"No data for this period"})});const u=s?t.map(n=>{var h,y;if(Ze(n))for(let v=f.length-1;v>=0;v-=1){const x=f[v];if(((y=(h=n.values)==null?void 0:h[x])!=null?y:0)>0)return x}}):[];return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:re(Ge,"flex grow items-center"),children:l.jsx(Ue,{width:"100%",height:220,children:l.jsxs(bt,{data:t,margin:{left:-20,top:14,right:20},barGap:s?4:1,children:[l.jsx(Ve,{isAnimationActive:!1,content:l.jsx(Be,{valueFormatter:Re,metricToLabel:r}),cursor:{opacity:.2,fill:H}}),l.jsx(me,{dataKey:"date",axisLine:!1,tickLine:!1,tick:wt,tickFormatter:n=>Xe(Fe(n),"MMM d"),interval:t.length-2}),l.jsx(pe,{axisLine:!1,tickLine:!1,domain:[0,e],ticks:[0,e],fontSize:11,fill:H,tick:n=>l.jsx(Ct,Q(W({},n),{textAnchor:"start",y:n.payload.value===0?n.y:n.y-10,x:n.x-10,fontWeight:400,children:Re(n.payload.value)}))}),f.map(n=>{const h="values.".concat(n),y=c&&c!==n;return l.jsx(Ee,{dataKey:h,stackId:s?_e:void 0,isAnimationActive:!1,children:t.map((v,x)=>{var w,E;const g=s&&u[x]===n,j=s?g?[4,4,0,0]:[0,0,0,0]:[4,4,0,0],b=y?Se:(E=(w=r[n])==null?void 0:w.color)!=null?E:Se;return l.jsx(Me,{radius:j,fill:b,opacity:y?.15:1},"cell-".concat(n,"-").concat(x))})},h)}),s?l.jsx(Ee,{dataKey:"blank",minPointSize:1,stackId:_e,isAnimationActive:!1,children:t.map((n,h)=>l.jsx(Me,{opacity:.5,fill:"blank"in n&&n.blank===0?H:"transparent"},"cell-".concat(h)))}):null,l.jsx(Et,{y:e,stroke:H,strokeDasharray:"3 3",shape:n=>l.jsx("line",Q(W({},n),{x1:22}))})]})})}),!a&&l.jsx("div",{className:"text-token-text-primary flex w-full flex-wrap items-center justify-center text-sm",children:m.map(([n,{displayName:h,color:y}])=>l.jsxs("div",{className:"mx-4 mb-1 flex cursor-pointer items-center justify-center",title:h,onMouseOut:()=>p(void 0),onMouseOver:()=>p(n),children:[l.jsx("div",{className:"me-1 h-2 w-2 rounded-[1px]",style:{backgroundColor:y}}),l.jsx("span",{className:"me-1 max-w-32 overflow-hidden text-ellipsis whitespace-nowrap",children:h})]},n))})]})}function F(t){"use forget";const e=it.c(19),{query:r,config:a}=t,s=he(),{data:i,isLoading:o,isError:c,error:p}=r;c&&St.error(a.loggerMessage,{error:p});let d,m;e[0]!==a||e[1]!==i||e[2]!==s||e[3]!==c||e[4]!==o?(m=a.buildChartData({response:i,isError:c,isLoading:o,intl:s}),e[0]=a,e[1]=i,e[2]=s,e[3]=c,e[4]=o,e[5]=m):m=e[5],d=m;const f=d;let u;e[6]!==a.errorMessage||e[7]!==c?(u=c?l.jsx("p",{className:"mt-6 text-sm text-red-600 dark:text-red-400",children:l.jsx(k,W({},a.errorMessage))}):null,e[6]=a.errorMessage,e[7]=c,e[8]=u):u=e[8];let n;e[9]!==f||e[10]!==a.clientEventSource||e[11]!==a.hideLegend||e[12]!==a.otherGroupLabel||e[13]!==a.seriesColorMap||e[14]!==a.title?(n=l.jsx("div",{className:"mt-8",children:l.jsx(et,{title:a.title,data:f,clientEventSource:a.clientEventSource,hideLegend:a.hideLegend,otherGroupLabel:a.otherGroupLabel,seriesColorMap:a.seriesColorMap})}),e[9]=f,e[10]=a.clientEventSource,e[11]=a.hideLegend,e[12]=a.otherGroupLabel,e[13]=a.seriesColorMap,e[14]=a.title,e[15]=n):n=e[15];let h;return e[16]!==u||e[17]!==n?(h=l.jsxs(l.Fragment,{children:[u,n]}),e[16]=u,e[17]=n,e[18]=h):h=e[18],h}function Yt({seriesId:t,aggregation:e,seriesLabelMessage:r}){return({response:a,isError:s,isLoading:i,intl:o})=>Dt({response:a,isLoading:i,isError:s,seriesId:t,displayName:o.formatMessage(r),aggregation:e})}function Ht({seriesLabelMessages:t}){return({response:e,isError:r,isLoading:a,intl:s})=>{const i=Object.fromEntries(Object.entries(t).map(([p,d])=>[p,s.formatMessage(d)])),{chartData:o,isLoading:c}=Ye({response:e,isError:r,isLoading:a,seriesLabels:i});return c?"loading":o}}const D={codeReview:"#ffab00",web:"#ff3621",vscode:"#00a972",cli:"#077a9d"},Y={codeReviewTasks:D.codeReview,codeReviewUsers:D.codeReview,webTasks:D.web,webUsers:D.web,vscodeUsers:D.vscode,cliUsers:D.cli};var We;const ke=$e.div(We||(We=se(["flex h-full grow items-center justify-center text-lg text-token-text-tertiary"]))),qt=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),Te=0,Qt=10,Kt=({x:t,y:e,payload:r,index:a,tickFormatter:s})=>{"use no forget";const i=a===0,o=i?t-Te:t+Te,c=i?"start":"end";return l.jsx("text",{x:o,y:e+Qt,fill:H,textAnchor:c,fontSize:12,fontWeight:400,children:s(r.value)})},Jt=t=>"".concat(qt.format(Number(t!=null?t:0)),"%");function Zt({title:t,data:e,seriesOrder:r,seriesColorMap:a}){"use no forget";const s=he(),i=C.useMemo(()=>e==="loading"?"loading":e.data.map(u=>{const n=r.reduce((y,v)=>{var x,g;return y+((g=(x=u.values)==null?void 0:x[v])!=null?g:0)},0),h={date:u.date};return r.forEach(y=>{var x,g;const v=(g=(x=u.values)==null?void 0:x[y])!=null?g:0;h[y]=n>0?v/n*100:0}),h}),[e,r]),o=C.useMemo(()=>r.map((u,n)=>{var h,y,v;return{key:u,displayName:e!=="loading"&&(y=(h=e.metrics[u])==null?void 0:h.displayName)!=null?y:u,color:(v=a[u])!=null?v:"hsl(".concat(n*137.5%360,"deg 60% 65%)")}}),[e,a,r]),c=C.useMemo(()=>Object.fromEntries(o.map(({key:u,displayName:n})=>[u,{displayName:n}])),[o]),[p,d]=C.useState();if(i==="loading")return l.jsxs("div",{className:"border-token-border-default mb-4 flex min-h-[350px] flex-col rounded-lg border pt-4 pb-4",children:[l.jsx("div",{className:"px-6",children:l.jsx("div",{className:"text-token-text-secondary text-sm",children:l.jsx(k,W({},t))})}),l.jsx(ke,{children:l.jsx(ze,{})})]});const m=i.some(u=>r.some(n=>u[n]>0)),f=Math.max(0,i.length-2);return l.jsxs("div",{className:"border-token-border-default mb-4 flex min-h-[350px] flex-col rounded-lg border pt-4 pb-4",children:[l.jsx("div",{className:"px-6",children:l.jsx("div",{className:"text-token-text-secondary text-sm",children:l.jsx(k,W({},t))})}),m?l.jsx("div",{className:re(Ge,"flex grow items-center"),"aria-label":s.formatMessage(t),children:l.jsx(Ue,{width:"100%",height:220,children:l.jsxs(Gt,{data:i,margin:{left:28,top:14,right:22},children:[l.jsx(me,{dataKey:"date",axisLine:!1,tickLine:!1,tick:Kt,tickFormatter:u=>Xe(Fe(String(u)),"MMM d"),interval:f}),l.jsx(Ve,{content:l.jsx(Be,{valueFormatter:Jt,metricToLabel:c})}),l.jsx(pe,{domain:[0,100],ticks:[0,100],tickFormatter:u=>"".concat(u,"%"),axisLine:!1,tickLine:!1,allowDecimals:!1,width:34,tick:{fontSize:11,fill:H}}),o.map(({key:u,color:n})=>{const h=p&&p!==u;return l.jsx(V,{type:"monotone",dataKey:u,stackId:"1",stroke:n,strokeOpacity:h?.35:1,fill:n,fillOpacity:h?.18:.6,isAnimationActive:!1,className:"transition-opacity duration-150"},u)})]})})}):l.jsx(ke,{children:l.jsx(k,{id:"codex.analytics.percentageStackedAreaChart.noData",defaultMessage:"No data for this period"})}),l.jsx("div",{className:"text-token-text-primary flex w-full flex-wrap items-center justify-center text-sm",children:o.map(({key:u,displayName:n,color:h})=>l.jsxs("div",{className:"mx-4 mb-1 flex cursor-pointer items-center justify-center",title:n,onMouseEnter:()=>d(u),onMouseLeave:()=>d(void 0),children:[l.jsx("div",{className:"me-1 h-2 w-2 rounded-[1px]",style:{backgroundColor:h}}),l.jsx("span",{className:"me-1 max-w-32 overflow-hidden text-ellipsis whitespace-nowrap",children:n})]},u))})]})}function J({seriesId:t,seriesLabel:e,title:r,errorMessage:a,loggerMessage:s,clientEventSource:i,seriesColor:o,aggregation:c="average",hideLegend:p=!0}){return{title:r,errorMessage:a,loggerMessage:s,clientEventSource:i,hideLegend:p,seriesColorMap:{[t]:o},buildChartData:Yt({seriesId:t,aggregation:c,seriesLabelMessage:e})}}const Z={codeReviewUsers:J({seriesId:"codeReviewUsers",loggerMessage:"Failed to load Codex analytics code review users",clientEventSource:"codexDailyCodeReviewUsers",seriesColor:Y.codeReviewUsers,title:{id:"codex.analytics.dailycodereviewusers.chartTitle",defaultMessage:"Daily code review users (past 30 days)",description:"Title for the Codex analytics chart that shows the average number of Code Review users per day over the past 30 days"},errorMessage:{id:"codex.analytics.dailycodereviewusers.error",defaultMessage:"We ran into an issue loading analytics. Data shown may be out of date.",description:"Error message shown when the Codex analytics code review users chart fails to load"},seriesLabel:{id:"codex.analytics.dailycodereviewusers.chartSeriesLabel",defaultMessage:"Code review users",description:"Label for the code review users series shown on the Codex analytics chart"}}),webTasks:J({seriesId:"webTasks",loggerMessage:"Failed to load Codex analytics web tasks",clientEventSource:"codexDailyWebTasks",seriesColor:Y.webTasks,title:{id:"codex.analytics.dailywebtasks.chartTitle",defaultMessage:"Daily web tasks (past 30 days)",description:"Title for the Codex analytics chart that shows the average number of Web tasks completed per day over the past 30 days"},errorMessage:{id:"codex.analytics.dailywebtasks.error",defaultMessage:"We ran into an issue loading analytics. Data shown may be out of date.",description:"Error message shown when the Codex analytics web tasks chart fails to load"},seriesLabel:{id:"codex.analytics.dailywebtasks.chartSeriesLabel",defaultMessage:"Web tasks",description:"Label for the web tasks series displayed on the Codex analytics chart"}}),webUsers:J({seriesId:"webUsers",loggerMessage:"Failed to load Codex analytics web users",clientEventSource:"codexDailyWebUsers",seriesColor:Y.webUsers,title:{id:"codex.analytics.dailywebusers.chartTitle",defaultMessage:"Daily web users (past 30 days)",description:"Title for the Codex analytics chart that shows the average number of Web users per day over the past 30 days"},errorMessage:{id:"codex.analytics.dailywebusers.error",defaultMessage:"We ran into an issue loading analytics. Data shown may be out of date.",description:"Error message shown when the Codex analytics web users chart fails to load"},seriesLabel:{id:"codex.analytics.dailywebusers.chartSeriesLabel",defaultMessage:"Web users",description:"Label for the web users series displayed on the Codex analytics chart"}}),vscodeUsers:J({seriesId:"vscodeUsers",loggerMessage:"Failed to load Codex analytics VS Code users",clientEventSource:"codexDailyVSCodeUsers",seriesColor:Y.vscodeUsers,title:{id:"codex.analytics.dailyvscodeusers.chartTitle",defaultMessage:"Daily VS Code extension users (past 30 days)",description:"Title for the Codex analytics chart that shows the average number of VS Code extension users per day over the past 30 days"},errorMessage:{id:"codex.analytics.dailyvscodeusers.error",defaultMessage:"We ran into an issue loading analytics. Data shown may be out of date.",description:"Error message shown when the Codex analytics VS Code users chart fails to load"},seriesLabel:{id:"codex.analytics.dailyvscodeusers.chartSeriesLabel",defaultMessage:"VS Code extension users",description:"Label for the VS Code users series displayed on the Codex analytics chart"}}),cliUsers:J({seriesId:"cliUsers",loggerMessage:"Failed to load Codex analytics CLI users",clientEventSource:"codexDailyCliUsers",seriesColor:Y.cliUsers,title:{id:"codex.analytics.dailycliusers.chartTitle",defaultMessage:"Daily CLI users (past 30 days)",description:"Title for the Codex analytics chart that shows the average number of CLI users per day over the past 30 days"},errorMessage:{id:"codex.analytics.dailycliusers.error",defaultMessage:"We ran into an issue loading analytics. Data shown may be out of date.",description:"Error message shown when the Codex analytics CLI users chart fails to load"},seriesLabel:{id:"codex.analytics.dailycliusers.chartSeriesLabel",defaultMessage:"CLI users",description:"Label for the CLI users series displayed on the Codex analytics chart"}})},ea={id:"codex.analytics.dailycodereviews.chartSeriesLabel",defaultMessage:"Code reviews",description:"Label for the single series displayed on the Codex analytics chart"},ta={title:{id:"codex.analytics.dailycodereviews.chartTitle",defaultMessage:"Daily code reviews (past 30 days)",description:"Title for the Codex analytics chart which shows the average number of code reviews performed per day over the past 30 days"},errorMessage:{id:"codex.analytics.dailycodereviews.error",defaultMessage:"We ran into an issue loading analytics. Data shown may be out of date.",description:"Error message shown when Codex analytics overview fails to load"},loggerMessage:"Failed to load Codex analytics overview",clientEventSource:"codexDailyCodeReviewTasks",hideLegend:!0,seriesColorMap:{codeReviewTasks:Y.codeReviewTasks},buildChartData:la()},aa={codeReview:{id:"codex.analytics.dailyproductusageoverview.codeReviewSeriesLabel",defaultMessage:"Code review",description:"Label for the code review bar series displayed on the product usage overview chart"},web:{id:"codex.analytics.dailyproductusageoverview.webSeriesLabel",defaultMessage:"Web",description:"Label for the web bar series displayed on the product usage overview chart"},vscode:{id:"codex.analytics.dailyproductusageoverview.vscodeSeriesLabel",defaultMessage:"VS Code",description:"Label for the VS Code bar series displayed on the product usage overview chart"},cli:{id:"codex.analytics.dailyproductusageoverview.cliSeriesLabel",defaultMessage:"CLI",description:"Label for the CLI bar series displayed on the product usage overview chart"}},ra={title:{id:"codex.analytics.dailyproductusageoverview.chartTitle",defaultMessage:"Daily users by product (past 30 days)",description:"Title for the Codex analytics chart that shows daily users broken down by product"},errorMessage:{id:"codex.analytics.dailyproductusageoverview.error",defaultMessage:"We ran into an issue loading analytics. Data shown may be out of date.",description:"Error message shown when the Codex analytics product usage overview chart fails to load"},loggerMessage:"Failed to load Codex analytics product usage overview",clientEventSource:"codexDailyProductUsageOverview",seriesColorMap:{codeReview:D.codeReview,web:D.web,vscode:D.vscode,cli:D.cli},buildChartData:Ht({seriesLabelMessages:aa})},sa={id:"codex.analytics.dailycodereviewpriority.chartTitle",defaultMessage:"Daily code review issues by priority (past 30 days)",description:"Title for the chart that shows average daily code review issues broken down by priority level"},ne={p0:{id:"codex.analytics.dailycodereviewpriority.series.p0",defaultMessage:"P0 issues",description:"Legend label for the daily code review chart showing the number of priority zero issues"},p1:{id:"codex.analytics.dailycodereviewpriority.series.p1",defaultMessage:"P1 issues",description:"Legend label for the daily code review chart showing the number of priority one issues"},p2:{id:"codex.analytics.dailycodereviewpriority.series.p2",defaultMessage:"P2 issues",description:"Legend label for the daily code review chart showing the number of priority two issues"}},ia={p0:"#2A5EB1",p1:"#3A7DE8",p2:"#B8C6F6"},na={id:"codex.analytics.dailycodereviewreactions.chartTitle",defaultMessage:"Daily code review feedback sentiment (past 30 days)",description:"Title for the chart that shows average daily code review reactions broken down by reaction type"},oe={plus1:{id:"codex.analytics.dailycodereviewreactions.series.plus1",defaultMessage:"ðŸ‘ reactions",description:"Legend label for the daily code review reactions chart showing the number of +1 reactions"},minus1:{id:"codex.analytics.dailycodereviewreactions.series.minus1",defaultMessage:"ðŸ‘Ž reactions",description:"Legend label for the daily code review reactions chart showing the number of -1 reactions"},other:{id:"codex.analytics.dailycodereviewreactions.series.other",defaultMessage:"Other reactions",description:"Legend label for the daily code review reactions chart showing the number of reactions that are neither +1 nor -1"}},oa={plus1:D.vscode,minus1:D.web,other:D.cli},le=["plus1","minus1","other"];function la(){return({response:t,isError:e,isLoading:r,intl:a})=>{if(r)return"loading";const s=t,i=a.formatMessage(ea);if(s==null||s.data==null)return e?ca(i):"loading";const o=s.data,c=o.reduce((d,m)=>d+m.n_tasks,0),p=o.length>0?Math.max(0,Math.round(c/o.length)):0;return{data:o.map(d=>({date:d.date,total:d.n_tasks,values:{codeReviewTasks:d.n_tasks}})),metrics:{codeReviewTasks:{total:p,displayName:i}}}}}function ca(t){return{data:[],metrics:{codeReviewTasks:{total:0,displayName:t}}}}function ce(t,e){if(!(t==null||t.data==null))return{data:t.data.map(r=>({date:r.date,value:r[e]}))}}function ee(t,e){return{data:e,isLoading:t.isLoading,isError:t.isError,error:t.error}}function Ne({isUpsell:t=!1}={}){var E,_;const e=he(),r=Mt(),a=At(),s=jt(),i=Lt(),o=C.useMemo(()=>({p0:e.formatMessage(ne.p0),p1:e.formatMessage(ne.p1),p2:e.formatMessage(ne.p2)}),[e]),c=C.useMemo(()=>({plus1:e.formatMessage(oe.plus1),minus1:e.formatMessage(oe.minus1),other:e.formatMessage(oe.other)}),[e]),p=C.useMemo(()=>{const{chartData:M,isLoading:I}=Rt({response:a.data,isLoading:a.isLoading,isError:a.isError,seriesLabels:o});if(I)return"loading";const R=["p0","p1","p2"],T=R.reduce((A,L)=>{const N=M.metrics[L];return N&&(A[L]=N),A},{});return{data:M.data.map(A=>{const L={};return R.forEach(N=>{var B;L[N]=(B=A.values[N])!=null?B:0}),Q(W({},A),{values:L})}),metrics:T}},[o,a.data,a.isError,a.isLoading]),d=C.useMemo(()=>{const{chartData:M,isLoading:I}=Ot({response:a.data,isLoading:a.isLoading,isError:a.isError,seriesLabels:c});if(I)return"loading";const R=le.reduce((O,A)=>{const L=M.metrics[A];return L&&(O[A]=L),O},{});return{data:M.data.map(O=>{const A={};return le.forEach(L=>{var N;A[L]=(N=O.values[L])!=null?N:0}),Q(W({},O),{values:A})}),metrics:R}},[c,a.data,a.isError,a.isLoading]),f={data:C.useMemo(()=>da(r.data,s.data,i.data),[i.data,r.data,s.data]),isLoading:r.isLoading||s.isLoading||i.isLoading,isError:r.isError||s.isError||i.isError,error:(_=(E=r.error)!=null?E:s.error)!=null?_:i.error},u=C.useMemo(()=>ce(r.data,"n_users"),[r.data]),n=ee(r,u),h=C.useMemo(()=>ce(s.data,"n_tasks"),[s.data]),y=C.useMemo(()=>ce(s.data,"n_users"),[s.data]),v=ee(s,h),x=ee(s,y),g=C.useMemo(()=>Ie(i.data,"n_vscode_users"),[i.data]),j=ee(i,g),b=C.useMemo(()=>Ie(i.data,"n_cli_users"),[i.data]),w=ee(i,b);return l.jsx(dt,{topPadding:!0,showSidebar:!t,canShowAlert:!t,hideHeaderNotificationBell:t,hideHeaderSettings:t,children:l.jsxs("div",{className:"mx-auto flex h-full max-w-screen-xl flex-1 flex-col gap-10 ps-4 pe-12 pb-16",children:[l.jsx("header",{className:"border-token-border-heavy flex flex-col border-b",children:l.jsx("h1",{className:"text-token-text-primary py-2 text-xl leading-7 font-medium",children:l.jsx(k,{id:"codex.analytics.title",defaultMessage:"Codex Analytics"})})}),l.jsxs("div",{className:"flex flex-col gap-10",children:[l.jsxs("section",{className:"flex flex-col gap-6",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:l.jsx(k,{id:"codex.analytics.sections.overall",defaultMessage:"Overall"})}),l.jsx(F,{query:f,config:ra})]}),l.jsxs("section",{className:"mt-10",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:l.jsx(k,{id:"codex.analytics.sections.codeReview",defaultMessage:"Code review"})}),l.jsx(F,{query:n,config:Z.codeReviewUsers}),l.jsx(F,{query:r,config:ta}),l.jsx("div",{className:"mt-8",children:l.jsx(et,{title:sa,data:p,clientEventSource:"codexDailyCodeReviewPriority",seriesColorMap:ia,forceStack:!0,stackOrder:["p2","p1","p0"],legendOrder:["p0","p1","p2"]})}),l.jsx("div",{className:"mt-8",children:l.jsx(Zt,{title:na,data:d,seriesOrder:le,seriesColorMap:oa})})]}),l.jsxs("section",{className:"mt-10",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:l.jsx(k,{id:"codex.analytics.sections.web",defaultMessage:"Web"})}),l.jsx(F,{query:v,config:Z.webTasks}),l.jsx(F,{query:x,config:Z.webUsers})]}),l.jsxs("section",{className:"mt-10",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:l.jsx(k,{id:"codex.analytics.sections.vscode",defaultMessage:"VS Code"})}),l.jsx(F,{query:j,config:Z.vscodeUsers})]}),l.jsxs("section",{className:"mt-10",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:l.jsx(k,{id:"codex.analytics.sections.cli",defaultMessage:"CLI"})}),l.jsx(F,{query:w,config:Z.cliUsers})]})]})]})})}function da(t,e,r){var o,c,p;const a=new Map,s=(d,m,f)=>{var h;if(d==null||f==null)return;const u=ua(d),n=(h=a.get(u))!=null?h:{};n[m]=f,a.set(u,n)};return(o=t==null?void 0:t.data)==null||o.forEach(({date:d,n_users:m})=>s(d,"codeReview",m)),(c=e==null?void 0:e.data)==null||c.forEach(({date:d,n_users:m})=>s(d,"web",m)),(p=r==null?void 0:r.data)==null||p.forEach(({date:d,n_cli_users:m,n_vscode_users:f})=>{s(d,"cli",m),s(d,"vscode",f)}),a.size===0?void 0:{data:Array.from(a.keys()).sort().map(d=>{var f,u,n,h,y;const m=(f=a.get(d))!=null?f:{};return{date:d,values:{codeReview:(u=m.codeReview)!=null?u:0,web:(n=m.web)!=null?n:0,vscode:(h=m.vscode)!=null?h:0,cli:(y=m.cli)!=null?y:0}}})}}function ua(t){return typeof t=="string"?t:t.toISOString().slice(0,10)}function Ie(t,e){if(!(t==null||t.data==null))return{data:t.data.map(r=>{var a,s;return{date:r.date,value:e==="n_cli_users"?(a=r.n_cli_users)!=null?a:0:(s=r.n_vscode_users)!=null?s:0}})}}const Ia=()=>[{title:"Codex"}],Pa=nt(function(){var s;const e=ot(),r=ct(),a=!!((s=e.state)!=null&&s.embed);return r?a?l.jsx(Ne,{isUpsell:!0}):l.jsx(Ne,{}):l.jsx(lt,{to:"/codex",replace:!0})});export{Pa as default,Ia as meta};
//# sourceMappingURL=o02mo6wgnb3pyqgw.js.map
