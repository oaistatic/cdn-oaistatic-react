import{b as G,r as s,j as e,d as L}from"./n75kuy1cx6f5mogg.js";import{dI as y,dJ as _,dK as B,dL as H,dM as O,dN as Q,dO as x,N as i,dP as V,dQ as W,dR as Y,dS as z,dT as J,dU as K,dV as X,dW as Z,dX as $,dY as ee}from"./ny10lj7zpuz89fvf.js";import{I as ae}from"./ca3g7gcaj954pu3h.js";import"./ewse8exzafeu10ji.js";import"./lksc5q29mjlblqoo.js";import"./da0anzdj3bll2tbv.js";import"./mzj5jqjjpo006z7a.js";import"./nnb0v70g00lhjclz.js";import"./fh2tsu8ocsi22jc3.js";import"./jaupzjmp9wknd4io.js";import"./jtxj1xvdu5i7mvdh.js";import"./j2ui4c2m3nj8pqst.js";import"./h2dwuj1m5ps9l7uv.js";const S=L({thumbsUp:{id:"Qz8Wa6",defaultMessage:"Like this image"},thumbsDown:{id:"sUGtRy",defaultMessage:"Dislike this image"}}),se=t=>{var d,c,g,u;return O({pointer:{url:t.url,asset_pointer:(d=t.assetPointer)!=null?d:"",metadata:{dalle:{gen_id:(c=t.transformationId)!=null?c:void 0},generation:{gen_id:(g=t.transformationId)!=null?g:void 0}},width:t.width,height:t.height},conversationId:t.conversationId,messageId:(u=t.messageId)!=null?u:"",source:"chat"})},fe=({images:t,initialIndex:d,onClose:c,onRequestCompletion:g,clientThreadId:u,currentModelId:M})=>{var k;const n=G(),N=y(),[o,w]=s.useState(null),[h,p]=s.useState(null),[R,T]=s.useState(d),[C,f]=s.useState("default"),r=_(),v=s.useRef(null),I=s.useRef(r);s.useEffect(()=>{I.current=r},[r]);const U=s.useCallback(l=>{p(null),w(null),T(l),f("default"),I.current.clearAllDrawings()},[]),D=s.useCallback(()=>B(n),[n]),m=s.useCallback((l,b)=>{!b||o!=null||(H.imageRated({liked:l,analyticsContext:se(b)}),w(l),l||p(b))},[o]),a=t[R],j=s.useCallback(()=>{f("default"),I.current.clearAllDrawings()},[]),F=s.useCallback(()=>{m(!0,a)},[m,a]),E=s.useCallback(()=>{!a||o!=null||m(!1,a)},[m,a,o]),P=s.useCallback(()=>{a&&f("inpaint")},[a]),q=s.useCallback(()=>{a&&Q({url:a.url,fileName:D()})},[a,D]),A=s.useCallback(()=>{var l;return(l=v.current)==null?void 0:l.getImageData()},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(x.Root,{images:t,initialIndex:d,onClose:c,onIndexChange:U,inpaintingProps:{mode:C,drawingState:r,drawingCanvasRef:v},children:[e.jsx(x.LightboxHeaderActions,{children:C==="inpaint"?e.jsxs("div",{className:"grid grow grid-cols-[1fr_auto] items-center gap-2",children:[e.jsx("div",{className:"text-center font-semibold",children:n.formatMessage({id:"TjVqYb",defaultMessage:"Edit Selection"})}),e.jsxs("div",{className:"flex gap-1 justify-self-end md:gap-2",children:[e.jsx(i,{className:"aspect-square",icon:V,onClick:r.undoDrawing,disabled:!r.canUndoDrawing,"aria-label":n.formatMessage({id:"OmaTPx",defaultMessage:"Undo"})}),e.jsx(i,{className:"aspect-square",icon:W,onClick:r.redoDrawing,disabled:!r.canRedoDrawing,"aria-label":n.formatMessage({id:"ZUr4oh",defaultMessage:"Redo"})}),e.jsx(i,{className:"w-auto px-3",onClick:j,children:n.formatMessage({id:"D9xvar",defaultMessage:"Cancel"})})]})]}):e.jsxs("div",{className:"flex gap-1 md:gap-2",children:[o!==!1&&e.jsx(i,{className:"aspect-square",icon:o===!0?Y:z,onClick:F,"aria-label":n.formatMessage(S.thumbsUp)}),o!==!0&&e.jsx(i,{className:"aspect-square",icon:o===!1?J:K,onClick:E,"aria-label":n.formatMessage(S.thumbsDown)}),e.jsx(i,{className:"aspect-square",icon:X,onClick:P,"aria-label":n.formatMessage({id:"pRGwlp",defaultMessage:"Edit image"})}),e.jsx(i,{className:"aspect-square",icon:Z,onClick:q,"aria-label":n.formatMessage({id:"9DNHka",defaultMessage:"Download image"})}),N()&&(a==null?void 0:a.messageId)&&e.jsx($,{assetPointer:a.assetPointer,serverThreadId:a.conversationId,messageId:a.messageId})]})}),e.jsx(x.Footer,{children:e.jsx(ae,{clientThreadId:u,currentModelId:M,onRequestCompletion:g,onClose:c,activeImage:a,currentDrawnShape:r.currentDrawnShape,getImageData:A,onCancelInpaint:j})})]}),h&&e.jsx(ee,{messageId:(k=h.messageId)!=null?k:"",serverThreadId:h.conversationId,rating:o,onClose:()=>p(null)})]})};export{fe as ImageGenConversationLightboxNew};
//# sourceMappingURL=bygkq777mc84o32a.js.map
