var B=Object.defineProperty;var k=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var P=(s,e,a)=>e in s?B(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,C=(s,e)=>{for(var a in e||(e={}))F.call(e,a)&&P(s,a,e[a]);if(k)for(var a of k(e))T.call(e,a)&&P(s,a,e[a]);return s};import{b as E,g as W,r as $,j as t,M as x,c as N,D as A}from"./n75kuy1cx6f5mogg.js";import{i as G,j as I,hC as O,H as L,z as Y,E as q}from"./ewse8exzafeu10ji.js";import{fF as z,fG as H}from"./ny10lj7zpuz89fvf.js";import{W as Q}from"./lg0bckqp15rzbs79.js";import{h as J}from"./fmsmhem5hrm2cxrs.js";import"./chdemz4xlfbm1987.js";import"./kj8rd4pu8k32z2dy.js";import"./d65yyyom1modmtdi.js";import"./fh2tsu8ocsi22jc3.js";import"./nyfr63odztw7y2ja.js";import"./heyok871zyju5auh.js";import"./ltsv6em2m484o9yy.js";import"./kas18igmwglc2mb4.js";import"./e0y2s8usszg014s2.js";import"./jocaiq9wugboh64i.js";const S="quota";function K(s){return Math.min(Math.max(Math.round(s),0),100)}function V(s){return s<=30?"bg-[#f87171]":"bg-[#22c55e]"}function v(s,e,a,o){var r;const n=K(100-((r=e.used_percent)!=null?r:0)),i=Z(s,e.reset_after_seconds);return{id:a,label:t.jsx(x,C({},o)),remainingPercent:n,resetLabel:i,barColorClassName:V(n)}}function X(s,e){const a=e.primary_window,o=e.secondary_window;if(!a||!o)return[];const n=[v(s,a,"".concat(S,"-primary"),{id:"wham.usageDashboard.metric.window.primary",defaultMessage:"5 hour usage limit",description:"Label for the short usage window metric"}),v(s,o,"".concat(S,"-secondary"),{id:"wham.usageDashboard.metric.window.secondary",defaultMessage:"Weekly usage limit",description:"Label for the long usage window metric"})];return[{id:S,title:t.jsx(x,{id:"wham.usageDashboard.section.quota",defaultMessage:"Quota usage"}),metrics:n}]}function R(s,e){const a=Math.max(e,0),o=new Date,n=new Date(o.getTime()+a*1e3);return n.getFullYear()===o.getFullYear()&&n.getMonth()===o.getMonth()&&n.getDate()===o.getDate()?n.toLocaleTimeString(s.locale):n.toLocaleString(s.locale)}function Z(s,e){const a=R(s,e);return s.formatMessage({id:"wham.usageDashboard.metric.resetsAt",defaultMessage:"Resets {label}"},{label:a})}function ee(s){if(!s)return 0;const e=[];return s.primary_window&&s.primary_window.used_percent===100&&e.push(s.primary_window.reset_after_seconds),s.secondary_window&&s.secondary_window.used_percent===100&&e.push(s.secondary_window.reset_after_seconds),e.length>0?Math.max(...e):0}function te(){"use forget";var g;const s=E(),e=W(),a=G(),{data:o,isLoading:n,error:i}=J(),r=(g=o==null?void 0:o.rate_limit)!=null?g:null,l=!!(r!=null&&r.primary_window&&(r!=null&&r.secondary_window)),d=$.useMemo(()=>l&&r?X(s,r):[],[l,s,r]),m=!!(o&&r==null),h=!!(r&&!l),y=!!m,_=!!i||h;let c;const f=I(a,"1426094881");return n?c=t.jsxs("div",{className:"flex w-full items-center justify-center py-16",children:[t.jsx(q,{className:"icon me-2"}),t.jsx("span",{className:"text-token-text-secondary text-sm font-medium",children:t.jsx(x,{id:"wham.usageDashboard.loading",defaultMessage:"Loading usage data"})})]}):y?c=t.jsx(U,{title:t.jsx(x,{id:"wham.usageDashboard.noLimits",defaultMessage:"Your plan does not impose Codex rate limits"})}):_?c=t.jsx(U,{title:t.jsx(x,{id:"wham.usageDashboard.error.title",defaultMessage:"We couldn’t load your usage data"}),description:t.jsx(x,{id:"wham.usageDashboard.error.body",defaultMessage:"Please try again. If the issue continues, contact support."})}):c=t.jsxs(t.Fragment,{children:[f&&(o==null?void 0:o.plan_type)==="plus"&&(r==null?void 0:r.limit_reached)&&t.jsx(O,{className:"shadow-[0_16px_32px_-24px_rgba(15,23,42,0.25)]",icon:t.jsx("div",{className:"bg-token-bg-tertiary text-token-text-primary flex h-9 w-9 items-center justify-center rounded-full",children:t.jsx(z,{className:"icon","aria-hidden":!0})}),title:t.jsx(x,{id:"wham.usageDashboard.limitReached.title",defaultMessage:"Heads up — you’ve hit your usage limit"}),content:t.jsx(x,{id:"wham.usageDashboard.limitReached.body",defaultMessage:"Try again after {time} or upgrade to Pro for higher limits",values:{time:R(s,ee(r))}}),primaryCtaText:t.jsx(x,C({},Y.upgradeToPro)),primaryCtaColor:"primary",onPrimaryCtaClick:()=>{L(e,"Wham usage dashboard rate limit upsell")}}),d.map(u=>t.jsx(se,{title:u.title,metrics:u.metrics},u.id))]}),t.jsx(Q,{topPadding:!0,children:t.jsxs("div",{className:"mx-auto flex h-full max-w-screen-xl flex-1 flex-col gap-10 ps-4 pe-12 pb-16",children:[t.jsx("header",{className:"border-token-border-heavy flex flex-col border-b",children:t.jsx("h1",{className:"text-token-text-primary py-2 text-xl leading-7 font-medium",children:t.jsx(x,{id:"wham.usageDashboard.title",defaultMessage:"Usage dashboard"})})}),t.jsx("div",{className:"flex flex-col gap-10",children:c})]})})}function se(s){"use forget";const e=N.c(9),{title:a,metrics:o}=s;let n;e[0]!==a?(n=t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:a}),e[0]=a,e[1]=n):n=e[1];let i;e[2]!==o?(i=o.map(ae),e[2]=o,e[3]=i):i=e[3];let r;e[4]!==i?(r=t.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:i}),e[4]=i,e[5]=r):r=e[5];let l;return e[6]!==n||e[7]!==r?(l=t.jsxs("section",{className:"flex flex-col gap-6",children:[n,r]}),e[6]=n,e[7]=r,e[8]=l):l=e[8],l}function ae(s){return t.jsx(re,{metric:s},s.id)}function U(s){"use forget";const e=N.c(10),{title:a,description:o,action:n}=s;let i;e[0]!==a?(i=t.jsx("h2",{className:"text-token-text-primary text-base font-medium",children:a}),e[0]=a,e[1]=i):i=e[1];let r;e[2]!==o?(r=o?t.jsx("p",{className:"text-token-text-secondary text-sm",children:o}):null,e[2]=o,e[3]=r):r=e[3];let l;e[4]!==n?(l=n?t.jsx("div",{className:"pt-1",children:n}):null,e[4]=n,e[5]=l):l=e[5];let d;return e[6]!==i||e[7]!==r||e[8]!==l?(d=t.jsxs("article",{className:"border-token-border-subtle bg-token-bg-primary flex flex-col gap-3 rounded-3xl border p-6 shadow-[0_16px_32px_-24px_rgba(15,23,42,0.25)]",children:[i,r,l]}),e[6]=i,e[7]=r,e[8]=l,e[9]=d):d=e[9],d}function re(s){"use forget";const e=N.c(29),{metric:a}=s,o=E(),{label:n,remainingPercent:i,resetLabel:r,barColorClassName:l}=a;let d;e[0]!==i?(d=Math.round(i),e[0]=i,e[1]=d):d=e[1];const m=Math.min(Math.max(d,0),100);let h;e[2]!==o||e[3]!==m?(h=o.formatNumber(m/100,{style:"percent",maximumFractionDigits:0}),e[2]=o,e[3]=m,e[4]=h):h=e[4];const y=h;let j;e[5]!==o?(j=o.formatMessage({id:"wham.usageDashboard.metric.remainingLabel",defaultMessage:"remaining"}),e[5]=o,e[6]=j):j=e[6];const _=j;let c;e[7]!==n?(c=t.jsx("p",{className:"text-token-text-tertiary text-sm font-medium",children:n}),e[7]=n,e[8]=c):c=e[8];let f;e[9]!==y?(f=t.jsx("span",{className:"text-2xl font-semibold",children:y}),e[9]=y,e[10]=f):f=e[10];let g;e[11]!==_?(g=t.jsxs("span",{className:"text-base font-normal",children:[" ",_]}),e[11]=_,e[12]=g):g=e[12];let u;e[13]!==f||e[14]!==g?(u=t.jsxs("div",{className:"text-token-text-primary flex items-baseline gap-1",children:[f,g]}),e[13]=f,e[14]=g,e[15]=u):u=e[15];let p;e[16]!==c||e[17]!==u?(p=t.jsxs("header",{className:"flex flex-col gap-1",children:[c,u]}),e[16]=c,e[17]=u,e[18]=p):p=e[18];const D="".concat(l," rounded-full");let b;e[19]!==m||e[20]!==D?(b=t.jsx(H,{percentage:m,height:12,backgroundClassName:"rounded-full bg-[#ebebf0]",barClassName:D}),e[19]=m,e[20]=D,e[21]=b):b=e[21];let w;e[22]!==m||e[23]!==r?(w=m<100?t.jsxs("div",{className:"text-token-text-tertiary flex items-center text-xs",children:[t.jsx("span",{children:r}),t.jsx("span",{className:"bg-token-border-subtle mx-2 inline-block h-1 w-1 rounded-full","aria-hidden":!0})]}):null,e[22]=m,e[23]=r,e[24]=w):w=e[24];let M;return e[25]!==b||e[26]!==w||e[27]!==p?(M=t.jsxs("article",{className:"border-token-border-subtle bg-token-bg-primary flex flex-col gap-4 rounded-3xl border p-6 shadow-[0_16px_32px_-24px_rgba(15,23,42,0.25)]",children:[p,b,w]}),e[25]=b,e[26]=w,e[27]=p,e[28]=M):M=e[28],M}const je=()=>[{title:"Codex"}],_e=A(function(){"use forget";const e=N.c(1);let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(te,{}),e[0]=a):a=e[0],a});export{_e as default,je as meta};
//# sourceMappingURL=c5mqa7nnn5xa8hg5.js.map
