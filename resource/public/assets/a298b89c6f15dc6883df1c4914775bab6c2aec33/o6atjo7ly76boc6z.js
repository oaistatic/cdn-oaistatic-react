import{r as h,j as s}from"./n75kuy1cx6f5mogg.js";import{br as S,aR as _,aS as g,$ as p,a0 as A,aO as j}from"./ewse8exzafeu10ji.js";import{S as M}from"./fzk9fwuo4wro7wsn.js";import{gX as v,gY as O,gZ as w,gE as E,g_ as R,g$ as b,h0 as C,h1 as T,h2 as J}from"./ny10lj7zpuz89fvf.js";import{u as k}from"./bd7dj080szn1mr9h.js";function N(i,r){const{automationId:o,automationTitle:e,automationMessage:y}=h.useMemo(()=>{const c=r.find(n=>n.author.role===S.Assistant),a=c?_.getParentPromptNode(g(i),c.id):null;let t=a==null?void 0:a.message.metadata;if(!(t!=null&&t.real_author_type)){const n=r.find(l=>{var u;return((u=l.metadata)==null?void 0:u.real_author_type)==="automation"});t=n==null?void 0:n.metadata}const m=(t==null?void 0:t.real_author_type)==="automation"?t==null?void 0:t.real_author_id:null,d=t==null?void 0:t.real_author_title;return{automationId:m,automationTitle:d,automationMessage:a==null?void 0:a.message}},[i,r]),{automation:x}=k(o!=null?o:"");return{automationId:o,automation:x,automationTitle:e,automationMessage:y}}function P({clientThreadId:i,messages:r}){var d,n;const{automationId:o,automation:e,automationTitle:y}=N(i,r),c=v(i).isOdysseyMode||r.some(l=>{var u;return(u=l.metadata)==null?void 0:u.n7jupd_message}),a=(d=O(i))==null?void 0:d.value,{isScheduledRun:t}=h.useContext(w),[f,m]=h.useState(!1);return h.useEffect(()=>{o&&p.count(A.JAWBONE,"jawbone_automation_source_header.open")},[o]),o?t?s.jsx("div",{className:"relative my-2 w-full",children:s.jsx(E,{automation:e,fullWidth:!0})}):c?a===j.REALTIME?null:s.jsx(R,{clientThreadId:i,children:s.jsx(b,{children:({isScheduled:l,isScheduledRun:u})=>l&&u&&s.jsx(C,{})})}):s.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[s.jsx(M,{className:"icon-sm"}),s.jsx("button",{onClick:()=>{m(!0)},children:(n=e==null?void 0:e.title)!=null?n:y}),f&&e&&s.jsx(T,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:s.jsx(J,{item:e,source:"chat",onClose:()=>{m(!1)}})})]}):null}export{P as AutomationSourceHeader};
//# sourceMappingURL=o6atjo7ly76boc6z.js.map
